(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const s of document.querySelectorAll('link[rel="modulepreload"]'))n(s);new MutationObserver(s=>{for(const i of s)if(i.type==="childList")for(const a of i.addedNodes)a.tagName==="LINK"&&a.rel==="modulepreload"&&n(a)}).observe(document,{childList:!0,subtree:!0});function r(s){const i={};return s.integrity&&(i.integrity=s.integrity),s.referrerPolicy&&(i.referrerPolicy=s.referrerPolicy),s.crossOrigin==="use-credentials"?i.credentials="include":s.crossOrigin==="anonymous"?i.credentials="omit":i.credentials="same-origin",i}function n(s){if(s.ep)return;s.ep=!0;const i=r(s);fetch(s.href,i)}})();var EW=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};function CP(t){return t&&t.__esModule&&Object.prototype.hasOwnProperty.call(t,"default")?t.default:t}var kN={exports:{}},ov={},DN={exports:{}},nr={};/**
 * @license React
 * react.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var bp=Symbol.for("react.element"),EP=Symbol.for("react.portal"),_P=Symbol.for("react.fragment"),NP=Symbol.for("react.strict_mode"),IP=Symbol.for("react.profiler"),SP=Symbol.for("react.provider"),FP=Symbol.for("react.context"),TP=Symbol.for("react.forward_ref"),UP=Symbol.for("react.suspense"),PP=Symbol.for("react.memo"),QP=Symbol.for("react.lazy"),ZB=Symbol.iterator;function LP(t){return t===null||typeof t!="object"?null:(t=ZB&&t[ZB]||t["@@iterator"],typeof t=="function"?t:null)}var RN={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},MN=Object.assign,ON={};function Dd(t,e,r){this.props=t,this.context=e,this.refs=ON,this.updater=r||RN}Dd.prototype.isReactComponent={};Dd.prototype.setState=function(t,e){if(typeof t!="object"&&typeof t!="function"&&t!=null)throw Error("setState(...): takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,t,e,"setState")};Dd.prototype.forceUpdate=function(t){this.updater.enqueueForceUpdate(this,t,"forceUpdate")};function HN(){}HN.prototype=Dd.prototype;function ux(t,e,r){this.props=t,this.context=e,this.refs=ON,this.updater=r||RN}var dx=ux.prototype=new HN;dx.constructor=ux;MN(dx,Dd.prototype);dx.isPureReactComponent=!0;var eC=Array.isArray,VN=Object.prototype.hasOwnProperty,hx={current:null},KN={key:!0,ref:!0,__self:!0,__source:!0};function qN(t,e,r){var n,s={},i=null,a=null;if(e!=null)for(n in e.ref!==void 0&&(a=e.ref),e.key!==void 0&&(i=""+e.key),e)VN.call(e,n)&&!KN.hasOwnProperty(n)&&(s[n]=e[n]);var o=arguments.length-2;if(o===1)s.children=r;else if(1<o){for(var l=Array(o),c=0;c<o;c++)l[c]=arguments[c+2];s.children=l}if(t&&t.defaultProps)for(n in o=t.defaultProps,o)s[n]===void 0&&(s[n]=o[n]);return{$$typeof:bp,type:t,key:i,ref:a,props:s,_owner:hx.current}}function jP(t,e){return{$$typeof:bp,type:t.type,key:e,ref:t.ref,props:t.props,_owner:t._owner}}function fx(t){return typeof t=="object"&&t!==null&&t.$$typeof===bp}function kP(t){var e={"=":"=0",":":"=2"};return"$"+t.replace(/[=:]/g,function(r){return e[r]})}var tC=/\/+/g;function jw(t,e){return typeof t=="object"&&t!==null&&t.key!=null?kP(""+t.key):e.toString(36)}function Eg(t,e,r,n,s){var i=typeof t;(i==="undefined"||i==="boolean")&&(t=null);var a=!1;if(t===null)a=!0;else switch(i){case"string":case"number":a=!0;break;case"object":switch(t.$$typeof){case bp:case EP:a=!0}}if(a)return a=t,s=s(a),t=n===""?"."+jw(a,0):n,eC(s)?(r="",t!=null&&(r=t.replace(tC,"$&/")+"/"),Eg(s,e,r,"",function(c){return c})):s!=null&&(fx(s)&&(s=jP(s,r+(!s.key||a&&a.key===s.key?"":(""+s.key).replace(tC,"$&/")+"/")+t)),e.push(s)),1;if(a=0,n=n===""?".":n+":",eC(t))for(var o=0;o<t.length;o++){i=t[o];var l=n+jw(i,o);a+=Eg(i,e,r,l,s)}else if(l=LP(t),typeof l=="function")for(t=l.call(t),o=0;!(i=t.next()).done;)i=i.value,l=n+jw(i,o++),a+=Eg(i,e,r,l,s);else if(i==="object")throw e=String(t),Error("Objects are not valid as a React child (found: "+(e==="[object Object]"?"object with keys {"+Object.keys(t).join(", ")+"}":e)+"). If you meant to render a collection of children, use an array instead.");return a}function vm(t,e,r){if(t==null)return t;var n=[],s=0;return Eg(t,n,"","",function(i){return e.call(r,i,s++)}),n}function DP(t){if(t._status===-1){var e=t._result;e=e(),e.then(function(r){(t._status===0||t._status===-1)&&(t._status=1,t._result=r)},function(r){(t._status===0||t._status===-1)&&(t._status=2,t._result=r)}),t._status===-1&&(t._status=0,t._result=e)}if(t._status===1)return t._result.default;throw t._result}var Ls={current:null},_g={transition:null},RP={ReactCurrentDispatcher:Ls,ReactCurrentBatchConfig:_g,ReactCurrentOwner:hx};function GN(){throw Error("act(...) is not supported in production builds of React.")}nr.Children={map:vm,forEach:function(t,e,r){vm(t,function(){e.apply(this,arguments)},r)},count:function(t){var e=0;return vm(t,function(){e++}),e},toArray:function(t){return vm(t,function(e){return e})||[]},only:function(t){if(!fx(t))throw Error("React.Children.only expected to receive a single React element child.");return t}};nr.Component=Dd;nr.Fragment=_P;nr.Profiler=IP;nr.PureComponent=ux;nr.StrictMode=NP;nr.Suspense=UP;nr.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=RP;nr.act=GN;nr.cloneElement=function(t,e,r){if(t==null)throw Error("React.cloneElement(...): The argument must be a React element, but you passed "+t+".");var n=MN({},t.props),s=t.key,i=t.ref,a=t._owner;if(e!=null){if(e.ref!==void 0&&(i=e.ref,a=hx.current),e.key!==void 0&&(s=""+e.key),t.type&&t.type.defaultProps)var o=t.type.defaultProps;for(l in e)VN.call(e,l)&&!KN.hasOwnProperty(l)&&(n[l]=e[l]===void 0&&o!==void 0?o[l]:e[l])}var l=arguments.length-2;if(l===1)n.children=r;else if(1<l){o=Array(l);for(var c=0;c<l;c++)o[c]=arguments[c+2];n.children=o}return{$$typeof:bp,type:t.type,key:s,ref:i,props:n,_owner:a}};nr.createContext=function(t){return t={$$typeof:FP,_currentValue:t,_currentValue2:t,_threadCount:0,Provider:null,Consumer:null,_defaultValue:null,_globalName:null},t.Provider={$$typeof:SP,_context:t},t.Consumer=t};nr.createElement=qN;nr.createFactory=function(t){var e=qN.bind(null,t);return e.type=t,e};nr.createRef=function(){return{current:null}};nr.forwardRef=function(t){return{$$typeof:TP,render:t}};nr.isValidElement=fx;nr.lazy=function(t){return{$$typeof:QP,_payload:{_status:-1,_result:t},_init:DP}};nr.memo=function(t,e){return{$$typeof:PP,type:t,compare:e===void 0?null:e}};nr.startTransition=function(t){var e=_g.transition;_g.transition={};try{t()}finally{_g.transition=e}};nr.unstable_act=GN;nr.useCallback=function(t,e){return Ls.current.useCallback(t,e)};nr.useContext=function(t){return Ls.current.useContext(t)};nr.useDebugValue=function(){};nr.useDeferredValue=function(t){return Ls.current.useDeferredValue(t)};nr.useEffect=function(t,e){return Ls.current.useEffect(t,e)};nr.useId=function(){return Ls.current.useId()};nr.useImperativeHandle=function(t,e,r){return Ls.current.useImperativeHandle(t,e,r)};nr.useInsertionEffect=function(t,e){return Ls.current.useInsertionEffect(t,e)};nr.useLayoutEffect=function(t,e){return Ls.current.useLayoutEffect(t,e)};nr.useMemo=function(t,e){return Ls.current.useMemo(t,e)};nr.useReducer=function(t,e,r){return Ls.current.useReducer(t,e,r)};nr.useRef=function(t){return Ls.current.useRef(t)};nr.useState=function(t){return Ls.current.useState(t)};nr.useSyncExternalStore=function(t,e,r){return Ls.current.useSyncExternalStore(t,e,r)};nr.useTransition=function(){return Ls.current.useTransition()};nr.version="18.3.1";DN.exports=nr;var P=DN.exports;const No=CP(P);/**
 * @license React
 * react-jsx-runtime.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var MP=P,OP=Symbol.for("react.element"),HP=Symbol.for("react.fragment"),VP=Object.prototype.hasOwnProperty,KP=MP.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,qP={key:!0,ref:!0,__self:!0,__source:!0};function zN(t,e,r){var n,s={},i=null,a=null;r!==void 0&&(i=""+r),e.key!==void 0&&(i=""+e.key),e.ref!==void 0&&(a=e.ref);for(n in e)VP.call(e,n)&&!qP.hasOwnProperty(n)&&(s[n]=e[n]);if(t&&t.defaultProps)for(n in e=t.defaultProps,e)s[n]===void 0&&(s[n]=e[n]);return{$$typeof:OP,type:t,key:i,ref:a,props:s,_owner:KP.current}}ov.Fragment=HP;ov.jsx=zN;ov.jsxs=zN;kN.exports=ov;var A=kN.exports,n1={},$N={exports:{}},pi={},WN={exports:{}},XN={};/**
 * @license React
 * scheduler.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */(function(t){function e(W,ue){var ae=W.length;W.push(ue);e:for(;0<ae;){var Ee=ae-1>>>1,Q=W[Ee];if(0<s(Q,ue))W[Ee]=ue,W[ae]=Q,ae=Ee;else break e}}function r(W){return W.length===0?null:W[0]}function n(W){if(W.length===0)return null;var ue=W[0],ae=W.pop();if(ae!==ue){W[0]=ae;e:for(var Ee=0,Q=W.length,k=Q>>>1;Ee<k;){var z=2*(Ee+1)-1,te=W[z],$=z+1,ne=W[$];if(0>s(te,ae))$<Q&&0>s(ne,te)?(W[Ee]=ne,W[$]=ae,Ee=$):(W[Ee]=te,W[z]=ae,Ee=z);else if($<Q&&0>s(ne,ae))W[Ee]=ne,W[$]=ae,Ee=$;else break e}}return ue}function s(W,ue){var ae=W.sortIndex-ue.sortIndex;return ae!==0?ae:W.id-ue.id}if(typeof performance=="object"&&typeof performance.now=="function"){var i=performance;t.unstable_now=function(){return i.now()}}else{var a=Date,o=a.now();t.unstable_now=function(){return a.now()-o}}var l=[],c=[],u=1,f=null,p=3,m=!1,b=!1,B=!1,_=typeof setTimeout=="function"?setTimeout:null,w=typeof clearTimeout=="function"?clearTimeout:null,y=typeof setImmediate<"u"?setImmediate:null;typeof navigator<"u"&&navigator.scheduling!==void 0&&navigator.scheduling.isInputPending!==void 0&&navigator.scheduling.isInputPending.bind(navigator.scheduling);function S(W){for(var ue=r(c);ue!==null;){if(ue.callback===null)n(c);else if(ue.startTime<=W)n(c),ue.sortIndex=ue.expirationTime,e(l,ue);else break;ue=r(c)}}function O(W){if(B=!1,S(W),!b)if(r(l)!==null)b=!0,re(R);else{var ue=r(c);ue!==null&&de(O,ue.startTime-W)}}function R(W,ue){b=!1,B&&(B=!1,w(E),E=-1),m=!0;var ae=p;try{for(S(ue),f=r(l);f!==null&&(!(f.expirationTime>ue)||W&&!N());){var Ee=f.callback;if(typeof Ee=="function"){f.callback=null,p=f.priorityLevel;var Q=Ee(f.expirationTime<=ue);ue=t.unstable_now(),typeof Q=="function"?f.callback=Q:f===r(l)&&n(l),S(ue)}else n(l);f=r(l)}if(f!==null)var k=!0;else{var z=r(c);z!==null&&de(O,z.startTime-ue),k=!1}return k}finally{f=null,p=ae,m=!1}}var M=!1,I=null,E=-1,L=5,D=-1;function N(){return!(t.unstable_now()-D<L)}function T(){if(I!==null){var W=t.unstable_now();D=W;var ue=!0;try{ue=I(!0,W)}finally{ue?F():(M=!1,I=null)}}else M=!1}var F;if(typeof y=="function")F=function(){y(T)};else if(typeof MessageChannel<"u"){var ee=new MessageChannel,ce=ee.port2;ee.port1.onmessage=T,F=function(){ce.postMessage(null)}}else F=function(){_(T,0)};function re(W){I=W,M||(M=!0,F())}function de(W,ue){E=_(function(){W(t.unstable_now())},ue)}t.unstable_IdlePriority=5,t.unstable_ImmediatePriority=1,t.unstable_LowPriority=4,t.unstable_NormalPriority=3,t.unstable_Profiling=null,t.unstable_UserBlockingPriority=2,t.unstable_cancelCallback=function(W){W.callback=null},t.unstable_continueExecution=function(){b||m||(b=!0,re(R))},t.unstable_forceFrameRate=function(W){0>W||125<W?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):L=0<W?Math.floor(1e3/W):5},t.unstable_getCurrentPriorityLevel=function(){return p},t.unstable_getFirstCallbackNode=function(){return r(l)},t.unstable_next=function(W){switch(p){case 1:case 2:case 3:var ue=3;break;default:ue=p}var ae=p;p=ue;try{return W()}finally{p=ae}},t.unstable_pauseExecution=function(){},t.unstable_requestPaint=function(){},t.unstable_runWithPriority=function(W,ue){switch(W){case 1:case 2:case 3:case 4:case 5:break;default:W=3}var ae=p;p=W;try{return ue()}finally{p=ae}},t.unstable_scheduleCallback=function(W,ue,ae){var Ee=t.unstable_now();switch(typeof ae=="object"&&ae!==null?(ae=ae.delay,ae=typeof ae=="number"&&0<ae?Ee+ae:Ee):ae=Ee,W){case 1:var Q=-1;break;case 2:Q=250;break;case 5:Q=1073741823;break;case 4:Q=1e4;break;default:Q=5e3}return Q=ae+Q,W={id:u++,callback:ue,priorityLevel:W,startTime:ae,expirationTime:Q,sortIndex:-1},ae>Ee?(W.sortIndex=ae,e(c,W),r(l)===null&&W===r(c)&&(B?(w(E),E=-1):B=!0,de(O,ae-Ee))):(W.sortIndex=Q,e(l,W),b||m||(b=!0,re(R))),W},t.unstable_shouldYield=N,t.unstable_wrapCallback=function(W){var ue=p;return function(){var ae=p;p=ue;try{return W.apply(this,arguments)}finally{p=ae}}}})(XN);WN.exports=XN;var GP=WN.exports;/**
 * @license React
 * react-dom.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var zP=P,ui=GP;function Ye(t){for(var e="https://reactjs.org/docs/error-decoder.html?invariant="+t,r=1;r<arguments.length;r++)e+="&args[]="+encodeURIComponent(arguments[r]);return"Minified React error #"+t+"; visit "+e+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var JN=new Set,jf={};function Oc(t,e){wd(t,e),wd(t+"Capture",e)}function wd(t,e){for(jf[t]=e,t=0;t<e.length;t++)JN.add(e[t])}var Lo=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),s1=Object.prototype.hasOwnProperty,$P=/^[:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD][:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\-.0-9\u00B7\u0300-\u036F\u203F-\u2040]*$/,rC={},nC={};function WP(t){return s1.call(nC,t)?!0:s1.call(rC,t)?!1:$P.test(t)?nC[t]=!0:(rC[t]=!0,!1)}function XP(t,e,r,n){if(r!==null&&r.type===0)return!1;switch(typeof e){case"function":case"symbol":return!0;case"boolean":return n?!1:r!==null?!r.acceptsBooleans:(t=t.toLowerCase().slice(0,5),t!=="data-"&&t!=="aria-");default:return!1}}function JP(t,e,r,n){if(e===null||typeof e>"u"||XP(t,e,r,n))return!0;if(n)return!1;if(r!==null)switch(r.type){case 3:return!e;case 4:return e===!1;case 5:return isNaN(e);case 6:return isNaN(e)||1>e}return!1}function js(t,e,r,n,s,i,a){this.acceptsBooleans=e===2||e===3||e===4,this.attributeName=n,this.attributeNamespace=s,this.mustUseProperty=r,this.propertyName=t,this.type=e,this.sanitizeURL=i,this.removeEmptyString=a}var ls={};"children dangerouslySetInnerHTML defaultValue defaultChecked innerHTML suppressContentEditableWarning suppressHydrationWarning style".split(" ").forEach(function(t){ls[t]=new js(t,0,!1,t,null,!1,!1)});[["acceptCharset","accept-charset"],["className","class"],["htmlFor","for"],["httpEquiv","http-equiv"]].forEach(function(t){var e=t[0];ls[e]=new js(e,1,!1,t[1],null,!1,!1)});["contentEditable","draggable","spellCheck","value"].forEach(function(t){ls[t]=new js(t,2,!1,t.toLowerCase(),null,!1,!1)});["autoReverse","externalResourcesRequired","focusable","preserveAlpha"].forEach(function(t){ls[t]=new js(t,2,!1,t,null,!1,!1)});"allowFullScreen async autoFocus autoPlay controls default defer disabled disablePictureInPicture disableRemotePlayback formNoValidate hidden loop noModule noValidate open playsInline readOnly required reversed scoped seamless itemScope".split(" ").forEach(function(t){ls[t]=new js(t,3,!1,t.toLowerCase(),null,!1,!1)});["checked","multiple","muted","selected"].forEach(function(t){ls[t]=new js(t,3,!0,t,null,!1,!1)});["capture","download"].forEach(function(t){ls[t]=new js(t,4,!1,t,null,!1,!1)});["cols","rows","size","span"].forEach(function(t){ls[t]=new js(t,6,!1,t,null,!1,!1)});["rowSpan","start"].forEach(function(t){ls[t]=new js(t,5,!1,t.toLowerCase(),null,!1,!1)});var px=/[\-:]([a-z])/g;function mx(t){return t[1].toUpperCase()}"accent-height alignment-baseline arabic-form baseline-shift cap-height clip-path clip-rule color-interpolation color-interpolation-filters color-profile color-rendering dominant-baseline enable-background fill-opacity fill-rule flood-color flood-opacity font-family font-size font-size-adjust font-stretch font-style font-variant font-weight glyph-name glyph-orientation-horizontal glyph-orientation-vertical horiz-adv-x horiz-origin-x image-rendering letter-spacing lighting-color marker-end marker-mid marker-start overline-position overline-thickness paint-order panose-1 pointer-events rendering-intent shape-rendering stop-color stop-opacity strikethrough-position strikethrough-thickness stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width text-anchor text-decoration text-rendering underline-position underline-thickness unicode-bidi unicode-range units-per-em v-alphabetic v-hanging v-ideographic v-mathematical vector-effect vert-adv-y vert-origin-x vert-origin-y word-spacing writing-mode xmlns:xlink x-height".split(" ").forEach(function(t){var e=t.replace(px,mx);ls[e]=new js(e,1,!1,t,null,!1,!1)});"xlink:actuate xlink:arcrole xlink:role xlink:show xlink:title xlink:type".split(" ").forEach(function(t){var e=t.replace(px,mx);ls[e]=new js(e,1,!1,t,"http://www.w3.org/1999/xlink",!1,!1)});["xml:base","xml:lang","xml:space"].forEach(function(t){var e=t.replace(px,mx);ls[e]=new js(e,1,!1,t,"http://www.w3.org/XML/1998/namespace",!1,!1)});["tabIndex","crossOrigin"].forEach(function(t){ls[t]=new js(t,1,!1,t.toLowerCase(),null,!1,!1)});ls.xlinkHref=new js("xlinkHref",1,!1,"xlink:href","http://www.w3.org/1999/xlink",!0,!1);["src","href","action","formAction"].forEach(function(t){ls[t]=new js(t,1,!1,t.toLowerCase(),null,!0,!0)});function gx(t,e,r,n){var s=ls.hasOwnProperty(e)?ls[e]:null;(s!==null?s.type!==0:n||!(2<e.length)||e[0]!=="o"&&e[0]!=="O"||e[1]!=="n"&&e[1]!=="N")&&(JP(e,r,s,n)&&(r=null),n||s===null?WP(e)&&(r===null?t.removeAttribute(e):t.setAttribute(e,""+r)):s.mustUseProperty?t[s.propertyName]=r===null?s.type===3?!1:"":r:(e=s.attributeName,n=s.attributeNamespace,r===null?t.removeAttribute(e):(s=s.type,r=s===3||s===4&&r===!0?"":""+r,n?t.setAttributeNS(n,e,r):t.setAttribute(e,r))))}var Ko=zP.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,wm=Symbol.for("react.element"),$u=Symbol.for("react.portal"),Wu=Symbol.for("react.fragment"),vx=Symbol.for("react.strict_mode"),i1=Symbol.for("react.profiler"),YN=Symbol.for("react.provider"),ZN=Symbol.for("react.context"),wx=Symbol.for("react.forward_ref"),a1=Symbol.for("react.suspense"),o1=Symbol.for("react.suspense_list"),yx=Symbol.for("react.memo"),TA=Symbol.for("react.lazy"),eI=Symbol.for("react.offscreen"),sC=Symbol.iterator;function xh(t){return t===null||typeof t!="object"?null:(t=sC&&t[sC]||t["@@iterator"],typeof t=="function"?t:null)}var on=Object.assign,kw;function Gh(t){if(kw===void 0)try{throw Error()}catch(r){var e=r.stack.trim().match(/\n( *(at )?)/);kw=e&&e[1]||""}return`
`+kw+t}var Dw=!1;function Rw(t,e){if(!t||Dw)return"";Dw=!0;var r=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{if(e)if(e=function(){throw Error()},Object.defineProperty(e.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(e,[])}catch(c){var n=c}Reflect.construct(t,[],e)}else{try{e.call()}catch(c){n=c}t.call(e.prototype)}else{try{throw Error()}catch(c){n=c}t()}}catch(c){if(c&&n&&typeof c.stack=="string"){for(var s=c.stack.split(`
`),i=n.stack.split(`
`),a=s.length-1,o=i.length-1;1<=a&&0<=o&&s[a]!==i[o];)o--;for(;1<=a&&0<=o;a--,o--)if(s[a]!==i[o]){if(a!==1||o!==1)do if(a--,o--,0>o||s[a]!==i[o]){var l=`
`+s[a].replace(" at new "," at ");return t.displayName&&l.includes("<anonymous>")&&(l=l.replace("<anonymous>",t.displayName)),l}while(1<=a&&0<=o);break}}}finally{Dw=!1,Error.prepareStackTrace=r}return(t=t?t.displayName||t.name:"")?Gh(t):""}function YP(t){switch(t.tag){case 5:return Gh(t.type);case 16:return Gh("Lazy");case 13:return Gh("Suspense");case 19:return Gh("SuspenseList");case 0:case 2:case 15:return t=Rw(t.type,!1),t;case 11:return t=Rw(t.type.render,!1),t;case 1:return t=Rw(t.type,!0),t;default:return""}}function A1(t){if(t==null)return null;if(typeof t=="function")return t.displayName||t.name||null;if(typeof t=="string")return t;switch(t){case Wu:return"Fragment";case $u:return"Portal";case i1:return"Profiler";case vx:return"StrictMode";case a1:return"Suspense";case o1:return"SuspenseList"}if(typeof t=="object")switch(t.$$typeof){case ZN:return(t.displayName||"Context")+".Consumer";case YN:return(t._context.displayName||"Context")+".Provider";case wx:var e=t.render;return t=t.displayName,t||(t=e.displayName||e.name||"",t=t!==""?"ForwardRef("+t+")":"ForwardRef"),t;case yx:return e=t.displayName||null,e!==null?e:A1(t.type)||"Memo";case TA:e=t._payload,t=t._init;try{return A1(t(e))}catch{}}return null}function ZP(t){var e=t.type;switch(t.tag){case 24:return"Cache";case 9:return(e.displayName||"Context")+".Consumer";case 10:return(e._context.displayName||"Context")+".Provider";case 18:return"DehydratedFragment";case 11:return t=e.render,t=t.displayName||t.name||"",e.displayName||(t!==""?"ForwardRef("+t+")":"ForwardRef");case 7:return"Fragment";case 5:return e;case 4:return"Portal";case 3:return"Root";case 6:return"Text";case 16:return A1(e);case 8:return e===vx?"StrictMode":"Mode";case 22:return"Offscreen";case 12:return"Profiler";case 21:return"Scope";case 13:return"Suspense";case 19:return"SuspenseList";case 25:return"TracingMarker";case 1:case 0:case 17:case 2:case 14:case 15:if(typeof e=="function")return e.displayName||e.name||null;if(typeof e=="string")return e}return null}function dl(t){switch(typeof t){case"boolean":case"number":case"string":case"undefined":return t;case"object":return t;default:return""}}function tI(t){var e=t.type;return(t=t.nodeName)&&t.toLowerCase()==="input"&&(e==="checkbox"||e==="radio")}function eQ(t){var e=tI(t)?"checked":"value",r=Object.getOwnPropertyDescriptor(t.constructor.prototype,e),n=""+t[e];if(!t.hasOwnProperty(e)&&typeof r<"u"&&typeof r.get=="function"&&typeof r.set=="function"){var s=r.get,i=r.set;return Object.defineProperty(t,e,{configurable:!0,get:function(){return s.call(this)},set:function(a){n=""+a,i.call(this,a)}}),Object.defineProperty(t,e,{enumerable:r.enumerable}),{getValue:function(){return n},setValue:function(a){n=""+a},stopTracking:function(){t._valueTracker=null,delete t[e]}}}}function ym(t){t._valueTracker||(t._valueTracker=eQ(t))}function rI(t){if(!t)return!1;var e=t._valueTracker;if(!e)return!0;var r=e.getValue(),n="";return t&&(n=tI(t)?t.checked?"true":"false":t.value),t=n,t!==r?(e.setValue(t),!0):!1}function r0(t){if(t=t||(typeof document<"u"?document:void 0),typeof t>"u")return null;try{return t.activeElement||t.body}catch{return t.body}}function l1(t,e){var r=e.checked;return on({},e,{defaultChecked:void 0,defaultValue:void 0,value:void 0,checked:r??t._wrapperState.initialChecked})}function iC(t,e){var r=e.defaultValue==null?"":e.defaultValue,n=e.checked!=null?e.checked:e.defaultChecked;r=dl(e.value!=null?e.value:r),t._wrapperState={initialChecked:n,initialValue:r,controlled:e.type==="checkbox"||e.type==="radio"?e.checked!=null:e.value!=null}}function nI(t,e){e=e.checked,e!=null&&gx(t,"checked",e,!1)}function c1(t,e){nI(t,e);var r=dl(e.value),n=e.type;if(r!=null)n==="number"?(r===0&&t.value===""||t.value!=r)&&(t.value=""+r):t.value!==""+r&&(t.value=""+r);else if(n==="submit"||n==="reset"){t.removeAttribute("value");return}e.hasOwnProperty("value")?u1(t,e.type,r):e.hasOwnProperty("defaultValue")&&u1(t,e.type,dl(e.defaultValue)),e.checked==null&&e.defaultChecked!=null&&(t.defaultChecked=!!e.defaultChecked)}function aC(t,e,r){if(e.hasOwnProperty("value")||e.hasOwnProperty("defaultValue")){var n=e.type;if(!(n!=="submit"&&n!=="reset"||e.value!==void 0&&e.value!==null))return;e=""+t._wrapperState.initialValue,r||e===t.value||(t.value=e),t.defaultValue=e}r=t.name,r!==""&&(t.name=""),t.defaultChecked=!!t._wrapperState.initialChecked,r!==""&&(t.name=r)}function u1(t,e,r){(e!=="number"||r0(t.ownerDocument)!==t)&&(r==null?t.defaultValue=""+t._wrapperState.initialValue:t.defaultValue!==""+r&&(t.defaultValue=""+r))}var zh=Array.isArray;function Ad(t,e,r,n){if(t=t.options,e){e={};for(var s=0;s<r.length;s++)e["$"+r[s]]=!0;for(r=0;r<t.length;r++)s=e.hasOwnProperty("$"+t[r].value),t[r].selected!==s&&(t[r].selected=s),s&&n&&(t[r].defaultSelected=!0)}else{for(r=""+dl(r),e=null,s=0;s<t.length;s++){if(t[s].value===r){t[s].selected=!0,n&&(t[s].defaultSelected=!0);return}e!==null||t[s].disabled||(e=t[s])}e!==null&&(e.selected=!0)}}function d1(t,e){if(e.dangerouslySetInnerHTML!=null)throw Error(Ye(91));return on({},e,{value:void 0,defaultValue:void 0,children:""+t._wrapperState.initialValue})}function oC(t,e){var r=e.value;if(r==null){if(r=e.children,e=e.defaultValue,r!=null){if(e!=null)throw Error(Ye(92));if(zh(r)){if(1<r.length)throw Error(Ye(93));r=r[0]}e=r}e==null&&(e=""),r=e}t._wrapperState={initialValue:dl(r)}}function sI(t,e){var r=dl(e.value),n=dl(e.defaultValue);r!=null&&(r=""+r,r!==t.value&&(t.value=r),e.defaultValue==null&&t.defaultValue!==r&&(t.defaultValue=r)),n!=null&&(t.defaultValue=""+n)}function AC(t){var e=t.textContent;e===t._wrapperState.initialValue&&e!==""&&e!==null&&(t.value=e)}function iI(t){switch(t){case"svg":return"http://www.w3.org/2000/svg";case"math":return"http://www.w3.org/1998/Math/MathML";default:return"http://www.w3.org/1999/xhtml"}}function h1(t,e){return t==null||t==="http://www.w3.org/1999/xhtml"?iI(e):t==="http://www.w3.org/2000/svg"&&e==="foreignObject"?"http://www.w3.org/1999/xhtml":t}var xm,aI=function(t){return typeof MSApp<"u"&&MSApp.execUnsafeLocalFunction?function(e,r,n,s){MSApp.execUnsafeLocalFunction(function(){return t(e,r,n,s)})}:t}(function(t,e){if(t.namespaceURI!=="http://www.w3.org/2000/svg"||"innerHTML"in t)t.innerHTML=e;else{for(xm=xm||document.createElement("div"),xm.innerHTML="<svg>"+e.valueOf().toString()+"</svg>",e=xm.firstChild;t.firstChild;)t.removeChild(t.firstChild);for(;e.firstChild;)t.appendChild(e.firstChild)}});function kf(t,e){if(e){var r=t.firstChild;if(r&&r===t.lastChild&&r.nodeType===3){r.nodeValue=e;return}}t.textContent=e}var cf={animationIterationCount:!0,aspectRatio:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridArea:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},tQ=["Webkit","ms","Moz","O"];Object.keys(cf).forEach(function(t){tQ.forEach(function(e){e=e+t.charAt(0).toUpperCase()+t.substring(1),cf[e]=cf[t]})});function oI(t,e,r){return e==null||typeof e=="boolean"||e===""?"":r||typeof e!="number"||e===0||cf.hasOwnProperty(t)&&cf[t]?(""+e).trim():e+"px"}function AI(t,e){t=t.style;for(var r in e)if(e.hasOwnProperty(r)){var n=r.indexOf("--")===0,s=oI(r,e[r],n);r==="float"&&(r="cssFloat"),n?t.setProperty(r,s):t[r]=s}}var rQ=on({menuitem:!0},{area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0});function f1(t,e){if(e){if(rQ[t]&&(e.children!=null||e.dangerouslySetInnerHTML!=null))throw Error(Ye(137,t));if(e.dangerouslySetInnerHTML!=null){if(e.children!=null)throw Error(Ye(60));if(typeof e.dangerouslySetInnerHTML!="object"||!("__html"in e.dangerouslySetInnerHTML))throw Error(Ye(61))}if(e.style!=null&&typeof e.style!="object")throw Error(Ye(62))}}function p1(t,e){if(t.indexOf("-")===-1)return typeof e.is=="string";switch(t){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var m1=null;function xx(t){return t=t.target||t.srcElement||window,t.correspondingUseElement&&(t=t.correspondingUseElement),t.nodeType===3?t.parentNode:t}var g1=null,ld=null,cd=null;function lC(t){if(t=Ep(t)){if(typeof g1!="function")throw Error(Ye(280));var e=t.stateNode;e&&(e=dv(e),g1(t.stateNode,t.type,e))}}function lI(t){ld?cd?cd.push(t):cd=[t]:ld=t}function cI(){if(ld){var t=ld,e=cd;if(cd=ld=null,lC(t),e)for(t=0;t<e.length;t++)lC(e[t])}}function uI(t,e){return t(e)}function dI(){}var Mw=!1;function hI(t,e,r){if(Mw)return t(e,r);Mw=!0;try{return uI(t,e,r)}finally{Mw=!1,(ld!==null||cd!==null)&&(dI(),cI())}}function Df(t,e){var r=t.stateNode;if(r===null)return null;var n=dv(r);if(n===null)return null;r=n[e];e:switch(e){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(n=!n.disabled)||(t=t.type,n=!(t==="button"||t==="input"||t==="select"||t==="textarea")),t=!n;break e;default:t=!1}if(t)return null;if(r&&typeof r!="function")throw Error(Ye(231,e,typeof r));return r}var v1=!1;if(Lo)try{var bh={};Object.defineProperty(bh,"passive",{get:function(){v1=!0}}),window.addEventListener("test",bh,bh),window.removeEventListener("test",bh,bh)}catch{v1=!1}function nQ(t,e,r,n,s,i,a,o,l){var c=Array.prototype.slice.call(arguments,3);try{e.apply(r,c)}catch(u){this.onError(u)}}var uf=!1,n0=null,s0=!1,w1=null,sQ={onError:function(t){uf=!0,n0=t}};function iQ(t,e,r,n,s,i,a,o,l){uf=!1,n0=null,nQ.apply(sQ,arguments)}function aQ(t,e,r,n,s,i,a,o,l){if(iQ.apply(this,arguments),uf){if(uf){var c=n0;uf=!1,n0=null}else throw Error(Ye(198));s0||(s0=!0,w1=c)}}function Hc(t){var e=t,r=t;if(t.alternate)for(;e.return;)e=e.return;else{t=e;do e=t,e.flags&4098&&(r=e.return),t=e.return;while(t)}return e.tag===3?r:null}function fI(t){if(t.tag===13){var e=t.memoizedState;if(e===null&&(t=t.alternate,t!==null&&(e=t.memoizedState)),e!==null)return e.dehydrated}return null}function cC(t){if(Hc(t)!==t)throw Error(Ye(188))}function oQ(t){var e=t.alternate;if(!e){if(e=Hc(t),e===null)throw Error(Ye(188));return e!==t?null:t}for(var r=t,n=e;;){var s=r.return;if(s===null)break;var i=s.alternate;if(i===null){if(n=s.return,n!==null){r=n;continue}break}if(s.child===i.child){for(i=s.child;i;){if(i===r)return cC(s),t;if(i===n)return cC(s),e;i=i.sibling}throw Error(Ye(188))}if(r.return!==n.return)r=s,n=i;else{for(var a=!1,o=s.child;o;){if(o===r){a=!0,r=s,n=i;break}if(o===n){a=!0,n=s,r=i;break}o=o.sibling}if(!a){for(o=i.child;o;){if(o===r){a=!0,r=i,n=s;break}if(o===n){a=!0,n=i,r=s;break}o=o.sibling}if(!a)throw Error(Ye(189))}}if(r.alternate!==n)throw Error(Ye(190))}if(r.tag!==3)throw Error(Ye(188));return r.stateNode.current===r?t:e}function pI(t){return t=oQ(t),t!==null?mI(t):null}function mI(t){if(t.tag===5||t.tag===6)return t;for(t=t.child;t!==null;){var e=mI(t);if(e!==null)return e;t=t.sibling}return null}var gI=ui.unstable_scheduleCallback,uC=ui.unstable_cancelCallback,AQ=ui.unstable_shouldYield,lQ=ui.unstable_requestPaint,wn=ui.unstable_now,cQ=ui.unstable_getCurrentPriorityLevel,bx=ui.unstable_ImmediatePriority,vI=ui.unstable_UserBlockingPriority,i0=ui.unstable_NormalPriority,uQ=ui.unstable_LowPriority,wI=ui.unstable_IdlePriority,Av=null,Da=null;function dQ(t){if(Da&&typeof Da.onCommitFiberRoot=="function")try{Da.onCommitFiberRoot(Av,t,void 0,(t.current.flags&128)===128)}catch{}}var sa=Math.clz32?Math.clz32:pQ,hQ=Math.log,fQ=Math.LN2;function pQ(t){return t>>>=0,t===0?32:31-(hQ(t)/fQ|0)|0}var bm=64,Bm=4194304;function $h(t){switch(t&-t){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return t&4194240;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return t&130023424;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 1073741824;default:return t}}function a0(t,e){var r=t.pendingLanes;if(r===0)return 0;var n=0,s=t.suspendedLanes,i=t.pingedLanes,a=r&268435455;if(a!==0){var o=a&~s;o!==0?n=$h(o):(i&=a,i!==0&&(n=$h(i)))}else a=r&~s,a!==0?n=$h(a):i!==0&&(n=$h(i));if(n===0)return 0;if(e!==0&&e!==n&&!(e&s)&&(s=n&-n,i=e&-e,s>=i||s===16&&(i&4194240)!==0))return e;if(n&4&&(n|=r&16),e=t.entangledLanes,e!==0)for(t=t.entanglements,e&=n;0<e;)r=31-sa(e),s=1<<r,n|=t[r],e&=~s;return n}function mQ(t,e){switch(t){case 1:case 2:case 4:return e+250;case 8:case 16:case 32:case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return e+5e3;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return-1;case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function gQ(t,e){for(var r=t.suspendedLanes,n=t.pingedLanes,s=t.expirationTimes,i=t.pendingLanes;0<i;){var a=31-sa(i),o=1<<a,l=s[a];l===-1?(!(o&r)||o&n)&&(s[a]=mQ(o,e)):l<=e&&(t.expiredLanes|=o),i&=~o}}function y1(t){return t=t.pendingLanes&-1073741825,t!==0?t:t&1073741824?1073741824:0}function yI(){var t=bm;return bm<<=1,!(bm&4194240)&&(bm=64),t}function Ow(t){for(var e=[],r=0;31>r;r++)e.push(t);return e}function Bp(t,e,r){t.pendingLanes|=e,e!==536870912&&(t.suspendedLanes=0,t.pingedLanes=0),t=t.eventTimes,e=31-sa(e),t[e]=r}function vQ(t,e){var r=t.pendingLanes&~e;t.pendingLanes=e,t.suspendedLanes=0,t.pingedLanes=0,t.expiredLanes&=e,t.mutableReadLanes&=e,t.entangledLanes&=e,e=t.entanglements;var n=t.eventTimes;for(t=t.expirationTimes;0<r;){var s=31-sa(r),i=1<<s;e[s]=0,n[s]=-1,t[s]=-1,r&=~i}}function Bx(t,e){var r=t.entangledLanes|=e;for(t=t.entanglements;r;){var n=31-sa(r),s=1<<n;s&e|t[n]&e&&(t[n]|=e),r&=~s}}var Ir=0;function xI(t){return t&=-t,1<t?4<t?t&268435455?16:536870912:4:1}var bI,Cx,BI,CI,EI,x1=!1,Cm=[],XA=null,JA=null,YA=null,Rf=new Map,Mf=new Map,QA=[],wQ="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset submit".split(" ");function dC(t,e){switch(t){case"focusin":case"focusout":XA=null;break;case"dragenter":case"dragleave":JA=null;break;case"mouseover":case"mouseout":YA=null;break;case"pointerover":case"pointerout":Rf.delete(e.pointerId);break;case"gotpointercapture":case"lostpointercapture":Mf.delete(e.pointerId)}}function Bh(t,e,r,n,s,i){return t===null||t.nativeEvent!==i?(t={blockedOn:e,domEventName:r,eventSystemFlags:n,nativeEvent:i,targetContainers:[s]},e!==null&&(e=Ep(e),e!==null&&Cx(e)),t):(t.eventSystemFlags|=n,e=t.targetContainers,s!==null&&e.indexOf(s)===-1&&e.push(s),t)}function yQ(t,e,r,n,s){switch(e){case"focusin":return XA=Bh(XA,t,e,r,n,s),!0;case"dragenter":return JA=Bh(JA,t,e,r,n,s),!0;case"mouseover":return YA=Bh(YA,t,e,r,n,s),!0;case"pointerover":var i=s.pointerId;return Rf.set(i,Bh(Rf.get(i)||null,t,e,r,n,s)),!0;case"gotpointercapture":return i=s.pointerId,Mf.set(i,Bh(Mf.get(i)||null,t,e,r,n,s)),!0}return!1}function _I(t){var e=dc(t.target);if(e!==null){var r=Hc(e);if(r!==null){if(e=r.tag,e===13){if(e=fI(r),e!==null){t.blockedOn=e,EI(t.priority,function(){BI(r)});return}}else if(e===3&&r.stateNode.current.memoizedState.isDehydrated){t.blockedOn=r.tag===3?r.stateNode.containerInfo:null;return}}}t.blockedOn=null}function Ng(t){if(t.blockedOn!==null)return!1;for(var e=t.targetContainers;0<e.length;){var r=b1(t.domEventName,t.eventSystemFlags,e[0],t.nativeEvent);if(r===null){r=t.nativeEvent;var n=new r.constructor(r.type,r);m1=n,r.target.dispatchEvent(n),m1=null}else return e=Ep(r),e!==null&&Cx(e),t.blockedOn=r,!1;e.shift()}return!0}function hC(t,e,r){Ng(t)&&r.delete(e)}function xQ(){x1=!1,XA!==null&&Ng(XA)&&(XA=null),JA!==null&&Ng(JA)&&(JA=null),YA!==null&&Ng(YA)&&(YA=null),Rf.forEach(hC),Mf.forEach(hC)}function Ch(t,e){t.blockedOn===e&&(t.blockedOn=null,x1||(x1=!0,ui.unstable_scheduleCallback(ui.unstable_NormalPriority,xQ)))}function Of(t){function e(s){return Ch(s,t)}if(0<Cm.length){Ch(Cm[0],t);for(var r=1;r<Cm.length;r++){var n=Cm[r];n.blockedOn===t&&(n.blockedOn=null)}}for(XA!==null&&Ch(XA,t),JA!==null&&Ch(JA,t),YA!==null&&Ch(YA,t),Rf.forEach(e),Mf.forEach(e),r=0;r<QA.length;r++)n=QA[r],n.blockedOn===t&&(n.blockedOn=null);for(;0<QA.length&&(r=QA[0],r.blockedOn===null);)_I(r),r.blockedOn===null&&QA.shift()}var ud=Ko.ReactCurrentBatchConfig,o0=!0;function bQ(t,e,r,n){var s=Ir,i=ud.transition;ud.transition=null;try{Ir=1,Ex(t,e,r,n)}finally{Ir=s,ud.transition=i}}function BQ(t,e,r,n){var s=Ir,i=ud.transition;ud.transition=null;try{Ir=4,Ex(t,e,r,n)}finally{Ir=s,ud.transition=i}}function Ex(t,e,r,n){if(o0){var s=b1(t,e,r,n);if(s===null)Jw(t,e,n,A0,r),dC(t,n);else if(yQ(s,t,e,r,n))n.stopPropagation();else if(dC(t,n),e&4&&-1<wQ.indexOf(t)){for(;s!==null;){var i=Ep(s);if(i!==null&&bI(i),i=b1(t,e,r,n),i===null&&Jw(t,e,n,A0,r),i===s)break;s=i}s!==null&&n.stopPropagation()}else Jw(t,e,n,null,r)}}var A0=null;function b1(t,e,r,n){if(A0=null,t=xx(n),t=dc(t),t!==null)if(e=Hc(t),e===null)t=null;else if(r=e.tag,r===13){if(t=fI(e),t!==null)return t;t=null}else if(r===3){if(e.stateNode.current.memoizedState.isDehydrated)return e.tag===3?e.stateNode.containerInfo:null;t=null}else e!==t&&(t=null);return A0=t,null}function NI(t){switch(t){case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 1;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"toggle":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 4;case"message":switch(cQ()){case bx:return 1;case vI:return 4;case i0:case uQ:return 16;case wI:return 536870912;default:return 16}default:return 16}}var VA=null,_x=null,Ig=null;function II(){if(Ig)return Ig;var t,e=_x,r=e.length,n,s="value"in VA?VA.value:VA.textContent,i=s.length;for(t=0;t<r&&e[t]===s[t];t++);var a=r-t;for(n=1;n<=a&&e[r-n]===s[i-n];n++);return Ig=s.slice(t,1<n?1-n:void 0)}function Sg(t){var e=t.keyCode;return"charCode"in t?(t=t.charCode,t===0&&e===13&&(t=13)):t=e,t===10&&(t=13),32<=t||t===13?t:0}function Em(){return!0}function fC(){return!1}function mi(t){function e(r,n,s,i,a){this._reactName=r,this._targetInst=s,this.type=n,this.nativeEvent=i,this.target=a,this.currentTarget=null;for(var o in t)t.hasOwnProperty(o)&&(r=t[o],this[o]=r?r(i):i[o]);return this.isDefaultPrevented=(i.defaultPrevented!=null?i.defaultPrevented:i.returnValue===!1)?Em:fC,this.isPropagationStopped=fC,this}return on(e.prototype,{preventDefault:function(){this.defaultPrevented=!0;var r=this.nativeEvent;r&&(r.preventDefault?r.preventDefault():typeof r.returnValue!="unknown"&&(r.returnValue=!1),this.isDefaultPrevented=Em)},stopPropagation:function(){var r=this.nativeEvent;r&&(r.stopPropagation?r.stopPropagation():typeof r.cancelBubble!="unknown"&&(r.cancelBubble=!0),this.isPropagationStopped=Em)},persist:function(){},isPersistent:Em}),e}var Rd={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(t){return t.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},Nx=mi(Rd),Cp=on({},Rd,{view:0,detail:0}),CQ=mi(Cp),Hw,Vw,Eh,lv=on({},Cp,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:Ix,button:0,buttons:0,relatedTarget:function(t){return t.relatedTarget===void 0?t.fromElement===t.srcElement?t.toElement:t.fromElement:t.relatedTarget},movementX:function(t){return"movementX"in t?t.movementX:(t!==Eh&&(Eh&&t.type==="mousemove"?(Hw=t.screenX-Eh.screenX,Vw=t.screenY-Eh.screenY):Vw=Hw=0,Eh=t),Hw)},movementY:function(t){return"movementY"in t?t.movementY:Vw}}),pC=mi(lv),EQ=on({},lv,{dataTransfer:0}),_Q=mi(EQ),NQ=on({},Cp,{relatedTarget:0}),Kw=mi(NQ),IQ=on({},Rd,{animationName:0,elapsedTime:0,pseudoElement:0}),SQ=mi(IQ),FQ=on({},Rd,{clipboardData:function(t){return"clipboardData"in t?t.clipboardData:window.clipboardData}}),TQ=mi(FQ),UQ=on({},Rd,{data:0}),mC=mi(UQ),PQ={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},QQ={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},LQ={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function jQ(t){var e=this.nativeEvent;return e.getModifierState?e.getModifierState(t):(t=LQ[t])?!!e[t]:!1}function Ix(){return jQ}var kQ=on({},Cp,{key:function(t){if(t.key){var e=PQ[t.key]||t.key;if(e!=="Unidentified")return e}return t.type==="keypress"?(t=Sg(t),t===13?"Enter":String.fromCharCode(t)):t.type==="keydown"||t.type==="keyup"?QQ[t.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:Ix,charCode:function(t){return t.type==="keypress"?Sg(t):0},keyCode:function(t){return t.type==="keydown"||t.type==="keyup"?t.keyCode:0},which:function(t){return t.type==="keypress"?Sg(t):t.type==="keydown"||t.type==="keyup"?t.keyCode:0}}),DQ=mi(kQ),RQ=on({},lv,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),gC=mi(RQ),MQ=on({},Cp,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:Ix}),OQ=mi(MQ),HQ=on({},Rd,{propertyName:0,elapsedTime:0,pseudoElement:0}),VQ=mi(HQ),KQ=on({},lv,{deltaX:function(t){return"deltaX"in t?t.deltaX:"wheelDeltaX"in t?-t.wheelDeltaX:0},deltaY:function(t){return"deltaY"in t?t.deltaY:"wheelDeltaY"in t?-t.wheelDeltaY:"wheelDelta"in t?-t.wheelDelta:0},deltaZ:0,deltaMode:0}),qQ=mi(KQ),GQ=[9,13,27,32],Sx=Lo&&"CompositionEvent"in window,df=null;Lo&&"documentMode"in document&&(df=document.documentMode);var zQ=Lo&&"TextEvent"in window&&!df,SI=Lo&&(!Sx||df&&8<df&&11>=df),vC=" ",wC=!1;function FI(t,e){switch(t){case"keyup":return GQ.indexOf(e.keyCode)!==-1;case"keydown":return e.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function TI(t){return t=t.detail,typeof t=="object"&&"data"in t?t.data:null}var Xu=!1;function $Q(t,e){switch(t){case"compositionend":return TI(e);case"keypress":return e.which!==32?null:(wC=!0,vC);case"textInput":return t=e.data,t===vC&&wC?null:t;default:return null}}function WQ(t,e){if(Xu)return t==="compositionend"||!Sx&&FI(t,e)?(t=II(),Ig=_x=VA=null,Xu=!1,t):null;switch(t){case"paste":return null;case"keypress":if(!(e.ctrlKey||e.altKey||e.metaKey)||e.ctrlKey&&e.altKey){if(e.char&&1<e.char.length)return e.char;if(e.which)return String.fromCharCode(e.which)}return null;case"compositionend":return SI&&e.locale!=="ko"?null:e.data;default:return null}}var XQ={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function yC(t){var e=t&&t.nodeName&&t.nodeName.toLowerCase();return e==="input"?!!XQ[t.type]:e==="textarea"}function UI(t,e,r,n){lI(n),e=l0(e,"onChange"),0<e.length&&(r=new Nx("onChange","change",null,r,n),t.push({event:r,listeners:e}))}var hf=null,Hf=null;function JQ(t){VI(t,0)}function cv(t){var e=Zu(t);if(rI(e))return t}function YQ(t,e){if(t==="change")return e}var PI=!1;if(Lo){var qw;if(Lo){var Gw="oninput"in document;if(!Gw){var xC=document.createElement("div");xC.setAttribute("oninput","return;"),Gw=typeof xC.oninput=="function"}qw=Gw}else qw=!1;PI=qw&&(!document.documentMode||9<document.documentMode)}function bC(){hf&&(hf.detachEvent("onpropertychange",QI),Hf=hf=null)}function QI(t){if(t.propertyName==="value"&&cv(Hf)){var e=[];UI(e,Hf,t,xx(t)),hI(JQ,e)}}function ZQ(t,e,r){t==="focusin"?(bC(),hf=e,Hf=r,hf.attachEvent("onpropertychange",QI)):t==="focusout"&&bC()}function eL(t){if(t==="selectionchange"||t==="keyup"||t==="keydown")return cv(Hf)}function tL(t,e){if(t==="click")return cv(e)}function rL(t,e){if(t==="input"||t==="change")return cv(e)}function nL(t,e){return t===e&&(t!==0||1/t===1/e)||t!==t&&e!==e}var oa=typeof Object.is=="function"?Object.is:nL;function Vf(t,e){if(oa(t,e))return!0;if(typeof t!="object"||t===null||typeof e!="object"||e===null)return!1;var r=Object.keys(t),n=Object.keys(e);if(r.length!==n.length)return!1;for(n=0;n<r.length;n++){var s=r[n];if(!s1.call(e,s)||!oa(t[s],e[s]))return!1}return!0}function BC(t){for(;t&&t.firstChild;)t=t.firstChild;return t}function CC(t,e){var r=BC(t);t=0;for(var n;r;){if(r.nodeType===3){if(n=t+r.textContent.length,t<=e&&n>=e)return{node:r,offset:e-t};t=n}e:{for(;r;){if(r.nextSibling){r=r.nextSibling;break e}r=r.parentNode}r=void 0}r=BC(r)}}function LI(t,e){return t&&e?t===e?!0:t&&t.nodeType===3?!1:e&&e.nodeType===3?LI(t,e.parentNode):"contains"in t?t.contains(e):t.compareDocumentPosition?!!(t.compareDocumentPosition(e)&16):!1:!1}function jI(){for(var t=window,e=r0();e instanceof t.HTMLIFrameElement;){try{var r=typeof e.contentWindow.location.href=="string"}catch{r=!1}if(r)t=e.contentWindow;else break;e=r0(t.document)}return e}function Fx(t){var e=t&&t.nodeName&&t.nodeName.toLowerCase();return e&&(e==="input"&&(t.type==="text"||t.type==="search"||t.type==="tel"||t.type==="url"||t.type==="password")||e==="textarea"||t.contentEditable==="true")}function sL(t){var e=jI(),r=t.focusedElem,n=t.selectionRange;if(e!==r&&r&&r.ownerDocument&&LI(r.ownerDocument.documentElement,r)){if(n!==null&&Fx(r)){if(e=n.start,t=n.end,t===void 0&&(t=e),"selectionStart"in r)r.selectionStart=e,r.selectionEnd=Math.min(t,r.value.length);else if(t=(e=r.ownerDocument||document)&&e.defaultView||window,t.getSelection){t=t.getSelection();var s=r.textContent.length,i=Math.min(n.start,s);n=n.end===void 0?i:Math.min(n.end,s),!t.extend&&i>n&&(s=n,n=i,i=s),s=CC(r,i);var a=CC(r,n);s&&a&&(t.rangeCount!==1||t.anchorNode!==s.node||t.anchorOffset!==s.offset||t.focusNode!==a.node||t.focusOffset!==a.offset)&&(e=e.createRange(),e.setStart(s.node,s.offset),t.removeAllRanges(),i>n?(t.addRange(e),t.extend(a.node,a.offset)):(e.setEnd(a.node,a.offset),t.addRange(e)))}}for(e=[],t=r;t=t.parentNode;)t.nodeType===1&&e.push({element:t,left:t.scrollLeft,top:t.scrollTop});for(typeof r.focus=="function"&&r.focus(),r=0;r<e.length;r++)t=e[r],t.element.scrollLeft=t.left,t.element.scrollTop=t.top}}var iL=Lo&&"documentMode"in document&&11>=document.documentMode,Ju=null,B1=null,ff=null,C1=!1;function EC(t,e,r){var n=r.window===r?r.document:r.nodeType===9?r:r.ownerDocument;C1||Ju==null||Ju!==r0(n)||(n=Ju,"selectionStart"in n&&Fx(n)?n={start:n.selectionStart,end:n.selectionEnd}:(n=(n.ownerDocument&&n.ownerDocument.defaultView||window).getSelection(),n={anchorNode:n.anchorNode,anchorOffset:n.anchorOffset,focusNode:n.focusNode,focusOffset:n.focusOffset}),ff&&Vf(ff,n)||(ff=n,n=l0(B1,"onSelect"),0<n.length&&(e=new Nx("onSelect","select",null,e,r),t.push({event:e,listeners:n}),e.target=Ju)))}function _m(t,e){var r={};return r[t.toLowerCase()]=e.toLowerCase(),r["Webkit"+t]="webkit"+e,r["Moz"+t]="moz"+e,r}var Yu={animationend:_m("Animation","AnimationEnd"),animationiteration:_m("Animation","AnimationIteration"),animationstart:_m("Animation","AnimationStart"),transitionend:_m("Transition","TransitionEnd")},zw={},kI={};Lo&&(kI=document.createElement("div").style,"AnimationEvent"in window||(delete Yu.animationend.animation,delete Yu.animationiteration.animation,delete Yu.animationstart.animation),"TransitionEvent"in window||delete Yu.transitionend.transition);function uv(t){if(zw[t])return zw[t];if(!Yu[t])return t;var e=Yu[t],r;for(r in e)if(e.hasOwnProperty(r)&&r in kI)return zw[t]=e[r];return t}var DI=uv("animationend"),RI=uv("animationiteration"),MI=uv("animationstart"),OI=uv("transitionend"),HI=new Map,_C="abort auxClick cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");function Bl(t,e){HI.set(t,e),Oc(e,[t])}for(var $w=0;$w<_C.length;$w++){var Ww=_C[$w],aL=Ww.toLowerCase(),oL=Ww[0].toUpperCase()+Ww.slice(1);Bl(aL,"on"+oL)}Bl(DI,"onAnimationEnd");Bl(RI,"onAnimationIteration");Bl(MI,"onAnimationStart");Bl("dblclick","onDoubleClick");Bl("focusin","onFocus");Bl("focusout","onBlur");Bl(OI,"onTransitionEnd");wd("onMouseEnter",["mouseout","mouseover"]);wd("onMouseLeave",["mouseout","mouseover"]);wd("onPointerEnter",["pointerout","pointerover"]);wd("onPointerLeave",["pointerout","pointerover"]);Oc("onChange","change click focusin focusout input keydown keyup selectionchange".split(" "));Oc("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" "));Oc("onBeforeInput",["compositionend","keypress","textInput","paste"]);Oc("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" "));Oc("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" "));Oc("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var Wh="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),AL=new Set("cancel close invalid load scroll toggle".split(" ").concat(Wh));function NC(t,e,r){var n=t.type||"unknown-event";t.currentTarget=r,aQ(n,e,void 0,t),t.currentTarget=null}function VI(t,e){e=(e&4)!==0;for(var r=0;r<t.length;r++){var n=t[r],s=n.event;n=n.listeners;e:{var i=void 0;if(e)for(var a=n.length-1;0<=a;a--){var o=n[a],l=o.instance,c=o.currentTarget;if(o=o.listener,l!==i&&s.isPropagationStopped())break e;NC(s,o,c),i=l}else for(a=0;a<n.length;a++){if(o=n[a],l=o.instance,c=o.currentTarget,o=o.listener,l!==i&&s.isPropagationStopped())break e;NC(s,o,c),i=l}}}if(s0)throw t=w1,s0=!1,w1=null,t}function Vr(t,e){var r=e[S1];r===void 0&&(r=e[S1]=new Set);var n=t+"__bubble";r.has(n)||(KI(e,t,2,!1),r.add(n))}function Xw(t,e,r){var n=0;e&&(n|=4),KI(r,t,n,e)}var Nm="_reactListening"+Math.random().toString(36).slice(2);function Kf(t){if(!t[Nm]){t[Nm]=!0,JN.forEach(function(r){r!=="selectionchange"&&(AL.has(r)||Xw(r,!1,t),Xw(r,!0,t))});var e=t.nodeType===9?t:t.ownerDocument;e===null||e[Nm]||(e[Nm]=!0,Xw("selectionchange",!1,e))}}function KI(t,e,r,n){switch(NI(e)){case 1:var s=bQ;break;case 4:s=BQ;break;default:s=Ex}r=s.bind(null,e,r,t),s=void 0,!v1||e!=="touchstart"&&e!=="touchmove"&&e!=="wheel"||(s=!0),n?s!==void 0?t.addEventListener(e,r,{capture:!0,passive:s}):t.addEventListener(e,r,!0):s!==void 0?t.addEventListener(e,r,{passive:s}):t.addEventListener(e,r,!1)}function Jw(t,e,r,n,s){var i=n;if(!(e&1)&&!(e&2)&&n!==null)e:for(;;){if(n===null)return;var a=n.tag;if(a===3||a===4){var o=n.stateNode.containerInfo;if(o===s||o.nodeType===8&&o.parentNode===s)break;if(a===4)for(a=n.return;a!==null;){var l=a.tag;if((l===3||l===4)&&(l=a.stateNode.containerInfo,l===s||l.nodeType===8&&l.parentNode===s))return;a=a.return}for(;o!==null;){if(a=dc(o),a===null)return;if(l=a.tag,l===5||l===6){n=i=a;continue e}o=o.parentNode}}n=n.return}hI(function(){var c=i,u=xx(r),f=[];e:{var p=HI.get(t);if(p!==void 0){var m=Nx,b=t;switch(t){case"keypress":if(Sg(r)===0)break e;case"keydown":case"keyup":m=DQ;break;case"focusin":b="focus",m=Kw;break;case"focusout":b="blur",m=Kw;break;case"beforeblur":case"afterblur":m=Kw;break;case"click":if(r.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":m=pC;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":m=_Q;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":m=OQ;break;case DI:case RI:case MI:m=SQ;break;case OI:m=VQ;break;case"scroll":m=CQ;break;case"wheel":m=qQ;break;case"copy":case"cut":case"paste":m=TQ;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":m=gC}var B=(e&4)!==0,_=!B&&t==="scroll",w=B?p!==null?p+"Capture":null:p;B=[];for(var y=c,S;y!==null;){S=y;var O=S.stateNode;if(S.tag===5&&O!==null&&(S=O,w!==null&&(O=Df(y,w),O!=null&&B.push(qf(y,O,S)))),_)break;y=y.return}0<B.length&&(p=new m(p,b,null,r,u),f.push({event:p,listeners:B}))}}if(!(e&7)){e:{if(p=t==="mouseover"||t==="pointerover",m=t==="mouseout"||t==="pointerout",p&&r!==m1&&(b=r.relatedTarget||r.fromElement)&&(dc(b)||b[jo]))break e;if((m||p)&&(p=u.window===u?u:(p=u.ownerDocument)?p.defaultView||p.parentWindow:window,m?(b=r.relatedTarget||r.toElement,m=c,b=b?dc(b):null,b!==null&&(_=Hc(b),b!==_||b.tag!==5&&b.tag!==6)&&(b=null)):(m=null,b=c),m!==b)){if(B=pC,O="onMouseLeave",w="onMouseEnter",y="mouse",(t==="pointerout"||t==="pointerover")&&(B=gC,O="onPointerLeave",w="onPointerEnter",y="pointer"),_=m==null?p:Zu(m),S=b==null?p:Zu(b),p=new B(O,y+"leave",m,r,u),p.target=_,p.relatedTarget=S,O=null,dc(u)===c&&(B=new B(w,y+"enter",b,r,u),B.target=S,B.relatedTarget=_,O=B),_=O,m&&b)t:{for(B=m,w=b,y=0,S=B;S;S=yu(S))y++;for(S=0,O=w;O;O=yu(O))S++;for(;0<y-S;)B=yu(B),y--;for(;0<S-y;)w=yu(w),S--;for(;y--;){if(B===w||w!==null&&B===w.alternate)break t;B=yu(B),w=yu(w)}B=null}else B=null;m!==null&&IC(f,p,m,B,!1),b!==null&&_!==null&&IC(f,_,b,B,!0)}}e:{if(p=c?Zu(c):window,m=p.nodeName&&p.nodeName.toLowerCase(),m==="select"||m==="input"&&p.type==="file")var R=YQ;else if(yC(p))if(PI)R=rL;else{R=eL;var M=ZQ}else(m=p.nodeName)&&m.toLowerCase()==="input"&&(p.type==="checkbox"||p.type==="radio")&&(R=tL);if(R&&(R=R(t,c))){UI(f,R,r,u);break e}M&&M(t,p,c),t==="focusout"&&(M=p._wrapperState)&&M.controlled&&p.type==="number"&&u1(p,"number",p.value)}switch(M=c?Zu(c):window,t){case"focusin":(yC(M)||M.contentEditable==="true")&&(Ju=M,B1=c,ff=null);break;case"focusout":ff=B1=Ju=null;break;case"mousedown":C1=!0;break;case"contextmenu":case"mouseup":case"dragend":C1=!1,EC(f,r,u);break;case"selectionchange":if(iL)break;case"keydown":case"keyup":EC(f,r,u)}var I;if(Sx)e:{switch(t){case"compositionstart":var E="onCompositionStart";break e;case"compositionend":E="onCompositionEnd";break e;case"compositionupdate":E="onCompositionUpdate";break e}E=void 0}else Xu?FI(t,r)&&(E="onCompositionEnd"):t==="keydown"&&r.keyCode===229&&(E="onCompositionStart");E&&(SI&&r.locale!=="ko"&&(Xu||E!=="onCompositionStart"?E==="onCompositionEnd"&&Xu&&(I=II()):(VA=u,_x="value"in VA?VA.value:VA.textContent,Xu=!0)),M=l0(c,E),0<M.length&&(E=new mC(E,t,null,r,u),f.push({event:E,listeners:M}),I?E.data=I:(I=TI(r),I!==null&&(E.data=I)))),(I=zQ?$Q(t,r):WQ(t,r))&&(c=l0(c,"onBeforeInput"),0<c.length&&(u=new mC("onBeforeInput","beforeinput",null,r,u),f.push({event:u,listeners:c}),u.data=I))}VI(f,e)})}function qf(t,e,r){return{instance:t,listener:e,currentTarget:r}}function l0(t,e){for(var r=e+"Capture",n=[];t!==null;){var s=t,i=s.stateNode;s.tag===5&&i!==null&&(s=i,i=Df(t,r),i!=null&&n.unshift(qf(t,i,s)),i=Df(t,e),i!=null&&n.push(qf(t,i,s))),t=t.return}return n}function yu(t){if(t===null)return null;do t=t.return;while(t&&t.tag!==5);return t||null}function IC(t,e,r,n,s){for(var i=e._reactName,a=[];r!==null&&r!==n;){var o=r,l=o.alternate,c=o.stateNode;if(l!==null&&l===n)break;o.tag===5&&c!==null&&(o=c,s?(l=Df(r,i),l!=null&&a.unshift(qf(r,l,o))):s||(l=Df(r,i),l!=null&&a.push(qf(r,l,o)))),r=r.return}a.length!==0&&t.push({event:e,listeners:a})}var lL=/\r\n?/g,cL=/\u0000|\uFFFD/g;function SC(t){return(typeof t=="string"?t:""+t).replace(lL,`
`).replace(cL,"")}function Im(t,e,r){if(e=SC(e),SC(t)!==e&&r)throw Error(Ye(425))}function c0(){}var E1=null,_1=null;function N1(t,e){return t==="textarea"||t==="noscript"||typeof e.children=="string"||typeof e.children=="number"||typeof e.dangerouslySetInnerHTML=="object"&&e.dangerouslySetInnerHTML!==null&&e.dangerouslySetInnerHTML.__html!=null}var I1=typeof setTimeout=="function"?setTimeout:void 0,uL=typeof clearTimeout=="function"?clearTimeout:void 0,FC=typeof Promise=="function"?Promise:void 0,dL=typeof queueMicrotask=="function"?queueMicrotask:typeof FC<"u"?function(t){return FC.resolve(null).then(t).catch(hL)}:I1;function hL(t){setTimeout(function(){throw t})}function Yw(t,e){var r=e,n=0;do{var s=r.nextSibling;if(t.removeChild(r),s&&s.nodeType===8)if(r=s.data,r==="/$"){if(n===0){t.removeChild(s),Of(e);return}n--}else r!=="$"&&r!=="$?"&&r!=="$!"||n++;r=s}while(r);Of(e)}function ZA(t){for(;t!=null;t=t.nextSibling){var e=t.nodeType;if(e===1||e===3)break;if(e===8){if(e=t.data,e==="$"||e==="$!"||e==="$?")break;if(e==="/$")return null}}return t}function TC(t){t=t.previousSibling;for(var e=0;t;){if(t.nodeType===8){var r=t.data;if(r==="$"||r==="$!"||r==="$?"){if(e===0)return t;e--}else r==="/$"&&e++}t=t.previousSibling}return null}var Md=Math.random().toString(36).slice(2),Pa="__reactFiber$"+Md,Gf="__reactProps$"+Md,jo="__reactContainer$"+Md,S1="__reactEvents$"+Md,fL="__reactListeners$"+Md,pL="__reactHandles$"+Md;function dc(t){var e=t[Pa];if(e)return e;for(var r=t.parentNode;r;){if(e=r[jo]||r[Pa]){if(r=e.alternate,e.child!==null||r!==null&&r.child!==null)for(t=TC(t);t!==null;){if(r=t[Pa])return r;t=TC(t)}return e}t=r,r=t.parentNode}return null}function Ep(t){return t=t[Pa]||t[jo],!t||t.tag!==5&&t.tag!==6&&t.tag!==13&&t.tag!==3?null:t}function Zu(t){if(t.tag===5||t.tag===6)return t.stateNode;throw Error(Ye(33))}function dv(t){return t[Gf]||null}var F1=[],ed=-1;function Cl(t){return{current:t}}function Gr(t){0>ed||(t.current=F1[ed],F1[ed]=null,ed--)}function Rr(t,e){ed++,F1[ed]=t.current,t.current=e}var hl={},Cs=Cl(hl),$s=Cl(!1),Nc=hl;function yd(t,e){var r=t.type.contextTypes;if(!r)return hl;var n=t.stateNode;if(n&&n.__reactInternalMemoizedUnmaskedChildContext===e)return n.__reactInternalMemoizedMaskedChildContext;var s={},i;for(i in r)s[i]=e[i];return n&&(t=t.stateNode,t.__reactInternalMemoizedUnmaskedChildContext=e,t.__reactInternalMemoizedMaskedChildContext=s),s}function Ws(t){return t=t.childContextTypes,t!=null}function u0(){Gr($s),Gr(Cs)}function UC(t,e,r){if(Cs.current!==hl)throw Error(Ye(168));Rr(Cs,e),Rr($s,r)}function qI(t,e,r){var n=t.stateNode;if(e=e.childContextTypes,typeof n.getChildContext!="function")return r;n=n.getChildContext();for(var s in n)if(!(s in e))throw Error(Ye(108,ZP(t)||"Unknown",s));return on({},r,n)}function d0(t){return t=(t=t.stateNode)&&t.__reactInternalMemoizedMergedChildContext||hl,Nc=Cs.current,Rr(Cs,t),Rr($s,$s.current),!0}function PC(t,e,r){var n=t.stateNode;if(!n)throw Error(Ye(169));r?(t=qI(t,e,Nc),n.__reactInternalMemoizedMergedChildContext=t,Gr($s),Gr(Cs),Rr(Cs,t)):Gr($s),Rr($s,r)}var yo=null,hv=!1,Zw=!1;function GI(t){yo===null?yo=[t]:yo.push(t)}function mL(t){hv=!0,GI(t)}function El(){if(!Zw&&yo!==null){Zw=!0;var t=0,e=Ir;try{var r=yo;for(Ir=1;t<r.length;t++){var n=r[t];do n=n(!0);while(n!==null)}yo=null,hv=!1}catch(s){throw yo!==null&&(yo=yo.slice(t+1)),gI(bx,El),s}finally{Ir=e,Zw=!1}}return null}var td=[],rd=0,h0=null,f0=0,Ii=[],Si=0,Ic=null,xo=1,bo="";function tc(t,e){td[rd++]=f0,td[rd++]=h0,h0=t,f0=e}function zI(t,e,r){Ii[Si++]=xo,Ii[Si++]=bo,Ii[Si++]=Ic,Ic=t;var n=xo;t=bo;var s=32-sa(n)-1;n&=~(1<<s),r+=1;var i=32-sa(e)+s;if(30<i){var a=s-s%5;i=(n&(1<<a)-1).toString(32),n>>=a,s-=a,xo=1<<32-sa(e)+s|r<<s|n,bo=i+t}else xo=1<<i|r<<s|n,bo=t}function Tx(t){t.return!==null&&(tc(t,1),zI(t,1,0))}function Ux(t){for(;t===h0;)h0=td[--rd],td[rd]=null,f0=td[--rd],td[rd]=null;for(;t===Ic;)Ic=Ii[--Si],Ii[Si]=null,bo=Ii[--Si],Ii[Si]=null,xo=Ii[--Si],Ii[Si]=null}var ci=null,oi=null,Xr=!1,na=null;function $I(t,e){var r=Ti(5,null,null,0);r.elementType="DELETED",r.stateNode=e,r.return=t,e=t.deletions,e===null?(t.deletions=[r],t.flags|=16):e.push(r)}function QC(t,e){switch(t.tag){case 5:var r=t.type;return e=e.nodeType!==1||r.toLowerCase()!==e.nodeName.toLowerCase()?null:e,e!==null?(t.stateNode=e,ci=t,oi=ZA(e.firstChild),!0):!1;case 6:return e=t.pendingProps===""||e.nodeType!==3?null:e,e!==null?(t.stateNode=e,ci=t,oi=null,!0):!1;case 13:return e=e.nodeType!==8?null:e,e!==null?(r=Ic!==null?{id:xo,overflow:bo}:null,t.memoizedState={dehydrated:e,treeContext:r,retryLane:1073741824},r=Ti(18,null,null,0),r.stateNode=e,r.return=t,t.child=r,ci=t,oi=null,!0):!1;default:return!1}}function T1(t){return(t.mode&1)!==0&&(t.flags&128)===0}function U1(t){if(Xr){var e=oi;if(e){var r=e;if(!QC(t,e)){if(T1(t))throw Error(Ye(418));e=ZA(r.nextSibling);var n=ci;e&&QC(t,e)?$I(n,r):(t.flags=t.flags&-4097|2,Xr=!1,ci=t)}}else{if(T1(t))throw Error(Ye(418));t.flags=t.flags&-4097|2,Xr=!1,ci=t}}}function LC(t){for(t=t.return;t!==null&&t.tag!==5&&t.tag!==3&&t.tag!==13;)t=t.return;ci=t}function Sm(t){if(t!==ci)return!1;if(!Xr)return LC(t),Xr=!0,!1;var e;if((e=t.tag!==3)&&!(e=t.tag!==5)&&(e=t.type,e=e!=="head"&&e!=="body"&&!N1(t.type,t.memoizedProps)),e&&(e=oi)){if(T1(t))throw WI(),Error(Ye(418));for(;e;)$I(t,e),e=ZA(e.nextSibling)}if(LC(t),t.tag===13){if(t=t.memoizedState,t=t!==null?t.dehydrated:null,!t)throw Error(Ye(317));e:{for(t=t.nextSibling,e=0;t;){if(t.nodeType===8){var r=t.data;if(r==="/$"){if(e===0){oi=ZA(t.nextSibling);break e}e--}else r!=="$"&&r!=="$!"&&r!=="$?"||e++}t=t.nextSibling}oi=null}}else oi=ci?ZA(t.stateNode.nextSibling):null;return!0}function WI(){for(var t=oi;t;)t=ZA(t.nextSibling)}function xd(){oi=ci=null,Xr=!1}function Px(t){na===null?na=[t]:na.push(t)}var gL=Ko.ReactCurrentBatchConfig;function _h(t,e,r){if(t=r.ref,t!==null&&typeof t!="function"&&typeof t!="object"){if(r._owner){if(r=r._owner,r){if(r.tag!==1)throw Error(Ye(309));var n=r.stateNode}if(!n)throw Error(Ye(147,t));var s=n,i=""+t;return e!==null&&e.ref!==null&&typeof e.ref=="function"&&e.ref._stringRef===i?e.ref:(e=function(a){var o=s.refs;a===null?delete o[i]:o[i]=a},e._stringRef=i,e)}if(typeof t!="string")throw Error(Ye(284));if(!r._owner)throw Error(Ye(290,t))}return t}function Fm(t,e){throw t=Object.prototype.toString.call(e),Error(Ye(31,t==="[object Object]"?"object with keys {"+Object.keys(e).join(", ")+"}":t))}function jC(t){var e=t._init;return e(t._payload)}function XI(t){function e(w,y){if(t){var S=w.deletions;S===null?(w.deletions=[y],w.flags|=16):S.push(y)}}function r(w,y){if(!t)return null;for(;y!==null;)e(w,y),y=y.sibling;return null}function n(w,y){for(w=new Map;y!==null;)y.key!==null?w.set(y.key,y):w.set(y.index,y),y=y.sibling;return w}function s(w,y){return w=nl(w,y),w.index=0,w.sibling=null,w}function i(w,y,S){return w.index=S,t?(S=w.alternate,S!==null?(S=S.index,S<y?(w.flags|=2,y):S):(w.flags|=2,y)):(w.flags|=1048576,y)}function a(w){return t&&w.alternate===null&&(w.flags|=2),w}function o(w,y,S,O){return y===null||y.tag!==6?(y=ay(S,w.mode,O),y.return=w,y):(y=s(y,S),y.return=w,y)}function l(w,y,S,O){var R=S.type;return R===Wu?u(w,y,S.props.children,O,S.key):y!==null&&(y.elementType===R||typeof R=="object"&&R!==null&&R.$$typeof===TA&&jC(R)===y.type)?(O=s(y,S.props),O.ref=_h(w,y,S),O.return=w,O):(O=jg(S.type,S.key,S.props,null,w.mode,O),O.ref=_h(w,y,S),O.return=w,O)}function c(w,y,S,O){return y===null||y.tag!==4||y.stateNode.containerInfo!==S.containerInfo||y.stateNode.implementation!==S.implementation?(y=oy(S,w.mode,O),y.return=w,y):(y=s(y,S.children||[]),y.return=w,y)}function u(w,y,S,O,R){return y===null||y.tag!==7?(y=wc(S,w.mode,O,R),y.return=w,y):(y=s(y,S),y.return=w,y)}function f(w,y,S){if(typeof y=="string"&&y!==""||typeof y=="number")return y=ay(""+y,w.mode,S),y.return=w,y;if(typeof y=="object"&&y!==null){switch(y.$$typeof){case wm:return S=jg(y.type,y.key,y.props,null,w.mode,S),S.ref=_h(w,null,y),S.return=w,S;case $u:return y=oy(y,w.mode,S),y.return=w,y;case TA:var O=y._init;return f(w,O(y._payload),S)}if(zh(y)||xh(y))return y=wc(y,w.mode,S,null),y.return=w,y;Fm(w,y)}return null}function p(w,y,S,O){var R=y!==null?y.key:null;if(typeof S=="string"&&S!==""||typeof S=="number")return R!==null?null:o(w,y,""+S,O);if(typeof S=="object"&&S!==null){switch(S.$$typeof){case wm:return S.key===R?l(w,y,S,O):null;case $u:return S.key===R?c(w,y,S,O):null;case TA:return R=S._init,p(w,y,R(S._payload),O)}if(zh(S)||xh(S))return R!==null?null:u(w,y,S,O,null);Fm(w,S)}return null}function m(w,y,S,O,R){if(typeof O=="string"&&O!==""||typeof O=="number")return w=w.get(S)||null,o(y,w,""+O,R);if(typeof O=="object"&&O!==null){switch(O.$$typeof){case wm:return w=w.get(O.key===null?S:O.key)||null,l(y,w,O,R);case $u:return w=w.get(O.key===null?S:O.key)||null,c(y,w,O,R);case TA:var M=O._init;return m(w,y,S,M(O._payload),R)}if(zh(O)||xh(O))return w=w.get(S)||null,u(y,w,O,R,null);Fm(y,O)}return null}function b(w,y,S,O){for(var R=null,M=null,I=y,E=y=0,L=null;I!==null&&E<S.length;E++){I.index>E?(L=I,I=null):L=I.sibling;var D=p(w,I,S[E],O);if(D===null){I===null&&(I=L);break}t&&I&&D.alternate===null&&e(w,I),y=i(D,y,E),M===null?R=D:M.sibling=D,M=D,I=L}if(E===S.length)return r(w,I),Xr&&tc(w,E),R;if(I===null){for(;E<S.length;E++)I=f(w,S[E],O),I!==null&&(y=i(I,y,E),M===null?R=I:M.sibling=I,M=I);return Xr&&tc(w,E),R}for(I=n(w,I);E<S.length;E++)L=m(I,w,E,S[E],O),L!==null&&(t&&L.alternate!==null&&I.delete(L.key===null?E:L.key),y=i(L,y,E),M===null?R=L:M.sibling=L,M=L);return t&&I.forEach(function(N){return e(w,N)}),Xr&&tc(w,E),R}function B(w,y,S,O){var R=xh(S);if(typeof R!="function")throw Error(Ye(150));if(S=R.call(S),S==null)throw Error(Ye(151));for(var M=R=null,I=y,E=y=0,L=null,D=S.next();I!==null&&!D.done;E++,D=S.next()){I.index>E?(L=I,I=null):L=I.sibling;var N=p(w,I,D.value,O);if(N===null){I===null&&(I=L);break}t&&I&&N.alternate===null&&e(w,I),y=i(N,y,E),M===null?R=N:M.sibling=N,M=N,I=L}if(D.done)return r(w,I),Xr&&tc(w,E),R;if(I===null){for(;!D.done;E++,D=S.next())D=f(w,D.value,O),D!==null&&(y=i(D,y,E),M===null?R=D:M.sibling=D,M=D);return Xr&&tc(w,E),R}for(I=n(w,I);!D.done;E++,D=S.next())D=m(I,w,E,D.value,O),D!==null&&(t&&D.alternate!==null&&I.delete(D.key===null?E:D.key),y=i(D,y,E),M===null?R=D:M.sibling=D,M=D);return t&&I.forEach(function(T){return e(w,T)}),Xr&&tc(w,E),R}function _(w,y,S,O){if(typeof S=="object"&&S!==null&&S.type===Wu&&S.key===null&&(S=S.props.children),typeof S=="object"&&S!==null){switch(S.$$typeof){case wm:e:{for(var R=S.key,M=y;M!==null;){if(M.key===R){if(R=S.type,R===Wu){if(M.tag===7){r(w,M.sibling),y=s(M,S.props.children),y.return=w,w=y;break e}}else if(M.elementType===R||typeof R=="object"&&R!==null&&R.$$typeof===TA&&jC(R)===M.type){r(w,M.sibling),y=s(M,S.props),y.ref=_h(w,M,S),y.return=w,w=y;break e}r(w,M);break}else e(w,M);M=M.sibling}S.type===Wu?(y=wc(S.props.children,w.mode,O,S.key),y.return=w,w=y):(O=jg(S.type,S.key,S.props,null,w.mode,O),O.ref=_h(w,y,S),O.return=w,w=O)}return a(w);case $u:e:{for(M=S.key;y!==null;){if(y.key===M)if(y.tag===4&&y.stateNode.containerInfo===S.containerInfo&&y.stateNode.implementation===S.implementation){r(w,y.sibling),y=s(y,S.children||[]),y.return=w,w=y;break e}else{r(w,y);break}else e(w,y);y=y.sibling}y=oy(S,w.mode,O),y.return=w,w=y}return a(w);case TA:return M=S._init,_(w,y,M(S._payload),O)}if(zh(S))return b(w,y,S,O);if(xh(S))return B(w,y,S,O);Fm(w,S)}return typeof S=="string"&&S!==""||typeof S=="number"?(S=""+S,y!==null&&y.tag===6?(r(w,y.sibling),y=s(y,S),y.return=w,w=y):(r(w,y),y=ay(S,w.mode,O),y.return=w,w=y),a(w)):r(w,y)}return _}var bd=XI(!0),JI=XI(!1),p0=Cl(null),m0=null,nd=null,Qx=null;function Lx(){Qx=nd=m0=null}function jx(t){var e=p0.current;Gr(p0),t._currentValue=e}function P1(t,e,r){for(;t!==null;){var n=t.alternate;if((t.childLanes&e)!==e?(t.childLanes|=e,n!==null&&(n.childLanes|=e)):n!==null&&(n.childLanes&e)!==e&&(n.childLanes|=e),t===r)break;t=t.return}}function dd(t,e){m0=t,Qx=nd=null,t=t.dependencies,t!==null&&t.firstContext!==null&&(t.lanes&e&&(Gs=!0),t.firstContext=null)}function ki(t){var e=t._currentValue;if(Qx!==t)if(t={context:t,memoizedValue:e,next:null},nd===null){if(m0===null)throw Error(Ye(308));nd=t,m0.dependencies={lanes:0,firstContext:t}}else nd=nd.next=t;return e}var hc=null;function kx(t){hc===null?hc=[t]:hc.push(t)}function YI(t,e,r,n){var s=e.interleaved;return s===null?(r.next=r,kx(e)):(r.next=s.next,s.next=r),e.interleaved=r,ko(t,n)}function ko(t,e){t.lanes|=e;var r=t.alternate;for(r!==null&&(r.lanes|=e),r=t,t=t.return;t!==null;)t.childLanes|=e,r=t.alternate,r!==null&&(r.childLanes|=e),r=t,t=t.return;return r.tag===3?r.stateNode:null}var UA=!1;function Dx(t){t.updateQueue={baseState:t.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,interleaved:null,lanes:0},effects:null}}function ZI(t,e){t=t.updateQueue,e.updateQueue===t&&(e.updateQueue={baseState:t.baseState,firstBaseUpdate:t.firstBaseUpdate,lastBaseUpdate:t.lastBaseUpdate,shared:t.shared,effects:t.effects})}function Io(t,e){return{eventTime:t,lane:e,tag:0,payload:null,callback:null,next:null}}function el(t,e,r){var n=t.updateQueue;if(n===null)return null;if(n=n.shared,hr&2){var s=n.pending;return s===null?e.next=e:(e.next=s.next,s.next=e),n.pending=e,ko(t,r)}return s=n.interleaved,s===null?(e.next=e,kx(n)):(e.next=s.next,s.next=e),n.interleaved=e,ko(t,r)}function Fg(t,e,r){if(e=e.updateQueue,e!==null&&(e=e.shared,(r&4194240)!==0)){var n=e.lanes;n&=t.pendingLanes,r|=n,e.lanes=r,Bx(t,r)}}function kC(t,e){var r=t.updateQueue,n=t.alternate;if(n!==null&&(n=n.updateQueue,r===n)){var s=null,i=null;if(r=r.firstBaseUpdate,r!==null){do{var a={eventTime:r.eventTime,lane:r.lane,tag:r.tag,payload:r.payload,callback:r.callback,next:null};i===null?s=i=a:i=i.next=a,r=r.next}while(r!==null);i===null?s=i=e:i=i.next=e}else s=i=e;r={baseState:n.baseState,firstBaseUpdate:s,lastBaseUpdate:i,shared:n.shared,effects:n.effects},t.updateQueue=r;return}t=r.lastBaseUpdate,t===null?r.firstBaseUpdate=e:t.next=e,r.lastBaseUpdate=e}function g0(t,e,r,n){var s=t.updateQueue;UA=!1;var i=s.firstBaseUpdate,a=s.lastBaseUpdate,o=s.shared.pending;if(o!==null){s.shared.pending=null;var l=o,c=l.next;l.next=null,a===null?i=c:a.next=c,a=l;var u=t.alternate;u!==null&&(u=u.updateQueue,o=u.lastBaseUpdate,o!==a&&(o===null?u.firstBaseUpdate=c:o.next=c,u.lastBaseUpdate=l))}if(i!==null){var f=s.baseState;a=0,u=c=l=null,o=i;do{var p=o.lane,m=o.eventTime;if((n&p)===p){u!==null&&(u=u.next={eventTime:m,lane:0,tag:o.tag,payload:o.payload,callback:o.callback,next:null});e:{var b=t,B=o;switch(p=e,m=r,B.tag){case 1:if(b=B.payload,typeof b=="function"){f=b.call(m,f,p);break e}f=b;break e;case 3:b.flags=b.flags&-65537|128;case 0:if(b=B.payload,p=typeof b=="function"?b.call(m,f,p):b,p==null)break e;f=on({},f,p);break e;case 2:UA=!0}}o.callback!==null&&o.lane!==0&&(t.flags|=64,p=s.effects,p===null?s.effects=[o]:p.push(o))}else m={eventTime:m,lane:p,tag:o.tag,payload:o.payload,callback:o.callback,next:null},u===null?(c=u=m,l=f):u=u.next=m,a|=p;if(o=o.next,o===null){if(o=s.shared.pending,o===null)break;p=o,o=p.next,p.next=null,s.lastBaseUpdate=p,s.shared.pending=null}}while(!0);if(u===null&&(l=f),s.baseState=l,s.firstBaseUpdate=c,s.lastBaseUpdate=u,e=s.shared.interleaved,e!==null){s=e;do a|=s.lane,s=s.next;while(s!==e)}else i===null&&(s.shared.lanes=0);Fc|=a,t.lanes=a,t.memoizedState=f}}function DC(t,e,r){if(t=e.effects,e.effects=null,t!==null)for(e=0;e<t.length;e++){var n=t[e],s=n.callback;if(s!==null){if(n.callback=null,n=r,typeof s!="function")throw Error(Ye(191,s));s.call(n)}}}var _p={},Ra=Cl(_p),zf=Cl(_p),$f=Cl(_p);function fc(t){if(t===_p)throw Error(Ye(174));return t}function Rx(t,e){switch(Rr($f,e),Rr(zf,t),Rr(Ra,_p),t=e.nodeType,t){case 9:case 11:e=(e=e.documentElement)?e.namespaceURI:h1(null,"");break;default:t=t===8?e.parentNode:e,e=t.namespaceURI||null,t=t.tagName,e=h1(e,t)}Gr(Ra),Rr(Ra,e)}function Bd(){Gr(Ra),Gr(zf),Gr($f)}function eS(t){fc($f.current);var e=fc(Ra.current),r=h1(e,t.type);e!==r&&(Rr(zf,t),Rr(Ra,r))}function Mx(t){zf.current===t&&(Gr(Ra),Gr(zf))}var sn=Cl(0);function v0(t){for(var e=t;e!==null;){if(e.tag===13){var r=e.memoizedState;if(r!==null&&(r=r.dehydrated,r===null||r.data==="$?"||r.data==="$!"))return e}else if(e.tag===19&&e.memoizedProps.revealOrder!==void 0){if(e.flags&128)return e}else if(e.child!==null){e.child.return=e,e=e.child;continue}if(e===t)break;for(;e.sibling===null;){if(e.return===null||e.return===t)return null;e=e.return}e.sibling.return=e.return,e=e.sibling}return null}var ey=[];function Ox(){for(var t=0;t<ey.length;t++)ey[t]._workInProgressVersionPrimary=null;ey.length=0}var Tg=Ko.ReactCurrentDispatcher,ty=Ko.ReactCurrentBatchConfig,Sc=0,an=null,Un=null,Kn=null,w0=!1,pf=!1,Wf=0,vL=0;function ds(){throw Error(Ye(321))}function Hx(t,e){if(e===null)return!1;for(var r=0;r<e.length&&r<t.length;r++)if(!oa(t[r],e[r]))return!1;return!0}function Vx(t,e,r,n,s,i){if(Sc=i,an=e,e.memoizedState=null,e.updateQueue=null,e.lanes=0,Tg.current=t===null||t.memoizedState===null?bL:BL,t=r(n,s),pf){i=0;do{if(pf=!1,Wf=0,25<=i)throw Error(Ye(301));i+=1,Kn=Un=null,e.updateQueue=null,Tg.current=CL,t=r(n,s)}while(pf)}if(Tg.current=y0,e=Un!==null&&Un.next!==null,Sc=0,Kn=Un=an=null,w0=!1,e)throw Error(Ye(300));return t}function Kx(){var t=Wf!==0;return Wf=0,t}function Ua(){var t={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return Kn===null?an.memoizedState=Kn=t:Kn=Kn.next=t,Kn}function Di(){if(Un===null){var t=an.alternate;t=t!==null?t.memoizedState:null}else t=Un.next;var e=Kn===null?an.memoizedState:Kn.next;if(e!==null)Kn=e,Un=t;else{if(t===null)throw Error(Ye(310));Un=t,t={memoizedState:Un.memoizedState,baseState:Un.baseState,baseQueue:Un.baseQueue,queue:Un.queue,next:null},Kn===null?an.memoizedState=Kn=t:Kn=Kn.next=t}return Kn}function Xf(t,e){return typeof e=="function"?e(t):e}function ry(t){var e=Di(),r=e.queue;if(r===null)throw Error(Ye(311));r.lastRenderedReducer=t;var n=Un,s=n.baseQueue,i=r.pending;if(i!==null){if(s!==null){var a=s.next;s.next=i.next,i.next=a}n.baseQueue=s=i,r.pending=null}if(s!==null){i=s.next,n=n.baseState;var o=a=null,l=null,c=i;do{var u=c.lane;if((Sc&u)===u)l!==null&&(l=l.next={lane:0,action:c.action,hasEagerState:c.hasEagerState,eagerState:c.eagerState,next:null}),n=c.hasEagerState?c.eagerState:t(n,c.action);else{var f={lane:u,action:c.action,hasEagerState:c.hasEagerState,eagerState:c.eagerState,next:null};l===null?(o=l=f,a=n):l=l.next=f,an.lanes|=u,Fc|=u}c=c.next}while(c!==null&&c!==i);l===null?a=n:l.next=o,oa(n,e.memoizedState)||(Gs=!0),e.memoizedState=n,e.baseState=a,e.baseQueue=l,r.lastRenderedState=n}if(t=r.interleaved,t!==null){s=t;do i=s.lane,an.lanes|=i,Fc|=i,s=s.next;while(s!==t)}else s===null&&(r.lanes=0);return[e.memoizedState,r.dispatch]}function ny(t){var e=Di(),r=e.queue;if(r===null)throw Error(Ye(311));r.lastRenderedReducer=t;var n=r.dispatch,s=r.pending,i=e.memoizedState;if(s!==null){r.pending=null;var a=s=s.next;do i=t(i,a.action),a=a.next;while(a!==s);oa(i,e.memoizedState)||(Gs=!0),e.memoizedState=i,e.baseQueue===null&&(e.baseState=i),r.lastRenderedState=i}return[i,n]}function tS(){}function rS(t,e){var r=an,n=Di(),s=e(),i=!oa(n.memoizedState,s);if(i&&(n.memoizedState=s,Gs=!0),n=n.queue,qx(iS.bind(null,r,n,t),[t]),n.getSnapshot!==e||i||Kn!==null&&Kn.memoizedState.tag&1){if(r.flags|=2048,Jf(9,sS.bind(null,r,n,s,e),void 0,null),Gn===null)throw Error(Ye(349));Sc&30||nS(r,e,s)}return s}function nS(t,e,r){t.flags|=16384,t={getSnapshot:e,value:r},e=an.updateQueue,e===null?(e={lastEffect:null,stores:null},an.updateQueue=e,e.stores=[t]):(r=e.stores,r===null?e.stores=[t]:r.push(t))}function sS(t,e,r,n){e.value=r,e.getSnapshot=n,aS(e)&&oS(t)}function iS(t,e,r){return r(function(){aS(e)&&oS(t)})}function aS(t){var e=t.getSnapshot;t=t.value;try{var r=e();return!oa(t,r)}catch{return!0}}function oS(t){var e=ko(t,1);e!==null&&ia(e,t,1,-1)}function RC(t){var e=Ua();return typeof t=="function"&&(t=t()),e.memoizedState=e.baseState=t,t={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:Xf,lastRenderedState:t},e.queue=t,t=t.dispatch=xL.bind(null,an,t),[e.memoizedState,t]}function Jf(t,e,r,n){return t={tag:t,create:e,destroy:r,deps:n,next:null},e=an.updateQueue,e===null?(e={lastEffect:null,stores:null},an.updateQueue=e,e.lastEffect=t.next=t):(r=e.lastEffect,r===null?e.lastEffect=t.next=t:(n=r.next,r.next=t,t.next=n,e.lastEffect=t)),t}function AS(){return Di().memoizedState}function Ug(t,e,r,n){var s=Ua();an.flags|=t,s.memoizedState=Jf(1|e,r,void 0,n===void 0?null:n)}function fv(t,e,r,n){var s=Di();n=n===void 0?null:n;var i=void 0;if(Un!==null){var a=Un.memoizedState;if(i=a.destroy,n!==null&&Hx(n,a.deps)){s.memoizedState=Jf(e,r,i,n);return}}an.flags|=t,s.memoizedState=Jf(1|e,r,i,n)}function MC(t,e){return Ug(8390656,8,t,e)}function qx(t,e){return fv(2048,8,t,e)}function lS(t,e){return fv(4,2,t,e)}function cS(t,e){return fv(4,4,t,e)}function uS(t,e){if(typeof e=="function")return t=t(),e(t),function(){e(null)};if(e!=null)return t=t(),e.current=t,function(){e.current=null}}function dS(t,e,r){return r=r!=null?r.concat([t]):null,fv(4,4,uS.bind(null,e,t),r)}function Gx(){}function hS(t,e){var r=Di();e=e===void 0?null:e;var n=r.memoizedState;return n!==null&&e!==null&&Hx(e,n[1])?n[0]:(r.memoizedState=[t,e],t)}function fS(t,e){var r=Di();e=e===void 0?null:e;var n=r.memoizedState;return n!==null&&e!==null&&Hx(e,n[1])?n[0]:(t=t(),r.memoizedState=[t,e],t)}function pS(t,e,r){return Sc&21?(oa(r,e)||(r=yI(),an.lanes|=r,Fc|=r,t.baseState=!0),e):(t.baseState&&(t.baseState=!1,Gs=!0),t.memoizedState=r)}function wL(t,e){var r=Ir;Ir=r!==0&&4>r?r:4,t(!0);var n=ty.transition;ty.transition={};try{t(!1),e()}finally{Ir=r,ty.transition=n}}function mS(){return Di().memoizedState}function yL(t,e,r){var n=rl(t);if(r={lane:n,action:r,hasEagerState:!1,eagerState:null,next:null},gS(t))vS(e,r);else if(r=YI(t,e,r,n),r!==null){var s=Ps();ia(r,t,n,s),wS(r,e,n)}}function xL(t,e,r){var n=rl(t),s={lane:n,action:r,hasEagerState:!1,eagerState:null,next:null};if(gS(t))vS(e,s);else{var i=t.alternate;if(t.lanes===0&&(i===null||i.lanes===0)&&(i=e.lastRenderedReducer,i!==null))try{var a=e.lastRenderedState,o=i(a,r);if(s.hasEagerState=!0,s.eagerState=o,oa(o,a)){var l=e.interleaved;l===null?(s.next=s,kx(e)):(s.next=l.next,l.next=s),e.interleaved=s;return}}catch{}finally{}r=YI(t,e,s,n),r!==null&&(s=Ps(),ia(r,t,n,s),wS(r,e,n))}}function gS(t){var e=t.alternate;return t===an||e!==null&&e===an}function vS(t,e){pf=w0=!0;var r=t.pending;r===null?e.next=e:(e.next=r.next,r.next=e),t.pending=e}function wS(t,e,r){if(r&4194240){var n=e.lanes;n&=t.pendingLanes,r|=n,e.lanes=r,Bx(t,r)}}var y0={readContext:ki,useCallback:ds,useContext:ds,useEffect:ds,useImperativeHandle:ds,useInsertionEffect:ds,useLayoutEffect:ds,useMemo:ds,useReducer:ds,useRef:ds,useState:ds,useDebugValue:ds,useDeferredValue:ds,useTransition:ds,useMutableSource:ds,useSyncExternalStore:ds,useId:ds,unstable_isNewReconciler:!1},bL={readContext:ki,useCallback:function(t,e){return Ua().memoizedState=[t,e===void 0?null:e],t},useContext:ki,useEffect:MC,useImperativeHandle:function(t,e,r){return r=r!=null?r.concat([t]):null,Ug(4194308,4,uS.bind(null,e,t),r)},useLayoutEffect:function(t,e){return Ug(4194308,4,t,e)},useInsertionEffect:function(t,e){return Ug(4,2,t,e)},useMemo:function(t,e){var r=Ua();return e=e===void 0?null:e,t=t(),r.memoizedState=[t,e],t},useReducer:function(t,e,r){var n=Ua();return e=r!==void 0?r(e):e,n.memoizedState=n.baseState=e,t={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:t,lastRenderedState:e},n.queue=t,t=t.dispatch=yL.bind(null,an,t),[n.memoizedState,t]},useRef:function(t){var e=Ua();return t={current:t},e.memoizedState=t},useState:RC,useDebugValue:Gx,useDeferredValue:function(t){return Ua().memoizedState=t},useTransition:function(){var t=RC(!1),e=t[0];return t=wL.bind(null,t[1]),Ua().memoizedState=t,[e,t]},useMutableSource:function(){},useSyncExternalStore:function(t,e,r){var n=an,s=Ua();if(Xr){if(r===void 0)throw Error(Ye(407));r=r()}else{if(r=e(),Gn===null)throw Error(Ye(349));Sc&30||nS(n,e,r)}s.memoizedState=r;var i={value:r,getSnapshot:e};return s.queue=i,MC(iS.bind(null,n,i,t),[t]),n.flags|=2048,Jf(9,sS.bind(null,n,i,r,e),void 0,null),r},useId:function(){var t=Ua(),e=Gn.identifierPrefix;if(Xr){var r=bo,n=xo;r=(n&~(1<<32-sa(n)-1)).toString(32)+r,e=":"+e+"R"+r,r=Wf++,0<r&&(e+="H"+r.toString(32)),e+=":"}else r=vL++,e=":"+e+"r"+r.toString(32)+":";return t.memoizedState=e},unstable_isNewReconciler:!1},BL={readContext:ki,useCallback:hS,useContext:ki,useEffect:qx,useImperativeHandle:dS,useInsertionEffect:lS,useLayoutEffect:cS,useMemo:fS,useReducer:ry,useRef:AS,useState:function(){return ry(Xf)},useDebugValue:Gx,useDeferredValue:function(t){var e=Di();return pS(e,Un.memoizedState,t)},useTransition:function(){var t=ry(Xf)[0],e=Di().memoizedState;return[t,e]},useMutableSource:tS,useSyncExternalStore:rS,useId:mS,unstable_isNewReconciler:!1},CL={readContext:ki,useCallback:hS,useContext:ki,useEffect:qx,useImperativeHandle:dS,useInsertionEffect:lS,useLayoutEffect:cS,useMemo:fS,useReducer:ny,useRef:AS,useState:function(){return ny(Xf)},useDebugValue:Gx,useDeferredValue:function(t){var e=Di();return Un===null?e.memoizedState=t:pS(e,Un.memoizedState,t)},useTransition:function(){var t=ny(Xf)[0],e=Di().memoizedState;return[t,e]},useMutableSource:tS,useSyncExternalStore:rS,useId:mS,unstable_isNewReconciler:!1};function ea(t,e){if(t&&t.defaultProps){e=on({},e),t=t.defaultProps;for(var r in t)e[r]===void 0&&(e[r]=t[r]);return e}return e}function Q1(t,e,r,n){e=t.memoizedState,r=r(n,e),r=r==null?e:on({},e,r),t.memoizedState=r,t.lanes===0&&(t.updateQueue.baseState=r)}var pv={isMounted:function(t){return(t=t._reactInternals)?Hc(t)===t:!1},enqueueSetState:function(t,e,r){t=t._reactInternals;var n=Ps(),s=rl(t),i=Io(n,s);i.payload=e,r!=null&&(i.callback=r),e=el(t,i,s),e!==null&&(ia(e,t,s,n),Fg(e,t,s))},enqueueReplaceState:function(t,e,r){t=t._reactInternals;var n=Ps(),s=rl(t),i=Io(n,s);i.tag=1,i.payload=e,r!=null&&(i.callback=r),e=el(t,i,s),e!==null&&(ia(e,t,s,n),Fg(e,t,s))},enqueueForceUpdate:function(t,e){t=t._reactInternals;var r=Ps(),n=rl(t),s=Io(r,n);s.tag=2,e!=null&&(s.callback=e),e=el(t,s,n),e!==null&&(ia(e,t,n,r),Fg(e,t,n))}};function OC(t,e,r,n,s,i,a){return t=t.stateNode,typeof t.shouldComponentUpdate=="function"?t.shouldComponentUpdate(n,i,a):e.prototype&&e.prototype.isPureReactComponent?!Vf(r,n)||!Vf(s,i):!0}function yS(t,e,r){var n=!1,s=hl,i=e.contextType;return typeof i=="object"&&i!==null?i=ki(i):(s=Ws(e)?Nc:Cs.current,n=e.contextTypes,i=(n=n!=null)?yd(t,s):hl),e=new e(r,i),t.memoizedState=e.state!==null&&e.state!==void 0?e.state:null,e.updater=pv,t.stateNode=e,e._reactInternals=t,n&&(t=t.stateNode,t.__reactInternalMemoizedUnmaskedChildContext=s,t.__reactInternalMemoizedMaskedChildContext=i),e}function HC(t,e,r,n){t=e.state,typeof e.componentWillReceiveProps=="function"&&e.componentWillReceiveProps(r,n),typeof e.UNSAFE_componentWillReceiveProps=="function"&&e.UNSAFE_componentWillReceiveProps(r,n),e.state!==t&&pv.enqueueReplaceState(e,e.state,null)}function L1(t,e,r,n){var s=t.stateNode;s.props=r,s.state=t.memoizedState,s.refs={},Dx(t);var i=e.contextType;typeof i=="object"&&i!==null?s.context=ki(i):(i=Ws(e)?Nc:Cs.current,s.context=yd(t,i)),s.state=t.memoizedState,i=e.getDerivedStateFromProps,typeof i=="function"&&(Q1(t,e,i,r),s.state=t.memoizedState),typeof e.getDerivedStateFromProps=="function"||typeof s.getSnapshotBeforeUpdate=="function"||typeof s.UNSAFE_componentWillMount!="function"&&typeof s.componentWillMount!="function"||(e=s.state,typeof s.componentWillMount=="function"&&s.componentWillMount(),typeof s.UNSAFE_componentWillMount=="function"&&s.UNSAFE_componentWillMount(),e!==s.state&&pv.enqueueReplaceState(s,s.state,null),g0(t,r,s,n),s.state=t.memoizedState),typeof s.componentDidMount=="function"&&(t.flags|=4194308)}function Cd(t,e){try{var r="",n=e;do r+=YP(n),n=n.return;while(n);var s=r}catch(i){s=`
Error generating stack: `+i.message+`
`+i.stack}return{value:t,source:e,stack:s,digest:null}}function sy(t,e,r){return{value:t,source:null,stack:r??null,digest:e??null}}function j1(t,e){try{console.error(e.value)}catch(r){setTimeout(function(){throw r})}}var EL=typeof WeakMap=="function"?WeakMap:Map;function xS(t,e,r){r=Io(-1,r),r.tag=3,r.payload={element:null};var n=e.value;return r.callback=function(){b0||(b0=!0,G1=n),j1(t,e)},r}function bS(t,e,r){r=Io(-1,r),r.tag=3;var n=t.type.getDerivedStateFromError;if(typeof n=="function"){var s=e.value;r.payload=function(){return n(s)},r.callback=function(){j1(t,e)}}var i=t.stateNode;return i!==null&&typeof i.componentDidCatch=="function"&&(r.callback=function(){j1(t,e),typeof n!="function"&&(tl===null?tl=new Set([this]):tl.add(this));var a=e.stack;this.componentDidCatch(e.value,{componentStack:a!==null?a:""})}),r}function VC(t,e,r){var n=t.pingCache;if(n===null){n=t.pingCache=new EL;var s=new Set;n.set(e,s)}else s=n.get(e),s===void 0&&(s=new Set,n.set(e,s));s.has(r)||(s.add(r),t=RL.bind(null,t,e,r),e.then(t,t))}function KC(t){do{var e;if((e=t.tag===13)&&(e=t.memoizedState,e=e!==null?e.dehydrated!==null:!0),e)return t;t=t.return}while(t!==null);return null}function qC(t,e,r,n,s){return t.mode&1?(t.flags|=65536,t.lanes=s,t):(t===e?t.flags|=65536:(t.flags|=128,r.flags|=131072,r.flags&=-52805,r.tag===1&&(r.alternate===null?r.tag=17:(e=Io(-1,1),e.tag=2,el(r,e,1))),r.lanes|=1),t)}var _L=Ko.ReactCurrentOwner,Gs=!1;function Ts(t,e,r,n){e.child=t===null?JI(e,null,r,n):bd(e,t.child,r,n)}function GC(t,e,r,n,s){r=r.render;var i=e.ref;return dd(e,s),n=Vx(t,e,r,n,i,s),r=Kx(),t!==null&&!Gs?(e.updateQueue=t.updateQueue,e.flags&=-2053,t.lanes&=~s,Do(t,e,s)):(Xr&&r&&Tx(e),e.flags|=1,Ts(t,e,n,s),e.child)}function zC(t,e,r,n,s){if(t===null){var i=r.type;return typeof i=="function"&&!eb(i)&&i.defaultProps===void 0&&r.compare===null&&r.defaultProps===void 0?(e.tag=15,e.type=i,BS(t,e,i,n,s)):(t=jg(r.type,null,n,e,e.mode,s),t.ref=e.ref,t.return=e,e.child=t)}if(i=t.child,!(t.lanes&s)){var a=i.memoizedProps;if(r=r.compare,r=r!==null?r:Vf,r(a,n)&&t.ref===e.ref)return Do(t,e,s)}return e.flags|=1,t=nl(i,n),t.ref=e.ref,t.return=e,e.child=t}function BS(t,e,r,n,s){if(t!==null){var i=t.memoizedProps;if(Vf(i,n)&&t.ref===e.ref)if(Gs=!1,e.pendingProps=n=i,(t.lanes&s)!==0)t.flags&131072&&(Gs=!0);else return e.lanes=t.lanes,Do(t,e,s)}return k1(t,e,r,n,s)}function CS(t,e,r){var n=e.pendingProps,s=n.children,i=t!==null?t.memoizedState:null;if(n.mode==="hidden")if(!(e.mode&1))e.memoizedState={baseLanes:0,cachePool:null,transitions:null},Rr(id,ai),ai|=r;else{if(!(r&1073741824))return t=i!==null?i.baseLanes|r:r,e.lanes=e.childLanes=1073741824,e.memoizedState={baseLanes:t,cachePool:null,transitions:null},e.updateQueue=null,Rr(id,ai),ai|=t,null;e.memoizedState={baseLanes:0,cachePool:null,transitions:null},n=i!==null?i.baseLanes:r,Rr(id,ai),ai|=n}else i!==null?(n=i.baseLanes|r,e.memoizedState=null):n=r,Rr(id,ai),ai|=n;return Ts(t,e,s,r),e.child}function ES(t,e){var r=e.ref;(t===null&&r!==null||t!==null&&t.ref!==r)&&(e.flags|=512,e.flags|=2097152)}function k1(t,e,r,n,s){var i=Ws(r)?Nc:Cs.current;return i=yd(e,i),dd(e,s),r=Vx(t,e,r,n,i,s),n=Kx(),t!==null&&!Gs?(e.updateQueue=t.updateQueue,e.flags&=-2053,t.lanes&=~s,Do(t,e,s)):(Xr&&n&&Tx(e),e.flags|=1,Ts(t,e,r,s),e.child)}function $C(t,e,r,n,s){if(Ws(r)){var i=!0;d0(e)}else i=!1;if(dd(e,s),e.stateNode===null)Pg(t,e),yS(e,r,n),L1(e,r,n,s),n=!0;else if(t===null){var a=e.stateNode,o=e.memoizedProps;a.props=o;var l=a.context,c=r.contextType;typeof c=="object"&&c!==null?c=ki(c):(c=Ws(r)?Nc:Cs.current,c=yd(e,c));var u=r.getDerivedStateFromProps,f=typeof u=="function"||typeof a.getSnapshotBeforeUpdate=="function";f||typeof a.UNSAFE_componentWillReceiveProps!="function"&&typeof a.componentWillReceiveProps!="function"||(o!==n||l!==c)&&HC(e,a,n,c),UA=!1;var p=e.memoizedState;a.state=p,g0(e,n,a,s),l=e.memoizedState,o!==n||p!==l||$s.current||UA?(typeof u=="function"&&(Q1(e,r,u,n),l=e.memoizedState),(o=UA||OC(e,r,o,n,p,l,c))?(f||typeof a.UNSAFE_componentWillMount!="function"&&typeof a.componentWillMount!="function"||(typeof a.componentWillMount=="function"&&a.componentWillMount(),typeof a.UNSAFE_componentWillMount=="function"&&a.UNSAFE_componentWillMount()),typeof a.componentDidMount=="function"&&(e.flags|=4194308)):(typeof a.componentDidMount=="function"&&(e.flags|=4194308),e.memoizedProps=n,e.memoizedState=l),a.props=n,a.state=l,a.context=c,n=o):(typeof a.componentDidMount=="function"&&(e.flags|=4194308),n=!1)}else{a=e.stateNode,ZI(t,e),o=e.memoizedProps,c=e.type===e.elementType?o:ea(e.type,o),a.props=c,f=e.pendingProps,p=a.context,l=r.contextType,typeof l=="object"&&l!==null?l=ki(l):(l=Ws(r)?Nc:Cs.current,l=yd(e,l));var m=r.getDerivedStateFromProps;(u=typeof m=="function"||typeof a.getSnapshotBeforeUpdate=="function")||typeof a.UNSAFE_componentWillReceiveProps!="function"&&typeof a.componentWillReceiveProps!="function"||(o!==f||p!==l)&&HC(e,a,n,l),UA=!1,p=e.memoizedState,a.state=p,g0(e,n,a,s);var b=e.memoizedState;o!==f||p!==b||$s.current||UA?(typeof m=="function"&&(Q1(e,r,m,n),b=e.memoizedState),(c=UA||OC(e,r,c,n,p,b,l)||!1)?(u||typeof a.UNSAFE_componentWillUpdate!="function"&&typeof a.componentWillUpdate!="function"||(typeof a.componentWillUpdate=="function"&&a.componentWillUpdate(n,b,l),typeof a.UNSAFE_componentWillUpdate=="function"&&a.UNSAFE_componentWillUpdate(n,b,l)),typeof a.componentDidUpdate=="function"&&(e.flags|=4),typeof a.getSnapshotBeforeUpdate=="function"&&(e.flags|=1024)):(typeof a.componentDidUpdate!="function"||o===t.memoizedProps&&p===t.memoizedState||(e.flags|=4),typeof a.getSnapshotBeforeUpdate!="function"||o===t.memoizedProps&&p===t.memoizedState||(e.flags|=1024),e.memoizedProps=n,e.memoizedState=b),a.props=n,a.state=b,a.context=l,n=c):(typeof a.componentDidUpdate!="function"||o===t.memoizedProps&&p===t.memoizedState||(e.flags|=4),typeof a.getSnapshotBeforeUpdate!="function"||o===t.memoizedProps&&p===t.memoizedState||(e.flags|=1024),n=!1)}return D1(t,e,r,n,i,s)}function D1(t,e,r,n,s,i){ES(t,e);var a=(e.flags&128)!==0;if(!n&&!a)return s&&PC(e,r,!1),Do(t,e,i);n=e.stateNode,_L.current=e;var o=a&&typeof r.getDerivedStateFromError!="function"?null:n.render();return e.flags|=1,t!==null&&a?(e.child=bd(e,t.child,null,i),e.child=bd(e,null,o,i)):Ts(t,e,o,i),e.memoizedState=n.state,s&&PC(e,r,!0),e.child}function _S(t){var e=t.stateNode;e.pendingContext?UC(t,e.pendingContext,e.pendingContext!==e.context):e.context&&UC(t,e.context,!1),Rx(t,e.containerInfo)}function WC(t,e,r,n,s){return xd(),Px(s),e.flags|=256,Ts(t,e,r,n),e.child}var R1={dehydrated:null,treeContext:null,retryLane:0};function M1(t){return{baseLanes:t,cachePool:null,transitions:null}}function NS(t,e,r){var n=e.pendingProps,s=sn.current,i=!1,a=(e.flags&128)!==0,o;if((o=a)||(o=t!==null&&t.memoizedState===null?!1:(s&2)!==0),o?(i=!0,e.flags&=-129):(t===null||t.memoizedState!==null)&&(s|=1),Rr(sn,s&1),t===null)return U1(e),t=e.memoizedState,t!==null&&(t=t.dehydrated,t!==null)?(e.mode&1?t.data==="$!"?e.lanes=8:e.lanes=1073741824:e.lanes=1,null):(a=n.children,t=n.fallback,i?(n=e.mode,i=e.child,a={mode:"hidden",children:a},!(n&1)&&i!==null?(i.childLanes=0,i.pendingProps=a):i=vv(a,n,0,null),t=wc(t,n,r,null),i.return=e,t.return=e,i.sibling=t,e.child=i,e.child.memoizedState=M1(r),e.memoizedState=R1,t):zx(e,a));if(s=t.memoizedState,s!==null&&(o=s.dehydrated,o!==null))return NL(t,e,a,n,o,s,r);if(i){i=n.fallback,a=e.mode,s=t.child,o=s.sibling;var l={mode:"hidden",children:n.children};return!(a&1)&&e.child!==s?(n=e.child,n.childLanes=0,n.pendingProps=l,e.deletions=null):(n=nl(s,l),n.subtreeFlags=s.subtreeFlags&14680064),o!==null?i=nl(o,i):(i=wc(i,a,r,null),i.flags|=2),i.return=e,n.return=e,n.sibling=i,e.child=n,n=i,i=e.child,a=t.child.memoizedState,a=a===null?M1(r):{baseLanes:a.baseLanes|r,cachePool:null,transitions:a.transitions},i.memoizedState=a,i.childLanes=t.childLanes&~r,e.memoizedState=R1,n}return i=t.child,t=i.sibling,n=nl(i,{mode:"visible",children:n.children}),!(e.mode&1)&&(n.lanes=r),n.return=e,n.sibling=null,t!==null&&(r=e.deletions,r===null?(e.deletions=[t],e.flags|=16):r.push(t)),e.child=n,e.memoizedState=null,n}function zx(t,e){return e=vv({mode:"visible",children:e},t.mode,0,null),e.return=t,t.child=e}function Tm(t,e,r,n){return n!==null&&Px(n),bd(e,t.child,null,r),t=zx(e,e.pendingProps.children),t.flags|=2,e.memoizedState=null,t}function NL(t,e,r,n,s,i,a){if(r)return e.flags&256?(e.flags&=-257,n=sy(Error(Ye(422))),Tm(t,e,a,n)):e.memoizedState!==null?(e.child=t.child,e.flags|=128,null):(i=n.fallback,s=e.mode,n=vv({mode:"visible",children:n.children},s,0,null),i=wc(i,s,a,null),i.flags|=2,n.return=e,i.return=e,n.sibling=i,e.child=n,e.mode&1&&bd(e,t.child,null,a),e.child.memoizedState=M1(a),e.memoizedState=R1,i);if(!(e.mode&1))return Tm(t,e,a,null);if(s.data==="$!"){if(n=s.nextSibling&&s.nextSibling.dataset,n)var o=n.dgst;return n=o,i=Error(Ye(419)),n=sy(i,n,void 0),Tm(t,e,a,n)}if(o=(a&t.childLanes)!==0,Gs||o){if(n=Gn,n!==null){switch(a&-a){case 4:s=2;break;case 16:s=8;break;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:s=32;break;case 536870912:s=268435456;break;default:s=0}s=s&(n.suspendedLanes|a)?0:s,s!==0&&s!==i.retryLane&&(i.retryLane=s,ko(t,s),ia(n,t,s,-1))}return Zx(),n=sy(Error(Ye(421))),Tm(t,e,a,n)}return s.data==="$?"?(e.flags|=128,e.child=t.child,e=ML.bind(null,t),s._reactRetry=e,null):(t=i.treeContext,oi=ZA(s.nextSibling),ci=e,Xr=!0,na=null,t!==null&&(Ii[Si++]=xo,Ii[Si++]=bo,Ii[Si++]=Ic,xo=t.id,bo=t.overflow,Ic=e),e=zx(e,n.children),e.flags|=4096,e)}function XC(t,e,r){t.lanes|=e;var n=t.alternate;n!==null&&(n.lanes|=e),P1(t.return,e,r)}function iy(t,e,r,n,s){var i=t.memoizedState;i===null?t.memoizedState={isBackwards:e,rendering:null,renderingStartTime:0,last:n,tail:r,tailMode:s}:(i.isBackwards=e,i.rendering=null,i.renderingStartTime=0,i.last=n,i.tail=r,i.tailMode=s)}function IS(t,e,r){var n=e.pendingProps,s=n.revealOrder,i=n.tail;if(Ts(t,e,n.children,r),n=sn.current,n&2)n=n&1|2,e.flags|=128;else{if(t!==null&&t.flags&128)e:for(t=e.child;t!==null;){if(t.tag===13)t.memoizedState!==null&&XC(t,r,e);else if(t.tag===19)XC(t,r,e);else if(t.child!==null){t.child.return=t,t=t.child;continue}if(t===e)break e;for(;t.sibling===null;){if(t.return===null||t.return===e)break e;t=t.return}t.sibling.return=t.return,t=t.sibling}n&=1}if(Rr(sn,n),!(e.mode&1))e.memoizedState=null;else switch(s){case"forwards":for(r=e.child,s=null;r!==null;)t=r.alternate,t!==null&&v0(t)===null&&(s=r),r=r.sibling;r=s,r===null?(s=e.child,e.child=null):(s=r.sibling,r.sibling=null),iy(e,!1,s,r,i);break;case"backwards":for(r=null,s=e.child,e.child=null;s!==null;){if(t=s.alternate,t!==null&&v0(t)===null){e.child=s;break}t=s.sibling,s.sibling=r,r=s,s=t}iy(e,!0,r,null,i);break;case"together":iy(e,!1,null,null,void 0);break;default:e.memoizedState=null}return e.child}function Pg(t,e){!(e.mode&1)&&t!==null&&(t.alternate=null,e.alternate=null,e.flags|=2)}function Do(t,e,r){if(t!==null&&(e.dependencies=t.dependencies),Fc|=e.lanes,!(r&e.childLanes))return null;if(t!==null&&e.child!==t.child)throw Error(Ye(153));if(e.child!==null){for(t=e.child,r=nl(t,t.pendingProps),e.child=r,r.return=e;t.sibling!==null;)t=t.sibling,r=r.sibling=nl(t,t.pendingProps),r.return=e;r.sibling=null}return e.child}function IL(t,e,r){switch(e.tag){case 3:_S(e),xd();break;case 5:eS(e);break;case 1:Ws(e.type)&&d0(e);break;case 4:Rx(e,e.stateNode.containerInfo);break;case 10:var n=e.type._context,s=e.memoizedProps.value;Rr(p0,n._currentValue),n._currentValue=s;break;case 13:if(n=e.memoizedState,n!==null)return n.dehydrated!==null?(Rr(sn,sn.current&1),e.flags|=128,null):r&e.child.childLanes?NS(t,e,r):(Rr(sn,sn.current&1),t=Do(t,e,r),t!==null?t.sibling:null);Rr(sn,sn.current&1);break;case 19:if(n=(r&e.childLanes)!==0,t.flags&128){if(n)return IS(t,e,r);e.flags|=128}if(s=e.memoizedState,s!==null&&(s.rendering=null,s.tail=null,s.lastEffect=null),Rr(sn,sn.current),n)break;return null;case 22:case 23:return e.lanes=0,CS(t,e,r)}return Do(t,e,r)}var SS,O1,FS,TS;SS=function(t,e){for(var r=e.child;r!==null;){if(r.tag===5||r.tag===6)t.appendChild(r.stateNode);else if(r.tag!==4&&r.child!==null){r.child.return=r,r=r.child;continue}if(r===e)break;for(;r.sibling===null;){if(r.return===null||r.return===e)return;r=r.return}r.sibling.return=r.return,r=r.sibling}};O1=function(){};FS=function(t,e,r,n){var s=t.memoizedProps;if(s!==n){t=e.stateNode,fc(Ra.current);var i=null;switch(r){case"input":s=l1(t,s),n=l1(t,n),i=[];break;case"select":s=on({},s,{value:void 0}),n=on({},n,{value:void 0}),i=[];break;case"textarea":s=d1(t,s),n=d1(t,n),i=[];break;default:typeof s.onClick!="function"&&typeof n.onClick=="function"&&(t.onclick=c0)}f1(r,n);var a;r=null;for(c in s)if(!n.hasOwnProperty(c)&&s.hasOwnProperty(c)&&s[c]!=null)if(c==="style"){var o=s[c];for(a in o)o.hasOwnProperty(a)&&(r||(r={}),r[a]="")}else c!=="dangerouslySetInnerHTML"&&c!=="children"&&c!=="suppressContentEditableWarning"&&c!=="suppressHydrationWarning"&&c!=="autoFocus"&&(jf.hasOwnProperty(c)?i||(i=[]):(i=i||[]).push(c,null));for(c in n){var l=n[c];if(o=s!=null?s[c]:void 0,n.hasOwnProperty(c)&&l!==o&&(l!=null||o!=null))if(c==="style")if(o){for(a in o)!o.hasOwnProperty(a)||l&&l.hasOwnProperty(a)||(r||(r={}),r[a]="");for(a in l)l.hasOwnProperty(a)&&o[a]!==l[a]&&(r||(r={}),r[a]=l[a])}else r||(i||(i=[]),i.push(c,r)),r=l;else c==="dangerouslySetInnerHTML"?(l=l?l.__html:void 0,o=o?o.__html:void 0,l!=null&&o!==l&&(i=i||[]).push(c,l)):c==="children"?typeof l!="string"&&typeof l!="number"||(i=i||[]).push(c,""+l):c!=="suppressContentEditableWarning"&&c!=="suppressHydrationWarning"&&(jf.hasOwnProperty(c)?(l!=null&&c==="onScroll"&&Vr("scroll",t),i||o===l||(i=[])):(i=i||[]).push(c,l))}r&&(i=i||[]).push("style",r);var c=i;(e.updateQueue=c)&&(e.flags|=4)}};TS=function(t,e,r,n){r!==n&&(e.flags|=4)};function Nh(t,e){if(!Xr)switch(t.tailMode){case"hidden":e=t.tail;for(var r=null;e!==null;)e.alternate!==null&&(r=e),e=e.sibling;r===null?t.tail=null:r.sibling=null;break;case"collapsed":r=t.tail;for(var n=null;r!==null;)r.alternate!==null&&(n=r),r=r.sibling;n===null?e||t.tail===null?t.tail=null:t.tail.sibling=null:n.sibling=null}}function hs(t){var e=t.alternate!==null&&t.alternate.child===t.child,r=0,n=0;if(e)for(var s=t.child;s!==null;)r|=s.lanes|s.childLanes,n|=s.subtreeFlags&14680064,n|=s.flags&14680064,s.return=t,s=s.sibling;else for(s=t.child;s!==null;)r|=s.lanes|s.childLanes,n|=s.subtreeFlags,n|=s.flags,s.return=t,s=s.sibling;return t.subtreeFlags|=n,t.childLanes=r,e}function SL(t,e,r){var n=e.pendingProps;switch(Ux(e),e.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return hs(e),null;case 1:return Ws(e.type)&&u0(),hs(e),null;case 3:return n=e.stateNode,Bd(),Gr($s),Gr(Cs),Ox(),n.pendingContext&&(n.context=n.pendingContext,n.pendingContext=null),(t===null||t.child===null)&&(Sm(e)?e.flags|=4:t===null||t.memoizedState.isDehydrated&&!(e.flags&256)||(e.flags|=1024,na!==null&&(W1(na),na=null))),O1(t,e),hs(e),null;case 5:Mx(e);var s=fc($f.current);if(r=e.type,t!==null&&e.stateNode!=null)FS(t,e,r,n,s),t.ref!==e.ref&&(e.flags|=512,e.flags|=2097152);else{if(!n){if(e.stateNode===null)throw Error(Ye(166));return hs(e),null}if(t=fc(Ra.current),Sm(e)){n=e.stateNode,r=e.type;var i=e.memoizedProps;switch(n[Pa]=e,n[Gf]=i,t=(e.mode&1)!==0,r){case"dialog":Vr("cancel",n),Vr("close",n);break;case"iframe":case"object":case"embed":Vr("load",n);break;case"video":case"audio":for(s=0;s<Wh.length;s++)Vr(Wh[s],n);break;case"source":Vr("error",n);break;case"img":case"image":case"link":Vr("error",n),Vr("load",n);break;case"details":Vr("toggle",n);break;case"input":iC(n,i),Vr("invalid",n);break;case"select":n._wrapperState={wasMultiple:!!i.multiple},Vr("invalid",n);break;case"textarea":oC(n,i),Vr("invalid",n)}f1(r,i),s=null;for(var a in i)if(i.hasOwnProperty(a)){var o=i[a];a==="children"?typeof o=="string"?n.textContent!==o&&(i.suppressHydrationWarning!==!0&&Im(n.textContent,o,t),s=["children",o]):typeof o=="number"&&n.textContent!==""+o&&(i.suppressHydrationWarning!==!0&&Im(n.textContent,o,t),s=["children",""+o]):jf.hasOwnProperty(a)&&o!=null&&a==="onScroll"&&Vr("scroll",n)}switch(r){case"input":ym(n),aC(n,i,!0);break;case"textarea":ym(n),AC(n);break;case"select":case"option":break;default:typeof i.onClick=="function"&&(n.onclick=c0)}n=s,e.updateQueue=n,n!==null&&(e.flags|=4)}else{a=s.nodeType===9?s:s.ownerDocument,t==="http://www.w3.org/1999/xhtml"&&(t=iI(r)),t==="http://www.w3.org/1999/xhtml"?r==="script"?(t=a.createElement("div"),t.innerHTML="<script><\/script>",t=t.removeChild(t.firstChild)):typeof n.is=="string"?t=a.createElement(r,{is:n.is}):(t=a.createElement(r),r==="select"&&(a=t,n.multiple?a.multiple=!0:n.size&&(a.size=n.size))):t=a.createElementNS(t,r),t[Pa]=e,t[Gf]=n,SS(t,e,!1,!1),e.stateNode=t;e:{switch(a=p1(r,n),r){case"dialog":Vr("cancel",t),Vr("close",t),s=n;break;case"iframe":case"object":case"embed":Vr("load",t),s=n;break;case"video":case"audio":for(s=0;s<Wh.length;s++)Vr(Wh[s],t);s=n;break;case"source":Vr("error",t),s=n;break;case"img":case"image":case"link":Vr("error",t),Vr("load",t),s=n;break;case"details":Vr("toggle",t),s=n;break;case"input":iC(t,n),s=l1(t,n),Vr("invalid",t);break;case"option":s=n;break;case"select":t._wrapperState={wasMultiple:!!n.multiple},s=on({},n,{value:void 0}),Vr("invalid",t);break;case"textarea":oC(t,n),s=d1(t,n),Vr("invalid",t);break;default:s=n}f1(r,s),o=s;for(i in o)if(o.hasOwnProperty(i)){var l=o[i];i==="style"?AI(t,l):i==="dangerouslySetInnerHTML"?(l=l?l.__html:void 0,l!=null&&aI(t,l)):i==="children"?typeof l=="string"?(r!=="textarea"||l!=="")&&kf(t,l):typeof l=="number"&&kf(t,""+l):i!=="suppressContentEditableWarning"&&i!=="suppressHydrationWarning"&&i!=="autoFocus"&&(jf.hasOwnProperty(i)?l!=null&&i==="onScroll"&&Vr("scroll",t):l!=null&&gx(t,i,l,a))}switch(r){case"input":ym(t),aC(t,n,!1);break;case"textarea":ym(t),AC(t);break;case"option":n.value!=null&&t.setAttribute("value",""+dl(n.value));break;case"select":t.multiple=!!n.multiple,i=n.value,i!=null?Ad(t,!!n.multiple,i,!1):n.defaultValue!=null&&Ad(t,!!n.multiple,n.defaultValue,!0);break;default:typeof s.onClick=="function"&&(t.onclick=c0)}switch(r){case"button":case"input":case"select":case"textarea":n=!!n.autoFocus;break e;case"img":n=!0;break e;default:n=!1}}n&&(e.flags|=4)}e.ref!==null&&(e.flags|=512,e.flags|=2097152)}return hs(e),null;case 6:if(t&&e.stateNode!=null)TS(t,e,t.memoizedProps,n);else{if(typeof n!="string"&&e.stateNode===null)throw Error(Ye(166));if(r=fc($f.current),fc(Ra.current),Sm(e)){if(n=e.stateNode,r=e.memoizedProps,n[Pa]=e,(i=n.nodeValue!==r)&&(t=ci,t!==null))switch(t.tag){case 3:Im(n.nodeValue,r,(t.mode&1)!==0);break;case 5:t.memoizedProps.suppressHydrationWarning!==!0&&Im(n.nodeValue,r,(t.mode&1)!==0)}i&&(e.flags|=4)}else n=(r.nodeType===9?r:r.ownerDocument).createTextNode(n),n[Pa]=e,e.stateNode=n}return hs(e),null;case 13:if(Gr(sn),n=e.memoizedState,t===null||t.memoizedState!==null&&t.memoizedState.dehydrated!==null){if(Xr&&oi!==null&&e.mode&1&&!(e.flags&128))WI(),xd(),e.flags|=98560,i=!1;else if(i=Sm(e),n!==null&&n.dehydrated!==null){if(t===null){if(!i)throw Error(Ye(318));if(i=e.memoizedState,i=i!==null?i.dehydrated:null,!i)throw Error(Ye(317));i[Pa]=e}else xd(),!(e.flags&128)&&(e.memoizedState=null),e.flags|=4;hs(e),i=!1}else na!==null&&(W1(na),na=null),i=!0;if(!i)return e.flags&65536?e:null}return e.flags&128?(e.lanes=r,e):(n=n!==null,n!==(t!==null&&t.memoizedState!==null)&&n&&(e.child.flags|=8192,e.mode&1&&(t===null||sn.current&1?Ln===0&&(Ln=3):Zx())),e.updateQueue!==null&&(e.flags|=4),hs(e),null);case 4:return Bd(),O1(t,e),t===null&&Kf(e.stateNode.containerInfo),hs(e),null;case 10:return jx(e.type._context),hs(e),null;case 17:return Ws(e.type)&&u0(),hs(e),null;case 19:if(Gr(sn),i=e.memoizedState,i===null)return hs(e),null;if(n=(e.flags&128)!==0,a=i.rendering,a===null)if(n)Nh(i,!1);else{if(Ln!==0||t!==null&&t.flags&128)for(t=e.child;t!==null;){if(a=v0(t),a!==null){for(e.flags|=128,Nh(i,!1),n=a.updateQueue,n!==null&&(e.updateQueue=n,e.flags|=4),e.subtreeFlags=0,n=r,r=e.child;r!==null;)i=r,t=n,i.flags&=14680066,a=i.alternate,a===null?(i.childLanes=0,i.lanes=t,i.child=null,i.subtreeFlags=0,i.memoizedProps=null,i.memoizedState=null,i.updateQueue=null,i.dependencies=null,i.stateNode=null):(i.childLanes=a.childLanes,i.lanes=a.lanes,i.child=a.child,i.subtreeFlags=0,i.deletions=null,i.memoizedProps=a.memoizedProps,i.memoizedState=a.memoizedState,i.updateQueue=a.updateQueue,i.type=a.type,t=a.dependencies,i.dependencies=t===null?null:{lanes:t.lanes,firstContext:t.firstContext}),r=r.sibling;return Rr(sn,sn.current&1|2),e.child}t=t.sibling}i.tail!==null&&wn()>Ed&&(e.flags|=128,n=!0,Nh(i,!1),e.lanes=4194304)}else{if(!n)if(t=v0(a),t!==null){if(e.flags|=128,n=!0,r=t.updateQueue,r!==null&&(e.updateQueue=r,e.flags|=4),Nh(i,!0),i.tail===null&&i.tailMode==="hidden"&&!a.alternate&&!Xr)return hs(e),null}else 2*wn()-i.renderingStartTime>Ed&&r!==1073741824&&(e.flags|=128,n=!0,Nh(i,!1),e.lanes=4194304);i.isBackwards?(a.sibling=e.child,e.child=a):(r=i.last,r!==null?r.sibling=a:e.child=a,i.last=a)}return i.tail!==null?(e=i.tail,i.rendering=e,i.tail=e.sibling,i.renderingStartTime=wn(),e.sibling=null,r=sn.current,Rr(sn,n?r&1|2:r&1),e):(hs(e),null);case 22:case 23:return Yx(),n=e.memoizedState!==null,t!==null&&t.memoizedState!==null!==n&&(e.flags|=8192),n&&e.mode&1?ai&1073741824&&(hs(e),e.subtreeFlags&6&&(e.flags|=8192)):hs(e),null;case 24:return null;case 25:return null}throw Error(Ye(156,e.tag))}function FL(t,e){switch(Ux(e),e.tag){case 1:return Ws(e.type)&&u0(),t=e.flags,t&65536?(e.flags=t&-65537|128,e):null;case 3:return Bd(),Gr($s),Gr(Cs),Ox(),t=e.flags,t&65536&&!(t&128)?(e.flags=t&-65537|128,e):null;case 5:return Mx(e),null;case 13:if(Gr(sn),t=e.memoizedState,t!==null&&t.dehydrated!==null){if(e.alternate===null)throw Error(Ye(340));xd()}return t=e.flags,t&65536?(e.flags=t&-65537|128,e):null;case 19:return Gr(sn),null;case 4:return Bd(),null;case 10:return jx(e.type._context),null;case 22:case 23:return Yx(),null;case 24:return null;default:return null}}var Um=!1,xs=!1,TL=typeof WeakSet=="function"?WeakSet:Set,xt=null;function sd(t,e){var r=t.ref;if(r!==null)if(typeof r=="function")try{r(null)}catch(n){un(t,e,n)}else r.current=null}function H1(t,e,r){try{r()}catch(n){un(t,e,n)}}var JC=!1;function UL(t,e){if(E1=o0,t=jI(),Fx(t)){if("selectionStart"in t)var r={start:t.selectionStart,end:t.selectionEnd};else e:{r=(r=t.ownerDocument)&&r.defaultView||window;var n=r.getSelection&&r.getSelection();if(n&&n.rangeCount!==0){r=n.anchorNode;var s=n.anchorOffset,i=n.focusNode;n=n.focusOffset;try{r.nodeType,i.nodeType}catch{r=null;break e}var a=0,o=-1,l=-1,c=0,u=0,f=t,p=null;t:for(;;){for(var m;f!==r||s!==0&&f.nodeType!==3||(o=a+s),f!==i||n!==0&&f.nodeType!==3||(l=a+n),f.nodeType===3&&(a+=f.nodeValue.length),(m=f.firstChild)!==null;)p=f,f=m;for(;;){if(f===t)break t;if(p===r&&++c===s&&(o=a),p===i&&++u===n&&(l=a),(m=f.nextSibling)!==null)break;f=p,p=f.parentNode}f=m}r=o===-1||l===-1?null:{start:o,end:l}}else r=null}r=r||{start:0,end:0}}else r=null;for(_1={focusedElem:t,selectionRange:r},o0=!1,xt=e;xt!==null;)if(e=xt,t=e.child,(e.subtreeFlags&1028)!==0&&t!==null)t.return=e,xt=t;else for(;xt!==null;){e=xt;try{var b=e.alternate;if(e.flags&1024)switch(e.tag){case 0:case 11:case 15:break;case 1:if(b!==null){var B=b.memoizedProps,_=b.memoizedState,w=e.stateNode,y=w.getSnapshotBeforeUpdate(e.elementType===e.type?B:ea(e.type,B),_);w.__reactInternalSnapshotBeforeUpdate=y}break;case 3:var S=e.stateNode.containerInfo;S.nodeType===1?S.textContent="":S.nodeType===9&&S.documentElement&&S.removeChild(S.documentElement);break;case 5:case 6:case 4:case 17:break;default:throw Error(Ye(163))}}catch(O){un(e,e.return,O)}if(t=e.sibling,t!==null){t.return=e.return,xt=t;break}xt=e.return}return b=JC,JC=!1,b}function mf(t,e,r){var n=e.updateQueue;if(n=n!==null?n.lastEffect:null,n!==null){var s=n=n.next;do{if((s.tag&t)===t){var i=s.destroy;s.destroy=void 0,i!==void 0&&H1(e,r,i)}s=s.next}while(s!==n)}}function mv(t,e){if(e=e.updateQueue,e=e!==null?e.lastEffect:null,e!==null){var r=e=e.next;do{if((r.tag&t)===t){var n=r.create;r.destroy=n()}r=r.next}while(r!==e)}}function V1(t){var e=t.ref;if(e!==null){var r=t.stateNode;switch(t.tag){case 5:t=r;break;default:t=r}typeof e=="function"?e(t):e.current=t}}function US(t){var e=t.alternate;e!==null&&(t.alternate=null,US(e)),t.child=null,t.deletions=null,t.sibling=null,t.tag===5&&(e=t.stateNode,e!==null&&(delete e[Pa],delete e[Gf],delete e[S1],delete e[fL],delete e[pL])),t.stateNode=null,t.return=null,t.dependencies=null,t.memoizedProps=null,t.memoizedState=null,t.pendingProps=null,t.stateNode=null,t.updateQueue=null}function PS(t){return t.tag===5||t.tag===3||t.tag===4}function YC(t){e:for(;;){for(;t.sibling===null;){if(t.return===null||PS(t.return))return null;t=t.return}for(t.sibling.return=t.return,t=t.sibling;t.tag!==5&&t.tag!==6&&t.tag!==18;){if(t.flags&2||t.child===null||t.tag===4)continue e;t.child.return=t,t=t.child}if(!(t.flags&2))return t.stateNode}}function K1(t,e,r){var n=t.tag;if(n===5||n===6)t=t.stateNode,e?r.nodeType===8?r.parentNode.insertBefore(t,e):r.insertBefore(t,e):(r.nodeType===8?(e=r.parentNode,e.insertBefore(t,r)):(e=r,e.appendChild(t)),r=r._reactRootContainer,r!=null||e.onclick!==null||(e.onclick=c0));else if(n!==4&&(t=t.child,t!==null))for(K1(t,e,r),t=t.sibling;t!==null;)K1(t,e,r),t=t.sibling}function q1(t,e,r){var n=t.tag;if(n===5||n===6)t=t.stateNode,e?r.insertBefore(t,e):r.appendChild(t);else if(n!==4&&(t=t.child,t!==null))for(q1(t,e,r),t=t.sibling;t!==null;)q1(t,e,r),t=t.sibling}var ts=null,ra=!1;function bA(t,e,r){for(r=r.child;r!==null;)QS(t,e,r),r=r.sibling}function QS(t,e,r){if(Da&&typeof Da.onCommitFiberUnmount=="function")try{Da.onCommitFiberUnmount(Av,r)}catch{}switch(r.tag){case 5:xs||sd(r,e);case 6:var n=ts,s=ra;ts=null,bA(t,e,r),ts=n,ra=s,ts!==null&&(ra?(t=ts,r=r.stateNode,t.nodeType===8?t.parentNode.removeChild(r):t.removeChild(r)):ts.removeChild(r.stateNode));break;case 18:ts!==null&&(ra?(t=ts,r=r.stateNode,t.nodeType===8?Yw(t.parentNode,r):t.nodeType===1&&Yw(t,r),Of(t)):Yw(ts,r.stateNode));break;case 4:n=ts,s=ra,ts=r.stateNode.containerInfo,ra=!0,bA(t,e,r),ts=n,ra=s;break;case 0:case 11:case 14:case 15:if(!xs&&(n=r.updateQueue,n!==null&&(n=n.lastEffect,n!==null))){s=n=n.next;do{var i=s,a=i.destroy;i=i.tag,a!==void 0&&(i&2||i&4)&&H1(r,e,a),s=s.next}while(s!==n)}bA(t,e,r);break;case 1:if(!xs&&(sd(r,e),n=r.stateNode,typeof n.componentWillUnmount=="function"))try{n.props=r.memoizedProps,n.state=r.memoizedState,n.componentWillUnmount()}catch(o){un(r,e,o)}bA(t,e,r);break;case 21:bA(t,e,r);break;case 22:r.mode&1?(xs=(n=xs)||r.memoizedState!==null,bA(t,e,r),xs=n):bA(t,e,r);break;default:bA(t,e,r)}}function ZC(t){var e=t.updateQueue;if(e!==null){t.updateQueue=null;var r=t.stateNode;r===null&&(r=t.stateNode=new TL),e.forEach(function(n){var s=OL.bind(null,t,n);r.has(n)||(r.add(n),n.then(s,s))})}}function Wi(t,e){var r=e.deletions;if(r!==null)for(var n=0;n<r.length;n++){var s=r[n];try{var i=t,a=e,o=a;e:for(;o!==null;){switch(o.tag){case 5:ts=o.stateNode,ra=!1;break e;case 3:ts=o.stateNode.containerInfo,ra=!0;break e;case 4:ts=o.stateNode.containerInfo,ra=!0;break e}o=o.return}if(ts===null)throw Error(Ye(160));QS(i,a,s),ts=null,ra=!1;var l=s.alternate;l!==null&&(l.return=null),s.return=null}catch(c){un(s,e,c)}}if(e.subtreeFlags&12854)for(e=e.child;e!==null;)LS(e,t),e=e.sibling}function LS(t,e){var r=t.alternate,n=t.flags;switch(t.tag){case 0:case 11:case 14:case 15:if(Wi(e,t),Sa(t),n&4){try{mf(3,t,t.return),mv(3,t)}catch(B){un(t,t.return,B)}try{mf(5,t,t.return)}catch(B){un(t,t.return,B)}}break;case 1:Wi(e,t),Sa(t),n&512&&r!==null&&sd(r,r.return);break;case 5:if(Wi(e,t),Sa(t),n&512&&r!==null&&sd(r,r.return),t.flags&32){var s=t.stateNode;try{kf(s,"")}catch(B){un(t,t.return,B)}}if(n&4&&(s=t.stateNode,s!=null)){var i=t.memoizedProps,a=r!==null?r.memoizedProps:i,o=t.type,l=t.updateQueue;if(t.updateQueue=null,l!==null)try{o==="input"&&i.type==="radio"&&i.name!=null&&nI(s,i),p1(o,a);var c=p1(o,i);for(a=0;a<l.length;a+=2){var u=l[a],f=l[a+1];u==="style"?AI(s,f):u==="dangerouslySetInnerHTML"?aI(s,f):u==="children"?kf(s,f):gx(s,u,f,c)}switch(o){case"input":c1(s,i);break;case"textarea":sI(s,i);break;case"select":var p=s._wrapperState.wasMultiple;s._wrapperState.wasMultiple=!!i.multiple;var m=i.value;m!=null?Ad(s,!!i.multiple,m,!1):p!==!!i.multiple&&(i.defaultValue!=null?Ad(s,!!i.multiple,i.defaultValue,!0):Ad(s,!!i.multiple,i.multiple?[]:"",!1))}s[Gf]=i}catch(B){un(t,t.return,B)}}break;case 6:if(Wi(e,t),Sa(t),n&4){if(t.stateNode===null)throw Error(Ye(162));s=t.stateNode,i=t.memoizedProps;try{s.nodeValue=i}catch(B){un(t,t.return,B)}}break;case 3:if(Wi(e,t),Sa(t),n&4&&r!==null&&r.memoizedState.isDehydrated)try{Of(e.containerInfo)}catch(B){un(t,t.return,B)}break;case 4:Wi(e,t),Sa(t);break;case 13:Wi(e,t),Sa(t),s=t.child,s.flags&8192&&(i=s.memoizedState!==null,s.stateNode.isHidden=i,!i||s.alternate!==null&&s.alternate.memoizedState!==null||(Xx=wn())),n&4&&ZC(t);break;case 22:if(u=r!==null&&r.memoizedState!==null,t.mode&1?(xs=(c=xs)||u,Wi(e,t),xs=c):Wi(e,t),Sa(t),n&8192){if(c=t.memoizedState!==null,(t.stateNode.isHidden=c)&&!u&&t.mode&1)for(xt=t,u=t.child;u!==null;){for(f=xt=u;xt!==null;){switch(p=xt,m=p.child,p.tag){case 0:case 11:case 14:case 15:mf(4,p,p.return);break;case 1:sd(p,p.return);var b=p.stateNode;if(typeof b.componentWillUnmount=="function"){n=p,r=p.return;try{e=n,b.props=e.memoizedProps,b.state=e.memoizedState,b.componentWillUnmount()}catch(B){un(n,r,B)}}break;case 5:sd(p,p.return);break;case 22:if(p.memoizedState!==null){t5(f);continue}}m!==null?(m.return=p,xt=m):t5(f)}u=u.sibling}e:for(u=null,f=t;;){if(f.tag===5){if(u===null){u=f;try{s=f.stateNode,c?(i=s.style,typeof i.setProperty=="function"?i.setProperty("display","none","important"):i.display="none"):(o=f.stateNode,l=f.memoizedProps.style,a=l!=null&&l.hasOwnProperty("display")?l.display:null,o.style.display=oI("display",a))}catch(B){un(t,t.return,B)}}}else if(f.tag===6){if(u===null)try{f.stateNode.nodeValue=c?"":f.memoizedProps}catch(B){un(t,t.return,B)}}else if((f.tag!==22&&f.tag!==23||f.memoizedState===null||f===t)&&f.child!==null){f.child.return=f,f=f.child;continue}if(f===t)break e;for(;f.sibling===null;){if(f.return===null||f.return===t)break e;u===f&&(u=null),f=f.return}u===f&&(u=null),f.sibling.return=f.return,f=f.sibling}}break;case 19:Wi(e,t),Sa(t),n&4&&ZC(t);break;case 21:break;default:Wi(e,t),Sa(t)}}function Sa(t){var e=t.flags;if(e&2){try{e:{for(var r=t.return;r!==null;){if(PS(r)){var n=r;break e}r=r.return}throw Error(Ye(160))}switch(n.tag){case 5:var s=n.stateNode;n.flags&32&&(kf(s,""),n.flags&=-33);var i=YC(t);q1(t,i,s);break;case 3:case 4:var a=n.stateNode.containerInfo,o=YC(t);K1(t,o,a);break;default:throw Error(Ye(161))}}catch(l){un(t,t.return,l)}t.flags&=-3}e&4096&&(t.flags&=-4097)}function PL(t,e,r){xt=t,jS(t)}function jS(t,e,r){for(var n=(t.mode&1)!==0;xt!==null;){var s=xt,i=s.child;if(s.tag===22&&n){var a=s.memoizedState!==null||Um;if(!a){var o=s.alternate,l=o!==null&&o.memoizedState!==null||xs;o=Um;var c=xs;if(Um=a,(xs=l)&&!c)for(xt=s;xt!==null;)a=xt,l=a.child,a.tag===22&&a.memoizedState!==null?r5(s):l!==null?(l.return=a,xt=l):r5(s);for(;i!==null;)xt=i,jS(i),i=i.sibling;xt=s,Um=o,xs=c}e5(t)}else s.subtreeFlags&8772&&i!==null?(i.return=s,xt=i):e5(t)}}function e5(t){for(;xt!==null;){var e=xt;if(e.flags&8772){var r=e.alternate;try{if(e.flags&8772)switch(e.tag){case 0:case 11:case 15:xs||mv(5,e);break;case 1:var n=e.stateNode;if(e.flags&4&&!xs)if(r===null)n.componentDidMount();else{var s=e.elementType===e.type?r.memoizedProps:ea(e.type,r.memoizedProps);n.componentDidUpdate(s,r.memoizedState,n.__reactInternalSnapshotBeforeUpdate)}var i=e.updateQueue;i!==null&&DC(e,i,n);break;case 3:var a=e.updateQueue;if(a!==null){if(r=null,e.child!==null)switch(e.child.tag){case 5:r=e.child.stateNode;break;case 1:r=e.child.stateNode}DC(e,a,r)}break;case 5:var o=e.stateNode;if(r===null&&e.flags&4){r=o;var l=e.memoizedProps;switch(e.type){case"button":case"input":case"select":case"textarea":l.autoFocus&&r.focus();break;case"img":l.src&&(r.src=l.src)}}break;case 6:break;case 4:break;case 12:break;case 13:if(e.memoizedState===null){var c=e.alternate;if(c!==null){var u=c.memoizedState;if(u!==null){var f=u.dehydrated;f!==null&&Of(f)}}}break;case 19:case 17:case 21:case 22:case 23:case 25:break;default:throw Error(Ye(163))}xs||e.flags&512&&V1(e)}catch(p){un(e,e.return,p)}}if(e===t){xt=null;break}if(r=e.sibling,r!==null){r.return=e.return,xt=r;break}xt=e.return}}function t5(t){for(;xt!==null;){var e=xt;if(e===t){xt=null;break}var r=e.sibling;if(r!==null){r.return=e.return,xt=r;break}xt=e.return}}function r5(t){for(;xt!==null;){var e=xt;try{switch(e.tag){case 0:case 11:case 15:var r=e.return;try{mv(4,e)}catch(l){un(e,r,l)}break;case 1:var n=e.stateNode;if(typeof n.componentDidMount=="function"){var s=e.return;try{n.componentDidMount()}catch(l){un(e,s,l)}}var i=e.return;try{V1(e)}catch(l){un(e,i,l)}break;case 5:var a=e.return;try{V1(e)}catch(l){un(e,a,l)}}}catch(l){un(e,e.return,l)}if(e===t){xt=null;break}var o=e.sibling;if(o!==null){o.return=e.return,xt=o;break}xt=e.return}}var QL=Math.ceil,x0=Ko.ReactCurrentDispatcher,$x=Ko.ReactCurrentOwner,Li=Ko.ReactCurrentBatchConfig,hr=0,Gn=null,In=null,As=0,ai=0,id=Cl(0),Ln=0,Yf=null,Fc=0,gv=0,Wx=0,gf=null,qs=null,Xx=0,Ed=1/0,wo=null,b0=!1,G1=null,tl=null,Pm=!1,KA=null,B0=0,vf=0,z1=null,Qg=-1,Lg=0;function Ps(){return hr&6?wn():Qg!==-1?Qg:Qg=wn()}function rl(t){return t.mode&1?hr&2&&As!==0?As&-As:gL.transition!==null?(Lg===0&&(Lg=yI()),Lg):(t=Ir,t!==0||(t=window.event,t=t===void 0?16:NI(t.type)),t):1}function ia(t,e,r,n){if(50<vf)throw vf=0,z1=null,Error(Ye(185));Bp(t,r,n),(!(hr&2)||t!==Gn)&&(t===Gn&&(!(hr&2)&&(gv|=r),Ln===4&&LA(t,As)),Xs(t,n),r===1&&hr===0&&!(e.mode&1)&&(Ed=wn()+500,hv&&El()))}function Xs(t,e){var r=t.callbackNode;gQ(t,e);var n=a0(t,t===Gn?As:0);if(n===0)r!==null&&uC(r),t.callbackNode=null,t.callbackPriority=0;else if(e=n&-n,t.callbackPriority!==e){if(r!=null&&uC(r),e===1)t.tag===0?mL(n5.bind(null,t)):GI(n5.bind(null,t)),dL(function(){!(hr&6)&&El()}),r=null;else{switch(xI(n)){case 1:r=bx;break;case 4:r=vI;break;case 16:r=i0;break;case 536870912:r=wI;break;default:r=i0}r=KS(r,kS.bind(null,t))}t.callbackPriority=e,t.callbackNode=r}}function kS(t,e){if(Qg=-1,Lg=0,hr&6)throw Error(Ye(327));var r=t.callbackNode;if(hd()&&t.callbackNode!==r)return null;var n=a0(t,t===Gn?As:0);if(n===0)return null;if(n&30||n&t.expiredLanes||e)e=C0(t,n);else{e=n;var s=hr;hr|=2;var i=RS();(Gn!==t||As!==e)&&(wo=null,Ed=wn()+500,vc(t,e));do try{kL();break}catch(o){DS(t,o)}while(!0);Lx(),x0.current=i,hr=s,In!==null?e=0:(Gn=null,As=0,e=Ln)}if(e!==0){if(e===2&&(s=y1(t),s!==0&&(n=s,e=$1(t,s))),e===1)throw r=Yf,vc(t,0),LA(t,n),Xs(t,wn()),r;if(e===6)LA(t,n);else{if(s=t.current.alternate,!(n&30)&&!LL(s)&&(e=C0(t,n),e===2&&(i=y1(t),i!==0&&(n=i,e=$1(t,i))),e===1))throw r=Yf,vc(t,0),LA(t,n),Xs(t,wn()),r;switch(t.finishedWork=s,t.finishedLanes=n,e){case 0:case 1:throw Error(Ye(345));case 2:rc(t,qs,wo);break;case 3:if(LA(t,n),(n&130023424)===n&&(e=Xx+500-wn(),10<e)){if(a0(t,0)!==0)break;if(s=t.suspendedLanes,(s&n)!==n){Ps(),t.pingedLanes|=t.suspendedLanes&s;break}t.timeoutHandle=I1(rc.bind(null,t,qs,wo),e);break}rc(t,qs,wo);break;case 4:if(LA(t,n),(n&4194240)===n)break;for(e=t.eventTimes,s=-1;0<n;){var a=31-sa(n);i=1<<a,a=e[a],a>s&&(s=a),n&=~i}if(n=s,n=wn()-n,n=(120>n?120:480>n?480:1080>n?1080:1920>n?1920:3e3>n?3e3:4320>n?4320:1960*QL(n/1960))-n,10<n){t.timeoutHandle=I1(rc.bind(null,t,qs,wo),n);break}rc(t,qs,wo);break;case 5:rc(t,qs,wo);break;default:throw Error(Ye(329))}}}return Xs(t,wn()),t.callbackNode===r?kS.bind(null,t):null}function $1(t,e){var r=gf;return t.current.memoizedState.isDehydrated&&(vc(t,e).flags|=256),t=C0(t,e),t!==2&&(e=qs,qs=r,e!==null&&W1(e)),t}function W1(t){qs===null?qs=t:qs.push.apply(qs,t)}function LL(t){for(var e=t;;){if(e.flags&16384){var r=e.updateQueue;if(r!==null&&(r=r.stores,r!==null))for(var n=0;n<r.length;n++){var s=r[n],i=s.getSnapshot;s=s.value;try{if(!oa(i(),s))return!1}catch{return!1}}}if(r=e.child,e.subtreeFlags&16384&&r!==null)r.return=e,e=r;else{if(e===t)break;for(;e.sibling===null;){if(e.return===null||e.return===t)return!0;e=e.return}e.sibling.return=e.return,e=e.sibling}}return!0}function LA(t,e){for(e&=~Wx,e&=~gv,t.suspendedLanes|=e,t.pingedLanes&=~e,t=t.expirationTimes;0<e;){var r=31-sa(e),n=1<<r;t[r]=-1,e&=~n}}function n5(t){if(hr&6)throw Error(Ye(327));hd();var e=a0(t,0);if(!(e&1))return Xs(t,wn()),null;var r=C0(t,e);if(t.tag!==0&&r===2){var n=y1(t);n!==0&&(e=n,r=$1(t,n))}if(r===1)throw r=Yf,vc(t,0),LA(t,e),Xs(t,wn()),r;if(r===6)throw Error(Ye(345));return t.finishedWork=t.current.alternate,t.finishedLanes=e,rc(t,qs,wo),Xs(t,wn()),null}function Jx(t,e){var r=hr;hr|=1;try{return t(e)}finally{hr=r,hr===0&&(Ed=wn()+500,hv&&El())}}function Tc(t){KA!==null&&KA.tag===0&&!(hr&6)&&hd();var e=hr;hr|=1;var r=Li.transition,n=Ir;try{if(Li.transition=null,Ir=1,t)return t()}finally{Ir=n,Li.transition=r,hr=e,!(hr&6)&&El()}}function Yx(){ai=id.current,Gr(id)}function vc(t,e){t.finishedWork=null,t.finishedLanes=0;var r=t.timeoutHandle;if(r!==-1&&(t.timeoutHandle=-1,uL(r)),In!==null)for(r=In.return;r!==null;){var n=r;switch(Ux(n),n.tag){case 1:n=n.type.childContextTypes,n!=null&&u0();break;case 3:Bd(),Gr($s),Gr(Cs),Ox();break;case 5:Mx(n);break;case 4:Bd();break;case 13:Gr(sn);break;case 19:Gr(sn);break;case 10:jx(n.type._context);break;case 22:case 23:Yx()}r=r.return}if(Gn=t,In=t=nl(t.current,null),As=ai=e,Ln=0,Yf=null,Wx=gv=Fc=0,qs=gf=null,hc!==null){for(e=0;e<hc.length;e++)if(r=hc[e],n=r.interleaved,n!==null){r.interleaved=null;var s=n.next,i=r.pending;if(i!==null){var a=i.next;i.next=s,n.next=a}r.pending=n}hc=null}return t}function DS(t,e){do{var r=In;try{if(Lx(),Tg.current=y0,w0){for(var n=an.memoizedState;n!==null;){var s=n.queue;s!==null&&(s.pending=null),n=n.next}w0=!1}if(Sc=0,Kn=Un=an=null,pf=!1,Wf=0,$x.current=null,r===null||r.return===null){Ln=1,Yf=e,In=null;break}e:{var i=t,a=r.return,o=r,l=e;if(e=As,o.flags|=32768,l!==null&&typeof l=="object"&&typeof l.then=="function"){var c=l,u=o,f=u.tag;if(!(u.mode&1)&&(f===0||f===11||f===15)){var p=u.alternate;p?(u.updateQueue=p.updateQueue,u.memoizedState=p.memoizedState,u.lanes=p.lanes):(u.updateQueue=null,u.memoizedState=null)}var m=KC(a);if(m!==null){m.flags&=-257,qC(m,a,o,i,e),m.mode&1&&VC(i,c,e),e=m,l=c;var b=e.updateQueue;if(b===null){var B=new Set;B.add(l),e.updateQueue=B}else b.add(l);break e}else{if(!(e&1)){VC(i,c,e),Zx();break e}l=Error(Ye(426))}}else if(Xr&&o.mode&1){var _=KC(a);if(_!==null){!(_.flags&65536)&&(_.flags|=256),qC(_,a,o,i,e),Px(Cd(l,o));break e}}i=l=Cd(l,o),Ln!==4&&(Ln=2),gf===null?gf=[i]:gf.push(i),i=a;do{switch(i.tag){case 3:i.flags|=65536,e&=-e,i.lanes|=e;var w=xS(i,l,e);kC(i,w);break e;case 1:o=l;var y=i.type,S=i.stateNode;if(!(i.flags&128)&&(typeof y.getDerivedStateFromError=="function"||S!==null&&typeof S.componentDidCatch=="function"&&(tl===null||!tl.has(S)))){i.flags|=65536,e&=-e,i.lanes|=e;var O=bS(i,o,e);kC(i,O);break e}}i=i.return}while(i!==null)}OS(r)}catch(R){e=R,In===r&&r!==null&&(In=r=r.return);continue}break}while(!0)}function RS(){var t=x0.current;return x0.current=y0,t===null?y0:t}function Zx(){(Ln===0||Ln===3||Ln===2)&&(Ln=4),Gn===null||!(Fc&268435455)&&!(gv&268435455)||LA(Gn,As)}function C0(t,e){var r=hr;hr|=2;var n=RS();(Gn!==t||As!==e)&&(wo=null,vc(t,e));do try{jL();break}catch(s){DS(t,s)}while(!0);if(Lx(),hr=r,x0.current=n,In!==null)throw Error(Ye(261));return Gn=null,As=0,Ln}function jL(){for(;In!==null;)MS(In)}function kL(){for(;In!==null&&!AQ();)MS(In)}function MS(t){var e=VS(t.alternate,t,ai);t.memoizedProps=t.pendingProps,e===null?OS(t):In=e,$x.current=null}function OS(t){var e=t;do{var r=e.alternate;if(t=e.return,e.flags&32768){if(r=FL(r,e),r!==null){r.flags&=32767,In=r;return}if(t!==null)t.flags|=32768,t.subtreeFlags=0,t.deletions=null;else{Ln=6,In=null;return}}else if(r=SL(r,e,ai),r!==null){In=r;return}if(e=e.sibling,e!==null){In=e;return}In=e=t}while(e!==null);Ln===0&&(Ln=5)}function rc(t,e,r){var n=Ir,s=Li.transition;try{Li.transition=null,Ir=1,DL(t,e,r,n)}finally{Li.transition=s,Ir=n}return null}function DL(t,e,r,n){do hd();while(KA!==null);if(hr&6)throw Error(Ye(327));r=t.finishedWork;var s=t.finishedLanes;if(r===null)return null;if(t.finishedWork=null,t.finishedLanes=0,r===t.current)throw Error(Ye(177));t.callbackNode=null,t.callbackPriority=0;var i=r.lanes|r.childLanes;if(vQ(t,i),t===Gn&&(In=Gn=null,As=0),!(r.subtreeFlags&2064)&&!(r.flags&2064)||Pm||(Pm=!0,KS(i0,function(){return hd(),null})),i=(r.flags&15990)!==0,r.subtreeFlags&15990||i){i=Li.transition,Li.transition=null;var a=Ir;Ir=1;var o=hr;hr|=4,$x.current=null,UL(t,r),LS(r,t),sL(_1),o0=!!E1,_1=E1=null,t.current=r,PL(r),lQ(),hr=o,Ir=a,Li.transition=i}else t.current=r;if(Pm&&(Pm=!1,KA=t,B0=s),i=t.pendingLanes,i===0&&(tl=null),dQ(r.stateNode),Xs(t,wn()),e!==null)for(n=t.onRecoverableError,r=0;r<e.length;r++)s=e[r],n(s.value,{componentStack:s.stack,digest:s.digest});if(b0)throw b0=!1,t=G1,G1=null,t;return B0&1&&t.tag!==0&&hd(),i=t.pendingLanes,i&1?t===z1?vf++:(vf=0,z1=t):vf=0,El(),null}function hd(){if(KA!==null){var t=xI(B0),e=Li.transition,r=Ir;try{if(Li.transition=null,Ir=16>t?16:t,KA===null)var n=!1;else{if(t=KA,KA=null,B0=0,hr&6)throw Error(Ye(331));var s=hr;for(hr|=4,xt=t.current;xt!==null;){var i=xt,a=i.child;if(xt.flags&16){var o=i.deletions;if(o!==null){for(var l=0;l<o.length;l++){var c=o[l];for(xt=c;xt!==null;){var u=xt;switch(u.tag){case 0:case 11:case 15:mf(8,u,i)}var f=u.child;if(f!==null)f.return=u,xt=f;else for(;xt!==null;){u=xt;var p=u.sibling,m=u.return;if(US(u),u===c){xt=null;break}if(p!==null){p.return=m,xt=p;break}xt=m}}}var b=i.alternate;if(b!==null){var B=b.child;if(B!==null){b.child=null;do{var _=B.sibling;B.sibling=null,B=_}while(B!==null)}}xt=i}}if(i.subtreeFlags&2064&&a!==null)a.return=i,xt=a;else e:for(;xt!==null;){if(i=xt,i.flags&2048)switch(i.tag){case 0:case 11:case 15:mf(9,i,i.return)}var w=i.sibling;if(w!==null){w.return=i.return,xt=w;break e}xt=i.return}}var y=t.current;for(xt=y;xt!==null;){a=xt;var S=a.child;if(a.subtreeFlags&2064&&S!==null)S.return=a,xt=S;else e:for(a=y;xt!==null;){if(o=xt,o.flags&2048)try{switch(o.tag){case 0:case 11:case 15:mv(9,o)}}catch(R){un(o,o.return,R)}if(o===a){xt=null;break e}var O=o.sibling;if(O!==null){O.return=o.return,xt=O;break e}xt=o.return}}if(hr=s,El(),Da&&typeof Da.onPostCommitFiberRoot=="function")try{Da.onPostCommitFiberRoot(Av,t)}catch{}n=!0}return n}finally{Ir=r,Li.transition=e}}return!1}function s5(t,e,r){e=Cd(r,e),e=xS(t,e,1),t=el(t,e,1),e=Ps(),t!==null&&(Bp(t,1,e),Xs(t,e))}function un(t,e,r){if(t.tag===3)s5(t,t,r);else for(;e!==null;){if(e.tag===3){s5(e,t,r);break}else if(e.tag===1){var n=e.stateNode;if(typeof e.type.getDerivedStateFromError=="function"||typeof n.componentDidCatch=="function"&&(tl===null||!tl.has(n))){t=Cd(r,t),t=bS(e,t,1),e=el(e,t,1),t=Ps(),e!==null&&(Bp(e,1,t),Xs(e,t));break}}e=e.return}}function RL(t,e,r){var n=t.pingCache;n!==null&&n.delete(e),e=Ps(),t.pingedLanes|=t.suspendedLanes&r,Gn===t&&(As&r)===r&&(Ln===4||Ln===3&&(As&130023424)===As&&500>wn()-Xx?vc(t,0):Wx|=r),Xs(t,e)}function HS(t,e){e===0&&(t.mode&1?(e=Bm,Bm<<=1,!(Bm&130023424)&&(Bm=4194304)):e=1);var r=Ps();t=ko(t,e),t!==null&&(Bp(t,e,r),Xs(t,r))}function ML(t){var e=t.memoizedState,r=0;e!==null&&(r=e.retryLane),HS(t,r)}function OL(t,e){var r=0;switch(t.tag){case 13:var n=t.stateNode,s=t.memoizedState;s!==null&&(r=s.retryLane);break;case 19:n=t.stateNode;break;default:throw Error(Ye(314))}n!==null&&n.delete(e),HS(t,r)}var VS;VS=function(t,e,r){if(t!==null)if(t.memoizedProps!==e.pendingProps||$s.current)Gs=!0;else{if(!(t.lanes&r)&&!(e.flags&128))return Gs=!1,IL(t,e,r);Gs=!!(t.flags&131072)}else Gs=!1,Xr&&e.flags&1048576&&zI(e,f0,e.index);switch(e.lanes=0,e.tag){case 2:var n=e.type;Pg(t,e),t=e.pendingProps;var s=yd(e,Cs.current);dd(e,r),s=Vx(null,e,n,t,s,r);var i=Kx();return e.flags|=1,typeof s=="object"&&s!==null&&typeof s.render=="function"&&s.$$typeof===void 0?(e.tag=1,e.memoizedState=null,e.updateQueue=null,Ws(n)?(i=!0,d0(e)):i=!1,e.memoizedState=s.state!==null&&s.state!==void 0?s.state:null,Dx(e),s.updater=pv,e.stateNode=s,s._reactInternals=e,L1(e,n,t,r),e=D1(null,e,n,!0,i,r)):(e.tag=0,Xr&&i&&Tx(e),Ts(null,e,s,r),e=e.child),e;case 16:n=e.elementType;e:{switch(Pg(t,e),t=e.pendingProps,s=n._init,n=s(n._payload),e.type=n,s=e.tag=VL(n),t=ea(n,t),s){case 0:e=k1(null,e,n,t,r);break e;case 1:e=$C(null,e,n,t,r);break e;case 11:e=GC(null,e,n,t,r);break e;case 14:e=zC(null,e,n,ea(n.type,t),r);break e}throw Error(Ye(306,n,""))}return e;case 0:return n=e.type,s=e.pendingProps,s=e.elementType===n?s:ea(n,s),k1(t,e,n,s,r);case 1:return n=e.type,s=e.pendingProps,s=e.elementType===n?s:ea(n,s),$C(t,e,n,s,r);case 3:e:{if(_S(e),t===null)throw Error(Ye(387));n=e.pendingProps,i=e.memoizedState,s=i.element,ZI(t,e),g0(e,n,null,r);var a=e.memoizedState;if(n=a.element,i.isDehydrated)if(i={element:n,isDehydrated:!1,cache:a.cache,pendingSuspenseBoundaries:a.pendingSuspenseBoundaries,transitions:a.transitions},e.updateQueue.baseState=i,e.memoizedState=i,e.flags&256){s=Cd(Error(Ye(423)),e),e=WC(t,e,n,r,s);break e}else if(n!==s){s=Cd(Error(Ye(424)),e),e=WC(t,e,n,r,s);break e}else for(oi=ZA(e.stateNode.containerInfo.firstChild),ci=e,Xr=!0,na=null,r=JI(e,null,n,r),e.child=r;r;)r.flags=r.flags&-3|4096,r=r.sibling;else{if(xd(),n===s){e=Do(t,e,r);break e}Ts(t,e,n,r)}e=e.child}return e;case 5:return eS(e),t===null&&U1(e),n=e.type,s=e.pendingProps,i=t!==null?t.memoizedProps:null,a=s.children,N1(n,s)?a=null:i!==null&&N1(n,i)&&(e.flags|=32),ES(t,e),Ts(t,e,a,r),e.child;case 6:return t===null&&U1(e),null;case 13:return NS(t,e,r);case 4:return Rx(e,e.stateNode.containerInfo),n=e.pendingProps,t===null?e.child=bd(e,null,n,r):Ts(t,e,n,r),e.child;case 11:return n=e.type,s=e.pendingProps,s=e.elementType===n?s:ea(n,s),GC(t,e,n,s,r);case 7:return Ts(t,e,e.pendingProps,r),e.child;case 8:return Ts(t,e,e.pendingProps.children,r),e.child;case 12:return Ts(t,e,e.pendingProps.children,r),e.child;case 10:e:{if(n=e.type._context,s=e.pendingProps,i=e.memoizedProps,a=s.value,Rr(p0,n._currentValue),n._currentValue=a,i!==null)if(oa(i.value,a)){if(i.children===s.children&&!$s.current){e=Do(t,e,r);break e}}else for(i=e.child,i!==null&&(i.return=e);i!==null;){var o=i.dependencies;if(o!==null){a=i.child;for(var l=o.firstContext;l!==null;){if(l.context===n){if(i.tag===1){l=Io(-1,r&-r),l.tag=2;var c=i.updateQueue;if(c!==null){c=c.shared;var u=c.pending;u===null?l.next=l:(l.next=u.next,u.next=l),c.pending=l}}i.lanes|=r,l=i.alternate,l!==null&&(l.lanes|=r),P1(i.return,r,e),o.lanes|=r;break}l=l.next}}else if(i.tag===10)a=i.type===e.type?null:i.child;else if(i.tag===18){if(a=i.return,a===null)throw Error(Ye(341));a.lanes|=r,o=a.alternate,o!==null&&(o.lanes|=r),P1(a,r,e),a=i.sibling}else a=i.child;if(a!==null)a.return=i;else for(a=i;a!==null;){if(a===e){a=null;break}if(i=a.sibling,i!==null){i.return=a.return,a=i;break}a=a.return}i=a}Ts(t,e,s.children,r),e=e.child}return e;case 9:return s=e.type,n=e.pendingProps.children,dd(e,r),s=ki(s),n=n(s),e.flags|=1,Ts(t,e,n,r),e.child;case 14:return n=e.type,s=ea(n,e.pendingProps),s=ea(n.type,s),zC(t,e,n,s,r);case 15:return BS(t,e,e.type,e.pendingProps,r);case 17:return n=e.type,s=e.pendingProps,s=e.elementType===n?s:ea(n,s),Pg(t,e),e.tag=1,Ws(n)?(t=!0,d0(e)):t=!1,dd(e,r),yS(e,n,s),L1(e,n,s,r),D1(null,e,n,!0,t,r);case 19:return IS(t,e,r);case 22:return CS(t,e,r)}throw Error(Ye(156,e.tag))};function KS(t,e){return gI(t,e)}function HL(t,e,r,n){this.tag=t,this.key=r,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=e,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=n,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function Ti(t,e,r,n){return new HL(t,e,r,n)}function eb(t){return t=t.prototype,!(!t||!t.isReactComponent)}function VL(t){if(typeof t=="function")return eb(t)?1:0;if(t!=null){if(t=t.$$typeof,t===wx)return 11;if(t===yx)return 14}return 2}function nl(t,e){var r=t.alternate;return r===null?(r=Ti(t.tag,e,t.key,t.mode),r.elementType=t.elementType,r.type=t.type,r.stateNode=t.stateNode,r.alternate=t,t.alternate=r):(r.pendingProps=e,r.type=t.type,r.flags=0,r.subtreeFlags=0,r.deletions=null),r.flags=t.flags&14680064,r.childLanes=t.childLanes,r.lanes=t.lanes,r.child=t.child,r.memoizedProps=t.memoizedProps,r.memoizedState=t.memoizedState,r.updateQueue=t.updateQueue,e=t.dependencies,r.dependencies=e===null?null:{lanes:e.lanes,firstContext:e.firstContext},r.sibling=t.sibling,r.index=t.index,r.ref=t.ref,r}function jg(t,e,r,n,s,i){var a=2;if(n=t,typeof t=="function")eb(t)&&(a=1);else if(typeof t=="string")a=5;else e:switch(t){case Wu:return wc(r.children,s,i,e);case vx:a=8,s|=8;break;case i1:return t=Ti(12,r,e,s|2),t.elementType=i1,t.lanes=i,t;case a1:return t=Ti(13,r,e,s),t.elementType=a1,t.lanes=i,t;case o1:return t=Ti(19,r,e,s),t.elementType=o1,t.lanes=i,t;case eI:return vv(r,s,i,e);default:if(typeof t=="object"&&t!==null)switch(t.$$typeof){case YN:a=10;break e;case ZN:a=9;break e;case wx:a=11;break e;case yx:a=14;break e;case TA:a=16,n=null;break e}throw Error(Ye(130,t==null?t:typeof t,""))}return e=Ti(a,r,e,s),e.elementType=t,e.type=n,e.lanes=i,e}function wc(t,e,r,n){return t=Ti(7,t,n,e),t.lanes=r,t}function vv(t,e,r,n){return t=Ti(22,t,n,e),t.elementType=eI,t.lanes=r,t.stateNode={isHidden:!1},t}function ay(t,e,r){return t=Ti(6,t,null,e),t.lanes=r,t}function oy(t,e,r){return e=Ti(4,t.children!==null?t.children:[],t.key,e),e.lanes=r,e.stateNode={containerInfo:t.containerInfo,pendingChildren:null,implementation:t.implementation},e}function KL(t,e,r,n,s){this.tag=e,this.containerInfo=t,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.pendingContext=this.context=null,this.callbackPriority=0,this.eventTimes=Ow(0),this.expirationTimes=Ow(-1),this.entangledLanes=this.finishedLanes=this.mutableReadLanes=this.expiredLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=Ow(0),this.identifierPrefix=n,this.onRecoverableError=s,this.mutableSourceEagerHydrationData=null}function tb(t,e,r,n,s,i,a,o,l){return t=new KL(t,e,r,o,l),e===1?(e=1,i===!0&&(e|=8)):e=0,i=Ti(3,null,null,e),t.current=i,i.stateNode=t,i.memoizedState={element:n,isDehydrated:r,cache:null,transitions:null,pendingSuspenseBoundaries:null},Dx(i),t}function qL(t,e,r){var n=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:$u,key:n==null?null:""+n,children:t,containerInfo:e,implementation:r}}function qS(t){if(!t)return hl;t=t._reactInternals;e:{if(Hc(t)!==t||t.tag!==1)throw Error(Ye(170));var e=t;do{switch(e.tag){case 3:e=e.stateNode.context;break e;case 1:if(Ws(e.type)){e=e.stateNode.__reactInternalMemoizedMergedChildContext;break e}}e=e.return}while(e!==null);throw Error(Ye(171))}if(t.tag===1){var r=t.type;if(Ws(r))return qI(t,r,e)}return e}function GS(t,e,r,n,s,i,a,o,l){return t=tb(r,n,!0,t,s,i,a,o,l),t.context=qS(null),r=t.current,n=Ps(),s=rl(r),i=Io(n,s),i.callback=e??null,el(r,i,s),t.current.lanes=s,Bp(t,s,n),Xs(t,n),t}function wv(t,e,r,n){var s=e.current,i=Ps(),a=rl(s);return r=qS(r),e.context===null?e.context=r:e.pendingContext=r,e=Io(i,a),e.payload={element:t},n=n===void 0?null:n,n!==null&&(e.callback=n),t=el(s,e,a),t!==null&&(ia(t,s,a,i),Fg(t,s,a)),a}function E0(t){if(t=t.current,!t.child)return null;switch(t.child.tag){case 5:return t.child.stateNode;default:return t.child.stateNode}}function i5(t,e){if(t=t.memoizedState,t!==null&&t.dehydrated!==null){var r=t.retryLane;t.retryLane=r!==0&&r<e?r:e}}function rb(t,e){i5(t,e),(t=t.alternate)&&i5(t,e)}function GL(){return null}var zS=typeof reportError=="function"?reportError:function(t){console.error(t)};function nb(t){this._internalRoot=t}yv.prototype.render=nb.prototype.render=function(t){var e=this._internalRoot;if(e===null)throw Error(Ye(409));wv(t,e,null,null)};yv.prototype.unmount=nb.prototype.unmount=function(){var t=this._internalRoot;if(t!==null){this._internalRoot=null;var e=t.containerInfo;Tc(function(){wv(null,t,null,null)}),e[jo]=null}};function yv(t){this._internalRoot=t}yv.prototype.unstable_scheduleHydration=function(t){if(t){var e=CI();t={blockedOn:null,target:t,priority:e};for(var r=0;r<QA.length&&e!==0&&e<QA[r].priority;r++);QA.splice(r,0,t),r===0&&_I(t)}};function sb(t){return!(!t||t.nodeType!==1&&t.nodeType!==9&&t.nodeType!==11)}function xv(t){return!(!t||t.nodeType!==1&&t.nodeType!==9&&t.nodeType!==11&&(t.nodeType!==8||t.nodeValue!==" react-mount-point-unstable "))}function a5(){}function zL(t,e,r,n,s){if(s){if(typeof n=="function"){var i=n;n=function(){var c=E0(a);i.call(c)}}var a=GS(e,n,t,0,null,!1,!1,"",a5);return t._reactRootContainer=a,t[jo]=a.current,Kf(t.nodeType===8?t.parentNode:t),Tc(),a}for(;s=t.lastChild;)t.removeChild(s);if(typeof n=="function"){var o=n;n=function(){var c=E0(l);o.call(c)}}var l=tb(t,0,!1,null,null,!1,!1,"",a5);return t._reactRootContainer=l,t[jo]=l.current,Kf(t.nodeType===8?t.parentNode:t),Tc(function(){wv(e,l,r,n)}),l}function bv(t,e,r,n,s){var i=r._reactRootContainer;if(i){var a=i;if(typeof s=="function"){var o=s;s=function(){var l=E0(a);o.call(l)}}wv(e,a,t,s)}else a=zL(r,e,t,s,n);return E0(a)}bI=function(t){switch(t.tag){case 3:var e=t.stateNode;if(e.current.memoizedState.isDehydrated){var r=$h(e.pendingLanes);r!==0&&(Bx(e,r|1),Xs(e,wn()),!(hr&6)&&(Ed=wn()+500,El()))}break;case 13:Tc(function(){var n=ko(t,1);if(n!==null){var s=Ps();ia(n,t,1,s)}}),rb(t,1)}};Cx=function(t){if(t.tag===13){var e=ko(t,134217728);if(e!==null){var r=Ps();ia(e,t,134217728,r)}rb(t,134217728)}};BI=function(t){if(t.tag===13){var e=rl(t),r=ko(t,e);if(r!==null){var n=Ps();ia(r,t,e,n)}rb(t,e)}};CI=function(){return Ir};EI=function(t,e){var r=Ir;try{return Ir=t,e()}finally{Ir=r}};g1=function(t,e,r){switch(e){case"input":if(c1(t,r),e=r.name,r.type==="radio"&&e!=null){for(r=t;r.parentNode;)r=r.parentNode;for(r=r.querySelectorAll("input[name="+JSON.stringify(""+e)+'][type="radio"]'),e=0;e<r.length;e++){var n=r[e];if(n!==t&&n.form===t.form){var s=dv(n);if(!s)throw Error(Ye(90));rI(n),c1(n,s)}}}break;case"textarea":sI(t,r);break;case"select":e=r.value,e!=null&&Ad(t,!!r.multiple,e,!1)}};uI=Jx;dI=Tc;var $L={usingClientEntryPoint:!1,Events:[Ep,Zu,dv,lI,cI,Jx]},Ih={findFiberByHostInstance:dc,bundleType:0,version:"18.3.1",rendererPackageName:"react-dom"},WL={bundleType:Ih.bundleType,version:Ih.version,rendererPackageName:Ih.rendererPackageName,rendererConfig:Ih.rendererConfig,overrideHookState:null,overrideHookStateDeletePath:null,overrideHookStateRenamePath:null,overrideProps:null,overridePropsDeletePath:null,overridePropsRenamePath:null,setErrorHandler:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:Ko.ReactCurrentDispatcher,findHostInstanceByFiber:function(t){return t=pI(t),t===null?null:t.stateNode},findFiberByHostInstance:Ih.findFiberByHostInstance||GL,findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null,reconcilerVersion:"18.3.1-next-f1338f8080-20240426"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var Qm=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!Qm.isDisabled&&Qm.supportsFiber)try{Av=Qm.inject(WL),Da=Qm}catch{}}pi.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=$L;pi.createPortal=function(t,e){var r=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!sb(e))throw Error(Ye(200));return qL(t,e,null,r)};pi.createRoot=function(t,e){if(!sb(t))throw Error(Ye(299));var r=!1,n="",s=zS;return e!=null&&(e.unstable_strictMode===!0&&(r=!0),e.identifierPrefix!==void 0&&(n=e.identifierPrefix),e.onRecoverableError!==void 0&&(s=e.onRecoverableError)),e=tb(t,1,!1,null,null,r,!1,n,s),t[jo]=e.current,Kf(t.nodeType===8?t.parentNode:t),new nb(e)};pi.findDOMNode=function(t){if(t==null)return null;if(t.nodeType===1)return t;var e=t._reactInternals;if(e===void 0)throw typeof t.render=="function"?Error(Ye(188)):(t=Object.keys(t).join(","),Error(Ye(268,t)));return t=pI(e),t=t===null?null:t.stateNode,t};pi.flushSync=function(t){return Tc(t)};pi.hydrate=function(t,e,r){if(!xv(e))throw Error(Ye(200));return bv(null,t,e,!0,r)};pi.hydrateRoot=function(t,e,r){if(!sb(t))throw Error(Ye(405));var n=r!=null&&r.hydratedSources||null,s=!1,i="",a=zS;if(r!=null&&(r.unstable_strictMode===!0&&(s=!0),r.identifierPrefix!==void 0&&(i=r.identifierPrefix),r.onRecoverableError!==void 0&&(a=r.onRecoverableError)),e=GS(e,null,t,1,r??null,s,!1,i,a),t[jo]=e.current,Kf(t),n)for(t=0;t<n.length;t++)r=n[t],s=r._getVersion,s=s(r._source),e.mutableSourceEagerHydrationData==null?e.mutableSourceEagerHydrationData=[r,s]:e.mutableSourceEagerHydrationData.push(r,s);return new yv(e)};pi.render=function(t,e,r){if(!xv(e))throw Error(Ye(200));return bv(null,t,e,!1,r)};pi.unmountComponentAtNode=function(t){if(!xv(t))throw Error(Ye(40));return t._reactRootContainer?(Tc(function(){bv(null,null,t,!1,function(){t._reactRootContainer=null,t[jo]=null})}),!0):!1};pi.unstable_batchedUpdates=Jx;pi.unstable_renderSubtreeIntoContainer=function(t,e,r,n){if(!xv(r))throw Error(Ye(200));if(t==null||t._reactInternals===void 0)throw Error(Ye(38));return bv(t,e,r,!1,n)};pi.version="18.3.1-next-f1338f8080-20240426";function $S(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE($S)}catch(t){console.error(t)}}$S(),$N.exports=pi;var _d=$N.exports,o5=_d;n1.createRoot=o5.createRoot,n1.hydrateRoot=o5.hydrateRoot;/**
 * react-router v7.8.1
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */var A5="popstate";function XL(t={}){function e(n,s){let{pathname:i,search:a,hash:o}=n.location;return X1("",{pathname:i,search:a,hash:o},s.state&&s.state.usr||null,s.state&&s.state.key||"default")}function r(n,s){return typeof s=="string"?s:Zf(s)}return YL(e,r,null,t)}function en(t,e){if(t===!1||t===null||typeof t>"u")throw new Error(e)}function Aa(t,e){if(!t){typeof console<"u"&&console.warn(e);try{throw new Error(e)}catch{}}}function JL(){return Math.random().toString(36).substring(2,10)}function l5(t,e){return{usr:t.state,key:t.key,idx:e}}function X1(t,e,r=null,n){return{pathname:typeof t=="string"?t:t.pathname,search:"",hash:"",...typeof e=="string"?Od(e):e,state:r,key:e&&e.key||n||JL()}}function Zf({pathname:t="/",search:e="",hash:r=""}){return e&&e!=="?"&&(t+=e.charAt(0)==="?"?e:"?"+e),r&&r!=="#"&&(t+=r.charAt(0)==="#"?r:"#"+r),t}function Od(t){let e={};if(t){let r=t.indexOf("#");r>=0&&(e.hash=t.substring(r),t=t.substring(0,r));let n=t.indexOf("?");n>=0&&(e.search=t.substring(n),t=t.substring(0,n)),t&&(e.pathname=t)}return e}function YL(t,e,r,n={}){let{window:s=document.defaultView,v5Compat:i=!1}=n,a=s.history,o="POP",l=null,c=u();c==null&&(c=0,a.replaceState({...a.state,idx:c},""));function u(){return(a.state||{idx:null}).idx}function f(){o="POP";let _=u(),w=_==null?null:_-c;c=_,l&&l({action:o,location:B.location,delta:w})}function p(_,w){o="PUSH";let y=X1(B.location,_,w);c=u()+1;let S=l5(y,c),O=B.createHref(y);try{a.pushState(S,"",O)}catch(R){if(R instanceof DOMException&&R.name==="DataCloneError")throw R;s.location.assign(O)}i&&l&&l({action:o,location:B.location,delta:1})}function m(_,w){o="REPLACE";let y=X1(B.location,_,w);c=u();let S=l5(y,c),O=B.createHref(y);a.replaceState(S,"",O),i&&l&&l({action:o,location:B.location,delta:0})}function b(_){return ZL(_)}let B={get action(){return o},get location(){return t(s,a)},listen(_){if(l)throw new Error("A history only accepts one active listener");return s.addEventListener(A5,f),l=_,()=>{s.removeEventListener(A5,f),l=null}},createHref(_){return e(s,_)},createURL:b,encodeLocation(_){let w=b(_);return{pathname:w.pathname,search:w.search,hash:w.hash}},push:p,replace:m,go(_){return a.go(_)}};return B}function ZL(t,e=!1){let r="http://localhost";typeof window<"u"&&(r=window.location.origin!=="null"?window.location.origin:window.location.href),en(r,"No window.location.(origin|href) available to create URL");let n=typeof t=="string"?t:Zf(t);return n=n.replace(/ $/,"%20"),!e&&n.startsWith("//")&&(n=r+n),new URL(n,r)}function WS(t,e,r="/"){return ej(t,e,r,!1)}function ej(t,e,r,n){let s=typeof e=="string"?Od(e):e,i=Ro(s.pathname||"/",r);if(i==null)return null;let a=XS(t);tj(a);let o=null;for(let l=0;o==null&&l<a.length;++l){let c=dj(i);o=cj(a[l],c,n)}return o}function XS(t,e=[],r=[],n="",s=!1){let i=(a,o,l=s,c)=>{let u={relativePath:c===void 0?a.path||"":c,caseSensitive:a.caseSensitive===!0,childrenIndex:o,route:a};if(u.relativePath.startsWith("/")){if(!u.relativePath.startsWith(n)&&l)return;en(u.relativePath.startsWith(n),`Absolute route path "${u.relativePath}" nested under path "${n}" is not valid. An absolute child route path must start with the combined path of all its parent routes.`),u.relativePath=u.relativePath.slice(n.length)}let f=So([n,u.relativePath]),p=r.concat(u);a.children&&a.children.length>0&&(en(a.index!==!0,`Index routes must not have child routes. Please remove all child routes from route path "${f}".`),XS(a.children,e,p,f,l)),!(a.path==null&&!a.index)&&e.push({path:f,score:Aj(f,a.index),routesMeta:p})};return t.forEach((a,o)=>{var l;if(a.path===""||!((l=a.path)!=null&&l.includes("?")))i(a,o);else for(let c of JS(a.path))i(a,o,!0,c)}),e}function JS(t){let e=t.split("/");if(e.length===0)return[];let[r,...n]=e,s=r.endsWith("?"),i=r.replace(/\?$/,"");if(n.length===0)return s?[i,""]:[i];let a=JS(n.join("/")),o=[];return o.push(...a.map(l=>l===""?i:[i,l].join("/"))),s&&o.push(...a),o.map(l=>t.startsWith("/")&&l===""?"/":l)}function tj(t){t.sort((e,r)=>e.score!==r.score?r.score-e.score:lj(e.routesMeta.map(n=>n.childrenIndex),r.routesMeta.map(n=>n.childrenIndex)))}var rj=/^:[\w-]+$/,nj=3,sj=2,ij=1,aj=10,oj=-2,c5=t=>t==="*";function Aj(t,e){let r=t.split("/"),n=r.length;return r.some(c5)&&(n+=oj),e&&(n+=sj),r.filter(s=>!c5(s)).reduce((s,i)=>s+(rj.test(i)?nj:i===""?ij:aj),n)}function lj(t,e){return t.length===e.length&&t.slice(0,-1).every((n,s)=>n===e[s])?t[t.length-1]-e[e.length-1]:0}function cj(t,e,r=!1){let{routesMeta:n}=t,s={},i="/",a=[];for(let o=0;o<n.length;++o){let l=n[o],c=o===n.length-1,u=i==="/"?e:e.slice(i.length)||"/",f=_0({path:l.relativePath,caseSensitive:l.caseSensitive,end:c},u),p=l.route;if(!f&&c&&r&&!n[n.length-1].route.index&&(f=_0({path:l.relativePath,caseSensitive:l.caseSensitive,end:!1},u)),!f)return null;Object.assign(s,f.params),a.push({params:s,pathname:So([i,f.pathname]),pathnameBase:mj(So([i,f.pathnameBase])),route:p}),f.pathnameBase!=="/"&&(i=So([i,f.pathnameBase]))}return a}function _0(t,e){typeof t=="string"&&(t={path:t,caseSensitive:!1,end:!0});let[r,n]=uj(t.path,t.caseSensitive,t.end),s=e.match(r);if(!s)return null;let i=s[0],a=i.replace(/(.)\/+$/,"$1"),o=s.slice(1);return{params:n.reduce((c,{paramName:u,isOptional:f},p)=>{if(u==="*"){let b=o[p]||"";a=i.slice(0,i.length-b.length).replace(/(.)\/+$/,"$1")}const m=o[p];return f&&!m?c[u]=void 0:c[u]=(m||"").replace(/%2F/g,"/"),c},{}),pathname:i,pathnameBase:a,pattern:t}}function uj(t,e=!1,r=!0){Aa(t==="*"||!t.endsWith("*")||t.endsWith("/*"),`Route path "${t}" will be treated as if it were "${t.replace(/\*$/,"/*")}" because the \`*\` character must always follow a \`/\` in the pattern. To get rid of this warning, please change the route path to "${t.replace(/\*$/,"/*")}".`);let n=[],s="^"+t.replace(/\/*\*?$/,"").replace(/^\/*/,"/").replace(/[\\.*+^${}|()[\]]/g,"\\$&").replace(/\/:([\w-]+)(\?)?/g,(a,o,l)=>(n.push({paramName:o,isOptional:l!=null}),l?"/?([^\\/]+)?":"/([^\\/]+)")).replace(/\/([\w-]+)\?(\/|$)/g,"(/$1)?$2");return t.endsWith("*")?(n.push({paramName:"*"}),s+=t==="*"||t==="/*"?"(.*)$":"(?:\\/(.+)|\\/*)$"):r?s+="\\/*$":t!==""&&t!=="/"&&(s+="(?:(?=\\/|$))"),[new RegExp(s,e?void 0:"i"),n]}function dj(t){try{return t.split("/").map(e=>decodeURIComponent(e).replace(/\//g,"%2F")).join("/")}catch(e){return Aa(!1,`The URL path "${t}" could not be decoded because it is a malformed URL segment. This is probably due to a bad percent encoding (${e}).`),t}}function Ro(t,e){if(e==="/")return t;if(!t.toLowerCase().startsWith(e.toLowerCase()))return null;let r=e.endsWith("/")?e.length-1:e.length,n=t.charAt(r);return n&&n!=="/"?null:t.slice(r)||"/"}function hj(t,e="/"){let{pathname:r,search:n="",hash:s=""}=typeof t=="string"?Od(t):t;return{pathname:r?r.startsWith("/")?r:fj(r,e):e,search:gj(n),hash:vj(s)}}function fj(t,e){let r=e.replace(/\/+$/,"").split("/");return t.split("/").forEach(s=>{s===".."?r.length>1&&r.pop():s!=="."&&r.push(s)}),r.length>1?r.join("/"):"/"}function Ay(t,e,r,n){return`Cannot include a '${t}' character in a manually specified \`to.${e}\` field [${JSON.stringify(n)}].  Please separate it out to the \`to.${r}\` field. Alternatively you may provide the full path as a string in <Link to="..."> and the router will parse it for you.`}function pj(t){return t.filter((e,r)=>r===0||e.route.path&&e.route.path.length>0)}function ib(t){let e=pj(t);return e.map((r,n)=>n===e.length-1?r.pathname:r.pathnameBase)}function ab(t,e,r,n=!1){let s;typeof t=="string"?s=Od(t):(s={...t},en(!s.pathname||!s.pathname.includes("?"),Ay("?","pathname","search",s)),en(!s.pathname||!s.pathname.includes("#"),Ay("#","pathname","hash",s)),en(!s.search||!s.search.includes("#"),Ay("#","search","hash",s)));let i=t===""||s.pathname==="",a=i?"/":s.pathname,o;if(a==null)o=r;else{let f=e.length-1;if(!n&&a.startsWith("..")){let p=a.split("/");for(;p[0]==="..";)p.shift(),f-=1;s.pathname=p.join("/")}o=f>=0?e[f]:"/"}let l=hj(s,o),c=a&&a!=="/"&&a.endsWith("/"),u=(i||a===".")&&r.endsWith("/");return!l.pathname.endsWith("/")&&(c||u)&&(l.pathname+="/"),l}var So=t=>t.join("/").replace(/\/\/+/g,"/"),mj=t=>t.replace(/\/+$/,"").replace(/^\/*/,"/"),gj=t=>!t||t==="?"?"":t.startsWith("?")?t:"?"+t,vj=t=>!t||t==="#"?"":t.startsWith("#")?t:"#"+t;function wj(t){return t!=null&&typeof t.status=="number"&&typeof t.statusText=="string"&&typeof t.internal=="boolean"&&"data"in t}var YS=["POST","PUT","PATCH","DELETE"];new Set(YS);var yj=["GET",...YS];new Set(yj);var Hd=P.createContext(null);Hd.displayName="DataRouter";var Bv=P.createContext(null);Bv.displayName="DataRouterState";P.createContext(!1);var ZS=P.createContext({isTransitioning:!1});ZS.displayName="ViewTransition";var xj=P.createContext(new Map);xj.displayName="Fetchers";var bj=P.createContext(null);bj.displayName="Await";var ua=P.createContext(null);ua.displayName="Navigation";var Np=P.createContext(null);Np.displayName="Location";var da=P.createContext({outlet:null,matches:[],isDataRoute:!1});da.displayName="Route";var ob=P.createContext(null);ob.displayName="RouteError";function Bj(t,{relative:e}={}){en(Vd(),"useHref() may be used only in the context of a <Router> component.");let{basename:r,navigator:n}=P.useContext(ua),{hash:s,pathname:i,search:a}=Ip(t,{relative:e}),o=i;return r!=="/"&&(o=i==="/"?r:So([r,i])),n.createHref({pathname:o,search:a,hash:s})}function Vd(){return P.useContext(Np)!=null}function _l(){return en(Vd(),"useLocation() may be used only in the context of a <Router> component."),P.useContext(Np).location}var eF="You should call navigate() in a React.useEffect(), not when your component is first rendered.";function tF(t){P.useContext(ua).static||P.useLayoutEffect(t)}function Cv(){let{isDataRoute:t}=P.useContext(da);return t?Dj():Cj()}function Cj(){en(Vd(),"useNavigate() may be used only in the context of a <Router> component.");let t=P.useContext(Hd),{basename:e,navigator:r}=P.useContext(ua),{matches:n}=P.useContext(da),{pathname:s}=_l(),i=JSON.stringify(ib(n)),a=P.useRef(!1);return tF(()=>{a.current=!0}),P.useCallback((l,c={})=>{if(Aa(a.current,eF),!a.current)return;if(typeof l=="number"){r.go(l);return}let u=ab(l,JSON.parse(i),s,c.relative==="path");t==null&&e!=="/"&&(u.pathname=u.pathname==="/"?e:So([e,u.pathname])),(c.replace?r.replace:r.push)(u,c.state,c)},[e,r,i,s,t])}var Ej=P.createContext(null);function _j(t){let e=P.useContext(da).outlet;return e&&P.createElement(Ej.Provider,{value:t},e)}function Ip(t,{relative:e}={}){let{matches:r}=P.useContext(da),{pathname:n}=_l(),s=JSON.stringify(ib(r));return P.useMemo(()=>ab(t,JSON.parse(s),n,e==="path"),[t,s,n,e])}function Nj(t,e){return rF(t,e)}function rF(t,e,r,n){var w;en(Vd(),"useRoutes() may be used only in the context of a <Router> component.");let{navigator:s}=P.useContext(ua),{matches:i}=P.useContext(da),a=i[i.length-1],o=a?a.params:{},l=a?a.pathname:"/",c=a?a.pathnameBase:"/",u=a&&a.route;{let y=u&&u.path||"";nF(l,!u||y.endsWith("*")||y.endsWith("*?"),`You rendered descendant <Routes> (or called \`useRoutes()\`) at "${l}" (under <Route path="${y}">) but the parent route path has no trailing "*". This means if you navigate deeper, the parent won't match anymore and therefore the child routes will never render.

Please change the parent <Route path="${y}"> to <Route path="${y==="/"?"*":`${y}/*`}">.`)}let f=_l(),p;if(e){let y=typeof e=="string"?Od(e):e;en(c==="/"||((w=y.pathname)==null?void 0:w.startsWith(c)),`When overriding the location using \`<Routes location>\` or \`useRoutes(routes, location)\`, the location pathname must begin with the portion of the URL pathname that was matched by all parent routes. The current pathname base is "${c}" but pathname "${y.pathname}" was given in the \`location\` prop.`),p=y}else p=f;let m=p.pathname||"/",b=m;if(c!=="/"){let y=c.replace(/^\//,"").split("/");b="/"+m.replace(/^\//,"").split("/").slice(y.length).join("/")}let B=WS(t,{pathname:b});Aa(u||B!=null,`No routes matched location "${p.pathname}${p.search}${p.hash}" `),Aa(B==null||B[B.length-1].route.element!==void 0||B[B.length-1].route.Component!==void 0||B[B.length-1].route.lazy!==void 0,`Matched leaf route at location "${p.pathname}${p.search}${p.hash}" does not have an element or Component. This means it will render an <Outlet /> with a null value by default resulting in an "empty" page.`);let _=Uj(B&&B.map(y=>Object.assign({},y,{params:Object.assign({},o,y.params),pathname:So([c,s.encodeLocation?s.encodeLocation(y.pathname).pathname:y.pathname]),pathnameBase:y.pathnameBase==="/"?c:So([c,s.encodeLocation?s.encodeLocation(y.pathnameBase).pathname:y.pathnameBase])})),i,r,n);return e&&_?P.createElement(Np.Provider,{value:{location:{pathname:"/",search:"",hash:"",state:null,key:"default",...p},navigationType:"POP"}},_):_}function Ij(){let t=kj(),e=wj(t)?`${t.status} ${t.statusText}`:t instanceof Error?t.message:JSON.stringify(t),r=t instanceof Error?t.stack:null,n="rgba(200,200,200, 0.5)",s={padding:"0.5rem",backgroundColor:n},i={padding:"2px 4px",backgroundColor:n},a=null;return console.error("Error handled by React Router default ErrorBoundary:",t),a=P.createElement(P.Fragment,null,P.createElement("p",null," Hey developer "),P.createElement("p",null,"You can provide a way better UX than this when your app throws errors by providing your own ",P.createElement("code",{style:i},"ErrorBoundary")," or"," ",P.createElement("code",{style:i},"errorElement")," prop on your route.")),P.createElement(P.Fragment,null,P.createElement("h2",null,"Unexpected Application Error!"),P.createElement("h3",{style:{fontStyle:"italic"}},e),r?P.createElement("pre",{style:s},r):null,a)}var Sj=P.createElement(Ij,null),Fj=class extends P.Component{constructor(t){super(t),this.state={location:t.location,revalidation:t.revalidation,error:t.error}}static getDerivedStateFromError(t){return{error:t}}static getDerivedStateFromProps(t,e){return e.location!==t.location||e.revalidation!=="idle"&&t.revalidation==="idle"?{error:t.error,location:t.location,revalidation:t.revalidation}:{error:t.error!==void 0?t.error:e.error,location:e.location,revalidation:t.revalidation||e.revalidation}}componentDidCatch(t,e){console.error("React Router caught the following error during render",t,e)}render(){return this.state.error!==void 0?P.createElement(da.Provider,{value:this.props.routeContext},P.createElement(ob.Provider,{value:this.state.error,children:this.props.component})):this.props.children}};function Tj({routeContext:t,match:e,children:r}){let n=P.useContext(Hd);return n&&n.static&&n.staticContext&&(e.route.errorElement||e.route.ErrorBoundary)&&(n.staticContext._deepestRenderedBoundaryId=e.route.id),P.createElement(da.Provider,{value:t},r)}function Uj(t,e=[],r=null,n=null){if(t==null){if(!r)return null;if(r.errors)t=r.matches;else if(e.length===0&&!r.initialized&&r.matches.length>0)t=r.matches;else return null}let s=t,i=r==null?void 0:r.errors;if(i!=null){let l=s.findIndex(c=>c.route.id&&(i==null?void 0:i[c.route.id])!==void 0);en(l>=0,`Could not find a matching route for errors on route IDs: ${Object.keys(i).join(",")}`),s=s.slice(0,Math.min(s.length,l+1))}let a=!1,o=-1;if(r)for(let l=0;l<s.length;l++){let c=s[l];if((c.route.HydrateFallback||c.route.hydrateFallbackElement)&&(o=l),c.route.id){let{loaderData:u,errors:f}=r,p=c.route.loader&&!u.hasOwnProperty(c.route.id)&&(!f||f[c.route.id]===void 0);if(c.route.lazy||p){a=!0,o>=0?s=s.slice(0,o+1):s=[s[0]];break}}}return s.reduceRight((l,c,u)=>{let f,p=!1,m=null,b=null;r&&(f=i&&c.route.id?i[c.route.id]:void 0,m=c.route.errorElement||Sj,a&&(o<0&&u===0?(nF("route-fallback",!1,"No `HydrateFallback` element provided to render during initial hydration"),p=!0,b=null):o===u&&(p=!0,b=c.route.hydrateFallbackElement||null)));let B=e.concat(s.slice(0,u+1)),_=()=>{let w;return f?w=m:p?w=b:c.route.Component?w=P.createElement(c.route.Component,null):c.route.element?w=c.route.element:w=l,P.createElement(Tj,{match:c,routeContext:{outlet:l,matches:B,isDataRoute:r!=null},children:w})};return r&&(c.route.ErrorBoundary||c.route.errorElement||u===0)?P.createElement(Fj,{location:r.location,revalidation:r.revalidation,component:m,error:f,children:_(),routeContext:{outlet:null,matches:B,isDataRoute:!0}}):_()},null)}function Ab(t){return`${t} must be used within a data router.  See https://reactrouter.com/en/main/routers/picking-a-router.`}function Pj(t){let e=P.useContext(Hd);return en(e,Ab(t)),e}function Qj(t){let e=P.useContext(Bv);return en(e,Ab(t)),e}function Lj(t){let e=P.useContext(da);return en(e,Ab(t)),e}function lb(t){let e=Lj(t),r=e.matches[e.matches.length-1];return en(r.route.id,`${t} can only be used on routes that contain a unique "id"`),r.route.id}function jj(){return lb("useRouteId")}function kj(){var n;let t=P.useContext(ob),e=Qj("useRouteError"),r=lb("useRouteError");return t!==void 0?t:(n=e.errors)==null?void 0:n[r]}function Dj(){let{router:t}=Pj("useNavigate"),e=lb("useNavigate"),r=P.useRef(!1);return tF(()=>{r.current=!0}),P.useCallback(async(s,i={})=>{Aa(r.current,eF),r.current&&(typeof s=="number"?t.navigate(s):await t.navigate(s,{fromRouteId:e,...i}))},[t,e])}var u5={};function nF(t,e,r){!e&&!u5[t]&&(u5[t]=!0,Aa(!1,r))}P.memo(Rj);function Rj({routes:t,future:e,state:r}){return rF(t,void 0,r,e)}function Du({to:t,replace:e,state:r,relative:n}){en(Vd(),"<Navigate> may be used only in the context of a <Router> component.");let{static:s}=P.useContext(ua);Aa(!s,"<Navigate> must not be used on the initial render in a <StaticRouter>. This is a no-op, but you should modify your code so the <Navigate> is only ever rendered in response to some user interaction or state change.");let{matches:i}=P.useContext(da),{pathname:a}=_l(),o=Cv(),l=ab(t,ib(i),a,n==="path"),c=JSON.stringify(l);return P.useEffect(()=>{o(JSON.parse(c),{replace:e,state:r,relative:n})},[o,c,n,e,r]),null}function Mj(t){return _j(t.context)}function Kr(t){en(!1,"A <Route> is only ever to be used as the child of <Routes> element, never rendered directly. Please wrap your <Route> in a <Routes>.")}function Oj({basename:t="/",children:e=null,location:r,navigationType:n="POP",navigator:s,static:i=!1}){en(!Vd(),"You cannot render a <Router> inside another <Router>. You should never have more than one in your app.");let a=t.replace(/^\/*/,"/"),o=P.useMemo(()=>({basename:a,navigator:s,static:i,future:{}}),[a,s,i]);typeof r=="string"&&(r=Od(r));let{pathname:l="/",search:c="",hash:u="",state:f=null,key:p="default"}=r,m=P.useMemo(()=>{let b=Ro(l,a);return b==null?null:{location:{pathname:b,search:c,hash:u,state:f,key:p},navigationType:n}},[a,l,c,u,f,p,n]);return Aa(m!=null,`<Router basename="${a}"> is not able to match the URL "${l}${c}${u}" because it does not start with the basename, so the <Router> won't render anything.`),m==null?null:P.createElement(ua.Provider,{value:o},P.createElement(Np.Provider,{children:e,value:m}))}function Hj({children:t,location:e}){return Nj(J1(t),e)}function J1(t,e=[]){let r=[];return P.Children.forEach(t,(n,s)=>{if(!P.isValidElement(n))return;let i=[...e,s];if(n.type===P.Fragment){r.push.apply(r,J1(n.props.children,i));return}en(n.type===Kr,`[${typeof n.type=="string"?n.type:n.type.name}] is not a <Route> component. All component children of <Routes> must be a <Route> or <React.Fragment>`),en(!n.props.index||!n.props.children,"An index route cannot have child routes.");let a={id:n.props.id||i.join("-"),caseSensitive:n.props.caseSensitive,element:n.props.element,Component:n.props.Component,index:n.props.index,path:n.props.path,loader:n.props.loader,action:n.props.action,hydrateFallbackElement:n.props.hydrateFallbackElement,HydrateFallback:n.props.HydrateFallback,errorElement:n.props.errorElement,ErrorBoundary:n.props.ErrorBoundary,hasErrorBoundary:n.props.hasErrorBoundary===!0||n.props.ErrorBoundary!=null||n.props.errorElement!=null,shouldRevalidate:n.props.shouldRevalidate,handle:n.props.handle,lazy:n.props.lazy};n.props.children&&(a.children=J1(n.props.children,i)),r.push(a)}),r}var kg="get",Dg="application/x-www-form-urlencoded";function Ev(t){return t!=null&&typeof t.tagName=="string"}function Vj(t){return Ev(t)&&t.tagName.toLowerCase()==="button"}function Kj(t){return Ev(t)&&t.tagName.toLowerCase()==="form"}function qj(t){return Ev(t)&&t.tagName.toLowerCase()==="input"}function Gj(t){return!!(t.metaKey||t.altKey||t.ctrlKey||t.shiftKey)}function zj(t,e){return t.button===0&&(!e||e==="_self")&&!Gj(t)}var Lm=null;function $j(){if(Lm===null)try{new FormData(document.createElement("form"),0),Lm=!1}catch{Lm=!0}return Lm}var Wj=new Set(["application/x-www-form-urlencoded","multipart/form-data","text/plain"]);function ly(t){return t!=null&&!Wj.has(t)?(Aa(!1,`"${t}" is not a valid \`encType\` for \`<Form>\`/\`<fetcher.Form>\` and will default to "${Dg}"`),null):t}function Xj(t,e){let r,n,s,i,a;if(Kj(t)){let o=t.getAttribute("action");n=o?Ro(o,e):null,r=t.getAttribute("method")||kg,s=ly(t.getAttribute("enctype"))||Dg,i=new FormData(t)}else if(Vj(t)||qj(t)&&(t.type==="submit"||t.type==="image")){let o=t.form;if(o==null)throw new Error('Cannot submit a <button> or <input type="submit"> without a <form>');let l=t.getAttribute("formaction")||o.getAttribute("action");if(n=l?Ro(l,e):null,r=t.getAttribute("formmethod")||o.getAttribute("method")||kg,s=ly(t.getAttribute("formenctype"))||ly(o.getAttribute("enctype"))||Dg,i=new FormData(o,t),!$j()){let{name:c,type:u,value:f}=t;if(u==="image"){let p=c?`${c}.`:"";i.append(`${p}x`,"0"),i.append(`${p}y`,"0")}else c&&i.append(c,f)}}else{if(Ev(t))throw new Error('Cannot submit element that is not <form>, <button>, or <input type="submit|image">');r=kg,n=null,s=Dg,a=t}return i&&s==="text/plain"&&(a=i,i=void 0),{action:n,method:r.toLowerCase(),encType:s,formData:i,body:a}}Object.getOwnPropertyNames(Object.prototype).sort().join("\0");function cb(t,e){if(t===!1||t===null||typeof t>"u")throw new Error(e)}function Jj(t,e,r){let n=typeof t=="string"?new URL(t,typeof window>"u"?"server://singlefetch/":window.location.origin):t;return n.pathname==="/"?n.pathname=`_root.${r}`:e&&Ro(n.pathname,e)==="/"?n.pathname=`${e.replace(/\/$/,"")}/_root.${r}`:n.pathname=`${n.pathname.replace(/\/$/,"")}.${r}`,n}async function Yj(t,e){if(t.id in e)return e[t.id];try{let r=await import(t.module);return e[t.id]=r,r}catch(r){return console.error(`Error loading route module \`${t.module}\`, reloading page...`),console.error(r),window.__reactRouterContext&&window.__reactRouterContext.isSpaMode,window.location.reload(),new Promise(()=>{})}}function Zj(t){return t==null?!1:t.href==null?t.rel==="preload"&&typeof t.imageSrcSet=="string"&&typeof t.imageSizes=="string":typeof t.rel=="string"&&typeof t.href=="string"}async function ek(t,e,r){let n=await Promise.all(t.map(async s=>{let i=e.routes[s.route.id];if(i){let a=await Yj(i,r);return a.links?a.links():[]}return[]}));return sk(n.flat(1).filter(Zj).filter(s=>s.rel==="stylesheet"||s.rel==="preload").map(s=>s.rel==="stylesheet"?{...s,rel:"prefetch",as:"style"}:{...s,rel:"prefetch"}))}function d5(t,e,r,n,s,i){let a=(l,c)=>r[c]?l.route.id!==r[c].route.id:!0,o=(l,c)=>{var u;return r[c].pathname!==l.pathname||((u=r[c].route.path)==null?void 0:u.endsWith("*"))&&r[c].params["*"]!==l.params["*"]};return i==="assets"?e.filter((l,c)=>a(l,c)||o(l,c)):i==="data"?e.filter((l,c)=>{var f;let u=n.routes[l.route.id];if(!u||!u.hasLoader)return!1;if(a(l,c)||o(l,c))return!0;if(l.route.shouldRevalidate){let p=l.route.shouldRevalidate({currentUrl:new URL(s.pathname+s.search+s.hash,window.origin),currentParams:((f=r[0])==null?void 0:f.params)||{},nextUrl:new URL(t,window.origin),nextParams:l.params,defaultShouldRevalidate:!0});if(typeof p=="boolean")return p}return!0}):[]}function tk(t,e,{includeHydrateFallback:r}={}){return rk(t.map(n=>{let s=e.routes[n.route.id];if(!s)return[];let i=[s.module];return s.clientActionModule&&(i=i.concat(s.clientActionModule)),s.clientLoaderModule&&(i=i.concat(s.clientLoaderModule)),r&&s.hydrateFallbackModule&&(i=i.concat(s.hydrateFallbackModule)),s.imports&&(i=i.concat(s.imports)),i}).flat(1))}function rk(t){return[...new Set(t)]}function nk(t){let e={},r=Object.keys(t).sort();for(let n of r)e[n]=t[n];return e}function sk(t,e){let r=new Set;return new Set(e),t.reduce((n,s)=>{let i=JSON.stringify(nk(s));return r.has(i)||(r.add(i),n.push({key:i,link:s})),n},[])}function sF(){let t=P.useContext(Hd);return cb(t,"You must render this element inside a <DataRouterContext.Provider> element"),t}function ik(){let t=P.useContext(Bv);return cb(t,"You must render this element inside a <DataRouterStateContext.Provider> element"),t}var ub=P.createContext(void 0);ub.displayName="FrameworkContext";function iF(){let t=P.useContext(ub);return cb(t,"You must render this element inside a <HydratedRouter> element"),t}function ak(t,e){let r=P.useContext(ub),[n,s]=P.useState(!1),[i,a]=P.useState(!1),{onFocus:o,onBlur:l,onMouseEnter:c,onMouseLeave:u,onTouchStart:f}=e,p=P.useRef(null);P.useEffect(()=>{if(t==="render"&&a(!0),t==="viewport"){let B=w=>{w.forEach(y=>{a(y.isIntersecting)})},_=new IntersectionObserver(B,{threshold:.5});return p.current&&_.observe(p.current),()=>{_.disconnect()}}},[t]),P.useEffect(()=>{if(n){let B=setTimeout(()=>{a(!0)},100);return()=>{clearTimeout(B)}}},[n]);let m=()=>{s(!0)},b=()=>{s(!1),a(!1)};return r?t!=="intent"?[i,p,{}]:[i,p,{onFocus:Sh(o,m),onBlur:Sh(l,b),onMouseEnter:Sh(c,m),onMouseLeave:Sh(u,b),onTouchStart:Sh(f,m)}]:[!1,p,{}]}function Sh(t,e){return r=>{t&&t(r),r.defaultPrevented||e(r)}}function ok({page:t,...e}){let{router:r}=sF(),n=P.useMemo(()=>WS(r.routes,t,r.basename),[r.routes,t,r.basename]);return n?P.createElement(lk,{page:t,matches:n,...e}):null}function Ak(t){let{manifest:e,routeModules:r}=iF(),[n,s]=P.useState([]);return P.useEffect(()=>{let i=!1;return ek(t,e,r).then(a=>{i||s(a)}),()=>{i=!0}},[t,e,r]),n}function lk({page:t,matches:e,...r}){let n=_l(),{manifest:s,routeModules:i}=iF(),{basename:a}=sF(),{loaderData:o,matches:l}=ik(),c=P.useMemo(()=>d5(t,e,l,s,n,"data"),[t,e,l,s,n]),u=P.useMemo(()=>d5(t,e,l,s,n,"assets"),[t,e,l,s,n]),f=P.useMemo(()=>{if(t===n.pathname+n.search+n.hash)return[];let b=new Set,B=!1;if(e.forEach(w=>{var S;let y=s.routes[w.route.id];!y||!y.hasLoader||(!c.some(O=>O.route.id===w.route.id)&&w.route.id in o&&((S=i[w.route.id])!=null&&S.shouldRevalidate)||y.hasClientLoader?B=!0:b.add(w.route.id))}),b.size===0)return[];let _=Jj(t,a,"data");return B&&b.size>0&&_.searchParams.set("_routes",e.filter(w=>b.has(w.route.id)).map(w=>w.route.id).join(",")),[_.pathname+_.search]},[a,o,n,s,c,e,t,i]),p=P.useMemo(()=>tk(u,s),[u,s]),m=Ak(u);return P.createElement(P.Fragment,null,f.map(b=>P.createElement("link",{key:b,rel:"prefetch",as:"fetch",href:b,...r})),p.map(b=>P.createElement("link",{key:b,rel:"modulepreload",href:b,...r})),m.map(({key:b,link:B})=>P.createElement("link",{key:b,nonce:r.nonce,...B})))}function ck(...t){return e=>{t.forEach(r=>{typeof r=="function"?r(e):r!=null&&(r.current=e)})}}var aF=typeof window<"u"&&typeof window.document<"u"&&typeof window.document.createElement<"u";try{aF&&(window.__reactRouterVersion="7.8.1")}catch{}function uk({basename:t,children:e,window:r}){let n=P.useRef();n.current==null&&(n.current=XL({window:r,v5Compat:!0}));let s=n.current,[i,a]=P.useState({action:s.action,location:s.location}),o=P.useCallback(l=>{P.startTransition(()=>a(l))},[a]);return P.useLayoutEffect(()=>s.listen(o),[s,o]),P.createElement(Oj,{basename:t,children:e,location:i.location,navigationType:i.action,navigator:s})}var oF=/^(?:[a-z][a-z0-9+.-]*:|\/\/)/i,AF=P.forwardRef(function({onClick:e,discover:r="render",prefetch:n="none",relative:s,reloadDocument:i,replace:a,state:o,target:l,to:c,preventScrollReset:u,viewTransition:f,...p},m){let{basename:b}=P.useContext(ua),B=typeof c=="string"&&oF.test(c),_,w=!1;if(typeof c=="string"&&B&&(_=c,aF))try{let L=new URL(window.location.href),D=c.startsWith("//")?new URL(L.protocol+c):new URL(c),N=Ro(D.pathname,b);D.origin===L.origin&&N!=null?c=N+D.search+D.hash:w=!0}catch{Aa(!1,`<Link to="${c}"> contains an invalid URL which will probably break when clicked - please update to a valid URL path.`)}let y=Bj(c,{relative:s}),[S,O,R]=ak(n,p),M=fk(c,{replace:a,state:o,target:l,preventScrollReset:u,relative:s,viewTransition:f});function I(L){e&&e(L),L.defaultPrevented||M(L)}let E=P.createElement("a",{...p,...R,href:_||y,onClick:w||i?e:I,ref:ck(m,O),target:l,"data-discover":!B&&r==="render"?"true":void 0});return S&&!B?P.createElement(P.Fragment,null,E,P.createElement(ok,{page:y})):E});AF.displayName="Link";var nn=P.forwardRef(function({"aria-current":e="page",caseSensitive:r=!1,className:n="",end:s=!1,style:i,to:a,viewTransition:o,children:l,...c},u){let f=Ip(a,{relative:c.relative}),p=_l(),m=P.useContext(Bv),{navigator:b,basename:B}=P.useContext(ua),_=m!=null&&wk(f)&&o===!0,w=b.encodeLocation?b.encodeLocation(f).pathname:f.pathname,y=p.pathname,S=m&&m.navigation&&m.navigation.location?m.navigation.location.pathname:null;r||(y=y.toLowerCase(),S=S?S.toLowerCase():null,w=w.toLowerCase()),S&&B&&(S=Ro(S,B)||S);const O=w!=="/"&&w.endsWith("/")?w.length-1:w.length;let R=y===w||!s&&y.startsWith(w)&&y.charAt(O)==="/",M=S!=null&&(S===w||!s&&S.startsWith(w)&&S.charAt(w.length)==="/"),I={isActive:R,isPending:M,isTransitioning:_},E=R?e:void 0,L;typeof n=="function"?L=n(I):L=[n,R?"active":null,M?"pending":null,_?"transitioning":null].filter(Boolean).join(" ");let D=typeof i=="function"?i(I):i;return P.createElement(AF,{...c,"aria-current":E,className:L,ref:u,style:D,to:a,viewTransition:o},typeof l=="function"?l(I):l)});nn.displayName="NavLink";var dk=P.forwardRef(({discover:t="render",fetcherKey:e,navigate:r,reloadDocument:n,replace:s,state:i,method:a=kg,action:o,onSubmit:l,relative:c,preventScrollReset:u,viewTransition:f,...p},m)=>{let b=gk(),B=vk(o,{relative:c}),_=a.toLowerCase()==="get"?"get":"post",w=typeof o=="string"&&oF.test(o),y=S=>{if(l&&l(S),S.defaultPrevented)return;S.preventDefault();let O=S.nativeEvent.submitter,R=(O==null?void 0:O.getAttribute("formmethod"))||a;b(O||S.currentTarget,{fetcherKey:e,method:R,navigate:r,replace:s,state:i,relative:c,preventScrollReset:u,viewTransition:f})};return P.createElement("form",{ref:m,method:_,action:B,onSubmit:n?l:y,...p,"data-discover":!w&&t==="render"?"true":void 0})});dk.displayName="Form";function hk(t){return`${t} must be used within a data router.  See https://reactrouter.com/en/main/routers/picking-a-router.`}function lF(t){let e=P.useContext(Hd);return en(e,hk(t)),e}function fk(t,{target:e,replace:r,state:n,preventScrollReset:s,relative:i,viewTransition:a}={}){let o=Cv(),l=_l(),c=Ip(t,{relative:i});return P.useCallback(u=>{if(zj(u,e)){u.preventDefault();let f=r!==void 0?r:Zf(l)===Zf(c);o(t,{replace:f,state:n,preventScrollReset:s,relative:i,viewTransition:a})}},[l,o,c,r,n,e,t,s,i,a])}var pk=0,mk=()=>`__${String(++pk)}__`;function gk(){let{router:t}=lF("useSubmit"),{basename:e}=P.useContext(ua),r=jj();return P.useCallback(async(n,s={})=>{let{action:i,method:a,encType:o,formData:l,body:c}=Xj(n,e);if(s.navigate===!1){let u=s.fetcherKey||mk();await t.fetch(u,r,s.action||i,{preventScrollReset:s.preventScrollReset,formData:l,body:c,formMethod:s.method||a,formEncType:s.encType||o,flushSync:s.flushSync})}else await t.navigate(s.action||i,{preventScrollReset:s.preventScrollReset,formData:l,body:c,formMethod:s.method||a,formEncType:s.encType||o,replace:s.replace,state:s.state,fromRouteId:r,flushSync:s.flushSync,viewTransition:s.viewTransition})},[t,e,r])}function vk(t,{relative:e}={}){let{basename:r}=P.useContext(ua),n=P.useContext(da);en(n,"useFormAction must be used inside a RouteContext");let[s]=n.matches.slice(-1),i={...Ip(t||".",{relative:e})},a=_l();if(t==null){i.search=a.search;let o=new URLSearchParams(i.search),l=o.getAll("index");if(l.some(u=>u==="")){o.delete("index"),l.filter(f=>f).forEach(f=>o.append("index",f));let u=o.toString();i.search=u?`?${u}`:""}}return(!t||t===".")&&s.route.index&&(i.search=i.search?i.search.replace(/^\?/,"?index&"):"?index"),r!=="/"&&(i.pathname=i.pathname==="/"?r:So([r,i.pathname])),Zf(i)}function wk(t,{relative:e}={}){let r=P.useContext(ZS);en(r!=null,"`useViewTransitionState` must be used within `react-router-dom`'s `RouterProvider`.  Did you accidentally import `RouterProvider` from `react-router`?");let{basename:n}=lF("useViewTransitionState"),s=Ip(t,{relative:e});if(!r.isTransitioning)return!1;let i=Ro(r.currentLocation.pathname,n)||r.currentLocation.pathname,a=Ro(r.nextLocation.pathname,n)||r.nextLocation.pathname;return _0(s.pathname,a)!=null||_0(s.pathname,i)!=null}var h5={};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const cF=function(t){const e=[];let r=0;for(let n=0;n<t.length;n++){let s=t.charCodeAt(n);s<128?e[r++]=s:s<2048?(e[r++]=s>>6|192,e[r++]=s&63|128):(s&64512)===55296&&n+1<t.length&&(t.charCodeAt(n+1)&64512)===56320?(s=65536+((s&1023)<<10)+(t.charCodeAt(++n)&1023),e[r++]=s>>18|240,e[r++]=s>>12&63|128,e[r++]=s>>6&63|128,e[r++]=s&63|128):(e[r++]=s>>12|224,e[r++]=s>>6&63|128,e[r++]=s&63|128)}return e},yk=function(t){const e=[];let r=0,n=0;for(;r<t.length;){const s=t[r++];if(s<128)e[n++]=String.fromCharCode(s);else if(s>191&&s<224){const i=t[r++];e[n++]=String.fromCharCode((s&31)<<6|i&63)}else if(s>239&&s<365){const i=t[r++],a=t[r++],o=t[r++],l=((s&7)<<18|(i&63)<<12|(a&63)<<6|o&63)-65536;e[n++]=String.fromCharCode(55296+(l>>10)),e[n++]=String.fromCharCode(56320+(l&1023))}else{const i=t[r++],a=t[r++];e[n++]=String.fromCharCode((s&15)<<12|(i&63)<<6|a&63)}}return e.join("")},uF={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:typeof atob=="function",encodeByteArray(t,e){if(!Array.isArray(t))throw Error("encodeByteArray takes an array as a parameter");this.init_();const r=e?this.byteToCharMapWebSafe_:this.byteToCharMap_,n=[];for(let s=0;s<t.length;s+=3){const i=t[s],a=s+1<t.length,o=a?t[s+1]:0,l=s+2<t.length,c=l?t[s+2]:0,u=i>>2,f=(i&3)<<4|o>>4;let p=(o&15)<<2|c>>6,m=c&63;l||(m=64,a||(p=64)),n.push(r[u],r[f],r[p],r[m])}return n.join("")},encodeString(t,e){return this.HAS_NATIVE_SUPPORT&&!e?btoa(t):this.encodeByteArray(cF(t),e)},decodeString(t,e){return this.HAS_NATIVE_SUPPORT&&!e?atob(t):yk(this.decodeStringToByteArray(t,e))},decodeStringToByteArray(t,e){this.init_();const r=e?this.charToByteMapWebSafe_:this.charToByteMap_,n=[];for(let s=0;s<t.length;){const i=r[t.charAt(s++)],o=s<t.length?r[t.charAt(s)]:0;++s;const c=s<t.length?r[t.charAt(s)]:64;++s;const f=s<t.length?r[t.charAt(s)]:64;if(++s,i==null||o==null||c==null||f==null)throw new xk;const p=i<<2|o>>4;if(n.push(p),c!==64){const m=o<<4&240|c>>2;if(n.push(m),f!==64){const b=c<<6&192|f;n.push(b)}}}return n},init_(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(let t=0;t<this.ENCODED_VALS.length;t++)this.byteToCharMap_[t]=this.ENCODED_VALS.charAt(t),this.charToByteMap_[this.byteToCharMap_[t]]=t,this.byteToCharMapWebSafe_[t]=this.ENCODED_VALS_WEBSAFE.charAt(t),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[t]]=t,t>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(t)]=t,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(t)]=t)}}};class xk extends Error{constructor(){super(...arguments),this.name="DecodeBase64StringError"}}const bk=function(t){const e=cF(t);return uF.encodeByteArray(e,!0)},N0=function(t){return bk(t).replace(/\./g,"")},dF=function(t){try{return uF.decodeString(t,!0)}catch(e){console.error("base64Decode failed: ",e)}return null};/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Bk(){if(typeof self<"u")return self;if(typeof window<"u")return window;if(typeof global<"u")return global;throw new Error("Unable to locate global object.")}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Ck=()=>Bk().__FIREBASE_DEFAULTS__,Ek=()=>{if(typeof process>"u"||typeof h5>"u")return;const t=h5.__FIREBASE_DEFAULTS__;if(t)return JSON.parse(t)},_k=()=>{if(typeof document>"u")return;let t;try{t=document.cookie.match(/__FIREBASE_DEFAULTS__=([^;]+)/)}catch{return}const e=t&&dF(t[1]);return e&&JSON.parse(e)},_v=()=>{try{return Ck()||Ek()||_k()}catch(t){console.info(`Unable to get __FIREBASE_DEFAULTS__ due to: ${t}`);return}},hF=t=>{var e,r;return(r=(e=_v())===null||e===void 0?void 0:e.emulatorHosts)===null||r===void 0?void 0:r[t]},Nk=t=>{const e=hF(t);if(!e)return;const r=e.lastIndexOf(":");if(r<=0||r+1===e.length)throw new Error(`Invalid host ${e} with no separate hostname and port!`);const n=parseInt(e.substring(r+1),10);return e[0]==="["?[e.substring(1,r-1),n]:[e.substring(0,r),n]},fF=()=>{var t;return(t=_v())===null||t===void 0?void 0:t.config},pF=t=>{var e;return(e=_v())===null||e===void 0?void 0:e[`_${t}`]};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ik{constructor(){this.reject=()=>{},this.resolve=()=>{},this.promise=new Promise((e,r)=>{this.resolve=e,this.reject=r})}wrapCallback(e){return(r,n)=>{r?this.reject(r):this.resolve(n),typeof e=="function"&&(this.promise.catch(()=>{}),e.length===1?e(r):e(r,n))}}}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Sk(t,e){if(t.uid)throw new Error('The "uid" field is no longer supported by mockUserToken. Please use "sub" instead for Firebase Auth User ID.');const r={alg:"none",type:"JWT"},n=e||"demo-project",s=t.iat||0,i=t.sub||t.user_id;if(!i)throw new Error("mockUserToken must contain 'sub' or 'user_id' field!");const a=Object.assign({iss:`https://securetoken.google.com/${n}`,aud:n,iat:s,exp:s+3600,auth_time:s,sub:i,user_id:i,firebase:{sign_in_provider:"custom",identities:{}}},t);return[N0(JSON.stringify(r)),N0(JSON.stringify(a)),""].join(".")}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function jn(){return typeof navigator<"u"&&typeof navigator.userAgent=="string"?navigator.userAgent:""}function Fk(){return typeof window<"u"&&!!(window.cordova||window.phonegap||window.PhoneGap)&&/ios|iphone|ipod|ipad|android|blackberry|iemobile/i.test(jn())}function Tk(){var t;const e=(t=_v())===null||t===void 0?void 0:t.forceEnvironment;if(e==="node")return!0;if(e==="browser")return!1;try{return Object.prototype.toString.call(global.process)==="[object process]"}catch{return!1}}function Uk(){return typeof navigator<"u"&&navigator.userAgent==="Cloudflare-Workers"}function Pk(){const t=typeof chrome=="object"?chrome.runtime:typeof browser=="object"?browser.runtime:void 0;return typeof t=="object"&&t.id!==void 0}function Qk(){return typeof navigator=="object"&&navigator.product==="ReactNative"}function Lk(){const t=jn();return t.indexOf("MSIE ")>=0||t.indexOf("Trident/")>=0}function mF(){return!Tk()&&!!navigator.userAgent&&navigator.userAgent.includes("Safari")&&!navigator.userAgent.includes("Chrome")}function gF(){try{return typeof indexedDB=="object"}catch{return!1}}function jk(){return new Promise((t,e)=>{try{let r=!0;const n="validate-browser-context-for-indexeddb-analytics-module",s=self.indexedDB.open(n);s.onsuccess=()=>{s.result.close(),r||self.indexedDB.deleteDatabase(n),t(!0)},s.onupgradeneeded=()=>{r=!1},s.onerror=()=>{var i;e(((i=s.error)===null||i===void 0?void 0:i.message)||"")}}catch(r){e(r)}})}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const kk="FirebaseError";class qo extends Error{constructor(e,r,n){super(r),this.code=e,this.customData=n,this.name=kk,Object.setPrototypeOf(this,qo.prototype),Error.captureStackTrace&&Error.captureStackTrace(this,Sp.prototype.create)}}class Sp{constructor(e,r,n){this.service=e,this.serviceName=r,this.errors=n}create(e,...r){const n=r[0]||{},s=`${this.service}/${e}`,i=this.errors[e],a=i?Dk(i,n):"Error",o=`${this.serviceName}: ${a} (${s}).`;return new qo(s,o,n)}}function Dk(t,e){return t.replace(Rk,(r,n)=>{const s=e[n];return s!=null?String(s):`<${n}?>`})}const Rk=/\{\$([^}]+)}/g;function Mk(t){for(const e in t)if(Object.prototype.hasOwnProperty.call(t,e))return!1;return!0}function I0(t,e){if(t===e)return!0;const r=Object.keys(t),n=Object.keys(e);for(const s of r){if(!n.includes(s))return!1;const i=t[s],a=e[s];if(f5(i)&&f5(a)){if(!I0(i,a))return!1}else if(i!==a)return!1}for(const s of n)if(!r.includes(s))return!1;return!0}function f5(t){return t!==null&&typeof t=="object"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Fp(t){const e=[];for(const[r,n]of Object.entries(t))Array.isArray(n)?n.forEach(s=>{e.push(encodeURIComponent(r)+"="+encodeURIComponent(s))}):e.push(encodeURIComponent(r)+"="+encodeURIComponent(n));return e.length?"&"+e.join("&"):""}function Xh(t){const e={};return t.replace(/^\?/,"").split("&").forEach(n=>{if(n){const[s,i]=n.split("=");e[decodeURIComponent(s)]=decodeURIComponent(i)}}),e}function Jh(t){const e=t.indexOf("?");if(!e)return"";const r=t.indexOf("#",e);return t.substring(e,r>0?r:void 0)}function Ok(t,e){const r=new Hk(t,e);return r.subscribe.bind(r)}class Hk{constructor(e,r){this.observers=[],this.unsubscribes=[],this.observerCount=0,this.task=Promise.resolve(),this.finalized=!1,this.onNoObservers=r,this.task.then(()=>{e(this)}).catch(n=>{this.error(n)})}next(e){this.forEachObserver(r=>{r.next(e)})}error(e){this.forEachObserver(r=>{r.error(e)}),this.close(e)}complete(){this.forEachObserver(e=>{e.complete()}),this.close()}subscribe(e,r,n){let s;if(e===void 0&&r===void 0&&n===void 0)throw new Error("Missing Observer.");Vk(e,["next","error","complete"])?s=e:s={next:e,error:r,complete:n},s.next===void 0&&(s.next=cy),s.error===void 0&&(s.error=cy),s.complete===void 0&&(s.complete=cy);const i=this.unsubscribeOne.bind(this,this.observers.length);return this.finalized&&this.task.then(()=>{try{this.finalError?s.error(this.finalError):s.complete()}catch{}}),this.observers.push(s),i}unsubscribeOne(e){this.observers===void 0||this.observers[e]===void 0||(delete this.observers[e],this.observerCount-=1,this.observerCount===0&&this.onNoObservers!==void 0&&this.onNoObservers(this))}forEachObserver(e){if(!this.finalized)for(let r=0;r<this.observers.length;r++)this.sendOne(r,e)}sendOne(e,r){this.task.then(()=>{if(this.observers!==void 0&&this.observers[e]!==void 0)try{r(this.observers[e])}catch(n){typeof console<"u"&&console.error&&console.error(n)}})}close(e){this.finalized||(this.finalized=!0,e!==void 0&&(this.finalError=e),this.task.then(()=>{this.observers=void 0,this.onNoObservers=void 0}))}}function Vk(t,e){if(typeof t!="object"||t===null)return!1;for(const r of e)if(r in t&&typeof t[r]=="function")return!0;return!1}function cy(){}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function dn(t){return t&&t._delegate?t._delegate:t}class Uc{constructor(e,r,n){this.name=e,this.instanceFactory=r,this.type=n,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY",this.onInstanceCreated=null}setInstantiationMode(e){return this.instantiationMode=e,this}setMultipleInstances(e){return this.multipleInstances=e,this}setServiceProps(e){return this.serviceProps=e,this}setInstanceCreatedCallback(e){return this.onInstanceCreated=e,this}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const nc="[DEFAULT]";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Kk{constructor(e,r){this.name=e,this.container=r,this.component=null,this.instances=new Map,this.instancesDeferred=new Map,this.instancesOptions=new Map,this.onInitCallbacks=new Map}get(e){const r=this.normalizeInstanceIdentifier(e);if(!this.instancesDeferred.has(r)){const n=new Ik;if(this.instancesDeferred.set(r,n),this.isInitialized(r)||this.shouldAutoInitialize())try{const s=this.getOrInitializeService({instanceIdentifier:r});s&&n.resolve(s)}catch{}}return this.instancesDeferred.get(r).promise}getImmediate(e){var r;const n=this.normalizeInstanceIdentifier(e==null?void 0:e.identifier),s=(r=e==null?void 0:e.optional)!==null&&r!==void 0?r:!1;if(this.isInitialized(n)||this.shouldAutoInitialize())try{return this.getOrInitializeService({instanceIdentifier:n})}catch(i){if(s)return null;throw i}else{if(s)return null;throw Error(`Service ${this.name} is not available`)}}getComponent(){return this.component}setComponent(e){if(e.name!==this.name)throw Error(`Mismatching Component ${e.name} for Provider ${this.name}.`);if(this.component)throw Error(`Component for ${this.name} has already been provided`);if(this.component=e,!!this.shouldAutoInitialize()){if(Gk(e))try{this.getOrInitializeService({instanceIdentifier:nc})}catch{}for(const[r,n]of this.instancesDeferred.entries()){const s=this.normalizeInstanceIdentifier(r);try{const i=this.getOrInitializeService({instanceIdentifier:s});n.resolve(i)}catch{}}}}clearInstance(e=nc){this.instancesDeferred.delete(e),this.instancesOptions.delete(e),this.instances.delete(e)}async delete(){const e=Array.from(this.instances.values());await Promise.all([...e.filter(r=>"INTERNAL"in r).map(r=>r.INTERNAL.delete()),...e.filter(r=>"_delete"in r).map(r=>r._delete())])}isComponentSet(){return this.component!=null}isInitialized(e=nc){return this.instances.has(e)}getOptions(e=nc){return this.instancesOptions.get(e)||{}}initialize(e={}){const{options:r={}}=e,n=this.normalizeInstanceIdentifier(e.instanceIdentifier);if(this.isInitialized(n))throw Error(`${this.name}(${n}) has already been initialized`);if(!this.isComponentSet())throw Error(`Component ${this.name} has not been registered yet`);const s=this.getOrInitializeService({instanceIdentifier:n,options:r});for(const[i,a]of this.instancesDeferred.entries()){const o=this.normalizeInstanceIdentifier(i);n===o&&a.resolve(s)}return s}onInit(e,r){var n;const s=this.normalizeInstanceIdentifier(r),i=(n=this.onInitCallbacks.get(s))!==null&&n!==void 0?n:new Set;i.add(e),this.onInitCallbacks.set(s,i);const a=this.instances.get(s);return a&&e(a,s),()=>{i.delete(e)}}invokeOnInitCallbacks(e,r){const n=this.onInitCallbacks.get(r);if(n)for(const s of n)try{s(e,r)}catch{}}getOrInitializeService({instanceIdentifier:e,options:r={}}){let n=this.instances.get(e);if(!n&&this.component&&(n=this.component.instanceFactory(this.container,{instanceIdentifier:qk(e),options:r}),this.instances.set(e,n),this.instancesOptions.set(e,r),this.invokeOnInitCallbacks(n,e),this.component.onInstanceCreated))try{this.component.onInstanceCreated(this.container,e,n)}catch{}return n||null}normalizeInstanceIdentifier(e=nc){return this.component?this.component.multipleInstances?e:nc:e}shouldAutoInitialize(){return!!this.component&&this.component.instantiationMode!=="EXPLICIT"}}function qk(t){return t===nc?void 0:t}function Gk(t){return t.instantiationMode==="EAGER"}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class zk{constructor(e){this.name=e,this.providers=new Map}addComponent(e){const r=this.getProvider(e.name);if(r.isComponentSet())throw new Error(`Component ${e.name} has already been registered with ${this.name}`);r.setComponent(e)}addOrOverwriteComponent(e){this.getProvider(e.name).isComponentSet()&&this.providers.delete(e.name),this.addComponent(e)}getProvider(e){if(this.providers.has(e))return this.providers.get(e);const r=new Kk(e,this);return this.providers.set(e,r),r}getProviders(){return Array.from(this.providers.values())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var Ar;(function(t){t[t.DEBUG=0]="DEBUG",t[t.VERBOSE=1]="VERBOSE",t[t.INFO=2]="INFO",t[t.WARN=3]="WARN",t[t.ERROR=4]="ERROR",t[t.SILENT=5]="SILENT"})(Ar||(Ar={}));const $k={debug:Ar.DEBUG,verbose:Ar.VERBOSE,info:Ar.INFO,warn:Ar.WARN,error:Ar.ERROR,silent:Ar.SILENT},Wk=Ar.INFO,Xk={[Ar.DEBUG]:"log",[Ar.VERBOSE]:"log",[Ar.INFO]:"info",[Ar.WARN]:"warn",[Ar.ERROR]:"error"},Jk=(t,e,...r)=>{if(e<t.logLevel)return;const n=new Date().toISOString(),s=Xk[e];if(s)console[s](`[${n}]  ${t.name}:`,...r);else throw new Error(`Attempted to log a message with an invalid logType (value: ${e})`)};let db=class{constructor(e){this.name=e,this._logLevel=Wk,this._logHandler=Jk,this._userLogHandler=null}get logLevel(){return this._logLevel}set logLevel(e){if(!(e in Ar))throw new TypeError(`Invalid value "${e}" assigned to \`logLevel\``);this._logLevel=e}setLogLevel(e){this._logLevel=typeof e=="string"?$k[e]:e}get logHandler(){return this._logHandler}set logHandler(e){if(typeof e!="function")throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=e}get userLogHandler(){return this._userLogHandler}set userLogHandler(e){this._userLogHandler=e}debug(...e){this._userLogHandler&&this._userLogHandler(this,Ar.DEBUG,...e),this._logHandler(this,Ar.DEBUG,...e)}log(...e){this._userLogHandler&&this._userLogHandler(this,Ar.VERBOSE,...e),this._logHandler(this,Ar.VERBOSE,...e)}info(...e){this._userLogHandler&&this._userLogHandler(this,Ar.INFO,...e),this._logHandler(this,Ar.INFO,...e)}warn(...e){this._userLogHandler&&this._userLogHandler(this,Ar.WARN,...e),this._logHandler(this,Ar.WARN,...e)}error(...e){this._userLogHandler&&this._userLogHandler(this,Ar.ERROR,...e),this._logHandler(this,Ar.ERROR,...e)}};const Yk=(t,e)=>e.some(r=>t instanceof r);let p5,m5;function Zk(){return p5||(p5=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction])}function eD(){return m5||(m5=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])}const vF=new WeakMap,Y1=new WeakMap,wF=new WeakMap,uy=new WeakMap,hb=new WeakMap;function tD(t){const e=new Promise((r,n)=>{const s=()=>{t.removeEventListener("success",i),t.removeEventListener("error",a)},i=()=>{r(sl(t.result)),s()},a=()=>{n(t.error),s()};t.addEventListener("success",i),t.addEventListener("error",a)});return e.then(r=>{r instanceof IDBCursor&&vF.set(r,t)}).catch(()=>{}),hb.set(e,t),e}function rD(t){if(Y1.has(t))return;const e=new Promise((r,n)=>{const s=()=>{t.removeEventListener("complete",i),t.removeEventListener("error",a),t.removeEventListener("abort",a)},i=()=>{r(),s()},a=()=>{n(t.error||new DOMException("AbortError","AbortError")),s()};t.addEventListener("complete",i),t.addEventListener("error",a),t.addEventListener("abort",a)});Y1.set(t,e)}let Z1={get(t,e,r){if(t instanceof IDBTransaction){if(e==="done")return Y1.get(t);if(e==="objectStoreNames")return t.objectStoreNames||wF.get(t);if(e==="store")return r.objectStoreNames[1]?void 0:r.objectStore(r.objectStoreNames[0])}return sl(t[e])},set(t,e,r){return t[e]=r,!0},has(t,e){return t instanceof IDBTransaction&&(e==="done"||e==="store")?!0:e in t}};function nD(t){Z1=t(Z1)}function sD(t){return t===IDBDatabase.prototype.transaction&&!("objectStoreNames"in IDBTransaction.prototype)?function(e,...r){const n=t.call(dy(this),e,...r);return wF.set(n,e.sort?e.sort():[e]),sl(n)}:eD().includes(t)?function(...e){return t.apply(dy(this),e),sl(vF.get(this))}:function(...e){return sl(t.apply(dy(this),e))}}function iD(t){return typeof t=="function"?sD(t):(t instanceof IDBTransaction&&rD(t),Yk(t,Zk())?new Proxy(t,Z1):t)}function sl(t){if(t instanceof IDBRequest)return tD(t);if(uy.has(t))return uy.get(t);const e=iD(t);return e!==t&&(uy.set(t,e),hb.set(e,t)),e}const dy=t=>hb.get(t);function aD(t,e,{blocked:r,upgrade:n,blocking:s,terminated:i}={}){const a=indexedDB.open(t,e),o=sl(a);return n&&a.addEventListener("upgradeneeded",l=>{n(sl(a.result),l.oldVersion,l.newVersion,sl(a.transaction),l)}),r&&a.addEventListener("blocked",l=>r(l.oldVersion,l.newVersion,l)),o.then(l=>{i&&l.addEventListener("close",()=>i()),s&&l.addEventListener("versionchange",c=>s(c.oldVersion,c.newVersion,c))}).catch(()=>{}),o}const oD=["get","getKey","getAll","getAllKeys","count"],AD=["put","add","delete","clear"],hy=new Map;function g5(t,e){if(!(t instanceof IDBDatabase&&!(e in t)&&typeof e=="string"))return;if(hy.get(e))return hy.get(e);const r=e.replace(/FromIndex$/,""),n=e!==r,s=AD.includes(r);if(!(r in(n?IDBIndex:IDBObjectStore).prototype)||!(s||oD.includes(r)))return;const i=async function(a,...o){const l=this.transaction(a,s?"readwrite":"readonly");let c=l.store;return n&&(c=c.index(o.shift())),(await Promise.all([c[r](...o),s&&l.done]))[0]};return hy.set(e,i),i}nD(t=>({...t,get:(e,r,n)=>g5(e,r)||t.get(e,r,n),has:(e,r)=>!!g5(e,r)||t.has(e,r)}));/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class lD{constructor(e){this.container=e}getPlatformInfoString(){return this.container.getProviders().map(r=>{if(cD(r)){const n=r.getImmediate();return`${n.library}/${n.version}`}else return null}).filter(r=>r).join(" ")}}function cD(t){const e=t.getComponent();return(e==null?void 0:e.type)==="VERSION"}const e2="@firebase/app",v5="0.10.13";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Mo=new db("@firebase/app"),uD="@firebase/app-compat",dD="@firebase/analytics-compat",hD="@firebase/analytics",fD="@firebase/app-check-compat",pD="@firebase/app-check",mD="@firebase/auth",gD="@firebase/auth-compat",vD="@firebase/database",wD="@firebase/data-connect",yD="@firebase/database-compat",xD="@firebase/functions",bD="@firebase/functions-compat",BD="@firebase/installations",CD="@firebase/installations-compat",ED="@firebase/messaging",_D="@firebase/messaging-compat",ND="@firebase/performance",ID="@firebase/performance-compat",SD="@firebase/remote-config",FD="@firebase/remote-config-compat",TD="@firebase/storage",UD="@firebase/storage-compat",PD="@firebase/firestore",QD="@firebase/vertexai-preview",LD="@firebase/firestore-compat",jD="firebase",kD="10.14.1";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const t2="[DEFAULT]",DD={[e2]:"fire-core",[uD]:"fire-core-compat",[hD]:"fire-analytics",[dD]:"fire-analytics-compat",[pD]:"fire-app-check",[fD]:"fire-app-check-compat",[mD]:"fire-auth",[gD]:"fire-auth-compat",[vD]:"fire-rtdb",[wD]:"fire-data-connect",[yD]:"fire-rtdb-compat",[xD]:"fire-fn",[bD]:"fire-fn-compat",[BD]:"fire-iid",[CD]:"fire-iid-compat",[ED]:"fire-fcm",[_D]:"fire-fcm-compat",[ND]:"fire-perf",[ID]:"fire-perf-compat",[SD]:"fire-rc",[FD]:"fire-rc-compat",[TD]:"fire-gcs",[UD]:"fire-gcs-compat",[PD]:"fire-fst",[LD]:"fire-fst-compat",[QD]:"fire-vertex","fire-js":"fire-js",[jD]:"fire-js-all"};/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Nd=new Map,r2=new Map,n2=new Map;function w5(t,e){try{t.container.addComponent(e)}catch(r){Mo.debug(`Component ${e.name} failed to register with FirebaseApp ${t.name}`,r)}}function Id(t){const e=t.name;if(n2.has(e))return Mo.debug(`There were multiple attempts to register component ${e}.`),!1;n2.set(e,t);for(const r of Nd.values())w5(r,t);for(const r of r2.values())w5(r,t);return!0}function fb(t,e){const r=t.container.getProvider("heartbeat").getImmediate({optional:!0});return r&&r.triggerHeartbeat(),t.container.getProvider(e)}function Qa(t){return t.settings!==void 0}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const RD={"no-app":"No Firebase App '{$appName}' has been created - call initializeApp() first","bad-app-name":"Illegal App name: '{$appName}'","duplicate-app":"Firebase App named '{$appName}' already exists with different options or config","app-deleted":"Firebase App named '{$appName}' already deleted","server-app-deleted":"Firebase Server App has been deleted","no-options":"Need to provide options, when not being deployed to hosting via source.","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance.","invalid-log-argument":"First argument to `onLog` must be null or a function.","idb-open":"Error thrown when opening IndexedDB. Original error: {$originalErrorMessage}.","idb-get":"Error thrown when reading from IndexedDB. Original error: {$originalErrorMessage}.","idb-set":"Error thrown when writing to IndexedDB. Original error: {$originalErrorMessage}.","idb-delete":"Error thrown when deleting from IndexedDB. Original error: {$originalErrorMessage}.","finalization-registry-not-supported":"FirebaseServerApp deleteOnDeref field defined but the JS runtime does not support FinalizationRegistry.","invalid-server-app-environment":"FirebaseServerApp is not for use in browser environments."},il=new Sp("app","Firebase",RD);/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class MD{constructor(e,r,n){this._isDeleted=!1,this._options=Object.assign({},e),this._config=Object.assign({},r),this._name=r.name,this._automaticDataCollectionEnabled=r.automaticDataCollectionEnabled,this._container=n,this.container.addComponent(new Uc("app",()=>this,"PUBLIC"))}get automaticDataCollectionEnabled(){return this.checkDestroyed(),this._automaticDataCollectionEnabled}set automaticDataCollectionEnabled(e){this.checkDestroyed(),this._automaticDataCollectionEnabled=e}get name(){return this.checkDestroyed(),this._name}get options(){return this.checkDestroyed(),this._options}get config(){return this.checkDestroyed(),this._config}get container(){return this._container}get isDeleted(){return this._isDeleted}set isDeleted(e){this._isDeleted=e}checkDestroyed(){if(this.isDeleted)throw il.create("app-deleted",{appName:this._name})}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Kd=kD;function pb(t,e={}){let r=t;typeof e!="object"&&(e={name:e});const n=Object.assign({name:t2,automaticDataCollectionEnabled:!1},e),s=n.name;if(typeof s!="string"||!s)throw il.create("bad-app-name",{appName:String(s)});if(r||(r=fF()),!r)throw il.create("no-options");const i=Nd.get(s);if(i){if(I0(r,i.options)&&I0(n,i.config))return i;throw il.create("duplicate-app",{appName:s})}const a=new zk(s);for(const l of n2.values())a.addComponent(l);const o=new MD(r,n,a);return Nd.set(s,o),o}function mb(t=t2){const e=Nd.get(t);if(!e&&t===t2&&fF())return pb();if(!e)throw il.create("no-app",{appName:t});return e}async function OD(t){let e=!1;const r=t.name;Nd.has(r)?(e=!0,Nd.delete(r)):r2.has(r)&&t.decRefCount()<=0&&(r2.delete(r),e=!0),e&&(await Promise.all(t.container.getProviders().map(n=>n.delete())),t.isDeleted=!0)}function al(t,e,r){var n;let s=(n=DD[t])!==null&&n!==void 0?n:t;r&&(s+=`-${r}`);const i=s.match(/\s|\//),a=e.match(/\s|\//);if(i||a){const o=[`Unable to register library "${s}" with version "${e}":`];i&&o.push(`library name "${s}" contains illegal characters (whitespace or "/")`),i&&a&&o.push("and"),a&&o.push(`version name "${e}" contains illegal characters (whitespace or "/")`),Mo.warn(o.join(" "));return}Id(new Uc(`${s}-version`,()=>({library:s,version:e}),"VERSION"))}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const HD="firebase-heartbeat-database",VD=1,ep="firebase-heartbeat-store";let fy=null;function yF(){return fy||(fy=aD(HD,VD,{upgrade:(t,e)=>{switch(e){case 0:try{t.createObjectStore(ep)}catch(r){console.warn(r)}}}}).catch(t=>{throw il.create("idb-open",{originalErrorMessage:t.message})})),fy}async function KD(t){try{const r=(await yF()).transaction(ep),n=await r.objectStore(ep).get(xF(t));return await r.done,n}catch(e){if(e instanceof qo)Mo.warn(e.message);else{const r=il.create("idb-get",{originalErrorMessage:e==null?void 0:e.message});Mo.warn(r.message)}}}async function y5(t,e){try{const n=(await yF()).transaction(ep,"readwrite");await n.objectStore(ep).put(e,xF(t)),await n.done}catch(r){if(r instanceof qo)Mo.warn(r.message);else{const n=il.create("idb-set",{originalErrorMessage:r==null?void 0:r.message});Mo.warn(n.message)}}}function xF(t){return`${t.name}!${t.options.appId}`}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const qD=1024,GD=30*24*60*60*1e3;class zD{constructor(e){this.container=e,this._heartbeatsCache=null;const r=this.container.getProvider("app").getImmediate();this._storage=new WD(r),this._heartbeatsCachePromise=this._storage.read().then(n=>(this._heartbeatsCache=n,n))}async triggerHeartbeat(){var e,r;try{const s=this.container.getProvider("platform-logger").getImmediate().getPlatformInfoString(),i=x5();return((e=this._heartbeatsCache)===null||e===void 0?void 0:e.heartbeats)==null&&(this._heartbeatsCache=await this._heartbeatsCachePromise,((r=this._heartbeatsCache)===null||r===void 0?void 0:r.heartbeats)==null)||this._heartbeatsCache.lastSentHeartbeatDate===i||this._heartbeatsCache.heartbeats.some(a=>a.date===i)?void 0:(this._heartbeatsCache.heartbeats.push({date:i,agent:s}),this._heartbeatsCache.heartbeats=this._heartbeatsCache.heartbeats.filter(a=>{const o=new Date(a.date).valueOf();return Date.now()-o<=GD}),this._storage.overwrite(this._heartbeatsCache))}catch(n){Mo.warn(n)}}async getHeartbeatsHeader(){var e;try{if(this._heartbeatsCache===null&&await this._heartbeatsCachePromise,((e=this._heartbeatsCache)===null||e===void 0?void 0:e.heartbeats)==null||this._heartbeatsCache.heartbeats.length===0)return"";const r=x5(),{heartbeatsToSend:n,unsentEntries:s}=$D(this._heartbeatsCache.heartbeats),i=N0(JSON.stringify({version:2,heartbeats:n}));return this._heartbeatsCache.lastSentHeartbeatDate=r,s.length>0?(this._heartbeatsCache.heartbeats=s,await this._storage.overwrite(this._heartbeatsCache)):(this._heartbeatsCache.heartbeats=[],this._storage.overwrite(this._heartbeatsCache)),i}catch(r){return Mo.warn(r),""}}}function x5(){return new Date().toISOString().substring(0,10)}function $D(t,e=qD){const r=[];let n=t.slice();for(const s of t){const i=r.find(a=>a.agent===s.agent);if(i){if(i.dates.push(s.date),b5(r)>e){i.dates.pop();break}}else if(r.push({agent:s.agent,dates:[s.date]}),b5(r)>e){r.pop();break}n=n.slice(1)}return{heartbeatsToSend:r,unsentEntries:n}}class WD{constructor(e){this.app=e,this._canUseIndexedDBPromise=this.runIndexedDBEnvironmentCheck()}async runIndexedDBEnvironmentCheck(){return gF()?jk().then(()=>!0).catch(()=>!1):!1}async read(){if(await this._canUseIndexedDBPromise){const r=await KD(this.app);return r!=null&&r.heartbeats?r:{heartbeats:[]}}else return{heartbeats:[]}}async overwrite(e){var r;if(await this._canUseIndexedDBPromise){const s=await this.read();return y5(this.app,{lastSentHeartbeatDate:(r=e.lastSentHeartbeatDate)!==null&&r!==void 0?r:s.lastSentHeartbeatDate,heartbeats:e.heartbeats})}else return}async add(e){var r;if(await this._canUseIndexedDBPromise){const s=await this.read();return y5(this.app,{lastSentHeartbeatDate:(r=e.lastSentHeartbeatDate)!==null&&r!==void 0?r:s.lastSentHeartbeatDate,heartbeats:[...s.heartbeats,...e.heartbeats]})}else return}}function b5(t){return N0(JSON.stringify({version:2,heartbeats:t})).length}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function XD(t){Id(new Uc("platform-logger",e=>new lD(e),"PRIVATE")),Id(new Uc("heartbeat",e=>new zD(e),"PRIVATE")),al(e2,v5,t),al(e2,v5,"esm2017"),al("fire-js","")}XD("");function gb(t,e){var r={};for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&e.indexOf(n)<0&&(r[n]=t[n]);if(t!=null&&typeof Object.getOwnPropertySymbols=="function")for(var s=0,n=Object.getOwnPropertySymbols(t);s<n.length;s++)e.indexOf(n[s])<0&&Object.prototype.propertyIsEnumerable.call(t,n[s])&&(r[n[s]]=t[n[s]]);return r}function bF(){return{"dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."}}const JD=bF,BF=new Sp("auth","Firebase",bF());/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const S0=new db("@firebase/auth");function YD(t,...e){S0.logLevel<=Ar.WARN&&S0.warn(`Auth (${Kd}): ${t}`,...e)}function Rg(t,...e){S0.logLevel<=Ar.ERROR&&S0.error(`Auth (${Kd}): ${t}`,...e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function la(t,...e){throw vb(t,...e)}function Ma(t,...e){return vb(t,...e)}function CF(t,e,r){const n=Object.assign(Object.assign({},JD()),{[e]:r});return new Sp("auth","Firebase",n).create(e,{appName:t.name})}function Fo(t){return CF(t,"operation-not-supported-in-this-environment","Operations that alter the current user are not supported in conjunction with FirebaseServerApp")}function vb(t,...e){if(typeof t!="string"){const r=e[0],n=[...e.slice(1)];return n[0]&&(n[0].appName=t.name),t._errorFactory.create(r,...n)}return BF.create(t,...e)}function Kt(t,e,...r){if(!t)throw vb(e,...r)}function Bo(t){const e="INTERNAL ASSERTION FAILED: "+t;throw Rg(e),new Error(e)}function Oo(t,e){t||Bo(e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function s2(){var t;return typeof self<"u"&&((t=self.location)===null||t===void 0?void 0:t.href)||""}function ZD(){return B5()==="http:"||B5()==="https:"}function B5(){var t;return typeof self<"u"&&((t=self.location)===null||t===void 0?void 0:t.protocol)||null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function eR(){return typeof navigator<"u"&&navigator&&"onLine"in navigator&&typeof navigator.onLine=="boolean"&&(ZD()||Pk()||"connection"in navigator)?navigator.onLine:!0}function tR(){if(typeof navigator>"u")return null;const t=navigator;return t.languages&&t.languages[0]||t.language||null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Tp{constructor(e,r){this.shortDelay=e,this.longDelay=r,Oo(r>e,"Short delay should be less than long delay!"),this.isMobile=Fk()||Qk()}get(){return eR()?this.isMobile?this.longDelay:this.shortDelay:Math.min(5e3,this.shortDelay)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function wb(t,e){Oo(t.emulator,"Emulator should always be set here");const{url:r}=t.emulator;return e?`${r}${e.startsWith("/")?e.slice(1):e}`:r}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class EF{static initialize(e,r,n){this.fetchImpl=e,r&&(this.headersImpl=r),n&&(this.responseImpl=n)}static fetch(){if(this.fetchImpl)return this.fetchImpl;if(typeof self<"u"&&"fetch"in self)return self.fetch;if(typeof globalThis<"u"&&globalThis.fetch)return globalThis.fetch;if(typeof fetch<"u")return fetch;Bo("Could not find fetch implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static headers(){if(this.headersImpl)return this.headersImpl;if(typeof self<"u"&&"Headers"in self)return self.Headers;if(typeof globalThis<"u"&&globalThis.Headers)return globalThis.Headers;if(typeof Headers<"u")return Headers;Bo("Could not find Headers implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static response(){if(this.responseImpl)return this.responseImpl;if(typeof self<"u"&&"Response"in self)return self.Response;if(typeof globalThis<"u"&&globalThis.Response)return globalThis.Response;if(typeof Response<"u")return Response;Bo("Could not find Response implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const rR={CREDENTIAL_MISMATCH:"custom-token-mismatch",MISSING_CUSTOM_TOKEN:"internal-error",INVALID_IDENTIFIER:"invalid-email",MISSING_CONTINUE_URI:"internal-error",INVALID_PASSWORD:"wrong-password",MISSING_PASSWORD:"missing-password",INVALID_LOGIN_CREDENTIALS:"invalid-credential",EMAIL_EXISTS:"email-already-in-use",PASSWORD_LOGIN_DISABLED:"operation-not-allowed",INVALID_IDP_RESPONSE:"invalid-credential",INVALID_PENDING_TOKEN:"invalid-credential",FEDERATED_USER_ID_ALREADY_LINKED:"credential-already-in-use",MISSING_REQ_TYPE:"internal-error",EMAIL_NOT_FOUND:"user-not-found",RESET_PASSWORD_EXCEED_LIMIT:"too-many-requests",EXPIRED_OOB_CODE:"expired-action-code",INVALID_OOB_CODE:"invalid-action-code",MISSING_OOB_CODE:"internal-error",CREDENTIAL_TOO_OLD_LOGIN_AGAIN:"requires-recent-login",INVALID_ID_TOKEN:"invalid-user-token",TOKEN_EXPIRED:"user-token-expired",USER_NOT_FOUND:"user-token-expired",TOO_MANY_ATTEMPTS_TRY_LATER:"too-many-requests",PASSWORD_DOES_NOT_MEET_REQUIREMENTS:"password-does-not-meet-requirements",INVALID_CODE:"invalid-verification-code",INVALID_SESSION_INFO:"invalid-verification-id",INVALID_TEMPORARY_PROOF:"invalid-credential",MISSING_SESSION_INFO:"missing-verification-id",SESSION_EXPIRED:"code-expired",MISSING_ANDROID_PACKAGE_NAME:"missing-android-pkg-name",UNAUTHORIZED_DOMAIN:"unauthorized-continue-uri",INVALID_OAUTH_CLIENT_ID:"invalid-oauth-client-id",ADMIN_ONLY_OPERATION:"admin-restricted-operation",INVALID_MFA_PENDING_CREDENTIAL:"invalid-multi-factor-session",MFA_ENROLLMENT_NOT_FOUND:"multi-factor-info-not-found",MISSING_MFA_ENROLLMENT_ID:"missing-multi-factor-info",MISSING_MFA_PENDING_CREDENTIAL:"missing-multi-factor-session",SECOND_FACTOR_EXISTS:"second-factor-already-in-use",SECOND_FACTOR_LIMIT_EXCEEDED:"maximum-second-factor-count-exceeded",BLOCKING_FUNCTION_ERROR_RESPONSE:"internal-error",RECAPTCHA_NOT_ENABLED:"recaptcha-not-enabled",MISSING_RECAPTCHA_TOKEN:"missing-recaptcha-token",INVALID_RECAPTCHA_TOKEN:"invalid-recaptcha-token",INVALID_RECAPTCHA_ACTION:"invalid-recaptcha-action",MISSING_CLIENT_TYPE:"missing-client-type",MISSING_RECAPTCHA_VERSION:"missing-recaptcha-version",INVALID_RECAPTCHA_VERSION:"invalid-recaptcha-version",INVALID_REQ_TYPE:"invalid-req-type"};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const nR=new Tp(3e4,6e4);function Nl(t,e){return t.tenantId&&!e.tenantId?Object.assign(Object.assign({},e),{tenantId:t.tenantId}):e}async function Il(t,e,r,n,s={}){return _F(t,s,async()=>{let i={},a={};n&&(e==="GET"?a=n:i={body:JSON.stringify(n)});const o=Fp(Object.assign({key:t.config.apiKey},a)).slice(1),l=await t._getAdditionalHeaders();l["Content-Type"]="application/json",t.languageCode&&(l["X-Firebase-Locale"]=t.languageCode);const c=Object.assign({method:e,headers:l},i);return Uk()||(c.referrerPolicy="no-referrer"),EF.fetch()(NF(t,t.config.apiHost,r,o),c)})}async function _F(t,e,r){t._canInitEmulator=!1;const n=Object.assign(Object.assign({},rR),e);try{const s=new iR(t),i=await Promise.race([r(),s.promise]);s.clearNetworkTimeout();const a=await i.json();if("needConfirmation"in a)throw jm(t,"account-exists-with-different-credential",a);if(i.ok&&!("errorMessage"in a))return a;{const o=i.ok?a.errorMessage:a.error.message,[l,c]=o.split(" : ");if(l==="FEDERATED_USER_ID_ALREADY_LINKED")throw jm(t,"credential-already-in-use",a);if(l==="EMAIL_EXISTS")throw jm(t,"email-already-in-use",a);if(l==="USER_DISABLED")throw jm(t,"user-disabled",a);const u=n[l]||l.toLowerCase().replace(/[_\s]+/g,"-");if(c)throw CF(t,u,c);la(t,u)}}catch(s){if(s instanceof qo)throw s;la(t,"network-request-failed",{message:String(s)})}}async function Up(t,e,r,n,s={}){const i=await Il(t,e,r,n,s);return"mfaPendingCredential"in i&&la(t,"multi-factor-auth-required",{_serverResponse:i}),i}function NF(t,e,r,n){const s=`${e}${r}?${n}`;return t.config.emulator?wb(t.config,s):`${t.config.apiScheme}://${s}`}function sR(t){switch(t){case"ENFORCE":return"ENFORCE";case"AUDIT":return"AUDIT";case"OFF":return"OFF";default:return"ENFORCEMENT_STATE_UNSPECIFIED"}}class iR{constructor(e){this.auth=e,this.timer=null,this.promise=new Promise((r,n)=>{this.timer=setTimeout(()=>n(Ma(this.auth,"network-request-failed")),nR.get())})}clearNetworkTimeout(){clearTimeout(this.timer)}}function jm(t,e,r){const n={appName:t.name};r.email&&(n.email=r.email),r.phoneNumber&&(n.phoneNumber=r.phoneNumber);const s=Ma(t,e,n);return s.customData._tokenResponse=r,s}function C5(t){return t!==void 0&&t.enterprise!==void 0}class aR{constructor(e){if(this.siteKey="",this.recaptchaEnforcementState=[],e.recaptchaKey===void 0)throw new Error("recaptchaKey undefined");this.siteKey=e.recaptchaKey.split("/")[3],this.recaptchaEnforcementState=e.recaptchaEnforcementState}getProviderEnforcementState(e){if(!this.recaptchaEnforcementState||this.recaptchaEnforcementState.length===0)return null;for(const r of this.recaptchaEnforcementState)if(r.provider&&r.provider===e)return sR(r.enforcementState);return null}isProviderEnabled(e){return this.getProviderEnforcementState(e)==="ENFORCE"||this.getProviderEnforcementState(e)==="AUDIT"}}async function oR(t,e){return Il(t,"GET","/v2/recaptchaConfig",Nl(t,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function AR(t,e){return Il(t,"POST","/v1/accounts:delete",e)}async function IF(t,e){return Il(t,"POST","/v1/accounts:lookup",e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function wf(t){if(t)try{const e=new Date(Number(t));if(!isNaN(e.getTime()))return e.toUTCString()}catch{}}async function lR(t,e=!1){const r=dn(t),n=await r.getIdToken(e),s=yb(n);Kt(s&&s.exp&&s.auth_time&&s.iat,r.auth,"internal-error");const i=typeof s.firebase=="object"?s.firebase:void 0,a=i==null?void 0:i.sign_in_provider;return{claims:s,token:n,authTime:wf(py(s.auth_time)),issuedAtTime:wf(py(s.iat)),expirationTime:wf(py(s.exp)),signInProvider:a||null,signInSecondFactor:(i==null?void 0:i.sign_in_second_factor)||null}}function py(t){return Number(t)*1e3}function yb(t){const[e,r,n]=t.split(".");if(e===void 0||r===void 0||n===void 0)return Rg("JWT malformed, contained fewer than 3 sections"),null;try{const s=dF(r);return s?JSON.parse(s):(Rg("Failed to decode base64 JWT payload"),null)}catch(s){return Rg("Caught error parsing JWT payload as JSON",s==null?void 0:s.toString()),null}}function E5(t){const e=yb(t);return Kt(e,"internal-error"),Kt(typeof e.exp<"u","internal-error"),Kt(typeof e.iat<"u","internal-error"),Number(e.exp)-Number(e.iat)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function tp(t,e,r=!1){if(r)return e;try{return await e}catch(n){throw n instanceof qo&&cR(n)&&t.auth.currentUser===t&&await t.auth.signOut(),n}}function cR({code:t}){return t==="auth/user-disabled"||t==="auth/user-token-expired"}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class uR{constructor(e){this.user=e,this.isRunning=!1,this.timerId=null,this.errorBackoff=3e4}_start(){this.isRunning||(this.isRunning=!0,this.schedule())}_stop(){this.isRunning&&(this.isRunning=!1,this.timerId!==null&&clearTimeout(this.timerId))}getInterval(e){var r;if(e){const n=this.errorBackoff;return this.errorBackoff=Math.min(this.errorBackoff*2,96e4),n}else{this.errorBackoff=3e4;const s=((r=this.user.stsTokenManager.expirationTime)!==null&&r!==void 0?r:0)-Date.now()-3e5;return Math.max(0,s)}}schedule(e=!1){if(!this.isRunning)return;const r=this.getInterval(e);this.timerId=setTimeout(async()=>{await this.iteration()},r)}async iteration(){try{await this.user.getIdToken(!0)}catch(e){(e==null?void 0:e.code)==="auth/network-request-failed"&&this.schedule(!0);return}this.schedule()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class i2{constructor(e,r){this.createdAt=e,this.lastLoginAt=r,this._initializeTime()}_initializeTime(){this.lastSignInTime=wf(this.lastLoginAt),this.creationTime=wf(this.createdAt)}_copy(e){this.createdAt=e.createdAt,this.lastLoginAt=e.lastLoginAt,this._initializeTime()}toJSON(){return{createdAt:this.createdAt,lastLoginAt:this.lastLoginAt}}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function F0(t){var e;const r=t.auth,n=await t.getIdToken(),s=await tp(t,IF(r,{idToken:n}));Kt(s==null?void 0:s.users.length,r,"internal-error");const i=s.users[0];t._notifyReloadListener(i);const a=!((e=i.providerUserInfo)===null||e===void 0)&&e.length?SF(i.providerUserInfo):[],o=hR(t.providerData,a),l=t.isAnonymous,c=!(t.email&&i.passwordHash)&&!(o!=null&&o.length),u=l?c:!1,f={uid:i.localId,displayName:i.displayName||null,photoURL:i.photoUrl||null,email:i.email||null,emailVerified:i.emailVerified||!1,phoneNumber:i.phoneNumber||null,tenantId:i.tenantId||null,providerData:o,metadata:new i2(i.createdAt,i.lastLoginAt),isAnonymous:u};Object.assign(t,f)}async function dR(t){const e=dn(t);await F0(e),await e.auth._persistUserIfCurrent(e),e.auth._notifyListenersIfCurrent(e)}function hR(t,e){return[...t.filter(n=>!e.some(s=>s.providerId===n.providerId)),...e]}function SF(t){return t.map(e=>{var{providerId:r}=e,n=gb(e,["providerId"]);return{providerId:r,uid:n.rawId||"",displayName:n.displayName||null,email:n.email||null,phoneNumber:n.phoneNumber||null,photoURL:n.photoUrl||null}})}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function fR(t,e){const r=await _F(t,{},async()=>{const n=Fp({grant_type:"refresh_token",refresh_token:e}).slice(1),{tokenApiHost:s,apiKey:i}=t.config,a=NF(t,s,"/v1/token",`key=${i}`),o=await t._getAdditionalHeaders();return o["Content-Type"]="application/x-www-form-urlencoded",EF.fetch()(a,{method:"POST",headers:o,body:n})});return{accessToken:r.access_token,expiresIn:r.expires_in,refreshToken:r.refresh_token}}async function pR(t,e){return Il(t,"POST","/v2/accounts:revokeToken",Nl(t,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class fd{constructor(){this.refreshToken=null,this.accessToken=null,this.expirationTime=null}get isExpired(){return!this.expirationTime||Date.now()>this.expirationTime-3e4}updateFromServerResponse(e){Kt(e.idToken,"internal-error"),Kt(typeof e.idToken<"u","internal-error"),Kt(typeof e.refreshToken<"u","internal-error");const r="expiresIn"in e&&typeof e.expiresIn<"u"?Number(e.expiresIn):E5(e.idToken);this.updateTokensAndExpiration(e.idToken,e.refreshToken,r)}updateFromIdToken(e){Kt(e.length!==0,"internal-error");const r=E5(e);this.updateTokensAndExpiration(e,null,r)}async getToken(e,r=!1){return!r&&this.accessToken&&!this.isExpired?this.accessToken:(Kt(this.refreshToken,e,"user-token-expired"),this.refreshToken?(await this.refresh(e,this.refreshToken),this.accessToken):null)}clearRefreshToken(){this.refreshToken=null}async refresh(e,r){const{accessToken:n,refreshToken:s,expiresIn:i}=await fR(e,r);this.updateTokensAndExpiration(n,s,Number(i))}updateTokensAndExpiration(e,r,n){this.refreshToken=r||null,this.accessToken=e||null,this.expirationTime=Date.now()+n*1e3}static fromJSON(e,r){const{refreshToken:n,accessToken:s,expirationTime:i}=r,a=new fd;return n&&(Kt(typeof n=="string","internal-error",{appName:e}),a.refreshToken=n),s&&(Kt(typeof s=="string","internal-error",{appName:e}),a.accessToken=s),i&&(Kt(typeof i=="number","internal-error",{appName:e}),a.expirationTime=i),a}toJSON(){return{refreshToken:this.refreshToken,accessToken:this.accessToken,expirationTime:this.expirationTime}}_assign(e){this.accessToken=e.accessToken,this.refreshToken=e.refreshToken,this.expirationTime=e.expirationTime}_clone(){return Object.assign(new fd,this.toJSON())}_performRefresh(){return Bo("not implemented")}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function BA(t,e){Kt(typeof t=="string"||typeof t>"u","internal-error",{appName:e})}class Co{constructor(e){var{uid:r,auth:n,stsTokenManager:s}=e,i=gb(e,["uid","auth","stsTokenManager"]);this.providerId="firebase",this.proactiveRefresh=new uR(this),this.reloadUserInfo=null,this.reloadListener=null,this.uid=r,this.auth=n,this.stsTokenManager=s,this.accessToken=s.accessToken,this.displayName=i.displayName||null,this.email=i.email||null,this.emailVerified=i.emailVerified||!1,this.phoneNumber=i.phoneNumber||null,this.photoURL=i.photoURL||null,this.isAnonymous=i.isAnonymous||!1,this.tenantId=i.tenantId||null,this.providerData=i.providerData?[...i.providerData]:[],this.metadata=new i2(i.createdAt||void 0,i.lastLoginAt||void 0)}async getIdToken(e){const r=await tp(this,this.stsTokenManager.getToken(this.auth,e));return Kt(r,this.auth,"internal-error"),this.accessToken!==r&&(this.accessToken=r,await this.auth._persistUserIfCurrent(this),this.auth._notifyListenersIfCurrent(this)),r}getIdTokenResult(e){return lR(this,e)}reload(){return dR(this)}_assign(e){this!==e&&(Kt(this.uid===e.uid,this.auth,"internal-error"),this.displayName=e.displayName,this.photoURL=e.photoURL,this.email=e.email,this.emailVerified=e.emailVerified,this.phoneNumber=e.phoneNumber,this.isAnonymous=e.isAnonymous,this.tenantId=e.tenantId,this.providerData=e.providerData.map(r=>Object.assign({},r)),this.metadata._copy(e.metadata),this.stsTokenManager._assign(e.stsTokenManager))}_clone(e){const r=new Co(Object.assign(Object.assign({},this),{auth:e,stsTokenManager:this.stsTokenManager._clone()}));return r.metadata._copy(this.metadata),r}_onReload(e){Kt(!this.reloadListener,this.auth,"internal-error"),this.reloadListener=e,this.reloadUserInfo&&(this._notifyReloadListener(this.reloadUserInfo),this.reloadUserInfo=null)}_notifyReloadListener(e){this.reloadListener?this.reloadListener(e):this.reloadUserInfo=e}_startProactiveRefresh(){this.proactiveRefresh._start()}_stopProactiveRefresh(){this.proactiveRefresh._stop()}async _updateTokensIfNecessary(e,r=!1){let n=!1;e.idToken&&e.idToken!==this.stsTokenManager.accessToken&&(this.stsTokenManager.updateFromServerResponse(e),n=!0),r&&await F0(this),await this.auth._persistUserIfCurrent(this),n&&this.auth._notifyListenersIfCurrent(this)}async delete(){if(Qa(this.auth.app))return Promise.reject(Fo(this.auth));const e=await this.getIdToken();return await tp(this,AR(this.auth,{idToken:e})),this.stsTokenManager.clearRefreshToken(),this.auth.signOut()}toJSON(){return Object.assign(Object.assign({uid:this.uid,email:this.email||void 0,emailVerified:this.emailVerified,displayName:this.displayName||void 0,isAnonymous:this.isAnonymous,photoURL:this.photoURL||void 0,phoneNumber:this.phoneNumber||void 0,tenantId:this.tenantId||void 0,providerData:this.providerData.map(e=>Object.assign({},e)),stsTokenManager:this.stsTokenManager.toJSON(),_redirectEventId:this._redirectEventId},this.metadata.toJSON()),{apiKey:this.auth.config.apiKey,appName:this.auth.name})}get refreshToken(){return this.stsTokenManager.refreshToken||""}static _fromJSON(e,r){var n,s,i,a,o,l,c,u;const f=(n=r.displayName)!==null&&n!==void 0?n:void 0,p=(s=r.email)!==null&&s!==void 0?s:void 0,m=(i=r.phoneNumber)!==null&&i!==void 0?i:void 0,b=(a=r.photoURL)!==null&&a!==void 0?a:void 0,B=(o=r.tenantId)!==null&&o!==void 0?o:void 0,_=(l=r._redirectEventId)!==null&&l!==void 0?l:void 0,w=(c=r.createdAt)!==null&&c!==void 0?c:void 0,y=(u=r.lastLoginAt)!==null&&u!==void 0?u:void 0,{uid:S,emailVerified:O,isAnonymous:R,providerData:M,stsTokenManager:I}=r;Kt(S&&I,e,"internal-error");const E=fd.fromJSON(this.name,I);Kt(typeof S=="string",e,"internal-error"),BA(f,e.name),BA(p,e.name),Kt(typeof O=="boolean",e,"internal-error"),Kt(typeof R=="boolean",e,"internal-error"),BA(m,e.name),BA(b,e.name),BA(B,e.name),BA(_,e.name),BA(w,e.name),BA(y,e.name);const L=new Co({uid:S,auth:e,email:p,emailVerified:O,displayName:f,isAnonymous:R,photoURL:b,phoneNumber:m,tenantId:B,stsTokenManager:E,createdAt:w,lastLoginAt:y});return M&&Array.isArray(M)&&(L.providerData=M.map(D=>Object.assign({},D))),_&&(L._redirectEventId=_),L}static async _fromIdTokenResponse(e,r,n=!1){const s=new fd;s.updateFromServerResponse(r);const i=new Co({uid:r.localId,auth:e,stsTokenManager:s,isAnonymous:n});return await F0(i),i}static async _fromGetAccountInfoResponse(e,r,n){const s=r.users[0];Kt(s.localId!==void 0,"internal-error");const i=s.providerUserInfo!==void 0?SF(s.providerUserInfo):[],a=!(s.email&&s.passwordHash)&&!(i!=null&&i.length),o=new fd;o.updateFromIdToken(n);const l=new Co({uid:s.localId,auth:e,stsTokenManager:o,isAnonymous:a}),c={uid:s.localId,displayName:s.displayName||null,photoURL:s.photoUrl||null,email:s.email||null,emailVerified:s.emailVerified||!1,phoneNumber:s.phoneNumber||null,tenantId:s.tenantId||null,providerData:i,metadata:new i2(s.createdAt,s.lastLoginAt),isAnonymous:!(s.email&&s.passwordHash)&&!(i!=null&&i.length)};return Object.assign(l,c),l}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const _5=new Map;function Eo(t){Oo(t instanceof Function,"Expected a class definition");let e=_5.get(t);return e?(Oo(e instanceof t,"Instance stored in cache mismatched with class"),e):(e=new t,_5.set(t,e),e)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class FF{constructor(){this.type="NONE",this.storage={}}async _isAvailable(){return!0}async _set(e,r){this.storage[e]=r}async _get(e){const r=this.storage[e];return r===void 0?null:r}async _remove(e){delete this.storage[e]}_addListener(e,r){}_removeListener(e,r){}}FF.type="NONE";const N5=FF;/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Mg(t,e,r){return`firebase:${t}:${e}:${r}`}class pd{constructor(e,r,n){this.persistence=e,this.auth=r,this.userKey=n;const{config:s,name:i}=this.auth;this.fullUserKey=Mg(this.userKey,s.apiKey,i),this.fullPersistenceKey=Mg("persistence",s.apiKey,i),this.boundEventHandler=r._onStorageEvent.bind(r),this.persistence._addListener(this.fullUserKey,this.boundEventHandler)}setCurrentUser(e){return this.persistence._set(this.fullUserKey,e.toJSON())}async getCurrentUser(){const e=await this.persistence._get(this.fullUserKey);return e?Co._fromJSON(this.auth,e):null}removeCurrentUser(){return this.persistence._remove(this.fullUserKey)}savePersistenceForRedirect(){return this.persistence._set(this.fullPersistenceKey,this.persistence.type)}async setPersistence(e){if(this.persistence===e)return;const r=await this.getCurrentUser();if(await this.removeCurrentUser(),this.persistence=e,r)return this.setCurrentUser(r)}delete(){this.persistence._removeListener(this.fullUserKey,this.boundEventHandler)}static async create(e,r,n="authUser"){if(!r.length)return new pd(Eo(N5),e,n);const s=(await Promise.all(r.map(async c=>{if(await c._isAvailable())return c}))).filter(c=>c);let i=s[0]||Eo(N5);const a=Mg(n,e.config.apiKey,e.name);let o=null;for(const c of r)try{const u=await c._get(a);if(u){const f=Co._fromJSON(e,u);c!==i&&(o=f),i=c;break}}catch{}const l=s.filter(c=>c._shouldAllowMigration);return!i._shouldAllowMigration||!l.length?new pd(i,e,n):(i=l[0],o&&await i._set(a,o.toJSON()),await Promise.all(r.map(async c=>{if(c!==i)try{await c._remove(a)}catch{}})),new pd(i,e,n))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function I5(t){const e=t.toLowerCase();if(e.includes("opera/")||e.includes("opr/")||e.includes("opios/"))return"Opera";if(QF(e))return"IEMobile";if(e.includes("msie")||e.includes("trident/"))return"IE";if(e.includes("edge/"))return"Edge";if(TF(e))return"Firefox";if(e.includes("silk/"))return"Silk";if(jF(e))return"Blackberry";if(kF(e))return"Webos";if(UF(e))return"Safari";if((e.includes("chrome/")||PF(e))&&!e.includes("edge/"))return"Chrome";if(LF(e))return"Android";{const r=/([a-zA-Z\d\.]+)\/[a-zA-Z\d\.]*$/,n=t.match(r);if((n==null?void 0:n.length)===2)return n[1]}return"Other"}function TF(t=jn()){return/firefox\//i.test(t)}function UF(t=jn()){const e=t.toLowerCase();return e.includes("safari/")&&!e.includes("chrome/")&&!e.includes("crios/")&&!e.includes("android")}function PF(t=jn()){return/crios\//i.test(t)}function QF(t=jn()){return/iemobile/i.test(t)}function LF(t=jn()){return/android/i.test(t)}function jF(t=jn()){return/blackberry/i.test(t)}function kF(t=jn()){return/webos/i.test(t)}function xb(t=jn()){return/iphone|ipad|ipod/i.test(t)||/macintosh/i.test(t)&&/mobile/i.test(t)}function mR(t=jn()){var e;return xb(t)&&!!(!((e=window.navigator)===null||e===void 0)&&e.standalone)}function gR(){return Lk()&&document.documentMode===10}function DF(t=jn()){return xb(t)||LF(t)||kF(t)||jF(t)||/windows phone/i.test(t)||QF(t)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function RF(t,e=[]){let r;switch(t){case"Browser":r=I5(jn());break;case"Worker":r=`${I5(jn())}-${t}`;break;default:r=t}const n=e.length?e.join(","):"FirebaseCore-web";return`${r}/JsCore/${Kd}/${n}`}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class vR{constructor(e){this.auth=e,this.queue=[]}pushCallback(e,r){const n=i=>new Promise((a,o)=>{try{const l=e(i);a(l)}catch(l){o(l)}});n.onAbort=r,this.queue.push(n);const s=this.queue.length-1;return()=>{this.queue[s]=()=>Promise.resolve()}}async runMiddleware(e){if(this.auth.currentUser===e)return;const r=[];try{for(const n of this.queue)await n(e),n.onAbort&&r.push(n.onAbort)}catch(n){r.reverse();for(const s of r)try{s()}catch{}throw this.auth._errorFactory.create("login-blocked",{originalMessage:n==null?void 0:n.message})}}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function wR(t,e={}){return Il(t,"GET","/v2/passwordPolicy",Nl(t,e))}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const yR=6;class xR{constructor(e){var r,n,s,i;const a=e.customStrengthOptions;this.customStrengthOptions={},this.customStrengthOptions.minPasswordLength=(r=a.minPasswordLength)!==null&&r!==void 0?r:yR,a.maxPasswordLength&&(this.customStrengthOptions.maxPasswordLength=a.maxPasswordLength),a.containsLowercaseCharacter!==void 0&&(this.customStrengthOptions.containsLowercaseLetter=a.containsLowercaseCharacter),a.containsUppercaseCharacter!==void 0&&(this.customStrengthOptions.containsUppercaseLetter=a.containsUppercaseCharacter),a.containsNumericCharacter!==void 0&&(this.customStrengthOptions.containsNumericCharacter=a.containsNumericCharacter),a.containsNonAlphanumericCharacter!==void 0&&(this.customStrengthOptions.containsNonAlphanumericCharacter=a.containsNonAlphanumericCharacter),this.enforcementState=e.enforcementState,this.enforcementState==="ENFORCEMENT_STATE_UNSPECIFIED"&&(this.enforcementState="OFF"),this.allowedNonAlphanumericCharacters=(s=(n=e.allowedNonAlphanumericCharacters)===null||n===void 0?void 0:n.join(""))!==null&&s!==void 0?s:"",this.forceUpgradeOnSignin=(i=e.forceUpgradeOnSignin)!==null&&i!==void 0?i:!1,this.schemaVersion=e.schemaVersion}validatePassword(e){var r,n,s,i,a,o;const l={isValid:!0,passwordPolicy:this};return this.validatePasswordLengthOptions(e,l),this.validatePasswordCharacterOptions(e,l),l.isValid&&(l.isValid=(r=l.meetsMinPasswordLength)!==null&&r!==void 0?r:!0),l.isValid&&(l.isValid=(n=l.meetsMaxPasswordLength)!==null&&n!==void 0?n:!0),l.isValid&&(l.isValid=(s=l.containsLowercaseLetter)!==null&&s!==void 0?s:!0),l.isValid&&(l.isValid=(i=l.containsUppercaseLetter)!==null&&i!==void 0?i:!0),l.isValid&&(l.isValid=(a=l.containsNumericCharacter)!==null&&a!==void 0?a:!0),l.isValid&&(l.isValid=(o=l.containsNonAlphanumericCharacter)!==null&&o!==void 0?o:!0),l}validatePasswordLengthOptions(e,r){const n=this.customStrengthOptions.minPasswordLength,s=this.customStrengthOptions.maxPasswordLength;n&&(r.meetsMinPasswordLength=e.length>=n),s&&(r.meetsMaxPasswordLength=e.length<=s)}validatePasswordCharacterOptions(e,r){this.updatePasswordCharacterOptionsStatuses(r,!1,!1,!1,!1);let n;for(let s=0;s<e.length;s++)n=e.charAt(s),this.updatePasswordCharacterOptionsStatuses(r,n>="a"&&n<="z",n>="A"&&n<="Z",n>="0"&&n<="9",this.allowedNonAlphanumericCharacters.includes(n))}updatePasswordCharacterOptionsStatuses(e,r,n,s,i){this.customStrengthOptions.containsLowercaseLetter&&(e.containsLowercaseLetter||(e.containsLowercaseLetter=r)),this.customStrengthOptions.containsUppercaseLetter&&(e.containsUppercaseLetter||(e.containsUppercaseLetter=n)),this.customStrengthOptions.containsNumericCharacter&&(e.containsNumericCharacter||(e.containsNumericCharacter=s)),this.customStrengthOptions.containsNonAlphanumericCharacter&&(e.containsNonAlphanumericCharacter||(e.containsNonAlphanumericCharacter=i))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class bR{constructor(e,r,n,s){this.app=e,this.heartbeatServiceProvider=r,this.appCheckServiceProvider=n,this.config=s,this.currentUser=null,this.emulatorConfig=null,this.operations=Promise.resolve(),this.authStateSubscription=new S5(this),this.idTokenSubscription=new S5(this),this.beforeStateQueue=new vR(this),this.redirectUser=null,this.isProactiveRefreshEnabled=!1,this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION=1,this._canInitEmulator=!0,this._isInitialized=!1,this._deleted=!1,this._initializationPromise=null,this._popupRedirectResolver=null,this._errorFactory=BF,this._agentRecaptchaConfig=null,this._tenantRecaptchaConfigs={},this._projectPasswordPolicy=null,this._tenantPasswordPolicies={},this.lastNotifiedUid=void 0,this.languageCode=null,this.tenantId=null,this.settings={appVerificationDisabledForTesting:!1},this.frameworks=[],this.name=e.name,this.clientVersion=s.sdkClientVersion}_initializeWithPersistence(e,r){return r&&(this._popupRedirectResolver=Eo(r)),this._initializationPromise=this.queue(async()=>{var n,s;if(!this._deleted&&(this.persistenceManager=await pd.create(this,e),!this._deleted)){if(!((n=this._popupRedirectResolver)===null||n===void 0)&&n._shouldInitProactively)try{await this._popupRedirectResolver._initialize(this)}catch{}await this.initializeCurrentUser(r),this.lastNotifiedUid=((s=this.currentUser)===null||s===void 0?void 0:s.uid)||null,!this._deleted&&(this._isInitialized=!0)}}),this._initializationPromise}async _onStorageEvent(){if(this._deleted)return;const e=await this.assertedPersistence.getCurrentUser();if(!(!this.currentUser&&!e)){if(this.currentUser&&e&&this.currentUser.uid===e.uid){this._currentUser._assign(e),await this.currentUser.getIdToken();return}await this._updateCurrentUser(e,!0)}}async initializeCurrentUserFromIdToken(e){try{const r=await IF(this,{idToken:e}),n=await Co._fromGetAccountInfoResponse(this,r,e);await this.directlySetCurrentUser(n)}catch(r){console.warn("FirebaseServerApp could not login user with provided authIdToken: ",r),await this.directlySetCurrentUser(null)}}async initializeCurrentUser(e){var r;if(Qa(this.app)){const a=this.app.settings.authIdToken;return a?new Promise(o=>{setTimeout(()=>this.initializeCurrentUserFromIdToken(a).then(o,o))}):this.directlySetCurrentUser(null)}const n=await this.assertedPersistence.getCurrentUser();let s=n,i=!1;if(e&&this.config.authDomain){await this.getOrInitRedirectPersistenceManager();const a=(r=this.redirectUser)===null||r===void 0?void 0:r._redirectEventId,o=s==null?void 0:s._redirectEventId,l=await this.tryRedirectSignIn(e);(!a||a===o)&&(l!=null&&l.user)&&(s=l.user,i=!0)}if(!s)return this.directlySetCurrentUser(null);if(!s._redirectEventId){if(i)try{await this.beforeStateQueue.runMiddleware(s)}catch(a){s=n,this._popupRedirectResolver._overrideRedirectResult(this,()=>Promise.reject(a))}return s?this.reloadAndSetCurrentUserOrClear(s):this.directlySetCurrentUser(null)}return Kt(this._popupRedirectResolver,this,"argument-error"),await this.getOrInitRedirectPersistenceManager(),this.redirectUser&&this.redirectUser._redirectEventId===s._redirectEventId?this.directlySetCurrentUser(s):this.reloadAndSetCurrentUserOrClear(s)}async tryRedirectSignIn(e){let r=null;try{r=await this._popupRedirectResolver._completeRedirectFn(this,e,!0)}catch{await this._setRedirectUser(null)}return r}async reloadAndSetCurrentUserOrClear(e){try{await F0(e)}catch(r){if((r==null?void 0:r.code)!=="auth/network-request-failed")return this.directlySetCurrentUser(null)}return this.directlySetCurrentUser(e)}useDeviceLanguage(){this.languageCode=tR()}async _delete(){this._deleted=!0}async updateCurrentUser(e){if(Qa(this.app))return Promise.reject(Fo(this));const r=e?dn(e):null;return r&&Kt(r.auth.config.apiKey===this.config.apiKey,this,"invalid-user-token"),this._updateCurrentUser(r&&r._clone(this))}async _updateCurrentUser(e,r=!1){if(!this._deleted)return e&&Kt(this.tenantId===e.tenantId,this,"tenant-id-mismatch"),r||await this.beforeStateQueue.runMiddleware(e),this.queue(async()=>{await this.directlySetCurrentUser(e),this.notifyAuthListeners()})}async signOut(){return Qa(this.app)?Promise.reject(Fo(this)):(await this.beforeStateQueue.runMiddleware(null),(this.redirectPersistenceManager||this._popupRedirectResolver)&&await this._setRedirectUser(null),this._updateCurrentUser(null,!0))}setPersistence(e){return Qa(this.app)?Promise.reject(Fo(this)):this.queue(async()=>{await this.assertedPersistence.setPersistence(Eo(e))})}_getRecaptchaConfig(){return this.tenantId==null?this._agentRecaptchaConfig:this._tenantRecaptchaConfigs[this.tenantId]}async validatePassword(e){this._getPasswordPolicyInternal()||await this._updatePasswordPolicy();const r=this._getPasswordPolicyInternal();return r.schemaVersion!==this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION?Promise.reject(this._errorFactory.create("unsupported-password-policy-schema-version",{})):r.validatePassword(e)}_getPasswordPolicyInternal(){return this.tenantId===null?this._projectPasswordPolicy:this._tenantPasswordPolicies[this.tenantId]}async _updatePasswordPolicy(){const e=await wR(this),r=new xR(e);this.tenantId===null?this._projectPasswordPolicy=r:this._tenantPasswordPolicies[this.tenantId]=r}_getPersistence(){return this.assertedPersistence.persistence.type}_updateErrorMap(e){this._errorFactory=new Sp("auth","Firebase",e())}onAuthStateChanged(e,r,n){return this.registerStateListener(this.authStateSubscription,e,r,n)}beforeAuthStateChanged(e,r){return this.beforeStateQueue.pushCallback(e,r)}onIdTokenChanged(e,r,n){return this.registerStateListener(this.idTokenSubscription,e,r,n)}authStateReady(){return new Promise((e,r)=>{if(this.currentUser)e();else{const n=this.onAuthStateChanged(()=>{n(),e()},r)}})}async revokeAccessToken(e){if(this.currentUser){const r=await this.currentUser.getIdToken(),n={providerId:"apple.com",tokenType:"ACCESS_TOKEN",token:e,idToken:r};this.tenantId!=null&&(n.tenantId=this.tenantId),await pR(this,n)}}toJSON(){var e;return{apiKey:this.config.apiKey,authDomain:this.config.authDomain,appName:this.name,currentUser:(e=this._currentUser)===null||e===void 0?void 0:e.toJSON()}}async _setRedirectUser(e,r){const n=await this.getOrInitRedirectPersistenceManager(r);return e===null?n.removeCurrentUser():n.setCurrentUser(e)}async getOrInitRedirectPersistenceManager(e){if(!this.redirectPersistenceManager){const r=e&&Eo(e)||this._popupRedirectResolver;Kt(r,this,"argument-error"),this.redirectPersistenceManager=await pd.create(this,[Eo(r._redirectPersistence)],"redirectUser"),this.redirectUser=await this.redirectPersistenceManager.getCurrentUser()}return this.redirectPersistenceManager}async _redirectUserForId(e){var r,n;return this._isInitialized&&await this.queue(async()=>{}),((r=this._currentUser)===null||r===void 0?void 0:r._redirectEventId)===e?this._currentUser:((n=this.redirectUser)===null||n===void 0?void 0:n._redirectEventId)===e?this.redirectUser:null}async _persistUserIfCurrent(e){if(e===this.currentUser)return this.queue(async()=>this.directlySetCurrentUser(e))}_notifyListenersIfCurrent(e){e===this.currentUser&&this.notifyAuthListeners()}_key(){return`${this.config.authDomain}:${this.config.apiKey}:${this.name}`}_startProactiveRefresh(){this.isProactiveRefreshEnabled=!0,this.currentUser&&this._currentUser._startProactiveRefresh()}_stopProactiveRefresh(){this.isProactiveRefreshEnabled=!1,this.currentUser&&this._currentUser._stopProactiveRefresh()}get _currentUser(){return this.currentUser}notifyAuthListeners(){var e,r;if(!this._isInitialized)return;this.idTokenSubscription.next(this.currentUser);const n=(r=(e=this.currentUser)===null||e===void 0?void 0:e.uid)!==null&&r!==void 0?r:null;this.lastNotifiedUid!==n&&(this.lastNotifiedUid=n,this.authStateSubscription.next(this.currentUser))}registerStateListener(e,r,n,s){if(this._deleted)return()=>{};const i=typeof r=="function"?r:r.next.bind(r);let a=!1;const o=this._isInitialized?Promise.resolve():this._initializationPromise;if(Kt(o,this,"internal-error"),o.then(()=>{a||i(this.currentUser)}),typeof r=="function"){const l=e.addObserver(r,n,s);return()=>{a=!0,l()}}else{const l=e.addObserver(r);return()=>{a=!0,l()}}}async directlySetCurrentUser(e){this.currentUser&&this.currentUser!==e&&this._currentUser._stopProactiveRefresh(),e&&this.isProactiveRefreshEnabled&&e._startProactiveRefresh(),this.currentUser=e,e?await this.assertedPersistence.setCurrentUser(e):await this.assertedPersistence.removeCurrentUser()}queue(e){return this.operations=this.operations.then(e,e),this.operations}get assertedPersistence(){return Kt(this.persistenceManager,this,"internal-error"),this.persistenceManager}_logFramework(e){!e||this.frameworks.includes(e)||(this.frameworks.push(e),this.frameworks.sort(),this.clientVersion=RF(this.config.clientPlatform,this._getFrameworks()))}_getFrameworks(){return this.frameworks}async _getAdditionalHeaders(){var e;const r={"X-Client-Version":this.clientVersion};this.app.options.appId&&(r["X-Firebase-gmpid"]=this.app.options.appId);const n=await((e=this.heartbeatServiceProvider.getImmediate({optional:!0}))===null||e===void 0?void 0:e.getHeartbeatsHeader());n&&(r["X-Firebase-Client"]=n);const s=await this._getAppCheckToken();return s&&(r["X-Firebase-AppCheck"]=s),r}async _getAppCheckToken(){var e;const r=await((e=this.appCheckServiceProvider.getImmediate({optional:!0}))===null||e===void 0?void 0:e.getToken());return r!=null&&r.error&&YD(`Error while retrieving App Check token: ${r.error}`),r==null?void 0:r.token}}function Vc(t){return dn(t)}class S5{constructor(e){this.auth=e,this.observer=null,this.addObserver=Ok(r=>this.observer=r)}get next(){return Kt(this.observer,this.auth,"internal-error"),this.observer.next.bind(this.observer)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let Nv={async loadJS(){throw new Error("Unable to load external scripts")},recaptchaV2Script:"",recaptchaEnterpriseScript:"",gapiScript:""};function BR(t){Nv=t}function MF(t){return Nv.loadJS(t)}function CR(){return Nv.recaptchaEnterpriseScript}function ER(){return Nv.gapiScript}function _R(t){return`__${t}${Math.floor(Math.random()*1e6)}`}const NR="recaptcha-enterprise",IR="NO_RECAPTCHA";class SR{constructor(e){this.type=NR,this.auth=Vc(e)}async verify(e="verify",r=!1){async function n(i){if(!r){if(i.tenantId==null&&i._agentRecaptchaConfig!=null)return i._agentRecaptchaConfig.siteKey;if(i.tenantId!=null&&i._tenantRecaptchaConfigs[i.tenantId]!==void 0)return i._tenantRecaptchaConfigs[i.tenantId].siteKey}return new Promise(async(a,o)=>{oR(i,{clientType:"CLIENT_TYPE_WEB",version:"RECAPTCHA_ENTERPRISE"}).then(l=>{if(l.recaptchaKey===void 0)o(new Error("recaptcha Enterprise site key undefined"));else{const c=new aR(l);return i.tenantId==null?i._agentRecaptchaConfig=c:i._tenantRecaptchaConfigs[i.tenantId]=c,a(c.siteKey)}}).catch(l=>{o(l)})})}function s(i,a,o){const l=window.grecaptcha;C5(l)?l.enterprise.ready(()=>{l.enterprise.execute(i,{action:e}).then(c=>{a(c)}).catch(()=>{a(IR)})}):o(Error("No reCAPTCHA enterprise script loaded."))}return new Promise((i,a)=>{n(this.auth).then(o=>{if(!r&&C5(window.grecaptcha))s(o,i,a);else{if(typeof window>"u"){a(new Error("RecaptchaVerifier is only supported in browser"));return}let l=CR();l.length!==0&&(l+=o),MF(l).then(()=>{s(o,i,a)}).catch(c=>{a(c)})}}).catch(o=>{a(o)})})}}async function F5(t,e,r,n=!1){const s=new SR(t);let i;try{i=await s.verify(r)}catch{i=await s.verify(r,!0)}const a=Object.assign({},e);return n?Object.assign(a,{captchaResp:i}):Object.assign(a,{captchaResponse:i}),Object.assign(a,{clientType:"CLIENT_TYPE_WEB"}),Object.assign(a,{recaptchaVersion:"RECAPTCHA_ENTERPRISE"}),a}async function a2(t,e,r,n){var s;if(!((s=t._getRecaptchaConfig())===null||s===void 0)&&s.isProviderEnabled("EMAIL_PASSWORD_PROVIDER")){const i=await F5(t,e,r,r==="getOobCode");return n(t,i)}else return n(t,e).catch(async i=>{if(i.code==="auth/missing-recaptcha-token"){console.log(`${r} is protected by reCAPTCHA Enterprise for this project. Automatically triggering the reCAPTCHA flow and restarting the flow.`);const a=await F5(t,e,r,r==="getOobCode");return n(t,a)}else return Promise.reject(i)})}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function FR(t,e){const r=fb(t,"auth");if(r.isInitialized()){const s=r.getImmediate(),i=r.getOptions();if(I0(i,e??{}))return s;la(s,"already-initialized")}return r.initialize({options:e})}function TR(t,e){const r=(e==null?void 0:e.persistence)||[],n=(Array.isArray(r)?r:[r]).map(Eo);e!=null&&e.errorMap&&t._updateErrorMap(e.errorMap),t._initializeWithPersistence(n,e==null?void 0:e.popupRedirectResolver)}function UR(t,e,r){const n=Vc(t);Kt(n._canInitEmulator,n,"emulator-config-failed"),Kt(/^https?:\/\//.test(e),n,"invalid-emulator-scheme");const s=!1,i=OF(e),{host:a,port:o}=PR(e),l=o===null?"":`:${o}`;n.config.emulator={url:`${i}//${a}${l}/`},n.settings.appVerificationDisabledForTesting=!0,n.emulatorConfig=Object.freeze({host:a,port:o,protocol:i.replace(":",""),options:Object.freeze({disableWarnings:s})}),QR()}function OF(t){const e=t.indexOf(":");return e<0?"":t.substr(0,e+1)}function PR(t){const e=OF(t),r=/(\/\/)?([^?#/]+)/.exec(t.substr(e.length));if(!r)return{host:"",port:null};const n=r[2].split("@").pop()||"",s=/^(\[[^\]]+\])(:|$)/.exec(n);if(s){const i=s[1];return{host:i,port:T5(n.substr(i.length+1))}}else{const[i,a]=n.split(":");return{host:i,port:T5(a)}}}function T5(t){if(!t)return null;const e=Number(t);return isNaN(e)?null:e}function QR(){function t(){const e=document.createElement("p"),r=e.style;e.innerText="Running in emulator mode. Do not use with production credentials.",r.position="fixed",r.width="100%",r.backgroundColor="#ffffff",r.border=".1em solid #000000",r.color="#b50000",r.bottom="0px",r.left="0px",r.margin="0px",r.zIndex="10000",r.textAlign="center",e.classList.add("firebase-emulator-warning"),document.body.appendChild(e)}typeof console<"u"&&typeof console.info=="function"&&console.info("WARNING: You are using the Auth Emulator, which is intended for local testing only.  Do not use with production credentials."),typeof window<"u"&&typeof document<"u"&&(document.readyState==="loading"?window.addEventListener("DOMContentLoaded",t):t())}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class bb{constructor(e,r){this.providerId=e,this.signInMethod=r}toJSON(){return Bo("not implemented")}_getIdTokenResponse(e){return Bo("not implemented")}_linkToIdToken(e,r){return Bo("not implemented")}_getReauthenticationResolver(e){return Bo("not implemented")}}async function LR(t,e){return Il(t,"POST","/v1/accounts:signUp",e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function jR(t,e){return Up(t,"POST","/v1/accounts:signInWithPassword",Nl(t,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function kR(t,e){return Up(t,"POST","/v1/accounts:signInWithEmailLink",Nl(t,e))}async function DR(t,e){return Up(t,"POST","/v1/accounts:signInWithEmailLink",Nl(t,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class rp extends bb{constructor(e,r,n,s=null){super("password",n),this._email=e,this._password=r,this._tenantId=s}static _fromEmailAndPassword(e,r){return new rp(e,r,"password")}static _fromEmailAndCode(e,r,n=null){return new rp(e,r,"emailLink",n)}toJSON(){return{email:this._email,password:this._password,signInMethod:this.signInMethod,tenantId:this._tenantId}}static fromJSON(e){const r=typeof e=="string"?JSON.parse(e):e;if(r!=null&&r.email&&(r!=null&&r.password)){if(r.signInMethod==="password")return this._fromEmailAndPassword(r.email,r.password);if(r.signInMethod==="emailLink")return this._fromEmailAndCode(r.email,r.password,r.tenantId)}return null}async _getIdTokenResponse(e){switch(this.signInMethod){case"password":const r={returnSecureToken:!0,email:this._email,password:this._password,clientType:"CLIENT_TYPE_WEB"};return a2(e,r,"signInWithPassword",jR);case"emailLink":return kR(e,{email:this._email,oobCode:this._password});default:la(e,"internal-error")}}async _linkToIdToken(e,r){switch(this.signInMethod){case"password":const n={idToken:r,returnSecureToken:!0,email:this._email,password:this._password,clientType:"CLIENT_TYPE_WEB"};return a2(e,n,"signUpPassword",LR);case"emailLink":return DR(e,{idToken:r,email:this._email,oobCode:this._password});default:la(e,"internal-error")}}_getReauthenticationResolver(e){return this._getIdTokenResponse(e)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function md(t,e){return Up(t,"POST","/v1/accounts:signInWithIdp",Nl(t,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const RR="http://localhost";class Pc extends bb{constructor(){super(...arguments),this.pendingToken=null}static _fromParams(e){const r=new Pc(e.providerId,e.signInMethod);return e.idToken||e.accessToken?(e.idToken&&(r.idToken=e.idToken),e.accessToken&&(r.accessToken=e.accessToken),e.nonce&&!e.pendingToken&&(r.nonce=e.nonce),e.pendingToken&&(r.pendingToken=e.pendingToken)):e.oauthToken&&e.oauthTokenSecret?(r.accessToken=e.oauthToken,r.secret=e.oauthTokenSecret):la("argument-error"),r}toJSON(){return{idToken:this.idToken,accessToken:this.accessToken,secret:this.secret,nonce:this.nonce,pendingToken:this.pendingToken,providerId:this.providerId,signInMethod:this.signInMethod}}static fromJSON(e){const r=typeof e=="string"?JSON.parse(e):e,{providerId:n,signInMethod:s}=r,i=gb(r,["providerId","signInMethod"]);if(!n||!s)return null;const a=new Pc(n,s);return a.idToken=i.idToken||void 0,a.accessToken=i.accessToken||void 0,a.secret=i.secret,a.nonce=i.nonce,a.pendingToken=i.pendingToken||null,a}_getIdTokenResponse(e){const r=this.buildRequest();return md(e,r)}_linkToIdToken(e,r){const n=this.buildRequest();return n.idToken=r,md(e,n)}_getReauthenticationResolver(e){const r=this.buildRequest();return r.autoCreate=!1,md(e,r)}buildRequest(){const e={requestUri:RR,returnSecureToken:!0};if(this.pendingToken)e.pendingToken=this.pendingToken;else{const r={};this.idToken&&(r.id_token=this.idToken),this.accessToken&&(r.access_token=this.accessToken),this.secret&&(r.oauth_token_secret=this.secret),r.providerId=this.providerId,this.nonce&&!this.pendingToken&&(r.nonce=this.nonce),e.postBody=Fp(r)}return e}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function MR(t){switch(t){case"recoverEmail":return"RECOVER_EMAIL";case"resetPassword":return"PASSWORD_RESET";case"signIn":return"EMAIL_SIGNIN";case"verifyEmail":return"VERIFY_EMAIL";case"verifyAndChangeEmail":return"VERIFY_AND_CHANGE_EMAIL";case"revertSecondFactorAddition":return"REVERT_SECOND_FACTOR_ADDITION";default:return null}}function OR(t){const e=Xh(Jh(t)).link,r=e?Xh(Jh(e)).deep_link_id:null,n=Xh(Jh(t)).deep_link_id;return(n?Xh(Jh(n)).link:null)||n||r||e||t}class Bb{constructor(e){var r,n,s,i,a,o;const l=Xh(Jh(e)),c=(r=l.apiKey)!==null&&r!==void 0?r:null,u=(n=l.oobCode)!==null&&n!==void 0?n:null,f=MR((s=l.mode)!==null&&s!==void 0?s:null);Kt(c&&u&&f,"argument-error"),this.apiKey=c,this.operation=f,this.code=u,this.continueUrl=(i=l.continueUrl)!==null&&i!==void 0?i:null,this.languageCode=(a=l.languageCode)!==null&&a!==void 0?a:null,this.tenantId=(o=l.tenantId)!==null&&o!==void 0?o:null}static parseLink(e){const r=OR(e);try{return new Bb(r)}catch{return null}}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class qd{constructor(){this.providerId=qd.PROVIDER_ID}static credential(e,r){return rp._fromEmailAndPassword(e,r)}static credentialWithLink(e,r){const n=Bb.parseLink(r);return Kt(n,"argument-error"),rp._fromEmailAndCode(e,n.code,n.tenantId)}}qd.PROVIDER_ID="password";qd.EMAIL_PASSWORD_SIGN_IN_METHOD="password";qd.EMAIL_LINK_SIGN_IN_METHOD="emailLink";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class HF{constructor(e){this.providerId=e,this.defaultLanguageCode=null,this.customParameters={}}setDefaultLanguage(e){this.defaultLanguageCode=e}setCustomParameters(e){return this.customParameters=e,this}getCustomParameters(){return this.customParameters}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Pp extends HF{constructor(){super(...arguments),this.scopes=[]}addScope(e){return this.scopes.includes(e)||this.scopes.push(e),this}getScopes(){return[...this.scopes]}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class jA extends Pp{constructor(){super("facebook.com")}static credential(e){return Pc._fromParams({providerId:jA.PROVIDER_ID,signInMethod:jA.FACEBOOK_SIGN_IN_METHOD,accessToken:e})}static credentialFromResult(e){return jA.credentialFromTaggedObject(e)}static credentialFromError(e){return jA.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e||!("oauthAccessToken"in e)||!e.oauthAccessToken)return null;try{return jA.credential(e.oauthAccessToken)}catch{return null}}}jA.FACEBOOK_SIGN_IN_METHOD="facebook.com";jA.PROVIDER_ID="facebook.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class kA extends Pp{constructor(){super("google.com"),this.addScope("profile")}static credential(e,r){return Pc._fromParams({providerId:kA.PROVIDER_ID,signInMethod:kA.GOOGLE_SIGN_IN_METHOD,idToken:e,accessToken:r})}static credentialFromResult(e){return kA.credentialFromTaggedObject(e)}static credentialFromError(e){return kA.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e)return null;const{oauthIdToken:r,oauthAccessToken:n}=e;if(!r&&!n)return null;try{return kA.credential(r,n)}catch{return null}}}kA.GOOGLE_SIGN_IN_METHOD="google.com";kA.PROVIDER_ID="google.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class DA extends Pp{constructor(){super("github.com")}static credential(e){return Pc._fromParams({providerId:DA.PROVIDER_ID,signInMethod:DA.GITHUB_SIGN_IN_METHOD,accessToken:e})}static credentialFromResult(e){return DA.credentialFromTaggedObject(e)}static credentialFromError(e){return DA.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e||!("oauthAccessToken"in e)||!e.oauthAccessToken)return null;try{return DA.credential(e.oauthAccessToken)}catch{return null}}}DA.GITHUB_SIGN_IN_METHOD="github.com";DA.PROVIDER_ID="github.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class RA extends Pp{constructor(){super("twitter.com")}static credential(e,r){return Pc._fromParams({providerId:RA.PROVIDER_ID,signInMethod:RA.TWITTER_SIGN_IN_METHOD,oauthToken:e,oauthTokenSecret:r})}static credentialFromResult(e){return RA.credentialFromTaggedObject(e)}static credentialFromError(e){return RA.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e)return null;const{oauthAccessToken:r,oauthTokenSecret:n}=e;if(!r||!n)return null;try{return RA.credential(r,n)}catch{return null}}}RA.TWITTER_SIGN_IN_METHOD="twitter.com";RA.PROVIDER_ID="twitter.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function HR(t,e){return Up(t,"POST","/v1/accounts:signUp",Nl(t,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Qc{constructor(e){this.user=e.user,this.providerId=e.providerId,this._tokenResponse=e._tokenResponse,this.operationType=e.operationType}static async _fromIdTokenResponse(e,r,n,s=!1){const i=await Co._fromIdTokenResponse(e,n,s),a=U5(n);return new Qc({user:i,providerId:a,_tokenResponse:n,operationType:r})}static async _forOperation(e,r,n){await e._updateTokensIfNecessary(n,!0);const s=U5(n);return new Qc({user:e,providerId:s,_tokenResponse:n,operationType:r})}}function U5(t){return t.providerId?t.providerId:"phoneNumber"in t?"phone":null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class T0 extends qo{constructor(e,r,n,s){var i;super(r.code,r.message),this.operationType=n,this.user=s,Object.setPrototypeOf(this,T0.prototype),this.customData={appName:e.name,tenantId:(i=e.tenantId)!==null&&i!==void 0?i:void 0,_serverResponse:r.customData._serverResponse,operationType:n}}static _fromErrorAndOperation(e,r,n,s){return new T0(e,r,n,s)}}function VF(t,e,r,n){return(e==="reauthenticate"?r._getReauthenticationResolver(t):r._getIdTokenResponse(t)).catch(i=>{throw i.code==="auth/multi-factor-auth-required"?T0._fromErrorAndOperation(t,i,e,n):i})}async function VR(t,e,r=!1){const n=await tp(t,e._linkToIdToken(t.auth,await t.getIdToken()),r);return Qc._forOperation(t,"link",n)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function KR(t,e,r=!1){const{auth:n}=t;if(Qa(n.app))return Promise.reject(Fo(n));const s="reauthenticate";try{const i=await tp(t,VF(n,s,e,t),r);Kt(i.idToken,n,"internal-error");const a=yb(i.idToken);Kt(a,n,"internal-error");const{sub:o}=a;return Kt(t.uid===o,n,"user-mismatch"),Qc._forOperation(t,s,i)}catch(i){throw(i==null?void 0:i.code)==="auth/user-not-found"&&la(n,"user-mismatch"),i}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function KF(t,e,r=!1){if(Qa(t.app))return Promise.reject(Fo(t));const n="signIn",s=await VF(t,n,e),i=await Qc._fromIdTokenResponse(t,n,s);return r||await t._updateCurrentUser(i.user),i}async function qR(t,e){return KF(Vc(t),e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function qF(t){const e=Vc(t);e._getPasswordPolicyInternal()&&await e._updatePasswordPolicy()}async function GR(t,e,r){if(Qa(t.app))return Promise.reject(Fo(t));const n=Vc(t),a=await a2(n,{returnSecureToken:!0,email:e,password:r,clientType:"CLIENT_TYPE_WEB"},"signUpPassword",HR).catch(l=>{throw l.code==="auth/password-does-not-meet-requirements"&&qF(t),l}),o=await Qc._fromIdTokenResponse(n,"signIn",a);return await n._updateCurrentUser(o.user),o}function zR(t,e,r){return Qa(t.app)?Promise.reject(Fo(t)):qR(dn(t),qd.credential(e,r)).catch(async n=>{throw n.code==="auth/password-does-not-meet-requirements"&&qF(t),n})}function $R(t,e,r,n){return dn(t).onIdTokenChanged(e,r,n)}function WR(t,e,r){return dn(t).beforeAuthStateChanged(e,r)}function GF(t,e,r,n){return dn(t).onAuthStateChanged(e,r,n)}function zF(t){return dn(t).signOut()}const U0="__sak";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class $F{constructor(e,r){this.storageRetriever=e,this.type=r}_isAvailable(){try{return this.storage?(this.storage.setItem(U0,"1"),this.storage.removeItem(U0),Promise.resolve(!0)):Promise.resolve(!1)}catch{return Promise.resolve(!1)}}_set(e,r){return this.storage.setItem(e,JSON.stringify(r)),Promise.resolve()}_get(e){const r=this.storage.getItem(e);return Promise.resolve(r?JSON.parse(r):null)}_remove(e){return this.storage.removeItem(e),Promise.resolve()}get storage(){return this.storageRetriever()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const XR=1e3,JR=10;class WF extends $F{constructor(){super(()=>window.localStorage,"LOCAL"),this.boundEventHandler=(e,r)=>this.onStorageEvent(e,r),this.listeners={},this.localCache={},this.pollTimer=null,this.fallbackToPolling=DF(),this._shouldAllowMigration=!0}forAllChangedKeys(e){for(const r of Object.keys(this.listeners)){const n=this.storage.getItem(r),s=this.localCache[r];n!==s&&e(r,s,n)}}onStorageEvent(e,r=!1){if(!e.key){this.forAllChangedKeys((a,o,l)=>{this.notifyListeners(a,l)});return}const n=e.key;r?this.detachListener():this.stopPolling();const s=()=>{const a=this.storage.getItem(n);!r&&this.localCache[n]===a||this.notifyListeners(n,a)},i=this.storage.getItem(n);gR()&&i!==e.newValue&&e.newValue!==e.oldValue?setTimeout(s,JR):s()}notifyListeners(e,r){this.localCache[e]=r;const n=this.listeners[e];if(n)for(const s of Array.from(n))s(r&&JSON.parse(r))}startPolling(){this.stopPolling(),this.pollTimer=setInterval(()=>{this.forAllChangedKeys((e,r,n)=>{this.onStorageEvent(new StorageEvent("storage",{key:e,oldValue:r,newValue:n}),!0)})},XR)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}attachListener(){window.addEventListener("storage",this.boundEventHandler)}detachListener(){window.removeEventListener("storage",this.boundEventHandler)}_addListener(e,r){Object.keys(this.listeners).length===0&&(this.fallbackToPolling?this.startPolling():this.attachListener()),this.listeners[e]||(this.listeners[e]=new Set,this.localCache[e]=this.storage.getItem(e)),this.listeners[e].add(r)}_removeListener(e,r){this.listeners[e]&&(this.listeners[e].delete(r),this.listeners[e].size===0&&delete this.listeners[e]),Object.keys(this.listeners).length===0&&(this.detachListener(),this.stopPolling())}async _set(e,r){await super._set(e,r),this.localCache[e]=JSON.stringify(r)}async _get(e){const r=await super._get(e);return this.localCache[e]=JSON.stringify(r),r}async _remove(e){await super._remove(e),delete this.localCache[e]}}WF.type="LOCAL";const YR=WF;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class XF extends $F{constructor(){super(()=>window.sessionStorage,"SESSION")}_addListener(e,r){}_removeListener(e,r){}}XF.type="SESSION";const JF=XF;/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ZR(t){return Promise.all(t.map(async e=>{try{return{fulfilled:!0,value:await e}}catch(r){return{fulfilled:!1,reason:r}}}))}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Iv{constructor(e){this.eventTarget=e,this.handlersMap={},this.boundEventHandler=this.handleEvent.bind(this)}static _getInstance(e){const r=this.receivers.find(s=>s.isListeningto(e));if(r)return r;const n=new Iv(e);return this.receivers.push(n),n}isListeningto(e){return this.eventTarget===e}async handleEvent(e){const r=e,{eventId:n,eventType:s,data:i}=r.data,a=this.handlersMap[s];if(!(a!=null&&a.size))return;r.ports[0].postMessage({status:"ack",eventId:n,eventType:s});const o=Array.from(a).map(async c=>c(r.origin,i)),l=await ZR(o);r.ports[0].postMessage({status:"done",eventId:n,eventType:s,response:l})}_subscribe(e,r){Object.keys(this.handlersMap).length===0&&this.eventTarget.addEventListener("message",this.boundEventHandler),this.handlersMap[e]||(this.handlersMap[e]=new Set),this.handlersMap[e].add(r)}_unsubscribe(e,r){this.handlersMap[e]&&r&&this.handlersMap[e].delete(r),(!r||this.handlersMap[e].size===0)&&delete this.handlersMap[e],Object.keys(this.handlersMap).length===0&&this.eventTarget.removeEventListener("message",this.boundEventHandler)}}Iv.receivers=[];/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Cb(t="",e=10){let r="";for(let n=0;n<e;n++)r+=Math.floor(Math.random()*10);return t+r}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class e6{constructor(e){this.target=e,this.handlers=new Set}removeMessageHandler(e){e.messageChannel&&(e.messageChannel.port1.removeEventListener("message",e.onMessage),e.messageChannel.port1.close()),this.handlers.delete(e)}async _send(e,r,n=50){const s=typeof MessageChannel<"u"?new MessageChannel:null;if(!s)throw new Error("connection_unavailable");let i,a;return new Promise((o,l)=>{const c=Cb("",20);s.port1.start();const u=setTimeout(()=>{l(new Error("unsupported_event"))},n);a={messageChannel:s,onMessage(f){const p=f;if(p.data.eventId===c)switch(p.data.status){case"ack":clearTimeout(u),i=setTimeout(()=>{l(new Error("timeout"))},3e3);break;case"done":clearTimeout(i),o(p.data.response);break;default:clearTimeout(u),clearTimeout(i),l(new Error("invalid_response"));break}}},this.handlers.add(a),s.port1.addEventListener("message",a.onMessage),this.target.postMessage({eventType:e,eventId:c,data:r},[s.port2])}).finally(()=>{a&&this.removeMessageHandler(a)})}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Oa(){return window}function t6(t){Oa().location.href=t}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function YF(){return typeof Oa().WorkerGlobalScope<"u"&&typeof Oa().importScripts=="function"}async function r6(){if(!(navigator!=null&&navigator.serviceWorker))return null;try{return(await navigator.serviceWorker.ready).active}catch{return null}}function n6(){var t;return((t=navigator==null?void 0:navigator.serviceWorker)===null||t===void 0?void 0:t.controller)||null}function s6(){return YF()?self:null}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ZF="firebaseLocalStorageDb",i6=1,P0="firebaseLocalStorage",e4="fbase_key";class Qp{constructor(e){this.request=e}toPromise(){return new Promise((e,r)=>{this.request.addEventListener("success",()=>{e(this.request.result)}),this.request.addEventListener("error",()=>{r(this.request.error)})})}}function Sv(t,e){return t.transaction([P0],e?"readwrite":"readonly").objectStore(P0)}function a6(){const t=indexedDB.deleteDatabase(ZF);return new Qp(t).toPromise()}function o2(){const t=indexedDB.open(ZF,i6);return new Promise((e,r)=>{t.addEventListener("error",()=>{r(t.error)}),t.addEventListener("upgradeneeded",()=>{const n=t.result;try{n.createObjectStore(P0,{keyPath:e4})}catch(s){r(s)}}),t.addEventListener("success",async()=>{const n=t.result;n.objectStoreNames.contains(P0)?e(n):(n.close(),await a6(),e(await o2()))})})}async function P5(t,e,r){const n=Sv(t,!0).put({[e4]:e,value:r});return new Qp(n).toPromise()}async function o6(t,e){const r=Sv(t,!1).get(e),n=await new Qp(r).toPromise();return n===void 0?null:n.value}function Q5(t,e){const r=Sv(t,!0).delete(e);return new Qp(r).toPromise()}const A6=800,l6=3;class t4{constructor(){this.type="LOCAL",this._shouldAllowMigration=!0,this.listeners={},this.localCache={},this.pollTimer=null,this.pendingWrites=0,this.receiver=null,this.sender=null,this.serviceWorkerReceiverAvailable=!1,this.activeServiceWorker=null,this._workerInitializationPromise=this.initializeServiceWorkerMessaging().then(()=>{},()=>{})}async _openDb(){return this.db?this.db:(this.db=await o2(),this.db)}async _withRetries(e){let r=0;for(;;)try{const n=await this._openDb();return await e(n)}catch(n){if(r++>l6)throw n;this.db&&(this.db.close(),this.db=void 0)}}async initializeServiceWorkerMessaging(){return YF()?this.initializeReceiver():this.initializeSender()}async initializeReceiver(){this.receiver=Iv._getInstance(s6()),this.receiver._subscribe("keyChanged",async(e,r)=>({keyProcessed:(await this._poll()).includes(r.key)})),this.receiver._subscribe("ping",async(e,r)=>["keyChanged"])}async initializeSender(){var e,r;if(this.activeServiceWorker=await r6(),!this.activeServiceWorker)return;this.sender=new e6(this.activeServiceWorker);const n=await this.sender._send("ping",{},800);n&&!((e=n[0])===null||e===void 0)&&e.fulfilled&&!((r=n[0])===null||r===void 0)&&r.value.includes("keyChanged")&&(this.serviceWorkerReceiverAvailable=!0)}async notifyServiceWorker(e){if(!(!this.sender||!this.activeServiceWorker||n6()!==this.activeServiceWorker))try{await this.sender._send("keyChanged",{key:e},this.serviceWorkerReceiverAvailable?800:50)}catch{}}async _isAvailable(){try{if(!indexedDB)return!1;const e=await o2();return await P5(e,U0,"1"),await Q5(e,U0),!0}catch{}return!1}async _withPendingWrite(e){this.pendingWrites++;try{await e()}finally{this.pendingWrites--}}async _set(e,r){return this._withPendingWrite(async()=>(await this._withRetries(n=>P5(n,e,r)),this.localCache[e]=r,this.notifyServiceWorker(e)))}async _get(e){const r=await this._withRetries(n=>o6(n,e));return this.localCache[e]=r,r}async _remove(e){return this._withPendingWrite(async()=>(await this._withRetries(r=>Q5(r,e)),delete this.localCache[e],this.notifyServiceWorker(e)))}async _poll(){const e=await this._withRetries(s=>{const i=Sv(s,!1).getAll();return new Qp(i).toPromise()});if(!e)return[];if(this.pendingWrites!==0)return[];const r=[],n=new Set;if(e.length!==0)for(const{fbase_key:s,value:i}of e)n.add(s),JSON.stringify(this.localCache[s])!==JSON.stringify(i)&&(this.notifyListeners(s,i),r.push(s));for(const s of Object.keys(this.localCache))this.localCache[s]&&!n.has(s)&&(this.notifyListeners(s,null),r.push(s));return r}notifyListeners(e,r){this.localCache[e]=r;const n=this.listeners[e];if(n)for(const s of Array.from(n))s(r)}startPolling(){this.stopPolling(),this.pollTimer=setInterval(async()=>this._poll(),A6)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}_addListener(e,r){Object.keys(this.listeners).length===0&&this.startPolling(),this.listeners[e]||(this.listeners[e]=new Set,this._get(e)),this.listeners[e].add(r)}_removeListener(e,r){this.listeners[e]&&(this.listeners[e].delete(r),this.listeners[e].size===0&&delete this.listeners[e]),Object.keys(this.listeners).length===0&&this.stopPolling()}}t4.type="LOCAL";const c6=t4;new Tp(3e4,6e4);/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function u6(t,e){return e?Eo(e):(Kt(t._popupRedirectResolver,t,"argument-error"),t._popupRedirectResolver)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Eb extends bb{constructor(e){super("custom","custom"),this.params=e}_getIdTokenResponse(e){return md(e,this._buildIdpRequest())}_linkToIdToken(e,r){return md(e,this._buildIdpRequest(r))}_getReauthenticationResolver(e){return md(e,this._buildIdpRequest())}_buildIdpRequest(e){const r={requestUri:this.params.requestUri,sessionId:this.params.sessionId,postBody:this.params.postBody,tenantId:this.params.tenantId,pendingToken:this.params.pendingToken,returnSecureToken:!0,returnIdpCredential:!0};return e&&(r.idToken=e),r}}function d6(t){return KF(t.auth,new Eb(t),t.bypassAuthState)}function h6(t){const{auth:e,user:r}=t;return Kt(r,e,"internal-error"),KR(r,new Eb(t),t.bypassAuthState)}async function f6(t){const{auth:e,user:r}=t;return Kt(r,e,"internal-error"),VR(r,new Eb(t),t.bypassAuthState)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class r4{constructor(e,r,n,s,i=!1){this.auth=e,this.resolver=n,this.user=s,this.bypassAuthState=i,this.pendingPromise=null,this.eventManager=null,this.filter=Array.isArray(r)?r:[r]}execute(){return new Promise(async(e,r)=>{this.pendingPromise={resolve:e,reject:r};try{this.eventManager=await this.resolver._initialize(this.auth),await this.onExecution(),this.eventManager.registerConsumer(this)}catch(n){this.reject(n)}})}async onAuthEvent(e){const{urlResponse:r,sessionId:n,postBody:s,tenantId:i,error:a,type:o}=e;if(a){this.reject(a);return}const l={auth:this.auth,requestUri:r,sessionId:n,tenantId:i||void 0,postBody:s||void 0,user:this.user,bypassAuthState:this.bypassAuthState};try{this.resolve(await this.getIdpTask(o)(l))}catch(c){this.reject(c)}}onError(e){this.reject(e)}getIdpTask(e){switch(e){case"signInViaPopup":case"signInViaRedirect":return d6;case"linkViaPopup":case"linkViaRedirect":return f6;case"reauthViaPopup":case"reauthViaRedirect":return h6;default:la(this.auth,"internal-error")}}resolve(e){Oo(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.resolve(e),this.unregisterAndCleanUp()}reject(e){Oo(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.reject(e),this.unregisterAndCleanUp()}unregisterAndCleanUp(){this.eventManager&&this.eventManager.unregisterConsumer(this),this.pendingPromise=null,this.cleanUp()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const p6=new Tp(2e3,1e4);class ad extends r4{constructor(e,r,n,s,i){super(e,r,s,i),this.provider=n,this.authWindow=null,this.pollId=null,ad.currentPopupAction&&ad.currentPopupAction.cancel(),ad.currentPopupAction=this}async executeNotNull(){const e=await this.execute();return Kt(e,this.auth,"internal-error"),e}async onExecution(){Oo(this.filter.length===1,"Popup operations only handle one event");const e=Cb();this.authWindow=await this.resolver._openPopup(this.auth,this.provider,this.filter[0],e),this.authWindow.associatedEvent=e,this.resolver._originValidation(this.auth).catch(r=>{this.reject(r)}),this.resolver._isIframeWebStorageSupported(this.auth,r=>{r||this.reject(Ma(this.auth,"web-storage-unsupported"))}),this.pollUserCancellation()}get eventId(){var e;return((e=this.authWindow)===null||e===void 0?void 0:e.associatedEvent)||null}cancel(){this.reject(Ma(this.auth,"cancelled-popup-request"))}cleanUp(){this.authWindow&&this.authWindow.close(),this.pollId&&window.clearTimeout(this.pollId),this.authWindow=null,this.pollId=null,ad.currentPopupAction=null}pollUserCancellation(){const e=()=>{var r,n;if(!((n=(r=this.authWindow)===null||r===void 0?void 0:r.window)===null||n===void 0)&&n.closed){this.pollId=window.setTimeout(()=>{this.pollId=null,this.reject(Ma(this.auth,"popup-closed-by-user"))},8e3);return}this.pollId=window.setTimeout(e,p6.get())};e()}}ad.currentPopupAction=null;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const m6="pendingRedirect",Og=new Map;class g6 extends r4{constructor(e,r,n=!1){super(e,["signInViaRedirect","linkViaRedirect","reauthViaRedirect","unknown"],r,void 0,n),this.eventId=null}async execute(){let e=Og.get(this.auth._key());if(!e){try{const n=await v6(this.resolver,this.auth)?await super.execute():null;e=()=>Promise.resolve(n)}catch(r){e=()=>Promise.reject(r)}Og.set(this.auth._key(),e)}return this.bypassAuthState||Og.set(this.auth._key(),()=>Promise.resolve(null)),e()}async onAuthEvent(e){if(e.type==="signInViaRedirect")return super.onAuthEvent(e);if(e.type==="unknown"){this.resolve(null);return}if(e.eventId){const r=await this.auth._redirectUserForId(e.eventId);if(r)return this.user=r,super.onAuthEvent(e);this.resolve(null)}}async onExecution(){}cleanUp(){}}async function v6(t,e){const r=x6(e),n=y6(t);if(!await n._isAvailable())return!1;const s=await n._get(r)==="true";return await n._remove(r),s}function w6(t,e){Og.set(t._key(),e)}function y6(t){return Eo(t._redirectPersistence)}function x6(t){return Mg(m6,t.config.apiKey,t.name)}async function b6(t,e,r=!1){if(Qa(t.app))return Promise.reject(Fo(t));const n=Vc(t),s=u6(n,e),a=await new g6(n,s,r).execute();return a&&!r&&(delete a.user._redirectEventId,await n._persistUserIfCurrent(a.user),await n._setRedirectUser(null,e)),a}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const B6=10*60*1e3;class C6{constructor(e){this.auth=e,this.cachedEventUids=new Set,this.consumers=new Set,this.queuedRedirectEvent=null,this.hasHandledPotentialRedirect=!1,this.lastProcessedEventTime=Date.now()}registerConsumer(e){this.consumers.add(e),this.queuedRedirectEvent&&this.isEventForConsumer(this.queuedRedirectEvent,e)&&(this.sendToConsumer(this.queuedRedirectEvent,e),this.saveEventToCache(this.queuedRedirectEvent),this.queuedRedirectEvent=null)}unregisterConsumer(e){this.consumers.delete(e)}onEvent(e){if(this.hasEventBeenHandled(e))return!1;let r=!1;return this.consumers.forEach(n=>{this.isEventForConsumer(e,n)&&(r=!0,this.sendToConsumer(e,n),this.saveEventToCache(e))}),this.hasHandledPotentialRedirect||!E6(e)||(this.hasHandledPotentialRedirect=!0,r||(this.queuedRedirectEvent=e,r=!0)),r}sendToConsumer(e,r){var n;if(e.error&&!n4(e)){const s=((n=e.error.code)===null||n===void 0?void 0:n.split("auth/")[1])||"internal-error";r.onError(Ma(this.auth,s))}else r.onAuthEvent(e)}isEventForConsumer(e,r){const n=r.eventId===null||!!e.eventId&&e.eventId===r.eventId;return r.filter.includes(e.type)&&n}hasEventBeenHandled(e){return Date.now()-this.lastProcessedEventTime>=B6&&this.cachedEventUids.clear(),this.cachedEventUids.has(L5(e))}saveEventToCache(e){this.cachedEventUids.add(L5(e)),this.lastProcessedEventTime=Date.now()}}function L5(t){return[t.type,t.eventId,t.sessionId,t.tenantId].filter(e=>e).join("-")}function n4({type:t,error:e}){return t==="unknown"&&(e==null?void 0:e.code)==="auth/no-auth-event"}function E6(t){switch(t.type){case"signInViaRedirect":case"linkViaRedirect":case"reauthViaRedirect":return!0;case"unknown":return n4(t);default:return!1}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function _6(t,e={}){return Il(t,"GET","/v1/projects",e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const N6=/^\d{1,3}\.\d{1,3}\.\d{1,3}\.\d{1,3}$/,I6=/^https?/;async function S6(t){if(t.config.emulator)return;const{authorizedDomains:e}=await _6(t);for(const r of e)try{if(F6(r))return}catch{}la(t,"unauthorized-domain")}function F6(t){const e=s2(),{protocol:r,hostname:n}=new URL(e);if(t.startsWith("chrome-extension://")){const a=new URL(t);return a.hostname===""&&n===""?r==="chrome-extension:"&&t.replace("chrome-extension://","")===e.replace("chrome-extension://",""):r==="chrome-extension:"&&a.hostname===n}if(!I6.test(r))return!1;if(N6.test(t))return n===t;const s=t.replace(/\./g,"\\.");return new RegExp("^(.+\\."+s+"|"+s+")$","i").test(n)}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const T6=new Tp(3e4,6e4);function j5(){const t=Oa().___jsl;if(t!=null&&t.H){for(const e of Object.keys(t.H))if(t.H[e].r=t.H[e].r||[],t.H[e].L=t.H[e].L||[],t.H[e].r=[...t.H[e].L],t.CP)for(let r=0;r<t.CP.length;r++)t.CP[r]=null}}function U6(t){return new Promise((e,r)=>{var n,s,i;function a(){j5(),gapi.load("gapi.iframes",{callback:()=>{e(gapi.iframes.getContext())},ontimeout:()=>{j5(),r(Ma(t,"network-request-failed"))},timeout:T6.get()})}if(!((s=(n=Oa().gapi)===null||n===void 0?void 0:n.iframes)===null||s===void 0)&&s.Iframe)e(gapi.iframes.getContext());else if(!((i=Oa().gapi)===null||i===void 0)&&i.load)a();else{const o=_R("iframefcb");return Oa()[o]=()=>{gapi.load?a():r(Ma(t,"network-request-failed"))},MF(`${ER()}?onload=${o}`).catch(l=>r(l))}}).catch(e=>{throw Hg=null,e})}let Hg=null;function P6(t){return Hg=Hg||U6(t),Hg}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Q6=new Tp(5e3,15e3),L6="__/auth/iframe",j6="emulator/auth/iframe",k6={style:{position:"absolute",top:"-100px",width:"1px",height:"1px"},"aria-hidden":"true",tabindex:"-1"},D6=new Map([["identitytoolkit.googleapis.com","p"],["staging-identitytoolkit.sandbox.googleapis.com","s"],["test-identitytoolkit.sandbox.googleapis.com","t"]]);function R6(t){const e=t.config;Kt(e.authDomain,t,"auth-domain-config-required");const r=e.emulator?wb(e,j6):`https://${t.config.authDomain}/${L6}`,n={apiKey:e.apiKey,appName:t.name,v:Kd},s=D6.get(t.config.apiHost);s&&(n.eid=s);const i=t._getFrameworks();return i.length&&(n.fw=i.join(",")),`${r}?${Fp(n).slice(1)}`}async function M6(t){const e=await P6(t),r=Oa().gapi;return Kt(r,t,"internal-error"),e.open({where:document.body,url:R6(t),messageHandlersFilter:r.iframes.CROSS_ORIGIN_IFRAMES_FILTER,attributes:k6,dontclear:!0},n=>new Promise(async(s,i)=>{await n.restyle({setHideOnLeave:!1});const a=Ma(t,"network-request-failed"),o=Oa().setTimeout(()=>{i(a)},Q6.get());function l(){Oa().clearTimeout(o),s(n)}n.ping(l).then(l,()=>{i(a)})}))}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const O6={location:"yes",resizable:"yes",statusbar:"yes",toolbar:"no"},H6=500,V6=600,K6="_blank",q6="http://localhost";class k5{constructor(e){this.window=e,this.associatedEvent=null}close(){if(this.window)try{this.window.close()}catch{}}}function G6(t,e,r,n=H6,s=V6){const i=Math.max((window.screen.availHeight-s)/2,0).toString(),a=Math.max((window.screen.availWidth-n)/2,0).toString();let o="";const l=Object.assign(Object.assign({},O6),{width:n.toString(),height:s.toString(),top:i,left:a}),c=jn().toLowerCase();r&&(o=PF(c)?K6:r),TF(c)&&(e=e||q6,l.scrollbars="yes");const u=Object.entries(l).reduce((p,[m,b])=>`${p}${m}=${b},`,"");if(mR(c)&&o!=="_self")return z6(e||"",o),new k5(null);const f=window.open(e||"",o,u);Kt(f,t,"popup-blocked");try{f.focus()}catch{}return new k5(f)}function z6(t,e){const r=document.createElement("a");r.href=t,r.target=e;const n=document.createEvent("MouseEvent");n.initMouseEvent("click",!0,!0,window,1,0,0,0,0,!1,!1,!1,!1,1,null),r.dispatchEvent(n)}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const $6="__/auth/handler",W6="emulator/auth/handler",X6=encodeURIComponent("fac");async function D5(t,e,r,n,s,i){Kt(t.config.authDomain,t,"auth-domain-config-required"),Kt(t.config.apiKey,t,"invalid-api-key");const a={apiKey:t.config.apiKey,appName:t.name,authType:r,redirectUrl:n,v:Kd,eventId:s};if(e instanceof HF){e.setDefaultLanguage(t.languageCode),a.providerId=e.providerId||"",Mk(e.getCustomParameters())||(a.customParameters=JSON.stringify(e.getCustomParameters()));for(const[u,f]of Object.entries({}))a[u]=f}if(e instanceof Pp){const u=e.getScopes().filter(f=>f!=="");u.length>0&&(a.scopes=u.join(","))}t.tenantId&&(a.tid=t.tenantId);const o=a;for(const u of Object.keys(o))o[u]===void 0&&delete o[u];const l=await t._getAppCheckToken(),c=l?`#${X6}=${encodeURIComponent(l)}`:"";return`${J6(t)}?${Fp(o).slice(1)}${c}`}function J6({config:t}){return t.emulator?wb(t,W6):`https://${t.authDomain}/${$6}`}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const my="webStorageSupport";class Y6{constructor(){this.eventManagers={},this.iframes={},this.originValidationPromises={},this._redirectPersistence=JF,this._completeRedirectFn=b6,this._overrideRedirectResult=w6}async _openPopup(e,r,n,s){var i;Oo((i=this.eventManagers[e._key()])===null||i===void 0?void 0:i.manager,"_initialize() not called before _openPopup()");const a=await D5(e,r,n,s2(),s);return G6(e,a,Cb())}async _openRedirect(e,r,n,s){await this._originValidation(e);const i=await D5(e,r,n,s2(),s);return t6(i),new Promise(()=>{})}_initialize(e){const r=e._key();if(this.eventManagers[r]){const{manager:s,promise:i}=this.eventManagers[r];return s?Promise.resolve(s):(Oo(i,"If manager is not set, promise should be"),i)}const n=this.initAndGetManager(e);return this.eventManagers[r]={promise:n},n.catch(()=>{delete this.eventManagers[r]}),n}async initAndGetManager(e){const r=await M6(e),n=new C6(e);return r.register("authEvent",s=>(Kt(s==null?void 0:s.authEvent,e,"invalid-auth-event"),{status:n.onEvent(s.authEvent)?"ACK":"ERROR"}),gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER),this.eventManagers[e._key()]={manager:n},this.iframes[e._key()]=r,n}_isIframeWebStorageSupported(e,r){this.iframes[e._key()].send(my,{type:my},s=>{var i;const a=(i=s==null?void 0:s[0])===null||i===void 0?void 0:i[my];a!==void 0&&r(!!a),la(e,"internal-error")},gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER)}_originValidation(e){const r=e._key();return this.originValidationPromises[r]||(this.originValidationPromises[r]=S6(e)),this.originValidationPromises[r]}get _shouldInitProactively(){return DF()||UF()||xb()}}const Z6=Y6;var R5="@firebase/auth",M5="1.7.9";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class eM{constructor(e){this.auth=e,this.internalListeners=new Map}getUid(){var e;return this.assertAuthConfigured(),((e=this.auth.currentUser)===null||e===void 0?void 0:e.uid)||null}async getToken(e){return this.assertAuthConfigured(),await this.auth._initializationPromise,this.auth.currentUser?{accessToken:await this.auth.currentUser.getIdToken(e)}:null}addAuthTokenListener(e){if(this.assertAuthConfigured(),this.internalListeners.has(e))return;const r=this.auth.onIdTokenChanged(n=>{e((n==null?void 0:n.stsTokenManager.accessToken)||null)});this.internalListeners.set(e,r),this.updateProactiveRefresh()}removeAuthTokenListener(e){this.assertAuthConfigured();const r=this.internalListeners.get(e);r&&(this.internalListeners.delete(e),r(),this.updateProactiveRefresh())}assertAuthConfigured(){Kt(this.auth._initializationPromise,"dependent-sdk-initialized-before-auth")}updateProactiveRefresh(){this.internalListeners.size>0?this.auth._startProactiveRefresh():this.auth._stopProactiveRefresh()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function tM(t){switch(t){case"Node":return"node";case"ReactNative":return"rn";case"Worker":return"webworker";case"Cordova":return"cordova";case"WebExtension":return"web-extension";default:return}}function rM(t){Id(new Uc("auth",(e,{options:r})=>{const n=e.getProvider("app").getImmediate(),s=e.getProvider("heartbeat"),i=e.getProvider("app-check-internal"),{apiKey:a,authDomain:o}=n.options;Kt(a&&!a.includes(":"),"invalid-api-key",{appName:n.name});const l={apiKey:a,authDomain:o,clientPlatform:t,apiHost:"identitytoolkit.googleapis.com",tokenApiHost:"securetoken.googleapis.com",apiScheme:"https",sdkClientVersion:RF(t)},c=new bR(n,s,i,l);return TR(c,r),c},"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback((e,r,n)=>{e.getProvider("auth-internal").initialize()})),Id(new Uc("auth-internal",e=>{const r=Vc(e.getProvider("auth").getImmediate());return(n=>new eM(n))(r)},"PRIVATE").setInstantiationMode("EXPLICIT")),al(R5,M5,tM(t)),al(R5,M5,"esm2017")}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const nM=5*60,sM=pF("authIdTokenMaxAge")||nM;let O5=null;const iM=t=>async e=>{const r=e&&await e.getIdTokenResult(),n=r&&(new Date().getTime()-Date.parse(r.issuedAtTime))/1e3;if(n&&n>sM)return;const s=r==null?void 0:r.token;O5!==s&&(O5=s,await fetch(t,{method:s?"POST":"DELETE",headers:s?{Authorization:`Bearer ${s}`}:{}}))};function s4(t=mb()){const e=fb(t,"auth");if(e.isInitialized())return e.getImmediate();const r=FR(t,{popupRedirectResolver:Z6,persistence:[c6,YR,JF]}),n=pF("authTokenSyncURL");if(n&&typeof isSecureContext=="boolean"&&isSecureContext){const i=new URL(n,location.origin);if(location.origin===i.origin){const a=iM(i.toString());WR(r,a,()=>a(r.currentUser)),$R(r,o=>a(o))}}const s=hF("auth");return s&&UR(r,`http://${s}`),r}function aM(){var t,e;return(e=(t=document.getElementsByTagName("head"))===null||t===void 0?void 0:t[0])!==null&&e!==void 0?e:document}BR({loadJS(t){return new Promise((e,r)=>{const n=document.createElement("script");n.setAttribute("src",t),n.onload=e,n.onerror=s=>{const i=Ma("internal-error");i.customData=s,r(i)},n.type="text/javascript",n.charset="UTF-8",aM().appendChild(n)})},gapiScript:"https://apis.google.com/js/api.js",recaptchaV2Script:"https://www.google.com/recaptcha/api.js",recaptchaEnterpriseScript:"https://www.google.com/recaptcha/enterprise.js?render="});rM("Browser");var oM="firebase",AM="10.14.1";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */al(oM,AM,"app");var H5=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};/** @license
Copyright The Closure Library Authors.
SPDX-License-Identifier: Apache-2.0
*/var yc,i4;(function(){var t;/** @license

 Copyright The Closure Library Authors.
 SPDX-License-Identifier: Apache-2.0
*/function e(I,E){function L(){}L.prototype=E.prototype,I.D=E.prototype,I.prototype=new L,I.prototype.constructor=I,I.C=function(D,N,T){for(var F=Array(arguments.length-2),ee=2;ee<arguments.length;ee++)F[ee-2]=arguments[ee];return E.prototype[N].apply(D,F)}}function r(){this.blockSize=-1}function n(){this.blockSize=-1,this.blockSize=64,this.g=Array(4),this.B=Array(this.blockSize),this.o=this.h=0,this.s()}e(n,r),n.prototype.s=function(){this.g[0]=1732584193,this.g[1]=4023233417,this.g[2]=2562383102,this.g[3]=271733878,this.o=this.h=0};function s(I,E,L){L||(L=0);var D=Array(16);if(typeof E=="string")for(var N=0;16>N;++N)D[N]=E.charCodeAt(L++)|E.charCodeAt(L++)<<8|E.charCodeAt(L++)<<16|E.charCodeAt(L++)<<24;else for(N=0;16>N;++N)D[N]=E[L++]|E[L++]<<8|E[L++]<<16|E[L++]<<24;E=I.g[0],L=I.g[1],N=I.g[2];var T=I.g[3],F=E+(T^L&(N^T))+D[0]+3614090360&4294967295;E=L+(F<<7&4294967295|F>>>25),F=T+(N^E&(L^N))+D[1]+3905402710&4294967295,T=E+(F<<12&4294967295|F>>>20),F=N+(L^T&(E^L))+D[2]+606105819&4294967295,N=T+(F<<17&4294967295|F>>>15),F=L+(E^N&(T^E))+D[3]+3250441966&4294967295,L=N+(F<<22&4294967295|F>>>10),F=E+(T^L&(N^T))+D[4]+4118548399&4294967295,E=L+(F<<7&4294967295|F>>>25),F=T+(N^E&(L^N))+D[5]+1200080426&4294967295,T=E+(F<<12&4294967295|F>>>20),F=N+(L^T&(E^L))+D[6]+2821735955&4294967295,N=T+(F<<17&4294967295|F>>>15),F=L+(E^N&(T^E))+D[7]+4249261313&4294967295,L=N+(F<<22&4294967295|F>>>10),F=E+(T^L&(N^T))+D[8]+1770035416&4294967295,E=L+(F<<7&4294967295|F>>>25),F=T+(N^E&(L^N))+D[9]+2336552879&4294967295,T=E+(F<<12&4294967295|F>>>20),F=N+(L^T&(E^L))+D[10]+4294925233&4294967295,N=T+(F<<17&4294967295|F>>>15),F=L+(E^N&(T^E))+D[11]+2304563134&4294967295,L=N+(F<<22&4294967295|F>>>10),F=E+(T^L&(N^T))+D[12]+1804603682&4294967295,E=L+(F<<7&4294967295|F>>>25),F=T+(N^E&(L^N))+D[13]+4254626195&4294967295,T=E+(F<<12&4294967295|F>>>20),F=N+(L^T&(E^L))+D[14]+2792965006&4294967295,N=T+(F<<17&4294967295|F>>>15),F=L+(E^N&(T^E))+D[15]+1236535329&4294967295,L=N+(F<<22&4294967295|F>>>10),F=E+(N^T&(L^N))+D[1]+4129170786&4294967295,E=L+(F<<5&4294967295|F>>>27),F=T+(L^N&(E^L))+D[6]+3225465664&4294967295,T=E+(F<<9&4294967295|F>>>23),F=N+(E^L&(T^E))+D[11]+643717713&4294967295,N=T+(F<<14&4294967295|F>>>18),F=L+(T^E&(N^T))+D[0]+3921069994&4294967295,L=N+(F<<20&4294967295|F>>>12),F=E+(N^T&(L^N))+D[5]+3593408605&4294967295,E=L+(F<<5&4294967295|F>>>27),F=T+(L^N&(E^L))+D[10]+38016083&4294967295,T=E+(F<<9&4294967295|F>>>23),F=N+(E^L&(T^E))+D[15]+3634488961&4294967295,N=T+(F<<14&4294967295|F>>>18),F=L+(T^E&(N^T))+D[4]+3889429448&4294967295,L=N+(F<<20&4294967295|F>>>12),F=E+(N^T&(L^N))+D[9]+568446438&4294967295,E=L+(F<<5&4294967295|F>>>27),F=T+(L^N&(E^L))+D[14]+3275163606&4294967295,T=E+(F<<9&4294967295|F>>>23),F=N+(E^L&(T^E))+D[3]+4107603335&4294967295,N=T+(F<<14&4294967295|F>>>18),F=L+(T^E&(N^T))+D[8]+1163531501&4294967295,L=N+(F<<20&4294967295|F>>>12),F=E+(N^T&(L^N))+D[13]+2850285829&4294967295,E=L+(F<<5&4294967295|F>>>27),F=T+(L^N&(E^L))+D[2]+4243563512&4294967295,T=E+(F<<9&4294967295|F>>>23),F=N+(E^L&(T^E))+D[7]+1735328473&4294967295,N=T+(F<<14&4294967295|F>>>18),F=L+(T^E&(N^T))+D[12]+2368359562&4294967295,L=N+(F<<20&4294967295|F>>>12),F=E+(L^N^T)+D[5]+4294588738&4294967295,E=L+(F<<4&4294967295|F>>>28),F=T+(E^L^N)+D[8]+2272392833&4294967295,T=E+(F<<11&4294967295|F>>>21),F=N+(T^E^L)+D[11]+1839030562&4294967295,N=T+(F<<16&4294967295|F>>>16),F=L+(N^T^E)+D[14]+4259657740&4294967295,L=N+(F<<23&4294967295|F>>>9),F=E+(L^N^T)+D[1]+2763975236&4294967295,E=L+(F<<4&4294967295|F>>>28),F=T+(E^L^N)+D[4]+1272893353&4294967295,T=E+(F<<11&4294967295|F>>>21),F=N+(T^E^L)+D[7]+4139469664&4294967295,N=T+(F<<16&4294967295|F>>>16),F=L+(N^T^E)+D[10]+3200236656&4294967295,L=N+(F<<23&4294967295|F>>>9),F=E+(L^N^T)+D[13]+681279174&4294967295,E=L+(F<<4&4294967295|F>>>28),F=T+(E^L^N)+D[0]+3936430074&4294967295,T=E+(F<<11&4294967295|F>>>21),F=N+(T^E^L)+D[3]+3572445317&4294967295,N=T+(F<<16&4294967295|F>>>16),F=L+(N^T^E)+D[6]+76029189&4294967295,L=N+(F<<23&4294967295|F>>>9),F=E+(L^N^T)+D[9]+3654602809&4294967295,E=L+(F<<4&4294967295|F>>>28),F=T+(E^L^N)+D[12]+3873151461&4294967295,T=E+(F<<11&4294967295|F>>>21),F=N+(T^E^L)+D[15]+530742520&4294967295,N=T+(F<<16&4294967295|F>>>16),F=L+(N^T^E)+D[2]+3299628645&4294967295,L=N+(F<<23&4294967295|F>>>9),F=E+(N^(L|~T))+D[0]+4096336452&4294967295,E=L+(F<<6&4294967295|F>>>26),F=T+(L^(E|~N))+D[7]+1126891415&4294967295,T=E+(F<<10&4294967295|F>>>22),F=N+(E^(T|~L))+D[14]+2878612391&4294967295,N=T+(F<<15&4294967295|F>>>17),F=L+(T^(N|~E))+D[5]+4237533241&4294967295,L=N+(F<<21&4294967295|F>>>11),F=E+(N^(L|~T))+D[12]+1700485571&4294967295,E=L+(F<<6&4294967295|F>>>26),F=T+(L^(E|~N))+D[3]+2399980690&4294967295,T=E+(F<<10&4294967295|F>>>22),F=N+(E^(T|~L))+D[10]+4293915773&4294967295,N=T+(F<<15&4294967295|F>>>17),F=L+(T^(N|~E))+D[1]+2240044497&4294967295,L=N+(F<<21&4294967295|F>>>11),F=E+(N^(L|~T))+D[8]+1873313359&4294967295,E=L+(F<<6&4294967295|F>>>26),F=T+(L^(E|~N))+D[15]+4264355552&4294967295,T=E+(F<<10&4294967295|F>>>22),F=N+(E^(T|~L))+D[6]+2734768916&4294967295,N=T+(F<<15&4294967295|F>>>17),F=L+(T^(N|~E))+D[13]+1309151649&4294967295,L=N+(F<<21&4294967295|F>>>11),F=E+(N^(L|~T))+D[4]+4149444226&4294967295,E=L+(F<<6&4294967295|F>>>26),F=T+(L^(E|~N))+D[11]+3174756917&4294967295,T=E+(F<<10&4294967295|F>>>22),F=N+(E^(T|~L))+D[2]+718787259&4294967295,N=T+(F<<15&4294967295|F>>>17),F=L+(T^(N|~E))+D[9]+3951481745&4294967295,I.g[0]=I.g[0]+E&4294967295,I.g[1]=I.g[1]+(N+(F<<21&4294967295|F>>>11))&4294967295,I.g[2]=I.g[2]+N&4294967295,I.g[3]=I.g[3]+T&4294967295}n.prototype.u=function(I,E){E===void 0&&(E=I.length);for(var L=E-this.blockSize,D=this.B,N=this.h,T=0;T<E;){if(N==0)for(;T<=L;)s(this,I,T),T+=this.blockSize;if(typeof I=="string"){for(;T<E;)if(D[N++]=I.charCodeAt(T++),N==this.blockSize){s(this,D),N=0;break}}else for(;T<E;)if(D[N++]=I[T++],N==this.blockSize){s(this,D),N=0;break}}this.h=N,this.o+=E},n.prototype.v=function(){var I=Array((56>this.h?this.blockSize:2*this.blockSize)-this.h);I[0]=128;for(var E=1;E<I.length-8;++E)I[E]=0;var L=8*this.o;for(E=I.length-8;E<I.length;++E)I[E]=L&255,L/=256;for(this.u(I),I=Array(16),E=L=0;4>E;++E)for(var D=0;32>D;D+=8)I[L++]=this.g[E]>>>D&255;return I};function i(I,E){var L=o;return Object.prototype.hasOwnProperty.call(L,I)?L[I]:L[I]=E(I)}function a(I,E){this.h=E;for(var L=[],D=!0,N=I.length-1;0<=N;N--){var T=I[N]|0;D&&T==E||(L[N]=T,D=!1)}this.g=L}var o={};function l(I){return-128<=I&&128>I?i(I,function(E){return new a([E|0],0>E?-1:0)}):new a([I|0],0>I?-1:0)}function c(I){if(isNaN(I)||!isFinite(I))return f;if(0>I)return _(c(-I));for(var E=[],L=1,D=0;I>=L;D++)E[D]=I/L|0,L*=4294967296;return new a(E,0)}function u(I,E){if(I.length==0)throw Error("number format error: empty string");if(E=E||10,2>E||36<E)throw Error("radix out of range: "+E);if(I.charAt(0)=="-")return _(u(I.substring(1),E));if(0<=I.indexOf("-"))throw Error('number format error: interior "-" character');for(var L=c(Math.pow(E,8)),D=f,N=0;N<I.length;N+=8){var T=Math.min(8,I.length-N),F=parseInt(I.substring(N,N+T),E);8>T?(T=c(Math.pow(E,T)),D=D.j(T).add(c(F))):(D=D.j(L),D=D.add(c(F)))}return D}var f=l(0),p=l(1),m=l(16777216);t=a.prototype,t.m=function(){if(B(this))return-_(this).m();for(var I=0,E=1,L=0;L<this.g.length;L++){var D=this.i(L);I+=(0<=D?D:4294967296+D)*E,E*=4294967296}return I},t.toString=function(I){if(I=I||10,2>I||36<I)throw Error("radix out of range: "+I);if(b(this))return"0";if(B(this))return"-"+_(this).toString(I);for(var E=c(Math.pow(I,6)),L=this,D="";;){var N=O(L,E).g;L=w(L,N.j(E));var T=((0<L.g.length?L.g[0]:L.h)>>>0).toString(I);if(L=N,b(L))return T+D;for(;6>T.length;)T="0"+T;D=T+D}},t.i=function(I){return 0>I?0:I<this.g.length?this.g[I]:this.h};function b(I){if(I.h!=0)return!1;for(var E=0;E<I.g.length;E++)if(I.g[E]!=0)return!1;return!0}function B(I){return I.h==-1}t.l=function(I){return I=w(this,I),B(I)?-1:b(I)?0:1};function _(I){for(var E=I.g.length,L=[],D=0;D<E;D++)L[D]=~I.g[D];return new a(L,~I.h).add(p)}t.abs=function(){return B(this)?_(this):this},t.add=function(I){for(var E=Math.max(this.g.length,I.g.length),L=[],D=0,N=0;N<=E;N++){var T=D+(this.i(N)&65535)+(I.i(N)&65535),F=(T>>>16)+(this.i(N)>>>16)+(I.i(N)>>>16);D=F>>>16,T&=65535,F&=65535,L[N]=F<<16|T}return new a(L,L[L.length-1]&-2147483648?-1:0)};function w(I,E){return I.add(_(E))}t.j=function(I){if(b(this)||b(I))return f;if(B(this))return B(I)?_(this).j(_(I)):_(_(this).j(I));if(B(I))return _(this.j(_(I)));if(0>this.l(m)&&0>I.l(m))return c(this.m()*I.m());for(var E=this.g.length+I.g.length,L=[],D=0;D<2*E;D++)L[D]=0;for(D=0;D<this.g.length;D++)for(var N=0;N<I.g.length;N++){var T=this.i(D)>>>16,F=this.i(D)&65535,ee=I.i(N)>>>16,ce=I.i(N)&65535;L[2*D+2*N]+=F*ce,y(L,2*D+2*N),L[2*D+2*N+1]+=T*ce,y(L,2*D+2*N+1),L[2*D+2*N+1]+=F*ee,y(L,2*D+2*N+1),L[2*D+2*N+2]+=T*ee,y(L,2*D+2*N+2)}for(D=0;D<E;D++)L[D]=L[2*D+1]<<16|L[2*D];for(D=E;D<2*E;D++)L[D]=0;return new a(L,0)};function y(I,E){for(;(I[E]&65535)!=I[E];)I[E+1]+=I[E]>>>16,I[E]&=65535,E++}function S(I,E){this.g=I,this.h=E}function O(I,E){if(b(E))throw Error("division by zero");if(b(I))return new S(f,f);if(B(I))return E=O(_(I),E),new S(_(E.g),_(E.h));if(B(E))return E=O(I,_(E)),new S(_(E.g),E.h);if(30<I.g.length){if(B(I)||B(E))throw Error("slowDivide_ only works with positive integers.");for(var L=p,D=E;0>=D.l(I);)L=R(L),D=R(D);var N=M(L,1),T=M(D,1);for(D=M(D,2),L=M(L,2);!b(D);){var F=T.add(D);0>=F.l(I)&&(N=N.add(L),T=F),D=M(D,1),L=M(L,1)}return E=w(I,N.j(E)),new S(N,E)}for(N=f;0<=I.l(E);){for(L=Math.max(1,Math.floor(I.m()/E.m())),D=Math.ceil(Math.log(L)/Math.LN2),D=48>=D?1:Math.pow(2,D-48),T=c(L),F=T.j(E);B(F)||0<F.l(I);)L-=D,T=c(L),F=T.j(E);b(T)&&(T=p),N=N.add(T),I=w(I,F)}return new S(N,I)}t.A=function(I){return O(this,I).h},t.and=function(I){for(var E=Math.max(this.g.length,I.g.length),L=[],D=0;D<E;D++)L[D]=this.i(D)&I.i(D);return new a(L,this.h&I.h)},t.or=function(I){for(var E=Math.max(this.g.length,I.g.length),L=[],D=0;D<E;D++)L[D]=this.i(D)|I.i(D);return new a(L,this.h|I.h)},t.xor=function(I){for(var E=Math.max(this.g.length,I.g.length),L=[],D=0;D<E;D++)L[D]=this.i(D)^I.i(D);return new a(L,this.h^I.h)};function R(I){for(var E=I.g.length+1,L=[],D=0;D<E;D++)L[D]=I.i(D)<<1|I.i(D-1)>>>31;return new a(L,I.h)}function M(I,E){var L=E>>5;E%=32;for(var D=I.g.length-L,N=[],T=0;T<D;T++)N[T]=0<E?I.i(T+L)>>>E|I.i(T+L+1)<<32-E:I.i(T+L);return new a(N,I.h)}n.prototype.digest=n.prototype.v,n.prototype.reset=n.prototype.s,n.prototype.update=n.prototype.u,i4=n,a.prototype.add=a.prototype.add,a.prototype.multiply=a.prototype.j,a.prototype.modulo=a.prototype.A,a.prototype.compare=a.prototype.l,a.prototype.toNumber=a.prototype.m,a.prototype.toString=a.prototype.toString,a.prototype.getBits=a.prototype.i,a.fromNumber=c,a.fromString=u,yc=a}).apply(typeof H5<"u"?H5:typeof self<"u"?self:typeof window<"u"?window:{});var km=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};/** @license
Copyright The Closure Library Authors.
SPDX-License-Identifier: Apache-2.0
*/var a4,Yh,o4,Vg,A2,A4,l4,c4;(function(){var t,e=typeof Object.defineProperties=="function"?Object.defineProperty:function(h,C,j){return h==Array.prototype||h==Object.prototype||(h[C]=j.value),h};function r(h){h=[typeof globalThis=="object"&&globalThis,h,typeof window=="object"&&window,typeof self=="object"&&self,typeof km=="object"&&km];for(var C=0;C<h.length;++C){var j=h[C];if(j&&j.Math==Math)return j}throw Error("Cannot find global object")}var n=r(this);function s(h,C){if(C)e:{var j=n;h=h.split(".");for(var J=0;J<h.length-1;J++){var ye=h[J];if(!(ye in j))break e;j=j[ye]}h=h[h.length-1],J=j[h],C=C(J),C!=J&&C!=null&&e(j,h,{configurable:!0,writable:!0,value:C})}}function i(h,C){h instanceof String&&(h+="");var j=0,J=!1,ye={next:function(){if(!J&&j<h.length){var Ie=j++;return{value:C(Ie,h[Ie]),done:!1}}return J=!0,{done:!0,value:void 0}}};return ye[Symbol.iterator]=function(){return ye},ye}s("Array.prototype.values",function(h){return h||function(){return i(this,function(C,j){return j})}});/** @license

 Copyright The Closure Library Authors.
 SPDX-License-Identifier: Apache-2.0
*/var a=a||{},o=this||self;function l(h){var C=typeof h;return C=C!="object"?C:h?Array.isArray(h)?"array":C:"null",C=="array"||C=="object"&&typeof h.length=="number"}function c(h){var C=typeof h;return C=="object"&&h!=null||C=="function"}function u(h,C,j){return h.call.apply(h.bind,arguments)}function f(h,C,j){if(!h)throw Error();if(2<arguments.length){var J=Array.prototype.slice.call(arguments,2);return function(){var ye=Array.prototype.slice.call(arguments);return Array.prototype.unshift.apply(ye,J),h.apply(C,ye)}}return function(){return h.apply(C,arguments)}}function p(h,C,j){return p=Function.prototype.bind&&Function.prototype.bind.toString().indexOf("native code")!=-1?u:f,p.apply(null,arguments)}function m(h,C){var j=Array.prototype.slice.call(arguments,1);return function(){var J=j.slice();return J.push.apply(J,arguments),h.apply(this,J)}}function b(h,C){function j(){}j.prototype=C.prototype,h.aa=C.prototype,h.prototype=new j,h.prototype.constructor=h,h.Qb=function(J,ye,Ie){for(var Xe=Array(arguments.length-2),Gt=2;Gt<arguments.length;Gt++)Xe[Gt-2]=arguments[Gt];return C.prototype[ye].apply(J,Xe)}}function B(h){const C=h.length;if(0<C){const j=Array(C);for(let J=0;J<C;J++)j[J]=h[J];return j}return[]}function _(h,C){for(let j=1;j<arguments.length;j++){const J=arguments[j];if(l(J)){const ye=h.length||0,Ie=J.length||0;h.length=ye+Ie;for(let Xe=0;Xe<Ie;Xe++)h[ye+Xe]=J[Xe]}else h.push(J)}}class w{constructor(C,j){this.i=C,this.j=j,this.h=0,this.g=null}get(){let C;return 0<this.h?(this.h--,C=this.g,this.g=C.next,C.next=null):C=this.i(),C}}function y(h){return/^[\s\xa0]*$/.test(h)}function S(){var h=o.navigator;return h&&(h=h.userAgent)?h:""}function O(h){return O[" "](h),h}O[" "]=function(){};var R=S().indexOf("Gecko")!=-1&&!(S().toLowerCase().indexOf("webkit")!=-1&&S().indexOf("Edge")==-1)&&!(S().indexOf("Trident")!=-1||S().indexOf("MSIE")!=-1)&&S().indexOf("Edge")==-1;function M(h,C,j){for(const J in h)C.call(j,h[J],J,h)}function I(h,C){for(const j in h)C.call(void 0,h[j],j,h)}function E(h){const C={};for(const j in h)C[j]=h[j];return C}const L="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function D(h,C){let j,J;for(let ye=1;ye<arguments.length;ye++){J=arguments[ye];for(j in J)h[j]=J[j];for(let Ie=0;Ie<L.length;Ie++)j=L[Ie],Object.prototype.hasOwnProperty.call(J,j)&&(h[j]=J[j])}}function N(h){var C=1;h=h.split(":");const j=[];for(;0<C&&h.length;)j.push(h.shift()),C--;return h.length&&j.push(h.join(":")),j}function T(h){o.setTimeout(()=>{throw h},0)}function F(){var h=ue;let C=null;return h.g&&(C=h.g,h.g=h.g.next,h.g||(h.h=null),C.next=null),C}class ee{constructor(){this.h=this.g=null}add(C,j){const J=ce.get();J.set(C,j),this.h?this.h.next=J:this.g=J,this.h=J}}var ce=new w(()=>new re,h=>h.reset());class re{constructor(){this.next=this.g=this.h=null}set(C,j){this.h=C,this.g=j,this.next=null}reset(){this.next=this.g=this.h=null}}let de,W=!1,ue=new ee,ae=()=>{const h=o.Promise.resolve(void 0);de=()=>{h.then(Ee)}};var Ee=()=>{for(var h;h=F();){try{h.h.call(h.g)}catch(j){T(j)}var C=ce;C.j(h),100>C.h&&(C.h++,h.next=C.g,C.g=h)}W=!1};function Q(){this.s=this.s,this.C=this.C}Q.prototype.s=!1,Q.prototype.ma=function(){this.s||(this.s=!0,this.N())},Q.prototype.N=function(){if(this.C)for(;this.C.length;)this.C.shift()()};function k(h,C){this.type=h,this.g=this.target=C,this.defaultPrevented=!1}k.prototype.h=function(){this.defaultPrevented=!0};var z=function(){if(!o.addEventListener||!Object.defineProperty)return!1;var h=!1,C=Object.defineProperty({},"passive",{get:function(){h=!0}});try{const j=()=>{};o.addEventListener("test",j,C),o.removeEventListener("test",j,C)}catch{}return h}();function te(h,C){if(k.call(this,h?h.type:""),this.relatedTarget=this.g=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key="",this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.state=null,this.pointerId=0,this.pointerType="",this.i=null,h){var j=this.type=h.type,J=h.changedTouches&&h.changedTouches.length?h.changedTouches[0]:null;if(this.target=h.target||h.srcElement,this.g=C,C=h.relatedTarget){if(R){e:{try{O(C.nodeName);var ye=!0;break e}catch{}ye=!1}ye||(C=null)}}else j=="mouseover"?C=h.fromElement:j=="mouseout"&&(C=h.toElement);this.relatedTarget=C,J?(this.clientX=J.clientX!==void 0?J.clientX:J.pageX,this.clientY=J.clientY!==void 0?J.clientY:J.pageY,this.screenX=J.screenX||0,this.screenY=J.screenY||0):(this.clientX=h.clientX!==void 0?h.clientX:h.pageX,this.clientY=h.clientY!==void 0?h.clientY:h.pageY,this.screenX=h.screenX||0,this.screenY=h.screenY||0),this.button=h.button,this.key=h.key||"",this.ctrlKey=h.ctrlKey,this.altKey=h.altKey,this.shiftKey=h.shiftKey,this.metaKey=h.metaKey,this.pointerId=h.pointerId||0,this.pointerType=typeof h.pointerType=="string"?h.pointerType:$[h.pointerType]||"",this.state=h.state,this.i=h,h.defaultPrevented&&te.aa.h.call(this)}}b(te,k);var $={2:"touch",3:"pen",4:"mouse"};te.prototype.h=function(){te.aa.h.call(this);var h=this.i;h.preventDefault?h.preventDefault():h.returnValue=!1};var ne="closure_listenable_"+(1e6*Math.random()|0),X=0;function he(h,C,j,J,ye){this.listener=h,this.proxy=null,this.src=C,this.type=j,this.capture=!!J,this.ha=ye,this.key=++X,this.da=this.fa=!1}function ge(h){h.da=!0,h.listener=null,h.proxy=null,h.src=null,h.ha=null}function Ce(h){this.src=h,this.g={},this.h=0}Ce.prototype.add=function(h,C,j,J,ye){var Ie=h.toString();h=this.g[Ie],h||(h=this.g[Ie]=[],this.h++);var Xe=Fe(h,C,J,ye);return-1<Xe?(C=h[Xe],j||(C.fa=!1)):(C=new he(C,this.src,Ie,!!J,ye),C.fa=j,h.push(C)),C};function Te(h,C){var j=C.type;if(j in h.g){var J=h.g[j],ye=Array.prototype.indexOf.call(J,C,void 0),Ie;(Ie=0<=ye)&&Array.prototype.splice.call(J,ye,1),Ie&&(ge(C),h.g[j].length==0&&(delete h.g[j],h.h--))}}function Fe(h,C,j,J){for(var ye=0;ye<h.length;++ye){var Ie=h[ye];if(!Ie.da&&Ie.listener==C&&Ie.capture==!!j&&Ie.ha==J)return ye}return-1}var oe="closure_lm_"+(1e6*Math.random()|0),le={};function G(h,C,j,J,ye){if(Array.isArray(C)){for(var Ie=0;Ie<C.length;Ie++)G(h,C[Ie],j,J,ye);return null}return j=vt(j),h&&h[ne]?h.K(C,j,c(J)?!!J.capture:!1,ye):Re(h,C,j,!1,J,ye)}function Re(h,C,j,J,ye,Ie){if(!C)throw Error("Invalid event type");var Xe=c(ye)?!!ye.capture:!!ye,Gt=tt(h);if(Gt||(h[oe]=Gt=new Ce(h)),j=Gt.add(C,j,J,Xe,Ie),j.proxy)return j;if(J=je(),j.proxy=J,J.src=h,J.listener=j,h.addEventListener)z||(ye=Xe),ye===void 0&&(ye=!1),h.addEventListener(C.toString(),J,ye);else if(h.attachEvent)h.attachEvent(Ge(C.toString()),J);else if(h.addListener&&h.removeListener)h.addListener(J);else throw Error("addEventListener and attachEvent are unavailable.");return j}function je(){function h(j){return C.call(h.src,h.listener,j)}const C=qe;return h}function Ue(h,C,j,J,ye){if(Array.isArray(C))for(var Ie=0;Ie<C.length;Ie++)Ue(h,C[Ie],j,J,ye);else J=c(J)?!!J.capture:!!J,j=vt(j),h&&h[ne]?(h=h.i,C=String(C).toString(),C in h.g&&(Ie=h.g[C],j=Fe(Ie,j,J,ye),-1<j&&(ge(Ie[j]),Array.prototype.splice.call(Ie,j,1),Ie.length==0&&(delete h.g[C],h.h--)))):h&&(h=tt(h))&&(C=h.g[C.toString()],h=-1,C&&(h=Fe(C,j,J,ye)),(j=-1<h?C[h]:null)&&Pe(j))}function Pe(h){if(typeof h!="number"&&h&&!h.da){var C=h.src;if(C&&C[ne])Te(C.i,h);else{var j=h.type,J=h.proxy;C.removeEventListener?C.removeEventListener(j,J,h.capture):C.detachEvent?C.detachEvent(Ge(j),J):C.addListener&&C.removeListener&&C.removeListener(J),(j=tt(C))?(Te(j,h),j.h==0&&(j.src=null,C[oe]=null)):ge(h)}}}function Ge(h){return h in le?le[h]:le[h]="on"+h}function qe(h,C){if(h.da)h=!0;else{C=new te(C,this);var j=h.listener,J=h.ha||h.src;h.fa&&Pe(h),h=j.call(J,C)}return h}function tt(h){return h=h[oe],h instanceof Ce?h:null}var Ze="__closure_events_fn_"+(1e9*Math.random()>>>0);function vt(h){return typeof h=="function"?h:(h[Ze]||(h[Ze]=function(C){return h.handleEvent(C)}),h[Ze])}function ht(){Q.call(this),this.i=new Ce(this),this.M=this,this.F=null}b(ht,Q),ht.prototype[ne]=!0,ht.prototype.removeEventListener=function(h,C,j,J){Ue(this,h,C,j,J)};function Ct(h,C){var j,J=h.F;if(J)for(j=[];J;J=J.F)j.push(J);if(h=h.M,J=C.type||C,typeof C=="string")C=new k(C,h);else if(C instanceof k)C.target=C.target||h;else{var ye=C;C=new k(J,h),D(C,ye)}if(ye=!0,j)for(var Ie=j.length-1;0<=Ie;Ie--){var Xe=C.g=j[Ie];ye=Ht(Xe,J,!0,C)&&ye}if(Xe=C.g=h,ye=Ht(Xe,J,!0,C)&&ye,ye=Ht(Xe,J,!1,C)&&ye,j)for(Ie=0;Ie<j.length;Ie++)Xe=C.g=j[Ie],ye=Ht(Xe,J,!1,C)&&ye}ht.prototype.N=function(){if(ht.aa.N.call(this),this.i){var h=this.i,C;for(C in h.g){for(var j=h.g[C],J=0;J<j.length;J++)ge(j[J]);delete h.g[C],h.h--}}this.F=null},ht.prototype.K=function(h,C,j,J){return this.i.add(String(h),C,!1,j,J)},ht.prototype.L=function(h,C,j,J){return this.i.add(String(h),C,!0,j,J)};function Ht(h,C,j,J){if(C=h.i.g[String(C)],!C)return!0;C=C.concat();for(var ye=!0,Ie=0;Ie<C.length;++Ie){var Xe=C[Ie];if(Xe&&!Xe.da&&Xe.capture==j){var Gt=Xe.listener,ir=Xe.ha||Xe.src;Xe.fa&&Te(h.i,Xe),ye=Gt.call(ir,J)!==!1&&ye}}return ye&&!J.defaultPrevented}function Et(h,C,j){if(typeof h=="function")j&&(h=p(h,j));else if(h&&typeof h.handleEvent=="function")h=p(h.handleEvent,h);else throw Error("Invalid listener argument");return 2147483647<Number(C)?-1:o.setTimeout(h,C||0)}function se(h){h.g=Et(()=>{h.g=null,h.i&&(h.i=!1,se(h))},h.l);const C=h.h;h.h=null,h.m.apply(null,C)}class ve extends Q{constructor(C,j){super(),this.m=C,this.l=j,this.h=null,this.i=!1,this.g=null}j(C){this.h=arguments,this.g?this.i=!0:se(this)}N(){super.N(),this.g&&(o.clearTimeout(this.g),this.g=null,this.i=!1,this.h=null)}}function We(h){Q.call(this),this.h=h,this.g={}}b(We,Q);var at=[];function wt(h){M(h.g,function(C,j){this.g.hasOwnProperty(j)&&Pe(C)},h),h.g={}}We.prototype.N=function(){We.aa.N.call(this),wt(this)},We.prototype.handleEvent=function(){throw Error("EventHandler.handleEvent not implemented")};var _t=o.JSON.stringify,rt=o.JSON.parse,ur=class{stringify(h){return o.JSON.stringify(h,void 0)}parse(h){return o.JSON.parse(h,void 0)}};function St(){}St.prototype.h=null;function Ur(h){return h.h||(h.h=h.i())}function sr(){}var fr={OPEN:"a",kb:"b",Ja:"c",wb:"d"};function hn(){k.call(this,"d")}b(hn,k);function vr(){k.call(this,"c")}b(vr,k);var jt={},Yt=null;function cs(){return Yt=Yt||new ht}jt.La="serverreachability";function zr(h){k.call(this,jt.La,h)}b(zr,k);function mr(h){const C=cs();Ct(C,new zr(C))}jt.STAT_EVENT="statevent";function Qe(h,C){k.call(this,jt.STAT_EVENT,h),this.stat=C}b(Qe,k);function Oe(h){const C=cs();Ct(C,new Qe(C,h))}jt.Ma="timingevent";function Ft(h,C){k.call(this,jt.Ma,h),this.size=C}b(Ft,k);function ft(h,C){if(typeof h!="function")throw Error("Fn must not be null and must be a function");return o.setTimeout(function(){h()},C)}function ct(){this.g=!0}ct.prototype.xa=function(){this.g=!1};function Ut(h,C,j,J,ye,Ie){h.info(function(){if(h.g)if(Ie)for(var Xe="",Gt=Ie.split("&"),ir=0;ir<Gt.length;ir++){var zt=Gt[ir].split("=");if(1<zt.length){var yr=zt[0];zt=zt[1];var Pr=yr.split("_");Xe=2<=Pr.length&&Pr[1]=="type"?Xe+(yr+"="+zt+"&"):Xe+(yr+"=redacted&")}}else Xe=null;else Xe=Ie;return"XMLHTTP REQ ("+J+") [attempt "+ye+"]: "+C+`
`+j+`
`+Xe})}function it(h,C,j,J,ye,Ie,Xe){h.info(function(){return"XMLHTTP RESP ("+J+") [ attempt "+ye+"]: "+C+`
`+j+`
`+Ie+" "+Xe})}function Nt(h,C,j,J){h.info(function(){return"XMLHTTP TEXT ("+C+"): "+et(h,j)+(J?" "+J:"")})}function be(h,C){h.info(function(){return"TIMEOUT: "+C})}ct.prototype.info=function(){};function et(h,C){if(!h.g)return C;if(!C)return null;try{var j=JSON.parse(C);if(j){for(h=0;h<j.length;h++)if(Array.isArray(j[h])){var J=j[h];if(!(2>J.length)){var ye=J[1];if(Array.isArray(ye)&&!(1>ye.length)){var Ie=ye[0];if(Ie!="noop"&&Ie!="stop"&&Ie!="close")for(var Xe=1;Xe<ye.length;Xe++)ye[Xe]=""}}}}return _t(j)}catch{return C}}var nt={NO_ERROR:0,gb:1,tb:2,sb:3,nb:4,rb:5,ub:6,Ia:7,TIMEOUT:8,xb:9},Mt={lb:"complete",Hb:"success",Ja:"error",Ia:"abort",zb:"ready",Ab:"readystatechange",TIMEOUT:"timeout",vb:"incrementaldata",yb:"progress",ob:"downloadprogress",Pb:"uploadprogress"},Zt;function It(){}b(It,St),It.prototype.g=function(){return new XMLHttpRequest},It.prototype.i=function(){return{}},Zt=new It;function mt(h,C,j,J){this.j=h,this.i=C,this.l=j,this.R=J||1,this.U=new We(this),this.I=45e3,this.H=null,this.o=!1,this.m=this.A=this.v=this.L=this.F=this.S=this.B=null,this.D=[],this.g=null,this.C=0,this.s=this.u=null,this.X=-1,this.J=!1,this.O=0,this.M=null,this.W=this.K=this.T=this.P=!1,this.h=new Es}function Es(){this.i=null,this.g="",this.h=!1}var ma={},ga={};function va(h,C,j){h.L=1,h.v=Za(_s(C)),h.m=j,h.P=!0,$a(h,null)}function $a(h,C){h.F=Date.now(),$o(h),h.A=_s(h.v);var j=h.A,J=h.R;Array.isArray(J)||(J=[String(J)]),Vt(j.i,"t",J),h.C=0,j=h.j.J,h.h=new Es,h.g=H(h.j,j?C:null,!h.m),0<h.O&&(h.M=new ve(p(h.Y,h,h.g),h.O)),C=h.U,j=h.g,J=h.ca;var ye="readystatechange";Array.isArray(ye)||(ye&&(at[0]=ye.toString()),ye=at);for(var Ie=0;Ie<ye.length;Ie++){var Xe=G(j,ye[Ie],J||C.handleEvent,!1,C.h||C);if(!Xe)break;C.g[Xe.key]=Xe}C=h.H?E(h.H):{},h.m?(h.u||(h.u="POST"),C["Content-Type"]="application/x-www-form-urlencoded",h.g.ea(h.A,h.u,h.m,C)):(h.u="GET",h.g.ea(h.A,h.u,null,C)),mr(),Ut(h.i,h.u,h.A,h.l,h.R,h.m)}mt.prototype.ca=function(h){h=h.target;const C=this.M;C&&Sn(h)==3?C.j():this.Y(h)},mt.prototype.Y=function(h){try{if(h==this.g)e:{const Pr=Sn(this.g);var C=this.g.Ba();const Gi=this.g.Z();if(!(3>Pr)&&(Pr!=3||this.g&&(this.h.h||this.g.oa()||iu(this.g)))){this.J||Pr!=4||C==7||(C==8||0>=Gi?mr(3):mr(2)),wa(this);var j=this.g.Z();this.X=j;t:if(Wa(this)){var J=iu(this.g);h="";var ye=J.length,Ie=Sn(this.g)==4;if(!this.h.i){if(typeof TextDecoder>"u"){Ri(this),ya(this);var Xe="";break t}this.h.i=new o.TextDecoder}for(C=0;C<ye;C++)this.h.h=!0,h+=this.h.i.decode(J[C],{stream:!(Ie&&C==ye-1)});J.length=0,this.h.g+=h,this.C=0,Xe=this.h.g}else Xe=this.g.oa();if(this.o=j==200,it(this.i,this.u,this.A,this.l,this.R,Pr,j),this.o){if(this.T&&!this.K){t:{if(this.g){var Gt,ir=this.g;if((Gt=ir.g?ir.g.getResponseHeader("X-HTTP-Initial-Response"):null)&&!y(Gt)){var zt=Gt;break t}}zt=null}if(j=zt)Nt(this.i,this.l,j,"Initial handshake response via X-HTTP-Initial-Response"),this.K=!0,Xa(this,j);else{this.o=!1,this.s=3,Oe(12),Ri(this),ya(this);break e}}if(this.P){j=!0;let Jn;for(;!this.J&&this.C<Xe.length;)if(Jn=Xc(this,Xe),Jn==ga){Pr==4&&(this.s=4,Oe(14),j=!1),Nt(this.i,this.l,null,"[Incomplete Response]");break}else if(Jn==ma){this.s=4,Oe(15),Nt(this.i,this.l,Xe,"[Invalid Chunk]"),j=!1;break}else Nt(this.i,this.l,Jn,null),Xa(this,Jn);if(Wa(this)&&this.C!=0&&(this.h.g=this.h.g.slice(this.C),this.C=0),Pr!=4||Xe.length!=0||this.h.h||(this.s=1,Oe(16),j=!1),this.o=this.o&&j,!j)Nt(this.i,this.l,Xe,"[Invalid Chunked Response]"),Ri(this),ya(this);else if(0<Xe.length&&!this.W){this.W=!0;var yr=this.j;yr.g==this&&yr.ba&&!yr.M&&(yr.j.info("Great, no buffering proxy detected. Bytes received: "+Xe.length),AA(yr),yr.M=!0,Oe(11))}}else Nt(this.i,this.l,Xe,null),Xa(this,Xe);Pr==4&&Ri(this),this.o&&!this.J&&(Pr==4?Ea(this.j,this):(this.o=!1,$o(this)))}else Ba(this.g),j==400&&0<Xe.indexOf("Unknown SID")?(this.s=3,Oe(12)):(this.s=0,Oe(13)),Ri(this),ya(this)}}}catch{}finally{}};function Wa(h){return h.g?h.u=="GET"&&h.L!=2&&h.j.Ca:!1}function Xc(h,C){var j=h.C,J=C.indexOf(`
`,j);return J==-1?ga:(j=Number(C.substring(j,J)),isNaN(j)?ma:(J+=1,J+j>C.length?ga:(C=C.slice(J,J+j),h.C=J+j,C)))}mt.prototype.cancel=function(){this.J=!0,Ri(this)};function $o(h){h.S=Date.now()+h.I,Jc(h,h.I)}function Jc(h,C){if(h.B!=null)throw Error("WatchDog timer not null");h.B=ft(p(h.ba,h),C)}function wa(h){h.B&&(o.clearTimeout(h.B),h.B=null)}mt.prototype.ba=function(){this.B=null;const h=Date.now();0<=h-this.S?(be(this.i,this.A),this.L!=2&&(mr(),Oe(17)),Ri(this),this.s=2,ya(this)):Jc(this,this.S-h)};function ya(h){h.j.G==0||h.J||Ea(h.j,h)}function Ri(h){wa(h);var C=h.M;C&&typeof C.ma=="function"&&C.ma(),h.M=null,wt(h.U),h.g&&(C=h.g,h.g=null,C.abort(),C.ma())}function Xa(h,C){try{var j=h.j;if(j.G!=0&&(j.g==h||Ul(j.h,h))){if(!h.K&&Ul(j.h,h)&&j.G==3){try{var J=j.Da.g.parse(C)}catch{J=null}if(Array.isArray(J)&&J.length==3){var ye=J;if(ye[0]==0){e:if(!j.u){if(j.g)if(j.g.F+3e3<h.F)qi(j),sA(j);else break e;so(j),Oe(18)}}else j.za=ye[1],0<j.za-j.T&&37500>ye[2]&&j.F&&j.v==0&&!j.C&&(j.C=ft(p(j.Za,j),6e3));if(1>=Ja(j.h)&&j.ca){try{j.ca()}catch{}j.ca=void 0}}else us(j,11)}else if((h.K||j.g==h)&&qi(j),!y(C))for(ye=j.Da.g.parse(C),C=0;C<ye.length;C++){let zt=ye[C];if(j.T=zt[0],zt=zt[1],j.G==2)if(zt[0]=="c"){j.K=zt[1],j.ia=zt[2];const yr=zt[3];yr!=null&&(j.la=yr,j.j.info("VER="+j.la));const Pr=zt[4];Pr!=null&&(j.Aa=Pr,j.j.info("SVER="+j.Aa));const Gi=zt[5];Gi!=null&&typeof Gi=="number"&&0<Gi&&(J=1.5*Gi,j.L=J,j.j.info("backChannelRequestTimeoutMs_="+J)),J=j;const Jn=h.g;if(Jn){const _a=Jn.g?Jn.g.getResponseHeader("X-Client-Wire-Protocol"):null;if(_a){var Ie=J.h;Ie.g||_a.indexOf("spdy")==-1&&_a.indexOf("quic")==-1&&_a.indexOf("h2")==-1||(Ie.j=Ie.l,Ie.g=new Set,Ie.h&&(Mr(Ie,Ie.h),Ie.h=null))}if(J.D){const Na=Jn.g?Jn.g.getResponseHeader("X-HTTP-Session-Id"):null;Na&&(J.ya=Na,br(J.I,J.D,Na))}}j.G=3,j.l&&j.l.ua(),j.ba&&(j.R=Date.now()-h.F,j.j.info("Handshake RTT: "+j.R+"ms")),J=j;var Xe=h;if(J.qa=v(J,J.J?J.ia:null,J.W),Xe.K){Pl(J.h,Xe);var Gt=Xe,ir=J.L;ir&&(Gt.I=ir),Gt.B&&(wa(Gt),$o(Gt)),J.g=Xe}else oA(J);0<j.i.length&&iA(j)}else zt[0]!="stop"&&zt[0]!="close"||us(j,7);else j.G==3&&(zt[0]=="stop"||zt[0]=="close"?zt[0]=="stop"?us(j,7):Ki(j):zt[0]!="noop"&&j.l&&j.l.ta(zt),j.v=0)}}mr(4)}catch{}}var nh=class{constructor(h,C){this.g=h,this.map=C}};function Tl(h){this.l=h||10,o.PerformanceNavigationTiming?(h=o.performance.getEntriesByType("navigation"),h=0<h.length&&(h[0].nextHopProtocol=="hq"||h[0].nextHopProtocol=="h2")):h=!!(o.chrome&&o.chrome.loadTimes&&o.chrome.loadTimes()&&o.chrome.loadTimes().wasFetchedViaSpdy),this.j=h?this.l:1,this.g=null,1<this.j&&(this.g=new Set),this.h=null,this.i=[]}function Yc(h){return h.h?!0:h.g?h.g.size>=h.j:!1}function Ja(h){return h.h?1:h.g?h.g.size:0}function Ul(h,C){return h.h?h.h==C:h.g?h.g.has(C):!1}function Mr(h,C){h.g?h.g.add(C):h.h=C}function Pl(h,C){h.h&&h.h==C?h.h=null:h.g&&h.g.has(C)&&h.g.delete(C)}Tl.prototype.cancel=function(){if(this.i=Ql(this),this.h)this.h.cancel(),this.h=null;else if(this.g&&this.g.size!==0){for(const h of this.g.values())h.cancel();this.g.clear()}};function Ql(h){if(h.h!=null)return h.i.concat(h.h.D);if(h.g!=null&&h.g.size!==0){let C=h.i;for(const j of h.g.values())C=C.concat(j.D);return C}return B(h.i)}function Zc(h){if(h.V&&typeof h.V=="function")return h.V();if(typeof Map<"u"&&h instanceof Map||typeof Set<"u"&&h instanceof Set)return Array.from(h.values());if(typeof h=="string")return h.split("");if(l(h)){for(var C=[],j=h.length,J=0;J<j;J++)C.push(h[J]);return C}C=[],j=0;for(J in h)C[j++]=h[J];return C}function Ll(h){if(h.na&&typeof h.na=="function")return h.na();if(!h.V||typeof h.V!="function"){if(typeof Map<"u"&&h instanceof Map)return Array.from(h.keys());if(!(typeof Set<"u"&&h instanceof Set)){if(l(h)||typeof h=="string"){var C=[];h=h.length;for(var j=0;j<h;j++)C.push(j);return C}C=[],j=0;for(const J in h)C[j++]=J;return C}}}function eu(h,C){if(h.forEach&&typeof h.forEach=="function")h.forEach(C,void 0);else if(l(h)||typeof h=="string")Array.prototype.forEach.call(h,C,void 0);else for(var j=Ll(h),J=Zc(h),ye=J.length,Ie=0;Ie<ye;Ie++)C.call(void 0,J[Ie],j&&j[Ie],h)}var Ds=RegExp("^(?:([^:/?#.]+):)?(?://(?:([^\\\\/?#]*)@)?([^\\\\/?#]*?)(?::([0-9]+))?(?=[\\\\/?#]|$))?([^?#]+)?(?:\\?([^#]*))?(?:#([\\s\\S]*))?$");function Wo(h,C){if(h){h=h.split("&");for(var j=0;j<h.length;j++){var J=h[j].indexOf("="),ye=null;if(0<=J){var Ie=h[j].substring(0,J);ye=h[j].substring(J+1)}else Ie=h[j];C(Ie,ye?decodeURIComponent(ye.replace(/\+/g," ")):"")}}}function An(h){if(this.g=this.o=this.j="",this.s=null,this.m=this.l="",this.h=!1,h instanceof An){this.h=h.h,Ya(this,h.j),this.o=h.o,this.g=h.g,Xo(this,h.s),this.l=h.l;var C=h.i,j=new xa;j.i=C.i,C.g&&(j.g=new Map(C.g),j.h=C.h),jl(this,j),this.m=h.m}else h&&(C=String(h).match(Ds))?(this.h=!1,Ya(this,C[1]||"",!0),this.o=eo(C[2]||""),this.g=eo(C[3]||"",!0),Xo(this,C[4]),this.l=eo(C[5]||"",!0),jl(this,C[6]||"",!0),this.m=eo(C[7]||"")):(this.h=!1,this.i=new xa(null,this.h))}An.prototype.toString=function(){var h=[],C=this.j;C&&h.push(Mi(C,tu,!0),":");var j=this.g;return(j||C=="file")&&(h.push("//"),(C=this.o)&&h.push(Mi(C,tu,!0),"@"),h.push(encodeURIComponent(String(j)).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),j=this.s,j!=null&&h.push(":",String(j))),(j=this.l)&&(this.g&&j.charAt(0)!="/"&&h.push("/"),h.push(Mi(j,j.charAt(0)=="/"?Oi:ih,!0))),(j=this.i.toString())&&h.push("?",j),(j=this.m)&&h.push("#",Mi(j,Yo)),h.join("")};function _s(h){return new An(h)}function Ya(h,C,j){h.j=j?eo(C,!0):C,h.j&&(h.j=h.j.replace(/:$/,""))}function Xo(h,C){if(C){if(C=Number(C),isNaN(C)||0>C)throw Error("Bad port number "+C);h.s=C}else h.s=null}function jl(h,C,j){C instanceof xa?(h.i=C,ah(h.i,h.h)):(j||(C=Mi(C,Jo)),h.i=new xa(C,h.h))}function br(h,C,j){h.i.set(C,j)}function Za(h){return br(h,"zx",Math.floor(2147483648*Math.random()).toString(36)+Math.abs(Math.floor(2147483648*Math.random())^Date.now()).toString(36)),h}function eo(h,C){return h?C?decodeURI(h.replace(/%25/g,"%2525")):decodeURIComponent(h):""}function Mi(h,C,j){return typeof h=="string"?(h=encodeURI(h).replace(C,sh),j&&(h=h.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),h):null}function sh(h){return h=h.charCodeAt(0),"%"+(h>>4&15).toString(16)+(h&15).toString(16)}var tu=/[#\/\?@]/g,ih=/[#\?:]/g,Oi=/[#\?]/g,Jo=/[#\?@]/g,Yo=/#/g;function xa(h,C){this.h=this.g=null,this.i=h||null,this.j=!!C}function Or(h){h.g||(h.g=new Map,h.h=0,h.i&&Wo(h.i,function(C,j){h.add(decodeURIComponent(C.replace(/\+/g," ")),j)}))}t=xa.prototype,t.add=function(h,C){Or(this),this.i=null,h=ba(this,h);var j=this.g.get(h);return j||this.g.set(h,j=[]),j.push(C),this.h+=1,this};function ru(h,C){Or(h),C=ba(h,C),h.g.has(C)&&(h.i=null,h.h-=h.g.get(C).length,h.g.delete(C))}function kl(h,C){return Or(h),C=ba(h,C),h.g.has(C)}t.forEach=function(h,C){Or(this),this.g.forEach(function(j,J){j.forEach(function(ye){h.call(C,ye,J,this)},this)},this)},t.na=function(){Or(this);const h=Array.from(this.g.values()),C=Array.from(this.g.keys()),j=[];for(let J=0;J<C.length;J++){const ye=h[J];for(let Ie=0;Ie<ye.length;Ie++)j.push(C[J])}return j},t.V=function(h){Or(this);let C=[];if(typeof h=="string")kl(this,h)&&(C=C.concat(this.g.get(ba(this,h))));else{h=Array.from(this.g.values());for(let j=0;j<h.length;j++)C=C.concat(h[j])}return C},t.set=function(h,C){return Or(this),this.i=null,h=ba(this,h),kl(this,h)&&(this.h-=this.g.get(h).length),this.g.set(h,[C]),this.h+=1,this},t.get=function(h,C){return h?(h=this.V(h),0<h.length?String(h[0]):C):C};function Vt(h,C,j){ru(h,C),0<j.length&&(h.i=null,h.g.set(ba(h,C),B(j)),h.h+=j.length)}t.toString=function(){if(this.i)return this.i;if(!this.g)return"";const h=[],C=Array.from(this.g.keys());for(var j=0;j<C.length;j++){var J=C[j];const Ie=encodeURIComponent(String(J)),Xe=this.V(J);for(J=0;J<Xe.length;J++){var ye=Ie;Xe[J]!==""&&(ye+="="+encodeURIComponent(String(Xe[J]))),h.push(ye)}}return this.i=h.join("&")};function ba(h,C){return C=String(C),h.j&&(C=C.toLowerCase()),C}function ah(h,C){C&&!h.j&&(Or(h),h.i=null,h.g.forEach(function(j,J){var ye=J.toLowerCase();J!=ye&&(ru(this,J),Vt(this,ye,j))},h)),h.j=C}function gi(h,C){const j=new ct;if(o.Image){const J=new Image;J.onload=m(Ys,j,"TestLoadImage: loaded",!0,C,J),J.onerror=m(Ys,j,"TestLoadImage: error",!1,C,J),J.onabort=m(Ys,j,"TestLoadImage: abort",!1,C,J),J.ontimeout=m(Ys,j,"TestLoadImage: timeout",!1,C,J),o.setTimeout(function(){J.ontimeout&&J.ontimeout()},1e4),J.src=h}else C(!1)}function nu(h,C){const j=new ct,J=new AbortController,ye=setTimeout(()=>{J.abort(),Ys(j,"TestPingServer: timeout",!1,C)},1e4);fetch(h,{signal:J.signal}).then(Ie=>{clearTimeout(ye),Ie.ok?Ys(j,"TestPingServer: ok",!0,C):Ys(j,"TestPingServer: server error",!1,C)}).catch(()=>{clearTimeout(ye),Ys(j,"TestPingServer: error",!1,C)})}function Ys(h,C,j,J,ye){try{ye&&(ye.onload=null,ye.onerror=null,ye.onabort=null,ye.ontimeout=null),J(j)}catch{}}function Zo(){this.g=new ur}function Dl(h,C,j){const J=j||"";try{eu(h,function(ye,Ie){let Xe=ye;c(ye)&&(Xe=_t(ye)),C.push(J+Ie+"="+encodeURIComponent(Xe))})}catch(ye){throw C.push(J+"type="+encodeURIComponent("_badmap")),ye}}function eA(h){this.l=h.Ub||null,this.j=h.eb||!1}b(eA,St),eA.prototype.g=function(){return new tA(this.l,this.j)},eA.prototype.i=function(h){return function(){return h}}({});function tA(h,C){ht.call(this),this.D=h,this.o=C,this.m=void 0,this.status=this.readyState=0,this.responseType=this.responseText=this.response=this.statusText="",this.onreadystatechange=null,this.u=new Headers,this.h=null,this.B="GET",this.A="",this.g=!1,this.v=this.j=this.l=null}b(tA,ht),t=tA.prototype,t.open=function(h,C){if(this.readyState!=0)throw this.abort(),Error("Error reopening a connection");this.B=h,this.A=C,this.readyState=1,Zs(this)},t.send=function(h){if(this.readyState!=1)throw this.abort(),Error("need to call open() first. ");this.g=!0;const C={headers:this.u,method:this.B,credentials:this.m,cache:void 0};h&&(C.body=h),(this.D||o).fetch(new Request(this.A,C)).then(this.Sa.bind(this),this.ga.bind(this))},t.abort=function(){this.response=this.responseText="",this.u=new Headers,this.status=0,this.j&&this.j.cancel("Request was aborted.").catch(()=>{}),1<=this.readyState&&this.g&&this.readyState!=4&&(this.g=!1,Hi(this)),this.readyState=0},t.Sa=function(h){if(this.g&&(this.l=h,this.h||(this.status=this.l.status,this.statusText=this.l.statusText,this.h=h.headers,this.readyState=2,Zs(this)),this.g&&(this.readyState=3,Zs(this),this.g)))if(this.responseType==="arraybuffer")h.arrayBuffer().then(this.Qa.bind(this),this.ga.bind(this));else if(typeof o.ReadableStream<"u"&&"body"in h){if(this.j=h.body.getReader(),this.o){if(this.responseType)throw Error('responseType must be empty for "streamBinaryChunks" mode responses.');this.response=[]}else this.response=this.responseText="",this.v=new TextDecoder;su(this)}else h.text().then(this.Ra.bind(this),this.ga.bind(this))};function su(h){h.j.read().then(h.Pa.bind(h)).catch(h.ga.bind(h))}t.Pa=function(h){if(this.g){if(this.o&&h.value)this.response.push(h.value);else if(!this.o){var C=h.value?h.value:new Uint8Array(0);(C=this.v.decode(C,{stream:!h.done}))&&(this.response=this.responseText+=C)}h.done?Hi(this):Zs(this),this.readyState==3&&su(this)}},t.Ra=function(h){this.g&&(this.response=this.responseText=h,Hi(this))},t.Qa=function(h){this.g&&(this.response=h,Hi(this))},t.ga=function(){this.g&&Hi(this)};function Hi(h){h.readyState=4,h.l=null,h.j=null,h.v=null,Zs(h)}t.setRequestHeader=function(h,C){this.u.append(h,C)},t.getResponseHeader=function(h){return this.h&&this.h.get(h.toLowerCase())||""},t.getAllResponseHeaders=function(){if(!this.h)return"";const h=[],C=this.h.entries();for(var j=C.next();!j.done;)j=j.value,h.push(j[0]+": "+j[1]),j=C.next();return h.join(`\r
`)};function Zs(h){h.onreadystatechange&&h.onreadystatechange.call(h)}Object.defineProperty(tA.prototype,"withCredentials",{get:function(){return this.m==="include"},set:function(h){this.m=h?"include":"same-origin"}});function Vi(h){let C="";return M(h,function(j,J){C+=J,C+=":",C+=j,C+=`\r
`}),C}function Rl(h,C,j){e:{for(J in j){var J=!1;break e}J=!0}J||(j=Vi(j),typeof h=="string"?j!=null&&encodeURIComponent(String(j)):br(h,C,j))}function wr(h){ht.call(this),this.headers=new Map,this.o=h||null,this.h=!1,this.v=this.g=null,this.D="",this.m=0,this.l="",this.j=this.B=this.u=this.A=!1,this.I=null,this.H="",this.J=!1}b(wr,ht);var Ml=/^https?$/i,rA=["POST","PUT"];t=wr.prototype,t.Ha=function(h){this.J=h},t.ea=function(h,C,j,J){if(this.g)throw Error("[goog.net.XhrIo] Object is active with another request="+this.D+"; newUri="+h);C=C?C.toUpperCase():"GET",this.D=h,this.l="",this.m=0,this.A=!1,this.h=!0,this.g=this.o?this.o.g():Zt.g(),this.v=this.o?Ur(this.o):Ur(Zt),this.g.onreadystatechange=p(this.Ea,this);try{this.B=!0,this.g.open(C,String(h),!0),this.B=!1}catch(Ie){Ol(this,Ie);return}if(h=j||"",j=new Map(this.headers),J)if(Object.getPrototypeOf(J)===Object.prototype)for(var ye in J)j.set(ye,J[ye]);else if(typeof J.keys=="function"&&typeof J.get=="function")for(const Ie of J.keys())j.set(Ie,J.get(Ie));else throw Error("Unknown input type for opt_headers: "+String(J));J=Array.from(j.keys()).find(Ie=>Ie.toLowerCase()=="content-type"),ye=o.FormData&&h instanceof o.FormData,!(0<=Array.prototype.indexOf.call(rA,C,void 0))||J||ye||j.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8");for(const[Ie,Xe]of j)this.g.setRequestHeader(Ie,Xe);this.H&&(this.g.responseType=this.H),"withCredentials"in this.g&&this.g.withCredentials!==this.J&&(this.g.withCredentials=this.J);try{ei(this),this.u=!0,this.g.send(h),this.u=!1}catch(Ie){Ol(this,Ie)}};function Ol(h,C){h.h=!1,h.g&&(h.j=!0,h.g.abort(),h.j=!1),h.l=C,h.m=5,Hl(h),to(h)}function Hl(h){h.A||(h.A=!0,Ct(h,"complete"),Ct(h,"error"))}t.abort=function(h){this.g&&this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1,this.m=h||7,Ct(this,"complete"),Ct(this,"abort"),to(this))},t.N=function(){this.g&&(this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1),to(this,!0)),wr.aa.N.call(this)},t.Ea=function(){this.s||(this.B||this.u||this.j?Vl(this):this.bb())},t.bb=function(){Vl(this)};function Vl(h){if(h.h&&typeof a<"u"&&(!h.v[1]||Sn(h)!=4||h.Z()!=2)){if(h.u&&Sn(h)==4)Et(h.Ea,0,h);else if(Ct(h,"readystatechange"),Sn(h)==4){h.h=!1;try{const Xe=h.Z();e:switch(Xe){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var C=!0;break e;default:C=!1}var j;if(!(j=C)){var J;if(J=Xe===0){var ye=String(h.D).match(Ds)[1]||null;!ye&&o.self&&o.self.location&&(ye=o.self.location.protocol.slice(0,-1)),J=!Ml.test(ye?ye.toLowerCase():"")}j=J}if(j)Ct(h,"complete"),Ct(h,"success");else{h.m=6;try{var Ie=2<Sn(h)?h.g.statusText:""}catch{Ie=""}h.l=Ie+" ["+h.Z()+"]",Hl(h)}}finally{to(h)}}}}function to(h,C){if(h.g){ei(h);const j=h.g,J=h.v[0]?()=>{}:null;h.g=null,h.v=null,C||Ct(h,"ready");try{j.onreadystatechange=J}catch{}}}function ei(h){h.I&&(o.clearTimeout(h.I),h.I=null)}t.isActive=function(){return!!this.g};function Sn(h){return h.g?h.g.readyState:0}t.Z=function(){try{return 2<Sn(this)?this.g.status:-1}catch{return-1}},t.oa=function(){try{return this.g?this.g.responseText:""}catch{return""}},t.Oa=function(h){if(this.g){var C=this.g.responseText;return h&&C.indexOf(h)==0&&(C=C.substring(h.length)),rt(C)}};function iu(h){try{if(!h.g)return null;if("response"in h.g)return h.g.response;switch(h.H){case"":case"text":return h.g.responseText;case"arraybuffer":if("mozResponseArrayBuffer"in h.g)return h.g.mozResponseArrayBuffer}return null}catch{return null}}function Ba(h){const C={};h=(h.g&&2<=Sn(h)&&h.g.getAllResponseHeaders()||"").split(`\r
`);for(let J=0;J<h.length;J++){if(y(h[J]))continue;var j=N(h[J]);const ye=j[0];if(j=j[1],typeof j!="string")continue;j=j.trim();const Ie=C[ye]||[];C[ye]=Ie,Ie.push(j)}I(C,function(J){return J.join(", ")})}t.Ba=function(){return this.m},t.Ka=function(){return typeof this.l=="string"?this.l:String(this.l)};function Xn(h,C,j){return j&&j.internalChannelParams&&j.internalChannelParams[h]||C}function nA(h){this.Aa=0,this.i=[],this.j=new ct,this.ia=this.qa=this.I=this.W=this.g=this.ya=this.D=this.H=this.m=this.S=this.o=null,this.Ya=this.U=0,this.Va=Xn("failFast",!1,h),this.F=this.C=this.u=this.s=this.l=null,this.X=!0,this.za=this.T=-1,this.Y=this.v=this.B=0,this.Ta=Xn("baseRetryDelayMs",5e3,h),this.cb=Xn("retryDelaySeedMs",1e4,h),this.Wa=Xn("forwardChannelMaxRetries",2,h),this.wa=Xn("forwardChannelRequestTimeoutMs",2e4,h),this.pa=h&&h.xmlHttpFactory||void 0,this.Xa=h&&h.Tb||void 0,this.Ca=h&&h.useFetchStreams||!1,this.L=void 0,this.J=h&&h.supportsCrossDomainXhr||!1,this.K="",this.h=new Tl(h&&h.concurrentRequestLimit),this.Da=new Zo,this.P=h&&h.fastHandshake||!1,this.O=h&&h.encodeInitMessageHeaders||!1,this.P&&this.O&&(this.O=!1),this.Ua=h&&h.Rb||!1,h&&h.xa&&this.j.xa(),h&&h.forceLongPolling&&(this.X=!1),this.ba=!this.P&&this.X&&h&&h.detectBufferingProxy||!1,this.ja=void 0,h&&h.longPollingTimeout&&0<h.longPollingTimeout&&(this.ja=h.longPollingTimeout),this.ca=void 0,this.R=0,this.M=!1,this.ka=this.A=null}t=nA.prototype,t.la=8,t.G=1,t.connect=function(h,C,j,J){Oe(0),this.W=h,this.H=C||{},j&&J!==void 0&&(this.H.OSID=j,this.H.OAID=J),this.F=this.X,this.I=v(this,null,this.W),iA(this)};function Ki(h){if(ro(h),h.G==3){var C=h.U++,j=_s(h.I);if(br(j,"SID",h.K),br(j,"RID",C),br(j,"TYPE","terminate"),Ca(h,j),C=new mt(h,h.j,C),C.L=2,C.v=Za(_s(j)),j=!1,o.navigator&&o.navigator.sendBeacon)try{j=o.navigator.sendBeacon(C.v.toString(),"")}catch{}!j&&o.Image&&(new Image().src=C.v,j=!0),j||(C.g=H(C.j,null),C.g.ea(C.v)),C.F=Date.now(),$o(C)}cA(h)}function sA(h){h.g&&(AA(h),h.g.cancel(),h.g=null)}function ro(h){sA(h),h.u&&(o.clearTimeout(h.u),h.u=null),qi(h),h.h.cancel(),h.s&&(typeof h.s=="number"&&o.clearTimeout(h.s),h.s=null)}function iA(h){if(!Yc(h.h)&&!h.s){h.s=!0;var C=h.Ga;de||ae(),W||(de(),W=!0),ue.add(C,h),h.B=0}}function Kl(h,C){return Ja(h.h)>=h.h.j-(h.s?1:0)?!1:h.s?(h.i=C.D.concat(h.i),!0):h.G==1||h.G==2||h.B>=(h.Va?0:h.Wa)?!1:(h.s=ft(p(h.Ga,h,C),lA(h,h.B)),h.B++,!0)}t.Ga=function(h){if(this.s)if(this.s=null,this.G==1){if(!h){this.U=Math.floor(1e5*Math.random()),h=this.U++;const ye=new mt(this,this.j,h);let Ie=this.o;if(this.S&&(Ie?(Ie=E(Ie),D(Ie,this.S)):Ie=this.S),this.m!==null||this.O||(ye.H=Ie,Ie=null),this.P)e:{for(var C=0,j=0;j<this.i.length;j++){t:{var J=this.i[j];if("__data__"in J.map&&(J=J.map.__data__,typeof J=="string")){J=J.length;break t}J=void 0}if(J===void 0)break;if(C+=J,4096<C){C=j;break e}if(C===4096||j===this.i.length-1){C=j+1;break e}}C=1e3}else C=1e3;C=no(this,ye,C),j=_s(this.I),br(j,"RID",h),br(j,"CVER",22),this.D&&br(j,"X-HTTP-Session-Id",this.D),Ca(this,j),Ie&&(this.O?C="headers="+encodeURIComponent(String(Vi(Ie)))+"&"+C:this.m&&Rl(j,this.m,Ie)),Mr(this.h,ye),this.Ua&&br(j,"TYPE","init"),this.P?(br(j,"$req",C),br(j,"SID","null"),ye.T=!0,va(ye,j,null)):va(ye,j,C),this.G=2}}else this.G==3&&(h?aA(this,h):this.i.length==0||Yc(this.h)||aA(this))};function aA(h,C){var j;C?j=C.l:j=h.U++;const J=_s(h.I);br(J,"SID",h.K),br(J,"RID",j),br(J,"AID",h.T),Ca(h,J),h.m&&h.o&&Rl(J,h.m,h.o),j=new mt(h,h.j,j,h.B+1),h.m===null&&(j.H=h.o),C&&(h.i=C.D.concat(h.i)),C=no(h,j,1e3),j.I=Math.round(.5*h.wa)+Math.round(.5*h.wa*Math.random()),Mr(h.h,j),va(j,J,C)}function Ca(h,C){h.H&&M(h.H,function(j,J){br(C,J,j)}),h.l&&eu({},function(j,J){br(C,J,j)})}function no(h,C,j){j=Math.min(h.i.length,j);var J=h.l?p(h.l.Na,h.l,h):null;e:{var ye=h.i;let Ie=-1;for(;;){const Xe=["count="+j];Ie==-1?0<j?(Ie=ye[0].g,Xe.push("ofs="+Ie)):Ie=0:Xe.push("ofs="+Ie);let Gt=!0;for(let ir=0;ir<j;ir++){let zt=ye[ir].g;const yr=ye[ir].map;if(zt-=Ie,0>zt)Ie=Math.max(0,ye[ir].g-100),Gt=!1;else try{Dl(yr,Xe,"req"+zt+"_")}catch{J&&J(yr)}}if(Gt){J=Xe.join("&");break e}}}return h=h.i.splice(0,j),C.D=h,J}function oA(h){if(!h.g&&!h.u){h.Y=1;var C=h.Fa;de||ae(),W||(de(),W=!0),ue.add(C,h),h.v=0}}function so(h){return h.g||h.u||3<=h.v?!1:(h.Y++,h.u=ft(p(h.Fa,h),lA(h,h.v)),h.v++,!0)}t.Fa=function(){if(this.u=null,au(this),this.ba&&!(this.M||this.g==null||0>=this.R)){var h=2*this.R;this.j.info("BP detection timer enabled: "+h),this.A=ft(p(this.ab,this),h)}},t.ab=function(){this.A&&(this.A=null,this.j.info("BP detection timeout reached."),this.j.info("Buffering proxy detected and switch to long-polling!"),this.F=!1,this.M=!0,Oe(10),sA(this),au(this))};function AA(h){h.A!=null&&(o.clearTimeout(h.A),h.A=null)}function au(h){h.g=new mt(h,h.j,"rpc",h.Y),h.m===null&&(h.g.H=h.o),h.g.O=0;var C=_s(h.qa);br(C,"RID","rpc"),br(C,"SID",h.K),br(C,"AID",h.T),br(C,"CI",h.F?"0":"1"),!h.F&&h.ja&&br(C,"TO",h.ja),br(C,"TYPE","xmlhttp"),Ca(h,C),h.m&&h.o&&Rl(C,h.m,h.o),h.L&&(h.g.I=h.L);var j=h.g;h=h.ia,j.L=1,j.v=Za(_s(C)),j.m=null,j.P=!0,$a(j,h)}t.Za=function(){this.C!=null&&(this.C=null,sA(this),so(this),Oe(19))};function qi(h){h.C!=null&&(o.clearTimeout(h.C),h.C=null)}function Ea(h,C){var j=null;if(h.g==C){qi(h),AA(h),h.g=null;var J=2}else if(Ul(h.h,C))j=C.D,Pl(h.h,C),J=1;else return;if(h.G!=0){if(C.o)if(J==1){j=C.m?C.m.length:0,C=Date.now()-C.F;var ye=h.B;J=cs(),Ct(J,new Ft(J,j)),iA(h)}else oA(h);else if(ye=C.s,ye==3||ye==0&&0<C.X||!(J==1&&Kl(h,C)||J==2&&so(h)))switch(j&&0<j.length&&(C=h.h,C.i=C.i.concat(j)),ye){case 1:us(h,5);break;case 4:us(h,10);break;case 3:us(h,6);break;default:us(h,2)}}}function lA(h,C){let j=h.Ta+Math.floor(Math.random()*h.cb);return h.isActive()||(j*=2),j*C}function us(h,C){if(h.j.info("Error code "+C),C==2){var j=p(h.fb,h),J=h.Xa;const ye=!J;J=new An(J||"//www.google.com/images/cleardot.gif"),o.location&&o.location.protocol=="http"||Ya(J,"https"),Za(J),ye?gi(J.toString(),j):nu(J.toString(),j)}else Oe(2);h.G=0,h.l&&h.l.sa(C),cA(h),ro(h)}t.fb=function(h){h?(this.j.info("Successfully pinged google.com"),Oe(2)):(this.j.info("Failed to ping google.com"),Oe(1))};function cA(h){if(h.G=0,h.ka=[],h.l){const C=Ql(h.h);(C.length!=0||h.i.length!=0)&&(_(h.ka,C),_(h.ka,h.i),h.h.i.length=0,B(h.i),h.i.length=0),h.l.ra()}}function v(h,C,j){var J=j instanceof An?_s(j):new An(j);if(J.g!="")C&&(J.g=C+"."+J.g),Xo(J,J.s);else{var ye=o.location;J=ye.protocol,C=C?C+"."+ye.hostname:ye.hostname,ye=+ye.port;var Ie=new An(null);J&&Ya(Ie,J),C&&(Ie.g=C),ye&&Xo(Ie,ye),j&&(Ie.l=j),J=Ie}return j=h.D,C=h.ya,j&&C&&br(J,j,C),br(J,"VER",h.la),Ca(h,J),J}function H(h,C,j){if(C&&!h.J)throw Error("Can't create secondary domain capable XhrIo object.");return C=h.Ca&&!h.pa?new wr(new eA({eb:j})):new wr(h.pa),C.Ha(h.J),C}t.isActive=function(){return!!this.l&&this.l.isActive(this)};function Ae(){}t=Ae.prototype,t.ua=function(){},t.ta=function(){},t.sa=function(){},t.ra=function(){},t.isActive=function(){return!0},t.Na=function(){};function fe(){}fe.prototype.g=function(h,C){return new xe(h,C)};function xe(h,C){ht.call(this),this.g=new nA(C),this.l=h,this.h=C&&C.messageUrlParams||null,h=C&&C.messageHeaders||null,C&&C.clientProtocolHeaderRequired&&(h?h["X-Client-Protocol"]="webchannel":h={"X-Client-Protocol":"webchannel"}),this.g.o=h,h=C&&C.initMessageHeaders||null,C&&C.messageContentType&&(h?h["X-WebChannel-Content-Type"]=C.messageContentType:h={"X-WebChannel-Content-Type":C.messageContentType}),C&&C.va&&(h?h["X-WebChannel-Client-Profile"]=C.va:h={"X-WebChannel-Client-Profile":C.va}),this.g.S=h,(h=C&&C.Sb)&&!y(h)&&(this.g.m=h),this.v=C&&C.supportsCrossDomainXhr||!1,this.u=C&&C.sendRawJson||!1,(C=C&&C.httpSessionIdParam)&&!y(C)&&(this.g.D=C,h=this.h,h!==null&&C in h&&(h=this.h,C in h&&delete h[C])),this.j=new lt(this)}b(xe,ht),xe.prototype.m=function(){this.g.l=this.j,this.v&&(this.g.J=!0),this.g.connect(this.l,this.h||void 0)},xe.prototype.close=function(){Ki(this.g)},xe.prototype.o=function(h){var C=this.g;if(typeof h=="string"){var j={};j.__data__=h,h=j}else this.u&&(j={},j.__data__=_t(h),h=j);C.i.push(new nh(C.Ya++,h)),C.G==3&&iA(C)},xe.prototype.N=function(){this.g.l=null,delete this.j,Ki(this.g),delete this.g,xe.aa.N.call(this)};function De(h){hn.call(this),h.__headers__&&(this.headers=h.__headers__,this.statusCode=h.__status__,delete h.__headers__,delete h.__status__);var C=h.__sm__;if(C){e:{for(const j in C){h=j;break e}h=void 0}(this.i=h)&&(h=this.i,C=C!==null&&h in C?C[h]:void 0),this.data=C}else this.data=h}b(De,hn);function $e(){vr.call(this),this.status=1}b($e,vr);function lt(h){this.g=h}b(lt,Ae),lt.prototype.ua=function(){Ct(this.g,"a")},lt.prototype.ta=function(h){Ct(this.g,new De(h))},lt.prototype.sa=function(h){Ct(this.g,new $e)},lt.prototype.ra=function(){Ct(this.g,"b")},fe.prototype.createWebChannel=fe.prototype.g,xe.prototype.send=xe.prototype.o,xe.prototype.open=xe.prototype.m,xe.prototype.close=xe.prototype.close,c4=function(){return new fe},l4=function(){return cs()},A4=jt,A2={mb:0,pb:1,qb:2,Jb:3,Ob:4,Lb:5,Mb:6,Kb:7,Ib:8,Nb:9,PROXY:10,NOPROXY:11,Gb:12,Cb:13,Db:14,Bb:15,Eb:16,Fb:17,ib:18,hb:19,jb:20},nt.NO_ERROR=0,nt.TIMEOUT=8,nt.HTTP_ERROR=6,Vg=nt,Mt.COMPLETE="complete",o4=Mt,sr.EventType=fr,fr.OPEN="a",fr.CLOSE="b",fr.ERROR="c",fr.MESSAGE="d",ht.prototype.listen=ht.prototype.K,Yh=sr,wr.prototype.listenOnce=wr.prototype.L,wr.prototype.getLastError=wr.prototype.Ka,wr.prototype.getLastErrorCode=wr.prototype.Ba,wr.prototype.getStatus=wr.prototype.Z,wr.prototype.getResponseJson=wr.prototype.Oa,wr.prototype.getResponseText=wr.prototype.oa,wr.prototype.send=wr.prototype.ea,wr.prototype.setWithCredentials=wr.prototype.Ha,a4=wr}).apply(typeof km<"u"?km:typeof self<"u"?self:typeof window<"u"?window:{});const V5="@firebase/firestore";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ns{constructor(e){this.uid=e}isAuthenticated(){return this.uid!=null}toKey(){return this.isAuthenticated()?"uid:"+this.uid:"anonymous-user"}isEqual(e){return e.uid===this.uid}}ns.UNAUTHENTICATED=new ns(null),ns.GOOGLE_CREDENTIALS=new ns("google-credentials-uid"),ns.FIRST_PARTY=new ns("first-party-uid"),ns.MOCK_USER=new ns("mock-user");/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let Gd="10.14.0";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Lc=new db("@firebase/firestore");function Ru(){return Lc.logLevel}function Je(t,...e){if(Lc.logLevel<=Ar.DEBUG){const r=e.map(_b);Lc.debug(`Firestore (${Gd}): ${t}`,...r)}}function Us(t,...e){if(Lc.logLevel<=Ar.ERROR){const r=e.map(_b);Lc.error(`Firestore (${Gd}): ${t}`,...r)}}function fl(t,...e){if(Lc.logLevel<=Ar.WARN){const r=e.map(_b);Lc.warn(`Firestore (${Gd}): ${t}`,...r)}}function _b(t){if(typeof t=="string")return t;try{/**
* @license
* Copyright 2020 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/return function(r){return JSON.stringify(r)}(t)}catch{return t}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Bt(t="Unexpected state"){const e=`FIRESTORE (${Gd}) INTERNAL ASSERTION FAILED: `+t;throw Us(e),new Error(e)}function Tt(t,e){t||Bt()}function qt(t,e){return t}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Me={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"};class st extends qo{constructor(e,r){super(e,r),this.code=e,this.message=r,this.toString=()=>`${this.name}: [code=${this.code}]: ${this.message}`}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class aa{constructor(){this.promise=new Promise((e,r)=>{this.resolve=e,this.reject=r})}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class u4{constructor(e,r){this.user=r,this.type="OAuth",this.headers=new Map,this.headers.set("Authorization",`Bearer ${e}`)}}class d4{getToken(){return Promise.resolve(null)}invalidateToken(){}start(e,r){e.enqueueRetryable(()=>r(ns.UNAUTHENTICATED))}shutdown(){}}class lM{constructor(e){this.token=e,this.changeListener=null}getToken(){return Promise.resolve(this.token)}invalidateToken(){}start(e,r){this.changeListener=r,e.enqueueRetryable(()=>r(this.token.user))}shutdown(){this.changeListener=null}}class cM{constructor(e){this.t=e,this.currentUser=ns.UNAUTHENTICATED,this.i=0,this.forceRefresh=!1,this.auth=null}start(e,r){Tt(this.o===void 0);let n=this.i;const s=l=>this.i!==n?(n=this.i,r(l)):Promise.resolve();let i=new aa;this.o=()=>{this.i++,this.currentUser=this.u(),i.resolve(),i=new aa,e.enqueueRetryable(()=>s(this.currentUser))};const a=()=>{const l=i;e.enqueueRetryable(async()=>{await l.promise,await s(this.currentUser)})},o=l=>{Je("FirebaseAuthCredentialsProvider","Auth detected"),this.auth=l,this.o&&(this.auth.addAuthTokenListener(this.o),a())};this.t.onInit(l=>o(l)),setTimeout(()=>{if(!this.auth){const l=this.t.getImmediate({optional:!0});l?o(l):(Je("FirebaseAuthCredentialsProvider","Auth not yet detected"),i.resolve(),i=new aa)}},0),a()}getToken(){const e=this.i,r=this.forceRefresh;return this.forceRefresh=!1,this.auth?this.auth.getToken(r).then(n=>this.i!==e?(Je("FirebaseAuthCredentialsProvider","getToken aborted due to token change."),this.getToken()):n?(Tt(typeof n.accessToken=="string"),new u4(n.accessToken,this.currentUser)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.auth&&this.o&&this.auth.removeAuthTokenListener(this.o),this.o=void 0}u(){const e=this.auth&&this.auth.getUid();return Tt(e===null||typeof e=="string"),new ns(e)}}class uM{constructor(e,r,n){this.l=e,this.h=r,this.P=n,this.type="FirstParty",this.user=ns.FIRST_PARTY,this.I=new Map}T(){return this.P?this.P():null}get headers(){this.I.set("X-Goog-AuthUser",this.l);const e=this.T();return e&&this.I.set("Authorization",e),this.h&&this.I.set("X-Goog-Iam-Authorization-Token",this.h),this.I}}class dM{constructor(e,r,n){this.l=e,this.h=r,this.P=n}getToken(){return Promise.resolve(new uM(this.l,this.h,this.P))}start(e,r){e.enqueueRetryable(()=>r(ns.FIRST_PARTY))}shutdown(){}invalidateToken(){}}class hM{constructor(e){this.value=e,this.type="AppCheck",this.headers=new Map,e&&e.length>0&&this.headers.set("x-firebase-appcheck",this.value)}}class fM{constructor(e){this.A=e,this.forceRefresh=!1,this.appCheck=null,this.R=null}start(e,r){Tt(this.o===void 0);const n=i=>{i.error!=null&&Je("FirebaseAppCheckTokenProvider",`Error getting App Check token; using placeholder token instead. Error: ${i.error.message}`);const a=i.token!==this.R;return this.R=i.token,Je("FirebaseAppCheckTokenProvider",`Received ${a?"new":"existing"} token.`),a?r(i.token):Promise.resolve()};this.o=i=>{e.enqueueRetryable(()=>n(i))};const s=i=>{Je("FirebaseAppCheckTokenProvider","AppCheck detected"),this.appCheck=i,this.o&&this.appCheck.addTokenListener(this.o)};this.A.onInit(i=>s(i)),setTimeout(()=>{if(!this.appCheck){const i=this.A.getImmediate({optional:!0});i?s(i):Je("FirebaseAppCheckTokenProvider","AppCheck not yet detected")}},0)}getToken(){const e=this.forceRefresh;return this.forceRefresh=!1,this.appCheck?this.appCheck.getToken(e).then(r=>r?(Tt(typeof r.token=="string"),this.R=r.token,new hM(r.token)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.appCheck&&this.o&&this.appCheck.removeTokenListener(this.o),this.o=void 0}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function pM(t){const e=typeof self<"u"&&(self.crypto||self.msCrypto),r=new Uint8Array(t);if(e&&typeof e.getRandomValues=="function")e.getRandomValues(r);else for(let n=0;n<t;n++)r[n]=Math.floor(256*Math.random());return r}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Nb{static newId(){const e="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",r=Math.floor(256/e.length)*e.length;let n="";for(;n.length<20;){const s=pM(40);for(let i=0;i<s.length;++i)n.length<20&&s[i]<r&&(n+=e.charAt(s[i]%e.length))}return n}}function Wt(t,e){return t<e?-1:t>e?1:0}function Sd(t,e,r){return t.length===e.length&&t.every((n,s)=>r(n,e[s]))}function h4(t){return t+"\0"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Dt{constructor(e,r){if(this.seconds=e,this.nanoseconds=r,r<0)throw new st(Me.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+r);if(r>=1e9)throw new st(Me.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+r);if(e<-62135596800)throw new st(Me.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e);if(e>=253402300800)throw new st(Me.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e)}static now(){return Dt.fromMillis(Date.now())}static fromDate(e){return Dt.fromMillis(e.getTime())}static fromMillis(e){const r=Math.floor(e/1e3),n=Math.floor(1e6*(e-1e3*r));return new Dt(r,n)}toDate(){return new Date(this.toMillis())}toMillis(){return 1e3*this.seconds+this.nanoseconds/1e6}_compareTo(e){return this.seconds===e.seconds?Wt(this.nanoseconds,e.nanoseconds):Wt(this.seconds,e.seconds)}isEqual(e){return e.seconds===this.seconds&&e.nanoseconds===this.nanoseconds}toString(){return"Timestamp(seconds="+this.seconds+", nanoseconds="+this.nanoseconds+")"}toJSON(){return{seconds:this.seconds,nanoseconds:this.nanoseconds}}valueOf(){const e=this.seconds- -62135596800;return String(e).padStart(12,"0")+"."+String(this.nanoseconds).padStart(9,"0")}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Qt{constructor(e){this.timestamp=e}static fromTimestamp(e){return new Qt(e)}static min(){return new Qt(new Dt(0,0))}static max(){return new Qt(new Dt(253402300799,999999999))}compareTo(e){return this.timestamp._compareTo(e.timestamp)}isEqual(e){return this.timestamp.isEqual(e.timestamp)}toMicroseconds(){return 1e6*this.timestamp.seconds+this.timestamp.nanoseconds/1e3}toString(){return"SnapshotVersion("+this.timestamp.toString()+")"}toTimestamp(){return this.timestamp}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class np{constructor(e,r,n){r===void 0?r=0:r>e.length&&Bt(),n===void 0?n=e.length-r:n>e.length-r&&Bt(),this.segments=e,this.offset=r,this.len=n}get length(){return this.len}isEqual(e){return np.comparator(this,e)===0}child(e){const r=this.segments.slice(this.offset,this.limit());return e instanceof np?e.forEach(n=>{r.push(n)}):r.push(e),this.construct(r)}limit(){return this.offset+this.length}popFirst(e){return e=e===void 0?1:e,this.construct(this.segments,this.offset+e,this.length-e)}popLast(){return this.construct(this.segments,this.offset,this.length-1)}firstSegment(){return this.segments[this.offset]}lastSegment(){return this.get(this.length-1)}get(e){return this.segments[this.offset+e]}isEmpty(){return this.length===0}isPrefixOf(e){if(e.length<this.length)return!1;for(let r=0;r<this.length;r++)if(this.get(r)!==e.get(r))return!1;return!0}isImmediateParentOf(e){if(this.length+1!==e.length)return!1;for(let r=0;r<this.length;r++)if(this.get(r)!==e.get(r))return!1;return!0}forEach(e){for(let r=this.offset,n=this.limit();r<n;r++)e(this.segments[r])}toArray(){return this.segments.slice(this.offset,this.limit())}static comparator(e,r){const n=Math.min(e.length,r.length);for(let s=0;s<n;s++){const i=e.get(s),a=r.get(s);if(i<a)return-1;if(i>a)return 1}return e.length<r.length?-1:e.length>r.length?1:0}}class pr extends np{construct(e,r,n){return new pr(e,r,n)}canonicalString(){return this.toArray().join("/")}toString(){return this.canonicalString()}toUriEncodedString(){return this.toArray().map(encodeURIComponent).join("/")}static fromString(...e){const r=[];for(const n of e){if(n.indexOf("//")>=0)throw new st(Me.INVALID_ARGUMENT,`Invalid segment (${n}). Paths must not contain // in them.`);r.push(...n.split("/").filter(s=>s.length>0))}return new pr(r)}static emptyPath(){return new pr([])}}const mM=/^[_a-zA-Z][_a-zA-Z0-9]*$/;class Yr extends np{construct(e,r,n){return new Yr(e,r,n)}static isValidIdentifier(e){return mM.test(e)}canonicalString(){return this.toArray().map(e=>(e=e.replace(/\\/g,"\\\\").replace(/`/g,"\\`"),Yr.isValidIdentifier(e)||(e="`"+e+"`"),e)).join(".")}toString(){return this.canonicalString()}isKeyField(){return this.length===1&&this.get(0)==="__name__"}static keyField(){return new Yr(["__name__"])}static fromServerFormat(e){const r=[];let n="",s=0;const i=()=>{if(n.length===0)throw new st(Me.INVALID_ARGUMENT,`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`);r.push(n),n=""};let a=!1;for(;s<e.length;){const o=e[s];if(o==="\\"){if(s+1===e.length)throw new st(Me.INVALID_ARGUMENT,"Path has trailing escape character: "+e);const l=e[s+1];if(l!=="\\"&&l!=="."&&l!=="`")throw new st(Me.INVALID_ARGUMENT,"Path has invalid escape sequence: "+e);n+=l,s+=2}else o==="`"?(a=!a,s++):o!=="."||a?(n+=o,s++):(i(),s++)}if(i(),a)throw new st(Me.INVALID_ARGUMENT,"Unterminated ` in path: "+e);return new Yr(r)}static emptyPath(){return new Yr([])}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class dt{constructor(e){this.path=e}static fromPath(e){return new dt(pr.fromString(e))}static fromName(e){return new dt(pr.fromString(e).popFirst(5))}static empty(){return new dt(pr.emptyPath())}get collectionGroup(){return this.path.popLast().lastSegment()}hasCollectionId(e){return this.path.length>=2&&this.path.get(this.path.length-2)===e}getCollectionGroup(){return this.path.get(this.path.length-2)}getCollectionPath(){return this.path.popLast()}isEqual(e){return e!==null&&pr.comparator(this.path,e.path)===0}toString(){return this.path.toString()}static comparator(e,r){return pr.comparator(e.path,r.path)}static isDocumentKey(e){return e.length%2==0}static fromSegments(e){return new dt(new pr(e.slice()))}}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Q0{constructor(e,r,n,s){this.indexId=e,this.collectionGroup=r,this.fields=n,this.indexState=s}}function l2(t){return t.fields.find(e=>e.kind===2)}function sc(t){return t.fields.filter(e=>e.kind!==2)}Q0.UNKNOWN_ID=-1;class Kg{constructor(e,r){this.fieldPath=e,this.kind=r}}class sp{constructor(e,r){this.sequenceNumber=e,this.offset=r}static empty(){return new sp(0,di.min())}}function gM(t,e){const r=t.toTimestamp().seconds,n=t.toTimestamp().nanoseconds+1,s=Qt.fromTimestamp(n===1e9?new Dt(r+1,0):new Dt(r,n));return new di(s,dt.empty(),e)}function f4(t){return new di(t.readTime,t.key,-1)}class di{constructor(e,r,n){this.readTime=e,this.documentKey=r,this.largestBatchId=n}static min(){return new di(Qt.min(),dt.empty(),-1)}static max(){return new di(Qt.max(),dt.empty(),-1)}}function Ib(t,e){let r=t.readTime.compareTo(e.readTime);return r!==0?r:(r=dt.comparator(t.documentKey,e.documentKey),r!==0?r:Wt(t.largestBatchId,e.largestBatchId))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const p4="The current tab is not in the required state to perform this operation. It might be necessary to refresh the browser tab.";class m4{constructor(){this.onCommittedListeners=[]}addOnCommittedListener(e){this.onCommittedListeners.push(e)}raiseOnCommittedEvent(){this.onCommittedListeners.forEach(e=>e())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Kc(t){if(t.code!==Me.FAILED_PRECONDITION||t.message!==p4)throw t;Je("LocalStore","Unexpectedly lost primary lease")}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Se{constructor(e){this.nextCallback=null,this.catchCallback=null,this.result=void 0,this.error=void 0,this.isDone=!1,this.callbackAttached=!1,e(r=>{this.isDone=!0,this.result=r,this.nextCallback&&this.nextCallback(r)},r=>{this.isDone=!0,this.error=r,this.catchCallback&&this.catchCallback(r)})}catch(e){return this.next(void 0,e)}next(e,r){return this.callbackAttached&&Bt(),this.callbackAttached=!0,this.isDone?this.error?this.wrapFailure(r,this.error):this.wrapSuccess(e,this.result):new Se((n,s)=>{this.nextCallback=i=>{this.wrapSuccess(e,i).next(n,s)},this.catchCallback=i=>{this.wrapFailure(r,i).next(n,s)}})}toPromise(){return new Promise((e,r)=>{this.next(e,r)})}wrapUserFunction(e){try{const r=e();return r instanceof Se?r:Se.resolve(r)}catch(r){return Se.reject(r)}}wrapSuccess(e,r){return e?this.wrapUserFunction(()=>e(r)):Se.resolve(r)}wrapFailure(e,r){return e?this.wrapUserFunction(()=>e(r)):Se.reject(r)}static resolve(e){return new Se((r,n)=>{r(e)})}static reject(e){return new Se((r,n)=>{n(e)})}static waitFor(e){return new Se((r,n)=>{let s=0,i=0,a=!1;e.forEach(o=>{++s,o.next(()=>{++i,a&&i===s&&r()},l=>n(l))}),a=!0,i===s&&r()})}static or(e){let r=Se.resolve(!1);for(const n of e)r=r.next(s=>s?Se.resolve(s):n());return r}static forEach(e,r){const n=[];return e.forEach((s,i)=>{n.push(r.call(this,s,i))}),this.waitFor(n)}static mapArray(e,r){return new Se((n,s)=>{const i=e.length,a=new Array(i);let o=0;for(let l=0;l<i;l++){const c=l;r(e[c]).next(u=>{a[c]=u,++o,o===i&&n(a)},u=>s(u))}})}static doWhile(e,r){return new Se((n,s)=>{const i=()=>{e()===!0?r().next(()=>{i()},s):n()};i()})}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Fv{constructor(e,r){this.action=e,this.transaction=r,this.aborted=!1,this.V=new aa,this.transaction.oncomplete=()=>{this.V.resolve()},this.transaction.onabort=()=>{r.error?this.V.reject(new yf(e,r.error)):this.V.resolve()},this.transaction.onerror=n=>{const s=Sb(n.target.error);this.V.reject(new yf(e,s))}}static open(e,r,n,s){try{return new Fv(r,e.transaction(s,n))}catch(i){throw new yf(r,i)}}get m(){return this.V.promise}abort(e){e&&this.V.reject(e),this.aborted||(Je("SimpleDb","Aborting transaction:",e?e.message:"Client-initiated abort"),this.aborted=!0,this.transaction.abort())}g(){const e=this.transaction;this.aborted||typeof e.commit!="function"||e.commit()}store(e){const r=this.transaction.objectStore(e);return new wM(r)}}class ol{constructor(e,r,n){this.name=e,this.version=r,this.p=n,ol.S(jn())===12.2&&Us("Firestore persistence suffers from a bug in iOS 12.2 Safari that may cause your app to stop working. See https://stackoverflow.com/q/56496296/110915 for details and a potential workaround.")}static delete(e){return Je("SimpleDb","Removing database:",e),oc(window.indexedDB.deleteDatabase(e)).toPromise()}static D(){if(!gF())return!1;if(ol.v())return!0;const e=jn(),r=ol.S(e),n=0<r&&r<10,s=g4(e),i=0<s&&s<4.5;return!(e.indexOf("MSIE ")>0||e.indexOf("Trident/")>0||e.indexOf("Edge/")>0||n||i)}static v(){var e;return typeof process<"u"&&((e=process.__PRIVATE_env)===null||e===void 0?void 0:e.C)==="YES"}static F(e,r){return e.store(r)}static S(e){const r=e.match(/i(?:phone|pad|pod) os ([\d_]+)/i),n=r?r[1].split("_").slice(0,2).join("."):"-1";return Number(n)}async M(e){return this.db||(Je("SimpleDb","Opening database:",this.name),this.db=await new Promise((r,n)=>{const s=indexedDB.open(this.name,this.version);s.onsuccess=i=>{const a=i.target.result;r(a)},s.onblocked=()=>{n(new yf(e,"Cannot upgrade IndexedDB schema while another tab is open. Close all tabs that access Firestore and reload this page to proceed."))},s.onerror=i=>{const a=i.target.error;a.name==="VersionError"?n(new st(Me.FAILED_PRECONDITION,"A newer version of the Firestore SDK was previously used and so the persisted data is not compatible with the version of the SDK you are now using. The SDK will operate with persistence disabled. If you need persistence, please re-upgrade to a newer version of the SDK or else clear the persisted IndexedDB data for your app to start fresh.")):a.name==="InvalidStateError"?n(new st(Me.FAILED_PRECONDITION,"Unable to open an IndexedDB connection. This could be due to running in a private browsing session on a browser whose private browsing sessions do not support IndexedDB: "+a)):n(new yf(e,a))},s.onupgradeneeded=i=>{Je("SimpleDb",'Database "'+this.name+'" requires upgrade from version:',i.oldVersion);const a=i.target.result;this.p.O(a,s.transaction,i.oldVersion,this.version).next(()=>{Je("SimpleDb","Database upgrade to version "+this.version+" complete")})}})),this.N&&(this.db.onversionchange=r=>this.N(r)),this.db}L(e){this.N=e,this.db&&(this.db.onversionchange=r=>e(r))}async runTransaction(e,r,n,s){const i=r==="readonly";let a=0;for(;;){++a;try{this.db=await this.M(e);const o=Fv.open(this.db,e,i?"readonly":"readwrite",n),l=s(o).next(c=>(o.g(),c)).catch(c=>(o.abort(c),Se.reject(c))).toPromise();return l.catch(()=>{}),await o.m,l}catch(o){const l=o,c=l.name!=="FirebaseError"&&a<3;if(Je("SimpleDb","Transaction failed with error:",l.message,"Retrying:",c),this.close(),!c)return Promise.reject(l)}}}close(){this.db&&this.db.close(),this.db=void 0}}function g4(t){const e=t.match(/Android ([\d.]+)/i),r=e?e[1].split(".").slice(0,2).join("."):"-1";return Number(r)}class vM{constructor(e){this.B=e,this.k=!1,this.q=null}get isDone(){return this.k}get K(){return this.q}set cursor(e){this.B=e}done(){this.k=!0}$(e){this.q=e}delete(){return oc(this.B.delete())}}class yf extends st{constructor(e,r){super(Me.UNAVAILABLE,`IndexedDB transaction '${e}' failed: ${r}`),this.name="IndexedDbTransactionError"}}function Sl(t){return t.name==="IndexedDbTransactionError"}class wM{constructor(e){this.store=e}put(e,r){let n;return r!==void 0?(Je("SimpleDb","PUT",this.store.name,e,r),n=this.store.put(r,e)):(Je("SimpleDb","PUT",this.store.name,"<auto-key>",e),n=this.store.put(e)),oc(n)}add(e){return Je("SimpleDb","ADD",this.store.name,e,e),oc(this.store.add(e))}get(e){return oc(this.store.get(e)).next(r=>(r===void 0&&(r=null),Je("SimpleDb","GET",this.store.name,e,r),r))}delete(e){return Je("SimpleDb","DELETE",this.store.name,e),oc(this.store.delete(e))}count(){return Je("SimpleDb","COUNT",this.store.name),oc(this.store.count())}U(e,r){const n=this.options(e,r),s=n.index?this.store.index(n.index):this.store;if(typeof s.getAll=="function"){const i=s.getAll(n.range);return new Se((a,o)=>{i.onerror=l=>{o(l.target.error)},i.onsuccess=l=>{a(l.target.result)}})}{const i=this.cursor(n),a=[];return this.W(i,(o,l)=>{a.push(l)}).next(()=>a)}}G(e,r){const n=this.store.getAll(e,r===null?void 0:r);return new Se((s,i)=>{n.onerror=a=>{i(a.target.error)},n.onsuccess=a=>{s(a.target.result)}})}j(e,r){Je("SimpleDb","DELETE ALL",this.store.name);const n=this.options(e,r);n.H=!1;const s=this.cursor(n);return this.W(s,(i,a,o)=>o.delete())}J(e,r){let n;r?n=e:(n={},r=e);const s=this.cursor(n);return this.W(s,r)}Y(e){const r=this.cursor({});return new Se((n,s)=>{r.onerror=i=>{const a=Sb(i.target.error);s(a)},r.onsuccess=i=>{const a=i.target.result;a?e(a.primaryKey,a.value).next(o=>{o?a.continue():n()}):n()}})}W(e,r){const n=[];return new Se((s,i)=>{e.onerror=a=>{i(a.target.error)},e.onsuccess=a=>{const o=a.target.result;if(!o)return void s();const l=new vM(o),c=r(o.primaryKey,o.value,l);if(c instanceof Se){const u=c.catch(f=>(l.done(),Se.reject(f)));n.push(u)}l.isDone?s():l.K===null?o.continue():o.continue(l.K)}}).next(()=>Se.waitFor(n))}options(e,r){let n;return e!==void 0&&(typeof e=="string"?n=e:r=e),{index:n,range:r}}cursor(e){let r="next";if(e.reverse&&(r="prev"),e.index){const n=this.store.index(e.index);return e.H?n.openKeyCursor(e.range,r):n.openCursor(e.range,r)}return this.store.openCursor(e.range,r)}}function oc(t){return new Se((e,r)=>{t.onsuccess=n=>{const s=n.target.result;e(s)},t.onerror=n=>{const s=Sb(n.target.error);r(s)}})}let K5=!1;function Sb(t){const e=ol.S(jn());if(e>=12.2&&e<13){const r="An internal error was encountered in the Indexed Database server";if(t.message.indexOf(r)>=0){const n=new st("internal",`IOS_INDEXEDDB_BUG1: IndexedDb has thrown '${r}'. This is likely due to an unavoidable bug in iOS. See https://stackoverflow.com/q/56496296/110915 for details and a potential workaround.`);return K5||(K5=!0,setTimeout(()=>{throw n},0)),n}}return t}class yM{constructor(e,r){this.asyncQueue=e,this.Z=r,this.task=null}start(){this.X(15e3)}stop(){this.task&&(this.task.cancel(),this.task=null)}get started(){return this.task!==null}X(e){Je("IndexBackfiller",`Scheduled in ${e}ms`),this.task=this.asyncQueue.enqueueAfterDelay("index_backfill",e,async()=>{this.task=null;try{Je("IndexBackfiller",`Documents written: ${await this.Z.ee()}`)}catch(r){Sl(r)?Je("IndexBackfiller","Ignoring IndexedDB error during index backfill: ",r):await Kc(r)}await this.X(6e4)})}}class xM{constructor(e,r){this.localStore=e,this.persistence=r}async ee(e=50){return this.persistence.runTransaction("Backfill Indexes","readwrite-primary",r=>this.te(r,e))}te(e,r){const n=new Set;let s=r,i=!0;return Se.doWhile(()=>i===!0&&s>0,()=>this.localStore.indexManager.getNextCollectionGroupToUpdate(e).next(a=>{if(a!==null&&!n.has(a))return Je("IndexBackfiller",`Processing collection: ${a}`),this.ne(e,a,s).next(o=>{s-=o,n.add(a)});i=!1})).next(()=>r-s)}ne(e,r,n){return this.localStore.indexManager.getMinOffsetFromCollectionGroup(e,r).next(s=>this.localStore.localDocuments.getNextDocuments(e,r,s,n).next(i=>{const a=i.changes;return this.localStore.indexManager.updateIndexEntries(e,a).next(()=>this.re(s,i)).next(o=>(Je("IndexBackfiller",`Updating offset: ${o}`),this.localStore.indexManager.updateCollectionGroup(e,r,o))).next(()=>a.size)}))}re(e,r){let n=e;return r.changes.forEach((s,i)=>{const a=f4(i);Ib(a,n)>0&&(n=a)}),new di(n.readTime,n.documentKey,Math.max(r.batchId,e.largestBatchId))}}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ui{constructor(e,r){this.previousValue=e,r&&(r.sequenceNumberHandler=n=>this.ie(n),this.se=n=>r.writeSequenceNumber(n))}ie(e){return this.previousValue=Math.max(e,this.previousValue),this.previousValue}next(){const e=++this.previousValue;return this.se&&this.se(e),e}}Ui.oe=-1;function Lp(t){return t==null}function ip(t){return t===0&&1/t==-1/0}function bM(t){return typeof t=="number"&&Number.isInteger(t)&&!ip(t)&&t<=Number.MAX_SAFE_INTEGER&&t>=Number.MIN_SAFE_INTEGER}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Qs(t){let e="";for(let r=0;r<t.length;r++)e.length>0&&(e=q5(e)),e=BM(t.get(r),e);return q5(e)}function BM(t,e){let r=e;const n=t.length;for(let s=0;s<n;s++){const i=t.charAt(s);switch(i){case"\0":r+="";break;case"":r+="";break;default:r+=i}}return r}function q5(t){return t+""}function La(t){const e=t.length;if(Tt(e>=2),e===2)return Tt(t.charAt(0)===""&&t.charAt(1)===""),pr.emptyPath();const r=e-2,n=[];let s="";for(let i=0;i<e;){const a=t.indexOf("",i);switch((a<0||a>r)&&Bt(),t.charAt(a+1)){case"":const o=t.substring(i,a);let l;s.length===0?l=o:(s+=o,l=s,s=""),n.push(l);break;case"":s+=t.substring(i,a),s+="\0";break;case"":s+=t.substring(i,a+1);break;default:Bt()}i=a+2}return new pr(n)}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const G5=["userId","batchId"];/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function qg(t,e){return[t,Qs(e)]}function v4(t,e,r){return[t,Qs(e),r]}const CM={},EM=["prefixPath","collectionGroup","readTime","documentId"],_M=["prefixPath","collectionGroup","documentId"],NM=["collectionGroup","readTime","prefixPath","documentId"],IM=["canonicalId","targetId"],SM=["targetId","path"],FM=["path","targetId"],TM=["collectionId","parent"],UM=["indexId","uid"],PM=["uid","sequenceNumber"],QM=["indexId","uid","arrayValue","directionalValue","orderedDocumentKey","documentKey"],LM=["indexId","uid","orderedDocumentKey"],jM=["userId","collectionPath","documentId"],kM=["userId","collectionPath","largestBatchId"],DM=["userId","collectionGroup","largestBatchId"],w4=["mutationQueues","mutations","documentMutations","remoteDocuments","targets","owner","targetGlobal","targetDocuments","clientMetadata","remoteDocumentGlobal","collectionParents","bundles","namedQueries"],RM=[...w4,"documentOverlays"],y4=["mutationQueues","mutations","documentMutations","remoteDocumentsV14","targets","owner","targetGlobal","targetDocuments","clientMetadata","remoteDocumentGlobal","collectionParents","bundles","namedQueries","documentOverlays"],x4=y4,Fb=[...x4,"indexConfiguration","indexState","indexEntries"],MM=Fb,OM=[...Fb,"globals"];/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class c2 extends m4{constructor(e,r){super(),this._e=e,this.currentSequenceNumber=r}}function kn(t,e){const r=qt(t);return ol.F(r._e,e)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function z5(t){let e=0;for(const r in t)Object.prototype.hasOwnProperty.call(t,r)&&e++;return e}function qc(t,e){for(const r in t)Object.prototype.hasOwnProperty.call(t,r)&&e(r,t[r])}function b4(t){for(const e in t)if(Object.prototype.hasOwnProperty.call(t,e))return!1;return!0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class tn{constructor(e,r){this.comparator=e,this.root=r||ss.EMPTY}insert(e,r){return new tn(this.comparator,this.root.insert(e,r,this.comparator).copy(null,null,ss.BLACK,null,null))}remove(e){return new tn(this.comparator,this.root.remove(e,this.comparator).copy(null,null,ss.BLACK,null,null))}get(e){let r=this.root;for(;!r.isEmpty();){const n=this.comparator(e,r.key);if(n===0)return r.value;n<0?r=r.left:n>0&&(r=r.right)}return null}indexOf(e){let r=0,n=this.root;for(;!n.isEmpty();){const s=this.comparator(e,n.key);if(s===0)return r+n.left.size;s<0?n=n.left:(r+=n.left.size+1,n=n.right)}return-1}isEmpty(){return this.root.isEmpty()}get size(){return this.root.size}minKey(){return this.root.minKey()}maxKey(){return this.root.maxKey()}inorderTraversal(e){return this.root.inorderTraversal(e)}forEach(e){this.inorderTraversal((r,n)=>(e(r,n),!1))}toString(){const e=[];return this.inorderTraversal((r,n)=>(e.push(`${r}:${n}`),!1)),`{${e.join(", ")}}`}reverseTraversal(e){return this.root.reverseTraversal(e)}getIterator(){return new Dm(this.root,null,this.comparator,!1)}getIteratorFrom(e){return new Dm(this.root,e,this.comparator,!1)}getReverseIterator(){return new Dm(this.root,null,this.comparator,!0)}getReverseIteratorFrom(e){return new Dm(this.root,e,this.comparator,!0)}}class Dm{constructor(e,r,n,s){this.isReverse=s,this.nodeStack=[];let i=1;for(;!e.isEmpty();)if(i=r?n(e.key,r):1,r&&s&&(i*=-1),i<0)e=this.isReverse?e.left:e.right;else{if(i===0){this.nodeStack.push(e);break}this.nodeStack.push(e),e=this.isReverse?e.right:e.left}}getNext(){let e=this.nodeStack.pop();const r={key:e.key,value:e.value};if(this.isReverse)for(e=e.left;!e.isEmpty();)this.nodeStack.push(e),e=e.right;else for(e=e.right;!e.isEmpty();)this.nodeStack.push(e),e=e.left;return r}hasNext(){return this.nodeStack.length>0}peek(){if(this.nodeStack.length===0)return null;const e=this.nodeStack[this.nodeStack.length-1];return{key:e.key,value:e.value}}}class ss{constructor(e,r,n,s,i){this.key=e,this.value=r,this.color=n??ss.RED,this.left=s??ss.EMPTY,this.right=i??ss.EMPTY,this.size=this.left.size+1+this.right.size}copy(e,r,n,s,i){return new ss(e??this.key,r??this.value,n??this.color,s??this.left,i??this.right)}isEmpty(){return!1}inorderTraversal(e){return this.left.inorderTraversal(e)||e(this.key,this.value)||this.right.inorderTraversal(e)}reverseTraversal(e){return this.right.reverseTraversal(e)||e(this.key,this.value)||this.left.reverseTraversal(e)}min(){return this.left.isEmpty()?this:this.left.min()}minKey(){return this.min().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(e,r,n){let s=this;const i=n(e,s.key);return s=i<0?s.copy(null,null,null,s.left.insert(e,r,n),null):i===0?s.copy(null,r,null,null,null):s.copy(null,null,null,null,s.right.insert(e,r,n)),s.fixUp()}removeMin(){if(this.left.isEmpty())return ss.EMPTY;let e=this;return e.left.isRed()||e.left.left.isRed()||(e=e.moveRedLeft()),e=e.copy(null,null,null,e.left.removeMin(),null),e.fixUp()}remove(e,r){let n,s=this;if(r(e,s.key)<0)s.left.isEmpty()||s.left.isRed()||s.left.left.isRed()||(s=s.moveRedLeft()),s=s.copy(null,null,null,s.left.remove(e,r),null);else{if(s.left.isRed()&&(s=s.rotateRight()),s.right.isEmpty()||s.right.isRed()||s.right.left.isRed()||(s=s.moveRedRight()),r(e,s.key)===0){if(s.right.isEmpty())return ss.EMPTY;n=s.right.min(),s=s.copy(n.key,n.value,null,null,s.right.removeMin())}s=s.copy(null,null,null,null,s.right.remove(e,r))}return s.fixUp()}isRed(){return this.color}fixUp(){let e=this;return e.right.isRed()&&!e.left.isRed()&&(e=e.rotateLeft()),e.left.isRed()&&e.left.left.isRed()&&(e=e.rotateRight()),e.left.isRed()&&e.right.isRed()&&(e=e.colorFlip()),e}moveRedLeft(){let e=this.colorFlip();return e.right.left.isRed()&&(e=e.copy(null,null,null,null,e.right.rotateRight()),e=e.rotateLeft(),e=e.colorFlip()),e}moveRedRight(){let e=this.colorFlip();return e.left.left.isRed()&&(e=e.rotateRight(),e=e.colorFlip()),e}rotateLeft(){const e=this.copy(null,null,ss.RED,null,this.right.left);return this.right.copy(null,null,this.color,e,null)}rotateRight(){const e=this.copy(null,null,ss.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,e)}colorFlip(){const e=this.left.copy(null,null,!this.left.color,null,null),r=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,e,r)}checkMaxDepth(){const e=this.check();return Math.pow(2,e)<=this.size+1}check(){if(this.isRed()&&this.left.isRed()||this.right.isRed())throw Bt();const e=this.left.check();if(e!==this.right.check())throw Bt();return e+(this.isRed()?0:1)}}ss.EMPTY=null,ss.RED=!0,ss.BLACK=!1;ss.EMPTY=new class{constructor(){this.size=0}get key(){throw Bt()}get value(){throw Bt()}get color(){throw Bt()}get left(){throw Bt()}get right(){throw Bt()}copy(e,r,n,s,i){return this}insert(e,r,n){return new ss(e,r)}remove(e,r){return this}isEmpty(){return!0}inorderTraversal(e){return!1}reverseTraversal(e){return!1}minKey(){return null}maxKey(){return null}isRed(){return!1}checkMaxDepth(){return!0}check(){return 0}};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Tr{constructor(e){this.comparator=e,this.data=new tn(this.comparator)}has(e){return this.data.get(e)!==null}first(){return this.data.minKey()}last(){return this.data.maxKey()}get size(){return this.data.size}indexOf(e){return this.data.indexOf(e)}forEach(e){this.data.inorderTraversal((r,n)=>(e(r),!1))}forEachInRange(e,r){const n=this.data.getIteratorFrom(e[0]);for(;n.hasNext();){const s=n.getNext();if(this.comparator(s.key,e[1])>=0)return;r(s.key)}}forEachWhile(e,r){let n;for(n=r!==void 0?this.data.getIteratorFrom(r):this.data.getIterator();n.hasNext();)if(!e(n.getNext().key))return}firstAfterOrEqual(e){const r=this.data.getIteratorFrom(e);return r.hasNext()?r.getNext().key:null}getIterator(){return new $5(this.data.getIterator())}getIteratorFrom(e){return new $5(this.data.getIteratorFrom(e))}add(e){return this.copy(this.data.remove(e).insert(e,!0))}delete(e){return this.has(e)?this.copy(this.data.remove(e)):this}isEmpty(){return this.data.isEmpty()}unionWith(e){let r=this;return r.size<e.size&&(r=e,e=this),e.forEach(n=>{r=r.add(n)}),r}isEqual(e){if(!(e instanceof Tr)||this.size!==e.size)return!1;const r=this.data.getIterator(),n=e.data.getIterator();for(;r.hasNext();){const s=r.getNext().key,i=n.getNext().key;if(this.comparator(s,i)!==0)return!1}return!0}toArray(){const e=[];return this.forEach(r=>{e.push(r)}),e}toString(){const e=[];return this.forEach(r=>e.push(r)),"SortedSet("+e.toString()+")"}copy(e){const r=new Tr(this.comparator);return r.data=e,r}}class $5{constructor(e){this.iter=e}getNext(){return this.iter.getNext().key}hasNext(){return this.iter.hasNext()}}function xu(t){return t.hasNext()?t.getNext():void 0}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class zs{constructor(e){this.fields=e,e.sort(Yr.comparator)}static empty(){return new zs([])}unionWith(e){let r=new Tr(Yr.comparator);for(const n of this.fields)r=r.add(n);for(const n of e)r=r.add(n);return new zs(r.toArray())}covers(e){for(const r of this.fields)if(r.isPrefixOf(e))return!0;return!1}isEqual(e){return Sd(this.fields,e.fields,(r,n)=>r.isEqual(n))}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class B4 extends Error{constructor(){super(...arguments),this.name="Base64DecodeError"}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Bn{constructor(e){this.binaryString=e}static fromBase64String(e){const r=function(s){try{return atob(s)}catch(i){throw typeof DOMException<"u"&&i instanceof DOMException?new B4("Invalid base64 string: "+i):i}}(e);return new Bn(r)}static fromUint8Array(e){const r=function(s){let i="";for(let a=0;a<s.length;++a)i+=String.fromCharCode(s[a]);return i}(e);return new Bn(r)}[Symbol.iterator](){let e=0;return{next:()=>e<this.binaryString.length?{value:this.binaryString.charCodeAt(e++),done:!1}:{value:void 0,done:!0}}}toBase64(){return function(r){return btoa(r)}(this.binaryString)}toUint8Array(){return function(r){const n=new Uint8Array(r.length);for(let s=0;s<r.length;s++)n[s]=r.charCodeAt(s);return n}(this.binaryString)}approximateByteSize(){return 2*this.binaryString.length}compareTo(e){return Wt(this.binaryString,e.binaryString)}isEqual(e){return this.binaryString===e.binaryString}}Bn.EMPTY_BYTE_STRING=new Bn("");const HM=new RegExp(/^\d{4}-\d\d-\d\dT\d\d:\d\d:\d\d(?:\.(\d+))?Z$/);function Ho(t){if(Tt(!!t),typeof t=="string"){let e=0;const r=HM.exec(t);if(Tt(!!r),r[1]){let s=r[1];s=(s+"000000000").substr(0,9),e=Number(s)}const n=new Date(t);return{seconds:Math.floor(n.getTime()/1e3),nanos:e}}return{seconds:Wr(t.seconds),nanos:Wr(t.nanos)}}function Wr(t){return typeof t=="number"?t:typeof t=="string"?Number(t):0}function pl(t){return typeof t=="string"?Bn.fromBase64String(t):Bn.fromUint8Array(t)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Tb(t){var e,r;return((r=(((e=t==null?void 0:t.mapValue)===null||e===void 0?void 0:e.fields)||{}).__type__)===null||r===void 0?void 0:r.stringValue)==="server_timestamp"}function Ub(t){const e=t.mapValue.fields.__previous_value__;return Tb(e)?Ub(e):e}function ap(t){const e=Ho(t.mapValue.fields.__local_write_time__.timestampValue);return new Dt(e.seconds,e.nanos)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class VM{constructor(e,r,n,s,i,a,o,l,c){this.databaseId=e,this.appId=r,this.persistenceKey=n,this.host=s,this.ssl=i,this.forceLongPolling=a,this.autoDetectLongPolling=o,this.longPollingOptions=l,this.useFetchStreams=c}}class ml{constructor(e,r){this.projectId=e,this.database=r||"(default)"}static empty(){return new ml("","")}get isDefaultDatabase(){return this.database==="(default)"}isEqual(e){return e instanceof ml&&e.projectId===this.projectId&&e.database===this.database}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const qA={mapValue:{fields:{__type__:{stringValue:"__max__"}}}},Gg={nullValue:"NULL_VALUE"};function jc(t){return"nullValue"in t?0:"booleanValue"in t?1:"integerValue"in t||"doubleValue"in t?2:"timestampValue"in t?3:"stringValue"in t?5:"bytesValue"in t?6:"referenceValue"in t?7:"geoPointValue"in t?8:"arrayValue"in t?9:"mapValue"in t?Tb(t)?4:C4(t)?9007199254740991:Tv(t)?10:11:Bt()}function Va(t,e){if(t===e)return!0;const r=jc(t);if(r!==jc(e))return!1;switch(r){case 0:case 9007199254740991:return!0;case 1:return t.booleanValue===e.booleanValue;case 4:return ap(t).isEqual(ap(e));case 3:return function(s,i){if(typeof s.timestampValue=="string"&&typeof i.timestampValue=="string"&&s.timestampValue.length===i.timestampValue.length)return s.timestampValue===i.timestampValue;const a=Ho(s.timestampValue),o=Ho(i.timestampValue);return a.seconds===o.seconds&&a.nanos===o.nanos}(t,e);case 5:return t.stringValue===e.stringValue;case 6:return function(s,i){return pl(s.bytesValue).isEqual(pl(i.bytesValue))}(t,e);case 7:return t.referenceValue===e.referenceValue;case 8:return function(s,i){return Wr(s.geoPointValue.latitude)===Wr(i.geoPointValue.latitude)&&Wr(s.geoPointValue.longitude)===Wr(i.geoPointValue.longitude)}(t,e);case 2:return function(s,i){if("integerValue"in s&&"integerValue"in i)return Wr(s.integerValue)===Wr(i.integerValue);if("doubleValue"in s&&"doubleValue"in i){const a=Wr(s.doubleValue),o=Wr(i.doubleValue);return a===o?ip(a)===ip(o):isNaN(a)&&isNaN(o)}return!1}(t,e);case 9:return Sd(t.arrayValue.values||[],e.arrayValue.values||[],Va);case 10:case 11:return function(s,i){const a=s.mapValue.fields||{},o=i.mapValue.fields||{};if(z5(a)!==z5(o))return!1;for(const l in a)if(a.hasOwnProperty(l)&&(o[l]===void 0||!Va(a[l],o[l])))return!1;return!0}(t,e);default:return Bt()}}function op(t,e){return(t.values||[]).find(r=>Va(r,e))!==void 0}function gl(t,e){if(t===e)return 0;const r=jc(t),n=jc(e);if(r!==n)return Wt(r,n);switch(r){case 0:case 9007199254740991:return 0;case 1:return Wt(t.booleanValue,e.booleanValue);case 2:return function(i,a){const o=Wr(i.integerValue||i.doubleValue),l=Wr(a.integerValue||a.doubleValue);return o<l?-1:o>l?1:o===l?0:isNaN(o)?isNaN(l)?0:-1:1}(t,e);case 3:return W5(t.timestampValue,e.timestampValue);case 4:return W5(ap(t),ap(e));case 5:return Wt(t.stringValue,e.stringValue);case 6:return function(i,a){const o=pl(i),l=pl(a);return o.compareTo(l)}(t.bytesValue,e.bytesValue);case 7:return function(i,a){const o=i.split("/"),l=a.split("/");for(let c=0;c<o.length&&c<l.length;c++){const u=Wt(o[c],l[c]);if(u!==0)return u}return Wt(o.length,l.length)}(t.referenceValue,e.referenceValue);case 8:return function(i,a){const o=Wt(Wr(i.latitude),Wr(a.latitude));return o!==0?o:Wt(Wr(i.longitude),Wr(a.longitude))}(t.geoPointValue,e.geoPointValue);case 9:return X5(t.arrayValue,e.arrayValue);case 10:return function(i,a){var o,l,c,u;const f=i.fields||{},p=a.fields||{},m=(o=f.value)===null||o===void 0?void 0:o.arrayValue,b=(l=p.value)===null||l===void 0?void 0:l.arrayValue,B=Wt(((c=m==null?void 0:m.values)===null||c===void 0?void 0:c.length)||0,((u=b==null?void 0:b.values)===null||u===void 0?void 0:u.length)||0);return B!==0?B:X5(m,b)}(t.mapValue,e.mapValue);case 11:return function(i,a){if(i===qA.mapValue&&a===qA.mapValue)return 0;if(i===qA.mapValue)return 1;if(a===qA.mapValue)return-1;const o=i.fields||{},l=Object.keys(o),c=a.fields||{},u=Object.keys(c);l.sort(),u.sort();for(let f=0;f<l.length&&f<u.length;++f){const p=Wt(l[f],u[f]);if(p!==0)return p;const m=gl(o[l[f]],c[u[f]]);if(m!==0)return m}return Wt(l.length,u.length)}(t.mapValue,e.mapValue);default:throw Bt()}}function W5(t,e){if(typeof t=="string"&&typeof e=="string"&&t.length===e.length)return Wt(t,e);const r=Ho(t),n=Ho(e),s=Wt(r.seconds,n.seconds);return s!==0?s:Wt(r.nanos,n.nanos)}function X5(t,e){const r=t.values||[],n=e.values||[];for(let s=0;s<r.length&&s<n.length;++s){const i=gl(r[s],n[s]);if(i)return i}return Wt(r.length,n.length)}function Fd(t){return u2(t)}function u2(t){return"nullValue"in t?"null":"booleanValue"in t?""+t.booleanValue:"integerValue"in t?""+t.integerValue:"doubleValue"in t?""+t.doubleValue:"timestampValue"in t?function(r){const n=Ho(r);return`time(${n.seconds},${n.nanos})`}(t.timestampValue):"stringValue"in t?t.stringValue:"bytesValue"in t?function(r){return pl(r).toBase64()}(t.bytesValue):"referenceValue"in t?function(r){return dt.fromName(r).toString()}(t.referenceValue):"geoPointValue"in t?function(r){return`geo(${r.latitude},${r.longitude})`}(t.geoPointValue):"arrayValue"in t?function(r){let n="[",s=!0;for(const i of r.values||[])s?s=!1:n+=",",n+=u2(i);return n+"]"}(t.arrayValue):"mapValue"in t?function(r){const n=Object.keys(r.fields||{}).sort();let s="{",i=!0;for(const a of n)i?i=!1:s+=",",s+=`${a}:${u2(r.fields[a])}`;return s+"}"}(t.mapValue):Bt()}function Ap(t,e){return{referenceValue:`projects/${t.projectId}/databases/${t.database}/documents/${e.path.canonicalString()}`}}function d2(t){return!!t&&"integerValue"in t}function lp(t){return!!t&&"arrayValue"in t}function J5(t){return!!t&&"nullValue"in t}function Y5(t){return!!t&&"doubleValue"in t&&isNaN(Number(t.doubleValue))}function zg(t){return!!t&&"mapValue"in t}function Tv(t){var e,r;return((r=(((e=t==null?void 0:t.mapValue)===null||e===void 0?void 0:e.fields)||{}).__type__)===null||r===void 0?void 0:r.stringValue)==="__vector__"}function xf(t){if(t.geoPointValue)return{geoPointValue:Object.assign({},t.geoPointValue)};if(t.timestampValue&&typeof t.timestampValue=="object")return{timestampValue:Object.assign({},t.timestampValue)};if(t.mapValue){const e={mapValue:{fields:{}}};return qc(t.mapValue.fields,(r,n)=>e.mapValue.fields[r]=xf(n)),e}if(t.arrayValue){const e={arrayValue:{values:[]}};for(let r=0;r<(t.arrayValue.values||[]).length;++r)e.arrayValue.values[r]=xf(t.arrayValue.values[r]);return e}return Object.assign({},t)}function C4(t){return(((t.mapValue||{}).fields||{}).__type__||{}).stringValue==="__max__"}const E4={mapValue:{fields:{__type__:{stringValue:"__vector__"},value:{arrayValue:{}}}}};function KM(t){return"nullValue"in t?Gg:"booleanValue"in t?{booleanValue:!1}:"integerValue"in t||"doubleValue"in t?{doubleValue:NaN}:"timestampValue"in t?{timestampValue:{seconds:Number.MIN_SAFE_INTEGER}}:"stringValue"in t?{stringValue:""}:"bytesValue"in t?{bytesValue:""}:"referenceValue"in t?Ap(ml.empty(),dt.empty()):"geoPointValue"in t?{geoPointValue:{latitude:-90,longitude:-180}}:"arrayValue"in t?{arrayValue:{}}:"mapValue"in t?Tv(t)?E4:{mapValue:{}}:Bt()}function qM(t){return"nullValue"in t?{booleanValue:!1}:"booleanValue"in t?{doubleValue:NaN}:"integerValue"in t||"doubleValue"in t?{timestampValue:{seconds:Number.MIN_SAFE_INTEGER}}:"timestampValue"in t?{stringValue:""}:"stringValue"in t?{bytesValue:""}:"bytesValue"in t?Ap(ml.empty(),dt.empty()):"referenceValue"in t?{geoPointValue:{latitude:-90,longitude:-180}}:"geoPointValue"in t?{arrayValue:{}}:"arrayValue"in t?E4:"mapValue"in t?Tv(t)?{mapValue:{}}:qA:Bt()}function Z5(t,e){const r=gl(t.value,e.value);return r!==0?r:t.inclusive&&!e.inclusive?-1:!t.inclusive&&e.inclusive?1:0}function eE(t,e){const r=gl(t.value,e.value);return r!==0?r:t.inclusive&&!e.inclusive?1:!t.inclusive&&e.inclusive?-1:0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class as{constructor(e){this.value=e}static empty(){return new as({mapValue:{}})}field(e){if(e.isEmpty())return this.value;{let r=this.value;for(let n=0;n<e.length-1;++n)if(r=(r.mapValue.fields||{})[e.get(n)],!zg(r))return null;return r=(r.mapValue.fields||{})[e.lastSegment()],r||null}}set(e,r){this.getFieldsMap(e.popLast())[e.lastSegment()]=xf(r)}setAll(e){let r=Yr.emptyPath(),n={},s=[];e.forEach((a,o)=>{if(!r.isImmediateParentOf(o)){const l=this.getFieldsMap(r);this.applyChanges(l,n,s),n={},s=[],r=o.popLast()}a?n[o.lastSegment()]=xf(a):s.push(o.lastSegment())});const i=this.getFieldsMap(r);this.applyChanges(i,n,s)}delete(e){const r=this.field(e.popLast());zg(r)&&r.mapValue.fields&&delete r.mapValue.fields[e.lastSegment()]}isEqual(e){return Va(this.value,e.value)}getFieldsMap(e){let r=this.value;r.mapValue.fields||(r.mapValue={fields:{}});for(let n=0;n<e.length;++n){let s=r.mapValue.fields[e.get(n)];zg(s)&&s.mapValue.fields||(s={mapValue:{fields:{}}},r.mapValue.fields[e.get(n)]=s),r=s}return r.mapValue.fields}applyChanges(e,r,n){qc(r,(s,i)=>e[s]=i);for(const s of n)delete e[s]}clone(){return new as(xf(this.value))}}function _4(t){const e=[];return qc(t.fields,(r,n)=>{const s=new Yr([r]);if(zg(n)){const i=_4(n.mapValue).fields;if(i.length===0)e.push(s);else for(const a of i)e.push(s.child(a))}else e.push(s)}),new zs(e)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Jr{constructor(e,r,n,s,i,a,o){this.key=e,this.documentType=r,this.version=n,this.readTime=s,this.createTime=i,this.data=a,this.documentState=o}static newInvalidDocument(e){return new Jr(e,0,Qt.min(),Qt.min(),Qt.min(),as.empty(),0)}static newFoundDocument(e,r,n,s){return new Jr(e,1,r,Qt.min(),n,s,0)}static newNoDocument(e,r){return new Jr(e,2,r,Qt.min(),Qt.min(),as.empty(),0)}static newUnknownDocument(e,r){return new Jr(e,3,r,Qt.min(),Qt.min(),as.empty(),2)}convertToFoundDocument(e,r){return!this.createTime.isEqual(Qt.min())||this.documentType!==2&&this.documentType!==0||(this.createTime=e),this.version=e,this.documentType=1,this.data=r,this.documentState=0,this}convertToNoDocument(e){return this.version=e,this.documentType=2,this.data=as.empty(),this.documentState=0,this}convertToUnknownDocument(e){return this.version=e,this.documentType=3,this.data=as.empty(),this.documentState=2,this}setHasCommittedMutations(){return this.documentState=2,this}setHasLocalMutations(){return this.documentState=1,this.version=Qt.min(),this}setReadTime(e){return this.readTime=e,this}get hasLocalMutations(){return this.documentState===1}get hasCommittedMutations(){return this.documentState===2}get hasPendingWrites(){return this.hasLocalMutations||this.hasCommittedMutations}isValidDocument(){return this.documentType!==0}isFoundDocument(){return this.documentType===1}isNoDocument(){return this.documentType===2}isUnknownDocument(){return this.documentType===3}isEqual(e){return e instanceof Jr&&this.key.isEqual(e.key)&&this.version.isEqual(e.version)&&this.documentType===e.documentType&&this.documentState===e.documentState&&this.data.isEqual(e.data)}mutableCopy(){return new Jr(this.key,this.documentType,this.version,this.readTime,this.createTime,this.data.clone(),this.documentState)}toString(){return`Document(${this.key}, ${this.version}, ${JSON.stringify(this.data.value)}, {createTime: ${this.createTime}}), {documentType: ${this.documentType}}), {documentState: ${this.documentState}})`}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Td{constructor(e,r){this.position=e,this.inclusive=r}}function tE(t,e,r){let n=0;for(let s=0;s<t.position.length;s++){const i=e[s],a=t.position[s];if(i.field.isKeyField()?n=dt.comparator(dt.fromName(a.referenceValue),r.key):n=gl(a,r.data.field(i.field)),i.dir==="desc"&&(n*=-1),n!==0)break}return n}function rE(t,e){if(t===null)return e===null;if(e===null||t.inclusive!==e.inclusive||t.position.length!==e.position.length)return!1;for(let r=0;r<t.position.length;r++)if(!Va(t.position[r],e.position[r]))return!1;return!0}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class cp{constructor(e,r="asc"){this.field=e,this.dir=r}}function GM(t,e){return t.dir===e.dir&&t.field.isEqual(e.field)}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class N4{}class lr extends N4{constructor(e,r,n){super(),this.field=e,this.op=r,this.value=n}static create(e,r,n){return e.isKeyField()?r==="in"||r==="not-in"?this.createKeyFieldInFilter(e,r,n):new zM(e,r,n):r==="array-contains"?new XM(e,n):r==="in"?new P4(e,n):r==="not-in"?new JM(e,n):r==="array-contains-any"?new YM(e,n):new lr(e,r,n)}static createKeyFieldInFilter(e,r,n){return r==="in"?new $M(e,n):new WM(e,n)}matches(e){const r=e.data.field(this.field);return this.op==="!="?r!==null&&this.matchesComparison(gl(r,this.value)):r!==null&&jc(this.value)===jc(r)&&this.matchesComparison(gl(r,this.value))}matchesComparison(e){switch(this.op){case"<":return e<0;case"<=":return e<=0;case"==":return e===0;case"!=":return e!==0;case">":return e>0;case">=":return e>=0;default:return Bt()}}isInequality(){return["<","<=",">",">=","!=","not-in"].indexOf(this.op)>=0}getFlattenedFilters(){return[this]}getFilters(){return[this]}}class _r extends N4{constructor(e,r){super(),this.filters=e,this.op=r,this.ae=null}static create(e,r){return new _r(e,r)}matches(e){return Ud(this)?this.filters.find(r=>!r.matches(e))===void 0:this.filters.find(r=>r.matches(e))!==void 0}getFlattenedFilters(){return this.ae!==null||(this.ae=this.filters.reduce((e,r)=>e.concat(r.getFlattenedFilters()),[])),this.ae}getFilters(){return Object.assign([],this.filters)}}function Ud(t){return t.op==="and"}function h2(t){return t.op==="or"}function Pb(t){return I4(t)&&Ud(t)}function I4(t){for(const e of t.filters)if(e instanceof _r)return!1;return!0}function f2(t){if(t instanceof lr)return t.field.canonicalString()+t.op.toString()+Fd(t.value);if(Pb(t))return t.filters.map(e=>f2(e)).join(",");{const e=t.filters.map(r=>f2(r)).join(",");return`${t.op}(${e})`}}function S4(t,e){return t instanceof lr?function(n,s){return s instanceof lr&&n.op===s.op&&n.field.isEqual(s.field)&&Va(n.value,s.value)}(t,e):t instanceof _r?function(n,s){return s instanceof _r&&n.op===s.op&&n.filters.length===s.filters.length?n.filters.reduce((i,a,o)=>i&&S4(a,s.filters[o]),!0):!1}(t,e):void Bt()}function F4(t,e){const r=t.filters.concat(e);return _r.create(r,t.op)}function T4(t){return t instanceof lr?function(r){return`${r.field.canonicalString()} ${r.op} ${Fd(r.value)}`}(t):t instanceof _r?function(r){return r.op.toString()+" {"+r.getFilters().map(T4).join(" ,")+"}"}(t):"Filter"}class zM extends lr{constructor(e,r,n){super(e,r,n),this.key=dt.fromName(n.referenceValue)}matches(e){const r=dt.comparator(e.key,this.key);return this.matchesComparison(r)}}class $M extends lr{constructor(e,r){super(e,"in",r),this.keys=U4("in",r)}matches(e){return this.keys.some(r=>r.isEqual(e.key))}}class WM extends lr{constructor(e,r){super(e,"not-in",r),this.keys=U4("not-in",r)}matches(e){return!this.keys.some(r=>r.isEqual(e.key))}}function U4(t,e){var r;return(((r=e.arrayValue)===null||r===void 0?void 0:r.values)||[]).map(n=>dt.fromName(n.referenceValue))}class XM extends lr{constructor(e,r){super(e,"array-contains",r)}matches(e){const r=e.data.field(this.field);return lp(r)&&op(r.arrayValue,this.value)}}class P4 extends lr{constructor(e,r){super(e,"in",r)}matches(e){const r=e.data.field(this.field);return r!==null&&op(this.value.arrayValue,r)}}class JM extends lr{constructor(e,r){super(e,"not-in",r)}matches(e){if(op(this.value.arrayValue,{nullValue:"NULL_VALUE"}))return!1;const r=e.data.field(this.field);return r!==null&&!op(this.value.arrayValue,r)}}class YM extends lr{constructor(e,r){super(e,"array-contains-any",r)}matches(e){const r=e.data.field(this.field);return!(!lp(r)||!r.arrayValue.values)&&r.arrayValue.values.some(n=>op(this.value.arrayValue,n))}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ZM{constructor(e,r=null,n=[],s=[],i=null,a=null,o=null){this.path=e,this.collectionGroup=r,this.orderBy=n,this.filters=s,this.limit=i,this.startAt=a,this.endAt=o,this.ue=null}}function p2(t,e=null,r=[],n=[],s=null,i=null,a=null){return new ZM(t,e,r,n,s,i,a)}function kc(t){const e=qt(t);if(e.ue===null){let r=e.path.canonicalString();e.collectionGroup!==null&&(r+="|cg:"+e.collectionGroup),r+="|f:",r+=e.filters.map(n=>f2(n)).join(","),r+="|ob:",r+=e.orderBy.map(n=>function(i){return i.field.canonicalString()+i.dir}(n)).join(","),Lp(e.limit)||(r+="|l:",r+=e.limit),e.startAt&&(r+="|lb:",r+=e.startAt.inclusive?"b:":"a:",r+=e.startAt.position.map(n=>Fd(n)).join(",")),e.endAt&&(r+="|ub:",r+=e.endAt.inclusive?"a:":"b:",r+=e.endAt.position.map(n=>Fd(n)).join(",")),e.ue=r}return e.ue}function jp(t,e){if(t.limit!==e.limit||t.orderBy.length!==e.orderBy.length)return!1;for(let r=0;r<t.orderBy.length;r++)if(!GM(t.orderBy[r],e.orderBy[r]))return!1;if(t.filters.length!==e.filters.length)return!1;for(let r=0;r<t.filters.length;r++)if(!S4(t.filters[r],e.filters[r]))return!1;return t.collectionGroup===e.collectionGroup&&!!t.path.isEqual(e.path)&&!!rE(t.startAt,e.startAt)&&rE(t.endAt,e.endAt)}function L0(t){return dt.isDocumentKey(t.path)&&t.collectionGroup===null&&t.filters.length===0}function j0(t,e){return t.filters.filter(r=>r instanceof lr&&r.field.isEqual(e))}function nE(t,e,r){let n=Gg,s=!0;for(const i of j0(t,e)){let a=Gg,o=!0;switch(i.op){case"<":case"<=":a=KM(i.value);break;case"==":case"in":case">=":a=i.value;break;case">":a=i.value,o=!1;break;case"!=":case"not-in":a=Gg}Z5({value:n,inclusive:s},{value:a,inclusive:o})<0&&(n=a,s=o)}if(r!==null){for(let i=0;i<t.orderBy.length;++i)if(t.orderBy[i].field.isEqual(e)){const a=r.position[i];Z5({value:n,inclusive:s},{value:a,inclusive:r.inclusive})<0&&(n=a,s=r.inclusive);break}}return{value:n,inclusive:s}}function sE(t,e,r){let n=qA,s=!0;for(const i of j0(t,e)){let a=qA,o=!0;switch(i.op){case">=":case">":a=qM(i.value),o=!1;break;case"==":case"in":case"<=":a=i.value;break;case"<":a=i.value,o=!1;break;case"!=":case"not-in":a=qA}eE({value:n,inclusive:s},{value:a,inclusive:o})>0&&(n=a,s=o)}if(r!==null){for(let i=0;i<t.orderBy.length;++i)if(t.orderBy[i].field.isEqual(e)){const a=r.position[i];eE({value:n,inclusive:s},{value:a,inclusive:r.inclusive})>0&&(n=a,s=r.inclusive);break}}return{value:n,inclusive:s}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class zd{constructor(e,r=null,n=[],s=[],i=null,a="F",o=null,l=null){this.path=e,this.collectionGroup=r,this.explicitOrderBy=n,this.filters=s,this.limit=i,this.limitType=a,this.startAt=o,this.endAt=l,this.ce=null,this.le=null,this.he=null,this.startAt,this.endAt}}function eO(t,e,r,n,s,i,a,o){return new zd(t,e,r,n,s,i,a,o)}function kp(t){return new zd(t)}function iE(t){return t.filters.length===0&&t.limit===null&&t.startAt==null&&t.endAt==null&&(t.explicitOrderBy.length===0||t.explicitOrderBy.length===1&&t.explicitOrderBy[0].field.isKeyField())}function Q4(t){return t.collectionGroup!==null}function bf(t){const e=qt(t);if(e.ce===null){e.ce=[];const r=new Set;for(const i of e.explicitOrderBy)e.ce.push(i),r.add(i.field.canonicalString());const n=e.explicitOrderBy.length>0?e.explicitOrderBy[e.explicitOrderBy.length-1].dir:"asc";(function(a){let o=new Tr(Yr.comparator);return a.filters.forEach(l=>{l.getFlattenedFilters().forEach(c=>{c.isInequality()&&(o=o.add(c.field))})}),o})(e).forEach(i=>{r.has(i.canonicalString())||i.isKeyField()||e.ce.push(new cp(i,n))}),r.has(Yr.keyField().canonicalString())||e.ce.push(new cp(Yr.keyField(),n))}return e.ce}function ji(t){const e=qt(t);return e.le||(e.le=tO(e,bf(t))),e.le}function tO(t,e){if(t.limitType==="F")return p2(t.path,t.collectionGroup,e,t.filters,t.limit,t.startAt,t.endAt);{e=e.map(s=>{const i=s.dir==="desc"?"asc":"desc";return new cp(s.field,i)});const r=t.endAt?new Td(t.endAt.position,t.endAt.inclusive):null,n=t.startAt?new Td(t.startAt.position,t.startAt.inclusive):null;return p2(t.path,t.collectionGroup,e,t.filters,t.limit,r,n)}}function m2(t,e){const r=t.filters.concat([e]);return new zd(t.path,t.collectionGroup,t.explicitOrderBy.slice(),r,t.limit,t.limitType,t.startAt,t.endAt)}function k0(t,e,r){return new zd(t.path,t.collectionGroup,t.explicitOrderBy.slice(),t.filters.slice(),e,r,t.startAt,t.endAt)}function Uv(t,e){return jp(ji(t),ji(e))&&t.limitType===e.limitType}function L4(t){return`${kc(ji(t))}|lt:${t.limitType}`}function Mu(t){return`Query(target=${function(r){let n=r.path.canonicalString();return r.collectionGroup!==null&&(n+=" collectionGroup="+r.collectionGroup),r.filters.length>0&&(n+=`, filters: [${r.filters.map(s=>T4(s)).join(", ")}]`),Lp(r.limit)||(n+=", limit: "+r.limit),r.orderBy.length>0&&(n+=`, orderBy: [${r.orderBy.map(s=>function(a){return`${a.field.canonicalString()} (${a.dir})`}(s)).join(", ")}]`),r.startAt&&(n+=", startAt: ",n+=r.startAt.inclusive?"b:":"a:",n+=r.startAt.position.map(s=>Fd(s)).join(",")),r.endAt&&(n+=", endAt: ",n+=r.endAt.inclusive?"a:":"b:",n+=r.endAt.position.map(s=>Fd(s)).join(",")),`Target(${n})`}(ji(t))}; limitType=${t.limitType})`}function Dp(t,e){return e.isFoundDocument()&&function(n,s){const i=s.key.path;return n.collectionGroup!==null?s.key.hasCollectionId(n.collectionGroup)&&n.path.isPrefixOf(i):dt.isDocumentKey(n.path)?n.path.isEqual(i):n.path.isImmediateParentOf(i)}(t,e)&&function(n,s){for(const i of bf(n))if(!i.field.isKeyField()&&s.data.field(i.field)===null)return!1;return!0}(t,e)&&function(n,s){for(const i of n.filters)if(!i.matches(s))return!1;return!0}(t,e)&&function(n,s){return!(n.startAt&&!function(a,o,l){const c=tE(a,o,l);return a.inclusive?c<=0:c<0}(n.startAt,bf(n),s)||n.endAt&&!function(a,o,l){const c=tE(a,o,l);return a.inclusive?c>=0:c>0}(n.endAt,bf(n),s))}(t,e)}function rO(t){return t.collectionGroup||(t.path.length%2==1?t.path.lastSegment():t.path.get(t.path.length-2))}function j4(t){return(e,r)=>{let n=!1;for(const s of bf(t)){const i=nO(s,e,r);if(i!==0)return i;n=n||s.field.isKeyField()}return 0}}function nO(t,e,r){const n=t.field.isKeyField()?dt.comparator(e.key,r.key):function(i,a,o){const l=a.data.field(i),c=o.data.field(i);return l!==null&&c!==null?gl(l,c):Bt()}(t.field,e,r);switch(t.dir){case"asc":return n;case"desc":return-1*n;default:return Bt()}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Fl{constructor(e,r){this.mapKeyFn=e,this.equalsFn=r,this.inner={},this.innerSize=0}get(e){const r=this.mapKeyFn(e),n=this.inner[r];if(n!==void 0){for(const[s,i]of n)if(this.equalsFn(s,e))return i}}has(e){return this.get(e)!==void 0}set(e,r){const n=this.mapKeyFn(e),s=this.inner[n];if(s===void 0)return this.inner[n]=[[e,r]],void this.innerSize++;for(let i=0;i<s.length;i++)if(this.equalsFn(s[i][0],e))return void(s[i]=[e,r]);s.push([e,r]),this.innerSize++}delete(e){const r=this.mapKeyFn(e),n=this.inner[r];if(n===void 0)return!1;for(let s=0;s<n.length;s++)if(this.equalsFn(n[s][0],e))return n.length===1?delete this.inner[r]:n.splice(s,1),this.innerSize--,!0;return!1}forEach(e){qc(this.inner,(r,n)=>{for(const[s,i]of n)e(s,i)})}isEmpty(){return b4(this.inner)}size(){return this.innerSize}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const sO=new tn(dt.comparator);function Ai(){return sO}const k4=new tn(dt.comparator);function Zh(...t){let e=k4;for(const r of t)e=e.insert(r.key,r);return e}function D4(t){let e=k4;return t.forEach((r,n)=>e=e.insert(r,n.overlayedDocument)),e}function ja(){return Bf()}function R4(){return Bf()}function Bf(){return new Fl(t=>t.toString(),(t,e)=>t.isEqual(e))}const iO=new tn(dt.comparator),aO=new Tr(dt.comparator);function tr(...t){let e=aO;for(const r of t)e=e.add(r);return e}const oO=new Tr(Wt);function AO(){return oO}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Qb(t,e){if(t.useProto3Json){if(isNaN(e))return{doubleValue:"NaN"};if(e===1/0)return{doubleValue:"Infinity"};if(e===-1/0)return{doubleValue:"-Infinity"}}return{doubleValue:ip(e)?"-0":e}}function M4(t){return{integerValue:""+t}}function lO(t,e){return bM(e)?M4(e):Qb(t,e)}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Pv{constructor(){this._=void 0}}function cO(t,e,r){return t instanceof up?function(s,i){const a={fields:{__type__:{stringValue:"server_timestamp"},__local_write_time__:{timestampValue:{seconds:s.seconds,nanos:s.nanoseconds}}}};return i&&Tb(i)&&(i=Ub(i)),i&&(a.fields.__previous_value__=i),{mapValue:a}}(r,e):t instanceof Pd?H4(t,e):t instanceof Qd?V4(t,e):function(s,i){const a=O4(s,i),o=aE(a)+aE(s.Pe);return d2(a)&&d2(s.Pe)?M4(o):Qb(s.serializer,o)}(t,e)}function uO(t,e,r){return t instanceof Pd?H4(t,e):t instanceof Qd?V4(t,e):r}function O4(t,e){return t instanceof dp?function(n){return d2(n)||function(i){return!!i&&"doubleValue"in i}(n)}(e)?e:{integerValue:0}:null}class up extends Pv{}class Pd extends Pv{constructor(e){super(),this.elements=e}}function H4(t,e){const r=K4(e);for(const n of t.elements)r.some(s=>Va(s,n))||r.push(n);return{arrayValue:{values:r}}}class Qd extends Pv{constructor(e){super(),this.elements=e}}function V4(t,e){let r=K4(e);for(const n of t.elements)r=r.filter(s=>!Va(s,n));return{arrayValue:{values:r}}}class dp extends Pv{constructor(e,r){super(),this.serializer=e,this.Pe=r}}function aE(t){return Wr(t.integerValue||t.doubleValue)}function K4(t){return lp(t)&&t.arrayValue.values?t.arrayValue.values.slice():[]}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class dO{constructor(e,r){this.field=e,this.transform=r}}function hO(t,e){return t.field.isEqual(e.field)&&function(n,s){return n instanceof Pd&&s instanceof Pd||n instanceof Qd&&s instanceof Qd?Sd(n.elements,s.elements,Va):n instanceof dp&&s instanceof dp?Va(n.Pe,s.Pe):n instanceof up&&s instanceof up}(t.transform,e.transform)}class fO{constructor(e,r){this.version=e,this.transformResults=r}}class Zr{constructor(e,r){this.updateTime=e,this.exists=r}static none(){return new Zr}static exists(e){return new Zr(void 0,e)}static updateTime(e){return new Zr(e)}get isNone(){return this.updateTime===void 0&&this.exists===void 0}isEqual(e){return this.exists===e.exists&&(this.updateTime?!!e.updateTime&&this.updateTime.isEqual(e.updateTime):!e.updateTime)}}function $g(t,e){return t.updateTime!==void 0?e.isFoundDocument()&&e.version.isEqual(t.updateTime):t.exists===void 0||t.exists===e.isFoundDocument()}class Qv{}function q4(t,e){if(!t.hasLocalMutations||e&&e.fields.length===0)return null;if(e===null)return t.isNoDocument()?new Wd(t.key,Zr.none()):new $d(t.key,t.data,Zr.none());{const r=t.data,n=as.empty();let s=new Tr(Yr.comparator);for(let i of e.fields)if(!s.has(i)){let a=r.field(i);a===null&&i.length>1&&(i=i.popLast(),a=r.field(i)),a===null?n.delete(i):n.set(i,a),s=s.add(i)}return new Go(t.key,n,new zs(s.toArray()),Zr.none())}}function pO(t,e,r){t instanceof $d?function(s,i,a){const o=s.value.clone(),l=AE(s.fieldTransforms,i,a.transformResults);o.setAll(l),i.convertToFoundDocument(a.version,o).setHasCommittedMutations()}(t,e,r):t instanceof Go?function(s,i,a){if(!$g(s.precondition,i))return void i.convertToUnknownDocument(a.version);const o=AE(s.fieldTransforms,i,a.transformResults),l=i.data;l.setAll(G4(s)),l.setAll(o),i.convertToFoundDocument(a.version,l).setHasCommittedMutations()}(t,e,r):function(s,i,a){i.convertToNoDocument(a.version).setHasCommittedMutations()}(0,e,r)}function Cf(t,e,r,n){return t instanceof $d?function(i,a,o,l){if(!$g(i.precondition,a))return o;const c=i.value.clone(),u=lE(i.fieldTransforms,l,a);return c.setAll(u),a.convertToFoundDocument(a.version,c).setHasLocalMutations(),null}(t,e,r,n):t instanceof Go?function(i,a,o,l){if(!$g(i.precondition,a))return o;const c=lE(i.fieldTransforms,l,a),u=a.data;return u.setAll(G4(i)),u.setAll(c),a.convertToFoundDocument(a.version,u).setHasLocalMutations(),o===null?null:o.unionWith(i.fieldMask.fields).unionWith(i.fieldTransforms.map(f=>f.field))}(t,e,r,n):function(i,a,o){return $g(i.precondition,a)?(a.convertToNoDocument(a.version).setHasLocalMutations(),null):o}(t,e,r)}function mO(t,e){let r=null;for(const n of t.fieldTransforms){const s=e.data.field(n.field),i=O4(n.transform,s||null);i!=null&&(r===null&&(r=as.empty()),r.set(n.field,i))}return r||null}function oE(t,e){return t.type===e.type&&!!t.key.isEqual(e.key)&&!!t.precondition.isEqual(e.precondition)&&!!function(n,s){return n===void 0&&s===void 0||!(!n||!s)&&Sd(n,s,(i,a)=>hO(i,a))}(t.fieldTransforms,e.fieldTransforms)&&(t.type===0?t.value.isEqual(e.value):t.type!==1||t.data.isEqual(e.data)&&t.fieldMask.isEqual(e.fieldMask))}class $d extends Qv{constructor(e,r,n,s=[]){super(),this.key=e,this.value=r,this.precondition=n,this.fieldTransforms=s,this.type=0}getFieldMask(){return null}}class Go extends Qv{constructor(e,r,n,s,i=[]){super(),this.key=e,this.data=r,this.fieldMask=n,this.precondition=s,this.fieldTransforms=i,this.type=1}getFieldMask(){return this.fieldMask}}function G4(t){const e=new Map;return t.fieldMask.fields.forEach(r=>{if(!r.isEmpty()){const n=t.data.field(r);e.set(r,n)}}),e}function AE(t,e,r){const n=new Map;Tt(t.length===r.length);for(let s=0;s<r.length;s++){const i=t[s],a=i.transform,o=e.data.field(i.field);n.set(i.field,uO(a,o,r[s]))}return n}function lE(t,e,r){const n=new Map;for(const s of t){const i=s.transform,a=r.data.field(s.field);n.set(s.field,cO(i,a,e))}return n}class Wd extends Qv{constructor(e,r){super(),this.key=e,this.precondition=r,this.type=2,this.fieldTransforms=[]}getFieldMask(){return null}}class Lb extends Qv{constructor(e,r){super(),this.key=e,this.precondition=r,this.type=3,this.fieldTransforms=[]}getFieldMask(){return null}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class jb{constructor(e,r,n,s){this.batchId=e,this.localWriteTime=r,this.baseMutations=n,this.mutations=s}applyToRemoteDocument(e,r){const n=r.mutationResults;for(let s=0;s<this.mutations.length;s++){const i=this.mutations[s];i.key.isEqual(e.key)&&pO(i,e,n[s])}}applyToLocalView(e,r){for(const n of this.baseMutations)n.key.isEqual(e.key)&&(r=Cf(n,e,r,this.localWriteTime));for(const n of this.mutations)n.key.isEqual(e.key)&&(r=Cf(n,e,r,this.localWriteTime));return r}applyToLocalDocumentSet(e,r){const n=R4();return this.mutations.forEach(s=>{const i=e.get(s.key),a=i.overlayedDocument;let o=this.applyToLocalView(a,i.mutatedFields);o=r.has(s.key)?null:o;const l=q4(a,o);l!==null&&n.set(s.key,l),a.isValidDocument()||a.convertToNoDocument(Qt.min())}),n}keys(){return this.mutations.reduce((e,r)=>e.add(r.key),tr())}isEqual(e){return this.batchId===e.batchId&&Sd(this.mutations,e.mutations,(r,n)=>oE(r,n))&&Sd(this.baseMutations,e.baseMutations,(r,n)=>oE(r,n))}}class kb{constructor(e,r,n,s){this.batch=e,this.commitVersion=r,this.mutationResults=n,this.docVersions=s}static from(e,r,n){Tt(e.mutations.length===n.length);let s=function(){return iO}();const i=e.mutations;for(let a=0;a<i.length;a++)s=s.insert(i[a].key,n[a].version);return new kb(e,r,n,s)}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Db{constructor(e,r){this.largestBatchId=e,this.mutation=r}getKey(){return this.mutation.key}isEqual(e){return e!==null&&this.mutation===e.mutation}toString(){return`Overlay{
      largestBatchId: ${this.largestBatchId},
      mutation: ${this.mutation.toString()}
    }`}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class gO{constructor(e,r){this.count=e,this.unchangedNames=r}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var _n,cr;function z4(t){switch(t){default:return Bt();case Me.CANCELLED:case Me.UNKNOWN:case Me.DEADLINE_EXCEEDED:case Me.RESOURCE_EXHAUSTED:case Me.INTERNAL:case Me.UNAVAILABLE:case Me.UNAUTHENTICATED:return!1;case Me.INVALID_ARGUMENT:case Me.NOT_FOUND:case Me.ALREADY_EXISTS:case Me.PERMISSION_DENIED:case Me.FAILED_PRECONDITION:case Me.ABORTED:case Me.OUT_OF_RANGE:case Me.UNIMPLEMENTED:case Me.DATA_LOSS:return!0}}function $4(t){if(t===void 0)return Us("GRPC error has no .code"),Me.UNKNOWN;switch(t){case _n.OK:return Me.OK;case _n.CANCELLED:return Me.CANCELLED;case _n.UNKNOWN:return Me.UNKNOWN;case _n.DEADLINE_EXCEEDED:return Me.DEADLINE_EXCEEDED;case _n.RESOURCE_EXHAUSTED:return Me.RESOURCE_EXHAUSTED;case _n.INTERNAL:return Me.INTERNAL;case _n.UNAVAILABLE:return Me.UNAVAILABLE;case _n.UNAUTHENTICATED:return Me.UNAUTHENTICATED;case _n.INVALID_ARGUMENT:return Me.INVALID_ARGUMENT;case _n.NOT_FOUND:return Me.NOT_FOUND;case _n.ALREADY_EXISTS:return Me.ALREADY_EXISTS;case _n.PERMISSION_DENIED:return Me.PERMISSION_DENIED;case _n.FAILED_PRECONDITION:return Me.FAILED_PRECONDITION;case _n.ABORTED:return Me.ABORTED;case _n.OUT_OF_RANGE:return Me.OUT_OF_RANGE;case _n.UNIMPLEMENTED:return Me.UNIMPLEMENTED;case _n.DATA_LOSS:return Me.DATA_LOSS;default:return Bt()}}(cr=_n||(_n={}))[cr.OK=0]="OK",cr[cr.CANCELLED=1]="CANCELLED",cr[cr.UNKNOWN=2]="UNKNOWN",cr[cr.INVALID_ARGUMENT=3]="INVALID_ARGUMENT",cr[cr.DEADLINE_EXCEEDED=4]="DEADLINE_EXCEEDED",cr[cr.NOT_FOUND=5]="NOT_FOUND",cr[cr.ALREADY_EXISTS=6]="ALREADY_EXISTS",cr[cr.PERMISSION_DENIED=7]="PERMISSION_DENIED",cr[cr.UNAUTHENTICATED=16]="UNAUTHENTICATED",cr[cr.RESOURCE_EXHAUSTED=8]="RESOURCE_EXHAUSTED",cr[cr.FAILED_PRECONDITION=9]="FAILED_PRECONDITION",cr[cr.ABORTED=10]="ABORTED",cr[cr.OUT_OF_RANGE=11]="OUT_OF_RANGE",cr[cr.UNIMPLEMENTED=12]="UNIMPLEMENTED",cr[cr.INTERNAL=13]="INTERNAL",cr[cr.UNAVAILABLE=14]="UNAVAILABLE",cr[cr.DATA_LOSS=15]="DATA_LOSS";/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function vO(){return new TextEncoder}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const wO=new yc([4294967295,4294967295],0);function cE(t){const e=vO().encode(t),r=new i4;return r.update(e),new Uint8Array(r.digest())}function uE(t){const e=new DataView(t.buffer),r=e.getUint32(0,!0),n=e.getUint32(4,!0),s=e.getUint32(8,!0),i=e.getUint32(12,!0);return[new yc([r,n],0),new yc([s,i],0)]}class Rb{constructor(e,r,n){if(this.bitmap=e,this.padding=r,this.hashCount=n,r<0||r>=8)throw new ef(`Invalid padding: ${r}`);if(n<0)throw new ef(`Invalid hash count: ${n}`);if(e.length>0&&this.hashCount===0)throw new ef(`Invalid hash count: ${n}`);if(e.length===0&&r!==0)throw new ef(`Invalid padding when bitmap length is 0: ${r}`);this.Ie=8*e.length-r,this.Te=yc.fromNumber(this.Ie)}Ee(e,r,n){let s=e.add(r.multiply(yc.fromNumber(n)));return s.compare(wO)===1&&(s=new yc([s.getBits(0),s.getBits(1)],0)),s.modulo(this.Te).toNumber()}de(e){return(this.bitmap[Math.floor(e/8)]&1<<e%8)!=0}mightContain(e){if(this.Ie===0)return!1;const r=cE(e),[n,s]=uE(r);for(let i=0;i<this.hashCount;i++){const a=this.Ee(n,s,i);if(!this.de(a))return!1}return!0}static create(e,r,n){const s=e%8==0?0:8-e%8,i=new Uint8Array(Math.ceil(e/8)),a=new Rb(i,s,r);return n.forEach(o=>a.insert(o)),a}insert(e){if(this.Ie===0)return;const r=cE(e),[n,s]=uE(r);for(let i=0;i<this.hashCount;i++){const a=this.Ee(n,s,i);this.Ae(a)}}Ae(e){const r=Math.floor(e/8),n=e%8;this.bitmap[r]|=1<<n}}class ef extends Error{constructor(){super(...arguments),this.name="BloomFilterError"}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Lv{constructor(e,r,n,s,i){this.snapshotVersion=e,this.targetChanges=r,this.targetMismatches=n,this.documentUpdates=s,this.resolvedLimboDocuments=i}static createSynthesizedRemoteEventForCurrentChange(e,r,n){const s=new Map;return s.set(e,Rp.createSynthesizedTargetChangeForCurrentChange(e,r,n)),new Lv(Qt.min(),s,new tn(Wt),Ai(),tr())}}class Rp{constructor(e,r,n,s,i){this.resumeToken=e,this.current=r,this.addedDocuments=n,this.modifiedDocuments=s,this.removedDocuments=i}static createSynthesizedTargetChangeForCurrentChange(e,r,n){return new Rp(n,r,tr(),tr(),tr())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Wg{constructor(e,r,n,s){this.Re=e,this.removedTargetIds=r,this.key=n,this.Ve=s}}class W4{constructor(e,r){this.targetId=e,this.me=r}}class X4{constructor(e,r,n=Bn.EMPTY_BYTE_STRING,s=null){this.state=e,this.targetIds=r,this.resumeToken=n,this.cause=s}}class dE{constructor(){this.fe=0,this.ge=fE(),this.pe=Bn.EMPTY_BYTE_STRING,this.ye=!1,this.we=!0}get current(){return this.ye}get resumeToken(){return this.pe}get Se(){return this.fe!==0}get be(){return this.we}De(e){e.approximateByteSize()>0&&(this.we=!0,this.pe=e)}ve(){let e=tr(),r=tr(),n=tr();return this.ge.forEach((s,i)=>{switch(i){case 0:e=e.add(s);break;case 2:r=r.add(s);break;case 1:n=n.add(s);break;default:Bt()}}),new Rp(this.pe,this.ye,e,r,n)}Ce(){this.we=!1,this.ge=fE()}Fe(e,r){this.we=!0,this.ge=this.ge.insert(e,r)}Me(e){this.we=!0,this.ge=this.ge.remove(e)}xe(){this.fe+=1}Oe(){this.fe-=1,Tt(this.fe>=0)}Ne(){this.we=!0,this.ye=!0}}class yO{constructor(e){this.Le=e,this.Be=new Map,this.ke=Ai(),this.qe=hE(),this.Qe=new tn(Wt)}Ke(e){for(const r of e.Re)e.Ve&&e.Ve.isFoundDocument()?this.$e(r,e.Ve):this.Ue(r,e.key,e.Ve);for(const r of e.removedTargetIds)this.Ue(r,e.key,e.Ve)}We(e){this.forEachTarget(e,r=>{const n=this.Ge(r);switch(e.state){case 0:this.ze(r)&&n.De(e.resumeToken);break;case 1:n.Oe(),n.Se||n.Ce(),n.De(e.resumeToken);break;case 2:n.Oe(),n.Se||this.removeTarget(r);break;case 3:this.ze(r)&&(n.Ne(),n.De(e.resumeToken));break;case 4:this.ze(r)&&(this.je(r),n.De(e.resumeToken));break;default:Bt()}})}forEachTarget(e,r){e.targetIds.length>0?e.targetIds.forEach(r):this.Be.forEach((n,s)=>{this.ze(s)&&r(s)})}He(e){const r=e.targetId,n=e.me.count,s=this.Je(r);if(s){const i=s.target;if(L0(i))if(n===0){const a=new dt(i.path);this.Ue(r,a,Jr.newNoDocument(a,Qt.min()))}else Tt(n===1);else{const a=this.Ye(r);if(a!==n){const o=this.Ze(e),l=o?this.Xe(o,e,a):1;if(l!==0){this.je(r);const c=l===2?"TargetPurposeExistenceFilterMismatchBloom":"TargetPurposeExistenceFilterMismatch";this.Qe=this.Qe.insert(r,c)}}}}}Ze(e){const r=e.me.unchangedNames;if(!r||!r.bits)return null;const{bits:{bitmap:n="",padding:s=0},hashCount:i=0}=r;let a,o;try{a=pl(n).toUint8Array()}catch(l){if(l instanceof B4)return fl("Decoding the base64 bloom filter in existence filter failed ("+l.message+"); ignoring the bloom filter and falling back to full re-query."),null;throw l}try{o=new Rb(a,s,i)}catch(l){return fl(l instanceof ef?"BloomFilter error: ":"Applying bloom filter failed: ",l),null}return o.Ie===0?null:o}Xe(e,r,n){return r.me.count===n-this.nt(e,r.targetId)?0:2}nt(e,r){const n=this.Le.getRemoteKeysForTarget(r);let s=0;return n.forEach(i=>{const a=this.Le.tt(),o=`projects/${a.projectId}/databases/${a.database}/documents/${i.path.canonicalString()}`;e.mightContain(o)||(this.Ue(r,i,null),s++)}),s}rt(e){const r=new Map;this.Be.forEach((i,a)=>{const o=this.Je(a);if(o){if(i.current&&L0(o.target)){const l=new dt(o.target.path);this.ke.get(l)!==null||this.it(a,l)||this.Ue(a,l,Jr.newNoDocument(l,e))}i.be&&(r.set(a,i.ve()),i.Ce())}});let n=tr();this.qe.forEach((i,a)=>{let o=!0;a.forEachWhile(l=>{const c=this.Je(l);return!c||c.purpose==="TargetPurposeLimboResolution"||(o=!1,!1)}),o&&(n=n.add(i))}),this.ke.forEach((i,a)=>a.setReadTime(e));const s=new Lv(e,r,this.Qe,this.ke,n);return this.ke=Ai(),this.qe=hE(),this.Qe=new tn(Wt),s}$e(e,r){if(!this.ze(e))return;const n=this.it(e,r.key)?2:0;this.Ge(e).Fe(r.key,n),this.ke=this.ke.insert(r.key,r),this.qe=this.qe.insert(r.key,this.st(r.key).add(e))}Ue(e,r,n){if(!this.ze(e))return;const s=this.Ge(e);this.it(e,r)?s.Fe(r,1):s.Me(r),this.qe=this.qe.insert(r,this.st(r).delete(e)),n&&(this.ke=this.ke.insert(r,n))}removeTarget(e){this.Be.delete(e)}Ye(e){const r=this.Ge(e).ve();return this.Le.getRemoteKeysForTarget(e).size+r.addedDocuments.size-r.removedDocuments.size}xe(e){this.Ge(e).xe()}Ge(e){let r=this.Be.get(e);return r||(r=new dE,this.Be.set(e,r)),r}st(e){let r=this.qe.get(e);return r||(r=new Tr(Wt),this.qe=this.qe.insert(e,r)),r}ze(e){const r=this.Je(e)!==null;return r||Je("WatchChangeAggregator","Detected inactive target",e),r}Je(e){const r=this.Be.get(e);return r&&r.Se?null:this.Le.ot(e)}je(e){this.Be.set(e,new dE),this.Le.getRemoteKeysForTarget(e).forEach(r=>{this.Ue(e,r,null)})}it(e,r){return this.Le.getRemoteKeysForTarget(e).has(r)}}function hE(){return new tn(dt.comparator)}function fE(){return new tn(dt.comparator)}const xO={asc:"ASCENDING",desc:"DESCENDING"},bO={"<":"LESS_THAN","<=":"LESS_THAN_OR_EQUAL",">":"GREATER_THAN",">=":"GREATER_THAN_OR_EQUAL","==":"EQUAL","!=":"NOT_EQUAL","array-contains":"ARRAY_CONTAINS",in:"IN","not-in":"NOT_IN","array-contains-any":"ARRAY_CONTAINS_ANY"},BO={and:"AND",or:"OR"};class CO{constructor(e,r){this.databaseId=e,this.useProto3Json=r}}function g2(t,e){return t.useProto3Json||Lp(e)?e:{value:e}}function Ld(t,e){return t.useProto3Json?`${new Date(1e3*e.seconds).toISOString().replace(/\.\d*/,"").replace("Z","")}.${("000000000"+e.nanoseconds).slice(-9)}Z`:{seconds:""+e.seconds,nanos:e.nanoseconds}}function J4(t,e){return t.useProto3Json?e.toBase64():e.toUint8Array()}function EO(t,e){return Ld(t,e.toTimestamp())}function zn(t){return Tt(!!t),Qt.fromTimestamp(function(r){const n=Ho(r);return new Dt(n.seconds,n.nanos)}(t))}function Mb(t,e){return v2(t,e).canonicalString()}function v2(t,e){const r=function(s){return new pr(["projects",s.projectId,"databases",s.database])}(t).child("documents");return e===void 0?r:r.child(e)}function Y4(t){const e=pr.fromString(t);return Tt(oT(e)),e}function hp(t,e){return Mb(t.databaseId,e.path)}function To(t,e){const r=Y4(e);if(r.get(1)!==t.databaseId.projectId)throw new st(Me.INVALID_ARGUMENT,"Tried to deserialize key from different project: "+r.get(1)+" vs "+t.databaseId.projectId);if(r.get(3)!==t.databaseId.database)throw new st(Me.INVALID_ARGUMENT,"Tried to deserialize key from different database: "+r.get(3)+" vs "+t.databaseId.database);return new dt(tT(r))}function Z4(t,e){return Mb(t.databaseId,e)}function eT(t){const e=Y4(t);return e.length===4?pr.emptyPath():tT(e)}function w2(t){return new pr(["projects",t.databaseId.projectId,"databases",t.databaseId.database]).canonicalString()}function tT(t){return Tt(t.length>4&&t.get(4)==="documents"),t.popFirst(5)}function pE(t,e,r){return{name:hp(t,e),fields:r.value.mapValue.fields}}function _O(t,e,r){const n=To(t,e.name),s=zn(e.updateTime),i=e.createTime?zn(e.createTime):Qt.min(),a=new as({mapValue:{fields:e.fields}}),o=Jr.newFoundDocument(n,s,i,a);return r&&o.setHasCommittedMutations(),r?o.setHasCommittedMutations():o}function NO(t,e){return"found"in e?function(n,s){Tt(!!s.found),s.found.name,s.found.updateTime;const i=To(n,s.found.name),a=zn(s.found.updateTime),o=s.found.createTime?zn(s.found.createTime):Qt.min(),l=new as({mapValue:{fields:s.found.fields}});return Jr.newFoundDocument(i,a,o,l)}(t,e):"missing"in e?function(n,s){Tt(!!s.missing),Tt(!!s.readTime);const i=To(n,s.missing),a=zn(s.readTime);return Jr.newNoDocument(i,a)}(t,e):Bt()}function IO(t,e){let r;if("targetChange"in e){e.targetChange;const n=function(c){return c==="NO_CHANGE"?0:c==="ADD"?1:c==="REMOVE"?2:c==="CURRENT"?3:c==="RESET"?4:Bt()}(e.targetChange.targetChangeType||"NO_CHANGE"),s=e.targetChange.targetIds||[],i=function(c,u){return c.useProto3Json?(Tt(u===void 0||typeof u=="string"),Bn.fromBase64String(u||"")):(Tt(u===void 0||u instanceof Buffer||u instanceof Uint8Array),Bn.fromUint8Array(u||new Uint8Array))}(t,e.targetChange.resumeToken),a=e.targetChange.cause,o=a&&function(c){const u=c.code===void 0?Me.UNKNOWN:$4(c.code);return new st(u,c.message||"")}(a);r=new X4(n,s,i,o||null)}else if("documentChange"in e){e.documentChange;const n=e.documentChange;n.document,n.document.name,n.document.updateTime;const s=To(t,n.document.name),i=zn(n.document.updateTime),a=n.document.createTime?zn(n.document.createTime):Qt.min(),o=new as({mapValue:{fields:n.document.fields}}),l=Jr.newFoundDocument(s,i,a,o),c=n.targetIds||[],u=n.removedTargetIds||[];r=new Wg(c,u,l.key,l)}else if("documentDelete"in e){e.documentDelete;const n=e.documentDelete;n.document;const s=To(t,n.document),i=n.readTime?zn(n.readTime):Qt.min(),a=Jr.newNoDocument(s,i),o=n.removedTargetIds||[];r=new Wg([],o,a.key,a)}else if("documentRemove"in e){e.documentRemove;const n=e.documentRemove;n.document;const s=To(t,n.document),i=n.removedTargetIds||[];r=new Wg([],i,s,null)}else{if(!("filter"in e))return Bt();{e.filter;const n=e.filter;n.targetId;const{count:s=0,unchangedNames:i}=n,a=new gO(s,i),o=n.targetId;r=new W4(o,a)}}return r}function fp(t,e){let r;if(e instanceof $d)r={update:pE(t,e.key,e.value)};else if(e instanceof Wd)r={delete:hp(t,e.key)};else if(e instanceof Go)r={update:pE(t,e.key,e.data),updateMask:QO(e.fieldMask)};else{if(!(e instanceof Lb))return Bt();r={verify:hp(t,e.key)}}return e.fieldTransforms.length>0&&(r.updateTransforms=e.fieldTransforms.map(n=>function(i,a){const o=a.transform;if(o instanceof up)return{fieldPath:a.field.canonicalString(),setToServerValue:"REQUEST_TIME"};if(o instanceof Pd)return{fieldPath:a.field.canonicalString(),appendMissingElements:{values:o.elements}};if(o instanceof Qd)return{fieldPath:a.field.canonicalString(),removeAllFromArray:{values:o.elements}};if(o instanceof dp)return{fieldPath:a.field.canonicalString(),increment:o.Pe};throw Bt()}(0,n))),e.precondition.isNone||(r.currentDocument=function(s,i){return i.updateTime!==void 0?{updateTime:EO(s,i.updateTime)}:i.exists!==void 0?{exists:i.exists}:Bt()}(t,e.precondition)),r}function y2(t,e){const r=e.currentDocument?function(i){return i.updateTime!==void 0?Zr.updateTime(zn(i.updateTime)):i.exists!==void 0?Zr.exists(i.exists):Zr.none()}(e.currentDocument):Zr.none(),n=e.updateTransforms?e.updateTransforms.map(s=>function(a,o){let l=null;if("setToServerValue"in o)Tt(o.setToServerValue==="REQUEST_TIME"),l=new up;else if("appendMissingElements"in o){const u=o.appendMissingElements.values||[];l=new Pd(u)}else if("removeAllFromArray"in o){const u=o.removeAllFromArray.values||[];l=new Qd(u)}else"increment"in o?l=new dp(a,o.increment):Bt();const c=Yr.fromServerFormat(o.fieldPath);return new dO(c,l)}(t,s)):[];if(e.update){e.update.name;const s=To(t,e.update.name),i=new as({mapValue:{fields:e.update.fields}});if(e.updateMask){const a=function(l){const c=l.fieldPaths||[];return new zs(c.map(u=>Yr.fromServerFormat(u)))}(e.updateMask);return new Go(s,i,a,r,n)}return new $d(s,i,r,n)}if(e.delete){const s=To(t,e.delete);return new Wd(s,r)}if(e.verify){const s=To(t,e.verify);return new Lb(s,r)}return Bt()}function SO(t,e){return t&&t.length>0?(Tt(e!==void 0),t.map(r=>function(s,i){let a=s.updateTime?zn(s.updateTime):zn(i);return a.isEqual(Qt.min())&&(a=zn(i)),new fO(a,s.transformResults||[])}(r,e))):[]}function rT(t,e){return{documents:[Z4(t,e.path)]}}function nT(t,e){const r={structuredQuery:{}},n=e.path;let s;e.collectionGroup!==null?(s=n,r.structuredQuery.from=[{collectionId:e.collectionGroup,allDescendants:!0}]):(s=n.popLast(),r.structuredQuery.from=[{collectionId:n.lastSegment()}]),r.parent=Z4(t,s);const i=function(c){if(c.length!==0)return aT(_r.create(c,"and"))}(e.filters);i&&(r.structuredQuery.where=i);const a=function(c){if(c.length!==0)return c.map(u=>function(p){return{field:Ou(p.field),direction:TO(p.dir)}}(u))}(e.orderBy);a&&(r.structuredQuery.orderBy=a);const o=g2(t,e.limit);return o!==null&&(r.structuredQuery.limit=o),e.startAt&&(r.structuredQuery.startAt=function(c){return{before:c.inclusive,values:c.position}}(e.startAt)),e.endAt&&(r.structuredQuery.endAt=function(c){return{before:!c.inclusive,values:c.position}}(e.endAt)),{_t:r,parent:s}}function sT(t){let e=eT(t.parent);const r=t.structuredQuery,n=r.from?r.from.length:0;let s=null;if(n>0){Tt(n===1);const u=r.from[0];u.allDescendants?s=u.collectionId:e=e.child(u.collectionId)}let i=[];r.where&&(i=function(f){const p=iT(f);return p instanceof _r&&Pb(p)?p.getFilters():[p]}(r.where));let a=[];r.orderBy&&(a=function(f){return f.map(p=>function(b){return new cp(Hu(b.field),function(_){switch(_){case"ASCENDING":return"asc";case"DESCENDING":return"desc";default:return}}(b.direction))}(p))}(r.orderBy));let o=null;r.limit&&(o=function(f){let p;return p=typeof f=="object"?f.value:f,Lp(p)?null:p}(r.limit));let l=null;r.startAt&&(l=function(f){const p=!!f.before,m=f.values||[];return new Td(m,p)}(r.startAt));let c=null;return r.endAt&&(c=function(f){const p=!f.before,m=f.values||[];return new Td(m,p)}(r.endAt)),eO(e,s,a,i,o,"F",l,c)}function FO(t,e){const r=function(s){switch(s){case"TargetPurposeListen":return null;case"TargetPurposeExistenceFilterMismatch":return"existence-filter-mismatch";case"TargetPurposeExistenceFilterMismatchBloom":return"existence-filter-mismatch-bloom";case"TargetPurposeLimboResolution":return"limbo-document";default:return Bt()}}(e.purpose);return r==null?null:{"goog-listen-tags":r}}function iT(t){return t.unaryFilter!==void 0?function(r){switch(r.unaryFilter.op){case"IS_NAN":const n=Hu(r.unaryFilter.field);return lr.create(n,"==",{doubleValue:NaN});case"IS_NULL":const s=Hu(r.unaryFilter.field);return lr.create(s,"==",{nullValue:"NULL_VALUE"});case"IS_NOT_NAN":const i=Hu(r.unaryFilter.field);return lr.create(i,"!=",{doubleValue:NaN});case"IS_NOT_NULL":const a=Hu(r.unaryFilter.field);return lr.create(a,"!=",{nullValue:"NULL_VALUE"});default:return Bt()}}(t):t.fieldFilter!==void 0?function(r){return lr.create(Hu(r.fieldFilter.field),function(s){switch(s){case"EQUAL":return"==";case"NOT_EQUAL":return"!=";case"GREATER_THAN":return">";case"GREATER_THAN_OR_EQUAL":return">=";case"LESS_THAN":return"<";case"LESS_THAN_OR_EQUAL":return"<=";case"ARRAY_CONTAINS":return"array-contains";case"IN":return"in";case"NOT_IN":return"not-in";case"ARRAY_CONTAINS_ANY":return"array-contains-any";default:return Bt()}}(r.fieldFilter.op),r.fieldFilter.value)}(t):t.compositeFilter!==void 0?function(r){return _r.create(r.compositeFilter.filters.map(n=>iT(n)),function(s){switch(s){case"AND":return"and";case"OR":return"or";default:return Bt()}}(r.compositeFilter.op))}(t):Bt()}function TO(t){return xO[t]}function UO(t){return bO[t]}function PO(t){return BO[t]}function Ou(t){return{fieldPath:t.canonicalString()}}function Hu(t){return Yr.fromServerFormat(t.fieldPath)}function aT(t){return t instanceof lr?function(r){if(r.op==="=="){if(Y5(r.value))return{unaryFilter:{field:Ou(r.field),op:"IS_NAN"}};if(J5(r.value))return{unaryFilter:{field:Ou(r.field),op:"IS_NULL"}}}else if(r.op==="!="){if(Y5(r.value))return{unaryFilter:{field:Ou(r.field),op:"IS_NOT_NAN"}};if(J5(r.value))return{unaryFilter:{field:Ou(r.field),op:"IS_NOT_NULL"}}}return{fieldFilter:{field:Ou(r.field),op:UO(r.op),value:r.value}}}(t):t instanceof _r?function(r){const n=r.getFilters().map(s=>aT(s));return n.length===1?n[0]:{compositeFilter:{op:PO(r.op),filters:n}}}(t):Bt()}function QO(t){const e=[];return t.fields.forEach(r=>e.push(r.canonicalString())),{fieldPaths:e}}function oT(t){return t.length>=4&&t.get(0)==="projects"&&t.get(2)==="databases"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class _o{constructor(e,r,n,s,i=Qt.min(),a=Qt.min(),o=Bn.EMPTY_BYTE_STRING,l=null){this.target=e,this.targetId=r,this.purpose=n,this.sequenceNumber=s,this.snapshotVersion=i,this.lastLimboFreeSnapshotVersion=a,this.resumeToken=o,this.expectedCount=l}withSequenceNumber(e){return new _o(this.target,this.targetId,this.purpose,e,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,this.expectedCount)}withResumeToken(e,r){return new _o(this.target,this.targetId,this.purpose,this.sequenceNumber,r,this.lastLimboFreeSnapshotVersion,e,null)}withExpectedCount(e){return new _o(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,e)}withLastLimboFreeSnapshotVersion(e){return new _o(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,e,this.resumeToken,this.expectedCount)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class AT{constructor(e){this.ct=e}}function LO(t,e){let r;if(e.document)r=_O(t.ct,e.document,!!e.hasCommittedMutations);else if(e.noDocument){const n=dt.fromSegments(e.noDocument.path),s=Rc(e.noDocument.readTime);r=Jr.newNoDocument(n,s),e.hasCommittedMutations&&r.setHasCommittedMutations()}else{if(!e.unknownDocument)return Bt();{const n=dt.fromSegments(e.unknownDocument.path),s=Rc(e.unknownDocument.version);r=Jr.newUnknownDocument(n,s)}}return e.readTime&&r.setReadTime(function(s){const i=new Dt(s[0],s[1]);return Qt.fromTimestamp(i)}(e.readTime)),r}function mE(t,e){const r=e.key,n={prefixPath:r.getCollectionPath().popLast().toArray(),collectionGroup:r.collectionGroup,documentId:r.path.lastSegment(),readTime:D0(e.readTime),hasCommittedMutations:e.hasCommittedMutations};if(e.isFoundDocument())n.document=function(i,a){return{name:hp(i,a.key),fields:a.data.value.mapValue.fields,updateTime:Ld(i,a.version.toTimestamp()),createTime:Ld(i,a.createTime.toTimestamp())}}(t.ct,e);else if(e.isNoDocument())n.noDocument={path:r.path.toArray(),readTime:Dc(e.version)};else{if(!e.isUnknownDocument())return Bt();n.unknownDocument={path:r.path.toArray(),version:Dc(e.version)}}return n}function D0(t){const e=t.toTimestamp();return[e.seconds,e.nanoseconds]}function Dc(t){const e=t.toTimestamp();return{seconds:e.seconds,nanoseconds:e.nanoseconds}}function Rc(t){const e=new Dt(t.seconds,t.nanoseconds);return Qt.fromTimestamp(e)}function Ac(t,e){const r=(e.baseMutations||[]).map(i=>y2(t.ct,i));for(let i=0;i<e.mutations.length-1;++i){const a=e.mutations[i];if(i+1<e.mutations.length&&e.mutations[i+1].transform!==void 0){const o=e.mutations[i+1];a.updateTransforms=o.transform.fieldTransforms,e.mutations.splice(i+1,1),++i}}const n=e.mutations.map(i=>y2(t.ct,i)),s=Dt.fromMillis(e.localWriteTimeMs);return new jb(e.batchId,s,r,n)}function tf(t){const e=Rc(t.readTime),r=t.lastLimboFreeSnapshotVersion!==void 0?Rc(t.lastLimboFreeSnapshotVersion):Qt.min();let n;return n=function(i){return i.documents!==void 0}(t.query)?function(i){return Tt(i.documents.length===1),ji(kp(eT(i.documents[0])))}(t.query):function(i){return ji(sT(i))}(t.query),new _o(n,t.targetId,"TargetPurposeListen",t.lastListenSequenceNumber,e,r,Bn.fromBase64String(t.resumeToken))}function lT(t,e){const r=Dc(e.snapshotVersion),n=Dc(e.lastLimboFreeSnapshotVersion);let s;s=L0(e.target)?rT(t.ct,e.target):nT(t.ct,e.target)._t;const i=e.resumeToken.toBase64();return{targetId:e.targetId,canonicalId:kc(e.target),readTime:r,resumeToken:i,lastListenSequenceNumber:e.sequenceNumber,lastLimboFreeSnapshotVersion:n,query:s}}function cT(t){const e=sT({parent:t.parent,structuredQuery:t.structuredQuery});return t.limitType==="LAST"?k0(e,e.limit,"L"):e}function gy(t,e){return new Db(e.largestBatchId,y2(t.ct,e.overlayMutation))}function gE(t,e){const r=e.path.lastSegment();return[t,Qs(e.path.popLast()),r]}function vE(t,e,r,n){return{indexId:t,uid:e,sequenceNumber:r,readTime:Dc(n.readTime),documentKey:Qs(n.documentKey.path),largestBatchId:n.largestBatchId}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class jO{getBundleMetadata(e,r){return wE(e).get(r).next(n=>{if(n)return function(i){return{id:i.bundleId,createTime:Rc(i.createTime),version:i.version}}(n)})}saveBundleMetadata(e,r){return wE(e).put(function(s){return{bundleId:s.id,createTime:Dc(zn(s.createTime)),version:s.version}}(r))}getNamedQuery(e,r){return yE(e).get(r).next(n=>{if(n)return function(i){return{name:i.name,query:cT(i.bundledQuery),readTime:Rc(i.readTime)}}(n)})}saveNamedQuery(e,r){return yE(e).put(function(s){return{name:s.name,readTime:Dc(zn(s.readTime)),bundledQuery:s.bundledQuery}}(r))}}function wE(t){return kn(t,"bundles")}function yE(t){return kn(t,"namedQueries")}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class jv{constructor(e,r){this.serializer=e,this.userId=r}static lt(e,r){const n=r.uid||"";return new jv(e,n)}getOverlay(e,r){return Fh(e).get(gE(this.userId,r)).next(n=>n?gy(this.serializer,n):null)}getOverlays(e,r){const n=ja();return Se.forEach(r,s=>this.getOverlay(e,s).next(i=>{i!==null&&n.set(s,i)})).next(()=>n)}saveOverlays(e,r,n){const s=[];return n.forEach((i,a)=>{const o=new Db(r,a);s.push(this.ht(e,o))}),Se.waitFor(s)}removeOverlaysForBatchId(e,r,n){const s=new Set;r.forEach(a=>s.add(Qs(a.getCollectionPath())));const i=[];return s.forEach(a=>{const o=IDBKeyRange.bound([this.userId,a,n],[this.userId,a,n+1],!1,!0);i.push(Fh(e).j("collectionPathOverlayIndex",o))}),Se.waitFor(i)}getOverlaysForCollection(e,r,n){const s=ja(),i=Qs(r),a=IDBKeyRange.bound([this.userId,i,n],[this.userId,i,Number.POSITIVE_INFINITY],!0);return Fh(e).U("collectionPathOverlayIndex",a).next(o=>{for(const l of o){const c=gy(this.serializer,l);s.set(c.getKey(),c)}return s})}getOverlaysForCollectionGroup(e,r,n,s){const i=ja();let a;const o=IDBKeyRange.bound([this.userId,r,n],[this.userId,r,Number.POSITIVE_INFINITY],!0);return Fh(e).J({index:"collectionGroupOverlayIndex",range:o},(l,c,u)=>{const f=gy(this.serializer,c);i.size()<s||f.largestBatchId===a?(i.set(f.getKey(),f),a=f.largestBatchId):u.done()}).next(()=>i)}ht(e,r){return Fh(e).put(function(s,i,a){const[o,l,c]=gE(i,a.mutation.key);return{userId:i,collectionPath:l,documentId:c,collectionGroup:a.mutation.key.getCollectionGroup(),largestBatchId:a.largestBatchId,overlayMutation:fp(s.ct,a.mutation)}}(this.serializer,this.userId,r))}}function Fh(t){return kn(t,"documentOverlays")}/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class kO{Pt(e){return kn(e,"globals")}getSessionToken(e){return this.Pt(e).get("sessionToken").next(r=>{const n=r==null?void 0:r.value;return n?Bn.fromUint8Array(n):Bn.EMPTY_BYTE_STRING})}setSessionToken(e,r){return this.Pt(e).put({name:"sessionToken",value:r.toUint8Array()})}}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class lc{constructor(){}It(e,r){this.Tt(e,r),r.Et()}Tt(e,r){if("nullValue"in e)this.dt(r,5);else if("booleanValue"in e)this.dt(r,10),r.At(e.booleanValue?1:0);else if("integerValue"in e)this.dt(r,15),r.At(Wr(e.integerValue));else if("doubleValue"in e){const n=Wr(e.doubleValue);isNaN(n)?this.dt(r,13):(this.dt(r,15),ip(n)?r.At(0):r.At(n))}else if("timestampValue"in e){let n=e.timestampValue;this.dt(r,20),typeof n=="string"&&(n=Ho(n)),r.Rt(`${n.seconds||""}`),r.At(n.nanos||0)}else if("stringValue"in e)this.Vt(e.stringValue,r),this.ft(r);else if("bytesValue"in e)this.dt(r,30),r.gt(pl(e.bytesValue)),this.ft(r);else if("referenceValue"in e)this.yt(e.referenceValue,r);else if("geoPointValue"in e){const n=e.geoPointValue;this.dt(r,45),r.At(n.latitude||0),r.At(n.longitude||0)}else"mapValue"in e?C4(e)?this.dt(r,Number.MAX_SAFE_INTEGER):Tv(e)?this.wt(e.mapValue,r):(this.St(e.mapValue,r),this.ft(r)):"arrayValue"in e?(this.bt(e.arrayValue,r),this.ft(r)):Bt()}Vt(e,r){this.dt(r,25),this.Dt(e,r)}Dt(e,r){r.Rt(e)}St(e,r){const n=e.fields||{};this.dt(r,55);for(const s of Object.keys(n))this.Vt(s,r),this.Tt(n[s],r)}wt(e,r){var n,s;const i=e.fields||{};this.dt(r,53);const a="value",o=((s=(n=i[a].arrayValue)===null||n===void 0?void 0:n.values)===null||s===void 0?void 0:s.length)||0;this.dt(r,15),r.At(Wr(o)),this.Vt(a,r),this.Tt(i[a],r)}bt(e,r){const n=e.values||[];this.dt(r,50);for(const s of n)this.Tt(s,r)}yt(e,r){this.dt(r,37),dt.fromName(e).path.forEach(n=>{this.dt(r,60),this.Dt(n,r)})}dt(e,r){e.At(r)}ft(e){e.At(2)}}lc.vt=new lc;function DO(t){if(t===0)return 8;let e=0;return!(t>>4)&&(e+=4,t<<=4),!(t>>6)&&(e+=2,t<<=2),!(t>>7)&&(e+=1),e}function xE(t){const e=64-function(n){let s=0;for(let i=0;i<8;++i){const a=DO(255&n[i]);if(s+=a,a!==8)break}return s}(t);return Math.ceil(e/8)}class RO{constructor(){this.buffer=new Uint8Array(1024),this.position=0}Ct(e){const r=e[Symbol.iterator]();let n=r.next();for(;!n.done;)this.Ft(n.value),n=r.next();this.Mt()}xt(e){const r=e[Symbol.iterator]();let n=r.next();for(;!n.done;)this.Ot(n.value),n=r.next();this.Nt()}Lt(e){for(const r of e){const n=r.charCodeAt(0);if(n<128)this.Ft(n);else if(n<2048)this.Ft(960|n>>>6),this.Ft(128|63&n);else if(r<"\uD800"||"\uDBFF"<r)this.Ft(480|n>>>12),this.Ft(128|63&n>>>6),this.Ft(128|63&n);else{const s=r.codePointAt(0);this.Ft(240|s>>>18),this.Ft(128|63&s>>>12),this.Ft(128|63&s>>>6),this.Ft(128|63&s)}}this.Mt()}Bt(e){for(const r of e){const n=r.charCodeAt(0);if(n<128)this.Ot(n);else if(n<2048)this.Ot(960|n>>>6),this.Ot(128|63&n);else if(r<"\uD800"||"\uDBFF"<r)this.Ot(480|n>>>12),this.Ot(128|63&n>>>6),this.Ot(128|63&n);else{const s=r.codePointAt(0);this.Ot(240|s>>>18),this.Ot(128|63&s>>>12),this.Ot(128|63&s>>>6),this.Ot(128|63&s)}}this.Nt()}kt(e){const r=this.qt(e),n=xE(r);this.Qt(1+n),this.buffer[this.position++]=255&n;for(let s=r.length-n;s<r.length;++s)this.buffer[this.position++]=255&r[s]}Kt(e){const r=this.qt(e),n=xE(r);this.Qt(1+n),this.buffer[this.position++]=~(255&n);for(let s=r.length-n;s<r.length;++s)this.buffer[this.position++]=~(255&r[s])}$t(){this.Ut(255),this.Ut(255)}Wt(){this.Gt(255),this.Gt(255)}reset(){this.position=0}seed(e){this.Qt(e.length),this.buffer.set(e,this.position),this.position+=e.length}zt(){return this.buffer.slice(0,this.position)}qt(e){const r=function(i){const a=new DataView(new ArrayBuffer(8));return a.setFloat64(0,i,!1),new Uint8Array(a.buffer)}(e),n=(128&r[0])!=0;r[0]^=n?255:128;for(let s=1;s<r.length;++s)r[s]^=n?255:0;return r}Ft(e){const r=255&e;r===0?(this.Ut(0),this.Ut(255)):r===255?(this.Ut(255),this.Ut(0)):this.Ut(r)}Ot(e){const r=255&e;r===0?(this.Gt(0),this.Gt(255)):r===255?(this.Gt(255),this.Gt(0)):this.Gt(e)}Mt(){this.Ut(0),this.Ut(1)}Nt(){this.Gt(0),this.Gt(1)}Ut(e){this.Qt(1),this.buffer[this.position++]=e}Gt(e){this.Qt(1),this.buffer[this.position++]=~e}Qt(e){const r=e+this.position;if(r<=this.buffer.length)return;let n=2*this.buffer.length;n<r&&(n=r);const s=new Uint8Array(n);s.set(this.buffer),this.buffer=s}}class MO{constructor(e){this.jt=e}gt(e){this.jt.Ct(e)}Rt(e){this.jt.Lt(e)}At(e){this.jt.kt(e)}Et(){this.jt.$t()}}class OO{constructor(e){this.jt=e}gt(e){this.jt.xt(e)}Rt(e){this.jt.Bt(e)}At(e){this.jt.Kt(e)}Et(){this.jt.Wt()}}class Th{constructor(){this.jt=new RO,this.Ht=new MO(this.jt),this.Jt=new OO(this.jt)}seed(e){this.jt.seed(e)}Yt(e){return e===0?this.Ht:this.Jt}zt(){return this.jt.zt()}reset(){this.jt.reset()}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class cc{constructor(e,r,n,s){this.indexId=e,this.documentKey=r,this.arrayValue=n,this.directionalValue=s}Zt(){const e=this.directionalValue.length,r=e===0||this.directionalValue[e-1]===255?e+1:e,n=new Uint8Array(r);return n.set(this.directionalValue,0),r!==e?n.set([0],this.directionalValue.length):++n[n.length-1],new cc(this.indexId,this.documentKey,this.arrayValue,n)}}function CA(t,e){let r=t.indexId-e.indexId;return r!==0?r:(r=bE(t.arrayValue,e.arrayValue),r!==0?r:(r=bE(t.directionalValue,e.directionalValue),r!==0?r:dt.comparator(t.documentKey,e.documentKey)))}function bE(t,e){for(let r=0;r<t.length&&r<e.length;++r){const n=t[r]-e[r];if(n!==0)return n}return t.length-e.length}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class BE{constructor(e){this.Xt=new Tr((r,n)=>Yr.comparator(r.field,n.field)),this.collectionId=e.collectionGroup!=null?e.collectionGroup:e.path.lastSegment(),this.en=e.orderBy,this.tn=[];for(const r of e.filters){const n=r;n.isInequality()?this.Xt=this.Xt.add(n):this.tn.push(n)}}get nn(){return this.Xt.size>1}rn(e){if(Tt(e.collectionGroup===this.collectionId),this.nn)return!1;const r=l2(e);if(r!==void 0&&!this.sn(r))return!1;const n=sc(e);let s=new Set,i=0,a=0;for(;i<n.length&&this.sn(n[i]);++i)s=s.add(n[i].fieldPath.canonicalString());if(i===n.length)return!0;if(this.Xt.size>0){const o=this.Xt.getIterator().getNext();if(!s.has(o.field.canonicalString())){const l=n[i];if(!this.on(o,l)||!this._n(this.en[a++],l))return!1}++i}for(;i<n.length;++i){const o=n[i];if(a>=this.en.length||!this._n(this.en[a++],o))return!1}return!0}an(){if(this.nn)return null;let e=new Tr(Yr.comparator);const r=[];for(const n of this.tn)if(!n.field.isKeyField())if(n.op==="array-contains"||n.op==="array-contains-any")r.push(new Kg(n.field,2));else{if(e.has(n.field))continue;e=e.add(n.field),r.push(new Kg(n.field,0))}for(const n of this.en)n.field.isKeyField()||e.has(n.field)||(e=e.add(n.field),r.push(new Kg(n.field,n.dir==="asc"?0:1)));return new Q0(Q0.UNKNOWN_ID,this.collectionId,r,sp.empty())}sn(e){for(const r of this.tn)if(this.on(r,e))return!0;return!1}on(e,r){if(e===void 0||!e.field.isEqual(r.fieldPath))return!1;const n=e.op==="array-contains"||e.op==="array-contains-any";return r.kind===2===n}_n(e,r){return!!e.field.isEqual(r.fieldPath)&&(r.kind===0&&e.dir==="asc"||r.kind===1&&e.dir==="desc")}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function uT(t){var e,r;if(Tt(t instanceof lr||t instanceof _r),t instanceof lr){if(t instanceof P4){const s=((r=(e=t.value.arrayValue)===null||e===void 0?void 0:e.values)===null||r===void 0?void 0:r.map(i=>lr.create(t.field,"==",i)))||[];return _r.create(s,"or")}return t}const n=t.filters.map(s=>uT(s));return _r.create(n,t.op)}function HO(t){if(t.getFilters().length===0)return[];const e=B2(uT(t));return Tt(dT(e)),x2(e)||b2(e)?[e]:e.getFilters()}function x2(t){return t instanceof lr}function b2(t){return t instanceof _r&&Pb(t)}function dT(t){return x2(t)||b2(t)||function(r){if(r instanceof _r&&h2(r)){for(const n of r.getFilters())if(!x2(n)&&!b2(n))return!1;return!0}return!1}(t)}function B2(t){if(Tt(t instanceof lr||t instanceof _r),t instanceof lr)return t;if(t.filters.length===1)return B2(t.filters[0]);const e=t.filters.map(n=>B2(n));let r=_r.create(e,t.op);return r=R0(r),dT(r)?r:(Tt(r instanceof _r),Tt(Ud(r)),Tt(r.filters.length>1),r.filters.reduce((n,s)=>Ob(n,s)))}function Ob(t,e){let r;return Tt(t instanceof lr||t instanceof _r),Tt(e instanceof lr||e instanceof _r),r=t instanceof lr?e instanceof lr?function(s,i){return _r.create([s,i],"and")}(t,e):CE(t,e):e instanceof lr?CE(e,t):function(s,i){if(Tt(s.filters.length>0&&i.filters.length>0),Ud(s)&&Ud(i))return F4(s,i.getFilters());const a=h2(s)?s:i,o=h2(s)?i:s,l=a.filters.map(c=>Ob(c,o));return _r.create(l,"or")}(t,e),R0(r)}function CE(t,e){if(Ud(e))return F4(e,t.getFilters());{const r=e.filters.map(n=>Ob(t,n));return _r.create(r,"or")}}function R0(t){if(Tt(t instanceof lr||t instanceof _r),t instanceof lr)return t;const e=t.getFilters();if(e.length===1)return R0(e[0]);if(I4(t))return t;const r=e.map(s=>R0(s)),n=[];return r.forEach(s=>{s instanceof lr?n.push(s):s instanceof _r&&(s.op===t.op?n.push(...s.filters):n.push(s))}),n.length===1?n[0]:_r.create(n,t.op)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class VO{constructor(){this.un=new Hb}addToCollectionParentIndex(e,r){return this.un.add(r),Se.resolve()}getCollectionParents(e,r){return Se.resolve(this.un.getEntries(r))}addFieldIndex(e,r){return Se.resolve()}deleteFieldIndex(e,r){return Se.resolve()}deleteAllFieldIndexes(e){return Se.resolve()}createTargetIndexes(e,r){return Se.resolve()}getDocumentsMatchingTarget(e,r){return Se.resolve(null)}getIndexType(e,r){return Se.resolve(0)}getFieldIndexes(e,r){return Se.resolve([])}getNextCollectionGroupToUpdate(e){return Se.resolve(null)}getMinOffset(e,r){return Se.resolve(di.min())}getMinOffsetFromCollectionGroup(e,r){return Se.resolve(di.min())}updateCollectionGroup(e,r,n){return Se.resolve()}updateIndexEntries(e,r){return Se.resolve()}}class Hb{constructor(){this.index={}}add(e){const r=e.lastSegment(),n=e.popLast(),s=this.index[r]||new Tr(pr.comparator),i=!s.has(n);return this.index[r]=s.add(n),i}has(e){const r=e.lastSegment(),n=e.popLast(),s=this.index[r];return s&&s.has(n)}getEntries(e){return(this.index[e]||new Tr(pr.comparator)).toArray()}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Rm=new Uint8Array(0);class KO{constructor(e,r){this.databaseId=r,this.cn=new Hb,this.ln=new Fl(n=>kc(n),(n,s)=>jp(n,s)),this.uid=e.uid||""}addToCollectionParentIndex(e,r){if(!this.cn.has(r)){const n=r.lastSegment(),s=r.popLast();e.addOnCommittedListener(()=>{this.cn.add(r)});const i={collectionId:n,parent:Qs(s)};return EE(e).put(i)}return Se.resolve()}getCollectionParents(e,r){const n=[],s=IDBKeyRange.bound([r,""],[h4(r),""],!1,!0);return EE(e).U(s).next(i=>{for(const a of i){if(a.collectionId!==r)break;n.push(La(a.parent))}return n})}addFieldIndex(e,r){const n=Uh(e),s=function(o){return{indexId:o.indexId,collectionGroup:o.collectionGroup,fields:o.fields.map(l=>[l.fieldPath.canonicalString(),l.kind])}}(r);delete s.indexId;const i=n.add(s);if(r.indexState){const a=Bu(e);return i.next(o=>{a.put(vE(o,this.uid,r.indexState.sequenceNumber,r.indexState.offset))})}return i.next()}deleteFieldIndex(e,r){const n=Uh(e),s=Bu(e),i=bu(e);return n.delete(r.indexId).next(()=>s.delete(IDBKeyRange.bound([r.indexId],[r.indexId+1],!1,!0))).next(()=>i.delete(IDBKeyRange.bound([r.indexId],[r.indexId+1],!1,!0)))}deleteAllFieldIndexes(e){const r=Uh(e),n=bu(e),s=Bu(e);return r.j().next(()=>n.j()).next(()=>s.j())}createTargetIndexes(e,r){return Se.forEach(this.hn(r),n=>this.getIndexType(e,n).next(s=>{if(s===0||s===1){const i=new BE(n).an();if(i!=null)return this.addFieldIndex(e,i)}}))}getDocumentsMatchingTarget(e,r){const n=bu(e);let s=!0;const i=new Map;return Se.forEach(this.hn(r),a=>this.Pn(e,a).next(o=>{s&&(s=!!o),i.set(a,o)})).next(()=>{if(s){let a=tr();const o=[];return Se.forEach(i,(l,c)=>{Je("IndexedDbIndexManager",`Using index ${function(S){return`id=${S.indexId}|cg=${S.collectionGroup}|f=${S.fields.map(O=>`${O.fieldPath}:${O.kind}`).join(",")}`}(l)} to execute ${kc(r)}`);const u=function(S,O){const R=l2(O);if(R===void 0)return null;for(const M of j0(S,R.fieldPath))switch(M.op){case"array-contains-any":return M.value.arrayValue.values||[];case"array-contains":return[M.value]}return null}(c,l),f=function(S,O){const R=new Map;for(const M of sc(O))for(const I of j0(S,M.fieldPath))switch(I.op){case"==":case"in":R.set(M.fieldPath.canonicalString(),I.value);break;case"not-in":case"!=":return R.set(M.fieldPath.canonicalString(),I.value),Array.from(R.values())}return null}(c,l),p=function(S,O){const R=[];let M=!0;for(const I of sc(O)){const E=I.kind===0?nE(S,I.fieldPath,S.startAt):sE(S,I.fieldPath,S.startAt);R.push(E.value),M&&(M=E.inclusive)}return new Td(R,M)}(c,l),m=function(S,O){const R=[];let M=!0;for(const I of sc(O)){const E=I.kind===0?sE(S,I.fieldPath,S.endAt):nE(S,I.fieldPath,S.endAt);R.push(E.value),M&&(M=E.inclusive)}return new Td(R,M)}(c,l),b=this.In(l,c,p),B=this.In(l,c,m),_=this.Tn(l,c,f),w=this.En(l.indexId,u,b,p.inclusive,B,m.inclusive,_);return Se.forEach(w,y=>n.G(y,r.limit).next(S=>{S.forEach(O=>{const R=dt.fromSegments(O.documentKey);a.has(R)||(a=a.add(R),o.push(R))})}))}).next(()=>o)}return Se.resolve(null)})}hn(e){let r=this.ln.get(e);return r||(e.filters.length===0?r=[e]:r=HO(_r.create(e.filters,"and")).map(n=>p2(e.path,e.collectionGroup,e.orderBy,n.getFilters(),e.limit,e.startAt,e.endAt)),this.ln.set(e,r),r)}En(e,r,n,s,i,a,o){const l=(r!=null?r.length:1)*Math.max(n.length,i.length),c=l/(r!=null?r.length:1),u=[];for(let f=0;f<l;++f){const p=r?this.dn(r[f/c]):Rm,m=this.An(e,p,n[f%c],s),b=this.Rn(e,p,i[f%c],a),B=o.map(_=>this.An(e,p,_,!0));u.push(...this.createRange(m,b,B))}return u}An(e,r,n,s){const i=new cc(e,dt.empty(),r,n);return s?i:i.Zt()}Rn(e,r,n,s){const i=new cc(e,dt.empty(),r,n);return s?i.Zt():i}Pn(e,r){const n=new BE(r),s=r.collectionGroup!=null?r.collectionGroup:r.path.lastSegment();return this.getFieldIndexes(e,s).next(i=>{let a=null;for(const o of i)n.rn(o)&&(!a||o.fields.length>a.fields.length)&&(a=o);return a})}getIndexType(e,r){let n=2;const s=this.hn(r);return Se.forEach(s,i=>this.Pn(e,i).next(a=>{a?n!==0&&a.fields.length<function(l){let c=new Tr(Yr.comparator),u=!1;for(const f of l.filters)for(const p of f.getFlattenedFilters())p.field.isKeyField()||(p.op==="array-contains"||p.op==="array-contains-any"?u=!0:c=c.add(p.field));for(const f of l.orderBy)f.field.isKeyField()||(c=c.add(f.field));return c.size+(u?1:0)}(i)&&(n=1):n=0})).next(()=>function(a){return a.limit!==null}(r)&&s.length>1&&n===2?1:n)}Vn(e,r){const n=new Th;for(const s of sc(e)){const i=r.data.field(s.fieldPath);if(i==null)return null;const a=n.Yt(s.kind);lc.vt.It(i,a)}return n.zt()}dn(e){const r=new Th;return lc.vt.It(e,r.Yt(0)),r.zt()}mn(e,r){const n=new Th;return lc.vt.It(Ap(this.databaseId,r),n.Yt(function(i){const a=sc(i);return a.length===0?0:a[a.length-1].kind}(e))),n.zt()}Tn(e,r,n){if(n===null)return[];let s=[];s.push(new Th);let i=0;for(const a of sc(e)){const o=n[i++];for(const l of s)if(this.fn(r,a.fieldPath)&&lp(o))s=this.gn(s,a,o);else{const c=l.Yt(a.kind);lc.vt.It(o,c)}}return this.pn(s)}In(e,r,n){return this.Tn(e,r,n.position)}pn(e){const r=[];for(let n=0;n<e.length;++n)r[n]=e[n].zt();return r}gn(e,r,n){const s=[...e],i=[];for(const a of n.arrayValue.values||[])for(const o of s){const l=new Th;l.seed(o.zt()),lc.vt.It(a,l.Yt(r.kind)),i.push(l)}return i}fn(e,r){return!!e.filters.find(n=>n instanceof lr&&n.field.isEqual(r)&&(n.op==="in"||n.op==="not-in"))}getFieldIndexes(e,r){const n=Uh(e),s=Bu(e);return(r?n.U("collectionGroupIndex",IDBKeyRange.bound(r,r)):n.U()).next(i=>{const a=[];return Se.forEach(i,o=>s.get([o.indexId,this.uid]).next(l=>{a.push(function(u,f){const p=f?new sp(f.sequenceNumber,new di(Rc(f.readTime),new dt(La(f.documentKey)),f.largestBatchId)):sp.empty(),m=u.fields.map(([b,B])=>new Kg(Yr.fromServerFormat(b),B));return new Q0(u.indexId,u.collectionGroup,m,p)}(o,l))})).next(()=>a)})}getNextCollectionGroupToUpdate(e){return this.getFieldIndexes(e).next(r=>r.length===0?null:(r.sort((n,s)=>{const i=n.indexState.sequenceNumber-s.indexState.sequenceNumber;return i!==0?i:Wt(n.collectionGroup,s.collectionGroup)}),r[0].collectionGroup))}updateCollectionGroup(e,r,n){const s=Uh(e),i=Bu(e);return this.yn(e).next(a=>s.U("collectionGroupIndex",IDBKeyRange.bound(r,r)).next(o=>Se.forEach(o,l=>i.put(vE(l.indexId,this.uid,a,n)))))}updateIndexEntries(e,r){const n=new Map;return Se.forEach(r,(s,i)=>{const a=n.get(s.collectionGroup);return(a?Se.resolve(a):this.getFieldIndexes(e,s.collectionGroup)).next(o=>(n.set(s.collectionGroup,o),Se.forEach(o,l=>this.wn(e,s,l).next(c=>{const u=this.Sn(i,l);return c.isEqual(u)?Se.resolve():this.bn(e,i,l,c,u)}))))})}Dn(e,r,n,s){return bu(e).put({indexId:s.indexId,uid:this.uid,arrayValue:s.arrayValue,directionalValue:s.directionalValue,orderedDocumentKey:this.mn(n,r.key),documentKey:r.key.path.toArray()})}vn(e,r,n,s){return bu(e).delete([s.indexId,this.uid,s.arrayValue,s.directionalValue,this.mn(n,r.key),r.key.path.toArray()])}wn(e,r,n){const s=bu(e);let i=new Tr(CA);return s.J({index:"documentKeyIndex",range:IDBKeyRange.only([n.indexId,this.uid,this.mn(n,r)])},(a,o)=>{i=i.add(new cc(n.indexId,r,o.arrayValue,o.directionalValue))}).next(()=>i)}Sn(e,r){let n=new Tr(CA);const s=this.Vn(r,e);if(s==null)return n;const i=l2(r);if(i!=null){const a=e.data.field(i.fieldPath);if(lp(a))for(const o of a.arrayValue.values||[])n=n.add(new cc(r.indexId,e.key,this.dn(o),s))}else n=n.add(new cc(r.indexId,e.key,Rm,s));return n}bn(e,r,n,s,i){Je("IndexedDbIndexManager","Updating index entries for document '%s'",r.key);const a=[];return function(l,c,u,f,p){const m=l.getIterator(),b=c.getIterator();let B=xu(m),_=xu(b);for(;B||_;){let w=!1,y=!1;if(B&&_){const S=u(B,_);S<0?y=!0:S>0&&(w=!0)}else B!=null?y=!0:w=!0;w?(f(_),_=xu(b)):y?(p(B),B=xu(m)):(B=xu(m),_=xu(b))}}(s,i,CA,o=>{a.push(this.Dn(e,r,n,o))},o=>{a.push(this.vn(e,r,n,o))}),Se.waitFor(a)}yn(e){let r=1;return Bu(e).J({index:"sequenceNumberIndex",reverse:!0,range:IDBKeyRange.upperBound([this.uid,Number.MAX_SAFE_INTEGER])},(n,s,i)=>{i.done(),r=s.sequenceNumber+1}).next(()=>r)}createRange(e,r,n){n=n.sort((a,o)=>CA(a,o)).filter((a,o,l)=>!o||CA(a,l[o-1])!==0);const s=[];s.push(e);for(const a of n){const o=CA(a,e),l=CA(a,r);if(o===0)s[0]=e.Zt();else if(o>0&&l<0)s.push(a),s.push(a.Zt());else if(l>0)break}s.push(r);const i=[];for(let a=0;a<s.length;a+=2){if(this.Cn(s[a],s[a+1]))return[];const o=[s[a].indexId,this.uid,s[a].arrayValue,s[a].directionalValue,Rm,[]],l=[s[a+1].indexId,this.uid,s[a+1].arrayValue,s[a+1].directionalValue,Rm,[]];i.push(IDBKeyRange.bound(o,l))}return i}Cn(e,r){return CA(e,r)>0}getMinOffsetFromCollectionGroup(e,r){return this.getFieldIndexes(e,r).next(_E)}getMinOffset(e,r){return Se.mapArray(this.hn(r),n=>this.Pn(e,n).next(s=>s||Bt())).next(_E)}}function EE(t){return kn(t,"collectionParents")}function bu(t){return kn(t,"indexEntries")}function Uh(t){return kn(t,"indexConfiguration")}function Bu(t){return kn(t,"indexState")}function _E(t){Tt(t.length!==0);let e=t[0].indexState.offset,r=e.largestBatchId;for(let n=1;n<t.length;n++){const s=t[n].indexState.offset;Ib(s,e)<0&&(e=s),r<s.largestBatchId&&(r=s.largestBatchId)}return new di(e.readTime,e.documentKey,r)}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const NE={didRun:!1,sequenceNumbersCollected:0,targetsRemoved:0,documentsRemoved:0};class Vs{constructor(e,r,n){this.cacheSizeCollectionThreshold=e,this.percentileToCollect=r,this.maximumSequenceNumbersToCollect=n}static withCacheSize(e){return new Vs(e,Vs.DEFAULT_COLLECTION_PERCENTILE,Vs.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function hT(t,e,r){const n=t.store("mutations"),s=t.store("documentMutations"),i=[],a=IDBKeyRange.only(r.batchId);let o=0;const l=n.J({range:a},(u,f,p)=>(o++,p.delete()));i.push(l.next(()=>{Tt(o===1)}));const c=[];for(const u of r.mutations){const f=v4(e,u.key.path,r.batchId);i.push(s.delete(f)),c.push(u.key)}return Se.waitFor(i).next(()=>c)}function M0(t){if(!t)return 0;let e;if(t.document)e=t.document;else if(t.unknownDocument)e=t.unknownDocument;else{if(!t.noDocument)throw Bt();e=t.noDocument}return JSON.stringify(e).length}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */Vs.DEFAULT_COLLECTION_PERCENTILE=10,Vs.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT=1e3,Vs.DEFAULT=new Vs(41943040,Vs.DEFAULT_COLLECTION_PERCENTILE,Vs.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT),Vs.DISABLED=new Vs(-1,0,0);class kv{constructor(e,r,n,s){this.userId=e,this.serializer=r,this.indexManager=n,this.referenceDelegate=s,this.Fn={}}static lt(e,r,n,s){Tt(e.uid!=="");const i=e.isAuthenticated()?e.uid:"";return new kv(i,r,n,s)}checkEmpty(e){let r=!0;const n=IDBKeyRange.bound([this.userId,Number.NEGATIVE_INFINITY],[this.userId,Number.POSITIVE_INFINITY]);return EA(e).J({index:"userMutationsIndex",range:n},(s,i,a)=>{r=!1,a.done()}).next(()=>r)}addMutationBatch(e,r,n,s){const i=Vu(e),a=EA(e);return a.add({}).next(o=>{Tt(typeof o=="number");const l=new jb(o,r,n,s),c=function(m,b,B){const _=B.baseMutations.map(y=>fp(m.ct,y)),w=B.mutations.map(y=>fp(m.ct,y));return{userId:b,batchId:B.batchId,localWriteTimeMs:B.localWriteTime.toMillis(),baseMutations:_,mutations:w}}(this.serializer,this.userId,l),u=[];let f=new Tr((p,m)=>Wt(p.canonicalString(),m.canonicalString()));for(const p of s){const m=v4(this.userId,p.key.path,o);f=f.add(p.key.path.popLast()),u.push(a.put(c)),u.push(i.put(m,CM))}return f.forEach(p=>{u.push(this.indexManager.addToCollectionParentIndex(e,p))}),e.addOnCommittedListener(()=>{this.Fn[o]=l.keys()}),Se.waitFor(u).next(()=>l)})}lookupMutationBatch(e,r){return EA(e).get(r).next(n=>n?(Tt(n.userId===this.userId),Ac(this.serializer,n)):null)}Mn(e,r){return this.Fn[r]?Se.resolve(this.Fn[r]):this.lookupMutationBatch(e,r).next(n=>{if(n){const s=n.keys();return this.Fn[r]=s,s}return null})}getNextMutationBatchAfterBatchId(e,r){const n=r+1,s=IDBKeyRange.lowerBound([this.userId,n]);let i=null;return EA(e).J({index:"userMutationsIndex",range:s},(a,o,l)=>{o.userId===this.userId&&(Tt(o.batchId>=n),i=Ac(this.serializer,o)),l.done()}).next(()=>i)}getHighestUnacknowledgedBatchId(e){const r=IDBKeyRange.upperBound([this.userId,Number.POSITIVE_INFINITY]);let n=-1;return EA(e).J({index:"userMutationsIndex",range:r,reverse:!0},(s,i,a)=>{n=i.batchId,a.done()}).next(()=>n)}getAllMutationBatches(e){const r=IDBKeyRange.bound([this.userId,-1],[this.userId,Number.POSITIVE_INFINITY]);return EA(e).U("userMutationsIndex",r).next(n=>n.map(s=>Ac(this.serializer,s)))}getAllMutationBatchesAffectingDocumentKey(e,r){const n=qg(this.userId,r.path),s=IDBKeyRange.lowerBound(n),i=[];return Vu(e).J({range:s},(a,o,l)=>{const[c,u,f]=a,p=La(u);if(c===this.userId&&r.path.isEqual(p))return EA(e).get(f).next(m=>{if(!m)throw Bt();Tt(m.userId===this.userId),i.push(Ac(this.serializer,m))});l.done()}).next(()=>i)}getAllMutationBatchesAffectingDocumentKeys(e,r){let n=new Tr(Wt);const s=[];return r.forEach(i=>{const a=qg(this.userId,i.path),o=IDBKeyRange.lowerBound(a),l=Vu(e).J({range:o},(c,u,f)=>{const[p,m,b]=c,B=La(m);p===this.userId&&i.path.isEqual(B)?n=n.add(b):f.done()});s.push(l)}),Se.waitFor(s).next(()=>this.xn(e,n))}getAllMutationBatchesAffectingQuery(e,r){const n=r.path,s=n.length+1,i=qg(this.userId,n),a=IDBKeyRange.lowerBound(i);let o=new Tr(Wt);return Vu(e).J({range:a},(l,c,u)=>{const[f,p,m]=l,b=La(p);f===this.userId&&n.isPrefixOf(b)?b.length===s&&(o=o.add(m)):u.done()}).next(()=>this.xn(e,o))}xn(e,r){const n=[],s=[];return r.forEach(i=>{s.push(EA(e).get(i).next(a=>{if(a===null)throw Bt();Tt(a.userId===this.userId),n.push(Ac(this.serializer,a))}))}),Se.waitFor(s).next(()=>n)}removeMutationBatch(e,r){return hT(e._e,this.userId,r).next(n=>(e.addOnCommittedListener(()=>{this.On(r.batchId)}),Se.forEach(n,s=>this.referenceDelegate.markPotentiallyOrphaned(e,s))))}On(e){delete this.Fn[e]}performConsistencyCheck(e){return this.checkEmpty(e).next(r=>{if(!r)return Se.resolve();const n=IDBKeyRange.lowerBound(function(a){return[a]}(this.userId)),s=[];return Vu(e).J({range:n},(i,a,o)=>{if(i[0]===this.userId){const l=La(i[1]);s.push(l)}else o.done()}).next(()=>{Tt(s.length===0)})})}containsKey(e,r){return fT(e,this.userId,r)}Nn(e){return pT(e).get(this.userId).next(r=>r||{userId:this.userId,lastAcknowledgedBatchId:-1,lastStreamToken:""})}}function fT(t,e,r){const n=qg(e,r.path),s=n[1],i=IDBKeyRange.lowerBound(n);let a=!1;return Vu(t).J({range:i,H:!0},(o,l,c)=>{const[u,f,p]=o;u===e&&f===s&&(a=!0),c.done()}).next(()=>a)}function EA(t){return kn(t,"mutations")}function Vu(t){return kn(t,"documentMutations")}function pT(t){return kn(t,"mutationQueues")}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Mc{constructor(e){this.Ln=e}next(){return this.Ln+=2,this.Ln}static Bn(){return new Mc(0)}static kn(){return new Mc(-1)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class qO{constructor(e,r){this.referenceDelegate=e,this.serializer=r}allocateTargetId(e){return this.qn(e).next(r=>{const n=new Mc(r.highestTargetId);return r.highestTargetId=n.next(),this.Qn(e,r).next(()=>r.highestTargetId)})}getLastRemoteSnapshotVersion(e){return this.qn(e).next(r=>Qt.fromTimestamp(new Dt(r.lastRemoteSnapshotVersion.seconds,r.lastRemoteSnapshotVersion.nanoseconds)))}getHighestSequenceNumber(e){return this.qn(e).next(r=>r.highestListenSequenceNumber)}setTargetsMetadata(e,r,n){return this.qn(e).next(s=>(s.highestListenSequenceNumber=r,n&&(s.lastRemoteSnapshotVersion=n.toTimestamp()),r>s.highestListenSequenceNumber&&(s.highestListenSequenceNumber=r),this.Qn(e,s)))}addTargetData(e,r){return this.Kn(e,r).next(()=>this.qn(e).next(n=>(n.targetCount+=1,this.$n(r,n),this.Qn(e,n))))}updateTargetData(e,r){return this.Kn(e,r)}removeTargetData(e,r){return this.removeMatchingKeysForTargetId(e,r.targetId).next(()=>Cu(e).delete(r.targetId)).next(()=>this.qn(e)).next(n=>(Tt(n.targetCount>0),n.targetCount-=1,this.Qn(e,n)))}removeTargets(e,r,n){let s=0;const i=[];return Cu(e).J((a,o)=>{const l=tf(o);l.sequenceNumber<=r&&n.get(l.targetId)===null&&(s++,i.push(this.removeTargetData(e,l)))}).next(()=>Se.waitFor(i)).next(()=>s)}forEachTarget(e,r){return Cu(e).J((n,s)=>{const i=tf(s);r(i)})}qn(e){return IE(e).get("targetGlobalKey").next(r=>(Tt(r!==null),r))}Qn(e,r){return IE(e).put("targetGlobalKey",r)}Kn(e,r){return Cu(e).put(lT(this.serializer,r))}$n(e,r){let n=!1;return e.targetId>r.highestTargetId&&(r.highestTargetId=e.targetId,n=!0),e.sequenceNumber>r.highestListenSequenceNumber&&(r.highestListenSequenceNumber=e.sequenceNumber,n=!0),n}getTargetCount(e){return this.qn(e).next(r=>r.targetCount)}getTargetData(e,r){const n=kc(r),s=IDBKeyRange.bound([n,Number.NEGATIVE_INFINITY],[n,Number.POSITIVE_INFINITY]);let i=null;return Cu(e).J({range:s,index:"queryTargetsIndex"},(a,o,l)=>{const c=tf(o);jp(r,c.target)&&(i=c,l.done())}).next(()=>i)}addMatchingKeys(e,r,n){const s=[],i=MA(e);return r.forEach(a=>{const o=Qs(a.path);s.push(i.put({targetId:n,path:o})),s.push(this.referenceDelegate.addReference(e,n,a))}),Se.waitFor(s)}removeMatchingKeys(e,r,n){const s=MA(e);return Se.forEach(r,i=>{const a=Qs(i.path);return Se.waitFor([s.delete([n,a]),this.referenceDelegate.removeReference(e,n,i)])})}removeMatchingKeysForTargetId(e,r){const n=MA(e),s=IDBKeyRange.bound([r],[r+1],!1,!0);return n.delete(s)}getMatchingKeysForTargetId(e,r){const n=IDBKeyRange.bound([r],[r+1],!1,!0),s=MA(e);let i=tr();return s.J({range:n,H:!0},(a,o,l)=>{const c=La(a[1]),u=new dt(c);i=i.add(u)}).next(()=>i)}containsKey(e,r){const n=Qs(r.path),s=IDBKeyRange.bound([n],[h4(n)],!1,!0);let i=0;return MA(e).J({index:"documentTargetsIndex",H:!0,range:s},([a,o],l,c)=>{a!==0&&(i++,c.done())}).next(()=>i>0)}ot(e,r){return Cu(e).get(r).next(n=>n?tf(n):null)}}function Cu(t){return kn(t,"targets")}function IE(t){return kn(t,"targetGlobal")}function MA(t){return kn(t,"targetDocuments")}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function SE([t,e],[r,n]){const s=Wt(t,r);return s===0?Wt(e,n):s}class GO{constructor(e){this.Un=e,this.buffer=new Tr(SE),this.Wn=0}Gn(){return++this.Wn}zn(e){const r=[e,this.Gn()];if(this.buffer.size<this.Un)this.buffer=this.buffer.add(r);else{const n=this.buffer.last();SE(r,n)<0&&(this.buffer=this.buffer.delete(n).add(r))}}get maxValue(){return this.buffer.last()[0]}}class zO{constructor(e,r,n){this.garbageCollector=e,this.asyncQueue=r,this.localStore=n,this.jn=null}start(){this.garbageCollector.params.cacheSizeCollectionThreshold!==-1&&this.Hn(6e4)}stop(){this.jn&&(this.jn.cancel(),this.jn=null)}get started(){return this.jn!==null}Hn(e){Je("LruGarbageCollector",`Garbage collection scheduled in ${e}ms`),this.jn=this.asyncQueue.enqueueAfterDelay("lru_garbage_collection",e,async()=>{this.jn=null;try{await this.localStore.collectGarbage(this.garbageCollector)}catch(r){Sl(r)?Je("LruGarbageCollector","Ignoring IndexedDB error during garbage collection: ",r):await Kc(r)}await this.Hn(3e5)})}}class $O{constructor(e,r){this.Jn=e,this.params=r}calculateTargetCount(e,r){return this.Jn.Yn(e).next(n=>Math.floor(r/100*n))}nthSequenceNumber(e,r){if(r===0)return Se.resolve(Ui.oe);const n=new GO(r);return this.Jn.forEachTarget(e,s=>n.zn(s.sequenceNumber)).next(()=>this.Jn.Zn(e,s=>n.zn(s))).next(()=>n.maxValue)}removeTargets(e,r,n){return this.Jn.removeTargets(e,r,n)}removeOrphanedDocuments(e,r){return this.Jn.removeOrphanedDocuments(e,r)}collect(e,r){return this.params.cacheSizeCollectionThreshold===-1?(Je("LruGarbageCollector","Garbage collection skipped; disabled"),Se.resolve(NE)):this.getCacheSize(e).next(n=>n<this.params.cacheSizeCollectionThreshold?(Je("LruGarbageCollector",`Garbage collection skipped; Cache size ${n} is lower than threshold ${this.params.cacheSizeCollectionThreshold}`),NE):this.Xn(e,r))}getCacheSize(e){return this.Jn.getCacheSize(e)}Xn(e,r){let n,s,i,a,o,l,c;const u=Date.now();return this.calculateTargetCount(e,this.params.percentileToCollect).next(f=>(f>this.params.maximumSequenceNumbersToCollect?(Je("LruGarbageCollector",`Capping sequence numbers to collect down to the maximum of ${this.params.maximumSequenceNumbersToCollect} from ${f}`),s=this.params.maximumSequenceNumbersToCollect):s=f,a=Date.now(),this.nthSequenceNumber(e,s))).next(f=>(n=f,o=Date.now(),this.removeTargets(e,n,r))).next(f=>(i=f,l=Date.now(),this.removeOrphanedDocuments(e,n))).next(f=>(c=Date.now(),Ru()<=Ar.DEBUG&&Je("LruGarbageCollector",`LRU Garbage Collection
	Counted targets in ${a-u}ms
	Determined least recently used ${s} in `+(o-a)+`ms
	Removed ${i} targets in `+(l-o)+`ms
	Removed ${f} documents in `+(c-l)+`ms
Total Duration: ${c-u}ms`),Se.resolve({didRun:!0,sequenceNumbersCollected:s,targetsRemoved:i,documentsRemoved:f})))}}function WO(t,e){return new $O(t,e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class XO{constructor(e,r){this.db=e,this.garbageCollector=WO(this,r)}Yn(e){const r=this.er(e);return this.db.getTargetCache().getTargetCount(e).next(n=>r.next(s=>n+s))}er(e){let r=0;return this.Zn(e,n=>{r++}).next(()=>r)}forEachTarget(e,r){return this.db.getTargetCache().forEachTarget(e,r)}Zn(e,r){return this.tr(e,(n,s)=>r(s))}addReference(e,r,n){return Mm(e,n)}removeReference(e,r,n){return Mm(e,n)}removeTargets(e,r,n){return this.db.getTargetCache().removeTargets(e,r,n)}markPotentiallyOrphaned(e,r){return Mm(e,r)}nr(e,r){return function(s,i){let a=!1;return pT(s).Y(o=>fT(s,o,i).next(l=>(l&&(a=!0),Se.resolve(!l)))).next(()=>a)}(e,r)}removeOrphanedDocuments(e,r){const n=this.db.getRemoteDocumentCache().newChangeBuffer(),s=[];let i=0;return this.tr(e,(a,o)=>{if(o<=r){const l=this.nr(e,a).next(c=>{if(!c)return i++,n.getEntry(e,a).next(()=>(n.removeEntry(a,Qt.min()),MA(e).delete(function(f){return[0,Qs(f.path)]}(a))))});s.push(l)}}).next(()=>Se.waitFor(s)).next(()=>n.apply(e)).next(()=>i)}removeTarget(e,r){const n=r.withSequenceNumber(e.currentSequenceNumber);return this.db.getTargetCache().updateTargetData(e,n)}updateLimboDocument(e,r){return Mm(e,r)}tr(e,r){const n=MA(e);let s,i=Ui.oe;return n.J({index:"documentTargetsIndex"},([a,o],{path:l,sequenceNumber:c})=>{a===0?(i!==Ui.oe&&r(new dt(La(s)),i),i=c,s=l):i=Ui.oe}).next(()=>{i!==Ui.oe&&r(new dt(La(s)),i)})}getCacheSize(e){return this.db.getRemoteDocumentCache().getSize(e)}}function Mm(t,e){return MA(t).put(function(n,s){return{targetId:0,path:Qs(n.path),sequenceNumber:s}}(e,t.currentSequenceNumber))}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class mT{constructor(){this.changes=new Fl(e=>e.toString(),(e,r)=>e.isEqual(r)),this.changesApplied=!1}addEntry(e){this.assertNotApplied(),this.changes.set(e.key,e)}removeEntry(e,r){this.assertNotApplied(),this.changes.set(e,Jr.newInvalidDocument(e).setReadTime(r))}getEntry(e,r){this.assertNotApplied();const n=this.changes.get(r);return n!==void 0?Se.resolve(n):this.getFromCache(e,r)}getEntries(e,r){return this.getAllFromCache(e,r)}apply(e){return this.assertNotApplied(),this.changesApplied=!0,this.applyChanges(e)}assertNotApplied(){}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class JO{constructor(e){this.serializer=e}setIndexManager(e){this.indexManager=e}addEntry(e,r,n){return Jl(e).put(n)}removeEntry(e,r,n){return Jl(e).delete(function(i,a){const o=i.path.toArray();return[o.slice(0,o.length-2),o[o.length-2],D0(a),o[o.length-1]]}(r,n))}updateMetadata(e,r){return this.getMetadata(e).next(n=>(n.byteSize+=r,this.rr(e,n)))}getEntry(e,r){let n=Jr.newInvalidDocument(r);return Jl(e).J({index:"documentKeyIndex",range:IDBKeyRange.only(Ph(r))},(s,i)=>{n=this.ir(r,i)}).next(()=>n)}sr(e,r){let n={size:0,document:Jr.newInvalidDocument(r)};return Jl(e).J({index:"documentKeyIndex",range:IDBKeyRange.only(Ph(r))},(s,i)=>{n={document:this.ir(r,i),size:M0(i)}}).next(()=>n)}getEntries(e,r){let n=Ai();return this._r(e,r,(s,i)=>{const a=this.ir(s,i);n=n.insert(s,a)}).next(()=>n)}ar(e,r){let n=Ai(),s=new tn(dt.comparator);return this._r(e,r,(i,a)=>{const o=this.ir(i,a);n=n.insert(i,o),s=s.insert(i,M0(a))}).next(()=>({documents:n,ur:s}))}_r(e,r,n){if(r.isEmpty())return Se.resolve();let s=new Tr(UE);r.forEach(l=>s=s.add(l));const i=IDBKeyRange.bound(Ph(s.first()),Ph(s.last())),a=s.getIterator();let o=a.getNext();return Jl(e).J({index:"documentKeyIndex",range:i},(l,c,u)=>{const f=dt.fromSegments([...c.prefixPath,c.collectionGroup,c.documentId]);for(;o&&UE(o,f)<0;)n(o,null),o=a.getNext();o&&o.isEqual(f)&&(n(o,c),o=a.hasNext()?a.getNext():null),o?u.$(Ph(o)):u.done()}).next(()=>{for(;o;)n(o,null),o=a.hasNext()?a.getNext():null})}getDocumentsMatchingQuery(e,r,n,s,i){const a=r.path,o=[a.popLast().toArray(),a.lastSegment(),D0(n.readTime),n.documentKey.path.isEmpty()?"":n.documentKey.path.lastSegment()],l=[a.popLast().toArray(),a.lastSegment(),[Number.MAX_SAFE_INTEGER,Number.MAX_SAFE_INTEGER],""];return Jl(e).U(IDBKeyRange.bound(o,l,!0)).next(c=>{i==null||i.incrementDocumentReadCount(c.length);let u=Ai();for(const f of c){const p=this.ir(dt.fromSegments(f.prefixPath.concat(f.collectionGroup,f.documentId)),f);p.isFoundDocument()&&(Dp(r,p)||s.has(p.key))&&(u=u.insert(p.key,p))}return u})}getAllFromCollectionGroup(e,r,n,s){let i=Ai();const a=TE(r,n),o=TE(r,di.max());return Jl(e).J({index:"collectionGroupIndex",range:IDBKeyRange.bound(a,o,!0)},(l,c,u)=>{const f=this.ir(dt.fromSegments(c.prefixPath.concat(c.collectionGroup,c.documentId)),c);i=i.insert(f.key,f),i.size===s&&u.done()}).next(()=>i)}newChangeBuffer(e){return new YO(this,!!e&&e.trackRemovals)}getSize(e){return this.getMetadata(e).next(r=>r.byteSize)}getMetadata(e){return FE(e).get("remoteDocumentGlobalKey").next(r=>(Tt(!!r),r))}rr(e,r){return FE(e).put("remoteDocumentGlobalKey",r)}ir(e,r){if(r){const n=LO(this.serializer,r);if(!(n.isNoDocument()&&n.version.isEqual(Qt.min())))return n}return Jr.newInvalidDocument(e)}}function gT(t){return new JO(t)}class YO extends mT{constructor(e,r){super(),this.cr=e,this.trackRemovals=r,this.lr=new Fl(n=>n.toString(),(n,s)=>n.isEqual(s))}applyChanges(e){const r=[];let n=0,s=new Tr((i,a)=>Wt(i.canonicalString(),a.canonicalString()));return this.changes.forEach((i,a)=>{const o=this.lr.get(i);if(r.push(this.cr.removeEntry(e,i,o.readTime)),a.isValidDocument()){const l=mE(this.cr.serializer,a);s=s.add(i.path.popLast());const c=M0(l);n+=c-o.size,r.push(this.cr.addEntry(e,i,l))}else if(n-=o.size,this.trackRemovals){const l=mE(this.cr.serializer,a.convertToNoDocument(Qt.min()));r.push(this.cr.addEntry(e,i,l))}}),s.forEach(i=>{r.push(this.cr.indexManager.addToCollectionParentIndex(e,i))}),r.push(this.cr.updateMetadata(e,n)),Se.waitFor(r)}getFromCache(e,r){return this.cr.sr(e,r).next(n=>(this.lr.set(r,{size:n.size,readTime:n.document.readTime}),n.document))}getAllFromCache(e,r){return this.cr.ar(e,r).next(({documents:n,ur:s})=>(s.forEach((i,a)=>{this.lr.set(i,{size:a,readTime:n.get(i).readTime})}),n))}}function FE(t){return kn(t,"remoteDocumentGlobal")}function Jl(t){return kn(t,"remoteDocumentsV14")}function Ph(t){const e=t.path.toArray();return[e.slice(0,e.length-2),e[e.length-2],e[e.length-1]]}function TE(t,e){const r=e.documentKey.path.toArray();return[t,D0(e.readTime),r.slice(0,r.length-2),r.length>0?r[r.length-1]:""]}function UE(t,e){const r=t.path.toArray(),n=e.path.toArray();let s=0;for(let i=0;i<r.length-2&&i<n.length-2;++i)if(s=Wt(r[i],n[i]),s)return s;return s=Wt(r.length,n.length),s||(s=Wt(r[r.length-2],n[n.length-2]),s||Wt(r[r.length-1],n[n.length-1]))}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ZO{constructor(e,r){this.overlayedDocument=e,this.mutatedFields=r}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class vT{constructor(e,r,n,s){this.remoteDocumentCache=e,this.mutationQueue=r,this.documentOverlayCache=n,this.indexManager=s}getDocument(e,r){let n=null;return this.documentOverlayCache.getOverlay(e,r).next(s=>(n=s,this.remoteDocumentCache.getEntry(e,r))).next(s=>(n!==null&&Cf(n.mutation,s,zs.empty(),Dt.now()),s))}getDocuments(e,r){return this.remoteDocumentCache.getEntries(e,r).next(n=>this.getLocalViewOfDocuments(e,n,tr()).next(()=>n))}getLocalViewOfDocuments(e,r,n=tr()){const s=ja();return this.populateOverlays(e,s,r).next(()=>this.computeViews(e,r,s,n).next(i=>{let a=Zh();return i.forEach((o,l)=>{a=a.insert(o,l.overlayedDocument)}),a}))}getOverlayedDocuments(e,r){const n=ja();return this.populateOverlays(e,n,r).next(()=>this.computeViews(e,r,n,tr()))}populateOverlays(e,r,n){const s=[];return n.forEach(i=>{r.has(i)||s.push(i)}),this.documentOverlayCache.getOverlays(e,s).next(i=>{i.forEach((a,o)=>{r.set(a,o)})})}computeViews(e,r,n,s){let i=Ai();const a=Bf(),o=function(){return Bf()}();return r.forEach((l,c)=>{const u=n.get(c.key);s.has(c.key)&&(u===void 0||u.mutation instanceof Go)?i=i.insert(c.key,c):u!==void 0?(a.set(c.key,u.mutation.getFieldMask()),Cf(u.mutation,c,u.mutation.getFieldMask(),Dt.now())):a.set(c.key,zs.empty())}),this.recalculateAndSaveOverlays(e,i).next(l=>(l.forEach((c,u)=>a.set(c,u)),r.forEach((c,u)=>{var f;return o.set(c,new ZO(u,(f=a.get(c))!==null&&f!==void 0?f:null))}),o))}recalculateAndSaveOverlays(e,r){const n=Bf();let s=new tn((a,o)=>a-o),i=tr();return this.mutationQueue.getAllMutationBatchesAffectingDocumentKeys(e,r).next(a=>{for(const o of a)o.keys().forEach(l=>{const c=r.get(l);if(c===null)return;let u=n.get(l)||zs.empty();u=o.applyToLocalView(c,u),n.set(l,u);const f=(s.get(o.batchId)||tr()).add(l);s=s.insert(o.batchId,f)})}).next(()=>{const a=[],o=s.getReverseIterator();for(;o.hasNext();){const l=o.getNext(),c=l.key,u=l.value,f=R4();u.forEach(p=>{if(!i.has(p)){const m=q4(r.get(p),n.get(p));m!==null&&f.set(p,m),i=i.add(p)}}),a.push(this.documentOverlayCache.saveOverlays(e,c,f))}return Se.waitFor(a)}).next(()=>n)}recalculateAndSaveOverlaysForDocumentKeys(e,r){return this.remoteDocumentCache.getEntries(e,r).next(n=>this.recalculateAndSaveOverlays(e,n))}getDocumentsMatchingQuery(e,r,n,s){return function(a){return dt.isDocumentKey(a.path)&&a.collectionGroup===null&&a.filters.length===0}(r)?this.getDocumentsMatchingDocumentQuery(e,r.path):Q4(r)?this.getDocumentsMatchingCollectionGroupQuery(e,r,n,s):this.getDocumentsMatchingCollectionQuery(e,r,n,s)}getNextDocuments(e,r,n,s){return this.remoteDocumentCache.getAllFromCollectionGroup(e,r,n,s).next(i=>{const a=s-i.size>0?this.documentOverlayCache.getOverlaysForCollectionGroup(e,r,n.largestBatchId,s-i.size):Se.resolve(ja());let o=-1,l=i;return a.next(c=>Se.forEach(c,(u,f)=>(o<f.largestBatchId&&(o=f.largestBatchId),i.get(u)?Se.resolve():this.remoteDocumentCache.getEntry(e,u).next(p=>{l=l.insert(u,p)}))).next(()=>this.populateOverlays(e,c,i)).next(()=>this.computeViews(e,l,c,tr())).next(u=>({batchId:o,changes:D4(u)})))})}getDocumentsMatchingDocumentQuery(e,r){return this.getDocument(e,new dt(r)).next(n=>{let s=Zh();return n.isFoundDocument()&&(s=s.insert(n.key,n)),s})}getDocumentsMatchingCollectionGroupQuery(e,r,n,s){const i=r.collectionGroup;let a=Zh();return this.indexManager.getCollectionParents(e,i).next(o=>Se.forEach(o,l=>{const c=function(f,p){return new zd(p,null,f.explicitOrderBy.slice(),f.filters.slice(),f.limit,f.limitType,f.startAt,f.endAt)}(r,l.child(i));return this.getDocumentsMatchingCollectionQuery(e,c,n,s).next(u=>{u.forEach((f,p)=>{a=a.insert(f,p)})})}).next(()=>a))}getDocumentsMatchingCollectionQuery(e,r,n,s){let i;return this.documentOverlayCache.getOverlaysForCollection(e,r.path,n.largestBatchId).next(a=>(i=a,this.remoteDocumentCache.getDocumentsMatchingQuery(e,r,n,i,s))).next(a=>{i.forEach((l,c)=>{const u=c.getKey();a.get(u)===null&&(a=a.insert(u,Jr.newInvalidDocument(u)))});let o=Zh();return a.forEach((l,c)=>{const u=i.get(l);u!==void 0&&Cf(u.mutation,c,zs.empty(),Dt.now()),Dp(r,c)&&(o=o.insert(l,c))}),o})}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class e8{constructor(e){this.serializer=e,this.hr=new Map,this.Pr=new Map}getBundleMetadata(e,r){return Se.resolve(this.hr.get(r))}saveBundleMetadata(e,r){return this.hr.set(r.id,function(s){return{id:s.id,version:s.version,createTime:zn(s.createTime)}}(r)),Se.resolve()}getNamedQuery(e,r){return Se.resolve(this.Pr.get(r))}saveNamedQuery(e,r){return this.Pr.set(r.name,function(s){return{name:s.name,query:cT(s.bundledQuery),readTime:zn(s.readTime)}}(r)),Se.resolve()}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class t8{constructor(){this.overlays=new tn(dt.comparator),this.Ir=new Map}getOverlay(e,r){return Se.resolve(this.overlays.get(r))}getOverlays(e,r){const n=ja();return Se.forEach(r,s=>this.getOverlay(e,s).next(i=>{i!==null&&n.set(s,i)})).next(()=>n)}saveOverlays(e,r,n){return n.forEach((s,i)=>{this.ht(e,r,i)}),Se.resolve()}removeOverlaysForBatchId(e,r,n){const s=this.Ir.get(n);return s!==void 0&&(s.forEach(i=>this.overlays=this.overlays.remove(i)),this.Ir.delete(n)),Se.resolve()}getOverlaysForCollection(e,r,n){const s=ja(),i=r.length+1,a=new dt(r.child("")),o=this.overlays.getIteratorFrom(a);for(;o.hasNext();){const l=o.getNext().value,c=l.getKey();if(!r.isPrefixOf(c.path))break;c.path.length===i&&l.largestBatchId>n&&s.set(l.getKey(),l)}return Se.resolve(s)}getOverlaysForCollectionGroup(e,r,n,s){let i=new tn((c,u)=>c-u);const a=this.overlays.getIterator();for(;a.hasNext();){const c=a.getNext().value;if(c.getKey().getCollectionGroup()===r&&c.largestBatchId>n){let u=i.get(c.largestBatchId);u===null&&(u=ja(),i=i.insert(c.largestBatchId,u)),u.set(c.getKey(),c)}}const o=ja(),l=i.getIterator();for(;l.hasNext()&&(l.getNext().value.forEach((c,u)=>o.set(c,u)),!(o.size()>=s)););return Se.resolve(o)}ht(e,r,n){const s=this.overlays.get(n.key);if(s!==null){const a=this.Ir.get(s.largestBatchId).delete(n.key);this.Ir.set(s.largestBatchId,a)}this.overlays=this.overlays.insert(n.key,new Db(r,n));let i=this.Ir.get(r);i===void 0&&(i=tr(),this.Ir.set(r,i)),this.Ir.set(r,i.add(n.key))}}/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class r8{constructor(){this.sessionToken=Bn.EMPTY_BYTE_STRING}getSessionToken(e){return Se.resolve(this.sessionToken)}setSessionToken(e,r){return this.sessionToken=r,Se.resolve()}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Vb{constructor(){this.Tr=new Tr(Vn.Er),this.dr=new Tr(Vn.Ar)}isEmpty(){return this.Tr.isEmpty()}addReference(e,r){const n=new Vn(e,r);this.Tr=this.Tr.add(n),this.dr=this.dr.add(n)}Rr(e,r){e.forEach(n=>this.addReference(n,r))}removeReference(e,r){this.Vr(new Vn(e,r))}mr(e,r){e.forEach(n=>this.removeReference(n,r))}gr(e){const r=new dt(new pr([])),n=new Vn(r,e),s=new Vn(r,e+1),i=[];return this.dr.forEachInRange([n,s],a=>{this.Vr(a),i.push(a.key)}),i}pr(){this.Tr.forEach(e=>this.Vr(e))}Vr(e){this.Tr=this.Tr.delete(e),this.dr=this.dr.delete(e)}yr(e){const r=new dt(new pr([])),n=new Vn(r,e),s=new Vn(r,e+1);let i=tr();return this.dr.forEachInRange([n,s],a=>{i=i.add(a.key)}),i}containsKey(e){const r=new Vn(e,0),n=this.Tr.firstAfterOrEqual(r);return n!==null&&e.isEqual(n.key)}}class Vn{constructor(e,r){this.key=e,this.wr=r}static Er(e,r){return dt.comparator(e.key,r.key)||Wt(e.wr,r.wr)}static Ar(e,r){return Wt(e.wr,r.wr)||dt.comparator(e.key,r.key)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class n8{constructor(e,r){this.indexManager=e,this.referenceDelegate=r,this.mutationQueue=[],this.Sr=1,this.br=new Tr(Vn.Er)}checkEmpty(e){return Se.resolve(this.mutationQueue.length===0)}addMutationBatch(e,r,n,s){const i=this.Sr;this.Sr++,this.mutationQueue.length>0&&this.mutationQueue[this.mutationQueue.length-1];const a=new jb(i,r,n,s);this.mutationQueue.push(a);for(const o of s)this.br=this.br.add(new Vn(o.key,i)),this.indexManager.addToCollectionParentIndex(e,o.key.path.popLast());return Se.resolve(a)}lookupMutationBatch(e,r){return Se.resolve(this.Dr(r))}getNextMutationBatchAfterBatchId(e,r){const n=r+1,s=this.vr(n),i=s<0?0:s;return Se.resolve(this.mutationQueue.length>i?this.mutationQueue[i]:null)}getHighestUnacknowledgedBatchId(){return Se.resolve(this.mutationQueue.length===0?-1:this.Sr-1)}getAllMutationBatches(e){return Se.resolve(this.mutationQueue.slice())}getAllMutationBatchesAffectingDocumentKey(e,r){const n=new Vn(r,0),s=new Vn(r,Number.POSITIVE_INFINITY),i=[];return this.br.forEachInRange([n,s],a=>{const o=this.Dr(a.wr);i.push(o)}),Se.resolve(i)}getAllMutationBatchesAffectingDocumentKeys(e,r){let n=new Tr(Wt);return r.forEach(s=>{const i=new Vn(s,0),a=new Vn(s,Number.POSITIVE_INFINITY);this.br.forEachInRange([i,a],o=>{n=n.add(o.wr)})}),Se.resolve(this.Cr(n))}getAllMutationBatchesAffectingQuery(e,r){const n=r.path,s=n.length+1;let i=n;dt.isDocumentKey(i)||(i=i.child(""));const a=new Vn(new dt(i),0);let o=new Tr(Wt);return this.br.forEachWhile(l=>{const c=l.key.path;return!!n.isPrefixOf(c)&&(c.length===s&&(o=o.add(l.wr)),!0)},a),Se.resolve(this.Cr(o))}Cr(e){const r=[];return e.forEach(n=>{const s=this.Dr(n);s!==null&&r.push(s)}),r}removeMutationBatch(e,r){Tt(this.Fr(r.batchId,"removed")===0),this.mutationQueue.shift();let n=this.br;return Se.forEach(r.mutations,s=>{const i=new Vn(s.key,r.batchId);return n=n.delete(i),this.referenceDelegate.markPotentiallyOrphaned(e,s.key)}).next(()=>{this.br=n})}On(e){}containsKey(e,r){const n=new Vn(r,0),s=this.br.firstAfterOrEqual(n);return Se.resolve(r.isEqual(s&&s.key))}performConsistencyCheck(e){return this.mutationQueue.length,Se.resolve()}Fr(e,r){return this.vr(e)}vr(e){return this.mutationQueue.length===0?0:e-this.mutationQueue[0].batchId}Dr(e){const r=this.vr(e);return r<0||r>=this.mutationQueue.length?null:this.mutationQueue[r]}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class s8{constructor(e){this.Mr=e,this.docs=function(){return new tn(dt.comparator)}(),this.size=0}setIndexManager(e){this.indexManager=e}addEntry(e,r){const n=r.key,s=this.docs.get(n),i=s?s.size:0,a=this.Mr(r);return this.docs=this.docs.insert(n,{document:r.mutableCopy(),size:a}),this.size+=a-i,this.indexManager.addToCollectionParentIndex(e,n.path.popLast())}removeEntry(e){const r=this.docs.get(e);r&&(this.docs=this.docs.remove(e),this.size-=r.size)}getEntry(e,r){const n=this.docs.get(r);return Se.resolve(n?n.document.mutableCopy():Jr.newInvalidDocument(r))}getEntries(e,r){let n=Ai();return r.forEach(s=>{const i=this.docs.get(s);n=n.insert(s,i?i.document.mutableCopy():Jr.newInvalidDocument(s))}),Se.resolve(n)}getDocumentsMatchingQuery(e,r,n,s){let i=Ai();const a=r.path,o=new dt(a.child("")),l=this.docs.getIteratorFrom(o);for(;l.hasNext();){const{key:c,value:{document:u}}=l.getNext();if(!a.isPrefixOf(c.path))break;c.path.length>a.length+1||Ib(f4(u),n)<=0||(s.has(u.key)||Dp(r,u))&&(i=i.insert(u.key,u.mutableCopy()))}return Se.resolve(i)}getAllFromCollectionGroup(e,r,n,s){Bt()}Or(e,r){return Se.forEach(this.docs,n=>r(n))}newChangeBuffer(e){return new i8(this)}getSize(e){return Se.resolve(this.size)}}class i8 extends mT{constructor(e){super(),this.cr=e}applyChanges(e){const r=[];return this.changes.forEach((n,s)=>{s.isValidDocument()?r.push(this.cr.addEntry(e,s)):this.cr.removeEntry(n)}),Se.waitFor(r)}getFromCache(e,r){return this.cr.getEntry(e,r)}getAllFromCache(e,r){return this.cr.getEntries(e,r)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class a8{constructor(e){this.persistence=e,this.Nr=new Fl(r=>kc(r),jp),this.lastRemoteSnapshotVersion=Qt.min(),this.highestTargetId=0,this.Lr=0,this.Br=new Vb,this.targetCount=0,this.kr=Mc.Bn()}forEachTarget(e,r){return this.Nr.forEach((n,s)=>r(s)),Se.resolve()}getLastRemoteSnapshotVersion(e){return Se.resolve(this.lastRemoteSnapshotVersion)}getHighestSequenceNumber(e){return Se.resolve(this.Lr)}allocateTargetId(e){return this.highestTargetId=this.kr.next(),Se.resolve(this.highestTargetId)}setTargetsMetadata(e,r,n){return n&&(this.lastRemoteSnapshotVersion=n),r>this.Lr&&(this.Lr=r),Se.resolve()}Kn(e){this.Nr.set(e.target,e);const r=e.targetId;r>this.highestTargetId&&(this.kr=new Mc(r),this.highestTargetId=r),e.sequenceNumber>this.Lr&&(this.Lr=e.sequenceNumber)}addTargetData(e,r){return this.Kn(r),this.targetCount+=1,Se.resolve()}updateTargetData(e,r){return this.Kn(r),Se.resolve()}removeTargetData(e,r){return this.Nr.delete(r.target),this.Br.gr(r.targetId),this.targetCount-=1,Se.resolve()}removeTargets(e,r,n){let s=0;const i=[];return this.Nr.forEach((a,o)=>{o.sequenceNumber<=r&&n.get(o.targetId)===null&&(this.Nr.delete(a),i.push(this.removeMatchingKeysForTargetId(e,o.targetId)),s++)}),Se.waitFor(i).next(()=>s)}getTargetCount(e){return Se.resolve(this.targetCount)}getTargetData(e,r){const n=this.Nr.get(r)||null;return Se.resolve(n)}addMatchingKeys(e,r,n){return this.Br.Rr(r,n),Se.resolve()}removeMatchingKeys(e,r,n){this.Br.mr(r,n);const s=this.persistence.referenceDelegate,i=[];return s&&r.forEach(a=>{i.push(s.markPotentiallyOrphaned(e,a))}),Se.waitFor(i)}removeMatchingKeysForTargetId(e,r){return this.Br.gr(r),Se.resolve()}getMatchingKeysForTargetId(e,r){const n=this.Br.yr(r);return Se.resolve(n)}containsKey(e,r){return Se.resolve(this.Br.containsKey(r))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class wT{constructor(e,r){this.qr={},this.overlays={},this.Qr=new Ui(0),this.Kr=!1,this.Kr=!0,this.$r=new r8,this.referenceDelegate=e(this),this.Ur=new a8(this),this.indexManager=new VO,this.remoteDocumentCache=function(s){return new s8(s)}(n=>this.referenceDelegate.Wr(n)),this.serializer=new AT(r),this.Gr=new e8(this.serializer)}start(){return Promise.resolve()}shutdown(){return this.Kr=!1,Promise.resolve()}get started(){return this.Kr}setDatabaseDeletedListener(){}setNetworkEnabled(){}getIndexManager(e){return this.indexManager}getDocumentOverlayCache(e){let r=this.overlays[e.toKey()];return r||(r=new t8,this.overlays[e.toKey()]=r),r}getMutationQueue(e,r){let n=this.qr[e.toKey()];return n||(n=new n8(r,this.referenceDelegate),this.qr[e.toKey()]=n),n}getGlobalsCache(){return this.$r}getTargetCache(){return this.Ur}getRemoteDocumentCache(){return this.remoteDocumentCache}getBundleCache(){return this.Gr}runTransaction(e,r,n){Je("MemoryPersistence","Starting transaction:",e);const s=new o8(this.Qr.next());return this.referenceDelegate.zr(),n(s).next(i=>this.referenceDelegate.jr(s).next(()=>i)).toPromise().then(i=>(s.raiseOnCommittedEvent(),i))}Hr(e,r){return Se.or(Object.values(this.qr).map(n=>()=>n.containsKey(e,r)))}}class o8 extends m4{constructor(e){super(),this.currentSequenceNumber=e}}class Dv{constructor(e){this.persistence=e,this.Jr=new Vb,this.Yr=null}static Zr(e){return new Dv(e)}get Xr(){if(this.Yr)return this.Yr;throw Bt()}addReference(e,r,n){return this.Jr.addReference(n,r),this.Xr.delete(n.toString()),Se.resolve()}removeReference(e,r,n){return this.Jr.removeReference(n,r),this.Xr.add(n.toString()),Se.resolve()}markPotentiallyOrphaned(e,r){return this.Xr.add(r.toString()),Se.resolve()}removeTarget(e,r){this.Jr.gr(r.targetId).forEach(s=>this.Xr.add(s.toString()));const n=this.persistence.getTargetCache();return n.getMatchingKeysForTargetId(e,r.targetId).next(s=>{s.forEach(i=>this.Xr.add(i.toString()))}).next(()=>n.removeTargetData(e,r))}zr(){this.Yr=new Set}jr(e){const r=this.persistence.getRemoteDocumentCache().newChangeBuffer();return Se.forEach(this.Xr,n=>{const s=dt.fromPath(n);return this.ei(e,s).next(i=>{i||r.removeEntry(s,Qt.min())})}).next(()=>(this.Yr=null,r.apply(e)))}updateLimboDocument(e,r){return this.ei(e,r).next(n=>{n?this.Xr.delete(r.toString()):this.Xr.add(r.toString())})}Wr(e){return 0}ei(e,r){return Se.or([()=>Se.resolve(this.Jr.containsKey(r)),()=>this.persistence.getTargetCache().containsKey(e,r),()=>this.persistence.Hr(e,r)])}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class A8{constructor(e){this.serializer=e}O(e,r,n,s){const i=new Fv("createOrUpgrade",r);n<1&&s>=1&&(function(l){l.createObjectStore("owner")}(e),function(l){l.createObjectStore("mutationQueues",{keyPath:"userId"}),l.createObjectStore("mutations",{keyPath:"batchId",autoIncrement:!0}).createIndex("userMutationsIndex",G5,{unique:!0}),l.createObjectStore("documentMutations")}(e),PE(e),function(l){l.createObjectStore("remoteDocuments")}(e));let a=Se.resolve();return n<3&&s>=3&&(n!==0&&(function(l){l.deleteObjectStore("targetDocuments"),l.deleteObjectStore("targets"),l.deleteObjectStore("targetGlobal")}(e),PE(e)),a=a.next(()=>function(l){const c=l.store("targetGlobal"),u={highestTargetId:0,highestListenSequenceNumber:0,lastRemoteSnapshotVersion:Qt.min().toTimestamp(),targetCount:0};return c.put("targetGlobalKey",u)}(i))),n<4&&s>=4&&(n!==0&&(a=a.next(()=>function(l,c){return c.store("mutations").U().next(u=>{l.deleteObjectStore("mutations"),l.createObjectStore("mutations",{keyPath:"batchId",autoIncrement:!0}).createIndex("userMutationsIndex",G5,{unique:!0});const f=c.store("mutations"),p=u.map(m=>f.put(m));return Se.waitFor(p)})}(e,i))),a=a.next(()=>{(function(l){l.createObjectStore("clientMetadata",{keyPath:"clientId"})})(e)})),n<5&&s>=5&&(a=a.next(()=>this.ni(i))),n<6&&s>=6&&(a=a.next(()=>(function(l){l.createObjectStore("remoteDocumentGlobal")}(e),this.ri(i)))),n<7&&s>=7&&(a=a.next(()=>this.ii(i))),n<8&&s>=8&&(a=a.next(()=>this.si(e,i))),n<9&&s>=9&&(a=a.next(()=>{(function(l){l.objectStoreNames.contains("remoteDocumentChanges")&&l.deleteObjectStore("remoteDocumentChanges")})(e)})),n<10&&s>=10&&(a=a.next(()=>this.oi(i))),n<11&&s>=11&&(a=a.next(()=>{(function(l){l.createObjectStore("bundles",{keyPath:"bundleId"})})(e),function(l){l.createObjectStore("namedQueries",{keyPath:"name"})}(e)})),n<12&&s>=12&&(a=a.next(()=>{(function(l){const c=l.createObjectStore("documentOverlays",{keyPath:jM});c.createIndex("collectionPathOverlayIndex",kM,{unique:!1}),c.createIndex("collectionGroupOverlayIndex",DM,{unique:!1})})(e)})),n<13&&s>=13&&(a=a.next(()=>function(l){const c=l.createObjectStore("remoteDocumentsV14",{keyPath:EM});c.createIndex("documentKeyIndex",_M),c.createIndex("collectionGroupIndex",NM)}(e)).next(()=>this._i(e,i)).next(()=>e.deleteObjectStore("remoteDocuments"))),n<14&&s>=14&&(a=a.next(()=>this.ai(e,i))),n<15&&s>=15&&(a=a.next(()=>function(l){l.createObjectStore("indexConfiguration",{keyPath:"indexId",autoIncrement:!0}).createIndex("collectionGroupIndex","collectionGroup",{unique:!1}),l.createObjectStore("indexState",{keyPath:UM}).createIndex("sequenceNumberIndex",PM,{unique:!1}),l.createObjectStore("indexEntries",{keyPath:QM}).createIndex("documentKeyIndex",LM,{unique:!1})}(e))),n<16&&s>=16&&(a=a.next(()=>{r.objectStore("indexState").clear()}).next(()=>{r.objectStore("indexEntries").clear()})),n<17&&s>=17&&(a=a.next(()=>{(function(l){l.createObjectStore("globals",{keyPath:"name"})})(e)})),a}ri(e){let r=0;return e.store("remoteDocuments").J((n,s)=>{r+=M0(s)}).next(()=>{const n={byteSize:r};return e.store("remoteDocumentGlobal").put("remoteDocumentGlobalKey",n)})}ni(e){const r=e.store("mutationQueues"),n=e.store("mutations");return r.U().next(s=>Se.forEach(s,i=>{const a=IDBKeyRange.bound([i.userId,-1],[i.userId,i.lastAcknowledgedBatchId]);return n.U("userMutationsIndex",a).next(o=>Se.forEach(o,l=>{Tt(l.userId===i.userId);const c=Ac(this.serializer,l);return hT(e,i.userId,c).next(()=>{})}))}))}ii(e){const r=e.store("targetDocuments"),n=e.store("remoteDocuments");return e.store("targetGlobal").get("targetGlobalKey").next(s=>{const i=[];return n.J((a,o)=>{const l=new pr(a),c=function(f){return[0,Qs(f)]}(l);i.push(r.get(c).next(u=>u?Se.resolve():(f=>r.put({targetId:0,path:Qs(f),sequenceNumber:s.highestListenSequenceNumber}))(l)))}).next(()=>Se.waitFor(i))})}si(e,r){e.createObjectStore("collectionParents",{keyPath:TM});const n=r.store("collectionParents"),s=new Hb,i=a=>{if(s.add(a)){const o=a.lastSegment(),l=a.popLast();return n.put({collectionId:o,parent:Qs(l)})}};return r.store("remoteDocuments").J({H:!0},(a,o)=>{const l=new pr(a);return i(l.popLast())}).next(()=>r.store("documentMutations").J({H:!0},([a,o,l],c)=>{const u=La(o);return i(u.popLast())}))}oi(e){const r=e.store("targets");return r.J((n,s)=>{const i=tf(s),a=lT(this.serializer,i);return r.put(a)})}_i(e,r){const n=r.store("remoteDocuments"),s=[];return n.J((i,a)=>{const o=r.store("remoteDocumentsV14"),l=function(f){return f.document?new dt(pr.fromString(f.document.name).popFirst(5)):f.noDocument?dt.fromSegments(f.noDocument.path):f.unknownDocument?dt.fromSegments(f.unknownDocument.path):Bt()}(a).path.toArray(),c={prefixPath:l.slice(0,l.length-2),collectionGroup:l[l.length-2],documentId:l[l.length-1],readTime:a.readTime||[0,0],unknownDocument:a.unknownDocument,noDocument:a.noDocument,document:a.document,hasCommittedMutations:!!a.hasCommittedMutations};s.push(o.put(c))}).next(()=>Se.waitFor(s))}ai(e,r){const n=r.store("mutations"),s=gT(this.serializer),i=new wT(Dv.Zr,this.serializer.ct);return n.U().next(a=>{const o=new Map;return a.forEach(l=>{var c;let u=(c=o.get(l.userId))!==null&&c!==void 0?c:tr();Ac(this.serializer,l).keys().forEach(f=>u=u.add(f)),o.set(l.userId,u)}),Se.forEach(o,(l,c)=>{const u=new ns(c),f=jv.lt(this.serializer,u),p=i.getIndexManager(u),m=kv.lt(u,this.serializer,p,i.referenceDelegate);return new vT(s,m,f,p).recalculateAndSaveOverlaysForDocumentKeys(new c2(r,Ui.oe),l).next()})})}}function PE(t){t.createObjectStore("targetDocuments",{keyPath:SM}).createIndex("documentTargetsIndex",FM,{unique:!0}),t.createObjectStore("targets",{keyPath:"targetId"}).createIndex("queryTargetsIndex",IM,{unique:!0}),t.createObjectStore("targetGlobal")}const vy="Failed to obtain exclusive access to the persistence layer. To allow shared access, multi-tab synchronization has to be enabled in all tabs. If you are using `experimentalForceOwningTab:true`, make sure that only one tab has persistence enabled at any given time.";class Kb{constructor(e,r,n,s,i,a,o,l,c,u,f=17){if(this.allowTabSynchronization=e,this.persistenceKey=r,this.clientId=n,this.ui=i,this.window=a,this.document=o,this.ci=c,this.li=u,this.hi=f,this.Qr=null,this.Kr=!1,this.isPrimary=!1,this.networkEnabled=!0,this.Pi=null,this.inForeground=!1,this.Ii=null,this.Ti=null,this.Ei=Number.NEGATIVE_INFINITY,this.di=p=>Promise.resolve(),!Kb.D())throw new st(Me.UNIMPLEMENTED,"This platform is either missing IndexedDB or is known to have an incomplete implementation. Offline persistence has been disabled.");this.referenceDelegate=new XO(this,s),this.Ai=r+"main",this.serializer=new AT(l),this.Ri=new ol(this.Ai,this.hi,new A8(this.serializer)),this.$r=new kO,this.Ur=new qO(this.referenceDelegate,this.serializer),this.remoteDocumentCache=gT(this.serializer),this.Gr=new jO,this.window&&this.window.localStorage?this.Vi=this.window.localStorage:(this.Vi=null,u===!1&&Us("IndexedDbPersistence","LocalStorage is unavailable. As a result, persistence may not work reliably. In particular enablePersistence() could fail immediately after refreshing the page."))}start(){return this.mi().then(()=>{if(!this.isPrimary&&!this.allowTabSynchronization)throw new st(Me.FAILED_PRECONDITION,vy);return this.fi(),this.gi(),this.pi(),this.runTransaction("getHighestListenSequenceNumber","readonly",e=>this.Ur.getHighestSequenceNumber(e))}).then(e=>{this.Qr=new Ui(e,this.ci)}).then(()=>{this.Kr=!0}).catch(e=>(this.Ri&&this.Ri.close(),Promise.reject(e)))}yi(e){return this.di=async r=>{if(this.started)return e(r)},e(this.isPrimary)}setDatabaseDeletedListener(e){this.Ri.L(async r=>{r.newVersion===null&&await e()})}setNetworkEnabled(e){this.networkEnabled!==e&&(this.networkEnabled=e,this.ui.enqueueAndForget(async()=>{this.started&&await this.mi()}))}mi(){return this.runTransaction("updateClientMetadataAndTryBecomePrimary","readwrite",e=>Om(e).put({clientId:this.clientId,updateTimeMs:Date.now(),networkEnabled:this.networkEnabled,inForeground:this.inForeground}).next(()=>{if(this.isPrimary)return this.wi(e).next(r=>{r||(this.isPrimary=!1,this.ui.enqueueRetryable(()=>this.di(!1)))})}).next(()=>this.Si(e)).next(r=>this.isPrimary&&!r?this.bi(e).next(()=>!1):!!r&&this.Di(e).next(()=>!0))).catch(e=>{if(Sl(e))return Je("IndexedDbPersistence","Failed to extend owner lease: ",e),this.isPrimary;if(!this.allowTabSynchronization)throw e;return Je("IndexedDbPersistence","Releasing owner lease after error during lease refresh",e),!1}).then(e=>{this.isPrimary!==e&&this.ui.enqueueRetryable(()=>this.di(e)),this.isPrimary=e})}wi(e){return Qh(e).get("owner").next(r=>Se.resolve(this.vi(r)))}Ci(e){return Om(e).delete(this.clientId)}async Fi(){if(this.isPrimary&&!this.Mi(this.Ei,18e5)){this.Ei=Date.now();const e=await this.runTransaction("maybeGarbageCollectMultiClientState","readwrite-primary",r=>{const n=kn(r,"clientMetadata");return n.U().next(s=>{const i=this.xi(s,18e5),a=s.filter(o=>i.indexOf(o)===-1);return Se.forEach(a,o=>n.delete(o.clientId)).next(()=>a)})}).catch(()=>[]);if(this.Vi)for(const r of e)this.Vi.removeItem(this.Oi(r.clientId))}}pi(){this.Ti=this.ui.enqueueAfterDelay("client_metadata_refresh",4e3,()=>this.mi().then(()=>this.Fi()).then(()=>this.pi()))}vi(e){return!!e&&e.ownerId===this.clientId}Si(e){return this.li?Se.resolve(!0):Qh(e).get("owner").next(r=>{if(r!==null&&this.Mi(r.leaseTimestampMs,5e3)&&!this.Ni(r.ownerId)){if(this.vi(r)&&this.networkEnabled)return!0;if(!this.vi(r)){if(!r.allowTabSynchronization)throw new st(Me.FAILED_PRECONDITION,vy);return!1}}return!(!this.networkEnabled||!this.inForeground)||Om(e).U().next(n=>this.xi(n,5e3).find(s=>{if(this.clientId!==s.clientId){const i=!this.networkEnabled&&s.networkEnabled,a=!this.inForeground&&s.inForeground,o=this.networkEnabled===s.networkEnabled;if(i||a&&o)return!0}return!1})===void 0)}).next(r=>(this.isPrimary!==r&&Je("IndexedDbPersistence",`Client ${r?"is":"is not"} eligible for a primary lease.`),r))}async shutdown(){this.Kr=!1,this.Li(),this.Ti&&(this.Ti.cancel(),this.Ti=null),this.Bi(),this.ki(),await this.Ri.runTransaction("shutdown","readwrite",["owner","clientMetadata"],e=>{const r=new c2(e,Ui.oe);return this.bi(r).next(()=>this.Ci(r))}),this.Ri.close(),this.qi()}xi(e,r){return e.filter(n=>this.Mi(n.updateTimeMs,r)&&!this.Ni(n.clientId))}Qi(){return this.runTransaction("getActiveClients","readonly",e=>Om(e).U().next(r=>this.xi(r,18e5).map(n=>n.clientId)))}get started(){return this.Kr}getGlobalsCache(){return this.$r}getMutationQueue(e,r){return kv.lt(e,this.serializer,r,this.referenceDelegate)}getTargetCache(){return this.Ur}getRemoteDocumentCache(){return this.remoteDocumentCache}getIndexManager(e){return new KO(e,this.serializer.ct.databaseId)}getDocumentOverlayCache(e){return jv.lt(this.serializer,e)}getBundleCache(){return this.Gr}runTransaction(e,r,n){Je("IndexedDbPersistence","Starting transaction:",e);const s=r==="readonly"?"readonly":"readwrite",i=function(l){return l===17?OM:l===16?MM:l===15?Fb:l===14?x4:l===13?y4:l===12?RM:l===11?w4:void Bt()}(this.hi);let a;return this.Ri.runTransaction(e,s,i,o=>(a=new c2(o,this.Qr?this.Qr.next():Ui.oe),r==="readwrite-primary"?this.wi(a).next(l=>!!l||this.Si(a)).next(l=>{if(!l)throw Us(`Failed to obtain primary lease for action '${e}'.`),this.isPrimary=!1,this.ui.enqueueRetryable(()=>this.di(!1)),new st(Me.FAILED_PRECONDITION,p4);return n(a)}).next(l=>this.Di(a).next(()=>l)):this.Ki(a).next(()=>n(a)))).then(o=>(a.raiseOnCommittedEvent(),o))}Ki(e){return Qh(e).get("owner").next(r=>{if(r!==null&&this.Mi(r.leaseTimestampMs,5e3)&&!this.Ni(r.ownerId)&&!this.vi(r)&&!(this.li||this.allowTabSynchronization&&r.allowTabSynchronization))throw new st(Me.FAILED_PRECONDITION,vy)})}Di(e){const r={ownerId:this.clientId,allowTabSynchronization:this.allowTabSynchronization,leaseTimestampMs:Date.now()};return Qh(e).put("owner",r)}static D(){return ol.D()}bi(e){const r=Qh(e);return r.get("owner").next(n=>this.vi(n)?(Je("IndexedDbPersistence","Releasing primary lease."),r.delete("owner")):Se.resolve())}Mi(e,r){const n=Date.now();return!(e<n-r)&&(!(e>n)||(Us(`Detected an update time that is in the future: ${e} > ${n}`),!1))}fi(){this.document!==null&&typeof this.document.addEventListener=="function"&&(this.Ii=()=>{this.ui.enqueueAndForget(()=>(this.inForeground=this.document.visibilityState==="visible",this.mi()))},this.document.addEventListener("visibilitychange",this.Ii),this.inForeground=this.document.visibilityState==="visible")}Bi(){this.Ii&&(this.document.removeEventListener("visibilitychange",this.Ii),this.Ii=null)}gi(){var e;typeof((e=this.window)===null||e===void 0?void 0:e.addEventListener)=="function"&&(this.Pi=()=>{this.Li();const r=/(?:Version|Mobile)\/1[456]/;mF()&&(navigator.appVersion.match(r)||navigator.userAgent.match(r))&&this.ui.enterRestrictedMode(!0),this.ui.enqueueAndForget(()=>this.shutdown())},this.window.addEventListener("pagehide",this.Pi))}ki(){this.Pi&&(this.window.removeEventListener("pagehide",this.Pi),this.Pi=null)}Ni(e){var r;try{const n=((r=this.Vi)===null||r===void 0?void 0:r.getItem(this.Oi(e)))!==null;return Je("IndexedDbPersistence",`Client '${e}' ${n?"is":"is not"} zombied in LocalStorage`),n}catch(n){return Us("IndexedDbPersistence","Failed to get zombied client id.",n),!1}}Li(){if(this.Vi)try{this.Vi.setItem(this.Oi(this.clientId),String(Date.now()))}catch(e){Us("Failed to set zombie client id.",e)}}qi(){if(this.Vi)try{this.Vi.removeItem(this.Oi(this.clientId))}catch{}}Oi(e){return`firestore_zombie_${this.persistenceKey}_${e}`}}function Qh(t){return kn(t,"owner")}function Om(t){return kn(t,"clientMetadata")}function l8(t,e){let r=t.projectId;return t.isDefaultDatabase||(r+="."+t.database),"firestore/"+e+"/"+r+"/"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class qb{constructor(e,r,n,s){this.targetId=e,this.fromCache=r,this.$i=n,this.Ui=s}static Wi(e,r){let n=tr(),s=tr();for(const i of r.docChanges)switch(i.type){case 0:n=n.add(i.doc.key);break;case 1:s=s.add(i.doc.key)}return new qb(e,r.fromCache,n,s)}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class c8{constructor(){this._documentReadCount=0}get documentReadCount(){return this._documentReadCount}incrementDocumentReadCount(e){this._documentReadCount+=e}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class yT{constructor(){this.Gi=!1,this.zi=!1,this.ji=100,this.Hi=function(){return mF()?8:g4(jn())>0?6:4}()}initialize(e,r){this.Ji=e,this.indexManager=r,this.Gi=!0}getDocumentsMatchingQuery(e,r,n,s){const i={result:null};return this.Yi(e,r).next(a=>{i.result=a}).next(()=>{if(!i.result)return this.Zi(e,r,s,n).next(a=>{i.result=a})}).next(()=>{if(i.result)return;const a=new c8;return this.Xi(e,r,a).next(o=>{if(i.result=o,this.zi)return this.es(e,r,a,o.size)})}).next(()=>i.result)}es(e,r,n,s){return n.documentReadCount<this.ji?(Ru()<=Ar.DEBUG&&Je("QueryEngine","SDK will not create cache indexes for query:",Mu(r),"since it only creates cache indexes for collection contains","more than or equal to",this.ji,"documents"),Se.resolve()):(Ru()<=Ar.DEBUG&&Je("QueryEngine","Query:",Mu(r),"scans",n.documentReadCount,"local documents and returns",s,"documents as results."),n.documentReadCount>this.Hi*s?(Ru()<=Ar.DEBUG&&Je("QueryEngine","The SDK decides to create cache indexes for query:",Mu(r),"as using cache indexes may help improve performance."),this.indexManager.createTargetIndexes(e,ji(r))):Se.resolve())}Yi(e,r){if(iE(r))return Se.resolve(null);let n=ji(r);return this.indexManager.getIndexType(e,n).next(s=>s===0?null:(r.limit!==null&&s===1&&(r=k0(r,null,"F"),n=ji(r)),this.indexManager.getDocumentsMatchingTarget(e,n).next(i=>{const a=tr(...i);return this.Ji.getDocuments(e,a).next(o=>this.indexManager.getMinOffset(e,n).next(l=>{const c=this.ts(r,o);return this.ns(r,c,a,l.readTime)?this.Yi(e,k0(r,null,"F")):this.rs(e,c,r,l)}))})))}Zi(e,r,n,s){return iE(r)||s.isEqual(Qt.min())?Se.resolve(null):this.Ji.getDocuments(e,n).next(i=>{const a=this.ts(r,i);return this.ns(r,a,n,s)?Se.resolve(null):(Ru()<=Ar.DEBUG&&Je("QueryEngine","Re-using previous result from %s to execute query: %s",s.toString(),Mu(r)),this.rs(e,a,r,gM(s,-1)).next(o=>o))})}ts(e,r){let n=new Tr(j4(e));return r.forEach((s,i)=>{Dp(e,i)&&(n=n.add(i))}),n}ns(e,r,n,s){if(e.limit===null)return!1;if(n.size!==r.size)return!0;const i=e.limitType==="F"?r.last():r.first();return!!i&&(i.hasPendingWrites||i.version.compareTo(s)>0)}Xi(e,r,n){return Ru()<=Ar.DEBUG&&Je("QueryEngine","Using full collection scan to execute query:",Mu(r)),this.Ji.getDocumentsMatchingQuery(e,r,di.min(),n)}rs(e,r,n,s){return this.Ji.getDocumentsMatchingQuery(e,n,s).next(i=>(r.forEach(a=>{i=i.insert(a.key,a)}),i))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class u8{constructor(e,r,n,s){this.persistence=e,this.ss=r,this.serializer=s,this.os=new tn(Wt),this._s=new Fl(i=>kc(i),jp),this.us=new Map,this.cs=e.getRemoteDocumentCache(),this.Ur=e.getTargetCache(),this.Gr=e.getBundleCache(),this.ls(n)}ls(e){this.documentOverlayCache=this.persistence.getDocumentOverlayCache(e),this.indexManager=this.persistence.getIndexManager(e),this.mutationQueue=this.persistence.getMutationQueue(e,this.indexManager),this.localDocuments=new vT(this.cs,this.mutationQueue,this.documentOverlayCache,this.indexManager),this.cs.setIndexManager(this.indexManager),this.ss.initialize(this.localDocuments,this.indexManager)}collectGarbage(e){return this.persistence.runTransaction("Collect garbage","readwrite-primary",r=>e.collect(r,this.os))}}function xT(t,e,r,n){return new u8(t,e,r,n)}async function bT(t,e){const r=qt(t);return await r.persistence.runTransaction("Handle user change","readonly",n=>{let s;return r.mutationQueue.getAllMutationBatches(n).next(i=>(s=i,r.ls(e),r.mutationQueue.getAllMutationBatches(n))).next(i=>{const a=[],o=[];let l=tr();for(const c of s){a.push(c.batchId);for(const u of c.mutations)l=l.add(u.key)}for(const c of i){o.push(c.batchId);for(const u of c.mutations)l=l.add(u.key)}return r.localDocuments.getDocuments(n,l).next(c=>({hs:c,removedBatchIds:a,addedBatchIds:o}))})})}function d8(t,e){const r=qt(t);return r.persistence.runTransaction("Acknowledge batch","readwrite-primary",n=>{const s=e.batch.keys(),i=r.cs.newChangeBuffer({trackRemovals:!0});return function(o,l,c,u){const f=c.batch,p=f.keys();let m=Se.resolve();return p.forEach(b=>{m=m.next(()=>u.getEntry(l,b)).next(B=>{const _=c.docVersions.get(b);Tt(_!==null),B.version.compareTo(_)<0&&(f.applyToRemoteDocument(B,c),B.isValidDocument()&&(B.setReadTime(c.commitVersion),u.addEntry(B)))})}),m.next(()=>o.mutationQueue.removeMutationBatch(l,f))}(r,n,e,i).next(()=>i.apply(n)).next(()=>r.mutationQueue.performConsistencyCheck(n)).next(()=>r.documentOverlayCache.removeOverlaysForBatchId(n,s,e.batch.batchId)).next(()=>r.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(n,function(o){let l=tr();for(let c=0;c<o.mutationResults.length;++c)o.mutationResults[c].transformResults.length>0&&(l=l.add(o.batch.mutations[c].key));return l}(e))).next(()=>r.localDocuments.getDocuments(n,s))})}function BT(t){const e=qt(t);return e.persistence.runTransaction("Get last remote snapshot version","readonly",r=>e.Ur.getLastRemoteSnapshotVersion(r))}function h8(t,e){const r=qt(t),n=e.snapshotVersion;let s=r.os;return r.persistence.runTransaction("Apply remote event","readwrite-primary",i=>{const a=r.cs.newChangeBuffer({trackRemovals:!0});s=r.os;const o=[];e.targetChanges.forEach((u,f)=>{const p=s.get(f);if(!p)return;o.push(r.Ur.removeMatchingKeys(i,u.removedDocuments,f).next(()=>r.Ur.addMatchingKeys(i,u.addedDocuments,f)));let m=p.withSequenceNumber(i.currentSequenceNumber);e.targetMismatches.get(f)!==null?m=m.withResumeToken(Bn.EMPTY_BYTE_STRING,Qt.min()).withLastLimboFreeSnapshotVersion(Qt.min()):u.resumeToken.approximateByteSize()>0&&(m=m.withResumeToken(u.resumeToken,n)),s=s.insert(f,m),function(B,_,w){return B.resumeToken.approximateByteSize()===0||_.snapshotVersion.toMicroseconds()-B.snapshotVersion.toMicroseconds()>=3e8?!0:w.addedDocuments.size+w.modifiedDocuments.size+w.removedDocuments.size>0}(p,m,u)&&o.push(r.Ur.updateTargetData(i,m))});let l=Ai(),c=tr();if(e.documentUpdates.forEach(u=>{e.resolvedLimboDocuments.has(u)&&o.push(r.persistence.referenceDelegate.updateLimboDocument(i,u))}),o.push(f8(i,a,e.documentUpdates).next(u=>{l=u.Ps,c=u.Is})),!n.isEqual(Qt.min())){const u=r.Ur.getLastRemoteSnapshotVersion(i).next(f=>r.Ur.setTargetsMetadata(i,i.currentSequenceNumber,n));o.push(u)}return Se.waitFor(o).next(()=>a.apply(i)).next(()=>r.localDocuments.getLocalViewOfDocuments(i,l,c)).next(()=>l)}).then(i=>(r.os=s,i))}function f8(t,e,r){let n=tr(),s=tr();return r.forEach(i=>n=n.add(i)),e.getEntries(t,n).next(i=>{let a=Ai();return r.forEach((o,l)=>{const c=i.get(o);l.isFoundDocument()!==c.isFoundDocument()&&(s=s.add(o)),l.isNoDocument()&&l.version.isEqual(Qt.min())?(e.removeEntry(o,l.readTime),a=a.insert(o,l)):!c.isValidDocument()||l.version.compareTo(c.version)>0||l.version.compareTo(c.version)===0&&c.hasPendingWrites?(e.addEntry(l),a=a.insert(o,l)):Je("LocalStore","Ignoring outdated watch update for ",o,". Current version:",c.version," Watch version:",l.version)}),{Ps:a,Is:s}})}function p8(t,e){const r=qt(t);return r.persistence.runTransaction("Get next mutation batch","readonly",n=>(e===void 0&&(e=-1),r.mutationQueue.getNextMutationBatchAfterBatchId(n,e)))}function m8(t,e){const r=qt(t);return r.persistence.runTransaction("Allocate target","readwrite",n=>{let s;return r.Ur.getTargetData(n,e).next(i=>i?(s=i,Se.resolve(s)):r.Ur.allocateTargetId(n).next(a=>(s=new _o(e,a,"TargetPurposeListen",n.currentSequenceNumber),r.Ur.addTargetData(n,s).next(()=>s))))}).then(n=>{const s=r.os.get(n.targetId);return(s===null||n.snapshotVersion.compareTo(s.snapshotVersion)>0)&&(r.os=r.os.insert(n.targetId,n),r._s.set(e,n.targetId)),n})}async function C2(t,e,r){const n=qt(t),s=n.os.get(e),i=r?"readwrite":"readwrite-primary";try{r||await n.persistence.runTransaction("Release target",i,a=>n.persistence.referenceDelegate.removeTarget(a,s))}catch(a){if(!Sl(a))throw a;Je("LocalStore",`Failed to update sequence numbers for target ${e}: ${a}`)}n.os=n.os.remove(e),n._s.delete(s.target)}function QE(t,e,r){const n=qt(t);let s=Qt.min(),i=tr();return n.persistence.runTransaction("Execute query","readwrite",a=>function(l,c,u){const f=qt(l),p=f._s.get(u);return p!==void 0?Se.resolve(f.os.get(p)):f.Ur.getTargetData(c,u)}(n,a,ji(e)).next(o=>{if(o)return s=o.lastLimboFreeSnapshotVersion,n.Ur.getMatchingKeysForTargetId(a,o.targetId).next(l=>{i=l})}).next(()=>n.ss.getDocumentsMatchingQuery(a,e,r?s:Qt.min(),r?i:tr())).next(o=>(g8(n,rO(e),o),{documents:o,Ts:i})))}function g8(t,e,r){let n=t.us.get(e)||Qt.min();r.forEach((s,i)=>{i.readTime.compareTo(n)>0&&(n=i.readTime)}),t.us.set(e,n)}class LE{constructor(){this.activeTargetIds=AO()}fs(e){this.activeTargetIds=this.activeTargetIds.add(e)}gs(e){this.activeTargetIds=this.activeTargetIds.delete(e)}Vs(){const e={activeTargetIds:this.activeTargetIds.toArray(),updateTimeMs:Date.now()};return JSON.stringify(e)}}class CT{constructor(){this.so=new LE,this.oo={},this.onlineStateHandler=null,this.sequenceNumberHandler=null}addPendingMutation(e){}updateMutationState(e,r,n){}addLocalQueryTarget(e,r=!0){return r&&this.so.fs(e),this.oo[e]||"not-current"}updateQueryState(e,r,n){this.oo[e]=r}removeLocalQueryTarget(e){this.so.gs(e)}isLocalQueryTarget(e){return this.so.activeTargetIds.has(e)}clearQueryState(e){delete this.oo[e]}getAllActiveQueryTargets(){return this.so.activeTargetIds}isActiveQueryTarget(e){return this.so.activeTargetIds.has(e)}start(){return this.so=new LE,Promise.resolve()}handleUserChange(e,r,n){}setOnlineState(e){}shutdown(){}writeSequenceNumber(e){}notifyBundleLoaded(e){}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class v8{_o(e){}shutdown(){}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class jE{constructor(){this.ao=()=>this.uo(),this.co=()=>this.lo(),this.ho=[],this.Po()}_o(e){this.ho.push(e)}shutdown(){window.removeEventListener("online",this.ao),window.removeEventListener("offline",this.co)}Po(){window.addEventListener("online",this.ao),window.addEventListener("offline",this.co)}uo(){Je("ConnectivityMonitor","Network connectivity changed: AVAILABLE");for(const e of this.ho)e(0)}lo(){Je("ConnectivityMonitor","Network connectivity changed: UNAVAILABLE");for(const e of this.ho)e(1)}static D(){return typeof window<"u"&&window.addEventListener!==void 0&&window.removeEventListener!==void 0}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let Hm=null;function wy(){return Hm===null?Hm=function(){return 268435456+Math.round(2147483648*Math.random())}():Hm++,"0x"+Hm.toString(16)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const w8={BatchGetDocuments:"batchGet",Commit:"commit",RunQuery:"runQuery",RunAggregationQuery:"runAggregationQuery"};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class y8{constructor(e){this.Io=e.Io,this.To=e.To}Eo(e){this.Ao=e}Ro(e){this.Vo=e}mo(e){this.fo=e}onMessage(e){this.po=e}close(){this.To()}send(e){this.Io(e)}yo(){this.Ao()}wo(){this.Vo()}So(e){this.fo(e)}bo(e){this.po(e)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const fs="WebChannelConnection";class x8 extends class{constructor(r){this.databaseInfo=r,this.databaseId=r.databaseId;const n=r.ssl?"https":"http",s=encodeURIComponent(this.databaseId.projectId),i=encodeURIComponent(this.databaseId.database);this.Do=n+"://"+r.host,this.vo=`projects/${s}/databases/${i}`,this.Co=this.databaseId.database==="(default)"?`project_id=${s}`:`project_id=${s}&database_id=${i}`}get Fo(){return!1}Mo(r,n,s,i,a){const o=wy(),l=this.xo(r,n.toUriEncodedString());Je("RestConnection",`Sending RPC '${r}' ${o}:`,l,s);const c={"google-cloud-resource-prefix":this.vo,"x-goog-request-params":this.Co};return this.Oo(c,i,a),this.No(r,l,c,s).then(u=>(Je("RestConnection",`Received RPC '${r}' ${o}: `,u),u),u=>{throw fl("RestConnection",`RPC '${r}' ${o} failed with error: `,u,"url: ",l,"request:",s),u})}Lo(r,n,s,i,a,o){return this.Mo(r,n,s,i,a)}Oo(r,n,s){r["X-Goog-Api-Client"]=function(){return"gl-js/ fire/"+Gd}(),r["Content-Type"]="text/plain",this.databaseInfo.appId&&(r["X-Firebase-GMPID"]=this.databaseInfo.appId),n&&n.headers.forEach((i,a)=>r[a]=i),s&&s.headers.forEach((i,a)=>r[a]=i)}xo(r,n){const s=w8[r];return`${this.Do}/v1/${n}:${s}`}terminate(){}}{constructor(e){super(e),this.forceLongPolling=e.forceLongPolling,this.autoDetectLongPolling=e.autoDetectLongPolling,this.useFetchStreams=e.useFetchStreams,this.longPollingOptions=e.longPollingOptions}No(e,r,n,s){const i=wy();return new Promise((a,o)=>{const l=new a4;l.setWithCredentials(!0),l.listenOnce(o4.COMPLETE,()=>{try{switch(l.getLastErrorCode()){case Vg.NO_ERROR:const u=l.getResponseJson();Je(fs,`XHR for RPC '${e}' ${i} received:`,JSON.stringify(u)),a(u);break;case Vg.TIMEOUT:Je(fs,`RPC '${e}' ${i} timed out`),o(new st(Me.DEADLINE_EXCEEDED,"Request time out"));break;case Vg.HTTP_ERROR:const f=l.getStatus();if(Je(fs,`RPC '${e}' ${i} failed with status:`,f,"response text:",l.getResponseText()),f>0){let p=l.getResponseJson();Array.isArray(p)&&(p=p[0]);const m=p==null?void 0:p.error;if(m&&m.status&&m.message){const b=function(_){const w=_.toLowerCase().replace(/_/g,"-");return Object.values(Me).indexOf(w)>=0?w:Me.UNKNOWN}(m.status);o(new st(b,m.message))}else o(new st(Me.UNKNOWN,"Server responded with status "+l.getStatus()))}else o(new st(Me.UNAVAILABLE,"Connection failed."));break;default:Bt()}}finally{Je(fs,`RPC '${e}' ${i} completed.`)}});const c=JSON.stringify(s);Je(fs,`RPC '${e}' ${i} sending request:`,s),l.send(r,"POST",c,n,15)})}Bo(e,r,n){const s=wy(),i=[this.Do,"/","google.firestore.v1.Firestore","/",e,"/channel"],a=c4(),o=l4(),l={httpSessionIdParam:"gsessionid",initMessageHeaders:{},messageUrlParams:{database:`projects/${this.databaseId.projectId}/databases/${this.databaseId.database}`},sendRawJson:!0,supportsCrossDomainXhr:!0,internalChannelParams:{forwardChannelRequestTimeoutMs:6e5},forceLongPolling:this.forceLongPolling,detectBufferingProxy:this.autoDetectLongPolling},c=this.longPollingOptions.timeoutSeconds;c!==void 0&&(l.longPollingTimeout=Math.round(1e3*c)),this.useFetchStreams&&(l.useFetchStreams=!0),this.Oo(l.initMessageHeaders,r,n),l.encodeInitMessageHeaders=!0;const u=i.join("");Je(fs,`Creating RPC '${e}' stream ${s}: ${u}`,l);const f=a.createWebChannel(u,l);let p=!1,m=!1;const b=new y8({Io:_=>{m?Je(fs,`Not sending because RPC '${e}' stream ${s} is closed:`,_):(p||(Je(fs,`Opening RPC '${e}' stream ${s} transport.`),f.open(),p=!0),Je(fs,`RPC '${e}' stream ${s} sending:`,_),f.send(_))},To:()=>f.close()}),B=(_,w,y)=>{_.listen(w,S=>{try{y(S)}catch(O){setTimeout(()=>{throw O},0)}})};return B(f,Yh.EventType.OPEN,()=>{m||(Je(fs,`RPC '${e}' stream ${s} transport opened.`),b.yo())}),B(f,Yh.EventType.CLOSE,()=>{m||(m=!0,Je(fs,`RPC '${e}' stream ${s} transport closed`),b.So())}),B(f,Yh.EventType.ERROR,_=>{m||(m=!0,fl(fs,`RPC '${e}' stream ${s} transport errored:`,_),b.So(new st(Me.UNAVAILABLE,"The operation could not be completed")))}),B(f,Yh.EventType.MESSAGE,_=>{var w;if(!m){const y=_.data[0];Tt(!!y);const S=y,O=S.error||((w=S[0])===null||w===void 0?void 0:w.error);if(O){Je(fs,`RPC '${e}' stream ${s} received error:`,O);const R=O.status;let M=function(L){const D=_n[L];if(D!==void 0)return $4(D)}(R),I=O.message;M===void 0&&(M=Me.INTERNAL,I="Unknown error status: "+R+" with message "+O.message),m=!0,b.So(new st(M,I)),f.close()}else Je(fs,`RPC '${e}' stream ${s} received:`,y),b.bo(y)}}),B(o,A4.STAT_EVENT,_=>{_.stat===A2.PROXY?Je(fs,`RPC '${e}' stream ${s} detected buffering proxy`):_.stat===A2.NOPROXY&&Je(fs,`RPC '${e}' stream ${s} detected no buffering proxy`)}),setTimeout(()=>{b.wo()},0),b}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function b8(){return typeof window<"u"?window:null}function Xg(){return typeof document<"u"?document:null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Rv(t){return new CO(t,!0)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Gb{constructor(e,r,n=1e3,s=1.5,i=6e4){this.ui=e,this.timerId=r,this.ko=n,this.qo=s,this.Qo=i,this.Ko=0,this.$o=null,this.Uo=Date.now(),this.reset()}reset(){this.Ko=0}Wo(){this.Ko=this.Qo}Go(e){this.cancel();const r=Math.floor(this.Ko+this.zo()),n=Math.max(0,Date.now()-this.Uo),s=Math.max(0,r-n);s>0&&Je("ExponentialBackoff",`Backing off for ${s} ms (base delay: ${this.Ko} ms, delay with jitter: ${r} ms, last attempt: ${n} ms ago)`),this.$o=this.ui.enqueueAfterDelay(this.timerId,s,()=>(this.Uo=Date.now(),e())),this.Ko*=this.qo,this.Ko<this.ko&&(this.Ko=this.ko),this.Ko>this.Qo&&(this.Ko=this.Qo)}jo(){this.$o!==null&&(this.$o.skipDelay(),this.$o=null)}cancel(){this.$o!==null&&(this.$o.cancel(),this.$o=null)}zo(){return(Math.random()-.5)*this.Ko}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ET{constructor(e,r,n,s,i,a,o,l){this.ui=e,this.Ho=n,this.Jo=s,this.connection=i,this.authCredentialsProvider=a,this.appCheckCredentialsProvider=o,this.listener=l,this.state=0,this.Yo=0,this.Zo=null,this.Xo=null,this.stream=null,this.e_=0,this.t_=new Gb(e,r)}n_(){return this.state===1||this.state===5||this.r_()}r_(){return this.state===2||this.state===3}start(){this.e_=0,this.state!==4?this.auth():this.i_()}async stop(){this.n_()&&await this.close(0)}s_(){this.state=0,this.t_.reset()}o_(){this.r_()&&this.Zo===null&&(this.Zo=this.ui.enqueueAfterDelay(this.Ho,6e4,()=>this.__()))}a_(e){this.u_(),this.stream.send(e)}async __(){if(this.r_())return this.close(0)}u_(){this.Zo&&(this.Zo.cancel(),this.Zo=null)}c_(){this.Xo&&(this.Xo.cancel(),this.Xo=null)}async close(e,r){this.u_(),this.c_(),this.t_.cancel(),this.Yo++,e!==4?this.t_.reset():r&&r.code===Me.RESOURCE_EXHAUSTED?(Us(r.toString()),Us("Using maximum backoff delay to prevent overloading the backend."),this.t_.Wo()):r&&r.code===Me.UNAUTHENTICATED&&this.state!==3&&(this.authCredentialsProvider.invalidateToken(),this.appCheckCredentialsProvider.invalidateToken()),this.stream!==null&&(this.l_(),this.stream.close(),this.stream=null),this.state=e,await this.listener.mo(r)}l_(){}auth(){this.state=1;const e=this.h_(this.Yo),r=this.Yo;Promise.all([this.authCredentialsProvider.getToken(),this.appCheckCredentialsProvider.getToken()]).then(([n,s])=>{this.Yo===r&&this.P_(n,s)},n=>{e(()=>{const s=new st(Me.UNKNOWN,"Fetching auth token failed: "+n.message);return this.I_(s)})})}P_(e,r){const n=this.h_(this.Yo);this.stream=this.T_(e,r),this.stream.Eo(()=>{n(()=>this.listener.Eo())}),this.stream.Ro(()=>{n(()=>(this.state=2,this.Xo=this.ui.enqueueAfterDelay(this.Jo,1e4,()=>(this.r_()&&(this.state=3),Promise.resolve())),this.listener.Ro()))}),this.stream.mo(s=>{n(()=>this.I_(s))}),this.stream.onMessage(s=>{n(()=>++this.e_==1?this.E_(s):this.onNext(s))})}i_(){this.state=5,this.t_.Go(async()=>{this.state=0,this.start()})}I_(e){return Je("PersistentStream",`close with error: ${e}`),this.stream=null,this.close(4,e)}h_(e){return r=>{this.ui.enqueueAndForget(()=>this.Yo===e?r():(Je("PersistentStream","stream callback skipped by getCloseGuardedDispatcher."),Promise.resolve()))}}}class B8 extends ET{constructor(e,r,n,s,i,a){super(e,"listen_stream_connection_backoff","listen_stream_idle","health_check_timeout",r,n,s,a),this.serializer=i}T_(e,r){return this.connection.Bo("Listen",e,r)}E_(e){return this.onNext(e)}onNext(e){this.t_.reset();const r=IO(this.serializer,e),n=function(i){if(!("targetChange"in i))return Qt.min();const a=i.targetChange;return a.targetIds&&a.targetIds.length?Qt.min():a.readTime?zn(a.readTime):Qt.min()}(e);return this.listener.d_(r,n)}A_(e){const r={};r.database=w2(this.serializer),r.addTarget=function(i,a){let o;const l=a.target;if(o=L0(l)?{documents:rT(i,l)}:{query:nT(i,l)._t},o.targetId=a.targetId,a.resumeToken.approximateByteSize()>0){o.resumeToken=J4(i,a.resumeToken);const c=g2(i,a.expectedCount);c!==null&&(o.expectedCount=c)}else if(a.snapshotVersion.compareTo(Qt.min())>0){o.readTime=Ld(i,a.snapshotVersion.toTimestamp());const c=g2(i,a.expectedCount);c!==null&&(o.expectedCount=c)}return o}(this.serializer,e);const n=FO(this.serializer,e);n&&(r.labels=n),this.a_(r)}R_(e){const r={};r.database=w2(this.serializer),r.removeTarget=e,this.a_(r)}}class C8 extends ET{constructor(e,r,n,s,i,a){super(e,"write_stream_connection_backoff","write_stream_idle","health_check_timeout",r,n,s,a),this.serializer=i}get V_(){return this.e_>0}start(){this.lastStreamToken=void 0,super.start()}l_(){this.V_&&this.m_([])}T_(e,r){return this.connection.Bo("Write",e,r)}E_(e){return Tt(!!e.streamToken),this.lastStreamToken=e.streamToken,Tt(!e.writeResults||e.writeResults.length===0),this.listener.f_()}onNext(e){Tt(!!e.streamToken),this.lastStreamToken=e.streamToken,this.t_.reset();const r=SO(e.writeResults,e.commitTime),n=zn(e.commitTime);return this.listener.g_(n,r)}p_(){const e={};e.database=w2(this.serializer),this.a_(e)}m_(e){const r={streamToken:this.lastStreamToken,writes:e.map(n=>fp(this.serializer,n))};this.a_(r)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class E8 extends class{}{constructor(e,r,n,s){super(),this.authCredentials=e,this.appCheckCredentials=r,this.connection=n,this.serializer=s,this.y_=!1}w_(){if(this.y_)throw new st(Me.FAILED_PRECONDITION,"The client has already been terminated.")}Mo(e,r,n,s){return this.w_(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([i,a])=>this.connection.Mo(e,v2(r,n),s,i,a)).catch(i=>{throw i.name==="FirebaseError"?(i.code===Me.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),i):new st(Me.UNKNOWN,i.toString())})}Lo(e,r,n,s,i){return this.w_(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([a,o])=>this.connection.Lo(e,v2(r,n),s,a,o,i)).catch(a=>{throw a.name==="FirebaseError"?(a.code===Me.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),a):new st(Me.UNKNOWN,a.toString())})}terminate(){this.y_=!0,this.connection.terminate()}}class _8{constructor(e,r){this.asyncQueue=e,this.onlineStateHandler=r,this.state="Unknown",this.S_=0,this.b_=null,this.D_=!0}v_(){this.S_===0&&(this.C_("Unknown"),this.b_=this.asyncQueue.enqueueAfterDelay("online_state_timeout",1e4,()=>(this.b_=null,this.F_("Backend didn't respond within 10 seconds."),this.C_("Offline"),Promise.resolve())))}M_(e){this.state==="Online"?this.C_("Unknown"):(this.S_++,this.S_>=1&&(this.x_(),this.F_(`Connection failed 1 times. Most recent error: ${e.toString()}`),this.C_("Offline")))}set(e){this.x_(),this.S_=0,e==="Online"&&(this.D_=!1),this.C_(e)}C_(e){e!==this.state&&(this.state=e,this.onlineStateHandler(e))}F_(e){const r=`Could not reach Cloud Firestore backend. ${e}
This typically indicates that your device does not have a healthy Internet connection at the moment. The client will operate in offline mode until it is able to successfully connect to the backend.`;this.D_?(Us(r),this.D_=!1):Je("OnlineStateTracker",r)}x_(){this.b_!==null&&(this.b_.cancel(),this.b_=null)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class N8{constructor(e,r,n,s,i){this.localStore=e,this.datastore=r,this.asyncQueue=n,this.remoteSyncer={},this.O_=[],this.N_=new Map,this.L_=new Set,this.B_=[],this.k_=i,this.k_._o(a=>{n.enqueueAndForget(async()=>{Gc(this)&&(Je("RemoteStore","Restarting streams for network reachability change."),await async function(l){const c=qt(l);c.L_.add(4),await Mp(c),c.q_.set("Unknown"),c.L_.delete(4),await Mv(c)}(this))})}),this.q_=new _8(n,s)}}async function Mv(t){if(Gc(t))for(const e of t.B_)await e(!0)}async function Mp(t){for(const e of t.B_)await e(!1)}function _T(t,e){const r=qt(t);r.N_.has(e.targetId)||(r.N_.set(e.targetId,e),Xb(r)?Wb(r):Xd(r).r_()&&$b(r,e))}function zb(t,e){const r=qt(t),n=Xd(r);r.N_.delete(e),n.r_()&&NT(r,e),r.N_.size===0&&(n.r_()?n.o_():Gc(r)&&r.q_.set("Unknown"))}function $b(t,e){if(t.Q_.xe(e.targetId),e.resumeToken.approximateByteSize()>0||e.snapshotVersion.compareTo(Qt.min())>0){const r=t.remoteSyncer.getRemoteKeysForTarget(e.targetId).size;e=e.withExpectedCount(r)}Xd(t).A_(e)}function NT(t,e){t.Q_.xe(e),Xd(t).R_(e)}function Wb(t){t.Q_=new yO({getRemoteKeysForTarget:e=>t.remoteSyncer.getRemoteKeysForTarget(e),ot:e=>t.N_.get(e)||null,tt:()=>t.datastore.serializer.databaseId}),Xd(t).start(),t.q_.v_()}function Xb(t){return Gc(t)&&!Xd(t).n_()&&t.N_.size>0}function Gc(t){return qt(t).L_.size===0}function IT(t){t.Q_=void 0}async function I8(t){t.q_.set("Online")}async function S8(t){t.N_.forEach((e,r)=>{$b(t,e)})}async function F8(t,e){IT(t),Xb(t)?(t.q_.M_(e),Wb(t)):t.q_.set("Unknown")}async function T8(t,e,r){if(t.q_.set("Online"),e instanceof X4&&e.state===2&&e.cause)try{await async function(s,i){const a=i.cause;for(const o of i.targetIds)s.N_.has(o)&&(await s.remoteSyncer.rejectListen(o,a),s.N_.delete(o),s.Q_.removeTarget(o))}(t,e)}catch(n){Je("RemoteStore","Failed to remove targets %s: %s ",e.targetIds.join(","),n),await O0(t,n)}else if(e instanceof Wg?t.Q_.Ke(e):e instanceof W4?t.Q_.He(e):t.Q_.We(e),!r.isEqual(Qt.min()))try{const n=await BT(t.localStore);r.compareTo(n)>=0&&await function(i,a){const o=i.Q_.rt(a);return o.targetChanges.forEach((l,c)=>{if(l.resumeToken.approximateByteSize()>0){const u=i.N_.get(c);u&&i.N_.set(c,u.withResumeToken(l.resumeToken,a))}}),o.targetMismatches.forEach((l,c)=>{const u=i.N_.get(l);if(!u)return;i.N_.set(l,u.withResumeToken(Bn.EMPTY_BYTE_STRING,u.snapshotVersion)),NT(i,l);const f=new _o(u.target,l,c,u.sequenceNumber);$b(i,f)}),i.remoteSyncer.applyRemoteEvent(o)}(t,r)}catch(n){Je("RemoteStore","Failed to raise snapshot:",n),await O0(t,n)}}async function O0(t,e,r){if(!Sl(e))throw e;t.L_.add(1),await Mp(t),t.q_.set("Offline"),r||(r=()=>BT(t.localStore)),t.asyncQueue.enqueueRetryable(async()=>{Je("RemoteStore","Retrying IndexedDB access"),await r(),t.L_.delete(1),await Mv(t)})}function ST(t,e){return e().catch(r=>O0(t,r,e))}async function Op(t){const e=qt(t),r=vl(e);let n=e.O_.length>0?e.O_[e.O_.length-1].batchId:-1;for(;U8(e);)try{const s=await p8(e.localStore,n);if(s===null){e.O_.length===0&&r.o_();break}n=s.batchId,P8(e,s)}catch(s){await O0(e,s)}FT(e)&&TT(e)}function U8(t){return Gc(t)&&t.O_.length<10}function P8(t,e){t.O_.push(e);const r=vl(t);r.r_()&&r.V_&&r.m_(e.mutations)}function FT(t){return Gc(t)&&!vl(t).n_()&&t.O_.length>0}function TT(t){vl(t).start()}async function Q8(t){vl(t).p_()}async function L8(t){const e=vl(t);for(const r of t.O_)e.m_(r.mutations)}async function j8(t,e,r){const n=t.O_.shift(),s=kb.from(n,e,r);await ST(t,()=>t.remoteSyncer.applySuccessfulWrite(s)),await Op(t)}async function k8(t,e){e&&vl(t).V_&&await async function(n,s){if(function(a){return z4(a)&&a!==Me.ABORTED}(s.code)){const i=n.O_.shift();vl(n).s_(),await ST(n,()=>n.remoteSyncer.rejectFailedWrite(i.batchId,s)),await Op(n)}}(t,e),FT(t)&&TT(t)}async function kE(t,e){const r=qt(t);r.asyncQueue.verifyOperationInProgress(),Je("RemoteStore","RemoteStore received new credentials");const n=Gc(r);r.L_.add(3),await Mp(r),n&&r.q_.set("Unknown"),await r.remoteSyncer.handleCredentialChange(e),r.L_.delete(3),await Mv(r)}async function D8(t,e){const r=qt(t);e?(r.L_.delete(2),await Mv(r)):e||(r.L_.add(2),await Mp(r),r.q_.set("Unknown"))}function Xd(t){return t.K_||(t.K_=function(r,n,s){const i=qt(r);return i.w_(),new B8(n,i.connection,i.authCredentials,i.appCheckCredentials,i.serializer,s)}(t.datastore,t.asyncQueue,{Eo:I8.bind(null,t),Ro:S8.bind(null,t),mo:F8.bind(null,t),d_:T8.bind(null,t)}),t.B_.push(async e=>{e?(t.K_.s_(),Xb(t)?Wb(t):t.q_.set("Unknown")):(await t.K_.stop(),IT(t))})),t.K_}function vl(t){return t.U_||(t.U_=function(r,n,s){const i=qt(r);return i.w_(),new C8(n,i.connection,i.authCredentials,i.appCheckCredentials,i.serializer,s)}(t.datastore,t.asyncQueue,{Eo:()=>Promise.resolve(),Ro:Q8.bind(null,t),mo:k8.bind(null,t),f_:L8.bind(null,t),g_:j8.bind(null,t)}),t.B_.push(async e=>{e?(t.U_.s_(),await Op(t)):(await t.U_.stop(),t.O_.length>0&&(Je("RemoteStore",`Stopping write stream with ${t.O_.length} pending writes`),t.O_=[]))})),t.U_}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Jb{constructor(e,r,n,s,i){this.asyncQueue=e,this.timerId=r,this.targetTimeMs=n,this.op=s,this.removalCallback=i,this.deferred=new aa,this.then=this.deferred.promise.then.bind(this.deferred.promise),this.deferred.promise.catch(a=>{})}get promise(){return this.deferred.promise}static createAndSchedule(e,r,n,s,i){const a=Date.now()+n,o=new Jb(e,r,a,s,i);return o.start(n),o}start(e){this.timerHandle=setTimeout(()=>this.handleDelayElapsed(),e)}skipDelay(){return this.handleDelayElapsed()}cancel(e){this.timerHandle!==null&&(this.clearTimeout(),this.deferred.reject(new st(Me.CANCELLED,"Operation cancelled"+(e?": "+e:""))))}handleDelayElapsed(){this.asyncQueue.enqueueAndForget(()=>this.timerHandle!==null?(this.clearTimeout(),this.op().then(e=>this.deferred.resolve(e))):Promise.resolve())}clearTimeout(){this.timerHandle!==null&&(this.removalCallback(this),clearTimeout(this.timerHandle),this.timerHandle=null)}}function Yb(t,e){if(Us("AsyncQueue",`${e}: ${t}`),Sl(t))return new st(Me.UNAVAILABLE,`${e}: ${t}`);throw t}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class gd{constructor(e){this.comparator=e?(r,n)=>e(r,n)||dt.comparator(r.key,n.key):(r,n)=>dt.comparator(r.key,n.key),this.keyedMap=Zh(),this.sortedSet=new tn(this.comparator)}static emptySet(e){return new gd(e.comparator)}has(e){return this.keyedMap.get(e)!=null}get(e){return this.keyedMap.get(e)}first(){return this.sortedSet.minKey()}last(){return this.sortedSet.maxKey()}isEmpty(){return this.sortedSet.isEmpty()}indexOf(e){const r=this.keyedMap.get(e);return r?this.sortedSet.indexOf(r):-1}get size(){return this.sortedSet.size}forEach(e){this.sortedSet.inorderTraversal((r,n)=>(e(r),!1))}add(e){const r=this.delete(e.key);return r.copy(r.keyedMap.insert(e.key,e),r.sortedSet.insert(e,null))}delete(e){const r=this.get(e);return r?this.copy(this.keyedMap.remove(e),this.sortedSet.remove(r)):this}isEqual(e){if(!(e instanceof gd)||this.size!==e.size)return!1;const r=this.sortedSet.getIterator(),n=e.sortedSet.getIterator();for(;r.hasNext();){const s=r.getNext().key,i=n.getNext().key;if(!s.isEqual(i))return!1}return!0}toString(){const e=[];return this.forEach(r=>{e.push(r.toString())}),e.length===0?"DocumentSet ()":`DocumentSet (
  `+e.join(`  
`)+`
)`}copy(e,r){const n=new gd;return n.comparator=this.comparator,n.keyedMap=e,n.sortedSet=r,n}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class DE{constructor(){this.W_=new tn(dt.comparator)}track(e){const r=e.doc.key,n=this.W_.get(r);n?e.type!==0&&n.type===3?this.W_=this.W_.insert(r,e):e.type===3&&n.type!==1?this.W_=this.W_.insert(r,{type:n.type,doc:e.doc}):e.type===2&&n.type===2?this.W_=this.W_.insert(r,{type:2,doc:e.doc}):e.type===2&&n.type===0?this.W_=this.W_.insert(r,{type:0,doc:e.doc}):e.type===1&&n.type===0?this.W_=this.W_.remove(r):e.type===1&&n.type===2?this.W_=this.W_.insert(r,{type:1,doc:n.doc}):e.type===0&&n.type===1?this.W_=this.W_.insert(r,{type:2,doc:e.doc}):Bt():this.W_=this.W_.insert(r,e)}G_(){const e=[];return this.W_.inorderTraversal((r,n)=>{e.push(n)}),e}}class jd{constructor(e,r,n,s,i,a,o,l,c){this.query=e,this.docs=r,this.oldDocs=n,this.docChanges=s,this.mutatedKeys=i,this.fromCache=a,this.syncStateChanged=o,this.excludesMetadataChanges=l,this.hasCachedResults=c}static fromInitialDocuments(e,r,n,s,i){const a=[];return r.forEach(o=>{a.push({type:0,doc:o})}),new jd(e,r,gd.emptySet(r),a,n,s,!0,!1,i)}get hasPendingWrites(){return!this.mutatedKeys.isEmpty()}isEqual(e){if(!(this.fromCache===e.fromCache&&this.hasCachedResults===e.hasCachedResults&&this.syncStateChanged===e.syncStateChanged&&this.mutatedKeys.isEqual(e.mutatedKeys)&&Uv(this.query,e.query)&&this.docs.isEqual(e.docs)&&this.oldDocs.isEqual(e.oldDocs)))return!1;const r=this.docChanges,n=e.docChanges;if(r.length!==n.length)return!1;for(let s=0;s<r.length;s++)if(r[s].type!==n[s].type||!r[s].doc.isEqual(n[s].doc))return!1;return!0}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class R8{constructor(){this.z_=void 0,this.j_=[]}H_(){return this.j_.some(e=>e.J_())}}class M8{constructor(){this.queries=RE(),this.onlineState="Unknown",this.Y_=new Set}terminate(){(function(r,n){const s=qt(r),i=s.queries;s.queries=RE(),i.forEach((a,o)=>{for(const l of o.j_)l.onError(n)})})(this,new st(Me.ABORTED,"Firestore shutting down"))}}function RE(){return new Fl(t=>L4(t),Uv)}async function Zb(t,e){const r=qt(t);let n=3;const s=e.query;let i=r.queries.get(s);i?!i.H_()&&e.J_()&&(n=2):(i=new R8,n=e.J_()?0:1);try{switch(n){case 0:i.z_=await r.onListen(s,!0);break;case 1:i.z_=await r.onListen(s,!1);break;case 2:await r.onFirstRemoteStoreListen(s)}}catch(a){const o=Yb(a,`Initialization of query '${Mu(e.query)}' failed`);return void e.onError(o)}r.queries.set(s,i),i.j_.push(e),e.Z_(r.onlineState),i.z_&&e.X_(i.z_)&&tB(r)}async function eB(t,e){const r=qt(t),n=e.query;let s=3;const i=r.queries.get(n);if(i){const a=i.j_.indexOf(e);a>=0&&(i.j_.splice(a,1),i.j_.length===0?s=e.J_()?0:1:!i.H_()&&e.J_()&&(s=2))}switch(s){case 0:return r.queries.delete(n),r.onUnlisten(n,!0);case 1:return r.queries.delete(n),r.onUnlisten(n,!1);case 2:return r.onLastRemoteStoreUnlisten(n);default:return}}function O8(t,e){const r=qt(t);let n=!1;for(const s of e){const i=s.query,a=r.queries.get(i);if(a){for(const o of a.j_)o.X_(s)&&(n=!0);a.z_=s}}n&&tB(r)}function H8(t,e,r){const n=qt(t),s=n.queries.get(e);if(s)for(const i of s.j_)i.onError(r);n.queries.delete(e)}function tB(t){t.Y_.forEach(e=>{e.next()})}var E2,ME;(ME=E2||(E2={})).ea="default",ME.Cache="cache";class rB{constructor(e,r,n){this.query=e,this.ta=r,this.na=!1,this.ra=null,this.onlineState="Unknown",this.options=n||{}}X_(e){if(!this.options.includeMetadataChanges){const n=[];for(const s of e.docChanges)s.type!==3&&n.push(s);e=new jd(e.query,e.docs,e.oldDocs,n,e.mutatedKeys,e.fromCache,e.syncStateChanged,!0,e.hasCachedResults)}let r=!1;return this.na?this.ia(e)&&(this.ta.next(e),r=!0):this.sa(e,this.onlineState)&&(this.oa(e),r=!0),this.ra=e,r}onError(e){this.ta.error(e)}Z_(e){this.onlineState=e;let r=!1;return this.ra&&!this.na&&this.sa(this.ra,e)&&(this.oa(this.ra),r=!0),r}sa(e,r){if(!e.fromCache||!this.J_())return!0;const n=r!=="Offline";return(!this.options._a||!n)&&(!e.docs.isEmpty()||e.hasCachedResults||r==="Offline")}ia(e){if(e.docChanges.length>0)return!0;const r=this.ra&&this.ra.hasPendingWrites!==e.hasPendingWrites;return!(!e.syncStateChanged&&!r)&&this.options.includeMetadataChanges===!0}oa(e){e=jd.fromInitialDocuments(e.query,e.docs,e.mutatedKeys,e.fromCache,e.hasCachedResults),this.na=!0,this.ta.next(e)}J_(){return this.options.source!==E2.Cache}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class UT{constructor(e){this.key=e}}class PT{constructor(e){this.key=e}}class V8{constructor(e,r){this.query=e,this.Ta=r,this.Ea=null,this.hasCachedResults=!1,this.current=!1,this.da=tr(),this.mutatedKeys=tr(),this.Aa=j4(e),this.Ra=new gd(this.Aa)}get Va(){return this.Ta}ma(e,r){const n=r?r.fa:new DE,s=r?r.Ra:this.Ra;let i=r?r.mutatedKeys:this.mutatedKeys,a=s,o=!1;const l=this.query.limitType==="F"&&s.size===this.query.limit?s.last():null,c=this.query.limitType==="L"&&s.size===this.query.limit?s.first():null;if(e.inorderTraversal((u,f)=>{const p=s.get(u),m=Dp(this.query,f)?f:null,b=!!p&&this.mutatedKeys.has(p.key),B=!!m&&(m.hasLocalMutations||this.mutatedKeys.has(m.key)&&m.hasCommittedMutations);let _=!1;p&&m?p.data.isEqual(m.data)?b!==B&&(n.track({type:3,doc:m}),_=!0):this.ga(p,m)||(n.track({type:2,doc:m}),_=!0,(l&&this.Aa(m,l)>0||c&&this.Aa(m,c)<0)&&(o=!0)):!p&&m?(n.track({type:0,doc:m}),_=!0):p&&!m&&(n.track({type:1,doc:p}),_=!0,(l||c)&&(o=!0)),_&&(m?(a=a.add(m),i=B?i.add(u):i.delete(u)):(a=a.delete(u),i=i.delete(u)))}),this.query.limit!==null)for(;a.size>this.query.limit;){const u=this.query.limitType==="F"?a.last():a.first();a=a.delete(u.key),i=i.delete(u.key),n.track({type:1,doc:u})}return{Ra:a,fa:n,ns:o,mutatedKeys:i}}ga(e,r){return e.hasLocalMutations&&r.hasCommittedMutations&&!r.hasLocalMutations}applyChanges(e,r,n,s){const i=this.Ra;this.Ra=e.Ra,this.mutatedKeys=e.mutatedKeys;const a=e.fa.G_();a.sort((u,f)=>function(m,b){const B=_=>{switch(_){case 0:return 1;case 2:case 3:return 2;case 1:return 0;default:return Bt()}};return B(m)-B(b)}(u.type,f.type)||this.Aa(u.doc,f.doc)),this.pa(n),s=s!=null&&s;const o=r&&!s?this.ya():[],l=this.da.size===0&&this.current&&!s?1:0,c=l!==this.Ea;return this.Ea=l,a.length!==0||c?{snapshot:new jd(this.query,e.Ra,i,a,e.mutatedKeys,l===0,c,!1,!!n&&n.resumeToken.approximateByteSize()>0),wa:o}:{wa:o}}Z_(e){return this.current&&e==="Offline"?(this.current=!1,this.applyChanges({Ra:this.Ra,fa:new DE,mutatedKeys:this.mutatedKeys,ns:!1},!1)):{wa:[]}}Sa(e){return!this.Ta.has(e)&&!!this.Ra.has(e)&&!this.Ra.get(e).hasLocalMutations}pa(e){e&&(e.addedDocuments.forEach(r=>this.Ta=this.Ta.add(r)),e.modifiedDocuments.forEach(r=>{}),e.removedDocuments.forEach(r=>this.Ta=this.Ta.delete(r)),this.current=e.current)}ya(){if(!this.current)return[];const e=this.da;this.da=tr(),this.Ra.forEach(n=>{this.Sa(n.key)&&(this.da=this.da.add(n.key))});const r=[];return e.forEach(n=>{this.da.has(n)||r.push(new PT(n))}),this.da.forEach(n=>{e.has(n)||r.push(new UT(n))}),r}ba(e){this.Ta=e.Ts,this.da=tr();const r=this.ma(e.documents);return this.applyChanges(r,!0)}Da(){return jd.fromInitialDocuments(this.query,this.Ra,this.mutatedKeys,this.Ea===0,this.hasCachedResults)}}class K8{constructor(e,r,n){this.query=e,this.targetId=r,this.view=n}}class q8{constructor(e){this.key=e,this.va=!1}}class G8{constructor(e,r,n,s,i,a){this.localStore=e,this.remoteStore=r,this.eventManager=n,this.sharedClientState=s,this.currentUser=i,this.maxConcurrentLimboResolutions=a,this.Ca={},this.Fa=new Fl(o=>L4(o),Uv),this.Ma=new Map,this.xa=new Set,this.Oa=new tn(dt.comparator),this.Na=new Map,this.La=new Vb,this.Ba={},this.ka=new Map,this.qa=Mc.kn(),this.onlineState="Unknown",this.Qa=void 0}get isPrimaryClient(){return this.Qa===!0}}async function z8(t,e,r=!0){const n=RT(t);let s;const i=n.Fa.get(e);return i?(n.sharedClientState.addLocalQueryTarget(i.targetId),s=i.view.Da()):s=await QT(n,e,r,!0),s}async function $8(t,e){const r=RT(t);await QT(r,e,!0,!1)}async function QT(t,e,r,n){const s=await m8(t.localStore,ji(e)),i=s.targetId,a=t.sharedClientState.addLocalQueryTarget(i,r);let o;return n&&(o=await W8(t,e,i,a==="current",s.resumeToken)),t.isPrimaryClient&&r&&_T(t.remoteStore,s),o}async function W8(t,e,r,n,s){t.Ka=(f,p,m)=>async function(B,_,w,y){let S=_.view.ma(w);S.ns&&(S=await QE(B.localStore,_.query,!1).then(({documents:I})=>_.view.ma(I,S)));const O=y&&y.targetChanges.get(_.targetId),R=y&&y.targetMismatches.get(_.targetId)!=null,M=_.view.applyChanges(S,B.isPrimaryClient,O,R);return HE(B,_.targetId,M.wa),M.snapshot}(t,f,p,m);const i=await QE(t.localStore,e,!0),a=new V8(e,i.Ts),o=a.ma(i.documents),l=Rp.createSynthesizedTargetChangeForCurrentChange(r,n&&t.onlineState!=="Offline",s),c=a.applyChanges(o,t.isPrimaryClient,l);HE(t,r,c.wa);const u=new K8(e,r,a);return t.Fa.set(e,u),t.Ma.has(r)?t.Ma.get(r).push(e):t.Ma.set(r,[e]),c.snapshot}async function X8(t,e,r){const n=qt(t),s=n.Fa.get(e),i=n.Ma.get(s.targetId);if(i.length>1)return n.Ma.set(s.targetId,i.filter(a=>!Uv(a,e))),void n.Fa.delete(e);n.isPrimaryClient?(n.sharedClientState.removeLocalQueryTarget(s.targetId),n.sharedClientState.isActiveQueryTarget(s.targetId)||await C2(n.localStore,s.targetId,!1).then(()=>{n.sharedClientState.clearQueryState(s.targetId),r&&zb(n.remoteStore,s.targetId),_2(n,s.targetId)}).catch(Kc)):(_2(n,s.targetId),await C2(n.localStore,s.targetId,!0))}async function J8(t,e){const r=qt(t),n=r.Fa.get(e),s=r.Ma.get(n.targetId);r.isPrimaryClient&&s.length===1&&(r.sharedClientState.removeLocalQueryTarget(n.targetId),zb(r.remoteStore,n.targetId))}async function Y8(t,e,r){const n=MT(t);try{const s=await function(a,o){const l=qt(a),c=Dt.now(),u=o.reduce((m,b)=>m.add(b.key),tr());let f,p;return l.persistence.runTransaction("Locally write mutations","readwrite",m=>{let b=Ai(),B=tr();return l.cs.getEntries(m,u).next(_=>{b=_,b.forEach((w,y)=>{y.isValidDocument()||(B=B.add(w))})}).next(()=>l.localDocuments.getOverlayedDocuments(m,b)).next(_=>{f=_;const w=[];for(const y of o){const S=mO(y,f.get(y.key).overlayedDocument);S!=null&&w.push(new Go(y.key,S,_4(S.value.mapValue),Zr.exists(!0)))}return l.mutationQueue.addMutationBatch(m,c,w,o)}).next(_=>{p=_;const w=_.applyToLocalDocumentSet(f,B);return l.documentOverlayCache.saveOverlays(m,_.batchId,w)})}).then(()=>({batchId:p.batchId,changes:D4(f)}))}(n.localStore,e);n.sharedClientState.addPendingMutation(s.batchId),function(a,o,l){let c=a.Ba[a.currentUser.toKey()];c||(c=new tn(Wt)),c=c.insert(o,l),a.Ba[a.currentUser.toKey()]=c}(n,s.batchId,r),await Hp(n,s.changes),await Op(n.remoteStore)}catch(s){const i=Yb(s,"Failed to persist write");r.reject(i)}}async function LT(t,e){const r=qt(t);try{const n=await h8(r.localStore,e);e.targetChanges.forEach((s,i)=>{const a=r.Na.get(i);a&&(Tt(s.addedDocuments.size+s.modifiedDocuments.size+s.removedDocuments.size<=1),s.addedDocuments.size>0?a.va=!0:s.modifiedDocuments.size>0?Tt(a.va):s.removedDocuments.size>0&&(Tt(a.va),a.va=!1))}),await Hp(r,n,e)}catch(n){await Kc(n)}}function OE(t,e,r){const n=qt(t);if(n.isPrimaryClient&&r===0||!n.isPrimaryClient&&r===1){const s=[];n.Fa.forEach((i,a)=>{const o=a.view.Z_(e);o.snapshot&&s.push(o.snapshot)}),function(a,o){const l=qt(a);l.onlineState=o;let c=!1;l.queries.forEach((u,f)=>{for(const p of f.j_)p.Z_(o)&&(c=!0)}),c&&tB(l)}(n.eventManager,e),s.length&&n.Ca.d_(s),n.onlineState=e,n.isPrimaryClient&&n.sharedClientState.setOnlineState(e)}}async function Z8(t,e,r){const n=qt(t);n.sharedClientState.updateQueryState(e,"rejected",r);const s=n.Na.get(e),i=s&&s.key;if(i){let a=new tn(dt.comparator);a=a.insert(i,Jr.newNoDocument(i,Qt.min()));const o=tr().add(i),l=new Lv(Qt.min(),new Map,new tn(Wt),a,o);await LT(n,l),n.Oa=n.Oa.remove(i),n.Na.delete(e),nB(n)}else await C2(n.localStore,e,!1).then(()=>_2(n,e,r)).catch(Kc)}async function eH(t,e){const r=qt(t),n=e.batch.batchId;try{const s=await d8(r.localStore,e);kT(r,n,null),jT(r,n),r.sharedClientState.updateMutationState(n,"acknowledged"),await Hp(r,s)}catch(s){await Kc(s)}}async function tH(t,e,r){const n=qt(t);try{const s=await function(a,o){const l=qt(a);return l.persistence.runTransaction("Reject batch","readwrite-primary",c=>{let u;return l.mutationQueue.lookupMutationBatch(c,o).next(f=>(Tt(f!==null),u=f.keys(),l.mutationQueue.removeMutationBatch(c,f))).next(()=>l.mutationQueue.performConsistencyCheck(c)).next(()=>l.documentOverlayCache.removeOverlaysForBatchId(c,u,o)).next(()=>l.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(c,u)).next(()=>l.localDocuments.getDocuments(c,u))})}(n.localStore,e);kT(n,e,r),jT(n,e),n.sharedClientState.updateMutationState(e,"rejected",r),await Hp(n,s)}catch(s){await Kc(s)}}function jT(t,e){(t.ka.get(e)||[]).forEach(r=>{r.resolve()}),t.ka.delete(e)}function kT(t,e,r){const n=qt(t);let s=n.Ba[n.currentUser.toKey()];if(s){const i=s.get(e);i&&(r?i.reject(r):i.resolve(),s=s.remove(e)),n.Ba[n.currentUser.toKey()]=s}}function _2(t,e,r=null){t.sharedClientState.removeLocalQueryTarget(e);for(const n of t.Ma.get(e))t.Fa.delete(n),r&&t.Ca.$a(n,r);t.Ma.delete(e),t.isPrimaryClient&&t.La.gr(e).forEach(n=>{t.La.containsKey(n)||DT(t,n)})}function DT(t,e){t.xa.delete(e.path.canonicalString());const r=t.Oa.get(e);r!==null&&(zb(t.remoteStore,r),t.Oa=t.Oa.remove(e),t.Na.delete(r),nB(t))}function HE(t,e,r){for(const n of r)n instanceof UT?(t.La.addReference(n.key,e),rH(t,n)):n instanceof PT?(Je("SyncEngine","Document no longer in limbo: "+n.key),t.La.removeReference(n.key,e),t.La.containsKey(n.key)||DT(t,n.key)):Bt()}function rH(t,e){const r=e.key,n=r.path.canonicalString();t.Oa.get(r)||t.xa.has(n)||(Je("SyncEngine","New document in limbo: "+r),t.xa.add(n),nB(t))}function nB(t){for(;t.xa.size>0&&t.Oa.size<t.maxConcurrentLimboResolutions;){const e=t.xa.values().next().value;t.xa.delete(e);const r=new dt(pr.fromString(e)),n=t.qa.next();t.Na.set(n,new q8(r)),t.Oa=t.Oa.insert(r,n),_T(t.remoteStore,new _o(ji(kp(r.path)),n,"TargetPurposeLimboResolution",Ui.oe))}}async function Hp(t,e,r){const n=qt(t),s=[],i=[],a=[];n.Fa.isEmpty()||(n.Fa.forEach((o,l)=>{a.push(n.Ka(l,e,r).then(c=>{var u;if((c||r)&&n.isPrimaryClient){const f=c?!c.fromCache:(u=r==null?void 0:r.targetChanges.get(l.targetId))===null||u===void 0?void 0:u.current;n.sharedClientState.updateQueryState(l.targetId,f?"current":"not-current")}if(c){s.push(c);const f=qb.Wi(l.targetId,c);i.push(f)}}))}),await Promise.all(a),n.Ca.d_(s),await async function(l,c){const u=qt(l);try{await u.persistence.runTransaction("notifyLocalViewChanges","readwrite",f=>Se.forEach(c,p=>Se.forEach(p.$i,m=>u.persistence.referenceDelegate.addReference(f,p.targetId,m)).next(()=>Se.forEach(p.Ui,m=>u.persistence.referenceDelegate.removeReference(f,p.targetId,m)))))}catch(f){if(!Sl(f))throw f;Je("LocalStore","Failed to update sequence numbers: "+f)}for(const f of c){const p=f.targetId;if(!f.fromCache){const m=u.os.get(p),b=m.snapshotVersion,B=m.withLastLimboFreeSnapshotVersion(b);u.os=u.os.insert(p,B)}}}(n.localStore,i))}async function nH(t,e){const r=qt(t);if(!r.currentUser.isEqual(e)){Je("SyncEngine","User change. New user:",e.toKey());const n=await bT(r.localStore,e);r.currentUser=e,function(i,a){i.ka.forEach(o=>{o.forEach(l=>{l.reject(new st(Me.CANCELLED,a))})}),i.ka.clear()}(r,"'waitForPendingWrites' promise is rejected due to a user change."),r.sharedClientState.handleUserChange(e,n.removedBatchIds,n.addedBatchIds),await Hp(r,n.hs)}}function sH(t,e){const r=qt(t),n=r.Na.get(e);if(n&&n.va)return tr().add(n.key);{let s=tr();const i=r.Ma.get(e);if(!i)return s;for(const a of i){const o=r.Fa.get(a);s=s.unionWith(o.view.Va)}return s}}function RT(t){const e=qt(t);return e.remoteStore.remoteSyncer.applyRemoteEvent=LT.bind(null,e),e.remoteStore.remoteSyncer.getRemoteKeysForTarget=sH.bind(null,e),e.remoteStore.remoteSyncer.rejectListen=Z8.bind(null,e),e.Ca.d_=O8.bind(null,e.eventManager),e.Ca.$a=H8.bind(null,e.eventManager),e}function MT(t){const e=qt(t);return e.remoteStore.remoteSyncer.applySuccessfulWrite=eH.bind(null,e),e.remoteStore.remoteSyncer.rejectFailedWrite=tH.bind(null,e),e}class pp{constructor(){this.kind="memory",this.synchronizeTabs=!1}async initialize(e){this.serializer=Rv(e.databaseInfo.databaseId),this.sharedClientState=this.Wa(e),this.persistence=this.Ga(e),await this.persistence.start(),this.localStore=this.za(e),this.gcScheduler=this.ja(e,this.localStore),this.indexBackfillerScheduler=this.Ha(e,this.localStore)}ja(e,r){return null}Ha(e,r){return null}za(e){return xT(this.persistence,new yT,e.initialUser,this.serializer)}Ga(e){return new wT(Dv.Zr,this.serializer)}Wa(e){return new CT}async terminate(){var e,r;(e=this.gcScheduler)===null||e===void 0||e.stop(),(r=this.indexBackfillerScheduler)===null||r===void 0||r.stop(),this.sharedClientState.shutdown(),await this.persistence.shutdown()}}pp.provider={build:()=>new pp};class iH extends pp{constructor(e,r,n){super(),this.Ja=e,this.cacheSizeBytes=r,this.forceOwnership=n,this.kind="persistent",this.synchronizeTabs=!1}async initialize(e){await super.initialize(e),await this.Ja.initialize(this,e),await MT(this.Ja.syncEngine),await Op(this.Ja.remoteStore),await this.persistence.yi(()=>(this.gcScheduler&&!this.gcScheduler.started&&this.gcScheduler.start(),this.indexBackfillerScheduler&&!this.indexBackfillerScheduler.started&&this.indexBackfillerScheduler.start(),Promise.resolve()))}za(e){return xT(this.persistence,new yT,e.initialUser,this.serializer)}ja(e,r){const n=this.persistence.referenceDelegate.garbageCollector;return new zO(n,e.asyncQueue,r)}Ha(e,r){const n=new xM(r,this.persistence);return new yM(e.asyncQueue,n)}Ga(e){const r=l8(e.databaseInfo.databaseId,e.databaseInfo.persistenceKey),n=this.cacheSizeBytes!==void 0?Vs.withCacheSize(this.cacheSizeBytes):Vs.DEFAULT;return new Kb(this.synchronizeTabs,r,e.clientId,n,e.asyncQueue,b8(),Xg(),this.serializer,this.sharedClientState,!!this.forceOwnership)}Wa(e){return new CT}}class H0{async initialize(e,r){this.localStore||(this.localStore=e.localStore,this.sharedClientState=e.sharedClientState,this.datastore=this.createDatastore(r),this.remoteStore=this.createRemoteStore(r),this.eventManager=this.createEventManager(r),this.syncEngine=this.createSyncEngine(r,!e.synchronizeTabs),this.sharedClientState.onlineStateHandler=n=>OE(this.syncEngine,n,1),this.remoteStore.remoteSyncer.handleCredentialChange=nH.bind(null,this.syncEngine),await D8(this.remoteStore,this.syncEngine.isPrimaryClient))}createEventManager(e){return function(){return new M8}()}createDatastore(e){const r=Rv(e.databaseInfo.databaseId),n=function(i){return new x8(i)}(e.databaseInfo);return function(i,a,o,l){return new E8(i,a,o,l)}(e.authCredentials,e.appCheckCredentials,n,r)}createRemoteStore(e){return function(n,s,i,a,o){return new N8(n,s,i,a,o)}(this.localStore,this.datastore,e.asyncQueue,r=>OE(this.syncEngine,r,0),function(){return jE.D()?new jE:new v8}())}createSyncEngine(e,r){return function(s,i,a,o,l,c,u){const f=new G8(s,i,a,o,l,c);return u&&(f.Qa=!0),f}(this.localStore,this.remoteStore,this.eventManager,this.sharedClientState,e.initialUser,e.maxConcurrentLimboResolutions,r)}async terminate(){var e,r;await async function(s){const i=qt(s);Je("RemoteStore","RemoteStore shutting down."),i.L_.add(5),await Mp(i),i.k_.shutdown(),i.q_.set("Unknown")}(this.remoteStore),(e=this.datastore)===null||e===void 0||e.terminate(),(r=this.eventManager)===null||r===void 0||r.terminate()}}H0.provider={build:()=>new H0};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class sB{constructor(e){this.observer=e,this.muted=!1}next(e){this.muted||this.observer.next&&this.Ya(this.observer.next,e)}error(e){this.muted||(this.observer.error?this.Ya(this.observer.error,e):Us("Uncaught Error in snapshot listener:",e.toString()))}Za(){this.muted=!0}Ya(e,r){setTimeout(()=>{this.muted||e(r)},0)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class aH{constructor(e){this.datastore=e,this.readVersions=new Map,this.mutations=[],this.committed=!1,this.lastTransactionError=null,this.writtenDocs=new Set}async lookup(e){if(this.ensureCommitNotCalled(),this.mutations.length>0)throw this.lastTransactionError=new st(Me.INVALID_ARGUMENT,"Firestore transactions require all reads to be executed before all writes."),this.lastTransactionError;const r=await async function(s,i){const a=qt(s),o={documents:i.map(f=>hp(a.serializer,f))},l=await a.Lo("BatchGetDocuments",a.serializer.databaseId,pr.emptyPath(),o,i.length),c=new Map;l.forEach(f=>{const p=NO(a.serializer,f);c.set(p.key.toString(),p)});const u=[];return i.forEach(f=>{const p=c.get(f.toString());Tt(!!p),u.push(p)}),u}(this.datastore,e);return r.forEach(n=>this.recordVersion(n)),r}set(e,r){this.write(r.toMutation(e,this.precondition(e))),this.writtenDocs.add(e.toString())}update(e,r){try{this.write(r.toMutation(e,this.preconditionForUpdate(e)))}catch(n){this.lastTransactionError=n}this.writtenDocs.add(e.toString())}delete(e){this.write(new Wd(e,this.precondition(e))),this.writtenDocs.add(e.toString())}async commit(){if(this.ensureCommitNotCalled(),this.lastTransactionError)throw this.lastTransactionError;const e=this.readVersions;this.mutations.forEach(r=>{e.delete(r.key.toString())}),e.forEach((r,n)=>{const s=dt.fromPath(n);this.mutations.push(new Lb(s,this.precondition(s)))}),await async function(n,s){const i=qt(n),a={writes:s.map(o=>fp(i.serializer,o))};await i.Mo("Commit",i.serializer.databaseId,pr.emptyPath(),a)}(this.datastore,this.mutations),this.committed=!0}recordVersion(e){let r;if(e.isFoundDocument())r=e.version;else{if(!e.isNoDocument())throw Bt();r=Qt.min()}const n=this.readVersions.get(e.key.toString());if(n){if(!r.isEqual(n))throw new st(Me.ABORTED,"Document version changed between two reads.")}else this.readVersions.set(e.key.toString(),r)}precondition(e){const r=this.readVersions.get(e.toString());return!this.writtenDocs.has(e.toString())&&r?r.isEqual(Qt.min())?Zr.exists(!1):Zr.updateTime(r):Zr.none()}preconditionForUpdate(e){const r=this.readVersions.get(e.toString());if(!this.writtenDocs.has(e.toString())&&r){if(r.isEqual(Qt.min()))throw new st(Me.INVALID_ARGUMENT,"Can't update a document that doesn't exist.");return Zr.updateTime(r)}return Zr.exists(!0)}write(e){this.ensureCommitNotCalled(),this.mutations.push(e)}ensureCommitNotCalled(){}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class oH{constructor(e,r,n,s,i){this.asyncQueue=e,this.datastore=r,this.options=n,this.updateFunction=s,this.deferred=i,this._u=n.maxAttempts,this.t_=new Gb(this.asyncQueue,"transaction_retry")}au(){this._u-=1,this.uu()}uu(){this.t_.Go(async()=>{const e=new aH(this.datastore),r=this.cu(e);r&&r.then(n=>{this.asyncQueue.enqueueAndForget(()=>e.commit().then(()=>{this.deferred.resolve(n)}).catch(s=>{this.lu(s)}))}).catch(n=>{this.lu(n)})})}cu(e){try{const r=this.updateFunction(e);return!Lp(r)&&r.catch&&r.then?r:(this.deferred.reject(Error("Transaction callback must return a Promise")),null)}catch(r){return this.deferred.reject(r),null}}lu(e){this._u>0&&this.hu(e)?(this._u-=1,this.asyncQueue.enqueueAndForget(()=>(this.uu(),Promise.resolve()))):this.deferred.reject(e)}hu(e){if(e.name==="FirebaseError"){const r=e.code;return r==="aborted"||r==="failed-precondition"||r==="already-exists"||!z4(r)}return!1}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class AH{constructor(e,r,n,s,i){this.authCredentials=e,this.appCheckCredentials=r,this.asyncQueue=n,this.databaseInfo=s,this.user=ns.UNAUTHENTICATED,this.clientId=Nb.newId(),this.authCredentialListener=()=>Promise.resolve(),this.appCheckCredentialListener=()=>Promise.resolve(),this._uninitializedComponentsProvider=i,this.authCredentials.start(n,async a=>{Je("FirestoreClient","Received user=",a.uid),await this.authCredentialListener(a),this.user=a}),this.appCheckCredentials.start(n,a=>(Je("FirestoreClient","Received new app check token=",a),this.appCheckCredentialListener(a,this.user)))}get configuration(){return{asyncQueue:this.asyncQueue,databaseInfo:this.databaseInfo,clientId:this.clientId,authCredentials:this.authCredentials,appCheckCredentials:this.appCheckCredentials,initialUser:this.user,maxConcurrentLimboResolutions:100}}setCredentialChangeListener(e){this.authCredentialListener=e}setAppCheckTokenChangeListener(e){this.appCheckCredentialListener=e}terminate(){this.asyncQueue.enterRestrictedMode();const e=new aa;return this.asyncQueue.enqueueAndForgetEvenWhileRestricted(async()=>{try{this._onlineComponents&&await this._onlineComponents.terminate(),this._offlineComponents&&await this._offlineComponents.terminate(),this.authCredentials.shutdown(),this.appCheckCredentials.shutdown(),e.resolve()}catch(r){const n=Yb(r,"Failed to shutdown persistence");e.reject(n)}}),e.promise}}async function yy(t,e){t.asyncQueue.verifyOperationInProgress(),Je("FirestoreClient","Initializing OfflineComponentProvider");const r=t.configuration;await e.initialize(r);let n=r.initialUser;t.setCredentialChangeListener(async s=>{n.isEqual(s)||(await bT(e.localStore,s),n=s)}),e.persistence.setDatabaseDeletedListener(()=>t.terminate()),t._offlineComponents=e}async function VE(t,e){t.asyncQueue.verifyOperationInProgress();const r=await lH(t);Je("FirestoreClient","Initializing OnlineComponentProvider"),await e.initialize(r,t.configuration),t.setCredentialChangeListener(n=>kE(e.remoteStore,n)),t.setAppCheckTokenChangeListener((n,s)=>kE(e.remoteStore,s)),t._onlineComponents=e}async function lH(t){if(!t._offlineComponents)if(t._uninitializedComponentsProvider){Je("FirestoreClient","Using user provided OfflineComponentProvider");try{await yy(t,t._uninitializedComponentsProvider._offline)}catch(e){const r=e;if(!function(s){return s.name==="FirebaseError"?s.code===Me.FAILED_PRECONDITION||s.code===Me.UNIMPLEMENTED:!(typeof DOMException<"u"&&s instanceof DOMException)||s.code===22||s.code===20||s.code===11}(r))throw r;fl("Error using user provided cache. Falling back to memory cache: "+r),await yy(t,new pp)}}else Je("FirestoreClient","Using default OfflineComponentProvider"),await yy(t,new pp);return t._offlineComponents}async function iB(t){return t._onlineComponents||(t._uninitializedComponentsProvider?(Je("FirestoreClient","Using user provided OnlineComponentProvider"),await VE(t,t._uninitializedComponentsProvider._online)):(Je("FirestoreClient","Using default OnlineComponentProvider"),await VE(t,new H0))),t._onlineComponents}function cH(t){return iB(t).then(e=>e.syncEngine)}function uH(t){return iB(t).then(e=>e.datastore)}async function V0(t){const e=await iB(t),r=e.eventManager;return r.onListen=z8.bind(null,e.syncEngine),r.onUnlisten=X8.bind(null,e.syncEngine),r.onFirstRemoteStoreListen=$8.bind(null,e.syncEngine),r.onLastRemoteStoreUnlisten=J8.bind(null,e.syncEngine),r}function dH(t,e,r={}){const n=new aa;return t.asyncQueue.enqueueAndForget(async()=>function(i,a,o,l,c){const u=new sB({next:p=>{u.Za(),a.enqueueAndForget(()=>eB(i,f));const m=p.docs.has(o);!m&&p.fromCache?c.reject(new st(Me.UNAVAILABLE,"Failed to get document because the client is offline.")):m&&p.fromCache&&l&&l.source==="server"?c.reject(new st(Me.UNAVAILABLE,'Failed to get document from server. (However, this document does exist in the local cache. Run again without setting source to "server" to retrieve the cached document.)')):c.resolve(p)},error:p=>c.reject(p)}),f=new rB(kp(o.path),u,{includeMetadataChanges:!0,_a:!0});return Zb(i,f)}(await V0(t),t.asyncQueue,e,r,n)),n.promise}function hH(t,e,r={}){const n=new aa;return t.asyncQueue.enqueueAndForget(async()=>function(i,a,o,l,c){const u=new sB({next:p=>{u.Za(),a.enqueueAndForget(()=>eB(i,f)),p.fromCache&&l.source==="server"?c.reject(new st(Me.UNAVAILABLE,'Failed to get documents from server. (However, these documents may exist in the local cache. Run again without setting source to "server" to retrieve the cached documents.)')):c.resolve(p)},error:p=>c.reject(p)}),f=new rB(o,u,{includeMetadataChanges:!0,_a:!0});return Zb(i,f)}(await V0(t),t.asyncQueue,e,r,n)),n.promise}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function OT(t){const e={};return t.timeoutSeconds!==void 0&&(e.timeoutSeconds=t.timeoutSeconds),e}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const KE=new Map;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function HT(t,e,r){if(!r)throw new st(Me.INVALID_ARGUMENT,`Function ${t}() cannot be called with an empty ${e}.`)}function VT(t,e,r,n){if(e===!0&&n===!0)throw new st(Me.INVALID_ARGUMENT,`${t} and ${r} cannot be used together.`)}function qE(t){if(!dt.isDocumentKey(t))throw new st(Me.INVALID_ARGUMENT,`Invalid document reference. Document references must have an even number of segments, but ${t} has ${t.length}.`)}function GE(t){if(dt.isDocumentKey(t))throw new st(Me.INVALID_ARGUMENT,`Invalid collection reference. Collection references must have an odd number of segments, but ${t} has ${t.length}.`)}function Ov(t){if(t===void 0)return"undefined";if(t===null)return"null";if(typeof t=="string")return t.length>20&&(t=`${t.substring(0,20)}...`),JSON.stringify(t);if(typeof t=="number"||typeof t=="boolean")return""+t;if(typeof t=="object"){if(t instanceof Array)return"an array";{const e=function(n){return n.constructor?n.constructor.name:null}(t);return e?`a custom ${e} object`:"an object"}}return typeof t=="function"?"a function":Bt()}function $n(t,e){if("_delegate"in t&&(t=t._delegate),!(t instanceof e)){if(e.name===t.constructor.name)throw new st(Me.INVALID_ARGUMENT,"Type does not match the expected instance. Did you pass a reference from a different Firestore SDK?");{const r=Ov(t);throw new st(Me.INVALID_ARGUMENT,`Expected type '${e.name}', but it was: ${r}`)}}return t}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class zE{constructor(e){var r,n;if(e.host===void 0){if(e.ssl!==void 0)throw new st(Me.INVALID_ARGUMENT,"Can't provide ssl option if host option is not set");this.host="firestore.googleapis.com",this.ssl=!0}else this.host=e.host,this.ssl=(r=e.ssl)===null||r===void 0||r;if(this.credentials=e.credentials,this.ignoreUndefinedProperties=!!e.ignoreUndefinedProperties,this.localCache=e.localCache,e.cacheSizeBytes===void 0)this.cacheSizeBytes=41943040;else{if(e.cacheSizeBytes!==-1&&e.cacheSizeBytes<1048576)throw new st(Me.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");this.cacheSizeBytes=e.cacheSizeBytes}VT("experimentalForceLongPolling",e.experimentalForceLongPolling,"experimentalAutoDetectLongPolling",e.experimentalAutoDetectLongPolling),this.experimentalForceLongPolling=!!e.experimentalForceLongPolling,this.experimentalForceLongPolling?this.experimentalAutoDetectLongPolling=!1:e.experimentalAutoDetectLongPolling===void 0?this.experimentalAutoDetectLongPolling=!0:this.experimentalAutoDetectLongPolling=!!e.experimentalAutoDetectLongPolling,this.experimentalLongPollingOptions=OT((n=e.experimentalLongPollingOptions)!==null&&n!==void 0?n:{}),function(i){if(i.timeoutSeconds!==void 0){if(isNaN(i.timeoutSeconds))throw new st(Me.INVALID_ARGUMENT,`invalid long polling timeout: ${i.timeoutSeconds} (must not be NaN)`);if(i.timeoutSeconds<5)throw new st(Me.INVALID_ARGUMENT,`invalid long polling timeout: ${i.timeoutSeconds} (minimum allowed value is 5)`);if(i.timeoutSeconds>30)throw new st(Me.INVALID_ARGUMENT,`invalid long polling timeout: ${i.timeoutSeconds} (maximum allowed value is 30)`)}}(this.experimentalLongPollingOptions),this.useFetchStreams=!!e.useFetchStreams}isEqual(e){return this.host===e.host&&this.ssl===e.ssl&&this.credentials===e.credentials&&this.cacheSizeBytes===e.cacheSizeBytes&&this.experimentalForceLongPolling===e.experimentalForceLongPolling&&this.experimentalAutoDetectLongPolling===e.experimentalAutoDetectLongPolling&&function(n,s){return n.timeoutSeconds===s.timeoutSeconds}(this.experimentalLongPollingOptions,e.experimentalLongPollingOptions)&&this.ignoreUndefinedProperties===e.ignoreUndefinedProperties&&this.useFetchStreams===e.useFetchStreams}}class Hv{constructor(e,r,n,s){this._authCredentials=e,this._appCheckCredentials=r,this._databaseId=n,this._app=s,this.type="firestore-lite",this._persistenceKey="(lite)",this._settings=new zE({}),this._settingsFrozen=!1,this._terminateTask="notTerminated"}get app(){if(!this._app)throw new st(Me.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._app}get _initialized(){return this._settingsFrozen}get _terminated(){return this._terminateTask!=="notTerminated"}_setSettings(e){if(this._settingsFrozen)throw new st(Me.FAILED_PRECONDITION,"Firestore has already been started and its settings can no longer be changed. You can only modify settings before calling any other methods on a Firestore object.");this._settings=new zE(e),e.credentials!==void 0&&(this._authCredentials=function(n){if(!n)return new d4;switch(n.type){case"firstParty":return new dM(n.sessionIndex||"0",n.iamToken||null,n.authTokenFactory||null);case"provider":return n.client;default:throw new st(Me.INVALID_ARGUMENT,"makeAuthCredentialsProvider failed due to invalid credential type")}}(e.credentials))}_getSettings(){return this._settings}_freezeSettings(){return this._settingsFrozen=!0,this._settings}_delete(){return this._terminateTask==="notTerminated"&&(this._terminateTask=this._terminate()),this._terminateTask}async _restart(){this._terminateTask==="notTerminated"?await this._terminate():this._terminateTask="notTerminated"}toJSON(){return{app:this._app,databaseId:this._databaseId,settings:this._settings}}_terminate(){return function(r){const n=KE.get(r);n&&(Je("ComponentProvider","Removing Datastore"),KE.delete(r),n.terminate())}(this),Promise.resolve()}}function KT(t,e,r,n={}){var s;const i=(t=$n(t,Hv))._getSettings(),a=`${e}:${r}`;if(i.host!=="firestore.googleapis.com"&&i.host!==a&&fl("Host has been set in both settings() and connectFirestoreEmulator(), emulator host will be used."),t._setSettings(Object.assign(Object.assign({},i),{host:a,ssl:!1})),n.mockUserToken){let o,l;if(typeof n.mockUserToken=="string")o=n.mockUserToken,l=ns.MOCK_USER;else{o=Sk(n.mockUserToken,(s=t._app)===null||s===void 0?void 0:s.options.projectId);const c=n.mockUserToken.sub||n.mockUserToken.user_id;if(!c)throw new st(Me.INVALID_ARGUMENT,"mockUserToken must contain 'sub' or 'user_id' field!");l=new ns(c)}t._authCredentials=new lM(new u4(o,l))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ka{constructor(e,r,n){this.converter=r,this._query=n,this.type="query",this.firestore=e}withConverter(e){return new Ka(this.firestore,e,this._query)}}class Wn{constructor(e,r,n){this.converter=r,this._key=n,this.type="document",this.firestore=e}get _path(){return this._key.path}get id(){return this._key.path.lastSegment()}get path(){return this._key.path.canonicalString()}get parent(){return new Uo(this.firestore,this.converter,this._key.path.popLast())}withConverter(e){return new Wn(this.firestore,e,this._key)}}class Uo extends Ka{constructor(e,r,n){super(e,r,kp(n)),this._path=n,this.type="collection"}get id(){return this._query.path.lastSegment()}get path(){return this._query.path.canonicalString()}get parent(){const e=this._path.popLast();return e.isEmpty()?null:new Wn(this.firestore,null,new dt(e))}withConverter(e){return new Uo(this.firestore,e,this._path)}}function ot(t,e,...r){if(t=dn(t),HT("collection","path",e),t instanceof Hv){const n=pr.fromString(e,...r);return GE(n),new Uo(t,null,n)}{if(!(t instanceof Wn||t instanceof Uo))throw new st(Me.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const n=t._path.child(pr.fromString(e,...r));return GE(n),new Uo(t.firestore,null,n)}}function Lt(t,e,...r){if(t=dn(t),arguments.length===1&&(e=Nb.newId()),HT("doc","path",e),t instanceof Hv){const n=pr.fromString(e,...r);return qE(n),new Wn(t,null,new dt(n))}{if(!(t instanceof Wn||t instanceof Uo))throw new st(Me.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const n=t._path.child(pr.fromString(e,...r));return qE(n),new Wn(t.firestore,t instanceof Uo?t.converter:null,new dt(n))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class $E{constructor(e=Promise.resolve()){this.Pu=[],this.Iu=!1,this.Tu=[],this.Eu=null,this.du=!1,this.Au=!1,this.Ru=[],this.t_=new Gb(this,"async_queue_retry"),this.Vu=()=>{const n=Xg();n&&Je("AsyncQueue","Visibility state changed to "+n.visibilityState),this.t_.jo()},this.mu=e;const r=Xg();r&&typeof r.addEventListener=="function"&&r.addEventListener("visibilitychange",this.Vu)}get isShuttingDown(){return this.Iu}enqueueAndForget(e){this.enqueue(e)}enqueueAndForgetEvenWhileRestricted(e){this.fu(),this.gu(e)}enterRestrictedMode(e){if(!this.Iu){this.Iu=!0,this.Au=e||!1;const r=Xg();r&&typeof r.removeEventListener=="function"&&r.removeEventListener("visibilitychange",this.Vu)}}enqueue(e){if(this.fu(),this.Iu)return new Promise(()=>{});const r=new aa;return this.gu(()=>this.Iu&&this.Au?Promise.resolve():(e().then(r.resolve,r.reject),r.promise)).then(()=>r.promise)}enqueueRetryable(e){this.enqueueAndForget(()=>(this.Pu.push(e),this.pu()))}async pu(){if(this.Pu.length!==0){try{await this.Pu[0](),this.Pu.shift(),this.t_.reset()}catch(e){if(!Sl(e))throw e;Je("AsyncQueue","Operation failed with retryable error: "+e)}this.Pu.length>0&&this.t_.Go(()=>this.pu())}}gu(e){const r=this.mu.then(()=>(this.du=!0,e().catch(n=>{this.Eu=n,this.du=!1;const s=function(a){let o=a.message||"";return a.stack&&(o=a.stack.includes(a.message)?a.stack:a.message+`
`+a.stack),o}(n);throw Us("INTERNAL UNHANDLED ERROR: ",s),n}).then(n=>(this.du=!1,n))));return this.mu=r,r}enqueueAfterDelay(e,r,n){this.fu(),this.Ru.indexOf(e)>-1&&(r=0);const s=Jb.createAndSchedule(this,e,r,n,i=>this.yu(i));return this.Tu.push(s),s}fu(){this.Eu&&Bt()}verifyOperationInProgress(){}async wu(){let e;do e=this.mu,await e;while(e!==this.mu)}Su(e){for(const r of this.Tu)if(r.timerId===e)return!0;return!1}bu(e){return this.wu().then(()=>{this.Tu.sort((r,n)=>r.targetTimeMs-n.targetTimeMs);for(const r of this.Tu)if(r.skipDelay(),e!=="all"&&r.timerId===e)break;return this.wu()})}Du(e){this.Ru.push(e)}yu(e){const r=this.Tu.indexOf(e);this.Tu.splice(r,1)}}function WE(t){return function(r,n){if(typeof r!="object"||r===null)return!1;const s=r;for(const i of n)if(i in s&&typeof s[i]=="function")return!0;return!1}(t,["next","error","complete"])}class hi extends Hv{constructor(e,r,n,s){super(e,r,n,s),this.type="firestore",this._queue=new $E,this._persistenceKey=(s==null?void 0:s.name)||"[DEFAULT]"}async _terminate(){if(this._firestoreClient){const e=this._firestoreClient.terminate();this._queue=new $E(e),this._firestoreClient=void 0,await e}}}function qT(t,e){const r=typeof t=="object"?t:mb(),n=typeof t=="string"?t:"(default)",s=fb(r,"firestore").getImmediate({identifier:n});if(!s._initialized){const i=Nk("firestore");i&&KT(s,...i)}return s}function zc(t){if(t._terminated)throw new st(Me.FAILED_PRECONDITION,"The client has already been terminated.");return t._firestoreClient||GT(t),t._firestoreClient}function GT(t){var e,r,n;const s=t._freezeSettings(),i=function(o,l,c,u){return new VM(o,l,c,u.host,u.ssl,u.experimentalForceLongPolling,u.experimentalAutoDetectLongPolling,OT(u.experimentalLongPollingOptions),u.useFetchStreams)}(t._databaseId,((e=t._app)===null||e===void 0?void 0:e.options.appId)||"",t._persistenceKey,s);t._componentsProvider||!((r=s.localCache)===null||r===void 0)&&r._offlineComponentProvider&&(!((n=s.localCache)===null||n===void 0)&&n._onlineComponentProvider)&&(t._componentsProvider={_offline:s.localCache._offlineComponentProvider,_online:s.localCache._onlineComponentProvider}),t._firestoreClient=new AH(t._authCredentials,t._appCheckCredentials,t._queue,i,t._componentsProvider&&function(o){const l=o==null?void 0:o._online.build();return{_offline:o==null?void 0:o._offline.build(l),_online:l}}(t._componentsProvider))}function zT(t,e){fl("enableIndexedDbPersistence() will be deprecated in the future, you can use `FirestoreSettings.cache` instead.");const r=t._freezeSettings();return fH(t,H0.provider,{build:n=>new iH(n,r.cacheSizeBytes,void 0)}),Promise.resolve()}function fH(t,e,r){if((t=$n(t,hi))._firestoreClient||t._terminated)throw new st(Me.FAILED_PRECONDITION,"Firestore has already been started and persistence can no longer be enabled. You can only enable persistence before calling any other methods on a Firestore object.");if(t._componentsProvider||t._getSettings().localCache)throw new st(Me.FAILED_PRECONDITION,"SDK cache is already specified.");t._componentsProvider={_online:e,_offline:r},GT(t)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class wl{constructor(e){this._byteString=e}static fromBase64String(e){try{return new wl(Bn.fromBase64String(e))}catch(r){throw new st(Me.INVALID_ARGUMENT,"Failed to construct data from Base64 string: "+r)}}static fromUint8Array(e){return new wl(Bn.fromUint8Array(e))}toBase64(){return this._byteString.toBase64()}toUint8Array(){return this._byteString.toUint8Array()}toString(){return"Bytes(base64: "+this.toBase64()+")"}isEqual(e){return this._byteString.isEqual(e._byteString)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class $c{constructor(...e){for(let r=0;r<e.length;++r)if(e[r].length===0)throw new st(Me.INVALID_ARGUMENT,"Invalid field name at argument $(i + 1). Field names must not be empty.");this._internalPath=new Yr(e)}isEqual(e){return this._internalPath.isEqual(e._internalPath)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Vv{constructor(e){this._methodName=e}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Kv{constructor(e,r){if(!isFinite(e)||e<-90||e>90)throw new st(Me.INVALID_ARGUMENT,"Latitude must be a number between -90 and 90, but was: "+e);if(!isFinite(r)||r<-180||r>180)throw new st(Me.INVALID_ARGUMENT,"Longitude must be a number between -180 and 180, but was: "+r);this._lat=e,this._long=r}get latitude(){return this._lat}get longitude(){return this._long}isEqual(e){return this._lat===e._lat&&this._long===e._long}toJSON(){return{latitude:this._lat,longitude:this._long}}_compareTo(e){return Wt(this._lat,e._lat)||Wt(this._long,e._long)}}/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class qv{constructor(e){this._values=(e||[]).map(r=>r)}toArray(){return this._values.map(e=>e)}isEqual(e){return function(n,s){if(n.length!==s.length)return!1;for(let i=0;i<n.length;++i)if(n[i]!==s[i])return!1;return!0}(this._values,e._values)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const pH=/^__.*__$/;class mH{constructor(e,r,n){this.data=e,this.fieldMask=r,this.fieldTransforms=n}toMutation(e,r){return this.fieldMask!==null?new Go(e,this.data,this.fieldMask,r,this.fieldTransforms):new $d(e,this.data,r,this.fieldTransforms)}}class $T{constructor(e,r,n){this.data=e,this.fieldMask=r,this.fieldTransforms=n}toMutation(e,r){return new Go(e,this.data,this.fieldMask,r,this.fieldTransforms)}}function WT(t){switch(t){case 0:case 2:case 1:return!0;case 3:case 4:return!1;default:throw Bt()}}class aB{constructor(e,r,n,s,i,a){this.settings=e,this.databaseId=r,this.serializer=n,this.ignoreUndefinedProperties=s,i===void 0&&this.vu(),this.fieldTransforms=i||[],this.fieldMask=a||[]}get path(){return this.settings.path}get Cu(){return this.settings.Cu}Fu(e){return new aB(Object.assign(Object.assign({},this.settings),e),this.databaseId,this.serializer,this.ignoreUndefinedProperties,this.fieldTransforms,this.fieldMask)}Mu(e){var r;const n=(r=this.path)===null||r===void 0?void 0:r.child(e),s=this.Fu({path:n,xu:!1});return s.Ou(e),s}Nu(e){var r;const n=(r=this.path)===null||r===void 0?void 0:r.child(e),s=this.Fu({path:n,xu:!1});return s.vu(),s}Lu(e){return this.Fu({path:void 0,xu:!0})}Bu(e){return K0(e,this.settings.methodName,this.settings.ku||!1,this.path,this.settings.qu)}contains(e){return this.fieldMask.find(r=>e.isPrefixOf(r))!==void 0||this.fieldTransforms.find(r=>e.isPrefixOf(r.field))!==void 0}vu(){if(this.path)for(let e=0;e<this.path.length;e++)this.Ou(this.path.get(e))}Ou(e){if(e.length===0)throw this.Bu("Document fields must not be empty");if(WT(this.Cu)&&pH.test(e))throw this.Bu('Document fields cannot begin and end with "__"')}}class gH{constructor(e,r,n){this.databaseId=e,this.ignoreUndefinedProperties=r,this.serializer=n||Rv(e)}Qu(e,r,n,s=!1){return new aB({Cu:e,methodName:r,qu:n,path:Yr.emptyPath(),xu:!1,ku:s},this.databaseId,this.serializer,this.ignoreUndefinedProperties)}}function Jd(t){const e=t._freezeSettings(),r=Rv(t._databaseId);return new gH(t._databaseId,!!e.ignoreUndefinedProperties,r)}function Gv(t,e,r,n,s,i={}){const a=t.Qu(i.merge||i.mergeFields?2:0,e,r,s);lB("Data must be an object, but it was:",a,n);const o=XT(n,a);let l,c;if(i.merge)l=new zs(a.fieldMask),c=a.fieldTransforms;else if(i.mergeFields){const u=[];for(const f of i.mergeFields){const p=N2(e,f,r);if(!a.contains(p))throw new st(Me.INVALID_ARGUMENT,`Field '${p}' is specified in your field mask but missing from your input data.`);YT(u,p)||u.push(p)}l=new zs(u),c=a.fieldTransforms.filter(f=>l.covers(f.field))}else l=null,c=a.fieldTransforms;return new mH(new as(o),l,c)}class zv extends Vv{_toFieldTransform(e){if(e.Cu!==2)throw e.Cu===1?e.Bu(`${this._methodName}() can only appear at the top level of your update data`):e.Bu(`${this._methodName}() cannot be used with set() unless you pass {merge:true}`);return e.fieldMask.push(e.path),null}isEqual(e){return e instanceof zv}}function oB(t,e,r,n){const s=t.Qu(1,e,r);lB("Data must be an object, but it was:",s,n);const i=[],a=as.empty();qc(n,(l,c)=>{const u=cB(e,l,r);c=dn(c);const f=s.Nu(u);if(c instanceof zv)i.push(u);else{const p=Vp(c,f);p!=null&&(i.push(u),a.set(u,p))}});const o=new zs(i);return new $T(a,o,s.fieldTransforms)}function AB(t,e,r,n,s,i){const a=t.Qu(1,e,r),o=[N2(e,n,r)],l=[s];if(i.length%2!=0)throw new st(Me.INVALID_ARGUMENT,`Function ${e}() needs to be called with an even number of arguments that alternate between field names and values.`);for(let p=0;p<i.length;p+=2)o.push(N2(e,i[p])),l.push(i[p+1]);const c=[],u=as.empty();for(let p=o.length-1;p>=0;--p)if(!YT(c,o[p])){const m=o[p];let b=l[p];b=dn(b);const B=a.Nu(m);if(b instanceof zv)c.push(m);else{const _=Vp(b,B);_!=null&&(c.push(m),u.set(m,_))}}const f=new zs(c);return new $T(u,f,a.fieldTransforms)}function vH(t,e,r,n=!1){return Vp(r,t.Qu(n?4:3,e))}function Vp(t,e){if(JT(t=dn(t)))return lB("Unsupported field value:",e,t),XT(t,e);if(t instanceof Vv)return function(n,s){if(!WT(s.Cu))throw s.Bu(`${n._methodName}() can only be used with update() and set()`);if(!s.path)throw s.Bu(`${n._methodName}() is not currently supported inside arrays`);const i=n._toFieldTransform(s);i&&s.fieldTransforms.push(i)}(t,e),null;if(t===void 0&&e.ignoreUndefinedProperties)return null;if(e.path&&e.fieldMask.push(e.path),t instanceof Array){if(e.settings.xu&&e.Cu!==4)throw e.Bu("Nested arrays are not supported");return function(n,s){const i=[];let a=0;for(const o of n){let l=Vp(o,s.Lu(a));l==null&&(l={nullValue:"NULL_VALUE"}),i.push(l),a++}return{arrayValue:{values:i}}}(t,e)}return function(n,s){if((n=dn(n))===null)return{nullValue:"NULL_VALUE"};if(typeof n=="number")return lO(s.serializer,n);if(typeof n=="boolean")return{booleanValue:n};if(typeof n=="string")return{stringValue:n};if(n instanceof Date){const i=Dt.fromDate(n);return{timestampValue:Ld(s.serializer,i)}}if(n instanceof Dt){const i=new Dt(n.seconds,1e3*Math.floor(n.nanoseconds/1e3));return{timestampValue:Ld(s.serializer,i)}}if(n instanceof Kv)return{geoPointValue:{latitude:n.latitude,longitude:n.longitude}};if(n instanceof wl)return{bytesValue:J4(s.serializer,n._byteString)};if(n instanceof Wn){const i=s.databaseId,a=n.firestore._databaseId;if(!a.isEqual(i))throw s.Bu(`Document reference is for database ${a.projectId}/${a.database} but should be for database ${i.projectId}/${i.database}`);return{referenceValue:Mb(n.firestore._databaseId||s.databaseId,n._key.path)}}if(n instanceof qv)return function(a,o){return{mapValue:{fields:{__type__:{stringValue:"__vector__"},value:{arrayValue:{values:a.toArray().map(l=>{if(typeof l!="number")throw o.Bu("VectorValues must only contain numeric values.");return Qb(o.serializer,l)})}}}}}}(n,s);throw s.Bu(`Unsupported field value: ${Ov(n)}`)}(t,e)}function XT(t,e){const r={};return b4(t)?e.path&&e.path.length>0&&e.fieldMask.push(e.path):qc(t,(n,s)=>{const i=Vp(s,e.Mu(n));i!=null&&(r[n]=i)}),{mapValue:{fields:r}}}function JT(t){return!(typeof t!="object"||t===null||t instanceof Array||t instanceof Date||t instanceof Dt||t instanceof Kv||t instanceof wl||t instanceof Wn||t instanceof Vv||t instanceof qv)}function lB(t,e,r){if(!JT(r)||!function(s){return typeof s=="object"&&s!==null&&(Object.getPrototypeOf(s)===Object.prototype||Object.getPrototypeOf(s)===null)}(r)){const n=Ov(r);throw n==="an object"?e.Bu(t+" a custom object"):e.Bu(t+" "+n)}}function N2(t,e,r){if((e=dn(e))instanceof $c)return e._internalPath;if(typeof e=="string")return cB(t,e);throw K0("Field path arguments must be of type string or ",t,!1,void 0,r)}const wH=new RegExp("[~\\*/\\[\\]]");function cB(t,e,r){if(e.search(wH)>=0)throw K0(`Invalid field path (${e}). Paths must not contain '~', '*', '/', '[', or ']'`,t,!1,void 0,r);try{return new $c(...e.split("."))._internalPath}catch{throw K0(`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`,t,!1,void 0,r)}}function K0(t,e,r,n,s){const i=n&&!n.isEmpty(),a=s!==void 0;let o=`Function ${e}() called with invalid data`;r&&(o+=" (via `toFirestore()`)"),o+=". ";let l="";return(i||a)&&(l+=" (found",i&&(l+=` in field ${n}`),a&&(l+=` in document ${s}`),l+=")"),new st(Me.INVALID_ARGUMENT,o+t+l)}function YT(t,e){return t.some(r=>r.isEqual(e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class q0{constructor(e,r,n,s,i){this._firestore=e,this._userDataWriter=r,this._key=n,this._document=s,this._converter=i}get id(){return this._key.path.lastSegment()}get ref(){return new Wn(this._firestore,this._converter,this._key)}exists(){return this._document!==null}data(){if(this._document){if(this._converter){const e=new yH(this._firestore,this._userDataWriter,this._key,this._document,null);return this._converter.fromFirestore(e)}return this._userDataWriter.convertValue(this._document.data.value)}}get(e){if(this._document){const r=this._document.data.field($v("DocumentSnapshot.get",e));if(r!==null)return this._userDataWriter.convertValue(r)}}}class yH extends q0{data(){return super.data()}}function $v(t,e){return typeof e=="string"?cB(t,e):e instanceof $c?e._internalPath:e._delegate._internalPath}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ZT(t){if(t.limitType==="L"&&t.explicitOrderBy.length===0)throw new st(Me.UNIMPLEMENTED,"limitToLast() queries require specifying at least one orderBy() clause")}class uB{}class Wv extends uB{}function Xt(t,e,...r){let n=[];e instanceof uB&&n.push(e),n=n.concat(r),function(i){const a=i.filter(l=>l instanceof Xv).length,o=i.filter(l=>l instanceof Kp).length;if(a>1||a>0&&o>0)throw new st(Me.INVALID_ARGUMENT,"InvalidQuery. When using composite filters, you cannot use more than one filter at the top level. Consider nesting the multiple filters within an `and(...)` statement. For example: change `query(query, where(...), or(...))` to `query(query, and(where(...), or(...)))`.")}(n);for(const s of n)t=s._apply(t);return t}class Kp extends Wv{constructor(e,r,n){super(),this._field=e,this._op=r,this._value=n,this.type="where"}static _create(e,r,n){return new Kp(e,r,n)}_apply(e){const r=this._parse(e);return tU(e._query,r),new Ka(e.firestore,e.converter,m2(e._query,r))}_parse(e){const r=Jd(e.firestore);return function(i,a,o,l,c,u,f){let p;if(c.isKeyField()){if(u==="array-contains"||u==="array-contains-any")throw new st(Me.INVALID_ARGUMENT,`Invalid Query. You can't perform '${u}' queries on documentId().`);if(u==="in"||u==="not-in"){JE(f,u);const m=[];for(const b of f)m.push(XE(l,i,b));p={arrayValue:{values:m}}}else p=XE(l,i,f)}else u!=="in"&&u!=="not-in"&&u!=="array-contains-any"||JE(f,u),p=vH(o,a,f,u==="in"||u==="not-in");return lr.create(c,u,p)}(e._query,"where",r,e.firestore._databaseId,this._field,this._op,this._value)}}function rr(t,e,r){const n=e,s=$v("where",t);return Kp._create(s,n,r)}class Xv extends uB{constructor(e,r){super(),this.type=e,this._queryConstraints=r}static _create(e,r){return new Xv(e,r)}_parse(e){const r=this._queryConstraints.map(n=>n._parse(e)).filter(n=>n.getFilters().length>0);return r.length===1?r[0]:_r.create(r,this._getOperator())}_apply(e){const r=this._parse(e);return r.getFilters().length===0?e:(function(s,i){let a=s;const o=i.getFlattenedFilters();for(const l of o)tU(a,l),a=m2(a,l)}(e._query,r),new Ka(e.firestore,e.converter,m2(e._query,r)))}_getQueryConstraints(){return this._queryConstraints}_getOperator(){return this.type==="and"?"and":"or"}}class Jv extends Wv{constructor(e,r){super(),this._field=e,this._direction=r,this.type="orderBy"}static _create(e,r){return new Jv(e,r)}_apply(e){const r=function(s,i,a){if(s.startAt!==null)throw new st(Me.INVALID_ARGUMENT,"Invalid query. You must not call startAt() or startAfter() before calling orderBy().");if(s.endAt!==null)throw new st(Me.INVALID_ARGUMENT,"Invalid query. You must not call endAt() or endBefore() before calling orderBy().");return new cp(i,a)}(e._query,this._field,this._direction);return new Ka(e.firestore,e.converter,function(s,i){const a=s.explicitOrderBy.concat([i]);return new zd(s.path,s.collectionGroup,a,s.filters.slice(),s.limit,s.limitType,s.startAt,s.endAt)}(e._query,r))}}function fi(t,e="asc"){const r=e,n=$v("orderBy",t);return Jv._create(n,r)}class Yv extends Wv{constructor(e,r,n){super(),this.type=e,this._limit=r,this._limitType=n}static _create(e,r,n){return new Yv(e,r,n)}_apply(e){return new Ka(e.firestore,e.converter,k0(e._query,this._limit,this._limitType))}}function eU(t){return Yv._create("limit",t,"F")}function XE(t,e,r){if(typeof(r=dn(r))=="string"){if(r==="")throw new st(Me.INVALID_ARGUMENT,"Invalid query. When querying with documentId(), you must provide a valid document ID, but it was an empty string.");if(!Q4(e)&&r.indexOf("/")!==-1)throw new st(Me.INVALID_ARGUMENT,`Invalid query. When querying a collection by documentId(), you must provide a plain document ID, but '${r}' contains a '/' character.`);const n=e.path.child(pr.fromString(r));if(!dt.isDocumentKey(n))throw new st(Me.INVALID_ARGUMENT,`Invalid query. When querying a collection group by documentId(), the value provided must result in a valid document path, but '${n}' is not because it has an odd number of segments (${n.length}).`);return Ap(t,new dt(n))}if(r instanceof Wn)return Ap(t,r._key);throw new st(Me.INVALID_ARGUMENT,`Invalid query. When querying with documentId(), you must provide a valid string or a DocumentReference, but it was: ${Ov(r)}.`)}function JE(t,e){if(!Array.isArray(t)||t.length===0)throw new st(Me.INVALID_ARGUMENT,`Invalid Query. A non-empty array is required for '${e.toString()}' filters.`)}function tU(t,e){const r=function(s,i){for(const a of s)for(const o of a.getFlattenedFilters())if(i.indexOf(o.op)>=0)return o.op;return null}(t.filters,function(s){switch(s){case"!=":return["!=","not-in"];case"array-contains-any":case"in":return["not-in"];case"not-in":return["array-contains-any","in","not-in","!="];default:return[]}}(e.op));if(r!==null)throw r===e.op?new st(Me.INVALID_ARGUMENT,`Invalid query. You cannot use more than one '${e.op.toString()}' filter.`):new st(Me.INVALID_ARGUMENT,`Invalid query. You cannot use '${e.op.toString()}' filters with '${r.toString()}' filters.`)}class dB{convertValue(e,r="none"){switch(jc(e)){case 0:return null;case 1:return e.booleanValue;case 2:return Wr(e.integerValue||e.doubleValue);case 3:return this.convertTimestamp(e.timestampValue);case 4:return this.convertServerTimestamp(e,r);case 5:return e.stringValue;case 6:return this.convertBytes(pl(e.bytesValue));case 7:return this.convertReference(e.referenceValue);case 8:return this.convertGeoPoint(e.geoPointValue);case 9:return this.convertArray(e.arrayValue,r);case 11:return this.convertObject(e.mapValue,r);case 10:return this.convertVectorValue(e.mapValue);default:throw Bt()}}convertObject(e,r){return this.convertObjectMap(e.fields,r)}convertObjectMap(e,r="none"){const n={};return qc(e,(s,i)=>{n[s]=this.convertValue(i,r)}),n}convertVectorValue(e){var r,n,s;const i=(s=(n=(r=e.fields)===null||r===void 0?void 0:r.value.arrayValue)===null||n===void 0?void 0:n.values)===null||s===void 0?void 0:s.map(a=>Wr(a.doubleValue));return new qv(i)}convertGeoPoint(e){return new Kv(Wr(e.latitude),Wr(e.longitude))}convertArray(e,r){return(e.values||[]).map(n=>this.convertValue(n,r))}convertServerTimestamp(e,r){switch(r){case"previous":const n=Ub(e);return n==null?null:this.convertValue(n,r);case"estimate":return this.convertTimestamp(ap(e));default:return null}}convertTimestamp(e){const r=Ho(e);return new Dt(r.seconds,r.nanos)}convertDocumentKey(e,r){const n=pr.fromString(e);Tt(oT(n));const s=new ml(n.get(1),n.get(3)),i=new dt(n.popFirst(5));return s.isEqual(r)||Us(`Document ${i} contains a document reference within a different database (${s.projectId}/${s.database}) which is not supported. It will be treated as a reference in the current database (${r.projectId}/${r.database}) instead.`),i}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Zv(t,e,r){let n;return n=t?r&&(r.merge||r.mergeFields)?t.toFirestore(e,r):t.toFirestore(e):e,n}class xH extends dB{constructor(e){super(),this.firestore=e}convertBytes(e){return new wl(e)}convertReference(e){const r=this.convertDocumentKey(e,this.firestore._databaseId);return new Wn(this.firestore,null,r)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class pc{constructor(e,r){this.hasPendingWrites=e,this.fromCache=r}isEqual(e){return this.hasPendingWrites===e.hasPendingWrites&&this.fromCache===e.fromCache}}class ew extends q0{constructor(e,r,n,s,i,a){super(e,r,n,s,a),this._firestore=e,this._firestoreImpl=e,this.metadata=i}exists(){return super.exists()}data(e={}){if(this._document){if(this._converter){const r=new Ef(this._firestore,this._userDataWriter,this._key,this._document,this.metadata,null);return this._converter.fromFirestore(r,e)}return this._userDataWriter.convertValue(this._document.data.value,e.serverTimestamps)}}get(e,r={}){if(this._document){const n=this._document.data.field($v("DocumentSnapshot.get",e));if(n!==null)return this._userDataWriter.convertValue(n,r.serverTimestamps)}}}class Ef extends ew{data(e={}){return super.data(e)}}class hB{constructor(e,r,n,s){this._firestore=e,this._userDataWriter=r,this._snapshot=s,this.metadata=new pc(s.hasPendingWrites,s.fromCache),this.query=n}get docs(){const e=[];return this.forEach(r=>e.push(r)),e}get size(){return this._snapshot.docs.size}get empty(){return this.size===0}forEach(e,r){this._snapshot.docs.forEach(n=>{e.call(r,new Ef(this._firestore,this._userDataWriter,n.key,n,new pc(this._snapshot.mutatedKeys.has(n.key),this._snapshot.fromCache),this.query.converter))})}docChanges(e={}){const r=!!e.includeMetadataChanges;if(r&&this._snapshot.excludesMetadataChanges)throw new st(Me.INVALID_ARGUMENT,"To include metadata changes with your document changes, you must also pass { includeMetadataChanges:true } to onSnapshot().");return this._cachedChanges&&this._cachedChangesIncludeMetadataChanges===r||(this._cachedChanges=function(s,i){if(s._snapshot.oldDocs.isEmpty()){let a=0;return s._snapshot.docChanges.map(o=>{const l=new Ef(s._firestore,s._userDataWriter,o.doc.key,o.doc,new pc(s._snapshot.mutatedKeys.has(o.doc.key),s._snapshot.fromCache),s.query.converter);return o.doc,{type:"added",doc:l,oldIndex:-1,newIndex:a++}})}{let a=s._snapshot.oldDocs;return s._snapshot.docChanges.filter(o=>i||o.type!==3).map(o=>{const l=new Ef(s._firestore,s._userDataWriter,o.doc.key,o.doc,new pc(s._snapshot.mutatedKeys.has(o.doc.key),s._snapshot.fromCache),s.query.converter);let c=-1,u=-1;return o.type!==0&&(c=a.indexOf(o.doc.key),a=a.delete(o.doc.key)),o.type!==1&&(a=a.add(o.doc),u=a.indexOf(o.doc.key)),{type:bH(o.type),doc:l,oldIndex:c,newIndex:u}})}}(this,r),this._cachedChangesIncludeMetadataChanges=r),this._cachedChanges}}function bH(t){switch(t){case 0:return"added";case 2:case 3:return"modified";case 1:return"removed";default:return Bt()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function zo(t){t=$n(t,Wn);const e=$n(t.firestore,hi);return dH(zc(e),t._key).then(r=>nU(e,t,r))}class tw extends dB{constructor(e){super(),this.firestore=e}convertBytes(e){return new wl(e)}convertReference(e){const r=this.convertDocumentKey(e,this.firestore._databaseId);return new Wn(this.firestore,null,r)}}function Pt(t){t=$n(t,Ka);const e=$n(t.firestore,hi),r=zc(e),n=new tw(e);return ZT(t._query),hH(r,t._query).then(s=>new hB(e,n,t,s))}function rU(t,e,r){t=$n(t,Wn);const n=$n(t.firestore,hi),s=Zv(t.converter,e,r);return Yd(n,[Gv(Jd(n),"setDoc",t._key,s,t.converter!==null,r).toMutation(t._key,Zr.none())])}function rn(t,e,r,...n){t=$n(t,Wn);const s=$n(t.firestore,hi),i=Jd(s);let a;return a=typeof(e=dn(e))=="string"||e instanceof $c?AB(i,"updateDoc",t._key,e,r,n):oB(i,"updateDoc",t._key,e),Yd(s,[a.toMutation(t._key,Zr.exists(!0))])}function Bs(t){return Yd($n(t.firestore,hi),[new Wd(t._key,Zr.none())])}function qn(t,e){const r=$n(t.firestore,hi),n=Lt(t),s=Zv(t.converter,e);return Yd(r,[Gv(Jd(t.firestore),"addDoc",n._key,s,t.converter!==null,{}).toMutation(n._key,Zr.exists(!1))]).then(()=>n)}function I2(t,...e){var r,n,s;t=dn(t);let i={includeMetadataChanges:!1,source:"default"},a=0;typeof e[a]!="object"||WE(e[a])||(i=e[a],a++);const o={includeMetadataChanges:i.includeMetadataChanges,source:i.source};if(WE(e[a])){const f=e[a];e[a]=(r=f.next)===null||r===void 0?void 0:r.bind(f),e[a+1]=(n=f.error)===null||n===void 0?void 0:n.bind(f),e[a+2]=(s=f.complete)===null||s===void 0?void 0:s.bind(f)}let l,c,u;if(t instanceof Wn)c=$n(t.firestore,hi),u=kp(t._key.path),l={next:f=>{e[a]&&e[a](nU(c,t,f))},error:e[a+1],complete:e[a+2]};else{const f=$n(t,Ka);c=$n(f.firestore,hi),u=f._query;const p=new tw(c);l={next:m=>{e[a]&&e[a](new hB(c,p,f,m))},error:e[a+1],complete:e[a+2]},ZT(t._query)}return function(p,m,b,B){const _=new sB(B),w=new rB(m,_,b);return p.asyncQueue.enqueueAndForget(async()=>Zb(await V0(p),w)),()=>{_.Za(),p.asyncQueue.enqueueAndForget(async()=>eB(await V0(p),w))}}(zc(c),u,o,l)}function Yd(t,e){return function(n,s){const i=new aa;return n.asyncQueue.enqueueAndForget(async()=>Y8(await cH(n),s,i)),i.promise}(zc(t),e)}function nU(t,e,r){const n=r.docs.get(e._key),s=new tw(t);return new ew(t,s,e._key,n,new pc(r.hasPendingWrites,r.fromCache),e.converter)}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const BH={maxAttempts:5};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class sU{constructor(e,r){this._firestore=e,this._commitHandler=r,this._mutations=[],this._committed=!1,this._dataReader=Jd(e)}set(e,r,n){this._verifyNotCommitted();const s=OA(e,this._firestore),i=Zv(s.converter,r,n),a=Gv(this._dataReader,"WriteBatch.set",s._key,i,s.converter!==null,n);return this._mutations.push(a.toMutation(s._key,Zr.none())),this}update(e,r,n,...s){this._verifyNotCommitted();const i=OA(e,this._firestore);let a;return a=typeof(r=dn(r))=="string"||r instanceof $c?AB(this._dataReader,"WriteBatch.update",i._key,r,n,s):oB(this._dataReader,"WriteBatch.update",i._key,r),this._mutations.push(a.toMutation(i._key,Zr.exists(!0))),this}delete(e){this._verifyNotCommitted();const r=OA(e,this._firestore);return this._mutations=this._mutations.concat(new Wd(r._key,Zr.none())),this}commit(){return this._verifyNotCommitted(),this._committed=!0,this._mutations.length>0?this._commitHandler(this._mutations):Promise.resolve()}_verifyNotCommitted(){if(this._committed)throw new st(Me.FAILED_PRECONDITION,"A write batch can no longer be used after commit() has been called.")}}function OA(t,e){if((t=dn(t)).firestore!==e)throw new st(Me.INVALID_ARGUMENT,"Provided document reference is from a different Firestore instance.");return t}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class iU extends class{constructor(r,n){this._firestore=r,this._transaction=n,this._dataReader=Jd(r)}get(r){const n=OA(r,this._firestore),s=new xH(this._firestore);return this._transaction.lookup([n._key]).then(i=>{if(!i||i.length!==1)return Bt();const a=i[0];if(a.isFoundDocument())return new q0(this._firestore,s,a.key,a,n.converter);if(a.isNoDocument())return new q0(this._firestore,s,n._key,null,n.converter);throw Bt()})}set(r,n,s){const i=OA(r,this._firestore),a=Zv(i.converter,n,s),o=Gv(this._dataReader,"Transaction.set",i._key,a,i.converter!==null,s);return this._transaction.set(i._key,o),this}update(r,n,s,...i){const a=OA(r,this._firestore);let o;return o=typeof(n=dn(n))=="string"||n instanceof $c?AB(this._dataReader,"Transaction.update",a._key,n,s,i):oB(this._dataReader,"Transaction.update",a._key,n),this._transaction.update(a._key,o),this}delete(r){const n=OA(r,this._firestore);return this._transaction.delete(n._key),this}}{constructor(e,r){super(e,r),this._firestore=e}get(e){const r=OA(e,this._firestore),n=new tw(this._firestore);return super.get(e).then(s=>new ew(this._firestore,n,r._key,s._document,new pc(!1,!1),r.converter))}}function Al(t,e,r){t=$n(t,hi);const n=Object.assign(Object.assign({},BH),r);return function(i){if(i.maxAttempts<1)throw new st(Me.INVALID_ARGUMENT,"Max attempts must be at least 1")}(n),function(i,a,o){const l=new aa;return i.asyncQueue.enqueueAndForget(async()=>{const c=await uH(i);new oH(i.asyncQueue,c,o,a,l).au()}),l.promise}(zc(t),s=>e(new iU(t,s)),n)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function rw(t){return zc(t=$n(t,hi)),new sU(t,e=>Yd(t,e))}(function(e,r=!0){(function(s){Gd=s})(Kd),Id(new Uc("firestore",(n,{instanceIdentifier:s,options:i})=>{const a=n.getProvider("app").getImmediate(),o=new hi(new cM(n.getProvider("auth-internal")),new fM(n.getProvider("app-check-internal")),function(c,u){if(!Object.prototype.hasOwnProperty.apply(c.options,["projectId"]))throw new st(Me.INVALID_ARGUMENT,'"projectId" not provided in firebase.initializeApp.');return new ml(c.options.projectId,u)}(a,s),a);return i=Object.assign({useFetchStreams:r},i),o._setSettings(i),o},"PUBLIC").setMultipleInstances(!0)),al(V5,"4.7.3",e),al(V5,"4.7.3","esm2017")})();const CH=Object.freeze(Object.defineProperty({__proto__:null,AbstractUserDataWriter:dB,Bytes:wl,CollectionReference:Uo,DocumentReference:Wn,DocumentSnapshot:ew,FieldPath:$c,FieldValue:Vv,Firestore:hi,FirestoreError:st,GeoPoint:Kv,Query:Ka,QueryCompositeFilterConstraint:Xv,QueryConstraint:Wv,QueryDocumentSnapshot:Ef,QueryFieldFilterConstraint:Kp,QueryLimitConstraint:Yv,QueryOrderByConstraint:Jv,QuerySnapshot:hB,SnapshotMetadata:pc,Timestamp:Dt,Transaction:iU,VectorValue:qv,WriteBatch:sU,_AutoId:Nb,_ByteString:Bn,_DatabaseId:ml,_DocumentKey:dt,_EmptyAuthCredentialsProvider:d4,_FieldPath:Yr,_cast:$n,_logWarn:fl,_validateIsNotUsedTogether:VT,addDoc:qn,collection:ot,connectFirestoreEmulator:KT,deleteDoc:Bs,doc:Lt,enableIndexedDbPersistence:zT,ensureFirestoreConfigured:zc,executeWrite:Yd,getDoc:zo,getDocs:Pt,getFirestore:qT,limit:eU,onSnapshot:I2,orderBy:fi,query:Xt,runTransaction:Al,setDoc:rU,updateDoc:rn,where:rr,writeBatch:rw},Symbol.toStringTag,{value:"Module"})),EH={apiKey:"AIzaSyA_ZzeP_DAoXeRuallrOaJ4xFaxjnuhw-8",authDomain:"posys-103de.firebaseapp.com",projectId:"posys-103de",storageBucket:"posys-103de.firebasestorage.app",messagingSenderId:"401054148688",appId:"1:401054148688:web:1c2aea9e8b40958b514955",measurementId:"G-Q2GWQXMFLX"},aU=pb(EH),Le=qT(aU),nw=s4(aU);zT(Le).catch(t=>{t.code==="failed-precondition"?console.warn(" Ya hay otra pestaa usando persistencia."):t.code==="unimplemented"?console.warn(" El navegador no soporta persistencia offline."):console.error(" Error en persistencia offline:",t)});function _H(){const[t,e]=P.useState(""),[r,n]=P.useState(""),[s,i]=P.useState(!1),[a,o]=P.useState(""),[l,c]=P.useState(!1),u=Cv(),f=m=>{if(localStorage.setItem("role",m),m==="admin")return u("/admin");if(m==="vendedor_pollo")return u("/admin/salesV2");if(m==="vendedor_ropa")return u("/admin/salesClothes")},p=async m=>{if(m.preventDefault(),o(""),!t.trim()){o("Ingresa el correo.");return}if(r.length<6){o("La contrasea debe tener al menos 6 caracteres.");return}try{c(!0);const b=await zR(nw,t,r),B=b.user.uid,_=await zo(Lt(Le,"users",B));if(!_.exists()){o("Tu usuario no tiene perfil en la base de datos.");return}const w=_.data(),y=w.role||"",S=w.name||"";if(!["admin","vendedor_pollo","vendedor_ropa"].includes(y)){o("Rol no vlido. Consulta al administrador.");return}localStorage.setItem("user_email",b.user.email||""),S&&localStorage.setItem("user_name",S),f(y)}catch(b){const B=String((b==null?void 0:b.code)||"");o(B==="auth/invalid-credential"||B==="auth/wrong-password"?"Credenciales incorrectas.":B==="auth/user-not-found"?"Usuario no encontrado.":B==="auth/too-many-requests"?"Demasiados intentos. Intenta ms tarde.":(b==null?void 0:b.message)||"Error al iniciar sesin.")}finally{c(!1)}};return A.jsx("div",{className:"min-h-screen grid place-items-center ",children:A.jsxs("form",{onSubmit:p,className:"w-[92%] max-w-md bg-white p-6 rounded-2xl shadow-2xl",children:[A.jsx("h2",{className:"text-2xl font-bold text-center mb-4",children:"Iniciar Sesin"}),A.jsx("label",{className:"block text-sm font-semibold",children:"Correo electrnico"}),A.jsx("input",{type:"email",className:"w-full border rounded-2xl px-3 py-2 mb-3 shadow-2xl",value:t,onChange:m=>e(m.target.value),autoComplete:"username"}),A.jsx("label",{className:"block text-sm font-semibold",children:"Contrasea"}),A.jsxs("div",{className:"flex gap-2 mb-2",children:[A.jsx("input",{type:s?"text":"password",className:"flex-1 border rounded-2xl px-3 py-2 shadow-2xl",value:r,onChange:m=>n(m.target.value),minLength:6,autoComplete:"current-password"}),A.jsx("button",{type:"button",className:"px-3 py-2 rounded-2xl shadow-2xl bg-gray-200 hover:bg-gray-300",onClick:()=>i(m=>!m),children:s?"Ocultar":"Mostrar"})]}),A.jsx("div",{className:"text-xs text-gray-600 mb-3",children:"Mnimo 6 caracteres (requisito de Firebase)."}),A.jsx("button",{className:"w-full bg-blue-600 text-white px-4 py-2 rounded-2xl shadow-2xl hover:bg-blue-700 disabled:opacity-60",disabled:l,children:l?"Entrando...":"Entrar"}),a&&A.jsx("p",{className:`mt-3 text-sm ${a.startsWith("Error")||a.includes("no vlido")?"text-red-600":"text-gray-700"}`,children:a})]})})}function mn({children:t,allowedRoles:e}){const[r,n]=P.useState(!0),[s,i]=P.useState(!1);return P.useEffect(()=>{const a=GF(nw,async o=>{if(o){const l=Lt(Le,"users",o.uid),c=await zo(l);if(c.exists()){const u=c.data().role;i(e.includes(u))}}n(!1)});return()=>a()},[e]),r?A.jsx("div",{className:"p-4",children:"Cargando..."}):s?t:A.jsx(Du,{to:"/"})}function NH({role:t}){const e="/admin",r=({isActive:W})=>`block rounded px-3 py-2 text-sm ${W?"bg-blue-600 text-white":"text-gray-700 hover:bg-gray-100"}`,n=Cv(),[s,i]=P.useState(!1),[a,o]=P.useState(!1),[l,c]=P.useState(!1),[u,f]=P.useState(!1),[p,m]=P.useState(!1),[b,B]=P.useState(!1),[_,w]=P.useState(!1),[y,S]=P.useState(!1),[O,R]=P.useState(!1),[M,I]=P.useState(!1),[E,L]=P.useState(!1),[D,N]=P.useState(!1),T=async()=>{await zF(nw),n("/")},F=({open:W,onClick:ue,children:ae})=>A.jsxs("button",{type:"button",onClick:ue,className:"w-full flex items-center justify-between px-3 py-2 text-left text-sm font-semibold rounded hover:bg-gray-100",children:[A.jsx("span",{children:ae}),A.jsx("span",{className:"text-xs",children:W?"":""})]}),ee=({open:W,onClick:ue,title:ae})=>A.jsxs("button",{type:"button",onClick:ue,className:"ml-2 w-[calc(100%-0.5rem)] flex items-center justify-between px-3 py-2 text-left text-sm rounded hover:bg-gray-100",children:[A.jsx("span",{className:"text-blue-500 font-medium ",children:ae}),A.jsx("span",{className:"text-xs",children:W?"":""})]}),ce=t==="admin",re=t==="vendedor_pollo"||t==="vendedor",de=t==="vendedor_ropa";return A.jsxs("div",{className:"min-h-screen flex",children:[A.jsxs("aside",{className:`${s?"w-15 bg-gray-50 border-r p-3 transition-all duration-300 flex flex-col items-center":"w-55"} bg-gray-50 border-r p-3 transition-all duration-300 flex flex-col`,children:[A.jsx("button",{onClick:()=>i(!s),className:"mb-2 p-2 rounded bg-gray-200 hover:bg-gray-300","aria-label":s?"Expandir men":"Colapsar men",children:s?A.jsx("span",{title:"Expandir men",children:""}):A.jsx("span",{title:"Colapsar men",children:""})}),!s&&A.jsxs(A.Fragment,{children:[A.jsxs("nav",{className:"space-y-1",children:[ce&&A.jsxs(A.Fragment,{children:[A.jsxs("div",{className:"border rounded mb-1",children:[A.jsx(F,{open:a,onClick:()=>o(W=>!W),children:"Operaciones Pollo"}),a&&A.jsxs("div",{className:"pb-2",children:[A.jsx(ee,{open:l,onClick:()=>c(W=>!W),title:"Inventarios"}),l&&A.jsxs("div",{className:"ml-4 mt-1 space-y-1",children:[A.jsx(nn,{to:`${e}/batches`,className:r,children:"Inventario Pollo"}),A.jsx(nn,{to:`${e}/paidBatches`,className:r,children:"Inventarios Pagados"})]}),A.jsx(ee,{open:u,onClick:()=>f(W=>!W),title:"Finanzas"}),u&&A.jsxs("div",{className:"ml-4 mt-1 space-y-1",children:[A.jsx(nn,{to:`${e}/financialDashboard`,className:r,children:"Dashboard"}),A.jsx(nn,{to:`${e}/billing`,className:r,children:"Facturacion"}),A.jsx(nn,{to:`${e}/expenses`,className:r,children:"Gastos"})]}),A.jsx(ee,{open:p,onClick:()=>m(W=>!W),title:"Productos"}),p&&A.jsx("div",{className:"ml-4 mt-1 space-y-1",children:A.jsx(nn,{to:`${e}/products`,className:r,children:"Productos"})})]})]}),A.jsxs("div",{className:"border rounded mb-1",children:[A.jsx(F,{open:b,onClick:()=>B(W=>!W),children:"Operaciones Ropa"}),b&&A.jsxs("div",{className:"pb-2",children:[A.jsx(ee,{open:_,onClick:()=>w(W=>!W),title:"Inventario"}),_&&A.jsx("div",{className:"ml-4 mt-1 space-y-1",children:A.jsx(nn,{to:`${e}/InventoryClothesBatches`,className:r,children:"Inventario Ropa"})}),A.jsx(ee,{open:y,onClick:()=>S(W=>!W),title:"Productos"}),y&&A.jsx("div",{className:"ml-4 mt-1 space-y-1",children:A.jsx(nn,{to:`${e}/productsClothes`,className:r,children:"Agregar Productos"})}),A.jsx(ee,{open:O,onClick:()=>R(W=>!W),title:"Clientes"}),O&&A.jsx("div",{className:"ml-4 mt-1 space-y-1",children:A.jsx(nn,{to:`${e}/CustomersClothes`,className:r,children:"Listado de Clientes"})}),A.jsx(ee,{open:M,onClick:()=>I(W=>!W),title:"Finanzas"}),M&&A.jsx("div",{className:"ml-4 mt-1 space-y-1",children:A.jsx(nn,{to:`${e}/salesClothes`,className:r,children:"Venta Ropa"})}),M&&A.jsx("div",{className:"ml-4 mt-1 space-y-1",children:A.jsx(nn,{to:`${e}/financialDashboardClothes`,className:r,children:"Dashboard Financiero"})}),M&&A.jsx("div",{className:"ml-4 mt-1 space-y-1",children:A.jsx(nn,{to:`${e}/TransactionsReportClothes`,className:r,children:"Transacciones"})}),M&&A.jsx("div",{className:"ml-4 mt-1 space-y-1",children:A.jsx(nn,{to:`${e}/ExpensesClothes`,className:r,children:"Gastos Ropa"})})]})]}),A.jsxs("div",{className:"border rounded",children:[A.jsx(F,{open:D,onClick:()=>N(W=>!W),children:"Operaciones Otras"}),D&&A.jsxs("div",{className:"pb-2 ml-4 mt-1 space-y-1",children:[A.jsx(nn,{to:`${e}/users`,className:r,children:"Usuarios"}),A.jsx(nn,{to:`${e}/fix`,className:r,children:"Fix de lotes"}),A.jsx(nn,{to:`${e}/transactionclose`,className:r,children:"Liquidaciones"})]})]})]}),re&&A.jsxs("div",{className:"border rounded",children:[A.jsx(F,{open:u,onClick:()=>f(W=>!W),children:"Finanzas (Pollo)"}),u&&A.jsxs("div",{className:"pb-2 ml-4 mt-1 space-y-1",children:[A.jsx(nn,{to:`${e}/salesV2`,className:r,children:"Venta"}),A.jsx(nn,{to:`${e}/bills`,className:r,children:"Cierre"})]})]}),de&&A.jsxs("div",{className:"border rounded",children:[A.jsx(F,{open:b,onClick:()=>B(W=>!W),children:"Operaciones Ropa"}),b&&A.jsxs("div",{className:"pb-2",children:[A.jsx(ee,{open:M,onClick:()=>I(W=>!W),title:"Ventas"}),M&&A.jsxs("div",{className:"ml-4 mt-1 space-y-1",children:[A.jsx(nn,{to:`${e}/salesClothes`,className:r,children:"Venta Ropa"}),A.jsx(nn,{to:`${e}/TransactionsReportClothes`,className:r,children:"Transacciones"})]}),A.jsx(ee,{open:y,onClick:()=>S(W=>!W),title:"Productos"}),y&&A.jsx("div",{className:"ml-4 mt-1 space-y-1",children:A.jsx(nn,{to:`${e}/productsClothes`,className:r,children:"Agregar Productos"})}),A.jsx(ee,{open:O,onClick:()=>R(W=>!W),title:"Clientes"}),O&&A.jsx("div",{className:"ml-4 mt-1 space-y-1",children:A.jsx(nn,{to:`${e}/CustomersClothes`,className:r,children:"Listado de Clientes"})})]})]})]}),A.jsx("button",{onClick:T,className:"mt-4 bg-red-500 text-white px-3 py-2 rounded hover:bg-red-600",children:"Cerrar sesin"})]})]}),A.jsx("main",{className:"flex-1 p-6",children:A.jsx(Mj,{})})]})}const oU=6048e5,IH=864e5,YE=Symbol.for("constructDateFrom");function ca(t,e){return typeof t=="function"?t(e):t&&typeof t=="object"&&YE in t?t[YE](e):t instanceof Date?new t.constructor(e):new Date(e)}function ks(t,e){return ca(e||t,t)}function SH(t,e,r){const n=ks(t,r==null?void 0:r.in);return isNaN(e)?ca(t,NaN):(n.setDate(n.getDate()+e),n)}function FH(t,e,r){const n=ks(t,r==null?void 0:r.in);if(isNaN(e))return ca(t,NaN);const s=n.getDate(),i=ca(t,n.getTime());i.setMonth(n.getMonth()+e+1,0);const a=i.getDate();return s>=a?i:(n.setFullYear(i.getFullYear(),i.getMonth(),s),n)}let TH={};function sw(){return TH}function mp(t,e){var o,l,c,u;const r=sw(),n=(e==null?void 0:e.weekStartsOn)??((l=(o=e==null?void 0:e.locale)==null?void 0:o.options)==null?void 0:l.weekStartsOn)??r.weekStartsOn??((u=(c=r.locale)==null?void 0:c.options)==null?void 0:u.weekStartsOn)??0,s=ks(t,e==null?void 0:e.in),i=s.getDay(),a=(i<n?7:0)+i-n;return s.setDate(s.getDate()-a),s.setHours(0,0,0,0),s}function G0(t,e){return mp(t,{...e,weekStartsOn:1})}function AU(t,e){const r=ks(t,e==null?void 0:e.in),n=r.getFullYear(),s=ca(r,0);s.setFullYear(n+1,0,4),s.setHours(0,0,0,0);const i=G0(s),a=ca(r,0);a.setFullYear(n,0,4),a.setHours(0,0,0,0);const o=G0(a);return r.getTime()>=i.getTime()?n+1:r.getTime()>=o.getTime()?n:n-1}function ZE(t){const e=ks(t),r=new Date(Date.UTC(e.getFullYear(),e.getMonth(),e.getDate(),e.getHours(),e.getMinutes(),e.getSeconds(),e.getMilliseconds()));return r.setUTCFullYear(e.getFullYear()),+t-+r}function UH(t,...e){const r=ca.bind(null,e.find(n=>typeof n=="object"));return e.map(r)}function e_(t,e){const r=ks(t,e==null?void 0:e.in);return r.setHours(0,0,0,0),r}function PH(t,e,r){const[n,s]=UH(r==null?void 0:r.in,t,e),i=e_(n),a=e_(s),o=+i-ZE(i),l=+a-ZE(a);return Math.round((o-l)/IH)}function QH(t,e){const r=AU(t,e),n=ca(t,0);return n.setFullYear(r,0,4),n.setHours(0,0,0,0),G0(n)}function LH(t){return t instanceof Date||typeof t=="object"&&Object.prototype.toString.call(t)==="[object Date]"}function jH(t){return!(!LH(t)&&typeof t!="number"||isNaN(+ks(t)))}function Zd(t,e){const r=ks(t,e==null?void 0:e.in),n=r.getMonth();return r.setFullYear(r.getFullYear(),n+1,0),r.setHours(23,59,59,999),r}function eh(t,e){const r=ks(t,e==null?void 0:e.in);return r.setDate(1),r.setHours(0,0,0,0),r}function kH(t,e){const r=ks(t,e==null?void 0:e.in);return r.setFullYear(r.getFullYear(),0,1),r.setHours(0,0,0,0),r}const DH={lessThanXSeconds:{one:"less than a second",other:"less than {{count}} seconds"},xSeconds:{one:"1 second",other:"{{count}} seconds"},halfAMinute:"half a minute",lessThanXMinutes:{one:"less than a minute",other:"less than {{count}} minutes"},xMinutes:{one:"1 minute",other:"{{count}} minutes"},aboutXHours:{one:"about 1 hour",other:"about {{count}} hours"},xHours:{one:"1 hour",other:"{{count}} hours"},xDays:{one:"1 day",other:"{{count}} days"},aboutXWeeks:{one:"about 1 week",other:"about {{count}} weeks"},xWeeks:{one:"1 week",other:"{{count}} weeks"},aboutXMonths:{one:"about 1 month",other:"about {{count}} months"},xMonths:{one:"1 month",other:"{{count}} months"},aboutXYears:{one:"about 1 year",other:"about {{count}} years"},xYears:{one:"1 year",other:"{{count}} years"},overXYears:{one:"over 1 year",other:"over {{count}} years"},almostXYears:{one:"almost 1 year",other:"almost {{count}} years"}},RH=(t,e,r)=>{let n;const s=DH[t];return typeof s=="string"?n=s:e===1?n=s.one:n=s.other.replace("{{count}}",e.toString()),r!=null&&r.addSuffix?r.comparison&&r.comparison>0?"in "+n:n+" ago":n};function xy(t){return(e={})=>{const r=e.width?String(e.width):t.defaultWidth;return t.formats[r]||t.formats[t.defaultWidth]}}const MH={full:"EEEE, MMMM do, y",long:"MMMM do, y",medium:"MMM d, y",short:"MM/dd/yyyy"},OH={full:"h:mm:ss a zzzz",long:"h:mm:ss a z",medium:"h:mm:ss a",short:"h:mm a"},HH={full:"{{date}} 'at' {{time}}",long:"{{date}} 'at' {{time}}",medium:"{{date}}, {{time}}",short:"{{date}}, {{time}}"},VH={date:xy({formats:MH,defaultWidth:"full"}),time:xy({formats:OH,defaultWidth:"full"}),dateTime:xy({formats:HH,defaultWidth:"full"})},KH={lastWeek:"'last' eeee 'at' p",yesterday:"'yesterday at' p",today:"'today at' p",tomorrow:"'tomorrow at' p",nextWeek:"eeee 'at' p",other:"P"},qH=(t,e,r,n)=>KH[t];function Lh(t){return(e,r)=>{const n=r!=null&&r.context?String(r.context):"standalone";let s;if(n==="formatting"&&t.formattingValues){const a=t.defaultFormattingWidth||t.defaultWidth,o=r!=null&&r.width?String(r.width):a;s=t.formattingValues[o]||t.formattingValues[a]}else{const a=t.defaultWidth,o=r!=null&&r.width?String(r.width):t.defaultWidth;s=t.values[o]||t.values[a]}const i=t.argumentCallback?t.argumentCallback(e):e;return s[i]}}const GH={narrow:["B","A"],abbreviated:["BC","AD"],wide:["Before Christ","Anno Domini"]},zH={narrow:["1","2","3","4"],abbreviated:["Q1","Q2","Q3","Q4"],wide:["1st quarter","2nd quarter","3rd quarter","4th quarter"]},$H={narrow:["J","F","M","A","M","J","J","A","S","O","N","D"],abbreviated:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],wide:["January","February","March","April","May","June","July","August","September","October","November","December"]},WH={narrow:["S","M","T","W","T","F","S"],short:["Su","Mo","Tu","We","Th","Fr","Sa"],abbreviated:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],wide:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"]},XH={narrow:{am:"a",pm:"p",midnight:"mi",noon:"n",morning:"morning",afternoon:"afternoon",evening:"evening",night:"night"},abbreviated:{am:"AM",pm:"PM",midnight:"midnight",noon:"noon",morning:"morning",afternoon:"afternoon",evening:"evening",night:"night"},wide:{am:"a.m.",pm:"p.m.",midnight:"midnight",noon:"noon",morning:"morning",afternoon:"afternoon",evening:"evening",night:"night"}},JH={narrow:{am:"a",pm:"p",midnight:"mi",noon:"n",morning:"in the morning",afternoon:"in the afternoon",evening:"in the evening",night:"at night"},abbreviated:{am:"AM",pm:"PM",midnight:"midnight",noon:"noon",morning:"in the morning",afternoon:"in the afternoon",evening:"in the evening",night:"at night"},wide:{am:"a.m.",pm:"p.m.",midnight:"midnight",noon:"noon",morning:"in the morning",afternoon:"in the afternoon",evening:"in the evening",night:"at night"}},YH=(t,e)=>{const r=Number(t),n=r%100;if(n>20||n<10)switch(n%10){case 1:return r+"st";case 2:return r+"nd";case 3:return r+"rd"}return r+"th"},ZH={ordinalNumber:YH,era:Lh({values:GH,defaultWidth:"wide"}),quarter:Lh({values:zH,defaultWidth:"wide",argumentCallback:t=>t-1}),month:Lh({values:$H,defaultWidth:"wide"}),day:Lh({values:WH,defaultWidth:"wide"}),dayPeriod:Lh({values:XH,defaultWidth:"wide",formattingValues:JH,defaultFormattingWidth:"wide"})};function jh(t){return(e,r={})=>{const n=r.width,s=n&&t.matchPatterns[n]||t.matchPatterns[t.defaultMatchWidth],i=e.match(s);if(!i)return null;const a=i[0],o=n&&t.parsePatterns[n]||t.parsePatterns[t.defaultParseWidth],l=Array.isArray(o)?tV(o,f=>f.test(a)):eV(o,f=>f.test(a));let c;c=t.valueCallback?t.valueCallback(l):l,c=r.valueCallback?r.valueCallback(c):c;const u=e.slice(a.length);return{value:c,rest:u}}}function eV(t,e){for(const r in t)if(Object.prototype.hasOwnProperty.call(t,r)&&e(t[r]))return r}function tV(t,e){for(let r=0;r<t.length;r++)if(e(t[r]))return r}function rV(t){return(e,r={})=>{const n=e.match(t.matchPattern);if(!n)return null;const s=n[0],i=e.match(t.parsePattern);if(!i)return null;let a=t.valueCallback?t.valueCallback(i[0]):i[0];a=r.valueCallback?r.valueCallback(a):a;const o=e.slice(s.length);return{value:a,rest:o}}}const nV=/^(\d+)(th|st|nd|rd)?/i,sV=/\d+/i,iV={narrow:/^(b|a)/i,abbreviated:/^(b\.?\s?c\.?|b\.?\s?c\.?\s?e\.?|a\.?\s?d\.?|c\.?\s?e\.?)/i,wide:/^(before christ|before common era|anno domini|common era)/i},aV={any:[/^b/i,/^(a|c)/i]},oV={narrow:/^[1234]/i,abbreviated:/^q[1234]/i,wide:/^[1234](th|st|nd|rd)? quarter/i},AV={any:[/1/i,/2/i,/3/i,/4/i]},lV={narrow:/^[jfmasond]/i,abbreviated:/^(jan|feb|mar|apr|may|jun|jul|aug|sep|oct|nov|dec)/i,wide:/^(january|february|march|april|may|june|july|august|september|october|november|december)/i},cV={narrow:[/^j/i,/^f/i,/^m/i,/^a/i,/^m/i,/^j/i,/^j/i,/^a/i,/^s/i,/^o/i,/^n/i,/^d/i],any:[/^ja/i,/^f/i,/^mar/i,/^ap/i,/^may/i,/^jun/i,/^jul/i,/^au/i,/^s/i,/^o/i,/^n/i,/^d/i]},uV={narrow:/^[smtwf]/i,short:/^(su|mo|tu|we|th|fr|sa)/i,abbreviated:/^(sun|mon|tue|wed|thu|fri|sat)/i,wide:/^(sunday|monday|tuesday|wednesday|thursday|friday|saturday)/i},dV={narrow:[/^s/i,/^m/i,/^t/i,/^w/i,/^t/i,/^f/i,/^s/i],any:[/^su/i,/^m/i,/^tu/i,/^w/i,/^th/i,/^f/i,/^sa/i]},hV={narrow:/^(a|p|mi|n|(in the|at) (morning|afternoon|evening|night))/i,any:/^([ap]\.?\s?m\.?|midnight|noon|(in the|at) (morning|afternoon|evening|night))/i},fV={any:{am:/^a/i,pm:/^p/i,midnight:/^mi/i,noon:/^no/i,morning:/morning/i,afternoon:/afternoon/i,evening:/evening/i,night:/night/i}},pV={ordinalNumber:rV({matchPattern:nV,parsePattern:sV,valueCallback:t=>parseInt(t,10)}),era:jh({matchPatterns:iV,defaultMatchWidth:"wide",parsePatterns:aV,defaultParseWidth:"any"}),quarter:jh({matchPatterns:oV,defaultMatchWidth:"wide",parsePatterns:AV,defaultParseWidth:"any",valueCallback:t=>t+1}),month:jh({matchPatterns:lV,defaultMatchWidth:"wide",parsePatterns:cV,defaultParseWidth:"any"}),day:jh({matchPatterns:uV,defaultMatchWidth:"wide",parsePatterns:dV,defaultParseWidth:"any"}),dayPeriod:jh({matchPatterns:hV,defaultMatchWidth:"any",parsePatterns:fV,defaultParseWidth:"any"})},mV={code:"en-US",formatDistance:RH,formatLong:VH,formatRelative:qH,localize:ZH,match:pV,options:{weekStartsOn:0,firstWeekContainsDate:1}};function gV(t,e){const r=ks(t,e==null?void 0:e.in);return PH(r,kH(r))+1}function vV(t,e){const r=ks(t,e==null?void 0:e.in),n=+G0(r)-+QH(r);return Math.round(n/oU)+1}function lU(t,e){var u,f,p,m;const r=ks(t,e==null?void 0:e.in),n=r.getFullYear(),s=sw(),i=(e==null?void 0:e.firstWeekContainsDate)??((f=(u=e==null?void 0:e.locale)==null?void 0:u.options)==null?void 0:f.firstWeekContainsDate)??s.firstWeekContainsDate??((m=(p=s.locale)==null?void 0:p.options)==null?void 0:m.firstWeekContainsDate)??1,a=ca((e==null?void 0:e.in)||t,0);a.setFullYear(n+1,0,i),a.setHours(0,0,0,0);const o=mp(a,e),l=ca((e==null?void 0:e.in)||t,0);l.setFullYear(n,0,i),l.setHours(0,0,0,0);const c=mp(l,e);return+r>=+o?n+1:+r>=+c?n:n-1}function wV(t,e){var o,l,c,u;const r=sw(),n=(e==null?void 0:e.firstWeekContainsDate)??((l=(o=e==null?void 0:e.locale)==null?void 0:o.options)==null?void 0:l.firstWeekContainsDate)??r.firstWeekContainsDate??((u=(c=r.locale)==null?void 0:c.options)==null?void 0:u.firstWeekContainsDate)??1,s=lU(t,e),i=ca((e==null?void 0:e.in)||t,0);return i.setFullYear(s,0,n),i.setHours(0,0,0,0),mp(i,e)}function yV(t,e){const r=ks(t,e==null?void 0:e.in),n=+mp(r,e)-+wV(r,e);return Math.round(n/oU)+1}function Er(t,e){const r=t<0?"-":"",n=Math.abs(t).toString().padStart(e,"0");return r+n}const _A={y(t,e){const r=t.getFullYear(),n=r>0?r:1-r;return Er(e==="yy"?n%100:n,e.length)},M(t,e){const r=t.getMonth();return e==="M"?String(r+1):Er(r+1,2)},d(t,e){return Er(t.getDate(),e.length)},a(t,e){const r=t.getHours()/12>=1?"pm":"am";switch(e){case"a":case"aa":return r.toUpperCase();case"aaa":return r;case"aaaaa":return r[0];case"aaaa":default:return r==="am"?"a.m.":"p.m."}},h(t,e){return Er(t.getHours()%12||12,e.length)},H(t,e){return Er(t.getHours(),e.length)},m(t,e){return Er(t.getMinutes(),e.length)},s(t,e){return Er(t.getSeconds(),e.length)},S(t,e){const r=e.length,n=t.getMilliseconds(),s=Math.trunc(n*Math.pow(10,r-3));return Er(s,e.length)}},Eu={midnight:"midnight",noon:"noon",morning:"morning",afternoon:"afternoon",evening:"evening",night:"night"},t_={G:function(t,e,r){const n=t.getFullYear()>0?1:0;switch(e){case"G":case"GG":case"GGG":return r.era(n,{width:"abbreviated"});case"GGGGG":return r.era(n,{width:"narrow"});case"GGGG":default:return r.era(n,{width:"wide"})}},y:function(t,e,r){if(e==="yo"){const n=t.getFullYear(),s=n>0?n:1-n;return r.ordinalNumber(s,{unit:"year"})}return _A.y(t,e)},Y:function(t,e,r,n){const s=lU(t,n),i=s>0?s:1-s;if(e==="YY"){const a=i%100;return Er(a,2)}return e==="Yo"?r.ordinalNumber(i,{unit:"year"}):Er(i,e.length)},R:function(t,e){const r=AU(t);return Er(r,e.length)},u:function(t,e){const r=t.getFullYear();return Er(r,e.length)},Q:function(t,e,r){const n=Math.ceil((t.getMonth()+1)/3);switch(e){case"Q":return String(n);case"QQ":return Er(n,2);case"Qo":return r.ordinalNumber(n,{unit:"quarter"});case"QQQ":return r.quarter(n,{width:"abbreviated",context:"formatting"});case"QQQQQ":return r.quarter(n,{width:"narrow",context:"formatting"});case"QQQQ":default:return r.quarter(n,{width:"wide",context:"formatting"})}},q:function(t,e,r){const n=Math.ceil((t.getMonth()+1)/3);switch(e){case"q":return String(n);case"qq":return Er(n,2);case"qo":return r.ordinalNumber(n,{unit:"quarter"});case"qqq":return r.quarter(n,{width:"abbreviated",context:"standalone"});case"qqqqq":return r.quarter(n,{width:"narrow",context:"standalone"});case"qqqq":default:return r.quarter(n,{width:"wide",context:"standalone"})}},M:function(t,e,r){const n=t.getMonth();switch(e){case"M":case"MM":return _A.M(t,e);case"Mo":return r.ordinalNumber(n+1,{unit:"month"});case"MMM":return r.month(n,{width:"abbreviated",context:"formatting"});case"MMMMM":return r.month(n,{width:"narrow",context:"formatting"});case"MMMM":default:return r.month(n,{width:"wide",context:"formatting"})}},L:function(t,e,r){const n=t.getMonth();switch(e){case"L":return String(n+1);case"LL":return Er(n+1,2);case"Lo":return r.ordinalNumber(n+1,{unit:"month"});case"LLL":return r.month(n,{width:"abbreviated",context:"standalone"});case"LLLLL":return r.month(n,{width:"narrow",context:"standalone"});case"LLLL":default:return r.month(n,{width:"wide",context:"standalone"})}},w:function(t,e,r,n){const s=yV(t,n);return e==="wo"?r.ordinalNumber(s,{unit:"week"}):Er(s,e.length)},I:function(t,e,r){const n=vV(t);return e==="Io"?r.ordinalNumber(n,{unit:"week"}):Er(n,e.length)},d:function(t,e,r){return e==="do"?r.ordinalNumber(t.getDate(),{unit:"date"}):_A.d(t,e)},D:function(t,e,r){const n=gV(t);return e==="Do"?r.ordinalNumber(n,{unit:"dayOfYear"}):Er(n,e.length)},E:function(t,e,r){const n=t.getDay();switch(e){case"E":case"EE":case"EEE":return r.day(n,{width:"abbreviated",context:"formatting"});case"EEEEE":return r.day(n,{width:"narrow",context:"formatting"});case"EEEEEE":return r.day(n,{width:"short",context:"formatting"});case"EEEE":default:return r.day(n,{width:"wide",context:"formatting"})}},e:function(t,e,r,n){const s=t.getDay(),i=(s-n.weekStartsOn+8)%7||7;switch(e){case"e":return String(i);case"ee":return Er(i,2);case"eo":return r.ordinalNumber(i,{unit:"day"});case"eee":return r.day(s,{width:"abbreviated",context:"formatting"});case"eeeee":return r.day(s,{width:"narrow",context:"formatting"});case"eeeeee":return r.day(s,{width:"short",context:"formatting"});case"eeee":default:return r.day(s,{width:"wide",context:"formatting"})}},c:function(t,e,r,n){const s=t.getDay(),i=(s-n.weekStartsOn+8)%7||7;switch(e){case"c":return String(i);case"cc":return Er(i,e.length);case"co":return r.ordinalNumber(i,{unit:"day"});case"ccc":return r.day(s,{width:"abbreviated",context:"standalone"});case"ccccc":return r.day(s,{width:"narrow",context:"standalone"});case"cccccc":return r.day(s,{width:"short",context:"standalone"});case"cccc":default:return r.day(s,{width:"wide",context:"standalone"})}},i:function(t,e,r){const n=t.getDay(),s=n===0?7:n;switch(e){case"i":return String(s);case"ii":return Er(s,e.length);case"io":return r.ordinalNumber(s,{unit:"day"});case"iii":return r.day(n,{width:"abbreviated",context:"formatting"});case"iiiii":return r.day(n,{width:"narrow",context:"formatting"});case"iiiiii":return r.day(n,{width:"short",context:"formatting"});case"iiii":default:return r.day(n,{width:"wide",context:"formatting"})}},a:function(t,e,r){const s=t.getHours()/12>=1?"pm":"am";switch(e){case"a":case"aa":return r.dayPeriod(s,{width:"abbreviated",context:"formatting"});case"aaa":return r.dayPeriod(s,{width:"abbreviated",context:"formatting"}).toLowerCase();case"aaaaa":return r.dayPeriod(s,{width:"narrow",context:"formatting"});case"aaaa":default:return r.dayPeriod(s,{width:"wide",context:"formatting"})}},b:function(t,e,r){const n=t.getHours();let s;switch(n===12?s=Eu.noon:n===0?s=Eu.midnight:s=n/12>=1?"pm":"am",e){case"b":case"bb":return r.dayPeriod(s,{width:"abbreviated",context:"formatting"});case"bbb":return r.dayPeriod(s,{width:"abbreviated",context:"formatting"}).toLowerCase();case"bbbbb":return r.dayPeriod(s,{width:"narrow",context:"formatting"});case"bbbb":default:return r.dayPeriod(s,{width:"wide",context:"formatting"})}},B:function(t,e,r){const n=t.getHours();let s;switch(n>=17?s=Eu.evening:n>=12?s=Eu.afternoon:n>=4?s=Eu.morning:s=Eu.night,e){case"B":case"BB":case"BBB":return r.dayPeriod(s,{width:"abbreviated",context:"formatting"});case"BBBBB":return r.dayPeriod(s,{width:"narrow",context:"formatting"});case"BBBB":default:return r.dayPeriod(s,{width:"wide",context:"formatting"})}},h:function(t,e,r){if(e==="ho"){let n=t.getHours()%12;return n===0&&(n=12),r.ordinalNumber(n,{unit:"hour"})}return _A.h(t,e)},H:function(t,e,r){return e==="Ho"?r.ordinalNumber(t.getHours(),{unit:"hour"}):_A.H(t,e)},K:function(t,e,r){const n=t.getHours()%12;return e==="Ko"?r.ordinalNumber(n,{unit:"hour"}):Er(n,e.length)},k:function(t,e,r){let n=t.getHours();return n===0&&(n=24),e==="ko"?r.ordinalNumber(n,{unit:"hour"}):Er(n,e.length)},m:function(t,e,r){return e==="mo"?r.ordinalNumber(t.getMinutes(),{unit:"minute"}):_A.m(t,e)},s:function(t,e,r){return e==="so"?r.ordinalNumber(t.getSeconds(),{unit:"second"}):_A.s(t,e)},S:function(t,e){return _A.S(t,e)},X:function(t,e,r){const n=t.getTimezoneOffset();if(n===0)return"Z";switch(e){case"X":return n_(n);case"XXXX":case"XX":return ic(n);case"XXXXX":case"XXX":default:return ic(n,":")}},x:function(t,e,r){const n=t.getTimezoneOffset();switch(e){case"x":return n_(n);case"xxxx":case"xx":return ic(n);case"xxxxx":case"xxx":default:return ic(n,":")}},O:function(t,e,r){const n=t.getTimezoneOffset();switch(e){case"O":case"OO":case"OOO":return"GMT"+r_(n,":");case"OOOO":default:return"GMT"+ic(n,":")}},z:function(t,e,r){const n=t.getTimezoneOffset();switch(e){case"z":case"zz":case"zzz":return"GMT"+r_(n,":");case"zzzz":default:return"GMT"+ic(n,":")}},t:function(t,e,r){const n=Math.trunc(+t/1e3);return Er(n,e.length)},T:function(t,e,r){return Er(+t,e.length)}};function r_(t,e=""){const r=t>0?"-":"+",n=Math.abs(t),s=Math.trunc(n/60),i=n%60;return i===0?r+String(s):r+String(s)+e+Er(i,2)}function n_(t,e){return t%60===0?(t>0?"-":"+")+Er(Math.abs(t)/60,2):ic(t,e)}function ic(t,e=""){const r=t>0?"-":"+",n=Math.abs(t),s=Er(Math.trunc(n/60),2),i=Er(n%60,2);return r+s+e+i}const s_=(t,e)=>{switch(t){case"P":return e.date({width:"short"});case"PP":return e.date({width:"medium"});case"PPP":return e.date({width:"long"});case"PPPP":default:return e.date({width:"full"})}},cU=(t,e)=>{switch(t){case"p":return e.time({width:"short"});case"pp":return e.time({width:"medium"});case"ppp":return e.time({width:"long"});case"pppp":default:return e.time({width:"full"})}},xV=(t,e)=>{const r=t.match(/(P+)(p+)?/)||[],n=r[1],s=r[2];if(!s)return s_(t,e);let i;switch(n){case"P":i=e.dateTime({width:"short"});break;case"PP":i=e.dateTime({width:"medium"});break;case"PPP":i=e.dateTime({width:"long"});break;case"PPPP":default:i=e.dateTime({width:"full"});break}return i.replace("{{date}}",s_(n,e)).replace("{{time}}",cU(s,e))},bV={p:cU,P:xV},BV=/^D+$/,CV=/^Y+$/,EV=["D","DD","YY","YYYY"];function _V(t){return BV.test(t)}function NV(t){return CV.test(t)}function IV(t,e,r){const n=SV(t,e,r);if(console.warn(n),EV.includes(t))throw new RangeError(n)}function SV(t,e,r){const n=t[0]==="Y"?"years":"days of the month";return`Use \`${t.toLowerCase()}\` instead of \`${t}\` (in \`${e}\`) for formatting ${n} to the input \`${r}\`; see: https://github.com/date-fns/date-fns/blob/master/docs/unicodeTokens.md`}const FV=/[yYQqMLwIdDecihHKkms]o|(\w)\1*|''|'(''|[^'])+('|$)|./g,TV=/P+p+|P+|p+|''|'(''|[^'])+('|$)|./g,UV=/^'([^]*?)'?$/,PV=/''/g,QV=/[a-zA-Z]/;function er(t,e,r){var u,f,p,m;const n=sw(),s=n.locale??mV,i=n.firstWeekContainsDate??((f=(u=n.locale)==null?void 0:u.options)==null?void 0:f.firstWeekContainsDate)??1,a=n.weekStartsOn??((m=(p=n.locale)==null?void 0:p.options)==null?void 0:m.weekStartsOn)??0,o=ks(t,r==null?void 0:r.in);if(!jH(o))throw new RangeError("Invalid time value");let l=e.match(TV).map(b=>{const B=b[0];if(B==="p"||B==="P"){const _=bV[B];return _(b,s.formatLong)}return b}).join("").match(FV).map(b=>{if(b==="''")return{isToken:!1,value:"'"};const B=b[0];if(B==="'")return{isToken:!1,value:LV(b)};if(t_[B])return{isToken:!0,value:b};if(B.match(QV))throw new RangeError("Format string contains an unescaped latin alphabet character `"+B+"`");return{isToken:!1,value:b}});s.localize.preprocessor&&(l=s.localize.preprocessor(o,l));const c={firstWeekContainsDate:i,weekStartsOn:a,locale:s};return l.map(b=>{if(!b.isToken)return b.value;const B=b.value;(NV(B)||_V(B))&&IV(B,e,String(t));const _=t_[B[0]];return _(o,B,s.localize,c)}).join("")}function LV(t){const e=t.match(UV);return e?e[1].replace(PV,"'"):t}function jV(t,e,r){return SH(t,-14,r)}function kV(t,e,r){return FH(t,-1,r)}/*!
 * html2canvas 1.4.1 <https://html2canvas.hertzen.com>
 * Copyright (c) 2022 Niklas von Hertzen <https://hertzen.com>
 * Released under MIT License
 *//*! *****************************************************************************
Copyright (c) Microsoft Corporation.

Permission to use, copy, modify, and/or distribute this software for any
purpose with or without fee is hereby granted.

THE SOFTWARE IS PROVIDED "AS IS" AND THE AUTHOR DISCLAIMS ALL WARRANTIES WITH
REGARD TO THIS SOFTWARE INCLUDING ALL IMPLIED WARRANTIES OF MERCHANTABILITY
AND FITNESS. IN NO EVENT SHALL THE AUTHOR BE LIABLE FOR ANY SPECIAL, DIRECT,
INDIRECT, OR CONSEQUENTIAL DAMAGES OR ANY DAMAGES WHATSOEVER RESULTING FROM
LOSS OF USE, DATA OR PROFITS, WHETHER IN AN ACTION OF CONTRACT, NEGLIGENCE OR
OTHER TORTIOUS ACTION, ARISING OUT OF OR IN CONNECTION WITH THE USE OR
PERFORMANCE OF THIS SOFTWARE.
***************************************************************************** */var S2=function(t,e){return S2=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,n){r.__proto__=n}||function(r,n){for(var s in n)Object.prototype.hasOwnProperty.call(n,s)&&(r[s]=n[s])},S2(t,e)};function ha(t,e){if(typeof e!="function"&&e!==null)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");S2(t,e);function r(){this.constructor=t}t.prototype=e===null?Object.create(e):(r.prototype=e.prototype,new r)}var F2=function(){return F2=Object.assign||function(e){for(var r,n=1,s=arguments.length;n<s;n++){r=arguments[n];for(var i in r)Object.prototype.hasOwnProperty.call(r,i)&&(e[i]=r[i])}return e},F2.apply(this,arguments)};function Fs(t,e,r,n){function s(i){return i instanceof r?i:new r(function(a){a(i)})}return new(r||(r=Promise))(function(i,a){function o(u){try{c(n.next(u))}catch(f){a(f)}}function l(u){try{c(n.throw(u))}catch(f){a(f)}}function c(u){u.done?i(u.value):s(u.value).then(o,l)}c((n=n.apply(t,[])).next())})}function ws(t,e){var r={label:0,sent:function(){if(i[0]&1)throw i[1];return i[1]},trys:[],ops:[]},n,s,i,a;return a={next:o(0),throw:o(1),return:o(2)},typeof Symbol=="function"&&(a[Symbol.iterator]=function(){return this}),a;function o(c){return function(u){return l([c,u])}}function l(c){if(n)throw new TypeError("Generator is already executing.");for(;r;)try{if(n=1,s&&(i=c[0]&2?s.return:c[0]?s.throw||((i=s.return)&&i.call(s),0):s.next)&&!(i=i.call(s,c[1])).done)return i;switch(s=0,i&&(c=[c[0]&2,i.value]),c[0]){case 0:case 1:i=c;break;case 4:return r.label++,{value:c[1],done:!1};case 5:r.label++,s=c[1],c=[0];continue;case 7:c=r.ops.pop(),r.trys.pop();continue;default:if(i=r.trys,!(i=i.length>0&&i[i.length-1])&&(c[0]===6||c[0]===2)){r=0;continue}if(c[0]===3&&(!i||c[1]>i[0]&&c[1]<i[3])){r.label=c[1];break}if(c[0]===6&&r.label<i[1]){r.label=i[1],i=c;break}if(i&&r.label<i[2]){r.label=i[2],r.ops.push(c);break}i[2]&&r.ops.pop(),r.trys.pop();continue}c=e.call(t,r)}catch(u){c=[6,u],s=0}finally{n=i=0}if(c[0]&5)throw c[1];return{value:c[0]?c[1]:void 0,done:!0}}}function Vm(t,e,r){if(arguments.length===2)for(var n=0,s=e.length,i;n<s;n++)(i||!(n in e))&&(i||(i=Array.prototype.slice.call(e,0,n)),i[n]=e[n]);return t.concat(i||e)}var Vo=function(){function t(e,r,n,s){this.left=e,this.top=r,this.width=n,this.height=s}return t.prototype.add=function(e,r,n,s){return new t(this.left+e,this.top+r,this.width+n,this.height+s)},t.fromClientRect=function(e,r){return new t(r.left+e.windowBounds.left,r.top+e.windowBounds.top,r.width,r.height)},t.fromDOMRectList=function(e,r){var n=Array.from(r).find(function(s){return s.width!==0});return n?new t(n.left+e.windowBounds.left,n.top+e.windowBounds.top,n.width,n.height):t.EMPTY},t.EMPTY=new t(0,0,0,0),t}(),iw=function(t,e){return Vo.fromClientRect(t,e.getBoundingClientRect())},DV=function(t){var e=t.body,r=t.documentElement;if(!e||!r)throw new Error("Unable to get document size");var n=Math.max(Math.max(e.scrollWidth,r.scrollWidth),Math.max(e.offsetWidth,r.offsetWidth),Math.max(e.clientWidth,r.clientWidth)),s=Math.max(Math.max(e.scrollHeight,r.scrollHeight),Math.max(e.offsetHeight,r.offsetHeight),Math.max(e.clientHeight,r.clientHeight));return new Vo(0,0,n,s)},aw=function(t){for(var e=[],r=0,n=t.length;r<n;){var s=t.charCodeAt(r++);if(s>=55296&&s<=56319&&r<n){var i=t.charCodeAt(r++);(i&64512)===56320?e.push(((s&1023)<<10)+(i&1023)+65536):(e.push(s),r--)}else e.push(s)}return e},vn=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];if(String.fromCodePoint)return String.fromCodePoint.apply(String,t);var r=t.length;if(!r)return"";for(var n=[],s=-1,i="";++s<r;){var a=t[s];a<=65535?n.push(a):(a-=65536,n.push((a>>10)+55296,a%1024+56320)),(s+1===r||n.length>16384)&&(i+=String.fromCharCode.apply(String,n),n.length=0)}return i},i_="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",RV=typeof Uint8Array>"u"?[]:new Uint8Array(256);for(var Km=0;Km<i_.length;Km++)RV[i_.charCodeAt(Km)]=Km;var a_="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",rf=typeof Uint8Array>"u"?[]:new Uint8Array(256);for(var qm=0;qm<a_.length;qm++)rf[a_.charCodeAt(qm)]=qm;var MV=function(t){var e=t.length*.75,r=t.length,n,s=0,i,a,o,l;t[t.length-1]==="="&&(e--,t[t.length-2]==="="&&e--);var c=typeof ArrayBuffer<"u"&&typeof Uint8Array<"u"&&typeof Uint8Array.prototype.slice<"u"?new ArrayBuffer(e):new Array(e),u=Array.isArray(c)?c:new Uint8Array(c);for(n=0;n<r;n+=4)i=rf[t.charCodeAt(n)],a=rf[t.charCodeAt(n+1)],o=rf[t.charCodeAt(n+2)],l=rf[t.charCodeAt(n+3)],u[s++]=i<<2|a>>4,u[s++]=(a&15)<<4|o>>2,u[s++]=(o&3)<<6|l&63;return c},OV=function(t){for(var e=t.length,r=[],n=0;n<e;n+=2)r.push(t[n+1]<<8|t[n]);return r},HV=function(t){for(var e=t.length,r=[],n=0;n<e;n+=4)r.push(t[n+3]<<24|t[n+2]<<16|t[n+1]<<8|t[n]);return r},xc=5,fB=11,by=2,VV=fB-xc,uU=65536>>xc,KV=1<<xc,By=KV-1,qV=1024>>xc,GV=uU+qV,zV=GV,$V=32,WV=zV+$V,XV=65536>>fB,JV=1<<VV,YV=JV-1,o_=function(t,e,r){return t.slice?t.slice(e,r):new Uint16Array(Array.prototype.slice.call(t,e,r))},ZV=function(t,e,r){return t.slice?t.slice(e,r):new Uint32Array(Array.prototype.slice.call(t,e,r))},e7=function(t,e){var r=MV(t),n=Array.isArray(r)?HV(r):new Uint32Array(r),s=Array.isArray(r)?OV(r):new Uint16Array(r),i=24,a=o_(s,i/2,n[4]/2),o=n[5]===2?o_(s,(i+n[4])/2):ZV(n,Math.ceil((i+n[4])/4));return new t7(n[0],n[1],n[2],n[3],a,o)},t7=function(){function t(e,r,n,s,i,a){this.initialValue=e,this.errorValue=r,this.highStart=n,this.highValueIndex=s,this.index=i,this.data=a}return t.prototype.get=function(e){var r;if(e>=0){if(e<55296||e>56319&&e<=65535)return r=this.index[e>>xc],r=(r<<by)+(e&By),this.data[r];if(e<=65535)return r=this.index[uU+(e-55296>>xc)],r=(r<<by)+(e&By),this.data[r];if(e<this.highStart)return r=WV-XV+(e>>fB),r=this.index[r],r+=e>>xc&YV,r=this.index[r],r=(r<<by)+(e&By),this.data[r];if(e<=1114111)return this.data[this.highValueIndex]}return this.errorValue},t}(),A_="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",r7=typeof Uint8Array>"u"?[]:new Uint8Array(256);for(var Gm=0;Gm<A_.length;Gm++)r7[A_.charCodeAt(Gm)]=Gm;var n7="KwAAAAAAAAAACA4AUD0AADAgAAACAAAAAAAIABAAGABAAEgAUABYAGAAaABgAGgAYgBqAF8AZwBgAGgAcQB5AHUAfQCFAI0AlQCdAKIAqgCyALoAYABoAGAAaABgAGgAwgDKAGAAaADGAM4A0wDbAOEA6QDxAPkAAQEJAQ8BFwF1AH0AHAEkASwBNAE6AUIBQQFJAVEBWQFhAWgBcAF4ATAAgAGGAY4BlQGXAZ8BpwGvAbUBvQHFAc0B0wHbAeMB6wHxAfkBAQIJAvEBEQIZAiECKQIxAjgCQAJGAk4CVgJeAmQCbAJ0AnwCgQKJApECmQKgAqgCsAK4ArwCxAIwAMwC0wLbAjAA4wLrAvMC+AIAAwcDDwMwABcDHQMlAy0DNQN1AD0DQQNJA0kDSQNRA1EDVwNZA1kDdQB1AGEDdQBpA20DdQN1AHsDdQCBA4kDkQN1AHUAmQOhA3UAdQB1AHUAdQB1AHUAdQB1AHUAdQB1AHUAdQB1AHUAdQB1AKYDrgN1AHUAtgO+A8YDzgPWAxcD3gPjA+sD8wN1AHUA+wMDBAkEdQANBBUEHQQlBCoEFwMyBDgEYABABBcDSARQBFgEYARoBDAAcAQzAXgEgASIBJAEdQCXBHUAnwSnBK4EtgS6BMIEyAR1AHUAdQB1AHUAdQCVANAEYABgAGAAYABgAGAAYABgANgEYADcBOQEYADsBPQE/AQEBQwFFAUcBSQFLAU0BWQEPAVEBUsFUwVbBWAAYgVgAGoFcgV6BYIFigWRBWAAmQWfBaYFYABgAGAAYABgAKoFYACxBbAFuQW6BcEFwQXHBcEFwQXPBdMF2wXjBeoF8gX6BQIGCgYSBhoGIgYqBjIGOgZgAD4GRgZMBmAAUwZaBmAAYABgAGAAYABgAGAAYABgAGAAYABgAGIGYABpBnAGYABgAGAAYABgAGAAYABgAGAAYAB4Bn8GhQZgAGAAYAB1AHcDFQSLBmAAYABgAJMGdQA9A3UAmwajBqsGqwaVALMGuwbDBjAAywbSBtIG1QbSBtIG0gbSBtIG0gbdBuMG6wbzBvsGAwcLBxMHAwcbByMHJwcsBywHMQcsB9IGOAdAB0gHTgfSBkgHVgfSBtIG0gbSBtIG0gbSBtIG0gbSBiwHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAdgAGAALAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAdbB2MHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsB2kH0gZwB64EdQB1AHUAdQB1AHUAdQB1AHUHfQdgAIUHjQd1AHUAlQedB2AAYAClB6sHYACzB7YHvgfGB3UAzgfWBzMB3gfmB1EB7gf1B/0HlQENAQUIDQh1ABUIHQglCBcDLQg1CD0IRQhNCEEDUwh1AHUAdQBbCGMIZAhlCGYIZwhoCGkIYwhkCGUIZghnCGgIaQhjCGQIZQhmCGcIaAhpCGMIZAhlCGYIZwhoCGkIYwhkCGUIZghnCGgIaQhjCGQIZQhmCGcIaAhpCGMIZAhlCGYIZwhoCGkIYwhkCGUIZghnCGgIaQhjCGQIZQhmCGcIaAhpCGMIZAhlCGYIZwhoCGkIYwhkCGUIZghnCGgIaQhjCGQIZQhmCGcIaAhpCGMIZAhlCGYIZwhoCGkIYwhkCGUIZghnCGgIaQhjCGQIZQhmCGcIaAhpCGMIZAhlCGYIZwhoCGkIYwhkCGUIZghnCGgIaQhjCGQIZQhmCGcIaAhpCGMIZAhlCGYIZwhoCGkIYwhkCGUIZghnCGgIaQhjCGQIZQhmCGcIaAhpCGMIZAhlCGYIZwhoCGkIYwhkCGUIZghnCGgIaQhjCGQIZQhmCGcIaAhpCGMIZAhlCGYIZwhoCGkIYwhkCGUIZghnCGgIaQhjCGQIZQhmCGcIaAhpCGMIZAhlCGYIZwhoCGkIYwhkCGUIZghnCGgIaQhjCGQIZQhmCGcIaAhpCGMIZAhlCGYIZwhoCGkIYwhkCGUIZghnCGgIaQhjCGQIZQhmCGcIaAhpCGMIZAhlCGYIZwhoCGkIYwhkCGUIZghnCGgIaQhjCGQIZQhmCGcIaAhpCGMIZAhlCGYIZwhoCGkIYwhkCGUIZghnCGgIaQhjCGQIZQhmCGcIaAhpCGMIZAhlCGYIZwhoCGkIYwhkCGUIZghnCGgIaQhjCGQIZQhmCGcIaAhpCGMIZAhlCGYIZwhoCGkIYwhkCGUIZghnCGgIaQhjCGQIZQhmCGcIaAhpCGMIZAhlCGYIZwhoCGkIYwhkCGUIZghnCGgIaQhjCGQIZQhmCGcIaAhpCGMIZAhlCGYIZwhoCGkIYwhkCGUIZghnCGgIcAh3CHoIMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwAIIIggiCCIIIggiCCIIIggiCCIIIggiCCIIIggiCCIIIggiCCIIIggiCCIIIggiCCIIIggiCCIIIggiCCIIIgggwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAALAcsBywHLAcsBywHLAcsBywHLAcsB4oILAcsB44I0gaWCJ4Ipgh1AHUAqgiyCHUAdQB1AHUAdQB1AHUAdQB1AHUAtwh8AXUAvwh1AMUIyQjRCNkI4AjoCHUAdQB1AO4I9gj+CAYJDgkTCS0HGwkjCYIIggiCCIIIggiCCIIIggiCCIIIggiCCIIIggiCCIIIggiCCIIIggiCCIIIggiCCIIIggiCCIIIggiCCIIIggiAAIAAAAFAAYABgAGIAXwBgAHEAdQBFAJUAogCyAKAAYABgAEIA4ABGANMA4QDxAMEBDwE1AFwBLAE6AQEBUQF4QkhCmEKoQrhCgAHIQsAB0MLAAcABwAHAAeDC6ABoAHDCwMMAAcABwAHAAdDDGMMAAcAB6MM4wwjDWMNow3jDaABoAGgAaABoAGgAaABoAGgAaABoAGgAaABoAGgAaABoAGgAaABoAEjDqABWw6bDqABpg6gAaABoAHcDvwOPA+gAaABfA/8DvwO/A78DvwO/A78DvwO/A78DvwO/A78DvwO/A78DvwO/A78DvwO/A78DvwO/A78DvwO/A78DpcPAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcAB9cPKwkyCToJMAB1AHUAdQBCCUoJTQl1AFUJXAljCWcJawkwADAAMAAwAHMJdQB2CX4JdQCECYoJjgmWCXUAngkwAGAAYABxAHUApgn3A64JtAl1ALkJdQDACTAAMAAwADAAdQB1AHUAdQB1AHUAdQB1AHUAowYNBMUIMAAwADAAMADICcsJ0wnZCRUE4QkwAOkJ8An4CTAAMAB1AAAKvwh1AAgKDwoXCh8KdQAwACcKLgp1ADYKqAmICT4KRgowADAAdQB1AE4KMAB1AFYKdQBeCnUAZQowADAAMAAwADAAMAAwADAAMAAVBHUAbQowADAAdQC5CXUKMAAwAHwBxAijBogEMgF9CoQKiASMCpQKmgqIBKIKqgquCogEDQG2Cr4KxgrLCjAAMADTCtsKCgHjCusK8Qr5CgELMAAwADAAMAB1AIsECQsRC3UANAEZCzAAMAAwADAAMAB1ACELKQswAHUANAExCzkLdQBBC0kLMABRC1kLMAAwADAAMAAwADAAdQBhCzAAMAAwAGAAYABpC3ELdwt/CzAAMACHC4sLkwubC58Lpwt1AK4Ltgt1APsDMAAwADAAMAAwADAAMAAwAL4LwwvLC9IL1wvdCzAAMADlC+kL8Qv5C/8LSQswADAAMAAwADAAMAAwADAAMAAHDDAAMAAwADAAMAAODBYMHgx1AHUAdQB1AHUAdQB1AHUAdQB1AHUAdQB1AHUAdQB1AHUAdQB1AHUAdQB1AHUAdQB1AHUAdQB1ACYMMAAwADAAdQB1AHUALgx1AHUAdQB1AHUAdQA2DDAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwAHUAdQB1AHUAdQB1AHUAdQB1AHUAdQB1AHUAdQB1AHUAdQB1AD4MdQBGDHUAdQB1AHUAdQB1AEkMdQB1AHUAdQB1AFAMMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwAHUAdQB1AHUAdQB1AHUAdQB1AHUAdQB1AHUAdQBYDHUAdQB1AF8MMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAB1AHUAdQB1AHUAdQB1AHUAdQB1AHUAdQB1AHUAdQB1AHUA+wMVBGcMMAAwAHwBbwx1AHcMfwyHDI8MMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAYABgAJcMMAAwADAAdQB1AJ8MlQClDDAAMACtDCwHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsB7UMLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHdQB1AHUAdQB1AHUAdQB1AHUAdQB1AHUAdQB1AA0EMAC9DDAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAsBywHLAcsBywHLAcsBywHLQcwAMEMyAwsBywHLAcsBywHLAcsBywHLAcsBywHzAwwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwAHUAdQB1ANQM2QzhDDAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMABgAGAAYABgAGAAYABgAOkMYADxDGAA+AwADQYNYABhCWAAYAAODTAAMAAwADAAFg1gAGAAHg37AzAAMAAwADAAYABgACYNYAAsDTQNPA1gAEMNPg1LDWAAYABgAGAAYABgAGAAYABgAGAAUg1aDYsGVglhDV0NcQBnDW0NdQ15DWAAYABgAGAAYABgAGAAYABgAGAAYABgAGAAYABgAGAAlQCBDZUAiA2PDZcNMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAnw2nDTAAMAAwADAAMAAwAHUArw23DTAAMAAwADAAMAAwADAAMAAwADAAMAB1AL8NMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAB1AHUAdQB1AHUAdQDHDTAAYABgAM8NMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAA1w11ANwNMAAwAD0B5A0wADAAMAAwADAAMADsDfQN/A0EDgwOFA4wABsOMAAwADAAMAAwADAAMAAwANIG0gbSBtIG0gbSBtIG0gYjDigOwQUuDsEFMw7SBjoO0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIGQg5KDlIOVg7SBtIGXg5lDm0OdQ7SBtIGfQ6EDooOjQ6UDtIGmg6hDtIG0gaoDqwO0ga0DrwO0gZgAGAAYADEDmAAYAAkBtIGzA5gANIOYADaDokO0gbSBt8O5w7SBu8O0gb1DvwO0gZgAGAAxA7SBtIG0gbSBtIGYABgAGAAYAAED2AAsAUMD9IG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIGFA8sBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAccD9IGLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHJA8sBywHLAcsBywHLAccDywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywPLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAc0D9IG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIGLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAccD9IG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIGFA8sBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHPA/SBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gYUD0QPlQCVAJUAMAAwADAAMACVAJUAlQCVAJUAlQCVAEwPMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAA//8EAAQABAAEAAQABAAEAAQABAANAAMAAQABAAIABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQACgATABcAHgAbABoAHgAXABYAEgAeABsAGAAPABgAHABLAEsASwBLAEsASwBLAEsASwBLABgAGAAeAB4AHgATAB4AUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQABYAGwASAB4AHgAeAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAWAA0AEQAeAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArAAQABAAEAAQABAAFAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAJABYAGgAbABsAGwAeAB0AHQAeAE8AFwAeAA0AHgAeABoAGwBPAE8ADgBQAB0AHQAdAE8ATwAXAE8ATwBPABYAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAB0AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAdAFAAUABQAFAAUABQAFAAUAAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAFAAHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAeAB4AHgAeAFAATwBAAE8ATwBPAEAATwBQAFAATwBQAB4AHgAeAB4AHgAeAB0AHQAdAB0AHgAdAB4ADgBQAFAAUABQAFAAHgAeAB4AHgAeAB4AHgBQAB4AUAAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4ABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAJAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAkACQAJAAkACQAJAAkABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAeAB4AHgAeAFAAHgAeAB4AKwArAFAAUABQAFAAGABQACsAKwArACsAHgAeAFAAHgBQAFAAUAArAFAAKwAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AKwAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4ABAAEAAQABAAEAAQABAAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArACsAUAAeAB4AHgAeAB4AHgBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAYAA0AKwArAB4AHgAbACsABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQADQAEAB4ABAAEAB4ABAAEABMABAArACsAKwArACsAKwArACsAVgBWAFYAVgBWAFYAVgBWAFYAVgBWAFYAVgBWAFYAVgBWAFYAVgBWAFYAVgBWAFYAVgBWAFYAKwArACsAKwBWAFYAVgBWAB4AHgArACsAKwArACsAKwArACsAKwArACsAHgAeAB4AHgAeAB4AHgAeAB4AGgAaABoAGAAYAB4AHgAEAAQABAAEAAQABAAEAAQABAAEAAQAEwAEACsAEwATAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABABLAEsASwBLAEsASwBLAEsASwBLABoAGQAZAB4AUABQAAQAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQABMAUAAEAAQABAAEAAQABAAEAB4AHgAEAAQABAAEAAQABABQAFAABAAEAB4ABAAEAAQABABQAFAASwBLAEsASwBLAEsASwBLAEsASwBQAFAAUAAeAB4AUAAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AKwAeAFAABABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAABAAEAAQABAAEAAQABAAEAAQABAAEAFAAKwArACsAKwArACsAKwArACsAKwArACsAKwArAEsASwBLAEsASwBLAEsASwBLAEsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAABAAEAAQABAAEAAQABAAEAAQAUABQAB4AHgAYABMAUAArACsABAAbABsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAEAAQABAAEAFAABAAEAAQABAAEAFAABAAEAAQAUAAEAAQABAAEAAQAKwArAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAEAAQABAArACsAHgArAFAAUABQAFAAUABQAFAAUABQAFAAUAArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArAFAAUABQAFAAUABQAFAAUABQAFAAKwArACsAKwArACsAKwArACsAKwArAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAB4ABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAAQABAAEAFAABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQAUAAEAAQABAAEAAQABAAEAFAAUABQAFAAUABQAFAAUABQAFAABAAEAA0ADQBLAEsASwBLAEsASwBLAEsASwBLAB4AUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAEAAQABAArAFAAUABQAFAAUABQAFAAUAArACsAUABQACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwBQAFAAUABQAFAAUABQACsAUAArACsAKwBQAFAAUABQACsAKwAEAFAABAAEAAQABAAEAAQABAArACsABAAEACsAKwAEAAQABABQACsAKwArACsAKwArACsAKwAEACsAKwArACsAUABQACsAUABQAFAABAAEACsAKwBLAEsASwBLAEsASwBLAEsASwBLAFAAUAAaABoAUABQAFAAUABQAEwAHgAbAFAAHgAEACsAKwAEAAQABAArAFAAUABQAFAAUABQACsAKwArACsAUABQACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwBQAFAAUABQAFAAUABQACsAUABQACsAUABQACsAUABQACsAKwAEACsABAAEAAQABAAEACsAKwArACsABAAEACsAKwAEAAQABAArACsAKwAEACsAKwArACsAKwArACsAUABQAFAAUAArAFAAKwArACsAKwArACsAKwBLAEsASwBLAEsASwBLAEsASwBLAAQABABQAFAAUAAEAB4AKwArACsAKwArACsAKwArACsAKwAEAAQABAArAFAAUABQAFAAUABQAFAAUABQACsAUABQAFAAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwBQAFAAUABQAFAAUABQACsAUABQACsAUABQAFAAUABQACsAKwAEAFAABAAEAAQABAAEAAQABAAEACsABAAEAAQAKwAEAAQABAArACsAUAArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwBQAFAABAAEACsAKwBLAEsASwBLAEsASwBLAEsASwBLAB4AGwArACsAKwArACsAKwArAFAABAAEAAQABAAEAAQAKwAEAAQABAArAFAAUABQAFAAUABQAFAAUAArACsAUABQACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAAQABAAEAAQABAArACsABAAEACsAKwAEAAQABAArACsAKwArACsAKwArAAQABAAEACsAKwArACsAUABQACsAUABQAFAABAAEACsAKwBLAEsASwBLAEsASwBLAEsASwBLAB4AUABQAFAAUABQAFAAUAArACsAKwArACsAKwArACsAKwArAAQAUAArAFAAUABQAFAAUABQACsAKwArAFAAUABQACsAUABQAFAAUAArACsAKwBQAFAAKwBQACsAUABQACsAKwArAFAAUAArACsAKwBQAFAAUAArACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUAArACsAKwArAAQABAAEAAQABAArACsAKwAEAAQABAArAAQABAAEAAQAKwArAFAAKwArACsAKwArACsABAArACsAKwArACsAKwArACsAKwArAEsASwBLAEsASwBLAEsASwBLAEsAUABQAFAAHgAeAB4AHgAeAB4AGwAeACsAKwArACsAKwAEAAQABAAEAAQAUABQAFAAUABQAFAAUABQACsAUABQAFAAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwArACsAUAAEAAQABAAEAAQABAAEACsABAAEAAQAKwAEAAQABAAEACsAKwArACsAKwArACsABAAEACsAUABQAFAAKwArACsAKwArAFAAUAAEAAQAKwArAEsASwBLAEsASwBLAEsASwBLAEsAKwArACsAKwArACsAKwAOAFAAUABQAFAAUABQAFAAHgBQAAQABAAEAA4AUABQAFAAUABQAFAAUABQACsAUABQAFAAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArAFAAUABQAFAAUABQAFAAUABQAFAAKwBQAFAAUABQAFAAKwArAAQAUAAEAAQABAAEAAQABAAEACsABAAEAAQAKwAEAAQABAAEACsAKwArACsAKwArACsABAAEACsAKwArACsAKwArACsAUAArAFAAUAAEAAQAKwArAEsASwBLAEsASwBLAEsASwBLAEsAKwBQAFAAKwArACsAKwArACsAKwArACsAKwArACsAKwAEAAQABAAEAFAAUABQAFAAUABQAFAAUABQACsAUABQAFAAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAABAAEAFAABAAEAAQABAAEAAQABAArAAQABAAEACsABAAEAAQABABQAB4AKwArACsAKwBQAFAAUAAEAFAAUABQAFAAUABQAFAAUABQAFAABAAEACsAKwBLAEsASwBLAEsASwBLAEsASwBLAFAAUABQAFAAUABQAFAAUABQABoAUABQAFAAUABQAFAAKwAEAAQABAArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArAFAAUABQAFAAUABQAFAAUABQACsAUAArACsAUABQAFAAUABQAFAAUAArACsAKwAEACsAKwArACsABAAEAAQABAAEAAQAKwAEACsABAAEAAQABAAEAAQABAAEACsAKwArACsAKwArAEsASwBLAEsASwBLAEsASwBLAEsAKwArAAQABAAeACsAKwArACsAKwArACsAKwArACsAKwArAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXAAqAFwAXAAqACoAKgAqACoAKgAqACsAKwArACsAGwBcAFwAXABcAFwAXABcACoAKgAqACoAKgAqACoAKgAeAEsASwBLAEsASwBLAEsASwBLAEsADQANACsAKwArACsAKwBcAFwAKwBcACsAXABcAFwAXABcACsAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcACsAXAArAFwAXABcAFwAXABcAFwAXABcAFwAKgBcAFwAKgAqACoAKgAqACoAKgAqACoAXAArACsAXABcAFwAXABcACsAXAArACoAKgAqACoAKgAqACsAKwBLAEsASwBLAEsASwBLAEsASwBLACsAKwBcAFwAXABcAFAADgAOAA4ADgAeAA4ADgAJAA4ADgANAAkAEwATABMAEwATAAkAHgATAB4AHgAeAAQABAAeAB4AHgAeAB4AHgBLAEsASwBLAEsASwBLAEsASwBLAFAAUABQAFAAUABQAFAAUABQAFAADQAEAB4ABAAeAAQAFgARABYAEQAEAAQAUABQAFAAUABQAFAAUABQACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwArACsAKwAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQADQAEAAQABAAEAAQADQAEAAQAUABQAFAAUABQAAQABAAEAAQABAAEAAQABAAEAAQABAArAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAArAA0ADQAeAB4AHgAeAB4AHgAEAB4AHgAeAB4AHgAeACsAHgAeAA4ADgANAA4AHgAeAB4AHgAeAAkACQArACsAKwArACsAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcACoAKgAqACoAKgAqACoAKgAqACoAKgAqACoAKgAqACoAKgAqACoAKgBcAEsASwBLAEsASwBLAEsASwBLAEsADQANAB4AHgAeAB4AXABcAFwAXABcAFwAKgAqACoAKgBcAFwAXABcACoAKgAqAFwAKgAqACoAXABcACoAKgAqACoAKgAqACoAXABcAFwAKgAqACoAKgBcAFwAXABcAFwAXABcAFwAXABcAFwAXABcACoAKgAqACoAKgAqACoAKgAqACoAKgAqAFwAKgBLAEsASwBLAEsASwBLAEsASwBLACoAKgAqACoAKgAqAFAAUABQAFAAUABQACsAUAArACsAKwArACsAUAArACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAHgBQAFAAUABQAFgAWABYAFgAWABYAFgAWABYAFgAWABYAFgAWABYAFgAWABYAFgAWABYAFgAWABYAFgAWABYAFgAWABYAFgAWABZAFkAWQBZAFkAWQBZAFkAWQBZAFkAWQBZAFkAWQBZAFkAWQBZAFkAWQBZAFkAWQBZAFkAWQBZAFkAWQBZAFkAWgBaAFoAWgBaAFoAWgBaAFoAWgBaAFoAWgBaAFoAWgBaAFoAWgBaAFoAWgBaAFoAWgBaAFoAWgBaAFoAWgBaAFAAUABQAFAAUABQAFAAUABQACsAUABQAFAAUAArACsAUABQAFAAUABQAFAAUAArAFAAKwBQAFAAUABQACsAKwBQAFAAUABQAFAAUABQAFAAUAArAFAAUABQAFAAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArAFAAUABQAFAAKwArAFAAUABQAFAAUABQAFAAKwBQACsAUABQAFAAUAArACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwBQAFAAUABQACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArACsABAAEAAQAHgANAB4AHgAeAB4AHgAeAB4AUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAHgAeAB4AHgAeAB4AHgAeAB4AHgArACsAKwArACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAKwBQAFAAUABQAFAAUAArACsADQBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAHgAeAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAANAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAWABEAKwArACsAUABQAFAAUABQAFAAUABQAFAAUABQAA0ADQANAFAAUABQAFAAUABQAFAAUABQAFAAUAArACsAKwArACsAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwBQAFAAUABQAAQABAAEACsAKwArACsAKwArACsAKwArACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAEAAQABAANAA0AKwArACsAKwArACsAKwArACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAABAAEACsAKwArACsAKwArACsAKwArACsAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwBQAFAAUAArAAQABAArACsAKwArACsAKwArACsAKwArACsAKwBcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAKgAqACoAKgAqACoAKgAqACoAKgAqACoAKgAqACoAKgAqACoAKgAqAA0ADQAVAFwADQAeAA0AGwBcACoAKwArAEsASwBLAEsASwBLAEsASwBLAEsAKwArACsAKwArACsAUABQAFAAUABQAFAAUABQAFAAUAArACsAKwArACsAKwAeAB4AEwATAA0ADQAOAB4AEwATAB4ABAAEAAQACQArAEsASwBLAEsASwBLAEsASwBLAEsAKwArACsAKwArACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArACsAKwArACsAKwArAFAAUABQAFAAUAAEAAQAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAAQAUAArACsAKwArACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArACsAKwArACsAKwArACsAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwAEAAQABAAEAAQABAAEAAQABAAEAAQABAArACsAKwArAAQABAAEAAQABAAEAAQABAAEAAQABAAEACsAKwArACsAHgArACsAKwATABMASwBLAEsASwBLAEsASwBLAEsASwBcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXAArACsAXABcAFwAXABcACsAKwArACsAKwArACsAKwArACsAKwBcAFwAXABcAFwAXABcAFwAXABcAFwAXAArACsAKwArAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcACsAKwArACsAKwArAEsASwBLAEsASwBLAEsASwBLAEsAXAArACsAKwAqACoAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAAQABAAEAAQABAArACsAHgAeAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcACoAKgAqACoAKgAqACoAKgAqACoAKwAqACoAKgAqACoAKgAqACoAKgAqACoAKgAqACoAKgAqACoAKgAqACoAKgAqACoAKgAqACoAKgAqACoAKwArAAQASwBLAEsASwBLAEsASwBLAEsASwArACsAKwArACsAKwBLAEsASwBLAEsASwBLAEsASwBLACsAKwArACsAKwArACoAKgAqACoAKgAqACoAXAAqACoAKgAqACoAKgArACsABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsABAAEAAQABAAEAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAAQABAAEAAQABABQAFAAUABQAFAAUABQACsAKwArACsASwBLAEsASwBLAEsASwBLAEsASwANAA0AHgANAA0ADQANAB4AHgAeAB4AHgAeAB4AHgAeAB4ABAAEAAQABAAEAAQABAAEAAQAHgAeAB4AHgAeAB4AHgAeAB4AKwArACsABAAEAAQAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAABAAEAAQABAAEAAQABAAEAAQABAAEAAQABABQAFAASwBLAEsASwBLAEsASwBLAEsASwBQAFAAUABQAFAAUABQAFAABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEACsAKwArACsAKwArACsAKwAeAB4AHgAeAFAAUABQAFAABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEACsAKwArAA0ADQANAA0ADQBLAEsASwBLAEsASwBLAEsASwBLACsAKwArAFAAUABQAEsASwBLAEsASwBLAEsASwBLAEsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAA0ADQBQAFAAUABQAFAAUABQAFAAUAArACsAKwArACsAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAKwBQAFAAUAAeAB4AHgAeAB4AHgAeAB4AKwArACsAKwArACsAKwArAAQABAAEAB4ABAAEAAQABAAEAAQABAAEAAQABAAEAAQABABQAFAAUABQAAQAUABQAFAAUABQAFAABABQAFAABAAEAAQAUAArACsAKwArACsABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEACsABAAEAAQABAAEAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AKwArAFAAUABQAFAAUABQACsAKwBQAFAAUABQAFAAUABQAFAAKwBQACsAUAArAFAAKwAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeACsAKwAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgArAB4AHgAeAB4AHgAeAB4AHgBQAB4AHgAeAFAAUABQACsAHgAeAB4AHgAeAB4AHgAeAB4AHgBQAFAAUABQACsAKwAeAB4AHgAeAB4AHgArAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AKwArAFAAUABQACsAHgAeAB4AHgAeAB4AHgAOAB4AKwANAA0ADQANAA0ADQANAAkADQANAA0ACAAEAAsABAAEAA0ACQANAA0ADAAdAB0AHgAXABcAFgAXABcAFwAWABcAHQAdAB4AHgAUABQAFAANAAEAAQAEAAQABAAEAAQACQAaABoAGgAaABoAGgAaABoAHgAXABcAHQAVABUAHgAeAB4AHgAeAB4AGAAWABEAFQAVABUAHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4ADQAeAA0ADQANAA0AHgANAA0ADQAHAB4AHgAeAB4AKwAEAAQABAAEAAQABAAEAAQABAAEAFAAUAArACsATwBQAFAAUABQAFAAHgAeAB4AFgARAE8AUABPAE8ATwBPAFAAUABQAFAAUAAeAB4AHgAWABEAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAKwArABsAGwAbABsAGwAbABsAGgAbABsAGwAbABsAGwAbABsAGwAbABsAGwAbABsAGgAbABsAGwAbABoAGwAbABoAGwAbABsAGwAbABsAGwAbABsAGwAbABsAGwAbABsAGwAbAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQAHgAeAFAAGgAeAB0AHgBQAB4AGgAeAB4AHgAeAB4AHgAeAB4AHgBPAB4AUAAbAB4AHgBQAFAAUABQAFAAHgAeAB4AHQAdAB4AUAAeAFAAHgBQAB4AUABPAFAAUAAeAB4AHgAeAB4AHgAeAFAAUABQAFAAUAAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAFAAHgBQAFAAUABQAE8ATwBQAFAAUABQAFAATwBQAFAATwBQAE8ATwBPAE8ATwBPAE8ATwBPAE8ATwBPAFAAUABQAFAATwBPAE8ATwBPAE8ATwBPAE8ATwBQAFAAUABQAFAAUABQAFAAUAAeAB4AUABQAFAAUABPAB4AHgArACsAKwArAB0AHQAdAB0AHQAdAB0AHQAdAB0AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB0AHgAdAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAdAB4AHQAdAB4AHgAeAB0AHQAeAB4AHQAeAB4AHgAdAB4AHQAbABsAHgAdAB4AHgAeAB4AHQAeAB4AHQAdAB0AHQAeAB4AHQAeAB0AHgAdAB0AHQAdAB0AHQAeAB0AHgAeAB4AHgAeAB0AHQAdAB0AHgAeAB4AHgAdAB0AHgAeAB4AHgAeAB4AHgAeAB4AHgAdAB4AHgAeAB0AHgAeAB4AHgAeAB0AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAdAB0AHgAeAB0AHQAdAB0AHgAeAB0AHQAeAB4AHQAdAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB0AHQAeAB4AHQAdAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHQAeAB4AHgAdAB4AHgAeAB4AHgAeAB4AHQAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB0AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AFAAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeABYAEQAWABEAHgAeAB4AHgAeAB4AHQAeAB4AHgAeAB4AHgAeACUAJQAeAB4AHgAeAB4AHgAeAB4AHgAWABEAHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AJQAlACUAJQAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArAE8ATwBPAE8ATwBPAE8ATwBPAE8ATwBPAE8ATwBPAE8ATwBPAE8ATwBPAE8ATwBPAE8ATwBPAE8ATwBPAE8ATwAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAE8ATwBPAE8ATwBPAE8ATwBPAE8ATwBPAE8ATwBPAE8ATwBPAE8ATwBPAFAAHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHgAeAB4AHgAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAeAB4AHQAdAB0AHQAeAB4AHgAeAB4AHgAeAB4AHgAeAB0AHQAeAB0AHQAdAB0AHQAdAB0AHgAeAB4AHgAeAB4AHgAeAB0AHQAeAB4AHQAdAB4AHgAeAB4AHQAdAB4AHgAeAB4AHQAdAB0AHgAeAB0AHgAeAB0AHQAdAB0AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAdAB0AHQAdAB4AHgAeAB4AHgAeAB4AHgAeAB0AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAlACUAJQAlAB4AHQAdAB4AHgAdAB4AHgAeAB4AHQAdAB4AHgAeAB4AJQAlAB0AHQAlAB4AJQAlACUAIAAlACUAHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAlACUAJQAeAB4AHgAeAB0AHgAdAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAdAB0AHgAdAB0AHQAeAB0AJQAdAB0AHgAdAB0AHgAdAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeACUAHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHQAdAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAlACUAJQAlACUAJQAlACUAJQAlACUAJQAdAB0AHQAdACUAHgAlACUAJQAdACUAJQAdAB0AHQAlACUAHQAdACUAHQAdACUAJQAlAB4AHQAeAB4AHgAeAB0AHQAlAB0AHQAdAB0AHQAdACUAJQAlACUAJQAdACUAJQAgACUAHQAdACUAJQAlACUAJQAlACUAJQAeAB4AHgAlACUAIAAgACAAIAAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB0AHgAeAB4AFwAXABcAFwAXABcAHgATABMAJQAeAB4AHgAWABEAFgARABYAEQAWABEAFgARABYAEQAWABEATwBPAE8ATwBPAE8ATwBPAE8ATwBPAE8ATwBPAE8ATwBPAE8ATwBPAE8ATwAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeABYAEQAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAWABEAFgARABYAEQAWABEAFgARAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AFgARABYAEQAWABEAFgARABYAEQAWABEAFgARABYAEQAWABEAFgARABYAEQAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAWABEAFgARAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AFgARAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAdAB0AHQAdAB0AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgArACsAHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AKwAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AUABQAFAAUAAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAEAAQABAAeAB4AKwArACsAKwArABMADQANAA0AUAATAA0AUABQAFAAUABQAFAAUABQACsAKwArACsAKwArACsAUAANACsAKwArACsAKwArACsAKwArACsAKwArACsAKwAEAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArACsAKwArACsAKwArACsAKwBQAFAAUABQAFAAUABQACsAUABQAFAAUABQAFAAUAArAFAAUABQAFAAUABQAFAAKwBQAFAAUABQAFAAUABQACsAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXAA0ADQANAA0ADQANAA0ADQAeAA0AFgANAB4AHgAXABcAHgAeABcAFwAWABEAFgARABYAEQAWABEADQANAA0ADQATAFAADQANAB4ADQANAB4AHgAeAB4AHgAMAAwADQANAA0AHgANAA0AFgANAA0ADQANAA0ADQANAA0AHgANAB4ADQANAB4AHgAeACsAKwArACsAKwArACsAKwArACsAKwArACsAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACsAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAKwArACsAKwArACsAKwArACsAKwArACsAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwAlACUAJQAlACUAJQAlACUAJQAlACUAJQArACsAKwArAA0AEQARACUAJQBHAFcAVwAWABEAFgARABYAEQAWABEAFgARACUAJQAWABEAFgARABYAEQAWABEAFQAWABEAEQAlAFcAVwBXAFcAVwBXAFcAVwBXAAQABAAEAAQABAAEACUAVwBXAFcAVwA2ACUAJQBXAFcAVwBHAEcAJQAlACUAKwBRAFcAUQBXAFEAVwBRAFcAUQBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFEAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBRAFcAUQBXAFEAVwBXAFcAVwBXAFcAUQBXAFcAVwBXAFcAVwBRAFEAKwArAAQABAAVABUARwBHAFcAFQBRAFcAUQBXAFEAVwBRAFcAUQBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFEAVwBRAFcAUQBXAFcAVwBXAFcAVwBRAFcAVwBXAFcAVwBXAFEAUQBXAFcAVwBXABUAUQBHAEcAVwArACsAKwArACsAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAKwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAKwAlACUAVwBXAFcAVwAlACUAJQAlACUAJQAlACUAJQAlACsAKwArACsAKwArACsAKwArACsAKwArAFEAUQBRAFEAUQBRAFEAUQBRAFEAUQBRAFEAUQBRAFEAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQArAFcAVwBXAFcAVwBXAFcAVwBXAFcAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQBPAE8ATwBPAE8ATwBPAE8AJQBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXACUAJQAlAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAEcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAKwArACsAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQArACsAKwArACsAKwArACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAADQATAA0AUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABLAEsASwBLAEsASwBLAEsASwBLAFAAUAArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAFAABAAEAAQABAAeAAQABAAEAAQABAAEAAQABAAEAAQAHgBQAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AUABQAAQABABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAAQABAAeAA0ADQANAA0ADQArACsAKwArACsAKwArACsAHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAFAAUABQAFAAUABQAFAAUABQAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AUAAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgBQAB4AHgAeAB4AHgAeAFAAHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgArACsAHgAeAB4AHgAeAB4AHgAeAB4AKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwAeAB4AUABQAFAAUABQAFAAUABQAFAAUABQAAQAUABQAFAABABQAFAAUABQAAQAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAAQABAAEAAQABAAeAB4AHgAeAAQAKwArACsAUABQAFAAUABQAFAAHgAeABoAHgArACsAKwArACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAADgAOABMAEwArACsAKwArACsAKwArACsABAAEAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAAQABAAEAAQABAAEACsAKwArACsAKwArACsAKwANAA0ASwBLAEsASwBLAEsASwBLAEsASwArACsAKwArACsAKwAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABABQAFAAUABQAFAAUAAeAB4AHgBQAA4AUABQAAQAUABQAFAAUABQAFAABAAEAAQABAAEAAQABAAEAA0ADQBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQAKwArACsAKwArACsAKwArACsAKwArAB4AWABYAFgAWABYAFgAWABYAFgAWABYAFgAWABYAFgAWABYAFgAWABYAFgAWABYAFgAWABYAFgAWABYACsAKwArAAQAHgAeAB4AHgAeAB4ADQANAA0AHgAeAB4AHgArAFAASwBLAEsASwBLAEsASwBLAEsASwArACsAKwArAB4AHgBcAFwAXABcAFwAKgBcAFwAXABcAFwAXABcAFwAXABcAEsASwBLAEsASwBLAEsASwBLAEsAXABcAFwAXABcACsAUABQAFAAUABQAFAAUABQAFAABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEACsAKwArACsAKwArACsAKwArAFAAUABQAAQAUABQAFAAUABQAFAAUABQAAQABAArACsASwBLAEsASwBLAEsASwBLAEsASwArACsAHgANAA0ADQBcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAKgAqACoAXAAqACoAKgBcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXAAqAFwAKgAqACoAXABcACoAKgBcAFwAXABcAFwAKgAqAFwAKgBcACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArAFwAXABcACoAKgBQAFAAUABQAFAAUABQAFAAUABQAFAABAAEAAQABAAEAA0ADQBQAFAAUAAEAAQAKwArACsAKwArACsAKwArACsAKwBQAFAAUABQAFAAUAArACsAUABQAFAAUABQAFAAKwArAFAAUABQAFAAUABQACsAKwArACsAKwArACsAKwArAFAAUABQAFAAUABQAFAAKwBQAFAAUABQAFAAUABQACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAHgAeACsAKwArACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAEAAQABAAEAAQABAAEAAQADQAEAAQAKwArAEsASwBLAEsASwBLAEsASwBLAEsAKwArACsAKwArACsAVABVAFUAVQBVAFUAVQBVAFUAVQBVAFUAVQBVAFUAVQBVAFUAVQBVAFUAVQBVAFUAVQBVAFUAVQBUAFUAVQBVAFUAVQBVAFUAVQBVAFUAVQBVAFUAVQBVAFUAVQBVAFUAVQBVAFUAVQBVAFUAVQBVACsAKwArACsAKwArACsAKwArACsAKwArAFkAWQBZAFkAWQBZAFkAWQBZAFkAWQBZAFkAWQBZAFkAWQBZAFkAKwArACsAKwBaAFoAWgBaAFoAWgBaAFoAWgBaAFoAWgBaAFoAWgBaAFoAWgBaAFoAWgBaAFoAWgBaAFoAWgBaAFoAKwArACsAKwAGAAYABgAGAAYABgAGAAYABgAGAAYABgAGAAYABgAGAAYABgAGAAYABgAGAAYABgAGAAYABgAGAAYABgAGAAYAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXACUAJQBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAJQAlACUAJQAlACUAUABQAFAAUABQAFAAUAArACsAKwArACsAKwArACsAKwArACsAKwBQAFAAUABQAFAAKwArACsAKwArAFYABABWAFYAVgBWAFYAVgBWAFYAVgBWAB4AVgBWAFYAVgBWAFYAVgBWAFYAVgBWAFYAVgArAFYAVgBWAFYAVgArAFYAKwBWAFYAKwBWAFYAKwBWAFYAVgBWAFYAVgBWAFYAVgBWAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAEQAWAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUAAaAB4AKwArAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQAGAARABEAGAAYABMAEwAWABEAFAArACsAKwArACsAKwAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEACUAJQAlACUAJQAWABEAFgARABYAEQAWABEAFgARABYAEQAlACUAFgARACUAJQAlACUAJQAlACUAEQAlABEAKwAVABUAEwATACUAFgARABYAEQAWABEAJQAlACUAJQAlACUAJQAlACsAJQAbABoAJQArACsAKwArAFAAUABQAFAAUAArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwArAAcAKwATACUAJQAbABoAJQAlABYAEQAlACUAEQAlABEAJQBXAFcAVwBXAFcAVwBXAFcAVwBXABUAFQAlACUAJQATACUAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXABYAJQARACUAJQAlAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwAWACUAEQAlABYAEQARABYAEQARABUAVwBRAFEAUQBRAFEAUQBRAFEAUQBRAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAEcARwArACsAVwBXAFcAVwBXAFcAKwArAFcAVwBXAFcAVwBXACsAKwBXAFcAVwBXAFcAVwArACsAVwBXAFcAKwArACsAGgAbACUAJQAlABsAGwArAB4AHgAeAB4AHgAeAB4AKwArACsAKwArACsAKwArACsAKwAEAAQABAAQAB0AKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwBQAFAAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArACsAKwArACsADQANAA0AKwArACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAKwArAB4AHgAeAB4AHgAeAB4AHgAeAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgBQAFAAHgAeAB4AKwAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAAQAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwAEAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAKwArACsAKwArACsAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwArACsAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAABAAEAAQABAAEACsAKwArACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArAA0AUABQAFAAUAArACsAKwArAFAAUABQAFAAUABQAFAAUAANAFAAUABQAFAAUAArACsAKwArACsAKwArACsAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwArACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAKwArACsAKwArACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAKwArACsAKwArACsAKwArACsAKwAeACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAUABQAFAAUABQAFAAKwArAFAAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArAFAAUAArACsAKwBQACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwANAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAeAB4AUABQAFAAUABQAFAAUAArACsAKwArACsAKwArAFAAUABQAFAAUABQAFAAUABQACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArAFAAUAArACsAKwArACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAKwArAA0AUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAKwArACsAKwAeAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAKwArACsAUABQAFAAUABQAAQABAAEACsABAAEACsAKwArACsAKwAEAAQABAAEAFAAUABQAFAAKwBQAFAAUAArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwArAAQABAAEACsAKwArACsABABQAFAAUABQAFAAUABQAFAAUAArACsAKwArACsAKwArAA0ADQANAA0ADQANAA0ADQAeACsAKwArACsAKwArACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAeAFAAUABQAFAAUABQAFAAUAAeAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAAQABAArACsAKwArAFAAUABQAFAAUAANAA0ADQANAA0ADQAUACsAKwArACsAKwArACsAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwArACsADQANAA0ADQANAA0ADQBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArACsAKwArACsAKwArAB4AHgAeAB4AKwArACsAKwArACsAKwArACsAKwArACsAUABQAFAAUABQAFAAUAArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArAFAAUABQAFAAUABQAFAAUABQACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAKwArACsAKwArACsAKwArACsAKwArACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArACsAKwArACsAKwArAFAAUABQAFAAUABQAAQABAAEAAQAKwArACsAKwArACsAKwArAEsASwBLAEsASwBLAEsASwBLAEsAKwArACsAKwArACsAUABQAFAAUABQAFAAUABQAFAAUAArAAQABAANACsAKwBQAFAAKwArACsAKwArACsAKwArACsAKwArACsAKwArAFAAUABQAFAAUABQAAQABAAEAAQABAAEAAQABAAEAAQABABQAFAAUABQAB4AHgAeAB4AHgArACsAKwArACsAKwAEAAQABAAEAAQABAAEAA0ADQAeAB4AHgAeAB4AKwArACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAEsASwBLAEsASwBLAEsASwBLAEsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsABABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAAQABAAEAAQABAAEAAQABAAEAAQABAAeAB4AHgANAA0ADQANACsAKwArACsAKwArACsAKwArACsAKwAeACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwArACsAKwArACsAKwBLAEsASwBLAEsASwBLAEsASwBLACsAKwArACsAKwArAFAAUABQAFAAUABQAFAABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEACsASwBLAEsASwBLAEsASwBLAEsASwANAA0ADQANAFAABAAEAFAAKwArACsAKwArACsAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAABAAeAA4AUAArACsAKwArACsAKwArACsAKwAEAFAAUABQAFAADQANAB4ADQAEAAQABAAEAB4ABAAEAEsASwBLAEsASwBLAEsASwBLAEsAUAAOAFAADQANAA0AKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwArACsAKwArACsAKwArACsAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAEAAQABAAEAAQABAAEAAQABAAEAAQABAANAA0AHgANAA0AHgAEACsAUABQAFAAUABQAFAAUAArAFAAKwBQAFAAUABQACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwBQAFAAUABQAFAAUABQAFAAUABQAA0AKwArACsAKwArACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAEAAQABAAEAAQABAAEAAQABAAEAAQAKwArACsAKwArAEsASwBLAEsASwBLAEsASwBLAEsAKwArACsAKwArACsABAAEAAQABAArAFAAUABQAFAAUABQAFAAUAArACsAUABQACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwBQAFAAUABQAFAAUABQACsAUABQACsAUABQAFAAUABQACsABAAEAFAABAAEAAQABAAEAAQABAArACsABAAEACsAKwAEAAQABAArACsAUAArACsAKwArACsAKwAEACsAKwArACsAKwBQAFAAUABQAFAABAAEACsAKwAEAAQABAAEAAQABAAEACsAKwArAAQABAAEAAQABAArACsAKwArACsAKwArACsAKwArACsABAAEAAQABAAEAAQABABQAFAAUABQAA0ADQANAA0AHgBLAEsASwBLAEsASwBLAEsASwBLAA0ADQArAB4ABABQAFAAUAArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwAEAAQABAAEAFAAUAAeAFAAKwArACsAKwArACsAKwArAEsASwBLAEsASwBLAEsASwBLAEsAKwArACsAKwArACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAABAAEAAQABAAEAAQABAArACsABAAEAAQABAAEAAQABAAEAAQADgANAA0AEwATAB4AHgAeAA0ADQANAA0ADQANAA0ADQANAA0ADQANAA0ADQANAFAAUABQAFAABAAEACsAKwAEAA0ADQAeAFAAKwArACsAKwArACsAKwArACsAKwArAEsASwBLAEsASwBLAEsASwBLAEsAKwArACsAKwArACsADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAFAAKwArACsAKwArACsAKwBLAEsASwBLAEsASwBLAEsASwBLACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAKwArACoAKgAqACoAKgAqACoAKgAqACoAKgAqACoAKgAqACsAKwArACsASwBLAEsASwBLAEsASwBLAEsASwBcAFwADQANAA0AKgBQAFAAUABQAFAAUABQAFAAUABQAFAAUAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAeACsAKwArACsASwBLAEsASwBLAEsASwBLAEsASwBQAFAAUABQAFAAUABQAFAAUAArACsAKwArACsAKwArACsAKwArACsAKwBQAFAAUABQAFAAUABQAFAAKwArAFAAKwArAFAAUABQAFAAUABQAFAAUAArAFAAUAArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAABAAEAAQABAAEAAQAKwAEAAQAKwArAAQABAAEAAQAUAAEAFAABAAEAA0ADQANACsAKwArACsAKwArACsAKwArAEsASwBLAEsASwBLAEsASwBLAEsAKwArACsAKwArACsAUABQAFAAUABQAFAAUABQACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAABAAEAAQABAAEAAQABAArACsABAAEAAQABAAEAAQABABQAA4AUAAEACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArAFAABAAEAAQABAAEAAQABAAEAAQABABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAEAAQABAAEAAQABAAEAFAABAAEAAQABAAOAB4ADQANAA0ADQAOAB4ABAArACsAKwArACsAKwArACsAUAAEAAQABAAEAAQABAAEAAQABAAEAAQAUABQAFAAUABQAFAAUABQAFAAUAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAA0ADQANAFAADgAOAA4ADQANACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwBQAFAAUABQAFAAUABQAFAAUAArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAABAAEAAQABAAEAAQABAAEACsABAAEAAQABAAEAAQABAAEAFAADQANAA0ADQANACsAKwArACsAKwArACsAKwArACsASwBLAEsASwBLAEsASwBLAEsASwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArACsAKwAOABMAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwArAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAArAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAArACsAKwArACsAKwArACsAKwBQAFAAUABQAFAAUABQACsAUABQACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAEAAQABAAEAAQABAArACsAKwAEACsABAAEACsABAAEAAQABAAEAAQABABQAAQAKwArACsAKwArACsAKwArAEsASwBLAEsASwBLAEsASwBLAEsAKwArACsAKwArACsAUABQAFAAUABQAFAAKwBQAFAAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAEAAQABAAEAAQAKwAEAAQAKwAEAAQABAAEAAQAUAArACsAKwArACsAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAABAAEAAQABAAeAB4AKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwBQACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAB4AHgAeAB4AHgAeAB4AHgAaABoAGgAaAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgArACsAKwArACsAKwArACsAKwArACsAKwArAA0AUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAKwArACsAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsADQANAA0ADQANACsAKwArACsAKwArACsAKwArACsAKwBQAFAAUABQACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAASABIAEgAQwBDAEMAUABQAFAAUABDAFAAUABQAEgAQwBIAEMAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAASABDAEMAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwAJAAkACQAJAAkACQAJABYAEQArACsAKwArACsAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABIAEMAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArAEsASwBLAEsASwBLAEsASwBLAEsAKwArACsAKwANAA0AKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwArAAQABAAEAAQABAANACsAKwArACsAKwArACsAKwArACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAEAAQABAAEAAQABAAEAA0ADQANAB4AHgAeAB4AHgAeAFAAUABQAFAADQAeACsAKwArACsAKwArACsAKwArACsASwBLAEsASwBLAEsASwBLAEsASwArAFAAUABQAFAAUABQAFAAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArACsAKwArACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAANAA0AHgAeACsAKwArACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAKwArACsAKwAEAFAABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQAKwArACsAKwArACsAKwAEAAQABAAEAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAARwBHABUARwAJACsAKwArACsAKwArACsAKwArACsAKwAEAAQAKwArACsAKwArACsAKwArACsAKwArACsAKwArAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXACsAKwArACsAKwArACsAKwBXAFcAVwBXAFcAVwBXAFcAVwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAUQBRAFEAKwArACsAKwArACsAKwArACsAKwArACsAKwBRAFEAUQBRACsAKwArACsAKwArACsAKwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXACsAKwArACsAUABQAFAAUABQAFAAUABQAFAAUABQACsAKwArACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAKwArACsAKwArACsAUABQAFAAUABQAFAAUABQAFAAUAArACsAHgAEAAQADQAEAAQABAAEACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgArACsAKwArACsAKwArACsAKwArAB4AHgAeAB4AHgAeAB4AKwArAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAAQABAAEAAQABAAeAB4AHgAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAB4AHgAEAAQABAAEAAQABAAEAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4ABAAEAAQABAAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4ABAAEAAQAHgArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAKwArACsAKwArACsAKwArACsAKwArAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgArACsAKwArACsAKwArACsAKwAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgArAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AKwBQAFAAKwArAFAAKwArAFAAUAArACsAUABQAFAAUAArAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeACsAUAArAFAAUABQAFAAUABQAFAAKwAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AKwBQAFAAUABQACsAKwBQAFAAUABQAFAAUABQAFAAKwBQAFAAUABQAFAAUABQACsAHgAeAFAAUABQAFAAUAArAFAAKwArACsAUABQAFAAUABQAFAAUAArAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAHgBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgBQAFAAUABQAFAAUABQAFAAUABQAFAAHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAB4AHgAeAB4AHgAeAB4AHgAeACsAKwBLAEsASwBLAEsASwBLAEsASwBLAEsASwBLAEsASwBLAEsASwBLAEsASwBLAEsASwBLAEsASwBLAEsASwBLAEsASwBLAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAeAB4AHgAeAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAeAB4AHgAeAB4AHgAeAB4ABAAeAB4AHgAeAB4AHgAeAB4AHgAeAAQAHgAeAA0ADQANAA0AHgArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwAEAAQABAAEAAQAKwAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArAAQABAAEAAQABAAEAAQAKwAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQAKwArAAQABAAEAAQABAAEAAQAKwAEAAQAKwAEAAQABAAEAAQAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArACsAKwAEAAQABAAEAAQABAAEAFAAUABQAFAAUABQAFAAKwArAEsASwBLAEsASwBLAEsASwBLAEsAKwArACsAKwBQAB4AKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUAAEAAQABAAEAEsASwBLAEsASwBLAEsASwBLAEsAKwArACsAKwArABsAUABQAFAAUABQACsAKwBQAFAAUABQAFAAUABQAFAAUAAEAAQABAAEAAQABAAEACsAKwArACsAKwArACsAKwArAB4AHgAeAB4ABAAEAAQABAAEAAQABABQACsAKwArACsASwBLAEsASwBLAEsASwBLAEsASwArACsAKwArABYAFgArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAGgBQAFAAUAAaAFAAUABQAFAAKwArACsAKwArACsAKwArACsAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAeAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAKwBQAFAAUABQACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwBQAFAAKwBQACsAKwBQACsAUABQAFAAUABQAFAAUABQAFAAUAArAFAAUABQAFAAKwBQACsAUAArACsAKwArACsAKwBQACsAKwArACsAUAArAFAAKwBQACsAUABQAFAAKwBQAFAAKwBQACsAKwBQACsAUAArAFAAKwBQACsAUAArAFAAUAArAFAAKwArAFAAUABQAFAAKwBQAFAAUABQAFAAUABQACsAUABQAFAAUAArAFAAUABQAFAAKwBQACsAUABQAFAAUABQAFAAUABQAFAAUAArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArACsAKwArACsAUABQAFAAKwBQAFAAUABQAFAAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwAeAB4AKwArACsAKwArACsAKwArACsAKwArACsAKwArAE8ATwBPAE8ATwBPAE8ATwBPAE8ATwBPAE8AJQAlACUAHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHgAeAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB4AHgAeACUAJQAlAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQApACkAKQApACkAKQApACkAKQApACkAKQApACkAKQApACkAKQApACkAKQApACkAKQApACkAJQAlACUAJQAlACAAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAeAB4AJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlAB4AHgAlACUAJQAlACUAHgAlACUAJQAlACUAIAAgACAAJQAlACAAJQAlACAAIAAgACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACEAIQAhACEAIQAlACUAIAAgACUAJQAgACAAIAAgACAAIAAgACAAIAAgACAAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAJQAlACUAIAAlACUAJQAlACAAIAAgACUAIAAgACAAJQAlACUAJQAlACUAJQAgACUAIAAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAHgAlAB4AJQAeACUAJQAlACUAJQAgACUAJQAlACUAHgAlAB4AHgAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlAB4AHgAeAB4AHgAeAB4AJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAeAB4AHgAeAB4AHgAeAB4AHgAeACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACAAIAAlACUAJQAlACAAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACAAJQAlACUAJQAgACAAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAHgAeAB4AHgAeAB4AHgAeACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAeAB4AHgAeAB4AHgAlACUAJQAlACUAJQAlACAAIAAgACUAJQAlACAAIAAgACAAIAAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeABcAFwAXABUAFQAVAB4AHgAeAB4AJQAlACUAIAAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACAAIAAgACUAJQAlACUAJQAlACUAJQAlACAAJQAlACUAJQAlACUAJQAlACUAJQAlACAAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AJQAlACUAJQAlACUAJQAlACUAJQAlACUAHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AJQAlACUAJQAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeACUAJQAlACUAJQAlACUAJQAeAB4AHgAeAB4AHgAeAB4AHgAeACUAJQAlACUAJQAlAB4AHgAeAB4AHgAeAB4AHgAlACUAJQAlACUAJQAlACUAHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAgACUAJQAgACUAJQAlACUAJQAlACUAJQAgACAAIAAgACAAIAAgACAAJQAlACUAJQAlACUAIAAlACUAJQAlACUAJQAlACUAJQAgACAAIAAgACAAIAAgACAAIAAgACUAJQAgACAAIAAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAgACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACAAIAAlACAAIAAlACAAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAgACAAIAAlACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAJQAlAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AKwAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArAEsASwBLAEsASwBLAEsASwBLAEsAKwArACsAKwArACsAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAKwArAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXACUAJQBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwAlACUAJQAlACUAJQAlACUAJQAlACUAVwBXACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAKwAEACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArAA==",l_=50,s7=1,dU=2,hU=3,i7=4,a7=5,c_=7,fU=8,u_=9,GA=10,T2=11,d_=12,U2=13,o7=14,nf=15,P2=16,zm=17,kh=18,A7=19,h_=20,Q2=21,Dh=22,Cy=23,_u=24,ii=25,sf=26,af=27,Nu=28,l7=29,uc=30,c7=31,$m=32,Wm=33,L2=34,j2=35,k2=36,gp=37,D2=38,Jg=39,Yg=40,Ey=41,pU=42,u7=43,d7=[9001,65288],mU="!",or="",Xm="",R2=e7(n7),ho=[uc,k2],M2=[s7,dU,hU,a7],gU=[GA,fU],f_=[af,sf],h7=M2.concat(gU),p_=[D2,Jg,Yg,L2,j2],f7=[nf,U2],p7=function(t,e){e===void 0&&(e="strict");var r=[],n=[],s=[];return t.forEach(function(i,a){var o=R2.get(i);if(o>l_?(s.push(!0),o-=l_):s.push(!1),["normal","auto","loose"].indexOf(e)!==-1&&[8208,8211,12316,12448].indexOf(i)!==-1)return n.push(a),r.push(P2);if(o===i7||o===T2){if(a===0)return n.push(a),r.push(uc);var l=r[a-1];return h7.indexOf(l)===-1?(n.push(n[a-1]),r.push(l)):(n.push(a),r.push(uc))}if(n.push(a),o===c7)return r.push(e==="strict"?Q2:gp);if(o===pU||o===l7)return r.push(uc);if(o===u7)return i>=131072&&i<=196605||i>=196608&&i<=262141?r.push(gp):r.push(uc);r.push(o)}),[n,r,s]},_y=function(t,e,r,n){var s=n[r];if(Array.isArray(t)?t.indexOf(s)!==-1:t===s)for(var i=r;i<=n.length;){i++;var a=n[i];if(a===e)return!0;if(a!==GA)break}if(s===GA)for(var i=r;i>0;){i--;var o=n[i];if(Array.isArray(t)?t.indexOf(o)!==-1:t===o)for(var l=r;l<=n.length;){l++;var a=n[l];if(a===e)return!0;if(a!==GA)break}if(o!==GA)break}return!1},m_=function(t,e){for(var r=t;r>=0;){var n=e[r];if(n===GA)r--;else return n}return 0},m7=function(t,e,r,n,s){if(r[n]===0)return or;var i=n-1;if(Array.isArray(s)&&s[i]===!0)return or;var a=i-1,o=i+1,l=e[i],c=a>=0?e[a]:0,u=e[o];if(l===dU&&u===hU)return or;if(M2.indexOf(l)!==-1)return mU;if(M2.indexOf(u)!==-1||gU.indexOf(u)!==-1)return or;if(m_(i,e)===fU)return Xm;if(R2.get(t[i])===T2||(l===$m||l===Wm)&&R2.get(t[o])===T2||l===c_||u===c_||l===u_||[GA,U2,nf].indexOf(l)===-1&&u===u_||[zm,kh,A7,_u,Nu].indexOf(u)!==-1||m_(i,e)===Dh||_y(Cy,Dh,i,e)||_y([zm,kh],Q2,i,e)||_y(d_,d_,i,e))return or;if(l===GA)return Xm;if(l===Cy||u===Cy)return or;if(u===P2||l===P2)return Xm;if([U2,nf,Q2].indexOf(u)!==-1||l===o7||c===k2&&f7.indexOf(l)!==-1||l===Nu&&u===k2||u===h_||ho.indexOf(u)!==-1&&l===ii||ho.indexOf(l)!==-1&&u===ii||l===af&&[gp,$m,Wm].indexOf(u)!==-1||[gp,$m,Wm].indexOf(l)!==-1&&u===sf||ho.indexOf(l)!==-1&&f_.indexOf(u)!==-1||f_.indexOf(l)!==-1&&ho.indexOf(u)!==-1||[af,sf].indexOf(l)!==-1&&(u===ii||[Dh,nf].indexOf(u)!==-1&&e[o+1]===ii)||[Dh,nf].indexOf(l)!==-1&&u===ii||l===ii&&[ii,Nu,_u].indexOf(u)!==-1)return or;if([ii,Nu,_u,zm,kh].indexOf(u)!==-1)for(var f=i;f>=0;){var p=e[f];if(p===ii)return or;if([Nu,_u].indexOf(p)!==-1)f--;else break}if([af,sf].indexOf(u)!==-1)for(var f=[zm,kh].indexOf(l)!==-1?a:i;f>=0;){var p=e[f];if(p===ii)return or;if([Nu,_u].indexOf(p)!==-1)f--;else break}if(D2===l&&[D2,Jg,L2,j2].indexOf(u)!==-1||[Jg,L2].indexOf(l)!==-1&&[Jg,Yg].indexOf(u)!==-1||[Yg,j2].indexOf(l)!==-1&&u===Yg||p_.indexOf(l)!==-1&&[h_,sf].indexOf(u)!==-1||p_.indexOf(u)!==-1&&l===af||ho.indexOf(l)!==-1&&ho.indexOf(u)!==-1||l===_u&&ho.indexOf(u)!==-1||ho.concat(ii).indexOf(l)!==-1&&u===Dh&&d7.indexOf(t[o])===-1||ho.concat(ii).indexOf(u)!==-1&&l===kh)return or;if(l===Ey&&u===Ey){for(var m=r[i],b=1;m>0&&(m--,e[m]===Ey);)b++;if(b%2!==0)return or}return l===$m&&u===Wm?or:Xm},g7=function(t,e){e||(e={lineBreak:"normal",wordBreak:"normal"});var r=p7(t,e.lineBreak),n=r[0],s=r[1],i=r[2];(e.wordBreak==="break-all"||e.wordBreak==="break-word")&&(s=s.map(function(o){return[ii,uc,pU].indexOf(o)!==-1?gp:o}));var a=e.wordBreak==="keep-all"?i.map(function(o,l){return o&&t[l]>=19968&&t[l]<=40959}):void 0;return[n,s,a]},v7=function(){function t(e,r,n,s){this.codePoints=e,this.required=r===mU,this.start=n,this.end=s}return t.prototype.slice=function(){return vn.apply(void 0,this.codePoints.slice(this.start,this.end))},t}(),w7=function(t,e){var r=aw(t),n=g7(r,e),s=n[0],i=n[1],a=n[2],o=r.length,l=0,c=0;return{next:function(){if(c>=o)return{done:!0,value:null};for(var u=or;c<o&&(u=m7(r,i,s,++c,a))===or;);if(u!==or||c===o){var f=new v7(r,u,l,c);return l=c,{value:f,done:!1}}return{done:!0,value:null}}}},y7=1,x7=2,qp=4,g_=8,z0=10,v_=47,_f=92,b7=9,B7=32,Jm=34,Rh=61,C7=35,E7=36,_7=37,Ym=39,Zm=40,Mh=41,N7=95,Ks=45,I7=33,S7=60,F7=62,T7=64,U7=91,P7=93,Q7=61,L7=123,eg=63,j7=125,w_=124,k7=126,D7=128,y_=65533,Ny=42,mc=43,R7=44,M7=58,O7=59,vp=46,H7=0,V7=8,K7=11,q7=14,G7=31,z7=127,Fa=-1,vU=48,wU=97,yU=101,$7=102,W7=117,X7=122,xU=65,bU=69,BU=70,J7=85,Y7=90,ys=function(t){return t>=vU&&t<=57},Z7=function(t){return t>=55296&&t<=57343},Iu=function(t){return ys(t)||t>=xU&&t<=BU||t>=wU&&t<=$7},e9=function(t){return t>=wU&&t<=X7},t9=function(t){return t>=xU&&t<=Y7},r9=function(t){return e9(t)||t9(t)},n9=function(t){return t>=D7},tg=function(t){return t===z0||t===b7||t===B7},$0=function(t){return r9(t)||n9(t)||t===N7},x_=function(t){return $0(t)||ys(t)||t===Ks},s9=function(t){return t>=H7&&t<=V7||t===K7||t>=q7&&t<=G7||t===z7},PA=function(t,e){return t!==_f?!1:e!==z0},rg=function(t,e,r){return t===Ks?$0(e)||PA(e,r):$0(t)?!0:!!(t===_f&&PA(t,e))},Iy=function(t,e,r){return t===mc||t===Ks?ys(e)?!0:e===vp&&ys(r):ys(t===vp?e:t)},i9=function(t){var e=0,r=1;(t[e]===mc||t[e]===Ks)&&(t[e]===Ks&&(r=-1),e++);for(var n=[];ys(t[e]);)n.push(t[e++]);var s=n.length?parseInt(vn.apply(void 0,n),10):0;t[e]===vp&&e++;for(var i=[];ys(t[e]);)i.push(t[e++]);var a=i.length,o=a?parseInt(vn.apply(void 0,i),10):0;(t[e]===bU||t[e]===yU)&&e++;var l=1;(t[e]===mc||t[e]===Ks)&&(t[e]===Ks&&(l=-1),e++);for(var c=[];ys(t[e]);)c.push(t[e++]);var u=c.length?parseInt(vn.apply(void 0,c),10):0;return r*(s+o*Math.pow(10,-a))*Math.pow(10,l*u)},a9={type:2},o9={type:3},A9={type:4},l9={type:13},c9={type:8},u9={type:21},d9={type:9},h9={type:10},f9={type:11},p9={type:12},m9={type:14},ng={type:23},g9={type:1},v9={type:25},w9={type:24},y9={type:26},x9={type:27},b9={type:28},B9={type:29},C9={type:31},O2={type:32},CU=function(){function t(){this._value=[]}return t.prototype.write=function(e){this._value=this._value.concat(aw(e))},t.prototype.read=function(){for(var e=[],r=this.consumeToken();r!==O2;)e.push(r),r=this.consumeToken();return e},t.prototype.consumeToken=function(){var e=this.consumeCodePoint();switch(e){case Jm:return this.consumeStringToken(Jm);case C7:var r=this.peekCodePoint(0),n=this.peekCodePoint(1),s=this.peekCodePoint(2);if(x_(r)||PA(n,s)){var i=rg(r,n,s)?x7:y7,a=this.consumeName();return{type:5,value:a,flags:i}}break;case E7:if(this.peekCodePoint(0)===Rh)return this.consumeCodePoint(),l9;break;case Ym:return this.consumeStringToken(Ym);case Zm:return a9;case Mh:return o9;case Ny:if(this.peekCodePoint(0)===Rh)return this.consumeCodePoint(),m9;break;case mc:if(Iy(e,this.peekCodePoint(0),this.peekCodePoint(1)))return this.reconsumeCodePoint(e),this.consumeNumericToken();break;case R7:return A9;case Ks:var o=e,l=this.peekCodePoint(0),c=this.peekCodePoint(1);if(Iy(o,l,c))return this.reconsumeCodePoint(e),this.consumeNumericToken();if(rg(o,l,c))return this.reconsumeCodePoint(e),this.consumeIdentLikeToken();if(l===Ks&&c===F7)return this.consumeCodePoint(),this.consumeCodePoint(),w9;break;case vp:if(Iy(e,this.peekCodePoint(0),this.peekCodePoint(1)))return this.reconsumeCodePoint(e),this.consumeNumericToken();break;case v_:if(this.peekCodePoint(0)===Ny)for(this.consumeCodePoint();;){var u=this.consumeCodePoint();if(u===Ny&&(u=this.consumeCodePoint(),u===v_))return this.consumeToken();if(u===Fa)return this.consumeToken()}break;case M7:return y9;case O7:return x9;case S7:if(this.peekCodePoint(0)===I7&&this.peekCodePoint(1)===Ks&&this.peekCodePoint(2)===Ks)return this.consumeCodePoint(),this.consumeCodePoint(),v9;break;case T7:var f=this.peekCodePoint(0),p=this.peekCodePoint(1),m=this.peekCodePoint(2);if(rg(f,p,m)){var a=this.consumeName();return{type:7,value:a}}break;case U7:return b9;case _f:if(PA(e,this.peekCodePoint(0)))return this.reconsumeCodePoint(e),this.consumeIdentLikeToken();break;case P7:return B9;case Q7:if(this.peekCodePoint(0)===Rh)return this.consumeCodePoint(),c9;break;case L7:return f9;case j7:return p9;case W7:case J7:var b=this.peekCodePoint(0),B=this.peekCodePoint(1);return b===mc&&(Iu(B)||B===eg)&&(this.consumeCodePoint(),this.consumeUnicodeRangeToken()),this.reconsumeCodePoint(e),this.consumeIdentLikeToken();case w_:if(this.peekCodePoint(0)===Rh)return this.consumeCodePoint(),d9;if(this.peekCodePoint(0)===w_)return this.consumeCodePoint(),u9;break;case k7:if(this.peekCodePoint(0)===Rh)return this.consumeCodePoint(),h9;break;case Fa:return O2}return tg(e)?(this.consumeWhiteSpace(),C9):ys(e)?(this.reconsumeCodePoint(e),this.consumeNumericToken()):$0(e)?(this.reconsumeCodePoint(e),this.consumeIdentLikeToken()):{type:6,value:vn(e)}},t.prototype.consumeCodePoint=function(){var e=this._value.shift();return typeof e>"u"?-1:e},t.prototype.reconsumeCodePoint=function(e){this._value.unshift(e)},t.prototype.peekCodePoint=function(e){return e>=this._value.length?-1:this._value[e]},t.prototype.consumeUnicodeRangeToken=function(){for(var e=[],r=this.consumeCodePoint();Iu(r)&&e.length<6;)e.push(r),r=this.consumeCodePoint();for(var n=!1;r===eg&&e.length<6;)e.push(r),r=this.consumeCodePoint(),n=!0;if(n){var s=parseInt(vn.apply(void 0,e.map(function(l){return l===eg?vU:l})),16),i=parseInt(vn.apply(void 0,e.map(function(l){return l===eg?BU:l})),16);return{type:30,start:s,end:i}}var a=parseInt(vn.apply(void 0,e),16);if(this.peekCodePoint(0)===Ks&&Iu(this.peekCodePoint(1))){this.consumeCodePoint(),r=this.consumeCodePoint();for(var o=[];Iu(r)&&o.length<6;)o.push(r),r=this.consumeCodePoint();var i=parseInt(vn.apply(void 0,o),16);return{type:30,start:a,end:i}}else return{type:30,start:a,end:a}},t.prototype.consumeIdentLikeToken=function(){var e=this.consumeName();return e.toLowerCase()==="url"&&this.peekCodePoint(0)===Zm?(this.consumeCodePoint(),this.consumeUrlToken()):this.peekCodePoint(0)===Zm?(this.consumeCodePoint(),{type:19,value:e}):{type:20,value:e}},t.prototype.consumeUrlToken=function(){var e=[];if(this.consumeWhiteSpace(),this.peekCodePoint(0)===Fa)return{type:22,value:""};var r=this.peekCodePoint(0);if(r===Ym||r===Jm){var n=this.consumeStringToken(this.consumeCodePoint());return n.type===0&&(this.consumeWhiteSpace(),this.peekCodePoint(0)===Fa||this.peekCodePoint(0)===Mh)?(this.consumeCodePoint(),{type:22,value:n.value}):(this.consumeBadUrlRemnants(),ng)}for(;;){var s=this.consumeCodePoint();if(s===Fa||s===Mh)return{type:22,value:vn.apply(void 0,e)};if(tg(s))return this.consumeWhiteSpace(),this.peekCodePoint(0)===Fa||this.peekCodePoint(0)===Mh?(this.consumeCodePoint(),{type:22,value:vn.apply(void 0,e)}):(this.consumeBadUrlRemnants(),ng);if(s===Jm||s===Ym||s===Zm||s9(s))return this.consumeBadUrlRemnants(),ng;if(s===_f)if(PA(s,this.peekCodePoint(0)))e.push(this.consumeEscapedCodePoint());else return this.consumeBadUrlRemnants(),ng;else e.push(s)}},t.prototype.consumeWhiteSpace=function(){for(;tg(this.peekCodePoint(0));)this.consumeCodePoint()},t.prototype.consumeBadUrlRemnants=function(){for(;;){var e=this.consumeCodePoint();if(e===Mh||e===Fa)return;PA(e,this.peekCodePoint(0))&&this.consumeEscapedCodePoint()}},t.prototype.consumeStringSlice=function(e){for(var r=5e4,n="";e>0;){var s=Math.min(r,e);n+=vn.apply(void 0,this._value.splice(0,s)),e-=s}return this._value.shift(),n},t.prototype.consumeStringToken=function(e){var r="",n=0;do{var s=this._value[n];if(s===Fa||s===void 0||s===e)return r+=this.consumeStringSlice(n),{type:0,value:r};if(s===z0)return this._value.splice(0,n),g9;if(s===_f){var i=this._value[n+1];i!==Fa&&i!==void 0&&(i===z0?(r+=this.consumeStringSlice(n),n=-1,this._value.shift()):PA(s,i)&&(r+=this.consumeStringSlice(n),r+=vn(this.consumeEscapedCodePoint()),n=-1))}n++}while(!0)},t.prototype.consumeNumber=function(){var e=[],r=qp,n=this.peekCodePoint(0);for((n===mc||n===Ks)&&e.push(this.consumeCodePoint());ys(this.peekCodePoint(0));)e.push(this.consumeCodePoint());n=this.peekCodePoint(0);var s=this.peekCodePoint(1);if(n===vp&&ys(s))for(e.push(this.consumeCodePoint(),this.consumeCodePoint()),r=g_;ys(this.peekCodePoint(0));)e.push(this.consumeCodePoint());n=this.peekCodePoint(0),s=this.peekCodePoint(1);var i=this.peekCodePoint(2);if((n===bU||n===yU)&&((s===mc||s===Ks)&&ys(i)||ys(s)))for(e.push(this.consumeCodePoint(),this.consumeCodePoint()),r=g_;ys(this.peekCodePoint(0));)e.push(this.consumeCodePoint());return[i9(e),r]},t.prototype.consumeNumericToken=function(){var e=this.consumeNumber(),r=e[0],n=e[1],s=this.peekCodePoint(0),i=this.peekCodePoint(1),a=this.peekCodePoint(2);if(rg(s,i,a)){var o=this.consumeName();return{type:15,number:r,flags:n,unit:o}}return s===_7?(this.consumeCodePoint(),{type:16,number:r,flags:n}):{type:17,number:r,flags:n}},t.prototype.consumeEscapedCodePoint=function(){var e=this.consumeCodePoint();if(Iu(e)){for(var r=vn(e);Iu(this.peekCodePoint(0))&&r.length<6;)r+=vn(this.consumeCodePoint());tg(this.peekCodePoint(0))&&this.consumeCodePoint();var n=parseInt(r,16);return n===0||Z7(n)||n>1114111?y_:n}return e===Fa?y_:e},t.prototype.consumeName=function(){for(var e="";;){var r=this.consumeCodePoint();if(x_(r))e+=vn(r);else if(PA(r,this.peekCodePoint(0)))e+=vn(this.consumeEscapedCodePoint());else return this.reconsumeCodePoint(r),e}},t}(),EU=function(){function t(e){this._tokens=e}return t.create=function(e){var r=new CU;return r.write(e),new t(r.read())},t.parseValue=function(e){return t.create(e).parseComponentValue()},t.parseValues=function(e){return t.create(e).parseComponentValues()},t.prototype.parseComponentValue=function(){for(var e=this.consumeToken();e.type===31;)e=this.consumeToken();if(e.type===32)throw new SyntaxError("Error parsing CSS component value, unexpected EOF");this.reconsumeToken(e);var r=this.consumeComponentValue();do e=this.consumeToken();while(e.type===31);if(e.type===32)return r;throw new SyntaxError("Error parsing CSS component value, multiple values found when expecting only one")},t.prototype.parseComponentValues=function(){for(var e=[];;){var r=this.consumeComponentValue();if(r.type===32)return e;e.push(r),e.push()}},t.prototype.consumeComponentValue=function(){var e=this.consumeToken();switch(e.type){case 11:case 28:case 2:return this.consumeSimpleBlock(e.type);case 19:return this.consumeFunction(e)}return e},t.prototype.consumeSimpleBlock=function(e){for(var r={type:e,values:[]},n=this.consumeToken();;){if(n.type===32||_9(n,e))return r;this.reconsumeToken(n),r.values.push(this.consumeComponentValue()),n=this.consumeToken()}},t.prototype.consumeFunction=function(e){for(var r={name:e.value,values:[],type:18};;){var n=this.consumeToken();if(n.type===32||n.type===3)return r;this.reconsumeToken(n),r.values.push(this.consumeComponentValue())}},t.prototype.consumeToken=function(){var e=this._tokens.shift();return typeof e>"u"?O2:e},t.prototype.reconsumeToken=function(e){this._tokens.unshift(e)},t}(),Gp=function(t){return t.type===15},th=function(t){return t.type===17},Fr=function(t){return t.type===20},E9=function(t){return t.type===0},H2=function(t,e){return Fr(t)&&t.value===e},_U=function(t){return t.type!==31},kd=function(t){return t.type!==31&&t.type!==4},qa=function(t){var e=[],r=[];return t.forEach(function(n){if(n.type===4){if(r.length===0)throw new Error("Error parsing function args, zero tokens for arg");e.push(r),r=[];return}n.type!==31&&r.push(n)}),r.length&&e.push(r),e},_9=function(t,e){return e===11&&t.type===12||e===28&&t.type===29?!0:e===2&&t.type===3},yl=function(t){return t.type===17||t.type===15},Nn=function(t){return t.type===16||yl(t)},NU=function(t){return t.length>1?[t[0],t[1]]:[t[0]]},os={type:17,number:0,flags:qp},pB={type:16,number:50,flags:qp},zA={type:16,number:100,flags:qp},of=function(t,e,r){var n=t[0],s=t[1];return[Dr(n,e),Dr(typeof s<"u"?s:n,r)]},Dr=function(t,e){if(t.type===16)return t.number/100*e;if(Gp(t))switch(t.unit){case"rem":case"em":return 16*t.number;case"px":default:return t.number}return t.number},IU="deg",SU="grad",FU="rad",TU="turn",ow={name:"angle",parse:function(t,e){if(e.type===15)switch(e.unit){case IU:return Math.PI*e.number/180;case SU:return Math.PI/200*e.number;case FU:return e.number;case TU:return Math.PI*2*e.number}throw new Error("Unsupported angle type")}},UU=function(t){return t.type===15&&(t.unit===IU||t.unit===SU||t.unit===FU||t.unit===TU)},PU=function(t){var e=t.filter(Fr).map(function(r){return r.value}).join(" ");switch(e){case"to bottom right":case"to right bottom":case"left top":case"top left":return[os,os];case"to top":case"bottom":return Pi(0);case"to bottom left":case"to left bottom":case"right top":case"top right":return[os,zA];case"to right":case"left":return Pi(90);case"to top left":case"to left top":case"right bottom":case"bottom right":return[zA,zA];case"to bottom":case"top":return Pi(180);case"to top right":case"to right top":case"left bottom":case"bottom left":return[zA,os];case"to left":case"right":return Pi(270)}return 0},Pi=function(t){return Math.PI*t/180},ll={name:"color",parse:function(t,e){if(e.type===18){var r=N9[e.name];if(typeof r>"u")throw new Error('Attempting to parse an unsupported color function "'+e.name+'"');return r(t,e.values)}if(e.type===5){if(e.value.length===3){var n=e.value.substring(0,1),s=e.value.substring(1,2),i=e.value.substring(2,3);return $A(parseInt(n+n,16),parseInt(s+s,16),parseInt(i+i,16),1)}if(e.value.length===4){var n=e.value.substring(0,1),s=e.value.substring(1,2),i=e.value.substring(2,3),a=e.value.substring(3,4);return $A(parseInt(n+n,16),parseInt(s+s,16),parseInt(i+i,16),parseInt(a+a,16)/255)}if(e.value.length===6){var n=e.value.substring(0,2),s=e.value.substring(2,4),i=e.value.substring(4,6);return $A(parseInt(n,16),parseInt(s,16),parseInt(i,16),1)}if(e.value.length===8){var n=e.value.substring(0,2),s=e.value.substring(2,4),i=e.value.substring(4,6),a=e.value.substring(6,8);return $A(parseInt(n,16),parseInt(s,16),parseInt(i,16),parseInt(a,16)/255)}}if(e.type===20){var o=Po[e.value.toUpperCase()];if(typeof o<"u")return o}return Po.TRANSPARENT}},cl=function(t){return(255&t)===0},Hn=function(t){var e=255&t,r=255&t>>8,n=255&t>>16,s=255&t>>24;return e<255?"rgba("+s+","+n+","+r+","+e/255+")":"rgb("+s+","+n+","+r+")"},$A=function(t,e,r,n){return(t<<24|e<<16|r<<8|Math.round(n*255)<<0)>>>0},b_=function(t,e){if(t.type===17)return t.number;if(t.type===16){var r=e===3?1:255;return e===3?t.number/100*r:Math.round(t.number/100*r)}return 0},B_=function(t,e){var r=e.filter(kd);if(r.length===3){var n=r.map(b_),s=n[0],i=n[1],a=n[2];return $A(s,i,a,1)}if(r.length===4){var o=r.map(b_),s=o[0],i=o[1],a=o[2],l=o[3];return $A(s,i,a,l)}return 0};function Sy(t,e,r){return r<0&&(r+=1),r>=1&&(r-=1),r<1/6?(e-t)*r*6+t:r<1/2?e:r<2/3?(e-t)*6*(2/3-r)+t:t}var C_=function(t,e){var r=e.filter(kd),n=r[0],s=r[1],i=r[2],a=r[3],o=(n.type===17?Pi(n.number):ow.parse(t,n))/(Math.PI*2),l=Nn(s)?s.number/100:0,c=Nn(i)?i.number/100:0,u=typeof a<"u"&&Nn(a)?Dr(a,1):1;if(l===0)return $A(c*255,c*255,c*255,1);var f=c<=.5?c*(l+1):c+l-c*l,p=c*2-f,m=Sy(p,f,o+1/3),b=Sy(p,f,o),B=Sy(p,f,o-1/3);return $A(m*255,b*255,B*255,u)},N9={hsl:C_,hsla:C_,rgb:B_,rgba:B_},Nf=function(t,e){return ll.parse(t,EU.create(e).parseComponentValue())},Po={ALICEBLUE:4042850303,ANTIQUEWHITE:4209760255,AQUA:16777215,AQUAMARINE:2147472639,AZURE:4043309055,BEIGE:4126530815,BISQUE:4293182719,BLACK:255,BLANCHEDALMOND:4293643775,BLUE:65535,BLUEVIOLET:2318131967,BROWN:2771004159,BURLYWOOD:3736635391,CADETBLUE:1604231423,CHARTREUSE:2147418367,CHOCOLATE:3530104575,CORAL:4286533887,CORNFLOWERBLUE:1687547391,CORNSILK:4294499583,CRIMSON:3692313855,CYAN:16777215,DARKBLUE:35839,DARKCYAN:9145343,DARKGOLDENROD:3095837695,DARKGRAY:2846468607,DARKGREEN:6553855,DARKGREY:2846468607,DARKKHAKI:3182914559,DARKMAGENTA:2332068863,DARKOLIVEGREEN:1433087999,DARKORANGE:4287365375,DARKORCHID:2570243327,DARKRED:2332033279,DARKSALMON:3918953215,DARKSEAGREEN:2411499519,DARKSLATEBLUE:1211993087,DARKSLATEGRAY:793726975,DARKSLATEGREY:793726975,DARKTURQUOISE:13554175,DARKVIOLET:2483082239,DEEPPINK:4279538687,DEEPSKYBLUE:12582911,DIMGRAY:1768516095,DIMGREY:1768516095,DODGERBLUE:512819199,FIREBRICK:2988581631,FLORALWHITE:4294635775,FORESTGREEN:579543807,FUCHSIA:4278255615,GAINSBORO:3705462015,GHOSTWHITE:4177068031,GOLD:4292280575,GOLDENROD:3668254975,GRAY:2155905279,GREEN:8388863,GREENYELLOW:2919182335,GREY:2155905279,HONEYDEW:4043305215,HOTPINK:4285117695,INDIANRED:3445382399,INDIGO:1258324735,IVORY:4294963455,KHAKI:4041641215,LAVENDER:3873897215,LAVENDERBLUSH:4293981695,LAWNGREEN:2096890111,LEMONCHIFFON:4294626815,LIGHTBLUE:2916673279,LIGHTCORAL:4034953471,LIGHTCYAN:3774873599,LIGHTGOLDENRODYELLOW:4210742015,LIGHTGRAY:3553874943,LIGHTGREEN:2431553791,LIGHTGREY:3553874943,LIGHTPINK:4290167295,LIGHTSALMON:4288707327,LIGHTSEAGREEN:548580095,LIGHTSKYBLUE:2278488831,LIGHTSLATEGRAY:2005441023,LIGHTSLATEGREY:2005441023,LIGHTSTEELBLUE:2965692159,LIGHTYELLOW:4294959359,LIME:16711935,LIMEGREEN:852308735,LINEN:4210091775,MAGENTA:4278255615,MAROON:2147483903,MEDIUMAQUAMARINE:1724754687,MEDIUMBLUE:52735,MEDIUMORCHID:3126187007,MEDIUMPURPLE:2473647103,MEDIUMSEAGREEN:1018393087,MEDIUMSLATEBLUE:2070474495,MEDIUMSPRINGGREEN:16423679,MEDIUMTURQUOISE:1221709055,MEDIUMVIOLETRED:3340076543,MIDNIGHTBLUE:421097727,MINTCREAM:4127193855,MISTYROSE:4293190143,MOCCASIN:4293178879,NAVAJOWHITE:4292783615,NAVY:33023,OLDLACE:4260751103,OLIVE:2155872511,OLIVEDRAB:1804477439,ORANGE:4289003775,ORANGERED:4282712319,ORCHID:3664828159,PALEGOLDENROD:4008225535,PALEGREEN:2566625535,PALETURQUOISE:2951671551,PALEVIOLETRED:3681588223,PAPAYAWHIP:4293907967,PEACHPUFF:4292524543,PERU:3448061951,PINK:4290825215,PLUM:3718307327,POWDERBLUE:2967529215,PURPLE:2147516671,REBECCAPURPLE:1714657791,RED:4278190335,ROSYBROWN:3163525119,ROYALBLUE:1097458175,SADDLEBROWN:2336560127,SALMON:4202722047,SANDYBROWN:4104413439,SEAGREEN:780883967,SEASHELL:4294307583,SIENNA:2689740287,SILVER:3233857791,SKYBLUE:2278484991,SLATEBLUE:1784335871,SLATEGRAY:1887473919,SLATEGREY:1887473919,SNOW:4294638335,SPRINGGREEN:16744447,STEELBLUE:1182971135,TAN:3535047935,TEAL:8421631,THISTLE:3636451583,TOMATO:4284696575,TRANSPARENT:0,TURQUOISE:1088475391,VIOLET:4001558271,WHEAT:4125012991,WHITE:4294967295,WHITESMOKE:4126537215,YELLOW:4294902015,YELLOWGREEN:2597139199},I9={name:"background-clip",initialValue:"border-box",prefix:!1,type:1,parse:function(t,e){return e.map(function(r){if(Fr(r))switch(r.value){case"padding-box":return 1;case"content-box":return 2}return 0})}},S9={name:"background-color",initialValue:"transparent",prefix:!1,type:3,format:"color"},Aw=function(t,e){var r=ll.parse(t,e[0]),n=e[1];return n&&Nn(n)?{color:r,stop:n}:{color:r,stop:null}},E_=function(t,e){var r=t[0],n=t[t.length-1];r.stop===null&&(r.stop=os),n.stop===null&&(n.stop=zA);for(var s=[],i=0,a=0;a<t.length;a++){var o=t[a].stop;if(o!==null){var l=Dr(o,e);l>i?s.push(l):s.push(i),i=l}else s.push(null)}for(var c=null,a=0;a<s.length;a++){var u=s[a];if(u===null)c===null&&(c=a);else if(c!==null){for(var f=a-c,p=s[c-1],m=(u-p)/(f+1),b=1;b<=f;b++)s[c+b-1]=m*b;c=null}}return t.map(function(B,_){var w=B.color;return{color:w,stop:Math.max(Math.min(1,s[_]/e),0)}})},F9=function(t,e,r){var n=e/2,s=r/2,i=Dr(t[0],e)-n,a=s-Dr(t[1],r);return(Math.atan2(a,i)+Math.PI*2)%(Math.PI*2)},T9=function(t,e,r){var n=typeof t=="number"?t:F9(t,e,r),s=Math.abs(e*Math.sin(n))+Math.abs(r*Math.cos(n)),i=e/2,a=r/2,o=s/2,l=Math.sin(n-Math.PI/2)*o,c=Math.cos(n-Math.PI/2)*o;return[s,i-c,i+c,a-l,a+l]},Zi=function(t,e){return Math.sqrt(t*t+e*e)},__=function(t,e,r,n,s){var i=[[0,0],[0,e],[t,0],[t,e]];return i.reduce(function(a,o){var l=o[0],c=o[1],u=Zi(r-l,n-c);return(s?u<a.optimumDistance:u>a.optimumDistance)?{optimumCorner:o,optimumDistance:u}:a},{optimumDistance:s?1/0:-1/0,optimumCorner:null}).optimumCorner},U9=function(t,e,r,n,s){var i=0,a=0;switch(t.size){case 0:t.shape===0?i=a=Math.min(Math.abs(e),Math.abs(e-n),Math.abs(r),Math.abs(r-s)):t.shape===1&&(i=Math.min(Math.abs(e),Math.abs(e-n)),a=Math.min(Math.abs(r),Math.abs(r-s)));break;case 2:if(t.shape===0)i=a=Math.min(Zi(e,r),Zi(e,r-s),Zi(e-n,r),Zi(e-n,r-s));else if(t.shape===1){var o=Math.min(Math.abs(r),Math.abs(r-s))/Math.min(Math.abs(e),Math.abs(e-n)),l=__(n,s,e,r,!0),c=l[0],u=l[1];i=Zi(c-e,(u-r)/o),a=o*i}break;case 1:t.shape===0?i=a=Math.max(Math.abs(e),Math.abs(e-n),Math.abs(r),Math.abs(r-s)):t.shape===1&&(i=Math.max(Math.abs(e),Math.abs(e-n)),a=Math.max(Math.abs(r),Math.abs(r-s)));break;case 3:if(t.shape===0)i=a=Math.max(Zi(e,r),Zi(e,r-s),Zi(e-n,r),Zi(e-n,r-s));else if(t.shape===1){var o=Math.max(Math.abs(r),Math.abs(r-s))/Math.max(Math.abs(e),Math.abs(e-n)),f=__(n,s,e,r,!1),c=f[0],u=f[1];i=Zi(c-e,(u-r)/o),a=o*i}break}return Array.isArray(t.size)&&(i=Dr(t.size[0],n),a=t.size.length===2?Dr(t.size[1],s):i),[i,a]},P9=function(t,e){var r=Pi(180),n=[];return qa(e).forEach(function(s,i){if(i===0){var a=s[0];if(a.type===20&&a.value==="to"){r=PU(s);return}else if(UU(a)){r=ow.parse(t,a);return}}var o=Aw(t,s);n.push(o)}),{angle:r,stops:n,type:1}},sg=function(t,e){var r=Pi(180),n=[];return qa(e).forEach(function(s,i){if(i===0){var a=s[0];if(a.type===20&&["top","left","right","bottom"].indexOf(a.value)!==-1){r=PU(s);return}else if(UU(a)){r=(ow.parse(t,a)+Pi(270))%Pi(360);return}}var o=Aw(t,s);n.push(o)}),{angle:r,stops:n,type:1}},Q9=function(t,e){var r=Pi(180),n=[],s=1,i=0,a=3,o=[];return qa(e).forEach(function(l,c){var u=l[0];if(c===0){if(Fr(u)&&u.value==="linear"){s=1;return}else if(Fr(u)&&u.value==="radial"){s=2;return}}if(u.type===18){if(u.name==="from"){var f=ll.parse(t,u.values[0]);n.push({stop:os,color:f})}else if(u.name==="to"){var f=ll.parse(t,u.values[0]);n.push({stop:zA,color:f})}else if(u.name==="color-stop"){var p=u.values.filter(kd);if(p.length===2){var f=ll.parse(t,p[1]),m=p[0];th(m)&&n.push({stop:{type:16,number:m.number*100,flags:m.flags},color:f})}}}}),s===1?{angle:(r+Pi(180))%Pi(360),stops:n,type:s}:{size:a,shape:i,stops:n,position:o,type:s}},QU="closest-side",LU="farthest-side",jU="closest-corner",kU="farthest-corner",DU="circle",RU="ellipse",MU="cover",OU="contain",L9=function(t,e){var r=0,n=3,s=[],i=[];return qa(e).forEach(function(a,o){var l=!0;if(o===0){var c=!1;l=a.reduce(function(f,p){if(c)if(Fr(p))switch(p.value){case"center":return i.push(pB),f;case"top":case"left":return i.push(os),f;case"right":case"bottom":return i.push(zA),f}else(Nn(p)||yl(p))&&i.push(p);else if(Fr(p))switch(p.value){case DU:return r=0,!1;case RU:return r=1,!1;case"at":return c=!0,!1;case QU:return n=0,!1;case MU:case LU:return n=1,!1;case OU:case jU:return n=2,!1;case kU:return n=3,!1}else if(yl(p)||Nn(p))return Array.isArray(n)||(n=[]),n.push(p),!1;return f},l)}if(l){var u=Aw(t,a);s.push(u)}}),{size:n,shape:r,stops:s,position:i,type:2}},ig=function(t,e){var r=0,n=3,s=[],i=[];return qa(e).forEach(function(a,o){var l=!0;if(o===0?l=a.reduce(function(u,f){if(Fr(f))switch(f.value){case"center":return i.push(pB),!1;case"top":case"left":return i.push(os),!1;case"right":case"bottom":return i.push(zA),!1}else if(Nn(f)||yl(f))return i.push(f),!1;return u},l):o===1&&(l=a.reduce(function(u,f){if(Fr(f))switch(f.value){case DU:return r=0,!1;case RU:return r=1,!1;case OU:case QU:return n=0,!1;case LU:return n=1,!1;case jU:return n=2,!1;case MU:case kU:return n=3,!1}else if(yl(f)||Nn(f))return Array.isArray(n)||(n=[]),n.push(f),!1;return u},l)),l){var c=Aw(t,a);s.push(c)}}),{size:n,shape:r,stops:s,position:i,type:2}},j9=function(t){return t.type===1},k9=function(t){return t.type===2},mB={name:"image",parse:function(t,e){if(e.type===22){var r={url:e.value,type:0};return t.cache.addImage(e.value),r}if(e.type===18){var n=HU[e.name];if(typeof n>"u")throw new Error('Attempting to parse an unsupported image function "'+e.name+'"');return n(t,e.values)}throw new Error("Unsupported image type "+e.type)}};function D9(t){return!(t.type===20&&t.value==="none")&&(t.type!==18||!!HU[t.name])}var HU={"linear-gradient":P9,"-moz-linear-gradient":sg,"-ms-linear-gradient":sg,"-o-linear-gradient":sg,"-webkit-linear-gradient":sg,"radial-gradient":L9,"-moz-radial-gradient":ig,"-ms-radial-gradient":ig,"-o-radial-gradient":ig,"-webkit-radial-gradient":ig,"-webkit-gradient":Q9},R9={name:"background-image",initialValue:"none",type:1,prefix:!1,parse:function(t,e){if(e.length===0)return[];var r=e[0];return r.type===20&&r.value==="none"?[]:e.filter(function(n){return kd(n)&&D9(n)}).map(function(n){return mB.parse(t,n)})}},M9={name:"background-origin",initialValue:"border-box",prefix:!1,type:1,parse:function(t,e){return e.map(function(r){if(Fr(r))switch(r.value){case"padding-box":return 1;case"content-box":return 2}return 0})}},O9={name:"background-position",initialValue:"0% 0%",type:1,prefix:!1,parse:function(t,e){return qa(e).map(function(r){return r.filter(Nn)}).map(NU)}},H9={name:"background-repeat",initialValue:"repeat",prefix:!1,type:1,parse:function(t,e){return qa(e).map(function(r){return r.filter(Fr).map(function(n){return n.value}).join(" ")}).map(V9)}},V9=function(t){switch(t){case"no-repeat":return 1;case"repeat-x":case"repeat no-repeat":return 2;case"repeat-y":case"no-repeat repeat":return 3;case"repeat":default:return 0}},vd;(function(t){t.AUTO="auto",t.CONTAIN="contain",t.COVER="cover"})(vd||(vd={}));var K9={name:"background-size",initialValue:"0",prefix:!1,type:1,parse:function(t,e){return qa(e).map(function(r){return r.filter(q9)})}},q9=function(t){return Fr(t)||Nn(t)},lw=function(t){return{name:"border-"+t+"-color",initialValue:"transparent",prefix:!1,type:3,format:"color"}},G9=lw("top"),z9=lw("right"),$9=lw("bottom"),W9=lw("left"),cw=function(t){return{name:"border-radius-"+t,initialValue:"0 0",prefix:!1,type:1,parse:function(e,r){return NU(r.filter(Nn))}}},X9=cw("top-left"),J9=cw("top-right"),Y9=cw("bottom-right"),Z9=cw("bottom-left"),uw=function(t){return{name:"border-"+t+"-style",initialValue:"solid",prefix:!1,type:2,parse:function(e,r){switch(r){case"none":return 0;case"dashed":return 2;case"dotted":return 3;case"double":return 4}return 1}}},eK=uw("top"),tK=uw("right"),rK=uw("bottom"),nK=uw("left"),dw=function(t){return{name:"border-"+t+"-width",initialValue:"0",type:0,prefix:!1,parse:function(e,r){return Gp(r)?r.number:0}}},sK=dw("top"),iK=dw("right"),aK=dw("bottom"),oK=dw("left"),AK={name:"color",initialValue:"transparent",prefix:!1,type:3,format:"color"},lK={name:"direction",initialValue:"ltr",prefix:!1,type:2,parse:function(t,e){switch(e){case"rtl":return 1;case"ltr":default:return 0}}},cK={name:"display",initialValue:"inline-block",prefix:!1,type:1,parse:function(t,e){return e.filter(Fr).reduce(function(r,n){return r|uK(n.value)},0)}},uK=function(t){switch(t){case"block":case"-webkit-box":return 2;case"inline":return 4;case"run-in":return 8;case"flow":return 16;case"flow-root":return 32;case"table":return 64;case"flex":case"-webkit-flex":return 128;case"grid":case"-ms-grid":return 256;case"ruby":return 512;case"subgrid":return 1024;case"list-item":return 2048;case"table-row-group":return 4096;case"table-header-group":return 8192;case"table-footer-group":return 16384;case"table-row":return 32768;case"table-cell":return 65536;case"table-column-group":return 131072;case"table-column":return 262144;case"table-caption":return 524288;case"ruby-base":return 1048576;case"ruby-text":return 2097152;case"ruby-base-container":return 4194304;case"ruby-text-container":return 8388608;case"contents":return 16777216;case"inline-block":return 33554432;case"inline-list-item":return 67108864;case"inline-table":return 134217728;case"inline-flex":return 268435456;case"inline-grid":return 536870912}return 0},dK={name:"float",initialValue:"none",prefix:!1,type:2,parse:function(t,e){switch(e){case"left":return 1;case"right":return 2;case"inline-start":return 3;case"inline-end":return 4}return 0}},hK={name:"letter-spacing",initialValue:"0",prefix:!1,type:0,parse:function(t,e){return e.type===20&&e.value==="normal"?0:e.type===17||e.type===15?e.number:0}},W0;(function(t){t.NORMAL="normal",t.STRICT="strict"})(W0||(W0={}));var fK={name:"line-break",initialValue:"normal",prefix:!1,type:2,parse:function(t,e){switch(e){case"strict":return W0.STRICT;case"normal":default:return W0.NORMAL}}},pK={name:"line-height",initialValue:"normal",prefix:!1,type:4},N_=function(t,e){return Fr(t)&&t.value==="normal"?1.2*e:t.type===17?e*t.number:Nn(t)?Dr(t,e):e},mK={name:"list-style-image",initialValue:"none",type:0,prefix:!1,parse:function(t,e){return e.type===20&&e.value==="none"?null:mB.parse(t,e)}},gK={name:"list-style-position",initialValue:"outside",prefix:!1,type:2,parse:function(t,e){switch(e){case"inside":return 0;case"outside":default:return 1}}},V2={name:"list-style-type",initialValue:"none",prefix:!1,type:2,parse:function(t,e){switch(e){case"disc":return 0;case"circle":return 1;case"square":return 2;case"decimal":return 3;case"cjk-decimal":return 4;case"decimal-leading-zero":return 5;case"lower-roman":return 6;case"upper-roman":return 7;case"lower-greek":return 8;case"lower-alpha":return 9;case"upper-alpha":return 10;case"arabic-indic":return 11;case"armenian":return 12;case"bengali":return 13;case"cambodian":return 14;case"cjk-earthly-branch":return 15;case"cjk-heavenly-stem":return 16;case"cjk-ideographic":return 17;case"devanagari":return 18;case"ethiopic-numeric":return 19;case"georgian":return 20;case"gujarati":return 21;case"gurmukhi":return 22;case"hebrew":return 22;case"hiragana":return 23;case"hiragana-iroha":return 24;case"japanese-formal":return 25;case"japanese-informal":return 26;case"kannada":return 27;case"katakana":return 28;case"katakana-iroha":return 29;case"khmer":return 30;case"korean-hangul-formal":return 31;case"korean-hanja-formal":return 32;case"korean-hanja-informal":return 33;case"lao":return 34;case"lower-armenian":return 35;case"malayalam":return 36;case"mongolian":return 37;case"myanmar":return 38;case"oriya":return 39;case"persian":return 40;case"simp-chinese-formal":return 41;case"simp-chinese-informal":return 42;case"tamil":return 43;case"telugu":return 44;case"thai":return 45;case"tibetan":return 46;case"trad-chinese-formal":return 47;case"trad-chinese-informal":return 48;case"upper-armenian":return 49;case"disclosure-open":return 50;case"disclosure-closed":return 51;case"none":default:return-1}}},hw=function(t){return{name:"margin-"+t,initialValue:"0",prefix:!1,type:4}},vK=hw("top"),wK=hw("right"),yK=hw("bottom"),xK=hw("left"),bK={name:"overflow",initialValue:"visible",prefix:!1,type:1,parse:function(t,e){return e.filter(Fr).map(function(r){switch(r.value){case"hidden":return 1;case"scroll":return 2;case"clip":return 3;case"auto":return 4;case"visible":default:return 0}})}},BK={name:"overflow-wrap",initialValue:"normal",prefix:!1,type:2,parse:function(t,e){switch(e){case"break-word":return"break-word";case"normal":default:return"normal"}}},fw=function(t){return{name:"padding-"+t,initialValue:"0",prefix:!1,type:3,format:"length-percentage"}},CK=fw("top"),EK=fw("right"),_K=fw("bottom"),NK=fw("left"),IK={name:"text-align",initialValue:"left",prefix:!1,type:2,parse:function(t,e){switch(e){case"right":return 2;case"center":case"justify":return 1;case"left":default:return 0}}},SK={name:"position",initialValue:"static",prefix:!1,type:2,parse:function(t,e){switch(e){case"relative":return 1;case"absolute":return 2;case"fixed":return 3;case"sticky":return 4}return 0}},FK={name:"text-shadow",initialValue:"none",type:1,prefix:!1,parse:function(t,e){return e.length===1&&H2(e[0],"none")?[]:qa(e).map(function(r){for(var n={color:Po.TRANSPARENT,offsetX:os,offsetY:os,blur:os},s=0,i=0;i<r.length;i++){var a=r[i];yl(a)?(s===0?n.offsetX=a:s===1?n.offsetY=a:n.blur=a,s++):n.color=ll.parse(t,a)}return n})}},TK={name:"text-transform",initialValue:"none",prefix:!1,type:2,parse:function(t,e){switch(e){case"uppercase":return 2;case"lowercase":return 1;case"capitalize":return 3}return 0}},UK={name:"transform",initialValue:"none",prefix:!0,type:0,parse:function(t,e){if(e.type===20&&e.value==="none")return null;if(e.type===18){var r=LK[e.name];if(typeof r>"u")throw new Error('Attempting to parse an unsupported transform function "'+e.name+'"');return r(e.values)}return null}},PK=function(t){var e=t.filter(function(r){return r.type===17}).map(function(r){return r.number});return e.length===6?e:null},QK=function(t){var e=t.filter(function(l){return l.type===17}).map(function(l){return l.number}),r=e[0],n=e[1];e[2],e[3];var s=e[4],i=e[5];e[6],e[7],e[8],e[9],e[10],e[11];var a=e[12],o=e[13];return e[14],e[15],e.length===16?[r,n,s,i,a,o]:null},LK={matrix:PK,matrix3d:QK},I_={type:16,number:50,flags:qp},jK=[I_,I_],kK={name:"transform-origin",initialValue:"50% 50%",prefix:!0,type:1,parse:function(t,e){var r=e.filter(Nn);return r.length!==2?jK:[r[0],r[1]]}},DK={name:"visible",initialValue:"none",prefix:!1,type:2,parse:function(t,e){switch(e){case"hidden":return 1;case"collapse":return 2;case"visible":default:return 0}}},If;(function(t){t.NORMAL="normal",t.BREAK_ALL="break-all",t.KEEP_ALL="keep-all"})(If||(If={}));var RK={name:"word-break",initialValue:"normal",prefix:!1,type:2,parse:function(t,e){switch(e){case"break-all":return If.BREAK_ALL;case"keep-all":return If.KEEP_ALL;case"normal":default:return If.NORMAL}}},MK={name:"z-index",initialValue:"auto",prefix:!1,type:0,parse:function(t,e){if(e.type===20)return{auto:!0,order:0};if(th(e))return{auto:!1,order:e.number};throw new Error("Invalid z-index number parsed")}},VU={name:"time",parse:function(t,e){if(e.type===15)switch(e.unit.toLowerCase()){case"s":return 1e3*e.number;case"ms":return e.number}throw new Error("Unsupported time type")}},OK={name:"opacity",initialValue:"1",type:0,prefix:!1,parse:function(t,e){return th(e)?e.number:1}},HK={name:"text-decoration-color",initialValue:"transparent",prefix:!1,type:3,format:"color"},VK={name:"text-decoration-line",initialValue:"none",prefix:!1,type:1,parse:function(t,e){return e.filter(Fr).map(function(r){switch(r.value){case"underline":return 1;case"overline":return 2;case"line-through":return 3;case"none":return 4}return 0}).filter(function(r){return r!==0})}},KK={name:"font-family",initialValue:"",prefix:!1,type:1,parse:function(t,e){var r=[],n=[];return e.forEach(function(s){switch(s.type){case 20:case 0:r.push(s.value);break;case 17:r.push(s.number.toString());break;case 4:n.push(r.join(" ")),r.length=0;break}}),r.length&&n.push(r.join(" ")),n.map(function(s){return s.indexOf(" ")===-1?s:"'"+s+"'"})}},qK={name:"font-size",initialValue:"0",prefix:!1,type:3,format:"length"},GK={name:"font-weight",initialValue:"normal",type:0,prefix:!1,parse:function(t,e){if(th(e))return e.number;if(Fr(e))switch(e.value){case"bold":return 700;case"normal":default:return 400}return 400}},zK={name:"font-variant",initialValue:"none",type:1,prefix:!1,parse:function(t,e){return e.filter(Fr).map(function(r){return r.value})}},$K={name:"font-style",initialValue:"normal",prefix:!1,type:2,parse:function(t,e){switch(e){case"oblique":return"oblique";case"italic":return"italic";case"normal":default:return"normal"}}},Qn=function(t,e){return(t&e)!==0},WK={name:"content",initialValue:"none",type:1,prefix:!1,parse:function(t,e){if(e.length===0)return[];var r=e[0];return r.type===20&&r.value==="none"?[]:e}},XK={name:"counter-increment",initialValue:"none",prefix:!0,type:1,parse:function(t,e){if(e.length===0)return null;var r=e[0];if(r.type===20&&r.value==="none")return null;for(var n=[],s=e.filter(_U),i=0;i<s.length;i++){var a=s[i],o=s[i+1];if(a.type===20){var l=o&&th(o)?o.number:1;n.push({counter:a.value,increment:l})}}return n}},JK={name:"counter-reset",initialValue:"none",prefix:!0,type:1,parse:function(t,e){if(e.length===0)return[];for(var r=[],n=e.filter(_U),s=0;s<n.length;s++){var i=n[s],a=n[s+1];if(Fr(i)&&i.value!=="none"){var o=a&&th(a)?a.number:0;r.push({counter:i.value,reset:o})}}return r}},YK={name:"duration",initialValue:"0s",prefix:!1,type:1,parse:function(t,e){return e.filter(Gp).map(function(r){return VU.parse(t,r)})}},ZK={name:"quotes",initialValue:"none",prefix:!0,type:1,parse:function(t,e){if(e.length===0)return null;var r=e[0];if(r.type===20&&r.value==="none")return null;var n=[],s=e.filter(E9);if(s.length%2!==0)return null;for(var i=0;i<s.length;i+=2){var a=s[i].value,o=s[i+1].value;n.push({open:a,close:o})}return n}},S_=function(t,e,r){if(!t)return"";var n=t[Math.min(e,t.length-1)];return n?r?n.open:n.close:""},eq={name:"box-shadow",initialValue:"none",type:1,prefix:!1,parse:function(t,e){return e.length===1&&H2(e[0],"none")?[]:qa(e).map(function(r){for(var n={color:255,offsetX:os,offsetY:os,blur:os,spread:os,inset:!1},s=0,i=0;i<r.length;i++){var a=r[i];H2(a,"inset")?n.inset=!0:yl(a)?(s===0?n.offsetX=a:s===1?n.offsetY=a:s===2?n.blur=a:n.spread=a,s++):n.color=ll.parse(t,a)}return n})}},tq={name:"paint-order",initialValue:"normal",prefix:!1,type:1,parse:function(t,e){var r=[0,1,2],n=[];return e.filter(Fr).forEach(function(s){switch(s.value){case"stroke":n.push(1);break;case"fill":n.push(0);break;case"markers":n.push(2);break}}),r.forEach(function(s){n.indexOf(s)===-1&&n.push(s)}),n}},rq={name:"-webkit-text-stroke-color",initialValue:"currentcolor",prefix:!1,type:3,format:"color"},nq={name:"-webkit-text-stroke-width",initialValue:"0",type:0,prefix:!1,parse:function(t,e){return Gp(e)?e.number:0}},sq=function(){function t(e,r){var n,s;this.animationDuration=yt(e,YK,r.animationDuration),this.backgroundClip=yt(e,I9,r.backgroundClip),this.backgroundColor=yt(e,S9,r.backgroundColor),this.backgroundImage=yt(e,R9,r.backgroundImage),this.backgroundOrigin=yt(e,M9,r.backgroundOrigin),this.backgroundPosition=yt(e,O9,r.backgroundPosition),this.backgroundRepeat=yt(e,H9,r.backgroundRepeat),this.backgroundSize=yt(e,K9,r.backgroundSize),this.borderTopColor=yt(e,G9,r.borderTopColor),this.borderRightColor=yt(e,z9,r.borderRightColor),this.borderBottomColor=yt(e,$9,r.borderBottomColor),this.borderLeftColor=yt(e,W9,r.borderLeftColor),this.borderTopLeftRadius=yt(e,X9,r.borderTopLeftRadius),this.borderTopRightRadius=yt(e,J9,r.borderTopRightRadius),this.borderBottomRightRadius=yt(e,Y9,r.borderBottomRightRadius),this.borderBottomLeftRadius=yt(e,Z9,r.borderBottomLeftRadius),this.borderTopStyle=yt(e,eK,r.borderTopStyle),this.borderRightStyle=yt(e,tK,r.borderRightStyle),this.borderBottomStyle=yt(e,rK,r.borderBottomStyle),this.borderLeftStyle=yt(e,nK,r.borderLeftStyle),this.borderTopWidth=yt(e,sK,r.borderTopWidth),this.borderRightWidth=yt(e,iK,r.borderRightWidth),this.borderBottomWidth=yt(e,aK,r.borderBottomWidth),this.borderLeftWidth=yt(e,oK,r.borderLeftWidth),this.boxShadow=yt(e,eq,r.boxShadow),this.color=yt(e,AK,r.color),this.direction=yt(e,lK,r.direction),this.display=yt(e,cK,r.display),this.float=yt(e,dK,r.cssFloat),this.fontFamily=yt(e,KK,r.fontFamily),this.fontSize=yt(e,qK,r.fontSize),this.fontStyle=yt(e,$K,r.fontStyle),this.fontVariant=yt(e,zK,r.fontVariant),this.fontWeight=yt(e,GK,r.fontWeight),this.letterSpacing=yt(e,hK,r.letterSpacing),this.lineBreak=yt(e,fK,r.lineBreak),this.lineHeight=yt(e,pK,r.lineHeight),this.listStyleImage=yt(e,mK,r.listStyleImage),this.listStylePosition=yt(e,gK,r.listStylePosition),this.listStyleType=yt(e,V2,r.listStyleType),this.marginTop=yt(e,vK,r.marginTop),this.marginRight=yt(e,wK,r.marginRight),this.marginBottom=yt(e,yK,r.marginBottom),this.marginLeft=yt(e,xK,r.marginLeft),this.opacity=yt(e,OK,r.opacity);var i=yt(e,bK,r.overflow);this.overflowX=i[0],this.overflowY=i[i.length>1?1:0],this.overflowWrap=yt(e,BK,r.overflowWrap),this.paddingTop=yt(e,CK,r.paddingTop),this.paddingRight=yt(e,EK,r.paddingRight),this.paddingBottom=yt(e,_K,r.paddingBottom),this.paddingLeft=yt(e,NK,r.paddingLeft),this.paintOrder=yt(e,tq,r.paintOrder),this.position=yt(e,SK,r.position),this.textAlign=yt(e,IK,r.textAlign),this.textDecorationColor=yt(e,HK,(n=r.textDecorationColor)!==null&&n!==void 0?n:r.color),this.textDecorationLine=yt(e,VK,(s=r.textDecorationLine)!==null&&s!==void 0?s:r.textDecoration),this.textShadow=yt(e,FK,r.textShadow),this.textTransform=yt(e,TK,r.textTransform),this.transform=yt(e,UK,r.transform),this.transformOrigin=yt(e,kK,r.transformOrigin),this.visibility=yt(e,DK,r.visibility),this.webkitTextStrokeColor=yt(e,rq,r.webkitTextStrokeColor),this.webkitTextStrokeWidth=yt(e,nq,r.webkitTextStrokeWidth),this.wordBreak=yt(e,RK,r.wordBreak),this.zIndex=yt(e,MK,r.zIndex)}return t.prototype.isVisible=function(){return this.display>0&&this.opacity>0&&this.visibility===0},t.prototype.isTransparent=function(){return cl(this.backgroundColor)},t.prototype.isTransformed=function(){return this.transform!==null},t.prototype.isPositioned=function(){return this.position!==0},t.prototype.isPositionedWithZIndex=function(){return this.isPositioned()&&!this.zIndex.auto},t.prototype.isFloating=function(){return this.float!==0},t.prototype.isInlineLevel=function(){return Qn(this.display,4)||Qn(this.display,33554432)||Qn(this.display,268435456)||Qn(this.display,536870912)||Qn(this.display,67108864)||Qn(this.display,134217728)},t}(),iq=function(){function t(e,r){this.content=yt(e,WK,r.content),this.quotes=yt(e,ZK,r.quotes)}return t}(),F_=function(){function t(e,r){this.counterIncrement=yt(e,XK,r.counterIncrement),this.counterReset=yt(e,JK,r.counterReset)}return t}(),yt=function(t,e,r){var n=new CU,s=r!==null&&typeof r<"u"?r.toString():e.initialValue;n.write(s);var i=new EU(n.read());switch(e.type){case 2:var a=i.parseComponentValue();return e.parse(t,Fr(a)?a.value:e.initialValue);case 0:return e.parse(t,i.parseComponentValue());case 1:return e.parse(t,i.parseComponentValues());case 4:return i.parseComponentValue();case 3:switch(e.format){case"angle":return ow.parse(t,i.parseComponentValue());case"color":return ll.parse(t,i.parseComponentValue());case"image":return mB.parse(t,i.parseComponentValue());case"length":var o=i.parseComponentValue();return yl(o)?o:os;case"length-percentage":var l=i.parseComponentValue();return Nn(l)?l:os;case"time":return VU.parse(t,i.parseComponentValue())}break}},aq="data-html2canvas-debug",oq=function(t){var e=t.getAttribute(aq);switch(e){case"all":return 1;case"clone":return 2;case"parse":return 3;case"render":return 4;default:return 0}},K2=function(t,e){var r=oq(t);return r===1||e===r},Ga=function(){function t(e,r){if(this.context=e,this.textNodes=[],this.elements=[],this.flags=0,K2(r,3))debugger;this.styles=new sq(e,window.getComputedStyle(r,null)),z2(r)&&(this.styles.animationDuration.some(function(n){return n>0})&&(r.style.animationDuration="0s"),this.styles.transform!==null&&(r.style.transform="none")),this.bounds=iw(this.context,r),K2(r,4)&&(this.flags|=16)}return t}(),Aq="AAAAAAAAAAAAEA4AGBkAAFAaAAACAAAAAAAIABAAGAAwADgACAAQAAgAEAAIABAACAAQAAgAEAAIABAACAAQAAgAEAAIABAAQABIAEQATAAIABAACAAQAAgAEAAIABAAVABcAAgAEAAIABAACAAQAGAAaABwAHgAgACIAI4AlgAIABAAmwCjAKgAsAC2AL4AvQDFAMoA0gBPAVYBWgEIAAgACACMANoAYgFkAWwBdAF8AX0BhQGNAZUBlgGeAaMBlQGWAasBswF8AbsBwwF0AcsBYwHTAQgA2wG/AOMBdAF8AekB8QF0AfkB+wHiAHQBfAEIAAMC5gQIAAsCEgIIAAgAFgIeAggAIgIpAggAMQI5AkACygEIAAgASAJQAlgCYAIIAAgACAAKBQoFCgUTBRMFGQUrBSsFCAAIAAgACAAIAAgACAAIAAgACABdAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACABoAmgCrwGvAQgAbgJ2AggAHgEIAAgACADnAXsCCAAIAAgAgwIIAAgACAAIAAgACACKAggAkQKZAggAPADJAAgAoQKkAqwCsgK6AsICCADJAggA0AIIAAgACAAIANYC3gIIAAgACAAIAAgACABAAOYCCAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAkASoB+QIEAAgACAA8AEMCCABCBQgACABJBVAFCAAIAAgACAAIAAgACAAIAAgACABTBVoFCAAIAFoFCABfBWUFCAAIAAgACAAIAAgAbQUIAAgACAAIAAgACABzBXsFfQWFBYoFigWKBZEFigWKBYoFmAWfBaYFrgWxBbkFCAAIAAgACAAIAAgACAAIAAgACAAIAMEFCAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAMgFCADQBQgACAAIAAgACAAIAAgACAAIAAgACAAIAO4CCAAIAAgAiQAIAAgACABAAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAD0AggACAD8AggACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIANYFCAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAMDvwAIAAgAJAIIAAgACAAIAAgACAAIAAgACwMTAwgACAB9BOsEGwMjAwgAKwMyAwsFYgE3A/MEPwMIAEUDTQNRAwgAWQOsAGEDCAAIAAgACAAIAAgACABpAzQFNQU2BTcFOAU5BToFNAU1BTYFNwU4BTkFOgU0BTUFNgU3BTgFOQU6BTQFNQU2BTcFOAU5BToFNAU1BTYFNwU4BTkFOgU0BTUFNgU3BTgFOQU6BTQFNQU2BTcFOAU5BToFNAU1BTYFNwU4BTkFOgU0BTUFNgU3BTgFOQU6BTQFNQU2BTcFOAU5BToFNAU1BTYFNwU4BTkFOgU0BTUFNgU3BTgFOQU6BTQFNQU2BTcFOAU5BToFNAU1BTYFNwU4BTkFOgU0BTUFNgU3BTgFOQU6BTQFNQU2BTcFOAU5BToFNAU1BTYFNwU4BTkFOgU0BTUFNgU3BTgFOQU6BTQFNQU2BTcFOAU5BToFNAU1BTYFNwU4BTkFOgU0BTUFNgU3BTgFOQU6BTQFNQU2BTcFOAU5BToFNAU1BTYFNwU4BTkFOgU0BTUFNgU3BTgFOQU6BTQFNQU2BTcFOAU5BToFNAU1BTYFNwU4BTkFOgU0BTUFNgU3BTgFOQU6BTQFNQU2BTcFOAU5BToFNAU1BTYFNwU4BTkFOgU0BTUFNgU3BTgFOQU6BTQFNQU2BTcFOAU5BToFNAU1BTYFNwU4BTkFOgU0BTUFNgU3BTgFOQU6BTQFNQU2BTcFOAU5BToFNAU1BTYFNwU4BTkFOgU0BTUFNgU3BTgFOQU6BTQFNQU2BTcFOAU5BToFNAU1BTYFNwU4BTkFOgU0BTUFNgU3BTgFOQU6BTQFNQU2BTcFOAU5BToFNAU1BTYFNwU4BTkFOgU0BTUFNgU3BTgFOQU6BTQFNQU2BTcFOAU5BToFNAU1BTYFNwU4BTkFOgU0BTUFNgU3BTgFOQU6BTQFNQU2BTcFOAU5BToFNAU1BTYFNwU4BTkFOgU0BTUFNgU3BTgFOQU6BTQFNQU2BTcFOAU5BToFNAU1BTYFNwU4BTkFIQUoBSwFCAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACABtAwgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACABMAEwACAAIAAgACAAIABgACAAIAAgACAC/AAgACAAyAQgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACACAAIAAwAAgACAAIAAgACAAIAAgACAAIAAAARABIAAgACAAIABQASAAIAAgAIABwAEAAjgCIABsAqAC2AL0AigDQAtwC+IJIQqVAZUBWQqVAZUBlQGVAZUBlQGrC5UBlQGVAZUBlQGVAZUBlQGVAXsKlQGVAbAK6wsrDGUMpQzlDJUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAfAKAAuZA64AtwCJALoC6ADwAAgAuACgA/oEpgO6AqsD+AAIAAgAswMIAAgACAAIAIkAuwP5AfsBwwPLAwgACAAIAAgACADRA9kDCAAIAOED6QMIAAgACAAIAAgACADuA/YDCAAIAP4DyQAIAAgABgQIAAgAXQAOBAgACAAIAAgACAAIABMECAAIAAgACAAIAAgACAD8AAQBCAAIAAgAGgQiBCoECAExBAgAEAEIAAgACAAIAAgACAAIAAgACAAIAAgACAA4BAgACABABEYECAAIAAgATAQYAQgAVAQIAAgACAAIAAgACAAIAAgACAAIAFoECAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgAOQEIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAB+BAcACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAEABhgSMBAgACAAIAAgAlAQIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAwAEAAQABAADAAMAAwADAAQABAAEAAQABAAEAAQABHATAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgAdQMIAAgACAAIAAgACAAIAMkACAAIAAgAfQMIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACACFA4kDCAAIAAgACAAIAOcBCAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAIcDCAAIAAgACAAIAAgACAAIAAgACAAIAJEDCAAIAAgACADFAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACABgBAgAZgQIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgAbAQCBXIECAAIAHkECAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACABAAJwEQACjBKoEsgQIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAC6BMIECAAIAAgACAAIAAgACABmBAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgAxwQIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAGYECAAIAAgAzgQIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgAigWKBYoFigWKBYoFigWKBd0FXwUIAOIF6gXxBYoF3gT5BQAGCAaKBYoFigWKBYoFigWKBYoFigWKBYoFigXWBIoFigWKBYoFigWKBYoFigWKBYsFEAaKBYoFigWKBYoFigWKBRQGCACKBYoFigWKBQgACAAIANEECAAIABgGigUgBggAJgYIAC4GMwaKBYoF0wQ3Bj4GigWKBYoFigWKBYoFigWKBYoFigWKBYoFigUIAAgACAAIAAgACAAIAAgAigWKBYoFigWKBYoFigWKBYoFigWKBYoFigWKBYoFigWKBYoFigWKBYoFigWKBYoFigWKBYoFigWKBYoFigWLBf///////wQABAAEAAQABAAEAAQABAAEAAQAAwAEAAQAAgAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAAAAAAAAAAAAAAAAAAAAAAAAAOAAAAAAAAAAQADgAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAFAAUABQAFAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAAAAUAAAAFAAUAAAAFAAUAAAAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABAAEAAQABAAEAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAFAAUABQAFAAUABQAFAAUABQAAAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAFAAUABQAFAAUAAQAAAAUABQAFAAUABQAFAAAAAAAFAAUAAAAFAAUABQAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAEAAAAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAUABQAFAAUABQAFAAUABQAFAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAUABQAFAAUABQAFAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAFAAAAAAAFAAUAAQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABwAFAAUABQAFAAAABwAHAAcAAAAHAAcABwAFAAEAAAAAAAAAAAAAAAAAAAAAAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAHAAcABwAFAAUABQAFAAcABwAFAAUAAAAAAAEAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAHAAAAAQABAAAAAAAAAAAAAAAFAAUABQAFAAAABwAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAHAAcABwAHAAcAAAAHAAcAAAAAAAUABQAHAAUAAQAHAAEABwAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAFAAUABQAFAAUABwABAAUABQAFAAUAAAAAAAAAAAAAAAEAAQABAAEAAQABAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABwAFAAUAAAAAAAAAAAAAAAAABQAFAAUABQAFAAUAAQAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAFAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAQABQANAAQABAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAQABAAEAAQABAAEAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAOAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABAAEAAQABAAEAAQABAAEAAQABAAEAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAEAAQABAAEAAQABAAEAAQABAAAAAAAAAAAAAAAAAAAAAAABQAHAAUABQAFAAAAAAAAAAcABQAFAAUABQAFAAQABAAEAAQABAAEAAQABAAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAFAAUAAAAFAAUABQAFAAUAAAAFAAUABQAAAAUABQAFAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAUABQAAAAAAAAAAAAUABQAFAAcAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAHAAUAAAAHAAcABwAFAAUABQAFAAUABQAFAAUABwAHAAcABwAFAAcABwAAAAUABQAFAAUABQAFAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABwAHAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAAAAUABwAHAAUABQAFAAUAAAAAAAcABwAAAAAABwAHAAUAAAAAAAAAAAAAAAAAAAAAAAAABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAAAAAABQAFAAcAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAAABwAHAAcABQAFAAAAAAAAAAAABQAFAAAAAAAFAAUABQAAAAAAAAAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAAAAAAAAAFAAAAAAAAAAAAAAAAAAAAAAAAAAAABwAFAAUABQAFAAUAAAAFAAUABwAAAAcABwAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAUABQAFAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUAAAAFAAUABwAFAAUABQAFAAAAAAAHAAcAAAAAAAcABwAFAAAAAAAAAAAAAAAAAAAABQAFAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAcABwAAAAAAAAAHAAcABwAAAAcABwAHAAUAAAAAAAAAAAAAAAAAAAAAAAAABQAAAAAAAAAAAAAAAAAAAAAABQAHAAcABwAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABwAHAAcABwAAAAUABQAFAAAABQAFAAUABQAAAAAAAAAAAAAAAAAAAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAAAAcABQAHAAcABQAHAAcAAAAFAAcABwAAAAcABwAFAAUAAAAAAAAAAAAAAAAAAAAFAAUAAAAAAAAAAAAAAAAAAAAAAAAABQAFAAcABwAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAAAAUABwAAAAAAAAAAAAAAAAAAAAAAAAAAAAUAAAAAAAAAAAAFAAcABwAFAAUABQAAAAUAAAAHAAcABwAHAAcABwAHAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUAAAAHAAUABQAFAAUABQAFAAUAAAAAAAAAAAAAAAAAAAAAAAUABQAFAAUABQAFAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAAABwAFAAUABQAFAAUABQAFAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAFAAUABQAFAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAAAAUAAAAFAAAAAAAAAAAABwAHAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABwAFAAUABQAFAAUAAAAFAAUAAAAAAAAAAAAAAAUABQAFAAUABQAFAAUABQAFAAUABQAAAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAFAAUABwAFAAUABQAFAAUABQAAAAUABQAHAAcABQAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAHAAcABQAFAAAAAAAAAAAABQAFAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAUABQAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAAAAcABQAFAAAAAAAAAAAAAAAAAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAFAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAHAAUABQAFAAUABQAFAAUABwAHAAcABwAHAAcABwAHAAUABwAHAAUABQAFAAUABQAFAAUABQAFAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAFAAUABwAHAAcABwAFAAUABwAHAAcAAAAAAAAAAAAHAAcABQAHAAcABwAHAAcABwAFAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAFAAcABwAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAcABQAHAAUABQAFAAUABQAFAAUAAAAFAAAABQAAAAAABQAFAAUABQAFAAUABQAFAAcABwAHAAcABwAHAAUABQAFAAUABQAFAAUABQAFAAUAAAAAAAUABQAFAAUABQAHAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAFAAUABQAFAAUABwAFAAcABwAHAAcABwAFAAcABwAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAUABQAFAAUABQAFAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAUABwAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAHAAUABQAFAAUABwAHAAUABQAHAAUABQAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAcABQAFAAcABwAHAAUABwAFAAUABQAHAAcAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABwAHAAcABwAHAAcABwAHAAUABQAFAAUABQAFAAUABQAHAAcABQAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAFAAUAAAAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAcABQAFAAUABQAFAAUABQAAAAAAAAAAAAUAAAAAAAAAAAAAAAAABQAAAAAABwAFAAUAAAAAAAAAAAAAAAAABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAAABQAFAAUABQAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAFAAUABQAFAAUADgAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAOAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAFAAUAAAAFAAUABQAFAAUABQAFAAUABQAFAAAAAAAAAAAABQAAAAAAAAAFAAAAAAAAAAAABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABwAHAAUABQAHAAAAAAAAAAAABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAcABwAHAAcABQAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUAAAAAAAAAAAAAAAAABQAFAAUABQAFAAUABQAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAFAAUABQAFAAUABQAFAAUABQAHAAcAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAcABwAFAAUABQAFAAcABwAFAAUABwAHAAAAAAAAAAAAAAAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAFAAUABQAFAAcABwAFAAUABwAHAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAAAAAAAAAAAAAAAAAAAAAAFAAcAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUAAAAFAAUABQAAAAAABQAFAAAAAAAAAAAAAAAFAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAcABQAFAAcABwAAAAAAAAAAAAAABwAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAcABwAFAAcABwAFAAcABwAAAAcABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAFAAUABQAAAAAAAAAAAAAAAAAFAAUABQAAAAUABQAAAAAAAAAAAAAABQAFAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAUABQAAAAAAAAAAAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAcABQAHAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAUABQAFAAUABwAFAAUABQAFAAUABQAFAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABwAHAAcABQAFAAUABQAFAAUABQAFAAUABwAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAHAAcABwAFAAUABQAHAAcABQAHAAUABQAAAAAAAAAAAAAAAAAFAAAABwAHAAcABQAFAAUABQAFAAUABQAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABwAHAAcABwAAAAAABwAHAAAAAAAHAAcABwAAAAAAAAAAAAAAAAAAAAAAAAAFAAAAAAAAAAAAAAAAAAAAAAAAAAAABwAHAAAAAAAFAAUABQAFAAUABQAFAAAAAAAAAAUABQAFAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAHAAcABwAFAAUABQAFAAUABQAFAAUABwAHAAUABQAFAAcABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAHAAcABQAFAAUABQAFAAUABwAFAAcABwAFAAcABQAFAAcABQAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAHAAcABQAFAAUABQAAAAAABwAHAAcABwAFAAUABwAFAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAcABwAHAAUABQAFAAUABQAFAAUABQAHAAcABQAHAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABwAFAAcABwAFAAUABQAFAAUABQAHAAUAAAAAAAAAAAAAAAAAAAAAAAcABwAFAAUABQAFAAcABQAFAAUABQAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAHAAcABwAFAAUABQAFAAUABQAFAAUABQAHAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAHAAcABwAFAAUABQAFAAAAAAAFAAUABwAHAAcABwAFAAAAAAAAAAcAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAUABQAFAAUABQAFAAUABQAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUAAAAAAAAAAAAAAAAAAAAAAAAABQAFAAUABQAFAAUABwAHAAUABQAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAcABQAFAAUABQAFAAUABQAAAAUABQAFAAUABQAFAAcABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAAAHAAUABQAFAAUABQAFAAUABwAFAAUABwAFAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAFAAUABQAFAAUAAAAAAAAABQAAAAUABQAAAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAHAAcABwAHAAcAAAAFAAUAAAAHAAcABQAHAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAUABwAHAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAUABQAFAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAUABQAFAAUABQAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAAAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAAAAAAAAAAAAAAAAAAABQAFAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAcABwAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAAAAUABQAFAAAAAAAFAAUABQAFAAUABQAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAFAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAFAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAAAAAAAAAAABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAAAAAAAAAAAAAAAAAAAAAAFAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAFAAUABQAAAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAFAAUABQAFAAUABQAAAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAAAAAABQAFAAUABQAFAAUABQAAAAUABQAAAAUABQAFAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAUABQAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAFAAUABQAFAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAFAAUABQAFAAUADgAOAA4ADgAOAA4ADwAPAA8ADwAPAA8ADwAPAA8ADwAPAA8ADwAPAA8ADwAPAA8ADwAPAA8ADwAPAA8ADwAPAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAcABwAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABwAHAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAAAAAAAAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAKAAoACgAKAAoACgAKAAoACgAKAAoACgAKAAoACgAKAAoACgAKAAoACgAKAAoACgAMAAwADAAMAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkAAAAAAAAAAAAKAAoACgAKAAoACgAKAAoACgAKAAoACgAKAAoACgAKAAoACgAKAAoACgAKAAoACgAKAAoACgAKAAoACgAKAAoACgAAAAAAAAAAAAsADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwACwAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAAAAAADgAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA4AAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAOAA4ADgAOAA4ADgAAAAAAAAAAAAAAAAAAAAAAAAAAAAAADgAOAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA4ADgAAAAAAAAAAAAAAAAAAAAAADgAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAADgAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAADgAOAA4ADgAOAA4ADgAOAA4ADgAOAAAAAAAAAAAADgAOAA4AAAAAAAAAAAAAAAAAAAAOAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAADgAOAAAAAAAAAAAAAAAAAAAAAAAAAAAADgAAAAAAAAAAAAAAAAAAAAAAAAAOAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAADgAOAA4ADgAAAA4ADgAOAA4ADgAOAAAADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4AAAAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAAAAAAAAAAAAAAAAAAAAAAAAAAAADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4AAAAAAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAAAA4AAAAOAAAAAAAAAAAAAAAAAA4AAAAAAAAAAAAAAAAADgAAAAAAAAAAAAAAAAAAAAAAAAAAAA4ADgAAAAAAAAAAAAAAAAAAAAAAAAAAAAAADgAAAAAADgAAAAAAAAAAAA4AAAAOAAAAAAAAAAAADgAOAA4AAAAOAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAOAA4ADgAOAA4AAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAOAA4ADgAAAAAAAAAAAAAAAAAAAAAAAAAOAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAOAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAOAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAOAA4AAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA4ADgAOAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAADgAOAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAADgAAAAAAAAAAAA4AAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAOAAAADgAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAOAA4ADgAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA4ADgAOAA4ADgAOAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA4ADgAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAADgAAAAAADgAOAA4ADgAOAA4ADgAOAA4ADgAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAAAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAAAAAAAAAAAAAAAAAAAAAAAAAAAADgAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA4AAAAAAA4ADgAOAA4ADgAOAA4ADgAOAAAADgAOAA4ADgAAAAAAAAAAAAAAAAAAAAAAAAAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4AAAAAAAAAAAAAAAAADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAOAA4ADgAOAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAADgAOAA4ADgAOAA4ADgAOAAAAAAAAAAAAAAAAAAAAAAAAAAAADgAOAA4ADgAOAA4AAAAAAAAAAAAAAAAAAAAAAA4ADgAOAA4ADgAOAA4ADgAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4AAAAOAA4ADgAOAA4ADgAAAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4AAAAAAAAAAAA=",T_="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",Af=typeof Uint8Array>"u"?[]:new Uint8Array(256);for(var ag=0;ag<T_.length;ag++)Af[T_.charCodeAt(ag)]=ag;var lq=function(t){var e=t.length*.75,r=t.length,n,s=0,i,a,o,l;t[t.length-1]==="="&&(e--,t[t.length-2]==="="&&e--);var c=typeof ArrayBuffer<"u"&&typeof Uint8Array<"u"&&typeof Uint8Array.prototype.slice<"u"?new ArrayBuffer(e):new Array(e),u=Array.isArray(c)?c:new Uint8Array(c);for(n=0;n<r;n+=4)i=Af[t.charCodeAt(n)],a=Af[t.charCodeAt(n+1)],o=Af[t.charCodeAt(n+2)],l=Af[t.charCodeAt(n+3)],u[s++]=i<<2|a>>4,u[s++]=(a&15)<<4|o>>2,u[s++]=(o&3)<<6|l&63;return c},cq=function(t){for(var e=t.length,r=[],n=0;n<e;n+=2)r.push(t[n+1]<<8|t[n]);return r},uq=function(t){for(var e=t.length,r=[],n=0;n<e;n+=4)r.push(t[n+3]<<24|t[n+2]<<16|t[n+1]<<8|t[n]);return r},bc=5,gB=11,Fy=2,dq=gB-bc,KU=65536>>bc,hq=1<<bc,Ty=hq-1,fq=1024>>bc,pq=KU+fq,mq=pq,gq=32,vq=mq+gq,wq=65536>>gB,yq=1<<dq,xq=yq-1,U_=function(t,e,r){return t.slice?t.slice(e,r):new Uint16Array(Array.prototype.slice.call(t,e,r))},bq=function(t,e,r){return t.slice?t.slice(e,r):new Uint32Array(Array.prototype.slice.call(t,e,r))},Bq=function(t,e){var r=lq(t),n=Array.isArray(r)?uq(r):new Uint32Array(r),s=Array.isArray(r)?cq(r):new Uint16Array(r),i=24,a=U_(s,i/2,n[4]/2),o=n[5]===2?U_(s,(i+n[4])/2):bq(n,Math.ceil((i+n[4])/4));return new Cq(n[0],n[1],n[2],n[3],a,o)},Cq=function(){function t(e,r,n,s,i,a){this.initialValue=e,this.errorValue=r,this.highStart=n,this.highValueIndex=s,this.index=i,this.data=a}return t.prototype.get=function(e){var r;if(e>=0){if(e<55296||e>56319&&e<=65535)return r=this.index[e>>bc],r=(r<<Fy)+(e&Ty),this.data[r];if(e<=65535)return r=this.index[KU+(e-55296>>bc)],r=(r<<Fy)+(e&Ty),this.data[r];if(e<this.highStart)return r=vq-wq+(e>>gB),r=this.index[r],r+=e>>bc&xq,r=this.index[r],r=(r<<Fy)+(e&Ty),this.data[r];if(e<=1114111)return this.data[this.highValueIndex]}return this.errorValue},t}(),P_="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",Eq=typeof Uint8Array>"u"?[]:new Uint8Array(256);for(var og=0;og<P_.length;og++)Eq[P_.charCodeAt(og)]=og;var _q=1,Uy=2,Py=3,Q_=4,L_=5,Nq=7,j_=8,Qy=9,Ly=10,k_=11,D_=12,R_=13,M_=14,jy=15,Iq=function(t){for(var e=[],r=0,n=t.length;r<n;){var s=t.charCodeAt(r++);if(s>=55296&&s<=56319&&r<n){var i=t.charCodeAt(r++);(i&64512)===56320?e.push(((s&1023)<<10)+(i&1023)+65536):(e.push(s),r--)}else e.push(s)}return e},Sq=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];if(String.fromCodePoint)return String.fromCodePoint.apply(String,t);var r=t.length;if(!r)return"";for(var n=[],s=-1,i="";++s<r;){var a=t[s];a<=65535?n.push(a):(a-=65536,n.push((a>>10)+55296,a%1024+56320)),(s+1===r||n.length>16384)&&(i+=String.fromCharCode.apply(String,n),n.length=0)}return i},Fq=Bq(Aq),Ni="",ky="",Tq=function(t){return Fq.get(t)},Uq=function(t,e,r){var n=r-2,s=e[n],i=e[r-1],a=e[r];if(i===Uy&&a===Py)return Ni;if(i===Uy||i===Py||i===Q_||a===Uy||a===Py||a===Q_)return ky;if(i===j_&&[j_,Qy,k_,D_].indexOf(a)!==-1||(i===k_||i===Qy)&&(a===Qy||a===Ly)||(i===D_||i===Ly)&&a===Ly||a===R_||a===L_||a===Nq||i===_q)return Ni;if(i===R_&&a===M_){for(;s===L_;)s=e[--n];if(s===M_)return Ni}if(i===jy&&a===jy){for(var o=0;s===jy;)o++,s=e[--n];if(o%2===0)return Ni}return ky},Pq=function(t){var e=Iq(t),r=e.length,n=0,s=0,i=e.map(Tq);return{next:function(){if(n>=r)return{done:!0,value:null};for(var a=Ni;n<r&&(a=Uq(e,i,++n))===Ni;);if(a!==Ni||n===r){var o=Sq.apply(null,e.slice(s,n));return s=n,{value:o,done:!1}}return{done:!0,value:null}}}},Qq=function(t){for(var e=Pq(t),r=[],n;!(n=e.next()).done;)n.value&&r.push(n.value.slice());return r},Lq=function(t){var e=123;if(t.createRange){var r=t.createRange();if(r.getBoundingClientRect){var n=t.createElement("boundtest");n.style.height=e+"px",n.style.display="block",t.body.appendChild(n),r.selectNode(n);var s=r.getBoundingClientRect(),i=Math.round(s.height);if(t.body.removeChild(n),i===e)return!0}}return!1},jq=function(t){var e=t.createElement("boundtest");e.style.width="50px",e.style.display="block",e.style.fontSize="12px",e.style.letterSpacing="0px",e.style.wordSpacing="0px",t.body.appendChild(e);var r=t.createRange();e.innerHTML=typeof"".repeat=="function"?"&#128104;".repeat(10):"";var n=e.firstChild,s=aw(n.data).map(function(l){return vn(l)}),i=0,a={},o=s.every(function(l,c){r.setStart(n,i),r.setEnd(n,i+l.length);var u=r.getBoundingClientRect();i+=l.length;var f=u.x>a.x||u.y>a.y;return a=u,c===0?!0:f});return t.body.removeChild(e),o},kq=function(){return typeof new Image().crossOrigin<"u"},Dq=function(){return typeof new XMLHttpRequest().responseType=="string"},Rq=function(t){var e=new Image,r=t.createElement("canvas"),n=r.getContext("2d");if(!n)return!1;e.src="data:image/svg+xml,<svg xmlns='http://www.w3.org/2000/svg'></svg>";try{n.drawImage(e,0,0),r.toDataURL()}catch{return!1}return!0},O_=function(t){return t[0]===0&&t[1]===255&&t[2]===0&&t[3]===255},Mq=function(t){var e=t.createElement("canvas"),r=100;e.width=r,e.height=r;var n=e.getContext("2d");if(!n)return Promise.reject(!1);n.fillStyle="rgb(0, 255, 0)",n.fillRect(0,0,r,r);var s=new Image,i=e.toDataURL();s.src=i;var a=q2(r,r,0,0,s);return n.fillStyle="red",n.fillRect(0,0,r,r),H_(a).then(function(o){n.drawImage(o,0,0);var l=n.getImageData(0,0,r,r).data;n.fillStyle="red",n.fillRect(0,0,r,r);var c=t.createElement("div");return c.style.backgroundImage="url("+i+")",c.style.height=r+"px",O_(l)?H_(q2(r,r,0,0,c)):Promise.reject(!1)}).then(function(o){return n.drawImage(o,0,0),O_(n.getImageData(0,0,r,r).data)}).catch(function(){return!1})},q2=function(t,e,r,n,s){var i="http://www.w3.org/2000/svg",a=document.createElementNS(i,"svg"),o=document.createElementNS(i,"foreignObject");return a.setAttributeNS(null,"width",t.toString()),a.setAttributeNS(null,"height",e.toString()),o.setAttributeNS(null,"width","100%"),o.setAttributeNS(null,"height","100%"),o.setAttributeNS(null,"x",r.toString()),o.setAttributeNS(null,"y",n.toString()),o.setAttributeNS(null,"externalResourcesRequired","true"),a.appendChild(o),o.appendChild(s),a},H_=function(t){return new Promise(function(e,r){var n=new Image;n.onload=function(){return e(n)},n.onerror=r,n.src="data:image/svg+xml;charset=utf-8,"+encodeURIComponent(new XMLSerializer().serializeToString(t))})},rs={get SUPPORT_RANGE_BOUNDS(){var t=Lq(document);return Object.defineProperty(rs,"SUPPORT_RANGE_BOUNDS",{value:t}),t},get SUPPORT_WORD_BREAKING(){var t=rs.SUPPORT_RANGE_BOUNDS&&jq(document);return Object.defineProperty(rs,"SUPPORT_WORD_BREAKING",{value:t}),t},get SUPPORT_SVG_DRAWING(){var t=Rq(document);return Object.defineProperty(rs,"SUPPORT_SVG_DRAWING",{value:t}),t},get SUPPORT_FOREIGNOBJECT_DRAWING(){var t=typeof Array.from=="function"&&typeof window.fetch=="function"?Mq(document):Promise.resolve(!1);return Object.defineProperty(rs,"SUPPORT_FOREIGNOBJECT_DRAWING",{value:t}),t},get SUPPORT_CORS_IMAGES(){var t=kq();return Object.defineProperty(rs,"SUPPORT_CORS_IMAGES",{value:t}),t},get SUPPORT_RESPONSE_TYPE(){var t=Dq();return Object.defineProperty(rs,"SUPPORT_RESPONSE_TYPE",{value:t}),t},get SUPPORT_CORS_XHR(){var t="withCredentials"in new XMLHttpRequest;return Object.defineProperty(rs,"SUPPORT_CORS_XHR",{value:t}),t},get SUPPORT_NATIVE_TEXT_SEGMENTATION(){var t=!!(typeof Intl<"u"&&Intl.Segmenter);return Object.defineProperty(rs,"SUPPORT_NATIVE_TEXT_SEGMENTATION",{value:t}),t}},Sf=function(){function t(e,r){this.text=e,this.bounds=r}return t}(),Oq=function(t,e,r,n){var s=Kq(e,r),i=[],a=0;return s.forEach(function(o){if(r.textDecorationLine.length||o.trim().length>0)if(rs.SUPPORT_RANGE_BOUNDS){var l=V_(n,a,o.length).getClientRects();if(l.length>1){var c=vB(o),u=0;c.forEach(function(p){i.push(new Sf(p,Vo.fromDOMRectList(t,V_(n,u+a,p.length).getClientRects()))),u+=p.length})}else i.push(new Sf(o,Vo.fromDOMRectList(t,l)))}else{var f=n.splitText(o.length);i.push(new Sf(o,Hq(t,n))),n=f}else rs.SUPPORT_RANGE_BOUNDS||(n=n.splitText(o.length));a+=o.length}),i},Hq=function(t,e){var r=e.ownerDocument;if(r){var n=r.createElement("html2canvaswrapper");n.appendChild(e.cloneNode(!0));var s=e.parentNode;if(s){s.replaceChild(n,e);var i=iw(t,n);return n.firstChild&&s.replaceChild(n.firstChild,n),i}}return Vo.EMPTY},V_=function(t,e,r){var n=t.ownerDocument;if(!n)throw new Error("Node has no owner document");var s=n.createRange();return s.setStart(t,e),s.setEnd(t,e+r),s},vB=function(t){if(rs.SUPPORT_NATIVE_TEXT_SEGMENTATION){var e=new Intl.Segmenter(void 0,{granularity:"grapheme"});return Array.from(e.segment(t)).map(function(r){return r.segment})}return Qq(t)},Vq=function(t,e){if(rs.SUPPORT_NATIVE_TEXT_SEGMENTATION){var r=new Intl.Segmenter(void 0,{granularity:"word"});return Array.from(r.segment(t)).map(function(n){return n.segment})}return Gq(t,e)},Kq=function(t,e){return e.letterSpacing!==0?vB(t):Vq(t,e)},qq=[32,160,4961,65792,65793,4153,4241],Gq=function(t,e){for(var r=w7(t,{lineBreak:e.lineBreak,wordBreak:e.overflowWrap==="break-word"?"break-word":e.wordBreak}),n=[],s,i=function(){if(s.value){var a=s.value.slice(),o=aw(a),l="";o.forEach(function(c){qq.indexOf(c)===-1?l+=vn(c):(l.length&&n.push(l),n.push(vn(c)),l="")}),l.length&&n.push(l)}};!(s=r.next()).done;)i();return n},zq=function(){function t(e,r,n){this.text=$q(r.data,n.textTransform),this.textBounds=Oq(e,this.text,n,r)}return t}(),$q=function(t,e){switch(e){case 1:return t.toLowerCase();case 3:return t.replace(Wq,Xq);case 2:return t.toUpperCase();default:return t}},Wq=/(^|\s|:|-|\(|\))([a-z])/g,Xq=function(t,e,r){return t.length>0?e+r.toUpperCase():t},qU=function(t){ha(e,t);function e(r,n){var s=t.call(this,r,n)||this;return s.src=n.currentSrc||n.src,s.intrinsicWidth=n.naturalWidth,s.intrinsicHeight=n.naturalHeight,s.context.cache.addImage(s.src),s}return e}(Ga),GU=function(t){ha(e,t);function e(r,n){var s=t.call(this,r,n)||this;return s.canvas=n,s.intrinsicWidth=n.width,s.intrinsicHeight=n.height,s}return e}(Ga),zU=function(t){ha(e,t);function e(r,n){var s=t.call(this,r,n)||this,i=new XMLSerializer,a=iw(r,n);return n.setAttribute("width",a.width+"px"),n.setAttribute("height",a.height+"px"),s.svg="data:image/svg+xml,"+encodeURIComponent(i.serializeToString(n)),s.intrinsicWidth=n.width.baseVal.value,s.intrinsicHeight=n.height.baseVal.value,s.context.cache.addImage(s.svg),s}return e}(Ga),$U=function(t){ha(e,t);function e(r,n){var s=t.call(this,r,n)||this;return s.value=n.value,s}return e}(Ga),G2=function(t){ha(e,t);function e(r,n){var s=t.call(this,r,n)||this;return s.start=n.start,s.reversed=typeof n.reversed=="boolean"&&n.reversed===!0,s}return e}(Ga),Jq=[{type:15,flags:0,unit:"px",number:3}],Yq=[{type:16,flags:0,number:50}],Zq=function(t){return t.width>t.height?new Vo(t.left+(t.width-t.height)/2,t.top,t.height,t.height):t.width<t.height?new Vo(t.left,t.top+(t.height-t.width)/2,t.width,t.width):t},eG=function(t){var e=t.type===tG?new Array(t.value.length+1).join(""):t.value;return e.length===0?t.placeholder||"":e},X0="checkbox",J0="radio",tG="password",K_=707406591,wB=function(t){ha(e,t);function e(r,n){var s=t.call(this,r,n)||this;switch(s.type=n.type.toLowerCase(),s.checked=n.checked,s.value=eG(n),(s.type===X0||s.type===J0)&&(s.styles.backgroundColor=3739148031,s.styles.borderTopColor=s.styles.borderRightColor=s.styles.borderBottomColor=s.styles.borderLeftColor=2779096575,s.styles.borderTopWidth=s.styles.borderRightWidth=s.styles.borderBottomWidth=s.styles.borderLeftWidth=1,s.styles.borderTopStyle=s.styles.borderRightStyle=s.styles.borderBottomStyle=s.styles.borderLeftStyle=1,s.styles.backgroundClip=[0],s.styles.backgroundOrigin=[0],s.bounds=Zq(s.bounds)),s.type){case X0:s.styles.borderTopRightRadius=s.styles.borderTopLeftRadius=s.styles.borderBottomRightRadius=s.styles.borderBottomLeftRadius=Jq;break;case J0:s.styles.borderTopRightRadius=s.styles.borderTopLeftRadius=s.styles.borderBottomRightRadius=s.styles.borderBottomLeftRadius=Yq;break}return s}return e}(Ga),WU=function(t){ha(e,t);function e(r,n){var s=t.call(this,r,n)||this,i=n.options[n.selectedIndex||0];return s.value=i&&i.text||"",s}return e}(Ga),XU=function(t){ha(e,t);function e(r,n){var s=t.call(this,r,n)||this;return s.value=n.value,s}return e}(Ga),JU=function(t){ha(e,t);function e(r,n){var s=t.call(this,r,n)||this;s.src=n.src,s.width=parseInt(n.width,10)||0,s.height=parseInt(n.height,10)||0,s.backgroundColor=s.styles.backgroundColor;try{if(n.contentWindow&&n.contentWindow.document&&n.contentWindow.document.documentElement){s.tree=ZU(r,n.contentWindow.document.documentElement);var i=n.contentWindow.document.documentElement?Nf(r,getComputedStyle(n.contentWindow.document.documentElement).backgroundColor):Po.TRANSPARENT,a=n.contentWindow.document.body?Nf(r,getComputedStyle(n.contentWindow.document.body).backgroundColor):Po.TRANSPARENT;s.backgroundColor=cl(i)?cl(a)?s.styles.backgroundColor:a:i}}catch{}return s}return e}(Ga),rG=["OL","UL","MENU"],Zg=function(t,e,r,n){for(var s=e.firstChild,i=void 0;s;s=i)if(i=s.nextSibling,e3(s)&&s.data.trim().length>0)r.textNodes.push(new zq(t,s,r.styles));else if(od(s))if(s3(s)&&s.assignedNodes)s.assignedNodes().forEach(function(o){return Zg(t,o,r,n)});else{var a=YU(t,s);a.styles.isVisible()&&(nG(s,a,n)?a.flags|=4:sG(a.styles)&&(a.flags|=2),rG.indexOf(s.tagName)!==-1&&(a.flags|=8),r.elements.push(a),s.slot,s.shadowRoot?Zg(t,s.shadowRoot,a,n):!Y0(s)&&!t3(s)&&!Z0(s)&&Zg(t,s,a,n))}},YU=function(t,e){return $2(e)?new qU(t,e):r3(e)?new GU(t,e):t3(e)?new zU(t,e):iG(e)?new $U(t,e):aG(e)?new G2(t,e):oG(e)?new wB(t,e):Z0(e)?new WU(t,e):Y0(e)?new XU(t,e):n3(e)?new JU(t,e):new Ga(t,e)},ZU=function(t,e){var r=YU(t,e);return r.flags|=4,Zg(t,e,r,r),r},nG=function(t,e,r){return e.styles.isPositionedWithZIndex()||e.styles.opacity<1||e.styles.isTransformed()||yB(t)&&r.styles.isTransparent()},sG=function(t){return t.isPositioned()||t.isFloating()},e3=function(t){return t.nodeType===Node.TEXT_NODE},od=function(t){return t.nodeType===Node.ELEMENT_NODE},z2=function(t){return od(t)&&typeof t.style<"u"&&!e0(t)},e0=function(t){return typeof t.className=="object"},iG=function(t){return t.tagName==="LI"},aG=function(t){return t.tagName==="OL"},oG=function(t){return t.tagName==="INPUT"},AG=function(t){return t.tagName==="HTML"},t3=function(t){return t.tagName==="svg"},yB=function(t){return t.tagName==="BODY"},r3=function(t){return t.tagName==="CANVAS"},q_=function(t){return t.tagName==="VIDEO"},$2=function(t){return t.tagName==="IMG"},n3=function(t){return t.tagName==="IFRAME"},G_=function(t){return t.tagName==="STYLE"},lG=function(t){return t.tagName==="SCRIPT"},Y0=function(t){return t.tagName==="TEXTAREA"},Z0=function(t){return t.tagName==="SELECT"},s3=function(t){return t.tagName==="SLOT"},z_=function(t){return t.tagName.indexOf("-")>0},cG=function(){function t(){this.counters={}}return t.prototype.getCounterValue=function(e){var r=this.counters[e];return r&&r.length?r[r.length-1]:1},t.prototype.getCounterValues=function(e){var r=this.counters[e];return r||[]},t.prototype.pop=function(e){var r=this;e.forEach(function(n){return r.counters[n].pop()})},t.prototype.parse=function(e){var r=this,n=e.counterIncrement,s=e.counterReset,i=!0;n!==null&&n.forEach(function(o){var l=r.counters[o.counter];l&&o.increment!==0&&(i=!1,l.length||l.push(1),l[Math.max(0,l.length-1)]+=o.increment)});var a=[];return i&&s.forEach(function(o){var l=r.counters[o.counter];a.push(o.counter),l||(l=r.counters[o.counter]=[]),l.push(o.reset)}),a},t}(),$_={integers:[1e3,900,500,400,100,90,50,40,10,9,5,4,1],values:["M","CM","D","CD","C","XC","L","XL","X","IX","V","IV","I"]},W_={integers:[9e3,8e3,7e3,6e3,5e3,4e3,3e3,2e3,1e3,900,800,700,600,500,400,300,200,100,90,80,70,60,50,40,30,20,10,9,8,7,6,5,4,3,2,1],values:["","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","",""]},uG={integers:[1e4,9e3,8e3,7e3,6e3,5e3,4e3,3e3,2e3,1e3,400,300,200,100,90,80,70,60,50,40,30,20,19,18,17,16,15,10,9,8,7,6,5,4,3,2,1],values:["","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","",""]},dG={integers:[1e4,9e3,8e3,7e3,6e3,5e3,4e3,3e3,2e3,1e3,900,800,700,600,500,400,300,200,100,90,80,70,60,50,40,30,20,10,9,8,7,6,5,4,3,2,1],values:["","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","",""]},Su=function(t,e,r,n,s,i){return t<e||t>r?wp(t,s,i.length>0):n.integers.reduce(function(a,o,l){for(;t>=o;)t-=o,a+=n.values[l];return a},"")+i},i3=function(t,e,r,n){var s="";do r||t--,s=n(t)+s,t/=e;while(t*e>=e);return s},gn=function(t,e,r,n,s){var i=r-e+1;return(t<0?"-":"")+(i3(Math.abs(t),i,n,function(a){return vn(Math.floor(a%i)+e)})+s)},Yl=function(t,e,r){r===void 0&&(r=". ");var n=e.length;return i3(Math.abs(t),n,!1,function(s){return e[Math.floor(s%n)]})+r},Ku=1,SA=2,FA=4,lf=8,fo=function(t,e,r,n,s,i){if(t<-9999||t>9999)return wp(t,4,s.length>0);var a=Math.abs(t),o=s;if(a===0)return e[0]+o;for(var l=0;a>0&&l<=4;l++){var c=a%10;c===0&&Qn(i,Ku)&&o!==""?o=e[c]+o:c>1||c===1&&l===0||c===1&&l===1&&Qn(i,SA)||c===1&&l===1&&Qn(i,FA)&&t>100||c===1&&l>1&&Qn(i,lf)?o=e[c]+(l>0?r[l-1]:"")+o:c===1&&l>0&&(o=r[l-1]+o),a=Math.floor(a/10)}return(t<0?n:"")+o},X_="",J_="",Y_="",Dy="",wp=function(t,e,r){var n=r?". ":"",s=r?"":"",i=r?", ":"",a=r?" ":"";switch(e){case 0:return""+a;case 1:return""+a;case 2:return""+a;case 5:var o=gn(t,48,57,!0,n);return o.length<4?"0"+o:o;case 4:return Yl(t,"",s);case 6:return Su(t,1,3999,$_,3,n).toLowerCase();case 7:return Su(t,1,3999,$_,3,n);case 8:return gn(t,945,969,!1,n);case 9:return gn(t,97,122,!1,n);case 10:return gn(t,65,90,!1,n);case 11:return gn(t,1632,1641,!0,n);case 12:case 49:return Su(t,1,9999,W_,3,n);case 35:return Su(t,1,9999,W_,3,n).toLowerCase();case 13:return gn(t,2534,2543,!0,n);case 14:case 30:return gn(t,6112,6121,!0,n);case 15:return Yl(t,"",s);case 16:return Yl(t,"",s);case 17:case 48:return fo(t,"",X_,"",s,SA|FA|lf);case 47:return fo(t,"",J_,"",s,Ku|SA|FA|lf);case 42:return fo(t,"",X_,"",s,SA|FA|lf);case 41:return fo(t,"",J_,"",s,Ku|SA|FA|lf);case 26:return fo(t,"","",Y_,s,0);case 25:return fo(t,"","",Y_,s,Ku|SA|FA);case 31:return fo(t,"","",Dy,i,Ku|SA|FA);case 33:return fo(t,"","",Dy,i,0);case 32:return fo(t,"","",Dy,i,Ku|SA|FA);case 18:return gn(t,2406,2415,!0,n);case 20:return Su(t,1,19999,dG,3,n);case 21:return gn(t,2790,2799,!0,n);case 22:return gn(t,2662,2671,!0,n);case 22:return Su(t,1,10999,uG,3,n);case 23:return Yl(t,"");case 24:return Yl(t,"");case 27:return gn(t,3302,3311,!0,n);case 28:return Yl(t,"",s);case 29:return Yl(t,"",s);case 34:return gn(t,3792,3801,!0,n);case 37:return gn(t,6160,6169,!0,n);case 38:return gn(t,4160,4169,!0,n);case 39:return gn(t,2918,2927,!0,n);case 40:return gn(t,1776,1785,!0,n);case 43:return gn(t,3046,3055,!0,n);case 44:return gn(t,3174,3183,!0,n);case 45:return gn(t,3664,3673,!0,n);case 46:return gn(t,3872,3881,!0,n);case 3:default:return gn(t,48,57,!0,n)}},a3="data-html2canvas-ignore",Z_=function(){function t(e,r,n){if(this.context=e,this.options=n,this.scrolledElements=[],this.referenceElement=r,this.counters=new cG,this.quoteDepth=0,!r.ownerDocument)throw new Error("Cloned element does not have an owner document");this.documentElement=this.cloneNode(r.ownerDocument.documentElement,!1)}return t.prototype.toIFrame=function(e,r){var n=this,s=hG(e,r);if(!s.contentWindow)return Promise.reject("Unable to find iframe window");var i=e.defaultView.pageXOffset,a=e.defaultView.pageYOffset,o=s.contentWindow,l=o.document,c=mG(s).then(function(){return Fs(n,void 0,void 0,function(){var u,f;return ws(this,function(p){switch(p.label){case 0:return this.scrolledElements.forEach(yG),o&&(o.scrollTo(r.left,r.top),/(iPad|iPhone|iPod)/g.test(navigator.userAgent)&&(o.scrollY!==r.top||o.scrollX!==r.left)&&(this.context.logger.warn("Unable to restore scroll position for cloned document"),this.context.windowBounds=this.context.windowBounds.add(o.scrollX-r.left,o.scrollY-r.top,0,0))),u=this.options.onclone,f=this.clonedReferenceElement,typeof f>"u"?[2,Promise.reject("Error finding the "+this.referenceElement.nodeName+" in the cloned document")]:l.fonts&&l.fonts.ready?[4,l.fonts.ready]:[3,2];case 1:p.sent(),p.label=2;case 2:return/(AppleWebKit)/g.test(navigator.userAgent)?[4,pG(l)]:[3,4];case 3:p.sent(),p.label=4;case 4:return typeof u=="function"?[2,Promise.resolve().then(function(){return u(l,f)}).then(function(){return s})]:[2,s]}})})});return l.open(),l.write(vG(document.doctype)+"<html></html>"),wG(this.referenceElement.ownerDocument,i,a),l.replaceChild(l.adoptNode(this.documentElement),l.documentElement),l.close(),c},t.prototype.createElementClone=function(e){if(K2(e,2))debugger;if(r3(e))return this.createCanvasClone(e);if(q_(e))return this.createVideoClone(e);if(G_(e))return this.createStyleClone(e);var r=e.cloneNode(!1);return $2(r)&&($2(e)&&e.currentSrc&&e.currentSrc!==e.src&&(r.src=e.currentSrc,r.srcset=""),r.loading==="lazy"&&(r.loading="eager")),z_(r)?this.createCustomElementClone(r):r},t.prototype.createCustomElementClone=function(e){var r=document.createElement("html2canvascustomelement");return Ry(e.style,r),r},t.prototype.createStyleClone=function(e){try{var r=e.sheet;if(r&&r.cssRules){var n=[].slice.call(r.cssRules,0).reduce(function(i,a){return a&&typeof a.cssText=="string"?i+a.cssText:i},""),s=e.cloneNode(!1);return s.textContent=n,s}}catch(i){if(this.context.logger.error("Unable to access cssRules property",i),i.name!=="SecurityError")throw i}return e.cloneNode(!1)},t.prototype.createCanvasClone=function(e){var r;if(this.options.inlineImages&&e.ownerDocument){var n=e.ownerDocument.createElement("img");try{return n.src=e.toDataURL(),n}catch{this.context.logger.info("Unable to inline canvas contents, canvas is tainted",e)}}var s=e.cloneNode(!1);try{s.width=e.width,s.height=e.height;var i=e.getContext("2d"),a=s.getContext("2d");if(a)if(!this.options.allowTaint&&i)a.putImageData(i.getImageData(0,0,e.width,e.height),0,0);else{var o=(r=e.getContext("webgl2"))!==null&&r!==void 0?r:e.getContext("webgl");if(o){var l=o.getContextAttributes();(l==null?void 0:l.preserveDrawingBuffer)===!1&&this.context.logger.warn("Unable to clone WebGL context as it has preserveDrawingBuffer=false",e)}a.drawImage(e,0,0)}return s}catch{this.context.logger.info("Unable to clone canvas as it is tainted",e)}return s},t.prototype.createVideoClone=function(e){var r=e.ownerDocument.createElement("canvas");r.width=e.offsetWidth,r.height=e.offsetHeight;var n=r.getContext("2d");try{return n&&(n.drawImage(e,0,0,r.width,r.height),this.options.allowTaint||n.getImageData(0,0,r.width,r.height)),r}catch{this.context.logger.info("Unable to clone video as it is tainted",e)}var s=e.ownerDocument.createElement("canvas");return s.width=e.offsetWidth,s.height=e.offsetHeight,s},t.prototype.appendChildNode=function(e,r,n){(!od(r)||!lG(r)&&!r.hasAttribute(a3)&&(typeof this.options.ignoreElements!="function"||!this.options.ignoreElements(r)))&&(!this.options.copyStyles||!od(r)||!G_(r))&&e.appendChild(this.cloneNode(r,n))},t.prototype.cloneChildNodes=function(e,r,n){for(var s=this,i=e.shadowRoot?e.shadowRoot.firstChild:e.firstChild;i;i=i.nextSibling)if(od(i)&&s3(i)&&typeof i.assignedNodes=="function"){var a=i.assignedNodes();a.length&&a.forEach(function(o){return s.appendChildNode(r,o,n)})}else this.appendChildNode(r,i,n)},t.prototype.cloneNode=function(e,r){if(e3(e))return document.createTextNode(e.data);if(!e.ownerDocument)return e.cloneNode(!1);var n=e.ownerDocument.defaultView;if(n&&od(e)&&(z2(e)||e0(e))){var s=this.createElementClone(e);s.style.transitionProperty="none";var i=n.getComputedStyle(e),a=n.getComputedStyle(e,":before"),o=n.getComputedStyle(e,":after");this.referenceElement===e&&z2(s)&&(this.clonedReferenceElement=s),yB(s)&&BG(s);var l=this.counters.parse(new F_(this.context,i)),c=this.resolvePseudoContent(e,s,a,Ff.BEFORE);z_(e)&&(r=!0),q_(e)||this.cloneChildNodes(e,s,r),c&&s.insertBefore(c,s.firstChild);var u=this.resolvePseudoContent(e,s,o,Ff.AFTER);return u&&s.appendChild(u),this.counters.pop(l),(i&&(this.options.copyStyles||e0(e))&&!n3(e)||r)&&Ry(i,s),(e.scrollTop!==0||e.scrollLeft!==0)&&this.scrolledElements.push([s,e.scrollLeft,e.scrollTop]),(Y0(e)||Z0(e))&&(Y0(s)||Z0(s))&&(s.value=e.value),s}return e.cloneNode(!1)},t.prototype.resolvePseudoContent=function(e,r,n,s){var i=this;if(n){var a=n.content,o=r.ownerDocument;if(!(!o||!a||a==="none"||a==="-moz-alt-content"||n.display==="none")){this.counters.parse(new F_(this.context,n));var l=new iq(this.context,n),c=o.createElement("html2canvaspseudoelement");Ry(n,c),l.content.forEach(function(f){if(f.type===0)c.appendChild(o.createTextNode(f.value));else if(f.type===22){var p=o.createElement("img");p.src=f.value,p.style.opacity="1",c.appendChild(p)}else if(f.type===18){if(f.name==="attr"){var m=f.values.filter(Fr);m.length&&c.appendChild(o.createTextNode(e.getAttribute(m[0].value)||""))}else if(f.name==="counter"){var b=f.values.filter(kd),B=b[0],_=b[1];if(B&&Fr(B)){var w=i.counters.getCounterValue(B.value),y=_&&Fr(_)?V2.parse(i.context,_.value):3;c.appendChild(o.createTextNode(wp(w,y,!1)))}}else if(f.name==="counters"){var S=f.values.filter(kd),B=S[0],O=S[1],_=S[2];if(B&&Fr(B)){var R=i.counters.getCounterValues(B.value),M=_&&Fr(_)?V2.parse(i.context,_.value):3,I=O&&O.type===0?O.value:"",E=R.map(function(N){return wp(N,M,!1)}).join(I);c.appendChild(o.createTextNode(E))}}}else if(f.type===20)switch(f.value){case"open-quote":c.appendChild(o.createTextNode(S_(l.quotes,i.quoteDepth++,!0)));break;case"close-quote":c.appendChild(o.createTextNode(S_(l.quotes,--i.quoteDepth,!1)));break;default:c.appendChild(o.createTextNode(f.value))}}),c.className=W2+" "+X2;var u=s===Ff.BEFORE?" "+W2:" "+X2;return e0(r)?r.className.baseValue+=u:r.className+=u,c}}},t.destroy=function(e){return e.parentNode?(e.parentNode.removeChild(e),!0):!1},t}(),Ff;(function(t){t[t.BEFORE=0]="BEFORE",t[t.AFTER=1]="AFTER"})(Ff||(Ff={}));var hG=function(t,e){var r=t.createElement("iframe");return r.className="html2canvas-container",r.style.visibility="hidden",r.style.position="fixed",r.style.left="-10000px",r.style.top="0px",r.style.border="0",r.width=e.width.toString(),r.height=e.height.toString(),r.scrolling="no",r.setAttribute(a3,"true"),t.body.appendChild(r),r},fG=function(t){return new Promise(function(e){if(t.complete){e();return}if(!t.src){e();return}t.onload=e,t.onerror=e})},pG=function(t){return Promise.all([].slice.call(t.images,0).map(fG))},mG=function(t){return new Promise(function(e,r){var n=t.contentWindow;if(!n)return r("No window assigned for iframe");var s=n.document;n.onload=t.onload=function(){n.onload=t.onload=null;var i=setInterval(function(){s.body.childNodes.length>0&&s.readyState==="complete"&&(clearInterval(i),e(t))},50)}})},gG=["all","d","content"],Ry=function(t,e){for(var r=t.length-1;r>=0;r--){var n=t.item(r);gG.indexOf(n)===-1&&e.style.setProperty(n,t.getPropertyValue(n))}return e},vG=function(t){var e="";return t&&(e+="<!DOCTYPE ",t.name&&(e+=t.name),t.internalSubset&&(e+=t.internalSubset),t.publicId&&(e+='"'+t.publicId+'"'),t.systemId&&(e+='"'+t.systemId+'"'),e+=">"),e},wG=function(t,e,r){t&&t.defaultView&&(e!==t.defaultView.pageXOffset||r!==t.defaultView.pageYOffset)&&t.defaultView.scrollTo(e,r)},yG=function(t){var e=t[0],r=t[1],n=t[2];e.scrollLeft=r,e.scrollTop=n},xG=":before",bG=":after",W2="___html2canvas___pseudoelement_before",X2="___html2canvas___pseudoelement_after",eN=`{
    content: "" !important;
    display: none !important;
}`,BG=function(t){CG(t,"."+W2+xG+eN+`
         .`+X2+bG+eN)},CG=function(t,e){var r=t.ownerDocument;if(r){var n=r.createElement("style");n.textContent=e,t.appendChild(n)}},o3=function(){function t(){}return t.getOrigin=function(e){var r=t._link;return r?(r.href=e,r.href=r.href,r.protocol+r.hostname+r.port):"about:blank"},t.isSameOrigin=function(e){return t.getOrigin(e)===t._origin},t.setContext=function(e){t._link=e.document.createElement("a"),t._origin=t.getOrigin(e.location.href)},t._origin="about:blank",t}(),EG=function(){function t(e,r){this.context=e,this._options=r,this._cache={}}return t.prototype.addImage=function(e){var r=Promise.resolve();return this.has(e)||(Oy(e)||SG(e))&&(this._cache[e]=this.loadImage(e)).catch(function(){}),r},t.prototype.match=function(e){return this._cache[e]},t.prototype.loadImage=function(e){return Fs(this,void 0,void 0,function(){var r,n,s,i,a=this;return ws(this,function(o){switch(o.label){case 0:return r=o3.isSameOrigin(e),n=!My(e)&&this._options.useCORS===!0&&rs.SUPPORT_CORS_IMAGES&&!r,s=!My(e)&&!r&&!Oy(e)&&typeof this._options.proxy=="string"&&rs.SUPPORT_CORS_XHR&&!n,!r&&this._options.allowTaint===!1&&!My(e)&&!Oy(e)&&!s&&!n?[2]:(i=e,s?[4,this.proxy(i)]:[3,2]);case 1:i=o.sent(),o.label=2;case 2:return this.context.logger.debug("Added image "+e.substring(0,256)),[4,new Promise(function(l,c){var u=new Image;u.onload=function(){return l(u)},u.onerror=c,(FG(i)||n)&&(u.crossOrigin="anonymous"),u.src=i,u.complete===!0&&setTimeout(function(){return l(u)},500),a._options.imageTimeout>0&&setTimeout(function(){return c("Timed out ("+a._options.imageTimeout+"ms) loading image")},a._options.imageTimeout)})];case 3:return[2,o.sent()]}})})},t.prototype.has=function(e){return typeof this._cache[e]<"u"},t.prototype.keys=function(){return Promise.resolve(Object.keys(this._cache))},t.prototype.proxy=function(e){var r=this,n=this._options.proxy;if(!n)throw new Error("No proxy defined");var s=e.substring(0,256);return new Promise(function(i,a){var o=rs.SUPPORT_RESPONSE_TYPE?"blob":"text",l=new XMLHttpRequest;l.onload=function(){if(l.status===200)if(o==="text")i(l.response);else{var f=new FileReader;f.addEventListener("load",function(){return i(f.result)},!1),f.addEventListener("error",function(p){return a(p)},!1),f.readAsDataURL(l.response)}else a("Failed to proxy resource "+s+" with status code "+l.status)},l.onerror=a;var c=n.indexOf("?")>-1?"&":"?";if(l.open("GET",""+n+c+"url="+encodeURIComponent(e)+"&responseType="+o),o!=="text"&&l instanceof XMLHttpRequest&&(l.responseType=o),r._options.imageTimeout){var u=r._options.imageTimeout;l.timeout=u,l.ontimeout=function(){return a("Timed out ("+u+"ms) proxying "+s)}}l.send()})},t}(),_G=/^data:image\/svg\+xml/i,NG=/^data:image\/.*;base64,/i,IG=/^data:image\/.*/i,SG=function(t){return rs.SUPPORT_SVG_DRAWING||!TG(t)},My=function(t){return IG.test(t)},FG=function(t){return NG.test(t)},Oy=function(t){return t.substr(0,4)==="blob"},TG=function(t){return t.substr(-3).toLowerCase()==="svg"||_G.test(t)},pt=function(){function t(e,r){this.type=0,this.x=e,this.y=r}return t.prototype.add=function(e,r){return new t(this.x+e,this.y+r)},t}(),Fu=function(t,e,r){return new pt(t.x+(e.x-t.x)*r,t.y+(e.y-t.y)*r)},Ag=function(){function t(e,r,n,s){this.type=1,this.start=e,this.startControl=r,this.endControl=n,this.end=s}return t.prototype.subdivide=function(e,r){var n=Fu(this.start,this.startControl,e),s=Fu(this.startControl,this.endControl,e),i=Fu(this.endControl,this.end,e),a=Fu(n,s,e),o=Fu(s,i,e),l=Fu(a,o,e);return r?new t(this.start,n,a,l):new t(l,o,i,this.end)},t.prototype.add=function(e,r){return new t(this.start.add(e,r),this.startControl.add(e,r),this.endControl.add(e,r),this.end.add(e,r))},t.prototype.reverse=function(){return new t(this.end,this.endControl,this.startControl,this.start)},t}(),Fi=function(t){return t.type===1},UG=function(){function t(e){var r=e.styles,n=e.bounds,s=of(r.borderTopLeftRadius,n.width,n.height),i=s[0],a=s[1],o=of(r.borderTopRightRadius,n.width,n.height),l=o[0],c=o[1],u=of(r.borderBottomRightRadius,n.width,n.height),f=u[0],p=u[1],m=of(r.borderBottomLeftRadius,n.width,n.height),b=m[0],B=m[1],_=[];_.push((i+l)/n.width),_.push((b+f)/n.width),_.push((a+B)/n.height),_.push((c+p)/n.height);var w=Math.max.apply(Math,_);w>1&&(i/=w,a/=w,l/=w,c/=w,f/=w,p/=w,b/=w,B/=w);var y=n.width-l,S=n.height-p,O=n.width-f,R=n.height-B,M=r.borderTopWidth,I=r.borderRightWidth,E=r.borderBottomWidth,L=r.borderLeftWidth,D=Dr(r.paddingTop,e.bounds.width),N=Dr(r.paddingRight,e.bounds.width),T=Dr(r.paddingBottom,e.bounds.width),F=Dr(r.paddingLeft,e.bounds.width);this.topLeftBorderDoubleOuterBox=i>0||a>0?$r(n.left+L/3,n.top+M/3,i-L/3,a-M/3,xr.TOP_LEFT):new pt(n.left+L/3,n.top+M/3),this.topRightBorderDoubleOuterBox=i>0||a>0?$r(n.left+y,n.top+M/3,l-I/3,c-M/3,xr.TOP_RIGHT):new pt(n.left+n.width-I/3,n.top+M/3),this.bottomRightBorderDoubleOuterBox=f>0||p>0?$r(n.left+O,n.top+S,f-I/3,p-E/3,xr.BOTTOM_RIGHT):new pt(n.left+n.width-I/3,n.top+n.height-E/3),this.bottomLeftBorderDoubleOuterBox=b>0||B>0?$r(n.left+L/3,n.top+R,b-L/3,B-E/3,xr.BOTTOM_LEFT):new pt(n.left+L/3,n.top+n.height-E/3),this.topLeftBorderDoubleInnerBox=i>0||a>0?$r(n.left+L*2/3,n.top+M*2/3,i-L*2/3,a-M*2/3,xr.TOP_LEFT):new pt(n.left+L*2/3,n.top+M*2/3),this.topRightBorderDoubleInnerBox=i>0||a>0?$r(n.left+y,n.top+M*2/3,l-I*2/3,c-M*2/3,xr.TOP_RIGHT):new pt(n.left+n.width-I*2/3,n.top+M*2/3),this.bottomRightBorderDoubleInnerBox=f>0||p>0?$r(n.left+O,n.top+S,f-I*2/3,p-E*2/3,xr.BOTTOM_RIGHT):new pt(n.left+n.width-I*2/3,n.top+n.height-E*2/3),this.bottomLeftBorderDoubleInnerBox=b>0||B>0?$r(n.left+L*2/3,n.top+R,b-L*2/3,B-E*2/3,xr.BOTTOM_LEFT):new pt(n.left+L*2/3,n.top+n.height-E*2/3),this.topLeftBorderStroke=i>0||a>0?$r(n.left+L/2,n.top+M/2,i-L/2,a-M/2,xr.TOP_LEFT):new pt(n.left+L/2,n.top+M/2),this.topRightBorderStroke=i>0||a>0?$r(n.left+y,n.top+M/2,l-I/2,c-M/2,xr.TOP_RIGHT):new pt(n.left+n.width-I/2,n.top+M/2),this.bottomRightBorderStroke=f>0||p>0?$r(n.left+O,n.top+S,f-I/2,p-E/2,xr.BOTTOM_RIGHT):new pt(n.left+n.width-I/2,n.top+n.height-E/2),this.bottomLeftBorderStroke=b>0||B>0?$r(n.left+L/2,n.top+R,b-L/2,B-E/2,xr.BOTTOM_LEFT):new pt(n.left+L/2,n.top+n.height-E/2),this.topLeftBorderBox=i>0||a>0?$r(n.left,n.top,i,a,xr.TOP_LEFT):new pt(n.left,n.top),this.topRightBorderBox=l>0||c>0?$r(n.left+y,n.top,l,c,xr.TOP_RIGHT):new pt(n.left+n.width,n.top),this.bottomRightBorderBox=f>0||p>0?$r(n.left+O,n.top+S,f,p,xr.BOTTOM_RIGHT):new pt(n.left+n.width,n.top+n.height),this.bottomLeftBorderBox=b>0||B>0?$r(n.left,n.top+R,b,B,xr.BOTTOM_LEFT):new pt(n.left,n.top+n.height),this.topLeftPaddingBox=i>0||a>0?$r(n.left+L,n.top+M,Math.max(0,i-L),Math.max(0,a-M),xr.TOP_LEFT):new pt(n.left+L,n.top+M),this.topRightPaddingBox=l>0||c>0?$r(n.left+Math.min(y,n.width-I),n.top+M,y>n.width+I?0:Math.max(0,l-I),Math.max(0,c-M),xr.TOP_RIGHT):new pt(n.left+n.width-I,n.top+M),this.bottomRightPaddingBox=f>0||p>0?$r(n.left+Math.min(O,n.width-L),n.top+Math.min(S,n.height-E),Math.max(0,f-I),Math.max(0,p-E),xr.BOTTOM_RIGHT):new pt(n.left+n.width-I,n.top+n.height-E),this.bottomLeftPaddingBox=b>0||B>0?$r(n.left+L,n.top+Math.min(R,n.height-E),Math.max(0,b-L),Math.max(0,B-E),xr.BOTTOM_LEFT):new pt(n.left+L,n.top+n.height-E),this.topLeftContentBox=i>0||a>0?$r(n.left+L+F,n.top+M+D,Math.max(0,i-(L+F)),Math.max(0,a-(M+D)),xr.TOP_LEFT):new pt(n.left+L+F,n.top+M+D),this.topRightContentBox=l>0||c>0?$r(n.left+Math.min(y,n.width+L+F),n.top+M+D,y>n.width+L+F?0:l-L+F,c-(M+D),xr.TOP_RIGHT):new pt(n.left+n.width-(I+N),n.top+M+D),this.bottomRightContentBox=f>0||p>0?$r(n.left+Math.min(O,n.width-(L+F)),n.top+Math.min(S,n.height+M+D),Math.max(0,f-(I+N)),p-(E+T),xr.BOTTOM_RIGHT):new pt(n.left+n.width-(I+N),n.top+n.height-(E+T)),this.bottomLeftContentBox=b>0||B>0?$r(n.left+L+F,n.top+R,Math.max(0,b-(L+F)),B-(E+T),xr.BOTTOM_LEFT):new pt(n.left+L+F,n.top+n.height-(E+T))}return t}(),xr;(function(t){t[t.TOP_LEFT=0]="TOP_LEFT",t[t.TOP_RIGHT=1]="TOP_RIGHT",t[t.BOTTOM_RIGHT=2]="BOTTOM_RIGHT",t[t.BOTTOM_LEFT=3]="BOTTOM_LEFT"})(xr||(xr={}));var $r=function(t,e,r,n,s){var i=4*((Math.sqrt(2)-1)/3),a=r*i,o=n*i,l=t+r,c=e+n;switch(s){case xr.TOP_LEFT:return new Ag(new pt(t,c),new pt(t,c-o),new pt(l-a,e),new pt(l,e));case xr.TOP_RIGHT:return new Ag(new pt(t,e),new pt(t+a,e),new pt(l,c-o),new pt(l,c));case xr.BOTTOM_RIGHT:return new Ag(new pt(l,e),new pt(l,e+o),new pt(t+a,c),new pt(t,c));case xr.BOTTOM_LEFT:default:return new Ag(new pt(l,c),new pt(l-a,c),new pt(t,e+o),new pt(t,e))}},ev=function(t){return[t.topLeftBorderBox,t.topRightBorderBox,t.bottomRightBorderBox,t.bottomLeftBorderBox]},PG=function(t){return[t.topLeftContentBox,t.topRightContentBox,t.bottomRightContentBox,t.bottomLeftContentBox]},tv=function(t){return[t.topLeftPaddingBox,t.topRightPaddingBox,t.bottomRightPaddingBox,t.bottomLeftPaddingBox]},QG=function(){function t(e,r,n){this.offsetX=e,this.offsetY=r,this.matrix=n,this.type=0,this.target=6}return t}(),lg=function(){function t(e,r){this.path=e,this.target=r,this.type=1}return t}(),LG=function(){function t(e){this.opacity=e,this.type=2,this.target=6}return t}(),jG=function(t){return t.type===0},A3=function(t){return t.type===1},kG=function(t){return t.type===2},tN=function(t,e){return t.length===e.length?t.some(function(r,n){return r===e[n]}):!1},DG=function(t,e,r,n,s){return t.map(function(i,a){switch(a){case 0:return i.add(e,r);case 1:return i.add(e+n,r);case 2:return i.add(e+n,r+s);case 3:return i.add(e,r+s)}return i})},l3=function(){function t(e){this.element=e,this.inlineLevel=[],this.nonInlineLevel=[],this.negativeZIndex=[],this.zeroOrAutoZIndexOrTransformedOrOpacity=[],this.positiveZIndex=[],this.nonPositionedFloats=[],this.nonPositionedInlineLevel=[]}return t}(),c3=function(){function t(e,r){if(this.container=e,this.parent=r,this.effects=[],this.curves=new UG(this.container),this.container.styles.opacity<1&&this.effects.push(new LG(this.container.styles.opacity)),this.container.styles.transform!==null){var n=this.container.bounds.left+this.container.styles.transformOrigin[0].number,s=this.container.bounds.top+this.container.styles.transformOrigin[1].number,i=this.container.styles.transform;this.effects.push(new QG(n,s,i))}if(this.container.styles.overflowX!==0){var a=ev(this.curves),o=tv(this.curves);tN(a,o)?this.effects.push(new lg(a,6)):(this.effects.push(new lg(a,2)),this.effects.push(new lg(o,4)))}}return t.prototype.getEffects=function(e){for(var r=[2,3].indexOf(this.container.styles.position)===-1,n=this.parent,s=this.effects.slice(0);n;){var i=n.effects.filter(function(l){return!A3(l)});if(r||n.container.styles.position!==0||!n.parent){if(s.unshift.apply(s,i),r=[2,3].indexOf(n.container.styles.position)===-1,n.container.styles.overflowX!==0){var a=ev(n.curves),o=tv(n.curves);tN(a,o)||s.unshift(new lg(o,6))}}else s.unshift.apply(s,i);n=n.parent}return s.filter(function(l){return Qn(l.target,e)})},t}(),J2=function(t,e,r,n){t.container.elements.forEach(function(s){var i=Qn(s.flags,4),a=Qn(s.flags,2),o=new c3(s,t);Qn(s.styles.display,2048)&&n.push(o);var l=Qn(s.flags,8)?[]:n;if(i||a){var c=i||s.styles.isPositioned()?r:e,u=new l3(o);if(s.styles.isPositioned()||s.styles.opacity<1||s.styles.isTransformed()){var f=s.styles.zIndex.order;if(f<0){var p=0;c.negativeZIndex.some(function(b,B){return f>b.element.container.styles.zIndex.order?(p=B,!1):p>0}),c.negativeZIndex.splice(p,0,u)}else if(f>0){var m=0;c.positiveZIndex.some(function(b,B){return f>=b.element.container.styles.zIndex.order?(m=B+1,!1):m>0}),c.positiveZIndex.splice(m,0,u)}else c.zeroOrAutoZIndexOrTransformedOrOpacity.push(u)}else s.styles.isFloating()?c.nonPositionedFloats.push(u):c.nonPositionedInlineLevel.push(u);J2(o,u,i?u:r,l)}else s.styles.isInlineLevel()?e.inlineLevel.push(o):e.nonInlineLevel.push(o),J2(o,e,r,l);Qn(s.flags,8)&&u3(s,l)})},u3=function(t,e){for(var r=t instanceof G2?t.start:1,n=t instanceof G2?t.reversed:!1,s=0;s<e.length;s++){var i=e[s];i.container instanceof $U&&typeof i.container.value=="number"&&i.container.value!==0&&(r=i.container.value),i.listValue=wp(r,i.container.styles.listStyleType,!0),r+=n?-1:1}},RG=function(t){var e=new c3(t,null),r=new l3(e),n=[];return J2(e,r,r,n),u3(e.container,n),r},rN=function(t,e){switch(e){case 0:return Qi(t.topLeftBorderBox,t.topLeftPaddingBox,t.topRightBorderBox,t.topRightPaddingBox);case 1:return Qi(t.topRightBorderBox,t.topRightPaddingBox,t.bottomRightBorderBox,t.bottomRightPaddingBox);case 2:return Qi(t.bottomRightBorderBox,t.bottomRightPaddingBox,t.bottomLeftBorderBox,t.bottomLeftPaddingBox);case 3:default:return Qi(t.bottomLeftBorderBox,t.bottomLeftPaddingBox,t.topLeftBorderBox,t.topLeftPaddingBox)}},MG=function(t,e){switch(e){case 0:return Qi(t.topLeftBorderBox,t.topLeftBorderDoubleOuterBox,t.topRightBorderBox,t.topRightBorderDoubleOuterBox);case 1:return Qi(t.topRightBorderBox,t.topRightBorderDoubleOuterBox,t.bottomRightBorderBox,t.bottomRightBorderDoubleOuterBox);case 2:return Qi(t.bottomRightBorderBox,t.bottomRightBorderDoubleOuterBox,t.bottomLeftBorderBox,t.bottomLeftBorderDoubleOuterBox);case 3:default:return Qi(t.bottomLeftBorderBox,t.bottomLeftBorderDoubleOuterBox,t.topLeftBorderBox,t.topLeftBorderDoubleOuterBox)}},OG=function(t,e){switch(e){case 0:return Qi(t.topLeftBorderDoubleInnerBox,t.topLeftPaddingBox,t.topRightBorderDoubleInnerBox,t.topRightPaddingBox);case 1:return Qi(t.topRightBorderDoubleInnerBox,t.topRightPaddingBox,t.bottomRightBorderDoubleInnerBox,t.bottomRightPaddingBox);case 2:return Qi(t.bottomRightBorderDoubleInnerBox,t.bottomRightPaddingBox,t.bottomLeftBorderDoubleInnerBox,t.bottomLeftPaddingBox);case 3:default:return Qi(t.bottomLeftBorderDoubleInnerBox,t.bottomLeftPaddingBox,t.topLeftBorderDoubleInnerBox,t.topLeftPaddingBox)}},HG=function(t,e){switch(e){case 0:return cg(t.topLeftBorderStroke,t.topRightBorderStroke);case 1:return cg(t.topRightBorderStroke,t.bottomRightBorderStroke);case 2:return cg(t.bottomRightBorderStroke,t.bottomLeftBorderStroke);case 3:default:return cg(t.bottomLeftBorderStroke,t.topLeftBorderStroke)}},cg=function(t,e){var r=[];return Fi(t)?r.push(t.subdivide(.5,!1)):r.push(t),Fi(e)?r.push(e.subdivide(.5,!0)):r.push(e),r},Qi=function(t,e,r,n){var s=[];return Fi(t)?s.push(t.subdivide(.5,!1)):s.push(t),Fi(r)?s.push(r.subdivide(.5,!0)):s.push(r),Fi(n)?s.push(n.subdivide(.5,!0).reverse()):s.push(n),Fi(e)?s.push(e.subdivide(.5,!1).reverse()):s.push(e),s},d3=function(t){var e=t.bounds,r=t.styles;return e.add(r.borderLeftWidth,r.borderTopWidth,-(r.borderRightWidth+r.borderLeftWidth),-(r.borderTopWidth+r.borderBottomWidth))},rv=function(t){var e=t.styles,r=t.bounds,n=Dr(e.paddingLeft,r.width),s=Dr(e.paddingRight,r.width),i=Dr(e.paddingTop,r.width),a=Dr(e.paddingBottom,r.width);return r.add(n+e.borderLeftWidth,i+e.borderTopWidth,-(e.borderRightWidth+e.borderLeftWidth+n+s),-(e.borderTopWidth+e.borderBottomWidth+i+a))},VG=function(t,e){return t===0?e.bounds:t===2?rv(e):d3(e)},KG=function(t,e){return t===0?e.bounds:t===2?rv(e):d3(e)},Hy=function(t,e,r){var n=VG(qu(t.styles.backgroundOrigin,e),t),s=KG(qu(t.styles.backgroundClip,e),t),i=qG(qu(t.styles.backgroundSize,e),r,n),a=i[0],o=i[1],l=of(qu(t.styles.backgroundPosition,e),n.width-a,n.height-o),c=GG(qu(t.styles.backgroundRepeat,e),l,i,n,s),u=Math.round(n.left+l[0]),f=Math.round(n.top+l[1]);return[c,u,f,a,o]},Tu=function(t){return Fr(t)&&t.value===vd.AUTO},ug=function(t){return typeof t=="number"},qG=function(t,e,r){var n=e[0],s=e[1],i=e[2],a=t[0],o=t[1];if(!a)return[0,0];if(Nn(a)&&o&&Nn(o))return[Dr(a,r.width),Dr(o,r.height)];var l=ug(i);if(Fr(a)&&(a.value===vd.CONTAIN||a.value===vd.COVER)){if(ug(i)){var c=r.width/r.height;return c<i!=(a.value===vd.COVER)?[r.width,r.width/i]:[r.height*i,r.height]}return[r.width,r.height]}var u=ug(n),f=ug(s),p=u||f;if(Tu(a)&&(!o||Tu(o))){if(u&&f)return[n,s];if(!l&&!p)return[r.width,r.height];if(p&&l){var m=u?n:s*i,b=f?s:n/i;return[m,b]}var B=u?n:r.width,_=f?s:r.height;return[B,_]}if(l){var w=0,y=0;return Nn(a)?w=Dr(a,r.width):Nn(o)&&(y=Dr(o,r.height)),Tu(a)?w=y*i:(!o||Tu(o))&&(y=w/i),[w,y]}var S=null,O=null;if(Nn(a)?S=Dr(a,r.width):o&&Nn(o)&&(O=Dr(o,r.height)),S!==null&&(!o||Tu(o))&&(O=u&&f?S/n*s:r.height),O!==null&&Tu(a)&&(S=u&&f?O/s*n:r.width),S!==null&&O!==null)return[S,O];throw new Error("Unable to calculate background-size for element")},qu=function(t,e){var r=t[e];return typeof r>"u"?t[0]:r},GG=function(t,e,r,n,s){var i=e[0],a=e[1],o=r[0],l=r[1];switch(t){case 2:return[new pt(Math.round(n.left),Math.round(n.top+a)),new pt(Math.round(n.left+n.width),Math.round(n.top+a)),new pt(Math.round(n.left+n.width),Math.round(l+n.top+a)),new pt(Math.round(n.left),Math.round(l+n.top+a))];case 3:return[new pt(Math.round(n.left+i),Math.round(n.top)),new pt(Math.round(n.left+i+o),Math.round(n.top)),new pt(Math.round(n.left+i+o),Math.round(n.height+n.top)),new pt(Math.round(n.left+i),Math.round(n.height+n.top))];case 1:return[new pt(Math.round(n.left+i),Math.round(n.top+a)),new pt(Math.round(n.left+i+o),Math.round(n.top+a)),new pt(Math.round(n.left+i+o),Math.round(n.top+a+l)),new pt(Math.round(n.left+i),Math.round(n.top+a+l))];default:return[new pt(Math.round(s.left),Math.round(s.top)),new pt(Math.round(s.left+s.width),Math.round(s.top)),new pt(Math.round(s.left+s.width),Math.round(s.height+s.top)),new pt(Math.round(s.left),Math.round(s.height+s.top))]}},zG="data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7",nN="Hidden Text",$G=function(){function t(e){this._data={},this._document=e}return t.prototype.parseMetrics=function(e,r){var n=this._document.createElement("div"),s=this._document.createElement("img"),i=this._document.createElement("span"),a=this._document.body;n.style.visibility="hidden",n.style.fontFamily=e,n.style.fontSize=r,n.style.margin="0",n.style.padding="0",n.style.whiteSpace="nowrap",a.appendChild(n),s.src=zG,s.width=1,s.height=1,s.style.margin="0",s.style.padding="0",s.style.verticalAlign="baseline",i.style.fontFamily=e,i.style.fontSize=r,i.style.margin="0",i.style.padding="0",i.appendChild(this._document.createTextNode(nN)),n.appendChild(i),n.appendChild(s);var o=s.offsetTop-i.offsetTop+2;n.removeChild(i),n.appendChild(this._document.createTextNode(nN)),n.style.lineHeight="normal",s.style.verticalAlign="super";var l=s.offsetTop-n.offsetTop+2;return a.removeChild(n),{baseline:o,middle:l}},t.prototype.getMetrics=function(e,r){var n=e+" "+r;return typeof this._data[n]>"u"&&(this._data[n]=this.parseMetrics(e,r)),this._data[n]},t}(),h3=function(){function t(e,r){this.context=e,this.options=r}return t}(),WG=1e4,XG=function(t){ha(e,t);function e(r,n){var s=t.call(this,r,n)||this;return s._activeEffects=[],s.canvas=n.canvas?n.canvas:document.createElement("canvas"),s.ctx=s.canvas.getContext("2d"),n.canvas||(s.canvas.width=Math.floor(n.width*n.scale),s.canvas.height=Math.floor(n.height*n.scale),s.canvas.style.width=n.width+"px",s.canvas.style.height=n.height+"px"),s.fontMetrics=new $G(document),s.ctx.scale(s.options.scale,s.options.scale),s.ctx.translate(-n.x,-n.y),s.ctx.textBaseline="bottom",s._activeEffects=[],s.context.logger.debug("Canvas renderer initialized ("+n.width+"x"+n.height+") with scale "+n.scale),s}return e.prototype.applyEffects=function(r){for(var n=this;this._activeEffects.length;)this.popEffect();r.forEach(function(s){return n.applyEffect(s)})},e.prototype.applyEffect=function(r){this.ctx.save(),kG(r)&&(this.ctx.globalAlpha=r.opacity),jG(r)&&(this.ctx.translate(r.offsetX,r.offsetY),this.ctx.transform(r.matrix[0],r.matrix[1],r.matrix[2],r.matrix[3],r.matrix[4],r.matrix[5]),this.ctx.translate(-r.offsetX,-r.offsetY)),A3(r)&&(this.path(r.path),this.ctx.clip()),this._activeEffects.push(r)},e.prototype.popEffect=function(){this._activeEffects.pop(),this.ctx.restore()},e.prototype.renderStack=function(r){return Fs(this,void 0,void 0,function(){var n;return ws(this,function(s){switch(s.label){case 0:return n=r.element.container.styles,n.isVisible()?[4,this.renderStackContent(r)]:[3,2];case 1:s.sent(),s.label=2;case 2:return[2]}})})},e.prototype.renderNode=function(r){return Fs(this,void 0,void 0,function(){return ws(this,function(n){switch(n.label){case 0:if(Qn(r.container.flags,16))debugger;return r.container.styles.isVisible()?[4,this.renderNodeBackgroundAndBorders(r)]:[3,3];case 1:return n.sent(),[4,this.renderNodeContent(r)];case 2:n.sent(),n.label=3;case 3:return[2]}})})},e.prototype.renderTextWithLetterSpacing=function(r,n,s){var i=this;if(n===0)this.ctx.fillText(r.text,r.bounds.left,r.bounds.top+s);else{var a=vB(r.text);a.reduce(function(o,l){return i.ctx.fillText(l,o,r.bounds.top+s),o+i.ctx.measureText(l).width},r.bounds.left)}},e.prototype.createFontStyle=function(r){var n=r.fontVariant.filter(function(a){return a==="normal"||a==="small-caps"}).join(""),s=tz(r.fontFamily).join(", "),i=Gp(r.fontSize)?""+r.fontSize.number+r.fontSize.unit:r.fontSize.number+"px";return[[r.fontStyle,n,r.fontWeight,i,s].join(" "),s,i]},e.prototype.renderTextNode=function(r,n){return Fs(this,void 0,void 0,function(){var s,i,a,o,l,c,u,f,p=this;return ws(this,function(m){return s=this.createFontStyle(n),i=s[0],a=s[1],o=s[2],this.ctx.font=i,this.ctx.direction=n.direction===1?"rtl":"ltr",this.ctx.textAlign="left",this.ctx.textBaseline="alphabetic",l=this.fontMetrics.getMetrics(a,o),c=l.baseline,u=l.middle,f=n.paintOrder,r.textBounds.forEach(function(b){f.forEach(function(B){switch(B){case 0:p.ctx.fillStyle=Hn(n.color),p.renderTextWithLetterSpacing(b,n.letterSpacing,c);var _=n.textShadow;_.length&&b.text.trim().length&&(_.slice(0).reverse().forEach(function(w){p.ctx.shadowColor=Hn(w.color),p.ctx.shadowOffsetX=w.offsetX.number*p.options.scale,p.ctx.shadowOffsetY=w.offsetY.number*p.options.scale,p.ctx.shadowBlur=w.blur.number,p.renderTextWithLetterSpacing(b,n.letterSpacing,c)}),p.ctx.shadowColor="",p.ctx.shadowOffsetX=0,p.ctx.shadowOffsetY=0,p.ctx.shadowBlur=0),n.textDecorationLine.length&&(p.ctx.fillStyle=Hn(n.textDecorationColor||n.color),n.textDecorationLine.forEach(function(w){switch(w){case 1:p.ctx.fillRect(b.bounds.left,Math.round(b.bounds.top+c),b.bounds.width,1);break;case 2:p.ctx.fillRect(b.bounds.left,Math.round(b.bounds.top),b.bounds.width,1);break;case 3:p.ctx.fillRect(b.bounds.left,Math.ceil(b.bounds.top+u),b.bounds.width,1);break}}));break;case 1:n.webkitTextStrokeWidth&&b.text.trim().length&&(p.ctx.strokeStyle=Hn(n.webkitTextStrokeColor),p.ctx.lineWidth=n.webkitTextStrokeWidth,p.ctx.lineJoin=window.chrome?"miter":"round",p.ctx.strokeText(b.text,b.bounds.left,b.bounds.top+c)),p.ctx.strokeStyle="",p.ctx.lineWidth=0,p.ctx.lineJoin="miter";break}})}),[2]})})},e.prototype.renderReplacedElement=function(r,n,s){if(s&&r.intrinsicWidth>0&&r.intrinsicHeight>0){var i=rv(r),a=tv(n);this.path(a),this.ctx.save(),this.ctx.clip(),this.ctx.drawImage(s,0,0,r.intrinsicWidth,r.intrinsicHeight,i.left,i.top,i.width,i.height),this.ctx.restore()}},e.prototype.renderNodeContent=function(r){return Fs(this,void 0,void 0,function(){var n,s,i,a,o,l,y,y,c,u,f,p,O,m,b,R,B,_,w,y,S,O,R;return ws(this,function(M){switch(M.label){case 0:this.applyEffects(r.getEffects(4)),n=r.container,s=r.curves,i=n.styles,a=0,o=n.textNodes,M.label=1;case 1:return a<o.length?(l=o[a],[4,this.renderTextNode(l,i)]):[3,4];case 2:M.sent(),M.label=3;case 3:return a++,[3,1];case 4:if(!(n instanceof qU))return[3,8];M.label=5;case 5:return M.trys.push([5,7,,8]),[4,this.context.cache.match(n.src)];case 6:return y=M.sent(),this.renderReplacedElement(n,s,y),[3,8];case 7:return M.sent(),this.context.logger.error("Error loading image "+n.src),[3,8];case 8:if(n instanceof GU&&this.renderReplacedElement(n,s,n.canvas),!(n instanceof zU))return[3,12];M.label=9;case 9:return M.trys.push([9,11,,12]),[4,this.context.cache.match(n.svg)];case 10:return y=M.sent(),this.renderReplacedElement(n,s,y),[3,12];case 11:return M.sent(),this.context.logger.error("Error loading svg "+n.svg.substring(0,255)),[3,12];case 12:return n instanceof JU&&n.tree?(c=new e(this.context,{scale:this.options.scale,backgroundColor:n.backgroundColor,x:0,y:0,width:n.width,height:n.height}),[4,c.render(n.tree)]):[3,14];case 13:u=M.sent(),n.width&&n.height&&this.ctx.drawImage(u,0,0,n.width,n.height,n.bounds.left,n.bounds.top,n.bounds.width,n.bounds.height),M.label=14;case 14:if(n instanceof wB&&(f=Math.min(n.bounds.width,n.bounds.height),n.type===X0?n.checked&&(this.ctx.save(),this.path([new pt(n.bounds.left+f*.39363,n.bounds.top+f*.79),new pt(n.bounds.left+f*.16,n.bounds.top+f*.5549),new pt(n.bounds.left+f*.27347,n.bounds.top+f*.44071),new pt(n.bounds.left+f*.39694,n.bounds.top+f*.5649),new pt(n.bounds.left+f*.72983,n.bounds.top+f*.23),new pt(n.bounds.left+f*.84,n.bounds.top+f*.34085),new pt(n.bounds.left+f*.39363,n.bounds.top+f*.79)]),this.ctx.fillStyle=Hn(K_),this.ctx.fill(),this.ctx.restore()):n.type===J0&&n.checked&&(this.ctx.save(),this.ctx.beginPath(),this.ctx.arc(n.bounds.left+f/2,n.bounds.top+f/2,f/4,0,Math.PI*2,!0),this.ctx.fillStyle=Hn(K_),this.ctx.fill(),this.ctx.restore())),JG(n)&&n.value.length){switch(p=this.createFontStyle(i),O=p[0],m=p[1],b=this.fontMetrics.getMetrics(O,m).baseline,this.ctx.font=O,this.ctx.fillStyle=Hn(i.color),this.ctx.textBaseline="alphabetic",this.ctx.textAlign=ZG(n.styles.textAlign),R=rv(n),B=0,n.styles.textAlign){case 1:B+=R.width/2;break;case 2:B+=R.width;break}_=R.add(B,0,0,-R.height/2+1),this.ctx.save(),this.path([new pt(R.left,R.top),new pt(R.left+R.width,R.top),new pt(R.left+R.width,R.top+R.height),new pt(R.left,R.top+R.height)]),this.ctx.clip(),this.renderTextWithLetterSpacing(new Sf(n.value,_),i.letterSpacing,b),this.ctx.restore(),this.ctx.textBaseline="alphabetic",this.ctx.textAlign="left"}if(!Qn(n.styles.display,2048))return[3,20];if(n.styles.listStyleImage===null)return[3,19];if(w=n.styles.listStyleImage,w.type!==0)return[3,18];y=void 0,S=w.url,M.label=15;case 15:return M.trys.push([15,17,,18]),[4,this.context.cache.match(S)];case 16:return y=M.sent(),this.ctx.drawImage(y,n.bounds.left-(y.width+10),n.bounds.top),[3,18];case 17:return M.sent(),this.context.logger.error("Error loading list-style-image "+S),[3,18];case 18:return[3,20];case 19:r.listValue&&n.styles.listStyleType!==-1&&(O=this.createFontStyle(i)[0],this.ctx.font=O,this.ctx.fillStyle=Hn(i.color),this.ctx.textBaseline="middle",this.ctx.textAlign="right",R=new Vo(n.bounds.left,n.bounds.top+Dr(n.styles.paddingTop,n.bounds.width),n.bounds.width,N_(i.lineHeight,i.fontSize.number)/2+1),this.renderTextWithLetterSpacing(new Sf(r.listValue,R),i.letterSpacing,N_(i.lineHeight,i.fontSize.number)/2+2),this.ctx.textBaseline="bottom",this.ctx.textAlign="left"),M.label=20;case 20:return[2]}})})},e.prototype.renderStackContent=function(r){return Fs(this,void 0,void 0,function(){var n,s,w,i,a,w,o,l,w,c,u,w,f,p,w,m,b,w,B,_,w;return ws(this,function(y){switch(y.label){case 0:if(Qn(r.element.container.flags,16))debugger;return[4,this.renderNodeBackgroundAndBorders(r.element)];case 1:y.sent(),n=0,s=r.negativeZIndex,y.label=2;case 2:return n<s.length?(w=s[n],[4,this.renderStack(w)]):[3,5];case 3:y.sent(),y.label=4;case 4:return n++,[3,2];case 5:return[4,this.renderNodeContent(r.element)];case 6:y.sent(),i=0,a=r.nonInlineLevel,y.label=7;case 7:return i<a.length?(w=a[i],[4,this.renderNode(w)]):[3,10];case 8:y.sent(),y.label=9;case 9:return i++,[3,7];case 10:o=0,l=r.nonPositionedFloats,y.label=11;case 11:return o<l.length?(w=l[o],[4,this.renderStack(w)]):[3,14];case 12:y.sent(),y.label=13;case 13:return o++,[3,11];case 14:c=0,u=r.nonPositionedInlineLevel,y.label=15;case 15:return c<u.length?(w=u[c],[4,this.renderStack(w)]):[3,18];case 16:y.sent(),y.label=17;case 17:return c++,[3,15];case 18:f=0,p=r.inlineLevel,y.label=19;case 19:return f<p.length?(w=p[f],[4,this.renderNode(w)]):[3,22];case 20:y.sent(),y.label=21;case 21:return f++,[3,19];case 22:m=0,b=r.zeroOrAutoZIndexOrTransformedOrOpacity,y.label=23;case 23:return m<b.length?(w=b[m],[4,this.renderStack(w)]):[3,26];case 24:y.sent(),y.label=25;case 25:return m++,[3,23];case 26:B=0,_=r.positiveZIndex,y.label=27;case 27:return B<_.length?(w=_[B],[4,this.renderStack(w)]):[3,30];case 28:y.sent(),y.label=29;case 29:return B++,[3,27];case 30:return[2]}})})},e.prototype.mask=function(r){this.ctx.beginPath(),this.ctx.moveTo(0,0),this.ctx.lineTo(this.canvas.width,0),this.ctx.lineTo(this.canvas.width,this.canvas.height),this.ctx.lineTo(0,this.canvas.height),this.ctx.lineTo(0,0),this.formatPath(r.slice(0).reverse()),this.ctx.closePath()},e.prototype.path=function(r){this.ctx.beginPath(),this.formatPath(r),this.ctx.closePath()},e.prototype.formatPath=function(r){var n=this;r.forEach(function(s,i){var a=Fi(s)?s.start:s;i===0?n.ctx.moveTo(a.x,a.y):n.ctx.lineTo(a.x,a.y),Fi(s)&&n.ctx.bezierCurveTo(s.startControl.x,s.startControl.y,s.endControl.x,s.endControl.y,s.end.x,s.end.y)})},e.prototype.renderRepeat=function(r,n,s,i){this.path(r),this.ctx.fillStyle=n,this.ctx.translate(s,i),this.ctx.fill(),this.ctx.translate(-s,-i)},e.prototype.resizeImage=function(r,n,s){var i;if(r.width===n&&r.height===s)return r;var a=(i=this.canvas.ownerDocument)!==null&&i!==void 0?i:document,o=a.createElement("canvas");o.width=Math.max(1,n),o.height=Math.max(1,s);var l=o.getContext("2d");return l.drawImage(r,0,0,r.width,r.height,0,0,n,s),o},e.prototype.renderBackgroundImage=function(r){return Fs(this,void 0,void 0,function(){var n,s,i,a,o,l;return ws(this,function(c){switch(c.label){case 0:n=r.styles.backgroundImage.length-1,s=function(u){var f,p,m,D,re,de,F,ee,E,b,D,re,de,F,ee,B,_,w,y,S,O,R,M,I,E,L,D,N,T,F,ee,ce,re,de,W,ue,ae,Ee,Q,k,z,te;return ws(this,function($){switch($.label){case 0:if(u.type!==0)return[3,5];f=void 0,p=u.url,$.label=1;case 1:return $.trys.push([1,3,,4]),[4,i.context.cache.match(p)];case 2:return f=$.sent(),[3,4];case 3:return $.sent(),i.context.logger.error("Error loading background-image "+p),[3,4];case 4:return f&&(m=Hy(r,n,[f.width,f.height,f.width/f.height]),D=m[0],re=m[1],de=m[2],F=m[3],ee=m[4],E=i.ctx.createPattern(i.resizeImage(f,F,ee),"repeat"),i.renderRepeat(D,E,re,de)),[3,6];case 5:j9(u)?(b=Hy(r,n,[null,null,null]),D=b[0],re=b[1],de=b[2],F=b[3],ee=b[4],B=T9(u.angle,F,ee),_=B[0],w=B[1],y=B[2],S=B[3],O=B[4],R=document.createElement("canvas"),R.width=F,R.height=ee,M=R.getContext("2d"),I=M.createLinearGradient(w,S,y,O),E_(u.stops,_).forEach(function(ne){return I.addColorStop(ne.stop,Hn(ne.color))}),M.fillStyle=I,M.fillRect(0,0,F,ee),F>0&&ee>0&&(E=i.ctx.createPattern(R,"repeat"),i.renderRepeat(D,E,re,de))):k9(u)&&(L=Hy(r,n,[null,null,null]),D=L[0],N=L[1],T=L[2],F=L[3],ee=L[4],ce=u.position.length===0?[pB]:u.position,re=Dr(ce[0],F),de=Dr(ce[ce.length-1],ee),W=U9(u,re,de,F,ee),ue=W[0],ae=W[1],ue>0&&ae>0&&(Ee=i.ctx.createRadialGradient(N+re,T+de,0,N+re,T+de,ue),E_(u.stops,ue*2).forEach(function(ne){return Ee.addColorStop(ne.stop,Hn(ne.color))}),i.path(D),i.ctx.fillStyle=Ee,ue!==ae?(Q=r.bounds.left+.5*r.bounds.width,k=r.bounds.top+.5*r.bounds.height,z=ae/ue,te=1/z,i.ctx.save(),i.ctx.translate(Q,k),i.ctx.transform(1,0,0,z,0,0),i.ctx.translate(-Q,-k),i.ctx.fillRect(N,te*(T-k)+k,F,ee*te),i.ctx.restore()):i.ctx.fill())),$.label=6;case 6:return n--,[2]}})},i=this,a=0,o=r.styles.backgroundImage.slice(0).reverse(),c.label=1;case 1:return a<o.length?(l=o[a],[5,s(l)]):[3,4];case 2:c.sent(),c.label=3;case 3:return a++,[3,1];case 4:return[2]}})})},e.prototype.renderSolidBorder=function(r,n,s){return Fs(this,void 0,void 0,function(){return ws(this,function(i){return this.path(rN(s,n)),this.ctx.fillStyle=Hn(r),this.ctx.fill(),[2]})})},e.prototype.renderDoubleBorder=function(r,n,s,i){return Fs(this,void 0,void 0,function(){var a,o;return ws(this,function(l){switch(l.label){case 0:return n<3?[4,this.renderSolidBorder(r,s,i)]:[3,2];case 1:return l.sent(),[2];case 2:return a=MG(i,s),this.path(a),this.ctx.fillStyle=Hn(r),this.ctx.fill(),o=OG(i,s),this.path(o),this.ctx.fill(),[2]}})})},e.prototype.renderNodeBackgroundAndBorders=function(r){return Fs(this,void 0,void 0,function(){var n,s,i,a,o,l,c,u,f=this;return ws(this,function(p){switch(p.label){case 0:return this.applyEffects(r.getEffects(2)),n=r.container.styles,s=!cl(n.backgroundColor)||n.backgroundImage.length,i=[{style:n.borderTopStyle,color:n.borderTopColor,width:n.borderTopWidth},{style:n.borderRightStyle,color:n.borderRightColor,width:n.borderRightWidth},{style:n.borderBottomStyle,color:n.borderBottomColor,width:n.borderBottomWidth},{style:n.borderLeftStyle,color:n.borderLeftColor,width:n.borderLeftWidth}],a=YG(qu(n.backgroundClip,0),r.curves),s||n.boxShadow.length?(this.ctx.save(),this.path(a),this.ctx.clip(),cl(n.backgroundColor)||(this.ctx.fillStyle=Hn(n.backgroundColor),this.ctx.fill()),[4,this.renderBackgroundImage(r.container)]):[3,2];case 1:p.sent(),this.ctx.restore(),n.boxShadow.slice(0).reverse().forEach(function(m){f.ctx.save();var b=ev(r.curves),B=m.inset?0:WG,_=DG(b,-B+(m.inset?1:-1)*m.spread.number,(m.inset?1:-1)*m.spread.number,m.spread.number*(m.inset?-2:2),m.spread.number*(m.inset?-2:2));m.inset?(f.path(b),f.ctx.clip(),f.mask(_)):(f.mask(b),f.ctx.clip(),f.path(_)),f.ctx.shadowOffsetX=m.offsetX.number+B,f.ctx.shadowOffsetY=m.offsetY.number,f.ctx.shadowColor=Hn(m.color),f.ctx.shadowBlur=m.blur.number,f.ctx.fillStyle=m.inset?Hn(m.color):"rgba(0,0,0,1)",f.ctx.fill(),f.ctx.restore()}),p.label=2;case 2:o=0,l=0,c=i,p.label=3;case 3:return l<c.length?(u=c[l],u.style!==0&&!cl(u.color)&&u.width>0?u.style!==2?[3,5]:[4,this.renderDashedDottedBorder(u.color,u.width,o,r.curves,2)]:[3,11]):[3,13];case 4:return p.sent(),[3,11];case 5:return u.style!==3?[3,7]:[4,this.renderDashedDottedBorder(u.color,u.width,o,r.curves,3)];case 6:return p.sent(),[3,11];case 7:return u.style!==4?[3,9]:[4,this.renderDoubleBorder(u.color,u.width,o,r.curves)];case 8:return p.sent(),[3,11];case 9:return[4,this.renderSolidBorder(u.color,o,r.curves)];case 10:p.sent(),p.label=11;case 11:o++,p.label=12;case 12:return l++,[3,3];case 13:return[2]}})})},e.prototype.renderDashedDottedBorder=function(r,n,s,i,a){return Fs(this,void 0,void 0,function(){var o,l,c,u,f,p,m,b,B,_,w,y,S,O,R,M,R,M;return ws(this,function(I){return this.ctx.save(),o=HG(i,s),l=rN(i,s),a===2&&(this.path(l),this.ctx.clip()),Fi(l[0])?(c=l[0].start.x,u=l[0].start.y):(c=l[0].x,u=l[0].y),Fi(l[1])?(f=l[1].end.x,p=l[1].end.y):(f=l[1].x,p=l[1].y),s===0||s===2?m=Math.abs(c-f):m=Math.abs(u-p),this.ctx.beginPath(),a===3?this.formatPath(o):this.formatPath(l.slice(0,2)),b=n<3?n*3:n*2,B=n<3?n*2:n,a===3&&(b=n,B=n),_=!0,m<=b*2?_=!1:m<=b*2+B?(w=m/(2*b+B),b*=w,B*=w):(y=Math.floor((m+B)/(b+B)),S=(m-y*b)/(y-1),O=(m-(y+1)*b)/y,B=O<=0||Math.abs(B-S)<Math.abs(B-O)?S:O),_&&(a===3?this.ctx.setLineDash([0,b+B]):this.ctx.setLineDash([b,B])),a===3?(this.ctx.lineCap="round",this.ctx.lineWidth=n):this.ctx.lineWidth=n*2+1.1,this.ctx.strokeStyle=Hn(r),this.ctx.stroke(),this.ctx.setLineDash([]),a===2&&(Fi(l[0])&&(R=l[3],M=l[0],this.ctx.beginPath(),this.formatPath([new pt(R.end.x,R.end.y),new pt(M.start.x,M.start.y)]),this.ctx.stroke()),Fi(l[1])&&(R=l[1],M=l[2],this.ctx.beginPath(),this.formatPath([new pt(R.end.x,R.end.y),new pt(M.start.x,M.start.y)]),this.ctx.stroke())),this.ctx.restore(),[2]})})},e.prototype.render=function(r){return Fs(this,void 0,void 0,function(){var n;return ws(this,function(s){switch(s.label){case 0:return this.options.backgroundColor&&(this.ctx.fillStyle=Hn(this.options.backgroundColor),this.ctx.fillRect(this.options.x,this.options.y,this.options.width,this.options.height)),n=RG(r),[4,this.renderStack(n)];case 1:return s.sent(),this.applyEffects([]),[2,this.canvas]}})})},e}(h3),JG=function(t){return t instanceof XU||t instanceof WU?!0:t instanceof wB&&t.type!==J0&&t.type!==X0},YG=function(t,e){switch(t){case 0:return ev(e);case 2:return PG(e);case 1:default:return tv(e)}},ZG=function(t){switch(t){case 1:return"center";case 2:return"right";case 0:default:return"left"}},ez=["-apple-system","system-ui"],tz=function(t){return/iPhone OS 15_(0|1)/.test(window.navigator.userAgent)?t.filter(function(e){return ez.indexOf(e)===-1}):t},rz=function(t){ha(e,t);function e(r,n){var s=t.call(this,r,n)||this;return s.canvas=n.canvas?n.canvas:document.createElement("canvas"),s.ctx=s.canvas.getContext("2d"),s.options=n,s.canvas.width=Math.floor(n.width*n.scale),s.canvas.height=Math.floor(n.height*n.scale),s.canvas.style.width=n.width+"px",s.canvas.style.height=n.height+"px",s.ctx.scale(s.options.scale,s.options.scale),s.ctx.translate(-n.x,-n.y),s.context.logger.debug("EXPERIMENTAL ForeignObject renderer initialized ("+n.width+"x"+n.height+" at "+n.x+","+n.y+") with scale "+n.scale),s}return e.prototype.render=function(r){return Fs(this,void 0,void 0,function(){var n,s;return ws(this,function(i){switch(i.label){case 0:return n=q2(this.options.width*this.options.scale,this.options.height*this.options.scale,this.options.scale,this.options.scale,r),[4,nz(n)];case 1:return s=i.sent(),this.options.backgroundColor&&(this.ctx.fillStyle=Hn(this.options.backgroundColor),this.ctx.fillRect(0,0,this.options.width*this.options.scale,this.options.height*this.options.scale)),this.ctx.drawImage(s,-this.options.x*this.options.scale,-this.options.y*this.options.scale),[2,this.canvas]}})})},e}(h3),nz=function(t){return new Promise(function(e,r){var n=new Image;n.onload=function(){e(n)},n.onerror=r,n.src="data:image/svg+xml;charset=utf-8,"+encodeURIComponent(new XMLSerializer().serializeToString(t))})},sz=function(){function t(e){var r=e.id,n=e.enabled;this.id=r,this.enabled=n,this.start=Date.now()}return t.prototype.debug=function(){for(var e=[],r=0;r<arguments.length;r++)e[r]=arguments[r];this.enabled&&(typeof window<"u"&&window.console&&typeof console.debug=="function"?console.debug.apply(console,Vm([this.id,this.getTime()+"ms"],e)):this.info.apply(this,e))},t.prototype.getTime=function(){return Date.now()-this.start},t.prototype.info=function(){for(var e=[],r=0;r<arguments.length;r++)e[r]=arguments[r];this.enabled&&typeof window<"u"&&window.console&&typeof console.info=="function"&&console.info.apply(console,Vm([this.id,this.getTime()+"ms"],e))},t.prototype.warn=function(){for(var e=[],r=0;r<arguments.length;r++)e[r]=arguments[r];this.enabled&&(typeof window<"u"&&window.console&&typeof console.warn=="function"?console.warn.apply(console,Vm([this.id,this.getTime()+"ms"],e)):this.info.apply(this,e))},t.prototype.error=function(){for(var e=[],r=0;r<arguments.length;r++)e[r]=arguments[r];this.enabled&&(typeof window<"u"&&window.console&&typeof console.error=="function"?console.error.apply(console,Vm([this.id,this.getTime()+"ms"],e)):this.info.apply(this,e))},t.instances={},t}(),iz=function(){function t(e,r){var n;this.windowBounds=r,this.instanceName="#"+t.instanceCount++,this.logger=new sz({id:this.instanceName,enabled:e.logging}),this.cache=(n=e.cache)!==null&&n!==void 0?n:new EG(this,e)}return t.instanceCount=1,t}(),xB=function(t,e){return e===void 0&&(e={}),az(t,e)};typeof window<"u"&&o3.setContext(window);var az=function(t,e){return Fs(void 0,void 0,void 0,function(){var r,n,s,i,a,o,l,c,u,f,p,m,b,B,_,w,y,S,O,R,I,M,I,E,L,D,N,T,F,ee,ce,re,de,W,ue,ae,Ee,Q,k,z;return ws(this,function(te){switch(te.label){case 0:if(!t||typeof t!="object")return[2,Promise.reject("Invalid element provided as first argument")];if(r=t.ownerDocument,!r)throw new Error("Element is not attached to a Document");if(n=r.defaultView,!n)throw new Error("Document is not attached to a Window");return s={allowTaint:(E=e.allowTaint)!==null&&E!==void 0?E:!1,imageTimeout:(L=e.imageTimeout)!==null&&L!==void 0?L:15e3,proxy:e.proxy,useCORS:(D=e.useCORS)!==null&&D!==void 0?D:!1},i=F2({logging:(N=e.logging)!==null&&N!==void 0?N:!0,cache:e.cache},s),a={windowWidth:(T=e.windowWidth)!==null&&T!==void 0?T:n.innerWidth,windowHeight:(F=e.windowHeight)!==null&&F!==void 0?F:n.innerHeight,scrollX:(ee=e.scrollX)!==null&&ee!==void 0?ee:n.pageXOffset,scrollY:(ce=e.scrollY)!==null&&ce!==void 0?ce:n.pageYOffset},o=new Vo(a.scrollX,a.scrollY,a.windowWidth,a.windowHeight),l=new iz(i,o),c=(re=e.foreignObjectRendering)!==null&&re!==void 0?re:!1,u={allowTaint:(de=e.allowTaint)!==null&&de!==void 0?de:!1,onclone:e.onclone,ignoreElements:e.ignoreElements,inlineImages:c,copyStyles:c},l.logger.debug("Starting document clone with size "+o.width+"x"+o.height+" scrolled to "+-o.left+","+-o.top),f=new Z_(l,t,u),p=f.clonedReferenceElement,p?[4,f.toIFrame(r,o)]:[2,Promise.reject("Unable to find element in cloned iframe")];case 1:return m=te.sent(),b=yB(p)||AG(p)?DV(p.ownerDocument):iw(l,p),B=b.width,_=b.height,w=b.left,y=b.top,S=oz(l,p,e.backgroundColor),O={canvas:e.canvas,backgroundColor:S,scale:(ue=(W=e.scale)!==null&&W!==void 0?W:n.devicePixelRatio)!==null&&ue!==void 0?ue:1,x:((ae=e.x)!==null&&ae!==void 0?ae:0)+w,y:((Ee=e.y)!==null&&Ee!==void 0?Ee:0)+y,width:(Q=e.width)!==null&&Q!==void 0?Q:Math.ceil(B),height:(k=e.height)!==null&&k!==void 0?k:Math.ceil(_)},c?(l.logger.debug("Document cloned, using foreign object rendering"),I=new rz(l,O),[4,I.render(p)]):[3,3];case 2:return R=te.sent(),[3,5];case 3:return l.logger.debug("Document cloned, element located at "+w+","+y+" with size "+B+"x"+_+" using computed rendering"),l.logger.debug("Starting DOM parsing"),M=ZU(l,p),S===M.styles.backgroundColor&&(M.styles.backgroundColor=Po.TRANSPARENT),l.logger.debug("Starting renderer for element at "+O.x+","+O.y+" with size "+O.width+"x"+O.height),I=new XG(l,O),[4,I.render(M)];case 4:R=te.sent(),te.label=5;case 5:return(!((z=e.removeContainer)!==null&&z!==void 0)||z)&&(Z_.destroy(m)||l.logger.error("Cannot detach cloned iframe as it is not in the DOM anymore")),l.logger.debug("Finished rendering"),[2,R]}})})},oz=function(t,e,r){var n=e.ownerDocument,s=n.documentElement?Nf(t,getComputedStyle(n.documentElement).backgroundColor):Po.TRANSPARENT,i=n.body?Nf(t,getComputedStyle(n.body).backgroundColor):Po.TRANSPARENT,a=typeof r=="string"?Nf(t,r):r===null?Po.TRANSPARENT:4294967295;return e===n.documentElement?cl(s)?cl(i)?a:i:s:a};const bB=Object.freeze(Object.defineProperty({__proto__:null,default:xB},Symbol.toStringTag,{value:"Module"})),Az="modulepreload",lz=function(t){return"/"+t},sN={},Qo=function(e,r,n){let s=Promise.resolve();if(r&&r.length>0){document.getElementsByTagName("link");const a=document.querySelector("meta[property=csp-nonce]"),o=(a==null?void 0:a.nonce)||(a==null?void 0:a.getAttribute("nonce"));s=Promise.allSettled(r.map(l=>{if(l=lz(l),l in sN)return;sN[l]=!0;const c=l.endsWith(".css"),u=c?'[rel="stylesheet"]':"";if(document.querySelector(`link[href="${l}"]${u}`))return;const f=document.createElement("link");if(f.rel=c?"stylesheet":Az,c||(f.as="script"),f.crossOrigin="",f.href=l,o&&f.setAttribute("nonce",o),document.head.appendChild(f),c)return new Promise((p,m)=>{f.addEventListener("load",p),f.addEventListener("error",()=>m(new Error(`Unable to preload CSS for ${l}`)))})}))}function i(a){const o=new Event("vite:preloadError",{cancelable:!0});if(o.payload=a,window.dispatchEvent(o),!o.defaultPrevented)throw a}return s.then(a=>{for(const o of a||[])o.status==="rejected"&&i(o.reason);return e().catch(i)})};function Nr(t){"@babel/helpers - typeof";return Nr=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Nr(t)}var bs=Uint8Array,li=Uint16Array,BB=Int32Array,pw=new bs([0,0,0,0,0,0,0,0,1,1,1,1,2,2,2,2,3,3,3,3,4,4,4,4,5,5,5,5,0,0,0,0]),mw=new bs([0,0,0,0,1,1,2,2,3,3,4,4,5,5,6,6,7,7,8,8,9,9,10,10,11,11,12,12,13,13,0,0]),Y2=new bs([16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15]),f3=function(t,e){for(var r=new li(31),n=0;n<31;++n)r[n]=e+=1<<t[n-1];for(var s=new BB(r[30]),n=1;n<30;++n)for(var i=r[n];i<r[n+1];++i)s[i]=i-r[n]<<5|n;return{b:r,r:s}},p3=f3(pw,2),m3=p3.b,Z2=p3.r;m3[28]=258,Z2[258]=28;var g3=f3(mw,0),cz=g3.b,iN=g3.r,ex=new li(32768);for(var qr=0;qr<32768;++qr){var NA=(qr&43690)>>1|(qr&21845)<<1;NA=(NA&52428)>>2|(NA&13107)<<2,NA=(NA&61680)>>4|(NA&3855)<<4,ex[qr]=((NA&65280)>>8|(NA&255)<<8)>>1}var Ha=function(t,e,r){for(var n=t.length,s=0,i=new li(e);s<n;++s)t[s]&&++i[t[s]-1];var a=new li(e);for(s=1;s<e;++s)a[s]=a[s-1]+i[s-1]<<1;var o;if(r){o=new li(1<<e);var l=15-e;for(s=0;s<n;++s)if(t[s])for(var c=s<<4|t[s],u=e-t[s],f=a[t[s]-1]++<<u,p=f|(1<<u)-1;f<=p;++f)o[ex[f]>>l]=c}else for(o=new li(n),s=0;s<n;++s)t[s]&&(o[s]=ex[a[t[s]-1]++]>>15-t[s]);return o},xl=new bs(288);for(var qr=0;qr<144;++qr)xl[qr]=8;for(var qr=144;qr<256;++qr)xl[qr]=9;for(var qr=256;qr<280;++qr)xl[qr]=7;for(var qr=280;qr<288;++qr)xl[qr]=8;var yp=new bs(32);for(var qr=0;qr<32;++qr)yp[qr]=5;var uz=Ha(xl,9,0),dz=Ha(xl,9,1),hz=Ha(yp,5,0),fz=Ha(yp,5,1),Vy=function(t){for(var e=t[0],r=1;r<t.length;++r)t[r]>e&&(e=t[r]);return e},Xi=function(t,e,r){var n=e/8|0;return(t[n]|t[n+1]<<8)>>(e&7)&r},Ky=function(t,e){var r=e/8|0;return(t[r]|t[r+1]<<8|t[r+2]<<16)>>(e&7)},CB=function(t){return(t+7)/8|0},v3=function(t,e,r){return(r==null||r>t.length)&&(r=t.length),new bs(t.subarray(e,r))},pz=["unexpected EOF","invalid block type","invalid length/literal","invalid distance","stream finished","no stream handler",,"no callback","invalid UTF-8 data","extra field too long","date not in range 1980-2099","filename too long","stream finishing","invalid zip data"],ta=function(t,e,r){var n=new Error(e||pz[t]);if(n.code=t,Error.captureStackTrace&&Error.captureStackTrace(n,ta),!r)throw n;return n},mz=function(t,e,r,n){var s=t.length,i=0;if(!s||e.f&&!e.l)return r||new bs(0);var a=!r,o=a||e.i!=2,l=e.i;a&&(r=new bs(s*3));var c=function(Ce){var Te=r.length;if(Ce>Te){var Fe=new bs(Math.max(Te*2,Ce));Fe.set(r),r=Fe}},u=e.f||0,f=e.p||0,p=e.b||0,m=e.l,b=e.d,B=e.m,_=e.n,w=s*8;do{if(!m){u=Xi(t,f,1);var y=Xi(t,f+1,3);if(f+=3,y)if(y==1)m=dz,b=fz,B=9,_=5;else if(y==2){var M=Xi(t,f,31)+257,I=Xi(t,f+10,15)+4,E=M+Xi(t,f+5,31)+1;f+=14;for(var L=new bs(E),D=new bs(19),N=0;N<I;++N)D[Y2[N]]=Xi(t,f+N*3,7);f+=I*3;for(var T=Vy(D),F=(1<<T)-1,ee=Ha(D,T,1),N=0;N<E;){var ce=ee[Xi(t,f,F)];f+=ce&15;var S=ce>>4;if(S<16)L[N++]=S;else{var re=0,de=0;for(S==16?(de=3+Xi(t,f,3),f+=2,re=L[N-1]):S==17?(de=3+Xi(t,f,7),f+=3):S==18&&(de=11+Xi(t,f,127),f+=7);de--;)L[N++]=re}}var W=L.subarray(0,M),ue=L.subarray(M);B=Vy(W),_=Vy(ue),m=Ha(W,B,1),b=Ha(ue,_,1)}else ta(1);else{var S=CB(f)+4,O=t[S-4]|t[S-3]<<8,R=S+O;if(R>s){l&&ta(0);break}o&&c(p+O),r.set(t.subarray(S,R),p),e.b=p+=O,e.p=f=R*8,e.f=u;continue}if(f>w){l&&ta(0);break}}o&&c(p+131072);for(var ae=(1<<B)-1,Ee=(1<<_)-1,Q=f;;Q=f){var re=m[Ky(t,f)&ae],k=re>>4;if(f+=re&15,f>w){l&&ta(0);break}if(re||ta(2),k<256)r[p++]=k;else if(k==256){Q=f,m=null;break}else{var z=k-254;if(k>264){var N=k-257,te=pw[N];z=Xi(t,f,(1<<te)-1)+m3[N],f+=te}var $=b[Ky(t,f)&Ee],ne=$>>4;$||ta(3),f+=$&15;var ue=cz[ne];if(ne>3){var te=mw[ne];ue+=Ky(t,f)&(1<<te)-1,f+=te}if(f>w){l&&ta(0);break}o&&c(p+131072);var X=p+z;if(p<ue){var he=i-ue,ge=Math.min(ue,X);for(he+p<0&&ta(3);p<ge;++p)r[p]=n[he+p]}for(;p<X;++p)r[p]=r[p-ue]}}e.l=m,e.p=Q,e.b=p,e.f=u,m&&(u=1,e.m=B,e.d=b,e.n=_)}while(!u);return p!=r.length&&a?v3(r,0,p):r.subarray(0,p)},po=function(t,e,r){r<<=e&7;var n=e/8|0;t[n]|=r,t[n+1]|=r>>8},Oh=function(t,e,r){r<<=e&7;var n=e/8|0;t[n]|=r,t[n+1]|=r>>8,t[n+2]|=r>>16},qy=function(t,e){for(var r=[],n=0;n<t.length;++n)t[n]&&r.push({s:n,f:t[n]});var s=r.length,i=r.slice();if(!s)return{t:y3,l:0};if(s==1){var a=new bs(r[0].s+1);return a[r[0].s]=1,{t:a,l:1}}r.sort(function(R,M){return R.f-M.f}),r.push({s:-1,f:25001});var o=r[0],l=r[1],c=0,u=1,f=2;for(r[0]={s:-1,f:o.f+l.f,l:o,r:l};u!=s-1;)o=r[r[c].f<r[f].f?c++:f++],l=r[c!=u&&r[c].f<r[f].f?c++:f++],r[u++]={s:-1,f:o.f+l.f,l:o,r:l};for(var p=i[0].s,n=1;n<s;++n)i[n].s>p&&(p=i[n].s);var m=new li(p+1),b=tx(r[u-1],m,0);if(b>e){var n=0,B=0,_=b-e,w=1<<_;for(i.sort(function(M,I){return m[I.s]-m[M.s]||M.f-I.f});n<s;++n){var y=i[n].s;if(m[y]>e)B+=w-(1<<b-m[y]),m[y]=e;else break}for(B>>=_;B>0;){var S=i[n].s;m[S]<e?B-=1<<e-m[S]++-1:++n}for(;n>=0&&B;--n){var O=i[n].s;m[O]==e&&(--m[O],++B)}b=e}return{t:new bs(m),l:b}},tx=function(t,e,r){return t.s==-1?Math.max(tx(t.l,e,r+1),tx(t.r,e,r+1)):e[t.s]=r},aN=function(t){for(var e=t.length;e&&!t[--e];);for(var r=new li(++e),n=0,s=t[0],i=1,a=function(l){r[n++]=l},o=1;o<=e;++o)if(t[o]==s&&o!=e)++i;else{if(!s&&i>2){for(;i>138;i-=138)a(32754);i>2&&(a(i>10?i-11<<5|28690:i-3<<5|12305),i=0)}else if(i>3){for(a(s),--i;i>6;i-=6)a(8304);i>2&&(a(i-3<<5|8208),i=0)}for(;i--;)a(s);i=1,s=t[o]}return{c:r.subarray(0,n),n:e}},Hh=function(t,e){for(var r=0,n=0;n<e.length;++n)r+=t[n]*e[n];return r},w3=function(t,e,r){var n=r.length,s=CB(e+2);t[s]=n&255,t[s+1]=n>>8,t[s+2]=t[s]^255,t[s+3]=t[s+1]^255;for(var i=0;i<n;++i)t[s+i+4]=r[i];return(s+4+n)*8},oN=function(t,e,r,n,s,i,a,o,l,c,u){po(e,u++,r),++s[256];for(var f=qy(s,15),p=f.t,m=f.l,b=qy(i,15),B=b.t,_=b.l,w=aN(p),y=w.c,S=w.n,O=aN(B),R=O.c,M=O.n,I=new li(19),E=0;E<y.length;++E)++I[y[E]&31];for(var E=0;E<R.length;++E)++I[R[E]&31];for(var L=qy(I,7),D=L.t,N=L.l,T=19;T>4&&!D[Y2[T-1]];--T);var F=c+5<<3,ee=Hh(s,xl)+Hh(i,yp)+a,ce=Hh(s,p)+Hh(i,B)+a+14+3*T+Hh(I,D)+2*I[16]+3*I[17]+7*I[18];if(l>=0&&F<=ee&&F<=ce)return w3(e,u,t.subarray(l,l+c));var re,de,W,ue;if(po(e,u,1+(ce<ee)),u+=2,ce<ee){re=Ha(p,m,0),de=p,W=Ha(B,_,0),ue=B;var ae=Ha(D,N,0);po(e,u,S-257),po(e,u+5,M-1),po(e,u+10,T-4),u+=14;for(var E=0;E<T;++E)po(e,u+3*E,D[Y2[E]]);u+=3*T;for(var Ee=[y,R],Q=0;Q<2;++Q)for(var k=Ee[Q],E=0;E<k.length;++E){var z=k[E]&31;po(e,u,ae[z]),u+=D[z],z>15&&(po(e,u,k[E]>>5&127),u+=k[E]>>12)}}else re=uz,de=xl,W=hz,ue=yp;for(var E=0;E<o;++E){var te=n[E];if(te>255){var z=te>>18&31;Oh(e,u,re[z+257]),u+=de[z+257],z>7&&(po(e,u,te>>23&31),u+=pw[z]);var $=te&31;Oh(e,u,W[$]),u+=ue[$],$>3&&(Oh(e,u,te>>5&8191),u+=mw[$])}else Oh(e,u,re[te]),u+=de[te]}return Oh(e,u,re[256]),u+de[256]},gz=new BB([65540,131080,131088,131104,262176,1048704,1048832,2114560,2117632]),y3=new bs(0),vz=function(t,e,r,n,s,i){var a=i.z||t.length,o=new bs(n+a+5*(1+Math.ceil(a/7e3))+s),l=o.subarray(n,o.length-s),c=i.l,u=(i.r||0)&7;if(e){u&&(l[0]=i.r>>3);for(var f=gz[e-1],p=f>>13,m=f&8191,b=(1<<r)-1,B=i.p||new li(32768),_=i.h||new li(b+1),w=Math.ceil(r/3),y=2*w,S=function(oe){return(t[oe]^t[oe+1]<<w^t[oe+2]<<y)&b},O=new BB(25e3),R=new li(288),M=new li(32),I=0,E=0,L=i.i||0,D=0,N=i.w||0,T=0;L+2<a;++L){var F=S(L),ee=L&32767,ce=_[F];if(B[ee]=ce,_[F]=ee,N<=L){var re=a-L;if((I>7e3||D>24576)&&(re>423||!c)){u=oN(t,l,0,O,R,M,E,D,T,L-T,u),D=I=E=0,T=L;for(var de=0;de<286;++de)R[de]=0;for(var de=0;de<30;++de)M[de]=0}var W=2,ue=0,ae=m,Ee=ee-ce&32767;if(re>2&&F==S(L-Ee))for(var Q=Math.min(p,re)-1,k=Math.min(32767,L),z=Math.min(258,re);Ee<=k&&--ae&&ee!=ce;){if(t[L+W]==t[L+W-Ee]){for(var te=0;te<z&&t[L+te]==t[L+te-Ee];++te);if(te>W){if(W=te,ue=Ee,te>Q)break;for(var $=Math.min(Ee,te-2),ne=0,de=0;de<$;++de){var X=L-Ee+de&32767,he=B[X],ge=X-he&32767;ge>ne&&(ne=ge,ce=X)}}}ee=ce,ce=B[ee],Ee+=ee-ce&32767}if(ue){O[D++]=268435456|Z2[W]<<18|iN[ue];var Ce=Z2[W]&31,Te=iN[ue]&31;E+=pw[Ce]+mw[Te],++R[257+Ce],++M[Te],N=L+W,++I}else O[D++]=t[L],++R[t[L]]}}for(L=Math.max(L,N);L<a;++L)O[D++]=t[L],++R[t[L]];u=oN(t,l,c,O,R,M,E,D,T,L-T,u),c||(i.r=u&7|l[u/8|0]<<3,u-=7,i.h=_,i.p=B,i.i=L,i.w=N)}else{for(var L=i.w||0;L<a+c;L+=65535){var Fe=L+65535;Fe>=a&&(l[u/8|0]=c,Fe=a),u=w3(l,u+1,t.subarray(L,Fe))}i.i=a}return v3(o,0,n+CB(u)+s)},x3=function(){var t=1,e=0;return{p:function(r){for(var n=t,s=e,i=r.length|0,a=0;a!=i;){for(var o=Math.min(a+2655,i);a<o;++a)s+=n+=r[a];n=(n&65535)+15*(n>>16),s=(s&65535)+15*(s>>16)}t=n,e=s},d:function(){return t%=65521,e%=65521,(t&255)<<24|(t&65280)<<8|(e&255)<<8|e>>8}}},wz=function(t,e,r,n,s){if(!s&&(s={l:1},e.dictionary)){var i=e.dictionary.subarray(-32768),a=new bs(i.length+t.length);a.set(i),a.set(t,i.length),t=a,s.w=i.length}return vz(t,e.level==null?6:e.level,e.mem==null?s.l?Math.ceil(Math.max(8,Math.min(13,Math.log(t.length)))*1.5):20:12+e.mem,r,n,s)},b3=function(t,e,r){for(;r;++e)t[e]=r,r>>>=8},yz=function(t,e){var r=e.level,n=r==0?0:r<6?1:r==9?3:2;if(t[0]=120,t[1]=n<<6|(e.dictionary&&32),t[1]|=31-(t[0]<<8|t[1])%31,e.dictionary){var s=x3();s.p(e.dictionary),b3(t,2,s.d())}},xz=function(t,e){return((t[0]&15)!=8||t[0]>>4>7||(t[0]<<8|t[1])%31)&&ta(6,"invalid zlib data"),(t[1]>>5&1)==1&&ta(6,"invalid zlib data: "+(t[1]&32?"need":"unexpected")+" dictionary"),(t[1]>>3&4)+2};function rx(t,e){e||(e={});var r=x3();r.p(t);var n=wz(t,e,e.dictionary?6:2,4);return yz(n,e),b3(n,n.length-4,r.d()),n}function bz(t,e){return mz(t.subarray(xz(t),-4),{i:2},e,e)}var Bz=typeof TextDecoder<"u"&&new TextDecoder,Cz=0;try{Bz.decode(y3,{stream:!0}),Cz=1}catch{}var Ot=function(){return typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:this}();function Gy(){Ot.console&&typeof Ot.console.log=="function"&&Ot.console.log.apply(Ot.console,arguments)}var Lr={log:Gy,warn:function(t){Ot.console&&(typeof Ot.console.warn=="function"?Ot.console.warn.apply(Ot.console,arguments):Gy.call(null,arguments))},error:function(t){Ot.console&&(typeof Ot.console.error=="function"?Ot.console.error.apply(Ot.console,arguments):Gy(t))}};function zy(t,e,r){var n=new XMLHttpRequest;n.open("GET",t),n.responseType="blob",n.onload=function(){ac(n.response,e,r)},n.onerror=function(){Lr.error("could not download file")},n.send()}function AN(t){var e=new XMLHttpRequest;e.open("HEAD",t,!1);try{e.send()}catch{}return e.status>=200&&e.status<=299}function dg(t){try{t.dispatchEvent(new MouseEvent("click"))}catch{var e=document.createEvent("MouseEvents");e.initMouseEvent("click",!0,!0,window,0,0,0,80,20,!1,!1,!1,!1,0,null),t.dispatchEvent(e)}}var Tf,nx,ac=Ot.saveAs||((typeof window>"u"?"undefined":Nr(window))!=="object"||window!==Ot?function(){}:typeof HTMLAnchorElement<"u"&&"download"in HTMLAnchorElement.prototype?function(t,e,r){var n=Ot.URL||Ot.webkitURL,s=document.createElement("a");e=e||t.name||"download",s.download=e,s.rel="noopener",typeof t=="string"?(s.href=t,s.origin!==location.origin?AN(s.href)?zy(t,e,r):dg(s,s.target="_blank"):dg(s)):(s.href=n.createObjectURL(t),setTimeout(function(){n.revokeObjectURL(s.href)},4e4),setTimeout(function(){dg(s)},0))}:"msSaveOrOpenBlob"in navigator?function(t,e,r){if(e=e||t.name||"download",typeof t=="string")if(AN(t))zy(t,e,r);else{var n=document.createElement("a");n.href=t,n.target="_blank",setTimeout(function(){dg(n)})}else navigator.msSaveOrOpenBlob(function(s,i){return i===void 0?i={autoBom:!1}:Nr(i)!=="object"&&(Lr.warn("Deprecated: Expected third argument to be a object"),i={autoBom:!i}),i.autoBom&&/^\s*(?:text\/\S*|application\/xml|\S*\/\S*\+xml)\s*;.*charset\s*=\s*utf-8/i.test(s.type)?new Blob(["\uFEFF",s],{type:s.type}):s}(t,r),e)}:function(t,e,r,n){if((n=n||open("","_blank"))&&(n.document.title=n.document.body.innerText="downloading..."),typeof t=="string")return zy(t,e,r);var s=t.type==="application/octet-stream",i=/constructor/i.test(Ot.HTMLElement)||Ot.safari,a=/CriOS\/[\d]+/.test(navigator.userAgent);if((a||s&&i)&&(typeof FileReader>"u"?"undefined":Nr(FileReader))==="object"){var o=new FileReader;o.onloadend=function(){var u=o.result;u=a?u:u.replace(/^data:[^;]*;/,"data:attachment/file;"),n?n.location.href=u:location=u,n=null},o.readAsDataURL(t)}else{var l=Ot.URL||Ot.webkitURL,c=l.createObjectURL(t);n?n.location=c:location.href=c,n=null,setTimeout(function(){l.revokeObjectURL(c)},4e4)}});/**
 * A class to parse color values
 * @author Stoyan Stefanov <sstoo@gmail.com>
 * {@link   http://www.phpied.com/rgb-color-parser-in-javascript/}
 * @license Use it if you like it
 */function B3(t){var e;t=t||"",this.ok=!1,t.charAt(0)=="#"&&(t=t.substr(1,6)),t={aliceblue:"f0f8ff",antiquewhite:"faebd7",aqua:"00ffff",aquamarine:"7fffd4",azure:"f0ffff",beige:"f5f5dc",bisque:"ffe4c4",black:"000000",blanchedalmond:"ffebcd",blue:"0000ff",blueviolet:"8a2be2",brown:"a52a2a",burlywood:"deb887",cadetblue:"5f9ea0",chartreuse:"7fff00",chocolate:"d2691e",coral:"ff7f50",cornflowerblue:"6495ed",cornsilk:"fff8dc",crimson:"dc143c",cyan:"00ffff",darkblue:"00008b",darkcyan:"008b8b",darkgoldenrod:"b8860b",darkgray:"a9a9a9",darkgreen:"006400",darkkhaki:"bdb76b",darkmagenta:"8b008b",darkolivegreen:"556b2f",darkorange:"ff8c00",darkorchid:"9932cc",darkred:"8b0000",darksalmon:"e9967a",darkseagreen:"8fbc8f",darkslateblue:"483d8b",darkslategray:"2f4f4f",darkturquoise:"00ced1",darkviolet:"9400d3",deeppink:"ff1493",deepskyblue:"00bfff",dimgray:"696969",dodgerblue:"1e90ff",feldspar:"d19275",firebrick:"b22222",floralwhite:"fffaf0",forestgreen:"228b22",fuchsia:"ff00ff",gainsboro:"dcdcdc",ghostwhite:"f8f8ff",gold:"ffd700",goldenrod:"daa520",gray:"808080",green:"008000",greenyellow:"adff2f",honeydew:"f0fff0",hotpink:"ff69b4",indianred:"cd5c5c",indigo:"4b0082",ivory:"fffff0",khaki:"f0e68c",lavender:"e6e6fa",lavenderblush:"fff0f5",lawngreen:"7cfc00",lemonchiffon:"fffacd",lightblue:"add8e6",lightcoral:"f08080",lightcyan:"e0ffff",lightgoldenrodyellow:"fafad2",lightgrey:"d3d3d3",lightgreen:"90ee90",lightpink:"ffb6c1",lightsalmon:"ffa07a",lightseagreen:"20b2aa",lightskyblue:"87cefa",lightslateblue:"8470ff",lightslategray:"778899",lightsteelblue:"b0c4de",lightyellow:"ffffe0",lime:"00ff00",limegreen:"32cd32",linen:"faf0e6",magenta:"ff00ff",maroon:"800000",mediumaquamarine:"66cdaa",mediumblue:"0000cd",mediumorchid:"ba55d3",mediumpurple:"9370d8",mediumseagreen:"3cb371",mediumslateblue:"7b68ee",mediumspringgreen:"00fa9a",mediumturquoise:"48d1cc",mediumvioletred:"c71585",midnightblue:"191970",mintcream:"f5fffa",mistyrose:"ffe4e1",moccasin:"ffe4b5",navajowhite:"ffdead",navy:"000080",oldlace:"fdf5e6",olive:"808000",olivedrab:"6b8e23",orange:"ffa500",orangered:"ff4500",orchid:"da70d6",palegoldenrod:"eee8aa",palegreen:"98fb98",paleturquoise:"afeeee",palevioletred:"d87093",papayawhip:"ffefd5",peachpuff:"ffdab9",peru:"cd853f",pink:"ffc0cb",plum:"dda0dd",powderblue:"b0e0e6",purple:"800080",red:"ff0000",rosybrown:"bc8f8f",royalblue:"4169e1",saddlebrown:"8b4513",salmon:"fa8072",sandybrown:"f4a460",seagreen:"2e8b57",seashell:"fff5ee",sienna:"a0522d",silver:"c0c0c0",skyblue:"87ceeb",slateblue:"6a5acd",slategray:"708090",snow:"fffafa",springgreen:"00ff7f",steelblue:"4682b4",tan:"d2b48c",teal:"008080",thistle:"d8bfd8",tomato:"ff6347",turquoise:"40e0d0",violet:"ee82ee",violetred:"d02090",wheat:"f5deb3",white:"ffffff",whitesmoke:"f5f5f5",yellow:"ffff00",yellowgreen:"9acd32"}[t=(t=t.replace(/ /g,"")).toLowerCase()]||t;for(var r=[{re:/^rgb\((\d{1,3}),\s*(\d{1,3}),\s*(\d{1,3})\)$/,example:["rgb(123, 234, 45)","rgb(255,234,245)"],process:function(o){return[parseInt(o[1]),parseInt(o[2]),parseInt(o[3])]}},{re:/^(\w{2})(\w{2})(\w{2})$/,example:["#00ff00","336699"],process:function(o){return[parseInt(o[1],16),parseInt(o[2],16),parseInt(o[3],16)]}},{re:/^(\w{1})(\w{1})(\w{1})$/,example:["#fb0","f0f"],process:function(o){return[parseInt(o[1]+o[1],16),parseInt(o[2]+o[2],16),parseInt(o[3]+o[3],16)]}}],n=0;n<r.length;n++){var s=r[n].re,i=r[n].process,a=s.exec(t);a&&(e=i(a),this.r=e[0],this.g=e[1],this.b=e[2],this.ok=!0)}this.r=this.r<0||isNaN(this.r)?0:this.r>255?255:this.r,this.g=this.g<0||isNaN(this.g)?0:this.g>255?255:this.g,this.b=this.b<0||isNaN(this.b)?0:this.b>255?255:this.b,this.toRGB=function(){return"rgb("+this.r+", "+this.g+", "+this.b+")"},this.toHex=function(){var o=this.r.toString(16),l=this.g.toString(16),c=this.b.toString(16);return o.length==1&&(o="0"+o),l.length==1&&(l="0"+l),c.length==1&&(c="0"+c),"#"+o+l+c}}/**
 * @license
 * Joseph Myers does not specify a particular license for his work.
 *
 * Author: Joseph Myers
 * Accessed from: http://www.myersdaily.org/joseph/javascript/md5.js
 *
 * Modified by: Owen Leong
 */function $y(t,e){var r=t[0],n=t[1],s=t[2],i=t[3];r=ps(r,n,s,i,e[0],7,-680876936),i=ps(i,r,n,s,e[1],12,-389564586),s=ps(s,i,r,n,e[2],17,606105819),n=ps(n,s,i,r,e[3],22,-1044525330),r=ps(r,n,s,i,e[4],7,-176418897),i=ps(i,r,n,s,e[5],12,1200080426),s=ps(s,i,r,n,e[6],17,-1473231341),n=ps(n,s,i,r,e[7],22,-45705983),r=ps(r,n,s,i,e[8],7,1770035416),i=ps(i,r,n,s,e[9],12,-1958414417),s=ps(s,i,r,n,e[10],17,-42063),n=ps(n,s,i,r,e[11],22,-1990404162),r=ps(r,n,s,i,e[12],7,1804603682),i=ps(i,r,n,s,e[13],12,-40341101),s=ps(s,i,r,n,e[14],17,-1502002290),r=ms(r,n=ps(n,s,i,r,e[15],22,1236535329),s,i,e[1],5,-165796510),i=ms(i,r,n,s,e[6],9,-1069501632),s=ms(s,i,r,n,e[11],14,643717713),n=ms(n,s,i,r,e[0],20,-373897302),r=ms(r,n,s,i,e[5],5,-701558691),i=ms(i,r,n,s,e[10],9,38016083),s=ms(s,i,r,n,e[15],14,-660478335),n=ms(n,s,i,r,e[4],20,-405537848),r=ms(r,n,s,i,e[9],5,568446438),i=ms(i,r,n,s,e[14],9,-1019803690),s=ms(s,i,r,n,e[3],14,-187363961),n=ms(n,s,i,r,e[8],20,1163531501),r=ms(r,n,s,i,e[13],5,-1444681467),i=ms(i,r,n,s,e[2],9,-51403784),s=ms(s,i,r,n,e[7],14,1735328473),r=gs(r,n=ms(n,s,i,r,e[12],20,-1926607734),s,i,e[5],4,-378558),i=gs(i,r,n,s,e[8],11,-2022574463),s=gs(s,i,r,n,e[11],16,1839030562),n=gs(n,s,i,r,e[14],23,-35309556),r=gs(r,n,s,i,e[1],4,-1530992060),i=gs(i,r,n,s,e[4],11,1272893353),s=gs(s,i,r,n,e[7],16,-155497632),n=gs(n,s,i,r,e[10],23,-1094730640),r=gs(r,n,s,i,e[13],4,681279174),i=gs(i,r,n,s,e[0],11,-358537222),s=gs(s,i,r,n,e[3],16,-722521979),n=gs(n,s,i,r,e[6],23,76029189),r=gs(r,n,s,i,e[9],4,-640364487),i=gs(i,r,n,s,e[12],11,-421815835),s=gs(s,i,r,n,e[15],16,530742520),r=vs(r,n=gs(n,s,i,r,e[2],23,-995338651),s,i,e[0],6,-198630844),i=vs(i,r,n,s,e[7],10,1126891415),s=vs(s,i,r,n,e[14],15,-1416354905),n=vs(n,s,i,r,e[5],21,-57434055),r=vs(r,n,s,i,e[12],6,1700485571),i=vs(i,r,n,s,e[3],10,-1894986606),s=vs(s,i,r,n,e[10],15,-1051523),n=vs(n,s,i,r,e[1],21,-2054922799),r=vs(r,n,s,i,e[8],6,1873313359),i=vs(i,r,n,s,e[15],10,-30611744),s=vs(s,i,r,n,e[6],15,-1560198380),n=vs(n,s,i,r,e[13],21,1309151649),r=vs(r,n,s,i,e[4],6,-145523070),i=vs(i,r,n,s,e[11],10,-1120210379),s=vs(s,i,r,n,e[2],15,718787259),n=vs(n,s,i,r,e[9],21,-343485551),t[0]=WA(r,t[0]),t[1]=WA(n,t[1]),t[2]=WA(s,t[2]),t[3]=WA(i,t[3])}function gw(t,e,r,n,s,i){return e=WA(WA(e,t),WA(n,i)),WA(e<<s|e>>>32-s,r)}function ps(t,e,r,n,s,i,a){return gw(e&r|~e&n,t,e,s,i,a)}function ms(t,e,r,n,s,i,a){return gw(e&n|r&~n,t,e,s,i,a)}function gs(t,e,r,n,s,i,a){return gw(e^r^n,t,e,s,i,a)}function vs(t,e,r,n,s,i,a){return gw(r^(e|~n),t,e,s,i,a)}function C3(t){var e,r=t.length,n=[1732584193,-271733879,-1732584194,271733878];for(e=64;e<=t.length;e+=64)$y(n,Ez(t.substring(e-64,e)));t=t.substring(e-64);var s=[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0];for(e=0;e<t.length;e++)s[e>>2]|=t.charCodeAt(e)<<(e%4<<3);if(s[e>>2]|=128<<(e%4<<3),e>55)for($y(n,s),e=0;e<16;e++)s[e]=0;return s[14]=8*r,$y(n,s),n}function Ez(t){var e,r=[];for(e=0;e<64;e+=4)r[e>>2]=t.charCodeAt(e)+(t.charCodeAt(e+1)<<8)+(t.charCodeAt(e+2)<<16)+(t.charCodeAt(e+3)<<24);return r}Tf=Ot.atob.bind(Ot),nx=Ot.btoa.bind(Ot);var lN="0123456789abcdef".split("");function _z(t){for(var e="",r=0;r<4;r++)e+=lN[t>>8*r+4&15]+lN[t>>8*r&15];return e}function Nz(t){return String.fromCharCode((255&t)>>0,(65280&t)>>8,(16711680&t)>>16,(4278190080&t)>>24)}function sx(t){return C3(t).map(Nz).join("")}var Iz=function(t){for(var e=0;e<t.length;e++)t[e]=_z(t[e]);return t.join("")}(C3("hello"))!="5d41402abc4b2a76b9719d911017c592";function WA(t,e){if(Iz){var r=(65535&t)+(65535&e);return(t>>16)+(e>>16)+(r>>16)<<16|65535&r}return t+e&4294967295}/**
 * @license
 * FPDF is released under a permissive license: there is no usage restriction.
 * You may embed it freely in your application (commercial or not), with or
 * without modifications.
 *
 * Reference: http://www.fpdf.org/en/script/script37.php
 */function ix(t,e){var r,n,s,i;if(t!==r){for(var a=(s=t,i=1+(256/t.length>>0),new Array(i+1).join(s)),o=[],l=0;l<256;l++)o[l]=l;var c=0;for(l=0;l<256;l++){var u=o[l];c=(c+u+a.charCodeAt(l))%256,o[l]=o[c],o[c]=u}r=t,n=o}else o=n;var f=e.length,p=0,m=0,b="";for(l=0;l<f;l++)m=(m+(u=o[p=(p+1)%256]))%256,o[p]=o[m],o[m]=u,a=o[(o[p]+o[m])%256],b+=String.fromCharCode(e.charCodeAt(l)^a);return b}/**
 * @license
 * Licensed under the MIT License.
 * http://opensource.org/licenses/mit-license
 * Author: Owen Leong (@owenl131)
 * Date: 15 Oct 2020
 * References:
 * https://www.cs.cmu.edu/~dst/Adobe/Gallery/anon21jul01-pdf-encryption.txt
 * https://github.com/foliojs/pdfkit/blob/master/lib/security.js
 * http://www.fpdf.org/en/script/script37.php
 */var cN={print:4,modify:8,copy:16,"annot-forms":32};function Gu(t,e,r,n){this.v=1,this.r=2;var s=192;t.forEach(function(o){if(cN.perm!==void 0)throw new Error("Invalid permission: "+o);s+=cN[o]}),this.padding="(N^NuAd\0NV\b..\0h>/\fdSiz";var i=(e+this.padding).substr(0,32),a=(r+this.padding).substr(0,32);this.O=this.processOwnerPassword(i,a),this.P=-(1+(255^s)),this.encryptionKey=sx(i+this.O+this.lsbFirstWord(this.P)+this.hexToBytes(n)).substr(0,5),this.U=ix(this.encryptionKey,this.padding)}function zu(t){if(/[^\u0000-\u00ff]/.test(t))throw new Error("Invalid PDF Name Object: "+t+", Only accept ASCII characters.");for(var e="",r=t.length,n=0;n<r;n++){var s=t.charCodeAt(n);s<33||s===35||s===37||s===40||s===41||s===47||s===60||s===62||s===91||s===93||s===123||s===125||s>126?e+="#"+("0"+s.toString(16)).slice(-2):e+=t[n]}return e}function uN(t){if(Nr(t)!=="object")throw new Error("Invalid Context passed to initialize PubSub (jsPDF-module)");var e={};this.subscribe=function(r,n,s){if(s=s||!1,typeof r!="string"||typeof n!="function"||typeof s!="boolean")throw new Error("Invalid arguments passed to PubSub.subscribe (jsPDF-module)");e.hasOwnProperty(r)||(e[r]={});var i=Math.random().toString(35);return e[r][i]=[n,!!s],i},this.unsubscribe=function(r){for(var n in e)if(e[n][r])return delete e[n][r],Object.keys(e[n]).length===0&&delete e[n],!0;return!1},this.publish=function(r){if(e.hasOwnProperty(r)){var n=Array.prototype.slice.call(arguments,1),s=[];for(var i in e[r]){var a=e[r][i];try{a[0].apply(t,n)}catch(o){Ot.console&&Lr.error("jsPDF PubSub Error",o.message,o)}a[1]&&s.push(i)}s.length&&s.forEach(this.unsubscribe)}},this.getTopics=function(){return e}}function xp(t){if(!(this instanceof xp))return new xp(t);var e="opacity,stroke-opacity".split(",");for(var r in t)t.hasOwnProperty(r)&&e.indexOf(r)>=0&&(this[r]=t[r]);this.id="",this.objectNumber=-1}function E3(t,e){this.gState=t,this.matrix=e,this.id="",this.objectNumber=-1}function HA(t,e,r,n,s){if(!(this instanceof HA))return new HA(t,e,r,n,s);this.type=t==="axial"?2:3,this.coords=e,this.colors=r,E3.call(this,n,s)}function gc(t,e,r,n,s){if(!(this instanceof gc))return new gc(t,e,r,n,s);this.boundingBox=t,this.xStep=e,this.yStep=r,this.stream="",this.cloneIndex=0,E3.call(this,n,s)}function kt(t){var e,r=typeof arguments[0]=="string"?arguments[0]:"p",n=arguments[1],s=arguments[2],i=arguments[3],a=[],o=1,l=16,c="S",u=null;Nr(t=t||{})==="object"&&(r=t.orientation,n=t.unit||n,s=t.format||s,i=t.compress||t.compressPdf||i,(u=t.encryption||null)!==null&&(u.userPassword=u.userPassword||"",u.ownerPassword=u.ownerPassword||"",u.userPermissions=u.userPermissions||[]),o=typeof t.userUnit=="number"?Math.abs(t.userUnit):1,t.precision!==void 0&&(e=t.precision),t.floatPrecision!==void 0&&(l=t.floatPrecision),c=t.defaultPathOperation||"S"),a=t.filters||(i===!0?["FlateEncode"]:a),n=n||"mm",r=(""+(r||"P")).toLowerCase();var f=t.putOnlyUsedFonts||!1,p={},m={internal:{},__private__:{}};m.__private__.PubSub=uN;var b="1.3",B=m.__private__.getPdfVersion=function(){return b};m.__private__.setPdfVersion=function(v){b=v};var _={a0:[2383.94,3370.39],a1:[1683.78,2383.94],a2:[1190.55,1683.78],a3:[841.89,1190.55],a4:[595.28,841.89],a5:[419.53,595.28],a6:[297.64,419.53],a7:[209.76,297.64],a8:[147.4,209.76],a9:[104.88,147.4],a10:[73.7,104.88],b0:[2834.65,4008.19],b1:[2004.09,2834.65],b2:[1417.32,2004.09],b3:[1000.63,1417.32],b4:[708.66,1000.63],b5:[498.9,708.66],b6:[354.33,498.9],b7:[249.45,354.33],b8:[175.75,249.45],b9:[124.72,175.75],b10:[87.87,124.72],c0:[2599.37,3676.54],c1:[1836.85,2599.37],c2:[1298.27,1836.85],c3:[918.43,1298.27],c4:[649.13,918.43],c5:[459.21,649.13],c6:[323.15,459.21],c7:[229.61,323.15],c8:[161.57,229.61],c9:[113.39,161.57],c10:[79.37,113.39],dl:[311.81,623.62],letter:[612,792],"government-letter":[576,756],legal:[612,1008],"junior-legal":[576,360],ledger:[1224,792],tabloid:[792,1224],"credit-card":[153,243]};m.__private__.getPageFormats=function(){return _};var w=m.__private__.getPageFormat=function(v){return _[v]};s=s||"a4";var y={COMPAT:"compat",ADVANCED:"advanced"},S=y.COMPAT;function O(){this.saveGraphicsState(),G(new Oe(ve,0,0,-ve,0,us()*ve).toString()+" cm"),this.setFontSize(this.getFontSize()/ve),c="n",S=y.ADVANCED}function R(){this.restoreGraphicsState(),c="S",S=y.COMPAT}var M=m.__private__.combineFontStyleAndFontWeight=function(v,H){if(v=="bold"&&H=="normal"||v=="bold"&&H==400||v=="normal"&&H=="italic"||v=="bold"&&H=="italic")throw new Error("Invalid Combination of fontweight and fontstyle");return H&&(v=H==400||H==="normal"?v==="italic"?"italic":"normal":H!=700&&H!=="bold"||v!=="normal"?(H==700?"bold":H)+""+v:"bold"),v};m.advancedAPI=function(v){var H=S===y.COMPAT;return H&&O.call(this),typeof v!="function"||(v(this),H&&R.call(this)),this},m.compatAPI=function(v){var H=S===y.ADVANCED;return H&&R.call(this),typeof v!="function"||(v(this),H&&O.call(this)),this},m.isAdvancedAPI=function(){return S===y.ADVANCED};var I,E=function(v){if(S!==y.ADVANCED)throw new Error(v+" is only available in 'advanced' API mode. You need to call advancedAPI() first.")},L=m.roundToPrecision=m.__private__.roundToPrecision=function(v,H){var Ae=e||H;if(isNaN(v)||isNaN(Ae))throw new Error("Invalid argument passed to jsPDF.roundToPrecision");return v.toFixed(Ae).replace(/0+$/,"")};I=m.hpf=m.__private__.hpf=typeof l=="number"?function(v){if(isNaN(v))throw new Error("Invalid argument passed to jsPDF.hpf");return L(v,l)}:l==="smart"?function(v){if(isNaN(v))throw new Error("Invalid argument passed to jsPDF.hpf");return L(v,v>-1&&v<1?16:5)}:function(v){if(isNaN(v))throw new Error("Invalid argument passed to jsPDF.hpf");return L(v,16)};var D=m.f2=m.__private__.f2=function(v){if(isNaN(v))throw new Error("Invalid argument passed to jsPDF.f2");return L(v,2)},N=m.__private__.f3=function(v){if(isNaN(v))throw new Error("Invalid argument passed to jsPDF.f3");return L(v,3)},T=m.scale=m.__private__.scale=function(v){if(isNaN(v))throw new Error("Invalid argument passed to jsPDF.scale");return S===y.COMPAT?v*ve:S===y.ADVANCED?v:void 0},F=function(v){return S===y.COMPAT?us()-v:S===y.ADVANCED?v:void 0},ee=function(v){return T(F(v))};m.__private__.setPrecision=m.setPrecision=function(v){typeof parseInt(v,10)=="number"&&(e=parseInt(v,10))};var ce,re="00000000000000000000000000000000",de=m.__private__.getFileId=function(){return re},W=m.__private__.setFileId=function(v){return re=v!==void 0&&/^[a-fA-F0-9]{32}$/.test(v)?v.toUpperCase():re.split("").map(function(){return"ABCDEF0123456789".charAt(Math.floor(16*Math.random()))}).join(""),u!==null&&(Or=new Gu(u.userPermissions,u.userPassword,u.ownerPassword,re)),re};m.setFileId=function(v){return W(v),this},m.getFileId=function(){return de()};var ue=m.__private__.convertDateToPDFDate=function(v){var H=v.getTimezoneOffset(),Ae=H<0?"+":"-",fe=Math.floor(Math.abs(H/60)),xe=Math.abs(H%60),De=[Ae,z(fe),"'",z(xe),"'"].join("");return["D:",v.getFullYear(),z(v.getMonth()+1),z(v.getDate()),z(v.getHours()),z(v.getMinutes()),z(v.getSeconds()),De].join("")},ae=m.__private__.convertPDFDateToDate=function(v){var H=parseInt(v.substr(2,4),10),Ae=parseInt(v.substr(6,2),10)-1,fe=parseInt(v.substr(8,2),10),xe=parseInt(v.substr(10,2),10),De=parseInt(v.substr(12,2),10),$e=parseInt(v.substr(14,2),10);return new Date(H,Ae,fe,xe,De,$e,0)},Ee=m.__private__.setCreationDate=function(v){var H;if(v===void 0&&(v=new Date),v instanceof Date)H=ue(v);else{if(!/^D:(20[0-2][0-9]|203[0-7]|19[7-9][0-9])(0[0-9]|1[0-2])([0-2][0-9]|3[0-1])(0[0-9]|1[0-9]|2[0-3])(0[0-9]|[1-5][0-9])(0[0-9]|[1-5][0-9])(\+0[0-9]|\+1[0-4]|-0[0-9]|-1[0-1])'(0[0-9]|[1-5][0-9])'?$/.test(v))throw new Error("Invalid argument passed to jsPDF.setCreationDate");H=v}return ce=H},Q=m.__private__.getCreationDate=function(v){var H=ce;return v==="jsDate"&&(H=ae(ce)),H};m.setCreationDate=function(v){return Ee(v),this},m.getCreationDate=function(v){return Q(v)};var k,z=m.__private__.padd2=function(v){return("0"+parseInt(v)).slice(-2)},te=m.__private__.padd2Hex=function(v){return("00"+(v=v.toString())).substr(v.length)},$=0,ne=[],X=[],he=0,ge=[],Ce=[],Te=!1,Fe=X,oe=function(){$=0,he=0,X=[],ne=[],ge=[],et=it(),nt=it()};m.__private__.setCustomOutputDestination=function(v){Te=!0,Fe=v};var le=function(v){Te||(Fe=v)};m.__private__.resetCustomOutputDestination=function(){Te=!1,Fe=X};var G=m.__private__.out=function(v){return v=v.toString(),he+=v.length+1,Fe.push(v),Fe},Re=m.__private__.write=function(v){return G(arguments.length===1?v.toString():Array.prototype.join.call(arguments," "))},je=m.__private__.getArrayBuffer=function(v){for(var H=v.length,Ae=new ArrayBuffer(H),fe=new Uint8Array(Ae);H--;)fe[H]=v.charCodeAt(H);return Ae},Ue=[["Helvetica","helvetica","normal","WinAnsiEncoding"],["Helvetica-Bold","helvetica","bold","WinAnsiEncoding"],["Helvetica-Oblique","helvetica","italic","WinAnsiEncoding"],["Helvetica-BoldOblique","helvetica","bolditalic","WinAnsiEncoding"],["Courier","courier","normal","WinAnsiEncoding"],["Courier-Bold","courier","bold","WinAnsiEncoding"],["Courier-Oblique","courier","italic","WinAnsiEncoding"],["Courier-BoldOblique","courier","bolditalic","WinAnsiEncoding"],["Times-Roman","times","normal","WinAnsiEncoding"],["Times-Bold","times","bold","WinAnsiEncoding"],["Times-Italic","times","italic","WinAnsiEncoding"],["Times-BoldItalic","times","bolditalic","WinAnsiEncoding"],["ZapfDingbats","zapfdingbats","normal",null],["Symbol","symbol","normal",null]];m.__private__.getStandardFonts=function(){return Ue};var Pe=t.fontSize||16;m.__private__.setFontSize=m.setFontSize=function(v){return Pe=S===y.ADVANCED?v/ve:v,this};var Ge,qe=m.__private__.getFontSize=m.getFontSize=function(){return S===y.COMPAT?Pe:Pe*ve},tt=t.R2L||!1;m.__private__.setR2L=m.setR2L=function(v){return tt=v,this},m.__private__.getR2L=m.getR2L=function(){return tt};var Ze,vt=m.__private__.setZoomMode=function(v){var H=[void 0,null,"fullwidth","fullheight","fullpage","original"];if(/^(?:\d+\.\d*|\d*\.\d+|\d+)%$/.test(v))Ge=v;else if(isNaN(v)){if(H.indexOf(v)===-1)throw new Error('zoom must be Integer (e.g. 2), a percentage Value (e.g. 300%) or fullwidth, fullheight, fullpage, original. "'+v+'" is not recognized.');Ge=v}else Ge=parseInt(v,10)};m.__private__.getZoomMode=function(){return Ge};var ht,Ct=m.__private__.setPageMode=function(v){if([void 0,null,"UseNone","UseOutlines","UseThumbs","FullScreen"].indexOf(v)==-1)throw new Error('Page mode must be one of UseNone, UseOutlines, UseThumbs, or FullScreen. "'+v+'" is not recognized.');Ze=v};m.__private__.getPageMode=function(){return Ze};var Ht=m.__private__.setLayoutMode=function(v){if([void 0,null,"continuous","single","twoleft","tworight","two"].indexOf(v)==-1)throw new Error('Layout mode must be one of continuous, single, twoleft, tworight. "'+v+'" is not recognized.');ht=v};m.__private__.getLayoutMode=function(){return ht},m.__private__.setDisplayMode=m.setDisplayMode=function(v,H,Ae){return vt(v),Ht(H),Ct(Ae),this};var Et={title:"",subject:"",author:"",keywords:"",creator:""};m.__private__.getDocumentProperty=function(v){if(Object.keys(Et).indexOf(v)===-1)throw new Error("Invalid argument passed to jsPDF.getDocumentProperty");return Et[v]},m.__private__.getDocumentProperties=function(){return Et},m.__private__.setDocumentProperties=m.setProperties=m.setDocumentProperties=function(v){for(var H in Et)Et.hasOwnProperty(H)&&v[H]&&(Et[H]=v[H]);return this},m.__private__.setDocumentProperty=function(v,H){if(Object.keys(Et).indexOf(v)===-1)throw new Error("Invalid arguments passed to jsPDF.setDocumentProperty");return Et[v]=H};var se,ve,We,at,wt,_t={},rt={},ur=[],St={},Ur={},sr={},fr={},hn=null,vr=0,jt=[],Yt=new uN(m),cs=t.hotfixes||[],zr={},mr={},Qe=[],Oe=function v(H,Ae,fe,xe,De,$e){if(!(this instanceof v))return new v(H,Ae,fe,xe,De,$e);isNaN(H)&&(H=1),isNaN(Ae)&&(Ae=0),isNaN(fe)&&(fe=0),isNaN(xe)&&(xe=1),isNaN(De)&&(De=0),isNaN($e)&&($e=0),this._matrix=[H,Ae,fe,xe,De,$e]};Object.defineProperty(Oe.prototype,"sx",{get:function(){return this._matrix[0]},set:function(v){this._matrix[0]=v}}),Object.defineProperty(Oe.prototype,"shy",{get:function(){return this._matrix[1]},set:function(v){this._matrix[1]=v}}),Object.defineProperty(Oe.prototype,"shx",{get:function(){return this._matrix[2]},set:function(v){this._matrix[2]=v}}),Object.defineProperty(Oe.prototype,"sy",{get:function(){return this._matrix[3]},set:function(v){this._matrix[3]=v}}),Object.defineProperty(Oe.prototype,"tx",{get:function(){return this._matrix[4]},set:function(v){this._matrix[4]=v}}),Object.defineProperty(Oe.prototype,"ty",{get:function(){return this._matrix[5]},set:function(v){this._matrix[5]=v}}),Object.defineProperty(Oe.prototype,"a",{get:function(){return this._matrix[0]},set:function(v){this._matrix[0]=v}}),Object.defineProperty(Oe.prototype,"b",{get:function(){return this._matrix[1]},set:function(v){this._matrix[1]=v}}),Object.defineProperty(Oe.prototype,"c",{get:function(){return this._matrix[2]},set:function(v){this._matrix[2]=v}}),Object.defineProperty(Oe.prototype,"d",{get:function(){return this._matrix[3]},set:function(v){this._matrix[3]=v}}),Object.defineProperty(Oe.prototype,"e",{get:function(){return this._matrix[4]},set:function(v){this._matrix[4]=v}}),Object.defineProperty(Oe.prototype,"f",{get:function(){return this._matrix[5]},set:function(v){this._matrix[5]=v}}),Object.defineProperty(Oe.prototype,"rotation",{get:function(){return Math.atan2(this.shx,this.sx)}}),Object.defineProperty(Oe.prototype,"scaleX",{get:function(){return this.decompose().scale.sx}}),Object.defineProperty(Oe.prototype,"scaleY",{get:function(){return this.decompose().scale.sy}}),Object.defineProperty(Oe.prototype,"isIdentity",{get:function(){return this.sx===1&&this.shy===0&&this.shx===0&&this.sy===1&&this.tx===0&&this.ty===0}}),Oe.prototype.join=function(v){return[this.sx,this.shy,this.shx,this.sy,this.tx,this.ty].map(I).join(v)},Oe.prototype.multiply=function(v){var H=v.sx*this.sx+v.shy*this.shx,Ae=v.sx*this.shy+v.shy*this.sy,fe=v.shx*this.sx+v.sy*this.shx,xe=v.shx*this.shy+v.sy*this.sy,De=v.tx*this.sx+v.ty*this.shx+this.tx,$e=v.tx*this.shy+v.ty*this.sy+this.ty;return new Oe(H,Ae,fe,xe,De,$e)},Oe.prototype.decompose=function(){var v=this.sx,H=this.shy,Ae=this.shx,fe=this.sy,xe=this.tx,De=this.ty,$e=Math.sqrt(v*v+H*H),lt=(v/=$e)*Ae+(H/=$e)*fe;Ae-=v*lt,fe-=H*lt;var h=Math.sqrt(Ae*Ae+fe*fe);return lt/=h,v*(fe/=h)<H*(Ae/=h)&&(v=-v,H=-H,lt=-lt,$e=-$e),{scale:new Oe($e,0,0,h,0,0),translate:new Oe(1,0,0,1,xe,De),rotate:new Oe(v,H,-H,v,0,0),skew:new Oe(1,0,lt,1,0,0)}},Oe.prototype.toString=function(v){return this.join(" ")},Oe.prototype.inversed=function(){var v=this.sx,H=this.shy,Ae=this.shx,fe=this.sy,xe=this.tx,De=this.ty,$e=1/(v*fe-H*Ae),lt=fe*$e,h=-H*$e,C=-Ae*$e,j=v*$e;return new Oe(lt,h,C,j,-lt*xe-C*De,-h*xe-j*De)},Oe.prototype.applyToPoint=function(v){var H=v.x*this.sx+v.y*this.shx+this.tx,Ae=v.x*this.shy+v.y*this.sy+this.ty;return new no(H,Ae)},Oe.prototype.applyToRectangle=function(v){var H=this.applyToPoint(v),Ae=this.applyToPoint(new no(v.x+v.w,v.y+v.h));return new oA(H.x,H.y,Ae.x-H.x,Ae.y-H.y)},Oe.prototype.clone=function(){var v=this.sx,H=this.shy,Ae=this.shx,fe=this.sy,xe=this.tx,De=this.ty;return new Oe(v,H,Ae,fe,xe,De)},m.Matrix=Oe;var Ft=m.matrixMult=function(v,H){return H.multiply(v)},ft=new Oe(1,0,0,1,0,0);m.unitMatrix=m.identityMatrix=ft;var ct=function(v,H){if(!Ur[v]){var Ae=(H instanceof HA?"Sh":"P")+(Object.keys(St).length+1).toString(10);H.id=Ae,Ur[v]=Ae,St[Ae]=H,Yt.publish("addPattern",H)}};m.ShadingPattern=HA,m.TilingPattern=gc,m.addShadingPattern=function(v,H){return E("addShadingPattern()"),ct(v,H),this},m.beginTilingPattern=function(v){E("beginTilingPattern()"),AA(v.boundingBox[0],v.boundingBox[1],v.boundingBox[2]-v.boundingBox[0],v.boundingBox[3]-v.boundingBox[1],v.matrix)},m.endTilingPattern=function(v,H){E("endTilingPattern()"),H.stream=Ce[k].join(`
`),ct(v,H),Yt.publish("endTilingPattern",H),Qe.pop().restore()};var Ut=m.__private__.newObject=function(){var v=it();return Nt(v,!0),v},it=m.__private__.newObjectDeferred=function(){return $++,ne[$]=function(){return he},$},Nt=function(v,H){return H=typeof H=="boolean"&&H,ne[v]=he,H&&G(v+" 0 obj"),v},be=m.__private__.newAdditionalObject=function(){var v={objId:it(),content:""};return ge.push(v),v},et=it(),nt=it(),Mt=m.__private__.decodeColorString=function(v){var H=v.split(" ");if(H.length!==2||H[1]!=="g"&&H[1]!=="G")H.length===5&&(H[4]==="k"||H[4]==="K")&&(H=[(1-H[0])*(1-H[3]),(1-H[1])*(1-H[3]),(1-H[2])*(1-H[3]),"r"]);else{var Ae=parseFloat(H[0]);H=[Ae,Ae,Ae,"r"]}for(var fe="#",xe=0;xe<3;xe++)fe+=("0"+Math.floor(255*parseFloat(H[xe])).toString(16)).slice(-2);return fe},Zt=m.__private__.encodeColorString=function(v){var H;typeof v=="string"&&(v={ch1:v});var Ae=v.ch1,fe=v.ch2,xe=v.ch3,De=v.ch4,$e=v.pdfColorType==="draw"?["G","RG","K"]:["g","rg","k"];if(typeof Ae=="string"&&Ae.charAt(0)!=="#"){var lt=new B3(Ae);if(lt.ok)Ae=lt.toHex();else if(!/^\d*\.?\d*$/.test(Ae))throw new Error('Invalid color "'+Ae+'" passed to jsPDF.encodeColorString.')}if(typeof Ae=="string"&&/^#[0-9A-Fa-f]{3}$/.test(Ae)&&(Ae="#"+Ae[1]+Ae[1]+Ae[2]+Ae[2]+Ae[3]+Ae[3]),typeof Ae=="string"&&/^#[0-9A-Fa-f]{6}$/.test(Ae)){var h=parseInt(Ae.substr(1),16);Ae=h>>16&255,fe=h>>8&255,xe=255&h}if(fe===void 0||De===void 0&&Ae===fe&&fe===xe)if(typeof Ae=="string")H=Ae+" "+$e[0];else switch(v.precision){case 2:H=D(Ae/255)+" "+$e[0];break;case 3:default:H=N(Ae/255)+" "+$e[0]}else if(De===void 0||Nr(De)==="object"){if(De&&!isNaN(De.a)&&De.a===0)return H=["1.","1.","1.",$e[1]].join(" ");if(typeof Ae=="string")H=[Ae,fe,xe,$e[1]].join(" ");else switch(v.precision){case 2:H=[D(Ae/255),D(fe/255),D(xe/255),$e[1]].join(" ");break;default:case 3:H=[N(Ae/255),N(fe/255),N(xe/255),$e[1]].join(" ")}}else if(typeof Ae=="string")H=[Ae,fe,xe,De,$e[2]].join(" ");else switch(v.precision){case 2:H=[D(Ae),D(fe),D(xe),D(De),$e[2]].join(" ");break;case 3:default:H=[N(Ae),N(fe),N(xe),N(De),$e[2]].join(" ")}return H},It=m.__private__.getFilters=function(){return a},mt=m.__private__.putStream=function(v){var H=(v=v||{}).data||"",Ae=v.filters||It(),fe=v.alreadyAppliedFilters||[],xe=v.addLength1||!1,De=H.length,$e=v.objectId,lt=function(Gt){return Gt};if(u!==null&&$e===void 0)throw new Error("ObjectId must be passed to putStream for file encryption");u!==null&&(lt=Or.encryptor($e,0));var h={};Ae===!0&&(Ae=["FlateEncode"]);var C=v.additionalKeyValues||[],j=(h=kt.API.processDataByFilters!==void 0?kt.API.processDataByFilters(H,Ae):{data:H,reverseChain:[]}).reverseChain+(Array.isArray(fe)?fe.join(" "):fe.toString());if(h.data.length!==0&&(C.push({key:"Length",value:h.data.length}),xe===!0&&C.push({key:"Length1",value:De})),j.length!=0)if(j.split("/").length-1==1)C.push({key:"Filter",value:j});else{C.push({key:"Filter",value:"["+j+"]"});for(var J=0;J<C.length;J+=1)if(C[J].key==="DecodeParms"){for(var ye=[],Ie=0;Ie<h.reverseChain.split("/").length-1;Ie+=1)ye.push("null");ye.push(C[J].value),C[J].value="["+ye.join(" ")+"]"}}G("<<");for(var Xe=0;Xe<C.length;Xe++)G("/"+C[Xe].key+" "+C[Xe].value);G(">>"),h.data.length!==0&&(G("stream"),G(lt(h.data)),G("endstream"))},Es=m.__private__.putPage=function(v){var H=v.number,Ae=v.data,fe=v.objId,xe=v.contentsObjId;Nt(fe,!0),G("<</Type /Page"),G("/Parent "+v.rootDictionaryObjId+" 0 R"),G("/Resources "+v.resourceDictionaryObjId+" 0 R"),G("/MediaBox ["+parseFloat(I(v.mediaBox.bottomLeftX))+" "+parseFloat(I(v.mediaBox.bottomLeftY))+" "+I(v.mediaBox.topRightX)+" "+I(v.mediaBox.topRightY)+"]"),v.cropBox!==null&&G("/CropBox ["+I(v.cropBox.bottomLeftX)+" "+I(v.cropBox.bottomLeftY)+" "+I(v.cropBox.topRightX)+" "+I(v.cropBox.topRightY)+"]"),v.bleedBox!==null&&G("/BleedBox ["+I(v.bleedBox.bottomLeftX)+" "+I(v.bleedBox.bottomLeftY)+" "+I(v.bleedBox.topRightX)+" "+I(v.bleedBox.topRightY)+"]"),v.trimBox!==null&&G("/TrimBox ["+I(v.trimBox.bottomLeftX)+" "+I(v.trimBox.bottomLeftY)+" "+I(v.trimBox.topRightX)+" "+I(v.trimBox.topRightY)+"]"),v.artBox!==null&&G("/ArtBox ["+I(v.artBox.bottomLeftX)+" "+I(v.artBox.bottomLeftY)+" "+I(v.artBox.topRightX)+" "+I(v.artBox.topRightY)+"]"),typeof v.userUnit=="number"&&v.userUnit!==1&&G("/UserUnit "+v.userUnit),Yt.publish("putPage",{objId:fe,pageContext:jt[H],pageNumber:H,page:Ae}),G("/Contents "+xe+" 0 R"),G(">>"),G("endobj");var De=Ae.join(`
`);return S===y.ADVANCED&&(De+=`
Q`),Nt(xe,!0),mt({data:De,filters:It(),objectId:xe}),G("endobj"),fe},ma=m.__private__.putPages=function(){var v,H,Ae=[];for(v=1;v<=vr;v++)jt[v].objId=it(),jt[v].contentsObjId=it();for(v=1;v<=vr;v++)Ae.push(Es({number:v,data:Ce[v],objId:jt[v].objId,contentsObjId:jt[v].contentsObjId,mediaBox:jt[v].mediaBox,cropBox:jt[v].cropBox,bleedBox:jt[v].bleedBox,trimBox:jt[v].trimBox,artBox:jt[v].artBox,userUnit:jt[v].userUnit,rootDictionaryObjId:et,resourceDictionaryObjId:nt}));Nt(et,!0),G("<</Type /Pages");var fe="/Kids [";for(H=0;H<vr;H++)fe+=Ae[H]+" 0 R ";G(fe+"]"),G("/Count "+vr),G(">>"),G("endobj"),Yt.publish("postPutPages")},ga=function(v){Yt.publish("putFont",{font:v,out:G,newObject:Ut,putStream:mt}),v.isAlreadyPutted!==!0&&(v.objectNumber=Ut(),G("<<"),G("/Type /Font"),G("/BaseFont /"+zu(v.postScriptName)),G("/Subtype /Type1"),typeof v.encoding=="string"&&G("/Encoding /"+v.encoding),G("/FirstChar 32"),G("/LastChar 255"),G(">>"),G("endobj"))},va=function(){for(var v in _t)_t.hasOwnProperty(v)&&(f===!1||f===!0&&p.hasOwnProperty(v))&&ga(_t[v])},$a=function(v){v.objectNumber=Ut();var H=[];H.push({key:"Type",value:"/XObject"}),H.push({key:"Subtype",value:"/Form"}),H.push({key:"BBox",value:"["+[I(v.x),I(v.y),I(v.x+v.width),I(v.y+v.height)].join(" ")+"]"}),H.push({key:"Matrix",value:"["+v.matrix.toString()+"]"});var Ae=v.pages[1].join(`
`);mt({data:Ae,additionalKeyValues:H,objectId:v.objectNumber}),G("endobj")},Wa=function(){for(var v in zr)zr.hasOwnProperty(v)&&$a(zr[v])},Xc=function(v,H){var Ae,fe=[],xe=1/(H-1);for(Ae=0;Ae<1;Ae+=xe)fe.push(Ae);if(fe.push(1),v[0].offset!=0){var De={offset:0,color:v[0].color};v.unshift(De)}if(v[v.length-1].offset!=1){var $e={offset:1,color:v[v.length-1].color};v.push($e)}for(var lt="",h=0,C=0;C<fe.length;C++){for(Ae=fe[C];Ae>v[h+1].offset;)h++;var j=v[h].offset,J=(Ae-j)/(v[h+1].offset-j),ye=v[h].color,Ie=v[h+1].color;lt+=te(Math.round((1-J)*ye[0]+J*Ie[0]).toString(16))+te(Math.round((1-J)*ye[1]+J*Ie[1]).toString(16))+te(Math.round((1-J)*ye[2]+J*Ie[2]).toString(16))}return lt.trim()},$o=function(v,H){H||(H=21);var Ae=Ut(),fe=Xc(v.colors,H),xe=[];xe.push({key:"FunctionType",value:"0"}),xe.push({key:"Domain",value:"[0.0 1.0]"}),xe.push({key:"Size",value:"["+H+"]"}),xe.push({key:"BitsPerSample",value:"8"}),xe.push({key:"Range",value:"[0.0 1.0 0.0 1.0 0.0 1.0]"}),xe.push({key:"Decode",value:"[0.0 1.0 0.0 1.0 0.0 1.0]"}),mt({data:fe,additionalKeyValues:xe,alreadyAppliedFilters:["/ASCIIHexDecode"],objectId:Ae}),G("endobj"),v.objectNumber=Ut(),G("<< /ShadingType "+v.type),G("/ColorSpace /DeviceRGB");var De="/Coords ["+I(parseFloat(v.coords[0]))+" "+I(parseFloat(v.coords[1]))+" ";v.type===2?De+=I(parseFloat(v.coords[2]))+" "+I(parseFloat(v.coords[3])):De+=I(parseFloat(v.coords[2]))+" "+I(parseFloat(v.coords[3]))+" "+I(parseFloat(v.coords[4]))+" "+I(parseFloat(v.coords[5])),G(De+="]"),v.matrix&&G("/Matrix ["+v.matrix.toString()+"]"),G("/Function "+Ae+" 0 R"),G("/Extend [true true]"),G(">>"),G("endobj")},Jc=function(v,H){var Ae=it(),fe=Ut();H.push({resourcesOid:Ae,objectOid:fe}),v.objectNumber=fe;var xe=[];xe.push({key:"Type",value:"/Pattern"}),xe.push({key:"PatternType",value:"1"}),xe.push({key:"PaintType",value:"1"}),xe.push({key:"TilingType",value:"1"}),xe.push({key:"BBox",value:"["+v.boundingBox.map(I).join(" ")+"]"}),xe.push({key:"XStep",value:I(v.xStep)}),xe.push({key:"YStep",value:I(v.yStep)}),xe.push({key:"Resources",value:Ae+" 0 R"}),v.matrix&&xe.push({key:"Matrix",value:"["+v.matrix.toString()+"]"}),mt({data:v.stream,additionalKeyValues:xe,objectId:v.objectNumber}),G("endobj")},wa=function(v){var H;for(H in St)St.hasOwnProperty(H)&&(St[H]instanceof HA?$o(St[H]):St[H]instanceof gc&&Jc(St[H],v))},ya=function(v){for(var H in v.objectNumber=Ut(),G("<<"),v)switch(H){case"opacity":G("/ca "+D(v[H]));break;case"stroke-opacity":G("/CA "+D(v[H]))}G(">>"),G("endobj")},Ri=function(){var v;for(v in sr)sr.hasOwnProperty(v)&&ya(sr[v])},Xa=function(){for(var v in G("/XObject <<"),zr)zr.hasOwnProperty(v)&&zr[v].objectNumber>=0&&G("/"+v+" "+zr[v].objectNumber+" 0 R");Yt.publish("putXobjectDict"),G(">>")},nh=function(){Or.oid=Ut(),G("<<"),G("/Filter /Standard"),G("/V "+Or.v),G("/R "+Or.r),G("/U <"+Or.toHexString(Or.U)+">"),G("/O <"+Or.toHexString(Or.O)+">"),G("/P "+Or.P),G(">>"),G("endobj")},Tl=function(){for(var v in G("/Font <<"),_t)_t.hasOwnProperty(v)&&(f===!1||f===!0&&p.hasOwnProperty(v))&&G("/"+v+" "+_t[v].objectNumber+" 0 R");G(">>")},Yc=function(){if(Object.keys(St).length>0){for(var v in G("/Shading <<"),St)St.hasOwnProperty(v)&&St[v]instanceof HA&&St[v].objectNumber>=0&&G("/"+v+" "+St[v].objectNumber+" 0 R");Yt.publish("putShadingPatternDict"),G(">>")}},Ja=function(v){if(Object.keys(St).length>0){for(var H in G("/Pattern <<"),St)St.hasOwnProperty(H)&&St[H]instanceof m.TilingPattern&&St[H].objectNumber>=0&&St[H].objectNumber<v&&G("/"+H+" "+St[H].objectNumber+" 0 R");Yt.publish("putTilingPatternDict"),G(">>")}},Ul=function(){if(Object.keys(sr).length>0){var v;for(v in G("/ExtGState <<"),sr)sr.hasOwnProperty(v)&&sr[v].objectNumber>=0&&G("/"+v+" "+sr[v].objectNumber+" 0 R");Yt.publish("putGStateDict"),G(">>")}},Mr=function(v){Nt(v.resourcesOid,!0),G("<<"),G("/ProcSet [/PDF /Text /ImageB /ImageC /ImageI]"),Tl(),Yc(),Ja(v.objectOid),Ul(),Xa(),G(">>"),G("endobj")},Pl=function(){var v=[];va(),Ri(),Wa(),wa(v),Yt.publish("putResources"),v.forEach(Mr),Mr({resourcesOid:nt,objectOid:Number.MAX_SAFE_INTEGER}),Yt.publish("postPutResources")},Ql=function(){Yt.publish("putAdditionalObjects");for(var v=0;v<ge.length;v++){var H=ge[v];Nt(H.objId,!0),G(H.content),G("endobj")}Yt.publish("postPutAdditionalObjects")},Zc=function(v){rt[v.fontName]=rt[v.fontName]||{},rt[v.fontName][v.fontStyle]=v.id},Ll=function(v,H,Ae,fe,xe){var De={id:"F"+(Object.keys(_t).length+1).toString(10),postScriptName:v,fontName:H,fontStyle:Ae,encoding:fe,isStandardFont:xe||!1,metadata:{}};return Yt.publish("addFont",{font:De,instance:this}),_t[De.id]=De,Zc(De),De.id},eu=function(v){for(var H=0,Ae=Ue.length;H<Ae;H++){var fe=Ll.call(this,v[H][0],v[H][1],v[H][2],Ue[H][3],!0);f===!1&&(p[fe]=!0);var xe=v[H][0].split("-");Zc({id:fe,fontName:xe[0],fontStyle:xe[1]||""})}Yt.publish("addFonts",{fonts:_t,dictionary:rt})},Ds=function(v){return v.foo=function(){try{return v.apply(this,arguments)}catch(fe){var H=fe.stack||"";~H.indexOf(" at ")&&(H=H.split(" at ")[1]);var Ae="Error in function "+H.split(`
`)[0].split("<")[0]+": "+fe.message;if(!Ot.console)throw new Error(Ae);Ot.console.error(Ae,fe),Ot.alert&&alert(Ae)}},v.foo.bar=v,v.foo},Wo=function(v,H){var Ae,fe,xe,De,$e,lt,h,C,j;if(xe=(H=H||{}).sourceEncoding||"Unicode",$e=H.outputEncoding,(H.autoencode||$e)&&_t[se].metadata&&_t[se].metadata[xe]&&_t[se].metadata[xe].encoding&&(De=_t[se].metadata[xe].encoding,!$e&&_t[se].encoding&&($e=_t[se].encoding),!$e&&De.codePages&&($e=De.codePages[0]),typeof $e=="string"&&($e=De[$e]),$e)){for(h=!1,lt=[],Ae=0,fe=v.length;Ae<fe;Ae++)(C=$e[v.charCodeAt(Ae)])?lt.push(String.fromCharCode(C)):lt.push(v[Ae]),lt[Ae].charCodeAt(0)>>8&&(h=!0);v=lt.join("")}for(Ae=v.length;h===void 0&&Ae!==0;)v.charCodeAt(Ae-1)>>8&&(h=!0),Ae--;if(!h)return v;for(lt=H.noBOM?[]:[254,255],Ae=0,fe=v.length;Ae<fe;Ae++){if((j=(C=v.charCodeAt(Ae))>>8)>>8)throw new Error("Character at position "+Ae+" of string '"+v+"' exceeds 16bits. Cannot be encoded into UCS-2 BE");lt.push(j),lt.push(C-(j<<8))}return String.fromCharCode.apply(void 0,lt)},An=m.__private__.pdfEscape=m.pdfEscape=function(v,H){return Wo(v,H).replace(/\\/g,"\\\\").replace(/\(/g,"\\(").replace(/\)/g,"\\)")},_s=m.__private__.beginPage=function(v){Ce[++vr]=[],jt[vr]={objId:0,contentsObjId:0,userUnit:Number(o),artBox:null,bleedBox:null,cropBox:null,trimBox:null,mediaBox:{bottomLeftX:0,bottomLeftY:0,topRightX:Number(v[0]),topRightY:Number(v[1])}},jl(vr),le(Ce[k])},Ya=function(v,H){var Ae,fe,xe;switch(r=H||r,typeof v=="string"&&(Ae=w(v.toLowerCase()),Array.isArray(Ae)&&(fe=Ae[0],xe=Ae[1])),Array.isArray(v)&&(fe=v[0]*ve,xe=v[1]*ve),isNaN(fe)&&(fe=s[0],xe=s[1]),(fe>14400||xe>14400)&&(Lr.warn("A page in a PDF can not be wider or taller than 14400 userUnit. jsPDF limits the width/height to 14400"),fe=Math.min(14400,fe),xe=Math.min(14400,xe)),s=[fe,xe],r.substr(0,1)){case"l":xe>fe&&(s=[xe,fe]);break;case"p":fe>xe&&(s=[xe,fe])}_s(s),Ol(Ml),G(Xn),Kl!==0&&G(Kl+" J"),aA!==0&&G(aA+" j"),Yt.publish("addPage",{pageNumber:vr})},Xo=function(v){v>0&&v<=vr&&(Ce.splice(v,1),jt.splice(v,1),vr--,k>vr&&(k=vr),this.setPage(k))},jl=function(v){v>0&&v<=vr&&(k=v)},br=m.__private__.getNumberOfPages=m.getNumberOfPages=function(){return Ce.length-1},Za=function(v,H,Ae){var fe,xe=void 0;return Ae=Ae||{},v=v!==void 0?v:_t[se].fontName,H=H!==void 0?H:_t[se].fontStyle,fe=v.toLowerCase(),rt[fe]!==void 0&&rt[fe][H]!==void 0?xe=rt[fe][H]:rt[v]!==void 0&&rt[v][H]!==void 0?xe=rt[v][H]:Ae.disableWarning===!1&&Lr.warn("Unable to look up font label for font '"+v+"', '"+H+"'. Refer to getFontList() for available fonts."),xe||Ae.noFallback||(xe=rt.times[H])==null&&(xe=rt.times.normal),xe},eo=m.__private__.putInfo=function(){var v=Ut(),H=function(fe){return fe};for(var Ae in u!==null&&(H=Or.encryptor(v,0)),G("<<"),G("/Producer ("+An(H("jsPDF "+kt.version))+")"),Et)Et.hasOwnProperty(Ae)&&Et[Ae]&&G("/"+Ae.substr(0,1).toUpperCase()+Ae.substr(1)+" ("+An(H(Et[Ae]))+")");G("/CreationDate ("+An(H(ce))+")"),G(">>"),G("endobj")},Mi=m.__private__.putCatalog=function(v){var H=(v=v||{}).rootDictionaryObjId||et;switch(Ut(),G("<<"),G("/Type /Catalog"),G("/Pages "+H+" 0 R"),Ge||(Ge="fullwidth"),Ge){case"fullwidth":G("/OpenAction [3 0 R /FitH null]");break;case"fullheight":G("/OpenAction [3 0 R /FitV null]");break;case"fullpage":G("/OpenAction [3 0 R /Fit]");break;case"original":G("/OpenAction [3 0 R /XYZ null null 1]");break;default:var Ae=""+Ge;Ae.substr(Ae.length-1)==="%"&&(Ge=parseInt(Ge)/100),typeof Ge=="number"&&G("/OpenAction [3 0 R /XYZ null null "+D(Ge)+"]")}switch(ht||(ht="continuous"),ht){case"continuous":G("/PageLayout /OneColumn");break;case"single":G("/PageLayout /SinglePage");break;case"two":case"twoleft":G("/PageLayout /TwoColumnLeft");break;case"tworight":G("/PageLayout /TwoColumnRight")}Ze&&G("/PageMode /"+Ze),Yt.publish("putCatalog"),G(">>"),G("endobj")},sh=m.__private__.putTrailer=function(){G("trailer"),G("<<"),G("/Size "+($+1)),G("/Root "+$+" 0 R"),G("/Info "+($-1)+" 0 R"),u!==null&&G("/Encrypt "+Or.oid+" 0 R"),G("/ID [ <"+re+"> <"+re+"> ]"),G(">>")},tu=m.__private__.putHeader=function(){G("%PDF-"+b),G("%")},ih=m.__private__.putXRef=function(){var v="0000000000";G("xref"),G("0 "+($+1)),G("0000000000 65535 f ");for(var H=1;H<=$;H++)typeof ne[H]=="function"?G((v+ne[H]()).slice(-10)+" 00000 n "):ne[H]!==void 0?G((v+ne[H]).slice(-10)+" 00000 n "):G("0000000000 00000 n ")},Oi=m.__private__.buildDocument=function(){oe(),le(X),Yt.publish("buildDocument"),tu(),ma(),Ql(),Pl(),u!==null&&nh(),eo(),Mi();var v=he;return ih(),sh(),G("startxref"),G(""+v),G("%%EOF"),le(Ce[k]),X.join(`
`)},Jo=m.__private__.getBlob=function(v){return new Blob([je(v)],{type:"application/pdf"})},Yo=m.output=m.__private__.output=Ds(function(v,H){switch(typeof(H=H||{})=="string"?H={filename:H}:H.filename=H.filename||"generated.pdf",v){case void 0:return Oi();case"save":m.save(H.filename);break;case"arraybuffer":return je(Oi());case"blob":return Jo(Oi());case"bloburi":case"bloburl":if(Ot.URL!==void 0&&typeof Ot.URL.createObjectURL=="function")return Ot.URL&&Ot.URL.createObjectURL(Jo(Oi()))||void 0;Lr.warn("bloburl is not supported by your system, because URL.createObjectURL is not supported by your browser.");break;case"datauristring":case"dataurlstring":var Ae="",fe=Oi();try{Ae=nx(fe)}catch{Ae=nx(unescape(encodeURIComponent(fe)))}return"data:application/pdf;filename="+H.filename+";base64,"+Ae;case"pdfobjectnewwindow":if(Object.prototype.toString.call(Ot)==="[object Window]"){var xe="https://cdnjs.cloudflare.com/ajax/libs/pdfobject/2.1.1/pdfobject.min.js",De=' integrity="sha512-4ze/a9/4jqu+tX9dfOqJYSvyYd5M6qum/3HpCLr+/Jqf0whc37VUbkpNGHR7/8pSnCFw47T1fmIpwBV7UySh3g==" crossorigin="anonymous"';H.pdfObjectUrl&&(xe=H.pdfObjectUrl,De="");var $e='<html><style>html, body { padding: 0; margin: 0; } iframe { width: 100%; height: 100%; border: 0;}  </style><body><script src="'+xe+'"'+De+'><\/script><script >PDFObject.embed("'+this.output("dataurlstring")+'", '+JSON.stringify(H)+");<\/script></body></html>",lt=Ot.open();return lt!==null&&lt.document.write($e),lt}throw new Error("The option pdfobjectnewwindow just works in a browser-environment.");case"pdfjsnewwindow":if(Object.prototype.toString.call(Ot)==="[object Window]"){var h='<html><style>html, body { padding: 0; margin: 0; } iframe { width: 100%; height: 100%; border: 0;}  </style><body><iframe id="pdfViewer" src="'+(H.pdfJsUrl||"examples/PDF.js/web/viewer.html")+"?file=&downloadName="+H.filename+'" width="500px" height="400px" /></body></html>',C=Ot.open();if(C!==null){C.document.write(h);var j=this;C.document.documentElement.querySelector("#pdfViewer").onload=function(){C.document.title=H.filename,C.document.documentElement.querySelector("#pdfViewer").contentWindow.PDFViewerApplication.open(j.output("bloburl"))}}return C}throw new Error("The option pdfjsnewwindow just works in a browser-environment.");case"dataurlnewwindow":if(Object.prototype.toString.call(Ot)!=="[object Window]")throw new Error("The option dataurlnewwindow just works in a browser-environment.");var J='<html><style>html, body { padding: 0; margin: 0; } iframe { width: 100%; height: 100%; border: 0;}  </style><body><iframe src="'+this.output("datauristring",H)+'"></iframe></body></html>',ye=Ot.open();if(ye!==null&&(ye.document.write(J),ye.document.title=H.filename),ye||typeof safari>"u")return ye;break;case"datauri":case"dataurl":return Ot.document.location.href=this.output("datauristring",H);default:return null}}),xa=function(v){return Array.isArray(cs)===!0&&cs.indexOf(v)>-1};switch(n){case"pt":ve=1;break;case"mm":ve=72/25.4;break;case"cm":ve=72/2.54;break;case"in":ve=72;break;case"px":ve=xa("px_scaling")==1?.75:96/72;break;case"pc":case"em":ve=12;break;case"ex":ve=6;break;default:if(typeof n!="number")throw new Error("Invalid unit: "+n);ve=n}var Or=null;Ee(),W();var ru=function(v){return u!==null?Or.encryptor(v,0):function(H){return H}},kl=m.__private__.getPageInfo=m.getPageInfo=function(v){if(isNaN(v)||v%1!=0)throw new Error("Invalid argument passed to jsPDF.getPageInfo");return{objId:jt[v].objId,pageNumber:v,pageContext:jt[v]}},Vt=m.__private__.getPageInfoByObjId=function(v){if(isNaN(v)||v%1!=0)throw new Error("Invalid argument passed to jsPDF.getPageInfoByObjId");for(var H in jt)if(jt[H].objId===v)break;return kl(H)},ba=m.__private__.getCurrentPageInfo=m.getCurrentPageInfo=function(){return{objId:jt[k].objId,pageNumber:k,pageContext:jt[k]}};m.addPage=function(){return Ya.apply(this,arguments),this},m.setPage=function(){return jl.apply(this,arguments),le.call(this,Ce[k]),this},m.insertPage=function(v){return this.addPage(),this.movePage(k,v),this},m.movePage=function(v,H){var Ae,fe;if(v>H){Ae=Ce[v],fe=jt[v];for(var xe=v;xe>H;xe--)Ce[xe]=Ce[xe-1],jt[xe]=jt[xe-1];Ce[H]=Ae,jt[H]=fe,this.setPage(H)}else if(v<H){Ae=Ce[v],fe=jt[v];for(var De=v;De<H;De++)Ce[De]=Ce[De+1],jt[De]=jt[De+1];Ce[H]=Ae,jt[H]=fe,this.setPage(H)}return this},m.deletePage=function(){return Xo.apply(this,arguments),this},m.__private__.text=m.text=function(v,H,Ae,fe,xe){var De,$e,lt,h,C,j,J,ye,Ie,Xe=(fe=fe||{}).scope||this;if(typeof v=="number"&&typeof H=="number"&&(typeof Ae=="string"||Array.isArray(Ae))){var Gt=Ae;Ae=H,H=v,v=Gt}if(arguments[3]instanceof Oe?(E("The transform parameter of text() with a Matrix value"),Ie=xe):(lt=arguments[4],h=arguments[5],Nr(J=arguments[3])==="object"&&J!==null||(typeof lt=="string"&&(h=lt,lt=null),typeof J=="string"&&(h=J,J=null),typeof J=="number"&&(lt=J,J=null),fe={flags:J,angle:lt,align:h})),isNaN(H)||isNaN(Ae)||v==null)throw new Error("Invalid arguments passed to jsPDF.text");if(v.length===0)return Xe;var ir="",zt=!1,yr=typeof fe.lineHeightFactor=="number"?fe.lineHeightFactor:wr,Pr=Xe.internal.scaleFactor;function Gi(jr){return jr=jr.split("	").join(Array(fe.TabLen||9).join(" ")),An(jr,J)}function Jn(jr){for(var kr,pn=jr.concat(),Fn=[],Ao=pn.length;Ao--;)typeof(kr=pn.shift())=="string"?Fn.push(kr):Array.isArray(jr)&&(kr.length===1||kr[1]===void 0&&kr[2]===void 0)?Fn.push(kr[0]):Fn.push([kr[0],kr[1],kr[2]]);return Fn}function _a(jr,kr){var pn;if(typeof jr=="string")pn=kr(jr)[0];else if(Array.isArray(jr)){for(var Fn,Ao,fh=jr.concat(),pu=[],Yp=fh.length;Yp--;)typeof(Fn=fh.shift())=="string"?pu.push(kr(Fn)[0]):Array.isArray(Fn)&&typeof Fn[0]=="string"&&(Ao=kr(Fn[0],Fn[1],Fn[2]),pu.push([Ao[0],Ao[1],Ao[2]]));pn=pu}return pn}var Na=!1,oh=!0;if(typeof v=="string")Na=!0;else if(Array.isArray(v)){var Ah=v.concat();$e=[];for(var ou,Yn=Ah.length;Yn--;)(typeof(ou=Ah.shift())!="string"||Array.isArray(ou)&&typeof ou[0]!="string")&&(oh=!1);Na=oh}if(Na===!1)throw new Error('Type of text must be string or Array. "'+v+'" is not recognized.');typeof v=="string"&&(v=v.match(/[\r?\n]/)?v.split(/\r\n|\r|\n/g):[v]);var Au=Pe/Xe.internal.scaleFactor,lu=Au*(yr-1);switch(fe.baseline){case"bottom":Ae-=lu;break;case"top":Ae+=Au-lu;break;case"hanging":Ae+=Au-2*lu;break;case"middle":Ae+=Au/2-lu}if((j=fe.maxWidth||0)>0&&(typeof v=="string"?v=Xe.splitTextToSize(v,j):Object.prototype.toString.call(v)==="[object Array]"&&(v=v.reduce(function(jr,kr){return jr.concat(Xe.splitTextToSize(kr,j))},[]))),De={text:v,x:H,y:Ae,options:fe,mutex:{pdfEscape:An,activeFontKey:se,fonts:_t,activeFontSize:Pe}},Yt.publish("preProcessText",De),v=De.text,lt=(fe=De.options).angle,!(Ie instanceof Oe)&&lt&&typeof lt=="number"){lt*=Math.PI/180,fe.rotationDirection===0&&(lt=-lt),S===y.ADVANCED&&(lt=-lt);var cu=Math.cos(lt),lh=Math.sin(lt);Ie=new Oe(cu,lh,-lh,cu,0,0)}else lt&&lt instanceof Oe&&(Ie=lt);S!==y.ADVANCED||Ie||(Ie=ft),(C=fe.charSpace||ro)!==void 0&&(ir+=I(T(C))+` Tc
`,this.setCharSpace(this.getCharSpace()||0)),(ye=fe.horizontalScale)!==void 0&&(ir+=I(100*ye)+` Tz
`),fe.lang;var Rs=-1,vw=fe.renderingMode!==void 0?fe.renderingMode:fe.stroke,ch=Xe.internal.getCurrentPageInfo().pageContext;switch(vw){case 0:case!1:case"fill":Rs=0;break;case 1:case!0:case"stroke":Rs=1;break;case 2:case"fillThenStroke":Rs=2;break;case 3:case"invisible":Rs=3;break;case 4:case"fillAndAddForClipping":Rs=4;break;case 5:case"strokeAndAddPathForClipping":Rs=5;break;case 6:case"fillThenStrokeAndAddToPathForClipping":Rs=6;break;case 7:case"addToPathForClipping":Rs=7}var $p=ch.usedRenderingMode!==void 0?ch.usedRenderingMode:-1;Rs!==-1?ir+=Rs+` Tr
`:$p!==-1&&(ir+=`0 Tr
`),Rs!==-1&&(ch.usedRenderingMode=Rs),h=fe.align||"left";var vi,uu=Pe*yr,Wp=Xe.internal.pageSize.getWidth(),Xp=_t[se];C=fe.charSpace||ro,j=fe.maxWidth||0,J=Object.assign({autoencode:!0,noBOM:!0},fe.flags);var uA=[],ql=function(jr){return Xe.getStringUnitWidth(jr,{font:Xp,charSpace:C,fontSize:Pe,doKerning:!1})*Pe/Pr};if(Object.prototype.toString.call(v)==="[object Array]"){var Ms;$e=Jn(v),h!=="left"&&(vi=$e.map(ql));var Ns,dA=0;if(h==="right"){H-=vi[0],v=[],Yn=$e.length;for(var io=0;io<Yn;io++)io===0?(Ns=ei(H),Ms=Sn(Ae)):(Ns=T(dA-vi[io]),Ms=-uu),v.push([$e[io],Ns,Ms]),dA=vi[io]}else if(h==="center"){H-=vi[0]/2,v=[],Yn=$e.length;for(var ao=0;ao<Yn;ao++)ao===0?(Ns=ei(H),Ms=Sn(Ae)):(Ns=T((dA-vi[ao])/2),Ms=-uu),v.push([$e[ao],Ns,Ms]),dA=vi[ao]}else if(h==="left"){v=[],Yn=$e.length;for(var du=0;du<Yn;du++)v.push($e[du])}else if(h==="justify"&&Xp.encoding==="Identity-H"){v=[],Yn=$e.length,j=j!==0?j:Wp;for(var oo=0,fn=0;fn<Yn;fn++)if(Ms=fn===0?Sn(Ae):-uu,Ns=fn===0?ei(H):oo,fn<Yn-1){var uh=T((j-vi[fn])/($e[fn].split(" ").length-1)),Is=$e[fn].split(" ");v.push([Is[0]+" ",Ns,Ms]),oo=0;for(var wi=1;wi<Is.length;wi++){var hu=(ql(Is[wi-1]+" "+Is[wi])-ql(Is[wi]))*Pr+uh;wi==Is.length-1?v.push([Is[wi],hu,0]):v.push([Is[wi]+" ",hu,0]),oo-=hu}}else v.push([$e[fn],Ns,Ms]);v.push(["",oo,0])}else{if(h!=="justify")throw new Error('Unrecognized alignment option, use "left", "center", "right" or "justify".');for(v=[],Yn=$e.length,j=j!==0?j:Wp,fn=0;fn<Yn;fn++)Ms=fn===0?Sn(Ae):-uu,Ns=fn===0?ei(H):0,fn<Yn-1?uA.push(I(T((j-vi[fn])/($e[fn].split(" ").length-1)))):uA.push(0),v.push([$e[fn],Ns,Ms])}}var Jp=typeof fe.R2L=="boolean"?fe.R2L:tt;Jp===!0&&(v=_a(v,function(jr,kr,pn){return[jr.split("").reverse().join(""),kr,pn]})),De={text:v,x:H,y:Ae,options:fe,mutex:{pdfEscape:An,activeFontKey:se,fonts:_t,activeFontSize:Pe}},Yt.publish("postProcessText",De),v=De.text,zt=De.mutex.isHex||!1;var dh=_t[se].encoding;dh!=="WinAnsiEncoding"&&dh!=="StandardEncoding"||(v=_a(v,function(jr,kr,pn){return[Gi(jr),kr,pn]})),$e=Jn(v),v=[];for(var Gl,zl,hA,$l=0,fu=1,Wl=Array.isArray($e[0])?fu:$l,fA="",hh=function(jr,kr,pn){var Fn="";return pn instanceof Oe?(pn=typeof fe.angle=="number"?Ft(pn,new Oe(1,0,0,1,jr,kr)):Ft(new Oe(1,0,0,1,jr,kr),pn),S===y.ADVANCED&&(pn=Ft(new Oe(1,0,0,-1,0,0),pn)),Fn=pn.join(" ")+` Tm
`):Fn=I(jr)+" "+I(kr)+` Td
`,Fn},yi=0;yi<$e.length;yi++){switch(fA="",Wl){case fu:hA=(zt?"<":"(")+$e[yi][0]+(zt?">":")"),Gl=parseFloat($e[yi][1]),zl=parseFloat($e[yi][2]);break;case $l:hA=(zt?"<":"(")+$e[yi]+(zt?">":")"),Gl=ei(H),zl=Sn(Ae)}uA!==void 0&&uA[yi]!==void 0&&(fA=uA[yi]+` Tw
`),yi===0?v.push(fA+hh(Gl,zl,Ie)+hA):Wl===$l?v.push(fA+hA):Wl===fu&&v.push(fA+hh(Gl,zl,Ie)+hA)}v=Wl===$l?v.join(` Tj
T* `):v.join(` Tj
`),v+=` Tj
`;var xi=`BT
/`;return xi+=se+" "+Pe+` Tf
`,xi+=I(Pe*yr)+` TL
`,xi+=Ki+`
`,xi+=ir,xi+=v,G(xi+="ET"),p[se]=!0,Xe};var ah=m.__private__.clip=m.clip=function(v){return G(v==="evenodd"?"W*":"W"),this};m.clipEvenOdd=function(){return ah("evenodd")},m.__private__.discardPath=m.discardPath=function(){return G("n"),this};var gi=m.__private__.isValidStyle=function(v){var H=!1;return[void 0,null,"S","D","F","DF","FD","f","f*","B","B*","n"].indexOf(v)!==-1&&(H=!0),H};m.__private__.setDefaultPathOperation=m.setDefaultPathOperation=function(v){return gi(v)&&(c=v),this};var nu=m.__private__.getStyle=m.getStyle=function(v){var H=c;switch(v){case"D":case"S":H="S";break;case"F":H="f";break;case"FD":case"DF":H="B";break;case"f":case"f*":case"B":case"B*":H=v}return H},Ys=m.close=function(){return G("h"),this};m.stroke=function(){return G("S"),this},m.fill=function(v){return Zo("f",v),this},m.fillEvenOdd=function(v){return Zo("f*",v),this},m.fillStroke=function(v){return Zo("B",v),this},m.fillStrokeEvenOdd=function(v){return Zo("B*",v),this};var Zo=function(v,H){Nr(H)==="object"?tA(H,v):G(v)},Dl=function(v){v===null||S===y.ADVANCED&&v===void 0||(v=nu(v),G(v))};function eA(v,H,Ae,fe,xe){var De=new gc(H||this.boundingBox,Ae||this.xStep,fe||this.yStep,this.gState,xe||this.matrix);De.stream=this.stream;var $e=v+"$$"+this.cloneIndex+++"$$";return ct($e,De),De}var tA=function(v,H){var Ae=Ur[v.key],fe=St[Ae];if(fe instanceof HA)G("q"),G(su(H)),fe.gState&&m.setGState(fe.gState),G(v.matrix.toString()+" cm"),G("/"+Ae+" sh"),G("Q");else if(fe instanceof gc){var xe=new Oe(1,0,0,-1,0,us());v.matrix&&(xe=xe.multiply(v.matrix||ft),Ae=eA.call(fe,v.key,v.boundingBox,v.xStep,v.yStep,xe).id),G("q"),G("/Pattern cs"),G("/"+Ae+" scn"),fe.gState&&m.setGState(fe.gState),G(H),G("Q")}},su=function(v){switch(v){case"f":case"F":return"W n";case"f*":return"W* n";case"B":return"W S";case"B*":return"W* S";case"S":return"W S";case"n":return"W n"}},Hi=m.moveTo=function(v,H){return G(I(T(v))+" "+I(ee(H))+" m"),this},Zs=m.lineTo=function(v,H){return G(I(T(v))+" "+I(ee(H))+" l"),this},Vi=m.curveTo=function(v,H,Ae,fe,xe,De){return G([I(T(v)),I(ee(H)),I(T(Ae)),I(ee(fe)),I(T(xe)),I(ee(De)),"c"].join(" ")),this};m.__private__.line=m.line=function(v,H,Ae,fe,xe){if(isNaN(v)||isNaN(H)||isNaN(Ae)||isNaN(fe)||!gi(xe))throw new Error("Invalid arguments passed to jsPDF.line");return S===y.COMPAT?this.lines([[Ae-v,fe-H]],v,H,[1,1],xe||"S"):this.lines([[Ae-v,fe-H]],v,H,[1,1]).stroke()},m.__private__.lines=m.lines=function(v,H,Ae,fe,xe,De){var $e,lt,h,C,j,J,ye,Ie,Xe,Gt,ir,zt;if(typeof v=="number"&&(zt=Ae,Ae=H,H=v,v=zt),fe=fe||[1,1],De=De||!1,isNaN(H)||isNaN(Ae)||!Array.isArray(v)||!Array.isArray(fe)||!gi(xe)||typeof De!="boolean")throw new Error("Invalid arguments passed to jsPDF.lines");for(Hi(H,Ae),$e=fe[0],lt=fe[1],C=v.length,Gt=H,ir=Ae,h=0;h<C;h++)(j=v[h]).length===2?(Gt=j[0]*$e+Gt,ir=j[1]*lt+ir,Zs(Gt,ir)):(J=j[0]*$e+Gt,ye=j[1]*lt+ir,Ie=j[2]*$e+Gt,Xe=j[3]*lt+ir,Gt=j[4]*$e+Gt,ir=j[5]*lt+ir,Vi(J,ye,Ie,Xe,Gt,ir));return De&&Ys(),Dl(xe),this},m.path=function(v){for(var H=0;H<v.length;H++){var Ae=v[H],fe=Ae.c;switch(Ae.op){case"m":Hi(fe[0],fe[1]);break;case"l":Zs(fe[0],fe[1]);break;case"c":Vi.apply(this,fe);break;case"h":Ys()}}return this},m.__private__.rect=m.rect=function(v,H,Ae,fe,xe){if(isNaN(v)||isNaN(H)||isNaN(Ae)||isNaN(fe)||!gi(xe))throw new Error("Invalid arguments passed to jsPDF.rect");return S===y.COMPAT&&(fe=-fe),G([I(T(v)),I(ee(H)),I(T(Ae)),I(T(fe)),"re"].join(" ")),Dl(xe),this},m.__private__.triangle=m.triangle=function(v,H,Ae,fe,xe,De,$e){if(isNaN(v)||isNaN(H)||isNaN(Ae)||isNaN(fe)||isNaN(xe)||isNaN(De)||!gi($e))throw new Error("Invalid arguments passed to jsPDF.triangle");return this.lines([[Ae-v,fe-H],[xe-Ae,De-fe],[v-xe,H-De]],v,H,[1,1],$e,!0),this},m.__private__.roundedRect=m.roundedRect=function(v,H,Ae,fe,xe,De,$e){if(isNaN(v)||isNaN(H)||isNaN(Ae)||isNaN(fe)||isNaN(xe)||isNaN(De)||!gi($e))throw new Error("Invalid arguments passed to jsPDF.roundedRect");var lt=4/3*(Math.SQRT2-1);return xe=Math.min(xe,.5*Ae),De=Math.min(De,.5*fe),this.lines([[Ae-2*xe,0],[xe*lt,0,xe,De-De*lt,xe,De],[0,fe-2*De],[0,De*lt,-xe*lt,De,-xe,De],[2*xe-Ae,0],[-xe*lt,0,-xe,-De*lt,-xe,-De],[0,2*De-fe],[0,-De*lt,xe*lt,-De,xe,-De]],v+xe,H,[1,1],$e,!0),this},m.__private__.ellipse=m.ellipse=function(v,H,Ae,fe,xe){if(isNaN(v)||isNaN(H)||isNaN(Ae)||isNaN(fe)||!gi(xe))throw new Error("Invalid arguments passed to jsPDF.ellipse");var De=4/3*(Math.SQRT2-1)*Ae,$e=4/3*(Math.SQRT2-1)*fe;return Hi(v+Ae,H),Vi(v+Ae,H-$e,v+De,H-fe,v,H-fe),Vi(v-De,H-fe,v-Ae,H-$e,v-Ae,H),Vi(v-Ae,H+$e,v-De,H+fe,v,H+fe),Vi(v+De,H+fe,v+Ae,H+$e,v+Ae,H),Dl(xe),this},m.__private__.circle=m.circle=function(v,H,Ae,fe){if(isNaN(v)||isNaN(H)||isNaN(Ae)||!gi(fe))throw new Error("Invalid arguments passed to jsPDF.circle");return this.ellipse(v,H,Ae,Ae,fe)},m.setFont=function(v,H,Ae){return Ae&&(H=M(H,Ae)),se=Za(v,H,{disableWarning:!1}),this};var Rl=m.__private__.getFont=m.getFont=function(){return _t[Za.apply(m,arguments)]};m.__private__.getFontList=m.getFontList=function(){var v,H,Ae={};for(v in rt)if(rt.hasOwnProperty(v))for(H in Ae[v]=[],rt[v])rt[v].hasOwnProperty(H)&&Ae[v].push(H);return Ae},m.addFont=function(v,H,Ae,fe,xe){var De=["StandardEncoding","MacRomanEncoding","Identity-H","WinAnsiEncoding"];return arguments[3]&&De.indexOf(arguments[3])!==-1?xe=arguments[3]:arguments[3]&&De.indexOf(arguments[3])==-1&&(Ae=M(Ae,fe)),xe=xe||"Identity-H",Ll.call(this,v,H,Ae,xe)};var wr,Ml=t.lineWidth||.200025,rA=m.__private__.getLineWidth=m.getLineWidth=function(){return Ml},Ol=m.__private__.setLineWidth=m.setLineWidth=function(v){return Ml=v,G(I(T(v))+" w"),this};m.__private__.setLineDash=kt.API.setLineDash=kt.API.setLineDashPattern=function(v,H){if(v=v||[],H=H||0,isNaN(H)||!Array.isArray(v))throw new Error("Invalid arguments passed to jsPDF.setLineDash");return v=v.map(function(Ae){return I(T(Ae))}).join(" "),H=I(T(H)),G("["+v+"] "+H+" d"),this};var Hl=m.__private__.getLineHeight=m.getLineHeight=function(){return Pe*wr};m.__private__.getLineHeight=m.getLineHeight=function(){return Pe*wr};var Vl=m.__private__.setLineHeightFactor=m.setLineHeightFactor=function(v){return typeof(v=v||1.15)=="number"&&(wr=v),this},to=m.__private__.getLineHeightFactor=m.getLineHeightFactor=function(){return wr};Vl(t.lineHeight);var ei=m.__private__.getHorizontalCoordinate=function(v){return T(v)},Sn=m.__private__.getVerticalCoordinate=function(v){return S===y.ADVANCED?v:jt[k].mediaBox.topRightY-jt[k].mediaBox.bottomLeftY-T(v)},iu=m.__private__.getHorizontalCoordinateString=m.getHorizontalCoordinateString=function(v){return I(ei(v))},Ba=m.__private__.getVerticalCoordinateString=m.getVerticalCoordinateString=function(v){return I(Sn(v))},Xn=t.strokeColor||"0 G";m.__private__.getStrokeColor=m.getDrawColor=function(){return Mt(Xn)},m.__private__.setStrokeColor=m.setDrawColor=function(v,H,Ae,fe){return Xn=Zt({ch1:v,ch2:H,ch3:Ae,ch4:fe,pdfColorType:"draw",precision:2}),G(Xn),this};var nA=t.fillColor||"0 g";m.__private__.getFillColor=m.getFillColor=function(){return Mt(nA)},m.__private__.setFillColor=m.setFillColor=function(v,H,Ae,fe){return nA=Zt({ch1:v,ch2:H,ch3:Ae,ch4:fe,pdfColorType:"fill",precision:2}),G(nA),this};var Ki=t.textColor||"0 g",sA=m.__private__.getTextColor=m.getTextColor=function(){return Mt(Ki)};m.__private__.setTextColor=m.setTextColor=function(v,H,Ae,fe){return Ki=Zt({ch1:v,ch2:H,ch3:Ae,ch4:fe,pdfColorType:"text",precision:3}),this};var ro=t.charSpace,iA=m.__private__.getCharSpace=m.getCharSpace=function(){return parseFloat(ro||0)};m.__private__.setCharSpace=m.setCharSpace=function(v){if(isNaN(v))throw new Error("Invalid argument passed to jsPDF.setCharSpace");return ro=v,this};var Kl=0;m.CapJoinStyles={0:0,butt:0,but:0,miter:0,1:1,round:1,rounded:1,circle:1,2:2,projecting:2,project:2,square:2,bevel:2},m.__private__.setLineCap=m.setLineCap=function(v){var H=m.CapJoinStyles[v];if(H===void 0)throw new Error("Line cap style of '"+v+"' is not recognized. See or extend .CapJoinStyles property for valid styles");return Kl=H,G(H+" J"),this};var aA=0;m.__private__.setLineJoin=m.setLineJoin=function(v){var H=m.CapJoinStyles[v];if(H===void 0)throw new Error("Line join style of '"+v+"' is not recognized. See or extend .CapJoinStyles property for valid styles");return aA=H,G(H+" j"),this},m.__private__.setLineMiterLimit=m.__private__.setMiterLimit=m.setLineMiterLimit=m.setMiterLimit=function(v){if(v=v||0,isNaN(v))throw new Error("Invalid argument passed to jsPDF.setLineMiterLimit");return G(I(T(v))+" M"),this},m.GState=xp,m.setGState=function(v){(v=typeof v=="string"?sr[fr[v]]:Ca(null,v)).equals(hn)||(G("/"+v.id+" gs"),hn=v)};var Ca=function(v,H){if(!v||!fr[v]){var Ae=!1;for(var fe in sr)if(sr.hasOwnProperty(fe)&&sr[fe].equals(H)){Ae=!0;break}if(Ae)H=sr[fe];else{var xe="GS"+(Object.keys(sr).length+1).toString(10);sr[xe]=H,H.id=xe}return v&&(fr[v]=H.id),Yt.publish("addGState",H),H}};m.addGState=function(v,H){return Ca(v,H),this},m.saveGraphicsState=function(){return G("q"),ur.push({key:se,size:Pe,color:Ki}),this},m.restoreGraphicsState=function(){G("Q");var v=ur.pop();return se=v.key,Pe=v.size,Ki=v.color,hn=null,this},m.setCurrentTransformationMatrix=function(v){return G(v.toString()+" cm"),this},m.comment=function(v){return G("#"+v),this};var no=function(v,H){var Ae=v||0;Object.defineProperty(this,"x",{enumerable:!0,get:function(){return Ae},set:function(De){isNaN(De)||(Ae=parseFloat(De))}});var fe=H||0;Object.defineProperty(this,"y",{enumerable:!0,get:function(){return fe},set:function(De){isNaN(De)||(fe=parseFloat(De))}});var xe="pt";return Object.defineProperty(this,"type",{enumerable:!0,get:function(){return xe},set:function(De){xe=De.toString()}}),this},oA=function(v,H,Ae,fe){no.call(this,v,H),this.type="rect";var xe=Ae||0;Object.defineProperty(this,"w",{enumerable:!0,get:function(){return xe},set:function($e){isNaN($e)||(xe=parseFloat($e))}});var De=fe||0;return Object.defineProperty(this,"h",{enumerable:!0,get:function(){return De},set:function($e){isNaN($e)||(De=parseFloat($e))}}),this},so=function(){this.page=vr,this.currentPage=k,this.pages=Ce.slice(0),this.pagesContext=jt.slice(0),this.x=We,this.y=at,this.matrix=wt,this.width=Ea(k),this.height=us(k),this.outputDestination=Fe,this.id="",this.objectNumber=-1};so.prototype.restore=function(){vr=this.page,k=this.currentPage,jt=this.pagesContext,Ce=this.pages,We=this.x,at=this.y,wt=this.matrix,lA(k,this.width),cA(k,this.height),Fe=this.outputDestination};var AA=function(v,H,Ae,fe,xe){Qe.push(new so),vr=k=0,Ce=[],We=v,at=H,wt=xe,_s([Ae,fe])},au=function(v){if(mr[v])Qe.pop().restore();else{var H=new so,Ae="Xo"+(Object.keys(zr).length+1).toString(10);H.id=Ae,mr[v]=Ae,zr[Ae]=H,Yt.publish("addFormObject",H),Qe.pop().restore()}};for(var qi in m.beginFormObject=function(v,H,Ae,fe,xe){return AA(v,H,Ae,fe,xe),this},m.endFormObject=function(v){return au(v),this},m.doFormObject=function(v,H){var Ae=zr[mr[v]];return G("q"),G(H.toString()+" cm"),G("/"+Ae.id+" Do"),G("Q"),this},m.getFormObject=function(v){var H=zr[mr[v]];return{x:H.x,y:H.y,width:H.width,height:H.height,matrix:H.matrix}},m.save=function(v,H){return v=v||"generated.pdf",(H=H||{}).returnPromise=H.returnPromise||!1,H.returnPromise===!1?(ac(Jo(Oi()),v),typeof ac.unload=="function"&&Ot.setTimeout&&setTimeout(ac.unload,911),this):new Promise(function(Ae,fe){try{var xe=ac(Jo(Oi()),v);typeof ac.unload=="function"&&Ot.setTimeout&&setTimeout(ac.unload,911),Ae(xe)}catch(De){fe(De.message)}})},kt.API)kt.API.hasOwnProperty(qi)&&(qi==="events"&&kt.API.events.length?function(v,H){var Ae,fe,xe;for(xe=H.length-1;xe!==-1;xe--)Ae=H[xe][0],fe=H[xe][1],v.subscribe.apply(v,[Ae].concat(typeof fe=="function"?[fe]:fe))}(Yt,kt.API.events):m[qi]=kt.API[qi]);var Ea=m.getPageWidth=function(v){return(jt[v=v||k].mediaBox.topRightX-jt[v].mediaBox.bottomLeftX)/ve},lA=m.setPageWidth=function(v,H){jt[v].mediaBox.topRightX=H*ve+jt[v].mediaBox.bottomLeftX},us=m.getPageHeight=function(v){return(jt[v=v||k].mediaBox.topRightY-jt[v].mediaBox.bottomLeftY)/ve},cA=m.setPageHeight=function(v,H){jt[v].mediaBox.topRightY=H*ve+jt[v].mediaBox.bottomLeftY};return m.internal={pdfEscape:An,getStyle:nu,getFont:Rl,getFontSize:qe,getCharSpace:iA,getTextColor:sA,getLineHeight:Hl,getLineHeightFactor:to,getLineWidth:rA,write:Re,getHorizontalCoordinate:ei,getVerticalCoordinate:Sn,getCoordinateString:iu,getVerticalCoordinateString:Ba,collections:{},newObject:Ut,newAdditionalObject:be,newObjectDeferred:it,newObjectDeferredBegin:Nt,getFilters:It,putStream:mt,events:Yt,scaleFactor:ve,pageSize:{getWidth:function(){return Ea(k)},setWidth:function(v){lA(k,v)},getHeight:function(){return us(k)},setHeight:function(v){cA(k,v)}},encryptionOptions:u,encryption:Or,getEncryptor:ru,output:Yo,getNumberOfPages:br,pages:Ce,out:G,f2:D,f3:N,getPageInfo:kl,getPageInfoByObjId:Vt,getCurrentPageInfo:ba,getPDFVersion:B,Point:no,Rectangle:oA,Matrix:Oe,hasHotfix:xa},Object.defineProperty(m.internal.pageSize,"width",{get:function(){return Ea(k)},set:function(v){lA(k,v)},enumerable:!0,configurable:!0}),Object.defineProperty(m.internal.pageSize,"height",{get:function(){return us(k)},set:function(v){cA(k,v)},enumerable:!0,configurable:!0}),eu.call(m,Ue),se="F1",Ya(s,r),Yt.publish("initialized"),m}Gu.prototype.lsbFirstWord=function(t){return String.fromCharCode(t>>0&255,t>>8&255,t>>16&255,t>>24&255)},Gu.prototype.toHexString=function(t){return t.split("").map(function(e){return("0"+(255&e.charCodeAt(0)).toString(16)).slice(-2)}).join("")},Gu.prototype.hexToBytes=function(t){for(var e=[],r=0;r<t.length;r+=2)e.push(String.fromCharCode(parseInt(t.substr(r,2),16)));return e.join("")},Gu.prototype.processOwnerPassword=function(t,e){return ix(sx(e).substr(0,5),t)},Gu.prototype.encryptor=function(t,e){var r=sx(this.encryptionKey+String.fromCharCode(255&t,t>>8&255,t>>16&255,255&e,e>>8&255)).substr(0,10);return function(n){return ix(r,n)}},xp.prototype.equals=function(t){var e,r="id,objectNumber,equals";if(!t||Nr(t)!==Nr(this))return!1;var n=0;for(e in this)if(!(r.indexOf(e)>=0)){if(this.hasOwnProperty(e)&&!t.hasOwnProperty(e)||this[e]!==t[e])return!1;n++}for(e in t)t.hasOwnProperty(e)&&r.indexOf(e)<0&&n--;return n===0},kt.API={events:[]},kt.version="3.0.1";var cn=kt.API,EB=1,Wc=function(t){return t.replace(/\\/g,"\\\\").replace(/\(/g,"\\(").replace(/\)/g,"\\)")},Uu=function(t){return t.replace(/\\\\/g,"\\").replace(/\\\(/g,"(").replace(/\\\)/g,")")},$t=function(t){return t.toFixed(2)},IA=function(t){return t.toFixed(5)};cn.__acroform__={};var Js=function(t,e){t.prototype=Object.create(e.prototype),t.prototype.constructor=t},dN=function(t){return t*EB},Ta=function(t){var e=new N3,r=bt.internal.getHeight(t)||0,n=bt.internal.getWidth(t)||0;return e.BBox=[0,0,Number($t(n)),Number($t(r))],e},Sz=cn.__acroform__.setBit=function(t,e){if(t=t||0,e=e||0,isNaN(t)||isNaN(e))throw new Error("Invalid arguments passed to jsPDF.API.__acroform__.setBit");return t|=1<<e},Fz=cn.__acroform__.clearBit=function(t,e){if(t=t||0,e=e||0,isNaN(t)||isNaN(e))throw new Error("Invalid arguments passed to jsPDF.API.__acroform__.clearBit");return t&=~(1<<e)},Tz=cn.__acroform__.getBit=function(t,e){if(isNaN(t)||isNaN(e))throw new Error("Invalid arguments passed to jsPDF.API.__acroform__.getBit");return t&1<<e?1:0},yn=cn.__acroform__.getBitForPdf=function(t,e){if(isNaN(t)||isNaN(e))throw new Error("Invalid arguments passed to jsPDF.API.__acroform__.getBitForPdf");return Tz(t,e-1)},xn=cn.__acroform__.setBitForPdf=function(t,e){if(isNaN(t)||isNaN(e))throw new Error("Invalid arguments passed to jsPDF.API.__acroform__.setBitForPdf");return Sz(t,e-1)},bn=cn.__acroform__.clearBitForPdf=function(t,e){if(isNaN(t)||isNaN(e))throw new Error("Invalid arguments passed to jsPDF.API.__acroform__.clearBitForPdf");return Fz(t,e-1)},Uz=cn.__acroform__.calculateCoordinates=function(t,e){var r=e.internal.getHorizontalCoordinate,n=e.internal.getVerticalCoordinate,s=t[0],i=t[1],a=t[2],o=t[3],l={};return l.lowerLeft_X=r(s)||0,l.lowerLeft_Y=n(i+o)||0,l.upperRight_X=r(s+a)||0,l.upperRight_Y=n(i)||0,[Number($t(l.lowerLeft_X)),Number($t(l.lowerLeft_Y)),Number($t(l.upperRight_X)),Number($t(l.upperRight_Y))]},Pz=function(t){if(t.appearanceStreamContent)return t.appearanceStreamContent;if(t.V||t.DV){var e=[],r=t._V||t.DV,n=ax(t,r),s=t.scope.internal.getFont(t.fontName,t.fontStyle).id;e.push("/Tx BMC"),e.push("q"),e.push("BT"),e.push(t.scope.__private__.encodeColorString(t.color)),e.push("/"+s+" "+$t(n.fontSize)+" Tf"),e.push("1 0 0 1 0 0 Tm"),e.push(n.text),e.push("ET"),e.push("Q"),e.push("EMC");var i=Ta(t);return i.scope=t.scope,i.stream=e.join(`
`),i}},ax=function(t,e){var r=t.fontSize===0?t.maxFontSize:t.fontSize,n={text:"",fontSize:""},s=(e=(e=e.substr(0,1)=="("?e.substr(1):e).substr(e.length-1)==")"?e.substr(0,e.length-1):e).split(" ");s=t.multiline?s.map(function(N){return N.split(`
`)}):s.map(function(N){return[N]});var i=r,a=bt.internal.getHeight(t)||0;a=a<0?-a:a;var o=bt.internal.getWidth(t)||0;o=o<0?-o:o;var l=function(N,T,F){if(N+1<s.length){var ee=T+" "+s[N+1][0];return hg(ee,t,F).width<=o-4}return!1};i++;e:for(;i>0;){e="",i--;var c,u,f=hg("3",t,i).height,p=t.multiline?a-i:(a-f)/2,m=p+=2,b=0,B=0,_=0;if(i<=0){e=`(...) Tj
`,e+="% Width of Text: "+hg(e,t,i=12).width+", FieldWidth:"+o+`
`;break}for(var w="",y=0,S=0;S<s.length;S++)if(s.hasOwnProperty(S)){var O=!1;if(s[S].length!==1&&_!==s[S].length-1){if((f+2)*(y+2)+2>a)continue e;w+=s[S][_],O=!0,B=S,S--}else{w=(w+=s[S][_]+" ").substr(w.length-1)==" "?w.substr(0,w.length-1):w;var R=parseInt(S),M=l(R,w,i),I=S>=s.length-1;if(M&&!I){w+=" ",_=0;continue}if(M||I){if(I)B=R;else if(t.multiline&&(f+2)*(y+2)+2>a)continue e}else{if(!t.multiline||(f+2)*(y+2)+2>a)continue e;B=R}}for(var E="",L=b;L<=B;L++){var D=s[L];if(t.multiline){if(L===B){E+=D[_]+" ",_=(_+1)%D.length;continue}if(L===b){E+=D[D.length-1]+" ";continue}}E+=D[0]+" "}switch(E=E.substr(E.length-1)==" "?E.substr(0,E.length-1):E,u=hg(E,t,i).width,t.textAlign){case"right":c=o-u-2;break;case"center":c=(o-u)/2;break;case"left":default:c=2}e+=$t(c)+" "+$t(m)+` Td
`,e+="("+Wc(E)+`) Tj
`,e+=-$t(c)+` 0 Td
`,m=-(i+2),u=0,b=O?B:B+1,y++,w=""}break}return n.text=e,n.fontSize=i,n},hg=function(t,e,r){var n=e.scope.internal.getFont(e.fontName,e.fontStyle),s=e.scope.getStringUnitWidth(t,{font:n,fontSize:parseFloat(r),charSpace:0})*parseFloat(r);return{height:e.scope.getStringUnitWidth("3",{font:n,fontSize:parseFloat(r),charSpace:0})*parseFloat(r)*1.5,width:s}},Qz={fields:[],xForms:[],acroFormDictionaryRoot:null,printedOut:!1,internal:null,isInitialized:!1},Lz=function(t,e){var r={type:"reference",object:t};e.internal.getPageInfo(t.page).pageContext.annotations.find(function(n){return n.type===r.type&&n.object===r.object})===void 0&&e.internal.getPageInfo(t.page).pageContext.annotations.push(r)},jz=function(t,e){for(var r in t)if(t.hasOwnProperty(r)){var n=r,s=t[r];e.internal.newObjectDeferredBegin(s.objId,!0),Nr(s)==="object"&&typeof s.putStream=="function"&&s.putStream(),delete t[n]}},kz=function(t,e){if(e.scope=t,t.internal!==void 0&&(t.internal.acroformPlugin===void 0||t.internal.acroformPlugin.isInitialized===!1)){if(fa.FieldNum=0,t.internal.acroformPlugin=JSON.parse(JSON.stringify(Qz)),t.internal.acroformPlugin.acroFormDictionaryRoot)throw new Error("Exception while creating AcroformDictionary");EB=t.internal.scaleFactor,t.internal.acroformPlugin.acroFormDictionaryRoot=new I3,t.internal.acroformPlugin.acroFormDictionaryRoot.scope=t,t.internal.acroformPlugin.acroFormDictionaryRoot._eventID=t.internal.events.subscribe("postPutResources",function(){(function(r){r.internal.events.unsubscribe(r.internal.acroformPlugin.acroFormDictionaryRoot._eventID),delete r.internal.acroformPlugin.acroFormDictionaryRoot._eventID,r.internal.acroformPlugin.printedOut=!0})(t)}),t.internal.events.subscribe("buildDocument",function(){(function(r){r.internal.acroformPlugin.acroFormDictionaryRoot.objId=void 0;var n=r.internal.acroformPlugin.acroFormDictionaryRoot.Fields;for(var s in n)if(n.hasOwnProperty(s)){var i=n[s];i.objId=void 0,i.hasAnnotation&&Lz(i,r)}})(t)}),t.internal.events.subscribe("putCatalog",function(){(function(r){if(r.internal.acroformPlugin.acroFormDictionaryRoot===void 0)throw new Error("putCatalogCallback: Root missing.");r.internal.write("/AcroForm "+r.internal.acroformPlugin.acroFormDictionaryRoot.objId+" 0 R")})(t)}),t.internal.events.subscribe("postPutPages",function(r){(function(n,s){var i=!n;for(var a in n||(s.internal.newObjectDeferredBegin(s.internal.acroformPlugin.acroFormDictionaryRoot.objId,!0),s.internal.acroformPlugin.acroFormDictionaryRoot.putStream()),n=n||s.internal.acroformPlugin.acroFormDictionaryRoot.Kids)if(n.hasOwnProperty(a)){var o=n[a],l=[],c=o.Rect;if(o.Rect&&(o.Rect=Uz(o.Rect,s)),s.internal.newObjectDeferredBegin(o.objId,!0),o.DA=bt.createDefaultAppearanceStream(o),Nr(o)==="object"&&typeof o.getKeyValueListForStream=="function"&&(l=o.getKeyValueListForStream()),o.Rect=c,o.hasAppearanceStream&&!o.appearanceStreamContent){var u=Pz(o);l.push({key:"AP",value:"<</N "+u+">>"}),s.internal.acroformPlugin.xForms.push(u)}if(o.appearanceStreamContent){var f="";for(var p in o.appearanceStreamContent)if(o.appearanceStreamContent.hasOwnProperty(p)){var m=o.appearanceStreamContent[p];if(f+="/"+p+" ",f+="<<",Object.keys(m).length>=1||Array.isArray(m)){for(var a in m)if(m.hasOwnProperty(a)){var b=m[a];typeof b=="function"&&(b=b.call(s,o)),f+="/"+a+" "+b+" ",s.internal.acroformPlugin.xForms.indexOf(b)>=0||s.internal.acroformPlugin.xForms.push(b)}}else typeof(b=m)=="function"&&(b=b.call(s,o)),f+="/"+a+" "+b,s.internal.acroformPlugin.xForms.indexOf(b)>=0||s.internal.acroformPlugin.xForms.push(b);f+=">>"}l.push({key:"AP",value:`<<
`+f+">>"})}s.internal.putStream({additionalKeyValues:l,objectId:o.objId}),s.internal.out("endobj")}i&&jz(s.internal.acroformPlugin.xForms,s)})(r,t)}),t.internal.acroformPlugin.isInitialized=!0}},_3=cn.__acroform__.arrayToPdfArray=function(t,e,r){var n=function(a){return a};if(Array.isArray(t)){for(var s="[",i=0;i<t.length;i++)switch(i!==0&&(s+=" "),Nr(t[i])){case"boolean":case"number":case"object":s+=t[i].toString();break;case"string":t[i].substr(0,1)!=="/"?(e!==void 0&&r&&(n=r.internal.getEncryptor(e)),s+="("+Wc(n(t[i].toString()))+")"):s+=t[i].toString()}return s+="]"}throw new Error("Invalid argument passed to jsPDF.__acroform__.arrayToPdfArray")},Wy=function(t,e,r){var n=function(s){return s};return e!==void 0&&r&&(n=r.internal.getEncryptor(e)),(t=t||"").toString(),t="("+Wc(n(t))+")"},ka=function(){this._objId=void 0,this._scope=void 0,Object.defineProperty(this,"objId",{get:function(){if(this._objId===void 0){if(this.scope===void 0)return;this._objId=this.scope.internal.newObjectDeferred()}return this._objId},set:function(t){this._objId=t}}),Object.defineProperty(this,"scope",{value:this._scope,writable:!0})};ka.prototype.toString=function(){return this.objId+" 0 R"},ka.prototype.putStream=function(){var t=this.getKeyValueListForStream();this.scope.internal.putStream({data:this.stream,additionalKeyValues:t,objectId:this.objId}),this.scope.internal.out("endobj")},ka.prototype.getKeyValueListForStream=function(){var t=[],e=Object.getOwnPropertyNames(this).filter(function(i){return i!="content"&&i!="appearanceStreamContent"&&i!="scope"&&i!="objId"&&i.substring(0,1)!="_"});for(var r in e)if(Object.getOwnPropertyDescriptor(this,e[r]).configurable===!1){var n=e[r],s=this[n];s&&(Array.isArray(s)?t.push({key:n,value:_3(s,this.objId,this.scope)}):s instanceof ka?(s.scope=this.scope,t.push({key:n,value:s.objId+" 0 R"})):typeof s!="function"&&t.push({key:n,value:s}))}return t};var N3=function(){ka.call(this),Object.defineProperty(this,"Type",{value:"/XObject",configurable:!1,writable:!0}),Object.defineProperty(this,"Subtype",{value:"/Form",configurable:!1,writable:!0}),Object.defineProperty(this,"FormType",{value:1,configurable:!1,writable:!0});var t,e=[];Object.defineProperty(this,"BBox",{configurable:!1,get:function(){return e},set:function(r){e=r}}),Object.defineProperty(this,"Resources",{value:"2 0 R",configurable:!1,writable:!0}),Object.defineProperty(this,"stream",{enumerable:!1,configurable:!0,set:function(r){t=r.trim()},get:function(){return t||null}})};Js(N3,ka);var I3=function(){ka.call(this);var t,e=[];Object.defineProperty(this,"Kids",{enumerable:!1,configurable:!0,get:function(){return e.length>0?e:void 0}}),Object.defineProperty(this,"Fields",{enumerable:!1,configurable:!1,get:function(){return e}}),Object.defineProperty(this,"DA",{enumerable:!1,configurable:!1,get:function(){if(t){var r=function(n){return n};return this.scope&&(r=this.scope.internal.getEncryptor(this.objId)),"("+Wc(r(t))+")"}},set:function(r){t=r}})};Js(I3,ka);var fa=function t(){ka.call(this);var e=4;Object.defineProperty(this,"F",{enumerable:!1,configurable:!1,get:function(){return e},set:function(w){if(isNaN(w))throw new Error('Invalid value "'+w+'" for attribute F supplied.');e=w}}),Object.defineProperty(this,"showWhenPrinted",{enumerable:!0,configurable:!0,get:function(){return!!yn(e,3)},set:function(w){w?this.F=xn(e,3):this.F=bn(e,3)}});var r=0;Object.defineProperty(this,"Ff",{enumerable:!1,configurable:!1,get:function(){return r},set:function(w){if(isNaN(w))throw new Error('Invalid value "'+w+'" for attribute Ff supplied.');r=w}});var n=[];Object.defineProperty(this,"Rect",{enumerable:!1,configurable:!1,get:function(){if(n.length!==0)return n},set:function(w){n=w!==void 0?w:[]}}),Object.defineProperty(this,"x",{enumerable:!0,configurable:!0,get:function(){return!n||isNaN(n[0])?0:n[0]},set:function(w){n[0]=w}}),Object.defineProperty(this,"y",{enumerable:!0,configurable:!0,get:function(){return!n||isNaN(n[1])?0:n[1]},set:function(w){n[1]=w}}),Object.defineProperty(this,"width",{enumerable:!0,configurable:!0,get:function(){return!n||isNaN(n[2])?0:n[2]},set:function(w){n[2]=w}}),Object.defineProperty(this,"height",{enumerable:!0,configurable:!0,get:function(){return!n||isNaN(n[3])?0:n[3]},set:function(w){n[3]=w}});var s="";Object.defineProperty(this,"FT",{enumerable:!0,configurable:!1,get:function(){return s},set:function(w){switch(w){case"/Btn":case"/Tx":case"/Ch":case"/Sig":s=w;break;default:throw new Error('Invalid value "'+w+'" for attribute FT supplied.')}}});var i=null;Object.defineProperty(this,"T",{enumerable:!0,configurable:!1,get:function(){if(!i||i.length<1){if(this instanceof nv)return;i="FieldObject"+t.FieldNum++}var w=function(y){return y};return this.scope&&(w=this.scope.internal.getEncryptor(this.objId)),"("+Wc(w(i))+")"},set:function(w){i=w.toString()}}),Object.defineProperty(this,"fieldName",{configurable:!0,enumerable:!0,get:function(){return i},set:function(w){i=w}});var a="helvetica";Object.defineProperty(this,"fontName",{enumerable:!0,configurable:!0,get:function(){return a},set:function(w){a=w}});var o="normal";Object.defineProperty(this,"fontStyle",{enumerable:!0,configurable:!0,get:function(){return o},set:function(w){o=w}});var l=0;Object.defineProperty(this,"fontSize",{enumerable:!0,configurable:!0,get:function(){return l},set:function(w){l=w}});var c=void 0;Object.defineProperty(this,"maxFontSize",{enumerable:!0,configurable:!0,get:function(){return c===void 0?50/EB:c},set:function(w){c=w}});var u="black";Object.defineProperty(this,"color",{enumerable:!0,configurable:!0,get:function(){return u},set:function(w){u=w}});var f="/F1 0 Tf 0 g";Object.defineProperty(this,"DA",{enumerable:!0,configurable:!1,get:function(){if(!(!f||this instanceof nv||this instanceof ul))return Wy(f,this.objId,this.scope)},set:function(w){w=w.toString(),f=w}});var p=null;Object.defineProperty(this,"DV",{enumerable:!1,configurable:!1,get:function(){if(p)return this instanceof Pn?p:Wy(p,this.objId,this.scope)},set:function(w){w=w.toString(),p=this instanceof Pn?w:w.substr(0,1)==="("?Uu(w.substr(1,w.length-2)):Uu(w)}}),Object.defineProperty(this,"defaultValue",{enumerable:!0,configurable:!0,get:function(){return this instanceof Pn?Uu(p.substr(1,p.length-1)):p},set:function(w){w=w.toString(),p=this instanceof Pn?"/"+w:w}});var m=null;Object.defineProperty(this,"_V",{enumerable:!1,configurable:!1,get:function(){if(m)return m},set:function(w){this.V=w}}),Object.defineProperty(this,"V",{enumerable:!1,configurable:!1,get:function(){if(m)return this instanceof Pn?m:Wy(m,this.objId,this.scope)},set:function(w){w=w.toString(),m=this instanceof Pn?w:w.substr(0,1)==="("?Uu(w.substr(1,w.length-2)):Uu(w)}}),Object.defineProperty(this,"value",{enumerable:!0,configurable:!0,get:function(){return this instanceof Pn?Uu(m.substr(1,m.length-1)):m},set:function(w){w=w.toString(),m=this instanceof Pn?"/"+w:w}}),Object.defineProperty(this,"hasAnnotation",{enumerable:!0,configurable:!0,get:function(){return this.Rect}}),Object.defineProperty(this,"Type",{enumerable:!0,configurable:!1,get:function(){return this.hasAnnotation?"/Annot":null}}),Object.defineProperty(this,"Subtype",{enumerable:!0,configurable:!1,get:function(){return this.hasAnnotation?"/Widget":null}});var b,B=!1;Object.defineProperty(this,"hasAppearanceStream",{enumerable:!0,configurable:!0,get:function(){return B},set:function(w){w=!!w,B=w}}),Object.defineProperty(this,"page",{enumerable:!0,configurable:!0,get:function(){if(b)return b},set:function(w){b=w}}),Object.defineProperty(this,"readOnly",{enumerable:!0,configurable:!0,get:function(){return!!yn(this.Ff,1)},set:function(w){w?this.Ff=xn(this.Ff,1):this.Ff=bn(this.Ff,1)}}),Object.defineProperty(this,"required",{enumerable:!0,configurable:!0,get:function(){return!!yn(this.Ff,2)},set:function(w){w?this.Ff=xn(this.Ff,2):this.Ff=bn(this.Ff,2)}}),Object.defineProperty(this,"noExport",{enumerable:!0,configurable:!0,get:function(){return!!yn(this.Ff,3)},set:function(w){w?this.Ff=xn(this.Ff,3):this.Ff=bn(this.Ff,3)}});var _=null;Object.defineProperty(this,"Q",{enumerable:!0,configurable:!1,get:function(){if(_!==null)return _},set:function(w){if([0,1,2].indexOf(w)===-1)throw new Error('Invalid value "'+w+'" for attribute Q supplied.');_=w}}),Object.defineProperty(this,"textAlign",{get:function(){var w;switch(_){case 0:default:w="left";break;case 1:w="center";break;case 2:w="right"}return w},configurable:!0,enumerable:!0,set:function(w){switch(w){case"right":case 2:_=2;break;case"center":case 1:_=1;break;case"left":case 0:default:_=0}}})};Js(fa,ka);var Bc=function(){fa.call(this),this.FT="/Ch",this.V="()",this.fontName="zapfdingbats";var t=0;Object.defineProperty(this,"TI",{enumerable:!0,configurable:!1,get:function(){return t},set:function(r){t=r}}),Object.defineProperty(this,"topIndex",{enumerable:!0,configurable:!0,get:function(){return t},set:function(r){t=r}});var e=[];Object.defineProperty(this,"Opt",{enumerable:!0,configurable:!1,get:function(){return _3(e,this.objId,this.scope)},set:function(r){var n,s;s=[],typeof(n=r)=="string"&&(s=function(i,a,o){o||(o=1);for(var l,c=[];l=a.exec(i);)c.push(l[o]);return c}(n,/\((.*?)\)/g)),e=s}}),this.getOptions=function(){return e},this.setOptions=function(r){e=r,this.sort&&e.sort()},this.addOption=function(r){r=(r=r||"").toString(),e.push(r),this.sort&&e.sort()},this.removeOption=function(r,n){for(n=n||!1,r=(r=r||"").toString();e.indexOf(r)!==-1&&(e.splice(e.indexOf(r),1),n!==!1););},Object.defineProperty(this,"combo",{enumerable:!0,configurable:!0,get:function(){return!!yn(this.Ff,18)},set:function(r){r?this.Ff=xn(this.Ff,18):this.Ff=bn(this.Ff,18)}}),Object.defineProperty(this,"edit",{enumerable:!0,configurable:!0,get:function(){return!!yn(this.Ff,19)},set:function(r){this.combo===!0&&(r?this.Ff=xn(this.Ff,19):this.Ff=bn(this.Ff,19))}}),Object.defineProperty(this,"sort",{enumerable:!0,configurable:!0,get:function(){return!!yn(this.Ff,20)},set:function(r){r?(this.Ff=xn(this.Ff,20),e.sort()):this.Ff=bn(this.Ff,20)}}),Object.defineProperty(this,"multiSelect",{enumerable:!0,configurable:!0,get:function(){return!!yn(this.Ff,22)},set:function(r){r?this.Ff=xn(this.Ff,22):this.Ff=bn(this.Ff,22)}}),Object.defineProperty(this,"doNotSpellCheck",{enumerable:!0,configurable:!0,get:function(){return!!yn(this.Ff,23)},set:function(r){r?this.Ff=xn(this.Ff,23):this.Ff=bn(this.Ff,23)}}),Object.defineProperty(this,"commitOnSelChange",{enumerable:!0,configurable:!0,get:function(){return!!yn(this.Ff,27)},set:function(r){r?this.Ff=xn(this.Ff,27):this.Ff=bn(this.Ff,27)}}),this.hasAppearanceStream=!1};Js(Bc,fa);var Cc=function(){Bc.call(this),this.fontName="helvetica",this.combo=!1};Js(Cc,Bc);var Ec=function(){Cc.call(this),this.combo=!0};Js(Ec,Cc);var Uf=function(){Ec.call(this),this.edit=!0};Js(Uf,Ec);var Pn=function(){fa.call(this),this.FT="/Btn",Object.defineProperty(this,"noToggleToOff",{enumerable:!0,configurable:!0,get:function(){return!!yn(this.Ff,15)},set:function(r){r?this.Ff=xn(this.Ff,15):this.Ff=bn(this.Ff,15)}}),Object.defineProperty(this,"radio",{enumerable:!0,configurable:!0,get:function(){return!!yn(this.Ff,16)},set:function(r){r?this.Ff=xn(this.Ff,16):this.Ff=bn(this.Ff,16)}}),Object.defineProperty(this,"pushButton",{enumerable:!0,configurable:!0,get:function(){return!!yn(this.Ff,17)},set:function(r){r?this.Ff=xn(this.Ff,17):this.Ff=bn(this.Ff,17)}}),Object.defineProperty(this,"radioIsUnison",{enumerable:!0,configurable:!0,get:function(){return!!yn(this.Ff,26)},set:function(r){r?this.Ff=xn(this.Ff,26):this.Ff=bn(this.Ff,26)}});var t,e={};Object.defineProperty(this,"MK",{enumerable:!1,configurable:!1,get:function(){var r=function(i){return i};if(this.scope&&(r=this.scope.internal.getEncryptor(this.objId)),Object.keys(e).length!==0){var n,s=[];for(n in s.push("<<"),e)s.push("/"+n+" ("+Wc(r(e[n]))+")");return s.push(">>"),s.join(`
`)}},set:function(r){Nr(r)==="object"&&(e=r)}}),Object.defineProperty(this,"caption",{enumerable:!0,configurable:!0,get:function(){return e.CA||""},set:function(r){typeof r=="string"&&(e.CA=r)}}),Object.defineProperty(this,"AS",{enumerable:!1,configurable:!1,get:function(){return t},set:function(r){t=r}}),Object.defineProperty(this,"appearanceState",{enumerable:!0,configurable:!0,get:function(){return t.substr(1,t.length-1)},set:function(r){t="/"+r}})};Js(Pn,fa);var Pf=function(){Pn.call(this),this.pushButton=!0};Js(Pf,Pn);var _c=function(){Pn.call(this),this.radio=!0,this.pushButton=!1;var t=[];Object.defineProperty(this,"Kids",{enumerable:!0,configurable:!1,get:function(){return t},set:function(e){t=e!==void 0?e:[]}})};Js(_c,Pn);var nv=function(){var t,e;fa.call(this),Object.defineProperty(this,"Parent",{enumerable:!1,configurable:!1,get:function(){return t},set:function(s){t=s}}),Object.defineProperty(this,"optionName",{enumerable:!1,configurable:!0,get:function(){return e},set:function(s){e=s}});var r,n={};Object.defineProperty(this,"MK",{enumerable:!1,configurable:!1,get:function(){var s=function(o){return o};this.scope&&(s=this.scope.internal.getEncryptor(this.objId));var i,a=[];for(i in a.push("<<"),n)a.push("/"+i+" ("+Wc(s(n[i]))+")");return a.push(">>"),a.join(`
`)},set:function(s){Nr(s)==="object"&&(n=s)}}),Object.defineProperty(this,"caption",{enumerable:!0,configurable:!0,get:function(){return n.CA||""},set:function(s){typeof s=="string"&&(n.CA=s)}}),Object.defineProperty(this,"AS",{enumerable:!1,configurable:!1,get:function(){return r},set:function(s){r=s}}),Object.defineProperty(this,"appearanceState",{enumerable:!0,configurable:!0,get:function(){return r.substr(1,r.length-1)},set:function(s){r="/"+s}}),this.caption="l",this.appearanceState="Off",this._AppearanceType=bt.RadioButton.Circle,this.appearanceStreamContent=this._AppearanceType.createAppearanceStream(this.optionName)};Js(nv,fa),_c.prototype.setAppearance=function(t){if(!("createAppearanceStream"in t)||!("getCA"in t))throw new Error("Couldn't assign Appearance to RadioButton. Appearance was Invalid!");for(var e in this.Kids)if(this.Kids.hasOwnProperty(e)){var r=this.Kids[e];r.appearanceStreamContent=t.createAppearanceStream(r.optionName),r.caption=t.getCA()}},_c.prototype.createOption=function(t){var e=new nv;return e.Parent=this,e.optionName=t,this.Kids.push(e),Dz.call(this.scope,e),e};var Qf=function(){Pn.call(this),this.fontName="zapfdingbats",this.caption="3",this.appearanceState="On",this.value="On",this.textAlign="center",this.appearanceStreamContent=bt.CheckBox.createAppearanceStream()};Js(Qf,Pn);var ul=function(){fa.call(this),this.FT="/Tx",Object.defineProperty(this,"multiline",{enumerable:!0,configurable:!0,get:function(){return!!yn(this.Ff,13)},set:function(e){e?this.Ff=xn(this.Ff,13):this.Ff=bn(this.Ff,13)}}),Object.defineProperty(this,"fileSelect",{enumerable:!0,configurable:!0,get:function(){return!!yn(this.Ff,21)},set:function(e){e?this.Ff=xn(this.Ff,21):this.Ff=bn(this.Ff,21)}}),Object.defineProperty(this,"doNotSpellCheck",{enumerable:!0,configurable:!0,get:function(){return!!yn(this.Ff,23)},set:function(e){e?this.Ff=xn(this.Ff,23):this.Ff=bn(this.Ff,23)}}),Object.defineProperty(this,"doNotScroll",{enumerable:!0,configurable:!0,get:function(){return!!yn(this.Ff,24)},set:function(e){e?this.Ff=xn(this.Ff,24):this.Ff=bn(this.Ff,24)}}),Object.defineProperty(this,"comb",{enumerable:!0,configurable:!0,get:function(){return!!yn(this.Ff,25)},set:function(e){e?this.Ff=xn(this.Ff,25):this.Ff=bn(this.Ff,25)}}),Object.defineProperty(this,"richText",{enumerable:!0,configurable:!0,get:function(){return!!yn(this.Ff,26)},set:function(e){e?this.Ff=xn(this.Ff,26):this.Ff=bn(this.Ff,26)}});var t=null;Object.defineProperty(this,"MaxLen",{enumerable:!0,configurable:!1,get:function(){return t},set:function(e){t=e}}),Object.defineProperty(this,"maxLength",{enumerable:!0,configurable:!0,get:function(){return t},set:function(e){Number.isInteger(e)&&(t=e)}}),Object.defineProperty(this,"hasAppearanceStream",{enumerable:!0,configurable:!0,get:function(){return this.V||this.DV}})};Js(ul,fa);var Lf=function(){ul.call(this),Object.defineProperty(this,"password",{enumerable:!0,configurable:!0,get:function(){return!!yn(this.Ff,14)},set:function(t){t?this.Ff=xn(this.Ff,14):this.Ff=bn(this.Ff,14)}}),this.password=!0};Js(Lf,ul);var bt={CheckBox:{createAppearanceStream:function(){return{N:{On:bt.CheckBox.YesNormal},D:{On:bt.CheckBox.YesPushDown,Off:bt.CheckBox.OffPushDown}}},YesPushDown:function(t){var e=Ta(t);e.scope=t.scope;var r=[],n=t.scope.internal.getFont(t.fontName,t.fontStyle).id,s=t.scope.__private__.encodeColorString(t.color),i=ax(t,t.caption);return r.push("0.749023 g"),r.push("0 0 "+$t(bt.internal.getWidth(t))+" "+$t(bt.internal.getHeight(t))+" re"),r.push("f"),r.push("BMC"),r.push("q"),r.push("0 0 1 rg"),r.push("/"+n+" "+$t(i.fontSize)+" Tf "+s),r.push("BT"),r.push(i.text),r.push("ET"),r.push("Q"),r.push("EMC"),e.stream=r.join(`
`),e},YesNormal:function(t){var e=Ta(t);e.scope=t.scope;var r=t.scope.internal.getFont(t.fontName,t.fontStyle).id,n=t.scope.__private__.encodeColorString(t.color),s=[],i=bt.internal.getHeight(t),a=bt.internal.getWidth(t),o=ax(t,t.caption);return s.push("1 g"),s.push("0 0 "+$t(a)+" "+$t(i)+" re"),s.push("f"),s.push("q"),s.push("0 0 1 rg"),s.push("0 0 "+$t(a-1)+" "+$t(i-1)+" re"),s.push("W"),s.push("n"),s.push("0 g"),s.push("BT"),s.push("/"+r+" "+$t(o.fontSize)+" Tf "+n),s.push(o.text),s.push("ET"),s.push("Q"),e.stream=s.join(`
`),e},OffPushDown:function(t){var e=Ta(t);e.scope=t.scope;var r=[];return r.push("0.749023 g"),r.push("0 0 "+$t(bt.internal.getWidth(t))+" "+$t(bt.internal.getHeight(t))+" re"),r.push("f"),e.stream=r.join(`
`),e}},RadioButton:{Circle:{createAppearanceStream:function(t){var e={D:{Off:bt.RadioButton.Circle.OffPushDown},N:{}};return e.N[t]=bt.RadioButton.Circle.YesNormal,e.D[t]=bt.RadioButton.Circle.YesPushDown,e},getCA:function(){return"l"},YesNormal:function(t){var e=Ta(t);e.scope=t.scope;var r=[],n=bt.internal.getWidth(t)<=bt.internal.getHeight(t)?bt.internal.getWidth(t)/4:bt.internal.getHeight(t)/4;n=Number((.9*n).toFixed(5));var s=bt.internal.Bezier_C,i=Number((n*s).toFixed(5));return r.push("q"),r.push("1 0 0 1 "+IA(bt.internal.getWidth(t)/2)+" "+IA(bt.internal.getHeight(t)/2)+" cm"),r.push(n+" 0 m"),r.push(n+" "+i+" "+i+" "+n+" 0 "+n+" c"),r.push("-"+i+" "+n+" -"+n+" "+i+" -"+n+" 0 c"),r.push("-"+n+" -"+i+" -"+i+" -"+n+" 0 -"+n+" c"),r.push(i+" -"+n+" "+n+" -"+i+" "+n+" 0 c"),r.push("f"),r.push("Q"),e.stream=r.join(`
`),e},YesPushDown:function(t){var e=Ta(t);e.scope=t.scope;var r=[],n=bt.internal.getWidth(t)<=bt.internal.getHeight(t)?bt.internal.getWidth(t)/4:bt.internal.getHeight(t)/4;n=Number((.9*n).toFixed(5));var s=Number((2*n).toFixed(5)),i=Number((s*bt.internal.Bezier_C).toFixed(5)),a=Number((n*bt.internal.Bezier_C).toFixed(5));return r.push("0.749023 g"),r.push("q"),r.push("1 0 0 1 "+IA(bt.internal.getWidth(t)/2)+" "+IA(bt.internal.getHeight(t)/2)+" cm"),r.push(s+" 0 m"),r.push(s+" "+i+" "+i+" "+s+" 0 "+s+" c"),r.push("-"+i+" "+s+" -"+s+" "+i+" -"+s+" 0 c"),r.push("-"+s+" -"+i+" -"+i+" -"+s+" 0 -"+s+" c"),r.push(i+" -"+s+" "+s+" -"+i+" "+s+" 0 c"),r.push("f"),r.push("Q"),r.push("0 g"),r.push("q"),r.push("1 0 0 1 "+IA(bt.internal.getWidth(t)/2)+" "+IA(bt.internal.getHeight(t)/2)+" cm"),r.push(n+" 0 m"),r.push(n+" "+a+" "+a+" "+n+" 0 "+n+" c"),r.push("-"+a+" "+n+" -"+n+" "+a+" -"+n+" 0 c"),r.push("-"+n+" -"+a+" -"+a+" -"+n+" 0 -"+n+" c"),r.push(a+" -"+n+" "+n+" -"+a+" "+n+" 0 c"),r.push("f"),r.push("Q"),e.stream=r.join(`
`),e},OffPushDown:function(t){var e=Ta(t);e.scope=t.scope;var r=[],n=bt.internal.getWidth(t)<=bt.internal.getHeight(t)?bt.internal.getWidth(t)/4:bt.internal.getHeight(t)/4;n=Number((.9*n).toFixed(5));var s=Number((2*n).toFixed(5)),i=Number((s*bt.internal.Bezier_C).toFixed(5));return r.push("0.749023 g"),r.push("q"),r.push("1 0 0 1 "+IA(bt.internal.getWidth(t)/2)+" "+IA(bt.internal.getHeight(t)/2)+" cm"),r.push(s+" 0 m"),r.push(s+" "+i+" "+i+" "+s+" 0 "+s+" c"),r.push("-"+i+" "+s+" -"+s+" "+i+" -"+s+" 0 c"),r.push("-"+s+" -"+i+" -"+i+" -"+s+" 0 -"+s+" c"),r.push(i+" -"+s+" "+s+" -"+i+" "+s+" 0 c"),r.push("f"),r.push("Q"),e.stream=r.join(`
`),e}},Cross:{createAppearanceStream:function(t){var e={D:{Off:bt.RadioButton.Cross.OffPushDown},N:{}};return e.N[t]=bt.RadioButton.Cross.YesNormal,e.D[t]=bt.RadioButton.Cross.YesPushDown,e},getCA:function(){return"8"},YesNormal:function(t){var e=Ta(t);e.scope=t.scope;var r=[],n=bt.internal.calculateCross(t);return r.push("q"),r.push("1 1 "+$t(bt.internal.getWidth(t)-2)+" "+$t(bt.internal.getHeight(t)-2)+" re"),r.push("W"),r.push("n"),r.push($t(n.x1.x)+" "+$t(n.x1.y)+" m"),r.push($t(n.x2.x)+" "+$t(n.x2.y)+" l"),r.push($t(n.x4.x)+" "+$t(n.x4.y)+" m"),r.push($t(n.x3.x)+" "+$t(n.x3.y)+" l"),r.push("s"),r.push("Q"),e.stream=r.join(`
`),e},YesPushDown:function(t){var e=Ta(t);e.scope=t.scope;var r=bt.internal.calculateCross(t),n=[];return n.push("0.749023 g"),n.push("0 0 "+$t(bt.internal.getWidth(t))+" "+$t(bt.internal.getHeight(t))+" re"),n.push("f"),n.push("q"),n.push("1 1 "+$t(bt.internal.getWidth(t)-2)+" "+$t(bt.internal.getHeight(t)-2)+" re"),n.push("W"),n.push("n"),n.push($t(r.x1.x)+" "+$t(r.x1.y)+" m"),n.push($t(r.x2.x)+" "+$t(r.x2.y)+" l"),n.push($t(r.x4.x)+" "+$t(r.x4.y)+" m"),n.push($t(r.x3.x)+" "+$t(r.x3.y)+" l"),n.push("s"),n.push("Q"),e.stream=n.join(`
`),e},OffPushDown:function(t){var e=Ta(t);e.scope=t.scope;var r=[];return r.push("0.749023 g"),r.push("0 0 "+$t(bt.internal.getWidth(t))+" "+$t(bt.internal.getHeight(t))+" re"),r.push("f"),e.stream=r.join(`
`),e}}},createDefaultAppearanceStream:function(t){var e=t.scope.internal.getFont(t.fontName,t.fontStyle).id,r=t.scope.__private__.encodeColorString(t.color);return"/"+e+" "+t.fontSize+" Tf "+r}};bt.internal={Bezier_C:.551915024494,calculateCross:function(t){var e=bt.internal.getWidth(t),r=bt.internal.getHeight(t),n=Math.min(e,r);return{x1:{x:(e-n)/2,y:(r-n)/2+n},x2:{x:(e-n)/2+n,y:(r-n)/2},x3:{x:(e-n)/2,y:(r-n)/2},x4:{x:(e-n)/2+n,y:(r-n)/2+n}}}},bt.internal.getWidth=function(t){var e=0;return Nr(t)==="object"&&(e=dN(t.Rect[2])),e},bt.internal.getHeight=function(t){var e=0;return Nr(t)==="object"&&(e=dN(t.Rect[3])),e};var Dz=cn.addField=function(t){if(kz(this,t),!(t instanceof fa))throw new Error("Invalid argument passed to jsPDF.addField.");var e;return(e=t).scope.internal.acroformPlugin.printedOut&&(e.scope.internal.acroformPlugin.printedOut=!1,e.scope.internal.acroformPlugin.acroFormDictionaryRoot=null),e.scope.internal.acroformPlugin.acroFormDictionaryRoot.Fields.push(e),t.page=t.scope.internal.getCurrentPageInfo().pageNumber,this};cn.AcroFormChoiceField=Bc,cn.AcroFormListBox=Cc,cn.AcroFormComboBox=Ec,cn.AcroFormEditBox=Uf,cn.AcroFormButton=Pn,cn.AcroFormPushButton=Pf,cn.AcroFormRadioButton=_c,cn.AcroFormCheckBox=Qf,cn.AcroFormTextField=ul,cn.AcroFormPasswordField=Lf,cn.AcroFormAppearance=bt,cn.AcroForm={ChoiceField:Bc,ListBox:Cc,ComboBox:Ec,EditBox:Uf,Button:Pn,PushButton:Pf,RadioButton:_c,CheckBox:Qf,TextField:ul,PasswordField:Lf,Appearance:bt},kt.AcroForm={ChoiceField:Bc,ListBox:Cc,ComboBox:Ec,EditBox:Uf,Button:Pn,PushButton:Pf,RadioButton:_c,CheckBox:Qf,TextField:ul,PasswordField:Lf,Appearance:bt};var Rz=kt.AcroForm;function S3(t){return t.reduce(function(e,r,n){return e[r]=n,e},{})}(function(t){t.__addimage__={};var e="UNKNOWN",r={PNG:[[137,80,78,71]],TIFF:[[77,77,0,42],[73,73,42,0]],JPEG:[[255,216,255,224,void 0,void 0,74,70,73,70,0],[255,216,255,225,void 0,void 0,69,120,105,102,0,0],[255,216,255,219],[255,216,255,238]],JPEG2000:[[0,0,0,12,106,80,32,32]],GIF87a:[[71,73,70,56,55,97]],GIF89a:[[71,73,70,56,57,97]],WEBP:[[82,73,70,70,void 0,void 0,void 0,void 0,87,69,66,80]],BMP:[[66,77],[66,65],[67,73],[67,80],[73,67],[80,84]]},n=t.__addimage__.getImageFileTypeByImageData=function(N,T){var F,ee,ce,re,de,W=e;if((T=T||e)==="RGBA"||N.data!==void 0&&N.data instanceof Uint8ClampedArray&&"height"in N&&"width"in N)return"RGBA";if(M(N))for(de in r)for(ce=r[de],F=0;F<ce.length;F+=1){for(re=!0,ee=0;ee<ce[F].length;ee+=1)if(ce[F][ee]!==void 0&&ce[F][ee]!==N[ee]){re=!1;break}if(re===!0){W=de;break}}else for(de in r)for(ce=r[de],F=0;F<ce.length;F+=1){for(re=!0,ee=0;ee<ce[F].length;ee+=1)if(ce[F][ee]!==void 0&&ce[F][ee]!==N.charCodeAt(ee)){re=!1;break}if(re===!0){W=de;break}}return W===e&&T!==e&&(W=T),W},s=function N(T){for(var F=this.internal.write,ee=this.internal.putStream,ce=(0,this.internal.getFilters)();ce.indexOf("FlateEncode")!==-1;)ce.splice(ce.indexOf("FlateEncode"),1);T.objectId=this.internal.newObject();var re=[];if(re.push({key:"Type",value:"/XObject"}),re.push({key:"Subtype",value:"/Image"}),re.push({key:"Width",value:T.width}),re.push({key:"Height",value:T.height}),T.colorSpace===_.INDEXED?re.push({key:"ColorSpace",value:"[/Indexed /DeviceRGB "+(T.palette.length/3-1)+" "+("sMask"in T&&T.sMask!==void 0?T.objectId+2:T.objectId+1)+" 0 R]"}):(re.push({key:"ColorSpace",value:"/"+T.colorSpace}),T.colorSpace===_.DEVICE_CMYK&&re.push({key:"Decode",value:"[1 0 1 0 1 0 1 0]"})),re.push({key:"BitsPerComponent",value:T.bitsPerComponent}),"decodeParameters"in T&&T.decodeParameters!==void 0&&re.push({key:"DecodeParms",value:"<<"+T.decodeParameters+">>"}),"transparency"in T&&Array.isArray(T.transparency)){for(var de="",W=0,ue=T.transparency.length;W<ue;W++)de+=T.transparency[W]+" "+T.transparency[W]+" ";re.push({key:"Mask",value:"["+de+"]"})}T.sMask!==void 0&&re.push({key:"SMask",value:T.objectId+1+" 0 R"});var ae=T.filter!==void 0?["/"+T.filter]:void 0;if(ee({data:T.data,additionalKeyValues:re,alreadyAppliedFilters:ae,objectId:T.objectId}),F("endobj"),"sMask"in T&&T.sMask!==void 0){var Ee="/Predictor "+T.predictor+" /Colors 1 /BitsPerComponent "+T.bitsPerComponent+" /Columns "+T.width,Q={width:T.width,height:T.height,colorSpace:"DeviceGray",bitsPerComponent:T.bitsPerComponent,decodeParameters:Ee,data:T.sMask};"filter"in T&&(Q.filter=T.filter),N.call(this,Q)}if(T.colorSpace===_.INDEXED){var k=this.internal.newObject();ee({data:E(new Uint8Array(T.palette)),objectId:k}),F("endobj")}},i=function(){var N=this.internal.collections.addImage_images;for(var T in N)s.call(this,N[T])},a=function(){var N,T=this.internal.collections.addImage_images,F=this.internal.write;for(var ee in T)F("/I"+(N=T[ee]).index,N.objectId,"0","R")},o=function(){this.internal.collections.addImage_images||(this.internal.collections.addImage_images={},this.internal.events.subscribe("putResources",i),this.internal.events.subscribe("putXobjectDict",a))},l=function(){var N=this.internal.collections.addImage_images;return o.call(this),N},c=function(){return Object.keys(this.internal.collections.addImage_images).length},u=function(N){return typeof t["process"+N.toUpperCase()]=="function"},f=function(N){return Nr(N)==="object"&&N.nodeType===1},p=function(N,T){if(N.nodeName==="IMG"&&N.hasAttribute("src")){var F=""+N.getAttribute("src");if(F.indexOf("data:image/")===0)return Tf(unescape(F).split("base64,").pop());var ee=t.loadFile(F,!0);if(ee!==void 0)return ee}if(N.nodeName==="CANVAS"){if(N.width===0||N.height===0)throw new Error("Given canvas must have data. Canvas width: "+N.width+", height: "+N.height);var ce;switch(T){case"PNG":ce="image/png";break;case"WEBP":ce="image/webp";break;case"JPEG":case"JPG":default:ce="image/jpeg"}return Tf(N.toDataURL(ce,1).split("base64,").pop())}},m=function(N){var T=this.internal.collections.addImage_images;if(T){for(var F in T)if(N===T[F].alias)return T[F]}},b=function(N,T,F){return N||T||(N=-96,T=-96),N<0&&(N=-1*F.width*72/N/this.internal.scaleFactor),T<0&&(T=-1*F.height*72/T/this.internal.scaleFactor),N===0&&(N=T*F.width/F.height),T===0&&(T=N*F.height/F.width),[N,T]},B=function(N,T,F,ee,ce,re){var de=b.call(this,F,ee,ce),W=this.internal.getCoordinateString,ue=this.internal.getVerticalCoordinateString,ae=l.call(this);if(F=de[0],ee=de[1],ae[ce.index]=ce,re){re*=Math.PI/180;var Ee=Math.cos(re),Q=Math.sin(re),k=function(te){return te.toFixed(4)},z=[k(Ee),k(Q),k(-1*Q),k(Ee),0,0,"cm"]}this.internal.write("q"),re?(this.internal.write([1,"0","0",1,W(N),ue(T+ee),"cm"].join(" ")),this.internal.write(z.join(" ")),this.internal.write([W(F),"0","0",W(ee),"0","0","cm"].join(" "))):this.internal.write([W(F),"0","0",W(ee),W(N),ue(T+ee),"cm"].join(" ")),this.isAdvancedAPI()&&this.internal.write([1,0,0,-1,0,0,"cm"].join(" ")),this.internal.write("/I"+ce.index+" Do"),this.internal.write("Q")},_=t.color_spaces={DEVICE_RGB:"DeviceRGB",DEVICE_GRAY:"DeviceGray",DEVICE_CMYK:"DeviceCMYK",CAL_GREY:"CalGray",CAL_RGB:"CalRGB",LAB:"Lab",ICC_BASED:"ICCBased",INDEXED:"Indexed",PATTERN:"Pattern",SEPARATION:"Separation",DEVICE_N:"DeviceN"};t.decode={DCT_DECODE:"DCTDecode",FLATE_DECODE:"FlateDecode",LZW_DECODE:"LZWDecode",JPX_DECODE:"JPXDecode",JBIG2_DECODE:"JBIG2Decode",ASCII85_DECODE:"ASCII85Decode",ASCII_HEX_DECODE:"ASCIIHexDecode",RUN_LENGTH_DECODE:"RunLengthDecode",CCITT_FAX_DECODE:"CCITTFaxDecode"};var w=t.image_compression={NONE:"NONE",FAST:"FAST",MEDIUM:"MEDIUM",SLOW:"SLOW"},y=t.__addimage__.sHashCode=function(N){var T,F,ee=0;if(typeof N=="string")for(F=N.length,T=0;T<F;T++)ee=(ee<<5)-ee+N.charCodeAt(T),ee|=0;else if(M(N))for(F=N.byteLength/2,T=0;T<F;T++)ee=(ee<<5)-ee+N[T],ee|=0;return ee},S=t.__addimage__.validateStringAsBase64=function(N){(N=N||"").toString().trim();var T=!0;return N.length===0&&(T=!1),N.length%4!=0&&(T=!1),/^[A-Za-z0-9+/]+$/.test(N.substr(0,N.length-2))===!1&&(T=!1),/^[A-Za-z0-9/][A-Za-z0-9+/]|[A-Za-z0-9+/]=|==$/.test(N.substr(-2))===!1&&(T=!1),T},O=t.__addimage__.extractImageFromDataUrl=function(N){if(N==null||!(N=N.trim()).startsWith("data:"))return null;var T=N.indexOf(",");return T<0?null:N.substring(0,T).trim().endsWith("base64")?N.substring(T+1):null},R=t.__addimage__.supportsArrayBuffer=function(){return typeof ArrayBuffer<"u"&&typeof Uint8Array<"u"};t.__addimage__.isArrayBuffer=function(N){return R()&&N instanceof ArrayBuffer};var M=t.__addimage__.isArrayBufferView=function(N){return R()&&typeof Uint32Array<"u"&&(N instanceof Int8Array||N instanceof Uint8Array||typeof Uint8ClampedArray<"u"&&N instanceof Uint8ClampedArray||N instanceof Int16Array||N instanceof Uint16Array||N instanceof Int32Array||N instanceof Uint32Array||N instanceof Float32Array||N instanceof Float64Array)},I=t.__addimage__.binaryStringToUint8Array=function(N){for(var T=N.length,F=new Uint8Array(T),ee=0;ee<T;ee++)F[ee]=N.charCodeAt(ee);return F},E=t.__addimage__.arrayBufferToBinaryString=function(N){for(var T="",F=M(N)?N:new Uint8Array(N),ee=0;ee<F.length;ee+=8192)T+=String.fromCharCode.apply(null,F.subarray(ee,ee+8192));return T};t.addImage=function(){var N,T,F,ee,ce,re,de,W,ue;if(typeof arguments[1]=="number"?(T=e,F=arguments[1],ee=arguments[2],ce=arguments[3],re=arguments[4],de=arguments[5],W=arguments[6],ue=arguments[7]):(T=arguments[1],F=arguments[2],ee=arguments[3],ce=arguments[4],re=arguments[5],de=arguments[6],W=arguments[7],ue=arguments[8]),Nr(N=arguments[0])==="object"&&!f(N)&&"imageData"in N){var ae=N;N=ae.imageData,T=ae.format||T||e,F=ae.x||F||0,ee=ae.y||ee||0,ce=ae.w||ae.width||ce,re=ae.h||ae.height||re,de=ae.alias||de,W=ae.compression||W,ue=ae.rotation||ae.angle||ue}var Ee=this.internal.getFilters();if(W===void 0&&Ee.indexOf("FlateEncode")!==-1&&(W="SLOW"),isNaN(F)||isNaN(ee))throw new Error("Invalid coordinates passed to jsPDF.addImage");o.call(this);var Q=L.call(this,N,T,de,W);return B.call(this,F,ee,ce,re,Q,ue),this};var L=function(N,T,F,ee){var ce,re,de;if(typeof N=="string"&&n(N)===e){N=unescape(N);var W=D(N,!1);(W!==""||(W=t.loadFile(N,!0))!==void 0)&&(N=W)}if(f(N)&&(N=p(N,T)),T=n(N,T),!u(T))throw new Error("addImage does not support files of type '"+T+"', please ensure that a plugin for '"+T+"' support is added.");if(((de=F)==null||de.length===0)&&(F=function(ue){return typeof ue=="string"||M(ue)?y(ue):M(ue.data)?y(ue.data):null}(N)),(ce=m.call(this,F))||(R()&&(N instanceof Uint8Array||T==="RGBA"||(re=N,N=I(N))),ce=this["process"+T.toUpperCase()](N,c.call(this),F,function(ue){return ue&&typeof ue=="string"&&(ue=ue.toUpperCase()),ue in t.image_compression?ue:w.NONE}(ee),re)),!ce)throw new Error("An unknown error occurred whilst processing the image.");return ce},D=t.__addimage__.convertBase64ToBinaryString=function(N,T){T=typeof T!="boolean"||T;var F,ee="";if(typeof N=="string"){var ce;F=(ce=O(N))!==null&&ce!==void 0?ce:N;try{ee=Tf(F)}catch(re){if(T)throw S(F)?new Error("atob-Error in jsPDF.convertBase64ToBinaryString "+re.message):new Error("Supplied Data is not a valid base64-String jsPDF.convertBase64ToBinaryString ")}}return ee};t.getImageProperties=function(N){var T,F,ee="";if(f(N)&&(N=p(N)),typeof N=="string"&&n(N)===e&&((ee=D(N,!1))===""&&(ee=t.loadFile(N)||""),N=ee),F=n(N),!u(F))throw new Error("addImage does not support files of type '"+F+"', please ensure that a plugin for '"+F+"' support is added.");if(!R()||N instanceof Uint8Array||(N=I(N)),!(T=this["process"+F.toUpperCase()](N)))throw new Error("An unknown error occurred whilst processing the image");return T.fileType=F,T}})(kt.API),function(t){var e=function(r){if(r!==void 0&&r!="")return!0};kt.API.events.push(["addPage",function(r){this.internal.getPageInfo(r.pageNumber).pageContext.annotations=[]}]),t.events.push(["putPage",function(r){for(var n,s,i,a=this.internal.getCoordinateString,o=this.internal.getVerticalCoordinateString,l=this.internal.getPageInfoByObjId(r.objId),c=r.pageContext.annotations,u=!1,f=0;f<c.length&&!u;f++)switch((n=c[f]).type){case"link":(e(n.options.url)||e(n.options.pageNumber))&&(u=!0);break;case"reference":case"text":case"freetext":u=!0}if(u!=0){this.internal.write("/Annots [");for(var p=0;p<c.length;p++){n=c[p];var m=this.internal.pdfEscape,b=this.internal.getEncryptor(r.objId);switch(n.type){case"reference":this.internal.write(" "+n.object.objId+" 0 R ");break;case"text":var B=this.internal.newAdditionalObject(),_=this.internal.newAdditionalObject(),w=this.internal.getEncryptor(B.objId),y=n.title||"Note";i="<</Type /Annot /Subtype /Text "+(s="/Rect ["+a(n.bounds.x)+" "+o(n.bounds.y+n.bounds.h)+" "+a(n.bounds.x+n.bounds.w)+" "+o(n.bounds.y)+"] ")+"/Contents ("+m(w(n.contents))+")",i+=" /Popup "+_.objId+" 0 R",i+=" /P "+l.objId+" 0 R",i+=" /T ("+m(w(y))+") >>",B.content=i;var S=B.objId+" 0 R";i="<</Type /Annot /Subtype /Popup "+(s="/Rect ["+a(n.bounds.x+30)+" "+o(n.bounds.y+n.bounds.h)+" "+a(n.bounds.x+n.bounds.w+30)+" "+o(n.bounds.y)+"] ")+" /Parent "+S,n.open&&(i+=" /Open true"),i+=" >>",_.content=i,this.internal.write(B.objId,"0 R",_.objId,"0 R");break;case"freetext":s="/Rect ["+a(n.bounds.x)+" "+o(n.bounds.y)+" "+a(n.bounds.x+n.bounds.w)+" "+o(n.bounds.y+n.bounds.h)+"] ";var O=n.color||"#000000";i="<</Type /Annot /Subtype /FreeText "+s+"/Contents ("+m(b(n.contents))+")",i+=" /DS(font: Helvetica,sans-serif 12.0pt; text-align:left; color:#"+O+")",i+=" /Border [0 0 0]",i+=" >>",this.internal.write(i);break;case"link":if(n.options.name){var R=this.annotations._nameMap[n.options.name];n.options.pageNumber=R.page,n.options.top=R.y}else n.options.top||(n.options.top=0);if(s="/Rect ["+n.finalBounds.x+" "+n.finalBounds.y+" "+n.finalBounds.w+" "+n.finalBounds.h+"] ",i="",n.options.url)i="<</Type /Annot /Subtype /Link "+s+"/Border [0 0 0] /A <</S /URI /URI ("+m(b(n.options.url))+") >>";else if(n.options.pageNumber)switch(i="<</Type /Annot /Subtype /Link "+s+"/Border [0 0 0] /Dest ["+this.internal.getPageInfo(n.options.pageNumber).objId+" 0 R",n.options.magFactor=n.options.magFactor||"XYZ",n.options.magFactor){case"Fit":i+=" /Fit]";break;case"FitH":i+=" /FitH "+n.options.top+"]";break;case"FitV":n.options.left=n.options.left||0,i+=" /FitV "+n.options.left+"]";break;case"XYZ":default:var M=o(n.options.top);n.options.left=n.options.left||0,n.options.zoom===void 0&&(n.options.zoom=0),i+=" /XYZ "+n.options.left+" "+M+" "+n.options.zoom+"]"}i!=""&&(i+=" >>",this.internal.write(i))}}this.internal.write("]")}}]),t.createAnnotation=function(r){var n=this.internal.getCurrentPageInfo();switch(r.type){case"link":this.link(r.bounds.x,r.bounds.y,r.bounds.w,r.bounds.h,r);break;case"text":case"freetext":n.pageContext.annotations.push(r)}},t.link=function(r,n,s,i,a){var o=this.internal.getCurrentPageInfo(),l=this.internal.getCoordinateString,c=this.internal.getVerticalCoordinateString;o.pageContext.annotations.push({finalBounds:{x:l(r),y:c(n),w:l(r+s),h:c(n+i)},options:a,type:"link"})},t.textWithLink=function(r,n,s,i){var a,o,l=this.getTextWidth(r),c=this.internal.getLineHeight()/this.internal.scaleFactor;if(i.maxWidth!==void 0){o=i.maxWidth;var u=this.splitTextToSize(r,o).length;a=Math.ceil(c*u)}else o=l,a=c;return this.text(r,n,s,i),s+=.2*c,i.align==="center"&&(n-=l/2),i.align==="right"&&(n-=l),this.link(n,s-c,o,a,i),l},t.getTextWidth=function(r){var n=this.internal.getFontSize();return this.getStringUnitWidth(r)*n/this.internal.scaleFactor}}(kt.API),function(t){var e={1569:[65152],1570:[65153,65154],1571:[65155,65156],1572:[65157,65158],1573:[65159,65160],1574:[65161,65162,65163,65164],1575:[65165,65166],1576:[65167,65168,65169,65170],1577:[65171,65172],1578:[65173,65174,65175,65176],1579:[65177,65178,65179,65180],1580:[65181,65182,65183,65184],1581:[65185,65186,65187,65188],1582:[65189,65190,65191,65192],1583:[65193,65194],1584:[65195,65196],1585:[65197,65198],1586:[65199,65200],1587:[65201,65202,65203,65204],1588:[65205,65206,65207,65208],1589:[65209,65210,65211,65212],1590:[65213,65214,65215,65216],1591:[65217,65218,65219,65220],1592:[65221,65222,65223,65224],1593:[65225,65226,65227,65228],1594:[65229,65230,65231,65232],1601:[65233,65234,65235,65236],1602:[65237,65238,65239,65240],1603:[65241,65242,65243,65244],1604:[65245,65246,65247,65248],1605:[65249,65250,65251,65252],1606:[65253,65254,65255,65256],1607:[65257,65258,65259,65260],1608:[65261,65262],1609:[65263,65264,64488,64489],1610:[65265,65266,65267,65268],1649:[64336,64337],1655:[64477],1657:[64358,64359,64360,64361],1658:[64350,64351,64352,64353],1659:[64338,64339,64340,64341],1662:[64342,64343,64344,64345],1663:[64354,64355,64356,64357],1664:[64346,64347,64348,64349],1667:[64374,64375,64376,64377],1668:[64370,64371,64372,64373],1670:[64378,64379,64380,64381],1671:[64382,64383,64384,64385],1672:[64392,64393],1676:[64388,64389],1677:[64386,64387],1678:[64390,64391],1681:[64396,64397],1688:[64394,64395],1700:[64362,64363,64364,64365],1702:[64366,64367,64368,64369],1705:[64398,64399,64400,64401],1709:[64467,64468,64469,64470],1711:[64402,64403,64404,64405],1713:[64410,64411,64412,64413],1715:[64406,64407,64408,64409],1722:[64414,64415],1723:[64416,64417,64418,64419],1726:[64426,64427,64428,64429],1728:[64420,64421],1729:[64422,64423,64424,64425],1733:[64480,64481],1734:[64473,64474],1735:[64471,64472],1736:[64475,64476],1737:[64482,64483],1739:[64478,64479],1740:[64508,64509,64510,64511],1744:[64484,64485,64486,64487],1746:[64430,64431],1747:[64432,64433]},r={65247:{65154:65269,65156:65271,65160:65273,65166:65275},65248:{65154:65270,65156:65272,65160:65274,65166:65276},65165:{65247:{65248:{65258:65010}}},1617:{1612:64606,1613:64607,1614:64608,1615:64609,1616:64610}},n={1612:64606,1613:64607,1614:64608,1615:64609,1616:64610},s=[1570,1571,1573,1575];t.__arabicParser__={};var i=t.__arabicParser__.isInArabicSubstitutionA=function(B){return e[B.charCodeAt(0)]!==void 0},a=t.__arabicParser__.isArabicLetter=function(B){return typeof B=="string"&&/^[\u0600-\u06FF\u0750-\u077F\u08A0-\u08FF\uFB50-\uFDFF\uFE70-\uFEFF]+$/.test(B)},o=t.__arabicParser__.isArabicEndLetter=function(B){return a(B)&&i(B)&&e[B.charCodeAt(0)].length<=2},l=t.__arabicParser__.isArabicAlfLetter=function(B){return a(B)&&s.indexOf(B.charCodeAt(0))>=0};t.__arabicParser__.arabicLetterHasIsolatedForm=function(B){return a(B)&&i(B)&&e[B.charCodeAt(0)].length>=1};var c=t.__arabicParser__.arabicLetterHasFinalForm=function(B){return a(B)&&i(B)&&e[B.charCodeAt(0)].length>=2};t.__arabicParser__.arabicLetterHasInitialForm=function(B){return a(B)&&i(B)&&e[B.charCodeAt(0)].length>=3};var u=t.__arabicParser__.arabicLetterHasMedialForm=function(B){return a(B)&&i(B)&&e[B.charCodeAt(0)].length==4},f=t.__arabicParser__.resolveLigatures=function(B){var _=0,w=r,y="",S=0;for(_=0;_<B.length;_+=1)w[B.charCodeAt(_)]!==void 0?(S++,typeof(w=w[B.charCodeAt(_)])=="number"&&(y+=String.fromCharCode(w),w=r,S=0),_===B.length-1&&(w=r,y+=B.charAt(_-(S-1)),_-=S-1,S=0)):(w=r,y+=B.charAt(_-S),_-=S,S=0);return y};t.__arabicParser__.isArabicDiacritic=function(B){return B!==void 0&&n[B.charCodeAt(0)]!==void 0};var p=t.__arabicParser__.getCorrectForm=function(B,_,w){return a(B)?i(B)===!1?-1:!c(B)||!a(_)&&!a(w)||!a(w)&&o(_)||o(B)&&!a(_)||o(B)&&l(_)||o(B)&&o(_)?0:u(B)&&a(_)&&!o(_)&&a(w)&&c(w)?3:o(B)||!a(w)?1:2:-1},m=function(B){var _=0,w=0,y=0,S="",O="",R="",M=(B=B||"").split("\\s+"),I=[];for(_=0;_<M.length;_+=1){for(I.push(""),w=0;w<M[_].length;w+=1)S=M[_][w],O=M[_][w-1],R=M[_][w+1],a(S)?(y=p(S,O,R),I[_]+=y!==-1?String.fromCharCode(e[S.charCodeAt(0)][y]):S):I[_]+=S;I[_]=f(I[_])}return I.join(" ")},b=t.__arabicParser__.processArabic=t.processArabic=function(){var B,_=typeof arguments[0]=="string"?arguments[0]:arguments[0].text,w=[];if(Array.isArray(_)){var y=0;for(w=[],y=0;y<_.length;y+=1)Array.isArray(_[y])?w.push([m(_[y][0]),_[y][1],_[y][2]]):w.push([m(_[y])]);B=w}else B=m(_);return typeof arguments[0]=="string"?B:(arguments[0].text=B,arguments[0])};t.events.push(["preProcessText",b])}(kt.API),kt.API.autoPrint=function(t){var e;switch((t=t||{}).variant=t.variant||"non-conform",t.variant){case"javascript":this.addJS("print({});");break;case"non-conform":default:this.internal.events.subscribe("postPutResources",function(){e=this.internal.newObject(),this.internal.out("<<"),this.internal.out("/S /Named"),this.internal.out("/Type /Action"),this.internal.out("/N /Print"),this.internal.out(">>"),this.internal.out("endobj")}),this.internal.events.subscribe("putCatalog",function(){this.internal.out("/OpenAction "+e+" 0 R")})}return this},function(t){var e=function(){var r=void 0;Object.defineProperty(this,"pdf",{get:function(){return r},set:function(o){r=o}});var n=150;Object.defineProperty(this,"width",{get:function(){return n},set:function(o){n=isNaN(o)||Number.isInteger(o)===!1||o<0?150:o,this.getContext("2d").pageWrapXEnabled&&(this.getContext("2d").pageWrapX=n+1)}});var s=300;Object.defineProperty(this,"height",{get:function(){return s},set:function(o){s=isNaN(o)||Number.isInteger(o)===!1||o<0?300:o,this.getContext("2d").pageWrapYEnabled&&(this.getContext("2d").pageWrapY=s+1)}});var i=[];Object.defineProperty(this,"childNodes",{get:function(){return i},set:function(o){i=o}});var a={};Object.defineProperty(this,"style",{get:function(){return a},set:function(o){a=o}}),Object.defineProperty(this,"parentNode",{})};e.prototype.getContext=function(r,n){var s;if((r=r||"2d")!=="2d")return null;for(s in n)this.pdf.context2d.hasOwnProperty(s)&&(this.pdf.context2d[s]=n[s]);return this.pdf.context2d._canvas=this,this.pdf.context2d},e.prototype.toDataURL=function(){throw new Error("toDataURL is not implemented.")},t.events.push(["initialized",function(){this.canvas=new e,this.canvas.pdf=this}])}(kt.API),function(t){var e={left:0,top:0,bottom:0,right:0},r=!1,n=function(){this.internal.__cell__===void 0&&(this.internal.__cell__={},this.internal.__cell__.padding=3,this.internal.__cell__.headerFunction=void 0,this.internal.__cell__.margins=Object.assign({},e),this.internal.__cell__.margins.width=this.getPageWidth(),s.call(this))},s=function(){this.internal.__cell__.lastCell=new i,this.internal.__cell__.pages=1},i=function(){var l=arguments[0];Object.defineProperty(this,"x",{enumerable:!0,get:function(){return l},set:function(B){l=B}});var c=arguments[1];Object.defineProperty(this,"y",{enumerable:!0,get:function(){return c},set:function(B){c=B}});var u=arguments[2];Object.defineProperty(this,"width",{enumerable:!0,get:function(){return u},set:function(B){u=B}});var f=arguments[3];Object.defineProperty(this,"height",{enumerable:!0,get:function(){return f},set:function(B){f=B}});var p=arguments[4];Object.defineProperty(this,"text",{enumerable:!0,get:function(){return p},set:function(B){p=B}});var m=arguments[5];Object.defineProperty(this,"lineNumber",{enumerable:!0,get:function(){return m},set:function(B){m=B}});var b=arguments[6];return Object.defineProperty(this,"align",{enumerable:!0,get:function(){return b},set:function(B){b=B}}),this};i.prototype.clone=function(){return new i(this.x,this.y,this.width,this.height,this.text,this.lineNumber,this.align)},i.prototype.toArray=function(){return[this.x,this.y,this.width,this.height,this.text,this.lineNumber,this.align]},t.setHeaderFunction=function(l){return n.call(this),this.internal.__cell__.headerFunction=typeof l=="function"?l:void 0,this},t.getTextDimensions=function(l,c){n.call(this);var u=(c=c||{}).fontSize||this.getFontSize(),f=c.font||this.getFont(),p=c.scaleFactor||this.internal.scaleFactor,m=0,b=0,B=0,_=this;if(!Array.isArray(l)&&typeof l!="string"){if(typeof l!="number")throw new Error("getTextDimensions expects text-parameter to be of type String or type Number or an Array of Strings.");l=String(l)}var w=c.maxWidth;w>0?typeof l=="string"?l=this.splitTextToSize(l,w):Object.prototype.toString.call(l)==="[object Array]"&&(l=l.reduce(function(S,O){return S.concat(_.splitTextToSize(O,w))},[])):l=Array.isArray(l)?l:[l];for(var y=0;y<l.length;y++)m<(B=this.getStringUnitWidth(l[y],{font:f})*u)&&(m=B);return m!==0&&(b=l.length),{w:m/=p,h:Math.max((b*u*this.getLineHeightFactor()-u*(this.getLineHeightFactor()-1))/p,0)}},t.cellAddPage=function(){n.call(this),this.addPage();var l=this.internal.__cell__.margins||e;return this.internal.__cell__.lastCell=new i(l.left,l.top,void 0,void 0),this.internal.__cell__.pages+=1,this};var a=t.cell=function(){var l;l=arguments[0]instanceof i?arguments[0]:new i(arguments[0],arguments[1],arguments[2],arguments[3],arguments[4],arguments[5]),n.call(this);var c=this.internal.__cell__.lastCell,u=this.internal.__cell__.padding,f=this.internal.__cell__.margins||e,p=this.internal.__cell__.tableHeaderRow,m=this.internal.__cell__.printHeaders;return c.lineNumber!==void 0&&(c.lineNumber===l.lineNumber?(l.x=(c.x||0)+(c.width||0),l.y=c.y||0):c.y+c.height+l.height+f.bottom>this.getPageHeight()?(this.cellAddPage(),l.y=f.top,m&&p&&(this.printHeaderRow(l.lineNumber,!0),l.y+=p[0].height)):l.y=c.y+c.height||l.y),l.text[0]!==void 0&&(this.rect(l.x,l.y,l.width,l.height,r===!0?"FD":void 0),l.align==="right"?this.text(l.text,l.x+l.width-u,l.y+u,{align:"right",baseline:"top"}):l.align==="center"?this.text(l.text,l.x+l.width/2,l.y+u,{align:"center",baseline:"top",maxWidth:l.width-u-u}):this.text(l.text,l.x+u,l.y+u,{align:"left",baseline:"top",maxWidth:l.width-u-u})),this.internal.__cell__.lastCell=l,this};t.table=function(l,c,u,f,p){if(n.call(this),!u)throw new Error("No data for PDF table.");var m,b,B,_,w=[],y=[],S=[],O={},R={},M=[],I=[],E=(p=p||{}).autoSize||!1,L=p.printHeaders!==!1,D=p.css&&p.css["font-size"]!==void 0?16*p.css["font-size"]:p.fontSize||12,N=p.margins||Object.assign({width:this.getPageWidth()},e),T=typeof p.padding=="number"?p.padding:3,F=p.headerBackgroundColor||"#c8c8c8",ee=p.headerTextColor||"#000";if(s.call(this),this.internal.__cell__.printHeaders=L,this.internal.__cell__.margins=N,this.internal.__cell__.table_font_size=D,this.internal.__cell__.padding=T,this.internal.__cell__.headerBackgroundColor=F,this.internal.__cell__.headerTextColor=ee,this.setFontSize(D),f==null)y=w=Object.keys(u[0]),S=w.map(function(){return"left"});else if(Array.isArray(f)&&Nr(f[0])==="object")for(w=f.map(function(ae){return ae.name}),y=f.map(function(ae){return ae.prompt||ae.name||""}),S=f.map(function(ae){return ae.align||"left"}),m=0;m<f.length;m+=1)R[f[m].name]=f[m].width*(19.049976/25.4);else Array.isArray(f)&&typeof f[0]=="string"&&(y=w=f,S=w.map(function(){return"left"}));if(E||Array.isArray(f)&&typeof f[0]=="string")for(m=0;m<w.length;m+=1){for(O[_=w[m]]=u.map(function(ae){return ae[_]}),this.setFont(void 0,"bold"),M.push(this.getTextDimensions(y[m],{fontSize:this.internal.__cell__.table_font_size,scaleFactor:this.internal.scaleFactor}).w),b=O[_],this.setFont(void 0,"normal"),B=0;B<b.length;B+=1)M.push(this.getTextDimensions(b[B],{fontSize:this.internal.__cell__.table_font_size,scaleFactor:this.internal.scaleFactor}).w);R[_]=Math.max.apply(null,M)+T+T,M=[]}if(L){var ce={};for(m=0;m<w.length;m+=1)ce[w[m]]={},ce[w[m]].text=y[m],ce[w[m]].align=S[m];var re=o.call(this,ce,R);I=w.map(function(ae){return new i(l,c,R[ae],re,ce[ae].text,void 0,ce[ae].align)}),this.setTableHeaderRow(I),this.printHeaderRow(1,!1)}var de=f.reduce(function(ae,Ee){return ae[Ee.name]=Ee.align,ae},{});for(m=0;m<u.length;m+=1){"rowStart"in p&&p.rowStart instanceof Function&&p.rowStart({row:m,data:u[m]},this);var W=o.call(this,u[m],R);for(B=0;B<w.length;B+=1){var ue=u[m][w[B]];"cellStart"in p&&p.cellStart instanceof Function&&p.cellStart({row:m,col:B,data:ue},this),a.call(this,new i(l,c,R[w[B]],W,ue,m+2,de[w[B]]))}}return this.internal.__cell__.table_x=l,this.internal.__cell__.table_y=c,this};var o=function(l,c){var u=this.internal.__cell__.padding,f=this.internal.__cell__.table_font_size,p=this.internal.scaleFactor;return Object.keys(l).map(function(m){var b=l[m];return this.splitTextToSize(b.hasOwnProperty("text")?b.text:b,c[m]-u-u)},this).map(function(m){return this.getLineHeightFactor()*m.length*f/p+u+u},this).reduce(function(m,b){return Math.max(m,b)},0)};t.setTableHeaderRow=function(l){n.call(this),this.internal.__cell__.tableHeaderRow=l},t.printHeaderRow=function(l,c){if(n.call(this),!this.internal.__cell__.tableHeaderRow)throw new Error("Property tableHeaderRow does not exist.");var u;if(r=!0,typeof this.internal.__cell__.headerFunction=="function"){var f=this.internal.__cell__.headerFunction(this,this.internal.__cell__.pages);this.internal.__cell__.lastCell=new i(f[0],f[1],f[2],f[3],void 0,-1)}this.setFont(void 0,"bold");for(var p=[],m=0;m<this.internal.__cell__.tableHeaderRow.length;m+=1){u=this.internal.__cell__.tableHeaderRow[m].clone(),c&&(u.y=this.internal.__cell__.margins.top||0,p.push(u)),u.lineNumber=l;var b=this.getTextColor();this.setTextColor(this.internal.__cell__.headerTextColor),this.setFillColor(this.internal.__cell__.headerBackgroundColor),a.call(this,u),this.setTextColor(b)}p.length>0&&this.setTableHeaderRow(p),this.setFont(void 0,"normal"),r=!1}}(kt.API);var F3={italic:["italic","oblique","normal"],oblique:["oblique","italic","normal"],normal:["normal","oblique","italic"]},T3=["ultra-condensed","extra-condensed","condensed","semi-condensed","normal","semi-expanded","expanded","extra-expanded","ultra-expanded"],ox=S3(T3),U3=[100,200,300,400,500,600,700,800,900],Mz=S3(U3);function Ax(t){var e=t.family.replace(/"|'/g,"").toLowerCase(),r=function(i){return F3[i=i||"normal"]?i:"normal"}(t.style),n=function(i){if(!i)return 400;if(typeof i=="number")return i>=100&&i<=900&&i%100==0?i:400;if(/^\d00$/.test(i))return parseInt(i);switch(i){case"bold":return 700;case"normal":default:return 400}}(t.weight),s=function(i){return typeof ox[i=i||"normal"]=="number"?i:"normal"}(t.stretch);return{family:e,style:r,weight:n,stretch:s,src:t.src||[],ref:t.ref||{name:e,style:[s,r,n].join(" ")}}}function hN(t,e,r,n){var s;for(s=r;s>=0&&s<e.length;s+=n)if(t[e[s]])return t[e[s]];for(s=r;s>=0&&s<e.length;s-=n)if(t[e[s]])return t[e[s]]}var Oz={"sans-serif":"helvetica",fixed:"courier",monospace:"courier",terminal:"courier",cursive:"times",fantasy:"times",serif:"times"},fN={caption:"times",icon:"times",menu:"times","message-box":"times","small-caption":"times","status-bar":"times"};function pN(t){return[t.stretch,t.style,t.weight,t.family].join(" ")}function Hz(t,e,r){for(var n=(r=r||{}).defaultFontFamily||"times",s=Object.assign({},Oz,r.genericFontFamilies||{}),i=null,a=null,o=0;o<e.length;++o)if(s[(i=Ax(e[o])).family]&&(i.family=s[i.family]),t.hasOwnProperty(i.family)){a=t[i.family];break}if(!(a=a||t[n]))throw new Error("Could not find a font-family for the rule '"+pN(i)+"' and default family '"+n+"'.");if(a=function(l,c){if(c[l])return c[l];var u=ox[l],f=u<=ox.normal?-1:1,p=hN(c,T3,u,f);if(!p)throw new Error("Could not find a matching font-stretch value for "+l);return p}(i.stretch,a),a=function(l,c){if(c[l])return c[l];for(var u=F3[l],f=0;f<u.length;++f)if(c[u[f]])return c[u[f]];throw new Error("Could not find a matching font-style for "+l)}(i.style,a),!(a=function(l,c){if(c[l])return c[l];if(l===400&&c[500])return c[500];if(l===500&&c[400])return c[400];var u=Mz[l],f=hN(c,U3,u,l<400?-1:1);if(!f)throw new Error("Could not find a matching font-weight for value "+l);return f}(i.weight,a)))throw new Error("Failed to resolve a font for the rule '"+pN(i)+"'.");return a}function mN(t){return t.trimLeft()}function Vz(t,e){for(var r=0;r<t.length;){if(t.charAt(r)===e)return[t.substring(0,r),t.substring(r+1)];r+=1}return null}function Kz(t){var e=t.match(/^(-[a-z_]|[a-z_])[a-z0-9_-]*/i);return e===null?null:[e[0],t.substring(e[0].length)]}var fg,gN,vN,Xy=["times"];(function(t){var e,r,n,s,i,a,o,l,c,u=function(Q){return Q=Q||{},this.isStrokeTransparent=Q.isStrokeTransparent||!1,this.strokeOpacity=Q.strokeOpacity||1,this.strokeStyle=Q.strokeStyle||"#000000",this.fillStyle=Q.fillStyle||"#000000",this.isFillTransparent=Q.isFillTransparent||!1,this.fillOpacity=Q.fillOpacity||1,this.font=Q.font||"10px sans-serif",this.textBaseline=Q.textBaseline||"alphabetic",this.textAlign=Q.textAlign||"left",this.lineWidth=Q.lineWidth||1,this.lineJoin=Q.lineJoin||"miter",this.lineCap=Q.lineCap||"butt",this.path=Q.path||[],this.transform=Q.transform!==void 0?Q.transform.clone():new l,this.globalCompositeOperation=Q.globalCompositeOperation||"normal",this.globalAlpha=Q.globalAlpha||1,this.clip_path=Q.clip_path||[],this.currentPoint=Q.currentPoint||new a,this.miterLimit=Q.miterLimit||10,this.lastPoint=Q.lastPoint||new a,this.lineDashOffset=Q.lineDashOffset||0,this.lineDash=Q.lineDash||[],this.margin=Q.margin||[0,0,0,0],this.prevPageLastElemOffset=Q.prevPageLastElemOffset||0,this.ignoreClearRect=typeof Q.ignoreClearRect!="boolean"||Q.ignoreClearRect,this};t.events.push(["initialized",function(){this.context2d=new f(this),e=this.internal.f2,r=this.internal.getCoordinateString,n=this.internal.getVerticalCoordinateString,s=this.internal.getHorizontalCoordinate,i=this.internal.getVerticalCoordinate,a=this.internal.Point,o=this.internal.Rectangle,l=this.internal.Matrix,c=new u}]);var f=function(Q){Object.defineProperty(this,"canvas",{get:function(){return{parentNode:!1,style:!1}}});var k=Q;Object.defineProperty(this,"pdf",{get:function(){return k}});var z=!1;Object.defineProperty(this,"pageWrapXEnabled",{get:function(){return z},set:function(le){z=!!le}});var te=!1;Object.defineProperty(this,"pageWrapYEnabled",{get:function(){return te},set:function(le){te=!!le}});var $=0;Object.defineProperty(this,"posX",{get:function(){return $},set:function(le){isNaN(le)||($=le)}});var ne=0;Object.defineProperty(this,"posY",{get:function(){return ne},set:function(le){isNaN(le)||(ne=le)}}),Object.defineProperty(this,"margin",{get:function(){return c.margin},set:function(le){var G;typeof le=="number"?G=[le,le,le,le]:((G=new Array(4))[0]=le[0],G[1]=le.length>=2?le[1]:G[0],G[2]=le.length>=3?le[2]:G[0],G[3]=le.length>=4?le[3]:G[1]),c.margin=G}});var X=!1;Object.defineProperty(this,"autoPaging",{get:function(){return X},set:function(le){X=le}});var he=0;Object.defineProperty(this,"lastBreak",{get:function(){return he},set:function(le){he=le}});var ge=[];Object.defineProperty(this,"pageBreaks",{get:function(){return ge},set:function(le){ge=le}}),Object.defineProperty(this,"ctx",{get:function(){return c},set:function(le){le instanceof u&&(c=le)}}),Object.defineProperty(this,"path",{get:function(){return c.path},set:function(le){c.path=le}});var Ce=[];Object.defineProperty(this,"ctxStack",{get:function(){return Ce},set:function(le){Ce=le}}),Object.defineProperty(this,"fillStyle",{get:function(){return this.ctx.fillStyle},set:function(le){var G;G=p(le),this.ctx.fillStyle=G.style,this.ctx.isFillTransparent=G.a===0,this.ctx.fillOpacity=G.a,this.pdf.setFillColor(G.r,G.g,G.b,{a:G.a}),this.pdf.setTextColor(G.r,G.g,G.b,{a:G.a})}}),Object.defineProperty(this,"strokeStyle",{get:function(){return this.ctx.strokeStyle},set:function(le){var G=p(le);this.ctx.strokeStyle=G.style,this.ctx.isStrokeTransparent=G.a===0,this.ctx.strokeOpacity=G.a,G.a===0?this.pdf.setDrawColor(255,255,255):(G.a,this.pdf.setDrawColor(G.r,G.g,G.b))}}),Object.defineProperty(this,"lineCap",{get:function(){return this.ctx.lineCap},set:function(le){["butt","round","square"].indexOf(le)!==-1&&(this.ctx.lineCap=le,this.pdf.setLineCap(le))}}),Object.defineProperty(this,"lineWidth",{get:function(){return this.ctx.lineWidth},set:function(le){isNaN(le)||(this.ctx.lineWidth=le,this.pdf.setLineWidth(le))}}),Object.defineProperty(this,"lineJoin",{get:function(){return this.ctx.lineJoin},set:function(le){["bevel","round","miter"].indexOf(le)!==-1&&(this.ctx.lineJoin=le,this.pdf.setLineJoin(le))}}),Object.defineProperty(this,"miterLimit",{get:function(){return this.ctx.miterLimit},set:function(le){isNaN(le)||(this.ctx.miterLimit=le,this.pdf.setMiterLimit(le))}}),Object.defineProperty(this,"textBaseline",{get:function(){return this.ctx.textBaseline},set:function(le){this.ctx.textBaseline=le}}),Object.defineProperty(this,"textAlign",{get:function(){return this.ctx.textAlign},set:function(le){["right","end","center","left","start"].indexOf(le)!==-1&&(this.ctx.textAlign=le)}});var Te=null;function Fe(le,G){if(Te===null){var Re=function(je){var Ue=[];return Object.keys(je).forEach(function(Pe){je[Pe].forEach(function(Ge){var qe=null;switch(Ge){case"bold":qe={family:Pe,weight:"bold"};break;case"italic":qe={family:Pe,style:"italic"};break;case"bolditalic":qe={family:Pe,weight:"bold",style:"italic"};break;case"":case"normal":qe={family:Pe}}qe!==null&&(qe.ref={name:Pe,style:Ge},Ue.push(qe))})}),Ue}(le.getFontList());Te=function(je){for(var Ue={},Pe=0;Pe<je.length;++Pe){var Ge=Ax(je[Pe]),qe=Ge.family,tt=Ge.stretch,Ze=Ge.style,vt=Ge.weight;Ue[qe]=Ue[qe]||{},Ue[qe][tt]=Ue[qe][tt]||{},Ue[qe][tt][Ze]=Ue[qe][tt][Ze]||{},Ue[qe][tt][Ze][vt]=Ge}return Ue}(Re.concat(G))}return Te}var oe=null;Object.defineProperty(this,"fontFaces",{get:function(){return oe},set:function(le){Te=null,oe=le}}),Object.defineProperty(this,"font",{get:function(){return this.ctx.font},set:function(le){var G;if(this.ctx.font=le,(G=/^\s*(?=(?:(?:[-a-z]+\s*){0,2}(italic|oblique))?)(?=(?:(?:[-a-z]+\s*){0,2}(small-caps))?)(?=(?:(?:[-a-z]+\s*){0,2}(bold(?:er)?|lighter|[1-9]00))?)(?:(?:normal|\1|\2|\3)\s*){0,3}((?:xx?-)?(?:small|large)|medium|smaller|larger|[.\d]+(?:\%|in|[cem]m|ex|p[ctx]))(?:\s*\/\s*(normal|[.\d]+(?:\%|in|[cem]m|ex|p[ctx])))?\s*([-_,\"\'\sa-z]+?)\s*$/i.exec(le))!==null){var Re=G[1];G[2];var je=G[3],Ue=G[4];G[5];var Pe=G[6],Ge=/^([.\d]+)((?:%|in|[cem]m|ex|p[ctx]))$/i.exec(Ue)[2];Ue=Math.floor(Ge==="px"?parseFloat(Ue)*this.pdf.internal.scaleFactor:Ge==="em"?parseFloat(Ue)*this.pdf.getFontSize():parseFloat(Ue)*this.pdf.internal.scaleFactor),this.pdf.setFontSize(Ue);var qe=function(Et){var se,ve,We=[],at=Et.trim();if(at==="")return Xy;if(at in fN)return[fN[at]];for(;at!=="";){switch(ve=null,se=(at=mN(at)).charAt(0)){case'"':case"'":ve=Vz(at.substring(1),se);break;default:ve=Kz(at)}if(ve===null||(We.push(ve[0]),(at=mN(ve[1]))!==""&&at.charAt(0)!==","))return Xy;at=at.replace(/^,/,"")}return We}(Pe);if(this.fontFaces){var tt=Hz(Fe(this.pdf,this.fontFaces),qe.map(function(Et){return{family:Et,stretch:"normal",weight:je,style:Re}}));this.pdf.setFont(tt.ref.name,tt.ref.style)}else{var Ze="";(je==="bold"||parseInt(je,10)>=700||Re==="bold")&&(Ze="bold"),Re==="italic"&&(Ze+="italic"),Ze.length===0&&(Ze="normal");for(var vt="",ht={arial:"Helvetica",Arial:"Helvetica",verdana:"Helvetica",Verdana:"Helvetica",helvetica:"Helvetica",Helvetica:"Helvetica","sans-serif":"Helvetica",fixed:"Courier",monospace:"Courier",terminal:"Courier",cursive:"Times",fantasy:"Times",serif:"Times"},Ct=0;Ct<qe.length;Ct++){if(this.pdf.internal.getFont(qe[Ct],Ze,{noFallback:!0,disableWarning:!0})!==void 0){vt=qe[Ct];break}if(Ze==="bolditalic"&&this.pdf.internal.getFont(qe[Ct],"bold",{noFallback:!0,disableWarning:!0})!==void 0)vt=qe[Ct],Ze="bold";else if(this.pdf.internal.getFont(qe[Ct],"normal",{noFallback:!0,disableWarning:!0})!==void 0){vt=qe[Ct],Ze="normal";break}}if(vt===""){for(var Ht=0;Ht<qe.length;Ht++)if(ht[qe[Ht]]){vt=ht[qe[Ht]];break}}vt=vt===""?"Times":vt,this.pdf.setFont(vt,Ze)}}}}),Object.defineProperty(this,"globalCompositeOperation",{get:function(){return this.ctx.globalCompositeOperation},set:function(le){this.ctx.globalCompositeOperation=le}}),Object.defineProperty(this,"globalAlpha",{get:function(){return this.ctx.globalAlpha},set:function(le){this.ctx.globalAlpha=le}}),Object.defineProperty(this,"lineDashOffset",{get:function(){return this.ctx.lineDashOffset},set:function(le){this.ctx.lineDashOffset=le,Ee.call(this)}}),Object.defineProperty(this,"lineDash",{get:function(){return this.ctx.lineDash},set:function(le){this.ctx.lineDash=le,Ee.call(this)}}),Object.defineProperty(this,"ignoreClearRect",{get:function(){return this.ctx.ignoreClearRect},set:function(le){this.ctx.ignoreClearRect=!!le}})};f.prototype.setLineDash=function(Q){this.lineDash=Q},f.prototype.getLineDash=function(){return this.lineDash.length%2?this.lineDash.concat(this.lineDash):this.lineDash.slice()},f.prototype.fill=function(){O.call(this,"fill",!1)},f.prototype.stroke=function(){O.call(this,"stroke",!1)},f.prototype.beginPath=function(){this.path=[{type:"begin"}]},f.prototype.moveTo=function(Q,k){if(isNaN(Q)||isNaN(k))throw Lr.error("jsPDF.context2d.moveTo: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.moveTo");var z=this.ctx.transform.applyToPoint(new a(Q,k));this.path.push({type:"mt",x:z.x,y:z.y}),this.ctx.lastPoint=new a(Q,k)},f.prototype.closePath=function(){var Q=new a(0,0),k=0;for(k=this.path.length-1;k!==-1;k--)if(this.path[k].type==="begin"&&Nr(this.path[k+1])==="object"&&typeof this.path[k+1].x=="number"){Q=new a(this.path[k+1].x,this.path[k+1].y);break}this.path.push({type:"close"}),this.ctx.lastPoint=new a(Q.x,Q.y)},f.prototype.lineTo=function(Q,k){if(isNaN(Q)||isNaN(k))throw Lr.error("jsPDF.context2d.lineTo: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.lineTo");var z=this.ctx.transform.applyToPoint(new a(Q,k));this.path.push({type:"lt",x:z.x,y:z.y}),this.ctx.lastPoint=new a(z.x,z.y)},f.prototype.clip=function(){this.ctx.clip_path=JSON.parse(JSON.stringify(this.path)),O.call(this,null,!0)},f.prototype.quadraticCurveTo=function(Q,k,z,te){if(isNaN(z)||isNaN(te)||isNaN(Q)||isNaN(k))throw Lr.error("jsPDF.context2d.quadraticCurveTo: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.quadraticCurveTo");var $=this.ctx.transform.applyToPoint(new a(z,te)),ne=this.ctx.transform.applyToPoint(new a(Q,k));this.path.push({type:"qct",x1:ne.x,y1:ne.y,x:$.x,y:$.y}),this.ctx.lastPoint=new a($.x,$.y)},f.prototype.bezierCurveTo=function(Q,k,z,te,$,ne){if(isNaN($)||isNaN(ne)||isNaN(Q)||isNaN(k)||isNaN(z)||isNaN(te))throw Lr.error("jsPDF.context2d.bezierCurveTo: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.bezierCurveTo");var X=this.ctx.transform.applyToPoint(new a($,ne)),he=this.ctx.transform.applyToPoint(new a(Q,k)),ge=this.ctx.transform.applyToPoint(new a(z,te));this.path.push({type:"bct",x1:he.x,y1:he.y,x2:ge.x,y2:ge.y,x:X.x,y:X.y}),this.ctx.lastPoint=new a(X.x,X.y)},f.prototype.arc=function(Q,k,z,te,$,ne){if(isNaN(Q)||isNaN(k)||isNaN(z)||isNaN(te)||isNaN($))throw Lr.error("jsPDF.context2d.arc: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.arc");if(ne=!!ne,!this.ctx.transform.isIdentity){var X=this.ctx.transform.applyToPoint(new a(Q,k));Q=X.x,k=X.y;var he=this.ctx.transform.applyToPoint(new a(0,z)),ge=this.ctx.transform.applyToPoint(new a(0,0));z=Math.sqrt(Math.pow(he.x-ge.x,2)+Math.pow(he.y-ge.y,2))}Math.abs($-te)>=2*Math.PI&&(te=0,$=2*Math.PI),this.path.push({type:"arc",x:Q,y:k,radius:z,startAngle:te,endAngle:$,counterclockwise:ne})},f.prototype.arcTo=function(Q,k,z,te,$){throw new Error("arcTo not implemented.")},f.prototype.rect=function(Q,k,z,te){if(isNaN(Q)||isNaN(k)||isNaN(z)||isNaN(te))throw Lr.error("jsPDF.context2d.rect: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.rect");this.moveTo(Q,k),this.lineTo(Q+z,k),this.lineTo(Q+z,k+te),this.lineTo(Q,k+te),this.lineTo(Q,k),this.lineTo(Q+z,k),this.lineTo(Q,k)},f.prototype.fillRect=function(Q,k,z,te){if(isNaN(Q)||isNaN(k)||isNaN(z)||isNaN(te))throw Lr.error("jsPDF.context2d.fillRect: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.fillRect");if(!m.call(this)){var $={};this.lineCap!=="butt"&&($.lineCap=this.lineCap,this.lineCap="butt"),this.lineJoin!=="miter"&&($.lineJoin=this.lineJoin,this.lineJoin="miter"),this.beginPath(),this.rect(Q,k,z,te),this.fill(),$.hasOwnProperty("lineCap")&&(this.lineCap=$.lineCap),$.hasOwnProperty("lineJoin")&&(this.lineJoin=$.lineJoin)}},f.prototype.strokeRect=function(Q,k,z,te){if(isNaN(Q)||isNaN(k)||isNaN(z)||isNaN(te))throw Lr.error("jsPDF.context2d.strokeRect: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.strokeRect");b.call(this)||(this.beginPath(),this.rect(Q,k,z,te),this.stroke())},f.prototype.clearRect=function(Q,k,z,te){if(isNaN(Q)||isNaN(k)||isNaN(z)||isNaN(te))throw Lr.error("jsPDF.context2d.clearRect: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.clearRect");this.ignoreClearRect||(this.fillStyle="#ffffff",this.fillRect(Q,k,z,te))},f.prototype.save=function(Q){Q=typeof Q!="boolean"||Q;for(var k=this.pdf.internal.getCurrentPageInfo().pageNumber,z=0;z<this.pdf.internal.getNumberOfPages();z++)this.pdf.setPage(z+1),this.pdf.internal.out("q");if(this.pdf.setPage(k),Q){this.ctx.fontSize=this.pdf.internal.getFontSize();var te=new u(this.ctx);this.ctxStack.push(this.ctx),this.ctx=te}},f.prototype.restore=function(Q){Q=typeof Q!="boolean"||Q;for(var k=this.pdf.internal.getCurrentPageInfo().pageNumber,z=0;z<this.pdf.internal.getNumberOfPages();z++)this.pdf.setPage(z+1),this.pdf.internal.out("Q");this.pdf.setPage(k),Q&&this.ctxStack.length!==0&&(this.ctx=this.ctxStack.pop(),this.fillStyle=this.ctx.fillStyle,this.strokeStyle=this.ctx.strokeStyle,this.font=this.ctx.font,this.lineCap=this.ctx.lineCap,this.lineWidth=this.ctx.lineWidth,this.lineJoin=this.ctx.lineJoin,this.lineDash=this.ctx.lineDash,this.lineDashOffset=this.ctx.lineDashOffset)},f.prototype.toDataURL=function(){throw new Error("toDataUrl not implemented.")};var p=function(Q){var k,z,te,$;if(Q.isCanvasGradient===!0&&(Q=Q.getColor()),!Q)return{r:0,g:0,b:0,a:0,style:Q};if(/transparent|rgba\s*\(\s*(\d+)\s*,\s*(\d+)\s*,\s*(\d+)\s*,\s*0+\s*\)/.test(Q))k=0,z=0,te=0,$=0;else{var ne=/rgb\s*\(\s*(\d+)\s*,\s*(\d+)\s*,\s*(\d+)\s*\)/.exec(Q);if(ne!==null)k=parseInt(ne[1]),z=parseInt(ne[2]),te=parseInt(ne[3]),$=1;else if((ne=/rgba\s*\(\s*(\d+)\s*,\s*(\d+)\s*,\s*(\d+)\s*,\s*([\d.]+)\s*\)/.exec(Q))!==null)k=parseInt(ne[1]),z=parseInt(ne[2]),te=parseInt(ne[3]),$=parseFloat(ne[4]);else{if($=1,typeof Q=="string"&&Q.charAt(0)!=="#"){var X=new B3(Q);Q=X.ok?X.toHex():"#000000"}Q.length===4?(k=Q.substring(1,2),k+=k,z=Q.substring(2,3),z+=z,te=Q.substring(3,4),te+=te):(k=Q.substring(1,3),z=Q.substring(3,5),te=Q.substring(5,7)),k=parseInt(k,16),z=parseInt(z,16),te=parseInt(te,16)}}return{r:k,g:z,b:te,a:$,style:Q}},m=function(){return this.ctx.isFillTransparent||this.globalAlpha==0},b=function(){return!!(this.ctx.isStrokeTransparent||this.globalAlpha==0)};f.prototype.fillText=function(Q,k,z,te){if(isNaN(k)||isNaN(z)||typeof Q!="string")throw Lr.error("jsPDF.context2d.fillText: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.fillText");if(te=isNaN(te)?void 0:te,!m.call(this)){var $=W(this.ctx.transform.rotation),ne=this.ctx.transform.scaleX;T.call(this,{text:Q,x:k,y:z,scale:ne,angle:$,align:this.textAlign,maxWidth:te})}},f.prototype.strokeText=function(Q,k,z,te){if(isNaN(k)||isNaN(z)||typeof Q!="string")throw Lr.error("jsPDF.context2d.strokeText: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.strokeText");if(!b.call(this)){te=isNaN(te)?void 0:te;var $=W(this.ctx.transform.rotation),ne=this.ctx.transform.scaleX;T.call(this,{text:Q,x:k,y:z,scale:ne,renderingMode:"stroke",angle:$,align:this.textAlign,maxWidth:te})}},f.prototype.measureText=function(Q){if(typeof Q!="string")throw Lr.error("jsPDF.context2d.measureText: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.measureText");var k=this.pdf,z=this.pdf.internal.scaleFactor,te=k.internal.getFontSize(),$=k.getStringUnitWidth(Q)*te/k.internal.scaleFactor,ne=function(X){var he=(X=X||{}).width||0;return Object.defineProperty(this,"width",{get:function(){return he}}),this};return new ne({width:$*=Math.round(96*z/72*1e4)/1e4})},f.prototype.scale=function(Q,k){if(isNaN(Q)||isNaN(k))throw Lr.error("jsPDF.context2d.scale: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.scale");var z=new l(Q,0,0,k,0,0);this.ctx.transform=this.ctx.transform.multiply(z)},f.prototype.rotate=function(Q){if(isNaN(Q))throw Lr.error("jsPDF.context2d.rotate: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.rotate");var k=new l(Math.cos(Q),Math.sin(Q),-Math.sin(Q),Math.cos(Q),0,0);this.ctx.transform=this.ctx.transform.multiply(k)},f.prototype.translate=function(Q,k){if(isNaN(Q)||isNaN(k))throw Lr.error("jsPDF.context2d.translate: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.translate");var z=new l(1,0,0,1,Q,k);this.ctx.transform=this.ctx.transform.multiply(z)},f.prototype.transform=function(Q,k,z,te,$,ne){if(isNaN(Q)||isNaN(k)||isNaN(z)||isNaN(te)||isNaN($)||isNaN(ne))throw Lr.error("jsPDF.context2d.transform: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.transform");var X=new l(Q,k,z,te,$,ne);this.ctx.transform=this.ctx.transform.multiply(X)},f.prototype.setTransform=function(Q,k,z,te,$,ne){Q=isNaN(Q)?1:Q,k=isNaN(k)?0:k,z=isNaN(z)?0:z,te=isNaN(te)?1:te,$=isNaN($)?0:$,ne=isNaN(ne)?0:ne,this.ctx.transform=new l(Q,k,z,te,$,ne)};var B=function(){return this.margin[0]>0||this.margin[1]>0||this.margin[2]>0||this.margin[3]>0};f.prototype.drawImage=function(Q,k,z,te,$,ne,X,he,ge){var Ce=this.pdf.getImageProperties(Q),Te=1,Fe=1,oe=1,le=1;te!==void 0&&he!==void 0&&(oe=he/te,le=ge/$,Te=Ce.width/te*he/te,Fe=Ce.height/$*ge/$),ne===void 0&&(ne=k,X=z,k=0,z=0),te!==void 0&&he===void 0&&(he=te,ge=$),te===void 0&&he===void 0&&(he=Ce.width,ge=Ce.height);for(var G,Re=this.ctx.transform.decompose(),je=W(Re.rotate.shx),Ue=new l,Pe=(Ue=(Ue=(Ue=Ue.multiply(Re.translate)).multiply(Re.skew)).multiply(Re.scale)).applyToRectangle(new o(ne-k*oe,X-z*le,te*Te,$*Fe)),Ge=_.call(this,Pe),qe=[],tt=0;tt<Ge.length;tt+=1)qe.indexOf(Ge[tt])===-1&&qe.push(Ge[tt]);if(S(qe),this.autoPaging)for(var Ze=qe[0],vt=qe[qe.length-1],ht=Ze;ht<vt+1;ht++){this.pdf.setPage(ht);var Ct=this.pdf.internal.pageSize.width-this.margin[3]-this.margin[1],Ht=ht===1?this.posY+this.margin[0]:this.margin[0],Et=this.pdf.internal.pageSize.height-this.posY-this.margin[0]-this.margin[2],se=this.pdf.internal.pageSize.height-this.margin[0]-this.margin[2],ve=ht===1?0:Et+(ht-2)*se;if(this.ctx.clip_path.length!==0){var We=this.path;G=JSON.parse(JSON.stringify(this.ctx.clip_path)),this.path=y(G,this.posX+this.margin[3],-ve+Ht+this.ctx.prevPageLastElemOffset),R.call(this,"fill",!0),this.path=We}var at=JSON.parse(JSON.stringify(Pe));at=y([at],this.posX+this.margin[3],-ve+Ht+this.ctx.prevPageLastElemOffset)[0];var wt=(ht>Ze||ht<vt)&&B.call(this);wt&&(this.pdf.saveGraphicsState(),this.pdf.rect(this.margin[3],this.margin[0],Ct,se,null).clip().discardPath()),this.pdf.addImage(Q,"JPEG",at.x,at.y,at.w,at.h,null,null,je),wt&&this.pdf.restoreGraphicsState()}else this.pdf.addImage(Q,"JPEG",Pe.x,Pe.y,Pe.w,Pe.h,null,null,je)};var _=function(Q,k,z){var te=[];k=k||this.pdf.internal.pageSize.width,z=z||this.pdf.internal.pageSize.height-this.margin[0]-this.margin[2];var $=this.posY+this.ctx.prevPageLastElemOffset;switch(Q.type){default:case"mt":case"lt":te.push(Math.floor((Q.y+$)/z)+1);break;case"arc":te.push(Math.floor((Q.y+$-Q.radius)/z)+1),te.push(Math.floor((Q.y+$+Q.radius)/z)+1);break;case"qct":var ne=ue(this.ctx.lastPoint.x,this.ctx.lastPoint.y,Q.x1,Q.y1,Q.x,Q.y);te.push(Math.floor((ne.y+$)/z)+1),te.push(Math.floor((ne.y+ne.h+$)/z)+1);break;case"bct":var X=ae(this.ctx.lastPoint.x,this.ctx.lastPoint.y,Q.x1,Q.y1,Q.x2,Q.y2,Q.x,Q.y);te.push(Math.floor((X.y+$)/z)+1),te.push(Math.floor((X.y+X.h+$)/z)+1);break;case"rect":te.push(Math.floor((Q.y+$)/z)+1),te.push(Math.floor((Q.y+Q.h+$)/z)+1)}for(var he=0;he<te.length;he+=1)for(;this.pdf.internal.getNumberOfPages()<te[he];)w.call(this);return te},w=function(){var Q=this.fillStyle,k=this.strokeStyle,z=this.font,te=this.lineCap,$=this.lineWidth,ne=this.lineJoin;this.pdf.addPage(),this.fillStyle=Q,this.strokeStyle=k,this.font=z,this.lineCap=te,this.lineWidth=$,this.lineJoin=ne},y=function(Q,k,z){for(var te=0;te<Q.length;te++)switch(Q[te].type){case"bct":Q[te].x2+=k,Q[te].y2+=z;case"qct":Q[te].x1+=k,Q[te].y1+=z;case"mt":case"lt":case"arc":default:Q[te].x+=k,Q[te].y+=z}return Q},S=function(Q){return Q.sort(function(k,z){return k-z})},O=function(Q,k){for(var z,te,$=this.fillStyle,ne=this.strokeStyle,X=this.lineCap,he=this.lineWidth,ge=Math.abs(he*this.ctx.transform.scaleX),Ce=this.lineJoin,Te=JSON.parse(JSON.stringify(this.path)),Fe=JSON.parse(JSON.stringify(this.path)),oe=[],le=0;le<Fe.length;le++)if(Fe[le].x!==void 0)for(var G=_.call(this,Fe[le]),Re=0;Re<G.length;Re+=1)oe.indexOf(G[Re])===-1&&oe.push(G[Re]);for(var je=0;je<oe.length;je++)for(;this.pdf.internal.getNumberOfPages()<oe[je];)w.call(this);if(S(oe),this.autoPaging)for(var Ue=oe[0],Pe=oe[oe.length-1],Ge=Ue;Ge<Pe+1;Ge++){this.pdf.setPage(Ge),this.fillStyle=$,this.strokeStyle=ne,this.lineCap=X,this.lineWidth=ge,this.lineJoin=Ce;var qe=this.pdf.internal.pageSize.width-this.margin[3]-this.margin[1],tt=Ge===1?this.posY+this.margin[0]:this.margin[0],Ze=this.pdf.internal.pageSize.height-this.posY-this.margin[0]-this.margin[2],vt=this.pdf.internal.pageSize.height-this.margin[0]-this.margin[2],ht=Ge===1?0:Ze+(Ge-2)*vt;if(this.ctx.clip_path.length!==0){var Ct=this.path;z=JSON.parse(JSON.stringify(this.ctx.clip_path)),this.path=y(z,this.posX+this.margin[3],-ht+tt+this.ctx.prevPageLastElemOffset),R.call(this,Q,!0),this.path=Ct}if(te=JSON.parse(JSON.stringify(Te)),this.path=y(te,this.posX+this.margin[3],-ht+tt+this.ctx.prevPageLastElemOffset),k===!1||Ge===0){var Ht=(Ge>Ue||Ge<Pe)&&B.call(this);Ht&&(this.pdf.saveGraphicsState(),this.pdf.rect(this.margin[3],this.margin[0],qe,vt,null).clip().discardPath()),R.call(this,Q,k),Ht&&this.pdf.restoreGraphicsState()}this.lineWidth=he}else this.lineWidth=ge,R.call(this,Q,k),this.lineWidth=he;this.path=Te},R=function(Q,k){if((Q!=="stroke"||k||!b.call(this))&&(Q==="stroke"||k||!m.call(this))){for(var z,te,$=[],ne=this.path,X=0;X<ne.length;X++){var he=ne[X];switch(he.type){case"begin":$.push({begin:!0});break;case"close":$.push({close:!0});break;case"mt":$.push({start:he,deltas:[],abs:[]});break;case"lt":var ge=$.length;if(ne[X-1]&&!isNaN(ne[X-1].x)&&(z=[he.x-ne[X-1].x,he.y-ne[X-1].y],ge>0)){for(;ge>=0;ge--)if($[ge-1].close!==!0&&$[ge-1].begin!==!0){$[ge-1].deltas.push(z),$[ge-1].abs.push(he);break}}break;case"bct":z=[he.x1-ne[X-1].x,he.y1-ne[X-1].y,he.x2-ne[X-1].x,he.y2-ne[X-1].y,he.x-ne[X-1].x,he.y-ne[X-1].y],$[$.length-1].deltas.push(z);break;case"qct":var Ce=ne[X-1].x+2/3*(he.x1-ne[X-1].x),Te=ne[X-1].y+2/3*(he.y1-ne[X-1].y),Fe=he.x+2/3*(he.x1-he.x),oe=he.y+2/3*(he.y1-he.y),le=he.x,G=he.y;z=[Ce-ne[X-1].x,Te-ne[X-1].y,Fe-ne[X-1].x,oe-ne[X-1].y,le-ne[X-1].x,G-ne[X-1].y],$[$.length-1].deltas.push(z);break;case"arc":$.push({deltas:[],abs:[],arc:!0}),Array.isArray($[$.length-1].abs)&&$[$.length-1].abs.push(he)}}te=k?null:Q==="stroke"?"stroke":"fill";for(var Re=!1,je=0;je<$.length;je++)if($[je].arc)for(var Ue=$[je].abs,Pe=0;Pe<Ue.length;Pe++){var Ge=Ue[Pe];Ge.type==="arc"?E.call(this,Ge.x,Ge.y,Ge.radius,Ge.startAngle,Ge.endAngle,Ge.counterclockwise,void 0,k,!Re):F.call(this,Ge.x,Ge.y),Re=!0}else if($[je].close===!0)this.pdf.internal.out("h"),Re=!1;else if($[je].begin!==!0){var qe=$[je].start.x,tt=$[je].start.y;ee.call(this,$[je].deltas,qe,tt),Re=!0}te&&L.call(this,te),k&&D.call(this)}},M=function(Q){var k=this.pdf.internal.getFontSize()/this.pdf.internal.scaleFactor,z=k*(this.pdf.internal.getLineHeightFactor()-1);switch(this.ctx.textBaseline){case"bottom":return Q-z;case"top":return Q+k-z;case"hanging":return Q+k-2*z;case"middle":return Q+k/2-z;case"ideographic":return Q;case"alphabetic":default:return Q}},I=function(Q){return Q+this.pdf.internal.getFontSize()/this.pdf.internal.scaleFactor*(this.pdf.internal.getLineHeightFactor()-1)};f.prototype.createLinearGradient=function(){var Q=function(){};return Q.colorStops=[],Q.addColorStop=function(k,z){this.colorStops.push([k,z])},Q.getColor=function(){return this.colorStops.length===0?"#000000":this.colorStops[0][1]},Q.isCanvasGradient=!0,Q},f.prototype.createPattern=function(){return this.createLinearGradient()},f.prototype.createRadialGradient=function(){return this.createLinearGradient()};var E=function(Q,k,z,te,$,ne,X,he,ge){for(var Ce=re.call(this,z,te,$,ne),Te=0;Te<Ce.length;Te++){var Fe=Ce[Te];Te===0&&(ge?N.call(this,Fe.x1+Q,Fe.y1+k):F.call(this,Fe.x1+Q,Fe.y1+k)),ce.call(this,Q,k,Fe.x2,Fe.y2,Fe.x3,Fe.y3,Fe.x4,Fe.y4)}he?D.call(this):L.call(this,X)},L=function(Q){switch(Q){case"stroke":this.pdf.internal.out("S");break;case"fill":this.pdf.internal.out("f")}},D=function(){this.pdf.clip(),this.pdf.discardPath()},N=function(Q,k){this.pdf.internal.out(r(Q)+" "+n(k)+" m")},T=function(Q){var k;switch(Q.align){case"right":case"end":k="right";break;case"center":k="center";break;case"left":case"start":default:k="left"}var z=this.pdf.getTextDimensions(Q.text),te=M.call(this,Q.y),$=I.call(this,te)-z.h,ne=this.ctx.transform.applyToPoint(new a(Q.x,te)),X=this.ctx.transform.decompose(),he=new l;he=(he=(he=he.multiply(X.translate)).multiply(X.skew)).multiply(X.scale);for(var ge,Ce,Te,Fe=this.ctx.transform.applyToRectangle(new o(Q.x,te,z.w,z.h)),oe=he.applyToRectangle(new o(Q.x,$,z.w,z.h)),le=_.call(this,oe),G=[],Re=0;Re<le.length;Re+=1)G.indexOf(le[Re])===-1&&G.push(le[Re]);if(S(G),this.autoPaging)for(var je=G[0],Ue=G[G.length-1],Pe=je;Pe<Ue+1;Pe++){this.pdf.setPage(Pe);var Ge=Pe===1?this.posY+this.margin[0]:this.margin[0],qe=this.pdf.internal.pageSize.height-this.posY-this.margin[0]-this.margin[2],tt=this.pdf.internal.pageSize.height-this.margin[2],Ze=tt-this.margin[0],vt=this.pdf.internal.pageSize.width-this.margin[1],ht=vt-this.margin[3],Ct=Pe===1?0:qe+(Pe-2)*Ze;if(this.ctx.clip_path.length!==0){var Ht=this.path;ge=JSON.parse(JSON.stringify(this.ctx.clip_path)),this.path=y(ge,this.posX+this.margin[3],-1*Ct+Ge),R.call(this,"fill",!0),this.path=Ht}var Et=y([JSON.parse(JSON.stringify(oe))],this.posX+this.margin[3],-Ct+Ge+this.ctx.prevPageLastElemOffset)[0];Q.scale>=.01&&(Ce=this.pdf.internal.getFontSize(),this.pdf.setFontSize(Ce*Q.scale),Te=this.lineWidth,this.lineWidth=Te*Q.scale);var se=this.autoPaging!=="text";if(se||Et.y+Et.h<=tt){if(se||Et.y>=Ge&&Et.x<=vt){var ve=se?Q.text:this.pdf.splitTextToSize(Q.text,Q.maxWidth||vt-Et.x)[0],We=y([JSON.parse(JSON.stringify(Fe))],this.posX+this.margin[3],-Ct+Ge+this.ctx.prevPageLastElemOffset)[0],at=se&&(Pe>je||Pe<Ue)&&B.call(this);at&&(this.pdf.saveGraphicsState(),this.pdf.rect(this.margin[3],this.margin[0],ht,Ze,null).clip().discardPath()),this.pdf.text(ve,We.x,We.y,{angle:Q.angle,align:k,renderingMode:Q.renderingMode}),at&&this.pdf.restoreGraphicsState()}}else Et.y<tt&&(this.ctx.prevPageLastElemOffset+=tt-Et.y);Q.scale>=.01&&(this.pdf.setFontSize(Ce),this.lineWidth=Te)}else Q.scale>=.01&&(Ce=this.pdf.internal.getFontSize(),this.pdf.setFontSize(Ce*Q.scale),Te=this.lineWidth,this.lineWidth=Te*Q.scale),this.pdf.text(Q.text,ne.x+this.posX,ne.y+this.posY,{angle:Q.angle,align:k,renderingMode:Q.renderingMode,maxWidth:Q.maxWidth}),Q.scale>=.01&&(this.pdf.setFontSize(Ce),this.lineWidth=Te)},F=function(Q,k,z,te){z=z||0,te=te||0,this.pdf.internal.out(r(Q+z)+" "+n(k+te)+" l")},ee=function(Q,k,z){return this.pdf.lines(Q,k,z,null,null)},ce=function(Q,k,z,te,$,ne,X,he){this.pdf.internal.out([e(s(z+Q)),e(i(te+k)),e(s($+Q)),e(i(ne+k)),e(s(X+Q)),e(i(he+k)),"c"].join(" "))},re=function(Q,k,z,te){for(var $=2*Math.PI,ne=Math.PI/2;k>z;)k-=$;var X=Math.abs(z-k);X<$&&te&&(X=$-X);for(var he=[],ge=te?-1:1,Ce=k;X>1e-5;){var Te=Ce+ge*Math.min(X,ne);he.push(de.call(this,Q,Ce,Te)),X-=Math.abs(Te-Ce),Ce=Te}return he},de=function(Q,k,z){var te=(z-k)/2,$=Q*Math.cos(te),ne=Q*Math.sin(te),X=$,he=-ne,ge=X*X+he*he,Ce=ge+X*$+he*ne,Te=4/3*(Math.sqrt(2*ge*Ce)-Ce)/(X*ne-he*$),Fe=X-Te*he,oe=he+Te*X,le=Fe,G=-oe,Re=te+k,je=Math.cos(Re),Ue=Math.sin(Re);return{x1:Q*Math.cos(k),y1:Q*Math.sin(k),x2:Fe*je-oe*Ue,y2:Fe*Ue+oe*je,x3:le*je-G*Ue,y3:le*Ue+G*je,x4:Q*Math.cos(z),y4:Q*Math.sin(z)}},W=function(Q){return 180*Q/Math.PI},ue=function(Q,k,z,te,$,ne){var X=Q+.5*(z-Q),he=k+.5*(te-k),ge=$+.5*(z-$),Ce=ne+.5*(te-ne),Te=Math.min(Q,$,X,ge),Fe=Math.max(Q,$,X,ge),oe=Math.min(k,ne,he,Ce),le=Math.max(k,ne,he,Ce);return new o(Te,oe,Fe-Te,le-oe)},ae=function(Q,k,z,te,$,ne,X,he){var ge,Ce,Te,Fe,oe,le,G,Re,je,Ue,Pe,Ge,qe,tt,Ze=z-Q,vt=te-k,ht=$-z,Ct=ne-te,Ht=X-$,Et=he-ne;for(Ce=0;Ce<41;Ce++)je=(G=(Te=Q+(ge=Ce/40)*Ze)+ge*((oe=z+ge*ht)-Te))+ge*(oe+ge*($+ge*Ht-oe)-G),Ue=(Re=(Fe=k+ge*vt)+ge*((le=te+ge*Ct)-Fe))+ge*(le+ge*(ne+ge*Et-le)-Re),Ce==0?(Pe=je,Ge=Ue,qe=je,tt=Ue):(Pe=Math.min(Pe,je),Ge=Math.min(Ge,Ue),qe=Math.max(qe,je),tt=Math.max(tt,Ue));return new o(Math.round(Pe),Math.round(Ge),Math.round(qe-Pe),Math.round(tt-Ge))},Ee=function(){if(this.prevLineDash||this.ctx.lineDash.length||this.ctx.lineDashOffset){var Q,k,z=(Q=this.ctx.lineDash,k=this.ctx.lineDashOffset,JSON.stringify({lineDash:Q,lineDashOffset:k}));this.prevLineDash!==z&&(this.pdf.setLineDash(this.ctx.lineDash,this.ctx.lineDashOffset),this.prevLineDash=z)}}})(kt.API),function(t){var e=function(i){var a,o,l,c,u,f,p,m,b,B;for(o=[],l=0,c=(i+=a="\0\0\0\0".slice(i.length%4||4)).length;c>l;l+=4)(u=(i.charCodeAt(l)<<24)+(i.charCodeAt(l+1)<<16)+(i.charCodeAt(l+2)<<8)+i.charCodeAt(l+3))!==0?(f=(u=((u=((u=((u=(u-(B=u%85))/85)-(b=u%85))/85)-(m=u%85))/85)-(p=u%85))/85)%85,o.push(f+33,p+33,m+33,b+33,B+33)):o.push(122);return function(_,w){for(var y=w;y>0;y--)_.pop()}(o,a.length),String.fromCharCode.apply(String,o)+"~>"},r=function(i){var a,o,l,c,u,f=String,p="length",m=255,b="charCodeAt",B="slice",_="replace";for(i[B](-2),i=i[B](0,-2)[_](/\s/g,"")[_]("z","!!!!!"),l=[],c=0,u=(i+=a="uuuuu"[B](i[p]%5||5))[p];u>c;c+=5)o=52200625*(i[b](c)-33)+614125*(i[b](c+1)-33)+7225*(i[b](c+2)-33)+85*(i[b](c+3)-33)+(i[b](c+4)-33),l.push(m&o>>24,m&o>>16,m&o>>8,m&o);return function(w,y){for(var S=y;S>0;S--)w.pop()}(l,a[p]),f.fromCharCode.apply(f,l)},n=function(i){var a=new RegExp(/^([0-9A-Fa-f]{2})+$/);if((i=i.replace(/\s/g,"")).indexOf(">")!==-1&&(i=i.substr(0,i.indexOf(">"))),i.length%2&&(i+="0"),a.test(i)===!1)return"";for(var o="",l=0;l<i.length;l+=2)o+=String.fromCharCode("0x"+(i[l]+i[l+1]));return o},s=function(i){for(var a=new Uint8Array(i.length),o=i.length;o--;)a[o]=i.charCodeAt(o);return i=(a=rx(a)).reduce(function(l,c){return l+String.fromCharCode(c)},"")};t.processDataByFilters=function(i,a){var o=0,l=i||"",c=[];for(typeof(a=a||[])=="string"&&(a=[a]),o=0;o<a.length;o+=1)switch(a[o]){case"ASCII85Decode":case"/ASCII85Decode":l=r(l),c.push("/ASCII85Encode");break;case"ASCII85Encode":case"/ASCII85Encode":l=e(l),c.push("/ASCII85Decode");break;case"ASCIIHexDecode":case"/ASCIIHexDecode":l=n(l),c.push("/ASCIIHexEncode");break;case"ASCIIHexEncode":case"/ASCIIHexEncode":l=l.split("").map(function(u){return("0"+u.charCodeAt().toString(16)).slice(-2)}).join("")+">",c.push("/ASCIIHexDecode");break;case"FlateEncode":case"/FlateEncode":l=s(l),c.push("/FlateDecode");break;default:throw new Error('The filter: "'+a[o]+'" is not implemented')}return{data:l,reverseChain:c.reverse().join(" ")}}}(kt.API),function(t){t.loadFile=function(e,r,n){return function(s,i,a){i=i!==!1,a=typeof a=="function"?a:function(){};var o=void 0;try{o=function(l,c,u){var f=new XMLHttpRequest,p=0,m=function(b){var B=b.length,_=[],w=String.fromCharCode;for(p=0;p<B;p+=1)_.push(w(255&b.charCodeAt(p)));return _.join("")};if(f.open("GET",l,!c),f.overrideMimeType("text/plain; charset=x-user-defined"),c===!1&&(f.onload=function(){f.status===200?u(m(this.responseText)):u(void 0)}),f.send(null),c&&f.status===200)return m(f.responseText)}(s,i,a)}catch{}return o}(e,r,n)},t.loadImageFile=t.loadFile}(kt.API),function(t){function e(){return(Ot.html2canvas?Promise.resolve(Ot.html2canvas):Qo(()=>Promise.resolve().then(()=>bB),[])).catch(function(a){return Promise.reject(new Error("Could not load html2canvas: "+a))}).then(function(a){return a.default?a.default:a})}function r(){return(Ot.DOMPurify?Promise.resolve(Ot.DOMPurify):Qo(()=>import("./purify.es-CQJ0hv7W.js"),[])).catch(function(a){return Promise.reject(new Error("Could not load dompurify: "+a))}).then(function(a){return a.default?a.default:a})}var n=function(a){var o=Nr(a);return o==="undefined"?"undefined":o==="string"||a instanceof String?"string":o==="number"||a instanceof Number?"number":o==="function"||a instanceof Function?"function":a&&a.constructor===Array?"array":a&&a.nodeType===1?"element":o==="object"?"object":"unknown"},s=function(a,o){var l=document.createElement(a);for(var c in o.className&&(l.className=o.className),o.innerHTML&&o.dompurify&&(l.innerHTML=o.dompurify.sanitize(o.innerHTML)),o.style)l.style[c]=o.style[c];return l},i=function a(o){var l=Object.assign(a.convert(Promise.resolve()),JSON.parse(JSON.stringify(a.template))),c=a.convert(Promise.resolve(),l);return c=(c=c.setProgress(1,a,1,[a])).set(o)};(i.prototype=Object.create(Promise.prototype)).constructor=i,i.convert=function(a,o){return a.__proto__=o||i.prototype,a},i.template={prop:{src:null,container:null,overlay:null,canvas:null,img:null,pdf:null,pageSize:null,callback:function(){}},progress:{val:0,state:null,n:0,stack:[]},opt:{filename:"file.pdf",margin:[0,0,0,0],enableLinks:!0,x:0,y:0,html2canvas:{},jsPDF:{},backgroundColor:"transparent"}},i.prototype.from=function(a,o){return this.then(function(){switch(o=o||function(l){switch(n(l)){case"string":return"string";case"element":return l.nodeName.toLowerCase()==="canvas"?"canvas":"element";default:return"unknown"}}(a)){case"string":return this.then(r).then(function(l){return this.set({src:s("div",{innerHTML:a,dompurify:l})})});case"element":return this.set({src:a});case"canvas":return this.set({canvas:a});case"img":return this.set({img:a});default:return this.error("Unknown source type.")}})},i.prototype.to=function(a){switch(a){case"container":return this.toContainer();case"canvas":return this.toCanvas();case"img":return this.toImg();case"pdf":return this.toPdf();default:return this.error("Invalid target.")}},i.prototype.toContainer=function(){return this.thenList([function(){return this.prop.src||this.error("Cannot duplicate - no source HTML.")},function(){return this.prop.pageSize||this.setPageSize()}]).then(function(){var a={position:"relative",display:"inline-block",width:(typeof this.opt.width!="number"||isNaN(this.opt.width)||typeof this.opt.windowWidth!="number"||isNaN(this.opt.windowWidth)?Math.max(this.prop.src.clientWidth,this.prop.src.scrollWidth,this.prop.src.offsetWidth):this.opt.windowWidth)+"px",left:0,right:0,top:0,margin:"auto",backgroundColor:this.opt.backgroundColor},o=function l(c,u){for(var f=c.nodeType===3?document.createTextNode(c.nodeValue):c.cloneNode(!1),p=c.firstChild;p;p=p.nextSibling)u!==!0&&p.nodeType===1&&p.nodeName==="SCRIPT"||f.appendChild(l(p,u));return c.nodeType===1&&(c.nodeName==="CANVAS"?(f.width=c.width,f.height=c.height,f.getContext("2d").drawImage(c,0,0)):c.nodeName!=="TEXTAREA"&&c.nodeName!=="SELECT"||(f.value=c.value),f.addEventListener("load",function(){f.scrollTop=c.scrollTop,f.scrollLeft=c.scrollLeft},!0)),f}(this.prop.src,this.opt.html2canvas.javascriptEnabled);o.tagName==="BODY"&&(a.height=Math.max(document.body.scrollHeight,document.body.offsetHeight,document.documentElement.clientHeight,document.documentElement.scrollHeight,document.documentElement.offsetHeight)+"px"),this.prop.overlay=s("div",{className:"html2pdf__overlay",style:{position:"fixed",overflow:"hidden",zIndex:1e3,left:"-100000px",right:0,bottom:0,top:0}}),this.prop.container=s("div",{className:"html2pdf__container",style:a}),this.prop.container.appendChild(o),this.prop.container.firstChild.appendChild(s("div",{style:{clear:"both",border:"0 none transparent",margin:0,padding:0,height:0}})),this.prop.container.style.float="none",this.prop.overlay.appendChild(this.prop.container),document.body.appendChild(this.prop.overlay),this.prop.container.firstChild.style.position="relative",this.prop.container.height=Math.max(this.prop.container.firstChild.clientHeight,this.prop.container.firstChild.scrollHeight,this.prop.container.firstChild.offsetHeight)+"px"})},i.prototype.toCanvas=function(){var a=[function(){return document.body.contains(this.prop.container)||this.toContainer()}];return this.thenList(a).then(e).then(function(o){var l=Object.assign({},this.opt.html2canvas);return delete l.onrendered,o(this.prop.container,l)}).then(function(o){(this.opt.html2canvas.onrendered||function(){})(o),this.prop.canvas=o,document.body.removeChild(this.prop.overlay)})},i.prototype.toContext2d=function(){var a=[function(){return document.body.contains(this.prop.container)||this.toContainer()}];return this.thenList(a).then(e).then(function(o){var l=this.opt.jsPDF,c=this.opt.fontFaces,u=typeof this.opt.width!="number"||isNaN(this.opt.width)||typeof this.opt.windowWidth!="number"||isNaN(this.opt.windowWidth)?1:this.opt.width/this.opt.windowWidth,f=Object.assign({async:!0,allowTaint:!0,scale:u,scrollX:this.opt.scrollX||0,scrollY:this.opt.scrollY||0,backgroundColor:"#ffffff",imageTimeout:15e3,logging:!0,proxy:null,removeContainer:!0,foreignObjectRendering:!1,useCORS:!1},this.opt.html2canvas);if(delete f.onrendered,l.context2d.autoPaging=this.opt.autoPaging===void 0||this.opt.autoPaging,l.context2d.posX=this.opt.x,l.context2d.posY=this.opt.y,l.context2d.margin=this.opt.margin,l.context2d.fontFaces=c,c)for(var p=0;p<c.length;++p){var m=c[p],b=m.src.find(function(B){return B.format==="truetype"});b&&l.addFont(b.url,m.ref.name,m.ref.style)}return f.windowHeight=f.windowHeight||0,f.windowHeight=f.windowHeight==0?Math.max(this.prop.container.clientHeight,this.prop.container.scrollHeight,this.prop.container.offsetHeight):f.windowHeight,l.context2d.save(!0),o(this.prop.container,f)}).then(function(o){this.opt.jsPDF.context2d.restore(!0),(this.opt.html2canvas.onrendered||function(){})(o),this.prop.canvas=o,document.body.removeChild(this.prop.overlay)})},i.prototype.toImg=function(){return this.thenList([function(){return this.prop.canvas||this.toCanvas()}]).then(function(){var a=this.prop.canvas.toDataURL("image/"+this.opt.image.type,this.opt.image.quality);this.prop.img=document.createElement("img"),this.prop.img.src=a})},i.prototype.toPdf=function(){return this.thenList([function(){return this.toContext2d()}]).then(function(){this.prop.pdf=this.prop.pdf||this.opt.jsPDF})},i.prototype.output=function(a,o,l){return(l=l||"pdf").toLowerCase()==="img"||l.toLowerCase()==="image"?this.outputImg(a,o):this.outputPdf(a,o)},i.prototype.outputPdf=function(a,o){return this.thenList([function(){return this.prop.pdf||this.toPdf()}]).then(function(){return this.prop.pdf.output(a,o)})},i.prototype.outputImg=function(a){return this.thenList([function(){return this.prop.img||this.toImg()}]).then(function(){switch(a){case void 0:case"img":return this.prop.img;case"datauristring":case"dataurlstring":return this.prop.img.src;case"datauri":case"dataurl":return document.location.href=this.prop.img.src;default:throw'Image output type "'+a+'" is not supported.'}})},i.prototype.save=function(a){return this.thenList([function(){return this.prop.pdf||this.toPdf()}]).set(a?{filename:a}:null).then(function(){this.prop.pdf.save(this.opt.filename)})},i.prototype.doCallback=function(){return this.thenList([function(){return this.prop.pdf||this.toPdf()}]).then(function(){this.prop.callback(this.prop.pdf)})},i.prototype.set=function(a){if(n(a)!=="object")return this;var o=Object.keys(a||{}).map(function(l){if(l in i.template.prop)return function(){this.prop[l]=a[l]};switch(l){case"margin":return this.setMargin.bind(this,a.margin);case"jsPDF":return function(){return this.opt.jsPDF=a.jsPDF,this.setPageSize()};case"pageSize":return this.setPageSize.bind(this,a.pageSize);default:return function(){this.opt[l]=a[l]}}},this);return this.then(function(){return this.thenList(o)})},i.prototype.get=function(a,o){return this.then(function(){var l=a in i.template.prop?this.prop[a]:this.opt[a];return o?o(l):l})},i.prototype.setMargin=function(a){return this.then(function(){switch(n(a)){case"number":a=[a,a,a,a];case"array":if(a.length===2&&(a=[a[0],a[1],a[0],a[1]]),a.length===4)break;default:return this.error("Invalid margin array.")}this.opt.margin=a}).then(this.setPageSize)},i.prototype.setPageSize=function(a){function o(l,c){return Math.floor(l*c/72*96)}return this.then(function(){(a=a||kt.getPageSize(this.opt.jsPDF)).hasOwnProperty("inner")||(a.inner={width:a.width-this.opt.margin[1]-this.opt.margin[3],height:a.height-this.opt.margin[0]-this.opt.margin[2]},a.inner.px={width:o(a.inner.width,a.k),height:o(a.inner.height,a.k)},a.inner.ratio=a.inner.height/a.inner.width),this.prop.pageSize=a})},i.prototype.setProgress=function(a,o,l,c){return a!=null&&(this.progress.val=a),o!=null&&(this.progress.state=o),l!=null&&(this.progress.n=l),c!=null&&(this.progress.stack=c),this.progress.ratio=this.progress.val/this.progress.state,this},i.prototype.updateProgress=function(a,o,l,c){return this.setProgress(a?this.progress.val+a:null,o||null,l?this.progress.n+l:null,c?this.progress.stack.concat(c):null)},i.prototype.then=function(a,o){var l=this;return this.thenCore(a,o,function(c,u){return l.updateProgress(null,null,1,[c]),Promise.prototype.then.call(this,function(f){return l.updateProgress(null,c),f}).then(c,u).then(function(f){return l.updateProgress(1),f})})},i.prototype.thenCore=function(a,o,l){l=l||Promise.prototype.then,a&&(a=a.bind(this)),o&&(o=o.bind(this));var c=Promise.toString().indexOf("[native code]")!==-1&&Promise.name==="Promise"?this:i.convert(Object.assign({},this),Promise.prototype),u=l.call(c,a,o);return i.convert(u,this.__proto__)},i.prototype.thenExternal=function(a,o){return Promise.prototype.then.call(this,a,o)},i.prototype.thenList=function(a){var o=this;return a.forEach(function(l){o=o.thenCore(l)}),o},i.prototype.catch=function(a){a&&(a=a.bind(this));var o=Promise.prototype.catch.call(this,a);return i.convert(o,this)},i.prototype.catchExternal=function(a){return Promise.prototype.catch.call(this,a)},i.prototype.error=function(a){return this.then(function(){throw new Error(a)})},i.prototype.using=i.prototype.set,i.prototype.saveAs=i.prototype.save,i.prototype.export=i.prototype.output,i.prototype.run=i.prototype.then,kt.getPageSize=function(a,o,l){if(Nr(a)==="object"){var c=a;a=c.orientation,o=c.unit||o,l=c.format||l}o=o||"mm",l=l||"a4",a=(""+(a||"P")).toLowerCase();var u,f=(""+l).toLowerCase(),p={a0:[2383.94,3370.39],a1:[1683.78,2383.94],a2:[1190.55,1683.78],a3:[841.89,1190.55],a4:[595.28,841.89],a5:[419.53,595.28],a6:[297.64,419.53],a7:[209.76,297.64],a8:[147.4,209.76],a9:[104.88,147.4],a10:[73.7,104.88],b0:[2834.65,4008.19],b1:[2004.09,2834.65],b2:[1417.32,2004.09],b3:[1000.63,1417.32],b4:[708.66,1000.63],b5:[498.9,708.66],b6:[354.33,498.9],b7:[249.45,354.33],b8:[175.75,249.45],b9:[124.72,175.75],b10:[87.87,124.72],c0:[2599.37,3676.54],c1:[1836.85,2599.37],c2:[1298.27,1836.85],c3:[918.43,1298.27],c4:[649.13,918.43],c5:[459.21,649.13],c6:[323.15,459.21],c7:[229.61,323.15],c8:[161.57,229.61],c9:[113.39,161.57],c10:[79.37,113.39],dl:[311.81,623.62],letter:[612,792],"government-letter":[576,756],legal:[612,1008],"junior-legal":[576,360],ledger:[1224,792],tabloid:[792,1224],"credit-card":[153,243]};switch(o){case"pt":u=1;break;case"mm":u=72/25.4;break;case"cm":u=72/2.54;break;case"in":u=72;break;case"px":u=.75;break;case"pc":case"em":u=12;break;case"ex":u=6;break;default:throw"Invalid unit: "+o}var m,b=0,B=0;if(p.hasOwnProperty(f))b=p[f][1]/u,B=p[f][0]/u;else try{b=l[1],B=l[0]}catch{throw new Error("Invalid format: "+l)}if(a==="p"||a==="portrait")a="p",B>b&&(m=B,B=b,b=m);else{if(a!=="l"&&a!=="landscape")throw"Invalid orientation: "+a;a="l",b>B&&(m=B,B=b,b=m)}return{width:B,height:b,unit:o,k:u,orientation:a}},t.html=function(a,o){(o=o||{}).callback=o.callback||function(){},o.html2canvas=o.html2canvas||{},o.html2canvas.canvas=o.html2canvas.canvas||this.canvas,o.jsPDF=o.jsPDF||this,o.fontFaces=o.fontFaces?o.fontFaces.map(Ax):null;var l=new i(o);return o.worker?l:l.from(a).doCallback()}}(kt.API),kt.API.addJS=function(t){return vN=t,this.internal.events.subscribe("postPutResources",function(){fg=this.internal.newObject(),this.internal.out("<<"),this.internal.out("/Names [(EmbeddedJS) "+(fg+1)+" 0 R]"),this.internal.out(">>"),this.internal.out("endobj"),gN=this.internal.newObject(),this.internal.out("<<"),this.internal.out("/S /JavaScript"),this.internal.out("/JS ("+vN+")"),this.internal.out(">>"),this.internal.out("endobj")}),this.internal.events.subscribe("putCatalog",function(){fg!==void 0&&gN!==void 0&&this.internal.out("/Names <</JavaScript "+fg+" 0 R>>")}),this},function(t){var e;t.events.push(["postPutResources",function(){var r=this,n=/^(\d+) 0 obj$/;if(this.outline.root.children.length>0)for(var s=r.outline.render().split(/\r\n/),i=0;i<s.length;i++){var a=s[i],o=n.exec(a);if(o!=null){var l=o[1];r.internal.newObjectDeferredBegin(l,!1)}r.internal.write(a)}if(this.outline.createNamedDestinations){var c=this.internal.pages.length,u=[];for(i=0;i<c;i++){var f=r.internal.newObject();u.push(f);var p=r.internal.getPageInfo(i+1);r.internal.write("<< /D["+p.objId+" 0 R /XYZ null null null]>> endobj")}var m=r.internal.newObject();for(r.internal.write("<< /Names [ "),i=0;i<u.length;i++)r.internal.write("(page_"+(i+1)+")"+u[i]+" 0 R");r.internal.write(" ] >>","endobj"),e=r.internal.newObject(),r.internal.write("<< /Dests "+m+" 0 R"),r.internal.write(">>","endobj")}}]),t.events.push(["putCatalog",function(){this.outline.root.children.length>0&&(this.internal.write("/Outlines",this.outline.makeRef(this.outline.root)),this.outline.createNamedDestinations&&this.internal.write("/Names "+e+" 0 R"))}]),t.events.push(["initialized",function(){var r=this;r.outline={createNamedDestinations:!1,root:{children:[]}},r.outline.add=function(n,s,i){var a={title:s,options:i,children:[]};return n==null&&(n=this.root),n.children.push(a),a},r.outline.render=function(){return this.ctx={},this.ctx.val="",this.ctx.pdf=r,this.genIds_r(this.root),this.renderRoot(this.root),this.renderItems(this.root),this.ctx.val},r.outline.genIds_r=function(n){n.id=r.internal.newObjectDeferred();for(var s=0;s<n.children.length;s++)this.genIds_r(n.children[s])},r.outline.renderRoot=function(n){this.objStart(n),this.line("/Type /Outlines"),n.children.length>0&&(this.line("/First "+this.makeRef(n.children[0])),this.line("/Last "+this.makeRef(n.children[n.children.length-1]))),this.line("/Count "+this.count_r({count:0},n)),this.objEnd()},r.outline.renderItems=function(n){for(var s=this.ctx.pdf.internal.getVerticalCoordinateString,i=0;i<n.children.length;i++){var a=n.children[i];this.objStart(a),this.line("/Title "+this.makeString(a.title)),this.line("/Parent "+this.makeRef(n)),i>0&&this.line("/Prev "+this.makeRef(n.children[i-1])),i<n.children.length-1&&this.line("/Next "+this.makeRef(n.children[i+1])),a.children.length>0&&(this.line("/First "+this.makeRef(a.children[0])),this.line("/Last "+this.makeRef(a.children[a.children.length-1])));var o=this.count=this.count_r({count:0},a);if(o>0&&this.line("/Count "+o),a.options&&a.options.pageNumber){var l=r.internal.getPageInfo(a.options.pageNumber);this.line("/Dest ["+l.objId+" 0 R /XYZ 0 "+s(0)+" 0]")}this.objEnd()}for(var c=0;c<n.children.length;c++)this.renderItems(n.children[c])},r.outline.line=function(n){this.ctx.val+=n+`\r
`},r.outline.makeRef=function(n){return n.id+" 0 R"},r.outline.makeString=function(n){return"("+r.internal.pdfEscape(n)+")"},r.outline.objStart=function(n){this.ctx.val+=`\r
`+n.id+` 0 obj\r
<<\r
`},r.outline.objEnd=function(){this.ctx.val+=`>> \r
endobj\r
`},r.outline.count_r=function(n,s){for(var i=0;i<s.children.length;i++)n.count++,this.count_r(n,s.children[i]);return n.count}}])}(kt.API),function(t){var e=[192,193,194,195,196,197,198,199];t.processJPEG=function(r,n,s,i,a,o){var l,c=this.decode.DCT_DECODE,u=null;if(typeof r=="string"||this.__addimage__.isArrayBuffer(r)||this.__addimage__.isArrayBufferView(r)){switch(r=a||r,r=this.__addimage__.isArrayBuffer(r)?new Uint8Array(r):r,(l=function(f){for(var p,m=256*f.charCodeAt(4)+f.charCodeAt(5),b=f.length,B={width:0,height:0,numcomponents:1},_=4;_<b;_+=2){if(_+=m,e.indexOf(f.charCodeAt(_+1))!==-1){p=256*f.charCodeAt(_+5)+f.charCodeAt(_+6),B={width:256*f.charCodeAt(_+7)+f.charCodeAt(_+8),height:p,numcomponents:f.charCodeAt(_+9)};break}m=256*f.charCodeAt(_+2)+f.charCodeAt(_+3)}return B}(r=this.__addimage__.isArrayBufferView(r)?this.__addimage__.arrayBufferToBinaryString(r):r)).numcomponents){case 1:o=this.color_spaces.DEVICE_GRAY;break;case 4:o=this.color_spaces.DEVICE_CMYK;break;case 3:o=this.color_spaces.DEVICE_RGB}u={data:r,width:l.width,height:l.height,colorSpace:o,bitsPerComponent:8,filter:c,index:n,alias:s}}return u}}(kt.API);var Pu,pg,wN,yN,xN,qz=function(){var t,e,r;function n(i){var a,o,l,c,u,f,p,m,b,B,_,w,y,S;for(this.data=i,this.pos=8,this.palette=[],this.imgData=[],this.transparency={},this.animation=null,this.text={},f=null;;){switch(a=this.readUInt32(),b=(function(){var O,R;for(R=[],O=0;O<4;++O)R.push(String.fromCharCode(this.data[this.pos++]));return R}).call(this).join("")){case"IHDR":this.width=this.readUInt32(),this.height=this.readUInt32(),this.bits=this.data[this.pos++],this.colorType=this.data[this.pos++],this.compressionMethod=this.data[this.pos++],this.filterMethod=this.data[this.pos++],this.interlaceMethod=this.data[this.pos++];break;case"acTL":this.animation={numFrames:this.readUInt32(),numPlays:this.readUInt32()||1/0,frames:[]};break;case"PLTE":this.palette=this.read(a);break;case"fcTL":f&&this.animation.frames.push(f),this.pos+=4,f={width:this.readUInt32(),height:this.readUInt32(),xOffset:this.readUInt32(),yOffset:this.readUInt32()},u=this.readUInt16(),c=this.readUInt16()||100,f.delay=1e3*u/c,f.disposeOp=this.data[this.pos++],f.blendOp=this.data[this.pos++],f.data=[];break;case"IDAT":case"fdAT":for(b==="fdAT"&&(this.pos+=4,a-=4),i=(f!=null?f.data:void 0)||this.imgData,w=0;0<=a?w<a:w>a;0<=a?++w:--w)i.push(this.data[this.pos++]);break;case"tRNS":switch(this.transparency={},this.colorType){case 3:if(l=this.palette.length/3,this.transparency.indexed=this.read(a),this.transparency.indexed.length>l)throw new Error("More transparent colors than palette size");if((B=l-this.transparency.indexed.length)>0)for(y=0;0<=B?y<B:y>B;0<=B?++y:--y)this.transparency.indexed.push(255);break;case 0:this.transparency.grayscale=this.read(a)[0];break;case 2:this.transparency.rgb=this.read(a)}break;case"tEXt":p=(_=this.read(a)).indexOf(0),m=String.fromCharCode.apply(String,_.slice(0,p)),this.text[m]=String.fromCharCode.apply(String,_.slice(p+1));break;case"IEND":return f&&this.animation.frames.push(f),this.colors=(function(){switch(this.colorType){case 0:case 3:case 4:return 1;case 2:case 6:return 3}}).call(this),this.hasAlphaChannel=(S=this.colorType)===4||S===6,o=this.colors+(this.hasAlphaChannel?1:0),this.pixelBitlength=this.bits*o,this.colorSpace=(function(){switch(this.colors){case 1:return"DeviceGray";case 3:return"DeviceRGB"}}).call(this),void(this.imgData=new Uint8Array(this.imgData));default:this.pos+=a}if(this.pos+=4,this.pos>this.data.length)throw new Error("Incomplete or corrupt PNG file")}}n.prototype.read=function(i){var a,o;for(o=[],a=0;0<=i?a<i:a>i;0<=i?++a:--a)o.push(this.data[this.pos++]);return o},n.prototype.readUInt32=function(){return this.data[this.pos++]<<24|this.data[this.pos++]<<16|this.data[this.pos++]<<8|this.data[this.pos++]},n.prototype.readUInt16=function(){return this.data[this.pos++]<<8|this.data[this.pos++]},n.prototype.decodePixels=function(i){var a=this.pixelBitlength/8,o=new Uint8Array(this.width*this.height*a),l=0,c=this;if(i==null&&(i=this.imgData),i.length===0)return new Uint8Array(0);function u(f,p,m,b){var B,_,w,y,S,O,R,M,I,E,L,D,N,T,F,ee,ce,re,de,W,ue,ae=Math.ceil((c.width-f)/m),Ee=Math.ceil((c.height-p)/b),Q=c.width==ae&&c.height==Ee;for(T=a*ae,D=Q?o:new Uint8Array(T*Ee),O=i.length,N=0,_=0;N<Ee&&l<O;){switch(i[l++]){case 0:for(y=ce=0;ce<T;y=ce+=1)D[_++]=i[l++];break;case 1:for(y=re=0;re<T;y=re+=1)B=i[l++],S=y<a?0:D[_-a],D[_++]=(B+S)%256;break;case 2:for(y=de=0;de<T;y=de+=1)B=i[l++],w=(y-y%a)/a,F=N&&D[(N-1)*T+w*a+y%a],D[_++]=(F+B)%256;break;case 3:for(y=W=0;W<T;y=W+=1)B=i[l++],w=(y-y%a)/a,S=y<a?0:D[_-a],F=N&&D[(N-1)*T+w*a+y%a],D[_++]=(B+Math.floor((S+F)/2))%256;break;case 4:for(y=ue=0;ue<T;y=ue+=1)B=i[l++],w=(y-y%a)/a,S=y<a?0:D[_-a],N===0?F=ee=0:(F=D[(N-1)*T+w*a+y%a],ee=w&&D[(N-1)*T+(w-1)*a+y%a]),R=S+F-ee,M=Math.abs(R-S),E=Math.abs(R-F),L=Math.abs(R-ee),I=M<=E&&M<=L?S:E<=L?F:ee,D[_++]=(B+I)%256;break;default:throw new Error("Invalid filter algorithm: "+i[l-1])}if(!Q){var k=((p+N*b)*c.width+f)*a,z=N*T;for(y=0;y<ae;y+=1){for(var te=0;te<a;te+=1)o[k++]=D[z++];k+=(m-1)*a}}N++}}return i=bz(i),c.interlaceMethod==1?(u(0,0,8,8),u(4,0,8,8),u(0,4,4,8),u(2,0,4,4),u(0,2,2,4),u(1,0,2,2),u(0,1,1,2)):u(0,0,1,1),o},n.prototype.decodePalette=function(){var i,a,o,l,c,u,f,p,m;for(o=this.palette,u=this.transparency.indexed||[],c=new Uint8Array((u.length||0)+o.length),l=0,i=0,a=f=0,p=o.length;f<p;a=f+=3)c[l++]=o[a],c[l++]=o[a+1],c[l++]=o[a+2],c[l++]=(m=u[i++])!=null?m:255;return c},n.prototype.copyToImageData=function(i,a){var o,l,c,u,f,p,m,b,B,_,w;if(l=this.colors,B=null,o=this.hasAlphaChannel,this.palette.length&&(B=(w=this._decodedPalette)!=null?w:this._decodedPalette=this.decodePalette(),l=4,o=!0),b=(c=i.data||i).length,f=B||a,u=p=0,l===1)for(;u<b;)m=B?4*a[u/4]:p,_=f[m++],c[u++]=_,c[u++]=_,c[u++]=_,c[u++]=o?f[m++]:255,p=m;else for(;u<b;)m=B?4*a[u/4]:p,c[u++]=f[m++],c[u++]=f[m++],c[u++]=f[m++],c[u++]=o?f[m++]:255,p=m},n.prototype.decode=function(){var i;return i=new Uint8Array(this.width*this.height*4),this.copyToImageData(i,this.decodePixels()),i};var s=function(){if(Object.prototype.toString.call(Ot)==="[object Window]"){try{e=Ot.document.createElement("canvas"),r=e.getContext("2d")}catch{return!1}return!0}return!1};return s(),t=function(i){var a;if(s()===!0)return r.width=i.width,r.height=i.height,r.clearRect(0,0,i.width,i.height),r.putImageData(i,0,0),(a=new Image).src=e.toDataURL(),a;throw new Error("This method requires a Browser with Canvas-capability.")},n.prototype.decodeFrames=function(i){var a,o,l,c,u,f,p,m;if(this.animation){for(m=[],o=u=0,f=(p=this.animation.frames).length;u<f;o=++u)a=p[o],l=i.createImageData(a.width,a.height),c=this.decodePixels(new Uint8Array(a.data)),this.copyToImageData(l,c),a.imageData=l,m.push(a.image=t(l));return m}},n.prototype.renderFrame=function(i,a){var o,l,c;return o=(l=this.animation.frames)[a],c=l[a-1],a===0&&i.clearRect(0,0,this.width,this.height),(c!=null?c.disposeOp:void 0)===1?i.clearRect(c.xOffset,c.yOffset,c.width,c.height):(c!=null?c.disposeOp:void 0)===2&&i.putImageData(c.imageData,c.xOffset,c.yOffset),o.blendOp===0&&i.clearRect(o.xOffset,o.yOffset,o.width,o.height),i.drawImage(o.image,o.xOffset,o.yOffset)},n.prototype.animate=function(i){var a,o,l,c,u,f,p=this;return o=0,f=this.animation,c=f.numFrames,l=f.frames,u=f.numPlays,(a=function(){var m,b;if(m=o++%c,b=l[m],p.renderFrame(i,m),c>1&&o/c<u)return p.animation._timeout=setTimeout(a,b.delay)})()},n.prototype.stopAnimation=function(){var i;return clearTimeout((i=this.animation)!=null?i._timeout:void 0)},n.prototype.render=function(i){var a,o;return i._png&&i._png.stopAnimation(),i._png=this,i.width=this.width,i.height=this.height,a=i.getContext("2d"),this.animation?(this.decodeFrames(a),this.animate(a)):(o=a.createImageData(this.width,this.height),this.copyToImageData(o,this.decodePixels()),a.putImageData(o,0,0))},n}();/**
 * @license
 *
 * Copyright (c) 2014 James Robb, https://github.com/jamesbrobb
 *
 * Permission is hereby granted, free of charge, to any person obtaining
 * a copy of this software and associated documentation files (the
 * "Software"), to deal in the Software without restriction, including
 * without limitation the rights to use, copy, modify, merge, publish,
 * distribute, sublicense, and/or sell copies of the Software, and to
 * permit persons to whom the Software is furnished to do so, subject to
 * the following conditions:
 *
 * The above copyright notice and this permission notice shall be
 * included in all copies or substantial portions of the Software.
 *
 * THE SOFTWARE IS PROVIDED "AS IS", WITHOUT WARRANTY OF ANY KIND,
 * EXPRESS OR IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF
 * MERCHANTABILITY, FITNESS FOR A PARTICULAR PURPOSE AND
 * NONINFRINGEMENT. IN NO EVENT SHALL THE AUTHORS OR COPYRIGHT HOLDERS BE
 * LIABLE FOR ANY CLAIM, DAMAGES OR OTHER LIABILITY, WHETHER IN AN ACTION
 * OF CONTRACT, TORT OR OTHERWISE, ARISING FROM, OUT OF OR IN CONNECTION
 * WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN THE SOFTWARE.
 * ====================================================================
 *//**
 * @license
 * (c) Dean McNamee <dean@gmail.com>, 2013.
 *
 * https://github.com/deanm/omggif
 *
 * Permission is hereby granted, free of charge, to any person obtaining a copy
 * of this software and associated documentation files (the "Software"), to
 * deal in the Software without restriction, including without limitation the
 * rights to use, copy, modify, merge, publish, distribute, sublicense, and/or
 * sell copies of the Software, and to permit persons to whom the Software is
 * furnished to do so, subject to the following conditions:
 *
 * The above copyright notice and this permission notice shall be included in
 * all copies or substantial portions of the Software.
 *
 * THE SOFTWARE IS PROVIDED "AS IS", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR
 * IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY,
 * FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE
 * AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER
 * LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING
 * FROM, OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS
 * IN THE SOFTWARE.
 *
 * omggif is a JavaScript implementation of a GIF 89a encoder and decoder,
 * including animation and compression.  It does not rely on any specific
 * underlying system, so should run in the browser, Node, or Plask.
 */function Gz(t){var e=0;if(t[e++]!==71||t[e++]!==73||t[e++]!==70||t[e++]!==56||(t[e++]+1&253)!=56||t[e++]!==97)throw new Error("Invalid GIF 87a/89a header.");var r=t[e++]|t[e++]<<8,n=t[e++]|t[e++]<<8,s=t[e++],i=s>>7,a=1<<(7&s)+1;t[e++],t[e++];var o=null,l=null;i&&(o=e,l=a,e+=3*a);var c=!0,u=[],f=0,p=null,m=0,b=null;for(this.width=r,this.height=n;c&&e<t.length;)switch(t[e++]){case 33:switch(t[e++]){case 255:if(t[e]!==11||t[e+1]==78&&t[e+2]==69&&t[e+3]==84&&t[e+4]==83&&t[e+5]==67&&t[e+6]==65&&t[e+7]==80&&t[e+8]==69&&t[e+9]==50&&t[e+10]==46&&t[e+11]==48&&t[e+12]==3&&t[e+13]==1&&t[e+16]==0)e+=14,b=t[e++]|t[e++]<<8,e++;else for(e+=12;;){if(!((N=t[e++])>=0))throw Error("Invalid block size");if(N===0)break;e+=N}break;case 249:if(t[e++]!==4||t[e+4]!==0)throw new Error("Invalid graphics extension block.");var B=t[e++];f=t[e++]|t[e++]<<8,p=t[e++],!(1&B)&&(p=null),m=B>>2&7,e++;break;case 254:for(;;){if(!((N=t[e++])>=0))throw Error("Invalid block size");if(N===0)break;e+=N}break;default:throw new Error("Unknown graphic control label: 0x"+t[e-1].toString(16))}break;case 44:var _=t[e++]|t[e++]<<8,w=t[e++]|t[e++]<<8,y=t[e++]|t[e++]<<8,S=t[e++]|t[e++]<<8,O=t[e++],R=O>>6&1,M=1<<(7&O)+1,I=o,E=l,L=!1;O>>7&&(L=!0,I=e,E=M,e+=3*M);var D=e;for(e++;;){var N;if(!((N=t[e++])>=0))throw Error("Invalid block size");if(N===0)break;e+=N}u.push({x:_,y:w,width:y,height:S,has_local_palette:L,palette_offset:I,palette_size:E,data_offset:D,data_length:e-D,transparent_index:p,interlaced:!!R,delay:f,disposal:m});break;case 59:c=!1;break;default:throw new Error("Unknown gif block: 0x"+t[e-1].toString(16))}this.numFrames=function(){return u.length},this.loopCount=function(){return b},this.frameInfo=function(T){if(T<0||T>=u.length)throw new Error("Frame index out of range.");return u[T]},this.decodeAndBlitFrameBGRA=function(T,F){var ee=this.frameInfo(T),ce=ee.width*ee.height,re=new Uint8Array(ce);bN(t,ee.data_offset,re,ce);var de=ee.palette_offset,W=ee.transparent_index;W===null&&(W=256);var ue=ee.width,ae=r-ue,Ee=ue,Q=4*(ee.y*r+ee.x),k=4*((ee.y+ee.height)*r+ee.x),z=Q,te=4*ae;ee.interlaced===!0&&(te+=4*r*7);for(var $=8,ne=0,X=re.length;ne<X;++ne){var he=re[ne];if(Ee===0&&(Ee=ue,(z+=te)>=k&&(te=4*ae+4*r*($-1),z=Q+(ue+ae)*($<<1),$>>=1)),he===W)z+=4;else{var ge=t[de+3*he],Ce=t[de+3*he+1],Te=t[de+3*he+2];F[z++]=Te,F[z++]=Ce,F[z++]=ge,F[z++]=255}--Ee}},this.decodeAndBlitFrameRGBA=function(T,F){var ee=this.frameInfo(T),ce=ee.width*ee.height,re=new Uint8Array(ce);bN(t,ee.data_offset,re,ce);var de=ee.palette_offset,W=ee.transparent_index;W===null&&(W=256);var ue=ee.width,ae=r-ue,Ee=ue,Q=4*(ee.y*r+ee.x),k=4*((ee.y+ee.height)*r+ee.x),z=Q,te=4*ae;ee.interlaced===!0&&(te+=4*r*7);for(var $=8,ne=0,X=re.length;ne<X;++ne){var he=re[ne];if(Ee===0&&(Ee=ue,(z+=te)>=k&&(te=4*ae+4*r*($-1),z=Q+(ue+ae)*($<<1),$>>=1)),he===W)z+=4;else{var ge=t[de+3*he],Ce=t[de+3*he+1],Te=t[de+3*he+2];F[z++]=ge,F[z++]=Ce,F[z++]=Te,F[z++]=255}--Ee}}}function bN(t,e,r,n){for(var s=t[e++],i=1<<s,a=i+1,o=a+1,l=s+1,c=(1<<l)-1,u=0,f=0,p=0,m=t[e++],b=new Int32Array(4096),B=null;;){for(;u<16&&m!==0;)f|=t[e++]<<u,u+=8,m===1?m=t[e++]:--m;if(u<l)break;var _=f&c;if(f>>=l,u-=l,_!==i){if(_===a)break;for(var w=_<o?_:B,y=0,S=w;S>i;)S=b[S]>>8,++y;var O=S;if(p+y+(w!==_?1:0)>n)return void Lr.log("Warning, gif stream longer than expected.");r[p++]=O;var R=p+=y;for(w!==_&&(r[p++]=O),S=w;y--;)S=b[S],r[--R]=255&S,S>>=8;B!==null&&o<4096&&(b[o++]=B<<8|O,o>=c+1&&l<12&&(++l,c=c<<1|1)),B=_}else o=a+1,c=(1<<(l=s+1))-1,B=null}return p!==n&&Lr.log("Warning, gif stream shorter than expected."),r}/**
 * @license
  Copyright (c) 2008, Adobe Systems Incorporated
  All rights reserved.

  Redistribution and use in source and binary forms, with or without 
  modification, are permitted provided that the following conditions are
  met:

  * Redistributions of source code must retain the above copyright notice, 
    this list of conditions and the following disclaimer.
  
  * Redistributions in binary form must reproduce the above copyright
    notice, this list of conditions and the following disclaimer in the 
    documentation and/or other materials provided with the distribution.
  
  * Neither the name of Adobe Systems Incorporated nor the names of its 
    contributors may be used to endorse or promote products derived from 
    this software without specific prior written permission.

  THIS SOFTWARE IS PROVIDED BY THE COPYRIGHT HOLDERS AND CONTRIBUTORS "AS
  IS" AND ANY EXPRESS OR IMPLIED WARRANTIES, INCLUDING, BUT NOT LIMITED TO,
  THE IMPLIED WARRANTIES OF MERCHANTABILITY AND FITNESS FOR A PARTICULAR
  PURPOSE ARE DISCLAIMED. IN NO EVENT SHALL THE COPYRIGHT OWNER OR 
  CONTRIBUTORS BE LIABLE FOR ANY DIRECT, INDIRECT, INCIDENTAL, SPECIAL,
  EXEMPLARY, OR CONSEQUENTIAL DAMAGES (INCLUDING, BUT NOT LIMITED TO,
  PROCUREMENT OF SUBSTITUTE GOODS OR SERVICES; LOSS OF USE, DATA, OR
  PROFITS; OR BUSINESS INTERRUPTION) HOWEVER CAUSED AND ON ANY THEORY OF
  LIABILITY, WHETHER IN CONTRACT, STRICT LIABILITY, OR TORT (INCLUDING
  NEGLIGENCE OR OTHERWISE) ARISING IN ANY WAY OUT OF THE USE OF THIS
  SOFTWARE, EVEN IF ADVISED OF THE POSSIBILITY OF SUCH DAMAGE.
*/function Jy(t){var e,r,n,s,i,a=Math.floor,o=new Array(64),l=new Array(64),c=new Array(64),u=new Array(64),f=new Array(65535),p=new Array(65535),m=new Array(64),b=new Array(64),B=[],_=0,w=7,y=new Array(64),S=new Array(64),O=new Array(64),R=new Array(256),M=new Array(2048),I=[0,1,5,6,14,15,27,28,2,4,7,13,16,26,29,42,3,8,12,17,25,30,41,43,9,11,18,24,31,40,44,53,10,19,23,32,39,45,52,54,20,22,33,38,46,51,55,60,21,34,37,47,50,56,59,61,35,36,48,49,57,58,62,63],E=[0,0,1,5,1,1,1,1,1,1,0,0,0,0,0,0,0],L=[0,1,2,3,4,5,6,7,8,9,10,11],D=[0,0,2,1,3,3,2,4,3,5,5,4,4,0,0,1,125],N=[1,2,3,0,4,17,5,18,33,49,65,6,19,81,97,7,34,113,20,50,129,145,161,8,35,66,177,193,21,82,209,240,36,51,98,114,130,9,10,22,23,24,25,26,37,38,39,40,41,42,52,53,54,55,56,57,58,67,68,69,70,71,72,73,74,83,84,85,86,87,88,89,90,99,100,101,102,103,104,105,106,115,116,117,118,119,120,121,122,131,132,133,134,135,136,137,138,146,147,148,149,150,151,152,153,154,162,163,164,165,166,167,168,169,170,178,179,180,181,182,183,184,185,186,194,195,196,197,198,199,200,201,202,210,211,212,213,214,215,216,217,218,225,226,227,228,229,230,231,232,233,234,241,242,243,244,245,246,247,248,249,250],T=[0,0,3,1,1,1,1,1,1,1,1,1,0,0,0,0,0],F=[0,1,2,3,4,5,6,7,8,9,10,11],ee=[0,0,2,1,2,4,4,3,4,7,5,4,4,0,1,2,119],ce=[0,1,2,3,17,4,5,33,49,6,18,65,81,7,97,113,19,34,50,129,8,20,66,145,161,177,193,9,35,51,82,240,21,98,114,209,10,22,36,52,225,37,241,23,24,25,26,38,39,40,41,42,53,54,55,56,57,58,67,68,69,70,71,72,73,74,83,84,85,86,87,88,89,90,99,100,101,102,103,104,105,106,115,116,117,118,119,120,121,122,130,131,132,133,134,135,136,137,138,146,147,148,149,150,151,152,153,154,162,163,164,165,166,167,168,169,170,178,179,180,181,182,183,184,185,186,194,195,196,197,198,199,200,201,202,210,211,212,213,214,215,216,217,218,226,227,228,229,230,231,232,233,234,242,243,244,245,246,247,248,249,250];function re(Q,k){for(var z=0,te=0,$=new Array,ne=1;ne<=16;ne++){for(var X=1;X<=Q[ne];X++)$[k[te]]=[],$[k[te]][0]=z,$[k[te]][1]=ne,te++,z++;z*=2}return $}function de(Q){for(var k=Q[0],z=Q[1]-1;z>=0;)k&1<<z&&(_|=1<<w),z--,--w<0&&(_==255?(W(255),W(0)):W(_),w=7,_=0)}function W(Q){B.push(Q)}function ue(Q){W(Q>>8&255),W(255&Q)}function ae(Q,k,z,te,$){for(var ne,X=$[0],he=$[240],ge=function(Ue,Pe){var Ge,qe,tt,Ze,vt,ht,Ct,Ht,Et,se,ve=0;for(Et=0;Et<8;++Et){Ge=Ue[ve],qe=Ue[ve+1],tt=Ue[ve+2],Ze=Ue[ve+3],vt=Ue[ve+4],ht=Ue[ve+5],Ct=Ue[ve+6];var We=Ge+(Ht=Ue[ve+7]),at=Ge-Ht,wt=qe+Ct,_t=qe-Ct,rt=tt+ht,ur=tt-ht,St=Ze+vt,Ur=Ze-vt,sr=We+St,fr=We-St,hn=wt+rt,vr=wt-rt;Ue[ve]=sr+hn,Ue[ve+4]=sr-hn;var jt=.707106781*(vr+fr);Ue[ve+2]=fr+jt,Ue[ve+6]=fr-jt;var Yt=.382683433*((sr=Ur+ur)-(vr=_t+at)),cs=.5411961*sr+Yt,zr=1.306562965*vr+Yt,mr=.707106781*(hn=ur+_t),Qe=at+mr,Oe=at-mr;Ue[ve+5]=Oe+cs,Ue[ve+3]=Oe-cs,Ue[ve+1]=Qe+zr,Ue[ve+7]=Qe-zr,ve+=8}for(ve=0,Et=0;Et<8;++Et){Ge=Ue[ve],qe=Ue[ve+8],tt=Ue[ve+16],Ze=Ue[ve+24],vt=Ue[ve+32],ht=Ue[ve+40],Ct=Ue[ve+48];var Ft=Ge+(Ht=Ue[ve+56]),ft=Ge-Ht,ct=qe+Ct,Ut=qe-Ct,it=tt+ht,Nt=tt-ht,be=Ze+vt,et=Ze-vt,nt=Ft+be,Mt=Ft-be,Zt=ct+it,It=ct-it;Ue[ve]=nt+Zt,Ue[ve+32]=nt-Zt;var mt=.707106781*(It+Mt);Ue[ve+16]=Mt+mt,Ue[ve+48]=Mt-mt;var Es=.382683433*((nt=et+Nt)-(It=Ut+ft)),ma=.5411961*nt+Es,ga=1.306562965*It+Es,va=.707106781*(Zt=Nt+Ut),$a=ft+va,Wa=ft-va;Ue[ve+40]=Wa+ma,Ue[ve+24]=Wa-ma,Ue[ve+8]=$a+ga,Ue[ve+56]=$a-ga,ve++}for(Et=0;Et<64;++Et)se=Ue[Et]*Pe[Et],m[Et]=se>0?se+.5|0:se-.5|0;return m}(Q,k),Ce=0;Ce<64;++Ce)b[I[Ce]]=ge[Ce];var Te=b[0]-z;z=b[0],Te==0?de(te[0]):(de(te[p[ne=32767+Te]]),de(f[ne]));for(var Fe=63;Fe>0&&b[Fe]==0;)Fe--;if(Fe==0)return de(X),z;for(var oe,le=1;le<=Fe;){for(var G=le;b[le]==0&&le<=Fe;)++le;var Re=le-G;if(Re>=16){oe=Re>>4;for(var je=1;je<=oe;++je)de(he);Re&=15}ne=32767+b[le],de($[(Re<<4)+p[ne]]),de(f[ne]),le++}return Fe!=63&&de(X),z}function Ee(Q){Q=Math.min(Math.max(Q,1),100),i!=Q&&(function(k){for(var z=[16,11,10,16,24,40,51,61,12,12,14,19,26,58,60,55,14,13,16,24,40,57,69,56,14,17,22,29,51,87,80,62,18,22,37,56,68,109,103,77,24,35,55,64,81,104,113,92,49,64,78,87,103,121,120,101,72,92,95,98,112,100,103,99],te=0;te<64;te++){var $=a((z[te]*k+50)/100);$=Math.min(Math.max($,1),255),o[I[te]]=$}for(var ne=[17,18,24,47,99,99,99,99,18,21,26,66,99,99,99,99,24,26,56,99,99,99,99,99,47,66,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99],X=0;X<64;X++){var he=a((ne[X]*k+50)/100);he=Math.min(Math.max(he,1),255),l[I[X]]=he}for(var ge=[1,1.387039845,1.306562965,1.175875602,1,.785694958,.5411961,.275899379],Ce=0,Te=0;Te<8;Te++)for(var Fe=0;Fe<8;Fe++)c[Ce]=1/(o[I[Ce]]*ge[Te]*ge[Fe]*8),u[Ce]=1/(l[I[Ce]]*ge[Te]*ge[Fe]*8),Ce++}(Q<50?Math.floor(5e3/Q):Math.floor(200-2*Q)),i=Q)}this.encode=function(Q,k){k&&Ee(k),B=new Array,_=0,w=7,ue(65496),ue(65504),ue(16),W(74),W(70),W(73),W(70),W(0),W(1),W(1),W(0),ue(1),ue(1),W(0),W(0),function(){ue(65499),ue(132),W(0);for(var qe=0;qe<64;qe++)W(o[qe]);W(1);for(var tt=0;tt<64;tt++)W(l[tt])}(),function(qe,tt){ue(65472),ue(17),W(8),ue(tt),ue(qe),W(3),W(1),W(17),W(0),W(2),W(17),W(1),W(3),W(17),W(1)}(Q.width,Q.height),function(){ue(65476),ue(418),W(0);for(var qe=0;qe<16;qe++)W(E[qe+1]);for(var tt=0;tt<=11;tt++)W(L[tt]);W(16);for(var Ze=0;Ze<16;Ze++)W(D[Ze+1]);for(var vt=0;vt<=161;vt++)W(N[vt]);W(1);for(var ht=0;ht<16;ht++)W(T[ht+1]);for(var Ct=0;Ct<=11;Ct++)W(F[Ct]);W(17);for(var Ht=0;Ht<16;Ht++)W(ee[Ht+1]);for(var Et=0;Et<=161;Et++)W(ce[Et])}(),ue(65498),ue(12),W(3),W(1),W(0),W(2),W(17),W(3),W(17),W(0),W(63),W(0);var z=0,te=0,$=0;_=0,w=7,this.encode.displayName="_encode_";for(var ne,X,he,ge,Ce,Te,Fe,oe,le,G=Q.data,Re=Q.width,je=Q.height,Ue=4*Re,Pe=0;Pe<je;){for(ne=0;ne<Ue;){for(Ce=Ue*Pe+ne,Fe=-1,oe=0,le=0;le<64;le++)Te=Ce+(oe=le>>3)*Ue+(Fe=4*(7&le)),Pe+oe>=je&&(Te-=Ue*(Pe+1+oe-je)),ne+Fe>=Ue&&(Te-=ne+Fe-Ue+4),X=G[Te++],he=G[Te++],ge=G[Te++],y[le]=(M[X]+M[he+256>>0]+M[ge+512>>0]>>16)-128,S[le]=(M[X+768>>0]+M[he+1024>>0]+M[ge+1280>>0]>>16)-128,O[le]=(M[X+1280>>0]+M[he+1536>>0]+M[ge+1792>>0]>>16)-128;z=ae(y,c,z,e,n),te=ae(S,u,te,r,s),$=ae(O,u,$,r,s),ne+=32}Pe+=8}if(w>=0){var Ge=[];Ge[1]=w+1,Ge[0]=(1<<w+1)-1,de(Ge)}return ue(65497),new Uint8Array(B)},t=t||50,function(){for(var Q=String.fromCharCode,k=0;k<256;k++)R[k]=Q(k)}(),e=re(E,L),r=re(T,F),n=re(D,N),s=re(ee,ce),function(){for(var Q=1,k=2,z=1;z<=15;z++){for(var te=Q;te<k;te++)p[32767+te]=z,f[32767+te]=[],f[32767+te][1]=z,f[32767+te][0]=te;for(var $=-(k-1);$<=-Q;$++)p[32767+$]=z,f[32767+$]=[],f[32767+$][1]=z,f[32767+$][0]=k-1+$;Q<<=1,k<<=1}}(),function(){for(var Q=0;Q<256;Q++)M[Q]=19595*Q,M[Q+256>>0]=38470*Q,M[Q+512>>0]=7471*Q+32768,M[Q+768>>0]=-11059*Q,M[Q+1024>>0]=-21709*Q,M[Q+1280>>0]=32768*Q+8421375,M[Q+1536>>0]=-27439*Q,M[Q+1792>>0]=-5329*Q}(),Ee(t)}/**
 * @license
 * Copyright (c) 2017 Aras Abbasi
 *
 * Licensed under the MIT License.
 * http://opensource.org/licenses/mit-license
 */function Ji(t,e){if(this.pos=0,this.buffer=t,this.datav=new DataView(t.buffer),this.is_with_alpha=!!e,this.bottom_up=!0,this.flag=String.fromCharCode(this.buffer[0])+String.fromCharCode(this.buffer[1]),this.pos+=2,["BM","BA","CI","CP","IC","PT"].indexOf(this.flag)===-1)throw new Error("Invalid BMP File");this.parseHeader(),this.parseBGR()}function BN(t){function e(E){if(!E)throw Error("assert :P")}function r(E,L,D){for(var N=0;4>N;N++)if(E[L+N]!=D.charCodeAt(N))return!0;return!1}function n(E,L,D,N,T){for(var F=0;F<T;F++)E[L+F]=D[N+F]}function s(E,L,D,N){for(var T=0;T<N;T++)E[L+T]=D}function i(E){return new Int32Array(E)}function a(E,L){for(var D=[],N=0;N<E;N++)D.push(new L);return D}function o(E,L){var D=[];return function N(T,F,ee){for(var ce=ee[F],re=0;re<ce&&(T.push(ee.length>F+1?[]:new L),!(ee.length<F+1));re++)N(T[re],F+1,ee)}(D,0,E),D}var l=function(){var E=this;function L(d,g){for(var x=1<<g-1>>>0;d&x;)x>>>=1;return x?(d&x-1)+x:d}function D(d,g,x,U,V){e(!(U%x));do d[g+(U-=x)]=V;while(0<U)}function N(d,g,x,U,V){if(e(2328>=V),512>=V)var K=i(512);else if((K=i(V))==null)return 0;return function(q,Y,Z,ie,pe,_e){var Ne,Be,Ke=Y,ke=1<<Z,me=i(16),we=i(16);for(e(pe!=0),e(ie!=null),e(q!=null),e(0<Z),Be=0;Be<pe;++Be){if(15<ie[Be])return 0;++me[ie[Be]]}if(me[0]==pe)return 0;for(we[1]=0,Ne=1;15>Ne;++Ne){if(me[Ne]>1<<Ne)return 0;we[Ne+1]=we[Ne]+me[Ne]}for(Be=0;Be<pe;++Be)Ne=ie[Be],0<ie[Be]&&(_e[we[Ne]++]=Be);if(we[15]==1)return(ie=new T).g=0,ie.value=_e[0],D(q,Ke,1,ke,ie),ke;var He,ze=-1,Ve=ke-1,gt=0,At=1,Rt=1,ut=1<<Z;for(Be=0,Ne=1,pe=2;Ne<=Z;++Ne,pe<<=1){if(At+=Rt<<=1,0>(Rt-=me[Ne]))return 0;for(;0<me[Ne];--me[Ne])(ie=new T).g=Ne,ie.value=_e[Be++],D(q,Ke+gt,pe,ut,ie),gt=L(gt,Ne)}for(Ne=Z+1,pe=2;15>=Ne;++Ne,pe<<=1){if(At+=Rt<<=1,0>(Rt-=me[Ne]))return 0;for(;0<me[Ne];--me[Ne]){if(ie=new T,(gt&Ve)!=ze){for(Ke+=ut,He=1<<(ze=Ne)-Z;15>ze&&!(0>=(He-=me[ze]));)++ze,He<<=1;ke+=ut=1<<(He=ze-Z),q[Y+(ze=gt&Ve)].g=He+Z,q[Y+ze].value=Ke-Y-ze}ie.g=Ne-Z,ie.value=_e[Be++],D(q,Ke+(gt>>Z),pe,ut,ie),gt=L(gt,Ne)}}return At!=2*we[15]-1?0:ke}(d,g,x,U,V,K)}function T(){this.value=this.g=0}function F(){this.value=this.g=0}function ee(){this.G=a(5,T),this.H=i(5),this.jc=this.Qb=this.qb=this.nd=0,this.pd=a(Yn,F)}function ce(d,g,x,U){e(d!=null),e(g!=null),e(2147483648>U),d.Ca=254,d.I=0,d.b=-8,d.Ka=0,d.oa=g,d.pa=x,d.Jd=g,d.Yc=x+U,d.Zc=4<=U?x+U-4+1:x,ne(d)}function re(d,g){for(var x=0;0<g--;)x|=he(d,128)<<g;return x}function de(d,g){var x=re(d,g);return X(d)?-x:x}function W(d,g,x,U){var V,K=0;for(e(d!=null),e(g!=null),e(4294967288>U),d.Sb=U,d.Ra=0,d.u=0,d.h=0,4<U&&(U=4),V=0;V<U;++V)K+=g[x+V]<<8*V;d.Ra=K,d.bb=U,d.oa=g,d.pa=x}function ue(d){for(;8<=d.u&&d.bb<d.Sb;)d.Ra>>>=8,d.Ra+=d.oa[d.pa+d.bb]<<cu-8>>>0,++d.bb,d.u-=8;z(d)&&(d.h=1,d.u=0)}function ae(d,g){if(e(0<=g),!d.h&&g<=lu){var x=k(d)&Au[g];return d.u+=g,ue(d),x}return d.h=1,d.u=0}function Ee(){this.b=this.Ca=this.I=0,this.oa=[],this.pa=0,this.Jd=[],this.Yc=0,this.Zc=[],this.Ka=0}function Q(){this.Ra=0,this.oa=[],this.h=this.u=this.bb=this.Sb=this.pa=0}function k(d){return d.Ra>>>(d.u&cu-1)>>>0}function z(d){return e(d.bb<=d.Sb),d.h||d.bb==d.Sb&&d.u>cu}function te(d,g){d.u=g,d.h=z(d)}function $(d){d.u>=lh&&(e(d.u>=lh),ue(d))}function ne(d){e(d!=null&&d.oa!=null),d.pa<d.Zc?(d.I=(d.oa[d.pa++]|d.I<<8)>>>0,d.b+=8):(e(d!=null&&d.oa!=null),d.pa<d.Yc?(d.b+=8,d.I=d.oa[d.pa++]|d.I<<8):d.Ka?d.b=0:(d.I<<=8,d.b+=8,d.Ka=1))}function X(d){return re(d,1)}function he(d,g){var x=d.Ca;0>d.b&&ne(d);var U=d.b,V=x*g>>>8,K=(d.I>>>U>V)+0;for(K?(x-=V,d.I-=V+1<<U>>>0):x=V+1,U=x,V=0;256<=U;)V+=8,U>>=8;return U=7^V+Rs[U],d.b-=U,d.Ca=(x<<U)-1,K}function ge(d,g,x){d[g+0]=x>>24&255,d[g+1]=x>>16&255,d[g+2]=x>>8&255,d[g+3]=x>>0&255}function Ce(d,g){return d[g+0]<<0|d[g+1]<<8}function Te(d,g){return Ce(d,g)|d[g+2]<<16}function Fe(d,g){return Ce(d,g)|Ce(d,g+2)<<16}function oe(d,g){var x=1<<g;return e(d!=null),e(0<g),d.X=i(x),d.X==null?0:(d.Mb=32-g,d.Xa=g,1)}function le(d,g){e(d!=null),e(g!=null),e(d.Xa==g.Xa),n(g.X,0,d.X,0,1<<g.Xa)}function G(){this.X=[],this.Xa=this.Mb=0}function Re(d,g,x,U){e(x!=null),e(U!=null);var V=x[0],K=U[0];return V==0&&(V=(d*K+g/2)/g),K==0&&(K=(g*V+d/2)/d),0>=V||0>=K?0:(x[0]=V,U[0]=K,1)}function je(d,g){return d+(1<<g)-1>>>g}function Ue(d,g){return((4278255360&d)+(4278255360&g)>>>0&4278255360)+((16711935&d)+(16711935&g)>>>0&16711935)>>>0}function Pe(d,g){E[g]=function(x,U,V,K,q,Y,Z){var ie;for(ie=0;ie<q;++ie){var pe=E[d](Y[Z+ie-1],V,K+ie);Y[Z+ie]=Ue(x[U+ie],pe)}}}function Ge(){this.ud=this.hd=this.jd=0}function qe(d,g){return((4278124286&(d^g))>>>1)+(d&g)>>>0}function tt(d){return 0<=d&&256>d?d:0>d?0:255<d?255:void 0}function Ze(d,g){return tt(d+(d-g+.5>>1))}function vt(d,g,x){return Math.abs(g-x)-Math.abs(d-x)}function ht(d,g,x,U,V,K,q){for(U=K[q-1],x=0;x<V;++x)K[q+x]=U=Ue(d[g+x],U)}function Ct(d,g,x,U,V){var K;for(K=0;K<x;++K){var q=d[g+K],Y=q>>8&255,Z=16711935&(Z=(Z=16711935&q)+((Y<<16)+Y));U[V+K]=(4278255360&q)+Z>>>0}}function Ht(d,g){g.jd=d>>0&255,g.hd=d>>8&255,g.ud=d>>16&255}function Et(d,g,x,U,V,K){var q;for(q=0;q<U;++q){var Y=g[x+q],Z=Y>>>8,ie=Y,pe=255&(pe=(pe=Y>>>16)+((d.jd<<24>>24)*(Z<<24>>24)>>>5));ie=255&(ie=(ie=ie+((d.hd<<24>>24)*(Z<<24>>24)>>>5))+((d.ud<<24>>24)*(pe<<24>>24)>>>5)),V[K+q]=(4278255360&Y)+(pe<<16)+ie}}function se(d,g,x,U,V){E[g]=function(K,q,Y,Z,ie,pe,_e,Ne,Be){for(Z=_e;Z<Ne;++Z)for(_e=0;_e<Be;++_e)ie[pe++]=V(Y[U(K[q++])])},E[d]=function(K,q,Y,Z,ie,pe,_e){var Ne=8>>K.b,Be=K.Ea,Ke=K.K[0],ke=K.w;if(8>Ne)for(K=(1<<K.b)-1,ke=(1<<Ne)-1;q<Y;++q){var me,we=0;for(me=0;me<Be;++me)me&K||(we=U(Z[ie++])),pe[_e++]=V(Ke[we&ke]),we>>=Ne}else E["VP8LMapColor"+x](Z,ie,Ke,ke,pe,_e,q,Y,Be)}}function ve(d,g,x,U,V){for(x=g+x;g<x;){var K=d[g++];U[V++]=K>>16&255,U[V++]=K>>8&255,U[V++]=K>>0&255}}function We(d,g,x,U,V){for(x=g+x;g<x;){var K=d[g++];U[V++]=K>>16&255,U[V++]=K>>8&255,U[V++]=K>>0&255,U[V++]=K>>24&255}}function at(d,g,x,U,V){for(x=g+x;g<x;){var K=(q=d[g++])>>16&240|q>>12&15,q=q>>0&240|q>>28&15;U[V++]=K,U[V++]=q}}function wt(d,g,x,U,V){for(x=g+x;g<x;){var K=(q=d[g++])>>16&248|q>>13&7,q=q>>5&224|q>>3&31;U[V++]=K,U[V++]=q}}function _t(d,g,x,U,V){for(x=g+x;g<x;){var K=d[g++];U[V++]=K>>0&255,U[V++]=K>>8&255,U[V++]=K>>16&255}}function rt(d,g,x,U,V,K){if(K==0)for(x=g+x;g<x;)ge(U,((K=d[g++])[0]>>24|K[1]>>8&65280|K[2]<<8&16711680|K[3]<<24)>>>0),V+=32;else n(U,V,d,g,x)}function ur(d,g){E[g][0]=E[d+"0"],E[g][1]=E[d+"1"],E[g][2]=E[d+"2"],E[g][3]=E[d+"3"],E[g][4]=E[d+"4"],E[g][5]=E[d+"5"],E[g][6]=E[d+"6"],E[g][7]=E[d+"7"],E[g][8]=E[d+"8"],E[g][9]=E[d+"9"],E[g][10]=E[d+"10"],E[g][11]=E[d+"11"],E[g][12]=E[d+"12"],E[g][13]=E[d+"13"],E[g][14]=E[d+"0"],E[g][15]=E[d+"0"]}function St(d){return d==xw||d==bw||d==sm||d==Bw}function Ur(){this.eb=[],this.size=this.A=this.fb=0}function sr(){this.y=[],this.f=[],this.ea=[],this.F=[],this.Tc=this.Ed=this.Cd=this.Fd=this.lb=this.Db=this.Ab=this.fa=this.J=this.W=this.N=this.O=0}function fr(){this.Rd=this.height=this.width=this.S=0,this.f={},this.f.RGBA=new Ur,this.f.kb=new sr,this.sd=null}function hn(){this.width=[0],this.height=[0],this.Pd=[0],this.Qd=[0],this.format=[0]}function vr(){this.Id=this.fd=this.Md=this.hb=this.ib=this.da=this.bd=this.cd=this.j=this.v=this.Da=this.Sd=this.ob=0}function jt(d){return alert("todo:WebPSamplerProcessPlane"),d.T}function Yt(d,g){var x=d.T,U=g.ba.f.RGBA,V=U.eb,K=U.fb+d.ka*U.A,q=Bi[g.ba.S],Y=d.y,Z=d.O,ie=d.f,pe=d.N,_e=d.ea,Ne=d.W,Be=g.cc,Ke=g.dc,ke=g.Mc,me=g.Nc,we=d.ka,He=d.ka+d.T,ze=d.U,Ve=ze+1>>1;for(we==0?q(Y,Z,null,null,ie,pe,_e,Ne,ie,pe,_e,Ne,V,K,null,null,ze):(q(g.ec,g.fc,Y,Z,Be,Ke,ke,me,ie,pe,_e,Ne,V,K-U.A,V,K,ze),++x);we+2<He;we+=2)Be=ie,Ke=pe,ke=_e,me=Ne,pe+=d.Rc,Ne+=d.Rc,K+=2*U.A,q(Y,(Z+=2*d.fa)-d.fa,Y,Z,Be,Ke,ke,me,ie,pe,_e,Ne,V,K-U.A,V,K,ze);return Z+=d.fa,d.j+He<d.o?(n(g.ec,g.fc,Y,Z,ze),n(g.cc,g.dc,ie,pe,Ve),n(g.Mc,g.Nc,_e,Ne,Ve),x--):1&He||q(Y,Z,null,null,ie,pe,_e,Ne,ie,pe,_e,Ne,V,K+U.A,null,null,ze),x}function cs(d,g,x){var U=d.F,V=[d.J];if(U!=null){var K=d.U,q=g.ba.S,Y=q==nm||q==sm;g=g.ba.f.RGBA;var Z=[0],ie=d.ka;Z[0]=d.T,d.Kb&&(ie==0?--Z[0]:(--ie,V[0]-=d.width),d.j+d.ka+d.T==d.o&&(Z[0]=d.o-d.j-ie));var pe=g.eb;ie=g.fb+ie*g.A,d=kr(U,V[0],d.width,K,Z,pe,ie+(Y?0:3),g.A),e(x==Z),d&&St(q)&&xi(pe,ie,Y,K,Z,g.A)}return 0}function zr(d){var g=d.ma,x=g.ba.S,U=11>x,V=x==tm||x==rm||x==nm||x==yw||x==12||St(x);if(g.memory=null,g.Ib=null,g.Jb=null,g.Nd=null,!oh(g.Oa,d,V?11:12))return 0;if(V&&St(x)&&$e(),d.da)alert("todo:use_scaling");else{if(U){if(g.Ib=jt,d.Kb){if(x=d.U+1>>1,g.memory=i(d.U+2*x),g.memory==null)return 0;g.ec=g.memory,g.fc=0,g.cc=g.ec,g.dc=g.fc+d.U,g.Mc=g.cc,g.Nc=g.dc+x,g.Ib=Yt,$e()}}else alert("todo:EmitYUV");V&&(g.Jb=cs,U&&xe())}if(U&&!LB){for(d=0;256>d;++d)iP[d]=89858*(d-128)+am>>im,AP[d]=-22014*(d-128)+am,oP[d]=-45773*(d-128),aP[d]=113618*(d-128)+am>>im;for(d=mh;d<_w;++d)g=76283*(d-16)+am>>im,lP[d-mh]=yr(g,255),cP[d-mh]=yr(g+8>>4,15);LB=1}return 1}function mr(d){var g=d.ma,x=d.U,U=d.T;return e(!(1&d.ka)),0>=x||0>=U?0:(x=g.Ib(d,g),g.Jb!=null&&g.Jb(d,g,x),g.Dc+=x,1)}function Qe(d){d.ma.memory=null}function Oe(d,g,x,U){return ae(d,8)!=47?0:(g[0]=ae(d,14)+1,x[0]=ae(d,14)+1,U[0]=ae(d,1),ae(d,3)!=0?0:!d.h)}function Ft(d,g){if(4>d)return d+1;var x=d-2>>1;return(2+(1&d)<<x)+ae(g,x)+1}function ft(d,g){return 120<g?g-120:1<=(x=((x=q3[g-1])>>4)*d+(8-(15&x)))?x:1;var x}function ct(d,g,x){var U=k(x),V=d[g+=255&U].g-8;return 0<V&&(te(x,x.u+8),U=k(x),g+=d[g].value,g+=U&(1<<V)-1),te(x,x.u+d[g].g),d[g].value}function Ut(d,g,x){return x.g+=d.g,x.value+=d.value<<g>>>0,e(8>=x.g),d.g}function it(d,g,x){var U=d.xc;return e((g=U==0?0:d.vc[d.md*(x>>U)+(g>>U)])<d.Wb),d.Ya[g]}function Nt(d,g,x,U){var V=d.ab,K=d.c*g,q=d.C;g=q+g;var Y=x,Z=U;for(U=d.Ta,x=d.Ua;0<V--;){var ie=d.gc[V],pe=q,_e=g,Ne=Y,Be=Z,Ke=(Z=U,Y=x,ie.Ea);switch(e(pe<_e),e(_e<=ie.nc),ie.hc){case 2:$p(Ne,Be,(_e-pe)*Ke,Z,Y);break;case 0:var ke=pe,me=_e,we=Z,He=Y,ze=(ut=ie).Ea;ke==0&&(vw(Ne,Be,null,null,1,we,He),ht(Ne,Be+1,0,0,ze-1,we,He+1),Be+=ze,He+=ze,++ke);for(var Ve=1<<ut.b,gt=Ve-1,At=je(ze,ut.b),Rt=ut.K,ut=ut.w+(ke>>ut.b)*At;ke<me;){var gr=Rt,Br=ut,dr=1;for(ch(Ne,Be,we,He-ze,1,we,He);dr<ze;){var ar=(dr&~gt)+Ve;ar>ze&&(ar=ze),(0,uA[gr[Br++]>>8&15])(Ne,Be+ +dr,we,He+dr-ze,ar-dr,we,He+dr),dr=ar}Be+=ze,He+=ze,++ke&gt||(ut+=At)}_e!=ie.nc&&n(Z,Y-Ke,Z,Y+(_e-pe-1)*Ke,Ke);break;case 1:for(Ke=Ne,me=Be,ze=(Ne=ie.Ea)-(He=Ne&~(we=(Be=1<<ie.b)-1)),ke=je(Ne,ie.b),Ve=ie.K,ie=ie.w+(pe>>ie.b)*ke;pe<_e;){for(gt=Ve,At=ie,Rt=new Ge,ut=me+He,gr=me+Ne;me<ut;)Ht(gt[At++],Rt),ql(Rt,Ke,me,Be,Z,Y),me+=Be,Y+=Be;me<gr&&(Ht(gt[At++],Rt),ql(Rt,Ke,me,ze,Z,Y),me+=ze,Y+=ze),++pe&we||(ie+=ke)}break;case 3:if(Ne==Z&&Be==Y&&0<ie.b){for(me=Z,Ne=Ke=Y+(_e-pe)*Ke-(He=(_e-pe)*je(ie.Ea,ie.b)),Be=Z,we=Y,ke=[],He=(ze=He)-1;0<=He;--He)ke[He]=Be[we+He];for(He=ze-1;0<=He;--He)me[Ne+He]=ke[He];vi(ie,pe,_e,Z,Ke,Z,Y)}else vi(ie,pe,_e,Ne,Be,Z,Y)}Y=U,Z=x}Z!=x&&n(U,x,Y,Z,K)}function be(d,g){var x=d.V,U=d.Ba+d.c*d.C,V=g-d.C;if(e(g<=d.l.o),e(16>=V),0<V){var K=d.l,q=d.Ta,Y=d.Ua,Z=K.width;if(Nt(d,V,x,U),V=Y=[Y],e((x=d.C)<(U=g)),e(K.v<K.va),U>K.o&&(U=K.o),x<K.j){var ie=K.j-x;x=K.j,V[0]+=ie*Z}if(x>=U?x=0:(V[0]+=4*K.v,K.ka=x-K.j,K.U=K.va-K.v,K.T=U-x,x=1),x){if(Y=Y[0],11>(x=d.ca).S){var pe=x.f.RGBA,_e=(U=x.S,V=K.U,K=K.T,ie=pe.eb,pe.A),Ne=K;for(pe=pe.fb+d.Ma*pe.A;0<Ne--;){var Be=q,Ke=Y,ke=V,me=ie,we=pe;switch(U){case em:Ms(Be,Ke,ke,me,we);break;case tm:Ns(Be,Ke,ke,me,we);break;case xw:Ns(Be,Ke,ke,me,we),xi(me,we,0,ke,1,0);break;case _B:ao(Be,Ke,ke,me,we);break;case rm:rt(Be,Ke,ke,me,we,1);break;case bw:rt(Be,Ke,ke,me,we,1),xi(me,we,0,ke,1,0);break;case nm:rt(Be,Ke,ke,me,we,0);break;case sm:rt(Be,Ke,ke,me,we,0),xi(me,we,1,ke,1,0);break;case yw:dA(Be,Ke,ke,me,we);break;case Bw:dA(Be,Ke,ke,me,we),jr(me,we,ke,1,0);break;case NB:io(Be,Ke,ke,me,we);break;default:e(0)}Y+=Z,pe+=_e}d.Ma+=K}else alert("todo:EmitRescaledRowsYUVA");e(d.Ma<=x.height)}}d.C=g,e(d.C<=d.i)}function et(d){var g;if(0<d.ua)return 0;for(g=0;g<d.Wb;++g){var x=d.Ya[g].G,U=d.Ya[g].H;if(0<x[1][U[1]+0].g||0<x[2][U[2]+0].g||0<x[3][U[3]+0].g)return 0}return 1}function nt(d,g,x,U,V,K){if(d.Z!=0){var q=d.qd,Y=d.rd;for(e(mA[d.Z]!=null);g<x;++g)mA[d.Z](q,Y,U,V,U,V,K),q=U,Y=V,V+=K;d.qd=q,d.rd=Y}}function Mt(d,g){var x=d.l.ma,U=x.Z==0||x.Z==1?d.l.j:d.C;if(U=d.C<U?U:d.C,e(g<=d.l.o),g>U){var V=d.l.width,K=x.ca,q=x.tb+V*U,Y=d.V,Z=d.Ba+d.c*U,ie=d.gc;e(d.ab==1),e(ie[0].hc==3),Wp(ie[0],U,g,Y,Z,K,q),nt(x,U,g,K,q,V)}d.C=d.Ma=g}function Zt(d,g,x,U,V,K,q){var Y=d.$/U,Z=d.$%U,ie=d.m,pe=d.s,_e=x+d.$,Ne=_e;V=x+U*V;var Be=x+U*K,Ke=280+pe.ua,ke=d.Pb?Y:16777216,me=0<pe.ua?pe.Wa:null,we=pe.wc,He=_e<Be?it(pe,Z,Y):null;e(d.C<K),e(Be<=V);var ze=!1;e:for(;;){for(;ze||_e<Be;){var Ve=0;if(Y>=ke){var gt=_e-x;e((ke=d).Pb),ke.wd=ke.m,ke.xd=gt,0<ke.s.ua&&le(ke.s.Wa,ke.s.vb),ke=Y+z3}if(Z&we||(He=it(pe,Z,Y)),e(He!=null),He.Qb&&(g[_e]=He.qb,ze=!0),!ze)if($(ie),He.jc){Ve=ie,gt=g;var At=_e,Rt=He.pd[k(Ve)&Yn-1];e(He.jc),256>Rt.g?(te(Ve,Ve.u+Rt.g),gt[At]=Rt.value,Ve=0):(te(Ve,Ve.u+Rt.g-256),e(256<=Rt.value),Ve=Rt.value),Ve==0&&(ze=!0)}else Ve=ct(He.G[0],He.H[0],ie);if(ie.h)break;if(ze||256>Ve){if(!ze)if(He.nd)g[_e]=(He.qb|Ve<<8)>>>0;else{if($(ie),ze=ct(He.G[1],He.H[1],ie),$(ie),gt=ct(He.G[2],He.H[2],ie),At=ct(He.G[3],He.H[3],ie),ie.h)break;g[_e]=(At<<24|ze<<16|Ve<<8|gt)>>>0}if(ze=!1,++_e,++Z>=U&&(Z=0,++Y,q!=null&&Y<=K&&!(Y%16)&&q(d,Y),me!=null))for(;Ne<_e;)Ve=g[Ne++],me.X[(506832829*Ve&4294967295)>>>me.Mb]=Ve}else if(280>Ve){if(Ve=Ft(Ve-256,ie),gt=ct(He.G[4],He.H[4],ie),$(ie),gt=ft(U,gt=Ft(gt,ie)),ie.h)break;if(_e-x<gt||V-_e<Ve)break e;for(At=0;At<Ve;++At)g[_e+At]=g[_e+At-gt];for(_e+=Ve,Z+=Ve;Z>=U;)Z-=U,++Y,q!=null&&Y<=K&&!(Y%16)&&q(d,Y);if(e(_e<=V),Z&we&&(He=it(pe,Z,Y)),me!=null)for(;Ne<_e;)Ve=g[Ne++],me.X[(506832829*Ve&4294967295)>>>me.Mb]=Ve}else{if(!(Ve<Ke))break e;for(ze=Ve-280,e(me!=null);Ne<_e;)Ve=g[Ne++],me.X[(506832829*Ve&4294967295)>>>me.Mb]=Ve;Ve=_e,e(!(ze>>>(gt=me).Xa)),g[Ve]=gt.X[ze],ze=!0}ze||e(ie.h==z(ie))}if(d.Pb&&ie.h&&_e<V)e(d.m.h),d.a=5,d.m=d.wd,d.$=d.xd,0<d.s.ua&&le(d.s.vb,d.s.Wa);else{if(ie.h)break e;q!=null&&q(d,Y>K?K:Y),d.a=0,d.$=_e-x}return 1}return d.a=3,0}function It(d){e(d!=null),d.vc=null,d.yc=null,d.Ya=null;var g=d.Wa;g!=null&&(g.X=null),d.vb=null,e(d!=null)}function mt(){var d=new au;return d==null?null:(d.a=0,d.xb=FB,ur("Predictor","VP8LPredictors"),ur("Predictor","VP8LPredictors_C"),ur("PredictorAdd","VP8LPredictorsAdd"),ur("PredictorAdd","VP8LPredictorsAdd_C"),$p=Ct,ql=Et,Ms=ve,Ns=We,dA=at,io=wt,ao=_t,E.VP8LMapColor32b=uu,E.VP8LMapColor8b=Xp,d)}function Es(d,g,x,U,V){var K=1,q=[d],Y=[g],Z=U.m,ie=U.s,pe=null,_e=0;e:for(;;){if(x)for(;K&&ae(Z,1);){var Ne=q,Be=Y,Ke=U,ke=1,me=Ke.m,we=Ke.gc[Ke.ab],He=ae(me,2);if(Ke.Oc&1<<He)K=0;else{switch(Ke.Oc|=1<<He,we.hc=He,we.Ea=Ne[0],we.nc=Be[0],we.K=[null],++Ke.ab,e(4>=Ke.ab),He){case 0:case 1:we.b=ae(me,3)+2,ke=Es(je(we.Ea,we.b),je(we.nc,we.b),0,Ke,we.K),we.K=we.K[0];break;case 3:var ze,Ve=ae(me,8)+1,gt=16<Ve?0:4<Ve?1:2<Ve?2:3;if(Ne[0]=je(we.Ea,gt),we.b=gt,ze=ke=Es(Ve,1,0,Ke,we.K)){var At,Rt=Ve,ut=we,gr=1<<(8>>ut.b),Br=i(gr);if(Br==null)ze=0;else{var dr=ut.K[0],ar=ut.w;for(Br[0]=ut.K[0][0],At=1;At<1*Rt;++At)Br[At]=Ue(dr[ar+At],Br[At-1]);for(;At<4*gr;++At)Br[At]=0;ut.K[0]=null,ut.K[0]=Br,ze=1}}ke=ze;break;case 2:break;default:e(0)}K=ke}}if(q=q[0],Y=Y[0],K&&ae(Z,1)&&!(K=1<=(_e=ae(Z,4))&&11>=_e)){U.a=3;break e}var Qr;if(Qr=K)t:{var Sr,Jt,Cn,Os=U,En=q,Hs=Y,Cr=_e,ri=x,ni=Os.m,Dn=Os.s,Zn=[null],Ss=1,Ci=0,Ia=G3[Cr];r:for(;;){if(ri&&ae(ni,1)){var Rn=ae(ni,3)+2,co=je(En,Rn),Xl=je(Hs,Rn),mu=co*Xl;if(!Es(co,Xl,0,Os,Zn))break r;for(Zn=Zn[0],Dn.xc=Rn,Sr=0;Sr<mu;++Sr){var gA=Zn[Sr]>>8&65535;Zn[Sr]=gA,gA>=Ss&&(Ss=gA+1)}}if(ni.h)break r;for(Jt=0;5>Jt;++Jt){var ln=IB[Jt];!Jt&&0<Cr&&(ln+=1<<Cr),Ci<ln&&(Ci=ln)}var Nw=a(Ss*Ia,T),DB=Ss,RB=a(DB,ee);if(RB==null)var Am=null;else e(65536>=DB),Am=RB;var gh=i(Ci);if(Am==null||gh==null||Nw==null){Os.a=1;break r}var lm=Nw;for(Sr=Cn=0;Sr<Ss;++Sr){var $i=Am[Sr],gu=$i.G,vu=$i.H,MB=0,cm=1,OB=0;for(Jt=0;5>Jt;++Jt){ln=IB[Jt],gu[Jt]=lm,vu[Jt]=Cn,!Jt&&0<Cr&&(ln+=1<<Cr);s:{var um,Iw=ln,dm=Os,vh=gh,hP=lm,fP=Cn,Sw=0,vA=dm.m,pP=ae(vA,1);if(s(vh,0,0,Iw),pP){var mP=ae(vA,1)+1,gP=ae(vA,1),HB=ae(vA,gP==0?1:8);vh[HB]=1,mP==2&&(vh[HB=ae(vA,8)]=1);var hm=1}else{var VB=i(19),KB=ae(vA,4)+4;if(19<KB){dm.a=3;var fm=0;break s}for(um=0;um<KB;++um)VB[K3[um]]=ae(vA,3);var Fw=void 0,wh=void 0,qB=dm,vP=VB,pm=Iw,GB=vh,Tw=0,wA=qB.m,zB=8,$B=a(128,T);n:for(;N($B,0,7,vP,19);){if(ae(wA,1)){var wP=2+2*ae(wA,3);if((Fw=2+ae(wA,wP))>pm)break n}else Fw=pm;for(wh=0;wh<pm&&Fw--;){$(wA);var WB=$B[0+(127&k(wA))];te(wA,wA.u+WB.g);var wu=WB.value;if(16>wu)GB[wh++]=wu,wu!=0&&(zB=wu);else{var yP=wu==16,XB=wu-16,xP=H3[XB],JB=ae(wA,O3[XB])+xP;if(wh+JB>pm)break n;for(var bP=yP?zB:0;0<JB--;)GB[wh++]=bP}}Tw=1;break n}Tw||(qB.a=3),hm=Tw}(hm=hm&&!vA.h)&&(Sw=N(hP,fP,8,vh,Iw)),hm&&Sw!=0?fm=Sw:(dm.a=3,fm=0)}if(fm==0)break r;if(cm&&V3[Jt]==1&&(cm=lm[Cn].g==0),MB+=lm[Cn].g,Cn+=fm,3>=Jt){var yh,Uw=gh[0];for(yh=1;yh<ln;++yh)gh[yh]>Uw&&(Uw=gh[yh]);OB+=Uw}}if($i.nd=cm,$i.Qb=0,cm&&($i.qb=(gu[3][vu[3]+0].value<<24|gu[1][vu[1]+0].value<<16|gu[2][vu[2]+0].value)>>>0,MB==0&&256>gu[0][vu[0]+0].value&&($i.Qb=1,$i.qb+=gu[0][vu[0]+0].value<<8)),$i.jc=!$i.Qb&&6>OB,$i.jc){var mm,uo=$i;for(mm=0;mm<Yn;++mm){var yA=mm,xA=uo.pd[yA],gm=uo.G[0][uo.H[0]+yA];256<=gm.value?(xA.g=gm.g+256,xA.value=gm.value):(xA.g=0,xA.value=0,yA>>=Ut(gm,8,xA),yA>>=Ut(uo.G[1][uo.H[1]+yA],16,xA),yA>>=Ut(uo.G[2][uo.H[2]+yA],0,xA),Ut(uo.G[3][uo.H[3]+yA],24,xA))}}}Dn.vc=Zn,Dn.Wb=Ss,Dn.Ya=Am,Dn.yc=Nw,Qr=1;break t}Qr=0}if(!(K=Qr)){U.a=3;break e}if(0<_e){if(ie.ua=1<<_e,!oe(ie.Wa,_e)){U.a=1,K=0;break e}}else ie.ua=0;var Pw=U,YB=q,BP=Y,Qw=Pw.s,Lw=Qw.xc;if(Pw.c=YB,Pw.i=BP,Qw.md=je(YB,Lw),Qw.wc=Lw==0?-1:(1<<Lw)-1,x){U.xb=eP;break e}if((pe=i(q*Y))==null){U.a=1,K=0;break e}K=(K=Zt(U,pe,0,q,Y,Y,null))&&!Z.h;break e}return K?(V!=null?V[0]=pe:(e(pe==null),e(x)),U.$=0,x||It(ie)):It(ie),K}function ma(d,g){var x=d.c*d.i,U=x+g+16*g;return e(d.c<=g),d.V=i(U),d.V==null?(d.Ta=null,d.Ua=0,d.a=1,0):(d.Ta=d.V,d.Ua=d.Ba+x+g,1)}function ga(d,g){var x=d.C,U=g-x,V=d.V,K=d.Ba+d.c*x;for(e(g<=d.l.o);0<U;){var q=16<U?16:U,Y=d.l.ma,Z=d.l.width,ie=Z*q,pe=Y.ca,_e=Y.tb+Z*x,Ne=d.Ta,Be=d.Ua;Nt(d,q,V,K),pn(Ne,Be,pe,_e,ie),nt(Y,x,x+q,pe,_e,Z),U-=q,V+=q*d.c,x+=q}e(x==g),d.C=d.Ma=g}function va(){this.ub=this.yd=this.td=this.Rb=0}function $a(){this.Kd=this.Ld=this.Ud=this.Td=this.i=this.c=0}function Wa(){this.Fb=this.Bb=this.Cb=0,this.Zb=i(4),this.Lb=i(4)}function Xc(){this.Yb=function(){var d=[];return function g(x,U,V){for(var K=V[U],q=0;q<K&&(x.push(V.length>U+1?[]:0),!(V.length<U+1));q++)g(x[q],U+1,V)}(d,0,[3,11]),d}()}function $o(){this.jb=i(3),this.Wc=o([4,8],Xc),this.Xc=o([4,17],Xc)}function Jc(){this.Pc=this.wb=this.Tb=this.zd=0,this.vd=new i(4),this.od=new i(4)}function wa(){this.ld=this.La=this.dd=this.tc=0}function ya(){this.Na=this.la=0}function Ri(){this.Sc=[0,0],this.Eb=[0,0],this.Qc=[0,0],this.ia=this.lc=0}function Xa(){this.ad=i(384),this.Za=0,this.Ob=i(16),this.$b=this.Ad=this.ia=this.Gc=this.Hc=this.Dd=0}function nh(){this.uc=this.M=this.Nb=0,this.wa=Array(new wa),this.Y=0,this.ya=Array(new Xa),this.aa=0,this.l=new Ja}function Tl(){this.y=i(16),this.f=i(8),this.ea=i(8)}function Yc(){this.cb=this.a=0,this.sc="",this.m=new Ee,this.Od=new va,this.Kc=new $a,this.ed=new Jc,this.Qa=new Wa,this.Ic=this.$c=this.Aa=0,this.D=new nh,this.Xb=this.Va=this.Hb=this.zb=this.yb=this.Ub=this.za=0,this.Jc=a(8,Ee),this.ia=0,this.pb=a(4,Ri),this.Pa=new $o,this.Bd=this.kc=0,this.Ac=[],this.Bc=0,this.zc=[0,0,0,0],this.Gd=Array(new Tl),this.Hd=0,this.rb=Array(new ya),this.sb=0,this.wa=Array(new wa),this.Y=0,this.oc=[],this.pc=0,this.sa=[],this.ta=0,this.qa=[],this.ra=0,this.Ha=[],this.B=this.R=this.Ia=0,this.Ec=[],this.M=this.ja=this.Vb=this.Fc=0,this.ya=Array(new Xa),this.L=this.aa=0,this.gd=o([4,2],wa),this.ga=null,this.Fa=[],this.Cc=this.qc=this.P=0,this.Gb=[],this.Uc=0,this.mb=[],this.nb=0,this.rc=[],this.Ga=this.Vc=0}function Ja(){this.T=this.U=this.ka=this.height=this.width=0,this.y=[],this.f=[],this.ea=[],this.Rc=this.fa=this.W=this.N=this.O=0,this.ma="void",this.put="VP8IoPutHook",this.ac="VP8IoSetupHook",this.bc="VP8IoTeardownHook",this.ha=this.Kb=0,this.data=[],this.hb=this.ib=this.da=this.o=this.j=this.va=this.v=this.Da=this.ob=this.w=0,this.F=[],this.J=0}function Ul(){var d=new Yc;return d!=null&&(d.a=0,d.sc="OK",d.cb=0,d.Xb=0,ph||(ph=Zc)),d}function Mr(d,g,x){return d.a==0&&(d.a=g,d.sc=x,d.cb=0),0}function Pl(d,g,x){return 3<=x&&d[g+0]==157&&d[g+1]==1&&d[g+2]==42}function Ql(d,g){if(d==null)return 0;if(d.a=0,d.sc="OK",g==null)return Mr(d,2,"null VP8Io passed to VP8GetHeaders()");var x=g.data,U=g.w,V=g.ha;if(4>V)return Mr(d,7,"Truncated header.");var K=x[U+0]|x[U+1]<<8|x[U+2]<<16,q=d.Od;if(q.Rb=!(1&K),q.td=K>>1&7,q.yd=K>>4&1,q.ub=K>>5,3<q.td)return Mr(d,3,"Incorrect keyframe parameters.");if(!q.yd)return Mr(d,4,"Frame not displayable.");U+=3,V-=3;var Y=d.Kc;if(q.Rb){if(7>V)return Mr(d,7,"cannot parse picture header");if(!Pl(x,U,V))return Mr(d,3,"Bad code word");Y.c=16383&(x[U+4]<<8|x[U+3]),Y.Td=x[U+4]>>6,Y.i=16383&(x[U+6]<<8|x[U+5]),Y.Ud=x[U+6]>>6,U+=7,V-=7,d.za=Y.c+15>>4,d.Ub=Y.i+15>>4,g.width=Y.c,g.height=Y.i,g.Da=0,g.j=0,g.v=0,g.va=g.width,g.o=g.height,g.da=0,g.ib=g.width,g.hb=g.height,g.U=g.width,g.T=g.height,s((K=d.Pa).jb,0,255,K.jb.length),e((K=d.Qa)!=null),K.Cb=0,K.Bb=0,K.Fb=1,s(K.Zb,0,0,K.Zb.length),s(K.Lb,0,0,K.Lb)}if(q.ub>V)return Mr(d,7,"bad partition length");ce(K=d.m,x,U,q.ub),U+=q.ub,V-=q.ub,q.Rb&&(Y.Ld=X(K),Y.Kd=X(K)),Y=d.Qa;var Z,ie=d.Pa;if(e(K!=null),e(Y!=null),Y.Cb=X(K),Y.Cb){if(Y.Bb=X(K),X(K)){for(Y.Fb=X(K),Z=0;4>Z;++Z)Y.Zb[Z]=X(K)?de(K,7):0;for(Z=0;4>Z;++Z)Y.Lb[Z]=X(K)?de(K,6):0}if(Y.Bb)for(Z=0;3>Z;++Z)ie.jb[Z]=X(K)?re(K,8):255}else Y.Bb=0;if(K.Ka)return Mr(d,3,"cannot parse segment header");if((Y=d.ed).zd=X(K),Y.Tb=re(K,6),Y.wb=re(K,3),Y.Pc=X(K),Y.Pc&&X(K)){for(ie=0;4>ie;++ie)X(K)&&(Y.vd[ie]=de(K,6));for(ie=0;4>ie;++ie)X(K)&&(Y.od[ie]=de(K,6))}if(d.L=Y.Tb==0?0:Y.zd?1:2,K.Ka)return Mr(d,3,"cannot parse filter header");var pe=V;if(V=Z=U,U=Z+pe,Y=pe,d.Xb=(1<<re(d.m,2))-1,pe<3*(ie=d.Xb))x=7;else{for(Z+=3*ie,Y-=3*ie,pe=0;pe<ie;++pe){var _e=x[V+0]|x[V+1]<<8|x[V+2]<<16;_e>Y&&(_e=Y),ce(d.Jc[+pe],x,Z,_e),Z+=_e,Y-=_e,V+=3}ce(d.Jc[+ie],x,Z,Y),x=Z<U?0:5}if(x!=0)return Mr(d,x,"cannot parse partitions");for(x=re(Z=d.m,7),V=X(Z)?de(Z,4):0,U=X(Z)?de(Z,4):0,Y=X(Z)?de(Z,4):0,ie=X(Z)?de(Z,4):0,Z=X(Z)?de(Z,4):0,pe=d.Qa,_e=0;4>_e;++_e){if(pe.Cb){var Ne=pe.Zb[_e];pe.Fb||(Ne+=x)}else{if(0<_e){d.pb[_e]=d.pb[0];continue}Ne=x}var Be=d.pb[_e];Be.Sc[0]=Cw[yr(Ne+V,127)],Be.Sc[1]=Ew[yr(Ne+0,127)],Be.Eb[0]=2*Cw[yr(Ne+U,127)],Be.Eb[1]=101581*Ew[yr(Ne+Y,127)]>>16,8>Be.Eb[1]&&(Be.Eb[1]=8),Be.Qc[0]=Cw[yr(Ne+ie,117)],Be.Qc[1]=Ew[yr(Ne+Z,127)],Be.lc=Ne+Z}if(!q.Rb)return Mr(d,4,"Not a key frame.");for(X(K),q=d.Pa,x=0;4>x;++x){for(V=0;8>V;++V)for(U=0;3>U;++U)for(Y=0;11>Y;++Y)ie=he(K,Y3[x][V][U][Y])?re(K,8):X3[x][V][U][Y],q.Wc[x][V].Yb[U][Y]=ie;for(V=0;17>V;++V)q.Xc[x][V]=q.Wc[x][Z3[V]]}return d.kc=X(K),d.kc&&(d.Bd=re(K,8)),d.cb=1}function Zc(d,g,x,U,V,K,q){var Y=g[V].Yb[x];for(x=0;16>V;++V){if(!he(d,Y[x+0]))return V;for(;!he(d,Y[x+1]);)if(Y=g[++V].Yb[0],x=0,V==16)return 16;var Z=g[V+1].Yb;if(he(d,Y[x+2])){var ie=d,pe=0;if(he(ie,(Ne=Y)[(_e=x)+3]))if(he(ie,Ne[_e+6])){for(Y=0,_e=2*(pe=he(ie,Ne[_e+8]))+(Ne=he(ie,Ne[_e+9+pe])),pe=0,Ne=$3[_e];Ne[Y];++Y)pe+=pe+he(ie,Ne[Y]);pe+=3+(8<<_e)}else he(ie,Ne[_e+7])?(pe=7+2*he(ie,165),pe+=he(ie,145)):pe=5+he(ie,159);else pe=he(ie,Ne[_e+4])?3+he(ie,Ne[_e+5]):2;Y=Z[2]}else pe=1,Y=Z[1];Z=q+W3[V],0>(ie=d).b&&ne(ie);var _e,Ne=ie.b,Be=(_e=ie.Ca>>1)-(ie.I>>Ne)>>31;--ie.b,ie.Ca+=Be,ie.Ca|=1,ie.I-=(_e+1&Be)<<Ne,K[Z]=((pe^Be)-Be)*U[(0<V)+0]}return 16}function Ll(d){var g=d.rb[d.sb-1];g.la=0,g.Na=0,s(d.zc,0,0,d.zc.length),d.ja=0}function eu(d,g){if(d==null)return 0;if(g==null)return Mr(d,2,"NULL VP8Io parameter in VP8Decode().");if(!d.cb&&!Ql(d,g))return 0;if(e(d.cb),g.ac==null||g.ac(g)){g.ob&&(d.L=0);var x=om[d.L];if(d.L==2?(d.yb=0,d.zb=0):(d.yb=g.v-x>>4,d.zb=g.j-x>>4,0>d.yb&&(d.yb=0),0>d.zb&&(d.zb=0)),d.Va=g.o+15+x>>4,d.Hb=g.va+15+x>>4,d.Hb>d.za&&(d.Hb=d.za),d.Va>d.Ub&&(d.Va=d.Ub),0<d.L){var U=d.ed;for(x=0;4>x;++x){var V;if(d.Qa.Cb){var K=d.Qa.Lb[x];d.Qa.Fb||(K+=U.Tb)}else K=U.Tb;for(V=0;1>=V;++V){var q=d.gd[x][V],Y=K;if(U.Pc&&(Y+=U.vd[0],V&&(Y+=U.od[0])),0<(Y=0>Y?0:63<Y?63:Y)){var Z=Y;0<U.wb&&(Z=4<U.wb?Z>>2:Z>>1)>9-U.wb&&(Z=9-U.wb),1>Z&&(Z=1),q.dd=Z,q.tc=2*Y+Z,q.ld=40<=Y?2:15<=Y?1:0}else q.tc=0;q.La=V}}}x=0}else Mr(d,6,"Frame setup failed"),x=d.a;if(x=x==0){if(x){d.$c=0,0<d.Aa||(d.Ic=dP);e:{x=d.Ic,U=4*(Z=d.za);var ie=32*Z,pe=Z+1,_e=0<d.L?Z*(0<d.Aa?2:1):0,Ne=(d.Aa==2?2:1)*Z;if((q=U+832+(V=3*(16*x+om[d.L])/2*ie)+(K=d.Fa!=null&&0<d.Fa.length?d.Kc.c*d.Kc.i:0))!=q)x=0;else{if(q>d.Vb){if(d.Vb=0,d.Ec=i(q),d.Fc=0,d.Ec==null){x=Mr(d,1,"no memory during frame initialization.");break e}d.Vb=q}q=d.Ec,Y=d.Fc,d.Ac=q,d.Bc=Y,Y+=U,d.Gd=a(ie,Tl),d.Hd=0,d.rb=a(pe+1,ya),d.sb=1,d.wa=_e?a(_e,wa):null,d.Y=0,d.D.Nb=0,d.D.wa=d.wa,d.D.Y=d.Y,0<d.Aa&&(d.D.Y+=Z),e(!0),d.oc=q,d.pc=Y,Y+=832,d.ya=a(Ne,Xa),d.aa=0,d.D.ya=d.ya,d.D.aa=d.aa,d.Aa==2&&(d.D.aa+=Z),d.R=16*Z,d.B=8*Z,Z=(ie=om[d.L])*d.R,ie=ie/2*d.B,d.sa=q,d.ta=Y+Z,d.qa=d.sa,d.ra=d.ta+16*x*d.R+ie,d.Ha=d.qa,d.Ia=d.ra+8*x*d.B+ie,d.$c=0,Y+=V,d.mb=K?q:null,d.nb=K?Y:null,e(Y+K<=d.Fc+d.Vb),Ll(d),s(d.Ac,d.Bc,0,U),x=1}}if(x){if(g.ka=0,g.y=d.sa,g.O=d.ta,g.f=d.qa,g.N=d.ra,g.ea=d.Ha,g.Vd=d.Ia,g.fa=d.R,g.Rc=d.B,g.F=null,g.J=0,!Yp){for(x=-255;255>=x;++x)Fn[255+x]=0>x?-x:x;for(x=-1020;1020>=x;++x)Ao[1020+x]=-128>x?-128:127<x?127:x;for(x=-112;112>=x;++x)fh[112+x]=-16>x?-16:15<x?15:x;for(x=-255;510>=x;++x)pu[255+x]=0>x?0:255<x?255:x;Yp=1}du=eo,oo=Xo,uh=jl,Is=br,wi=Za,fn=Ya,hu=nA,Jp=Ki,dh=iA,Gl=Kl,zl=sA,hA=ro,$l=aA,fu=Ca,Wl=to,fA=ei,hh=Sn,yi=iu,zi[0]=gi,zi[1]=sh,zi[2]=ba,zi[3]=ah,zi[4]=nu,zi[5]=Zo,zi[6]=Ys,zi[7]=Dl,zi[8]=tA,zi[9]=eA,pA[0]=xa,pA[1]=ih,pA[2]=Oi,pA[3]=Jo,pA[4]=Or,pA[5]=ru,pA[6]=kl,lo[0]=Vi,lo[1]=tu,lo[2]=su,lo[3]=Hi,lo[4]=wr,lo[5]=Rl,lo[6]=Ml,x=1}else x=0}x&&(x=function(Be,Ke){for(Be.M=0;Be.M<Be.Va;++Be.M){var ke,me=Be.Jc[Be.M&Be.Xb],we=Be.m,He=Be;for(ke=0;ke<He.za;++ke){var ze=we,Ve=He,gt=Ve.Ac,At=Ve.Bc+4*ke,Rt=Ve.zc,ut=Ve.ya[Ve.aa+ke];if(Ve.Qa.Bb?ut.$b=he(ze,Ve.Pa.jb[0])?2+he(ze,Ve.Pa.jb[2]):he(ze,Ve.Pa.jb[1]):ut.$b=0,Ve.kc&&(ut.Ad=he(ze,Ve.Bd)),ut.Za=!he(ze,145)+0,ut.Za){var gr=ut.Ob,Br=0;for(Ve=0;4>Ve;++Ve){var dr,ar=Rt[0+Ve];for(dr=0;4>dr;++dr){ar=J3[gt[At+dr]][ar];for(var Qr=SB[he(ze,ar[0])];0<Qr;)Qr=SB[2*Qr+he(ze,ar[Qr])];ar=-Qr,gt[At+dr]=ar}n(gr,Br,gt,At,4),Br+=4,Rt[0+Ve]=ar}}else ar=he(ze,156)?he(ze,128)?1:3:he(ze,163)?2:0,ut.Ob[0]=ar,s(gt,At,ar,4),s(Rt,0,ar,4);ut.Dd=he(ze,142)?he(ze,114)?he(ze,183)?1:3:2:0}if(He.m.Ka)return Mr(Be,7,"Premature end-of-partition0 encountered.");for(;Be.ja<Be.za;++Be.ja){if(He=me,ze=(we=Be).rb[we.sb-1],gt=we.rb[we.sb+we.ja],ke=we.ya[we.aa+we.ja],At=we.kc?ke.Ad:0)ze.la=gt.la=0,ke.Za||(ze.Na=gt.Na=0),ke.Hc=0,ke.Gc=0,ke.ia=0;else{var Sr,Jt;if(ze=gt,gt=He,At=we.Pa.Xc,Rt=we.ya[we.aa+we.ja],ut=we.pb[Rt.$b],Ve=Rt.ad,gr=0,Br=we.rb[we.sb-1],ar=dr=0,s(Ve,gr,0,384),Rt.Za)var Cn=0,Os=At[3];else{Qr=i(16);var En=ze.Na+Br.Na;if(En=ph(gt,At[1],En,ut.Eb,0,Qr,0),ze.Na=Br.Na=(0<En)+0,1<En)du(Qr,0,Ve,gr);else{var Hs=Qr[0]+3>>3;for(Qr=0;256>Qr;Qr+=16)Ve[gr+Qr]=Hs}Cn=1,Os=At[0]}var Cr=15&ze.la,ri=15&Br.la;for(Qr=0;4>Qr;++Qr){var ni=1&ri;for(Hs=Jt=0;4>Hs;++Hs)Cr=Cr>>1|(ni=(En=ph(gt,Os,En=ni+(1&Cr),ut.Sc,Cn,Ve,gr))>Cn)<<7,Jt=Jt<<2|(3<En?3:1<En?2:Ve[gr+0]!=0),gr+=16;Cr>>=4,ri=ri>>1|ni<<7,dr=(dr<<8|Jt)>>>0}for(Os=Cr,Cn=ri>>4,Sr=0;4>Sr;Sr+=2){for(Jt=0,Cr=ze.la>>4+Sr,ri=Br.la>>4+Sr,Qr=0;2>Qr;++Qr){for(ni=1&ri,Hs=0;2>Hs;++Hs)En=ni+(1&Cr),Cr=Cr>>1|(ni=0<(En=ph(gt,At[2],En,ut.Qc,0,Ve,gr)))<<3,Jt=Jt<<2|(3<En?3:1<En?2:Ve[gr+0]!=0),gr+=16;Cr>>=2,ri=ri>>1|ni<<5}ar|=Jt<<4*Sr,Os|=Cr<<4<<Sr,Cn|=(240&ri)<<Sr}ze.la=Os,Br.la=Cn,Rt.Hc=dr,Rt.Gc=ar,Rt.ia=43690&ar?0:ut.ia,At=!(dr|ar)}if(0<we.L&&(we.wa[we.Y+we.ja]=we.gd[ke.$b][ke.Za],we.wa[we.Y+we.ja].La|=!At),He.Ka)return Mr(Be,7,"Premature end-of-file encountered.")}if(Ll(Be),we=Ke,He=1,ke=(me=Be).D,ze=0<me.L&&me.M>=me.zb&&me.M<=me.Va,me.Aa==0)e:{if(ke.M=me.M,ke.uc=ze,_a(me,ke),He=1,ke=(Jt=me.D).Nb,ze=(ar=om[me.L])*me.R,gt=ar/2*me.B,Qr=16*ke*me.R,Hs=8*ke*me.B,At=me.sa,Rt=me.ta-ze+Qr,ut=me.qa,Ve=me.ra-gt+Hs,gr=me.Ha,Br=me.Ia-gt+Hs,ri=(Cr=Jt.M)==0,dr=Cr>=me.Va-1,me.Aa==2&&_a(me,Jt),Jt.uc)for(ni=(En=me).D.M,e(En.D.uc),Jt=En.yb;Jt<En.Hb;++Jt){Cn=Jt,Os=ni;var Dn=(Zn=(ln=En).D).Nb;Sr=ln.R;var Zn=Zn.wa[Zn.Y+Cn],Ss=ln.sa,Ci=ln.ta+16*Dn*Sr+16*Cn,Ia=Zn.dd,Rn=Zn.tc;if(Rn!=0)if(e(3<=Rn),ln.L==1)0<Cn&&fA(Ss,Ci,Sr,Rn+4),Zn.La&&yi(Ss,Ci,Sr,Rn),0<Os&&Wl(Ss,Ci,Sr,Rn+4),Zn.La&&hh(Ss,Ci,Sr,Rn);else{var co=ln.B,Xl=ln.qa,mu=ln.ra+8*Dn*co+8*Cn,gA=ln.Ha,ln=ln.Ia+8*Dn*co+8*Cn;Dn=Zn.ld,0<Cn&&(Jp(Ss,Ci,Sr,Rn+4,Ia,Dn),Gl(Xl,mu,gA,ln,co,Rn+4,Ia,Dn)),Zn.La&&(hA(Ss,Ci,Sr,Rn,Ia,Dn),fu(Xl,mu,gA,ln,co,Rn,Ia,Dn)),0<Os&&(hu(Ss,Ci,Sr,Rn+4,Ia,Dn),dh(Xl,mu,gA,ln,co,Rn+4,Ia,Dn)),Zn.La&&(zl(Ss,Ci,Sr,Rn,Ia,Dn),$l(Xl,mu,gA,ln,co,Rn,Ia,Dn))}}if(me.ia&&alert("todo:DitherRow"),we.put!=null){if(Jt=16*Cr,Cr=16*(Cr+1),ri?(we.y=me.sa,we.O=me.ta+Qr,we.f=me.qa,we.N=me.ra+Hs,we.ea=me.Ha,we.W=me.Ia+Hs):(Jt-=ar,we.y=At,we.O=Rt,we.f=ut,we.N=Ve,we.ea=gr,we.W=Br),dr||(Cr-=ar),Cr>we.o&&(Cr=we.o),we.F=null,we.J=null,me.Fa!=null&&0<me.Fa.length&&Jt<Cr&&(we.J=cA(me,we,Jt,Cr-Jt),we.F=me.mb,we.F==null&&we.F.length==0)){He=Mr(me,3,"Could not decode alpha data.");break e}Jt<we.j&&(ar=we.j-Jt,Jt=we.j,e(!(1&ar)),we.O+=me.R*ar,we.N+=me.B*(ar>>1),we.W+=me.B*(ar>>1),we.F!=null&&(we.J+=we.width*ar)),Jt<Cr&&(we.O+=we.v,we.N+=we.v>>1,we.W+=we.v>>1,we.F!=null&&(we.J+=we.v),we.ka=Jt-we.j,we.U=we.va-we.v,we.T=Cr-Jt,He=we.put(we))}ke+1!=me.Ic||dr||(n(me.sa,me.ta-ze,At,Rt+16*me.R,ze),n(me.qa,me.ra-gt,ut,Ve+8*me.B,gt),n(me.Ha,me.Ia-gt,gr,Br+8*me.B,gt))}if(!He)return Mr(Be,6,"Output aborted.")}return 1}(d,g)),g.bc!=null&&g.bc(g),x&=1}return x?(d.cb=0,x):0}function Ds(d,g,x,U,V){V=d[g+x+32*U]+(V>>3),d[g+x+32*U]=-256&V?0>V?0:255:V}function Wo(d,g,x,U,V,K){Ds(d,g,0,x,U+V),Ds(d,g,1,x,U+K),Ds(d,g,2,x,U-K),Ds(d,g,3,x,U-V)}function An(d){return(20091*d>>16)+d}function _s(d,g,x,U){var V,K=0,q=i(16);for(V=0;4>V;++V){var Y=d[g+0]+d[g+8],Z=d[g+0]-d[g+8],ie=(35468*d[g+4]>>16)-An(d[g+12]),pe=An(d[g+4])+(35468*d[g+12]>>16);q[K+0]=Y+pe,q[K+1]=Z+ie,q[K+2]=Z-ie,q[K+3]=Y-pe,K+=4,g++}for(V=K=0;4>V;++V)Y=(d=q[K+0]+4)+q[K+8],Z=d-q[K+8],ie=(35468*q[K+4]>>16)-An(q[K+12]),Ds(x,U,0,0,Y+(pe=An(q[K+4])+(35468*q[K+12]>>16))),Ds(x,U,1,0,Z+ie),Ds(x,U,2,0,Z-ie),Ds(x,U,3,0,Y-pe),K++,U+=32}function Ya(d,g,x,U){var V=d[g+0]+4,K=35468*d[g+4]>>16,q=An(d[g+4]),Y=35468*d[g+1]>>16;Wo(x,U,0,V+q,d=An(d[g+1]),Y),Wo(x,U,1,V+K,d,Y),Wo(x,U,2,V-K,d,Y),Wo(x,U,3,V-q,d,Y)}function Xo(d,g,x,U,V){_s(d,g,x,U),V&&_s(d,g+16,x,U+4)}function jl(d,g,x,U){oo(d,g+0,x,U,1),oo(d,g+32,x,U+128,1)}function br(d,g,x,U){var V;for(d=d[g+0]+4,V=0;4>V;++V)for(g=0;4>g;++g)Ds(x,U,g,V,d)}function Za(d,g,x,U){d[g+0]&&Is(d,g+0,x,U),d[g+16]&&Is(d,g+16,x,U+4),d[g+32]&&Is(d,g+32,x,U+128),d[g+48]&&Is(d,g+48,x,U+128+4)}function eo(d,g,x,U){var V,K=i(16);for(V=0;4>V;++V){var q=d[g+0+V]+d[g+12+V],Y=d[g+4+V]+d[g+8+V],Z=d[g+4+V]-d[g+8+V],ie=d[g+0+V]-d[g+12+V];K[0+V]=q+Y,K[8+V]=q-Y,K[4+V]=ie+Z,K[12+V]=ie-Z}for(V=0;4>V;++V)q=(d=K[0+4*V]+3)+K[3+4*V],Y=K[1+4*V]+K[2+4*V],Z=K[1+4*V]-K[2+4*V],ie=d-K[3+4*V],x[U+0]=q+Y>>3,x[U+16]=ie+Z>>3,x[U+32]=q-Y>>3,x[U+48]=ie-Z>>3,U+=64}function Mi(d,g,x){var U,V=g-32,K=ti,q=255-d[V-1];for(U=0;U<x;++U){var Y,Z=K,ie=q+d[g-1];for(Y=0;Y<x;++Y)d[g+Y]=Z[ie+d[V+Y]];g+=32}}function sh(d,g){Mi(d,g,4)}function tu(d,g){Mi(d,g,8)}function ih(d,g){Mi(d,g,16)}function Oi(d,g){var x;for(x=0;16>x;++x)n(d,g+32*x,d,g-32,16)}function Jo(d,g){var x;for(x=16;0<x;--x)s(d,g,d[g-1],16),g+=32}function Yo(d,g,x){var U;for(U=0;16>U;++U)s(g,x+32*U,d,16)}function xa(d,g){var x,U=16;for(x=0;16>x;++x)U+=d[g-1+32*x]+d[g+x-32];Yo(U>>5,d,g)}function Or(d,g){var x,U=8;for(x=0;16>x;++x)U+=d[g-1+32*x];Yo(U>>4,d,g)}function ru(d,g){var x,U=8;for(x=0;16>x;++x)U+=d[g+x-32];Yo(U>>4,d,g)}function kl(d,g){Yo(128,d,g)}function Vt(d,g,x){return d+2*g+x+2>>2}function ba(d,g){var x,U=g-32;for(U=new Uint8Array([Vt(d[U-1],d[U+0],d[U+1]),Vt(d[U+0],d[U+1],d[U+2]),Vt(d[U+1],d[U+2],d[U+3]),Vt(d[U+2],d[U+3],d[U+4])]),x=0;4>x;++x)n(d,g+32*x,U,0,U.length)}function ah(d,g){var x=d[g-1],U=d[g-1+32],V=d[g-1+64],K=d[g-1+96];ge(d,g+0,16843009*Vt(d[g-1-32],x,U)),ge(d,g+32,16843009*Vt(x,U,V)),ge(d,g+64,16843009*Vt(U,V,K)),ge(d,g+96,16843009*Vt(V,K,K))}function gi(d,g){var x,U=4;for(x=0;4>x;++x)U+=d[g+x-32]+d[g-1+32*x];for(U>>=3,x=0;4>x;++x)s(d,g+32*x,U,4)}function nu(d,g){var x=d[g-1+0],U=d[g-1+32],V=d[g-1+64],K=d[g-1-32],q=d[g+0-32],Y=d[g+1-32],Z=d[g+2-32],ie=d[g+3-32];d[g+0+96]=Vt(U,V,d[g-1+96]),d[g+1+96]=d[g+0+64]=Vt(x,U,V),d[g+2+96]=d[g+1+64]=d[g+0+32]=Vt(K,x,U),d[g+3+96]=d[g+2+64]=d[g+1+32]=d[g+0+0]=Vt(q,K,x),d[g+3+64]=d[g+2+32]=d[g+1+0]=Vt(Y,q,K),d[g+3+32]=d[g+2+0]=Vt(Z,Y,q),d[g+3+0]=Vt(ie,Z,Y)}function Ys(d,g){var x=d[g+1-32],U=d[g+2-32],V=d[g+3-32],K=d[g+4-32],q=d[g+5-32],Y=d[g+6-32],Z=d[g+7-32];d[g+0+0]=Vt(d[g+0-32],x,U),d[g+1+0]=d[g+0+32]=Vt(x,U,V),d[g+2+0]=d[g+1+32]=d[g+0+64]=Vt(U,V,K),d[g+3+0]=d[g+2+32]=d[g+1+64]=d[g+0+96]=Vt(V,K,q),d[g+3+32]=d[g+2+64]=d[g+1+96]=Vt(K,q,Y),d[g+3+64]=d[g+2+96]=Vt(q,Y,Z),d[g+3+96]=Vt(Y,Z,Z)}function Zo(d,g){var x=d[g-1+0],U=d[g-1+32],V=d[g-1+64],K=d[g-1-32],q=d[g+0-32],Y=d[g+1-32],Z=d[g+2-32],ie=d[g+3-32];d[g+0+0]=d[g+1+64]=K+q+1>>1,d[g+1+0]=d[g+2+64]=q+Y+1>>1,d[g+2+0]=d[g+3+64]=Y+Z+1>>1,d[g+3+0]=Z+ie+1>>1,d[g+0+96]=Vt(V,U,x),d[g+0+64]=Vt(U,x,K),d[g+0+32]=d[g+1+96]=Vt(x,K,q),d[g+1+32]=d[g+2+96]=Vt(K,q,Y),d[g+2+32]=d[g+3+96]=Vt(q,Y,Z),d[g+3+32]=Vt(Y,Z,ie)}function Dl(d,g){var x=d[g+0-32],U=d[g+1-32],V=d[g+2-32],K=d[g+3-32],q=d[g+4-32],Y=d[g+5-32],Z=d[g+6-32],ie=d[g+7-32];d[g+0+0]=x+U+1>>1,d[g+1+0]=d[g+0+64]=U+V+1>>1,d[g+2+0]=d[g+1+64]=V+K+1>>1,d[g+3+0]=d[g+2+64]=K+q+1>>1,d[g+0+32]=Vt(x,U,V),d[g+1+32]=d[g+0+96]=Vt(U,V,K),d[g+2+32]=d[g+1+96]=Vt(V,K,q),d[g+3+32]=d[g+2+96]=Vt(K,q,Y),d[g+3+64]=Vt(q,Y,Z),d[g+3+96]=Vt(Y,Z,ie)}function eA(d,g){var x=d[g-1+0],U=d[g-1+32],V=d[g-1+64],K=d[g-1+96];d[g+0+0]=x+U+1>>1,d[g+2+0]=d[g+0+32]=U+V+1>>1,d[g+2+32]=d[g+0+64]=V+K+1>>1,d[g+1+0]=Vt(x,U,V),d[g+3+0]=d[g+1+32]=Vt(U,V,K),d[g+3+32]=d[g+1+64]=Vt(V,K,K),d[g+3+64]=d[g+2+64]=d[g+0+96]=d[g+1+96]=d[g+2+96]=d[g+3+96]=K}function tA(d,g){var x=d[g-1+0],U=d[g-1+32],V=d[g-1+64],K=d[g-1+96],q=d[g-1-32],Y=d[g+0-32],Z=d[g+1-32],ie=d[g+2-32];d[g+0+0]=d[g+2+32]=x+q+1>>1,d[g+0+32]=d[g+2+64]=U+x+1>>1,d[g+0+64]=d[g+2+96]=V+U+1>>1,d[g+0+96]=K+V+1>>1,d[g+3+0]=Vt(Y,Z,ie),d[g+2+0]=Vt(q,Y,Z),d[g+1+0]=d[g+3+32]=Vt(x,q,Y),d[g+1+32]=d[g+3+64]=Vt(U,x,q),d[g+1+64]=d[g+3+96]=Vt(V,U,x),d[g+1+96]=Vt(K,V,U)}function su(d,g){var x;for(x=0;8>x;++x)n(d,g+32*x,d,g-32,8)}function Hi(d,g){var x;for(x=0;8>x;++x)s(d,g,d[g-1],8),g+=32}function Zs(d,g,x){var U;for(U=0;8>U;++U)s(g,x+32*U,d,8)}function Vi(d,g){var x,U=8;for(x=0;8>x;++x)U+=d[g+x-32]+d[g-1+32*x];Zs(U>>4,d,g)}function Rl(d,g){var x,U=4;for(x=0;8>x;++x)U+=d[g+x-32];Zs(U>>3,d,g)}function wr(d,g){var x,U=4;for(x=0;8>x;++x)U+=d[g-1+32*x];Zs(U>>3,d,g)}function Ml(d,g){Zs(128,d,g)}function rA(d,g,x){var U=d[g-x],V=d[g+0],K=3*(V-U)+ww[1020+d[g-2*x]-d[g+x]],q=Zp[112+(K+4>>3)];d[g-x]=ti[255+U+Zp[112+(K+3>>3)]],d[g+0]=ti[255+V-q]}function Ol(d,g,x,U){var V=d[g+0],K=d[g+x];return bi[255+d[g-2*x]-d[g-x]]>U||bi[255+K-V]>U}function Hl(d,g,x,U){return 4*bi[255+d[g-x]-d[g+0]]+bi[255+d[g-2*x]-d[g+x]]<=U}function Vl(d,g,x,U,V){var K=d[g-3*x],q=d[g-2*x],Y=d[g-x],Z=d[g+0],ie=d[g+x],pe=d[g+2*x],_e=d[g+3*x];return 4*bi[255+Y-Z]+bi[255+q-ie]>U?0:bi[255+d[g-4*x]-K]<=V&&bi[255+K-q]<=V&&bi[255+q-Y]<=V&&bi[255+_e-pe]<=V&&bi[255+pe-ie]<=V&&bi[255+ie-Z]<=V}function to(d,g,x,U){var V=2*U+1;for(U=0;16>U;++U)Hl(d,g+U,x,V)&&rA(d,g+U,x)}function ei(d,g,x,U){var V=2*U+1;for(U=0;16>U;++U)Hl(d,g+U*x,1,V)&&rA(d,g+U*x,1)}function Sn(d,g,x,U){var V;for(V=3;0<V;--V)to(d,g+=4*x,x,U)}function iu(d,g,x,U){var V;for(V=3;0<V;--V)ei(d,g+=4,x,U)}function Ba(d,g,x,U,V,K,q,Y){for(K=2*K+1;0<V--;){if(Vl(d,g,x,K,q))if(Ol(d,g,x,Y))rA(d,g,x);else{var Z=d,ie=g,pe=x,_e=Z[ie-2*pe],Ne=Z[ie-pe],Be=Z[ie+0],Ke=Z[ie+pe],ke=Z[ie+2*pe],me=27*(He=ww[1020+3*(Be-Ne)+ww[1020+_e-Ke]])+63>>7,we=18*He+63>>7,He=9*He+63>>7;Z[ie-3*pe]=ti[255+Z[ie-3*pe]+He],Z[ie-2*pe]=ti[255+_e+we],Z[ie-pe]=ti[255+Ne+me],Z[ie+0]=ti[255+Be-me],Z[ie+pe]=ti[255+Ke-we],Z[ie+2*pe]=ti[255+ke-He]}g+=U}}function Xn(d,g,x,U,V,K,q,Y){for(K=2*K+1;0<V--;){if(Vl(d,g,x,K,q))if(Ol(d,g,x,Y))rA(d,g,x);else{var Z=d,ie=g,pe=x,_e=Z[ie-pe],Ne=Z[ie+0],Be=Z[ie+pe],Ke=Zp[112+((ke=3*(Ne-_e))+4>>3)],ke=Zp[112+(ke+3>>3)],me=Ke+1>>1;Z[ie-2*pe]=ti[255+Z[ie-2*pe]+me],Z[ie-pe]=ti[255+_e+ke],Z[ie+0]=ti[255+Ne-Ke],Z[ie+pe]=ti[255+Be-me]}g+=U}}function nA(d,g,x,U,V,K){Ba(d,g,x,1,16,U,V,K)}function Ki(d,g,x,U,V,K){Ba(d,g,1,x,16,U,V,K)}function sA(d,g,x,U,V,K){var q;for(q=3;0<q;--q)Xn(d,g+=4*x,x,1,16,U,V,K)}function ro(d,g,x,U,V,K){var q;for(q=3;0<q;--q)Xn(d,g+=4,1,x,16,U,V,K)}function iA(d,g,x,U,V,K,q,Y){Ba(d,g,V,1,8,K,q,Y),Ba(x,U,V,1,8,K,q,Y)}function Kl(d,g,x,U,V,K,q,Y){Ba(d,g,1,V,8,K,q,Y),Ba(x,U,1,V,8,K,q,Y)}function aA(d,g,x,U,V,K,q,Y){Xn(d,g+4*V,V,1,8,K,q,Y),Xn(x,U+4*V,V,1,8,K,q,Y)}function Ca(d,g,x,U,V,K,q,Y){Xn(d,g+4,1,V,8,K,q,Y),Xn(x,U+4,1,V,8,K,q,Y)}function no(){this.ba=new fr,this.ec=[],this.cc=[],this.Mc=[],this.Dc=this.Nc=this.dc=this.fc=0,this.Oa=new vr,this.memory=0,this.Ib="OutputFunc",this.Jb="OutputAlphaFunc",this.Nd="OutputRowFunc"}function oA(){this.data=[],this.offset=this.kd=this.ha=this.w=0,this.na=[],this.xa=this.gb=this.Ja=this.Sa=this.P=0}function so(){this.nc=this.Ea=this.b=this.hc=0,this.K=[],this.w=0}function AA(){this.ua=0,this.Wa=new G,this.vb=new G,this.md=this.xc=this.wc=0,this.vc=[],this.Wb=0,this.Ya=new ee,this.yc=new T}function au(){this.xb=this.a=0,this.l=new Ja,this.ca=new fr,this.V=[],this.Ba=0,this.Ta=[],this.Ua=0,this.m=new Q,this.Pb=0,this.wd=new Q,this.Ma=this.$=this.C=this.i=this.c=this.xd=0,this.s=new AA,this.ab=0,this.gc=a(4,so),this.Oc=0}function qi(){this.Lc=this.Z=this.$a=this.i=this.c=0,this.l=new Ja,this.ic=0,this.ca=[],this.tb=0,this.qd=null,this.rd=0}function Ea(d,g,x,U,V,K,q){for(d=d==null?0:d[g+0],g=0;g<q;++g)V[K+g]=d+x[U+g]&255,d=V[K+g]}function lA(d,g,x,U,V,K,q){var Y;if(d==null)Ea(null,null,x,U,V,K,q);else for(Y=0;Y<q;++Y)V[K+Y]=d[g+Y]+x[U+Y]&255}function us(d,g,x,U,V,K,q){if(d==null)Ea(null,null,x,U,V,K,q);else{var Y,Z=d[g+0],ie=Z,pe=Z;for(Y=0;Y<q;++Y)ie=pe+(Z=d[g+Y])-ie,pe=x[U+Y]+(-256&ie?0>ie?0:255:ie)&255,ie=Z,V[K+Y]=pe}}function cA(d,g,x,U){var V=g.width,K=g.o;if(e(d!=null&&g!=null),0>x||0>=U||x+U>K)return null;if(!d.Cc){if(d.ga==null){var q;if(d.ga=new qi,(q=d.ga==null)||(q=g.width*g.o,e(d.Gb.length==0),d.Gb=i(q),d.Uc=0,d.Gb==null?q=0:(d.mb=d.Gb,d.nb=d.Uc,d.rc=null,q=1),q=!q),!q){q=d.ga;var Y=d.Fa,Z=d.P,ie=d.qc,pe=d.mb,_e=d.nb,Ne=Z+1,Be=ie-1,Ke=q.l;if(e(Y!=null&&pe!=null&&g!=null),mA[0]=null,mA[1]=Ea,mA[2]=lA,mA[3]=us,q.ca=pe,q.tb=_e,q.c=g.width,q.i=g.height,e(0<q.c&&0<q.i),1>=ie)g=0;else if(q.$a=Y[Z+0]>>0&3,q.Z=Y[Z+0]>>2&3,q.Lc=Y[Z+0]>>4&3,Z=Y[Z+0]>>6&3,0>q.$a||1<q.$a||4<=q.Z||1<q.Lc||Z)g=0;else if(Ke.put=mr,Ke.ac=zr,Ke.bc=Qe,Ke.ma=q,Ke.width=g.width,Ke.height=g.height,Ke.Da=g.Da,Ke.v=g.v,Ke.va=g.va,Ke.j=g.j,Ke.o=g.o,q.$a)e:{e(q.$a==1),g=mt();t:for(;;){if(g==null){g=0;break e}if(e(q!=null),q.mc=g,g.c=q.c,g.i=q.i,g.l=q.l,g.l.ma=q,g.l.width=q.c,g.l.height=q.i,g.a=0,W(g.m,Y,Ne,Be),!Es(q.c,q.i,1,g,null)||(g.ab==1&&g.gc[0].hc==3&&et(g.s)?(q.ic=1,Y=g.c*g.i,g.Ta=null,g.Ua=0,g.V=i(Y),g.Ba=0,g.V==null?(g.a=1,g=0):g=1):(q.ic=0,g=ma(g,q.c)),!g))break t;g=1;break e}q.mc=null,g=0}else g=Be>=q.c*q.i;q=!g}if(q)return null;d.ga.Lc!=1?d.Ga=0:U=K-x}e(d.ga!=null),e(x+U<=K);e:{if(g=(Y=d.ga).c,K=Y.l.o,Y.$a==0){if(Ne=d.rc,Be=d.Vc,Ke=d.Fa,Z=d.P+1+x*g,ie=d.mb,pe=d.nb+x*g,e(Z<=d.P+d.qc),Y.Z!=0)for(e(mA[Y.Z]!=null),q=0;q<U;++q)mA[Y.Z](Ne,Be,Ke,Z,ie,pe,g),Ne=ie,Be=pe,pe+=g,Z+=g;else for(q=0;q<U;++q)n(ie,pe,Ke,Z,g),Ne=ie,Be=pe,pe+=g,Z+=g;d.rc=Ne,d.Vc=Be}else{if(e(Y.mc!=null),g=x+U,e((q=Y.mc)!=null),e(g<=q.i),q.C>=g)g=1;else if(Y.ic||xe(),Y.ic){Y=q.V,Ne=q.Ba,Be=q.c;var ke=q.i,me=(Ke=1,Z=q.$/Be,ie=q.$%Be,pe=q.m,_e=q.s,q.$),we=Be*ke,He=Be*g,ze=_e.wc,Ve=me<He?it(_e,ie,Z):null;e(me<=we),e(g<=ke),e(et(_e));t:for(;;){for(;!pe.h&&me<He;){if(ie&ze||(Ve=it(_e,ie,Z)),e(Ve!=null),$(pe),256>(ke=ct(Ve.G[0],Ve.H[0],pe)))Y[Ne+me]=ke,++me,++ie>=Be&&(ie=0,++Z<=g&&!(Z%16)&&Mt(q,Z));else{if(!(280>ke)){Ke=0;break t}ke=Ft(ke-256,pe);var gt,At=ct(Ve.G[4],Ve.H[4],pe);if($(pe),!(me>=(At=ft(Be,At=Ft(At,pe)))&&we-me>=ke)){Ke=0;break t}for(gt=0;gt<ke;++gt)Y[Ne+me+gt]=Y[Ne+me+gt-At];for(me+=ke,ie+=ke;ie>=Be;)ie-=Be,++Z<=g&&!(Z%16)&&Mt(q,Z);me<He&&ie&ze&&(Ve=it(_e,ie,Z))}e(pe.h==z(pe))}Mt(q,Z>g?g:Z);break t}!Ke||pe.h&&me<we?(Ke=0,q.a=pe.h?5:3):q.$=me,g=Ke}else g=Zt(q,q.V,q.Ba,q.c,q.i,g,ga);if(!g){U=0;break e}}x+U>=K&&(d.Cc=1),U=1}if(!U)return null;if(d.Cc&&((U=d.ga)!=null&&(U.mc=null),d.ga=null,0<d.Ga))return alert("todo:WebPDequantizeLevels"),null}return d.nb+x*V}function v(d,g,x,U,V,K){for(;0<V--;){var q,Y=d,Z=g+(x?1:0),ie=d,pe=g+(x?0:3);for(q=0;q<U;++q){var _e=ie[pe+4*q];_e!=255&&(_e*=32897,Y[Z+4*q+0]=Y[Z+4*q+0]*_e>>23,Y[Z+4*q+1]=Y[Z+4*q+1]*_e>>23,Y[Z+4*q+2]=Y[Z+4*q+2]*_e>>23)}g+=K}}function H(d,g,x,U,V){for(;0<U--;){var K;for(K=0;K<x;++K){var q=d[g+2*K+0],Y=15&(ie=d[g+2*K+1]),Z=4369*Y,ie=(240&ie|ie>>4)*Z>>16;d[g+2*K+0]=(240&q|q>>4)*Z>>16&240|(15&q|q<<4)*Z>>16>>4&15,d[g+2*K+1]=240&ie|Y}g+=V}}function Ae(d,g,x,U,V,K,q,Y){var Z,ie,pe=255;for(ie=0;ie<V;++ie){for(Z=0;Z<U;++Z){var _e=d[g+Z];K[q+4*Z]=_e,pe&=_e}g+=x,q+=Y}return pe!=255}function fe(d,g,x,U,V){var K;for(K=0;K<V;++K)x[U+K]=d[g+K]>>8}function xe(){xi=v,jr=H,kr=Ae,pn=fe}function De(d,g,x){E[d]=function(U,V,K,q,Y,Z,ie,pe,_e,Ne,Be,Ke,ke,me,we,He,ze){var Ve,gt=ze-1>>1,At=Y[Z+0]|ie[pe+0]<<16,Rt=_e[Ne+0]|Be[Ke+0]<<16;e(U!=null);var ut=3*At+Rt+131074>>2;for(g(U[V+0],255&ut,ut>>16,ke,me),K!=null&&(ut=3*Rt+At+131074>>2,g(K[q+0],255&ut,ut>>16,we,He)),Ve=1;Ve<=gt;++Ve){var gr=Y[Z+Ve]|ie[pe+Ve]<<16,Br=_e[Ne+Ve]|Be[Ke+Ve]<<16,dr=At+gr+Rt+Br+524296,ar=dr+2*(gr+Rt)>>3;ut=ar+At>>1,At=(dr=dr+2*(At+Br)>>3)+gr>>1,g(U[V+2*Ve-1],255&ut,ut>>16,ke,me+(2*Ve-1)*x),g(U[V+2*Ve-0],255&At,At>>16,ke,me+(2*Ve-0)*x),K!=null&&(ut=dr+Rt>>1,At=ar+Br>>1,g(K[q+2*Ve-1],255&ut,ut>>16,we,He+(2*Ve-1)*x),g(K[q+2*Ve+0],255&At,At>>16,we,He+(2*Ve+0)*x)),At=gr,Rt=Br}1&ze||(ut=3*At+Rt+131074>>2,g(U[V+ze-1],255&ut,ut>>16,ke,me+(ze-1)*x),K!=null&&(ut=3*Rt+At+131074>>2,g(K[q+ze-1],255&ut,ut>>16,we,He+(ze-1)*x)))}}function $e(){Bi[em]=tP,Bi[tm]=TB,Bi[_B]=rP,Bi[rm]=UB,Bi[nm]=PB,Bi[yw]=QB,Bi[NB]=nP,Bi[xw]=TB,Bi[bw]=UB,Bi[sm]=PB,Bi[Bw]=QB}function lt(d){return d&-16384?0>d?0:255:d>>sP}function h(d,g){return lt((19077*d>>8)+(26149*g>>8)-14234)}function C(d,g,x){return lt((19077*d>>8)-(6419*g>>8)-(13320*x>>8)+8708)}function j(d,g){return lt((19077*d>>8)+(33050*g>>8)-17685)}function J(d,g,x,U,V){U[V+0]=h(d,x),U[V+1]=C(d,g,x),U[V+2]=j(d,g)}function ye(d,g,x,U,V){U[V+0]=j(d,g),U[V+1]=C(d,g,x),U[V+2]=h(d,x)}function Ie(d,g,x,U,V){var K=C(d,g,x);g=K<<3&224|j(d,g)>>3,U[V+0]=248&h(d,x)|K>>5,U[V+1]=g}function Xe(d,g,x,U,V){var K=240&j(d,g)|15;U[V+0]=240&h(d,x)|C(d,g,x)>>4,U[V+1]=K}function Gt(d,g,x,U,V){U[V+0]=255,J(d,g,x,U,V+1)}function ir(d,g,x,U,V){ye(d,g,x,U,V),U[V+3]=255}function zt(d,g,x,U,V){J(d,g,x,U,V),U[V+3]=255}function yr(d,g){return 0>d?0:d>g?g:d}function Pr(d,g,x){E[d]=function(U,V,K,q,Y,Z,ie,pe,_e){for(var Ne=pe+(-2&_e)*x;pe!=Ne;)g(U[V+0],K[q+0],Y[Z+0],ie,pe),g(U[V+1],K[q+0],Y[Z+0],ie,pe+x),V+=2,++q,++Z,pe+=2*x;1&_e&&g(U[V+0],K[q+0],Y[Z+0],ie,pe)}}function Gi(d,g,x){return x==0?d==0?g==0?6:5:g==0?4:0:x}function Jn(d,g,x,U,V){switch(d>>>30){case 3:oo(g,x,U,V,0);break;case 2:fn(g,x,U,V);break;case 1:Is(g,x,U,V)}}function _a(d,g){var x,U,V=g.M,K=g.Nb,q=d.oc,Y=d.pc+40,Z=d.oc,ie=d.pc+584,pe=d.oc,_e=d.pc+600;for(x=0;16>x;++x)q[Y+32*x-1]=129;for(x=0;8>x;++x)Z[ie+32*x-1]=129,pe[_e+32*x-1]=129;for(0<V?q[Y-1-32]=Z[ie-1-32]=pe[_e-1-32]=129:(s(q,Y-32-1,127,21),s(Z,ie-32-1,127,9),s(pe,_e-32-1,127,9)),U=0;U<d.za;++U){var Ne=g.ya[g.aa+U];if(0<U){for(x=-1;16>x;++x)n(q,Y+32*x-4,q,Y+32*x+12,4);for(x=-1;8>x;++x)n(Z,ie+32*x-4,Z,ie+32*x+4,4),n(pe,_e+32*x-4,pe,_e+32*x+4,4)}var Be=d.Gd,Ke=d.Hd+U,ke=Ne.ad,me=Ne.Hc;if(0<V&&(n(q,Y-32,Be[Ke].y,0,16),n(Z,ie-32,Be[Ke].f,0,8),n(pe,_e-32,Be[Ke].ea,0,8)),Ne.Za){var we=q,He=Y-32+16;for(0<V&&(U>=d.za-1?s(we,He,Be[Ke].y[15],4):n(we,He,Be[Ke+1].y,0,4)),x=0;4>x;x++)we[He+128+x]=we[He+256+x]=we[He+384+x]=we[He+0+x];for(x=0;16>x;++x,me<<=2)we=q,He=Y+jB[x],zi[Ne.Ob[x]](we,He),Jn(me,ke,16*+x,we,He)}else if(we=Gi(U,V,Ne.Ob[0]),pA[we](q,Y),me!=0)for(x=0;16>x;++x,me<<=2)Jn(me,ke,16*+x,q,Y+jB[x]);for(x=Ne.Gc,we=Gi(U,V,Ne.Dd),lo[we](Z,ie),lo[we](pe,_e),me=ke,we=Z,He=ie,255&(Ne=x>>0)&&(170&Ne?uh(me,256,we,He):wi(me,256,we,He)),Ne=pe,me=_e,255&(x>>=8)&&(170&x?uh(ke,320,Ne,me):wi(ke,320,Ne,me)),V<d.Ub-1&&(n(Be[Ke].y,0,q,Y+480,16),n(Be[Ke].f,0,Z,ie+224,8),n(Be[Ke].ea,0,pe,_e+224,8)),x=8*K*d.B,Be=d.sa,Ke=d.ta+16*U+16*K*d.R,ke=d.qa,Ne=d.ra+8*U+x,me=d.Ha,we=d.Ia+8*U+x,x=0;16>x;++x)n(Be,Ke+x*d.R,q,Y+32*x,16);for(x=0;8>x;++x)n(ke,Ne+x*d.B,Z,ie+32*x,8),n(me,we+x*d.B,pe,_e+32*x,8)}}function Na(d,g,x,U,V,K,q,Y,Z){var ie=[0],pe=[0],_e=0,Ne=Z!=null?Z.kd:0,Be=Z??new oA;if(d==null||12>x)return 7;Be.data=d,Be.w=g,Be.ha=x,g=[g],x=[x],Be.gb=[Be.gb];e:{var Ke=g,ke=x,me=Be.gb;if(e(d!=null),e(ke!=null),e(me!=null),me[0]=0,12<=ke[0]&&!r(d,Ke[0],"RIFF")){if(r(d,Ke[0]+8,"WEBP")){me=3;break e}var we=Fe(d,Ke[0]+4);if(12>we||4294967286<we){me=3;break e}if(Ne&&we>ke[0]-8){me=7;break e}me[0]=we,Ke[0]+=12,ke[0]-=12}me=0}if(me!=0)return me;for(we=0<Be.gb[0],x=x[0];;){e:{var He=d;ke=g,me=x;var ze=ie,Ve=pe,gt=Ke=[0];if((ut=_e=[_e])[0]=0,8>me[0])me=7;else{if(!r(He,ke[0],"VP8X")){if(Fe(He,ke[0]+4)!=10){me=3;break e}if(18>me[0]){me=7;break e}var At=Fe(He,ke[0]+8),Rt=1+Te(He,ke[0]+12);if(2147483648<=Rt*(He=1+Te(He,ke[0]+15))){me=3;break e}gt!=null&&(gt[0]=At),ze!=null&&(ze[0]=Rt),Ve!=null&&(Ve[0]=He),ke[0]+=18,me[0]-=18,ut[0]=1}me=0}}if(_e=_e[0],Ke=Ke[0],me!=0)return me;if(ke=!!(2&Ke),!we&&_e)return 3;if(K!=null&&(K[0]=!!(16&Ke)),q!=null&&(q[0]=ke),Y!=null&&(Y[0]=0),q=ie[0],Ke=pe[0],_e&&ke&&Z==null){me=0;break}if(4>x){me=7;break}if(we&&_e||!we&&!_e&&!r(d,g[0],"ALPH")){x=[x],Be.na=[Be.na],Be.P=[Be.P],Be.Sa=[Be.Sa];e:{At=d,me=g,we=x;var ut=Be.gb;ze=Be.na,Ve=Be.P,gt=Be.Sa,Rt=22,e(At!=null),e(we!=null),He=me[0];var gr=we[0];for(e(ze!=null),e(gt!=null),ze[0]=null,Ve[0]=null,gt[0]=0;;){if(me[0]=He,we[0]=gr,8>gr){me=7;break e}var Br=Fe(At,He+4);if(4294967286<Br){me=3;break e}var dr=8+Br+1&-2;if(Rt+=dr,0<ut&&Rt>ut){me=3;break e}if(!r(At,He,"VP8 ")||!r(At,He,"VP8L")){me=0;break e}if(gr[0]<dr){me=7;break e}r(At,He,"ALPH")||(ze[0]=At,Ve[0]=He+8,gt[0]=Br),He+=dr,gr-=dr}}if(x=x[0],Be.na=Be.na[0],Be.P=Be.P[0],Be.Sa=Be.Sa[0],me!=0)break}x=[x],Be.Ja=[Be.Ja],Be.xa=[Be.xa];e:if(ut=d,me=g,we=x,ze=Be.gb[0],Ve=Be.Ja,gt=Be.xa,At=me[0],He=!r(ut,At,"VP8 "),Rt=!r(ut,At,"VP8L"),e(ut!=null),e(we!=null),e(Ve!=null),e(gt!=null),8>we[0])me=7;else{if(He||Rt){if(ut=Fe(ut,At+4),12<=ze&&ut>ze-12){me=3;break e}if(Ne&&ut>we[0]-8){me=7;break e}Ve[0]=ut,me[0]+=8,we[0]-=8,gt[0]=Rt}else gt[0]=5<=we[0]&&ut[At+0]==47&&!(ut[At+4]>>5),Ve[0]=we[0];me=0}if(x=x[0],Be.Ja=Be.Ja[0],Be.xa=Be.xa[0],g=g[0],me!=0)break;if(4294967286<Be.Ja)return 3;if(Y==null||ke||(Y[0]=Be.xa?2:1),q=[q],Ke=[Ke],Be.xa){if(5>x){me=7;break}Y=q,Ne=Ke,ke=K,d==null||5>x?d=0:5<=x&&d[g+0]==47&&!(d[g+4]>>5)?(we=[0],ut=[0],ze=[0],W(Ve=new Q,d,g,x),Oe(Ve,we,ut,ze)?(Y!=null&&(Y[0]=we[0]),Ne!=null&&(Ne[0]=ut[0]),ke!=null&&(ke[0]=ze[0]),d=1):d=0):d=0}else{if(10>x){me=7;break}Y=Ke,d==null||10>x||!Pl(d,g+3,x-3)?d=0:(Ne=d[g+0]|d[g+1]<<8|d[g+2]<<16,ke=16383&(d[g+7]<<8|d[g+6]),d=16383&(d[g+9]<<8|d[g+8]),1&Ne||3<(Ne>>1&7)||!(Ne>>4&1)||Ne>>5>=Be.Ja||!ke||!d?d=0:(q&&(q[0]=ke),Y&&(Y[0]=d),d=1))}if(!d||(q=q[0],Ke=Ke[0],_e&&(ie[0]!=q||pe[0]!=Ke)))return 3;Z!=null&&(Z[0]=Be,Z.offset=g-Z.w,e(4294967286>g-Z.w),e(Z.offset==Z.ha-x));break}return me==0||me==7&&_e&&Z==null?(K!=null&&(K[0]|=Be.na!=null&&0<Be.na.length),U!=null&&(U[0]=q),V!=null&&(V[0]=Ke),0):me}function oh(d,g,x){var U=g.width,V=g.height,K=0,q=0,Y=U,Z=V;if(g.Da=d!=null&&0<d.Da,g.Da&&(Y=d.cd,Z=d.bd,K=d.v,q=d.j,11>x||(K&=-2,q&=-2),0>K||0>q||0>=Y||0>=Z||K+Y>U||q+Z>V))return 0;if(g.v=K,g.j=q,g.va=K+Y,g.o=q+Z,g.U=Y,g.T=Z,g.da=d!=null&&0<d.da,g.da){if(!Re(Y,Z,x=[d.ib],K=[d.hb]))return 0;g.ib=x[0],g.hb=K[0]}return g.ob=d!=null&&d.ob,g.Kb=d==null||!d.Sd,g.da&&(g.ob=g.ib<3*U/4&&g.hb<3*V/4,g.Kb=0),1}function Ah(d){if(d==null)return 2;if(11>d.S){var g=d.f.RGBA;g.fb+=(d.height-1)*g.A,g.A=-g.A}else g=d.f.kb,d=d.height,g.O+=(d-1)*g.fa,g.fa=-g.fa,g.N+=(d-1>>1)*g.Ab,g.Ab=-g.Ab,g.W+=(d-1>>1)*g.Db,g.Db=-g.Db,g.F!=null&&(g.J+=(d-1)*g.lb,g.lb=-g.lb);return 0}function ou(d,g,x,U){if(U==null||0>=d||0>=g)return 2;if(x!=null){if(x.Da){var V=x.cd,K=x.bd,q=-2&x.v,Y=-2&x.j;if(0>q||0>Y||0>=V||0>=K||q+V>d||Y+K>g)return 2;d=V,g=K}if(x.da){if(!Re(d,g,V=[x.ib],K=[x.hb]))return 2;d=V[0],g=K[0]}}U.width=d,U.height=g;e:{var Z=U.width,ie=U.height;if(d=U.S,0>=Z||0>=ie||!(d>=em&&13>d))d=2;else{if(0>=U.Rd&&U.sd==null){q=K=V=g=0;var pe=(Y=Z*kB[d])*ie;if(11>d||(K=(ie+1)/2*(g=(Z+1)/2),d==12&&(q=(V=Z)*ie)),(ie=i(pe+2*K+q))==null){d=1;break e}U.sd=ie,11>d?((Z=U.f.RGBA).eb=ie,Z.fb=0,Z.A=Y,Z.size=pe):((Z=U.f.kb).y=ie,Z.O=0,Z.fa=Y,Z.Fd=pe,Z.f=ie,Z.N=0+pe,Z.Ab=g,Z.Cd=K,Z.ea=ie,Z.W=0+pe+K,Z.Db=g,Z.Ed=K,d==12&&(Z.F=ie,Z.J=0+pe+2*K),Z.Tc=q,Z.lb=V)}if(g=1,V=U.S,K=U.width,q=U.height,V>=em&&13>V)if(11>V)d=U.f.RGBA,g&=(Y=Math.abs(d.A))*(q-1)+K<=d.size,g&=Y>=K*kB[V],g&=d.eb!=null;else{d=U.f.kb,Y=(K+1)/2,pe=(q+1)/2,Z=Math.abs(d.fa),ie=Math.abs(d.Ab);var _e=Math.abs(d.Db),Ne=Math.abs(d.lb),Be=Ne*(q-1)+K;g&=Z*(q-1)+K<=d.Fd,g&=ie*(pe-1)+Y<=d.Cd,g=(g&=_e*(pe-1)+Y<=d.Ed)&Z>=K&ie>=Y&_e>=Y,g&=d.y!=null,g&=d.f!=null,g&=d.ea!=null,V==12&&(g&=Ne>=K,g&=Be<=d.Tc,g&=d.F!=null)}else g=0;d=g?0:2}}return d!=0||x!=null&&x.fd&&(d=Ah(U)),d}var Yn=64,Au=[0,1,3,7,15,31,63,127,255,511,1023,2047,4095,8191,16383,32767,65535,131071,262143,524287,1048575,2097151,4194303,8388607,16777215],lu=24,cu=32,lh=8,Rs=[0,0,1,1,2,2,2,2,3,3,3,3,3,3,3,3,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7];Pe("Predictor0","PredictorAdd0"),E.Predictor0=function(){return 4278190080},E.Predictor1=function(d){return d},E.Predictor2=function(d,g,x){return g[x+0]},E.Predictor3=function(d,g,x){return g[x+1]},E.Predictor4=function(d,g,x){return g[x-1]},E.Predictor5=function(d,g,x){return qe(qe(d,g[x+1]),g[x+0])},E.Predictor6=function(d,g,x){return qe(d,g[x-1])},E.Predictor7=function(d,g,x){return qe(d,g[x+0])},E.Predictor8=function(d,g,x){return qe(g[x-1],g[x+0])},E.Predictor9=function(d,g,x){return qe(g[x+0],g[x+1])},E.Predictor10=function(d,g,x){return qe(qe(d,g[x-1]),qe(g[x+0],g[x+1]))},E.Predictor11=function(d,g,x){var U=g[x+0];return 0>=vt(U>>24&255,d>>24&255,(g=g[x-1])>>24&255)+vt(U>>16&255,d>>16&255,g>>16&255)+vt(U>>8&255,d>>8&255,g>>8&255)+vt(255&U,255&d,255&g)?U:d},E.Predictor12=function(d,g,x){var U=g[x+0];return(tt((d>>24&255)+(U>>24&255)-((g=g[x-1])>>24&255))<<24|tt((d>>16&255)+(U>>16&255)-(g>>16&255))<<16|tt((d>>8&255)+(U>>8&255)-(g>>8&255))<<8|tt((255&d)+(255&U)-(255&g)))>>>0},E.Predictor13=function(d,g,x){var U=g[x-1];return(Ze((d=qe(d,g[x+0]))>>24&255,U>>24&255)<<24|Ze(d>>16&255,U>>16&255)<<16|Ze(d>>8&255,U>>8&255)<<8|Ze(d>>0&255,U>>0&255))>>>0};var vw=E.PredictorAdd0;E.PredictorAdd1=ht,Pe("Predictor2","PredictorAdd2"),Pe("Predictor3","PredictorAdd3"),Pe("Predictor4","PredictorAdd4"),Pe("Predictor5","PredictorAdd5"),Pe("Predictor6","PredictorAdd6"),Pe("Predictor7","PredictorAdd7"),Pe("Predictor8","PredictorAdd8"),Pe("Predictor9","PredictorAdd9"),Pe("Predictor10","PredictorAdd10"),Pe("Predictor11","PredictorAdd11"),Pe("Predictor12","PredictorAdd12"),Pe("Predictor13","PredictorAdd13");var ch=E.PredictorAdd2;se("ColorIndexInverseTransform","MapARGB","32b",function(d){return d>>8&255},function(d){return d}),se("VP8LColorIndexInverseTransformAlpha","MapAlpha","8b",function(d){return d},function(d){return d>>8&255});var $p,vi=E.ColorIndexInverseTransform,uu=E.MapARGB,Wp=E.VP8LColorIndexInverseTransformAlpha,Xp=E.MapAlpha,uA=E.VP8LPredictorsAdd=[];uA.length=16,(E.VP8LPredictors=[]).length=16,(E.VP8LPredictorsAdd_C=[]).length=16,(E.VP8LPredictors_C=[]).length=16;var ql,Ms,Ns,dA,io,ao,du,oo,fn,uh,Is,wi,hu,Jp,dh,Gl,zl,hA,$l,fu,Wl,fA,hh,yi,xi,jr,kr,pn,Fn=i(511),Ao=i(2041),fh=i(225),pu=i(767),Yp=0,ww=Ao,Zp=fh,ti=pu,bi=Fn,em=0,tm=1,_B=2,rm=3,nm=4,yw=5,NB=6,xw=7,bw=8,sm=9,Bw=10,O3=[2,3,7],H3=[3,3,11],IB=[280,256,256,256,40],V3=[0,1,1,1,0],K3=[17,18,0,1,2,3,4,5,16,6,7,8,9,10,11,12,13,14,15],q3=[24,7,23,25,40,6,39,41,22,26,38,42,56,5,55,57,21,27,54,58,37,43,72,4,71,73,20,28,53,59,70,74,36,44,88,69,75,52,60,3,87,89,19,29,86,90,35,45,68,76,85,91,51,61,104,2,103,105,18,30,102,106,34,46,84,92,67,77,101,107,50,62,120,1,119,121,83,93,17,31,100,108,66,78,118,122,33,47,117,123,49,63,99,109,82,94,0,116,124,65,79,16,32,98,110,48,115,125,81,95,64,114,126,97,111,80,113,127,96,112],G3=[2954,2956,2958,2962,2970,2986,3018,3082,3212,3468,3980,5004],z3=8,Cw=[4,5,6,7,8,9,10,10,11,12,13,14,15,16,17,17,18,19,20,20,21,21,22,22,23,23,24,25,25,26,27,28,29,30,31,32,33,34,35,36,37,37,38,39,40,41,42,43,44,45,46,46,47,48,49,50,51,52,53,54,55,56,57,58,59,60,61,62,63,64,65,66,67,68,69,70,71,72,73,74,75,76,76,77,78,79,80,81,82,83,84,85,86,87,88,89,91,93,95,96,98,100,101,102,104,106,108,110,112,114,116,118,122,124,126,128,130,132,134,136,138,140,143,145,148,151,154,157],Ew=[4,5,6,7,8,9,10,11,12,13,14,15,16,17,18,19,20,21,22,23,24,25,26,27,28,29,30,31,32,33,34,35,36,37,38,39,40,41,42,43,44,45,46,47,48,49,50,51,52,53,54,55,56,57,58,60,62,64,66,68,70,72,74,76,78,80,82,84,86,88,90,92,94,96,98,100,102,104,106,108,110,112,114,116,119,122,125,128,131,134,137,140,143,146,149,152,155,158,161,164,167,170,173,177,181,185,189,193,197,201,205,209,213,217,221,225,229,234,239,245,249,254,259,264,269,274,279,284],ph=null,$3=[[173,148,140,0],[176,155,140,135,0],[180,157,141,134,130,0],[254,254,243,230,196,177,153,140,133,130,129,0]],W3=[0,1,4,8,5,2,3,6,9,12,13,10,7,11,14,15],SB=[-0,1,-1,2,-2,3,4,6,-3,5,-4,-5,-6,7,-7,8,-8,-9],X3=[[[[128,128,128,128,128,128,128,128,128,128,128],[128,128,128,128,128,128,128,128,128,128,128],[128,128,128,128,128,128,128,128,128,128,128]],[[253,136,254,255,228,219,128,128,128,128,128],[189,129,242,255,227,213,255,219,128,128,128],[106,126,227,252,214,209,255,255,128,128,128]],[[1,98,248,255,236,226,255,255,128,128,128],[181,133,238,254,221,234,255,154,128,128,128],[78,134,202,247,198,180,255,219,128,128,128]],[[1,185,249,255,243,255,128,128,128,128,128],[184,150,247,255,236,224,128,128,128,128,128],[77,110,216,255,236,230,128,128,128,128,128]],[[1,101,251,255,241,255,128,128,128,128,128],[170,139,241,252,236,209,255,255,128,128,128],[37,116,196,243,228,255,255,255,128,128,128]],[[1,204,254,255,245,255,128,128,128,128,128],[207,160,250,255,238,128,128,128,128,128,128],[102,103,231,255,211,171,128,128,128,128,128]],[[1,152,252,255,240,255,128,128,128,128,128],[177,135,243,255,234,225,128,128,128,128,128],[80,129,211,255,194,224,128,128,128,128,128]],[[1,1,255,128,128,128,128,128,128,128,128],[246,1,255,128,128,128,128,128,128,128,128],[255,128,128,128,128,128,128,128,128,128,128]]],[[[198,35,237,223,193,187,162,160,145,155,62],[131,45,198,221,172,176,220,157,252,221,1],[68,47,146,208,149,167,221,162,255,223,128]],[[1,149,241,255,221,224,255,255,128,128,128],[184,141,234,253,222,220,255,199,128,128,128],[81,99,181,242,176,190,249,202,255,255,128]],[[1,129,232,253,214,197,242,196,255,255,128],[99,121,210,250,201,198,255,202,128,128,128],[23,91,163,242,170,187,247,210,255,255,128]],[[1,200,246,255,234,255,128,128,128,128,128],[109,178,241,255,231,245,255,255,128,128,128],[44,130,201,253,205,192,255,255,128,128,128]],[[1,132,239,251,219,209,255,165,128,128,128],[94,136,225,251,218,190,255,255,128,128,128],[22,100,174,245,186,161,255,199,128,128,128]],[[1,182,249,255,232,235,128,128,128,128,128],[124,143,241,255,227,234,128,128,128,128,128],[35,77,181,251,193,211,255,205,128,128,128]],[[1,157,247,255,236,231,255,255,128,128,128],[121,141,235,255,225,227,255,255,128,128,128],[45,99,188,251,195,217,255,224,128,128,128]],[[1,1,251,255,213,255,128,128,128,128,128],[203,1,248,255,255,128,128,128,128,128,128],[137,1,177,255,224,255,128,128,128,128,128]]],[[[253,9,248,251,207,208,255,192,128,128,128],[175,13,224,243,193,185,249,198,255,255,128],[73,17,171,221,161,179,236,167,255,234,128]],[[1,95,247,253,212,183,255,255,128,128,128],[239,90,244,250,211,209,255,255,128,128,128],[155,77,195,248,188,195,255,255,128,128,128]],[[1,24,239,251,218,219,255,205,128,128,128],[201,51,219,255,196,186,128,128,128,128,128],[69,46,190,239,201,218,255,228,128,128,128]],[[1,191,251,255,255,128,128,128,128,128,128],[223,165,249,255,213,255,128,128,128,128,128],[141,124,248,255,255,128,128,128,128,128,128]],[[1,16,248,255,255,128,128,128,128,128,128],[190,36,230,255,236,255,128,128,128,128,128],[149,1,255,128,128,128,128,128,128,128,128]],[[1,226,255,128,128,128,128,128,128,128,128],[247,192,255,128,128,128,128,128,128,128,128],[240,128,255,128,128,128,128,128,128,128,128]],[[1,134,252,255,255,128,128,128,128,128,128],[213,62,250,255,255,128,128,128,128,128,128],[55,93,255,128,128,128,128,128,128,128,128]],[[128,128,128,128,128,128,128,128,128,128,128],[128,128,128,128,128,128,128,128,128,128,128],[128,128,128,128,128,128,128,128,128,128,128]]],[[[202,24,213,235,186,191,220,160,240,175,255],[126,38,182,232,169,184,228,174,255,187,128],[61,46,138,219,151,178,240,170,255,216,128]],[[1,112,230,250,199,191,247,159,255,255,128],[166,109,228,252,211,215,255,174,128,128,128],[39,77,162,232,172,180,245,178,255,255,128]],[[1,52,220,246,198,199,249,220,255,255,128],[124,74,191,243,183,193,250,221,255,255,128],[24,71,130,219,154,170,243,182,255,255,128]],[[1,182,225,249,219,240,255,224,128,128,128],[149,150,226,252,216,205,255,171,128,128,128],[28,108,170,242,183,194,254,223,255,255,128]],[[1,81,230,252,204,203,255,192,128,128,128],[123,102,209,247,188,196,255,233,128,128,128],[20,95,153,243,164,173,255,203,128,128,128]],[[1,222,248,255,216,213,128,128,128,128,128],[168,175,246,252,235,205,255,255,128,128,128],[47,116,215,255,211,212,255,255,128,128,128]],[[1,121,236,253,212,214,255,255,128,128,128],[141,84,213,252,201,202,255,219,128,128,128],[42,80,160,240,162,185,255,205,128,128,128]],[[1,1,255,128,128,128,128,128,128,128,128],[244,1,255,128,128,128,128,128,128,128,128],[238,1,255,128,128,128,128,128,128,128,128]]]],J3=[[[231,120,48,89,115,113,120,152,112],[152,179,64,126,170,118,46,70,95],[175,69,143,80,85,82,72,155,103],[56,58,10,171,218,189,17,13,152],[114,26,17,163,44,195,21,10,173],[121,24,80,195,26,62,44,64,85],[144,71,10,38,171,213,144,34,26],[170,46,55,19,136,160,33,206,71],[63,20,8,114,114,208,12,9,226],[81,40,11,96,182,84,29,16,36]],[[134,183,89,137,98,101,106,165,148],[72,187,100,130,157,111,32,75,80],[66,102,167,99,74,62,40,234,128],[41,53,9,178,241,141,26,8,107],[74,43,26,146,73,166,49,23,157],[65,38,105,160,51,52,31,115,128],[104,79,12,27,217,255,87,17,7],[87,68,71,44,114,51,15,186,23],[47,41,14,110,182,183,21,17,194],[66,45,25,102,197,189,23,18,22]],[[88,88,147,150,42,46,45,196,205],[43,97,183,117,85,38,35,179,61],[39,53,200,87,26,21,43,232,171],[56,34,51,104,114,102,29,93,77],[39,28,85,171,58,165,90,98,64],[34,22,116,206,23,34,43,166,73],[107,54,32,26,51,1,81,43,31],[68,25,106,22,64,171,36,225,114],[34,19,21,102,132,188,16,76,124],[62,18,78,95,85,57,50,48,51]],[[193,101,35,159,215,111,89,46,111],[60,148,31,172,219,228,21,18,111],[112,113,77,85,179,255,38,120,114],[40,42,1,196,245,209,10,25,109],[88,43,29,140,166,213,37,43,154],[61,63,30,155,67,45,68,1,209],[100,80,8,43,154,1,51,26,71],[142,78,78,16,255,128,34,197,171],[41,40,5,102,211,183,4,1,221],[51,50,17,168,209,192,23,25,82]],[[138,31,36,171,27,166,38,44,229],[67,87,58,169,82,115,26,59,179],[63,59,90,180,59,166,93,73,154],[40,40,21,116,143,209,34,39,175],[47,15,16,183,34,223,49,45,183],[46,17,33,183,6,98,15,32,183],[57,46,22,24,128,1,54,17,37],[65,32,73,115,28,128,23,128,205],[40,3,9,115,51,192,18,6,223],[87,37,9,115,59,77,64,21,47]],[[104,55,44,218,9,54,53,130,226],[64,90,70,205,40,41,23,26,57],[54,57,112,184,5,41,38,166,213],[30,34,26,133,152,116,10,32,134],[39,19,53,221,26,114,32,73,255],[31,9,65,234,2,15,1,118,73],[75,32,12,51,192,255,160,43,51],[88,31,35,67,102,85,55,186,85],[56,21,23,111,59,205,45,37,192],[55,38,70,124,73,102,1,34,98]],[[125,98,42,88,104,85,117,175,82],[95,84,53,89,128,100,113,101,45],[75,79,123,47,51,128,81,171,1],[57,17,5,71,102,57,53,41,49],[38,33,13,121,57,73,26,1,85],[41,10,67,138,77,110,90,47,114],[115,21,2,10,102,255,166,23,6],[101,29,16,10,85,128,101,196,26],[57,18,10,102,102,213,34,20,43],[117,20,15,36,163,128,68,1,26]],[[102,61,71,37,34,53,31,243,192],[69,60,71,38,73,119,28,222,37],[68,45,128,34,1,47,11,245,171],[62,17,19,70,146,85,55,62,70],[37,43,37,154,100,163,85,160,1],[63,9,92,136,28,64,32,201,85],[75,15,9,9,64,255,184,119,16],[86,6,28,5,64,255,25,248,1],[56,8,17,132,137,255,55,116,128],[58,15,20,82,135,57,26,121,40]],[[164,50,31,137,154,133,25,35,218],[51,103,44,131,131,123,31,6,158],[86,40,64,135,148,224,45,183,128],[22,26,17,131,240,154,14,1,209],[45,16,21,91,64,222,7,1,197],[56,21,39,155,60,138,23,102,213],[83,12,13,54,192,255,68,47,28],[85,26,85,85,128,128,32,146,171],[18,11,7,63,144,171,4,4,246],[35,27,10,146,174,171,12,26,128]],[[190,80,35,99,180,80,126,54,45],[85,126,47,87,176,51,41,20,32],[101,75,128,139,118,146,116,128,85],[56,41,15,176,236,85,37,9,62],[71,30,17,119,118,255,17,18,138],[101,38,60,138,55,70,43,26,142],[146,36,19,30,171,255,97,27,20],[138,45,61,62,219,1,81,188,64],[32,41,20,117,151,142,20,21,163],[112,19,12,61,195,128,48,4,24]]],Y3=[[[[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[176,246,255,255,255,255,255,255,255,255,255],[223,241,252,255,255,255,255,255,255,255,255],[249,253,253,255,255,255,255,255,255,255,255]],[[255,244,252,255,255,255,255,255,255,255,255],[234,254,254,255,255,255,255,255,255,255,255],[253,255,255,255,255,255,255,255,255,255,255]],[[255,246,254,255,255,255,255,255,255,255,255],[239,253,254,255,255,255,255,255,255,255,255],[254,255,254,255,255,255,255,255,255,255,255]],[[255,248,254,255,255,255,255,255,255,255,255],[251,255,254,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[255,253,254,255,255,255,255,255,255,255,255],[251,254,254,255,255,255,255,255,255,255,255],[254,255,254,255,255,255,255,255,255,255,255]],[[255,254,253,255,254,255,255,255,255,255,255],[250,255,254,255,254,255,255,255,255,255,255],[254,255,255,255,255,255,255,255,255,255,255]],[[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]]],[[[217,255,255,255,255,255,255,255,255,255,255],[225,252,241,253,255,255,254,255,255,255,255],[234,250,241,250,253,255,253,254,255,255,255]],[[255,254,255,255,255,255,255,255,255,255,255],[223,254,254,255,255,255,255,255,255,255,255],[238,253,254,254,255,255,255,255,255,255,255]],[[255,248,254,255,255,255,255,255,255,255,255],[249,254,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[255,253,255,255,255,255,255,255,255,255,255],[247,254,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[255,253,254,255,255,255,255,255,255,255,255],[252,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[255,254,254,255,255,255,255,255,255,255,255],[253,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[255,254,253,255,255,255,255,255,255,255,255],[250,255,255,255,255,255,255,255,255,255,255],[254,255,255,255,255,255,255,255,255,255,255]],[[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]]],[[[186,251,250,255,255,255,255,255,255,255,255],[234,251,244,254,255,255,255,255,255,255,255],[251,251,243,253,254,255,254,255,255,255,255]],[[255,253,254,255,255,255,255,255,255,255,255],[236,253,254,255,255,255,255,255,255,255,255],[251,253,253,254,254,255,255,255,255,255,255]],[[255,254,254,255,255,255,255,255,255,255,255],[254,254,254,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[255,254,255,255,255,255,255,255,255,255,255],[254,254,255,255,255,255,255,255,255,255,255],[254,255,255,255,255,255,255,255,255,255,255]],[[255,255,255,255,255,255,255,255,255,255,255],[254,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]]],[[[248,255,255,255,255,255,255,255,255,255,255],[250,254,252,254,255,255,255,255,255,255,255],[248,254,249,253,255,255,255,255,255,255,255]],[[255,253,253,255,255,255,255,255,255,255,255],[246,253,253,255,255,255,255,255,255,255,255],[252,254,251,254,254,255,255,255,255,255,255]],[[255,254,252,255,255,255,255,255,255,255,255],[248,254,253,255,255,255,255,255,255,255,255],[253,255,254,254,255,255,255,255,255,255,255]],[[255,251,254,255,255,255,255,255,255,255,255],[245,251,254,255,255,255,255,255,255,255,255],[253,253,254,255,255,255,255,255,255,255,255]],[[255,251,253,255,255,255,255,255,255,255,255],[252,253,254,255,255,255,255,255,255,255,255],[255,254,255,255,255,255,255,255,255,255,255]],[[255,252,255,255,255,255,255,255,255,255,255],[249,255,254,255,255,255,255,255,255,255,255],[255,255,254,255,255,255,255,255,255,255,255]],[[255,255,253,255,255,255,255,255,255,255,255],[250,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[255,255,255,255,255,255,255,255,255,255,255],[254,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]]]],Z3=[0,1,2,3,6,4,5,6,6,6,6,6,6,6,6,7,0],pA=[],zi=[],lo=[],eP=1,FB=2,mA=[],Bi=[];De("UpsampleRgbLinePair",J,3),De("UpsampleBgrLinePair",ye,3),De("UpsampleRgbaLinePair",zt,4),De("UpsampleBgraLinePair",ir,4),De("UpsampleArgbLinePair",Gt,4),De("UpsampleRgba4444LinePair",Xe,2),De("UpsampleRgb565LinePair",Ie,2);var tP=E.UpsampleRgbLinePair,rP=E.UpsampleBgrLinePair,TB=E.UpsampleRgbaLinePair,UB=E.UpsampleBgraLinePair,PB=E.UpsampleArgbLinePair,QB=E.UpsampleRgba4444LinePair,nP=E.UpsampleRgb565LinePair,im=16,am=1<<im-1,mh=-227,_w=482,sP=6,LB=0,iP=i(256),aP=i(256),oP=i(256),AP=i(256),lP=i(_w-mh),cP=i(_w-mh);Pr("YuvToRgbRow",J,3),Pr("YuvToBgrRow",ye,3),Pr("YuvToRgbaRow",zt,4),Pr("YuvToBgraRow",ir,4),Pr("YuvToArgbRow",Gt,4),Pr("YuvToRgba4444Row",Xe,2),Pr("YuvToRgb565Row",Ie,2);var jB=[0,4,8,12,128,132,136,140,256,260,264,268,384,388,392,396],om=[0,2,8],uP=[8,7,6,4,4,2,2,2,1,1,1,1],dP=1;this.WebPDecodeRGBA=function(d,g,x,U,V){var K=tm,q=new no,Y=new fr;q.ba=Y,Y.S=K,Y.width=[Y.width],Y.height=[Y.height];var Z=Y.width,ie=Y.height,pe=new hn;if(pe==null||d==null)var _e=2;else e(pe!=null),_e=Na(d,g,x,pe.width,pe.height,pe.Pd,pe.Qd,pe.format,null);if(_e!=0?Z=0:(Z!=null&&(Z[0]=pe.width[0]),ie!=null&&(ie[0]=pe.height[0]),Z=1),Z){Y.width=Y.width[0],Y.height=Y.height[0],U!=null&&(U[0]=Y.width),V!=null&&(V[0]=Y.height);e:{if(U=new Ja,(V=new oA).data=d,V.w=g,V.ha=x,V.kd=1,g=[0],e(V!=null),((d=Na(V.data,V.w,V.ha,null,null,null,g,null,V))==0||d==7)&&g[0]&&(d=4),(g=d)==0){if(e(q!=null),U.data=V.data,U.w=V.w+V.offset,U.ha=V.ha-V.offset,U.put=mr,U.ac=zr,U.bc=Qe,U.ma=q,V.xa){if((d=mt())==null){q=1;break e}if(function(Ne,Be){var Ke=[0],ke=[0],me=[0];t:for(;;){if(Ne==null)return 0;if(Be==null)return Ne.a=2,0;if(Ne.l=Be,Ne.a=0,W(Ne.m,Be.data,Be.w,Be.ha),!Oe(Ne.m,Ke,ke,me)){Ne.a=3;break t}if(Ne.xb=FB,Be.width=Ke[0],Be.height=ke[0],!Es(Ke[0],ke[0],1,Ne,null))break t;return 1}return e(Ne.a!=0),0}(d,U)){if(U=(g=ou(U.width,U.height,q.Oa,q.ba))==0){t:{U=d;r:for(;;){if(U==null){U=0;break t}if(e(U.s.yc!=null),e(U.s.Ya!=null),e(0<U.s.Wb),e((x=U.l)!=null),e((V=x.ma)!=null),U.xb!=0){if(U.ca=V.ba,U.tb=V.tb,e(U.ca!=null),!oh(V.Oa,x,rm)){U.a=2;break r}if(!ma(U,x.width)||x.da)break r;if((x.da||St(U.ca.S))&&xe(),11>U.ca.S||(alert("todo:WebPInitConvertARGBToYUV"),U.ca.f.kb.F!=null&&xe()),U.Pb&&0<U.s.ua&&U.s.vb.X==null&&!oe(U.s.vb,U.s.Wa.Xa)){U.a=1;break r}U.xb=0}if(!Zt(U,U.V,U.Ba,U.c,U.i,x.o,be))break r;V.Dc=U.Ma,U=1;break t}e(U.a!=0),U=0}U=!U}U&&(g=d.a)}else g=d.a}else{if((d=new Ul)==null){q=1;break e}if(d.Fa=V.na,d.P=V.P,d.qc=V.Sa,Ql(d,U)){if((g=ou(U.width,U.height,q.Oa,q.ba))==0){if(d.Aa=0,x=q.Oa,e((V=d)!=null),x!=null){if(0<(Z=0>(Z=x.Md)?0:100<Z?255:255*Z/100)){for(ie=pe=0;4>ie;++ie)12>(_e=V.pb[ie]).lc&&(_e.ia=Z*uP[0>_e.lc?0:_e.lc]>>3),pe|=_e.ia;pe&&(alert("todo:VP8InitRandom"),V.ia=1)}V.Ga=x.Id,100<V.Ga?V.Ga=100:0>V.Ga&&(V.Ga=0)}eu(d,U)||(g=d.a)}}else g=d.a}g==0&&q.Oa!=null&&q.Oa.fd&&(g=Ah(q.ba))}q=g}K=q!=0?null:11>K?Y.f.RGBA.eb:Y.f.kb.y}else K=null;return K};var kB=[3,4,3,4,4,2,2,4,4,4,2,1,1]};function c(E,L){for(var D="",N=0;N<4;N++)D+=String.fromCharCode(E[L++]);return D}function u(E,L){return(E[L+0]<<0|E[L+1]<<8|E[L+2]<<16)>>>0}function f(E,L){return(E[L+0]<<0|E[L+1]<<8|E[L+2]<<16|E[L+3]<<24)>>>0}new l;var p=[0],m=[0],b=[],B=new l,_=t,w=function(E,L){var D={},N=0,T=!1,F=0,ee=0;if(D.frames=[],!function(k,z,te,$){for(var ne=0;ne<$;ne++)if(k[z+ne]!=te.charCodeAt(ne))return!0;return!1}(E,L,"RIFF",4)){for(f(E,L+=4),L+=8;L<E.length;){var ce=c(E,L),re=f(E,L+=4);L+=4;var de=re+(1&re);switch(ce){case"VP8 ":case"VP8L":D.frames[N]===void 0&&(D.frames[N]={}),(ae=D.frames[N]).src_off=T?ee:L-8,ae.src_size=F+re+8,N++,T&&(T=!1,F=0,ee=0);break;case"VP8X":(ae=D.header={}).feature_flags=E[L];var W=L+4;ae.canvas_width=1+u(E,W),W+=3,ae.canvas_height=1+u(E,W),W+=3;break;case"ALPH":T=!0,F=de+8,ee=L-8;break;case"ANIM":(ae=D.header).bgcolor=f(E,L),W=L+4,ae.loop_count=(Ee=E)[(Q=W)+0]<<0|Ee[Q+1]<<8,W+=2;break;case"ANMF":var ue,ae;(ae=D.frames[N]={}).offset_x=2*u(E,L),L+=3,ae.offset_y=2*u(E,L),L+=3,ae.width=1+u(E,L),L+=3,ae.height=1+u(E,L),L+=3,ae.duration=u(E,L),L+=3,ue=E[L++],ae.dispose=1&ue,ae.blend=ue>>1&1}ce!="ANMF"&&(L+=de)}var Ee,Q;return D}}(_,0);w.response=_,w.rgbaoutput=!0,w.dataurl=!1;var y=w.header?w.header:null,S=w.frames?w.frames:null;if(y){y.loop_counter=y.loop_count,p=[y.canvas_height],m=[y.canvas_width];for(var O=0;O<S.length&&S[O].blend!=0;O++);}var R=S[0],M=B.WebPDecodeRGBA(_,R.src_off,R.src_size,m,p);R.rgba=M,R.imgwidth=m[0],R.imgheight=p[0];for(var I=0;I<m[0]*p[0]*4;I++)b[I]=M[I];return this.width=m,this.height=p,this.data=b,this}(function(t){var e=function(){return typeof rx=="function"},r=function(p,m,b,B){var _=4,w=a;switch(B){case t.image_compression.FAST:_=1,w=i;break;case t.image_compression.MEDIUM:_=6,w=o;break;case t.image_compression.SLOW:_=9,w=l}p=n(p,m,b,w);var y=rx(p,{level:_});return t.__addimage__.arrayBufferToBinaryString(y)},n=function(p,m,b,B){for(var _,w,y,S=p.length/m,O=new Uint8Array(p.length+S),R=u(),M=0;M<S;M+=1){if(y=M*m,_=p.subarray(y,y+m),B)O.set(B(_,b,w),y+M);else{for(var I,E=R.length,L=[];I<E;I+=1)L[I]=R[I](_,b,w);var D=f(L.concat());O.set(L[D],y+M)}w=_}return O},s=function(p){var m=Array.apply([],p);return m.unshift(0),m},i=function(p,m){var b,B=[],_=p.length;B[0]=1;for(var w=0;w<_;w+=1)b=p[w-m]||0,B[w+1]=p[w]-b+256&255;return B},a=function(p,m,b){var B,_=[],w=p.length;_[0]=2;for(var y=0;y<w;y+=1)B=b&&b[y]||0,_[y+1]=p[y]-B+256&255;return _},o=function(p,m,b){var B,_,w=[],y=p.length;w[0]=3;for(var S=0;S<y;S+=1)B=p[S-m]||0,_=b&&b[S]||0,w[S+1]=p[S]+256-(B+_>>>1)&255;return w},l=function(p,m,b){var B,_,w,y,S=[],O=p.length;S[0]=4;for(var R=0;R<O;R+=1)B=p[R-m]||0,_=b&&b[R]||0,w=b&&b[R-m]||0,y=c(B,_,w),S[R+1]=p[R]-y+256&255;return S},c=function(p,m,b){if(p===m&&m===b)return p;var B=Math.abs(m-b),_=Math.abs(p-b),w=Math.abs(p+m-b-b);return B<=_&&B<=w?p:_<=w?m:b},u=function(){return[s,i,a,o,l]},f=function(p){var m=p.map(function(b){return b.reduce(function(B,_){return B+Math.abs(_)},0)});return m.indexOf(Math.min.apply(null,m))};t.processPNG=function(p,m,b,B){var _,w,y,S,O,R,M,I,E,L,D,N,T,F,ee,ce=this.decode.FLATE_DECODE,re="";if(this.__addimage__.isArrayBuffer(p)&&(p=new Uint8Array(p)),this.__addimage__.isArrayBufferView(p)){if(p=(y=new qz(p)).imgData,w=y.bits,_=y.colorSpace,O=y.colors,[4,6].indexOf(y.colorType)!==-1){if(y.bits===8){E=(I=y.pixelBitlength==32?new Uint32Array(y.decodePixels().buffer):y.pixelBitlength==16?new Uint16Array(y.decodePixels().buffer):new Uint8Array(y.decodePixels().buffer)).length,D=new Uint8Array(E*y.colors),L=new Uint8Array(E);var de,W=y.pixelBitlength-y.bits;for(F=0,ee=0;F<E;F++){for(T=I[F],de=0;de<W;)D[ee++]=T>>>de&255,de+=y.bits;L[F]=T>>>de&255}}if(y.bits===16){E=(I=new Uint32Array(y.decodePixels().buffer)).length,D=new Uint8Array(E*(32/y.pixelBitlength)*y.colors),L=new Uint8Array(E*(32/y.pixelBitlength)),N=y.colors>1,F=0,ee=0;for(var ue=0;F<E;)T=I[F++],D[ee++]=T>>>0&255,N&&(D[ee++]=T>>>16&255,T=I[F++],D[ee++]=T>>>0&255),L[ue++]=T>>>16&255;w=8}B!==t.image_compression.NONE&&e()?(p=r(D,y.width*y.colors,y.colors,B),M=r(L,y.width,1,B)):(p=D,M=L,ce=void 0)}if(y.colorType===3&&(_=this.color_spaces.INDEXED,R=y.palette,y.transparency.indexed)){var ae=y.transparency.indexed,Ee=0;for(F=0,E=ae.length;F<E;++F)Ee+=ae[F];if((Ee/=255)===E-1&&ae.indexOf(0)!==-1)S=[ae.indexOf(0)];else if(Ee!==E){for(I=y.decodePixels(),L=new Uint8Array(I.length),F=0,E=I.length;F<E;F++)L[F]=ae[I[F]];M=r(L,y.width,1)}}var Q=function(k){var z;switch(k){case t.image_compression.FAST:z=11;break;case t.image_compression.MEDIUM:z=13;break;case t.image_compression.SLOW:z=14;break;default:z=12}return z}(B);return ce===this.decode.FLATE_DECODE&&(re="/Predictor "+Q+" "),re+="/Colors "+O+" /BitsPerComponent "+w+" /Columns "+y.width,(this.__addimage__.isArrayBuffer(p)||this.__addimage__.isArrayBufferView(p))&&(p=this.__addimage__.arrayBufferToBinaryString(p)),(M&&this.__addimage__.isArrayBuffer(M)||this.__addimage__.isArrayBufferView(M))&&(M=this.__addimage__.arrayBufferToBinaryString(M)),{alias:b,data:p,index:m,filter:ce,decodeParameters:re,transparency:S,palette:R,sMask:M,predictor:Q,width:y.width,height:y.height,bitsPerComponent:w,colorSpace:_}}}})(kt.API),function(t){t.processGIF89A=function(e,r,n,s){var i=new Gz(e),a=i.width,o=i.height,l=[];i.decodeAndBlitFrameRGBA(0,l);var c={data:l,width:a,height:o},u=new Jy(100).encode(c,100);return t.processJPEG.call(this,u,r,n,s)},t.processGIF87A=t.processGIF89A}(kt.API),Ji.prototype.parseHeader=function(){if(this.fileSize=this.datav.getUint32(this.pos,!0),this.pos+=4,this.reserved=this.datav.getUint32(this.pos,!0),this.pos+=4,this.offset=this.datav.getUint32(this.pos,!0),this.pos+=4,this.headerSize=this.datav.getUint32(this.pos,!0),this.pos+=4,this.width=this.datav.getUint32(this.pos,!0),this.pos+=4,this.height=this.datav.getInt32(this.pos,!0),this.pos+=4,this.planes=this.datav.getUint16(this.pos,!0),this.pos+=2,this.bitPP=this.datav.getUint16(this.pos,!0),this.pos+=2,this.compress=this.datav.getUint32(this.pos,!0),this.pos+=4,this.rawSize=this.datav.getUint32(this.pos,!0),this.pos+=4,this.hr=this.datav.getUint32(this.pos,!0),this.pos+=4,this.vr=this.datav.getUint32(this.pos,!0),this.pos+=4,this.colors=this.datav.getUint32(this.pos,!0),this.pos+=4,this.importantColors=this.datav.getUint32(this.pos,!0),this.pos+=4,this.bitPP===16&&this.is_with_alpha&&(this.bitPP=15),this.bitPP<15){var t=this.colors===0?1<<this.bitPP:this.colors;this.palette=new Array(t);for(var e=0;e<t;e++){var r=this.datav.getUint8(this.pos++,!0),n=this.datav.getUint8(this.pos++,!0),s=this.datav.getUint8(this.pos++,!0),i=this.datav.getUint8(this.pos++,!0);this.palette[e]={red:s,green:n,blue:r,quad:i}}}this.height<0&&(this.height*=-1,this.bottom_up=!1)},Ji.prototype.parseBGR=function(){this.pos=this.offset;try{var t="bit"+this.bitPP,e=this.width*this.height*4;this.data=new Uint8Array(e),this[t]()}catch(r){Lr.log("bit decode error:"+r)}},Ji.prototype.bit1=function(){var t,e=Math.ceil(this.width/8),r=e%4;for(t=this.height-1;t>=0;t--){for(var n=this.bottom_up?t:this.height-1-t,s=0;s<e;s++)for(var i=this.datav.getUint8(this.pos++,!0),a=n*this.width*4+8*s*4,o=0;o<8&&8*s+o<this.width;o++){var l=this.palette[i>>7-o&1];this.data[a+4*o]=l.blue,this.data[a+4*o+1]=l.green,this.data[a+4*o+2]=l.red,this.data[a+4*o+3]=255}r!==0&&(this.pos+=4-r)}},Ji.prototype.bit4=function(){for(var t=Math.ceil(this.width/2),e=t%4,r=this.height-1;r>=0;r--){for(var n=this.bottom_up?r:this.height-1-r,s=0;s<t;s++){var i=this.datav.getUint8(this.pos++,!0),a=n*this.width*4+2*s*4,o=i>>4,l=15&i,c=this.palette[o];if(this.data[a]=c.blue,this.data[a+1]=c.green,this.data[a+2]=c.red,this.data[a+3]=255,2*s+1>=this.width)break;c=this.palette[l],this.data[a+4]=c.blue,this.data[a+4+1]=c.green,this.data[a+4+2]=c.red,this.data[a+4+3]=255}e!==0&&(this.pos+=4-e)}},Ji.prototype.bit8=function(){for(var t=this.width%4,e=this.height-1;e>=0;e--){for(var r=this.bottom_up?e:this.height-1-e,n=0;n<this.width;n++){var s=this.datav.getUint8(this.pos++,!0),i=r*this.width*4+4*n;if(s<this.palette.length){var a=this.palette[s];this.data[i]=a.red,this.data[i+1]=a.green,this.data[i+2]=a.blue,this.data[i+3]=255}else this.data[i]=255,this.data[i+1]=255,this.data[i+2]=255,this.data[i+3]=255}t!==0&&(this.pos+=4-t)}},Ji.prototype.bit15=function(){for(var t=this.width%3,e=parseInt("11111",2),r=this.height-1;r>=0;r--){for(var n=this.bottom_up?r:this.height-1-r,s=0;s<this.width;s++){var i=this.datav.getUint16(this.pos,!0);this.pos+=2;var a=(i&e)/e*255|0,o=(i>>5&e)/e*255|0,l=(i>>10&e)/e*255|0,c=i>>15?255:0,u=n*this.width*4+4*s;this.data[u]=l,this.data[u+1]=o,this.data[u+2]=a,this.data[u+3]=c}this.pos+=t}},Ji.prototype.bit16=function(){for(var t=this.width%3,e=parseInt("11111",2),r=parseInt("111111",2),n=this.height-1;n>=0;n--){for(var s=this.bottom_up?n:this.height-1-n,i=0;i<this.width;i++){var a=this.datav.getUint16(this.pos,!0);this.pos+=2;var o=(a&e)/e*255|0,l=(a>>5&r)/r*255|0,c=(a>>11)/e*255|0,u=s*this.width*4+4*i;this.data[u]=c,this.data[u+1]=l,this.data[u+2]=o,this.data[u+3]=255}this.pos+=t}},Ji.prototype.bit24=function(){for(var t=this.height-1;t>=0;t--){for(var e=this.bottom_up?t:this.height-1-t,r=0;r<this.width;r++){var n=this.datav.getUint8(this.pos++,!0),s=this.datav.getUint8(this.pos++,!0),i=this.datav.getUint8(this.pos++,!0),a=e*this.width*4+4*r;this.data[a]=i,this.data[a+1]=s,this.data[a+2]=n,this.data[a+3]=255}this.pos+=this.width%4}},Ji.prototype.bit32=function(){for(var t=this.height-1;t>=0;t--)for(var e=this.bottom_up?t:this.height-1-t,r=0;r<this.width;r++){var n=this.datav.getUint8(this.pos++,!0),s=this.datav.getUint8(this.pos++,!0),i=this.datav.getUint8(this.pos++,!0),a=this.datav.getUint8(this.pos++,!0),o=e*this.width*4+4*r;this.data[o]=i,this.data[o+1]=s,this.data[o+2]=n,this.data[o+3]=a}},Ji.prototype.getData=function(){return this.data},function(t){t.processBMP=function(e,r,n,s){var i=new Ji(e,!1),a=i.width,o=i.height,l={data:i.getData(),width:a,height:o},c=new Jy(100).encode(l,100);return t.processJPEG.call(this,c,r,n,s)}}(kt.API),BN.prototype.getData=function(){return this.data},function(t){t.processWEBP=function(e,r,n,s){var i=new BN(e),a=i.width,o=i.height,l={data:i.getData(),width:a,height:o},c=new Jy(100).encode(l,100);return t.processJPEG.call(this,c,r,n,s)}}(kt.API),kt.API.processRGBA=function(t,e,r){for(var n=t.data,s=n.length,i=new Uint8Array(s/4*3),a=new Uint8Array(s/4),o=0,l=0,c=0;c<s;c+=4){var u=n[c],f=n[c+1],p=n[c+2],m=n[c+3];i[o++]=u,i[o++]=f,i[o++]=p,a[l++]=m}var b=this.__addimage__.arrayBufferToBinaryString(i);return{alpha:this.__addimage__.arrayBufferToBinaryString(a),data:b,index:e,alias:r,colorSpace:"DeviceRGB",bitsPerComponent:8,width:t.width,height:t.height}},kt.API.setLanguage=function(t){return this.internal.languageSettings===void 0&&(this.internal.languageSettings={},this.internal.languageSettings.isSubscribed=!1),{af:"Afrikaans",sq:"Albanian",ar:"Arabic (Standard)","ar-DZ":"Arabic (Algeria)","ar-BH":"Arabic (Bahrain)","ar-EG":"Arabic (Egypt)","ar-IQ":"Arabic (Iraq)","ar-JO":"Arabic (Jordan)","ar-KW":"Arabic (Kuwait)","ar-LB":"Arabic (Lebanon)","ar-LY":"Arabic (Libya)","ar-MA":"Arabic (Morocco)","ar-OM":"Arabic (Oman)","ar-QA":"Arabic (Qatar)","ar-SA":"Arabic (Saudi Arabia)","ar-SY":"Arabic (Syria)","ar-TN":"Arabic (Tunisia)","ar-AE":"Arabic (U.A.E.)","ar-YE":"Arabic (Yemen)",an:"Aragonese",hy:"Armenian",as:"Assamese",ast:"Asturian",az:"Azerbaijani",eu:"Basque",be:"Belarusian",bn:"Bengali",bs:"Bosnian",br:"Breton",bg:"Bulgarian",my:"Burmese",ca:"Catalan",ch:"Chamorro",ce:"Chechen",zh:"Chinese","zh-HK":"Chinese (Hong Kong)","zh-CN":"Chinese (PRC)","zh-SG":"Chinese (Singapore)","zh-TW":"Chinese (Taiwan)",cv:"Chuvash",co:"Corsican",cr:"Cree",hr:"Croatian",cs:"Czech",da:"Danish",nl:"Dutch (Standard)","nl-BE":"Dutch (Belgian)",en:"English","en-AU":"English (Australia)","en-BZ":"English (Belize)","en-CA":"English (Canada)","en-IE":"English (Ireland)","en-JM":"English (Jamaica)","en-NZ":"English (New Zealand)","en-PH":"English (Philippines)","en-ZA":"English (South Africa)","en-TT":"English (Trinidad & Tobago)","en-GB":"English (United Kingdom)","en-US":"English (United States)","en-ZW":"English (Zimbabwe)",eo:"Esperanto",et:"Estonian",fo:"Faeroese",fj:"Fijian",fi:"Finnish",fr:"French (Standard)","fr-BE":"French (Belgium)","fr-CA":"French (Canada)","fr-FR":"French (France)","fr-LU":"French (Luxembourg)","fr-MC":"French (Monaco)","fr-CH":"French (Switzerland)",fy:"Frisian",fur:"Friulian",gd:"Gaelic (Scots)","gd-IE":"Gaelic (Irish)",gl:"Galacian",ka:"Georgian",de:"German (Standard)","de-AT":"German (Austria)","de-DE":"German (Germany)","de-LI":"German (Liechtenstein)","de-LU":"German (Luxembourg)","de-CH":"German (Switzerland)",el:"Greek",gu:"Gujurati",ht:"Haitian",he:"Hebrew",hi:"Hindi",hu:"Hungarian",is:"Icelandic",id:"Indonesian",iu:"Inuktitut",ga:"Irish",it:"Italian (Standard)","it-CH":"Italian (Switzerland)",ja:"Japanese",kn:"Kannada",ks:"Kashmiri",kk:"Kazakh",km:"Khmer",ky:"Kirghiz",tlh:"Klingon",ko:"Korean","ko-KP":"Korean (North Korea)","ko-KR":"Korean (South Korea)",la:"Latin",lv:"Latvian",lt:"Lithuanian",lb:"Luxembourgish",mk:"North Macedonia",ms:"Malay",ml:"Malayalam",mt:"Maltese",mi:"Maori",mr:"Marathi",mo:"Moldavian",nv:"Navajo",ng:"Ndonga",ne:"Nepali",no:"Norwegian",nb:"Norwegian (Bokmal)",nn:"Norwegian (Nynorsk)",oc:"Occitan",or:"Oriya",om:"Oromo",fa:"Persian","fa-IR":"Persian/Iran",pl:"Polish",pt:"Portuguese","pt-BR":"Portuguese (Brazil)",pa:"Punjabi","pa-IN":"Punjabi (India)","pa-PK":"Punjabi (Pakistan)",qu:"Quechua",rm:"Rhaeto-Romanic",ro:"Romanian","ro-MO":"Romanian (Moldavia)",ru:"Russian","ru-MO":"Russian (Moldavia)",sz:"Sami (Lappish)",sg:"Sango",sa:"Sanskrit",sc:"Sardinian",sd:"Sindhi",si:"Singhalese",sr:"Serbian",sk:"Slovak",sl:"Slovenian",so:"Somani",sb:"Sorbian",es:"Spanish","es-AR":"Spanish (Argentina)","es-BO":"Spanish (Bolivia)","es-CL":"Spanish (Chile)","es-CO":"Spanish (Colombia)","es-CR":"Spanish (Costa Rica)","es-DO":"Spanish (Dominican Republic)","es-EC":"Spanish (Ecuador)","es-SV":"Spanish (El Salvador)","es-GT":"Spanish (Guatemala)","es-HN":"Spanish (Honduras)","es-MX":"Spanish (Mexico)","es-NI":"Spanish (Nicaragua)","es-PA":"Spanish (Panama)","es-PY":"Spanish (Paraguay)","es-PE":"Spanish (Peru)","es-PR":"Spanish (Puerto Rico)","es-ES":"Spanish (Spain)","es-UY":"Spanish (Uruguay)","es-VE":"Spanish (Venezuela)",sx:"Sutu",sw:"Swahili",sv:"Swedish","sv-FI":"Swedish (Finland)","sv-SV":"Swedish (Sweden)",ta:"Tamil",tt:"Tatar",te:"Teluga",th:"Thai",tig:"Tigre",ts:"Tsonga",tn:"Tswana",tr:"Turkish",tk:"Turkmen",uk:"Ukrainian",hsb:"Upper Sorbian",ur:"Urdu",ve:"Venda",vi:"Vietnamese",vo:"Volapuk",wa:"Walloon",cy:"Welsh",xh:"Xhosa",ji:"Yiddish",zu:"Zulu"}[t]!==void 0&&(this.internal.languageSettings.languageCode=t,this.internal.languageSettings.isSubscribed===!1&&(this.internal.events.subscribe("putCatalog",function(){this.internal.write("/Lang ("+this.internal.languageSettings.languageCode+")")}),this.internal.languageSettings.isSubscribed=!0)),this},Pu=kt.API,pg=Pu.getCharWidthsArray=function(t,e){var r,n,s=(e=e||{}).font||this.internal.getFont(),i=e.fontSize||this.internal.getFontSize(),a=e.charSpace||this.internal.getCharSpace(),o=e.widths?e.widths:s.metadata.Unicode.widths,l=o.fof?o.fof:1,c=e.kerning?e.kerning:s.metadata.Unicode.kerning,u=c.fof?c.fof:1,f=e.doKerning!==!1,p=0,m=t.length,b=0,B=o[0]||l,_=[];for(r=0;r<m;r++)n=t.charCodeAt(r),typeof s.metadata.widthOfString=="function"?_.push((s.metadata.widthOfGlyph(s.metadata.characterToGlyph(n))+a*(1e3/i)||0)/1e3):(p=f&&Nr(c[n])==="object"&&!isNaN(parseInt(c[n][b],10))?c[n][b]/u:0,_.push((o[n]||B)/l+p)),b=n;return _},wN=Pu.getStringUnitWidth=function(t,e){var r=(e=e||{}).fontSize||this.internal.getFontSize(),n=e.font||this.internal.getFont(),s=e.charSpace||this.internal.getCharSpace();return Pu.processArabic&&(t=Pu.processArabic(t)),typeof n.metadata.widthOfString=="function"?n.metadata.widthOfString(t,r,s)/r:pg.apply(this,arguments).reduce(function(i,a){return i+a},0)},yN=function(t,e,r,n){for(var s=[],i=0,a=t.length,o=0;i!==a&&o+e[i]<r;)o+=e[i],i++;s.push(t.slice(0,i));var l=i;for(o=0;i!==a;)o+e[i]>n&&(s.push(t.slice(l,i)),o=0,l=i),o+=e[i],i++;return l!==i&&s.push(t.slice(l,i)),s},xN=function(t,e,r){r||(r={});var n,s,i,a,o,l,c,u=[],f=[u],p=r.textIndent||0,m=0,b=0,B=t.split(" "),_=pg.apply(this,[" ",r])[0];if(l=r.lineIndent===-1?B[0].length+2:r.lineIndent||0){var w=Array(l).join(" "),y=[];B.map(function(O){(O=O.split(/\s*\n/)).length>1?y=y.concat(O.map(function(R,M){return(M&&R.length?`
`:"")+R})):y.push(O[0])}),B=y,l=wN.apply(this,[w,r])}for(i=0,a=B.length;i<a;i++){var S=0;if(n=B[i],l&&n[0]==`
`&&(n=n.substr(1),S=1),p+m+(b=(s=pg.apply(this,[n,r])).reduce(function(O,R){return O+R},0))>e||S){if(b>e){for(o=yN.apply(this,[n,s,e-(p+m),e]),u.push(o.shift()),u=[o.pop()];o.length;)f.push([o.shift()]);b=s.slice(n.length-(u[0]?u[0].length:0)).reduce(function(O,R){return O+R},0)}else u=[n];f.push(u),p=b+l,m=_}else u.push(n),p+=m+b,m=_}return c=l?function(O,R){return(R?w:"")+O.join(" ")}:function(O){return O.join(" ")},f.map(c)},Pu.splitTextToSize=function(t,e,r){var n,s=(r=r||{}).fontSize||this.internal.getFontSize(),i=(function(u){if(u.widths&&u.kerning)return{widths:u.widths,kerning:u.kerning};var f=this.internal.getFont(u.fontName,u.fontStyle);return f.metadata.Unicode?{widths:f.metadata.Unicode.widths||{0:1},kerning:f.metadata.Unicode.kerning||{}}:{font:f.metadata,fontSize:this.internal.getFontSize(),charSpace:this.internal.getCharSpace()}}).call(this,r);n=Array.isArray(t)?t:String(t).split(/\r?\n/);var a=1*this.internal.scaleFactor*e/s;i.textIndent=r.textIndent?1*r.textIndent*this.internal.scaleFactor/s:0,i.lineIndent=r.lineIndent;var o,l,c=[];for(o=0,l=n.length;o<l;o++)c=c.concat(xN.apply(this,[n[o],a,i]));return c},function(t){t.__fontmetrics__=t.__fontmetrics__||{};for(var e="klmnopqrstuvwxyz",r={},n={},s=0;s<e.length;s++)r[e[s]]="0123456789abcdef"[s],n["0123456789abcdef"[s]]=e[s];var i=function(f){return"0x"+parseInt(f,10).toString(16)},a=t.__fontmetrics__.compress=function(f){var p,m,b,B,_=["{"];for(var w in f){if(p=f[w],isNaN(parseInt(w,10))?m="'"+w+"'":(w=parseInt(w,10),m=(m=i(w).slice(2)).slice(0,-1)+n[m.slice(-1)]),typeof p=="number")p<0?(b=i(p).slice(3),B="-"):(b=i(p).slice(2),B=""),b=B+b.slice(0,-1)+n[b.slice(-1)];else{if(Nr(p)!=="object")throw new Error("Don't know what to do with value type "+Nr(p)+".");b=a(p)}_.push(m+b)}return _.push("}"),_.join("")},o=t.__fontmetrics__.uncompress=function(f){if(typeof f!="string")throw new Error("Invalid argument passed to uncompress.");for(var p,m,b,B,_={},w=1,y=_,S=[],O="",R="",M=f.length-1,I=1;I<M;I+=1)(B=f[I])=="'"?p?(b=p.join(""),p=void 0):p=[]:p?p.push(B):B=="{"?(S.push([y,b]),y={},b=void 0):B=="}"?((m=S.pop())[0][m[1]]=y,b=void 0,y=m[0]):B=="-"?w=-1:b===void 0?r.hasOwnProperty(B)?(O+=r[B],b=parseInt(O,16)*w,w=1,O=""):O+=B:r.hasOwnProperty(B)?(R+=r[B],y[b]=parseInt(R,16)*w,w=1,b=void 0,R=""):R+=B;return _},l={codePages:["WinAnsiEncoding"],WinAnsiEncoding:o("{19m8n201n9q201o9r201s9l201t9m201u8m201w9n201x9o201y8o202k8q202l8r202m9p202q8p20aw8k203k8t203t8v203u9v2cq8s212m9t15m8w15n9w2dw9s16k8u16l9u17s9z17x8y17y9y}")},c={Unicode:{Courier:l,"Courier-Bold":l,"Courier-BoldOblique":l,"Courier-Oblique":l,Helvetica:l,"Helvetica-Bold":l,"Helvetica-BoldOblique":l,"Helvetica-Oblique":l,"Times-Roman":l,"Times-Bold":l,"Times-BoldItalic":l,"Times-Italic":l}},u={Unicode:{"Courier-Oblique":o("{'widths'{k3w'fof'6o}'kerning'{'fof'-6o}}"),"Times-BoldItalic":o("{'widths'{k3o2q4ycx2r201n3m201o6o201s2l201t2l201u2l201w3m201x3m201y3m2k1t2l2r202m2n2n3m2o3m2p5n202q6o2r1w2s2l2t2l2u3m2v3t2w1t2x2l2y1t2z1w3k3m3l3m3m3m3n3m3o3m3p3m3q3m3r3m3s3m203t2l203u2l3v2l3w3t3x3t3y3t3z3m4k5n4l4m4m4m4n4m4o4s4p4m4q4m4r4s4s4y4t2r4u3m4v4m4w3x4x5t4y4s4z4s5k3x5l4s5m4m5n3r5o3x5p4s5q4m5r5t5s4m5t3x5u3x5v2l5w1w5x2l5y3t5z3m6k2l6l3m6m3m6n2w6o3m6p2w6q2l6r3m6s3r6t1w6u1w6v3m6w1w6x4y6y3r6z3m7k3m7l3m7m2r7n2r7o1w7p3r7q2w7r4m7s3m7t2w7u2r7v2n7w1q7x2n7y3t202l3mcl4mal2ram3man3mao3map3mar3mas2lat4uau1uav3maw3way4uaz2lbk2sbl3t'fof'6obo2lbp3tbq3mbr1tbs2lbu1ybv3mbz3mck4m202k3mcm4mcn4mco4mcp4mcq5ycr4mcs4mct4mcu4mcv4mcw2r2m3rcy2rcz2rdl4sdm4sdn4sdo4sdp4sdq4sds4sdt4sdu4sdv4sdw4sdz3mek3mel3mem3men3meo3mep3meq4ser2wes2wet2weu2wev2wew1wex1wey1wez1wfl3rfm3mfn3mfo3mfp3mfq3mfr3tfs3mft3rfu3rfv3rfw3rfz2w203k6o212m6o2dw2l2cq2l3t3m3u2l17s3x19m3m}'kerning'{cl{4qu5kt5qt5rs17ss5ts}201s{201ss}201t{cks4lscmscnscoscpscls2wu2yu201ts}201x{2wu2yu}2k{201ts}2w{4qx5kx5ou5qx5rs17su5tu}2x{17su5tu5ou}2y{4qx5kx5ou5qx5rs17ss5ts}'fof'-6ofn{17sw5tw5ou5qw5rs}7t{cksclscmscnscoscps4ls}3u{17su5tu5os5qs}3v{17su5tu5os5qs}7p{17su5tu}ck{4qu5kt5qt5rs17ss5ts}4l{4qu5kt5qt5rs17ss5ts}cm{4qu5kt5qt5rs17ss5ts}cn{4qu5kt5qt5rs17ss5ts}co{4qu5kt5qt5rs17ss5ts}cp{4qu5kt5qt5rs17ss5ts}6l{4qu5ou5qw5rt17su5tu}5q{ckuclucmucnucoucpu4lu}5r{ckuclucmucnucoucpu4lu}7q{cksclscmscnscoscps4ls}6p{4qu5ou5qw5rt17sw5tw}ek{4qu5ou5qw5rt17su5tu}el{4qu5ou5qw5rt17su5tu}em{4qu5ou5qw5rt17su5tu}en{4qu5ou5qw5rt17su5tu}eo{4qu5ou5qw5rt17su5tu}ep{4qu5ou5qw5rt17su5tu}es{17ss5ts5qs4qu}et{4qu5ou5qw5rt17sw5tw}eu{4qu5ou5qw5rt17ss5ts}ev{17ss5ts5qs4qu}6z{17sw5tw5ou5qw5rs}fm{17sw5tw5ou5qw5rs}7n{201ts}fo{17sw5tw5ou5qw5rs}fp{17sw5tw5ou5qw5rs}fq{17sw5tw5ou5qw5rs}7r{cksclscmscnscoscps4ls}fs{17sw5tw5ou5qw5rs}ft{17su5tu}fu{17su5tu}fv{17su5tu}fw{17su5tu}fz{cksclscmscnscoscps4ls}}}"),"Helvetica-Bold":o("{'widths'{k3s2q4scx1w201n3r201o6o201s1w201t1w201u1w201w3m201x3m201y3m2k1w2l2l202m2n2n3r2o3r2p5t202q6o2r1s2s2l2t2l2u2r2v3u2w1w2x2l2y1w2z1w3k3r3l3r3m3r3n3r3o3r3p3r3q3r3r3r3s3r203t2l203u2l3v2l3w3u3x3u3y3u3z3x4k6l4l4s4m4s4n4s4o4s4p4m4q3x4r4y4s4s4t1w4u3r4v4s4w3x4x5n4y4s4z4y5k4m5l4y5m4s5n4m5o3x5p4s5q4m5r5y5s4m5t4m5u3x5v2l5w1w5x2l5y3u5z3r6k2l6l3r6m3x6n3r6o3x6p3r6q2l6r3x6s3x6t1w6u1w6v3r6w1w6x5t6y3x6z3x7k3x7l3x7m2r7n3r7o2l7p3x7q3r7r4y7s3r7t3r7u3m7v2r7w1w7x2r7y3u202l3rcl4sal2lam3ran3rao3rap3rar3ras2lat4tau2pav3raw3uay4taz2lbk2sbl3u'fof'6obo2lbp3xbq3rbr1wbs2lbu2obv3rbz3xck4s202k3rcm4scn4sco4scp4scq6ocr4scs4mct4mcu4mcv4mcw1w2m2zcy1wcz1wdl4sdm4ydn4ydo4ydp4ydq4yds4ydt4sdu4sdv4sdw4sdz3xek3rel3rem3ren3reo3rep3req5ter3res3ret3reu3rev3rew1wex1wey1wez1wfl3xfm3xfn3xfo3xfp3xfq3xfr3ufs3xft3xfu3xfv3xfw3xfz3r203k6o212m6o2dw2l2cq2l3t3r3u2l17s4m19m3r}'kerning'{cl{4qs5ku5ot5qs17sv5tv}201t{2ww4wy2yw}201w{2ks}201x{2ww4wy2yw}2k{201ts201xs}2w{7qs4qu5kw5os5qw5rs17su5tu7tsfzs}2x{5ow5qs}2y{7qs4qu5kw5os5qw5rs17su5tu7tsfzs}'fof'-6o7p{17su5tu5ot}ck{4qs5ku5ot5qs17sv5tv}4l{4qs5ku5ot5qs17sv5tv}cm{4qs5ku5ot5qs17sv5tv}cn{4qs5ku5ot5qs17sv5tv}co{4qs5ku5ot5qs17sv5tv}cp{4qs5ku5ot5qs17sv5tv}6l{17st5tt5os}17s{2kwclvcmvcnvcovcpv4lv4wwckv}5o{2kucltcmtcntcotcpt4lt4wtckt}5q{2ksclscmscnscoscps4ls4wvcks}5r{2ks4ws}5t{2kwclvcmvcnvcovcpv4lv4wwckv}eo{17st5tt5os}fu{17su5tu5ot}6p{17ss5ts}ek{17st5tt5os}el{17st5tt5os}em{17st5tt5os}en{17st5tt5os}6o{201ts}ep{17st5tt5os}es{17ss5ts}et{17ss5ts}eu{17ss5ts}ev{17ss5ts}6z{17su5tu5os5qt}fm{17su5tu5os5qt}fn{17su5tu5os5qt}fo{17su5tu5os5qt}fp{17su5tu5os5qt}fq{17su5tu5os5qt}fs{17su5tu5os5qt}ft{17su5tu5ot}7m{5os}fv{17su5tu5ot}fw{17su5tu5ot}}}"),Courier:o("{'widths'{k3w'fof'6o}'kerning'{'fof'-6o}}"),"Courier-BoldOblique":o("{'widths'{k3w'fof'6o}'kerning'{'fof'-6o}}"),"Times-Bold":o("{'widths'{k3q2q5ncx2r201n3m201o6o201s2l201t2l201u2l201w3m201x3m201y3m2k1t2l2l202m2n2n3m2o3m2p6o202q6o2r1w2s2l2t2l2u3m2v3t2w1t2x2l2y1t2z1w3k3m3l3m3m3m3n3m3o3m3p3m3q3m3r3m3s3m203t2l203u2l3v2l3w3t3x3t3y3t3z3m4k5x4l4s4m4m4n4s4o4s4p4m4q3x4r4y4s4y4t2r4u3m4v4y4w4m4x5y4y4s4z4y5k3x5l4y5m4s5n3r5o4m5p4s5q4s5r6o5s4s5t4s5u4m5v2l5w1w5x2l5y3u5z3m6k2l6l3m6m3r6n2w6o3r6p2w6q2l6r3m6s3r6t1w6u2l6v3r6w1w6x5n6y3r6z3m7k3r7l3r7m2w7n2r7o2l7p3r7q3m7r4s7s3m7t3m7u2w7v2r7w1q7x2r7y3o202l3mcl4sal2lam3man3mao3map3mar3mas2lat4uau1yav3maw3tay4uaz2lbk2sbl3t'fof'6obo2lbp3rbr1tbs2lbu2lbv3mbz3mck4s202k3mcm4scn4sco4scp4scq6ocr4scs4mct4mcu4mcv4mcw2r2m3rcy2rcz2rdl4sdm4ydn4ydo4ydp4ydq4yds4ydt4sdu4sdv4sdw4sdz3rek3mel3mem3men3meo3mep3meq4ser2wes2wet2weu2wev2wew1wex1wey1wez1wfl3rfm3mfn3mfo3mfp3mfq3mfr3tfs3mft3rfu3rfv3rfw3rfz3m203k6o212m6o2dw2l2cq2l3t3m3u2l17s4s19m3m}'kerning'{cl{4qt5ks5ot5qy5rw17sv5tv}201t{cks4lscmscnscoscpscls4wv}2k{201ts}2w{4qu5ku7mu5os5qx5ru17su5tu}2x{17su5tu5ou5qs}2y{4qv5kv7mu5ot5qz5ru17su5tu}'fof'-6o7t{cksclscmscnscoscps4ls}3u{17su5tu5os5qu}3v{17su5tu5os5qu}fu{17su5tu5ou5qu}7p{17su5tu5ou5qu}ck{4qt5ks5ot5qy5rw17sv5tv}4l{4qt5ks5ot5qy5rw17sv5tv}cm{4qt5ks5ot5qy5rw17sv5tv}cn{4qt5ks5ot5qy5rw17sv5tv}co{4qt5ks5ot5qy5rw17sv5tv}cp{4qt5ks5ot5qy5rw17sv5tv}6l{17st5tt5ou5qu}17s{ckuclucmucnucoucpu4lu4wu}5o{ckuclucmucnucoucpu4lu4wu}5q{ckzclzcmzcnzcozcpz4lz4wu}5r{ckxclxcmxcnxcoxcpx4lx4wu}5t{ckuclucmucnucoucpu4lu4wu}7q{ckuclucmucnucoucpu4lu}6p{17sw5tw5ou5qu}ek{17st5tt5qu}el{17st5tt5ou5qu}em{17st5tt5qu}en{17st5tt5qu}eo{17st5tt5qu}ep{17st5tt5ou5qu}es{17ss5ts5qu}et{17sw5tw5ou5qu}eu{17sw5tw5ou5qu}ev{17ss5ts5qu}6z{17sw5tw5ou5qu5rs}fm{17sw5tw5ou5qu5rs}fn{17sw5tw5ou5qu5rs}fo{17sw5tw5ou5qu5rs}fp{17sw5tw5ou5qu5rs}fq{17sw5tw5ou5qu5rs}7r{cktcltcmtcntcotcpt4lt5os}fs{17sw5tw5ou5qu5rs}ft{17su5tu5ou5qu}7m{5os}fv{17su5tu5ou5qu}fw{17su5tu5ou5qu}fz{cksclscmscnscoscps4ls}}}"),Symbol:o("{'widths'{k3uaw4r19m3m2k1t2l2l202m2y2n3m2p5n202q6o3k3m2s2l2t2l2v3r2w1t3m3m2y1t2z1wbk2sbl3r'fof'6o3n3m3o3m3p3m3q3m3r3m3s3m3t3m3u1w3v1w3w3r3x3r3y3r3z2wbp3t3l3m5v2l5x2l5z3m2q4yfr3r7v3k7w1o7x3k}'kerning'{'fof'-6o}}"),Helvetica:o("{'widths'{k3p2q4mcx1w201n3r201o6o201s1q201t1q201u1q201w2l201x2l201y2l2k1w2l1w202m2n2n3r2o3r2p5t202q6o2r1n2s2l2t2l2u2r2v3u2w1w2x2l2y1w2z1w3k3r3l3r3m3r3n3r3o3r3p3r3q3r3r3r3s3r203t2l203u2l3v1w3w3u3x3u3y3u3z3r4k6p4l4m4m4m4n4s4o4s4p4m4q3x4r4y4s4s4t1w4u3m4v4m4w3r4x5n4y4s4z4y5k4m5l4y5m4s5n4m5o3x5p4s5q4m5r5y5s4m5t4m5u3x5v1w5w1w5x1w5y2z5z3r6k2l6l3r6m3r6n3m6o3r6p3r6q1w6r3r6s3r6t1q6u1q6v3m6w1q6x5n6y3r6z3r7k3r7l3r7m2l7n3m7o1w7p3r7q3m7r4s7s3m7t3m7u3m7v2l7w1u7x2l7y3u202l3rcl4mal2lam3ran3rao3rap3rar3ras2lat4tau2pav3raw3uay4taz2lbk2sbl3u'fof'6obo2lbp3rbr1wbs2lbu2obv3rbz3xck4m202k3rcm4mcn4mco4mcp4mcq6ocr4scs4mct4mcu4mcv4mcw1w2m2ncy1wcz1wdl4sdm4ydn4ydo4ydp4ydq4yds4ydt4sdu4sdv4sdw4sdz3xek3rel3rem3ren3reo3rep3req5ter3mes3ret3reu3rev3rew1wex1wey1wez1wfl3rfm3rfn3rfo3rfp3rfq3rfr3ufs3xft3rfu3rfv3rfw3rfz3m203k6o212m6o2dw2l2cq2l3t3r3u1w17s4m19m3r}'kerning'{5q{4wv}cl{4qs5kw5ow5qs17sv5tv}201t{2wu4w1k2yu}201x{2wu4wy2yu}17s{2ktclucmucnu4otcpu4lu4wycoucku}2w{7qs4qz5k1m17sy5ow5qx5rsfsu5ty7tufzu}2x{17sy5ty5oy5qs}2y{7qs4qz5k1m17sy5ow5qx5rsfsu5ty7tufzu}'fof'-6o7p{17sv5tv5ow}ck{4qs5kw5ow5qs17sv5tv}4l{4qs5kw5ow5qs17sv5tv}cm{4qs5kw5ow5qs17sv5tv}cn{4qs5kw5ow5qs17sv5tv}co{4qs5kw5ow5qs17sv5tv}cp{4qs5kw5ow5qs17sv5tv}6l{17sy5ty5ow}do{17st5tt}4z{17st5tt}7s{fst}dm{17st5tt}dn{17st5tt}5o{ckwclwcmwcnwcowcpw4lw4wv}dp{17st5tt}dq{17st5tt}7t{5ow}ds{17st5tt}5t{2ktclucmucnu4otcpu4lu4wycoucku}fu{17sv5tv5ow}6p{17sy5ty5ow5qs}ek{17sy5ty5ow}el{17sy5ty5ow}em{17sy5ty5ow}en{5ty}eo{17sy5ty5ow}ep{17sy5ty5ow}es{17sy5ty5qs}et{17sy5ty5ow5qs}eu{17sy5ty5ow5qs}ev{17sy5ty5ow5qs}6z{17sy5ty5ow5qs}fm{17sy5ty5ow5qs}fn{17sy5ty5ow5qs}fo{17sy5ty5ow5qs}fp{17sy5ty5qs}fq{17sy5ty5ow5qs}7r{5ow}fs{17sy5ty5ow5qs}ft{17sv5tv5ow}7m{5ow}fv{17sv5tv5ow}fw{17sv5tv5ow}}}"),"Helvetica-BoldOblique":o("{'widths'{k3s2q4scx1w201n3r201o6o201s1w201t1w201u1w201w3m201x3m201y3m2k1w2l2l202m2n2n3r2o3r2p5t202q6o2r1s2s2l2t2l2u2r2v3u2w1w2x2l2y1w2z1w3k3r3l3r3m3r3n3r3o3r3p3r3q3r3r3r3s3r203t2l203u2l3v2l3w3u3x3u3y3u3z3x4k6l4l4s4m4s4n4s4o4s4p4m4q3x4r4y4s4s4t1w4u3r4v4s4w3x4x5n4y4s4z4y5k4m5l4y5m4s5n4m5o3x5p4s5q4m5r5y5s4m5t4m5u3x5v2l5w1w5x2l5y3u5z3r6k2l6l3r6m3x6n3r6o3x6p3r6q2l6r3x6s3x6t1w6u1w6v3r6w1w6x5t6y3x6z3x7k3x7l3x7m2r7n3r7o2l7p3x7q3r7r4y7s3r7t3r7u3m7v2r7w1w7x2r7y3u202l3rcl4sal2lam3ran3rao3rap3rar3ras2lat4tau2pav3raw3uay4taz2lbk2sbl3u'fof'6obo2lbp3xbq3rbr1wbs2lbu2obv3rbz3xck4s202k3rcm4scn4sco4scp4scq6ocr4scs4mct4mcu4mcv4mcw1w2m2zcy1wcz1wdl4sdm4ydn4ydo4ydp4ydq4yds4ydt4sdu4sdv4sdw4sdz3xek3rel3rem3ren3reo3rep3req5ter3res3ret3reu3rev3rew1wex1wey1wez1wfl3xfm3xfn3xfo3xfp3xfq3xfr3ufs3xft3xfu3xfv3xfw3xfz3r203k6o212m6o2dw2l2cq2l3t3r3u2l17s4m19m3r}'kerning'{cl{4qs5ku5ot5qs17sv5tv}201t{2ww4wy2yw}201w{2ks}201x{2ww4wy2yw}2k{201ts201xs}2w{7qs4qu5kw5os5qw5rs17su5tu7tsfzs}2x{5ow5qs}2y{7qs4qu5kw5os5qw5rs17su5tu7tsfzs}'fof'-6o7p{17su5tu5ot}ck{4qs5ku5ot5qs17sv5tv}4l{4qs5ku5ot5qs17sv5tv}cm{4qs5ku5ot5qs17sv5tv}cn{4qs5ku5ot5qs17sv5tv}co{4qs5ku5ot5qs17sv5tv}cp{4qs5ku5ot5qs17sv5tv}6l{17st5tt5os}17s{2kwclvcmvcnvcovcpv4lv4wwckv}5o{2kucltcmtcntcotcpt4lt4wtckt}5q{2ksclscmscnscoscps4ls4wvcks}5r{2ks4ws}5t{2kwclvcmvcnvcovcpv4lv4wwckv}eo{17st5tt5os}fu{17su5tu5ot}6p{17ss5ts}ek{17st5tt5os}el{17st5tt5os}em{17st5tt5os}en{17st5tt5os}6o{201ts}ep{17st5tt5os}es{17ss5ts}et{17ss5ts}eu{17ss5ts}ev{17ss5ts}6z{17su5tu5os5qt}fm{17su5tu5os5qt}fn{17su5tu5os5qt}fo{17su5tu5os5qt}fp{17su5tu5os5qt}fq{17su5tu5os5qt}fs{17su5tu5os5qt}ft{17su5tu5ot}7m{5os}fv{17su5tu5ot}fw{17su5tu5ot}}}"),ZapfDingbats:o("{'widths'{k4u2k1w'fof'6o}'kerning'{'fof'-6o}}"),"Courier-Bold":o("{'widths'{k3w'fof'6o}'kerning'{'fof'-6o}}"),"Times-Italic":o("{'widths'{k3n2q4ycx2l201n3m201o5t201s2l201t2l201u2l201w3r201x3r201y3r2k1t2l2l202m2n2n3m2o3m2p5n202q5t2r1p2s2l2t2l2u3m2v4n2w1t2x2l2y1t2z1w3k3m3l3m3m3m3n3m3o3m3p3m3q3m3r3m3s3m203t2l203u2l3v2l3w4n3x4n3y4n3z3m4k5w4l3x4m3x4n4m4o4s4p3x4q3x4r4s4s4s4t2l4u2w4v4m4w3r4x5n4y4m4z4s5k3x5l4s5m3x5n3m5o3r5p4s5q3x5r5n5s3x5t3r5u3r5v2r5w1w5x2r5y2u5z3m6k2l6l3m6m3m6n2w6o3m6p2w6q1w6r3m6s3m6t1w6u1w6v2w6w1w6x4s6y3m6z3m7k3m7l3m7m2r7n2r7o1w7p3m7q2w7r4m7s2w7t2w7u2r7v2s7w1v7x2s7y3q202l3mcl3xal2ram3man3mao3map3mar3mas2lat4wau1vav3maw4nay4waz2lbk2sbl4n'fof'6obo2lbp3mbq3obr1tbs2lbu1zbv3mbz3mck3x202k3mcm3xcn3xco3xcp3xcq5tcr4mcs3xct3xcu3xcv3xcw2l2m2ucy2lcz2ldl4mdm4sdn4sdo4sdp4sdq4sds4sdt4sdu4sdv4sdw4sdz3mek3mel3mem3men3meo3mep3meq4mer2wes2wet2weu2wev2wew1wex1wey1wez1wfl3mfm3mfn3mfo3mfp3mfq3mfr4nfs3mft3mfu3mfv3mfw3mfz2w203k6o212m6m2dw2l2cq2l3t3m3u2l17s3r19m3m}'kerning'{cl{5kt4qw}201s{201sw}201t{201tw2wy2yy6q-t}201x{2wy2yy}2k{201tw}2w{7qs4qy7rs5ky7mw5os5qx5ru17su5tu}2x{17ss5ts5os}2y{7qs4qy7rs5ky7mw5os5qx5ru17su5tu}'fof'-6o6t{17ss5ts5qs}7t{5os}3v{5qs}7p{17su5tu5qs}ck{5kt4qw}4l{5kt4qw}cm{5kt4qw}cn{5kt4qw}co{5kt4qw}cp{5kt4qw}6l{4qs5ks5ou5qw5ru17su5tu}17s{2ks}5q{ckvclvcmvcnvcovcpv4lv}5r{ckuclucmucnucoucpu4lu}5t{2ks}6p{4qs5ks5ou5qw5ru17su5tu}ek{4qs5ks5ou5qw5ru17su5tu}el{4qs5ks5ou5qw5ru17su5tu}em{4qs5ks5ou5qw5ru17su5tu}en{4qs5ks5ou5qw5ru17su5tu}eo{4qs5ks5ou5qw5ru17su5tu}ep{4qs5ks5ou5qw5ru17su5tu}es{5ks5qs4qs}et{4qs5ks5ou5qw5ru17su5tu}eu{4qs5ks5qw5ru17su5tu}ev{5ks5qs4qs}ex{17ss5ts5qs}6z{4qv5ks5ou5qw5ru17su5tu}fm{4qv5ks5ou5qw5ru17su5tu}fn{4qv5ks5ou5qw5ru17su5tu}fo{4qv5ks5ou5qw5ru17su5tu}fp{4qv5ks5ou5qw5ru17su5tu}fq{4qv5ks5ou5qw5ru17su5tu}7r{5os}fs{4qv5ks5ou5qw5ru17su5tu}ft{17su5tu5qs}fu{17su5tu5qs}fv{17su5tu5qs}fw{17su5tu5qs}}}"),"Times-Roman":o("{'widths'{k3n2q4ycx2l201n3m201o6o201s2l201t2l201u2l201w2w201x2w201y2w2k1t2l2l202m2n2n3m2o3m2p5n202q6o2r1m2s2l2t2l2u3m2v3s2w1t2x2l2y1t2z1w3k3m3l3m3m3m3n3m3o3m3p3m3q3m3r3m3s3m203t2l203u2l3v1w3w3s3x3s3y3s3z2w4k5w4l4s4m4m4n4m4o4s4p3x4q3r4r4s4s4s4t2l4u2r4v4s4w3x4x5t4y4s4z4s5k3r5l4s5m4m5n3r5o3x5p4s5q4s5r5y5s4s5t4s5u3x5v2l5w1w5x2l5y2z5z3m6k2l6l2w6m3m6n2w6o3m6p2w6q2l6r3m6s3m6t1w6u1w6v3m6w1w6x4y6y3m6z3m7k3m7l3m7m2l7n2r7o1w7p3m7q3m7r4s7s3m7t3m7u2w7v3k7w1o7x3k7y3q202l3mcl4sal2lam3man3mao3map3mar3mas2lat4wau1vav3maw3say4waz2lbk2sbl3s'fof'6obo2lbp3mbq2xbr1tbs2lbu1zbv3mbz2wck4s202k3mcm4scn4sco4scp4scq5tcr4mcs3xct3xcu3xcv3xcw2l2m2tcy2lcz2ldl4sdm4sdn4sdo4sdp4sdq4sds4sdt4sdu4sdv4sdw4sdz3mek2wel2wem2wen2weo2wep2weq4mer2wes2wet2weu2wev2wew1wex1wey1wez1wfl3mfm3mfn3mfo3mfp3mfq3mfr3sfs3mft3mfu3mfv3mfw3mfz3m203k6o212m6m2dw2l2cq2l3t3m3u1w17s4s19m3m}'kerning'{cl{4qs5ku17sw5ou5qy5rw201ss5tw201ws}201s{201ss}201t{ckw4lwcmwcnwcowcpwclw4wu201ts}2k{201ts}2w{4qs5kw5os5qx5ru17sx5tx}2x{17sw5tw5ou5qu}2y{4qs5kw5os5qx5ru17sx5tx}'fof'-6o7t{ckuclucmucnucoucpu4lu5os5rs}3u{17su5tu5qs}3v{17su5tu5qs}7p{17sw5tw5qs}ck{4qs5ku17sw5ou5qy5rw201ss5tw201ws}4l{4qs5ku17sw5ou5qy5rw201ss5tw201ws}cm{4qs5ku17sw5ou5qy5rw201ss5tw201ws}cn{4qs5ku17sw5ou5qy5rw201ss5tw201ws}co{4qs5ku17sw5ou5qy5rw201ss5tw201ws}cp{4qs5ku17sw5ou5qy5rw201ss5tw201ws}6l{17su5tu5os5qw5rs}17s{2ktclvcmvcnvcovcpv4lv4wuckv}5o{ckwclwcmwcnwcowcpw4lw4wu}5q{ckyclycmycnycoycpy4ly4wu5ms}5r{cktcltcmtcntcotcpt4lt4ws}5t{2ktclvcmvcnvcovcpv4lv4wuckv}7q{cksclscmscnscoscps4ls}6p{17su5tu5qw5rs}ek{5qs5rs}el{17su5tu5os5qw5rs}em{17su5tu5os5qs5rs}en{17su5qs5rs}eo{5qs5rs}ep{17su5tu5os5qw5rs}es{5qs}et{17su5tu5qw5rs}eu{17su5tu5qs5rs}ev{5qs}6z{17sv5tv5os5qx5rs}fm{5os5qt5rs}fn{17sv5tv5os5qx5rs}fo{17sv5tv5os5qx5rs}fp{5os5qt5rs}fq{5os5qt5rs}7r{ckuclucmucnucoucpu4lu5os}fs{17sv5tv5os5qx5rs}ft{17ss5ts5qs}fu{17sw5tw5qs}fv{17sw5tw5qs}fw{17ss5ts5qs}fz{ckuclucmucnucoucpu4lu5os5rs}}}"),"Helvetica-Oblique":o("{'widths'{k3p2q4mcx1w201n3r201o6o201s1q201t1q201u1q201w2l201x2l201y2l2k1w2l1w202m2n2n3r2o3r2p5t202q6o2r1n2s2l2t2l2u2r2v3u2w1w2x2l2y1w2z1w3k3r3l3r3m3r3n3r3o3r3p3r3q3r3r3r3s3r203t2l203u2l3v1w3w3u3x3u3y3u3z3r4k6p4l4m4m4m4n4s4o4s4p4m4q3x4r4y4s4s4t1w4u3m4v4m4w3r4x5n4y4s4z4y5k4m5l4y5m4s5n4m5o3x5p4s5q4m5r5y5s4m5t4m5u3x5v1w5w1w5x1w5y2z5z3r6k2l6l3r6m3r6n3m6o3r6p3r6q1w6r3r6s3r6t1q6u1q6v3m6w1q6x5n6y3r6z3r7k3r7l3r7m2l7n3m7o1w7p3r7q3m7r4s7s3m7t3m7u3m7v2l7w1u7x2l7y3u202l3rcl4mal2lam3ran3rao3rap3rar3ras2lat4tau2pav3raw3uay4taz2lbk2sbl3u'fof'6obo2lbp3rbr1wbs2lbu2obv3rbz3xck4m202k3rcm4mcn4mco4mcp4mcq6ocr4scs4mct4mcu4mcv4mcw1w2m2ncy1wcz1wdl4sdm4ydn4ydo4ydp4ydq4yds4ydt4sdu4sdv4sdw4sdz3xek3rel3rem3ren3reo3rep3req5ter3mes3ret3reu3rev3rew1wex1wey1wez1wfl3rfm3rfn3rfo3rfp3rfq3rfr3ufs3xft3rfu3rfv3rfw3rfz3m203k6o212m6o2dw2l2cq2l3t3r3u1w17s4m19m3r}'kerning'{5q{4wv}cl{4qs5kw5ow5qs17sv5tv}201t{2wu4w1k2yu}201x{2wu4wy2yu}17s{2ktclucmucnu4otcpu4lu4wycoucku}2w{7qs4qz5k1m17sy5ow5qx5rsfsu5ty7tufzu}2x{17sy5ty5oy5qs}2y{7qs4qz5k1m17sy5ow5qx5rsfsu5ty7tufzu}'fof'-6o7p{17sv5tv5ow}ck{4qs5kw5ow5qs17sv5tv}4l{4qs5kw5ow5qs17sv5tv}cm{4qs5kw5ow5qs17sv5tv}cn{4qs5kw5ow5qs17sv5tv}co{4qs5kw5ow5qs17sv5tv}cp{4qs5kw5ow5qs17sv5tv}6l{17sy5ty5ow}do{17st5tt}4z{17st5tt}7s{fst}dm{17st5tt}dn{17st5tt}5o{ckwclwcmwcnwcowcpw4lw4wv}dp{17st5tt}dq{17st5tt}7t{5ow}ds{17st5tt}5t{2ktclucmucnu4otcpu4lu4wycoucku}fu{17sv5tv5ow}6p{17sy5ty5ow5qs}ek{17sy5ty5ow}el{17sy5ty5ow}em{17sy5ty5ow}en{5ty}eo{17sy5ty5ow}ep{17sy5ty5ow}es{17sy5ty5qs}et{17sy5ty5ow5qs}eu{17sy5ty5ow5qs}ev{17sy5ty5ow5qs}6z{17sy5ty5ow5qs}fm{17sy5ty5ow5qs}fn{17sy5ty5ow5qs}fo{17sy5ty5ow5qs}fp{17sy5ty5qs}fq{17sy5ty5ow5qs}7r{5ow}fs{17sy5ty5ow5qs}ft{17sv5tv5ow}7m{5ow}fv{17sv5tv5ow}fw{17sv5tv5ow}}}")}};t.events.push(["addFont",function(f){var p=f.font,m=u.Unicode[p.postScriptName];m&&(p.metadata.Unicode={},p.metadata.Unicode.widths=m.widths,p.metadata.Unicode.kerning=m.kerning);var b=c.Unicode[p.postScriptName];b&&(p.metadata.Unicode.encoding=b,p.encoding=b.codePages[0])}])}(kt.API),function(t){var e=function(r){for(var n=r.length,s=new Uint8Array(n),i=0;i<n;i++)s[i]=r.charCodeAt(i);return s};t.API.events.push(["addFont",function(r){var n=void 0,s=r.font,i=r.instance;if(!s.isStandardFont){if(i===void 0)throw new Error("Font does not exist in vFS, import fonts or remove declaration doc.addFont('"+s.postScriptName+"').");if(typeof(n=i.existsFileInVFS(s.postScriptName)===!1?i.loadFile(s.postScriptName):i.getFileFromVFS(s.postScriptName))!="string")throw new Error("Font is not stored as string-data in vFS, import fonts or remove declaration doc.addFont('"+s.postScriptName+"').");(function(a,o){o=/^\x00\x01\x00\x00/.test(o)?e(o):e(Tf(o)),a.metadata=t.API.TTFFont.open(o),a.metadata.Unicode=a.metadata.Unicode||{encoding:{},kerning:{},widths:[]},a.metadata.glyIdsUsed=[0]})(s,n)}}])}(kt),function(t){function e(){return(Ot.canvg?Promise.resolve(Ot.canvg):Qo(()=>import("./index.es-BPzDsmy3.js"),[])).catch(function(r){return Promise.reject(new Error("Could not load canvg: "+r))}).then(function(r){return r.default?r.default:r})}kt.API.addSvgAsImage=function(r,n,s,i,a,o,l,c){if(isNaN(n)||isNaN(s))throw Lr.error("jsPDF.addSvgAsImage: Invalid coordinates",arguments),new Error("Invalid coordinates passed to jsPDF.addSvgAsImage");if(isNaN(i)||isNaN(a))throw Lr.error("jsPDF.addSvgAsImage: Invalid measurements",arguments),new Error("Invalid measurements (width and/or height) passed to jsPDF.addSvgAsImage");var u=document.createElement("canvas");u.width=i,u.height=a;var f=u.getContext("2d");f.fillStyle="#fff",f.fillRect(0,0,u.width,u.height);var p={ignoreMouse:!0,ignoreAnimation:!0,ignoreDimensions:!0},m=this;return e().then(function(b){return b.fromString(f,r,p)},function(){return Promise.reject(new Error("Could not load canvg."))}).then(function(b){return b.render(p)}).then(function(){m.addImage(u.toDataURL("image/jpeg",1),n,s,i,a,l,c)})}}(),kt.API.putTotalPages=function(t){var e,r=0;parseInt(this.internal.getFont().id.substr(1),10)<15?(e=new RegExp(t,"g"),r=this.internal.getNumberOfPages()):(e=new RegExp(this.pdfEscape16(t,this.internal.getFont()),"g"),r=this.pdfEscape16(this.internal.getNumberOfPages()+"",this.internal.getFont()));for(var n=1;n<=this.internal.getNumberOfPages();n++)for(var s=0;s<this.internal.pages[n].length;s++)this.internal.pages[n][s]=this.internal.pages[n][s].replace(e,r);return this},kt.API.viewerPreferences=function(t,e){var r;t=t||{},e=e||!1;var n,s,i,a={HideToolbar:{defaultValue:!1,value:!1,type:"boolean",explicitSet:!1,valueSet:[!0,!1],pdfVersion:1.3},HideMenubar:{defaultValue:!1,value:!1,type:"boolean",explicitSet:!1,valueSet:[!0,!1],pdfVersion:1.3},HideWindowUI:{defaultValue:!1,value:!1,type:"boolean",explicitSet:!1,valueSet:[!0,!1],pdfVersion:1.3},FitWindow:{defaultValue:!1,value:!1,type:"boolean",explicitSet:!1,valueSet:[!0,!1],pdfVersion:1.3},CenterWindow:{defaultValue:!1,value:!1,type:"boolean",explicitSet:!1,valueSet:[!0,!1],pdfVersion:1.3},DisplayDocTitle:{defaultValue:!1,value:!1,type:"boolean",explicitSet:!1,valueSet:[!0,!1],pdfVersion:1.4},NonFullScreenPageMode:{defaultValue:"UseNone",value:"UseNone",type:"name",explicitSet:!1,valueSet:["UseNone","UseOutlines","UseThumbs","UseOC"],pdfVersion:1.3},Direction:{defaultValue:"L2R",value:"L2R",type:"name",explicitSet:!1,valueSet:["L2R","R2L"],pdfVersion:1.3},ViewArea:{defaultValue:"CropBox",value:"CropBox",type:"name",explicitSet:!1,valueSet:["MediaBox","CropBox","TrimBox","BleedBox","ArtBox"],pdfVersion:1.4},ViewClip:{defaultValue:"CropBox",value:"CropBox",type:"name",explicitSet:!1,valueSet:["MediaBox","CropBox","TrimBox","BleedBox","ArtBox"],pdfVersion:1.4},PrintArea:{defaultValue:"CropBox",value:"CropBox",type:"name",explicitSet:!1,valueSet:["MediaBox","CropBox","TrimBox","BleedBox","ArtBox"],pdfVersion:1.4},PrintClip:{defaultValue:"CropBox",value:"CropBox",type:"name",explicitSet:!1,valueSet:["MediaBox","CropBox","TrimBox","BleedBox","ArtBox"],pdfVersion:1.4},PrintScaling:{defaultValue:"AppDefault",value:"AppDefault",type:"name",explicitSet:!1,valueSet:["AppDefault","None"],pdfVersion:1.6},Duplex:{defaultValue:"",value:"none",type:"name",explicitSet:!1,valueSet:["Simplex","DuplexFlipShortEdge","DuplexFlipLongEdge","none"],pdfVersion:1.7},PickTrayByPDFSize:{defaultValue:!1,value:!1,type:"boolean",explicitSet:!1,valueSet:[!0,!1],pdfVersion:1.7},PrintPageRange:{defaultValue:"",value:"",type:"array",explicitSet:!1,valueSet:null,pdfVersion:1.7},NumCopies:{defaultValue:1,value:1,type:"integer",explicitSet:!1,valueSet:null,pdfVersion:1.7}},o=Object.keys(a),l=[],c=0,u=0,f=0;function p(b,B){var _,w=!1;for(_=0;_<b.length;_+=1)b[_]===B&&(w=!0);return w}if(this.internal.viewerpreferences===void 0&&(this.internal.viewerpreferences={},this.internal.viewerpreferences.configuration=JSON.parse(JSON.stringify(a)),this.internal.viewerpreferences.isSubscribed=!1),r=this.internal.viewerpreferences.configuration,t==="reset"||e===!0){var m=o.length;for(f=0;f<m;f+=1)r[o[f]].value=r[o[f]].defaultValue,r[o[f]].explicitSet=!1}if(Nr(t)==="object"){for(s in t)if(i=t[s],p(o,s)&&i!==void 0){if(r[s].type==="boolean"&&typeof i=="boolean")r[s].value=i;else if(r[s].type==="name"&&p(r[s].valueSet,i))r[s].value=i;else if(r[s].type==="integer"&&Number.isInteger(i))r[s].value=i;else if(r[s].type==="array"){for(c=0;c<i.length;c+=1)if(n=!0,i[c].length===1&&typeof i[c][0]=="number")l.push(String(i[c]-1));else if(i[c].length>1){for(u=0;u<i[c].length;u+=1)typeof i[c][u]!="number"&&(n=!1);n===!0&&l.push([i[c][0]-1,i[c][1]-1].join(" "))}r[s].value="["+l.join(" ")+"]"}else r[s].value=r[s].defaultValue;r[s].explicitSet=!0}}return this.internal.viewerpreferences.isSubscribed===!1&&(this.internal.events.subscribe("putCatalog",function(){var b,B=[];for(b in r)r[b].explicitSet===!0&&(r[b].type==="name"?B.push("/"+b+" /"+r[b].value):B.push("/"+b+" "+r[b].value));B.length!==0&&this.internal.write(`/ViewerPreferences
<<
`+B.join(`
`)+`
>>`)}),this.internal.viewerpreferences.isSubscribed=!0),this.internal.viewerpreferences.configuration=r,this},function(t){var e=function(){var n='<rdf:RDF xmlns:rdf="http://www.w3.org/1999/02/22-rdf-syntax-ns#"><rdf:Description rdf:about="" xmlns:jspdf="'+this.internal.__metadata__.namespaceuri+'"><jspdf:metadata>',s=unescape(encodeURIComponent('<x:xmpmeta xmlns:x="adobe:ns:meta/">')),i=unescape(encodeURIComponent(n)),a=unescape(encodeURIComponent(this.internal.__metadata__.metadata)),o=unescape(encodeURIComponent("</jspdf:metadata></rdf:Description></rdf:RDF>")),l=unescape(encodeURIComponent("</x:xmpmeta>")),c=i.length+a.length+o.length+s.length+l.length;this.internal.__metadata__.metadata_object_number=this.internal.newObject(),this.internal.write("<< /Type /Metadata /Subtype /XML /Length "+c+" >>"),this.internal.write("stream"),this.internal.write(s+i+a+o+l),this.internal.write("endstream"),this.internal.write("endobj")},r=function(){this.internal.__metadata__.metadata_object_number&&this.internal.write("/Metadata "+this.internal.__metadata__.metadata_object_number+" 0 R")};t.addMetadata=function(n,s){return this.internal.__metadata__===void 0&&(this.internal.__metadata__={metadata:n,namespaceuri:s||"http://jspdf.default.namespaceuri/"},this.internal.events.subscribe("putCatalog",r),this.internal.events.subscribe("postPutResources",e)),this}}(kt.API),function(t){var e=t.API,r=e.pdfEscape16=function(i,a){for(var o,l=a.metadata.Unicode.widths,c=["","0","00","000","0000"],u=[""],f=0,p=i.length;f<p;++f){if(o=a.metadata.characterToGlyph(i.charCodeAt(f)),a.metadata.glyIdsUsed.push(o),a.metadata.toUnicode[o]=i.charCodeAt(f),l.indexOf(o)==-1&&(l.push(o),l.push([parseInt(a.metadata.widthOfGlyph(o),10)])),o=="0")return u.join("");o=o.toString(16),u.push(c[4-o.length],o)}return u.join("")},n=function(i){var a,o,l,c,u,f,p;for(u=`/CIDInit /ProcSet findresource begin
12 dict begin
begincmap
/CIDSystemInfo <<
  /Registry (Adobe)
  /Ordering (UCS)
  /Supplement 0
>> def
/CMapName /Adobe-Identity-UCS def
/CMapType 2 def
1 begincodespacerange
<0000><ffff>
endcodespacerange`,l=[],f=0,p=(o=Object.keys(i).sort(function(m,b){return m-b})).length;f<p;f++)a=o[f],l.length>=100&&(u+=`
`+l.length+` beginbfchar
`+l.join(`
`)+`
endbfchar`,l=[]),i[a]!==void 0&&i[a]!==null&&typeof i[a].toString=="function"&&(c=("0000"+i[a].toString(16)).slice(-4),a=("0000"+(+a).toString(16)).slice(-4),l.push("<"+a+"><"+c+">"));return l.length&&(u+=`
`+l.length+` beginbfchar
`+l.join(`
`)+`
endbfchar
`),u+=`endcmap
CMapName currentdict /CMap defineresource pop
end
end`};e.events.push(["putFont",function(i){(function(a){var o=a.font,l=a.out,c=a.newObject,u=a.putStream;if(o.metadata instanceof t.API.TTFFont&&o.encoding==="Identity-H"){for(var f=o.metadata.Unicode.widths,p=o.metadata.subset.encode(o.metadata.glyIdsUsed,1),m="",b=0;b<p.length;b++)m+=String.fromCharCode(p[b]);var B=c();u({data:m,addLength1:!0,objectId:B}),l("endobj");var _=c();u({data:n(o.metadata.toUnicode),addLength1:!0,objectId:_}),l("endobj");var w=c();l("<<"),l("/Type /FontDescriptor"),l("/FontName /"+zu(o.fontName)),l("/FontFile2 "+B+" 0 R"),l("/FontBBox "+t.API.PDFObject.convert(o.metadata.bbox)),l("/Flags "+o.metadata.flags),l("/StemV "+o.metadata.stemV),l("/ItalicAngle "+o.metadata.italicAngle),l("/Ascent "+o.metadata.ascender),l("/Descent "+o.metadata.decender),l("/CapHeight "+o.metadata.capHeight),l(">>"),l("endobj");var y=c();l("<<"),l("/Type /Font"),l("/BaseFont /"+zu(o.fontName)),l("/FontDescriptor "+w+" 0 R"),l("/W "+t.API.PDFObject.convert(f)),l("/CIDToGIDMap /Identity"),l("/DW 1000"),l("/Subtype /CIDFontType2"),l("/CIDSystemInfo"),l("<<"),l("/Supplement 0"),l("/Registry (Adobe)"),l("/Ordering ("+o.encoding+")"),l(">>"),l(">>"),l("endobj"),o.objectNumber=c(),l("<<"),l("/Type /Font"),l("/Subtype /Type0"),l("/ToUnicode "+_+" 0 R"),l("/BaseFont /"+zu(o.fontName)),l("/Encoding /"+o.encoding),l("/DescendantFonts ["+y+" 0 R]"),l(">>"),l("endobj"),o.isAlreadyPutted=!0}})(i)}]),e.events.push(["putFont",function(i){(function(a){var o=a.font,l=a.out,c=a.newObject,u=a.putStream;if(o.metadata instanceof t.API.TTFFont&&o.encoding==="WinAnsiEncoding"){for(var f=o.metadata.rawData,p="",m=0;m<f.length;m++)p+=String.fromCharCode(f[m]);var b=c();u({data:p,addLength1:!0,objectId:b}),l("endobj");var B=c();u({data:n(o.metadata.toUnicode),addLength1:!0,objectId:B}),l("endobj");var _=c();l("<<"),l("/Descent "+o.metadata.decender),l("/CapHeight "+o.metadata.capHeight),l("/StemV "+o.metadata.stemV),l("/Type /FontDescriptor"),l("/FontFile2 "+b+" 0 R"),l("/Flags 96"),l("/FontBBox "+t.API.PDFObject.convert(o.metadata.bbox)),l("/FontName /"+zu(o.fontName)),l("/ItalicAngle "+o.metadata.italicAngle),l("/Ascent "+o.metadata.ascender),l(">>"),l("endobj"),o.objectNumber=c();for(var w=0;w<o.metadata.hmtx.widths.length;w++)o.metadata.hmtx.widths[w]=parseInt(o.metadata.hmtx.widths[w]*(1e3/o.metadata.head.unitsPerEm));l("<</Subtype/TrueType/Type/Font/ToUnicode "+B+" 0 R/BaseFont/"+zu(o.fontName)+"/FontDescriptor "+_+" 0 R/Encoding/"+o.encoding+" /FirstChar 29 /LastChar 255 /Widths "+t.API.PDFObject.convert(o.metadata.hmtx.widths)+">>"),l("endobj"),o.isAlreadyPutted=!0}})(i)}]);var s=function(i){var a,o=i.text||"",l=i.x,c=i.y,u=i.options||{},f=i.mutex||{},p=f.pdfEscape,m=f.activeFontKey,b=f.fonts,B=m,_="",w=0,y="",S=b[B].encoding;if(b[B].encoding!=="Identity-H")return{text:o,x:l,y:c,options:u,mutex:f};for(y=o,B=m,Array.isArray(o)&&(y=o[0]),w=0;w<y.length;w+=1)b[B].metadata.hasOwnProperty("cmap")&&(a=b[B].metadata.cmap.unicode.codeMap[y[w].charCodeAt(0)]),a||y[w].charCodeAt(0)<256&&b[B].metadata.hasOwnProperty("Unicode")?_+=y[w]:_+="";var O="";return parseInt(B.slice(1))<14||S==="WinAnsiEncoding"?O=p(_,B).split("").map(function(R){return R.charCodeAt(0).toString(16)}).join(""):S==="Identity-H"&&(O=r(_,b[B])),f.isHex=!0,{text:O,x:l,y:c,options:u,mutex:f}};e.events.push(["postProcessText",function(i){var a=i.text||"",o=[],l={text:a,x:i.x,y:i.y,options:i.options,mutex:i.mutex};if(Array.isArray(a)){var c=0;for(c=0;c<a.length;c+=1)Array.isArray(a[c])&&a[c].length===3?o.push([s(Object.assign({},l,{text:a[c][0]})).text,a[c][1],a[c][2]]):o.push(s(Object.assign({},l,{text:a[c]})).text);i.text=o}else i.text=s(Object.assign({},l,{text:a})).text}])}(kt),function(t){var e=function(){return this.internal.vFS===void 0&&(this.internal.vFS={}),!0};t.existsFileInVFS=function(r){return e.call(this),this.internal.vFS[r]!==void 0},t.addFileToVFS=function(r,n){return e.call(this),this.internal.vFS[r]=n,this},t.getFileFromVFS=function(r){return e.call(this),this.internal.vFS[r]!==void 0?this.internal.vFS[r]:null}}(kt.API),function(t){t.__bidiEngine__=t.prototype.__bidiEngine__=function(n){var s,i,a,o,l,c,u,f=e,p=[[0,3,0,1,0,0,0],[0,3,0,1,2,2,0],[0,3,0,17,2,0,1],[0,3,5,5,4,1,0],[0,3,21,21,4,0,1],[0,3,5,5,4,2,0]],m=[[2,0,1,1,0,1,0],[2,0,1,1,0,2,0],[2,0,2,1,3,2,0],[2,0,2,33,3,1,1]],b={L:0,R:1,EN:2,AN:3,N:4,B:5,S:6},B={0:0,5:1,6:2,7:3,32:4,251:5,254:6,255:7},_=["(",")","(","<",">","<","[","]","[","{","}","{","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","",""],w=new RegExp(/^([1-4|9]|1[0-9]|2[0-9]|3[0168]|4[04589]|5[012]|7[78]|159|16[0-9]|17[0-2]|21[569]|22[03489]|250)$/),y=!1,S=0;this.__bidiEngine__={};var O=function(N){var T=N.charCodeAt(),F=T>>8,ee=B[F];return ee!==void 0?f[256*ee+(255&T)]:F===252||F===253?"AL":w.test(F)?"L":F===8?"R":"N"},R=function(N){for(var T,F=0;F<N.length;F++){if((T=O(N.charAt(F)))==="L")return!1;if(T==="R")return!0}return!1},M=function(N,T,F,ee){var ce,re,de,W,ue=T[ee];switch(ue){case"L":case"R":y=!1;break;case"N":case"AN":break;case"EN":y&&(ue="AN");break;case"AL":y=!0,ue="R";break;case"WS":ue="N";break;case"CS":ee<1||ee+1>=T.length||(ce=F[ee-1])!=="EN"&&ce!=="AN"||(re=T[ee+1])!=="EN"&&re!=="AN"?ue="N":y&&(re="AN"),ue=re===ce?re:"N";break;case"ES":ue=(ce=ee>0?F[ee-1]:"B")==="EN"&&ee+1<T.length&&T[ee+1]==="EN"?"EN":"N";break;case"ET":if(ee>0&&F[ee-1]==="EN"){ue="EN";break}if(y){ue="N";break}for(de=ee+1,W=T.length;de<W&&T[de]==="ET";)de++;ue=de<W&&T[de]==="EN"?"EN":"N";break;case"NSM":if(a&&!o){for(W=T.length,de=ee+1;de<W&&T[de]==="NSM";)de++;if(de<W){var ae=N[ee],Ee=ae>=1425&&ae<=2303||ae===64286;if(ce=T[de],Ee&&(ce==="R"||ce==="AL")){ue="R";break}}}ue=ee<1||(ce=T[ee-1])==="B"?"N":F[ee-1];break;case"B":y=!1,s=!0,ue=S;break;case"S":i=!0,ue="N";break;case"LRE":case"RLE":case"LRO":case"RLO":case"PDF":y=!1;break;case"BN":ue="N"}return ue},I=function(N,T,F){var ee=N.split("");return F&&E(ee,F,{hiLevel:S}),ee.reverse(),T&&T.reverse(),ee.join("")},E=function(N,T,F){var ee,ce,re,de,W,ue=-1,ae=N.length,Ee=0,Q=[],k=S?m:p,z=[];for(y=!1,s=!1,i=!1,ce=0;ce<ae;ce++)z[ce]=O(N[ce]);for(re=0;re<ae;re++){if(W=Ee,Q[re]=M(N,z,Q,re),ee=240&(Ee=k[W][b[Q[re]]]),Ee&=15,T[re]=de=k[Ee][5],ee>0)if(ee===16){for(ce=ue;ce<re;ce++)T[ce]=1;ue=-1}else ue=-1;if(k[Ee][6])ue===-1&&(ue=re);else if(ue>-1){for(ce=ue;ce<re;ce++)T[ce]=de;ue=-1}z[re]==="B"&&(T[re]=0),F.hiLevel|=de}i&&function(te,$,ne){for(var X=0;X<ne;X++)if(te[X]==="S"){$[X]=S;for(var he=X-1;he>=0&&te[he]==="WS";he--)$[he]=S}}(z,T,ae)},L=function(N,T,F,ee,ce){if(!(ce.hiLevel<N)){if(N===1&&S===1&&!s)return T.reverse(),void(F&&F.reverse());for(var re,de,W,ue,ae=T.length,Ee=0;Ee<ae;){if(ee[Ee]>=N){for(W=Ee+1;W<ae&&ee[W]>=N;)W++;for(ue=Ee,de=W-1;ue<de;ue++,de--)re=T[ue],T[ue]=T[de],T[de]=re,F&&(re=F[ue],F[ue]=F[de],F[de]=re);Ee=W}Ee++}}},D=function(N,T,F){var ee=N.split(""),ce={hiLevel:S};return F||(F=[]),E(ee,F,ce),function(re,de,W){if(W.hiLevel!==0&&u)for(var ue,ae=0;ae<re.length;ae++)de[ae]===1&&(ue=_.indexOf(re[ae]))>=0&&(re[ae]=_[ue+1])}(ee,F,ce),L(2,ee,T,F,ce),L(1,ee,T,F,ce),ee.join("")};return this.__bidiEngine__.doBidiReorder=function(N,T,F){if(function(ce,re){if(re)for(var de=0;de<ce.length;de++)re[de]=de;o===void 0&&(o=R(ce)),c===void 0&&(c=R(ce))}(N,T),a||!l||c)if(a&&l&&o^c)S=o?1:0,N=I(N,T,F);else if(!a&&l&&c)S=o?1:0,N=D(N,T,F),N=I(N,T);else if(!a||o||l||c){if(a&&!l&&o^c)N=I(N,T),o?(S=0,N=D(N,T,F)):(S=1,N=D(N,T,F),N=I(N,T));else if(a&&o&&!l&&c)S=1,N=D(N,T,F),N=I(N,T);else if(!a&&!l&&o^c){var ee=u;o?(S=1,N=D(N,T,F),S=0,u=!1,N=D(N,T,F),u=ee):(S=0,N=D(N,T,F),N=I(N,T),S=1,u=!1,N=D(N,T,F),u=ee,N=I(N,T))}}else S=0,N=D(N,T,F);else S=o?1:0,N=D(N,T,F);return N},this.__bidiEngine__.setOptions=function(N){N&&(a=N.isInputVisual,l=N.isOutputVisual,o=N.isInputRtl,c=N.isOutputRtl,u=N.isSymmetricSwapping)},this.__bidiEngine__.setOptions(n),this.__bidiEngine__};var e=["BN","BN","BN","BN","BN","BN","BN","BN","BN","S","B","S","WS","B","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","B","B","B","S","WS","N","N","ET","ET","ET","N","N","N","N","N","ES","CS","ES","CS","CS","EN","EN","EN","EN","EN","EN","EN","EN","EN","EN","CS","N","N","N","N","N","N","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","N","N","N","N","N","N","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","N","N","N","N","BN","BN","BN","BN","BN","BN","B","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","CS","N","ET","ET","ET","ET","N","N","N","N","L","N","N","BN","N","N","ET","ET","EN","EN","N","L","N","N","N","EN","L","N","N","N","N","N","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","N","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","N","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","N","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","N","N","L","L","L","L","L","L","L","N","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","N","L","N","N","N","N","N","ET","N","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","R","NSM","R","NSM","NSM","R","NSM","NSM","R","NSM","N","N","N","N","N","N","N","N","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","N","N","N","N","N","R","R","R","R","R","N","N","N","N","N","N","N","N","N","N","N","AN","AN","AN","AN","AN","AN","N","N","AL","ET","ET","AL","CS","AL","N","N","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","AL","AL","N","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","AN","AN","AN","AN","AN","AN","AN","AN","AN","AN","ET","AN","AN","AL","AL","AL","NSM","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","NSM","NSM","NSM","NSM","NSM","NSM","NSM","AN","N","NSM","NSM","NSM","NSM","NSM","NSM","AL","AL","NSM","NSM","N","NSM","NSM","NSM","NSM","AL","AL","EN","EN","EN","EN","EN","EN","EN","EN","EN","EN","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","N","AL","AL","NSM","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","N","N","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","AL","N","N","N","N","N","N","N","N","N","N","N","N","N","N","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","R","R","N","N","N","N","R","N","N","N","N","N","WS","WS","WS","WS","WS","WS","WS","WS","WS","WS","WS","BN","BN","BN","L","R","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","WS","B","LRE","RLE","PDF","LRO","RLO","CS","ET","ET","ET","ET","ET","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","CS","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","WS","BN","BN","BN","BN","BN","N","LRI","RLI","FSI","PDI","BN","BN","BN","BN","BN","BN","EN","L","N","N","EN","EN","EN","EN","EN","EN","ES","ES","N","N","N","L","EN","EN","EN","EN","EN","EN","EN","EN","EN","EN","ES","ES","N","N","N","N","L","L","L","L","L","L","L","L","L","L","L","L","L","N","N","N","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","L","L","L","L","L","L","L","N","N","N","N","N","N","N","N","N","N","N","N","L","L","L","L","L","N","N","N","N","N","R","NSM","R","R","R","R","R","R","R","R","R","R","ES","R","R","R","R","R","R","R","R","R","R","R","R","R","N","R","R","R","R","R","N","R","N","R","R","N","R","R","N","R","R","R","R","R","R","R","R","R","R","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","CS","N","CS","N","N","CS","N","N","N","N","N","N","N","N","N","ET","N","N","ES","ES","N","N","N","N","N","ET","ET","N","N","N","N","N","AL","AL","AL","AL","AL","N","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","N","N","BN","N","N","N","ET","ET","ET","N","N","N","N","N","ES","CS","ES","CS","CS","EN","EN","EN","EN","EN","EN","EN","EN","EN","EN","CS","N","N","N","N","N","N","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","N","N","N","N","N","N","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","N","N","N","N","N","N","N","N","N","N","N","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","N","N","N","L","L","L","L","L","L","N","N","L","L","L","L","L","L","N","N","L","L","L","L","L","L","N","N","L","L","L","N","N","N","ET","ET","N","N","N","ET","ET","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N"],r=new t.__bidiEngine__({isInputVisual:!0});t.API.events.push(["postProcessText",function(n){var s=n.text;n.x,n.y;var i=n.options||{};n.mutex,i.lang;var a=[];if(i.isInputVisual=typeof i.isInputVisual!="boolean"||i.isInputVisual,r.setOptions(i),Object.prototype.toString.call(s)==="[object Array]"){var o=0;for(a=[],o=0;o<s.length;o+=1)Object.prototype.toString.call(s[o])==="[object Array]"?a.push([r.doBidiReorder(s[o][0]),s[o][1],s[o][2]]):a.push([r.doBidiReorder(s[o])]);n.text=a}else n.text=r.doBidiReorder(s);r.setOptions({isInputVisual:!0})}])}(kt),kt.API.TTFFont=function(){function t(e){var r;if(this.rawData=e,r=this.contents=new bl(e),this.contents.pos=4,r.readString(4)==="ttcf")throw new Error("TTCF not supported.");r.pos=0,this.parse(),this.subset=new o$(this),this.registerTTF()}return t.open=function(e){return new t(e)},t.prototype.parse=function(){return this.directory=new zz(this.contents),this.head=new Wz(this),this.name=new e$(this),this.cmap=new P3(this),this.toUnicode={},this.hhea=new Xz(this),this.maxp=new t$(this),this.hmtx=new r$(this),this.post=new Yz(this),this.os2=new Jz(this),this.loca=new a$(this),this.glyf=new n$(this),this.ascender=this.os2.exists&&this.os2.ascender||this.hhea.ascender,this.decender=this.os2.exists&&this.os2.decender||this.hhea.decender,this.lineGap=this.os2.exists&&this.os2.lineGap||this.hhea.lineGap,this.bbox=[this.head.xMin,this.head.yMin,this.head.xMax,this.head.yMax]},t.prototype.registerTTF=function(){var e,r,n,s,i;if(this.scaleFactor=1e3/this.head.unitsPerEm,this.bbox=(function(){var a,o,l,c;for(c=[],a=0,o=(l=this.bbox).length;a<o;a++)e=l[a],c.push(Math.round(e*this.scaleFactor));return c}).call(this),this.stemV=0,this.post.exists?(n=255&(s=this.post.italic_angle),32768&(r=s>>16)&&(r=-(1+(65535^r))),this.italicAngle=+(r+"."+n)):this.italicAngle=0,this.ascender=Math.round(this.ascender*this.scaleFactor),this.decender=Math.round(this.decender*this.scaleFactor),this.lineGap=Math.round(this.lineGap*this.scaleFactor),this.capHeight=this.os2.exists&&this.os2.capHeight||this.ascender,this.xHeight=this.os2.exists&&this.os2.xHeight||0,this.familyClass=(this.os2.exists&&this.os2.familyClass||0)>>8,this.isSerif=(i=this.familyClass)===1||i===2||i===3||i===4||i===5||i===7,this.isScript=this.familyClass===10,this.flags=0,this.post.isFixedPitch&&(this.flags|=1),this.isSerif&&(this.flags|=2),this.isScript&&(this.flags|=8),this.italicAngle!==0&&(this.flags|=64),this.flags|=32,!this.cmap.unicode)throw new Error("No unicode cmap for font")},t.prototype.characterToGlyph=function(e){var r;return((r=this.cmap.unicode)!=null?r.codeMap[e]:void 0)||0},t.prototype.widthOfGlyph=function(e){var r;return r=1e3/this.head.unitsPerEm,this.hmtx.forGlyph(e).advance*r},t.prototype.widthOfString=function(e,r,n){var s,i,a,o;for(a=0,i=0,o=(e=""+e).length;0<=o?i<o:i>o;i=0<=o?++i:--i)s=e.charCodeAt(i),a+=this.widthOfGlyph(this.characterToGlyph(s))+n*(1e3/r)||0;return a*(r/1e3)},t.prototype.lineHeight=function(e,r){var n;return r==null&&(r=!1),n=r?this.lineGap:0,(this.ascender+n-this.decender)/1e3*e},t}();var pa,bl=function(){function t(e){this.data=e??[],this.pos=0,this.length=this.data.length}return t.prototype.readByte=function(){return this.data[this.pos++]},t.prototype.writeByte=function(e){return this.data[this.pos++]=e},t.prototype.readUInt32=function(){return 16777216*this.readByte()+(this.readByte()<<16)+(this.readByte()<<8)+this.readByte()},t.prototype.writeUInt32=function(e){return this.writeByte(e>>>24&255),this.writeByte(e>>16&255),this.writeByte(e>>8&255),this.writeByte(255&e)},t.prototype.readInt32=function(){var e;return(e=this.readUInt32())>=2147483648?e-4294967296:e},t.prototype.writeInt32=function(e){return e<0&&(e+=4294967296),this.writeUInt32(e)},t.prototype.readUInt16=function(){return this.readByte()<<8|this.readByte()},t.prototype.writeUInt16=function(e){return this.writeByte(e>>8&255),this.writeByte(255&e)},t.prototype.readInt16=function(){var e;return(e=this.readUInt16())>=32768?e-65536:e},t.prototype.writeInt16=function(e){return e<0&&(e+=65536),this.writeUInt16(e)},t.prototype.readString=function(e){var r,n;for(n=[],r=0;0<=e?r<e:r>e;r=0<=e?++r:--r)n[r]=String.fromCharCode(this.readByte());return n.join("")},t.prototype.writeString=function(e){var r,n,s;for(s=[],r=0,n=e.length;0<=n?r<n:r>n;r=0<=n?++r:--r)s.push(this.writeByte(e.charCodeAt(r)));return s},t.prototype.readShort=function(){return this.readInt16()},t.prototype.writeShort=function(e){return this.writeInt16(e)},t.prototype.readLongLong=function(){var e,r,n,s,i,a,o,l;return e=this.readByte(),r=this.readByte(),n=this.readByte(),s=this.readByte(),i=this.readByte(),a=this.readByte(),o=this.readByte(),l=this.readByte(),128&e?-1*(72057594037927940*(255^e)+281474976710656*(255^r)+1099511627776*(255^n)+4294967296*(255^s)+16777216*(255^i)+65536*(255^a)+256*(255^o)+(255^l)+1):72057594037927940*e+281474976710656*r+1099511627776*n+4294967296*s+16777216*i+65536*a+256*o+l},t.prototype.writeLongLong=function(e){var r,n;return r=Math.floor(e/4294967296),n=4294967295&e,this.writeByte(r>>24&255),this.writeByte(r>>16&255),this.writeByte(r>>8&255),this.writeByte(255&r),this.writeByte(n>>24&255),this.writeByte(n>>16&255),this.writeByte(n>>8&255),this.writeByte(255&n)},t.prototype.readInt=function(){return this.readInt32()},t.prototype.writeInt=function(e){return this.writeInt32(e)},t.prototype.read=function(e){var r,n;for(r=[],n=0;0<=e?n<e:n>e;n=0<=e?++n:--n)r.push(this.readByte());return r},t.prototype.write=function(e){var r,n,s,i;for(i=[],n=0,s=e.length;n<s;n++)r=e[n],i.push(this.writeByte(r));return i},t}(),zz=function(){var t;function e(r){var n,s,i;for(this.scalarType=r.readInt(),this.tableCount=r.readShort(),this.searchRange=r.readShort(),this.entrySelector=r.readShort(),this.rangeShift=r.readShort(),this.tables={},s=0,i=this.tableCount;0<=i?s<i:s>i;s=0<=i?++s:--s)n={tag:r.readString(4),checksum:r.readInt(),offset:r.readInt(),length:r.readInt()},this.tables[n.tag]=n}return e.prototype.encode=function(r){var n,s,i,a,o,l,c,u,f,p,m,b,B;for(B in m=Object.keys(r).length,l=Math.log(2),f=16*Math.floor(Math.log(m)/l),a=Math.floor(f/l),u=16*m-f,(s=new bl).writeInt(this.scalarType),s.writeShort(m),s.writeShort(f),s.writeShort(a),s.writeShort(u),i=16*m,c=s.pos+i,o=null,b=[],r)for(p=r[B],s.writeString(B),s.writeInt(t(p)),s.writeInt(c),s.writeInt(p.length),b=b.concat(p),B==="head"&&(o=c),c+=p.length;c%4;)b.push(0),c++;return s.write(b),n=2981146554-t(s.data),s.pos=o+8,s.writeUInt32(n),s.data},t=function(r){var n,s,i,a;for(r=Q3.call(r);r.length%4;)r.push(0);for(i=new bl(r),s=0,n=0,a=r.length;n<a;n=n+=4)s+=i.readUInt32();return 4294967295&s},e}(),$z={}.hasOwnProperty,za=function(t,e){for(var r in e)$z.call(e,r)&&(t[r]=e[r]);function n(){this.constructor=t}return n.prototype=e.prototype,t.prototype=new n,t.__super__=e.prototype,t};pa=function(){function t(e){var r;this.file=e,r=this.file.directory.tables[this.tag],this.exists=!!r,r&&(this.offset=r.offset,this.length=r.length,this.parse(this.file.contents))}return t.prototype.parse=function(){},t.prototype.encode=function(){},t.prototype.raw=function(){return this.exists?(this.file.contents.pos=this.offset,this.file.contents.read(this.length)):null},t}();var Wz=function(t){function e(){return e.__super__.constructor.apply(this,arguments)}return za(e,pa),e.prototype.tag="head",e.prototype.parse=function(r){return r.pos=this.offset,this.version=r.readInt(),this.revision=r.readInt(),this.checkSumAdjustment=r.readInt(),this.magicNumber=r.readInt(),this.flags=r.readShort(),this.unitsPerEm=r.readShort(),this.created=r.readLongLong(),this.modified=r.readLongLong(),this.xMin=r.readShort(),this.yMin=r.readShort(),this.xMax=r.readShort(),this.yMax=r.readShort(),this.macStyle=r.readShort(),this.lowestRecPPEM=r.readShort(),this.fontDirectionHint=r.readShort(),this.indexToLocFormat=r.readShort(),this.glyphDataFormat=r.readShort()},e.prototype.encode=function(r){var n;return(n=new bl).writeInt(this.version),n.writeInt(this.revision),n.writeInt(this.checkSumAdjustment),n.writeInt(this.magicNumber),n.writeShort(this.flags),n.writeShort(this.unitsPerEm),n.writeLongLong(this.created),n.writeLongLong(this.modified),n.writeShort(this.xMin),n.writeShort(this.yMin),n.writeShort(this.xMax),n.writeShort(this.yMax),n.writeShort(this.macStyle),n.writeShort(this.lowestRecPPEM),n.writeShort(this.fontDirectionHint),n.writeShort(r),n.writeShort(this.glyphDataFormat),n.data},e}(),CN=function(){function t(e,r){var n,s,i,a,o,l,c,u,f,p,m,b,B,_,w,y,S;switch(this.platformID=e.readUInt16(),this.encodingID=e.readShort(),this.offset=r+e.readInt(),f=e.pos,e.pos=this.offset,this.format=e.readUInt16(),this.length=e.readUInt16(),this.language=e.readUInt16(),this.isUnicode=this.platformID===3&&this.encodingID===1&&this.format===4||this.platformID===0&&this.format===4,this.codeMap={},this.format){case 0:for(l=0;l<256;++l)this.codeMap[l]=e.readByte();break;case 4:for(m=e.readUInt16(),p=m/2,e.pos+=6,i=function(){var O,R;for(R=[],l=O=0;0<=p?O<p:O>p;l=0<=p?++O:--O)R.push(e.readUInt16());return R}(),e.pos+=2,B=function(){var O,R;for(R=[],l=O=0;0<=p?O<p:O>p;l=0<=p?++O:--O)R.push(e.readUInt16());return R}(),c=function(){var O,R;for(R=[],l=O=0;0<=p?O<p:O>p;l=0<=p?++O:--O)R.push(e.readUInt16());return R}(),u=function(){var O,R;for(R=[],l=O=0;0<=p?O<p:O>p;l=0<=p?++O:--O)R.push(e.readUInt16());return R}(),s=(this.length-e.pos+this.offset)/2,o=function(){var O,R;for(R=[],l=O=0;0<=s?O<s:O>s;l=0<=s?++O:--O)R.push(e.readUInt16());return R}(),l=w=0,S=i.length;w<S;l=++w)for(_=i[l],n=y=b=B[l];b<=_?y<=_:y>=_;n=b<=_?++y:--y)u[l]===0?a=n+c[l]:(a=o[u[l]/2+(n-b)-(p-l)]||0)!==0&&(a+=c[l]),this.codeMap[n]=65535&a}e.pos=f}return t.encode=function(e,r){var n,s,i,a,o,l,c,u,f,p,m,b,B,_,w,y,S,O,R,M,I,E,L,D,N,T,F,ee,ce,re,de,W,ue,ae,Ee,Q,k,z,te,$,ne,X,he,ge,Ce,Te;switch(ee=new bl,a=Object.keys(e).sort(function(Fe,oe){return Fe-oe}),r){case"macroman":for(B=0,_=function(){var Fe=[];for(b=0;b<256;++b)Fe.push(0);return Fe}(),y={0:0},i={},ce=0,ue=a.length;ce<ue;ce++)y[he=e[s=a[ce]]]==null&&(y[he]=++B),i[s]={old:e[s],new:y[e[s]]},_[s]=y[e[s]];return ee.writeUInt16(1),ee.writeUInt16(0),ee.writeUInt32(12),ee.writeUInt16(0),ee.writeUInt16(262),ee.writeUInt16(0),ee.write(_),{charMap:i,subtable:ee.data,maxGlyphID:B+1};case"unicode":for(T=[],f=[],S=0,y={},n={},w=c=null,re=0,ae=a.length;re<ae;re++)y[R=e[s=a[re]]]==null&&(y[R]=++S),n[s]={old:R,new:y[R]},o=y[R]-s,w!=null&&o===c||(w&&f.push(w),T.push(s),c=o),w=s;for(w&&f.push(w),f.push(65535),T.push(65535),D=2*(L=T.length),E=2*Math.pow(Math.log(L)/Math.LN2,2),p=Math.log(E/2)/Math.LN2,I=2*L-E,l=[],M=[],m=[],b=de=0,Ee=T.length;de<Ee;b=++de){if(N=T[b],u=f[b],N===65535){l.push(0),M.push(0);break}if(N-(F=n[N].new)>=32768)for(l.push(0),M.push(2*(m.length+L-b)),s=W=N;N<=u?W<=u:W>=u;s=N<=u?++W:--W)m.push(n[s].new);else l.push(F-N),M.push(0)}for(ee.writeUInt16(3),ee.writeUInt16(1),ee.writeUInt32(12),ee.writeUInt16(4),ee.writeUInt16(16+8*L+2*m.length),ee.writeUInt16(0),ee.writeUInt16(D),ee.writeUInt16(E),ee.writeUInt16(p),ee.writeUInt16(I),ne=0,Q=f.length;ne<Q;ne++)s=f[ne],ee.writeUInt16(s);for(ee.writeUInt16(0),X=0,k=T.length;X<k;X++)s=T[X],ee.writeUInt16(s);for(ge=0,z=l.length;ge<z;ge++)o=l[ge],ee.writeUInt16(o);for(Ce=0,te=M.length;Ce<te;Ce++)O=M[Ce],ee.writeUInt16(O);for(Te=0,$=m.length;Te<$;Te++)B=m[Te],ee.writeUInt16(B);return{charMap:n,subtable:ee.data,maxGlyphID:S+1}}},t}(),P3=function(t){function e(){return e.__super__.constructor.apply(this,arguments)}return za(e,pa),e.prototype.tag="cmap",e.prototype.parse=function(r){var n,s,i;for(r.pos=this.offset,this.version=r.readUInt16(),i=r.readUInt16(),this.tables=[],this.unicode=null,s=0;0<=i?s<i:s>i;s=0<=i?++s:--s)n=new CN(r,this.offset),this.tables.push(n),n.isUnicode&&this.unicode==null&&(this.unicode=n);return!0},e.encode=function(r,n){var s,i;return n==null&&(n="macroman"),s=CN.encode(r,n),(i=new bl).writeUInt16(0),i.writeUInt16(1),s.table=i.data.concat(s.subtable),s},e}(),Xz=function(t){function e(){return e.__super__.constructor.apply(this,arguments)}return za(e,pa),e.prototype.tag="hhea",e.prototype.parse=function(r){return r.pos=this.offset,this.version=r.readInt(),this.ascender=r.readShort(),this.decender=r.readShort(),this.lineGap=r.readShort(),this.advanceWidthMax=r.readShort(),this.minLeftSideBearing=r.readShort(),this.minRightSideBearing=r.readShort(),this.xMaxExtent=r.readShort(),this.caretSlopeRise=r.readShort(),this.caretSlopeRun=r.readShort(),this.caretOffset=r.readShort(),r.pos+=8,this.metricDataFormat=r.readShort(),this.numberOfMetrics=r.readUInt16()},e}(),Jz=function(t){function e(){return e.__super__.constructor.apply(this,arguments)}return za(e,pa),e.prototype.tag="OS/2",e.prototype.parse=function(r){if(r.pos=this.offset,this.version=r.readUInt16(),this.averageCharWidth=r.readShort(),this.weightClass=r.readUInt16(),this.widthClass=r.readUInt16(),this.type=r.readShort(),this.ySubscriptXSize=r.readShort(),this.ySubscriptYSize=r.readShort(),this.ySubscriptXOffset=r.readShort(),this.ySubscriptYOffset=r.readShort(),this.ySuperscriptXSize=r.readShort(),this.ySuperscriptYSize=r.readShort(),this.ySuperscriptXOffset=r.readShort(),this.ySuperscriptYOffset=r.readShort(),this.yStrikeoutSize=r.readShort(),this.yStrikeoutPosition=r.readShort(),this.familyClass=r.readShort(),this.panose=function(){var n,s;for(s=[],n=0;n<10;++n)s.push(r.readByte());return s}(),this.charRange=function(){var n,s;for(s=[],n=0;n<4;++n)s.push(r.readInt());return s}(),this.vendorID=r.readString(4),this.selection=r.readShort(),this.firstCharIndex=r.readShort(),this.lastCharIndex=r.readShort(),this.version>0&&(this.ascent=r.readShort(),this.descent=r.readShort(),this.lineGap=r.readShort(),this.winAscent=r.readShort(),this.winDescent=r.readShort(),this.codePageRange=function(){var n,s;for(s=[],n=0;n<2;n=++n)s.push(r.readInt());return s}(),this.version>1))return this.xHeight=r.readShort(),this.capHeight=r.readShort(),this.defaultChar=r.readShort(),this.breakChar=r.readShort(),this.maxContext=r.readShort()},e}(),Yz=function(t){function e(){return e.__super__.constructor.apply(this,arguments)}return za(e,pa),e.prototype.tag="post",e.prototype.parse=function(r){var n,s,i;switch(r.pos=this.offset,this.format=r.readInt(),this.italicAngle=r.readInt(),this.underlinePosition=r.readShort(),this.underlineThickness=r.readShort(),this.isFixedPitch=r.readInt(),this.minMemType42=r.readInt(),this.maxMemType42=r.readInt(),this.minMemType1=r.readInt(),this.maxMemType1=r.readInt(),this.format){case 65536:break;case 131072:var a;for(s=r.readUInt16(),this.glyphNameIndex=[],a=0;0<=s?a<s:a>s;a=0<=s?++a:--a)this.glyphNameIndex.push(r.readUInt16());for(this.names=[],i=[];r.pos<this.offset+this.length;)n=r.readByte(),i.push(this.names.push(r.readString(n)));return i;case 151552:return s=r.readUInt16(),this.offsets=r.read(s);case 196608:break;case 262144:return this.map=(function(){var o,l,c;for(c=[],a=o=0,l=this.file.maxp.numGlyphs;0<=l?o<l:o>l;a=0<=l?++o:--o)c.push(r.readUInt32());return c}).call(this)}},e}(),Zz=function(t,e){this.raw=t,this.length=t.length,this.platformID=e.platformID,this.encodingID=e.encodingID,this.languageID=e.languageID},e$=function(t){function e(){return e.__super__.constructor.apply(this,arguments)}return za(e,pa),e.prototype.tag="name",e.prototype.parse=function(r){var n,s,i,a,o,l,c,u,f,p,m;for(r.pos=this.offset,r.readShort(),n=r.readShort(),l=r.readShort(),s=[],a=0;0<=n?a<n:a>n;a=0<=n?++a:--a)s.push({platformID:r.readShort(),encodingID:r.readShort(),languageID:r.readShort(),nameID:r.readShort(),length:r.readShort(),offset:this.offset+l+r.readShort()});for(c={},a=f=0,p=s.length;f<p;a=++f)i=s[a],r.pos=i.offset,u=r.readString(i.length),o=new Zz(u,i),c[m=i.nameID]==null&&(c[m]=[]),c[i.nameID].push(o);this.strings=c,this.copyright=c[0],this.fontFamily=c[1],this.fontSubfamily=c[2],this.uniqueSubfamily=c[3],this.fontName=c[4],this.version=c[5];try{this.postscriptName=c[6][0].raw.replace(/[\x00-\x19\x80-\xff]/g,"")}catch{this.postscriptName=c[4][0].raw.replace(/[\x00-\x19\x80-\xff]/g,"")}return this.trademark=c[7],this.manufacturer=c[8],this.designer=c[9],this.description=c[10],this.vendorUrl=c[11],this.designerUrl=c[12],this.license=c[13],this.licenseUrl=c[14],this.preferredFamily=c[15],this.preferredSubfamily=c[17],this.compatibleFull=c[18],this.sampleText=c[19]},e}(),t$=function(t){function e(){return e.__super__.constructor.apply(this,arguments)}return za(e,pa),e.prototype.tag="maxp",e.prototype.parse=function(r){return r.pos=this.offset,this.version=r.readInt(),this.numGlyphs=r.readUInt16(),this.maxPoints=r.readUInt16(),this.maxContours=r.readUInt16(),this.maxCompositePoints=r.readUInt16(),this.maxComponentContours=r.readUInt16(),this.maxZones=r.readUInt16(),this.maxTwilightPoints=r.readUInt16(),this.maxStorage=r.readUInt16(),this.maxFunctionDefs=r.readUInt16(),this.maxInstructionDefs=r.readUInt16(),this.maxStackElements=r.readUInt16(),this.maxSizeOfInstructions=r.readUInt16(),this.maxComponentElements=r.readUInt16(),this.maxComponentDepth=r.readUInt16()},e}(),r$=function(t){function e(){return e.__super__.constructor.apply(this,arguments)}return za(e,pa),e.prototype.tag="hmtx",e.prototype.parse=function(r){var n,s,i,a,o,l,c;for(r.pos=this.offset,this.metrics=[],n=0,l=this.file.hhea.numberOfMetrics;0<=l?n<l:n>l;n=0<=l?++n:--n)this.metrics.push({advance:r.readUInt16(),lsb:r.readInt16()});for(i=this.file.maxp.numGlyphs-this.file.hhea.numberOfMetrics,this.leftSideBearings=function(){var u,f;for(f=[],n=u=0;0<=i?u<i:u>i;n=0<=i?++u:--u)f.push(r.readInt16());return f}(),this.widths=(function(){var u,f,p,m;for(m=[],u=0,f=(p=this.metrics).length;u<f;u++)a=p[u],m.push(a.advance);return m}).call(this),s=this.widths[this.widths.length-1],c=[],n=o=0;0<=i?o<i:o>i;n=0<=i?++o:--o)c.push(this.widths.push(s));return c},e.prototype.forGlyph=function(r){return r in this.metrics?this.metrics[r]:{advance:this.metrics[this.metrics.length-1].advance,lsb:this.leftSideBearings[r-this.metrics.length]}},e}(),Q3=[].slice,n$=function(t){function e(){return e.__super__.constructor.apply(this,arguments)}return za(e,pa),e.prototype.tag="glyf",e.prototype.parse=function(){return this.cache={}},e.prototype.glyphFor=function(r){var n,s,i,a,o,l,c,u,f,p;return r in this.cache?this.cache[r]:(a=this.file.loca,n=this.file.contents,s=a.indexOf(r),(i=a.lengthOf(r))===0?this.cache[r]=null:(n.pos=this.offset+s,o=(l=new bl(n.read(i))).readShort(),u=l.readShort(),p=l.readShort(),c=l.readShort(),f=l.readShort(),this.cache[r]=o===-1?new i$(l,u,p,c,f):new s$(l,o,u,p,c,f),this.cache[r]))},e.prototype.encode=function(r,n,s){var i,a,o,l,c;for(o=[],a=[],l=0,c=n.length;l<c;l++)i=r[n[l]],a.push(o.length),i&&(o=o.concat(i.encode(s)));return a.push(o.length),{table:o,offsets:a}},e}(),s$=function(){function t(e,r,n,s,i,a){this.raw=e,this.numberOfContours=r,this.xMin=n,this.yMin=s,this.xMax=i,this.yMax=a,this.compound=!1}return t.prototype.encode=function(){return this.raw.data},t}(),i$=function(){function t(e,r,n,s,i){var a,o;for(this.raw=e,this.xMin=r,this.yMin=n,this.xMax=s,this.yMax=i,this.compound=!0,this.glyphIDs=[],this.glyphOffsets=[],a=this.raw;o=a.readShort(),this.glyphOffsets.push(a.pos),this.glyphIDs.push(a.readUInt16()),32&o;)a.pos+=1&o?4:2,128&o?a.pos+=8:64&o?a.pos+=4:8&o&&(a.pos+=2)}return t.prototype.encode=function(){var e,r,n;for(r=new bl(Q3.call(this.raw.data)),e=0,n=this.glyphIDs.length;e<n;++e)r.pos=this.glyphOffsets[e];return r.data},t}(),a$=function(t){function e(){return e.__super__.constructor.apply(this,arguments)}return za(e,pa),e.prototype.tag="loca",e.prototype.parse=function(r){var n,s;return r.pos=this.offset,n=this.file.head.indexToLocFormat,this.offsets=n===0?(function(){var i,a;for(a=[],s=0,i=this.length;s<i;s+=2)a.push(2*r.readUInt16());return a}).call(this):(function(){var i,a;for(a=[],s=0,i=this.length;s<i;s+=4)a.push(r.readUInt32());return a}).call(this)},e.prototype.indexOf=function(r){return this.offsets[r]},e.prototype.lengthOf=function(r){return this.offsets[r+1]-this.offsets[r]},e.prototype.encode=function(r,n){for(var s=new Uint32Array(this.offsets.length),i=0,a=0,o=0;o<s.length;++o)if(s[o]=i,a<n.length&&n[a]==o){++a,s[o]=i;var l=this.offsets[o],c=this.offsets[o+1]-l;c>0&&(i+=c)}for(var u=new Array(4*s.length),f=0;f<s.length;++f)u[4*f+3]=255&s[f],u[4*f+2]=(65280&s[f])>>8,u[4*f+1]=(16711680&s[f])>>16,u[4*f]=(4278190080&s[f])>>24;return u},e}(),o$=function(){function t(e){this.font=e,this.subset={},this.unicodes={},this.next=33}return t.prototype.generateCmap=function(){var e,r,n,s,i;for(r in s=this.font.cmap.tables[0].codeMap,e={},i=this.subset)n=i[r],e[r]=s[n];return e},t.prototype.glyphsFor=function(e){var r,n,s,i,a,o,l;for(s={},a=0,o=e.length;a<o;a++)s[i=e[a]]=this.font.glyf.glyphFor(i);for(i in r=[],s)(n=s[i])!=null&&n.compound&&r.push.apply(r,n.glyphIDs);if(r.length>0)for(i in l=this.glyphsFor(r))n=l[i],s[i]=n;return s},t.prototype.encode=function(e,r){var n,s,i,a,o,l,c,u,f,p,m,b,B,_,w;for(s in n=P3.encode(this.generateCmap(),"unicode"),a=this.glyphsFor(e),m={0:0},w=n.charMap)m[(l=w[s]).old]=l.new;for(b in p=n.maxGlyphID,a)b in m||(m[b]=p++);return u=function(y){var S,O;for(S in O={},y)O[y[S]]=S;return O}(m),f=Object.keys(u).sort(function(y,S){return y-S}),B=function(){var y,S,O;for(O=[],y=0,S=f.length;y<S;y++)o=f[y],O.push(u[o]);return O}(),i=this.font.glyf.encode(a,B,m),c=this.font.loca.encode(i.offsets,B),_={cmap:this.font.cmap.raw(),glyf:i.table,loca:c,hmtx:this.font.hmtx.raw(),hhea:this.font.hhea.raw(),maxp:this.font.maxp.raw(),post:this.font.post.raw(),name:this.font.name.raw(),head:this.font.head.encode(r)},this.font.os2.exists&&(_["OS/2"]=this.font.os2.raw()),this.font.directory.encode(_)},t}();kt.API.PDFObject=function(){var t;function e(){}return t=function(r,n){return(Array(n+1).join("0")+r).slice(-n)},e.convert=function(r){var n,s,i,a;if(Array.isArray(r))return"["+function(){var o,l,c;for(c=[],o=0,l=r.length;o<l;o++)n=r[o],c.push(e.convert(n));return c}().join(" ")+"]";if(typeof r=="string")return"/"+r;if(r!=null&&r.isString)return"("+r+")";if(r instanceof Date)return"(D:"+t(r.getUTCFullYear(),4)+t(r.getUTCMonth(),2)+t(r.getUTCDate(),2)+t(r.getUTCHours(),2)+t(r.getUTCMinutes(),2)+t(r.getUTCSeconds(),2)+"Z)";if({}.toString.call(r)==="[object Object]"){for(s in i=["<<"],r)a=r[s],i.push("/"+s+" "+e.convert(a));return i.push(">>"),i.join(`
`)}return""+r},e}();const lx=Object.freeze(Object.defineProperty({__proto__:null,AcroForm:Rz,AcroFormAppearance:bt,AcroFormButton:Pn,AcroFormCheckBox:Qf,AcroFormChoiceField:Bc,AcroFormComboBox:Ec,AcroFormEditBox:Uf,AcroFormListBox:Cc,AcroFormPasswordField:Lf,AcroFormPushButton:Pf,AcroFormRadioButton:_c,AcroFormTextField:ul,GState:xp,ShadingPattern:HA,TilingPattern:gc,default:kt,jsPDF:kt},Symbol.toStringTag,{value:"Module"}));async function A$(t){const e={...t,remaining:t.quantity,status:"PENDIENTE",createdAt:Dt.now()};return qn(ot(Le,"inventory_batches"),e)}async function L3(t,e){await rn(Lt(Le,"inventory_batches",t),{status:"PAGADO",paidAmount:null,paidAt:Dt.now()})}async function l$(t,e){const r=Xt(ot(Le,"batch_allocations"),rr("saleDate",">=",t),rr("saleDate","<=",e)),n=await Pt(r),s={};return n.forEach(i=>{const a=i.data(),o=a.batchId;s[o]||(s[o]={batchId:a.batchId,batchDate:a.batchDate,productName:a.productName,quantity:0,amountCharged:0}),s[o].quantity+=Number(a.quantity||0),s[o].amountCharged+=Number(a.amountCharged||0)}),Object.values(s)}async function c$(t){const e=Lt(Le,"salesV2",t),r=await zo(e);if(!r.exists())throw new Error("La venta no existe.");const n=r.data(),s=[];if(Array.isArray(n.items)){for(const o of n.items)if(Array.isArray(o==null?void 0:o.allocations))for(const l of o.allocations){const c=String((l==null?void 0:l.batchId)||"").trim(),u=Number((l==null?void 0:l.qty)||0);c&&u&&s.push({batchId:c,qty:u})}}if(Array.isArray(n.allocations))for(const o of n.allocations){const l=String((o==null?void 0:o.batchId)||"").trim(),c=Number((o==null?void 0:o.qty)||0);l&&c&&s.push({batchId:l,qty:c})}if(s.length===0)return await Al(Le,async o=>{o.delete(e)}),{restored:0};const i=new Map;for(const o of s)i.set(o.batchId,Number((i.get(o.batchId)||0)+o.qty));let a=0;return await Al(Le,async o=>{const l=Array.from(i.entries()),c=l.map(([f])=>Lt(Le,"inventory_batches",f)),u=await Promise.all(c.map(f=>o.get(f)));l.forEach(([f,p],m)=>{const b=u[m];if(!b.exists())return;const B=b.data(),_=Number((B==null?void 0:B.remaining)??0),w=Number((_+Number(p||0)).toFixed(3));o.update(c[m],{remaining:w}),a+=Number(p||0)}),o.delete(e)}),{restored:a}}function rh(){const[t,e]=P.useState(0),r=P.useCallback(()=>e(n=>n+1),[]);return{refreshKey:t,refresh:r}}const _i=t=>Math.round((Number(t)||0)*100)/100,mg=t=>Math.round((Number(t)||0)*1e3)/1e3,Vh=t=>Number(t??0).toFixed(2),Yy=t=>Number(t??0).toFixed(3),EN=(t,e)=>{var n;const r=t.date??((n=t.timestamp)!=null&&n.toDate?er(t.timestamp.toDate(),"yyyy-MM-dd"):"");return r?Array.isArray(t.items)&&t.items.length>0?t.items.map((s,i)=>{const a=Number((s==null?void 0:s.qty)??0),o=Number((s==null?void 0:s.lineFinal)??0)||Math.max(0,Number((s==null?void 0:s.unitPrice)||0)*a-Number((s==null?void 0:s.discount)||0));return{id:`${e}#${i}`,productName:String((s==null?void 0:s.productName)??"(sin nombre)"),quantity:a,amount:_i(o),amountSuggested:Number(t.amountSuggested??0),date:r,userEmail:t.userEmail??t.vendor??"(sin usuario)",clientName:t.clientName??"",amountReceived:Number(t.amountReceived??0),change:String(t.change??"0"),status:t.status??"FLOTANTE",allocations:Array.isArray(s==null?void 0:s.allocations)?s.allocations:t.allocations,avgUnitCost:Number((s==null?void 0:s.avgUnitCost)??t.avgUnitCost??0),cogsAmount:Number((s==null?void 0:s.cogsAmount)??0)}}):[{id:e,productName:t.productName??"(sin nombre)",quantity:Number(t.quantity??0),amount:Number(t.amount??t.amountCharged??0),amountSuggested:Number(t.amountSuggested??0),date:r,userEmail:t.userEmail??t.vendor??"(sin usuario)",clientName:t.clientName??"",amountReceived:Number(t.amountReceived??0),change:String(t.change??"0"),status:t.status??"FLOTANTE",allocations:t.allocations,avgUnitCost:t.avgUnitCost,cogsAmount:t.cogsAmount}]:[]};function u$({role:t}){const[e,r]=P.useState([]),[n,s]=P.useState([]),[i,a]=P.useState(null),[o,l]=P.useState(!0),[c,u]=P.useState(""),[f,p]=P.useState("ALL"),[m,b]=P.useState(null),[B,_]=P.useState(0),[w,y]=P.useState(0),[S,O]=P.useState(""),[R,M]=P.useState(0),[I,E]=P.useState("0"),L=er(new Date,"yyyy-MM-dd"),D=P.useRef(null),{refreshKey:N}=rh();P.useEffect(()=>{const $=Xt(ot(Le,"salesV2"),rr("date","==",L)),ne=I2($,X=>{const he=[];X.forEach(ge=>{const Ce=EN(ge.data(),ge.id);he.push(...Ce)}),r(he),l(!1)});return()=>ne()},[L,N]),P.useEffect(()=>{const $=Xt(ot(Le,"salesV2"),rr("status","==","FLOTANTE")),ne=I2($,X=>{const he=[];X.forEach(ge=>{const Ce=EN(ge.data(),ge.id);he.push(...Ce)}),s(he)});return()=>ne()},[N]),P.useEffect(()=>{(async()=>{const ne=Xt(ot(Le,"daily_closures"),rr("date","==",L)),X=await Pt(ne);if(X.empty)a(null);else{const he=X.docs[0];a({id:he.id,...he.data()})}})()},[L,N]);const T=No.useMemo(()=>{if(f==="FLOTANTE"){const $=[...e,...n],ne=new Map;for(const X of $)X.status==="FLOTANTE"&&ne.set(X.id,X);return Array.from(ne.values())}if(f==="ALL"){const $=[...e,...n],ne=new Map;for(const X of $)ne.set(X.id,X);return Array.from(ne.values())}return e.filter($=>$.status==="PROCESADA")},[f,e,n]);_i(T.reduce(($,ne)=>$+(ne.amountSuggested||0),0));const F=_i(T.reduce(($,ne)=>$+(ne.amount||0),0)),ee=mg(T.reduce(($,ne)=>$+(ne.quantity||0),0)),ce=_i(T.reduce(($,ne)=>$+Number(ne.cogsAmount??0),0)),re=_i(F-ce),de={};T.forEach($=>{const ne=$.productName||"(sin nombre)";de[ne]||(de[ne]={totalQuantity:0,totalAmount:0}),de[ne].totalQuantity=mg(de[ne].totalQuantity+($.quantity||0)),de[ne].totalAmount=_i(de[ne].totalAmount+($.amount||0))});const W=Object.entries(de).map(([$,ne])=>({productName:$,totalQuantity:ne.totalQuantity,totalAmount:ne.totalAmount})),ue=async()=>{try{const $=T.filter(Fe=>Fe.status==="FLOTANTE"),ne=$.length>0?$:e.filter(Fe=>Fe.status!=="PROCESADA");if(ne.length===0){u("No hay ventas para procesar.");return}const X={totalCharged:_i(ne.reduce((Fe,oe)=>Fe+(oe.amount||0),0)),totalSuggested:_i(ne.reduce((Fe,oe)=>Fe+(oe.amountSuggested||0),0)),totalUnits:mg(ne.reduce((Fe,oe)=>Fe+(oe.quantity||0),0)),totalCOGS:_i(ne.reduce((Fe,oe)=>Fe+Number(oe.cogsAmount??0),0))},he=_i(X.totalCharged-X.totalSuggested),ge=_i(X.totalCharged-X.totalCOGS),Ce=await qn(ot(Le,"daily_closures"),{date:L,createdAt:Dt.now(),totalCharged:X.totalCharged,totalSuggested:X.totalSuggested,totalDifference:he,totalUnits:X.totalUnits,totalCOGS:X.totalCOGS,grossProfit:ge,products:ne.map(Fe=>({productName:Fe.productName,quantity:Fe.quantity,amount:Fe.amount})),salesV2:ne.map(Fe=>({id:Fe.id,productName:Fe.productName,quantity:Fe.quantity,amount:Fe.amount,amountSuggested:Fe.amountSuggested,userEmail:Fe.userEmail,clientName:Fe.clientName,amountReceived:Fe.amountReceived,change:Fe.change,status:Fe.status,cogsAmount:Fe.cogsAmount??0,avgUnitCost:Fe.avgUnitCost??null,allocations:Fe.allocations??[],date:Fe.date})),productSummary:Object.entries(ne.reduce((Fe,oe)=>{const le=oe.productName||"(sin nombre)";return Fe[le]||(Fe[le]={totalQuantity:0,totalAmount:0}),Fe[le].totalQuantity=mg(Fe[le].totalQuantity+(oe.quantity||0)),Fe[le].totalAmount=_i(Fe[le].totalAmount+(oe.amount||0)),Fe},{})).map(([Fe,oe])=>({productName:Fe,totalQuantity:oe.totalQuantity,totalAmount:oe.totalAmount}))}),Te=rw(Le);ne.forEach(Fe=>{Te.update(Lt(Le,"salesV2",Fe.id.split("#")[0]),{status:"PROCESADA",closureId:Ce.id,closureDate:L})}),await Te.commit(),u(` Cierre guardado. Ventas procesadas: ${ne.length}.`)}catch($){console.error($),u(" Error al guardar el cierre.")}},ae=async $=>{if(window.confirm("Revertir esta venta? Esta accin no se puede deshacer."))try{await rn(Lt(Le,"salesV2",$.split("#")[0]),{status:"FLOTANTE",closureId:null,closureDate:null}),u(" Venta revertida a FLOTANTE.")}catch(ne){console.error(ne),u(" No se pudo revertir la venta.")}},Ee=$=>{b($),_($.quantity),y($.amount),O($.clientName),M($.amountReceived),E($.change)},Q=async()=>{if(m)try{await rn(Lt(Le,"salesV2",m.id.split("#")[0]),{quantity:B,amount:w,amountCharged:w,clientName:S,amountReceived:R,change:I}),b(null),u(" Venta actualizada.")}catch($){console.error($),u(" No se pudo actualizar la venta.")}},k=async $=>{if(window.confirm("Eliminar esta venta? Se restaurar el stock en los lotes asignados."))try{const{restored:ne}=await c$($.split("#")[0]);u(` Venta eliminada. Stock restaurado: ${Number(ne).toFixed(2)}.`)}catch(ne){console.error(ne),u(" No se pudo eliminar la venta.")}},z=async()=>{if(D.current){D.current.classList.add("force-pdf-colors");try{const ne=(await xB(D.current,{backgroundColor:"#ffffff"})).toDataURL("image/png"),X=new kt;X.addImage(ne,"PNG",10,10,190,0),X.save(`cierre_${L}.pdf`)}finally{D.current.classList.remove("force-pdf-colors")}}},te=!t||t==="admin";return A.jsxs("div",{className:"max-w-7xl mx-auto bg-white p-6 rounded-2xl shadow-2xl",children:[A.jsxs("h2",{className:"text-2xl font-bold mb-4",children:["Cierre de Ventas - ",L]}),A.jsxs("div",{className:"flex items-center gap-2 mb-3",children:[A.jsx("label",{className:"text-sm",children:"Filtrar:"}),A.jsxs("select",{className:"border rounded px-2 py-1",value:f,onChange:$=>p($.target.value),children:[A.jsx("option",{value:"ALL",children:"Todas"}),A.jsx("option",{value:"FLOTANTE",children:"Venta Flotante"}),A.jsx("option",{value:"PROCESADA",children:"Venta Procesada"})]})]}),o?A.jsx("p",{children:"Cargando ventas..."}):A.jsxs("div",{ref:D,children:[A.jsxs("table",{className:"min-w-full border text-sm mb-4  shadow-2xl",children:[A.jsx("thead",{className:"bg-gray-100",children:A.jsxs("tr",{children:[A.jsx("th",{className:"border p-2",children:"Estado"}),A.jsx("th",{className:"border p-2",children:"Producto"}),A.jsx("th",{className:"border p-2",children:"Libras - Unidad"}),A.jsx("th",{className:"border p-2",children:"Monto"}),A.jsx("th",{className:"border p-2",children:"Fecha venta"}),A.jsx("th",{className:"border p-2",children:"Vendedor"}),A.jsx("th",{className:"border p-2",children:"Acciones"})]})}),A.jsxs("tbody",{children:[T.map($=>A.jsxs("tr",{className:"text-center",children:[A.jsx("td",{className:"border p-1",children:A.jsx("span",{className:`px-2 py-0.5 rounded text-xs ${$.status==="PROCESADA"?"bg-green-100 text-green-700":"bg-yellow-100 text-yellow-700"}`,children:$.status})}),A.jsx("td",{className:"border p-1",children:$.productName}),A.jsx("td",{className:"border p-1",children:Yy($.quantity)}),A.jsxs("td",{className:"border p-1",children:["C$",Vh($.amount)]}),A.jsx("td",{className:"border p-1",children:$.date}),A.jsx("td",{className:"border p-1",children:$.userEmail}),A.jsx("td",{className:"border p-1",children:$.status==="FLOTANTE"?A.jsxs("div",{className:"flex gap-2 justify-center",children:[te&&A.jsxs(A.Fragment,{children:[A.jsx("button",{onClick:()=>Ee($),className:"text-xs bg-indigo-600 text-white px-2 py-1 rounded hover:bg-indigo-700",children:"Editar"}),A.jsx("button",{onClick:()=>k($.id),className:"text-xs bg-red-600 text-white px-2 py-1 rounded hover:bg-red-700",children:"Eliminar"})]}),!te&&A.jsx("span",{className:"text-gray-400 text-xs",children:""})]}):$.status==="PROCESADA"?A.jsx("div",{className:"flex gap-2 justify-center",children:te?A.jsx("button",{onClick:()=>ae($.id),className:"text-xs bg-red-600 text-white px-2 py-1 rounded hover:bg-red-700",children:"Revertir"}):A.jsx("span",{className:"text-gray-400 text-xs",children:""})}):A.jsx("span",{className:"text-gray-400 text-xs",children:"No options"})})]},$.id)),T.length===0&&A.jsx("tr",{children:A.jsx("td",{colSpan:9,className:"p-3 text-center text-gray-500",children:"Sin ventas para mostrar."})})]})]}),A.jsxs("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-2 text-sm mb-2",children:[A.jsxs("div",{children:[" ","Total Libras/Unidades: ",A.jsx("strong",{children:Yy(ee)})]}),A.jsxs("div",{children:[" ","Total cobrado: ",A.jsxs("strong",{children:["C$",Vh(F)]})]})]}),(ce>0||re!==F)&&A.jsxs("div",{className:"grid grid-cols-2 md:grid-cols-3 gap-2 text-sm mb-6",children:[A.jsxs("div",{children:[" ","Calculo a Precio compra:"," ",A.jsxs("strong",{children:["C$",Vh(ce)]})]}),A.jsxs("div",{children:[" ","Ganancia antes de gasto:"," ",A.jsxs("strong",{children:["C$",Vh(re)]})]})]}),A.jsx("h3",{className:"font-semibold mb-2",children:"Consolidado por producto"}),A.jsxs("table",{className:"min-w-full border text-sm mb-2 shadow-2xl",children:[A.jsx("thead",{className:"bg-gray-100",children:A.jsxs("tr",{children:[A.jsx("th",{className:"border p-2",children:"Producto"}),A.jsx("th",{className:"border p-2",children:"Total libras/unidades"}),A.jsx("th",{className:"border p-2",children:"Total dinero"})]})}),A.jsxs("tbody",{children:[W.map($=>A.jsxs("tr",{className:"text-center",children:[A.jsx("td",{className:"border p-1",children:$.productName}),A.jsx("td",{className:"border p-1",children:Yy($.totalQuantity)}),A.jsxs("td",{className:"border p-1",children:["C$",Vh($.totalAmount)]})]},$.productName)),W.length===0&&A.jsx("tr",{children:A.jsx("td",{colSpan:3,className:"p-3 text-center text-gray-500",children:"Sin datos para consolidar."})})]})]})]}),A.jsxs("div",{className:"flex gap-2",children:[A.jsx("button",{onClick:ue,className:"bg-blue-600 text-white px-4 py-2 rounded hover:bg-blue-700",children:"Cerrar ventas del da"}),A.jsx("button",{onClick:z,className:"bg-green-600 text-white px-4 py-2 rounded hover:bg-green-700",children:"Descargar PDF"})]}),c&&A.jsx("p",{className:"mt-2 text-sm",children:c}),m&&A.jsx("div",{className:"fixed inset-0 bg-black/30 flex items-center justify-center p-4",children:A.jsxs("div",{className:"bg-white rounded-xl shadow-xl w-full max-w-md p-4 space-y-3",children:[A.jsx("h4",{className:"font-semibold text-lg",children:"Editar venta"}),A.jsxs("div",{className:"text-sm text-gray-500",children:[m.productName,"  ",m.userEmail]}),A.jsx("label",{className:"text-sm",children:"Cantidad"}),A.jsx("input",{type:"number",step:"0.01",className:"w-full border rounded px-2 py-1",value:B,onChange:$=>_(parseFloat($.target.value||"0"))}),A.jsx("label",{className:"text-sm",children:"Monto cobrado"}),A.jsx("input",{type:"number",step:"0.01",className:"w-full border rounded px-2 py-1",value:w,onChange:$=>y(parseFloat($.target.value||"0"))}),A.jsx("label",{className:"text-sm",children:"Cliente"}),A.jsx("input",{type:"text",className:"w-full border rounded px-2 py-1",value:S,onChange:$=>O($.target.value)}),A.jsx("label",{className:"text-sm",children:"Paga con"}),A.jsx("input",{type:"number",step:"0.01",className:"w-full border rounded px-2 py-1",value:R,onChange:$=>M(parseFloat($.target.value||"0"))}),A.jsx("label",{className:"text-sm",children:"Vuelto"}),A.jsx("input",{type:"text",className:"w-full border rounded px-2 py-1",value:I,onChange:$=>E($.target.value)}),A.jsxs("div",{className:"flex gap-2 justify-end pt-2",children:[A.jsx("button",{onClick:()=>b(null),className:"px-3 py-1 border rounded",children:"Cancelar"}),A.jsx("button",{onClick:Q,className:"px-3 py-1 rounded text-white bg-indigo-600 hover:bg-indigo-700",children:"Guardar cambios"})]})]})})]})}const Ei=t=>Number(t??0).toFixed(2),Qu=t=>Number(t??0).toFixed(3);function d$(){var y,S,O,R;const t=async M=>{if(!window.confirm(`Eliminar el cierre del ${M.date}?`))return;const I=window.confirm("Tambin quieres reabrir (revertir a FLOTANTE) las ventas vinculadas a este cierre?");try{if(I){const E=await Pt(Xt(ot(Le,"salesV2"),rr("closureId","==",M.id)));if(!E.empty){const L=rw(Le);E.forEach(D=>{L.update(Lt(Le,"salesV2",D.id),{status:"FLOTANTE",closureId:null,closureDate:null})}),await L.commit()}}await Bs(Lt(Le,"daily_closures",M.id)),(c==null?void 0:c.id)===M.id&&u(null),await b(),p(` Cierre eliminado${I?" y ventas reabiertas.":"."}`)}catch(E){console.error(E),p(" No se pudo eliminar el cierre.")}},[e,r]=P.useState(er(jV(new Date),"yyyy-MM-dd")),[n,s]=P.useState(er(new Date,"yyyy-MM-dd")),[i,a]=P.useState(!0),[o,l]=P.useState([]),[c,u]=P.useState(null),[f,p]=P.useState(""),m=P.useRef(null),b=async()=>{try{a(!0);const M=Xt(ot(Le,"daily_closures"),rr("date",">=",e),rr("date","<=",n)),I=await Pt(M),E=[];I.forEach(L=>E.push({id:L.id,...L.data()})),E.sort((L,D)=>L.date<D.date?1:L.date>D.date?-1:0),l(E)}catch(M){console.error(M),p(" Error cargando el historial.")}finally{a(!1)}};P.useEffect(()=>{b()},[]);const B=async M=>{M.preventDefault(),b()},_=P.useMemo(()=>{if(!c)return{units:0,sug:0,chg:0,diff:0,cogs:0,profit:0};const M=Number(c.totalUnits??0),I=Number(c.totalSuggested??0),E=Number(c.totalCharged??0),L=Number(c.totalDifference??(isFinite(E-I)?E-I:0)),D=Number(c.totalCOGS??0),N=Number(c.grossProfit??(isFinite(E-D)?E-D:0));return{units:M,sug:I,chg:E,diff:L,cogs:D,profit:N}},[c]),w=async()=>{if(!m.current||!c)return;const M=m.current;M.classList.add("force-pdf-colors");try{const[{default:I},{jsPDF:E}]=await Promise.all([Qo(()=>Promise.resolve().then(()=>bB),void 0),Qo(()=>Promise.resolve().then(()=>lx),void 0)]),D=(await I(M,{backgroundColor:"#ffffff",onclone:F=>{const ee=F.defaultView;F.body.querySelectorAll("*").forEach(re=>{const de=ee.getComputedStyle(re);de.color&&(re.style.color=de.color),de.backgroundColor&&de.backgroundColor!=="rgba(0, 0, 0, 0)"&&(re.style.backgroundColor=de.backgroundColor),de.borderColor&&(re.style.borderColor=de.borderColor)})}})).toDataURL("image/png"),{jsPDF:N}=await Qo(async()=>{const{jsPDF:F}=await Promise.resolve().then(()=>lx);return{jsPDF:F}},void 0),T=new N;T.addImage(D,"PNG",10,10,190,0),T.save(`cierre_${c.date}.pdf`)}finally{M.classList.remove("force-pdf-colors")}};return A.jsxs("div",{className:"max-w-7xl mx-auto p-6 bg-white rounded-2xl shadow-2xl",children:[A.jsx("h1",{className:"text-2xl font-bold mb-4",children:"Histrico de cierres"}),A.jsxs("form",{onSubmit:B,className:"flex flex-wrap items-end gap-3 mb-4",children:[A.jsxs("div",{children:[A.jsx("label",{className:"block text-sm",children:"Desde"}),A.jsx("input",{type:"date",className:"border rounded px-2 py-1",value:e,onChange:M=>r(M.target.value)})]}),A.jsxs("div",{children:[A.jsx("label",{className:"block text-sm",children:"Hasta"}),A.jsx("input",{type:"date",className:"border rounded px-2 py-1",value:n,onChange:M=>s(M.target.value)})]}),A.jsx("button",{type:"submit",className:"bg-blue-600 text-white px-4 py-2 rounded hover:bg-blue-700",children:"Aplicar"})]}),i?A.jsx("p",{children:"Cargando..."}):o.length===0?A.jsx("p",{className:"text-sm text-gray-500",children:"Sin cierres en el rango seleccionado."}):A.jsxs("table",{className:"min-w-full text-sm mb-6  shadow-lg p-4 bg-white border-gray-100",children:[A.jsx("thead",{className:"bg-gray-100",children:A.jsxs("tr",{children:[A.jsx("th",{className:"border p-2",children:"Fecha"}),A.jsx("th",{className:"border p-2",children:"Total libras/unidades"}),A.jsx("th",{className:"border p-2",children:"Monto de venta"}),A.jsx("th",{className:"border p-2",children:"Monto al costo"}),A.jsx("th",{className:"border p-2",children:"Ganancia sin gastos"}),A.jsx("th",{className:"border p-2",children:"Acciones"})]})}),A.jsx("tbody",{children:o.map(M=>A.jsxs("tr",{className:"text-center",children:[A.jsx("td",{className:"border p-1",children:M.date}),A.jsx("td",{className:"border p-1",children:Qu(M.totalUnits)}),A.jsxs("td",{className:"border p-1",children:["C$",Ei(M.totalCharged)]}),A.jsxs("td",{className:"border p-1",children:["C$",Ei(M.totalCOGS)]}),A.jsxs("td",{className:"border p-1",children:["C$",Ei(M.grossProfit??Number(M.totalCharged??0)-Number(M.totalCOGS??0))]}),A.jsx("td",{className:"border p-1",children:A.jsxs("div",{className:"flex items-center gap-2 justify-center",children:[A.jsx("button",{className:"text-xs bg-gray-800 text-white px-2 py-1 rounded hover:bg-black",onClick:()=>u(M),children:"Ver detalle"}),A.jsx("button",{className:"text-xs bg-red-600 text-white px-2 py-1 rounded hover:bg-red-700",onClick:()=>t(M),children:"Eliminar"})]})})]},M.id))})]}),c&&A.jsxs("div",{className:"mt-6 rounded-2xl shadow-lg p-4 bg-white border-solid border-2 border-gray-100",children:[A.jsxs("div",{className:"flex items-center gap-3 mb-2 ",children:[A.jsxs("h2",{className:"text-xl font-semibold",children:["Detalle ",c.date]}),A.jsx("button",{onClick:()=>u(null),className:"text-sm px-2 py-1 border rounded",children:"Cerrar"}),A.jsx("button",{onClick:w,className:"ml-auto bg-green-600 text-white px-3 py-1 rounded-2xl hover:bg-green-700 text-sm",children:"Descargar PDF"})]}),A.jsxs("div",{ref:m,className:"space-y-4",children:[A.jsx("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-2 text-sm",children:A.jsxs("div",{children:["Total Libras/Unidades: ",A.jsx("strong",{children:Qu(_.units)})]})}),A.jsxs("div",{className:"grid grid-cols-2 md:grid-cols-3 gap-2 text-sm",children:[A.jsxs("div",{children:["Monto al costo:"," ",A.jsxs("strong",{children:["C$",Ei(_.cogs)]})]}),A.jsxs("div",{children:["Ganancia sin gastos:"," ",A.jsxs("strong",{children:["C$",Ei(_.profit)]})]})]}),(y=c.salesV2)!=null&&y.length?A.jsxs(A.Fragment,{children:[A.jsx("h3",{className:"font-semibold",children:"Ventas incluidas en el cierre"}),A.jsxs("table",{className:"min-w-full border text-sm",children:[A.jsx("thead",{className:"bg-gray-100",children:A.jsxs("tr",{children:[A.jsx("th",{className:"border p-2",children:"Producto"}),A.jsx("th",{className:"border p-2",children:"Cantidad"}),A.jsx("th",{className:"border p-2",children:"Monto de ventas"}),A.jsx("th",{className:"border p-2",children:"Monto al costo"}),A.jsx("th",{className:"border p-2",children:"Fecha venta"}),A.jsx("th",{className:"border p-2",children:"Vendedor"})]})}),A.jsx("tbody",{children:c.salesV2.map((M,I)=>A.jsxs("tr",{className:"text-center",children:[A.jsx("td",{className:"border p-1",children:M.productName??"(sin nombre)"}),A.jsx("td",{className:"border p-1",children:Qu(M.quantity)}),A.jsxs("td",{className:"border p-1",children:["C$",Ei(M.amount)]}),A.jsxs("td",{className:"border p-1",children:["C$",Ei(M.cogsAmount)]}),A.jsx("td",{className:"border p-1",children:M.date??""}),A.jsx("td",{className:"border p-1",children:M.userEmail??""})]},I))})]})]}):(S=c.sales)!=null&&S.length?A.jsxs(A.Fragment,{children:[A.jsx("h3",{className:"font-semibold",children:"Ventas incluidas en el cierre"}),A.jsxs("table",{className:"min-w-full border text-sm",children:[A.jsx("thead",{className:"bg-gray-100",children:A.jsxs("tr",{children:[A.jsx("th",{className:"border p-2",children:"Producto"}),A.jsx("th",{className:"border p-2",children:"Cantidad"}),A.jsx("th",{className:"border p-2",children:"Monto"}),A.jsx("th",{className:"border p-2",children:"Vendedor"}),A.jsx("th",{className:"border p-2",children:"Cliente"}),A.jsx("th",{className:"border p-2",children:"Paga con"}),A.jsx("th",{className:"border p-2",children:"Vuelto"})]})}),A.jsx("tbody",{children:c.sales.map((M,I)=>A.jsxs("tr",{className:"text-center",children:[A.jsx("td",{className:"border p-1",children:M.productName??"(sin nombre)"}),A.jsx("td",{className:"border p-1",children:Qu(M.quantity)}),A.jsxs("td",{className:"border p-1",children:["C$",Ei(M.amount)]}),A.jsx("td",{className:"border p-1",children:M.userEmail??""}),A.jsx("td",{className:"border p-1",children:M.clientName??""}),A.jsxs("td",{className:"border p-1",children:["C$",Ei(M.amountReceived)]}),A.jsx("td",{className:"border p-1",children:typeof M.change=="number"?Ei(M.change):M.change??"0"})]},I))})]})]}):(O=c.products)!=null&&O.length?A.jsxs(A.Fragment,{children:[A.jsx("h3",{className:"font-semibold",children:"Productos en el cierre"}),A.jsxs("table",{className:"min-w-full border text-sm",children:[A.jsx("thead",{className:"bg-gray-100",children:A.jsxs("tr",{children:[A.jsx("th",{className:"border p-2",children:"Producto"}),A.jsx("th",{className:"border p-2",children:"Cantidad"}),A.jsx("th",{className:"border p-2",children:"Monto"})]})}),A.jsx("tbody",{children:c.products.map((M,I)=>A.jsxs("tr",{className:"text-center",children:[A.jsx("td",{className:"border p-1",children:M.productName}),A.jsx("td",{className:"border p-1",children:Qu(M.quantity)}),A.jsxs("td",{className:"border p-1",children:["C$",Ei(M.amount)]})]},I))})]})]}):A.jsx("p",{className:"text-sm text-gray-500",children:"Sin detalle de ventas en este cierre."}),(R=c.productSummary)!=null&&R.length?A.jsxs(A.Fragment,{children:[A.jsx("h3",{className:"font-semibold",children:"Consolidado por producto"}),A.jsxs("table",{className:"min-w-full border text-sm",children:[A.jsx("thead",{className:"bg-gray-100",children:A.jsxs("tr",{children:[A.jsx("th",{className:"border p-2",children:"Producto"}),A.jsx("th",{className:"border p-2",children:"Total libras/unidades"}),A.jsx("th",{className:"border p-2",children:"Total dinero"})]})}),A.jsx("tbody",{children:c.productSummary.map((M,I)=>A.jsxs("tr",{className:"text-center",children:[A.jsx("td",{className:"border p-1",children:M.productName}),A.jsx("td",{className:"border p-1",children:Qu(M.totalQuantity)}),A.jsxs("td",{className:"border p-1",children:["C$",Ei(M.totalAmount)]})]},I))})]})]}):null]})]}),f&&A.jsx("p",{className:"mt-3 text-sm",children:f})]})}function h$(){const[t,e]=P.useState(""),[r,n]=P.useState(""),[s,i]=P.useState(""),[a,o]=P.useState(!1),[l,c]=P.useState("vendedor_pollo"),[u,f]=P.useState(""),[p,m]=P.useState([]),[b,B]=P.useState(!0),[_,w]=P.useState(null),[y,S]=P.useState("vendedor_pollo"),[O,R]=P.useState(!1),M=ce=>!ce||ce==="vendedor"?"vendedor_pollo":ce==="admin"||ce==="vendedor_pollo"||ce==="vendedor_ropa"?ce:"vendedor_pollo",I=async()=>{B(!0);const ce=await Pt(ot(Le,"users")),re=[];ce.forEach(de=>{const W=de.data();re.push({id:de.id,email:W.email??"",name:W.name??"",role:M(W.role)})}),m(re),B(!1)};P.useEffect(()=>{I()},[]);const E=()=>{e(""),n(""),i(""),c("vendedor_pollo")},L=async ce=>{if(ce.preventDefault(),f(""),s.length<4){f(" La contrasea debe tener al menos 4 caracteres.");return}if(!t.trim()){f(" El nombre es obligatorio.");return}try{const re=mb(),de=pb(re.options,"Secondary"),W=s4(de),ue=await GR(W,r,s);await rU(Lt(ot(Le,"users"),ue.user.uid),{email:r,name:t.trim(),role:M(l)}),await zF(W),await OD(de);const ae=M(l);m(Ee=>[{id:ue.user.uid,email:r,name:t.trim(),role:ae},...Ee]),f(" Usuario creado correctamente."),E(),R(!1)}catch(re){console.error(re),f(" Error al crear el usuario: "+re.message)}},D=ce=>{w(ce.id),S(M(ce.role))},N=()=>{w(null),S("vendedor_pollo")},T=async()=>{if(!_)return;const ce=Lt(Le,"users",_),re=M(y);await rn(ce,{role:re}),m(de=>de.map(W=>W.id===_?{...W,role:re}:W)),N()},F=async ce=>{confirm("Eliminar este usuario del listado?")&&(await Bs(Lt(Le,"users",ce)),m(de=>de.filter(W=>W.id!==ce)))},ee=ce=>{const re=ce==="admin"?"admin":ce==="vendedor_ropa"?"vendedor_ropa":ce==="vendedor_pollo"||ce==="vendedor"?"vendedor_pollo":ce,de=re==="admin"?"bg-blue-100 text-blue-700":re==="vendedor_ropa"?"bg-indigo-100 text-indigo-700":"bg-green-100 text-green-700";return A.jsx("span",{className:`px-2 py-0.5 rounded text-xs ${de}`,children:re})};return A.jsxs("div",{className:"max-w-6xl mx-auto",children:[A.jsxs("div",{className:"flex items-center justify-between mb-3",children:[A.jsx("h2",{className:"text-2xl font-bold",children:"Usuarios"}),A.jsx("button",{className:"px-3 py-2 rounded bg-purple-600 text-white hover:bg-purple-700",onClick:()=>R(!0),type:"button",children:"Crear usuario"})]}),A.jsx("div",{className:"bg-white p-2 rounded shadow border overflow-x-auto",children:A.jsxs("table",{className:"min-w-full text-sm",children:[A.jsx("thead",{className:"bg-gray-100",children:A.jsxs("tr",{children:[A.jsx("th",{className:"p-2 border",children:"Nombre"}),A.jsx("th",{className:"p-2 border",children:"Email"}),A.jsx("th",{className:"p-2 border",children:"Rol"}),A.jsx("th",{className:"p-2 border",children:"Acciones"})]})}),A.jsx("tbody",{children:b?A.jsx("tr",{children:A.jsx("td",{colSpan:4,className:"p-4 text-center",children:"Cargando"})}):p.length===0?A.jsx("tr",{children:A.jsx("td",{colSpan:4,className:"p-4 text-center",children:"Sin usuarios"})}):p.map(ce=>{const re=_===ce.id;return A.jsxs("tr",{className:"text-center",children:[A.jsx("td",{className:"p-2 border",children:ce.name||""}),A.jsx("td",{className:"p-2 border",children:ce.email}),A.jsx("td",{className:"p-2 border",children:re?A.jsxs("select",{className:"w-full border p-1 rounded",value:y,onChange:de=>S(de.target.value),children:[A.jsx("option",{value:"admin",children:"Admin"}),A.jsx("option",{value:"vendedor_pollo",children:"Vendedor Pollo"}),A.jsx("option",{value:"vendedor_ropa",children:"Vendedor Ropa"})]}):ee(ce.role)}),A.jsx("td",{className:"p-2 border space-x-2",children:re?A.jsxs(A.Fragment,{children:[A.jsx("button",{className:"px-2 py-1 rounded text-white bg-blue-600 hover:bg-blue-700",onClick:T,children:"Guardar"}),A.jsx("button",{className:"px-2 py-1 rounded bg-gray-200 hover:bg-gray-300",onClick:N,children:"Cancelar"})]}):A.jsxs(A.Fragment,{children:[A.jsx("button",{className:"px-2 py-1 rounded text-white bg-yellow-600 hover:bg-yellow-700",onClick:()=>D(ce),children:"Editar"}),A.jsx("button",{className:"px-2 py-1 rounded text-white bg-red-600 hover:bg-red-700",onClick:()=>F(ce.id),children:"Eliminar"})]})})]},ce.id)})})]})}),u&&A.jsx("p",{className:"text-sm mt-2",children:u}),O&&A.jsxs("div",{className:"fixed inset-0 z-[70] flex items-center justify-center",children:[A.jsx("div",{className:"absolute inset-0 bg-black/40",onClick:()=>R(!1)}),A.jsxs("div",{className:"relative bg-white rounded-lg shadow-2xl border w-[96%] max-w-lg max-h-[92vh] overflow-auto p-4",children:[A.jsxs("div",{className:"flex items-center justify-between mb-2",children:[A.jsx("h3",{className:"text-lg font-bold",children:"Registrar nuevo usuario"}),A.jsx("button",{className:"px-3 py-1 rounded bg-gray-200 hover:bg-gray-300",onClick:()=>R(!1),type:"button",children:"Cerrar"})]}),A.jsxs("form",{onSubmit:L,className:"space-y-4",children:[A.jsxs("div",{className:"space-y-1",children:[A.jsx("label",{className:"block text-sm font-semibold text-gray-700",children:"Nombre completo"}),A.jsx("input",{type:"text",className:"w-full border border-gray-300 p-2 rounded focus:ring-2 focus:ring-purple-400",value:t,onChange:ce=>e(ce.target.value),required:!0})]}),A.jsxs("div",{className:"space-y-1",children:[A.jsx("label",{className:"block text-sm font-semibold text-gray-700",children:"Correo electrnico"}),A.jsx("input",{type:"email",className:"w-full border border-gray-300 p-2 rounded focus:ring-2 focus:ring-purple-400",value:r,onChange:ce=>n(ce.target.value),required:!0})]}),A.jsxs("div",{className:"space-y-1 relative",children:[A.jsx("label",{className:"block text-sm font-semibold text-gray-700",children:"Contrasea (mnimo 6 caracteres)"}),A.jsx("input",{type:a?"text":"password",minLength:6,className:"w-full border border-gray-300 p-2 rounded focus:ring-2 focus:ring-purple-400 pr-10",value:s,onChange:ce=>i(ce.target.value),required:!0}),A.jsx("button",{type:"button",className:"absolute right-2 top-8 text-sm text-gray-600 hover:text-gray-800",onClick:()=>o(ce=>!ce),children:a?"":""})]}),A.jsxs("div",{className:"space-y-1",children:[A.jsx("label",{className:"block text-sm font-semibold text-gray-700",children:"Rol"}),A.jsxs("select",{className:"w-full border p-2 rounded",value:l,onChange:ce=>c(ce.target.value),children:[A.jsx("option",{value:"admin",children:"Admin"}),A.jsx("option",{value:"vendedor_pollo",children:"Vendedor Pollo"}),A.jsx("option",{value:"vendedor_ropa",children:"Vendedor Ropa"})]})]}),A.jsxs("div",{className:"flex justify-end gap-2 pt-2",children:[A.jsx("button",{type:"button",className:"px-4 py-2 rounded bg-gray-200 hover:bg-gray-300",onClick:()=>R(!1),children:"Cancelar"}),A.jsx("button",{className:"bg-green-600 text-white px-4 py-2 rounded hover:bg-green-700",children:"Crear usuario"})]})]}),u&&A.jsx("p",{className:"text-sm mt-2",children:u})]})]})]})}const f$=t=>`C$${(Number(t)||0).toFixed(2)}`;function p$(){const[t,e]=P.useState(""),[r,n]=P.useState(0),[s,i]=P.useState(""),[a,o]=P.useState(""),[l,c]=P.useState(""),[u,f]=P.useState([]),[p,m]=P.useState(!0),[b,B]=P.useState(!1),[_,w]=P.useState(null),[y,S]=P.useState(""),[O,R]=P.useState(""),[M,I]=P.useState(""),[E,L]=P.useState(0),[D,N]=P.useState(!1),T=async()=>{m(!0);const ae=await Pt(ot(Le,"products")),Ee=[];ae.forEach(Q=>{const k=Q.data();Ee.push({id:Q.id,name:k.name??"",price:Number(k.price??0),category:k.category??"",measurement:k.measurement??"",active:k.active!==!1})}),f(Ee),m(!1)};P.useEffect(()=>{T()},[]);const F=async ae=>{if(ae.preventDefault(),i(""),!t||r<=0||!l){i(" Completa nombre, precio vlido y unidad de medida");return}try{const Ee={name:t,price:parseFloat(r.toFixed(2)),category:a,measurement:l,active:!0},Q=await qn(ot(Le,"products"),Ee);f(k=>[{id:Q.id,...Ee},...k]),i(" Producto registrado con exito."),e(""),n(0),c(""),o(""),N(!1)}catch(Ee){i(" Error: "+Ee.message)}},ee=ae=>{w(ae.id),S(ae.name),R(ae.category),I(ae.measurement),L(ae.price)},ce=()=>{w(null),S(""),R(""),I(""),L(0)},re=async()=>{if(!_)return;const ae=Lt(Le,"products",_);await rn(ae,{name:y,category:O,measurement:M,price:parseFloat((E||0).toFixed(2))}),f(Ee=>Ee.map(Q=>Q.id===_?{...Q,name:y,category:O,measurement:M,price:parseFloat((E||0).toFixed(2))}:Q)),ce()},de=async ae=>{const Ee=Lt(Le,"products",ae.id),Q=ae.active===!1;await rn(Ee,{active:Q}),f(k=>k.map(z=>z.id===ae.id?{...z,active:Q}:z))},W=async ae=>{const Ee=Xt(ot(Le,"inventory_batches"),rr("productId","==",ae),eU(1));if(!(await Pt(Ee)).empty){alert(`No se puede eliminar: hay lotes asociados a este producto.
Sugerencia: desactvalo para ocultarlo.`);return}confirm("Eliminar este producto definitivamente?")&&(await Bs(Lt(Le,"products",ae)),f(z=>z.filter(te=>te.id!==ae)))},ue=b?u:u.filter(ae=>ae.active!==!1);return A.jsxs("div",{className:"max-w-6xl mx-auto",children:[A.jsxs("div",{className:"flex items-center justify-between mb-4",children:[A.jsx("h2",{className:"text-2xl font-bold",children:"Productos"}),A.jsxs("button",{className:"inline-flex items-center gap-2 bg-green-600 text-white px-3 py-2 rounded hover:bg-green-700",onClick:()=>{i(""),N(!0)},children:[A.jsx("span",{className:"inline-block bg-green-700/40 rounded-full p-1",children:A.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-4 w-4",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:A.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 4v16m8-8H4"})})}),"Nuevo producto"]})]}),D&&A.jsxs("div",{className:"fixed inset-0 z-50 flex items-center justify-center",children:[A.jsx("div",{className:"absolute inset-0 bg-black/50",onClick:()=>N(!1)}),A.jsxs("div",{className:"relative z-10 w-[95%] max-w-lg bg-white rounded-lg shadow-2xl border p-5",children:[A.jsxs("div",{className:"flex items-center justify-between mb-3",children:[A.jsxs("h3",{className:"text-lg font-bold text-green-700 flex items-center gap-2",children:[A.jsx("span",{className:"inline-block bg-green-100 text-green-700 rounded-full p-2",children:A.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-5 w-5",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:A.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 4v16m8-8H4"})})}),"Registrar producto"]}),A.jsx("button",{className:"px-3 py-1 rounded bg-gray-200 hover:bg-gray-300",onClick:()=>N(!1),children:"Cerrar"})]}),A.jsxs("form",{onSubmit:F,className:"space-y-4",children:[A.jsxs("div",{className:"space-y-1",children:[A.jsx("label",{className:"block text-sm font-semibold text-gray-700",children:"Categora"}),A.jsxs("select",{value:a,onChange:ae=>o(ae.target.value),className:"w-full border border-gray-300 p-2 rounded focus:ring-2 focus:ring-green-400",children:[A.jsx("option",{value:"",children:"Selecciona"}),A.jsx("option",{value:"pollo",children:"Pollo"}),A.jsx("option",{value:"cerdo",children:"Cerdo"}),A.jsx("option",{value:"huevo",children:"Huevos"}),A.jsx("option",{value:"ropa",children:"Ropa"}),A.jsx("option",{value:"otros",children:"Otros"})]})]}),A.jsxs("div",{className:"space-y-1",children:[A.jsx("label",{className:"block text-sm font-semibold text-gray-700",children:"Nombre del producto"}),A.jsx("input",{type:"text",className:"w-full border p-2 rounded",value:t,onChange:ae=>e(ae.target.value)})]}),A.jsxs("div",{className:"space-y-1",children:[A.jsx("label",{className:"block text-sm font-semibold text-gray-700",children:"Tipo de unidad de medida"}),A.jsxs("select",{value:l,onChange:ae=>c(ae.target.value),className:"w-full border border-gray-300 p-2 rounded focus:ring-2 focus:ring-green-400",children:[A.jsx("option",{value:"",children:"Selecciona"}),A.jsx("option",{value:"lb",children:"Libra"}),A.jsx("option",{value:"kg",children:"Kilogramo"}),A.jsx("option",{value:"unidad",children:"Unidad"})]})]}),A.jsxs("div",{children:[A.jsx("label",{className:"block text-sm",children:"Precio por unidad (ej: 55.50)"}),A.jsx("input",{type:"number",step:"0.01",className:"w-full border p-2 rounded",value:Number.isNaN(r)?"":r,onChange:ae=>n(parseFloat(ae.target.value)),onFocus:ae=>ae.target.value==="0"?n(NaN):null})]}),A.jsx("button",{type:"submit",className:"bg-blue-600 text-white px-4 py-2 rounded hover:bg-blue-700 w-full",children:"Agregar producto"}),s&&A.jsx("p",{className:"text-sm mt-2",children:s})]})]})]}),A.jsxs("div",{className:"flex items-center justify-between mt-6 mb-2",children:[A.jsx("h3",{className:"text-lg font-semibold p-2",children:"Productos"}),A.jsxs("label",{className:"flex items-center gap-2 text-sm",children:[A.jsx("input",{type:"checkbox",checked:b,onChange:ae=>B(ae.target.checked)}),"Mostrar inactivos"]})]}),A.jsx("div",{className:"bg-white p-2 rounded shadow border overflow-x-auto",children:A.jsxs("table",{className:"min-w-full text-sm",children:[A.jsx("thead",{className:"bg-gray-100",children:A.jsxs("tr",{children:[A.jsx("th",{className:"p-2 border",children:"Nombre"}),A.jsx("th",{className:"p-2 border",children:"Categora"}),A.jsx("th",{className:"p-2 border",children:"Unidad"}),A.jsx("th",{className:"p-2 border",children:"Precio"}),A.jsx("th",{className:"p-2 border",children:"Estado"}),A.jsx("th",{className:"p-2 border",children:"Acciones"})]})}),A.jsx("tbody",{children:p?A.jsx("tr",{children:A.jsx("td",{colSpan:6,className:"p-4 text-center",children:"Cargando"})}):ue.length===0?A.jsx("tr",{children:A.jsx("td",{colSpan:6,className:"p-4 text-center",children:"Sin productos"})}):ue.map(ae=>{const Ee=_===ae.id,Q=ae.active!==!1;return A.jsxs("tr",{className:"text-center",children:[A.jsx("td",{className:"p-2 border",children:Ee?A.jsx("input",{className:"w-full border p-1 rounded",value:y,onChange:k=>S(k.target.value)}):ae.name}),A.jsx("td",{className:"p-2 border",children:Ee?A.jsxs("select",{className:"w-full border p-1 rounded",value:O,onChange:k=>R(k.target.value),children:[A.jsx("option",{value:"",children:"Selecciona"}),A.jsx("option",{value:"pollo",children:"Pollo"}),A.jsx("option",{value:"cerdo",children:"Cerdo"}),A.jsx("option",{value:"huevo",children:"Huevos"}),A.jsx("option",{value:"ropa",children:"Ropa"}),A.jsx("option",{value:"otros",children:"Otros"})]}):ae.category}),A.jsx("td",{className:"p-2 border",children:Ee?A.jsxs("select",{className:"w-full border p-1 rounded",value:M,onChange:k=>I(k.target.value),children:[A.jsx("option",{value:"",children:"Selecciona"}),A.jsx("option",{value:"lb",children:"Libra"}),A.jsx("option",{value:"kg",children:"Kilogramo"}),A.jsx("option",{value:"unidad",children:"Unidad"})]}):ae.measurement}),A.jsx("td",{className:"p-2 border",children:Ee?A.jsx("input",{type:"number",step:"0.01",className:"w-full border p-1 rounded text-right",value:Number.isNaN(E)?"":E,onChange:k=>L(parseFloat(k.target.value))}):f$(ae.price)}),A.jsx("td",{className:"p-2 border",children:A.jsx("span",{className:`px-2 py-0.5 rounded text-xs ${Q?"bg-green-100 text-green-700":"bg-gray-200 text-gray-700"}`,children:Q?"Activo":"Inactivo"})}),A.jsx("td",{className:"p-2 border space-x-2",children:Ee?A.jsxs(A.Fragment,{children:[A.jsx("button",{className:"px-2 py-1 rounded text-white bg-blue-600 hover:bg-blue-700",onClick:re,children:"Guardar"}),A.jsx("button",{className:"px-2 py-1 rounded bg-gray-200 hover:bg-gray-300",onClick:ce,children:"Cancelar"})]}):A.jsxs(A.Fragment,{children:[A.jsx("button",{className:"px-2 py-1 rounded text-white bg-yellow-600 hover:bg-yellow-700",onClick:()=>ee(ae),children:"Editar"}),A.jsx("button",{className:`px-2 py-1 rounded ${Q?"bg-gray-600 hover:bg-gray-700 text-white":"bg-green-600 hover:bg-green-700 text-white"}`,onClick:()=>de(ae),children:Q?"Desactivar":"Activar"}),A.jsx("button",{className:"px-2 py-1 rounded text-white bg-red-600 hover:bg-red-700",onClick:()=>W(ae.id),children:"Eliminar"})]})})]},ae.id)})})]})})]})}const es=[];for(let t=0;t<256;++t)es.push((t+256).toString(16).slice(1));function m$(t,e=0){return(es[t[e+0]]+es[t[e+1]]+es[t[e+2]]+es[t[e+3]]+"-"+es[t[e+4]]+es[t[e+5]]+"-"+es[t[e+6]]+es[t[e+7]]+"-"+es[t[e+8]]+es[t[e+9]]+"-"+es[t[e+10]]+es[t[e+11]]+es[t[e+12]]+es[t[e+13]]+es[t[e+14]]+es[t[e+15]]).toLowerCase()}let Zy;const g$=new Uint8Array(16);function v$(){if(!Zy){if(typeof crypto>"u"||!crypto.getRandomValues)throw new Error("crypto.getRandomValues() not supported. See https://github.com/uuidjs/uuid#getrandomvalues-not-supported");Zy=crypto.getRandomValues.bind(crypto)}return Zy(g$)}const w$=typeof crypto<"u"&&crypto.randomUUID&&crypto.randomUUID.bind(crypto),_N={randomUUID:w$};function y$(t,e,r){var s;if(_N.randomUUID&&!t)return _N.randomUUID();t=t||{};const n=t.random??((s=t.rng)==null?void 0:s.call(t))??v$();if(n.length<16)throw new Error("Random bytes length must be >= 16");return n[6]=n[6]&15|64,n[8]=n[8]&63|128,m$(n)}async function x$(t,e,r,n=!1){if(r<=0)return{allocations:[],avgUnitCost:0,cogsAmount:0};const s=ot(t,"inventory_batches"),i=Xt(s,rr("productName","==",e)),l=(await Pt(i)).docs.map(c=>({id:c.id,data:c.data()})).sort((c,u)=>{var B,_;const f=c.data.date??"",p=u.data.date??"";if(f!==p)return f<p?-1:1;const m=((B=c.data.createdAt)==null?void 0:B.seconds)??0,b=((_=u.data.createdAt)==null?void 0:_.seconds)??0;return m-b}).map(c=>Lt(t,"inventory_batches",c.id));return Al(t,async c=>{let u=Number(r);const f=[],p=await Promise.all(l.map(_=>c.get(_)));for(let _=0;_<l.length&&u>0;_++){const w=l[_],y=p[_];if(!y.exists())continue;const S=y.data(),O=Number(S.quantity??0),R=Number(S.remaining??O??0),M=Number(S.purchasePrice??0);if(R<=0)continue;const I=Math.min(R,u),E=Number((R-I).toFixed(3));c.update(w,{remaining:E}),f.push({batchId:w.id,qty:I,unitCost:M,lineCost:Number((I*M).toFixed(2))}),u=Number((u-I).toFixed(3))}if(u>0&&!n)throw new Error(`Stock insuficiente para "${e}". Faltan ${u} unidades.`);const m=Number(f.reduce((_,w)=>_+w.lineCost,0).toFixed(2)),b=f.reduce((_,w)=>_+w.qty,0),B=b>0?Number((m/b).toFixed(4)):0;return{allocations:f,avgUnitCost:B,cogsAmount:m}})}const j3=3,b$=.5*10**-j3;function is(t){const e=Number(t??0);return Number(e.toFixed(j3))}function e1(t,e){return is((t??0)+(e??0))}function gg(t,e){return is(t)+b$>=is(e)}async function B$(t,e){const r=await Pt(ot(Le,"inventory_batches")),n=t.trim().toLowerCase();let s=0;for(const i of r.docs){const a=i.data();(a.productName||"").trim().toLowerCase()===n&&a.productId!==e&&(await rn(Lt(Le,"inventory_batches",i.id),{productId:e}),s++)}return s}function NN({user:t}){const[e,r]=P.useState([]),[n,s]=P.useState([]),[i,a]=P.useState(""),[o,l]=P.useState(er(new Date,"yyyy-MM-dd")),[c,u]=P.useState(""),[f,p]=P.useState([]),[m,b]=P.useState(0),[B,_]=P.useState(0),[w,y]=P.useState("0"),[S,O]=P.useState(""),[R,M]=P.useState(!1),[I,E]=P.useState({}),L=k=>Math.round(k*100)/100,D=k=>is(k).toFixed(3),N=async k=>{if(!k)return 0;const z=Xt(ot(Le,"inventory_batches"),rr("productId","==",k)),te=await Pt(z);let $=0;return te.forEach(ne=>{const X=ne.data();$=e1($,Number(X.remaining||0))}),is($)},T=async k=>{if(!k)return 0;const z=await Pt(ot(Le,"inventory_batches"));let te=0;return z.forEach($=>{const ne=$.data();(ne.productName||"").trim().toLowerCase()===k.trim().toLowerCase()&&(te=e1(te,Number(ne.remaining||0)))}),is(te)};P.useEffect(()=>{(async()=>{const k=await Pt(ot(Le,"products")),z=[];k.forEach(te=>{const $=te.data();($==null?void 0:$.active)!==!1&&z.push({id:te.id,productName:$.name??$.productName??"(sin nombre)",price:Number($.price??0),measurement:$.measurement??"(sin unidad)",category:$.category??"(sin categora)"})}),r(z)})()},[]),P.useEffect(()=>{(async()=>{const k=await Pt(ot(Le,"inventory_batches")),z={};k.forEach(te=>{const $=te.data(),ne=$.productId,X=Number($.remaining||0);ne&&(z[ne]=e1(z[ne]||0,X))}),Object.keys(z).forEach(te=>z[te]=is(z[te])),E(z)})()},[]),P.useEffect(()=>{(async()=>{const k=await Pt(ot(Le,"users")),z=[];k.forEach(te=>{const $=te.data();z.push({id:te.id,email:$.email??"(sin email)",role:$.role??"USER"})}),s(z)})()},[]);const F=async()=>{if(!i)return;const k=e.find(te=>te.id===i);if(!k)return;if(f.some(te=>te.productId===k.id)){a("");return}const z=await N(k.id);p(te=>[...te,{productId:k.id,productName:k.productName,measurement:k.measurement,price:Number(k.price||0),stock:z,qty:0,discount:0}]),a("")},ee=k=>{p(z=>z.filter(te=>te.productId!==k))},ce=async(k,z)=>{p(te=>te.map($=>{if($.productId!==k)return $;const ne=($.measurement||"").toLowerCase()!=="lb",X=z===""?0:Number(z),he=ne?Math.max(0,Math.round(X)):is(X);return{...$,qty:he}}))},re=(k,z)=>{p(te=>te.map($=>{if($.productId!==k)return $;const ne=Math.max(0,Math.floor(Number(z||0)));return{...$,discount:ne}}))},de=P.useMemo(()=>{let k=0;for(const z of f){const te=Number(z.price||0)*Number(z.qty||0),$=Math.max(0,te-Math.max(0,Number(z.discount||0)));k+=$}return L(k)},[f]);P.useEffect(()=>{b(de)},[de]),P.useEffect(()=>{const k=Number(B)||0,z=Number(m)||0;y((k-z).toFixed(2))},[B,m]);const W=k=>{k.key===","&&(k.preventDefault(),k.target.value+=".")},ue=async()=>{if(f.length===0)return"Agrega al menos un producto.";for(const k of f){if(!k.qty||k.qty<=0)return`Cantidad invlida para "${k.productName}".`;const z=await N(k.productId);if(!gg(z,k.qty)){const te=await T(k.productName);if(gg(te,0)&&!gg(z,0)){const $=await B$(k.productName,k.productId),ne=await N(k.productId);if(!gg(ne,k.qty))return`Stock insuficiente tras corregir ${$} lote(s) para "${k.productName}".`}else return`Stock insuficiente para "${k.productName}". Disponible: ${z}`}}return null},ae=async k=>{var te,$;k.preventDefault(),O("");const z=await ue();if(z){O(" "+z);return}try{M(!0);const ne=[];for(const ge of f){const Ce=ge.qty,{allocations:Te,avgUnitCost:Fe,cogsAmount:oe}=await x$(Le,ge.productName,Ce,!1),le=Number(ge.price||0)*Number(Ce||0),G=Math.max(0,Number(ge.discount||0)),Re=Math.max(0,le-G);ne.push({productId:ge.productId,productName:ge.productName,measurement:ge.measurement,unitPrice:Number(ge.price||0),qty:Ce,discount:G,lineTotal:L(le),lineFinal:L(Re),allocations:Te,avgUnitCost:Fe,cogsAmount:oe})}const X=ne.reduce((ge,Ce)=>ge+Ce.lineFinal,0),he=ne.reduce((ge,Ce)=>ge+Number(Ce.qty||0),0);await qn(ot(Le,"salesV2"),{id:y$(),quantity:he,amount:X,amountCharged:X,amountReceived:Number(B)||0,change:w,clientName:c.trim(),timestamp:Dt.now(),date:o,userEmail:((te=n[0])==null?void 0:te.email)??"sin usuario",vendor:(($=n[0])==null?void 0:$.role)??"sin usuario",status:"FLOTANTE",items:ne,itemsTotal:X}),O(" Venta registrada y asignada a inventario (FIFO)."),p([]),a(""),b(0),_(0),y("0"),u(""),l(er(new Date,"yyyy-MM-dd"))}catch(ne){console.error(ne),O(` ${(ne==null?void 0:ne.message)||"Error al registrar la venta."}`)}finally{M(!1)}},Ee=P.useMemo(()=>new Set(f.map(k=>k.productId)),[f]),Q=P.useMemo(()=>e.filter(k=>(I[k.id]||0)>0),[e,I]);return A.jsxs("div",{className:"relative",children:[A.jsxs("form",{onSubmit:ae,className:`w-full mx-auto bg-white rounded-2xl shadow-2xl\r
                 p-4 sm:p-6 md:p-8\r
                 max-w-5xl space-y-4`,children:[A.jsx("div",{className:"flex items-center justify-between",children:A.jsx("h2",{className:"text-xl sm:text-2xl font-bold text-blue-700 whitespace-nowrap",children:"Registrar venta (Pollo)"})}),A.jsxs("div",{className:"space-y-1",children:[A.jsx("label",{className:"block text-sm font-semibold text-gray-700",children:"Producto | Precio por Libra/Unidad"}),A.jsxs("div",{className:"flex gap-2",children:[A.jsxs("select",{className:"flex-1 border border-gray-300 p-2 rounded-2xl shadow-2xl focus:ring-2 focus:ring-blue-400",value:i,onChange:k=>a(k.target.value),children:[A.jsx("option",{value:"",disabled:!0,children:"Selecciona un producto"}),Q.map(k=>A.jsxs("option",{value:k.id,disabled:Ee.has(k.id),title:Ee.has(k.id)?"Ya est en la lista":`Disponible: ${D(I[k.id]||0)}`,children:[k.productName,"  ",k.measurement,"  C$ ",k.price," (disp:"," ",D(I[k.id]||0),")"]},k.id))]}),A.jsx("button",{type:"button",onClick:F,disabled:!i||Ee.has(i),className:"px-3 py-2 rounded-2xl shadow-2xl bg-blue-600 text-white hover:bg-blue-700 disabled:opacity-50",children:"Agregar"})]})]}),A.jsxs("div",{className:"grid md:grid-cols-2 gap-3",children:[A.jsxs("div",{className:"space-y-1",children:[A.jsx("label",{className:"block text-sm font-semibold text-gray-700",children:"Fecha de la venta"}),A.jsx("input",{type:"date",className:"w-full border border-gray-300 p-2 rounded-2xl shadow-2xl focus:ring-2 focus:ring-blue-400",value:o,onChange:k=>l(k.target.value)})]}),A.jsxs("div",{className:"space-y-1",children:[A.jsx("label",{className:"block text-sm font-semibold text-gray-700",children:"Cliente"}),A.jsx("input",{className:"w-full border border-gray-300 p-2 rounded-2xl shadow-2xl",value:c,onChange:k=>u(k.target.value),placeholder:"Opcional"})]})]}),A.jsx("div",{className:"rounded border overflow-x-auto shadow-2xl",children:A.jsxs("table",{className:"min-w-full text-sm r",children:[A.jsx("thead",{className:"bg-gray-100",children:A.jsxs("tr",{className:"text-center",children:[A.jsx("th",{className:"p-2 border whitespace-nowrap",children:"Producto"}),A.jsx("th",{className:"p-2 border whitespace-nowrap",children:"Precio"}),A.jsx("th",{className:"p-2 border whitespace-nowrap",children:"Existencias"}),A.jsx("th",{className:"p-2 border whitespace-nowrap",children:"Cantidad"}),A.jsx("th",{className:"p-2 border whitespace-nowrap",children:"Descuento"}),A.jsx("th",{className:"p-2 border whitespace-nowrap",children:"Monto"}),A.jsx("th",{className:"p-2 border",children:""})]})}),A.jsx("tbody",{children:f.length===0?A.jsx("tr",{children:A.jsx("td",{colSpan:7,className:"p-4 text-center text-gray-500",children:"Agrega productos al carrito."})}):f.map(k=>{const z=Number(k.price||0)*Number(k.qty||0),te=Math.max(0,z-Math.max(0,Number(k.discount||0))),$=(k.measurement||"").toLowerCase()!=="lb",ne=is(Number(k.stock)-Number(k.qty||0));return A.jsxs("tr",{className:"text-center",children:[A.jsxs("td",{className:"p-2 border whitespace-nowrap",children:[k.productName,"  ",k.measurement]}),A.jsxs("td",{className:"p-2 border whitespace-nowrap",children:["C$ ",L(k.price).toFixed(2)]}),A.jsx("td",{className:"p-2 border whitespace-nowrap",children:ne.toFixed(3)}),A.jsx("td",{className:"p-2 border",children:A.jsx("input",{type:"number",step:$?1:.01,inputMode:$?"numeric":"decimal",className:"w-28 border p-1 rounded text-right",value:k.qty===0?"":k.qty,onKeyDown:W,onChange:X=>ce(k.productId,X.target.value),placeholder:"0",title:"Cantidad"})}),A.jsx("td",{className:"p-2 border",children:A.jsx("input",{type:"number",step:1,min:0,className:"w-24 border p-1 rounded text-right",value:k.discount===0?"":k.discount,onChange:X=>re(k.productId,X.target.value),inputMode:"numeric",placeholder:"0",title:"Descuento (entero C$)"})}),A.jsxs("td",{className:"p-2 border whitespace-nowrap",children:["C$ ",L(te).toFixed(2)]}),A.jsx("td",{className:"p-2 border",children:A.jsx("button",{type:"button",className:"px-2 py-1 rounded bg-red-100 text-red-600 hover:bg-red-200",onClick:()=>ee(k.productId),title:"Quitar",children:""})})]},k.productId)})})]})}),A.jsxs("div",{className:"space-y-1 ",children:[A.jsx("label",{className:"block text-sm font-semibold text-gray-700 ",children:" Monto total"}),A.jsx("input",{type:"text",className:"w-full border border-gray-300 p-2 rounded-2xl shadow-2xl bg-gray-100",value:`C$ ${m.toFixed(2)}`,readOnly:!0,title:"Suma de (precio  cantidad  descuento) de cada producto."})]}),A.jsxs("div",{className:"grid grid-cols-2 gap-x-3",children:[A.jsxs("div",{className:"space-y-1",children:[A.jsx("label",{className:"block text-sm font-semibold text-gray-700",children:"Monto recibido"}),A.jsx("input",{type:"number",step:"0.01",inputMode:"decimal",className:"w-full border border-gray-300 p-2 rounded-2xl shadow-2xl",value:B===0?"":B,onChange:k=>_(Number(k.target.value||0))})]}),A.jsxs("div",{className:"space-y-1",children:[A.jsx("label",{className:"block text-sm font-semibold text-gray-700",children:"Cambio"}),A.jsx("input",{type:"text",className:"w-full border border-gray-300 p-2 rounded-2xl shadow-2xl bg-gray-100",value:`C$ ${w}`,readOnly:!0})]})]}),A.jsx("button",{type:"submit",className:"w-full bg-blue-600 text-white px-4 py-3 sm:py-2 rounded-2xl shadow-2xl font-semibold shadow hover:bg-blue-700 transition disabled:opacity-50",disabled:f.length===0||R,children:R?"Guardando...":"Guardar venta"}),S&&A.jsx("p",{className:`text-sm mt-2 ${S.startsWith("")?"text-green-600":S.startsWith("")?"text-yellow-600":"text-red-600"}`,children:S})]}),R&&A.jsx("div",{className:"fixed inset-0 bg-black/40 z-[60] flex items-center justify-center",children:A.jsx("div",{className:"bg-white rounded-lg shadow-xl border px-6 py-5",children:A.jsxs("div",{className:"flex items-center gap-3",children:[A.jsxs("svg",{className:"animate-spin h-5 w-5",viewBox:"0 0 24 24",fill:"none",children:[A.jsx("circle",{className:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor",strokeWidth:"4"}),A.jsx("path",{className:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8v4a4 4 0 00-4 4H4z"})]}),A.jsx("span",{className:"font-semibold",children:"Guardando venta"})]})})})]})}var k3={color:void 0,size:void 0,className:void 0,style:void 0,attr:void 0},IN=No.createContext&&No.createContext(k3),C$=["attr","size","title"];function E$(t,e){if(t==null)return{};var r=_$(t,e),n,s;if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(t);for(s=0;s<i.length;s++)n=i[s],!(e.indexOf(n)>=0)&&Object.prototype.propertyIsEnumerable.call(t,n)&&(r[n]=t[n])}return r}function _$(t,e){if(t==null)return{};var r={};for(var n in t)if(Object.prototype.hasOwnProperty.call(t,n)){if(e.indexOf(n)>=0)continue;r[n]=t[n]}return r}function sv(){return sv=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var r=arguments[e];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(t[n]=r[n])}return t},sv.apply(this,arguments)}function SN(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter(function(s){return Object.getOwnPropertyDescriptor(t,s).enumerable})),r.push.apply(r,n)}return r}function iv(t){for(var e=1;e<arguments.length;e++){var r=arguments[e]!=null?arguments[e]:{};e%2?SN(Object(r),!0).forEach(function(n){N$(t,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):SN(Object(r)).forEach(function(n){Object.defineProperty(t,n,Object.getOwnPropertyDescriptor(r,n))})}return t}function N$(t,e,r){return e=I$(e),e in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}function I$(t){var e=S$(t,"string");return typeof e=="symbol"?e:e+""}function S$(t,e){if(typeof t!="object"||!t)return t;var r=t[Symbol.toPrimitive];if(r!==void 0){var n=r.call(t,e);if(typeof n!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}function D3(t){return t&&t.map((e,r)=>No.createElement(e.tag,iv({key:r},e.attr),D3(e.child)))}function F$(t){return e=>No.createElement(T$,sv({attr:iv({},t.attr)},e),D3(t.child))}function T$(t){var e=r=>{var{attr:n,size:s,title:i}=t,a=E$(t,C$),o=s||r.size||"1em",l;return r.className&&(l=r.className),t.className&&(l=(l?l+" ":"")+t.className),No.createElement("svg",sv({stroke:"currentColor",fill:"currentColor",strokeWidth:"0"},r.attr,n,a,{className:l,style:iv(iv({color:t.color||r.color},r.style),t.style),height:o,width:o,xmlns:"http://www.w3.org/2000/svg"}),i&&No.createElement("title",null,i),t.children)};return IN!==void 0?No.createElement(IN.Consumer,null,r=>e(r)):e(k3)}function U$(t){return F$({attr:{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"},child:[{tag:"polyline",attr:{points:"23 4 23 10 17 10"},child:[]},{tag:"polyline",attr:{points:"1 20 1 14 7 14"},child:[]},{tag:"path",attr:{d:"M3.51 9a9 9 0 0 1 14.85-3.36L23 10M1 14l4.64 4.36A9 9 0 0 0 20.49 15"},child:[]}]})(t)}function zp({onClick:t,loading:e,className:r=""}){return A.jsxs("button",{onClick:t,disabled:e,className:`flex items-center gap-2 px-3 py-1.5 rounded-2xl  border 
        bg-white hover:bg-gray-100 text-sm font-medium shadow-2xl
        disabled:opacity-50 disabled:cursor-not-allowed ${r}`,title:"Refrescar datos",children:[A.jsx(U$,{className:`w-4 h-4 ${e?"animate-spin text-blue-500":""}`}),e?"Actualizando...":"Refrescar"]})}const Mn=t=>`C$ ${(Number(t)||0).toFixed(2)}`;function P$(){const[t,e]=P.useState([]),[r,n]=P.useState([]),[s,i]=P.useState(!0),[a,o]=P.useState(""),{refreshKey:l,refresh:c}=rh(),[u,f]=P.useState(er(eh(new Date),"yyyy-MM-dd")),[p,m]=P.useState(er(Zd(new Date),"yyyy-MM-dd")),[b,B]=P.useState(""),[_,w]=P.useState(!1),[y,S]=P.useState(""),[O,R]=P.useState(0),[M,I]=P.useState(0),[E,L]=P.useState(0),[D,N]=P.useState(er(new Date,"yyyy-MM-dd")),[T,F]=P.useState(0),[ee,ce]=P.useState(0),[re,de]=P.useState(""),[W,ue]=P.useState(null),[ae,Ee]=P.useState(""),[Q,k]=P.useState(0),[z,te]=P.useState(0),[$,ne]=P.useState(0),[X,he]=P.useState(""),[ge,Ce]=P.useState(0),[Te,Fe]=P.useState(0),[oe,le]=P.useState(!1),[G,Re]=P.useState(null);P.useEffect(()=>{(async()=>{i(!0),console.log("Refrescando...",l);const se=await Pt(ot(Le,"products")),ve=[];se.forEach(_t=>{const rt=_t.data();ve.push({id:_t.id,name:rt.name??rt.productName??"(sin nombre)",category:rt.category??"(sin categora)",measurement:rt.measurement??"lb",price:Number(rt.price??0)})}),e(ve);const We=Xt(ot(Le,"inventory_batches"),fi("date","desc")),at=await Pt(We),wt=[];at.forEach(_t=>{const rt=_t.data(),ur=is(Number(rt.quantity||0)),St=Number(rt.purchasePrice||0),Ur=Number(rt.salePrice||0),sr=Number((ur*St).toFixed(2)),fr=Number((ur*Ur).toFixed(2));wt.push({id:_t.id,productId:rt.productId,productName:rt.productName,category:rt.category,unit:rt.unit,quantity:ur,remaining:is(Number(rt.remaining||0)),purchasePrice:St,salePrice:Ur,invoiceTotal:rt.invoiceTotal!=null?Number(rt.invoiceTotal):sr,expectedTotal:rt.expectedTotal!=null?Number(rt.expectedTotal):fr,date:rt.date,createdAt:rt.createdAt,status:rt.status,notes:rt.notes,paidAmount:Number(rt.paidAmount||0),paidAt:rt.paidAt})}),n(wt),i(!1)})()},[l]),P.useEffect(()=>{const se=t.find(ve=>ve.id===y);se&&L(Number(se.price||0))},[y,t,l]),P.useEffect(()=>{F(Math.floor(O*M*100)/100)},[O,M,l]),P.useEffect(()=>{ce(Math.floor(O*E*100)/100)},[O,E,l]);const je=se=>{const ve=(se||"").toLowerCase();return/(^|\s)(lb|lbs|libra|libras)(\s|$)/.test(ve)||ve==="lb"},Ue=P.useMemo(()=>r.filter(se=>!(u&&se.date<u||p&&se.date>p||b&&se.productId!==b)),[r,u,p,b]),Pe=P.useMemo(()=>{const se=Ue.reduce((St,Ur)=>St+Number(Ur.invoiceTotal||0),0),ve=Ue.reduce((St,Ur)=>St+Number(Ur.expectedTotal||0),0);let We=0,at=0,wt=0,_t=0;for(const St of Ue)je(St.unit)?(We+=St.quantity,at+=St.remaining):(wt+=St.quantity,_t+=St.remaining);const rt=Ue.reduce((St,Ur)=>St+Ur.quantity,0),ur=Ue.reduce((St,Ur)=>St+Ur.remaining,0);return{lbsIng:We,lbsRem:at,udsIng:wt,udsRem:_t,qty:rt,rem:ur,totalFacturado:se,totalEsperado:ve}},[Ue]),Ge=async se=>{se.preventDefault();const ve=t.find(We=>We.id===y);if(!ve||O<=0||M<=0){o("Completa producto, cantidad y costo.");return}try{const We=is(O),at=await A$({productId:ve.id,productName:ve.name,category:ve.category,unit:ve.measurement,quantity:We,purchasePrice:M,salePrice:E,invoiceTotal:T,expectedTotal:ee,date:D,notes:re});n(wt=>[{id:at.id,productId:ve.id,productName:ve.name,category:ve.category,unit:ve.measurement,quantity:We,remaining:We,purchasePrice:M,salePrice:E,invoiceTotal:T,expectedTotal:ee,date:D,createdAt:Dt.now(),status:"PENDIENTE",notes:re},...wt]),o(" Lote creado"),S(""),R(0),I(0),L(ve.price||0),F(0),ce(0),de(""),w(!1)}catch(We){console.error(We),o(" Error al crear lote")}},qe=se=>{ue(se.id),Ee(se.date),k(is(se.quantity)),te(se.purchasePrice),ne(se.salePrice),he(se.notes||""),Ce(Number((se.quantity*se.purchasePrice).toFixed(2))),Fe(Number((se.quantity*se.salePrice).toFixed(2)))},tt=()=>{ue(null),Ee(""),k(0),te(0),ne(0),he(""),Ce(0),Fe(0)};P.useEffect(()=>{W&&Ce(Math.floor(Q*z*100)/100)},[W,Q,z,l]),P.useEffect(()=>{W&&Fe(Math.floor(Q*$*100)/100)},[W,Q,$,l]);const Ze=async()=>{if(!W)return;const se=r.find(wt=>wt.id===W);if(!se)return;const ve=is(se.quantity-se.remaining),We=Math.max(0,is(Q-ve)),at=Lt(Le,"inventory_batches",W);await rn(at,{date:ae,quantity:is(Q),purchasePrice:z,salePrice:$,invoiceTotal:ge,expectedTotal:Te,notes:X,remaining:We}),n(wt=>wt.map(_t=>_t.id===W?{..._t,date:ae,quantity:is(Q),purchasePrice:z,salePrice:$,invoiceTotal:ge,expectedTotal:Te,notes:X,remaining:We}:_t)),tt(),o(" Lote actualizado")},vt=async se=>{confirm(`Eliminar el lote del ${se.date} (${se.productName})?`)&&(await Bs(Lt(Le,"inventory_batches",se.id)),n(We=>We.filter(at=>at.id!==se.id)),o(" Lote eliminado"))},ht=()=>{const se=(u?`Desde ${u}`:"Desde inicio")+"  "+(p?`Hasta ${p}`:"Hasta hoy"),ve=Ue.map(wt=>{const _t=Number(wt.invoiceTotal||0),rt=Number(wt.expectedTotal||0);return`
      <tr>
        <td>${wt.date}</td>
        <td>${(wt.category||"").toUpperCase()}</td>
        <td>${wt.productName}</td>
        <td>${(wt.unit||"").toUpperCase()}</td>
        <td style="text-align:right">${wt.quantity.toFixed(3)}</td>
        <td style="text-align:right">${wt.remaining.toFixed(3)}</td>
        <td style="text-align:right">${Mn(wt.purchasePrice)}</td>
        <td style="text-align:right">${Mn(wt.salePrice)}</td>
        <td style="text-align:right">${Mn(_t)}</td>
        <td style="text-align:right">${Mn(rt)}</td>
        <td>${wt.status}</td>
      </tr>`}).join(""),We=`
<!doctype html>
<html>
<head>
  <meta charset="utf-8" />
  <title>Inventario por Lotes</title>
 <style>
  * { font-family: Arial, sans-serif; }
  h1 { margin: 0 0 4px; }
  .muted { color: #555; font-size: 12px; margin-bottom: 12px; }

  table { width: 100%; border-collapse: collapse; font-size: 12px; }
  th, td { border: 1px solid #ddd; padding: 6px; }
  th { background: #f5f5f5; text-align: left; }

  .totals {
    margin: 10px 0 16px;
    font-size: 12px;
    display: grid;
    grid-template-columns: repeat(2, max-content);
    column-gap: 32px;
    row-gap: 6px;
    align-items: center;
  }
  .totals span {
    margin: 0;
    white-space: nowrap;
  }

  @media print {
    @page { size: A4 landscape; margin: 15mm; }
    button { display: none; }
  }
</style>

</head>

<body>
  <button onclick="window.print()">Imprimir</button>
  <h1>Inventario por Lotes</h1>
<div class="muted">${se}</div>
<div class="totals">
  <span><strong>Libras ingresadas:</strong> ${Pe.lbsIng.toFixed(3)}</span>
  <span><strong>Libras restantes:</strong> ${Pe.lbsRem.toFixed(3)}</span>

  <span><strong>Unidades ingresadas:</strong> ${Pe.udsIng.toFixed(3)}</span>
  <span><strong>Unidades restantes:</strong> ${Pe.udsRem.toFixed(3)}</span>

  <span><strong>Total esperado a ganar:</strong> ${Mn(Pe.totalEsperado)}</span>
  <span><strong>Total facturado:</strong> ${Mn(Pe.totalFacturado)}</span>
  <span><strong>Ganancia sin gastos:</strong> ${Mn(Number((Pe.totalEsperado-Pe.totalFacturado).toFixed(2)))}</span>
</div>

  <table>
    <thead>
      <tr>
        <th>Fecha</th>
        <th>Tipo</th>
        <th>Producto</th>
        <th>Unidad</th>
        <th>Ingresado</th>
        <th>Restantes</th>
        <th>Precio Compra</th>
        <th>Precio Venta</th>
        <th>Total factura</th>
        <th>Total esperado</th>
        <th>Estado</th>
      </tr>
    </thead>
    <tbody>
      ${ve||'<tr><td colspan="11" style="text-align:center">Sin lotes</td></tr>'}
    </tbody>
  </table>
</body>
</html>`,at=window.open("","_blank");at&&(at.document.open(),at.document.write(We),at.document.close())},Ct=async se=>{Re(se),le(!0)},Ht=async()=>{if(!G)return;const se=G;try{await L3(se.id);const ve=Lt(Le,"inventory_batches",se.id);await rn(ve,{remaining:0});const We={date:se.date,productName:se.productName,quantity:se.quantity,amount:Number((se.expectedTotal??se.salePrice*se.quantity).toFixed(2)),allocations:[{batchId:se.id,qty:se.quantity,unitCost:se.purchasePrice,lineCost:Number((se.purchasePrice*se.quantity).toFixed(2))}],avgUnitCost:se.purchasePrice,measurement:se.unit,createdAt:Dt.now(),autoGeneratedFromInventory:!0};await qn(ot(Le,"salesV2"),We),n(at=>at.map(wt=>wt.id===se.id?{...wt,status:"PAGADO",remaining:0}:wt)),o(" Inventario pagado y reflejado como venta")}catch(ve){console.error(ve),o(" Error al pagar inventario")}finally{le(!1),Re(null)}},Et=()=>{le(!1),Re(null)};return A.jsxs("div",{className:"max-w-6xl mx-auto shadows-2xl",children:[A.jsxs("div",{className:"flex items-center justify-between mb-3",children:[A.jsx("h2",{className:"text-2xl font-bold",children:"Inventario (Pollo)"}),A.jsx("button",{className:"px-3 py-2 rounded-2xl bg-blue-600 text-white hover:bg-blue-700",type:"button",onClick:()=>w(!0),children:"Crear Lote"})]}),A.jsxs("div",{className:"bg-white p-3 rounded shadow-2xl border mb-4 flex flex-wrap items-end gap-3 text-sm",children:[A.jsxs("div",{className:"flex flex-col",children:[A.jsx("label",{className:"font-semibold",children:"Desde"}),A.jsx("input",{type:"date",className:"border rounded px-2 py-1",value:u,onChange:se=>f(se.target.value)})]}),A.jsxs("div",{className:"flex flex-col",children:[A.jsx("label",{className:"font-semibold",children:"Hasta"}),A.jsx("input",{type:"date",className:"border rounded px-2 py-1",value:p,onChange:se=>m(se.target.value)})]}),A.jsxs("div",{className:"flex flex-col min-w-[240px]",children:[A.jsx("label",{className:"font-semibold",children:"Producto"}),A.jsxs("select",{className:"border rounded px-2 py-1",value:b,onChange:se=>B(se.target.value),children:[A.jsx("option",{value:"",children:"Todos"}),t.map(se=>A.jsxs("option",{value:se.id,children:[se.name,"  ",se.category]},se.id))]})]}),A.jsx("button",{className:"px-3 rounded-2xl shadow-2xl py-1 bg-gray-200 hover:bg-gray-300",onClick:()=>{f(""),m(""),B("")},children:"Quitar filtro"}),A.jsx("button",{className:"px-3 py-1 rounded-2xl shadow-2xl bg-blue-600 text-white hover:bg-blue-700",onClick:ht,children:"Imprimir PDF"}),A.jsx("div",{className:"ml-auto",children:A.jsx(zp,{onClick:()=>c(),loading:s})})]}),A.jsx("div",{className:"bg-gray-50 p-3 rounded-2xl shadow-2xl border mb-3 text-base",children:A.jsxs("div",{className:"grid grid-cols-3 gap-y-2 gap-x-8",children:[A.jsxs("div",{children:[A.jsx("span",{className:"font-semibold",children:"Libras ingresadas:"})," ",Pe.lbsIng.toFixed(3)]}),A.jsxs("div",{children:[A.jsx("span",{className:"font-semibold",children:"Unidades ingresadas:"})," ",Pe.udsIng.toFixed(3)]}),A.jsxs("div",{children:[A.jsx("span",{className:"font-semibold",children:"Total esperado en ventas:"})," C$"," ",Pe.totalEsperado.toFixed(2)]}),A.jsxs("div",{children:[A.jsx("span",{className:"font-semibold",children:"Libras restantes:"})," ",Pe.lbsRem.toFixed(3)]}),A.jsxs("div",{children:[A.jsx("span",{className:"font-semibold",children:"Unidades restantes:"})," ",Pe.udsRem.toFixed(3)]}),A.jsxs("div",{children:[A.jsx("span",{className:"font-semibold",children:"Total facturado:"})," C$"," ",Pe.totalFacturado.toFixed(2)]}),A.jsxs("div",{children:[A.jsx("span",{className:"font-semibold",children:"Ganancia sin gastos:"})," C$"," ",(Pe.totalEsperado-Pe.totalFacturado).toFixed(2)]}),A.jsxs("div",{children:[A.jsx("span",{className:"font-semibold",children:"Cantidad de Lotes (por filtro):"})," ",Ue.length.toLocaleString()]})]})}),A.jsx("div",{className:"bg-white p-2 rounded shadow border w-full",children:A.jsxs("table",{className:"min-w-full w-full text-sm shadow-2xl",children:[A.jsx("thead",{className:"bg-gray-100",children:A.jsxs("tr",{children:[A.jsx("th",{className:"p-2 border",children:"Fecha"}),A.jsx("th",{className:"p-2 border",children:"Tipo"}),A.jsx("th",{className:"p-2 border",children:"Producto"}),A.jsx("th",{className:"p-2 border",children:"Unidad"}),A.jsx("th",{className:"p-2 border",children:"Ingresado"}),A.jsx("th",{className:"p-2 border",children:"Restantes"}),A.jsx("th",{className:"p-2 border",children:"Precio Compra"}),A.jsx("th",{className:"p-2 border",children:"Precio Venta"}),A.jsx("th",{className:"p-2 border",children:"Total factura"}),A.jsx("th",{className:"p-2 border",children:"Total esperado"}),A.jsx("th",{className:"p-2 border",children:"Total ganancia"}),A.jsx("th",{className:"p-2 border",children:"Estado"}),A.jsx("th",{className:"p-2 border",children:"Acciones"})]})}),A.jsx("tbody",{children:s?A.jsx("tr",{children:A.jsx("td",{colSpan:12,className:"p-4 text-center",children:"Cargando"})}):Ue.length===0?A.jsx("tr",{children:A.jsx("td",{colSpan:12,className:"p-4 text-center",children:"Sin lotes"})}):Ue.map(se=>{const ve=W===se.id,We=Number(se.invoiceTotal||0),at=Number(se.expectedTotal||0);return A.jsxs("tr",{className:"text-center",children:[A.jsx("td",{className:"p-2 border",children:ve?A.jsx("input",{type:"date",className:"w-full border p-1 rounded",value:ae,onChange:wt=>Ee(wt.target.value)}):se.date}),A.jsx("td",{className:"p-2 border",children:se.category.toUpperCase()}),A.jsx("td",{className:"p-2 border",children:se.productName}),A.jsx("td",{className:"p-2 border",children:se.unit.toUpperCase()}),A.jsx("td",{className:"p-2 border",children:ve?A.jsx("input",{type:"number",step:"0.01",inputMode:"decimal",className:"w-full border p-1 rounded text-right",value:Number.isNaN(Q)?"":Q,onChange:wt=>{const _t=wt.target.value.replace(",","."),rt=parseFloat(_t),ur=Number.isFinite(rt)?parseFloat(rt.toFixed(3)):0;k(Math.max(0,ur))}}):se.quantity.toFixed(3)}),A.jsx("td",{className:"p-2 border",children:ve?se.remaining:se.remaining.toFixed(3)}),A.jsx("td",{className:"p-2 border",children:ve?A.jsx("input",{type:"number",step:"0.01",inputMode:"decimal",className:"w-full border p-1 rounded text-right",value:Number.isNaN(z)?"":z,onChange:wt=>{const _t=wt.target.value.replace(",","."),rt=parseFloat(_t),ur=Number.isFinite(rt)?parseFloat(rt.toFixed(2)):0;te(Math.max(0,ur))}}):Mn(se.purchasePrice)}),A.jsx("td",{className:"p-2 border",children:ve?A.jsx("input",{type:"number",step:"0.01",inputMode:"decimal",className:"w-full border p-1 rounded text-right",value:Number.isNaN($)?"":$,onChange:wt=>{const _t=wt.target.value.replace(",","."),rt=parseFloat(_t),ur=Number.isFinite(rt)?parseFloat(rt.toFixed(2)):0;ne(Math.max(0,ur))}}):Mn(se.salePrice)}),A.jsx("td",{className:"p-2 border",children:Mn(ve?ge:We)}),A.jsx("td",{className:"p-2 border",children:Mn(ve?Te:at)}),A.jsx("td",{className:"p-2 border",children:Mn(ve?Te-ge:at-We)}),A.jsx("td",{className:"p-2 border",children:A.jsx("span",{className:`px-2 py-0.5 rounded text-xs ${se.status==="PAGADO"?"bg-green-100 text-green-700":"bg-yellow-100 text-yellow-700"}`,children:se.status})}),A.jsx("td",{className:"flex space-x-2 justify-center",children:ve?A.jsxs(A.Fragment,{children:[A.jsx("button",{className:"px-2 py-1 rounded text-white bg-blue-600 hover:bg-blue-700",onClick:Ze,children:"Guardar"}),A.jsx("button",{className:"px-2 py-1 rounded bg-gray-200 hover:bg-gray-300",onClick:tt,children:"Cancelar"})]}):A.jsxs(A.Fragment,{children:[se.status==="PENDIENTE"&&A.jsx("button",{onClick:()=>Ct(se),className:"px-2 py-1 rounded text-white bg-green-600 hover:bg-green-700",children:"Pagar"}),A.jsx("button",{className:"px-2 py-1 rounded text-white bg-yellow-600 hover:bg-yellow-700",onClick:()=>qe(se),children:"Editar"}),A.jsx("button",{className:"px-2 py-1 rounded text-white bg-red-600 hover:bg-red-700",onClick:()=>vt(se),children:"Borrar"})]})})]},se.id)})})]})}),a&&A.jsx("p",{className:"mt-2 text-sm",children:a}),_&&_d.createPortal(A.jsxs("div",{className:"fixed inset-0 z-[70] flex items-center justify-center",children:[A.jsx("div",{className:"absolute inset-0 bg-black/40",onClick:()=>w(!1)}),A.jsxs("div",{className:"relative bg-white rounded-lg shadow-2xl border w-[96%] max-w-4xl max-h-[92vh] overflow-auto p-4",children:[A.jsxs("div",{className:"flex items-center justify-between mb-2",children:[A.jsx("h3",{className:"text-lg font-bold",children:"Crear Lote"}),A.jsx("button",{className:"px-3 py-1 rounded bg-gray-200 hover:bg-gray-300",onClick:()=>w(!1),type:"button",children:"Cerrar"})]}),A.jsxs("form",{onSubmit:Ge,className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[A.jsxs("div",{className:"md:col-span-2",children:[A.jsx("label",{className:"block text-sm font-semibold",children:"Producto"}),A.jsxs("select",{className:"w-full border p-2 rounded",value:y,onChange:se=>S(se.target.value),children:[A.jsx("option",{value:"",children:"Selecciona un producto"}),t.map(se=>A.jsxs("option",{value:se.id,children:[se.name,"  ",se.category,"  ",se.measurement,"  Precio:"," ",Mn(se.price)]},se.id))]})]}),A.jsxs("div",{children:[A.jsx("label",{className:"block text-sm font-semibold",children:"Fecha del lote"}),A.jsx("input",{type:"date",className:"w-full border p-2 rounded",value:D,onChange:se=>N(se.target.value)})]}),A.jsxs("div",{children:[A.jsx("label",{className:"block text-sm font-semibold",children:"Cantidad (Lo que esta ingresando)"}),A.jsx("input",{type:"number",step:"0.01",inputMode:"decimal",className:"w-full border p-2 rounded",value:O===0?"":O,onChange:se=>{const ve=se.target.value.replace(",","."),We=parseFloat(ve),at=Number.isFinite(We)?parseFloat(We.toFixed(3)):0;R(at)},disabled:!y,placeholder:y?"":"Selecciona un producto primero",title:y?"":"Selecciona un producto para habilitar"})]}),A.jsxs("div",{children:[A.jsx("label",{className:"block text-sm font-semibold",children:"Precio de compra (compra)"}),A.jsx("input",{type:"number",step:"0.01",inputMode:"decimal",className:"w-full border p-2 rounded",value:M===0?"":M,onChange:se=>{const ve=se.target.value.replace(",","."),We=parseFloat(ve),at=Number.isFinite(We)?parseFloat(We.toFixed(2)):0;I(at)},disabled:!y,placeholder:y?"":"Selecciona un producto primero",title:y?"":"Selecciona un producto para habilitar"})]}),A.jsxs("div",{children:[A.jsx("label",{className:"block text-sm font-semibold",children:"Precio de venta (venta)"}),A.jsx("input",{type:"number",step:"0.01",inputMode:"decimal",className:"w-full border p-2 rounded",value:E===0?"":E,onChange:se=>{const ve=se.target.value.replace(",","."),We=parseFloat(ve),at=Number.isFinite(We)?parseFloat(We.toFixed(2)):0;L(at)},disabled:!y,placeholder:y?"":"Selecciona un producto primero",title:y?"":"Selecciona un producto para habilitar"})]}),A.jsxs("div",{children:[A.jsx("label",{className:"block text-sm font-semibold",children:"Total factura (auto)"}),A.jsx("input",{type:"text",className:"w-full border p-2 rounded bg-gray-100",value:Mn(T),readOnly:!0})]}),A.jsxs("div",{children:[A.jsx("label",{className:"block text-sm font-semibold",children:"Total esperado (auto)"}),A.jsx("input",{type:"text",className:"w-full border p-2 rounded bg-gray-100",value:Mn(ee),readOnly:!0})]}),A.jsxs("div",{className:"md:col-span-2",children:[A.jsx("label",{className:"block text-sm font-semibold",children:"Notas"}),A.jsx("input",{className:"w-full border p-2 rounded",value:re,onChange:se=>de(se.target.value)})]}),A.jsxs("div",{className:"md:col-span-2 flex justify-end gap-2",children:[A.jsx("button",{type:"button",className:"px-4 py-2 rounded bg-gray-200 hover:bg-gray-300",onClick:()=>w(!1),children:"Cancelar"}),A.jsx("button",{className:"bg-blue-600 text-white px-4 py-2 rounded hover:bg-blue-700",children:"Guardar lote"})]})]})]})]}),document.body),oe&&G&&_d.createPortal(A.jsxs("div",{className:"fixed inset-0 z-[80] flex items-center justify-center",children:[A.jsx("div",{className:"absolute inset-0 bg-black/50",onClick:Et}),A.jsxs("div",{className:"relative bg-white rounded-xl shadow-2xl border w-[90%] max-w-md p-6",children:[A.jsx("h3",{className:"text-lg font-bold mb-3 text-center",children:"Confirmar pago de inventario"}),A.jsxs("p",{className:"text-sm text-gray-700 mb-5 text-center",children:["Seguro que quieres pagar este inventario?",A.jsx("br",{}),A.jsx("strong",{children:G.productName})," "," ",G.quantity," ",G.unit,A.jsx("br",{}),"Ya no habrn libras disponibles al pagar este inventario."]}),A.jsxs("div",{className:"flex justify-center gap-4",children:[A.jsx("button",{onClick:Ht,className:"px-4 py-2 rounded-lg bg-green-600 text-white hover:bg-green-700",children:"Confirmar"}),A.jsx("button",{onClick:Et,className:"px-4 py-2 rounded-lg bg-gray-300 hover:bg-gray-400",children:"Cancelar"})]})]})]}),document.body)]})}const mo=t=>`C$${(Number(t)||0).toFixed(2)}`;function Q$(){const t=kV(new Date),[e,r]=P.useState(er(t,"yyyy-MM")),[n,s]=P.useState([]),[i,a]=P.useState(!1),[o,l]=P.useState(""),c=P.useRef(null),u=P.useMemo(()=>{const[_,w]=e.split("-").map(O=>parseInt(O,10)),y=er(eh(new Date(_,w-1,1)),"yyyy-MM-dd"),S=er(Zd(new Date(_,w-1,1)),"yyyy-MM-dd");return{from:y,to:S}},[e]),f=async()=>{a(!0);try{const _=await l$(u.from,u.to),w=[];for(const y of _){const S=Lt(Le,"inventory_batches",y.batchId),O=await zo(S);if(!O.exists())continue;const R=O.data();w.push({batchId:y.batchId,batchDate:y.batchDate,productName:y.productName,soldQty:Number(y.quantity||0),soldAmount:Number(y.amountCharged||0),status:R.status??"PENDIENTE",purchasePrice:Number(R.purchasePrice||0),salePrice:Number(R.salePrice||0),supplier:R.supplier})}s(w)}catch(_){console.error(_),l(" Error al cargar liquidaciones")}finally{a(!1)}};P.useEffect(()=>{f()},[e]);const p=async _=>{confirm("Marcar este lote como PAGADO?")&&(await L3(_),s(y=>y.map(S=>S.batchId===_?{...S,status:"PAGADO"}:S)))},m=P.useMemo(()=>{const _=n.reduce((O,R)=>O+R.soldQty,0),w=n.reduce((O,R)=>O+R.soldAmount,0),y=n.reduce((O,R)=>O+R.soldQty*R.purchasePrice,0),S=w-y;return{q:_,amt:w,cogs:y,profit:S}},[n]),b=P.useMemo(()=>{const _=new Map;for(const w of n){const y=w.productName||"(sin nombre)";_.has(y)||_.set(y,{productName:y,qty:0,revenue:0,cogs:0,profit:0});const S=_.get(y);S.qty+=w.soldQty,S.revenue+=w.soldAmount;const O=w.soldQty*w.purchasePrice;S.cogs+=O,S.profit=S.revenue-S.cogs}return Array.from(_.values()).sort((w,y)=>w.productName.localeCompare(y.productName))},[n]),B=async()=>{if(!c.current)return;const _=c.current;_.classList.add("force-pdf-colors");try{const[{default:w},{jsPDF:y}]=await Promise.all([Qo(()=>Promise.resolve().then(()=>bB),void 0),Qo(()=>Promise.resolve().then(()=>lx),void 0)]),O=(await w(_,{backgroundColor:"#ffffff",scale:2})).toDataURL("image/png"),R=new y("p","mm","a4"),M=190,I=R.getImageProperties(O),E=M,L=I.height*E/I.width;R.addImage(O,"PNG",10,10,E,L),R.save(`liquidaciones_${e}.pdf`)}catch(w){console.error(w),alert("No se pudo generar el PDF")}finally{_.classList.remove("force-pdf-colors")}};return A.jsxs("div",{className:"max-w-6xl mx-auto",children:[A.jsxs("div",{className:"flex items-center justify-between gap-3 mb-3",children:[A.jsx("h2",{className:"text-2xl font-bold",children:"Liquidaciones por lote"}),A.jsx("button",{onClick:B,className:"bg-green-600 text-white px-3 py-1 rounded hover:bg-green-700",children:"Descargar PDF"})]}),A.jsxs("div",{className:"bg-white p-3 rounded shadow border mb-4 flex flex-wrap items-center gap-3",children:[A.jsx("label",{className:"text-sm font-semibold",children:"Mes:"}),A.jsx("input",{type:"month",className:"border rounded px-2 py-1",value:e,onChange:_=>r(_.target.value)}),A.jsx("button",{onClick:f,className:"bg-gray-800 text-white px-3 py-1 rounded",children:"Aplicar"})]}),A.jsxs("div",{ref:c,children:[A.jsx("div",{className:"bg-white p-3 rounded shadow border mb-3 text-sm",children:A.jsxs("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-2",children:[A.jsxs("div",{children:[A.jsx("span",{className:"font-semibold",children:"Total vendido (cantidad):"})," ",m.q]}),A.jsxs("div",{children:[A.jsx("span",{className:"font-semibold",children:"Monto vendido:"})," ",mo(m.amt)]}),A.jsxs("div",{children:[A.jsx("span",{className:"font-semibold",children:"Costo (COGS):"})," ",mo(m.cogs)]}),A.jsxs("div",{children:[A.jsx("span",{className:"font-semibold",children:"Utilidad:"})," ",mo(m.profit)]})]})}),A.jsx("div",{className:"bg-white p-2 rounded shadow border overflow-x-auto mb-6",children:A.jsxs("table",{className:"min-w-full text-sm",children:[A.jsx("thead",{className:"bg-gray-100",children:A.jsxs("tr",{children:[A.jsx("th",{className:"p-2 border",children:"Lote (fecha)"}),A.jsx("th",{className:"p-2 border",children:"Producto"}),A.jsx("th",{className:"p-2 border",children:"Proveedor"}),A.jsx("th",{className:"p-2 border",children:"Vendido"}),A.jsx("th",{className:"p-2 border",children:"Monto vendido"}),A.jsx("th",{className:"p-2 border",children:"COGS"}),A.jsx("th",{className:"p-2 border",children:"Utilidad"}),A.jsx("th",{className:"p-2 border",children:"Estado"}),A.jsx("th",{className:"p-2 border",children:"Acciones"})]})}),A.jsx("tbody",{children:i?A.jsx("tr",{children:A.jsx("td",{colSpan:9,className:"p-4 text-center",children:"Cargando"})}):n.length===0?A.jsx("tr",{children:A.jsx("td",{colSpan:9,className:"p-4 text-center",children:"Sin datos"})}):n.map(_=>{const w=_.soldQty*_.purchasePrice,y=_.soldAmount-w;return A.jsxs("tr",{className:"text-center",children:[A.jsx("td",{className:"p-2 border",children:_.batchDate}),A.jsx("td",{className:"p-2 border",children:_.productName}),A.jsx("td",{className:"p-2 border",children:_.supplier||"-"}),A.jsx("td",{className:"p-2 border",children:_.soldQty}),A.jsx("td",{className:"p-2 border",children:mo(_.soldAmount)}),A.jsx("td",{className:"p-2 border",children:mo(w)}),A.jsx("td",{className:`p-2 border ${y>=0?"text-green-700":"text-red-700"}`,children:mo(y)}),A.jsx("td",{className:"p-2 border",children:A.jsx("span",{className:`px-2 py-0.5 rounded text-xs ${_.status==="PAGADO"?"bg-green-100 text-green-700":"bg-yellow-100 text-yellow-700"}`,children:_.status})}),A.jsx("td",{className:"p-2 border",children:_.status==="PENDIENTE"&&A.jsx("button",{onClick:()=>p(_.batchId),className:"px-2 py-1 rounded text-white bg-green-600 hover:bg-green-700",children:"Marcar pagado"})})]},_.batchId)})})]})}),A.jsx("h3",{className:"font-semibold mb-2",children:"Utilidad por producto"}),A.jsx("div",{className:"bg-white p-2 rounded shadow border overflow-x-auto",children:A.jsxs("table",{className:"min-w-full text-sm",children:[A.jsx("thead",{className:"bg-gray-100",children:A.jsxs("tr",{children:[A.jsx("th",{className:"p-2 border",children:"Producto"}),A.jsx("th",{className:"p-2 border",children:"Cantidad vendida"}),A.jsx("th",{className:"p-2 border",children:"Ingreso"}),A.jsx("th",{className:"p-2 border",children:"COGS"}),A.jsx("th",{className:"p-2 border",children:"Utilidad"})]})}),A.jsx("tbody",{children:b.length===0?A.jsx("tr",{children:A.jsx("td",{colSpan:5,className:"p-4 text-center",children:"Sin datos"})}):b.map(_=>A.jsxs("tr",{className:"text-center",children:[A.jsx("td",{className:"p-2 border",children:_.productName}),A.jsx("td",{className:"p-2 border",children:_.qty}),A.jsx("td",{className:"p-2 border",children:mo(_.revenue)}),A.jsx("td",{className:"p-2 border",children:mo(_.cogs)}),A.jsx("td",{className:`p-2 border ${_.profit>=0?"text-green-700":"text-red-700"}`,children:mo(_.profit)})]},_.productName))})]})})]}),o&&A.jsx("p",{className:"mt-2 text-sm",children:o})]})}const go=t=>`C$${Number(t??0).toFixed(2)}`,L$=()=>er(new Date,"yyyy-MM-dd"),vg=t=>Number(t||0).toFixed(3);function j$(){const[t,e]=P.useState(()=>{const R=new Date,M=new Date(R.getFullYear(),R.getMonth(),1);return er(M,"yyyy-MM-dd")}),[r,n]=P.useState(L$()),[s,i]=P.useState(!0),[a,o]=P.useState([]),[l,c]=P.useState([]),{refreshKey:u,refresh:f}=rh();P.useEffect(()=>{(async()=>{i(!0);const M=Xt(ot(Le,"salesV2"),rr("date",">=",t),rr("date","<=",r)),I=await Pt(M),E=[];I.forEach(T=>{const F=T.data(),ee=F.date??"";if(Array.isArray(F.items)&&F.items.length>0){F.items.forEach((ce,re)=>{const de=String(ce.productName??"(sin nombre)"),W=Number(ce.qty??0),ue=Number(ce.lineFinal??0)||Math.max(0,Number(ce.unitPrice||0)*W-Number(ce.discount||0));E.push({id:`${T.id}#${re}`,date:ee,productName:de,quantity:W,amount:ue,allocations:Array.isArray(ce.allocations)?ce.allocations:F.allocations,avgUnitCost:Number(ce.avgUnitCost??F.avgUnitCost??0),measurement:ce.measurement??F.measurement??""})});return}E.push({id:T.id,date:ee,productName:F.productName??"(sin nombre)",quantity:Number(F.quantity??0),amount:Number(F.amount??F.amountCharged??0),allocations:Array.isArray(F.allocations)?F.allocations:[],avgUnitCost:Number(F.avgUnitCost??0),measurement:F.measurement??""})}),o(E);const L=Xt(ot(Le,"expenses"),rr("date",">=",t),rr("date","<=",r)),D=await Pt(L),N=[];D.forEach(T=>{const F=T.data();N.push({id:T.id,date:F.date??"",category:F.category??"(sin categora)",description:F.description??"",amount:Number(F.amount??0),status:F.status??"PAGADO",createdAt:F.createdAt})}),c(N),i(!1)})()},[t,r,u]);const p=P.useMemo(()=>{const R=a.reduce((D,N)=>D+(N.amount||0),0);let M=0;a.forEach(D=>{var N;(N=D.allocations)!=null&&N.length?M+=D.allocations.reduce((T,F)=>T+Number(F.lineCost||0),0):D.avgUnitCost&&D.quantity&&(M+=Number(D.avgUnitCost)*Number(D.quantity))});const I=R-M,E=l.reduce((D,N)=>D+(N.amount||0),0),L=I-E;return{revenue:R,cogsReal:M,grossProfit:I,expensesSum:E,netProfit:L}},[a,l]),m=R=>String(R??"").toLowerCase().trim(),b=R=>Number(R.qty??R.quantity??0),B=R=>["lb","lbs","libra","libras"].includes(m(R)),_=R=>["unidad","unidades","ud","uds","pieza","piezas"].includes(m(R)),w=P.useMemo(()=>a.reduce((R,M)=>B(M.measurement)?R+b(M):R,0),[a]),y=P.useMemo(()=>a.reduce((R,M)=>_(M.measurement)?R+b(M):R,0),[a]),S=P.useMemo(()=>{var M;const R=new Map;for(const I of a){const E=I.productName||"(sin nombre)";R.has(E)||R.set(E,{productName:E,units:0,revenue:0,cogs:0,profit:0,firstDate:I.date||"",lastDate:I.date||""});const L=R.get(E);L.units+=Number(I.quantity||0),L.revenue+=Number(I.amount||0),(!L.firstDate||I.date<(L.firstDate||I.date))&&(L.firstDate=I.date),(!L.lastDate||I.date>(L.lastDate||I.date))&&(L.lastDate=I.date);let D=0;(M=I.allocations)!=null&&M.length?D=I.allocations.reduce((N,T)=>N+Number(T.lineCost||0),0):I.avgUnitCost&&(D=Number(I.avgUnitCost)*Number(I.quantity||0)),L.cogs+=D,L.profit=L.revenue-L.cogs}return Array.from(R.values()).sort((I,E)=>I.productName.localeCompare(E.productName))},[a]),O=P.useMemo(()=>[...S].sort((R,M)=>M.units-R.units).slice(0,3).map((R,M)=>({idx:M+1,name:R.productName,units:R.units})),[S]);return A.jsxs("div",{className:"max-w-7xl mx-auto bg-white p-6 rounded-2xl shadow-2xl ",children:[A.jsxs("div",{className:"flex items-center justify-between mb-3",children:[A.jsx("h2",{className:"text-2xl font-bold",children:"Finanzas: Ingresos y Egresos"}),A.jsx(zp,{onClick:f,loading:s})]}),A.jsxs("div",{className:"flex flex-wrap items-end gap-2 mb-4",children:[A.jsxs("div",{children:[A.jsx("label",{className:"block text-sm text-gray-600 mb-1",children:"Desde"}),A.jsx("input",{type:"date",className:"border rounded px-3 py-2",value:t,onChange:R=>e(R.target.value)})]}),A.jsxs("div",{children:[A.jsx("label",{className:"block text-sm text-gray-600 mb-1",children:"Hasta"}),A.jsx("input",{type:"date",className:"border rounded px-3 py-2",value:r,onChange:R=>n(R.target.value)})]})]}),s?A.jsx("p",{children:"Cargando"}):A.jsxs(A.Fragment,{children:[A.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-5 gap-3 mb-3 rounded-2xl shadow-lg p-4 bg-gray-50",children:[A.jsx(Kh,{title:"Ventas",value:go(p.revenue)}),A.jsx(Kh,{title:"Costo",value:go(p.cogsReal)}),A.jsx(Kh,{title:"Ganancia Bruta",value:go(p.grossProfit),positive:!0}),A.jsx(Kh,{title:"Gastos",value:go(p.expensesSum)}),A.jsx(Kh,{title:"Ganancia Neta",value:go(p.netProfit),positive:!0})]}),A.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-3 gap-3 mb-6 rounded-lg shadow-2xl p-4 bg-gray-50",children:[A.jsx(FN,{title:"Libras Vendidas",value:vg(w)}),A.jsx(FN,{title:"Unidades Vendidas",value:vg(y)}),A.jsx(k$,{title:"Productos ms vendidos",items:O.map(R=>({key:`${R.idx}`,label:`${R.idx}. ${R.name}`,value:`(${vg(R.units)})`}))})]}),A.jsx("h3",{className:"font-semibold mb-2",children:"Consolidado por producto"}),A.jsxs("table",{className:"min-w-full border text-sm mb-6",children:[A.jsx("thead",{className:"bg-gray-100",children:A.jsxs("tr",{children:[A.jsx("th",{className:"border p-2",children:"Producto"}),A.jsx("th",{className:"border p-2",children:"Fechas"}),A.jsx("th",{className:"border p-2",children:"Total libras/unidades"}),A.jsx("th",{className:"border p-2",children:"Ingreso"}),A.jsx("th",{className:"border p-2",children:"Costo"}),A.jsx("th",{className:"border p-2",children:"Utilidad"})]})}),A.jsxs("tbody",{children:[S.map(R=>A.jsxs("tr",{className:"text-center",children:[A.jsx("td",{className:"border p-1",children:R.productName}),A.jsx("td",{className:"border p-1",children:R.firstDate&&R.lastDate?R.firstDate===R.lastDate?R.firstDate:`${R.firstDate}  ${R.lastDate}`:""}),A.jsx("td",{className:"border p-1",children:vg(R.units)}),A.jsx("td",{className:"border p-1",children:go(R.revenue)}),A.jsx("td",{className:"border p-1",children:go(R.cogs)}),A.jsx("td",{className:`border p-1 ${R.profit>=0?"text-green-700":"text-red-700"}`,children:go(R.profit)})]},R.productName)),S.length===0&&A.jsx("tr",{children:A.jsx("td",{colSpan:6,className:"p-3 text-center text-gray-500",children:"Sin datos en el rango seleccionado."})})]})]}),A.jsx("h3",{className:"font-semibold mb-2",children:"Gastos del periodo"}),A.jsxs("table",{className:"min-w-full border text-sm",children:[A.jsx("thead",{className:"bg-gray-100",children:A.jsxs("tr",{children:[A.jsx("th",{className:"border p-2",children:"Fecha"}),A.jsx("th",{className:"border p-2",children:"Categora"}),A.jsx("th",{className:"border p-2",children:"Descripcin"}),A.jsx("th",{className:"border p-2",children:"Monto"}),A.jsx("th",{className:"border p-2",children:"Estado"})]})}),A.jsxs("tbody",{children:[l.map(R=>A.jsxs("tr",{className:"text-center",children:[A.jsx("td",{className:"border p-1",children:R.date}),A.jsx("td",{className:"border p-1",children:R.category}),A.jsx("td",{className:"border p-1",children:R.description}),A.jsx("td",{className:"border p-1",children:go(R.amount)}),A.jsx("td",{className:"border p-1",children:A.jsx("span",{className:`px-2 py-0.5 rounded text-xs ${R.status==="PAGADO"?"bg-green-100 text-green-700":"bg-yellow-100 text-yellow-700"}`,children:R.status})})]},R.id)),l.length===0&&A.jsx("tr",{children:A.jsx("td",{colSpan:5,className:"p-3 text-center text-gray-500",children:"Sin gastos en el rango seleccionado."})})]})]})]})]})}function Kh({title:t,value:e,positive:r}){return A.jsxs("div",{className:"border rounded-2xl p-3",children:[A.jsx("div",{className:"text-[17px] text-gray-500",children:t}),A.jsx("div",{className:`text-[30px] font-bold ${r?"text-green-700":""}`,children:e})]})}function FN({title:t,value:e}){return A.jsxs("div",{className:"border rounded-lg p-3",children:[A.jsx("div",{className:"text-[17px] text-gray-500",children:t}),A.jsx("div",{className:"text-[20px] font-semibold",children:e})]})}function k$({title:t,items:e}){return A.jsxs("div",{className:"border rounded-lg p-3",children:[A.jsx("div",{className:"text-[11px] text-gray-500 mb-1",children:t}),A.jsx("ul",{className:"text-sm leading-snug list-none pl-0 m-0 space-y-0.5",children:e.length===0?A.jsx("li",{className:"text-gray-500",children:""}):e.map(r=>A.jsxs("li",{children:[r.label," ",r.value??""]},r.key))})]})}const TN=["Energia","Bolsas","Detergentes","Limpieza de Freezer","Delivery","Pago a Personal","Varios"],wg=t=>`C$ ${(Number(t)||0).toFixed(2)}`;function D$(){const[t,e]=P.useState(er(eh(new Date),"yyyy-MM-dd")),[r,n]=P.useState(er(Zd(new Date),"yyyy-MM-dd")),[s,i]=P.useState(er(new Date,"yyyy-MM-dd")),[a,o]=P.useState(""),[l,c]=P.useState(""),[u,f]=P.useState(0),[p,m]=P.useState("PENDIENTE"),[b,B]=P.useState(""),[_,w]=P.useState([]),[y,S]=P.useState(!0),[O,R]=P.useState(""),[M,I]=P.useState(null),[E,L]=P.useState(""),[D,N]=P.useState(""),[T,F]=P.useState(""),[ee,ce]=P.useState(0),[re,de]=P.useState("PENDIENTE"),[W,ue]=P.useState("");P.useEffect(()=>{(async()=>{S(!0);try{const X=Xt(ot(Le,"expenses"),fi("date","desc")),he=await Pt(X),ge=[];he.forEach(Ce=>{const Te=Ce.data();ge.push({id:Ce.id,date:Te.date||er(new Date,"yyyy-MM-dd"),category:Te.category||"",description:Te.description||"",amount:Number(Te.amount||0),status:Te.status||"PENDIENTE",notes:Te.notes||"",createdAt:Te.createdAt??Dt.now()})}),w(ge)}catch(X){console.error(X),R(" Error al cargar gastos")}finally{S(!1)}})()},[]);const ae=P.useMemo(()=>_.filter(X=>!(t&&X.date<t||r&&X.date>r)),[_,t,r]),Ee=P.useMemo(()=>{const X=ae.reduce((Ce,Te)=>Ce+(Te.amount||0),0),he=ae.filter(Ce=>Ce.status==="PAGADO").reduce((Ce,Te)=>Ce+(Te.amount||0),0),ge=X-he;return{total:X,pagado:he,pendiente:ge}},[ae]),Q=()=>{i(er(new Date,"yyyy-MM-dd")),o(""),c(""),f(0),m("PENDIENTE"),B("")},k=async X=>{if(X.preventDefault(),R(""),!a){R("Selecciona una categora.");return}if(!l.trim()){R("Ingresa una descripcin.");return}if(!u||u<=0){R("Ingresa un monto vlido.");return}try{const he=await qn(ot(Le,"expenses"),{date:s,category:a,description:l.trim(),amount:Number(u.toFixed(2)),status:p,notes:b||"",createdAt:Dt.now()});w(ge=>[{id:he.id,date:s,category:a,description:l.trim(),amount:Number(u.toFixed(2)),status:p,notes:b||"",createdAt:Dt.now()},...ge]),Q(),R(" Gasto registrado")}catch(he){console.error(he),R(" Error al guardar gasto")}},z=X=>{I(X.id),L(X.date),N(X.category||""),F(X.description||""),ce(Number(X.amount||0)),de(X.status||"PENDIENTE"),ue(X.notes||"")},te=()=>{I(null),L(""),N(""),F(""),ce(0),de("PENDIENTE"),ue("")},$=async()=>{if(M){if(!D){R("Selecciona una categora.");return}if(!T.trim()){R("Ingresa una descripcin.");return}if(!ee||ee<=0){R("Ingresa un monto vlido.");return}try{await rn(Lt(Le,"expenses",M),{date:E,category:D,description:T.trim(),amount:Number(ee.toFixed(2)),status:re,notes:W||""}),w(X=>X.map(he=>he.id===M?{...he,date:E,category:D,description:T.trim(),amount:Number(ee.toFixed(2)),status:re,notes:W||""}:he)),te(),R(" Gasto actualizado")}catch(X){console.error(X),R(" Error al actualizar gasto")}}},ne=async X=>{confirm(`Eliminar el gasto "${X.description}"?`)&&(await Bs(Lt(Le,"expenses",X.id)),w(ge=>ge.filter(Ce=>Ce.id!==X.id)),R(" Gasto borrado"))};return A.jsxs("div",{className:"max-w-6xl mx-auto",children:[A.jsx("h2",{className:"text-2xl font-bold mb-3",children:"Gastos (Pollo)"}),A.jsxs("div",{className:"bg-white p-3 rounded shadow border mb-4 flex flex-wrap items-end gap-3 text-sm",children:[A.jsxs("div",{className:"flex flex-col",children:[A.jsx("label",{className:"font-semibold",children:"Desde"}),A.jsx("input",{type:"date",className:"border rounded px-2 py-1",value:t,onChange:X=>e(X.target.value)})]}),A.jsxs("div",{className:"flex flex-col",children:[A.jsx("label",{className:"font-semibold",children:"Hasta"}),A.jsx("input",{type:"date",className:"border rounded px-2 py-1",value:r,onChange:X=>n(X.target.value)})]}),A.jsxs("div",{className:"ml-auto text-sm",children:[A.jsx("div",{className:"font-semibold",children:"Totales del rango"}),A.jsxs("div",{children:["Total: ",wg(Ee.total)]}),A.jsxs("div",{children:["Pagado: ",wg(Ee.pagado)]}),A.jsxs("div",{children:["Pendiente: ",wg(Ee.pendiente)]})]})]}),A.jsxs("form",{onSubmit:k,className:"bg-white p-4 rounded shadow border mb-6 grid grid-cols-1 md:grid-cols-2 gap-4",children:[A.jsxs("div",{children:[A.jsx("label",{className:"block text-sm font-semibold",children:"Fecha"}),A.jsx("input",{type:"date",className:"w-full border p-2 rounded",value:s,onChange:X=>i(X.target.value)})]}),A.jsxs("div",{children:[A.jsx("label",{className:"block text-sm font-semibold",children:"Categora"}),A.jsxs("select",{className:"w-full border p-2 rounded",value:a,onChange:X=>o(X.target.value),children:[A.jsx("option",{value:"",children:"Selecciona"}),TN.map(X=>A.jsx("option",{value:X,children:X},X))]})]}),A.jsxs("div",{className:"md:col-span-2",children:[A.jsx("label",{className:"block text-sm font-semibold",children:"Descripcin"}),A.jsx("input",{className:"w-full border p-2 rounded",placeholder:"Detalle del gasto",value:l,onChange:X=>c(X.target.value)})]}),A.jsxs("div",{children:[A.jsx("label",{className:"block text-sm font-semibold",children:"Monto"}),A.jsx("input",{type:"number",step:"0.01",inputMode:"decimal",className:"w-full border p-2 rounded text-right",value:u===0?"":u,onChange:X=>f(Math.max(0,Number(X.target.value||0))),placeholder:"0.00"})]}),A.jsxs("div",{children:[A.jsx("label",{className:"block text-sm font-semibold",children:"Estado"}),A.jsxs("select",{className:"w-full border p-2 rounded",value:p,onChange:X=>m(X.target.value),children:[A.jsx("option",{value:"PENDIENTE",children:"Pendiente"}),A.jsx("option",{value:"PAGADO",children:"Pagado"})]})]}),A.jsxs("div",{className:"md:col-span-2",children:[A.jsx("label",{className:"block text-sm font-semibold",children:"Comentario"}),A.jsx("textarea",{className:"w-full border p-2 rounded resize-y min-h-24",value:b,onChange:X=>B(X.target.value),maxLength:500,placeholder:"Comentario / nota opcional"}),A.jsxs("div",{className:"text-xs text-gray-500 text-right",children:[b.length,"/500"]})]}),A.jsx("div",{className:"md:col-span-2",children:A.jsx("button",{className:"bg-blue-600 text-white px-4 py-2 rounded hover:bg-blue-700",children:"Guardar gasto"})})]}),A.jsx("div",{className:"bg-white p-2 rounded shadow border w-full",children:A.jsxs("table",{className:"min-w-full w-full text-sm",children:[A.jsx("thead",{className:"bg-gray-100",children:A.jsxs("tr",{children:[A.jsx("th",{className:"p-2 border",children:"Fecha"}),A.jsx("th",{className:"p-2 border",children:"Categora"}),A.jsx("th",{className:"p-2 border",children:"Descripcin"}),A.jsx("th",{className:"p-2 border",children:"Monto"}),A.jsx("th",{className:"p-2 border",children:"Estado"}),A.jsx("th",{className:"p-2 border",children:"Comentario"}),A.jsx("th",{className:"p-2 border",children:"Acciones"})]})}),A.jsx("tbody",{children:y?A.jsx("tr",{children:A.jsx("td",{className:"p-4 text-center",colSpan:7,children:"Cargando"})}):ae.length===0?A.jsx("tr",{children:A.jsx("td",{className:"p-4 text-center",colSpan:7,children:"Sin gastos en el rango seleccionado."})}):ae.slice().sort((X,he)=>X.date.localeCompare(he.date)).map(X=>{const he=M===X.id;return A.jsxs("tr",{className:"text-center",children:[A.jsx("td",{className:"p-2 border",children:he?A.jsx("input",{type:"date",className:"w-full border p-1 rounded",value:E,onChange:ge=>L(ge.target.value)}):X.date}),A.jsx("td",{className:"p-2 border",children:he?A.jsxs("select",{className:"w-full border p-1 rounded",value:D,onChange:ge=>N(ge.target.value),children:[A.jsx("option",{value:"",children:"Selecciona"}),TN.map(ge=>A.jsx("option",{value:ge,children:ge},ge))]}):X.category||""}),A.jsx("td",{className:"p-2 border",children:he?A.jsx("input",{className:"w-full border p-1 rounded",value:T,onChange:ge=>F(ge.target.value)}):A.jsx("span",{title:X.description,children:X.description.length>40?X.description.slice(0,40)+"":X.description})}),A.jsx("td",{className:"p-2 border",children:he?A.jsx("input",{type:"number",step:"0.01",inputMode:"decimal",className:"w-full border p-1 rounded text-right",value:Number.isNaN(ee)?"":ee,onChange:ge=>ce(Math.max(0,Number(ge.target.value||0)))}):wg(X.amount)}),A.jsx("td",{className:"p-2 border",children:he?A.jsxs("select",{className:"w-full border p-1 rounded",value:re,onChange:ge=>de(ge.target.value),children:[A.jsx("option",{value:"PENDIENTE",children:"Pendiente"}),A.jsx("option",{value:"PAGADO",children:"Pagado"})]}):A.jsx("span",{className:`px-2 py-0.5 rounded text-xs ${X.status==="PAGADO"?"bg-green-100 text-green-700":"bg-yellow-100 text-yellow-700"}`,children:X.status})}),A.jsx("td",{className:"p-2 border",children:he?A.jsx("textarea",{className:"w-full border p-1 rounded resize-y min-h-10",value:W,onChange:ge=>ue(ge.target.value),maxLength:500}):A.jsx("span",{title:X.notes||"",children:(X.notes||"").length>40?(X.notes||"").slice(0,40)+"":X.notes||""})}),A.jsx("td",{className:"p-2 border",children:A.jsx("div",{className:"flex gap-2 justify-center",children:he?A.jsxs(A.Fragment,{children:[A.jsx("button",{className:"px-2 py-1 rounded text-white bg-blue-600 hover:bg-blue-700",onClick:$,children:"Guardar"}),A.jsx("button",{className:"px-2 py-1 rounded bg-gray-200 hover:bg-gray-300",onClick:te,children:"Cancelar"})]}):A.jsxs(A.Fragment,{children:[A.jsx("button",{className:"px-2 py-1 rounded text-white bg-yellow-600 hover:bg-yellow-700",onClick:()=>z(X),children:"Editar"}),A.jsx("button",{className:"px-2 py-1 rounded text-white bg-red-600 hover:bg-red-700",onClick:()=>ne(X),children:"Borrar"})]})})})]},X.id)})})]})}),O&&A.jsx("p",{className:"mt-2 text-sm",children:O})]})}function av(t){return(t||"").trim().toLowerCase()}async function R3(){const t=await Pt(ot(Le,"products")),e=new Map;return t.forEach(r=>{const n=r.data(),s=av(n.name??n.productName);s&&e.set(s,r.id)}),e}async function R$(t=!1){const e=await R3(),r=await Pt(ot(Le,"inventory_batches")),n={checked:0,fixed:0,alreadyOk:0,missingName:0,withoutMatch:0,details:[]};for(const s of r.docs){n.checked++;const i=s.data(),a=av(i.productName);if(!a){n.missingName++,n.details.push({batchId:s.id,productName:i.productName??"",oldProductId:i.productId,status:"missingName"});continue}const o=e.get(a);if(!o){n.withoutMatch++,n.details.push({batchId:s.id,productName:i.productName??"",oldProductId:i.productId,status:"withoutMatch"});continue}if(i.productId===o){n.alreadyOk++,n.details.push({batchId:s.id,productName:i.productName??"",oldProductId:i.productId,newProductId:o,status:"alreadyOk"});continue}t||await rn(Lt(Le,"inventory_batches",s.id),{productId:o}),n.fixed++,n.details.push({batchId:s.id,productName:i.productName??"",oldProductId:i.productId,newProductId:o,status:"fixed"})}return console.group("[fixAllBatchProductIds] Resultado"),console.log("checked:",n.checked),console.log("fixed:",n.fixed),console.log("alreadyOk:",n.alreadyOk),console.log("missingName:",n.missingName),console.log("withoutMatch:",n.withoutMatch),console.groupEnd(),n}async function M$(t,e=!1){const r=av(t),s=(await R3()).get(r);if(!s)throw new Error(`No existe un producto activo con nombre "${t}".`);const i=await Pt(ot(Le,"inventory_batches"));let a=0;for(const o of i.docs){const l=o.data();av(l.productName)===r&&l.productId!==s&&(e||await rn(Lt(Le,"inventory_batches",o.id),{productId:s}),a++)}return console.log(`[fixBatchesByProductName] "${t}" fixed: ${a} lote(s)`),a}function O$(){const[t,e]=P.useState(!1),[r,n]=P.useState(""),s=async()=>{try{e(!0),n("");const l=await R$(!1);n(` Hecho. Revisados: ${l.checked}, Corregidos: ${l.fixed}, Ok: ${l.alreadyOk}, Sin nombre: ${l.missingName}, Sin match: ${l.withoutMatch}. (Mira consola para detalles)`)}catch(l){n(" Error: "+((l==null?void 0:l.message)||l))}finally{e(!1)}},[i,a]=P.useState(""),o=async()=>{if(!i.trim()){n(" Escribe el nombre del producto.");return}try{e(!0),n("");const l=await M$(i.trim(),!1);n(` Hecho. Corregidos ${l} lote(s) para "${i}".`)}catch(l){n(" Error: "+((l==null?void 0:l.message)||l))}finally{e(!1)}};return A.jsxs("div",{className:"max-w-xl mx-auto bg-white p-6 rounded shadow border space-y-4",children:[A.jsx("h1",{className:"text-xl font-bold",children:"Herramienta de Migracin de Lotes"}),A.jsxs("p",{className:"text-sm text-gray-600",children:["Corrige los ",A.jsx("code",{children:"inventory_batches.productId"})," basndose en el nombre del producto. salo una sola vez para limpiar datos viejos. Revisa la consola para un log detallado."]}),A.jsx("div",{className:"space-y-2",children:A.jsx("button",{onClick:s,disabled:t,className:"bg-blue-600 text-white px-4 py-2 rounded disabled:opacity-60",children:t?"Corriendo":"Corregir TODOS los lotes"})}),A.jsx("hr",{}),A.jsxs("div",{className:"space-y-2",children:[A.jsx("label",{className:"block text-sm font-medium",children:"Corregir por nombre:"}),A.jsx("input",{className:"border p-2 rounded w-full",placeholder:'Ej: "Pierna Entera"',value:i,onChange:l=>a(l.target.value)}),A.jsx("button",{onClick:o,disabled:t,className:"bg-indigo-600 text-white px-4 py-2 rounded disabled:opacity-60",children:t?"Corriendo":"Corregir lotes de ese producto"})]}),r&&A.jsx("p",{className:"text-sm",children:r})]})}const Hr=t=>`C$ ${Number(t??0).toFixed(2)}`,Zl=t=>Number(t??0).toFixed(3);async function H$(t){const e=new Set;for(const n of t)for(const s of n.batches||[]){const i=(s.batchId||s.id||"").trim();if(!i)continue;(s.purchasePrice===void 0||s.purchasePrice===null)&&(s.invoiceTotal===void 0||s.invoiceTotal===null)&&e.add(i)}if(e.size===0)return t;const r=new Map;return await Promise.all(Array.from(e).map(async n=>{try{const s=await zo(Lt(Le,"inventory_batches",n));if(s.exists()){const i=s.data();r.set(n,Number(i.purchasePrice||0))}}catch{}})),t.map(n=>({...n,batches:(n.batches||[]).map(s=>{if((s.purchasePrice===void 0||s.purchasePrice===null)&&(s.invoiceTotal===void 0||s.invoiceTotal===null)){const i=(s.batchId||s.id||"").trim(),a=i?r.get(i):void 0;if(a!==void 0)return{...s,purchasePrice:a}}return s})}))}function t1(t){var B,_;const e=t.batches||[],r=t.expenses||[],n=t.adjustments||[],s=Number(((B=t.totals)==null?void 0:B.lbs)??t.totalLbs??0),i=Number(((_=t.totals)==null?void 0:_.units)??t.totalUnits??0);let a=0,o=0;for(const w of e){const y=Number(w.quantity??0);let S=w.expectedTotal!==void 0&&w.expectedTotal!==null?Number(w.expectedTotal):y*Number(w.salePrice??0);isFinite(S)||(S=0);let O=y*Number(w.purchasePrice??Number.NaN);isFinite(O)||(O=w.invoiceTotal!==void 0&&w.invoiceTotal!==null?Number(w.invoiceTotal):0),a+=S,o+=O}const l=r.reduce((w,y)=>w+Number(y.amount||0),0),c=n.filter(w=>w.type==="DEBITO").reduce((w,y)=>w+Number(y.amount||0),0),u=n.filter(w=>w.type==="CREDITO").reduce((w,y)=>w+Number(y.amount||0),0),f=t.totalDebits!==void 0?Number(t.totalDebits):c,p=t.totalCredits!==void 0?Number(t.totalCredits):u,m=a-o,b=a-l-f+p;return{lbs:s,units:i,expectedSum:a,invoicedSum:o,expenses:l,debits:f,credits:p,grossProfit:m,finalAmount:b}}function V$(){const[t,e]=P.useState([]),[r,n]=P.useState(!0),[s,i]=P.useState(null),a=P.useRef(null);P.useEffect(()=>{(async()=>{n(!0);const u=Xt(ot(Le,"invoices"),fi("date","desc")),f=await Pt(u),p=[];f.forEach(b=>{const B=b.data();p.push({id:b.id,...B,batches:B.batches||[],expenses:B.expenses||[],adjustments:B.adjustments||[],totals:B.totals||{lbs:B.totalLbs||0,units:B.totalUnits||0,amount:B.totalAmount||0,expenses:B.totalExpenses||0,finalAmount:B.finalAmount||0,invoiceTotal:B.invoiceTotal||0},totalDebits:B.totalDebits||0,totalCredits:B.totalCredits||0})});const m=await H$(p);e(m),n(!1)})()},[]);const o=async u=>{const f=u.status==="PAGADA"?"PENDIENTE":"PAGADA";await rn(Lt(Le,"invoices",u.id),{status:f}),e(p=>p.map(m=>m.id===u.id?{...m,status:f}:m)),(s==null?void 0:s.id)===u.id&&i({...u,status:f})},l=async u=>{if(window.confirm(`Eliminar factura del ${u.date}?`))try{const f=Lt(Le,"invoices",u.id),p=await zo(f),m=p.exists()?p.data():null,b=rw(Le),B=(m==null?void 0:m.batches)||[];for(const _ of B){const w=_.batchId||_.id;if(!w)continue;const y=Lt(Le,"inventory_batches",w);b.update(y,{invoiceId:null,invoiceNumber:null,invoiceTotal:null})}b.delete(f),await b.commit(),e(_=>_.filter(w=>w.id!==u.id)),(s==null?void 0:s.id)===u.id&&i(null)}catch(f){console.error(f),alert("No se pudo eliminar la factura por completo.")}},c=async()=>{if(!a.current||!s)return;const u=a.current,f=await xB(u,{backgroundColor:"#ffffff",onclone:_=>{const w=_.body;w.style.background="#ffffff",w.querySelectorAll("*").forEach(y=>{const S=_.defaultView.getComputedStyle(y);S.boxShadow&&S.boxShadow!=="none"&&(y.style.boxShadow="none")})},scale:2}),p=f.toDataURL("image/png"),m=new kt("p","mm","a4"),b=m.internal.pageSize.getWidth(),B=f.height*b/f.width;m.addImage(p,"PNG",0,0,b,B),m.save(`factura_${s.number||s.date}.pdf`)};return A.jsxs("div",{className:"max-w-7xl mx-auto p-6 bg-white rounded shadow",children:[A.jsx("h2",{className:"text-2xl font-bold mb-4",children:"Facturacin"}),A.jsx("div",{className:"bg-white p-2 rounded shadow border w-full mb-4",children:A.jsxs("table",{className:"min-w-full w-full- text-sm",children:[A.jsx("thead",{className:"bg-gray-100",children:A.jsxs("tr",{children:[A.jsx("th",{className:"p-2 border",children:"Fecha"}),A.jsx("th",{className:"p-2 border",children:"N factura"}),A.jsx("th",{className:"p-2 border",children:"Descripcin"}),A.jsx("th",{className:"p-2 border",children:"Libras"}),A.jsx("th",{className:"p-2 border",children:"Unidades"}),A.jsx("th",{className:"p-2 border",children:"Facturado"}),A.jsx("th",{className:"p-2 border",children:"Ventas"}),A.jsx("th",{className:"p-2 border",children:"Gastos"}),A.jsx("th",{className:"p-2 border",children:"Dbitos"}),A.jsx("th",{className:"p-2 border",children:"Crditos"}),A.jsx("th",{className:"p-2 border",children:"Monto final"}),A.jsx("th",{className:"p-2 border",children:"Estado"}),A.jsx("th",{className:"p-2 border",children:"Acciones"})]})}),A.jsx("tbody",{children:r?A.jsx("tr",{children:A.jsx("td",{colSpan:13,className:"p-4 text-center",children:"Cargando"})}):t.length===0?A.jsx("tr",{children:A.jsx("td",{colSpan:13,className:"p-4 text-center",children:"Sin facturas"})}):t.map(u=>{const f=t1(u);return A.jsxs("tr",{className:"text-center",children:[A.jsx("td",{className:"p-2 border",children:u.date}),A.jsx("td",{className:"p-2 border",children:u.number||""}),A.jsx("td",{className:"p-2 border",children:u.description||""}),A.jsx("td",{className:"p-2 border",children:Zl(f.lbs)}),A.jsx("td",{className:"p-2 border",children:Zl(f.units)}),A.jsx("td",{className:"p-2 border",children:Hr(f.invoicedSum)}),A.jsx("td",{className:"p-2 border",children:Hr(f.expectedSum)}),A.jsx("td",{className:"p-2 border",children:Hr(f.expenses)}),A.jsx("td",{className:"p-2 border",children:Hr(f.debits)}),A.jsx("td",{className:"p-2 border",children:Hr(f.credits)}),A.jsx("td",{className:"p-2 border",children:Hr(f.finalAmount)}),A.jsx("td",{className:"p-2 border",children:A.jsx("span",{className:`px-2 py-0.5 rounded text-xs ${u.status==="PAGADA"?"bg-green-100 text-green-700":"bg-yellow-100 text-yellow-700"}`,children:u.status})}),A.jsx("td",{className:"p-2 border",children:A.jsxs("div",{className:"flex gap-2 justify-center",children:[A.jsx("button",{className:"text-xs bg-indigo-600 text-white px-2 py-1 rounded hover:bg-indigo-700",onClick:()=>i(u),children:"Ver"}),A.jsx("button",{className:"text-xs bg-blue-600 text-white px-2 py-1 rounded hover:bg-blue-700",onClick:()=>o(u),children:u.status==="PAGADA"?"Marcar PENDIENTE":"Marcar PAGADA"}),A.jsx("button",{className:"text-xs bg-red-600 text-white px-2 py-1 rounded hover:bg-red-700",onClick:()=>l(u),children:"Eliminar"})]})})]},u.id)})})]})}),s&&A.jsxs("div",{ref:a,className:"bg-white p-4 rounded shadow-2xl",children:[A.jsxs("div",{className:"flex items-center gap-2 mb-2",children:[A.jsxs("h3",{className:"text-lg font-semibold",children:["Detalle ",s.date," ",s.number?` ${s.number}`:""]}),A.jsx("button",{className:"ml-auto px-3 py-1 border rounded",onClick:()=>i(null),children:"Cerrar"}),A.jsx("button",{onClick:c,className:"bg-green-600 text-white px-3 py-1 rounded-2xl hover:bg-green-700 text-sm",children:"Imprimir PDF"})]}),(()=>{const u=t1(s);return A.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4 text-sm mb-4",children:[A.jsxs("div",{className:"space-y-1",children:[A.jsxs("div",{children:[A.jsx("span",{className:"font-semibold",children:"Estado:"})," ",s.status]}),A.jsxs("div",{children:[A.jsx("span",{className:"font-semibold",children:"Libras:"})," ",Zl(u.lbs)]}),A.jsxs("div",{children:[A.jsx("span",{className:"font-semibold",children:"Unidades:"})," ",Zl(u.units)]})]}),A.jsxs("div",{className:"space-y-1",children:[A.jsxs("div",{children:[A.jsx("span",{className:"font-semibold",children:"Monto Facturado:"})," ",Hr(u.invoicedSum)]}),A.jsxs("div",{children:[A.jsx("span",{className:"font-semibold",children:"Monto Ventas (Esperado):"})," ",Hr(u.expectedSum)]}),A.jsxs("div",{children:[A.jsx("span",{className:"font-semibold",children:"Ganancia Bruta:"})," ",Hr(u.grossProfit)]})]}),A.jsxs("div",{className:"space-y-1",children:[A.jsxs("div",{children:[A.jsx("span",{className:"font-semibold",children:"Gastos:"})," ",Hr(u.expenses)]}),A.jsxs("div",{children:[A.jsx("span",{className:"font-semibold",children:"Dbitos:"})," ",Hr(u.debits)]}),A.jsxs("div",{children:[A.jsx("span",{className:"font-semibold",children:"Crditos:"})," ",Hr(u.credits)]})]})]})})(),A.jsx("h4",{className:"font-semibold mb-1",children:"Lotes"}),A.jsxs("table",{className:"min-w-full text-sm mb-4 shadow-2xl",children:[A.jsx("thead",{className:"bg-gray-100",children:A.jsxs("tr",{children:[A.jsx("th",{className:"p-2 border",children:"Producto"}),A.jsx("th",{className:"p-2 border",children:"Unidad"}),A.jsx("th",{className:"p-2 border",children:"Cantidad"}),A.jsx("th",{className:"p-2 border",children:"Precio venta"}),A.jsx("th",{className:"p-2 border",children:"Total facturado"}),A.jsx("th",{className:"p-2 border",children:"Total esperado"}),A.jsx("th",{className:"p-2 border",children:"Ganancia bruta"})]})}),A.jsx("tbody",{children:(s.batches||[]).map((u,f)=>{const p=Number(u.quantity??0),m=u.expectedTotal!==void 0&&u.expectedTotal!==null?Number(u.expectedTotal):p*Number(u.salePrice??0);let b=p*Number(u.purchasePrice??Number.NaN);isFinite(b)||(b=u.invoiceTotal!==void 0&&u.invoiceTotal!==null?Number(u.invoiceTotal):0);const B=m-b;return A.jsxs("tr",{className:"text-center",children:[A.jsx("td",{className:"p-2 border",children:u.productName||"(sin nombre)"}),A.jsx("td",{className:"p-2 border",children:(u.unit||"").toUpperCase()}),A.jsx("td",{className:"p-2 border",children:Zl(u.quantity)}),A.jsx("td",{className:"p-2 border",children:Hr(u.salePrice)}),A.jsx("td",{className:"p-2 border",children:Hr(b)}),A.jsx("td",{className:"p-2 border",children:Hr(m)}),A.jsx("td",{className:"p-2 border",children:Hr(B)})]},f)})})]}),A.jsx("h4",{className:"font-semibold mb-1",children:"Gastos"}),A.jsxs("table",{className:"min-w-full text-sm shadow-xl mb-4",children:[A.jsx("thead",{className:"bg-gray-100",children:A.jsxs("tr",{children:[A.jsx("th",{className:"p-2 border",children:"Fecha"}),A.jsx("th",{className:"p-2 border",children:"Descripcin"}),A.jsx("th",{className:"p-2 border",children:"Monto"})]})}),A.jsx("tbody",{children:(s.expenses||[]).length>0?(s.expenses||[]).map((u,f)=>A.jsxs("tr",{className:"text-center",children:[A.jsx("td",{className:"p-2 border",children:u.date}),A.jsx("td",{className:"p-2 border",children:u.description}),A.jsx("td",{className:"p-2 border",children:Hr(u.amount)})]},f)):A.jsx("tr",{children:A.jsx("td",{colSpan:3,className:"p-3 text-center text-gray-500",children:"Sin gastos"})})})]}),A.jsx("h4",{className:"font-semibold mb-1",children:"Cargos extras (Notas crdito/dbito)"}),A.jsxs("table",{className:"min-w-full text-sm shadow-xl mb-4",children:[A.jsx("thead",{className:"bg-gray-100",children:A.jsxs("tr",{children:[A.jsx("th",{className:"p-2 border",children:"Descripcin"}),A.jsx("th",{className:"p-2 border",children:"Tipo de cargo"}),A.jsx("th",{className:"p-2 border",children:"Monto"}),A.jsx("th",{className:"p-2 border",children:"Fecha"})]})}),A.jsx("tbody",{children:(s.adjustments||[]).length>0?(s.adjustments||[]).map((u,f)=>A.jsxs("tr",{className:"text-center",children:[A.jsx("td",{className:"p-2 border",children:u.description}),A.jsx("td",{className:"p-2 border",children:A.jsx("span",{className:`px-2 py-0.5 rounded text-xs ${u.type==="DEBITO"?"bg-red-100 text-red-700":"bg-green-100 text-green-700"}`,children:u.type})}),A.jsx("td",{className:"p-2 border",children:Hr(u.amount)}),A.jsx("td",{className:"p-2 border",children:s.date})]},f)):A.jsx("tr",{children:A.jsx("td",{colSpan:4,className:"p-3 text-center text-gray-500",children:"Sin cargos extras"})})})]}),(()=>{const u=t1(s);return A.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 text-sm mb-2 justify-between",children:[A.jsxs("div",{className:"space-y-1",children:[A.jsxs("div",{children:["Total libras: ",A.jsx("strong",{children:Zl(u.lbs)})]}),A.jsxs("div",{children:["Total unidades: ",A.jsx("strong",{children:Zl(u.units)})]})]}),A.jsxs("div",{className:"space-y-1 text-center",children:[A.jsxs("div",{children:["Total facturado (costo):"," ",A.jsx("strong",{children:Hr(u.invoicedSum)})]}),A.jsxs("div",{children:["Total esperado (ventas):"," ",A.jsx("strong",{children:Hr(u.expectedSum)})]}),A.jsxs("div",{children:["Ganancia bruta (esperado  facturado):"," ",A.jsx("strong",{children:Hr(u.grossProfit)})]})]}),A.jsxs("div",{className:"space-y-1 text-right",children:[A.jsxs("div",{children:["Gastos: ",A.jsx("strong",{children:Hr(u.expenses)})]}),A.jsxs("div",{children:["Dbitos: ",A.jsx("strong",{children:Hr(u.debits)})]}),A.jsxs("div",{children:["Crditos: ",A.jsx("strong",{children:Hr(u.credits)})]})]}),A.jsx("div",{className:"md:col-span-3 mt-3",children:A.jsxs("div",{className:"bg-blue-50 border border-blue-300 rounded-lg p-4 text-center",children:[A.jsx("span",{className:"block text-lg font-semibold text-gray-800",children:"Monto final (esperado  gastos  dbitos + crditos):"}),A.jsx("span",{className:"block text-2xl font-bold text-blue-700 mt-1",children:Hr(u.finalAmount)})]})})]})})()]})]})}const si=t=>`C$${Number(t||0).toFixed(2)}`,Lu=t=>Number(t||0).toFixed(3),K$=t=>(t||"").toLowerCase()==="lb"||/libra/.test((t||"").toLowerCase()),r1=()=>{const t=new Date;return er(new Date(t.getFullYear(),t.getMonth(),1),"yyyy-MM-dd")},yg=()=>er(new Date,"yyyy-MM-dd");function q$({paidBatches:t=[],onClose:e,onCreated:r}){const n=Array.isArray(t)?t:[],[s,i]=P.useState(r1()),[a,o]=P.useState(yg()),[l,c]=P.useState(""),u=P.useMemo(()=>{const se=new Map;return n.forEach(ve=>se.set(ve.productId,{id:ve.productId,name:ve.productName})),Array.from(se.values()).sort((ve,We)=>ve.name.localeCompare(We.name))},[n]),f=P.useMemo(()=>n.filter(se=>!(s&&se.date<s||a&&se.date>a||l&&se.productId!==l)),[n,s,a,l]),[p,m]=P.useState(yg()),[b,B]=P.useState(()=>`FAC-${Date.now().toString().slice(-6)}`),[_,w]=P.useState(""),[y,S]=P.useState(()=>f.map(se=>se.id));P.useEffect(()=>{S(se=>se.filter(ve=>f.some(We=>We.id===ve)))},[f]);const[O,R]=P.useState([]),[M,I]=P.useState([]),[E,L]=P.useState(!1),[D,N]=P.useState(r1()),[T,F]=P.useState(yg());P.useEffect(()=>{(async()=>{try{L(!0);const se=Xt(ot(Le,"expenses"),fi("date","desc")),ve=await Pt(se),We=[];ve.forEach(at=>{const wt=at.data();We.push({id:at.id,date:wt.date,description:wt.description,amount:Number(wt.amount||0)})}),R(We)}catch(se){console.error(se)}finally{L(!1)}})()},[]);const ee=P.useMemo(()=>O.filter(se=>!(!se.date||D&&se.date<D||T&&se.date>T)),[O,D,T]),[ce,re]=P.useState([]),[de,W]=P.useState(!1),[ue,ae]=P.useState(""),[Ee,Q]=P.useState("DEBITO"),[k,z]=P.useState(""),te=()=>{const se=Number(k);!ue.trim()||!isFinite(se)||se<=0||(re(ve=>[...ve,{id:`${Date.now()}_${ve.length+1}`,description:ue.trim(),type:Ee,amount:Number(se.toFixed(2))}]),ae(""),z(""))},[$,ne]=P.useState(null),[X,he]=P.useState(""),[ge,Ce]=P.useState("DEBITO"),[Te,Fe]=P.useState(""),oe=se=>{ne(se.id),he(se.description),Ce(se.type),Fe(se.amount.toFixed(2))},le=()=>{ne(null),he(""),Ce("DEBITO"),Fe("")},G=()=>{if(!$)return;const se=Number(Te);!isFinite(se)||se<=0||(re(ve=>ve.map(We=>We.id===$?{...We,description:X.trim(),type:ge,amount:Number(se.toFixed(2))}:We)),le())},Re=se=>{re(ve=>ve.filter(We=>We.id!==se)),$===se&&le()},je=(se,ve)=>{S(We=>ve?[...new Set([...We,se])]:We.filter(at=>at!==se))},Ue=se=>{S(se?f.map(ve=>ve.id):[])},Pe=(se,ve)=>{I(We=>ve?[...new Set([...We,se])]:We.filter(at=>at!==se))},Ge=P.useMemo(()=>f.filter(se=>y.includes(se.id)),[f,y]),qe=P.useMemo(()=>ce.filter(se=>se.type==="DEBITO").reduce((se,ve)=>se+ve.amount,0),[ce]),tt=P.useMemo(()=>ce.filter(se=>se.type==="CREDITO").reduce((se,ve)=>se+ve.amount,0),[ce]),Ze=P.useMemo(()=>{let se=0,ve=0,We=0,at=0;for(const rt of Ge){K$(rt.unit)?se+=Number(rt.quantity||0):ve+=Number(rt.quantity||0);const ur=rt.expectedTotal??Number((Number(rt.quantity||0)*Number(rt.salePrice||0)).toFixed(2)),St=rt.invoiceTotal!==void 0&&rt.invoiceTotal!==null?Number(rt.invoiceTotal):Number((Number(rt.quantity||0)*Number(rt.purchasePrice||0)).toFixed(2));We+=Number(ur||0),at+=Number(St||0)}const wt=ee.filter(rt=>M.includes(rt.id)).reduce((rt,ur)=>rt+Number(ur.amount||0),0),_t=We-wt-qe+tt;return{totalLbs:se,totalUnits:ve,totalExpected:Number(We.toFixed(2)),totalInvoiced:Number(at.toFixed(2)),totalGastos:Number(wt.toFixed(2)),debits:Number(qe.toFixed(2)),credits:Number(tt.toFixed(2)),finalAmount:Number(_t.toFixed(2)),grossProfit:Number((We-at).toFixed(2))}},[Ge,ee,M,qe,tt]),[vt,ht]=P.useState(!1),[Ct,Ht]=P.useState(""),Et=async()=>{if(Ht(""),Ge.length===0){Ht("Selecciona al menos 1 lote pagado.");return}try{ht(!0);const se={number:b.trim(),date:p,description:_.trim(),status:"PENDIENTE",createdAt:Dt.now(),totalLbs:Number(Lu(Ze.totalLbs)),totalUnits:Number(Lu(Ze.totalUnits)),totalAmount:Ze.totalExpected,invoiceTotal:Ze.totalInvoiced,totalExpenses:Ze.totalGastos,totalDebits:Ze.debits,totalCredits:Ze.credits,finalAmount:Ze.finalAmount,batches:Ge.map(ve=>{var We;return{id:ve.id,productId:ve.productId,productName:ve.productName,unit:ve.unit,quantity:Number(Lu(ve.quantity)),salePrice:Number(Number(ve.salePrice||0).toFixed(2)),purchasePrice:Number(Number(ve.purchasePrice||0).toFixed(2)),expectedTotal:Number((Number(ve.quantity||0)*Number(ve.salePrice||0)).toFixed(2)),invoiceTotal:ve.invoiceTotal!==void 0&&ve.invoiceTotal!==null?Number(ve.invoiceTotal):Number((Number(ve.quantity||0)*Number(ve.purchasePrice||0)).toFixed(2)),batchDate:ve.date,paidAt:(We=ve.paidAt)!=null&&We.toDate?er(ve.paidAt.toDate(),"yyyy-MM-dd"):null}}),expenses:ee.filter(ve=>M.includes(ve.id)).map(ve=>({id:ve.id,date:ve.date||null,description:ve.description||"",amount:Number(Number(ve.amount||0).toFixed(2))})),adjustments:ce.map(ve=>({id:ve.id,description:ve.description,type:ve.type,amount:Number(ve.amount.toFixed(2))}))};await qn(ot(Le,"invoices"),se),Ht(" Factura creada."),r()}catch(se){console.error(se),Ht(` Error al crear factura: ${(se==null?void 0:se.message)||"desconocido"}`)}finally{ht(!1)}};return A.jsxs("div",{className:"fixed inset-0 z-[9999] bg-black/40 flex items-center justify-center p-3",children:[A.jsxs("div",{className:"bg-white w-full max-w-6xl rounded-xl shadow-xl p-4 md:p-6 max-h-[90vh] overflow-auto relative",children:[A.jsxs("div",{className:"flex items-center gap-3 mb-4",children:[A.jsx("h3",{className:"text-lg font-semibold",children:"Crear factura"}),A.jsx("button",{onClick:e,className:"ml-auto px-2 py-1 border rounded hover:bg-gray-50",children:"Cerrar"})]}),A.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-3 mb-4",children:[A.jsxs("div",{children:[A.jsx("label",{className:"block text-sm font-medium",children:"Fecha"}),A.jsx("input",{type:"date",className:"w-full border rounded px-2 py-1",value:p,onChange:se=>m(se.target.value)})]}),A.jsxs("div",{children:[A.jsx("label",{className:"block text-sm font-medium",children:"Nmero"}),A.jsx("input",{type:"text",className:"w-full border rounded px-2 py-1",value:b,onChange:se=>B(se.target.value),placeholder:"FAC-001"})]}),A.jsxs("div",{className:"md:col-span-1",children:[A.jsx("label",{className:"block text-sm font-medium",children:"Descripcin"}),A.jsx("input",{type:"text",className:"w-full border rounded px-2 py-1",value:_,onChange:se=>w(se.target.value),placeholder:"Comentarios de la factura"})]})]}),A.jsx("div",{className:"bg-gray-50 border rounded p-3 mb-3",children:A.jsxs("div",{className:"flex flex-wrap items-end gap-3",children:[A.jsxs("div",{children:[A.jsx("label",{className:"block text-sm font-medium",children:"Desde (lote)"}),A.jsx("input",{type:"date",className:"border rounded px-2 py-1",value:s,onChange:se=>i(se.target.value)})]}),A.jsxs("div",{children:[A.jsx("label",{className:"block text-sm font-medium",children:"Hasta (lote)"}),A.jsx("input",{type:"date",className:"border rounded px-2 py-1",value:a,onChange:se=>o(se.target.value)})]}),A.jsxs("div",{className:"min-w-[220px]",children:[A.jsx("label",{className:"block text-sm font-medium",children:"Producto"}),A.jsxs("select",{className:"border rounded px-2 py-1 w-full",value:l,onChange:se=>c(se.target.value),children:[A.jsx("option",{value:"",children:"Todos"}),u.map(se=>A.jsx("option",{value:se.id,children:se.name},se.id))]})]}),A.jsx("button",{className:"ml-auto px-3 py-1 rounded bg-gray-200 hover:bg-gray-300",onClick:()=>{i(r1()),o(yg()),c("")},children:"Quitar filtro"})]})}),A.jsxs("div",{className:"mb-4",children:[A.jsxs("div",{className:"flex items-center gap-3 mb-2",children:[A.jsx("h4",{className:"font-semibold",children:"Lotes pagados"}),A.jsxs("label",{className:"text-sm flex items-center gap-2",children:[A.jsx("input",{type:"checkbox",checked:f.length>0&&y.length===f.length,onChange:se=>Ue(se.target.checked)}),"Seleccionar todos (sobre el filtro)"]})]}),f.length===0?A.jsx("p",{className:"text-sm text-gray-500",children:"No hay lotes pagados disponibles en el filtro actual."}):A.jsx("div",{className:"border rounded max-h-80 overflow-auto",children:A.jsxs("table",{className:"min-w-full text-sm",children:[A.jsx("thead",{className:"bg-gray-100",children:A.jsxs("tr",{children:[A.jsx("th",{className:"p-2 border",children:"Sel"}),A.jsx("th",{className:"p-2 border",children:"Fecha lote"}),A.jsx("th",{className:"p-2 border",children:"Producto"}),A.jsx("th",{className:"p-2 border",children:"Unidad"}),A.jsx("th",{className:"p-2 border",children:"Cantidad"}),A.jsx("th",{className:"p-2 border",children:"Precio venta"}),A.jsx("th",{className:"p-2 border",children:"Total facturado"}),A.jsx("th",{className:"p-2 border",children:"Total esperado"}),A.jsx("th",{className:"p-2 border",children:"Ganancia bruta"}),A.jsx("th",{className:"p-2 border",children:"Fecha pago"})]})}),A.jsx("tbody",{children:f.map(se=>{var _t;const ve=y.includes(se.id),We=se.expectedTotal??Number((Number(se.quantity||0)*Number(se.salePrice||0)).toFixed(2)),at=se.invoiceTotal!==void 0&&se.invoiceTotal!==null?Number(se.invoiceTotal):Number((Number(se.quantity||0)*Number(se.purchasePrice||0)).toFixed(2)),wt=We-at;return A.jsxs("tr",{className:"text-center",children:[A.jsx("td",{className:"p-2 border",children:A.jsx("input",{type:"checkbox",checked:ve,onChange:rt=>je(se.id,rt.target.checked)})}),A.jsx("td",{className:"p-2 border",children:se.date}),A.jsx("td",{className:"p-2 border",children:se.productName}),A.jsx("td",{className:"p-2 border",children:(se.unit||"").toUpperCase()}),A.jsx("td",{className:"p-2 border",children:Lu(se.quantity)}),A.jsx("td",{className:"p-2 border",children:si(se.salePrice)}),A.jsx("td",{className:"p-2 border",children:si(at)}),A.jsx("td",{className:"p-2 border",children:si(We)}),A.jsx("td",{className:"p-2 border",children:si(wt)}),A.jsx("td",{className:"p-2 border",children:(_t=se.paidAt)!=null&&_t.toDate?er(se.paidAt.toDate(),"yyyy-MM-dd"):""})]},se.id)})})]})})]}),A.jsxs("div",{className:"mb-4",children:[A.jsxs("div",{className:"flex items-center gap-3 mb-2",children:[A.jsx("h4",{className:"font-semibold",children:"Gastos a incluir (opcional)"}),E&&A.jsx("span",{className:"text-xs text-gray-500",children:"Cargando"}),A.jsxs("div",{className:"ml-auto flex items-end gap-3",children:[A.jsxs("div",{children:[A.jsx("label",{className:"block text-xs text-gray-600",children:"Desde (gasto)"}),A.jsx("input",{type:"date",className:"border rounded px-2 py-1",value:D,onChange:se=>N(se.target.value)})]}),A.jsxs("div",{children:[A.jsx("label",{className:"block text-xs text-gray-600",children:"Hasta (gasto)"}),A.jsx("input",{type:"date",className:"border rounded px-2 py-1",value:T,onChange:se=>F(se.target.value)})]})]})]}),ee.length===0?A.jsx("p",{className:"text-sm text-gray-500",children:"No hay gastos en el rango seleccionado."}):A.jsx("div",{className:"border rounded max-h-48 overflow-auto",children:A.jsxs("table",{className:"min-w-full text-sm",children:[A.jsx("thead",{className:"bg-gray-100",children:A.jsxs("tr",{children:[A.jsx("th",{className:"p-2 border",children:"Sel"}),A.jsx("th",{className:"p-2 border",children:"Fecha"}),A.jsx("th",{className:"p-2 border",children:"Descripcin"}),A.jsx("th",{className:"p-2 border",children:"Monto"})]})}),A.jsx("tbody",{children:ee.map(se=>{const ve=M.includes(se.id);return A.jsxs("tr",{className:"text-center",children:[A.jsx("td",{className:"p-2 border",children:A.jsx("input",{type:"checkbox",checked:ve,onChange:We=>Pe(se.id,We.target.checked)})}),A.jsx("td",{className:"p-2 border",children:se.date||""}),A.jsx("td",{className:"p-2 border",children:se.description||""}),A.jsx("td",{className:"p-2 border",children:si(Number(se.amount||0))})]},se.id)})})]})})]}),A.jsxs("div",{className:"mb-4",children:[A.jsxs("div",{className:"flex items-center gap-3 mb-2",children:[A.jsx("h4",{className:"font-semibold",children:"Notas Crdito/Dbito (Cargos extras)"}),A.jsx("button",{className:"ml-auto px-3 py-1 rounded bg-blue-600 text-white hover:bg-blue-700",onClick:()=>W(!0),children:"Crear Cargo"})]}),ce.length===0?A.jsx("p",{className:"text-sm text-gray-500",children:"Sin cargos agregados."}):A.jsx("div",{className:"border rounded max-h-40 overflow-auto",children:A.jsxs("table",{className:"min-w-full text-sm",children:[A.jsx("thead",{className:"bg-gray-100",children:A.jsxs("tr",{children:[A.jsx("th",{className:"p-2 border",children:"Descripcin"}),A.jsx("th",{className:"p-2 border",children:"Tipo"}),A.jsx("th",{className:"p-2 border",children:"Monto"}),A.jsx("th",{className:"p-2 border",children:"Acciones"})]})}),A.jsx("tbody",{children:ce.map(se=>{const ve=$===se.id;return A.jsxs("tr",{className:"text-center",children:[A.jsx("td",{className:"p-2 border",children:ve?A.jsx("textarea",{className:"w-full border rounded px-2 py-1 min-h-[70px]",value:X,onChange:We=>he(We.target.value)}):A.jsx("span",{title:se.description,children:se.description.length>60?`${se.description.slice(0,60)}`:se.description})}),A.jsx("td",{className:"p-2 border",children:ve?A.jsxs("select",{className:"w-full border rounded px-2 py-1",value:ge,onChange:We=>Ce(We.target.value),children:[A.jsx("option",{value:"DEBITO",children:"Dbito"}),A.jsx("option",{value:"CREDITO",children:"Crdito"})]}):A.jsx("span",{className:`px-2 py-0.5 rounded text-xs ${se.type==="DEBITO"?"bg-red-100 text-red-700":"bg-green-100 text-green-700"}`,children:se.type})}),A.jsx("td",{className:"p-2 border",children:ve?A.jsx("input",{type:"number",step:"0.01",className:"w-full border rounded px-2 py-1 text-right",value:Te,onChange:We=>Fe(We.target.value)}):si(se.amount)}),A.jsx("td",{className:"p-2 border",children:ve?A.jsxs("div",{className:"flex gap-2 justify-center",children:[A.jsx("button",{className:"px-2 py-1 rounded bg-green-600 text-white hover:bg-green-700 text-xs",onClick:G,children:"Guardar"}),A.jsx("button",{className:"px-2 py-1 rounded bg-gray-200 hover:bg-gray-300 text-xs",onClick:le,children:"Cancelar"}),A.jsx("button",{className:"px-2 py-1 rounded bg-red-600 text-white hover:bg-red-700 text-xs",onClick:()=>Re(se.id),children:"Eliminar"})]}):A.jsxs("div",{className:"flex gap-2 justify-center",children:[A.jsx("button",{className:"px-2 py-1 rounded bg-indigo-600 text-white hover:bg-indigo-700 text-xs",onClick:()=>oe(se),children:"Editar"}),A.jsx("button",{className:"px-2 py-1 rounded bg-red-600 text-white hover:bg-red-700 text-xs",onClick:()=>Re(se.id),children:"Eliminar"})]})})]},se.id)})})]})})]}),A.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 text-sm mb-4 justify-between",children:[A.jsxs("div",{className:"space-y-1",children:[A.jsxs("div",{children:["Total libras: ",A.jsx("strong",{children:Lu(Ze.totalLbs)})]}),A.jsxs("div",{children:["Total unidades: ",A.jsx("strong",{children:Lu(Ze.totalUnits)})]})]}),A.jsxs("div",{className:"space-y-1 text-center",children:[A.jsxs("div",{children:["Total facturado (costo):"," ",A.jsx("strong",{children:si(Ze.totalInvoiced)})]}),A.jsxs("div",{children:["Total esperado (ventas):"," ",A.jsx("strong",{children:si(Ze.totalExpected)})]}),A.jsxs("div",{children:["Ganancia bruta (esperado  facturado):"," ",A.jsx("strong",{children:si(Ze.grossProfit)})]})]}),A.jsxs("div",{className:"space-y-1 text-right",children:[A.jsxs("div",{children:["Gastos: ",A.jsx("strong",{children:si(Ze.totalGastos)})]}),A.jsxs("div",{children:["Dbitos: ",A.jsx("strong",{children:si(Ze.debits)})]}),A.jsxs("div",{children:["Crditos: ",A.jsx("strong",{children:si(Ze.credits)})]})]}),A.jsx("div",{className:"md:col-span-3 mt-3",children:A.jsxs("div",{className:"p-3 bg-blue-50 border border-blue-200 rounded text-center font-semibold text-lg",children:["Monto final (esperado  gastos  dbitos + crditos):"," ",A.jsx("span",{className:"text-blue-700",children:si(Ze.finalAmount)})]})})]}),A.jsxs("div",{className:"flex items-center gap-2",children:[A.jsx("button",{disabled:vt,onClick:Et,className:"bg-blue-600 text-white px-4 py-2 rounded hover:bg-blue-700 disabled:opacity-60",children:vt?"Creando":"Crear factura"}),A.jsx("button",{onClick:e,className:"px-4 py-2 border rounded",children:"Cancelar"}),Ct&&A.jsx("span",{className:"text-sm ml-2",children:Ct})]}),vt&&A.jsxs("div",{className:"absolute inset-0 z-[11000] bg-white/80 backdrop-blur-sm flex flex-col items-center justify-center gap-3",children:[A.jsxs("svg",{className:"animate-spin h-8 w-8 text-blue-600",viewBox:"0 0 24 24",children:[A.jsx("circle",{className:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor",strokeWidth:"4",fill:"none"}),A.jsx("path",{className:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8v4a4 4 0 00-4 4H4z"})]}),A.jsx("div",{className:"text-sm font-medium text-blue-700",children:"Creando factura"})]})]}),de&&A.jsx("div",{className:"fixed inset-0 z-[10000] bg-black/50 flex items-center justify-center p-3",children:A.jsxs("div",{className:"bg-white w-full max-w-lg rounded-xl shadow-xl p-4",children:[A.jsxs("div",{className:"flex items-center mb-3",children:[A.jsx("h4",{className:"font-semibold",children:"Nuevo cargo"}),A.jsx("button",{className:"ml-auto px-2 py-1 border rounded hover:bg-gray-50",onClick:()=>W(!1),children:"Cerrar"})]}),A.jsxs("div",{className:"space-y-3",children:[A.jsxs("div",{children:[A.jsx("label",{className:"block text-sm font-medium mb-1",children:"Descripcin"}),A.jsx("textarea",{className:"w-full border rounded px-2 py-1 min-h-[90px]",value:ue,onChange:se=>ae(se.target.value),placeholder:"Detalle del cargo"})]}),A.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-3",children:[A.jsxs("div",{children:[A.jsx("label",{className:"block text-sm font-medium",children:"Tipo de cargo"}),A.jsxs("select",{className:"w-full border rounded px-2 py-1",value:Ee,onChange:se=>Q(se.target.value),children:[A.jsx("option",{value:"DEBITO",children:"Dbito"}),A.jsx("option",{value:"CREDITO",children:"Crdito"})]})]}),A.jsxs("div",{children:[A.jsx("label",{className:"block text-sm font-medium",children:"Monto"}),A.jsx("input",{type:"number",step:"0.01",className:"w-full border rounded px-2 py-1",value:k,onChange:se=>z(se.target.value),placeholder:"0.00"})]})]}),A.jsx("div",{className:"flex justify-end",children:A.jsx("button",{className:"px-3 py-1 rounded bg-blue-600 text-white hover:bg-blue-700",onClick:te,children:"Agregar"})})]})]})})]})}const ec=t=>`C$ ${Number(t||0).toFixed(2)}`,ju=t=>Number(t||0).toFixed(3),G$=t=>(t||"").toLowerCase()==="lb"||/libra/.test((t||"").toLowerCase());function z$(){const[t,e]=P.useState([]),[r,n]=P.useState(!0),[s,i]=P.useState(!1),[a,o]=P.useState(null),[l,c]=P.useState(er(new Date(new Date().getFullYear(),new Date().getMonth(),1),"yyyy-MM-dd")),[u,f]=P.useState(er(new Date,"yyyy-MM-dd")),[p,m]=P.useState(""),[b,B]=P.useState(!1),{refreshKey:_,refresh:w}=rh();P.useEffect(()=>{(async()=>{n(!0);const I=Xt(ot(Le,"inventory_batches"),rr("status","==","PAGADO"),fi("date","desc")),E=await Pt(I),L=[];E.forEach(D=>{const N=D.data(),T=Number(N.quantity||0),F=Number(N.remaining||0),ee=Number(N.purchasePrice||0),ce=Number(N.salePrice||0),re=Number((T*ee).toFixed(2)),de=Number((T*ce).toFixed(2));L.push({id:D.id,productId:N.productId,productName:N.productName,category:N.category,unit:N.unit,quantity:T,remaining:F,purchasePrice:ee,salePrice:ce,invoiceTotal:N.invoiceTotal!=null?Number(N.invoiceTotal):re,expectedTotal:N.expectedTotal!=null?Number(N.expectedTotal):de,date:N.date,status:N.status,paidAt:N.paidAt})}),e(L),n(!1)})()},[_]);const y=P.useMemo(()=>t.filter(I=>!(l&&I.date<l||u&&I.date>u||p&&I.productId!==p)),[t,l,u,p]),S=P.useMemo(()=>{let I=0,E=0,L=0,D=0,N=0,T=0;for(const F of y)G$(F.unit)?(I+=F.quantity,E+=F.remaining):(L+=F.quantity,D+=F.remaining),N+=Number(F.expectedTotal||0),T+=Number(F.invoiceTotal||0);return{lbsIng:I,lbsRem:E,udsIng:L,udsRem:D,totalEsperado:N,totalFact:T,gross:N-T}},[y]),O=I=>{o(I),i(!0)},R=async()=>{if(a)try{const I=Lt(Le,"inventory_batches",a.id);await rn(I,{status:"PENDIENTE",remaining:a.quantity});const E=ot(Le,"salesV2"),L=await Pt(Xt(E,rr("batchId","==",a.id))),D=await Pt(Xt(E,rr("productName","==",a.productName),rr("date","==",a.date))),N=[...L.docs,...D.docs];for(const T of N)await Bs(Lt(Le,"salesV2",T.id));e(T=>T.map(F=>F.id===a.id?{...F,status:"PENDIENTE",remaining:a.quantity}:F)),i(!1),o(null),w()}catch(I){console.error("Error al marcar pendiente:",I)}},M=P.useMemo(()=>{const I=new Map;return t.forEach(E=>I.set(E.productId,{id:E.productId,name:E.productName})),Array.from(I.values())},[t]);return A.jsxs("div",{className:"max-w-7xl mx-auto",children:[A.jsxs("div",{className:"flex items-center justify-between mb-3",children:[A.jsx("h2",{className:"text-2xl font-bold",children:"Pagados"}),A.jsx(zp,{onClick:w,loading:r})]}),A.jsxs("div",{className:"bg-white p-3 rounded shadow-2xl border mb-4 flex flex-wrap items-end gap-3 text-sm",children:[A.jsxs("div",{className:"flex flex-col",children:[A.jsx("label",{className:"font-semibold",children:"Desde"}),A.jsx("input",{type:"date",className:"border rounded px-2 py-1",value:l,onChange:I=>c(I.target.value)})]}),A.jsxs("div",{className:"flex flex-col",children:[A.jsx("label",{className:"font-semibold",children:"Hasta"}),A.jsx("input",{type:"date",className:"border rounded px-2 py-1",value:u,onChange:I=>f(I.target.value)})]}),A.jsxs("div",{className:"flex flex-col min-w-[240px]",children:[A.jsx("label",{className:"font-semibold",children:"Producto"}),A.jsxs("select",{className:"border rounded px-2 py-1",value:p,onChange:I=>m(I.target.value),children:[A.jsx("option",{value:"",children:"Todos"}),M.map(I=>A.jsx("option",{value:I.id,children:I.name},I.id))]})]}),A.jsx("button",{className:"px-3 py-1 rounded-2xl bg-gray-200 hover:bg-gray-300",onClick:()=>{c(""),f(""),m("")},children:"Quitar filtro"}),A.jsx("button",{className:"ml-auto px-3 py-1 rounded-2xl bg-blue-600 text-white hover:bg-blue-700",onClick:()=>B(!0),children:"Crear factura"})]}),A.jsx("div",{className:"bg-gray-50 p-3 rounded-2xl shadow-2xl border mb-3 text-base",children:A.jsxs("div",{className:"grid grid-cols-2 gap-y-2 gap-x-8",children:[A.jsxs("div",{children:[A.jsx("span",{className:"font-semibold",children:"Libras ingresadas:"})," ",ju(S.lbsIng)]}),A.jsxs("div",{children:[A.jsx("span",{className:"font-semibold",children:"Unidades ingresadas:"})," ",ju(S.udsIng)]}),A.jsxs("div",{children:[A.jsx("span",{className:"font-semibold",children:"Total esperado en ventas:"})," ",ec(S.totalEsperado)]}),A.jsxs("div",{children:[A.jsx("span",{className:"font-semibold",children:"Libras restantes:"})," ",ju(S.lbsRem)]}),A.jsxs("div",{children:[A.jsx("span",{className:"font-semibold",children:"Unidades restantes:"})," ",ju(S.udsRem)]}),A.jsxs("div",{children:[A.jsx("span",{className:"font-semibold",children:"Total facturado:"})," ",ec(S.totalFact)]}),A.jsxs("div",{className:"col-span-3",children:[A.jsx("span",{className:"font-semibold",children:"Ganancia sin gastos:"})," ",ec(S.gross)]}),A.jsxs("div",{children:[A.jsx("span",{className:"font-semibold",children:"Cantidad de Lotes (por filtro):"})," ",y.length.toLocaleString()]})]})}),A.jsx("div",{className:"bg-white p-2 rounded shadow-2xl border w-full",children:A.jsxs("table",{className:"min-w-full w-full text-sm",children:[A.jsx("thead",{className:"bg-gray-100",children:A.jsxs("tr",{children:[A.jsx("th",{className:"p-2 border",children:"Fecha"}),A.jsx("th",{className:"p-2 border",children:"Tipo"}),A.jsx("th",{className:"p-2 border",children:"Producto"}),A.jsx("th",{className:"p-2 border",children:"Unidad"}),A.jsx("th",{className:"p-2 border",children:"Ingresado"}),A.jsx("th",{className:"p-2 border",children:"Restantes"}),A.jsx("th",{className:"p-2 border",children:"Precio Compra"}),A.jsx("th",{className:"p-2 border",children:"Precio Venta"}),A.jsx("th",{className:"p-2 border",children:"Total factura"}),A.jsx("th",{className:"p-2 border",children:"Total esperado"}),A.jsx("th",{className:"p-2 border",children:"Fecha pago"}),A.jsx("th",{className:"p-2 border",children:"Acciones"})]})}),A.jsx("tbody",{children:r?A.jsx("tr",{children:A.jsx("td",{colSpan:12,className:"p-4 text-center",children:"Cargando"})}):y.length===0?A.jsx("tr",{children:A.jsx("td",{colSpan:12,className:"p-4 text-center",children:"Sin lotes pagados"})}):y.map(I=>{var E;return A.jsxs("tr",{className:"text-center",children:[A.jsx("td",{className:"p-2 border",children:I.date}),A.jsx("td",{className:"p-2 border",children:(I.category||"").toUpperCase()}),A.jsx("td",{className:"p-2 border",children:I.productName}),A.jsx("td",{className:"p-2 border",children:(I.unit||"").toUpperCase()}),A.jsx("td",{className:"p-2 border",children:ju(I.quantity)}),A.jsx("td",{className:"p-2 border",children:ju(I.remaining)}),A.jsx("td",{className:"p-2 border",children:ec(I.purchasePrice)}),A.jsx("td",{className:"p-2 border",children:ec(I.salePrice)}),A.jsx("td",{className:"p-2 border",children:ec(I.invoiceTotal||0)}),A.jsx("td",{className:"p-2 border",children:ec(I.expectedTotal||0)}),A.jsx("td",{className:"p-2 border",children:(E=I.paidAt)!=null&&E.toDate?er(I.paidAt.toDate(),"yyyy-MM-dd"):""}),A.jsx("td",{className:"p-2 border",children:A.jsx("button",{className:"px-2 py-1 rounded text-white bg-yellow-600 hover:bg-yellow-700",onClick:()=>O(I),children:"Marcar PENDIENTE"})})]},I.id)})})]})}),b&&A.jsx(q$,{paidBatches:y,onClose:()=>B(!1),onCreated:()=>B(!1)}),s&&a&&A.jsx("div",{className:"fixed inset-0 flex items-center justify-center bg-black/50 z-50",children:A.jsxs("div",{className:"bg-white rounded-lg shadow-2xl p-6 w-[90%] max-w-md",children:[A.jsx("h3",{className:"text-lg font-semibold mb-3",children:"Confirmar accin"}),A.jsxs("p",{className:"text-gray-700 mb-4",children:["Seguro que quieres marcar pendiente este inventario?",A.jsx("br",{}),"Al hacerlo, las libras se restaurarn y se eliminarn las ventas generadas del dashboard."]}),A.jsxs("div",{className:"flex justify-end gap-3",children:[A.jsx("button",{onClick:()=>i(!1),className:"px-4 py-2 bg-gray-200 hover:bg-gray-300 rounded",children:"Cancelar"}),A.jsx("button",{onClick:R,className:"px-4 py-2 bg-yellow-600 text-white hover:bg-yellow-700 rounded",children:"Confirmar"})]})]})})]})}const On=t=>`C$ ${(Number(t)||0).toFixed(2)}`,$$=["","HOMBRE","MUJER","NINO","NINA","UNISEX"];function xg(t){return(t||"").trim().toUpperCase().replace(/\s+/g,"-").replace(/[^A-Z0-9-]/g,"")}function W$(t){switch((t||"").toUpperCase()){case"HOMBRE":return"HOM";case"MUJER":return"MUJ";case"NINO":return"NIN";case"NINA":return"NIA";case"UNISEX":return"UNI";default:return"GEN"}}function X$(t){const e="ROP",r=xg(t.subcat).slice(0,3)||"GEN",n=W$(t.gender),s=xg(t.color).slice(0,3)||"COL",i=xg(t.size)||"TLL",a=xg(t.brand).slice(0,4)||"BRD",o=Date.now().toString(36).toUpperCase().slice(-4);return`${e}-${r}-${n}-${s}-${i}-${a}-${o}`}const qh=/^[A-Za-z0-9._-]{0,32}$/;function J$(){const[t,e]=P.useState([]),[r,n]=P.useState([]),[s,i]=P.useState(!0),[a,o]=P.useState(""),[l,c]=P.useState(er(eh(new Date),"yyyy-MM-dd")),[u,f]=P.useState(er(Zd(new Date),"yyyy-MM-dd")),[p,m]=P.useState(""),[b,B]=P.useState(""),[_,w]=P.useState(er(new Date,"yyyy-MM-dd")),[y,S]=P.useState(0),[O,R]=P.useState(0),[M,I]=P.useState(0),[E,L]=P.useState(0),[D,N]=P.useState(0),[T,F]=P.useState(""),[ee,ce]=P.useState(""),[re,de]=P.useState(""),[W,ue]=P.useState(""),[ae,Ee]=P.useState(""),[Q,k]=P.useState(""),[z,te]=P.useState(""),[$,ne]=P.useState(!1),[X,he]=P.useState(""),[ge,Ce]=P.useState("Camisa"),[Te,Fe]=P.useState(null),[oe,le]=P.useState(""),[G,Re]=P.useState(0),[je,Ue]=P.useState(0),[Pe,Ge]=P.useState(0),[qe,tt]=P.useState(0),[Ze,vt]=P.useState(0),[ht,Ct]=P.useState(""),[Ht,Et]=P.useState(""),[se,ve]=P.useState(""),[We,at]=P.useState(""),[wt,_t]=P.useState(""),[rt,ur]=P.useState(""),[St,Ur]=P.useState(""),[sr,fr]=P.useState(null),[hn,vr]=P.useState({x:0,y:0}),[jt,Yt]=P.useState(!1);P.useEffect(()=>{const be=()=>fr(null),et=nt=>nt.key==="Escape"&&fr(null);return document.addEventListener("click",be),document.addEventListener("keydown",et),()=>{document.removeEventListener("click",be),document.removeEventListener("keydown",et)}},[]);const cs=(be,et,nt=192,Mt=160)=>{let It=be;be+nt+8>window.innerWidth&&(It=be-nt),It=Math.max(8,Math.min(It,window.innerWidth-nt-8));let mt=et;return et+Mt+8>window.innerHeight&&(mt=window.innerHeight-Mt-8),mt=Math.max(8,Math.min(mt,window.innerHeight-Mt-8)),{x:It,y:mt}},zr=(be,et)=>{be.stopPropagation();const nt=be.currentTarget.getBoundingClientRect(),Mt=nt.right,Zt=nt.bottom,It=cs(Mt,Zt);vr(It),fr(mt=>mt===et?null:et)};P.useEffect(()=>{const be=()=>fr(null),et=nt=>{nt.key==="Escape"&&fr(null)};return document.addEventListener("click",be),document.addEventListener("keydown",et),()=>{document.removeEventListener("click",be),document.removeEventListener("keydown",et)}},[]),P.useEffect(()=>{if(!sr)return;const be=()=>fr(null);return window.addEventListener("scroll",be,!0),window.addEventListener("resize",be),()=>{window.removeEventListener("scroll",be,!0),window.removeEventListener("resize",be)}},[sr]),P.useEffect(()=>{(async()=>{const be=await Pt(ot(Le,"products_clothes")),et=[];be.forEach(It=>{const mt=It.data();et.push({id:It.id,name:mt.name??"(sin nombre)",category:mt.category??"(sin categora)",measurement:mt.measurement??"unidad",price:Number(mt.price??0),sku:mt.sku||"",size:mt.size||"",color:mt.color||"",gender:mt.gender||"",brand:mt.brand||""})}),e(et);const nt=Xt(ot(Le,"inventory_clothes_batches"),fi("date","desc")),Mt=await Pt(nt),Zt=[];Mt.forEach(It=>{const mt=It.data();Zt.push({id:It.id,productId:mt.productId,productName:mt.productName,category:mt.category,unit:mt.unit,quantity:Number(mt.quantity||0),remaining:Number(mt.remaining??mt.quantity??0),purchasePrice:Number(mt.purchasePrice||0),salePrice:Number(mt.salePrice||0),invoiceTotal:Number(mt.invoiceTotal??Number(mt.quantity||0)*Number(mt.purchasePrice||0)),expectedTotal:Number(mt.expectedTotal??Number(mt.quantity||0)*Number(mt.salePrice||0)),date:mt.date,createdAt:mt.createdAt,status:mt.status,notes:mt.notes||"",sku:mt.sku||"",size:mt.size||"",color:mt.color||"",gender:mt.gender||"",brand:mt.brand||"",clientCode:mt.clientCode||""})}),n(Zt),i(!1)})()},[]),P.useEffect(()=>{const be=t.find(et=>et.id===b);be&&(I(Number(be.price||0)),be.sku&&ce(be.sku),be.size&&de(et=>et||be.size),be.color&&ue(et=>et||be.color),be.gender&&Ee(et=>et||be.gender),be.brand&&k(et=>et||be.brand))},[b,t]),P.useEffect(()=>{L(Math.floor(y*O*100)/100)},[y,O]),P.useEffect(()=>{N(Math.floor(y*M*100)/100)},[y,M]),P.useEffect(()=>{const be=t.find(Mt=>Mt.id===b);if(be!=null&&be.sku){ce(be.sku);return}const et=$&&ge?ge:(be==null?void 0:be.category)||"";if(!et&&!ae&&!W&&!re&&!Q){ce("");return}const nt=X$({subcat:et,gender:ae||"",color:W||"",size:re||"",brand:Q||""});ce(nt)},[$,ge,b,ae,W,re,Q,t]);const mr=P.useMemo(()=>r.filter(be=>!(l&&be.date<l||u&&be.date>u||p&&be.productId!==p)),[r,l,u,p]),Qe=P.useMemo(()=>{const be=mr.reduce((Zt,It)=>Zt+(It.invoiceTotal||0),0),et=mr.reduce((Zt,It)=>Zt+(It.expectedTotal||0),0),nt=mr.reduce((Zt,It)=>Zt+It.quantity,0),Mt=mr.reduce((Zt,It)=>Zt+It.remaining,0);return{udsIng:nt,udsRem:Mt,totalFacturado:be,totalEsperado:et}},[mr]),Oe=async be=>{be.preventDefault(),o("");const et=!!b&&!$,nt=t.find(mt=>mt.id===b),Mt=et?(nt==null?void 0:nt.name)||"":X||"",Zt=et?(nt==null?void 0:nt.category)||"":ge||"General",It=et&&(nt==null?void 0:nt.measurement)||"unidad";if(!Mt||y<=0||O<=0){o("Completa nombre/cantidad/costo.");return}if(z&&!qh.test(z)){o("Cdigo del cliente invlido (solo A-Z, 0-9, . _ - , mx 32).");return}try{const mt=await qn(ot(Le,"inventory_clothes_batches"),{productId:et?nt.id:"",productName:Mt,category:Zt,unit:It,quantity:y,remaining:y,purchasePrice:O,salePrice:M,invoiceTotal:E,expectedTotal:D,date:_,createdAt:Dt.now(),status:"PENDIENTE",notes:T||"",sku:ee||"",size:re||"",color:W||"",gender:ae||"",brand:Q||"",clientCode:z||""});n(Es=>[{id:mt.id,productId:et?nt.id:"",productName:Mt,category:Zt,unit:It,quantity:y,remaining:y,purchasePrice:O,salePrice:M,invoiceTotal:E,expectedTotal:D,date:_,createdAt:Dt.now(),status:"PENDIENTE",notes:T||"",sku:ee||"",size:re||"",color:W||"",gender:ae||"",brand:Q||"",clientCode:z||""},...Es]),o(" Lote de ropa creado"),B(""),w(er(new Date,"yyyy-MM-dd")),S(0),R(0),I(0),L(0),N(0),F(""),ce(""),de(""),ue(""),Ee(""),k(""),te(""),ne(!1),he(""),Ce("Camisa")}catch(mt){console.error(mt),o(" Error al crear lote")}},Ft=async be=>{confirm(`Marcar PAGADO el lote del ${be.date} (${be.productName})?`)&&(await rn(Lt(Le,"inventory_clothes_batches",be.id),{status:"PAGADO"}),n(nt=>nt.map(Mt=>Mt.id===be.id?{...Mt,status:"PAGADO"}:Mt)))},ft=be=>{Fe(be.id),le(be.date),Re(be.quantity),Ue(be.purchasePrice),Ge(be.salePrice),tt(Number((be.quantity*be.purchasePrice).toFixed(2))),vt(Number((be.quantity*be.salePrice).toFixed(2))),Ct(be.notes||""),Et(be.sku||""),ve(be.size||""),at(be.color||""),_t(be.gender||""),ur(be.brand||""),Ur(be.clientCode||"")},ct=()=>{Fe(null),le(""),Re(0),Ue(0),Ge(0),tt(0),vt(0),Ct(""),Et(""),ve(""),at(""),_t(""),ur(""),Ur("")};P.useEffect(()=>{Te&&tt(Math.floor(G*je*100)/100)},[Te,G,je]),P.useEffect(()=>{Te&&vt(Math.floor(G*Pe*100)/100)},[Te,G,Pe]);const Ut=async()=>{if(!Te)return;const be=r.find(Zt=>Zt.id===Te);if(!be)return;const et=Math.max(0,be.quantity-be.remaining),nt=Math.max(0,G-et);if(St&&!qh.test(St)){o("Cdigo del cliente invlido (solo A-Z, 0-9, . _ - , mx 32).");return}const Mt=Lt(Le,"inventory_clothes_batches",Te);await rn(Mt,{date:oe,quantity:G,purchasePrice:je,salePrice:Pe,invoiceTotal:qe,expectedTotal:Ze,notes:ht,remaining:nt,sku:Ht,size:se,color:We,gender:wt||"",brand:rt||"",clientCode:St||""}),n(Zt=>Zt.map(It=>It.id===Te?{...It,date:oe,quantity:G,purchasePrice:je,salePrice:Pe,invoiceTotal:qe,expectedTotal:Ze,notes:ht,remaining:nt,sku:Ht,size:se,color:We,gender:wt||"",brand:rt||"",clientCode:St||""}:It)),ct(),o(" Lote actualizado")},it=async be=>{confirm(`Eliminar el lote del ${be.date} (${be.productName})?`)&&(await Bs(Lt(Le,"inventory_clothes_batches",be.id)),n(nt=>nt.filter(Mt=>Mt.id!==be.id)),o(" Lote eliminado"))},Nt=()=>{const be=(l?`Desde ${l}`:"Desde inicio")+"  "+(u?`Hasta ${u}`:"Hasta hoy"),et=It=>(It||"").replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;"),nt=mr.map(It=>`
      <tr>
        <td>${It.date}</td>
        <td>${(It.category||"").toUpperCase()}</td>
        <td>${et(It.productName)}</td>
        <td>${et(It.sku||"")}</td>
        <td>${et(It.size||"")}</td>
        <td>${et(It.color||"")}</td>
        <td>${et(It.clientCode||"")}</td>
        <td>${et(It.gender||"")}</td>
        <td>${(It.unit||"").toUpperCase()}</td>
        <td style="text-align:right">${It.quantity.toFixed(0)}</td>
        <td style="text-align:right">${It.remaining.toFixed(0)}</td>
        <td style="text-align:right">${On(It.purchasePrice)}</td>
        <td style="text-align:right">${On(It.salePrice)}</td>
        <td style="text-align:right">${On(It.invoiceTotal||0)}</td>
        <td style="text-align:right">${On(It.expectedTotal||0)}</td>
        <td>${et((It.notes||"").slice(0,120))}</td>
        <td>${It.status}</td>
      </tr>`).join(""),Mt=`
<!doctype html>
<html>
<head>
  <meta charset="utf-8" />
  <title>Inventario de Ropa por Lotes</title>
  <style>
    * { font-family: Arial, sans-serif; }
    h1 { margin: 0 0 4px; }
    .muted { color: #555; font-size: 12px; margin-bottom: 12px; }
    table { width: 100%; border-collapse: collapse; font-size: 11px; }
    th, td { border: 1px solid #ddd; padding: 6px; }
    th { background: #f5f5f5; text-align: left; }
    .totals { margin: 10px 0 16px; font-size: 12px; display: grid; grid-template-columns: repeat(2, max-content); column-gap: 32px; row-gap: 6px; align-items: center; }
    @media print { @page { size: A4 landscape; margin: 12mm; } button { display: none; } }
  </style>
</head>
<body>
  <button onclick="window.print()">Imprimir</button>
  <h1>Inventario de Ropa por Lotes</h1>
  <div class="muted">${be}</div>
  <div class="totals">
    <span><strong>Unidades ingresadas:</strong> ${Qe.udsIng.toFixed(0)}</span>
    <span><strong>Unidades restantes:</strong> ${Qe.udsRem.toFixed(0)}</span>
    <span><strong>Total esperado a ganar:</strong> ${On(Qe.totalEsperado)}</span>
    <span><strong>Total facturado:</strong> ${On(Qe.totalFacturado)}</span>
    <span><strong>Ganancia sin gastos:</strong> ${On(Number((Qe.totalEsperado-Qe.totalFacturado).toFixed(2)))}</span>
  </div>
  <table>
    <thead>
      <tr>
        <th>Fecha</th>
        <th>Subcat.</th>
        <th>Producto</th>
        <th>SKU</th>
        <th>Talla</th>
        <th>Color</th>
        <th>Cdigo Cliente</th>
        <th>Gnero</th>
        <th>Unidad</th>
        <th>Ingresado</th>
        <th>Restantes</th>
        <th>Precio Compra</th>
        <th>Precio Venta</th>
        <th>Total factura</th>
        <th>Total esperado</th>
        <th>Comentario</th>
        <th>Estado</th>
      </tr>
    </thead>
    <tbody>${nt||'<tr><td colspan="17" style="text-align:center">Sin lotes</td></tr>'}</tbody>
  </table>
</body>
</html>`,Zt=window.open("","_blank");Zt&&(Zt.document.open(),Zt.document.write(Mt),Zt.document.close())};return A.jsxs("div",{className:"max-w-6xl mx-auto",children:[A.jsxs("div",{className:"flex items-center justify-between mb-3",children:[A.jsx("h2",{className:"text-2xl font-bold",children:"Inventario de Ropa"}),A.jsx("button",{className:"px-3 py-2 rounded bg-blue-600 text-white hover:bg-blue-700",onClick:()=>Yt(!0),type:"button",children:"Crear Inventario"})]}),A.jsxs("div",{className:"bg-white p-3 rounded shadow border mb-4 flex flex-wrap items-end gap-3 text-sm",children:[A.jsxs("div",{className:"flex flex-col",children:[A.jsx("label",{className:"font-semibold",children:"Desde"}),A.jsx("input",{type:"date",className:"border rounded px-2 py-1",value:l,onChange:be=>c(be.target.value)})]}),A.jsxs("div",{className:"flex flex-col",children:[A.jsx("label",{className:"font-semibold",children:"Hasta"}),A.jsx("input",{type:"date",className:"border rounded px-2 py-1",value:u,onChange:be=>f(be.target.value)})]}),A.jsxs("div",{className:"flex flex-col min-w-[240px]",children:[A.jsx("label",{className:"font-semibold",children:"Producto"}),A.jsxs("select",{className:"border rounded px-2 py-1",value:p,onChange:be=>m(be.target.value),children:[A.jsx("option",{value:"",children:"Todos"}),t.map(be=>A.jsxs("option",{value:be.id,children:[be.name,"  ",be.category]},be.id))]})]}),A.jsx("button",{className:"px-3 py-1 rounded bg-gray-200 hover:bg-gray-300",onClick:()=>{c(""),f(""),m("")},children:"Quitar filtro"}),A.jsx("button",{className:"px-3 py-1 rounded bg-blue-600 text-white hover:bg-blue-700",onClick:Nt,children:"Imprimir PDF"})]}),A.jsx("div",{className:"bg-gray-50 p-3 rounded shadow border mb-3 text-base",children:A.jsxs("div",{className:"grid grid-cols-3 gap-y-2 gap-x-8",children:[A.jsxs("div",{children:[A.jsx("span",{className:"font-semibold",children:"Unidades ingresadas:"})," ",Qe.udsIng.toFixed(0)]}),A.jsxs("div",{children:[A.jsx("span",{className:"font-semibold",children:"Unidades restantes:"})," ",Qe.udsRem.toFixed(0)]}),A.jsxs("div",{children:[A.jsx("span",{className:"font-semibold",children:"Total esperado en ventas:"})," ",On(Qe.totalEsperado)]}),A.jsxs("div",{children:[A.jsx("span",{className:"font-semibold",children:"Total facturado:"})," ",On(Qe.totalFacturado)]}),A.jsxs("div",{children:[A.jsx("span",{className:"font-semibold",children:"Ganancia sin gastos:"})," ",On(Number((Qe.totalEsperado-Qe.totalFacturado).toFixed(2)))]})]})}),A.jsx("div",{className:"bg-white rounded shadow border",children:A.jsx("div",{className:"w-full overflow-x-auto",children:A.jsxs("table",{className:"min-w-full text-xs md:text-sm",children:[A.jsx("thead",{className:"bg-gray-100 sticky top-0 z-10",children:A.jsxs("tr",{children:[A.jsx("th",{className:"p-2 md:p-3 border text-left",children:"Fecha"}),A.jsx("th",{className:"p-2 md:p-3 border text-left hidden sm:table-cell",children:"Subcat."}),A.jsx("th",{className:"p-2 md:p-3 border text-left",children:"Producto"}),A.jsx("th",{className:"p-2 md:p-3 border text-left hidden lg:table-cell",children:"SKU"}),A.jsx("th",{className:"p-2 md:p-3 border text-left hidden md:table-cell",children:"Talla"}),A.jsx("th",{className:"p-2 md:p-3 border text-left hidden md:table-cell",children:"Color"}),A.jsx("th",{className:"p-2 md:p-3 border text-left hidden xl:table-cell",children:"Cdigo Cliente"}),A.jsx("th",{className:"p-2 md:p-3 border text-left hidden lg:table-cell",children:"Gnero"}),A.jsx("th",{className:"p-2 md:p-3 border text-left hidden lg:table-cell",children:"Unidad"}),A.jsx("th",{className:"p-2 md:p-3 border text-right tabular-nums",children:"Ingresado"}),A.jsx("th",{className:"p-2 md:p-3 border text-right tabular-nums",children:"Restantes"}),A.jsx("th",{className:"p-2 md:p-3 border text-right tabular-nums hidden md:table-cell",children:"Precio Compra"}),A.jsx("th",{className:"p-2 md:p-3 border text-right tabular-nums hidden md:table-cell",children:"Precio Venta"}),A.jsx("th",{className:"p-2 md:p-3 border text-right tabular-nums hidden lg:table-cell",children:"Total factura"}),A.jsx("th",{className:"p-2 md:p-3 border text-right tabular-nums hidden lg:table-cell",children:"Total esperado"}),A.jsx("th",{className:"p-2 md:p-3 border text-left hidden xl:table-cell",children:"Comentario"}),A.jsx("th",{className:"p-2 md:p-3 border text-left",children:"Estado"}),A.jsx("th",{className:"p-2 md:p-3 border text-center",children:"Acciones"})]})}),A.jsx("tbody",{className:"whitespace-nowrap",children:s?A.jsx("tr",{children:A.jsx("td",{colSpan:17,className:"p-4 text-center",children:"Cargando"})}):mr.length===0?A.jsx("tr",{children:A.jsx("td",{colSpan:17,className:"p-4 text-center",children:"Sin lotes"})}):mr.map(be=>{const et=Te===be.id;return A.jsxs("tr",{className:"text-left",children:[A.jsx("td",{className:"p-2 md:p-3 border align-top",children:et?A.jsx("input",{type:"date",className:"w-full border p-1 rounded",value:oe,onChange:nt=>le(nt.target.value)}):be.date}),A.jsx("td",{className:"p-2 md:p-3 border align-top hidden sm:table-cell",children:(be.category||"").toUpperCase()}),A.jsx("td",{className:"p-2 md:p-3 border align-top max-w-[220px] md:max-w-[320px]",children:A.jsx("span",{className:"block truncate",title:be.productName,children:be.productName})}),A.jsx("td",{className:"p-2 md:p-3 border align-top hidden lg:table-cell max-w-[220px]",children:et?A.jsx("input",{className:"w-full border p-1 rounded",value:Ht,onChange:nt=>Et(nt.target.value)}):A.jsx("span",{className:"block truncate",title:be.sku||"",children:be.sku||""})}),A.jsx("td",{className:"p-2 md:p-3 border align-top hidden md:table-cell",children:et?A.jsx("input",{className:"w-full border p-1 rounded",value:se,onChange:nt=>ve(nt.target.value)}):be.size||""}),A.jsx("td",{className:"p-2 md:p-3 border align-top hidden md:table-cell",children:et?A.jsx("input",{className:"w-full border p-1 rounded",value:We,onChange:nt=>at(nt.target.value)}):be.color||""}),A.jsx("td",{className:"p-2 md:p-3 border align-top hidden xl:table-cell max-w-[200px]",children:et?A.jsx("input",{className:"w-full border p-1 rounded",value:St,onChange:nt=>{const Mt=nt.target.value;qh.test(Mt)&&Ur(Mt)},placeholder:"Ej: LOTE-SHEIN-SEP-01",title:"AZ 09 . _ - (mx 32)"}):A.jsx("span",{className:"block truncate",title:be.clientCode||"",children:be.clientCode||""})}),A.jsx("td",{className:"p-2 md:p-3 border align-top hidden lg:table-cell",children:et?A.jsx("select",{className:"w-full border p-1 rounded",value:wt,onChange:nt=>_t(nt.target.value),children:$$.map(nt=>A.jsx("option",{value:nt,children:nt||""},nt))}):be.gender||""}),A.jsx("td",{className:"p-2 md:p-3 border align-top hidden lg:table-cell",children:(be.unit||"").toUpperCase()}),A.jsx("td",{className:"p-2 md:p-3 border align-top text-right tabular-nums",children:et?A.jsx("input",{type:"number",step:"1",inputMode:"numeric",className:"w-20 border p-1 rounded text-right",value:Number.isNaN(G)?"":G,onChange:nt=>Re(Math.max(0,parseInt(nt.target.value||"0",10)))}):be.quantity.toFixed(0)}),A.jsx("td",{className:"p-2 md:p-3 border align-top text-right tabular-nums",children:et?be.remaining:be.remaining.toFixed(0)}),A.jsx("td",{className:"p-2 md:p-3 border align-top text-right tabular-nums hidden md:table-cell",children:et?A.jsx("input",{type:"number",step:"0.01",inputMode:"decimal",className:"w-24 border p-1 rounded text-right",value:Number.isNaN(je)?"":je,onChange:nt=>Ue(Math.max(0,parseFloat(nt.target.value||"0")))}):On(be.purchasePrice)}),A.jsx("td",{className:"p-2 md:p-3 border align-top text-right tabular-nums hidden md:table-cell",children:et?A.jsx("input",{type:"number",step:"0.01",inputMode:"decimal",className:"w-24 border p-1 rounded text-right",value:Number.isNaN(Pe)?"":Pe,onChange:nt=>Ge(Math.max(0,parseFloat(nt.target.value||"0")))}):On(be.salePrice)}),A.jsx("td",{className:"p-2 md:p-3 border align-top text-right tabular-nums hidden lg:table-cell",children:On(et?qe:be.invoiceTotal||0)}),A.jsx("td",{className:"p-2 md:p-3 border align-top text-right tabular-nums hidden lg:table-cell",children:On(et?Ze:be.expectedTotal||0)}),A.jsx("td",{className:"p-2 md:p-3 border align-top hidden xl:table-cell max-w-[280px]",children:et?A.jsx("textarea",{className:"w-full border p-1 rounded resize-y min-h-12",value:ht,onChange:nt=>Ct(nt.target.value),maxLength:500}):A.jsx("span",{className:"block truncate",title:be.notes||"",children:be.notes||""})}),A.jsx("td",{className:"p-2 md:p-3 border align-top",children:A.jsx("span",{className:`px-2 py-0.5 rounded text-[10px] md:text-xs ${be.status==="PAGADO"?"bg-green-100 text-green-700":"bg-yellow-100 text-yellow-700"}`,children:be.status})}),A.jsx("td",{className:"p-2 md:p-3 border align-top",children:et?A.jsxs("div",{className:"flex gap-2 justify-center",children:[A.jsx("button",{className:"px-2 py-1 rounded text-white bg-blue-600 hover:bg-blue-700",onClick:Ut,children:"Guardar"}),A.jsx("button",{className:"px-2 py-1 rounded bg-gray-200 hover:bg-gray-300",onClick:ct,children:"Cancelar"})]}):A.jsx("button",{type:"button",className:"inline-flex items-center justify-center w-8 h-8 rounded border border-gray-200 hover:bg-gray-100",title:"Acciones",onClick:nt=>zr(nt,be.id),children:A.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-4 w-4",viewBox:"0 0 24 24",fill:"currentColor",children:[A.jsx("circle",{cx:"12",cy:"5",r:"1.6"}),A.jsx("circle",{cx:"12",cy:"12",r:"1.6"}),A.jsx("circle",{cx:"12",cy:"19",r:"1.6"})]})})})]},be.id)})})]})})}),sr&&_d.createPortal(A.jsxs(A.Fragment,{children:[A.jsx("div",{onClick:()=>fr(null),className:"fixed inset-0 z-[60]"}),A.jsx("div",{className:"fixed z-[61] w-44 rounded-md border border-gray-200 bg-white shadow-xl",style:{left:hn.x,top:hn.y},onClick:be=>be.stopPropagation(),role:"menu","aria-orientation":"vertical",children:A.jsxs("div",{className:"py-1 text-sm",children:[(()=>{const be=mr.find(et=>et.id===sr);return(be==null?void 0:be.status)==="PENDIENTE"?A.jsx("button",{className:"w-full text-left px-3 py-2 hover:bg-green-50",onClick:()=>{fr(null),Ft(be)},children:" Pagar"}):null})(),A.jsx("button",{className:"w-full text-left px-3 py-2 hover:bg-yellow-50",onClick:()=>{const be=mr.find(et=>et.id===sr);be&&(fr(null),ft(be))},children:" Editar"}),A.jsx("button",{className:"w-full text-left px-3 py-2 hover:bg-red-50 text-red-600",onClick:()=>{const be=mr.find(et=>et.id===sr);be&&(fr(null),it(be))},children:" Borrar"})]})})]}),document.body),jt&&_d.createPortal(A.jsxs("div",{className:"fixed inset-0 z-[70] flex items-center justify-center",children:[A.jsx("div",{className:"absolute inset-0 bg-black/40",onClick:()=>Yt(!1)}),A.jsxs("div",{className:"relative bg-white rounded-lg shadow-2xl border w-[96%] max-w-4xl max-h-[92vh] overflow-auto p-4",children:[A.jsxs("div",{className:"flex items-center justify-between mb-2",children:[A.jsx("h3",{className:"text-lg font-bold",children:"Crear Inventario (Lote)"}),A.jsx("button",{className:"px-3 py-1 rounded bg-gray-200 hover:bg-gray-300",onClick:()=>Yt(!1),type:"button",children:"Cerrar"})]}),A.jsxs("form",{onSubmit:Oe,className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[A.jsxs("div",{className:"md:col-span-2",children:[A.jsx("label",{className:"block text-sm font-semibold",children:"Producto de ropa"}),A.jsxs("select",{className:"w-full border p-2 rounded",value:b,onChange:be=>B(be.target.value),children:[A.jsx("option",{value:"",children:"(Opcional) Selecciona un producto"}),t.map(be=>A.jsxs("option",{value:be.id,children:[be.name,"  ",be.category,"  ",be.sku?`SKU: ${be.sku}`:""]},be.id))]})]}),A.jsxs("div",{children:[A.jsx("label",{className:"block text-sm font-semibold",children:"Fecha del lote"}),A.jsx("input",{type:"date",className:"w-full border p-2 rounded",value:_,onChange:be=>w(be.target.value)})]}),A.jsxs("div",{children:[A.jsx("label",{className:"block text-sm font-semibold",children:"Cantidad (pzas)"}),A.jsx("input",{type:"number",step:"1",inputMode:"numeric",className:"w-full border p-2 rounded",value:y===0?"":y,onChange:be=>S(Math.max(0,parseInt(be.target.value||"0",10))),placeholder:""})]}),A.jsxs("div",{children:[A.jsx("label",{className:"block text-sm font-semibold",children:"Precio de compra (pza)"}),A.jsx("input",{type:"number",step:"0.01",inputMode:"decimal",className:"w-full border p-2 rounded",value:O===0?"":O,onChange:be=>R(Math.max(0,parseFloat(be.target.value||"0")))})]}),A.jsxs("div",{children:[A.jsx("label",{className:"block text-sm font-semibold",children:"Precio de venta (pza)"}),A.jsx("input",{type:"number",step:"0.01",inputMode:"decimal",className:"w-full border p-2 rounded",value:M===0?"":M,onChange:be=>I(Math.max(0,parseFloat(be.target.value||"0")))})]}),A.jsxs("div",{children:[A.jsx("label",{className:"block text-sm font-semibold",children:"SKU (auto)"}),A.jsx("input",{className:"w-full border p-2 rounded bg-gray-100",value:ee,readOnly:!0,placeholder:"Se genera automticamente o se carga del producto",title:"Si el producto tiene SKU, se usa tal cual; si no, se genera por subcat/gnero/talla/color/marca."})]}),A.jsxs("div",{children:[A.jsx("label",{className:"block text-sm font-semibold",children:"Talla"}),A.jsx("input",{className:"w-full border p-2 rounded bg-gray-100",value:re,readOnly:!0,onChange:be=>de(be.target.value),placeholder:"XS/S/M/L/XL/10/12"})]}),A.jsxs("div",{children:[A.jsx("label",{className:"block text-sm font-semibold",children:"Color"}),A.jsx("input",{className:"w-full border p-2 rounded bg-gray-100",value:W,readOnly:!0,onChange:be=>ue(be.target.value),placeholder:"Negro, Azul, Rojo"})]}),A.jsxs("div",{children:[A.jsx("label",{className:"block text-sm font-semibold",children:"Color"}),A.jsx("input",{className:"w-full border p-2 rounded bg-gray-100",value:ae,readOnly:!0,onChange:be=>Ee(be.target.value),placeholder:"Masculino, Femenino, Otro"})]}),A.jsxs("div",{children:[A.jsx("label",{className:"block text-sm font-semibold",children:"Marca / Origen (opcional)"}),A.jsx("input",{className:"w-full border p-2 rounded bg-gray-100",value:Q,onChange:be=>k(be.target.value),placeholder:"Shein, Usado, Otro"})]}),A.jsxs("div",{children:[A.jsx("label",{className:"block text-sm font-semibold",children:"Cdigo del cliente (opcional)"}),A.jsx("input",{className:"w-full border p-2 rounded",placeholder:"Ej: LOTE-SHEIN-SEP-01",value:z,onChange:be=>{const et=be.target.value;qh.test(et)&&te(et)},title:"Solo letras, nmeros, punto, guion y guion_bajo (mx 32)"}),!qh.test(z)&&z.length>0&&A.jsx("div",{className:"text-xs text-red-600 mt-1",children:"Formato invlido"})]}),A.jsxs("div",{className:"md:col-span-2",children:[A.jsx("label",{className:"block text-sm font-semibold",children:"Comentario"}),A.jsx("textarea",{className:"w-full border p-2 rounded resize-y min-h-24",value:T,onChange:be=>F(be.target.value),maxLength:500,placeholder:"Ej: Camisita veranera, tela delgada, tirantes"}),A.jsxs("div",{className:"text-xs text-gray-500 text-right",children:[T.length,"/500"]})]}),A.jsxs("div",{children:[A.jsx("label",{className:"block text-sm font-semibold",children:"Total factura (auto)"}),A.jsx("input",{type:"text",className:"w-full border p-2 rounded bg-gray-100",value:On(E),readOnly:!0})]}),A.jsxs("div",{children:[A.jsx("label",{className:"block text-sm font-semibold",children:"Total esperado (auto)"}),A.jsx("input",{type:"text",className:"w-full border p-2 rounded bg-gray-100",value:On(D),readOnly:!0})]}),A.jsxs("div",{className:"md:col-span-2 flex justify-end gap-2",children:[A.jsx("button",{type:"button",className:"px-4 py-2 rounded bg-gray-200 hover:bg-gray-300",onClick:()=>Yt(!1),children:"Cancelar"}),A.jsx("button",{className:"bg-blue-600 text-white px-4 py-2 rounded hover:bg-blue-700",children:"Guardar lote"})]})]})]})]}),document.body),a&&A.jsx("p",{className:"mt-2 text-sm",children:a})]})}const Y$=["Camisa","Blusa","Vestido","Jean","Pantaln","Short","Falda","Conjunto","Abrigo","Suter","Accesorio"],Z$=["Negro","Blanco","Azul","Rojo","Verde","Gris","Beige","Rosa","Amarillo","Marrn","Morado","Naranja"],eW=["XS","S","M","L","XL","2XL"],tW=["2","4","6","8","10","12","14"],rW=["26","28","30","32","34","36","38"],nW=["Shein","Usado","Otro"],sW=["","HOMBRE","MUJER","NINO","NINA","UNISEX"];function bg(t){return(t||"").trim().toUpperCase().replace(/\s+/g,"-").replace(/[^A-Z0-9-]/g,"")}function iW(t){switch((t||"").toUpperCase()){case"HOMBRE":return"HOM";case"MUJER":return"MUJ";case"NINO":return"NIN";case"NINA":return"NIA";case"UNISEX":return"UNI";default:return"GEN"}}function aW(t){const e="ROP",r=bg(t.subcat).slice(0,3)||"GEN",n=iW(t.gender),s=bg(t.color).slice(0,3)||"COL",i=bg(t.size)||"TLL",a=bg(t.brand).slice(0,4)||"BRD";return`${e}-${r}-${n}-${s}-${i}-${a}`}const oW=/^[A-Za-z0-9._-]{0,32}$/;function AW(){const[t,e]=P.useState(""),[r,n]=P.useState("Camisa"),[s,i]=P.useState(""),[a,o]=P.useState(""),[l,c]=P.useState("Shein"),[u,f]=P.useState(""),[p,m]=P.useState(""),[b,B]=P.useState(""),[_,w]=P.useState(""),[y,S]=P.useState([]),[O,R]=P.useState(!0),[M,I]=P.useState(""),{refreshKey:E,refresh:L}=rh(),[D,N]=P.useState(!1),T=P.useMemo(()=>r.toLowerCase()==="jean"?rW:u==="NINO"||u==="NINA"?tW:eW,[r,u]);P.useEffect(()=>{B(aW({subcat:r,gender:u,color:a,size:s,brand:l}))},[r,u,a,s,l]),P.useEffect(()=>{(async()=>{R(!0);const re=Xt(ot(Le,"products_clothes"),fi("createdAt","desc")),de=await Pt(re),W=[];de.forEach(ue=>{const ae=ue.data();W.push({id:ue.id,name:ae.name??"(sin nombre)",category:ae.category??"",measurement:ae.measurement??"unidad",sku:ae.sku??"",size:ae.size||"",color:ae.color||"",brand:ae.brand||"",gender:ae.gender||"",clientCode:ae.clientCode||"",notes:ae.notes||"",createdAt:ae.createdAt??Dt.now()})}),S(W),R(!1)})()},[E]);const F=()=>{e(""),n("Camisa"),i(""),o(""),c("Shein"),f(""),m(""),w("")},ee=async re=>{if(re.preventDefault(),I(""),!t.trim()){I("Ingresa el nombre del producto.");return}if(p&&!oW.test(p)){I("Cdigo del cliente invlido");return}try{const de=await qn(ot(Le,"products_clothes"),{name:t.trim(),category:r,measurement:"unidad",sku:b,size:s||"",color:a||"",brand:l||"",gender:u||"",clientCode:p||"",notes:_||"",createdAt:Dt.now()});S(W=>[{id:de.id,name:t.trim(),category:r,measurement:"unidad",sku:b,size:s||"",color:a||"",brand:l||"",gender:u||"",clientCode:p||"",notes:_||"",createdAt:Dt.now()},...W]),F(),N(!1),I(" Producto de ropa creado")}catch(de){console.error(de),I(" Error al crear producto")}},ce=async re=>{confirm(`Eliminar el producto "${re.name}"?`)&&(await Bs(Lt(Le,"products_clothes",re.id)),S(W=>W.filter(ue=>ue.id!==re.id)))};return A.jsxs("div",{className:"max-w-6xl mx-auto",children:[A.jsxs("div",{className:"flex items-center justify-between mb-3",children:[A.jsx("h2",{className:"text-2xl font-bold",children:"Productos de Ropa"}),A.jsxs("div",{className:"flex gap-2",children:[A.jsx(zp,{onClick:L,loading:O}),A.jsxs("button",{className:"inline-flex items-center gap-2 bg-green-600 text-white px-3 py-2 rounded hover:bg-green-700",onClick:()=>{N(!0)},children:[A.jsx("span",{className:"inline-block bg-green-700/40 rounded-full p-1",children:A.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-4 w-4",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:A.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 4v16m8-8H4"})})}),"Nuevo producto"]})]})]}),D&&A.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-40 flex items-center justify-center z-50",children:A.jsxs("div",{className:"bg-white p-6 rounded shadow-lg w-full max-w-2xl max-h-[90vh] overflow-y-auto",children:[A.jsx("h3",{className:"text-xl font-bold mb-4",children:"Nuevo producto de ropa"}),A.jsxs("form",{onSubmit:ee,className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[A.jsxs("div",{children:[A.jsx("label",{className:"block text-sm font-semibold",children:"Nombre"}),A.jsx("input",{className:"w-full border p-2 rounded",value:t,onChange:re=>e(re.target.value),placeholder:"Ej: Blusa floral"})]}),A.jsxs("div",{children:[A.jsx("label",{className:"block text-sm font-semibold",children:"Subcategora"}),A.jsx("select",{className:"w-full border p-2 rounded",value:r,onChange:re=>n(re.target.value),children:Y$.map(re=>A.jsx("option",{value:re,children:re},re))})]}),A.jsxs("div",{children:[A.jsx("label",{className:"block text-sm font-semibold",children:"Gnero"}),A.jsx("select",{className:"w-full border p-2 rounded",value:u,onChange:re=>f(re.target.value),children:sW.map(re=>A.jsx("option",{value:re,children:re||""},re))})]}),A.jsxs("div",{children:[A.jsx("label",{className:"block text-sm font-semibold",children:"Talla"}),A.jsxs("select",{className:"w-full border p-2 rounded",value:s,onChange:re=>i(re.target.value),children:[A.jsx("option",{value:"",children:""}),T.map(re=>A.jsx("option",{value:re,children:re},re))]})]}),A.jsxs("div",{children:[A.jsx("label",{className:"block text-sm font-semibold",children:"Color"}),A.jsxs("select",{className:"w-full border p-2 rounded",value:a,onChange:re=>o(re.target.value),children:[A.jsx("option",{value:"",children:""}),Z$.map(re=>A.jsx("option",{value:re,children:re},re))]})]}),A.jsxs("div",{children:[A.jsx("label",{className:"block text-sm font-semibold",children:"Marca"}),A.jsx("select",{className:"w-full border p-2 rounded",value:l,onChange:re=>c(re.target.value),children:nW.map(re=>A.jsx("option",{value:re,children:re},re))})]}),A.jsxs("div",{children:[A.jsx("label",{className:"block text-sm font-semibold",children:"SKU (auto)"}),A.jsx("input",{className:"w-full border p-2 rounded bg-gray-100",value:b,readOnly:!0})]}),A.jsxs("div",{children:[A.jsx("label",{className:"block text-sm font-semibold",children:"Cdigo cliente"}),A.jsx("input",{className:"w-full border p-2 rounded",value:p,onChange:re=>m(re.target.value)})]}),A.jsxs("div",{className:"md:col-span-2",children:[A.jsx("label",{className:"block text-sm font-semibold",children:"Comentario"}),A.jsx("textarea",{className:"w-full border p-2 rounded resize-y min-h-24",value:_,onChange:re=>w(re.target.value),maxLength:500})]}),A.jsxs("div",{className:"md:col-span-2 flex justify-end gap-2 mt-2",children:[A.jsx("button",{type:"button",onClick:()=>N(!1),className:"px-3 py-1 rounded bg-gray-200 hover:bg-gray-300",children:"Cancelar"}),A.jsx("button",{type:"submit",className:"px-3 py-1 rounded bg-blue-600 text-white hover:bg-blue-700",children:"Guardar"})]})]})]})}),A.jsx("div",{className:"bg-white p-2 rounded shadow border w-full",children:A.jsxs("table",{className:"min-w-full text-sm",children:[A.jsx("thead",{className:"bg-gray-100",children:A.jsxs("tr",{children:[A.jsx("th",{className:"p-2 border",children:"Fecha"}),A.jsx("th",{className:"p-2 border",children:"Subcat."}),A.jsx("th",{className:"p-2 border",children:"Nombre"}),A.jsx("th",{className:"p-2 border",children:"SKU"}),A.jsx("th",{className:"p-2 border",children:"Talla"}),A.jsx("th",{className:"p-2 border",children:"Color"}),A.jsx("th",{className:"p-2 border",children:"Marca"}),A.jsx("th",{className:"p-2 border",children:"Gnero"}),A.jsx("th",{className:"p-2 border",children:"Cdigo Cliente"}),A.jsx("th",{className:"p-2 border",children:"Comentario"}),A.jsx("th",{className:"p-2 border",children:"Acciones"})]})}),A.jsx("tbody",{children:O?A.jsx("tr",{children:A.jsx("td",{colSpan:11,className:"p-4 text-center",children:"Cargando"})}):y.length===0?A.jsx("tr",{children:A.jsx("td",{colSpan:11,className:"p-4 text-center",children:"Sin productos"})}):y.map(re=>{var de;return A.jsxs("tr",{className:"text-center",children:[A.jsx("td",{className:"p-2 border",children:(de=re.createdAt)!=null&&de.toDate?re.createdAt.toDate().toISOString().slice(0,10):""}),A.jsx("td",{className:"p-2 border",children:re.category}),A.jsx("td",{className:"p-2 border",children:re.name}),A.jsx("td",{className:"p-2 border",children:re.sku}),A.jsx("td",{className:"p-2 border",children:re.size||""}),A.jsx("td",{className:"p-2 border",children:re.color||""}),A.jsx("td",{className:"p-2 border",children:re.brand||""}),A.jsx("td",{className:"p-2 border",children:re.gender||""}),A.jsx("td",{className:"p-2 border",children:re.clientCode||""}),A.jsx("td",{className:"p-2 border",children:re.notes||""}),A.jsx("td",{className:"p-2 border",children:A.jsx("button",{className:"px-2 py-1 rounded bg-red-600 text-white hover:bg-red-700",onClick:()=>ce(re),children:"Borrar"})})]},re.id)})})]})}),M&&A.jsx("p",{className:"mt-2 text-sm",children:M})]})}async function lW(t){const{productId:e,quantity:r,saleDate:n,saleId:s}=t,i=Math.max(0,Math.floor(Number(r||0)));if(!e||i<=0)throw new Error("Parmetros invlidos para allocateSaleFIFOClothes");const a=Xt(ot(Le,"inventory_clothes_batches"),rr("productId","==",e)),c=(await Pt(a)).docs.map(f=>({id:f.id,data:f.data()})).sort((f,p)=>{var w,y;const m=String(f.data.date||""),b=String(p.data.date||"");if(m!==b)return m<b?-1:1;const B=((w=f.data.createdAt)==null?void 0:w.seconds)??0,_=((y=p.data.createdAt)==null?void 0:y.seconds)??0;return B-_}).map(f=>Lt(Le,"inventory_clothes_batches",f.id)),u=[];return await Al(Le,async f=>{const p=await Promise.all(c.map(b=>f.get(b)));let m=i;for(let b=0;b<c.length&&m>0;b++){const B=c[b],_=p[b];if(!_.exists())continue;const w=_.data(),y=Math.max(0,Math.floor(Number(w.quantity||0))),S=Number.isFinite(Number(w.remaining))?Math.max(0,Math.floor(Number(w.remaining||0))):y;if(S<=0)continue;const O=Math.min(S,m),R=Math.max(0,S-O);f.update(B,{remaining:R}),u.push({batchId:B.id,qty:O,batchDate:String(w.date||""),productName:String(w.productName||"")}),m-=O}if(m>0)throw new Error(`Inventario insuficiente. Faltan ${m} unidades.`);if(s)for(const b of u)await qn(ot(Le,"batch_clothes_allocations"),{saleId:s,saleDate:n,productId:e,productName:b.productName??"",batchId:b.batchId,batchDate:b.batchDate??"",quantity:b.qty,createdAt:Dt.now()})}),{allocations:u}}async function cx(t){const e=Lt(Le,"sales_clothes",t),r=await zo(e);if(!r.exists())throw new Error("La venta no existe.");const n=r.data(),s=[];if(Array.isArray(n.items)&&n.items.length>0){const o={};if(n.allocationsByItem&&typeof n.allocationsByItem=="object")for(const l of Object.keys(n.allocationsByItem)){const c=n.allocationsByItem[l],u=String((c==null?void 0:c.productId)||l||"");if(!u)continue;const f=Array.isArray(c==null?void 0:c.allocations)?c.allocations:[];o[u]=f.map(p=>({batchId:String(p.batchId),qty:Math.max(0,Math.floor(Number(p.qty||p.quantity||0)))}))}if(Array.isArray(n.allocationsByItem))for(const l of n.allocationsByItem){const c=String((l==null?void 0:l.productId)||"");if(!c)continue;const u=Array.isArray(l==null?void 0:l.allocations)?l.allocations:[];o[c]=u.map(f=>({batchId:String(f.batchId),qty:Math.max(0,Math.floor(Number(f.qty||f.quantity||0)))}))}for(const l of n.items){const c=String((l==null?void 0:l.productId)||"");if(!c)continue;const u=Math.max(0,Math.floor(Number((l==null?void 0:l.qty)||(l==null?void 0:l.quantity)||0))),f=Array.isArray(l==null?void 0:l.allocations)?l.allocations.map(p=>({batchId:String(p.batchId),qty:Math.max(0,Math.floor(Number(p.qty||p.quantity||0)))})):o[c]||[];s.push({productId:c,productName:String((l==null?void 0:l.productName)||""),qty:u,allocations:f.length?f:void 0})}}else{const o=n.item||{},l=String(o.productId||n.productId||""),c=Math.max(0,Math.floor(Number(o.qty??n.quantity??0))),u=Array.isArray(n.allocations)?n.allocations.map(f=>({batchId:String(f.batchId),qty:Math.max(0,Math.floor(Number(f.qty||f.quantity||0)))})):[];l&&c>0&&s.push({productId:l,productName:String(o.productName||n.productName||""),qty:c,allocations:u.length?u:void 0})}return s.length===0?(await Al(Le,async o=>{o.delete(e)}),{restored:0}):s.every(o=>Array.isArray(o.allocations)&&o.allocations.length>0)?(await Al(Le,async l=>{const c=[];for(const f of s)for(const p of f.allocations||[])c.push({ref:Lt(Le,"inventory_clothes_batches",p.batchId),addBack:Math.max(0,Math.floor(Number(p.qty||0)))});const u=await Promise.all(c.map(f=>l.get(f.ref)));for(let f=0;f<c.length;f++){const p=u[f];if(!p.exists())continue;const m=p.data(),b=Math.max(0,Math.floor(Number(m.remaining||0)));l.update(c[f].ref,{remaining:b+c[f].addBack})}l.delete(e)}),{restored:s.reduce((l,c)=>l+(c.allocations||[]).reduce((u,f)=>u+f.qty,0),0)}):(await Al(Le,async o=>{const l={};for(const m of s){if(!m.productId||m.qty<=0)continue;const b=Xt(ot(Le,"inventory_clothes_batches"),rr("productId","==",m.productId)),_=(await Pt(b)).docs.map(w=>{const y=w.data(),S=Math.max(0,Math.floor(Number(y.quantity||0))),O=Number.isFinite(Number(y.remaining))?Math.max(0,Math.floor(Number(y.remaining||0))):S;return{id:w.id,date:String(y.date||""),quantity:S,remaining:O}}).sort((w,y)=>w.date.localeCompare(y.date));l[m.productId]=_}const c=[];for(const m of s){if(!m.productId||m.qty<=0)continue;if(Array.isArray(m.allocations)&&m.allocations.length>0){for(const _ of m.allocations)c.push({id:_.batchId,addBack:Math.max(0,Math.floor(Number(_.qty||0)))});continue}const b=l[m.productId]||[];let B=m.qty;for(const _ of b){if(B<=0)break;const w=Math.max(0,_.quantity-_.remaining);if(w<=0)continue;const y=Math.min(w,B);c.push({id:_.id,addBack:y}),B-=y}for(const _ of b){if(B<=0)break;const w=Math.min(B,m.qty);c.push({id:_.id,addBack:w}),B-=w}}const u={};for(const m of c)u[m.id]=(u[m.id]||0)+Math.max(0,Math.floor(Number(m.addBack||0)));const f=Object.keys(u).map(m=>Lt(Le,"inventory_clothes_batches",m)),p=await Promise.all(f.map(m=>o.get(m)));for(let m=0;m<f.length;m++){const b=p[m];if(!b.exists())continue;const B=b.data(),_=Math.max(0,Math.floor(Number(B.remaining||0))),w=Math.max(0,Math.floor(Number(u[f[m].id]||0)));o.update(f[m],{remaining:_+w})}o.delete(e)}),{restored:s.reduce((o,l)=>o+l.qty,0)})}const UN=["Altagracia","Taguizapa","El paso","Calaysa","Urbaite","Las Pilas"],vo=t=>`C$ ${(Number(t)||0).toFixed(2)}`;function Bg(t){const e="+505 ";if(!t.startsWith(e)){const n=t.replace(/\D/g,"");return e+n.slice(0,8)}const r=t.slice(e.length).replace(/\D/g,"");return e+r.slice(0,8)}async function PN(t){const e=Xt(ot(Le,"ar_movements"),rr("ref.saleId","==",t)),r=await Pt(e);await Promise.all(r.docs.map(n=>Bs(Lt(Le,"ar_movements",n.id))))}function cW(){const[t,e]=P.useState(!1),[r,n]=P.useState(!1),[s,i]=P.useState(null),[a,o]=P.useState([]),l=async Qe=>{e(!0),n(!0),i(Qe),o([]);try{const Ft=(await Pt(Xt(ot(Le,"sales_clothes"),rr("__name__","==",Qe)))).docs[0],ft=Ft==null?void 0:Ft.data(),Ut=(Array.isArray(ft==null?void 0:ft.items)?ft.items:ft!=null&&ft.item?[ft.item]:[]).map(it=>({productName:String(it.productName||""),qty:Number(it.qty||0),unitPrice:Number(it.unitPrice||0),discount:Number(it.discount||0),total:Number(it.total||0)}));o(Ut)}catch(Oe){console.error(Oe)}finally{n(!1)}},[c,u]=P.useState(""),[f,p]=P.useState("+505 "),[m,b]=P.useState(""),[B,_]=P.useState(""),[w,y]=P.useState("ACTIVO"),[S,O]=P.useState(0),[R,M]=P.useState([]),[I,E]=P.useState(!0),[L,D]=P.useState(""),[N,T]=P.useState(null),[F,ee]=P.useState(""),[ce,re]=P.useState("+505 "),[de,W]=P.useState(""),[ue,ae]=P.useState(""),[Ee,Q]=P.useState("ACTIVO"),[k,z]=P.useState(0),[te,$]=P.useState(!1),[ne,X]=P.useState(null),[he,ge]=P.useState(!1),[Ce,Te]=P.useState([]),[Fe,oe]=P.useState({saldoActual:0,totalAbonado:0,totalCargos:0}),[le,G]=P.useState(!1),[Re,je]=P.useState(0),[Ue,Pe]=P.useState(new Date().toISOString().slice(0,10)),[Ge,qe]=P.useState(""),[tt,Ze]=P.useState(!1),[vt,ht]=P.useState(null),[Ct,Ht]=P.useState(""),[Et,se]=P.useState(0),[ve,We]=P.useState(""),[at,wt]=P.useState(!1);P.useEffect(()=>{(async()=>{const Qe=Xt(ot(Le,"customers_clothes"),fi("createdAt","desc")),Oe=await Pt(Qe),Ft=[];Oe.forEach(ft=>{const ct=ft.data();Ft.push({id:ft.id,name:ct.name??"",phone:ct.phone??"+505 ",place:ct.place??"",notes:ct.notes??"",status:ct.status??"ACTIVO",creditLimit:Number(ct.creditLimit??0),createdAt:ct.createdAt??Dt.now(),balance:0})});for(const ft of Ft)try{const ct=Xt(ot(Le,"ar_movements"),rr("customerId","==",ft.id)),Ut=await Pt(ct);let it=0;Ut.forEach(Nt=>it+=Number(Nt.data().amount||0)),ft.balance=it}catch{ft.balance=0}M(Ft),E(!1)})()},[]);const _t=()=>{u(""),p("+505 "),b(""),_(""),y("ACTIVO"),O(0)},rt=async Qe=>{if(Qe.preventDefault(),D(""),!c.trim()){D("Ingresa el nombre.");return}const Oe=Bg(f);if(Oe.length<6){D("Telfono incompleto.");return}try{const Ft=await qn(ot(Le,"customers_clothes"),{name:c.trim(),phone:Oe,place:m||"",notes:B||"",status:w,creditLimit:Number(S||0),createdAt:Dt.now()});M(ft=>[{id:Ft.id,name:c.trim(),phone:Oe,place:m||"",notes:B||"",status:w,creditLimit:Number(S||0),createdAt:Dt.now(),balance:0},...ft]),_t(),wt(!1),D(" Cliente creado")}catch(Ft){console.error(Ft),D(" Error al crear cliente")}},ur=Qe=>{T(Qe.id),ee(Qe.name),re(Qe.phone||"+505 "),W(Qe.place||""),ae(Qe.notes||""),Q(Qe.status||"ACTIVO"),z(Number(Qe.creditLimit||0))},St=()=>{T(null),ee(""),re("+505 "),W(""),ae(""),Q("ACTIVO"),z(0)},Ur=async()=>{if(!N)return;const Qe=Bg(ce);if(!F.trim()){D("Ingresa el nombre.");return}try{await rn(Lt(Le,"customers_clothes",N),{name:F.trim(),phone:Qe,place:de||"",notes:ue||"",status:Ee,creditLimit:Number(k||0)}),M(Oe=>Oe.map(Ft=>Ft.id===N?{...Ft,name:F.trim(),phone:Qe,place:de||"",notes:ue||"",status:Ee,creditLimit:Number(k||0)}:Ft)),St(),D(" Cliente actualizado")}catch(Oe){console.error(Oe),D(" Error al actualizar")}},sr=async Qe=>{if(confirm(`Eliminar al cliente "${Qe.name}"?
Se devolvern al inventario todas las prendas de sus compras y se borrarn sus movimientos.`))try{E(!0);const Ft=Xt(ot(Le,"sales_clothes"),rr("customerId","==",Qe.id)),ft=await Pt(Ft);for(const it of ft.docs){const Nt=it.id;try{await cx(Nt)}catch(be){console.warn("restoreSaleAndDeleteClothes error",be);try{await Bs(Lt(Le,"sales_clothes",Nt))}catch{}}await PN(Nt)}const ct=Xt(ot(Le,"ar_movements"),rr("customerId","==",Qe.id)),Ut=await Pt(ct);await Promise.all(Ut.docs.map(it=>Bs(Lt(Le,"ar_movements",it.id)))),await Bs(Lt(Le,"customers_clothes",Qe.id)),M(it=>it.filter(Nt=>Nt.id!==Qe.id)),D(" Cliente eliminado y prendas devueltas al inventario")}catch(Ft){console.error(Ft),D(" No se pudo eliminar el cliente.")}finally{E(!1)}},fr=async Qe=>{X(Qe),Te([]),oe({saldoActual:0,totalAbonado:0,totalCargos:0}),$(!0),G(!1),je(0),Pe(new Date().toISOString().slice(0,10)),qe(""),ht(null),ge(!0);try{const Oe=Xt(ot(Le,"ar_movements"),rr("customerId","==",Qe.id)),Ft=await Pt(Oe),ft=[];Ft.forEach(ct=>{var it,Nt;const Ut=ct.data();ft.push({id:ct.id,date:Ut.date??((Nt=(it=Ut.createdAt)==null?void 0:it.toDate)!=null&&Nt.call(it)?Ut.createdAt.toDate().toISOString().slice(0,10):""),type:Ut.type??"CARGO",amount:Number(Ut.amount||0),ref:Ut.ref||{},comment:Ut.comment||"",createdAt:Ut.createdAt})}),ft.sort((ct,Ut)=>{var be,et;if(ct.date!==Ut.date)return ct.date.localeCompare(Ut.date);const it=((be=ct.createdAt)==null?void 0:be.seconds)||0,Nt=((et=Ut.createdAt)==null?void 0:et.seconds)||0;return it-Nt}),Te(ft),hn(ft)}catch(Oe){console.error(Oe),D(" No se pudo cargar el estado de cuenta")}finally{ge(!1)}},hn=Qe=>{const Oe=Qe.reduce((ct,Ut)=>ct+(Number(Ut.amount)||0),0),Ft=Qe.filter(ct=>Number(ct.amount)<0).reduce((ct,Ut)=>ct+Math.abs(Number(Ut.amount)||0),0),ft=Qe.filter(ct=>Number(ct.amount)>0).reduce((ct,Ut)=>ct+Number(Ut.amount)||0,0);oe({saldoActual:Oe,totalAbonado:Ft,totalCargos:ft})},vr=async()=>{if(!ne)return;D("");const Qe=Number(Re||0);if(!(Qe>0)){D("Ingresa un monto de abono mayor a 0.");return}const Oe=parseFloat(Qe.toFixed(2));if(!Ue){D("Selecciona la fecha del abono.");return}try{Ze(!0);const Ft={customerId:ne.id,type:"ABONO",amount:-Oe,date:Ue,comment:Ge||"",createdAt:Dt.now()},ct={id:(await qn(ot(Le,"ar_movements"),Ft)).id,date:Ue,type:"ABONO",amount:-Oe,comment:Ge||"",createdAt:Dt.now()},Ut=[...Ce,ct].sort((it,Nt)=>{var nt,Mt;if(it.date!==Nt.date)return it.date.localeCompare(Nt.date);const be=((nt=it.createdAt)==null?void 0:nt.seconds)||0,et=((Mt=Nt.createdAt)==null?void 0:Mt.seconds)||0;return be-et});Te(Ut),hn(Ut),M(it=>it.map(Nt=>Nt.id===ne.id?{...Nt,balance:(Nt.balance||0)-Oe}:Nt)),X(it=>it&&{...it,balance:(it.balance||0)-Oe}),je(0),qe(""),Pe(new Date().toISOString().slice(0,10)),G(!1),D(" Abono registrado")}catch(Ft){console.error(Ft),D(" Error al registrar el abono")}finally{Ze(!1)}},jt=Qe=>{ht(Qe.id),Ht(Qe.date||new Date().toISOString().slice(0,10)),se(Math.abs(Number(Qe.amount||0))),We(Qe.comment||"")},Yt=()=>{ht(null),Ht(""),se(0),We("")},cs=async()=>{if(!vt)return;const Qe=Ce.findIndex(ct=>ct.id===vt);if(Qe===-1)return;const Oe=Ce[Qe],Ft=Number(Et||0);if(!(Ft>0)){D("El monto debe ser mayor a 0.");return}const ft=Oe.type==="ABONO"?-parseFloat(Ft.toFixed(2)):+parseFloat(Ft.toFixed(2));try{await rn(Lt(Le,"ar_movements",vt),{date:Ct,amount:ft,comment:ve||""});const ct=[...Ce];ct[Qe]={...Oe,date:Ct,amount:ft,comment:ve||""},ct.sort((it,Nt)=>{var nt,Mt;if(it.date!==Nt.date)return it.date.localeCompare(Nt.date);const be=((nt=it.createdAt)==null?void 0:nt.seconds)||0,et=((Mt=Nt.createdAt)==null?void 0:Mt.seconds)||0;return be-et}),Te(ct),hn(ct);const Ut=ct.reduce((it,Nt)=>it+(Number(Nt.amount)||0),0);M(it=>it.map(Nt=>Nt.id===(ne==null?void 0:ne.id)?{...Nt,balance:Ut}:Nt)),X(it=>it&&{...it,balance:Ut}),Yt(),D(" Movimiento actualizado")}catch(ct){console.error(ct),D(" Error al actualizar movimiento")}},zr=async Qe=>{var Ft,ft;if(confirm(`Eliminar este movimiento (${Qe.type==="ABONO"?"Abono":"Compra"}) del ${Qe.date}?${Qe.type==="CARGO"&&((Ft=Qe.ref)!=null&&Ft.saleId)?`
Se devolvern al inventario las prendas de esa venta.`:""}`))try{if(E(!0),Qe.type==="CARGO"&&((ft=Qe.ref)!=null&&ft.saleId)){try{await cx(Qe.ref.saleId)}catch(it){console.warn("restoreSaleAndDeleteClothes error",it),E(!1),D(" No se pudo devolver inventario de la venta.");return}await PN(Qe.ref.saleId)}else await Bs(Lt(Le,"ar_movements",Qe.id));const ct=Ce.filter(it=>{var Nt,be;return Qe.type==="CARGO"&&((Nt=Qe.ref)!=null&&Nt.saleId)?((be=it.ref)==null?void 0:be.saleId)!==Qe.ref.saleId:it.id!==Qe.id});Te(ct),hn(ct);const Ut=ct.reduce((it,Nt)=>it+(Number(Nt.amount)||0),0);M(it=>it.map(Nt=>Nt.id===(ne==null?void 0:ne.id)?{...Nt,balance:Ut}:Nt)),X(it=>it&&{...it,balance:Ut}),D(" Movimiento eliminado")}catch(ct){console.error(ct),D(" Error al eliminar movimiento")}finally{E(!1)}},mr=P.useMemo(()=>[...R].sort((Qe,Oe)=>{var Ft,ft;return Qe.status!==Oe.status?Qe.status==="BLOQUEADO"?1:-1:(((Ft=Oe.createdAt)==null?void 0:Ft.seconds)||0)-(((ft=Qe.createdAt)==null?void 0:ft.seconds)||0)}),[R]);return A.jsxs("div",{className:"max-w-6xl mx-auto",children:[A.jsxs("div",{className:"flex items-center justify-between mb-3",children:[A.jsx("h2",{className:"text-2xl font-bold",children:"Clientes (Ropa)"}),A.jsx("button",{className:"px-3 py-2 rounded bg-blue-600 text-white hover:bg-blue-700",onClick:()=>wt(!0),type:"button",children:"Crear Cliente"})]}),A.jsx("div",{className:"bg-white p-2 rounded shadow border w-full",children:A.jsxs("table",{className:"min-w-full w-full text-sm",children:[A.jsx("thead",{className:"bg-gray-100",children:A.jsxs("tr",{children:[A.jsx("th",{className:"p-2 border",children:"Fecha"}),A.jsx("th",{className:"p-2 border",children:"Nombre"}),A.jsx("th",{className:"p-2 border",children:"Telfono"}),A.jsx("th",{className:"p-2 border",children:"Lugar"}),A.jsx("th",{className:"p-2 border",children:"Estado"}),A.jsx("th",{className:"p-2 border",children:"Lmite"}),A.jsx("th",{className:"p-2 border",children:"Saldo"}),A.jsx("th",{className:"p-2 border",children:"Comentario"}),A.jsx("th",{className:"p-2 border",children:"Acciones"})]})}),A.jsx("tbody",{children:I?A.jsx("tr",{children:A.jsx("td",{className:"p-4 text-center",colSpan:9,children:"Cargando"})}):mr.length===0?A.jsx("tr",{children:A.jsx("td",{className:"p-4 text-center",colSpan:9,children:"Sin clientes"})}):mr.map(Qe=>{var Ft;const Oe=N===Qe.id;return A.jsxs("tr",{className:"text-center",children:[A.jsx("td",{className:"p-2 border",children:(Ft=Qe.createdAt)!=null&&Ft.toDate?Qe.createdAt.toDate().toISOString().slice(0,10):""}),A.jsx("td",{className:"p-2 border",children:Oe?A.jsx("input",{className:"w-full border p-1 rounded",value:F,onChange:ft=>ee(ft.target.value)}):Qe.name}),A.jsx("td",{className:"p-2 border",children:Oe?A.jsx("input",{className:"w-full border p-1 rounded",value:ce,onChange:ft=>re(Bg(ft.target.value))}):Qe.phone}),A.jsx("td",{className:"p-2 border",children:Oe?A.jsxs("select",{className:"w-full border p-1 rounded",value:de,onChange:ft=>W(ft.target.value),children:[A.jsx("option",{value:"",children:""}),UN.map(ft=>A.jsx("option",{value:ft,children:ft},ft))]}):Qe.place||""}),A.jsx("td",{className:"p-2 border",children:Oe?A.jsxs("select",{className:"w-full border p-1 rounded",value:Ee,onChange:ft=>Q(ft.target.value),children:[A.jsx("option",{value:"ACTIVO",children:"ACTIVO"}),A.jsx("option",{value:"BLOQUEADO",children:"BLOQUEADO"})]}):A.jsx("span",{className:`px-2 py-0.5 rounded text-xs ${Qe.status==="ACTIVO"?"bg-green-100 text-green-700":"bg-red-100 text-red-700"}`,children:Qe.status})}),A.jsx("td",{className:"p-2 border",children:Oe?A.jsx("input",{type:"number",step:"0.01",inputMode:"decimal",className:"w-full border p-1 rounded text-right",value:Number.isNaN(k)?"":k,onChange:ft=>z(Math.max(0,Number(ft.target.value||0)))}):vo(Qe.creditLimit||0)}),A.jsx("td",{className:"p-2 border font-semibold",children:vo(Qe.balance||0)}),A.jsx("td",{className:"p-2 border",children:Oe?A.jsx("textarea",{className:"w-full border p-1 rounded resize-y min-h-12",value:ue,onChange:ft=>ae(ft.target.value),maxLength:500}):A.jsx("span",{title:Qe.notes||"",children:(Qe.notes||"").length>40?(Qe.notes||"").slice(0,40)+"":Qe.notes||""})}),A.jsx("td",{className:"p-2 border",children:A.jsx("div",{className:"flex gap-2 justify-center",children:Oe?A.jsxs(A.Fragment,{children:[A.jsx("button",{className:"px-2 py-1 rounded text-white bg-blue-600 hover:bg-blue-700",onClick:Ur,children:"Guardar"}),A.jsx("button",{className:"px-2 py-1 rounded bg-gray-200 hover:bg-gray-300",onClick:St,children:"Cancelar"})]}):A.jsxs(A.Fragment,{children:[A.jsx("button",{className:"px-2 py-1 rounded text-white bg-yellow-600 hover:bg-yellow-700",onClick:()=>ur(Qe),children:"Editar"}),A.jsx("button",{className:"px-2 py-1 rounded text-white bg-red-600 hover:bg-red-700",onClick:()=>sr(Qe),children:"Borrar"}),A.jsx("button",{className:"px-2 py-1 rounded text-white bg-indigo-600 hover:bg-indigo-700",onClick:()=>fr(Qe),title:"Ver compras y abonos",children:"Estado de cuenta"})]})})})]},Qe.id)})})]})}),L&&A.jsx("p",{className:"mt-2 text-sm",children:L}),at&&_d.createPortal(A.jsxs("div",{className:"fixed inset-0 z-[70] flex items-center justify-center",children:[A.jsx("div",{className:"absolute inset-0 bg-black/40",onClick:()=>wt(!1)}),A.jsxs("div",{className:"relative bg-white rounded-lg shadow-2xl border w-[96%] max-w-3xl max-h-[92vh] overflow-auto p-4",children:[A.jsxs("div",{className:"flex items-center justify-between mb-2",children:[A.jsx("h3",{className:"text-lg font-bold",children:"Crear Cliente"}),A.jsx("button",{className:"px-3 py-1 rounded bg-gray-200 hover:bg-gray-300",onClick:()=>wt(!1),type:"button",children:"Cerrar"})]}),A.jsxs("form",{onSubmit:rt,className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[A.jsxs("div",{children:[A.jsx("label",{className:"block text-sm font-semibold",children:"Nombre"}),A.jsx("input",{className:"w-full border p-2 rounded",placeholder:"Ej: Mara Lpez",value:c,onChange:Qe=>u(Qe.target.value)})]}),A.jsxs("div",{children:[A.jsx("label",{className:"block text-sm font-semibold",children:"Telfono"}),A.jsx("input",{className:"w-full border p-2 rounded",value:f,onChange:Qe=>p(Bg(Qe.target.value)),placeholder:"+505 88888888",inputMode:"numeric"})]}),A.jsxs("div",{children:[A.jsx("label",{className:"block text-sm font-semibold",children:"Lugar"}),A.jsxs("select",{className:"w-full border p-2 rounded",value:m,onChange:Qe=>b(Qe.target.value),children:[A.jsx("option",{value:"",children:""}),UN.map(Qe=>A.jsx("option",{value:Qe,children:Qe},Qe))]})]}),A.jsxs("div",{children:[A.jsx("label",{className:"block text-sm font-semibold",children:"Estado"}),A.jsxs("select",{className:"w-full border p-2 rounded",value:w,onChange:Qe=>y(Qe.target.value),children:[A.jsx("option",{value:"ACTIVO",children:"ACTIVO"}),A.jsx("option",{value:"BLOQUEADO",children:"BLOQUEADO"})]})]}),A.jsxs("div",{children:[A.jsx("label",{className:"block text-sm font-semibold",children:"Lmite de crdito (opcional)"}),A.jsx("input",{type:"number",step:"0.01",inputMode:"decimal",className:"w-full border p-2 rounded",value:S===0?"":S,onChange:Qe=>O(Math.max(0,Number(Qe.target.value||0))),placeholder:"Ej: 2000"})]}),A.jsxs("div",{className:"md:col-span-2",children:[A.jsx("label",{className:"block text-sm font-semibold",children:"Comentario"}),A.jsx("textarea",{className:"w-full border p-2 rounded resize-y min-h-24",value:B,onChange:Qe=>_(Qe.target.value),maxLength:500,placeholder:"Notas del cliente"}),A.jsxs("div",{className:"text-xs text-gray-500 text-right",children:[B.length,"/500"]})]}),A.jsxs("div",{className:"md:col-span-2 flex justify-end gap-2",children:[A.jsx("button",{type:"button",className:"px-4 py-2 rounded bg-gray-200 hover:bg-gray-300",onClick:()=>wt(!1),children:"Cancelar"}),A.jsx("button",{className:"bg-blue-600 text-white px-4 py-2 rounded hover:bg-blue-700",children:"Guardar cliente"})]})]})]})]}),document.body),te&&A.jsx("div",{className:"fixed inset-0 bg-black/40 flex items-center justify-center z-50",children:A.jsxs("div",{className:"bg-white rounded-lg shadow-xl border w-[95%] max-w-5xl p-4",children:[A.jsxs("div",{className:"flex items-center justify-between mb-2",children:[A.jsxs("h3",{className:"text-lg font-bold",children:["Estado de cuenta  ",(ne==null?void 0:ne.name)||""]}),A.jsxs("div",{className:"flex gap-2",children:[A.jsx("button",{className:"px-3 py-1 rounded bg-green-600 text-white hover:bg-green-700",onClick:()=>{je(0),Pe(new Date().toISOString().slice(0,10)),qe(""),G(!0)},children:"Abonar"}),A.jsx("button",{className:"px-3 py-1 rounded bg-gray-200 hover:bg-gray-300",onClick:()=>$(!1),children:"Cerrar"})]})]}),A.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-3 mb-3",children:[A.jsxs("div",{className:"p-3 border rounded bg-gray-50",children:[A.jsx("div",{className:"text-xs text-gray-600",children:"Saldo actual"}),A.jsx("div",{className:"text-xl font-semibold",children:vo(Fe.saldoActual)})]}),A.jsxs("div",{className:"p-3 border rounded bg-gray-50",children:[A.jsx("div",{className:"text-xs text-gray-600",children:"Total abonado"}),A.jsx("div",{className:"text-xl font-semibold",children:vo(Fe.totalAbonado)})]}),A.jsxs("div",{className:"p-3 border rounded bg-gray-50",children:[A.jsx("div",{className:"text-xs text-gray-600",children:"Saldo restante"}),A.jsx("div",{className:"text-xl font-semibold",children:vo(Fe.saldoActual)})]})]}),A.jsx("div",{className:"bg-white rounded border overflow-x-auto",children:A.jsxs("table",{className:"min-w-full text-sm",children:[A.jsx("thead",{className:"bg-gray-100",children:A.jsxs("tr",{children:[A.jsx("th",{className:"p-2 border",children:"Fecha"}),A.jsx("th",{className:"p-2 border",children:"Tipo"}),A.jsx("th",{className:"p-2 border",children:"Referencia"}),A.jsx("th",{className:"p-2 border",children:"Comentario"}),A.jsx("th",{className:"p-2 border",children:"Monto"}),A.jsx("th",{className:"p-2 border",children:"Acciones"})]})}),A.jsx("tbody",{children:he?A.jsx("tr",{children:A.jsx("td",{colSpan:6,className:"p-4 text-center",children:"Cargando"})}):Ce.length===0?A.jsx("tr",{children:A.jsx("td",{colSpan:6,className:"p-4 text-center",children:"Sin movimientos"})}):Ce.map(Qe=>{var Ft,ft;const Oe=vt===Qe.id;return A.jsxs("tr",{className:"text-center",children:[A.jsx("td",{className:"p-2 border",children:Oe?A.jsx("input",{type:"date",className:"w-full border p-1 rounded",value:Ct,onChange:ct=>Ht(ct.target.value)}):Qe.date||""}),A.jsx("td",{className:"p-2 border",children:Qe.amount>=0?(Ft=Qe.ref)!=null&&Ft.saleId?A.jsx("button",{type:"button",className:"px-2 py-0.5 rounded text-xs bg-yellow-100 text-yellow-700 underline",title:"Ver piezas de esta compra",onClick:()=>l(Qe.ref.saleId),children:"COMPRA (CARGO)"}):A.jsx("span",{className:"px-2 py-0.5 rounded text-xs bg-yellow-100 text-yellow-700",children:"COMPRA (CARGO)"}):A.jsx("span",{className:"px-2 py-0.5 rounded text-xs bg-green-100 text-green-700",children:"ABONO"})}),A.jsx("td",{className:"p-2 border",children:(ft=Qe.ref)!=null&&ft.saleId?`Venta #${Qe.ref.saleId}`:""}),A.jsx("td",{className:"p-2 border",children:Oe?A.jsx("input",{className:"w-full border p-1 rounded",value:ve,onChange:ct=>We(ct.target.value),placeholder:"Comentario"}):A.jsx("span",{title:Qe.comment||"",children:(Qe.comment||"").length>40?(Qe.comment||"").slice(0,40)+"":Qe.comment||""})}),A.jsx("td",{className:"p-2 border font-semibold",children:Oe?A.jsx("input",{type:"number",step:"0.01",inputMode:"decimal",className:"w-full border p-1 rounded text-right",value:Number.isNaN(Et)?"":Et,onChange:ct=>{const Ut=Number(ct.target.value||0),it=Number.isFinite(Ut)?Math.max(0,parseFloat(Ut.toFixed(2))):0;se(it)},placeholder:"0.00",title:Qe.type==="ABONO"?"Se guardar como negativo":"Se guardar como positivo"}):vo(Qe.amount)}),A.jsx("td",{className:"p-2 border",children:Oe?A.jsxs("div",{className:"flex gap-2 justify-center",children:[A.jsx("button",{className:"px-2 py-1 rounded text-white bg-blue-600 hover:bg-blue-700",onClick:cs,children:"Guardar"}),A.jsx("button",{className:"px-2 py-1 rounded bg-gray-200 hover:bg-gray-300",onClick:Yt,children:"Cancelar"})]}):A.jsxs("div",{className:"flex gap-2 justify-center",children:[A.jsx("button",{className:"px-2 py-1 rounded text-white bg-yellow-600 hover:bg-yellow-700",onClick:()=>jt(Qe),children:"Editar"}),A.jsx("button",{className:"px-2 py-1 rounded text-white bg-red-600 hover:bg-red-700",onClick:()=>zr(Qe),children:"Borrar"})]})})]},Qe.id)})})]})})]})}),le&&A.jsx("div",{className:"fixed inset-0 bg-black/50 flex items-center justify-center z-[60]",children:A.jsxs("div",{className:"bg-white rounded-lg shadow-2xl border w-[95%] max-w-md p-4",children:[A.jsxs("h3",{className:"text-lg font-bold",children:["Registrar abono  ",(ne==null?void 0:ne.name)||""]}),A.jsxs("div",{className:"grid grid-cols-1 gap-3",children:[A.jsxs("div",{children:[A.jsx("label",{className:"block text-sm font-semibold",children:"Fecha"}),A.jsx("input",{type:"date",className:"w-full border p-2 rounded",value:Ue,onChange:Qe=>Pe(Qe.target.value)})]}),A.jsxs("div",{children:[A.jsx("label",{className:"block text-sm font-semibold",children:"Monto del abono"}),A.jsx("input",{type:"number",step:"0.01",inputMode:"decimal",className:"w-full border p-2 rounded",value:Re===0?"":Re,onChange:Qe=>{const Oe=Number(Qe.target.value||0),Ft=Number.isFinite(Oe)?Math.max(0,parseFloat(Oe.toFixed(2))):0;je(Ft)},placeholder:"0.00"}),A.jsx("div",{className:"text-xs text-gray-500 mt-1",children:"Se guarda con 2 decimales (se registrar como ABONO negativo)."})]}),A.jsxs("div",{children:[A.jsx("label",{className:"block text-sm font-semibold",children:"Comentario (opcional)"}),A.jsx("textarea",{className:"w-full border p-2 rounded resize-y min-h-20",value:Ge,onChange:Qe=>qe(Qe.target.value),maxLength:250,placeholder:"Ej: Abono en efectivo"}),A.jsxs("div",{className:"text-xs text-gray-500 text-right",children:[Ge.length,"/250"]})]})]}),A.jsxs("div",{className:"mt-4 flex justify-end gap-2",children:[A.jsx("button",{className:"px-3 py-2 rounded bg-gray-200 hover:bg-gray-300",onClick:()=>G(!1),disabled:tt,children:"Cancelar"}),A.jsx("button",{className:"px-3 py-2 rounded bg-green-600 text-white hover:bg-green-700 disabled:opacity-60",onClick:vr,disabled:tt,children:tt?"Guardando...":"Guardar abono"})]})]})}),t&&A.jsx("div",{className:"fixed inset-0 bg-black/40 flex items-center justify-center z-[65]",children:A.jsxs("div",{className:"bg-white rounded-lg shadow-xl border w-[95%] max-w-3xl p-4",children:[A.jsxs("div",{className:"flex items-center justify-between mb-2",children:[A.jsxs("h3",{className:"text-lg font-bold",children:["Piezas vendidas"," ",s?` #${s}`:""]}),A.jsx("button",{className:"px-3 py-1 rounded bg-gray-200 hover:bg-gray-300",onClick:()=>e(!1),children:"Cerrar"})]}),A.jsx("div",{className:"bg-white rounded border overflow-x-auto",children:A.jsxs("table",{className:"min-w-full text-sm",children:[A.jsx("thead",{className:"bg-gray-100",children:A.jsxs("tr",{children:[A.jsx("th",{className:"p-2 border",children:"Producto"}),A.jsx("th",{className:"p-2 border text-right",children:"Cantidad"}),A.jsx("th",{className:"p-2 border text-right",children:"Precio"}),A.jsx("th",{className:"p-2 border text-right",children:"Descuento"}),A.jsx("th",{className:"p-2 border text-right",children:"Monto"})]})}),A.jsx("tbody",{children:r?A.jsx("tr",{children:A.jsx("td",{colSpan:5,className:"p-4 text-center",children:"Cargando"})}):a.length===0?A.jsx("tr",{children:A.jsx("td",{colSpan:5,className:"p-4 text-center",children:"Sin tems en esta venta."})}):a.map((Qe,Oe)=>A.jsxs("tr",{className:"text-center",children:[A.jsx("td",{className:"p-2 border text-left",children:Qe.productName}),A.jsx("td",{className:"p-2 border text-right",children:Qe.qty}),A.jsx("td",{className:"p-2 border text-right",children:vo(Qe.unitPrice)}),A.jsx("td",{className:"p-2 border text-right",children:vo(Qe.discount||0)}),A.jsx("td",{className:"p-2 border text-right",children:vo(Qe.total)})]},Oe))})]})})]})})]})}const ku=t=>`C$ ${(Number(t)||0).toFixed(2)}`,uW=["Altagracia","Taguizapa","El paso","Calaysa","Urbaite","Las Pilas"];async function dW(t){if(!t)return 0;const e=Xt(ot(Le,"inventory_clothes_batches"),rr("productId","==",t)),r=await Pt(e);let n="0000-00-00",s=-1,i=0;return r.forEach(a=>{const o=a.data(),l=String(o.date||"0000-00-00"),c=Number(o.salePrice||0),u=o.createdAt,f=((u==null?void 0:u.seconds)??0)*1e3+((u==null?void 0:u.nanoseconds)??0)/1e6;l>n?(n=l,s=f,i=c):l===n&&f>s&&(s=f,i=c)}),Number(i||0)}async function QN(t){if(!t)return 0;const e=Xt(ot(Le,"inventory_clothes_batches"),rr("productId","==",t)),r=await Pt(e);let n=0;return r.forEach(s=>n+=Number(s.data().remaining||0)),n}function LN(t){const e="+505 ";if(!t.startsWith(e)){const n=t.replace(/\D/g,"");return e+n.slice(0,8)}const r=t.slice(e.length).replace(/\D/g,"");return e+r.slice(0,8)}function hW(){const[t,e]=P.useState([]),[r,n]=P.useState([]),[s,i]=P.useState({}),[a,o]=P.useState("CONTADO"),[l,c]=P.useState(""),[u,f]=P.useState(""),[p,m]=P.useState(new Date().toISOString().slice(0,10)),[b,B]=P.useState(""),[_,w]=P.useState([]),y=P.useMemo(()=>_.reduce((oe,le)=>oe+(le.qty||0),0),[_]),S=P.useMemo(()=>{const oe=_.reduce((le,G)=>{const Re=Math.max(0,(Number(G.unitPrice)||0)*(G.qty||0)-(Number(G.discount)||0));return le+Re},0);return Math.floor(oe*100)/100},[_]),[O,R]=P.useState(0),[M,I]=P.useState(""),[E,L]=P.useState(!1),[D,N]=P.useState(!1),[T,F]=P.useState(""),[ee,ce]=P.useState("+505 "),[re,de]=P.useState(""),[W,ue]=P.useState(""),[ae,Ee]=P.useState("ACTIVO"),[Q,k]=P.useState(0),z=()=>{F(""),ce("+505 "),de(""),ue(""),Ee("ACTIVO"),k(0)};P.useEffect(()=>{(async()=>{const oe=Xt(ot(Le,"customers_clothes"),fi("createdAt","desc")),le=await Pt(oe),G=[];le.forEach(tt=>{const Ze=tt.data();G.push({id:tt.id,name:Ze.name??"",phone:Ze.phone??"+505 ",place:Ze.place??"",status:Ze.status??"ACTIVO",creditLimit:Number(Ze.creditLimit??0),balance:0})});for(const tt of G)try{const Ze=Xt(ot(Le,"ar_movements"),rr("customerId","==",tt.id)),vt=await Pt(Ze);let ht=0;vt.forEach(Ct=>ht+=Number(Ct.data().amount||0)),tt.balance=ht}catch{tt.balance=0}e(G);const Re=Xt(ot(Le,"products_clothes"),fi("createdAt","desc")),je=await Pt(Re),Ue=[];je.forEach(tt=>{const Ze=tt.data();Ue.push({id:tt.id,name:Ze.name??"(sin nombre)",sku:Ze.sku??""})}),n(Ue);const Pe=Xt(ot(Le,"inventory_clothes_batches"),rr("remaining",">",0)),Ge=await Pt(Pe),qe={};Ge.forEach(tt=>{const Ze=tt.data(),vt=Ze.productId||"",ht=Number(Ze.remaining||0);vt&&(qe[vt]=(qe[vt]||0)+ht)}),i(qe)})()},[]);const te=P.useMemo(()=>t.find(oe=>oe.id===l),[t,l]),$=(te==null?void 0:te.balance)||0,ne=a==="CREDITO"?$+Math.max(0,Number(S||0))-Math.max(0,Number(O||0)):0,X=async oe=>{if(!oe)return;if(_.some(Ue=>Ue.productId===oe)){B("");return}const le=r.find(Ue=>Ue.id===oe);if(!le){B("");return}let G=await dW(oe);G||(G=Number((le==null?void 0:le.price)||0));const Re=await QN(oe),je={productId:oe,productName:le.name||"",sku:le.sku||"",unitPrice:Number(G)||0,available:Number(Re)||0,qty:0,discount:0};w(Ue=>[...Ue,je]),B("")},he=(oe,le)=>{w(G=>G.map(Re=>{if(Re.productId!==oe)return Re;if(le==="")return{...Re,qty:0};const je=Math.max(0,Math.floor(Number(le)));return{...Re,qty:je}}))},ge=(oe,le)=>{w(G=>G.map(Re=>{if(Re.productId!==oe)return Re;if(le==="")return{...Re,discount:0};const je=Math.max(0,Math.floor(Number(le)));return{...Re,discount:je}}))},Ce=oe=>w(le=>le.filter(G=>G.productId!==oe)),Te=async()=>{if(!p)return"Selecciona la fecha.";if(_.length===0)return"Agrega al menos un producto.";const oe=_.filter(le=>(le.qty||0)>0);if(oe.length===0)return"Debes ingresar cantidades (> 0) en al menos un producto.";if(!(S>0))return"El total debe ser mayor a cero.";if(a==="CONTADO"){if(!u.trim())return"Ingresa el nombre del cliente (contado)."}else{if(!l)return"Selecciona un cliente (crdito).";if(O<0)return"El pago inicial no puede ser negativo.";if(O>S)return"El pago inicial no puede superar el total.";if((te==null?void 0:te.status)==="BLOQUEADO")return"El cliente est BLOQUEADO. No se puede facturar a crdito."}for(const le of oe){const G=await QN(le.productId);if(le.qty>G)return`Inventario insuficiente para "${le.productName}". Disponible: ${G} unidades.`;const Re=(Number(le.unitPrice)||0)*(le.qty||0),je=Number(le.discount)||0;if(!Number.isInteger(je)||je<0)return`El descuento en "${le.productName}" debe ser entero y  0.`;if(je>Re)return`El descuento en "${le.productName}" no puede exceder C$ ${Re.toFixed(2)}.`}return null},Fe=async oe=>{oe.preventDefault(),I("");const le=await Te();if(le){I(" "+le);return}try{L(!0);const G=_.filter(Pe=>(Pe.qty||0)>0).map(Pe=>{const Ge=(Number(Pe.unitPrice)||0)*(Pe.qty||0),qe=Math.max(0,Math.floor(Number(Pe.discount)||0)),tt=Math.max(0,Ge-qe);return{productId:Pe.productId,productName:Pe.productName,sku:Pe.sku||"",qty:Pe.qty,unitPrice:Number(Pe.unitPrice)||0,discount:qe,total:Math.floor(tt*100)/100}}),Re={type:a,date:p,createdAt:Dt.now(),itemsTotal:Number(S)||0,total:Number(S)||0,quantity:Number(y)||0,items:G};a==="CONTADO"?Re.customerName=u.trim():(Re.customerId=l,Re.downPayment=Number(O)||0);const je=await qn(ot(Le,"sales_clothes"),Re);if(a==="CREDITO"&&l){const Pe={customerId:l,date:p,createdAt:Dt.now(),ref:{saleId:je.id}};await qn(ot(Le,"ar_movements"),{...Pe,type:"CARGO",amount:Number(S)||0}),Number(O)>0&&await qn(ot(Le,"ar_movements"),{...Pe,type:"ABONO",amount:-Number(O)})}const Ue={};for(const Pe of G)if(Pe.qty>0){const{allocations:Ge}=await lW({productId:Pe.productId,quantity:Pe.qty,saleDate:p,saleId:je.id});Ue[Pe.productId]={productId:Pe.productId,allocations:Ge}}await rn(Lt(Le,"sales_clothes",je.id),{allocationsByItem:Ue}),o("CONTADO"),c(""),f(""),m(new Date().toISOString().slice(0,10)),w([]),R(0),a==="CREDITO"&&l&&e(Pe=>Pe.map(Ge=>Ge.id===l?{...Ge,balance:(Ge.balance||0)+(Number(S)||0)-(Number(O)||0)}:Ge)),I(" Venta registrada"),(async()=>{const Pe=Xt(ot(Le,"inventory_clothes_batches"),rr("remaining",">",0)),Ge=await Pt(Pe),qe={};Ge.forEach(tt=>{const Ze=tt.data(),vt=Ze.productId||"",ht=Number(Ze.remaining||0);vt&&(qe[vt]=(qe[vt]||0)+ht)}),i(qe)})()}catch(G){console.error(G),I(" Error al guardar la venta")}finally{L(!1)}};return A.jsxs("div",{className:"max-w-6xl mx-auto",children:[A.jsx("h2",{className:"text-2xl font-bold mb-3",children:"Ventas (Ropa)"}),A.jsxs("form",{onSubmit:Fe,className:"bg-white p-4 rounded shadow border mb-6 grid grid-cols-1 md:grid-cols-2 gap-4",children:[A.jsxs("div",{children:[A.jsx("label",{className:"block text-sm font-semibold",children:"Tipo de cliente"}),A.jsxs("select",{className:"w-full border p-2 rounded",value:a,onChange:oe=>o(oe.target.value),children:[A.jsx("option",{value:"CONTADO",children:"Contado"}),A.jsx("option",{value:"CREDITO",children:"Crdito"})]})]}),a==="CONTADO"?A.jsxs("div",{children:[A.jsx("label",{className:"block text-sm font-semibold",children:"Nombre del cliente (contado)"}),A.jsx("input",{className:"w-full border p-2 rounded",placeholder:"Ej: Cliente Mostrador",value:u,onChange:oe=>f(oe.target.value)})]}):A.jsxs("div",{className:"md:col-span-2",children:[A.jsx("label",{className:"block text-sm font-semibold",children:"Cliente (crdito)"}),A.jsxs("div",{className:"flex gap-2",children:[A.jsxs("select",{className:"flex-1 border p-2 rounded",value:l,onChange:oe=>c(oe.target.value),children:[A.jsx("option",{value:"",children:"Selecciona un cliente"}),t.map(oe=>A.jsxs("option",{value:oe.status==="ACTIVO"?oe.id:"",disabled:oe.status==="BLOQUEADO",children:[oe.name," | ",oe.phone," | Saldo: ",ku(oe.balance||0)]},oe.id))]}),A.jsx("button",{type:"button",className:"px-20 py-2 rounded bg-green-600 text-white hover:bg-green-700",onClick:()=>N(!0),children:"Crear Cliente"})]}),A.jsxs("div",{className:"mt-2 grid grid-cols-1 md:grid-cols-3 gap-3",children:[A.jsxs("div",{className:"p-2 rounded bg-gray-50 border",children:[A.jsx("div",{className:"text-xs text-gray-600",children:"Saldo actual"}),A.jsx("div",{className:"text-lg font-semibold",children:ku($)})]}),A.jsxs("div",{children:[A.jsx("label",{className:"block text-sm font-semibold",children:"Pago inicial (opcional)"}),A.jsx("input",{type:"number",step:"0.01",inputMode:"decimal",className:"w-full border p-2 rounded",value:O===0?"":O,onChange:oe=>R(Math.max(0,Number(oe.target.value||0))),placeholder:"0.00"})]}),A.jsxs("div",{className:"p-2 rounded bg-gray-50 border",children:[A.jsx("div",{className:"text-xs text-gray-600",children:"Saldo proyectado"}),A.jsx("div",{className:"text-lg font-semibold",children:ku(ne)})]})]})]}),A.jsxs("div",{children:[A.jsx("label",{className:"block text-sm font-semibold",children:"Fecha de venta"}),A.jsx("input",{type:"date",className:"w-full border p-2 rounded",value:p,onChange:oe=>m(oe.target.value)})]}),A.jsxs("div",{className:"md:col-span-2",children:[A.jsx("label",{className:"block text-sm font-semibold",children:"Producto"}),A.jsxs("select",{className:"w-full border p-2 rounded",value:b,onChange:async oe=>{const le=oe.target.value;B(le),await X(le)},children:[A.jsx("option",{value:"",children:"Selecciona un producto"}),r.map(oe=>{const le=_.some(je=>je.productId===oe.id),G=s[oe.id]||0,Re=le||G<=0;return A.jsxs("option",{value:Re?"":oe.id,disabled:Re,children:[oe.name," ",oe.sku?` ${oe.sku}`:""," ",G>0?`(disp: ${G})`:"(sin stock)",le?" (seleccionado)":""]},oe.id)})]}),A.jsx("div",{className:"text-xs text-gray-500 mt-1",children:"Productos sin existencias se muestran en gris y no se pueden seleccionar."})]}),A.jsxs("div",{className:"md:col-span-2",children:[A.jsxs("div",{className:"border rounded overflow-hidden",children:[A.jsxs("div",{className:"grid grid-cols-12 bg-gray-50 px-3 py-2 text-xs font-semibold border-b",children:[A.jsx("div",{className:"col-span-4",children:"Producto"}),A.jsx("div",{className:"col-span-2 text-right",children:"Precio"}),A.jsx("div",{className:"col-span-2 text-right",children:"Existencias"}),A.jsx("div",{className:"col-span-1 text-right",children:"Cantidad"}),A.jsx("div",{className:"col-span-1 text-right",children:"Descuento"}),A.jsx("div",{className:"col-span-1 text-right",children:"Monto"}),A.jsx("div",{className:"col-span-1 text-center",children:"Quitar"})]}),_.length===0?A.jsx("div",{className:"px-3 py-4 text-sm text-gray-500",children:"No hay productos agregados."}):_.map(oe=>{const le=Math.max(0,(oe.available||0)-(oe.qty||0)),G=(Number(oe.unitPrice)||0)*(oe.qty||0),Re=Math.max(0,G-(Number(oe.discount)||0));return A.jsxs("div",{className:"grid grid-cols-12 items-center px-3 py-2 border-b text-sm gap-x-2",children:[A.jsx("div",{className:"col-span-4",children:A.jsxs("div",{className:"font-medium",children:[oe.productName,oe.sku?`  ${oe.sku}`:""]})}),A.jsx("div",{className:"col-span-2 text-right",children:ku(oe.unitPrice)}),A.jsx("div",{className:"col-span-2 text-right",children:le}),A.jsx("div",{className:"col-span-1",children:A.jsx("input",{type:"number",step:"0",min:0,className:"w-full border p-1 rounded text-right",value:Number.isNaN(oe.qty)||oe.qty===0?"":oe.qty,onChange:je=>he(oe.productId,je.target.value),inputMode:"numeric",placeholder:"0",title:"Cantidad de piezas"})}),A.jsx("div",{className:"col-span-1",children:A.jsx("input",{type:"number",step:"1",min:0,className:"w-full border p-1 rounded text-right",value:Number.isNaN(oe.discount)||oe.discount===0?"":oe.discount,onChange:je=>ge(oe.productId,je.target.value),inputMode:"numeric",placeholder:"0",title:"Descuento entero (C$)"})}),A.jsx("div",{className:"col-span-1 text-right",children:ku(Re)}),A.jsx("div",{className:"col-span-1 text-center",children:A.jsx("button",{type:"button",className:"px-2 py-1 rounded bg-red-100 hover:bg-red-200",onClick:()=>Ce(oe.productId),title:"Quitar producto",children:""})})]},oe.productId)})]}),_.length>0&&A.jsxs("div",{className:"flex justify-end gap-6 mt-3 text-sm",children:[A.jsxs("div",{children:[A.jsx("span",{className:"text-gray-600",children:"Piezas totales: "}),A.jsx("span",{className:"font-semibold",children:y})]}),A.jsxs("div",{children:[A.jsx("span",{className:"text-gray-600",children:"Total: "}),A.jsx("span",{className:"font-semibold",children:ku(S)})]})]})]}),A.jsx("div",{className:"md:col-span-2",children:A.jsx("button",{className:"bg-blue-600 text-white px-4 py-2 rounded hover:bg-blue-700 disabled:opacity-60",disabled:E,children:E?"Guardando...":"Registrar venta"})})]}),M&&A.jsx("p",{className:"mt-2 text-sm",children:M}),D&&A.jsx("div",{className:"fixed inset-0 bg-black/40 flex items-center justify-center z-50",children:A.jsxs("div",{className:"bg-white rounded-lg shadow-xl border w-[95%] max-w-xl p-4",children:[A.jsx("h3",{className:"text-lg font-bold mb-3",children:"Nuevo cliente"}),A.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-3",children:[A.jsxs("div",{children:[A.jsx("label",{className:"block text-sm font-semibold",children:"Nombre"}),A.jsx("input",{className:"w-full border p-2 rounded",value:T,onChange:oe=>F(oe.target.value)})]}),A.jsxs("div",{children:[A.jsx("label",{className:"block text-sm font-semibold",children:"Telfono"}),A.jsx("input",{className:"w-full border p-2 rounded",value:ee,onChange:oe=>ce(LN(oe.target.value)),placeholder:"+505 88888888",inputMode:"numeric"})]}),A.jsxs("div",{children:[A.jsx("label",{className:"block text-sm font-semibold",children:"Lugar"}),A.jsxs("select",{className:"w-full border p-2 rounded",value:re,onChange:oe=>de(oe.target.value),children:[A.jsx("option",{value:"",children:""}),uW.map(oe=>A.jsx("option",{value:oe,children:oe},oe))]})]}),A.jsxs("div",{children:[A.jsx("label",{className:"block text-sm font-semibold",children:"Estado"}),A.jsxs("select",{className:"w-full border p-2 rounded",value:ae,onChange:oe=>Ee(oe.target.value),children:[A.jsx("option",{value:"ACTIVO",children:"ACTIVO"}),A.jsx("option",{value:"BLOQUEADO",children:"BLOQUEADO"})]})]}),A.jsxs("div",{children:[A.jsx("label",{className:"block text-sm font-semibold",children:"Lmite de crdito (opcional)"}),A.jsx("input",{type:"number",step:"0.01",inputMode:"decimal",className:"w-full border p-2 rounded",value:Q===0?"":Q,onChange:oe=>k(Math.max(0,Number(oe.target.value||0))),placeholder:"Ej: 2000"})]}),A.jsxs("div",{className:"md:col-span-2",children:[A.jsx("label",{className:"block text-sm font-semibold",children:"Comentario"}),A.jsx("textarea",{className:"w-full border p-2 rounded resize-y min-h-20",value:W,onChange:oe=>ue(oe.target.value),maxLength:500})]})]}),A.jsxs("div",{className:"mt-4 flex justify-end gap-2",children:[A.jsx("button",{className:"px-3 py-2 rounded bg-gray-200 hover:bg-gray-300",onClick:()=>{z(),N(!1)},children:"Cancelar"}),A.jsx("button",{className:"px-3 py-2 rounded bg-green-600 text-white hover:bg-green-700",onClick:async()=>{if(I(""),!T.trim()){I("Ingresa el nombre del nuevo cliente.");return}const oe=LN(ee);try{const le=await qn(ot(Le,"customers_clothes"),{name:T.trim(),phone:oe,place:re||"",notes:W||"",status:ae,creditLimit:Number(Q||0),createdAt:Dt.now()}),G={id:le.id,name:T.trim(),phone:oe,place:re||"",status:ae,creditLimit:Number(Q||0),balance:0};e(Re=>[G,...Re]),c(le.id),z(),N(!1),I(" Cliente creado")}catch(le){console.error(le),I(" Error al crear cliente")}},children:"Guardar cliente"})]})]})}),E&&A.jsx("div",{className:"fixed inset-0 z-[70] bg-black/40 flex items-center justify-center",children:A.jsxs("div",{className:"bg-white rounded-lg shadow-xl border px-4 py-3 flex items-center gap-3",children:[A.jsxs("svg",{className:"h-5 w-5 animate-spin",viewBox:"0 0 24 24",fill:"none",children:[A.jsx("circle",{className:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor",strokeWidth:"4"}),A.jsx("path",{className:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8v4a4 4 0 00-4 4H4z"})]}),A.jsx("span",{className:"font-medium",children:"Guardando venta"})]})})]})}const Tn=t=>`C$ ${(Number(t)||0).toFixed(2)}`;function t0(t){var r;const e=t==null?void 0:t.date;return e||((r=t==null?void 0:t.createdAt)!=null&&r.toDate?er(t.createdAt.toDate(),"yyyy-MM-dd"):"")}function fW(t,e){const r=t0(t);if(!r)return null;if(Array.isArray(t.items))return{id:e,date:r,type:t.type||"CONTADO",total:Number(t.total??t.itemsTotal??0),items:t.items.map(a=>({productId:String(a.productId||""),productName:String(a.productName||""),sku:a.sku||"",qty:Number(a.qty||0),unitPrice:Number(a.unitPrice??(Number(a.total||0)/Math.max(1,Number(a.qty||0))||0)),discount:Number(a.discount||0)})),customerId:t.customerId||void 0,customerName:t.customerName||void 0};const n=t.item||{},s=Number(t.quantity??n.qty??0),i=Number(t.total??t.itemsTotal??n.total??0);return{id:e,date:r,type:t.type||"CONTADO",total:Number(t.total??t.itemsTotal??i??0),items:[{productId:String(n.productId||t.productId||""),productName:String(n.productName||t.productName||""),sku:n.sku||t.sku||"",qty:s,unitPrice:Number(n.unitPrice??(i&&s?i/s:0)),discount:Number(n.discount||0)}],customerId:t.customerId||void 0,customerName:t.customerName||void 0}}function pW(t,e,r,n){const s={};for(const o of t)s[o.productId]||(s[o.productId]={productName:o.productName,lots:[]}),s[o.productId].lots.push({date:o.date,qtyLeft:Number(o.quantity||0),cost:Number(o.purchasePrice||0)});for(const o of Object.keys(s))s[o].lots.sort((l,c)=>l.date.localeCompare(c.date));const i=[...e].sort((o,l)=>o.date.localeCompare(l.date));let a=0;for(const o of i)for(const l of o.items||[]){const c=s[l.productId];if(!c)continue;let u=Number(l.qty||0);if(!(u<=0))for(const f of c.lots){if(u<=0)break;if(f.qtyLeft<=0)continue;const p=Math.min(f.qtyLeft,u);o.date>=r&&o.date<=n&&(a+=p*f.cost),f.qtyLeft-=p,u-=p}}return a}function mW(){const{refreshKey:t,refresh:e}=rh(),[r,n]=P.useState(er(eh(new Date),"yyyy-MM-dd")),[s,i]=P.useState(er(Zd(new Date),"yyyy-MM-dd")),[a,o]=P.useState([]),[l,c]=P.useState([]),[u,f]=P.useState([]),[p,m]=P.useState([]),[b,B]=P.useState([]),[_,w]=P.useState([]),[y,S]=P.useState(!0),[O,R]=P.useState(""),[M,I]=P.useState(!1),[E,L]=P.useState(null),[D,N]=P.useState([]),[T,F]=P.useState(!1),[ee,ce]=P.useState({totalBruto:0,totalDescuento:0,totalFiado:0,saldoActual:0,abonadoPeriodo:0});P.useEffect(()=>{(async()=>{S(!0),R("");try{const Q=await Pt(ot(Le,"sales_clothes")),k=[],z=[];Q.forEach(oe=>{const le=oe.data(),G=fW(le,oe.id);G&&(G.date<=s&&k.push(G),G.date>=r&&G.date<=s&&z.push(G))}),c(k),o(z);const te=await Pt(ot(Le,"inventory_clothes_batches")),$=[];te.forEach(oe=>{const le=oe.data(),G=t0(le);!G||G>s||$.push({id:oe.id,productId:le.productId,productName:le.productName||"",date:G,quantity:Number(le.quantity||0),remaining:Number(le.remaining||0),purchasePrice:Number(le.purchasePrice||0)})}),f($);const ne=await Pt(ot(Le,"expenses_clothes")),X=[];ne.forEach(oe=>{const le=oe.data(),G=t0(le);G&&G>=r&&G<=s&&X.push({id:oe.id,date:G,category:le.category||"",description:le.description||"",amount:Number(le.amount||0),status:le.status||""})}),m(X);const he=await Pt(ot(Le,"ar_movements")),ge=[],Ce={};he.forEach(oe=>{const le=oe.data(),G=t0(le);if(!G)return;const Re=le.customerId,je=Number(le.amount||0);Re&&(Ce[Re]=(Ce[Re]||0)+je),le.type==="ABONO"&&G>=r&&G<=s&&ge.push({id:oe.id,customerId:Re,type:"ABONO",amount:je,date:G})}),B(ge);const Te=await Pt(ot(Le,"customers_clothes")),Fe=[];Te.forEach(oe=>{const le=oe.data();Fe.push({id:oe.id,name:le.name||"",balance:Ce[oe.id]||0})}),w(Fe)}catch(Q){console.error(Q),R(" Error cargando datos del dashboard.")}finally{S(!1)}})()},[r,s,t]);const re=P.useMemo(()=>{try{return pW(u,l,r,s)}catch(Q){return console.error(Q),0}},[u,l,r,s]),de=P.useMemo(()=>{const Q=a.reduce((Ce,Te)=>Ce+(Te.total||0),0),k=p.reduce((Ce,Te)=>Ce+(Te.amount||0),0),z=Q-re,te=z-k,$=b.reduce((Ce,Te)=>Ce+Math.abs(Te.amount||0),0),ne=_.filter(Ce=>(Ce.balance||0)>0),X=ne.reduce((Ce,Te)=>Ce+(Te.balance||0),0);let he=0,ge=0;for(const Ce of a){const Te=(Ce.items||[]).reduce((Fe,oe)=>Fe+(Number(oe.qty)||0),0);Ce.type==="CONTADO"?he+=Te:ge+=Te}return{ventasTotales:Q,costoMercaderia:re,gastosPeriodo:k,gananciaAntes:z,gananciaDespues:te,abonosRecibidos:$,saldosPendientes:X,clientesConSaldo:ne.length,prendasCash:he,prendasCredito:ge}},[a,p,b,_,re]),W=P.useMemo(()=>{const Q={};for(const k of a){if(k.type!=="CREDITO"||!k.customerId)continue;const z=(k.items||[]).reduce((te,$)=>te+(Number($.qty)||0),0);Q[k.customerId]=(Q[k.customerId]||0)+z}return _.filter(k=>(k.balance||0)>0).map(k=>({customerId:k.id,name:k.name,prendasCredito:Q[k.id]||0,saldo:k.balance||0})).sort((k,z)=>z.saldo-k.saldo)},[_,a]),ue=P.useMemo(()=>{const Q={};return _.forEach(k=>Q[k.id]=k.name),Q},[_]),ae=P.useMemo(()=>[...a].sort((Q,k)=>k.date.localeCompare(Q.date)).map(Q=>{var te;const k=(Q.items||[]).reduce(($,ne)=>$+(Number(ne.qty)||0),0);let z="Cash";return Q.type==="CREDITO"&&Q.customerId?z=ue[Q.customerId]||"":Q.type==="CONTADO"&&(z=((te=Q.customerName)==null?void 0:te.trim())||"Cash"),{id:Q.id,date:Q.date,type:Q.type==="CREDITO"?"Crdito":"Cash",customer:z,piezas:k,total:Number(Q.total||0)}}),[a,ue]),Ee=async Q=>{I(!0),L({id:Q.customerId,name:Q.name}),N([]),F(!0),ce({totalBruto:0,totalDescuento:0,totalFiado:0,saldoActual:0,abonadoPeriodo:0});try{const k=[];let z=0,te=0,$=0;for(const ge of a)if(!(ge.type!=="CREDITO"||ge.customerId!==Q.customerId))for(const Ce of ge.items||[]){const Te=Number(Ce.qty||0),Fe=Number(Ce.unitPrice||0),oe=Te*Fe,le=Math.max(0,Number(Ce.discount||0)),G=Math.max(0,oe-le);k.push({saleId:ge.id,date:ge.date,productName:Ce.productName,sku:Ce.sku||"",qty:Te,unitPrice:Fe,lineTotal:oe,discount:le,lineFinal:G}),z+=oe,te+=le,$+=G}let ne=0;for(const ge of b)ge.customerId===Q.customerId&&(ne+=Math.abs(ge.amount||0));const X=_.find(ge=>ge.id===Q.customerId),he=(X==null?void 0:X.balance)||0;N(k),ce({totalBruto:z,totalDescuento:te,totalFiado:$,saldoActual:he,abonadoPeriodo:ne})}catch(k){console.error(k),R(" No se pudo cargar el detalle del cliente.")}finally{F(!1)}};return A.jsxs("div",{className:"max-w-6xl mx-auto",children:[A.jsxs("div",{className:"flex items-center justify-between mb-3",children:[A.jsx("h2",{className:"text-2xl font-bold",children:"Finanzas (Ropa)"}),A.jsx(zp,{onClick:e,loading:y})]}),A.jsxs("div",{className:"bg-white p-3 rounded shadow border mb-4 flex flex-wrap items-end gap-3 text-sm",children:[A.jsxs("div",{className:"flex flex-col",children:[A.jsx("label",{className:"font-semibold",children:"Desde"}),A.jsx("input",{type:"date",className:"border rounded px-2 py-1",value:r,onChange:Q=>n(Q.target.value)})]}),A.jsxs("div",{className:"flex flex-col",children:[A.jsx("label",{className:"font-semibold",children:"Hasta"}),A.jsx("input",{type:"date",className:"border rounded px-2 py-1",value:s,onChange:Q=>i(Q.target.value)})]})]}),A.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 xl:grid-cols-4 gap-3 mb-4",children:[A.jsxs("div",{className:"p-3 border rounded bg-gray-50",children:[A.jsx("div",{className:"text-xs text-gray-600",children:"Ventas Totales"}),A.jsx("div",{className:"text-xl font-semibold",children:Tn(de.ventasTotales)}),A.jsx("div",{className:"text-[11px] text-gray-500 mt-1",children:"Cash + Crdito del periodo."})]}),A.jsxs("div",{className:"p-3 border rounded bg-gray-50",children:[A.jsx("div",{className:"text-xs text-gray-600",children:"Costo de Mercadera (FIFO)"}),A.jsx("div",{className:"text-xl font-semibold",children:Tn(de.costoMercaderia)})]}),A.jsxs("div",{className:"p-3 border rounded bg-gray-50",children:[A.jsx("div",{className:"text-xs text-gray-600",children:"Ganancia antes de Gastos"}),A.jsx("div",{className:"text-xl font-semibold text-green-600",children:Tn(de.gananciaAntes)})]}),A.jsxs("div",{className:"p-3 border rounded bg-gray-50",children:[A.jsx("div",{className:"text-xs text-gray-600",children:"Gastos del Negocio"}),A.jsx("div",{className:"text-xl font-semibold",children:Tn(de.gastosPeriodo)})]}),A.jsxs("div",{className:"p-3 border rounded bg-gray-50",children:[A.jsx("div",{className:"text-xs text-gray-600",children:"Ganancia despus de Gastos"}),A.jsx("div",{className:"text-xl font-semibold text-green-600",children:Tn(de.gananciaDespues)})]}),A.jsxs("div",{className:"p-3 border rounded bg-gray-50",children:[A.jsx("div",{className:"text-xs text-gray-600",children:"Abonos Recibidos"}),A.jsx("div",{className:"text-xl font-semibold",children:Tn(de.abonosRecibidos)})]}),A.jsxs("div",{className:"p-3 border rounded bg-gray-50",children:[A.jsx("div",{className:"text-xs text-gray-600",children:"Saldos Pendientes"}),A.jsx("div",{className:"text-xl font-semibold",children:Tn(de.saldosPendientes)}),A.jsx("div",{className:"text-[11px] text-gray-500 mt-1",children:"A la fecha."})]}),A.jsxs("div",{className:"p-3 border rounded bg-gray-50",children:[A.jsx("div",{className:"text-xs text-gray-600",children:"Clientes con Saldo"}),A.jsx("div",{className:"text-xl font-semibold",children:de.clientesConSaldo})]}),A.jsxs("div",{className:"p-3 border rounded bg-gray-50",children:[A.jsx("div",{className:"text-xs text-gray-600",children:"Prendas Cash"}),A.jsx("div",{className:"text-xl font-semibold",children:de.prendasCash})]}),A.jsxs("div",{className:"p-3 border rounded bg-gray-50",children:[A.jsx("div",{className:"text-xs text-gray-600",children:"Prendas Crdito (vendidas)"}),A.jsx("div",{className:"text-xl font-semibold",children:de.prendasCredito})]})]}),A.jsx("h3",{className:"text-lg font-semibold mb-2",children:"Consolidado por cliente"}),A.jsx("div",{className:"bg-white p-2 rounded shadow border w-full mb-6",children:A.jsxs("table",{className:"min-w-full w-full text-sm",children:[A.jsx("thead",{className:"bg-gray-100",children:A.jsxs("tr",{children:[A.jsx("th",{className:"p-2 border",children:"Cliente"}),A.jsx("th",{className:"p-2 border",children:"Prendas Crdito (periodo)"}),A.jsx("th",{className:"p-2 border",children:"Saldo actual"})]})}),A.jsx("tbody",{children:y?A.jsx("tr",{children:A.jsx("td",{className:"p-4 text-center",colSpan:3,children:"Cargando"})}):W.length===0?A.jsx("tr",{children:A.jsx("td",{className:"p-4 text-center",colSpan:3,children:"Sin clientes con saldo"})}):W.map(Q=>A.jsxs("tr",{className:"text-center",children:[A.jsx("td",{className:"p-2 border",children:Q.name}),A.jsx("td",{className:"p-2 border",children:A.jsx("button",{className:"underline text-blue-600 hover:text-blue-800",onClick:()=>Ee({customerId:Q.customerId,name:Q.name}),title:"Ver piezas fiadas del periodo",children:Q.prendasCredito})}),A.jsx("td",{className:"p-2 border font-semibold",children:Tn(Q.saldo)})]},Q.customerId))})]})}),A.jsx("h3",{className:"text-lg font-semibold mb-2",children:"Transacciones del periodo"}),A.jsx("div",{className:"bg-white p-2 rounded shadow border w-full mb-6",children:A.jsxs("table",{className:"min-w-full w-full text-sm",children:[A.jsx("thead",{className:"bg-gray-100",children:A.jsxs("tr",{children:[A.jsx("th",{className:"p-2 border",children:"Fecha"}),A.jsx("th",{className:"p-2 border",children:"Cliente"}),A.jsx("th",{className:"p-2 border",children:"Tipo"}),A.jsx("th",{className:"p-2 border",children:"Piezas"}),A.jsx("th",{className:"p-2 border",children:"Monto"})]})}),A.jsx("tbody",{children:y?A.jsx("tr",{children:A.jsx("td",{className:"p-4 text-center",colSpan:5,children:"Cargando"})}):ae.length===0?A.jsx("tr",{children:A.jsx("td",{className:"p-4 text-center",colSpan:5,children:"Sin transacciones en el rango seleccionado."})}):ae.map(Q=>A.jsxs("tr",{className:"text-center",children:[A.jsx("td",{className:"p-2 border",children:Q.date}),A.jsx("td",{className:"p-2 border",children:Q.customer}),A.jsx("td",{className:"p-2 border",children:Q.type}),A.jsx("td",{className:"p-2 border",children:Q.piezas}),A.jsx("td",{className:"p-2 border",children:Tn(Q.total)})]},Q.id))})]})}),A.jsx("h3",{className:"text-lg font-semibold mb-2",children:"Gastos del periodo"}),A.jsx("div",{className:"bg-white p-2 rounded shadow border w-full",children:A.jsxs("table",{className:"min-w-full w-full text-sm",children:[A.jsx("thead",{className:"bg-gray-100",children:A.jsxs("tr",{children:[A.jsx("th",{className:"p-2 border",children:"Fecha"}),A.jsx("th",{className:"p-2 border",children:"Categora"}),A.jsx("th",{className:"p-2 border",children:"Descripcin"}),A.jsx("th",{className:"p-2 border",children:"Monto"}),A.jsx("th",{className:"p-2 border",children:"Estado"})]})}),A.jsx("tbody",{children:y?A.jsx("tr",{children:A.jsx("td",{className:"p-4 text-center",colSpan:5,children:"Cargando"})}):p.length===0?A.jsx("tr",{children:A.jsx("td",{className:"p-4 text-center",colSpan:5,children:"Sin gastos en el rango seleccionado."})}):p.sort((Q,k)=>Q.date.localeCompare(k.date)).map(Q=>A.jsxs("tr",{className:"text-center",children:[A.jsx("td",{className:"p-2 border",children:Q.date}),A.jsx("td",{className:"p-2 border",children:Q.category||""}),A.jsx("td",{className:"p-2 border",children:Q.description?A.jsx("span",{title:Q.description,children:Q.description.length>40?Q.description.slice(0,40)+"":Q.description}):""}),A.jsx("td",{className:"p-2 border",children:Tn(Q.amount)}),A.jsx("td",{className:"p-2 border",children:Q.status||""})]},Q.id))})]})}),O&&A.jsx("p",{className:"mt-2 text-sm",children:O}),M&&A.jsx("div",{className:"fixed inset-0 bg-black/40 flex items-center justify-center z-50",children:A.jsxs("div",{className:"bg-white rounded-lg shadow-xl border w-[95%] max-w-5xl p-4",children:[A.jsxs("div",{className:"flex items-center justify-between mb-2",children:[A.jsxs("h3",{className:"text-lg font-bold",children:["Detalle del cliente  ",(E==null?void 0:E.name)||""]}),A.jsx("button",{className:"px-3 py-1 rounded bg-gray-200 hover:bg-gray-300",onClick:()=>I(!1),children:"Cerrar"})]}),A.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 xl:grid-cols-5 gap-3 mb-3",children:[A.jsxs("div",{className:"p-3 border rounded bg-gray-50",children:[A.jsx("div",{className:"text-xs text-gray-600",children:"Total Bruto (periodo)"}),A.jsx("div",{className:"text-xl font-semibold",children:Tn(ee.totalBruto)})]}),A.jsxs("div",{className:"p-3 border rounded bg-gray-50",children:[A.jsx("div",{className:"text-xs text-gray-600",children:"Descuento (periodo)"}),A.jsx("div",{className:"text-xl font-semibold",children:Tn(ee.totalDescuento)})]}),A.jsxs("div",{className:"p-3 border rounded bg-gray-50",children:[A.jsx("div",{className:"text-xs text-gray-600",children:"Monto Total Fiado (periodo)"}),A.jsx("div",{className:"text-xl font-semibold",children:Tn(ee.totalFiado)})]}),A.jsxs("div",{className:"p-3 border rounded bg-gray-50",children:[A.jsx("div",{className:"text-xs text-gray-600",children:"Saldo actual"}),A.jsx("div",{className:"text-xl font-semibold",children:Tn(ee.saldoActual)})]}),A.jsxs("div",{className:"p-3 border rounded bg-gray-50",children:[A.jsx("div",{className:"text-xs text-gray-600",children:"Abonado (periodo)"}),A.jsx("div",{className:"text-xl font-semibold",children:Tn(ee.abonadoPeriodo)})]})]}),A.jsx("div",{className:"bg-white rounded border overflow-x-auto",children:A.jsxs("table",{className:"min-w-full text-sm",children:[A.jsx("thead",{className:"bg-gray-100",children:A.jsxs("tr",{children:[A.jsx("th",{className:"p-2 border",children:"Fecha compra"}),A.jsx("th",{className:"p-2 border",children:"Pieza"}),A.jsx("th",{className:"p-2 border",children:"SKU"}),A.jsx("th",{className:"p-2 border",children:"Cant."}),A.jsx("th",{className:"p-2 border",children:"P. Unit"}),A.jsx("th",{className:"p-2 border",children:"Monto"})," ",A.jsx("th",{className:"p-2 border",children:"Descuento"})," ",A.jsx("th",{className:"p-2 border",children:"Monto final"})," "]})}),A.jsx("tbody",{children:T?A.jsx("tr",{children:A.jsx("td",{colSpan:8,className:"p-4 text-center",children:"Cargando"})}):D.length===0?A.jsx("tr",{children:A.jsx("td",{colSpan:8,className:"p-4 text-center",children:"Sin piezas fiadas en el periodo."})}):D.sort((Q,k)=>Q.date.localeCompare(k.date)).map((Q,k)=>A.jsxs("tr",{className:"text-center",children:[A.jsx("td",{className:"p-2 border",children:Q.date}),A.jsx("td",{className:"p-2 border",children:Q.productName}),A.jsx("td",{className:"p-2 border",children:Q.sku||""}),A.jsx("td",{className:"p-2 border",children:Q.qty}),A.jsx("td",{className:"p-2 border",children:Tn(Q.unitPrice)}),A.jsx("td",{className:"p-2 border",children:Tn(Q.lineTotal)}),A.jsx("td",{className:"p-2 border",children:Tn(Q.discount)}),A.jsx("td",{className:"p-2 border",children:Tn(Q.lineFinal)})]},`${Q.saleId}-${k}`))})]})})]})})]})}const jN=["Energia","Bolsas","Detergentes","Limpieza de Freezer","Delivery","Pago a Personal"],Cg=t=>`C$ ${(Number(t)||0).toFixed(2)}`;function gW(){const[t,e]=P.useState(er(eh(new Date),"yyyy-MM-dd")),[r,n]=P.useState(er(Zd(new Date),"yyyy-MM-dd")),[s,i]=P.useState(er(new Date,"yyyy-MM-dd")),[a,o]=P.useState(""),[l,c]=P.useState(""),[u,f]=P.useState(0),[p,m]=P.useState("PENDIENTE"),[b,B]=P.useState(""),[_,w]=P.useState([]),[y,S]=P.useState(!0),[O,R]=P.useState(""),[M,I]=P.useState(null),[E,L]=P.useState(""),[D,N]=P.useState(""),[T,F]=P.useState(""),[ee,ce]=P.useState(0),[re,de]=P.useState("PENDIENTE"),[W,ue]=P.useState("");P.useEffect(()=>{(async()=>{S(!0);try{const X=Xt(ot(Le,"expenses_clothes"),fi("date","desc")),he=await Pt(X),ge=[];he.forEach(Ce=>{const Te=Ce.data();ge.push({id:Ce.id,date:Te.date||er(new Date,"yyyy-MM-dd"),category:Te.category||"",description:Te.description||"",amount:Number(Te.amount||0),status:Te.status||"PENDIENTE",notes:Te.notes||"",createdAt:Te.createdAt??Dt.now()})}),w(ge)}catch(X){console.error(X),R(" Error al cargar gastos")}finally{S(!1)}})()},[]);const ae=P.useMemo(()=>_.filter(X=>!(t&&X.date<t||r&&X.date>r)),[_,t,r]),Ee=P.useMemo(()=>{const X=ae.reduce((Ce,Te)=>Ce+(Te.amount||0),0),he=ae.filter(Ce=>Ce.status==="PAGADO").reduce((Ce,Te)=>Ce+(Te.amount||0),0),ge=X-he;return{total:X,pagado:he,pendiente:ge}},[ae]),Q=()=>{i(er(new Date,"yyyy-MM-dd")),o(""),c(""),f(0),m("PENDIENTE"),B("")},k=async X=>{if(X.preventDefault(),R(""),!a){R("Selecciona una categora.");return}if(!l.trim()){R("Ingresa una descripcin.");return}if(!u||u<=0){R("Ingresa un monto vlido.");return}try{const he=await qn(ot(Le,"expenses_clothes"),{date:s,category:a,description:l.trim(),amount:Number(u.toFixed(2)),status:p,notes:b||"",createdAt:Dt.now()});w(ge=>[{id:he.id,date:s,category:a,description:l.trim(),amount:Number(u.toFixed(2)),status:p,notes:b||"",createdAt:Dt.now()},...ge]),Q(),R(" Gasto registrado")}catch(he){console.error(he),R(" Error al guardar gasto")}},z=X=>{I(X.id),L(X.date),N(X.category||""),F(X.description||""),ce(Number(X.amount||0)),de(X.status||"PENDIENTE"),ue(X.notes||"")},te=()=>{I(null),L(""),N(""),F(""),ce(0),de("PENDIENTE"),ue("")},$=async()=>{if(M){if(!D){R("Selecciona una categora.");return}if(!T.trim()){R("Ingresa una descripcin.");return}if(!ee||ee<=0){R("Ingresa un monto vlido.");return}try{await rn(Lt(Le,"expenses_clothes",M),{date:E,category:D,description:T.trim(),amount:Number(ee.toFixed(2)),status:re,notes:W||""}),w(X=>X.map(he=>he.id===M?{...he,date:E,category:D,description:T.trim(),amount:Number(ee.toFixed(2)),status:re,notes:W||""}:he)),te(),R(" Gasto actualizado")}catch(X){console.error(X),R(" Error al actualizar gasto")}}},ne=async X=>{confirm(`Eliminar el gasto "${X.description}"?`)&&(await Bs(Lt(Le,"expenses_clothes",X.id)),w(ge=>ge.filter(Ce=>Ce.id!==X.id)),R(" Gasto borrado"))};return A.jsxs("div",{className:"max-w-6xl mx-auto",children:[A.jsx("h2",{className:"text-2xl font-bold mb-3",children:"Gastos (Ropa)"}),A.jsxs("div",{className:"bg-white p-3 rounded shadow border mb-4 flex flex-wrap items-end gap-3 text-sm",children:[A.jsxs("div",{className:"flex flex-col",children:[A.jsx("label",{className:"font-semibold",children:"Desde"}),A.jsx("input",{type:"date",className:"border rounded px-2 py-1",value:t,onChange:X=>e(X.target.value)})]}),A.jsxs("div",{className:"flex flex-col",children:[A.jsx("label",{className:"font-semibold",children:"Hasta"}),A.jsx("input",{type:"date",className:"border rounded px-2 py-1",value:r,onChange:X=>n(X.target.value)})]}),A.jsxs("div",{className:"ml-auto text-sm",children:[A.jsx("div",{className:"font-semibold",children:"Totales del rango"}),A.jsxs("div",{children:["Total: ",Cg(Ee.total)]}),A.jsxs("div",{children:["Pagado: ",Cg(Ee.pagado)]}),A.jsxs("div",{children:["Pendiente: ",Cg(Ee.pendiente)]})]})]}),A.jsxs("form",{onSubmit:k,className:"bg-white p-4 rounded shadow border mb-6 grid grid-cols-1 md:grid-cols-2 gap-4",children:[A.jsxs("div",{children:[A.jsx("label",{className:"block text-sm font-semibold",children:"Fecha"}),A.jsx("input",{type:"date",className:"w-full border p-2 rounded",value:s,onChange:X=>i(X.target.value)})]}),A.jsxs("div",{children:[A.jsx("label",{className:"block text-sm font-semibold",children:"Categora"}),A.jsxs("select",{className:"w-full border p-2 rounded",value:a,onChange:X=>o(X.target.value),children:[A.jsx("option",{value:"",children:"Selecciona"}),jN.map(X=>A.jsx("option",{value:X,children:X},X))]})]}),A.jsxs("div",{className:"md:col-span-2",children:[A.jsx("label",{className:"block text-sm font-semibold",children:"Descripcin"}),A.jsx("input",{className:"w-full border p-2 rounded",placeholder:"Detalle del gasto",value:l,onChange:X=>c(X.target.value)})]}),A.jsxs("div",{children:[A.jsx("label",{className:"block text-sm font-semibold",children:"Monto"}),A.jsx("input",{type:"number",step:"0.01",inputMode:"decimal",className:"w-full border p-2 rounded text-right",value:u===0?"":u,onChange:X=>f(Math.max(0,Number(X.target.value||0))),placeholder:"0.00"})]}),A.jsxs("div",{children:[A.jsx("label",{className:"block text-sm font-semibold",children:"Estado"}),A.jsxs("select",{className:"w-full border p-2 rounded",value:p,onChange:X=>m(X.target.value),children:[A.jsx("option",{value:"PENDIENTE",children:"Pendiente"}),A.jsx("option",{value:"PAGADO",children:"Pagado"})]})]}),A.jsxs("div",{className:"md:col-span-2",children:[A.jsx("label",{className:"block text-sm font-semibold",children:"Comentario"}),A.jsx("textarea",{className:"w-full border p-2 rounded resize-y min-h-24",value:b,onChange:X=>B(X.target.value),maxLength:500,placeholder:"Comentario / nota opcional"}),A.jsxs("div",{className:"text-xs text-gray-500 text-right",children:[b.length,"/500"]})]}),A.jsx("div",{className:"md:col-span-2",children:A.jsx("button",{className:"bg-blue-600 text-white px-4 py-2 rounded hover:bg-blue-700",children:"Guardar gasto"})})]}),A.jsx("div",{className:"bg-white p-2 rounded shadow border w-full",children:A.jsxs("table",{className:"min-w-full w-full text-sm",children:[A.jsx("thead",{className:"bg-gray-100",children:A.jsxs("tr",{children:[A.jsx("th",{className:"p-2 border",children:"Fecha"}),A.jsx("th",{className:"p-2 border",children:"Categora"}),A.jsx("th",{className:"p-2 border",children:"Descripcin"}),A.jsx("th",{className:"p-2 border",children:"Monto"}),A.jsx("th",{className:"p-2 border",children:"Estado"}),A.jsx("th",{className:"p-2 border",children:"Comentario"}),A.jsx("th",{className:"p-2 border",children:"Acciones"})]})}),A.jsx("tbody",{children:y?A.jsx("tr",{children:A.jsx("td",{className:"p-4 text-center",colSpan:7,children:"Cargando"})}):ae.length===0?A.jsx("tr",{children:A.jsx("td",{className:"p-4 text-center",colSpan:7,children:"Sin gastos en el rango seleccionado."})}):ae.slice().sort((X,he)=>X.date.localeCompare(he.date)).map(X=>{const he=M===X.id;return A.jsxs("tr",{className:"text-center",children:[A.jsx("td",{className:"p-2 border",children:he?A.jsx("input",{type:"date",className:"w-full border p-1 rounded",value:E,onChange:ge=>L(ge.target.value)}):X.date}),A.jsx("td",{className:"p-2 border",children:he?A.jsxs("select",{className:"w-full border p-1 rounded",value:D,onChange:ge=>N(ge.target.value),children:[A.jsx("option",{value:"",children:"Selecciona"}),jN.map(ge=>A.jsx("option",{value:ge,children:ge},ge))]}):X.category||""}),A.jsx("td",{className:"p-2 border",children:he?A.jsx("input",{className:"w-full border p-1 rounded",value:T,onChange:ge=>F(ge.target.value)}):A.jsx("span",{title:X.description,children:X.description.length>40?X.description.slice(0,40)+"":X.description})}),A.jsx("td",{className:"p-2 border",children:he?A.jsx("input",{type:"number",step:"0.01",inputMode:"decimal",className:"w-full border p-1 rounded text-right",value:Number.isNaN(ee)?"":ee,onChange:ge=>ce(Math.max(0,Number(ge.target.value||0)))}):Cg(X.amount)}),A.jsx("td",{className:"p-2 border",children:he?A.jsxs("select",{className:"w-full border p-1 rounded",value:re,onChange:ge=>de(ge.target.value),children:[A.jsx("option",{value:"PENDIENTE",children:"Pendiente"}),A.jsx("option",{value:"PAGADO",children:"Pagado"})]}):A.jsx("span",{className:`px-2 py-0.5 rounded text-xs ${X.status==="PAGADO"?"bg-green-100 text-green-700":"bg-yellow-100 text-yellow-700"}`,children:X.status})}),A.jsx("td",{className:"p-2 border",children:he?A.jsx("textarea",{className:"w-full border p-1 rounded resize-y min-h-10",value:W,onChange:ge=>ue(ge.target.value),maxLength:500}):A.jsx("span",{title:X.notes||"",children:(X.notes||"").length>40?(X.notes||"").slice(0,40)+"":X.notes||""})}),A.jsx("td",{className:"p-2 border",children:A.jsx("div",{className:"flex gap-2 justify-center",children:he?A.jsxs(A.Fragment,{children:[A.jsx("button",{className:"px-2 py-1 rounded text-white bg-blue-600 hover:bg-blue-700",onClick:$,children:"Guardar"}),A.jsx("button",{className:"px-2 py-1 rounded bg-gray-200 hover:bg-gray-300",onClick:te,children:"Cancelar"})]}):A.jsxs(A.Fragment,{children:[A.jsx("button",{className:"px-2 py-1 rounded text-white bg-yellow-600 hover:bg-yellow-700",onClick:()=>z(X),children:"Editar"}),A.jsx("button",{className:"px-2 py-1 rounded text-white bg-red-600 hover:bg-red-700",onClick:()=>ne(X),children:"Borrar"})]})})})]},X.id)})})]})}),O&&A.jsx("p",{className:"mt-2 text-sm",children:O})]})}const Yi=t=>`C$ ${(Number(t)||0).toFixed(2)}`;function vW(t){var e;return t!=null&&t.date?t.date:(e=t==null?void 0:t.createdAt)!=null&&e.toDate?er(t.createdAt.toDate(),"yyyy-MM-dd"):""}function wW(t,e){const r=vW(t);if(!r)return null;const n=t.item||{},s=Number((n==null?void 0:n.qty)??t.quantity??0)||0,i=Number((n==null?void 0:n.total)??t.total??0)||0,a=Number((n==null?void 0:n.unitPrice)??(s>0?i/s:0))||0;return{id:e,date:r,type:t.type||"CONTADO",total:Number(t.total||0),quantity:Number(t.quantity||s||0),customerId:t.customerId||void 0,customerName:t.customerName||void 0,downPayment:Number(t.downPayment||0),item:{productId:String((n==null?void 0:n.productId)||t.productId||""),productName:String((n==null?void 0:n.productName)||t.productName||""),sku:(n==null?void 0:n.sku)||t.sku||"",qty:s,unitPrice:a,total:s*a}}}async function yW(t,e){if(e<=0)return;const r=Xt(ot(Le,"inventory_clothes_batches"),rr("productId","==",t)),n=await Pt(r),s=[];n.forEach(a=>{const o=a.data();s.push({id:a.id,productId:o.productId,date:o.date||"",quantity:Number(o.quantity||0),remaining:Number(o.remaining||0)})}),s.sort((a,o)=>a.date.localeCompare(o.date));let i=e;for(const a of s){if(i<=0)break;if(a.remaining<=0)continue;const o=Math.min(a.remaining,i);i-=o,await rn(Lt(Le,"inventory_clothes_batches",a.id),{remaining:Math.max(0,Number((a.remaining-o).toFixed(0)))})}i>0&&console.warn("consumeFIFO: falt inventario",i)}async function xW(t,e){if(e<=0)return;const r=Xt(ot(Le,"inventory_clothes_batches"),rr("productId","==",t)),n=await Pt(r),s=[];n.forEach(a=>{const o=a.data();s.push({id:a.id,productId:o.productId,date:o.date||"",quantity:Number(o.quantity||0),remaining:Number(o.remaining||0)})}),s.sort((a,o)=>a.date.localeCompare(o.date));let i=e;for(const a of s){if(i<=0)break;const o=Math.max(0,a.quantity-a.remaining);if(o<=0)continue;const l=Math.min(o,i);i-=l,await rn(Lt(Le,"inventory_clothes_batches",a.id),{remaining:Number((a.remaining+l).toFixed(0))})}i>0&&console.warn("restoreFIFO: no se devolvi todo",i)}async function M3(t){const e=Xt(ot(Le,"ar_movements"),rr("ref.saleId","==",t)),r=await Pt(e);await Promise.all(r.docs.map(n=>Bs(Lt(Le,"ar_movements",n.id))))}async function bW(t,e,r){if(await M3(t.id),t.type!=="CREDITO"||!t.customerId)return;const n={customerId:t.customerId,date:t.date,createdAt:Dt.now(),ref:{saleId:t.id}},{addDoc:s}=await Qo(async()=>{const{addDoc:a}=await Promise.resolve().then(()=>CH);return{addDoc:a}},void 0);await s(ot(Le,"ar_movements"),{...n,type:"CARGO",amount:Number(e)||0});const i=Math.max(0,Number(r??t.downPayment??0));i>0&&await s(ot(Le,"ar_movements"),{...n,type:"ABONO",amount:-i})}function BW(){const[t,e]=P.useState(!1),[r,n]=P.useState(!1),[s,i]=P.useState(null),[a,o]=P.useState([]),l=async oe=>{e(!0),n(!0),i(oe),o([]);try{const G=(await Pt(Xt(ot(Le,"sales_clothes"),rr("__name__","==",oe)))).docs[0],Re=G==null?void 0:G.data(),Ue=(Array.isArray(Re==null?void 0:Re.items)?Re.items:Re!=null&&Re.item?[Re.item]:[]).map(Pe=>({productName:String(Pe.productName||""),qty:Number(Pe.qty||0),unitPrice:Number(Pe.unitPrice||0),discount:Number(Pe.discount||0),total:Number(Pe.total||0)}));o(Ue)}catch(le){console.error(le)}finally{n(!1)}},[c,u]=P.useState(er(new Date,"yyyy-MM-01")),[f,p]=P.useState(er(new Date,"yyyy-MM-dd")),[m,b]=P.useState([]),[B,_]=P.useState([]),[w,y]=P.useState(!0),[S,O]=P.useState(""),[R,M]=P.useState(""),[I,E]=P.useState(""),[L,D]=P.useState(null),[N,T]=P.useState(!1),[F,ee]=P.useState(null),[ce,re]=P.useState(0),de=15,[W,ue]=P.useState(1),ae=P.useMemo(()=>{const oe={};return m.forEach(le=>oe[le.id]=le.name),oe},[m]);P.useEffect(()=>{(async()=>{y(!0),O("");try{const oe=await Pt(ot(Le,"customers_clothes")),le=[];oe.forEach(je=>le.push({id:je.id,name:je.data().name||""})),b(le);const G=await Pt(Xt(ot(Le,"sales_clothes"),fi("createdAt","desc"))),Re=[];G.forEach(je=>{const Ue=wW(je.data(),je.id);Ue&&Ue.date>=c&&Ue.date<=f&&Re.push(Ue)}),_(Re.sort((je,Ue)=>Ue.date.localeCompare(je.date))),ue(1)}catch(oe){console.error(oe),O(" Error cargando transacciones.")}finally{y(!1)}})()},[c,f]);const Ee=P.useMemo(()=>B.filter(oe=>!(R&&oe.customerId!==R||I&&oe.type!==I)),[B,R,I]),Q=P.useMemo(()=>{let oe=0,le=0,G=0,Re=0;for(const je of Ee)je.type==="CONTADO"?(oe+=je.item.qty,G+=je.total):(le+=je.item.qty,Re+=je.total);return{piezasCash:oe,piezasCredito:le,montoCash:G,montoCredito:Re}},[Ee]),k=Math.max(1,Math.ceil(Ee.length/de)),z=P.useMemo(()=>{const oe=(W-1)*de;return Ee.slice(oe,oe+de)},[Ee,W]),te=oe=>{D(null),ee(oe),re(oe.item.qty||0),T(!0)},$=async oe=>{if(D(null),!!window.confirm("Eliminar esta venta? Esta accin no se puede deshacer."))try{y(!0),await cx(oe.id),await M3(oe.id),_(le=>le.filter(G=>G.id!==oe.id)),O(" Venta eliminada")}catch(le){console.error(le),O(" No se pudo eliminar la venta.")}finally{y(!1)}},ne=async()=>{if(!F)return;const oe=Number(F.item.qty||0),le=Math.max(1,Math.floor(Number(ce)||0));if(le===oe){T(!1);return}const G=Number(F.item.unitPrice||0),Re=Number((G*le).toFixed(2));try{y(!0);const je=le-oe;je>0?await yW(F.item.productId,je):je<0&&await xW(F.item.productId,-je);const Ue=Lt(Le,"sales_clothes",F.id);await rn(Ue,{quantity:le,total:Re,itemsTotal:Re,"item.qty":le,"item.total":Re,updatedAt:Dt.now()});const Pe=Math.min(Number(F.downPayment||0),Re);await bW(F,Re,Pe),_(Ge=>Ge.map(qe=>qe.id===F.id?{...qe,quantity:le,total:Re,item:{...qe.item,qty:le,total:Re},downPayment:Pe}:qe)),O(" Venta actualizada"),T(!1)}catch(je){console.error(je),O(" No se pudo actualizar la venta.")}finally{y(!1)}},X=()=>{const oe=`Reporte de transacciones (Ropa)  ${c} a ${f}`,le=Ue=>(Ue||"").replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;"),G=Ee.map(Ue=>{const Pe=Ue.customerName||(Ue.customerId?ae[Ue.customerId]:"")||"Nombre cliente";return`<tr>
          <td>${Ue.date}</td>
          <td>${le(Pe)}</td>
          <td>${Ue.type==="CREDITO"?"Crdito":"Cash"}</td>
          <td style="text-align:right">${Ue.item.qty}</td>
          <td style="text-align:right">${Yi(Ue.total)}</td>
        </tr>`}).join(""),Re=`<!doctype html><html><head><meta charset="utf-8" />
    <title>${le(oe)}</title>
    <style>
      *{font-family:Arial, sans-serif} h1{margin:0 0 8px}
      .muted{color:#555;font-size:12px;margin-bottom:12px}
      .kpis{display:grid;grid-template-columns:repeat(2,max-content);gap:8px 28px;margin:10px 0 14px}
      table{width:100%;border-collapse:collapse;font-size:12px}
      th,td{border:1px solid #ddd;padding:6px}
      th{background:#f5f5f5;text-align:left}
      @media print{@page{size:A4;margin:12mm}}
    </style></head><body>
      <h1>${le(oe)}</h1>
      <div class="kpis">
        <div><b>Piezas Cash:</b> ${Q.piezasCash}</div>
        <div><b>Piezas Crdito:</b> ${Q.piezasCredito}</div>
        <div><b>Monto Cash:</b> ${Yi(Q.montoCash)}</div>
        <div><b>Monto Crdito:</b> ${Yi(Q.montoCredito)}</div>
      </div>
      <table><thead><tr>
        <th>Fecha</th><th>Cliente</th><th>Tipo</th><th>Piezas</th><th>Monto</th>
      </tr></thead><tbody>
      ${G||'<tr><td colspan="5" style="text-align:center">Sin transacciones</td></tr>'}
      </tbody></table>
      <script>window.print()<\/script>
    </body></html>`,je=window.open("","_blank");je&&(je.document.open(),je.document.write(Re),je.document.close())},he=()=>ue(1),ge=()=>ue(oe=>Math.max(1,oe-1)),Ce=()=>ue(oe=>Math.min(k,oe+1)),Te=()=>ue(k),Fe=()=>{const oe=[];if(k<=7)for(let G=1;G<=k;G++)oe.push(G);else{const G=Math.max(1,W-2),Re=Math.min(k,W+2);oe.push(1),G>2&&oe.push(-1);for(let je=G;je<=Re;je++)je!==1&&je!==k&&oe.push(je);Re<k-1&&oe.push(-2),oe.push(k)}return A.jsxs("div",{className:"flex items-center gap-1 justify-between mt-3",children:[A.jsxs("div",{className:"flex items-center gap-1",children:[A.jsx("button",{className:"px-2 py-1 border rounded disabled:opacity-50",onClick:he,disabled:W===1,children:" Primero"}),A.jsx("button",{className:"px-2 py-1 border rounded disabled:opacity-50",onClick:ge,disabled:W===1,children:" Anterior"}),oe.map((G,Re)=>typeof G=="number"?A.jsx("button",{className:`px-3 py-1 border rounded ${G===W?"bg-blue-600 text-white":""}`,onClick:()=>ue(G),children:G},Re):A.jsx("span",{className:"px-2",children:""},Re)),A.jsx("button",{className:"px-2 py-1 border rounded disabled:opacity-50",onClick:Ce,disabled:W===k,children:"Siguiente "}),A.jsx("button",{className:"px-2 py-1 border rounded disabled:opacity-50",onClick:Te,disabled:W===k,children:"ltimo "})]}),A.jsxs("div",{className:"text-sm text-gray-600",children:["Pgina ",W," de ",k,"  ",Ee.length," transaccin(es)"]})]})};return A.jsxs("div",{className:"max-w-6xl mx-auto",children:[A.jsx("h2",{className:"text-2xl font-bold mb-3",children:"Reporte de transacciones (Ropa)"}),A.jsxs("div",{className:"bg-white p-3 rounded shadow border mb-4 flex flex-wrap gap-3 items-end text-sm",children:[A.jsxs("div",{children:[A.jsx("label",{className:"block font-semibold",children:"Desde"}),A.jsx("input",{type:"date",className:"border rounded px-2 py-1",value:c,onChange:oe=>{u(oe.target.value),ue(1)}})]}),A.jsxs("div",{children:[A.jsx("label",{className:"block font-semibold",children:"Hasta"}),A.jsx("input",{type:"date",className:"border rounded px-2 py-1",value:f,onChange:oe=>{p(oe.target.value),ue(1)}})]}),A.jsxs("div",{children:[A.jsx("label",{className:"block font-semibold",children:"Cliente (crdito)"}),A.jsxs("select",{className:"border rounded px-2 py-1 min-w-[220px]",value:R,onChange:oe=>{M(oe.target.value),ue(1)},children:[A.jsx("option",{value:"",children:"Todos"}),m.map(oe=>A.jsx("option",{value:oe.id,children:oe.name},oe.id))]})]}),A.jsxs("div",{children:[A.jsx("label",{className:"block font-semibold",children:"Tipo"}),A.jsxs("select",{className:"border rounded px-2 py-1",value:I,onChange:oe=>{E(oe.target.value),ue(1)},children:[A.jsx("option",{value:"",children:"Todos"}),A.jsx("option",{value:"CONTADO",children:"Cash"}),A.jsx("option",{value:"CREDITO",children:"Crdito"})]})]}),A.jsx("button",{className:"ml-auto px-3 py-2 rounded bg-blue-600 text-white hover:bg-blue-700",onClick:X,children:"Exportar PDF"})]}),A.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-3 mb-4",children:[A.jsxs("div",{className:"p-3 border rounded bg-gray-50",children:[A.jsx("div",{className:"text-xs text-gray-600",children:"Piezas Cash"}),A.jsx("div",{className:"text-xl font-semibold",children:Q.piezasCash})]}),A.jsxs("div",{className:"p-3 border rounded bg-gray-50",children:[A.jsx("div",{className:"text-xs text-gray-600",children:"Piezas Crdito"}),A.jsx("div",{className:"text-xl font-semibold",children:Q.piezasCredito})]}),A.jsxs("div",{className:"p-3 border rounded bg-gray-50",children:[A.jsx("div",{className:"text-xs text-gray-600",children:"Monto Cash"}),A.jsx("div",{className:"text-xl font-semibold",children:Yi(Q.montoCash)})]}),A.jsxs("div",{className:"p-3 border rounded bg-gray-50",children:[A.jsx("div",{className:"text-xs text-gray-600",children:"Monto Crdito"}),A.jsx("div",{className:"text-xl font-semibold",children:Yi(Q.montoCredito)})]})]}),A.jsxs("div",{className:"bg-white p-2 rounded shadow border w-full",children:[A.jsxs("table",{className:"min-w-full w-full text-sm",children:[A.jsx("thead",{className:"bg-gray-100",children:A.jsxs("tr",{children:[A.jsx("th",{className:"p-2 border",children:"Fecha"}),A.jsx("th",{className:"p-2 border",children:"Cliente"}),A.jsx("th",{className:"p-2 border",children:"Tipo"}),A.jsx("th",{className:"p-2 border",children:"Piezas"}),A.jsx("th",{className:"p-2 border",children:"Monto"}),A.jsx("th",{className:"p-2 border",children:"Acciones"})]})}),A.jsx("tbody",{children:w?A.jsx("tr",{children:A.jsx("td",{className:"p-4 text-center",colSpan:6,children:"Cargando"})}):z.length===0?A.jsx("tr",{children:A.jsx("td",{className:"p-4 text-center",colSpan:6,children:"Sin transacciones en el rango."})}):z.map(oe=>{const le=oe.customerName||(oe.customerId?ae[oe.customerId]:"")||"Nombre cliente";return A.jsxs("tr",{className:"text-center",children:[A.jsx("td",{className:"p-2 border",children:oe.date}),A.jsx("td",{className:"p-2 border",children:le}),A.jsx("td",{className:"p-2 border",children:oe.type==="CREDITO"?"Crdito":"Cash"}),A.jsx("td",{className:"p-2 border",children:A.jsx("button",{type:"button",className:"underline text-blue-600 hover:text-blue-800",title:"Ver piezas de esta transaccin",onClick:()=>l(oe.id),children:oe.item.qty})}),A.jsx("td",{className:"p-2 border",children:Yi(oe.total)}),A.jsxs("td",{className:"p-2 border relative",children:[A.jsx("button",{className:"px-2 py-1 rounded border hover:bg-gray-50",onClick:()=>D(G=>G===oe.id?null:oe.id),title:"Acciones",children:""}),L===oe.id&&A.jsxs("div",{className:"absolute right-2 mt-1 w-28 bg-white border rounded shadow z-10 text-left",children:[A.jsx("button",{className:"block w-full text-left px-3 py-2 hover:bg-gray-100",onClick:()=>te(oe),children:"Editar"}),A.jsx("button",{className:"block w-full text-left px-3 py-2 hover:bg-gray-100 text-red-600",onClick:()=>$(oe),children:"Eliminar"})]})]})]},oe.id)})})]}),Fe()]}),S&&A.jsx("p",{className:"mt-2 text-sm",children:S}),N&&F&&A.jsx("div",{className:"fixed inset-0 bg-black/40 flex items-center justify-center z-50",children:A.jsxs("div",{className:"bg-white rounded-lg shadow-xl border w-[95%] max-w-md p-4",children:[A.jsx("h3",{className:"text-lg font-bold mb-2",children:"Editar venta"}),A.jsxs("div",{className:"space-y-2",children:[A.jsxs("div",{children:[A.jsx("div",{className:"text-xs text-gray-600",children:"Producto"}),A.jsxs("div",{className:"font-semibold",children:[F.item.productName," ",F.item.sku?` ${F.item.sku}`:""]})]}),A.jsxs("div",{children:[A.jsx("label",{className:"block text-sm font-semibold",children:"Cantidad (piezas)"}),A.jsx("input",{type:"number",step:"1",min:1,className:"w-full border p-2 rounded",value:ce,onChange:oe=>re(Math.max(1,Math.floor(Number(oe.target.value||0))))})]}),A.jsxs("div",{className:"grid grid-cols-2 gap-3",children:[A.jsxs("div",{className:"p-2 rounded bg-gray-50 border",children:[A.jsx("div",{className:"text-xs text-gray-600",children:"P. Unit"}),A.jsx("div",{className:"text-lg font-semibold",children:Yi(F.item.unitPrice)})]}),A.jsxs("div",{className:"p-2 rounded bg-gray-50 border",children:[A.jsx("div",{className:"text-xs text-gray-600",children:"Nuevo total"}),A.jsx("div",{className:"text-lg font-semibold",children:Yi(Number(F.item.unitPrice)*Number(ce||0))})]})]})]}),A.jsxs("div",{className:"mt-4 flex justify-end gap-2",children:[A.jsx("button",{className:"px-3 py-2 rounded bg-gray-200 hover:bg-gray-300",onClick:()=>{T(!1),ee(null)},children:"Cancelar"}),A.jsx("button",{className:"px-3 py-2 rounded bg-blue-600 text-white hover:bg-blue-700",onClick:ne,children:"Guardar cambios"})]})]})}),t&&A.jsx("div",{className:"fixed inset-0 bg-black/40 flex items-center justify-center z-[60]",children:A.jsxs("div",{className:"bg-white rounded-lg shadow-xl border w-[95%] max-w-3xl p-4",children:[A.jsxs("div",{className:"flex items-center justify-between mb-2",children:[A.jsxs("h3",{className:"text-lg font-bold",children:["Piezas vendidas"," ",s?` #${s}`:""]}),A.jsx("button",{className:"px-3 py-1 rounded bg-gray-200 hover:bg-gray-300",onClick:()=>e(!1),children:"Cerrar"})]}),A.jsx("div",{className:"bg-white rounded border overflow-x-auto",children:A.jsxs("table",{className:"min-w-full text-sm",children:[A.jsx("thead",{className:"bg-gray-100",children:A.jsxs("tr",{children:[A.jsx("th",{className:"p-2 border",children:"Producto"}),A.jsx("th",{className:"p-2 border text-right",children:"Cantidad"}),A.jsx("th",{className:"p-2 border text-right",children:"Precio"}),A.jsx("th",{className:"p-2 border text-right",children:"Descuento"}),A.jsx("th",{className:"p-2 border text-right",children:"Monto"})]})}),A.jsx("tbody",{children:r?A.jsx("tr",{children:A.jsx("td",{colSpan:5,className:"p-4 text-center",children:"Cargando"})}):a.length===0?A.jsx("tr",{children:A.jsx("td",{colSpan:5,className:"p-4 text-center",children:"Sin tems en esta venta."})}):a.map((oe,le)=>A.jsxs("tr",{className:"text-center",children:[A.jsx("td",{className:"p-2 border text-left",children:oe.productName}),A.jsx("td",{className:"p-2 border text-right",children:oe.qty}),A.jsx("td",{className:"p-2 border text-right",children:Yi(oe.unitPrice)}),A.jsx("td",{className:"p-2 border text-right",children:Yi(oe.discount||0)}),A.jsx("td",{className:"p-2 border text-right",children:Yi(oe.total)})]},le))})]})})]})})]})}function CW(){const[t,e]=P.useState(null),[r,n]=P.useState(""),[s,i]=P.useState(!0);if(P.useEffect(()=>{const o=GF(nw,async l=>{if(i(!0),l){e(l);try{const c=Lt(Le,"users",l.uid),u=await zo(c),f=u.exists()?u.data().role:"";n(f||"")}catch{n("")}}else e(null),n("");i(!1)});return()=>o()},[]),s)return A.jsx("div",{className:"p-6 text-center",children:"Cargando..."});const a=()=>r==="admin"?A.jsx(Du,{to:"FinancialDashboard",replace:!0}):r==="vendedor_pollo"?A.jsx(Du,{to:"salesV2",replace:!0}):r==="vendedor_ropa"?A.jsx(Du,{to:"salesClothes",replace:!0}):A.jsx(Du,{to:"/",replace:!0});return A.jsx(uk,{children:A.jsxs(Hj,{children:[A.jsx(Kr,{path:"/",element:A.jsx(_H,{})}),A.jsxs(Kr,{path:"/admin",element:A.jsx(mn,{allowedRoles:["admin","vendedor_pollo","vendedor_ropa"],children:A.jsx(NH,{role:r})}),children:[A.jsx(Kr,{index:!0,element:A.jsx(a,{})}),A.jsx(Kr,{path:"bills",element:A.jsx(mn,{allowedRoles:["admin","vendedor_pollo"],children:A.jsx(u$,{})})}),A.jsx(Kr,{path:"salesV2",element:A.jsx(mn,{allowedRoles:["admin","vendedor_pollo"],children:A.jsx(NN,{user:t})})}),A.jsx(Kr,{path:"financialDashboard",element:A.jsx(mn,{allowedRoles:["admin"],children:A.jsx(j$,{})})}),A.jsx(Kr,{path:"expenses",element:A.jsx(mn,{allowedRoles:["admin"],children:A.jsx(D$,{})})}),A.jsx(Kr,{path:"billing",element:A.jsx(mn,{allowedRoles:["admin"],children:A.jsx(V$,{})})}),A.jsx(Kr,{path:"batches",element:A.jsx(mn,{allowedRoles:["admin"],children:A.jsx(P$,{})})}),A.jsx(Kr,{path:"paidBatches",element:A.jsx(mn,{allowedRoles:["admin"],children:A.jsx(z$,{})})}),A.jsx(Kr,{path:"fix",element:A.jsx(mn,{allowedRoles:["admin"],children:A.jsx(O$,{})})}),A.jsx(Kr,{path:"transactionclose",element:A.jsx(mn,{allowedRoles:["admin"],children:A.jsx(Q$,{})})}),A.jsx(Kr,{path:"billhistoric",element:A.jsx(mn,{allowedRoles:["admin"],children:A.jsx(d$,{})})}),A.jsx(Kr,{path:"users",element:A.jsx(mn,{allowedRoles:["admin"],children:A.jsx(h$,{})})}),A.jsx(Kr,{path:"products",element:A.jsx(mn,{allowedRoles:["admin"],children:A.jsx(p$,{})})}),A.jsx(Kr,{path:"salesClothes",element:A.jsx(mn,{allowedRoles:["admin","vendedor_ropa"],children:A.jsx(hW,{})})}),A.jsx(Kr,{path:"TransactionsReportClothes",element:A.jsx(mn,{allowedRoles:["admin","vendedor_ropa"],children:A.jsx(BW,{})})}),A.jsx(Kr,{path:"financialDashboardClothes",element:A.jsx(mn,{allowedRoles:["admin","vendedor_ropa"],children:A.jsx(mW,{})})}),A.jsx(Kr,{path:"ExpensesClothes",element:A.jsx(mn,{allowedRoles:["admin"],children:A.jsx(gW,{})})}),A.jsx(Kr,{path:"inventoryClothesBatches",element:A.jsx(mn,{allowedRoles:["admin"],children:A.jsx(J$,{})})}),A.jsx(Kr,{path:"productsClothes",element:A.jsx(mn,{allowedRoles:["admin","vendedor_ropa"],children:A.jsx(AW,{})})}),A.jsx(Kr,{path:"CustomersClothes",element:A.jsx(mn,{allowedRoles:["admin","vendedor_ropa"],children:A.jsx(cW,{})})})]}),A.jsx(Kr,{path:"/salesV2",element:A.jsx(mn,{allowedRoles:["admin","vendedor_pollo"],children:A.jsx(NN,{user:t})})}),A.jsx(Kr,{path:"*",element:A.jsx(Du,{to:"/"})})]})})}n1.createRoot(document.getElementById("root")).render(A.jsx(No.StrictMode,{children:A.jsx(CW,{})}));export{Nr as _,EW as c,CP as g};
