var Kce=Object.defineProperty;var Gce=(t,e,r)=>e in t?Kce(t,e,{enumerable:!0,configurable:!0,writable:!0,value:r}):t[e]=r;var aa=(t,e,r)=>Gce(t,typeof e!="symbol"?e+"":e,r);function qce(t,e){for(var r=0;r<e.length;r++){const n=e[r];if(typeof n!="string"&&!Array.isArray(n)){for(const a in n)if(a!=="default"&&!(a in t)){const s=Object.getOwnPropertyDescriptor(n,a);s&&Object.defineProperty(t,a,s.get?s:{enumerable:!0,get:()=>n[a]})}}}return Object.freeze(Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}))}(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const a of document.querySelectorAll('link[rel="modulepreload"]'))n(a);new MutationObserver(a=>{for(const s of a)if(s.type==="childList")for(const i of s.addedNodes)i.tagName==="LINK"&&i.rel==="modulepreload"&&n(i)}).observe(document,{childList:!0,subtree:!0});function r(a){const s={};return a.integrity&&(s.integrity=a.integrity),a.referrerPolicy&&(s.referrerPolicy=a.referrerPolicy),a.crossOrigin==="use-credentials"?s.credentials="include":a.crossOrigin==="anonymous"?s.credentials="omit":s.credentials="same-origin",s}function n(a){if(a.ep)return;a.ep=!0;const s=r(a);fetch(a.href,s)}})();var Xrt=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};function zA(t){return t&&t.__esModule&&Object.prototype.hasOwnProperty.call(t,"default")?t.default:t}var Mq={exports:{}},mI={},Lq={exports:{}},Fn={};/**
 * @license React
 * react.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var T2=Symbol.for("react.element"),zce=Symbol.for("react.portal"),Wce=Symbol.for("react.fragment"),Xce=Symbol.for("react.strict_mode"),Yce=Symbol.for("react.profiler"),Jce=Symbol.for("react.provider"),Zce=Symbol.for("react.context"),eue=Symbol.for("react.forward_ref"),tue=Symbol.for("react.suspense"),rue=Symbol.for("react.memo"),nue=Symbol.for("react.lazy"),xM=Symbol.iterator;function aue(t){return t===null||typeof t!="object"?null:(t=xM&&t[xM]||t["@@iterator"],typeof t=="function"?t:null)}var Uq={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},Qq=Object.assign,Vq={};function wv(t,e,r){this.props=t,this.context=e,this.refs=Vq,this.updater=r||Uq}wv.prototype.isReactComponent={};wv.prototype.setState=function(t,e){if(typeof t!="object"&&typeof t!="function"&&t!=null)throw Error("setState(...): takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,t,e,"setState")};wv.prototype.forceUpdate=function(t){this.updater.enqueueForceUpdate(this,t,"forceUpdate")};function Hq(){}Hq.prototype=wv.prototype;function vF(t,e,r){this.props=t,this.context=e,this.refs=Vq,this.updater=r||Uq}var yF=vF.prototype=new Hq;yF.constructor=vF;Qq(yF,wv.prototype);yF.isPureReactComponent=!0;var vM=Array.isArray,$q=Object.prototype.hasOwnProperty,bF={current:null},Kq={key:!0,ref:!0,__self:!0,__source:!0};function Gq(t,e,r){var n,a={},s=null,i=null;if(e!=null)for(n in e.ref!==void 0&&(i=e.ref),e.key!==void 0&&(s=""+e.key),e)$q.call(e,n)&&!Kq.hasOwnProperty(n)&&(a[n]=e[n]);var l=arguments.length-2;if(l===1)a.children=r;else if(1<l){for(var c=Array(l),u=0;u<l;u++)c[u]=arguments[u+2];a.children=c}if(t&&t.defaultProps)for(n in l=t.defaultProps,l)a[n]===void 0&&(a[n]=l[n]);return{$$typeof:T2,type:t,key:s,ref:i,props:a,_owner:bF.current}}function sue(t,e){return{$$typeof:T2,type:t.type,key:e,ref:t.ref,props:t.props,_owner:t._owner}}function wF(t){return typeof t=="object"&&t!==null&&t.$$typeof===T2}function iue(t){var e={"=":"=0",":":"=2"};return"$"+t.replace(/[=:]/g,function(r){return e[r]})}var yM=/\/+/g;function sj(t,e){return typeof t=="object"&&t!==null&&t.key!=null?iue(""+t.key):e.toString(36)}function i_(t,e,r,n,a){var s=typeof t;(s==="undefined"||s==="boolean")&&(t=null);var i=!1;if(t===null)i=!0;else switch(s){case"string":case"number":i=!0;break;case"object":switch(t.$$typeof){case T2:case zce:i=!0}}if(i)return i=t,a=a(i),t=n===""?"."+sj(i,0):n,vM(a)?(r="",t!=null&&(r=t.replace(yM,"$&/")+"/"),i_(a,e,r,"",function(u){return u})):a!=null&&(wF(a)&&(a=sue(a,r+(!a.key||i&&i.key===a.key?"":(""+a.key).replace(yM,"$&/")+"/")+t)),e.push(a)),1;if(i=0,n=n===""?".":n+":",vM(t))for(var l=0;l<t.length;l++){s=t[l];var c=n+sj(s,l);i+=i_(s,e,r,c,a)}else if(c=aue(t),typeof c=="function")for(t=c.call(t),l=0;!(s=t.next()).done;)s=s.value,c=n+sj(s,l++),i+=i_(s,e,r,c,a);else if(s==="object")throw e=String(t),Error("Objects are not valid as a React child (found: "+(e==="[object Object]"?"object with keys {"+Object.keys(t).join(", ")+"}":e)+"). If you meant to render a collection of children, use an array instead.");return i}function nN(t,e,r){if(t==null)return t;var n=[],a=0;return i_(t,n,"","",function(s){return e.call(r,s,a++)}),n}function oue(t){if(t._status===-1){var e=t._result;e=e(),e.then(function(r){(t._status===0||t._status===-1)&&(t._status=1,t._result=r)},function(r){(t._status===0||t._status===-1)&&(t._status=2,t._result=r)}),t._status===-1&&(t._status=0,t._result=e)}if(t._status===1)return t._result.default;throw t._result}var Kl={current:null},o_={transition:null},lue={ReactCurrentDispatcher:Kl,ReactCurrentBatchConfig:o_,ReactCurrentOwner:bF};function qq(){throw Error("act(...) is not supported in production builds of React.")}Fn.Children={map:nN,forEach:function(t,e,r){nN(t,function(){e.apply(this,arguments)},r)},count:function(t){var e=0;return nN(t,function(){e++}),e},toArray:function(t){return nN(t,function(e){return e})||[]},only:function(t){if(!wF(t))throw Error("React.Children.only expected to receive a single React element child.");return t}};Fn.Component=wv;Fn.Fragment=Wce;Fn.Profiler=Yce;Fn.PureComponent=vF;Fn.StrictMode=Xce;Fn.Suspense=tue;Fn.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=lue;Fn.act=qq;Fn.cloneElement=function(t,e,r){if(t==null)throw Error("React.cloneElement(...): The argument must be a React element, but you passed "+t+".");var n=Qq({},t.props),a=t.key,s=t.ref,i=t._owner;if(e!=null){if(e.ref!==void 0&&(s=e.ref,i=bF.current),e.key!==void 0&&(a=""+e.key),t.type&&t.type.defaultProps)var l=t.type.defaultProps;for(c in e)$q.call(e,c)&&!Kq.hasOwnProperty(c)&&(n[c]=e[c]===void 0&&l!==void 0?l[c]:e[c])}var c=arguments.length-2;if(c===1)n.children=r;else if(1<c){l=Array(c);for(var u=0;u<c;u++)l[u]=arguments[u+2];n.children=l}return{$$typeof:T2,type:t.type,key:a,ref:s,props:n,_owner:i}};Fn.createContext=function(t){return t={$$typeof:Zce,_currentValue:t,_currentValue2:t,_threadCount:0,Provider:null,Consumer:null,_defaultValue:null,_globalName:null},t.Provider={$$typeof:Jce,_context:t},t.Consumer=t};Fn.createElement=Gq;Fn.createFactory=function(t){var e=Gq.bind(null,t);return e.type=t,e};Fn.createRef=function(){return{current:null}};Fn.forwardRef=function(t){return{$$typeof:eue,render:t}};Fn.isValidElement=wF;Fn.lazy=function(t){return{$$typeof:nue,_payload:{_status:-1,_result:t},_init:oue}};Fn.memo=function(t,e){return{$$typeof:rue,type:t,compare:e===void 0?null:e}};Fn.startTransition=function(t){var e=o_.transition;o_.transition={};try{t()}finally{o_.transition=e}};Fn.unstable_act=qq;Fn.useCallback=function(t,e){return Kl.current.useCallback(t,e)};Fn.useContext=function(t){return Kl.current.useContext(t)};Fn.useDebugValue=function(){};Fn.useDeferredValue=function(t){return Kl.current.useDeferredValue(t)};Fn.useEffect=function(t,e){return Kl.current.useEffect(t,e)};Fn.useId=function(){return Kl.current.useId()};Fn.useImperativeHandle=function(t,e,r){return Kl.current.useImperativeHandle(t,e,r)};Fn.useInsertionEffect=function(t,e){return Kl.current.useInsertionEffect(t,e)};Fn.useLayoutEffect=function(t,e){return Kl.current.useLayoutEffect(t,e)};Fn.useMemo=function(t,e){return Kl.current.useMemo(t,e)};Fn.useReducer=function(t,e,r){return Kl.current.useReducer(t,e,r)};Fn.useRef=function(t){return Kl.current.useRef(t)};Fn.useState=function(t){return Kl.current.useState(t)};Fn.useSyncExternalStore=function(t,e,r){return Kl.current.useSyncExternalStore(t,e,r)};Fn.useTransition=function(){return Kl.current.useTransition()};Fn.version="18.3.1";Lq.exports=Fn;var v=Lq.exports;const Lo=zA(v),cue=qce({__proto__:null,default:Lo},[v]);/**
 * @license React
 * react-jsx-runtime.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var uue=v,due=Symbol.for("react.element"),fue=Symbol.for("react.fragment"),Aue=Object.prototype.hasOwnProperty,hue=uue.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,mue={key:!0,ref:!0,__self:!0,__source:!0};function zq(t,e,r){var n,a={},s=null,i=null;r!==void 0&&(s=""+r),e.key!==void 0&&(s=""+e.key),e.ref!==void 0&&(i=e.ref);for(n in e)Aue.call(e,n)&&!mue.hasOwnProperty(n)&&(a[n]=e[n]);if(t&&t.defaultProps)for(n in e=t.defaultProps,e)a[n]===void 0&&(a[n]=e[n]);return{$$typeof:due,type:t,key:s,ref:i,props:a,_owner:hue.current}}mI.Fragment=fue;mI.jsx=zq;mI.jsxs=zq;Mq.exports=mI;var o=Mq.exports,VB={},Wq={exports:{}},tu={},Xq={exports:{}},Yq={};/**
 * @license React
 * scheduler.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */(function(t){function e(me,ne){var Pe=me.length;me.push(ne);e:for(;0<Pe;){var Ie=Pe-1>>>1,O=me[Ie];if(0<a(O,ne))me[Ie]=ne,me[Pe]=O,Pe=Ie;else break e}}function r(me){return me.length===0?null:me[0]}function n(me){if(me.length===0)return null;var ne=me[0],Pe=me.pop();if(Pe!==ne){me[0]=Pe;e:for(var Ie=0,O=me.length,H=O>>>1;Ie<H;){var R=2*(Ie+1)-1,M=me[R],K=R+1,W=me[K];if(0>a(M,Pe))K<O&&0>a(W,M)?(me[Ie]=W,me[K]=Pe,Ie=K):(me[Ie]=M,me[R]=Pe,Ie=R);else if(K<O&&0>a(W,Pe))me[Ie]=W,me[K]=Pe,Ie=K;else break e}}return ne}function a(me,ne){var Pe=me.sortIndex-ne.sortIndex;return Pe!==0?Pe:me.id-ne.id}if(typeof performance=="object"&&typeof performance.now=="function"){var s=performance;t.unstable_now=function(){return s.now()}}else{var i=Date,l=i.now();t.unstable_now=function(){return i.now()-l}}var c=[],u=[],d=1,f=null,h=3,A=!1,m=!1,p=!1,g=typeof setTimeout=="function"?setTimeout:null,x=typeof clearTimeout=="function"?clearTimeout:null,y=typeof setImmediate<"u"?setImmediate:null;typeof navigator<"u"&&navigator.scheduling!==void 0&&navigator.scheduling.isInputPending!==void 0&&navigator.scheduling.isInputPending.bind(navigator.scheduling);function b(me){for(var ne=r(u);ne!==null;){if(ne.callback===null)n(u);else if(ne.startTime<=me)n(u),ne.sortIndex=ne.expirationTime,e(c,ne);else break;ne=r(u)}}function w(me){if(p=!1,b(me),!m)if(r(c)!==null)m=!0,ue(j);else{var ne=r(u);ne!==null&&fe(w,ne.startTime-me)}}function j(me,ne){m=!1,p&&(p=!1,x(E),E=-1),A=!0;var Pe=h;try{for(b(ne),f=r(c);f!==null&&(!(f.expirationTime>ne)||me&&!P());){var Ie=f.callback;if(typeof Ie=="function"){f.callback=null,h=f.priorityLevel;var O=Ie(f.expirationTime<=ne);ne=t.unstable_now(),typeof O=="function"?f.callback=O:f===r(c)&&n(c),b(ne)}else n(c);f=r(c)}if(f!==null)var H=!0;else{var R=r(u);R!==null&&fe(w,R.startTime-ne),H=!1}return H}finally{f=null,h=Pe,A=!1}}var I=!1,_=null,E=-1,S=5,k=-1;function P(){return!(t.unstable_now()-k<S)}function T(){if(_!==null){var me=t.unstable_now();k=me;var ne=!0;try{ne=_(!0,me)}finally{ne?F():(I=!1,_=null)}}else I=!1}var F;if(typeof y=="function")F=function(){y(T)};else if(typeof MessageChannel<"u"){var Y=new MessageChannel,he=Y.port2;Y.port1.onmessage=T,F=function(){he.postMessage(null)}}else F=function(){g(T,0)};function ue(me){_=me,I||(I=!0,F())}function fe(me,ne){E=g(function(){me(t.unstable_now())},ne)}t.unstable_IdlePriority=5,t.unstable_ImmediatePriority=1,t.unstable_LowPriority=4,t.unstable_NormalPriority=3,t.unstable_Profiling=null,t.unstable_UserBlockingPriority=2,t.unstable_cancelCallback=function(me){me.callback=null},t.unstable_continueExecution=function(){m||A||(m=!0,ue(j))},t.unstable_forceFrameRate=function(me){0>me||125<me?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):S=0<me?Math.floor(1e3/me):5},t.unstable_getCurrentPriorityLevel=function(){return h},t.unstable_getFirstCallbackNode=function(){return r(c)},t.unstable_next=function(me){switch(h){case 1:case 2:case 3:var ne=3;break;default:ne=h}var Pe=h;h=ne;try{return me()}finally{h=Pe}},t.unstable_pauseExecution=function(){},t.unstable_requestPaint=function(){},t.unstable_runWithPriority=function(me,ne){switch(me){case 1:case 2:case 3:case 4:case 5:break;default:me=3}var Pe=h;h=me;try{return ne()}finally{h=Pe}},t.unstable_scheduleCallback=function(me,ne,Pe){var Ie=t.unstable_now();switch(typeof Pe=="object"&&Pe!==null?(Pe=Pe.delay,Pe=typeof Pe=="number"&&0<Pe?Ie+Pe:Ie):Pe=Ie,me){case 1:var O=-1;break;case 2:O=250;break;case 5:O=1073741823;break;case 4:O=1e4;break;default:O=5e3}return O=Pe+O,me={id:d++,callback:ne,priorityLevel:me,startTime:Pe,expirationTime:O,sortIndex:-1},Pe>Ie?(me.sortIndex=Pe,e(u,me),r(c)===null&&me===r(u)&&(p?(x(E),E=-1):p=!0,fe(w,Pe-Ie))):(me.sortIndex=O,e(c,me),m||A||(m=!0,ue(j))),me},t.unstable_shouldYield=P,t.unstable_wrapCallback=function(me){var ne=h;return function(){var Pe=h;h=ne;try{return me.apply(this,arguments)}finally{h=Pe}}}})(Yq);Xq.exports=Yq;var pue=Xq.exports;/**
 * @license React
 * react-dom.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var gue=v,Xc=pue;function pr(t){for(var e="https://reactjs.org/docs/error-decoder.html?invariant="+t,r=1;r<arguments.length;r++)e+="&args[]="+encodeURIComponent(arguments[r]);return"Minified React error #"+t+"; visit "+e+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var Jq=new Set,fb={};function zp(t,e){Kx(t,e),Kx(t+"Capture",e)}function Kx(t,e){for(fb[t]=e,t=0;t<e.length;t++)Jq.add(e[t])}var PA=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),HB=Object.prototype.hasOwnProperty,xue=/^[:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD][:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\-.0-9\u00B7\u0300-\u036F\u203F-\u2040]*$/,bM={},wM={};function vue(t){return HB.call(wM,t)?!0:HB.call(bM,t)?!1:xue.test(t)?wM[t]=!0:(bM[t]=!0,!1)}function yue(t,e,r,n){if(r!==null&&r.type===0)return!1;switch(typeof e){case"function":case"symbol":return!0;case"boolean":return n?!1:r!==null?!r.acceptsBooleans:(t=t.toLowerCase().slice(0,5),t!=="data-"&&t!=="aria-");default:return!1}}function bue(t,e,r,n){if(e===null||typeof e>"u"||yue(t,e,r,n))return!0;if(n)return!1;if(r!==null)switch(r.type){case 3:return!e;case 4:return e===!1;case 5:return isNaN(e);case 6:return isNaN(e)||1>e}return!1}function Gl(t,e,r,n,a,s,i){this.acceptsBooleans=e===2||e===3||e===4,this.attributeName=n,this.attributeNamespace=a,this.mustUseProperty=r,this.propertyName=t,this.type=e,this.sanitizeURL=s,this.removeEmptyString=i}var qo={};"children dangerouslySetInnerHTML defaultValue defaultChecked innerHTML suppressContentEditableWarning suppressHydrationWarning style".split(" ").forEach(function(t){qo[t]=new Gl(t,0,!1,t,null,!1,!1)});[["acceptCharset","accept-charset"],["className","class"],["htmlFor","for"],["httpEquiv","http-equiv"]].forEach(function(t){var e=t[0];qo[e]=new Gl(e,1,!1,t[1],null,!1,!1)});["contentEditable","draggable","spellCheck","value"].forEach(function(t){qo[t]=new Gl(t,2,!1,t.toLowerCase(),null,!1,!1)});["autoReverse","externalResourcesRequired","focusable","preserveAlpha"].forEach(function(t){qo[t]=new Gl(t,2,!1,t,null,!1,!1)});"allowFullScreen async autoFocus autoPlay controls default defer disabled disablePictureInPicture disableRemotePlayback formNoValidate hidden loop noModule noValidate open playsInline readOnly required reversed scoped seamless itemScope".split(" ").forEach(function(t){qo[t]=new Gl(t,3,!1,t.toLowerCase(),null,!1,!1)});["checked","multiple","muted","selected"].forEach(function(t){qo[t]=new Gl(t,3,!0,t,null,!1,!1)});["capture","download"].forEach(function(t){qo[t]=new Gl(t,4,!1,t,null,!1,!1)});["cols","rows","size","span"].forEach(function(t){qo[t]=new Gl(t,6,!1,t,null,!1,!1)});["rowSpan","start"].forEach(function(t){qo[t]=new Gl(t,5,!1,t.toLowerCase(),null,!1,!1)});var NF=/[\-:]([a-z])/g;function CF(t){return t[1].toUpperCase()}"accent-height alignment-baseline arabic-form baseline-shift cap-height clip-path clip-rule color-interpolation color-interpolation-filters color-profile color-rendering dominant-baseline enable-background fill-opacity fill-rule flood-color flood-opacity font-family font-size font-size-adjust font-stretch font-style font-variant font-weight glyph-name glyph-orientation-horizontal glyph-orientation-vertical horiz-adv-x horiz-origin-x image-rendering letter-spacing lighting-color marker-end marker-mid marker-start overline-position overline-thickness paint-order panose-1 pointer-events rendering-intent shape-rendering stop-color stop-opacity strikethrough-position strikethrough-thickness stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width text-anchor text-decoration text-rendering underline-position underline-thickness unicode-bidi unicode-range units-per-em v-alphabetic v-hanging v-ideographic v-mathematical vector-effect vert-adv-y vert-origin-x vert-origin-y word-spacing writing-mode xmlns:xlink x-height".split(" ").forEach(function(t){var e=t.replace(NF,CF);qo[e]=new Gl(e,1,!1,t,null,!1,!1)});"xlink:actuate xlink:arcrole xlink:role xlink:show xlink:title xlink:type".split(" ").forEach(function(t){var e=t.replace(NF,CF);qo[e]=new Gl(e,1,!1,t,"http://www.w3.org/1999/xlink",!1,!1)});["xml:base","xml:lang","xml:space"].forEach(function(t){var e=t.replace(NF,CF);qo[e]=new Gl(e,1,!1,t,"http://www.w3.org/XML/1998/namespace",!1,!1)});["tabIndex","crossOrigin"].forEach(function(t){qo[t]=new Gl(t,1,!1,t.toLowerCase(),null,!1,!1)});qo.xlinkHref=new Gl("xlinkHref",1,!1,"xlink:href","http://www.w3.org/1999/xlink",!0,!1);["src","href","action","formAction"].forEach(function(t){qo[t]=new Gl(t,1,!1,t.toLowerCase(),null,!0,!0)});function _F(t,e,r,n){var a=qo.hasOwnProperty(e)?qo[e]:null;(a!==null?a.type!==0:n||!(2<e.length)||e[0]!=="o"&&e[0]!=="O"||e[1]!=="n"&&e[1]!=="N")&&(bue(e,r,a,n)&&(r=null),n||a===null?vue(e)&&(r===null?t.removeAttribute(e):t.setAttribute(e,""+r)):a.mustUseProperty?t[a.propertyName]=r===null?a.type===3?!1:"":r:(e=a.attributeName,n=a.attributeNamespace,r===null?t.removeAttribute(e):(a=a.type,r=a===3||a===4&&r===!0?"":""+r,n?t.setAttributeNS(n,e,r):t.setAttribute(e,r))))}var WA=gue.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,aN=Symbol.for("react.element"),ox=Symbol.for("react.portal"),lx=Symbol.for("react.fragment"),EF=Symbol.for("react.strict_mode"),$B=Symbol.for("react.profiler"),Zq=Symbol.for("react.provider"),ez=Symbol.for("react.context"),SF=Symbol.for("react.forward_ref"),KB=Symbol.for("react.suspense"),GB=Symbol.for("react.suspense_list"),IF=Symbol.for("react.memo"),Kh=Symbol.for("react.lazy"),tz=Symbol.for("react.offscreen"),NM=Symbol.iterator;function x1(t){return t===null||typeof t!="object"?null:(t=NM&&t[NM]||t["@@iterator"],typeof t=="function"?t:null)}var ks=Object.assign,ij;function ty(t){if(ij===void 0)try{throw Error()}catch(r){var e=r.stack.trim().match(/\n( *(at )?)/);ij=e&&e[1]||""}return`
`+ij+t}var oj=!1;function lj(t,e){if(!t||oj)return"";oj=!0;var r=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{if(e)if(e=function(){throw Error()},Object.defineProperty(e.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(e,[])}catch(u){var n=u}Reflect.construct(t,[],e)}else{try{e.call()}catch(u){n=u}t.call(e.prototype)}else{try{throw Error()}catch(u){n=u}t()}}catch(u){if(u&&n&&typeof u.stack=="string"){for(var a=u.stack.split(`
`),s=n.stack.split(`
`),i=a.length-1,l=s.length-1;1<=i&&0<=l&&a[i]!==s[l];)l--;for(;1<=i&&0<=l;i--,l--)if(a[i]!==s[l]){if(i!==1||l!==1)do if(i--,l--,0>l||a[i]!==s[l]){var c=`
`+a[i].replace(" at new "," at ");return t.displayName&&c.includes("<anonymous>")&&(c=c.replace("<anonymous>",t.displayName)),c}while(1<=i&&0<=l);break}}}finally{oj=!1,Error.prepareStackTrace=r}return(t=t?t.displayName||t.name:"")?ty(t):""}function wue(t){switch(t.tag){case 5:return ty(t.type);case 16:return ty("Lazy");case 13:return ty("Suspense");case 19:return ty("SuspenseList");case 0:case 2:case 15:return t=lj(t.type,!1),t;case 11:return t=lj(t.type.render,!1),t;case 1:return t=lj(t.type,!0),t;default:return""}}function qB(t){if(t==null)return null;if(typeof t=="function")return t.displayName||t.name||null;if(typeof t=="string")return t;switch(t){case lx:return"Fragment";case ox:return"Portal";case $B:return"Profiler";case EF:return"StrictMode";case KB:return"Suspense";case GB:return"SuspenseList"}if(typeof t=="object")switch(t.$$typeof){case ez:return(t.displayName||"Context")+".Consumer";case Zq:return(t._context.displayName||"Context")+".Provider";case SF:var e=t.render;return t=t.displayName,t||(t=e.displayName||e.name||"",t=t!==""?"ForwardRef("+t+")":"ForwardRef"),t;case IF:return e=t.displayName||null,e!==null?e:qB(t.type)||"Memo";case Kh:e=t._payload,t=t._init;try{return qB(t(e))}catch{}}return null}function Nue(t){var e=t.type;switch(t.tag){case 24:return"Cache";case 9:return(e.displayName||"Context")+".Consumer";case 10:return(e._context.displayName||"Context")+".Provider";case 18:return"DehydratedFragment";case 11:return t=e.render,t=t.displayName||t.name||"",e.displayName||(t!==""?"ForwardRef("+t+")":"ForwardRef");case 7:return"Fragment";case 5:return e;case 4:return"Portal";case 3:return"Root";case 6:return"Text";case 16:return qB(e);case 8:return e===EF?"StrictMode":"Mode";case 22:return"Offscreen";case 12:return"Profiler";case 21:return"Scope";case 13:return"Suspense";case 19:return"SuspenseList";case 25:return"TracingMarker";case 1:case 0:case 17:case 2:case 14:case 15:if(typeof e=="function")return e.displayName||e.name||null;if(typeof e=="string")return e}return null}function O0(t){switch(typeof t){case"boolean":case"number":case"string":case"undefined":return t;case"object":return t;default:return""}}function rz(t){var e=t.type;return(t=t.nodeName)&&t.toLowerCase()==="input"&&(e==="checkbox"||e==="radio")}function Cue(t){var e=rz(t)?"checked":"value",r=Object.getOwnPropertyDescriptor(t.constructor.prototype,e),n=""+t[e];if(!t.hasOwnProperty(e)&&typeof r<"u"&&typeof r.get=="function"&&typeof r.set=="function"){var a=r.get,s=r.set;return Object.defineProperty(t,e,{configurable:!0,get:function(){return a.call(this)},set:function(i){n=""+i,s.call(this,i)}}),Object.defineProperty(t,e,{enumerable:r.enumerable}),{getValue:function(){return n},setValue:function(i){n=""+i},stopTracking:function(){t._valueTracker=null,delete t[e]}}}}function sN(t){t._valueTracker||(t._valueTracker=Cue(t))}function nz(t){if(!t)return!1;var e=t._valueTracker;if(!e)return!0;var r=e.getValue(),n="";return t&&(n=rz(t)?t.checked?"true":"false":t.value),t=n,t!==r?(e.setValue(t),!0):!1}function W_(t){if(t=t||(typeof document<"u"?document:void 0),typeof t>"u")return null;try{return t.activeElement||t.body}catch{return t.body}}function zB(t,e){var r=e.checked;return ks({},e,{defaultChecked:void 0,defaultValue:void 0,value:void 0,checked:r??t._wrapperState.initialChecked})}function CM(t,e){var r=e.defaultValue==null?"":e.defaultValue,n=e.checked!=null?e.checked:e.defaultChecked;r=O0(e.value!=null?e.value:r),t._wrapperState={initialChecked:n,initialValue:r,controlled:e.type==="checkbox"||e.type==="radio"?e.checked!=null:e.value!=null}}function az(t,e){e=e.checked,e!=null&&_F(t,"checked",e,!1)}function WB(t,e){az(t,e);var r=O0(e.value),n=e.type;if(r!=null)n==="number"?(r===0&&t.value===""||t.value!=r)&&(t.value=""+r):t.value!==""+r&&(t.value=""+r);else if(n==="submit"||n==="reset"){t.removeAttribute("value");return}e.hasOwnProperty("value")?XB(t,e.type,r):e.hasOwnProperty("defaultValue")&&XB(t,e.type,O0(e.defaultValue)),e.checked==null&&e.defaultChecked!=null&&(t.defaultChecked=!!e.defaultChecked)}function _M(t,e,r){if(e.hasOwnProperty("value")||e.hasOwnProperty("defaultValue")){var n=e.type;if(!(n!=="submit"&&n!=="reset"||e.value!==void 0&&e.value!==null))return;e=""+t._wrapperState.initialValue,r||e===t.value||(t.value=e),t.defaultValue=e}r=t.name,r!==""&&(t.name=""),t.defaultChecked=!!t._wrapperState.initialChecked,r!==""&&(t.name=r)}function XB(t,e,r){(e!=="number"||W_(t.ownerDocument)!==t)&&(r==null?t.defaultValue=""+t._wrapperState.initialValue:t.defaultValue!==""+r&&(t.defaultValue=""+r))}var ry=Array.isArray;function Ix(t,e,r,n){if(t=t.options,e){e={};for(var a=0;a<r.length;a++)e["$"+r[a]]=!0;for(r=0;r<t.length;r++)a=e.hasOwnProperty("$"+t[r].value),t[r].selected!==a&&(t[r].selected=a),a&&n&&(t[r].defaultSelected=!0)}else{for(r=""+O0(r),e=null,a=0;a<t.length;a++){if(t[a].value===r){t[a].selected=!0,n&&(t[a].defaultSelected=!0);return}e!==null||t[a].disabled||(e=t[a])}e!==null&&(e.selected=!0)}}function YB(t,e){if(e.dangerouslySetInnerHTML!=null)throw Error(pr(91));return ks({},e,{value:void 0,defaultValue:void 0,children:""+t._wrapperState.initialValue})}function EM(t,e){var r=e.value;if(r==null){if(r=e.children,e=e.defaultValue,r!=null){if(e!=null)throw Error(pr(92));if(ry(r)){if(1<r.length)throw Error(pr(93));r=r[0]}e=r}e==null&&(e=""),r=e}t._wrapperState={initialValue:O0(r)}}function sz(t,e){var r=O0(e.value),n=O0(e.defaultValue);r!=null&&(r=""+r,r!==t.value&&(t.value=r),e.defaultValue==null&&t.defaultValue!==r&&(t.defaultValue=r)),n!=null&&(t.defaultValue=""+n)}function SM(t){var e=t.textContent;e===t._wrapperState.initialValue&&e!==""&&e!==null&&(t.value=e)}function iz(t){switch(t){case"svg":return"http://www.w3.org/2000/svg";case"math":return"http://www.w3.org/1998/Math/MathML";default:return"http://www.w3.org/1999/xhtml"}}function JB(t,e){return t==null||t==="http://www.w3.org/1999/xhtml"?iz(e):t==="http://www.w3.org/2000/svg"&&e==="foreignObject"?"http://www.w3.org/1999/xhtml":t}var iN,oz=function(t){return typeof MSApp<"u"&&MSApp.execUnsafeLocalFunction?function(e,r,n,a){MSApp.execUnsafeLocalFunction(function(){return t(e,r,n,a)})}:t}(function(t,e){if(t.namespaceURI!=="http://www.w3.org/2000/svg"||"innerHTML"in t)t.innerHTML=e;else{for(iN=iN||document.createElement("div"),iN.innerHTML="<svg>"+e.valueOf().toString()+"</svg>",e=iN.firstChild;t.firstChild;)t.removeChild(t.firstChild);for(;e.firstChild;)t.appendChild(e.firstChild)}});function Ab(t,e){if(e){var r=t.firstChild;if(r&&r===t.lastChild&&r.nodeType===3){r.nodeValue=e;return}}t.textContent=e}var Sy={animationIterationCount:!0,aspectRatio:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridArea:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},_ue=["Webkit","ms","Moz","O"];Object.keys(Sy).forEach(function(t){_ue.forEach(function(e){e=e+t.charAt(0).toUpperCase()+t.substring(1),Sy[e]=Sy[t]})});function lz(t,e,r){return e==null||typeof e=="boolean"||e===""?"":r||typeof e!="number"||e===0||Sy.hasOwnProperty(t)&&Sy[t]?(""+e).trim():e+"px"}function cz(t,e){t=t.style;for(var r in e)if(e.hasOwnProperty(r)){var n=r.indexOf("--")===0,a=lz(r,e[r],n);r==="float"&&(r="cssFloat"),n?t.setProperty(r,a):t[r]=a}}var Eue=ks({menuitem:!0},{area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0});function ZB(t,e){if(e){if(Eue[t]&&(e.children!=null||e.dangerouslySetInnerHTML!=null))throw Error(pr(137,t));if(e.dangerouslySetInnerHTML!=null){if(e.children!=null)throw Error(pr(60));if(typeof e.dangerouslySetInnerHTML!="object"||!("__html"in e.dangerouslySetInnerHTML))throw Error(pr(61))}if(e.style!=null&&typeof e.style!="object")throw Error(pr(62))}}function eP(t,e){if(t.indexOf("-")===-1)return typeof e.is=="string";switch(t){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var tP=null;function jF(t){return t=t.target||t.srcElement||window,t.correspondingUseElement&&(t=t.correspondingUseElement),t.nodeType===3?t.parentNode:t}var rP=null,jx=null,Bx=null;function IM(t){if(t=O2(t)){if(typeof rP!="function")throw Error(pr(280));var e=t.stateNode;e&&(e=yI(e),rP(t.stateNode,t.type,e))}}function uz(t){jx?Bx?Bx.push(t):Bx=[t]:jx=t}function dz(){if(jx){var t=jx,e=Bx;if(Bx=jx=null,IM(t),e)for(t=0;t<e.length;t++)IM(e[t])}}function fz(t,e){return t(e)}function Az(){}var cj=!1;function hz(t,e,r){if(cj)return t(e,r);cj=!0;try{return fz(t,e,r)}finally{cj=!1,(jx!==null||Bx!==null)&&(Az(),dz())}}function hb(t,e){var r=t.stateNode;if(r===null)return null;var n=yI(r);if(n===null)return null;r=n[e];e:switch(e){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(n=!n.disabled)||(t=t.type,n=!(t==="button"||t==="input"||t==="select"||t==="textarea")),t=!n;break e;default:t=!1}if(t)return null;if(r&&typeof r!="function")throw Error(pr(231,e,typeof r));return r}var nP=!1;if(PA)try{var v1={};Object.defineProperty(v1,"passive",{get:function(){nP=!0}}),window.addEventListener("test",v1,v1),window.removeEventListener("test",v1,v1)}catch{nP=!1}function Sue(t,e,r,n,a,s,i,l,c){var u=Array.prototype.slice.call(arguments,3);try{e.apply(r,u)}catch(d){this.onError(d)}}var Iy=!1,X_=null,Y_=!1,aP=null,Iue={onError:function(t){Iy=!0,X_=t}};function jue(t,e,r,n,a,s,i,l,c){Iy=!1,X_=null,Sue.apply(Iue,arguments)}function Bue(t,e,r,n,a,s,i,l,c){if(jue.apply(this,arguments),Iy){if(Iy){var u=X_;Iy=!1,X_=null}else throw Error(pr(198));Y_||(Y_=!0,aP=u)}}function Wp(t){var e=t,r=t;if(t.alternate)for(;e.return;)e=e.return;else{t=e;do e=t,e.flags&4098&&(r=e.return),t=e.return;while(t)}return e.tag===3?r:null}function mz(t){if(t.tag===13){var e=t.memoizedState;if(e===null&&(t=t.alternate,t!==null&&(e=t.memoizedState)),e!==null)return e.dehydrated}return null}function jM(t){if(Wp(t)!==t)throw Error(pr(188))}function Pue(t){var e=t.alternate;if(!e){if(e=Wp(t),e===null)throw Error(pr(188));return e!==t?null:t}for(var r=t,n=e;;){var a=r.return;if(a===null)break;var s=a.alternate;if(s===null){if(n=a.return,n!==null){r=n;continue}break}if(a.child===s.child){for(s=a.child;s;){if(s===r)return jM(a),t;if(s===n)return jM(a),e;s=s.sibling}throw Error(pr(188))}if(r.return!==n.return)r=a,n=s;else{for(var i=!1,l=a.child;l;){if(l===r){i=!0,r=a,n=s;break}if(l===n){i=!0,n=a,r=s;break}l=l.sibling}if(!i){for(l=s.child;l;){if(l===r){i=!0,r=s,n=a;break}if(l===n){i=!0,n=s,r=a;break}l=l.sibling}if(!i)throw Error(pr(189))}}if(r.alternate!==n)throw Error(pr(190))}if(r.tag!==3)throw Error(pr(188));return r.stateNode.current===r?t:e}function pz(t){return t=Pue(t),t!==null?gz(t):null}function gz(t){if(t.tag===5||t.tag===6)return t;for(t=t.child;t!==null;){var e=gz(t);if(e!==null)return e;t=t.sibling}return null}var xz=Xc.unstable_scheduleCallback,BM=Xc.unstable_cancelCallback,Tue=Xc.unstable_shouldYield,kue=Xc.unstable_requestPaint,ii=Xc.unstable_now,Fue=Xc.unstable_getCurrentPriorityLevel,BF=Xc.unstable_ImmediatePriority,vz=Xc.unstable_UserBlockingPriority,J_=Xc.unstable_NormalPriority,Oue=Xc.unstable_LowPriority,yz=Xc.unstable_IdlePriority,pI=null,yf=null;function Due(t){if(yf&&typeof yf.onCommitFiberRoot=="function")try{yf.onCommitFiberRoot(pI,t,void 0,(t.current.flags&128)===128)}catch{}}var _d=Math.clz32?Math.clz32:Lue,Rue=Math.log,Mue=Math.LN2;function Lue(t){return t>>>=0,t===0?32:31-(Rue(t)/Mue|0)|0}var oN=64,lN=4194304;function ny(t){switch(t&-t){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return t&4194240;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return t&130023424;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 1073741824;default:return t}}function Z_(t,e){var r=t.pendingLanes;if(r===0)return 0;var n=0,a=t.suspendedLanes,s=t.pingedLanes,i=r&268435455;if(i!==0){var l=i&~a;l!==0?n=ny(l):(s&=i,s!==0&&(n=ny(s)))}else i=r&~a,i!==0?n=ny(i):s!==0&&(n=ny(s));if(n===0)return 0;if(e!==0&&e!==n&&!(e&a)&&(a=n&-n,s=e&-e,a>=s||a===16&&(s&4194240)!==0))return e;if(n&4&&(n|=r&16),e=t.entangledLanes,e!==0)for(t=t.entanglements,e&=n;0<e;)r=31-_d(e),a=1<<r,n|=t[r],e&=~a;return n}function Uue(t,e){switch(t){case 1:case 2:case 4:return e+250;case 8:case 16:case 32:case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return e+5e3;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return-1;case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function Que(t,e){for(var r=t.suspendedLanes,n=t.pingedLanes,a=t.expirationTimes,s=t.pendingLanes;0<s;){var i=31-_d(s),l=1<<i,c=a[i];c===-1?(!(l&r)||l&n)&&(a[i]=Uue(l,e)):c<=e&&(t.expiredLanes|=l),s&=~l}}function sP(t){return t=t.pendingLanes&-1073741825,t!==0?t:t&1073741824?1073741824:0}function bz(){var t=oN;return oN<<=1,!(oN&4194240)&&(oN=64),t}function uj(t){for(var e=[],r=0;31>r;r++)e.push(t);return e}function k2(t,e,r){t.pendingLanes|=e,e!==536870912&&(t.suspendedLanes=0,t.pingedLanes=0),t=t.eventTimes,e=31-_d(e),t[e]=r}function Vue(t,e){var r=t.pendingLanes&~e;t.pendingLanes=e,t.suspendedLanes=0,t.pingedLanes=0,t.expiredLanes&=e,t.mutableReadLanes&=e,t.entangledLanes&=e,e=t.entanglements;var n=t.eventTimes;for(t=t.expirationTimes;0<r;){var a=31-_d(r),s=1<<a;e[a]=0,n[a]=-1,t[a]=-1,r&=~s}}function PF(t,e){var r=t.entangledLanes|=e;for(t=t.entanglements;r;){var n=31-_d(r),a=1<<n;a&e|t[n]&e&&(t[n]|=e),r&=~a}}var _a=0;function wz(t){return t&=-t,1<t?4<t?t&268435455?16:536870912:4:1}var Nz,TF,Cz,_z,Ez,iP=!1,cN=[],g0=null,x0=null,v0=null,mb=new Map,pb=new Map,Yh=[],Hue="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset submit".split(" ");function PM(t,e){switch(t){case"focusin":case"focusout":g0=null;break;case"dragenter":case"dragleave":x0=null;break;case"mouseover":case"mouseout":v0=null;break;case"pointerover":case"pointerout":mb.delete(e.pointerId);break;case"gotpointercapture":case"lostpointercapture":pb.delete(e.pointerId)}}function y1(t,e,r,n,a,s){return t===null||t.nativeEvent!==s?(t={blockedOn:e,domEventName:r,eventSystemFlags:n,nativeEvent:s,targetContainers:[a]},e!==null&&(e=O2(e),e!==null&&TF(e)),t):(t.eventSystemFlags|=n,e=t.targetContainers,a!==null&&e.indexOf(a)===-1&&e.push(a),t)}function $ue(t,e,r,n,a){switch(e){case"focusin":return g0=y1(g0,t,e,r,n,a),!0;case"dragenter":return x0=y1(x0,t,e,r,n,a),!0;case"mouseover":return v0=y1(v0,t,e,r,n,a),!0;case"pointerover":var s=a.pointerId;return mb.set(s,y1(mb.get(s)||null,t,e,r,n,a)),!0;case"gotpointercapture":return s=a.pointerId,pb.set(s,y1(pb.get(s)||null,t,e,r,n,a)),!0}return!1}function Sz(t){var e=Vm(t.target);if(e!==null){var r=Wp(e);if(r!==null){if(e=r.tag,e===13){if(e=mz(r),e!==null){t.blockedOn=e,Ez(t.priority,function(){Cz(r)});return}}else if(e===3&&r.stateNode.current.memoizedState.isDehydrated){t.blockedOn=r.tag===3?r.stateNode.containerInfo:null;return}}}t.blockedOn=null}function l_(t){if(t.blockedOn!==null)return!1;for(var e=t.targetContainers;0<e.length;){var r=oP(t.domEventName,t.eventSystemFlags,e[0],t.nativeEvent);if(r===null){r=t.nativeEvent;var n=new r.constructor(r.type,r);tP=n,r.target.dispatchEvent(n),tP=null}else return e=O2(r),e!==null&&TF(e),t.blockedOn=r,!1;e.shift()}return!0}function TM(t,e,r){l_(t)&&r.delete(e)}function Kue(){iP=!1,g0!==null&&l_(g0)&&(g0=null),x0!==null&&l_(x0)&&(x0=null),v0!==null&&l_(v0)&&(v0=null),mb.forEach(TM),pb.forEach(TM)}function b1(t,e){t.blockedOn===e&&(t.blockedOn=null,iP||(iP=!0,Xc.unstable_scheduleCallback(Xc.unstable_NormalPriority,Kue)))}function gb(t){function e(a){return b1(a,t)}if(0<cN.length){b1(cN[0],t);for(var r=1;r<cN.length;r++){var n=cN[r];n.blockedOn===t&&(n.blockedOn=null)}}for(g0!==null&&b1(g0,t),x0!==null&&b1(x0,t),v0!==null&&b1(v0,t),mb.forEach(e),pb.forEach(e),r=0;r<Yh.length;r++)n=Yh[r],n.blockedOn===t&&(n.blockedOn=null);for(;0<Yh.length&&(r=Yh[0],r.blockedOn===null);)Sz(r),r.blockedOn===null&&Yh.shift()}var Px=WA.ReactCurrentBatchConfig,eE=!0;function Gue(t,e,r,n){var a=_a,s=Px.transition;Px.transition=null;try{_a=1,kF(t,e,r,n)}finally{_a=a,Px.transition=s}}function que(t,e,r,n){var a=_a,s=Px.transition;Px.transition=null;try{_a=4,kF(t,e,r,n)}finally{_a=a,Px.transition=s}}function kF(t,e,r,n){if(eE){var a=oP(t,e,r,n);if(a===null)yj(t,e,n,tE,r),PM(t,n);else if($ue(a,t,e,r,n))n.stopPropagation();else if(PM(t,n),e&4&&-1<Hue.indexOf(t)){for(;a!==null;){var s=O2(a);if(s!==null&&Nz(s),s=oP(t,e,r,n),s===null&&yj(t,e,n,tE,r),s===a)break;a=s}a!==null&&n.stopPropagation()}else yj(t,e,n,null,r)}}var tE=null;function oP(t,e,r,n){if(tE=null,t=jF(n),t=Vm(t),t!==null)if(e=Wp(t),e===null)t=null;else if(r=e.tag,r===13){if(t=mz(e),t!==null)return t;t=null}else if(r===3){if(e.stateNode.current.memoizedState.isDehydrated)return e.tag===3?e.stateNode.containerInfo:null;t=null}else e!==t&&(t=null);return tE=t,null}function Iz(t){switch(t){case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 1;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"toggle":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 4;case"message":switch(Fue()){case BF:return 1;case vz:return 4;case J_:case Oue:return 16;case yz:return 536870912;default:return 16}default:return 16}}var o0=null,FF=null,c_=null;function jz(){if(c_)return c_;var t,e=FF,r=e.length,n,a="value"in o0?o0.value:o0.textContent,s=a.length;for(t=0;t<r&&e[t]===a[t];t++);var i=r-t;for(n=1;n<=i&&e[r-n]===a[s-n];n++);return c_=a.slice(t,1<n?1-n:void 0)}function u_(t){var e=t.keyCode;return"charCode"in t?(t=t.charCode,t===0&&e===13&&(t=13)):t=e,t===10&&(t=13),32<=t||t===13?t:0}function uN(){return!0}function kM(){return!1}function ru(t){function e(r,n,a,s,i){this._reactName=r,this._targetInst=a,this.type=n,this.nativeEvent=s,this.target=i,this.currentTarget=null;for(var l in t)t.hasOwnProperty(l)&&(r=t[l],this[l]=r?r(s):s[l]);return this.isDefaultPrevented=(s.defaultPrevented!=null?s.defaultPrevented:s.returnValue===!1)?uN:kM,this.isPropagationStopped=kM,this}return ks(e.prototype,{preventDefault:function(){this.defaultPrevented=!0;var r=this.nativeEvent;r&&(r.preventDefault?r.preventDefault():typeof r.returnValue!="unknown"&&(r.returnValue=!1),this.isDefaultPrevented=uN)},stopPropagation:function(){var r=this.nativeEvent;r&&(r.stopPropagation?r.stopPropagation():typeof r.cancelBubble!="unknown"&&(r.cancelBubble=!0),this.isPropagationStopped=uN)},persist:function(){},isPersistent:uN}),e}var Nv={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(t){return t.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},OF=ru(Nv),F2=ks({},Nv,{view:0,detail:0}),zue=ru(F2),dj,fj,w1,gI=ks({},F2,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:DF,button:0,buttons:0,relatedTarget:function(t){return t.relatedTarget===void 0?t.fromElement===t.srcElement?t.toElement:t.fromElement:t.relatedTarget},movementX:function(t){return"movementX"in t?t.movementX:(t!==w1&&(w1&&t.type==="mousemove"?(dj=t.screenX-w1.screenX,fj=t.screenY-w1.screenY):fj=dj=0,w1=t),dj)},movementY:function(t){return"movementY"in t?t.movementY:fj}}),FM=ru(gI),Wue=ks({},gI,{dataTransfer:0}),Xue=ru(Wue),Yue=ks({},F2,{relatedTarget:0}),Aj=ru(Yue),Jue=ks({},Nv,{animationName:0,elapsedTime:0,pseudoElement:0}),Zue=ru(Jue),ede=ks({},Nv,{clipboardData:function(t){return"clipboardData"in t?t.clipboardData:window.clipboardData}}),tde=ru(ede),rde=ks({},Nv,{data:0}),OM=ru(rde),nde={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},ade={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},sde={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function ide(t){var e=this.nativeEvent;return e.getModifierState?e.getModifierState(t):(t=sde[t])?!!e[t]:!1}function DF(){return ide}var ode=ks({},F2,{key:function(t){if(t.key){var e=nde[t.key]||t.key;if(e!=="Unidentified")return e}return t.type==="keypress"?(t=u_(t),t===13?"Enter":String.fromCharCode(t)):t.type==="keydown"||t.type==="keyup"?ade[t.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:DF,charCode:function(t){return t.type==="keypress"?u_(t):0},keyCode:function(t){return t.type==="keydown"||t.type==="keyup"?t.keyCode:0},which:function(t){return t.type==="keypress"?u_(t):t.type==="keydown"||t.type==="keyup"?t.keyCode:0}}),lde=ru(ode),cde=ks({},gI,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),DM=ru(cde),ude=ks({},F2,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:DF}),dde=ru(ude),fde=ks({},Nv,{propertyName:0,elapsedTime:0,pseudoElement:0}),Ade=ru(fde),hde=ks({},gI,{deltaX:function(t){return"deltaX"in t?t.deltaX:"wheelDeltaX"in t?-t.wheelDeltaX:0},deltaY:function(t){return"deltaY"in t?t.deltaY:"wheelDeltaY"in t?-t.wheelDeltaY:"wheelDelta"in t?-t.wheelDelta:0},deltaZ:0,deltaMode:0}),mde=ru(hde),pde=[9,13,27,32],RF=PA&&"CompositionEvent"in window,jy=null;PA&&"documentMode"in document&&(jy=document.documentMode);var gde=PA&&"TextEvent"in window&&!jy,Bz=PA&&(!RF||jy&&8<jy&&11>=jy),RM=" ",MM=!1;function Pz(t,e){switch(t){case"keyup":return pde.indexOf(e.keyCode)!==-1;case"keydown":return e.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function Tz(t){return t=t.detail,typeof t=="object"&&"data"in t?t.data:null}var cx=!1;function xde(t,e){switch(t){case"compositionend":return Tz(e);case"keypress":return e.which!==32?null:(MM=!0,RM);case"textInput":return t=e.data,t===RM&&MM?null:t;default:return null}}function vde(t,e){if(cx)return t==="compositionend"||!RF&&Pz(t,e)?(t=jz(),c_=FF=o0=null,cx=!1,t):null;switch(t){case"paste":return null;case"keypress":if(!(e.ctrlKey||e.altKey||e.metaKey)||e.ctrlKey&&e.altKey){if(e.char&&1<e.char.length)return e.char;if(e.which)return String.fromCharCode(e.which)}return null;case"compositionend":return Bz&&e.locale!=="ko"?null:e.data;default:return null}}var yde={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function LM(t){var e=t&&t.nodeName&&t.nodeName.toLowerCase();return e==="input"?!!yde[t.type]:e==="textarea"}function kz(t,e,r,n){uz(n),e=rE(e,"onChange"),0<e.length&&(r=new OF("onChange","change",null,r,n),t.push({event:r,listeners:e}))}var By=null,xb=null;function bde(t){$z(t,0)}function xI(t){var e=fx(t);if(nz(e))return t}function wde(t,e){if(t==="change")return e}var Fz=!1;if(PA){var hj;if(PA){var mj="oninput"in document;if(!mj){var UM=document.createElement("div");UM.setAttribute("oninput","return;"),mj=typeof UM.oninput=="function"}hj=mj}else hj=!1;Fz=hj&&(!document.documentMode||9<document.documentMode)}function QM(){By&&(By.detachEvent("onpropertychange",Oz),xb=By=null)}function Oz(t){if(t.propertyName==="value"&&xI(xb)){var e=[];kz(e,xb,t,jF(t)),hz(bde,e)}}function Nde(t,e,r){t==="focusin"?(QM(),By=e,xb=r,By.attachEvent("onpropertychange",Oz)):t==="focusout"&&QM()}function Cde(t){if(t==="selectionchange"||t==="keyup"||t==="keydown")return xI(xb)}function _de(t,e){if(t==="click")return xI(e)}function Ede(t,e){if(t==="input"||t==="change")return xI(e)}function Sde(t,e){return t===e&&(t!==0||1/t===1/e)||t!==t&&e!==e}var Pd=typeof Object.is=="function"?Object.is:Sde;function vb(t,e){if(Pd(t,e))return!0;if(typeof t!="object"||t===null||typeof e!="object"||e===null)return!1;var r=Object.keys(t),n=Object.keys(e);if(r.length!==n.length)return!1;for(n=0;n<r.length;n++){var a=r[n];if(!HB.call(e,a)||!Pd(t[a],e[a]))return!1}return!0}function VM(t){for(;t&&t.firstChild;)t=t.firstChild;return t}function HM(t,e){var r=VM(t);t=0;for(var n;r;){if(r.nodeType===3){if(n=t+r.textContent.length,t<=e&&n>=e)return{node:r,offset:e-t};t=n}e:{for(;r;){if(r.nextSibling){r=r.nextSibling;break e}r=r.parentNode}r=void 0}r=VM(r)}}function Dz(t,e){return t&&e?t===e?!0:t&&t.nodeType===3?!1:e&&e.nodeType===3?Dz(t,e.parentNode):"contains"in t?t.contains(e):t.compareDocumentPosition?!!(t.compareDocumentPosition(e)&16):!1:!1}function Rz(){for(var t=window,e=W_();e instanceof t.HTMLIFrameElement;){try{var r=typeof e.contentWindow.location.href=="string"}catch{r=!1}if(r)t=e.contentWindow;else break;e=W_(t.document)}return e}function MF(t){var e=t&&t.nodeName&&t.nodeName.toLowerCase();return e&&(e==="input"&&(t.type==="text"||t.type==="search"||t.type==="tel"||t.type==="url"||t.type==="password")||e==="textarea"||t.contentEditable==="true")}function Ide(t){var e=Rz(),r=t.focusedElem,n=t.selectionRange;if(e!==r&&r&&r.ownerDocument&&Dz(r.ownerDocument.documentElement,r)){if(n!==null&&MF(r)){if(e=n.start,t=n.end,t===void 0&&(t=e),"selectionStart"in r)r.selectionStart=e,r.selectionEnd=Math.min(t,r.value.length);else if(t=(e=r.ownerDocument||document)&&e.defaultView||window,t.getSelection){t=t.getSelection();var a=r.textContent.length,s=Math.min(n.start,a);n=n.end===void 0?s:Math.min(n.end,a),!t.extend&&s>n&&(a=n,n=s,s=a),a=HM(r,s);var i=HM(r,n);a&&i&&(t.rangeCount!==1||t.anchorNode!==a.node||t.anchorOffset!==a.offset||t.focusNode!==i.node||t.focusOffset!==i.offset)&&(e=e.createRange(),e.setStart(a.node,a.offset),t.removeAllRanges(),s>n?(t.addRange(e),t.extend(i.node,i.offset)):(e.setEnd(i.node,i.offset),t.addRange(e)))}}for(e=[],t=r;t=t.parentNode;)t.nodeType===1&&e.push({element:t,left:t.scrollLeft,top:t.scrollTop});for(typeof r.focus=="function"&&r.focus(),r=0;r<e.length;r++)t=e[r],t.element.scrollLeft=t.left,t.element.scrollTop=t.top}}var jde=PA&&"documentMode"in document&&11>=document.documentMode,ux=null,lP=null,Py=null,cP=!1;function $M(t,e,r){var n=r.window===r?r.document:r.nodeType===9?r:r.ownerDocument;cP||ux==null||ux!==W_(n)||(n=ux,"selectionStart"in n&&MF(n)?n={start:n.selectionStart,end:n.selectionEnd}:(n=(n.ownerDocument&&n.ownerDocument.defaultView||window).getSelection(),n={anchorNode:n.anchorNode,anchorOffset:n.anchorOffset,focusNode:n.focusNode,focusOffset:n.focusOffset}),Py&&vb(Py,n)||(Py=n,n=rE(lP,"onSelect"),0<n.length&&(e=new OF("onSelect","select",null,e,r),t.push({event:e,listeners:n}),e.target=ux)))}function dN(t,e){var r={};return r[t.toLowerCase()]=e.toLowerCase(),r["Webkit"+t]="webkit"+e,r["Moz"+t]="moz"+e,r}var dx={animationend:dN("Animation","AnimationEnd"),animationiteration:dN("Animation","AnimationIteration"),animationstart:dN("Animation","AnimationStart"),transitionend:dN("Transition","TransitionEnd")},pj={},Mz={};PA&&(Mz=document.createElement("div").style,"AnimationEvent"in window||(delete dx.animationend.animation,delete dx.animationiteration.animation,delete dx.animationstart.animation),"TransitionEvent"in window||delete dx.transitionend.transition);function vI(t){if(pj[t])return pj[t];if(!dx[t])return t;var e=dx[t],r;for(r in e)if(e.hasOwnProperty(r)&&r in Mz)return pj[t]=e[r];return t}var Lz=vI("animationend"),Uz=vI("animationiteration"),Qz=vI("animationstart"),Vz=vI("transitionend"),Hz=new Map,KM="abort auxClick cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");function J0(t,e){Hz.set(t,e),zp(e,[t])}for(var gj=0;gj<KM.length;gj++){var xj=KM[gj],Bde=xj.toLowerCase(),Pde=xj[0].toUpperCase()+xj.slice(1);J0(Bde,"on"+Pde)}J0(Lz,"onAnimationEnd");J0(Uz,"onAnimationIteration");J0(Qz,"onAnimationStart");J0("dblclick","onDoubleClick");J0("focusin","onFocus");J0("focusout","onBlur");J0(Vz,"onTransitionEnd");Kx("onMouseEnter",["mouseout","mouseover"]);Kx("onMouseLeave",["mouseout","mouseover"]);Kx("onPointerEnter",["pointerout","pointerover"]);Kx("onPointerLeave",["pointerout","pointerover"]);zp("onChange","change click focusin focusout input keydown keyup selectionchange".split(" "));zp("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" "));zp("onBeforeInput",["compositionend","keypress","textInput","paste"]);zp("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" "));zp("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" "));zp("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var ay="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),Tde=new Set("cancel close invalid load scroll toggle".split(" ").concat(ay));function GM(t,e,r){var n=t.type||"unknown-event";t.currentTarget=r,Bue(n,e,void 0,t),t.currentTarget=null}function $z(t,e){e=(e&4)!==0;for(var r=0;r<t.length;r++){var n=t[r],a=n.event;n=n.listeners;e:{var s=void 0;if(e)for(var i=n.length-1;0<=i;i--){var l=n[i],c=l.instance,u=l.currentTarget;if(l=l.listener,c!==s&&a.isPropagationStopped())break e;GM(a,l,u),s=c}else for(i=0;i<n.length;i++){if(l=n[i],c=l.instance,u=l.currentTarget,l=l.listener,c!==s&&a.isPropagationStopped())break e;GM(a,l,u),s=c}}}if(Y_)throw t=aP,Y_=!1,aP=null,t}function Wa(t,e){var r=e[hP];r===void 0&&(r=e[hP]=new Set);var n=t+"__bubble";r.has(n)||(Kz(e,t,2,!1),r.add(n))}function vj(t,e,r){var n=0;e&&(n|=4),Kz(r,t,n,e)}var fN="_reactListening"+Math.random().toString(36).slice(2);function yb(t){if(!t[fN]){t[fN]=!0,Jq.forEach(function(r){r!=="selectionchange"&&(Tde.has(r)||vj(r,!1,t),vj(r,!0,t))});var e=t.nodeType===9?t:t.ownerDocument;e===null||e[fN]||(e[fN]=!0,vj("selectionchange",!1,e))}}function Kz(t,e,r,n){switch(Iz(e)){case 1:var a=Gue;break;case 4:a=que;break;default:a=kF}r=a.bind(null,e,r,t),a=void 0,!nP||e!=="touchstart"&&e!=="touchmove"&&e!=="wheel"||(a=!0),n?a!==void 0?t.addEventListener(e,r,{capture:!0,passive:a}):t.addEventListener(e,r,!0):a!==void 0?t.addEventListener(e,r,{passive:a}):t.addEventListener(e,r,!1)}function yj(t,e,r,n,a){var s=n;if(!(e&1)&&!(e&2)&&n!==null)e:for(;;){if(n===null)return;var i=n.tag;if(i===3||i===4){var l=n.stateNode.containerInfo;if(l===a||l.nodeType===8&&l.parentNode===a)break;if(i===4)for(i=n.return;i!==null;){var c=i.tag;if((c===3||c===4)&&(c=i.stateNode.containerInfo,c===a||c.nodeType===8&&c.parentNode===a))return;i=i.return}for(;l!==null;){if(i=Vm(l),i===null)return;if(c=i.tag,c===5||c===6){n=s=i;continue e}l=l.parentNode}}n=n.return}hz(function(){var u=s,d=jF(r),f=[];e:{var h=Hz.get(t);if(h!==void 0){var A=OF,m=t;switch(t){case"keypress":if(u_(r)===0)break e;case"keydown":case"keyup":A=lde;break;case"focusin":m="focus",A=Aj;break;case"focusout":m="blur",A=Aj;break;case"beforeblur":case"afterblur":A=Aj;break;case"click":if(r.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":A=FM;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":A=Xue;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":A=dde;break;case Lz:case Uz:case Qz:A=Zue;break;case Vz:A=Ade;break;case"scroll":A=zue;break;case"wheel":A=mde;break;case"copy":case"cut":case"paste":A=tde;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":A=DM}var p=(e&4)!==0,g=!p&&t==="scroll",x=p?h!==null?h+"Capture":null:h;p=[];for(var y=u,b;y!==null;){b=y;var w=b.stateNode;if(b.tag===5&&w!==null&&(b=w,x!==null&&(w=hb(y,x),w!=null&&p.push(bb(y,w,b)))),g)break;y=y.return}0<p.length&&(h=new A(h,m,null,r,d),f.push({event:h,listeners:p}))}}if(!(e&7)){e:{if(h=t==="mouseover"||t==="pointerover",A=t==="mouseout"||t==="pointerout",h&&r!==tP&&(m=r.relatedTarget||r.fromElement)&&(Vm(m)||m[TA]))break e;if((A||h)&&(h=d.window===d?d:(h=d.ownerDocument)?h.defaultView||h.parentWindow:window,A?(m=r.relatedTarget||r.toElement,A=u,m=m?Vm(m):null,m!==null&&(g=Wp(m),m!==g||m.tag!==5&&m.tag!==6)&&(m=null)):(A=null,m=u),A!==m)){if(p=FM,w="onMouseLeave",x="onMouseEnter",y="mouse",(t==="pointerout"||t==="pointerover")&&(p=DM,w="onPointerLeave",x="onPointerEnter",y="pointer"),g=A==null?h:fx(A),b=m==null?h:fx(m),h=new p(w,y+"leave",A,r,d),h.target=g,h.relatedTarget=b,w=null,Vm(d)===u&&(p=new p(x,y+"enter",m,r,d),p.target=b,p.relatedTarget=g,w=p),g=w,A&&m)t:{for(p=A,x=m,y=0,b=p;b;b=wg(b))y++;for(b=0,w=x;w;w=wg(w))b++;for(;0<y-b;)p=wg(p),y--;for(;0<b-y;)x=wg(x),b--;for(;y--;){if(p===x||x!==null&&p===x.alternate)break t;p=wg(p),x=wg(x)}p=null}else p=null;A!==null&&qM(f,h,A,p,!1),m!==null&&g!==null&&qM(f,g,m,p,!0)}}e:{if(h=u?fx(u):window,A=h.nodeName&&h.nodeName.toLowerCase(),A==="select"||A==="input"&&h.type==="file")var j=wde;else if(LM(h))if(Fz)j=Ede;else{j=Cde;var I=Nde}else(A=h.nodeName)&&A.toLowerCase()==="input"&&(h.type==="checkbox"||h.type==="radio")&&(j=_de);if(j&&(j=j(t,u))){kz(f,j,r,d);break e}I&&I(t,h,u),t==="focusout"&&(I=h._wrapperState)&&I.controlled&&h.type==="number"&&XB(h,"number",h.value)}switch(I=u?fx(u):window,t){case"focusin":(LM(I)||I.contentEditable==="true")&&(ux=I,lP=u,Py=null);break;case"focusout":Py=lP=ux=null;break;case"mousedown":cP=!0;break;case"contextmenu":case"mouseup":case"dragend":cP=!1,$M(f,r,d);break;case"selectionchange":if(jde)break;case"keydown":case"keyup":$M(f,r,d)}var _;if(RF)e:{switch(t){case"compositionstart":var E="onCompositionStart";break e;case"compositionend":E="onCompositionEnd";break e;case"compositionupdate":E="onCompositionUpdate";break e}E=void 0}else cx?Pz(t,r)&&(E="onCompositionEnd"):t==="keydown"&&r.keyCode===229&&(E="onCompositionStart");E&&(Bz&&r.locale!=="ko"&&(cx||E!=="onCompositionStart"?E==="onCompositionEnd"&&cx&&(_=jz()):(o0=d,FF="value"in o0?o0.value:o0.textContent,cx=!0)),I=rE(u,E),0<I.length&&(E=new OM(E,t,null,r,d),f.push({event:E,listeners:I}),_?E.data=_:(_=Tz(r),_!==null&&(E.data=_)))),(_=gde?xde(t,r):vde(t,r))&&(u=rE(u,"onBeforeInput"),0<u.length&&(d=new OM("onBeforeInput","beforeinput",null,r,d),f.push({event:d,listeners:u}),d.data=_))}$z(f,e)})}function bb(t,e,r){return{instance:t,listener:e,currentTarget:r}}function rE(t,e){for(var r=e+"Capture",n=[];t!==null;){var a=t,s=a.stateNode;a.tag===5&&s!==null&&(a=s,s=hb(t,r),s!=null&&n.unshift(bb(t,s,a)),s=hb(t,e),s!=null&&n.push(bb(t,s,a))),t=t.return}return n}function wg(t){if(t===null)return null;do t=t.return;while(t&&t.tag!==5);return t||null}function qM(t,e,r,n,a){for(var s=e._reactName,i=[];r!==null&&r!==n;){var l=r,c=l.alternate,u=l.stateNode;if(c!==null&&c===n)break;l.tag===5&&u!==null&&(l=u,a?(c=hb(r,s),c!=null&&i.unshift(bb(r,c,l))):a||(c=hb(r,s),c!=null&&i.push(bb(r,c,l)))),r=r.return}i.length!==0&&t.push({event:e,listeners:i})}var kde=/\r\n?/g,Fde=/\u0000|\uFFFD/g;function zM(t){return(typeof t=="string"?t:""+t).replace(kde,`
`).replace(Fde,"")}function AN(t,e,r){if(e=zM(e),zM(t)!==e&&r)throw Error(pr(425))}function nE(){}var uP=null,dP=null;function fP(t,e){return t==="textarea"||t==="noscript"||typeof e.children=="string"||typeof e.children=="number"||typeof e.dangerouslySetInnerHTML=="object"&&e.dangerouslySetInnerHTML!==null&&e.dangerouslySetInnerHTML.__html!=null}var AP=typeof setTimeout=="function"?setTimeout:void 0,Ode=typeof clearTimeout=="function"?clearTimeout:void 0,WM=typeof Promise=="function"?Promise:void 0,Dde=typeof queueMicrotask=="function"?queueMicrotask:typeof WM<"u"?function(t){return WM.resolve(null).then(t).catch(Rde)}:AP;function Rde(t){setTimeout(function(){throw t})}function bj(t,e){var r=e,n=0;do{var a=r.nextSibling;if(t.removeChild(r),a&&a.nodeType===8)if(r=a.data,r==="/$"){if(n===0){t.removeChild(a),gb(e);return}n--}else r!=="$"&&r!=="$?"&&r!=="$!"||n++;r=a}while(r);gb(e)}function y0(t){for(;t!=null;t=t.nextSibling){var e=t.nodeType;if(e===1||e===3)break;if(e===8){if(e=t.data,e==="$"||e==="$!"||e==="$?")break;if(e==="/$")return null}}return t}function XM(t){t=t.previousSibling;for(var e=0;t;){if(t.nodeType===8){var r=t.data;if(r==="$"||r==="$!"||r==="$?"){if(e===0)return t;e--}else r==="/$"&&e++}t=t.previousSibling}return null}var Cv=Math.random().toString(36).slice(2),ff="__reactFiber$"+Cv,wb="__reactProps$"+Cv,TA="__reactContainer$"+Cv,hP="__reactEvents$"+Cv,Mde="__reactListeners$"+Cv,Lde="__reactHandles$"+Cv;function Vm(t){var e=t[ff];if(e)return e;for(var r=t.parentNode;r;){if(e=r[TA]||r[ff]){if(r=e.alternate,e.child!==null||r!==null&&r.child!==null)for(t=XM(t);t!==null;){if(r=t[ff])return r;t=XM(t)}return e}t=r,r=t.parentNode}return null}function O2(t){return t=t[ff]||t[TA],!t||t.tag!==5&&t.tag!==6&&t.tag!==13&&t.tag!==3?null:t}function fx(t){if(t.tag===5||t.tag===6)return t.stateNode;throw Error(pr(33))}function yI(t){return t[wb]||null}var mP=[],Ax=-1;function Z0(t){return{current:t}}function rs(t){0>Ax||(t.current=mP[Ax],mP[Ax]=null,Ax--)}function $a(t,e){Ax++,mP[Ax]=t.current,t.current=e}var D0={},vl=Z0(D0),dc=Z0(!1),gp=D0;function Gx(t,e){var r=t.type.contextTypes;if(!r)return D0;var n=t.stateNode;if(n&&n.__reactInternalMemoizedUnmaskedChildContext===e)return n.__reactInternalMemoizedMaskedChildContext;var a={},s;for(s in r)a[s]=e[s];return n&&(t=t.stateNode,t.__reactInternalMemoizedUnmaskedChildContext=e,t.__reactInternalMemoizedMaskedChildContext=a),a}function fc(t){return t=t.childContextTypes,t!=null}function aE(){rs(dc),rs(vl)}function YM(t,e,r){if(vl.current!==D0)throw Error(pr(168));$a(vl,e),$a(dc,r)}function Gz(t,e,r){var n=t.stateNode;if(e=e.childContextTypes,typeof n.getChildContext!="function")return r;n=n.getChildContext();for(var a in n)if(!(a in e))throw Error(pr(108,Nue(t)||"Unknown",a));return ks({},r,n)}function sE(t){return t=(t=t.stateNode)&&t.__reactInternalMemoizedMergedChildContext||D0,gp=vl.current,$a(vl,t),$a(dc,dc.current),!0}function JM(t,e,r){var n=t.stateNode;if(!n)throw Error(pr(169));r?(t=Gz(t,e,gp),n.__reactInternalMemoizedMergedChildContext=t,rs(dc),rs(vl),$a(vl,t)):rs(dc),$a(dc,r)}var iA=null,bI=!1,wj=!1;function qz(t){iA===null?iA=[t]:iA.push(t)}function Ude(t){bI=!0,qz(t)}function em(){if(!wj&&iA!==null){wj=!0;var t=0,e=_a;try{var r=iA;for(_a=1;t<r.length;t++){var n=r[t];do n=n(!0);while(n!==null)}iA=null,bI=!1}catch(a){throw iA!==null&&(iA=iA.slice(t+1)),xz(BF,em),a}finally{_a=e,wj=!1}}return null}var hx=[],mx=0,iE=null,oE=0,Pu=[],Tu=0,xp=null,dA=1,fA="";function Em(t,e){hx[mx++]=oE,hx[mx++]=iE,iE=t,oE=e}function zz(t,e,r){Pu[Tu++]=dA,Pu[Tu++]=fA,Pu[Tu++]=xp,xp=t;var n=dA;t=fA;var a=32-_d(n)-1;n&=~(1<<a),r+=1;var s=32-_d(e)+a;if(30<s){var i=a-a%5;s=(n&(1<<i)-1).toString(32),n>>=i,a-=i,dA=1<<32-_d(e)+a|r<<a|n,fA=s+t}else dA=1<<s|r<<a|n,fA=t}function LF(t){t.return!==null&&(Em(t,1),zz(t,1,0))}function UF(t){for(;t===iE;)iE=hx[--mx],hx[mx]=null,oE=hx[--mx],hx[mx]=null;for(;t===xp;)xp=Pu[--Tu],Pu[Tu]=null,fA=Pu[--Tu],Pu[Tu]=null,dA=Pu[--Tu],Pu[Tu]=null}var qc=null,Hc=null,fs=!1,gd=null;function Wz(t,e){var r=Fu(5,null,null,0);r.elementType="DELETED",r.stateNode=e,r.return=t,e=t.deletions,e===null?(t.deletions=[r],t.flags|=16):e.push(r)}function ZM(t,e){switch(t.tag){case 5:var r=t.type;return e=e.nodeType!==1||r.toLowerCase()!==e.nodeName.toLowerCase()?null:e,e!==null?(t.stateNode=e,qc=t,Hc=y0(e.firstChild),!0):!1;case 6:return e=t.pendingProps===""||e.nodeType!==3?null:e,e!==null?(t.stateNode=e,qc=t,Hc=null,!0):!1;case 13:return e=e.nodeType!==8?null:e,e!==null?(r=xp!==null?{id:dA,overflow:fA}:null,t.memoizedState={dehydrated:e,treeContext:r,retryLane:1073741824},r=Fu(18,null,null,0),r.stateNode=e,r.return=t,t.child=r,qc=t,Hc=null,!0):!1;default:return!1}}function pP(t){return(t.mode&1)!==0&&(t.flags&128)===0}function gP(t){if(fs){var e=Hc;if(e){var r=e;if(!ZM(t,e)){if(pP(t))throw Error(pr(418));e=y0(r.nextSibling);var n=qc;e&&ZM(t,e)?Wz(n,r):(t.flags=t.flags&-4097|2,fs=!1,qc=t)}}else{if(pP(t))throw Error(pr(418));t.flags=t.flags&-4097|2,fs=!1,qc=t}}}function eL(t){for(t=t.return;t!==null&&t.tag!==5&&t.tag!==3&&t.tag!==13;)t=t.return;qc=t}function hN(t){if(t!==qc)return!1;if(!fs)return eL(t),fs=!0,!1;var e;if((e=t.tag!==3)&&!(e=t.tag!==5)&&(e=t.type,e=e!=="head"&&e!=="body"&&!fP(t.type,t.memoizedProps)),e&&(e=Hc)){if(pP(t))throw Xz(),Error(pr(418));for(;e;)Wz(t,e),e=y0(e.nextSibling)}if(eL(t),t.tag===13){if(t=t.memoizedState,t=t!==null?t.dehydrated:null,!t)throw Error(pr(317));e:{for(t=t.nextSibling,e=0;t;){if(t.nodeType===8){var r=t.data;if(r==="/$"){if(e===0){Hc=y0(t.nextSibling);break e}e--}else r!=="$"&&r!=="$!"&&r!=="$?"||e++}t=t.nextSibling}Hc=null}}else Hc=qc?y0(t.stateNode.nextSibling):null;return!0}function Xz(){for(var t=Hc;t;)t=y0(t.nextSibling)}function qx(){Hc=qc=null,fs=!1}function QF(t){gd===null?gd=[t]:gd.push(t)}var Qde=WA.ReactCurrentBatchConfig;function N1(t,e,r){if(t=r.ref,t!==null&&typeof t!="function"&&typeof t!="object"){if(r._owner){if(r=r._owner,r){if(r.tag!==1)throw Error(pr(309));var n=r.stateNode}if(!n)throw Error(pr(147,t));var a=n,s=""+t;return e!==null&&e.ref!==null&&typeof e.ref=="function"&&e.ref._stringRef===s?e.ref:(e=function(i){var l=a.refs;i===null?delete l[s]:l[s]=i},e._stringRef=s,e)}if(typeof t!="string")throw Error(pr(284));if(!r._owner)throw Error(pr(290,t))}return t}function mN(t,e){throw t=Object.prototype.toString.call(e),Error(pr(31,t==="[object Object]"?"object with keys {"+Object.keys(e).join(", ")+"}":t))}function tL(t){var e=t._init;return e(t._payload)}function Yz(t){function e(x,y){if(t){var b=x.deletions;b===null?(x.deletions=[y],x.flags|=16):b.push(y)}}function r(x,y){if(!t)return null;for(;y!==null;)e(x,y),y=y.sibling;return null}function n(x,y){for(x=new Map;y!==null;)y.key!==null?x.set(y.key,y):x.set(y.index,y),y=y.sibling;return x}function a(x,y){return x=C0(x,y),x.index=0,x.sibling=null,x}function s(x,y,b){return x.index=b,t?(b=x.alternate,b!==null?(b=b.index,b<y?(x.flags|=2,y):b):(x.flags|=2,y)):(x.flags|=1048576,y)}function i(x){return t&&x.alternate===null&&(x.flags|=2),x}function l(x,y,b,w){return y===null||y.tag!==6?(y=jj(b,x.mode,w),y.return=x,y):(y=a(y,b),y.return=x,y)}function c(x,y,b,w){var j=b.type;return j===lx?d(x,y,b.props.children,w,b.key):y!==null&&(y.elementType===j||typeof j=="object"&&j!==null&&j.$$typeof===Kh&&tL(j)===y.type)?(w=a(y,b.props),w.ref=N1(x,y,b),w.return=x,w):(w=g_(b.type,b.key,b.props,null,x.mode,w),w.ref=N1(x,y,b),w.return=x,w)}function u(x,y,b,w){return y===null||y.tag!==4||y.stateNode.containerInfo!==b.containerInfo||y.stateNode.implementation!==b.implementation?(y=Bj(b,x.mode,w),y.return=x,y):(y=a(y,b.children||[]),y.return=x,y)}function d(x,y,b,w,j){return y===null||y.tag!==7?(y=ep(b,x.mode,w,j),y.return=x,y):(y=a(y,b),y.return=x,y)}function f(x,y,b){if(typeof y=="string"&&y!==""||typeof y=="number")return y=jj(""+y,x.mode,b),y.return=x,y;if(typeof y=="object"&&y!==null){switch(y.$$typeof){case aN:return b=g_(y.type,y.key,y.props,null,x.mode,b),b.ref=N1(x,null,y),b.return=x,b;case ox:return y=Bj(y,x.mode,b),y.return=x,y;case Kh:var w=y._init;return f(x,w(y._payload),b)}if(ry(y)||x1(y))return y=ep(y,x.mode,b,null),y.return=x,y;mN(x,y)}return null}function h(x,y,b,w){var j=y!==null?y.key:null;if(typeof b=="string"&&b!==""||typeof b=="number")return j!==null?null:l(x,y,""+b,w);if(typeof b=="object"&&b!==null){switch(b.$$typeof){case aN:return b.key===j?c(x,y,b,w):null;case ox:return b.key===j?u(x,y,b,w):null;case Kh:return j=b._init,h(x,y,j(b._payload),w)}if(ry(b)||x1(b))return j!==null?null:d(x,y,b,w,null);mN(x,b)}return null}function A(x,y,b,w,j){if(typeof w=="string"&&w!==""||typeof w=="number")return x=x.get(b)||null,l(y,x,""+w,j);if(typeof w=="object"&&w!==null){switch(w.$$typeof){case aN:return x=x.get(w.key===null?b:w.key)||null,c(y,x,w,j);case ox:return x=x.get(w.key===null?b:w.key)||null,u(y,x,w,j);case Kh:var I=w._init;return A(x,y,b,I(w._payload),j)}if(ry(w)||x1(w))return x=x.get(b)||null,d(y,x,w,j,null);mN(y,w)}return null}function m(x,y,b,w){for(var j=null,I=null,_=y,E=y=0,S=null;_!==null&&E<b.length;E++){_.index>E?(S=_,_=null):S=_.sibling;var k=h(x,_,b[E],w);if(k===null){_===null&&(_=S);break}t&&_&&k.alternate===null&&e(x,_),y=s(k,y,E),I===null?j=k:I.sibling=k,I=k,_=S}if(E===b.length)return r(x,_),fs&&Em(x,E),j;if(_===null){for(;E<b.length;E++)_=f(x,b[E],w),_!==null&&(y=s(_,y,E),I===null?j=_:I.sibling=_,I=_);return fs&&Em(x,E),j}for(_=n(x,_);E<b.length;E++)S=A(_,x,E,b[E],w),S!==null&&(t&&S.alternate!==null&&_.delete(S.key===null?E:S.key),y=s(S,y,E),I===null?j=S:I.sibling=S,I=S);return t&&_.forEach(function(P){return e(x,P)}),fs&&Em(x,E),j}function p(x,y,b,w){var j=x1(b);if(typeof j!="function")throw Error(pr(150));if(b=j.call(b),b==null)throw Error(pr(151));for(var I=j=null,_=y,E=y=0,S=null,k=b.next();_!==null&&!k.done;E++,k=b.next()){_.index>E?(S=_,_=null):S=_.sibling;var P=h(x,_,k.value,w);if(P===null){_===null&&(_=S);break}t&&_&&P.alternate===null&&e(x,_),y=s(P,y,E),I===null?j=P:I.sibling=P,I=P,_=S}if(k.done)return r(x,_),fs&&Em(x,E),j;if(_===null){for(;!k.done;E++,k=b.next())k=f(x,k.value,w),k!==null&&(y=s(k,y,E),I===null?j=k:I.sibling=k,I=k);return fs&&Em(x,E),j}for(_=n(x,_);!k.done;E++,k=b.next())k=A(_,x,E,k.value,w),k!==null&&(t&&k.alternate!==null&&_.delete(k.key===null?E:k.key),y=s(k,y,E),I===null?j=k:I.sibling=k,I=k);return t&&_.forEach(function(T){return e(x,T)}),fs&&Em(x,E),j}function g(x,y,b,w){if(typeof b=="object"&&b!==null&&b.type===lx&&b.key===null&&(b=b.props.children),typeof b=="object"&&b!==null){switch(b.$$typeof){case aN:e:{for(var j=b.key,I=y;I!==null;){if(I.key===j){if(j=b.type,j===lx){if(I.tag===7){r(x,I.sibling),y=a(I,b.props.children),y.return=x,x=y;break e}}else if(I.elementType===j||typeof j=="object"&&j!==null&&j.$$typeof===Kh&&tL(j)===I.type){r(x,I.sibling),y=a(I,b.props),y.ref=N1(x,I,b),y.return=x,x=y;break e}r(x,I);break}else e(x,I);I=I.sibling}b.type===lx?(y=ep(b.props.children,x.mode,w,b.key),y.return=x,x=y):(w=g_(b.type,b.key,b.props,null,x.mode,w),w.ref=N1(x,y,b),w.return=x,x=w)}return i(x);case ox:e:{for(I=b.key;y!==null;){if(y.key===I)if(y.tag===4&&y.stateNode.containerInfo===b.containerInfo&&y.stateNode.implementation===b.implementation){r(x,y.sibling),y=a(y,b.children||[]),y.return=x,x=y;break e}else{r(x,y);break}else e(x,y);y=y.sibling}y=Bj(b,x.mode,w),y.return=x,x=y}return i(x);case Kh:return I=b._init,g(x,y,I(b._payload),w)}if(ry(b))return m(x,y,b,w);if(x1(b))return p(x,y,b,w);mN(x,b)}return typeof b=="string"&&b!==""||typeof b=="number"?(b=""+b,y!==null&&y.tag===6?(r(x,y.sibling),y=a(y,b),y.return=x,x=y):(r(x,y),y=jj(b,x.mode,w),y.return=x,x=y),i(x)):r(x,y)}return g}var zx=Yz(!0),Jz=Yz(!1),lE=Z0(null),cE=null,px=null,VF=null;function HF(){VF=px=cE=null}function $F(t){var e=lE.current;rs(lE),t._currentValue=e}function xP(t,e,r){for(;t!==null;){var n=t.alternate;if((t.childLanes&e)!==e?(t.childLanes|=e,n!==null&&(n.childLanes|=e)):n!==null&&(n.childLanes&e)!==e&&(n.childLanes|=e),t===r)break;t=t.return}}function Tx(t,e){cE=t,VF=px=null,t=t.dependencies,t!==null&&t.firstContext!==null&&(t.lanes&e&&(lc=!0),t.firstContext=null)}function $u(t){var e=t._currentValue;if(VF!==t)if(t={context:t,memoizedValue:e,next:null},px===null){if(cE===null)throw Error(pr(308));px=t,cE.dependencies={lanes:0,firstContext:t}}else px=px.next=t;return e}var Hm=null;function KF(t){Hm===null?Hm=[t]:Hm.push(t)}function Zz(t,e,r,n){var a=e.interleaved;return a===null?(r.next=r,KF(e)):(r.next=a.next,a.next=r),e.interleaved=r,kA(t,n)}function kA(t,e){t.lanes|=e;var r=t.alternate;for(r!==null&&(r.lanes|=e),r=t,t=t.return;t!==null;)t.childLanes|=e,r=t.alternate,r!==null&&(r.childLanes|=e),r=t,t=t.return;return r.tag===3?r.stateNode:null}var Gh=!1;function GF(t){t.updateQueue={baseState:t.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,interleaved:null,lanes:0},effects:null}}function eW(t,e){t=t.updateQueue,e.updateQueue===t&&(e.updateQueue={baseState:t.baseState,firstBaseUpdate:t.firstBaseUpdate,lastBaseUpdate:t.lastBaseUpdate,shared:t.shared,effects:t.effects})}function yA(t,e){return{eventTime:t,lane:e,tag:0,payload:null,callback:null,next:null}}function b0(t,e,r){var n=t.updateQueue;if(n===null)return null;if(n=n.shared,zn&2){var a=n.pending;return a===null?e.next=e:(e.next=a.next,a.next=e),n.pending=e,kA(t,r)}return a=n.interleaved,a===null?(e.next=e,KF(n)):(e.next=a.next,a.next=e),n.interleaved=e,kA(t,r)}function d_(t,e,r){if(e=e.updateQueue,e!==null&&(e=e.shared,(r&4194240)!==0)){var n=e.lanes;n&=t.pendingLanes,r|=n,e.lanes=r,PF(t,r)}}function rL(t,e){var r=t.updateQueue,n=t.alternate;if(n!==null&&(n=n.updateQueue,r===n)){var a=null,s=null;if(r=r.firstBaseUpdate,r!==null){do{var i={eventTime:r.eventTime,lane:r.lane,tag:r.tag,payload:r.payload,callback:r.callback,next:null};s===null?a=s=i:s=s.next=i,r=r.next}while(r!==null);s===null?a=s=e:s=s.next=e}else a=s=e;r={baseState:n.baseState,firstBaseUpdate:a,lastBaseUpdate:s,shared:n.shared,effects:n.effects},t.updateQueue=r;return}t=r.lastBaseUpdate,t===null?r.firstBaseUpdate=e:t.next=e,r.lastBaseUpdate=e}function uE(t,e,r,n){var a=t.updateQueue;Gh=!1;var s=a.firstBaseUpdate,i=a.lastBaseUpdate,l=a.shared.pending;if(l!==null){a.shared.pending=null;var c=l,u=c.next;c.next=null,i===null?s=u:i.next=u,i=c;var d=t.alternate;d!==null&&(d=d.updateQueue,l=d.lastBaseUpdate,l!==i&&(l===null?d.firstBaseUpdate=u:l.next=u,d.lastBaseUpdate=c))}if(s!==null){var f=a.baseState;i=0,d=u=c=null,l=s;do{var h=l.lane,A=l.eventTime;if((n&h)===h){d!==null&&(d=d.next={eventTime:A,lane:0,tag:l.tag,payload:l.payload,callback:l.callback,next:null});e:{var m=t,p=l;switch(h=e,A=r,p.tag){case 1:if(m=p.payload,typeof m=="function"){f=m.call(A,f,h);break e}f=m;break e;case 3:m.flags=m.flags&-65537|128;case 0:if(m=p.payload,h=typeof m=="function"?m.call(A,f,h):m,h==null)break e;f=ks({},f,h);break e;case 2:Gh=!0}}l.callback!==null&&l.lane!==0&&(t.flags|=64,h=a.effects,h===null?a.effects=[l]:h.push(l))}else A={eventTime:A,lane:h,tag:l.tag,payload:l.payload,callback:l.callback,next:null},d===null?(u=d=A,c=f):d=d.next=A,i|=h;if(l=l.next,l===null){if(l=a.shared.pending,l===null)break;h=l,l=h.next,h.next=null,a.lastBaseUpdate=h,a.shared.pending=null}}while(!0);if(d===null&&(c=f),a.baseState=c,a.firstBaseUpdate=u,a.lastBaseUpdate=d,e=a.shared.interleaved,e!==null){a=e;do i|=a.lane,a=a.next;while(a!==e)}else s===null&&(a.shared.lanes=0);yp|=i,t.lanes=i,t.memoizedState=f}}function nL(t,e,r){if(t=e.effects,e.effects=null,t!==null)for(e=0;e<t.length;e++){var n=t[e],a=n.callback;if(a!==null){if(n.callback=null,n=r,typeof a!="function")throw Error(pr(191,a));a.call(n)}}}var D2={},bf=Z0(D2),Nb=Z0(D2),Cb=Z0(D2);function $m(t){if(t===D2)throw Error(pr(174));return t}function qF(t,e){switch($a(Cb,e),$a(Nb,t),$a(bf,D2),t=e.nodeType,t){case 9:case 11:e=(e=e.documentElement)?e.namespaceURI:JB(null,"");break;default:t=t===8?e.parentNode:e,e=t.namespaceURI||null,t=t.tagName,e=JB(e,t)}rs(bf),$a(bf,e)}function Wx(){rs(bf),rs(Nb),rs(Cb)}function tW(t){$m(Cb.current);var e=$m(bf.current),r=JB(e,t.type);e!==r&&($a(Nb,t),$a(bf,r))}function zF(t){Nb.current===t&&(rs(bf),rs(Nb))}var js=Z0(0);function dE(t){for(var e=t;e!==null;){if(e.tag===13){var r=e.memoizedState;if(r!==null&&(r=r.dehydrated,r===null||r.data==="$?"||r.data==="$!"))return e}else if(e.tag===19&&e.memoizedProps.revealOrder!==void 0){if(e.flags&128)return e}else if(e.child!==null){e.child.return=e,e=e.child;continue}if(e===t)break;for(;e.sibling===null;){if(e.return===null||e.return===t)return null;e=e.return}e.sibling.return=e.return,e=e.sibling}return null}var Nj=[];function WF(){for(var t=0;t<Nj.length;t++)Nj[t]._workInProgressVersionPrimary=null;Nj.length=0}var f_=WA.ReactCurrentDispatcher,Cj=WA.ReactCurrentBatchConfig,vp=0,Ts=null,ki=null,uo=null,fE=!1,Ty=!1,_b=0,Vde=0;function Yo(){throw Error(pr(321))}function XF(t,e){if(e===null)return!1;for(var r=0;r<e.length&&r<t.length;r++)if(!Pd(t[r],e[r]))return!1;return!0}function YF(t,e,r,n,a,s){if(vp=s,Ts=e,e.memoizedState=null,e.updateQueue=null,e.lanes=0,f_.current=t===null||t.memoizedState===null?Gde:qde,t=r(n,a),Ty){s=0;do{if(Ty=!1,_b=0,25<=s)throw Error(pr(301));s+=1,uo=ki=null,e.updateQueue=null,f_.current=zde,t=r(n,a)}while(Ty)}if(f_.current=AE,e=ki!==null&&ki.next!==null,vp=0,uo=ki=Ts=null,fE=!1,e)throw Error(pr(300));return t}function JF(){var t=_b!==0;return _b=0,t}function df(){var t={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return uo===null?Ts.memoizedState=uo=t:uo=uo.next=t,uo}function Ku(){if(ki===null){var t=Ts.alternate;t=t!==null?t.memoizedState:null}else t=ki.next;var e=uo===null?Ts.memoizedState:uo.next;if(e!==null)uo=e,ki=t;else{if(t===null)throw Error(pr(310));ki=t,t={memoizedState:ki.memoizedState,baseState:ki.baseState,baseQueue:ki.baseQueue,queue:ki.queue,next:null},uo===null?Ts.memoizedState=uo=t:uo=uo.next=t}return uo}function Eb(t,e){return typeof e=="function"?e(t):e}function _j(t){var e=Ku(),r=e.queue;if(r===null)throw Error(pr(311));r.lastRenderedReducer=t;var n=ki,a=n.baseQueue,s=r.pending;if(s!==null){if(a!==null){var i=a.next;a.next=s.next,s.next=i}n.baseQueue=a=s,r.pending=null}if(a!==null){s=a.next,n=n.baseState;var l=i=null,c=null,u=s;do{var d=u.lane;if((vp&d)===d)c!==null&&(c=c.next={lane:0,action:u.action,hasEagerState:u.hasEagerState,eagerState:u.eagerState,next:null}),n=u.hasEagerState?u.eagerState:t(n,u.action);else{var f={lane:d,action:u.action,hasEagerState:u.hasEagerState,eagerState:u.eagerState,next:null};c===null?(l=c=f,i=n):c=c.next=f,Ts.lanes|=d,yp|=d}u=u.next}while(u!==null&&u!==s);c===null?i=n:c.next=l,Pd(n,e.memoizedState)||(lc=!0),e.memoizedState=n,e.baseState=i,e.baseQueue=c,r.lastRenderedState=n}if(t=r.interleaved,t!==null){a=t;do s=a.lane,Ts.lanes|=s,yp|=s,a=a.next;while(a!==t)}else a===null&&(r.lanes=0);return[e.memoizedState,r.dispatch]}function Ej(t){var e=Ku(),r=e.queue;if(r===null)throw Error(pr(311));r.lastRenderedReducer=t;var n=r.dispatch,a=r.pending,s=e.memoizedState;if(a!==null){r.pending=null;var i=a=a.next;do s=t(s,i.action),i=i.next;while(i!==a);Pd(s,e.memoizedState)||(lc=!0),e.memoizedState=s,e.baseQueue===null&&(e.baseState=s),r.lastRenderedState=s}return[s,n]}function rW(){}function nW(t,e){var r=Ts,n=Ku(),a=e(),s=!Pd(n.memoizedState,a);if(s&&(n.memoizedState=a,lc=!0),n=n.queue,ZF(iW.bind(null,r,n,t),[t]),n.getSnapshot!==e||s||uo!==null&&uo.memoizedState.tag&1){if(r.flags|=2048,Sb(9,sW.bind(null,r,n,a,e),void 0,null),mo===null)throw Error(pr(349));vp&30||aW(r,e,a)}return a}function aW(t,e,r){t.flags|=16384,t={getSnapshot:e,value:r},e=Ts.updateQueue,e===null?(e={lastEffect:null,stores:null},Ts.updateQueue=e,e.stores=[t]):(r=e.stores,r===null?e.stores=[t]:r.push(t))}function sW(t,e,r,n){e.value=r,e.getSnapshot=n,oW(e)&&lW(t)}function iW(t,e,r){return r(function(){oW(e)&&lW(t)})}function oW(t){var e=t.getSnapshot;t=t.value;try{var r=e();return!Pd(t,r)}catch{return!0}}function lW(t){var e=kA(t,1);e!==null&&Ed(e,t,1,-1)}function aL(t){var e=df();return typeof t=="function"&&(t=t()),e.memoizedState=e.baseState=t,t={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:Eb,lastRenderedState:t},e.queue=t,t=t.dispatch=Kde.bind(null,Ts,t),[e.memoizedState,t]}function Sb(t,e,r,n){return t={tag:t,create:e,destroy:r,deps:n,next:null},e=Ts.updateQueue,e===null?(e={lastEffect:null,stores:null},Ts.updateQueue=e,e.lastEffect=t.next=t):(r=e.lastEffect,r===null?e.lastEffect=t.next=t:(n=r.next,r.next=t,t.next=n,e.lastEffect=t)),t}function cW(){return Ku().memoizedState}function A_(t,e,r,n){var a=df();Ts.flags|=t,a.memoizedState=Sb(1|e,r,void 0,n===void 0?null:n)}function wI(t,e,r,n){var a=Ku();n=n===void 0?null:n;var s=void 0;if(ki!==null){var i=ki.memoizedState;if(s=i.destroy,n!==null&&XF(n,i.deps)){a.memoizedState=Sb(e,r,s,n);return}}Ts.flags|=t,a.memoizedState=Sb(1|e,r,s,n)}function sL(t,e){return A_(8390656,8,t,e)}function ZF(t,e){return wI(2048,8,t,e)}function uW(t,e){return wI(4,2,t,e)}function dW(t,e){return wI(4,4,t,e)}function fW(t,e){if(typeof e=="function")return t=t(),e(t),function(){e(null)};if(e!=null)return t=t(),e.current=t,function(){e.current=null}}function AW(t,e,r){return r=r!=null?r.concat([t]):null,wI(4,4,fW.bind(null,e,t),r)}function eO(){}function hW(t,e){var r=Ku();e=e===void 0?null:e;var n=r.memoizedState;return n!==null&&e!==null&&XF(e,n[1])?n[0]:(r.memoizedState=[t,e],t)}function mW(t,e){var r=Ku();e=e===void 0?null:e;var n=r.memoizedState;return n!==null&&e!==null&&XF(e,n[1])?n[0]:(t=t(),r.memoizedState=[t,e],t)}function pW(t,e,r){return vp&21?(Pd(r,e)||(r=bz(),Ts.lanes|=r,yp|=r,t.baseState=!0),e):(t.baseState&&(t.baseState=!1,lc=!0),t.memoizedState=r)}function Hde(t,e){var r=_a;_a=r!==0&&4>r?r:4,t(!0);var n=Cj.transition;Cj.transition={};try{t(!1),e()}finally{_a=r,Cj.transition=n}}function gW(){return Ku().memoizedState}function $de(t,e,r){var n=N0(t);if(r={lane:n,action:r,hasEagerState:!1,eagerState:null,next:null},xW(t))vW(e,r);else if(r=Zz(t,e,r,n),r!==null){var a=Ul();Ed(r,t,n,a),yW(r,e,n)}}function Kde(t,e,r){var n=N0(t),a={lane:n,action:r,hasEagerState:!1,eagerState:null,next:null};if(xW(t))vW(e,a);else{var s=t.alternate;if(t.lanes===0&&(s===null||s.lanes===0)&&(s=e.lastRenderedReducer,s!==null))try{var i=e.lastRenderedState,l=s(i,r);if(a.hasEagerState=!0,a.eagerState=l,Pd(l,i)){var c=e.interleaved;c===null?(a.next=a,KF(e)):(a.next=c.next,c.next=a),e.interleaved=a;return}}catch{}finally{}r=Zz(t,e,a,n),r!==null&&(a=Ul(),Ed(r,t,n,a),yW(r,e,n))}}function xW(t){var e=t.alternate;return t===Ts||e!==null&&e===Ts}function vW(t,e){Ty=fE=!0;var r=t.pending;r===null?e.next=e:(e.next=r.next,r.next=e),t.pending=e}function yW(t,e,r){if(r&4194240){var n=e.lanes;n&=t.pendingLanes,r|=n,e.lanes=r,PF(t,r)}}var AE={readContext:$u,useCallback:Yo,useContext:Yo,useEffect:Yo,useImperativeHandle:Yo,useInsertionEffect:Yo,useLayoutEffect:Yo,useMemo:Yo,useReducer:Yo,useRef:Yo,useState:Yo,useDebugValue:Yo,useDeferredValue:Yo,useTransition:Yo,useMutableSource:Yo,useSyncExternalStore:Yo,useId:Yo,unstable_isNewReconciler:!1},Gde={readContext:$u,useCallback:function(t,e){return df().memoizedState=[t,e===void 0?null:e],t},useContext:$u,useEffect:sL,useImperativeHandle:function(t,e,r){return r=r!=null?r.concat([t]):null,A_(4194308,4,fW.bind(null,e,t),r)},useLayoutEffect:function(t,e){return A_(4194308,4,t,e)},useInsertionEffect:function(t,e){return A_(4,2,t,e)},useMemo:function(t,e){var r=df();return e=e===void 0?null:e,t=t(),r.memoizedState=[t,e],t},useReducer:function(t,e,r){var n=df();return e=r!==void 0?r(e):e,n.memoizedState=n.baseState=e,t={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:t,lastRenderedState:e},n.queue=t,t=t.dispatch=$de.bind(null,Ts,t),[n.memoizedState,t]},useRef:function(t){var e=df();return t={current:t},e.memoizedState=t},useState:aL,useDebugValue:eO,useDeferredValue:function(t){return df().memoizedState=t},useTransition:function(){var t=aL(!1),e=t[0];return t=Hde.bind(null,t[1]),df().memoizedState=t,[e,t]},useMutableSource:function(){},useSyncExternalStore:function(t,e,r){var n=Ts,a=df();if(fs){if(r===void 0)throw Error(pr(407));r=r()}else{if(r=e(),mo===null)throw Error(pr(349));vp&30||aW(n,e,r)}a.memoizedState=r;var s={value:r,getSnapshot:e};return a.queue=s,sL(iW.bind(null,n,s,t),[t]),n.flags|=2048,Sb(9,sW.bind(null,n,s,r,e),void 0,null),r},useId:function(){var t=df(),e=mo.identifierPrefix;if(fs){var r=fA,n=dA;r=(n&~(1<<32-_d(n)-1)).toString(32)+r,e=":"+e+"R"+r,r=_b++,0<r&&(e+="H"+r.toString(32)),e+=":"}else r=Vde++,e=":"+e+"r"+r.toString(32)+":";return t.memoizedState=e},unstable_isNewReconciler:!1},qde={readContext:$u,useCallback:hW,useContext:$u,useEffect:ZF,useImperativeHandle:AW,useInsertionEffect:uW,useLayoutEffect:dW,useMemo:mW,useReducer:_j,useRef:cW,useState:function(){return _j(Eb)},useDebugValue:eO,useDeferredValue:function(t){var e=Ku();return pW(e,ki.memoizedState,t)},useTransition:function(){var t=_j(Eb)[0],e=Ku().memoizedState;return[t,e]},useMutableSource:rW,useSyncExternalStore:nW,useId:gW,unstable_isNewReconciler:!1},zde={readContext:$u,useCallback:hW,useContext:$u,useEffect:ZF,useImperativeHandle:AW,useInsertionEffect:uW,useLayoutEffect:dW,useMemo:mW,useReducer:Ej,useRef:cW,useState:function(){return Ej(Eb)},useDebugValue:eO,useDeferredValue:function(t){var e=Ku();return ki===null?e.memoizedState=t:pW(e,ki.memoizedState,t)},useTransition:function(){var t=Ej(Eb)[0],e=Ku().memoizedState;return[t,e]},useMutableSource:rW,useSyncExternalStore:nW,useId:gW,unstable_isNewReconciler:!1};function md(t,e){if(t&&t.defaultProps){e=ks({},e),t=t.defaultProps;for(var r in t)e[r]===void 0&&(e[r]=t[r]);return e}return e}function vP(t,e,r,n){e=t.memoizedState,r=r(n,e),r=r==null?e:ks({},e,r),t.memoizedState=r,t.lanes===0&&(t.updateQueue.baseState=r)}var NI={isMounted:function(t){return(t=t._reactInternals)?Wp(t)===t:!1},enqueueSetState:function(t,e,r){t=t._reactInternals;var n=Ul(),a=N0(t),s=yA(n,a);s.payload=e,r!=null&&(s.callback=r),e=b0(t,s,a),e!==null&&(Ed(e,t,a,n),d_(e,t,a))},enqueueReplaceState:function(t,e,r){t=t._reactInternals;var n=Ul(),a=N0(t),s=yA(n,a);s.tag=1,s.payload=e,r!=null&&(s.callback=r),e=b0(t,s,a),e!==null&&(Ed(e,t,a,n),d_(e,t,a))},enqueueForceUpdate:function(t,e){t=t._reactInternals;var r=Ul(),n=N0(t),a=yA(r,n);a.tag=2,e!=null&&(a.callback=e),e=b0(t,a,n),e!==null&&(Ed(e,t,n,r),d_(e,t,n))}};function iL(t,e,r,n,a,s,i){return t=t.stateNode,typeof t.shouldComponentUpdate=="function"?t.shouldComponentUpdate(n,s,i):e.prototype&&e.prototype.isPureReactComponent?!vb(r,n)||!vb(a,s):!0}function bW(t,e,r){var n=!1,a=D0,s=e.contextType;return typeof s=="object"&&s!==null?s=$u(s):(a=fc(e)?gp:vl.current,n=e.contextTypes,s=(n=n!=null)?Gx(t,a):D0),e=new e(r,s),t.memoizedState=e.state!==null&&e.state!==void 0?e.state:null,e.updater=NI,t.stateNode=e,e._reactInternals=t,n&&(t=t.stateNode,t.__reactInternalMemoizedUnmaskedChildContext=a,t.__reactInternalMemoizedMaskedChildContext=s),e}function oL(t,e,r,n){t=e.state,typeof e.componentWillReceiveProps=="function"&&e.componentWillReceiveProps(r,n),typeof e.UNSAFE_componentWillReceiveProps=="function"&&e.UNSAFE_componentWillReceiveProps(r,n),e.state!==t&&NI.enqueueReplaceState(e,e.state,null)}function yP(t,e,r,n){var a=t.stateNode;a.props=r,a.state=t.memoizedState,a.refs={},GF(t);var s=e.contextType;typeof s=="object"&&s!==null?a.context=$u(s):(s=fc(e)?gp:vl.current,a.context=Gx(t,s)),a.state=t.memoizedState,s=e.getDerivedStateFromProps,typeof s=="function"&&(vP(t,e,s,r),a.state=t.memoizedState),typeof e.getDerivedStateFromProps=="function"||typeof a.getSnapshotBeforeUpdate=="function"||typeof a.UNSAFE_componentWillMount!="function"&&typeof a.componentWillMount!="function"||(e=a.state,typeof a.componentWillMount=="function"&&a.componentWillMount(),typeof a.UNSAFE_componentWillMount=="function"&&a.UNSAFE_componentWillMount(),e!==a.state&&NI.enqueueReplaceState(a,a.state,null),uE(t,r,a,n),a.state=t.memoizedState),typeof a.componentDidMount=="function"&&(t.flags|=4194308)}function Xx(t,e){try{var r="",n=e;do r+=wue(n),n=n.return;while(n);var a=r}catch(s){a=`
Error generating stack: `+s.message+`
`+s.stack}return{value:t,source:e,stack:a,digest:null}}function Sj(t,e,r){return{value:t,source:null,stack:r??null,digest:e??null}}function bP(t,e){try{console.error(e.value)}catch(r){setTimeout(function(){throw r})}}var Wde=typeof WeakMap=="function"?WeakMap:Map;function wW(t,e,r){r=yA(-1,r),r.tag=3,r.payload={element:null};var n=e.value;return r.callback=function(){mE||(mE=!0,PP=n),bP(t,e)},r}function NW(t,e,r){r=yA(-1,r),r.tag=3;var n=t.type.getDerivedStateFromError;if(typeof n=="function"){var a=e.value;r.payload=function(){return n(a)},r.callback=function(){bP(t,e)}}var s=t.stateNode;return s!==null&&typeof s.componentDidCatch=="function"&&(r.callback=function(){bP(t,e),typeof n!="function"&&(w0===null?w0=new Set([this]):w0.add(this));var i=e.stack;this.componentDidCatch(e.value,{componentStack:i!==null?i:""})}),r}function lL(t,e,r){var n=t.pingCache;if(n===null){n=t.pingCache=new Wde;var a=new Set;n.set(e,a)}else a=n.get(e),a===void 0&&(a=new Set,n.set(e,a));a.has(r)||(a.add(r),t=cfe.bind(null,t,e,r),e.then(t,t))}function cL(t){do{var e;if((e=t.tag===13)&&(e=t.memoizedState,e=e!==null?e.dehydrated!==null:!0),e)return t;t=t.return}while(t!==null);return null}function uL(t,e,r,n,a){return t.mode&1?(t.flags|=65536,t.lanes=a,t):(t===e?t.flags|=65536:(t.flags|=128,r.flags|=131072,r.flags&=-52805,r.tag===1&&(r.alternate===null?r.tag=17:(e=yA(-1,1),e.tag=2,b0(r,e,1))),r.lanes|=1),t)}var Xde=WA.ReactCurrentOwner,lc=!1;function Fl(t,e,r,n){e.child=t===null?Jz(e,null,r,n):zx(e,t.child,r,n)}function dL(t,e,r,n,a){r=r.render;var s=e.ref;return Tx(e,a),n=YF(t,e,r,n,s,a),r=JF(),t!==null&&!lc?(e.updateQueue=t.updateQueue,e.flags&=-2053,t.lanes&=~a,FA(t,e,a)):(fs&&r&&LF(e),e.flags|=1,Fl(t,e,n,a),e.child)}function fL(t,e,r,n,a){if(t===null){var s=r.type;return typeof s=="function"&&!lO(s)&&s.defaultProps===void 0&&r.compare===null&&r.defaultProps===void 0?(e.tag=15,e.type=s,CW(t,e,s,n,a)):(t=g_(r.type,null,n,e,e.mode,a),t.ref=e.ref,t.return=e,e.child=t)}if(s=t.child,!(t.lanes&a)){var i=s.memoizedProps;if(r=r.compare,r=r!==null?r:vb,r(i,n)&&t.ref===e.ref)return FA(t,e,a)}return e.flags|=1,t=C0(s,n),t.ref=e.ref,t.return=e,e.child=t}function CW(t,e,r,n,a){if(t!==null){var s=t.memoizedProps;if(vb(s,n)&&t.ref===e.ref)if(lc=!1,e.pendingProps=n=s,(t.lanes&a)!==0)t.flags&131072&&(lc=!0);else return e.lanes=t.lanes,FA(t,e,a)}return wP(t,e,r,n,a)}function _W(t,e,r){var n=e.pendingProps,a=n.children,s=t!==null?t.memoizedState:null;if(n.mode==="hidden")if(!(e.mode&1))e.memoizedState={baseLanes:0,cachePool:null,transitions:null},$a(xx,Dc),Dc|=r;else{if(!(r&1073741824))return t=s!==null?s.baseLanes|r:r,e.lanes=e.childLanes=1073741824,e.memoizedState={baseLanes:t,cachePool:null,transitions:null},e.updateQueue=null,$a(xx,Dc),Dc|=t,null;e.memoizedState={baseLanes:0,cachePool:null,transitions:null},n=s!==null?s.baseLanes:r,$a(xx,Dc),Dc|=n}else s!==null?(n=s.baseLanes|r,e.memoizedState=null):n=r,$a(xx,Dc),Dc|=n;return Fl(t,e,a,r),e.child}function EW(t,e){var r=e.ref;(t===null&&r!==null||t!==null&&t.ref!==r)&&(e.flags|=512,e.flags|=2097152)}function wP(t,e,r,n,a){var s=fc(r)?gp:vl.current;return s=Gx(e,s),Tx(e,a),r=YF(t,e,r,n,s,a),n=JF(),t!==null&&!lc?(e.updateQueue=t.updateQueue,e.flags&=-2053,t.lanes&=~a,FA(t,e,a)):(fs&&n&&LF(e),e.flags|=1,Fl(t,e,r,a),e.child)}function AL(t,e,r,n,a){if(fc(r)){var s=!0;sE(e)}else s=!1;if(Tx(e,a),e.stateNode===null)h_(t,e),bW(e,r,n),yP(e,r,n,a),n=!0;else if(t===null){var i=e.stateNode,l=e.memoizedProps;i.props=l;var c=i.context,u=r.contextType;typeof u=="object"&&u!==null?u=$u(u):(u=fc(r)?gp:vl.current,u=Gx(e,u));var d=r.getDerivedStateFromProps,f=typeof d=="function"||typeof i.getSnapshotBeforeUpdate=="function";f||typeof i.UNSAFE_componentWillReceiveProps!="function"&&typeof i.componentWillReceiveProps!="function"||(l!==n||c!==u)&&oL(e,i,n,u),Gh=!1;var h=e.memoizedState;i.state=h,uE(e,n,i,a),c=e.memoizedState,l!==n||h!==c||dc.current||Gh?(typeof d=="function"&&(vP(e,r,d,n),c=e.memoizedState),(l=Gh||iL(e,r,l,n,h,c,u))?(f||typeof i.UNSAFE_componentWillMount!="function"&&typeof i.componentWillMount!="function"||(typeof i.componentWillMount=="function"&&i.componentWillMount(),typeof i.UNSAFE_componentWillMount=="function"&&i.UNSAFE_componentWillMount()),typeof i.componentDidMount=="function"&&(e.flags|=4194308)):(typeof i.componentDidMount=="function"&&(e.flags|=4194308),e.memoizedProps=n,e.memoizedState=c),i.props=n,i.state=c,i.context=u,n=l):(typeof i.componentDidMount=="function"&&(e.flags|=4194308),n=!1)}else{i=e.stateNode,eW(t,e),l=e.memoizedProps,u=e.type===e.elementType?l:md(e.type,l),i.props=u,f=e.pendingProps,h=i.context,c=r.contextType,typeof c=="object"&&c!==null?c=$u(c):(c=fc(r)?gp:vl.current,c=Gx(e,c));var A=r.getDerivedStateFromProps;(d=typeof A=="function"||typeof i.getSnapshotBeforeUpdate=="function")||typeof i.UNSAFE_componentWillReceiveProps!="function"&&typeof i.componentWillReceiveProps!="function"||(l!==f||h!==c)&&oL(e,i,n,c),Gh=!1,h=e.memoizedState,i.state=h,uE(e,n,i,a);var m=e.memoizedState;l!==f||h!==m||dc.current||Gh?(typeof A=="function"&&(vP(e,r,A,n),m=e.memoizedState),(u=Gh||iL(e,r,u,n,h,m,c)||!1)?(d||typeof i.UNSAFE_componentWillUpdate!="function"&&typeof i.componentWillUpdate!="function"||(typeof i.componentWillUpdate=="function"&&i.componentWillUpdate(n,m,c),typeof i.UNSAFE_componentWillUpdate=="function"&&i.UNSAFE_componentWillUpdate(n,m,c)),typeof i.componentDidUpdate=="function"&&(e.flags|=4),typeof i.getSnapshotBeforeUpdate=="function"&&(e.flags|=1024)):(typeof i.componentDidUpdate!="function"||l===t.memoizedProps&&h===t.memoizedState||(e.flags|=4),typeof i.getSnapshotBeforeUpdate!="function"||l===t.memoizedProps&&h===t.memoizedState||(e.flags|=1024),e.memoizedProps=n,e.memoizedState=m),i.props=n,i.state=m,i.context=c,n=u):(typeof i.componentDidUpdate!="function"||l===t.memoizedProps&&h===t.memoizedState||(e.flags|=4),typeof i.getSnapshotBeforeUpdate!="function"||l===t.memoizedProps&&h===t.memoizedState||(e.flags|=1024),n=!1)}return NP(t,e,r,n,s,a)}function NP(t,e,r,n,a,s){EW(t,e);var i=(e.flags&128)!==0;if(!n&&!i)return a&&JM(e,r,!1),FA(t,e,s);n=e.stateNode,Xde.current=e;var l=i&&typeof r.getDerivedStateFromError!="function"?null:n.render();return e.flags|=1,t!==null&&i?(e.child=zx(e,t.child,null,s),e.child=zx(e,null,l,s)):Fl(t,e,l,s),e.memoizedState=n.state,a&&JM(e,r,!0),e.child}function SW(t){var e=t.stateNode;e.pendingContext?YM(t,e.pendingContext,e.pendingContext!==e.context):e.context&&YM(t,e.context,!1),qF(t,e.containerInfo)}function hL(t,e,r,n,a){return qx(),QF(a),e.flags|=256,Fl(t,e,r,n),e.child}var CP={dehydrated:null,treeContext:null,retryLane:0};function _P(t){return{baseLanes:t,cachePool:null,transitions:null}}function IW(t,e,r){var n=e.pendingProps,a=js.current,s=!1,i=(e.flags&128)!==0,l;if((l=i)||(l=t!==null&&t.memoizedState===null?!1:(a&2)!==0),l?(s=!0,e.flags&=-129):(t===null||t.memoizedState!==null)&&(a|=1),$a(js,a&1),t===null)return gP(e),t=e.memoizedState,t!==null&&(t=t.dehydrated,t!==null)?(e.mode&1?t.data==="$!"?e.lanes=8:e.lanes=1073741824:e.lanes=1,null):(i=n.children,t=n.fallback,s?(n=e.mode,s=e.child,i={mode:"hidden",children:i},!(n&1)&&s!==null?(s.childLanes=0,s.pendingProps=i):s=EI(i,n,0,null),t=ep(t,n,r,null),s.return=e,t.return=e,s.sibling=t,e.child=s,e.child.memoizedState=_P(r),e.memoizedState=CP,t):tO(e,i));if(a=t.memoizedState,a!==null&&(l=a.dehydrated,l!==null))return Yde(t,e,i,n,l,a,r);if(s){s=n.fallback,i=e.mode,a=t.child,l=a.sibling;var c={mode:"hidden",children:n.children};return!(i&1)&&e.child!==a?(n=e.child,n.childLanes=0,n.pendingProps=c,e.deletions=null):(n=C0(a,c),n.subtreeFlags=a.subtreeFlags&14680064),l!==null?s=C0(l,s):(s=ep(s,i,r,null),s.flags|=2),s.return=e,n.return=e,n.sibling=s,e.child=n,n=s,s=e.child,i=t.child.memoizedState,i=i===null?_P(r):{baseLanes:i.baseLanes|r,cachePool:null,transitions:i.transitions},s.memoizedState=i,s.childLanes=t.childLanes&~r,e.memoizedState=CP,n}return s=t.child,t=s.sibling,n=C0(s,{mode:"visible",children:n.children}),!(e.mode&1)&&(n.lanes=r),n.return=e,n.sibling=null,t!==null&&(r=e.deletions,r===null?(e.deletions=[t],e.flags|=16):r.push(t)),e.child=n,e.memoizedState=null,n}function tO(t,e){return e=EI({mode:"visible",children:e},t.mode,0,null),e.return=t,t.child=e}function pN(t,e,r,n){return n!==null&&QF(n),zx(e,t.child,null,r),t=tO(e,e.pendingProps.children),t.flags|=2,e.memoizedState=null,t}function Yde(t,e,r,n,a,s,i){if(r)return e.flags&256?(e.flags&=-257,n=Sj(Error(pr(422))),pN(t,e,i,n)):e.memoizedState!==null?(e.child=t.child,e.flags|=128,null):(s=n.fallback,a=e.mode,n=EI({mode:"visible",children:n.children},a,0,null),s=ep(s,a,i,null),s.flags|=2,n.return=e,s.return=e,n.sibling=s,e.child=n,e.mode&1&&zx(e,t.child,null,i),e.child.memoizedState=_P(i),e.memoizedState=CP,s);if(!(e.mode&1))return pN(t,e,i,null);if(a.data==="$!"){if(n=a.nextSibling&&a.nextSibling.dataset,n)var l=n.dgst;return n=l,s=Error(pr(419)),n=Sj(s,n,void 0),pN(t,e,i,n)}if(l=(i&t.childLanes)!==0,lc||l){if(n=mo,n!==null){switch(i&-i){case 4:a=2;break;case 16:a=8;break;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:a=32;break;case 536870912:a=268435456;break;default:a=0}a=a&(n.suspendedLanes|i)?0:a,a!==0&&a!==s.retryLane&&(s.retryLane=a,kA(t,a),Ed(n,t,a,-1))}return oO(),n=Sj(Error(pr(421))),pN(t,e,i,n)}return a.data==="$?"?(e.flags|=128,e.child=t.child,e=ufe.bind(null,t),a._reactRetry=e,null):(t=s.treeContext,Hc=y0(a.nextSibling),qc=e,fs=!0,gd=null,t!==null&&(Pu[Tu++]=dA,Pu[Tu++]=fA,Pu[Tu++]=xp,dA=t.id,fA=t.overflow,xp=e),e=tO(e,n.children),e.flags|=4096,e)}function mL(t,e,r){t.lanes|=e;var n=t.alternate;n!==null&&(n.lanes|=e),xP(t.return,e,r)}function Ij(t,e,r,n,a){var s=t.memoizedState;s===null?t.memoizedState={isBackwards:e,rendering:null,renderingStartTime:0,last:n,tail:r,tailMode:a}:(s.isBackwards=e,s.rendering=null,s.renderingStartTime=0,s.last=n,s.tail=r,s.tailMode=a)}function jW(t,e,r){var n=e.pendingProps,a=n.revealOrder,s=n.tail;if(Fl(t,e,n.children,r),n=js.current,n&2)n=n&1|2,e.flags|=128;else{if(t!==null&&t.flags&128)e:for(t=e.child;t!==null;){if(t.tag===13)t.memoizedState!==null&&mL(t,r,e);else if(t.tag===19)mL(t,r,e);else if(t.child!==null){t.child.return=t,t=t.child;continue}if(t===e)break e;for(;t.sibling===null;){if(t.return===null||t.return===e)break e;t=t.return}t.sibling.return=t.return,t=t.sibling}n&=1}if($a(js,n),!(e.mode&1))e.memoizedState=null;else switch(a){case"forwards":for(r=e.child,a=null;r!==null;)t=r.alternate,t!==null&&dE(t)===null&&(a=r),r=r.sibling;r=a,r===null?(a=e.child,e.child=null):(a=r.sibling,r.sibling=null),Ij(e,!1,a,r,s);break;case"backwards":for(r=null,a=e.child,e.child=null;a!==null;){if(t=a.alternate,t!==null&&dE(t)===null){e.child=a;break}t=a.sibling,a.sibling=r,r=a,a=t}Ij(e,!0,r,null,s);break;case"together":Ij(e,!1,null,null,void 0);break;default:e.memoizedState=null}return e.child}function h_(t,e){!(e.mode&1)&&t!==null&&(t.alternate=null,e.alternate=null,e.flags|=2)}function FA(t,e,r){if(t!==null&&(e.dependencies=t.dependencies),yp|=e.lanes,!(r&e.childLanes))return null;if(t!==null&&e.child!==t.child)throw Error(pr(153));if(e.child!==null){for(t=e.child,r=C0(t,t.pendingProps),e.child=r,r.return=e;t.sibling!==null;)t=t.sibling,r=r.sibling=C0(t,t.pendingProps),r.return=e;r.sibling=null}return e.child}function Jde(t,e,r){switch(e.tag){case 3:SW(e),qx();break;case 5:tW(e);break;case 1:fc(e.type)&&sE(e);break;case 4:qF(e,e.stateNode.containerInfo);break;case 10:var n=e.type._context,a=e.memoizedProps.value;$a(lE,n._currentValue),n._currentValue=a;break;case 13:if(n=e.memoizedState,n!==null)return n.dehydrated!==null?($a(js,js.current&1),e.flags|=128,null):r&e.child.childLanes?IW(t,e,r):($a(js,js.current&1),t=FA(t,e,r),t!==null?t.sibling:null);$a(js,js.current&1);break;case 19:if(n=(r&e.childLanes)!==0,t.flags&128){if(n)return jW(t,e,r);e.flags|=128}if(a=e.memoizedState,a!==null&&(a.rendering=null,a.tail=null,a.lastEffect=null),$a(js,js.current),n)break;return null;case 22:case 23:return e.lanes=0,_W(t,e,r)}return FA(t,e,r)}var BW,EP,PW,TW;BW=function(t,e){for(var r=e.child;r!==null;){if(r.tag===5||r.tag===6)t.appendChild(r.stateNode);else if(r.tag!==4&&r.child!==null){r.child.return=r,r=r.child;continue}if(r===e)break;for(;r.sibling===null;){if(r.return===null||r.return===e)return;r=r.return}r.sibling.return=r.return,r=r.sibling}};EP=function(){};PW=function(t,e,r,n){var a=t.memoizedProps;if(a!==n){t=e.stateNode,$m(bf.current);var s=null;switch(r){case"input":a=zB(t,a),n=zB(t,n),s=[];break;case"select":a=ks({},a,{value:void 0}),n=ks({},n,{value:void 0}),s=[];break;case"textarea":a=YB(t,a),n=YB(t,n),s=[];break;default:typeof a.onClick!="function"&&typeof n.onClick=="function"&&(t.onclick=nE)}ZB(r,n);var i;r=null;for(u in a)if(!n.hasOwnProperty(u)&&a.hasOwnProperty(u)&&a[u]!=null)if(u==="style"){var l=a[u];for(i in l)l.hasOwnProperty(i)&&(r||(r={}),r[i]="")}else u!=="dangerouslySetInnerHTML"&&u!=="children"&&u!=="suppressContentEditableWarning"&&u!=="suppressHydrationWarning"&&u!=="autoFocus"&&(fb.hasOwnProperty(u)?s||(s=[]):(s=s||[]).push(u,null));for(u in n){var c=n[u];if(l=a!=null?a[u]:void 0,n.hasOwnProperty(u)&&c!==l&&(c!=null||l!=null))if(u==="style")if(l){for(i in l)!l.hasOwnProperty(i)||c&&c.hasOwnProperty(i)||(r||(r={}),r[i]="");for(i in c)c.hasOwnProperty(i)&&l[i]!==c[i]&&(r||(r={}),r[i]=c[i])}else r||(s||(s=[]),s.push(u,r)),r=c;else u==="dangerouslySetInnerHTML"?(c=c?c.__html:void 0,l=l?l.__html:void 0,c!=null&&l!==c&&(s=s||[]).push(u,c)):u==="children"?typeof c!="string"&&typeof c!="number"||(s=s||[]).push(u,""+c):u!=="suppressContentEditableWarning"&&u!=="suppressHydrationWarning"&&(fb.hasOwnProperty(u)?(c!=null&&u==="onScroll"&&Wa("scroll",t),s||l===c||(s=[])):(s=s||[]).push(u,c))}r&&(s=s||[]).push("style",r);var u=s;(e.updateQueue=u)&&(e.flags|=4)}};TW=function(t,e,r,n){r!==n&&(e.flags|=4)};function C1(t,e){if(!fs)switch(t.tailMode){case"hidden":e=t.tail;for(var r=null;e!==null;)e.alternate!==null&&(r=e),e=e.sibling;r===null?t.tail=null:r.sibling=null;break;case"collapsed":r=t.tail;for(var n=null;r!==null;)r.alternate!==null&&(n=r),r=r.sibling;n===null?e||t.tail===null?t.tail=null:t.tail.sibling=null:n.sibling=null}}function Jo(t){var e=t.alternate!==null&&t.alternate.child===t.child,r=0,n=0;if(e)for(var a=t.child;a!==null;)r|=a.lanes|a.childLanes,n|=a.subtreeFlags&14680064,n|=a.flags&14680064,a.return=t,a=a.sibling;else for(a=t.child;a!==null;)r|=a.lanes|a.childLanes,n|=a.subtreeFlags,n|=a.flags,a.return=t,a=a.sibling;return t.subtreeFlags|=n,t.childLanes=r,e}function Zde(t,e,r){var n=e.pendingProps;switch(UF(e),e.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return Jo(e),null;case 1:return fc(e.type)&&aE(),Jo(e),null;case 3:return n=e.stateNode,Wx(),rs(dc),rs(vl),WF(),n.pendingContext&&(n.context=n.pendingContext,n.pendingContext=null),(t===null||t.child===null)&&(hN(e)?e.flags|=4:t===null||t.memoizedState.isDehydrated&&!(e.flags&256)||(e.flags|=1024,gd!==null&&(FP(gd),gd=null))),EP(t,e),Jo(e),null;case 5:zF(e);var a=$m(Cb.current);if(r=e.type,t!==null&&e.stateNode!=null)PW(t,e,r,n,a),t.ref!==e.ref&&(e.flags|=512,e.flags|=2097152);else{if(!n){if(e.stateNode===null)throw Error(pr(166));return Jo(e),null}if(t=$m(bf.current),hN(e)){n=e.stateNode,r=e.type;var s=e.memoizedProps;switch(n[ff]=e,n[wb]=s,t=(e.mode&1)!==0,r){case"dialog":Wa("cancel",n),Wa("close",n);break;case"iframe":case"object":case"embed":Wa("load",n);break;case"video":case"audio":for(a=0;a<ay.length;a++)Wa(ay[a],n);break;case"source":Wa("error",n);break;case"img":case"image":case"link":Wa("error",n),Wa("load",n);break;case"details":Wa("toggle",n);break;case"input":CM(n,s),Wa("invalid",n);break;case"select":n._wrapperState={wasMultiple:!!s.multiple},Wa("invalid",n);break;case"textarea":EM(n,s),Wa("invalid",n)}ZB(r,s),a=null;for(var i in s)if(s.hasOwnProperty(i)){var l=s[i];i==="children"?typeof l=="string"?n.textContent!==l&&(s.suppressHydrationWarning!==!0&&AN(n.textContent,l,t),a=["children",l]):typeof l=="number"&&n.textContent!==""+l&&(s.suppressHydrationWarning!==!0&&AN(n.textContent,l,t),a=["children",""+l]):fb.hasOwnProperty(i)&&l!=null&&i==="onScroll"&&Wa("scroll",n)}switch(r){case"input":sN(n),_M(n,s,!0);break;case"textarea":sN(n),SM(n);break;case"select":case"option":break;default:typeof s.onClick=="function"&&(n.onclick=nE)}n=a,e.updateQueue=n,n!==null&&(e.flags|=4)}else{i=a.nodeType===9?a:a.ownerDocument,t==="http://www.w3.org/1999/xhtml"&&(t=iz(r)),t==="http://www.w3.org/1999/xhtml"?r==="script"?(t=i.createElement("div"),t.innerHTML="<script><\/script>",t=t.removeChild(t.firstChild)):typeof n.is=="string"?t=i.createElement(r,{is:n.is}):(t=i.createElement(r),r==="select"&&(i=t,n.multiple?i.multiple=!0:n.size&&(i.size=n.size))):t=i.createElementNS(t,r),t[ff]=e,t[wb]=n,BW(t,e,!1,!1),e.stateNode=t;e:{switch(i=eP(r,n),r){case"dialog":Wa("cancel",t),Wa("close",t),a=n;break;case"iframe":case"object":case"embed":Wa("load",t),a=n;break;case"video":case"audio":for(a=0;a<ay.length;a++)Wa(ay[a],t);a=n;break;case"source":Wa("error",t),a=n;break;case"img":case"image":case"link":Wa("error",t),Wa("load",t),a=n;break;case"details":Wa("toggle",t),a=n;break;case"input":CM(t,n),a=zB(t,n),Wa("invalid",t);break;case"option":a=n;break;case"select":t._wrapperState={wasMultiple:!!n.multiple},a=ks({},n,{value:void 0}),Wa("invalid",t);break;case"textarea":EM(t,n),a=YB(t,n),Wa("invalid",t);break;default:a=n}ZB(r,a),l=a;for(s in l)if(l.hasOwnProperty(s)){var c=l[s];s==="style"?cz(t,c):s==="dangerouslySetInnerHTML"?(c=c?c.__html:void 0,c!=null&&oz(t,c)):s==="children"?typeof c=="string"?(r!=="textarea"||c!=="")&&Ab(t,c):typeof c=="number"&&Ab(t,""+c):s!=="suppressContentEditableWarning"&&s!=="suppressHydrationWarning"&&s!=="autoFocus"&&(fb.hasOwnProperty(s)?c!=null&&s==="onScroll"&&Wa("scroll",t):c!=null&&_F(t,s,c,i))}switch(r){case"input":sN(t),_M(t,n,!1);break;case"textarea":sN(t),SM(t);break;case"option":n.value!=null&&t.setAttribute("value",""+O0(n.value));break;case"select":t.multiple=!!n.multiple,s=n.value,s!=null?Ix(t,!!n.multiple,s,!1):n.defaultValue!=null&&Ix(t,!!n.multiple,n.defaultValue,!0);break;default:typeof a.onClick=="function"&&(t.onclick=nE)}switch(r){case"button":case"input":case"select":case"textarea":n=!!n.autoFocus;break e;case"img":n=!0;break e;default:n=!1}}n&&(e.flags|=4)}e.ref!==null&&(e.flags|=512,e.flags|=2097152)}return Jo(e),null;case 6:if(t&&e.stateNode!=null)TW(t,e,t.memoizedProps,n);else{if(typeof n!="string"&&e.stateNode===null)throw Error(pr(166));if(r=$m(Cb.current),$m(bf.current),hN(e)){if(n=e.stateNode,r=e.memoizedProps,n[ff]=e,(s=n.nodeValue!==r)&&(t=qc,t!==null))switch(t.tag){case 3:AN(n.nodeValue,r,(t.mode&1)!==0);break;case 5:t.memoizedProps.suppressHydrationWarning!==!0&&AN(n.nodeValue,r,(t.mode&1)!==0)}s&&(e.flags|=4)}else n=(r.nodeType===9?r:r.ownerDocument).createTextNode(n),n[ff]=e,e.stateNode=n}return Jo(e),null;case 13:if(rs(js),n=e.memoizedState,t===null||t.memoizedState!==null&&t.memoizedState.dehydrated!==null){if(fs&&Hc!==null&&e.mode&1&&!(e.flags&128))Xz(),qx(),e.flags|=98560,s=!1;else if(s=hN(e),n!==null&&n.dehydrated!==null){if(t===null){if(!s)throw Error(pr(318));if(s=e.memoizedState,s=s!==null?s.dehydrated:null,!s)throw Error(pr(317));s[ff]=e}else qx(),!(e.flags&128)&&(e.memoizedState=null),e.flags|=4;Jo(e),s=!1}else gd!==null&&(FP(gd),gd=null),s=!0;if(!s)return e.flags&65536?e:null}return e.flags&128?(e.lanes=r,e):(n=n!==null,n!==(t!==null&&t.memoizedState!==null)&&n&&(e.child.flags|=8192,e.mode&1&&(t===null||js.current&1?Vi===0&&(Vi=3):oO())),e.updateQueue!==null&&(e.flags|=4),Jo(e),null);case 4:return Wx(),EP(t,e),t===null&&yb(e.stateNode.containerInfo),Jo(e),null;case 10:return $F(e.type._context),Jo(e),null;case 17:return fc(e.type)&&aE(),Jo(e),null;case 19:if(rs(js),s=e.memoizedState,s===null)return Jo(e),null;if(n=(e.flags&128)!==0,i=s.rendering,i===null)if(n)C1(s,!1);else{if(Vi!==0||t!==null&&t.flags&128)for(t=e.child;t!==null;){if(i=dE(t),i!==null){for(e.flags|=128,C1(s,!1),n=i.updateQueue,n!==null&&(e.updateQueue=n,e.flags|=4),e.subtreeFlags=0,n=r,r=e.child;r!==null;)s=r,t=n,s.flags&=14680066,i=s.alternate,i===null?(s.childLanes=0,s.lanes=t,s.child=null,s.subtreeFlags=0,s.memoizedProps=null,s.memoizedState=null,s.updateQueue=null,s.dependencies=null,s.stateNode=null):(s.childLanes=i.childLanes,s.lanes=i.lanes,s.child=i.child,s.subtreeFlags=0,s.deletions=null,s.memoizedProps=i.memoizedProps,s.memoizedState=i.memoizedState,s.updateQueue=i.updateQueue,s.type=i.type,t=i.dependencies,s.dependencies=t===null?null:{lanes:t.lanes,firstContext:t.firstContext}),r=r.sibling;return $a(js,js.current&1|2),e.child}t=t.sibling}s.tail!==null&&ii()>Yx&&(e.flags|=128,n=!0,C1(s,!1),e.lanes=4194304)}else{if(!n)if(t=dE(i),t!==null){if(e.flags|=128,n=!0,r=t.updateQueue,r!==null&&(e.updateQueue=r,e.flags|=4),C1(s,!0),s.tail===null&&s.tailMode==="hidden"&&!i.alternate&&!fs)return Jo(e),null}else 2*ii()-s.renderingStartTime>Yx&&r!==1073741824&&(e.flags|=128,n=!0,C1(s,!1),e.lanes=4194304);s.isBackwards?(i.sibling=e.child,e.child=i):(r=s.last,r!==null?r.sibling=i:e.child=i,s.last=i)}return s.tail!==null?(e=s.tail,s.rendering=e,s.tail=e.sibling,s.renderingStartTime=ii(),e.sibling=null,r=js.current,$a(js,n?r&1|2:r&1),e):(Jo(e),null);case 22:case 23:return iO(),n=e.memoizedState!==null,t!==null&&t.memoizedState!==null!==n&&(e.flags|=8192),n&&e.mode&1?Dc&1073741824&&(Jo(e),e.subtreeFlags&6&&(e.flags|=8192)):Jo(e),null;case 24:return null;case 25:return null}throw Error(pr(156,e.tag))}function efe(t,e){switch(UF(e),e.tag){case 1:return fc(e.type)&&aE(),t=e.flags,t&65536?(e.flags=t&-65537|128,e):null;case 3:return Wx(),rs(dc),rs(vl),WF(),t=e.flags,t&65536&&!(t&128)?(e.flags=t&-65537|128,e):null;case 5:return zF(e),null;case 13:if(rs(js),t=e.memoizedState,t!==null&&t.dehydrated!==null){if(e.alternate===null)throw Error(pr(340));qx()}return t=e.flags,t&65536?(e.flags=t&-65537|128,e):null;case 19:return rs(js),null;case 4:return Wx(),null;case 10:return $F(e.type._context),null;case 22:case 23:return iO(),null;case 24:return null;default:return null}}var gN=!1,Al=!1,tfe=typeof WeakSet=="function"?WeakSet:Set,Dr=null;function gx(t,e){var r=t.ref;if(r!==null)if(typeof r=="function")try{r(null)}catch(n){$s(t,e,n)}else r.current=null}function SP(t,e,r){try{r()}catch(n){$s(t,e,n)}}var pL=!1;function rfe(t,e){if(uP=eE,t=Rz(),MF(t)){if("selectionStart"in t)var r={start:t.selectionStart,end:t.selectionEnd};else e:{r=(r=t.ownerDocument)&&r.defaultView||window;var n=r.getSelection&&r.getSelection();if(n&&n.rangeCount!==0){r=n.anchorNode;var a=n.anchorOffset,s=n.focusNode;n=n.focusOffset;try{r.nodeType,s.nodeType}catch{r=null;break e}var i=0,l=-1,c=-1,u=0,d=0,f=t,h=null;t:for(;;){for(var A;f!==r||a!==0&&f.nodeType!==3||(l=i+a),f!==s||n!==0&&f.nodeType!==3||(c=i+n),f.nodeType===3&&(i+=f.nodeValue.length),(A=f.firstChild)!==null;)h=f,f=A;for(;;){if(f===t)break t;if(h===r&&++u===a&&(l=i),h===s&&++d===n&&(c=i),(A=f.nextSibling)!==null)break;f=h,h=f.parentNode}f=A}r=l===-1||c===-1?null:{start:l,end:c}}else r=null}r=r||{start:0,end:0}}else r=null;for(dP={focusedElem:t,selectionRange:r},eE=!1,Dr=e;Dr!==null;)if(e=Dr,t=e.child,(e.subtreeFlags&1028)!==0&&t!==null)t.return=e,Dr=t;else for(;Dr!==null;){e=Dr;try{var m=e.alternate;if(e.flags&1024)switch(e.tag){case 0:case 11:case 15:break;case 1:if(m!==null){var p=m.memoizedProps,g=m.memoizedState,x=e.stateNode,y=x.getSnapshotBeforeUpdate(e.elementType===e.type?p:md(e.type,p),g);x.__reactInternalSnapshotBeforeUpdate=y}break;case 3:var b=e.stateNode.containerInfo;b.nodeType===1?b.textContent="":b.nodeType===9&&b.documentElement&&b.removeChild(b.documentElement);break;case 5:case 6:case 4:case 17:break;default:throw Error(pr(163))}}catch(w){$s(e,e.return,w)}if(t=e.sibling,t!==null){t.return=e.return,Dr=t;break}Dr=e.return}return m=pL,pL=!1,m}function ky(t,e,r){var n=e.updateQueue;if(n=n!==null?n.lastEffect:null,n!==null){var a=n=n.next;do{if((a.tag&t)===t){var s=a.destroy;a.destroy=void 0,s!==void 0&&SP(e,r,s)}a=a.next}while(a!==n)}}function CI(t,e){if(e=e.updateQueue,e=e!==null?e.lastEffect:null,e!==null){var r=e=e.next;do{if((r.tag&t)===t){var n=r.create;r.destroy=n()}r=r.next}while(r!==e)}}function IP(t){var e=t.ref;if(e!==null){var r=t.stateNode;switch(t.tag){case 5:t=r;break;default:t=r}typeof e=="function"?e(t):e.current=t}}function kW(t){var e=t.alternate;e!==null&&(t.alternate=null,kW(e)),t.child=null,t.deletions=null,t.sibling=null,t.tag===5&&(e=t.stateNode,e!==null&&(delete e[ff],delete e[wb],delete e[hP],delete e[Mde],delete e[Lde])),t.stateNode=null,t.return=null,t.dependencies=null,t.memoizedProps=null,t.memoizedState=null,t.pendingProps=null,t.stateNode=null,t.updateQueue=null}function FW(t){return t.tag===5||t.tag===3||t.tag===4}function gL(t){e:for(;;){for(;t.sibling===null;){if(t.return===null||FW(t.return))return null;t=t.return}for(t.sibling.return=t.return,t=t.sibling;t.tag!==5&&t.tag!==6&&t.tag!==18;){if(t.flags&2||t.child===null||t.tag===4)continue e;t.child.return=t,t=t.child}if(!(t.flags&2))return t.stateNode}}function jP(t,e,r){var n=t.tag;if(n===5||n===6)t=t.stateNode,e?r.nodeType===8?r.parentNode.insertBefore(t,e):r.insertBefore(t,e):(r.nodeType===8?(e=r.parentNode,e.insertBefore(t,r)):(e=r,e.appendChild(t)),r=r._reactRootContainer,r!=null||e.onclick!==null||(e.onclick=nE));else if(n!==4&&(t=t.child,t!==null))for(jP(t,e,r),t=t.sibling;t!==null;)jP(t,e,r),t=t.sibling}function BP(t,e,r){var n=t.tag;if(n===5||n===6)t=t.stateNode,e?r.insertBefore(t,e):r.appendChild(t);else if(n!==4&&(t=t.child,t!==null))for(BP(t,e,r),t=t.sibling;t!==null;)BP(t,e,r),t=t.sibling}var ko=null,pd=!1;function jh(t,e,r){for(r=r.child;r!==null;)OW(t,e,r),r=r.sibling}function OW(t,e,r){if(yf&&typeof yf.onCommitFiberUnmount=="function")try{yf.onCommitFiberUnmount(pI,r)}catch{}switch(r.tag){case 5:Al||gx(r,e);case 6:var n=ko,a=pd;ko=null,jh(t,e,r),ko=n,pd=a,ko!==null&&(pd?(t=ko,r=r.stateNode,t.nodeType===8?t.parentNode.removeChild(r):t.removeChild(r)):ko.removeChild(r.stateNode));break;case 18:ko!==null&&(pd?(t=ko,r=r.stateNode,t.nodeType===8?bj(t.parentNode,r):t.nodeType===1&&bj(t,r),gb(t)):bj(ko,r.stateNode));break;case 4:n=ko,a=pd,ko=r.stateNode.containerInfo,pd=!0,jh(t,e,r),ko=n,pd=a;break;case 0:case 11:case 14:case 15:if(!Al&&(n=r.updateQueue,n!==null&&(n=n.lastEffect,n!==null))){a=n=n.next;do{var s=a,i=s.destroy;s=s.tag,i!==void 0&&(s&2||s&4)&&SP(r,e,i),a=a.next}while(a!==n)}jh(t,e,r);break;case 1:if(!Al&&(gx(r,e),n=r.stateNode,typeof n.componentWillUnmount=="function"))try{n.props=r.memoizedProps,n.state=r.memoizedState,n.componentWillUnmount()}catch(l){$s(r,e,l)}jh(t,e,r);break;case 21:jh(t,e,r);break;case 22:r.mode&1?(Al=(n=Al)||r.memoizedState!==null,jh(t,e,r),Al=n):jh(t,e,r);break;default:jh(t,e,r)}}function xL(t){var e=t.updateQueue;if(e!==null){t.updateQueue=null;var r=t.stateNode;r===null&&(r=t.stateNode=new tfe),e.forEach(function(n){var a=dfe.bind(null,t,n);r.has(n)||(r.add(n),n.then(a,a))})}}function od(t,e){var r=e.deletions;if(r!==null)for(var n=0;n<r.length;n++){var a=r[n];try{var s=t,i=e,l=i;e:for(;l!==null;){switch(l.tag){case 5:ko=l.stateNode,pd=!1;break e;case 3:ko=l.stateNode.containerInfo,pd=!0;break e;case 4:ko=l.stateNode.containerInfo,pd=!0;break e}l=l.return}if(ko===null)throw Error(pr(160));OW(s,i,a),ko=null,pd=!1;var c=a.alternate;c!==null&&(c.return=null),a.return=null}catch(u){$s(a,e,u)}}if(e.subtreeFlags&12854)for(e=e.child;e!==null;)DW(e,t),e=e.sibling}function DW(t,e){var r=t.alternate,n=t.flags;switch(t.tag){case 0:case 11:case 14:case 15:if(od(e,t),Zd(t),n&4){try{ky(3,t,t.return),CI(3,t)}catch(p){$s(t,t.return,p)}try{ky(5,t,t.return)}catch(p){$s(t,t.return,p)}}break;case 1:od(e,t),Zd(t),n&512&&r!==null&&gx(r,r.return);break;case 5:if(od(e,t),Zd(t),n&512&&r!==null&&gx(r,r.return),t.flags&32){var a=t.stateNode;try{Ab(a,"")}catch(p){$s(t,t.return,p)}}if(n&4&&(a=t.stateNode,a!=null)){var s=t.memoizedProps,i=r!==null?r.memoizedProps:s,l=t.type,c=t.updateQueue;if(t.updateQueue=null,c!==null)try{l==="input"&&s.type==="radio"&&s.name!=null&&az(a,s),eP(l,i);var u=eP(l,s);for(i=0;i<c.length;i+=2){var d=c[i],f=c[i+1];d==="style"?cz(a,f):d==="dangerouslySetInnerHTML"?oz(a,f):d==="children"?Ab(a,f):_F(a,d,f,u)}switch(l){case"input":WB(a,s);break;case"textarea":sz(a,s);break;case"select":var h=a._wrapperState.wasMultiple;a._wrapperState.wasMultiple=!!s.multiple;var A=s.value;A!=null?Ix(a,!!s.multiple,A,!1):h!==!!s.multiple&&(s.defaultValue!=null?Ix(a,!!s.multiple,s.defaultValue,!0):Ix(a,!!s.multiple,s.multiple?[]:"",!1))}a[wb]=s}catch(p){$s(t,t.return,p)}}break;case 6:if(od(e,t),Zd(t),n&4){if(t.stateNode===null)throw Error(pr(162));a=t.stateNode,s=t.memoizedProps;try{a.nodeValue=s}catch(p){$s(t,t.return,p)}}break;case 3:if(od(e,t),Zd(t),n&4&&r!==null&&r.memoizedState.isDehydrated)try{gb(e.containerInfo)}catch(p){$s(t,t.return,p)}break;case 4:od(e,t),Zd(t);break;case 13:od(e,t),Zd(t),a=t.child,a.flags&8192&&(s=a.memoizedState!==null,a.stateNode.isHidden=s,!s||a.alternate!==null&&a.alternate.memoizedState!==null||(aO=ii())),n&4&&xL(t);break;case 22:if(d=r!==null&&r.memoizedState!==null,t.mode&1?(Al=(u=Al)||d,od(e,t),Al=u):od(e,t),Zd(t),n&8192){if(u=t.memoizedState!==null,(t.stateNode.isHidden=u)&&!d&&t.mode&1)for(Dr=t,d=t.child;d!==null;){for(f=Dr=d;Dr!==null;){switch(h=Dr,A=h.child,h.tag){case 0:case 11:case 14:case 15:ky(4,h,h.return);break;case 1:gx(h,h.return);var m=h.stateNode;if(typeof m.componentWillUnmount=="function"){n=h,r=h.return;try{e=n,m.props=e.memoizedProps,m.state=e.memoizedState,m.componentWillUnmount()}catch(p){$s(n,r,p)}}break;case 5:gx(h,h.return);break;case 22:if(h.memoizedState!==null){yL(f);continue}}A!==null?(A.return=h,Dr=A):yL(f)}d=d.sibling}e:for(d=null,f=t;;){if(f.tag===5){if(d===null){d=f;try{a=f.stateNode,u?(s=a.style,typeof s.setProperty=="function"?s.setProperty("display","none","important"):s.display="none"):(l=f.stateNode,c=f.memoizedProps.style,i=c!=null&&c.hasOwnProperty("display")?c.display:null,l.style.display=lz("display",i))}catch(p){$s(t,t.return,p)}}}else if(f.tag===6){if(d===null)try{f.stateNode.nodeValue=u?"":f.memoizedProps}catch(p){$s(t,t.return,p)}}else if((f.tag!==22&&f.tag!==23||f.memoizedState===null||f===t)&&f.child!==null){f.child.return=f,f=f.child;continue}if(f===t)break e;for(;f.sibling===null;){if(f.return===null||f.return===t)break e;d===f&&(d=null),f=f.return}d===f&&(d=null),f.sibling.return=f.return,f=f.sibling}}break;case 19:od(e,t),Zd(t),n&4&&xL(t);break;case 21:break;default:od(e,t),Zd(t)}}function Zd(t){var e=t.flags;if(e&2){try{e:{for(var r=t.return;r!==null;){if(FW(r)){var n=r;break e}r=r.return}throw Error(pr(160))}switch(n.tag){case 5:var a=n.stateNode;n.flags&32&&(Ab(a,""),n.flags&=-33);var s=gL(t);BP(t,s,a);break;case 3:case 4:var i=n.stateNode.containerInfo,l=gL(t);jP(t,l,i);break;default:throw Error(pr(161))}}catch(c){$s(t,t.return,c)}t.flags&=-3}e&4096&&(t.flags&=-4097)}function nfe(t,e,r){Dr=t,RW(t)}function RW(t,e,r){for(var n=(t.mode&1)!==0;Dr!==null;){var a=Dr,s=a.child;if(a.tag===22&&n){var i=a.memoizedState!==null||gN;if(!i){var l=a.alternate,c=l!==null&&l.memoizedState!==null||Al;l=gN;var u=Al;if(gN=i,(Al=c)&&!u)for(Dr=a;Dr!==null;)i=Dr,c=i.child,i.tag===22&&i.memoizedState!==null?bL(a):c!==null?(c.return=i,Dr=c):bL(a);for(;s!==null;)Dr=s,RW(s),s=s.sibling;Dr=a,gN=l,Al=u}vL(t)}else a.subtreeFlags&8772&&s!==null?(s.return=a,Dr=s):vL(t)}}function vL(t){for(;Dr!==null;){var e=Dr;if(e.flags&8772){var r=e.alternate;try{if(e.flags&8772)switch(e.tag){case 0:case 11:case 15:Al||CI(5,e);break;case 1:var n=e.stateNode;if(e.flags&4&&!Al)if(r===null)n.componentDidMount();else{var a=e.elementType===e.type?r.memoizedProps:md(e.type,r.memoizedProps);n.componentDidUpdate(a,r.memoizedState,n.__reactInternalSnapshotBeforeUpdate)}var s=e.updateQueue;s!==null&&nL(e,s,n);break;case 3:var i=e.updateQueue;if(i!==null){if(r=null,e.child!==null)switch(e.child.tag){case 5:r=e.child.stateNode;break;case 1:r=e.child.stateNode}nL(e,i,r)}break;case 5:var l=e.stateNode;if(r===null&&e.flags&4){r=l;var c=e.memoizedProps;switch(e.type){case"button":case"input":case"select":case"textarea":c.autoFocus&&r.focus();break;case"img":c.src&&(r.src=c.src)}}break;case 6:break;case 4:break;case 12:break;case 13:if(e.memoizedState===null){var u=e.alternate;if(u!==null){var d=u.memoizedState;if(d!==null){var f=d.dehydrated;f!==null&&gb(f)}}}break;case 19:case 17:case 21:case 22:case 23:case 25:break;default:throw Error(pr(163))}Al||e.flags&512&&IP(e)}catch(h){$s(e,e.return,h)}}if(e===t){Dr=null;break}if(r=e.sibling,r!==null){r.return=e.return,Dr=r;break}Dr=e.return}}function yL(t){for(;Dr!==null;){var e=Dr;if(e===t){Dr=null;break}var r=e.sibling;if(r!==null){r.return=e.return,Dr=r;break}Dr=e.return}}function bL(t){for(;Dr!==null;){var e=Dr;try{switch(e.tag){case 0:case 11:case 15:var r=e.return;try{CI(4,e)}catch(c){$s(e,r,c)}break;case 1:var n=e.stateNode;if(typeof n.componentDidMount=="function"){var a=e.return;try{n.componentDidMount()}catch(c){$s(e,a,c)}}var s=e.return;try{IP(e)}catch(c){$s(e,s,c)}break;case 5:var i=e.return;try{IP(e)}catch(c){$s(e,i,c)}}}catch(c){$s(e,e.return,c)}if(e===t){Dr=null;break}var l=e.sibling;if(l!==null){l.return=e.return,Dr=l;break}Dr=e.return}}var afe=Math.ceil,hE=WA.ReactCurrentDispatcher,rO=WA.ReactCurrentOwner,Uu=WA.ReactCurrentBatchConfig,zn=0,mo=null,yi=null,Go=0,Dc=0,xx=Z0(0),Vi=0,Ib=null,yp=0,_I=0,nO=0,Fy=null,ic=null,aO=0,Yx=1/0,sA=null,mE=!1,PP=null,w0=null,xN=!1,l0=null,pE=0,Oy=0,TP=null,m_=-1,p_=0;function Ul(){return zn&6?ii():m_!==-1?m_:m_=ii()}function N0(t){return t.mode&1?zn&2&&Go!==0?Go&-Go:Qde.transition!==null?(p_===0&&(p_=bz()),p_):(t=_a,t!==0||(t=window.event,t=t===void 0?16:Iz(t.type)),t):1}function Ed(t,e,r,n){if(50<Oy)throw Oy=0,TP=null,Error(pr(185));k2(t,r,n),(!(zn&2)||t!==mo)&&(t===mo&&(!(zn&2)&&(_I|=r),Vi===4&&Jh(t,Go)),Ac(t,n),r===1&&zn===0&&!(e.mode&1)&&(Yx=ii()+500,bI&&em()))}function Ac(t,e){var r=t.callbackNode;Que(t,e);var n=Z_(t,t===mo?Go:0);if(n===0)r!==null&&BM(r),t.callbackNode=null,t.callbackPriority=0;else if(e=n&-n,t.callbackPriority!==e){if(r!=null&&BM(r),e===1)t.tag===0?Ude(wL.bind(null,t)):qz(wL.bind(null,t)),Dde(function(){!(zn&6)&&em()}),r=null;else{switch(wz(n)){case 1:r=BF;break;case 4:r=vz;break;case 16:r=J_;break;case 536870912:r=yz;break;default:r=J_}r=KW(r,MW.bind(null,t))}t.callbackPriority=e,t.callbackNode=r}}function MW(t,e){if(m_=-1,p_=0,zn&6)throw Error(pr(327));var r=t.callbackNode;if(kx()&&t.callbackNode!==r)return null;var n=Z_(t,t===mo?Go:0);if(n===0)return null;if(n&30||n&t.expiredLanes||e)e=gE(t,n);else{e=n;var a=zn;zn|=2;var s=UW();(mo!==t||Go!==e)&&(sA=null,Yx=ii()+500,Zm(t,e));do try{ofe();break}catch(l){LW(t,l)}while(!0);HF(),hE.current=s,zn=a,yi!==null?e=0:(mo=null,Go=0,e=Vi)}if(e!==0){if(e===2&&(a=sP(t),a!==0&&(n=a,e=kP(t,a))),e===1)throw r=Ib,Zm(t,0),Jh(t,n),Ac(t,ii()),r;if(e===6)Jh(t,n);else{if(a=t.current.alternate,!(n&30)&&!sfe(a)&&(e=gE(t,n),e===2&&(s=sP(t),s!==0&&(n=s,e=kP(t,s))),e===1))throw r=Ib,Zm(t,0),Jh(t,n),Ac(t,ii()),r;switch(t.finishedWork=a,t.finishedLanes=n,e){case 0:case 1:throw Error(pr(345));case 2:Sm(t,ic,sA);break;case 3:if(Jh(t,n),(n&130023424)===n&&(e=aO+500-ii(),10<e)){if(Z_(t,0)!==0)break;if(a=t.suspendedLanes,(a&n)!==n){Ul(),t.pingedLanes|=t.suspendedLanes&a;break}t.timeoutHandle=AP(Sm.bind(null,t,ic,sA),e);break}Sm(t,ic,sA);break;case 4:if(Jh(t,n),(n&4194240)===n)break;for(e=t.eventTimes,a=-1;0<n;){var i=31-_d(n);s=1<<i,i=e[i],i>a&&(a=i),n&=~s}if(n=a,n=ii()-n,n=(120>n?120:480>n?480:1080>n?1080:1920>n?1920:3e3>n?3e3:4320>n?4320:1960*afe(n/1960))-n,10<n){t.timeoutHandle=AP(Sm.bind(null,t,ic,sA),n);break}Sm(t,ic,sA);break;case 5:Sm(t,ic,sA);break;default:throw Error(pr(329))}}}return Ac(t,ii()),t.callbackNode===r?MW.bind(null,t):null}function kP(t,e){var r=Fy;return t.current.memoizedState.isDehydrated&&(Zm(t,e).flags|=256),t=gE(t,e),t!==2&&(e=ic,ic=r,e!==null&&FP(e)),t}function FP(t){ic===null?ic=t:ic.push.apply(ic,t)}function sfe(t){for(var e=t;;){if(e.flags&16384){var r=e.updateQueue;if(r!==null&&(r=r.stores,r!==null))for(var n=0;n<r.length;n++){var a=r[n],s=a.getSnapshot;a=a.value;try{if(!Pd(s(),a))return!1}catch{return!1}}}if(r=e.child,e.subtreeFlags&16384&&r!==null)r.return=e,e=r;else{if(e===t)break;for(;e.sibling===null;){if(e.return===null||e.return===t)return!0;e=e.return}e.sibling.return=e.return,e=e.sibling}}return!0}function Jh(t,e){for(e&=~nO,e&=~_I,t.suspendedLanes|=e,t.pingedLanes&=~e,t=t.expirationTimes;0<e;){var r=31-_d(e),n=1<<r;t[r]=-1,e&=~n}}function wL(t){if(zn&6)throw Error(pr(327));kx();var e=Z_(t,0);if(!(e&1))return Ac(t,ii()),null;var r=gE(t,e);if(t.tag!==0&&r===2){var n=sP(t);n!==0&&(e=n,r=kP(t,n))}if(r===1)throw r=Ib,Zm(t,0),Jh(t,e),Ac(t,ii()),r;if(r===6)throw Error(pr(345));return t.finishedWork=t.current.alternate,t.finishedLanes=e,Sm(t,ic,sA),Ac(t,ii()),null}function sO(t,e){var r=zn;zn|=1;try{return t(e)}finally{zn=r,zn===0&&(Yx=ii()+500,bI&&em())}}function bp(t){l0!==null&&l0.tag===0&&!(zn&6)&&kx();var e=zn;zn|=1;var r=Uu.transition,n=_a;try{if(Uu.transition=null,_a=1,t)return t()}finally{_a=n,Uu.transition=r,zn=e,!(zn&6)&&em()}}function iO(){Dc=xx.current,rs(xx)}function Zm(t,e){t.finishedWork=null,t.finishedLanes=0;var r=t.timeoutHandle;if(r!==-1&&(t.timeoutHandle=-1,Ode(r)),yi!==null)for(r=yi.return;r!==null;){var n=r;switch(UF(n),n.tag){case 1:n=n.type.childContextTypes,n!=null&&aE();break;case 3:Wx(),rs(dc),rs(vl),WF();break;case 5:zF(n);break;case 4:Wx();break;case 13:rs(js);break;case 19:rs(js);break;case 10:$F(n.type._context);break;case 22:case 23:iO()}r=r.return}if(mo=t,yi=t=C0(t.current,null),Go=Dc=e,Vi=0,Ib=null,nO=_I=yp=0,ic=Fy=null,Hm!==null){for(e=0;e<Hm.length;e++)if(r=Hm[e],n=r.interleaved,n!==null){r.interleaved=null;var a=n.next,s=r.pending;if(s!==null){var i=s.next;s.next=a,n.next=i}r.pending=n}Hm=null}return t}function LW(t,e){do{var r=yi;try{if(HF(),f_.current=AE,fE){for(var n=Ts.memoizedState;n!==null;){var a=n.queue;a!==null&&(a.pending=null),n=n.next}fE=!1}if(vp=0,uo=ki=Ts=null,Ty=!1,_b=0,rO.current=null,r===null||r.return===null){Vi=1,Ib=e,yi=null;break}e:{var s=t,i=r.return,l=r,c=e;if(e=Go,l.flags|=32768,c!==null&&typeof c=="object"&&typeof c.then=="function"){var u=c,d=l,f=d.tag;if(!(d.mode&1)&&(f===0||f===11||f===15)){var h=d.alternate;h?(d.updateQueue=h.updateQueue,d.memoizedState=h.memoizedState,d.lanes=h.lanes):(d.updateQueue=null,d.memoizedState=null)}var A=cL(i);if(A!==null){A.flags&=-257,uL(A,i,l,s,e),A.mode&1&&lL(s,u,e),e=A,c=u;var m=e.updateQueue;if(m===null){var p=new Set;p.add(c),e.updateQueue=p}else m.add(c);break e}else{if(!(e&1)){lL(s,u,e),oO();break e}c=Error(pr(426))}}else if(fs&&l.mode&1){var g=cL(i);if(g!==null){!(g.flags&65536)&&(g.flags|=256),uL(g,i,l,s,e),QF(Xx(c,l));break e}}s=c=Xx(c,l),Vi!==4&&(Vi=2),Fy===null?Fy=[s]:Fy.push(s),s=i;do{switch(s.tag){case 3:s.flags|=65536,e&=-e,s.lanes|=e;var x=wW(s,c,e);rL(s,x);break e;case 1:l=c;var y=s.type,b=s.stateNode;if(!(s.flags&128)&&(typeof y.getDerivedStateFromError=="function"||b!==null&&typeof b.componentDidCatch=="function"&&(w0===null||!w0.has(b)))){s.flags|=65536,e&=-e,s.lanes|=e;var w=NW(s,l,e);rL(s,w);break e}}s=s.return}while(s!==null)}VW(r)}catch(j){e=j,yi===r&&r!==null&&(yi=r=r.return);continue}break}while(!0)}function UW(){var t=hE.current;return hE.current=AE,t===null?AE:t}function oO(){(Vi===0||Vi===3||Vi===2)&&(Vi=4),mo===null||!(yp&268435455)&&!(_I&268435455)||Jh(mo,Go)}function gE(t,e){var r=zn;zn|=2;var n=UW();(mo!==t||Go!==e)&&(sA=null,Zm(t,e));do try{ife();break}catch(a){LW(t,a)}while(!0);if(HF(),zn=r,hE.current=n,yi!==null)throw Error(pr(261));return mo=null,Go=0,Vi}function ife(){for(;yi!==null;)QW(yi)}function ofe(){for(;yi!==null&&!Tue();)QW(yi)}function QW(t){var e=$W(t.alternate,t,Dc);t.memoizedProps=t.pendingProps,e===null?VW(t):yi=e,rO.current=null}function VW(t){var e=t;do{var r=e.alternate;if(t=e.return,e.flags&32768){if(r=efe(r,e),r!==null){r.flags&=32767,yi=r;return}if(t!==null)t.flags|=32768,t.subtreeFlags=0,t.deletions=null;else{Vi=6,yi=null;return}}else if(r=Zde(r,e,Dc),r!==null){yi=r;return}if(e=e.sibling,e!==null){yi=e;return}yi=e=t}while(e!==null);Vi===0&&(Vi=5)}function Sm(t,e,r){var n=_a,a=Uu.transition;try{Uu.transition=null,_a=1,lfe(t,e,r,n)}finally{Uu.transition=a,_a=n}return null}function lfe(t,e,r,n){do kx();while(l0!==null);if(zn&6)throw Error(pr(327));r=t.finishedWork;var a=t.finishedLanes;if(r===null)return null;if(t.finishedWork=null,t.finishedLanes=0,r===t.current)throw Error(pr(177));t.callbackNode=null,t.callbackPriority=0;var s=r.lanes|r.childLanes;if(Vue(t,s),t===mo&&(yi=mo=null,Go=0),!(r.subtreeFlags&2064)&&!(r.flags&2064)||xN||(xN=!0,KW(J_,function(){return kx(),null})),s=(r.flags&15990)!==0,r.subtreeFlags&15990||s){s=Uu.transition,Uu.transition=null;var i=_a;_a=1;var l=zn;zn|=4,rO.current=null,rfe(t,r),DW(r,t),Ide(dP),eE=!!uP,dP=uP=null,t.current=r,nfe(r),kue(),zn=l,_a=i,Uu.transition=s}else t.current=r;if(xN&&(xN=!1,l0=t,pE=a),s=t.pendingLanes,s===0&&(w0=null),Due(r.stateNode),Ac(t,ii()),e!==null)for(n=t.onRecoverableError,r=0;r<e.length;r++)a=e[r],n(a.value,{componentStack:a.stack,digest:a.digest});if(mE)throw mE=!1,t=PP,PP=null,t;return pE&1&&t.tag!==0&&kx(),s=t.pendingLanes,s&1?t===TP?Oy++:(Oy=0,TP=t):Oy=0,em(),null}function kx(){if(l0!==null){var t=wz(pE),e=Uu.transition,r=_a;try{if(Uu.transition=null,_a=16>t?16:t,l0===null)var n=!1;else{if(t=l0,l0=null,pE=0,zn&6)throw Error(pr(331));var a=zn;for(zn|=4,Dr=t.current;Dr!==null;){var s=Dr,i=s.child;if(Dr.flags&16){var l=s.deletions;if(l!==null){for(var c=0;c<l.length;c++){var u=l[c];for(Dr=u;Dr!==null;){var d=Dr;switch(d.tag){case 0:case 11:case 15:ky(8,d,s)}var f=d.child;if(f!==null)f.return=d,Dr=f;else for(;Dr!==null;){d=Dr;var h=d.sibling,A=d.return;if(kW(d),d===u){Dr=null;break}if(h!==null){h.return=A,Dr=h;break}Dr=A}}}var m=s.alternate;if(m!==null){var p=m.child;if(p!==null){m.child=null;do{var g=p.sibling;p.sibling=null,p=g}while(p!==null)}}Dr=s}}if(s.subtreeFlags&2064&&i!==null)i.return=s,Dr=i;else e:for(;Dr!==null;){if(s=Dr,s.flags&2048)switch(s.tag){case 0:case 11:case 15:ky(9,s,s.return)}var x=s.sibling;if(x!==null){x.return=s.return,Dr=x;break e}Dr=s.return}}var y=t.current;for(Dr=y;Dr!==null;){i=Dr;var b=i.child;if(i.subtreeFlags&2064&&b!==null)b.return=i,Dr=b;else e:for(i=y;Dr!==null;){if(l=Dr,l.flags&2048)try{switch(l.tag){case 0:case 11:case 15:CI(9,l)}}catch(j){$s(l,l.return,j)}if(l===i){Dr=null;break e}var w=l.sibling;if(w!==null){w.return=l.return,Dr=w;break e}Dr=l.return}}if(zn=a,em(),yf&&typeof yf.onPostCommitFiberRoot=="function")try{yf.onPostCommitFiberRoot(pI,t)}catch{}n=!0}return n}finally{_a=r,Uu.transition=e}}return!1}function NL(t,e,r){e=Xx(r,e),e=wW(t,e,1),t=b0(t,e,1),e=Ul(),t!==null&&(k2(t,1,e),Ac(t,e))}function $s(t,e,r){if(t.tag===3)NL(t,t,r);else for(;e!==null;){if(e.tag===3){NL(e,t,r);break}else if(e.tag===1){var n=e.stateNode;if(typeof e.type.getDerivedStateFromError=="function"||typeof n.componentDidCatch=="function"&&(w0===null||!w0.has(n))){t=Xx(r,t),t=NW(e,t,1),e=b0(e,t,1),t=Ul(),e!==null&&(k2(e,1,t),Ac(e,t));break}}e=e.return}}function cfe(t,e,r){var n=t.pingCache;n!==null&&n.delete(e),e=Ul(),t.pingedLanes|=t.suspendedLanes&r,mo===t&&(Go&r)===r&&(Vi===4||Vi===3&&(Go&130023424)===Go&&500>ii()-aO?Zm(t,0):nO|=r),Ac(t,e)}function HW(t,e){e===0&&(t.mode&1?(e=lN,lN<<=1,!(lN&130023424)&&(lN=4194304)):e=1);var r=Ul();t=kA(t,e),t!==null&&(k2(t,e,r),Ac(t,r))}function ufe(t){var e=t.memoizedState,r=0;e!==null&&(r=e.retryLane),HW(t,r)}function dfe(t,e){var r=0;switch(t.tag){case 13:var n=t.stateNode,a=t.memoizedState;a!==null&&(r=a.retryLane);break;case 19:n=t.stateNode;break;default:throw Error(pr(314))}n!==null&&n.delete(e),HW(t,r)}var $W;$W=function(t,e,r){if(t!==null)if(t.memoizedProps!==e.pendingProps||dc.current)lc=!0;else{if(!(t.lanes&r)&&!(e.flags&128))return lc=!1,Jde(t,e,r);lc=!!(t.flags&131072)}else lc=!1,fs&&e.flags&1048576&&zz(e,oE,e.index);switch(e.lanes=0,e.tag){case 2:var n=e.type;h_(t,e),t=e.pendingProps;var a=Gx(e,vl.current);Tx(e,r),a=YF(null,e,n,t,a,r);var s=JF();return e.flags|=1,typeof a=="object"&&a!==null&&typeof a.render=="function"&&a.$$typeof===void 0?(e.tag=1,e.memoizedState=null,e.updateQueue=null,fc(n)?(s=!0,sE(e)):s=!1,e.memoizedState=a.state!==null&&a.state!==void 0?a.state:null,GF(e),a.updater=NI,e.stateNode=a,a._reactInternals=e,yP(e,n,t,r),e=NP(null,e,n,!0,s,r)):(e.tag=0,fs&&s&&LF(e),Fl(null,e,a,r),e=e.child),e;case 16:n=e.elementType;e:{switch(h_(t,e),t=e.pendingProps,a=n._init,n=a(n._payload),e.type=n,a=e.tag=Afe(n),t=md(n,t),a){case 0:e=wP(null,e,n,t,r);break e;case 1:e=AL(null,e,n,t,r);break e;case 11:e=dL(null,e,n,t,r);break e;case 14:e=fL(null,e,n,md(n.type,t),r);break e}throw Error(pr(306,n,""))}return e;case 0:return n=e.type,a=e.pendingProps,a=e.elementType===n?a:md(n,a),wP(t,e,n,a,r);case 1:return n=e.type,a=e.pendingProps,a=e.elementType===n?a:md(n,a),AL(t,e,n,a,r);case 3:e:{if(SW(e),t===null)throw Error(pr(387));n=e.pendingProps,s=e.memoizedState,a=s.element,eW(t,e),uE(e,n,null,r);var i=e.memoizedState;if(n=i.element,s.isDehydrated)if(s={element:n,isDehydrated:!1,cache:i.cache,pendingSuspenseBoundaries:i.pendingSuspenseBoundaries,transitions:i.transitions},e.updateQueue.baseState=s,e.memoizedState=s,e.flags&256){a=Xx(Error(pr(423)),e),e=hL(t,e,n,r,a);break e}else if(n!==a){a=Xx(Error(pr(424)),e),e=hL(t,e,n,r,a);break e}else for(Hc=y0(e.stateNode.containerInfo.firstChild),qc=e,fs=!0,gd=null,r=Jz(e,null,n,r),e.child=r;r;)r.flags=r.flags&-3|4096,r=r.sibling;else{if(qx(),n===a){e=FA(t,e,r);break e}Fl(t,e,n,r)}e=e.child}return e;case 5:return tW(e),t===null&&gP(e),n=e.type,a=e.pendingProps,s=t!==null?t.memoizedProps:null,i=a.children,fP(n,a)?i=null:s!==null&&fP(n,s)&&(e.flags|=32),EW(t,e),Fl(t,e,i,r),e.child;case 6:return t===null&&gP(e),null;case 13:return IW(t,e,r);case 4:return qF(e,e.stateNode.containerInfo),n=e.pendingProps,t===null?e.child=zx(e,null,n,r):Fl(t,e,n,r),e.child;case 11:return n=e.type,a=e.pendingProps,a=e.elementType===n?a:md(n,a),dL(t,e,n,a,r);case 7:return Fl(t,e,e.pendingProps,r),e.child;case 8:return Fl(t,e,e.pendingProps.children,r),e.child;case 12:return Fl(t,e,e.pendingProps.children,r),e.child;case 10:e:{if(n=e.type._context,a=e.pendingProps,s=e.memoizedProps,i=a.value,$a(lE,n._currentValue),n._currentValue=i,s!==null)if(Pd(s.value,i)){if(s.children===a.children&&!dc.current){e=FA(t,e,r);break e}}else for(s=e.child,s!==null&&(s.return=e);s!==null;){var l=s.dependencies;if(l!==null){i=s.child;for(var c=l.firstContext;c!==null;){if(c.context===n){if(s.tag===1){c=yA(-1,r&-r),c.tag=2;var u=s.updateQueue;if(u!==null){u=u.shared;var d=u.pending;d===null?c.next=c:(c.next=d.next,d.next=c),u.pending=c}}s.lanes|=r,c=s.alternate,c!==null&&(c.lanes|=r),xP(s.return,r,e),l.lanes|=r;break}c=c.next}}else if(s.tag===10)i=s.type===e.type?null:s.child;else if(s.tag===18){if(i=s.return,i===null)throw Error(pr(341));i.lanes|=r,l=i.alternate,l!==null&&(l.lanes|=r),xP(i,r,e),i=s.sibling}else i=s.child;if(i!==null)i.return=s;else for(i=s;i!==null;){if(i===e){i=null;break}if(s=i.sibling,s!==null){s.return=i.return,i=s;break}i=i.return}s=i}Fl(t,e,a.children,r),e=e.child}return e;case 9:return a=e.type,n=e.pendingProps.children,Tx(e,r),a=$u(a),n=n(a),e.flags|=1,Fl(t,e,n,r),e.child;case 14:return n=e.type,a=md(n,e.pendingProps),a=md(n.type,a),fL(t,e,n,a,r);case 15:return CW(t,e,e.type,e.pendingProps,r);case 17:return n=e.type,a=e.pendingProps,a=e.elementType===n?a:md(n,a),h_(t,e),e.tag=1,fc(n)?(t=!0,sE(e)):t=!1,Tx(e,r),bW(e,n,a),yP(e,n,a,r),NP(null,e,n,!0,t,r);case 19:return jW(t,e,r);case 22:return _W(t,e,r)}throw Error(pr(156,e.tag))};function KW(t,e){return xz(t,e)}function ffe(t,e,r,n){this.tag=t,this.key=r,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=e,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=n,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function Fu(t,e,r,n){return new ffe(t,e,r,n)}function lO(t){return t=t.prototype,!(!t||!t.isReactComponent)}function Afe(t){if(typeof t=="function")return lO(t)?1:0;if(t!=null){if(t=t.$$typeof,t===SF)return 11;if(t===IF)return 14}return 2}function C0(t,e){var r=t.alternate;return r===null?(r=Fu(t.tag,e,t.key,t.mode),r.elementType=t.elementType,r.type=t.type,r.stateNode=t.stateNode,r.alternate=t,t.alternate=r):(r.pendingProps=e,r.type=t.type,r.flags=0,r.subtreeFlags=0,r.deletions=null),r.flags=t.flags&14680064,r.childLanes=t.childLanes,r.lanes=t.lanes,r.child=t.child,r.memoizedProps=t.memoizedProps,r.memoizedState=t.memoizedState,r.updateQueue=t.updateQueue,e=t.dependencies,r.dependencies=e===null?null:{lanes:e.lanes,firstContext:e.firstContext},r.sibling=t.sibling,r.index=t.index,r.ref=t.ref,r}function g_(t,e,r,n,a,s){var i=2;if(n=t,typeof t=="function")lO(t)&&(i=1);else if(typeof t=="string")i=5;else e:switch(t){case lx:return ep(r.children,a,s,e);case EF:i=8,a|=8;break;case $B:return t=Fu(12,r,e,a|2),t.elementType=$B,t.lanes=s,t;case KB:return t=Fu(13,r,e,a),t.elementType=KB,t.lanes=s,t;case GB:return t=Fu(19,r,e,a),t.elementType=GB,t.lanes=s,t;case tz:return EI(r,a,s,e);default:if(typeof t=="object"&&t!==null)switch(t.$$typeof){case Zq:i=10;break e;case ez:i=9;break e;case SF:i=11;break e;case IF:i=14;break e;case Kh:i=16,n=null;break e}throw Error(pr(130,t==null?t:typeof t,""))}return e=Fu(i,r,e,a),e.elementType=t,e.type=n,e.lanes=s,e}function ep(t,e,r,n){return t=Fu(7,t,n,e),t.lanes=r,t}function EI(t,e,r,n){return t=Fu(22,t,n,e),t.elementType=tz,t.lanes=r,t.stateNode={isHidden:!1},t}function jj(t,e,r){return t=Fu(6,t,null,e),t.lanes=r,t}function Bj(t,e,r){return e=Fu(4,t.children!==null?t.children:[],t.key,e),e.lanes=r,e.stateNode={containerInfo:t.containerInfo,pendingChildren:null,implementation:t.implementation},e}function hfe(t,e,r,n,a){this.tag=e,this.containerInfo=t,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.pendingContext=this.context=null,this.callbackPriority=0,this.eventTimes=uj(0),this.expirationTimes=uj(-1),this.entangledLanes=this.finishedLanes=this.mutableReadLanes=this.expiredLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=uj(0),this.identifierPrefix=n,this.onRecoverableError=a,this.mutableSourceEagerHydrationData=null}function cO(t,e,r,n,a,s,i,l,c){return t=new hfe(t,e,r,l,c),e===1?(e=1,s===!0&&(e|=8)):e=0,s=Fu(3,null,null,e),t.current=s,s.stateNode=t,s.memoizedState={element:n,isDehydrated:r,cache:null,transitions:null,pendingSuspenseBoundaries:null},GF(s),t}function mfe(t,e,r){var n=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:ox,key:n==null?null:""+n,children:t,containerInfo:e,implementation:r}}function GW(t){if(!t)return D0;t=t._reactInternals;e:{if(Wp(t)!==t||t.tag!==1)throw Error(pr(170));var e=t;do{switch(e.tag){case 3:e=e.stateNode.context;break e;case 1:if(fc(e.type)){e=e.stateNode.__reactInternalMemoizedMergedChildContext;break e}}e=e.return}while(e!==null);throw Error(pr(171))}if(t.tag===1){var r=t.type;if(fc(r))return Gz(t,r,e)}return e}function qW(t,e,r,n,a,s,i,l,c){return t=cO(r,n,!0,t,a,s,i,l,c),t.context=GW(null),r=t.current,n=Ul(),a=N0(r),s=yA(n,a),s.callback=e??null,b0(r,s,a),t.current.lanes=a,k2(t,a,n),Ac(t,n),t}function SI(t,e,r,n){var a=e.current,s=Ul(),i=N0(a);return r=GW(r),e.context===null?e.context=r:e.pendingContext=r,e=yA(s,i),e.payload={element:t},n=n===void 0?null:n,n!==null&&(e.callback=n),t=b0(a,e,i),t!==null&&(Ed(t,a,i,s),d_(t,a,i)),i}function xE(t){if(t=t.current,!t.child)return null;switch(t.child.tag){case 5:return t.child.stateNode;default:return t.child.stateNode}}function CL(t,e){if(t=t.memoizedState,t!==null&&t.dehydrated!==null){var r=t.retryLane;t.retryLane=r!==0&&r<e?r:e}}function uO(t,e){CL(t,e),(t=t.alternate)&&CL(t,e)}function pfe(){return null}var zW=typeof reportError=="function"?reportError:function(t){console.error(t)};function dO(t){this._internalRoot=t}II.prototype.render=dO.prototype.render=function(t){var e=this._internalRoot;if(e===null)throw Error(pr(409));SI(t,e,null,null)};II.prototype.unmount=dO.prototype.unmount=function(){var t=this._internalRoot;if(t!==null){this._internalRoot=null;var e=t.containerInfo;bp(function(){SI(null,t,null,null)}),e[TA]=null}};function II(t){this._internalRoot=t}II.prototype.unstable_scheduleHydration=function(t){if(t){var e=_z();t={blockedOn:null,target:t,priority:e};for(var r=0;r<Yh.length&&e!==0&&e<Yh[r].priority;r++);Yh.splice(r,0,t),r===0&&Sz(t)}};function fO(t){return!(!t||t.nodeType!==1&&t.nodeType!==9&&t.nodeType!==11)}function jI(t){return!(!t||t.nodeType!==1&&t.nodeType!==9&&t.nodeType!==11&&(t.nodeType!==8||t.nodeValue!==" react-mount-point-unstable "))}function _L(){}function gfe(t,e,r,n,a){if(a){if(typeof n=="function"){var s=n;n=function(){var u=xE(i);s.call(u)}}var i=qW(e,n,t,0,null,!1,!1,"",_L);return t._reactRootContainer=i,t[TA]=i.current,yb(t.nodeType===8?t.parentNode:t),bp(),i}for(;a=t.lastChild;)t.removeChild(a);if(typeof n=="function"){var l=n;n=function(){var u=xE(c);l.call(u)}}var c=cO(t,0,!1,null,null,!1,!1,"",_L);return t._reactRootContainer=c,t[TA]=c.current,yb(t.nodeType===8?t.parentNode:t),bp(function(){SI(e,c,r,n)}),c}function BI(t,e,r,n,a){var s=r._reactRootContainer;if(s){var i=s;if(typeof a=="function"){var l=a;a=function(){var c=xE(i);l.call(c)}}SI(e,i,t,a)}else i=gfe(r,e,t,a,n);return xE(i)}Nz=function(t){switch(t.tag){case 3:var e=t.stateNode;if(e.current.memoizedState.isDehydrated){var r=ny(e.pendingLanes);r!==0&&(PF(e,r|1),Ac(e,ii()),!(zn&6)&&(Yx=ii()+500,em()))}break;case 13:bp(function(){var n=kA(t,1);if(n!==null){var a=Ul();Ed(n,t,1,a)}}),uO(t,1)}};TF=function(t){if(t.tag===13){var e=kA(t,134217728);if(e!==null){var r=Ul();Ed(e,t,134217728,r)}uO(t,134217728)}};Cz=function(t){if(t.tag===13){var e=N0(t),r=kA(t,e);if(r!==null){var n=Ul();Ed(r,t,e,n)}uO(t,e)}};_z=function(){return _a};Ez=function(t,e){var r=_a;try{return _a=t,e()}finally{_a=r}};rP=function(t,e,r){switch(e){case"input":if(WB(t,r),e=r.name,r.type==="radio"&&e!=null){for(r=t;r.parentNode;)r=r.parentNode;for(r=r.querySelectorAll("input[name="+JSON.stringify(""+e)+'][type="radio"]'),e=0;e<r.length;e++){var n=r[e];if(n!==t&&n.form===t.form){var a=yI(n);if(!a)throw Error(pr(90));nz(n),WB(n,a)}}}break;case"textarea":sz(t,r);break;case"select":e=r.value,e!=null&&Ix(t,!!r.multiple,e,!1)}};fz=sO;Az=bp;var xfe={usingClientEntryPoint:!1,Events:[O2,fx,yI,uz,dz,sO]},_1={findFiberByHostInstance:Vm,bundleType:0,version:"18.3.1",rendererPackageName:"react-dom"},vfe={bundleType:_1.bundleType,version:_1.version,rendererPackageName:_1.rendererPackageName,rendererConfig:_1.rendererConfig,overrideHookState:null,overrideHookStateDeletePath:null,overrideHookStateRenamePath:null,overrideProps:null,overridePropsDeletePath:null,overridePropsRenamePath:null,setErrorHandler:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:WA.ReactCurrentDispatcher,findHostInstanceByFiber:function(t){return t=pz(t),t===null?null:t.stateNode},findFiberByHostInstance:_1.findFiberByHostInstance||pfe,findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null,reconcilerVersion:"18.3.1-next-f1338f8080-20240426"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var vN=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!vN.isDisabled&&vN.supportsFiber)try{pI=vN.inject(vfe),yf=vN}catch{}}tu.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=xfe;tu.createPortal=function(t,e){var r=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!fO(e))throw Error(pr(200));return mfe(t,e,null,r)};tu.createRoot=function(t,e){if(!fO(t))throw Error(pr(299));var r=!1,n="",a=zW;return e!=null&&(e.unstable_strictMode===!0&&(r=!0),e.identifierPrefix!==void 0&&(n=e.identifierPrefix),e.onRecoverableError!==void 0&&(a=e.onRecoverableError)),e=cO(t,1,!1,null,null,r,!1,n,a),t[TA]=e.current,yb(t.nodeType===8?t.parentNode:t),new dO(e)};tu.findDOMNode=function(t){if(t==null)return null;if(t.nodeType===1)return t;var e=t._reactInternals;if(e===void 0)throw typeof t.render=="function"?Error(pr(188)):(t=Object.keys(t).join(","),Error(pr(268,t)));return t=pz(e),t=t===null?null:t.stateNode,t};tu.flushSync=function(t){return bp(t)};tu.hydrate=function(t,e,r){if(!jI(e))throw Error(pr(200));return BI(null,t,e,!0,r)};tu.hydrateRoot=function(t,e,r){if(!fO(t))throw Error(pr(405));var n=r!=null&&r.hydratedSources||null,a=!1,s="",i=zW;if(r!=null&&(r.unstable_strictMode===!0&&(a=!0),r.identifierPrefix!==void 0&&(s=r.identifierPrefix),r.onRecoverableError!==void 0&&(i=r.onRecoverableError)),e=qW(e,null,t,1,r??null,a,!1,s,i),t[TA]=e.current,yb(t),n)for(t=0;t<n.length;t++)r=n[t],a=r._getVersion,a=a(r._source),e.mutableSourceEagerHydrationData==null?e.mutableSourceEagerHydrationData=[r,a]:e.mutableSourceEagerHydrationData.push(r,a);return new II(e)};tu.render=function(t,e,r){if(!jI(e))throw Error(pr(200));return BI(null,t,e,!1,r)};tu.unmountComponentAtNode=function(t){if(!jI(t))throw Error(pr(40));return t._reactRootContainer?(bp(function(){BI(null,null,t,!1,function(){t._reactRootContainer=null,t[TA]=null})}),!0):!1};tu.unstable_batchedUpdates=sO;tu.unstable_renderSubtreeIntoContainer=function(t,e,r,n){if(!jI(r))throw Error(pr(200));if(t==null||t._reactInternals===void 0)throw Error(pr(38));return BI(t,e,r,!1,n)};tu.version="18.3.1-next-f1338f8080-20240426";function WW(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(WW)}catch(t){console.error(t)}}WW(),Wq.exports=tu;var zc=Wq.exports,EL=zc;VB.createRoot=EL.createRoot,VB.hydrateRoot=EL.hydrateRoot;/**
 * react-router v7.8.1
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */var SL="popstate";function yfe(t={}){function e(n,a){let{pathname:s,search:i,hash:l}=n.location;return OP("",{pathname:s,search:i,hash:l},a.state&&a.state.usr||null,a.state&&a.state.key||"default")}function r(n,a){return typeof a=="string"?a:jb(a)}return wfe(e,r,null,t)}function gs(t,e){if(t===!1||t===null||typeof t>"u")throw new Error(e)}function Td(t,e){if(!t){typeof console<"u"&&console.warn(e);try{throw new Error(e)}catch{}}}function bfe(){return Math.random().toString(36).substring(2,10)}function IL(t,e){return{usr:t.state,key:t.key,idx:e}}function OP(t,e,r=null,n){return{pathname:typeof t=="string"?t:t.pathname,search:"",hash:"",...typeof e=="string"?_v(e):e,state:r,key:e&&e.key||n||bfe()}}function jb({pathname:t="/",search:e="",hash:r=""}){return e&&e!=="?"&&(t+=e.charAt(0)==="?"?e:"?"+e),r&&r!=="#"&&(t+=r.charAt(0)==="#"?r:"#"+r),t}function _v(t){let e={};if(t){let r=t.indexOf("#");r>=0&&(e.hash=t.substring(r),t=t.substring(0,r));let n=t.indexOf("?");n>=0&&(e.search=t.substring(n),t=t.substring(0,n)),t&&(e.pathname=t)}return e}function wfe(t,e,r,n={}){let{window:a=document.defaultView,v5Compat:s=!1}=n,i=a.history,l="POP",c=null,u=d();u==null&&(u=0,i.replaceState({...i.state,idx:u},""));function d(){return(i.state||{idx:null}).idx}function f(){l="POP";let g=d(),x=g==null?null:g-u;u=g,c&&c({action:l,location:p.location,delta:x})}function h(g,x){l="PUSH";let y=OP(p.location,g,x);u=d()+1;let b=IL(y,u),w=p.createHref(y);try{i.pushState(b,"",w)}catch(j){if(j instanceof DOMException&&j.name==="DataCloneError")throw j;a.location.assign(w)}s&&c&&c({action:l,location:p.location,delta:1})}function A(g,x){l="REPLACE";let y=OP(p.location,g,x);u=d();let b=IL(y,u),w=p.createHref(y);i.replaceState(b,"",w),s&&c&&c({action:l,location:p.location,delta:0})}function m(g){return Nfe(g)}let p={get action(){return l},get location(){return t(a,i)},listen(g){if(c)throw new Error("A history only accepts one active listener");return a.addEventListener(SL,f),c=g,()=>{a.removeEventListener(SL,f),c=null}},createHref(g){return e(a,g)},createURL:m,encodeLocation(g){let x=m(g);return{pathname:x.pathname,search:x.search,hash:x.hash}},push:h,replace:A,go(g){return i.go(g)}};return p}function Nfe(t,e=!1){let r="http://localhost";typeof window<"u"&&(r=window.location.origin!=="null"?window.location.origin:window.location.href),gs(r,"No window.location.(origin|href) available to create URL");let n=typeof t=="string"?t:jb(t);return n=n.replace(/ $/,"%20"),!e&&n.startsWith("//")&&(n=r+n),new URL(n,r)}function XW(t,e,r="/"){return Cfe(t,e,r,!1)}function Cfe(t,e,r,n){let a=typeof e=="string"?_v(e):e,s=OA(a.pathname||"/",r);if(s==null)return null;let i=YW(t);_fe(i);let l=null;for(let c=0;l==null&&c<i.length;++c){let u=Dfe(s);l=Ffe(i[c],u,n)}return l}function YW(t,e=[],r=[],n="",a=!1){let s=(i,l,c=a,u)=>{let d={relativePath:u===void 0?i.path||"":u,caseSensitive:i.caseSensitive===!0,childrenIndex:l,route:i};if(d.relativePath.startsWith("/")){if(!d.relativePath.startsWith(n)&&c)return;gs(d.relativePath.startsWith(n),`Absolute route path "${d.relativePath}" nested under path "${n}" is not valid. An absolute child route path must start with the combined path of all its parent routes.`),d.relativePath=d.relativePath.slice(n.length)}let f=bA([n,d.relativePath]),h=r.concat(d);i.children&&i.children.length>0&&(gs(i.index!==!0,`Index routes must not have child routes. Please remove all child routes from route path "${f}".`),YW(i.children,e,h,f,c)),!(i.path==null&&!i.index)&&e.push({path:f,score:Tfe(f,i.index),routesMeta:h})};return t.forEach((i,l)=>{var c;if(i.path===""||!((c=i.path)!=null&&c.includes("?")))s(i,l);else for(let u of JW(i.path))s(i,l,!0,u)}),e}function JW(t){let e=t.split("/");if(e.length===0)return[];let[r,...n]=e,a=r.endsWith("?"),s=r.replace(/\?$/,"");if(n.length===0)return a?[s,""]:[s];let i=JW(n.join("/")),l=[];return l.push(...i.map(c=>c===""?s:[s,c].join("/"))),a&&l.push(...i),l.map(c=>t.startsWith("/")&&c===""?"/":c)}function _fe(t){t.sort((e,r)=>e.score!==r.score?r.score-e.score:kfe(e.routesMeta.map(n=>n.childrenIndex),r.routesMeta.map(n=>n.childrenIndex)))}var Efe=/^:[\w-]+$/,Sfe=3,Ife=2,jfe=1,Bfe=10,Pfe=-2,jL=t=>t==="*";function Tfe(t,e){let r=t.split("/"),n=r.length;return r.some(jL)&&(n+=Pfe),e&&(n+=Ife),r.filter(a=>!jL(a)).reduce((a,s)=>a+(Efe.test(s)?Sfe:s===""?jfe:Bfe),n)}function kfe(t,e){return t.length===e.length&&t.slice(0,-1).every((n,a)=>n===e[a])?t[t.length-1]-e[e.length-1]:0}function Ffe(t,e,r=!1){let{routesMeta:n}=t,a={},s="/",i=[];for(let l=0;l<n.length;++l){let c=n[l],u=l===n.length-1,d=s==="/"?e:e.slice(s.length)||"/",f=vE({path:c.relativePath,caseSensitive:c.caseSensitive,end:u},d),h=c.route;if(!f&&u&&r&&!n[n.length-1].route.index&&(f=vE({path:c.relativePath,caseSensitive:c.caseSensitive,end:!1},d)),!f)return null;Object.assign(a,f.params),i.push({params:a,pathname:bA([s,f.pathname]),pathnameBase:Ufe(bA([s,f.pathnameBase])),route:h}),f.pathnameBase!=="/"&&(s=bA([s,f.pathnameBase]))}return i}function vE(t,e){typeof t=="string"&&(t={path:t,caseSensitive:!1,end:!0});let[r,n]=Ofe(t.path,t.caseSensitive,t.end),a=e.match(r);if(!a)return null;let s=a[0],i=s.replace(/(.)\/+$/,"$1"),l=a.slice(1);return{params:n.reduce((u,{paramName:d,isOptional:f},h)=>{if(d==="*"){let m=l[h]||"";i=s.slice(0,s.length-m.length).replace(/(.)\/+$/,"$1")}const A=l[h];return f&&!A?u[d]=void 0:u[d]=(A||"").replace(/%2F/g,"/"),u},{}),pathname:s,pathnameBase:i,pattern:t}}function Ofe(t,e=!1,r=!0){Td(t==="*"||!t.endsWith("*")||t.endsWith("/*"),`Route path "${t}" will be treated as if it were "${t.replace(/\*$/,"/*")}" because the \`*\` character must always follow a \`/\` in the pattern. To get rid of this warning, please change the route path to "${t.replace(/\*$/,"/*")}".`);let n=[],a="^"+t.replace(/\/*\*?$/,"").replace(/^\/*/,"/").replace(/[\\.*+^${}|()[\]]/g,"\\$&").replace(/\/:([\w-]+)(\?)?/g,(i,l,c)=>(n.push({paramName:l,isOptional:c!=null}),c?"/?([^\\/]+)?":"/([^\\/]+)")).replace(/\/([\w-]+)\?(\/|$)/g,"(/$1)?$2");return t.endsWith("*")?(n.push({paramName:"*"}),a+=t==="*"||t==="/*"?"(.*)$":"(?:\\/(.+)|\\/*)$"):r?a+="\\/*$":t!==""&&t!=="/"&&(a+="(?:(?=\\/|$))"),[new RegExp(a,e?void 0:"i"),n]}function Dfe(t){try{return t.split("/").map(e=>decodeURIComponent(e).replace(/\//g,"%2F")).join("/")}catch(e){return Td(!1,`The URL path "${t}" could not be decoded because it is a malformed URL segment. This is probably due to a bad percent encoding (${e}).`),t}}function OA(t,e){if(e==="/")return t;if(!t.toLowerCase().startsWith(e.toLowerCase()))return null;let r=e.endsWith("/")?e.length-1:e.length,n=t.charAt(r);return n&&n!=="/"?null:t.slice(r)||"/"}function Rfe(t,e="/"){let{pathname:r,search:n="",hash:a=""}=typeof t=="string"?_v(t):t;return{pathname:r?r.startsWith("/")?r:Mfe(r,e):e,search:Qfe(n),hash:Vfe(a)}}function Mfe(t,e){let r=e.replace(/\/+$/,"").split("/");return t.split("/").forEach(a=>{a===".."?r.length>1&&r.pop():a!=="."&&r.push(a)}),r.length>1?r.join("/"):"/"}function Pj(t,e,r,n){return`Cannot include a '${t}' character in a manually specified \`to.${e}\` field [${JSON.stringify(n)}].  Please separate it out to the \`to.${r}\` field. Alternatively you may provide the full path as a string in <Link to="..."> and the router will parse it for you.`}function Lfe(t){return t.filter((e,r)=>r===0||e.route.path&&e.route.path.length>0)}function AO(t){let e=Lfe(t);return e.map((r,n)=>n===e.length-1?r.pathname:r.pathnameBase)}function hO(t,e,r,n=!1){let a;typeof t=="string"?a=_v(t):(a={...t},gs(!a.pathname||!a.pathname.includes("?"),Pj("?","pathname","search",a)),gs(!a.pathname||!a.pathname.includes("#"),Pj("#","pathname","hash",a)),gs(!a.search||!a.search.includes("#"),Pj("#","search","hash",a)));let s=t===""||a.pathname==="",i=s?"/":a.pathname,l;if(i==null)l=r;else{let f=e.length-1;if(!n&&i.startsWith("..")){let h=i.split("/");for(;h[0]==="..";)h.shift(),f-=1;a.pathname=h.join("/")}l=f>=0?e[f]:"/"}let c=Rfe(a,l),u=i&&i!=="/"&&i.endsWith("/"),d=(s||i===".")&&r.endsWith("/");return!c.pathname.endsWith("/")&&(u||d)&&(c.pathname+="/"),c}var bA=t=>t.join("/").replace(/\/\/+/g,"/"),Ufe=t=>t.replace(/\/+$/,"").replace(/^\/*/,"/"),Qfe=t=>!t||t==="?"?"":t.startsWith("?")?t:"?"+t,Vfe=t=>!t||t==="#"?"":t.startsWith("#")?t:"#"+t;function Hfe(t){return t!=null&&typeof t.status=="number"&&typeof t.statusText=="string"&&typeof t.internal=="boolean"&&"data"in t}var ZW=["POST","PUT","PATCH","DELETE"];new Set(ZW);var $fe=["GET",...ZW];new Set($fe);var Ev=v.createContext(null);Ev.displayName="DataRouter";var PI=v.createContext(null);PI.displayName="DataRouterState";v.createContext(!1);var eX=v.createContext({isTransitioning:!1});eX.displayName="ViewTransition";var Kfe=v.createContext(new Map);Kfe.displayName="Fetchers";var Gfe=v.createContext(null);Gfe.displayName="Await";var Md=v.createContext(null);Md.displayName="Navigation";var R2=v.createContext(null);R2.displayName="Location";var Ld=v.createContext({outlet:null,matches:[],isDataRoute:!1});Ld.displayName="Route";var mO=v.createContext(null);mO.displayName="RouteError";function qfe(t,{relative:e}={}){gs(Sv(),"useHref() may be used only in the context of a <Router> component.");let{basename:r,navigator:n}=v.useContext(Md),{hash:a,pathname:s,search:i}=L2(t,{relative:e}),l=s;return r!=="/"&&(l=s==="/"?r:bA([r,s])),n.createHref({pathname:l,search:i,hash:a})}function Sv(){return v.useContext(R2)!=null}function XA(){return gs(Sv(),"useLocation() may be used only in the context of a <Router> component."),v.useContext(R2).location}var tX="You should call navigate() in a React.useEffect(), not when your component is first rendered.";function rX(t){v.useContext(Md).static||v.useLayoutEffect(t)}function M2(){let{isDataRoute:t}=v.useContext(Ld);return t?lAe():zfe()}function zfe(){gs(Sv(),"useNavigate() may be used only in the context of a <Router> component.");let t=v.useContext(Ev),{basename:e,navigator:r}=v.useContext(Md),{matches:n}=v.useContext(Ld),{pathname:a}=XA(),s=JSON.stringify(AO(n)),i=v.useRef(!1);return rX(()=>{i.current=!0}),v.useCallback((c,u={})=>{if(Td(i.current,tX),!i.current)return;if(typeof c=="number"){r.go(c);return}let d=hO(c,JSON.parse(s),a,u.relative==="path");t==null&&e!=="/"&&(d.pathname=d.pathname==="/"?e:bA([e,d.pathname])),(u.replace?r.replace:r.push)(d,u.state,u)},[e,r,s,a,t])}var Wfe=v.createContext(null);function Xfe(t){let e=v.useContext(Ld).outlet;return e&&v.createElement(Wfe.Provider,{value:t},e)}function L2(t,{relative:e}={}){let{matches:r}=v.useContext(Ld),{pathname:n}=XA(),a=JSON.stringify(AO(r));return v.useMemo(()=>hO(t,JSON.parse(a),n,e==="path"),[t,a,n,e])}function Yfe(t,e){return nX(t,e)}function nX(t,e,r,n){var x;gs(Sv(),"useRoutes() may be used only in the context of a <Router> component.");let{navigator:a}=v.useContext(Md),{matches:s}=v.useContext(Ld),i=s[s.length-1],l=i?i.params:{},c=i?i.pathname:"/",u=i?i.pathnameBase:"/",d=i&&i.route;{let y=d&&d.path||"";aX(c,!d||y.endsWith("*")||y.endsWith("*?"),`You rendered descendant <Routes> (or called \`useRoutes()\`) at "${c}" (under <Route path="${y}">) but the parent route path has no trailing "*". This means if you navigate deeper, the parent won't match anymore and therefore the child routes will never render.

Please change the parent <Route path="${y}"> to <Route path="${y==="/"?"*":`${y}/*`}">.`)}let f=XA(),h;if(e){let y=typeof e=="string"?_v(e):e;gs(u==="/"||((x=y.pathname)==null?void 0:x.startsWith(u)),`When overriding the location using \`<Routes location>\` or \`useRoutes(routes, location)\`, the location pathname must begin with the portion of the URL pathname that was matched by all parent routes. The current pathname base is "${u}" but pathname "${y.pathname}" was given in the \`location\` prop.`),h=y}else h=f;let A=h.pathname||"/",m=A;if(u!=="/"){let y=u.replace(/^\//,"").split("/");m="/"+A.replace(/^\//,"").split("/").slice(y.length).join("/")}let p=XW(t,{pathname:m});Td(d||p!=null,`No routes matched location "${h.pathname}${h.search}${h.hash}" `),Td(p==null||p[p.length-1].route.element!==void 0||p[p.length-1].route.Component!==void 0||p[p.length-1].route.lazy!==void 0,`Matched leaf route at location "${h.pathname}${h.search}${h.hash}" does not have an element or Component. This means it will render an <Outlet /> with a null value by default resulting in an "empty" page.`);let g=rAe(p&&p.map(y=>Object.assign({},y,{params:Object.assign({},l,y.params),pathname:bA([u,a.encodeLocation?a.encodeLocation(y.pathname).pathname:y.pathname]),pathnameBase:y.pathnameBase==="/"?u:bA([u,a.encodeLocation?a.encodeLocation(y.pathnameBase).pathname:y.pathnameBase])})),s,r,n);return e&&g?v.createElement(R2.Provider,{value:{location:{pathname:"/",search:"",hash:"",state:null,key:"default",...h},navigationType:"POP"}},g):g}function Jfe(){let t=oAe(),e=Hfe(t)?`${t.status} ${t.statusText}`:t instanceof Error?t.message:JSON.stringify(t),r=t instanceof Error?t.stack:null,n="rgba(200,200,200, 0.5)",a={padding:"0.5rem",backgroundColor:n},s={padding:"2px 4px",backgroundColor:n},i=null;return console.error("Error handled by React Router default ErrorBoundary:",t),i=v.createElement(v.Fragment,null,v.createElement("p",null," Hey developer "),v.createElement("p",null,"You can provide a way better UX than this when your app throws errors by providing your own ",v.createElement("code",{style:s},"ErrorBoundary")," or"," ",v.createElement("code",{style:s},"errorElement")," prop on your route.")),v.createElement(v.Fragment,null,v.createElement("h2",null,"Unexpected Application Error!"),v.createElement("h3",{style:{fontStyle:"italic"}},e),r?v.createElement("pre",{style:a},r):null,i)}var Zfe=v.createElement(Jfe,null),eAe=class extends v.Component{constructor(t){super(t),this.state={location:t.location,revalidation:t.revalidation,error:t.error}}static getDerivedStateFromError(t){return{error:t}}static getDerivedStateFromProps(t,e){return e.location!==t.location||e.revalidation!=="idle"&&t.revalidation==="idle"?{error:t.error,location:t.location,revalidation:t.revalidation}:{error:t.error!==void 0?t.error:e.error,location:e.location,revalidation:t.revalidation||e.revalidation}}componentDidCatch(t,e){console.error("React Router caught the following error during render",t,e)}render(){return this.state.error!==void 0?v.createElement(Ld.Provider,{value:this.props.routeContext},v.createElement(mO.Provider,{value:this.state.error,children:this.props.component})):this.props.children}};function tAe({routeContext:t,match:e,children:r}){let n=v.useContext(Ev);return n&&n.static&&n.staticContext&&(e.route.errorElement||e.route.ErrorBoundary)&&(n.staticContext._deepestRenderedBoundaryId=e.route.id),v.createElement(Ld.Provider,{value:t},r)}function rAe(t,e=[],r=null,n=null){if(t==null){if(!r)return null;if(r.errors)t=r.matches;else if(e.length===0&&!r.initialized&&r.matches.length>0)t=r.matches;else return null}let a=t,s=r==null?void 0:r.errors;if(s!=null){let c=a.findIndex(u=>u.route.id&&(s==null?void 0:s[u.route.id])!==void 0);gs(c>=0,`Could not find a matching route for errors on route IDs: ${Object.keys(s).join(",")}`),a=a.slice(0,Math.min(a.length,c+1))}let i=!1,l=-1;if(r)for(let c=0;c<a.length;c++){let u=a[c];if((u.route.HydrateFallback||u.route.hydrateFallbackElement)&&(l=c),u.route.id){let{loaderData:d,errors:f}=r,h=u.route.loader&&!d.hasOwnProperty(u.route.id)&&(!f||f[u.route.id]===void 0);if(u.route.lazy||h){i=!0,l>=0?a=a.slice(0,l+1):a=[a[0]];break}}}return a.reduceRight((c,u,d)=>{let f,h=!1,A=null,m=null;r&&(f=s&&u.route.id?s[u.route.id]:void 0,A=u.route.errorElement||Zfe,i&&(l<0&&d===0?(aX("route-fallback",!1,"No `HydrateFallback` element provided to render during initial hydration"),h=!0,m=null):l===d&&(h=!0,m=u.route.hydrateFallbackElement||null)));let p=e.concat(a.slice(0,d+1)),g=()=>{let x;return f?x=A:h?x=m:u.route.Component?x=v.createElement(u.route.Component,null):u.route.element?x=u.route.element:x=c,v.createElement(tAe,{match:u,routeContext:{outlet:c,matches:p,isDataRoute:r!=null},children:x})};return r&&(u.route.ErrorBoundary||u.route.errorElement||d===0)?v.createElement(eAe,{location:r.location,revalidation:r.revalidation,component:A,error:f,children:g(),routeContext:{outlet:null,matches:p,isDataRoute:!0}}):g()},null)}function pO(t){return`${t} must be used within a data router.  See https://reactrouter.com/en/main/routers/picking-a-router.`}function nAe(t){let e=v.useContext(Ev);return gs(e,pO(t)),e}function aAe(t){let e=v.useContext(PI);return gs(e,pO(t)),e}function sAe(t){let e=v.useContext(Ld);return gs(e,pO(t)),e}function gO(t){let e=sAe(t),r=e.matches[e.matches.length-1];return gs(r.route.id,`${t} can only be used on routes that contain a unique "id"`),r.route.id}function iAe(){return gO("useRouteId")}function oAe(){var n;let t=v.useContext(mO),e=aAe("useRouteError"),r=gO("useRouteError");return t!==void 0?t:(n=e.errors)==null?void 0:n[r]}function lAe(){let{router:t}=nAe("useNavigate"),e=gO("useNavigate"),r=v.useRef(!1);return rX(()=>{r.current=!0}),v.useCallback(async(a,s={})=>{Td(r.current,tX),r.current&&(typeof a=="number"?t.navigate(a):await t.navigate(a,{fromRouteId:e,...s}))},[t,e])}var BL={};function aX(t,e,r){!e&&!BL[t]&&(BL[t]=!0,Td(!1,r))}v.memo(cAe);function cAe({routes:t,future:e,state:r}){return nX(t,void 0,r,e)}function nA({to:t,replace:e,state:r,relative:n}){gs(Sv(),"<Navigate> may be used only in the context of a <Router> component.");let{static:a}=v.useContext(Md);Td(!a,"<Navigate> must not be used on the initial render in a <StaticRouter>. This is a no-op, but you should modify your code so the <Navigate> is only ever rendered in response to some user interaction or state change.");let{matches:s}=v.useContext(Ld),{pathname:i}=XA(),l=M2(),c=hO(t,AO(s),i,n==="path"),u=JSON.stringify(c);return v.useEffect(()=>{l(JSON.parse(u),{replace:e,state:r,relative:n})},[l,u,n,e,r]),null}function sX(t){return Xfe(t.context)}function hn(t){gs(!1,"A <Route> is only ever to be used as the child of <Routes> element, never rendered directly. Please wrap your <Route> in a <Routes>.")}function uAe({basename:t="/",children:e=null,location:r,navigationType:n="POP",navigator:a,static:s=!1}){gs(!Sv(),"You cannot render a <Router> inside another <Router>. You should never have more than one in your app.");let i=t.replace(/^\/*/,"/"),l=v.useMemo(()=>({basename:i,navigator:a,static:s,future:{}}),[i,a,s]);typeof r=="string"&&(r=_v(r));let{pathname:c="/",search:u="",hash:d="",state:f=null,key:h="default"}=r,A=v.useMemo(()=>{let m=OA(c,i);return m==null?null:{location:{pathname:m,search:u,hash:d,state:f,key:h},navigationType:n}},[i,c,u,d,f,h,n]);return Td(A!=null,`<Router basename="${i}"> is not able to match the URL "${c}${u}${d}" because it does not start with the basename, so the <Router> won't render anything.`),A==null?null:v.createElement(Md.Provider,{value:l},v.createElement(R2.Provider,{children:e,value:A}))}function dAe({children:t,location:e}){return Yfe(DP(t),e)}function DP(t,e=[]){let r=[];return v.Children.forEach(t,(n,a)=>{if(!v.isValidElement(n))return;let s=[...e,a];if(n.type===v.Fragment){r.push.apply(r,DP(n.props.children,s));return}gs(n.type===hn,`[${typeof n.type=="string"?n.type:n.type.name}] is not a <Route> component. All component children of <Routes> must be a <Route> or <React.Fragment>`),gs(!n.props.index||!n.props.children,"An index route cannot have child routes.");let i={id:n.props.id||s.join("-"),caseSensitive:n.props.caseSensitive,element:n.props.element,Component:n.props.Component,index:n.props.index,path:n.props.path,loader:n.props.loader,action:n.props.action,hydrateFallbackElement:n.props.hydrateFallbackElement,HydrateFallback:n.props.HydrateFallback,errorElement:n.props.errorElement,ErrorBoundary:n.props.ErrorBoundary,hasErrorBoundary:n.props.hasErrorBoundary===!0||n.props.ErrorBoundary!=null||n.props.errorElement!=null,shouldRevalidate:n.props.shouldRevalidate,handle:n.props.handle,lazy:n.props.lazy};n.props.children&&(i.children=DP(n.props.children,s)),r.push(i)}),r}var x_="get",v_="application/x-www-form-urlencoded";function TI(t){return t!=null&&typeof t.tagName=="string"}function fAe(t){return TI(t)&&t.tagName.toLowerCase()==="button"}function AAe(t){return TI(t)&&t.tagName.toLowerCase()==="form"}function hAe(t){return TI(t)&&t.tagName.toLowerCase()==="input"}function mAe(t){return!!(t.metaKey||t.altKey||t.ctrlKey||t.shiftKey)}function pAe(t,e){return t.button===0&&(!e||e==="_self")&&!mAe(t)}var yN=null;function gAe(){if(yN===null)try{new FormData(document.createElement("form"),0),yN=!1}catch{yN=!0}return yN}var xAe=new Set(["application/x-www-form-urlencoded","multipart/form-data","text/plain"]);function Tj(t){return t!=null&&!xAe.has(t)?(Td(!1,`"${t}" is not a valid \`encType\` for \`<Form>\`/\`<fetcher.Form>\` and will default to "${v_}"`),null):t}function vAe(t,e){let r,n,a,s,i;if(AAe(t)){let l=t.getAttribute("action");n=l?OA(l,e):null,r=t.getAttribute("method")||x_,a=Tj(t.getAttribute("enctype"))||v_,s=new FormData(t)}else if(fAe(t)||hAe(t)&&(t.type==="submit"||t.type==="image")){let l=t.form;if(l==null)throw new Error('Cannot submit a <button> or <input type="submit"> without a <form>');let c=t.getAttribute("formaction")||l.getAttribute("action");if(n=c?OA(c,e):null,r=t.getAttribute("formmethod")||l.getAttribute("method")||x_,a=Tj(t.getAttribute("formenctype"))||Tj(l.getAttribute("enctype"))||v_,s=new FormData(l,t),!gAe()){let{name:u,type:d,value:f}=t;if(d==="image"){let h=u?`${u}.`:"";s.append(`${h}x`,"0"),s.append(`${h}y`,"0")}else u&&s.append(u,f)}}else{if(TI(t))throw new Error('Cannot submit element that is not <form>, <button>, or <input type="submit|image">');r=x_,n=null,a=v_,i=t}return s&&a==="text/plain"&&(i=s,s=void 0),{action:n,method:r.toLowerCase(),encType:a,formData:s,body:i}}Object.getOwnPropertyNames(Object.prototype).sort().join("\0");function xO(t,e){if(t===!1||t===null||typeof t>"u")throw new Error(e)}function yAe(t,e,r){let n=typeof t=="string"?new URL(t,typeof window>"u"?"server://singlefetch/":window.location.origin):t;return n.pathname==="/"?n.pathname=`_root.${r}`:e&&OA(n.pathname,e)==="/"?n.pathname=`${e.replace(/\/$/,"")}/_root.${r}`:n.pathname=`${n.pathname.replace(/\/$/,"")}.${r}`,n}async function bAe(t,e){if(t.id in e)return e[t.id];try{let r=await import(t.module);return e[t.id]=r,r}catch(r){return console.error(`Error loading route module \`${t.module}\`, reloading page...`),console.error(r),window.__reactRouterContext&&window.__reactRouterContext.isSpaMode,window.location.reload(),new Promise(()=>{})}}function wAe(t){return t==null?!1:t.href==null?t.rel==="preload"&&typeof t.imageSrcSet=="string"&&typeof t.imageSizes=="string":typeof t.rel=="string"&&typeof t.href=="string"}async function NAe(t,e,r){let n=await Promise.all(t.map(async a=>{let s=e.routes[a.route.id];if(s){let i=await bAe(s,r);return i.links?i.links():[]}return[]}));return SAe(n.flat(1).filter(wAe).filter(a=>a.rel==="stylesheet"||a.rel==="preload").map(a=>a.rel==="stylesheet"?{...a,rel:"prefetch",as:"style"}:{...a,rel:"prefetch"}))}function PL(t,e,r,n,a,s){let i=(c,u)=>r[u]?c.route.id!==r[u].route.id:!0,l=(c,u)=>{var d;return r[u].pathname!==c.pathname||((d=r[u].route.path)==null?void 0:d.endsWith("*"))&&r[u].params["*"]!==c.params["*"]};return s==="assets"?e.filter((c,u)=>i(c,u)||l(c,u)):s==="data"?e.filter((c,u)=>{var f;let d=n.routes[c.route.id];if(!d||!d.hasLoader)return!1;if(i(c,u)||l(c,u))return!0;if(c.route.shouldRevalidate){let h=c.route.shouldRevalidate({currentUrl:new URL(a.pathname+a.search+a.hash,window.origin),currentParams:((f=r[0])==null?void 0:f.params)||{},nextUrl:new URL(t,window.origin),nextParams:c.params,defaultShouldRevalidate:!0});if(typeof h=="boolean")return h}return!0}):[]}function CAe(t,e,{includeHydrateFallback:r}={}){return _Ae(t.map(n=>{let a=e.routes[n.route.id];if(!a)return[];let s=[a.module];return a.clientActionModule&&(s=s.concat(a.clientActionModule)),a.clientLoaderModule&&(s=s.concat(a.clientLoaderModule)),r&&a.hydrateFallbackModule&&(s=s.concat(a.hydrateFallbackModule)),a.imports&&(s=s.concat(a.imports)),s}).flat(1))}function _Ae(t){return[...new Set(t)]}function EAe(t){let e={},r=Object.keys(t).sort();for(let n of r)e[n]=t[n];return e}function SAe(t,e){let r=new Set;return new Set(e),t.reduce((n,a)=>{let s=JSON.stringify(EAe(a));return r.has(s)||(r.add(s),n.push({key:s,link:a})),n},[])}function iX(){let t=v.useContext(Ev);return xO(t,"You must render this element inside a <DataRouterContext.Provider> element"),t}function IAe(){let t=v.useContext(PI);return xO(t,"You must render this element inside a <DataRouterStateContext.Provider> element"),t}var vO=v.createContext(void 0);vO.displayName="FrameworkContext";function oX(){let t=v.useContext(vO);return xO(t,"You must render this element inside a <HydratedRouter> element"),t}function jAe(t,e){let r=v.useContext(vO),[n,a]=v.useState(!1),[s,i]=v.useState(!1),{onFocus:l,onBlur:c,onMouseEnter:u,onMouseLeave:d,onTouchStart:f}=e,h=v.useRef(null);v.useEffect(()=>{if(t==="render"&&i(!0),t==="viewport"){let p=x=>{x.forEach(y=>{i(y.isIntersecting)})},g=new IntersectionObserver(p,{threshold:.5});return h.current&&g.observe(h.current),()=>{g.disconnect()}}},[t]),v.useEffect(()=>{if(n){let p=setTimeout(()=>{i(!0)},100);return()=>{clearTimeout(p)}}},[n]);let A=()=>{a(!0)},m=()=>{a(!1),i(!1)};return r?t!=="intent"?[s,h,{}]:[s,h,{onFocus:E1(l,A),onBlur:E1(c,m),onMouseEnter:E1(u,A),onMouseLeave:E1(d,m),onTouchStart:E1(f,A)}]:[!1,h,{}]}function E1(t,e){return r=>{t&&t(r),r.defaultPrevented||e(r)}}function BAe({page:t,...e}){let{router:r}=iX(),n=v.useMemo(()=>XW(r.routes,t,r.basename),[r.routes,t,r.basename]);return n?v.createElement(TAe,{page:t,matches:n,...e}):null}function PAe(t){let{manifest:e,routeModules:r}=oX(),[n,a]=v.useState([]);return v.useEffect(()=>{let s=!1;return NAe(t,e,r).then(i=>{s||a(i)}),()=>{s=!0}},[t,e,r]),n}function TAe({page:t,matches:e,...r}){let n=XA(),{manifest:a,routeModules:s}=oX(),{basename:i}=iX(),{loaderData:l,matches:c}=IAe(),u=v.useMemo(()=>PL(t,e,c,a,n,"data"),[t,e,c,a,n]),d=v.useMemo(()=>PL(t,e,c,a,n,"assets"),[t,e,c,a,n]),f=v.useMemo(()=>{if(t===n.pathname+n.search+n.hash)return[];let m=new Set,p=!1;if(e.forEach(x=>{var b;let y=a.routes[x.route.id];!y||!y.hasLoader||(!u.some(w=>w.route.id===x.route.id)&&x.route.id in l&&((b=s[x.route.id])!=null&&b.shouldRevalidate)||y.hasClientLoader?p=!0:m.add(x.route.id))}),m.size===0)return[];let g=yAe(t,i,"data");return p&&m.size>0&&g.searchParams.set("_routes",e.filter(x=>m.has(x.route.id)).map(x=>x.route.id).join(",")),[g.pathname+g.search]},[i,l,n,a,u,e,t,s]),h=v.useMemo(()=>CAe(d,a),[d,a]),A=PAe(d);return v.createElement(v.Fragment,null,f.map(m=>v.createElement("link",{key:m,rel:"prefetch",as:"fetch",href:m,...r})),h.map(m=>v.createElement("link",{key:m,rel:"modulepreload",href:m,...r})),A.map(({key:m,link:p})=>v.createElement("link",{key:m,nonce:r.nonce,...p})))}function kAe(...t){return e=>{t.forEach(r=>{typeof r=="function"?r(e):r!=null&&(r.current=e)})}}var lX=typeof window<"u"&&typeof window.document<"u"&&typeof window.document.createElement<"u";try{lX&&(window.__reactRouterVersion="7.8.1")}catch{}function FAe({basename:t,children:e,window:r}){let n=v.useRef();n.current==null&&(n.current=yfe({window:r,v5Compat:!0}));let a=n.current,[s,i]=v.useState({action:a.action,location:a.location}),l=v.useCallback(c=>{v.startTransition(()=>i(c))},[i]);return v.useLayoutEffect(()=>a.listen(l),[a,l]),v.createElement(uAe,{basename:t,children:e,location:s.location,navigationType:s.action,navigator:a})}var cX=/^(?:[a-z][a-z0-9+.-]*:|\/\/)/i,uX=v.forwardRef(function({onClick:e,discover:r="render",prefetch:n="none",relative:a,reloadDocument:s,replace:i,state:l,target:c,to:u,preventScrollReset:d,viewTransition:f,...h},A){let{basename:m}=v.useContext(Md),p=typeof u=="string"&&cX.test(u),g,x=!1;if(typeof u=="string"&&p&&(g=u,lX))try{let S=new URL(window.location.href),k=u.startsWith("//")?new URL(S.protocol+u):new URL(u),P=OA(k.pathname,m);k.origin===S.origin&&P!=null?u=P+k.search+k.hash:x=!0}catch{Td(!1,`<Link to="${u}"> contains an invalid URL which will probably break when clicked - please update to a valid URL path.`)}let y=qfe(u,{relative:a}),[b,w,j]=jAe(n,h),I=RAe(u,{replace:i,state:l,target:c,preventScrollReset:d,relative:a,viewTransition:f});function _(S){e&&e(S),S.defaultPrevented||I(S)}let E=v.createElement("a",{...h,...j,href:g||y,onClick:x||s?e:_,ref:kAe(A,w),target:c,"data-discover":!p&&r==="render"?"true":void 0});return b&&!p?v.createElement(v.Fragment,null,E,v.createElement(BAe,{page:y})):E});uX.displayName="Link";var Jr=v.forwardRef(function({"aria-current":e="page",caseSensitive:r=!1,className:n="",end:a=!1,style:s,to:i,viewTransition:l,children:c,...u},d){let f=L2(i,{relative:u.relative}),h=XA(),A=v.useContext(PI),{navigator:m,basename:p}=v.useContext(Md),g=A!=null&&VAe(f)&&l===!0,x=m.encodeLocation?m.encodeLocation(f).pathname:f.pathname,y=h.pathname,b=A&&A.navigation&&A.navigation.location?A.navigation.location.pathname:null;r||(y=y.toLowerCase(),b=b?b.toLowerCase():null,x=x.toLowerCase()),b&&p&&(b=OA(b,p)||b);const w=x!=="/"&&x.endsWith("/")?x.length-1:x.length;let j=y===x||!a&&y.startsWith(x)&&y.charAt(w)==="/",I=b!=null&&(b===x||!a&&b.startsWith(x)&&b.charAt(x.length)==="/"),_={isActive:j,isPending:I,isTransitioning:g},E=j?e:void 0,S;typeof n=="function"?S=n(_):S=[n,j?"active":null,I?"pending":null,g?"transitioning":null].filter(Boolean).join(" ");let k=typeof s=="function"?s(_):s;return v.createElement(uX,{...u,"aria-current":E,className:S,ref:d,style:k,to:i,viewTransition:l},typeof c=="function"?c(_):c)});Jr.displayName="NavLink";var OAe=v.forwardRef(({discover:t="render",fetcherKey:e,navigate:r,reloadDocument:n,replace:a,state:s,method:i=x_,action:l,onSubmit:c,relative:u,preventScrollReset:d,viewTransition:f,...h},A)=>{let m=UAe(),p=QAe(l,{relative:u}),g=i.toLowerCase()==="get"?"get":"post",x=typeof l=="string"&&cX.test(l),y=b=>{if(c&&c(b),b.defaultPrevented)return;b.preventDefault();let w=b.nativeEvent.submitter,j=(w==null?void 0:w.getAttribute("formmethod"))||i;m(w||b.currentTarget,{fetcherKey:e,method:j,navigate:r,replace:a,state:s,relative:u,preventScrollReset:d,viewTransition:f})};return v.createElement("form",{ref:A,method:g,action:p,onSubmit:n?c:y,...h,"data-discover":!x&&t==="render"?"true":void 0})});OAe.displayName="Form";function DAe(t){return`${t} must be used within a data router.  See https://reactrouter.com/en/main/routers/picking-a-router.`}function dX(t){let e=v.useContext(Ev);return gs(e,DAe(t)),e}function RAe(t,{target:e,replace:r,state:n,preventScrollReset:a,relative:s,viewTransition:i}={}){let l=M2(),c=XA(),u=L2(t,{relative:s});return v.useCallback(d=>{if(pAe(d,e)){d.preventDefault();let f=r!==void 0?r:jb(c)===jb(u);l(t,{replace:f,state:n,preventScrollReset:a,relative:s,viewTransition:i})}},[c,l,u,r,n,e,t,a,s,i])}var MAe=0,LAe=()=>`__${String(++MAe)}__`;function UAe(){let{router:t}=dX("useSubmit"),{basename:e}=v.useContext(Md),r=iAe();return v.useCallback(async(n,a={})=>{let{action:s,method:i,encType:l,formData:c,body:u}=vAe(n,e);if(a.navigate===!1){let d=a.fetcherKey||LAe();await t.fetch(d,r,a.action||s,{preventScrollReset:a.preventScrollReset,formData:c,body:u,formMethod:a.method||i,formEncType:a.encType||l,flushSync:a.flushSync})}else await t.navigate(a.action||s,{preventScrollReset:a.preventScrollReset,formData:c,body:u,formMethod:a.method||i,formEncType:a.encType||l,replace:a.replace,state:a.state,fromRouteId:r,flushSync:a.flushSync,viewTransition:a.viewTransition})},[t,e,r])}function QAe(t,{relative:e}={}){let{basename:r}=v.useContext(Md),n=v.useContext(Ld);gs(n,"useFormAction must be used inside a RouteContext");let[a]=n.matches.slice(-1),s={...L2(t||".",{relative:e})},i=XA();if(t==null){s.search=i.search;let l=new URLSearchParams(s.search),c=l.getAll("index");if(c.some(d=>d==="")){l.delete("index"),c.filter(f=>f).forEach(f=>l.append("index",f));let d=l.toString();s.search=d?`?${d}`:""}}return(!t||t===".")&&a.route.index&&(s.search=s.search?s.search.replace(/^\?/,"?index&"):"?index"),r!=="/"&&(s.pathname=s.pathname==="/"?r:bA([r,s.pathname])),jb(s)}function VAe(t,{relative:e}={}){let r=v.useContext(eX);gs(r!=null,"`useViewTransitionState` must be used within `react-router-dom`'s `RouterProvider`.  Did you accidentally import `RouterProvider` from `react-router`?");let{basename:n}=dX("useViewTransitionState"),a=L2(t,{relative:e});if(!r.isTransitioning)return!1;let s=OA(r.currentLocation.pathname,n)||r.currentLocation.pathname,i=OA(r.nextLocation.pathname,n)||r.nextLocation.pathname;return vE(a.pathname,i)!=null||vE(a.pathname,s)!=null}function Yr(t,e){if(!t)return!1;const r=String(e);if(Array.isArray(t))return t.map(String).includes(r);const n=String(t);return n===r||n==="vendedor"&&r==="vendedor_pollo"}var TL={};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const fX=function(t){const e=[];let r=0;for(let n=0;n<t.length;n++){let a=t.charCodeAt(n);a<128?e[r++]=a:a<2048?(e[r++]=a>>6|192,e[r++]=a&63|128):(a&64512)===55296&&n+1<t.length&&(t.charCodeAt(n+1)&64512)===56320?(a=65536+((a&1023)<<10)+(t.charCodeAt(++n)&1023),e[r++]=a>>18|240,e[r++]=a>>12&63|128,e[r++]=a>>6&63|128,e[r++]=a&63|128):(e[r++]=a>>12|224,e[r++]=a>>6&63|128,e[r++]=a&63|128)}return e},HAe=function(t){const e=[];let r=0,n=0;for(;r<t.length;){const a=t[r++];if(a<128)e[n++]=String.fromCharCode(a);else if(a>191&&a<224){const s=t[r++];e[n++]=String.fromCharCode((a&31)<<6|s&63)}else if(a>239&&a<365){const s=t[r++],i=t[r++],l=t[r++],c=((a&7)<<18|(s&63)<<12|(i&63)<<6|l&63)-65536;e[n++]=String.fromCharCode(55296+(c>>10)),e[n++]=String.fromCharCode(56320+(c&1023))}else{const s=t[r++],i=t[r++];e[n++]=String.fromCharCode((a&15)<<12|(s&63)<<6|i&63)}}return e.join("")},AX={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:typeof atob=="function",encodeByteArray(t,e){if(!Array.isArray(t))throw Error("encodeByteArray takes an array as a parameter");this.init_();const r=e?this.byteToCharMapWebSafe_:this.byteToCharMap_,n=[];for(let a=0;a<t.length;a+=3){const s=t[a],i=a+1<t.length,l=i?t[a+1]:0,c=a+2<t.length,u=c?t[a+2]:0,d=s>>2,f=(s&3)<<4|l>>4;let h=(l&15)<<2|u>>6,A=u&63;c||(A=64,i||(h=64)),n.push(r[d],r[f],r[h],r[A])}return n.join("")},encodeString(t,e){return this.HAS_NATIVE_SUPPORT&&!e?btoa(t):this.encodeByteArray(fX(t),e)},decodeString(t,e){return this.HAS_NATIVE_SUPPORT&&!e?atob(t):HAe(this.decodeStringToByteArray(t,e))},decodeStringToByteArray(t,e){this.init_();const r=e?this.charToByteMapWebSafe_:this.charToByteMap_,n=[];for(let a=0;a<t.length;){const s=r[t.charAt(a++)],l=a<t.length?r[t.charAt(a)]:0;++a;const u=a<t.length?r[t.charAt(a)]:64;++a;const f=a<t.length?r[t.charAt(a)]:64;if(++a,s==null||l==null||u==null||f==null)throw new $Ae;const h=s<<2|l>>4;if(n.push(h),u!==64){const A=l<<4&240|u>>2;if(n.push(A),f!==64){const m=u<<6&192|f;n.push(m)}}}return n},init_(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(let t=0;t<this.ENCODED_VALS.length;t++)this.byteToCharMap_[t]=this.ENCODED_VALS.charAt(t),this.charToByteMap_[this.byteToCharMap_[t]]=t,this.byteToCharMapWebSafe_[t]=this.ENCODED_VALS_WEBSAFE.charAt(t),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[t]]=t,t>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(t)]=t,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(t)]=t)}}};class $Ae extends Error{constructor(){super(...arguments),this.name="DecodeBase64StringError"}}const KAe=function(t){const e=fX(t);return AX.encodeByteArray(e,!0)},yE=function(t){return KAe(t).replace(/\./g,"")},hX=function(t){try{return AX.decodeString(t,!0)}catch(e){console.error("base64Decode failed: ",e)}return null};/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function GAe(){if(typeof self<"u")return self;if(typeof window<"u")return window;if(typeof global<"u")return global;throw new Error("Unable to locate global object.")}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const qAe=()=>GAe().__FIREBASE_DEFAULTS__,zAe=()=>{if(typeof process>"u"||typeof TL>"u")return;const t=TL.__FIREBASE_DEFAULTS__;if(t)return JSON.parse(t)},WAe=()=>{if(typeof document>"u")return;let t;try{t=document.cookie.match(/__FIREBASE_DEFAULTS__=([^;]+)/)}catch{return}const e=t&&hX(t[1]);return e&&JSON.parse(e)},kI=()=>{try{return qAe()||zAe()||WAe()}catch(t){console.info(`Unable to get __FIREBASE_DEFAULTS__ due to: ${t}`);return}},mX=t=>{var e,r;return(r=(e=kI())===null||e===void 0?void 0:e.emulatorHosts)===null||r===void 0?void 0:r[t]},XAe=t=>{const e=mX(t);if(!e)return;const r=e.lastIndexOf(":");if(r<=0||r+1===e.length)throw new Error(`Invalid host ${e} with no separate hostname and port!`);const n=parseInt(e.substring(r+1),10);return e[0]==="["?[e.substring(1,r-1),n]:[e.substring(0,r),n]},pX=()=>{var t;return(t=kI())===null||t===void 0?void 0:t.config},gX=t=>{var e;return(e=kI())===null||e===void 0?void 0:e[`_${t}`]};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class YAe{constructor(){this.reject=()=>{},this.resolve=()=>{},this.promise=new Promise((e,r)=>{this.resolve=e,this.reject=r})}wrapCallback(e){return(r,n)=>{r?this.reject(r):this.resolve(n),typeof e=="function"&&(this.promise.catch(()=>{}),e.length===1?e(r):e(r,n))}}}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function JAe(t,e){if(t.uid)throw new Error('The "uid" field is no longer supported by mockUserToken. Please use "sub" instead for Firebase Auth User ID.');const r={alg:"none",type:"JWT"},n=e||"demo-project",a=t.iat||0,s=t.sub||t.user_id;if(!s)throw new Error("mockUserToken must contain 'sub' or 'user_id' field!");const i=Object.assign({iss:`https://securetoken.google.com/${n}`,aud:n,iat:a,exp:a+3600,auth_time:a,sub:s,user_id:s,firebase:{sign_in_provider:"custom",identities:{}}},t);return[yE(JSON.stringify(r)),yE(JSON.stringify(i)),""].join(".")}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Ki(){return typeof navigator<"u"&&typeof navigator.userAgent=="string"?navigator.userAgent:""}function ZAe(){return typeof window<"u"&&!!(window.cordova||window.phonegap||window.PhoneGap)&&/ios|iphone|ipod|ipad|android|blackberry|iemobile/i.test(Ki())}function ehe(){var t;const e=(t=kI())===null||t===void 0?void 0:t.forceEnvironment;if(e==="node")return!0;if(e==="browser")return!1;try{return Object.prototype.toString.call(global.process)==="[object process]"}catch{return!1}}function the(){return typeof navigator<"u"&&navigator.userAgent==="Cloudflare-Workers"}function rhe(){const t=typeof chrome=="object"?chrome.runtime:typeof browser=="object"?browser.runtime:void 0;return typeof t=="object"&&t.id!==void 0}function nhe(){return typeof navigator=="object"&&navigator.product==="ReactNative"}function ahe(){const t=Ki();return t.indexOf("MSIE ")>=0||t.indexOf("Trident/")>=0}function xX(){return!ehe()&&!!navigator.userAgent&&navigator.userAgent.includes("Safari")&&!navigator.userAgent.includes("Chrome")}function vX(){try{return typeof indexedDB=="object"}catch{return!1}}function she(){return new Promise((t,e)=>{try{let r=!0;const n="validate-browser-context-for-indexeddb-analytics-module",a=self.indexedDB.open(n);a.onsuccess=()=>{a.result.close(),r||self.indexedDB.deleteDatabase(n),t(!0)},a.onupgradeneeded=()=>{r=!1},a.onerror=()=>{var s;e(((s=a.error)===null||s===void 0?void 0:s.message)||"")}}catch(r){e(r)}})}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ihe="FirebaseError";class YA extends Error{constructor(e,r,n){super(r),this.code=e,this.customData=n,this.name=ihe,Object.setPrototypeOf(this,YA.prototype),Error.captureStackTrace&&Error.captureStackTrace(this,U2.prototype.create)}}class U2{constructor(e,r,n){this.service=e,this.serviceName=r,this.errors=n}create(e,...r){const n=r[0]||{},a=`${this.service}/${e}`,s=this.errors[e],i=s?ohe(s,n):"Error",l=`${this.serviceName}: ${i} (${a}).`;return new YA(a,l,n)}}function ohe(t,e){return t.replace(lhe,(r,n)=>{const a=e[n];return a!=null?String(a):`<${n}?>`})}const lhe=/\{\$([^}]+)}/g;function che(t){for(const e in t)if(Object.prototype.hasOwnProperty.call(t,e))return!1;return!0}function bE(t,e){if(t===e)return!0;const r=Object.keys(t),n=Object.keys(e);for(const a of r){if(!n.includes(a))return!1;const s=t[a],i=e[a];if(kL(s)&&kL(i)){if(!bE(s,i))return!1}else if(s!==i)return!1}for(const a of n)if(!r.includes(a))return!1;return!0}function kL(t){return t!==null&&typeof t=="object"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Q2(t){const e=[];for(const[r,n]of Object.entries(t))Array.isArray(n)?n.forEach(a=>{e.push(encodeURIComponent(r)+"="+encodeURIComponent(a))}):e.push(encodeURIComponent(r)+"="+encodeURIComponent(n));return e.length?"&"+e.join("&"):""}function sy(t){const e={};return t.replace(/^\?/,"").split("&").forEach(n=>{if(n){const[a,s]=n.split("=");e[decodeURIComponent(a)]=decodeURIComponent(s)}}),e}function iy(t){const e=t.indexOf("?");if(!e)return"";const r=t.indexOf("#",e);return t.substring(e,r>0?r:void 0)}function uhe(t,e){const r=new dhe(t,e);return r.subscribe.bind(r)}class dhe{constructor(e,r){this.observers=[],this.unsubscribes=[],this.observerCount=0,this.task=Promise.resolve(),this.finalized=!1,this.onNoObservers=r,this.task.then(()=>{e(this)}).catch(n=>{this.error(n)})}next(e){this.forEachObserver(r=>{r.next(e)})}error(e){this.forEachObserver(r=>{r.error(e)}),this.close(e)}complete(){this.forEachObserver(e=>{e.complete()}),this.close()}subscribe(e,r,n){let a;if(e===void 0&&r===void 0&&n===void 0)throw new Error("Missing Observer.");fhe(e,["next","error","complete"])?a=e:a={next:e,error:r,complete:n},a.next===void 0&&(a.next=kj),a.error===void 0&&(a.error=kj),a.complete===void 0&&(a.complete=kj);const s=this.unsubscribeOne.bind(this,this.observers.length);return this.finalized&&this.task.then(()=>{try{this.finalError?a.error(this.finalError):a.complete()}catch{}}),this.observers.push(a),s}unsubscribeOne(e){this.observers===void 0||this.observers[e]===void 0||(delete this.observers[e],this.observerCount-=1,this.observerCount===0&&this.onNoObservers!==void 0&&this.onNoObservers(this))}forEachObserver(e){if(!this.finalized)for(let r=0;r<this.observers.length;r++)this.sendOne(r,e)}sendOne(e,r){this.task.then(()=>{if(this.observers!==void 0&&this.observers[e]!==void 0)try{r(this.observers[e])}catch(n){typeof console<"u"&&console.error&&console.error(n)}})}close(e){this.finalized||(this.finalized=!0,e!==void 0&&(this.finalError=e),this.task.then(()=>{this.observers=void 0,this.onNoObservers=void 0}))}}function fhe(t,e){if(typeof t!="object"||t===null)return!1;for(const r of e)if(r in t&&typeof t[r]=="function")return!0;return!1}function kj(){}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Fs(t){return t&&t._delegate?t._delegate:t}class wp{constructor(e,r,n){this.name=e,this.instanceFactory=r,this.type=n,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY",this.onInstanceCreated=null}setInstantiationMode(e){return this.instantiationMode=e,this}setMultipleInstances(e){return this.multipleInstances=e,this}setServiceProps(e){return this.serviceProps=e,this}setInstanceCreatedCallback(e){return this.onInstanceCreated=e,this}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Im="[DEFAULT]";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let Ahe=class{constructor(e,r){this.name=e,this.container=r,this.component=null,this.instances=new Map,this.instancesDeferred=new Map,this.instancesOptions=new Map,this.onInitCallbacks=new Map}get(e){const r=this.normalizeInstanceIdentifier(e);if(!this.instancesDeferred.has(r)){const n=new YAe;if(this.instancesDeferred.set(r,n),this.isInitialized(r)||this.shouldAutoInitialize())try{const a=this.getOrInitializeService({instanceIdentifier:r});a&&n.resolve(a)}catch{}}return this.instancesDeferred.get(r).promise}getImmediate(e){var r;const n=this.normalizeInstanceIdentifier(e==null?void 0:e.identifier),a=(r=e==null?void 0:e.optional)!==null&&r!==void 0?r:!1;if(this.isInitialized(n)||this.shouldAutoInitialize())try{return this.getOrInitializeService({instanceIdentifier:n})}catch(s){if(a)return null;throw s}else{if(a)return null;throw Error(`Service ${this.name} is not available`)}}getComponent(){return this.component}setComponent(e){if(e.name!==this.name)throw Error(`Mismatching Component ${e.name} for Provider ${this.name}.`);if(this.component)throw Error(`Component for ${this.name} has already been provided`);if(this.component=e,!!this.shouldAutoInitialize()){if(mhe(e))try{this.getOrInitializeService({instanceIdentifier:Im})}catch{}for(const[r,n]of this.instancesDeferred.entries()){const a=this.normalizeInstanceIdentifier(r);try{const s=this.getOrInitializeService({instanceIdentifier:a});n.resolve(s)}catch{}}}}clearInstance(e=Im){this.instancesDeferred.delete(e),this.instancesOptions.delete(e),this.instances.delete(e)}async delete(){const e=Array.from(this.instances.values());await Promise.all([...e.filter(r=>"INTERNAL"in r).map(r=>r.INTERNAL.delete()),...e.filter(r=>"_delete"in r).map(r=>r._delete())])}isComponentSet(){return this.component!=null}isInitialized(e=Im){return this.instances.has(e)}getOptions(e=Im){return this.instancesOptions.get(e)||{}}initialize(e={}){const{options:r={}}=e,n=this.normalizeInstanceIdentifier(e.instanceIdentifier);if(this.isInitialized(n))throw Error(`${this.name}(${n}) has already been initialized`);if(!this.isComponentSet())throw Error(`Component ${this.name} has not been registered yet`);const a=this.getOrInitializeService({instanceIdentifier:n,options:r});for(const[s,i]of this.instancesDeferred.entries()){const l=this.normalizeInstanceIdentifier(s);n===l&&i.resolve(a)}return a}onInit(e,r){var n;const a=this.normalizeInstanceIdentifier(r),s=(n=this.onInitCallbacks.get(a))!==null&&n!==void 0?n:new Set;s.add(e),this.onInitCallbacks.set(a,s);const i=this.instances.get(a);return i&&e(i,a),()=>{s.delete(e)}}invokeOnInitCallbacks(e,r){const n=this.onInitCallbacks.get(r);if(n)for(const a of n)try{a(e,r)}catch{}}getOrInitializeService({instanceIdentifier:e,options:r={}}){let n=this.instances.get(e);if(!n&&this.component&&(n=this.component.instanceFactory(this.container,{instanceIdentifier:hhe(e),options:r}),this.instances.set(e,n),this.instancesOptions.set(e,r),this.invokeOnInitCallbacks(n,e),this.component.onInstanceCreated))try{this.component.onInstanceCreated(this.container,e,n)}catch{}return n||null}normalizeInstanceIdentifier(e=Im){return this.component?this.component.multipleInstances?e:Im:e}shouldAutoInitialize(){return!!this.component&&this.component.instantiationMode!=="EXPLICIT"}};function hhe(t){return t===Im?void 0:t}function mhe(t){return t.instantiationMode==="EAGER"}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class phe{constructor(e){this.name=e,this.providers=new Map}addComponent(e){const r=this.getProvider(e.name);if(r.isComponentSet())throw new Error(`Component ${e.name} has already been registered with ${this.name}`);r.setComponent(e)}addOrOverwriteComponent(e){this.getProvider(e.name).isComponentSet()&&this.providers.delete(e.name),this.addComponent(e)}getProvider(e){if(this.providers.has(e))return this.providers.get(e);const r=new Ahe(e,this);return this.providers.set(e,r),r}getProviders(){return Array.from(this.providers.values())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var Mn;(function(t){t[t.DEBUG=0]="DEBUG",t[t.VERBOSE=1]="VERBOSE",t[t.INFO=2]="INFO",t[t.WARN=3]="WARN",t[t.ERROR=4]="ERROR",t[t.SILENT=5]="SILENT"})(Mn||(Mn={}));const ghe={debug:Mn.DEBUG,verbose:Mn.VERBOSE,info:Mn.INFO,warn:Mn.WARN,error:Mn.ERROR,silent:Mn.SILENT},xhe=Mn.INFO,vhe={[Mn.DEBUG]:"log",[Mn.VERBOSE]:"log",[Mn.INFO]:"info",[Mn.WARN]:"warn",[Mn.ERROR]:"error"},yhe=(t,e,...r)=>{if(e<t.logLevel)return;const n=new Date().toISOString(),a=vhe[e];if(a)console[a](`[${n}]  ${t.name}:`,...r);else throw new Error(`Attempted to log a message with an invalid logType (value: ${e})`)};let yO=class{constructor(e){this.name=e,this._logLevel=xhe,this._logHandler=yhe,this._userLogHandler=null}get logLevel(){return this._logLevel}set logLevel(e){if(!(e in Mn))throw new TypeError(`Invalid value "${e}" assigned to \`logLevel\``);this._logLevel=e}setLogLevel(e){this._logLevel=typeof e=="string"?ghe[e]:e}get logHandler(){return this._logHandler}set logHandler(e){if(typeof e!="function")throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=e}get userLogHandler(){return this._userLogHandler}set userLogHandler(e){this._userLogHandler=e}debug(...e){this._userLogHandler&&this._userLogHandler(this,Mn.DEBUG,...e),this._logHandler(this,Mn.DEBUG,...e)}log(...e){this._userLogHandler&&this._userLogHandler(this,Mn.VERBOSE,...e),this._logHandler(this,Mn.VERBOSE,...e)}info(...e){this._userLogHandler&&this._userLogHandler(this,Mn.INFO,...e),this._logHandler(this,Mn.INFO,...e)}warn(...e){this._userLogHandler&&this._userLogHandler(this,Mn.WARN,...e),this._logHandler(this,Mn.WARN,...e)}error(...e){this._userLogHandler&&this._userLogHandler(this,Mn.ERROR,...e),this._logHandler(this,Mn.ERROR,...e)}};const bhe=(t,e)=>e.some(r=>t instanceof r);let FL,OL;function whe(){return FL||(FL=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction])}function Nhe(){return OL||(OL=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])}const yX=new WeakMap,RP=new WeakMap,bX=new WeakMap,Fj=new WeakMap,bO=new WeakMap;function Che(t){const e=new Promise((r,n)=>{const a=()=>{t.removeEventListener("success",s),t.removeEventListener("error",i)},s=()=>{r(_0(t.result)),a()},i=()=>{n(t.error),a()};t.addEventListener("success",s),t.addEventListener("error",i)});return e.then(r=>{r instanceof IDBCursor&&yX.set(r,t)}).catch(()=>{}),bO.set(e,t),e}function _he(t){if(RP.has(t))return;const e=new Promise((r,n)=>{const a=()=>{t.removeEventListener("complete",s),t.removeEventListener("error",i),t.removeEventListener("abort",i)},s=()=>{r(),a()},i=()=>{n(t.error||new DOMException("AbortError","AbortError")),a()};t.addEventListener("complete",s),t.addEventListener("error",i),t.addEventListener("abort",i)});RP.set(t,e)}let MP={get(t,e,r){if(t instanceof IDBTransaction){if(e==="done")return RP.get(t);if(e==="objectStoreNames")return t.objectStoreNames||bX.get(t);if(e==="store")return r.objectStoreNames[1]?void 0:r.objectStore(r.objectStoreNames[0])}return _0(t[e])},set(t,e,r){return t[e]=r,!0},has(t,e){return t instanceof IDBTransaction&&(e==="done"||e==="store")?!0:e in t}};function Ehe(t){MP=t(MP)}function She(t){return t===IDBDatabase.prototype.transaction&&!("objectStoreNames"in IDBTransaction.prototype)?function(e,...r){const n=t.call(Oj(this),e,...r);return bX.set(n,e.sort?e.sort():[e]),_0(n)}:Nhe().includes(t)?function(...e){return t.apply(Oj(this),e),_0(yX.get(this))}:function(...e){return _0(t.apply(Oj(this),e))}}function Ihe(t){return typeof t=="function"?She(t):(t instanceof IDBTransaction&&_he(t),bhe(t,whe())?new Proxy(t,MP):t)}function _0(t){if(t instanceof IDBRequest)return Che(t);if(Fj.has(t))return Fj.get(t);const e=Ihe(t);return e!==t&&(Fj.set(t,e),bO.set(e,t)),e}const Oj=t=>bO.get(t);function jhe(t,e,{blocked:r,upgrade:n,blocking:a,terminated:s}={}){const i=indexedDB.open(t,e),l=_0(i);return n&&i.addEventListener("upgradeneeded",c=>{n(_0(i.result),c.oldVersion,c.newVersion,_0(i.transaction),c)}),r&&i.addEventListener("blocked",c=>r(c.oldVersion,c.newVersion,c)),l.then(c=>{s&&c.addEventListener("close",()=>s()),a&&c.addEventListener("versionchange",u=>a(u.oldVersion,u.newVersion,u))}).catch(()=>{}),l}const Bhe=["get","getKey","getAll","getAllKeys","count"],Phe=["put","add","delete","clear"],Dj=new Map;function DL(t,e){if(!(t instanceof IDBDatabase&&!(e in t)&&typeof e=="string"))return;if(Dj.get(e))return Dj.get(e);const r=e.replace(/FromIndex$/,""),n=e!==r,a=Phe.includes(r);if(!(r in(n?IDBIndex:IDBObjectStore).prototype)||!(a||Bhe.includes(r)))return;const s=async function(i,...l){const c=this.transaction(i,a?"readwrite":"readonly");let u=c.store;return n&&(u=u.index(l.shift())),(await Promise.all([u[r](...l),a&&c.done]))[0]};return Dj.set(e,s),s}Ehe(t=>({...t,get:(e,r,n)=>DL(e,r)||t.get(e,r,n),has:(e,r)=>!!DL(e,r)||t.has(e,r)}));/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class The{constructor(e){this.container=e}getPlatformInfoString(){return this.container.getProviders().map(r=>{if(khe(r)){const n=r.getImmediate();return`${n.library}/${n.version}`}else return null}).filter(r=>r).join(" ")}}function khe(t){const e=t.getComponent();return(e==null?void 0:e.type)==="VERSION"}const LP="@firebase/app",RL="0.10.13";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const DA=new yO("@firebase/app"),Fhe="@firebase/app-compat",Ohe="@firebase/analytics-compat",Dhe="@firebase/analytics",Rhe="@firebase/app-check-compat",Mhe="@firebase/app-check",Lhe="@firebase/auth",Uhe="@firebase/auth-compat",Qhe="@firebase/database",Vhe="@firebase/data-connect",Hhe="@firebase/database-compat",$he="@firebase/functions",Khe="@firebase/functions-compat",Ghe="@firebase/installations",qhe="@firebase/installations-compat",zhe="@firebase/messaging",Whe="@firebase/messaging-compat",Xhe="@firebase/performance",Yhe="@firebase/performance-compat",Jhe="@firebase/remote-config",Zhe="@firebase/remote-config-compat",e0e="@firebase/storage",t0e="@firebase/storage-compat",r0e="@firebase/firestore",n0e="@firebase/vertexai-preview",a0e="@firebase/firestore-compat",s0e="firebase",i0e="10.14.1";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const UP="[DEFAULT]",o0e={[LP]:"fire-core",[Fhe]:"fire-core-compat",[Dhe]:"fire-analytics",[Ohe]:"fire-analytics-compat",[Mhe]:"fire-app-check",[Rhe]:"fire-app-check-compat",[Lhe]:"fire-auth",[Uhe]:"fire-auth-compat",[Qhe]:"fire-rtdb",[Vhe]:"fire-data-connect",[Hhe]:"fire-rtdb-compat",[$he]:"fire-fn",[Khe]:"fire-fn-compat",[Ghe]:"fire-iid",[qhe]:"fire-iid-compat",[zhe]:"fire-fcm",[Whe]:"fire-fcm-compat",[Xhe]:"fire-perf",[Yhe]:"fire-perf-compat",[Jhe]:"fire-rc",[Zhe]:"fire-rc-compat",[e0e]:"fire-gcs",[t0e]:"fire-gcs-compat",[r0e]:"fire-fst",[a0e]:"fire-fst-compat",[n0e]:"fire-vertex","fire-js":"fire-js",[s0e]:"fire-js-all"};/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Jx=new Map,QP=new Map,VP=new Map;function ML(t,e){try{t.container.addComponent(e)}catch(r){DA.debug(`Component ${e.name} failed to register with FirebaseApp ${t.name}`,r)}}function Zx(t){const e=t.name;if(VP.has(e))return DA.debug(`There were multiple attempts to register component ${e}.`),!1;VP.set(e,t);for(const r of Jx.values())ML(r,t);for(const r of QP.values())ML(r,t);return!0}function wO(t,e){const r=t.container.getProvider("heartbeat").getImmediate({optional:!0});return r&&r.triggerHeartbeat(),t.container.getProvider(e)}function Af(t){return t.settings!==void 0}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const l0e={"no-app":"No Firebase App '{$appName}' has been created - call initializeApp() first","bad-app-name":"Illegal App name: '{$appName}'","duplicate-app":"Firebase App named '{$appName}' already exists with different options or config","app-deleted":"Firebase App named '{$appName}' already deleted","server-app-deleted":"Firebase Server App has been deleted","no-options":"Need to provide options, when not being deployed to hosting via source.","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance.","invalid-log-argument":"First argument to `onLog` must be null or a function.","idb-open":"Error thrown when opening IndexedDB. Original error: {$originalErrorMessage}.","idb-get":"Error thrown when reading from IndexedDB. Original error: {$originalErrorMessage}.","idb-set":"Error thrown when writing to IndexedDB. Original error: {$originalErrorMessage}.","idb-delete":"Error thrown when deleting from IndexedDB. Original error: {$originalErrorMessage}.","finalization-registry-not-supported":"FirebaseServerApp deleteOnDeref field defined but the JS runtime does not support FinalizationRegistry.","invalid-server-app-environment":"FirebaseServerApp is not for use in browser environments."},E0=new U2("app","Firebase",l0e);/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class c0e{constructor(e,r,n){this._isDeleted=!1,this._options=Object.assign({},e),this._config=Object.assign({},r),this._name=r.name,this._automaticDataCollectionEnabled=r.automaticDataCollectionEnabled,this._container=n,this.container.addComponent(new wp("app",()=>this,"PUBLIC"))}get automaticDataCollectionEnabled(){return this.checkDestroyed(),this._automaticDataCollectionEnabled}set automaticDataCollectionEnabled(e){this.checkDestroyed(),this._automaticDataCollectionEnabled=e}get name(){return this.checkDestroyed(),this._name}get options(){return this.checkDestroyed(),this._options}get config(){return this.checkDestroyed(),this._config}get container(){return this._container}get isDeleted(){return this._isDeleted}set isDeleted(e){this._isDeleted=e}checkDestroyed(){if(this.isDeleted)throw E0.create("app-deleted",{appName:this._name})}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Iv=i0e;function NO(t,e={}){let r=t;typeof e!="object"&&(e={name:e});const n=Object.assign({name:UP,automaticDataCollectionEnabled:!1},e),a=n.name;if(typeof a!="string"||!a)throw E0.create("bad-app-name",{appName:String(a)});if(r||(r=pX()),!r)throw E0.create("no-options");const s=Jx.get(a);if(s){if(bE(r,s.options)&&bE(n,s.config))return s;throw E0.create("duplicate-app",{appName:a})}const i=new phe(a);for(const c of VP.values())i.addComponent(c);const l=new c0e(r,n,i);return Jx.set(a,l),l}function CO(t=UP){const e=Jx.get(t);if(!e&&t===UP&&pX())return NO();if(!e)throw E0.create("no-app",{appName:t});return e}async function u0e(t){let e=!1;const r=t.name;Jx.has(r)?(e=!0,Jx.delete(r)):QP.has(r)&&t.decRefCount()<=0&&(QP.delete(r),e=!0),e&&(await Promise.all(t.container.getProviders().map(n=>n.delete())),t.isDeleted=!0)}function S0(t,e,r){var n;let a=(n=o0e[t])!==null&&n!==void 0?n:t;r&&(a+=`-${r}`);const s=a.match(/\s|\//),i=e.match(/\s|\//);if(s||i){const l=[`Unable to register library "${a}" with version "${e}":`];s&&l.push(`library name "${a}" contains illegal characters (whitespace or "/")`),s&&i&&l.push("and"),i&&l.push(`version name "${e}" contains illegal characters (whitespace or "/")`),DA.warn(l.join(" "));return}Zx(new wp(`${a}-version`,()=>({library:a,version:e}),"VERSION"))}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const d0e="firebase-heartbeat-database",f0e=1,Bb="firebase-heartbeat-store";let Rj=null;function wX(){return Rj||(Rj=jhe(d0e,f0e,{upgrade:(t,e)=>{switch(e){case 0:try{t.createObjectStore(Bb)}catch(r){console.warn(r)}}}}).catch(t=>{throw E0.create("idb-open",{originalErrorMessage:t.message})})),Rj}async function A0e(t){try{const r=(await wX()).transaction(Bb),n=await r.objectStore(Bb).get(NX(t));return await r.done,n}catch(e){if(e instanceof YA)DA.warn(e.message);else{const r=E0.create("idb-get",{originalErrorMessage:e==null?void 0:e.message});DA.warn(r.message)}}}async function LL(t,e){try{const n=(await wX()).transaction(Bb,"readwrite");await n.objectStore(Bb).put(e,NX(t)),await n.done}catch(r){if(r instanceof YA)DA.warn(r.message);else{const n=E0.create("idb-set",{originalErrorMessage:r==null?void 0:r.message});DA.warn(n.message)}}}function NX(t){return`${t.name}!${t.options.appId}`}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const h0e=1024,m0e=30*24*60*60*1e3;class p0e{constructor(e){this.container=e,this._heartbeatsCache=null;const r=this.container.getProvider("app").getImmediate();this._storage=new x0e(r),this._heartbeatsCachePromise=this._storage.read().then(n=>(this._heartbeatsCache=n,n))}async triggerHeartbeat(){var e,r;try{const a=this.container.getProvider("platform-logger").getImmediate().getPlatformInfoString(),s=UL();return((e=this._heartbeatsCache)===null||e===void 0?void 0:e.heartbeats)==null&&(this._heartbeatsCache=await this._heartbeatsCachePromise,((r=this._heartbeatsCache)===null||r===void 0?void 0:r.heartbeats)==null)||this._heartbeatsCache.lastSentHeartbeatDate===s||this._heartbeatsCache.heartbeats.some(i=>i.date===s)?void 0:(this._heartbeatsCache.heartbeats.push({date:s,agent:a}),this._heartbeatsCache.heartbeats=this._heartbeatsCache.heartbeats.filter(i=>{const l=new Date(i.date).valueOf();return Date.now()-l<=m0e}),this._storage.overwrite(this._heartbeatsCache))}catch(n){DA.warn(n)}}async getHeartbeatsHeader(){var e;try{if(this._heartbeatsCache===null&&await this._heartbeatsCachePromise,((e=this._heartbeatsCache)===null||e===void 0?void 0:e.heartbeats)==null||this._heartbeatsCache.heartbeats.length===0)return"";const r=UL(),{heartbeatsToSend:n,unsentEntries:a}=g0e(this._heartbeatsCache.heartbeats),s=yE(JSON.stringify({version:2,heartbeats:n}));return this._heartbeatsCache.lastSentHeartbeatDate=r,a.length>0?(this._heartbeatsCache.heartbeats=a,await this._storage.overwrite(this._heartbeatsCache)):(this._heartbeatsCache.heartbeats=[],this._storage.overwrite(this._heartbeatsCache)),s}catch(r){return DA.warn(r),""}}}function UL(){return new Date().toISOString().substring(0,10)}function g0e(t,e=h0e){const r=[];let n=t.slice();for(const a of t){const s=r.find(i=>i.agent===a.agent);if(s){if(s.dates.push(a.date),QL(r)>e){s.dates.pop();break}}else if(r.push({agent:a.agent,dates:[a.date]}),QL(r)>e){r.pop();break}n=n.slice(1)}return{heartbeatsToSend:r,unsentEntries:n}}class x0e{constructor(e){this.app=e,this._canUseIndexedDBPromise=this.runIndexedDBEnvironmentCheck()}async runIndexedDBEnvironmentCheck(){return vX()?she().then(()=>!0).catch(()=>!1):!1}async read(){if(await this._canUseIndexedDBPromise){const r=await A0e(this.app);return r!=null&&r.heartbeats?r:{heartbeats:[]}}else return{heartbeats:[]}}async overwrite(e){var r;if(await this._canUseIndexedDBPromise){const a=await this.read();return LL(this.app,{lastSentHeartbeatDate:(r=e.lastSentHeartbeatDate)!==null&&r!==void 0?r:a.lastSentHeartbeatDate,heartbeats:e.heartbeats})}else return}async add(e){var r;if(await this._canUseIndexedDBPromise){const a=await this.read();return LL(this.app,{lastSentHeartbeatDate:(r=e.lastSentHeartbeatDate)!==null&&r!==void 0?r:a.lastSentHeartbeatDate,heartbeats:[...a.heartbeats,...e.heartbeats]})}else return}}function QL(t){return yE(JSON.stringify({version:2,heartbeats:t})).length}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function v0e(t){Zx(new wp("platform-logger",e=>new The(e),"PRIVATE")),Zx(new wp("heartbeat",e=>new p0e(e),"PRIVATE")),S0(LP,RL,t),S0(LP,RL,"esm2017"),S0("fire-js","")}v0e("");function _O(t,e){var r={};for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&e.indexOf(n)<0&&(r[n]=t[n]);if(t!=null&&typeof Object.getOwnPropertySymbols=="function")for(var a=0,n=Object.getOwnPropertySymbols(t);a<n.length;a++)e.indexOf(n[a])<0&&Object.prototype.propertyIsEnumerable.call(t,n[a])&&(r[n[a]]=t[n[a]]);return r}function CX(){return{"dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."}}const y0e=CX,_X=new U2("auth","Firebase",CX());/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const wE=new yO("@firebase/auth");function b0e(t,...e){wE.logLevel<=Mn.WARN&&wE.warn(`Auth (${Iv}): ${t}`,...e)}function y_(t,...e){wE.logLevel<=Mn.ERROR&&wE.error(`Auth (${Iv}): ${t}`,...e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function kd(t,...e){throw EO(t,...e)}function wf(t,...e){return EO(t,...e)}function EX(t,e,r){const n=Object.assign(Object.assign({},y0e()),{[e]:r});return new U2("auth","Firebase",n).create(e,{appName:t.name})}function wA(t){return EX(t,"operation-not-supported-in-this-environment","Operations that alter the current user are not supported in conjunction with FirebaseServerApp")}function EO(t,...e){if(typeof t!="string"){const r=e[0],n=[...e.slice(1)];return n[0]&&(n[0].appName=t.name),t._errorFactory.create(r,...n)}return _X.create(t,...e)}function cn(t,e,...r){if(!t)throw EO(e,...r)}function AA(t){const e="INTERNAL ASSERTION FAILED: "+t;throw y_(e),new Error(e)}function RA(t,e){t||AA(e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function HP(){var t;return typeof self<"u"&&((t=self.location)===null||t===void 0?void 0:t.href)||""}function w0e(){return VL()==="http:"||VL()==="https:"}function VL(){var t;return typeof self<"u"&&((t=self.location)===null||t===void 0?void 0:t.protocol)||null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function N0e(){return typeof navigator<"u"&&navigator&&"onLine"in navigator&&typeof navigator.onLine=="boolean"&&(w0e()||rhe()||"connection"in navigator)?navigator.onLine:!0}function C0e(){if(typeof navigator>"u")return null;const t=navigator;return t.languages&&t.languages[0]||t.language||null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class V2{constructor(e,r){this.shortDelay=e,this.longDelay=r,RA(r>e,"Short delay should be less than long delay!"),this.isMobile=ZAe()||nhe()}get(){return N0e()?this.isMobile?this.longDelay:this.shortDelay:Math.min(5e3,this.shortDelay)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function SO(t,e){RA(t.emulator,"Emulator should always be set here");const{url:r}=t.emulator;return e?`${r}${e.startsWith("/")?e.slice(1):e}`:r}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class SX{static initialize(e,r,n){this.fetchImpl=e,r&&(this.headersImpl=r),n&&(this.responseImpl=n)}static fetch(){if(this.fetchImpl)return this.fetchImpl;if(typeof self<"u"&&"fetch"in self)return self.fetch;if(typeof globalThis<"u"&&globalThis.fetch)return globalThis.fetch;if(typeof fetch<"u")return fetch;AA("Could not find fetch implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static headers(){if(this.headersImpl)return this.headersImpl;if(typeof self<"u"&&"Headers"in self)return self.Headers;if(typeof globalThis<"u"&&globalThis.Headers)return globalThis.Headers;if(typeof Headers<"u")return Headers;AA("Could not find Headers implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static response(){if(this.responseImpl)return this.responseImpl;if(typeof self<"u"&&"Response"in self)return self.Response;if(typeof globalThis<"u"&&globalThis.Response)return globalThis.Response;if(typeof Response<"u")return Response;AA("Could not find Response implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const _0e={CREDENTIAL_MISMATCH:"custom-token-mismatch",MISSING_CUSTOM_TOKEN:"internal-error",INVALID_IDENTIFIER:"invalid-email",MISSING_CONTINUE_URI:"internal-error",INVALID_PASSWORD:"wrong-password",MISSING_PASSWORD:"missing-password",INVALID_LOGIN_CREDENTIALS:"invalid-credential",EMAIL_EXISTS:"email-already-in-use",PASSWORD_LOGIN_DISABLED:"operation-not-allowed",INVALID_IDP_RESPONSE:"invalid-credential",INVALID_PENDING_TOKEN:"invalid-credential",FEDERATED_USER_ID_ALREADY_LINKED:"credential-already-in-use",MISSING_REQ_TYPE:"internal-error",EMAIL_NOT_FOUND:"user-not-found",RESET_PASSWORD_EXCEED_LIMIT:"too-many-requests",EXPIRED_OOB_CODE:"expired-action-code",INVALID_OOB_CODE:"invalid-action-code",MISSING_OOB_CODE:"internal-error",CREDENTIAL_TOO_OLD_LOGIN_AGAIN:"requires-recent-login",INVALID_ID_TOKEN:"invalid-user-token",TOKEN_EXPIRED:"user-token-expired",USER_NOT_FOUND:"user-token-expired",TOO_MANY_ATTEMPTS_TRY_LATER:"too-many-requests",PASSWORD_DOES_NOT_MEET_REQUIREMENTS:"password-does-not-meet-requirements",INVALID_CODE:"invalid-verification-code",INVALID_SESSION_INFO:"invalid-verification-id",INVALID_TEMPORARY_PROOF:"invalid-credential",MISSING_SESSION_INFO:"missing-verification-id",SESSION_EXPIRED:"code-expired",MISSING_ANDROID_PACKAGE_NAME:"missing-android-pkg-name",UNAUTHORIZED_DOMAIN:"unauthorized-continue-uri",INVALID_OAUTH_CLIENT_ID:"invalid-oauth-client-id",ADMIN_ONLY_OPERATION:"admin-restricted-operation",INVALID_MFA_PENDING_CREDENTIAL:"invalid-multi-factor-session",MFA_ENROLLMENT_NOT_FOUND:"multi-factor-info-not-found",MISSING_MFA_ENROLLMENT_ID:"missing-multi-factor-info",MISSING_MFA_PENDING_CREDENTIAL:"missing-multi-factor-session",SECOND_FACTOR_EXISTS:"second-factor-already-in-use",SECOND_FACTOR_LIMIT_EXCEEDED:"maximum-second-factor-count-exceeded",BLOCKING_FUNCTION_ERROR_RESPONSE:"internal-error",RECAPTCHA_NOT_ENABLED:"recaptcha-not-enabled",MISSING_RECAPTCHA_TOKEN:"missing-recaptcha-token",INVALID_RECAPTCHA_TOKEN:"invalid-recaptcha-token",INVALID_RECAPTCHA_ACTION:"invalid-recaptcha-action",MISSING_CLIENT_TYPE:"missing-client-type",MISSING_RECAPTCHA_VERSION:"missing-recaptcha-version",INVALID_RECAPTCHA_VERSION:"invalid-recaptcha-version",INVALID_REQ_TYPE:"invalid-req-type"};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const E0e=new V2(3e4,6e4);function JA(t,e){return t.tenantId&&!e.tenantId?Object.assign(Object.assign({},e),{tenantId:t.tenantId}):e}async function ZA(t,e,r,n,a={}){return IX(t,a,async()=>{let s={},i={};n&&(e==="GET"?i=n:s={body:JSON.stringify(n)});const l=Q2(Object.assign({key:t.config.apiKey},i)).slice(1),c=await t._getAdditionalHeaders();c["Content-Type"]="application/json",t.languageCode&&(c["X-Firebase-Locale"]=t.languageCode);const u=Object.assign({method:e,headers:c},s);return the()||(u.referrerPolicy="no-referrer"),SX.fetch()(jX(t,t.config.apiHost,r,l),u)})}async function IX(t,e,r){t._canInitEmulator=!1;const n=Object.assign(Object.assign({},_0e),e);try{const a=new I0e(t),s=await Promise.race([r(),a.promise]);a.clearNetworkTimeout();const i=await s.json();if("needConfirmation"in i)throw bN(t,"account-exists-with-different-credential",i);if(s.ok&&!("errorMessage"in i))return i;{const l=s.ok?i.errorMessage:i.error.message,[c,u]=l.split(" : ");if(c==="FEDERATED_USER_ID_ALREADY_LINKED")throw bN(t,"credential-already-in-use",i);if(c==="EMAIL_EXISTS")throw bN(t,"email-already-in-use",i);if(c==="USER_DISABLED")throw bN(t,"user-disabled",i);const d=n[c]||c.toLowerCase().replace(/[_\s]+/g,"-");if(u)throw EX(t,d,u);kd(t,d)}}catch(a){if(a instanceof YA)throw a;kd(t,"network-request-failed",{message:String(a)})}}async function H2(t,e,r,n,a={}){const s=await ZA(t,e,r,n,a);return"mfaPendingCredential"in s&&kd(t,"multi-factor-auth-required",{_serverResponse:s}),s}function jX(t,e,r,n){const a=`${e}${r}?${n}`;return t.config.emulator?SO(t.config,a):`${t.config.apiScheme}://${a}`}function S0e(t){switch(t){case"ENFORCE":return"ENFORCE";case"AUDIT":return"AUDIT";case"OFF":return"OFF";default:return"ENFORCEMENT_STATE_UNSPECIFIED"}}class I0e{constructor(e){this.auth=e,this.timer=null,this.promise=new Promise((r,n)=>{this.timer=setTimeout(()=>n(wf(this.auth,"network-request-failed")),E0e.get())})}clearNetworkTimeout(){clearTimeout(this.timer)}}function bN(t,e,r){const n={appName:t.name};r.email&&(n.email=r.email),r.phoneNumber&&(n.phoneNumber=r.phoneNumber);const a=wf(t,e,n);return a.customData._tokenResponse=r,a}function HL(t){return t!==void 0&&t.enterprise!==void 0}class j0e{constructor(e){if(this.siteKey="",this.recaptchaEnforcementState=[],e.recaptchaKey===void 0)throw new Error("recaptchaKey undefined");this.siteKey=e.recaptchaKey.split("/")[3],this.recaptchaEnforcementState=e.recaptchaEnforcementState}getProviderEnforcementState(e){if(!this.recaptchaEnforcementState||this.recaptchaEnforcementState.length===0)return null;for(const r of this.recaptchaEnforcementState)if(r.provider&&r.provider===e)return S0e(r.enforcementState);return null}isProviderEnabled(e){return this.getProviderEnforcementState(e)==="ENFORCE"||this.getProviderEnforcementState(e)==="AUDIT"}}async function B0e(t,e){return ZA(t,"GET","/v2/recaptchaConfig",JA(t,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function P0e(t,e){return ZA(t,"POST","/v1/accounts:delete",e)}async function BX(t,e){return ZA(t,"POST","/v1/accounts:lookup",e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Dy(t){if(t)try{const e=new Date(Number(t));if(!isNaN(e.getTime()))return e.toUTCString()}catch{}}async function T0e(t,e=!1){const r=Fs(t),n=await r.getIdToken(e),a=IO(n);cn(a&&a.exp&&a.auth_time&&a.iat,r.auth,"internal-error");const s=typeof a.firebase=="object"?a.firebase:void 0,i=s==null?void 0:s.sign_in_provider;return{claims:a,token:n,authTime:Dy(Mj(a.auth_time)),issuedAtTime:Dy(Mj(a.iat)),expirationTime:Dy(Mj(a.exp)),signInProvider:i||null,signInSecondFactor:(s==null?void 0:s.sign_in_second_factor)||null}}function Mj(t){return Number(t)*1e3}function IO(t){const[e,r,n]=t.split(".");if(e===void 0||r===void 0||n===void 0)return y_("JWT malformed, contained fewer than 3 sections"),null;try{const a=hX(r);return a?JSON.parse(a):(y_("Failed to decode base64 JWT payload"),null)}catch(a){return y_("Caught error parsing JWT payload as JSON",a==null?void 0:a.toString()),null}}function $L(t){const e=IO(t);return cn(e,"internal-error"),cn(typeof e.exp<"u","internal-error"),cn(typeof e.iat<"u","internal-error"),Number(e.exp)-Number(e.iat)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Pb(t,e,r=!1){if(r)return e;try{return await e}catch(n){throw n instanceof YA&&k0e(n)&&t.auth.currentUser===t&&await t.auth.signOut(),n}}function k0e({code:t}){return t==="auth/user-disabled"||t==="auth/user-token-expired"}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class F0e{constructor(e){this.user=e,this.isRunning=!1,this.timerId=null,this.errorBackoff=3e4}_start(){this.isRunning||(this.isRunning=!0,this.schedule())}_stop(){this.isRunning&&(this.isRunning=!1,this.timerId!==null&&clearTimeout(this.timerId))}getInterval(e){var r;if(e){const n=this.errorBackoff;return this.errorBackoff=Math.min(this.errorBackoff*2,96e4),n}else{this.errorBackoff=3e4;const a=((r=this.user.stsTokenManager.expirationTime)!==null&&r!==void 0?r:0)-Date.now()-3e5;return Math.max(0,a)}}schedule(e=!1){if(!this.isRunning)return;const r=this.getInterval(e);this.timerId=setTimeout(async()=>{await this.iteration()},r)}async iteration(){try{await this.user.getIdToken(!0)}catch(e){(e==null?void 0:e.code)==="auth/network-request-failed"&&this.schedule(!0);return}this.schedule()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class $P{constructor(e,r){this.createdAt=e,this.lastLoginAt=r,this._initializeTime()}_initializeTime(){this.lastSignInTime=Dy(this.lastLoginAt),this.creationTime=Dy(this.createdAt)}_copy(e){this.createdAt=e.createdAt,this.lastLoginAt=e.lastLoginAt,this._initializeTime()}toJSON(){return{createdAt:this.createdAt,lastLoginAt:this.lastLoginAt}}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function NE(t){var e;const r=t.auth,n=await t.getIdToken(),a=await Pb(t,BX(r,{idToken:n}));cn(a==null?void 0:a.users.length,r,"internal-error");const s=a.users[0];t._notifyReloadListener(s);const i=!((e=s.providerUserInfo)===null||e===void 0)&&e.length?PX(s.providerUserInfo):[],l=D0e(t.providerData,i),c=t.isAnonymous,u=!(t.email&&s.passwordHash)&&!(l!=null&&l.length),d=c?u:!1,f={uid:s.localId,displayName:s.displayName||null,photoURL:s.photoUrl||null,email:s.email||null,emailVerified:s.emailVerified||!1,phoneNumber:s.phoneNumber||null,tenantId:s.tenantId||null,providerData:l,metadata:new $P(s.createdAt,s.lastLoginAt),isAnonymous:d};Object.assign(t,f)}async function O0e(t){const e=Fs(t);await NE(e),await e.auth._persistUserIfCurrent(e),e.auth._notifyListenersIfCurrent(e)}function D0e(t,e){return[...t.filter(n=>!e.some(a=>a.providerId===n.providerId)),...e]}function PX(t){return t.map(e=>{var{providerId:r}=e,n=_O(e,["providerId"]);return{providerId:r,uid:n.rawId||"",displayName:n.displayName||null,email:n.email||null,phoneNumber:n.phoneNumber||null,photoURL:n.photoUrl||null}})}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function R0e(t,e){const r=await IX(t,{},async()=>{const n=Q2({grant_type:"refresh_token",refresh_token:e}).slice(1),{tokenApiHost:a,apiKey:s}=t.config,i=jX(t,a,"/v1/token",`key=${s}`),l=await t._getAdditionalHeaders();return l["Content-Type"]="application/x-www-form-urlencoded",SX.fetch()(i,{method:"POST",headers:l,body:n})});return{accessToken:r.access_token,expiresIn:r.expires_in,refreshToken:r.refresh_token}}async function M0e(t,e){return ZA(t,"POST","/v2/accounts:revokeToken",JA(t,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Fx{constructor(){this.refreshToken=null,this.accessToken=null,this.expirationTime=null}get isExpired(){return!this.expirationTime||Date.now()>this.expirationTime-3e4}updateFromServerResponse(e){cn(e.idToken,"internal-error"),cn(typeof e.idToken<"u","internal-error"),cn(typeof e.refreshToken<"u","internal-error");const r="expiresIn"in e&&typeof e.expiresIn<"u"?Number(e.expiresIn):$L(e.idToken);this.updateTokensAndExpiration(e.idToken,e.refreshToken,r)}updateFromIdToken(e){cn(e.length!==0,"internal-error");const r=$L(e);this.updateTokensAndExpiration(e,null,r)}async getToken(e,r=!1){return!r&&this.accessToken&&!this.isExpired?this.accessToken:(cn(this.refreshToken,e,"user-token-expired"),this.refreshToken?(await this.refresh(e,this.refreshToken),this.accessToken):null)}clearRefreshToken(){this.refreshToken=null}async refresh(e,r){const{accessToken:n,refreshToken:a,expiresIn:s}=await R0e(e,r);this.updateTokensAndExpiration(n,a,Number(s))}updateTokensAndExpiration(e,r,n){this.refreshToken=r||null,this.accessToken=e||null,this.expirationTime=Date.now()+n*1e3}static fromJSON(e,r){const{refreshToken:n,accessToken:a,expirationTime:s}=r,i=new Fx;return n&&(cn(typeof n=="string","internal-error",{appName:e}),i.refreshToken=n),a&&(cn(typeof a=="string","internal-error",{appName:e}),i.accessToken=a),s&&(cn(typeof s=="number","internal-error",{appName:e}),i.expirationTime=s),i}toJSON(){return{refreshToken:this.refreshToken,accessToken:this.accessToken,expirationTime:this.expirationTime}}_assign(e){this.accessToken=e.accessToken,this.refreshToken=e.refreshToken,this.expirationTime=e.expirationTime}_clone(){return Object.assign(new Fx,this.toJSON())}_performRefresh(){return AA("not implemented")}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Bh(t,e){cn(typeof t=="string"||typeof t>"u","internal-error",{appName:e})}class hA{constructor(e){var{uid:r,auth:n,stsTokenManager:a}=e,s=_O(e,["uid","auth","stsTokenManager"]);this.providerId="firebase",this.proactiveRefresh=new F0e(this),this.reloadUserInfo=null,this.reloadListener=null,this.uid=r,this.auth=n,this.stsTokenManager=a,this.accessToken=a.accessToken,this.displayName=s.displayName||null,this.email=s.email||null,this.emailVerified=s.emailVerified||!1,this.phoneNumber=s.phoneNumber||null,this.photoURL=s.photoURL||null,this.isAnonymous=s.isAnonymous||!1,this.tenantId=s.tenantId||null,this.providerData=s.providerData?[...s.providerData]:[],this.metadata=new $P(s.createdAt||void 0,s.lastLoginAt||void 0)}async getIdToken(e){const r=await Pb(this,this.stsTokenManager.getToken(this.auth,e));return cn(r,this.auth,"internal-error"),this.accessToken!==r&&(this.accessToken=r,await this.auth._persistUserIfCurrent(this),this.auth._notifyListenersIfCurrent(this)),r}getIdTokenResult(e){return T0e(this,e)}reload(){return O0e(this)}_assign(e){this!==e&&(cn(this.uid===e.uid,this.auth,"internal-error"),this.displayName=e.displayName,this.photoURL=e.photoURL,this.email=e.email,this.emailVerified=e.emailVerified,this.phoneNumber=e.phoneNumber,this.isAnonymous=e.isAnonymous,this.tenantId=e.tenantId,this.providerData=e.providerData.map(r=>Object.assign({},r)),this.metadata._copy(e.metadata),this.stsTokenManager._assign(e.stsTokenManager))}_clone(e){const r=new hA(Object.assign(Object.assign({},this),{auth:e,stsTokenManager:this.stsTokenManager._clone()}));return r.metadata._copy(this.metadata),r}_onReload(e){cn(!this.reloadListener,this.auth,"internal-error"),this.reloadListener=e,this.reloadUserInfo&&(this._notifyReloadListener(this.reloadUserInfo),this.reloadUserInfo=null)}_notifyReloadListener(e){this.reloadListener?this.reloadListener(e):this.reloadUserInfo=e}_startProactiveRefresh(){this.proactiveRefresh._start()}_stopProactiveRefresh(){this.proactiveRefresh._stop()}async _updateTokensIfNecessary(e,r=!1){let n=!1;e.idToken&&e.idToken!==this.stsTokenManager.accessToken&&(this.stsTokenManager.updateFromServerResponse(e),n=!0),r&&await NE(this),await this.auth._persistUserIfCurrent(this),n&&this.auth._notifyListenersIfCurrent(this)}async delete(){if(Af(this.auth.app))return Promise.reject(wA(this.auth));const e=await this.getIdToken();return await Pb(this,P0e(this.auth,{idToken:e})),this.stsTokenManager.clearRefreshToken(),this.auth.signOut()}toJSON(){return Object.assign(Object.assign({uid:this.uid,email:this.email||void 0,emailVerified:this.emailVerified,displayName:this.displayName||void 0,isAnonymous:this.isAnonymous,photoURL:this.photoURL||void 0,phoneNumber:this.phoneNumber||void 0,tenantId:this.tenantId||void 0,providerData:this.providerData.map(e=>Object.assign({},e)),stsTokenManager:this.stsTokenManager.toJSON(),_redirectEventId:this._redirectEventId},this.metadata.toJSON()),{apiKey:this.auth.config.apiKey,appName:this.auth.name})}get refreshToken(){return this.stsTokenManager.refreshToken||""}static _fromJSON(e,r){var n,a,s,i,l,c,u,d;const f=(n=r.displayName)!==null&&n!==void 0?n:void 0,h=(a=r.email)!==null&&a!==void 0?a:void 0,A=(s=r.phoneNumber)!==null&&s!==void 0?s:void 0,m=(i=r.photoURL)!==null&&i!==void 0?i:void 0,p=(l=r.tenantId)!==null&&l!==void 0?l:void 0,g=(c=r._redirectEventId)!==null&&c!==void 0?c:void 0,x=(u=r.createdAt)!==null&&u!==void 0?u:void 0,y=(d=r.lastLoginAt)!==null&&d!==void 0?d:void 0,{uid:b,emailVerified:w,isAnonymous:j,providerData:I,stsTokenManager:_}=r;cn(b&&_,e,"internal-error");const E=Fx.fromJSON(this.name,_);cn(typeof b=="string",e,"internal-error"),Bh(f,e.name),Bh(h,e.name),cn(typeof w=="boolean",e,"internal-error"),cn(typeof j=="boolean",e,"internal-error"),Bh(A,e.name),Bh(m,e.name),Bh(p,e.name),Bh(g,e.name),Bh(x,e.name),Bh(y,e.name);const S=new hA({uid:b,auth:e,email:h,emailVerified:w,displayName:f,isAnonymous:j,photoURL:m,phoneNumber:A,tenantId:p,stsTokenManager:E,createdAt:x,lastLoginAt:y});return I&&Array.isArray(I)&&(S.providerData=I.map(k=>Object.assign({},k))),g&&(S._redirectEventId=g),S}static async _fromIdTokenResponse(e,r,n=!1){const a=new Fx;a.updateFromServerResponse(r);const s=new hA({uid:r.localId,auth:e,stsTokenManager:a,isAnonymous:n});return await NE(s),s}static async _fromGetAccountInfoResponse(e,r,n){const a=r.users[0];cn(a.localId!==void 0,"internal-error");const s=a.providerUserInfo!==void 0?PX(a.providerUserInfo):[],i=!(a.email&&a.passwordHash)&&!(s!=null&&s.length),l=new Fx;l.updateFromIdToken(n);const c=new hA({uid:a.localId,auth:e,stsTokenManager:l,isAnonymous:i}),u={uid:a.localId,displayName:a.displayName||null,photoURL:a.photoUrl||null,email:a.email||null,emailVerified:a.emailVerified||!1,phoneNumber:a.phoneNumber||null,tenantId:a.tenantId||null,providerData:s,metadata:new $P(a.createdAt,a.lastLoginAt),isAnonymous:!(a.email&&a.passwordHash)&&!(s!=null&&s.length)};return Object.assign(c,u),c}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const KL=new Map;function mA(t){RA(t instanceof Function,"Expected a class definition");let e=KL.get(t);return e?(RA(e instanceof t,"Instance stored in cache mismatched with class"),e):(e=new t,KL.set(t,e),e)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class TX{constructor(){this.type="NONE",this.storage={}}async _isAvailable(){return!0}async _set(e,r){this.storage[e]=r}async _get(e){const r=this.storage[e];return r===void 0?null:r}async _remove(e){delete this.storage[e]}_addListener(e,r){}_removeListener(e,r){}}TX.type="NONE";const GL=TX;/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function b_(t,e,r){return`firebase:${t}:${e}:${r}`}class Ox{constructor(e,r,n){this.persistence=e,this.auth=r,this.userKey=n;const{config:a,name:s}=this.auth;this.fullUserKey=b_(this.userKey,a.apiKey,s),this.fullPersistenceKey=b_("persistence",a.apiKey,s),this.boundEventHandler=r._onStorageEvent.bind(r),this.persistence._addListener(this.fullUserKey,this.boundEventHandler)}setCurrentUser(e){return this.persistence._set(this.fullUserKey,e.toJSON())}async getCurrentUser(){const e=await this.persistence._get(this.fullUserKey);return e?hA._fromJSON(this.auth,e):null}removeCurrentUser(){return this.persistence._remove(this.fullUserKey)}savePersistenceForRedirect(){return this.persistence._set(this.fullPersistenceKey,this.persistence.type)}async setPersistence(e){if(this.persistence===e)return;const r=await this.getCurrentUser();if(await this.removeCurrentUser(),this.persistence=e,r)return this.setCurrentUser(r)}delete(){this.persistence._removeListener(this.fullUserKey,this.boundEventHandler)}static async create(e,r,n="authUser"){if(!r.length)return new Ox(mA(GL),e,n);const a=(await Promise.all(r.map(async u=>{if(await u._isAvailable())return u}))).filter(u=>u);let s=a[0]||mA(GL);const i=b_(n,e.config.apiKey,e.name);let l=null;for(const u of r)try{const d=await u._get(i);if(d){const f=hA._fromJSON(e,d);u!==s&&(l=f),s=u;break}}catch{}const c=a.filter(u=>u._shouldAllowMigration);return!s._shouldAllowMigration||!c.length?new Ox(s,e,n):(s=c[0],l&&await s._set(i,l.toJSON()),await Promise.all(r.map(async u=>{if(u!==s)try{await u._remove(i)}catch{}})),new Ox(s,e,n))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function qL(t){const e=t.toLowerCase();if(e.includes("opera/")||e.includes("opr/")||e.includes("opios/"))return"Opera";if(DX(e))return"IEMobile";if(e.includes("msie")||e.includes("trident/"))return"IE";if(e.includes("edge/"))return"Edge";if(kX(e))return"Firefox";if(e.includes("silk/"))return"Silk";if(MX(e))return"Blackberry";if(LX(e))return"Webos";if(FX(e))return"Safari";if((e.includes("chrome/")||OX(e))&&!e.includes("edge/"))return"Chrome";if(RX(e))return"Android";{const r=/([a-zA-Z\d\.]+)\/[a-zA-Z\d\.]*$/,n=t.match(r);if((n==null?void 0:n.length)===2)return n[1]}return"Other"}function kX(t=Ki()){return/firefox\//i.test(t)}function FX(t=Ki()){const e=t.toLowerCase();return e.includes("safari/")&&!e.includes("chrome/")&&!e.includes("crios/")&&!e.includes("android")}function OX(t=Ki()){return/crios\//i.test(t)}function DX(t=Ki()){return/iemobile/i.test(t)}function RX(t=Ki()){return/android/i.test(t)}function MX(t=Ki()){return/blackberry/i.test(t)}function LX(t=Ki()){return/webos/i.test(t)}function jO(t=Ki()){return/iphone|ipad|ipod/i.test(t)||/macintosh/i.test(t)&&/mobile/i.test(t)}function L0e(t=Ki()){var e;return jO(t)&&!!(!((e=window.navigator)===null||e===void 0)&&e.standalone)}function U0e(){return ahe()&&document.documentMode===10}function UX(t=Ki()){return jO(t)||RX(t)||LX(t)||MX(t)||/windows phone/i.test(t)||DX(t)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function QX(t,e=[]){let r;switch(t){case"Browser":r=qL(Ki());break;case"Worker":r=`${qL(Ki())}-${t}`;break;default:r=t}const n=e.length?e.join(","):"FirebaseCore-web";return`${r}/JsCore/${Iv}/${n}`}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Q0e{constructor(e){this.auth=e,this.queue=[]}pushCallback(e,r){const n=s=>new Promise((i,l)=>{try{const c=e(s);i(c)}catch(c){l(c)}});n.onAbort=r,this.queue.push(n);const a=this.queue.length-1;return()=>{this.queue[a]=()=>Promise.resolve()}}async runMiddleware(e){if(this.auth.currentUser===e)return;const r=[];try{for(const n of this.queue)await n(e),n.onAbort&&r.push(n.onAbort)}catch(n){r.reverse();for(const a of r)try{a()}catch{}throw this.auth._errorFactory.create("login-blocked",{originalMessage:n==null?void 0:n.message})}}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function V0e(t,e={}){return ZA(t,"GET","/v2/passwordPolicy",JA(t,e))}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const H0e=6;class $0e{constructor(e){var r,n,a,s;const i=e.customStrengthOptions;this.customStrengthOptions={},this.customStrengthOptions.minPasswordLength=(r=i.minPasswordLength)!==null&&r!==void 0?r:H0e,i.maxPasswordLength&&(this.customStrengthOptions.maxPasswordLength=i.maxPasswordLength),i.containsLowercaseCharacter!==void 0&&(this.customStrengthOptions.containsLowercaseLetter=i.containsLowercaseCharacter),i.containsUppercaseCharacter!==void 0&&(this.customStrengthOptions.containsUppercaseLetter=i.containsUppercaseCharacter),i.containsNumericCharacter!==void 0&&(this.customStrengthOptions.containsNumericCharacter=i.containsNumericCharacter),i.containsNonAlphanumericCharacter!==void 0&&(this.customStrengthOptions.containsNonAlphanumericCharacter=i.containsNonAlphanumericCharacter),this.enforcementState=e.enforcementState,this.enforcementState==="ENFORCEMENT_STATE_UNSPECIFIED"&&(this.enforcementState="OFF"),this.allowedNonAlphanumericCharacters=(a=(n=e.allowedNonAlphanumericCharacters)===null||n===void 0?void 0:n.join(""))!==null&&a!==void 0?a:"",this.forceUpgradeOnSignin=(s=e.forceUpgradeOnSignin)!==null&&s!==void 0?s:!1,this.schemaVersion=e.schemaVersion}validatePassword(e){var r,n,a,s,i,l;const c={isValid:!0,passwordPolicy:this};return this.validatePasswordLengthOptions(e,c),this.validatePasswordCharacterOptions(e,c),c.isValid&&(c.isValid=(r=c.meetsMinPasswordLength)!==null&&r!==void 0?r:!0),c.isValid&&(c.isValid=(n=c.meetsMaxPasswordLength)!==null&&n!==void 0?n:!0),c.isValid&&(c.isValid=(a=c.containsLowercaseLetter)!==null&&a!==void 0?a:!0),c.isValid&&(c.isValid=(s=c.containsUppercaseLetter)!==null&&s!==void 0?s:!0),c.isValid&&(c.isValid=(i=c.containsNumericCharacter)!==null&&i!==void 0?i:!0),c.isValid&&(c.isValid=(l=c.containsNonAlphanumericCharacter)!==null&&l!==void 0?l:!0),c}validatePasswordLengthOptions(e,r){const n=this.customStrengthOptions.minPasswordLength,a=this.customStrengthOptions.maxPasswordLength;n&&(r.meetsMinPasswordLength=e.length>=n),a&&(r.meetsMaxPasswordLength=e.length<=a)}validatePasswordCharacterOptions(e,r){this.updatePasswordCharacterOptionsStatuses(r,!1,!1,!1,!1);let n;for(let a=0;a<e.length;a++)n=e.charAt(a),this.updatePasswordCharacterOptionsStatuses(r,n>="a"&&n<="z",n>="A"&&n<="Z",n>="0"&&n<="9",this.allowedNonAlphanumericCharacters.includes(n))}updatePasswordCharacterOptionsStatuses(e,r,n,a,s){this.customStrengthOptions.containsLowercaseLetter&&(e.containsLowercaseLetter||(e.containsLowercaseLetter=r)),this.customStrengthOptions.containsUppercaseLetter&&(e.containsUppercaseLetter||(e.containsUppercaseLetter=n)),this.customStrengthOptions.containsNumericCharacter&&(e.containsNumericCharacter||(e.containsNumericCharacter=a)),this.customStrengthOptions.containsNonAlphanumericCharacter&&(e.containsNonAlphanumericCharacter||(e.containsNonAlphanumericCharacter=s))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class K0e{constructor(e,r,n,a){this.app=e,this.heartbeatServiceProvider=r,this.appCheckServiceProvider=n,this.config=a,this.currentUser=null,this.emulatorConfig=null,this.operations=Promise.resolve(),this.authStateSubscription=new zL(this),this.idTokenSubscription=new zL(this),this.beforeStateQueue=new Q0e(this),this.redirectUser=null,this.isProactiveRefreshEnabled=!1,this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION=1,this._canInitEmulator=!0,this._isInitialized=!1,this._deleted=!1,this._initializationPromise=null,this._popupRedirectResolver=null,this._errorFactory=_X,this._agentRecaptchaConfig=null,this._tenantRecaptchaConfigs={},this._projectPasswordPolicy=null,this._tenantPasswordPolicies={},this.lastNotifiedUid=void 0,this.languageCode=null,this.tenantId=null,this.settings={appVerificationDisabledForTesting:!1},this.frameworks=[],this.name=e.name,this.clientVersion=a.sdkClientVersion}_initializeWithPersistence(e,r){return r&&(this._popupRedirectResolver=mA(r)),this._initializationPromise=this.queue(async()=>{var n,a;if(!this._deleted&&(this.persistenceManager=await Ox.create(this,e),!this._deleted)){if(!((n=this._popupRedirectResolver)===null||n===void 0)&&n._shouldInitProactively)try{await this._popupRedirectResolver._initialize(this)}catch{}await this.initializeCurrentUser(r),this.lastNotifiedUid=((a=this.currentUser)===null||a===void 0?void 0:a.uid)||null,!this._deleted&&(this._isInitialized=!0)}}),this._initializationPromise}async _onStorageEvent(){if(this._deleted)return;const e=await this.assertedPersistence.getCurrentUser();if(!(!this.currentUser&&!e)){if(this.currentUser&&e&&this.currentUser.uid===e.uid){this._currentUser._assign(e),await this.currentUser.getIdToken();return}await this._updateCurrentUser(e,!0)}}async initializeCurrentUserFromIdToken(e){try{const r=await BX(this,{idToken:e}),n=await hA._fromGetAccountInfoResponse(this,r,e);await this.directlySetCurrentUser(n)}catch(r){console.warn("FirebaseServerApp could not login user with provided authIdToken: ",r),await this.directlySetCurrentUser(null)}}async initializeCurrentUser(e){var r;if(Af(this.app)){const i=this.app.settings.authIdToken;return i?new Promise(l=>{setTimeout(()=>this.initializeCurrentUserFromIdToken(i).then(l,l))}):this.directlySetCurrentUser(null)}const n=await this.assertedPersistence.getCurrentUser();let a=n,s=!1;if(e&&this.config.authDomain){await this.getOrInitRedirectPersistenceManager();const i=(r=this.redirectUser)===null||r===void 0?void 0:r._redirectEventId,l=a==null?void 0:a._redirectEventId,c=await this.tryRedirectSignIn(e);(!i||i===l)&&(c!=null&&c.user)&&(a=c.user,s=!0)}if(!a)return this.directlySetCurrentUser(null);if(!a._redirectEventId){if(s)try{await this.beforeStateQueue.runMiddleware(a)}catch(i){a=n,this._popupRedirectResolver._overrideRedirectResult(this,()=>Promise.reject(i))}return a?this.reloadAndSetCurrentUserOrClear(a):this.directlySetCurrentUser(null)}return cn(this._popupRedirectResolver,this,"argument-error"),await this.getOrInitRedirectPersistenceManager(),this.redirectUser&&this.redirectUser._redirectEventId===a._redirectEventId?this.directlySetCurrentUser(a):this.reloadAndSetCurrentUserOrClear(a)}async tryRedirectSignIn(e){let r=null;try{r=await this._popupRedirectResolver._completeRedirectFn(this,e,!0)}catch{await this._setRedirectUser(null)}return r}async reloadAndSetCurrentUserOrClear(e){try{await NE(e)}catch(r){if((r==null?void 0:r.code)!=="auth/network-request-failed")return this.directlySetCurrentUser(null)}return this.directlySetCurrentUser(e)}useDeviceLanguage(){this.languageCode=C0e()}async _delete(){this._deleted=!0}async updateCurrentUser(e){if(Af(this.app))return Promise.reject(wA(this));const r=e?Fs(e):null;return r&&cn(r.auth.config.apiKey===this.config.apiKey,this,"invalid-user-token"),this._updateCurrentUser(r&&r._clone(this))}async _updateCurrentUser(e,r=!1){if(!this._deleted)return e&&cn(this.tenantId===e.tenantId,this,"tenant-id-mismatch"),r||await this.beforeStateQueue.runMiddleware(e),this.queue(async()=>{await this.directlySetCurrentUser(e),this.notifyAuthListeners()})}async signOut(){return Af(this.app)?Promise.reject(wA(this)):(await this.beforeStateQueue.runMiddleware(null),(this.redirectPersistenceManager||this._popupRedirectResolver)&&await this._setRedirectUser(null),this._updateCurrentUser(null,!0))}setPersistence(e){return Af(this.app)?Promise.reject(wA(this)):this.queue(async()=>{await this.assertedPersistence.setPersistence(mA(e))})}_getRecaptchaConfig(){return this.tenantId==null?this._agentRecaptchaConfig:this._tenantRecaptchaConfigs[this.tenantId]}async validatePassword(e){this._getPasswordPolicyInternal()||await this._updatePasswordPolicy();const r=this._getPasswordPolicyInternal();return r.schemaVersion!==this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION?Promise.reject(this._errorFactory.create("unsupported-password-policy-schema-version",{})):r.validatePassword(e)}_getPasswordPolicyInternal(){return this.tenantId===null?this._projectPasswordPolicy:this._tenantPasswordPolicies[this.tenantId]}async _updatePasswordPolicy(){const e=await V0e(this),r=new $0e(e);this.tenantId===null?this._projectPasswordPolicy=r:this._tenantPasswordPolicies[this.tenantId]=r}_getPersistence(){return this.assertedPersistence.persistence.type}_updateErrorMap(e){this._errorFactory=new U2("auth","Firebase",e())}onAuthStateChanged(e,r,n){return this.registerStateListener(this.authStateSubscription,e,r,n)}beforeAuthStateChanged(e,r){return this.beforeStateQueue.pushCallback(e,r)}onIdTokenChanged(e,r,n){return this.registerStateListener(this.idTokenSubscription,e,r,n)}authStateReady(){return new Promise((e,r)=>{if(this.currentUser)e();else{const n=this.onAuthStateChanged(()=>{n(),e()},r)}})}async revokeAccessToken(e){if(this.currentUser){const r=await this.currentUser.getIdToken(),n={providerId:"apple.com",tokenType:"ACCESS_TOKEN",token:e,idToken:r};this.tenantId!=null&&(n.tenantId=this.tenantId),await M0e(this,n)}}toJSON(){var e;return{apiKey:this.config.apiKey,authDomain:this.config.authDomain,appName:this.name,currentUser:(e=this._currentUser)===null||e===void 0?void 0:e.toJSON()}}async _setRedirectUser(e,r){const n=await this.getOrInitRedirectPersistenceManager(r);return e===null?n.removeCurrentUser():n.setCurrentUser(e)}async getOrInitRedirectPersistenceManager(e){if(!this.redirectPersistenceManager){const r=e&&mA(e)||this._popupRedirectResolver;cn(r,this,"argument-error"),this.redirectPersistenceManager=await Ox.create(this,[mA(r._redirectPersistence)],"redirectUser"),this.redirectUser=await this.redirectPersistenceManager.getCurrentUser()}return this.redirectPersistenceManager}async _redirectUserForId(e){var r,n;return this._isInitialized&&await this.queue(async()=>{}),((r=this._currentUser)===null||r===void 0?void 0:r._redirectEventId)===e?this._currentUser:((n=this.redirectUser)===null||n===void 0?void 0:n._redirectEventId)===e?this.redirectUser:null}async _persistUserIfCurrent(e){if(e===this.currentUser)return this.queue(async()=>this.directlySetCurrentUser(e))}_notifyListenersIfCurrent(e){e===this.currentUser&&this.notifyAuthListeners()}_key(){return`${this.config.authDomain}:${this.config.apiKey}:${this.name}`}_startProactiveRefresh(){this.isProactiveRefreshEnabled=!0,this.currentUser&&this._currentUser._startProactiveRefresh()}_stopProactiveRefresh(){this.isProactiveRefreshEnabled=!1,this.currentUser&&this._currentUser._stopProactiveRefresh()}get _currentUser(){return this.currentUser}notifyAuthListeners(){var e,r;if(!this._isInitialized)return;this.idTokenSubscription.next(this.currentUser);const n=(r=(e=this.currentUser)===null||e===void 0?void 0:e.uid)!==null&&r!==void 0?r:null;this.lastNotifiedUid!==n&&(this.lastNotifiedUid=n,this.authStateSubscription.next(this.currentUser))}registerStateListener(e,r,n,a){if(this._deleted)return()=>{};const s=typeof r=="function"?r:r.next.bind(r);let i=!1;const l=this._isInitialized?Promise.resolve():this._initializationPromise;if(cn(l,this,"internal-error"),l.then(()=>{i||s(this.currentUser)}),typeof r=="function"){const c=e.addObserver(r,n,a);return()=>{i=!0,c()}}else{const c=e.addObserver(r);return()=>{i=!0,c()}}}async directlySetCurrentUser(e){this.currentUser&&this.currentUser!==e&&this._currentUser._stopProactiveRefresh(),e&&this.isProactiveRefreshEnabled&&e._startProactiveRefresh(),this.currentUser=e,e?await this.assertedPersistence.setCurrentUser(e):await this.assertedPersistence.removeCurrentUser()}queue(e){return this.operations=this.operations.then(e,e),this.operations}get assertedPersistence(){return cn(this.persistenceManager,this,"internal-error"),this.persistenceManager}_logFramework(e){!e||this.frameworks.includes(e)||(this.frameworks.push(e),this.frameworks.sort(),this.clientVersion=QX(this.config.clientPlatform,this._getFrameworks()))}_getFrameworks(){return this.frameworks}async _getAdditionalHeaders(){var e;const r={"X-Client-Version":this.clientVersion};this.app.options.appId&&(r["X-Firebase-gmpid"]=this.app.options.appId);const n=await((e=this.heartbeatServiceProvider.getImmediate({optional:!0}))===null||e===void 0?void 0:e.getHeartbeatsHeader());n&&(r["X-Firebase-Client"]=n);const a=await this._getAppCheckToken();return a&&(r["X-Firebase-AppCheck"]=a),r}async _getAppCheckToken(){var e;const r=await((e=this.appCheckServiceProvider.getImmediate({optional:!0}))===null||e===void 0?void 0:e.getToken());return r!=null&&r.error&&b0e(`Error while retrieving App Check token: ${r.error}`),r==null?void 0:r.token}}function tm(t){return Fs(t)}class zL{constructor(e){this.auth=e,this.observer=null,this.addObserver=uhe(r=>this.observer=r)}get next(){return cn(this.observer,this.auth,"internal-error"),this.observer.next.bind(this.observer)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let FI={async loadJS(){throw new Error("Unable to load external scripts")},recaptchaV2Script:"",recaptchaEnterpriseScript:"",gapiScript:""};function G0e(t){FI=t}function VX(t){return FI.loadJS(t)}function q0e(){return FI.recaptchaEnterpriseScript}function z0e(){return FI.gapiScript}function W0e(t){return`__${t}${Math.floor(Math.random()*1e6)}`}const X0e="recaptcha-enterprise",Y0e="NO_RECAPTCHA";class J0e{constructor(e){this.type=X0e,this.auth=tm(e)}async verify(e="verify",r=!1){async function n(s){if(!r){if(s.tenantId==null&&s._agentRecaptchaConfig!=null)return s._agentRecaptchaConfig.siteKey;if(s.tenantId!=null&&s._tenantRecaptchaConfigs[s.tenantId]!==void 0)return s._tenantRecaptchaConfigs[s.tenantId].siteKey}return new Promise(async(i,l)=>{B0e(s,{clientType:"CLIENT_TYPE_WEB",version:"RECAPTCHA_ENTERPRISE"}).then(c=>{if(c.recaptchaKey===void 0)l(new Error("recaptcha Enterprise site key undefined"));else{const u=new j0e(c);return s.tenantId==null?s._agentRecaptchaConfig=u:s._tenantRecaptchaConfigs[s.tenantId]=u,i(u.siteKey)}}).catch(c=>{l(c)})})}function a(s,i,l){const c=window.grecaptcha;HL(c)?c.enterprise.ready(()=>{c.enterprise.execute(s,{action:e}).then(u=>{i(u)}).catch(()=>{i(Y0e)})}):l(Error("No reCAPTCHA enterprise script loaded."))}return new Promise((s,i)=>{n(this.auth).then(l=>{if(!r&&HL(window.grecaptcha))a(l,s,i);else{if(typeof window>"u"){i(new Error("RecaptchaVerifier is only supported in browser"));return}let c=q0e();c.length!==0&&(c+=l),VX(c).then(()=>{a(l,s,i)}).catch(u=>{i(u)})}}).catch(l=>{i(l)})})}}async function WL(t,e,r,n=!1){const a=new J0e(t);let s;try{s=await a.verify(r)}catch{s=await a.verify(r,!0)}const i=Object.assign({},e);return n?Object.assign(i,{captchaResp:s}):Object.assign(i,{captchaResponse:s}),Object.assign(i,{clientType:"CLIENT_TYPE_WEB"}),Object.assign(i,{recaptchaVersion:"RECAPTCHA_ENTERPRISE"}),i}async function CE(t,e,r,n){var a;if(!((a=t._getRecaptchaConfig())===null||a===void 0)&&a.isProviderEnabled("EMAIL_PASSWORD_PROVIDER")){const s=await WL(t,e,r,r==="getOobCode");return n(t,s)}else return n(t,e).catch(async s=>{if(s.code==="auth/missing-recaptcha-token"){console.log(`${r} is protected by reCAPTCHA Enterprise for this project. Automatically triggering the reCAPTCHA flow and restarting the flow.`);const i=await WL(t,e,r,r==="getOobCode");return n(t,i)}else return Promise.reject(s)})}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Z0e(t,e){const r=wO(t,"auth");if(r.isInitialized()){const a=r.getImmediate(),s=r.getOptions();if(bE(s,e??{}))return a;kd(a,"already-initialized")}return r.initialize({options:e})}function eme(t,e){const r=(e==null?void 0:e.persistence)||[],n=(Array.isArray(r)?r:[r]).map(mA);e!=null&&e.errorMap&&t._updateErrorMap(e.errorMap),t._initializeWithPersistence(n,e==null?void 0:e.popupRedirectResolver)}function tme(t,e,r){const n=tm(t);cn(n._canInitEmulator,n,"emulator-config-failed"),cn(/^https?:\/\//.test(e),n,"invalid-emulator-scheme");const a=!1,s=HX(e),{host:i,port:l}=rme(e),c=l===null?"":`:${l}`;n.config.emulator={url:`${s}//${i}${c}/`},n.settings.appVerificationDisabledForTesting=!0,n.emulatorConfig=Object.freeze({host:i,port:l,protocol:s.replace(":",""),options:Object.freeze({disableWarnings:a})}),nme()}function HX(t){const e=t.indexOf(":");return e<0?"":t.substr(0,e+1)}function rme(t){const e=HX(t),r=/(\/\/)?([^?#/]+)/.exec(t.substr(e.length));if(!r)return{host:"",port:null};const n=r[2].split("@").pop()||"",a=/^(\[[^\]]+\])(:|$)/.exec(n);if(a){const s=a[1];return{host:s,port:XL(n.substr(s.length+1))}}else{const[s,i]=n.split(":");return{host:s,port:XL(i)}}}function XL(t){if(!t)return null;const e=Number(t);return isNaN(e)?null:e}function nme(){function t(){const e=document.createElement("p"),r=e.style;e.innerText="Running in emulator mode. Do not use with production credentials.",r.position="fixed",r.width="100%",r.backgroundColor="#ffffff",r.border=".1em solid #000000",r.color="#b50000",r.bottom="0px",r.left="0px",r.margin="0px",r.zIndex="10000",r.textAlign="center",e.classList.add("firebase-emulator-warning"),document.body.appendChild(e)}typeof console<"u"&&typeof console.info=="function"&&console.info("WARNING: You are using the Auth Emulator, which is intended for local testing only.  Do not use with production credentials."),typeof window<"u"&&typeof document<"u"&&(document.readyState==="loading"?window.addEventListener("DOMContentLoaded",t):t())}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class BO{constructor(e,r){this.providerId=e,this.signInMethod=r}toJSON(){return AA("not implemented")}_getIdTokenResponse(e){return AA("not implemented")}_linkToIdToken(e,r){return AA("not implemented")}_getReauthenticationResolver(e){return AA("not implemented")}}async function ame(t,e){return ZA(t,"POST","/v1/accounts:signUp",e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function sme(t,e){return H2(t,"POST","/v1/accounts:signInWithPassword",JA(t,e))}async function ime(t,e){return ZA(t,"POST","/v1/accounts:sendOobCode",JA(t,e))}async function ome(t,e){return ime(t,e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function lme(t,e){return H2(t,"POST","/v1/accounts:signInWithEmailLink",JA(t,e))}async function cme(t,e){return H2(t,"POST","/v1/accounts:signInWithEmailLink",JA(t,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Tb extends BO{constructor(e,r,n,a=null){super("password",n),this._email=e,this._password=r,this._tenantId=a}static _fromEmailAndPassword(e,r){return new Tb(e,r,"password")}static _fromEmailAndCode(e,r,n=null){return new Tb(e,r,"emailLink",n)}toJSON(){return{email:this._email,password:this._password,signInMethod:this.signInMethod,tenantId:this._tenantId}}static fromJSON(e){const r=typeof e=="string"?JSON.parse(e):e;if(r!=null&&r.email&&(r!=null&&r.password)){if(r.signInMethod==="password")return this._fromEmailAndPassword(r.email,r.password);if(r.signInMethod==="emailLink")return this._fromEmailAndCode(r.email,r.password,r.tenantId)}return null}async _getIdTokenResponse(e){switch(this.signInMethod){case"password":const r={returnSecureToken:!0,email:this._email,password:this._password,clientType:"CLIENT_TYPE_WEB"};return CE(e,r,"signInWithPassword",sme);case"emailLink":return lme(e,{email:this._email,oobCode:this._password});default:kd(e,"internal-error")}}async _linkToIdToken(e,r){switch(this.signInMethod){case"password":const n={idToken:r,returnSecureToken:!0,email:this._email,password:this._password,clientType:"CLIENT_TYPE_WEB"};return CE(e,n,"signUpPassword",ame);case"emailLink":return cme(e,{idToken:r,email:this._email,oobCode:this._password});default:kd(e,"internal-error")}}_getReauthenticationResolver(e){return this._getIdTokenResponse(e)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Dx(t,e){return H2(t,"POST","/v1/accounts:signInWithIdp",JA(t,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ume="http://localhost";class Np extends BO{constructor(){super(...arguments),this.pendingToken=null}static _fromParams(e){const r=new Np(e.providerId,e.signInMethod);return e.idToken||e.accessToken?(e.idToken&&(r.idToken=e.idToken),e.accessToken&&(r.accessToken=e.accessToken),e.nonce&&!e.pendingToken&&(r.nonce=e.nonce),e.pendingToken&&(r.pendingToken=e.pendingToken)):e.oauthToken&&e.oauthTokenSecret?(r.accessToken=e.oauthToken,r.secret=e.oauthTokenSecret):kd("argument-error"),r}toJSON(){return{idToken:this.idToken,accessToken:this.accessToken,secret:this.secret,nonce:this.nonce,pendingToken:this.pendingToken,providerId:this.providerId,signInMethod:this.signInMethod}}static fromJSON(e){const r=typeof e=="string"?JSON.parse(e):e,{providerId:n,signInMethod:a}=r,s=_O(r,["providerId","signInMethod"]);if(!n||!a)return null;const i=new Np(n,a);return i.idToken=s.idToken||void 0,i.accessToken=s.accessToken||void 0,i.secret=s.secret,i.nonce=s.nonce,i.pendingToken=s.pendingToken||null,i}_getIdTokenResponse(e){const r=this.buildRequest();return Dx(e,r)}_linkToIdToken(e,r){const n=this.buildRequest();return n.idToken=r,Dx(e,n)}_getReauthenticationResolver(e){const r=this.buildRequest();return r.autoCreate=!1,Dx(e,r)}buildRequest(){const e={requestUri:ume,returnSecureToken:!0};if(this.pendingToken)e.pendingToken=this.pendingToken;else{const r={};this.idToken&&(r.id_token=this.idToken),this.accessToken&&(r.access_token=this.accessToken),this.secret&&(r.oauth_token_secret=this.secret),r.providerId=this.providerId,this.nonce&&!this.pendingToken&&(r.nonce=this.nonce),e.postBody=Q2(r)}return e}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function dme(t){switch(t){case"recoverEmail":return"RECOVER_EMAIL";case"resetPassword":return"PASSWORD_RESET";case"signIn":return"EMAIL_SIGNIN";case"verifyEmail":return"VERIFY_EMAIL";case"verifyAndChangeEmail":return"VERIFY_AND_CHANGE_EMAIL";case"revertSecondFactorAddition":return"REVERT_SECOND_FACTOR_ADDITION";default:return null}}function fme(t){const e=sy(iy(t)).link,r=e?sy(iy(e)).deep_link_id:null,n=sy(iy(t)).deep_link_id;return(n?sy(iy(n)).link:null)||n||r||e||t}class PO{constructor(e){var r,n,a,s,i,l;const c=sy(iy(e)),u=(r=c.apiKey)!==null&&r!==void 0?r:null,d=(n=c.oobCode)!==null&&n!==void 0?n:null,f=dme((a=c.mode)!==null&&a!==void 0?a:null);cn(u&&d&&f,"argument-error"),this.apiKey=u,this.operation=f,this.code=d,this.continueUrl=(s=c.continueUrl)!==null&&s!==void 0?s:null,this.languageCode=(i=c.languageCode)!==null&&i!==void 0?i:null,this.tenantId=(l=c.tenantId)!==null&&l!==void 0?l:null}static parseLink(e){const r=fme(e);try{return new PO(r)}catch{return null}}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class jv{constructor(){this.providerId=jv.PROVIDER_ID}static credential(e,r){return Tb._fromEmailAndPassword(e,r)}static credentialWithLink(e,r){const n=PO.parseLink(r);return cn(n,"argument-error"),Tb._fromEmailAndCode(e,n.code,n.tenantId)}}jv.PROVIDER_ID="password";jv.EMAIL_PASSWORD_SIGN_IN_METHOD="password";jv.EMAIL_LINK_SIGN_IN_METHOD="emailLink";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class $X{constructor(e){this.providerId=e,this.defaultLanguageCode=null,this.customParameters={}}setDefaultLanguage(e){this.defaultLanguageCode=e}setCustomParameters(e){return this.customParameters=e,this}getCustomParameters(){return this.customParameters}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class $2 extends $X{constructor(){super(...arguments),this.scopes=[]}addScope(e){return this.scopes.includes(e)||this.scopes.push(e),this}getScopes(){return[...this.scopes]}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Zh extends $2{constructor(){super("facebook.com")}static credential(e){return Np._fromParams({providerId:Zh.PROVIDER_ID,signInMethod:Zh.FACEBOOK_SIGN_IN_METHOD,accessToken:e})}static credentialFromResult(e){return Zh.credentialFromTaggedObject(e)}static credentialFromError(e){return Zh.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e||!("oauthAccessToken"in e)||!e.oauthAccessToken)return null;try{return Zh.credential(e.oauthAccessToken)}catch{return null}}}Zh.FACEBOOK_SIGN_IN_METHOD="facebook.com";Zh.PROVIDER_ID="facebook.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class e0 extends $2{constructor(){super("google.com"),this.addScope("profile")}static credential(e,r){return Np._fromParams({providerId:e0.PROVIDER_ID,signInMethod:e0.GOOGLE_SIGN_IN_METHOD,idToken:e,accessToken:r})}static credentialFromResult(e){return e0.credentialFromTaggedObject(e)}static credentialFromError(e){return e0.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e)return null;const{oauthIdToken:r,oauthAccessToken:n}=e;if(!r&&!n)return null;try{return e0.credential(r,n)}catch{return null}}}e0.GOOGLE_SIGN_IN_METHOD="google.com";e0.PROVIDER_ID="google.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class t0 extends $2{constructor(){super("github.com")}static credential(e){return Np._fromParams({providerId:t0.PROVIDER_ID,signInMethod:t0.GITHUB_SIGN_IN_METHOD,accessToken:e})}static credentialFromResult(e){return t0.credentialFromTaggedObject(e)}static credentialFromError(e){return t0.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e||!("oauthAccessToken"in e)||!e.oauthAccessToken)return null;try{return t0.credential(e.oauthAccessToken)}catch{return null}}}t0.GITHUB_SIGN_IN_METHOD="github.com";t0.PROVIDER_ID="github.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class r0 extends $2{constructor(){super("twitter.com")}static credential(e,r){return Np._fromParams({providerId:r0.PROVIDER_ID,signInMethod:r0.TWITTER_SIGN_IN_METHOD,oauthToken:e,oauthTokenSecret:r})}static credentialFromResult(e){return r0.credentialFromTaggedObject(e)}static credentialFromError(e){return r0.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e)return null;const{oauthAccessToken:r,oauthTokenSecret:n}=e;if(!r||!n)return null;try{return r0.credential(r,n)}catch{return null}}}r0.TWITTER_SIGN_IN_METHOD="twitter.com";r0.PROVIDER_ID="twitter.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Ame(t,e){return H2(t,"POST","/v1/accounts:signUp",JA(t,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Cp{constructor(e){this.user=e.user,this.providerId=e.providerId,this._tokenResponse=e._tokenResponse,this.operationType=e.operationType}static async _fromIdTokenResponse(e,r,n,a=!1){const s=await hA._fromIdTokenResponse(e,n,a),i=YL(n);return new Cp({user:s,providerId:i,_tokenResponse:n,operationType:r})}static async _forOperation(e,r,n){await e._updateTokensIfNecessary(n,!0);const a=YL(n);return new Cp({user:e,providerId:a,_tokenResponse:n,operationType:r})}}function YL(t){return t.providerId?t.providerId:"phoneNumber"in t?"phone":null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class _E extends YA{constructor(e,r,n,a){var s;super(r.code,r.message),this.operationType=n,this.user=a,Object.setPrototypeOf(this,_E.prototype),this.customData={appName:e.name,tenantId:(s=e.tenantId)!==null&&s!==void 0?s:void 0,_serverResponse:r.customData._serverResponse,operationType:n}}static _fromErrorAndOperation(e,r,n,a){return new _E(e,r,n,a)}}function KX(t,e,r,n){return(e==="reauthenticate"?r._getReauthenticationResolver(t):r._getIdTokenResponse(t)).catch(s=>{throw s.code==="auth/multi-factor-auth-required"?_E._fromErrorAndOperation(t,s,e,n):s})}async function hme(t,e,r=!1){const n=await Pb(t,e._linkToIdToken(t.auth,await t.getIdToken()),r);return Cp._forOperation(t,"link",n)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function mme(t,e,r=!1){const{auth:n}=t;if(Af(n.app))return Promise.reject(wA(n));const a="reauthenticate";try{const s=await Pb(t,KX(n,a,e,t),r);cn(s.idToken,n,"internal-error");const i=IO(s.idToken);cn(i,n,"internal-error");const{sub:l}=i;return cn(t.uid===l,n,"user-mismatch"),Cp._forOperation(t,a,s)}catch(s){throw(s==null?void 0:s.code)==="auth/user-not-found"&&kd(n,"user-mismatch"),s}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function GX(t,e,r=!1){if(Af(t.app))return Promise.reject(wA(t));const n="signIn",a=await KX(t,n,e),s=await Cp._fromIdTokenResponse(t,n,a);return r||await t._updateCurrentUser(s.user),s}async function pme(t,e){return GX(tm(t),e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function qX(t){const e=tm(t);e._getPasswordPolicyInternal()&&await e._updatePasswordPolicy()}async function gme(t,e,r){const n=tm(t);await CE(n,{requestType:"PASSWORD_RESET",email:e,clientType:"CLIENT_TYPE_WEB"},"getOobCode",ome)}async function xme(t,e,r){if(Af(t.app))return Promise.reject(wA(t));const n=tm(t),i=await CE(n,{returnSecureToken:!0,email:e,password:r,clientType:"CLIENT_TYPE_WEB"},"signUpPassword",Ame).catch(c=>{throw c.code==="auth/password-does-not-meet-requirements"&&qX(t),c}),l=await Cp._fromIdTokenResponse(n,"signIn",i);return await n._updateCurrentUser(l.user),l}function vme(t,e,r){return Af(t.app)?Promise.reject(wA(t)):pme(Fs(t),jv.credential(e,r)).catch(async n=>{throw n.code==="auth/password-does-not-meet-requirements"&&qX(t),n})}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function w_(t,e){return Fs(t).setPersistence(e)}function yme(t,e,r,n){return Fs(t).onIdTokenChanged(e,r,n)}function bme(t,e,r){return Fs(t).beforeAuthStateChanged(e,r)}function TO(t,e,r,n){return Fs(t).onAuthStateChanged(e,r,n)}function kO(t){return Fs(t).signOut()}const EE="__sak";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class zX{constructor(e,r){this.storageRetriever=e,this.type=r}_isAvailable(){try{return this.storage?(this.storage.setItem(EE,"1"),this.storage.removeItem(EE),Promise.resolve(!0)):Promise.resolve(!1)}catch{return Promise.resolve(!1)}}_set(e,r){return this.storage.setItem(e,JSON.stringify(r)),Promise.resolve()}_get(e){const r=this.storage.getItem(e);return Promise.resolve(r?JSON.parse(r):null)}_remove(e){return this.storage.removeItem(e),Promise.resolve()}get storage(){return this.storageRetriever()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const wme=1e3,Nme=10;class WX extends zX{constructor(){super(()=>window.localStorage,"LOCAL"),this.boundEventHandler=(e,r)=>this.onStorageEvent(e,r),this.listeners={},this.localCache={},this.pollTimer=null,this.fallbackToPolling=UX(),this._shouldAllowMigration=!0}forAllChangedKeys(e){for(const r of Object.keys(this.listeners)){const n=this.storage.getItem(r),a=this.localCache[r];n!==a&&e(r,a,n)}}onStorageEvent(e,r=!1){if(!e.key){this.forAllChangedKeys((i,l,c)=>{this.notifyListeners(i,c)});return}const n=e.key;r?this.detachListener():this.stopPolling();const a=()=>{const i=this.storage.getItem(n);!r&&this.localCache[n]===i||this.notifyListeners(n,i)},s=this.storage.getItem(n);U0e()&&s!==e.newValue&&e.newValue!==e.oldValue?setTimeout(a,Nme):a()}notifyListeners(e,r){this.localCache[e]=r;const n=this.listeners[e];if(n)for(const a of Array.from(n))a(r&&JSON.parse(r))}startPolling(){this.stopPolling(),this.pollTimer=setInterval(()=>{this.forAllChangedKeys((e,r,n)=>{this.onStorageEvent(new StorageEvent("storage",{key:e,oldValue:r,newValue:n}),!0)})},wme)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}attachListener(){window.addEventListener("storage",this.boundEventHandler)}detachListener(){window.removeEventListener("storage",this.boundEventHandler)}_addListener(e,r){Object.keys(this.listeners).length===0&&(this.fallbackToPolling?this.startPolling():this.attachListener()),this.listeners[e]||(this.listeners[e]=new Set,this.localCache[e]=this.storage.getItem(e)),this.listeners[e].add(r)}_removeListener(e,r){this.listeners[e]&&(this.listeners[e].delete(r),this.listeners[e].size===0&&delete this.listeners[e]),Object.keys(this.listeners).length===0&&(this.detachListener(),this.stopPolling())}async _set(e,r){await super._set(e,r),this.localCache[e]=JSON.stringify(r)}async _get(e){const r=await super._get(e);return this.localCache[e]=JSON.stringify(r),r}async _remove(e){await super._remove(e),delete this.localCache[e]}}WX.type="LOCAL";const FO=WX;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class XX extends zX{constructor(){super(()=>window.sessionStorage,"SESSION")}_addListener(e,r){}_removeListener(e,r){}}XX.type="SESSION";const OO=XX;/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Cme(t){return Promise.all(t.map(async e=>{try{return{fulfilled:!0,value:await e}}catch(r){return{fulfilled:!1,reason:r}}}))}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class OI{constructor(e){this.eventTarget=e,this.handlersMap={},this.boundEventHandler=this.handleEvent.bind(this)}static _getInstance(e){const r=this.receivers.find(a=>a.isListeningto(e));if(r)return r;const n=new OI(e);return this.receivers.push(n),n}isListeningto(e){return this.eventTarget===e}async handleEvent(e){const r=e,{eventId:n,eventType:a,data:s}=r.data,i=this.handlersMap[a];if(!(i!=null&&i.size))return;r.ports[0].postMessage({status:"ack",eventId:n,eventType:a});const l=Array.from(i).map(async u=>u(r.origin,s)),c=await Cme(l);r.ports[0].postMessage({status:"done",eventId:n,eventType:a,response:c})}_subscribe(e,r){Object.keys(this.handlersMap).length===0&&this.eventTarget.addEventListener("message",this.boundEventHandler),this.handlersMap[e]||(this.handlersMap[e]=new Set),this.handlersMap[e].add(r)}_unsubscribe(e,r){this.handlersMap[e]&&r&&this.handlersMap[e].delete(r),(!r||this.handlersMap[e].size===0)&&delete this.handlersMap[e],Object.keys(this.handlersMap).length===0&&this.eventTarget.removeEventListener("message",this.boundEventHandler)}}OI.receivers=[];/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function DO(t="",e=10){let r="";for(let n=0;n<e;n++)r+=Math.floor(Math.random()*10);return t+r}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class _me{constructor(e){this.target=e,this.handlers=new Set}removeMessageHandler(e){e.messageChannel&&(e.messageChannel.port1.removeEventListener("message",e.onMessage),e.messageChannel.port1.close()),this.handlers.delete(e)}async _send(e,r,n=50){const a=typeof MessageChannel<"u"?new MessageChannel:null;if(!a)throw new Error("connection_unavailable");let s,i;return new Promise((l,c)=>{const u=DO("",20);a.port1.start();const d=setTimeout(()=>{c(new Error("unsupported_event"))},n);i={messageChannel:a,onMessage(f){const h=f;if(h.data.eventId===u)switch(h.data.status){case"ack":clearTimeout(d),s=setTimeout(()=>{c(new Error("timeout"))},3e3);break;case"done":clearTimeout(s),l(h.data.response);break;default:clearTimeout(d),clearTimeout(s),c(new Error("invalid_response"));break}}},this.handlers.add(i),a.port1.addEventListener("message",i.onMessage),this.target.postMessage({eventType:e,eventId:u,data:r},[a.port2])}).finally(()=>{i&&this.removeMessageHandler(i)})}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Nf(){return window}function Eme(t){Nf().location.href=t}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function YX(){return typeof Nf().WorkerGlobalScope<"u"&&typeof Nf().importScripts=="function"}async function Sme(){if(!(navigator!=null&&navigator.serviceWorker))return null;try{return(await navigator.serviceWorker.ready).active}catch{return null}}function Ime(){var t;return((t=navigator==null?void 0:navigator.serviceWorker)===null||t===void 0?void 0:t.controller)||null}function jme(){return YX()?self:null}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const JX="firebaseLocalStorageDb",Bme=1,SE="firebaseLocalStorage",ZX="fbase_key";class K2{constructor(e){this.request=e}toPromise(){return new Promise((e,r)=>{this.request.addEventListener("success",()=>{e(this.request.result)}),this.request.addEventListener("error",()=>{r(this.request.error)})})}}function DI(t,e){return t.transaction([SE],e?"readwrite":"readonly").objectStore(SE)}function Pme(){const t=indexedDB.deleteDatabase(JX);return new K2(t).toPromise()}function KP(){const t=indexedDB.open(JX,Bme);return new Promise((e,r)=>{t.addEventListener("error",()=>{r(t.error)}),t.addEventListener("upgradeneeded",()=>{const n=t.result;try{n.createObjectStore(SE,{keyPath:ZX})}catch(a){r(a)}}),t.addEventListener("success",async()=>{const n=t.result;n.objectStoreNames.contains(SE)?e(n):(n.close(),await Pme(),e(await KP()))})})}async function JL(t,e,r){const n=DI(t,!0).put({[ZX]:e,value:r});return new K2(n).toPromise()}async function Tme(t,e){const r=DI(t,!1).get(e),n=await new K2(r).toPromise();return n===void 0?null:n.value}function ZL(t,e){const r=DI(t,!0).delete(e);return new K2(r).toPromise()}const kme=800,Fme=3;class eY{constructor(){this.type="LOCAL",this._shouldAllowMigration=!0,this.listeners={},this.localCache={},this.pollTimer=null,this.pendingWrites=0,this.receiver=null,this.sender=null,this.serviceWorkerReceiverAvailable=!1,this.activeServiceWorker=null,this._workerInitializationPromise=this.initializeServiceWorkerMessaging().then(()=>{},()=>{})}async _openDb(){return this.db?this.db:(this.db=await KP(),this.db)}async _withRetries(e){let r=0;for(;;)try{const n=await this._openDb();return await e(n)}catch(n){if(r++>Fme)throw n;this.db&&(this.db.close(),this.db=void 0)}}async initializeServiceWorkerMessaging(){return YX()?this.initializeReceiver():this.initializeSender()}async initializeReceiver(){this.receiver=OI._getInstance(jme()),this.receiver._subscribe("keyChanged",async(e,r)=>({keyProcessed:(await this._poll()).includes(r.key)})),this.receiver._subscribe("ping",async(e,r)=>["keyChanged"])}async initializeSender(){var e,r;if(this.activeServiceWorker=await Sme(),!this.activeServiceWorker)return;this.sender=new _me(this.activeServiceWorker);const n=await this.sender._send("ping",{},800);n&&!((e=n[0])===null||e===void 0)&&e.fulfilled&&!((r=n[0])===null||r===void 0)&&r.value.includes("keyChanged")&&(this.serviceWorkerReceiverAvailable=!0)}async notifyServiceWorker(e){if(!(!this.sender||!this.activeServiceWorker||Ime()!==this.activeServiceWorker))try{await this.sender._send("keyChanged",{key:e},this.serviceWorkerReceiverAvailable?800:50)}catch{}}async _isAvailable(){try{if(!indexedDB)return!1;const e=await KP();return await JL(e,EE,"1"),await ZL(e,EE),!0}catch{}return!1}async _withPendingWrite(e){this.pendingWrites++;try{await e()}finally{this.pendingWrites--}}async _set(e,r){return this._withPendingWrite(async()=>(await this._withRetries(n=>JL(n,e,r)),this.localCache[e]=r,this.notifyServiceWorker(e)))}async _get(e){const r=await this._withRetries(n=>Tme(n,e));return this.localCache[e]=r,r}async _remove(e){return this._withPendingWrite(async()=>(await this._withRetries(r=>ZL(r,e)),delete this.localCache[e],this.notifyServiceWorker(e)))}async _poll(){const e=await this._withRetries(a=>{const s=DI(a,!1).getAll();return new K2(s).toPromise()});if(!e)return[];if(this.pendingWrites!==0)return[];const r=[],n=new Set;if(e.length!==0)for(const{fbase_key:a,value:s}of e)n.add(a),JSON.stringify(this.localCache[a])!==JSON.stringify(s)&&(this.notifyListeners(a,s),r.push(a));for(const a of Object.keys(this.localCache))this.localCache[a]&&!n.has(a)&&(this.notifyListeners(a,null),r.push(a));return r}notifyListeners(e,r){this.localCache[e]=r;const n=this.listeners[e];if(n)for(const a of Array.from(n))a(r)}startPolling(){this.stopPolling(),this.pollTimer=setInterval(async()=>this._poll(),kme)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}_addListener(e,r){Object.keys(this.listeners).length===0&&this.startPolling(),this.listeners[e]||(this.listeners[e]=new Set,this._get(e)),this.listeners[e].add(r)}_removeListener(e,r){this.listeners[e]&&(this.listeners[e].delete(r),this.listeners[e].size===0&&delete this.listeners[e]),Object.keys(this.listeners).length===0&&this.stopPolling()}}eY.type="LOCAL";const tY=eY;new V2(3e4,6e4);/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Ome(t,e){return e?mA(e):(cn(t._popupRedirectResolver,t,"argument-error"),t._popupRedirectResolver)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class RO extends BO{constructor(e){super("custom","custom"),this.params=e}_getIdTokenResponse(e){return Dx(e,this._buildIdpRequest())}_linkToIdToken(e,r){return Dx(e,this._buildIdpRequest(r))}_getReauthenticationResolver(e){return Dx(e,this._buildIdpRequest())}_buildIdpRequest(e){const r={requestUri:this.params.requestUri,sessionId:this.params.sessionId,postBody:this.params.postBody,tenantId:this.params.tenantId,pendingToken:this.params.pendingToken,returnSecureToken:!0,returnIdpCredential:!0};return e&&(r.idToken=e),r}}function Dme(t){return GX(t.auth,new RO(t),t.bypassAuthState)}function Rme(t){const{auth:e,user:r}=t;return cn(r,e,"internal-error"),mme(r,new RO(t),t.bypassAuthState)}async function Mme(t){const{auth:e,user:r}=t;return cn(r,e,"internal-error"),hme(r,new RO(t),t.bypassAuthState)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class rY{constructor(e,r,n,a,s=!1){this.auth=e,this.resolver=n,this.user=a,this.bypassAuthState=s,this.pendingPromise=null,this.eventManager=null,this.filter=Array.isArray(r)?r:[r]}execute(){return new Promise(async(e,r)=>{this.pendingPromise={resolve:e,reject:r};try{this.eventManager=await this.resolver._initialize(this.auth),await this.onExecution(),this.eventManager.registerConsumer(this)}catch(n){this.reject(n)}})}async onAuthEvent(e){const{urlResponse:r,sessionId:n,postBody:a,tenantId:s,error:i,type:l}=e;if(i){this.reject(i);return}const c={auth:this.auth,requestUri:r,sessionId:n,tenantId:s||void 0,postBody:a||void 0,user:this.user,bypassAuthState:this.bypassAuthState};try{this.resolve(await this.getIdpTask(l)(c))}catch(u){this.reject(u)}}onError(e){this.reject(e)}getIdpTask(e){switch(e){case"signInViaPopup":case"signInViaRedirect":return Dme;case"linkViaPopup":case"linkViaRedirect":return Mme;case"reauthViaPopup":case"reauthViaRedirect":return Rme;default:kd(this.auth,"internal-error")}}resolve(e){RA(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.resolve(e),this.unregisterAndCleanUp()}reject(e){RA(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.reject(e),this.unregisterAndCleanUp()}unregisterAndCleanUp(){this.eventManager&&this.eventManager.unregisterConsumer(this),this.pendingPromise=null,this.cleanUp()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Lme=new V2(2e3,1e4);class vx extends rY{constructor(e,r,n,a,s){super(e,r,a,s),this.provider=n,this.authWindow=null,this.pollId=null,vx.currentPopupAction&&vx.currentPopupAction.cancel(),vx.currentPopupAction=this}async executeNotNull(){const e=await this.execute();return cn(e,this.auth,"internal-error"),e}async onExecution(){RA(this.filter.length===1,"Popup operations only handle one event");const e=DO();this.authWindow=await this.resolver._openPopup(this.auth,this.provider,this.filter[0],e),this.authWindow.associatedEvent=e,this.resolver._originValidation(this.auth).catch(r=>{this.reject(r)}),this.resolver._isIframeWebStorageSupported(this.auth,r=>{r||this.reject(wf(this.auth,"web-storage-unsupported"))}),this.pollUserCancellation()}get eventId(){var e;return((e=this.authWindow)===null||e===void 0?void 0:e.associatedEvent)||null}cancel(){this.reject(wf(this.auth,"cancelled-popup-request"))}cleanUp(){this.authWindow&&this.authWindow.close(),this.pollId&&window.clearTimeout(this.pollId),this.authWindow=null,this.pollId=null,vx.currentPopupAction=null}pollUserCancellation(){const e=()=>{var r,n;if(!((n=(r=this.authWindow)===null||r===void 0?void 0:r.window)===null||n===void 0)&&n.closed){this.pollId=window.setTimeout(()=>{this.pollId=null,this.reject(wf(this.auth,"popup-closed-by-user"))},8e3);return}this.pollId=window.setTimeout(e,Lme.get())};e()}}vx.currentPopupAction=null;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Ume="pendingRedirect",N_=new Map;class Qme extends rY{constructor(e,r,n=!1){super(e,["signInViaRedirect","linkViaRedirect","reauthViaRedirect","unknown"],r,void 0,n),this.eventId=null}async execute(){let e=N_.get(this.auth._key());if(!e){try{const n=await Vme(this.resolver,this.auth)?await super.execute():null;e=()=>Promise.resolve(n)}catch(r){e=()=>Promise.reject(r)}N_.set(this.auth._key(),e)}return this.bypassAuthState||N_.set(this.auth._key(),()=>Promise.resolve(null)),e()}async onAuthEvent(e){if(e.type==="signInViaRedirect")return super.onAuthEvent(e);if(e.type==="unknown"){this.resolve(null);return}if(e.eventId){const r=await this.auth._redirectUserForId(e.eventId);if(r)return this.user=r,super.onAuthEvent(e);this.resolve(null)}}async onExecution(){}cleanUp(){}}async function Vme(t,e){const r=Kme(e),n=$me(t);if(!await n._isAvailable())return!1;const a=await n._get(r)==="true";return await n._remove(r),a}function Hme(t,e){N_.set(t._key(),e)}function $me(t){return mA(t._redirectPersistence)}function Kme(t){return b_(Ume,t.config.apiKey,t.name)}async function Gme(t,e,r=!1){if(Af(t.app))return Promise.reject(wA(t));const n=tm(t),a=Ome(n,e),i=await new Qme(n,a,r).execute();return i&&!r&&(delete i.user._redirectEventId,await n._persistUserIfCurrent(i.user),await n._setRedirectUser(null,e)),i}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const qme=10*60*1e3;class zme{constructor(e){this.auth=e,this.cachedEventUids=new Set,this.consumers=new Set,this.queuedRedirectEvent=null,this.hasHandledPotentialRedirect=!1,this.lastProcessedEventTime=Date.now()}registerConsumer(e){this.consumers.add(e),this.queuedRedirectEvent&&this.isEventForConsumer(this.queuedRedirectEvent,e)&&(this.sendToConsumer(this.queuedRedirectEvent,e),this.saveEventToCache(this.queuedRedirectEvent),this.queuedRedirectEvent=null)}unregisterConsumer(e){this.consumers.delete(e)}onEvent(e){if(this.hasEventBeenHandled(e))return!1;let r=!1;return this.consumers.forEach(n=>{this.isEventForConsumer(e,n)&&(r=!0,this.sendToConsumer(e,n),this.saveEventToCache(e))}),this.hasHandledPotentialRedirect||!Wme(e)||(this.hasHandledPotentialRedirect=!0,r||(this.queuedRedirectEvent=e,r=!0)),r}sendToConsumer(e,r){var n;if(e.error&&!nY(e)){const a=((n=e.error.code)===null||n===void 0?void 0:n.split("auth/")[1])||"internal-error";r.onError(wf(this.auth,a))}else r.onAuthEvent(e)}isEventForConsumer(e,r){const n=r.eventId===null||!!e.eventId&&e.eventId===r.eventId;return r.filter.includes(e.type)&&n}hasEventBeenHandled(e){return Date.now()-this.lastProcessedEventTime>=qme&&this.cachedEventUids.clear(),this.cachedEventUids.has(eU(e))}saveEventToCache(e){this.cachedEventUids.add(eU(e)),this.lastProcessedEventTime=Date.now()}}function eU(t){return[t.type,t.eventId,t.sessionId,t.tenantId].filter(e=>e).join("-")}function nY({type:t,error:e}){return t==="unknown"&&(e==null?void 0:e.code)==="auth/no-auth-event"}function Wme(t){switch(t.type){case"signInViaRedirect":case"linkViaRedirect":case"reauthViaRedirect":return!0;case"unknown":return nY(t);default:return!1}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Xme(t,e={}){return ZA(t,"GET","/v1/projects",e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Yme=/^\d{1,3}\.\d{1,3}\.\d{1,3}\.\d{1,3}$/,Jme=/^https?/;async function Zme(t){if(t.config.emulator)return;const{authorizedDomains:e}=await Xme(t);for(const r of e)try{if(epe(r))return}catch{}kd(t,"unauthorized-domain")}function epe(t){const e=HP(),{protocol:r,hostname:n}=new URL(e);if(t.startsWith("chrome-extension://")){const i=new URL(t);return i.hostname===""&&n===""?r==="chrome-extension:"&&t.replace("chrome-extension://","")===e.replace("chrome-extension://",""):r==="chrome-extension:"&&i.hostname===n}if(!Jme.test(r))return!1;if(Yme.test(t))return n===t;const a=t.replace(/\./g,"\\.");return new RegExp("^(.+\\."+a+"|"+a+")$","i").test(n)}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const tpe=new V2(3e4,6e4);function tU(){const t=Nf().___jsl;if(t!=null&&t.H){for(const e of Object.keys(t.H))if(t.H[e].r=t.H[e].r||[],t.H[e].L=t.H[e].L||[],t.H[e].r=[...t.H[e].L],t.CP)for(let r=0;r<t.CP.length;r++)t.CP[r]=null}}function rpe(t){return new Promise((e,r)=>{var n,a,s;function i(){tU(),gapi.load("gapi.iframes",{callback:()=>{e(gapi.iframes.getContext())},ontimeout:()=>{tU(),r(wf(t,"network-request-failed"))},timeout:tpe.get()})}if(!((a=(n=Nf().gapi)===null||n===void 0?void 0:n.iframes)===null||a===void 0)&&a.Iframe)e(gapi.iframes.getContext());else if(!((s=Nf().gapi)===null||s===void 0)&&s.load)i();else{const l=W0e("iframefcb");return Nf()[l]=()=>{gapi.load?i():r(wf(t,"network-request-failed"))},VX(`${z0e()}?onload=${l}`).catch(c=>r(c))}}).catch(e=>{throw C_=null,e})}let C_=null;function npe(t){return C_=C_||rpe(t),C_}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ape=new V2(5e3,15e3),spe="__/auth/iframe",ipe="emulator/auth/iframe",ope={style:{position:"absolute",top:"-100px",width:"1px",height:"1px"},"aria-hidden":"true",tabindex:"-1"},lpe=new Map([["identitytoolkit.googleapis.com","p"],["staging-identitytoolkit.sandbox.googleapis.com","s"],["test-identitytoolkit.sandbox.googleapis.com","t"]]);function cpe(t){const e=t.config;cn(e.authDomain,t,"auth-domain-config-required");const r=e.emulator?SO(e,ipe):`https://${t.config.authDomain}/${spe}`,n={apiKey:e.apiKey,appName:t.name,v:Iv},a=lpe.get(t.config.apiHost);a&&(n.eid=a);const s=t._getFrameworks();return s.length&&(n.fw=s.join(",")),`${r}?${Q2(n).slice(1)}`}async function upe(t){const e=await npe(t),r=Nf().gapi;return cn(r,t,"internal-error"),e.open({where:document.body,url:cpe(t),messageHandlersFilter:r.iframes.CROSS_ORIGIN_IFRAMES_FILTER,attributes:ope,dontclear:!0},n=>new Promise(async(a,s)=>{await n.restyle({setHideOnLeave:!1});const i=wf(t,"network-request-failed"),l=Nf().setTimeout(()=>{s(i)},ape.get());function c(){Nf().clearTimeout(l),a(n)}n.ping(c).then(c,()=>{s(i)})}))}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const dpe={location:"yes",resizable:"yes",statusbar:"yes",toolbar:"no"},fpe=500,Ape=600,hpe="_blank",mpe="http://localhost";class rU{constructor(e){this.window=e,this.associatedEvent=null}close(){if(this.window)try{this.window.close()}catch{}}}function ppe(t,e,r,n=fpe,a=Ape){const s=Math.max((window.screen.availHeight-a)/2,0).toString(),i=Math.max((window.screen.availWidth-n)/2,0).toString();let l="";const c=Object.assign(Object.assign({},dpe),{width:n.toString(),height:a.toString(),top:s,left:i}),u=Ki().toLowerCase();r&&(l=OX(u)?hpe:r),kX(u)&&(e=e||mpe,c.scrollbars="yes");const d=Object.entries(c).reduce((h,[A,m])=>`${h}${A}=${m},`,"");if(L0e(u)&&l!=="_self")return gpe(e||"",l),new rU(null);const f=window.open(e||"",l,d);cn(f,t,"popup-blocked");try{f.focus()}catch{}return new rU(f)}function gpe(t,e){const r=document.createElement("a");r.href=t,r.target=e;const n=document.createEvent("MouseEvent");n.initMouseEvent("click",!0,!0,window,1,0,0,0,0,!1,!1,!1,!1,1,null),r.dispatchEvent(n)}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const xpe="__/auth/handler",vpe="emulator/auth/handler",ype=encodeURIComponent("fac");async function nU(t,e,r,n,a,s){cn(t.config.authDomain,t,"auth-domain-config-required"),cn(t.config.apiKey,t,"invalid-api-key");const i={apiKey:t.config.apiKey,appName:t.name,authType:r,redirectUrl:n,v:Iv,eventId:a};if(e instanceof $X){e.setDefaultLanguage(t.languageCode),i.providerId=e.providerId||"",che(e.getCustomParameters())||(i.customParameters=JSON.stringify(e.getCustomParameters()));for(const[d,f]of Object.entries({}))i[d]=f}if(e instanceof $2){const d=e.getScopes().filter(f=>f!=="");d.length>0&&(i.scopes=d.join(","))}t.tenantId&&(i.tid=t.tenantId);const l=i;for(const d of Object.keys(l))l[d]===void 0&&delete l[d];const c=await t._getAppCheckToken(),u=c?`#${ype}=${encodeURIComponent(c)}`:"";return`${bpe(t)}?${Q2(l).slice(1)}${u}`}function bpe({config:t}){return t.emulator?SO(t,vpe):`https://${t.authDomain}/${xpe}`}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Lj="webStorageSupport";class wpe{constructor(){this.eventManagers={},this.iframes={},this.originValidationPromises={},this._redirectPersistence=OO,this._completeRedirectFn=Gme,this._overrideRedirectResult=Hme}async _openPopup(e,r,n,a){var s;RA((s=this.eventManagers[e._key()])===null||s===void 0?void 0:s.manager,"_initialize() not called before _openPopup()");const i=await nU(e,r,n,HP(),a);return ppe(e,i,DO())}async _openRedirect(e,r,n,a){await this._originValidation(e);const s=await nU(e,r,n,HP(),a);return Eme(s),new Promise(()=>{})}_initialize(e){const r=e._key();if(this.eventManagers[r]){const{manager:a,promise:s}=this.eventManagers[r];return a?Promise.resolve(a):(RA(s,"If manager is not set, promise should be"),s)}const n=this.initAndGetManager(e);return this.eventManagers[r]={promise:n},n.catch(()=>{delete this.eventManagers[r]}),n}async initAndGetManager(e){const r=await upe(e),n=new zme(e);return r.register("authEvent",a=>(cn(a==null?void 0:a.authEvent,e,"invalid-auth-event"),{status:n.onEvent(a.authEvent)?"ACK":"ERROR"}),gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER),this.eventManagers[e._key()]={manager:n},this.iframes[e._key()]=r,n}_isIframeWebStorageSupported(e,r){this.iframes[e._key()].send(Lj,{type:Lj},a=>{var s;const i=(s=a==null?void 0:a[0])===null||s===void 0?void 0:s[Lj];i!==void 0&&r(!!i),kd(e,"internal-error")},gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER)}_originValidation(e){const r=e._key();return this.originValidationPromises[r]||(this.originValidationPromises[r]=Zme(e)),this.originValidationPromises[r]}get _shouldInitProactively(){return UX()||FX()||jO()}}const Npe=wpe;var aU="@firebase/auth",sU="1.7.9";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Cpe{constructor(e){this.auth=e,this.internalListeners=new Map}getUid(){var e;return this.assertAuthConfigured(),((e=this.auth.currentUser)===null||e===void 0?void 0:e.uid)||null}async getToken(e){return this.assertAuthConfigured(),await this.auth._initializationPromise,this.auth.currentUser?{accessToken:await this.auth.currentUser.getIdToken(e)}:null}addAuthTokenListener(e){if(this.assertAuthConfigured(),this.internalListeners.has(e))return;const r=this.auth.onIdTokenChanged(n=>{e((n==null?void 0:n.stsTokenManager.accessToken)||null)});this.internalListeners.set(e,r),this.updateProactiveRefresh()}removeAuthTokenListener(e){this.assertAuthConfigured();const r=this.internalListeners.get(e);r&&(this.internalListeners.delete(e),r(),this.updateProactiveRefresh())}assertAuthConfigured(){cn(this.auth._initializationPromise,"dependent-sdk-initialized-before-auth")}updateProactiveRefresh(){this.internalListeners.size>0?this.auth._startProactiveRefresh():this.auth._stopProactiveRefresh()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function _pe(t){switch(t){case"Node":return"node";case"ReactNative":return"rn";case"Worker":return"webworker";case"Cordova":return"cordova";case"WebExtension":return"web-extension";default:return}}function Epe(t){Zx(new wp("auth",(e,{options:r})=>{const n=e.getProvider("app").getImmediate(),a=e.getProvider("heartbeat"),s=e.getProvider("app-check-internal"),{apiKey:i,authDomain:l}=n.options;cn(i&&!i.includes(":"),"invalid-api-key",{appName:n.name});const c={apiKey:i,authDomain:l,clientPlatform:t,apiHost:"identitytoolkit.googleapis.com",tokenApiHost:"securetoken.googleapis.com",apiScheme:"https",sdkClientVersion:QX(t)},u=new K0e(n,a,s,c);return eme(u,r),u},"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback((e,r,n)=>{e.getProvider("auth-internal").initialize()})),Zx(new wp("auth-internal",e=>{const r=tm(e.getProvider("auth").getImmediate());return(n=>new Cpe(n))(r)},"PRIVATE").setInstantiationMode("EXPLICIT")),S0(aU,sU,_pe(t)),S0(aU,sU,"esm2017")}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Spe=5*60,Ipe=gX("authIdTokenMaxAge")||Spe;let iU=null;const jpe=t=>async e=>{const r=e&&await e.getIdTokenResult(),n=r&&(new Date().getTime()-Date.parse(r.issuedAtTime))/1e3;if(n&&n>Ipe)return;const a=r==null?void 0:r.token;iU!==a&&(iU=a,await fetch(t,{method:a?"POST":"DELETE",headers:a?{Authorization:`Bearer ${a}`}:{}}))};function GP(t=CO()){const e=wO(t,"auth");if(e.isInitialized())return e.getImmediate();const r=Z0e(t,{popupRedirectResolver:Npe,persistence:[tY,FO,OO]}),n=gX("authTokenSyncURL");if(n&&typeof isSecureContext=="boolean"&&isSecureContext){const s=new URL(n,location.origin);if(location.origin===s.origin){const i=jpe(s.toString());bme(r,i,()=>i(r.currentUser)),yme(r,l=>i(l))}}const a=mX("auth");return a&&tme(r,`http://${a}`),r}function Bpe(){var t,e;return(e=(t=document.getElementsByTagName("head"))===null||t===void 0?void 0:t[0])!==null&&e!==void 0?e:document}G0e({loadJS(t){return new Promise((e,r)=>{const n=document.createElement("script");n.setAttribute("src",t),n.onload=e,n.onerror=a=>{const s=wf("internal-error");s.customData=a,r(s)},n.type="text/javascript",n.charset="UTF-8",Bpe().appendChild(n)})},gapiScript:"https://apis.google.com/js/api.js",recaptchaV2Script:"https://www.google.com/recaptcha/api.js",recaptchaEnterpriseScript:"https://www.google.com/recaptcha/enterprise.js?render="});Epe("Browser");var Ppe="firebase",Tpe="10.14.1";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */S0(Ppe,Tpe,"app");var oU=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};/** @license
Copyright The Closure Library Authors.
SPDX-License-Identifier: Apache-2.0
*/var tp,aY;(function(){var t;/** @license

 Copyright The Closure Library Authors.
 SPDX-License-Identifier: Apache-2.0
*/function e(_,E){function S(){}S.prototype=E.prototype,_.D=E.prototype,_.prototype=new S,_.prototype.constructor=_,_.C=function(k,P,T){for(var F=Array(arguments.length-2),Y=2;Y<arguments.length;Y++)F[Y-2]=arguments[Y];return E.prototype[P].apply(k,F)}}function r(){this.blockSize=-1}function n(){this.blockSize=-1,this.blockSize=64,this.g=Array(4),this.B=Array(this.blockSize),this.o=this.h=0,this.s()}e(n,r),n.prototype.s=function(){this.g[0]=1732584193,this.g[1]=4023233417,this.g[2]=2562383102,this.g[3]=271733878,this.o=this.h=0};function a(_,E,S){S||(S=0);var k=Array(16);if(typeof E=="string")for(var P=0;16>P;++P)k[P]=E.charCodeAt(S++)|E.charCodeAt(S++)<<8|E.charCodeAt(S++)<<16|E.charCodeAt(S++)<<24;else for(P=0;16>P;++P)k[P]=E[S++]|E[S++]<<8|E[S++]<<16|E[S++]<<24;E=_.g[0],S=_.g[1],P=_.g[2];var T=_.g[3],F=E+(T^S&(P^T))+k[0]+3614090360&4294967295;E=S+(F<<7&4294967295|F>>>25),F=T+(P^E&(S^P))+k[1]+3905402710&4294967295,T=E+(F<<12&4294967295|F>>>20),F=P+(S^T&(E^S))+k[2]+606105819&4294967295,P=T+(F<<17&4294967295|F>>>15),F=S+(E^P&(T^E))+k[3]+3250441966&4294967295,S=P+(F<<22&4294967295|F>>>10),F=E+(T^S&(P^T))+k[4]+4118548399&4294967295,E=S+(F<<7&4294967295|F>>>25),F=T+(P^E&(S^P))+k[5]+1200080426&4294967295,T=E+(F<<12&4294967295|F>>>20),F=P+(S^T&(E^S))+k[6]+2821735955&4294967295,P=T+(F<<17&4294967295|F>>>15),F=S+(E^P&(T^E))+k[7]+4249261313&4294967295,S=P+(F<<22&4294967295|F>>>10),F=E+(T^S&(P^T))+k[8]+1770035416&4294967295,E=S+(F<<7&4294967295|F>>>25),F=T+(P^E&(S^P))+k[9]+2336552879&4294967295,T=E+(F<<12&4294967295|F>>>20),F=P+(S^T&(E^S))+k[10]+4294925233&4294967295,P=T+(F<<17&4294967295|F>>>15),F=S+(E^P&(T^E))+k[11]+2304563134&4294967295,S=P+(F<<22&4294967295|F>>>10),F=E+(T^S&(P^T))+k[12]+1804603682&4294967295,E=S+(F<<7&4294967295|F>>>25),F=T+(P^E&(S^P))+k[13]+4254626195&4294967295,T=E+(F<<12&4294967295|F>>>20),F=P+(S^T&(E^S))+k[14]+2792965006&4294967295,P=T+(F<<17&4294967295|F>>>15),F=S+(E^P&(T^E))+k[15]+1236535329&4294967295,S=P+(F<<22&4294967295|F>>>10),F=E+(P^T&(S^P))+k[1]+4129170786&4294967295,E=S+(F<<5&4294967295|F>>>27),F=T+(S^P&(E^S))+k[6]+3225465664&4294967295,T=E+(F<<9&4294967295|F>>>23),F=P+(E^S&(T^E))+k[11]+643717713&4294967295,P=T+(F<<14&4294967295|F>>>18),F=S+(T^E&(P^T))+k[0]+3921069994&4294967295,S=P+(F<<20&4294967295|F>>>12),F=E+(P^T&(S^P))+k[5]+3593408605&4294967295,E=S+(F<<5&4294967295|F>>>27),F=T+(S^P&(E^S))+k[10]+38016083&4294967295,T=E+(F<<9&4294967295|F>>>23),F=P+(E^S&(T^E))+k[15]+3634488961&4294967295,P=T+(F<<14&4294967295|F>>>18),F=S+(T^E&(P^T))+k[4]+3889429448&4294967295,S=P+(F<<20&4294967295|F>>>12),F=E+(P^T&(S^P))+k[9]+568446438&4294967295,E=S+(F<<5&4294967295|F>>>27),F=T+(S^P&(E^S))+k[14]+3275163606&4294967295,T=E+(F<<9&4294967295|F>>>23),F=P+(E^S&(T^E))+k[3]+4107603335&4294967295,P=T+(F<<14&4294967295|F>>>18),F=S+(T^E&(P^T))+k[8]+1163531501&4294967295,S=P+(F<<20&4294967295|F>>>12),F=E+(P^T&(S^P))+k[13]+2850285829&4294967295,E=S+(F<<5&4294967295|F>>>27),F=T+(S^P&(E^S))+k[2]+4243563512&4294967295,T=E+(F<<9&4294967295|F>>>23),F=P+(E^S&(T^E))+k[7]+1735328473&4294967295,P=T+(F<<14&4294967295|F>>>18),F=S+(T^E&(P^T))+k[12]+2368359562&4294967295,S=P+(F<<20&4294967295|F>>>12),F=E+(S^P^T)+k[5]+4294588738&4294967295,E=S+(F<<4&4294967295|F>>>28),F=T+(E^S^P)+k[8]+2272392833&4294967295,T=E+(F<<11&4294967295|F>>>21),F=P+(T^E^S)+k[11]+1839030562&4294967295,P=T+(F<<16&4294967295|F>>>16),F=S+(P^T^E)+k[14]+4259657740&4294967295,S=P+(F<<23&4294967295|F>>>9),F=E+(S^P^T)+k[1]+2763975236&4294967295,E=S+(F<<4&4294967295|F>>>28),F=T+(E^S^P)+k[4]+1272893353&4294967295,T=E+(F<<11&4294967295|F>>>21),F=P+(T^E^S)+k[7]+4139469664&4294967295,P=T+(F<<16&4294967295|F>>>16),F=S+(P^T^E)+k[10]+3200236656&4294967295,S=P+(F<<23&4294967295|F>>>9),F=E+(S^P^T)+k[13]+681279174&4294967295,E=S+(F<<4&4294967295|F>>>28),F=T+(E^S^P)+k[0]+3936430074&4294967295,T=E+(F<<11&4294967295|F>>>21),F=P+(T^E^S)+k[3]+3572445317&4294967295,P=T+(F<<16&4294967295|F>>>16),F=S+(P^T^E)+k[6]+76029189&4294967295,S=P+(F<<23&4294967295|F>>>9),F=E+(S^P^T)+k[9]+3654602809&4294967295,E=S+(F<<4&4294967295|F>>>28),F=T+(E^S^P)+k[12]+3873151461&4294967295,T=E+(F<<11&4294967295|F>>>21),F=P+(T^E^S)+k[15]+530742520&4294967295,P=T+(F<<16&4294967295|F>>>16),F=S+(P^T^E)+k[2]+3299628645&4294967295,S=P+(F<<23&4294967295|F>>>9),F=E+(P^(S|~T))+k[0]+4096336452&4294967295,E=S+(F<<6&4294967295|F>>>26),F=T+(S^(E|~P))+k[7]+1126891415&4294967295,T=E+(F<<10&4294967295|F>>>22),F=P+(E^(T|~S))+k[14]+2878612391&4294967295,P=T+(F<<15&4294967295|F>>>17),F=S+(T^(P|~E))+k[5]+4237533241&4294967295,S=P+(F<<21&4294967295|F>>>11),F=E+(P^(S|~T))+k[12]+1700485571&4294967295,E=S+(F<<6&4294967295|F>>>26),F=T+(S^(E|~P))+k[3]+2399980690&4294967295,T=E+(F<<10&4294967295|F>>>22),F=P+(E^(T|~S))+k[10]+4293915773&4294967295,P=T+(F<<15&4294967295|F>>>17),F=S+(T^(P|~E))+k[1]+2240044497&4294967295,S=P+(F<<21&4294967295|F>>>11),F=E+(P^(S|~T))+k[8]+1873313359&4294967295,E=S+(F<<6&4294967295|F>>>26),F=T+(S^(E|~P))+k[15]+4264355552&4294967295,T=E+(F<<10&4294967295|F>>>22),F=P+(E^(T|~S))+k[6]+2734768916&4294967295,P=T+(F<<15&4294967295|F>>>17),F=S+(T^(P|~E))+k[13]+1309151649&4294967295,S=P+(F<<21&4294967295|F>>>11),F=E+(P^(S|~T))+k[4]+4149444226&4294967295,E=S+(F<<6&4294967295|F>>>26),F=T+(S^(E|~P))+k[11]+3174756917&4294967295,T=E+(F<<10&4294967295|F>>>22),F=P+(E^(T|~S))+k[2]+718787259&4294967295,P=T+(F<<15&4294967295|F>>>17),F=S+(T^(P|~E))+k[9]+3951481745&4294967295,_.g[0]=_.g[0]+E&4294967295,_.g[1]=_.g[1]+(P+(F<<21&4294967295|F>>>11))&4294967295,_.g[2]=_.g[2]+P&4294967295,_.g[3]=_.g[3]+T&4294967295}n.prototype.u=function(_,E){E===void 0&&(E=_.length);for(var S=E-this.blockSize,k=this.B,P=this.h,T=0;T<E;){if(P==0)for(;T<=S;)a(this,_,T),T+=this.blockSize;if(typeof _=="string"){for(;T<E;)if(k[P++]=_.charCodeAt(T++),P==this.blockSize){a(this,k),P=0;break}}else for(;T<E;)if(k[P++]=_[T++],P==this.blockSize){a(this,k),P=0;break}}this.h=P,this.o+=E},n.prototype.v=function(){var _=Array((56>this.h?this.blockSize:2*this.blockSize)-this.h);_[0]=128;for(var E=1;E<_.length-8;++E)_[E]=0;var S=8*this.o;for(E=_.length-8;E<_.length;++E)_[E]=S&255,S/=256;for(this.u(_),_=Array(16),E=S=0;4>E;++E)for(var k=0;32>k;k+=8)_[S++]=this.g[E]>>>k&255;return _};function s(_,E){var S=l;return Object.prototype.hasOwnProperty.call(S,_)?S[_]:S[_]=E(_)}function i(_,E){this.h=E;for(var S=[],k=!0,P=_.length-1;0<=P;P--){var T=_[P]|0;k&&T==E||(S[P]=T,k=!1)}this.g=S}var l={};function c(_){return-128<=_&&128>_?s(_,function(E){return new i([E|0],0>E?-1:0)}):new i([_|0],0>_?-1:0)}function u(_){if(isNaN(_)||!isFinite(_))return f;if(0>_)return g(u(-_));for(var E=[],S=1,k=0;_>=S;k++)E[k]=_/S|0,S*=4294967296;return new i(E,0)}function d(_,E){if(_.length==0)throw Error("number format error: empty string");if(E=E||10,2>E||36<E)throw Error("radix out of range: "+E);if(_.charAt(0)=="-")return g(d(_.substring(1),E));if(0<=_.indexOf("-"))throw Error('number format error: interior "-" character');for(var S=u(Math.pow(E,8)),k=f,P=0;P<_.length;P+=8){var T=Math.min(8,_.length-P),F=parseInt(_.substring(P,P+T),E);8>T?(T=u(Math.pow(E,T)),k=k.j(T).add(u(F))):(k=k.j(S),k=k.add(u(F)))}return k}var f=c(0),h=c(1),A=c(16777216);t=i.prototype,t.m=function(){if(p(this))return-g(this).m();for(var _=0,E=1,S=0;S<this.g.length;S++){var k=this.i(S);_+=(0<=k?k:4294967296+k)*E,E*=4294967296}return _},t.toString=function(_){if(_=_||10,2>_||36<_)throw Error("radix out of range: "+_);if(m(this))return"0";if(p(this))return"-"+g(this).toString(_);for(var E=u(Math.pow(_,6)),S=this,k="";;){var P=w(S,E).g;S=x(S,P.j(E));var T=((0<S.g.length?S.g[0]:S.h)>>>0).toString(_);if(S=P,m(S))return T+k;for(;6>T.length;)T="0"+T;k=T+k}},t.i=function(_){return 0>_?0:_<this.g.length?this.g[_]:this.h};function m(_){if(_.h!=0)return!1;for(var E=0;E<_.g.length;E++)if(_.g[E]!=0)return!1;return!0}function p(_){return _.h==-1}t.l=function(_){return _=x(this,_),p(_)?-1:m(_)?0:1};function g(_){for(var E=_.g.length,S=[],k=0;k<E;k++)S[k]=~_.g[k];return new i(S,~_.h).add(h)}t.abs=function(){return p(this)?g(this):this},t.add=function(_){for(var E=Math.max(this.g.length,_.g.length),S=[],k=0,P=0;P<=E;P++){var T=k+(this.i(P)&65535)+(_.i(P)&65535),F=(T>>>16)+(this.i(P)>>>16)+(_.i(P)>>>16);k=F>>>16,T&=65535,F&=65535,S[P]=F<<16|T}return new i(S,S[S.length-1]&-2147483648?-1:0)};function x(_,E){return _.add(g(E))}t.j=function(_){if(m(this)||m(_))return f;if(p(this))return p(_)?g(this).j(g(_)):g(g(this).j(_));if(p(_))return g(this.j(g(_)));if(0>this.l(A)&&0>_.l(A))return u(this.m()*_.m());for(var E=this.g.length+_.g.length,S=[],k=0;k<2*E;k++)S[k]=0;for(k=0;k<this.g.length;k++)for(var P=0;P<_.g.length;P++){var T=this.i(k)>>>16,F=this.i(k)&65535,Y=_.i(P)>>>16,he=_.i(P)&65535;S[2*k+2*P]+=F*he,y(S,2*k+2*P),S[2*k+2*P+1]+=T*he,y(S,2*k+2*P+1),S[2*k+2*P+1]+=F*Y,y(S,2*k+2*P+1),S[2*k+2*P+2]+=T*Y,y(S,2*k+2*P+2)}for(k=0;k<E;k++)S[k]=S[2*k+1]<<16|S[2*k];for(k=E;k<2*E;k++)S[k]=0;return new i(S,0)};function y(_,E){for(;(_[E]&65535)!=_[E];)_[E+1]+=_[E]>>>16,_[E]&=65535,E++}function b(_,E){this.g=_,this.h=E}function w(_,E){if(m(E))throw Error("division by zero");if(m(_))return new b(f,f);if(p(_))return E=w(g(_),E),new b(g(E.g),g(E.h));if(p(E))return E=w(_,g(E)),new b(g(E.g),E.h);if(30<_.g.length){if(p(_)||p(E))throw Error("slowDivide_ only works with positive integers.");for(var S=h,k=E;0>=k.l(_);)S=j(S),k=j(k);var P=I(S,1),T=I(k,1);for(k=I(k,2),S=I(S,2);!m(k);){var F=T.add(k);0>=F.l(_)&&(P=P.add(S),T=F),k=I(k,1),S=I(S,1)}return E=x(_,P.j(E)),new b(P,E)}for(P=f;0<=_.l(E);){for(S=Math.max(1,Math.floor(_.m()/E.m())),k=Math.ceil(Math.log(S)/Math.LN2),k=48>=k?1:Math.pow(2,k-48),T=u(S),F=T.j(E);p(F)||0<F.l(_);)S-=k,T=u(S),F=T.j(E);m(T)&&(T=h),P=P.add(T),_=x(_,F)}return new b(P,_)}t.A=function(_){return w(this,_).h},t.and=function(_){for(var E=Math.max(this.g.length,_.g.length),S=[],k=0;k<E;k++)S[k]=this.i(k)&_.i(k);return new i(S,this.h&_.h)},t.or=function(_){for(var E=Math.max(this.g.length,_.g.length),S=[],k=0;k<E;k++)S[k]=this.i(k)|_.i(k);return new i(S,this.h|_.h)},t.xor=function(_){for(var E=Math.max(this.g.length,_.g.length),S=[],k=0;k<E;k++)S[k]=this.i(k)^_.i(k);return new i(S,this.h^_.h)};function j(_){for(var E=_.g.length+1,S=[],k=0;k<E;k++)S[k]=_.i(k)<<1|_.i(k-1)>>>31;return new i(S,_.h)}function I(_,E){var S=E>>5;E%=32;for(var k=_.g.length-S,P=[],T=0;T<k;T++)P[T]=0<E?_.i(T+S)>>>E|_.i(T+S+1)<<32-E:_.i(T+S);return new i(P,_.h)}n.prototype.digest=n.prototype.v,n.prototype.reset=n.prototype.s,n.prototype.update=n.prototype.u,aY=n,i.prototype.add=i.prototype.add,i.prototype.multiply=i.prototype.j,i.prototype.modulo=i.prototype.A,i.prototype.compare=i.prototype.l,i.prototype.toNumber=i.prototype.m,i.prototype.toString=i.prototype.toString,i.prototype.getBits=i.prototype.i,i.fromNumber=u,i.fromString=d,tp=i}).apply(typeof oU<"u"?oU:typeof self<"u"?self:typeof window<"u"?window:{});var wN=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};/** @license
Copyright The Closure Library Authors.
SPDX-License-Identifier: Apache-2.0
*/var sY,oy,iY,__,qP,oY,lY,cY;(function(){var t,e=typeof Object.defineProperties=="function"?Object.defineProperty:function(C,X,de){return C==Array.prototype||C==Object.prototype||(C[X]=de.value),C};function r(C){C=[typeof globalThis=="object"&&globalThis,C,typeof window=="object"&&window,typeof self=="object"&&self,typeof wN=="object"&&wN];for(var X=0;X<C.length;++X){var de=C[X];if(de&&de.Math==Math)return de}throw Error("Cannot find global object")}var n=r(this);function a(C,X){if(X)e:{var de=n;C=C.split(".");for(var $e=0;$e<C.length-1;$e++){var _t=C[$e];if(!(_t in de))break e;de=de[_t]}C=C[C.length-1],$e=de[C],X=X($e),X!=$e&&X!=null&&e(de,C,{configurable:!0,writable:!0,value:X})}}function s(C,X){C instanceof String&&(C+="");var de=0,$e=!1,_t={next:function(){if(!$e&&de<C.length){var Mt=de++;return{value:X(Mt,C[Mt]),done:!1}}return $e=!0,{done:!0,value:void 0}}};return _t[Symbol.iterator]=function(){return _t},_t}a("Array.prototype.values",function(C){return C||function(){return s(this,function(X,de){return de})}});/** @license

 Copyright The Closure Library Authors.
 SPDX-License-Identifier: Apache-2.0
*/var i=i||{},l=this||self;function c(C){var X=typeof C;return X=X!="object"?X:C?Array.isArray(C)?"array":X:"null",X=="array"||X=="object"&&typeof C.length=="number"}function u(C){var X=typeof C;return X=="object"&&C!=null||X=="function"}function d(C,X,de){return C.call.apply(C.bind,arguments)}function f(C,X,de){if(!C)throw Error();if(2<arguments.length){var $e=Array.prototype.slice.call(arguments,2);return function(){var _t=Array.prototype.slice.call(arguments);return Array.prototype.unshift.apply(_t,$e),C.apply(X,_t)}}return function(){return C.apply(X,arguments)}}function h(C,X,de){return h=Function.prototype.bind&&Function.prototype.bind.toString().indexOf("native code")!=-1?d:f,h.apply(null,arguments)}function A(C,X){var de=Array.prototype.slice.call(arguments,1);return function(){var $e=de.slice();return $e.push.apply($e,arguments),C.apply(this,$e)}}function m(C,X){function de(){}de.prototype=X.prototype,C.aa=X.prototype,C.prototype=new de,C.prototype.constructor=C,C.Qb=function($e,_t,Mt){for(var xr=Array(arguments.length-2),Un=2;Un<arguments.length;Un++)xr[Un-2]=arguments[Un];return X.prototype[_t].apply($e,xr)}}function p(C){const X=C.length;if(0<X){const de=Array(X);for(let $e=0;$e<X;$e++)de[$e]=C[$e];return de}return[]}function g(C,X){for(let de=1;de<arguments.length;de++){const $e=arguments[de];if(c($e)){const _t=C.length||0,Mt=$e.length||0;C.length=_t+Mt;for(let xr=0;xr<Mt;xr++)C[_t+xr]=$e[xr]}else C.push($e)}}class x{constructor(X,de){this.i=X,this.j=de,this.h=0,this.g=null}get(){let X;return 0<this.h?(this.h--,X=this.g,this.g=X.next,X.next=null):X=this.i(),X}}function y(C){return/^[\s\xa0]*$/.test(C)}function b(){var C=l.navigator;return C&&(C=C.userAgent)?C:""}function w(C){return w[" "](C),C}w[" "]=function(){};var j=b().indexOf("Gecko")!=-1&&!(b().toLowerCase().indexOf("webkit")!=-1&&b().indexOf("Edge")==-1)&&!(b().indexOf("Trident")!=-1||b().indexOf("MSIE")!=-1)&&b().indexOf("Edge")==-1;function I(C,X,de){for(const $e in C)X.call(de,C[$e],$e,C)}function _(C,X){for(const de in C)X.call(void 0,C[de],de,C)}function E(C){const X={};for(const de in C)X[de]=C[de];return X}const S="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function k(C,X){let de,$e;for(let _t=1;_t<arguments.length;_t++){$e=arguments[_t];for(de in $e)C[de]=$e[de];for(let Mt=0;Mt<S.length;Mt++)de=S[Mt],Object.prototype.hasOwnProperty.call($e,de)&&(C[de]=$e[de])}}function P(C){var X=1;C=C.split(":");const de=[];for(;0<X&&C.length;)de.push(C.shift()),X--;return C.length&&de.push(C.join(":")),de}function T(C){l.setTimeout(()=>{throw C},0)}function F(){var C=ne;let X=null;return C.g&&(X=C.g,C.g=C.g.next,C.g||(C.h=null),X.next=null),X}class Y{constructor(){this.h=this.g=null}add(X,de){const $e=he.get();$e.set(X,de),this.h?this.h.next=$e:this.g=$e,this.h=$e}}var he=new x(()=>new ue,C=>C.reset());class ue{constructor(){this.next=this.g=this.h=null}set(X,de){this.h=X,this.g=de,this.next=null}reset(){this.next=this.g=this.h=null}}let fe,me=!1,ne=new Y,Pe=()=>{const C=l.Promise.resolve(void 0);fe=()=>{C.then(Ie)}};var Ie=()=>{for(var C;C=F();){try{C.h.call(C.g)}catch(de){T(de)}var X=he;X.j(C),100>X.h&&(X.h++,C.next=X.g,X.g=C)}me=!1};function O(){this.s=this.s,this.C=this.C}O.prototype.s=!1,O.prototype.ma=function(){this.s||(this.s=!0,this.N())},O.prototype.N=function(){if(this.C)for(;this.C.length;)this.C.shift()()};function H(C,X){this.type=C,this.g=this.target=X,this.defaultPrevented=!1}H.prototype.h=function(){this.defaultPrevented=!0};var R=function(){if(!l.addEventListener||!Object.defineProperty)return!1;var C=!1,X=Object.defineProperty({},"passive",{get:function(){C=!0}});try{const de=()=>{};l.addEventListener("test",de,X),l.removeEventListener("test",de,X)}catch{}return C}();function M(C,X){if(H.call(this,C?C.type:""),this.relatedTarget=this.g=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key="",this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.state=null,this.pointerId=0,this.pointerType="",this.i=null,C){var de=this.type=C.type,$e=C.changedTouches&&C.changedTouches.length?C.changedTouches[0]:null;if(this.target=C.target||C.srcElement,this.g=X,X=C.relatedTarget){if(j){e:{try{w(X.nodeName);var _t=!0;break e}catch{}_t=!1}_t||(X=null)}}else de=="mouseover"?X=C.fromElement:de=="mouseout"&&(X=C.toElement);this.relatedTarget=X,$e?(this.clientX=$e.clientX!==void 0?$e.clientX:$e.pageX,this.clientY=$e.clientY!==void 0?$e.clientY:$e.pageY,this.screenX=$e.screenX||0,this.screenY=$e.screenY||0):(this.clientX=C.clientX!==void 0?C.clientX:C.pageX,this.clientY=C.clientY!==void 0?C.clientY:C.pageY,this.screenX=C.screenX||0,this.screenY=C.screenY||0),this.button=C.button,this.key=C.key||"",this.ctrlKey=C.ctrlKey,this.altKey=C.altKey,this.shiftKey=C.shiftKey,this.metaKey=C.metaKey,this.pointerId=C.pointerId||0,this.pointerType=typeof C.pointerType=="string"?C.pointerType:K[C.pointerType]||"",this.state=C.state,this.i=C,C.defaultPrevented&&M.aa.h.call(this)}}m(M,H);var K={2:"touch",3:"pen",4:"mouse"};M.prototype.h=function(){M.aa.h.call(this);var C=this.i;C.preventDefault?C.preventDefault():C.returnValue=!1};var W="closure_listenable_"+(1e6*Math.random()|0),D=0;function L(C,X,de,$e,_t){this.listener=C,this.proxy=null,this.src=X,this.type=de,this.capture=!!$e,this.ha=_t,this.key=++D,this.da=this.fa=!1}function Z(C){C.da=!0,C.listener=null,C.proxy=null,C.src=null,C.ha=null}function ge(C){this.src=C,this.g={},this.h=0}ge.prototype.add=function(C,X,de,$e,_t){var Mt=C.toString();C=this.g[Mt],C||(C=this.g[Mt]=[],this.h++);var xr=Ge(C,X,$e,_t);return-1<xr?(X=C[xr],de||(X.fa=!1)):(X=new L(X,this.src,Mt,!!$e,_t),X.fa=de,C.push(X)),X};function U(C,X){var de=X.type;if(de in C.g){var $e=C.g[de],_t=Array.prototype.indexOf.call($e,X,void 0),Mt;(Mt=0<=_t)&&Array.prototype.splice.call($e,_t,1),Mt&&(Z(X),C.g[de].length==0&&(delete C.g[de],C.h--))}}function Ge(C,X,de,$e){for(var _t=0;_t<C.length;++_t){var Mt=C[_t];if(!Mt.da&&Mt.listener==X&&Mt.capture==!!de&&Mt.ha==$e)return _t}return-1}var ie="closure_lm_"+(1e6*Math.random()|0),J={};function je(C,X,de,$e,_t){if(Array.isArray(X)){for(var Mt=0;Mt<X.length;Mt++)je(C,X[Mt],de,$e,_t);return null}return de=dt(de),C&&C[W]?C.K(X,de,u($e)?!!$e.capture:!1,_t):z(C,X,de,!1,$e,_t)}function z(C,X,de,$e,_t,Mt){if(!X)throw Error("Invalid event type");var xr=u(_t)?!!_t.capture:!!_t,Un=De(C);if(Un||(C[ie]=Un=new ge(C)),de=Un.add(X,de,$e,xr,Mt),de.proxy)return de;if($e=Ae(),de.proxy=$e,$e.src=C,$e.listener=de,C.addEventListener)R||(_t=xr),_t===void 0&&(_t=!1),C.addEventListener(X.toString(),$e,_t);else if(C.attachEvent)C.attachEvent(st(X.toString()),$e);else if(C.addListener&&C.removeListener)C.addListener($e);else throw Error("addEventListener and attachEvent are unavailable.");return de}function Ae(){function C(de){return X.call(C.src,C.listener,de)}const X=ut;return C}function ye(C,X,de,$e,_t){if(Array.isArray(X))for(var Mt=0;Mt<X.length;Mt++)ye(C,X[Mt],de,$e,_t);else $e=u($e)?!!$e.capture:!!$e,de=dt(de),C&&C[W]?(C=C.i,X=String(X).toString(),X in C.g&&(Mt=C.g[X],de=Ge(Mt,de,$e,_t),-1<de&&(Z(Mt[de]),Array.prototype.splice.call(Mt,de,1),Mt.length==0&&(delete C.g[X],C.h--)))):C&&(C=De(C))&&(X=C.g[X.toString()],C=-1,X&&(C=Ge(X,de,$e,_t)),(de=-1<C?X[C]:null)&&Qe(de))}function Qe(C){if(typeof C!="number"&&C&&!C.da){var X=C.src;if(X&&X[W])U(X.i,C);else{var de=C.type,$e=C.proxy;X.removeEventListener?X.removeEventListener(de,$e,C.capture):X.detachEvent?X.detachEvent(st(de),$e):X.addListener&&X.removeListener&&X.removeListener($e),(de=De(X))?(U(de,C),de.h==0&&(de.src=null,X[ie]=null)):Z(C)}}}function st(C){return C in J?J[C]:J[C]="on"+C}function ut(C,X){if(C.da)C=!0;else{X=new M(X,this);var de=C.listener,$e=C.ha||C.src;C.fa&&Qe(C),C=de.call($e,X)}return C}function De(C){return C=C[ie],C instanceof ge?C:null}var it="__closure_events_fn_"+(1e9*Math.random()>>>0);function dt(C){return typeof C=="function"?C:(C[it]||(C[it]=function(X){return C.handleEvent(X)}),C[it])}function ce(){O.call(this),this.i=new ge(this),this.M=this,this.F=null}m(ce,O),ce.prototype[W]=!0,ce.prototype.removeEventListener=function(C,X,de,$e){ye(this,C,X,de,$e)};function oe(C,X){var de,$e=C.F;if($e)for(de=[];$e;$e=$e.F)de.push($e);if(C=C.M,$e=X.type||X,typeof X=="string")X=new H(X,C);else if(X instanceof H)X.target=X.target||C;else{var _t=X;X=new H($e,C),k(X,_t)}if(_t=!0,de)for(var Mt=de.length-1;0<=Mt;Mt--){var xr=X.g=de[Mt];_t=Me(xr,$e,!0,X)&&_t}if(xr=X.g=C,_t=Me(xr,$e,!0,X)&&_t,_t=Me(xr,$e,!1,X)&&_t,de)for(Mt=0;Mt<de.length;Mt++)xr=X.g=de[Mt],_t=Me(xr,$e,!1,X)&&_t}ce.prototype.N=function(){if(ce.aa.N.call(this),this.i){var C=this.i,X;for(X in C.g){for(var de=C.g[X],$e=0;$e<de.length;$e++)Z(de[$e]);delete C.g[X],C.h--}}this.F=null},ce.prototype.K=function(C,X,de,$e){return this.i.add(String(C),X,!1,de,$e)},ce.prototype.L=function(C,X,de,$e){return this.i.add(String(C),X,!0,de,$e)};function Me(C,X,de,$e){if(X=C.i.g[String(X)],!X)return!0;X=X.concat();for(var _t=!0,Mt=0;Mt<X.length;++Mt){var xr=X[Mt];if(xr&&!xr.da&&xr.capture==de){var Un=xr.listener,Cs=xr.ha||xr.src;xr.fa&&U(C.i,xr),_t=Un.call(Cs,$e)!==!1&&_t}}return _t&&!$e.defaultPrevented}function Le(C,X,de){if(typeof C=="function")de&&(C=h(C,de));else if(C&&typeof C.handleEvent=="function")C=h(C.handleEvent,C);else throw Error("Invalid listener argument");return 2147483647<Number(X)?-1:l.setTimeout(C,X||0)}function ve(C){C.g=Le(()=>{C.g=null,C.i&&(C.i=!1,ve(C))},C.l);const X=C.h;C.h=null,C.m.apply(null,X)}class le extends O{constructor(X,de){super(),this.m=X,this.l=de,this.h=null,this.i=!1,this.g=null}j(X){this.h=arguments,this.g?this.i=!0:ve(this)}N(){super.N(),this.g&&(l.clearTimeout(this.g),this.g=null,this.i=!1,this.h=null)}}function Ue(C){O.call(this),this.h=C,this.g={}}m(Ue,O);var rt=[];function mt(C){I(C.g,function(X,de){this.g.hasOwnProperty(de)&&Qe(X)},C),C.g={}}Ue.prototype.N=function(){Ue.aa.N.call(this),mt(this)},Ue.prototype.handleEvent=function(){throw Error("EventHandler.handleEvent not implemented")};var gt=l.JSON.stringify,Ct=l.JSON.parse,jt=class{stringify(C){return l.JSON.stringify(C,void 0)}parse(C){return l.JSON.parse(C,void 0)}};function xe(){}xe.prototype.h=null;function He(C){return C.h||(C.h=C.i())}function Ce(){}var lt={OPEN:"a",kb:"b",Ja:"c",wb:"d"};function nt(){H.call(this,"d")}m(nt,H);function Xe(){H.call(this,"c")}m(Xe,H);var It={},$t=null;function Ke(){return $t=$t||new ce}It.La="serverreachability";function wt(C){H.call(this,It.La,C)}m(wt,H);function q(C){const X=Ke();oe(X,new wt(X))}It.STAT_EVENT="statevent";function ae(C,X){H.call(this,It.STAT_EVENT,C),this.stat=X}m(ae,H);function ee(C){const X=Ke();oe(X,new ae(X,C))}It.Ma="timingevent";function be(C,X){H.call(this,It.Ma,C),this.size=X}m(be,H);function _e(C,X){if(typeof C!="function")throw Error("Fn must not be null and must be a function");return l.setTimeout(function(){C()},X)}function Be(){this.g=!0}Be.prototype.xa=function(){this.g=!1};function tt(C,X,de,$e,_t,Mt){C.info(function(){if(C.g)if(Mt)for(var xr="",Un=Mt.split("&"),Cs=0;Cs<Un.length;Cs++){var In=Un[Cs].split("=");if(1<In.length){var Yn=In[0];In=In[1];var La=Yn.split("_");xr=2<=La.length&&La[1]=="type"?xr+(Yn+"="+In+"&"):xr+(Yn+"=redacted&")}}else xr=null;else xr=Mt;return"XMLHTTP REQ ("+$e+") [attempt "+_t+"]: "+X+`
`+de+`
`+xr})}function ot(C,X,de,$e,_t,Mt,xr){C.info(function(){return"XMLHTTP RESP ("+$e+") [ attempt "+_t+"]: "+X+`
`+de+`
`+Mt+" "+xr})}function te(C,X,de,$e){C.info(function(){return"XMLHTTP TEXT ("+X+"): "+re(C,de)+($e?" "+$e:"")})}function V(C,X){C.info(function(){return"TIMEOUT: "+X})}Be.prototype.info=function(){};function re(C,X){if(!C.g)return X;if(!X)return null;try{var de=JSON.parse(X);if(de){for(C=0;C<de.length;C++)if(Array.isArray(de[C])){var $e=de[C];if(!(2>$e.length)){var _t=$e[1];if(Array.isArray(_t)&&!(1>_t.length)){var Mt=_t[0];if(Mt!="noop"&&Mt!="stop"&&Mt!="close")for(var xr=1;xr<_t.length;xr++)_t[xr]=""}}}}return gt(de)}catch{return X}}var pe={NO_ERROR:0,gb:1,tb:2,sb:3,nb:4,rb:5,ub:6,Ia:7,TIMEOUT:8,xb:9},Ee={lb:"complete",Hb:"success",Ja:"error",Ia:"abort",zb:"ready",Ab:"readystatechange",TIMEOUT:"timeout",vb:"incrementaldata",yb:"progress",ob:"downloadprogress",Pb:"uploadprogress"},Se;function Re(){}m(Re,xe),Re.prototype.g=function(){return new XMLHttpRequest},Re.prototype.i=function(){return{}},Se=new Re;function et(C,X,de,$e){this.j=C,this.i=X,this.l=de,this.R=$e||1,this.U=new Ue(this),this.I=45e3,this.H=null,this.o=!1,this.m=this.A=this.v=this.L=this.F=this.S=this.B=null,this.D=[],this.g=null,this.C=0,this.s=this.u=null,this.X=-1,this.J=!1,this.O=0,this.M=null,this.W=this.K=this.T=this.P=!1,this.h=new We}function We(){this.i=null,this.g="",this.h=!1}var At={},vt={};function Vt(C,X,de){C.L=1,C.v=ys(Ht(X)),C.m=de,C.P=!0,or(C,null)}function or(C,X){C.F=Date.now(),bt(C),C.A=Ht(C.v);var de=C.A,$e=C.R;Array.isArray($e)||($e=[String($e)]),pg(de.i,"t",$e),C.C=0,de=C.j.J,C.h=new We,C.g=Rs(C.j,de?X:null,!C.m),0<C.O&&(C.M=new le(h(C.Y,C,C.g),C.O)),X=C.U,de=C.g,$e=C.ca;var _t="readystatechange";Array.isArray(_t)||(_t&&(rt[0]=_t.toString()),_t=rt);for(var Mt=0;Mt<_t.length;Mt++){var xr=je(de,_t[Mt],$e||X.handleEvent,!1,X.h||X);if(!xr)break;X.g[xr.key]=xr}X=C.H?E(C.H):{},C.m?(C.u||(C.u="POST"),X["Content-Type"]="application/x-www-form-urlencoded",C.g.ea(C.A,C.u,C.m,X)):(C.u="GET",C.g.ea(C.A,C.u,null,X)),q(),tt(C.i,C.u,C.A,C.l,C.R,C.m)}et.prototype.ca=function(C){C=C.target;const X=this.M;X&&Nl(C)==3?X.j():this.Y(C)},et.prototype.Y=function(C){try{if(C==this.g)e:{const La=Nl(this.g);var X=this.g.Ba();const wc=this.g.Z();if(!(3>La)&&(La!=3||this.g&&(this.h.h||this.g.oa()||dm(this.g)))){this.J||La!=4||X==7||(X==8||0>=wc?q(3):q(2)),xt(this);var de=this.g.Z();this.X=de;t:if(Oe(this)){var $e=dm(this.g);C="";var _t=$e.length,Mt=Nl(this.g)==4;if(!this.h.i){if(typeof TextDecoder>"u"){Xt(this),sr(this);var xr="";break t}this.h.i=new l.TextDecoder}for(X=0;X<_t;X++)this.h.h=!0,C+=this.h.i.decode($e[X],{stream:!(Mt&&X==_t-1)});$e.length=0,this.h.g+=C,this.C=0,xr=this.h.g}else xr=this.g.oa();if(this.o=de==200,ot(this.i,this.u,this.A,this.l,this.R,La,de),this.o){if(this.T&&!this.K){t:{if(this.g){var Un,Cs=this.g;if((Un=Cs.g?Cs.g.getResponseHeader("X-HTTP-Initial-Response"):null)&&!y(Un)){var In=Un;break t}}In=null}if(de=In)te(this.i,this.l,de,"Initial handshake response via X-HTTP-Initial-Response"),this.K=!0,Kt(this,de);else{this.o=!1,this.s=3,ee(12),Xt(this),sr(this);break e}}if(this.P){de=!0;let Wo;for(;!this.J&&this.C<xr.length;)if(Wo=ct(this,xr),Wo==vt){La==4&&(this.s=4,ee(14),de=!1),te(this.i,this.l,null,"[Incomplete Response]");break}else if(Wo==At){this.s=4,ee(15),te(this.i,this.l,xr,"[Invalid Chunk]"),de=!1;break}else te(this.i,this.l,Wo,null),Kt(this,Wo);if(Oe(this)&&this.C!=0&&(this.h.g=this.h.g.slice(this.C),this.C=0),La!=4||xr.length!=0||this.h.h||(this.s=1,ee(16),de=!1),this.o=this.o&&de,!de)te(this.i,this.l,xr,"[Invalid Chunked Response]"),Xt(this),sr(this);else if(0<xr.length&&!this.W){this.W=!0;var Yn=this.j;Yn.g==this&&Yn.ba&&!Yn.M&&(Yn.j.info("Great, no buffering proxy detected. Bytes received: "+xr.length),Fr(Yn),Yn.M=!0,ee(11))}}else te(this.i,this.l,xr,null),Kt(this,xr);La==4&&Xt(this),this.o&&!this.J&&(La==4?An(this.j,this):(this.o=!1,bt(this)))}else xg(this.g),de==400&&0<xr.indexOf("Unknown SID")?(this.s=3,ee(12)):(this.s=0,ee(13)),Xt(this),sr(this)}}}catch{}finally{}};function Oe(C){return C.g?C.u=="GET"&&C.L!=2&&C.j.Ca:!1}function ct(C,X){var de=C.C,$e=X.indexOf(`
`,de);return $e==-1?vt:(de=Number(X.substring(de,$e)),isNaN(de)?At:($e+=1,$e+de>X.length?vt:(X=X.slice($e,$e+de),C.C=$e+de,X)))}et.prototype.cancel=function(){this.J=!0,Xt(this)};function bt(C){C.S=Date.now()+C.I,Dt(C,C.I)}function Dt(C,X){if(C.B!=null)throw Error("WatchDog timer not null");C.B=_e(h(C.ba,C),X)}function xt(C){C.B&&(l.clearTimeout(C.B),C.B=null)}et.prototype.ba=function(){this.B=null;const C=Date.now();0<=C-this.S?(V(this.i,this.A),this.L!=2&&(q(),ee(17)),Xt(this),this.s=2,sr(this)):Dt(this,this.S-C)};function sr(C){C.j.G==0||C.J||An(C.j,C)}function Xt(C){xt(C);var X=C.M;X&&typeof X.ma=="function"&&X.ma(),C.M=null,mt(C.U),C.g&&(X=C.g,C.g=null,X.abort(),X.ma())}function Kt(C,X){try{var de=C.j;if(de.G!=0&&(de.g==C||Ir(de.h,C))){if(!C.K&&Ir(de.h,C)&&de.G==3){try{var $e=de.Da.g.parse(X)}catch{$e=null}if(Array.isArray($e)&&$e.length==3){var _t=$e;if(_t[0]==0){e:if(!de.u){if(de.g)if(de.g.F+3e3<C.F)rn(de),cu(de);else break e;lr(de),ee(18)}}else de.za=_t[1],0<de.za-de.T&&37500>_t[2]&&de.F&&de.v==0&&!de.C&&(de.C=_e(h(de.Za,de),6e3));if(1>=_r(de.h)&&de.ca){try{de.ca()}catch{}de.ca=void 0}}else na(de,11)}else if((C.K||de.g==C)&&rn(de),!y(X))for(_t=de.Da.g.parse(X),X=0;X<_t.length;X++){let In=_t[X];if(de.T=In[0],In=In[1],de.G==2)if(In[0]=="c"){de.K=In[1],de.ia=In[2];const Yn=In[3];Yn!=null&&(de.la=Yn,de.j.info("VER="+de.la));const La=In[4];La!=null&&(de.Aa=La,de.j.info("SVER="+de.Aa));const wc=In[5];wc!=null&&typeof wc=="number"&&0<wc&&($e=1.5*wc,de.L=$e,de.j.info("backChannelRequestTimeoutMs_="+$e)),$e=de;const Wo=C.g;if(Wo){const wo=Wo.g?Wo.g.getResponseHeader("X-Client-Wire-Protocol"):null;if(wo){var Mt=$e.h;Mt.g||wo.indexOf("spdy")==-1&&wo.indexOf("quic")==-1&&wo.indexOf("h2")==-1||(Mt.j=Mt.l,Mt.g=new Set,Mt.h&&(Tn(Mt,Mt.h),Mt.h=null))}if($e.D){const nd=Wo.g?Wo.g.getResponseHeader("X-HTTP-Session-Id"):null;nd&&($e.ya=nd,Cr($e.I,$e.D,nd))}}de.G=3,de.l&&de.l.ua(),de.ba&&(de.R=Date.now()-C.F,de.j.info("Handshake RTT: "+de.R+"ms")),$e=de;var xr=C;if($e.qa=fa($e,$e.J?$e.ia:null,$e.W),xr.K){is($e.h,xr);var Un=xr,Cs=$e.L;Cs&&(Un.I=Cs),Un.B&&(xt(Un),bt(Un)),$e.g=xr}else tr($e);0<de.i.length&&Q(de)}else In[0]!="stop"&&In[0]!="close"||na(de,7);else de.G==3&&(In[0]=="stop"||In[0]=="close"?In[0]=="stop"?na(de,7):mh(de):In[0]!="noop"&&de.l&&de.l.ta(In),de.v=0)}}q(4)}catch{}}var ar=class{constructor(C,X){this.g=C,this.map=X}};function Ar(C){this.l=C||10,l.PerformanceNavigationTiming?(C=l.performance.getEntriesByType("navigation"),C=0<C.length&&(C[0].nextHopProtocol=="hq"||C[0].nextHopProtocol=="h2")):C=!!(l.chrome&&l.chrome.loadTimes&&l.chrome.loadTimes()&&l.chrome.loadTimes().wasFetchedViaSpdy),this.j=C?this.l:1,this.g=null,1<this.j&&(this.g=new Set),this.h=null,this.i=[]}function Gt(C){return C.h?!0:C.g?C.g.size>=C.j:!1}function _r(C){return C.h?1:C.g?C.g.size:0}function Ir(C,X){return C.h?C.h==X:C.g?C.g.has(X):!1}function Tn(C,X){C.g?C.g.add(X):C.h=X}function is(C,X){C.h&&C.h==X?C.h=null:C.g&&C.g.has(X)&&C.g.delete(X)}Ar.prototype.cancel=function(){if(this.i=fn(this),this.h)this.h.cancel(),this.h=null;else if(this.g&&this.g.size!==0){for(const C of this.g.values())C.cancel();this.g.clear()}};function fn(C){if(C.h!=null)return C.i.concat(C.h.D);if(C.g!=null&&C.g.size!==0){let X=C.i;for(const de of C.g.values())X=X.concat(de.D);return X}return p(C.i)}function St(C){if(C.V&&typeof C.V=="function")return C.V();if(typeof Map<"u"&&C instanceof Map||typeof Set<"u"&&C instanceof Set)return Array.from(C.values());if(typeof C=="string")return C.split("");if(c(C)){for(var X=[],de=C.length,$e=0;$e<de;$e++)X.push(C[$e]);return X}X=[],de=0;for($e in C)X[de++]=C[$e];return X}function at(C){if(C.na&&typeof C.na=="function")return C.na();if(!C.V||typeof C.V!="function"){if(typeof Map<"u"&&C instanceof Map)return Array.from(C.keys());if(!(typeof Set<"u"&&C instanceof Set)){if(c(C)||typeof C=="string"){var X=[];C=C.length;for(var de=0;de<C;de++)X.push(de);return X}X=[],de=0;for(const $e in C)X[de++]=$e;return X}}}function zt(C,X){if(C.forEach&&typeof C.forEach=="function")C.forEach(X,void 0);else if(c(C)||typeof C=="string")Array.prototype.forEach.call(C,X,void 0);else for(var de=at(C),$e=St(C),_t=$e.length,Mt=0;Mt<_t;Mt++)X.call(void 0,$e[Mt],de&&de[Mt],C)}var Ut=RegExp("^(?:([^:/?#.]+):)?(?://(?:([^\\\\/?#]*)@)?([^\\\\/?#]*?)(?::([0-9]+))?(?=[\\\\/?#]|$))?([^?#]+)?(?:\\?([^#]*))?(?:#([\\s\\S]*))?$");function Qt(C,X){if(C){C=C.split("&");for(var de=0;de<C.length;de++){var $e=C[de].indexOf("="),_t=null;if(0<=$e){var Mt=C[de].substring(0,$e);_t=C[de].substring($e+1)}else Mt=C[de];X(Mt,_t?decodeURIComponent(_t.replace(/\+/g," ")):"")}}}function Bt(C){if(this.g=this.o=this.j="",this.s=null,this.m=this.l="",this.h=!1,C instanceof Bt){this.h=C.h,Lt(this,C.j),this.o=C.o,this.g=C.g,er(this,C.s),this.l=C.l;var X=C.i,de=new bo;de.i=X.i,X.g&&(de.g=new Map(X.g),de.h=X.h),gr(this,de),this.m=C.m}else C&&(X=String(C).match(Ut))?(this.h=!1,Lt(this,X[1]||"",!0),this.o=Ta(X[2]||""),this.g=Ta(X[3]||"",!0),er(this,X[4]),this.l=Ta(X[5]||"",!0),gr(this,X[6]||"",!0),this.m=Ta(X[7]||"")):(this.h=!1,this.i=new bo(null,this.h))}Bt.prototype.toString=function(){var C=[],X=this.j;X&&C.push(da(X,zl,!0),":");var de=this.g;return(de||X=="file")&&(C.push("//"),(X=this.o)&&C.push(da(X,zl,!0),"@"),C.push(encodeURIComponent(String(de)).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),de=this.s,de!=null&&C.push(":",String(de))),(de=this.l)&&(this.g&&de.charAt(0)!="/"&&C.push("/"),C.push(da(de,de.charAt(0)=="/"?Gd:ed,!0))),(de=this.i.toString())&&C.push("?",de),(de=this.m)&&C.push("#",da(de,Lf)),C.join("")};function Ht(C){return new Bt(C)}function Lt(C,X,de){C.j=de?Ta(X,!0):X,C.j&&(C.j=C.j.replace(/:$/,""))}function er(C,X){if(X){if(X=Number(X),isNaN(X)||0>X)throw Error("Bad port number "+X);C.s=X}else C.s=null}function gr(C,X,de){X instanceof bo?(C.i=X,e1(C.i,C.h)):(de||(X=da(X,au)),C.i=new bo(X,C.h))}function Cr(C,X,de){C.i.set(X,de)}function ys(C){return Cr(C,"zx",Math.floor(2147483648*Math.random()).toString(36)+Math.abs(Math.floor(2147483648*Math.random())^Date.now()).toString(36)),C}function Ta(C,X){return C?X?decodeURI(C.replace(/%25/g,"%2525")):decodeURIComponent(C):""}function da(C,X,de){return typeof C=="string"?(C=encodeURI(C).replace(X,Ws),de&&(C=C.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),C):null}function Ws(C){return C=C.charCodeAt(0),"%"+(C>>4&15).toString(16)+(C&15).toString(16)}var zl=/[#\/\?@]/g,ed=/[#\?:]/g,Gd=/[#\?]/g,au=/[#\?@]/g,Lf=/#/g;function bo(C,X){this.h=this.g=null,this.i=C||null,this.j=!!X}function su(C){C.g||(C.g=new Map,C.h=0,C.i&&Qt(C.i,function(X,de){C.add(decodeURIComponent(X.replace(/\+/g," ")),de)}))}t=bo.prototype,t.add=function(C,X){su(this),this.i=null,C=tn(this,C);var de=this.g.get(C);return de||this.g.set(C,de=[]),de.push(X),this.h+=1,this};function qd(C,X){su(C),X=tn(C,X),C.g.has(X)&&(C.i=null,C.h-=C.g.get(X).length,C.g.delete(X))}function dh(C,X){return su(C),X=tn(C,X),C.g.has(X)}t.forEach=function(C,X){su(this),this.g.forEach(function(de,$e){de.forEach(function(_t){C.call(X,_t,$e,this)},this)},this)},t.na=function(){su(this);const C=Array.from(this.g.values()),X=Array.from(this.g.keys()),de=[];for(let $e=0;$e<X.length;$e++){const _t=C[$e];for(let Mt=0;Mt<_t.length;Mt++)de.push(X[$e])}return de},t.V=function(C){su(this);let X=[];if(typeof C=="string")dh(this,C)&&(X=X.concat(this.g.get(tn(this,C))));else{C=Array.from(this.g.values());for(let de=0;de<C.length;de++)X=X.concat(C[de])}return X},t.set=function(C,X){return su(this),this.i=null,C=tn(this,C),dh(this,C)&&(this.h-=this.g.get(C).length),this.g.set(C,[X]),this.h+=1,this},t.get=function(C,X){return C?(C=this.V(C),0<C.length?String(C[0]):X):X};function pg(C,X,de){qd(C,X),0<de.length&&(C.i=null,C.g.set(tn(C,X),p(de)),C.h+=de.length)}t.toString=function(){if(this.i)return this.i;if(!this.g)return"";const C=[],X=Array.from(this.g.keys());for(var de=0;de<X.length;de++){var $e=X[de];const Mt=encodeURIComponent(String($e)),xr=this.V($e);for($e=0;$e<xr.length;$e++){var _t=Mt;xr[$e]!==""&&(_t+="="+encodeURIComponent(String(xr[$e]))),C.push(_t)}}return this.i=C.join("&")};function tn(C,X){return X=String(X),C.j&&(X=X.toLowerCase()),X}function e1(C,X){X&&!C.j&&(su(C),C.i=null,C.g.forEach(function(de,$e){var _t=$e.toLowerCase();$e!=_t&&(qd(this,$e),pg(this,_t,de))},C)),C.j=X}function t1(C,X){const de=new Be;if(l.Image){const $e=new Image;$e.onload=A(Ji,de,"TestLoadImage: loaded",!0,X,$e),$e.onerror=A(Ji,de,"TestLoadImage: error",!1,X,$e),$e.onabort=A(Ji,de,"TestLoadImage: abort",!1,X,$e),$e.ontimeout=A(Ji,de,"TestLoadImage: timeout",!1,X,$e),l.setTimeout(function(){$e.ontimeout&&$e.ontimeout()},1e4),$e.src=C}else X(!1)}function r1(C,X){const de=new Be,$e=new AbortController,_t=setTimeout(()=>{$e.abort(),Ji(de,"TestPingServer: timeout",!1,X)},1e4);fetch(C,{signal:$e.signal}).then(Mt=>{clearTimeout(_t),Mt.ok?Ji(de,"TestPingServer: ok",!0,X):Ji(de,"TestPingServer: server error",!1,X)}).catch(()=>{clearTimeout(_t),Ji(de,"TestPingServer: error",!1,X)})}function Ji(C,X,de,$e,_t){try{_t&&(_t.onload=null,_t.onerror=null,_t.onabort=null,_t.ontimeout=null),$e(de)}catch{}}function td(){this.g=new jt}function n1(C,X,de){const $e=de||"";try{zt(C,function(_t,Mt){let xr=_t;u(_t)&&(xr=gt(_t)),X.push($e+Mt+"="+encodeURIComponent(xr))})}catch(_t){throw X.push($e+"type="+encodeURIComponent("_badmap")),_t}}function fh(C){this.l=C.Ub||null,this.j=C.eb||!1}m(fh,xe),fh.prototype.g=function(){return new rd(this.l,this.j)},fh.prototype.i=function(C){return function(){return C}}({});function rd(C,X){ce.call(this),this.D=C,this.o=X,this.m=void 0,this.status=this.readyState=0,this.responseType=this.responseText=this.response=this.statusText="",this.onreadystatechange=null,this.u=new Headers,this.h=null,this.B="GET",this.A="",this.g=!1,this.v=this.j=this.l=null}m(rd,ce),t=rd.prototype,t.open=function(C,X){if(this.readyState!=0)throw this.abort(),Error("Error reopening a connection");this.B=C,this.A=X,this.readyState=1,Uf(this)},t.send=function(C){if(this.readyState!=1)throw this.abort(),Error("need to call open() first. ");this.g=!0;const X={headers:this.u,method:this.B,credentials:this.m,cache:void 0};C&&(X.body=C),(this.D||l).fetch(new Request(this.A,X)).then(this.Sa.bind(this),this.ga.bind(this))},t.abort=function(){this.response=this.responseText="",this.u=new Headers,this.status=0,this.j&&this.j.cancel("Request was aborted.").catch(()=>{}),1<=this.readyState&&this.g&&this.readyState!=4&&(this.g=!1,bc(this)),this.readyState=0},t.Sa=function(C){if(this.g&&(this.l=C,this.h||(this.status=this.l.status,this.statusText=this.l.statusText,this.h=C.headers,this.readyState=2,Uf(this)),this.g&&(this.readyState=3,Uf(this),this.g)))if(this.responseType==="arraybuffer")C.arrayBuffer().then(this.Qa.bind(this),this.ga.bind(this));else if(typeof l.ReadableStream<"u"&&"body"in C){if(this.j=C.body.getReader(),this.o){if(this.responseType)throw Error('responseType must be empty for "streamBinaryChunks" mode responses.');this.response=[]}else this.response=this.responseText="",this.v=new TextDecoder;Ah(this)}else C.text().then(this.Ra.bind(this),this.ga.bind(this))};function Ah(C){C.j.read().then(C.Pa.bind(C)).catch(C.ga.bind(C))}t.Pa=function(C){if(this.g){if(this.o&&C.value)this.response.push(C.value);else if(!this.o){var X=C.value?C.value:new Uint8Array(0);(X=this.v.decode(X,{stream:!C.done}))&&(this.response=this.responseText+=X)}C.done?bc(this):Uf(this),this.readyState==3&&Ah(this)}},t.Ra=function(C){this.g&&(this.response=this.responseText=C,bc(this))},t.Qa=function(C){this.g&&(this.response=C,bc(this))},t.ga=function(){this.g&&bc(this)};function bc(C){C.readyState=4,C.l=null,C.j=null,C.v=null,Uf(C)}t.setRequestHeader=function(C,X){this.u.append(C,X)},t.getResponseHeader=function(C){return this.h&&this.h.get(C.toLowerCase())||""},t.getAllResponseHeaders=function(){if(!this.h)return"";const C=[],X=this.h.entries();for(var de=X.next();!de.done;)de=de.value,C.push(de[0]+": "+de[1]),de=X.next();return C.join(`\r
`)};function Uf(C){C.onreadystatechange&&C.onreadystatechange.call(C)}Object.defineProperty(rd.prototype,"withCredentials",{get:function(){return this.m==="include"},set:function(C){this.m=C?"include":"same-origin"}});function iu(C){let X="";return I(C,function(de,$e){X+=$e,X+=":",X+=de,X+=`\r
`}),X}function cm(C,X,de){e:{for($e in de){var $e=!1;break e}$e=!0}$e||(de=iu(de),typeof C=="string"?de!=null&&encodeURIComponent(String(de)):Cr(C,X,de))}function Sa(C){ce.call(this),this.headers=new Map,this.o=C||null,this.h=!1,this.v=this.g=null,this.D="",this.m=0,this.l="",this.j=this.B=this.u=this.A=!1,this.I=null,this.H="",this.J=!1}m(Sa,ce);var um=/^https?$/i,gg=["POST","PUT"];t=Sa.prototype,t.Ha=function(C){this.J=C},t.ea=function(C,X,de,$e){if(this.g)throw Error("[goog.net.XhrIo] Object is active with another request="+this.D+"; newUri="+C);X=X?X.toUpperCase():"GET",this.D=C,this.l="",this.m=0,this.A=!1,this.h=!0,this.g=this.o?this.o.g():Se.g(),this.v=this.o?He(this.o):He(Se),this.g.onreadystatechange=h(this.Ea,this);try{this.B=!0,this.g.open(X,String(C),!0),this.B=!1}catch(Mt){ou(this,Mt);return}if(C=de||"",de=new Map(this.headers),$e)if(Object.getPrototypeOf($e)===Object.prototype)for(var _t in $e)de.set(_t,$e[_t]);else if(typeof $e.keys=="function"&&typeof $e.get=="function")for(const Mt of $e.keys())de.set(Mt,$e.get(Mt));else throw Error("Unknown input type for opt_headers: "+String($e));$e=Array.from(de.keys()).find(Mt=>Mt.toLowerCase()=="content-type"),_t=l.FormData&&C instanceof l.FormData,!(0<=Array.prototype.indexOf.call(gg,X,void 0))||$e||_t||de.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8");for(const[Mt,xr]of de)this.g.setRequestHeader(Mt,xr);this.H&&(this.g.responseType=this.H),"withCredentials"in this.g&&this.g.withCredentials!==this.J&&(this.g.withCredentials=this.J);try{Wd(this),this.u=!0,this.g.send(C),this.u=!1}catch(Mt){ou(this,Mt)}};function ou(C,X){C.h=!1,C.g&&(C.j=!0,C.g.abort(),C.j=!1),C.l=X,C.m=5,hh(C),zd(C)}function hh(C){C.A||(C.A=!0,oe(C,"complete"),oe(C,"error"))}t.abort=function(C){this.g&&this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1,this.m=C||7,oe(this,"complete"),oe(this,"abort"),zd(this))},t.N=function(){this.g&&(this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1),zd(this,!0)),Sa.aa.N.call(this)},t.Ea=function(){this.s||(this.B||this.u||this.j?Qf(this):this.bb())},t.bb=function(){Qf(this)};function Qf(C){if(C.h&&typeof i<"u"&&(!C.v[1]||Nl(C)!=4||C.Z()!=2)){if(C.u&&Nl(C)==4)Le(C.Ea,0,C);else if(oe(C,"readystatechange"),Nl(C)==4){C.h=!1;try{const xr=C.Z();e:switch(xr){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var X=!0;break e;default:X=!1}var de;if(!(de=X)){var $e;if($e=xr===0){var _t=String(C.D).match(Ut)[1]||null;!_t&&l.self&&l.self.location&&(_t=l.self.location.protocol.slice(0,-1)),$e=!um.test(_t?_t.toLowerCase():"")}de=$e}if(de)oe(C,"complete"),oe(C,"success");else{C.m=6;try{var Mt=2<Nl(C)?C.g.statusText:""}catch{Mt=""}C.l=Mt+" ["+C.Z()+"]",hh(C)}}finally{zd(C)}}}}function zd(C,X){if(C.g){Wd(C);const de=C.g,$e=C.v[0]?()=>{}:null;C.g=null,C.v=null,X||oe(C,"ready");try{de.onreadystatechange=$e}catch{}}}function Wd(C){C.I&&(l.clearTimeout(C.I),C.I=null)}t.isActive=function(){return!!this.g};function Nl(C){return C.g?C.g.readyState:0}t.Z=function(){try{return 2<Nl(this)?this.g.status:-1}catch{return-1}},t.oa=function(){try{return this.g?this.g.responseText:""}catch{return""}},t.Oa=function(C){if(this.g){var X=this.g.responseText;return C&&X.indexOf(C)==0&&(X=X.substring(C.length)),Ct(X)}};function dm(C){try{if(!C.g)return null;if("response"in C.g)return C.g.response;switch(C.H){case"":case"text":return C.g.responseText;case"arraybuffer":if("mozResponseArrayBuffer"in C.g)return C.g.mozResponseArrayBuffer}return null}catch{return null}}function xg(C){const X={};C=(C.g&&2<=Nl(C)&&C.g.getAllResponseHeaders()||"").split(`\r
`);for(let $e=0;$e<C.length;$e++){if(y(C[$e]))continue;var de=P(C[$e]);const _t=de[0];if(de=de[1],typeof de!="string")continue;de=de.trim();const Mt=X[_t]||[];X[_t]=Mt,Mt.push(de)}_(X,function($e){return $e.join(", ")})}t.Ba=function(){return this.m},t.Ka=function(){return typeof this.l=="string"?this.l:String(this.l)};function Cl(C,X,de){return de&&de.internalChannelParams&&de.internalChannelParams[C]||X}function lu(C){this.Aa=0,this.i=[],this.j=new Be,this.ia=this.qa=this.I=this.W=this.g=this.ya=this.D=this.H=this.m=this.S=this.o=null,this.Ya=this.U=0,this.Va=Cl("failFast",!1,C),this.F=this.C=this.u=this.s=this.l=null,this.X=!0,this.za=this.T=-1,this.Y=this.v=this.B=0,this.Ta=Cl("baseRetryDelayMs",5e3,C),this.cb=Cl("retryDelaySeedMs",1e4,C),this.Wa=Cl("forwardChannelMaxRetries",2,C),this.wa=Cl("forwardChannelRequestTimeoutMs",2e4,C),this.pa=C&&C.xmlHttpFactory||void 0,this.Xa=C&&C.Tb||void 0,this.Ca=C&&C.useFetchStreams||!1,this.L=void 0,this.J=C&&C.supportsCrossDomainXhr||!1,this.K="",this.h=new Ar(C&&C.concurrentRequestLimit),this.Da=new td,this.P=C&&C.fastHandshake||!1,this.O=C&&C.encodeInitMessageHeaders||!1,this.P&&this.O&&(this.O=!1),this.Ua=C&&C.Rb||!1,C&&C.xa&&this.j.xa(),C&&C.forceLongPolling&&(this.X=!1),this.ba=!this.P&&this.X&&C&&C.detectBufferingProxy||!1,this.ja=void 0,C&&C.longPollingTimeout&&0<C.longPollingTimeout&&(this.ja=C.longPollingTimeout),this.ca=void 0,this.R=0,this.M=!1,this.ka=this.A=null}t=lu.prototype,t.la=8,t.G=1,t.connect=function(C,X,de,$e){ee(0),this.W=C,this.H=X||{},de&&$e!==void 0&&(this.H.OSID=de,this.H.OAID=$e),this.F=this.X,this.I=fa(this,null,this.W),Q(this)};function mh(C){if(fm(C),C.G==3){var X=C.U++,de=Ht(C.I);if(Cr(de,"SID",C.K),Cr(de,"RID",X),Cr(de,"TYPE","terminate"),ft(C,de),X=new et(C,C.j,X),X.L=2,X.v=ys(Ht(de)),de=!1,l.navigator&&l.navigator.sendBeacon)try{de=l.navigator.sendBeacon(X.v.toString(),"")}catch{}!de&&l.Image&&(new Image().src=X.v,de=!0),de||(X.g=Rs(X.j,null),X.g.ea(X.v)),X.F=Date.now(),bt(X)}bs(C)}function cu(C){C.g&&(Fr(C),C.g.cancel(),C.g=null)}function fm(C){cu(C),C.u&&(l.clearTimeout(C.u),C.u=null),rn(C),C.h.cancel(),C.s&&(typeof C.s=="number"&&l.clearTimeout(C.s),C.s=null)}function Q(C){if(!Gt(C.h)&&!C.s){C.s=!0;var X=C.Ga;fe||Pe(),me||(fe(),me=!0),ne.add(X,C),C.B=0}}function we(C,X){return _r(C.h)>=C.h.j-(C.s?1:0)?!1:C.s?(C.i=X.D.concat(C.i),!0):C.G==1||C.G==2||C.B>=(C.Va?0:C.Wa)?!1:(C.s=_e(h(C.Ga,C,X),On(C,C.B)),C.B++,!0)}t.Ga=function(C){if(this.s)if(this.s=null,this.G==1){if(!C){this.U=Math.floor(1e5*Math.random()),C=this.U++;const _t=new et(this,this.j,C);let Mt=this.o;if(this.S&&(Mt?(Mt=E(Mt),k(Mt,this.S)):Mt=this.S),this.m!==null||this.O||(_t.H=Mt,Mt=null),this.P)e:{for(var X=0,de=0;de<this.i.length;de++){t:{var $e=this.i[de];if("__data__"in $e.map&&($e=$e.map.__data__,typeof $e=="string")){$e=$e.length;break t}$e=void 0}if($e===void 0)break;if(X+=$e,4096<X){X=de;break e}if(X===4096||de===this.i.length-1){X=de+1;break e}}X=1e3}else X=1e3;X=Nt(this,_t,X),de=Ht(this.I),Cr(de,"RID",C),Cr(de,"CVER",22),this.D&&Cr(de,"X-HTTP-Session-Id",this.D),ft(this,de),Mt&&(this.O?X="headers="+encodeURIComponent(String(iu(Mt)))+"&"+X:this.m&&cm(de,this.m,Mt)),Tn(this.h,_t),this.Ua&&Cr(de,"TYPE","init"),this.P?(Cr(de,"$req",X),Cr(de,"SID","null"),_t.T=!0,Vt(_t,de,null)):Vt(_t,de,X),this.G=2}}else this.G==3&&(C?Ye(this,C):this.i.length==0||Gt(this.h)||Ye(this))};function Ye(C,X){var de;X?de=X.l:de=C.U++;const $e=Ht(C.I);Cr($e,"SID",C.K),Cr($e,"RID",de),Cr($e,"AID",C.T),ft(C,$e),C.m&&C.o&&cm($e,C.m,C.o),de=new et(C,C.j,de,C.B+1),C.m===null&&(de.H=C.o),X&&(C.i=X.D.concat(C.i)),X=Nt(C,de,1e3),de.I=Math.round(.5*C.wa)+Math.round(.5*C.wa*Math.random()),Tn(C.h,de),Vt(de,$e,X)}function ft(C,X){C.H&&I(C.H,function(de,$e){Cr(X,$e,de)}),C.l&&zt({},function(de,$e){Cr(X,$e,de)})}function Nt(C,X,de){de=Math.min(C.i.length,de);var $e=C.l?h(C.l.Na,C.l,C):null;e:{var _t=C.i;let Mt=-1;for(;;){const xr=["count="+de];Mt==-1?0<de?(Mt=_t[0].g,xr.push("ofs="+Mt)):Mt=0:xr.push("ofs="+Mt);let Un=!0;for(let Cs=0;Cs<de;Cs++){let In=_t[Cs].g;const Yn=_t[Cs].map;if(In-=Mt,0>In)Mt=Math.max(0,_t[Cs].g-100),Un=!1;else try{n1(Yn,xr,"req"+In+"_")}catch{$e&&$e(Yn)}}if(Un){$e=xr.join("&");break e}}}return C=C.i.splice(0,de),X.D=C,$e}function tr(C){if(!C.g&&!C.u){C.Y=1;var X=C.Fa;fe||Pe(),me||(fe(),me=!0),ne.add(X,C),C.v=0}}function lr(C){return C.g||C.u||3<=C.v?!1:(C.Y++,C.u=_e(h(C.Fa,C),On(C,C.v)),C.v++,!0)}t.Fa=function(){if(this.u=null,Qr(this),this.ba&&!(this.M||this.g==null||0>=this.R)){var C=2*this.R;this.j.info("BP detection timer enabled: "+C),this.A=_e(h(this.ab,this),C)}},t.ab=function(){this.A&&(this.A=null,this.j.info("BP detection timeout reached."),this.j.info("Buffering proxy detected and switch to long-polling!"),this.F=!1,this.M=!0,ee(10),cu(this),Qr(this))};function Fr(C){C.A!=null&&(l.clearTimeout(C.A),C.A=null)}function Qr(C){C.g=new et(C,C.j,"rpc",C.Y),C.m===null&&(C.g.H=C.o),C.g.O=0;var X=Ht(C.qa);Cr(X,"RID","rpc"),Cr(X,"SID",C.K),Cr(X,"AID",C.T),Cr(X,"CI",C.F?"0":"1"),!C.F&&C.ja&&Cr(X,"TO",C.ja),Cr(X,"TYPE","xmlhttp"),ft(C,X),C.m&&C.o&&cm(X,C.m,C.o),C.L&&(C.g.I=C.L);var de=C.g;C=C.ia,de.L=1,de.v=ys(Ht(X)),de.m=null,de.P=!0,or(de,C)}t.Za=function(){this.C!=null&&(this.C=null,cu(this),lr(this),ee(19))};function rn(C){C.C!=null&&(l.clearTimeout(C.C),C.C=null)}function An(C,X){var de=null;if(C.g==X){rn(C),Fr(C),C.g=null;var $e=2}else if(Ir(C.h,X))de=X.D,is(C.h,X),$e=1;else return;if(C.G!=0){if(X.o)if($e==1){de=X.m?X.m.length:0,X=Date.now()-X.F;var _t=C.B;$e=Ke(),oe($e,new be($e,de)),Q(C)}else tr(C);else if(_t=X.s,_t==3||_t==0&&0<X.X||!($e==1&&we(C,X)||$e==2&&lr(C)))switch(de&&0<de.length&&(X=C.h,X.i=X.i.concat(de)),_t){case 1:na(C,5);break;case 4:na(C,10);break;case 3:na(C,6);break;default:na(C,2)}}}function On(C,X){let de=C.Ta+Math.floor(Math.random()*C.cb);return C.isActive()||(de*=2),de*X}function na(C,X){if(C.j.info("Error code "+X),X==2){var de=h(C.fb,C),$e=C.Xa;const _t=!$e;$e=new Bt($e||"//www.google.com/images/cleardot.gif"),l.location&&l.location.protocol=="http"||Lt($e,"https"),ys($e),_t?t1($e.toString(),de):r1($e.toString(),de)}else ee(2);C.G=0,C.l&&C.l.sa(X),bs(C),fm(C)}t.fb=function(C){C?(this.j.info("Successfully pinged google.com"),ee(2)):(this.j.info("Failed to ping google.com"),ee(1))};function bs(C){if(C.G=0,C.ka=[],C.l){const X=fn(C.h);(X.length!=0||C.i.length!=0)&&(g(C.ka,X),g(C.ka,C.i),C.h.i.length=0,p(C.i),C.i.length=0),C.l.ra()}}function fa(C,X,de){var $e=de instanceof Bt?Ht(de):new Bt(de);if($e.g!="")X&&($e.g=X+"."+$e.g),er($e,$e.s);else{var _t=l.location;$e=_t.protocol,X=X?X+"."+_t.hostname:_t.hostname,_t=+_t.port;var Mt=new Bt(null);$e&&Lt(Mt,$e),X&&(Mt.g=X),_t&&er(Mt,_t),de&&(Mt.l=de),$e=Mt}return de=C.D,X=C.ya,de&&X&&Cr($e,de,X),Cr($e,"VER",C.la),ft(C,$e),$e}function Rs(C,X,de){if(X&&!C.J)throw Error("Can't create secondary domain capable XhrIo object.");return X=C.Ca&&!C.pa?new Sa(new fh({eb:de})):new Sa(C.pa),X.Ha(C.J),X}t.isActive=function(){return!!this.l&&this.l.isActive(this)};function ws(){}t=ws.prototype,t.ua=function(){},t.ta=function(){},t.sa=function(){},t.ra=function(){},t.isActive=function(){return!0},t.Na=function(){};function Ms(){}Ms.prototype.g=function(C,X){return new Ns(C,X)};function Ns(C,X){ce.call(this),this.g=new lu(X),this.l=C,this.h=X&&X.messageUrlParams||null,C=X&&X.messageHeaders||null,X&&X.clientProtocolHeaderRequired&&(C?C["X-Client-Protocol"]="webchannel":C={"X-Client-Protocol":"webchannel"}),this.g.o=C,C=X&&X.initMessageHeaders||null,X&&X.messageContentType&&(C?C["X-WebChannel-Content-Type"]=X.messageContentType:C={"X-WebChannel-Content-Type":X.messageContentType}),X&&X.va&&(C?C["X-WebChannel-Client-Profile"]=X.va:C={"X-WebChannel-Client-Profile":X.va}),this.g.S=C,(C=X&&X.Sb)&&!y(C)&&(this.g.m=C),this.v=X&&X.supportsCrossDomainXhr||!1,this.u=X&&X.sendRawJson||!1,(X=X&&X.httpSessionIdParam)&&!y(X)&&(this.g.D=X,C=this.h,C!==null&&X in C&&(C=this.h,X in C&&delete C[X])),this.j=new du(this)}m(Ns,ce),Ns.prototype.m=function(){this.g.l=this.j,this.v&&(this.g.J=!0),this.g.connect(this.l,this.h||void 0)},Ns.prototype.close=function(){mh(this.g)},Ns.prototype.o=function(C){var X=this.g;if(typeof C=="string"){var de={};de.__data__=C,C=de}else this.u&&(de={},de.__data__=gt(C),C=de);X.i.push(new ar(X.Ya++,C)),X.G==3&&Q(X)},Ns.prototype.N=function(){this.g.l=null,delete this.j,mh(this.g),delete this.g,Ns.aa.N.call(this)};function Wl(C){nt.call(this),C.__headers__&&(this.headers=C.__headers__,this.statusCode=C.__status__,delete C.__headers__,delete C.__status__);var X=C.__sm__;if(X){e:{for(const de in X){C=de;break e}C=void 0}(this.i=C)&&(C=this.i,X=X!==null&&C in X?X[C]:void 0),this.data=X}else this.data=C}m(Wl,nt);function uu(){Xe.call(this),this.status=1}m(uu,Xe);function du(C){this.g=C}m(du,ws),du.prototype.ua=function(){oe(this.g,"a")},du.prototype.ta=function(C){oe(this.g,new Wl(C))},du.prototype.sa=function(C){oe(this.g,new uu)},du.prototype.ra=function(){oe(this.g,"b")},Ms.prototype.createWebChannel=Ms.prototype.g,Ns.prototype.send=Ns.prototype.o,Ns.prototype.open=Ns.prototype.m,Ns.prototype.close=Ns.prototype.close,cY=function(){return new Ms},lY=function(){return Ke()},oY=It,qP={mb:0,pb:1,qb:2,Jb:3,Ob:4,Lb:5,Mb:6,Kb:7,Ib:8,Nb:9,PROXY:10,NOPROXY:11,Gb:12,Cb:13,Db:14,Bb:15,Eb:16,Fb:17,ib:18,hb:19,jb:20},pe.NO_ERROR=0,pe.TIMEOUT=8,pe.HTTP_ERROR=6,__=pe,Ee.COMPLETE="complete",iY=Ee,Ce.EventType=lt,lt.OPEN="a",lt.CLOSE="b",lt.ERROR="c",lt.MESSAGE="d",ce.prototype.listen=ce.prototype.K,oy=Ce,Sa.prototype.listenOnce=Sa.prototype.L,Sa.prototype.getLastError=Sa.prototype.Ka,Sa.prototype.getLastErrorCode=Sa.prototype.Ba,Sa.prototype.getStatus=Sa.prototype.Z,Sa.prototype.getResponseJson=Sa.prototype.Oa,Sa.prototype.getResponseText=Sa.prototype.oa,Sa.prototype.send=Sa.prototype.ea,Sa.prototype.setWithCredentials=Sa.prototype.Ha,sY=Sa}).apply(typeof wN<"u"?wN:typeof self<"u"?self:typeof window<"u"?window:{});const lU="@firebase/firestore";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Do{constructor(e){this.uid=e}isAuthenticated(){return this.uid!=null}toKey(){return this.isAuthenticated()?"uid:"+this.uid:"anonymous-user"}isEqual(e){return e.uid===this.uid}}Do.UNAUTHENTICATED=new Do(null),Do.GOOGLE_CREDENTIALS=new Do("google-credentials-uid"),Do.FIRST_PARTY=new Do("first-party-uid"),Do.MOCK_USER=new Do("mock-user");/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let Bv="10.14.0";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const _p=new yO("@firebase/firestore");function Xg(){return _p.logLevel}function mr(t,...e){if(_p.logLevel<=Mn.DEBUG){const r=e.map(MO);_p.debug(`Firestore (${Bv}): ${t}`,...r)}}function Ml(t,...e){if(_p.logLevel<=Mn.ERROR){const r=e.map(MO);_p.error(`Firestore (${Bv}): ${t}`,...r)}}function R0(t,...e){if(_p.logLevel<=Mn.WARN){const r=e.map(MO);_p.warn(`Firestore (${Bv}): ${t}`,...r)}}function MO(t){if(typeof t=="string")return t;try{/**
* @license
* Copyright 2020 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/return function(r){return JSON.stringify(r)}(t)}catch{return t}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Ur(t="Unexpected state"){const e=`FIRESTORE (${Bv}) INTERNAL ASSERTION FAILED: `+t;throw Ml(e),new Error(e)}function Kr(t,e){t||Ur()}function dn(t,e){return t}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Zt={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"};class vr extends YA{constructor(e,r){super(e,r),this.code=e,this.message=r,this.toString=()=>`${this.name}: [code=${this.code}]: ${this.message}`}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Sd{constructor(){this.promise=new Promise((e,r)=>{this.resolve=e,this.reject=r})}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class uY{constructor(e,r){this.user=r,this.type="OAuth",this.headers=new Map,this.headers.set("Authorization",`Bearer ${e}`)}}class dY{getToken(){return Promise.resolve(null)}invalidateToken(){}start(e,r){e.enqueueRetryable(()=>r(Do.UNAUTHENTICATED))}shutdown(){}}class kpe{constructor(e){this.token=e,this.changeListener=null}getToken(){return Promise.resolve(this.token)}invalidateToken(){}start(e,r){this.changeListener=r,e.enqueueRetryable(()=>r(this.token.user))}shutdown(){this.changeListener=null}}class Fpe{constructor(e){this.t=e,this.currentUser=Do.UNAUTHENTICATED,this.i=0,this.forceRefresh=!1,this.auth=null}start(e,r){Kr(this.o===void 0);let n=this.i;const a=c=>this.i!==n?(n=this.i,r(c)):Promise.resolve();let s=new Sd;this.o=()=>{this.i++,this.currentUser=this.u(),s.resolve(),s=new Sd,e.enqueueRetryable(()=>a(this.currentUser))};const i=()=>{const c=s;e.enqueueRetryable(async()=>{await c.promise,await a(this.currentUser)})},l=c=>{mr("FirebaseAuthCredentialsProvider","Auth detected"),this.auth=c,this.o&&(this.auth.addAuthTokenListener(this.o),i())};this.t.onInit(c=>l(c)),setTimeout(()=>{if(!this.auth){const c=this.t.getImmediate({optional:!0});c?l(c):(mr("FirebaseAuthCredentialsProvider","Auth not yet detected"),s.resolve(),s=new Sd)}},0),i()}getToken(){const e=this.i,r=this.forceRefresh;return this.forceRefresh=!1,this.auth?this.auth.getToken(r).then(n=>this.i!==e?(mr("FirebaseAuthCredentialsProvider","getToken aborted due to token change."),this.getToken()):n?(Kr(typeof n.accessToken=="string"),new uY(n.accessToken,this.currentUser)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.auth&&this.o&&this.auth.removeAuthTokenListener(this.o),this.o=void 0}u(){const e=this.auth&&this.auth.getUid();return Kr(e===null||typeof e=="string"),new Do(e)}}class Ope{constructor(e,r,n){this.l=e,this.h=r,this.P=n,this.type="FirstParty",this.user=Do.FIRST_PARTY,this.I=new Map}T(){return this.P?this.P():null}get headers(){this.I.set("X-Goog-AuthUser",this.l);const e=this.T();return e&&this.I.set("Authorization",e),this.h&&this.I.set("X-Goog-Iam-Authorization-Token",this.h),this.I}}class Dpe{constructor(e,r,n){this.l=e,this.h=r,this.P=n}getToken(){return Promise.resolve(new Ope(this.l,this.h,this.P))}start(e,r){e.enqueueRetryable(()=>r(Do.FIRST_PARTY))}shutdown(){}invalidateToken(){}}class Rpe{constructor(e){this.value=e,this.type="AppCheck",this.headers=new Map,e&&e.length>0&&this.headers.set("x-firebase-appcheck",this.value)}}class Mpe{constructor(e){this.A=e,this.forceRefresh=!1,this.appCheck=null,this.R=null}start(e,r){Kr(this.o===void 0);const n=s=>{s.error!=null&&mr("FirebaseAppCheckTokenProvider",`Error getting App Check token; using placeholder token instead. Error: ${s.error.message}`);const i=s.token!==this.R;return this.R=s.token,mr("FirebaseAppCheckTokenProvider",`Received ${i?"new":"existing"} token.`),i?r(s.token):Promise.resolve()};this.o=s=>{e.enqueueRetryable(()=>n(s))};const a=s=>{mr("FirebaseAppCheckTokenProvider","AppCheck detected"),this.appCheck=s,this.o&&this.appCheck.addTokenListener(this.o)};this.A.onInit(s=>a(s)),setTimeout(()=>{if(!this.appCheck){const s=this.A.getImmediate({optional:!0});s?a(s):mr("FirebaseAppCheckTokenProvider","AppCheck not yet detected")}},0)}getToken(){const e=this.forceRefresh;return this.forceRefresh=!1,this.appCheck?this.appCheck.getToken(e).then(r=>r?(Kr(typeof r.token=="string"),this.R=r.token,new Rpe(r.token)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.appCheck&&this.o&&this.appCheck.removeTokenListener(this.o),this.o=void 0}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Lpe(t){const e=typeof self<"u"&&(self.crypto||self.msCrypto),r=new Uint8Array(t);if(e&&typeof e.getRandomValues=="function")e.getRandomValues(r);else for(let n=0;n<t;n++)r[n]=Math.floor(256*Math.random());return r}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class LO{static newId(){const e="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",r=Math.floor(256/e.length)*e.length;let n="";for(;n.length<20;){const a=Lpe(40);for(let s=0;s<a.length;++s)n.length<20&&a[s]<r&&(n+=e.charAt(a[s]%e.length))}return n}}function gn(t,e){return t<e?-1:t>e?1:0}function ev(t,e,r){return t.length===e.length&&t.every((n,a)=>r(n,e[a]))}function fY(t){return t+"\0"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class fr{constructor(e,r){if(this.seconds=e,this.nanoseconds=r,r<0)throw new vr(Zt.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+r);if(r>=1e9)throw new vr(Zt.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+r);if(e<-62135596800)throw new vr(Zt.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e);if(e>=253402300800)throw new vr(Zt.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e)}static now(){return fr.fromMillis(Date.now())}static fromDate(e){return fr.fromMillis(e.getTime())}static fromMillis(e){const r=Math.floor(e/1e3),n=Math.floor(1e6*(e-1e3*r));return new fr(r,n)}toDate(){return new Date(this.toMillis())}toMillis(){return 1e3*this.seconds+this.nanoseconds/1e6}_compareTo(e){return this.seconds===e.seconds?gn(this.nanoseconds,e.nanoseconds):gn(this.seconds,e.seconds)}isEqual(e){return e.seconds===this.seconds&&e.nanoseconds===this.nanoseconds}toString(){return"Timestamp(seconds="+this.seconds+", nanoseconds="+this.nanoseconds+")"}toJSON(){return{seconds:this.seconds,nanoseconds:this.nanoseconds}}valueOf(){const e=this.seconds- -62135596800;return String(e).padStart(12,"0")+"."+String(this.nanoseconds).padStart(9,"0")}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class zr{constructor(e){this.timestamp=e}static fromTimestamp(e){return new zr(e)}static min(){return new zr(new fr(0,0))}static max(){return new zr(new fr(253402300799,999999999))}compareTo(e){return this.timestamp._compareTo(e.timestamp)}isEqual(e){return this.timestamp.isEqual(e.timestamp)}toMicroseconds(){return 1e6*this.timestamp.seconds+this.timestamp.nanoseconds/1e3}toString(){return"SnapshotVersion("+this.timestamp.toString()+")"}toTimestamp(){return this.timestamp}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class kb{constructor(e,r,n){r===void 0?r=0:r>e.length&&Ur(),n===void 0?n=e.length-r:n>e.length-r&&Ur(),this.segments=e,this.offset=r,this.len=n}get length(){return this.len}isEqual(e){return kb.comparator(this,e)===0}child(e){const r=this.segments.slice(this.offset,this.limit());return e instanceof kb?e.forEach(n=>{r.push(n)}):r.push(e),this.construct(r)}limit(){return this.offset+this.length}popFirst(e){return e=e===void 0?1:e,this.construct(this.segments,this.offset+e,this.length-e)}popLast(){return this.construct(this.segments,this.offset,this.length-1)}firstSegment(){return this.segments[this.offset]}lastSegment(){return this.get(this.length-1)}get(e){return this.segments[this.offset+e]}isEmpty(){return this.length===0}isPrefixOf(e){if(e.length<this.length)return!1;for(let r=0;r<this.length;r++)if(this.get(r)!==e.get(r))return!1;return!0}isImmediateParentOf(e){if(this.length+1!==e.length)return!1;for(let r=0;r<this.length;r++)if(this.get(r)!==e.get(r))return!1;return!0}forEach(e){for(let r=this.offset,n=this.limit();r<n;r++)e(this.segments[r])}toArray(){return this.segments.slice(this.offset,this.limit())}static comparator(e,r){const n=Math.min(e.length,r.length);for(let a=0;a<n;a++){const s=e.get(a),i=r.get(a);if(s<i)return-1;if(s>i)return 1}return e.length<r.length?-1:e.length>r.length?1:0}}class ea extends kb{construct(e,r,n){return new ea(e,r,n)}canonicalString(){return this.toArray().join("/")}toString(){return this.canonicalString()}toUriEncodedString(){return this.toArray().map(encodeURIComponent).join("/")}static fromString(...e){const r=[];for(const n of e){if(n.indexOf("//")>=0)throw new vr(Zt.INVALID_ARGUMENT,`Invalid segment (${n}). Paths must not contain // in them.`);r.push(...n.split("/").filter(a=>a.length>0))}return new ea(r)}static emptyPath(){return new ea([])}}const Upe=/^[_a-zA-Z][_a-zA-Z0-9]*$/;class hs extends kb{construct(e,r,n){return new hs(e,r,n)}static isValidIdentifier(e){return Upe.test(e)}canonicalString(){return this.toArray().map(e=>(e=e.replace(/\\/g,"\\\\").replace(/`/g,"\\`"),hs.isValidIdentifier(e)||(e="`"+e+"`"),e)).join(".")}toString(){return this.canonicalString()}isKeyField(){return this.length===1&&this.get(0)==="__name__"}static keyField(){return new hs(["__name__"])}static fromServerFormat(e){const r=[];let n="",a=0;const s=()=>{if(n.length===0)throw new vr(Zt.INVALID_ARGUMENT,`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`);r.push(n),n=""};let i=!1;for(;a<e.length;){const l=e[a];if(l==="\\"){if(a+1===e.length)throw new vr(Zt.INVALID_ARGUMENT,"Path has trailing escape character: "+e);const c=e[a+1];if(c!=="\\"&&c!=="."&&c!=="`")throw new vr(Zt.INVALID_ARGUMENT,"Path has invalid escape sequence: "+e);n+=c,a+=2}else l==="`"?(i=!i,a++):l!=="."||i?(n+=l,a++):(s(),a++)}if(s(),i)throw new vr(Zt.INVALID_ARGUMENT,"Unterminated ` in path: "+e);return new hs(r)}static emptyPath(){return new hs([])}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class jr{constructor(e){this.path=e}static fromPath(e){return new jr(ea.fromString(e))}static fromName(e){return new jr(ea.fromString(e).popFirst(5))}static empty(){return new jr(ea.emptyPath())}get collectionGroup(){return this.path.popLast().lastSegment()}hasCollectionId(e){return this.path.length>=2&&this.path.get(this.path.length-2)===e}getCollectionGroup(){return this.path.get(this.path.length-2)}getCollectionPath(){return this.path.popLast()}isEqual(e){return e!==null&&ea.comparator(this.path,e.path)===0}toString(){return this.path.toString()}static comparator(e,r){return ea.comparator(e.path,r.path)}static isDocumentKey(e){return e.length%2==0}static fromSegments(e){return new jr(new ea(e.slice()))}}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class IE{constructor(e,r,n,a){this.indexId=e,this.collectionGroup=r,this.fields=n,this.indexState=a}}function zP(t){return t.fields.find(e=>e.kind===2)}function jm(t){return t.fields.filter(e=>e.kind!==2)}IE.UNKNOWN_ID=-1;class E_{constructor(e,r){this.fieldPath=e,this.kind=r}}class Fb{constructor(e,r){this.sequenceNumber=e,this.offset=r}static empty(){return new Fb(0,Yc.min())}}function Qpe(t,e){const r=t.toTimestamp().seconds,n=t.toTimestamp().nanoseconds+1,a=zr.fromTimestamp(n===1e9?new fr(r+1,0):new fr(r,n));return new Yc(a,jr.empty(),e)}function AY(t){return new Yc(t.readTime,t.key,-1)}class Yc{constructor(e,r,n){this.readTime=e,this.documentKey=r,this.largestBatchId=n}static min(){return new Yc(zr.min(),jr.empty(),-1)}static max(){return new Yc(zr.max(),jr.empty(),-1)}}function UO(t,e){let r=t.readTime.compareTo(e.readTime);return r!==0?r:(r=jr.comparator(t.documentKey,e.documentKey),r!==0?r:gn(t.largestBatchId,e.largestBatchId))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const hY="The current tab is not in the required state to perform this operation. It might be necessary to refresh the browser tab.";class mY{constructor(){this.onCommittedListeners=[]}addOnCommittedListener(e){this.onCommittedListeners.push(e)}raiseOnCommittedEvent(){this.onCommittedListeners.forEach(e=>e())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Xp(t){if(t.code!==Zt.FAILED_PRECONDITION||t.message!==hY)throw t;mr("LocalStore","Unexpectedly lost primary lease")}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ft{constructor(e){this.nextCallback=null,this.catchCallback=null,this.result=void 0,this.error=void 0,this.isDone=!1,this.callbackAttached=!1,e(r=>{this.isDone=!0,this.result=r,this.nextCallback&&this.nextCallback(r)},r=>{this.isDone=!0,this.error=r,this.catchCallback&&this.catchCallback(r)})}catch(e){return this.next(void 0,e)}next(e,r){return this.callbackAttached&&Ur(),this.callbackAttached=!0,this.isDone?this.error?this.wrapFailure(r,this.error):this.wrapSuccess(e,this.result):new Ft((n,a)=>{this.nextCallback=s=>{this.wrapSuccess(e,s).next(n,a)},this.catchCallback=s=>{this.wrapFailure(r,s).next(n,a)}})}toPromise(){return new Promise((e,r)=>{this.next(e,r)})}wrapUserFunction(e){try{const r=e();return r instanceof Ft?r:Ft.resolve(r)}catch(r){return Ft.reject(r)}}wrapSuccess(e,r){return e?this.wrapUserFunction(()=>e(r)):Ft.resolve(r)}wrapFailure(e,r){return e?this.wrapUserFunction(()=>e(r)):Ft.reject(r)}static resolve(e){return new Ft((r,n)=>{r(e)})}static reject(e){return new Ft((r,n)=>{n(e)})}static waitFor(e){return new Ft((r,n)=>{let a=0,s=0,i=!1;e.forEach(l=>{++a,l.next(()=>{++s,i&&s===a&&r()},c=>n(c))}),i=!0,s===a&&r()})}static or(e){let r=Ft.resolve(!1);for(const n of e)r=r.next(a=>a?Ft.resolve(a):n());return r}static forEach(e,r){const n=[];return e.forEach((a,s)=>{n.push(r.call(this,a,s))}),this.waitFor(n)}static mapArray(e,r){return new Ft((n,a)=>{const s=e.length,i=new Array(s);let l=0;for(let c=0;c<s;c++){const u=c;r(e[u]).next(d=>{i[u]=d,++l,l===s&&n(i)},d=>a(d))}})}static doWhile(e,r){return new Ft((n,a)=>{const s=()=>{e()===!0?r().next(()=>{s()},a):n()};s()})}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class RI{constructor(e,r){this.action=e,this.transaction=r,this.aborted=!1,this.V=new Sd,this.transaction.oncomplete=()=>{this.V.resolve()},this.transaction.onabort=()=>{r.error?this.V.reject(new Ry(e,r.error)):this.V.resolve()},this.transaction.onerror=n=>{const a=QO(n.target.error);this.V.reject(new Ry(e,a))}}static open(e,r,n,a){try{return new RI(r,e.transaction(a,n))}catch(s){throw new Ry(r,s)}}get m(){return this.V.promise}abort(e){e&&this.V.reject(e),this.aborted||(mr("SimpleDb","Aborting transaction:",e?e.message:"Client-initiated abort"),this.aborted=!0,this.transaction.abort())}g(){const e=this.transaction;this.aborted||typeof e.commit!="function"||e.commit()}store(e){const r=this.transaction.objectStore(e);return new Hpe(r)}}class I0{constructor(e,r,n){this.name=e,this.version=r,this.p=n,I0.S(Ki())===12.2&&Ml("Firestore persistence suffers from a bug in iOS 12.2 Safari that may cause your app to stop working. See https://stackoverflow.com/q/56496296/110915 for details and a potential workaround.")}static delete(e){return mr("SimpleDb","Removing database:",e),Dm(window.indexedDB.deleteDatabase(e)).toPromise()}static D(){if(!vX())return!1;if(I0.v())return!0;const e=Ki(),r=I0.S(e),n=0<r&&r<10,a=pY(e),s=0<a&&a<4.5;return!(e.indexOf("MSIE ")>0||e.indexOf("Trident/")>0||e.indexOf("Edge/")>0||n||s)}static v(){var e;return typeof process<"u"&&((e=process.__PRIVATE_env)===null||e===void 0?void 0:e.C)==="YES"}static F(e,r){return e.store(r)}static S(e){const r=e.match(/i(?:phone|pad|pod) os ([\d_]+)/i),n=r?r[1].split("_").slice(0,2).join("."):"-1";return Number(n)}async M(e){return this.db||(mr("SimpleDb","Opening database:",this.name),this.db=await new Promise((r,n)=>{const a=indexedDB.open(this.name,this.version);a.onsuccess=s=>{const i=s.target.result;r(i)},a.onblocked=()=>{n(new Ry(e,"Cannot upgrade IndexedDB schema while another tab is open. Close all tabs that access Firestore and reload this page to proceed."))},a.onerror=s=>{const i=s.target.error;i.name==="VersionError"?n(new vr(Zt.FAILED_PRECONDITION,"A newer version of the Firestore SDK was previously used and so the persisted data is not compatible with the version of the SDK you are now using. The SDK will operate with persistence disabled. If you need persistence, please re-upgrade to a newer version of the SDK or else clear the persisted IndexedDB data for your app to start fresh.")):i.name==="InvalidStateError"?n(new vr(Zt.FAILED_PRECONDITION,"Unable to open an IndexedDB connection. This could be due to running in a private browsing session on a browser whose private browsing sessions do not support IndexedDB: "+i)):n(new Ry(e,i))},a.onupgradeneeded=s=>{mr("SimpleDb",'Database "'+this.name+'" requires upgrade from version:',s.oldVersion);const i=s.target.result;this.p.O(i,a.transaction,s.oldVersion,this.version).next(()=>{mr("SimpleDb","Database upgrade to version "+this.version+" complete")})}})),this.N&&(this.db.onversionchange=r=>this.N(r)),this.db}L(e){this.N=e,this.db&&(this.db.onversionchange=r=>e(r))}async runTransaction(e,r,n,a){const s=r==="readonly";let i=0;for(;;){++i;try{this.db=await this.M(e);const l=RI.open(this.db,e,s?"readonly":"readwrite",n),c=a(l).next(u=>(l.g(),u)).catch(u=>(l.abort(u),Ft.reject(u))).toPromise();return c.catch(()=>{}),await l.m,c}catch(l){const c=l,u=c.name!=="FirebaseError"&&i<3;if(mr("SimpleDb","Transaction failed with error:",c.message,"Retrying:",u),this.close(),!u)return Promise.reject(c)}}}close(){this.db&&this.db.close(),this.db=void 0}}function pY(t){const e=t.match(/Android ([\d.]+)/i),r=e?e[1].split(".").slice(0,2).join("."):"-1";return Number(r)}class Vpe{constructor(e){this.B=e,this.k=!1,this.q=null}get isDone(){return this.k}get K(){return this.q}set cursor(e){this.B=e}done(){this.k=!0}$(e){this.q=e}delete(){return Dm(this.B.delete())}}class Ry extends vr{constructor(e,r){super(Zt.UNAVAILABLE,`IndexedDB transaction '${e}' failed: ${r}`),this.name="IndexedDbTransactionError"}}function rm(t){return t.name==="IndexedDbTransactionError"}class Hpe{constructor(e){this.store=e}put(e,r){let n;return r!==void 0?(mr("SimpleDb","PUT",this.store.name,e,r),n=this.store.put(r,e)):(mr("SimpleDb","PUT",this.store.name,"<auto-key>",e),n=this.store.put(e)),Dm(n)}add(e){return mr("SimpleDb","ADD",this.store.name,e,e),Dm(this.store.add(e))}get(e){return Dm(this.store.get(e)).next(r=>(r===void 0&&(r=null),mr("SimpleDb","GET",this.store.name,e,r),r))}delete(e){return mr("SimpleDb","DELETE",this.store.name,e),Dm(this.store.delete(e))}count(){return mr("SimpleDb","COUNT",this.store.name),Dm(this.store.count())}U(e,r){const n=this.options(e,r),a=n.index?this.store.index(n.index):this.store;if(typeof a.getAll=="function"){const s=a.getAll(n.range);return new Ft((i,l)=>{s.onerror=c=>{l(c.target.error)},s.onsuccess=c=>{i(c.target.result)}})}{const s=this.cursor(n),i=[];return this.W(s,(l,c)=>{i.push(c)}).next(()=>i)}}G(e,r){const n=this.store.getAll(e,r===null?void 0:r);return new Ft((a,s)=>{n.onerror=i=>{s(i.target.error)},n.onsuccess=i=>{a(i.target.result)}})}j(e,r){mr("SimpleDb","DELETE ALL",this.store.name);const n=this.options(e,r);n.H=!1;const a=this.cursor(n);return this.W(a,(s,i,l)=>l.delete())}J(e,r){let n;r?n=e:(n={},r=e);const a=this.cursor(n);return this.W(a,r)}Y(e){const r=this.cursor({});return new Ft((n,a)=>{r.onerror=s=>{const i=QO(s.target.error);a(i)},r.onsuccess=s=>{const i=s.target.result;i?e(i.primaryKey,i.value).next(l=>{l?i.continue():n()}):n()}})}W(e,r){const n=[];return new Ft((a,s)=>{e.onerror=i=>{s(i.target.error)},e.onsuccess=i=>{const l=i.target.result;if(!l)return void a();const c=new Vpe(l),u=r(l.primaryKey,l.value,c);if(u instanceof Ft){const d=u.catch(f=>(c.done(),Ft.reject(f)));n.push(d)}c.isDone?a():c.K===null?l.continue():l.continue(c.K)}}).next(()=>Ft.waitFor(n))}options(e,r){let n;return e!==void 0&&(typeof e=="string"?n=e:r=e),{index:n,range:r}}cursor(e){let r="next";if(e.reverse&&(r="prev"),e.index){const n=this.store.index(e.index);return e.H?n.openKeyCursor(e.range,r):n.openCursor(e.range,r)}return this.store.openCursor(e.range,r)}}function Dm(t){return new Ft((e,r)=>{t.onsuccess=n=>{const a=n.target.result;e(a)},t.onerror=n=>{const a=QO(n.target.error);r(a)}})}let cU=!1;function QO(t){const e=I0.S(Ki());if(e>=12.2&&e<13){const r="An internal error was encountered in the Indexed Database server";if(t.message.indexOf(r)>=0){const n=new vr("internal",`IOS_INDEXEDDB_BUG1: IndexedDb has thrown '${r}'. This is likely due to an unavoidable bug in iOS. See https://stackoverflow.com/q/56496296/110915 for details and a potential workaround.`);return cU||(cU=!0,setTimeout(()=>{throw n},0)),n}}return t}class $pe{constructor(e,r){this.asyncQueue=e,this.Z=r,this.task=null}start(){this.X(15e3)}stop(){this.task&&(this.task.cancel(),this.task=null)}get started(){return this.task!==null}X(e){mr("IndexBackfiller",`Scheduled in ${e}ms`),this.task=this.asyncQueue.enqueueAfterDelay("index_backfill",e,async()=>{this.task=null;try{mr("IndexBackfiller",`Documents written: ${await this.Z.ee()}`)}catch(r){rm(r)?mr("IndexBackfiller","Ignoring IndexedDB error during index backfill: ",r):await Xp(r)}await this.X(6e4)})}}class Kpe{constructor(e,r){this.localStore=e,this.persistence=r}async ee(e=50){return this.persistence.runTransaction("Backfill Indexes","readwrite-primary",r=>this.te(r,e))}te(e,r){const n=new Set;let a=r,s=!0;return Ft.doWhile(()=>s===!0&&a>0,()=>this.localStore.indexManager.getNextCollectionGroupToUpdate(e).next(i=>{if(i!==null&&!n.has(i))return mr("IndexBackfiller",`Processing collection: ${i}`),this.ne(e,i,a).next(l=>{a-=l,n.add(i)});s=!1})).next(()=>r-a)}ne(e,r,n){return this.localStore.indexManager.getMinOffsetFromCollectionGroup(e,r).next(a=>this.localStore.localDocuments.getNextDocuments(e,r,a,n).next(s=>{const i=s.changes;return this.localStore.indexManager.updateIndexEntries(e,i).next(()=>this.re(a,s)).next(l=>(mr("IndexBackfiller",`Updating offset: ${l}`),this.localStore.indexManager.updateCollectionGroup(e,r,l))).next(()=>i.size)}))}re(e,r){let n=e;return r.changes.forEach((a,s)=>{const i=AY(s);UO(i,n)>0&&(n=i)}),new Yc(n.readTime,n.documentKey,Math.max(r.batchId,e.largestBatchId))}}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ou{constructor(e,r){this.previousValue=e,r&&(r.sequenceNumberHandler=n=>this.ie(n),this.se=n=>r.writeSequenceNumber(n))}ie(e){return this.previousValue=Math.max(e,this.previousValue),this.previousValue}next(){const e=++this.previousValue;return this.se&&this.se(e),e}}Ou.oe=-1;function G2(t){return t==null}function Ob(t){return t===0&&1/t==-1/0}function Gpe(t){return typeof t=="number"&&Number.isInteger(t)&&!Ob(t)&&t<=Number.MAX_SAFE_INTEGER&&t>=Number.MIN_SAFE_INTEGER}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Ql(t){let e="";for(let r=0;r<t.length;r++)e.length>0&&(e=uU(e)),e=qpe(t.get(r),e);return uU(e)}function qpe(t,e){let r=e;const n=t.length;for(let a=0;a<n;a++){const s=t.charAt(a);switch(s){case"\0":r+="";break;case"":r+="";break;default:r+=s}}return r}function uU(t){return t+""}function hf(t){const e=t.length;if(Kr(e>=2),e===2)return Kr(t.charAt(0)===""&&t.charAt(1)===""),ea.emptyPath();const r=e-2,n=[];let a="";for(let s=0;s<e;){const i=t.indexOf("",s);switch((i<0||i>r)&&Ur(),t.charAt(i+1)){case"":const l=t.substring(s,i);let c;a.length===0?c=l:(a+=l,c=a,a=""),n.push(c);break;case"":a+=t.substring(s,i),a+="\0";break;case"":a+=t.substring(s,i+1);break;default:Ur()}s=i+2}return new ea(n)}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const dU=["userId","batchId"];/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function S_(t,e){return[t,Ql(e)]}function gY(t,e,r){return[t,Ql(e),r]}const zpe={},Wpe=["prefixPath","collectionGroup","readTime","documentId"],Xpe=["prefixPath","collectionGroup","documentId"],Ype=["collectionGroup","readTime","prefixPath","documentId"],Jpe=["canonicalId","targetId"],Zpe=["targetId","path"],ege=["path","targetId"],tge=["collectionId","parent"],rge=["indexId","uid"],nge=["uid","sequenceNumber"],age=["indexId","uid","arrayValue","directionalValue","orderedDocumentKey","documentKey"],sge=["indexId","uid","orderedDocumentKey"],ige=["userId","collectionPath","documentId"],oge=["userId","collectionPath","largestBatchId"],lge=["userId","collectionGroup","largestBatchId"],xY=["mutationQueues","mutations","documentMutations","remoteDocuments","targets","owner","targetGlobal","targetDocuments","clientMetadata","remoteDocumentGlobal","collectionParents","bundles","namedQueries"],cge=[...xY,"documentOverlays"],vY=["mutationQueues","mutations","documentMutations","remoteDocumentsV14","targets","owner","targetGlobal","targetDocuments","clientMetadata","remoteDocumentGlobal","collectionParents","bundles","namedQueries","documentOverlays"],yY=vY,VO=[...yY,"indexConfiguration","indexState","indexEntries"],uge=VO,dge=[...VO,"globals"];/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class WP extends mY{constructor(e,r){super(),this._e=e,this.currentSequenceNumber=r}}function qi(t,e){const r=dn(t);return I0.F(r._e,e)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function fU(t){let e=0;for(const r in t)Object.prototype.hasOwnProperty.call(t,r)&&e++;return e}function Yp(t,e){for(const r in t)Object.prototype.hasOwnProperty.call(t,r)&&e(r,t[r])}function bY(t){for(const e in t)if(Object.prototype.hasOwnProperty.call(t,e))return!1;return!0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class xs{constructor(e,r){this.comparator=e,this.root=r||Ro.EMPTY}insert(e,r){return new xs(this.comparator,this.root.insert(e,r,this.comparator).copy(null,null,Ro.BLACK,null,null))}remove(e){return new xs(this.comparator,this.root.remove(e,this.comparator).copy(null,null,Ro.BLACK,null,null))}get(e){let r=this.root;for(;!r.isEmpty();){const n=this.comparator(e,r.key);if(n===0)return r.value;n<0?r=r.left:n>0&&(r=r.right)}return null}indexOf(e){let r=0,n=this.root;for(;!n.isEmpty();){const a=this.comparator(e,n.key);if(a===0)return r+n.left.size;a<0?n=n.left:(r+=n.left.size+1,n=n.right)}return-1}isEmpty(){return this.root.isEmpty()}get size(){return this.root.size}minKey(){return this.root.minKey()}maxKey(){return this.root.maxKey()}inorderTraversal(e){return this.root.inorderTraversal(e)}forEach(e){this.inorderTraversal((r,n)=>(e(r,n),!1))}toString(){const e=[];return this.inorderTraversal((r,n)=>(e.push(`${r}:${n}`),!1)),`{${e.join(", ")}}`}reverseTraversal(e){return this.root.reverseTraversal(e)}getIterator(){return new NN(this.root,null,this.comparator,!1)}getIteratorFrom(e){return new NN(this.root,e,this.comparator,!1)}getReverseIterator(){return new NN(this.root,null,this.comparator,!0)}getReverseIteratorFrom(e){return new NN(this.root,e,this.comparator,!0)}}class NN{constructor(e,r,n,a){this.isReverse=a,this.nodeStack=[];let s=1;for(;!e.isEmpty();)if(s=r?n(e.key,r):1,r&&a&&(s*=-1),s<0)e=this.isReverse?e.left:e.right;else{if(s===0){this.nodeStack.push(e);break}this.nodeStack.push(e),e=this.isReverse?e.right:e.left}}getNext(){let e=this.nodeStack.pop();const r={key:e.key,value:e.value};if(this.isReverse)for(e=e.left;!e.isEmpty();)this.nodeStack.push(e),e=e.right;else for(e=e.right;!e.isEmpty();)this.nodeStack.push(e),e=e.left;return r}hasNext(){return this.nodeStack.length>0}peek(){if(this.nodeStack.length===0)return null;const e=this.nodeStack[this.nodeStack.length-1];return{key:e.key,value:e.value}}}class Ro{constructor(e,r,n,a,s){this.key=e,this.value=r,this.color=n??Ro.RED,this.left=a??Ro.EMPTY,this.right=s??Ro.EMPTY,this.size=this.left.size+1+this.right.size}copy(e,r,n,a,s){return new Ro(e??this.key,r??this.value,n??this.color,a??this.left,s??this.right)}isEmpty(){return!1}inorderTraversal(e){return this.left.inorderTraversal(e)||e(this.key,this.value)||this.right.inorderTraversal(e)}reverseTraversal(e){return this.right.reverseTraversal(e)||e(this.key,this.value)||this.left.reverseTraversal(e)}min(){return this.left.isEmpty()?this:this.left.min()}minKey(){return this.min().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(e,r,n){let a=this;const s=n(e,a.key);return a=s<0?a.copy(null,null,null,a.left.insert(e,r,n),null):s===0?a.copy(null,r,null,null,null):a.copy(null,null,null,null,a.right.insert(e,r,n)),a.fixUp()}removeMin(){if(this.left.isEmpty())return Ro.EMPTY;let e=this;return e.left.isRed()||e.left.left.isRed()||(e=e.moveRedLeft()),e=e.copy(null,null,null,e.left.removeMin(),null),e.fixUp()}remove(e,r){let n,a=this;if(r(e,a.key)<0)a.left.isEmpty()||a.left.isRed()||a.left.left.isRed()||(a=a.moveRedLeft()),a=a.copy(null,null,null,a.left.remove(e,r),null);else{if(a.left.isRed()&&(a=a.rotateRight()),a.right.isEmpty()||a.right.isRed()||a.right.left.isRed()||(a=a.moveRedRight()),r(e,a.key)===0){if(a.right.isEmpty())return Ro.EMPTY;n=a.right.min(),a=a.copy(n.key,n.value,null,null,a.right.removeMin())}a=a.copy(null,null,null,null,a.right.remove(e,r))}return a.fixUp()}isRed(){return this.color}fixUp(){let e=this;return e.right.isRed()&&!e.left.isRed()&&(e=e.rotateLeft()),e.left.isRed()&&e.left.left.isRed()&&(e=e.rotateRight()),e.left.isRed()&&e.right.isRed()&&(e=e.colorFlip()),e}moveRedLeft(){let e=this.colorFlip();return e.right.left.isRed()&&(e=e.copy(null,null,null,null,e.right.rotateRight()),e=e.rotateLeft(),e=e.colorFlip()),e}moveRedRight(){let e=this.colorFlip();return e.left.left.isRed()&&(e=e.rotateRight(),e=e.colorFlip()),e}rotateLeft(){const e=this.copy(null,null,Ro.RED,null,this.right.left);return this.right.copy(null,null,this.color,e,null)}rotateRight(){const e=this.copy(null,null,Ro.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,e)}colorFlip(){const e=this.left.copy(null,null,!this.left.color,null,null),r=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,e,r)}checkMaxDepth(){const e=this.check();return Math.pow(2,e)<=this.size+1}check(){if(this.isRed()&&this.left.isRed()||this.right.isRed())throw Ur();const e=this.left.check();if(e!==this.right.check())throw Ur();return e+(this.isRed()?0:1)}}Ro.EMPTY=null,Ro.RED=!0,Ro.BLACK=!1;Ro.EMPTY=new class{constructor(){this.size=0}get key(){throw Ur()}get value(){throw Ur()}get color(){throw Ur()}get left(){throw Ur()}get right(){throw Ur()}copy(e,r,n,a,s){return this}insert(e,r,n){return new Ro(e,r)}remove(e,r){return this}isEmpty(){return!0}inorderTraversal(e){return!1}reverseTraversal(e){return!1}minKey(){return null}maxKey(){return null}isRed(){return!1}checkMaxDepth(){return!0}check(){return 0}};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Pa{constructor(e){this.comparator=e,this.data=new xs(this.comparator)}has(e){return this.data.get(e)!==null}first(){return this.data.minKey()}last(){return this.data.maxKey()}get size(){return this.data.size}indexOf(e){return this.data.indexOf(e)}forEach(e){this.data.inorderTraversal((r,n)=>(e(r),!1))}forEachInRange(e,r){const n=this.data.getIteratorFrom(e[0]);for(;n.hasNext();){const a=n.getNext();if(this.comparator(a.key,e[1])>=0)return;r(a.key)}}forEachWhile(e,r){let n;for(n=r!==void 0?this.data.getIteratorFrom(r):this.data.getIterator();n.hasNext();)if(!e(n.getNext().key))return}firstAfterOrEqual(e){const r=this.data.getIteratorFrom(e);return r.hasNext()?r.getNext().key:null}getIterator(){return new AU(this.data.getIterator())}getIteratorFrom(e){return new AU(this.data.getIteratorFrom(e))}add(e){return this.copy(this.data.remove(e).insert(e,!0))}delete(e){return this.has(e)?this.copy(this.data.remove(e)):this}isEmpty(){return this.data.isEmpty()}unionWith(e){let r=this;return r.size<e.size&&(r=e,e=this),e.forEach(n=>{r=r.add(n)}),r}isEqual(e){if(!(e instanceof Pa)||this.size!==e.size)return!1;const r=this.data.getIterator(),n=e.data.getIterator();for(;r.hasNext();){const a=r.getNext().key,s=n.getNext().key;if(this.comparator(a,s)!==0)return!1}return!0}toArray(){const e=[];return this.forEach(r=>{e.push(r)}),e}toString(){const e=[];return this.forEach(r=>e.push(r)),"SortedSet("+e.toString()+")"}copy(e){const r=new Pa(this.comparator);return r.data=e,r}}class AU{constructor(e){this.iter=e}getNext(){return this.iter.getNext().key}hasNext(){return this.iter.hasNext()}}function Ng(t){return t.hasNext()?t.getNext():void 0}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class cc{constructor(e){this.fields=e,e.sort(hs.comparator)}static empty(){return new cc([])}unionWith(e){let r=new Pa(hs.comparator);for(const n of this.fields)r=r.add(n);for(const n of e)r=r.add(n);return new cc(r.toArray())}covers(e){for(const r of this.fields)if(r.isPrefixOf(e))return!0;return!1}isEqual(e){return ev(this.fields,e.fields,(r,n)=>r.isEqual(n))}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class wY extends Error{constructor(){super(...arguments),this.name="Base64DecodeError"}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class fi{constructor(e){this.binaryString=e}static fromBase64String(e){const r=function(a){try{return atob(a)}catch(s){throw typeof DOMException<"u"&&s instanceof DOMException?new wY("Invalid base64 string: "+s):s}}(e);return new fi(r)}static fromUint8Array(e){const r=function(a){let s="";for(let i=0;i<a.length;++i)s+=String.fromCharCode(a[i]);return s}(e);return new fi(r)}[Symbol.iterator](){let e=0;return{next:()=>e<this.binaryString.length?{value:this.binaryString.charCodeAt(e++),done:!1}:{value:void 0,done:!0}}}toBase64(){return function(r){return btoa(r)}(this.binaryString)}toUint8Array(){return function(r){const n=new Uint8Array(r.length);for(let a=0;a<r.length;a++)n[a]=r.charCodeAt(a);return n}(this.binaryString)}approximateByteSize(){return 2*this.binaryString.length}compareTo(e){return gn(this.binaryString,e.binaryString)}isEqual(e){return this.binaryString===e.binaryString}}fi.EMPTY_BYTE_STRING=new fi("");const fge=new RegExp(/^\d{4}-\d\d-\d\dT\d\d:\d\d:\d\d(?:\.(\d+))?Z$/);function MA(t){if(Kr(!!t),typeof t=="string"){let e=0;const r=fge.exec(t);if(Kr(!!r),r[1]){let a=r[1];a=(a+"000000000").substr(0,9),e=Number(a)}const n=new Date(t);return{seconds:Math.floor(n.getTime()/1e3),nanos:e}}return{seconds:ds(t.seconds),nanos:ds(t.nanos)}}function ds(t){return typeof t=="number"?t:typeof t=="string"?Number(t):0}function M0(t){return typeof t=="string"?fi.fromBase64String(t):fi.fromUint8Array(t)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function HO(t){var e,r;return((r=(((e=t==null?void 0:t.mapValue)===null||e===void 0?void 0:e.fields)||{}).__type__)===null||r===void 0?void 0:r.stringValue)==="server_timestamp"}function $O(t){const e=t.mapValue.fields.__previous_value__;return HO(e)?$O(e):e}function Db(t){const e=MA(t.mapValue.fields.__local_write_time__.timestampValue);return new fr(e.seconds,e.nanos)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Age{constructor(e,r,n,a,s,i,l,c,u){this.databaseId=e,this.appId=r,this.persistenceKey=n,this.host=a,this.ssl=s,this.forceLongPolling=i,this.autoDetectLongPolling=l,this.longPollingOptions=c,this.useFetchStreams=u}}class L0{constructor(e,r){this.projectId=e,this.database=r||"(default)"}static empty(){return new L0("","")}get isDefaultDatabase(){return this.database==="(default)"}isEqual(e){return e instanceof L0&&e.projectId===this.projectId&&e.database===this.database}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const c0={mapValue:{fields:{__type__:{stringValue:"__max__"}}}},I_={nullValue:"NULL_VALUE"};function Ep(t){return"nullValue"in t?0:"booleanValue"in t?1:"integerValue"in t||"doubleValue"in t?2:"timestampValue"in t?3:"stringValue"in t?5:"bytesValue"in t?6:"referenceValue"in t?7:"geoPointValue"in t?8:"arrayValue"in t?9:"mapValue"in t?HO(t)?4:NY(t)?9007199254740991:MI(t)?10:11:Ur()}function Ef(t,e){if(t===e)return!0;const r=Ep(t);if(r!==Ep(e))return!1;switch(r){case 0:case 9007199254740991:return!0;case 1:return t.booleanValue===e.booleanValue;case 4:return Db(t).isEqual(Db(e));case 3:return function(a,s){if(typeof a.timestampValue=="string"&&typeof s.timestampValue=="string"&&a.timestampValue.length===s.timestampValue.length)return a.timestampValue===s.timestampValue;const i=MA(a.timestampValue),l=MA(s.timestampValue);return i.seconds===l.seconds&&i.nanos===l.nanos}(t,e);case 5:return t.stringValue===e.stringValue;case 6:return function(a,s){return M0(a.bytesValue).isEqual(M0(s.bytesValue))}(t,e);case 7:return t.referenceValue===e.referenceValue;case 8:return function(a,s){return ds(a.geoPointValue.latitude)===ds(s.geoPointValue.latitude)&&ds(a.geoPointValue.longitude)===ds(s.geoPointValue.longitude)}(t,e);case 2:return function(a,s){if("integerValue"in a&&"integerValue"in s)return ds(a.integerValue)===ds(s.integerValue);if("doubleValue"in a&&"doubleValue"in s){const i=ds(a.doubleValue),l=ds(s.doubleValue);return i===l?Ob(i)===Ob(l):isNaN(i)&&isNaN(l)}return!1}(t,e);case 9:return ev(t.arrayValue.values||[],e.arrayValue.values||[],Ef);case 10:case 11:return function(a,s){const i=a.mapValue.fields||{},l=s.mapValue.fields||{};if(fU(i)!==fU(l))return!1;for(const c in i)if(i.hasOwnProperty(c)&&(l[c]===void 0||!Ef(i[c],l[c])))return!1;return!0}(t,e);default:return Ur()}}function Rb(t,e){return(t.values||[]).find(r=>Ef(r,e))!==void 0}function U0(t,e){if(t===e)return 0;const r=Ep(t),n=Ep(e);if(r!==n)return gn(r,n);switch(r){case 0:case 9007199254740991:return 0;case 1:return gn(t.booleanValue,e.booleanValue);case 2:return function(s,i){const l=ds(s.integerValue||s.doubleValue),c=ds(i.integerValue||i.doubleValue);return l<c?-1:l>c?1:l===c?0:isNaN(l)?isNaN(c)?0:-1:1}(t,e);case 3:return hU(t.timestampValue,e.timestampValue);case 4:return hU(Db(t),Db(e));case 5:return gn(t.stringValue,e.stringValue);case 6:return function(s,i){const l=M0(s),c=M0(i);return l.compareTo(c)}(t.bytesValue,e.bytesValue);case 7:return function(s,i){const l=s.split("/"),c=i.split("/");for(let u=0;u<l.length&&u<c.length;u++){const d=gn(l[u],c[u]);if(d!==0)return d}return gn(l.length,c.length)}(t.referenceValue,e.referenceValue);case 8:return function(s,i){const l=gn(ds(s.latitude),ds(i.latitude));return l!==0?l:gn(ds(s.longitude),ds(i.longitude))}(t.geoPointValue,e.geoPointValue);case 9:return mU(t.arrayValue,e.arrayValue);case 10:return function(s,i){var l,c,u,d;const f=s.fields||{},h=i.fields||{},A=(l=f.value)===null||l===void 0?void 0:l.arrayValue,m=(c=h.value)===null||c===void 0?void 0:c.arrayValue,p=gn(((u=A==null?void 0:A.values)===null||u===void 0?void 0:u.length)||0,((d=m==null?void 0:m.values)===null||d===void 0?void 0:d.length)||0);return p!==0?p:mU(A,m)}(t.mapValue,e.mapValue);case 11:return function(s,i){if(s===c0.mapValue&&i===c0.mapValue)return 0;if(s===c0.mapValue)return 1;if(i===c0.mapValue)return-1;const l=s.fields||{},c=Object.keys(l),u=i.fields||{},d=Object.keys(u);c.sort(),d.sort();for(let f=0;f<c.length&&f<d.length;++f){const h=gn(c[f],d[f]);if(h!==0)return h;const A=U0(l[c[f]],u[d[f]]);if(A!==0)return A}return gn(c.length,d.length)}(t.mapValue,e.mapValue);default:throw Ur()}}function hU(t,e){if(typeof t=="string"&&typeof e=="string"&&t.length===e.length)return gn(t,e);const r=MA(t),n=MA(e),a=gn(r.seconds,n.seconds);return a!==0?a:gn(r.nanos,n.nanos)}function mU(t,e){const r=t.values||[],n=e.values||[];for(let a=0;a<r.length&&a<n.length;++a){const s=U0(r[a],n[a]);if(s)return s}return gn(r.length,n.length)}function tv(t){return XP(t)}function XP(t){return"nullValue"in t?"null":"booleanValue"in t?""+t.booleanValue:"integerValue"in t?""+t.integerValue:"doubleValue"in t?""+t.doubleValue:"timestampValue"in t?function(r){const n=MA(r);return`time(${n.seconds},${n.nanos})`}(t.timestampValue):"stringValue"in t?t.stringValue:"bytesValue"in t?function(r){return M0(r).toBase64()}(t.bytesValue):"referenceValue"in t?function(r){return jr.fromName(r).toString()}(t.referenceValue):"geoPointValue"in t?function(r){return`geo(${r.latitude},${r.longitude})`}(t.geoPointValue):"arrayValue"in t?function(r){let n="[",a=!0;for(const s of r.values||[])a?a=!1:n+=",",n+=XP(s);return n+"]"}(t.arrayValue):"mapValue"in t?function(r){const n=Object.keys(r.fields||{}).sort();let a="{",s=!0;for(const i of n)s?s=!1:a+=",",a+=`${i}:${XP(r.fields[i])}`;return a+"}"}(t.mapValue):Ur()}function Mb(t,e){return{referenceValue:`projects/${t.projectId}/databases/${t.database}/documents/${e.path.canonicalString()}`}}function YP(t){return!!t&&"integerValue"in t}function Lb(t){return!!t&&"arrayValue"in t}function pU(t){return!!t&&"nullValue"in t}function gU(t){return!!t&&"doubleValue"in t&&isNaN(Number(t.doubleValue))}function j_(t){return!!t&&"mapValue"in t}function MI(t){var e,r;return((r=(((e=t==null?void 0:t.mapValue)===null||e===void 0?void 0:e.fields)||{}).__type__)===null||r===void 0?void 0:r.stringValue)==="__vector__"}function My(t){if(t.geoPointValue)return{geoPointValue:Object.assign({},t.geoPointValue)};if(t.timestampValue&&typeof t.timestampValue=="object")return{timestampValue:Object.assign({},t.timestampValue)};if(t.mapValue){const e={mapValue:{fields:{}}};return Yp(t.mapValue.fields,(r,n)=>e.mapValue.fields[r]=My(n)),e}if(t.arrayValue){const e={arrayValue:{values:[]}};for(let r=0;r<(t.arrayValue.values||[]).length;++r)e.arrayValue.values[r]=My(t.arrayValue.values[r]);return e}return Object.assign({},t)}function NY(t){return(((t.mapValue||{}).fields||{}).__type__||{}).stringValue==="__max__"}const CY={mapValue:{fields:{__type__:{stringValue:"__vector__"},value:{arrayValue:{}}}}};function hge(t){return"nullValue"in t?I_:"booleanValue"in t?{booleanValue:!1}:"integerValue"in t||"doubleValue"in t?{doubleValue:NaN}:"timestampValue"in t?{timestampValue:{seconds:Number.MIN_SAFE_INTEGER}}:"stringValue"in t?{stringValue:""}:"bytesValue"in t?{bytesValue:""}:"referenceValue"in t?Mb(L0.empty(),jr.empty()):"geoPointValue"in t?{geoPointValue:{latitude:-90,longitude:-180}}:"arrayValue"in t?{arrayValue:{}}:"mapValue"in t?MI(t)?CY:{mapValue:{}}:Ur()}function mge(t){return"nullValue"in t?{booleanValue:!1}:"booleanValue"in t?{doubleValue:NaN}:"integerValue"in t||"doubleValue"in t?{timestampValue:{seconds:Number.MIN_SAFE_INTEGER}}:"timestampValue"in t?{stringValue:""}:"stringValue"in t?{bytesValue:""}:"bytesValue"in t?Mb(L0.empty(),jr.empty()):"referenceValue"in t?{geoPointValue:{latitude:-90,longitude:-180}}:"geoPointValue"in t?{arrayValue:{}}:"arrayValue"in t?CY:"mapValue"in t?MI(t)?{mapValue:{}}:c0:Ur()}function xU(t,e){const r=U0(t.value,e.value);return r!==0?r:t.inclusive&&!e.inclusive?-1:!t.inclusive&&e.inclusive?1:0}function vU(t,e){const r=U0(t.value,e.value);return r!==0?r:t.inclusive&&!e.inclusive?1:!t.inclusive&&e.inclusive?-1:0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Qo{constructor(e){this.value=e}static empty(){return new Qo({mapValue:{}})}field(e){if(e.isEmpty())return this.value;{let r=this.value;for(let n=0;n<e.length-1;++n)if(r=(r.mapValue.fields||{})[e.get(n)],!j_(r))return null;return r=(r.mapValue.fields||{})[e.lastSegment()],r||null}}set(e,r){this.getFieldsMap(e.popLast())[e.lastSegment()]=My(r)}setAll(e){let r=hs.emptyPath(),n={},a=[];e.forEach((i,l)=>{if(!r.isImmediateParentOf(l)){const c=this.getFieldsMap(r);this.applyChanges(c,n,a),n={},a=[],r=l.popLast()}i?n[l.lastSegment()]=My(i):a.push(l.lastSegment())});const s=this.getFieldsMap(r);this.applyChanges(s,n,a)}delete(e){const r=this.field(e.popLast());j_(r)&&r.mapValue.fields&&delete r.mapValue.fields[e.lastSegment()]}isEqual(e){return Ef(this.value,e.value)}getFieldsMap(e){let r=this.value;r.mapValue.fields||(r.mapValue={fields:{}});for(let n=0;n<e.length;++n){let a=r.mapValue.fields[e.get(n)];j_(a)&&a.mapValue.fields||(a={mapValue:{fields:{}}},r.mapValue.fields[e.get(n)]=a),r=a}return r.mapValue.fields}applyChanges(e,r,n){Yp(r,(a,s)=>e[a]=s);for(const a of n)delete e[a]}clone(){return new Qo(My(this.value))}}function _Y(t){const e=[];return Yp(t.fields,(r,n)=>{const a=new hs([r]);if(j_(n)){const s=_Y(n.mapValue).fields;if(s.length===0)e.push(a);else for(const i of s)e.push(a.child(i))}else e.push(a)}),new cc(e)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class As{constructor(e,r,n,a,s,i,l){this.key=e,this.documentType=r,this.version=n,this.readTime=a,this.createTime=s,this.data=i,this.documentState=l}static newInvalidDocument(e){return new As(e,0,zr.min(),zr.min(),zr.min(),Qo.empty(),0)}static newFoundDocument(e,r,n,a){return new As(e,1,r,zr.min(),n,a,0)}static newNoDocument(e,r){return new As(e,2,r,zr.min(),zr.min(),Qo.empty(),0)}static newUnknownDocument(e,r){return new As(e,3,r,zr.min(),zr.min(),Qo.empty(),2)}convertToFoundDocument(e,r){return!this.createTime.isEqual(zr.min())||this.documentType!==2&&this.documentType!==0||(this.createTime=e),this.version=e,this.documentType=1,this.data=r,this.documentState=0,this}convertToNoDocument(e){return this.version=e,this.documentType=2,this.data=Qo.empty(),this.documentState=0,this}convertToUnknownDocument(e){return this.version=e,this.documentType=3,this.data=Qo.empty(),this.documentState=2,this}setHasCommittedMutations(){return this.documentState=2,this}setHasLocalMutations(){return this.documentState=1,this.version=zr.min(),this}setReadTime(e){return this.readTime=e,this}get hasLocalMutations(){return this.documentState===1}get hasCommittedMutations(){return this.documentState===2}get hasPendingWrites(){return this.hasLocalMutations||this.hasCommittedMutations}isValidDocument(){return this.documentType!==0}isFoundDocument(){return this.documentType===1}isNoDocument(){return this.documentType===2}isUnknownDocument(){return this.documentType===3}isEqual(e){return e instanceof As&&this.key.isEqual(e.key)&&this.version.isEqual(e.version)&&this.documentType===e.documentType&&this.documentState===e.documentState&&this.data.isEqual(e.data)}mutableCopy(){return new As(this.key,this.documentType,this.version,this.readTime,this.createTime,this.data.clone(),this.documentState)}toString(){return`Document(${this.key}, ${this.version}, ${JSON.stringify(this.data.value)}, {createTime: ${this.createTime}}), {documentType: ${this.documentType}}), {documentState: ${this.documentState}})`}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class rv{constructor(e,r){this.position=e,this.inclusive=r}}function yU(t,e,r){let n=0;for(let a=0;a<t.position.length;a++){const s=e[a],i=t.position[a];if(s.field.isKeyField()?n=jr.comparator(jr.fromName(i.referenceValue),r.key):n=U0(i,r.data.field(s.field)),s.dir==="desc"&&(n*=-1),n!==0)break}return n}function bU(t,e){if(t===null)return e===null;if(e===null||t.inclusive!==e.inclusive||t.position.length!==e.position.length)return!1;for(let r=0;r<t.position.length;r++)if(!Ef(t.position[r],e.position[r]))return!1;return!0}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ub{constructor(e,r="asc"){this.field=e,this.dir=r}}function pge(t,e){return t.dir===e.dir&&t.field.isEqual(e.field)}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class EY{}class Ln extends EY{constructor(e,r,n){super(),this.field=e,this.op=r,this.value=n}static create(e,r,n){return e.isKeyField()?r==="in"||r==="not-in"?this.createKeyFieldInFilter(e,r,n):new gge(e,r,n):r==="array-contains"?new yge(e,n):r==="in"?new TY(e,n):r==="not-in"?new bge(e,n):r==="array-contains-any"?new wge(e,n):new Ln(e,r,n)}static createKeyFieldInFilter(e,r,n){return r==="in"?new xge(e,n):new vge(e,n)}matches(e){const r=e.data.field(this.field);return this.op==="!="?r!==null&&this.matchesComparison(U0(r,this.value)):r!==null&&Ep(this.value)===Ep(r)&&this.matchesComparison(U0(r,this.value))}matchesComparison(e){switch(this.op){case"<":return e<0;case"<=":return e<=0;case"==":return e===0;case"!=":return e!==0;case">":return e>0;case">=":return e>=0;default:return Ur()}}isInequality(){return["<","<=",">",">=","!=","not-in"].indexOf(this.op)>=0}getFlattenedFilters(){return[this]}getFilters(){return[this]}}class Na extends EY{constructor(e,r){super(),this.filters=e,this.op=r,this.ae=null}static create(e,r){return new Na(e,r)}matches(e){return nv(this)?this.filters.find(r=>!r.matches(e))===void 0:this.filters.find(r=>r.matches(e))!==void 0}getFlattenedFilters(){return this.ae!==null||(this.ae=this.filters.reduce((e,r)=>e.concat(r.getFlattenedFilters()),[])),this.ae}getFilters(){return Object.assign([],this.filters)}}function nv(t){return t.op==="and"}function JP(t){return t.op==="or"}function KO(t){return SY(t)&&nv(t)}function SY(t){for(const e of t.filters)if(e instanceof Na)return!1;return!0}function ZP(t){if(t instanceof Ln)return t.field.canonicalString()+t.op.toString()+tv(t.value);if(KO(t))return t.filters.map(e=>ZP(e)).join(",");{const e=t.filters.map(r=>ZP(r)).join(",");return`${t.op}(${e})`}}function IY(t,e){return t instanceof Ln?function(n,a){return a instanceof Ln&&n.op===a.op&&n.field.isEqual(a.field)&&Ef(n.value,a.value)}(t,e):t instanceof Na?function(n,a){return a instanceof Na&&n.op===a.op&&n.filters.length===a.filters.length?n.filters.reduce((s,i,l)=>s&&IY(i,a.filters[l]),!0):!1}(t,e):void Ur()}function jY(t,e){const r=t.filters.concat(e);return Na.create(r,t.op)}function BY(t){return t instanceof Ln?function(r){return`${r.field.canonicalString()} ${r.op} ${tv(r.value)}`}(t):t instanceof Na?function(r){return r.op.toString()+" {"+r.getFilters().map(BY).join(" ,")+"}"}(t):"Filter"}class gge extends Ln{constructor(e,r,n){super(e,r,n),this.key=jr.fromName(n.referenceValue)}matches(e){const r=jr.comparator(e.key,this.key);return this.matchesComparison(r)}}class xge extends Ln{constructor(e,r){super(e,"in",r),this.keys=PY("in",r)}matches(e){return this.keys.some(r=>r.isEqual(e.key))}}class vge extends Ln{constructor(e,r){super(e,"not-in",r),this.keys=PY("not-in",r)}matches(e){return!this.keys.some(r=>r.isEqual(e.key))}}function PY(t,e){var r;return(((r=e.arrayValue)===null||r===void 0?void 0:r.values)||[]).map(n=>jr.fromName(n.referenceValue))}class yge extends Ln{constructor(e,r){super(e,"array-contains",r)}matches(e){const r=e.data.field(this.field);return Lb(r)&&Rb(r.arrayValue,this.value)}}class TY extends Ln{constructor(e,r){super(e,"in",r)}matches(e){const r=e.data.field(this.field);return r!==null&&Rb(this.value.arrayValue,r)}}class bge extends Ln{constructor(e,r){super(e,"not-in",r)}matches(e){if(Rb(this.value.arrayValue,{nullValue:"NULL_VALUE"}))return!1;const r=e.data.field(this.field);return r!==null&&!Rb(this.value.arrayValue,r)}}class wge extends Ln{constructor(e,r){super(e,"array-contains-any",r)}matches(e){const r=e.data.field(this.field);return!(!Lb(r)||!r.arrayValue.values)&&r.arrayValue.values.some(n=>Rb(this.value.arrayValue,n))}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Nge{constructor(e,r=null,n=[],a=[],s=null,i=null,l=null){this.path=e,this.collectionGroup=r,this.orderBy=n,this.filters=a,this.limit=s,this.startAt=i,this.endAt=l,this.ue=null}}function eT(t,e=null,r=[],n=[],a=null,s=null,i=null){return new Nge(t,e,r,n,a,s,i)}function Sp(t){const e=dn(t);if(e.ue===null){let r=e.path.canonicalString();e.collectionGroup!==null&&(r+="|cg:"+e.collectionGroup),r+="|f:",r+=e.filters.map(n=>ZP(n)).join(","),r+="|ob:",r+=e.orderBy.map(n=>function(s){return s.field.canonicalString()+s.dir}(n)).join(","),G2(e.limit)||(r+="|l:",r+=e.limit),e.startAt&&(r+="|lb:",r+=e.startAt.inclusive?"b:":"a:",r+=e.startAt.position.map(n=>tv(n)).join(",")),e.endAt&&(r+="|ub:",r+=e.endAt.inclusive?"a:":"b:",r+=e.endAt.position.map(n=>tv(n)).join(",")),e.ue=r}return e.ue}function q2(t,e){if(t.limit!==e.limit||t.orderBy.length!==e.orderBy.length)return!1;for(let r=0;r<t.orderBy.length;r++)if(!pge(t.orderBy[r],e.orderBy[r]))return!1;if(t.filters.length!==e.filters.length)return!1;for(let r=0;r<t.filters.length;r++)if(!IY(t.filters[r],e.filters[r]))return!1;return t.collectionGroup===e.collectionGroup&&!!t.path.isEqual(e.path)&&!!bU(t.startAt,e.startAt)&&bU(t.endAt,e.endAt)}function jE(t){return jr.isDocumentKey(t.path)&&t.collectionGroup===null&&t.filters.length===0}function BE(t,e){return t.filters.filter(r=>r instanceof Ln&&r.field.isEqual(e))}function wU(t,e,r){let n=I_,a=!0;for(const s of BE(t,e)){let i=I_,l=!0;switch(s.op){case"<":case"<=":i=hge(s.value);break;case"==":case"in":case">=":i=s.value;break;case">":i=s.value,l=!1;break;case"!=":case"not-in":i=I_}xU({value:n,inclusive:a},{value:i,inclusive:l})<0&&(n=i,a=l)}if(r!==null){for(let s=0;s<t.orderBy.length;++s)if(t.orderBy[s].field.isEqual(e)){const i=r.position[s];xU({value:n,inclusive:a},{value:i,inclusive:r.inclusive})<0&&(n=i,a=r.inclusive);break}}return{value:n,inclusive:a}}function NU(t,e,r){let n=c0,a=!0;for(const s of BE(t,e)){let i=c0,l=!0;switch(s.op){case">=":case">":i=mge(s.value),l=!1;break;case"==":case"in":case"<=":i=s.value;break;case"<":i=s.value,l=!1;break;case"!=":case"not-in":i=c0}vU({value:n,inclusive:a},{value:i,inclusive:l})>0&&(n=i,a=l)}if(r!==null){for(let s=0;s<t.orderBy.length;++s)if(t.orderBy[s].field.isEqual(e)){const i=r.position[s];vU({value:n,inclusive:a},{value:i,inclusive:r.inclusive})>0&&(n=i,a=r.inclusive);break}}return{value:n,inclusive:a}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Pv{constructor(e,r=null,n=[],a=[],s=null,i="F",l=null,c=null){this.path=e,this.collectionGroup=r,this.explicitOrderBy=n,this.filters=a,this.limit=s,this.limitType=i,this.startAt=l,this.endAt=c,this.ce=null,this.le=null,this.he=null,this.startAt,this.endAt}}function Cge(t,e,r,n,a,s,i,l){return new Pv(t,e,r,n,a,s,i,l)}function z2(t){return new Pv(t)}function CU(t){return t.filters.length===0&&t.limit===null&&t.startAt==null&&t.endAt==null&&(t.explicitOrderBy.length===0||t.explicitOrderBy.length===1&&t.explicitOrderBy[0].field.isKeyField())}function kY(t){return t.collectionGroup!==null}function Ly(t){const e=dn(t);if(e.ce===null){e.ce=[];const r=new Set;for(const s of e.explicitOrderBy)e.ce.push(s),r.add(s.field.canonicalString());const n=e.explicitOrderBy.length>0?e.explicitOrderBy[e.explicitOrderBy.length-1].dir:"asc";(function(i){let l=new Pa(hs.comparator);return i.filters.forEach(c=>{c.getFlattenedFilters().forEach(u=>{u.isInequality()&&(l=l.add(u.field))})}),l})(e).forEach(s=>{r.has(s.canonicalString())||s.isKeyField()||e.ce.push(new Ub(s,n))}),r.has(hs.keyField().canonicalString())||e.ce.push(new Ub(hs.keyField(),n))}return e.ce}function Qu(t){const e=dn(t);return e.le||(e.le=_ge(e,Ly(t))),e.le}function _ge(t,e){if(t.limitType==="F")return eT(t.path,t.collectionGroup,e,t.filters,t.limit,t.startAt,t.endAt);{e=e.map(a=>{const s=a.dir==="desc"?"asc":"desc";return new Ub(a.field,s)});const r=t.endAt?new rv(t.endAt.position,t.endAt.inclusive):null,n=t.startAt?new rv(t.startAt.position,t.startAt.inclusive):null;return eT(t.path,t.collectionGroup,e,t.filters,t.limit,r,n)}}function tT(t,e){const r=t.filters.concat([e]);return new Pv(t.path,t.collectionGroup,t.explicitOrderBy.slice(),r,t.limit,t.limitType,t.startAt,t.endAt)}function PE(t,e,r){return new Pv(t.path,t.collectionGroup,t.explicitOrderBy.slice(),t.filters.slice(),e,r,t.startAt,t.endAt)}function LI(t,e){return q2(Qu(t),Qu(e))&&t.limitType===e.limitType}function FY(t){return`${Sp(Qu(t))}|lt:${t.limitType}`}function Yg(t){return`Query(target=${function(r){let n=r.path.canonicalString();return r.collectionGroup!==null&&(n+=" collectionGroup="+r.collectionGroup),r.filters.length>0&&(n+=`, filters: [${r.filters.map(a=>BY(a)).join(", ")}]`),G2(r.limit)||(n+=", limit: "+r.limit),r.orderBy.length>0&&(n+=`, orderBy: [${r.orderBy.map(a=>function(i){return`${i.field.canonicalString()} (${i.dir})`}(a)).join(", ")}]`),r.startAt&&(n+=", startAt: ",n+=r.startAt.inclusive?"b:":"a:",n+=r.startAt.position.map(a=>tv(a)).join(",")),r.endAt&&(n+=", endAt: ",n+=r.endAt.inclusive?"a:":"b:",n+=r.endAt.position.map(a=>tv(a)).join(",")),`Target(${n})`}(Qu(t))}; limitType=${t.limitType})`}function W2(t,e){return e.isFoundDocument()&&function(n,a){const s=a.key.path;return n.collectionGroup!==null?a.key.hasCollectionId(n.collectionGroup)&&n.path.isPrefixOf(s):jr.isDocumentKey(n.path)?n.path.isEqual(s):n.path.isImmediateParentOf(s)}(t,e)&&function(n,a){for(const s of Ly(n))if(!s.field.isKeyField()&&a.data.field(s.field)===null)return!1;return!0}(t,e)&&function(n,a){for(const s of n.filters)if(!s.matches(a))return!1;return!0}(t,e)&&function(n,a){return!(n.startAt&&!function(i,l,c){const u=yU(i,l,c);return i.inclusive?u<=0:u<0}(n.startAt,Ly(n),a)||n.endAt&&!function(i,l,c){const u=yU(i,l,c);return i.inclusive?u>=0:u>0}(n.endAt,Ly(n),a))}(t,e)}function Ege(t){return t.collectionGroup||(t.path.length%2==1?t.path.lastSegment():t.path.get(t.path.length-2))}function OY(t){return(e,r)=>{let n=!1;for(const a of Ly(t)){const s=Sge(a,e,r);if(s!==0)return s;n=n||a.field.isKeyField()}return 0}}function Sge(t,e,r){const n=t.field.isKeyField()?jr.comparator(e.key,r.key):function(s,i,l){const c=i.data.field(s),u=l.data.field(s);return c!==null&&u!==null?U0(c,u):Ur()}(t.field,e,r);switch(t.dir){case"asc":return n;case"desc":return-1*n;default:return Ur()}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class nm{constructor(e,r){this.mapKeyFn=e,this.equalsFn=r,this.inner={},this.innerSize=0}get(e){const r=this.mapKeyFn(e),n=this.inner[r];if(n!==void 0){for(const[a,s]of n)if(this.equalsFn(a,e))return s}}has(e){return this.get(e)!==void 0}set(e,r){const n=this.mapKeyFn(e),a=this.inner[n];if(a===void 0)return this.inner[n]=[[e,r]],void this.innerSize++;for(let s=0;s<a.length;s++)if(this.equalsFn(a[s][0],e))return void(a[s]=[e,r]);a.push([e,r]),this.innerSize++}delete(e){const r=this.mapKeyFn(e),n=this.inner[r];if(n===void 0)return!1;for(let a=0;a<n.length;a++)if(this.equalsFn(n[a][0],e))return n.length===1?delete this.inner[r]:n.splice(a,1),this.innerSize--,!0;return!1}forEach(e){Yp(this.inner,(r,n)=>{for(const[a,s]of n)e(a,s)})}isEmpty(){return bY(this.inner)}size(){return this.innerSize}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Ige=new xs(jr.comparator);function $c(){return Ige}const DY=new xs(jr.comparator);function ly(...t){let e=DY;for(const r of t)e=e.insert(r.key,r);return e}function RY(t){let e=DY;return t.forEach((r,n)=>e=e.insert(r,n.overlayedDocument)),e}function mf(){return Uy()}function MY(){return Uy()}function Uy(){return new nm(t=>t.toString(),(t,e)=>t.isEqual(e))}const jge=new xs(jr.comparator),Bge=new Pa(jr.comparator);function Sn(...t){let e=Bge;for(const r of t)e=e.add(r);return e}const Pge=new Pa(gn);function Tge(){return Pge}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function GO(t,e){if(t.useProto3Json){if(isNaN(e))return{doubleValue:"NaN"};if(e===1/0)return{doubleValue:"Infinity"};if(e===-1/0)return{doubleValue:"-Infinity"}}return{doubleValue:Ob(e)?"-0":e}}function LY(t){return{integerValue:""+t}}function kge(t,e){return Gpe(e)?LY(e):GO(t,e)}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class UI{constructor(){this._=void 0}}function Fge(t,e,r){return t instanceof Qb?function(a,s){const i={fields:{__type__:{stringValue:"server_timestamp"},__local_write_time__:{timestampValue:{seconds:a.seconds,nanos:a.nanoseconds}}}};return s&&HO(s)&&(s=$O(s)),s&&(i.fields.__previous_value__=s),{mapValue:i}}(r,e):t instanceof av?QY(t,e):t instanceof sv?VY(t,e):function(a,s){const i=UY(a,s),l=_U(i)+_U(a.Pe);return YP(i)&&YP(a.Pe)?LY(l):GO(a.serializer,l)}(t,e)}function Oge(t,e,r){return t instanceof av?QY(t,e):t instanceof sv?VY(t,e):r}function UY(t,e){return t instanceof Vb?function(n){return YP(n)||function(s){return!!s&&"doubleValue"in s}(n)}(e)?e:{integerValue:0}:null}class Qb extends UI{}class av extends UI{constructor(e){super(),this.elements=e}}function QY(t,e){const r=HY(e);for(const n of t.elements)r.some(a=>Ef(a,n))||r.push(n);return{arrayValue:{values:r}}}class sv extends UI{constructor(e){super(),this.elements=e}}function VY(t,e){let r=HY(e);for(const n of t.elements)r=r.filter(a=>!Ef(a,n));return{arrayValue:{values:r}}}class Vb extends UI{constructor(e,r){super(),this.serializer=e,this.Pe=r}}function _U(t){return ds(t.integerValue||t.doubleValue)}function HY(t){return Lb(t)&&t.arrayValue.values?t.arrayValue.values.slice():[]}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Dge{constructor(e,r){this.field=e,this.transform=r}}function Rge(t,e){return t.field.isEqual(e.field)&&function(n,a){return n instanceof av&&a instanceof av||n instanceof sv&&a instanceof sv?ev(n.elements,a.elements,Ef):n instanceof Vb&&a instanceof Vb?Ef(n.Pe,a.Pe):n instanceof Qb&&a instanceof Qb}(t.transform,e.transform)}class Mge{constructor(e,r){this.version=e,this.transformResults=r}}class ms{constructor(e,r){this.updateTime=e,this.exists=r}static none(){return new ms}static exists(e){return new ms(void 0,e)}static updateTime(e){return new ms(e)}get isNone(){return this.updateTime===void 0&&this.exists===void 0}isEqual(e){return this.exists===e.exists&&(this.updateTime?!!e.updateTime&&this.updateTime.isEqual(e.updateTime):!e.updateTime)}}function B_(t,e){return t.updateTime!==void 0?e.isFoundDocument()&&e.version.isEqual(t.updateTime):t.exists===void 0||t.exists===e.isFoundDocument()}class QI{}function $Y(t,e){if(!t.hasLocalMutations||e&&e.fields.length===0)return null;if(e===null)return t.isNoDocument()?new kv(t.key,ms.none()):new Tv(t.key,t.data,ms.none());{const r=t.data,n=Qo.empty();let a=new Pa(hs.comparator);for(let s of e.fields)if(!a.has(s)){let i=r.field(s);i===null&&s.length>1&&(s=s.popLast(),i=r.field(s)),i===null?n.delete(s):n.set(s,i),a=a.add(s)}return new eh(t.key,n,new cc(a.toArray()),ms.none())}}function Lge(t,e,r){t instanceof Tv?function(a,s,i){const l=a.value.clone(),c=SU(a.fieldTransforms,s,i.transformResults);l.setAll(c),s.convertToFoundDocument(i.version,l).setHasCommittedMutations()}(t,e,r):t instanceof eh?function(a,s,i){if(!B_(a.precondition,s))return void s.convertToUnknownDocument(i.version);const l=SU(a.fieldTransforms,s,i.transformResults),c=s.data;c.setAll(KY(a)),c.setAll(l),s.convertToFoundDocument(i.version,c).setHasCommittedMutations()}(t,e,r):function(a,s,i){s.convertToNoDocument(i.version).setHasCommittedMutations()}(0,e,r)}function Qy(t,e,r,n){return t instanceof Tv?function(s,i,l,c){if(!B_(s.precondition,i))return l;const u=s.value.clone(),d=IU(s.fieldTransforms,c,i);return u.setAll(d),i.convertToFoundDocument(i.version,u).setHasLocalMutations(),null}(t,e,r,n):t instanceof eh?function(s,i,l,c){if(!B_(s.precondition,i))return l;const u=IU(s.fieldTransforms,c,i),d=i.data;return d.setAll(KY(s)),d.setAll(u),i.convertToFoundDocument(i.version,d).setHasLocalMutations(),l===null?null:l.unionWith(s.fieldMask.fields).unionWith(s.fieldTransforms.map(f=>f.field))}(t,e,r,n):function(s,i,l){return B_(s.precondition,i)?(i.convertToNoDocument(i.version).setHasLocalMutations(),null):l}(t,e,r)}function Uge(t,e){let r=null;for(const n of t.fieldTransforms){const a=e.data.field(n.field),s=UY(n.transform,a||null);s!=null&&(r===null&&(r=Qo.empty()),r.set(n.field,s))}return r||null}function EU(t,e){return t.type===e.type&&!!t.key.isEqual(e.key)&&!!t.precondition.isEqual(e.precondition)&&!!function(n,a){return n===void 0&&a===void 0||!(!n||!a)&&ev(n,a,(s,i)=>Rge(s,i))}(t.fieldTransforms,e.fieldTransforms)&&(t.type===0?t.value.isEqual(e.value):t.type!==1||t.data.isEqual(e.data)&&t.fieldMask.isEqual(e.fieldMask))}class Tv extends QI{constructor(e,r,n,a=[]){super(),this.key=e,this.value=r,this.precondition=n,this.fieldTransforms=a,this.type=0}getFieldMask(){return null}}class eh extends QI{constructor(e,r,n,a,s=[]){super(),this.key=e,this.data=r,this.fieldMask=n,this.precondition=a,this.fieldTransforms=s,this.type=1}getFieldMask(){return this.fieldMask}}function KY(t){const e=new Map;return t.fieldMask.fields.forEach(r=>{if(!r.isEmpty()){const n=t.data.field(r);e.set(r,n)}}),e}function SU(t,e,r){const n=new Map;Kr(t.length===r.length);for(let a=0;a<r.length;a++){const s=t[a],i=s.transform,l=e.data.field(s.field);n.set(s.field,Oge(i,l,r[a]))}return n}function IU(t,e,r){const n=new Map;for(const a of t){const s=a.transform,i=r.data.field(a.field);n.set(a.field,Fge(s,i,e))}return n}class kv extends QI{constructor(e,r){super(),this.key=e,this.precondition=r,this.type=2,this.fieldTransforms=[]}getFieldMask(){return null}}class qO extends QI{constructor(e,r){super(),this.key=e,this.precondition=r,this.type=3,this.fieldTransforms=[]}getFieldMask(){return null}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class zO{constructor(e,r,n,a){this.batchId=e,this.localWriteTime=r,this.baseMutations=n,this.mutations=a}applyToRemoteDocument(e,r){const n=r.mutationResults;for(let a=0;a<this.mutations.length;a++){const s=this.mutations[a];s.key.isEqual(e.key)&&Lge(s,e,n[a])}}applyToLocalView(e,r){for(const n of this.baseMutations)n.key.isEqual(e.key)&&(r=Qy(n,e,r,this.localWriteTime));for(const n of this.mutations)n.key.isEqual(e.key)&&(r=Qy(n,e,r,this.localWriteTime));return r}applyToLocalDocumentSet(e,r){const n=MY();return this.mutations.forEach(a=>{const s=e.get(a.key),i=s.overlayedDocument;let l=this.applyToLocalView(i,s.mutatedFields);l=r.has(a.key)?null:l;const c=$Y(i,l);c!==null&&n.set(a.key,c),i.isValidDocument()||i.convertToNoDocument(zr.min())}),n}keys(){return this.mutations.reduce((e,r)=>e.add(r.key),Sn())}isEqual(e){return this.batchId===e.batchId&&ev(this.mutations,e.mutations,(r,n)=>EU(r,n))&&ev(this.baseMutations,e.baseMutations,(r,n)=>EU(r,n))}}class WO{constructor(e,r,n,a){this.batch=e,this.commitVersion=r,this.mutationResults=n,this.docVersions=a}static from(e,r,n){Kr(e.mutations.length===n.length);let a=function(){return jge}();const s=e.mutations;for(let i=0;i<s.length;i++)a=a.insert(s[i].key,n[i].version);return new WO(e,r,n,a)}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class XO{constructor(e,r){this.largestBatchId=e,this.mutation=r}getKey(){return this.mutation.key}isEqual(e){return e!==null&&this.mutation===e.mutation}toString(){return`Overlay{
      largestBatchId: ${this.largestBatchId},
      mutation: ${this.mutation.toString()}
    }`}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Qge{constructor(e,r){this.count=e,this.unchangedNames=r}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var mi,$n;function GY(t){switch(t){default:return Ur();case Zt.CANCELLED:case Zt.UNKNOWN:case Zt.DEADLINE_EXCEEDED:case Zt.RESOURCE_EXHAUSTED:case Zt.INTERNAL:case Zt.UNAVAILABLE:case Zt.UNAUTHENTICATED:return!1;case Zt.INVALID_ARGUMENT:case Zt.NOT_FOUND:case Zt.ALREADY_EXISTS:case Zt.PERMISSION_DENIED:case Zt.FAILED_PRECONDITION:case Zt.ABORTED:case Zt.OUT_OF_RANGE:case Zt.UNIMPLEMENTED:case Zt.DATA_LOSS:return!0}}function qY(t){if(t===void 0)return Ml("GRPC error has no .code"),Zt.UNKNOWN;switch(t){case mi.OK:return Zt.OK;case mi.CANCELLED:return Zt.CANCELLED;case mi.UNKNOWN:return Zt.UNKNOWN;case mi.DEADLINE_EXCEEDED:return Zt.DEADLINE_EXCEEDED;case mi.RESOURCE_EXHAUSTED:return Zt.RESOURCE_EXHAUSTED;case mi.INTERNAL:return Zt.INTERNAL;case mi.UNAVAILABLE:return Zt.UNAVAILABLE;case mi.UNAUTHENTICATED:return Zt.UNAUTHENTICATED;case mi.INVALID_ARGUMENT:return Zt.INVALID_ARGUMENT;case mi.NOT_FOUND:return Zt.NOT_FOUND;case mi.ALREADY_EXISTS:return Zt.ALREADY_EXISTS;case mi.PERMISSION_DENIED:return Zt.PERMISSION_DENIED;case mi.FAILED_PRECONDITION:return Zt.FAILED_PRECONDITION;case mi.ABORTED:return Zt.ABORTED;case mi.OUT_OF_RANGE:return Zt.OUT_OF_RANGE;case mi.UNIMPLEMENTED:return Zt.UNIMPLEMENTED;case mi.DATA_LOSS:return Zt.DATA_LOSS;default:return Ur()}}($n=mi||(mi={}))[$n.OK=0]="OK",$n[$n.CANCELLED=1]="CANCELLED",$n[$n.UNKNOWN=2]="UNKNOWN",$n[$n.INVALID_ARGUMENT=3]="INVALID_ARGUMENT",$n[$n.DEADLINE_EXCEEDED=4]="DEADLINE_EXCEEDED",$n[$n.NOT_FOUND=5]="NOT_FOUND",$n[$n.ALREADY_EXISTS=6]="ALREADY_EXISTS",$n[$n.PERMISSION_DENIED=7]="PERMISSION_DENIED",$n[$n.UNAUTHENTICATED=16]="UNAUTHENTICATED",$n[$n.RESOURCE_EXHAUSTED=8]="RESOURCE_EXHAUSTED",$n[$n.FAILED_PRECONDITION=9]="FAILED_PRECONDITION",$n[$n.ABORTED=10]="ABORTED",$n[$n.OUT_OF_RANGE=11]="OUT_OF_RANGE",$n[$n.UNIMPLEMENTED=12]="UNIMPLEMENTED",$n[$n.INTERNAL=13]="INTERNAL",$n[$n.UNAVAILABLE=14]="UNAVAILABLE",$n[$n.DATA_LOSS=15]="DATA_LOSS";/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Vge(){return new TextEncoder}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Hge=new tp([4294967295,4294967295],0);function jU(t){const e=Vge().encode(t),r=new aY;return r.update(e),new Uint8Array(r.digest())}function BU(t){const e=new DataView(t.buffer),r=e.getUint32(0,!0),n=e.getUint32(4,!0),a=e.getUint32(8,!0),s=e.getUint32(12,!0);return[new tp([r,n],0),new tp([a,s],0)]}class YO{constructor(e,r,n){if(this.bitmap=e,this.padding=r,this.hashCount=n,r<0||r>=8)throw new cy(`Invalid padding: ${r}`);if(n<0)throw new cy(`Invalid hash count: ${n}`);if(e.length>0&&this.hashCount===0)throw new cy(`Invalid hash count: ${n}`);if(e.length===0&&r!==0)throw new cy(`Invalid padding when bitmap length is 0: ${r}`);this.Ie=8*e.length-r,this.Te=tp.fromNumber(this.Ie)}Ee(e,r,n){let a=e.add(r.multiply(tp.fromNumber(n)));return a.compare(Hge)===1&&(a=new tp([a.getBits(0),a.getBits(1)],0)),a.modulo(this.Te).toNumber()}de(e){return(this.bitmap[Math.floor(e/8)]&1<<e%8)!=0}mightContain(e){if(this.Ie===0)return!1;const r=jU(e),[n,a]=BU(r);for(let s=0;s<this.hashCount;s++){const i=this.Ee(n,a,s);if(!this.de(i))return!1}return!0}static create(e,r,n){const a=e%8==0?0:8-e%8,s=new Uint8Array(Math.ceil(e/8)),i=new YO(s,a,r);return n.forEach(l=>i.insert(l)),i}insert(e){if(this.Ie===0)return;const r=jU(e),[n,a]=BU(r);for(let s=0;s<this.hashCount;s++){const i=this.Ee(n,a,s);this.Ae(i)}}Ae(e){const r=Math.floor(e/8),n=e%8;this.bitmap[r]|=1<<n}}class cy extends Error{constructor(){super(...arguments),this.name="BloomFilterError"}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class VI{constructor(e,r,n,a,s){this.snapshotVersion=e,this.targetChanges=r,this.targetMismatches=n,this.documentUpdates=a,this.resolvedLimboDocuments=s}static createSynthesizedRemoteEventForCurrentChange(e,r,n){const a=new Map;return a.set(e,X2.createSynthesizedTargetChangeForCurrentChange(e,r,n)),new VI(zr.min(),a,new xs(gn),$c(),Sn())}}class X2{constructor(e,r,n,a,s){this.resumeToken=e,this.current=r,this.addedDocuments=n,this.modifiedDocuments=a,this.removedDocuments=s}static createSynthesizedTargetChangeForCurrentChange(e,r,n){return new X2(n,r,Sn(),Sn(),Sn())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class P_{constructor(e,r,n,a){this.Re=e,this.removedTargetIds=r,this.key=n,this.Ve=a}}class zY{constructor(e,r){this.targetId=e,this.me=r}}class WY{constructor(e,r,n=fi.EMPTY_BYTE_STRING,a=null){this.state=e,this.targetIds=r,this.resumeToken=n,this.cause=a}}class PU{constructor(){this.fe=0,this.ge=kU(),this.pe=fi.EMPTY_BYTE_STRING,this.ye=!1,this.we=!0}get current(){return this.ye}get resumeToken(){return this.pe}get Se(){return this.fe!==0}get be(){return this.we}De(e){e.approximateByteSize()>0&&(this.we=!0,this.pe=e)}ve(){let e=Sn(),r=Sn(),n=Sn();return this.ge.forEach((a,s)=>{switch(s){case 0:e=e.add(a);break;case 2:r=r.add(a);break;case 1:n=n.add(a);break;default:Ur()}}),new X2(this.pe,this.ye,e,r,n)}Ce(){this.we=!1,this.ge=kU()}Fe(e,r){this.we=!0,this.ge=this.ge.insert(e,r)}Me(e){this.we=!0,this.ge=this.ge.remove(e)}xe(){this.fe+=1}Oe(){this.fe-=1,Kr(this.fe>=0)}Ne(){this.we=!0,this.ye=!0}}class $ge{constructor(e){this.Le=e,this.Be=new Map,this.ke=$c(),this.qe=TU(),this.Qe=new xs(gn)}Ke(e){for(const r of e.Re)e.Ve&&e.Ve.isFoundDocument()?this.$e(r,e.Ve):this.Ue(r,e.key,e.Ve);for(const r of e.removedTargetIds)this.Ue(r,e.key,e.Ve)}We(e){this.forEachTarget(e,r=>{const n=this.Ge(r);switch(e.state){case 0:this.ze(r)&&n.De(e.resumeToken);break;case 1:n.Oe(),n.Se||n.Ce(),n.De(e.resumeToken);break;case 2:n.Oe(),n.Se||this.removeTarget(r);break;case 3:this.ze(r)&&(n.Ne(),n.De(e.resumeToken));break;case 4:this.ze(r)&&(this.je(r),n.De(e.resumeToken));break;default:Ur()}})}forEachTarget(e,r){e.targetIds.length>0?e.targetIds.forEach(r):this.Be.forEach((n,a)=>{this.ze(a)&&r(a)})}He(e){const r=e.targetId,n=e.me.count,a=this.Je(r);if(a){const s=a.target;if(jE(s))if(n===0){const i=new jr(s.path);this.Ue(r,i,As.newNoDocument(i,zr.min()))}else Kr(n===1);else{const i=this.Ye(r);if(i!==n){const l=this.Ze(e),c=l?this.Xe(l,e,i):1;if(c!==0){this.je(r);const u=c===2?"TargetPurposeExistenceFilterMismatchBloom":"TargetPurposeExistenceFilterMismatch";this.Qe=this.Qe.insert(r,u)}}}}}Ze(e){const r=e.me.unchangedNames;if(!r||!r.bits)return null;const{bits:{bitmap:n="",padding:a=0},hashCount:s=0}=r;let i,l;try{i=M0(n).toUint8Array()}catch(c){if(c instanceof wY)return R0("Decoding the base64 bloom filter in existence filter failed ("+c.message+"); ignoring the bloom filter and falling back to full re-query."),null;throw c}try{l=new YO(i,a,s)}catch(c){return R0(c instanceof cy?"BloomFilter error: ":"Applying bloom filter failed: ",c),null}return l.Ie===0?null:l}Xe(e,r,n){return r.me.count===n-this.nt(e,r.targetId)?0:2}nt(e,r){const n=this.Le.getRemoteKeysForTarget(r);let a=0;return n.forEach(s=>{const i=this.Le.tt(),l=`projects/${i.projectId}/databases/${i.database}/documents/${s.path.canonicalString()}`;e.mightContain(l)||(this.Ue(r,s,null),a++)}),a}rt(e){const r=new Map;this.Be.forEach((s,i)=>{const l=this.Je(i);if(l){if(s.current&&jE(l.target)){const c=new jr(l.target.path);this.ke.get(c)!==null||this.it(i,c)||this.Ue(i,c,As.newNoDocument(c,e))}s.be&&(r.set(i,s.ve()),s.Ce())}});let n=Sn();this.qe.forEach((s,i)=>{let l=!0;i.forEachWhile(c=>{const u=this.Je(c);return!u||u.purpose==="TargetPurposeLimboResolution"||(l=!1,!1)}),l&&(n=n.add(s))}),this.ke.forEach((s,i)=>i.setReadTime(e));const a=new VI(e,r,this.Qe,this.ke,n);return this.ke=$c(),this.qe=TU(),this.Qe=new xs(gn),a}$e(e,r){if(!this.ze(e))return;const n=this.it(e,r.key)?2:0;this.Ge(e).Fe(r.key,n),this.ke=this.ke.insert(r.key,r),this.qe=this.qe.insert(r.key,this.st(r.key).add(e))}Ue(e,r,n){if(!this.ze(e))return;const a=this.Ge(e);this.it(e,r)?a.Fe(r,1):a.Me(r),this.qe=this.qe.insert(r,this.st(r).delete(e)),n&&(this.ke=this.ke.insert(r,n))}removeTarget(e){this.Be.delete(e)}Ye(e){const r=this.Ge(e).ve();return this.Le.getRemoteKeysForTarget(e).size+r.addedDocuments.size-r.removedDocuments.size}xe(e){this.Ge(e).xe()}Ge(e){let r=this.Be.get(e);return r||(r=new PU,this.Be.set(e,r)),r}st(e){let r=this.qe.get(e);return r||(r=new Pa(gn),this.qe=this.qe.insert(e,r)),r}ze(e){const r=this.Je(e)!==null;return r||mr("WatchChangeAggregator","Detected inactive target",e),r}Je(e){const r=this.Be.get(e);return r&&r.Se?null:this.Le.ot(e)}je(e){this.Be.set(e,new PU),this.Le.getRemoteKeysForTarget(e).forEach(r=>{this.Ue(e,r,null)})}it(e,r){return this.Le.getRemoteKeysForTarget(e).has(r)}}function TU(){return new xs(jr.comparator)}function kU(){return new xs(jr.comparator)}const Kge={asc:"ASCENDING",desc:"DESCENDING"},Gge={"<":"LESS_THAN","<=":"LESS_THAN_OR_EQUAL",">":"GREATER_THAN",">=":"GREATER_THAN_OR_EQUAL","==":"EQUAL","!=":"NOT_EQUAL","array-contains":"ARRAY_CONTAINS",in:"IN","not-in":"NOT_IN","array-contains-any":"ARRAY_CONTAINS_ANY"},qge={and:"AND",or:"OR"};class zge{constructor(e,r){this.databaseId=e,this.useProto3Json=r}}function rT(t,e){return t.useProto3Json||G2(e)?e:{value:e}}function iv(t,e){return t.useProto3Json?`${new Date(1e3*e.seconds).toISOString().replace(/\.\d*/,"").replace("Z","")}.${("000000000"+e.nanoseconds).slice(-9)}Z`:{seconds:""+e.seconds,nanos:e.nanoseconds}}function XY(t,e){return t.useProto3Json?e.toBase64():e.toUint8Array()}function Wge(t,e){return iv(t,e.toTimestamp())}function po(t){return Kr(!!t),zr.fromTimestamp(function(r){const n=MA(r);return new fr(n.seconds,n.nanos)}(t))}function JO(t,e){return nT(t,e).canonicalString()}function nT(t,e){const r=function(a){return new ea(["projects",a.projectId,"databases",a.database])}(t).child("documents");return e===void 0?r:r.child(e)}function YY(t){const e=ea.fromString(t);return Kr(iJ(e)),e}function Hb(t,e){return JO(t.databaseId,e.path)}function NA(t,e){const r=YY(e);if(r.get(1)!==t.databaseId.projectId)throw new vr(Zt.INVALID_ARGUMENT,"Tried to deserialize key from different project: "+r.get(1)+" vs "+t.databaseId.projectId);if(r.get(3)!==t.databaseId.database)throw new vr(Zt.INVALID_ARGUMENT,"Tried to deserialize key from different database: "+r.get(3)+" vs "+t.databaseId.database);return new jr(eJ(r))}function JY(t,e){return JO(t.databaseId,e)}function ZY(t){const e=YY(t);return e.length===4?ea.emptyPath():eJ(e)}function aT(t){return new ea(["projects",t.databaseId.projectId,"databases",t.databaseId.database]).canonicalString()}function eJ(t){return Kr(t.length>4&&t.get(4)==="documents"),t.popFirst(5)}function FU(t,e,r){return{name:Hb(t,e),fields:r.value.mapValue.fields}}function Xge(t,e,r){const n=NA(t,e.name),a=po(e.updateTime),s=e.createTime?po(e.createTime):zr.min(),i=new Qo({mapValue:{fields:e.fields}}),l=As.newFoundDocument(n,a,s,i);return r&&l.setHasCommittedMutations(),r?l.setHasCommittedMutations():l}function Yge(t,e){return"found"in e?function(n,a){Kr(!!a.found),a.found.name,a.found.updateTime;const s=NA(n,a.found.name),i=po(a.found.updateTime),l=a.found.createTime?po(a.found.createTime):zr.min(),c=new Qo({mapValue:{fields:a.found.fields}});return As.newFoundDocument(s,i,l,c)}(t,e):"missing"in e?function(n,a){Kr(!!a.missing),Kr(!!a.readTime);const s=NA(n,a.missing),i=po(a.readTime);return As.newNoDocument(s,i)}(t,e):Ur()}function Jge(t,e){let r;if("targetChange"in e){e.targetChange;const n=function(u){return u==="NO_CHANGE"?0:u==="ADD"?1:u==="REMOVE"?2:u==="CURRENT"?3:u==="RESET"?4:Ur()}(e.targetChange.targetChangeType||"NO_CHANGE"),a=e.targetChange.targetIds||[],s=function(u,d){return u.useProto3Json?(Kr(d===void 0||typeof d=="string"),fi.fromBase64String(d||"")):(Kr(d===void 0||d instanceof Buffer||d instanceof Uint8Array),fi.fromUint8Array(d||new Uint8Array))}(t,e.targetChange.resumeToken),i=e.targetChange.cause,l=i&&function(u){const d=u.code===void 0?Zt.UNKNOWN:qY(u.code);return new vr(d,u.message||"")}(i);r=new WY(n,a,s,l||null)}else if("documentChange"in e){e.documentChange;const n=e.documentChange;n.document,n.document.name,n.document.updateTime;const a=NA(t,n.document.name),s=po(n.document.updateTime),i=n.document.createTime?po(n.document.createTime):zr.min(),l=new Qo({mapValue:{fields:n.document.fields}}),c=As.newFoundDocument(a,s,i,l),u=n.targetIds||[],d=n.removedTargetIds||[];r=new P_(u,d,c.key,c)}else if("documentDelete"in e){e.documentDelete;const n=e.documentDelete;n.document;const a=NA(t,n.document),s=n.readTime?po(n.readTime):zr.min(),i=As.newNoDocument(a,s),l=n.removedTargetIds||[];r=new P_([],l,i.key,i)}else if("documentRemove"in e){e.documentRemove;const n=e.documentRemove;n.document;const a=NA(t,n.document),s=n.removedTargetIds||[];r=new P_([],s,a,null)}else{if(!("filter"in e))return Ur();{e.filter;const n=e.filter;n.targetId;const{count:a=0,unchangedNames:s}=n,i=new Qge(a,s),l=n.targetId;r=new zY(l,i)}}return r}function $b(t,e){let r;if(e instanceof Tv)r={update:FU(t,e.key,e.value)};else if(e instanceof kv)r={delete:Hb(t,e.key)};else if(e instanceof eh)r={update:FU(t,e.key,e.data),updateMask:axe(e.fieldMask)};else{if(!(e instanceof qO))return Ur();r={verify:Hb(t,e.key)}}return e.fieldTransforms.length>0&&(r.updateTransforms=e.fieldTransforms.map(n=>function(s,i){const l=i.transform;if(l instanceof Qb)return{fieldPath:i.field.canonicalString(),setToServerValue:"REQUEST_TIME"};if(l instanceof av)return{fieldPath:i.field.canonicalString(),appendMissingElements:{values:l.elements}};if(l instanceof sv)return{fieldPath:i.field.canonicalString(),removeAllFromArray:{values:l.elements}};if(l instanceof Vb)return{fieldPath:i.field.canonicalString(),increment:l.Pe};throw Ur()}(0,n))),e.precondition.isNone||(r.currentDocument=function(a,s){return s.updateTime!==void 0?{updateTime:Wge(a,s.updateTime)}:s.exists!==void 0?{exists:s.exists}:Ur()}(t,e.precondition)),r}function sT(t,e){const r=e.currentDocument?function(s){return s.updateTime!==void 0?ms.updateTime(po(s.updateTime)):s.exists!==void 0?ms.exists(s.exists):ms.none()}(e.currentDocument):ms.none(),n=e.updateTransforms?e.updateTransforms.map(a=>function(i,l){let c=null;if("setToServerValue"in l)Kr(l.setToServerValue==="REQUEST_TIME"),c=new Qb;else if("appendMissingElements"in l){const d=l.appendMissingElements.values||[];c=new av(d)}else if("removeAllFromArray"in l){const d=l.removeAllFromArray.values||[];c=new sv(d)}else"increment"in l?c=new Vb(i,l.increment):Ur();const u=hs.fromServerFormat(l.fieldPath);return new Dge(u,c)}(t,a)):[];if(e.update){e.update.name;const a=NA(t,e.update.name),s=new Qo({mapValue:{fields:e.update.fields}});if(e.updateMask){const i=function(c){const u=c.fieldPaths||[];return new cc(u.map(d=>hs.fromServerFormat(d)))}(e.updateMask);return new eh(a,s,i,r,n)}return new Tv(a,s,r,n)}if(e.delete){const a=NA(t,e.delete);return new kv(a,r)}if(e.verify){const a=NA(t,e.verify);return new qO(a,r)}return Ur()}function Zge(t,e){return t&&t.length>0?(Kr(e!==void 0),t.map(r=>function(a,s){let i=a.updateTime?po(a.updateTime):po(s);return i.isEqual(zr.min())&&(i=po(s)),new Mge(i,a.transformResults||[])}(r,e))):[]}function tJ(t,e){return{documents:[JY(t,e.path)]}}function rJ(t,e){const r={structuredQuery:{}},n=e.path;let a;e.collectionGroup!==null?(a=n,r.structuredQuery.from=[{collectionId:e.collectionGroup,allDescendants:!0}]):(a=n.popLast(),r.structuredQuery.from=[{collectionId:n.lastSegment()}]),r.parent=JY(t,a);const s=function(u){if(u.length!==0)return sJ(Na.create(u,"and"))}(e.filters);s&&(r.structuredQuery.where=s);const i=function(u){if(u.length!==0)return u.map(d=>function(h){return{field:Jg(h.field),direction:txe(h.dir)}}(d))}(e.orderBy);i&&(r.structuredQuery.orderBy=i);const l=rT(t,e.limit);return l!==null&&(r.structuredQuery.limit=l),e.startAt&&(r.structuredQuery.startAt=function(u){return{before:u.inclusive,values:u.position}}(e.startAt)),e.endAt&&(r.structuredQuery.endAt=function(u){return{before:!u.inclusive,values:u.position}}(e.endAt)),{_t:r,parent:a}}function nJ(t){let e=ZY(t.parent);const r=t.structuredQuery,n=r.from?r.from.length:0;let a=null;if(n>0){Kr(n===1);const d=r.from[0];d.allDescendants?a=d.collectionId:e=e.child(d.collectionId)}let s=[];r.where&&(s=function(f){const h=aJ(f);return h instanceof Na&&KO(h)?h.getFilters():[h]}(r.where));let i=[];r.orderBy&&(i=function(f){return f.map(h=>function(m){return new Ub(Zg(m.field),function(g){switch(g){case"ASCENDING":return"asc";case"DESCENDING":return"desc";default:return}}(m.direction))}(h))}(r.orderBy));let l=null;r.limit&&(l=function(f){let h;return h=typeof f=="object"?f.value:f,G2(h)?null:h}(r.limit));let c=null;r.startAt&&(c=function(f){const h=!!f.before,A=f.values||[];return new rv(A,h)}(r.startAt));let u=null;return r.endAt&&(u=function(f){const h=!f.before,A=f.values||[];return new rv(A,h)}(r.endAt)),Cge(e,a,i,s,l,"F",c,u)}function exe(t,e){const r=function(a){switch(a){case"TargetPurposeListen":return null;case"TargetPurposeExistenceFilterMismatch":return"existence-filter-mismatch";case"TargetPurposeExistenceFilterMismatchBloom":return"existence-filter-mismatch-bloom";case"TargetPurposeLimboResolution":return"limbo-document";default:return Ur()}}(e.purpose);return r==null?null:{"goog-listen-tags":r}}function aJ(t){return t.unaryFilter!==void 0?function(r){switch(r.unaryFilter.op){case"IS_NAN":const n=Zg(r.unaryFilter.field);return Ln.create(n,"==",{doubleValue:NaN});case"IS_NULL":const a=Zg(r.unaryFilter.field);return Ln.create(a,"==",{nullValue:"NULL_VALUE"});case"IS_NOT_NAN":const s=Zg(r.unaryFilter.field);return Ln.create(s,"!=",{doubleValue:NaN});case"IS_NOT_NULL":const i=Zg(r.unaryFilter.field);return Ln.create(i,"!=",{nullValue:"NULL_VALUE"});default:return Ur()}}(t):t.fieldFilter!==void 0?function(r){return Ln.create(Zg(r.fieldFilter.field),function(a){switch(a){case"EQUAL":return"==";case"NOT_EQUAL":return"!=";case"GREATER_THAN":return">";case"GREATER_THAN_OR_EQUAL":return">=";case"LESS_THAN":return"<";case"LESS_THAN_OR_EQUAL":return"<=";case"ARRAY_CONTAINS":return"array-contains";case"IN":return"in";case"NOT_IN":return"not-in";case"ARRAY_CONTAINS_ANY":return"array-contains-any";default:return Ur()}}(r.fieldFilter.op),r.fieldFilter.value)}(t):t.compositeFilter!==void 0?function(r){return Na.create(r.compositeFilter.filters.map(n=>aJ(n)),function(a){switch(a){case"AND":return"and";case"OR":return"or";default:return Ur()}}(r.compositeFilter.op))}(t):Ur()}function txe(t){return Kge[t]}function rxe(t){return Gge[t]}function nxe(t){return qge[t]}function Jg(t){return{fieldPath:t.canonicalString()}}function Zg(t){return hs.fromServerFormat(t.fieldPath)}function sJ(t){return t instanceof Ln?function(r){if(r.op==="=="){if(gU(r.value))return{unaryFilter:{field:Jg(r.field),op:"IS_NAN"}};if(pU(r.value))return{unaryFilter:{field:Jg(r.field),op:"IS_NULL"}}}else if(r.op==="!="){if(gU(r.value))return{unaryFilter:{field:Jg(r.field),op:"IS_NOT_NAN"}};if(pU(r.value))return{unaryFilter:{field:Jg(r.field),op:"IS_NOT_NULL"}}}return{fieldFilter:{field:Jg(r.field),op:rxe(r.op),value:r.value}}}(t):t instanceof Na?function(r){const n=r.getFilters().map(a=>sJ(a));return n.length===1?n[0]:{compositeFilter:{op:nxe(r.op),filters:n}}}(t):Ur()}function axe(t){const e=[];return t.fields.forEach(r=>e.push(r.canonicalString())),{fieldPaths:e}}function iJ(t){return t.length>=4&&t.get(0)==="projects"&&t.get(2)==="databases"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class pA{constructor(e,r,n,a,s=zr.min(),i=zr.min(),l=fi.EMPTY_BYTE_STRING,c=null){this.target=e,this.targetId=r,this.purpose=n,this.sequenceNumber=a,this.snapshotVersion=s,this.lastLimboFreeSnapshotVersion=i,this.resumeToken=l,this.expectedCount=c}withSequenceNumber(e){return new pA(this.target,this.targetId,this.purpose,e,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,this.expectedCount)}withResumeToken(e,r){return new pA(this.target,this.targetId,this.purpose,this.sequenceNumber,r,this.lastLimboFreeSnapshotVersion,e,null)}withExpectedCount(e){return new pA(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,e)}withLastLimboFreeSnapshotVersion(e){return new pA(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,e,this.resumeToken,this.expectedCount)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class oJ{constructor(e){this.ct=e}}function sxe(t,e){let r;if(e.document)r=Xge(t.ct,e.document,!!e.hasCommittedMutations);else if(e.noDocument){const n=jr.fromSegments(e.noDocument.path),a=jp(e.noDocument.readTime);r=As.newNoDocument(n,a),e.hasCommittedMutations&&r.setHasCommittedMutations()}else{if(!e.unknownDocument)return Ur();{const n=jr.fromSegments(e.unknownDocument.path),a=jp(e.unknownDocument.version);r=As.newUnknownDocument(n,a)}}return e.readTime&&r.setReadTime(function(a){const s=new fr(a[0],a[1]);return zr.fromTimestamp(s)}(e.readTime)),r}function OU(t,e){const r=e.key,n={prefixPath:r.getCollectionPath().popLast().toArray(),collectionGroup:r.collectionGroup,documentId:r.path.lastSegment(),readTime:TE(e.readTime),hasCommittedMutations:e.hasCommittedMutations};if(e.isFoundDocument())n.document=function(s,i){return{name:Hb(s,i.key),fields:i.data.value.mapValue.fields,updateTime:iv(s,i.version.toTimestamp()),createTime:iv(s,i.createTime.toTimestamp())}}(t.ct,e);else if(e.isNoDocument())n.noDocument={path:r.path.toArray(),readTime:Ip(e.version)};else{if(!e.isUnknownDocument())return Ur();n.unknownDocument={path:r.path.toArray(),version:Ip(e.version)}}return n}function TE(t){const e=t.toTimestamp();return[e.seconds,e.nanoseconds]}function Ip(t){const e=t.toTimestamp();return{seconds:e.seconds,nanoseconds:e.nanoseconds}}function jp(t){const e=new fr(t.seconds,t.nanoseconds);return zr.fromTimestamp(e)}function Rm(t,e){const r=(e.baseMutations||[]).map(s=>sT(t.ct,s));for(let s=0;s<e.mutations.length-1;++s){const i=e.mutations[s];if(s+1<e.mutations.length&&e.mutations[s+1].transform!==void 0){const l=e.mutations[s+1];i.updateTransforms=l.transform.fieldTransforms,e.mutations.splice(s+1,1),++s}}const n=e.mutations.map(s=>sT(t.ct,s)),a=fr.fromMillis(e.localWriteTimeMs);return new zO(e.batchId,a,r,n)}function uy(t){const e=jp(t.readTime),r=t.lastLimboFreeSnapshotVersion!==void 0?jp(t.lastLimboFreeSnapshotVersion):zr.min();let n;return n=function(s){return s.documents!==void 0}(t.query)?function(s){return Kr(s.documents.length===1),Qu(z2(ZY(s.documents[0])))}(t.query):function(s){return Qu(nJ(s))}(t.query),new pA(n,t.targetId,"TargetPurposeListen",t.lastListenSequenceNumber,e,r,fi.fromBase64String(t.resumeToken))}function lJ(t,e){const r=Ip(e.snapshotVersion),n=Ip(e.lastLimboFreeSnapshotVersion);let a;a=jE(e.target)?tJ(t.ct,e.target):rJ(t.ct,e.target)._t;const s=e.resumeToken.toBase64();return{targetId:e.targetId,canonicalId:Sp(e.target),readTime:r,resumeToken:s,lastListenSequenceNumber:e.sequenceNumber,lastLimboFreeSnapshotVersion:n,query:a}}function cJ(t){const e=nJ({parent:t.parent,structuredQuery:t.structuredQuery});return t.limitType==="LAST"?PE(e,e.limit,"L"):e}function Uj(t,e){return new XO(e.largestBatchId,sT(t.ct,e.overlayMutation))}function DU(t,e){const r=e.path.lastSegment();return[t,Ql(e.path.popLast()),r]}function RU(t,e,r,n){return{indexId:t,uid:e,sequenceNumber:r,readTime:Ip(n.readTime),documentKey:Ql(n.documentKey.path),largestBatchId:n.largestBatchId}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ixe{getBundleMetadata(e,r){return MU(e).get(r).next(n=>{if(n)return function(s){return{id:s.bundleId,createTime:jp(s.createTime),version:s.version}}(n)})}saveBundleMetadata(e,r){return MU(e).put(function(a){return{bundleId:a.id,createTime:Ip(po(a.createTime)),version:a.version}}(r))}getNamedQuery(e,r){return LU(e).get(r).next(n=>{if(n)return function(s){return{name:s.name,query:cJ(s.bundledQuery),readTime:jp(s.readTime)}}(n)})}saveNamedQuery(e,r){return LU(e).put(function(a){return{name:a.name,readTime:Ip(po(a.readTime)),bundledQuery:a.bundledQuery}}(r))}}function MU(t){return qi(t,"bundles")}function LU(t){return qi(t,"namedQueries")}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class HI{constructor(e,r){this.serializer=e,this.userId=r}static lt(e,r){const n=r.uid||"";return new HI(e,n)}getOverlay(e,r){return S1(e).get(DU(this.userId,r)).next(n=>n?Uj(this.serializer,n):null)}getOverlays(e,r){const n=mf();return Ft.forEach(r,a=>this.getOverlay(e,a).next(s=>{s!==null&&n.set(a,s)})).next(()=>n)}saveOverlays(e,r,n){const a=[];return n.forEach((s,i)=>{const l=new XO(r,i);a.push(this.ht(e,l))}),Ft.waitFor(a)}removeOverlaysForBatchId(e,r,n){const a=new Set;r.forEach(i=>a.add(Ql(i.getCollectionPath())));const s=[];return a.forEach(i=>{const l=IDBKeyRange.bound([this.userId,i,n],[this.userId,i,n+1],!1,!0);s.push(S1(e).j("collectionPathOverlayIndex",l))}),Ft.waitFor(s)}getOverlaysForCollection(e,r,n){const a=mf(),s=Ql(r),i=IDBKeyRange.bound([this.userId,s,n],[this.userId,s,Number.POSITIVE_INFINITY],!0);return S1(e).U("collectionPathOverlayIndex",i).next(l=>{for(const c of l){const u=Uj(this.serializer,c);a.set(u.getKey(),u)}return a})}getOverlaysForCollectionGroup(e,r,n,a){const s=mf();let i;const l=IDBKeyRange.bound([this.userId,r,n],[this.userId,r,Number.POSITIVE_INFINITY],!0);return S1(e).J({index:"collectionGroupOverlayIndex",range:l},(c,u,d)=>{const f=Uj(this.serializer,u);s.size()<a||f.largestBatchId===i?(s.set(f.getKey(),f),i=f.largestBatchId):d.done()}).next(()=>s)}ht(e,r){return S1(e).put(function(a,s,i){const[l,c,u]=DU(s,i.mutation.key);return{userId:s,collectionPath:c,documentId:u,collectionGroup:i.mutation.key.getCollectionGroup(),largestBatchId:i.largestBatchId,overlayMutation:$b(a.ct,i.mutation)}}(this.serializer,this.userId,r))}}function S1(t){return qi(t,"documentOverlays")}/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class oxe{Pt(e){return qi(e,"globals")}getSessionToken(e){return this.Pt(e).get("sessionToken").next(r=>{const n=r==null?void 0:r.value;return n?fi.fromUint8Array(n):fi.EMPTY_BYTE_STRING})}setSessionToken(e,r){return this.Pt(e).put({name:"sessionToken",value:r.toUint8Array()})}}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Mm{constructor(){}It(e,r){this.Tt(e,r),r.Et()}Tt(e,r){if("nullValue"in e)this.dt(r,5);else if("booleanValue"in e)this.dt(r,10),r.At(e.booleanValue?1:0);else if("integerValue"in e)this.dt(r,15),r.At(ds(e.integerValue));else if("doubleValue"in e){const n=ds(e.doubleValue);isNaN(n)?this.dt(r,13):(this.dt(r,15),Ob(n)?r.At(0):r.At(n))}else if("timestampValue"in e){let n=e.timestampValue;this.dt(r,20),typeof n=="string"&&(n=MA(n)),r.Rt(`${n.seconds||""}`),r.At(n.nanos||0)}else if("stringValue"in e)this.Vt(e.stringValue,r),this.ft(r);else if("bytesValue"in e)this.dt(r,30),r.gt(M0(e.bytesValue)),this.ft(r);else if("referenceValue"in e)this.yt(e.referenceValue,r);else if("geoPointValue"in e){const n=e.geoPointValue;this.dt(r,45),r.At(n.latitude||0),r.At(n.longitude||0)}else"mapValue"in e?NY(e)?this.dt(r,Number.MAX_SAFE_INTEGER):MI(e)?this.wt(e.mapValue,r):(this.St(e.mapValue,r),this.ft(r)):"arrayValue"in e?(this.bt(e.arrayValue,r),this.ft(r)):Ur()}Vt(e,r){this.dt(r,25),this.Dt(e,r)}Dt(e,r){r.Rt(e)}St(e,r){const n=e.fields||{};this.dt(r,55);for(const a of Object.keys(n))this.Vt(a,r),this.Tt(n[a],r)}wt(e,r){var n,a;const s=e.fields||{};this.dt(r,53);const i="value",l=((a=(n=s[i].arrayValue)===null||n===void 0?void 0:n.values)===null||a===void 0?void 0:a.length)||0;this.dt(r,15),r.At(ds(l)),this.Vt(i,r),this.Tt(s[i],r)}bt(e,r){const n=e.values||[];this.dt(r,50);for(const a of n)this.Tt(a,r)}yt(e,r){this.dt(r,37),jr.fromName(e).path.forEach(n=>{this.dt(r,60),this.Dt(n,r)})}dt(e,r){e.At(r)}ft(e){e.At(2)}}Mm.vt=new Mm;function lxe(t){if(t===0)return 8;let e=0;return!(t>>4)&&(e+=4,t<<=4),!(t>>6)&&(e+=2,t<<=2),!(t>>7)&&(e+=1),e}function UU(t){const e=64-function(n){let a=0;for(let s=0;s<8;++s){const i=lxe(255&n[s]);if(a+=i,i!==8)break}return a}(t);return Math.ceil(e/8)}class cxe{constructor(){this.buffer=new Uint8Array(1024),this.position=0}Ct(e){const r=e[Symbol.iterator]();let n=r.next();for(;!n.done;)this.Ft(n.value),n=r.next();this.Mt()}xt(e){const r=e[Symbol.iterator]();let n=r.next();for(;!n.done;)this.Ot(n.value),n=r.next();this.Nt()}Lt(e){for(const r of e){const n=r.charCodeAt(0);if(n<128)this.Ft(n);else if(n<2048)this.Ft(960|n>>>6),this.Ft(128|63&n);else if(r<"\uD800"||"\uDBFF"<r)this.Ft(480|n>>>12),this.Ft(128|63&n>>>6),this.Ft(128|63&n);else{const a=r.codePointAt(0);this.Ft(240|a>>>18),this.Ft(128|63&a>>>12),this.Ft(128|63&a>>>6),this.Ft(128|63&a)}}this.Mt()}Bt(e){for(const r of e){const n=r.charCodeAt(0);if(n<128)this.Ot(n);else if(n<2048)this.Ot(960|n>>>6),this.Ot(128|63&n);else if(r<"\uD800"||"\uDBFF"<r)this.Ot(480|n>>>12),this.Ot(128|63&n>>>6),this.Ot(128|63&n);else{const a=r.codePointAt(0);this.Ot(240|a>>>18),this.Ot(128|63&a>>>12),this.Ot(128|63&a>>>6),this.Ot(128|63&a)}}this.Nt()}kt(e){const r=this.qt(e),n=UU(r);this.Qt(1+n),this.buffer[this.position++]=255&n;for(let a=r.length-n;a<r.length;++a)this.buffer[this.position++]=255&r[a]}Kt(e){const r=this.qt(e),n=UU(r);this.Qt(1+n),this.buffer[this.position++]=~(255&n);for(let a=r.length-n;a<r.length;++a)this.buffer[this.position++]=~(255&r[a])}$t(){this.Ut(255),this.Ut(255)}Wt(){this.Gt(255),this.Gt(255)}reset(){this.position=0}seed(e){this.Qt(e.length),this.buffer.set(e,this.position),this.position+=e.length}zt(){return this.buffer.slice(0,this.position)}qt(e){const r=function(s){const i=new DataView(new ArrayBuffer(8));return i.setFloat64(0,s,!1),new Uint8Array(i.buffer)}(e),n=(128&r[0])!=0;r[0]^=n?255:128;for(let a=1;a<r.length;++a)r[a]^=n?255:0;return r}Ft(e){const r=255&e;r===0?(this.Ut(0),this.Ut(255)):r===255?(this.Ut(255),this.Ut(0)):this.Ut(r)}Ot(e){const r=255&e;r===0?(this.Gt(0),this.Gt(255)):r===255?(this.Gt(255),this.Gt(0)):this.Gt(e)}Mt(){this.Ut(0),this.Ut(1)}Nt(){this.Gt(0),this.Gt(1)}Ut(e){this.Qt(1),this.buffer[this.position++]=e}Gt(e){this.Qt(1),this.buffer[this.position++]=~e}Qt(e){const r=e+this.position;if(r<=this.buffer.length)return;let n=2*this.buffer.length;n<r&&(n=r);const a=new Uint8Array(n);a.set(this.buffer),this.buffer=a}}class uxe{constructor(e){this.jt=e}gt(e){this.jt.Ct(e)}Rt(e){this.jt.Lt(e)}At(e){this.jt.kt(e)}Et(){this.jt.$t()}}class dxe{constructor(e){this.jt=e}gt(e){this.jt.xt(e)}Rt(e){this.jt.Bt(e)}At(e){this.jt.Kt(e)}Et(){this.jt.Wt()}}class I1{constructor(){this.jt=new cxe,this.Ht=new uxe(this.jt),this.Jt=new dxe(this.jt)}seed(e){this.jt.seed(e)}Yt(e){return e===0?this.Ht:this.Jt}zt(){return this.jt.zt()}reset(){this.jt.reset()}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Lm{constructor(e,r,n,a){this.indexId=e,this.documentKey=r,this.arrayValue=n,this.directionalValue=a}Zt(){const e=this.directionalValue.length,r=e===0||this.directionalValue[e-1]===255?e+1:e,n=new Uint8Array(r);return n.set(this.directionalValue,0),r!==e?n.set([0],this.directionalValue.length):++n[n.length-1],new Lm(this.indexId,this.documentKey,this.arrayValue,n)}}function Ph(t,e){let r=t.indexId-e.indexId;return r!==0?r:(r=QU(t.arrayValue,e.arrayValue),r!==0?r:(r=QU(t.directionalValue,e.directionalValue),r!==0?r:jr.comparator(t.documentKey,e.documentKey)))}function QU(t,e){for(let r=0;r<t.length&&r<e.length;++r){const n=t[r]-e[r];if(n!==0)return n}return t.length-e.length}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class VU{constructor(e){this.Xt=new Pa((r,n)=>hs.comparator(r.field,n.field)),this.collectionId=e.collectionGroup!=null?e.collectionGroup:e.path.lastSegment(),this.en=e.orderBy,this.tn=[];for(const r of e.filters){const n=r;n.isInequality()?this.Xt=this.Xt.add(n):this.tn.push(n)}}get nn(){return this.Xt.size>1}rn(e){if(Kr(e.collectionGroup===this.collectionId),this.nn)return!1;const r=zP(e);if(r!==void 0&&!this.sn(r))return!1;const n=jm(e);let a=new Set,s=0,i=0;for(;s<n.length&&this.sn(n[s]);++s)a=a.add(n[s].fieldPath.canonicalString());if(s===n.length)return!0;if(this.Xt.size>0){const l=this.Xt.getIterator().getNext();if(!a.has(l.field.canonicalString())){const c=n[s];if(!this.on(l,c)||!this._n(this.en[i++],c))return!1}++s}for(;s<n.length;++s){const l=n[s];if(i>=this.en.length||!this._n(this.en[i++],l))return!1}return!0}an(){if(this.nn)return null;let e=new Pa(hs.comparator);const r=[];for(const n of this.tn)if(!n.field.isKeyField())if(n.op==="array-contains"||n.op==="array-contains-any")r.push(new E_(n.field,2));else{if(e.has(n.field))continue;e=e.add(n.field),r.push(new E_(n.field,0))}for(const n of this.en)n.field.isKeyField()||e.has(n.field)||(e=e.add(n.field),r.push(new E_(n.field,n.dir==="asc"?0:1)));return new IE(IE.UNKNOWN_ID,this.collectionId,r,Fb.empty())}sn(e){for(const r of this.tn)if(this.on(r,e))return!0;return!1}on(e,r){if(e===void 0||!e.field.isEqual(r.fieldPath))return!1;const n=e.op==="array-contains"||e.op==="array-contains-any";return r.kind===2===n}_n(e,r){return!!e.field.isEqual(r.fieldPath)&&(r.kind===0&&e.dir==="asc"||r.kind===1&&e.dir==="desc")}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function uJ(t){var e,r;if(Kr(t instanceof Ln||t instanceof Na),t instanceof Ln){if(t instanceof TY){const a=((r=(e=t.value.arrayValue)===null||e===void 0?void 0:e.values)===null||r===void 0?void 0:r.map(s=>Ln.create(t.field,"==",s)))||[];return Na.create(a,"or")}return t}const n=t.filters.map(a=>uJ(a));return Na.create(n,t.op)}function fxe(t){if(t.getFilters().length===0)return[];const e=lT(uJ(t));return Kr(dJ(e)),iT(e)||oT(e)?[e]:e.getFilters()}function iT(t){return t instanceof Ln}function oT(t){return t instanceof Na&&KO(t)}function dJ(t){return iT(t)||oT(t)||function(r){if(r instanceof Na&&JP(r)){for(const n of r.getFilters())if(!iT(n)&&!oT(n))return!1;return!0}return!1}(t)}function lT(t){if(Kr(t instanceof Ln||t instanceof Na),t instanceof Ln)return t;if(t.filters.length===1)return lT(t.filters[0]);const e=t.filters.map(n=>lT(n));let r=Na.create(e,t.op);return r=kE(r),dJ(r)?r:(Kr(r instanceof Na),Kr(nv(r)),Kr(r.filters.length>1),r.filters.reduce((n,a)=>ZO(n,a)))}function ZO(t,e){let r;return Kr(t instanceof Ln||t instanceof Na),Kr(e instanceof Ln||e instanceof Na),r=t instanceof Ln?e instanceof Ln?function(a,s){return Na.create([a,s],"and")}(t,e):HU(t,e):e instanceof Ln?HU(e,t):function(a,s){if(Kr(a.filters.length>0&&s.filters.length>0),nv(a)&&nv(s))return jY(a,s.getFilters());const i=JP(a)?a:s,l=JP(a)?s:a,c=i.filters.map(u=>ZO(u,l));return Na.create(c,"or")}(t,e),kE(r)}function HU(t,e){if(nv(e))return jY(e,t.getFilters());{const r=e.filters.map(n=>ZO(t,n));return Na.create(r,"or")}}function kE(t){if(Kr(t instanceof Ln||t instanceof Na),t instanceof Ln)return t;const e=t.getFilters();if(e.length===1)return kE(e[0]);if(SY(t))return t;const r=e.map(a=>kE(a)),n=[];return r.forEach(a=>{a instanceof Ln?n.push(a):a instanceof Na&&(a.op===t.op?n.push(...a.filters):n.push(a))}),n.length===1?n[0]:Na.create(n,t.op)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Axe{constructor(){this.un=new e6}addToCollectionParentIndex(e,r){return this.un.add(r),Ft.resolve()}getCollectionParents(e,r){return Ft.resolve(this.un.getEntries(r))}addFieldIndex(e,r){return Ft.resolve()}deleteFieldIndex(e,r){return Ft.resolve()}deleteAllFieldIndexes(e){return Ft.resolve()}createTargetIndexes(e,r){return Ft.resolve()}getDocumentsMatchingTarget(e,r){return Ft.resolve(null)}getIndexType(e,r){return Ft.resolve(0)}getFieldIndexes(e,r){return Ft.resolve([])}getNextCollectionGroupToUpdate(e){return Ft.resolve(null)}getMinOffset(e,r){return Ft.resolve(Yc.min())}getMinOffsetFromCollectionGroup(e,r){return Ft.resolve(Yc.min())}updateCollectionGroup(e,r,n){return Ft.resolve()}updateIndexEntries(e,r){return Ft.resolve()}}class e6{constructor(){this.index={}}add(e){const r=e.lastSegment(),n=e.popLast(),a=this.index[r]||new Pa(ea.comparator),s=!a.has(n);return this.index[r]=a.add(n),s}has(e){const r=e.lastSegment(),n=e.popLast(),a=this.index[r];return a&&a.has(n)}getEntries(e){return(this.index[e]||new Pa(ea.comparator)).toArray()}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const CN=new Uint8Array(0);class hxe{constructor(e,r){this.databaseId=r,this.cn=new e6,this.ln=new nm(n=>Sp(n),(n,a)=>q2(n,a)),this.uid=e.uid||""}addToCollectionParentIndex(e,r){if(!this.cn.has(r)){const n=r.lastSegment(),a=r.popLast();e.addOnCommittedListener(()=>{this.cn.add(r)});const s={collectionId:n,parent:Ql(a)};return $U(e).put(s)}return Ft.resolve()}getCollectionParents(e,r){const n=[],a=IDBKeyRange.bound([r,""],[fY(r),""],!1,!0);return $U(e).U(a).next(s=>{for(const i of s){if(i.collectionId!==r)break;n.push(hf(i.parent))}return n})}addFieldIndex(e,r){const n=j1(e),a=function(l){return{indexId:l.indexId,collectionGroup:l.collectionGroup,fields:l.fields.map(c=>[c.fieldPath.canonicalString(),c.kind])}}(r);delete a.indexId;const s=n.add(a);if(r.indexState){const i=_g(e);return s.next(l=>{i.put(RU(l,this.uid,r.indexState.sequenceNumber,r.indexState.offset))})}return s.next()}deleteFieldIndex(e,r){const n=j1(e),a=_g(e),s=Cg(e);return n.delete(r.indexId).next(()=>a.delete(IDBKeyRange.bound([r.indexId],[r.indexId+1],!1,!0))).next(()=>s.delete(IDBKeyRange.bound([r.indexId],[r.indexId+1],!1,!0)))}deleteAllFieldIndexes(e){const r=j1(e),n=Cg(e),a=_g(e);return r.j().next(()=>n.j()).next(()=>a.j())}createTargetIndexes(e,r){return Ft.forEach(this.hn(r),n=>this.getIndexType(e,n).next(a=>{if(a===0||a===1){const s=new VU(n).an();if(s!=null)return this.addFieldIndex(e,s)}}))}getDocumentsMatchingTarget(e,r){const n=Cg(e);let a=!0;const s=new Map;return Ft.forEach(this.hn(r),i=>this.Pn(e,i).next(l=>{a&&(a=!!l),s.set(i,l)})).next(()=>{if(a){let i=Sn();const l=[];return Ft.forEach(s,(c,u)=>{mr("IndexedDbIndexManager",`Using index ${function(b){return`id=${b.indexId}|cg=${b.collectionGroup}|f=${b.fields.map(w=>`${w.fieldPath}:${w.kind}`).join(",")}`}(c)} to execute ${Sp(r)}`);const d=function(b,w){const j=zP(w);if(j===void 0)return null;for(const I of BE(b,j.fieldPath))switch(I.op){case"array-contains-any":return I.value.arrayValue.values||[];case"array-contains":return[I.value]}return null}(u,c),f=function(b,w){const j=new Map;for(const I of jm(w))for(const _ of BE(b,I.fieldPath))switch(_.op){case"==":case"in":j.set(I.fieldPath.canonicalString(),_.value);break;case"not-in":case"!=":return j.set(I.fieldPath.canonicalString(),_.value),Array.from(j.values())}return null}(u,c),h=function(b,w){const j=[];let I=!0;for(const _ of jm(w)){const E=_.kind===0?wU(b,_.fieldPath,b.startAt):NU(b,_.fieldPath,b.startAt);j.push(E.value),I&&(I=E.inclusive)}return new rv(j,I)}(u,c),A=function(b,w){const j=[];let I=!0;for(const _ of jm(w)){const E=_.kind===0?NU(b,_.fieldPath,b.endAt):wU(b,_.fieldPath,b.endAt);j.push(E.value),I&&(I=E.inclusive)}return new rv(j,I)}(u,c),m=this.In(c,u,h),p=this.In(c,u,A),g=this.Tn(c,u,f),x=this.En(c.indexId,d,m,h.inclusive,p,A.inclusive,g);return Ft.forEach(x,y=>n.G(y,r.limit).next(b=>{b.forEach(w=>{const j=jr.fromSegments(w.documentKey);i.has(j)||(i=i.add(j),l.push(j))})}))}).next(()=>l)}return Ft.resolve(null)})}hn(e){let r=this.ln.get(e);return r||(e.filters.length===0?r=[e]:r=fxe(Na.create(e.filters,"and")).map(n=>eT(e.path,e.collectionGroup,e.orderBy,n.getFilters(),e.limit,e.startAt,e.endAt)),this.ln.set(e,r),r)}En(e,r,n,a,s,i,l){const c=(r!=null?r.length:1)*Math.max(n.length,s.length),u=c/(r!=null?r.length:1),d=[];for(let f=0;f<c;++f){const h=r?this.dn(r[f/u]):CN,A=this.An(e,h,n[f%u],a),m=this.Rn(e,h,s[f%u],i),p=l.map(g=>this.An(e,h,g,!0));d.push(...this.createRange(A,m,p))}return d}An(e,r,n,a){const s=new Lm(e,jr.empty(),r,n);return a?s:s.Zt()}Rn(e,r,n,a){const s=new Lm(e,jr.empty(),r,n);return a?s.Zt():s}Pn(e,r){const n=new VU(r),a=r.collectionGroup!=null?r.collectionGroup:r.path.lastSegment();return this.getFieldIndexes(e,a).next(s=>{let i=null;for(const l of s)n.rn(l)&&(!i||l.fields.length>i.fields.length)&&(i=l);return i})}getIndexType(e,r){let n=2;const a=this.hn(r);return Ft.forEach(a,s=>this.Pn(e,s).next(i=>{i?n!==0&&i.fields.length<function(c){let u=new Pa(hs.comparator),d=!1;for(const f of c.filters)for(const h of f.getFlattenedFilters())h.field.isKeyField()||(h.op==="array-contains"||h.op==="array-contains-any"?d=!0:u=u.add(h.field));for(const f of c.orderBy)f.field.isKeyField()||(u=u.add(f.field));return u.size+(d?1:0)}(s)&&(n=1):n=0})).next(()=>function(i){return i.limit!==null}(r)&&a.length>1&&n===2?1:n)}Vn(e,r){const n=new I1;for(const a of jm(e)){const s=r.data.field(a.fieldPath);if(s==null)return null;const i=n.Yt(a.kind);Mm.vt.It(s,i)}return n.zt()}dn(e){const r=new I1;return Mm.vt.It(e,r.Yt(0)),r.zt()}mn(e,r){const n=new I1;return Mm.vt.It(Mb(this.databaseId,r),n.Yt(function(s){const i=jm(s);return i.length===0?0:i[i.length-1].kind}(e))),n.zt()}Tn(e,r,n){if(n===null)return[];let a=[];a.push(new I1);let s=0;for(const i of jm(e)){const l=n[s++];for(const c of a)if(this.fn(r,i.fieldPath)&&Lb(l))a=this.gn(a,i,l);else{const u=c.Yt(i.kind);Mm.vt.It(l,u)}}return this.pn(a)}In(e,r,n){return this.Tn(e,r,n.position)}pn(e){const r=[];for(let n=0;n<e.length;++n)r[n]=e[n].zt();return r}gn(e,r,n){const a=[...e],s=[];for(const i of n.arrayValue.values||[])for(const l of a){const c=new I1;c.seed(l.zt()),Mm.vt.It(i,c.Yt(r.kind)),s.push(c)}return s}fn(e,r){return!!e.filters.find(n=>n instanceof Ln&&n.field.isEqual(r)&&(n.op==="in"||n.op==="not-in"))}getFieldIndexes(e,r){const n=j1(e),a=_g(e);return(r?n.U("collectionGroupIndex",IDBKeyRange.bound(r,r)):n.U()).next(s=>{const i=[];return Ft.forEach(s,l=>a.get([l.indexId,this.uid]).next(c=>{i.push(function(d,f){const h=f?new Fb(f.sequenceNumber,new Yc(jp(f.readTime),new jr(hf(f.documentKey)),f.largestBatchId)):Fb.empty(),A=d.fields.map(([m,p])=>new E_(hs.fromServerFormat(m),p));return new IE(d.indexId,d.collectionGroup,A,h)}(l,c))})).next(()=>i)})}getNextCollectionGroupToUpdate(e){return this.getFieldIndexes(e).next(r=>r.length===0?null:(r.sort((n,a)=>{const s=n.indexState.sequenceNumber-a.indexState.sequenceNumber;return s!==0?s:gn(n.collectionGroup,a.collectionGroup)}),r[0].collectionGroup))}updateCollectionGroup(e,r,n){const a=j1(e),s=_g(e);return this.yn(e).next(i=>a.U("collectionGroupIndex",IDBKeyRange.bound(r,r)).next(l=>Ft.forEach(l,c=>s.put(RU(c.indexId,this.uid,i,n)))))}updateIndexEntries(e,r){const n=new Map;return Ft.forEach(r,(a,s)=>{const i=n.get(a.collectionGroup);return(i?Ft.resolve(i):this.getFieldIndexes(e,a.collectionGroup)).next(l=>(n.set(a.collectionGroup,l),Ft.forEach(l,c=>this.wn(e,a,c).next(u=>{const d=this.Sn(s,c);return u.isEqual(d)?Ft.resolve():this.bn(e,s,c,u,d)}))))})}Dn(e,r,n,a){return Cg(e).put({indexId:a.indexId,uid:this.uid,arrayValue:a.arrayValue,directionalValue:a.directionalValue,orderedDocumentKey:this.mn(n,r.key),documentKey:r.key.path.toArray()})}vn(e,r,n,a){return Cg(e).delete([a.indexId,this.uid,a.arrayValue,a.directionalValue,this.mn(n,r.key),r.key.path.toArray()])}wn(e,r,n){const a=Cg(e);let s=new Pa(Ph);return a.J({index:"documentKeyIndex",range:IDBKeyRange.only([n.indexId,this.uid,this.mn(n,r)])},(i,l)=>{s=s.add(new Lm(n.indexId,r,l.arrayValue,l.directionalValue))}).next(()=>s)}Sn(e,r){let n=new Pa(Ph);const a=this.Vn(r,e);if(a==null)return n;const s=zP(r);if(s!=null){const i=e.data.field(s.fieldPath);if(Lb(i))for(const l of i.arrayValue.values||[])n=n.add(new Lm(r.indexId,e.key,this.dn(l),a))}else n=n.add(new Lm(r.indexId,e.key,CN,a));return n}bn(e,r,n,a,s){mr("IndexedDbIndexManager","Updating index entries for document '%s'",r.key);const i=[];return function(c,u,d,f,h){const A=c.getIterator(),m=u.getIterator();let p=Ng(A),g=Ng(m);for(;p||g;){let x=!1,y=!1;if(p&&g){const b=d(p,g);b<0?y=!0:b>0&&(x=!0)}else p!=null?y=!0:x=!0;x?(f(g),g=Ng(m)):y?(h(p),p=Ng(A)):(p=Ng(A),g=Ng(m))}}(a,s,Ph,l=>{i.push(this.Dn(e,r,n,l))},l=>{i.push(this.vn(e,r,n,l))}),Ft.waitFor(i)}yn(e){let r=1;return _g(e).J({index:"sequenceNumberIndex",reverse:!0,range:IDBKeyRange.upperBound([this.uid,Number.MAX_SAFE_INTEGER])},(n,a,s)=>{s.done(),r=a.sequenceNumber+1}).next(()=>r)}createRange(e,r,n){n=n.sort((i,l)=>Ph(i,l)).filter((i,l,c)=>!l||Ph(i,c[l-1])!==0);const a=[];a.push(e);for(const i of n){const l=Ph(i,e),c=Ph(i,r);if(l===0)a[0]=e.Zt();else if(l>0&&c<0)a.push(i),a.push(i.Zt());else if(c>0)break}a.push(r);const s=[];for(let i=0;i<a.length;i+=2){if(this.Cn(a[i],a[i+1]))return[];const l=[a[i].indexId,this.uid,a[i].arrayValue,a[i].directionalValue,CN,[]],c=[a[i+1].indexId,this.uid,a[i+1].arrayValue,a[i+1].directionalValue,CN,[]];s.push(IDBKeyRange.bound(l,c))}return s}Cn(e,r){return Ph(e,r)>0}getMinOffsetFromCollectionGroup(e,r){return this.getFieldIndexes(e,r).next(KU)}getMinOffset(e,r){return Ft.mapArray(this.hn(r),n=>this.Pn(e,n).next(a=>a||Ur())).next(KU)}}function $U(t){return qi(t,"collectionParents")}function Cg(t){return qi(t,"indexEntries")}function j1(t){return qi(t,"indexConfiguration")}function _g(t){return qi(t,"indexState")}function KU(t){Kr(t.length!==0);let e=t[0].indexState.offset,r=e.largestBatchId;for(let n=1;n<t.length;n++){const a=t[n].indexState.offset;UO(a,e)<0&&(e=a),r<a.largestBatchId&&(r=a.largestBatchId)}return new Yc(e.readTime,e.documentKey,r)}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const GU={didRun:!1,sequenceNumbersCollected:0,targetsRemoved:0,documentsRemoved:0};class ac{constructor(e,r,n){this.cacheSizeCollectionThreshold=e,this.percentileToCollect=r,this.maximumSequenceNumbersToCollect=n}static withCacheSize(e){return new ac(e,ac.DEFAULT_COLLECTION_PERCENTILE,ac.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function fJ(t,e,r){const n=t.store("mutations"),a=t.store("documentMutations"),s=[],i=IDBKeyRange.only(r.batchId);let l=0;const c=n.J({range:i},(d,f,h)=>(l++,h.delete()));s.push(c.next(()=>{Kr(l===1)}));const u=[];for(const d of r.mutations){const f=gY(e,d.key.path,r.batchId);s.push(a.delete(f)),u.push(d.key)}return Ft.waitFor(s).next(()=>u)}function FE(t){if(!t)return 0;let e;if(t.document)e=t.document;else if(t.unknownDocument)e=t.unknownDocument;else{if(!t.noDocument)throw Ur();e=t.noDocument}return JSON.stringify(e).length}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */ac.DEFAULT_COLLECTION_PERCENTILE=10,ac.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT=1e3,ac.DEFAULT=new ac(41943040,ac.DEFAULT_COLLECTION_PERCENTILE,ac.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT),ac.DISABLED=new ac(-1,0,0);class $I{constructor(e,r,n,a){this.userId=e,this.serializer=r,this.indexManager=n,this.referenceDelegate=a,this.Fn={}}static lt(e,r,n,a){Kr(e.uid!=="");const s=e.isAuthenticated()?e.uid:"";return new $I(s,r,n,a)}checkEmpty(e){let r=!0;const n=IDBKeyRange.bound([this.userId,Number.NEGATIVE_INFINITY],[this.userId,Number.POSITIVE_INFINITY]);return Th(e).J({index:"userMutationsIndex",range:n},(a,s,i)=>{r=!1,i.done()}).next(()=>r)}addMutationBatch(e,r,n,a){const s=ex(e),i=Th(e);return i.add({}).next(l=>{Kr(typeof l=="number");const c=new zO(l,r,n,a),u=function(A,m,p){const g=p.baseMutations.map(y=>$b(A.ct,y)),x=p.mutations.map(y=>$b(A.ct,y));return{userId:m,batchId:p.batchId,localWriteTimeMs:p.localWriteTime.toMillis(),baseMutations:g,mutations:x}}(this.serializer,this.userId,c),d=[];let f=new Pa((h,A)=>gn(h.canonicalString(),A.canonicalString()));for(const h of a){const A=gY(this.userId,h.key.path,l);f=f.add(h.key.path.popLast()),d.push(i.put(u)),d.push(s.put(A,zpe))}return f.forEach(h=>{d.push(this.indexManager.addToCollectionParentIndex(e,h))}),e.addOnCommittedListener(()=>{this.Fn[l]=c.keys()}),Ft.waitFor(d).next(()=>c)})}lookupMutationBatch(e,r){return Th(e).get(r).next(n=>n?(Kr(n.userId===this.userId),Rm(this.serializer,n)):null)}Mn(e,r){return this.Fn[r]?Ft.resolve(this.Fn[r]):this.lookupMutationBatch(e,r).next(n=>{if(n){const a=n.keys();return this.Fn[r]=a,a}return null})}getNextMutationBatchAfterBatchId(e,r){const n=r+1,a=IDBKeyRange.lowerBound([this.userId,n]);let s=null;return Th(e).J({index:"userMutationsIndex",range:a},(i,l,c)=>{l.userId===this.userId&&(Kr(l.batchId>=n),s=Rm(this.serializer,l)),c.done()}).next(()=>s)}getHighestUnacknowledgedBatchId(e){const r=IDBKeyRange.upperBound([this.userId,Number.POSITIVE_INFINITY]);let n=-1;return Th(e).J({index:"userMutationsIndex",range:r,reverse:!0},(a,s,i)=>{n=s.batchId,i.done()}).next(()=>n)}getAllMutationBatches(e){const r=IDBKeyRange.bound([this.userId,-1],[this.userId,Number.POSITIVE_INFINITY]);return Th(e).U("userMutationsIndex",r).next(n=>n.map(a=>Rm(this.serializer,a)))}getAllMutationBatchesAffectingDocumentKey(e,r){const n=S_(this.userId,r.path),a=IDBKeyRange.lowerBound(n),s=[];return ex(e).J({range:a},(i,l,c)=>{const[u,d,f]=i,h=hf(d);if(u===this.userId&&r.path.isEqual(h))return Th(e).get(f).next(A=>{if(!A)throw Ur();Kr(A.userId===this.userId),s.push(Rm(this.serializer,A))});c.done()}).next(()=>s)}getAllMutationBatchesAffectingDocumentKeys(e,r){let n=new Pa(gn);const a=[];return r.forEach(s=>{const i=S_(this.userId,s.path),l=IDBKeyRange.lowerBound(i),c=ex(e).J({range:l},(u,d,f)=>{const[h,A,m]=u,p=hf(A);h===this.userId&&s.path.isEqual(p)?n=n.add(m):f.done()});a.push(c)}),Ft.waitFor(a).next(()=>this.xn(e,n))}getAllMutationBatchesAffectingQuery(e,r){const n=r.path,a=n.length+1,s=S_(this.userId,n),i=IDBKeyRange.lowerBound(s);let l=new Pa(gn);return ex(e).J({range:i},(c,u,d)=>{const[f,h,A]=c,m=hf(h);f===this.userId&&n.isPrefixOf(m)?m.length===a&&(l=l.add(A)):d.done()}).next(()=>this.xn(e,l))}xn(e,r){const n=[],a=[];return r.forEach(s=>{a.push(Th(e).get(s).next(i=>{if(i===null)throw Ur();Kr(i.userId===this.userId),n.push(Rm(this.serializer,i))}))}),Ft.waitFor(a).next(()=>n)}removeMutationBatch(e,r){return fJ(e._e,this.userId,r).next(n=>(e.addOnCommittedListener(()=>{this.On(r.batchId)}),Ft.forEach(n,a=>this.referenceDelegate.markPotentiallyOrphaned(e,a))))}On(e){delete this.Fn[e]}performConsistencyCheck(e){return this.checkEmpty(e).next(r=>{if(!r)return Ft.resolve();const n=IDBKeyRange.lowerBound(function(i){return[i]}(this.userId)),a=[];return ex(e).J({range:n},(s,i,l)=>{if(s[0]===this.userId){const c=hf(s[1]);a.push(c)}else l.done()}).next(()=>{Kr(a.length===0)})})}containsKey(e,r){return AJ(e,this.userId,r)}Nn(e){return hJ(e).get(this.userId).next(r=>r||{userId:this.userId,lastAcknowledgedBatchId:-1,lastStreamToken:""})}}function AJ(t,e,r){const n=S_(e,r.path),a=n[1],s=IDBKeyRange.lowerBound(n);let i=!1;return ex(t).J({range:s,H:!0},(l,c,u)=>{const[d,f,h]=l;d===e&&f===a&&(i=!0),u.done()}).next(()=>i)}function Th(t){return qi(t,"mutations")}function ex(t){return qi(t,"documentMutations")}function hJ(t){return qi(t,"mutationQueues")}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Bp{constructor(e){this.Ln=e}next(){return this.Ln+=2,this.Ln}static Bn(){return new Bp(0)}static kn(){return new Bp(-1)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class mxe{constructor(e,r){this.referenceDelegate=e,this.serializer=r}allocateTargetId(e){return this.qn(e).next(r=>{const n=new Bp(r.highestTargetId);return r.highestTargetId=n.next(),this.Qn(e,r).next(()=>r.highestTargetId)})}getLastRemoteSnapshotVersion(e){return this.qn(e).next(r=>zr.fromTimestamp(new fr(r.lastRemoteSnapshotVersion.seconds,r.lastRemoteSnapshotVersion.nanoseconds)))}getHighestSequenceNumber(e){return this.qn(e).next(r=>r.highestListenSequenceNumber)}setTargetsMetadata(e,r,n){return this.qn(e).next(a=>(a.highestListenSequenceNumber=r,n&&(a.lastRemoteSnapshotVersion=n.toTimestamp()),r>a.highestListenSequenceNumber&&(a.highestListenSequenceNumber=r),this.Qn(e,a)))}addTargetData(e,r){return this.Kn(e,r).next(()=>this.qn(e).next(n=>(n.targetCount+=1,this.$n(r,n),this.Qn(e,n))))}updateTargetData(e,r){return this.Kn(e,r)}removeTargetData(e,r){return this.removeMatchingKeysForTargetId(e,r.targetId).next(()=>Eg(e).delete(r.targetId)).next(()=>this.qn(e)).next(n=>(Kr(n.targetCount>0),n.targetCount-=1,this.Qn(e,n)))}removeTargets(e,r,n){let a=0;const s=[];return Eg(e).J((i,l)=>{const c=uy(l);c.sequenceNumber<=r&&n.get(c.targetId)===null&&(a++,s.push(this.removeTargetData(e,c)))}).next(()=>Ft.waitFor(s)).next(()=>a)}forEachTarget(e,r){return Eg(e).J((n,a)=>{const s=uy(a);r(s)})}qn(e){return qU(e).get("targetGlobalKey").next(r=>(Kr(r!==null),r))}Qn(e,r){return qU(e).put("targetGlobalKey",r)}Kn(e,r){return Eg(e).put(lJ(this.serializer,r))}$n(e,r){let n=!1;return e.targetId>r.highestTargetId&&(r.highestTargetId=e.targetId,n=!0),e.sequenceNumber>r.highestListenSequenceNumber&&(r.highestListenSequenceNumber=e.sequenceNumber,n=!0),n}getTargetCount(e){return this.qn(e).next(r=>r.targetCount)}getTargetData(e,r){const n=Sp(r),a=IDBKeyRange.bound([n,Number.NEGATIVE_INFINITY],[n,Number.POSITIVE_INFINITY]);let s=null;return Eg(e).J({range:a,index:"queryTargetsIndex"},(i,l,c)=>{const u=uy(l);q2(r,u.target)&&(s=u,c.done())}).next(()=>s)}addMatchingKeys(e,r,n){const a=[],s=n0(e);return r.forEach(i=>{const l=Ql(i.path);a.push(s.put({targetId:n,path:l})),a.push(this.referenceDelegate.addReference(e,n,i))}),Ft.waitFor(a)}removeMatchingKeys(e,r,n){const a=n0(e);return Ft.forEach(r,s=>{const i=Ql(s.path);return Ft.waitFor([a.delete([n,i]),this.referenceDelegate.removeReference(e,n,s)])})}removeMatchingKeysForTargetId(e,r){const n=n0(e),a=IDBKeyRange.bound([r],[r+1],!1,!0);return n.delete(a)}getMatchingKeysForTargetId(e,r){const n=IDBKeyRange.bound([r],[r+1],!1,!0),a=n0(e);let s=Sn();return a.J({range:n,H:!0},(i,l,c)=>{const u=hf(i[1]),d=new jr(u);s=s.add(d)}).next(()=>s)}containsKey(e,r){const n=Ql(r.path),a=IDBKeyRange.bound([n],[fY(n)],!1,!0);let s=0;return n0(e).J({index:"documentTargetsIndex",H:!0,range:a},([i,l],c,u)=>{i!==0&&(s++,u.done())}).next(()=>s>0)}ot(e,r){return Eg(e).get(r).next(n=>n?uy(n):null)}}function Eg(t){return qi(t,"targets")}function qU(t){return qi(t,"targetGlobal")}function n0(t){return qi(t,"targetDocuments")}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function zU([t,e],[r,n]){const a=gn(t,r);return a===0?gn(e,n):a}class pxe{constructor(e){this.Un=e,this.buffer=new Pa(zU),this.Wn=0}Gn(){return++this.Wn}zn(e){const r=[e,this.Gn()];if(this.buffer.size<this.Un)this.buffer=this.buffer.add(r);else{const n=this.buffer.last();zU(r,n)<0&&(this.buffer=this.buffer.delete(n).add(r))}}get maxValue(){return this.buffer.last()[0]}}class gxe{constructor(e,r,n){this.garbageCollector=e,this.asyncQueue=r,this.localStore=n,this.jn=null}start(){this.garbageCollector.params.cacheSizeCollectionThreshold!==-1&&this.Hn(6e4)}stop(){this.jn&&(this.jn.cancel(),this.jn=null)}get started(){return this.jn!==null}Hn(e){mr("LruGarbageCollector",`Garbage collection scheduled in ${e}ms`),this.jn=this.asyncQueue.enqueueAfterDelay("lru_garbage_collection",e,async()=>{this.jn=null;try{await this.localStore.collectGarbage(this.garbageCollector)}catch(r){rm(r)?mr("LruGarbageCollector","Ignoring IndexedDB error during garbage collection: ",r):await Xp(r)}await this.Hn(3e5)})}}class xxe{constructor(e,r){this.Jn=e,this.params=r}calculateTargetCount(e,r){return this.Jn.Yn(e).next(n=>Math.floor(r/100*n))}nthSequenceNumber(e,r){if(r===0)return Ft.resolve(Ou.oe);const n=new pxe(r);return this.Jn.forEachTarget(e,a=>n.zn(a.sequenceNumber)).next(()=>this.Jn.Zn(e,a=>n.zn(a))).next(()=>n.maxValue)}removeTargets(e,r,n){return this.Jn.removeTargets(e,r,n)}removeOrphanedDocuments(e,r){return this.Jn.removeOrphanedDocuments(e,r)}collect(e,r){return this.params.cacheSizeCollectionThreshold===-1?(mr("LruGarbageCollector","Garbage collection skipped; disabled"),Ft.resolve(GU)):this.getCacheSize(e).next(n=>n<this.params.cacheSizeCollectionThreshold?(mr("LruGarbageCollector",`Garbage collection skipped; Cache size ${n} is lower than threshold ${this.params.cacheSizeCollectionThreshold}`),GU):this.Xn(e,r))}getCacheSize(e){return this.Jn.getCacheSize(e)}Xn(e,r){let n,a,s,i,l,c,u;const d=Date.now();return this.calculateTargetCount(e,this.params.percentileToCollect).next(f=>(f>this.params.maximumSequenceNumbersToCollect?(mr("LruGarbageCollector",`Capping sequence numbers to collect down to the maximum of ${this.params.maximumSequenceNumbersToCollect} from ${f}`),a=this.params.maximumSequenceNumbersToCollect):a=f,i=Date.now(),this.nthSequenceNumber(e,a))).next(f=>(n=f,l=Date.now(),this.removeTargets(e,n,r))).next(f=>(s=f,c=Date.now(),this.removeOrphanedDocuments(e,n))).next(f=>(u=Date.now(),Xg()<=Mn.DEBUG&&mr("LruGarbageCollector",`LRU Garbage Collection
	Counted targets in ${i-d}ms
	Determined least recently used ${a} in `+(l-i)+`ms
	Removed ${s} targets in `+(c-l)+`ms
	Removed ${f} documents in `+(u-c)+`ms
Total Duration: ${u-d}ms`),Ft.resolve({didRun:!0,sequenceNumbersCollected:a,targetsRemoved:s,documentsRemoved:f})))}}function vxe(t,e){return new xxe(t,e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class yxe{constructor(e,r){this.db=e,this.garbageCollector=vxe(this,r)}Yn(e){const r=this.er(e);return this.db.getTargetCache().getTargetCount(e).next(n=>r.next(a=>n+a))}er(e){let r=0;return this.Zn(e,n=>{r++}).next(()=>r)}forEachTarget(e,r){return this.db.getTargetCache().forEachTarget(e,r)}Zn(e,r){return this.tr(e,(n,a)=>r(a))}addReference(e,r,n){return _N(e,n)}removeReference(e,r,n){return _N(e,n)}removeTargets(e,r,n){return this.db.getTargetCache().removeTargets(e,r,n)}markPotentiallyOrphaned(e,r){return _N(e,r)}nr(e,r){return function(a,s){let i=!1;return hJ(a).Y(l=>AJ(a,l,s).next(c=>(c&&(i=!0),Ft.resolve(!c)))).next(()=>i)}(e,r)}removeOrphanedDocuments(e,r){const n=this.db.getRemoteDocumentCache().newChangeBuffer(),a=[];let s=0;return this.tr(e,(i,l)=>{if(l<=r){const c=this.nr(e,i).next(u=>{if(!u)return s++,n.getEntry(e,i).next(()=>(n.removeEntry(i,zr.min()),n0(e).delete(function(f){return[0,Ql(f.path)]}(i))))});a.push(c)}}).next(()=>Ft.waitFor(a)).next(()=>n.apply(e)).next(()=>s)}removeTarget(e,r){const n=r.withSequenceNumber(e.currentSequenceNumber);return this.db.getTargetCache().updateTargetData(e,n)}updateLimboDocument(e,r){return _N(e,r)}tr(e,r){const n=n0(e);let a,s=Ou.oe;return n.J({index:"documentTargetsIndex"},([i,l],{path:c,sequenceNumber:u})=>{i===0?(s!==Ou.oe&&r(new jr(hf(a)),s),s=u,a=c):s=Ou.oe}).next(()=>{s!==Ou.oe&&r(new jr(hf(a)),s)})}getCacheSize(e){return this.db.getRemoteDocumentCache().getSize(e)}}function _N(t,e){return n0(t).put(function(n,a){return{targetId:0,path:Ql(n.path),sequenceNumber:a}}(e,t.currentSequenceNumber))}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class mJ{constructor(){this.changes=new nm(e=>e.toString(),(e,r)=>e.isEqual(r)),this.changesApplied=!1}addEntry(e){this.assertNotApplied(),this.changes.set(e.key,e)}removeEntry(e,r){this.assertNotApplied(),this.changes.set(e,As.newInvalidDocument(e).setReadTime(r))}getEntry(e,r){this.assertNotApplied();const n=this.changes.get(r);return n!==void 0?Ft.resolve(n):this.getFromCache(e,r)}getEntries(e,r){return this.getAllFromCache(e,r)}apply(e){return this.assertNotApplied(),this.changesApplied=!0,this.applyChanges(e)}assertNotApplied(){}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class bxe{constructor(e){this.serializer=e}setIndexManager(e){this.indexManager=e}addEntry(e,r,n){return gm(e).put(n)}removeEntry(e,r,n){return gm(e).delete(function(s,i){const l=s.path.toArray();return[l.slice(0,l.length-2),l[l.length-2],TE(i),l[l.length-1]]}(r,n))}updateMetadata(e,r){return this.getMetadata(e).next(n=>(n.byteSize+=r,this.rr(e,n)))}getEntry(e,r){let n=As.newInvalidDocument(r);return gm(e).J({index:"documentKeyIndex",range:IDBKeyRange.only(B1(r))},(a,s)=>{n=this.ir(r,s)}).next(()=>n)}sr(e,r){let n={size:0,document:As.newInvalidDocument(r)};return gm(e).J({index:"documentKeyIndex",range:IDBKeyRange.only(B1(r))},(a,s)=>{n={document:this.ir(r,s),size:FE(s)}}).next(()=>n)}getEntries(e,r){let n=$c();return this._r(e,r,(a,s)=>{const i=this.ir(a,s);n=n.insert(a,i)}).next(()=>n)}ar(e,r){let n=$c(),a=new xs(jr.comparator);return this._r(e,r,(s,i)=>{const l=this.ir(s,i);n=n.insert(s,l),a=a.insert(s,FE(i))}).next(()=>({documents:n,ur:a}))}_r(e,r,n){if(r.isEmpty())return Ft.resolve();let a=new Pa(YU);r.forEach(c=>a=a.add(c));const s=IDBKeyRange.bound(B1(a.first()),B1(a.last())),i=a.getIterator();let l=i.getNext();return gm(e).J({index:"documentKeyIndex",range:s},(c,u,d)=>{const f=jr.fromSegments([...u.prefixPath,u.collectionGroup,u.documentId]);for(;l&&YU(l,f)<0;)n(l,null),l=i.getNext();l&&l.isEqual(f)&&(n(l,u),l=i.hasNext()?i.getNext():null),l?d.$(B1(l)):d.done()}).next(()=>{for(;l;)n(l,null),l=i.hasNext()?i.getNext():null})}getDocumentsMatchingQuery(e,r,n,a,s){const i=r.path,l=[i.popLast().toArray(),i.lastSegment(),TE(n.readTime),n.documentKey.path.isEmpty()?"":n.documentKey.path.lastSegment()],c=[i.popLast().toArray(),i.lastSegment(),[Number.MAX_SAFE_INTEGER,Number.MAX_SAFE_INTEGER],""];return gm(e).U(IDBKeyRange.bound(l,c,!0)).next(u=>{s==null||s.incrementDocumentReadCount(u.length);let d=$c();for(const f of u){const h=this.ir(jr.fromSegments(f.prefixPath.concat(f.collectionGroup,f.documentId)),f);h.isFoundDocument()&&(W2(r,h)||a.has(h.key))&&(d=d.insert(h.key,h))}return d})}getAllFromCollectionGroup(e,r,n,a){let s=$c();const i=XU(r,n),l=XU(r,Yc.max());return gm(e).J({index:"collectionGroupIndex",range:IDBKeyRange.bound(i,l,!0)},(c,u,d)=>{const f=this.ir(jr.fromSegments(u.prefixPath.concat(u.collectionGroup,u.documentId)),u);s=s.insert(f.key,f),s.size===a&&d.done()}).next(()=>s)}newChangeBuffer(e){return new wxe(this,!!e&&e.trackRemovals)}getSize(e){return this.getMetadata(e).next(r=>r.byteSize)}getMetadata(e){return WU(e).get("remoteDocumentGlobalKey").next(r=>(Kr(!!r),r))}rr(e,r){return WU(e).put("remoteDocumentGlobalKey",r)}ir(e,r){if(r){const n=sxe(this.serializer,r);if(!(n.isNoDocument()&&n.version.isEqual(zr.min())))return n}return As.newInvalidDocument(e)}}function pJ(t){return new bxe(t)}class wxe extends mJ{constructor(e,r){super(),this.cr=e,this.trackRemovals=r,this.lr=new nm(n=>n.toString(),(n,a)=>n.isEqual(a))}applyChanges(e){const r=[];let n=0,a=new Pa((s,i)=>gn(s.canonicalString(),i.canonicalString()));return this.changes.forEach((s,i)=>{const l=this.lr.get(s);if(r.push(this.cr.removeEntry(e,s,l.readTime)),i.isValidDocument()){const c=OU(this.cr.serializer,i);a=a.add(s.path.popLast());const u=FE(c);n+=u-l.size,r.push(this.cr.addEntry(e,s,c))}else if(n-=l.size,this.trackRemovals){const c=OU(this.cr.serializer,i.convertToNoDocument(zr.min()));r.push(this.cr.addEntry(e,s,c))}}),a.forEach(s=>{r.push(this.cr.indexManager.addToCollectionParentIndex(e,s))}),r.push(this.cr.updateMetadata(e,n)),Ft.waitFor(r)}getFromCache(e,r){return this.cr.sr(e,r).next(n=>(this.lr.set(r,{size:n.size,readTime:n.document.readTime}),n.document))}getAllFromCache(e,r){return this.cr.ar(e,r).next(({documents:n,ur:a})=>(a.forEach((s,i)=>{this.lr.set(s,{size:i,readTime:n.get(s).readTime})}),n))}}function WU(t){return qi(t,"remoteDocumentGlobal")}function gm(t){return qi(t,"remoteDocumentsV14")}function B1(t){const e=t.path.toArray();return[e.slice(0,e.length-2),e[e.length-2],e[e.length-1]]}function XU(t,e){const r=e.documentKey.path.toArray();return[t,TE(e.readTime),r.slice(0,r.length-2),r.length>0?r[r.length-1]:""]}function YU(t,e){const r=t.path.toArray(),n=e.path.toArray();let a=0;for(let s=0;s<r.length-2&&s<n.length-2;++s)if(a=gn(r[s],n[s]),a)return a;return a=gn(r.length,n.length),a||(a=gn(r[r.length-2],n[n.length-2]),a||gn(r[r.length-1],n[n.length-1]))}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Nxe{constructor(e,r){this.overlayedDocument=e,this.mutatedFields=r}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class gJ{constructor(e,r,n,a){this.remoteDocumentCache=e,this.mutationQueue=r,this.documentOverlayCache=n,this.indexManager=a}getDocument(e,r){let n=null;return this.documentOverlayCache.getOverlay(e,r).next(a=>(n=a,this.remoteDocumentCache.getEntry(e,r))).next(a=>(n!==null&&Qy(n.mutation,a,cc.empty(),fr.now()),a))}getDocuments(e,r){return this.remoteDocumentCache.getEntries(e,r).next(n=>this.getLocalViewOfDocuments(e,n,Sn()).next(()=>n))}getLocalViewOfDocuments(e,r,n=Sn()){const a=mf();return this.populateOverlays(e,a,r).next(()=>this.computeViews(e,r,a,n).next(s=>{let i=ly();return s.forEach((l,c)=>{i=i.insert(l,c.overlayedDocument)}),i}))}getOverlayedDocuments(e,r){const n=mf();return this.populateOverlays(e,n,r).next(()=>this.computeViews(e,r,n,Sn()))}populateOverlays(e,r,n){const a=[];return n.forEach(s=>{r.has(s)||a.push(s)}),this.documentOverlayCache.getOverlays(e,a).next(s=>{s.forEach((i,l)=>{r.set(i,l)})})}computeViews(e,r,n,a){let s=$c();const i=Uy(),l=function(){return Uy()}();return r.forEach((c,u)=>{const d=n.get(u.key);a.has(u.key)&&(d===void 0||d.mutation instanceof eh)?s=s.insert(u.key,u):d!==void 0?(i.set(u.key,d.mutation.getFieldMask()),Qy(d.mutation,u,d.mutation.getFieldMask(),fr.now())):i.set(u.key,cc.empty())}),this.recalculateAndSaveOverlays(e,s).next(c=>(c.forEach((u,d)=>i.set(u,d)),r.forEach((u,d)=>{var f;return l.set(u,new Nxe(d,(f=i.get(u))!==null&&f!==void 0?f:null))}),l))}recalculateAndSaveOverlays(e,r){const n=Uy();let a=new xs((i,l)=>i-l),s=Sn();return this.mutationQueue.getAllMutationBatchesAffectingDocumentKeys(e,r).next(i=>{for(const l of i)l.keys().forEach(c=>{const u=r.get(c);if(u===null)return;let d=n.get(c)||cc.empty();d=l.applyToLocalView(u,d),n.set(c,d);const f=(a.get(l.batchId)||Sn()).add(c);a=a.insert(l.batchId,f)})}).next(()=>{const i=[],l=a.getReverseIterator();for(;l.hasNext();){const c=l.getNext(),u=c.key,d=c.value,f=MY();d.forEach(h=>{if(!s.has(h)){const A=$Y(r.get(h),n.get(h));A!==null&&f.set(h,A),s=s.add(h)}}),i.push(this.documentOverlayCache.saveOverlays(e,u,f))}return Ft.waitFor(i)}).next(()=>n)}recalculateAndSaveOverlaysForDocumentKeys(e,r){return this.remoteDocumentCache.getEntries(e,r).next(n=>this.recalculateAndSaveOverlays(e,n))}getDocumentsMatchingQuery(e,r,n,a){return function(i){return jr.isDocumentKey(i.path)&&i.collectionGroup===null&&i.filters.length===0}(r)?this.getDocumentsMatchingDocumentQuery(e,r.path):kY(r)?this.getDocumentsMatchingCollectionGroupQuery(e,r,n,a):this.getDocumentsMatchingCollectionQuery(e,r,n,a)}getNextDocuments(e,r,n,a){return this.remoteDocumentCache.getAllFromCollectionGroup(e,r,n,a).next(s=>{const i=a-s.size>0?this.documentOverlayCache.getOverlaysForCollectionGroup(e,r,n.largestBatchId,a-s.size):Ft.resolve(mf());let l=-1,c=s;return i.next(u=>Ft.forEach(u,(d,f)=>(l<f.largestBatchId&&(l=f.largestBatchId),s.get(d)?Ft.resolve():this.remoteDocumentCache.getEntry(e,d).next(h=>{c=c.insert(d,h)}))).next(()=>this.populateOverlays(e,u,s)).next(()=>this.computeViews(e,c,u,Sn())).next(d=>({batchId:l,changes:RY(d)})))})}getDocumentsMatchingDocumentQuery(e,r){return this.getDocument(e,new jr(r)).next(n=>{let a=ly();return n.isFoundDocument()&&(a=a.insert(n.key,n)),a})}getDocumentsMatchingCollectionGroupQuery(e,r,n,a){const s=r.collectionGroup;let i=ly();return this.indexManager.getCollectionParents(e,s).next(l=>Ft.forEach(l,c=>{const u=function(f,h){return new Pv(h,null,f.explicitOrderBy.slice(),f.filters.slice(),f.limit,f.limitType,f.startAt,f.endAt)}(r,c.child(s));return this.getDocumentsMatchingCollectionQuery(e,u,n,a).next(d=>{d.forEach((f,h)=>{i=i.insert(f,h)})})}).next(()=>i))}getDocumentsMatchingCollectionQuery(e,r,n,a){let s;return this.documentOverlayCache.getOverlaysForCollection(e,r.path,n.largestBatchId).next(i=>(s=i,this.remoteDocumentCache.getDocumentsMatchingQuery(e,r,n,s,a))).next(i=>{s.forEach((c,u)=>{const d=u.getKey();i.get(d)===null&&(i=i.insert(d,As.newInvalidDocument(d)))});let l=ly();return i.forEach((c,u)=>{const d=s.get(c);d!==void 0&&Qy(d.mutation,u,cc.empty(),fr.now()),W2(r,u)&&(l=l.insert(c,u))}),l})}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Cxe{constructor(e){this.serializer=e,this.hr=new Map,this.Pr=new Map}getBundleMetadata(e,r){return Ft.resolve(this.hr.get(r))}saveBundleMetadata(e,r){return this.hr.set(r.id,function(a){return{id:a.id,version:a.version,createTime:po(a.createTime)}}(r)),Ft.resolve()}getNamedQuery(e,r){return Ft.resolve(this.Pr.get(r))}saveNamedQuery(e,r){return this.Pr.set(r.name,function(a){return{name:a.name,query:cJ(a.bundledQuery),readTime:po(a.readTime)}}(r)),Ft.resolve()}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class _xe{constructor(){this.overlays=new xs(jr.comparator),this.Ir=new Map}getOverlay(e,r){return Ft.resolve(this.overlays.get(r))}getOverlays(e,r){const n=mf();return Ft.forEach(r,a=>this.getOverlay(e,a).next(s=>{s!==null&&n.set(a,s)})).next(()=>n)}saveOverlays(e,r,n){return n.forEach((a,s)=>{this.ht(e,r,s)}),Ft.resolve()}removeOverlaysForBatchId(e,r,n){const a=this.Ir.get(n);return a!==void 0&&(a.forEach(s=>this.overlays=this.overlays.remove(s)),this.Ir.delete(n)),Ft.resolve()}getOverlaysForCollection(e,r,n){const a=mf(),s=r.length+1,i=new jr(r.child("")),l=this.overlays.getIteratorFrom(i);for(;l.hasNext();){const c=l.getNext().value,u=c.getKey();if(!r.isPrefixOf(u.path))break;u.path.length===s&&c.largestBatchId>n&&a.set(c.getKey(),c)}return Ft.resolve(a)}getOverlaysForCollectionGroup(e,r,n,a){let s=new xs((u,d)=>u-d);const i=this.overlays.getIterator();for(;i.hasNext();){const u=i.getNext().value;if(u.getKey().getCollectionGroup()===r&&u.largestBatchId>n){let d=s.get(u.largestBatchId);d===null&&(d=mf(),s=s.insert(u.largestBatchId,d)),d.set(u.getKey(),u)}}const l=mf(),c=s.getIterator();for(;c.hasNext()&&(c.getNext().value.forEach((u,d)=>l.set(u,d)),!(l.size()>=a)););return Ft.resolve(l)}ht(e,r,n){const a=this.overlays.get(n.key);if(a!==null){const i=this.Ir.get(a.largestBatchId).delete(n.key);this.Ir.set(a.largestBatchId,i)}this.overlays=this.overlays.insert(n.key,new XO(r,n));let s=this.Ir.get(r);s===void 0&&(s=Sn(),this.Ir.set(r,s)),this.Ir.set(r,s.add(n.key))}}/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Exe{constructor(){this.sessionToken=fi.EMPTY_BYTE_STRING}getSessionToken(e){return Ft.resolve(this.sessionToken)}setSessionToken(e,r){return this.sessionToken=r,Ft.resolve()}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class t6{constructor(){this.Tr=new Pa(oo.Er),this.dr=new Pa(oo.Ar)}isEmpty(){return this.Tr.isEmpty()}addReference(e,r){const n=new oo(e,r);this.Tr=this.Tr.add(n),this.dr=this.dr.add(n)}Rr(e,r){e.forEach(n=>this.addReference(n,r))}removeReference(e,r){this.Vr(new oo(e,r))}mr(e,r){e.forEach(n=>this.removeReference(n,r))}gr(e){const r=new jr(new ea([])),n=new oo(r,e),a=new oo(r,e+1),s=[];return this.dr.forEachInRange([n,a],i=>{this.Vr(i),s.push(i.key)}),s}pr(){this.Tr.forEach(e=>this.Vr(e))}Vr(e){this.Tr=this.Tr.delete(e),this.dr=this.dr.delete(e)}yr(e){const r=new jr(new ea([])),n=new oo(r,e),a=new oo(r,e+1);let s=Sn();return this.dr.forEachInRange([n,a],i=>{s=s.add(i.key)}),s}containsKey(e){const r=new oo(e,0),n=this.Tr.firstAfterOrEqual(r);return n!==null&&e.isEqual(n.key)}}class oo{constructor(e,r){this.key=e,this.wr=r}static Er(e,r){return jr.comparator(e.key,r.key)||gn(e.wr,r.wr)}static Ar(e,r){return gn(e.wr,r.wr)||jr.comparator(e.key,r.key)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Sxe{constructor(e,r){this.indexManager=e,this.referenceDelegate=r,this.mutationQueue=[],this.Sr=1,this.br=new Pa(oo.Er)}checkEmpty(e){return Ft.resolve(this.mutationQueue.length===0)}addMutationBatch(e,r,n,a){const s=this.Sr;this.Sr++,this.mutationQueue.length>0&&this.mutationQueue[this.mutationQueue.length-1];const i=new zO(s,r,n,a);this.mutationQueue.push(i);for(const l of a)this.br=this.br.add(new oo(l.key,s)),this.indexManager.addToCollectionParentIndex(e,l.key.path.popLast());return Ft.resolve(i)}lookupMutationBatch(e,r){return Ft.resolve(this.Dr(r))}getNextMutationBatchAfterBatchId(e,r){const n=r+1,a=this.vr(n),s=a<0?0:a;return Ft.resolve(this.mutationQueue.length>s?this.mutationQueue[s]:null)}getHighestUnacknowledgedBatchId(){return Ft.resolve(this.mutationQueue.length===0?-1:this.Sr-1)}getAllMutationBatches(e){return Ft.resolve(this.mutationQueue.slice())}getAllMutationBatchesAffectingDocumentKey(e,r){const n=new oo(r,0),a=new oo(r,Number.POSITIVE_INFINITY),s=[];return this.br.forEachInRange([n,a],i=>{const l=this.Dr(i.wr);s.push(l)}),Ft.resolve(s)}getAllMutationBatchesAffectingDocumentKeys(e,r){let n=new Pa(gn);return r.forEach(a=>{const s=new oo(a,0),i=new oo(a,Number.POSITIVE_INFINITY);this.br.forEachInRange([s,i],l=>{n=n.add(l.wr)})}),Ft.resolve(this.Cr(n))}getAllMutationBatchesAffectingQuery(e,r){const n=r.path,a=n.length+1;let s=n;jr.isDocumentKey(s)||(s=s.child(""));const i=new oo(new jr(s),0);let l=new Pa(gn);return this.br.forEachWhile(c=>{const u=c.key.path;return!!n.isPrefixOf(u)&&(u.length===a&&(l=l.add(c.wr)),!0)},i),Ft.resolve(this.Cr(l))}Cr(e){const r=[];return e.forEach(n=>{const a=this.Dr(n);a!==null&&r.push(a)}),r}removeMutationBatch(e,r){Kr(this.Fr(r.batchId,"removed")===0),this.mutationQueue.shift();let n=this.br;return Ft.forEach(r.mutations,a=>{const s=new oo(a.key,r.batchId);return n=n.delete(s),this.referenceDelegate.markPotentiallyOrphaned(e,a.key)}).next(()=>{this.br=n})}On(e){}containsKey(e,r){const n=new oo(r,0),a=this.br.firstAfterOrEqual(n);return Ft.resolve(r.isEqual(a&&a.key))}performConsistencyCheck(e){return this.mutationQueue.length,Ft.resolve()}Fr(e,r){return this.vr(e)}vr(e){return this.mutationQueue.length===0?0:e-this.mutationQueue[0].batchId}Dr(e){const r=this.vr(e);return r<0||r>=this.mutationQueue.length?null:this.mutationQueue[r]}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ixe{constructor(e){this.Mr=e,this.docs=function(){return new xs(jr.comparator)}(),this.size=0}setIndexManager(e){this.indexManager=e}addEntry(e,r){const n=r.key,a=this.docs.get(n),s=a?a.size:0,i=this.Mr(r);return this.docs=this.docs.insert(n,{document:r.mutableCopy(),size:i}),this.size+=i-s,this.indexManager.addToCollectionParentIndex(e,n.path.popLast())}removeEntry(e){const r=this.docs.get(e);r&&(this.docs=this.docs.remove(e),this.size-=r.size)}getEntry(e,r){const n=this.docs.get(r);return Ft.resolve(n?n.document.mutableCopy():As.newInvalidDocument(r))}getEntries(e,r){let n=$c();return r.forEach(a=>{const s=this.docs.get(a);n=n.insert(a,s?s.document.mutableCopy():As.newInvalidDocument(a))}),Ft.resolve(n)}getDocumentsMatchingQuery(e,r,n,a){let s=$c();const i=r.path,l=new jr(i.child("")),c=this.docs.getIteratorFrom(l);for(;c.hasNext();){const{key:u,value:{document:d}}=c.getNext();if(!i.isPrefixOf(u.path))break;u.path.length>i.length+1||UO(AY(d),n)<=0||(a.has(d.key)||W2(r,d))&&(s=s.insert(d.key,d.mutableCopy()))}return Ft.resolve(s)}getAllFromCollectionGroup(e,r,n,a){Ur()}Or(e,r){return Ft.forEach(this.docs,n=>r(n))}newChangeBuffer(e){return new jxe(this)}getSize(e){return Ft.resolve(this.size)}}class jxe extends mJ{constructor(e){super(),this.cr=e}applyChanges(e){const r=[];return this.changes.forEach((n,a)=>{a.isValidDocument()?r.push(this.cr.addEntry(e,a)):this.cr.removeEntry(n)}),Ft.waitFor(r)}getFromCache(e,r){return this.cr.getEntry(e,r)}getAllFromCache(e,r){return this.cr.getEntries(e,r)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Bxe{constructor(e){this.persistence=e,this.Nr=new nm(r=>Sp(r),q2),this.lastRemoteSnapshotVersion=zr.min(),this.highestTargetId=0,this.Lr=0,this.Br=new t6,this.targetCount=0,this.kr=Bp.Bn()}forEachTarget(e,r){return this.Nr.forEach((n,a)=>r(a)),Ft.resolve()}getLastRemoteSnapshotVersion(e){return Ft.resolve(this.lastRemoteSnapshotVersion)}getHighestSequenceNumber(e){return Ft.resolve(this.Lr)}allocateTargetId(e){return this.highestTargetId=this.kr.next(),Ft.resolve(this.highestTargetId)}setTargetsMetadata(e,r,n){return n&&(this.lastRemoteSnapshotVersion=n),r>this.Lr&&(this.Lr=r),Ft.resolve()}Kn(e){this.Nr.set(e.target,e);const r=e.targetId;r>this.highestTargetId&&(this.kr=new Bp(r),this.highestTargetId=r),e.sequenceNumber>this.Lr&&(this.Lr=e.sequenceNumber)}addTargetData(e,r){return this.Kn(r),this.targetCount+=1,Ft.resolve()}updateTargetData(e,r){return this.Kn(r),Ft.resolve()}removeTargetData(e,r){return this.Nr.delete(r.target),this.Br.gr(r.targetId),this.targetCount-=1,Ft.resolve()}removeTargets(e,r,n){let a=0;const s=[];return this.Nr.forEach((i,l)=>{l.sequenceNumber<=r&&n.get(l.targetId)===null&&(this.Nr.delete(i),s.push(this.removeMatchingKeysForTargetId(e,l.targetId)),a++)}),Ft.waitFor(s).next(()=>a)}getTargetCount(e){return Ft.resolve(this.targetCount)}getTargetData(e,r){const n=this.Nr.get(r)||null;return Ft.resolve(n)}addMatchingKeys(e,r,n){return this.Br.Rr(r,n),Ft.resolve()}removeMatchingKeys(e,r,n){this.Br.mr(r,n);const a=this.persistence.referenceDelegate,s=[];return a&&r.forEach(i=>{s.push(a.markPotentiallyOrphaned(e,i))}),Ft.waitFor(s)}removeMatchingKeysForTargetId(e,r){return this.Br.gr(r),Ft.resolve()}getMatchingKeysForTargetId(e,r){const n=this.Br.yr(r);return Ft.resolve(n)}containsKey(e,r){return Ft.resolve(this.Br.containsKey(r))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class xJ{constructor(e,r){this.qr={},this.overlays={},this.Qr=new Ou(0),this.Kr=!1,this.Kr=!0,this.$r=new Exe,this.referenceDelegate=e(this),this.Ur=new Bxe(this),this.indexManager=new Axe,this.remoteDocumentCache=function(a){return new Ixe(a)}(n=>this.referenceDelegate.Wr(n)),this.serializer=new oJ(r),this.Gr=new Cxe(this.serializer)}start(){return Promise.resolve()}shutdown(){return this.Kr=!1,Promise.resolve()}get started(){return this.Kr}setDatabaseDeletedListener(){}setNetworkEnabled(){}getIndexManager(e){return this.indexManager}getDocumentOverlayCache(e){let r=this.overlays[e.toKey()];return r||(r=new _xe,this.overlays[e.toKey()]=r),r}getMutationQueue(e,r){let n=this.qr[e.toKey()];return n||(n=new Sxe(r,this.referenceDelegate),this.qr[e.toKey()]=n),n}getGlobalsCache(){return this.$r}getTargetCache(){return this.Ur}getRemoteDocumentCache(){return this.remoteDocumentCache}getBundleCache(){return this.Gr}runTransaction(e,r,n){mr("MemoryPersistence","Starting transaction:",e);const a=new Pxe(this.Qr.next());return this.referenceDelegate.zr(),n(a).next(s=>this.referenceDelegate.jr(a).next(()=>s)).toPromise().then(s=>(a.raiseOnCommittedEvent(),s))}Hr(e,r){return Ft.or(Object.values(this.qr).map(n=>()=>n.containsKey(e,r)))}}class Pxe extends mY{constructor(e){super(),this.currentSequenceNumber=e}}class KI{constructor(e){this.persistence=e,this.Jr=new t6,this.Yr=null}static Zr(e){return new KI(e)}get Xr(){if(this.Yr)return this.Yr;throw Ur()}addReference(e,r,n){return this.Jr.addReference(n,r),this.Xr.delete(n.toString()),Ft.resolve()}removeReference(e,r,n){return this.Jr.removeReference(n,r),this.Xr.add(n.toString()),Ft.resolve()}markPotentiallyOrphaned(e,r){return this.Xr.add(r.toString()),Ft.resolve()}removeTarget(e,r){this.Jr.gr(r.targetId).forEach(a=>this.Xr.add(a.toString()));const n=this.persistence.getTargetCache();return n.getMatchingKeysForTargetId(e,r.targetId).next(a=>{a.forEach(s=>this.Xr.add(s.toString()))}).next(()=>n.removeTargetData(e,r))}zr(){this.Yr=new Set}jr(e){const r=this.persistence.getRemoteDocumentCache().newChangeBuffer();return Ft.forEach(this.Xr,n=>{const a=jr.fromPath(n);return this.ei(e,a).next(s=>{s||r.removeEntry(a,zr.min())})}).next(()=>(this.Yr=null,r.apply(e)))}updateLimboDocument(e,r){return this.ei(e,r).next(n=>{n?this.Xr.delete(r.toString()):this.Xr.add(r.toString())})}Wr(e){return 0}ei(e,r){return Ft.or([()=>Ft.resolve(this.Jr.containsKey(r)),()=>this.persistence.getTargetCache().containsKey(e,r),()=>this.persistence.Hr(e,r)])}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Txe{constructor(e){this.serializer=e}O(e,r,n,a){const s=new RI("createOrUpgrade",r);n<1&&a>=1&&(function(c){c.createObjectStore("owner")}(e),function(c){c.createObjectStore("mutationQueues",{keyPath:"userId"}),c.createObjectStore("mutations",{keyPath:"batchId",autoIncrement:!0}).createIndex("userMutationsIndex",dU,{unique:!0}),c.createObjectStore("documentMutations")}(e),JU(e),function(c){c.createObjectStore("remoteDocuments")}(e));let i=Ft.resolve();return n<3&&a>=3&&(n!==0&&(function(c){c.deleteObjectStore("targetDocuments"),c.deleteObjectStore("targets"),c.deleteObjectStore("targetGlobal")}(e),JU(e)),i=i.next(()=>function(c){const u=c.store("targetGlobal"),d={highestTargetId:0,highestListenSequenceNumber:0,lastRemoteSnapshotVersion:zr.min().toTimestamp(),targetCount:0};return u.put("targetGlobalKey",d)}(s))),n<4&&a>=4&&(n!==0&&(i=i.next(()=>function(c,u){return u.store("mutations").U().next(d=>{c.deleteObjectStore("mutations"),c.createObjectStore("mutations",{keyPath:"batchId",autoIncrement:!0}).createIndex("userMutationsIndex",dU,{unique:!0});const f=u.store("mutations"),h=d.map(A=>f.put(A));return Ft.waitFor(h)})}(e,s))),i=i.next(()=>{(function(c){c.createObjectStore("clientMetadata",{keyPath:"clientId"})})(e)})),n<5&&a>=5&&(i=i.next(()=>this.ni(s))),n<6&&a>=6&&(i=i.next(()=>(function(c){c.createObjectStore("remoteDocumentGlobal")}(e),this.ri(s)))),n<7&&a>=7&&(i=i.next(()=>this.ii(s))),n<8&&a>=8&&(i=i.next(()=>this.si(e,s))),n<9&&a>=9&&(i=i.next(()=>{(function(c){c.objectStoreNames.contains("remoteDocumentChanges")&&c.deleteObjectStore("remoteDocumentChanges")})(e)})),n<10&&a>=10&&(i=i.next(()=>this.oi(s))),n<11&&a>=11&&(i=i.next(()=>{(function(c){c.createObjectStore("bundles",{keyPath:"bundleId"})})(e),function(c){c.createObjectStore("namedQueries",{keyPath:"name"})}(e)})),n<12&&a>=12&&(i=i.next(()=>{(function(c){const u=c.createObjectStore("documentOverlays",{keyPath:ige});u.createIndex("collectionPathOverlayIndex",oge,{unique:!1}),u.createIndex("collectionGroupOverlayIndex",lge,{unique:!1})})(e)})),n<13&&a>=13&&(i=i.next(()=>function(c){const u=c.createObjectStore("remoteDocumentsV14",{keyPath:Wpe});u.createIndex("documentKeyIndex",Xpe),u.createIndex("collectionGroupIndex",Ype)}(e)).next(()=>this._i(e,s)).next(()=>e.deleteObjectStore("remoteDocuments"))),n<14&&a>=14&&(i=i.next(()=>this.ai(e,s))),n<15&&a>=15&&(i=i.next(()=>function(c){c.createObjectStore("indexConfiguration",{keyPath:"indexId",autoIncrement:!0}).createIndex("collectionGroupIndex","collectionGroup",{unique:!1}),c.createObjectStore("indexState",{keyPath:rge}).createIndex("sequenceNumberIndex",nge,{unique:!1}),c.createObjectStore("indexEntries",{keyPath:age}).createIndex("documentKeyIndex",sge,{unique:!1})}(e))),n<16&&a>=16&&(i=i.next(()=>{r.objectStore("indexState").clear()}).next(()=>{r.objectStore("indexEntries").clear()})),n<17&&a>=17&&(i=i.next(()=>{(function(c){c.createObjectStore("globals",{keyPath:"name"})})(e)})),i}ri(e){let r=0;return e.store("remoteDocuments").J((n,a)=>{r+=FE(a)}).next(()=>{const n={byteSize:r};return e.store("remoteDocumentGlobal").put("remoteDocumentGlobalKey",n)})}ni(e){const r=e.store("mutationQueues"),n=e.store("mutations");return r.U().next(a=>Ft.forEach(a,s=>{const i=IDBKeyRange.bound([s.userId,-1],[s.userId,s.lastAcknowledgedBatchId]);return n.U("userMutationsIndex",i).next(l=>Ft.forEach(l,c=>{Kr(c.userId===s.userId);const u=Rm(this.serializer,c);return fJ(e,s.userId,u).next(()=>{})}))}))}ii(e){const r=e.store("targetDocuments"),n=e.store("remoteDocuments");return e.store("targetGlobal").get("targetGlobalKey").next(a=>{const s=[];return n.J((i,l)=>{const c=new ea(i),u=function(f){return[0,Ql(f)]}(c);s.push(r.get(u).next(d=>d?Ft.resolve():(f=>r.put({targetId:0,path:Ql(f),sequenceNumber:a.highestListenSequenceNumber}))(c)))}).next(()=>Ft.waitFor(s))})}si(e,r){e.createObjectStore("collectionParents",{keyPath:tge});const n=r.store("collectionParents"),a=new e6,s=i=>{if(a.add(i)){const l=i.lastSegment(),c=i.popLast();return n.put({collectionId:l,parent:Ql(c)})}};return r.store("remoteDocuments").J({H:!0},(i,l)=>{const c=new ea(i);return s(c.popLast())}).next(()=>r.store("documentMutations").J({H:!0},([i,l,c],u)=>{const d=hf(l);return s(d.popLast())}))}oi(e){const r=e.store("targets");return r.J((n,a)=>{const s=uy(a),i=lJ(this.serializer,s);return r.put(i)})}_i(e,r){const n=r.store("remoteDocuments"),a=[];return n.J((s,i)=>{const l=r.store("remoteDocumentsV14"),c=function(f){return f.document?new jr(ea.fromString(f.document.name).popFirst(5)):f.noDocument?jr.fromSegments(f.noDocument.path):f.unknownDocument?jr.fromSegments(f.unknownDocument.path):Ur()}(i).path.toArray(),u={prefixPath:c.slice(0,c.length-2),collectionGroup:c[c.length-2],documentId:c[c.length-1],readTime:i.readTime||[0,0],unknownDocument:i.unknownDocument,noDocument:i.noDocument,document:i.document,hasCommittedMutations:!!i.hasCommittedMutations};a.push(l.put(u))}).next(()=>Ft.waitFor(a))}ai(e,r){const n=r.store("mutations"),a=pJ(this.serializer),s=new xJ(KI.Zr,this.serializer.ct);return n.U().next(i=>{const l=new Map;return i.forEach(c=>{var u;let d=(u=l.get(c.userId))!==null&&u!==void 0?u:Sn();Rm(this.serializer,c).keys().forEach(f=>d=d.add(f)),l.set(c.userId,d)}),Ft.forEach(l,(c,u)=>{const d=new Do(u),f=HI.lt(this.serializer,d),h=s.getIndexManager(d),A=$I.lt(d,this.serializer,h,s.referenceDelegate);return new gJ(a,A,f,h).recalculateAndSaveOverlaysForDocumentKeys(new WP(r,Ou.oe),c).next()})})}}function JU(t){t.createObjectStore("targetDocuments",{keyPath:Zpe}).createIndex("documentTargetsIndex",ege,{unique:!0}),t.createObjectStore("targets",{keyPath:"targetId"}).createIndex("queryTargetsIndex",Jpe,{unique:!0}),t.createObjectStore("targetGlobal")}const Qj="Failed to obtain exclusive access to the persistence layer. To allow shared access, multi-tab synchronization has to be enabled in all tabs. If you are using `experimentalForceOwningTab:true`, make sure that only one tab has persistence enabled at any given time.";class r6{constructor(e,r,n,a,s,i,l,c,u,d,f=17){if(this.allowTabSynchronization=e,this.persistenceKey=r,this.clientId=n,this.ui=s,this.window=i,this.document=l,this.ci=u,this.li=d,this.hi=f,this.Qr=null,this.Kr=!1,this.isPrimary=!1,this.networkEnabled=!0,this.Pi=null,this.inForeground=!1,this.Ii=null,this.Ti=null,this.Ei=Number.NEGATIVE_INFINITY,this.di=h=>Promise.resolve(),!r6.D())throw new vr(Zt.UNIMPLEMENTED,"This platform is either missing IndexedDB or is known to have an incomplete implementation. Offline persistence has been disabled.");this.referenceDelegate=new yxe(this,a),this.Ai=r+"main",this.serializer=new oJ(c),this.Ri=new I0(this.Ai,this.hi,new Txe(this.serializer)),this.$r=new oxe,this.Ur=new mxe(this.referenceDelegate,this.serializer),this.remoteDocumentCache=pJ(this.serializer),this.Gr=new ixe,this.window&&this.window.localStorage?this.Vi=this.window.localStorage:(this.Vi=null,d===!1&&Ml("IndexedDbPersistence","LocalStorage is unavailable. As a result, persistence may not work reliably. In particular enablePersistence() could fail immediately after refreshing the page."))}start(){return this.mi().then(()=>{if(!this.isPrimary&&!this.allowTabSynchronization)throw new vr(Zt.FAILED_PRECONDITION,Qj);return this.fi(),this.gi(),this.pi(),this.runTransaction("getHighestListenSequenceNumber","readonly",e=>this.Ur.getHighestSequenceNumber(e))}).then(e=>{this.Qr=new Ou(e,this.ci)}).then(()=>{this.Kr=!0}).catch(e=>(this.Ri&&this.Ri.close(),Promise.reject(e)))}yi(e){return this.di=async r=>{if(this.started)return e(r)},e(this.isPrimary)}setDatabaseDeletedListener(e){this.Ri.L(async r=>{r.newVersion===null&&await e()})}setNetworkEnabled(e){this.networkEnabled!==e&&(this.networkEnabled=e,this.ui.enqueueAndForget(async()=>{this.started&&await this.mi()}))}mi(){return this.runTransaction("updateClientMetadataAndTryBecomePrimary","readwrite",e=>EN(e).put({clientId:this.clientId,updateTimeMs:Date.now(),networkEnabled:this.networkEnabled,inForeground:this.inForeground}).next(()=>{if(this.isPrimary)return this.wi(e).next(r=>{r||(this.isPrimary=!1,this.ui.enqueueRetryable(()=>this.di(!1)))})}).next(()=>this.Si(e)).next(r=>this.isPrimary&&!r?this.bi(e).next(()=>!1):!!r&&this.Di(e).next(()=>!0))).catch(e=>{if(rm(e))return mr("IndexedDbPersistence","Failed to extend owner lease: ",e),this.isPrimary;if(!this.allowTabSynchronization)throw e;return mr("IndexedDbPersistence","Releasing owner lease after error during lease refresh",e),!1}).then(e=>{this.isPrimary!==e&&this.ui.enqueueRetryable(()=>this.di(e)),this.isPrimary=e})}wi(e){return P1(e).get("owner").next(r=>Ft.resolve(this.vi(r)))}Ci(e){return EN(e).delete(this.clientId)}async Fi(){if(this.isPrimary&&!this.Mi(this.Ei,18e5)){this.Ei=Date.now();const e=await this.runTransaction("maybeGarbageCollectMultiClientState","readwrite-primary",r=>{const n=qi(r,"clientMetadata");return n.U().next(a=>{const s=this.xi(a,18e5),i=a.filter(l=>s.indexOf(l)===-1);return Ft.forEach(i,l=>n.delete(l.clientId)).next(()=>i)})}).catch(()=>[]);if(this.Vi)for(const r of e)this.Vi.removeItem(this.Oi(r.clientId))}}pi(){this.Ti=this.ui.enqueueAfterDelay("client_metadata_refresh",4e3,()=>this.mi().then(()=>this.Fi()).then(()=>this.pi()))}vi(e){return!!e&&e.ownerId===this.clientId}Si(e){return this.li?Ft.resolve(!0):P1(e).get("owner").next(r=>{if(r!==null&&this.Mi(r.leaseTimestampMs,5e3)&&!this.Ni(r.ownerId)){if(this.vi(r)&&this.networkEnabled)return!0;if(!this.vi(r)){if(!r.allowTabSynchronization)throw new vr(Zt.FAILED_PRECONDITION,Qj);return!1}}return!(!this.networkEnabled||!this.inForeground)||EN(e).U().next(n=>this.xi(n,5e3).find(a=>{if(this.clientId!==a.clientId){const s=!this.networkEnabled&&a.networkEnabled,i=!this.inForeground&&a.inForeground,l=this.networkEnabled===a.networkEnabled;if(s||i&&l)return!0}return!1})===void 0)}).next(r=>(this.isPrimary!==r&&mr("IndexedDbPersistence",`Client ${r?"is":"is not"} eligible for a primary lease.`),r))}async shutdown(){this.Kr=!1,this.Li(),this.Ti&&(this.Ti.cancel(),this.Ti=null),this.Bi(),this.ki(),await this.Ri.runTransaction("shutdown","readwrite",["owner","clientMetadata"],e=>{const r=new WP(e,Ou.oe);return this.bi(r).next(()=>this.Ci(r))}),this.Ri.close(),this.qi()}xi(e,r){return e.filter(n=>this.Mi(n.updateTimeMs,r)&&!this.Ni(n.clientId))}Qi(){return this.runTransaction("getActiveClients","readonly",e=>EN(e).U().next(r=>this.xi(r,18e5).map(n=>n.clientId)))}get started(){return this.Kr}getGlobalsCache(){return this.$r}getMutationQueue(e,r){return $I.lt(e,this.serializer,r,this.referenceDelegate)}getTargetCache(){return this.Ur}getRemoteDocumentCache(){return this.remoteDocumentCache}getIndexManager(e){return new hxe(e,this.serializer.ct.databaseId)}getDocumentOverlayCache(e){return HI.lt(this.serializer,e)}getBundleCache(){return this.Gr}runTransaction(e,r,n){mr("IndexedDbPersistence","Starting transaction:",e);const a=r==="readonly"?"readonly":"readwrite",s=function(c){return c===17?dge:c===16?uge:c===15?VO:c===14?yY:c===13?vY:c===12?cge:c===11?xY:void Ur()}(this.hi);let i;return this.Ri.runTransaction(e,a,s,l=>(i=new WP(l,this.Qr?this.Qr.next():Ou.oe),r==="readwrite-primary"?this.wi(i).next(c=>!!c||this.Si(i)).next(c=>{if(!c)throw Ml(`Failed to obtain primary lease for action '${e}'.`),this.isPrimary=!1,this.ui.enqueueRetryable(()=>this.di(!1)),new vr(Zt.FAILED_PRECONDITION,hY);return n(i)}).next(c=>this.Di(i).next(()=>c)):this.Ki(i).next(()=>n(i)))).then(l=>(i.raiseOnCommittedEvent(),l))}Ki(e){return P1(e).get("owner").next(r=>{if(r!==null&&this.Mi(r.leaseTimestampMs,5e3)&&!this.Ni(r.ownerId)&&!this.vi(r)&&!(this.li||this.allowTabSynchronization&&r.allowTabSynchronization))throw new vr(Zt.FAILED_PRECONDITION,Qj)})}Di(e){const r={ownerId:this.clientId,allowTabSynchronization:this.allowTabSynchronization,leaseTimestampMs:Date.now()};return P1(e).put("owner",r)}static D(){return I0.D()}bi(e){const r=P1(e);return r.get("owner").next(n=>this.vi(n)?(mr("IndexedDbPersistence","Releasing primary lease."),r.delete("owner")):Ft.resolve())}Mi(e,r){const n=Date.now();return!(e<n-r)&&(!(e>n)||(Ml(`Detected an update time that is in the future: ${e} > ${n}`),!1))}fi(){this.document!==null&&typeof this.document.addEventListener=="function"&&(this.Ii=()=>{this.ui.enqueueAndForget(()=>(this.inForeground=this.document.visibilityState==="visible",this.mi()))},this.document.addEventListener("visibilitychange",this.Ii),this.inForeground=this.document.visibilityState==="visible")}Bi(){this.Ii&&(this.document.removeEventListener("visibilitychange",this.Ii),this.Ii=null)}gi(){var e;typeof((e=this.window)===null||e===void 0?void 0:e.addEventListener)=="function"&&(this.Pi=()=>{this.Li();const r=/(?:Version|Mobile)\/1[456]/;xX()&&(navigator.appVersion.match(r)||navigator.userAgent.match(r))&&this.ui.enterRestrictedMode(!0),this.ui.enqueueAndForget(()=>this.shutdown())},this.window.addEventListener("pagehide",this.Pi))}ki(){this.Pi&&(this.window.removeEventListener("pagehide",this.Pi),this.Pi=null)}Ni(e){var r;try{const n=((r=this.Vi)===null||r===void 0?void 0:r.getItem(this.Oi(e)))!==null;return mr("IndexedDbPersistence",`Client '${e}' ${n?"is":"is not"} zombied in LocalStorage`),n}catch(n){return Ml("IndexedDbPersistence","Failed to get zombied client id.",n),!1}}Li(){if(this.Vi)try{this.Vi.setItem(this.Oi(this.clientId),String(Date.now()))}catch(e){Ml("Failed to set zombie client id.",e)}}qi(){if(this.Vi)try{this.Vi.removeItem(this.Oi(this.clientId))}catch{}}Oi(e){return`firestore_zombie_${this.persistenceKey}_${e}`}}function P1(t){return qi(t,"owner")}function EN(t){return qi(t,"clientMetadata")}function kxe(t,e){let r=t.projectId;return t.isDefaultDatabase||(r+="."+t.database),"firestore/"+e+"/"+r+"/"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class n6{constructor(e,r,n,a){this.targetId=e,this.fromCache=r,this.$i=n,this.Ui=a}static Wi(e,r){let n=Sn(),a=Sn();for(const s of r.docChanges)switch(s.type){case 0:n=n.add(s.doc.key);break;case 1:a=a.add(s.doc.key)}return new n6(e,r.fromCache,n,a)}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Fxe{constructor(){this._documentReadCount=0}get documentReadCount(){return this._documentReadCount}incrementDocumentReadCount(e){this._documentReadCount+=e}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class vJ{constructor(){this.Gi=!1,this.zi=!1,this.ji=100,this.Hi=function(){return xX()?8:pY(Ki())>0?6:4}()}initialize(e,r){this.Ji=e,this.indexManager=r,this.Gi=!0}getDocumentsMatchingQuery(e,r,n,a){const s={result:null};return this.Yi(e,r).next(i=>{s.result=i}).next(()=>{if(!s.result)return this.Zi(e,r,a,n).next(i=>{s.result=i})}).next(()=>{if(s.result)return;const i=new Fxe;return this.Xi(e,r,i).next(l=>{if(s.result=l,this.zi)return this.es(e,r,i,l.size)})}).next(()=>s.result)}es(e,r,n,a){return n.documentReadCount<this.ji?(Xg()<=Mn.DEBUG&&mr("QueryEngine","SDK will not create cache indexes for query:",Yg(r),"since it only creates cache indexes for collection contains","more than or equal to",this.ji,"documents"),Ft.resolve()):(Xg()<=Mn.DEBUG&&mr("QueryEngine","Query:",Yg(r),"scans",n.documentReadCount,"local documents and returns",a,"documents as results."),n.documentReadCount>this.Hi*a?(Xg()<=Mn.DEBUG&&mr("QueryEngine","The SDK decides to create cache indexes for query:",Yg(r),"as using cache indexes may help improve performance."),this.indexManager.createTargetIndexes(e,Qu(r))):Ft.resolve())}Yi(e,r){if(CU(r))return Ft.resolve(null);let n=Qu(r);return this.indexManager.getIndexType(e,n).next(a=>a===0?null:(r.limit!==null&&a===1&&(r=PE(r,null,"F"),n=Qu(r)),this.indexManager.getDocumentsMatchingTarget(e,n).next(s=>{const i=Sn(...s);return this.Ji.getDocuments(e,i).next(l=>this.indexManager.getMinOffset(e,n).next(c=>{const u=this.ts(r,l);return this.ns(r,u,i,c.readTime)?this.Yi(e,PE(r,null,"F")):this.rs(e,u,r,c)}))})))}Zi(e,r,n,a){return CU(r)||a.isEqual(zr.min())?Ft.resolve(null):this.Ji.getDocuments(e,n).next(s=>{const i=this.ts(r,s);return this.ns(r,i,n,a)?Ft.resolve(null):(Xg()<=Mn.DEBUG&&mr("QueryEngine","Re-using previous result from %s to execute query: %s",a.toString(),Yg(r)),this.rs(e,i,r,Qpe(a,-1)).next(l=>l))})}ts(e,r){let n=new Pa(OY(e));return r.forEach((a,s)=>{W2(e,s)&&(n=n.add(s))}),n}ns(e,r,n,a){if(e.limit===null)return!1;if(n.size!==r.size)return!0;const s=e.limitType==="F"?r.last():r.first();return!!s&&(s.hasPendingWrites||s.version.compareTo(a)>0)}Xi(e,r,n){return Xg()<=Mn.DEBUG&&mr("QueryEngine","Using full collection scan to execute query:",Yg(r)),this.Ji.getDocumentsMatchingQuery(e,r,Yc.min(),n)}rs(e,r,n,a){return this.Ji.getDocumentsMatchingQuery(e,n,a).next(s=>(r.forEach(i=>{s=s.insert(i.key,i)}),s))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Oxe{constructor(e,r,n,a){this.persistence=e,this.ss=r,this.serializer=a,this.os=new xs(gn),this._s=new nm(s=>Sp(s),q2),this.us=new Map,this.cs=e.getRemoteDocumentCache(),this.Ur=e.getTargetCache(),this.Gr=e.getBundleCache(),this.ls(n)}ls(e){this.documentOverlayCache=this.persistence.getDocumentOverlayCache(e),this.indexManager=this.persistence.getIndexManager(e),this.mutationQueue=this.persistence.getMutationQueue(e,this.indexManager),this.localDocuments=new gJ(this.cs,this.mutationQueue,this.documentOverlayCache,this.indexManager),this.cs.setIndexManager(this.indexManager),this.ss.initialize(this.localDocuments,this.indexManager)}collectGarbage(e){return this.persistence.runTransaction("Collect garbage","readwrite-primary",r=>e.collect(r,this.os))}}function yJ(t,e,r,n){return new Oxe(t,e,r,n)}async function bJ(t,e){const r=dn(t);return await r.persistence.runTransaction("Handle user change","readonly",n=>{let a;return r.mutationQueue.getAllMutationBatches(n).next(s=>(a=s,r.ls(e),r.mutationQueue.getAllMutationBatches(n))).next(s=>{const i=[],l=[];let c=Sn();for(const u of a){i.push(u.batchId);for(const d of u.mutations)c=c.add(d.key)}for(const u of s){l.push(u.batchId);for(const d of u.mutations)c=c.add(d.key)}return r.localDocuments.getDocuments(n,c).next(u=>({hs:u,removedBatchIds:i,addedBatchIds:l}))})})}function Dxe(t,e){const r=dn(t);return r.persistence.runTransaction("Acknowledge batch","readwrite-primary",n=>{const a=e.batch.keys(),s=r.cs.newChangeBuffer({trackRemovals:!0});return function(l,c,u,d){const f=u.batch,h=f.keys();let A=Ft.resolve();return h.forEach(m=>{A=A.next(()=>d.getEntry(c,m)).next(p=>{const g=u.docVersions.get(m);Kr(g!==null),p.version.compareTo(g)<0&&(f.applyToRemoteDocument(p,u),p.isValidDocument()&&(p.setReadTime(u.commitVersion),d.addEntry(p)))})}),A.next(()=>l.mutationQueue.removeMutationBatch(c,f))}(r,n,e,s).next(()=>s.apply(n)).next(()=>r.mutationQueue.performConsistencyCheck(n)).next(()=>r.documentOverlayCache.removeOverlaysForBatchId(n,a,e.batch.batchId)).next(()=>r.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(n,function(l){let c=Sn();for(let u=0;u<l.mutationResults.length;++u)l.mutationResults[u].transformResults.length>0&&(c=c.add(l.batch.mutations[u].key));return c}(e))).next(()=>r.localDocuments.getDocuments(n,a))})}function wJ(t){const e=dn(t);return e.persistence.runTransaction("Get last remote snapshot version","readonly",r=>e.Ur.getLastRemoteSnapshotVersion(r))}function Rxe(t,e){const r=dn(t),n=e.snapshotVersion;let a=r.os;return r.persistence.runTransaction("Apply remote event","readwrite-primary",s=>{const i=r.cs.newChangeBuffer({trackRemovals:!0});a=r.os;const l=[];e.targetChanges.forEach((d,f)=>{const h=a.get(f);if(!h)return;l.push(r.Ur.removeMatchingKeys(s,d.removedDocuments,f).next(()=>r.Ur.addMatchingKeys(s,d.addedDocuments,f)));let A=h.withSequenceNumber(s.currentSequenceNumber);e.targetMismatches.get(f)!==null?A=A.withResumeToken(fi.EMPTY_BYTE_STRING,zr.min()).withLastLimboFreeSnapshotVersion(zr.min()):d.resumeToken.approximateByteSize()>0&&(A=A.withResumeToken(d.resumeToken,n)),a=a.insert(f,A),function(p,g,x){return p.resumeToken.approximateByteSize()===0||g.snapshotVersion.toMicroseconds()-p.snapshotVersion.toMicroseconds()>=3e8?!0:x.addedDocuments.size+x.modifiedDocuments.size+x.removedDocuments.size>0}(h,A,d)&&l.push(r.Ur.updateTargetData(s,A))});let c=$c(),u=Sn();if(e.documentUpdates.forEach(d=>{e.resolvedLimboDocuments.has(d)&&l.push(r.persistence.referenceDelegate.updateLimboDocument(s,d))}),l.push(Mxe(s,i,e.documentUpdates).next(d=>{c=d.Ps,u=d.Is})),!n.isEqual(zr.min())){const d=r.Ur.getLastRemoteSnapshotVersion(s).next(f=>r.Ur.setTargetsMetadata(s,s.currentSequenceNumber,n));l.push(d)}return Ft.waitFor(l).next(()=>i.apply(s)).next(()=>r.localDocuments.getLocalViewOfDocuments(s,c,u)).next(()=>c)}).then(s=>(r.os=a,s))}function Mxe(t,e,r){let n=Sn(),a=Sn();return r.forEach(s=>n=n.add(s)),e.getEntries(t,n).next(s=>{let i=$c();return r.forEach((l,c)=>{const u=s.get(l);c.isFoundDocument()!==u.isFoundDocument()&&(a=a.add(l)),c.isNoDocument()&&c.version.isEqual(zr.min())?(e.removeEntry(l,c.readTime),i=i.insert(l,c)):!u.isValidDocument()||c.version.compareTo(u.version)>0||c.version.compareTo(u.version)===0&&u.hasPendingWrites?(e.addEntry(c),i=i.insert(l,c)):mr("LocalStore","Ignoring outdated watch update for ",l,". Current version:",u.version," Watch version:",c.version)}),{Ps:i,Is:a}})}function Lxe(t,e){const r=dn(t);return r.persistence.runTransaction("Get next mutation batch","readonly",n=>(e===void 0&&(e=-1),r.mutationQueue.getNextMutationBatchAfterBatchId(n,e)))}function Uxe(t,e){const r=dn(t);return r.persistence.runTransaction("Allocate target","readwrite",n=>{let a;return r.Ur.getTargetData(n,e).next(s=>s?(a=s,Ft.resolve(a)):r.Ur.allocateTargetId(n).next(i=>(a=new pA(e,i,"TargetPurposeListen",n.currentSequenceNumber),r.Ur.addTargetData(n,a).next(()=>a))))}).then(n=>{const a=r.os.get(n.targetId);return(a===null||n.snapshotVersion.compareTo(a.snapshotVersion)>0)&&(r.os=r.os.insert(n.targetId,n),r._s.set(e,n.targetId)),n})}async function cT(t,e,r){const n=dn(t),a=n.os.get(e),s=r?"readwrite":"readwrite-primary";try{r||await n.persistence.runTransaction("Release target",s,i=>n.persistence.referenceDelegate.removeTarget(i,a))}catch(i){if(!rm(i))throw i;mr("LocalStore",`Failed to update sequence numbers for target ${e}: ${i}`)}n.os=n.os.remove(e),n._s.delete(a.target)}function ZU(t,e,r){const n=dn(t);let a=zr.min(),s=Sn();return n.persistence.runTransaction("Execute query","readwrite",i=>function(c,u,d){const f=dn(c),h=f._s.get(d);return h!==void 0?Ft.resolve(f.os.get(h)):f.Ur.getTargetData(u,d)}(n,i,Qu(e)).next(l=>{if(l)return a=l.lastLimboFreeSnapshotVersion,n.Ur.getMatchingKeysForTargetId(i,l.targetId).next(c=>{s=c})}).next(()=>n.ss.getDocumentsMatchingQuery(i,e,r?a:zr.min(),r?s:Sn())).next(l=>(Qxe(n,Ege(e),l),{documents:l,Ts:s})))}function Qxe(t,e,r){let n=t.us.get(e)||zr.min();r.forEach((a,s)=>{s.readTime.compareTo(n)>0&&(n=s.readTime)}),t.us.set(e,n)}class e7{constructor(){this.activeTargetIds=Tge()}fs(e){this.activeTargetIds=this.activeTargetIds.add(e)}gs(e){this.activeTargetIds=this.activeTargetIds.delete(e)}Vs(){const e={activeTargetIds:this.activeTargetIds.toArray(),updateTimeMs:Date.now()};return JSON.stringify(e)}}class NJ{constructor(){this.so=new e7,this.oo={},this.onlineStateHandler=null,this.sequenceNumberHandler=null}addPendingMutation(e){}updateMutationState(e,r,n){}addLocalQueryTarget(e,r=!0){return r&&this.so.fs(e),this.oo[e]||"not-current"}updateQueryState(e,r,n){this.oo[e]=r}removeLocalQueryTarget(e){this.so.gs(e)}isLocalQueryTarget(e){return this.so.activeTargetIds.has(e)}clearQueryState(e){delete this.oo[e]}getAllActiveQueryTargets(){return this.so.activeTargetIds}isActiveQueryTarget(e){return this.so.activeTargetIds.has(e)}start(){return this.so=new e7,Promise.resolve()}handleUserChange(e,r,n){}setOnlineState(e){}shutdown(){}writeSequenceNumber(e){}notifyBundleLoaded(e){}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Vxe{_o(e){}shutdown(){}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class t7{constructor(){this.ao=()=>this.uo(),this.co=()=>this.lo(),this.ho=[],this.Po()}_o(e){this.ho.push(e)}shutdown(){window.removeEventListener("online",this.ao),window.removeEventListener("offline",this.co)}Po(){window.addEventListener("online",this.ao),window.addEventListener("offline",this.co)}uo(){mr("ConnectivityMonitor","Network connectivity changed: AVAILABLE");for(const e of this.ho)e(0)}lo(){mr("ConnectivityMonitor","Network connectivity changed: UNAVAILABLE");for(const e of this.ho)e(1)}static D(){return typeof window<"u"&&window.addEventListener!==void 0&&window.removeEventListener!==void 0}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let SN=null;function Vj(){return SN===null?SN=function(){return 268435456+Math.round(2147483648*Math.random())}():SN++,"0x"+SN.toString(16)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Hxe={BatchGetDocuments:"batchGet",Commit:"commit",RunQuery:"runQuery",RunAggregationQuery:"runAggregationQuery"};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class $xe{constructor(e){this.Io=e.Io,this.To=e.To}Eo(e){this.Ao=e}Ro(e){this.Vo=e}mo(e){this.fo=e}onMessage(e){this.po=e}close(){this.To()}send(e){this.Io(e)}yo(){this.Ao()}wo(){this.Vo()}So(e){this.fo(e)}bo(e){this.po(e)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Zo="WebChannelConnection";class Kxe extends class{constructor(r){this.databaseInfo=r,this.databaseId=r.databaseId;const n=r.ssl?"https":"http",a=encodeURIComponent(this.databaseId.projectId),s=encodeURIComponent(this.databaseId.database);this.Do=n+"://"+r.host,this.vo=`projects/${a}/databases/${s}`,this.Co=this.databaseId.database==="(default)"?`project_id=${a}`:`project_id=${a}&database_id=${s}`}get Fo(){return!1}Mo(r,n,a,s,i){const l=Vj(),c=this.xo(r,n.toUriEncodedString());mr("RestConnection",`Sending RPC '${r}' ${l}:`,c,a);const u={"google-cloud-resource-prefix":this.vo,"x-goog-request-params":this.Co};return this.Oo(u,s,i),this.No(r,c,u,a).then(d=>(mr("RestConnection",`Received RPC '${r}' ${l}: `,d),d),d=>{throw R0("RestConnection",`RPC '${r}' ${l} failed with error: `,d,"url: ",c,"request:",a),d})}Lo(r,n,a,s,i,l){return this.Mo(r,n,a,s,i)}Oo(r,n,a){r["X-Goog-Api-Client"]=function(){return"gl-js/ fire/"+Bv}(),r["Content-Type"]="text/plain",this.databaseInfo.appId&&(r["X-Firebase-GMPID"]=this.databaseInfo.appId),n&&n.headers.forEach((s,i)=>r[i]=s),a&&a.headers.forEach((s,i)=>r[i]=s)}xo(r,n){const a=Hxe[r];return`${this.Do}/v1/${n}:${a}`}terminate(){}}{constructor(e){super(e),this.forceLongPolling=e.forceLongPolling,this.autoDetectLongPolling=e.autoDetectLongPolling,this.useFetchStreams=e.useFetchStreams,this.longPollingOptions=e.longPollingOptions}No(e,r,n,a){const s=Vj();return new Promise((i,l)=>{const c=new sY;c.setWithCredentials(!0),c.listenOnce(iY.COMPLETE,()=>{try{switch(c.getLastErrorCode()){case __.NO_ERROR:const d=c.getResponseJson();mr(Zo,`XHR for RPC '${e}' ${s} received:`,JSON.stringify(d)),i(d);break;case __.TIMEOUT:mr(Zo,`RPC '${e}' ${s} timed out`),l(new vr(Zt.DEADLINE_EXCEEDED,"Request time out"));break;case __.HTTP_ERROR:const f=c.getStatus();if(mr(Zo,`RPC '${e}' ${s} failed with status:`,f,"response text:",c.getResponseText()),f>0){let h=c.getResponseJson();Array.isArray(h)&&(h=h[0]);const A=h==null?void 0:h.error;if(A&&A.status&&A.message){const m=function(g){const x=g.toLowerCase().replace(/_/g,"-");return Object.values(Zt).indexOf(x)>=0?x:Zt.UNKNOWN}(A.status);l(new vr(m,A.message))}else l(new vr(Zt.UNKNOWN,"Server responded with status "+c.getStatus()))}else l(new vr(Zt.UNAVAILABLE,"Connection failed."));break;default:Ur()}}finally{mr(Zo,`RPC '${e}' ${s} completed.`)}});const u=JSON.stringify(a);mr(Zo,`RPC '${e}' ${s} sending request:`,a),c.send(r,"POST",u,n,15)})}Bo(e,r,n){const a=Vj(),s=[this.Do,"/","google.firestore.v1.Firestore","/",e,"/channel"],i=cY(),l=lY(),c={httpSessionIdParam:"gsessionid",initMessageHeaders:{},messageUrlParams:{database:`projects/${this.databaseId.projectId}/databases/${this.databaseId.database}`},sendRawJson:!0,supportsCrossDomainXhr:!0,internalChannelParams:{forwardChannelRequestTimeoutMs:6e5},forceLongPolling:this.forceLongPolling,detectBufferingProxy:this.autoDetectLongPolling},u=this.longPollingOptions.timeoutSeconds;u!==void 0&&(c.longPollingTimeout=Math.round(1e3*u)),this.useFetchStreams&&(c.useFetchStreams=!0),this.Oo(c.initMessageHeaders,r,n),c.encodeInitMessageHeaders=!0;const d=s.join("");mr(Zo,`Creating RPC '${e}' stream ${a}: ${d}`,c);const f=i.createWebChannel(d,c);let h=!1,A=!1;const m=new $xe({Io:g=>{A?mr(Zo,`Not sending because RPC '${e}' stream ${a} is closed:`,g):(h||(mr(Zo,`Opening RPC '${e}' stream ${a} transport.`),f.open(),h=!0),mr(Zo,`RPC '${e}' stream ${a} sending:`,g),f.send(g))},To:()=>f.close()}),p=(g,x,y)=>{g.listen(x,b=>{try{y(b)}catch(w){setTimeout(()=>{throw w},0)}})};return p(f,oy.EventType.OPEN,()=>{A||(mr(Zo,`RPC '${e}' stream ${a} transport opened.`),m.yo())}),p(f,oy.EventType.CLOSE,()=>{A||(A=!0,mr(Zo,`RPC '${e}' stream ${a} transport closed`),m.So())}),p(f,oy.EventType.ERROR,g=>{A||(A=!0,R0(Zo,`RPC '${e}' stream ${a} transport errored:`,g),m.So(new vr(Zt.UNAVAILABLE,"The operation could not be completed")))}),p(f,oy.EventType.MESSAGE,g=>{var x;if(!A){const y=g.data[0];Kr(!!y);const b=y,w=b.error||((x=b[0])===null||x===void 0?void 0:x.error);if(w){mr(Zo,`RPC '${e}' stream ${a} received error:`,w);const j=w.status;let I=function(S){const k=mi[S];if(k!==void 0)return qY(k)}(j),_=w.message;I===void 0&&(I=Zt.INTERNAL,_="Unknown error status: "+j+" with message "+w.message),A=!0,m.So(new vr(I,_)),f.close()}else mr(Zo,`RPC '${e}' stream ${a} received:`,y),m.bo(y)}}),p(l,oY.STAT_EVENT,g=>{g.stat===qP.PROXY?mr(Zo,`RPC '${e}' stream ${a} detected buffering proxy`):g.stat===qP.NOPROXY&&mr(Zo,`RPC '${e}' stream ${a} detected no buffering proxy`)}),setTimeout(()=>{m.wo()},0),m}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Gxe(){return typeof window<"u"?window:null}function T_(){return typeof document<"u"?document:null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function GI(t){return new zge(t,!0)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class a6{constructor(e,r,n=1e3,a=1.5,s=6e4){this.ui=e,this.timerId=r,this.ko=n,this.qo=a,this.Qo=s,this.Ko=0,this.$o=null,this.Uo=Date.now(),this.reset()}reset(){this.Ko=0}Wo(){this.Ko=this.Qo}Go(e){this.cancel();const r=Math.floor(this.Ko+this.zo()),n=Math.max(0,Date.now()-this.Uo),a=Math.max(0,r-n);a>0&&mr("ExponentialBackoff",`Backing off for ${a} ms (base delay: ${this.Ko} ms, delay with jitter: ${r} ms, last attempt: ${n} ms ago)`),this.$o=this.ui.enqueueAfterDelay(this.timerId,a,()=>(this.Uo=Date.now(),e())),this.Ko*=this.qo,this.Ko<this.ko&&(this.Ko=this.ko),this.Ko>this.Qo&&(this.Ko=this.Qo)}jo(){this.$o!==null&&(this.$o.skipDelay(),this.$o=null)}cancel(){this.$o!==null&&(this.$o.cancel(),this.$o=null)}zo(){return(Math.random()-.5)*this.Ko}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class CJ{constructor(e,r,n,a,s,i,l,c){this.ui=e,this.Ho=n,this.Jo=a,this.connection=s,this.authCredentialsProvider=i,this.appCheckCredentialsProvider=l,this.listener=c,this.state=0,this.Yo=0,this.Zo=null,this.Xo=null,this.stream=null,this.e_=0,this.t_=new a6(e,r)}n_(){return this.state===1||this.state===5||this.r_()}r_(){return this.state===2||this.state===3}start(){this.e_=0,this.state!==4?this.auth():this.i_()}async stop(){this.n_()&&await this.close(0)}s_(){this.state=0,this.t_.reset()}o_(){this.r_()&&this.Zo===null&&(this.Zo=this.ui.enqueueAfterDelay(this.Ho,6e4,()=>this.__()))}a_(e){this.u_(),this.stream.send(e)}async __(){if(this.r_())return this.close(0)}u_(){this.Zo&&(this.Zo.cancel(),this.Zo=null)}c_(){this.Xo&&(this.Xo.cancel(),this.Xo=null)}async close(e,r){this.u_(),this.c_(),this.t_.cancel(),this.Yo++,e!==4?this.t_.reset():r&&r.code===Zt.RESOURCE_EXHAUSTED?(Ml(r.toString()),Ml("Using maximum backoff delay to prevent overloading the backend."),this.t_.Wo()):r&&r.code===Zt.UNAUTHENTICATED&&this.state!==3&&(this.authCredentialsProvider.invalidateToken(),this.appCheckCredentialsProvider.invalidateToken()),this.stream!==null&&(this.l_(),this.stream.close(),this.stream=null),this.state=e,await this.listener.mo(r)}l_(){}auth(){this.state=1;const e=this.h_(this.Yo),r=this.Yo;Promise.all([this.authCredentialsProvider.getToken(),this.appCheckCredentialsProvider.getToken()]).then(([n,a])=>{this.Yo===r&&this.P_(n,a)},n=>{e(()=>{const a=new vr(Zt.UNKNOWN,"Fetching auth token failed: "+n.message);return this.I_(a)})})}P_(e,r){const n=this.h_(this.Yo);this.stream=this.T_(e,r),this.stream.Eo(()=>{n(()=>this.listener.Eo())}),this.stream.Ro(()=>{n(()=>(this.state=2,this.Xo=this.ui.enqueueAfterDelay(this.Jo,1e4,()=>(this.r_()&&(this.state=3),Promise.resolve())),this.listener.Ro()))}),this.stream.mo(a=>{n(()=>this.I_(a))}),this.stream.onMessage(a=>{n(()=>++this.e_==1?this.E_(a):this.onNext(a))})}i_(){this.state=5,this.t_.Go(async()=>{this.state=0,this.start()})}I_(e){return mr("PersistentStream",`close with error: ${e}`),this.stream=null,this.close(4,e)}h_(e){return r=>{this.ui.enqueueAndForget(()=>this.Yo===e?r():(mr("PersistentStream","stream callback skipped by getCloseGuardedDispatcher."),Promise.resolve()))}}}class qxe extends CJ{constructor(e,r,n,a,s,i){super(e,"listen_stream_connection_backoff","listen_stream_idle","health_check_timeout",r,n,a,i),this.serializer=s}T_(e,r){return this.connection.Bo("Listen",e,r)}E_(e){return this.onNext(e)}onNext(e){this.t_.reset();const r=Jge(this.serializer,e),n=function(s){if(!("targetChange"in s))return zr.min();const i=s.targetChange;return i.targetIds&&i.targetIds.length?zr.min():i.readTime?po(i.readTime):zr.min()}(e);return this.listener.d_(r,n)}A_(e){const r={};r.database=aT(this.serializer),r.addTarget=function(s,i){let l;const c=i.target;if(l=jE(c)?{documents:tJ(s,c)}:{query:rJ(s,c)._t},l.targetId=i.targetId,i.resumeToken.approximateByteSize()>0){l.resumeToken=XY(s,i.resumeToken);const u=rT(s,i.expectedCount);u!==null&&(l.expectedCount=u)}else if(i.snapshotVersion.compareTo(zr.min())>0){l.readTime=iv(s,i.snapshotVersion.toTimestamp());const u=rT(s,i.expectedCount);u!==null&&(l.expectedCount=u)}return l}(this.serializer,e);const n=exe(this.serializer,e);n&&(r.labels=n),this.a_(r)}R_(e){const r={};r.database=aT(this.serializer),r.removeTarget=e,this.a_(r)}}class zxe extends CJ{constructor(e,r,n,a,s,i){super(e,"write_stream_connection_backoff","write_stream_idle","health_check_timeout",r,n,a,i),this.serializer=s}get V_(){return this.e_>0}start(){this.lastStreamToken=void 0,super.start()}l_(){this.V_&&this.m_([])}T_(e,r){return this.connection.Bo("Write",e,r)}E_(e){return Kr(!!e.streamToken),this.lastStreamToken=e.streamToken,Kr(!e.writeResults||e.writeResults.length===0),this.listener.f_()}onNext(e){Kr(!!e.streamToken),this.lastStreamToken=e.streamToken,this.t_.reset();const r=Zge(e.writeResults,e.commitTime),n=po(e.commitTime);return this.listener.g_(n,r)}p_(){const e={};e.database=aT(this.serializer),this.a_(e)}m_(e){const r={streamToken:this.lastStreamToken,writes:e.map(n=>$b(this.serializer,n))};this.a_(r)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Wxe extends class{}{constructor(e,r,n,a){super(),this.authCredentials=e,this.appCheckCredentials=r,this.connection=n,this.serializer=a,this.y_=!1}w_(){if(this.y_)throw new vr(Zt.FAILED_PRECONDITION,"The client has already been terminated.")}Mo(e,r,n,a){return this.w_(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([s,i])=>this.connection.Mo(e,nT(r,n),a,s,i)).catch(s=>{throw s.name==="FirebaseError"?(s.code===Zt.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),s):new vr(Zt.UNKNOWN,s.toString())})}Lo(e,r,n,a,s){return this.w_(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([i,l])=>this.connection.Lo(e,nT(r,n),a,i,l,s)).catch(i=>{throw i.name==="FirebaseError"?(i.code===Zt.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),i):new vr(Zt.UNKNOWN,i.toString())})}terminate(){this.y_=!0,this.connection.terminate()}}class Xxe{constructor(e,r){this.asyncQueue=e,this.onlineStateHandler=r,this.state="Unknown",this.S_=0,this.b_=null,this.D_=!0}v_(){this.S_===0&&(this.C_("Unknown"),this.b_=this.asyncQueue.enqueueAfterDelay("online_state_timeout",1e4,()=>(this.b_=null,this.F_("Backend didn't respond within 10 seconds."),this.C_("Offline"),Promise.resolve())))}M_(e){this.state==="Online"?this.C_("Unknown"):(this.S_++,this.S_>=1&&(this.x_(),this.F_(`Connection failed 1 times. Most recent error: ${e.toString()}`),this.C_("Offline")))}set(e){this.x_(),this.S_=0,e==="Online"&&(this.D_=!1),this.C_(e)}C_(e){e!==this.state&&(this.state=e,this.onlineStateHandler(e))}F_(e){const r=`Could not reach Cloud Firestore backend. ${e}
This typically indicates that your device does not have a healthy Internet connection at the moment. The client will operate in offline mode until it is able to successfully connect to the backend.`;this.D_?(Ml(r),this.D_=!1):mr("OnlineStateTracker",r)}x_(){this.b_!==null&&(this.b_.cancel(),this.b_=null)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Yxe{constructor(e,r,n,a,s){this.localStore=e,this.datastore=r,this.asyncQueue=n,this.remoteSyncer={},this.O_=[],this.N_=new Map,this.L_=new Set,this.B_=[],this.k_=s,this.k_._o(i=>{n.enqueueAndForget(async()=>{Jp(this)&&(mr("RemoteStore","Restarting streams for network reachability change."),await async function(c){const u=dn(c);u.L_.add(4),await Y2(u),u.q_.set("Unknown"),u.L_.delete(4),await qI(u)}(this))})}),this.q_=new Xxe(n,a)}}async function qI(t){if(Jp(t))for(const e of t.B_)await e(!0)}async function Y2(t){for(const e of t.B_)await e(!1)}function _J(t,e){const r=dn(t);r.N_.has(e.targetId)||(r.N_.set(e.targetId,e),l6(r)?o6(r):Fv(r).r_()&&i6(r,e))}function s6(t,e){const r=dn(t),n=Fv(r);r.N_.delete(e),n.r_()&&EJ(r,e),r.N_.size===0&&(n.r_()?n.o_():Jp(r)&&r.q_.set("Unknown"))}function i6(t,e){if(t.Q_.xe(e.targetId),e.resumeToken.approximateByteSize()>0||e.snapshotVersion.compareTo(zr.min())>0){const r=t.remoteSyncer.getRemoteKeysForTarget(e.targetId).size;e=e.withExpectedCount(r)}Fv(t).A_(e)}function EJ(t,e){t.Q_.xe(e),Fv(t).R_(e)}function o6(t){t.Q_=new $ge({getRemoteKeysForTarget:e=>t.remoteSyncer.getRemoteKeysForTarget(e),ot:e=>t.N_.get(e)||null,tt:()=>t.datastore.serializer.databaseId}),Fv(t).start(),t.q_.v_()}function l6(t){return Jp(t)&&!Fv(t).n_()&&t.N_.size>0}function Jp(t){return dn(t).L_.size===0}function SJ(t){t.Q_=void 0}async function Jxe(t){t.q_.set("Online")}async function Zxe(t){t.N_.forEach((e,r)=>{i6(t,e)})}async function eve(t,e){SJ(t),l6(t)?(t.q_.M_(e),o6(t)):t.q_.set("Unknown")}async function tve(t,e,r){if(t.q_.set("Online"),e instanceof WY&&e.state===2&&e.cause)try{await async function(a,s){const i=s.cause;for(const l of s.targetIds)a.N_.has(l)&&(await a.remoteSyncer.rejectListen(l,i),a.N_.delete(l),a.Q_.removeTarget(l))}(t,e)}catch(n){mr("RemoteStore","Failed to remove targets %s: %s ",e.targetIds.join(","),n),await OE(t,n)}else if(e instanceof P_?t.Q_.Ke(e):e instanceof zY?t.Q_.He(e):t.Q_.We(e),!r.isEqual(zr.min()))try{const n=await wJ(t.localStore);r.compareTo(n)>=0&&await function(s,i){const l=s.Q_.rt(i);return l.targetChanges.forEach((c,u)=>{if(c.resumeToken.approximateByteSize()>0){const d=s.N_.get(u);d&&s.N_.set(u,d.withResumeToken(c.resumeToken,i))}}),l.targetMismatches.forEach((c,u)=>{const d=s.N_.get(c);if(!d)return;s.N_.set(c,d.withResumeToken(fi.EMPTY_BYTE_STRING,d.snapshotVersion)),EJ(s,c);const f=new pA(d.target,c,u,d.sequenceNumber);i6(s,f)}),s.remoteSyncer.applyRemoteEvent(l)}(t,r)}catch(n){mr("RemoteStore","Failed to raise snapshot:",n),await OE(t,n)}}async function OE(t,e,r){if(!rm(e))throw e;t.L_.add(1),await Y2(t),t.q_.set("Offline"),r||(r=()=>wJ(t.localStore)),t.asyncQueue.enqueueRetryable(async()=>{mr("RemoteStore","Retrying IndexedDB access"),await r(),t.L_.delete(1),await qI(t)})}function IJ(t,e){return e().catch(r=>OE(t,r,e))}async function J2(t){const e=dn(t),r=Q0(e);let n=e.O_.length>0?e.O_[e.O_.length-1].batchId:-1;for(;rve(e);)try{const a=await Lxe(e.localStore,n);if(a===null){e.O_.length===0&&r.o_();break}n=a.batchId,nve(e,a)}catch(a){await OE(e,a)}jJ(e)&&BJ(e)}function rve(t){return Jp(t)&&t.O_.length<10}function nve(t,e){t.O_.push(e);const r=Q0(t);r.r_()&&r.V_&&r.m_(e.mutations)}function jJ(t){return Jp(t)&&!Q0(t).n_()&&t.O_.length>0}function BJ(t){Q0(t).start()}async function ave(t){Q0(t).p_()}async function sve(t){const e=Q0(t);for(const r of t.O_)e.m_(r.mutations)}async function ive(t,e,r){const n=t.O_.shift(),a=WO.from(n,e,r);await IJ(t,()=>t.remoteSyncer.applySuccessfulWrite(a)),await J2(t)}async function ove(t,e){e&&Q0(t).V_&&await async function(n,a){if(function(i){return GY(i)&&i!==Zt.ABORTED}(a.code)){const s=n.O_.shift();Q0(n).s_(),await IJ(n,()=>n.remoteSyncer.rejectFailedWrite(s.batchId,a)),await J2(n)}}(t,e),jJ(t)&&BJ(t)}async function r7(t,e){const r=dn(t);r.asyncQueue.verifyOperationInProgress(),mr("RemoteStore","RemoteStore received new credentials");const n=Jp(r);r.L_.add(3),await Y2(r),n&&r.q_.set("Unknown"),await r.remoteSyncer.handleCredentialChange(e),r.L_.delete(3),await qI(r)}async function lve(t,e){const r=dn(t);e?(r.L_.delete(2),await qI(r)):e||(r.L_.add(2),await Y2(r),r.q_.set("Unknown"))}function Fv(t){return t.K_||(t.K_=function(r,n,a){const s=dn(r);return s.w_(),new qxe(n,s.connection,s.authCredentials,s.appCheckCredentials,s.serializer,a)}(t.datastore,t.asyncQueue,{Eo:Jxe.bind(null,t),Ro:Zxe.bind(null,t),mo:eve.bind(null,t),d_:tve.bind(null,t)}),t.B_.push(async e=>{e?(t.K_.s_(),l6(t)?o6(t):t.q_.set("Unknown")):(await t.K_.stop(),SJ(t))})),t.K_}function Q0(t){return t.U_||(t.U_=function(r,n,a){const s=dn(r);return s.w_(),new zxe(n,s.connection,s.authCredentials,s.appCheckCredentials,s.serializer,a)}(t.datastore,t.asyncQueue,{Eo:()=>Promise.resolve(),Ro:ave.bind(null,t),mo:ove.bind(null,t),f_:sve.bind(null,t),g_:ive.bind(null,t)}),t.B_.push(async e=>{e?(t.U_.s_(),await J2(t)):(await t.U_.stop(),t.O_.length>0&&(mr("RemoteStore",`Stopping write stream with ${t.O_.length} pending writes`),t.O_=[]))})),t.U_}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class c6{constructor(e,r,n,a,s){this.asyncQueue=e,this.timerId=r,this.targetTimeMs=n,this.op=a,this.removalCallback=s,this.deferred=new Sd,this.then=this.deferred.promise.then.bind(this.deferred.promise),this.deferred.promise.catch(i=>{})}get promise(){return this.deferred.promise}static createAndSchedule(e,r,n,a,s){const i=Date.now()+n,l=new c6(e,r,i,a,s);return l.start(n),l}start(e){this.timerHandle=setTimeout(()=>this.handleDelayElapsed(),e)}skipDelay(){return this.handleDelayElapsed()}cancel(e){this.timerHandle!==null&&(this.clearTimeout(),this.deferred.reject(new vr(Zt.CANCELLED,"Operation cancelled"+(e?": "+e:""))))}handleDelayElapsed(){this.asyncQueue.enqueueAndForget(()=>this.timerHandle!==null?(this.clearTimeout(),this.op().then(e=>this.deferred.resolve(e))):Promise.resolve())}clearTimeout(){this.timerHandle!==null&&(this.removalCallback(this),clearTimeout(this.timerHandle),this.timerHandle=null)}}function u6(t,e){if(Ml("AsyncQueue",`${e}: ${t}`),rm(t))return new vr(Zt.UNAVAILABLE,`${e}: ${t}`);throw t}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Rx{constructor(e){this.comparator=e?(r,n)=>e(r,n)||jr.comparator(r.key,n.key):(r,n)=>jr.comparator(r.key,n.key),this.keyedMap=ly(),this.sortedSet=new xs(this.comparator)}static emptySet(e){return new Rx(e.comparator)}has(e){return this.keyedMap.get(e)!=null}get(e){return this.keyedMap.get(e)}first(){return this.sortedSet.minKey()}last(){return this.sortedSet.maxKey()}isEmpty(){return this.sortedSet.isEmpty()}indexOf(e){const r=this.keyedMap.get(e);return r?this.sortedSet.indexOf(r):-1}get size(){return this.sortedSet.size}forEach(e){this.sortedSet.inorderTraversal((r,n)=>(e(r),!1))}add(e){const r=this.delete(e.key);return r.copy(r.keyedMap.insert(e.key,e),r.sortedSet.insert(e,null))}delete(e){const r=this.get(e);return r?this.copy(this.keyedMap.remove(e),this.sortedSet.remove(r)):this}isEqual(e){if(!(e instanceof Rx)||this.size!==e.size)return!1;const r=this.sortedSet.getIterator(),n=e.sortedSet.getIterator();for(;r.hasNext();){const a=r.getNext().key,s=n.getNext().key;if(!a.isEqual(s))return!1}return!0}toString(){const e=[];return this.forEach(r=>{e.push(r.toString())}),e.length===0?"DocumentSet ()":`DocumentSet (
  `+e.join(`  
`)+`
)`}copy(e,r){const n=new Rx;return n.comparator=this.comparator,n.keyedMap=e,n.sortedSet=r,n}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class n7{constructor(){this.W_=new xs(jr.comparator)}track(e){const r=e.doc.key,n=this.W_.get(r);n?e.type!==0&&n.type===3?this.W_=this.W_.insert(r,e):e.type===3&&n.type!==1?this.W_=this.W_.insert(r,{type:n.type,doc:e.doc}):e.type===2&&n.type===2?this.W_=this.W_.insert(r,{type:2,doc:e.doc}):e.type===2&&n.type===0?this.W_=this.W_.insert(r,{type:0,doc:e.doc}):e.type===1&&n.type===0?this.W_=this.W_.remove(r):e.type===1&&n.type===2?this.W_=this.W_.insert(r,{type:1,doc:n.doc}):e.type===0&&n.type===1?this.W_=this.W_.insert(r,{type:2,doc:e.doc}):Ur():this.W_=this.W_.insert(r,e)}G_(){const e=[];return this.W_.inorderTraversal((r,n)=>{e.push(n)}),e}}class ov{constructor(e,r,n,a,s,i,l,c,u){this.query=e,this.docs=r,this.oldDocs=n,this.docChanges=a,this.mutatedKeys=s,this.fromCache=i,this.syncStateChanged=l,this.excludesMetadataChanges=c,this.hasCachedResults=u}static fromInitialDocuments(e,r,n,a,s){const i=[];return r.forEach(l=>{i.push({type:0,doc:l})}),new ov(e,r,Rx.emptySet(r),i,n,a,!0,!1,s)}get hasPendingWrites(){return!this.mutatedKeys.isEmpty()}isEqual(e){if(!(this.fromCache===e.fromCache&&this.hasCachedResults===e.hasCachedResults&&this.syncStateChanged===e.syncStateChanged&&this.mutatedKeys.isEqual(e.mutatedKeys)&&LI(this.query,e.query)&&this.docs.isEqual(e.docs)&&this.oldDocs.isEqual(e.oldDocs)))return!1;const r=this.docChanges,n=e.docChanges;if(r.length!==n.length)return!1;for(let a=0;a<r.length;a++)if(r[a].type!==n[a].type||!r[a].doc.isEqual(n[a].doc))return!1;return!0}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class cve{constructor(){this.z_=void 0,this.j_=[]}H_(){return this.j_.some(e=>e.J_())}}class uve{constructor(){this.queries=a7(),this.onlineState="Unknown",this.Y_=new Set}terminate(){(function(r,n){const a=dn(r),s=a.queries;a.queries=a7(),s.forEach((i,l)=>{for(const c of l.j_)c.onError(n)})})(this,new vr(Zt.ABORTED,"Firestore shutting down"))}}function a7(){return new nm(t=>FY(t),LI)}async function d6(t,e){const r=dn(t);let n=3;const a=e.query;let s=r.queries.get(a);s?!s.H_()&&e.J_()&&(n=2):(s=new cve,n=e.J_()?0:1);try{switch(n){case 0:s.z_=await r.onListen(a,!0);break;case 1:s.z_=await r.onListen(a,!1);break;case 2:await r.onFirstRemoteStoreListen(a)}}catch(i){const l=u6(i,`Initialization of query '${Yg(e.query)}' failed`);return void e.onError(l)}r.queries.set(a,s),s.j_.push(e),e.Z_(r.onlineState),s.z_&&e.X_(s.z_)&&A6(r)}async function f6(t,e){const r=dn(t),n=e.query;let a=3;const s=r.queries.get(n);if(s){const i=s.j_.indexOf(e);i>=0&&(s.j_.splice(i,1),s.j_.length===0?a=e.J_()?0:1:!s.H_()&&e.J_()&&(a=2))}switch(a){case 0:return r.queries.delete(n),r.onUnlisten(n,!0);case 1:return r.queries.delete(n),r.onUnlisten(n,!1);case 2:return r.onLastRemoteStoreUnlisten(n);default:return}}function dve(t,e){const r=dn(t);let n=!1;for(const a of e){const s=a.query,i=r.queries.get(s);if(i){for(const l of i.j_)l.X_(a)&&(n=!0);i.z_=a}}n&&A6(r)}function fve(t,e,r){const n=dn(t),a=n.queries.get(e);if(a)for(const s of a.j_)s.onError(r);n.queries.delete(e)}function A6(t){t.Y_.forEach(e=>{e.next()})}var uT,s7;(s7=uT||(uT={})).ea="default",s7.Cache="cache";class h6{constructor(e,r,n){this.query=e,this.ta=r,this.na=!1,this.ra=null,this.onlineState="Unknown",this.options=n||{}}X_(e){if(!this.options.includeMetadataChanges){const n=[];for(const a of e.docChanges)a.type!==3&&n.push(a);e=new ov(e.query,e.docs,e.oldDocs,n,e.mutatedKeys,e.fromCache,e.syncStateChanged,!0,e.hasCachedResults)}let r=!1;return this.na?this.ia(e)&&(this.ta.next(e),r=!0):this.sa(e,this.onlineState)&&(this.oa(e),r=!0),this.ra=e,r}onError(e){this.ta.error(e)}Z_(e){this.onlineState=e;let r=!1;return this.ra&&!this.na&&this.sa(this.ra,e)&&(this.oa(this.ra),r=!0),r}sa(e,r){if(!e.fromCache||!this.J_())return!0;const n=r!=="Offline";return(!this.options._a||!n)&&(!e.docs.isEmpty()||e.hasCachedResults||r==="Offline")}ia(e){if(e.docChanges.length>0)return!0;const r=this.ra&&this.ra.hasPendingWrites!==e.hasPendingWrites;return!(!e.syncStateChanged&&!r)&&this.options.includeMetadataChanges===!0}oa(e){e=ov.fromInitialDocuments(e.query,e.docs,e.mutatedKeys,e.fromCache,e.hasCachedResults),this.na=!0,this.ta.next(e)}J_(){return this.options.source!==uT.Cache}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class PJ{constructor(e){this.key=e}}class TJ{constructor(e){this.key=e}}class Ave{constructor(e,r){this.query=e,this.Ta=r,this.Ea=null,this.hasCachedResults=!1,this.current=!1,this.da=Sn(),this.mutatedKeys=Sn(),this.Aa=OY(e),this.Ra=new Rx(this.Aa)}get Va(){return this.Ta}ma(e,r){const n=r?r.fa:new n7,a=r?r.Ra:this.Ra;let s=r?r.mutatedKeys:this.mutatedKeys,i=a,l=!1;const c=this.query.limitType==="F"&&a.size===this.query.limit?a.last():null,u=this.query.limitType==="L"&&a.size===this.query.limit?a.first():null;if(e.inorderTraversal((d,f)=>{const h=a.get(d),A=W2(this.query,f)?f:null,m=!!h&&this.mutatedKeys.has(h.key),p=!!A&&(A.hasLocalMutations||this.mutatedKeys.has(A.key)&&A.hasCommittedMutations);let g=!1;h&&A?h.data.isEqual(A.data)?m!==p&&(n.track({type:3,doc:A}),g=!0):this.ga(h,A)||(n.track({type:2,doc:A}),g=!0,(c&&this.Aa(A,c)>0||u&&this.Aa(A,u)<0)&&(l=!0)):!h&&A?(n.track({type:0,doc:A}),g=!0):h&&!A&&(n.track({type:1,doc:h}),g=!0,(c||u)&&(l=!0)),g&&(A?(i=i.add(A),s=p?s.add(d):s.delete(d)):(i=i.delete(d),s=s.delete(d)))}),this.query.limit!==null)for(;i.size>this.query.limit;){const d=this.query.limitType==="F"?i.last():i.first();i=i.delete(d.key),s=s.delete(d.key),n.track({type:1,doc:d})}return{Ra:i,fa:n,ns:l,mutatedKeys:s}}ga(e,r){return e.hasLocalMutations&&r.hasCommittedMutations&&!r.hasLocalMutations}applyChanges(e,r,n,a){const s=this.Ra;this.Ra=e.Ra,this.mutatedKeys=e.mutatedKeys;const i=e.fa.G_();i.sort((d,f)=>function(A,m){const p=g=>{switch(g){case 0:return 1;case 2:case 3:return 2;case 1:return 0;default:return Ur()}};return p(A)-p(m)}(d.type,f.type)||this.Aa(d.doc,f.doc)),this.pa(n),a=a!=null&&a;const l=r&&!a?this.ya():[],c=this.da.size===0&&this.current&&!a?1:0,u=c!==this.Ea;return this.Ea=c,i.length!==0||u?{snapshot:new ov(this.query,e.Ra,s,i,e.mutatedKeys,c===0,u,!1,!!n&&n.resumeToken.approximateByteSize()>0),wa:l}:{wa:l}}Z_(e){return this.current&&e==="Offline"?(this.current=!1,this.applyChanges({Ra:this.Ra,fa:new n7,mutatedKeys:this.mutatedKeys,ns:!1},!1)):{wa:[]}}Sa(e){return!this.Ta.has(e)&&!!this.Ra.has(e)&&!this.Ra.get(e).hasLocalMutations}pa(e){e&&(e.addedDocuments.forEach(r=>this.Ta=this.Ta.add(r)),e.modifiedDocuments.forEach(r=>{}),e.removedDocuments.forEach(r=>this.Ta=this.Ta.delete(r)),this.current=e.current)}ya(){if(!this.current)return[];const e=this.da;this.da=Sn(),this.Ra.forEach(n=>{this.Sa(n.key)&&(this.da=this.da.add(n.key))});const r=[];return e.forEach(n=>{this.da.has(n)||r.push(new TJ(n))}),this.da.forEach(n=>{e.has(n)||r.push(new PJ(n))}),r}ba(e){this.Ta=e.Ts,this.da=Sn();const r=this.ma(e.documents);return this.applyChanges(r,!0)}Da(){return ov.fromInitialDocuments(this.query,this.Ra,this.mutatedKeys,this.Ea===0,this.hasCachedResults)}}class hve{constructor(e,r,n){this.query=e,this.targetId=r,this.view=n}}class mve{constructor(e){this.key=e,this.va=!1}}class pve{constructor(e,r,n,a,s,i){this.localStore=e,this.remoteStore=r,this.eventManager=n,this.sharedClientState=a,this.currentUser=s,this.maxConcurrentLimboResolutions=i,this.Ca={},this.Fa=new nm(l=>FY(l),LI),this.Ma=new Map,this.xa=new Set,this.Oa=new xs(jr.comparator),this.Na=new Map,this.La=new t6,this.Ba={},this.ka=new Map,this.qa=Bp.kn(),this.onlineState="Unknown",this.Qa=void 0}get isPrimaryClient(){return this.Qa===!0}}async function gve(t,e,r=!0){const n=MJ(t);let a;const s=n.Fa.get(e);return s?(n.sharedClientState.addLocalQueryTarget(s.targetId),a=s.view.Da()):a=await kJ(n,e,r,!0),a}async function xve(t,e){const r=MJ(t);await kJ(r,e,!0,!1)}async function kJ(t,e,r,n){const a=await Uxe(t.localStore,Qu(e)),s=a.targetId,i=t.sharedClientState.addLocalQueryTarget(s,r);let l;return n&&(l=await vve(t,e,s,i==="current",a.resumeToken)),t.isPrimaryClient&&r&&_J(t.remoteStore,a),l}async function vve(t,e,r,n,a){t.Ka=(f,h,A)=>async function(p,g,x,y){let b=g.view.ma(x);b.ns&&(b=await ZU(p.localStore,g.query,!1).then(({documents:_})=>g.view.ma(_,b)));const w=y&&y.targetChanges.get(g.targetId),j=y&&y.targetMismatches.get(g.targetId)!=null,I=g.view.applyChanges(b,p.isPrimaryClient,w,j);return o7(p,g.targetId,I.wa),I.snapshot}(t,f,h,A);const s=await ZU(t.localStore,e,!0),i=new Ave(e,s.Ts),l=i.ma(s.documents),c=X2.createSynthesizedTargetChangeForCurrentChange(r,n&&t.onlineState!=="Offline",a),u=i.applyChanges(l,t.isPrimaryClient,c);o7(t,r,u.wa);const d=new hve(e,r,i);return t.Fa.set(e,d),t.Ma.has(r)?t.Ma.get(r).push(e):t.Ma.set(r,[e]),u.snapshot}async function yve(t,e,r){const n=dn(t),a=n.Fa.get(e),s=n.Ma.get(a.targetId);if(s.length>1)return n.Ma.set(a.targetId,s.filter(i=>!LI(i,e))),void n.Fa.delete(e);n.isPrimaryClient?(n.sharedClientState.removeLocalQueryTarget(a.targetId),n.sharedClientState.isActiveQueryTarget(a.targetId)||await cT(n.localStore,a.targetId,!1).then(()=>{n.sharedClientState.clearQueryState(a.targetId),r&&s6(n.remoteStore,a.targetId),dT(n,a.targetId)}).catch(Xp)):(dT(n,a.targetId),await cT(n.localStore,a.targetId,!0))}async function bve(t,e){const r=dn(t),n=r.Fa.get(e),a=r.Ma.get(n.targetId);r.isPrimaryClient&&a.length===1&&(r.sharedClientState.removeLocalQueryTarget(n.targetId),s6(r.remoteStore,n.targetId))}async function wve(t,e,r){const n=LJ(t);try{const a=await function(i,l){const c=dn(i),u=fr.now(),d=l.reduce((A,m)=>A.add(m.key),Sn());let f,h;return c.persistence.runTransaction("Locally write mutations","readwrite",A=>{let m=$c(),p=Sn();return c.cs.getEntries(A,d).next(g=>{m=g,m.forEach((x,y)=>{y.isValidDocument()||(p=p.add(x))})}).next(()=>c.localDocuments.getOverlayedDocuments(A,m)).next(g=>{f=g;const x=[];for(const y of l){const b=Uge(y,f.get(y.key).overlayedDocument);b!=null&&x.push(new eh(y.key,b,_Y(b.value.mapValue),ms.exists(!0)))}return c.mutationQueue.addMutationBatch(A,u,x,l)}).next(g=>{h=g;const x=g.applyToLocalDocumentSet(f,p);return c.documentOverlayCache.saveOverlays(A,g.batchId,x)})}).then(()=>({batchId:h.batchId,changes:RY(f)}))}(n.localStore,e);n.sharedClientState.addPendingMutation(a.batchId),function(i,l,c){let u=i.Ba[i.currentUser.toKey()];u||(u=new xs(gn)),u=u.insert(l,c),i.Ba[i.currentUser.toKey()]=u}(n,a.batchId,r),await Z2(n,a.changes),await J2(n.remoteStore)}catch(a){const s=u6(a,"Failed to persist write");r.reject(s)}}async function FJ(t,e){const r=dn(t);try{const n=await Rxe(r.localStore,e);e.targetChanges.forEach((a,s)=>{const i=r.Na.get(s);i&&(Kr(a.addedDocuments.size+a.modifiedDocuments.size+a.removedDocuments.size<=1),a.addedDocuments.size>0?i.va=!0:a.modifiedDocuments.size>0?Kr(i.va):a.removedDocuments.size>0&&(Kr(i.va),i.va=!1))}),await Z2(r,n,e)}catch(n){await Xp(n)}}function i7(t,e,r){const n=dn(t);if(n.isPrimaryClient&&r===0||!n.isPrimaryClient&&r===1){const a=[];n.Fa.forEach((s,i)=>{const l=i.view.Z_(e);l.snapshot&&a.push(l.snapshot)}),function(i,l){const c=dn(i);c.onlineState=l;let u=!1;c.queries.forEach((d,f)=>{for(const h of f.j_)h.Z_(l)&&(u=!0)}),u&&A6(c)}(n.eventManager,e),a.length&&n.Ca.d_(a),n.onlineState=e,n.isPrimaryClient&&n.sharedClientState.setOnlineState(e)}}async function Nve(t,e,r){const n=dn(t);n.sharedClientState.updateQueryState(e,"rejected",r);const a=n.Na.get(e),s=a&&a.key;if(s){let i=new xs(jr.comparator);i=i.insert(s,As.newNoDocument(s,zr.min()));const l=Sn().add(s),c=new VI(zr.min(),new Map,new xs(gn),i,l);await FJ(n,c),n.Oa=n.Oa.remove(s),n.Na.delete(e),m6(n)}else await cT(n.localStore,e,!1).then(()=>dT(n,e,r)).catch(Xp)}async function Cve(t,e){const r=dn(t),n=e.batch.batchId;try{const a=await Dxe(r.localStore,e);DJ(r,n,null),OJ(r,n),r.sharedClientState.updateMutationState(n,"acknowledged"),await Z2(r,a)}catch(a){await Xp(a)}}async function _ve(t,e,r){const n=dn(t);try{const a=await function(i,l){const c=dn(i);return c.persistence.runTransaction("Reject batch","readwrite-primary",u=>{let d;return c.mutationQueue.lookupMutationBatch(u,l).next(f=>(Kr(f!==null),d=f.keys(),c.mutationQueue.removeMutationBatch(u,f))).next(()=>c.mutationQueue.performConsistencyCheck(u)).next(()=>c.documentOverlayCache.removeOverlaysForBatchId(u,d,l)).next(()=>c.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(u,d)).next(()=>c.localDocuments.getDocuments(u,d))})}(n.localStore,e);DJ(n,e,r),OJ(n,e),n.sharedClientState.updateMutationState(e,"rejected",r),await Z2(n,a)}catch(a){await Xp(a)}}function OJ(t,e){(t.ka.get(e)||[]).forEach(r=>{r.resolve()}),t.ka.delete(e)}function DJ(t,e,r){const n=dn(t);let a=n.Ba[n.currentUser.toKey()];if(a){const s=a.get(e);s&&(r?s.reject(r):s.resolve(),a=a.remove(e)),n.Ba[n.currentUser.toKey()]=a}}function dT(t,e,r=null){t.sharedClientState.removeLocalQueryTarget(e);for(const n of t.Ma.get(e))t.Fa.delete(n),r&&t.Ca.$a(n,r);t.Ma.delete(e),t.isPrimaryClient&&t.La.gr(e).forEach(n=>{t.La.containsKey(n)||RJ(t,n)})}function RJ(t,e){t.xa.delete(e.path.canonicalString());const r=t.Oa.get(e);r!==null&&(s6(t.remoteStore,r),t.Oa=t.Oa.remove(e),t.Na.delete(r),m6(t))}function o7(t,e,r){for(const n of r)n instanceof PJ?(t.La.addReference(n.key,e),Eve(t,n)):n instanceof TJ?(mr("SyncEngine","Document no longer in limbo: "+n.key),t.La.removeReference(n.key,e),t.La.containsKey(n.key)||RJ(t,n.key)):Ur()}function Eve(t,e){const r=e.key,n=r.path.canonicalString();t.Oa.get(r)||t.xa.has(n)||(mr("SyncEngine","New document in limbo: "+r),t.xa.add(n),m6(t))}function m6(t){for(;t.xa.size>0&&t.Oa.size<t.maxConcurrentLimboResolutions;){const e=t.xa.values().next().value;t.xa.delete(e);const r=new jr(ea.fromString(e)),n=t.qa.next();t.Na.set(n,new mve(r)),t.Oa=t.Oa.insert(r,n),_J(t.remoteStore,new pA(Qu(z2(r.path)),n,"TargetPurposeLimboResolution",Ou.oe))}}async function Z2(t,e,r){const n=dn(t),a=[],s=[],i=[];n.Fa.isEmpty()||(n.Fa.forEach((l,c)=>{i.push(n.Ka(c,e,r).then(u=>{var d;if((u||r)&&n.isPrimaryClient){const f=u?!u.fromCache:(d=r==null?void 0:r.targetChanges.get(c.targetId))===null||d===void 0?void 0:d.current;n.sharedClientState.updateQueryState(c.targetId,f?"current":"not-current")}if(u){a.push(u);const f=n6.Wi(c.targetId,u);s.push(f)}}))}),await Promise.all(i),n.Ca.d_(a),await async function(c,u){const d=dn(c);try{await d.persistence.runTransaction("notifyLocalViewChanges","readwrite",f=>Ft.forEach(u,h=>Ft.forEach(h.$i,A=>d.persistence.referenceDelegate.addReference(f,h.targetId,A)).next(()=>Ft.forEach(h.Ui,A=>d.persistence.referenceDelegate.removeReference(f,h.targetId,A)))))}catch(f){if(!rm(f))throw f;mr("LocalStore","Failed to update sequence numbers: "+f)}for(const f of u){const h=f.targetId;if(!f.fromCache){const A=d.os.get(h),m=A.snapshotVersion,p=A.withLastLimboFreeSnapshotVersion(m);d.os=d.os.insert(h,p)}}}(n.localStore,s))}async function Sve(t,e){const r=dn(t);if(!r.currentUser.isEqual(e)){mr("SyncEngine","User change. New user:",e.toKey());const n=await bJ(r.localStore,e);r.currentUser=e,function(s,i){s.ka.forEach(l=>{l.forEach(c=>{c.reject(new vr(Zt.CANCELLED,i))})}),s.ka.clear()}(r,"'waitForPendingWrites' promise is rejected due to a user change."),r.sharedClientState.handleUserChange(e,n.removedBatchIds,n.addedBatchIds),await Z2(r,n.hs)}}function Ive(t,e){const r=dn(t),n=r.Na.get(e);if(n&&n.va)return Sn().add(n.key);{let a=Sn();const s=r.Ma.get(e);if(!s)return a;for(const i of s){const l=r.Fa.get(i);a=a.unionWith(l.view.Va)}return a}}function MJ(t){const e=dn(t);return e.remoteStore.remoteSyncer.applyRemoteEvent=FJ.bind(null,e),e.remoteStore.remoteSyncer.getRemoteKeysForTarget=Ive.bind(null,e),e.remoteStore.remoteSyncer.rejectListen=Nve.bind(null,e),e.Ca.d_=dve.bind(null,e.eventManager),e.Ca.$a=fve.bind(null,e.eventManager),e}function LJ(t){const e=dn(t);return e.remoteStore.remoteSyncer.applySuccessfulWrite=Cve.bind(null,e),e.remoteStore.remoteSyncer.rejectFailedWrite=_ve.bind(null,e),e}class Kb{constructor(){this.kind="memory",this.synchronizeTabs=!1}async initialize(e){this.serializer=GI(e.databaseInfo.databaseId),this.sharedClientState=this.Wa(e),this.persistence=this.Ga(e),await this.persistence.start(),this.localStore=this.za(e),this.gcScheduler=this.ja(e,this.localStore),this.indexBackfillerScheduler=this.Ha(e,this.localStore)}ja(e,r){return null}Ha(e,r){return null}za(e){return yJ(this.persistence,new vJ,e.initialUser,this.serializer)}Ga(e){return new xJ(KI.Zr,this.serializer)}Wa(e){return new NJ}async terminate(){var e,r;(e=this.gcScheduler)===null||e===void 0||e.stop(),(r=this.indexBackfillerScheduler)===null||r===void 0||r.stop(),this.sharedClientState.shutdown(),await this.persistence.shutdown()}}Kb.provider={build:()=>new Kb};class jve extends Kb{constructor(e,r,n){super(),this.Ja=e,this.cacheSizeBytes=r,this.forceOwnership=n,this.kind="persistent",this.synchronizeTabs=!1}async initialize(e){await super.initialize(e),await this.Ja.initialize(this,e),await LJ(this.Ja.syncEngine),await J2(this.Ja.remoteStore),await this.persistence.yi(()=>(this.gcScheduler&&!this.gcScheduler.started&&this.gcScheduler.start(),this.indexBackfillerScheduler&&!this.indexBackfillerScheduler.started&&this.indexBackfillerScheduler.start(),Promise.resolve()))}za(e){return yJ(this.persistence,new vJ,e.initialUser,this.serializer)}ja(e,r){const n=this.persistence.referenceDelegate.garbageCollector;return new gxe(n,e.asyncQueue,r)}Ha(e,r){const n=new Kpe(r,this.persistence);return new $pe(e.asyncQueue,n)}Ga(e){const r=kxe(e.databaseInfo.databaseId,e.databaseInfo.persistenceKey),n=this.cacheSizeBytes!==void 0?ac.withCacheSize(this.cacheSizeBytes):ac.DEFAULT;return new r6(this.synchronizeTabs,r,e.clientId,n,e.asyncQueue,Gxe(),T_(),this.serializer,this.sharedClientState,!!this.forceOwnership)}Wa(e){return new NJ}}class DE{async initialize(e,r){this.localStore||(this.localStore=e.localStore,this.sharedClientState=e.sharedClientState,this.datastore=this.createDatastore(r),this.remoteStore=this.createRemoteStore(r),this.eventManager=this.createEventManager(r),this.syncEngine=this.createSyncEngine(r,!e.synchronizeTabs),this.sharedClientState.onlineStateHandler=n=>i7(this.syncEngine,n,1),this.remoteStore.remoteSyncer.handleCredentialChange=Sve.bind(null,this.syncEngine),await lve(this.remoteStore,this.syncEngine.isPrimaryClient))}createEventManager(e){return function(){return new uve}()}createDatastore(e){const r=GI(e.databaseInfo.databaseId),n=function(s){return new Kxe(s)}(e.databaseInfo);return function(s,i,l,c){return new Wxe(s,i,l,c)}(e.authCredentials,e.appCheckCredentials,n,r)}createRemoteStore(e){return function(n,a,s,i,l){return new Yxe(n,a,s,i,l)}(this.localStore,this.datastore,e.asyncQueue,r=>i7(this.syncEngine,r,0),function(){return t7.D()?new t7:new Vxe}())}createSyncEngine(e,r){return function(a,s,i,l,c,u,d){const f=new pve(a,s,i,l,c,u);return d&&(f.Qa=!0),f}(this.localStore,this.remoteStore,this.eventManager,this.sharedClientState,e.initialUser,e.maxConcurrentLimboResolutions,r)}async terminate(){var e,r;await async function(a){const s=dn(a);mr("RemoteStore","RemoteStore shutting down."),s.L_.add(5),await Y2(s),s.k_.shutdown(),s.q_.set("Unknown")}(this.remoteStore),(e=this.datastore)===null||e===void 0||e.terminate(),(r=this.eventManager)===null||r===void 0||r.terminate()}}DE.provider={build:()=>new DE};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class p6{constructor(e){this.observer=e,this.muted=!1}next(e){this.muted||this.observer.next&&this.Ya(this.observer.next,e)}error(e){this.muted||(this.observer.error?this.Ya(this.observer.error,e):Ml("Uncaught Error in snapshot listener:",e.toString()))}Za(){this.muted=!0}Ya(e,r){setTimeout(()=>{this.muted||e(r)},0)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Bve{constructor(e){this.datastore=e,this.readVersions=new Map,this.mutations=[],this.committed=!1,this.lastTransactionError=null,this.writtenDocs=new Set}async lookup(e){if(this.ensureCommitNotCalled(),this.mutations.length>0)throw this.lastTransactionError=new vr(Zt.INVALID_ARGUMENT,"Firestore transactions require all reads to be executed before all writes."),this.lastTransactionError;const r=await async function(a,s){const i=dn(a),l={documents:s.map(f=>Hb(i.serializer,f))},c=await i.Lo("BatchGetDocuments",i.serializer.databaseId,ea.emptyPath(),l,s.length),u=new Map;c.forEach(f=>{const h=Yge(i.serializer,f);u.set(h.key.toString(),h)});const d=[];return s.forEach(f=>{const h=u.get(f.toString());Kr(!!h),d.push(h)}),d}(this.datastore,e);return r.forEach(n=>this.recordVersion(n)),r}set(e,r){this.write(r.toMutation(e,this.precondition(e))),this.writtenDocs.add(e.toString())}update(e,r){try{this.write(r.toMutation(e,this.preconditionForUpdate(e)))}catch(n){this.lastTransactionError=n}this.writtenDocs.add(e.toString())}delete(e){this.write(new kv(e,this.precondition(e))),this.writtenDocs.add(e.toString())}async commit(){if(this.ensureCommitNotCalled(),this.lastTransactionError)throw this.lastTransactionError;const e=this.readVersions;this.mutations.forEach(r=>{e.delete(r.key.toString())}),e.forEach((r,n)=>{const a=jr.fromPath(n);this.mutations.push(new qO(a,this.precondition(a)))}),await async function(n,a){const s=dn(n),i={writes:a.map(l=>$b(s.serializer,l))};await s.Mo("Commit",s.serializer.databaseId,ea.emptyPath(),i)}(this.datastore,this.mutations),this.committed=!0}recordVersion(e){let r;if(e.isFoundDocument())r=e.version;else{if(!e.isNoDocument())throw Ur();r=zr.min()}const n=this.readVersions.get(e.key.toString());if(n){if(!r.isEqual(n))throw new vr(Zt.ABORTED,"Document version changed between two reads.")}else this.readVersions.set(e.key.toString(),r)}precondition(e){const r=this.readVersions.get(e.toString());return!this.writtenDocs.has(e.toString())&&r?r.isEqual(zr.min())?ms.exists(!1):ms.updateTime(r):ms.none()}preconditionForUpdate(e){const r=this.readVersions.get(e.toString());if(!this.writtenDocs.has(e.toString())&&r){if(r.isEqual(zr.min()))throw new vr(Zt.INVALID_ARGUMENT,"Can't update a document that doesn't exist.");return ms.updateTime(r)}return ms.exists(!0)}write(e){this.ensureCommitNotCalled(),this.mutations.push(e)}ensureCommitNotCalled(){}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Pve{constructor(e,r,n,a,s){this.asyncQueue=e,this.datastore=r,this.options=n,this.updateFunction=a,this.deferred=s,this._u=n.maxAttempts,this.t_=new a6(this.asyncQueue,"transaction_retry")}au(){this._u-=1,this.uu()}uu(){this.t_.Go(async()=>{const e=new Bve(this.datastore),r=this.cu(e);r&&r.then(n=>{this.asyncQueue.enqueueAndForget(()=>e.commit().then(()=>{this.deferred.resolve(n)}).catch(a=>{this.lu(a)}))}).catch(n=>{this.lu(n)})})}cu(e){try{const r=this.updateFunction(e);return!G2(r)&&r.catch&&r.then?r:(this.deferred.reject(Error("Transaction callback must return a Promise")),null)}catch(r){return this.deferred.reject(r),null}}lu(e){this._u>0&&this.hu(e)?(this._u-=1,this.asyncQueue.enqueueAndForget(()=>(this.uu(),Promise.resolve()))):this.deferred.reject(e)}hu(e){if(e.name==="FirebaseError"){const r=e.code;return r==="aborted"||r==="failed-precondition"||r==="already-exists"||!GY(r)}return!1}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Tve{constructor(e,r,n,a,s){this.authCredentials=e,this.appCheckCredentials=r,this.asyncQueue=n,this.databaseInfo=a,this.user=Do.UNAUTHENTICATED,this.clientId=LO.newId(),this.authCredentialListener=()=>Promise.resolve(),this.appCheckCredentialListener=()=>Promise.resolve(),this._uninitializedComponentsProvider=s,this.authCredentials.start(n,async i=>{mr("FirestoreClient","Received user=",i.uid),await this.authCredentialListener(i),this.user=i}),this.appCheckCredentials.start(n,i=>(mr("FirestoreClient","Received new app check token=",i),this.appCheckCredentialListener(i,this.user)))}get configuration(){return{asyncQueue:this.asyncQueue,databaseInfo:this.databaseInfo,clientId:this.clientId,authCredentials:this.authCredentials,appCheckCredentials:this.appCheckCredentials,initialUser:this.user,maxConcurrentLimboResolutions:100}}setCredentialChangeListener(e){this.authCredentialListener=e}setAppCheckTokenChangeListener(e){this.appCheckCredentialListener=e}terminate(){this.asyncQueue.enterRestrictedMode();const e=new Sd;return this.asyncQueue.enqueueAndForgetEvenWhileRestricted(async()=>{try{this._onlineComponents&&await this._onlineComponents.terminate(),this._offlineComponents&&await this._offlineComponents.terminate(),this.authCredentials.shutdown(),this.appCheckCredentials.shutdown(),e.resolve()}catch(r){const n=u6(r,"Failed to shutdown persistence");e.reject(n)}}),e.promise}}async function Hj(t,e){t.asyncQueue.verifyOperationInProgress(),mr("FirestoreClient","Initializing OfflineComponentProvider");const r=t.configuration;await e.initialize(r);let n=r.initialUser;t.setCredentialChangeListener(async a=>{n.isEqual(a)||(await bJ(e.localStore,a),n=a)}),e.persistence.setDatabaseDeletedListener(()=>t.terminate()),t._offlineComponents=e}async function l7(t,e){t.asyncQueue.verifyOperationInProgress();const r=await kve(t);mr("FirestoreClient","Initializing OnlineComponentProvider"),await e.initialize(r,t.configuration),t.setCredentialChangeListener(n=>r7(e.remoteStore,n)),t.setAppCheckTokenChangeListener((n,a)=>r7(e.remoteStore,a)),t._onlineComponents=e}async function kve(t){if(!t._offlineComponents)if(t._uninitializedComponentsProvider){mr("FirestoreClient","Using user provided OfflineComponentProvider");try{await Hj(t,t._uninitializedComponentsProvider._offline)}catch(e){const r=e;if(!function(a){return a.name==="FirebaseError"?a.code===Zt.FAILED_PRECONDITION||a.code===Zt.UNIMPLEMENTED:!(typeof DOMException<"u"&&a instanceof DOMException)||a.code===22||a.code===20||a.code===11}(r))throw r;R0("Error using user provided cache. Falling back to memory cache: "+r),await Hj(t,new Kb)}}else mr("FirestoreClient","Using default OfflineComponentProvider"),await Hj(t,new Kb);return t._offlineComponents}async function g6(t){return t._onlineComponents||(t._uninitializedComponentsProvider?(mr("FirestoreClient","Using user provided OnlineComponentProvider"),await l7(t,t._uninitializedComponentsProvider._online)):(mr("FirestoreClient","Using default OnlineComponentProvider"),await l7(t,new DE))),t._onlineComponents}function Fve(t){return g6(t).then(e=>e.syncEngine)}function Ove(t){return g6(t).then(e=>e.datastore)}async function RE(t){const e=await g6(t),r=e.eventManager;return r.onListen=gve.bind(null,e.syncEngine),r.onUnlisten=yve.bind(null,e.syncEngine),r.onFirstRemoteStoreListen=xve.bind(null,e.syncEngine),r.onLastRemoteStoreUnlisten=bve.bind(null,e.syncEngine),r}function Dve(t,e,r={}){const n=new Sd;return t.asyncQueue.enqueueAndForget(async()=>function(s,i,l,c,u){const d=new p6({next:h=>{d.Za(),i.enqueueAndForget(()=>f6(s,f));const A=h.docs.has(l);!A&&h.fromCache?u.reject(new vr(Zt.UNAVAILABLE,"Failed to get document because the client is offline.")):A&&h.fromCache&&c&&c.source==="server"?u.reject(new vr(Zt.UNAVAILABLE,'Failed to get document from server. (However, this document does exist in the local cache. Run again without setting source to "server" to retrieve the cached document.)')):u.resolve(h)},error:h=>u.reject(h)}),f=new h6(z2(l.path),d,{includeMetadataChanges:!0,_a:!0});return d6(s,f)}(await RE(t),t.asyncQueue,e,r,n)),n.promise}function Rve(t,e,r={}){const n=new Sd;return t.asyncQueue.enqueueAndForget(async()=>function(s,i,l,c,u){const d=new p6({next:h=>{d.Za(),i.enqueueAndForget(()=>f6(s,f)),h.fromCache&&c.source==="server"?u.reject(new vr(Zt.UNAVAILABLE,'Failed to get documents from server. (However, these documents may exist in the local cache. Run again without setting source to "server" to retrieve the cached documents.)')):u.resolve(h)},error:h=>u.reject(h)}),f=new h6(l,d,{includeMetadataChanges:!0,_a:!0});return d6(s,f)}(await RE(t),t.asyncQueue,e,r,n)),n.promise}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function UJ(t){const e={};return t.timeoutSeconds!==void 0&&(e.timeoutSeconds=t.timeoutSeconds),e}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const c7=new Map;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function QJ(t,e,r){if(!r)throw new vr(Zt.INVALID_ARGUMENT,`Function ${t}() cannot be called with an empty ${e}.`)}function VJ(t,e,r,n){if(e===!0&&n===!0)throw new vr(Zt.INVALID_ARGUMENT,`${t} and ${r} cannot be used together.`)}function u7(t){if(!jr.isDocumentKey(t))throw new vr(Zt.INVALID_ARGUMENT,`Invalid document reference. Document references must have an even number of segments, but ${t} has ${t.length}.`)}function d7(t){if(jr.isDocumentKey(t))throw new vr(Zt.INVALID_ARGUMENT,`Invalid collection reference. Collection references must have an odd number of segments, but ${t} has ${t.length}.`)}function zI(t){if(t===void 0)return"undefined";if(t===null)return"null";if(typeof t=="string")return t.length>20&&(t=`${t.substring(0,20)}...`),JSON.stringify(t);if(typeof t=="number"||typeof t=="boolean")return""+t;if(typeof t=="object"){if(t instanceof Array)return"an array";{const e=function(n){return n.constructor?n.constructor.name:null}(t);return e?`a custom ${e} object`:"an object"}}return typeof t=="function"?"a function":Ur()}function go(t,e){if("_delegate"in t&&(t=t._delegate),!(t instanceof e)){if(e.name===t.constructor.name)throw new vr(Zt.INVALID_ARGUMENT,"Type does not match the expected instance. Did you pass a reference from a different Firestore SDK?");{const r=zI(t);throw new vr(Zt.INVALID_ARGUMENT,`Expected type '${e.name}', but it was: ${r}`)}}return t}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class f7{constructor(e){var r,n;if(e.host===void 0){if(e.ssl!==void 0)throw new vr(Zt.INVALID_ARGUMENT,"Can't provide ssl option if host option is not set");this.host="firestore.googleapis.com",this.ssl=!0}else this.host=e.host,this.ssl=(r=e.ssl)===null||r===void 0||r;if(this.credentials=e.credentials,this.ignoreUndefinedProperties=!!e.ignoreUndefinedProperties,this.localCache=e.localCache,e.cacheSizeBytes===void 0)this.cacheSizeBytes=41943040;else{if(e.cacheSizeBytes!==-1&&e.cacheSizeBytes<1048576)throw new vr(Zt.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");this.cacheSizeBytes=e.cacheSizeBytes}VJ("experimentalForceLongPolling",e.experimentalForceLongPolling,"experimentalAutoDetectLongPolling",e.experimentalAutoDetectLongPolling),this.experimentalForceLongPolling=!!e.experimentalForceLongPolling,this.experimentalForceLongPolling?this.experimentalAutoDetectLongPolling=!1:e.experimentalAutoDetectLongPolling===void 0?this.experimentalAutoDetectLongPolling=!0:this.experimentalAutoDetectLongPolling=!!e.experimentalAutoDetectLongPolling,this.experimentalLongPollingOptions=UJ((n=e.experimentalLongPollingOptions)!==null&&n!==void 0?n:{}),function(s){if(s.timeoutSeconds!==void 0){if(isNaN(s.timeoutSeconds))throw new vr(Zt.INVALID_ARGUMENT,`invalid long polling timeout: ${s.timeoutSeconds} (must not be NaN)`);if(s.timeoutSeconds<5)throw new vr(Zt.INVALID_ARGUMENT,`invalid long polling timeout: ${s.timeoutSeconds} (minimum allowed value is 5)`);if(s.timeoutSeconds>30)throw new vr(Zt.INVALID_ARGUMENT,`invalid long polling timeout: ${s.timeoutSeconds} (maximum allowed value is 30)`)}}(this.experimentalLongPollingOptions),this.useFetchStreams=!!e.useFetchStreams}isEqual(e){return this.host===e.host&&this.ssl===e.ssl&&this.credentials===e.credentials&&this.cacheSizeBytes===e.cacheSizeBytes&&this.experimentalForceLongPolling===e.experimentalForceLongPolling&&this.experimentalAutoDetectLongPolling===e.experimentalAutoDetectLongPolling&&function(n,a){return n.timeoutSeconds===a.timeoutSeconds}(this.experimentalLongPollingOptions,e.experimentalLongPollingOptions)&&this.ignoreUndefinedProperties===e.ignoreUndefinedProperties&&this.useFetchStreams===e.useFetchStreams}}class WI{constructor(e,r,n,a){this._authCredentials=e,this._appCheckCredentials=r,this._databaseId=n,this._app=a,this.type="firestore-lite",this._persistenceKey="(lite)",this._settings=new f7({}),this._settingsFrozen=!1,this._terminateTask="notTerminated"}get app(){if(!this._app)throw new vr(Zt.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._app}get _initialized(){return this._settingsFrozen}get _terminated(){return this._terminateTask!=="notTerminated"}_setSettings(e){if(this._settingsFrozen)throw new vr(Zt.FAILED_PRECONDITION,"Firestore has already been started and its settings can no longer be changed. You can only modify settings before calling any other methods on a Firestore object.");this._settings=new f7(e),e.credentials!==void 0&&(this._authCredentials=function(n){if(!n)return new dY;switch(n.type){case"firstParty":return new Dpe(n.sessionIndex||"0",n.iamToken||null,n.authTokenFactory||null);case"provider":return n.client;default:throw new vr(Zt.INVALID_ARGUMENT,"makeAuthCredentialsProvider failed due to invalid credential type")}}(e.credentials))}_getSettings(){return this._settings}_freezeSettings(){return this._settingsFrozen=!0,this._settings}_delete(){return this._terminateTask==="notTerminated"&&(this._terminateTask=this._terminate()),this._terminateTask}async _restart(){this._terminateTask==="notTerminated"?await this._terminate():this._terminateTask="notTerminated"}toJSON(){return{app:this._app,databaseId:this._databaseId,settings:this._settings}}_terminate(){return function(r){const n=c7.get(r);n&&(mr("ComponentProvider","Removing Datastore"),c7.delete(r),n.terminate())}(this),Promise.resolve()}}function HJ(t,e,r,n={}){var a;const s=(t=go(t,WI))._getSettings(),i=`${e}:${r}`;if(s.host!=="firestore.googleapis.com"&&s.host!==i&&R0("Host has been set in both settings() and connectFirestoreEmulator(), emulator host will be used."),t._setSettings(Object.assign(Object.assign({},s),{host:i,ssl:!1})),n.mockUserToken){let l,c;if(typeof n.mockUserToken=="string")l=n.mockUserToken,c=Do.MOCK_USER;else{l=JAe(n.mockUserToken,(a=t._app)===null||a===void 0?void 0:a.options.projectId);const u=n.mockUserToken.sub||n.mockUserToken.user_id;if(!u)throw new vr(Zt.INVALID_ARGUMENT,"mockUserToken must contain 'sub' or 'user_id' field!");c=new Do(u)}t._authCredentials=new kpe(new uY(l,c))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Tf{constructor(e,r,n){this.converter=r,this._query=n,this.type="query",this.firestore=e}withConverter(e){return new Tf(this.firestore,e,this._query)}}class xo{constructor(e,r,n){this.converter=r,this._key=n,this.type="document",this.firestore=e}get _path(){return this._key.path}get id(){return this._key.path.lastSegment()}get path(){return this._key.path.canonicalString()}get parent(){return new CA(this.firestore,this.converter,this._key.path.popLast())}withConverter(e){return new xo(this.firestore,e,this._key)}}class CA extends Tf{constructor(e,r,n){super(e,r,z2(n)),this._path=n,this.type="collection"}get id(){return this._query.path.lastSegment()}get path(){return this._query.path.canonicalString()}get parent(){const e=this._path.popLast();return e.isEmpty()?null:new xo(this.firestore,null,new jr(e))}withConverter(e){return new CA(this.firestore,e,this._path)}}function ht(t,e,...r){if(t=Fs(t),QJ("collection","path",e),t instanceof WI){const n=ea.fromString(e,...r);return d7(n),new CA(t,null,n)}{if(!(t instanceof xo||t instanceof CA))throw new vr(Zt.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const n=t._path.child(ea.fromString(e,...r));return d7(n),new CA(t.firestore,null,n)}}function qt(t,e,...r){if(t=Fs(t),arguments.length===1&&(e=LO.newId()),QJ("doc","path",e),t instanceof WI){const n=ea.fromString(e,...r);return u7(n),new xo(t,null,new jr(n))}{if(!(t instanceof xo||t instanceof CA))throw new vr(Zt.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const n=t._path.child(ea.fromString(e,...r));return u7(n),new xo(t.firestore,t instanceof CA?t.converter:null,new jr(n))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class A7{constructor(e=Promise.resolve()){this.Pu=[],this.Iu=!1,this.Tu=[],this.Eu=null,this.du=!1,this.Au=!1,this.Ru=[],this.t_=new a6(this,"async_queue_retry"),this.Vu=()=>{const n=T_();n&&mr("AsyncQueue","Visibility state changed to "+n.visibilityState),this.t_.jo()},this.mu=e;const r=T_();r&&typeof r.addEventListener=="function"&&r.addEventListener("visibilitychange",this.Vu)}get isShuttingDown(){return this.Iu}enqueueAndForget(e){this.enqueue(e)}enqueueAndForgetEvenWhileRestricted(e){this.fu(),this.gu(e)}enterRestrictedMode(e){if(!this.Iu){this.Iu=!0,this.Au=e||!1;const r=T_();r&&typeof r.removeEventListener=="function"&&r.removeEventListener("visibilitychange",this.Vu)}}enqueue(e){if(this.fu(),this.Iu)return new Promise(()=>{});const r=new Sd;return this.gu(()=>this.Iu&&this.Au?Promise.resolve():(e().then(r.resolve,r.reject),r.promise)).then(()=>r.promise)}enqueueRetryable(e){this.enqueueAndForget(()=>(this.Pu.push(e),this.pu()))}async pu(){if(this.Pu.length!==0){try{await this.Pu[0](),this.Pu.shift(),this.t_.reset()}catch(e){if(!rm(e))throw e;mr("AsyncQueue","Operation failed with retryable error: "+e)}this.Pu.length>0&&this.t_.Go(()=>this.pu())}}gu(e){const r=this.mu.then(()=>(this.du=!0,e().catch(n=>{this.Eu=n,this.du=!1;const a=function(i){let l=i.message||"";return i.stack&&(l=i.stack.includes(i.message)?i.stack:i.message+`
`+i.stack),l}(n);throw Ml("INTERNAL UNHANDLED ERROR: ",a),n}).then(n=>(this.du=!1,n))));return this.mu=r,r}enqueueAfterDelay(e,r,n){this.fu(),this.Ru.indexOf(e)>-1&&(r=0);const a=c6.createAndSchedule(this,e,r,n,s=>this.yu(s));return this.Tu.push(a),a}fu(){this.Eu&&Ur()}verifyOperationInProgress(){}async wu(){let e;do e=this.mu,await e;while(e!==this.mu)}Su(e){for(const r of this.Tu)if(r.timerId===e)return!0;return!1}bu(e){return this.wu().then(()=>{this.Tu.sort((r,n)=>r.targetTimeMs-n.targetTimeMs);for(const r of this.Tu)if(r.skipDelay(),e!=="all"&&r.timerId===e)break;return this.wu()})}Du(e){this.Ru.push(e)}yu(e){const r=this.Tu.indexOf(e);this.Tu.splice(r,1)}}function h7(t){return function(r,n){if(typeof r!="object"||r===null)return!1;const a=r;for(const s of n)if(s in a&&typeof a[s]=="function")return!0;return!1}(t,["next","error","complete"])}class Jc extends WI{constructor(e,r,n,a){super(e,r,n,a),this.type="firestore",this._queue=new A7,this._persistenceKey=(a==null?void 0:a.name)||"[DEFAULT]"}async _terminate(){if(this._firestoreClient){const e=this._firestoreClient.terminate();this._queue=new A7(e),this._firestoreClient=void 0,await e}}}function $J(t,e){const r=typeof t=="object"?t:CO(),n=typeof t=="string"?t:"(default)",a=wO(r,"firestore").getImmediate({identifier:n});if(!a._initialized){const s=XAe("firestore");s&&HJ(a,...s)}return a}function Zp(t){if(t._terminated)throw new vr(Zt.FAILED_PRECONDITION,"The client has already been terminated.");return t._firestoreClient||KJ(t),t._firestoreClient}function KJ(t){var e,r,n;const a=t._freezeSettings(),s=function(l,c,u,d){return new Age(l,c,u,d.host,d.ssl,d.experimentalForceLongPolling,d.experimentalAutoDetectLongPolling,UJ(d.experimentalLongPollingOptions),d.useFetchStreams)}(t._databaseId,((e=t._app)===null||e===void 0?void 0:e.options.appId)||"",t._persistenceKey,a);t._componentsProvider||!((r=a.localCache)===null||r===void 0)&&r._offlineComponentProvider&&(!((n=a.localCache)===null||n===void 0)&&n._onlineComponentProvider)&&(t._componentsProvider={_offline:a.localCache._offlineComponentProvider,_online:a.localCache._onlineComponentProvider}),t._firestoreClient=new Tve(t._authCredentials,t._appCheckCredentials,t._queue,s,t._componentsProvider&&function(l){const c=l==null?void 0:l._online.build();return{_offline:l==null?void 0:l._offline.build(c),_online:c}}(t._componentsProvider))}function GJ(t,e){R0("enableIndexedDbPersistence() will be deprecated in the future, you can use `FirestoreSettings.cache` instead.");const r=t._freezeSettings();return Mve(t,DE.provider,{build:n=>new jve(n,r.cacheSizeBytes,void 0)}),Promise.resolve()}function Mve(t,e,r){if((t=go(t,Jc))._firestoreClient||t._terminated)throw new vr(Zt.FAILED_PRECONDITION,"Firestore has already been started and persistence can no longer be enabled. You can only enable persistence before calling any other methods on a Firestore object.");if(t._componentsProvider||t._getSettings().localCache)throw new vr(Zt.FAILED_PRECONDITION,"SDK cache is already specified.");t._componentsProvider={_online:e,_offline:r},KJ(t)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class V0{constructor(e){this._byteString=e}static fromBase64String(e){try{return new V0(fi.fromBase64String(e))}catch(r){throw new vr(Zt.INVALID_ARGUMENT,"Failed to construct data from Base64 string: "+r)}}static fromUint8Array(e){return new V0(fi.fromUint8Array(e))}toBase64(){return this._byteString.toBase64()}toUint8Array(){return this._byteString.toUint8Array()}toString(){return"Bytes(base64: "+this.toBase64()+")"}isEqual(e){return this._byteString.isEqual(e._byteString)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class eg{constructor(...e){for(let r=0;r<e.length;++r)if(e[r].length===0)throw new vr(Zt.INVALID_ARGUMENT,"Invalid field name at argument $(i + 1). Field names must not be empty.");this._internalPath=new hs(e)}isEqual(e){return this._internalPath.isEqual(e._internalPath)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class XI{constructor(e){this._methodName=e}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class YI{constructor(e,r){if(!isFinite(e)||e<-90||e>90)throw new vr(Zt.INVALID_ARGUMENT,"Latitude must be a number between -90 and 90, but was: "+e);if(!isFinite(r)||r<-180||r>180)throw new vr(Zt.INVALID_ARGUMENT,"Longitude must be a number between -180 and 180, but was: "+r);this._lat=e,this._long=r}get latitude(){return this._lat}get longitude(){return this._long}isEqual(e){return this._lat===e._lat&&this._long===e._long}toJSON(){return{latitude:this._lat,longitude:this._long}}_compareTo(e){return gn(this._lat,e._lat)||gn(this._long,e._long)}}/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class JI{constructor(e){this._values=(e||[]).map(r=>r)}toArray(){return this._values.map(e=>e)}isEqual(e){return function(n,a){if(n.length!==a.length)return!1;for(let s=0;s<n.length;++s)if(n[s]!==a[s])return!1;return!0}(this._values,e._values)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Lve=/^__.*__$/;class Uve{constructor(e,r,n){this.data=e,this.fieldMask=r,this.fieldTransforms=n}toMutation(e,r){return this.fieldMask!==null?new eh(e,this.data,this.fieldMask,r,this.fieldTransforms):new Tv(e,this.data,r,this.fieldTransforms)}}class qJ{constructor(e,r,n){this.data=e,this.fieldMask=r,this.fieldTransforms=n}toMutation(e,r){return new eh(e,this.data,this.fieldMask,r,this.fieldTransforms)}}function zJ(t){switch(t){case 0:case 2:case 1:return!0;case 3:case 4:return!1;default:throw Ur()}}class x6{constructor(e,r,n,a,s,i){this.settings=e,this.databaseId=r,this.serializer=n,this.ignoreUndefinedProperties=a,s===void 0&&this.vu(),this.fieldTransforms=s||[],this.fieldMask=i||[]}get path(){return this.settings.path}get Cu(){return this.settings.Cu}Fu(e){return new x6(Object.assign(Object.assign({},this.settings),e),this.databaseId,this.serializer,this.ignoreUndefinedProperties,this.fieldTransforms,this.fieldMask)}Mu(e){var r;const n=(r=this.path)===null||r===void 0?void 0:r.child(e),a=this.Fu({path:n,xu:!1});return a.Ou(e),a}Nu(e){var r;const n=(r=this.path)===null||r===void 0?void 0:r.child(e),a=this.Fu({path:n,xu:!1});return a.vu(),a}Lu(e){return this.Fu({path:void 0,xu:!0})}Bu(e){return ME(e,this.settings.methodName,this.settings.ku||!1,this.path,this.settings.qu)}contains(e){return this.fieldMask.find(r=>e.isPrefixOf(r))!==void 0||this.fieldTransforms.find(r=>e.isPrefixOf(r.field))!==void 0}vu(){if(this.path)for(let e=0;e<this.path.length;e++)this.Ou(this.path.get(e))}Ou(e){if(e.length===0)throw this.Bu("Document fields must not be empty");if(zJ(this.Cu)&&Lve.test(e))throw this.Bu('Document fields cannot begin and end with "__"')}}class Qve{constructor(e,r,n){this.databaseId=e,this.ignoreUndefinedProperties=r,this.serializer=n||GI(e)}Qu(e,r,n,a=!1){return new x6({Cu:e,methodName:r,qu:n,path:hs.emptyPath(),xu:!1,ku:a},this.databaseId,this.serializer,this.ignoreUndefinedProperties)}}function Ov(t){const e=t._freezeSettings(),r=GI(t._databaseId);return new Qve(t._databaseId,!!e.ignoreUndefinedProperties,r)}function ZI(t,e,r,n,a,s={}){const i=t.Qu(s.merge||s.mergeFields?2:0,e,r,a);b6("Data must be an object, but it was:",i,n);const l=WJ(n,i);let c,u;if(s.merge)c=new cc(i.fieldMask),u=i.fieldTransforms;else if(s.mergeFields){const d=[];for(const f of s.mergeFields){const h=fT(e,f,r);if(!i.contains(h))throw new vr(Zt.INVALID_ARGUMENT,`Field '${h}' is specified in your field mask but missing from your input data.`);YJ(d,h)||d.push(h)}c=new cc(d),u=i.fieldTransforms.filter(f=>c.covers(f.field))}else c=null,u=i.fieldTransforms;return new Uve(new Qo(l),c,u)}class e4 extends XI{_toFieldTransform(e){if(e.Cu!==2)throw e.Cu===1?e.Bu(`${this._methodName}() can only appear at the top level of your update data`):e.Bu(`${this._methodName}() cannot be used with set() unless you pass {merge:true}`);return e.fieldMask.push(e.path),null}isEqual(e){return e instanceof e4}}function v6(t,e,r,n){const a=t.Qu(1,e,r);b6("Data must be an object, but it was:",a,n);const s=[],i=Qo.empty();Yp(n,(c,u)=>{const d=w6(e,c,r);u=Fs(u);const f=a.Nu(d);if(u instanceof e4)s.push(d);else{const h=ew(u,f);h!=null&&(s.push(d),i.set(d,h))}});const l=new cc(s);return new qJ(i,l,a.fieldTransforms)}function y6(t,e,r,n,a,s){const i=t.Qu(1,e,r),l=[fT(e,n,r)],c=[a];if(s.length%2!=0)throw new vr(Zt.INVALID_ARGUMENT,`Function ${e}() needs to be called with an even number of arguments that alternate between field names and values.`);for(let h=0;h<s.length;h+=2)l.push(fT(e,s[h])),c.push(s[h+1]);const u=[],d=Qo.empty();for(let h=l.length-1;h>=0;--h)if(!YJ(u,l[h])){const A=l[h];let m=c[h];m=Fs(m);const p=i.Nu(A);if(m instanceof e4)u.push(A);else{const g=ew(m,p);g!=null&&(u.push(A),d.set(A,g))}}const f=new cc(u);return new qJ(d,f,i.fieldTransforms)}function Vve(t,e,r,n=!1){return ew(r,t.Qu(n?4:3,e))}function ew(t,e){if(XJ(t=Fs(t)))return b6("Unsupported field value:",e,t),WJ(t,e);if(t instanceof XI)return function(n,a){if(!zJ(a.Cu))throw a.Bu(`${n._methodName}() can only be used with update() and set()`);if(!a.path)throw a.Bu(`${n._methodName}() is not currently supported inside arrays`);const s=n._toFieldTransform(a);s&&a.fieldTransforms.push(s)}(t,e),null;if(t===void 0&&e.ignoreUndefinedProperties)return null;if(e.path&&e.fieldMask.push(e.path),t instanceof Array){if(e.settings.xu&&e.Cu!==4)throw e.Bu("Nested arrays are not supported");return function(n,a){const s=[];let i=0;for(const l of n){let c=ew(l,a.Lu(i));c==null&&(c={nullValue:"NULL_VALUE"}),s.push(c),i++}return{arrayValue:{values:s}}}(t,e)}return function(n,a){if((n=Fs(n))===null)return{nullValue:"NULL_VALUE"};if(typeof n=="number")return kge(a.serializer,n);if(typeof n=="boolean")return{booleanValue:n};if(typeof n=="string")return{stringValue:n};if(n instanceof Date){const s=fr.fromDate(n);return{timestampValue:iv(a.serializer,s)}}if(n instanceof fr){const s=new fr(n.seconds,1e3*Math.floor(n.nanoseconds/1e3));return{timestampValue:iv(a.serializer,s)}}if(n instanceof YI)return{geoPointValue:{latitude:n.latitude,longitude:n.longitude}};if(n instanceof V0)return{bytesValue:XY(a.serializer,n._byteString)};if(n instanceof xo){const s=a.databaseId,i=n.firestore._databaseId;if(!i.isEqual(s))throw a.Bu(`Document reference is for database ${i.projectId}/${i.database} but should be for database ${s.projectId}/${s.database}`);return{referenceValue:JO(n.firestore._databaseId||a.databaseId,n._key.path)}}if(n instanceof JI)return function(i,l){return{mapValue:{fields:{__type__:{stringValue:"__vector__"},value:{arrayValue:{values:i.toArray().map(c=>{if(typeof c!="number")throw l.Bu("VectorValues must only contain numeric values.");return GO(l.serializer,c)})}}}}}}(n,a);throw a.Bu(`Unsupported field value: ${zI(n)}`)}(t,e)}function WJ(t,e){const r={};return bY(t)?e.path&&e.path.length>0&&e.fieldMask.push(e.path):Yp(t,(n,a)=>{const s=ew(a,e.Mu(n));s!=null&&(r[n]=s)}),{mapValue:{fields:r}}}function XJ(t){return!(typeof t!="object"||t===null||t instanceof Array||t instanceof Date||t instanceof fr||t instanceof YI||t instanceof V0||t instanceof xo||t instanceof XI||t instanceof JI)}function b6(t,e,r){if(!XJ(r)||!function(a){return typeof a=="object"&&a!==null&&(Object.getPrototypeOf(a)===Object.prototype||Object.getPrototypeOf(a)===null)}(r)){const n=zI(r);throw n==="an object"?e.Bu(t+" a custom object"):e.Bu(t+" "+n)}}function fT(t,e,r){if((e=Fs(e))instanceof eg)return e._internalPath;if(typeof e=="string")return w6(t,e);throw ME("Field path arguments must be of type string or ",t,!1,void 0,r)}const Hve=new RegExp("[~\\*/\\[\\]]");function w6(t,e,r){if(e.search(Hve)>=0)throw ME(`Invalid field path (${e}). Paths must not contain '~', '*', '/', '[', or ']'`,t,!1,void 0,r);try{return new eg(...e.split("."))._internalPath}catch{throw ME(`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`,t,!1,void 0,r)}}function ME(t,e,r,n,a){const s=n&&!n.isEmpty(),i=a!==void 0;let l=`Function ${e}() called with invalid data`;r&&(l+=" (via `toFirestore()`)"),l+=". ";let c="";return(s||i)&&(c+=" (found",s&&(c+=` in field ${n}`),i&&(c+=` in document ${a}`),c+=")"),new vr(Zt.INVALID_ARGUMENT,l+t+c)}function YJ(t,e){return t.some(r=>r.isEqual(e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class LE{constructor(e,r,n,a,s){this._firestore=e,this._userDataWriter=r,this._key=n,this._document=a,this._converter=s}get id(){return this._key.path.lastSegment()}get ref(){return new xo(this._firestore,this._converter,this._key)}exists(){return this._document!==null}data(){if(this._document){if(this._converter){const e=new $ve(this._firestore,this._userDataWriter,this._key,this._document,null);return this._converter.fromFirestore(e)}return this._userDataWriter.convertValue(this._document.data.value)}}get(e){if(this._document){const r=this._document.data.field(t4("DocumentSnapshot.get",e));if(r!==null)return this._userDataWriter.convertValue(r)}}}class $ve extends LE{data(){return super.data()}}function t4(t,e){return typeof e=="string"?w6(t,e):e instanceof eg?e._internalPath:e._delegate._internalPath}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function JJ(t){if(t.limitType==="L"&&t.explicitOrderBy.length===0)throw new vr(Zt.UNIMPLEMENTED,"limitToLast() queries require specifying at least one orderBy() clause")}class N6{}class r4 extends N6{}function nr(t,e,...r){let n=[];e instanceof N6&&n.push(e),n=n.concat(r),function(s){const i=s.filter(c=>c instanceof n4).length,l=s.filter(c=>c instanceof tw).length;if(i>1||i>0&&l>0)throw new vr(Zt.INVALID_ARGUMENT,"InvalidQuery. When using composite filters, you cannot use more than one filter at the top level. Consider nesting the multiple filters within an `and(...)` statement. For example: change `query(query, where(...), or(...))` to `query(query, and(where(...), or(...)))`.")}(n);for(const a of n)t=a._apply(t);return t}class tw extends r4{constructor(e,r,n){super(),this._field=e,this._op=r,this._value=n,this.type="where"}static _create(e,r,n){return new tw(e,r,n)}_apply(e){const r=this._parse(e);return eZ(e._query,r),new Tf(e.firestore,e.converter,tT(e._query,r))}_parse(e){const r=Ov(e.firestore);return function(s,i,l,c,u,d,f){let h;if(u.isKeyField()){if(d==="array-contains"||d==="array-contains-any")throw new vr(Zt.INVALID_ARGUMENT,`Invalid Query. You can't perform '${d}' queries on documentId().`);if(d==="in"||d==="not-in"){p7(f,d);const A=[];for(const m of f)A.push(m7(c,s,m));h={arrayValue:{values:A}}}else h=m7(c,s,f)}else d!=="in"&&d!=="not-in"&&d!=="array-contains-any"||p7(f,d),h=Vve(l,i,f,d==="in"||d==="not-in");return Ln.create(u,d,h)}(e._query,"where",r,e.firestore._databaseId,this._field,this._op,this._value)}}function cr(t,e,r){const n=e,a=t4("where",t);return tw._create(a,n,r)}class n4 extends N6{constructor(e,r){super(),this.type=e,this._queryConstraints=r}static _create(e,r){return new n4(e,r)}_parse(e){const r=this._queryConstraints.map(n=>n._parse(e)).filter(n=>n.getFilters().length>0);return r.length===1?r[0]:Na.create(r,this._getOperator())}_apply(e){const r=this._parse(e);return r.getFilters().length===0?e:(function(a,s){let i=a;const l=s.getFlattenedFilters();for(const c of l)eZ(i,c),i=tT(i,c)}(e._query,r),new Tf(e.firestore,e.converter,tT(e._query,r)))}_getQueryConstraints(){return this._queryConstraints}_getOperator(){return this.type==="and"?"and":"or"}}class a4 extends r4{constructor(e,r){super(),this._field=e,this._direction=r,this.type="orderBy"}static _create(e,r){return new a4(e,r)}_apply(e){const r=function(a,s,i){if(a.startAt!==null)throw new vr(Zt.INVALID_ARGUMENT,"Invalid query. You must not call startAt() or startAfter() before calling orderBy().");if(a.endAt!==null)throw new vr(Zt.INVALID_ARGUMENT,"Invalid query. You must not call endAt() or endBefore() before calling orderBy().");return new Ub(s,i)}(e._query,this._field,this._direction);return new Tf(e.firestore,e.converter,function(a,s){const i=a.explicitOrderBy.concat([s]);return new Pv(a.path,a.collectionGroup,i,a.filters.slice(),a.limit,a.limitType,a.startAt,a.endAt)}(e._query,r))}}function on(t,e="asc"){const r=e,n=t4("orderBy",t);return a4._create(n,r)}class s4 extends r4{constructor(e,r,n){super(),this.type=e,this._limit=r,this._limitType=n}static _create(e,r,n){return new s4(e,r,n)}_apply(e){return new Tf(e.firestore,e.converter,PE(e._query,this._limit,this._limitType))}}function ZJ(t){return s4._create("limit",t,"F")}function m7(t,e,r){if(typeof(r=Fs(r))=="string"){if(r==="")throw new vr(Zt.INVALID_ARGUMENT,"Invalid query. When querying with documentId(), you must provide a valid document ID, but it was an empty string.");if(!kY(e)&&r.indexOf("/")!==-1)throw new vr(Zt.INVALID_ARGUMENT,`Invalid query. When querying a collection by documentId(), you must provide a plain document ID, but '${r}' contains a '/' character.`);const n=e.path.child(ea.fromString(r));if(!jr.isDocumentKey(n))throw new vr(Zt.INVALID_ARGUMENT,`Invalid query. When querying a collection group by documentId(), the value provided must result in a valid document path, but '${n}' is not because it has an odd number of segments (${n.length}).`);return Mb(t,new jr(n))}if(r instanceof xo)return Mb(t,r._key);throw new vr(Zt.INVALID_ARGUMENT,`Invalid query. When querying with documentId(), you must provide a valid string or a DocumentReference, but it was: ${zI(r)}.`)}function p7(t,e){if(!Array.isArray(t)||t.length===0)throw new vr(Zt.INVALID_ARGUMENT,`Invalid Query. A non-empty array is required for '${e.toString()}' filters.`)}function eZ(t,e){const r=function(a,s){for(const i of a)for(const l of i.getFlattenedFilters())if(s.indexOf(l.op)>=0)return l.op;return null}(t.filters,function(a){switch(a){case"!=":return["!=","not-in"];case"array-contains-any":case"in":return["not-in"];case"not-in":return["array-contains-any","in","not-in","!="];default:return[]}}(e.op));if(r!==null)throw r===e.op?new vr(Zt.INVALID_ARGUMENT,`Invalid query. You cannot use more than one '${e.op.toString()}' filter.`):new vr(Zt.INVALID_ARGUMENT,`Invalid query. You cannot use '${e.op.toString()}' filters with '${r.toString()}' filters.`)}class C6{convertValue(e,r="none"){switch(Ep(e)){case 0:return null;case 1:return e.booleanValue;case 2:return ds(e.integerValue||e.doubleValue);case 3:return this.convertTimestamp(e.timestampValue);case 4:return this.convertServerTimestamp(e,r);case 5:return e.stringValue;case 6:return this.convertBytes(M0(e.bytesValue));case 7:return this.convertReference(e.referenceValue);case 8:return this.convertGeoPoint(e.geoPointValue);case 9:return this.convertArray(e.arrayValue,r);case 11:return this.convertObject(e.mapValue,r);case 10:return this.convertVectorValue(e.mapValue);default:throw Ur()}}convertObject(e,r){return this.convertObjectMap(e.fields,r)}convertObjectMap(e,r="none"){const n={};return Yp(e,(a,s)=>{n[a]=this.convertValue(s,r)}),n}convertVectorValue(e){var r,n,a;const s=(a=(n=(r=e.fields)===null||r===void 0?void 0:r.value.arrayValue)===null||n===void 0?void 0:n.values)===null||a===void 0?void 0:a.map(i=>ds(i.doubleValue));return new JI(s)}convertGeoPoint(e){return new YI(ds(e.latitude),ds(e.longitude))}convertArray(e,r){return(e.values||[]).map(n=>this.convertValue(n,r))}convertServerTimestamp(e,r){switch(r){case"previous":const n=$O(e);return n==null?null:this.convertValue(n,r);case"estimate":return this.convertTimestamp(Db(e));default:return null}}convertTimestamp(e){const r=MA(e);return new fr(r.seconds,r.nanos)}convertDocumentKey(e,r){const n=ea.fromString(e);Kr(iJ(n));const a=new L0(n.get(1),n.get(3)),s=new jr(n.popFirst(5));return a.isEqual(r)||Ml(`Document ${s} contains a document reference within a different database (${a.projectId}/${a.database}) which is not supported. It will be treated as a reference in the current database (${r.projectId}/${r.database}) instead.`),s}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function i4(t,e,r){let n;return n=t?r&&(r.merge||r.mergeFields)?t.toFirestore(e,r):t.toFirestore(e):e,n}class Kve extends C6{constructor(e){super(),this.firestore=e}convertBytes(e){return new V0(e)}convertReference(e){const r=this.convertDocumentKey(e,this.firestore._databaseId);return new xo(this.firestore,null,r)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Km{constructor(e,r){this.hasPendingWrites=e,this.fromCache=r}isEqual(e){return this.hasPendingWrites===e.hasPendingWrites&&this.fromCache===e.fromCache}}class o4 extends LE{constructor(e,r,n,a,s,i){super(e,r,n,a,i),this._firestore=e,this._firestoreImpl=e,this.metadata=s}exists(){return super.exists()}data(e={}){if(this._document){if(this._converter){const r=new Vy(this._firestore,this._userDataWriter,this._key,this._document,this.metadata,null);return this._converter.fromFirestore(r,e)}return this._userDataWriter.convertValue(this._document.data.value,e.serverTimestamps)}}get(e,r={}){if(this._document){const n=this._document.data.field(t4("DocumentSnapshot.get",e));if(n!==null)return this._userDataWriter.convertValue(n,r.serverTimestamps)}}}class Vy extends o4{data(e={}){return super.data(e)}}class _6{constructor(e,r,n,a){this._firestore=e,this._userDataWriter=r,this._snapshot=a,this.metadata=new Km(a.hasPendingWrites,a.fromCache),this.query=n}get docs(){const e=[];return this.forEach(r=>e.push(r)),e}get size(){return this._snapshot.docs.size}get empty(){return this.size===0}forEach(e,r){this._snapshot.docs.forEach(n=>{e.call(r,new Vy(this._firestore,this._userDataWriter,n.key,n,new Km(this._snapshot.mutatedKeys.has(n.key),this._snapshot.fromCache),this.query.converter))})}docChanges(e={}){const r=!!e.includeMetadataChanges;if(r&&this._snapshot.excludesMetadataChanges)throw new vr(Zt.INVALID_ARGUMENT,"To include metadata changes with your document changes, you must also pass { includeMetadataChanges:true } to onSnapshot().");return this._cachedChanges&&this._cachedChangesIncludeMetadataChanges===r||(this._cachedChanges=function(a,s){if(a._snapshot.oldDocs.isEmpty()){let i=0;return a._snapshot.docChanges.map(l=>{const c=new Vy(a._firestore,a._userDataWriter,l.doc.key,l.doc,new Km(a._snapshot.mutatedKeys.has(l.doc.key),a._snapshot.fromCache),a.query.converter);return l.doc,{type:"added",doc:c,oldIndex:-1,newIndex:i++}})}{let i=a._snapshot.oldDocs;return a._snapshot.docChanges.filter(l=>s||l.type!==3).map(l=>{const c=new Vy(a._firestore,a._userDataWriter,l.doc.key,l.doc,new Km(a._snapshot.mutatedKeys.has(l.doc.key),a._snapshot.fromCache),a.query.converter);let u=-1,d=-1;return l.type!==0&&(u=i.indexOf(l.doc.key),i=i.delete(l.doc.key)),l.type!==1&&(i=i.add(l.doc),d=i.indexOf(l.doc.key)),{type:Gve(l.type),doc:c,oldIndex:u,newIndex:d}})}}(this,r),this._cachedChangesIncludeMetadataChanges=r),this._cachedChanges}}function Gve(t){switch(t){case 0:return"added";case 2:case 3:return"modified";case 1:return"removed";default:return Ur()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ui(t){t=go(t,xo);const e=go(t.firestore,Jc);return Dve(Zp(e),t._key).then(r=>rZ(e,t,r))}class l4 extends C6{constructor(e){super(),this.firestore=e}convertBytes(e){return new V0(e)}convertReference(e){const r=this.convertDocumentKey(e,this.firestore._databaseId);return new xo(this.firestore,null,r)}}function Ot(t){t=go(t,Tf);const e=go(t.firestore,Jc),r=Zp(e),n=new l4(e);return JJ(t._query),Rve(r,t._query).then(a=>new _6(e,n,t,a))}function tZ(t,e,r){t=go(t,xo);const n=go(t.firestore,Jc),a=i4(t.converter,e,r);return Dv(n,[ZI(Ov(n),"setDoc",t._key,a,t.converter!==null,r).toMutation(t._key,ms.none())])}function nn(t,e,r,...n){t=go(t,xo);const a=go(t.firestore,Jc),s=Ov(a);let i;return i=typeof(e=Fs(e))=="string"||e instanceof eg?y6(s,"updateDoc",t._key,e,r,n):v6(s,"updateDoc",t._key,e),Dv(a,[i.toMutation(t._key,ms.exists(!0))])}function Cn(t){return Dv(go(t.firestore,Jc),[new kv(t._key,ms.none())])}function xn(t,e){const r=go(t.firestore,Jc),n=qt(t),a=i4(t.converter,e);return Dv(r,[ZI(Ov(t.firestore),"addDoc",n._key,a,t.converter!==null,{}).toMutation(n._key,ms.exists(!1))]).then(()=>n)}function Fd(t,...e){var r,n,a;t=Fs(t);let s={includeMetadataChanges:!1,source:"default"},i=0;typeof e[i]!="object"||h7(e[i])||(s=e[i],i++);const l={includeMetadataChanges:s.includeMetadataChanges,source:s.source};if(h7(e[i])){const f=e[i];e[i]=(r=f.next)===null||r===void 0?void 0:r.bind(f),e[i+1]=(n=f.error)===null||n===void 0?void 0:n.bind(f),e[i+2]=(a=f.complete)===null||a===void 0?void 0:a.bind(f)}let c,u,d;if(t instanceof xo)u=go(t.firestore,Jc),d=z2(t._key.path),c={next:f=>{e[i]&&e[i](rZ(u,t,f))},error:e[i+1],complete:e[i+2]};else{const f=go(t,Tf);u=go(f.firestore,Jc),d=f._query;const h=new l4(u);c={next:A=>{e[i]&&e[i](new _6(u,h,f,A))},error:e[i+1],complete:e[i+2]},JJ(t._query)}return function(h,A,m,p){const g=new p6(p),x=new h6(A,g,m);return h.asyncQueue.enqueueAndForget(async()=>d6(await RE(h),x)),()=>{g.Za(),h.asyncQueue.enqueueAndForget(async()=>f6(await RE(h),x))}}(Zp(u),d,l,c)}function Dv(t,e){return function(n,a){const s=new Sd;return n.asyncQueue.enqueueAndForget(async()=>wve(await Fve(n),a,s)),s.promise}(Zp(t),e)}function rZ(t,e,r){const n=r.docs.get(e._key),a=new l4(t);return new o4(t,a,e._key,n,new Km(r.hasPendingWrites,r.fromCache),e.converter)}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const qve={maxAttempts:5};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class nZ{constructor(e,r){this._firestore=e,this._commitHandler=r,this._mutations=[],this._committed=!1,this._dataReader=Ov(e)}set(e,r,n){this._verifyNotCommitted();const a=a0(e,this._firestore),s=i4(a.converter,r,n),i=ZI(this._dataReader,"WriteBatch.set",a._key,s,a.converter!==null,n);return this._mutations.push(i.toMutation(a._key,ms.none())),this}update(e,r,n,...a){this._verifyNotCommitted();const s=a0(e,this._firestore);let i;return i=typeof(r=Fs(r))=="string"||r instanceof eg?y6(this._dataReader,"WriteBatch.update",s._key,r,n,a):v6(this._dataReader,"WriteBatch.update",s._key,r),this._mutations.push(i.toMutation(s._key,ms.exists(!0))),this}delete(e){this._verifyNotCommitted();const r=a0(e,this._firestore);return this._mutations=this._mutations.concat(new kv(r._key,ms.none())),this}commit(){return this._verifyNotCommitted(),this._committed=!0,this._mutations.length>0?this._commitHandler(this._mutations):Promise.resolve()}_verifyNotCommitted(){if(this._committed)throw new vr(Zt.FAILED_PRECONDITION,"A write batch can no longer be used after commit() has been called.")}}function a0(t,e){if((t=Fs(t)).firestore!==e)throw new vr(Zt.INVALID_ARGUMENT,"Provided document reference is from a different Firestore instance.");return t}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class aZ extends class{constructor(r,n){this._firestore=r,this._transaction=n,this._dataReader=Ov(r)}get(r){const n=a0(r,this._firestore),a=new Kve(this._firestore);return this._transaction.lookup([n._key]).then(s=>{if(!s||s.length!==1)return Ur();const i=s[0];if(i.isFoundDocument())return new LE(this._firestore,a,i.key,i,n.converter);if(i.isNoDocument())return new LE(this._firestore,a,n._key,null,n.converter);throw Ur()})}set(r,n,a){const s=a0(r,this._firestore),i=i4(s.converter,n,a),l=ZI(this._dataReader,"Transaction.set",s._key,i,s.converter!==null,a);return this._transaction.set(s._key,l),this}update(r,n,a,...s){const i=a0(r,this._firestore);let l;return l=typeof(n=Fs(n))=="string"||n instanceof eg?y6(this._dataReader,"Transaction.update",i._key,n,a,s):v6(this._dataReader,"Transaction.update",i._key,n),this._transaction.update(i._key,l),this}delete(r){const n=a0(r,this._firestore);return this._transaction.delete(n._key),this}}{constructor(e,r){super(e,r),this._firestore=e}get(e){const r=a0(e,this._firestore),n=new l4(this._firestore);return super.get(e).then(a=>new o4(this._firestore,n,r._key,a._document,new Km(!1,!1),r.converter))}}function Hi(t,e,r){t=go(t,Jc);const n=Object.assign(Object.assign({},qve),r);return function(s){if(s.maxAttempts<1)throw new vr(Zt.INVALID_ARGUMENT,"Max attempts must be at least 1")}(n),function(s,i,l){const c=new Sd;return s.asyncQueue.enqueueAndForget(async()=>{const u=await Ove(s);new Pve(s.asyncQueue,u,l,i,c).au()}),c.promise}(Zp(t),a=>e(new aZ(t,a)),n)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function tg(t){return Zp(t=go(t,Jc)),new nZ(t,e=>Dv(t,e))}(function(e,r=!0){(function(a){Bv=a})(Iv),Zx(new wp("firestore",(n,{instanceIdentifier:a,options:s})=>{const i=n.getProvider("app").getImmediate(),l=new Jc(new Fpe(n.getProvider("auth-internal")),new Mpe(n.getProvider("app-check-internal")),function(u,d){if(!Object.prototype.hasOwnProperty.apply(u.options,["projectId"]))throw new vr(Zt.INVALID_ARGUMENT,'"projectId" not provided in firebase.initializeApp.');return new L0(u.options.projectId,d)}(i,a),i);return s=Object.assign({useFetchStreams:r},s),l._setSettings(s),l},"PUBLIC").setMultipleInstances(!0)),S0(lU,"4.7.3",e),S0(lU,"4.7.3","esm2017")})();const zve=Object.freeze(Object.defineProperty({__proto__:null,AbstractUserDataWriter:C6,Bytes:V0,CollectionReference:CA,DocumentReference:xo,DocumentSnapshot:o4,FieldPath:eg,FieldValue:XI,Firestore:Jc,FirestoreError:vr,GeoPoint:YI,Query:Tf,QueryCompositeFilterConstraint:n4,QueryConstraint:r4,QueryDocumentSnapshot:Vy,QueryFieldFilterConstraint:tw,QueryLimitConstraint:s4,QueryOrderByConstraint:a4,QuerySnapshot:_6,SnapshotMetadata:Km,Timestamp:fr,Transaction:aZ,VectorValue:JI,WriteBatch:nZ,_AutoId:LO,_ByteString:fi,_DatabaseId:L0,_DocumentKey:jr,_EmptyAuthCredentialsProvider:dY,_FieldPath:hs,_cast:go,_logWarn:R0,_validateIsNotUsedTogether:VJ,addDoc:xn,collection:ht,connectFirestoreEmulator:HJ,deleteDoc:Cn,doc:qt,enableIndexedDbPersistence:GJ,ensureFirestoreConfigured:Zp,executeWrite:Dv,getDoc:ui,getDocs:Ot,getFirestore:$J,limit:ZJ,onSnapshot:Fd,orderBy:on,query:nr,runTransaction:Hi,setDoc:tZ,updateDoc:nn,where:cr,writeBatch:tg},Symbol.toStringTag,{value:"Module"})),Wve={apiKey:"AIzaSyA_ZzeP_DAoXeRuallrOaJ4xFaxjnuhw-8",authDomain:"posys-103de.firebaseapp.com",projectId:"posys-103de",storageBucket:"posys-103de.firebasestorage.app",messagingSenderId:"401054148688",appId:"1:401054148688:web:1c2aea9e8b40958b514955",measurementId:"G-Q2GWQXMFLX"},sZ=NO(Wve),ke=$J(sZ),Cf=GP(sZ),Xve=(async()=>{try{return await w_(Cf,FO),console.info(" Auth persistence: browserLocalPersistence enabled"),"local"}catch(t){console.warn(" browserLocalPersistence failed:",(t==null?void 0:t.code)||t)}try{return await w_(Cf,tY),console.info(" Auth persistence: indexedDBLocalPersistence enabled"),"indexeddb"}catch(t){console.warn(" indexedDBLocalPersistence failed:",(t==null?void 0:t.code)||t)}try{return await w_(Cf,OO),console.info(" Auth persistence: browserSessionPersistence enabled (session only)"),"session"}catch(t){console.warn(" browserSessionPersistence failed:",(t==null?void 0:t.code)||t)}return console.warn(" No se pudo establecer ninguna persistencia para Auth."),"none"})();GJ(ke).catch(t=>{t.code==="failed-precondition"?console.warn(" Ya hay otra pestaa usando persistencia."):t.code==="unimplemented"?console.warn(" El navegador no soporta persistencia offline."):console.error(" Error en persistencia offline:",t)});function Yve(){const[t,e]=v.useState(""),[r,n]=v.useState(""),[a,s]=v.useState(!1),[i,l]=v.useState(""),[c,u]=v.useState(!1),d=M2(),f=A=>{if(Array.isArray(A)){if(A.length!==1)return localStorage.setItem("role",A[0]||""),d("/admin");A=A[0]||""}const m=String(A||"");if(localStorage.setItem("role",m),Yr(m,"admin"))return d("/admin");if(Yr(m,"vendedor_pollo"))return d("/admin/salesV2");if(Yr(m,"vendedor_ropa"))return d("/admin/salesClothes");if(Yr(m,"vendedor_dulces"))return d("/admin/salesCandies");if(Yr(m,"supervisor_pollo")||Yr(m,"contador"))return d("/admin/batches")},h=async A=>{if(A.preventDefault(),l(""),!t.trim()){l("Ingresa el correo.");return}if(r.length<6){l("La contrasea debe tener al menos 6 caracteres.");return}try{u(!0),console.info&&console.info("[Login] attempting signIn",{email:t}),await w_(Cf,FO);const m=await vme(Cf,t,r);console.info&&console.info("[Login] signInWithEmailAndPassword success",{uid:m.user.uid,email:m.user.email});const p=m.user.uid;localStorage.setItem("POSYS_LOGIN_AT",String(Date.now()));const g=await ui(qt(ke,"users",p));if(console.info&&console.info("[Login] firestore users doc snap: exists=",g.exists()),!g.exists()){console.warn&&console.warn("[Login] user doc missing for uid",p),l("Tu usuario no tiene perfil en la base de datos.");return}const x=g.data();console.info&&console.info("[Login] user profile:",x);const y=Array.isArray(x.roles)?x.roles:x.role?[x.role]:[],b=y[0]||"",w=x.name||"",j=["admin","vendedor_pollo","vendedor_ropa","vendedor_dulces","supervisor_pollo","contador"];if(!y.some(I=>j.includes(I))){l("Rol no vlido. Consulta al administrador.");return}localStorage.setItem("user_email",m.user.email||""),w&&localStorage.setItem("user_name",w),localStorage.setItem("roles",JSON.stringify(y)),y.length===1?f(b):d("/admin")}catch(m){console.error&&console.error("[Login] sign-in error:",m);const p=String((m==null?void 0:m.code)||"");l(p==="auth/invalid-credential"||p==="auth/wrong-password"?"Credenciales incorrectas. ("+p+")":p==="auth/user-not-found"?"Usuario no encontrado. ("+p+")":p==="auth/too-many-requests"?"Demasiados intentos. Intenta ms tarde. ("+p+")":((m==null?void 0:m.message)||"Error al iniciar sesin.")+(p?` (${p})`:""))}finally{u(!1)}};return o.jsx("div",{className:"min-h-screen grid place-items-center ",children:o.jsxs("form",{onSubmit:h,className:"w-[92%] max-w-md bg-white p-6 rounded-2xl shadow-2xl",children:[o.jsx("h2",{className:"text-2xl font-bold text-center mb-4",children:"Iniciar Sesin"}),o.jsx("label",{className:"block text-sm font-semibold",children:"Correo electrnico"}),o.jsx("input",{type:"email",className:"w-full border rounded-2xl px-3 py-2 mb-3 shadow-2xl",value:t,onChange:A=>e(A.target.value),autoComplete:"username"}),o.jsx("label",{className:"block text-sm font-semibold",children:"Contrasea"}),o.jsxs("div",{className:"flex gap-2 mb-2",children:[o.jsx("input",{type:a?"text":"password",className:"flex-1 border rounded-2xl px-3 py-2 shadow-2xl",value:r,onChange:A=>n(A.target.value),minLength:6,autoComplete:"current-password"}),o.jsx("button",{type:"button",className:"px-3 py-2 rounded-2xl shadow-2xl bg-gray-200 hover:bg-gray-300",onClick:()=>s(A=>!A),children:a?"Ocultar":"Mostrar"})]}),o.jsx("div",{className:"text-xs text-gray-600 mb-3",children:"Mnimo 6 caracteres (requisito de Firebase)."}),o.jsx("button",{className:"w-full bg-blue-600 text-white px-4 py-2 rounded-2xl shadow-2xl hover:bg-blue-700 disabled:opacity-60",disabled:c,children:c?"Entrando...":"Entrar"}),i&&o.jsx("p",{className:`mt-3 text-sm ${i.startsWith("Error")||i.includes("no vlido")?"text-red-600":"text-gray-700"}`,children:i})]})})}function wn({children:t,allowedRoles:e}){const[r,n]=v.useState(!0),[a,s]=v.useState(!1);return v.useEffect(()=>{const i=TO(Cf,async l=>{if(l){const c=qt(ke,"users",l.uid),u=await ui(c);if(u.exists()){const d=u.data(),f=Array.isArray(d.roles)?d.roles:d.role?[d.role]:[];try{typeof window<"u"&&window.location&&(window.location.hostname==="localhost"||window.location.hostname==="127.0.0.1")?console.info&&console.info("[PrivateRoute] uid:",l.uid,"roleFromDoc:",role,"allowedRoles:",e):console.debug&&console.debug("[PrivateRoute] uid:",l.uid,"roleFromDoc:",role,"allowedRoles:",e)}catch{}let h=!1;for(const A of e)if(Yr(f,A)){h=!0;break}s(h)}else try{typeof window<"u"&&window.location&&(window.location.hostname==="localhost"||window.location.hostname==="127.0.0.1")?console.info&&console.info("[PrivateRoute] no user doc for uid:",l.uid):console.debug&&console.debug("[PrivateRoute] no user doc for uid:",l.uid)}catch{}}n(!1)});return()=>i()},[e]),r?o.jsx("div",{className:"p-4",children:"Cargando..."}):a?t:o.jsx(nA,{to:"/"})}const Jve={admin:{},supervisor_pollo:{bills:{view:!0,edit:!1},customersPollo:{view:!0,edit:!1},transactionsPollo:{view:!0,edit:!1},batches:{view:!0,edit:!1}},contador:{salesV2:{view:!0,edit:!0},customersPollo:{view:!0,edit:!0},batches:{view:!0,edit:!0},transactionsPollo:{view:!0,edit:!1},bills:{view:!0,edit:!1}},vendedor_pollo:{salesV2:{view:!0,edit:!0},transactionsPollo:{view:!0,edit:!1},bills:{view:!0,edit:!1},customersPollo:{view:!0,edit:!0}},vendedor_dulces:{salesCandies:{view:!0,edit:!0},productsVendorsCandies:{view:!0,edit:!1},productsPricesCandies:{view:!1,edit:!1},transactionCandies:{view:!1,edit:!1},cierreVentasCandies:{view:!1,edit:!1},customersCandies:{view:!0,edit:!0}},vendedor_ropa:{}};function iZ(t){return t?Array.isArray(t)?t.filter(Boolean):[t].filter(Boolean):[]}function Vn(t,e,r="view"){const n=iZ(t);return n.some(a=>a==="admin")?!0:n.some(a=>{var s,i;return!!((i=(s=Jve[a])==null?void 0:s[e])!=null&&i[r])})}const Zve={admin:{},supervisor_pollo:{bills:{cerrarVentas:!1},batches:{create:!1,update:!1,delete:!1,export:!1}},contador:{batches:{create:!0,update:!1,delete:!1,export:!0},bills:{cerrarVentas:!1}},vendedor_pollo:{salesV2:{create:!0,update:!0},customersPollo:{update:!0},bills:{cerrarVentas:!0}},vendedor_dulces:{salesCandies:{create:!0,update:!0},productsVendorsCandies:{create:!0,update:!1,delete:!1},customersCandies:{update:!0},productsPricesCandies:{price_edit:!1}},vendedor_ropa:{}};function e1e(t,e,r){const n=iZ(t);return n.some(a=>a==="admin")?!0:Vn(t,e,"view")?n.some(a=>{var i;const s=(i=Zve[a])==null?void 0:i[e];return!!(s!=null&&s[r])}):!1}function t1e({role:t,roles:e}){const r="/admin",n=({isActive:ie})=>`block rounded px-3 py-2 text-sm ${ie?"bg-blue-600 text-white":"text-gray-700 hover:bg-gray-100"}`,a=M2(),[s,i]=v.useState(!1),[l,c]=v.useState(!1),[u,d]=v.useState(!1),[f,h]=v.useState(!1),[A,m]=v.useState(!1),[p,g]=v.useState(!1),[x,y]=v.useState(!1),[b,w]=v.useState(!1),[j,I]=v.useState(!1),[_,E]=v.useState(!1),[S,k]=v.useState(!1),[P,T]=v.useState(!1),[F,Y]=v.useState(!1),[he,ue]=v.useState(!1),[fe,me]=v.useState(!1),[ne,Pe]=v.useState(!1),[Ie,O]=v.useState(!1),[H,R]=v.useState(!1),M=async()=>{R(!0)},K=async()=>{try{await kO(Cf)}catch(ie){console.error("signOut error:",ie)}finally{try{localStorage.removeItem("user_name"),localStorage.removeItem("user_email"),localStorage.removeItem("roles"),localStorage.removeItem("role")}catch{}R(!1),a("/")}},W=({open:ie,onClick:J,children:je})=>o.jsxs("button",{type:"button",onClick:J,className:"w-full flex items-center justify-between px-3 py-2 text-left text-sm font-semibold rounded hover:bg-gray-100",children:[o.jsx("span",{children:je}),o.jsx("span",{className:"text-xs",children:ie?"":""})]}),D=({open:ie,onClick:J,title:je})=>o.jsxs("button",{type:"button",onClick:J,className:"ml-2 w-[calc(100%-0.5rem)] flex items-center justify-between px-3 py-2 text-left text-sm rounded hover:bg-gray-100",children:[o.jsx("span",{className:"text-blue-500 font-medium ",children:je}),o.jsx("span",{className:"text-xs",children:ie?"":""})]}),L=e&&e.length?e:t,Z=Yr(L,"admin");Yr(L,"vendedor_pollo");const ge=Yr(L,"vendedor_ropa");Yr(L,"vendedor_dulces"),Yr(L,"supervisor_pollo")||Yr(L,"contador"),Yr(L,"contador");const U=Vn(L,"salesV2","view")||Vn(L,"customersPollo","view")||Vn(L,"transactionsPollo","view")||Vn(L,"bills","view")||Vn(L,"batches","view"),Ge=Vn(L,"salesCandies","view")||Vn(L,"productsVendorsCandies","view")||Vn(L,"customersCandies","view")||Vn(L,"productsPricesCandies","view")||Vn(L,"transactionCandies","view")||Vn(L,"cierreVentasCandies","view");return o.jsxs("div",{className:"min-h-screen flex",children:[o.jsxs("aside",{className:`${s?"w-15 bg-gray-50 border-r p-3 transition-all duration-300 flex flex-col items-center":"w-55"} bg-[#f1f3f7] border-r p-3 transition-all duration-300 flex flex-col`,children:[o.jsx("button",{onClick:()=>i(!s),className:"mb-2 p-2 rounded-2xl shadow-2xl bg-gray-300 hover:bg-gray-400","aria-label":s?"Expandir men":"Colapsar men",children:s?o.jsx("span",{title:"Expandir men",children:"Menu "}):o.jsx("span",{title:"Colapsar men",children:"Cerrar "})}),!s&&o.jsxs(o.Fragment,{children:[o.jsxs("nav",{className:"space-y-1",children:[Z&&o.jsxs(o.Fragment,{children:[o.jsxs("div",{className:"border rounded mb-1 rounded-2xl shadow-2xl bg-white",children:[o.jsx(W,{open:l,onClick:()=>c(ie=>!ie),children:"Pollos Bea"}),l&&o.jsxs("div",{className:"pb-2",children:[o.jsx(D,{open:p,onClick:()=>g(ie=>!ie),title:"Operaciones"}),p&&o.jsxs("div",{className:"ml-4 mt-1 space-y-1",children:[o.jsx(Jr,{to:`${r}/salesV2`,className:n,children:"Vender"}),o.jsx(Jr,{to:`${r}/customersPollo`,className:n,children:"Saldo Pendientes"}),o.jsx(Jr,{to:`${r}/transactionsPollo`,className:n,children:"Transacciones"}),o.jsx(Jr,{to:`${r}/bills`,className:n,children:"Cierre Ventas"})]}),o.jsx(D,{open:u,onClick:()=>d(ie=>!ie),title:"Inventarios"}),u&&o.jsxs("div",{className:"ml-4 mt-1 space-y-1",children:[o.jsx(Jr,{to:`${r}/batches`,className:n,children:"Inventario Pollo"}),o.jsx(Jr,{to:`${r}/paidBatches`,className:n,children:"Inventarios Pagados"})]}),o.jsx(D,{open:f,onClick:()=>h(ie=>!ie),title:"Finanzas"}),f&&o.jsxs("div",{className:"ml-4 mt-1 space-y-1",children:[o.jsx(Jr,{to:`${r}/financialDashboard`,className:n,children:"Dashboard"}),o.jsx(Jr,{to:`${r}/billing`,className:n,children:"Facturacion"}),o.jsx(Jr,{to:`${r}/expenses`,className:n,children:"Gastos"}),o.jsx(Jr,{to:`${r}/salesV2`,className:n,children:"Venta"}),o.jsx(Jr,{to:`${r}/bills`,className:n,children:"Cierre Ventas"}),o.jsx(Jr,{to:`${r}/billhistoric`,className:n,children:"Historial de Cierres"})]}),o.jsx(D,{open:A,onClick:()=>m(ie=>!ie),title:"Productos"}),A&&o.jsx("div",{className:"ml-4 mt-1 space-y-1",children:o.jsx(Jr,{to:`${r}/products`,className:n,children:"Productos"})})]})]}),o.jsxs("div",{className:"border rounded mb-1 rounded-2xl shadow-2xl bg-white",children:[o.jsx(W,{open:x,onClick:()=>y(ie=>!ie),children:"Gonper"}),x&&o.jsxs("div",{className:"pb-2",children:[o.jsx(D,{open:b,onClick:()=>w(ie=>!ie),title:"Inventarios"}),b&&o.jsx("div",{className:"ml-4 mt-1 space-y-1",children:o.jsx(Jr,{to:`${r}/notebooksInventory`,className:n,children:"Productos y Precios"})})]})]}),o.jsxs("div",{className:"border rounded mb-1 rounded-2xl shadow-2xl bg-white",children:[o.jsx(W,{open:F,onClick:()=>Y(ie=>!ie),children:"CandyShop"}),F&&o.jsxs("div",{className:"pb-2",children:[o.jsx(D,{open:fe,onClick:()=>me(ie=>!ie),title:"Vendedores"}),fe&&o.jsx("div",{className:"ml-4 mt-1 space-y-1",children:o.jsx(Jr,{to:`${r}/salesCandies`,className:n,children:"Venta"})}),fe&&o.jsx("div",{className:"ml-4 mt-1 space-y-1",children:o.jsx(Jr,{to:`${r}/productsVendorsCandies`,className:n,children:"Sub ordenes"})}),fe&&o.jsx("div",{className:"ml-4 mt-1 space-y-1",children:o.jsx(Jr,{to:`${r}/productsPricesCandies`,className:n,children:"Precios Venta"})}),o.jsx(D,{open:he,onClick:()=>ue(ie=>!ie),title:"Inventario"}),he&&o.jsx("div",{className:"ml-4 mt-1 space-y-1",children:o.jsx(Jr,{to:`${r}/mainordersCandies`,className:n,children:"Ordenes Maestras"})}),he&&o.jsx("div",{className:"ml-4 mt-1 space-y-1",children:o.jsx(Jr,{to:`${r}/inventoryMainOrderCandies`,className:n,children:"Lista de Ordenes"})}),he&&o.jsx("div",{className:"ml-4 mt-1 space-y-1",children:o.jsx(Jr,{to:`${r}/inventoryCandies`,className:n,children:"Lista Productos"})}),he&&o.jsx("div",{className:"ml-4 mt-1 space-y-1",children:o.jsx(Jr,{to:`${r}/productsCandies`,className:n,children:"Productos"})}),o.jsx(D,{open:ne,onClick:()=>Pe(ie=>!ie),title:"Finanzas"}),ne&&o.jsx("div",{className:"ml-4 mt-1 space-y-1",children:o.jsx(Jr,{to:`${r}/datacenter`,className:n,children:"Data Center"})}),ne&&o.jsx("div",{className:"ml-4 mt-1 space-y-1",children:o.jsx(Jr,{to:`${r}/cashDeliveries`,className:n,children:"Entregas Cash"})}),ne&&o.jsx("div",{className:"ml-4 mt-1 space-y-1",children:o.jsx(Jr,{to:`${r}/transactionCandies`,className:n,children:"Transacciones"})}),ne&&o.jsx("div",{className:"ml-4 mt-1 space-y-1",children:o.jsx(Jr,{to:`${r}/cierreVentasCandies`,className:n,children:"Cierres"})}),ne&&o.jsx("div",{className:"ml-4 mt-1 space-y-1",children:o.jsx(Jr,{to:`${r}/reporteCierresCandies`,className:n,children:"Reporte Cierres"})}),ne&&o.jsx("div",{className:"ml-4 mt-1 space-y-1",children:o.jsx(Jr,{to:`${r}/billingsCandies`,className:n,children:"Facturas"})}),ne&&o.jsx("div",{className:"ml-4 mt-1 space-y-1",children:o.jsx(Jr,{to:`${r}/consolidatedVendors`,className:n,children:"Consolidado Vendedores"})}),ne&&o.jsx("div",{className:"ml-4 mt-1 space-y-1",children:o.jsx(Jr,{to:`${r}/dashboardCandies`,className:n,children:"Dashboard"})}),ne&&o.jsx("div",{className:"ml-4 mt-1 space-y-1",children:o.jsx(Jr,{to:`${r}/customersCandies`,className:n,children:"Clientes"})}),ne&&o.jsx("div",{className:"ml-4 mt-1 space-y-1",children:o.jsx(Jr,{to:`${r}/vendorsCandies`,className:n,children:"Vendedores"})}),ne&&o.jsx("div",{className:"ml-4 mt-1 space-y-1",children:o.jsx(Jr,{to:`${r}/expensesCandies`,className:n,children:"Gastos"})})]})]}),o.jsxs("div",{className:"border rounded mb-1 rounded-2xl shadow-2xl bg-white",children:[o.jsx(W,{open:Ie,onClick:()=>O(ie=>!ie),children:"Operaciones Otras"}),Ie&&o.jsxs("div",{className:"pb-2 ml-4 mt-1 space-y-1",children:[o.jsx(Jr,{to:`${r}/users`,className:n,children:"Usuarios"}),o.jsx(Jr,{to:`${r}/fix`,className:n,children:"Fix de lotes"}),o.jsx(Jr,{to:`${r}/transactionclose`,className:n,children:"Liquidaciones"})]})]})]}),!Z&&U&&o.jsxs("div",{className:"border rounded mb-1 rounded-2xl shadow-2xl bg-white",children:[o.jsx(W,{open:l,onClick:()=>c(ie=>!ie),children:"Pollos Bea"}),l&&o.jsxs("div",{className:"pb-2 ml-4 mt-1 space-y-1",children:[Vn(L,"salesV2")&&o.jsx(Jr,{to:`${r}/salesV2`,className:n,children:"Vender"}),Vn(L,"batches")&&o.jsx(Jr,{to:`${r}/batches`,className:n,children:"Inventario Pollo"}),Vn(L,"bills")&&o.jsx(Jr,{to:`${r}/bills`,className:n,children:"Cierre Ventas"}),Vn(L,"transactionsPollo")&&o.jsx(Jr,{to:`${r}/transactionsPollo`,className:n,children:"Transacciones"}),Vn(L,"customersPollo")&&o.jsx(Jr,{to:`${r}/customersPollo`,className:n,children:"Saldos Pendientes"})]})]}),!Z&&Ge&&o.jsxs("div",{className:"border rounded",children:[o.jsx("div",{className:"pb-2 ml-4 mt-1 space-y-1",children:Vn(L,"salesCandies")&&o.jsx(Jr,{to:`${r}/salesCandies`,className:n,children:"Venta"})}),o.jsx("div",{className:"pb-2 ml-4 mt-1 space-y-1",children:Vn(L,"transactionCandies")&&o.jsx(Jr,{to:`${r}/transactionCandies`,className:n,children:"Ventas del dia"})}),o.jsx("div",{className:"pb-2 ml-4 mt-1 space-y-1",children:Vn(L,"cierreVentasCandies")&&o.jsx(Jr,{to:`${r}/cierreVentasCandies`,className:n,children:"Cierre de Ventas"})}),o.jsx("div",{className:"ml-4 mt-1 space-y-1",children:Vn(L,"productsVendorsCandies")&&o.jsx(Jr,{to:`${r}/productsVendorsCandies`,className:n,children:"Pedidos"})}),o.jsx("div",{className:"ml-4 mt-1 space-y-1",children:Vn(L,"customersCandies")&&o.jsx(Jr,{to:`${r}/customersCandies`,className:n,children:"Clientes"})}),o.jsx("div",{className:"ml-4 mt-1 space-y-1",children:Vn(L,"productsPricesCandies")&&o.jsx(Jr,{to:`${r}/productsPricesCandies`,className:n,children:"Precios Venta"})})]}),ge&&o.jsxs("div",{className:"border rounded",children:[o.jsx(W,{open:x,onClick:()=>y(ie=>!ie),children:"Operaciones Ropa"}),x&&o.jsxs("div",{className:"pb-2",children:[o.jsx(D,{open:S,onClick:()=>k(ie=>!ie),title:"Ventas"}),S&&o.jsxs("div",{className:"ml-4 mt-1 space-y-1",children:[o.jsx(Jr,{to:`${r}/salesClothes`,className:n,children:"Venta Ropa"}),o.jsx(Jr,{to:`${r}/TransactionsReportClothes`,className:n,children:"Transacciones"})]}),o.jsx(D,{open:j,onClick:()=>I(ie=>!ie),title:"Productos"}),j&&o.jsx("div",{className:"ml-4 mt-1 space-y-1",children:o.jsx(Jr,{to:`${r}/productsClothes`,className:n,children:"Agregar Productos"})}),o.jsx(D,{open:_,onClick:()=>E(ie=>!ie),title:"Clientes"}),_&&o.jsx("div",{className:"ml-4 mt-1 space-y-1",children:o.jsx(Jr,{to:`${r}/CustomersClothes`,className:n,children:"Listado de Clientes"})})]})]})]}),o.jsx("button",{onClick:M,className:"mt-4 bg-red-500 text-white px-3 py-2 rounded-2xl shadow-2xl hover:bg-red-600",children:"Cerrar sesin"}),o.jsx("div",{className:"mt-2 text-[20px] text-gray-700",children:typeof window<"u"&&(localStorage.getItem("user_name")||localStorage.getItem("user_email"))}),H&&o.jsxs("div",{className:"fixed inset-0 z-[120] flex items-center justify-center",children:[o.jsx("div",{className:"absolute inset-0 bg-black/20",onClick:()=>R(!1)}),o.jsxs("div",{className:"bg-white p-4 rounded-xl shadow-lg z-[130] w-[90%] max-w-sm",children:[o.jsx("div",{className:"font-semibold mb-3",children:"Ests seguro de cerrar sesin?"}),o.jsxs("div",{className:"flex gap-2 justify-end",children:[o.jsx("button",{onClick:()=>R(!1),className:"px-3 py-2 rounded bg-gray-200",children:"No"}),o.jsx("button",{onClick:K,className:"px-3 py-2 rounded bg-red-500 text-white",children:"SI"})]})]})]})]})]}),o.jsx("main",{className:"flex-1 p-6",children:o.jsx(sX,{})})]})}function T1(...t){return t.filter(Boolean).join(" ")}function r1e({role:t,roles:e}){const r=M2(),n=XA(),a="/admin",s=e&&e.length?e:t,i=Yr(s,"admin"),l=Yr(s,"vendedor_pollo"),c=Yr(s,"vendedor_dulces"),u=Yr(s,"supervisor_pollo")||Yr(s,"contador"),d=Yr(s,"contador"),f=Vn(s,"salesV2","view")||Vn(s,"batches","view")||Vn(s,"bills","view")||Vn(s,"transactionsPollo","view")||Vn(s,"customersPollo","view"),h=Vn(s,"salesCandies","view")||Vn(s,"productsVendorsCandies","view")||Vn(s,"customersCandies","view")||Vn(s,"productsPricesCandies","view")||Vn(s,"transactionCandies","view")||Vn(s,"cierreVentasCandies","view"),A=f&&h,[m,p]=v.useState(()=>{try{const k=typeof window<"u"?localStorage.getItem("rubro"):null;if(k==="POLLO"||k==="DULCES")return k}catch{}return f?"POLLO":h?"DULCES":"POLLO"}),[g,x]=v.useState(!1),[y,b]=v.useState(!1),w=v.useMemo(()=>{let k=[];if(i||A){if(m==="POLLO")if(i)k=[{key:"venta",label:"Vender",to:`${a}/salesV2`},{key:"clientes",label:"Saldos pendientes",to:`${a}/customersPollo`},{key:"dash",label:"Dashboard",to:`${a}/financialDashboard`},{key:"cierre",label:"Cierre Ventas",to:`${a}/bills`},{key:"trxs",label:"Transacciones",to:`${a}/transactionsPollo`},{key:"inv",label:"Inventario",to:`${a}/batches`},{key:"invPag",label:"Factura",to:`${a}/paidBatches`},{key:"gastos",label:"Gastos",to:`${a}/expenses`}];else if(u){const F=[{key:"venta",label:"Vender",to:`${a}/salesV2`},{key:"clientes",label:"Saldos pendientes",to:`${a}/customersPollo`},{key:"inv",label:"Inventario",to:`${a}/batches`},{key:"trxs",label:"Transacciones",to:`${a}/transactionsPollo`},{key:"cierre",label:"Cierre Ventas",to:`${a}/bills`}];Yr(s,"contador")&&(k=F)}else l?k=[{key:"venta",label:"Vender",to:`${a}/salesV2`},{key:"clientes",label:"Saldos Pendientes",to:`${a}/customersPollo`},{key:"cierre",label:"Cierre Ventas",to:`${a}/bills`},{key:"trxs",label:"Transacciones",to:`${a}/transactionsPollo`}]:d?k=[{key:"venta",label:"Vender",to:`${a}/salesV2`},{key:"clientes",label:"Saldos Pendientes",to:`${a}/customersPollo`},{key:"cierre",label:"Cierre Ventas",to:`${a}/bills`},{key:"trxs",label:"Transacciones",to:`${a}/transactionsPollo`}]:k=[{key:"home",label:"Inicio",to:`${a}`}];m==="DULCES"&&(i?k=[{key:"dc",label:"Data Center Reporte",to:`${a}/datacenter`},{key:"maes",label:"Inventario Maestro",to:`${a}/mainordersCandies`},{key:"ord",label:"Inventario Vendedor",to:`${a}/productsVendorsCandies`},{key:"cli",label:"Saldos Pendientes",to:`${a}/customersCandies`},{key:"trx",label:"Ventas del dia",to:`${a}/transactionCandies`},{key:"cier",label:"Cierre de ventas",to:`${a}/cierreVentasCandies`},{key:"cash",label:"Entregas Efectivo ",to:`${a}/cashDeliveries`},{key:"items",label:"Productos",to:`${a}/productsCandies`},{key:"precios",label:"Precio Ventas",to:`${a}/productsPricesCandies`},{key:"gonper",label:"Productos Gonper",to:`${a}/notebooksInventory`}]:c?k=[{key:"venta",label:"Vender",to:`${a}/salesCandies`},{key:"precios",label:"Precios",to:`${a}/productsPricesCandies`},{key:"ped",label:"Inventario",to:`${a}/productsVendorsCandies`},{key:"cli",label:"Saldos Pendientes",to:`${a}/customersCandies`},{key:"trx",label:"Ventas",to:`${a}/transactionCandies`},{key:"cier",label:"Cierre",to:`${a}/cierreVentasCandies`}]:k=[{key:"home",label:"Inicio",to:`${a}`}])}else if(u){const F=[{key:"venta",label:"Venta",to:`${a}/salesV2`},{key:"inv",label:"Inventario",to:`${a}/batches`},{key:"clientes",label:"Saldos Pendientes",to:`${a}/customersPollo`},{key:"trxs",label:"Transacciones",to:`${a}/transactionsPollo`},{key:"cierre",label:"Cierre",to:`${a}/bills`}];Yr(s,"contador"),k=F}else l?k=[{key:"venta",label:"Venta",to:`${a}/salesV2`},{key:"cierre",label:"Cierre",to:`${a}/bills`},{key:"trxs",label:"Transacciones",to:`${a}/transactionsPollo`}]:c?k=[{key:"venta",label:"Vender",to:`${a}/salesCandies`},{key:"precios",label:"Precios",to:`${a}/productsPricesCandies`},{key:"ped",label:"Inventario",to:`${a}/productsVendorsCandies`},{key:"cli",label:"Saldos Pendientes",to:`${a}/customersCandies`},{key:"trx",label:"Ventas",to:`${a}/transactionCandies`},{key:"cier",label:"Cierre",to:`${a}/cierreVentasCandies`}]:k=[{key:"home",label:"Inicio",to:`${a}`}];const P=new Set(["bills","customersPollo","transactionsPollo","batches","salesV2","salesCandies","productsVendorsCandies","productsPricesCandies","transactionCandies","cierreVentasCandies","customersCandies"]);return k.filter(F=>{const he=F.to.replace(`${a}/`,"");return P.has(he)?Vn(s,he,"view"):!0})},[a,m,i,A,u,l,c,d,s]);v.useEffect(()=>{if((i||A)&&w.length){try{localStorage.setItem("rubro",m)}catch{}r(w[0].to,{replace:!0})}},[m]),v.useEffect(()=>{g&&x(!1)},[n.pathname]),v.useEffect(()=>{const k=P=>{P.key==="Escape"&&x(!1)};return g&&window.addEventListener("keydown",k),()=>window.removeEventListener("keydown",k)},[g]);const j=async()=>{b(!0)},I=async()=>{try{await kO(Cf)}catch(k){console.error("signOut error:",k)}finally{try{localStorage.removeItem("user_name"),localStorage.removeItem("user_email"),localStorage.removeItem("roles"),localStorage.removeItem("role")}catch{}b(!1),x(!1),r("/")}},_=({isActive:k})=>T1("flex-1 text-center text-[11px] py-1.5 rounded-lg","leading-none select-none",k?"bg-blue-600 text-white":"text-gray-700 hover:bg-gray-100"),E=w.length<=2,S=({isActive:k})=>T1("w-full flex items-center justify-between px-4 py-3 rounded-xl border",k?"bg-blue-600 text-white border-blue-600":"bg-white text-gray-800 border-gray-200 hover:bg-gray-50");return o.jsxs("div",{className:"min-h-screen bg-[#f1f3f7] flex flex-col",children:[o.jsx("header",{className:"sticky top-0 z-50 bg-white border-b shadow-sm",children:o.jsxs("div",{className:"px-3 py-3 flex items-center gap-2",children:[i||A?o.jsxs("div",{className:"flex gap-2",children:[o.jsx("button",{type:"button",onClick:()=>p("POLLO"),className:T1("px-3 py-2 rounded-2xl text-sm font-semibold",m==="POLLO"?"bg-blue-600 text-white":"bg-gray-100 text-gray-700"),children:"Carniceria"}),o.jsx("button",{type:"button",onClick:()=>p("DULCES"),className:T1("px-3 py-2 rounded-2xl text-sm font-semibold",m==="DULCES"?"bg-blue-600 text-white":"bg-gray-100 text-gray-700"),children:"Mr. Candy"})]}):o.jsx("div",{className:"text-sm font-semibold text-gray-800",children:l?"Pollos Bea":c?"CandyShop":"Posys"}),o.jsx("div",{className:"ml-auto flex items-center gap-2",children:o.jsx("button",{type:"button",onClick:()=>x(!0),className:"px-3 py-2 rounded-2xl bg-gray-100 text-gray-800 text-sm font-bold shadow hover:bg-gray-200","aria-label":"Abrir men",title:"Men",children:""})})]})}),g&&o.jsxs("div",{className:"fixed inset-0 z-[80]",children:[o.jsx("button",{type:"button",className:"absolute inset-0 bg-black/40",onClick:()=>x(!1),"aria-label":"Cerrar men"}),o.jsxs("aside",{className:"absolute right-0 top-0 h-full w-[86%] max-w-sm bg-white shadow-2xl border-l flex flex-col",children:[o.jsxs("div",{className:"p-4 border-b",children:[o.jsxs("div",{className:"flex items-center justify-between",children:[o.jsx("div",{className:"font-bold text-gray-900",children:"Men"}),o.jsx("button",{type:"button",onClick:()=>x(!1),className:"px-3 py-2 rounded-xl bg-gray-100 hover:bg-gray-200",children:""})]}),o.jsx("div",{className:"mt-2 text-[20px] text-gray-600",children:typeof window<"u"&&(localStorage.getItem("user_name")||localStorage.getItem("user_email"))})]}),o.jsx("div",{className:"p-3 flex-1 overflow-y-auto space-y-2",children:w.map(k=>o.jsxs(Jr,{to:k.to,className:S,children:[o.jsx("span",{className:"font-semibold",children:k.label}),o.jsx("span",{className:"text-sm opacity-80",children:""})]},k.key))}),o.jsxs("div",{className:"p-3 border-t space-y-2 pb-[calc(12px+env(safe-area-inset-bottom))]",children:[o.jsx("button",{onClick:j,className:"w-full px-4 py-3 rounded-xl bg-red-500 text-white font-semibold shadow hover:bg-red-600",children:"Cerrar sesin"}),y&&o.jsxs("div",{className:"fixed inset-0 z-[120] flex items-center justify-center",children:[o.jsx("div",{className:"absolute inset-0 bg-black/20",onClick:()=>b(!1)}),o.jsxs("div",{className:"bg-white p-4 rounded-xl shadow-lg z-[130] w-[90%] max-w-sm",children:[o.jsx("div",{className:"font-semibold mb-3",children:"Ests seguro de cerrar sesin?"}),o.jsxs("div",{className:"flex gap-2 justify-end",children:[o.jsx("button",{onClick:()=>b(!1),className:"px-3 py-2 rounded bg-gray-200",children:"No"}),o.jsx("button",{onClick:I,className:"px-3 py-2 rounded bg-red-500 text-white",children:"SI"})]})]})]})]})]})]}),o.jsx("main",{className:T1("flex-1 overflow-y-auto px-3 pt-3",E?"pb-[calc(92px+env(safe-area-inset-bottom))]":"pb-[calc(16px+env(safe-area-inset-bottom))]"),children:o.jsx(sX,{})}),E&&o.jsx("nav",{className:"fixed bottom-0 left-0 right-0 z-50 bg-white border-t shadow-md pb-[env(safe-area-inset-bottom)]",children:o.jsx("div",{className:"max-w-3xl mx-auto px-2 py-1.5 flex gap-1.5",children:w.map(k=>o.jsx(Jr,{to:k.to,className:_,children:k.label},k.key))})})]})}const oZ=6048e5,n1e=864e5,g7=Symbol.for("constructDateFrom");function Od(t,e){return typeof t=="function"?t(e):t&&typeof t=="object"&&g7 in t?t[g7](e):t instanceof Date?new t.constructor(e):new Date(e)}function ql(t,e){return Od(e||t,t)}function a1e(t,e,r){const n=ql(t,r==null?void 0:r.in);return isNaN(e)?Od(t,NaN):(n.setDate(n.getDate()+e),n)}function s1e(t,e,r){const n=ql(t,r==null?void 0:r.in);if(isNaN(e))return Od(t,NaN);const a=n.getDate(),s=Od(t,n.getTime());s.setMonth(n.getMonth()+e+1,0);const i=s.getDate();return a>=i?s:(n.setFullYear(s.getFullYear(),s.getMonth(),a),n)}let i1e={};function c4(){return i1e}function Gb(t,e){var l,c,u,d;const r=c4(),n=(e==null?void 0:e.weekStartsOn)??((c=(l=e==null?void 0:e.locale)==null?void 0:l.options)==null?void 0:c.weekStartsOn)??r.weekStartsOn??((d=(u=r.locale)==null?void 0:u.options)==null?void 0:d.weekStartsOn)??0,a=ql(t,e==null?void 0:e.in),s=a.getDay(),i=(s<n?7:0)+s-n;return a.setDate(a.getDate()-i),a.setHours(0,0,0,0),a}function UE(t,e){return Gb(t,{...e,weekStartsOn:1})}function lZ(t,e){const r=ql(t,e==null?void 0:e.in),n=r.getFullYear(),a=Od(r,0);a.setFullYear(n+1,0,4),a.setHours(0,0,0,0);const s=UE(a),i=Od(r,0);i.setFullYear(n,0,4),i.setHours(0,0,0,0);const l=UE(i);return r.getTime()>=s.getTime()?n+1:r.getTime()>=l.getTime()?n:n-1}function x7(t){const e=ql(t),r=new Date(Date.UTC(e.getFullYear(),e.getMonth(),e.getDate(),e.getHours(),e.getMinutes(),e.getSeconds(),e.getMilliseconds()));return r.setUTCFullYear(e.getFullYear()),+t-+r}function o1e(t,...e){const r=Od.bind(null,e.find(n=>typeof n=="object"));return e.map(r)}function v7(t,e){const r=ql(t,e==null?void 0:e.in);return r.setHours(0,0,0,0),r}function l1e(t,e,r){const[n,a]=o1e(r==null?void 0:r.in,t,e),s=v7(n),i=v7(a),l=+s-x7(s),c=+i-x7(i);return Math.round((l-c)/n1e)}function c1e(t,e){const r=lZ(t,e),n=Od(t,0);return n.setFullYear(r,0,4),n.setHours(0,0,0,0),UE(n)}function u1e(t){return t instanceof Date||typeof t=="object"&&Object.prototype.toString.call(t)==="[object Date]"}function d1e(t){return!(!u1e(t)&&typeof t!="number"||isNaN(+ql(t)))}function Ud(t,e){const r=ql(t,e==null?void 0:e.in),n=r.getMonth();return r.setFullYear(r.getFullYear(),n+1,0),r.setHours(23,59,59,999),r}function Qd(t,e){const r=ql(t,e==null?void 0:e.in);return r.setDate(1),r.setHours(0,0,0,0),r}function f1e(t,e){const r=ql(t,e==null?void 0:e.in);return r.setFullYear(r.getFullYear(),0,1),r.setHours(0,0,0,0),r}const A1e={lessThanXSeconds:{one:"less than a second",other:"less than {{count}} seconds"},xSeconds:{one:"1 second",other:"{{count}} seconds"},halfAMinute:"half a minute",lessThanXMinutes:{one:"less than a minute",other:"less than {{count}} minutes"},xMinutes:{one:"1 minute",other:"{{count}} minutes"},aboutXHours:{one:"about 1 hour",other:"about {{count}} hours"},xHours:{one:"1 hour",other:"{{count}} hours"},xDays:{one:"1 day",other:"{{count}} days"},aboutXWeeks:{one:"about 1 week",other:"about {{count}} weeks"},xWeeks:{one:"1 week",other:"{{count}} weeks"},aboutXMonths:{one:"about 1 month",other:"about {{count}} months"},xMonths:{one:"1 month",other:"{{count}} months"},aboutXYears:{one:"about 1 year",other:"about {{count}} years"},xYears:{one:"1 year",other:"{{count}} years"},overXYears:{one:"over 1 year",other:"over {{count}} years"},almostXYears:{one:"almost 1 year",other:"almost {{count}} years"}},h1e=(t,e,r)=>{let n;const a=A1e[t];return typeof a=="string"?n=a:e===1?n=a.one:n=a.other.replace("{{count}}",e.toString()),r!=null&&r.addSuffix?r.comparison&&r.comparison>0?"in "+n:n+" ago":n};function $j(t){return(e={})=>{const r=e.width?String(e.width):t.defaultWidth;return t.formats[r]||t.formats[t.defaultWidth]}}const m1e={full:"EEEE, MMMM do, y",long:"MMMM do, y",medium:"MMM d, y",short:"MM/dd/yyyy"},p1e={full:"h:mm:ss a zzzz",long:"h:mm:ss a z",medium:"h:mm:ss a",short:"h:mm a"},g1e={full:"{{date}} 'at' {{time}}",long:"{{date}} 'at' {{time}}",medium:"{{date}}, {{time}}",short:"{{date}}, {{time}}"},x1e={date:$j({formats:m1e,defaultWidth:"full"}),time:$j({formats:p1e,defaultWidth:"full"}),dateTime:$j({formats:g1e,defaultWidth:"full"})},v1e={lastWeek:"'last' eeee 'at' p",yesterday:"'yesterday at' p",today:"'today at' p",tomorrow:"'tomorrow at' p",nextWeek:"eeee 'at' p",other:"P"},y1e=(t,e,r,n)=>v1e[t];function k1(t){return(e,r)=>{const n=r!=null&&r.context?String(r.context):"standalone";let a;if(n==="formatting"&&t.formattingValues){const i=t.defaultFormattingWidth||t.defaultWidth,l=r!=null&&r.width?String(r.width):i;a=t.formattingValues[l]||t.formattingValues[i]}else{const i=t.defaultWidth,l=r!=null&&r.width?String(r.width):t.defaultWidth;a=t.values[l]||t.values[i]}const s=t.argumentCallback?t.argumentCallback(e):e;return a[s]}}const b1e={narrow:["B","A"],abbreviated:["BC","AD"],wide:["Before Christ","Anno Domini"]},w1e={narrow:["1","2","3","4"],abbreviated:["Q1","Q2","Q3","Q4"],wide:["1st quarter","2nd quarter","3rd quarter","4th quarter"]},N1e={narrow:["J","F","M","A","M","J","J","A","S","O","N","D"],abbreviated:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],wide:["January","February","March","April","May","June","July","August","September","October","November","December"]},C1e={narrow:["S","M","T","W","T","F","S"],short:["Su","Mo","Tu","We","Th","Fr","Sa"],abbreviated:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],wide:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"]},_1e={narrow:{am:"a",pm:"p",midnight:"mi",noon:"n",morning:"morning",afternoon:"afternoon",evening:"evening",night:"night"},abbreviated:{am:"AM",pm:"PM",midnight:"midnight",noon:"noon",morning:"morning",afternoon:"afternoon",evening:"evening",night:"night"},wide:{am:"a.m.",pm:"p.m.",midnight:"midnight",noon:"noon",morning:"morning",afternoon:"afternoon",evening:"evening",night:"night"}},E1e={narrow:{am:"a",pm:"p",midnight:"mi",noon:"n",morning:"in the morning",afternoon:"in the afternoon",evening:"in the evening",night:"at night"},abbreviated:{am:"AM",pm:"PM",midnight:"midnight",noon:"noon",morning:"in the morning",afternoon:"in the afternoon",evening:"in the evening",night:"at night"},wide:{am:"a.m.",pm:"p.m.",midnight:"midnight",noon:"noon",morning:"in the morning",afternoon:"in the afternoon",evening:"in the evening",night:"at night"}},S1e=(t,e)=>{const r=Number(t),n=r%100;if(n>20||n<10)switch(n%10){case 1:return r+"st";case 2:return r+"nd";case 3:return r+"rd"}return r+"th"},I1e={ordinalNumber:S1e,era:k1({values:b1e,defaultWidth:"wide"}),quarter:k1({values:w1e,defaultWidth:"wide",argumentCallback:t=>t-1}),month:k1({values:N1e,defaultWidth:"wide"}),day:k1({values:C1e,defaultWidth:"wide"}),dayPeriod:k1({values:_1e,defaultWidth:"wide",formattingValues:E1e,defaultFormattingWidth:"wide"})};function F1(t){return(e,r={})=>{const n=r.width,a=n&&t.matchPatterns[n]||t.matchPatterns[t.defaultMatchWidth],s=e.match(a);if(!s)return null;const i=s[0],l=n&&t.parsePatterns[n]||t.parsePatterns[t.defaultParseWidth],c=Array.isArray(l)?B1e(l,f=>f.test(i)):j1e(l,f=>f.test(i));let u;u=t.valueCallback?t.valueCallback(c):c,u=r.valueCallback?r.valueCallback(u):u;const d=e.slice(i.length);return{value:u,rest:d}}}function j1e(t,e){for(const r in t)if(Object.prototype.hasOwnProperty.call(t,r)&&e(t[r]))return r}function B1e(t,e){for(let r=0;r<t.length;r++)if(e(t[r]))return r}function P1e(t){return(e,r={})=>{const n=e.match(t.matchPattern);if(!n)return null;const a=n[0],s=e.match(t.parsePattern);if(!s)return null;let i=t.valueCallback?t.valueCallback(s[0]):s[0];i=r.valueCallback?r.valueCallback(i):i;const l=e.slice(a.length);return{value:i,rest:l}}}const T1e=/^(\d+)(th|st|nd|rd)?/i,k1e=/\d+/i,F1e={narrow:/^(b|a)/i,abbreviated:/^(b\.?\s?c\.?|b\.?\s?c\.?\s?e\.?|a\.?\s?d\.?|c\.?\s?e\.?)/i,wide:/^(before christ|before common era|anno domini|common era)/i},O1e={any:[/^b/i,/^(a|c)/i]},D1e={narrow:/^[1234]/i,abbreviated:/^q[1234]/i,wide:/^[1234](th|st|nd|rd)? quarter/i},R1e={any:[/1/i,/2/i,/3/i,/4/i]},M1e={narrow:/^[jfmasond]/i,abbreviated:/^(jan|feb|mar|apr|may|jun|jul|aug|sep|oct|nov|dec)/i,wide:/^(january|february|march|april|may|june|july|august|september|october|november|december)/i},L1e={narrow:[/^j/i,/^f/i,/^m/i,/^a/i,/^m/i,/^j/i,/^j/i,/^a/i,/^s/i,/^o/i,/^n/i,/^d/i],any:[/^ja/i,/^f/i,/^mar/i,/^ap/i,/^may/i,/^jun/i,/^jul/i,/^au/i,/^s/i,/^o/i,/^n/i,/^d/i]},U1e={narrow:/^[smtwf]/i,short:/^(su|mo|tu|we|th|fr|sa)/i,abbreviated:/^(sun|mon|tue|wed|thu|fri|sat)/i,wide:/^(sunday|monday|tuesday|wednesday|thursday|friday|saturday)/i},Q1e={narrow:[/^s/i,/^m/i,/^t/i,/^w/i,/^t/i,/^f/i,/^s/i],any:[/^su/i,/^m/i,/^tu/i,/^w/i,/^th/i,/^f/i,/^sa/i]},V1e={narrow:/^(a|p|mi|n|(in the|at) (morning|afternoon|evening|night))/i,any:/^([ap]\.?\s?m\.?|midnight|noon|(in the|at) (morning|afternoon|evening|night))/i},H1e={any:{am:/^a/i,pm:/^p/i,midnight:/^mi/i,noon:/^no/i,morning:/morning/i,afternoon:/afternoon/i,evening:/evening/i,night:/night/i}},$1e={ordinalNumber:P1e({matchPattern:T1e,parsePattern:k1e,valueCallback:t=>parseInt(t,10)}),era:F1({matchPatterns:F1e,defaultMatchWidth:"wide",parsePatterns:O1e,defaultParseWidth:"any"}),quarter:F1({matchPatterns:D1e,defaultMatchWidth:"wide",parsePatterns:R1e,defaultParseWidth:"any",valueCallback:t=>t+1}),month:F1({matchPatterns:M1e,defaultMatchWidth:"wide",parsePatterns:L1e,defaultParseWidth:"any"}),day:F1({matchPatterns:U1e,defaultMatchWidth:"wide",parsePatterns:Q1e,defaultParseWidth:"any"}),dayPeriod:F1({matchPatterns:V1e,defaultMatchWidth:"any",parsePatterns:H1e,defaultParseWidth:"any"})},K1e={code:"en-US",formatDistance:h1e,formatLong:x1e,formatRelative:y1e,localize:I1e,match:$1e,options:{weekStartsOn:0,firstWeekContainsDate:1}};function G1e(t,e){const r=ql(t,e==null?void 0:e.in);return l1e(r,f1e(r))+1}function q1e(t,e){const r=ql(t,e==null?void 0:e.in),n=+UE(r)-+c1e(r);return Math.round(n/oZ)+1}function cZ(t,e){var d,f,h,A;const r=ql(t,e==null?void 0:e.in),n=r.getFullYear(),a=c4(),s=(e==null?void 0:e.firstWeekContainsDate)??((f=(d=e==null?void 0:e.locale)==null?void 0:d.options)==null?void 0:f.firstWeekContainsDate)??a.firstWeekContainsDate??((A=(h=a.locale)==null?void 0:h.options)==null?void 0:A.firstWeekContainsDate)??1,i=Od((e==null?void 0:e.in)||t,0);i.setFullYear(n+1,0,s),i.setHours(0,0,0,0);const l=Gb(i,e),c=Od((e==null?void 0:e.in)||t,0);c.setFullYear(n,0,s),c.setHours(0,0,0,0);const u=Gb(c,e);return+r>=+l?n+1:+r>=+u?n:n-1}function z1e(t,e){var l,c,u,d;const r=c4(),n=(e==null?void 0:e.firstWeekContainsDate)??((c=(l=e==null?void 0:e.locale)==null?void 0:l.options)==null?void 0:c.firstWeekContainsDate)??r.firstWeekContainsDate??((d=(u=r.locale)==null?void 0:u.options)==null?void 0:d.firstWeekContainsDate)??1,a=cZ(t,e),s=Od((e==null?void 0:e.in)||t,0);return s.setFullYear(a,0,n),s.setHours(0,0,0,0),Gb(s,e)}function W1e(t,e){const r=ql(t,e==null?void 0:e.in),n=+Gb(r,e)-+z1e(r,e);return Math.round(n/oZ)+1}function va(t,e){const r=t<0?"-":"",n=Math.abs(t).toString().padStart(e,"0");return r+n}const kh={y(t,e){const r=t.getFullYear(),n=r>0?r:1-r;return va(e==="yy"?n%100:n,e.length)},M(t,e){const r=t.getMonth();return e==="M"?String(r+1):va(r+1,2)},d(t,e){return va(t.getDate(),e.length)},a(t,e){const r=t.getHours()/12>=1?"pm":"am";switch(e){case"a":case"aa":return r.toUpperCase();case"aaa":return r;case"aaaaa":return r[0];case"aaaa":default:return r==="am"?"a.m.":"p.m."}},h(t,e){return va(t.getHours()%12||12,e.length)},H(t,e){return va(t.getHours(),e.length)},m(t,e){return va(t.getMinutes(),e.length)},s(t,e){return va(t.getSeconds(),e.length)},S(t,e){const r=e.length,n=t.getMilliseconds(),a=Math.trunc(n*Math.pow(10,r-3));return va(a,e.length)}},Sg={midnight:"midnight",noon:"noon",morning:"morning",afternoon:"afternoon",evening:"evening",night:"night"},y7={G:function(t,e,r){const n=t.getFullYear()>0?1:0;switch(e){case"G":case"GG":case"GGG":return r.era(n,{width:"abbreviated"});case"GGGGG":return r.era(n,{width:"narrow"});case"GGGG":default:return r.era(n,{width:"wide"})}},y:function(t,e,r){if(e==="yo"){const n=t.getFullYear(),a=n>0?n:1-n;return r.ordinalNumber(a,{unit:"year"})}return kh.y(t,e)},Y:function(t,e,r,n){const a=cZ(t,n),s=a>0?a:1-a;if(e==="YY"){const i=s%100;return va(i,2)}return e==="Yo"?r.ordinalNumber(s,{unit:"year"}):va(s,e.length)},R:function(t,e){const r=lZ(t);return va(r,e.length)},u:function(t,e){const r=t.getFullYear();return va(r,e.length)},Q:function(t,e,r){const n=Math.ceil((t.getMonth()+1)/3);switch(e){case"Q":return String(n);case"QQ":return va(n,2);case"Qo":return r.ordinalNumber(n,{unit:"quarter"});case"QQQ":return r.quarter(n,{width:"abbreviated",context:"formatting"});case"QQQQQ":return r.quarter(n,{width:"narrow",context:"formatting"});case"QQQQ":default:return r.quarter(n,{width:"wide",context:"formatting"})}},q:function(t,e,r){const n=Math.ceil((t.getMonth()+1)/3);switch(e){case"q":return String(n);case"qq":return va(n,2);case"qo":return r.ordinalNumber(n,{unit:"quarter"});case"qqq":return r.quarter(n,{width:"abbreviated",context:"standalone"});case"qqqqq":return r.quarter(n,{width:"narrow",context:"standalone"});case"qqqq":default:return r.quarter(n,{width:"wide",context:"standalone"})}},M:function(t,e,r){const n=t.getMonth();switch(e){case"M":case"MM":return kh.M(t,e);case"Mo":return r.ordinalNumber(n+1,{unit:"month"});case"MMM":return r.month(n,{width:"abbreviated",context:"formatting"});case"MMMMM":return r.month(n,{width:"narrow",context:"formatting"});case"MMMM":default:return r.month(n,{width:"wide",context:"formatting"})}},L:function(t,e,r){const n=t.getMonth();switch(e){case"L":return String(n+1);case"LL":return va(n+1,2);case"Lo":return r.ordinalNumber(n+1,{unit:"month"});case"LLL":return r.month(n,{width:"abbreviated",context:"standalone"});case"LLLLL":return r.month(n,{width:"narrow",context:"standalone"});case"LLLL":default:return r.month(n,{width:"wide",context:"standalone"})}},w:function(t,e,r,n){const a=W1e(t,n);return e==="wo"?r.ordinalNumber(a,{unit:"week"}):va(a,e.length)},I:function(t,e,r){const n=q1e(t);return e==="Io"?r.ordinalNumber(n,{unit:"week"}):va(n,e.length)},d:function(t,e,r){return e==="do"?r.ordinalNumber(t.getDate(),{unit:"date"}):kh.d(t,e)},D:function(t,e,r){const n=G1e(t);return e==="Do"?r.ordinalNumber(n,{unit:"dayOfYear"}):va(n,e.length)},E:function(t,e,r){const n=t.getDay();switch(e){case"E":case"EE":case"EEE":return r.day(n,{width:"abbreviated",context:"formatting"});case"EEEEE":return r.day(n,{width:"narrow",context:"formatting"});case"EEEEEE":return r.day(n,{width:"short",context:"formatting"});case"EEEE":default:return r.day(n,{width:"wide",context:"formatting"})}},e:function(t,e,r,n){const a=t.getDay(),s=(a-n.weekStartsOn+8)%7||7;switch(e){case"e":return String(s);case"ee":return va(s,2);case"eo":return r.ordinalNumber(s,{unit:"day"});case"eee":return r.day(a,{width:"abbreviated",context:"formatting"});case"eeeee":return r.day(a,{width:"narrow",context:"formatting"});case"eeeeee":return r.day(a,{width:"short",context:"formatting"});case"eeee":default:return r.day(a,{width:"wide",context:"formatting"})}},c:function(t,e,r,n){const a=t.getDay(),s=(a-n.weekStartsOn+8)%7||7;switch(e){case"c":return String(s);case"cc":return va(s,e.length);case"co":return r.ordinalNumber(s,{unit:"day"});case"ccc":return r.day(a,{width:"abbreviated",context:"standalone"});case"ccccc":return r.day(a,{width:"narrow",context:"standalone"});case"cccccc":return r.day(a,{width:"short",context:"standalone"});case"cccc":default:return r.day(a,{width:"wide",context:"standalone"})}},i:function(t,e,r){const n=t.getDay(),a=n===0?7:n;switch(e){case"i":return String(a);case"ii":return va(a,e.length);case"io":return r.ordinalNumber(a,{unit:"day"});case"iii":return r.day(n,{width:"abbreviated",context:"formatting"});case"iiiii":return r.day(n,{width:"narrow",context:"formatting"});case"iiiiii":return r.day(n,{width:"short",context:"formatting"});case"iiii":default:return r.day(n,{width:"wide",context:"formatting"})}},a:function(t,e,r){const a=t.getHours()/12>=1?"pm":"am";switch(e){case"a":case"aa":return r.dayPeriod(a,{width:"abbreviated",context:"formatting"});case"aaa":return r.dayPeriod(a,{width:"abbreviated",context:"formatting"}).toLowerCase();case"aaaaa":return r.dayPeriod(a,{width:"narrow",context:"formatting"});case"aaaa":default:return r.dayPeriod(a,{width:"wide",context:"formatting"})}},b:function(t,e,r){const n=t.getHours();let a;switch(n===12?a=Sg.noon:n===0?a=Sg.midnight:a=n/12>=1?"pm":"am",e){case"b":case"bb":return r.dayPeriod(a,{width:"abbreviated",context:"formatting"});case"bbb":return r.dayPeriod(a,{width:"abbreviated",context:"formatting"}).toLowerCase();case"bbbbb":return r.dayPeriod(a,{width:"narrow",context:"formatting"});case"bbbb":default:return r.dayPeriod(a,{width:"wide",context:"formatting"})}},B:function(t,e,r){const n=t.getHours();let a;switch(n>=17?a=Sg.evening:n>=12?a=Sg.afternoon:n>=4?a=Sg.morning:a=Sg.night,e){case"B":case"BB":case"BBB":return r.dayPeriod(a,{width:"abbreviated",context:"formatting"});case"BBBBB":return r.dayPeriod(a,{width:"narrow",context:"formatting"});case"BBBB":default:return r.dayPeriod(a,{width:"wide",context:"formatting"})}},h:function(t,e,r){if(e==="ho"){let n=t.getHours()%12;return n===0&&(n=12),r.ordinalNumber(n,{unit:"hour"})}return kh.h(t,e)},H:function(t,e,r){return e==="Ho"?r.ordinalNumber(t.getHours(),{unit:"hour"}):kh.H(t,e)},K:function(t,e,r){const n=t.getHours()%12;return e==="Ko"?r.ordinalNumber(n,{unit:"hour"}):va(n,e.length)},k:function(t,e,r){let n=t.getHours();return n===0&&(n=24),e==="ko"?r.ordinalNumber(n,{unit:"hour"}):va(n,e.length)},m:function(t,e,r){return e==="mo"?r.ordinalNumber(t.getMinutes(),{unit:"minute"}):kh.m(t,e)},s:function(t,e,r){return e==="so"?r.ordinalNumber(t.getSeconds(),{unit:"second"}):kh.s(t,e)},S:function(t,e){return kh.S(t,e)},X:function(t,e,r){const n=t.getTimezoneOffset();if(n===0)return"Z";switch(e){case"X":return w7(n);case"XXXX":case"XX":return Bm(n);case"XXXXX":case"XXX":default:return Bm(n,":")}},x:function(t,e,r){const n=t.getTimezoneOffset();switch(e){case"x":return w7(n);case"xxxx":case"xx":return Bm(n);case"xxxxx":case"xxx":default:return Bm(n,":")}},O:function(t,e,r){const n=t.getTimezoneOffset();switch(e){case"O":case"OO":case"OOO":return"GMT"+b7(n,":");case"OOOO":default:return"GMT"+Bm(n,":")}},z:function(t,e,r){const n=t.getTimezoneOffset();switch(e){case"z":case"zz":case"zzz":return"GMT"+b7(n,":");case"zzzz":default:return"GMT"+Bm(n,":")}},t:function(t,e,r){const n=Math.trunc(+t/1e3);return va(n,e.length)},T:function(t,e,r){return va(+t,e.length)}};function b7(t,e=""){const r=t>0?"-":"+",n=Math.abs(t),a=Math.trunc(n/60),s=n%60;return s===0?r+String(a):r+String(a)+e+va(s,2)}function w7(t,e){return t%60===0?(t>0?"-":"+")+va(Math.abs(t)/60,2):Bm(t,e)}function Bm(t,e=""){const r=t>0?"-":"+",n=Math.abs(t),a=va(Math.trunc(n/60),2),s=va(n%60,2);return r+a+e+s}const N7=(t,e)=>{switch(t){case"P":return e.date({width:"short"});case"PP":return e.date({width:"medium"});case"PPP":return e.date({width:"long"});case"PPPP":default:return e.date({width:"full"})}},uZ=(t,e)=>{switch(t){case"p":return e.time({width:"short"});case"pp":return e.time({width:"medium"});case"ppp":return e.time({width:"long"});case"pppp":default:return e.time({width:"full"})}},X1e=(t,e)=>{const r=t.match(/(P+)(p+)?/)||[],n=r[1],a=r[2];if(!a)return N7(t,e);let s;switch(n){case"P":s=e.dateTime({width:"short"});break;case"PP":s=e.dateTime({width:"medium"});break;case"PPP":s=e.dateTime({width:"long"});break;case"PPPP":default:s=e.dateTime({width:"full"});break}return s.replace("{{date}}",N7(n,e)).replace("{{time}}",uZ(a,e))},Y1e={p:uZ,P:X1e},J1e=/^D+$/,Z1e=/^Y+$/,eye=["D","DD","YY","YYYY"];function tye(t){return J1e.test(t)}function rye(t){return Z1e.test(t)}function nye(t,e,r){const n=aye(t,e,r);if(console.warn(n),eye.includes(t))throw new RangeError(n)}function aye(t,e,r){const n=t[0]==="Y"?"years":"days of the month";return`Use \`${t.toLowerCase()}\` instead of \`${t}\` (in \`${e}\`) for formatting ${n} to the input \`${r}\`; see: https://github.com/date-fns/date-fns/blob/master/docs/unicodeTokens.md`}const sye=/[yYQqMLwIdDecihHKkms]o|(\w)\1*|''|'(''|[^'])+('|$)|./g,iye=/P+p+|P+|p+|''|'(''|[^'])+('|$)|./g,oye=/^'([^]*?)'?$/,lye=/''/g,cye=/[a-zA-Z]/;function Sr(t,e,r){var d,f,h,A;const n=c4(),a=n.locale??K1e,s=n.firstWeekContainsDate??((f=(d=n.locale)==null?void 0:d.options)==null?void 0:f.firstWeekContainsDate)??1,i=n.weekStartsOn??((A=(h=n.locale)==null?void 0:h.options)==null?void 0:A.weekStartsOn)??0,l=ql(t,r==null?void 0:r.in);if(!d1e(l))throw new RangeError("Invalid time value");let c=e.match(iye).map(m=>{const p=m[0];if(p==="p"||p==="P"){const g=Y1e[p];return g(m,a.formatLong)}return m}).join("").match(sye).map(m=>{if(m==="''")return{isToken:!1,value:"'"};const p=m[0];if(p==="'")return{isToken:!1,value:uye(m)};if(y7[p])return{isToken:!0,value:m};if(p.match(cye))throw new RangeError("Format string contains an unescaped latin alphabet character `"+p+"`");return{isToken:!1,value:m}});a.localize.preprocessor&&(c=a.localize.preprocessor(l,c));const u={firstWeekContainsDate:s,weekStartsOn:i,locale:a};return c.map(m=>{if(!m.isToken)return m.value;const p=m.value;(rye(p)||tye(p))&&nye(p,e,String(t));const g=y7[p[0]];return g(l,p,a.localize,u)}).join("")}function uye(t){const e=t.match(oye);return e?e[1].replace(lye,"'"):t}function dZ(t,e,r){return a1e(t,-14,r)}function dye(t,e,r){return s1e(t,-1,r)}/*!
 * html2canvas 1.4.1 <https://html2canvas.hertzen.com>
 * Copyright (c) 2022 Niklas von Hertzen <https://hertzen.com>
 * Released under MIT License
 *//*! *****************************************************************************
Copyright (c) Microsoft Corporation.

Permission to use, copy, modify, and/or distribute this software for any
purpose with or without fee is hereby granted.

THE SOFTWARE IS PROVIDED "AS IS" AND THE AUTHOR DISCLAIMS ALL WARRANTIES WITH
REGARD TO THIS SOFTWARE INCLUDING ALL IMPLIED WARRANTIES OF MERCHANTABILITY
AND FITNESS. IN NO EVENT SHALL THE AUTHOR BE LIABLE FOR ANY SPECIAL, DIRECT,
INDIRECT, OR CONSEQUENTIAL DAMAGES OR ANY DAMAGES WHATSOEVER RESULTING FROM
LOSS OF USE, DATA OR PROFITS, WHETHER IN AN ACTION OF CONTRACT, NEGLIGENCE OR
OTHER TORTIOUS ACTION, ARISING OUT OF OR IN CONNECTION WITH THE USE OR
PERFORMANCE OF THIS SOFTWARE.
***************************************************************************** */var AT=function(t,e){return AT=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,n){r.__proto__=n}||function(r,n){for(var a in n)Object.prototype.hasOwnProperty.call(n,a)&&(r[a]=n[a])},AT(t,e)};function Vd(t,e){if(typeof e!="function"&&e!==null)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");AT(t,e);function r(){this.constructor=t}t.prototype=e===null?Object.create(e):(r.prototype=e.prototype,new r)}var hT=function(){return hT=Object.assign||function(e){for(var r,n=1,a=arguments.length;n<a;n++){r=arguments[n];for(var s in r)Object.prototype.hasOwnProperty.call(r,s)&&(e[s]=r[s])}return e},hT.apply(this,arguments)};function Tl(t,e,r,n){function a(s){return s instanceof r?s:new r(function(i){i(s)})}return new(r||(r=Promise))(function(s,i){function l(d){try{u(n.next(d))}catch(f){i(f)}}function c(d){try{u(n.throw(d))}catch(f){i(f)}}function u(d){d.done?s(d.value):a(d.value).then(l,c)}u((n=n.apply(t,[])).next())})}function ll(t,e){var r={label:0,sent:function(){if(s[0]&1)throw s[1];return s[1]},trys:[],ops:[]},n,a,s,i;return i={next:l(0),throw:l(1),return:l(2)},typeof Symbol=="function"&&(i[Symbol.iterator]=function(){return this}),i;function l(u){return function(d){return c([u,d])}}function c(u){if(n)throw new TypeError("Generator is already executing.");for(;r;)try{if(n=1,a&&(s=u[0]&2?a.return:u[0]?a.throw||((s=a.return)&&s.call(a),0):a.next)&&!(s=s.call(a,u[1])).done)return s;switch(a=0,s&&(u=[u[0]&2,s.value]),u[0]){case 0:case 1:s=u;break;case 4:return r.label++,{value:u[1],done:!1};case 5:r.label++,a=u[1],u=[0];continue;case 7:u=r.ops.pop(),r.trys.pop();continue;default:if(s=r.trys,!(s=s.length>0&&s[s.length-1])&&(u[0]===6||u[0]===2)){r=0;continue}if(u[0]===3&&(!s||u[1]>s[0]&&u[1]<s[3])){r.label=u[1];break}if(u[0]===6&&r.label<s[1]){r.label=s[1],s=u;break}if(s&&r.label<s[2]){r.label=s[2],r.ops.push(u);break}s[2]&&r.ops.pop(),r.trys.pop();continue}u=e.call(t,r)}catch(d){u=[6,d],a=0}finally{n=s=0}if(u[0]&5)throw u[1];return{value:u[0]?u[1]:void 0,done:!0}}}function IN(t,e,r){if(arguments.length===2)for(var n=0,a=e.length,s;n<a;n++)(s||!(n in e))&&(s||(s=Array.prototype.slice.call(e,0,n)),s[n]=e[n]);return t.concat(s||e)}var LA=function(){function t(e,r,n,a){this.left=e,this.top=r,this.width=n,this.height=a}return t.prototype.add=function(e,r,n,a){return new t(this.left+e,this.top+r,this.width+n,this.height+a)},t.fromClientRect=function(e,r){return new t(r.left+e.windowBounds.left,r.top+e.windowBounds.top,r.width,r.height)},t.fromDOMRectList=function(e,r){var n=Array.from(r).find(function(a){return a.width!==0});return n?new t(n.left+e.windowBounds.left,n.top+e.windowBounds.top,n.width,n.height):t.EMPTY},t.EMPTY=new t(0,0,0,0),t}(),u4=function(t,e){return LA.fromClientRect(t,e.getBoundingClientRect())},fye=function(t){var e=t.body,r=t.documentElement;if(!e||!r)throw new Error("Unable to get document size");var n=Math.max(Math.max(e.scrollWidth,r.scrollWidth),Math.max(e.offsetWidth,r.offsetWidth),Math.max(e.clientWidth,r.clientWidth)),a=Math.max(Math.max(e.scrollHeight,r.scrollHeight),Math.max(e.offsetHeight,r.offsetHeight),Math.max(e.clientHeight,r.clientHeight));return new LA(0,0,n,a)},d4=function(t){for(var e=[],r=0,n=t.length;r<n;){var a=t.charCodeAt(r++);if(a>=55296&&a<=56319&&r<n){var s=t.charCodeAt(r++);(s&64512)===56320?e.push(((a&1023)<<10)+(s&1023)+65536):(e.push(a),r--)}else e.push(a)}return e},ai=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];if(String.fromCodePoint)return String.fromCodePoint.apply(String,t);var r=t.length;if(!r)return"";for(var n=[],a=-1,s="";++a<r;){var i=t[a];i<=65535?n.push(i):(i-=65536,n.push((i>>10)+55296,i%1024+56320)),(a+1===r||n.length>16384)&&(s+=String.fromCharCode.apply(String,n),n.length=0)}return s},C7="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",Aye=typeof Uint8Array>"u"?[]:new Uint8Array(256);for(var jN=0;jN<C7.length;jN++)Aye[C7.charCodeAt(jN)]=jN;var _7="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",dy=typeof Uint8Array>"u"?[]:new Uint8Array(256);for(var BN=0;BN<_7.length;BN++)dy[_7.charCodeAt(BN)]=BN;var hye=function(t){var e=t.length*.75,r=t.length,n,a=0,s,i,l,c;t[t.length-1]==="="&&(e--,t[t.length-2]==="="&&e--);var u=typeof ArrayBuffer<"u"&&typeof Uint8Array<"u"&&typeof Uint8Array.prototype.slice<"u"?new ArrayBuffer(e):new Array(e),d=Array.isArray(u)?u:new Uint8Array(u);for(n=0;n<r;n+=4)s=dy[t.charCodeAt(n)],i=dy[t.charCodeAt(n+1)],l=dy[t.charCodeAt(n+2)],c=dy[t.charCodeAt(n+3)],d[a++]=s<<2|i>>4,d[a++]=(i&15)<<4|l>>2,d[a++]=(l&3)<<6|c&63;return u},mye=function(t){for(var e=t.length,r=[],n=0;n<e;n+=2)r.push(t[n+1]<<8|t[n]);return r},pye=function(t){for(var e=t.length,r=[],n=0;n<e;n+=4)r.push(t[n+3]<<24|t[n+2]<<16|t[n+1]<<8|t[n]);return r},rp=5,E6=11,Kj=2,gye=E6-rp,fZ=65536>>rp,xye=1<<rp,Gj=xye-1,vye=1024>>rp,yye=fZ+vye,bye=yye,wye=32,Nye=bye+wye,Cye=65536>>E6,_ye=1<<gye,Eye=_ye-1,E7=function(t,e,r){return t.slice?t.slice(e,r):new Uint16Array(Array.prototype.slice.call(t,e,r))},Sye=function(t,e,r){return t.slice?t.slice(e,r):new Uint32Array(Array.prototype.slice.call(t,e,r))},Iye=function(t,e){var r=hye(t),n=Array.isArray(r)?pye(r):new Uint32Array(r),a=Array.isArray(r)?mye(r):new Uint16Array(r),s=24,i=E7(a,s/2,n[4]/2),l=n[5]===2?E7(a,(s+n[4])/2):Sye(n,Math.ceil((s+n[4])/4));return new jye(n[0],n[1],n[2],n[3],i,l)},jye=function(){function t(e,r,n,a,s,i){this.initialValue=e,this.errorValue=r,this.highStart=n,this.highValueIndex=a,this.index=s,this.data=i}return t.prototype.get=function(e){var r;if(e>=0){if(e<55296||e>56319&&e<=65535)return r=this.index[e>>rp],r=(r<<Kj)+(e&Gj),this.data[r];if(e<=65535)return r=this.index[fZ+(e-55296>>rp)],r=(r<<Kj)+(e&Gj),this.data[r];if(e<this.highStart)return r=Nye-Cye+(e>>E6),r=this.index[r],r+=e>>rp&Eye,r=this.index[r],r=(r<<Kj)+(e&Gj),this.data[r];if(e<=1114111)return this.data[this.highValueIndex]}return this.errorValue},t}(),S7="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",Bye=typeof Uint8Array>"u"?[]:new Uint8Array(256);for(var PN=0;PN<S7.length;PN++)Bye[S7.charCodeAt(PN)]=PN;var Pye="KwAAAAAAAAAACA4AUD0AADAgAAACAAAAAAAIABAAGABAAEgAUABYAGAAaABgAGgAYgBqAF8AZwBgAGgAcQB5AHUAfQCFAI0AlQCdAKIAqgCyALoAYABoAGAAaABgAGgAwgDKAGAAaADGAM4A0wDbAOEA6QDxAPkAAQEJAQ8BFwF1AH0AHAEkASwBNAE6AUIBQQFJAVEBWQFhAWgBcAF4ATAAgAGGAY4BlQGXAZ8BpwGvAbUBvQHFAc0B0wHbAeMB6wHxAfkBAQIJAvEBEQIZAiECKQIxAjgCQAJGAk4CVgJeAmQCbAJ0AnwCgQKJApECmQKgAqgCsAK4ArwCxAIwAMwC0wLbAjAA4wLrAvMC+AIAAwcDDwMwABcDHQMlAy0DNQN1AD0DQQNJA0kDSQNRA1EDVwNZA1kDdQB1AGEDdQBpA20DdQN1AHsDdQCBA4kDkQN1AHUAmQOhA3UAdQB1AHUAdQB1AHUAdQB1AHUAdQB1AHUAdQB1AHUAdQB1AKYDrgN1AHUAtgO+A8YDzgPWAxcD3gPjA+sD8wN1AHUA+wMDBAkEdQANBBUEHQQlBCoEFwMyBDgEYABABBcDSARQBFgEYARoBDAAcAQzAXgEgASIBJAEdQCXBHUAnwSnBK4EtgS6BMIEyAR1AHUAdQB1AHUAdQCVANAEYABgAGAAYABgAGAAYABgANgEYADcBOQEYADsBPQE/AQEBQwFFAUcBSQFLAU0BWQEPAVEBUsFUwVbBWAAYgVgAGoFcgV6BYIFigWRBWAAmQWfBaYFYABgAGAAYABgAKoFYACxBbAFuQW6BcEFwQXHBcEFwQXPBdMF2wXjBeoF8gX6BQIGCgYSBhoGIgYqBjIGOgZgAD4GRgZMBmAAUwZaBmAAYABgAGAAYABgAGAAYABgAGAAYABgAGIGYABpBnAGYABgAGAAYABgAGAAYABgAGAAYAB4Bn8GhQZgAGAAYAB1AHcDFQSLBmAAYABgAJMGdQA9A3UAmwajBqsGqwaVALMGuwbDBjAAywbSBtIG1QbSBtIG0gbSBtIG0gbdBuMG6wbzBvsGAwcLBxMHAwcbByMHJwcsBywHMQcsB9IGOAdAB0gHTgfSBkgHVgfSBtIG0gbSBtIG0gbSBtIG0gbSBiwHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAdgAGAALAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAdbB2MHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsB2kH0gZwB64EdQB1AHUAdQB1AHUAdQB1AHUHfQdgAIUHjQd1AHUAlQedB2AAYAClB6sHYACzB7YHvgfGB3UAzgfWBzMB3gfmB1EB7gf1B/0HlQENAQUIDQh1ABUIHQglCBcDLQg1CD0IRQhNCEEDUwh1AHUAdQBbCGMIZAhlCGYIZwhoCGkIYwhkCGUIZghnCGgIaQhjCGQIZQhmCGcIaAhpCGMIZAhlCGYIZwhoCGkIYwhkCGUIZghnCGgIaQhjCGQIZQhmCGcIaAhpCGMIZAhlCGYIZwhoCGkIYwhkCGUIZghnCGgIaQhjCGQIZQhmCGcIaAhpCGMIZAhlCGYIZwhoCGkIYwhkCGUIZghnCGgIaQhjCGQIZQhmCGcIaAhpCGMIZAhlCGYIZwhoCGkIYwhkCGUIZghnCGgIaQhjCGQIZQhmCGcIaAhpCGMIZAhlCGYIZwhoCGkIYwhkCGUIZghnCGgIaQhjCGQIZQhmCGcIaAhpCGMIZAhlCGYIZwhoCGkIYwhkCGUIZghnCGgIaQhjCGQIZQhmCGcIaAhpCGMIZAhlCGYIZwhoCGkIYwhkCGUIZghnCGgIaQhjCGQIZQhmCGcIaAhpCGMIZAhlCGYIZwhoCGkIYwhkCGUIZghnCGgIaQhjCGQIZQhmCGcIaAhpCGMIZAhlCGYIZwhoCGkIYwhkCGUIZghnCGgIaQhjCGQIZQhmCGcIaAhpCGMIZAhlCGYIZwhoCGkIYwhkCGUIZghnCGgIaQhjCGQIZQhmCGcIaAhpCGMIZAhlCGYIZwhoCGkIYwhkCGUIZghnCGgIaQhjCGQIZQhmCGcIaAhpCGMIZAhlCGYIZwhoCGkIYwhkCGUIZghnCGgIaQhjCGQIZQhmCGcIaAhpCGMIZAhlCGYIZwhoCGkIYwhkCGUIZghnCGgIaQhjCGQIZQhmCGcIaAhpCGMIZAhlCGYIZwhoCGkIYwhkCGUIZghnCGgIaQhjCGQIZQhmCGcIaAhpCGMIZAhlCGYIZwhoCGkIYwhkCGUIZghnCGgIaQhjCGQIZQhmCGcIaAhpCGMIZAhlCGYIZwhoCGkIYwhkCGUIZghnCGgIcAh3CHoIMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwAIIIggiCCIIIggiCCIIIggiCCIIIggiCCIIIggiCCIIIggiCCIIIggiCCIIIggiCCIIIggiCCIIIggiCCIIIgggwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAALAcsBywHLAcsBywHLAcsBywHLAcsB4oILAcsB44I0gaWCJ4Ipgh1AHUAqgiyCHUAdQB1AHUAdQB1AHUAdQB1AHUAtwh8AXUAvwh1AMUIyQjRCNkI4AjoCHUAdQB1AO4I9gj+CAYJDgkTCS0HGwkjCYIIggiCCIIIggiCCIIIggiCCIIIggiCCIIIggiCCIIIggiCCIIIggiCCIIIggiCCIIIggiCCIIIggiCCIIIggiAAIAAAAFAAYABgAGIAXwBgAHEAdQBFAJUAogCyAKAAYABgAEIA4ABGANMA4QDxAMEBDwE1AFwBLAE6AQEBUQF4QkhCmEKoQrhCgAHIQsAB0MLAAcABwAHAAeDC6ABoAHDCwMMAAcABwAHAAdDDGMMAAcAB6MM4wwjDWMNow3jDaABoAGgAaABoAGgAaABoAGgAaABoAGgAaABoAGgAaABoAGgAaABoAEjDqABWw6bDqABpg6gAaABoAHcDvwOPA+gAaABfA/8DvwO/A78DvwO/A78DvwO/A78DvwO/A78DvwO/A78DvwO/A78DvwO/A78DvwO/A78DvwO/A78DpcPAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcAB9cPKwkyCToJMAB1AHUAdQBCCUoJTQl1AFUJXAljCWcJawkwADAAMAAwAHMJdQB2CX4JdQCECYoJjgmWCXUAngkwAGAAYABxAHUApgn3A64JtAl1ALkJdQDACTAAMAAwADAAdQB1AHUAdQB1AHUAdQB1AHUAowYNBMUIMAAwADAAMADICcsJ0wnZCRUE4QkwAOkJ8An4CTAAMAB1AAAKvwh1AAgKDwoXCh8KdQAwACcKLgp1ADYKqAmICT4KRgowADAAdQB1AE4KMAB1AFYKdQBeCnUAZQowADAAMAAwADAAMAAwADAAMAAVBHUAbQowADAAdQC5CXUKMAAwAHwBxAijBogEMgF9CoQKiASMCpQKmgqIBKIKqgquCogEDQG2Cr4KxgrLCjAAMADTCtsKCgHjCusK8Qr5CgELMAAwADAAMAB1AIsECQsRC3UANAEZCzAAMAAwADAAMAB1ACELKQswAHUANAExCzkLdQBBC0kLMABRC1kLMAAwADAAMAAwADAAdQBhCzAAMAAwAGAAYABpC3ELdwt/CzAAMACHC4sLkwubC58Lpwt1AK4Ltgt1APsDMAAwADAAMAAwADAAMAAwAL4LwwvLC9IL1wvdCzAAMADlC+kL8Qv5C/8LSQswADAAMAAwADAAMAAwADAAMAAHDDAAMAAwADAAMAAODBYMHgx1AHUAdQB1AHUAdQB1AHUAdQB1AHUAdQB1AHUAdQB1AHUAdQB1AHUAdQB1AHUAdQB1AHUAdQB1ACYMMAAwADAAdQB1AHUALgx1AHUAdQB1AHUAdQA2DDAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwAHUAdQB1AHUAdQB1AHUAdQB1AHUAdQB1AHUAdQB1AHUAdQB1AD4MdQBGDHUAdQB1AHUAdQB1AEkMdQB1AHUAdQB1AFAMMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwAHUAdQB1AHUAdQB1AHUAdQB1AHUAdQB1AHUAdQBYDHUAdQB1AF8MMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAB1AHUAdQB1AHUAdQB1AHUAdQB1AHUAdQB1AHUAdQB1AHUA+wMVBGcMMAAwAHwBbwx1AHcMfwyHDI8MMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAYABgAJcMMAAwADAAdQB1AJ8MlQClDDAAMACtDCwHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsB7UMLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHdQB1AHUAdQB1AHUAdQB1AHUAdQB1AHUAdQB1AA0EMAC9DDAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAsBywHLAcsBywHLAcsBywHLQcwAMEMyAwsBywHLAcsBywHLAcsBywHLAcsBywHzAwwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwAHUAdQB1ANQM2QzhDDAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMABgAGAAYABgAGAAYABgAOkMYADxDGAA+AwADQYNYABhCWAAYAAODTAAMAAwADAAFg1gAGAAHg37AzAAMAAwADAAYABgACYNYAAsDTQNPA1gAEMNPg1LDWAAYABgAGAAYABgAGAAYABgAGAAUg1aDYsGVglhDV0NcQBnDW0NdQ15DWAAYABgAGAAYABgAGAAYABgAGAAYABgAGAAYABgAGAAlQCBDZUAiA2PDZcNMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAnw2nDTAAMAAwADAAMAAwAHUArw23DTAAMAAwADAAMAAwADAAMAAwADAAMAB1AL8NMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAB1AHUAdQB1AHUAdQDHDTAAYABgAM8NMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAA1w11ANwNMAAwAD0B5A0wADAAMAAwADAAMADsDfQN/A0EDgwOFA4wABsOMAAwADAAMAAwADAAMAAwANIG0gbSBtIG0gbSBtIG0gYjDigOwQUuDsEFMw7SBjoO0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIGQg5KDlIOVg7SBtIGXg5lDm0OdQ7SBtIGfQ6EDooOjQ6UDtIGmg6hDtIG0gaoDqwO0ga0DrwO0gZgAGAAYADEDmAAYAAkBtIGzA5gANIOYADaDokO0gbSBt8O5w7SBu8O0gb1DvwO0gZgAGAAxA7SBtIG0gbSBtIGYABgAGAAYAAED2AAsAUMD9IG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIGFA8sBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAccD9IGLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHJA8sBywHLAcsBywHLAccDywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywPLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAc0D9IG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIGLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAccD9IG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIGFA8sBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHPA/SBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gYUD0QPlQCVAJUAMAAwADAAMACVAJUAlQCVAJUAlQCVAEwPMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAA//8EAAQABAAEAAQABAAEAAQABAANAAMAAQABAAIABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQACgATABcAHgAbABoAHgAXABYAEgAeABsAGAAPABgAHABLAEsASwBLAEsASwBLAEsASwBLABgAGAAeAB4AHgATAB4AUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQABYAGwASAB4AHgAeAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAWAA0AEQAeAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArAAQABAAEAAQABAAFAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAJABYAGgAbABsAGwAeAB0AHQAeAE8AFwAeAA0AHgAeABoAGwBPAE8ADgBQAB0AHQAdAE8ATwAXAE8ATwBPABYAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAB0AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAdAFAAUABQAFAAUABQAFAAUAAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAFAAHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAeAB4AHgAeAFAATwBAAE8ATwBPAEAATwBQAFAATwBQAB4AHgAeAB4AHgAeAB0AHQAdAB0AHgAdAB4ADgBQAFAAUABQAFAAHgAeAB4AHgAeAB4AHgBQAB4AUAAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4ABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAJAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAkACQAJAAkACQAJAAkABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAeAB4AHgAeAFAAHgAeAB4AKwArAFAAUABQAFAAGABQACsAKwArACsAHgAeAFAAHgBQAFAAUAArAFAAKwAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AKwAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4ABAAEAAQABAAEAAQABAAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArACsAUAAeAB4AHgAeAB4AHgBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAYAA0AKwArAB4AHgAbACsABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQADQAEAB4ABAAEAB4ABAAEABMABAArACsAKwArACsAKwArACsAVgBWAFYAVgBWAFYAVgBWAFYAVgBWAFYAVgBWAFYAVgBWAFYAVgBWAFYAVgBWAFYAVgBWAFYAKwArACsAKwBWAFYAVgBWAB4AHgArACsAKwArACsAKwArACsAKwArACsAHgAeAB4AHgAeAB4AHgAeAB4AGgAaABoAGAAYAB4AHgAEAAQABAAEAAQABAAEAAQABAAEAAQAEwAEACsAEwATAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABABLAEsASwBLAEsASwBLAEsASwBLABoAGQAZAB4AUABQAAQAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQABMAUAAEAAQABAAEAAQABAAEAB4AHgAEAAQABAAEAAQABABQAFAABAAEAB4ABAAEAAQABABQAFAASwBLAEsASwBLAEsASwBLAEsASwBQAFAAUAAeAB4AUAAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AKwAeAFAABABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAABAAEAAQABAAEAAQABAAEAAQABAAEAFAAKwArACsAKwArACsAKwArACsAKwArACsAKwArAEsASwBLAEsASwBLAEsASwBLAEsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAABAAEAAQABAAEAAQABAAEAAQAUABQAB4AHgAYABMAUAArACsABAAbABsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAEAAQABAAEAFAABAAEAAQABAAEAFAABAAEAAQAUAAEAAQABAAEAAQAKwArAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAEAAQABAArACsAHgArAFAAUABQAFAAUABQAFAAUABQAFAAUAArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArAFAAUABQAFAAUABQAFAAUABQAFAAKwArACsAKwArACsAKwArACsAKwArAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAB4ABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAAQABAAEAFAABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQAUAAEAAQABAAEAAQABAAEAFAAUABQAFAAUABQAFAAUABQAFAABAAEAA0ADQBLAEsASwBLAEsASwBLAEsASwBLAB4AUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAEAAQABAArAFAAUABQAFAAUABQAFAAUAArACsAUABQACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwBQAFAAUABQAFAAUABQACsAUAArACsAKwBQAFAAUABQACsAKwAEAFAABAAEAAQABAAEAAQABAArACsABAAEACsAKwAEAAQABABQACsAKwArACsAKwArACsAKwAEACsAKwArACsAUABQACsAUABQAFAABAAEACsAKwBLAEsASwBLAEsASwBLAEsASwBLAFAAUAAaABoAUABQAFAAUABQAEwAHgAbAFAAHgAEACsAKwAEAAQABAArAFAAUABQAFAAUABQACsAKwArACsAUABQACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwBQAFAAUABQAFAAUABQACsAUABQACsAUABQACsAUABQACsAKwAEACsABAAEAAQABAAEACsAKwArACsABAAEACsAKwAEAAQABAArACsAKwAEACsAKwArACsAKwArACsAUABQAFAAUAArAFAAKwArACsAKwArACsAKwBLAEsASwBLAEsASwBLAEsASwBLAAQABABQAFAAUAAEAB4AKwArACsAKwArACsAKwArACsAKwAEAAQABAArAFAAUABQAFAAUABQAFAAUABQACsAUABQAFAAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwBQAFAAUABQAFAAUABQACsAUABQACsAUABQAFAAUABQACsAKwAEAFAABAAEAAQABAAEAAQABAAEACsABAAEAAQAKwAEAAQABAArACsAUAArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwBQAFAABAAEACsAKwBLAEsASwBLAEsASwBLAEsASwBLAB4AGwArACsAKwArACsAKwArAFAABAAEAAQABAAEAAQAKwAEAAQABAArAFAAUABQAFAAUABQAFAAUAArACsAUABQACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAAQABAAEAAQABAArACsABAAEACsAKwAEAAQABAArACsAKwArACsAKwArAAQABAAEACsAKwArACsAUABQACsAUABQAFAABAAEACsAKwBLAEsASwBLAEsASwBLAEsASwBLAB4AUABQAFAAUABQAFAAUAArACsAKwArACsAKwArACsAKwArAAQAUAArAFAAUABQAFAAUABQACsAKwArAFAAUABQACsAUABQAFAAUAArACsAKwBQAFAAKwBQACsAUABQACsAKwArAFAAUAArACsAKwBQAFAAUAArACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUAArACsAKwArAAQABAAEAAQABAArACsAKwAEAAQABAArAAQABAAEAAQAKwArAFAAKwArACsAKwArACsABAArACsAKwArACsAKwArACsAKwArAEsASwBLAEsASwBLAEsASwBLAEsAUABQAFAAHgAeAB4AHgAeAB4AGwAeACsAKwArACsAKwAEAAQABAAEAAQAUABQAFAAUABQAFAAUABQACsAUABQAFAAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwArACsAUAAEAAQABAAEAAQABAAEACsABAAEAAQAKwAEAAQABAAEACsAKwArACsAKwArACsABAAEACsAUABQAFAAKwArACsAKwArAFAAUAAEAAQAKwArAEsASwBLAEsASwBLAEsASwBLAEsAKwArACsAKwArACsAKwAOAFAAUABQAFAAUABQAFAAHgBQAAQABAAEAA4AUABQAFAAUABQAFAAUABQACsAUABQAFAAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArAFAAUABQAFAAUABQAFAAUABQAFAAKwBQAFAAUABQAFAAKwArAAQAUAAEAAQABAAEAAQABAAEACsABAAEAAQAKwAEAAQABAAEACsAKwArACsAKwArACsABAAEACsAKwArACsAKwArACsAUAArAFAAUAAEAAQAKwArAEsASwBLAEsASwBLAEsASwBLAEsAKwBQAFAAKwArACsAKwArACsAKwArACsAKwArACsAKwAEAAQABAAEAFAAUABQAFAAUABQAFAAUABQACsAUABQAFAAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAABAAEAFAABAAEAAQABAAEAAQABAArAAQABAAEACsABAAEAAQABABQAB4AKwArACsAKwBQAFAAUAAEAFAAUABQAFAAUABQAFAAUABQAFAABAAEACsAKwBLAEsASwBLAEsASwBLAEsASwBLAFAAUABQAFAAUABQAFAAUABQABoAUABQAFAAUABQAFAAKwAEAAQABAArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArAFAAUABQAFAAUABQAFAAUABQACsAUAArACsAUABQAFAAUABQAFAAUAArACsAKwAEACsAKwArACsABAAEAAQABAAEAAQAKwAEACsABAAEAAQABAAEAAQABAAEACsAKwArACsAKwArAEsASwBLAEsASwBLAEsASwBLAEsAKwArAAQABAAeACsAKwArACsAKwArACsAKwArACsAKwArAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXAAqAFwAXAAqACoAKgAqACoAKgAqACsAKwArACsAGwBcAFwAXABcAFwAXABcACoAKgAqACoAKgAqACoAKgAeAEsASwBLAEsASwBLAEsASwBLAEsADQANACsAKwArACsAKwBcAFwAKwBcACsAXABcAFwAXABcACsAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcACsAXAArAFwAXABcAFwAXABcAFwAXABcAFwAKgBcAFwAKgAqACoAKgAqACoAKgAqACoAXAArACsAXABcAFwAXABcACsAXAArACoAKgAqACoAKgAqACsAKwBLAEsASwBLAEsASwBLAEsASwBLACsAKwBcAFwAXABcAFAADgAOAA4ADgAeAA4ADgAJAA4ADgANAAkAEwATABMAEwATAAkAHgATAB4AHgAeAAQABAAeAB4AHgAeAB4AHgBLAEsASwBLAEsASwBLAEsASwBLAFAAUABQAFAAUABQAFAAUABQAFAADQAEAB4ABAAeAAQAFgARABYAEQAEAAQAUABQAFAAUABQAFAAUABQACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwArACsAKwAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQADQAEAAQABAAEAAQADQAEAAQAUABQAFAAUABQAAQABAAEAAQABAAEAAQABAAEAAQABAArAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAArAA0ADQAeAB4AHgAeAB4AHgAEAB4AHgAeAB4AHgAeACsAHgAeAA4ADgANAA4AHgAeAB4AHgAeAAkACQArACsAKwArACsAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcACoAKgAqACoAKgAqACoAKgAqACoAKgAqACoAKgAqACoAKgAqACoAKgBcAEsASwBLAEsASwBLAEsASwBLAEsADQANAB4AHgAeAB4AXABcAFwAXABcAFwAKgAqACoAKgBcAFwAXABcACoAKgAqAFwAKgAqACoAXABcACoAKgAqACoAKgAqACoAXABcAFwAKgAqACoAKgBcAFwAXABcAFwAXABcAFwAXABcAFwAXABcACoAKgAqACoAKgAqACoAKgAqACoAKgAqAFwAKgBLAEsASwBLAEsASwBLAEsASwBLACoAKgAqACoAKgAqAFAAUABQAFAAUABQACsAUAArACsAKwArACsAUAArACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAHgBQAFAAUABQAFgAWABYAFgAWABYAFgAWABYAFgAWABYAFgAWABYAFgAWABYAFgAWABYAFgAWABYAFgAWABYAFgAWABYAFgAWABZAFkAWQBZAFkAWQBZAFkAWQBZAFkAWQBZAFkAWQBZAFkAWQBZAFkAWQBZAFkAWQBZAFkAWQBZAFkAWQBZAFkAWgBaAFoAWgBaAFoAWgBaAFoAWgBaAFoAWgBaAFoAWgBaAFoAWgBaAFoAWgBaAFoAWgBaAFoAWgBaAFoAWgBaAFAAUABQAFAAUABQAFAAUABQACsAUABQAFAAUAArACsAUABQAFAAUABQAFAAUAArAFAAKwBQAFAAUABQACsAKwBQAFAAUABQAFAAUABQAFAAUAArAFAAUABQAFAAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArAFAAUABQAFAAKwArAFAAUABQAFAAUABQAFAAKwBQACsAUABQAFAAUAArACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwBQAFAAUABQACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArACsABAAEAAQAHgANAB4AHgAeAB4AHgAeAB4AUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAHgAeAB4AHgAeAB4AHgAeAB4AHgArACsAKwArACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAKwBQAFAAUABQAFAAUAArACsADQBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAHgAeAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAANAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAWABEAKwArACsAUABQAFAAUABQAFAAUABQAFAAUABQAA0ADQANAFAAUABQAFAAUABQAFAAUABQAFAAUAArACsAKwArACsAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwBQAFAAUABQAAQABAAEACsAKwArACsAKwArACsAKwArACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAEAAQABAANAA0AKwArACsAKwArACsAKwArACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAABAAEACsAKwArACsAKwArACsAKwArACsAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwBQAFAAUAArAAQABAArACsAKwArACsAKwArACsAKwArACsAKwBcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAKgAqACoAKgAqACoAKgAqACoAKgAqACoAKgAqACoAKgAqACoAKgAqAA0ADQAVAFwADQAeAA0AGwBcACoAKwArAEsASwBLAEsASwBLAEsASwBLAEsAKwArACsAKwArACsAUABQAFAAUABQAFAAUABQAFAAUAArACsAKwArACsAKwAeAB4AEwATAA0ADQAOAB4AEwATAB4ABAAEAAQACQArAEsASwBLAEsASwBLAEsASwBLAEsAKwArACsAKwArACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArACsAKwArACsAKwArAFAAUABQAFAAUAAEAAQAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAAQAUAArACsAKwArACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArACsAKwArACsAKwArACsAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwAEAAQABAAEAAQABAAEAAQABAAEAAQABAArACsAKwArAAQABAAEAAQABAAEAAQABAAEAAQABAAEACsAKwArACsAHgArACsAKwATABMASwBLAEsASwBLAEsASwBLAEsASwBcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXAArACsAXABcAFwAXABcACsAKwArACsAKwArACsAKwArACsAKwBcAFwAXABcAFwAXABcAFwAXABcAFwAXAArACsAKwArAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcACsAKwArACsAKwArAEsASwBLAEsASwBLAEsASwBLAEsAXAArACsAKwAqACoAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAAQABAAEAAQABAArACsAHgAeAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcACoAKgAqACoAKgAqACoAKgAqACoAKwAqACoAKgAqACoAKgAqACoAKgAqACoAKgAqACoAKgAqACoAKgAqACoAKgAqACoAKgAqACoAKgAqACoAKwArAAQASwBLAEsASwBLAEsASwBLAEsASwArACsAKwArACsAKwBLAEsASwBLAEsASwBLAEsASwBLACsAKwArACsAKwArACoAKgAqACoAKgAqACoAXAAqACoAKgAqACoAKgArACsABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsABAAEAAQABAAEAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAAQABAAEAAQABABQAFAAUABQAFAAUABQACsAKwArACsASwBLAEsASwBLAEsASwBLAEsASwANAA0AHgANAA0ADQANAB4AHgAeAB4AHgAeAB4AHgAeAB4ABAAEAAQABAAEAAQABAAEAAQAHgAeAB4AHgAeAB4AHgAeAB4AKwArACsABAAEAAQAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAABAAEAAQABAAEAAQABAAEAAQABAAEAAQABABQAFAASwBLAEsASwBLAEsASwBLAEsASwBQAFAAUABQAFAAUABQAFAABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEACsAKwArACsAKwArACsAKwAeAB4AHgAeAFAAUABQAFAABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEACsAKwArAA0ADQANAA0ADQBLAEsASwBLAEsASwBLAEsASwBLACsAKwArAFAAUABQAEsASwBLAEsASwBLAEsASwBLAEsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAA0ADQBQAFAAUABQAFAAUABQAFAAUAArACsAKwArACsAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAKwBQAFAAUAAeAB4AHgAeAB4AHgAeAB4AKwArACsAKwArACsAKwArAAQABAAEAB4ABAAEAAQABAAEAAQABAAEAAQABAAEAAQABABQAFAAUABQAAQAUABQAFAAUABQAFAABABQAFAABAAEAAQAUAArACsAKwArACsABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEACsABAAEAAQABAAEAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AKwArAFAAUABQAFAAUABQACsAKwBQAFAAUABQAFAAUABQAFAAKwBQACsAUAArAFAAKwAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeACsAKwAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgArAB4AHgAeAB4AHgAeAB4AHgBQAB4AHgAeAFAAUABQACsAHgAeAB4AHgAeAB4AHgAeAB4AHgBQAFAAUABQACsAKwAeAB4AHgAeAB4AHgArAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AKwArAFAAUABQACsAHgAeAB4AHgAeAB4AHgAOAB4AKwANAA0ADQANAA0ADQANAAkADQANAA0ACAAEAAsABAAEAA0ACQANAA0ADAAdAB0AHgAXABcAFgAXABcAFwAWABcAHQAdAB4AHgAUABQAFAANAAEAAQAEAAQABAAEAAQACQAaABoAGgAaABoAGgAaABoAHgAXABcAHQAVABUAHgAeAB4AHgAeAB4AGAAWABEAFQAVABUAHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4ADQAeAA0ADQANAA0AHgANAA0ADQAHAB4AHgAeAB4AKwAEAAQABAAEAAQABAAEAAQABAAEAFAAUAArACsATwBQAFAAUABQAFAAHgAeAB4AFgARAE8AUABPAE8ATwBPAFAAUABQAFAAUAAeAB4AHgAWABEAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAKwArABsAGwAbABsAGwAbABsAGgAbABsAGwAbABsAGwAbABsAGwAbABsAGwAbABsAGgAbABsAGwAbABoAGwAbABoAGwAbABsAGwAbABsAGwAbABsAGwAbABsAGwAbABsAGwAbAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQAHgAeAFAAGgAeAB0AHgBQAB4AGgAeAB4AHgAeAB4AHgAeAB4AHgBPAB4AUAAbAB4AHgBQAFAAUABQAFAAHgAeAB4AHQAdAB4AUAAeAFAAHgBQAB4AUABPAFAAUAAeAB4AHgAeAB4AHgAeAFAAUABQAFAAUAAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAFAAHgBQAFAAUABQAE8ATwBQAFAAUABQAFAATwBQAFAATwBQAE8ATwBPAE8ATwBPAE8ATwBPAE8ATwBPAFAAUABQAFAATwBPAE8ATwBPAE8ATwBPAE8ATwBQAFAAUABQAFAAUABQAFAAUAAeAB4AUABQAFAAUABPAB4AHgArACsAKwArAB0AHQAdAB0AHQAdAB0AHQAdAB0AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB0AHgAdAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAdAB4AHQAdAB4AHgAeAB0AHQAeAB4AHQAeAB4AHgAdAB4AHQAbABsAHgAdAB4AHgAeAB4AHQAeAB4AHQAdAB0AHQAeAB4AHQAeAB0AHgAdAB0AHQAdAB0AHQAeAB0AHgAeAB4AHgAeAB0AHQAdAB0AHgAeAB4AHgAdAB0AHgAeAB4AHgAeAB4AHgAeAB4AHgAdAB4AHgAeAB0AHgAeAB4AHgAeAB0AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAdAB0AHgAeAB0AHQAdAB0AHgAeAB0AHQAeAB4AHQAdAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB0AHQAeAB4AHQAdAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHQAeAB4AHgAdAB4AHgAeAB4AHgAeAB4AHQAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB0AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AFAAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeABYAEQAWABEAHgAeAB4AHgAeAB4AHQAeAB4AHgAeAB4AHgAeACUAJQAeAB4AHgAeAB4AHgAeAB4AHgAWABEAHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AJQAlACUAJQAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArAE8ATwBPAE8ATwBPAE8ATwBPAE8ATwBPAE8ATwBPAE8ATwBPAE8ATwBPAE8ATwBPAE8ATwBPAE8ATwBPAE8ATwAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAE8ATwBPAE8ATwBPAE8ATwBPAE8ATwBPAE8ATwBPAE8ATwBPAE8ATwBPAFAAHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHgAeAB4AHgAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAeAB4AHQAdAB0AHQAeAB4AHgAeAB4AHgAeAB4AHgAeAB0AHQAeAB0AHQAdAB0AHQAdAB0AHgAeAB4AHgAeAB4AHgAeAB0AHQAeAB4AHQAdAB4AHgAeAB4AHQAdAB4AHgAeAB4AHQAdAB0AHgAeAB0AHgAeAB0AHQAdAB0AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAdAB0AHQAdAB4AHgAeAB4AHgAeAB4AHgAeAB0AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAlACUAJQAlAB4AHQAdAB4AHgAdAB4AHgAeAB4AHQAdAB4AHgAeAB4AJQAlAB0AHQAlAB4AJQAlACUAIAAlACUAHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAlACUAJQAeAB4AHgAeAB0AHgAdAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAdAB0AHgAdAB0AHQAeAB0AJQAdAB0AHgAdAB0AHgAdAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeACUAHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHQAdAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAlACUAJQAlACUAJQAlACUAJQAlACUAJQAdAB0AHQAdACUAHgAlACUAJQAdACUAJQAdAB0AHQAlACUAHQAdACUAHQAdACUAJQAlAB4AHQAeAB4AHgAeAB0AHQAlAB0AHQAdAB0AHQAdACUAJQAlACUAJQAdACUAJQAgACUAHQAdACUAJQAlACUAJQAlACUAJQAeAB4AHgAlACUAIAAgACAAIAAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB0AHgAeAB4AFwAXABcAFwAXABcAHgATABMAJQAeAB4AHgAWABEAFgARABYAEQAWABEAFgARABYAEQAWABEATwBPAE8ATwBPAE8ATwBPAE8ATwBPAE8ATwBPAE8ATwBPAE8ATwBPAE8ATwAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeABYAEQAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAWABEAFgARABYAEQAWABEAFgARAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AFgARABYAEQAWABEAFgARABYAEQAWABEAFgARABYAEQAWABEAFgARABYAEQAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAWABEAFgARAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AFgARAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAdAB0AHQAdAB0AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgArACsAHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AKwAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AUABQAFAAUAAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAEAAQABAAeAB4AKwArACsAKwArABMADQANAA0AUAATAA0AUABQAFAAUABQAFAAUABQACsAKwArACsAKwArACsAUAANACsAKwArACsAKwArACsAKwArACsAKwArACsAKwAEAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArACsAKwArACsAKwArACsAKwBQAFAAUABQAFAAUABQACsAUABQAFAAUABQAFAAUAArAFAAUABQAFAAUABQAFAAKwBQAFAAUABQAFAAUABQACsAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXAA0ADQANAA0ADQANAA0ADQAeAA0AFgANAB4AHgAXABcAHgAeABcAFwAWABEAFgARABYAEQAWABEADQANAA0ADQATAFAADQANAB4ADQANAB4AHgAeAB4AHgAMAAwADQANAA0AHgANAA0AFgANAA0ADQANAA0ADQANAA0AHgANAB4ADQANAB4AHgAeACsAKwArACsAKwArACsAKwArACsAKwArACsAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACsAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAKwArACsAKwArACsAKwArACsAKwArACsAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwAlACUAJQAlACUAJQAlACUAJQAlACUAJQArACsAKwArAA0AEQARACUAJQBHAFcAVwAWABEAFgARABYAEQAWABEAFgARACUAJQAWABEAFgARABYAEQAWABEAFQAWABEAEQAlAFcAVwBXAFcAVwBXAFcAVwBXAAQABAAEAAQABAAEACUAVwBXAFcAVwA2ACUAJQBXAFcAVwBHAEcAJQAlACUAKwBRAFcAUQBXAFEAVwBRAFcAUQBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFEAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBRAFcAUQBXAFEAVwBXAFcAVwBXAFcAUQBXAFcAVwBXAFcAVwBRAFEAKwArAAQABAAVABUARwBHAFcAFQBRAFcAUQBXAFEAVwBRAFcAUQBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFEAVwBRAFcAUQBXAFcAVwBXAFcAVwBRAFcAVwBXAFcAVwBXAFEAUQBXAFcAVwBXABUAUQBHAEcAVwArACsAKwArACsAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAKwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAKwAlACUAVwBXAFcAVwAlACUAJQAlACUAJQAlACUAJQAlACsAKwArACsAKwArACsAKwArACsAKwArAFEAUQBRAFEAUQBRAFEAUQBRAFEAUQBRAFEAUQBRAFEAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQArAFcAVwBXAFcAVwBXAFcAVwBXAFcAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQBPAE8ATwBPAE8ATwBPAE8AJQBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXACUAJQAlAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAEcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAKwArACsAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQArACsAKwArACsAKwArACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAADQATAA0AUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABLAEsASwBLAEsASwBLAEsASwBLAFAAUAArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAFAABAAEAAQABAAeAAQABAAEAAQABAAEAAQABAAEAAQAHgBQAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AUABQAAQABABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAAQABAAeAA0ADQANAA0ADQArACsAKwArACsAKwArACsAHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAFAAUABQAFAAUABQAFAAUABQAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AUAAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgBQAB4AHgAeAB4AHgAeAFAAHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgArACsAHgAeAB4AHgAeAB4AHgAeAB4AKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwAeAB4AUABQAFAAUABQAFAAUABQAFAAUABQAAQAUABQAFAABABQAFAAUABQAAQAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAAQABAAEAAQABAAeAB4AHgAeAAQAKwArACsAUABQAFAAUABQAFAAHgAeABoAHgArACsAKwArACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAADgAOABMAEwArACsAKwArACsAKwArACsABAAEAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAAQABAAEAAQABAAEACsAKwArACsAKwArACsAKwANAA0ASwBLAEsASwBLAEsASwBLAEsASwArACsAKwArACsAKwAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABABQAFAAUABQAFAAUAAeAB4AHgBQAA4AUABQAAQAUABQAFAAUABQAFAABAAEAAQABAAEAAQABAAEAA0ADQBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQAKwArACsAKwArACsAKwArACsAKwArAB4AWABYAFgAWABYAFgAWABYAFgAWABYAFgAWABYAFgAWABYAFgAWABYAFgAWABYAFgAWABYAFgAWABYACsAKwArAAQAHgAeAB4AHgAeAB4ADQANAA0AHgAeAB4AHgArAFAASwBLAEsASwBLAEsASwBLAEsASwArACsAKwArAB4AHgBcAFwAXABcAFwAKgBcAFwAXABcAFwAXABcAFwAXABcAEsASwBLAEsASwBLAEsASwBLAEsAXABcAFwAXABcACsAUABQAFAAUABQAFAAUABQAFAABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEACsAKwArACsAKwArACsAKwArAFAAUABQAAQAUABQAFAAUABQAFAAUABQAAQABAArACsASwBLAEsASwBLAEsASwBLAEsASwArACsAHgANAA0ADQBcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAKgAqACoAXAAqACoAKgBcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXAAqAFwAKgAqACoAXABcACoAKgBcAFwAXABcAFwAKgAqAFwAKgBcACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArAFwAXABcACoAKgBQAFAAUABQAFAAUABQAFAAUABQAFAABAAEAAQABAAEAA0ADQBQAFAAUAAEAAQAKwArACsAKwArACsAKwArACsAKwBQAFAAUABQAFAAUAArACsAUABQAFAAUABQAFAAKwArAFAAUABQAFAAUABQACsAKwArACsAKwArACsAKwArAFAAUABQAFAAUABQAFAAKwBQAFAAUABQAFAAUABQACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAHgAeACsAKwArACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAEAAQABAAEAAQABAAEAAQADQAEAAQAKwArAEsASwBLAEsASwBLAEsASwBLAEsAKwArACsAKwArACsAVABVAFUAVQBVAFUAVQBVAFUAVQBVAFUAVQBVAFUAVQBVAFUAVQBVAFUAVQBVAFUAVQBVAFUAVQBUAFUAVQBVAFUAVQBVAFUAVQBVAFUAVQBVAFUAVQBVAFUAVQBVAFUAVQBVAFUAVQBVAFUAVQBVACsAKwArACsAKwArACsAKwArACsAKwArAFkAWQBZAFkAWQBZAFkAWQBZAFkAWQBZAFkAWQBZAFkAWQBZAFkAKwArACsAKwBaAFoAWgBaAFoAWgBaAFoAWgBaAFoAWgBaAFoAWgBaAFoAWgBaAFoAWgBaAFoAWgBaAFoAWgBaAFoAKwArACsAKwAGAAYABgAGAAYABgAGAAYABgAGAAYABgAGAAYABgAGAAYABgAGAAYABgAGAAYABgAGAAYABgAGAAYABgAGAAYAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXACUAJQBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAJQAlACUAJQAlACUAUABQAFAAUABQAFAAUAArACsAKwArACsAKwArACsAKwArACsAKwBQAFAAUABQAFAAKwArACsAKwArAFYABABWAFYAVgBWAFYAVgBWAFYAVgBWAB4AVgBWAFYAVgBWAFYAVgBWAFYAVgBWAFYAVgArAFYAVgBWAFYAVgArAFYAKwBWAFYAKwBWAFYAKwBWAFYAVgBWAFYAVgBWAFYAVgBWAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAEQAWAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUAAaAB4AKwArAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQAGAARABEAGAAYABMAEwAWABEAFAArACsAKwArACsAKwAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEACUAJQAlACUAJQAWABEAFgARABYAEQAWABEAFgARABYAEQAlACUAFgARACUAJQAlACUAJQAlACUAEQAlABEAKwAVABUAEwATACUAFgARABYAEQAWABEAJQAlACUAJQAlACUAJQAlACsAJQAbABoAJQArACsAKwArAFAAUABQAFAAUAArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwArAAcAKwATACUAJQAbABoAJQAlABYAEQAlACUAEQAlABEAJQBXAFcAVwBXAFcAVwBXAFcAVwBXABUAFQAlACUAJQATACUAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXABYAJQARACUAJQAlAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwAWACUAEQAlABYAEQARABYAEQARABUAVwBRAFEAUQBRAFEAUQBRAFEAUQBRAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAEcARwArACsAVwBXAFcAVwBXAFcAKwArAFcAVwBXAFcAVwBXACsAKwBXAFcAVwBXAFcAVwArACsAVwBXAFcAKwArACsAGgAbACUAJQAlABsAGwArAB4AHgAeAB4AHgAeAB4AKwArACsAKwArACsAKwArACsAKwAEAAQABAAQAB0AKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwBQAFAAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArACsAKwArACsADQANAA0AKwArACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAKwArAB4AHgAeAB4AHgAeAB4AHgAeAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgBQAFAAHgAeAB4AKwAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAAQAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwAEAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAKwArACsAKwArACsAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwArACsAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAABAAEAAQABAAEACsAKwArACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArAA0AUABQAFAAUAArACsAKwArAFAAUABQAFAAUABQAFAAUAANAFAAUABQAFAAUAArACsAKwArACsAKwArACsAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwArACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAKwArACsAKwArACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAKwArACsAKwArACsAKwArACsAKwAeACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAUABQAFAAUABQAFAAKwArAFAAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArAFAAUAArACsAKwBQACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwANAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAeAB4AUABQAFAAUABQAFAAUAArACsAKwArACsAKwArAFAAUABQAFAAUABQAFAAUABQACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArAFAAUAArACsAKwArACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAKwArAA0AUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAKwArACsAKwAeAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAKwArACsAUABQAFAAUABQAAQABAAEACsABAAEACsAKwArACsAKwAEAAQABAAEAFAAUABQAFAAKwBQAFAAUAArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwArAAQABAAEACsAKwArACsABABQAFAAUABQAFAAUABQAFAAUAArACsAKwArACsAKwArAA0ADQANAA0ADQANAA0ADQAeACsAKwArACsAKwArACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAeAFAAUABQAFAAUABQAFAAUAAeAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAAQABAArACsAKwArAFAAUABQAFAAUAANAA0ADQANAA0ADQAUACsAKwArACsAKwArACsAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwArACsADQANAA0ADQANAA0ADQBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArACsAKwArACsAKwArAB4AHgAeAB4AKwArACsAKwArACsAKwArACsAKwArACsAUABQAFAAUABQAFAAUAArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArAFAAUABQAFAAUABQAFAAUABQACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAKwArACsAKwArACsAKwArACsAKwArACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArACsAKwArACsAKwArAFAAUABQAFAAUABQAAQABAAEAAQAKwArACsAKwArACsAKwArAEsASwBLAEsASwBLAEsASwBLAEsAKwArACsAKwArACsAUABQAFAAUABQAFAAUABQAFAAUAArAAQABAANACsAKwBQAFAAKwArACsAKwArACsAKwArACsAKwArACsAKwArAFAAUABQAFAAUABQAAQABAAEAAQABAAEAAQABAAEAAQABABQAFAAUABQAB4AHgAeAB4AHgArACsAKwArACsAKwAEAAQABAAEAAQABAAEAA0ADQAeAB4AHgAeAB4AKwArACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAEsASwBLAEsASwBLAEsASwBLAEsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsABABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAAQABAAEAAQABAAEAAQABAAEAAQABAAeAB4AHgANAA0ADQANACsAKwArACsAKwArACsAKwArACsAKwAeACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwArACsAKwArACsAKwBLAEsASwBLAEsASwBLAEsASwBLACsAKwArACsAKwArAFAAUABQAFAAUABQAFAABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEACsASwBLAEsASwBLAEsASwBLAEsASwANAA0ADQANAFAABAAEAFAAKwArACsAKwArACsAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAABAAeAA4AUAArACsAKwArACsAKwArACsAKwAEAFAAUABQAFAADQANAB4ADQAEAAQABAAEAB4ABAAEAEsASwBLAEsASwBLAEsASwBLAEsAUAAOAFAADQANAA0AKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwArACsAKwArACsAKwArACsAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAEAAQABAAEAAQABAAEAAQABAAEAAQABAANAA0AHgANAA0AHgAEACsAUABQAFAAUABQAFAAUAArAFAAKwBQAFAAUABQACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwBQAFAAUABQAFAAUABQAFAAUABQAA0AKwArACsAKwArACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAEAAQABAAEAAQABAAEAAQABAAEAAQAKwArACsAKwArAEsASwBLAEsASwBLAEsASwBLAEsAKwArACsAKwArACsABAAEAAQABAArAFAAUABQAFAAUABQAFAAUAArACsAUABQACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwBQAFAAUABQAFAAUABQACsAUABQACsAUABQAFAAUABQACsABAAEAFAABAAEAAQABAAEAAQABAArACsABAAEACsAKwAEAAQABAArACsAUAArACsAKwArACsAKwAEACsAKwArACsAKwBQAFAAUABQAFAABAAEACsAKwAEAAQABAAEAAQABAAEACsAKwArAAQABAAEAAQABAArACsAKwArACsAKwArACsAKwArACsABAAEAAQABAAEAAQABABQAFAAUABQAA0ADQANAA0AHgBLAEsASwBLAEsASwBLAEsASwBLAA0ADQArAB4ABABQAFAAUAArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwAEAAQABAAEAFAAUAAeAFAAKwArACsAKwArACsAKwArAEsASwBLAEsASwBLAEsASwBLAEsAKwArACsAKwArACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAABAAEAAQABAAEAAQABAArACsABAAEAAQABAAEAAQABAAEAAQADgANAA0AEwATAB4AHgAeAA0ADQANAA0ADQANAA0ADQANAA0ADQANAA0ADQANAFAAUABQAFAABAAEACsAKwAEAA0ADQAeAFAAKwArACsAKwArACsAKwArACsAKwArAEsASwBLAEsASwBLAEsASwBLAEsAKwArACsAKwArACsADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAFAAKwArACsAKwArACsAKwBLAEsASwBLAEsASwBLAEsASwBLACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAKwArACoAKgAqACoAKgAqACoAKgAqACoAKgAqACoAKgAqACsAKwArACsASwBLAEsASwBLAEsASwBLAEsASwBcAFwADQANAA0AKgBQAFAAUABQAFAAUABQAFAAUABQAFAAUAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAeACsAKwArACsASwBLAEsASwBLAEsASwBLAEsASwBQAFAAUABQAFAAUABQAFAAUAArACsAKwArACsAKwArACsAKwArACsAKwBQAFAAUABQAFAAUABQAFAAKwArAFAAKwArAFAAUABQAFAAUABQAFAAUAArAFAAUAArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAABAAEAAQABAAEAAQAKwAEAAQAKwArAAQABAAEAAQAUAAEAFAABAAEAA0ADQANACsAKwArACsAKwArACsAKwArAEsASwBLAEsASwBLAEsASwBLAEsAKwArACsAKwArACsAUABQAFAAUABQAFAAUABQACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAABAAEAAQABAAEAAQABAArACsABAAEAAQABAAEAAQABABQAA4AUAAEACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArAFAABAAEAAQABAAEAAQABAAEAAQABABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAEAAQABAAEAAQABAAEAFAABAAEAAQABAAOAB4ADQANAA0ADQAOAB4ABAArACsAKwArACsAKwArACsAUAAEAAQABAAEAAQABAAEAAQABAAEAAQAUABQAFAAUABQAFAAUABQAFAAUAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAA0ADQANAFAADgAOAA4ADQANACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwBQAFAAUABQAFAAUABQAFAAUAArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAABAAEAAQABAAEAAQABAAEACsABAAEAAQABAAEAAQABAAEAFAADQANAA0ADQANACsAKwArACsAKwArACsAKwArACsASwBLAEsASwBLAEsASwBLAEsASwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArACsAKwAOABMAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwArAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAArAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAArACsAKwArACsAKwArACsAKwBQAFAAUABQAFAAUABQACsAUABQACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAEAAQABAAEAAQABAArACsAKwAEACsABAAEACsABAAEAAQABAAEAAQABABQAAQAKwArACsAKwArACsAKwArAEsASwBLAEsASwBLAEsASwBLAEsAKwArACsAKwArACsAUABQAFAAUABQAFAAKwBQAFAAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAEAAQABAAEAAQAKwAEAAQAKwAEAAQABAAEAAQAUAArACsAKwArACsAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAABAAEAAQABAAeAB4AKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwBQACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAB4AHgAeAB4AHgAeAB4AHgAaABoAGgAaAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgArACsAKwArACsAKwArACsAKwArACsAKwArAA0AUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAKwArACsAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsADQANAA0ADQANACsAKwArACsAKwArACsAKwArACsAKwBQAFAAUABQACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAASABIAEgAQwBDAEMAUABQAFAAUABDAFAAUABQAEgAQwBIAEMAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAASABDAEMAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwAJAAkACQAJAAkACQAJABYAEQArACsAKwArACsAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABIAEMAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArAEsASwBLAEsASwBLAEsASwBLAEsAKwArACsAKwANAA0AKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwArAAQABAAEAAQABAANACsAKwArACsAKwArACsAKwArACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAEAAQABAAEAAQABAAEAA0ADQANAB4AHgAeAB4AHgAeAFAAUABQAFAADQAeACsAKwArACsAKwArACsAKwArACsASwBLAEsASwBLAEsASwBLAEsASwArAFAAUABQAFAAUABQAFAAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArACsAKwArACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAANAA0AHgAeACsAKwArACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAKwArACsAKwAEAFAABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQAKwArACsAKwArACsAKwAEAAQABAAEAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAARwBHABUARwAJACsAKwArACsAKwArACsAKwArACsAKwAEAAQAKwArACsAKwArACsAKwArACsAKwArACsAKwArAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXACsAKwArACsAKwArACsAKwBXAFcAVwBXAFcAVwBXAFcAVwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAUQBRAFEAKwArACsAKwArACsAKwArACsAKwArACsAKwBRAFEAUQBRACsAKwArACsAKwArACsAKwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXACsAKwArACsAUABQAFAAUABQAFAAUABQAFAAUABQACsAKwArACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAKwArACsAKwArACsAUABQAFAAUABQAFAAUABQAFAAUAArACsAHgAEAAQADQAEAAQABAAEACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgArACsAKwArACsAKwArACsAKwArAB4AHgAeAB4AHgAeAB4AKwArAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAAQABAAEAAQABAAeAB4AHgAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAB4AHgAEAAQABAAEAAQABAAEAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4ABAAEAAQABAAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4ABAAEAAQAHgArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAKwArACsAKwArACsAKwArACsAKwArAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgArACsAKwArACsAKwArACsAKwAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgArAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AKwBQAFAAKwArAFAAKwArAFAAUAArACsAUABQAFAAUAArAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeACsAUAArAFAAUABQAFAAUABQAFAAKwAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AKwBQAFAAUABQACsAKwBQAFAAUABQAFAAUABQAFAAKwBQAFAAUABQAFAAUABQACsAHgAeAFAAUABQAFAAUAArAFAAKwArACsAUABQAFAAUABQAFAAUAArAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAHgBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgBQAFAAUABQAFAAUABQAFAAUABQAFAAHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAB4AHgAeAB4AHgAeAB4AHgAeACsAKwBLAEsASwBLAEsASwBLAEsASwBLAEsASwBLAEsASwBLAEsASwBLAEsASwBLAEsASwBLAEsASwBLAEsASwBLAEsASwBLAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAeAB4AHgAeAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAeAB4AHgAeAB4AHgAeAB4ABAAeAB4AHgAeAB4AHgAeAB4AHgAeAAQAHgAeAA0ADQANAA0AHgArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwAEAAQABAAEAAQAKwAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArAAQABAAEAAQABAAEAAQAKwAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQAKwArAAQABAAEAAQABAAEAAQAKwAEAAQAKwAEAAQABAAEAAQAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArACsAKwAEAAQABAAEAAQABAAEAFAAUABQAFAAUABQAFAAKwArAEsASwBLAEsASwBLAEsASwBLAEsAKwArACsAKwBQAB4AKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUAAEAAQABAAEAEsASwBLAEsASwBLAEsASwBLAEsAKwArACsAKwArABsAUABQAFAAUABQACsAKwBQAFAAUABQAFAAUABQAFAAUAAEAAQABAAEAAQABAAEACsAKwArACsAKwArACsAKwArAB4AHgAeAB4ABAAEAAQABAAEAAQABABQACsAKwArACsASwBLAEsASwBLAEsASwBLAEsASwArACsAKwArABYAFgArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAGgBQAFAAUAAaAFAAUABQAFAAKwArACsAKwArACsAKwArACsAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAeAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAKwBQAFAAUABQACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwBQAFAAKwBQACsAKwBQACsAUABQAFAAUABQAFAAUABQAFAAUAArAFAAUABQAFAAKwBQACsAUAArACsAKwArACsAKwBQACsAKwArACsAUAArAFAAKwBQACsAUABQAFAAKwBQAFAAKwBQACsAKwBQACsAUAArAFAAKwBQACsAUAArAFAAUAArAFAAKwArAFAAUABQAFAAKwBQAFAAUABQAFAAUABQACsAUABQAFAAUAArAFAAUABQAFAAKwBQACsAUABQAFAAUABQAFAAUABQAFAAUAArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArACsAKwArACsAUABQAFAAKwBQAFAAUABQAFAAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwAeAB4AKwArACsAKwArACsAKwArACsAKwArACsAKwArAE8ATwBPAE8ATwBPAE8ATwBPAE8ATwBPAE8AJQAlACUAHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHgAeAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB4AHgAeACUAJQAlAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQApACkAKQApACkAKQApACkAKQApACkAKQApACkAKQApACkAKQApACkAKQApACkAKQApACkAJQAlACUAJQAlACAAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAeAB4AJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlAB4AHgAlACUAJQAlACUAHgAlACUAJQAlACUAIAAgACAAJQAlACAAJQAlACAAIAAgACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACEAIQAhACEAIQAlACUAIAAgACUAJQAgACAAIAAgACAAIAAgACAAIAAgACAAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAJQAlACUAIAAlACUAJQAlACAAIAAgACUAIAAgACAAJQAlACUAJQAlACUAJQAgACUAIAAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAHgAlAB4AJQAeACUAJQAlACUAJQAgACUAJQAlACUAHgAlAB4AHgAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlAB4AHgAeAB4AHgAeAB4AJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAeAB4AHgAeAB4AHgAeAB4AHgAeACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACAAIAAlACUAJQAlACAAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACAAJQAlACUAJQAgACAAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAHgAeAB4AHgAeAB4AHgAeACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAeAB4AHgAeAB4AHgAlACUAJQAlACUAJQAlACAAIAAgACUAJQAlACAAIAAgACAAIAAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeABcAFwAXABUAFQAVAB4AHgAeAB4AJQAlACUAIAAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACAAIAAgACUAJQAlACUAJQAlACUAJQAlACAAJQAlACUAJQAlACUAJQAlACUAJQAlACAAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AJQAlACUAJQAlACUAJQAlACUAJQAlACUAHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AJQAlACUAJQAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeACUAJQAlACUAJQAlACUAJQAeAB4AHgAeAB4AHgAeAB4AHgAeACUAJQAlACUAJQAlAB4AHgAeAB4AHgAeAB4AHgAlACUAJQAlACUAJQAlACUAHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAgACUAJQAgACUAJQAlACUAJQAlACUAJQAgACAAIAAgACAAIAAgACAAJQAlACUAJQAlACUAIAAlACUAJQAlACUAJQAlACUAJQAgACAAIAAgACAAIAAgACAAIAAgACUAJQAgACAAIAAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAgACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACAAIAAlACAAIAAlACAAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAgACAAIAAlACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAJQAlAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AKwAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArAEsASwBLAEsASwBLAEsASwBLAEsAKwArACsAKwArACsAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAKwArAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXACUAJQBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwAlACUAJQAlACUAJQAlACUAJQAlACUAVwBXACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAKwAEACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArAA==",I7=50,Tye=1,AZ=2,hZ=3,kye=4,Fye=5,j7=7,mZ=8,B7=9,u0=10,mT=11,P7=12,pT=13,Oye=14,fy=15,gT=16,TN=17,O1=18,Dye=19,T7=20,xT=21,D1=22,qj=23,Ig=24,Oc=25,Ay=26,hy=27,jg=28,Rye=29,Um=30,Mye=31,kN=32,FN=33,vT=34,yT=35,bT=36,qb=37,wT=38,k_=39,F_=40,zj=41,pZ=42,Lye=43,Uye=[9001,65288],gZ="!",Rn="",ON="",NT=Iye(Pye),qf=[Um,bT],CT=[Tye,AZ,hZ,Fye],xZ=[u0,mZ],k7=[hy,Ay],Qye=CT.concat(xZ),F7=[wT,k_,F_,vT,yT],Vye=[fy,pT],Hye=function(t,e){e===void 0&&(e="strict");var r=[],n=[],a=[];return t.forEach(function(s,i){var l=NT.get(s);if(l>I7?(a.push(!0),l-=I7):a.push(!1),["normal","auto","loose"].indexOf(e)!==-1&&[8208,8211,12316,12448].indexOf(s)!==-1)return n.push(i),r.push(gT);if(l===kye||l===mT){if(i===0)return n.push(i),r.push(Um);var c=r[i-1];return Qye.indexOf(c)===-1?(n.push(n[i-1]),r.push(c)):(n.push(i),r.push(Um))}if(n.push(i),l===Mye)return r.push(e==="strict"?xT:qb);if(l===pZ||l===Rye)return r.push(Um);if(l===Lye)return s>=131072&&s<=196605||s>=196608&&s<=262141?r.push(qb):r.push(Um);r.push(l)}),[n,r,a]},Wj=function(t,e,r,n){var a=n[r];if(Array.isArray(t)?t.indexOf(a)!==-1:t===a)for(var s=r;s<=n.length;){s++;var i=n[s];if(i===e)return!0;if(i!==u0)break}if(a===u0)for(var s=r;s>0;){s--;var l=n[s];if(Array.isArray(t)?t.indexOf(l)!==-1:t===l)for(var c=r;c<=n.length;){c++;var i=n[c];if(i===e)return!0;if(i!==u0)break}if(l!==u0)break}return!1},O7=function(t,e){for(var r=t;r>=0;){var n=e[r];if(n===u0)r--;else return n}return 0},$ye=function(t,e,r,n,a){if(r[n]===0)return Rn;var s=n-1;if(Array.isArray(a)&&a[s]===!0)return Rn;var i=s-1,l=s+1,c=e[s],u=i>=0?e[i]:0,d=e[l];if(c===AZ&&d===hZ)return Rn;if(CT.indexOf(c)!==-1)return gZ;if(CT.indexOf(d)!==-1||xZ.indexOf(d)!==-1)return Rn;if(O7(s,e)===mZ)return ON;if(NT.get(t[s])===mT||(c===kN||c===FN)&&NT.get(t[l])===mT||c===j7||d===j7||c===B7||[u0,pT,fy].indexOf(c)===-1&&d===B7||[TN,O1,Dye,Ig,jg].indexOf(d)!==-1||O7(s,e)===D1||Wj(qj,D1,s,e)||Wj([TN,O1],xT,s,e)||Wj(P7,P7,s,e))return Rn;if(c===u0)return ON;if(c===qj||d===qj)return Rn;if(d===gT||c===gT)return ON;if([pT,fy,xT].indexOf(d)!==-1||c===Oye||u===bT&&Vye.indexOf(c)!==-1||c===jg&&d===bT||d===T7||qf.indexOf(d)!==-1&&c===Oc||qf.indexOf(c)!==-1&&d===Oc||c===hy&&[qb,kN,FN].indexOf(d)!==-1||[qb,kN,FN].indexOf(c)!==-1&&d===Ay||qf.indexOf(c)!==-1&&k7.indexOf(d)!==-1||k7.indexOf(c)!==-1&&qf.indexOf(d)!==-1||[hy,Ay].indexOf(c)!==-1&&(d===Oc||[D1,fy].indexOf(d)!==-1&&e[l+1]===Oc)||[D1,fy].indexOf(c)!==-1&&d===Oc||c===Oc&&[Oc,jg,Ig].indexOf(d)!==-1)return Rn;if([Oc,jg,Ig,TN,O1].indexOf(d)!==-1)for(var f=s;f>=0;){var h=e[f];if(h===Oc)return Rn;if([jg,Ig].indexOf(h)!==-1)f--;else break}if([hy,Ay].indexOf(d)!==-1)for(var f=[TN,O1].indexOf(c)!==-1?i:s;f>=0;){var h=e[f];if(h===Oc)return Rn;if([jg,Ig].indexOf(h)!==-1)f--;else break}if(wT===c&&[wT,k_,vT,yT].indexOf(d)!==-1||[k_,vT].indexOf(c)!==-1&&[k_,F_].indexOf(d)!==-1||[F_,yT].indexOf(c)!==-1&&d===F_||F7.indexOf(c)!==-1&&[T7,Ay].indexOf(d)!==-1||F7.indexOf(d)!==-1&&c===hy||qf.indexOf(c)!==-1&&qf.indexOf(d)!==-1||c===Ig&&qf.indexOf(d)!==-1||qf.concat(Oc).indexOf(c)!==-1&&d===D1&&Uye.indexOf(t[l])===-1||qf.concat(Oc).indexOf(d)!==-1&&c===O1)return Rn;if(c===zj&&d===zj){for(var A=r[s],m=1;A>0&&(A--,e[A]===zj);)m++;if(m%2!==0)return Rn}return c===kN&&d===FN?Rn:ON},Kye=function(t,e){e||(e={lineBreak:"normal",wordBreak:"normal"});var r=Hye(t,e.lineBreak),n=r[0],a=r[1],s=r[2];(e.wordBreak==="break-all"||e.wordBreak==="break-word")&&(a=a.map(function(l){return[Oc,Um,pZ].indexOf(l)!==-1?qb:l}));var i=e.wordBreak==="keep-all"?s.map(function(l,c){return l&&t[c]>=19968&&t[c]<=40959}):void 0;return[n,a,i]},Gye=function(){function t(e,r,n,a){this.codePoints=e,this.required=r===gZ,this.start=n,this.end=a}return t.prototype.slice=function(){return ai.apply(void 0,this.codePoints.slice(this.start,this.end))},t}(),qye=function(t,e){var r=d4(t),n=Kye(r,e),a=n[0],s=n[1],i=n[2],l=r.length,c=0,u=0;return{next:function(){if(u>=l)return{done:!0,value:null};for(var d=Rn;u<l&&(d=$ye(r,s,a,++u,i))===Rn;);if(d!==Rn||u===l){var f=new Gye(r,d,c,u);return c=u,{value:f,done:!1}}return{done:!0,value:null}}}},zye=1,Wye=2,rw=4,D7=8,QE=10,R7=47,Hy=92,Xye=9,Yye=32,DN=34,R1=61,Jye=35,Zye=36,ebe=37,RN=39,MN=40,M1=41,tbe=95,sc=45,rbe=33,nbe=60,abe=62,sbe=64,ibe=91,obe=93,lbe=61,cbe=123,LN=63,ube=125,M7=124,dbe=126,fbe=128,L7=65533,Xj=42,Gm=43,Abe=44,hbe=58,mbe=59,zb=46,pbe=0,gbe=8,xbe=11,vbe=14,ybe=31,bbe=127,ef=-1,vZ=48,yZ=97,bZ=101,wbe=102,Nbe=117,Cbe=122,wZ=65,NZ=69,CZ=70,_be=85,Ebe=90,dl=function(t){return t>=vZ&&t<=57},Sbe=function(t){return t>=55296&&t<=57343},Bg=function(t){return dl(t)||t>=wZ&&t<=CZ||t>=yZ&&t<=wbe},Ibe=function(t){return t>=yZ&&t<=Cbe},jbe=function(t){return t>=wZ&&t<=Ebe},Bbe=function(t){return Ibe(t)||jbe(t)},Pbe=function(t){return t>=fbe},UN=function(t){return t===QE||t===Xye||t===Yye},VE=function(t){return Bbe(t)||Pbe(t)||t===tbe},U7=function(t){return VE(t)||dl(t)||t===sc},Tbe=function(t){return t>=pbe&&t<=gbe||t===xbe||t>=vbe&&t<=ybe||t===bbe},qh=function(t,e){return t!==Hy?!1:e!==QE},QN=function(t,e,r){return t===sc?VE(e)||qh(e,r):VE(t)?!0:!!(t===Hy&&qh(t,e))},Yj=function(t,e,r){return t===Gm||t===sc?dl(e)?!0:e===zb&&dl(r):dl(t===zb?e:t)},kbe=function(t){var e=0,r=1;(t[e]===Gm||t[e]===sc)&&(t[e]===sc&&(r=-1),e++);for(var n=[];dl(t[e]);)n.push(t[e++]);var a=n.length?parseInt(ai.apply(void 0,n),10):0;t[e]===zb&&e++;for(var s=[];dl(t[e]);)s.push(t[e++]);var i=s.length,l=i?parseInt(ai.apply(void 0,s),10):0;(t[e]===NZ||t[e]===bZ)&&e++;var c=1;(t[e]===Gm||t[e]===sc)&&(t[e]===sc&&(c=-1),e++);for(var u=[];dl(t[e]);)u.push(t[e++]);var d=u.length?parseInt(ai.apply(void 0,u),10):0;return r*(a+l*Math.pow(10,-i))*Math.pow(10,c*d)},Fbe={type:2},Obe={type:3},Dbe={type:4},Rbe={type:13},Mbe={type:8},Lbe={type:21},Ube={type:9},Qbe={type:10},Vbe={type:11},Hbe={type:12},$be={type:14},VN={type:23},Kbe={type:1},Gbe={type:25},qbe={type:24},zbe={type:26},Wbe={type:27},Xbe={type:28},Ybe={type:29},Jbe={type:31},_T={type:32},_Z=function(){function t(){this._value=[]}return t.prototype.write=function(e){this._value=this._value.concat(d4(e))},t.prototype.read=function(){for(var e=[],r=this.consumeToken();r!==_T;)e.push(r),r=this.consumeToken();return e},t.prototype.consumeToken=function(){var e=this.consumeCodePoint();switch(e){case DN:return this.consumeStringToken(DN);case Jye:var r=this.peekCodePoint(0),n=this.peekCodePoint(1),a=this.peekCodePoint(2);if(U7(r)||qh(n,a)){var s=QN(r,n,a)?Wye:zye,i=this.consumeName();return{type:5,value:i,flags:s}}break;case Zye:if(this.peekCodePoint(0)===R1)return this.consumeCodePoint(),Rbe;break;case RN:return this.consumeStringToken(RN);case MN:return Fbe;case M1:return Obe;case Xj:if(this.peekCodePoint(0)===R1)return this.consumeCodePoint(),$be;break;case Gm:if(Yj(e,this.peekCodePoint(0),this.peekCodePoint(1)))return this.reconsumeCodePoint(e),this.consumeNumericToken();break;case Abe:return Dbe;case sc:var l=e,c=this.peekCodePoint(0),u=this.peekCodePoint(1);if(Yj(l,c,u))return this.reconsumeCodePoint(e),this.consumeNumericToken();if(QN(l,c,u))return this.reconsumeCodePoint(e),this.consumeIdentLikeToken();if(c===sc&&u===abe)return this.consumeCodePoint(),this.consumeCodePoint(),qbe;break;case zb:if(Yj(e,this.peekCodePoint(0),this.peekCodePoint(1)))return this.reconsumeCodePoint(e),this.consumeNumericToken();break;case R7:if(this.peekCodePoint(0)===Xj)for(this.consumeCodePoint();;){var d=this.consumeCodePoint();if(d===Xj&&(d=this.consumeCodePoint(),d===R7))return this.consumeToken();if(d===ef)return this.consumeToken()}break;case hbe:return zbe;case mbe:return Wbe;case nbe:if(this.peekCodePoint(0)===rbe&&this.peekCodePoint(1)===sc&&this.peekCodePoint(2)===sc)return this.consumeCodePoint(),this.consumeCodePoint(),Gbe;break;case sbe:var f=this.peekCodePoint(0),h=this.peekCodePoint(1),A=this.peekCodePoint(2);if(QN(f,h,A)){var i=this.consumeName();return{type:7,value:i}}break;case ibe:return Xbe;case Hy:if(qh(e,this.peekCodePoint(0)))return this.reconsumeCodePoint(e),this.consumeIdentLikeToken();break;case obe:return Ybe;case lbe:if(this.peekCodePoint(0)===R1)return this.consumeCodePoint(),Mbe;break;case cbe:return Vbe;case ube:return Hbe;case Nbe:case _be:var m=this.peekCodePoint(0),p=this.peekCodePoint(1);return m===Gm&&(Bg(p)||p===LN)&&(this.consumeCodePoint(),this.consumeUnicodeRangeToken()),this.reconsumeCodePoint(e),this.consumeIdentLikeToken();case M7:if(this.peekCodePoint(0)===R1)return this.consumeCodePoint(),Ube;if(this.peekCodePoint(0)===M7)return this.consumeCodePoint(),Lbe;break;case dbe:if(this.peekCodePoint(0)===R1)return this.consumeCodePoint(),Qbe;break;case ef:return _T}return UN(e)?(this.consumeWhiteSpace(),Jbe):dl(e)?(this.reconsumeCodePoint(e),this.consumeNumericToken()):VE(e)?(this.reconsumeCodePoint(e),this.consumeIdentLikeToken()):{type:6,value:ai(e)}},t.prototype.consumeCodePoint=function(){var e=this._value.shift();return typeof e>"u"?-1:e},t.prototype.reconsumeCodePoint=function(e){this._value.unshift(e)},t.prototype.peekCodePoint=function(e){return e>=this._value.length?-1:this._value[e]},t.prototype.consumeUnicodeRangeToken=function(){for(var e=[],r=this.consumeCodePoint();Bg(r)&&e.length<6;)e.push(r),r=this.consumeCodePoint();for(var n=!1;r===LN&&e.length<6;)e.push(r),r=this.consumeCodePoint(),n=!0;if(n){var a=parseInt(ai.apply(void 0,e.map(function(c){return c===LN?vZ:c})),16),s=parseInt(ai.apply(void 0,e.map(function(c){return c===LN?CZ:c})),16);return{type:30,start:a,end:s}}var i=parseInt(ai.apply(void 0,e),16);if(this.peekCodePoint(0)===sc&&Bg(this.peekCodePoint(1))){this.consumeCodePoint(),r=this.consumeCodePoint();for(var l=[];Bg(r)&&l.length<6;)l.push(r),r=this.consumeCodePoint();var s=parseInt(ai.apply(void 0,l),16);return{type:30,start:i,end:s}}else return{type:30,start:i,end:i}},t.prototype.consumeIdentLikeToken=function(){var e=this.consumeName();return e.toLowerCase()==="url"&&this.peekCodePoint(0)===MN?(this.consumeCodePoint(),this.consumeUrlToken()):this.peekCodePoint(0)===MN?(this.consumeCodePoint(),{type:19,value:e}):{type:20,value:e}},t.prototype.consumeUrlToken=function(){var e=[];if(this.consumeWhiteSpace(),this.peekCodePoint(0)===ef)return{type:22,value:""};var r=this.peekCodePoint(0);if(r===RN||r===DN){var n=this.consumeStringToken(this.consumeCodePoint());return n.type===0&&(this.consumeWhiteSpace(),this.peekCodePoint(0)===ef||this.peekCodePoint(0)===M1)?(this.consumeCodePoint(),{type:22,value:n.value}):(this.consumeBadUrlRemnants(),VN)}for(;;){var a=this.consumeCodePoint();if(a===ef||a===M1)return{type:22,value:ai.apply(void 0,e)};if(UN(a))return this.consumeWhiteSpace(),this.peekCodePoint(0)===ef||this.peekCodePoint(0)===M1?(this.consumeCodePoint(),{type:22,value:ai.apply(void 0,e)}):(this.consumeBadUrlRemnants(),VN);if(a===DN||a===RN||a===MN||Tbe(a))return this.consumeBadUrlRemnants(),VN;if(a===Hy)if(qh(a,this.peekCodePoint(0)))e.push(this.consumeEscapedCodePoint());else return this.consumeBadUrlRemnants(),VN;else e.push(a)}},t.prototype.consumeWhiteSpace=function(){for(;UN(this.peekCodePoint(0));)this.consumeCodePoint()},t.prototype.consumeBadUrlRemnants=function(){for(;;){var e=this.consumeCodePoint();if(e===M1||e===ef)return;qh(e,this.peekCodePoint(0))&&this.consumeEscapedCodePoint()}},t.prototype.consumeStringSlice=function(e){for(var r=5e4,n="";e>0;){var a=Math.min(r,e);n+=ai.apply(void 0,this._value.splice(0,a)),e-=a}return this._value.shift(),n},t.prototype.consumeStringToken=function(e){var r="",n=0;do{var a=this._value[n];if(a===ef||a===void 0||a===e)return r+=this.consumeStringSlice(n),{type:0,value:r};if(a===QE)return this._value.splice(0,n),Kbe;if(a===Hy){var s=this._value[n+1];s!==ef&&s!==void 0&&(s===QE?(r+=this.consumeStringSlice(n),n=-1,this._value.shift()):qh(a,s)&&(r+=this.consumeStringSlice(n),r+=ai(this.consumeEscapedCodePoint()),n=-1))}n++}while(!0)},t.prototype.consumeNumber=function(){var e=[],r=rw,n=this.peekCodePoint(0);for((n===Gm||n===sc)&&e.push(this.consumeCodePoint());dl(this.peekCodePoint(0));)e.push(this.consumeCodePoint());n=this.peekCodePoint(0);var a=this.peekCodePoint(1);if(n===zb&&dl(a))for(e.push(this.consumeCodePoint(),this.consumeCodePoint()),r=D7;dl(this.peekCodePoint(0));)e.push(this.consumeCodePoint());n=this.peekCodePoint(0),a=this.peekCodePoint(1);var s=this.peekCodePoint(2);if((n===NZ||n===bZ)&&((a===Gm||a===sc)&&dl(s)||dl(a)))for(e.push(this.consumeCodePoint(),this.consumeCodePoint()),r=D7;dl(this.peekCodePoint(0));)e.push(this.consumeCodePoint());return[kbe(e),r]},t.prototype.consumeNumericToken=function(){var e=this.consumeNumber(),r=e[0],n=e[1],a=this.peekCodePoint(0),s=this.peekCodePoint(1),i=this.peekCodePoint(2);if(QN(a,s,i)){var l=this.consumeName();return{type:15,number:r,flags:n,unit:l}}return a===ebe?(this.consumeCodePoint(),{type:16,number:r,flags:n}):{type:17,number:r,flags:n}},t.prototype.consumeEscapedCodePoint=function(){var e=this.consumeCodePoint();if(Bg(e)){for(var r=ai(e);Bg(this.peekCodePoint(0))&&r.length<6;)r+=ai(this.consumeCodePoint());UN(this.peekCodePoint(0))&&this.consumeCodePoint();var n=parseInt(r,16);return n===0||Sbe(n)||n>1114111?L7:n}return e===ef?L7:e},t.prototype.consumeName=function(){for(var e="";;){var r=this.consumeCodePoint();if(U7(r))e+=ai(r);else if(qh(r,this.peekCodePoint(0)))e+=ai(this.consumeEscapedCodePoint());else return this.reconsumeCodePoint(r),e}},t}(),EZ=function(){function t(e){this._tokens=e}return t.create=function(e){var r=new _Z;return r.write(e),new t(r.read())},t.parseValue=function(e){return t.create(e).parseComponentValue()},t.parseValues=function(e){return t.create(e).parseComponentValues()},t.prototype.parseComponentValue=function(){for(var e=this.consumeToken();e.type===31;)e=this.consumeToken();if(e.type===32)throw new SyntaxError("Error parsing CSS component value, unexpected EOF");this.reconsumeToken(e);var r=this.consumeComponentValue();do e=this.consumeToken();while(e.type===31);if(e.type===32)return r;throw new SyntaxError("Error parsing CSS component value, multiple values found when expecting only one")},t.prototype.parseComponentValues=function(){for(var e=[];;){var r=this.consumeComponentValue();if(r.type===32)return e;e.push(r),e.push()}},t.prototype.consumeComponentValue=function(){var e=this.consumeToken();switch(e.type){case 11:case 28:case 2:return this.consumeSimpleBlock(e.type);case 19:return this.consumeFunction(e)}return e},t.prototype.consumeSimpleBlock=function(e){for(var r={type:e,values:[]},n=this.consumeToken();;){if(n.type===32||e2e(n,e))return r;this.reconsumeToken(n),r.values.push(this.consumeComponentValue()),n=this.consumeToken()}},t.prototype.consumeFunction=function(e){for(var r={name:e.value,values:[],type:18};;){var n=this.consumeToken();if(n.type===32||n.type===3)return r;this.reconsumeToken(n),r.values.push(this.consumeComponentValue())}},t.prototype.consumeToken=function(){var e=this._tokens.shift();return typeof e>"u"?_T:e},t.prototype.reconsumeToken=function(e){this._tokens.unshift(e)},t}(),nw=function(t){return t.type===15},Rv=function(t){return t.type===17},ja=function(t){return t.type===20},Zbe=function(t){return t.type===0},ET=function(t,e){return ja(t)&&t.value===e},SZ=function(t){return t.type!==31},lv=function(t){return t.type!==31&&t.type!==4},kf=function(t){var e=[],r=[];return t.forEach(function(n){if(n.type===4){if(r.length===0)throw new Error("Error parsing function args, zero tokens for arg");e.push(r),r=[];return}n.type!==31&&r.push(n)}),r.length&&e.push(r),e},e2e=function(t,e){return e===11&&t.type===12||e===28&&t.type===29?!0:e===2&&t.type===3},H0=function(t){return t.type===17||t.type===15},vi=function(t){return t.type===16||H0(t)},IZ=function(t){return t.length>1?[t[0],t[1]]:[t[0]]},Ho={type:17,number:0,flags:rw},S6={type:16,number:50,flags:rw},d0={type:16,number:100,flags:rw},my=function(t,e,r){var n=t[0],a=t[1];return[Ha(n,e),Ha(typeof a<"u"?a:n,r)]},Ha=function(t,e){if(t.type===16)return t.number/100*e;if(nw(t))switch(t.unit){case"rem":case"em":return 16*t.number;case"px":default:return t.number}return t.number},jZ="deg",BZ="grad",PZ="rad",TZ="turn",f4={name:"angle",parse:function(t,e){if(e.type===15)switch(e.unit){case jZ:return Math.PI*e.number/180;case BZ:return Math.PI/200*e.number;case PZ:return e.number;case TZ:return Math.PI*2*e.number}throw new Error("Unsupported angle type")}},kZ=function(t){return t.type===15&&(t.unit===jZ||t.unit===BZ||t.unit===PZ||t.unit===TZ)},FZ=function(t){var e=t.filter(ja).map(function(r){return r.value}).join(" ");switch(e){case"to bottom right":case"to right bottom":case"left top":case"top left":return[Ho,Ho];case"to top":case"bottom":return Du(0);case"to bottom left":case"to left bottom":case"right top":case"top right":return[Ho,d0];case"to right":case"left":return Du(90);case"to top left":case"to left top":case"right bottom":case"bottom right":return[d0,d0];case"to bottom":case"top":return Du(180);case"to top right":case"to right top":case"left bottom":case"bottom left":return[d0,Ho];case"to left":case"right":return Du(270)}return 0},Du=function(t){return Math.PI*t/180},j0={name:"color",parse:function(t,e){if(e.type===18){var r=t2e[e.name];if(typeof r>"u")throw new Error('Attempting to parse an unsupported color function "'+e.name+'"');return r(t,e.values)}if(e.type===5){if(e.value.length===3){var n=e.value.substring(0,1),a=e.value.substring(1,2),s=e.value.substring(2,3);return f0(parseInt(n+n,16),parseInt(a+a,16),parseInt(s+s,16),1)}if(e.value.length===4){var n=e.value.substring(0,1),a=e.value.substring(1,2),s=e.value.substring(2,3),i=e.value.substring(3,4);return f0(parseInt(n+n,16),parseInt(a+a,16),parseInt(s+s,16),parseInt(i+i,16)/255)}if(e.value.length===6){var n=e.value.substring(0,2),a=e.value.substring(2,4),s=e.value.substring(4,6);return f0(parseInt(n,16),parseInt(a,16),parseInt(s,16),1)}if(e.value.length===8){var n=e.value.substring(0,2),a=e.value.substring(2,4),s=e.value.substring(4,6),i=e.value.substring(6,8);return f0(parseInt(n,16),parseInt(a,16),parseInt(s,16),parseInt(i,16)/255)}}if(e.type===20){var l=_A[e.value.toUpperCase()];if(typeof l<"u")return l}return _A.TRANSPARENT}},B0=function(t){return(255&t)===0},ro=function(t){var e=255&t,r=255&t>>8,n=255&t>>16,a=255&t>>24;return e<255?"rgba("+a+","+n+","+r+","+e/255+")":"rgb("+a+","+n+","+r+")"},f0=function(t,e,r,n){return(t<<24|e<<16|r<<8|Math.round(n*255)<<0)>>>0},Q7=function(t,e){if(t.type===17)return t.number;if(t.type===16){var r=e===3?1:255;return e===3?t.number/100*r:Math.round(t.number/100*r)}return 0},V7=function(t,e){var r=e.filter(lv);if(r.length===3){var n=r.map(Q7),a=n[0],s=n[1],i=n[2];return f0(a,s,i,1)}if(r.length===4){var l=r.map(Q7),a=l[0],s=l[1],i=l[2],c=l[3];return f0(a,s,i,c)}return 0};function Jj(t,e,r){return r<0&&(r+=1),r>=1&&(r-=1),r<1/6?(e-t)*r*6+t:r<1/2?e:r<2/3?(e-t)*6*(2/3-r)+t:t}var H7=function(t,e){var r=e.filter(lv),n=r[0],a=r[1],s=r[2],i=r[3],l=(n.type===17?Du(n.number):f4.parse(t,n))/(Math.PI*2),c=vi(a)?a.number/100:0,u=vi(s)?s.number/100:0,d=typeof i<"u"&&vi(i)?Ha(i,1):1;if(c===0)return f0(u*255,u*255,u*255,1);var f=u<=.5?u*(c+1):u+c-u*c,h=u*2-f,A=Jj(h,f,l+1/3),m=Jj(h,f,l),p=Jj(h,f,l-1/3);return f0(A*255,m*255,p*255,d)},t2e={hsl:H7,hsla:H7,rgb:V7,rgba:V7},$y=function(t,e){return j0.parse(t,EZ.create(e).parseComponentValue())},_A={ALICEBLUE:4042850303,ANTIQUEWHITE:4209760255,AQUA:16777215,AQUAMARINE:2147472639,AZURE:4043309055,BEIGE:4126530815,BISQUE:4293182719,BLACK:255,BLANCHEDALMOND:4293643775,BLUE:65535,BLUEVIOLET:2318131967,BROWN:2771004159,BURLYWOOD:3736635391,CADETBLUE:1604231423,CHARTREUSE:2147418367,CHOCOLATE:3530104575,CORAL:4286533887,CORNFLOWERBLUE:1687547391,CORNSILK:4294499583,CRIMSON:3692313855,CYAN:16777215,DARKBLUE:35839,DARKCYAN:9145343,DARKGOLDENROD:3095837695,DARKGRAY:2846468607,DARKGREEN:6553855,DARKGREY:2846468607,DARKKHAKI:3182914559,DARKMAGENTA:2332068863,DARKOLIVEGREEN:1433087999,DARKORANGE:4287365375,DARKORCHID:2570243327,DARKRED:2332033279,DARKSALMON:3918953215,DARKSEAGREEN:2411499519,DARKSLATEBLUE:1211993087,DARKSLATEGRAY:793726975,DARKSLATEGREY:793726975,DARKTURQUOISE:13554175,DARKVIOLET:2483082239,DEEPPINK:4279538687,DEEPSKYBLUE:12582911,DIMGRAY:1768516095,DIMGREY:1768516095,DODGERBLUE:512819199,FIREBRICK:2988581631,FLORALWHITE:4294635775,FORESTGREEN:579543807,FUCHSIA:4278255615,GAINSBORO:3705462015,GHOSTWHITE:4177068031,GOLD:4292280575,GOLDENROD:3668254975,GRAY:2155905279,GREEN:8388863,GREENYELLOW:2919182335,GREY:2155905279,HONEYDEW:4043305215,HOTPINK:4285117695,INDIANRED:3445382399,INDIGO:1258324735,IVORY:4294963455,KHAKI:4041641215,LAVENDER:3873897215,LAVENDERBLUSH:4293981695,LAWNGREEN:2096890111,LEMONCHIFFON:4294626815,LIGHTBLUE:2916673279,LIGHTCORAL:4034953471,LIGHTCYAN:3774873599,LIGHTGOLDENRODYELLOW:4210742015,LIGHTGRAY:3553874943,LIGHTGREEN:2431553791,LIGHTGREY:3553874943,LIGHTPINK:4290167295,LIGHTSALMON:4288707327,LIGHTSEAGREEN:548580095,LIGHTSKYBLUE:2278488831,LIGHTSLATEGRAY:2005441023,LIGHTSLATEGREY:2005441023,LIGHTSTEELBLUE:2965692159,LIGHTYELLOW:4294959359,LIME:16711935,LIMEGREEN:852308735,LINEN:4210091775,MAGENTA:4278255615,MAROON:2147483903,MEDIUMAQUAMARINE:1724754687,MEDIUMBLUE:52735,MEDIUMORCHID:3126187007,MEDIUMPURPLE:2473647103,MEDIUMSEAGREEN:1018393087,MEDIUMSLATEBLUE:2070474495,MEDIUMSPRINGGREEN:16423679,MEDIUMTURQUOISE:1221709055,MEDIUMVIOLETRED:3340076543,MIDNIGHTBLUE:421097727,MINTCREAM:4127193855,MISTYROSE:4293190143,MOCCASIN:4293178879,NAVAJOWHITE:4292783615,NAVY:33023,OLDLACE:4260751103,OLIVE:2155872511,OLIVEDRAB:1804477439,ORANGE:4289003775,ORANGERED:4282712319,ORCHID:3664828159,PALEGOLDENROD:4008225535,PALEGREEN:2566625535,PALETURQUOISE:2951671551,PALEVIOLETRED:3681588223,PAPAYAWHIP:4293907967,PEACHPUFF:4292524543,PERU:3448061951,PINK:4290825215,PLUM:3718307327,POWDERBLUE:2967529215,PURPLE:2147516671,REBECCAPURPLE:1714657791,RED:4278190335,ROSYBROWN:3163525119,ROYALBLUE:1097458175,SADDLEBROWN:2336560127,SALMON:4202722047,SANDYBROWN:4104413439,SEAGREEN:780883967,SEASHELL:4294307583,SIENNA:2689740287,SILVER:3233857791,SKYBLUE:2278484991,SLATEBLUE:1784335871,SLATEGRAY:1887473919,SLATEGREY:1887473919,SNOW:4294638335,SPRINGGREEN:16744447,STEELBLUE:1182971135,TAN:3535047935,TEAL:8421631,THISTLE:3636451583,TOMATO:4284696575,TRANSPARENT:0,TURQUOISE:1088475391,VIOLET:4001558271,WHEAT:4125012991,WHITE:4294967295,WHITESMOKE:4126537215,YELLOW:4294902015,YELLOWGREEN:2597139199},r2e={name:"background-clip",initialValue:"border-box",prefix:!1,type:1,parse:function(t,e){return e.map(function(r){if(ja(r))switch(r.value){case"padding-box":return 1;case"content-box":return 2}return 0})}},n2e={name:"background-color",initialValue:"transparent",prefix:!1,type:3,format:"color"},A4=function(t,e){var r=j0.parse(t,e[0]),n=e[1];return n&&vi(n)?{color:r,stop:n}:{color:r,stop:null}},$7=function(t,e){var r=t[0],n=t[t.length-1];r.stop===null&&(r.stop=Ho),n.stop===null&&(n.stop=d0);for(var a=[],s=0,i=0;i<t.length;i++){var l=t[i].stop;if(l!==null){var c=Ha(l,e);c>s?a.push(c):a.push(s),s=c}else a.push(null)}for(var u=null,i=0;i<a.length;i++){var d=a[i];if(d===null)u===null&&(u=i);else if(u!==null){for(var f=i-u,h=a[u-1],A=(d-h)/(f+1),m=1;m<=f;m++)a[u+m-1]=A*m;u=null}}return t.map(function(p,g){var x=p.color;return{color:x,stop:Math.max(Math.min(1,a[g]/e),0)}})},a2e=function(t,e,r){var n=e/2,a=r/2,s=Ha(t[0],e)-n,i=a-Ha(t[1],r);return(Math.atan2(i,s)+Math.PI*2)%(Math.PI*2)},s2e=function(t,e,r){var n=typeof t=="number"?t:a2e(t,e,r),a=Math.abs(e*Math.sin(n))+Math.abs(r*Math.cos(n)),s=e/2,i=r/2,l=a/2,c=Math.sin(n-Math.PI/2)*l,u=Math.cos(n-Math.PI/2)*l;return[a,s-u,s+u,i-c,i+c]},hd=function(t,e){return Math.sqrt(t*t+e*e)},K7=function(t,e,r,n,a){var s=[[0,0],[0,e],[t,0],[t,e]];return s.reduce(function(i,l){var c=l[0],u=l[1],d=hd(r-c,n-u);return(a?d<i.optimumDistance:d>i.optimumDistance)?{optimumCorner:l,optimumDistance:d}:i},{optimumDistance:a?1/0:-1/0,optimumCorner:null}).optimumCorner},i2e=function(t,e,r,n,a){var s=0,i=0;switch(t.size){case 0:t.shape===0?s=i=Math.min(Math.abs(e),Math.abs(e-n),Math.abs(r),Math.abs(r-a)):t.shape===1&&(s=Math.min(Math.abs(e),Math.abs(e-n)),i=Math.min(Math.abs(r),Math.abs(r-a)));break;case 2:if(t.shape===0)s=i=Math.min(hd(e,r),hd(e,r-a),hd(e-n,r),hd(e-n,r-a));else if(t.shape===1){var l=Math.min(Math.abs(r),Math.abs(r-a))/Math.min(Math.abs(e),Math.abs(e-n)),c=K7(n,a,e,r,!0),u=c[0],d=c[1];s=hd(u-e,(d-r)/l),i=l*s}break;case 1:t.shape===0?s=i=Math.max(Math.abs(e),Math.abs(e-n),Math.abs(r),Math.abs(r-a)):t.shape===1&&(s=Math.max(Math.abs(e),Math.abs(e-n)),i=Math.max(Math.abs(r),Math.abs(r-a)));break;case 3:if(t.shape===0)s=i=Math.max(hd(e,r),hd(e,r-a),hd(e-n,r),hd(e-n,r-a));else if(t.shape===1){var l=Math.max(Math.abs(r),Math.abs(r-a))/Math.max(Math.abs(e),Math.abs(e-n)),f=K7(n,a,e,r,!1),u=f[0],d=f[1];s=hd(u-e,(d-r)/l),i=l*s}break}return Array.isArray(t.size)&&(s=Ha(t.size[0],n),i=t.size.length===2?Ha(t.size[1],a):s),[s,i]},o2e=function(t,e){var r=Du(180),n=[];return kf(e).forEach(function(a,s){if(s===0){var i=a[0];if(i.type===20&&i.value==="to"){r=FZ(a);return}else if(kZ(i)){r=f4.parse(t,i);return}}var l=A4(t,a);n.push(l)}),{angle:r,stops:n,type:1}},HN=function(t,e){var r=Du(180),n=[];return kf(e).forEach(function(a,s){if(s===0){var i=a[0];if(i.type===20&&["top","left","right","bottom"].indexOf(i.value)!==-1){r=FZ(a);return}else if(kZ(i)){r=(f4.parse(t,i)+Du(270))%Du(360);return}}var l=A4(t,a);n.push(l)}),{angle:r,stops:n,type:1}},l2e=function(t,e){var r=Du(180),n=[],a=1,s=0,i=3,l=[];return kf(e).forEach(function(c,u){var d=c[0];if(u===0){if(ja(d)&&d.value==="linear"){a=1;return}else if(ja(d)&&d.value==="radial"){a=2;return}}if(d.type===18){if(d.name==="from"){var f=j0.parse(t,d.values[0]);n.push({stop:Ho,color:f})}else if(d.name==="to"){var f=j0.parse(t,d.values[0]);n.push({stop:d0,color:f})}else if(d.name==="color-stop"){var h=d.values.filter(lv);if(h.length===2){var f=j0.parse(t,h[1]),A=h[0];Rv(A)&&n.push({stop:{type:16,number:A.number*100,flags:A.flags},color:f})}}}}),a===1?{angle:(r+Du(180))%Du(360),stops:n,type:a}:{size:i,shape:s,stops:n,position:l,type:a}},OZ="closest-side",DZ="farthest-side",RZ="closest-corner",MZ="farthest-corner",LZ="circle",UZ="ellipse",QZ="cover",VZ="contain",c2e=function(t,e){var r=0,n=3,a=[],s=[];return kf(e).forEach(function(i,l){var c=!0;if(l===0){var u=!1;c=i.reduce(function(f,h){if(u)if(ja(h))switch(h.value){case"center":return s.push(S6),f;case"top":case"left":return s.push(Ho),f;case"right":case"bottom":return s.push(d0),f}else(vi(h)||H0(h))&&s.push(h);else if(ja(h))switch(h.value){case LZ:return r=0,!1;case UZ:return r=1,!1;case"at":return u=!0,!1;case OZ:return n=0,!1;case QZ:case DZ:return n=1,!1;case VZ:case RZ:return n=2,!1;case MZ:return n=3,!1}else if(H0(h)||vi(h))return Array.isArray(n)||(n=[]),n.push(h),!1;return f},c)}if(c){var d=A4(t,i);a.push(d)}}),{size:n,shape:r,stops:a,position:s,type:2}},$N=function(t,e){var r=0,n=3,a=[],s=[];return kf(e).forEach(function(i,l){var c=!0;if(l===0?c=i.reduce(function(d,f){if(ja(f))switch(f.value){case"center":return s.push(S6),!1;case"top":case"left":return s.push(Ho),!1;case"right":case"bottom":return s.push(d0),!1}else if(vi(f)||H0(f))return s.push(f),!1;return d},c):l===1&&(c=i.reduce(function(d,f){if(ja(f))switch(f.value){case LZ:return r=0,!1;case UZ:return r=1,!1;case VZ:case OZ:return n=0,!1;case DZ:return n=1,!1;case RZ:return n=2,!1;case QZ:case MZ:return n=3,!1}else if(H0(f)||vi(f))return Array.isArray(n)||(n=[]),n.push(f),!1;return d},c)),c){var u=A4(t,i);a.push(u)}}),{size:n,shape:r,stops:a,position:s,type:2}},u2e=function(t){return t.type===1},d2e=function(t){return t.type===2},I6={name:"image",parse:function(t,e){if(e.type===22){var r={url:e.value,type:0};return t.cache.addImage(e.value),r}if(e.type===18){var n=HZ[e.name];if(typeof n>"u")throw new Error('Attempting to parse an unsupported image function "'+e.name+'"');return n(t,e.values)}throw new Error("Unsupported image type "+e.type)}};function f2e(t){return!(t.type===20&&t.value==="none")&&(t.type!==18||!!HZ[t.name])}var HZ={"linear-gradient":o2e,"-moz-linear-gradient":HN,"-ms-linear-gradient":HN,"-o-linear-gradient":HN,"-webkit-linear-gradient":HN,"radial-gradient":c2e,"-moz-radial-gradient":$N,"-ms-radial-gradient":$N,"-o-radial-gradient":$N,"-webkit-radial-gradient":$N,"-webkit-gradient":l2e},A2e={name:"background-image",initialValue:"none",type:1,prefix:!1,parse:function(t,e){if(e.length===0)return[];var r=e[0];return r.type===20&&r.value==="none"?[]:e.filter(function(n){return lv(n)&&f2e(n)}).map(function(n){return I6.parse(t,n)})}},h2e={name:"background-origin",initialValue:"border-box",prefix:!1,type:1,parse:function(t,e){return e.map(function(r){if(ja(r))switch(r.value){case"padding-box":return 1;case"content-box":return 2}return 0})}},m2e={name:"background-position",initialValue:"0% 0%",type:1,prefix:!1,parse:function(t,e){return kf(e).map(function(r){return r.filter(vi)}).map(IZ)}},p2e={name:"background-repeat",initialValue:"repeat",prefix:!1,type:1,parse:function(t,e){return kf(e).map(function(r){return r.filter(ja).map(function(n){return n.value}).join(" ")}).map(g2e)}},g2e=function(t){switch(t){case"no-repeat":return 1;case"repeat-x":case"repeat no-repeat":return 2;case"repeat-y":case"no-repeat repeat":return 3;case"repeat":default:return 0}},Mx;(function(t){t.AUTO="auto",t.CONTAIN="contain",t.COVER="cover"})(Mx||(Mx={}));var x2e={name:"background-size",initialValue:"0",prefix:!1,type:1,parse:function(t,e){return kf(e).map(function(r){return r.filter(v2e)})}},v2e=function(t){return ja(t)||vi(t)},h4=function(t){return{name:"border-"+t+"-color",initialValue:"transparent",prefix:!1,type:3,format:"color"}},y2e=h4("top"),b2e=h4("right"),w2e=h4("bottom"),N2e=h4("left"),m4=function(t){return{name:"border-radius-"+t,initialValue:"0 0",prefix:!1,type:1,parse:function(e,r){return IZ(r.filter(vi))}}},C2e=m4("top-left"),_2e=m4("top-right"),E2e=m4("bottom-right"),S2e=m4("bottom-left"),p4=function(t){return{name:"border-"+t+"-style",initialValue:"solid",prefix:!1,type:2,parse:function(e,r){switch(r){case"none":return 0;case"dashed":return 2;case"dotted":return 3;case"double":return 4}return 1}}},I2e=p4("top"),j2e=p4("right"),B2e=p4("bottom"),P2e=p4("left"),g4=function(t){return{name:"border-"+t+"-width",initialValue:"0",type:0,prefix:!1,parse:function(e,r){return nw(r)?r.number:0}}},T2e=g4("top"),k2e=g4("right"),F2e=g4("bottom"),O2e=g4("left"),D2e={name:"color",initialValue:"transparent",prefix:!1,type:3,format:"color"},R2e={name:"direction",initialValue:"ltr",prefix:!1,type:2,parse:function(t,e){switch(e){case"rtl":return 1;case"ltr":default:return 0}}},M2e={name:"display",initialValue:"inline-block",prefix:!1,type:1,parse:function(t,e){return e.filter(ja).reduce(function(r,n){return r|L2e(n.value)},0)}},L2e=function(t){switch(t){case"block":case"-webkit-box":return 2;case"inline":return 4;case"run-in":return 8;case"flow":return 16;case"flow-root":return 32;case"table":return 64;case"flex":case"-webkit-flex":return 128;case"grid":case"-ms-grid":return 256;case"ruby":return 512;case"subgrid":return 1024;case"list-item":return 2048;case"table-row-group":return 4096;case"table-header-group":return 8192;case"table-footer-group":return 16384;case"table-row":return 32768;case"table-cell":return 65536;case"table-column-group":return 131072;case"table-column":return 262144;case"table-caption":return 524288;case"ruby-base":return 1048576;case"ruby-text":return 2097152;case"ruby-base-container":return 4194304;case"ruby-text-container":return 8388608;case"contents":return 16777216;case"inline-block":return 33554432;case"inline-list-item":return 67108864;case"inline-table":return 134217728;case"inline-flex":return 268435456;case"inline-grid":return 536870912}return 0},U2e={name:"float",initialValue:"none",prefix:!1,type:2,parse:function(t,e){switch(e){case"left":return 1;case"right":return 2;case"inline-start":return 3;case"inline-end":return 4}return 0}},Q2e={name:"letter-spacing",initialValue:"0",prefix:!1,type:0,parse:function(t,e){return e.type===20&&e.value==="normal"?0:e.type===17||e.type===15?e.number:0}},HE;(function(t){t.NORMAL="normal",t.STRICT="strict"})(HE||(HE={}));var V2e={name:"line-break",initialValue:"normal",prefix:!1,type:2,parse:function(t,e){switch(e){case"strict":return HE.STRICT;case"normal":default:return HE.NORMAL}}},H2e={name:"line-height",initialValue:"normal",prefix:!1,type:4},G7=function(t,e){return ja(t)&&t.value==="normal"?1.2*e:t.type===17?e*t.number:vi(t)?Ha(t,e):e},$2e={name:"list-style-image",initialValue:"none",type:0,prefix:!1,parse:function(t,e){return e.type===20&&e.value==="none"?null:I6.parse(t,e)}},K2e={name:"list-style-position",initialValue:"outside",prefix:!1,type:2,parse:function(t,e){switch(e){case"inside":return 0;case"outside":default:return 1}}},ST={name:"list-style-type",initialValue:"none",prefix:!1,type:2,parse:function(t,e){switch(e){case"disc":return 0;case"circle":return 1;case"square":return 2;case"decimal":return 3;case"cjk-decimal":return 4;case"decimal-leading-zero":return 5;case"lower-roman":return 6;case"upper-roman":return 7;case"lower-greek":return 8;case"lower-alpha":return 9;case"upper-alpha":return 10;case"arabic-indic":return 11;case"armenian":return 12;case"bengali":return 13;case"cambodian":return 14;case"cjk-earthly-branch":return 15;case"cjk-heavenly-stem":return 16;case"cjk-ideographic":return 17;case"devanagari":return 18;case"ethiopic-numeric":return 19;case"georgian":return 20;case"gujarati":return 21;case"gurmukhi":return 22;case"hebrew":return 22;case"hiragana":return 23;case"hiragana-iroha":return 24;case"japanese-formal":return 25;case"japanese-informal":return 26;case"kannada":return 27;case"katakana":return 28;case"katakana-iroha":return 29;case"khmer":return 30;case"korean-hangul-formal":return 31;case"korean-hanja-formal":return 32;case"korean-hanja-informal":return 33;case"lao":return 34;case"lower-armenian":return 35;case"malayalam":return 36;case"mongolian":return 37;case"myanmar":return 38;case"oriya":return 39;case"persian":return 40;case"simp-chinese-formal":return 41;case"simp-chinese-informal":return 42;case"tamil":return 43;case"telugu":return 44;case"thai":return 45;case"tibetan":return 46;case"trad-chinese-formal":return 47;case"trad-chinese-informal":return 48;case"upper-armenian":return 49;case"disclosure-open":return 50;case"disclosure-closed":return 51;case"none":default:return-1}}},x4=function(t){return{name:"margin-"+t,initialValue:"0",prefix:!1,type:4}},G2e=x4("top"),q2e=x4("right"),z2e=x4("bottom"),W2e=x4("left"),X2e={name:"overflow",initialValue:"visible",prefix:!1,type:1,parse:function(t,e){return e.filter(ja).map(function(r){switch(r.value){case"hidden":return 1;case"scroll":return 2;case"clip":return 3;case"auto":return 4;case"visible":default:return 0}})}},Y2e={name:"overflow-wrap",initialValue:"normal",prefix:!1,type:2,parse:function(t,e){switch(e){case"break-word":return"break-word";case"normal":default:return"normal"}}},v4=function(t){return{name:"padding-"+t,initialValue:"0",prefix:!1,type:3,format:"length-percentage"}},J2e=v4("top"),Z2e=v4("right"),ewe=v4("bottom"),twe=v4("left"),rwe={name:"text-align",initialValue:"left",prefix:!1,type:2,parse:function(t,e){switch(e){case"right":return 2;case"center":case"justify":return 1;case"left":default:return 0}}},nwe={name:"position",initialValue:"static",prefix:!1,type:2,parse:function(t,e){switch(e){case"relative":return 1;case"absolute":return 2;case"fixed":return 3;case"sticky":return 4}return 0}},awe={name:"text-shadow",initialValue:"none",type:1,prefix:!1,parse:function(t,e){return e.length===1&&ET(e[0],"none")?[]:kf(e).map(function(r){for(var n={color:_A.TRANSPARENT,offsetX:Ho,offsetY:Ho,blur:Ho},a=0,s=0;s<r.length;s++){var i=r[s];H0(i)?(a===0?n.offsetX=i:a===1?n.offsetY=i:n.blur=i,a++):n.color=j0.parse(t,i)}return n})}},swe={name:"text-transform",initialValue:"none",prefix:!1,type:2,parse:function(t,e){switch(e){case"uppercase":return 2;case"lowercase":return 1;case"capitalize":return 3}return 0}},iwe={name:"transform",initialValue:"none",prefix:!0,type:0,parse:function(t,e){if(e.type===20&&e.value==="none")return null;if(e.type===18){var r=cwe[e.name];if(typeof r>"u")throw new Error('Attempting to parse an unsupported transform function "'+e.name+'"');return r(e.values)}return null}},owe=function(t){var e=t.filter(function(r){return r.type===17}).map(function(r){return r.number});return e.length===6?e:null},lwe=function(t){var e=t.filter(function(c){return c.type===17}).map(function(c){return c.number}),r=e[0],n=e[1];e[2],e[3];var a=e[4],s=e[5];e[6],e[7],e[8],e[9],e[10],e[11];var i=e[12],l=e[13];return e[14],e[15],e.length===16?[r,n,a,s,i,l]:null},cwe={matrix:owe,matrix3d:lwe},q7={type:16,number:50,flags:rw},uwe=[q7,q7],dwe={name:"transform-origin",initialValue:"50% 50%",prefix:!0,type:1,parse:function(t,e){var r=e.filter(vi);return r.length!==2?uwe:[r[0],r[1]]}},fwe={name:"visible",initialValue:"none",prefix:!1,type:2,parse:function(t,e){switch(e){case"hidden":return 1;case"collapse":return 2;case"visible":default:return 0}}},Ky;(function(t){t.NORMAL="normal",t.BREAK_ALL="break-all",t.KEEP_ALL="keep-all"})(Ky||(Ky={}));var Awe={name:"word-break",initialValue:"normal",prefix:!1,type:2,parse:function(t,e){switch(e){case"break-all":return Ky.BREAK_ALL;case"keep-all":return Ky.KEEP_ALL;case"normal":default:return Ky.NORMAL}}},hwe={name:"z-index",initialValue:"auto",prefix:!1,type:0,parse:function(t,e){if(e.type===20)return{auto:!0,order:0};if(Rv(e))return{auto:!1,order:e.number};throw new Error("Invalid z-index number parsed")}},$Z={name:"time",parse:function(t,e){if(e.type===15)switch(e.unit.toLowerCase()){case"s":return 1e3*e.number;case"ms":return e.number}throw new Error("Unsupported time type")}},mwe={name:"opacity",initialValue:"1",type:0,prefix:!1,parse:function(t,e){return Rv(e)?e.number:1}},pwe={name:"text-decoration-color",initialValue:"transparent",prefix:!1,type:3,format:"color"},gwe={name:"text-decoration-line",initialValue:"none",prefix:!1,type:1,parse:function(t,e){return e.filter(ja).map(function(r){switch(r.value){case"underline":return 1;case"overline":return 2;case"line-through":return 3;case"none":return 4}return 0}).filter(function(r){return r!==0})}},xwe={name:"font-family",initialValue:"",prefix:!1,type:1,parse:function(t,e){var r=[],n=[];return e.forEach(function(a){switch(a.type){case 20:case 0:r.push(a.value);break;case 17:r.push(a.number.toString());break;case 4:n.push(r.join(" ")),r.length=0;break}}),r.length&&n.push(r.join(" ")),n.map(function(a){return a.indexOf(" ")===-1?a:"'"+a+"'"})}},vwe={name:"font-size",initialValue:"0",prefix:!1,type:3,format:"length"},ywe={name:"font-weight",initialValue:"normal",type:0,prefix:!1,parse:function(t,e){if(Rv(e))return e.number;if(ja(e))switch(e.value){case"bold":return 700;case"normal":default:return 400}return 400}},bwe={name:"font-variant",initialValue:"none",type:1,prefix:!1,parse:function(t,e){return e.filter(ja).map(function(r){return r.value})}},wwe={name:"font-style",initialValue:"normal",prefix:!1,type:2,parse:function(t,e){switch(e){case"oblique":return"oblique";case"italic":return"italic";case"normal":default:return"normal"}}},Mi=function(t,e){return(t&e)!==0},Nwe={name:"content",initialValue:"none",type:1,prefix:!1,parse:function(t,e){if(e.length===0)return[];var r=e[0];return r.type===20&&r.value==="none"?[]:e}},Cwe={name:"counter-increment",initialValue:"none",prefix:!0,type:1,parse:function(t,e){if(e.length===0)return null;var r=e[0];if(r.type===20&&r.value==="none")return null;for(var n=[],a=e.filter(SZ),s=0;s<a.length;s++){var i=a[s],l=a[s+1];if(i.type===20){var c=l&&Rv(l)?l.number:1;n.push({counter:i.value,increment:c})}}return n}},_we={name:"counter-reset",initialValue:"none",prefix:!0,type:1,parse:function(t,e){if(e.length===0)return[];for(var r=[],n=e.filter(SZ),a=0;a<n.length;a++){var s=n[a],i=n[a+1];if(ja(s)&&s.value!=="none"){var l=i&&Rv(i)?i.number:0;r.push({counter:s.value,reset:l})}}return r}},Ewe={name:"duration",initialValue:"0s",prefix:!1,type:1,parse:function(t,e){return e.filter(nw).map(function(r){return $Z.parse(t,r)})}},Swe={name:"quotes",initialValue:"none",prefix:!0,type:1,parse:function(t,e){if(e.length===0)return null;var r=e[0];if(r.type===20&&r.value==="none")return null;var n=[],a=e.filter(Zbe);if(a.length%2!==0)return null;for(var s=0;s<a.length;s+=2){var i=a[s].value,l=a[s+1].value;n.push({open:i,close:l})}return n}},z7=function(t,e,r){if(!t)return"";var n=t[Math.min(e,t.length-1)];return n?r?n.open:n.close:""},Iwe={name:"box-shadow",initialValue:"none",type:1,prefix:!1,parse:function(t,e){return e.length===1&&ET(e[0],"none")?[]:kf(e).map(function(r){for(var n={color:255,offsetX:Ho,offsetY:Ho,blur:Ho,spread:Ho,inset:!1},a=0,s=0;s<r.length;s++){var i=r[s];ET(i,"inset")?n.inset=!0:H0(i)?(a===0?n.offsetX=i:a===1?n.offsetY=i:a===2?n.blur=i:n.spread=i,a++):n.color=j0.parse(t,i)}return n})}},jwe={name:"paint-order",initialValue:"normal",prefix:!1,type:1,parse:function(t,e){var r=[0,1,2],n=[];return e.filter(ja).forEach(function(a){switch(a.value){case"stroke":n.push(1);break;case"fill":n.push(0);break;case"markers":n.push(2);break}}),r.forEach(function(a){n.indexOf(a)===-1&&n.push(a)}),n}},Bwe={name:"-webkit-text-stroke-color",initialValue:"currentcolor",prefix:!1,type:3,format:"color"},Pwe={name:"-webkit-text-stroke-width",initialValue:"0",type:0,prefix:!1,parse:function(t,e){return nw(e)?e.number:0}},Twe=function(){function t(e,r){var n,a;this.animationDuration=kr(e,Ewe,r.animationDuration),this.backgroundClip=kr(e,r2e,r.backgroundClip),this.backgroundColor=kr(e,n2e,r.backgroundColor),this.backgroundImage=kr(e,A2e,r.backgroundImage),this.backgroundOrigin=kr(e,h2e,r.backgroundOrigin),this.backgroundPosition=kr(e,m2e,r.backgroundPosition),this.backgroundRepeat=kr(e,p2e,r.backgroundRepeat),this.backgroundSize=kr(e,x2e,r.backgroundSize),this.borderTopColor=kr(e,y2e,r.borderTopColor),this.borderRightColor=kr(e,b2e,r.borderRightColor),this.borderBottomColor=kr(e,w2e,r.borderBottomColor),this.borderLeftColor=kr(e,N2e,r.borderLeftColor),this.borderTopLeftRadius=kr(e,C2e,r.borderTopLeftRadius),this.borderTopRightRadius=kr(e,_2e,r.borderTopRightRadius),this.borderBottomRightRadius=kr(e,E2e,r.borderBottomRightRadius),this.borderBottomLeftRadius=kr(e,S2e,r.borderBottomLeftRadius),this.borderTopStyle=kr(e,I2e,r.borderTopStyle),this.borderRightStyle=kr(e,j2e,r.borderRightStyle),this.borderBottomStyle=kr(e,B2e,r.borderBottomStyle),this.borderLeftStyle=kr(e,P2e,r.borderLeftStyle),this.borderTopWidth=kr(e,T2e,r.borderTopWidth),this.borderRightWidth=kr(e,k2e,r.borderRightWidth),this.borderBottomWidth=kr(e,F2e,r.borderBottomWidth),this.borderLeftWidth=kr(e,O2e,r.borderLeftWidth),this.boxShadow=kr(e,Iwe,r.boxShadow),this.color=kr(e,D2e,r.color),this.direction=kr(e,R2e,r.direction),this.display=kr(e,M2e,r.display),this.float=kr(e,U2e,r.cssFloat),this.fontFamily=kr(e,xwe,r.fontFamily),this.fontSize=kr(e,vwe,r.fontSize),this.fontStyle=kr(e,wwe,r.fontStyle),this.fontVariant=kr(e,bwe,r.fontVariant),this.fontWeight=kr(e,ywe,r.fontWeight),this.letterSpacing=kr(e,Q2e,r.letterSpacing),this.lineBreak=kr(e,V2e,r.lineBreak),this.lineHeight=kr(e,H2e,r.lineHeight),this.listStyleImage=kr(e,$2e,r.listStyleImage),this.listStylePosition=kr(e,K2e,r.listStylePosition),this.listStyleType=kr(e,ST,r.listStyleType),this.marginTop=kr(e,G2e,r.marginTop),this.marginRight=kr(e,q2e,r.marginRight),this.marginBottom=kr(e,z2e,r.marginBottom),this.marginLeft=kr(e,W2e,r.marginLeft),this.opacity=kr(e,mwe,r.opacity);var s=kr(e,X2e,r.overflow);this.overflowX=s[0],this.overflowY=s[s.length>1?1:0],this.overflowWrap=kr(e,Y2e,r.overflowWrap),this.paddingTop=kr(e,J2e,r.paddingTop),this.paddingRight=kr(e,Z2e,r.paddingRight),this.paddingBottom=kr(e,ewe,r.paddingBottom),this.paddingLeft=kr(e,twe,r.paddingLeft),this.paintOrder=kr(e,jwe,r.paintOrder),this.position=kr(e,nwe,r.position),this.textAlign=kr(e,rwe,r.textAlign),this.textDecorationColor=kr(e,pwe,(n=r.textDecorationColor)!==null&&n!==void 0?n:r.color),this.textDecorationLine=kr(e,gwe,(a=r.textDecorationLine)!==null&&a!==void 0?a:r.textDecoration),this.textShadow=kr(e,awe,r.textShadow),this.textTransform=kr(e,swe,r.textTransform),this.transform=kr(e,iwe,r.transform),this.transformOrigin=kr(e,dwe,r.transformOrigin),this.visibility=kr(e,fwe,r.visibility),this.webkitTextStrokeColor=kr(e,Bwe,r.webkitTextStrokeColor),this.webkitTextStrokeWidth=kr(e,Pwe,r.webkitTextStrokeWidth),this.wordBreak=kr(e,Awe,r.wordBreak),this.zIndex=kr(e,hwe,r.zIndex)}return t.prototype.isVisible=function(){return this.display>0&&this.opacity>0&&this.visibility===0},t.prototype.isTransparent=function(){return B0(this.backgroundColor)},t.prototype.isTransformed=function(){return this.transform!==null},t.prototype.isPositioned=function(){return this.position!==0},t.prototype.isPositionedWithZIndex=function(){return this.isPositioned()&&!this.zIndex.auto},t.prototype.isFloating=function(){return this.float!==0},t.prototype.isInlineLevel=function(){return Mi(this.display,4)||Mi(this.display,33554432)||Mi(this.display,268435456)||Mi(this.display,536870912)||Mi(this.display,67108864)||Mi(this.display,134217728)},t}(),kwe=function(){function t(e,r){this.content=kr(e,Nwe,r.content),this.quotes=kr(e,Swe,r.quotes)}return t}(),W7=function(){function t(e,r){this.counterIncrement=kr(e,Cwe,r.counterIncrement),this.counterReset=kr(e,_we,r.counterReset)}return t}(),kr=function(t,e,r){var n=new _Z,a=r!==null&&typeof r<"u"?r.toString():e.initialValue;n.write(a);var s=new EZ(n.read());switch(e.type){case 2:var i=s.parseComponentValue();return e.parse(t,ja(i)?i.value:e.initialValue);case 0:return e.parse(t,s.parseComponentValue());case 1:return e.parse(t,s.parseComponentValues());case 4:return s.parseComponentValue();case 3:switch(e.format){case"angle":return f4.parse(t,s.parseComponentValue());case"color":return j0.parse(t,s.parseComponentValue());case"image":return I6.parse(t,s.parseComponentValue());case"length":var l=s.parseComponentValue();return H0(l)?l:Ho;case"length-percentage":var c=s.parseComponentValue();return vi(c)?c:Ho;case"time":return $Z.parse(t,s.parseComponentValue())}break}},Fwe="data-html2canvas-debug",Owe=function(t){var e=t.getAttribute(Fwe);switch(e){case"all":return 1;case"clone":return 2;case"parse":return 3;case"render":return 4;default:return 0}},IT=function(t,e){var r=Owe(t);return r===1||e===r},Ff=function(){function t(e,r){if(this.context=e,this.textNodes=[],this.elements=[],this.flags=0,IT(r,3))debugger;this.styles=new Twe(e,window.getComputedStyle(r,null)),PT(r)&&(this.styles.animationDuration.some(function(n){return n>0})&&(r.style.animationDuration="0s"),this.styles.transform!==null&&(r.style.transform="none")),this.bounds=u4(this.context,r),IT(r,4)&&(this.flags|=16)}return t}(),Dwe="AAAAAAAAAAAAEA4AGBkAAFAaAAACAAAAAAAIABAAGAAwADgACAAQAAgAEAAIABAACAAQAAgAEAAIABAACAAQAAgAEAAIABAAQABIAEQATAAIABAACAAQAAgAEAAIABAAVABcAAgAEAAIABAACAAQAGAAaABwAHgAgACIAI4AlgAIABAAmwCjAKgAsAC2AL4AvQDFAMoA0gBPAVYBWgEIAAgACACMANoAYgFkAWwBdAF8AX0BhQGNAZUBlgGeAaMBlQGWAasBswF8AbsBwwF0AcsBYwHTAQgA2wG/AOMBdAF8AekB8QF0AfkB+wHiAHQBfAEIAAMC5gQIAAsCEgIIAAgAFgIeAggAIgIpAggAMQI5AkACygEIAAgASAJQAlgCYAIIAAgACAAKBQoFCgUTBRMFGQUrBSsFCAAIAAgACAAIAAgACAAIAAgACABdAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACABoAmgCrwGvAQgAbgJ2AggAHgEIAAgACADnAXsCCAAIAAgAgwIIAAgACAAIAAgACACKAggAkQKZAggAPADJAAgAoQKkAqwCsgK6AsICCADJAggA0AIIAAgACAAIANYC3gIIAAgACAAIAAgACABAAOYCCAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAkASoB+QIEAAgACAA8AEMCCABCBQgACABJBVAFCAAIAAgACAAIAAgACAAIAAgACABTBVoFCAAIAFoFCABfBWUFCAAIAAgACAAIAAgAbQUIAAgACAAIAAgACABzBXsFfQWFBYoFigWKBZEFigWKBYoFmAWfBaYFrgWxBbkFCAAIAAgACAAIAAgACAAIAAgACAAIAMEFCAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAMgFCADQBQgACAAIAAgACAAIAAgACAAIAAgACAAIAO4CCAAIAAgAiQAIAAgACABAAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAD0AggACAD8AggACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIANYFCAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAMDvwAIAAgAJAIIAAgACAAIAAgACAAIAAgACwMTAwgACAB9BOsEGwMjAwgAKwMyAwsFYgE3A/MEPwMIAEUDTQNRAwgAWQOsAGEDCAAIAAgACAAIAAgACABpAzQFNQU2BTcFOAU5BToFNAU1BTYFNwU4BTkFOgU0BTUFNgU3BTgFOQU6BTQFNQU2BTcFOAU5BToFNAU1BTYFNwU4BTkFOgU0BTUFNgU3BTgFOQU6BTQFNQU2BTcFOAU5BToFNAU1BTYFNwU4BTkFOgU0BTUFNgU3BTgFOQU6BTQFNQU2BTcFOAU5BToFNAU1BTYFNwU4BTkFOgU0BTUFNgU3BTgFOQU6BTQFNQU2BTcFOAU5BToFNAU1BTYFNwU4BTkFOgU0BTUFNgU3BTgFOQU6BTQFNQU2BTcFOAU5BToFNAU1BTYFNwU4BTkFOgU0BTUFNgU3BTgFOQU6BTQFNQU2BTcFOAU5BToFNAU1BTYFNwU4BTkFOgU0BTUFNgU3BTgFOQU6BTQFNQU2BTcFOAU5BToFNAU1BTYFNwU4BTkFOgU0BTUFNgU3BTgFOQU6BTQFNQU2BTcFOAU5BToFNAU1BTYFNwU4BTkFOgU0BTUFNgU3BTgFOQU6BTQFNQU2BTcFOAU5BToFNAU1BTYFNwU4BTkFOgU0BTUFNgU3BTgFOQU6BTQFNQU2BTcFOAU5BToFNAU1BTYFNwU4BTkFOgU0BTUFNgU3BTgFOQU6BTQFNQU2BTcFOAU5BToFNAU1BTYFNwU4BTkFOgU0BTUFNgU3BTgFOQU6BTQFNQU2BTcFOAU5BToFNAU1BTYFNwU4BTkFOgU0BTUFNgU3BTgFOQU6BTQFNQU2BTcFOAU5BToFNAU1BTYFNwU4BTkFOgU0BTUFNgU3BTgFOQU6BTQFNQU2BTcFOAU5BToFNAU1BTYFNwU4BTkFOgU0BTUFNgU3BTgFOQU6BTQFNQU2BTcFOAU5BToFNAU1BTYFNwU4BTkFOgU0BTUFNgU3BTgFOQU6BTQFNQU2BTcFOAU5BToFNAU1BTYFNwU4BTkFIQUoBSwFCAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACABtAwgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACABMAEwACAAIAAgACAAIABgACAAIAAgACAC/AAgACAAyAQgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACACAAIAAwAAgACAAIAAgACAAIAAgACAAIAAAARABIAAgACAAIABQASAAIAAgAIABwAEAAjgCIABsAqAC2AL0AigDQAtwC+IJIQqVAZUBWQqVAZUBlQGVAZUBlQGrC5UBlQGVAZUBlQGVAZUBlQGVAXsKlQGVAbAK6wsrDGUMpQzlDJUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAfAKAAuZA64AtwCJALoC6ADwAAgAuACgA/oEpgO6AqsD+AAIAAgAswMIAAgACAAIAIkAuwP5AfsBwwPLAwgACAAIAAgACADRA9kDCAAIAOED6QMIAAgACAAIAAgACADuA/YDCAAIAP4DyQAIAAgABgQIAAgAXQAOBAgACAAIAAgACAAIABMECAAIAAgACAAIAAgACAD8AAQBCAAIAAgAGgQiBCoECAExBAgAEAEIAAgACAAIAAgACAAIAAgACAAIAAgACAA4BAgACABABEYECAAIAAgATAQYAQgAVAQIAAgACAAIAAgACAAIAAgACAAIAFoECAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgAOQEIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAB+BAcACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAEABhgSMBAgACAAIAAgAlAQIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAwAEAAQABAADAAMAAwADAAQABAAEAAQABAAEAAQABHATAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgAdQMIAAgACAAIAAgACAAIAMkACAAIAAgAfQMIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACACFA4kDCAAIAAgACAAIAOcBCAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAIcDCAAIAAgACAAIAAgACAAIAAgACAAIAJEDCAAIAAgACADFAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACABgBAgAZgQIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgAbAQCBXIECAAIAHkECAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACABAAJwEQACjBKoEsgQIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAC6BMIECAAIAAgACAAIAAgACABmBAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgAxwQIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAGYECAAIAAgAzgQIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgAigWKBYoFigWKBYoFigWKBd0FXwUIAOIF6gXxBYoF3gT5BQAGCAaKBYoFigWKBYoFigWKBYoFigWKBYoFigXWBIoFigWKBYoFigWKBYoFigWKBYsFEAaKBYoFigWKBYoFigWKBRQGCACKBYoFigWKBQgACAAIANEECAAIABgGigUgBggAJgYIAC4GMwaKBYoF0wQ3Bj4GigWKBYoFigWKBYoFigWKBYoFigWKBYoFigUIAAgACAAIAAgACAAIAAgAigWKBYoFigWKBYoFigWKBYoFigWKBYoFigWKBYoFigWKBYoFigWKBYoFigWKBYoFigWKBYoFigWKBYoFigWLBf///////wQABAAEAAQABAAEAAQABAAEAAQAAwAEAAQAAgAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAAAAAAAAAAAAAAAAAAAAAAAAAOAAAAAAAAAAQADgAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAFAAUABQAFAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAAAAUAAAAFAAUAAAAFAAUAAAAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABAAEAAQABAAEAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAFAAUABQAFAAUABQAFAAUABQAAAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAFAAUABQAFAAUAAQAAAAUABQAFAAUABQAFAAAAAAAFAAUAAAAFAAUABQAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAEAAAAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAUABQAFAAUABQAFAAUABQAFAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAUABQAFAAUABQAFAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAFAAAAAAAFAAUAAQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABwAFAAUABQAFAAAABwAHAAcAAAAHAAcABwAFAAEAAAAAAAAAAAAAAAAAAAAAAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAHAAcABwAFAAUABQAFAAcABwAFAAUAAAAAAAEAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAHAAAAAQABAAAAAAAAAAAAAAAFAAUABQAFAAAABwAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAHAAcABwAHAAcAAAAHAAcAAAAAAAUABQAHAAUAAQAHAAEABwAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAFAAUABQAFAAUABwABAAUABQAFAAUAAAAAAAAAAAAAAAEAAQABAAEAAQABAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABwAFAAUAAAAAAAAAAAAAAAAABQAFAAUABQAFAAUAAQAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAFAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAQABQANAAQABAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAQABAAEAAQABAAEAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAOAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABAAEAAQABAAEAAQABAAEAAQABAAEAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAEAAQABAAEAAQABAAEAAQABAAAAAAAAAAAAAAAAAAAAAAABQAHAAUABQAFAAAAAAAAAAcABQAFAAUABQAFAAQABAAEAAQABAAEAAQABAAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAFAAUAAAAFAAUABQAFAAUAAAAFAAUABQAAAAUABQAFAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAUABQAAAAAAAAAAAAUABQAFAAcAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAHAAUAAAAHAAcABwAFAAUABQAFAAUABQAFAAUABwAHAAcABwAFAAcABwAAAAUABQAFAAUABQAFAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABwAHAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAAAAUABwAHAAUABQAFAAUAAAAAAAcABwAAAAAABwAHAAUAAAAAAAAAAAAAAAAAAAAAAAAABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAAAAAABQAFAAcAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAAABwAHAAcABQAFAAAAAAAAAAAABQAFAAAAAAAFAAUABQAAAAAAAAAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAAAAAAAAAFAAAAAAAAAAAAAAAAAAAAAAAAAAAABwAFAAUABQAFAAUAAAAFAAUABwAAAAcABwAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAUABQAFAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUAAAAFAAUABwAFAAUABQAFAAAAAAAHAAcAAAAAAAcABwAFAAAAAAAAAAAAAAAAAAAABQAFAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAcABwAAAAAAAAAHAAcABwAAAAcABwAHAAUAAAAAAAAAAAAAAAAAAAAAAAAABQAAAAAAAAAAAAAAAAAAAAAABQAHAAcABwAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABwAHAAcABwAAAAUABQAFAAAABQAFAAUABQAAAAAAAAAAAAAAAAAAAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAAAAcABQAHAAcABQAHAAcAAAAFAAcABwAAAAcABwAFAAUAAAAAAAAAAAAAAAAAAAAFAAUAAAAAAAAAAAAAAAAAAAAAAAAABQAFAAcABwAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAAAAUABwAAAAAAAAAAAAAAAAAAAAAAAAAAAAUAAAAAAAAAAAAFAAcABwAFAAUABQAAAAUAAAAHAAcABwAHAAcABwAHAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUAAAAHAAUABQAFAAUABQAFAAUAAAAAAAAAAAAAAAAAAAAAAAUABQAFAAUABQAFAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAAABwAFAAUABQAFAAUABQAFAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAFAAUABQAFAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAAAAUAAAAFAAAAAAAAAAAABwAHAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABwAFAAUABQAFAAUAAAAFAAUAAAAAAAAAAAAAAAUABQAFAAUABQAFAAUABQAFAAUABQAAAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAFAAUABwAFAAUABQAFAAUABQAAAAUABQAHAAcABQAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAHAAcABQAFAAAAAAAAAAAABQAFAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAUABQAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAAAAcABQAFAAAAAAAAAAAAAAAAAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAFAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAHAAUABQAFAAUABQAFAAUABwAHAAcABwAHAAcABwAHAAUABwAHAAUABQAFAAUABQAFAAUABQAFAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAFAAUABwAHAAcABwAFAAUABwAHAAcAAAAAAAAAAAAHAAcABQAHAAcABwAHAAcABwAFAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAFAAcABwAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAcABQAHAAUABQAFAAUABQAFAAUAAAAFAAAABQAAAAAABQAFAAUABQAFAAUABQAFAAcABwAHAAcABwAHAAUABQAFAAUABQAFAAUABQAFAAUAAAAAAAUABQAFAAUABQAHAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAFAAUABQAFAAUABwAFAAcABwAHAAcABwAFAAcABwAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAUABQAFAAUABQAFAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAUABwAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAHAAUABQAFAAUABwAHAAUABQAHAAUABQAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAcABQAFAAcABwAHAAUABwAFAAUABQAHAAcAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABwAHAAcABwAHAAcABwAHAAUABQAFAAUABQAFAAUABQAHAAcABQAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAFAAUAAAAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAcABQAFAAUABQAFAAUABQAAAAAAAAAAAAUAAAAAAAAAAAAAAAAABQAAAAAABwAFAAUAAAAAAAAAAAAAAAAABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAAABQAFAAUABQAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAFAAUABQAFAAUADgAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAOAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAFAAUAAAAFAAUABQAFAAUABQAFAAUABQAFAAAAAAAAAAAABQAAAAAAAAAFAAAAAAAAAAAABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABwAHAAUABQAHAAAAAAAAAAAABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAcABwAHAAcABQAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUAAAAAAAAAAAAAAAAABQAFAAUABQAFAAUABQAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAFAAUABQAFAAUABQAFAAUABQAHAAcAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAcABwAFAAUABQAFAAcABwAFAAUABwAHAAAAAAAAAAAAAAAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAFAAUABQAFAAcABwAFAAUABwAHAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAAAAAAAAAAAAAAAAAAAAAAFAAcAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUAAAAFAAUABQAAAAAABQAFAAAAAAAAAAAAAAAFAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAcABQAFAAcABwAAAAAAAAAAAAAABwAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAcABwAFAAcABwAFAAcABwAAAAcABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAFAAUABQAAAAAAAAAAAAAAAAAFAAUABQAAAAUABQAAAAAAAAAAAAAABQAFAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAUABQAAAAAAAAAAAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAcABQAHAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAUABQAFAAUABwAFAAUABQAFAAUABQAFAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABwAHAAcABQAFAAUABQAFAAUABQAFAAUABwAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAHAAcABwAFAAUABQAHAAcABQAHAAUABQAAAAAAAAAAAAAAAAAFAAAABwAHAAcABQAFAAUABQAFAAUABQAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABwAHAAcABwAAAAAABwAHAAAAAAAHAAcABwAAAAAAAAAAAAAAAAAAAAAAAAAFAAAAAAAAAAAAAAAAAAAAAAAAAAAABwAHAAAAAAAFAAUABQAFAAUABQAFAAAAAAAAAAUABQAFAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAHAAcABwAFAAUABQAFAAUABQAFAAUABwAHAAUABQAFAAcABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAHAAcABQAFAAUABQAFAAUABwAFAAcABwAFAAcABQAFAAcABQAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAHAAcABQAFAAUABQAAAAAABwAHAAcABwAFAAUABwAFAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAcABwAHAAUABQAFAAUABQAFAAUABQAHAAcABQAHAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABwAFAAcABwAFAAUABQAFAAUABQAHAAUAAAAAAAAAAAAAAAAAAAAAAAcABwAFAAUABQAFAAcABQAFAAUABQAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAHAAcABwAFAAUABQAFAAUABQAFAAUABQAHAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAHAAcABwAFAAUABQAFAAAAAAAFAAUABwAHAAcABwAFAAAAAAAAAAcAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAUABQAFAAUABQAFAAUABQAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUAAAAAAAAAAAAAAAAAAAAAAAAABQAFAAUABQAFAAUABwAHAAUABQAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAcABQAFAAUABQAFAAUABQAAAAUABQAFAAUABQAFAAcABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAAAHAAUABQAFAAUABQAFAAUABwAFAAUABwAFAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAFAAUABQAFAAUAAAAAAAAABQAAAAUABQAAAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAHAAcABwAHAAcAAAAFAAUAAAAHAAcABQAHAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAUABwAHAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAUABQAFAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAUABQAFAAUABQAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAAAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAAAAAAAAAAAAAAAAAAABQAFAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAcABwAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAAAAUABQAFAAAAAAAFAAUABQAFAAUABQAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAFAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAFAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAAAAAAAAAAABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAAAAAAAAAAAAAAAAAAAAAAFAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAFAAUABQAAAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAFAAUABQAFAAUABQAAAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAAAAAABQAFAAUABQAFAAUABQAAAAUABQAAAAUABQAFAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAUABQAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAFAAUABQAFAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAFAAUABQAFAAUADgAOAA4ADgAOAA4ADwAPAA8ADwAPAA8ADwAPAA8ADwAPAA8ADwAPAA8ADwAPAA8ADwAPAA8ADwAPAA8ADwAPAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAcABwAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABwAHAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAAAAAAAAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAKAAoACgAKAAoACgAKAAoACgAKAAoACgAKAAoACgAKAAoACgAKAAoACgAKAAoACgAMAAwADAAMAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkAAAAAAAAAAAAKAAoACgAKAAoACgAKAAoACgAKAAoACgAKAAoACgAKAAoACgAKAAoACgAKAAoACgAKAAoACgAKAAoACgAKAAoACgAAAAAAAAAAAAsADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwACwAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAAAAAADgAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA4AAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAOAA4ADgAOAA4ADgAAAAAAAAAAAAAAAAAAAAAAAAAAAAAADgAOAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA4ADgAAAAAAAAAAAAAAAAAAAAAADgAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAADgAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAADgAOAA4ADgAOAA4ADgAOAA4ADgAOAAAAAAAAAAAADgAOAA4AAAAAAAAAAAAAAAAAAAAOAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAADgAOAAAAAAAAAAAAAAAAAAAAAAAAAAAADgAAAAAAAAAAAAAAAAAAAAAAAAAOAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAADgAOAA4ADgAAAA4ADgAOAA4ADgAOAAAADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4AAAAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAAAAAAAAAAAAAAAAAAAAAAAAAAAADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4AAAAAAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAAAA4AAAAOAAAAAAAAAAAAAAAAAA4AAAAAAAAAAAAAAAAADgAAAAAAAAAAAAAAAAAAAAAAAAAAAA4ADgAAAAAAAAAAAAAAAAAAAAAAAAAAAAAADgAAAAAADgAAAAAAAAAAAA4AAAAOAAAAAAAAAAAADgAOAA4AAAAOAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAOAA4ADgAOAA4AAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAOAA4ADgAAAAAAAAAAAAAAAAAAAAAAAAAOAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAOAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAOAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAOAA4AAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA4ADgAOAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAADgAOAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAADgAAAAAAAAAAAA4AAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAOAAAADgAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAOAA4ADgAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA4ADgAOAA4ADgAOAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA4ADgAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAADgAAAAAADgAOAA4ADgAOAA4ADgAOAA4ADgAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAAAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAAAAAAAAAAAAAAAAAAAAAAAAAAAADgAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA4AAAAAAA4ADgAOAA4ADgAOAA4ADgAOAAAADgAOAA4ADgAAAAAAAAAAAAAAAAAAAAAAAAAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4AAAAAAAAAAAAAAAAADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAOAA4ADgAOAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAADgAOAA4ADgAOAA4ADgAOAAAAAAAAAAAAAAAAAAAAAAAAAAAADgAOAA4ADgAOAA4AAAAAAAAAAAAAAAAAAAAAAA4ADgAOAA4ADgAOAA4ADgAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4AAAAOAA4ADgAOAA4ADgAAAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4AAAAAAAAAAAA=",X7="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",py=typeof Uint8Array>"u"?[]:new Uint8Array(256);for(var KN=0;KN<X7.length;KN++)py[X7.charCodeAt(KN)]=KN;var Rwe=function(t){var e=t.length*.75,r=t.length,n,a=0,s,i,l,c;t[t.length-1]==="="&&(e--,t[t.length-2]==="="&&e--);var u=typeof ArrayBuffer<"u"&&typeof Uint8Array<"u"&&typeof Uint8Array.prototype.slice<"u"?new ArrayBuffer(e):new Array(e),d=Array.isArray(u)?u:new Uint8Array(u);for(n=0;n<r;n+=4)s=py[t.charCodeAt(n)],i=py[t.charCodeAt(n+1)],l=py[t.charCodeAt(n+2)],c=py[t.charCodeAt(n+3)],d[a++]=s<<2|i>>4,d[a++]=(i&15)<<4|l>>2,d[a++]=(l&3)<<6|c&63;return u},Mwe=function(t){for(var e=t.length,r=[],n=0;n<e;n+=2)r.push(t[n+1]<<8|t[n]);return r},Lwe=function(t){for(var e=t.length,r=[],n=0;n<e;n+=4)r.push(t[n+3]<<24|t[n+2]<<16|t[n+1]<<8|t[n]);return r},np=5,j6=11,Zj=2,Uwe=j6-np,KZ=65536>>np,Qwe=1<<np,e5=Qwe-1,Vwe=1024>>np,Hwe=KZ+Vwe,$we=Hwe,Kwe=32,Gwe=$we+Kwe,qwe=65536>>j6,zwe=1<<Uwe,Wwe=zwe-1,Y7=function(t,e,r){return t.slice?t.slice(e,r):new Uint16Array(Array.prototype.slice.call(t,e,r))},Xwe=function(t,e,r){return t.slice?t.slice(e,r):new Uint32Array(Array.prototype.slice.call(t,e,r))},Ywe=function(t,e){var r=Rwe(t),n=Array.isArray(r)?Lwe(r):new Uint32Array(r),a=Array.isArray(r)?Mwe(r):new Uint16Array(r),s=24,i=Y7(a,s/2,n[4]/2),l=n[5]===2?Y7(a,(s+n[4])/2):Xwe(n,Math.ceil((s+n[4])/4));return new Jwe(n[0],n[1],n[2],n[3],i,l)},Jwe=function(){function t(e,r,n,a,s,i){this.initialValue=e,this.errorValue=r,this.highStart=n,this.highValueIndex=a,this.index=s,this.data=i}return t.prototype.get=function(e){var r;if(e>=0){if(e<55296||e>56319&&e<=65535)return r=this.index[e>>np],r=(r<<Zj)+(e&e5),this.data[r];if(e<=65535)return r=this.index[KZ+(e-55296>>np)],r=(r<<Zj)+(e&e5),this.data[r];if(e<this.highStart)return r=Gwe-qwe+(e>>j6),r=this.index[r],r+=e>>np&Wwe,r=this.index[r],r=(r<<Zj)+(e&e5),this.data[r];if(e<=1114111)return this.data[this.highValueIndex]}return this.errorValue},t}(),J7="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",Zwe=typeof Uint8Array>"u"?[]:new Uint8Array(256);for(var GN=0;GN<J7.length;GN++)Zwe[J7.charCodeAt(GN)]=GN;var eNe=1,t5=2,r5=3,Z7=4,e9=5,tNe=7,t9=8,n5=9,a5=10,r9=11,n9=12,a9=13,s9=14,s5=15,rNe=function(t){for(var e=[],r=0,n=t.length;r<n;){var a=t.charCodeAt(r++);if(a>=55296&&a<=56319&&r<n){var s=t.charCodeAt(r++);(s&64512)===56320?e.push(((a&1023)<<10)+(s&1023)+65536):(e.push(a),r--)}else e.push(a)}return e},nNe=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];if(String.fromCodePoint)return String.fromCodePoint.apply(String,t);var r=t.length;if(!r)return"";for(var n=[],a=-1,s="";++a<r;){var i=t[a];i<=65535?n.push(i):(i-=65536,n.push((i>>10)+55296,i%1024+56320)),(a+1===r||n.length>16384)&&(s+=String.fromCharCode.apply(String,n),n.length=0)}return s},aNe=Ywe(Dwe),Iu="",i5="",sNe=function(t){return aNe.get(t)},iNe=function(t,e,r){var n=r-2,a=e[n],s=e[r-1],i=e[r];if(s===t5&&i===r5)return Iu;if(s===t5||s===r5||s===Z7||i===t5||i===r5||i===Z7)return i5;if(s===t9&&[t9,n5,r9,n9].indexOf(i)!==-1||(s===r9||s===n5)&&(i===n5||i===a5)||(s===n9||s===a5)&&i===a5||i===a9||i===e9||i===tNe||s===eNe)return Iu;if(s===a9&&i===s9){for(;a===e9;)a=e[--n];if(a===s9)return Iu}if(s===s5&&i===s5){for(var l=0;a===s5;)l++,a=e[--n];if(l%2===0)return Iu}return i5},oNe=function(t){var e=rNe(t),r=e.length,n=0,a=0,s=e.map(sNe);return{next:function(){if(n>=r)return{done:!0,value:null};for(var i=Iu;n<r&&(i=iNe(e,s,++n))===Iu;);if(i!==Iu||n===r){var l=nNe.apply(null,e.slice(a,n));return a=n,{value:l,done:!1}}return{done:!0,value:null}}}},lNe=function(t){for(var e=oNe(t),r=[],n;!(n=e.next()).done;)n.value&&r.push(n.value.slice());return r},cNe=function(t){var e=123;if(t.createRange){var r=t.createRange();if(r.getBoundingClientRect){var n=t.createElement("boundtest");n.style.height=e+"px",n.style.display="block",t.body.appendChild(n),r.selectNode(n);var a=r.getBoundingClientRect(),s=Math.round(a.height);if(t.body.removeChild(n),s===e)return!0}}return!1},uNe=function(t){var e=t.createElement("boundtest");e.style.width="50px",e.style.display="block",e.style.fontSize="12px",e.style.letterSpacing="0px",e.style.wordSpacing="0px",t.body.appendChild(e);var r=t.createRange();e.innerHTML=typeof"".repeat=="function"?"&#128104;".repeat(10):"";var n=e.firstChild,a=d4(n.data).map(function(c){return ai(c)}),s=0,i={},l=a.every(function(c,u){r.setStart(n,s),r.setEnd(n,s+c.length);var d=r.getBoundingClientRect();s+=c.length;var f=d.x>i.x||d.y>i.y;return i=d,u===0?!0:f});return t.body.removeChild(e),l},dNe=function(){return typeof new Image().crossOrigin<"u"},fNe=function(){return typeof new XMLHttpRequest().responseType=="string"},ANe=function(t){var e=new Image,r=t.createElement("canvas"),n=r.getContext("2d");if(!n)return!1;e.src="data:image/svg+xml,<svg xmlns='http://www.w3.org/2000/svg'></svg>";try{n.drawImage(e,0,0),r.toDataURL()}catch{return!1}return!0},i9=function(t){return t[0]===0&&t[1]===255&&t[2]===0&&t[3]===255},hNe=function(t){var e=t.createElement("canvas"),r=100;e.width=r,e.height=r;var n=e.getContext("2d");if(!n)return Promise.reject(!1);n.fillStyle="rgb(0, 255, 0)",n.fillRect(0,0,r,r);var a=new Image,s=e.toDataURL();a.src=s;var i=jT(r,r,0,0,a);return n.fillStyle="red",n.fillRect(0,0,r,r),o9(i).then(function(l){n.drawImage(l,0,0);var c=n.getImageData(0,0,r,r).data;n.fillStyle="red",n.fillRect(0,0,r,r);var u=t.createElement("div");return u.style.backgroundImage="url("+s+")",u.style.height=r+"px",i9(c)?o9(jT(r,r,0,0,u)):Promise.reject(!1)}).then(function(l){return n.drawImage(l,0,0),i9(n.getImageData(0,0,r,r).data)}).catch(function(){return!1})},jT=function(t,e,r,n,a){var s="http://www.w3.org/2000/svg",i=document.createElementNS(s,"svg"),l=document.createElementNS(s,"foreignObject");return i.setAttributeNS(null,"width",t.toString()),i.setAttributeNS(null,"height",e.toString()),l.setAttributeNS(null,"width","100%"),l.setAttributeNS(null,"height","100%"),l.setAttributeNS(null,"x",r.toString()),l.setAttributeNS(null,"y",n.toString()),l.setAttributeNS(null,"externalResourcesRequired","true"),i.appendChild(l),l.appendChild(a),i},o9=function(t){return new Promise(function(e,r){var n=new Image;n.onload=function(){return e(n)},n.onerror=r,n.src="data:image/svg+xml;charset=utf-8,"+encodeURIComponent(new XMLSerializer().serializeToString(t))})},Oo={get SUPPORT_RANGE_BOUNDS(){var t=cNe(document);return Object.defineProperty(Oo,"SUPPORT_RANGE_BOUNDS",{value:t}),t},get SUPPORT_WORD_BREAKING(){var t=Oo.SUPPORT_RANGE_BOUNDS&&uNe(document);return Object.defineProperty(Oo,"SUPPORT_WORD_BREAKING",{value:t}),t},get SUPPORT_SVG_DRAWING(){var t=ANe(document);return Object.defineProperty(Oo,"SUPPORT_SVG_DRAWING",{value:t}),t},get SUPPORT_FOREIGNOBJECT_DRAWING(){var t=typeof Array.from=="function"&&typeof window.fetch=="function"?hNe(document):Promise.resolve(!1);return Object.defineProperty(Oo,"SUPPORT_FOREIGNOBJECT_DRAWING",{value:t}),t},get SUPPORT_CORS_IMAGES(){var t=dNe();return Object.defineProperty(Oo,"SUPPORT_CORS_IMAGES",{value:t}),t},get SUPPORT_RESPONSE_TYPE(){var t=fNe();return Object.defineProperty(Oo,"SUPPORT_RESPONSE_TYPE",{value:t}),t},get SUPPORT_CORS_XHR(){var t="withCredentials"in new XMLHttpRequest;return Object.defineProperty(Oo,"SUPPORT_CORS_XHR",{value:t}),t},get SUPPORT_NATIVE_TEXT_SEGMENTATION(){var t=!!(typeof Intl<"u"&&Intl.Segmenter);return Object.defineProperty(Oo,"SUPPORT_NATIVE_TEXT_SEGMENTATION",{value:t}),t}},Gy=function(){function t(e,r){this.text=e,this.bounds=r}return t}(),mNe=function(t,e,r,n){var a=xNe(e,r),s=[],i=0;return a.forEach(function(l){if(r.textDecorationLine.length||l.trim().length>0)if(Oo.SUPPORT_RANGE_BOUNDS){var c=l9(n,i,l.length).getClientRects();if(c.length>1){var u=B6(l),d=0;u.forEach(function(h){s.push(new Gy(h,LA.fromDOMRectList(t,l9(n,d+i,h.length).getClientRects()))),d+=h.length})}else s.push(new Gy(l,LA.fromDOMRectList(t,c)))}else{var f=n.splitText(l.length);s.push(new Gy(l,pNe(t,n))),n=f}else Oo.SUPPORT_RANGE_BOUNDS||(n=n.splitText(l.length));i+=l.length}),s},pNe=function(t,e){var r=e.ownerDocument;if(r){var n=r.createElement("html2canvaswrapper");n.appendChild(e.cloneNode(!0));var a=e.parentNode;if(a){a.replaceChild(n,e);var s=u4(t,n);return n.firstChild&&a.replaceChild(n.firstChild,n),s}}return LA.EMPTY},l9=function(t,e,r){var n=t.ownerDocument;if(!n)throw new Error("Node has no owner document");var a=n.createRange();return a.setStart(t,e),a.setEnd(t,e+r),a},B6=function(t){if(Oo.SUPPORT_NATIVE_TEXT_SEGMENTATION){var e=new Intl.Segmenter(void 0,{granularity:"grapheme"});return Array.from(e.segment(t)).map(function(r){return r.segment})}return lNe(t)},gNe=function(t,e){if(Oo.SUPPORT_NATIVE_TEXT_SEGMENTATION){var r=new Intl.Segmenter(void 0,{granularity:"word"});return Array.from(r.segment(t)).map(function(n){return n.segment})}return yNe(t,e)},xNe=function(t,e){return e.letterSpacing!==0?B6(t):gNe(t,e)},vNe=[32,160,4961,65792,65793,4153,4241],yNe=function(t,e){for(var r=qye(t,{lineBreak:e.lineBreak,wordBreak:e.overflowWrap==="break-word"?"break-word":e.wordBreak}),n=[],a,s=function(){if(a.value){var i=a.value.slice(),l=d4(i),c="";l.forEach(function(u){vNe.indexOf(u)===-1?c+=ai(u):(c.length&&n.push(c),n.push(ai(u)),c="")}),c.length&&n.push(c)}};!(a=r.next()).done;)s();return n},bNe=function(){function t(e,r,n){this.text=wNe(r.data,n.textTransform),this.textBounds=mNe(e,this.text,n,r)}return t}(),wNe=function(t,e){switch(e){case 1:return t.toLowerCase();case 3:return t.replace(NNe,CNe);case 2:return t.toUpperCase();default:return t}},NNe=/(^|\s|:|-|\(|\))([a-z])/g,CNe=function(t,e,r){return t.length>0?e+r.toUpperCase():t},GZ=function(t){Vd(e,t);function e(r,n){var a=t.call(this,r,n)||this;return a.src=n.currentSrc||n.src,a.intrinsicWidth=n.naturalWidth,a.intrinsicHeight=n.naturalHeight,a.context.cache.addImage(a.src),a}return e}(Ff),qZ=function(t){Vd(e,t);function e(r,n){var a=t.call(this,r,n)||this;return a.canvas=n,a.intrinsicWidth=n.width,a.intrinsicHeight=n.height,a}return e}(Ff),zZ=function(t){Vd(e,t);function e(r,n){var a=t.call(this,r,n)||this,s=new XMLSerializer,i=u4(r,n);return n.setAttribute("width",i.width+"px"),n.setAttribute("height",i.height+"px"),a.svg="data:image/svg+xml,"+encodeURIComponent(s.serializeToString(n)),a.intrinsicWidth=n.width.baseVal.value,a.intrinsicHeight=n.height.baseVal.value,a.context.cache.addImage(a.svg),a}return e}(Ff),WZ=function(t){Vd(e,t);function e(r,n){var a=t.call(this,r,n)||this;return a.value=n.value,a}return e}(Ff),BT=function(t){Vd(e,t);function e(r,n){var a=t.call(this,r,n)||this;return a.start=n.start,a.reversed=typeof n.reversed=="boolean"&&n.reversed===!0,a}return e}(Ff),_Ne=[{type:15,flags:0,unit:"px",number:3}],ENe=[{type:16,flags:0,number:50}],SNe=function(t){return t.width>t.height?new LA(t.left+(t.width-t.height)/2,t.top,t.height,t.height):t.width<t.height?new LA(t.left,t.top+(t.height-t.width)/2,t.width,t.width):t},INe=function(t){var e=t.type===jNe?new Array(t.value.length+1).join(""):t.value;return e.length===0?t.placeholder||"":e},$E="checkbox",KE="radio",jNe="password",c9=707406591,P6=function(t){Vd(e,t);function e(r,n){var a=t.call(this,r,n)||this;switch(a.type=n.type.toLowerCase(),a.checked=n.checked,a.value=INe(n),(a.type===$E||a.type===KE)&&(a.styles.backgroundColor=3739148031,a.styles.borderTopColor=a.styles.borderRightColor=a.styles.borderBottomColor=a.styles.borderLeftColor=2779096575,a.styles.borderTopWidth=a.styles.borderRightWidth=a.styles.borderBottomWidth=a.styles.borderLeftWidth=1,a.styles.borderTopStyle=a.styles.borderRightStyle=a.styles.borderBottomStyle=a.styles.borderLeftStyle=1,a.styles.backgroundClip=[0],a.styles.backgroundOrigin=[0],a.bounds=SNe(a.bounds)),a.type){case $E:a.styles.borderTopRightRadius=a.styles.borderTopLeftRadius=a.styles.borderBottomRightRadius=a.styles.borderBottomLeftRadius=_Ne;break;case KE:a.styles.borderTopRightRadius=a.styles.borderTopLeftRadius=a.styles.borderBottomRightRadius=a.styles.borderBottomLeftRadius=ENe;break}return a}return e}(Ff),XZ=function(t){Vd(e,t);function e(r,n){var a=t.call(this,r,n)||this,s=n.options[n.selectedIndex||0];return a.value=s&&s.text||"",a}return e}(Ff),YZ=function(t){Vd(e,t);function e(r,n){var a=t.call(this,r,n)||this;return a.value=n.value,a}return e}(Ff),JZ=function(t){Vd(e,t);function e(r,n){var a=t.call(this,r,n)||this;a.src=n.src,a.width=parseInt(n.width,10)||0,a.height=parseInt(n.height,10)||0,a.backgroundColor=a.styles.backgroundColor;try{if(n.contentWindow&&n.contentWindow.document&&n.contentWindow.document.documentElement){a.tree=eee(r,n.contentWindow.document.documentElement);var s=n.contentWindow.document.documentElement?$y(r,getComputedStyle(n.contentWindow.document.documentElement).backgroundColor):_A.TRANSPARENT,i=n.contentWindow.document.body?$y(r,getComputedStyle(n.contentWindow.document.body).backgroundColor):_A.TRANSPARENT;a.backgroundColor=B0(s)?B0(i)?a.styles.backgroundColor:i:s}}catch{}return a}return e}(Ff),BNe=["OL","UL","MENU"],O_=function(t,e,r,n){for(var a=e.firstChild,s=void 0;a;a=s)if(s=a.nextSibling,tee(a)&&a.data.trim().length>0)r.textNodes.push(new bNe(t,a,r.styles));else if(yx(a))if(see(a)&&a.assignedNodes)a.assignedNodes().forEach(function(l){return O_(t,l,r,n)});else{var i=ZZ(t,a);i.styles.isVisible()&&(PNe(a,i,n)?i.flags|=4:TNe(i.styles)&&(i.flags|=2),BNe.indexOf(a.tagName)!==-1&&(i.flags|=8),r.elements.push(i),a.slot,a.shadowRoot?O_(t,a.shadowRoot,i,n):!GE(a)&&!ree(a)&&!qE(a)&&O_(t,a,i,n))}},ZZ=function(t,e){return TT(e)?new GZ(t,e):nee(e)?new qZ(t,e):ree(e)?new zZ(t,e):kNe(e)?new WZ(t,e):FNe(e)?new BT(t,e):ONe(e)?new P6(t,e):qE(e)?new XZ(t,e):GE(e)?new YZ(t,e):aee(e)?new JZ(t,e):new Ff(t,e)},eee=function(t,e){var r=ZZ(t,e);return r.flags|=4,O_(t,e,r,r),r},PNe=function(t,e,r){return e.styles.isPositionedWithZIndex()||e.styles.opacity<1||e.styles.isTransformed()||T6(t)&&r.styles.isTransparent()},TNe=function(t){return t.isPositioned()||t.isFloating()},tee=function(t){return t.nodeType===Node.TEXT_NODE},yx=function(t){return t.nodeType===Node.ELEMENT_NODE},PT=function(t){return yx(t)&&typeof t.style<"u"&&!D_(t)},D_=function(t){return typeof t.className=="object"},kNe=function(t){return t.tagName==="LI"},FNe=function(t){return t.tagName==="OL"},ONe=function(t){return t.tagName==="INPUT"},DNe=function(t){return t.tagName==="HTML"},ree=function(t){return t.tagName==="svg"},T6=function(t){return t.tagName==="BODY"},nee=function(t){return t.tagName==="CANVAS"},u9=function(t){return t.tagName==="VIDEO"},TT=function(t){return t.tagName==="IMG"},aee=function(t){return t.tagName==="IFRAME"},d9=function(t){return t.tagName==="STYLE"},RNe=function(t){return t.tagName==="SCRIPT"},GE=function(t){return t.tagName==="TEXTAREA"},qE=function(t){return t.tagName==="SELECT"},see=function(t){return t.tagName==="SLOT"},f9=function(t){return t.tagName.indexOf("-")>0},MNe=function(){function t(){this.counters={}}return t.prototype.getCounterValue=function(e){var r=this.counters[e];return r&&r.length?r[r.length-1]:1},t.prototype.getCounterValues=function(e){var r=this.counters[e];return r||[]},t.prototype.pop=function(e){var r=this;e.forEach(function(n){return r.counters[n].pop()})},t.prototype.parse=function(e){var r=this,n=e.counterIncrement,a=e.counterReset,s=!0;n!==null&&n.forEach(function(l){var c=r.counters[l.counter];c&&l.increment!==0&&(s=!1,c.length||c.push(1),c[Math.max(0,c.length-1)]+=l.increment)});var i=[];return s&&a.forEach(function(l){var c=r.counters[l.counter];i.push(l.counter),c||(c=r.counters[l.counter]=[]),c.push(l.reset)}),i},t}(),A9={integers:[1e3,900,500,400,100,90,50,40,10,9,5,4,1],values:["M","CM","D","CD","C","XC","L","XL","X","IX","V","IV","I"]},h9={integers:[9e3,8e3,7e3,6e3,5e3,4e3,3e3,2e3,1e3,900,800,700,600,500,400,300,200,100,90,80,70,60,50,40,30,20,10,9,8,7,6,5,4,3,2,1],values:["","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","",""]},LNe={integers:[1e4,9e3,8e3,7e3,6e3,5e3,4e3,3e3,2e3,1e3,400,300,200,100,90,80,70,60,50,40,30,20,19,18,17,16,15,10,9,8,7,6,5,4,3,2,1],values:["","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","",""]},UNe={integers:[1e4,9e3,8e3,7e3,6e3,5e3,4e3,3e3,2e3,1e3,900,800,700,600,500,400,300,200,100,90,80,70,60,50,40,30,20,10,9,8,7,6,5,4,3,2,1],values:["","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","",""]},Pg=function(t,e,r,n,a,s){return t<e||t>r?Wb(t,a,s.length>0):n.integers.reduce(function(i,l,c){for(;t>=l;)t-=l,i+=n.values[c];return i},"")+s},iee=function(t,e,r,n){var a="";do r||t--,a=n(t)+a,t/=e;while(t*e>=e);return a},ei=function(t,e,r,n,a){var s=r-e+1;return(t<0?"-":"")+(iee(Math.abs(t),s,n,function(i){return ai(Math.floor(i%s)+e)})+a)},xm=function(t,e,r){r===void 0&&(r=". ");var n=e.length;return iee(Math.abs(t),n,!1,function(a){return e[Math.floor(a%n)]})+r},tx=1,Hh=2,$h=4,gy=8,zf=function(t,e,r,n,a,s){if(t<-9999||t>9999)return Wb(t,4,a.length>0);var i=Math.abs(t),l=a;if(i===0)return e[0]+l;for(var c=0;i>0&&c<=4;c++){var u=i%10;u===0&&Mi(s,tx)&&l!==""?l=e[u]+l:u>1||u===1&&c===0||u===1&&c===1&&Mi(s,Hh)||u===1&&c===1&&Mi(s,$h)&&t>100||u===1&&c>1&&Mi(s,gy)?l=e[u]+(c>0?r[c-1]:"")+l:u===1&&c>0&&(l=r[c-1]+l),i=Math.floor(i/10)}return(t<0?n:"")+l},m9="",p9="",g9="",o5="",Wb=function(t,e,r){var n=r?". ":"",a=r?"":"",s=r?", ":"",i=r?" ":"";switch(e){case 0:return""+i;case 1:return""+i;case 2:return""+i;case 5:var l=ei(t,48,57,!0,n);return l.length<4?"0"+l:l;case 4:return xm(t,"",a);case 6:return Pg(t,1,3999,A9,3,n).toLowerCase();case 7:return Pg(t,1,3999,A9,3,n);case 8:return ei(t,945,969,!1,n);case 9:return ei(t,97,122,!1,n);case 10:return ei(t,65,90,!1,n);case 11:return ei(t,1632,1641,!0,n);case 12:case 49:return Pg(t,1,9999,h9,3,n);case 35:return Pg(t,1,9999,h9,3,n).toLowerCase();case 13:return ei(t,2534,2543,!0,n);case 14:case 30:return ei(t,6112,6121,!0,n);case 15:return xm(t,"",a);case 16:return xm(t,"",a);case 17:case 48:return zf(t,"",m9,"",a,Hh|$h|gy);case 47:return zf(t,"",p9,"",a,tx|Hh|$h|gy);case 42:return zf(t,"",m9,"",a,Hh|$h|gy);case 41:return zf(t,"",p9,"",a,tx|Hh|$h|gy);case 26:return zf(t,"","",g9,a,0);case 25:return zf(t,"","",g9,a,tx|Hh|$h);case 31:return zf(t,"","",o5,s,tx|Hh|$h);case 33:return zf(t,"","",o5,s,0);case 32:return zf(t,"","",o5,s,tx|Hh|$h);case 18:return ei(t,2406,2415,!0,n);case 20:return Pg(t,1,19999,UNe,3,n);case 21:return ei(t,2790,2799,!0,n);case 22:return ei(t,2662,2671,!0,n);case 22:return Pg(t,1,10999,LNe,3,n);case 23:return xm(t,"");case 24:return xm(t,"");case 27:return ei(t,3302,3311,!0,n);case 28:return xm(t,"",a);case 29:return xm(t,"",a);case 34:return ei(t,3792,3801,!0,n);case 37:return ei(t,6160,6169,!0,n);case 38:return ei(t,4160,4169,!0,n);case 39:return ei(t,2918,2927,!0,n);case 40:return ei(t,1776,1785,!0,n);case 43:return ei(t,3046,3055,!0,n);case 44:return ei(t,3174,3183,!0,n);case 45:return ei(t,3664,3673,!0,n);case 46:return ei(t,3872,3881,!0,n);case 3:default:return ei(t,48,57,!0,n)}},oee="data-html2canvas-ignore",x9=function(){function t(e,r,n){if(this.context=e,this.options=n,this.scrolledElements=[],this.referenceElement=r,this.counters=new MNe,this.quoteDepth=0,!r.ownerDocument)throw new Error("Cloned element does not have an owner document");this.documentElement=this.cloneNode(r.ownerDocument.documentElement,!1)}return t.prototype.toIFrame=function(e,r){var n=this,a=QNe(e,r);if(!a.contentWindow)return Promise.reject("Unable to find iframe window");var s=e.defaultView.pageXOffset,i=e.defaultView.pageYOffset,l=a.contentWindow,c=l.document,u=$Ne(a).then(function(){return Tl(n,void 0,void 0,function(){var d,f;return ll(this,function(h){switch(h.label){case 0:return this.scrolledElements.forEach(zNe),l&&(l.scrollTo(r.left,r.top),/(iPad|iPhone|iPod)/g.test(navigator.userAgent)&&(l.scrollY!==r.top||l.scrollX!==r.left)&&(this.context.logger.warn("Unable to restore scroll position for cloned document"),this.context.windowBounds=this.context.windowBounds.add(l.scrollX-r.left,l.scrollY-r.top,0,0))),d=this.options.onclone,f=this.clonedReferenceElement,typeof f>"u"?[2,Promise.reject("Error finding the "+this.referenceElement.nodeName+" in the cloned document")]:c.fonts&&c.fonts.ready?[4,c.fonts.ready]:[3,2];case 1:h.sent(),h.label=2;case 2:return/(AppleWebKit)/g.test(navigator.userAgent)?[4,HNe(c)]:[3,4];case 3:h.sent(),h.label=4;case 4:return typeof d=="function"?[2,Promise.resolve().then(function(){return d(c,f)}).then(function(){return a})]:[2,a]}})})});return c.open(),c.write(GNe(document.doctype)+"<html></html>"),qNe(this.referenceElement.ownerDocument,s,i),c.replaceChild(c.adoptNode(this.documentElement),c.documentElement),c.close(),u},t.prototype.createElementClone=function(e){if(IT(e,2))debugger;if(nee(e))return this.createCanvasClone(e);if(u9(e))return this.createVideoClone(e);if(d9(e))return this.createStyleClone(e);var r=e.cloneNode(!1);return TT(r)&&(TT(e)&&e.currentSrc&&e.currentSrc!==e.src&&(r.src=e.currentSrc,r.srcset=""),r.loading==="lazy"&&(r.loading="eager")),f9(r)?this.createCustomElementClone(r):r},t.prototype.createCustomElementClone=function(e){var r=document.createElement("html2canvascustomelement");return l5(e.style,r),r},t.prototype.createStyleClone=function(e){try{var r=e.sheet;if(r&&r.cssRules){var n=[].slice.call(r.cssRules,0).reduce(function(s,i){return i&&typeof i.cssText=="string"?s+i.cssText:s},""),a=e.cloneNode(!1);return a.textContent=n,a}}catch(s){if(this.context.logger.error("Unable to access cssRules property",s),s.name!=="SecurityError")throw s}return e.cloneNode(!1)},t.prototype.createCanvasClone=function(e){var r;if(this.options.inlineImages&&e.ownerDocument){var n=e.ownerDocument.createElement("img");try{return n.src=e.toDataURL(),n}catch{this.context.logger.info("Unable to inline canvas contents, canvas is tainted",e)}}var a=e.cloneNode(!1);try{a.width=e.width,a.height=e.height;var s=e.getContext("2d"),i=a.getContext("2d");if(i)if(!this.options.allowTaint&&s)i.putImageData(s.getImageData(0,0,e.width,e.height),0,0);else{var l=(r=e.getContext("webgl2"))!==null&&r!==void 0?r:e.getContext("webgl");if(l){var c=l.getContextAttributes();(c==null?void 0:c.preserveDrawingBuffer)===!1&&this.context.logger.warn("Unable to clone WebGL context as it has preserveDrawingBuffer=false",e)}i.drawImage(e,0,0)}return a}catch{this.context.logger.info("Unable to clone canvas as it is tainted",e)}return a},t.prototype.createVideoClone=function(e){var r=e.ownerDocument.createElement("canvas");r.width=e.offsetWidth,r.height=e.offsetHeight;var n=r.getContext("2d");try{return n&&(n.drawImage(e,0,0,r.width,r.height),this.options.allowTaint||n.getImageData(0,0,r.width,r.height)),r}catch{this.context.logger.info("Unable to clone video as it is tainted",e)}var a=e.ownerDocument.createElement("canvas");return a.width=e.offsetWidth,a.height=e.offsetHeight,a},t.prototype.appendChildNode=function(e,r,n){(!yx(r)||!RNe(r)&&!r.hasAttribute(oee)&&(typeof this.options.ignoreElements!="function"||!this.options.ignoreElements(r)))&&(!this.options.copyStyles||!yx(r)||!d9(r))&&e.appendChild(this.cloneNode(r,n))},t.prototype.cloneChildNodes=function(e,r,n){for(var a=this,s=e.shadowRoot?e.shadowRoot.firstChild:e.firstChild;s;s=s.nextSibling)if(yx(s)&&see(s)&&typeof s.assignedNodes=="function"){var i=s.assignedNodes();i.length&&i.forEach(function(l){return a.appendChildNode(r,l,n)})}else this.appendChildNode(r,s,n)},t.prototype.cloneNode=function(e,r){if(tee(e))return document.createTextNode(e.data);if(!e.ownerDocument)return e.cloneNode(!1);var n=e.ownerDocument.defaultView;if(n&&yx(e)&&(PT(e)||D_(e))){var a=this.createElementClone(e);a.style.transitionProperty="none";var s=n.getComputedStyle(e),i=n.getComputedStyle(e,":before"),l=n.getComputedStyle(e,":after");this.referenceElement===e&&PT(a)&&(this.clonedReferenceElement=a),T6(a)&&YNe(a);var c=this.counters.parse(new W7(this.context,s)),u=this.resolvePseudoContent(e,a,i,qy.BEFORE);f9(e)&&(r=!0),u9(e)||this.cloneChildNodes(e,a,r),u&&a.insertBefore(u,a.firstChild);var d=this.resolvePseudoContent(e,a,l,qy.AFTER);return d&&a.appendChild(d),this.counters.pop(c),(s&&(this.options.copyStyles||D_(e))&&!aee(e)||r)&&l5(s,a),(e.scrollTop!==0||e.scrollLeft!==0)&&this.scrolledElements.push([a,e.scrollLeft,e.scrollTop]),(GE(e)||qE(e))&&(GE(a)||qE(a))&&(a.value=e.value),a}return e.cloneNode(!1)},t.prototype.resolvePseudoContent=function(e,r,n,a){var s=this;if(n){var i=n.content,l=r.ownerDocument;if(!(!l||!i||i==="none"||i==="-moz-alt-content"||n.display==="none")){this.counters.parse(new W7(this.context,n));var c=new kwe(this.context,n),u=l.createElement("html2canvaspseudoelement");l5(n,u),c.content.forEach(function(f){if(f.type===0)u.appendChild(l.createTextNode(f.value));else if(f.type===22){var h=l.createElement("img");h.src=f.value,h.style.opacity="1",u.appendChild(h)}else if(f.type===18){if(f.name==="attr"){var A=f.values.filter(ja);A.length&&u.appendChild(l.createTextNode(e.getAttribute(A[0].value)||""))}else if(f.name==="counter"){var m=f.values.filter(lv),p=m[0],g=m[1];if(p&&ja(p)){var x=s.counters.getCounterValue(p.value),y=g&&ja(g)?ST.parse(s.context,g.value):3;u.appendChild(l.createTextNode(Wb(x,y,!1)))}}else if(f.name==="counters"){var b=f.values.filter(lv),p=b[0],w=b[1],g=b[2];if(p&&ja(p)){var j=s.counters.getCounterValues(p.value),I=g&&ja(g)?ST.parse(s.context,g.value):3,_=w&&w.type===0?w.value:"",E=j.map(function(P){return Wb(P,I,!1)}).join(_);u.appendChild(l.createTextNode(E))}}}else if(f.type===20)switch(f.value){case"open-quote":u.appendChild(l.createTextNode(z7(c.quotes,s.quoteDepth++,!0)));break;case"close-quote":u.appendChild(l.createTextNode(z7(c.quotes,--s.quoteDepth,!1)));break;default:u.appendChild(l.createTextNode(f.value))}}),u.className=kT+" "+FT;var d=a===qy.BEFORE?" "+kT:" "+FT;return D_(r)?r.className.baseValue+=d:r.className+=d,u}}},t.destroy=function(e){return e.parentNode?(e.parentNode.removeChild(e),!0):!1},t}(),qy;(function(t){t[t.BEFORE=0]="BEFORE",t[t.AFTER=1]="AFTER"})(qy||(qy={}));var QNe=function(t,e){var r=t.createElement("iframe");return r.className="html2canvas-container",r.style.visibility="hidden",r.style.position="fixed",r.style.left="-10000px",r.style.top="0px",r.style.border="0",r.width=e.width.toString(),r.height=e.height.toString(),r.scrolling="no",r.setAttribute(oee,"true"),t.body.appendChild(r),r},VNe=function(t){return new Promise(function(e){if(t.complete){e();return}if(!t.src){e();return}t.onload=e,t.onerror=e})},HNe=function(t){return Promise.all([].slice.call(t.images,0).map(VNe))},$Ne=function(t){return new Promise(function(e,r){var n=t.contentWindow;if(!n)return r("No window assigned for iframe");var a=n.document;n.onload=t.onload=function(){n.onload=t.onload=null;var s=setInterval(function(){a.body.childNodes.length>0&&a.readyState==="complete"&&(clearInterval(s),e(t))},50)}})},KNe=["all","d","content"],l5=function(t,e){for(var r=t.length-1;r>=0;r--){var n=t.item(r);KNe.indexOf(n)===-1&&e.style.setProperty(n,t.getPropertyValue(n))}return e},GNe=function(t){var e="";return t&&(e+="<!DOCTYPE ",t.name&&(e+=t.name),t.internalSubset&&(e+=t.internalSubset),t.publicId&&(e+='"'+t.publicId+'"'),t.systemId&&(e+='"'+t.systemId+'"'),e+=">"),e},qNe=function(t,e,r){t&&t.defaultView&&(e!==t.defaultView.pageXOffset||r!==t.defaultView.pageYOffset)&&t.defaultView.scrollTo(e,r)},zNe=function(t){var e=t[0],r=t[1],n=t[2];e.scrollLeft=r,e.scrollTop=n},WNe=":before",XNe=":after",kT="___html2canvas___pseudoelement_before",FT="___html2canvas___pseudoelement_after",v9=`{
    content: "" !important;
    display: none !important;
}`,YNe=function(t){JNe(t,"."+kT+WNe+v9+`
         .`+FT+XNe+v9)},JNe=function(t,e){var r=t.ownerDocument;if(r){var n=r.createElement("style");n.textContent=e,t.appendChild(n)}},lee=function(){function t(){}return t.getOrigin=function(e){var r=t._link;return r?(r.href=e,r.href=r.href,r.protocol+r.hostname+r.port):"about:blank"},t.isSameOrigin=function(e){return t.getOrigin(e)===t._origin},t.setContext=function(e){t._link=e.document.createElement("a"),t._origin=t.getOrigin(e.location.href)},t._origin="about:blank",t}(),ZNe=function(){function t(e,r){this.context=e,this._options=r,this._cache={}}return t.prototype.addImage=function(e){var r=Promise.resolve();return this.has(e)||(u5(e)||nCe(e))&&(this._cache[e]=this.loadImage(e)).catch(function(){}),r},t.prototype.match=function(e){return this._cache[e]},t.prototype.loadImage=function(e){return Tl(this,void 0,void 0,function(){var r,n,a,s,i=this;return ll(this,function(l){switch(l.label){case 0:return r=lee.isSameOrigin(e),n=!c5(e)&&this._options.useCORS===!0&&Oo.SUPPORT_CORS_IMAGES&&!r,a=!c5(e)&&!r&&!u5(e)&&typeof this._options.proxy=="string"&&Oo.SUPPORT_CORS_XHR&&!n,!r&&this._options.allowTaint===!1&&!c5(e)&&!u5(e)&&!a&&!n?[2]:(s=e,a?[4,this.proxy(s)]:[3,2]);case 1:s=l.sent(),l.label=2;case 2:return this.context.logger.debug("Added image "+e.substring(0,256)),[4,new Promise(function(c,u){var d=new Image;d.onload=function(){return c(d)},d.onerror=u,(aCe(s)||n)&&(d.crossOrigin="anonymous"),d.src=s,d.complete===!0&&setTimeout(function(){return c(d)},500),i._options.imageTimeout>0&&setTimeout(function(){return u("Timed out ("+i._options.imageTimeout+"ms) loading image")},i._options.imageTimeout)})];case 3:return[2,l.sent()]}})})},t.prototype.has=function(e){return typeof this._cache[e]<"u"},t.prototype.keys=function(){return Promise.resolve(Object.keys(this._cache))},t.prototype.proxy=function(e){var r=this,n=this._options.proxy;if(!n)throw new Error("No proxy defined");var a=e.substring(0,256);return new Promise(function(s,i){var l=Oo.SUPPORT_RESPONSE_TYPE?"blob":"text",c=new XMLHttpRequest;c.onload=function(){if(c.status===200)if(l==="text")s(c.response);else{var f=new FileReader;f.addEventListener("load",function(){return s(f.result)},!1),f.addEventListener("error",function(h){return i(h)},!1),f.readAsDataURL(c.response)}else i("Failed to proxy resource "+a+" with status code "+c.status)},c.onerror=i;var u=n.indexOf("?")>-1?"&":"?";if(c.open("GET",""+n+u+"url="+encodeURIComponent(e)+"&responseType="+l),l!=="text"&&c instanceof XMLHttpRequest&&(c.responseType=l),r._options.imageTimeout){var d=r._options.imageTimeout;c.timeout=d,c.ontimeout=function(){return i("Timed out ("+d+"ms) proxying "+a)}}c.send()})},t}(),eCe=/^data:image\/svg\+xml/i,tCe=/^data:image\/.*;base64,/i,rCe=/^data:image\/.*/i,nCe=function(t){return Oo.SUPPORT_SVG_DRAWING||!sCe(t)},c5=function(t){return rCe.test(t)},aCe=function(t){return tCe.test(t)},u5=function(t){return t.substr(0,4)==="blob"},sCe=function(t){return t.substr(-3).toLowerCase()==="svg"||eCe.test(t)},Pr=function(){function t(e,r){this.type=0,this.x=e,this.y=r}return t.prototype.add=function(e,r){return new t(this.x+e,this.y+r)},t}(),Tg=function(t,e,r){return new Pr(t.x+(e.x-t.x)*r,t.y+(e.y-t.y)*r)},qN=function(){function t(e,r,n,a){this.type=1,this.start=e,this.startControl=r,this.endControl=n,this.end=a}return t.prototype.subdivide=function(e,r){var n=Tg(this.start,this.startControl,e),a=Tg(this.startControl,this.endControl,e),s=Tg(this.endControl,this.end,e),i=Tg(n,a,e),l=Tg(a,s,e),c=Tg(i,l,e);return r?new t(this.start,n,i,c):new t(c,l,s,this.end)},t.prototype.add=function(e,r){return new t(this.start.add(e,r),this.startControl.add(e,r),this.endControl.add(e,r),this.end.add(e,r))},t.prototype.reverse=function(){return new t(this.end,this.endControl,this.startControl,this.start)},t}(),ku=function(t){return t.type===1},iCe=function(){function t(e){var r=e.styles,n=e.bounds,a=my(r.borderTopLeftRadius,n.width,n.height),s=a[0],i=a[1],l=my(r.borderTopRightRadius,n.width,n.height),c=l[0],u=l[1],d=my(r.borderBottomRightRadius,n.width,n.height),f=d[0],h=d[1],A=my(r.borderBottomLeftRadius,n.width,n.height),m=A[0],p=A[1],g=[];g.push((s+c)/n.width),g.push((m+f)/n.width),g.push((i+p)/n.height),g.push((u+h)/n.height);var x=Math.max.apply(Math,g);x>1&&(s/=x,i/=x,c/=x,u/=x,f/=x,h/=x,m/=x,p/=x);var y=n.width-c,b=n.height-h,w=n.width-f,j=n.height-p,I=r.borderTopWidth,_=r.borderRightWidth,E=r.borderBottomWidth,S=r.borderLeftWidth,k=Ha(r.paddingTop,e.bounds.width),P=Ha(r.paddingRight,e.bounds.width),T=Ha(r.paddingBottom,e.bounds.width),F=Ha(r.paddingLeft,e.bounds.width);this.topLeftBorderDoubleOuterBox=s>0||i>0?os(n.left+S/3,n.top+I/3,s-S/3,i-I/3,ua.TOP_LEFT):new Pr(n.left+S/3,n.top+I/3),this.topRightBorderDoubleOuterBox=s>0||i>0?os(n.left+y,n.top+I/3,c-_/3,u-I/3,ua.TOP_RIGHT):new Pr(n.left+n.width-_/3,n.top+I/3),this.bottomRightBorderDoubleOuterBox=f>0||h>0?os(n.left+w,n.top+b,f-_/3,h-E/3,ua.BOTTOM_RIGHT):new Pr(n.left+n.width-_/3,n.top+n.height-E/3),this.bottomLeftBorderDoubleOuterBox=m>0||p>0?os(n.left+S/3,n.top+j,m-S/3,p-E/3,ua.BOTTOM_LEFT):new Pr(n.left+S/3,n.top+n.height-E/3),this.topLeftBorderDoubleInnerBox=s>0||i>0?os(n.left+S*2/3,n.top+I*2/3,s-S*2/3,i-I*2/3,ua.TOP_LEFT):new Pr(n.left+S*2/3,n.top+I*2/3),this.topRightBorderDoubleInnerBox=s>0||i>0?os(n.left+y,n.top+I*2/3,c-_*2/3,u-I*2/3,ua.TOP_RIGHT):new Pr(n.left+n.width-_*2/3,n.top+I*2/3),this.bottomRightBorderDoubleInnerBox=f>0||h>0?os(n.left+w,n.top+b,f-_*2/3,h-E*2/3,ua.BOTTOM_RIGHT):new Pr(n.left+n.width-_*2/3,n.top+n.height-E*2/3),this.bottomLeftBorderDoubleInnerBox=m>0||p>0?os(n.left+S*2/3,n.top+j,m-S*2/3,p-E*2/3,ua.BOTTOM_LEFT):new Pr(n.left+S*2/3,n.top+n.height-E*2/3),this.topLeftBorderStroke=s>0||i>0?os(n.left+S/2,n.top+I/2,s-S/2,i-I/2,ua.TOP_LEFT):new Pr(n.left+S/2,n.top+I/2),this.topRightBorderStroke=s>0||i>0?os(n.left+y,n.top+I/2,c-_/2,u-I/2,ua.TOP_RIGHT):new Pr(n.left+n.width-_/2,n.top+I/2),this.bottomRightBorderStroke=f>0||h>0?os(n.left+w,n.top+b,f-_/2,h-E/2,ua.BOTTOM_RIGHT):new Pr(n.left+n.width-_/2,n.top+n.height-E/2),this.bottomLeftBorderStroke=m>0||p>0?os(n.left+S/2,n.top+j,m-S/2,p-E/2,ua.BOTTOM_LEFT):new Pr(n.left+S/2,n.top+n.height-E/2),this.topLeftBorderBox=s>0||i>0?os(n.left,n.top,s,i,ua.TOP_LEFT):new Pr(n.left,n.top),this.topRightBorderBox=c>0||u>0?os(n.left+y,n.top,c,u,ua.TOP_RIGHT):new Pr(n.left+n.width,n.top),this.bottomRightBorderBox=f>0||h>0?os(n.left+w,n.top+b,f,h,ua.BOTTOM_RIGHT):new Pr(n.left+n.width,n.top+n.height),this.bottomLeftBorderBox=m>0||p>0?os(n.left,n.top+j,m,p,ua.BOTTOM_LEFT):new Pr(n.left,n.top+n.height),this.topLeftPaddingBox=s>0||i>0?os(n.left+S,n.top+I,Math.max(0,s-S),Math.max(0,i-I),ua.TOP_LEFT):new Pr(n.left+S,n.top+I),this.topRightPaddingBox=c>0||u>0?os(n.left+Math.min(y,n.width-_),n.top+I,y>n.width+_?0:Math.max(0,c-_),Math.max(0,u-I),ua.TOP_RIGHT):new Pr(n.left+n.width-_,n.top+I),this.bottomRightPaddingBox=f>0||h>0?os(n.left+Math.min(w,n.width-S),n.top+Math.min(b,n.height-E),Math.max(0,f-_),Math.max(0,h-E),ua.BOTTOM_RIGHT):new Pr(n.left+n.width-_,n.top+n.height-E),this.bottomLeftPaddingBox=m>0||p>0?os(n.left+S,n.top+Math.min(j,n.height-E),Math.max(0,m-S),Math.max(0,p-E),ua.BOTTOM_LEFT):new Pr(n.left+S,n.top+n.height-E),this.topLeftContentBox=s>0||i>0?os(n.left+S+F,n.top+I+k,Math.max(0,s-(S+F)),Math.max(0,i-(I+k)),ua.TOP_LEFT):new Pr(n.left+S+F,n.top+I+k),this.topRightContentBox=c>0||u>0?os(n.left+Math.min(y,n.width+S+F),n.top+I+k,y>n.width+S+F?0:c-S+F,u-(I+k),ua.TOP_RIGHT):new Pr(n.left+n.width-(_+P),n.top+I+k),this.bottomRightContentBox=f>0||h>0?os(n.left+Math.min(w,n.width-(S+F)),n.top+Math.min(b,n.height+I+k),Math.max(0,f-(_+P)),h-(E+T),ua.BOTTOM_RIGHT):new Pr(n.left+n.width-(_+P),n.top+n.height-(E+T)),this.bottomLeftContentBox=m>0||p>0?os(n.left+S+F,n.top+j,Math.max(0,m-(S+F)),p-(E+T),ua.BOTTOM_LEFT):new Pr(n.left+S+F,n.top+n.height-(E+T))}return t}(),ua;(function(t){t[t.TOP_LEFT=0]="TOP_LEFT",t[t.TOP_RIGHT=1]="TOP_RIGHT",t[t.BOTTOM_RIGHT=2]="BOTTOM_RIGHT",t[t.BOTTOM_LEFT=3]="BOTTOM_LEFT"})(ua||(ua={}));var os=function(t,e,r,n,a){var s=4*((Math.sqrt(2)-1)/3),i=r*s,l=n*s,c=t+r,u=e+n;switch(a){case ua.TOP_LEFT:return new qN(new Pr(t,u),new Pr(t,u-l),new Pr(c-i,e),new Pr(c,e));case ua.TOP_RIGHT:return new qN(new Pr(t,e),new Pr(t+i,e),new Pr(c,u-l),new Pr(c,u));case ua.BOTTOM_RIGHT:return new qN(new Pr(c,e),new Pr(c,e+l),new Pr(t+i,u),new Pr(t,u));case ua.BOTTOM_LEFT:default:return new qN(new Pr(c,u),new Pr(c-i,u),new Pr(t,e+l),new Pr(t,e))}},zE=function(t){return[t.topLeftBorderBox,t.topRightBorderBox,t.bottomRightBorderBox,t.bottomLeftBorderBox]},oCe=function(t){return[t.topLeftContentBox,t.topRightContentBox,t.bottomRightContentBox,t.bottomLeftContentBox]},WE=function(t){return[t.topLeftPaddingBox,t.topRightPaddingBox,t.bottomRightPaddingBox,t.bottomLeftPaddingBox]},lCe=function(){function t(e,r,n){this.offsetX=e,this.offsetY=r,this.matrix=n,this.type=0,this.target=6}return t}(),zN=function(){function t(e,r){this.path=e,this.target=r,this.type=1}return t}(),cCe=function(){function t(e){this.opacity=e,this.type=2,this.target=6}return t}(),uCe=function(t){return t.type===0},cee=function(t){return t.type===1},dCe=function(t){return t.type===2},y9=function(t,e){return t.length===e.length?t.some(function(r,n){return r===e[n]}):!1},fCe=function(t,e,r,n,a){return t.map(function(s,i){switch(i){case 0:return s.add(e,r);case 1:return s.add(e+n,r);case 2:return s.add(e+n,r+a);case 3:return s.add(e,r+a)}return s})},uee=function(){function t(e){this.element=e,this.inlineLevel=[],this.nonInlineLevel=[],this.negativeZIndex=[],this.zeroOrAutoZIndexOrTransformedOrOpacity=[],this.positiveZIndex=[],this.nonPositionedFloats=[],this.nonPositionedInlineLevel=[]}return t}(),dee=function(){function t(e,r){if(this.container=e,this.parent=r,this.effects=[],this.curves=new iCe(this.container),this.container.styles.opacity<1&&this.effects.push(new cCe(this.container.styles.opacity)),this.container.styles.transform!==null){var n=this.container.bounds.left+this.container.styles.transformOrigin[0].number,a=this.container.bounds.top+this.container.styles.transformOrigin[1].number,s=this.container.styles.transform;this.effects.push(new lCe(n,a,s))}if(this.container.styles.overflowX!==0){var i=zE(this.curves),l=WE(this.curves);y9(i,l)?this.effects.push(new zN(i,6)):(this.effects.push(new zN(i,2)),this.effects.push(new zN(l,4)))}}return t.prototype.getEffects=function(e){for(var r=[2,3].indexOf(this.container.styles.position)===-1,n=this.parent,a=this.effects.slice(0);n;){var s=n.effects.filter(function(c){return!cee(c)});if(r||n.container.styles.position!==0||!n.parent){if(a.unshift.apply(a,s),r=[2,3].indexOf(n.container.styles.position)===-1,n.container.styles.overflowX!==0){var i=zE(n.curves),l=WE(n.curves);y9(i,l)||a.unshift(new zN(l,6))}}else a.unshift.apply(a,s);n=n.parent}return a.filter(function(c){return Mi(c.target,e)})},t}(),OT=function(t,e,r,n){t.container.elements.forEach(function(a){var s=Mi(a.flags,4),i=Mi(a.flags,2),l=new dee(a,t);Mi(a.styles.display,2048)&&n.push(l);var c=Mi(a.flags,8)?[]:n;if(s||i){var u=s||a.styles.isPositioned()?r:e,d=new uee(l);if(a.styles.isPositioned()||a.styles.opacity<1||a.styles.isTransformed()){var f=a.styles.zIndex.order;if(f<0){var h=0;u.negativeZIndex.some(function(m,p){return f>m.element.container.styles.zIndex.order?(h=p,!1):h>0}),u.negativeZIndex.splice(h,0,d)}else if(f>0){var A=0;u.positiveZIndex.some(function(m,p){return f>=m.element.container.styles.zIndex.order?(A=p+1,!1):A>0}),u.positiveZIndex.splice(A,0,d)}else u.zeroOrAutoZIndexOrTransformedOrOpacity.push(d)}else a.styles.isFloating()?u.nonPositionedFloats.push(d):u.nonPositionedInlineLevel.push(d);OT(l,d,s?d:r,c)}else a.styles.isInlineLevel()?e.inlineLevel.push(l):e.nonInlineLevel.push(l),OT(l,e,r,c);Mi(a.flags,8)&&fee(a,c)})},fee=function(t,e){for(var r=t instanceof BT?t.start:1,n=t instanceof BT?t.reversed:!1,a=0;a<e.length;a++){var s=e[a];s.container instanceof WZ&&typeof s.container.value=="number"&&s.container.value!==0&&(r=s.container.value),s.listValue=Wb(r,s.container.styles.listStyleType,!0),r+=n?-1:1}},ACe=function(t){var e=new dee(t,null),r=new uee(e),n=[];return OT(e,r,r,n),fee(e.container,n),r},b9=function(t,e){switch(e){case 0:return Ru(t.topLeftBorderBox,t.topLeftPaddingBox,t.topRightBorderBox,t.topRightPaddingBox);case 1:return Ru(t.topRightBorderBox,t.topRightPaddingBox,t.bottomRightBorderBox,t.bottomRightPaddingBox);case 2:return Ru(t.bottomRightBorderBox,t.bottomRightPaddingBox,t.bottomLeftBorderBox,t.bottomLeftPaddingBox);case 3:default:return Ru(t.bottomLeftBorderBox,t.bottomLeftPaddingBox,t.topLeftBorderBox,t.topLeftPaddingBox)}},hCe=function(t,e){switch(e){case 0:return Ru(t.topLeftBorderBox,t.topLeftBorderDoubleOuterBox,t.topRightBorderBox,t.topRightBorderDoubleOuterBox);case 1:return Ru(t.topRightBorderBox,t.topRightBorderDoubleOuterBox,t.bottomRightBorderBox,t.bottomRightBorderDoubleOuterBox);case 2:return Ru(t.bottomRightBorderBox,t.bottomRightBorderDoubleOuterBox,t.bottomLeftBorderBox,t.bottomLeftBorderDoubleOuterBox);case 3:default:return Ru(t.bottomLeftBorderBox,t.bottomLeftBorderDoubleOuterBox,t.topLeftBorderBox,t.topLeftBorderDoubleOuterBox)}},mCe=function(t,e){switch(e){case 0:return Ru(t.topLeftBorderDoubleInnerBox,t.topLeftPaddingBox,t.topRightBorderDoubleInnerBox,t.topRightPaddingBox);case 1:return Ru(t.topRightBorderDoubleInnerBox,t.topRightPaddingBox,t.bottomRightBorderDoubleInnerBox,t.bottomRightPaddingBox);case 2:return Ru(t.bottomRightBorderDoubleInnerBox,t.bottomRightPaddingBox,t.bottomLeftBorderDoubleInnerBox,t.bottomLeftPaddingBox);case 3:default:return Ru(t.bottomLeftBorderDoubleInnerBox,t.bottomLeftPaddingBox,t.topLeftBorderDoubleInnerBox,t.topLeftPaddingBox)}},pCe=function(t,e){switch(e){case 0:return WN(t.topLeftBorderStroke,t.topRightBorderStroke);case 1:return WN(t.topRightBorderStroke,t.bottomRightBorderStroke);case 2:return WN(t.bottomRightBorderStroke,t.bottomLeftBorderStroke);case 3:default:return WN(t.bottomLeftBorderStroke,t.topLeftBorderStroke)}},WN=function(t,e){var r=[];return ku(t)?r.push(t.subdivide(.5,!1)):r.push(t),ku(e)?r.push(e.subdivide(.5,!0)):r.push(e),r},Ru=function(t,e,r,n){var a=[];return ku(t)?a.push(t.subdivide(.5,!1)):a.push(t),ku(r)?a.push(r.subdivide(.5,!0)):a.push(r),ku(n)?a.push(n.subdivide(.5,!0).reverse()):a.push(n),ku(e)?a.push(e.subdivide(.5,!1).reverse()):a.push(e),a},Aee=function(t){var e=t.bounds,r=t.styles;return e.add(r.borderLeftWidth,r.borderTopWidth,-(r.borderRightWidth+r.borderLeftWidth),-(r.borderTopWidth+r.borderBottomWidth))},XE=function(t){var e=t.styles,r=t.bounds,n=Ha(e.paddingLeft,r.width),a=Ha(e.paddingRight,r.width),s=Ha(e.paddingTop,r.width),i=Ha(e.paddingBottom,r.width);return r.add(n+e.borderLeftWidth,s+e.borderTopWidth,-(e.borderRightWidth+e.borderLeftWidth+n+a),-(e.borderTopWidth+e.borderBottomWidth+s+i))},gCe=function(t,e){return t===0?e.bounds:t===2?XE(e):Aee(e)},xCe=function(t,e){return t===0?e.bounds:t===2?XE(e):Aee(e)},d5=function(t,e,r){var n=gCe(rx(t.styles.backgroundOrigin,e),t),a=xCe(rx(t.styles.backgroundClip,e),t),s=vCe(rx(t.styles.backgroundSize,e),r,n),i=s[0],l=s[1],c=my(rx(t.styles.backgroundPosition,e),n.width-i,n.height-l),u=yCe(rx(t.styles.backgroundRepeat,e),c,s,n,a),d=Math.round(n.left+c[0]),f=Math.round(n.top+c[1]);return[u,d,f,i,l]},kg=function(t){return ja(t)&&t.value===Mx.AUTO},XN=function(t){return typeof t=="number"},vCe=function(t,e,r){var n=e[0],a=e[1],s=e[2],i=t[0],l=t[1];if(!i)return[0,0];if(vi(i)&&l&&vi(l))return[Ha(i,r.width),Ha(l,r.height)];var c=XN(s);if(ja(i)&&(i.value===Mx.CONTAIN||i.value===Mx.COVER)){if(XN(s)){var u=r.width/r.height;return u<s!=(i.value===Mx.COVER)?[r.width,r.width/s]:[r.height*s,r.height]}return[r.width,r.height]}var d=XN(n),f=XN(a),h=d||f;if(kg(i)&&(!l||kg(l))){if(d&&f)return[n,a];if(!c&&!h)return[r.width,r.height];if(h&&c){var A=d?n:a*s,m=f?a:n/s;return[A,m]}var p=d?n:r.width,g=f?a:r.height;return[p,g]}if(c){var x=0,y=0;return vi(i)?x=Ha(i,r.width):vi(l)&&(y=Ha(l,r.height)),kg(i)?x=y*s:(!l||kg(l))&&(y=x/s),[x,y]}var b=null,w=null;if(vi(i)?b=Ha(i,r.width):l&&vi(l)&&(w=Ha(l,r.height)),b!==null&&(!l||kg(l))&&(w=d&&f?b/n*a:r.height),w!==null&&kg(i)&&(b=d&&f?w/a*n:r.width),b!==null&&w!==null)return[b,w];throw new Error("Unable to calculate background-size for element")},rx=function(t,e){var r=t[e];return typeof r>"u"?t[0]:r},yCe=function(t,e,r,n,a){var s=e[0],i=e[1],l=r[0],c=r[1];switch(t){case 2:return[new Pr(Math.round(n.left),Math.round(n.top+i)),new Pr(Math.round(n.left+n.width),Math.round(n.top+i)),new Pr(Math.round(n.left+n.width),Math.round(c+n.top+i)),new Pr(Math.round(n.left),Math.round(c+n.top+i))];case 3:return[new Pr(Math.round(n.left+s),Math.round(n.top)),new Pr(Math.round(n.left+s+l),Math.round(n.top)),new Pr(Math.round(n.left+s+l),Math.round(n.height+n.top)),new Pr(Math.round(n.left+s),Math.round(n.height+n.top))];case 1:return[new Pr(Math.round(n.left+s),Math.round(n.top+i)),new Pr(Math.round(n.left+s+l),Math.round(n.top+i)),new Pr(Math.round(n.left+s+l),Math.round(n.top+i+c)),new Pr(Math.round(n.left+s),Math.round(n.top+i+c))];default:return[new Pr(Math.round(a.left),Math.round(a.top)),new Pr(Math.round(a.left+a.width),Math.round(a.top)),new Pr(Math.round(a.left+a.width),Math.round(a.height+a.top)),new Pr(Math.round(a.left),Math.round(a.height+a.top))]}},bCe="data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7",w9="Hidden Text",wCe=function(){function t(e){this._data={},this._document=e}return t.prototype.parseMetrics=function(e,r){var n=this._document.createElement("div"),a=this._document.createElement("img"),s=this._document.createElement("span"),i=this._document.body;n.style.visibility="hidden",n.style.fontFamily=e,n.style.fontSize=r,n.style.margin="0",n.style.padding="0",n.style.whiteSpace="nowrap",i.appendChild(n),a.src=bCe,a.width=1,a.height=1,a.style.margin="0",a.style.padding="0",a.style.verticalAlign="baseline",s.style.fontFamily=e,s.style.fontSize=r,s.style.margin="0",s.style.padding="0",s.appendChild(this._document.createTextNode(w9)),n.appendChild(s),n.appendChild(a);var l=a.offsetTop-s.offsetTop+2;n.removeChild(s),n.appendChild(this._document.createTextNode(w9)),n.style.lineHeight="normal",a.style.verticalAlign="super";var c=a.offsetTop-n.offsetTop+2;return i.removeChild(n),{baseline:l,middle:c}},t.prototype.getMetrics=function(e,r){var n=e+" "+r;return typeof this._data[n]>"u"&&(this._data[n]=this.parseMetrics(e,r)),this._data[n]},t}(),hee=function(){function t(e,r){this.context=e,this.options=r}return t}(),NCe=1e4,CCe=function(t){Vd(e,t);function e(r,n){var a=t.call(this,r,n)||this;return a._activeEffects=[],a.canvas=n.canvas?n.canvas:document.createElement("canvas"),a.ctx=a.canvas.getContext("2d"),n.canvas||(a.canvas.width=Math.floor(n.width*n.scale),a.canvas.height=Math.floor(n.height*n.scale),a.canvas.style.width=n.width+"px",a.canvas.style.height=n.height+"px"),a.fontMetrics=new wCe(document),a.ctx.scale(a.options.scale,a.options.scale),a.ctx.translate(-n.x,-n.y),a.ctx.textBaseline="bottom",a._activeEffects=[],a.context.logger.debug("Canvas renderer initialized ("+n.width+"x"+n.height+") with scale "+n.scale),a}return e.prototype.applyEffects=function(r){for(var n=this;this._activeEffects.length;)this.popEffect();r.forEach(function(a){return n.applyEffect(a)})},e.prototype.applyEffect=function(r){this.ctx.save(),dCe(r)&&(this.ctx.globalAlpha=r.opacity),uCe(r)&&(this.ctx.translate(r.offsetX,r.offsetY),this.ctx.transform(r.matrix[0],r.matrix[1],r.matrix[2],r.matrix[3],r.matrix[4],r.matrix[5]),this.ctx.translate(-r.offsetX,-r.offsetY)),cee(r)&&(this.path(r.path),this.ctx.clip()),this._activeEffects.push(r)},e.prototype.popEffect=function(){this._activeEffects.pop(),this.ctx.restore()},e.prototype.renderStack=function(r){return Tl(this,void 0,void 0,function(){var n;return ll(this,function(a){switch(a.label){case 0:return n=r.element.container.styles,n.isVisible()?[4,this.renderStackContent(r)]:[3,2];case 1:a.sent(),a.label=2;case 2:return[2]}})})},e.prototype.renderNode=function(r){return Tl(this,void 0,void 0,function(){return ll(this,function(n){switch(n.label){case 0:if(Mi(r.container.flags,16))debugger;return r.container.styles.isVisible()?[4,this.renderNodeBackgroundAndBorders(r)]:[3,3];case 1:return n.sent(),[4,this.renderNodeContent(r)];case 2:n.sent(),n.label=3;case 3:return[2]}})})},e.prototype.renderTextWithLetterSpacing=function(r,n,a){var s=this;if(n===0)this.ctx.fillText(r.text,r.bounds.left,r.bounds.top+a);else{var i=B6(r.text);i.reduce(function(l,c){return s.ctx.fillText(c,l,r.bounds.top+a),l+s.ctx.measureText(c).width},r.bounds.left)}},e.prototype.createFontStyle=function(r){var n=r.fontVariant.filter(function(i){return i==="normal"||i==="small-caps"}).join(""),a=jCe(r.fontFamily).join(", "),s=nw(r.fontSize)?""+r.fontSize.number+r.fontSize.unit:r.fontSize.number+"px";return[[r.fontStyle,n,r.fontWeight,s,a].join(" "),a,s]},e.prototype.renderTextNode=function(r,n){return Tl(this,void 0,void 0,function(){var a,s,i,l,c,u,d,f,h=this;return ll(this,function(A){return a=this.createFontStyle(n),s=a[0],i=a[1],l=a[2],this.ctx.font=s,this.ctx.direction=n.direction===1?"rtl":"ltr",this.ctx.textAlign="left",this.ctx.textBaseline="alphabetic",c=this.fontMetrics.getMetrics(i,l),u=c.baseline,d=c.middle,f=n.paintOrder,r.textBounds.forEach(function(m){f.forEach(function(p){switch(p){case 0:h.ctx.fillStyle=ro(n.color),h.renderTextWithLetterSpacing(m,n.letterSpacing,u);var g=n.textShadow;g.length&&m.text.trim().length&&(g.slice(0).reverse().forEach(function(x){h.ctx.shadowColor=ro(x.color),h.ctx.shadowOffsetX=x.offsetX.number*h.options.scale,h.ctx.shadowOffsetY=x.offsetY.number*h.options.scale,h.ctx.shadowBlur=x.blur.number,h.renderTextWithLetterSpacing(m,n.letterSpacing,u)}),h.ctx.shadowColor="",h.ctx.shadowOffsetX=0,h.ctx.shadowOffsetY=0,h.ctx.shadowBlur=0),n.textDecorationLine.length&&(h.ctx.fillStyle=ro(n.textDecorationColor||n.color),n.textDecorationLine.forEach(function(x){switch(x){case 1:h.ctx.fillRect(m.bounds.left,Math.round(m.bounds.top+u),m.bounds.width,1);break;case 2:h.ctx.fillRect(m.bounds.left,Math.round(m.bounds.top),m.bounds.width,1);break;case 3:h.ctx.fillRect(m.bounds.left,Math.ceil(m.bounds.top+d),m.bounds.width,1);break}}));break;case 1:n.webkitTextStrokeWidth&&m.text.trim().length&&(h.ctx.strokeStyle=ro(n.webkitTextStrokeColor),h.ctx.lineWidth=n.webkitTextStrokeWidth,h.ctx.lineJoin=window.chrome?"miter":"round",h.ctx.strokeText(m.text,m.bounds.left,m.bounds.top+u)),h.ctx.strokeStyle="",h.ctx.lineWidth=0,h.ctx.lineJoin="miter";break}})}),[2]})})},e.prototype.renderReplacedElement=function(r,n,a){if(a&&r.intrinsicWidth>0&&r.intrinsicHeight>0){var s=XE(r),i=WE(n);this.path(i),this.ctx.save(),this.ctx.clip(),this.ctx.drawImage(a,0,0,r.intrinsicWidth,r.intrinsicHeight,s.left,s.top,s.width,s.height),this.ctx.restore()}},e.prototype.renderNodeContent=function(r){return Tl(this,void 0,void 0,function(){var n,a,s,i,l,c,y,y,u,d,f,h,w,A,m,j,p,g,x,y,b,w,j;return ll(this,function(I){switch(I.label){case 0:this.applyEffects(r.getEffects(4)),n=r.container,a=r.curves,s=n.styles,i=0,l=n.textNodes,I.label=1;case 1:return i<l.length?(c=l[i],[4,this.renderTextNode(c,s)]):[3,4];case 2:I.sent(),I.label=3;case 3:return i++,[3,1];case 4:if(!(n instanceof GZ))return[3,8];I.label=5;case 5:return I.trys.push([5,7,,8]),[4,this.context.cache.match(n.src)];case 6:return y=I.sent(),this.renderReplacedElement(n,a,y),[3,8];case 7:return I.sent(),this.context.logger.error("Error loading image "+n.src),[3,8];case 8:if(n instanceof qZ&&this.renderReplacedElement(n,a,n.canvas),!(n instanceof zZ))return[3,12];I.label=9;case 9:return I.trys.push([9,11,,12]),[4,this.context.cache.match(n.svg)];case 10:return y=I.sent(),this.renderReplacedElement(n,a,y),[3,12];case 11:return I.sent(),this.context.logger.error("Error loading svg "+n.svg.substring(0,255)),[3,12];case 12:return n instanceof JZ&&n.tree?(u=new e(this.context,{scale:this.options.scale,backgroundColor:n.backgroundColor,x:0,y:0,width:n.width,height:n.height}),[4,u.render(n.tree)]):[3,14];case 13:d=I.sent(),n.width&&n.height&&this.ctx.drawImage(d,0,0,n.width,n.height,n.bounds.left,n.bounds.top,n.bounds.width,n.bounds.height),I.label=14;case 14:if(n instanceof P6&&(f=Math.min(n.bounds.width,n.bounds.height),n.type===$E?n.checked&&(this.ctx.save(),this.path([new Pr(n.bounds.left+f*.39363,n.bounds.top+f*.79),new Pr(n.bounds.left+f*.16,n.bounds.top+f*.5549),new Pr(n.bounds.left+f*.27347,n.bounds.top+f*.44071),new Pr(n.bounds.left+f*.39694,n.bounds.top+f*.5649),new Pr(n.bounds.left+f*.72983,n.bounds.top+f*.23),new Pr(n.bounds.left+f*.84,n.bounds.top+f*.34085),new Pr(n.bounds.left+f*.39363,n.bounds.top+f*.79)]),this.ctx.fillStyle=ro(c9),this.ctx.fill(),this.ctx.restore()):n.type===KE&&n.checked&&(this.ctx.save(),this.ctx.beginPath(),this.ctx.arc(n.bounds.left+f/2,n.bounds.top+f/2,f/4,0,Math.PI*2,!0),this.ctx.fillStyle=ro(c9),this.ctx.fill(),this.ctx.restore())),_Ce(n)&&n.value.length){switch(h=this.createFontStyle(s),w=h[0],A=h[1],m=this.fontMetrics.getMetrics(w,A).baseline,this.ctx.font=w,this.ctx.fillStyle=ro(s.color),this.ctx.textBaseline="alphabetic",this.ctx.textAlign=SCe(n.styles.textAlign),j=XE(n),p=0,n.styles.textAlign){case 1:p+=j.width/2;break;case 2:p+=j.width;break}g=j.add(p,0,0,-j.height/2+1),this.ctx.save(),this.path([new Pr(j.left,j.top),new Pr(j.left+j.width,j.top),new Pr(j.left+j.width,j.top+j.height),new Pr(j.left,j.top+j.height)]),this.ctx.clip(),this.renderTextWithLetterSpacing(new Gy(n.value,g),s.letterSpacing,m),this.ctx.restore(),this.ctx.textBaseline="alphabetic",this.ctx.textAlign="left"}if(!Mi(n.styles.display,2048))return[3,20];if(n.styles.listStyleImage===null)return[3,19];if(x=n.styles.listStyleImage,x.type!==0)return[3,18];y=void 0,b=x.url,I.label=15;case 15:return I.trys.push([15,17,,18]),[4,this.context.cache.match(b)];case 16:return y=I.sent(),this.ctx.drawImage(y,n.bounds.left-(y.width+10),n.bounds.top),[3,18];case 17:return I.sent(),this.context.logger.error("Error loading list-style-image "+b),[3,18];case 18:return[3,20];case 19:r.listValue&&n.styles.listStyleType!==-1&&(w=this.createFontStyle(s)[0],this.ctx.font=w,this.ctx.fillStyle=ro(s.color),this.ctx.textBaseline="middle",this.ctx.textAlign="right",j=new LA(n.bounds.left,n.bounds.top+Ha(n.styles.paddingTop,n.bounds.width),n.bounds.width,G7(s.lineHeight,s.fontSize.number)/2+1),this.renderTextWithLetterSpacing(new Gy(r.listValue,j),s.letterSpacing,G7(s.lineHeight,s.fontSize.number)/2+2),this.ctx.textBaseline="bottom",this.ctx.textAlign="left"),I.label=20;case 20:return[2]}})})},e.prototype.renderStackContent=function(r){return Tl(this,void 0,void 0,function(){var n,a,x,s,i,x,l,c,x,u,d,x,f,h,x,A,m,x,p,g,x;return ll(this,function(y){switch(y.label){case 0:if(Mi(r.element.container.flags,16))debugger;return[4,this.renderNodeBackgroundAndBorders(r.element)];case 1:y.sent(),n=0,a=r.negativeZIndex,y.label=2;case 2:return n<a.length?(x=a[n],[4,this.renderStack(x)]):[3,5];case 3:y.sent(),y.label=4;case 4:return n++,[3,2];case 5:return[4,this.renderNodeContent(r.element)];case 6:y.sent(),s=0,i=r.nonInlineLevel,y.label=7;case 7:return s<i.length?(x=i[s],[4,this.renderNode(x)]):[3,10];case 8:y.sent(),y.label=9;case 9:return s++,[3,7];case 10:l=0,c=r.nonPositionedFloats,y.label=11;case 11:return l<c.length?(x=c[l],[4,this.renderStack(x)]):[3,14];case 12:y.sent(),y.label=13;case 13:return l++,[3,11];case 14:u=0,d=r.nonPositionedInlineLevel,y.label=15;case 15:return u<d.length?(x=d[u],[4,this.renderStack(x)]):[3,18];case 16:y.sent(),y.label=17;case 17:return u++,[3,15];case 18:f=0,h=r.inlineLevel,y.label=19;case 19:return f<h.length?(x=h[f],[4,this.renderNode(x)]):[3,22];case 20:y.sent(),y.label=21;case 21:return f++,[3,19];case 22:A=0,m=r.zeroOrAutoZIndexOrTransformedOrOpacity,y.label=23;case 23:return A<m.length?(x=m[A],[4,this.renderStack(x)]):[3,26];case 24:y.sent(),y.label=25;case 25:return A++,[3,23];case 26:p=0,g=r.positiveZIndex,y.label=27;case 27:return p<g.length?(x=g[p],[4,this.renderStack(x)]):[3,30];case 28:y.sent(),y.label=29;case 29:return p++,[3,27];case 30:return[2]}})})},e.prototype.mask=function(r){this.ctx.beginPath(),this.ctx.moveTo(0,0),this.ctx.lineTo(this.canvas.width,0),this.ctx.lineTo(this.canvas.width,this.canvas.height),this.ctx.lineTo(0,this.canvas.height),this.ctx.lineTo(0,0),this.formatPath(r.slice(0).reverse()),this.ctx.closePath()},e.prototype.path=function(r){this.ctx.beginPath(),this.formatPath(r),this.ctx.closePath()},e.prototype.formatPath=function(r){var n=this;r.forEach(function(a,s){var i=ku(a)?a.start:a;s===0?n.ctx.moveTo(i.x,i.y):n.ctx.lineTo(i.x,i.y),ku(a)&&n.ctx.bezierCurveTo(a.startControl.x,a.startControl.y,a.endControl.x,a.endControl.y,a.end.x,a.end.y)})},e.prototype.renderRepeat=function(r,n,a,s){this.path(r),this.ctx.fillStyle=n,this.ctx.translate(a,s),this.ctx.fill(),this.ctx.translate(-a,-s)},e.prototype.resizeImage=function(r,n,a){var s;if(r.width===n&&r.height===a)return r;var i=(s=this.canvas.ownerDocument)!==null&&s!==void 0?s:document,l=i.createElement("canvas");l.width=Math.max(1,n),l.height=Math.max(1,a);var c=l.getContext("2d");return c.drawImage(r,0,0,r.width,r.height,0,0,n,a),l},e.prototype.renderBackgroundImage=function(r){return Tl(this,void 0,void 0,function(){var n,a,s,i,l,c;return ll(this,function(u){switch(u.label){case 0:n=r.styles.backgroundImage.length-1,a=function(d){var f,h,A,k,ue,fe,F,Y,E,m,k,ue,fe,F,Y,p,g,x,y,b,w,j,I,_,E,S,k,P,T,F,Y,he,ue,fe,me,ne,Pe,Ie,O,H,R,M;return ll(this,function(K){switch(K.label){case 0:if(d.type!==0)return[3,5];f=void 0,h=d.url,K.label=1;case 1:return K.trys.push([1,3,,4]),[4,s.context.cache.match(h)];case 2:return f=K.sent(),[3,4];case 3:return K.sent(),s.context.logger.error("Error loading background-image "+h),[3,4];case 4:return f&&(A=d5(r,n,[f.width,f.height,f.width/f.height]),k=A[0],ue=A[1],fe=A[2],F=A[3],Y=A[4],E=s.ctx.createPattern(s.resizeImage(f,F,Y),"repeat"),s.renderRepeat(k,E,ue,fe)),[3,6];case 5:u2e(d)?(m=d5(r,n,[null,null,null]),k=m[0],ue=m[1],fe=m[2],F=m[3],Y=m[4],p=s2e(d.angle,F,Y),g=p[0],x=p[1],y=p[2],b=p[3],w=p[4],j=document.createElement("canvas"),j.width=F,j.height=Y,I=j.getContext("2d"),_=I.createLinearGradient(x,b,y,w),$7(d.stops,g).forEach(function(W){return _.addColorStop(W.stop,ro(W.color))}),I.fillStyle=_,I.fillRect(0,0,F,Y),F>0&&Y>0&&(E=s.ctx.createPattern(j,"repeat"),s.renderRepeat(k,E,ue,fe))):d2e(d)&&(S=d5(r,n,[null,null,null]),k=S[0],P=S[1],T=S[2],F=S[3],Y=S[4],he=d.position.length===0?[S6]:d.position,ue=Ha(he[0],F),fe=Ha(he[he.length-1],Y),me=i2e(d,ue,fe,F,Y),ne=me[0],Pe=me[1],ne>0&&Pe>0&&(Ie=s.ctx.createRadialGradient(P+ue,T+fe,0,P+ue,T+fe,ne),$7(d.stops,ne*2).forEach(function(W){return Ie.addColorStop(W.stop,ro(W.color))}),s.path(k),s.ctx.fillStyle=Ie,ne!==Pe?(O=r.bounds.left+.5*r.bounds.width,H=r.bounds.top+.5*r.bounds.height,R=Pe/ne,M=1/R,s.ctx.save(),s.ctx.translate(O,H),s.ctx.transform(1,0,0,R,0,0),s.ctx.translate(-O,-H),s.ctx.fillRect(P,M*(T-H)+H,F,Y*M),s.ctx.restore()):s.ctx.fill())),K.label=6;case 6:return n--,[2]}})},s=this,i=0,l=r.styles.backgroundImage.slice(0).reverse(),u.label=1;case 1:return i<l.length?(c=l[i],[5,a(c)]):[3,4];case 2:u.sent(),u.label=3;case 3:return i++,[3,1];case 4:return[2]}})})},e.prototype.renderSolidBorder=function(r,n,a){return Tl(this,void 0,void 0,function(){return ll(this,function(s){return this.path(b9(a,n)),this.ctx.fillStyle=ro(r),this.ctx.fill(),[2]})})},e.prototype.renderDoubleBorder=function(r,n,a,s){return Tl(this,void 0,void 0,function(){var i,l;return ll(this,function(c){switch(c.label){case 0:return n<3?[4,this.renderSolidBorder(r,a,s)]:[3,2];case 1:return c.sent(),[2];case 2:return i=hCe(s,a),this.path(i),this.ctx.fillStyle=ro(r),this.ctx.fill(),l=mCe(s,a),this.path(l),this.ctx.fill(),[2]}})})},e.prototype.renderNodeBackgroundAndBorders=function(r){return Tl(this,void 0,void 0,function(){var n,a,s,i,l,c,u,d,f=this;return ll(this,function(h){switch(h.label){case 0:return this.applyEffects(r.getEffects(2)),n=r.container.styles,a=!B0(n.backgroundColor)||n.backgroundImage.length,s=[{style:n.borderTopStyle,color:n.borderTopColor,width:n.borderTopWidth},{style:n.borderRightStyle,color:n.borderRightColor,width:n.borderRightWidth},{style:n.borderBottomStyle,color:n.borderBottomColor,width:n.borderBottomWidth},{style:n.borderLeftStyle,color:n.borderLeftColor,width:n.borderLeftWidth}],i=ECe(rx(n.backgroundClip,0),r.curves),a||n.boxShadow.length?(this.ctx.save(),this.path(i),this.ctx.clip(),B0(n.backgroundColor)||(this.ctx.fillStyle=ro(n.backgroundColor),this.ctx.fill()),[4,this.renderBackgroundImage(r.container)]):[3,2];case 1:h.sent(),this.ctx.restore(),n.boxShadow.slice(0).reverse().forEach(function(A){f.ctx.save();var m=zE(r.curves),p=A.inset?0:NCe,g=fCe(m,-p+(A.inset?1:-1)*A.spread.number,(A.inset?1:-1)*A.spread.number,A.spread.number*(A.inset?-2:2),A.spread.number*(A.inset?-2:2));A.inset?(f.path(m),f.ctx.clip(),f.mask(g)):(f.mask(m),f.ctx.clip(),f.path(g)),f.ctx.shadowOffsetX=A.offsetX.number+p,f.ctx.shadowOffsetY=A.offsetY.number,f.ctx.shadowColor=ro(A.color),f.ctx.shadowBlur=A.blur.number,f.ctx.fillStyle=A.inset?ro(A.color):"rgba(0,0,0,1)",f.ctx.fill(),f.ctx.restore()}),h.label=2;case 2:l=0,c=0,u=s,h.label=3;case 3:return c<u.length?(d=u[c],d.style!==0&&!B0(d.color)&&d.width>0?d.style!==2?[3,5]:[4,this.renderDashedDottedBorder(d.color,d.width,l,r.curves,2)]:[3,11]):[3,13];case 4:return h.sent(),[3,11];case 5:return d.style!==3?[3,7]:[4,this.renderDashedDottedBorder(d.color,d.width,l,r.curves,3)];case 6:return h.sent(),[3,11];case 7:return d.style!==4?[3,9]:[4,this.renderDoubleBorder(d.color,d.width,l,r.curves)];case 8:return h.sent(),[3,11];case 9:return[4,this.renderSolidBorder(d.color,l,r.curves)];case 10:h.sent(),h.label=11;case 11:l++,h.label=12;case 12:return c++,[3,3];case 13:return[2]}})})},e.prototype.renderDashedDottedBorder=function(r,n,a,s,i){return Tl(this,void 0,void 0,function(){var l,c,u,d,f,h,A,m,p,g,x,y,b,w,j,I,j,I;return ll(this,function(_){return this.ctx.save(),l=pCe(s,a),c=b9(s,a),i===2&&(this.path(c),this.ctx.clip()),ku(c[0])?(u=c[0].start.x,d=c[0].start.y):(u=c[0].x,d=c[0].y),ku(c[1])?(f=c[1].end.x,h=c[1].end.y):(f=c[1].x,h=c[1].y),a===0||a===2?A=Math.abs(u-f):A=Math.abs(d-h),this.ctx.beginPath(),i===3?this.formatPath(l):this.formatPath(c.slice(0,2)),m=n<3?n*3:n*2,p=n<3?n*2:n,i===3&&(m=n,p=n),g=!0,A<=m*2?g=!1:A<=m*2+p?(x=A/(2*m+p),m*=x,p*=x):(y=Math.floor((A+p)/(m+p)),b=(A-y*m)/(y-1),w=(A-(y+1)*m)/y,p=w<=0||Math.abs(p-b)<Math.abs(p-w)?b:w),g&&(i===3?this.ctx.setLineDash([0,m+p]):this.ctx.setLineDash([m,p])),i===3?(this.ctx.lineCap="round",this.ctx.lineWidth=n):this.ctx.lineWidth=n*2+1.1,this.ctx.strokeStyle=ro(r),this.ctx.stroke(),this.ctx.setLineDash([]),i===2&&(ku(c[0])&&(j=c[3],I=c[0],this.ctx.beginPath(),this.formatPath([new Pr(j.end.x,j.end.y),new Pr(I.start.x,I.start.y)]),this.ctx.stroke()),ku(c[1])&&(j=c[1],I=c[2],this.ctx.beginPath(),this.formatPath([new Pr(j.end.x,j.end.y),new Pr(I.start.x,I.start.y)]),this.ctx.stroke())),this.ctx.restore(),[2]})})},e.prototype.render=function(r){return Tl(this,void 0,void 0,function(){var n;return ll(this,function(a){switch(a.label){case 0:return this.options.backgroundColor&&(this.ctx.fillStyle=ro(this.options.backgroundColor),this.ctx.fillRect(this.options.x,this.options.y,this.options.width,this.options.height)),n=ACe(r),[4,this.renderStack(n)];case 1:return a.sent(),this.applyEffects([]),[2,this.canvas]}})})},e}(hee),_Ce=function(t){return t instanceof YZ||t instanceof XZ?!0:t instanceof P6&&t.type!==KE&&t.type!==$E},ECe=function(t,e){switch(t){case 0:return zE(e);case 2:return oCe(e);case 1:default:return WE(e)}},SCe=function(t){switch(t){case 1:return"center";case 2:return"right";case 0:default:return"left"}},ICe=["-apple-system","system-ui"],jCe=function(t){return/iPhone OS 15_(0|1)/.test(window.navigator.userAgent)?t.filter(function(e){return ICe.indexOf(e)===-1}):t},BCe=function(t){Vd(e,t);function e(r,n){var a=t.call(this,r,n)||this;return a.canvas=n.canvas?n.canvas:document.createElement("canvas"),a.ctx=a.canvas.getContext("2d"),a.options=n,a.canvas.width=Math.floor(n.width*n.scale),a.canvas.height=Math.floor(n.height*n.scale),a.canvas.style.width=n.width+"px",a.canvas.style.height=n.height+"px",a.ctx.scale(a.options.scale,a.options.scale),a.ctx.translate(-n.x,-n.y),a.context.logger.debug("EXPERIMENTAL ForeignObject renderer initialized ("+n.width+"x"+n.height+" at "+n.x+","+n.y+") with scale "+n.scale),a}return e.prototype.render=function(r){return Tl(this,void 0,void 0,function(){var n,a;return ll(this,function(s){switch(s.label){case 0:return n=jT(this.options.width*this.options.scale,this.options.height*this.options.scale,this.options.scale,this.options.scale,r),[4,PCe(n)];case 1:return a=s.sent(),this.options.backgroundColor&&(this.ctx.fillStyle=ro(this.options.backgroundColor),this.ctx.fillRect(0,0,this.options.width*this.options.scale,this.options.height*this.options.scale)),this.ctx.drawImage(a,-this.options.x*this.options.scale,-this.options.y*this.options.scale),[2,this.canvas]}})})},e}(hee),PCe=function(t){return new Promise(function(e,r){var n=new Image;n.onload=function(){e(n)},n.onerror=r,n.src="data:image/svg+xml;charset=utf-8,"+encodeURIComponent(new XMLSerializer().serializeToString(t))})},TCe=function(){function t(e){var r=e.id,n=e.enabled;this.id=r,this.enabled=n,this.start=Date.now()}return t.prototype.debug=function(){for(var e=[],r=0;r<arguments.length;r++)e[r]=arguments[r];this.enabled&&(typeof window<"u"&&window.console&&typeof console.debug=="function"?console.debug.apply(console,IN([this.id,this.getTime()+"ms"],e)):this.info.apply(this,e))},t.prototype.getTime=function(){return Date.now()-this.start},t.prototype.info=function(){for(var e=[],r=0;r<arguments.length;r++)e[r]=arguments[r];this.enabled&&typeof window<"u"&&window.console&&typeof console.info=="function"&&console.info.apply(console,IN([this.id,this.getTime()+"ms"],e))},t.prototype.warn=function(){for(var e=[],r=0;r<arguments.length;r++)e[r]=arguments[r];this.enabled&&(typeof window<"u"&&window.console&&typeof console.warn=="function"?console.warn.apply(console,IN([this.id,this.getTime()+"ms"],e)):this.info.apply(this,e))},t.prototype.error=function(){for(var e=[],r=0;r<arguments.length;r++)e[r]=arguments[r];this.enabled&&(typeof window<"u"&&window.console&&typeof console.error=="function"?console.error.apply(console,IN([this.id,this.getTime()+"ms"],e)):this.info.apply(this,e))},t.instances={},t}(),kCe=function(){function t(e,r){var n;this.windowBounds=r,this.instanceName="#"+t.instanceCount++,this.logger=new TCe({id:this.instanceName,enabled:e.logging}),this.cache=(n=e.cache)!==null&&n!==void 0?n:new ZNe(this,e)}return t.instanceCount=1,t}(),rg=function(t,e){return e===void 0&&(e={}),FCe(t,e)};typeof window<"u"&&lee.setContext(window);var FCe=function(t,e){return Tl(void 0,void 0,void 0,function(){var r,n,a,s,i,l,c,u,d,f,h,A,m,p,g,x,y,b,w,j,_,I,_,E,S,k,P,T,F,Y,he,ue,fe,me,ne,Pe,Ie,O,H,R;return ll(this,function(M){switch(M.label){case 0:if(!t||typeof t!="object")return[2,Promise.reject("Invalid element provided as first argument")];if(r=t.ownerDocument,!r)throw new Error("Element is not attached to a Document");if(n=r.defaultView,!n)throw new Error("Document is not attached to a Window");return a={allowTaint:(E=e.allowTaint)!==null&&E!==void 0?E:!1,imageTimeout:(S=e.imageTimeout)!==null&&S!==void 0?S:15e3,proxy:e.proxy,useCORS:(k=e.useCORS)!==null&&k!==void 0?k:!1},s=hT({logging:(P=e.logging)!==null&&P!==void 0?P:!0,cache:e.cache},a),i={windowWidth:(T=e.windowWidth)!==null&&T!==void 0?T:n.innerWidth,windowHeight:(F=e.windowHeight)!==null&&F!==void 0?F:n.innerHeight,scrollX:(Y=e.scrollX)!==null&&Y!==void 0?Y:n.pageXOffset,scrollY:(he=e.scrollY)!==null&&he!==void 0?he:n.pageYOffset},l=new LA(i.scrollX,i.scrollY,i.windowWidth,i.windowHeight),c=new kCe(s,l),u=(ue=e.foreignObjectRendering)!==null&&ue!==void 0?ue:!1,d={allowTaint:(fe=e.allowTaint)!==null&&fe!==void 0?fe:!1,onclone:e.onclone,ignoreElements:e.ignoreElements,inlineImages:u,copyStyles:u},c.logger.debug("Starting document clone with size "+l.width+"x"+l.height+" scrolled to "+-l.left+","+-l.top),f=new x9(c,t,d),h=f.clonedReferenceElement,h?[4,f.toIFrame(r,l)]:[2,Promise.reject("Unable to find element in cloned iframe")];case 1:return A=M.sent(),m=T6(h)||DNe(h)?fye(h.ownerDocument):u4(c,h),p=m.width,g=m.height,x=m.left,y=m.top,b=OCe(c,h,e.backgroundColor),w={canvas:e.canvas,backgroundColor:b,scale:(ne=(me=e.scale)!==null&&me!==void 0?me:n.devicePixelRatio)!==null&&ne!==void 0?ne:1,x:((Pe=e.x)!==null&&Pe!==void 0?Pe:0)+x,y:((Ie=e.y)!==null&&Ie!==void 0?Ie:0)+y,width:(O=e.width)!==null&&O!==void 0?O:Math.ceil(p),height:(H=e.height)!==null&&H!==void 0?H:Math.ceil(g)},u?(c.logger.debug("Document cloned, using foreign object rendering"),_=new BCe(c,w),[4,_.render(h)]):[3,3];case 2:return j=M.sent(),[3,5];case 3:return c.logger.debug("Document cloned, element located at "+x+","+y+" with size "+p+"x"+g+" using computed rendering"),c.logger.debug("Starting DOM parsing"),I=eee(c,h),b===I.styles.backgroundColor&&(I.styles.backgroundColor=_A.TRANSPARENT),c.logger.debug("Starting renderer for element at "+w.x+","+w.y+" with size "+w.width+"x"+w.height),_=new CCe(c,w),[4,_.render(I)];case 4:j=M.sent(),M.label=5;case 5:return(!((R=e.removeContainer)!==null&&R!==void 0)||R)&&(x9.destroy(A)||c.logger.error("Cannot detach cloned iframe as it is not in the DOM anymore")),c.logger.debug("Finished rendering"),[2,j]}})})},OCe=function(t,e,r){var n=e.ownerDocument,a=n.documentElement?$y(t,getComputedStyle(n.documentElement).backgroundColor):_A.TRANSPARENT,s=n.body?$y(t,getComputedStyle(n.body).backgroundColor):_A.TRANSPARENT,i=typeof r=="string"?$y(t,r):r===null?_A.TRANSPARENT:4294967295;return e===n.documentElement?B0(a)?B0(s)?i:s:a:i};const k6=Object.freeze(Object.defineProperty({__proto__:null,default:rg},Symbol.toStringTag,{value:"Module"})),DCe="modulepreload",RCe=function(t){return"/"+t},N9={},EA=function(e,r,n){let a=Promise.resolve();if(r&&r.length>0){document.getElementsByTagName("link");const i=document.querySelector("meta[property=csp-nonce]"),l=(i==null?void 0:i.nonce)||(i==null?void 0:i.getAttribute("nonce"));a=Promise.allSettled(r.map(c=>{if(c=RCe(c),c in N9)return;N9[c]=!0;const u=c.endsWith(".css"),d=u?'[rel="stylesheet"]':"";if(document.querySelector(`link[href="${c}"]${d}`))return;const f=document.createElement("link");if(f.rel=u?"stylesheet":DCe,u||(f.as="script"),f.crossOrigin="",f.href=c,l&&f.setAttribute("nonce",l),document.head.appendChild(f),u)return new Promise((h,A)=>{f.addEventListener("load",h),f.addEventListener("error",()=>A(new Error(`Unable to preload CSS for ${c}`)))})}))}function s(i){const l=new Event("vite:preloadError",{cancelable:!0});if(l.payload=i,window.dispatchEvent(l),!l.defaultPrevented)throw i}return a.then(i=>{for(const l of i||[])l.status==="rejected"&&s(l.reason);return e().catch(s)})};function wa(t){"@babel/helpers - typeof";return wa=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},wa(t)}var Dd=Uint8Array,Kc=Uint16Array,F6=Int32Array,O6=new Dd([0,0,0,0,0,0,0,0,1,1,1,1,2,2,2,2,3,3,3,3,4,4,4,4,5,5,5,5,0,0,0,0]),D6=new Dd([0,0,0,0,1,1,2,2,3,3,4,4,5,5,6,6,7,7,8,8,9,9,10,10,11,11,12,12,13,13,0,0]),C9=new Dd([16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15]),mee=function(t,e){for(var r=new Kc(31),n=0;n<31;++n)r[n]=e+=1<<t[n-1];for(var a=new F6(r[30]),n=1;n<30;++n)for(var s=r[n];s<r[n+1];++s)a[s]=s-r[n]<<5|n;return{b:r,r:a}},pee=mee(O6,2),MCe=pee.b,DT=pee.r;MCe[28]=258,DT[258]=28;var LCe=mee(D6,0),_9=LCe.r,RT=new Kc(32768);for(var ts=0;ts<32768;++ts){var Fh=(ts&43690)>>1|(ts&21845)<<1;Fh=(Fh&52428)>>2|(Fh&13107)<<2,Fh=(Fh&61680)>>4|(Fh&3855)<<4,RT[ts]=((Fh&65280)>>8|(Fh&255)<<8)>>1}var zy=function(t,e,r){for(var n=t.length,a=0,s=new Kc(e);a<n;++a)t[a]&&++s[t[a]-1];var i=new Kc(e);for(a=1;a<e;++a)i[a]=i[a-1]+s[a-1]<<1;var l;if(r){l=new Kc(1<<e);var c=15-e;for(a=0;a<n;++a)if(t[a])for(var u=a<<4|t[a],d=e-t[a],f=i[t[a]-1]++<<d,h=f|(1<<d)-1;f<=h;++f)l[RT[f]>>c]=u}else for(l=new Kc(n),a=0;a<n;++a)t[a]&&(l[a]=RT[i[t[a]-1]++]>>15-t[a]);return l},Pp=new Dd(288);for(var ts=0;ts<144;++ts)Pp[ts]=8;for(var ts=144;ts<256;++ts)Pp[ts]=9;for(var ts=256;ts<280;++ts)Pp[ts]=7;for(var ts=280;ts<288;++ts)Pp[ts]=8;var YE=new Dd(32);for(var ts=0;ts<32;++ts)YE[ts]=5;var UCe=zy(Pp,9,0),QCe=zy(YE,5,0),gee=function(t){return(t+7)/8|0},VCe=function(t,e,r){return(r==null||r>t.length)&&(r=t.length),new Dd(t.subarray(e,r))},Wf=function(t,e,r){r<<=e&7;var n=e/8|0;t[n]|=r,t[n+1]|=r>>8},L1=function(t,e,r){r<<=e&7;var n=e/8|0;t[n]|=r,t[n+1]|=r>>8,t[n+2]|=r>>16},f5=function(t,e){for(var r=[],n=0;n<t.length;++n)t[n]&&r.push({s:n,f:t[n]});var a=r.length,s=r.slice();if(!a)return{t:vee,l:0};if(a==1){var i=new Dd(r[0].s+1);return i[r[0].s]=1,{t:i,l:1}}r.sort(function(j,I){return j.f-I.f}),r.push({s:-1,f:25001});var l=r[0],c=r[1],u=0,d=1,f=2;for(r[0]={s:-1,f:l.f+c.f,l,r:c};d!=a-1;)l=r[r[u].f<r[f].f?u++:f++],c=r[u!=d&&r[u].f<r[f].f?u++:f++],r[d++]={s:-1,f:l.f+c.f,l,r:c};for(var h=s[0].s,n=1;n<a;++n)s[n].s>h&&(h=s[n].s);var A=new Kc(h+1),m=MT(r[d-1],A,0);if(m>e){var n=0,p=0,g=m-e,x=1<<g;for(s.sort(function(I,_){return A[_.s]-A[I.s]||I.f-_.f});n<a;++n){var y=s[n].s;if(A[y]>e)p+=x-(1<<m-A[y]),A[y]=e;else break}for(p>>=g;p>0;){var b=s[n].s;A[b]<e?p-=1<<e-A[b]++-1:++n}for(;n>=0&&p;--n){var w=s[n].s;A[w]==e&&(--A[w],++p)}m=e}return{t:new Dd(A),l:m}},MT=function(t,e,r){return t.s==-1?Math.max(MT(t.l,e,r+1),MT(t.r,e,r+1)):e[t.s]=r},E9=function(t){for(var e=t.length;e&&!t[--e];);for(var r=new Kc(++e),n=0,a=t[0],s=1,i=function(c){r[n++]=c},l=1;l<=e;++l)if(t[l]==a&&l!=e)++s;else{if(!a&&s>2){for(;s>138;s-=138)i(32754);s>2&&(i(s>10?s-11<<5|28690:s-3<<5|12305),s=0)}else if(s>3){for(i(a),--s;s>6;s-=6)i(8304);s>2&&(i(s-3<<5|8208),s=0)}for(;s--;)i(a);s=1,a=t[l]}return{c:r.subarray(0,n),n:e}},U1=function(t,e){for(var r=0,n=0;n<e.length;++n)r+=t[n]*e[n];return r},xee=function(t,e,r){var n=r.length,a=gee(e+2);t[a]=n&255,t[a+1]=n>>8,t[a+2]=t[a]^255,t[a+3]=t[a+1]^255;for(var s=0;s<n;++s)t[a+s+4]=r[s];return(a+4+n)*8},S9=function(t,e,r,n,a,s,i,l,c,u,d){Wf(e,d++,r),++a[256];for(var f=f5(a,15),h=f.t,A=f.l,m=f5(s,15),p=m.t,g=m.l,x=E9(h),y=x.c,b=x.n,w=E9(p),j=w.c,I=w.n,_=new Kc(19),E=0;E<y.length;++E)++_[y[E]&31];for(var E=0;E<j.length;++E)++_[j[E]&31];for(var S=f5(_,7),k=S.t,P=S.l,T=19;T>4&&!k[C9[T-1]];--T);var F=u+5<<3,Y=U1(a,Pp)+U1(s,YE)+i,he=U1(a,h)+U1(s,p)+i+14+3*T+U1(_,k)+2*_[16]+3*_[17]+7*_[18];if(c>=0&&F<=Y&&F<=he)return xee(e,d,t.subarray(c,c+u));var ue,fe,me,ne;if(Wf(e,d,1+(he<Y)),d+=2,he<Y){ue=zy(h,A,0),fe=h,me=zy(p,g,0),ne=p;var Pe=zy(k,P,0);Wf(e,d,b-257),Wf(e,d+5,I-1),Wf(e,d+10,T-4),d+=14;for(var E=0;E<T;++E)Wf(e,d+3*E,k[C9[E]]);d+=3*T;for(var Ie=[y,j],O=0;O<2;++O)for(var H=Ie[O],E=0;E<H.length;++E){var R=H[E]&31;Wf(e,d,Pe[R]),d+=k[R],R>15&&(Wf(e,d,H[E]>>5&127),d+=H[E]>>12)}}else ue=UCe,fe=Pp,me=QCe,ne=YE;for(var E=0;E<l;++E){var M=n[E];if(M>255){var R=M>>18&31;L1(e,d,ue[R+257]),d+=fe[R+257],R>7&&(Wf(e,d,M>>23&31),d+=O6[R]);var K=M&31;L1(e,d,me[K]),d+=ne[K],K>3&&(L1(e,d,M>>5&8191),d+=D6[K])}else L1(e,d,ue[M]),d+=fe[M]}return L1(e,d,ue[256]),d+fe[256]},HCe=new F6([65540,131080,131088,131104,262176,1048704,1048832,2114560,2117632]),vee=new Dd(0),$Ce=function(t,e,r,n,a,s){var i=s.z||t.length,l=new Dd(n+i+5*(1+Math.ceil(i/7e3))+a),c=l.subarray(n,l.length-a),u=s.l,d=(s.r||0)&7;if(e){d&&(c[0]=s.r>>3);for(var f=HCe[e-1],h=f>>13,A=f&8191,m=(1<<r)-1,p=s.p||new Kc(32768),g=s.h||new Kc(m+1),x=Math.ceil(r/3),y=2*x,b=function(ie){return(t[ie]^t[ie+1]<<x^t[ie+2]<<y)&m},w=new F6(25e3),j=new Kc(288),I=new Kc(32),_=0,E=0,S=s.i||0,k=0,P=s.w||0,T=0;S+2<i;++S){var F=b(S),Y=S&32767,he=g[F];if(p[Y]=he,g[F]=Y,P<=S){var ue=i-S;if((_>7e3||k>24576)&&(ue>423||!u)){d=S9(t,c,0,w,j,I,E,k,T,S-T,d),k=_=E=0,T=S;for(var fe=0;fe<286;++fe)j[fe]=0;for(var fe=0;fe<30;++fe)I[fe]=0}var me=2,ne=0,Pe=A,Ie=Y-he&32767;if(ue>2&&F==b(S-Ie))for(var O=Math.min(h,ue)-1,H=Math.min(32767,S),R=Math.min(258,ue);Ie<=H&&--Pe&&Y!=he;){if(t[S+me]==t[S+me-Ie]){for(var M=0;M<R&&t[S+M]==t[S+M-Ie];++M);if(M>me){if(me=M,ne=Ie,M>O)break;for(var K=Math.min(Ie,M-2),W=0,fe=0;fe<K;++fe){var D=S-Ie+fe&32767,L=p[D],Z=D-L&32767;Z>W&&(W=Z,he=D)}}}Y=he,he=p[Y],Ie+=Y-he&32767}if(ne){w[k++]=268435456|DT[me]<<18|_9[ne];var ge=DT[me]&31,U=_9[ne]&31;E+=O6[ge]+D6[U],++j[257+ge],++I[U],P=S+me,++_}else w[k++]=t[S],++j[t[S]]}}for(S=Math.max(S,P);S<i;++S)w[k++]=t[S],++j[t[S]];d=S9(t,c,u,w,j,I,E,k,T,S-T,d),u||(s.r=d&7|c[d/8|0]<<3,d-=7,s.h=g,s.p=p,s.i=S,s.w=P)}else{for(var S=s.w||0;S<i+u;S+=65535){var Ge=S+65535;Ge>=i&&(c[d/8|0]=u,Ge=i),d=xee(c,d+1,t.subarray(S,Ge))}s.i=i}return VCe(l,0,n+gee(d)+a)},yee=function(){var t=1,e=0;return{p:function(r){for(var n=t,a=e,s=r.length|0,i=0;i!=s;){for(var l=Math.min(i+2655,s);i<l;++i)a+=n+=r[i];n=(n&65535)+15*(n>>16),a=(a&65535)+15*(a>>16)}t=n,e=a},d:function(){return t%=65521,e%=65521,(t&255)<<24|(t&65280)<<8|(e&255)<<8|e>>8}}},KCe=function(t,e,r,n,a){if(!a&&(a={l:1},e.dictionary)){var s=e.dictionary.subarray(-32768),i=new Dd(s.length+t.length);i.set(s),i.set(t,s.length),t=i,a.w=s.length}return $Ce(t,e.level==null?6:e.level,e.mem==null?a.l?Math.ceil(Math.max(8,Math.min(13,Math.log(t.length)))*1.5):20:12+e.mem,r,n,a)},bee=function(t,e,r){for(;r;++e)t[e]=r,r>>>=8},GCe=function(t,e){var r=e.level,n=r==0?0:r<6?1:r==9?3:2;if(t[0]=120,t[1]=n<<6|(e.dictionary&&32),t[1]|=31-(t[0]<<8|t[1])%31,e.dictionary){var a=yee();a.p(e.dictionary),bee(t,2,a.d())}};function LT(t,e){e||(e={});var r=yee();r.p(t);var n=KCe(t,e,e.dictionary?6:2,4);return GCe(n,e),bee(n,n.length-4,r.d()),n}var qCe=typeof TextDecoder<"u"&&new TextDecoder,zCe=0;try{qCe.decode(vee,{stream:!0}),zCe=1}catch{}function WCe(t){if(Array.isArray(t))return t}function XCe(t,e){var r=t==null?null:typeof Symbol<"u"&&t[Symbol.iterator]||t["@@iterator"];if(r!=null){var n,a,s,i,l=[],c=!0,u=!1;try{if(s=(r=r.call(t)).next,e!==0)for(;!(c=(n=s.call(r)).done)&&(l.push(n.value),l.length!==e);c=!0);}catch(d){u=!0,a=d}finally{try{if(!c&&r.return!=null&&(i=r.return(),Object(i)!==i))return}finally{if(u)throw a}}return l}}function I9(t,e){(e==null||e>t.length)&&(e=t.length);for(var r=0,n=Array(e);r<e;r++)n[r]=t[r];return n}function YCe(t,e){if(t){if(typeof t=="string")return I9(t,e);var r={}.toString.call(t).slice(8,-1);return r==="Object"&&t.constructor&&(r=t.constructor.name),r==="Map"||r==="Set"?Array.from(t):r==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?I9(t,e):void 0}}function JCe(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function j9(t,e){return WCe(t)||XCe(t,e)||YCe(t,e)||JCe()}function B9(t,e="utf8"){return new TextDecoder(e).decode(t)}const ZCe=new TextEncoder;function e_e(t){return ZCe.encode(t)}const t_e=1024*8,r_e=(()=>{const t=new Uint8Array(4),e=new Uint32Array(t.buffer);return!((e[0]=1)&t[0])})(),A5={int8:globalThis.Int8Array,uint8:globalThis.Uint8Array,int16:globalThis.Int16Array,uint16:globalThis.Uint16Array,int32:globalThis.Int32Array,uint32:globalThis.Uint32Array,uint64:globalThis.BigUint64Array,int64:globalThis.BigInt64Array,float32:globalThis.Float32Array,float64:globalThis.Float64Array};class R6{constructor(e=t_e,r={}){aa(this,"buffer");aa(this,"byteLength");aa(this,"byteOffset");aa(this,"length");aa(this,"offset");aa(this,"lastWrittenByte");aa(this,"littleEndian");aa(this,"_data");aa(this,"_mark");aa(this,"_marks");let n=!1;typeof e=="number"?e=new ArrayBuffer(e):(n=!0,this.lastWrittenByte=e.byteLength);const a=r.offset?r.offset>>>0:0,s=e.byteLength-a;let i=a;(ArrayBuffer.isView(e)||e instanceof R6)&&(e.byteLength!==e.buffer.byteLength&&(i=e.byteOffset+a),e=e.buffer),n?this.lastWrittenByte=s:this.lastWrittenByte=0,this.buffer=e,this.length=s,this.byteLength=s,this.byteOffset=i,this.offset=0,this.littleEndian=!0,this._data=new DataView(this.buffer,i,s),this._mark=0,this._marks=[]}available(e=1){return this.offset+e<=this.length}isLittleEndian(){return this.littleEndian}setLittleEndian(){return this.littleEndian=!0,this}isBigEndian(){return!this.littleEndian}setBigEndian(){return this.littleEndian=!1,this}skip(e=1){return this.offset+=e,this}back(e=1){return this.offset-=e,this}seek(e){return this.offset=e,this}mark(){return this._mark=this.offset,this}reset(){return this.offset=this._mark,this}pushMark(){return this._marks.push(this.offset),this}popMark(){const e=this._marks.pop();if(e===void 0)throw new Error("Mark stack empty");return this.seek(e),this}rewind(){return this.offset=0,this}ensureAvailable(e=1){if(!this.available(e)){const n=(this.offset+e)*2,a=new Uint8Array(n);a.set(new Uint8Array(this.buffer)),this.buffer=a.buffer,this.length=n,this.byteLength=n,this._data=new DataView(this.buffer)}return this}readBoolean(){return this.readUint8()!==0}readInt8(){return this._data.getInt8(this.offset++)}readUint8(){return this._data.getUint8(this.offset++)}readByte(){return this.readUint8()}readBytes(e=1){return this.readArray(e,"uint8")}readArray(e,r){const n=A5[r].BYTES_PER_ELEMENT*e,a=this.byteOffset+this.offset,s=this.buffer.slice(a,a+n);if(this.littleEndian===r_e&&r!=="uint8"&&r!=="int8"){const l=new Uint8Array(this.buffer.slice(a,a+n));l.reverse();const c=new A5[r](l.buffer);return this.offset+=n,c.reverse(),c}const i=new A5[r](s);return this.offset+=n,i}readInt16(){const e=this._data.getInt16(this.offset,this.littleEndian);return this.offset+=2,e}readUint16(){const e=this._data.getUint16(this.offset,this.littleEndian);return this.offset+=2,e}readInt32(){const e=this._data.getInt32(this.offset,this.littleEndian);return this.offset+=4,e}readUint32(){const e=this._data.getUint32(this.offset,this.littleEndian);return this.offset+=4,e}readFloat32(){const e=this._data.getFloat32(this.offset,this.littleEndian);return this.offset+=4,e}readFloat64(){const e=this._data.getFloat64(this.offset,this.littleEndian);return this.offset+=8,e}readBigInt64(){const e=this._data.getBigInt64(this.offset,this.littleEndian);return this.offset+=8,e}readBigUint64(){const e=this._data.getBigUint64(this.offset,this.littleEndian);return this.offset+=8,e}readChar(){return String.fromCharCode(this.readInt8())}readChars(e=1){let r="";for(let n=0;n<e;n++)r+=this.readChar();return r}readUtf8(e=1){return B9(this.readBytes(e))}decodeText(e=1,r="utf8"){return B9(this.readBytes(e),r)}writeBoolean(e){return this.writeUint8(e?255:0),this}writeInt8(e){return this.ensureAvailable(1),this._data.setInt8(this.offset++,e),this._updateLastWrittenByte(),this}writeUint8(e){return this.ensureAvailable(1),this._data.setUint8(this.offset++,e),this._updateLastWrittenByte(),this}writeByte(e){return this.writeUint8(e)}writeBytes(e){this.ensureAvailable(e.length);for(let r=0;r<e.length;r++)this._data.setUint8(this.offset++,e[r]);return this._updateLastWrittenByte(),this}writeInt16(e){return this.ensureAvailable(2),this._data.setInt16(this.offset,e,this.littleEndian),this.offset+=2,this._updateLastWrittenByte(),this}writeUint16(e){return this.ensureAvailable(2),this._data.setUint16(this.offset,e,this.littleEndian),this.offset+=2,this._updateLastWrittenByte(),this}writeInt32(e){return this.ensureAvailable(4),this._data.setInt32(this.offset,e,this.littleEndian),this.offset+=4,this._updateLastWrittenByte(),this}writeUint32(e){return this.ensureAvailable(4),this._data.setUint32(this.offset,e,this.littleEndian),this.offset+=4,this._updateLastWrittenByte(),this}writeFloat32(e){return this.ensureAvailable(4),this._data.setFloat32(this.offset,e,this.littleEndian),this.offset+=4,this._updateLastWrittenByte(),this}writeFloat64(e){return this.ensureAvailable(8),this._data.setFloat64(this.offset,e,this.littleEndian),this.offset+=8,this._updateLastWrittenByte(),this}writeBigInt64(e){return this.ensureAvailable(8),this._data.setBigInt64(this.offset,e,this.littleEndian),this.offset+=8,this._updateLastWrittenByte(),this}writeBigUint64(e){return this.ensureAvailable(8),this._data.setBigUint64(this.offset,e,this.littleEndian),this.offset+=8,this._updateLastWrittenByte(),this}writeChar(e){return this.writeUint8(e.charCodeAt(0))}writeChars(e){for(let r=0;r<e.length;r++)this.writeUint8(e.charCodeAt(r));return this}writeUtf8(e){return this.writeBytes(e_e(e))}toArray(){return new Uint8Array(this.buffer,this.byteOffset,this.lastWrittenByte)}getWrittenByteLength(){return this.lastWrittenByte-this.byteOffset}_updateLastWrittenByte(){this.offset>this.lastWrittenByte&&(this.lastWrittenByte=this.offset)}}function Mv(t){let e=t.length;for(;--e>=0;)t[e]=0}const n_e=3,a_e=258,wee=29,s_e=256,i_e=s_e+1+wee,Nee=30,o_e=512,l_e=new Array((i_e+2)*2);Mv(l_e);const c_e=new Array(Nee*2);Mv(c_e);const u_e=new Array(o_e);Mv(u_e);const d_e=new Array(a_e-n_e+1);Mv(d_e);const f_e=new Array(wee);Mv(f_e);const A_e=new Array(Nee);Mv(A_e);const h_e=(t,e,r,n)=>{let a=t&65535|0,s=t>>>16&65535|0,i=0;for(;r!==0;){i=r>2e3?2e3:r,r-=i;do a=a+e[n++]|0,s=s+a|0;while(--i);a%=65521,s%=65521}return a|s<<16|0};var UT=h_e;const m_e=()=>{let t,e=[];for(var r=0;r<256;r++){t=r;for(var n=0;n<8;n++)t=t&1?3988292384^t>>>1:t>>>1;e[r]=t}return e},p_e=new Uint32Array(m_e()),g_e=(t,e,r,n)=>{const a=p_e,s=n+r;t^=-1;for(let i=n;i<s;i++)t=t>>>8^a[(t^e[i])&255];return t^-1};var tf=g_e,QT={2:"need dictionary",1:"stream end",0:"","-1":"file error","-2":"stream error","-3":"data error","-4":"insufficient memory","-5":"buffer error","-6":"incompatible version"},Cee={Z_NO_FLUSH:0,Z_FINISH:4,Z_BLOCK:5,Z_TREES:6,Z_OK:0,Z_STREAM_END:1,Z_NEED_DICT:2,Z_STREAM_ERROR:-2,Z_DATA_ERROR:-3,Z_MEM_ERROR:-4,Z_BUF_ERROR:-5,Z_DEFLATED:8};const x_e=(t,e)=>Object.prototype.hasOwnProperty.call(t,e);var v_e=function(t){const e=Array.prototype.slice.call(arguments,1);for(;e.length;){const r=e.shift();if(r){if(typeof r!="object")throw new TypeError(r+"must be non-object");for(const n in r)x_e(r,n)&&(t[n]=r[n])}}return t},y_e=t=>{let e=0;for(let n=0,a=t.length;n<a;n++)e+=t[n].length;const r=new Uint8Array(e);for(let n=0,a=0,s=t.length;n<s;n++){let i=t[n];r.set(i,a),a+=i.length}return r},_ee={assign:v_e,flattenChunks:y_e};let Eee=!0;try{String.fromCharCode.apply(null,new Uint8Array(1))}catch{Eee=!1}const Xb=new Uint8Array(256);for(let t=0;t<256;t++)Xb[t]=t>=252?6:t>=248?5:t>=240?4:t>=224?3:t>=192?2:1;Xb[254]=Xb[254]=1;var b_e=t=>{if(typeof TextEncoder=="function"&&TextEncoder.prototype.encode)return new TextEncoder().encode(t);let e,r,n,a,s,i=t.length,l=0;for(a=0;a<i;a++)r=t.charCodeAt(a),(r&64512)===55296&&a+1<i&&(n=t.charCodeAt(a+1),(n&64512)===56320&&(r=65536+(r-55296<<10)+(n-56320),a++)),l+=r<128?1:r<2048?2:r<65536?3:4;for(e=new Uint8Array(l),s=0,a=0;s<l;a++)r=t.charCodeAt(a),(r&64512)===55296&&a+1<i&&(n=t.charCodeAt(a+1),(n&64512)===56320&&(r=65536+(r-55296<<10)+(n-56320),a++)),r<128?e[s++]=r:r<2048?(e[s++]=192|r>>>6,e[s++]=128|r&63):r<65536?(e[s++]=224|r>>>12,e[s++]=128|r>>>6&63,e[s++]=128|r&63):(e[s++]=240|r>>>18,e[s++]=128|r>>>12&63,e[s++]=128|r>>>6&63,e[s++]=128|r&63);return e};const w_e=(t,e)=>{if(e<65534&&t.subarray&&Eee)return String.fromCharCode.apply(null,t.length===e?t:t.subarray(0,e));let r="";for(let n=0;n<e;n++)r+=String.fromCharCode(t[n]);return r};var N_e=(t,e)=>{const r=e||t.length;if(typeof TextDecoder=="function"&&TextDecoder.prototype.decode)return new TextDecoder().decode(t.subarray(0,e));let n,a;const s=new Array(r*2);for(a=0,n=0;n<r;){let i=t[n++];if(i<128){s[a++]=i;continue}let l=Xb[i];if(l>4){s[a++]=65533,n+=l-1;continue}for(i&=l===2?31:l===3?15:7;l>1&&n<r;)i=i<<6|t[n++]&63,l--;if(l>1){s[a++]=65533;continue}i<65536?s[a++]=i:(i-=65536,s[a++]=55296|i>>10&1023,s[a++]=56320|i&1023)}return w_e(s,a)},C_e=(t,e)=>{e=e||t.length,e>t.length&&(e=t.length);let r=e-1;for(;r>=0&&(t[r]&192)===128;)r--;return r<0||r===0?e:r+Xb[t[r]]>e?r:e},VT={string2buf:b_e,buf2string:N_e,utf8border:C_e};function __e(){this.input=null,this.next_in=0,this.avail_in=0,this.total_in=0,this.output=null,this.next_out=0,this.avail_out=0,this.total_out=0,this.msg="",this.state=null,this.data_type=2,this.adler=0}var E_e=__e;const YN=16209,S_e=16191;var I_e=function(e,r){let n,a,s,i,l,c,u,d,f,h,A,m,p,g,x,y,b,w,j,I,_,E,S,k;const P=e.state;n=e.next_in,S=e.input,a=n+(e.avail_in-5),s=e.next_out,k=e.output,i=s-(r-e.avail_out),l=s+(e.avail_out-257),c=P.dmax,u=P.wsize,d=P.whave,f=P.wnext,h=P.window,A=P.hold,m=P.bits,p=P.lencode,g=P.distcode,x=(1<<P.lenbits)-1,y=(1<<P.distbits)-1;e:do{m<15&&(A+=S[n++]<<m,m+=8,A+=S[n++]<<m,m+=8),b=p[A&x];t:for(;;){if(w=b>>>24,A>>>=w,m-=w,w=b>>>16&255,w===0)k[s++]=b&65535;else if(w&16){j=b&65535,w&=15,w&&(m<w&&(A+=S[n++]<<m,m+=8),j+=A&(1<<w)-1,A>>>=w,m-=w),m<15&&(A+=S[n++]<<m,m+=8,A+=S[n++]<<m,m+=8),b=g[A&y];r:for(;;){if(w=b>>>24,A>>>=w,m-=w,w=b>>>16&255,w&16){if(I=b&65535,w&=15,m<w&&(A+=S[n++]<<m,m+=8,m<w&&(A+=S[n++]<<m,m+=8)),I+=A&(1<<w)-1,I>c){e.msg="invalid distance too far back",P.mode=YN;break e}if(A>>>=w,m-=w,w=s-i,I>w){if(w=I-w,w>d&&P.sane){e.msg="invalid distance too far back",P.mode=YN;break e}if(_=0,E=h,f===0){if(_+=u-w,w<j){j-=w;do k[s++]=h[_++];while(--w);_=s-I,E=k}}else if(f<w){if(_+=u+f-w,w-=f,w<j){j-=w;do k[s++]=h[_++];while(--w);if(_=0,f<j){w=f,j-=w;do k[s++]=h[_++];while(--w);_=s-I,E=k}}}else if(_+=f-w,w<j){j-=w;do k[s++]=h[_++];while(--w);_=s-I,E=k}for(;j>2;)k[s++]=E[_++],k[s++]=E[_++],k[s++]=E[_++],j-=3;j&&(k[s++]=E[_++],j>1&&(k[s++]=E[_++]))}else{_=s-I;do k[s++]=k[_++],k[s++]=k[_++],k[s++]=k[_++],j-=3;while(j>2);j&&(k[s++]=k[_++],j>1&&(k[s++]=k[_++]))}}else if(w&64){e.msg="invalid distance code",P.mode=YN;break e}else{b=g[(b&65535)+(A&(1<<w)-1)];continue r}break}}else if(w&64)if(w&32){P.mode=S_e;break e}else{e.msg="invalid literal/length code",P.mode=YN;break e}else{b=p[(b&65535)+(A&(1<<w)-1)];continue t}break}}while(n<a&&s<l);j=m>>3,n-=j,m-=j<<3,A&=(1<<m)-1,e.next_in=n,e.next_out=s,e.avail_in=n<a?5+(a-n):5-(n-a),e.avail_out=s<l?257+(l-s):257-(s-l),P.hold=A,P.bits=m};const Fg=15,P9=852,T9=592,k9=0,h5=1,F9=2,j_e=new Uint16Array([3,4,5,6,7,8,9,10,11,13,15,17,19,23,27,31,35,43,51,59,67,83,99,115,131,163,195,227,258,0,0]),B_e=new Uint8Array([16,16,16,16,16,16,16,16,17,17,17,17,18,18,18,18,19,19,19,19,20,20,20,20,21,21,21,21,16,72,78]),P_e=new Uint16Array([1,2,3,4,5,7,9,13,17,25,33,49,65,97,129,193,257,385,513,769,1025,1537,2049,3073,4097,6145,8193,12289,16385,24577,0,0]),T_e=new Uint8Array([16,16,16,16,17,17,18,18,19,19,20,20,21,21,22,22,23,23,24,24,25,25,26,26,27,27,28,28,29,29,64,64]),k_e=(t,e,r,n,a,s,i,l)=>{const c=l.bits;let u=0,d=0,f=0,h=0,A=0,m=0,p=0,g=0,x=0,y=0,b,w,j,I,_,E=null,S;const k=new Uint16Array(Fg+1),P=new Uint16Array(Fg+1);let T=null,F,Y,he;for(u=0;u<=Fg;u++)k[u]=0;for(d=0;d<n;d++)k[e[r+d]]++;for(A=c,h=Fg;h>=1&&k[h]===0;h--);if(A>h&&(A=h),h===0)return a[s++]=1<<24|64<<16|0,a[s++]=1<<24|64<<16|0,l.bits=1,0;for(f=1;f<h&&k[f]===0;f++);for(A<f&&(A=f),g=1,u=1;u<=Fg;u++)if(g<<=1,g-=k[u],g<0)return-1;if(g>0&&(t===k9||h!==1))return-1;for(P[1]=0,u=1;u<Fg;u++)P[u+1]=P[u]+k[u];for(d=0;d<n;d++)e[r+d]!==0&&(i[P[e[r+d]]++]=d);if(t===k9?(E=T=i,S=20):t===h5?(E=j_e,T=B_e,S=257):(E=P_e,T=T_e,S=0),y=0,d=0,u=f,_=s,m=A,p=0,j=-1,x=1<<A,I=x-1,t===h5&&x>P9||t===F9&&x>T9)return 1;for(;;){F=u-p,i[d]+1<S?(Y=0,he=i[d]):i[d]>=S?(Y=T[i[d]-S],he=E[i[d]-S]):(Y=96,he=0),b=1<<u-p,w=1<<m,f=w;do w-=b,a[_+(y>>p)+w]=F<<24|Y<<16|he|0;while(w!==0);for(b=1<<u-1;y&b;)b>>=1;if(b!==0?(y&=b-1,y+=b):y=0,d++,--k[u]===0){if(u===h)break;u=e[r+i[d]]}if(u>A&&(y&I)!==j){for(p===0&&(p=A),_+=f,m=u-p,g=1<<m;m+p<h&&(g-=k[m+p],!(g<=0));)m++,g<<=1;if(x+=1<<m,t===h5&&x>P9||t===F9&&x>T9)return 1;j=y&I,a[j]=A<<24|m<<16|_-s|0}}return y!==0&&(a[_+y]=u-p<<24|64<<16|0),l.bits=A,0};var Wy=k_e;const F_e=0,See=1,Iee=2,{Z_FINISH:O9,Z_BLOCK:O_e,Z_TREES:JN,Z_OK:Tp,Z_STREAM_END:D_e,Z_NEED_DICT:R_e,Z_STREAM_ERROR:Gu,Z_DATA_ERROR:jee,Z_MEM_ERROR:Bee,Z_BUF_ERROR:M_e,Z_DEFLATED:D9}=Cee,y4=16180,R9=16181,M9=16182,L9=16183,U9=16184,Q9=16185,V9=16186,H9=16187,$9=16188,K9=16189,JE=16190,Xf=16191,m5=16192,G9=16193,p5=16194,q9=16195,z9=16196,W9=16197,X9=16198,ZN=16199,eC=16200,Y9=16201,J9=16202,Z9=16203,eQ=16204,tQ=16205,g5=16206,rQ=16207,nQ=16208,ls=16209,Pee=16210,Tee=16211,L_e=852,U_e=592,Q_e=15,V_e=Q_e,aQ=t=>(t>>>24&255)+(t>>>8&65280)+((t&65280)<<8)+((t&255)<<24);function H_e(){this.strm=null,this.mode=0,this.last=!1,this.wrap=0,this.havedict=!1,this.flags=0,this.dmax=0,this.check=0,this.total=0,this.head=null,this.wbits=0,this.wsize=0,this.whave=0,this.wnext=0,this.window=null,this.hold=0,this.bits=0,this.length=0,this.offset=0,this.extra=0,this.lencode=null,this.distcode=null,this.lenbits=0,this.distbits=0,this.ncode=0,this.nlen=0,this.ndist=0,this.have=0,this.next=null,this.lens=new Uint16Array(320),this.work=new Uint16Array(288),this.lendyn=null,this.distdyn=null,this.sane=0,this.back=0,this.was=0}const ng=t=>{if(!t)return 1;const e=t.state;return!e||e.strm!==t||e.mode<y4||e.mode>Tee?1:0},kee=t=>{if(ng(t))return Gu;const e=t.state;return t.total_in=t.total_out=e.total=0,t.msg="",e.wrap&&(t.adler=e.wrap&1),e.mode=y4,e.last=0,e.havedict=0,e.flags=-1,e.dmax=32768,e.head=null,e.hold=0,e.bits=0,e.lencode=e.lendyn=new Int32Array(L_e),e.distcode=e.distdyn=new Int32Array(U_e),e.sane=1,e.back=-1,Tp},Fee=t=>{if(ng(t))return Gu;const e=t.state;return e.wsize=0,e.whave=0,e.wnext=0,kee(t)},Oee=(t,e)=>{let r;if(ng(t))return Gu;const n=t.state;return e<0?(r=0,e=-e):(r=(e>>4)+5,e<48&&(e&=15)),e&&(e<8||e>15)?Gu:(n.window!==null&&n.wbits!==e&&(n.window=null),n.wrap=r,n.wbits=e,Fee(t))},Dee=(t,e)=>{if(!t)return Gu;const r=new H_e;t.state=r,r.strm=t,r.window=null,r.mode=y4;const n=Oee(t,e);return n!==Tp&&(t.state=null),n},$_e=t=>Dee(t,V_e);let sQ=!0,x5,v5;const K_e=t=>{if(sQ){x5=new Int32Array(512),v5=new Int32Array(32);let e=0;for(;e<144;)t.lens[e++]=8;for(;e<256;)t.lens[e++]=9;for(;e<280;)t.lens[e++]=7;for(;e<288;)t.lens[e++]=8;for(Wy(See,t.lens,0,288,x5,0,t.work,{bits:9}),e=0;e<32;)t.lens[e++]=5;Wy(Iee,t.lens,0,32,v5,0,t.work,{bits:5}),sQ=!1}t.lencode=x5,t.lenbits=9,t.distcode=v5,t.distbits=5},Ree=(t,e,r,n)=>{let a;const s=t.state;return s.window===null&&(s.wsize=1<<s.wbits,s.wnext=0,s.whave=0,s.window=new Uint8Array(s.wsize)),n>=s.wsize?(s.window.set(e.subarray(r-s.wsize,r),0),s.wnext=0,s.whave=s.wsize):(a=s.wsize-s.wnext,a>n&&(a=n),s.window.set(e.subarray(r-n,r-n+a),s.wnext),n-=a,n?(s.window.set(e.subarray(r-n,r),0),s.wnext=n,s.whave=s.wsize):(s.wnext+=a,s.wnext===s.wsize&&(s.wnext=0),s.whave<s.wsize&&(s.whave+=a))),0},G_e=(t,e)=>{let r,n,a,s,i,l,c,u,d,f,h,A,m,p,g=0,x,y,b,w,j,I,_,E;const S=new Uint8Array(4);let k,P;const T=new Uint8Array([16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15]);if(ng(t)||!t.output||!t.input&&t.avail_in!==0)return Gu;r=t.state,r.mode===Xf&&(r.mode=m5),i=t.next_out,a=t.output,c=t.avail_out,s=t.next_in,n=t.input,l=t.avail_in,u=r.hold,d=r.bits,f=l,h=c,E=Tp;e:for(;;)switch(r.mode){case y4:if(r.wrap===0){r.mode=m5;break}for(;d<16;){if(l===0)break e;l--,u+=n[s++]<<d,d+=8}if(r.wrap&2&&u===35615){r.wbits===0&&(r.wbits=15),r.check=0,S[0]=u&255,S[1]=u>>>8&255,r.check=tf(r.check,S,2,0),u=0,d=0,r.mode=R9;break}if(r.head&&(r.head.done=!1),!(r.wrap&1)||(((u&255)<<8)+(u>>8))%31){t.msg="incorrect header check",r.mode=ls;break}if((u&15)!==D9){t.msg="unknown compression method",r.mode=ls;break}if(u>>>=4,d-=4,_=(u&15)+8,r.wbits===0&&(r.wbits=_),_>15||_>r.wbits){t.msg="invalid window size",r.mode=ls;break}r.dmax=1<<r.wbits,r.flags=0,t.adler=r.check=1,r.mode=u&512?K9:Xf,u=0,d=0;break;case R9:for(;d<16;){if(l===0)break e;l--,u+=n[s++]<<d,d+=8}if(r.flags=u,(r.flags&255)!==D9){t.msg="unknown compression method",r.mode=ls;break}if(r.flags&57344){t.msg="unknown header flags set",r.mode=ls;break}r.head&&(r.head.text=u>>8&1),r.flags&512&&r.wrap&4&&(S[0]=u&255,S[1]=u>>>8&255,r.check=tf(r.check,S,2,0)),u=0,d=0,r.mode=M9;case M9:for(;d<32;){if(l===0)break e;l--,u+=n[s++]<<d,d+=8}r.head&&(r.head.time=u),r.flags&512&&r.wrap&4&&(S[0]=u&255,S[1]=u>>>8&255,S[2]=u>>>16&255,S[3]=u>>>24&255,r.check=tf(r.check,S,4,0)),u=0,d=0,r.mode=L9;case L9:for(;d<16;){if(l===0)break e;l--,u+=n[s++]<<d,d+=8}r.head&&(r.head.xflags=u&255,r.head.os=u>>8),r.flags&512&&r.wrap&4&&(S[0]=u&255,S[1]=u>>>8&255,r.check=tf(r.check,S,2,0)),u=0,d=0,r.mode=U9;case U9:if(r.flags&1024){for(;d<16;){if(l===0)break e;l--,u+=n[s++]<<d,d+=8}r.length=u,r.head&&(r.head.extra_len=u),r.flags&512&&r.wrap&4&&(S[0]=u&255,S[1]=u>>>8&255,r.check=tf(r.check,S,2,0)),u=0,d=0}else r.head&&(r.head.extra=null);r.mode=Q9;case Q9:if(r.flags&1024&&(A=r.length,A>l&&(A=l),A&&(r.head&&(_=r.head.extra_len-r.length,r.head.extra||(r.head.extra=new Uint8Array(r.head.extra_len)),r.head.extra.set(n.subarray(s,s+A),_)),r.flags&512&&r.wrap&4&&(r.check=tf(r.check,n,A,s)),l-=A,s+=A,r.length-=A),r.length))break e;r.length=0,r.mode=V9;case V9:if(r.flags&2048){if(l===0)break e;A=0;do _=n[s+A++],r.head&&_&&r.length<65536&&(r.head.name+=String.fromCharCode(_));while(_&&A<l);if(r.flags&512&&r.wrap&4&&(r.check=tf(r.check,n,A,s)),l-=A,s+=A,_)break e}else r.head&&(r.head.name=null);r.length=0,r.mode=H9;case H9:if(r.flags&4096){if(l===0)break e;A=0;do _=n[s+A++],r.head&&_&&r.length<65536&&(r.head.comment+=String.fromCharCode(_));while(_&&A<l);if(r.flags&512&&r.wrap&4&&(r.check=tf(r.check,n,A,s)),l-=A,s+=A,_)break e}else r.head&&(r.head.comment=null);r.mode=$9;case $9:if(r.flags&512){for(;d<16;){if(l===0)break e;l--,u+=n[s++]<<d,d+=8}if(r.wrap&4&&u!==(r.check&65535)){t.msg="header crc mismatch",r.mode=ls;break}u=0,d=0}r.head&&(r.head.hcrc=r.flags>>9&1,r.head.done=!0),t.adler=r.check=0,r.mode=Xf;break;case K9:for(;d<32;){if(l===0)break e;l--,u+=n[s++]<<d,d+=8}t.adler=r.check=aQ(u),u=0,d=0,r.mode=JE;case JE:if(r.havedict===0)return t.next_out=i,t.avail_out=c,t.next_in=s,t.avail_in=l,r.hold=u,r.bits=d,R_e;t.adler=r.check=1,r.mode=Xf;case Xf:if(e===O_e||e===JN)break e;case m5:if(r.last){u>>>=d&7,d-=d&7,r.mode=g5;break}for(;d<3;){if(l===0)break e;l--,u+=n[s++]<<d,d+=8}switch(r.last=u&1,u>>>=1,d-=1,u&3){case 0:r.mode=G9;break;case 1:if(K_e(r),r.mode=ZN,e===JN){u>>>=2,d-=2;break e}break;case 2:r.mode=z9;break;case 3:t.msg="invalid block type",r.mode=ls}u>>>=2,d-=2;break;case G9:for(u>>>=d&7,d-=d&7;d<32;){if(l===0)break e;l--,u+=n[s++]<<d,d+=8}if((u&65535)!==(u>>>16^65535)){t.msg="invalid stored block lengths",r.mode=ls;break}if(r.length=u&65535,u=0,d=0,r.mode=p5,e===JN)break e;case p5:r.mode=q9;case q9:if(A=r.length,A){if(A>l&&(A=l),A>c&&(A=c),A===0)break e;a.set(n.subarray(s,s+A),i),l-=A,s+=A,c-=A,i+=A,r.length-=A;break}r.mode=Xf;break;case z9:for(;d<14;){if(l===0)break e;l--,u+=n[s++]<<d,d+=8}if(r.nlen=(u&31)+257,u>>>=5,d-=5,r.ndist=(u&31)+1,u>>>=5,d-=5,r.ncode=(u&15)+4,u>>>=4,d-=4,r.nlen>286||r.ndist>30){t.msg="too many length or distance symbols",r.mode=ls;break}r.have=0,r.mode=W9;case W9:for(;r.have<r.ncode;){for(;d<3;){if(l===0)break e;l--,u+=n[s++]<<d,d+=8}r.lens[T[r.have++]]=u&7,u>>>=3,d-=3}for(;r.have<19;)r.lens[T[r.have++]]=0;if(r.lencode=r.lendyn,r.lenbits=7,k={bits:r.lenbits},E=Wy(F_e,r.lens,0,19,r.lencode,0,r.work,k),r.lenbits=k.bits,E){t.msg="invalid code lengths set",r.mode=ls;break}r.have=0,r.mode=X9;case X9:for(;r.have<r.nlen+r.ndist;){for(;g=r.lencode[u&(1<<r.lenbits)-1],x=g>>>24,y=g>>>16&255,b=g&65535,!(x<=d);){if(l===0)break e;l--,u+=n[s++]<<d,d+=8}if(b<16)u>>>=x,d-=x,r.lens[r.have++]=b;else{if(b===16){for(P=x+2;d<P;){if(l===0)break e;l--,u+=n[s++]<<d,d+=8}if(u>>>=x,d-=x,r.have===0){t.msg="invalid bit length repeat",r.mode=ls;break}_=r.lens[r.have-1],A=3+(u&3),u>>>=2,d-=2}else if(b===17){for(P=x+3;d<P;){if(l===0)break e;l--,u+=n[s++]<<d,d+=8}u>>>=x,d-=x,_=0,A=3+(u&7),u>>>=3,d-=3}else{for(P=x+7;d<P;){if(l===0)break e;l--,u+=n[s++]<<d,d+=8}u>>>=x,d-=x,_=0,A=11+(u&127),u>>>=7,d-=7}if(r.have+A>r.nlen+r.ndist){t.msg="invalid bit length repeat",r.mode=ls;break}for(;A--;)r.lens[r.have++]=_}}if(r.mode===ls)break;if(r.lens[256]===0){t.msg="invalid code -- missing end-of-block",r.mode=ls;break}if(r.lenbits=9,k={bits:r.lenbits},E=Wy(See,r.lens,0,r.nlen,r.lencode,0,r.work,k),r.lenbits=k.bits,E){t.msg="invalid literal/lengths set",r.mode=ls;break}if(r.distbits=6,r.distcode=r.distdyn,k={bits:r.distbits},E=Wy(Iee,r.lens,r.nlen,r.ndist,r.distcode,0,r.work,k),r.distbits=k.bits,E){t.msg="invalid distances set",r.mode=ls;break}if(r.mode=ZN,e===JN)break e;case ZN:r.mode=eC;case eC:if(l>=6&&c>=258){t.next_out=i,t.avail_out=c,t.next_in=s,t.avail_in=l,r.hold=u,r.bits=d,I_e(t,h),i=t.next_out,a=t.output,c=t.avail_out,s=t.next_in,n=t.input,l=t.avail_in,u=r.hold,d=r.bits,r.mode===Xf&&(r.back=-1);break}for(r.back=0;g=r.lencode[u&(1<<r.lenbits)-1],x=g>>>24,y=g>>>16&255,b=g&65535,!(x<=d);){if(l===0)break e;l--,u+=n[s++]<<d,d+=8}if(y&&!(y&240)){for(w=x,j=y,I=b;g=r.lencode[I+((u&(1<<w+j)-1)>>w)],x=g>>>24,y=g>>>16&255,b=g&65535,!(w+x<=d);){if(l===0)break e;l--,u+=n[s++]<<d,d+=8}u>>>=w,d-=w,r.back+=w}if(u>>>=x,d-=x,r.back+=x,r.length=b,y===0){r.mode=tQ;break}if(y&32){r.back=-1,r.mode=Xf;break}if(y&64){t.msg="invalid literal/length code",r.mode=ls;break}r.extra=y&15,r.mode=Y9;case Y9:if(r.extra){for(P=r.extra;d<P;){if(l===0)break e;l--,u+=n[s++]<<d,d+=8}r.length+=u&(1<<r.extra)-1,u>>>=r.extra,d-=r.extra,r.back+=r.extra}r.was=r.length,r.mode=J9;case J9:for(;g=r.distcode[u&(1<<r.distbits)-1],x=g>>>24,y=g>>>16&255,b=g&65535,!(x<=d);){if(l===0)break e;l--,u+=n[s++]<<d,d+=8}if(!(y&240)){for(w=x,j=y,I=b;g=r.distcode[I+((u&(1<<w+j)-1)>>w)],x=g>>>24,y=g>>>16&255,b=g&65535,!(w+x<=d);){if(l===0)break e;l--,u+=n[s++]<<d,d+=8}u>>>=w,d-=w,r.back+=w}if(u>>>=x,d-=x,r.back+=x,y&64){t.msg="invalid distance code",r.mode=ls;break}r.offset=b,r.extra=y&15,r.mode=Z9;case Z9:if(r.extra){for(P=r.extra;d<P;){if(l===0)break e;l--,u+=n[s++]<<d,d+=8}r.offset+=u&(1<<r.extra)-1,u>>>=r.extra,d-=r.extra,r.back+=r.extra}if(r.offset>r.dmax){t.msg="invalid distance too far back",r.mode=ls;break}r.mode=eQ;case eQ:if(c===0)break e;if(A=h-c,r.offset>A){if(A=r.offset-A,A>r.whave&&r.sane){t.msg="invalid distance too far back",r.mode=ls;break}A>r.wnext?(A-=r.wnext,m=r.wsize-A):m=r.wnext-A,A>r.length&&(A=r.length),p=r.window}else p=a,m=i-r.offset,A=r.length;A>c&&(A=c),c-=A,r.length-=A;do a[i++]=p[m++];while(--A);r.length===0&&(r.mode=eC);break;case tQ:if(c===0)break e;a[i++]=r.length,c--,r.mode=eC;break;case g5:if(r.wrap){for(;d<32;){if(l===0)break e;l--,u|=n[s++]<<d,d+=8}if(h-=c,t.total_out+=h,r.total+=h,r.wrap&4&&h&&(t.adler=r.check=r.flags?tf(r.check,a,h,i-h):UT(r.check,a,h,i-h)),h=c,r.wrap&4&&(r.flags?u:aQ(u))!==r.check){t.msg="incorrect data check",r.mode=ls;break}u=0,d=0}r.mode=rQ;case rQ:if(r.wrap&&r.flags){for(;d<32;){if(l===0)break e;l--,u+=n[s++]<<d,d+=8}if(r.wrap&4&&u!==(r.total&4294967295)){t.msg="incorrect length check",r.mode=ls;break}u=0,d=0}r.mode=nQ;case nQ:E=D_e;break e;case ls:E=jee;break e;case Pee:return Bee;case Tee:default:return Gu}return t.next_out=i,t.avail_out=c,t.next_in=s,t.avail_in=l,r.hold=u,r.bits=d,(r.wsize||h!==t.avail_out&&r.mode<ls&&(r.mode<g5||e!==O9))&&Ree(t,t.output,t.next_out,h-t.avail_out),f-=t.avail_in,h-=t.avail_out,t.total_in+=f,t.total_out+=h,r.total+=h,r.wrap&4&&h&&(t.adler=r.check=r.flags?tf(r.check,a,h,t.next_out-h):UT(r.check,a,h,t.next_out-h)),t.data_type=r.bits+(r.last?64:0)+(r.mode===Xf?128:0)+(r.mode===ZN||r.mode===p5?256:0),(f===0&&h===0||e===O9)&&E===Tp&&(E=M_e),E},q_e=t=>{if(ng(t))return Gu;let e=t.state;return e.window&&(e.window=null),t.state=null,Tp},z_e=(t,e)=>{if(ng(t))return Gu;const r=t.state;return r.wrap&2?(r.head=e,e.done=!1,Tp):Gu},W_e=(t,e)=>{const r=e.length;let n,a,s;return ng(t)||(n=t.state,n.wrap!==0&&n.mode!==JE)?Gu:n.mode===JE&&(a=1,a=UT(a,e,r,0),a!==n.check)?jee:(s=Ree(t,e,r,r),s?(n.mode=Pee,Bee):(n.havedict=1,Tp))};var X_e=Fee,Y_e=Oee,J_e=kee,Z_e=$_e,eEe=Dee,tEe=G_e,rEe=q_e,nEe=z_e,aEe=W_e,sEe="pako inflate (from Nodeca project)",oA={inflateReset:X_e,inflateReset2:Y_e,inflateResetKeep:J_e,inflateInit:Z_e,inflateInit2:eEe,inflate:tEe,inflateEnd:rEe,inflateGetHeader:nEe,inflateSetDictionary:aEe,inflateInfo:sEe};function iEe(){this.text=0,this.time=0,this.xflags=0,this.os=0,this.extra=null,this.extra_len=0,this.name="",this.comment="",this.hcrc=0,this.done=!1}var oEe=iEe;const Mee=Object.prototype.toString,{Z_NO_FLUSH:lEe,Z_FINISH:cEe,Z_OK:Yb,Z_STREAM_END:y5,Z_NEED_DICT:b5,Z_STREAM_ERROR:uEe,Z_DATA_ERROR:iQ,Z_MEM_ERROR:dEe}=Cee;function aw(t){this.options=_ee.assign({chunkSize:1024*64,windowBits:15,to:""},t||{});const e=this.options;e.raw&&e.windowBits>=0&&e.windowBits<16&&(e.windowBits=-e.windowBits,e.windowBits===0&&(e.windowBits=-15)),e.windowBits>=0&&e.windowBits<16&&!(t&&t.windowBits)&&(e.windowBits+=32),e.windowBits>15&&e.windowBits<48&&(e.windowBits&15||(e.windowBits|=15)),this.err=0,this.msg="",this.ended=!1,this.chunks=[],this.strm=new E_e,this.strm.avail_out=0;let r=oA.inflateInit2(this.strm,e.windowBits);if(r!==Yb)throw new Error(QT[r]);if(this.header=new oEe,oA.inflateGetHeader(this.strm,this.header),e.dictionary&&(typeof e.dictionary=="string"?e.dictionary=VT.string2buf(e.dictionary):Mee.call(e.dictionary)==="[object ArrayBuffer]"&&(e.dictionary=new Uint8Array(e.dictionary)),e.raw&&(r=oA.inflateSetDictionary(this.strm,e.dictionary),r!==Yb)))throw new Error(QT[r])}aw.prototype.push=function(t,e){const r=this.strm,n=this.options.chunkSize,a=this.options.dictionary;let s,i,l;if(this.ended)return!1;for(e===~~e?i=e:i=e===!0?cEe:lEe,Mee.call(t)==="[object ArrayBuffer]"?r.input=new Uint8Array(t):r.input=t,r.next_in=0,r.avail_in=r.input.length;;){for(r.avail_out===0&&(r.output=new Uint8Array(n),r.next_out=0,r.avail_out=n),s=oA.inflate(r,i),s===b5&&a&&(s=oA.inflateSetDictionary(r,a),s===Yb?s=oA.inflate(r,i):s===iQ&&(s=b5));r.avail_in>0&&s===y5&&r.state.wrap>0&&t[r.next_in]!==0;)oA.inflateReset(r),s=oA.inflate(r,i);switch(s){case uEe:case iQ:case b5:case dEe:return this.onEnd(s),this.ended=!0,!1}if(l=r.avail_out,r.next_out&&(r.avail_out===0||s===y5))if(this.options.to==="string"){let c=VT.utf8border(r.output,r.next_out),u=r.next_out-c,d=VT.buf2string(r.output,c);r.next_out=u,r.avail_out=n-u,u&&r.output.set(r.output.subarray(c,c+u),0),this.onData(d)}else this.onData(r.output.length===r.next_out?r.output:r.output.subarray(0,r.next_out));if(!(s===Yb&&l===0)){if(s===y5)return s=oA.inflateEnd(this.strm),this.onEnd(s),this.ended=!0,!0;if(r.avail_in===0)break}}return!0};aw.prototype.onData=function(t){this.chunks.push(t)};aw.prototype.onEnd=function(t){t===Yb&&(this.options.to==="string"?this.result=this.chunks.join(""):this.result=_ee.flattenChunks(this.chunks)),this.chunks=[],this.err=t,this.msg=this.strm.msg};function fEe(t,e){const r=new aw(e);if(r.push(t),r.err)throw r.msg||QT[r.err];return r.result}var AEe=aw,hEe=fEe,mEe={Inflate:AEe,inflate:hEe};const{Inflate:pEe,inflate:gEe}=mEe;var oQ=pEe,xEe=gEe;const Lee=[];for(let t=0;t<256;t++){let e=t;for(let r=0;r<8;r++)e&1?e=3988292384^e>>>1:e=e>>>1;Lee[t]=e}const lQ=4294967295;function vEe(t,e,r){let n=t;for(let a=0;a<r;a++)n=Lee[(n^e[a])&255]^n>>>8;return n}function yEe(t,e){return(vEe(lQ,t,e)^lQ)>>>0}function cQ(t,e,r){const n=t.readUint32(),a=yEe(new Uint8Array(t.buffer,t.byteOffset+t.offset-e-4,e),e);if(a!==n)throw new Error(`CRC mismatch for chunk ${r}. Expected ${n}, found ${a}`)}function Uee(t,e,r){for(let n=0;n<r;n++)e[n]=t[n]}function Qee(t,e,r,n){let a=0;for(;a<n;a++)e[a]=t[a];for(;a<r;a++)e[a]=t[a]+e[a-n]&255}function Vee(t,e,r,n){let a=0;if(r.length===0)for(;a<n;a++)e[a]=t[a];else for(;a<n;a++)e[a]=t[a]+r[a]&255}function Hee(t,e,r,n,a){let s=0;if(r.length===0){for(;s<a;s++)e[s]=t[s];for(;s<n;s++)e[s]=t[s]+(e[s-a]>>1)&255}else{for(;s<a;s++)e[s]=t[s]+(r[s]>>1)&255;for(;s<n;s++)e[s]=t[s]+(e[s-a]+r[s]>>1)&255}}function $ee(t,e,r,n,a){let s=0;if(r.length===0){for(;s<a;s++)e[s]=t[s];for(;s<n;s++)e[s]=t[s]+e[s-a]&255}else{for(;s<a;s++)e[s]=t[s]+r[s]&255;for(;s<n;s++)e[s]=t[s]+bEe(e[s-a],r[s],r[s-a])&255}}function bEe(t,e,r){const n=t+e-r,a=Math.abs(n-t),s=Math.abs(n-e),i=Math.abs(n-r);return a<=s&&a<=i?t:s<=i?e:r}function wEe(t,e,r,n,a,s){switch(t){case 0:Uee(e,r,a);break;case 1:Qee(e,r,a,s);break;case 2:Vee(e,r,n,a);break;case 3:Hee(e,r,n,a,s);break;case 4:$ee(e,r,n,a,s);break;default:throw new Error(`Unsupported filter: ${t}`)}}const NEe=new Uint16Array([255]),CEe=new Uint8Array(NEe.buffer),_Ee=CEe[0]===255;function EEe(t){const{data:e,width:r,height:n,channels:a,depth:s}=t,i=[{x:0,y:0,xStep:8,yStep:8},{x:4,y:0,xStep:8,yStep:8},{x:0,y:4,xStep:4,yStep:8},{x:2,y:0,xStep:4,yStep:4},{x:0,y:2,xStep:2,yStep:4},{x:1,y:0,xStep:2,yStep:2},{x:0,y:1,xStep:1,yStep:2}],l=Math.ceil(s/8)*a,c=new Uint8Array(n*r*l);let u=0;for(let d=0;d<7;d++){const f=i[d],h=Math.ceil((r-f.x)/f.xStep),A=Math.ceil((n-f.y)/f.yStep);if(h<=0||A<=0)continue;const m=h*l,p=new Uint8Array(m);for(let g=0;g<A;g++){const x=e[u++],y=e.subarray(u,u+m);u+=m;const b=new Uint8Array(m);wEe(x,y,b,p,m,l),p.set(b);for(let w=0;w<h;w++){const j=f.x+w*f.xStep,I=f.y+g*f.yStep;if(!(j>=r||I>=n))for(let _=0;_<l;_++)c[(I*r+j)*l+_]=b[w*l+_]}}}if(s===16){const d=new Uint16Array(c.buffer);if(_Ee)for(let f=0;f<d.length;f++)d[f]=SEe(d[f]);return d}else return c}function SEe(t){return(t&255)<<8|t>>8&255}const IEe=new Uint16Array([255]),jEe=new Uint8Array(IEe.buffer),BEe=jEe[0]===255,PEe=new Uint8Array(0);function uQ(t){const{data:e,width:r,height:n,channels:a,depth:s}=t,i=Math.ceil(s/8)*a,l=Math.ceil(s/8*a*r),c=new Uint8Array(n*l);let u=PEe,d=0,f,h;for(let A=0;A<n;A++){switch(f=e.subarray(d+1,d+1+l),h=c.subarray(A*l,(A+1)*l),e[d]){case 0:Uee(f,h,l);break;case 1:Qee(f,h,l,i);break;case 2:Vee(f,h,u,l);break;case 3:Hee(f,h,u,l,i);break;case 4:$ee(f,h,u,l,i);break;default:throw new Error(`Unsupported filter: ${e[d]}`)}u=h,d+=l+1}if(s===16){const A=new Uint16Array(c.buffer);if(BEe)for(let m=0;m<A.length;m++)A[m]=TEe(A[m]);return A}else return c}function TEe(t){return(t&255)<<8|t>>8&255}const R_=Uint8Array.of(137,80,78,71,13,10,26,10);function dQ(t){if(!kEe(t.readBytes(R_.length)))throw new Error("wrong PNG signature")}function kEe(t){if(t.length<R_.length)return!1;for(let e=0;e<R_.length;e++)if(t[e]!==R_[e])return!1;return!0}const FEe="tEXt",OEe=0,Kee=new TextDecoder("latin1");function DEe(t){if(MEe(t),t.length===0||t.length>79)throw new Error("keyword length must be between 1 and 79")}const REe=/^[\u0000-\u00FF]*$/;function MEe(t){if(!REe.test(t))throw new Error("invalid latin1 text")}function LEe(t,e,r){const n=Gee(e);t[n]=UEe(e,r-n.length-1)}function Gee(t){for(t.mark();t.readByte()!==OEe;);const e=t.offset;t.reset();const r=Kee.decode(t.readBytes(e-t.offset-1));return t.skip(1),DEe(r),r}function UEe(t,e){return Kee.decode(t.readBytes(e))}const Pc={UNKNOWN:-1,GREYSCALE:0,TRUECOLOUR:2,INDEXED_COLOUR:3,GREYSCALE_ALPHA:4,TRUECOLOUR_ALPHA:6},w5={UNKNOWN:-1,DEFLATE:0},fQ={UNKNOWN:-1,ADAPTIVE:0},N5={UNKNOWN:-1,NO_INTERLACE:0,ADAM7:1},tC={NONE:0,BACKGROUND:1,PREVIOUS:2},C5={SOURCE:0,OVER:1};class QEe extends R6{constructor(r,n={}){super(r);aa(this,"_checkCrc");aa(this,"_inflator");aa(this,"_png");aa(this,"_apng");aa(this,"_end");aa(this,"_hasPalette");aa(this,"_palette");aa(this,"_hasTransparency");aa(this,"_transparency");aa(this,"_compressionMethod");aa(this,"_filterMethod");aa(this,"_interlaceMethod");aa(this,"_colorType");aa(this,"_isAnimated");aa(this,"_numberOfFrames");aa(this,"_numberOfPlays");aa(this,"_frames");aa(this,"_writingDataChunks");const{checkCrc:a=!1}=n;this._checkCrc=a,this._inflator=new oQ,this._png={width:-1,height:-1,channels:-1,data:new Uint8Array(0),depth:1,text:{}},this._apng={width:-1,height:-1,channels:-1,depth:1,numberOfFrames:1,numberOfPlays:0,text:{},frames:[]},this._end=!1,this._hasPalette=!1,this._palette=[],this._hasTransparency=!1,this._transparency=new Uint16Array(0),this._compressionMethod=w5.UNKNOWN,this._filterMethod=fQ.UNKNOWN,this._interlaceMethod=N5.UNKNOWN,this._colorType=Pc.UNKNOWN,this._isAnimated=!1,this._numberOfFrames=1,this._numberOfPlays=0,this._frames=[],this._writingDataChunks=!1,this.setBigEndian()}decode(){for(dQ(this);!this._end;){const r=this.readUint32(),n=this.readChars(4);this.decodeChunk(r,n)}return this.decodeImage(),this._png}decodeApng(){for(dQ(this);!this._end;){const r=this.readUint32(),n=this.readChars(4);this.decodeApngChunk(r,n)}return this.decodeApngImage(),this._apng}decodeChunk(r,n){const a=this.offset;switch(n){case"IHDR":this.decodeIHDR();break;case"PLTE":this.decodePLTE(r);break;case"IDAT":this.decodeIDAT(r);break;case"IEND":this._end=!0;break;case"tRNS":this.decodetRNS(r);break;case"iCCP":this.decodeiCCP(r);break;case FEe:LEe(this._png.text,this,r);break;case"pHYs":this.decodepHYs();break;default:this.skip(r);break}if(this.offset-a!==r)throw new Error(`Length mismatch while decoding chunk ${n}`);this._checkCrc?cQ(this,r+4,n):this.skip(4)}decodeApngChunk(r,n){const a=this.offset;switch(n!=="fdAT"&&n!=="IDAT"&&this._writingDataChunks&&this.pushDataToFrame(),n){case"acTL":this.decodeACTL();break;case"fcTL":this.decodeFCTL();break;case"fdAT":this.decodeFDAT(r);break;default:this.decodeChunk(r,n),this.offset=a+r;break}if(this.offset-a!==r)throw new Error(`Length mismatch while decoding chunk ${n}`);this._checkCrc?cQ(this,r+4,n):this.skip(4)}decodeIHDR(){const r=this._png;r.width=this.readUint32(),r.height=this.readUint32(),r.depth=VEe(this.readUint8());const n=this.readUint8();this._colorType=n;let a;switch(n){case Pc.GREYSCALE:a=1;break;case Pc.TRUECOLOUR:a=3;break;case Pc.INDEXED_COLOUR:a=1;break;case Pc.GREYSCALE_ALPHA:a=2;break;case Pc.TRUECOLOUR_ALPHA:a=4;break;case Pc.UNKNOWN:default:throw new Error(`Unknown color type: ${n}`)}if(this._png.channels=a,this._compressionMethod=this.readUint8(),this._compressionMethod!==w5.DEFLATE)throw new Error(`Unsupported compression method: ${this._compressionMethod}`);this._filterMethod=this.readUint8(),this._interlaceMethod=this.readUint8()}decodeACTL(){this._numberOfFrames=this.readUint32(),this._numberOfPlays=this.readUint32(),this._isAnimated=!0}decodeFCTL(){const r={sequenceNumber:this.readUint32(),width:this.readUint32(),height:this.readUint32(),xOffset:this.readUint32(),yOffset:this.readUint32(),delayNumber:this.readUint16(),delayDenominator:this.readUint16(),disposeOp:this.readUint8(),blendOp:this.readUint8(),data:new Uint8Array(0)};this._frames.push(r)}decodePLTE(r){if(r%3!==0)throw new RangeError(`PLTE field length must be a multiple of 3. Got ${r}`);const n=r/3;this._hasPalette=!0;const a=[];this._palette=a;for(let s=0;s<n;s++)a.push([this.readUint8(),this.readUint8(),this.readUint8()])}decodeIDAT(r){this._writingDataChunks=!0;const n=r,a=this.offset+this.byteOffset;if(this._inflator.push(new Uint8Array(this.buffer,a,n)),this._inflator.err)throw new Error(`Error while decompressing the data: ${this._inflator.err}`);this.skip(r)}decodeFDAT(r){this._writingDataChunks=!0;let n=r,a=this.offset+this.byteOffset;if(a+=4,n-=4,this._inflator.push(new Uint8Array(this.buffer,a,n)),this._inflator.err)throw new Error(`Error while decompressing the data: ${this._inflator.err}`);this.skip(r)}decodetRNS(r){switch(this._colorType){case Pc.GREYSCALE:case Pc.TRUECOLOUR:{if(r%2!==0)throw new RangeError(`tRNS chunk length must be a multiple of 2. Got ${r}`);if(r/2>this._png.width*this._png.height)throw new Error(`tRNS chunk contains more alpha values than there are pixels (${r/2} vs ${this._png.width*this._png.height})`);this._hasTransparency=!0,this._transparency=new Uint16Array(r/2);for(let n=0;n<r/2;n++)this._transparency[n]=this.readUint16();break}case Pc.INDEXED_COLOUR:{if(r>this._palette.length)throw new Error(`tRNS chunk contains more alpha values than there are palette colors (${r} vs ${this._palette.length})`);let n=0;for(;n<r;n++){const a=this.readByte();this._palette[n].push(a)}for(;n<this._palette.length;n++)this._palette[n].push(255);break}case Pc.UNKNOWN:case Pc.GREYSCALE_ALPHA:case Pc.TRUECOLOUR_ALPHA:default:throw new Error(`tRNS chunk is not supported for color type ${this._colorType}`)}}decodeiCCP(r){const n=Gee(this),a=this.readUint8();if(a!==w5.DEFLATE)throw new Error(`Unsupported iCCP compression method: ${a}`);const s=this.readBytes(r-n.length-2);this._png.iccEmbeddedProfile={name:n,profile:xEe(s)}}decodepHYs(){const r=this.readUint32(),n=this.readUint32(),a=this.readByte();this._png.resolution={x:r,y:n,unit:a}}decodeApngImage(){this._apng.width=this._png.width,this._apng.height=this._png.height,this._apng.channels=this._png.channels,this._apng.depth=this._png.depth,this._apng.numberOfFrames=this._numberOfFrames,this._apng.numberOfPlays=this._numberOfPlays,this._apng.text=this._png.text,this._apng.resolution=this._png.resolution;for(let r=0;r<this._numberOfFrames;r++){const n={sequenceNumber:this._frames[r].sequenceNumber,delayNumber:this._frames[r].delayNumber,delayDenominator:this._frames[r].delayDenominator,data:this._apng.depth===8?new Uint8Array(this._apng.width*this._apng.height*this._apng.channels):new Uint16Array(this._apng.width*this._apng.height*this._apng.channels)},a=this._frames.at(r);if(a){if(a.data=uQ({data:a.data,width:a.width,height:a.height,channels:this._apng.channels,depth:this._apng.depth}),this._hasPalette&&(this._apng.palette=this._palette),this._hasTransparency&&(this._apng.transparency=this._transparency),r===0||a.xOffset===0&&a.yOffset===0&&a.width===this._png.width&&a.height===this._png.height)n.data=a.data;else{const s=this._apng.frames.at(r-1);this.disposeFrame(a,s,n),this.addFrameDataToCanvas(n,a)}this._apng.frames.push(n)}}return this._apng}disposeFrame(r,n,a){switch(r.disposeOp){case tC.NONE:break;case tC.BACKGROUND:for(let s=0;s<this._png.height;s++)for(let i=0;i<this._png.width;i++){const l=(s*r.width+i)*this._png.channels;for(let c=0;c<this._png.channels;c++)a.data[l+c]=0}break;case tC.PREVIOUS:a.data.set(n.data);break;default:throw new Error("Unknown disposeOp")}}addFrameDataToCanvas(r,n){const a=1<<this._png.depth,s=(i,l)=>{const c=((i+n.yOffset)*this._png.width+n.xOffset+l)*this._png.channels,u=(i*n.width+l)*this._png.channels;return{index:c,frameIndex:u}};switch(n.blendOp){case C5.SOURCE:for(let i=0;i<n.height;i++)for(let l=0;l<n.width;l++){const{index:c,frameIndex:u}=s(i,l);for(let d=0;d<this._png.channels;d++)r.data[c+d]=n.data[u+d]}break;case C5.OVER:for(let i=0;i<n.height;i++)for(let l=0;l<n.width;l++){const{index:c,frameIndex:u}=s(i,l);for(let d=0;d<this._png.channels;d++){const f=n.data[u+this._png.channels-1]/a,h=d%(this._png.channels-1)===0?1:n.data[u+d],A=Math.floor(f*h+(1-f)*r.data[c+d]);r.data[c+d]+=A}}break;default:throw new Error("Unknown blendOp")}}decodeImage(){var n;if(this._inflator.err)throw new Error(`Error while decompressing the data: ${this._inflator.err}`);const r=this._isAnimated?((n=this._frames)==null?void 0:n.at(0)).data:this._inflator.result;if(this._filterMethod!==fQ.ADAPTIVE)throw new Error(`Filter method ${this._filterMethod} not supported`);if(this._interlaceMethod===N5.NO_INTERLACE)this._png.data=uQ({data:r,width:this._png.width,height:this._png.height,channels:this._png.channels,depth:this._png.depth});else if(this._interlaceMethod===N5.ADAM7)this._png.data=EEe({data:r,width:this._png.width,height:this._png.height,channels:this._png.channels,depth:this._png.depth});else throw new Error(`Interlace method ${this._interlaceMethod} not supported`);this._hasPalette&&(this._png.palette=this._palette),this._hasTransparency&&(this._png.transparency=this._transparency)}pushDataToFrame(){const r=this._inflator.result,n=this._frames.at(-1);n?n.data=r:this._frames.push({sequenceNumber:0,width:this._png.width,height:this._png.height,xOffset:0,yOffset:0,delayNumber:0,delayDenominator:0,disposeOp:tC.NONE,blendOp:C5.SOURCE,data:r}),this._inflator=new oQ,this._writingDataChunks=!1}}function VEe(t){if(t!==1&&t!==2&&t!==4&&t!==8&&t!==16)throw new Error(`invalid bit depth: ${t}`);return t}var AQ;(function(t){t[t.UNKNOWN=0]="UNKNOWN",t[t.METRE=1]="METRE"})(AQ||(AQ={}));function HEe(t,e){return new QEe(t,e).decode()}var un=function(){return typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:this}();function _5(){un.console&&typeof un.console.log=="function"&&un.console.log.apply(un.console,arguments)}var Da={log:_5,warn:function(t){un.console&&(typeof un.console.warn=="function"?un.console.warn.apply(un.console,arguments):_5.call(null,arguments))},error:function(t){un.console&&(typeof un.console.error=="function"?un.console.error.apply(un.console,arguments):_5(t))}};function E5(t,e,r){var n=new XMLHttpRequest;n.open("GET",t),n.responseType="blob",n.onload=function(){Pm(n.response,e,r)},n.onerror=function(){Da.error("could not download file")},n.send()}function hQ(t){var e=new XMLHttpRequest;e.open("HEAD",t,!1);try{e.send()}catch{}return e.status>=200&&e.status<=299}function rC(t){try{t.dispatchEvent(new MouseEvent("click"))}catch{var e=document.createEvent("MouseEvents");e.initMouseEvent("click",!0,!0,window,0,0,0,80,20,!1,!1,!1,!1,0,null),t.dispatchEvent(e)}}var Pm=un.saveAs||((typeof window>"u"?"undefined":wa(window))!=="object"||window!==un?function(){}:typeof HTMLAnchorElement<"u"&&"download"in HTMLAnchorElement.prototype?function(t,e,r){var n=un.URL||un.webkitURL,a=document.createElement("a");e=e||t.name||"download",a.download=e,a.rel="noopener",typeof t=="string"?(a.href=t,a.origin!==location.origin?hQ(a.href)?E5(t,e,r):rC(a,a.target="_blank"):rC(a)):(a.href=n.createObjectURL(t),setTimeout(function(){n.revokeObjectURL(a.href)},4e4),setTimeout(function(){rC(a)},0))}:"msSaveOrOpenBlob"in navigator?function(t,e,r){if(e=e||t.name||"download",typeof t=="string")if(hQ(t))E5(t,e,r);else{var n=document.createElement("a");n.href=t,n.target="_blank",setTimeout(function(){rC(n)})}else navigator.msSaveOrOpenBlob(function(a,s){return s===void 0?s={autoBom:!1}:wa(s)!=="object"&&(Da.warn("Deprecated: Expected third argument to be a object"),s={autoBom:!s}),s.autoBom&&/^\s*(?:text\/\S*|application\/xml|\S*\/\S*\+xml)\s*;.*charset\s*=\s*utf-8/i.test(a.type)?new Blob(["\uFEFF",a],{type:a.type}):a}(t,r),e)}:function(t,e,r,n){if((n=n||open("","_blank"))&&(n.document.title=n.document.body.innerText="downloading..."),typeof t=="string")return E5(t,e,r);var a=t.type==="application/octet-stream",s=/constructor/i.test(un.HTMLElement)||un.safari,i=/CriOS\/[\d]+/.test(navigator.userAgent);if((i||a&&s)&&(typeof FileReader>"u"?"undefined":wa(FileReader))==="object"){var l=new FileReader;l.onloadend=function(){var d=l.result;d=i?d:d.replace(/^data:[^;]*;/,"data:attachment/file;"),n?n.location.href=d:location=d,n=null},l.readAsDataURL(t)}else{var c=un.URL||un.webkitURL,u=c.createObjectURL(t);n?n.location=u:location.href=u,n=null,setTimeout(function(){c.revokeObjectURL(u)},4e4)}});/**
 * A class to parse color values
 * @author Stoyan Stefanov <sstoo@gmail.com>
 * {@link   http://www.phpied.com/rgb-color-parser-in-javascript/}
 * @license Use it if you like it
 */function qee(t){var e;t=t||"",this.ok=!1,t.charAt(0)=="#"&&(t=t.substr(1,6)),t={aliceblue:"f0f8ff",antiquewhite:"faebd7",aqua:"00ffff",aquamarine:"7fffd4",azure:"f0ffff",beige:"f5f5dc",bisque:"ffe4c4",black:"000000",blanchedalmond:"ffebcd",blue:"0000ff",blueviolet:"8a2be2",brown:"a52a2a",burlywood:"deb887",cadetblue:"5f9ea0",chartreuse:"7fff00",chocolate:"d2691e",coral:"ff7f50",cornflowerblue:"6495ed",cornsilk:"fff8dc",crimson:"dc143c",cyan:"00ffff",darkblue:"00008b",darkcyan:"008b8b",darkgoldenrod:"b8860b",darkgray:"a9a9a9",darkgreen:"006400",darkkhaki:"bdb76b",darkmagenta:"8b008b",darkolivegreen:"556b2f",darkorange:"ff8c00",darkorchid:"9932cc",darkred:"8b0000",darksalmon:"e9967a",darkseagreen:"8fbc8f",darkslateblue:"483d8b",darkslategray:"2f4f4f",darkturquoise:"00ced1",darkviolet:"9400d3",deeppink:"ff1493",deepskyblue:"00bfff",dimgray:"696969",dodgerblue:"1e90ff",feldspar:"d19275",firebrick:"b22222",floralwhite:"fffaf0",forestgreen:"228b22",fuchsia:"ff00ff",gainsboro:"dcdcdc",ghostwhite:"f8f8ff",gold:"ffd700",goldenrod:"daa520",gray:"808080",green:"008000",greenyellow:"adff2f",honeydew:"f0fff0",hotpink:"ff69b4",indianred:"cd5c5c",indigo:"4b0082",ivory:"fffff0",khaki:"f0e68c",lavender:"e6e6fa",lavenderblush:"fff0f5",lawngreen:"7cfc00",lemonchiffon:"fffacd",lightblue:"add8e6",lightcoral:"f08080",lightcyan:"e0ffff",lightgoldenrodyellow:"fafad2",lightgrey:"d3d3d3",lightgreen:"90ee90",lightpink:"ffb6c1",lightsalmon:"ffa07a",lightseagreen:"20b2aa",lightskyblue:"87cefa",lightslateblue:"8470ff",lightslategray:"778899",lightsteelblue:"b0c4de",lightyellow:"ffffe0",lime:"00ff00",limegreen:"32cd32",linen:"faf0e6",magenta:"ff00ff",maroon:"800000",mediumaquamarine:"66cdaa",mediumblue:"0000cd",mediumorchid:"ba55d3",mediumpurple:"9370d8",mediumseagreen:"3cb371",mediumslateblue:"7b68ee",mediumspringgreen:"00fa9a",mediumturquoise:"48d1cc",mediumvioletred:"c71585",midnightblue:"191970",mintcream:"f5fffa",mistyrose:"ffe4e1",moccasin:"ffe4b5",navajowhite:"ffdead",navy:"000080",oldlace:"fdf5e6",olive:"808000",olivedrab:"6b8e23",orange:"ffa500",orangered:"ff4500",orchid:"da70d6",palegoldenrod:"eee8aa",palegreen:"98fb98",paleturquoise:"afeeee",palevioletred:"d87093",papayawhip:"ffefd5",peachpuff:"ffdab9",peru:"cd853f",pink:"ffc0cb",plum:"dda0dd",powderblue:"b0e0e6",purple:"800080",red:"ff0000",rosybrown:"bc8f8f",royalblue:"4169e1",saddlebrown:"8b4513",salmon:"fa8072",sandybrown:"f4a460",seagreen:"2e8b57",seashell:"fff5ee",sienna:"a0522d",silver:"c0c0c0",skyblue:"87ceeb",slateblue:"6a5acd",slategray:"708090",snow:"fffafa",springgreen:"00ff7f",steelblue:"4682b4",tan:"d2b48c",teal:"008080",thistle:"d8bfd8",tomato:"ff6347",turquoise:"40e0d0",violet:"ee82ee",violetred:"d02090",wheat:"f5deb3",white:"ffffff",whitesmoke:"f5f5f5",yellow:"ffff00",yellowgreen:"9acd32"}[t=(t=t.replace(/ /g,"")).toLowerCase()]||t;for(var r=[{re:/^rgb\((\d{1,3}),\s*(\d{1,3}),\s*(\d{1,3})\)$/,example:["rgb(123, 234, 45)","rgb(255,234,245)"],process:function(l){return[parseInt(l[1]),parseInt(l[2]),parseInt(l[3])]}},{re:/^(\w{2})(\w{2})(\w{2})$/,example:["#00ff00","336699"],process:function(l){return[parseInt(l[1],16),parseInt(l[2],16),parseInt(l[3],16)]}},{re:/^(\w{1})(\w{1})(\w{1})$/,example:["#fb0","f0f"],process:function(l){return[parseInt(l[1]+l[1],16),parseInt(l[2]+l[2],16),parseInt(l[3]+l[3],16)]}}],n=0;n<r.length;n++){var a=r[n].re,s=r[n].process,i=a.exec(t);i&&(e=s(i),this.r=e[0],this.g=e[1],this.b=e[2],this.ok=!0)}this.r=this.r<0||isNaN(this.r)?0:this.r>255?255:this.r,this.g=this.g<0||isNaN(this.g)?0:this.g>255?255:this.g,this.b=this.b<0||isNaN(this.b)?0:this.b>255?255:this.b,this.toRGB=function(){return"rgb("+this.r+", "+this.g+", "+this.b+")"},this.toHex=function(){var l=this.r.toString(16),c=this.g.toString(16),u=this.b.toString(16);return l.length==1&&(l="0"+l),c.length==1&&(c="0"+c),u.length==1&&(u="0"+u),"#"+l+c+u}}var M_=un.atob.bind(un),mQ=un.btoa.bind(un);/**
 * @license
 * Joseph Myers does not specify a particular license for his work.
 *
 * Author: Joseph Myers
 * Accessed from: http://www.myersdaily.org/joseph/javascript/md5.js
 *
 * Modified by: Owen Leong
 */function S5(t,e){var r=t[0],n=t[1],a=t[2],s=t[3];r=el(r,n,a,s,e[0],7,-680876936),s=el(s,r,n,a,e[1],12,-389564586),a=el(a,s,r,n,e[2],17,606105819),n=el(n,a,s,r,e[3],22,-1044525330),r=el(r,n,a,s,e[4],7,-176418897),s=el(s,r,n,a,e[5],12,1200080426),a=el(a,s,r,n,e[6],17,-1473231341),n=el(n,a,s,r,e[7],22,-45705983),r=el(r,n,a,s,e[8],7,1770035416),s=el(s,r,n,a,e[9],12,-1958414417),a=el(a,s,r,n,e[10],17,-42063),n=el(n,a,s,r,e[11],22,-1990404162),r=el(r,n,a,s,e[12],7,1804603682),s=el(s,r,n,a,e[13],12,-40341101),a=el(a,s,r,n,e[14],17,-1502002290),r=tl(r,n=el(n,a,s,r,e[15],22,1236535329),a,s,e[1],5,-165796510),s=tl(s,r,n,a,e[6],9,-1069501632),a=tl(a,s,r,n,e[11],14,643717713),n=tl(n,a,s,r,e[0],20,-373897302),r=tl(r,n,a,s,e[5],5,-701558691),s=tl(s,r,n,a,e[10],9,38016083),a=tl(a,s,r,n,e[15],14,-660478335),n=tl(n,a,s,r,e[4],20,-405537848),r=tl(r,n,a,s,e[9],5,568446438),s=tl(s,r,n,a,e[14],9,-1019803690),a=tl(a,s,r,n,e[3],14,-187363961),n=tl(n,a,s,r,e[8],20,1163531501),r=tl(r,n,a,s,e[13],5,-1444681467),s=tl(s,r,n,a,e[2],9,-51403784),a=tl(a,s,r,n,e[7],14,1735328473),r=rl(r,n=tl(n,a,s,r,e[12],20,-1926607734),a,s,e[5],4,-378558),s=rl(s,r,n,a,e[8],11,-2022574463),a=rl(a,s,r,n,e[11],16,1839030562),n=rl(n,a,s,r,e[14],23,-35309556),r=rl(r,n,a,s,e[1],4,-1530992060),s=rl(s,r,n,a,e[4],11,1272893353),a=rl(a,s,r,n,e[7],16,-155497632),n=rl(n,a,s,r,e[10],23,-1094730640),r=rl(r,n,a,s,e[13],4,681279174),s=rl(s,r,n,a,e[0],11,-358537222),a=rl(a,s,r,n,e[3],16,-722521979),n=rl(n,a,s,r,e[6],23,76029189),r=rl(r,n,a,s,e[9],4,-640364487),s=rl(s,r,n,a,e[12],11,-421815835),a=rl(a,s,r,n,e[15],16,530742520),r=nl(r,n=rl(n,a,s,r,e[2],23,-995338651),a,s,e[0],6,-198630844),s=nl(s,r,n,a,e[7],10,1126891415),a=nl(a,s,r,n,e[14],15,-1416354905),n=nl(n,a,s,r,e[5],21,-57434055),r=nl(r,n,a,s,e[12],6,1700485571),s=nl(s,r,n,a,e[3],10,-1894986606),a=nl(a,s,r,n,e[10],15,-1051523),n=nl(n,a,s,r,e[1],21,-2054922799),r=nl(r,n,a,s,e[8],6,1873313359),s=nl(s,r,n,a,e[15],10,-30611744),a=nl(a,s,r,n,e[6],15,-1560198380),n=nl(n,a,s,r,e[13],21,1309151649),r=nl(r,n,a,s,e[4],6,-145523070),s=nl(s,r,n,a,e[11],10,-1120210379),a=nl(a,s,r,n,e[2],15,718787259),n=nl(n,a,s,r,e[9],21,-343485551),t[0]=A0(r,t[0]),t[1]=A0(n,t[1]),t[2]=A0(a,t[2]),t[3]=A0(s,t[3])}function b4(t,e,r,n,a,s){return e=A0(A0(e,t),A0(n,s)),A0(e<<a|e>>>32-a,r)}function el(t,e,r,n,a,s,i){return b4(e&r|~e&n,t,e,a,s,i)}function tl(t,e,r,n,a,s,i){return b4(e&n|r&~n,t,e,a,s,i)}function rl(t,e,r,n,a,s,i){return b4(e^r^n,t,e,a,s,i)}function nl(t,e,r,n,a,s,i){return b4(r^(e|~n),t,e,a,s,i)}function zee(t){var e,r=t.length,n=[1732584193,-271733879,-1732584194,271733878];for(e=64;e<=t.length;e+=64)S5(n,$Ee(t.substring(e-64,e)));t=t.substring(e-64);var a=[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0];for(e=0;e<t.length;e++)a[e>>2]|=t.charCodeAt(e)<<(e%4<<3);if(a[e>>2]|=128<<(e%4<<3),e>55)for(S5(n,a),e=0;e<16;e++)a[e]=0;return a[14]=8*r,S5(n,a),n}function $Ee(t){var e,r=[];for(e=0;e<64;e+=4)r[e>>2]=t.charCodeAt(e)+(t.charCodeAt(e+1)<<8)+(t.charCodeAt(e+2)<<16)+(t.charCodeAt(e+3)<<24);return r}var pQ="0123456789abcdef".split("");function KEe(t){for(var e="",r=0;r<4;r++)e+=pQ[t>>8*r+4&15]+pQ[t>>8*r&15];return e}function GEe(t){return String.fromCharCode(255&t,(65280&t)>>8,(16711680&t)>>16,(4278190080&t)>>24)}function HT(t){return zee(t).map(GEe).join("")}var qEe=function(t){for(var e=0;e<t.length;e++)t[e]=KEe(t[e]);return t.join("")}(zee("hello"))!="5d41402abc4b2a76b9719d911017c592";function A0(t,e){if(qEe){var r=(65535&t)+(65535&e);return(t>>16)+(e>>16)+(r>>16)<<16|65535&r}return t+e&4294967295}/**
 * @license
 * FPDF is released under a permissive license: there is no usage restriction.
 * You may embed it freely in your application (commercial or not), with or
 * without modifications.
 *
 * Reference: http://www.fpdf.org/en/script/script37.php
 */function $T(t,e){var r,n,a,s;if(t!==r){for(var i=(a=t,s=1+(256/t.length|0),new Array(s+1).join(a)),l=[],c=0;c<256;c++)l[c]=c;var u=0;for(c=0;c<256;c++){var d=l[c];u=(u+d+i.charCodeAt(c))%256,l[c]=l[u],l[u]=d}r=t,n=l}else l=n;var f=e.length,h=0,A=0,m="";for(c=0;c<f;c++)A=(A+(d=l[h=(h+1)%256]))%256,l[h]=l[A],l[A]=d,i=l[(l[h]+l[A])%256],m+=String.fromCharCode(e.charCodeAt(c)^i);return m}/**
 * @license
 * Licensed under the MIT License.
 * http://opensource.org/licenses/mit-license
 * Author: Owen Leong (@owenl131)
 * Date: 15 Oct 2020
 * References:
 * https://www.cs.cmu.edu/~dst/Adobe/Gallery/anon21jul01-pdf-encryption.txt
 * https://github.com/foliojs/pdfkit/blob/master/lib/security.js
 * http://www.fpdf.org/en/script/script37.php
 */var gQ={print:4,modify:8,copy:16,"annot-forms":32};function nx(t,e,r,n){this.v=1,this.r=2;var a=192;t.forEach(function(l){if(gQ.perm!==void 0)throw new Error("Invalid permission: "+l);a+=gQ[l]}),this.padding="(N^NuAd\0NV\b..\0h>/\fdSiz";var s=(e+this.padding).substr(0,32),i=(r+this.padding).substr(0,32);this.O=this.processOwnerPassword(s,i),this.P=-(1+(255^a)),this.encryptionKey=HT(s+this.O+this.lsbFirstWord(this.P)+this.hexToBytes(n)).substr(0,5),this.U=$T(this.encryptionKey,this.padding)}function ax(t){if(/[^\u0000-\u00ff]/.test(t))throw new Error("Invalid PDF Name Object: "+t+", Only accept ASCII characters.");for(var e="",r=t.length,n=0;n<r;n++){var a=t.charCodeAt(n);e+=a<33||a===35||a===37||a===40||a===41||a===47||a===60||a===62||a===91||a===93||a===123||a===125||a>126?"#"+("0"+a.toString(16)).slice(-2):t[n]}return e}function xQ(t){if(wa(t)!=="object")throw new Error("Invalid Context passed to initialize PubSub (jsPDF-module)");var e={};this.subscribe=function(r,n,a){if(a=a||!1,typeof r!="string"||typeof n!="function"||typeof a!="boolean")throw new Error("Invalid arguments passed to PubSub.subscribe (jsPDF-module)");e.hasOwnProperty(r)||(e[r]={});var s=Math.random().toString(35);return e[r][s]=[n,!!a],s},this.unsubscribe=function(r){for(var n in e)if(e[n][r])return delete e[n][r],Object.keys(e[n]).length===0&&delete e[n],!0;return!1},this.publish=function(r){if(e.hasOwnProperty(r)){var n=Array.prototype.slice.call(arguments,1),a=[];for(var s in e[r]){var i=e[r][s];try{i[0].apply(t,n)}catch(l){un.console&&Da.error("jsPDF PubSub Error",l.message,l)}i[1]&&a.push(s)}a.length&&a.forEach(this.unsubscribe)}},this.getTopics=function(){return e}}function Jb(t){if(!(this instanceof Jb))return new Jb(t);var e="opacity,stroke-opacity".split(",");for(var r in t)t.hasOwnProperty(r)&&e.indexOf(r)>=0&&(this[r]=t[r]);this.id="",this.objectNumber=-1}function Wee(t,e){this.gState=t,this.matrix=e,this.id="",this.objectNumber=-1}function s0(t,e,r,n,a){if(!(this instanceof s0))return new s0(t,e,r,n,a);this.type=t==="axial"?2:3,this.coords=e,this.colors=r,Wee.call(this,n,a)}function qm(t,e,r,n,a){if(!(this instanceof qm))return new qm(t,e,r,n,a);this.boundingBox=t,this.xStep=e,this.yStep=r,this.stream="",this.cloneIndex=0,Wee.call(this,n,a)}function Or(t){var e,r=typeof arguments[0]=="string"?arguments[0]:"p",n=arguments[1],a=arguments[2],s=arguments[3],i=[],l=1,c=16,u="S",d=null;wa(t=t||{})==="object"&&(r=t.orientation,n=t.unit||n,a=t.format||a,s=t.compress||t.compressPdf||s,(d=t.encryption||null)!==null&&(d.userPassword=d.userPassword||"",d.ownerPassword=d.ownerPassword||"",d.userPermissions=d.userPermissions||[]),l=typeof t.userUnit=="number"?Math.abs(t.userUnit):1,t.precision!==void 0&&(e=t.precision),t.floatPrecision!==void 0&&(c=t.floatPrecision),u=t.defaultPathOperation||"S"),i=t.filters||(s===!0?["FlateEncode"]:i),n=n||"mm",r=(""+(r||"P")).toLowerCase();var f=t.putOnlyUsedFonts||!1,h={},A={internal:{},__private__:{}};A.__private__.PubSub=xQ;var m="1.3",p=A.__private__.getPdfVersion=function(){return m};A.__private__.setPdfVersion=function(Q){m=Q};var g={a0:[2383.94,3370.39],a1:[1683.78,2383.94],a2:[1190.55,1683.78],a3:[841.89,1190.55],a4:[595.28,841.89],a5:[419.53,595.28],a6:[297.64,419.53],a7:[209.76,297.64],a8:[147.4,209.76],a9:[104.88,147.4],a10:[73.7,104.88],b0:[2834.65,4008.19],b1:[2004.09,2834.65],b2:[1417.32,2004.09],b3:[1000.63,1417.32],b4:[708.66,1000.63],b5:[498.9,708.66],b6:[354.33,498.9],b7:[249.45,354.33],b8:[175.75,249.45],b9:[124.72,175.75],b10:[87.87,124.72],c0:[2599.37,3676.54],c1:[1836.85,2599.37],c2:[1298.27,1836.85],c3:[918.43,1298.27],c4:[649.13,918.43],c5:[459.21,649.13],c6:[323.15,459.21],c7:[229.61,323.15],c8:[161.57,229.61],c9:[113.39,161.57],c10:[79.37,113.39],dl:[311.81,623.62],letter:[612,792],"government-letter":[576,756],legal:[612,1008],"junior-legal":[576,360],ledger:[1224,792],tabloid:[792,1224],"credit-card":[153,243]};A.__private__.getPageFormats=function(){return g};var x=A.__private__.getPageFormat=function(Q){return g[Q]};a=a||"a4";var y="compat",b="advanced",w=y;function j(){this.saveGraphicsState(),J(new ae(ve,0,0,-ve,0,cu()*ve).toString()+" cm"),this.setFontSize(this.getFontSize()/ve),u="n",w=b}function I(){this.restoreGraphicsState(),u="S",w=y}var _=A.__private__.combineFontStyleAndFontWeight=function(Q,we){if(Q=="bold"&&we=="normal"||Q=="bold"&&we==400||Q=="normal"&&we=="italic"||Q=="bold"&&we=="italic")throw new Error("Invalid Combination of fontweight and fontstyle");return we&&(Q=we==400||we==="normal"?Q==="italic"?"italic":"normal":we!=700&&we!=="bold"||Q!=="normal"?(we==700?"bold":we)+""+Q:"bold"),Q};A.advancedAPI=function(Q){var we=w===y;return we&&j.call(this),typeof Q!="function"||(Q(this),we&&I.call(this)),this},A.compatAPI=function(Q){var we=w===b;return we&&I.call(this),typeof Q!="function"||(Q(this),we&&j.call(this)),this},A.isAdvancedAPI=function(){return w===b};var E,S=function(Q){if(w!==b)throw new Error(Q+" is only available in 'advanced' API mode. You need to call advancedAPI() first.")},k=A.roundToPrecision=A.__private__.roundToPrecision=function(Q,we){var Ye=e||we;if(isNaN(Q)||isNaN(Ye))throw new Error("Invalid argument passed to jsPDF.roundToPrecision");return Q.toFixed(Ye).replace(/0+$/,"")};E=A.hpf=A.__private__.hpf=typeof c=="number"?function(Q){if(isNaN(Q))throw new Error("Invalid argument passed to jsPDF.hpf");return k(Q,c)}:c==="smart"?function(Q){if(isNaN(Q))throw new Error("Invalid argument passed to jsPDF.hpf");return k(Q,Q>-1&&Q<1?16:5)}:function(Q){if(isNaN(Q))throw new Error("Invalid argument passed to jsPDF.hpf");return k(Q,16)};var P=A.f2=A.__private__.f2=function(Q){if(isNaN(Q))throw new Error("Invalid argument passed to jsPDF.f2");return k(Q,2)},T=A.__private__.f3=function(Q){if(isNaN(Q))throw new Error("Invalid argument passed to jsPDF.f3");return k(Q,3)},F=A.scale=A.__private__.scale=function(Q){if(isNaN(Q))throw new Error("Invalid argument passed to jsPDF.scale");return w===y?Q*ve:w===b?Q:void 0},Y=function(Q){return F(function(we){return w===y?cu()-we:w===b?we:void 0}(Q))};A.__private__.setPrecision=A.setPrecision=function(Q){typeof parseInt(Q,10)=="number"&&(e=parseInt(Q,10))};var he,ue="00000000000000000000000000000000",fe=A.__private__.getFileId=function(){return ue},me=A.__private__.setFileId=function(Q){return ue=Q!==void 0&&/^[a-fA-F0-9]{32}$/.test(Q)?Q.toUpperCase():ue.split("").map(function(){return"ABCDEF0123456789".charAt(Math.floor(16*Math.random()))}).join(""),d!==null&&(Bt=new nx(d.userPermissions,d.userPassword,d.ownerPassword,ue)),ue};A.setFileId=function(Q){return me(Q),this},A.getFileId=function(){return fe()};var ne=A.__private__.convertDateToPDFDate=function(Q){var we=Q.getTimezoneOffset(),Ye=we<0?"+":"-",ft=Math.floor(Math.abs(we/60)),Nt=Math.abs(we%60),tr=[Ye,R(ft),"'",R(Nt),"'"].join("");return["D:",Q.getFullYear(),R(Q.getMonth()+1),R(Q.getDate()),R(Q.getHours()),R(Q.getMinutes()),R(Q.getSeconds()),tr].join("")},Pe=A.__private__.convertPDFDateToDate=function(Q){var we=parseInt(Q.substr(2,4),10),Ye=parseInt(Q.substr(6,2),10)-1,ft=parseInt(Q.substr(8,2),10),Nt=parseInt(Q.substr(10,2),10),tr=parseInt(Q.substr(12,2),10),lr=parseInt(Q.substr(14,2),10);return new Date(we,Ye,ft,Nt,tr,lr,0)},Ie=A.__private__.setCreationDate=function(Q){var we;if(Q===void 0&&(Q=new Date),Q instanceof Date)we=ne(Q);else{if(!/^D:(20[0-2][0-9]|203[0-7]|19[7-9][0-9])(0[0-9]|1[0-2])([0-2][0-9]|3[0-1])(0[0-9]|1[0-9]|2[0-3])(0[0-9]|[1-5][0-9])(0[0-9]|[1-5][0-9])(\+0[0-9]|\+1[0-4]|-0[0-9]|-1[0-1])'(0[0-9]|[1-5][0-9])'?$/.test(Q))throw new Error("Invalid argument passed to jsPDF.setCreationDate");we=Q}return he=we},O=A.__private__.getCreationDate=function(Q){var we=he;return Q==="jsDate"&&(we=Pe(he)),we};A.setCreationDate=function(Q){return Ie(Q),this},A.getCreationDate=function(Q){return O(Q)};var H,R=A.__private__.padd2=function(Q){return("0"+parseInt(Q)).slice(-2)},M=A.__private__.padd2Hex=function(Q){return("00"+(Q=Q.toString())).substr(Q.length)},K=0,W=[],D=[],L=0,Z=[],ge=[],U=!1,Ge=D;A.__private__.setCustomOutputDestination=function(Q){U=!0,Ge=Q};var ie=function(Q){U||(Ge=Q)};A.__private__.resetCustomOutputDestination=function(){U=!1,Ge=D};var J=A.__private__.out=function(Q){return Q=Q.toString(),L+=Q.length+1,Ge.push(Q),Ge},je=A.__private__.write=function(Q){return J(arguments.length===1?Q.toString():Array.prototype.join.call(arguments," "))},z=A.__private__.getArrayBuffer=function(Q){for(var we=Q.length,Ye=new ArrayBuffer(we),ft=new Uint8Array(Ye);we--;)ft[we]=Q.charCodeAt(we);return Ye},Ae=[["Helvetica","helvetica","normal","WinAnsiEncoding"],["Helvetica-Bold","helvetica","bold","WinAnsiEncoding"],["Helvetica-Oblique","helvetica","italic","WinAnsiEncoding"],["Helvetica-BoldOblique","helvetica","bolditalic","WinAnsiEncoding"],["Courier","courier","normal","WinAnsiEncoding"],["Courier-Bold","courier","bold","WinAnsiEncoding"],["Courier-Oblique","courier","italic","WinAnsiEncoding"],["Courier-BoldOblique","courier","bolditalic","WinAnsiEncoding"],["Times-Roman","times","normal","WinAnsiEncoding"],["Times-Bold","times","bold","WinAnsiEncoding"],["Times-Italic","times","italic","WinAnsiEncoding"],["Times-BoldItalic","times","bolditalic","WinAnsiEncoding"],["ZapfDingbats","zapfdingbats","normal",null],["Symbol","symbol","normal",null]];A.__private__.getStandardFonts=function(){return Ae};var ye=t.fontSize||16;A.__private__.setFontSize=A.setFontSize=function(Q){return ye=w===b?Q/ve:Q,this};var Qe,st=A.__private__.getFontSize=A.getFontSize=function(){return w===y?ye:ye*ve},ut=t.R2L||!1;A.__private__.setR2L=A.setR2L=function(Q){return ut=Q,this},A.__private__.getR2L=A.getR2L=function(){return ut};var De,it=A.__private__.setZoomMode=function(Q){if(/^(?:\d+\.\d*|\d*\.\d+|\d+)%$/.test(Q))Qe=Q;else if(isNaN(Q)){if([void 0,null,"fullwidth","fullheight","fullpage","original"].indexOf(Q)===-1)throw new Error('zoom must be Integer (e.g. 2), a percentage Value (e.g. 300%) or fullwidth, fullheight, fullpage, original. "'+Q+'" is not recognized.');Qe=Q}else Qe=parseInt(Q,10)};A.__private__.getZoomMode=function(){return Qe};var dt,ce=A.__private__.setPageMode=function(Q){if([void 0,null,"UseNone","UseOutlines","UseThumbs","FullScreen"].indexOf(Q)==-1)throw new Error('Page mode must be one of UseNone, UseOutlines, UseThumbs, or FullScreen. "'+Q+'" is not recognized.');De=Q};A.__private__.getPageMode=function(){return De};var oe=A.__private__.setLayoutMode=function(Q){if([void 0,null,"continuous","single","twoleft","tworight","two"].indexOf(Q)==-1)throw new Error('Layout mode must be one of continuous, single, twoleft, tworight. "'+Q+'" is not recognized.');dt=Q};A.__private__.getLayoutMode=function(){return dt},A.__private__.setDisplayMode=A.setDisplayMode=function(Q,we,Ye){return it(Q),oe(we),ce(Ye),this};var Me={title:"",subject:"",author:"",keywords:"",creator:""};A.__private__.getDocumentProperty=function(Q){if(Object.keys(Me).indexOf(Q)===-1)throw new Error("Invalid argument passed to jsPDF.getDocumentProperty");return Me[Q]},A.__private__.getDocumentProperties=function(){return Me},A.__private__.setDocumentProperties=A.setProperties=A.setDocumentProperties=function(Q){for(var we in Me)Me.hasOwnProperty(we)&&Q[we]&&(Me[we]=Q[we]);return this},A.__private__.setDocumentProperty=function(Q,we){if(Object.keys(Me).indexOf(Q)===-1)throw new Error("Invalid arguments passed to jsPDF.setDocumentProperty");return Me[Q]=we};var Le,ve,le,Ue,rt,mt={},gt={},Ct=[],jt={},xe={},He={},Ce={},lt=null,nt=0,Xe=[],It=new xQ(A),$t=t.hotfixes||[],Ke={},wt={},q=[],ae=function Q(we,Ye,ft,Nt,tr,lr){if(!(this instanceof Q))return new Q(we,Ye,ft,Nt,tr,lr);isNaN(we)&&(we=1),isNaN(Ye)&&(Ye=0),isNaN(ft)&&(ft=0),isNaN(Nt)&&(Nt=1),isNaN(tr)&&(tr=0),isNaN(lr)&&(lr=0),this._matrix=[we,Ye,ft,Nt,tr,lr]};Object.defineProperty(ae.prototype,"sx",{get:function(){return this._matrix[0]},set:function(Q){this._matrix[0]=Q}}),Object.defineProperty(ae.prototype,"shy",{get:function(){return this._matrix[1]},set:function(Q){this._matrix[1]=Q}}),Object.defineProperty(ae.prototype,"shx",{get:function(){return this._matrix[2]},set:function(Q){this._matrix[2]=Q}}),Object.defineProperty(ae.prototype,"sy",{get:function(){return this._matrix[3]},set:function(Q){this._matrix[3]=Q}}),Object.defineProperty(ae.prototype,"tx",{get:function(){return this._matrix[4]},set:function(Q){this._matrix[4]=Q}}),Object.defineProperty(ae.prototype,"ty",{get:function(){return this._matrix[5]},set:function(Q){this._matrix[5]=Q}}),Object.defineProperty(ae.prototype,"a",{get:function(){return this._matrix[0]},set:function(Q){this._matrix[0]=Q}}),Object.defineProperty(ae.prototype,"b",{get:function(){return this._matrix[1]},set:function(Q){this._matrix[1]=Q}}),Object.defineProperty(ae.prototype,"c",{get:function(){return this._matrix[2]},set:function(Q){this._matrix[2]=Q}}),Object.defineProperty(ae.prototype,"d",{get:function(){return this._matrix[3]},set:function(Q){this._matrix[3]=Q}}),Object.defineProperty(ae.prototype,"e",{get:function(){return this._matrix[4]},set:function(Q){this._matrix[4]=Q}}),Object.defineProperty(ae.prototype,"f",{get:function(){return this._matrix[5]},set:function(Q){this._matrix[5]=Q}}),Object.defineProperty(ae.prototype,"rotation",{get:function(){return Math.atan2(this.shx,this.sx)}}),Object.defineProperty(ae.prototype,"scaleX",{get:function(){return this.decompose().scale.sx}}),Object.defineProperty(ae.prototype,"scaleY",{get:function(){return this.decompose().scale.sy}}),Object.defineProperty(ae.prototype,"isIdentity",{get:function(){return this.sx===1&&this.shy===0&&this.shx===0&&this.sy===1&&this.tx===0&&this.ty===0}}),ae.prototype.join=function(Q){return[this.sx,this.shy,this.shx,this.sy,this.tx,this.ty].map(E).join(Q)},ae.prototype.multiply=function(Q){var we=Q.sx*this.sx+Q.shy*this.shx,Ye=Q.sx*this.shy+Q.shy*this.sy,ft=Q.shx*this.sx+Q.sy*this.shx,Nt=Q.shx*this.shy+Q.sy*this.sy,tr=Q.tx*this.sx+Q.ty*this.shx+this.tx,lr=Q.tx*this.shy+Q.ty*this.sy+this.ty;return new ae(we,Ye,ft,Nt,tr,lr)},ae.prototype.decompose=function(){var Q=this.sx,we=this.shy,Ye=this.shx,ft=this.sy,Nt=this.tx,tr=this.ty,lr=Math.sqrt(Q*Q+we*we),Fr=(Q/=lr)*Ye+(we/=lr)*ft;Ye-=Q*Fr,ft-=we*Fr;var Qr=Math.sqrt(Ye*Ye+ft*ft);return Fr/=Qr,Q*(ft/=Qr)<we*(Ye/=Qr)&&(Q=-Q,we=-we,Fr=-Fr,lr=-lr),{scale:new ae(lr,0,0,Qr,0,0),translate:new ae(1,0,0,1,Nt,tr),rotate:new ae(Q,we,-we,Q,0,0),skew:new ae(1,0,Fr,1,0,0)}},ae.prototype.toString=function(Q){return this.join(" ")},ae.prototype.inversed=function(){var Q=this.sx,we=this.shy,Ye=this.shx,ft=this.sy,Nt=this.tx,tr=this.ty,lr=1/(Q*ft-we*Ye),Fr=ft*lr,Qr=-we*lr,rn=-Ye*lr,An=Q*lr;return new ae(Fr,Qr,rn,An,-Fr*Nt-rn*tr,-Qr*Nt-An*tr)},ae.prototype.applyToPoint=function(Q){var we=Q.x*this.sx+Q.y*this.shx+this.tx,Ye=Q.x*this.shy+Q.y*this.sy+this.ty;return new ou(we,Ye)},ae.prototype.applyToRectangle=function(Q){var we=this.applyToPoint(Q),Ye=this.applyToPoint(new ou(Q.x+Q.w,Q.y+Q.h));return new hh(we.x,we.y,Ye.x-we.x,Ye.y-we.y)},ae.prototype.clone=function(){var Q=this.sx,we=this.shy,Ye=this.shx,ft=this.sy,Nt=this.tx,tr=this.ty;return new ae(Q,we,Ye,ft,Nt,tr)},A.Matrix=ae;var ee=A.matrixMult=function(Q,we){return we.multiply(Q)},be=new ae(1,0,0,1,0,0);A.unitMatrix=A.identityMatrix=be;var _e=function(Q,we){if(!xe[Q]){var Ye=(we instanceof s0?"Sh":"P")+(Object.keys(jt).length+1).toString(10);we.id=Ye,xe[Q]=Ye,jt[Ye]=we,It.publish("addPattern",we)}};A.ShadingPattern=s0,A.TilingPattern=qm,A.addShadingPattern=function(Q,we){return S("addShadingPattern()"),_e(Q,we),this},A.beginTilingPattern=function(Q){S("beginTilingPattern()"),zd(Q.boundingBox[0],Q.boundingBox[1],Q.boundingBox[2]-Q.boundingBox[0],Q.boundingBox[3]-Q.boundingBox[1],Q.matrix)},A.endTilingPattern=function(Q,we){S("endTilingPattern()"),we.stream=ge[H].join(`
`),_e(Q,we),It.publish("endTilingPattern",we),q.pop().restore()};var Be,tt=A.__private__.newObject=function(){var Q=ot();return te(Q,!0),Q},ot=A.__private__.newObjectDeferred=function(){return K++,W[K]=function(){return L},K},te=function(Q,we){return we=typeof we=="boolean"&&we,W[Q]=L,we&&J(Q+" 0 obj"),Q},V=A.__private__.newAdditionalObject=function(){var Q={objId:ot(),content:""};return Z.push(Q),Q},re=ot(),pe=ot(),Ee=A.__private__.decodeColorString=function(Q){var we=Q.split(" ");if(we.length!==2||we[1]!=="g"&&we[1]!=="G")we.length!==5||we[4]!=="k"&&we[4]!=="K"||(we=[(1-we[0])*(1-we[3]),(1-we[1])*(1-we[3]),(1-we[2])*(1-we[3]),"r"]);else{var Ye=parseFloat(we[0]);we=[Ye,Ye,Ye,"r"]}for(var ft="#",Nt=0;Nt<3;Nt++)ft+=("0"+Math.floor(255*parseFloat(we[Nt])).toString(16)).slice(-2);return ft},Se=A.__private__.encodeColorString=function(Q){var we;typeof Q=="string"&&(Q={ch1:Q});var Ye=Q.ch1,ft=Q.ch2,Nt=Q.ch3,tr=Q.ch4,lr=Q.pdfColorType==="draw"?["G","RG","K"]:["g","rg","k"];if(typeof Ye=="string"&&Ye.charAt(0)!=="#"){var Fr=new qee(Ye);if(Fr.ok)Ye=Fr.toHex();else if(!/^\d*\.?\d*$/.test(Ye))throw new Error('Invalid color "'+Ye+'" passed to jsPDF.encodeColorString.')}if(typeof Ye=="string"&&/^#[0-9A-Fa-f]{3}$/.test(Ye)&&(Ye="#"+Ye[1]+Ye[1]+Ye[2]+Ye[2]+Ye[3]+Ye[3]),typeof Ye=="string"&&/^#[0-9A-Fa-f]{6}$/.test(Ye)){var Qr=parseInt(Ye.substr(1),16);Ye=Qr>>16&255,ft=Qr>>8&255,Nt=255&Qr}if(ft===void 0||tr===void 0&&Ye===ft&&ft===Nt)we=typeof Ye=="string"?Ye+" "+lr[0]:Q.precision===2?P(Ye/255)+" "+lr[0]:T(Ye/255)+" "+lr[0];else if(tr===void 0||wa(tr)==="object"){if(tr&&!isNaN(tr.a)&&tr.a===0)return["1.","1.","1.",lr[1]].join(" ");we=typeof Ye=="string"?[Ye,ft,Nt,lr[1]].join(" "):Q.precision===2?[P(Ye/255),P(ft/255),P(Nt/255),lr[1]].join(" "):[T(Ye/255),T(ft/255),T(Nt/255),lr[1]].join(" ")}else we=typeof Ye=="string"?[Ye,ft,Nt,tr,lr[2]].join(" "):Q.precision===2?[P(Ye),P(ft),P(Nt),P(tr),lr[2]].join(" "):[T(Ye),T(ft),T(Nt),T(tr),lr[2]].join(" ");return we},Re=A.__private__.getFilters=function(){return i},et=A.__private__.putStream=function(Q){var we=(Q=Q||{}).data||"",Ye=Q.filters||Re(),ft=Q.alreadyAppliedFilters||[],Nt=Q.addLength1||!1,tr=we.length,lr=Q.objectId,Fr=function(Rs){return Rs};if(d!==null&&lr===void 0)throw new Error("ObjectId must be passed to putStream for file encryption");d!==null&&(Fr=Bt.encryptor(lr,0));var Qr={};Ye===!0&&(Ye=["FlateEncode"]);var rn=Q.additionalKeyValues||[],An=(Qr=Or.API.processDataByFilters!==void 0?Or.API.processDataByFilters(we,Ye):{data:we,reverseChain:[]}).reverseChain+(Array.isArray(ft)?ft.join(" "):ft.toString());if(Qr.data.length!==0&&(rn.push({key:"Length",value:Qr.data.length}),Nt===!0&&rn.push({key:"Length1",value:tr})),An.length!=0)if(An.split("/").length-1==1)rn.push({key:"Filter",value:An});else{rn.push({key:"Filter",value:"["+An+"]"});for(var On=0;On<rn.length;On+=1)if(rn[On].key==="DecodeParms"){for(var na=[],bs=0;bs<Qr.reverseChain.split("/").length-1;bs+=1)na.push("null");na.push(rn[On].value),rn[On].value="["+na.join(" ")+"]"}}J("<<");for(var fa=0;fa<rn.length;fa++)J("/"+rn[fa].key+" "+rn[fa].value);J(">>"),Qr.data.length!==0&&(J("stream"),J(Fr(Qr.data)),J("endstream"))},We=A.__private__.putPage=function(Q){var we=Q.number,Ye=Q.data,ft=Q.objId,Nt=Q.contentsObjId;te(ft,!0),J("<</Type /Page"),J("/Parent "+Q.rootDictionaryObjId+" 0 R"),J("/Resources "+Q.resourceDictionaryObjId+" 0 R"),J("/MediaBox ["+parseFloat(E(Q.mediaBox.bottomLeftX))+" "+parseFloat(E(Q.mediaBox.bottomLeftY))+" "+E(Q.mediaBox.topRightX)+" "+E(Q.mediaBox.topRightY)+"]"),Q.cropBox!==null&&J("/CropBox ["+E(Q.cropBox.bottomLeftX)+" "+E(Q.cropBox.bottomLeftY)+" "+E(Q.cropBox.topRightX)+" "+E(Q.cropBox.topRightY)+"]"),Q.bleedBox!==null&&J("/BleedBox ["+E(Q.bleedBox.bottomLeftX)+" "+E(Q.bleedBox.bottomLeftY)+" "+E(Q.bleedBox.topRightX)+" "+E(Q.bleedBox.topRightY)+"]"),Q.trimBox!==null&&J("/TrimBox ["+E(Q.trimBox.bottomLeftX)+" "+E(Q.trimBox.bottomLeftY)+" "+E(Q.trimBox.topRightX)+" "+E(Q.trimBox.topRightY)+"]"),Q.artBox!==null&&J("/ArtBox ["+E(Q.artBox.bottomLeftX)+" "+E(Q.artBox.bottomLeftY)+" "+E(Q.artBox.topRightX)+" "+E(Q.artBox.topRightY)+"]"),typeof Q.userUnit=="number"&&Q.userUnit!==1&&J("/UserUnit "+Q.userUnit),It.publish("putPage",{objId:ft,pageContext:Xe[we],pageNumber:we,page:Ye}),J("/Contents "+Nt+" 0 R"),J(">>"),J("endobj");var tr=Ye.join(`
`);return w===b&&(tr+=`
Q`),te(Nt,!0),et({data:tr,filters:Re(),objectId:Nt}),J("endobj"),ft},At=A.__private__.putPages=function(){var Q,we,Ye=[];for(Q=1;Q<=nt;Q++)Xe[Q].objId=ot(),Xe[Q].contentsObjId=ot();for(Q=1;Q<=nt;Q++)Ye.push(We({number:Q,data:ge[Q],objId:Xe[Q].objId,contentsObjId:Xe[Q].contentsObjId,mediaBox:Xe[Q].mediaBox,cropBox:Xe[Q].cropBox,bleedBox:Xe[Q].bleedBox,trimBox:Xe[Q].trimBox,artBox:Xe[Q].artBox,userUnit:Xe[Q].userUnit,rootDictionaryObjId:re,resourceDictionaryObjId:pe}));te(re,!0),J("<</Type /Pages");var ft="/Kids [";for(we=0;we<nt;we++)ft+=Ye[we]+" 0 R ";J(ft+"]"),J("/Count "+nt),J(">>"),J("endobj"),It.publish("postPutPages")},vt=function(Q){It.publish("putFont",{font:Q,out:J,newObject:tt,putStream:et}),Q.isAlreadyPutted!==!0&&(Q.objectNumber=tt(),J("<<"),J("/Type /Font"),J("/BaseFont /"+ax(Q.postScriptName)),J("/Subtype /Type1"),typeof Q.encoding=="string"&&J("/Encoding /"+Q.encoding),J("/FirstChar 32"),J("/LastChar 255"),J(">>"),J("endobj"))},Vt=function(Q){Q.objectNumber=tt();var we=[];we.push({key:"Type",value:"/XObject"}),we.push({key:"Subtype",value:"/Form"}),we.push({key:"BBox",value:"["+[E(Q.x),E(Q.y),E(Q.x+Q.width),E(Q.y+Q.height)].join(" ")+"]"}),we.push({key:"Matrix",value:"["+Q.matrix.toString()+"]"});var Ye=Q.pages[1].join(`
`);et({data:Ye,additionalKeyValues:we,objectId:Q.objectNumber}),J("endobj")},or=function(Q,we){we||(we=21);var Ye=tt(),ft=function(lr,Fr){var Qr,rn=[],An=1/(Fr-1);for(Qr=0;Qr<1;Qr+=An)rn.push(Qr);if(rn.push(1),lr[0].offset!=0){var On={offset:0,color:lr[0].color};lr.unshift(On)}if(lr[lr.length-1].offset!=1){var na={offset:1,color:lr[lr.length-1].color};lr.push(na)}for(var bs="",fa=0,Rs=0;Rs<rn.length;Rs++){for(Qr=rn[Rs];Qr>lr[fa+1].offset;)fa++;var ws=lr[fa].offset,Ms=(Qr-ws)/(lr[fa+1].offset-ws),Ns=lr[fa].color,Wl=lr[fa+1].color;bs+=M(Math.round((1-Ms)*Ns[0]+Ms*Wl[0]).toString(16))+M(Math.round((1-Ms)*Ns[1]+Ms*Wl[1]).toString(16))+M(Math.round((1-Ms)*Ns[2]+Ms*Wl[2]).toString(16))}return bs.trim()}(Q.colors,we),Nt=[];Nt.push({key:"FunctionType",value:"0"}),Nt.push({key:"Domain",value:"[0.0 1.0]"}),Nt.push({key:"Size",value:"["+we+"]"}),Nt.push({key:"BitsPerSample",value:"8"}),Nt.push({key:"Range",value:"[0.0 1.0 0.0 1.0 0.0 1.0]"}),Nt.push({key:"Decode",value:"[0.0 1.0 0.0 1.0 0.0 1.0]"}),et({data:ft,additionalKeyValues:Nt,alreadyAppliedFilters:["/ASCIIHexDecode"],objectId:Ye}),J("endobj"),Q.objectNumber=tt(),J("<< /ShadingType "+Q.type),J("/ColorSpace /DeviceRGB");var tr="/Coords ["+E(parseFloat(Q.coords[0]))+" "+E(parseFloat(Q.coords[1]))+" ";Q.type===2?tr+=E(parseFloat(Q.coords[2]))+" "+E(parseFloat(Q.coords[3])):tr+=E(parseFloat(Q.coords[2]))+" "+E(parseFloat(Q.coords[3]))+" "+E(parseFloat(Q.coords[4]))+" "+E(parseFloat(Q.coords[5])),J(tr+="]"),Q.matrix&&J("/Matrix ["+Q.matrix.toString()+"]"),J("/Function "+Ye+" 0 R"),J("/Extend [true true]"),J(">>"),J("endobj")},Oe=function(Q,we){var Ye=ot(),ft=tt();we.push({resourcesOid:Ye,objectOid:ft}),Q.objectNumber=ft;var Nt=[];Nt.push({key:"Type",value:"/Pattern"}),Nt.push({key:"PatternType",value:"1"}),Nt.push({key:"PaintType",value:"1"}),Nt.push({key:"TilingType",value:"1"}),Nt.push({key:"BBox",value:"["+Q.boundingBox.map(E).join(" ")+"]"}),Nt.push({key:"XStep",value:E(Q.xStep)}),Nt.push({key:"YStep",value:E(Q.yStep)}),Nt.push({key:"Resources",value:Ye+" 0 R"}),Q.matrix&&Nt.push({key:"Matrix",value:"["+Q.matrix.toString()+"]"}),et({data:Q.stream,additionalKeyValues:Nt,objectId:Q.objectNumber}),J("endobj")},ct=function(Q){for(var we in Q.objectNumber=tt(),J("<<"),Q)switch(we){case"opacity":J("/ca "+P(Q[we]));break;case"stroke-opacity":J("/CA "+P(Q[we]))}J(">>"),J("endobj")},bt=function(Q){te(Q.resourcesOid,!0),J("<<"),J("/ProcSet [/PDF /Text /ImageB /ImageC /ImageI]"),function(){for(var we in J("/Font <<"),mt)mt.hasOwnProperty(we)&&(f===!1||f===!0&&h.hasOwnProperty(we))&&J("/"+we+" "+mt[we].objectNumber+" 0 R");J(">>")}(),function(){if(Object.keys(jt).length>0){for(var we in J("/Shading <<"),jt)jt.hasOwnProperty(we)&&jt[we]instanceof s0&&jt[we].objectNumber>=0&&J("/"+we+" "+jt[we].objectNumber+" 0 R");It.publish("putShadingPatternDict"),J(">>")}}(),function(we){if(Object.keys(jt).length>0){for(var Ye in J("/Pattern <<"),jt)jt.hasOwnProperty(Ye)&&jt[Ye]instanceof A.TilingPattern&&jt[Ye].objectNumber>=0&&jt[Ye].objectNumber<we&&J("/"+Ye+" "+jt[Ye].objectNumber+" 0 R");It.publish("putTilingPatternDict"),J(">>")}}(Q.objectOid),function(){if(Object.keys(He).length>0){var we;for(we in J("/ExtGState <<"),He)He.hasOwnProperty(we)&&He[we].objectNumber>=0&&J("/"+we+" "+He[we].objectNumber+" 0 R");It.publish("putGStateDict"),J(">>")}}(),function(){for(var we in J("/XObject <<"),Ke)Ke.hasOwnProperty(we)&&Ke[we].objectNumber>=0&&J("/"+we+" "+Ke[we].objectNumber+" 0 R");It.publish("putXobjectDict"),J(">>")}(),J(">>"),J("endobj")},Dt=function(Q){gt[Q.fontName]=gt[Q.fontName]||{},gt[Q.fontName][Q.fontStyle]=Q.id},xt=function(Q,we,Ye,ft,Nt){var tr={id:"F"+(Object.keys(mt).length+1).toString(10),postScriptName:Q,fontName:we,fontStyle:Ye,encoding:ft,isStandardFont:Nt||!1,metadata:{}};return It.publish("addFont",{font:tr,instance:this}),mt[tr.id]=tr,Dt(tr),tr.id},sr=A.__private__.pdfEscape=A.pdfEscape=function(Q,we){return function(Ye,ft){var Nt,tr,lr,Fr,Qr,rn,An,On,na;if(lr=(ft=ft||{}).sourceEncoding||"Unicode",Qr=ft.outputEncoding,(ft.autoencode||Qr)&&mt[Le].metadata&&mt[Le].metadata[lr]&&mt[Le].metadata[lr].encoding&&(Fr=mt[Le].metadata[lr].encoding,!Qr&&mt[Le].encoding&&(Qr=mt[Le].encoding),!Qr&&Fr.codePages&&(Qr=Fr.codePages[0]),typeof Qr=="string"&&(Qr=Fr[Qr]),Qr)){for(An=!1,rn=[],Nt=0,tr=Ye.length;Nt<tr;Nt++)(On=Qr[Ye.charCodeAt(Nt)])?rn.push(String.fromCharCode(On)):rn.push(Ye[Nt]),rn[Nt].charCodeAt(0)>>8&&(An=!0);Ye=rn.join("")}for(Nt=Ye.length;An===void 0&&Nt!==0;)Ye.charCodeAt(Nt-1)>>8&&(An=!0),Nt--;if(!An)return Ye;for(rn=ft.noBOM?[]:[254,255],Nt=0,tr=Ye.length;Nt<tr;Nt++){if((na=(On=Ye.charCodeAt(Nt))>>8)>>8)throw new Error("Character at position "+Nt+" of string '"+Ye+"' exceeds 16bits. Cannot be encoded into UCS-2 BE");rn.push(na),rn.push(On-(na<<8))}return String.fromCharCode.apply(void 0,rn)}(Q,we).replace(/\\/g,"\\\\").replace(/\(/g,"\\(").replace(/\)/g,"\\)")},Xt=A.__private__.beginPage=function(Q){ge[++nt]=[],Xe[nt]={objId:0,contentsObjId:0,userUnit:Number(l),artBox:null,bleedBox:null,cropBox:null,trimBox:null,mediaBox:{bottomLeftX:0,bottomLeftY:0,topRightX:Number(Q[0]),topRightY:Number(Q[1])}},Ar(nt),ie(ge[H])},Kt=function(Q,we){var Ye,ft,Nt;switch(r=we||r,typeof Q=="string"&&(Ye=x(Q.toLowerCase()),Array.isArray(Ye)&&(ft=Ye[0],Nt=Ye[1])),Array.isArray(Q)&&(ft=Q[0]*ve,Nt=Q[1]*ve),isNaN(ft)&&(ft=a[0],Nt=a[1]),(ft>14400||Nt>14400)&&(Da.warn("A page in a PDF can not be wider or taller than 14400 userUnit. jsPDF limits the width/height to 14400"),ft=Math.min(14400,ft),Nt=Math.min(14400,Nt)),a=[ft,Nt],r.substr(0,1)){case"l":Nt>ft&&(a=[Nt,ft]);break;case"p":ft>Nt&&(a=[Nt,ft])}Xt(a),tn(dh),J(rd),Sa!==0&&J(Sa+" J"),um!==0&&J(um+" j"),It.publish("addPage",{pageNumber:nt})},ar=function(Q){Q>0&&Q<=nt&&(ge.splice(Q,1),Xe.splice(Q,1),nt--,H>nt&&(H=nt),this.setPage(H))},Ar=function(Q){Q>0&&Q<=nt&&(H=Q)},Gt=A.__private__.getNumberOfPages=A.getNumberOfPages=function(){return ge.length-1},_r=function(Q,we,Ye){var ft,Nt=void 0;return Ye=Ye||{},Q=Q!==void 0?Q:mt[Le].fontName,we=we!==void 0?we:mt[Le].fontStyle,ft=Q.toLowerCase(),gt[ft]!==void 0&&gt[ft][we]!==void 0?Nt=gt[ft][we]:gt[Q]!==void 0&&gt[Q][we]!==void 0?Nt=gt[Q][we]:Ye.disableWarning===!1&&Da.warn("Unable to look up font label for font '"+Q+"', '"+we+"'. Refer to getFontList() for available fonts."),Nt||Ye.noFallback||(Nt=gt.times[we])==null&&(Nt=gt.times.normal),Nt},Ir=A.__private__.putInfo=function(){var Q=tt(),we=function(ft){return ft};for(var Ye in d!==null&&(we=Bt.encryptor(Q,0)),J("<<"),J("/Producer ("+sr(we("jsPDF "+Or.version))+")"),Me)Me.hasOwnProperty(Ye)&&Me[Ye]&&J("/"+Ye.substr(0,1).toUpperCase()+Ye.substr(1)+" ("+sr(we(Me[Ye]))+")");J("/CreationDate ("+sr(we(he))+")"),J(">>"),J("endobj")},Tn=A.__private__.putCatalog=function(Q){var we=(Q=Q||{}).rootDictionaryObjId||re;switch(tt(),J("<<"),J("/Type /Catalog"),J("/Pages "+we+" 0 R"),Qe||(Qe="fullwidth"),Qe){case"fullwidth":J("/OpenAction [3 0 R /FitH null]");break;case"fullheight":J("/OpenAction [3 0 R /FitV null]");break;case"fullpage":J("/OpenAction [3 0 R /Fit]");break;case"original":J("/OpenAction [3 0 R /XYZ null null 1]");break;default:var Ye=""+Qe;Ye.substr(Ye.length-1)==="%"&&(Qe=parseInt(Qe)/100),typeof Qe=="number"&&J("/OpenAction [3 0 R /XYZ null null "+P(Qe)+"]")}switch(dt||(dt="continuous"),dt){case"continuous":J("/PageLayout /OneColumn");break;case"single":J("/PageLayout /SinglePage");break;case"two":case"twoleft":J("/PageLayout /TwoColumnLeft");break;case"tworight":J("/PageLayout /TwoColumnRight")}De&&J("/PageMode /"+De),It.publish("putCatalog"),J(">>"),J("endobj")},is=A.__private__.putTrailer=function(){J("trailer"),J("<<"),J("/Size "+(K+1)),J("/Root "+K+" 0 R"),J("/Info "+(K-1)+" 0 R"),d!==null&&J("/Encrypt "+Bt.oid+" 0 R"),J("/ID [ <"+ue+"> <"+ue+"> ]"),J(">>")},fn=A.__private__.putHeader=function(){J("%PDF-"+m),J("%")},St=A.__private__.putXRef=function(){var Q="0000000000";J("xref"),J("0 "+(K+1)),J("0000000000 65535 f ");for(var we=1;we<=K;we++)typeof W[we]=="function"?J((Q+W[we]()).slice(-10)+" 00000 n "):W[we]!==void 0?J((Q+W[we]).slice(-10)+" 00000 n "):J("0000000000 00000 n ")},at=A.__private__.buildDocument=function(){var Q;K=0,L=0,D=[],W=[],Z=[],re=ot(),pe=ot(),ie(D),It.publish("buildDocument"),fn(),At(),function(){It.publish("putAdditionalObjects");for(var Ye=0;Ye<Z.length;Ye++){var ft=Z[Ye];te(ft.objId,!0),J(ft.content),J("endobj")}It.publish("postPutAdditionalObjects")}(),Q=[],function(){for(var Ye in mt)mt.hasOwnProperty(Ye)&&(f===!1||f===!0&&h.hasOwnProperty(Ye))&&vt(mt[Ye])}(),function(){var Ye;for(Ye in He)He.hasOwnProperty(Ye)&&ct(He[Ye])}(),function(){for(var Ye in Ke)Ke.hasOwnProperty(Ye)&&Vt(Ke[Ye])}(),function(Ye){var ft;for(ft in jt)jt.hasOwnProperty(ft)&&(jt[ft]instanceof s0?or(jt[ft]):jt[ft]instanceof qm&&Oe(jt[ft],Ye))}(Q),It.publish("putResources"),Q.forEach(bt),bt({resourcesOid:pe,objectOid:Number.MAX_SAFE_INTEGER}),It.publish("postPutResources"),d!==null&&(Bt.oid=tt(),J("<<"),J("/Filter /Standard"),J("/V "+Bt.v),J("/R "+Bt.r),J("/U <"+Bt.toHexString(Bt.U)+">"),J("/O <"+Bt.toHexString(Bt.O)+">"),J("/P "+Bt.P),J(">>"),J("endobj")),Ir(),Tn();var we=L;return St(),is(),J("startxref"),J(""+we),J("%%EOF"),ie(ge[H]),D.join(`
`)},zt=A.__private__.getBlob=function(Q){return new Blob([z(Q)],{type:"application/pdf"})},Ut=A.output=A.__private__.output=(Be=function(Q,we){switch(typeof(we=we||{})=="string"?we={filename:we}:we.filename=we.filename||"generated.pdf",Q){case void 0:return at();case"save":A.save(we.filename);break;case"arraybuffer":return z(at());case"blob":return zt(at());case"bloburi":case"bloburl":if(un.URL!==void 0&&typeof un.URL.createObjectURL=="function")return un.URL&&un.URL.createObjectURL(zt(at()))||void 0;Da.warn("bloburl is not supported by your system, because URL.createObjectURL is not supported by your browser.");break;case"datauristring":case"dataurlstring":var Ye="",ft=at();try{Ye=mQ(ft)}catch{Ye=mQ(unescape(encodeURIComponent(ft)))}return"data:application/pdf;filename="+we.filename+";base64,"+Ye;case"pdfobjectnewwindow":if(Object.prototype.toString.call(un)==="[object Window]"){var Nt="https://cdnjs.cloudflare.com/ajax/libs/pdfobject/2.1.1/pdfobject.min.js",tr=' integrity="sha512-4ze/a9/4jqu+tX9dfOqJYSvyYd5M6qum/3HpCLr+/Jqf0whc37VUbkpNGHR7/8pSnCFw47T1fmIpwBV7UySh3g==" crossorigin="anonymous"';we.pdfObjectUrl&&(Nt=we.pdfObjectUrl,tr="");var lr='<html><style>html, body { padding: 0; margin: 0; } iframe { width: 100%; height: 100%; border: 0;}  </style><body><script src="'+Nt+'"'+tr+'><\/script><script >PDFObject.embed("'+this.output("dataurlstring")+'", '+JSON.stringify(we)+");<\/script></body></html>",Fr=un.open();return Fr!==null&&Fr.document.write(lr),Fr}throw new Error("The option pdfobjectnewwindow just works in a browser-environment.");case"pdfjsnewwindow":if(Object.prototype.toString.call(un)==="[object Window]"){var Qr='<html><style>html, body { padding: 0; margin: 0; } iframe { width: 100%; height: 100%; border: 0;}  </style><body><iframe id="pdfViewer" src="'+(we.pdfJsUrl||"examples/PDF.js/web/viewer.html")+"?file=&downloadName="+we.filename+'" width="500px" height="400px" /></body></html>',rn=un.open();if(rn!==null){rn.document.write(Qr);var An=this;rn.document.documentElement.querySelector("#pdfViewer").onload=function(){rn.document.title=we.filename,rn.document.documentElement.querySelector("#pdfViewer").contentWindow.PDFViewerApplication.open(An.output("bloburl"))}}return rn}throw new Error("The option pdfjsnewwindow just works in a browser-environment.");case"dataurlnewwindow":if(Object.prototype.toString.call(un)!=="[object Window]")throw new Error("The option dataurlnewwindow just works in a browser-environment.");var On='<html><style>html, body { padding: 0; margin: 0; } iframe { width: 100%; height: 100%; border: 0;}  </style><body><iframe src="'+this.output("datauristring",we)+'"></iframe></body></html>',na=un.open();if(na!==null&&(na.document.write(On),na.document.title=we.filename),na||typeof safari>"u")return na;break;case"datauri":case"dataurl":return un.document.location.href=this.output("datauristring",we);default:return null}},Be.foo=function(){try{return Be.apply(this,arguments)}catch(Ye){var Q=Ye.stack||"";~Q.indexOf(" at ")&&(Q=Q.split(" at ")[1]);var we="Error in function "+Q.split(`
`)[0].split("<")[0]+": "+Ye.message;if(!un.console)throw new Error(we);un.console.error(we,Ye),un.alert&&alert(we)}},Be.foo.bar=Be,Be.foo),Qt=function(Q){return Array.isArray($t)===!0&&$t.indexOf(Q)>-1};switch(n){case"pt":ve=1;break;case"mm":ve=72/25.4;break;case"cm":ve=72/2.54;break;case"in":ve=72;break;case"px":ve=Qt("px_scaling")==1?.75:96/72;break;case"pc":case"em":ve=12;break;case"ex":ve=6;break;default:if(typeof n!="number")throw new Error("Invalid unit: "+n);ve=n}var Bt=null;Ie(),me();var Ht=A.__private__.getPageInfo=A.getPageInfo=function(Q){if(isNaN(Q)||Q%1!=0)throw new Error("Invalid argument passed to jsPDF.getPageInfo");return{objId:Xe[Q].objId,pageNumber:Q,pageContext:Xe[Q]}},Lt=A.__private__.getPageInfoByObjId=function(Q){if(isNaN(Q)||Q%1!=0)throw new Error("Invalid argument passed to jsPDF.getPageInfoByObjId");for(var we in Xe)if(Xe[we].objId===Q)break;return Ht(we)},er=A.__private__.getCurrentPageInfo=A.getCurrentPageInfo=function(){return{objId:Xe[H].objId,pageNumber:H,pageContext:Xe[H]}};A.addPage=function(){return Kt.apply(this,arguments),this},A.setPage=function(){return Ar.apply(this,arguments),ie.call(this,ge[H]),this},A.insertPage=function(Q){return this.addPage(),this.movePage(H,Q),this},A.movePage=function(Q,we){var Ye,ft;if(Q>we){Ye=ge[Q],ft=Xe[Q];for(var Nt=Q;Nt>we;Nt--)ge[Nt]=ge[Nt-1],Xe[Nt]=Xe[Nt-1];ge[we]=Ye,Xe[we]=ft,this.setPage(we)}else if(Q<we){Ye=ge[Q],ft=Xe[Q];for(var tr=Q;tr<we;tr++)ge[tr]=ge[tr+1],Xe[tr]=Xe[tr+1];ge[we]=Ye,Xe[we]=ft,this.setPage(we)}return this},A.deletePage=function(){return ar.apply(this,arguments),this},A.__private__.text=A.text=function(Q,we,Ye,ft,Nt){var tr,lr,Fr,Qr,rn,An,On,na,bs,fa=(ft=ft||{}).scope||this;if(typeof Q=="number"&&typeof we=="number"&&(typeof Ye=="string"||Array.isArray(Ye))){var Rs=Ye;Ye=we,we=Q,Q=Rs}if(arguments[3]instanceof ae==0?(Fr=arguments[4],Qr=arguments[5],wa(On=arguments[3])==="object"&&On!==null||(typeof Fr=="string"&&(Qr=Fr,Fr=null),typeof On=="string"&&(Qr=On,On=null),typeof On=="number"&&(Fr=On,On=null),ft={flags:On,angle:Fr,align:Qr})):(S("The transform parameter of text() with a Matrix value"),bs=Nt),isNaN(we)||isNaN(Ye)||Q==null)throw new Error("Invalid arguments passed to jsPDF.text");if(Q.length===0)return fa;var ws,Ms="",Ns=typeof ft.lineHeightFactor=="number"?ft.lineHeightFactor:qd,Wl=fa.internal.scaleFactor;function uu(la){return la=la.split("	").join(Array(ft.TabLen||9).join(" ")),sr(la,On)}function du(la){for(var ka,Ys=la.concat(),Ci=[],Hf=Ys.length;Hf--;)typeof(ka=Ys.shift())=="string"?Ci.push(ka):Array.isArray(la)&&(ka.length===1||ka[1]===void 0&&ka[2]===void 0)?Ci.push(ka[0]):Ci.push([ka[0],ka[1],ka[2]]);return Ci}function C(la,ka){var Ys;if(typeof la=="string")Ys=ka(la)[0];else if(Array.isArray(la)){for(var Ci,Hf,d1=la.concat(),yg=[],Uw=d1.length;Uw--;)typeof(Ci=d1.shift())=="string"?yg.push(ka(Ci)[0]):Array.isArray(Ci)&&typeof Ci[0]=="string"&&(Hf=ka(Ci[0],Ci[1],Ci[2]),yg.push([Hf[0],Hf[1],Hf[2]]));Ys=yg}return Ys}var X=!1,de=!0;if(typeof Q=="string")X=!0;else if(Array.isArray(Q)){var $e=Q.concat();lr=[];for(var _t,Mt=$e.length;Mt--;)(typeof(_t=$e.shift())!="string"||Array.isArray(_t)&&typeof _t[0]!="string")&&(de=!1);X=de}if(X===!1)throw new Error('Type of text must be string or Array. "'+Q+'" is not recognized.');typeof Q=="string"&&(Q=Q.match(/[\r?\n]/)?Q.split(/\r\n|\r|\n/g):[Q]);var xr=ye/fa.internal.scaleFactor,Un=xr*(Ns-1);switch(ft.baseline){case"bottom":Ye-=Un;break;case"top":Ye+=xr-Un;break;case"hanging":Ye+=xr-2*Un;break;case"middle":Ye+=xr/2-Un}if((An=ft.maxWidth||0)>0&&(typeof Q=="string"?Q=fa.splitTextToSize(Q,An):Object.prototype.toString.call(Q)==="[object Array]"&&(Q=Q.reduce(function(la,ka){return la.concat(fa.splitTextToSize(ka,An))},[]))),tr={text:Q,x:we,y:Ye,options:ft,mutex:{pdfEscape:sr,activeFontKey:Le,fonts:mt,activeFontSize:ye}},It.publish("preProcessText",tr),Q=tr.text,Fr=(ft=tr.options).angle,bs instanceof ae==0&&Fr&&typeof Fr=="number"){Fr*=Math.PI/180,ft.rotationDirection===0&&(Fr=-Fr),w===b&&(Fr=-Fr);var Cs=Math.cos(Fr),In=Math.sin(Fr);bs=new ae(Cs,In,-In,Cs,0,0)}else Fr&&Fr instanceof ae&&(bs=Fr);w!==b||bs||(bs=be),(rn=ft.charSpace||iu)!==void 0&&(Ms+=E(F(rn))+` Tc
`,this.setCharSpace(this.getCharSpace()||0)),(na=ft.horizontalScale)!==void 0&&(Ms+=E(100*na)+` Tz
`),ft.lang;var Yn=-1,La=ft.renderingMode!==void 0?ft.renderingMode:ft.stroke,wc=fa.internal.getCurrentPageInfo().pageContext;switch(La){case 0:case!1:case"fill":Yn=0;break;case 1:case!0:case"stroke":Yn=1;break;case 2:case"fillThenStroke":Yn=2;break;case 3:case"invisible":Yn=3;break;case 4:case"fillAndAddForClipping":Yn=4;break;case 5:case"strokeAndAddPathForClipping":Yn=5;break;case 6:case"fillThenStrokeAndAddToPathForClipping":Yn=6;break;case 7:case"addToPathForClipping":Yn=7}var Wo=wc.usedRenderingMode!==void 0?wc.usedRenderingMode:-1;Yn!==-1?Ms+=Yn+` Tr
`:Wo!==-1&&(Ms+=`0 Tr
`),Yn!==-1&&(wc.usedRenderingMode=Yn),Qr=ft.align||"left";var wo,nd=ye*Ns,a1=fa.internal.pageSize.getWidth(),s1=mt[Le];rn=ft.charSpace||iu,An=ft.maxWidth||0,On=Object.assign({autoencode:!0,noBOM:!0},ft.flags);var ph=[],Am=function(la){return fa.getStringUnitWidth(la,{font:s1,charSpace:rn,fontSize:ye,doKerning:!1})*ye/Wl};if(Object.prototype.toString.call(Q)==="[object Array]"){var Nc;lr=du(Q),Qr!=="left"&&(wo=lr.map(Am));var Cc,gh=0;if(Qr==="right"){we-=wo[0],Q=[],Mt=lr.length;for(var Vf=0;Vf<Mt;Vf++)Vf===0?(Cc=Ji(we),Nc=td(Ye)):(Cc=F(gh-wo[Vf]),Nc=-nd),Q.push([lr[Vf],Cc,Nc]),gh=wo[Vf]}else if(Qr==="center"){we-=wo[0]/2,Q=[],Mt=lr.length;for(var xh=0;xh<Mt;xh++)xh===0?(Cc=Ji(we),Nc=td(Ye)):(Cc=F((gh-wo[xh])/2),Nc=-nd),Q.push([lr[xh],Cc,Nc]),gh=wo[xh]}else if(Qr==="left"){Q=[],Mt=lr.length;for(var i1=0;i1<Mt;i1++)Q.push(lr[i1])}else if(Qr==="justify"&&s1.encoding==="Identity-H"){Q=[],Mt=lr.length,An=An!==0?An:a1;for(var vg=0,Xs=0;Xs<Mt;Xs++)if(Nc=Xs===0?td(Ye):-nd,Cc=Xs===0?Ji(we):vg,Xs<Mt-1){var Lw=F((An-wo[Xs])/(lr[Xs].split(" ").length-1)),Xd=lr[Xs].split(" ");Q.push([Xd[0]+" ",Cc,Nc]),vg=0;for(var Yd=1;Yd<Xd.length;Yd++){var o1=(Am(Xd[Yd-1]+" "+Xd[Yd])-Am(Xd[Yd]))*Wl+Lw;Yd==Xd.length-1?Q.push([Xd[Yd],o1,0]):Q.push([Xd[Yd]+" ",o1,0]),vg-=o1}}else Q.push([lr[Xs],Cc,Nc]);Q.push(["",vg,0])}else{if(Qr!=="justify")throw new Error('Unrecognized alignment option, use "left", "center", "right" or "justify".');for(Q=[],Mt=lr.length,An=An!==0?An:a1,Xs=0;Xs<Mt;Xs++){Nc=Xs===0?td(Ye):-nd,Cc=Xs===0?Ji(we):0;var l1=lr[Xs].split(" ").length-1,c1=l1>0?(An-wo[Xs])/l1:0;Xs<Mt-1?ph.push(E(F(c1))):ph.push(0),Q.push([lr[Xs],Cc,Nc])}}}(typeof ft.R2L=="boolean"?ft.R2L:ut)===!0&&(Q=C(Q,function(la,ka,Ys){return[la.split("").reverse().join(""),ka,Ys]})),tr={text:Q,x:we,y:Ye,options:ft,mutex:{pdfEscape:sr,activeFontKey:Le,fonts:mt,activeFontSize:ye}},It.publish("postProcessText",tr),Q=tr.text,ws=tr.mutex.isHex||!1;var u1=mt[Le].encoding;u1!=="WinAnsiEncoding"&&u1!=="StandardEncoding"||(Q=C(Q,function(la,ka,Ys){return[uu(la),ka,Ys]})),lr=du(Q),Q=[];for(var vh,yh,bh,hm=Array.isArray(lr[0])?1:0,wh="",mm=function(la,ka,Ys){var Ci="";return Ys instanceof ae?(Ys=typeof ft.angle=="number"?ee(Ys,new ae(1,0,0,1,la,ka)):ee(new ae(1,0,0,1,la,ka),Ys),w===b&&(Ys=ee(new ae(1,0,0,-1,0,0),Ys)),Ci=Ys.join(" ")+` Tm
`):Ci=E(la)+" "+E(ka)+` Td
`,Ci},fu=0;fu<lr.length;fu++){switch(wh="",hm){case 1:bh=(ws?"<":"(")+lr[fu][0]+(ws?">":")"),vh=parseFloat(lr[fu][1]),yh=parseFloat(lr[fu][2]);break;case 0:bh=(ws?"<":"(")+lr[fu]+(ws?">":")"),vh=Ji(we),yh=td(Ye)}ph!==void 0&&ph[fu]!==void 0&&(wh=ph[fu]+` Tw
`),fu===0?Q.push(wh+mm(vh,yh,bs)+bh):hm===0?Q.push(wh+bh):hm===1&&Q.push(wh+mm(vh,yh,bs)+bh)}Q=hm===0?Q.join(` Tj
T* `):Q.join(` Tj
`),Q+=` Tj
`;var Jd=`BT
/`;return Jd+=Le+" "+ye+` Tf
`,Jd+=E(ye*Ns)+` TL
`,Jd+=bc+`
`,Jd+=Ms,Jd+=Q,J(Jd+="ET"),h[Le]=!0,fa};var gr=A.__private__.clip=A.clip=function(Q){return J(Q==="evenodd"?"W*":"W"),this};A.clipEvenOdd=function(){return gr("evenodd")},A.__private__.discardPath=A.discardPath=function(){return J("n"),this};var Cr=A.__private__.isValidStyle=function(Q){var we=!1;return[void 0,null,"S","D","F","DF","FD","f","f*","B","B*","n"].indexOf(Q)!==-1&&(we=!0),we};A.__private__.setDefaultPathOperation=A.setDefaultPathOperation=function(Q){return Cr(Q)&&(u=Q),this};var ys=A.__private__.getStyle=A.getStyle=function(Q){var we=u;switch(Q){case"D":case"S":we="S";break;case"F":we="f";break;case"FD":case"DF":we="B";break;case"f":case"f*":case"B":case"B*":we=Q}return we},Ta=A.close=function(){return J("h"),this};A.stroke=function(){return J("S"),this},A.fill=function(Q){return da("f",Q),this},A.fillEvenOdd=function(Q){return da("f*",Q),this},A.fillStroke=function(Q){return da("B",Q),this},A.fillStrokeEvenOdd=function(Q){return da("B*",Q),this};var da=function(Q,we){wa(we)==="object"?ed(we,Q):J(Q)},Ws=function(Q){Q===null||w===b&&Q===void 0||(Q=ys(Q),J(Q))};function zl(Q,we,Ye,ft,Nt){var tr=new qm(we||this.boundingBox,Ye||this.xStep,ft||this.yStep,this.gState,Nt||this.matrix);tr.stream=this.stream;var lr=Q+"$$"+this.cloneIndex+++"$$";return _e(lr,tr),tr}var ed=function(Q,we){var Ye=xe[Q.key],ft=jt[Ye];if(ft instanceof s0)J("q"),J(Gd(we)),ft.gState&&A.setGState(ft.gState),J(Q.matrix.toString()+" cm"),J("/"+Ye+" sh"),J("Q");else if(ft instanceof qm){var Nt=new ae(1,0,0,-1,0,cu());Q.matrix&&(Nt=Nt.multiply(Q.matrix||be),Ye=zl.call(ft,Q.key,Q.boundingBox,Q.xStep,Q.yStep,Nt).id),J("q"),J("/Pattern cs"),J("/"+Ye+" scn"),ft.gState&&A.setGState(ft.gState),J(we),J("Q")}},Gd=function(Q){switch(Q){case"f":case"F":case"n":return"W n";case"f*":return"W* n";case"B":case"S":return"W S";case"B*":return"W* S"}},au=A.moveTo=function(Q,we){return J(E(F(Q))+" "+E(Y(we))+" m"),this},Lf=A.lineTo=function(Q,we){return J(E(F(Q))+" "+E(Y(we))+" l"),this},bo=A.curveTo=function(Q,we,Ye,ft,Nt,tr){return J([E(F(Q)),E(Y(we)),E(F(Ye)),E(Y(ft)),E(F(Nt)),E(Y(tr)),"c"].join(" ")),this};A.__private__.line=A.line=function(Q,we,Ye,ft,Nt){if(isNaN(Q)||isNaN(we)||isNaN(Ye)||isNaN(ft)||!Cr(Nt))throw new Error("Invalid arguments passed to jsPDF.line");return w===y?this.lines([[Ye-Q,ft-we]],Q,we,[1,1],Nt||"S"):this.lines([[Ye-Q,ft-we]],Q,we,[1,1]).stroke()},A.__private__.lines=A.lines=function(Q,we,Ye,ft,Nt,tr){var lr,Fr,Qr,rn,An,On,na,bs,fa,Rs,ws,Ms;if(typeof Q=="number"&&(Ms=Ye,Ye=we,we=Q,Q=Ms),ft=ft||[1,1],tr=tr||!1,isNaN(we)||isNaN(Ye)||!Array.isArray(Q)||!Array.isArray(ft)||!Cr(Nt)||typeof tr!="boolean")throw new Error("Invalid arguments passed to jsPDF.lines");for(au(we,Ye),lr=ft[0],Fr=ft[1],rn=Q.length,Rs=we,ws=Ye,Qr=0;Qr<rn;Qr++)(An=Q[Qr]).length===2?(Rs=An[0]*lr+Rs,ws=An[1]*Fr+ws,Lf(Rs,ws)):(On=An[0]*lr+Rs,na=An[1]*Fr+ws,bs=An[2]*lr+Rs,fa=An[3]*Fr+ws,Rs=An[4]*lr+Rs,ws=An[5]*Fr+ws,bo(On,na,bs,fa,Rs,ws));return tr&&Ta(),Ws(Nt),this},A.path=function(Q){for(var we=0;we<Q.length;we++){var Ye=Q[we],ft=Ye.c;switch(Ye.op){case"m":au(ft[0],ft[1]);break;case"l":Lf(ft[0],ft[1]);break;case"c":bo.apply(this,ft);break;case"h":Ta()}}return this},A.__private__.rect=A.rect=function(Q,we,Ye,ft,Nt){if(isNaN(Q)||isNaN(we)||isNaN(Ye)||isNaN(ft)||!Cr(Nt))throw new Error("Invalid arguments passed to jsPDF.rect");return w===y&&(ft=-ft),J([E(F(Q)),E(Y(we)),E(F(Ye)),E(F(ft)),"re"].join(" ")),Ws(Nt),this},A.__private__.triangle=A.triangle=function(Q,we,Ye,ft,Nt,tr,lr){if(isNaN(Q)||isNaN(we)||isNaN(Ye)||isNaN(ft)||isNaN(Nt)||isNaN(tr)||!Cr(lr))throw new Error("Invalid arguments passed to jsPDF.triangle");return this.lines([[Ye-Q,ft-we],[Nt-Ye,tr-ft],[Q-Nt,we-tr]],Q,we,[1,1],lr,!0),this},A.__private__.roundedRect=A.roundedRect=function(Q,we,Ye,ft,Nt,tr,lr){if(isNaN(Q)||isNaN(we)||isNaN(Ye)||isNaN(ft)||isNaN(Nt)||isNaN(tr)||!Cr(lr))throw new Error("Invalid arguments passed to jsPDF.roundedRect");var Fr=4/3*(Math.SQRT2-1);return Nt=Math.min(Nt,.5*Ye),tr=Math.min(tr,.5*ft),this.lines([[Ye-2*Nt,0],[Nt*Fr,0,Nt,tr-tr*Fr,Nt,tr],[0,ft-2*tr],[0,tr*Fr,-Nt*Fr,tr,-Nt,tr],[2*Nt-Ye,0],[-Nt*Fr,0,-Nt,-tr*Fr,-Nt,-tr],[0,2*tr-ft],[0,-tr*Fr,Nt*Fr,-tr,Nt,-tr]],Q+Nt,we,[1,1],lr,!0),this},A.__private__.ellipse=A.ellipse=function(Q,we,Ye,ft,Nt){if(isNaN(Q)||isNaN(we)||isNaN(Ye)||isNaN(ft)||!Cr(Nt))throw new Error("Invalid arguments passed to jsPDF.ellipse");var tr=4/3*(Math.SQRT2-1)*Ye,lr=4/3*(Math.SQRT2-1)*ft;return au(Q+Ye,we),bo(Q+Ye,we-lr,Q+tr,we-ft,Q,we-ft),bo(Q-tr,we-ft,Q-Ye,we-lr,Q-Ye,we),bo(Q-Ye,we+lr,Q-tr,we+ft,Q,we+ft),bo(Q+tr,we+ft,Q+Ye,we+lr,Q+Ye,we),Ws(Nt),this},A.__private__.circle=A.circle=function(Q,we,Ye,ft){if(isNaN(Q)||isNaN(we)||isNaN(Ye)||!Cr(ft))throw new Error("Invalid arguments passed to jsPDF.circle");return this.ellipse(Q,we,Ye,Ye,ft)},A.setFont=function(Q,we,Ye){return Ye&&(we=_(we,Ye)),Le=_r(Q,we,{disableWarning:!1}),this};var su=A.__private__.getFont=A.getFont=function(){return mt[_r.apply(A,arguments)]};A.__private__.getFontList=A.getFontList=function(){var Q,we,Ye={};for(Q in gt)if(gt.hasOwnProperty(Q))for(we in Ye[Q]=[],gt[Q])gt[Q].hasOwnProperty(we)&&Ye[Q].push(we);return Ye},A.addFont=function(Q,we,Ye,ft,Nt){var tr=["StandardEncoding","MacRomanEncoding","Identity-H","WinAnsiEncoding"];return arguments[3]&&tr.indexOf(arguments[3])!==-1?Nt=arguments[3]:arguments[3]&&tr.indexOf(arguments[3])==-1&&(Ye=_(Ye,ft)),xt.call(this,Q,we,Ye,Nt=Nt||"Identity-H")};var qd,dh=t.lineWidth||.200025,pg=A.__private__.getLineWidth=A.getLineWidth=function(){return dh},tn=A.__private__.setLineWidth=A.setLineWidth=function(Q){return dh=Q,J(E(F(Q))+" w"),this};A.__private__.setLineDash=Or.API.setLineDash=Or.API.setLineDashPattern=function(Q,we){if(Q=Q||[],we=we||0,isNaN(we)||!Array.isArray(Q))throw new Error("Invalid arguments passed to jsPDF.setLineDash");return Q=Q.map(function(Ye){return E(F(Ye))}).join(" "),we=E(F(we)),J("["+Q+"] "+we+" d"),this};var e1=A.__private__.getLineHeight=A.getLineHeight=function(){return ye*qd};A.__private__.getLineHeight=A.getLineHeight=function(){return ye*qd};var t1=A.__private__.setLineHeightFactor=A.setLineHeightFactor=function(Q){return typeof(Q=Q||1.15)=="number"&&(qd=Q),this},r1=A.__private__.getLineHeightFactor=A.getLineHeightFactor=function(){return qd};t1(t.lineHeight);var Ji=A.__private__.getHorizontalCoordinate=function(Q){return F(Q)},td=A.__private__.getVerticalCoordinate=function(Q){return w===b?Q:Xe[H].mediaBox.topRightY-Xe[H].mediaBox.bottomLeftY-F(Q)},n1=A.__private__.getHorizontalCoordinateString=A.getHorizontalCoordinateString=function(Q){return E(Ji(Q))},fh=A.__private__.getVerticalCoordinateString=A.getVerticalCoordinateString=function(Q){return E(td(Q))},rd=t.strokeColor||"0 G";A.__private__.getStrokeColor=A.getDrawColor=function(){return Ee(rd)},A.__private__.setStrokeColor=A.setDrawColor=function(Q,we,Ye,ft){return rd=Se({ch1:Q,ch2:we,ch3:Ye,ch4:ft,pdfColorType:"draw",precision:2}),J(rd),this};var Ah=t.fillColor||"0 g";A.__private__.getFillColor=A.getFillColor=function(){return Ee(Ah)},A.__private__.setFillColor=A.setFillColor=function(Q,we,Ye,ft){return Ah=Se({ch1:Q,ch2:we,ch3:Ye,ch4:ft,pdfColorType:"fill",precision:2}),J(Ah),this};var bc=t.textColor||"0 g",Uf=A.__private__.getTextColor=A.getTextColor=function(){return Ee(bc)};A.__private__.setTextColor=A.setTextColor=function(Q,we,Ye,ft){return bc=Se({ch1:Q,ch2:we,ch3:Ye,ch4:ft,pdfColorType:"text",precision:3}),this};var iu=t.charSpace,cm=A.__private__.getCharSpace=A.getCharSpace=function(){return parseFloat(iu||0)};A.__private__.setCharSpace=A.setCharSpace=function(Q){if(isNaN(Q))throw new Error("Invalid argument passed to jsPDF.setCharSpace");return iu=Q,this};var Sa=0;A.CapJoinStyles={0:0,butt:0,but:0,miter:0,1:1,round:1,rounded:1,circle:1,2:2,projecting:2,project:2,square:2,bevel:2},A.__private__.setLineCap=A.setLineCap=function(Q){var we=A.CapJoinStyles[Q];if(we===void 0)throw new Error("Line cap style of '"+Q+"' is not recognized. See or extend .CapJoinStyles property for valid styles");return Sa=we,J(we+" J"),this};var um=0;A.__private__.setLineJoin=A.setLineJoin=function(Q){var we=A.CapJoinStyles[Q];if(we===void 0)throw new Error("Line join style of '"+Q+"' is not recognized. See or extend .CapJoinStyles property for valid styles");return um=we,J(we+" j"),this},A.__private__.setLineMiterLimit=A.__private__.setMiterLimit=A.setLineMiterLimit=A.setMiterLimit=function(Q){if(Q=Q||0,isNaN(Q))throw new Error("Invalid argument passed to jsPDF.setLineMiterLimit");return J(E(F(Q))+" M"),this},A.GState=Jb,A.setGState=function(Q){(Q=typeof Q=="string"?He[Ce[Q]]:gg(null,Q)).equals(lt)||(J("/"+Q.id+" gs"),lt=Q)};var gg=function(Q,we){if(!Q||!Ce[Q]){var Ye=!1;for(var ft in He)if(He.hasOwnProperty(ft)&&He[ft].equals(we)){Ye=!0;break}if(Ye)we=He[ft];else{var Nt="GS"+(Object.keys(He).length+1).toString(10);He[Nt]=we,we.id=Nt}return Q&&(Ce[Q]=we.id),It.publish("addGState",we),we}};A.addGState=function(Q,we){return gg(Q,we),this},A.saveGraphicsState=function(){return J("q"),Ct.push({key:Le,size:ye,color:bc}),this},A.restoreGraphicsState=function(){J("Q");var Q=Ct.pop();return Le=Q.key,ye=Q.size,bc=Q.color,lt=null,this},A.setCurrentTransformationMatrix=function(Q){return J(Q.toString()+" cm"),this},A.comment=function(Q){return J("#"+Q),this};var ou=function(Q,we){var Ye=Q||0;Object.defineProperty(this,"x",{enumerable:!0,get:function(){return Ye},set:function(tr){isNaN(tr)||(Ye=parseFloat(tr))}});var ft=we||0;Object.defineProperty(this,"y",{enumerable:!0,get:function(){return ft},set:function(tr){isNaN(tr)||(ft=parseFloat(tr))}});var Nt="pt";return Object.defineProperty(this,"type",{enumerable:!0,get:function(){return Nt},set:function(tr){Nt=tr.toString()}}),this},hh=function(Q,we,Ye,ft){ou.call(this,Q,we),this.type="rect";var Nt=Ye||0;Object.defineProperty(this,"w",{enumerable:!0,get:function(){return Nt},set:function(lr){isNaN(lr)||(Nt=parseFloat(lr))}});var tr=ft||0;return Object.defineProperty(this,"h",{enumerable:!0,get:function(){return tr},set:function(lr){isNaN(lr)||(tr=parseFloat(lr))}}),this},Qf=function(){this.page=nt,this.currentPage=H,this.pages=ge.slice(0),this.pagesContext=Xe.slice(0),this.x=le,this.y=Ue,this.matrix=rt,this.width=Nl(H),this.height=xg(H),this.outputDestination=Ge,this.id="",this.objectNumber=-1};Qf.prototype.restore=function(){nt=this.page,H=this.currentPage,Xe=this.pagesContext,ge=this.pages,le=this.x,Ue=this.y,rt=this.matrix,dm(H,this.width),Cl(H,this.height),Ge=this.outputDestination};var zd=function(Q,we,Ye,ft,Nt){q.push(new Qf),nt=H=0,ge=[],le=Q,Ue=we,rt=Nt,Xt([Ye,ft])};for(var Wd in A.beginFormObject=function(Q,we,Ye,ft,Nt){return zd(Q,we,Ye,ft,Nt),this},A.endFormObject=function(Q){return function(we){if(wt[we])q.pop().restore();else{var Ye=new Qf,ft="Xo"+(Object.keys(Ke).length+1).toString(10);Ye.id=ft,wt[we]=ft,Ke[ft]=Ye,It.publish("addFormObject",Ye),q.pop().restore()}}(Q),this},A.doFormObject=function(Q,we){var Ye=Ke[wt[Q]];return J("q"),J(we.toString()+" cm"),J("/"+Ye.id+" Do"),J("Q"),this},A.getFormObject=function(Q){var we=Ke[wt[Q]];return{x:we.x,y:we.y,width:we.width,height:we.height,matrix:we.matrix}},A.save=function(Q,we){return Q=Q||"generated.pdf",(we=we||{}).returnPromise=we.returnPromise||!1,we.returnPromise===!1?(Pm(zt(at()),Q),typeof Pm.unload=="function"&&un.setTimeout&&setTimeout(Pm.unload,911),this):new Promise(function(Ye,ft){try{var Nt=Pm(zt(at()),Q);typeof Pm.unload=="function"&&un.setTimeout&&setTimeout(Pm.unload,911),Ye(Nt)}catch(tr){ft(tr.message)}})},Or.API)Or.API.hasOwnProperty(Wd)&&(Wd==="events"&&Or.API.events.length?function(Q,we){var Ye,ft,Nt;for(Nt=we.length-1;Nt!==-1;Nt--)Ye=we[Nt][0],ft=we[Nt][1],Q.subscribe.apply(Q,[Ye].concat(typeof ft=="function"?[ft]:ft))}(It,Or.API.events):A[Wd]=Or.API[Wd]);function Nl(Q){return Xe[Q].mediaBox.topRightX-Xe[Q].mediaBox.bottomLeftX}function dm(Q,we){Xe[Q].mediaBox.topRightX=we+Xe[Q].mediaBox.bottomLeftX}function xg(Q){return Xe[Q].mediaBox.topRightY-Xe[Q].mediaBox.bottomLeftY}function Cl(Q,we){Xe[Q].mediaBox.topRightY=we+Xe[Q].mediaBox.bottomLeftY}var lu=A.getPageWidth=function(Q){return Nl(Q=Q||H)/ve},mh=A.setPageWidth=function(Q,we){dm(Q,we*ve)},cu=A.getPageHeight=function(Q){return xg(Q=Q||H)/ve},fm=A.setPageHeight=function(Q,we){Cl(Q,we*ve)};return A.internal={pdfEscape:sr,getStyle:ys,getFont:su,getFontSize:st,getCharSpace:cm,getTextColor:Uf,getLineHeight:e1,getLineHeightFactor:r1,getLineWidth:pg,write:je,getHorizontalCoordinate:Ji,getVerticalCoordinate:td,getCoordinateString:n1,getVerticalCoordinateString:fh,collections:{},newObject:tt,newAdditionalObject:V,newObjectDeferred:ot,newObjectDeferredBegin:te,getFilters:Re,putStream:et,events:It,scaleFactor:ve,pageSize:{getWidth:function(){return lu(H)},setWidth:function(Q){mh(H,Q)},getHeight:function(){return cu(H)},setHeight:function(Q){fm(H,Q)}},encryptionOptions:d,encryption:Bt,getEncryptor:function(Q){return d!==null?Bt.encryptor(Q,0):function(we){return we}},output:Ut,getNumberOfPages:Gt,get pages(){return ge},out:J,f2:P,f3:T,getPageInfo:Ht,getPageInfoByObjId:Lt,getCurrentPageInfo:er,getPDFVersion:p,Point:ou,Rectangle:hh,Matrix:ae,hasHotfix:Qt},Object.defineProperty(A.internal.pageSize,"width",{get:function(){return lu(H)},set:function(Q){mh(H,Q)},enumerable:!0,configurable:!0}),Object.defineProperty(A.internal.pageSize,"height",{get:function(){return cu(H)},set:function(Q){fm(H,Q)},enumerable:!0,configurable:!0}),(function(Q){for(var we=0,Ye=Ae.length;we<Ye;we++){var ft=xt.call(this,Q[we][0],Q[we][1],Q[we][2],Ae[we][3],!0);f===!1&&(h[ft]=!0);var Nt=Q[we][0].split("-");Dt({id:ft,fontName:Nt[0],fontStyle:Nt[1]||""})}It.publish("addFonts",{fonts:mt,dictionary:gt})}).call(A,Ae),Le="F1",Kt(a,r),It.publish("initialized"),A}nx.prototype.lsbFirstWord=function(t){return String.fromCharCode(255&t,t>>8&255,t>>16&255,t>>24&255)},nx.prototype.toHexString=function(t){return t.split("").map(function(e){return("0"+(255&e.charCodeAt(0)).toString(16)).slice(-2)}).join("")},nx.prototype.hexToBytes=function(t){for(var e=[],r=0;r<t.length;r+=2)e.push(String.fromCharCode(parseInt(t.substr(r,2),16)));return e.join("")},nx.prototype.processOwnerPassword=function(t,e){return $T(HT(e).substr(0,5),t)},nx.prototype.encryptor=function(t,e){var r=HT(this.encryptionKey+String.fromCharCode(255&t,t>>8&255,t>>16&255,255&e,e>>8&255)).substr(0,10);return function(n){return $T(r,n)}},Jb.prototype.equals=function(t){var e,r="id,objectNumber,equals";if(!t||wa(t)!==wa(this))return!1;var n=0;for(e in this)if(!(r.indexOf(e)>=0)){if(this.hasOwnProperty(e)&&!t.hasOwnProperty(e)||this[e]!==t[e])return!1;n++}for(e in t)t.hasOwnProperty(e)&&r.indexOf(e)<0&&n--;return n===0},Or.API={events:[]},Or.version="3.0.4";var Vs=Or.API,M6=1,ag=function(t){return t.replace(/\\/g,"\\\\").replace(/\(/g,"\\(").replace(/\)/g,"\\)")},Og=function(t){return t.replace(/\\\\/g,"\\").replace(/\\\(/g,"(").replace(/\\\)/g,")")},mn=function(t){return t.toFixed(2)},Oh=function(t){return t.toFixed(5)};Vs.__acroform__={};var pc=function(t,e){t.prototype=Object.create(e.prototype),t.prototype.constructor=t},vQ=function(t){return t*M6},lf=function(t){var e=new Yee,r=Lr.internal.getHeight(t)||0,n=Lr.internal.getWidth(t)||0;return e.BBox=[0,0,Number(mn(n)),Number(mn(r))],e},zEe=Vs.__acroform__.setBit=function(t,e){if(t=t||0,e=e||0,isNaN(t)||isNaN(e))throw new Error("Invalid arguments passed to jsPDF.API.__acroform__.setBit");return t|1<<e},WEe=Vs.__acroform__.clearBit=function(t,e){if(t=t||0,e=e||0,isNaN(t)||isNaN(e))throw new Error("Invalid arguments passed to jsPDF.API.__acroform__.clearBit");return t&~(1<<e)},XEe=Vs.__acroform__.getBit=function(t,e){if(isNaN(t)||isNaN(e))throw new Error("Invalid arguments passed to jsPDF.API.__acroform__.getBit");return t&1<<e?1:0},oi=Vs.__acroform__.getBitForPdf=function(t,e){if(isNaN(t)||isNaN(e))throw new Error("Invalid arguments passed to jsPDF.API.__acroform__.getBitForPdf");return XEe(t,e-1)},li=Vs.__acroform__.setBitForPdf=function(t,e){if(isNaN(t)||isNaN(e))throw new Error("Invalid arguments passed to jsPDF.API.__acroform__.setBitForPdf");return zEe(t,e-1)},ci=Vs.__acroform__.clearBitForPdf=function(t,e){if(isNaN(t)||isNaN(e))throw new Error("Invalid arguments passed to jsPDF.API.__acroform__.clearBitForPdf");return WEe(t,e-1)},YEe=Vs.__acroform__.calculateCoordinates=function(t,e){var r=e.internal.getHorizontalCoordinate,n=e.internal.getVerticalCoordinate,a=t[0],s=t[1],i=t[2],l=t[3],c={};return c.lowerLeft_X=r(a)||0,c.lowerLeft_Y=n(s+l)||0,c.upperRight_X=r(a+i)||0,c.upperRight_Y=n(s)||0,[Number(mn(c.lowerLeft_X)),Number(mn(c.lowerLeft_Y)),Number(mn(c.upperRight_X)),Number(mn(c.upperRight_Y))]},JEe=function(t){if(t.appearanceStreamContent)return t.appearanceStreamContent;if(t.V||t.DV){var e=[],r=t._V||t.DV,n=KT(t,r),a=t.scope.internal.getFont(t.fontName,t.fontStyle).id;e.push("/Tx BMC"),e.push("q"),e.push("BT"),e.push(t.scope.__private__.encodeColorString(t.color)),e.push("/"+a+" "+mn(n.fontSize)+" Tf"),e.push("1 0 0 1 0 0 Tm"),e.push(n.text),e.push("ET"),e.push("Q"),e.push("EMC");var s=lf(t);return s.scope=t.scope,s.stream=e.join(`
`),s}},KT=function(t,e){var r=t.fontSize===0?t.maxFontSize:t.fontSize,n={text:"",fontSize:""},a=(e=(e=e.substr(0,1)=="("?e.substr(1):e).substr(e.length-1)==")"?e.substr(0,e.length-1):e).split(" ");a=t.multiline?a.map(function(P){return P.split(`
`)}):a.map(function(P){return[P]});var s=r,i=Lr.internal.getHeight(t)||0;i=i<0?-i:i;var l=Lr.internal.getWidth(t)||0;l=l<0?-l:l;var c=function(P,T,F){if(P+1<a.length){var Y=T+" "+a[P+1][0];return nC(Y,t,F).width<=l-4}return!1};s++;e:for(;s>0;){e="",s--;var u,d,f=nC("3",t,s).height,h=t.multiline?i-s:(i-f)/2,A=h+=2,m=0,p=0,g=0;if(s<=0){e=`(...) Tj
`,e+="% Width of Text: "+nC(e,t,s=12).width+", FieldWidth:"+l+`
`;break}for(var x="",y=0,b=0;b<a.length;b++)if(a.hasOwnProperty(b)){var w=!1;if(a[b].length!==1&&g!==a[b].length-1){if((f+2)*(y+2)+2>i)continue e;x+=a[b][g],w=!0,p=b,b--}else{x=(x+=a[b][g]+" ").substr(x.length-1)==" "?x.substr(0,x.length-1):x;var j=parseInt(b),I=c(j,x,s),_=b>=a.length-1;if(I&&!_){x+=" ",g=0;continue}if(I||_){if(_)p=j;else if(t.multiline&&(f+2)*(y+2)+2>i)continue e}else{if(!t.multiline||(f+2)*(y+2)+2>i)continue e;p=j}}for(var E="",S=m;S<=p;S++){var k=a[S];if(t.multiline){if(S===p){E+=k[g]+" ",g=(g+1)%k.length;continue}if(S===m){E+=k[k.length-1]+" ";continue}}E+=k[0]+" "}switch(E=E.substr(E.length-1)==" "?E.substr(0,E.length-1):E,d=nC(E,t,s).width,t.textAlign){case"right":u=l-d-2;break;case"center":u=(l-d)/2;break;default:u=2}e+=mn(u)+" "+mn(A)+` Td
`,e+="("+ag(E)+`) Tj
`,e+=-mn(u)+` 0 Td
`,A=-(s+2),d=0,m=w?p:p+1,y++,x=""}break}return n.text=e,n.fontSize=s,n},nC=function(t,e,r){var n=e.scope.internal.getFont(e.fontName,e.fontStyle),a=e.scope.getStringUnitWidth(t,{font:n,fontSize:parseFloat(r),charSpace:0})*parseFloat(r);return{height:e.scope.getStringUnitWidth("3",{font:n,fontSize:parseFloat(r),charSpace:0})*parseFloat(r)*1.5,width:a}},ZEe={fields:[],xForms:[],acroFormDictionaryRoot:null,printedOut:!1,internal:null,isInitialized:!1},eSe=function(t,e){var r={type:"reference",object:t};e.internal.getPageInfo(t.page).pageContext.annotations.find(function(n){return n.type===r.type&&n.object===r.object})===void 0&&e.internal.getPageInfo(t.page).pageContext.annotations.push(r)},tSe=function(t,e){if(e.scope=t,t.internal!==void 0&&(t.internal.acroformPlugin===void 0||t.internal.acroformPlugin.isInitialized===!1)){if(Hd.FieldNum=0,t.internal.acroformPlugin=JSON.parse(JSON.stringify(ZEe)),t.internal.acroformPlugin.acroFormDictionaryRoot)throw new Error("Exception while creating AcroformDictionary");M6=t.internal.scaleFactor,t.internal.acroformPlugin.acroFormDictionaryRoot=new Jee,t.internal.acroformPlugin.acroFormDictionaryRoot.scope=t,t.internal.acroformPlugin.acroFormDictionaryRoot._eventID=t.internal.events.subscribe("postPutResources",function(){(function(r){r.internal.events.unsubscribe(r.internal.acroformPlugin.acroFormDictionaryRoot._eventID),delete r.internal.acroformPlugin.acroFormDictionaryRoot._eventID,r.internal.acroformPlugin.printedOut=!0})(t)}),t.internal.events.subscribe("buildDocument",function(){(function(r){r.internal.acroformPlugin.acroFormDictionaryRoot.objId=void 0;var n=r.internal.acroformPlugin.acroFormDictionaryRoot.Fields;for(var a in n)if(n.hasOwnProperty(a)){var s=n[a];s.objId=void 0,s.hasAnnotation&&eSe(s,r)}})(t)}),t.internal.events.subscribe("putCatalog",function(){(function(r){if(r.internal.acroformPlugin.acroFormDictionaryRoot===void 0)throw new Error("putCatalogCallback: Root missing.");r.internal.write("/AcroForm "+r.internal.acroformPlugin.acroFormDictionaryRoot.objId+" 0 R")})(t)}),t.internal.events.subscribe("postPutPages",function(r){(function(n,a){var s=!n;for(var i in n||(a.internal.newObjectDeferredBegin(a.internal.acroformPlugin.acroFormDictionaryRoot.objId,!0),a.internal.acroformPlugin.acroFormDictionaryRoot.putStream()),n=n||a.internal.acroformPlugin.acroFormDictionaryRoot.Kids)if(n.hasOwnProperty(i)){var l=n[i],c=[],u=l.Rect;if(l.Rect&&(l.Rect=YEe(l.Rect,a)),a.internal.newObjectDeferredBegin(l.objId,!0),l.DA=Lr.createDefaultAppearanceStream(l),wa(l)==="object"&&typeof l.getKeyValueListForStream=="function"&&(c=l.getKeyValueListForStream()),l.Rect=u,l.hasAppearanceStream&&!l.appearanceStreamContent){var d=JEe(l);c.push({key:"AP",value:"<</N "+d+">>"}),a.internal.acroformPlugin.xForms.push(d)}if(l.appearanceStreamContent){var f="";for(var h in l.appearanceStreamContent)if(l.appearanceStreamContent.hasOwnProperty(h)){var A=l.appearanceStreamContent[h];if(f+="/"+h+" ",f+="<<",Object.keys(A).length>=1||Array.isArray(A)){for(var i in A)if(A.hasOwnProperty(i)){var m=A[i];typeof m=="function"&&(m=m.call(a,l)),f+="/"+i+" "+m+" ",a.internal.acroformPlugin.xForms.indexOf(m)>=0||a.internal.acroformPlugin.xForms.push(m)}}else typeof(m=A)=="function"&&(m=m.call(a,l)),f+="/"+i+" "+m,a.internal.acroformPlugin.xForms.indexOf(m)>=0||a.internal.acroformPlugin.xForms.push(m);f+=">>"}c.push({key:"AP",value:`<<
`+f+">>"})}a.internal.putStream({additionalKeyValues:c,objectId:l.objId}),a.internal.out("endobj")}s&&function(p,g){for(var x in p)if(p.hasOwnProperty(x)){var y=x,b=p[x];g.internal.newObjectDeferredBegin(b.objId,!0),wa(b)==="object"&&typeof b.putStream=="function"&&b.putStream(),delete p[y]}}(a.internal.acroformPlugin.xForms,a)})(r,t)}),t.internal.acroformPlugin.isInitialized=!0}},Xee=Vs.__acroform__.arrayToPdfArray=function(t,e,r){var n=function(i){return i};if(Array.isArray(t)){for(var a="[",s=0;s<t.length;s++)switch(s!==0&&(a+=" "),wa(t[s])){case"boolean":case"number":case"object":a+=t[s].toString();break;case"string":t[s].substr(0,1)!=="/"?(e!==void 0&&r&&(n=r.internal.getEncryptor(e)),a+="("+ag(n(t[s].toString()))+")"):a+=t[s].toString()}return a+"]"}throw new Error("Invalid argument passed to jsPDF.__acroform__.arrayToPdfArray")},I5=function(t,e,r){var n=function(a){return a};return e!==void 0&&r&&(n=r.internal.getEncryptor(e)),(t=t||"").toString(),"("+ag(n(t))+")"},pf=function(){this._objId=void 0,this._scope=void 0,Object.defineProperty(this,"objId",{get:function(){if(this._objId===void 0){if(this.scope===void 0)return;this._objId=this.scope.internal.newObjectDeferred()}return this._objId},set:function(t){this._objId=t}}),Object.defineProperty(this,"scope",{value:this._scope,writable:!0})};pf.prototype.toString=function(){return this.objId+" 0 R"},pf.prototype.putStream=function(){var t=this.getKeyValueListForStream();this.scope.internal.putStream({data:this.stream,additionalKeyValues:t,objectId:this.objId}),this.scope.internal.out("endobj")},pf.prototype.getKeyValueListForStream=function(){var t=[],e=Object.getOwnPropertyNames(this).filter(function(s){return s!="content"&&s!="appearanceStreamContent"&&s!="scope"&&s!="objId"&&s.substring(0,1)!="_"});for(var r in e)if(Object.getOwnPropertyDescriptor(this,e[r]).configurable===!1){var n=e[r],a=this[n];a&&(Array.isArray(a)?t.push({key:n,value:Xee(a,this.objId,this.scope)}):a instanceof pf?(a.scope=this.scope,t.push({key:n,value:a.objId+" 0 R"})):typeof a!="function"&&t.push({key:n,value:a}))}return t};var Yee=function(){pf.call(this),Object.defineProperty(this,"Type",{value:"/XObject",configurable:!1,writable:!0}),Object.defineProperty(this,"Subtype",{value:"/Form",configurable:!1,writable:!0}),Object.defineProperty(this,"FormType",{value:1,configurable:!1,writable:!0});var t,e=[];Object.defineProperty(this,"BBox",{configurable:!1,get:function(){return e},set:function(r){e=r}}),Object.defineProperty(this,"Resources",{value:"2 0 R",configurable:!1,writable:!0}),Object.defineProperty(this,"stream",{enumerable:!1,configurable:!0,set:function(r){t=r.trim()},get:function(){return t||null}})};pc(Yee,pf);var Jee=function(){pf.call(this);var t,e=[];Object.defineProperty(this,"Kids",{enumerable:!1,configurable:!0,get:function(){return e.length>0?e:void 0}}),Object.defineProperty(this,"Fields",{enumerable:!1,configurable:!1,get:function(){return e}}),Object.defineProperty(this,"DA",{enumerable:!1,configurable:!1,get:function(){if(t){var r=function(n){return n};return this.scope&&(r=this.scope.internal.getEncryptor(this.objId)),"("+ag(r(t))+")"}},set:function(r){t=r}})};pc(Jee,pf);var Hd=function t(){pf.call(this);var e=4;Object.defineProperty(this,"F",{enumerable:!1,configurable:!1,get:function(){return e},set:function(x){if(isNaN(x))throw new Error('Invalid value "'+x+'" for attribute F supplied.');e=x}}),Object.defineProperty(this,"showWhenPrinted",{enumerable:!0,configurable:!0,get:function(){return!!oi(e,3)},set:function(x){x?this.F=li(e,3):this.F=ci(e,3)}});var r=0;Object.defineProperty(this,"Ff",{enumerable:!1,configurable:!1,get:function(){return r},set:function(x){if(isNaN(x))throw new Error('Invalid value "'+x+'" for attribute Ff supplied.');r=x}});var n=[];Object.defineProperty(this,"Rect",{enumerable:!1,configurable:!1,get:function(){if(n.length!==0)return n},set:function(x){n=x!==void 0?x:[]}}),Object.defineProperty(this,"x",{enumerable:!0,configurable:!0,get:function(){return!n||isNaN(n[0])?0:n[0]},set:function(x){n[0]=x}}),Object.defineProperty(this,"y",{enumerable:!0,configurable:!0,get:function(){return!n||isNaN(n[1])?0:n[1]},set:function(x){n[1]=x}}),Object.defineProperty(this,"width",{enumerable:!0,configurable:!0,get:function(){return!n||isNaN(n[2])?0:n[2]},set:function(x){n[2]=x}}),Object.defineProperty(this,"height",{enumerable:!0,configurable:!0,get:function(){return!n||isNaN(n[3])?0:n[3]},set:function(x){n[3]=x}});var a="";Object.defineProperty(this,"FT",{enumerable:!0,configurable:!1,get:function(){return a},set:function(x){switch(x){case"/Btn":case"/Tx":case"/Ch":case"/Sig":a=x;break;default:throw new Error('Invalid value "'+x+'" for attribute FT supplied.')}}});var s=null;Object.defineProperty(this,"T",{enumerable:!0,configurable:!1,get:function(){if(!s||s.length<1){if(this instanceof ZE)return;s="FieldObject"+t.FieldNum++}var x=function(y){return y};return this.scope&&(x=this.scope.internal.getEncryptor(this.objId)),"("+ag(x(s))+")"},set:function(x){s=x.toString()}}),Object.defineProperty(this,"fieldName",{configurable:!0,enumerable:!0,get:function(){return s},set:function(x){s=x}});var i="helvetica";Object.defineProperty(this,"fontName",{enumerable:!0,configurable:!0,get:function(){return i},set:function(x){i=x}});var l="normal";Object.defineProperty(this,"fontStyle",{enumerable:!0,configurable:!0,get:function(){return l},set:function(x){l=x}});var c=0;Object.defineProperty(this,"fontSize",{enumerable:!0,configurable:!0,get:function(){return c},set:function(x){c=x}});var u=void 0;Object.defineProperty(this,"maxFontSize",{enumerable:!0,configurable:!0,get:function(){return u===void 0?50/M6:u},set:function(x){u=x}});var d="black";Object.defineProperty(this,"color",{enumerable:!0,configurable:!0,get:function(){return d},set:function(x){d=x}});var f="/F1 0 Tf 0 g";Object.defineProperty(this,"DA",{enumerable:!0,configurable:!1,get:function(){if(!(!f||this instanceof ZE||this instanceof P0))return I5(f,this.objId,this.scope)},set:function(x){x=x.toString(),f=x}});var h=null;Object.defineProperty(this,"DV",{enumerable:!1,configurable:!1,get:function(){if(h)return this instanceof Fi==0?I5(h,this.objId,this.scope):h},set:function(x){x=x.toString(),h=this instanceof Fi==0?x.substr(0,1)==="("?Og(x.substr(1,x.length-2)):Og(x):x}}),Object.defineProperty(this,"defaultValue",{enumerable:!0,configurable:!0,get:function(){return this instanceof Fi==1?Og(h.substr(1,h.length-1)):h},set:function(x){x=x.toString(),h=this instanceof Fi==1?"/"+x:x}});var A=null;Object.defineProperty(this,"_V",{enumerable:!1,configurable:!1,get:function(){if(A)return A},set:function(x){this.V=x}}),Object.defineProperty(this,"V",{enumerable:!1,configurable:!1,get:function(){if(A)return this instanceof Fi==0?I5(A,this.objId,this.scope):A},set:function(x){x=x.toString(),A=this instanceof Fi==0?x.substr(0,1)==="("?Og(x.substr(1,x.length-2)):Og(x):x}}),Object.defineProperty(this,"value",{enumerable:!0,configurable:!0,get:function(){return this instanceof Fi==1?Og(A.substr(1,A.length-1)):A},set:function(x){x=x.toString(),A=this instanceof Fi==1?"/"+x:x}}),Object.defineProperty(this,"hasAnnotation",{enumerable:!0,configurable:!0,get:function(){return this.Rect}}),Object.defineProperty(this,"Type",{enumerable:!0,configurable:!1,get:function(){return this.hasAnnotation?"/Annot":null}}),Object.defineProperty(this,"Subtype",{enumerable:!0,configurable:!1,get:function(){return this.hasAnnotation?"/Widget":null}});var m,p=!1;Object.defineProperty(this,"hasAppearanceStream",{enumerable:!0,configurable:!0,get:function(){return p},set:function(x){x=!!x,p=x}}),Object.defineProperty(this,"page",{enumerable:!0,configurable:!0,get:function(){if(m)return m},set:function(x){m=x}}),Object.defineProperty(this,"readOnly",{enumerable:!0,configurable:!0,get:function(){return!!oi(this.Ff,1)},set:function(x){x?this.Ff=li(this.Ff,1):this.Ff=ci(this.Ff,1)}}),Object.defineProperty(this,"required",{enumerable:!0,configurable:!0,get:function(){return!!oi(this.Ff,2)},set:function(x){x?this.Ff=li(this.Ff,2):this.Ff=ci(this.Ff,2)}}),Object.defineProperty(this,"noExport",{enumerable:!0,configurable:!0,get:function(){return!!oi(this.Ff,3)},set:function(x){x?this.Ff=li(this.Ff,3):this.Ff=ci(this.Ff,3)}});var g=null;Object.defineProperty(this,"Q",{enumerable:!0,configurable:!1,get:function(){if(g!==null)return g},set:function(x){if([0,1,2].indexOf(x)===-1)throw new Error('Invalid value "'+x+'" for attribute Q supplied.');g=x}}),Object.defineProperty(this,"textAlign",{get:function(){var x;switch(g){case 0:default:x="left";break;case 1:x="center";break;case 2:x="right"}return x},configurable:!0,enumerable:!0,set:function(x){switch(x){case"right":case 2:g=2;break;case"center":case 1:g=1;break;default:g=0}}})};pc(Hd,pf);var ap=function(){Hd.call(this),this.FT="/Ch",this.V="()",this.fontName="zapfdingbats";var t=0;Object.defineProperty(this,"TI",{enumerable:!0,configurable:!1,get:function(){return t},set:function(r){t=r}}),Object.defineProperty(this,"topIndex",{enumerable:!0,configurable:!0,get:function(){return t},set:function(r){t=r}});var e=[];Object.defineProperty(this,"Opt",{enumerable:!0,configurable:!1,get:function(){return Xee(e,this.objId,this.scope)},set:function(r){var n,a;a=[],typeof(n=r)=="string"&&(a=function(s,i,l){l||(l=1);for(var c,u=[];c=i.exec(s);)u.push(c[l]);return u}(n,/\((.*?)\)/g)),e=a}}),this.getOptions=function(){return e},this.setOptions=function(r){e=r,this.sort&&e.sort()},this.addOption=function(r){r=(r=r||"").toString(),e.push(r),this.sort&&e.sort()},this.removeOption=function(r,n){for(n=n||!1,r=(r=r||"").toString();e.indexOf(r)!==-1&&(e.splice(e.indexOf(r),1),n!==!1););},Object.defineProperty(this,"combo",{enumerable:!0,configurable:!0,get:function(){return!!oi(this.Ff,18)},set:function(r){r?this.Ff=li(this.Ff,18):this.Ff=ci(this.Ff,18)}}),Object.defineProperty(this,"edit",{enumerable:!0,configurable:!0,get:function(){return!!oi(this.Ff,19)},set:function(r){this.combo===!0&&(r?this.Ff=li(this.Ff,19):this.Ff=ci(this.Ff,19))}}),Object.defineProperty(this,"sort",{enumerable:!0,configurable:!0,get:function(){return!!oi(this.Ff,20)},set:function(r){r?(this.Ff=li(this.Ff,20),e.sort()):this.Ff=ci(this.Ff,20)}}),Object.defineProperty(this,"multiSelect",{enumerable:!0,configurable:!0,get:function(){return!!oi(this.Ff,22)},set:function(r){r?this.Ff=li(this.Ff,22):this.Ff=ci(this.Ff,22)}}),Object.defineProperty(this,"doNotSpellCheck",{enumerable:!0,configurable:!0,get:function(){return!!oi(this.Ff,23)},set:function(r){r?this.Ff=li(this.Ff,23):this.Ff=ci(this.Ff,23)}}),Object.defineProperty(this,"commitOnSelChange",{enumerable:!0,configurable:!0,get:function(){return!!oi(this.Ff,27)},set:function(r){r?this.Ff=li(this.Ff,27):this.Ff=ci(this.Ff,27)}}),this.hasAppearanceStream=!1};pc(ap,Hd);var sp=function(){ap.call(this),this.fontName="helvetica",this.combo=!1};pc(sp,ap);var ip=function(){sp.call(this),this.combo=!0};pc(ip,sp);var Xy=function(){ip.call(this),this.edit=!0};pc(Xy,ip);var Fi=function(){Hd.call(this),this.FT="/Btn",Object.defineProperty(this,"noToggleToOff",{enumerable:!0,configurable:!0,get:function(){return!!oi(this.Ff,15)},set:function(r){r?this.Ff=li(this.Ff,15):this.Ff=ci(this.Ff,15)}}),Object.defineProperty(this,"radio",{enumerable:!0,configurable:!0,get:function(){return!!oi(this.Ff,16)},set:function(r){r?this.Ff=li(this.Ff,16):this.Ff=ci(this.Ff,16)}}),Object.defineProperty(this,"pushButton",{enumerable:!0,configurable:!0,get:function(){return!!oi(this.Ff,17)},set:function(r){r?this.Ff=li(this.Ff,17):this.Ff=ci(this.Ff,17)}}),Object.defineProperty(this,"radioIsUnison",{enumerable:!0,configurable:!0,get:function(){return!!oi(this.Ff,26)},set:function(r){r?this.Ff=li(this.Ff,26):this.Ff=ci(this.Ff,26)}});var t,e={};Object.defineProperty(this,"MK",{enumerable:!1,configurable:!1,get:function(){var r=function(s){return s};if(this.scope&&(r=this.scope.internal.getEncryptor(this.objId)),Object.keys(e).length!==0){var n,a=[];for(n in a.push("<<"),e)a.push("/"+n+" ("+ag(r(e[n]))+")");return a.push(">>"),a.join(`
`)}},set:function(r){wa(r)==="object"&&(e=r)}}),Object.defineProperty(this,"caption",{enumerable:!0,configurable:!0,get:function(){return e.CA||""},set:function(r){typeof r=="string"&&(e.CA=r)}}),Object.defineProperty(this,"AS",{enumerable:!1,configurable:!1,get:function(){return t},set:function(r){t=r}}),Object.defineProperty(this,"appearanceState",{enumerable:!0,configurable:!0,get:function(){return t.substr(1,t.length-1)},set:function(r){t="/"+r}})};pc(Fi,Hd);var Yy=function(){Fi.call(this),this.pushButton=!0};pc(Yy,Fi);var op=function(){Fi.call(this),this.radio=!0,this.pushButton=!1;var t=[];Object.defineProperty(this,"Kids",{enumerable:!0,configurable:!1,get:function(){return t},set:function(e){t=e!==void 0?e:[]}})};pc(op,Fi);var ZE=function(){var t,e;Hd.call(this),Object.defineProperty(this,"Parent",{enumerable:!1,configurable:!1,get:function(){return t},set:function(a){t=a}}),Object.defineProperty(this,"optionName",{enumerable:!1,configurable:!0,get:function(){return e},set:function(a){e=a}});var r,n={};Object.defineProperty(this,"MK",{enumerable:!1,configurable:!1,get:function(){var a=function(l){return l};this.scope&&(a=this.scope.internal.getEncryptor(this.objId));var s,i=[];for(s in i.push("<<"),n)i.push("/"+s+" ("+ag(a(n[s]))+")");return i.push(">>"),i.join(`
`)},set:function(a){wa(a)==="object"&&(n=a)}}),Object.defineProperty(this,"caption",{enumerable:!0,configurable:!0,get:function(){return n.CA||""},set:function(a){typeof a=="string"&&(n.CA=a)}}),Object.defineProperty(this,"AS",{enumerable:!1,configurable:!1,get:function(){return r},set:function(a){r=a}}),Object.defineProperty(this,"appearanceState",{enumerable:!0,configurable:!0,get:function(){return r.substr(1,r.length-1)},set:function(a){r="/"+a}}),this.caption="l",this.appearanceState="Off",this._AppearanceType=Lr.RadioButton.Circle,this.appearanceStreamContent=this._AppearanceType.createAppearanceStream(this.optionName)};pc(ZE,Hd),op.prototype.setAppearance=function(t){if(!("createAppearanceStream"in t)||!("getCA"in t))throw new Error("Couldn't assign Appearance to RadioButton. Appearance was Invalid!");for(var e in this.Kids)if(this.Kids.hasOwnProperty(e)){var r=this.Kids[e];r.appearanceStreamContent=t.createAppearanceStream(r.optionName),r.caption=t.getCA()}},op.prototype.createOption=function(t){var e=new ZE;return e.Parent=this,e.optionName=t,this.Kids.push(e),rSe.call(this.scope,e),e};var Jy=function(){Fi.call(this),this.fontName="zapfdingbats",this.caption="3",this.appearanceState="On",this.value="On",this.textAlign="center",this.appearanceStreamContent=Lr.CheckBox.createAppearanceStream()};pc(Jy,Fi);var P0=function(){Hd.call(this),this.FT="/Tx",Object.defineProperty(this,"multiline",{enumerable:!0,configurable:!0,get:function(){return!!oi(this.Ff,13)},set:function(e){e?this.Ff=li(this.Ff,13):this.Ff=ci(this.Ff,13)}}),Object.defineProperty(this,"fileSelect",{enumerable:!0,configurable:!0,get:function(){return!!oi(this.Ff,21)},set:function(e){e?this.Ff=li(this.Ff,21):this.Ff=ci(this.Ff,21)}}),Object.defineProperty(this,"doNotSpellCheck",{enumerable:!0,configurable:!0,get:function(){return!!oi(this.Ff,23)},set:function(e){e?this.Ff=li(this.Ff,23):this.Ff=ci(this.Ff,23)}}),Object.defineProperty(this,"doNotScroll",{enumerable:!0,configurable:!0,get:function(){return!!oi(this.Ff,24)},set:function(e){e?this.Ff=li(this.Ff,24):this.Ff=ci(this.Ff,24)}}),Object.defineProperty(this,"comb",{enumerable:!0,configurable:!0,get:function(){return!!oi(this.Ff,25)},set:function(e){e?this.Ff=li(this.Ff,25):this.Ff=ci(this.Ff,25)}}),Object.defineProperty(this,"richText",{enumerable:!0,configurable:!0,get:function(){return!!oi(this.Ff,26)},set:function(e){e?this.Ff=li(this.Ff,26):this.Ff=ci(this.Ff,26)}});var t=null;Object.defineProperty(this,"MaxLen",{enumerable:!0,configurable:!1,get:function(){return t},set:function(e){t=e}}),Object.defineProperty(this,"maxLength",{enumerable:!0,configurable:!0,get:function(){return t},set:function(e){Number.isInteger(e)&&(t=e)}}),Object.defineProperty(this,"hasAppearanceStream",{enumerable:!0,configurable:!0,get:function(){return this.V||this.DV}})};pc(P0,Hd);var Zy=function(){P0.call(this),Object.defineProperty(this,"password",{enumerable:!0,configurable:!0,get:function(){return!!oi(this.Ff,14)},set:function(t){t?this.Ff=li(this.Ff,14):this.Ff=ci(this.Ff,14)}}),this.password=!0};pc(Zy,P0);var Lr={CheckBox:{createAppearanceStream:function(){return{N:{On:Lr.CheckBox.YesNormal},D:{On:Lr.CheckBox.YesPushDown,Off:Lr.CheckBox.OffPushDown}}},YesPushDown:function(t){var e=lf(t);e.scope=t.scope;var r=[],n=t.scope.internal.getFont(t.fontName,t.fontStyle).id,a=t.scope.__private__.encodeColorString(t.color),s=KT(t,t.caption);return r.push("0.749023 g"),r.push("0 0 "+mn(Lr.internal.getWidth(t))+" "+mn(Lr.internal.getHeight(t))+" re"),r.push("f"),r.push("BMC"),r.push("q"),r.push("0 0 1 rg"),r.push("/"+n+" "+mn(s.fontSize)+" Tf "+a),r.push("BT"),r.push(s.text),r.push("ET"),r.push("Q"),r.push("EMC"),e.stream=r.join(`
`),e},YesNormal:function(t){var e=lf(t);e.scope=t.scope;var r=t.scope.internal.getFont(t.fontName,t.fontStyle).id,n=t.scope.__private__.encodeColorString(t.color),a=[],s=Lr.internal.getHeight(t),i=Lr.internal.getWidth(t),l=KT(t,t.caption);return a.push("1 g"),a.push("0 0 "+mn(i)+" "+mn(s)+" re"),a.push("f"),a.push("q"),a.push("0 0 1 rg"),a.push("0 0 "+mn(i-1)+" "+mn(s-1)+" re"),a.push("W"),a.push("n"),a.push("0 g"),a.push("BT"),a.push("/"+r+" "+mn(l.fontSize)+" Tf "+n),a.push(l.text),a.push("ET"),a.push("Q"),e.stream=a.join(`
`),e},OffPushDown:function(t){var e=lf(t);e.scope=t.scope;var r=[];return r.push("0.749023 g"),r.push("0 0 "+mn(Lr.internal.getWidth(t))+" "+mn(Lr.internal.getHeight(t))+" re"),r.push("f"),e.stream=r.join(`
`),e}},RadioButton:{Circle:{createAppearanceStream:function(t){var e={D:{Off:Lr.RadioButton.Circle.OffPushDown},N:{}};return e.N[t]=Lr.RadioButton.Circle.YesNormal,e.D[t]=Lr.RadioButton.Circle.YesPushDown,e},getCA:function(){return"l"},YesNormal:function(t){var e=lf(t);e.scope=t.scope;var r=[],n=Lr.internal.getWidth(t)<=Lr.internal.getHeight(t)?Lr.internal.getWidth(t)/4:Lr.internal.getHeight(t)/4;n=Number((.9*n).toFixed(5));var a=Lr.internal.Bezier_C,s=Number((n*a).toFixed(5));return r.push("q"),r.push("1 0 0 1 "+Oh(Lr.internal.getWidth(t)/2)+" "+Oh(Lr.internal.getHeight(t)/2)+" cm"),r.push(n+" 0 m"),r.push(n+" "+s+" "+s+" "+n+" 0 "+n+" c"),r.push("-"+s+" "+n+" -"+n+" "+s+" -"+n+" 0 c"),r.push("-"+n+" -"+s+" -"+s+" -"+n+" 0 -"+n+" c"),r.push(s+" -"+n+" "+n+" -"+s+" "+n+" 0 c"),r.push("f"),r.push("Q"),e.stream=r.join(`
`),e},YesPushDown:function(t){var e=lf(t);e.scope=t.scope;var r=[],n=Lr.internal.getWidth(t)<=Lr.internal.getHeight(t)?Lr.internal.getWidth(t)/4:Lr.internal.getHeight(t)/4;n=Number((.9*n).toFixed(5));var a=Number((2*n).toFixed(5)),s=Number((a*Lr.internal.Bezier_C).toFixed(5)),i=Number((n*Lr.internal.Bezier_C).toFixed(5));return r.push("0.749023 g"),r.push("q"),r.push("1 0 0 1 "+Oh(Lr.internal.getWidth(t)/2)+" "+Oh(Lr.internal.getHeight(t)/2)+" cm"),r.push(a+" 0 m"),r.push(a+" "+s+" "+s+" "+a+" 0 "+a+" c"),r.push("-"+s+" "+a+" -"+a+" "+s+" -"+a+" 0 c"),r.push("-"+a+" -"+s+" -"+s+" -"+a+" 0 -"+a+" c"),r.push(s+" -"+a+" "+a+" -"+s+" "+a+" 0 c"),r.push("f"),r.push("Q"),r.push("0 g"),r.push("q"),r.push("1 0 0 1 "+Oh(Lr.internal.getWidth(t)/2)+" "+Oh(Lr.internal.getHeight(t)/2)+" cm"),r.push(n+" 0 m"),r.push(n+" "+i+" "+i+" "+n+" 0 "+n+" c"),r.push("-"+i+" "+n+" -"+n+" "+i+" -"+n+" 0 c"),r.push("-"+n+" -"+i+" -"+i+" -"+n+" 0 -"+n+" c"),r.push(i+" -"+n+" "+n+" -"+i+" "+n+" 0 c"),r.push("f"),r.push("Q"),e.stream=r.join(`
`),e},OffPushDown:function(t){var e=lf(t);e.scope=t.scope;var r=[],n=Lr.internal.getWidth(t)<=Lr.internal.getHeight(t)?Lr.internal.getWidth(t)/4:Lr.internal.getHeight(t)/4;n=Number((.9*n).toFixed(5));var a=Number((2*n).toFixed(5)),s=Number((a*Lr.internal.Bezier_C).toFixed(5));return r.push("0.749023 g"),r.push("q"),r.push("1 0 0 1 "+Oh(Lr.internal.getWidth(t)/2)+" "+Oh(Lr.internal.getHeight(t)/2)+" cm"),r.push(a+" 0 m"),r.push(a+" "+s+" "+s+" "+a+" 0 "+a+" c"),r.push("-"+s+" "+a+" -"+a+" "+s+" -"+a+" 0 c"),r.push("-"+a+" -"+s+" -"+s+" -"+a+" 0 -"+a+" c"),r.push(s+" -"+a+" "+a+" -"+s+" "+a+" 0 c"),r.push("f"),r.push("Q"),e.stream=r.join(`
`),e}},Cross:{createAppearanceStream:function(t){var e={D:{Off:Lr.RadioButton.Cross.OffPushDown},N:{}};return e.N[t]=Lr.RadioButton.Cross.YesNormal,e.D[t]=Lr.RadioButton.Cross.YesPushDown,e},getCA:function(){return"8"},YesNormal:function(t){var e=lf(t);e.scope=t.scope;var r=[],n=Lr.internal.calculateCross(t);return r.push("q"),r.push("1 1 "+mn(Lr.internal.getWidth(t)-2)+" "+mn(Lr.internal.getHeight(t)-2)+" re"),r.push("W"),r.push("n"),r.push(mn(n.x1.x)+" "+mn(n.x1.y)+" m"),r.push(mn(n.x2.x)+" "+mn(n.x2.y)+" l"),r.push(mn(n.x4.x)+" "+mn(n.x4.y)+" m"),r.push(mn(n.x3.x)+" "+mn(n.x3.y)+" l"),r.push("s"),r.push("Q"),e.stream=r.join(`
`),e},YesPushDown:function(t){var e=lf(t);e.scope=t.scope;var r=Lr.internal.calculateCross(t),n=[];return n.push("0.749023 g"),n.push("0 0 "+mn(Lr.internal.getWidth(t))+" "+mn(Lr.internal.getHeight(t))+" re"),n.push("f"),n.push("q"),n.push("1 1 "+mn(Lr.internal.getWidth(t)-2)+" "+mn(Lr.internal.getHeight(t)-2)+" re"),n.push("W"),n.push("n"),n.push(mn(r.x1.x)+" "+mn(r.x1.y)+" m"),n.push(mn(r.x2.x)+" "+mn(r.x2.y)+" l"),n.push(mn(r.x4.x)+" "+mn(r.x4.y)+" m"),n.push(mn(r.x3.x)+" "+mn(r.x3.y)+" l"),n.push("s"),n.push("Q"),e.stream=n.join(`
`),e},OffPushDown:function(t){var e=lf(t);e.scope=t.scope;var r=[];return r.push("0.749023 g"),r.push("0 0 "+mn(Lr.internal.getWidth(t))+" "+mn(Lr.internal.getHeight(t))+" re"),r.push("f"),e.stream=r.join(`
`),e}}},createDefaultAppearanceStream:function(t){var e=t.scope.internal.getFont(t.fontName,t.fontStyle).id,r=t.scope.__private__.encodeColorString(t.color);return"/"+e+" "+t.fontSize+" Tf "+r}};Lr.internal={Bezier_C:.551915024494,calculateCross:function(t){var e=Lr.internal.getWidth(t),r=Lr.internal.getHeight(t),n=Math.min(e,r);return{x1:{x:(e-n)/2,y:(r-n)/2+n},x2:{x:(e-n)/2+n,y:(r-n)/2},x3:{x:(e-n)/2,y:(r-n)/2},x4:{x:(e-n)/2+n,y:(r-n)/2+n}}}},Lr.internal.getWidth=function(t){var e=0;return wa(t)==="object"&&(e=vQ(t.Rect[2])),e},Lr.internal.getHeight=function(t){var e=0;return wa(t)==="object"&&(e=vQ(t.Rect[3])),e};var rSe=Vs.addField=function(t){if(tSe(this,t),!(t instanceof Hd))throw new Error("Invalid argument passed to jsPDF.addField.");var e;return(e=t).scope.internal.acroformPlugin.printedOut&&(e.scope.internal.acroformPlugin.printedOut=!1,e.scope.internal.acroformPlugin.acroFormDictionaryRoot=null),e.scope.internal.acroformPlugin.acroFormDictionaryRoot.Fields.push(e),t.page=t.scope.internal.getCurrentPageInfo().pageNumber,this};Vs.AcroFormChoiceField=ap,Vs.AcroFormListBox=sp,Vs.AcroFormComboBox=ip,Vs.AcroFormEditBox=Xy,Vs.AcroFormButton=Fi,Vs.AcroFormPushButton=Yy,Vs.AcroFormRadioButton=op,Vs.AcroFormCheckBox=Jy,Vs.AcroFormTextField=P0,Vs.AcroFormPasswordField=Zy,Vs.AcroFormAppearance=Lr,Vs.AcroForm={ChoiceField:ap,ListBox:sp,ComboBox:ip,EditBox:Xy,Button:Fi,PushButton:Yy,RadioButton:op,CheckBox:Jy,TextField:P0,PasswordField:Zy,Appearance:Lr},Or.AcroForm={ChoiceField:ap,ListBox:sp,ComboBox:ip,EditBox:Xy,Button:Fi,PushButton:Yy,RadioButton:op,CheckBox:Jy,TextField:P0,PasswordField:Zy,Appearance:Lr};var nSe=Or.AcroForm;function Zee(t){return t.reduce(function(e,r,n){return e[r]=n,e},{})}(function(t){var e="addImage_";t.__addimage__={};var r="UNKNOWN",n={PNG:[[137,80,78,71]],TIFF:[[77,77,0,42],[73,73,42,0]],JPEG:[[255,216,255,224,void 0,void 0,74,70,73,70,0],[255,216,255,225,void 0,void 0,69,120,105,102,0,0],[255,216,255,219],[255,216,255,238]],JPEG2000:[[0,0,0,12,106,80,32,32]],GIF87a:[[71,73,70,56,55,97]],GIF89a:[[71,73,70,56,57,97]],WEBP:[[82,73,70,70,void 0,void 0,void 0,void 0,87,69,66,80]],BMP:[[66,77],[66,65],[67,73],[67,80],[73,67],[80,84]]},a=t.__addimage__.getImageFileTypeByImageData=function(P,T){var F,Y,he,ue,fe,me=r;if((T=T||r)==="RGBA"||P.data!==void 0&&P.data instanceof Uint8ClampedArray&&"height"in P&&"width"in P)return"RGBA";if(I(P))for(fe in n)for(he=n[fe],F=0;F<he.length;F+=1){for(ue=!0,Y=0;Y<he[F].length;Y+=1)if(he[F][Y]!==void 0&&he[F][Y]!==P[Y]){ue=!1;break}if(ue===!0){me=fe;break}}else for(fe in n)for(he=n[fe],F=0;F<he.length;F+=1){for(ue=!0,Y=0;Y<he[F].length;Y+=1)if(he[F][Y]!==void 0&&he[F][Y]!==P.charCodeAt(Y)){ue=!1;break}if(ue===!0){me=fe;break}}return me===r&&T!==r&&(me=T),me},s=function P(T){for(var F=this.internal.write,Y=this.internal.putStream,he=(0,this.internal.getFilters)();he.indexOf("FlateEncode")!==-1;)he.splice(he.indexOf("FlateEncode"),1);T.objectId=this.internal.newObject();var ue=[];if(ue.push({key:"Type",value:"/XObject"}),ue.push({key:"Subtype",value:"/Image"}),ue.push({key:"Width",value:T.width}),ue.push({key:"Height",value:T.height}),T.colorSpace===x.INDEXED?ue.push({key:"ColorSpace",value:"[/Indexed /DeviceRGB "+(T.palette.length/3-1)+" "+("sMask"in T&&T.sMask!==void 0?T.objectId+2:T.objectId+1)+" 0 R]"}):(ue.push({key:"ColorSpace",value:"/"+T.colorSpace}),T.colorSpace===x.DEVICE_CMYK&&ue.push({key:"Decode",value:"[1 0 1 0 1 0 1 0]"})),ue.push({key:"BitsPerComponent",value:T.bitsPerComponent}),"decodeParameters"in T&&T.decodeParameters!==void 0&&ue.push({key:"DecodeParms",value:"<<"+T.decodeParameters+">>"}),"transparency"in T&&Array.isArray(T.transparency)&&T.transparency.length>0){for(var fe="",me=0,ne=T.transparency.length;me<ne;me++)fe+=T.transparency[me]+" "+T.transparency[me]+" ";ue.push({key:"Mask",value:"["+fe+"]"})}T.sMask!==void 0&&ue.push({key:"SMask",value:T.objectId+1+" 0 R"});var Pe=T.filter!==void 0?["/"+T.filter]:void 0;if(Y({data:T.data,additionalKeyValues:ue,alreadyAppliedFilters:Pe,objectId:T.objectId}),F("endobj"),"sMask"in T&&T.sMask!==void 0){var Ie,O=(Ie=T.sMaskBitsPerComponent)!==null&&Ie!==void 0?Ie:T.bitsPerComponent,H={width:T.width,height:T.height,colorSpace:"DeviceGray",bitsPerComponent:O,data:T.sMask};"filter"in T&&(H.decodeParameters="/Predictor ".concat(T.predictor," /Colors 1 /BitsPerComponent ").concat(O," /Columns ").concat(T.width),H.filter=T.filter),P.call(this,H)}if(T.colorSpace===x.INDEXED){var R=this.internal.newObject();Y({data:E(new Uint8Array(T.palette)),objectId:R}),F("endobj")}},i=function(){var P=this.internal.collections[e+"images"];for(var T in P)s.call(this,P[T])},l=function(){var P,T=this.internal.collections[e+"images"],F=this.internal.write;for(var Y in T)F("/I"+(P=T[Y]).index,P.objectId,"0","R")},c=function(){this.internal.collections[e+"images"]||(this.internal.collections[e+"images"]={},this.internal.events.subscribe("putResources",i),this.internal.events.subscribe("putXobjectDict",l))},u=function(){var P=this.internal.collections[e+"images"];return c.call(this),P},d=function(){return Object.keys(this.internal.collections[e+"images"]).length},f=function(P){return typeof t["process"+P.toUpperCase()]=="function"},h=function(P){return wa(P)==="object"&&P.nodeType===1},A=function(P,T){if(P.nodeName==="IMG"&&P.hasAttribute("src")){var F=""+P.getAttribute("src");if(F.indexOf("data:image/")===0)return M_(unescape(F).split("base64,").pop());var Y=t.loadFile(F,!0);if(Y!==void 0)return Y}if(P.nodeName==="CANVAS"){if(P.width===0||P.height===0)throw new Error("Given canvas must have data. Canvas width: "+P.width+", height: "+P.height);var he;switch(T){case"PNG":he="image/png";break;case"WEBP":he="image/webp";break;default:he="image/jpeg"}return M_(P.toDataURL(he,1).split("base64,").pop())}},m=function(P){var T=this.internal.collections[e+"images"];if(T){for(var F in T)if(P===T[F].alias)return T[F]}},p=function(P,T,F){return P||T||(P=-96,T=-96),P<0&&(P=-1*F.width*72/P/this.internal.scaleFactor),T<0&&(T=-1*F.height*72/T/this.internal.scaleFactor),P===0&&(P=T*F.width/F.height),T===0&&(T=P*F.height/F.width),[P,T]},g=function(P,T,F,Y,he,ue){var fe=p.call(this,F,Y,he),me=this.internal.getCoordinateString,ne=this.internal.getVerticalCoordinateString,Pe=u.call(this);if(F=fe[0],Y=fe[1],Pe[he.index]=he,ue){ue*=Math.PI/180;var Ie=Math.cos(ue),O=Math.sin(ue),H=function(M){return M.toFixed(4)},R=[H(Ie),H(O),H(-1*O),H(Ie),0,0,"cm"]}this.internal.write("q"),ue?(this.internal.write([1,"0","0",1,me(P),ne(T+Y),"cm"].join(" ")),this.internal.write(R.join(" ")),this.internal.write([me(F),"0","0",me(Y),"0","0","cm"].join(" "))):this.internal.write([me(F),"0","0",me(Y),me(P),ne(T+Y),"cm"].join(" ")),this.isAdvancedAPI()&&this.internal.write([1,0,0,-1,0,0,"cm"].join(" ")),this.internal.write("/I"+he.index+" Do"),this.internal.write("Q")},x=t.color_spaces={DEVICE_RGB:"DeviceRGB",DEVICE_GRAY:"DeviceGray",DEVICE_CMYK:"DeviceCMYK",CAL_GREY:"CalGray",CAL_RGB:"CalRGB",LAB:"Lab",ICC_BASED:"ICCBased",INDEXED:"Indexed",PATTERN:"Pattern",SEPARATION:"Separation",DEVICE_N:"DeviceN"};t.decode={DCT_DECODE:"DCTDecode",FLATE_DECODE:"FlateDecode",LZW_DECODE:"LZWDecode",JPX_DECODE:"JPXDecode",JBIG2_DECODE:"JBIG2Decode",ASCII85_DECODE:"ASCII85Decode",ASCII_HEX_DECODE:"ASCIIHexDecode",RUN_LENGTH_DECODE:"RunLengthDecode",CCITT_FAX_DECODE:"CCITTFaxDecode"};var y=t.image_compression={NONE:"NONE",FAST:"FAST",MEDIUM:"MEDIUM",SLOW:"SLOW"},b=t.__addimage__.sHashCode=function(P){var T,F,Y=0;if(typeof P=="string")for(F=P.length,T=0;T<F;T++)Y=(Y<<5)-Y+P.charCodeAt(T),Y|=0;else if(I(P))for(F=P.byteLength/2,T=0;T<F;T++)Y=(Y<<5)-Y+P[T],Y|=0;return Y},w=t.__addimage__.validateStringAsBase64=function(P){(P=P||"").toString().trim();var T=!0;return P.length===0&&(T=!1),P.length%4!=0&&(T=!1),/^[A-Za-z0-9+/]+$/.test(P.substr(0,P.length-2))===!1&&(T=!1),/^[A-Za-z0-9/][A-Za-z0-9+/]|[A-Za-z0-9+/]=|==$/.test(P.substr(-2))===!1&&(T=!1),T},j=t.__addimage__.extractImageFromDataUrl=function(P){if(P==null||!(P=P.trim()).startsWith("data:"))return null;var T=P.indexOf(",");return T<0?null:P.substring(0,T).trim().endsWith("base64")?P.substring(T+1):null};t.__addimage__.isArrayBuffer=function(P){return P instanceof ArrayBuffer};var I=t.__addimage__.isArrayBufferView=function(P){return P instanceof Int8Array||P instanceof Uint8Array||P instanceof Uint8ClampedArray||P instanceof Int16Array||P instanceof Uint16Array||P instanceof Int32Array||P instanceof Uint32Array||P instanceof Float32Array||P instanceof Float64Array},_=t.__addimage__.binaryStringToUint8Array=function(P){for(var T=P.length,F=new Uint8Array(T),Y=0;Y<T;Y++)F[Y]=P.charCodeAt(Y);return F},E=t.__addimage__.arrayBufferToBinaryString=function(P){for(var T="",F=I(P)?P:new Uint8Array(P),Y=0;Y<F.length;Y+=8192)T+=String.fromCharCode.apply(null,F.subarray(Y,Y+8192));return T};t.addImage=function(){var P,T,F,Y,he,ue,fe,me,ne;if(typeof arguments[1]=="number"?(T=r,F=arguments[1],Y=arguments[2],he=arguments[3],ue=arguments[4],fe=arguments[5],me=arguments[6],ne=arguments[7]):(T=arguments[1],F=arguments[2],Y=arguments[3],he=arguments[4],ue=arguments[5],fe=arguments[6],me=arguments[7],ne=arguments[8]),wa(P=arguments[0])==="object"&&!h(P)&&"imageData"in P){var Pe=P;P=Pe.imageData,T=Pe.format||T||r,F=Pe.x||F||0,Y=Pe.y||Y||0,he=Pe.w||Pe.width||he,ue=Pe.h||Pe.height||ue,fe=Pe.alias||fe,me=Pe.compression||me,ne=Pe.rotation||Pe.angle||ne}var Ie=this.internal.getFilters();if(me===void 0&&Ie.indexOf("FlateEncode")!==-1&&(me="SLOW"),isNaN(F)||isNaN(Y))throw new Error("Invalid coordinates passed to jsPDF.addImage");c.call(this);var O=S.call(this,P,T,fe,me);return g.call(this,F,Y,he,ue,O,ne),this};var S=function(P,T,F,Y){var he,ue,fe;if(typeof P=="string"&&a(P)===r){P=unescape(P);var me=k(P,!1);(me!==""||(me=t.loadFile(P,!0))!==void 0)&&(P=me)}if(h(P)&&(P=A(P,T)),T=a(P,T),!f(T))throw new Error("addImage does not support files of type '"+T+"', please ensure that a plugin for '"+T+"' support is added.");if(((fe=F)==null||fe.length===0)&&(F=function(ne){return typeof ne=="string"||I(ne)?b(ne):I(ne.data)?b(ne.data):null}(P)),(he=m.call(this,F))||(P instanceof Uint8Array||T==="RGBA"||(ue=P,P=_(P)),he=this["process"+T.toUpperCase()](P,d.call(this),F,function(ne){return ne&&typeof ne=="string"&&(ne=ne.toUpperCase()),ne in t.image_compression?ne:y.NONE}(Y),ue)),!he)throw new Error("An unknown error occurred whilst processing the image.");return he},k=t.__addimage__.convertBase64ToBinaryString=function(P,T){T=typeof T!="boolean"||T;var F,Y="";if(typeof P=="string"){var he;F=(he=j(P))!==null&&he!==void 0?he:P;try{Y=M_(F)}catch(ue){if(T)throw w(F)?new Error("atob-Error in jsPDF.convertBase64ToBinaryString "+ue.message):new Error("Supplied Data is not a valid base64-String jsPDF.convertBase64ToBinaryString ")}}return Y};t.getImageProperties=function(P){var T,F,Y="";if(h(P)&&(P=A(P)),typeof P=="string"&&a(P)===r&&((Y=k(P,!1))===""&&(Y=t.loadFile(P)||""),P=Y),F=a(P),!f(F))throw new Error("addImage does not support files of type '"+F+"', please ensure that a plugin for '"+F+"' support is added.");if(P instanceof Uint8Array||(P=_(P)),!(T=this["process"+F.toUpperCase()](P)))throw new Error("An unknown error occurred whilst processing the image");return T.fileType=F,T}})(Or.API),function(t){var e=function(r){if(r!==void 0&&r!="")return!0};Or.API.events.push(["addPage",function(r){this.internal.getPageInfo(r.pageNumber).pageContext.annotations=[]}]),t.events.push(["putPage",function(r){for(var n,a,s,i=this.internal.getCoordinateString,l=this.internal.getVerticalCoordinateString,c=this.internal.getPageInfoByObjId(r.objId),u=r.pageContext.annotations,d=!1,f=0;f<u.length&&!d;f++)switch((n=u[f]).type){case"link":(e(n.options.url)||e(n.options.pageNumber))&&(d=!0);break;case"reference":case"text":case"freetext":d=!0}if(d!=0){this.internal.write("/Annots [");for(var h=0;h<u.length;h++){n=u[h];var A=this.internal.pdfEscape,m=this.internal.getEncryptor(r.objId);switch(n.type){case"reference":this.internal.write(" "+n.object.objId+" 0 R ");break;case"text":var p=this.internal.newAdditionalObject(),g=this.internal.newAdditionalObject(),x=this.internal.getEncryptor(p.objId),y=n.title||"Note";s="<</Type /Annot /Subtype /Text "+(a="/Rect ["+i(n.bounds.x)+" "+l(n.bounds.y+n.bounds.h)+" "+i(n.bounds.x+n.bounds.w)+" "+l(n.bounds.y)+"] ")+"/Contents ("+A(x(n.contents))+")",s+=" /Popup "+g.objId+" 0 R",s+=" /P "+c.objId+" 0 R",s+=" /T ("+A(x(y))+") >>",p.content=s;var b=p.objId+" 0 R";s="<</Type /Annot /Subtype /Popup "+(a="/Rect ["+i(n.bounds.x+30)+" "+l(n.bounds.y+n.bounds.h)+" "+i(n.bounds.x+n.bounds.w+30)+" "+l(n.bounds.y)+"] ")+" /Parent "+b,n.open&&(s+=" /Open true"),s+=" >>",g.content=s,this.internal.write(p.objId,"0 R",g.objId,"0 R");break;case"freetext":a="/Rect ["+i(n.bounds.x)+" "+l(n.bounds.y)+" "+i(n.bounds.x+n.bounds.w)+" "+l(n.bounds.y+n.bounds.h)+"] ";var w=n.color||"#000000";s="<</Type /Annot /Subtype /FreeText "+a+"/Contents ("+A(m(n.contents))+")",s+=" /DS(font: Helvetica,sans-serif 12.0pt; text-align:left; color:#"+w+")",s+=" /Border [0 0 0]",s+=" >>",this.internal.write(s);break;case"link":if(n.options.name){var j=this.annotations._nameMap[n.options.name];n.options.pageNumber=j.page,n.options.top=j.y}else n.options.top||(n.options.top=0);if(a="/Rect ["+n.finalBounds.x+" "+n.finalBounds.y+" "+n.finalBounds.w+" "+n.finalBounds.h+"] ",s="",n.options.url)s="<</Type /Annot /Subtype /Link "+a+"/Border [0 0 0] /A <</S /URI /URI ("+A(m(n.options.url))+") >>";else if(n.options.pageNumber)switch(s="<</Type /Annot /Subtype /Link "+a+"/Border [0 0 0] /Dest ["+this.internal.getPageInfo(n.options.pageNumber).objId+" 0 R",n.options.magFactor=n.options.magFactor||"XYZ",n.options.magFactor){case"Fit":s+=" /Fit]";break;case"FitH":s+=" /FitH "+n.options.top+"]";break;case"FitV":n.options.left=n.options.left||0,s+=" /FitV "+n.options.left+"]";break;default:var I=l(n.options.top);n.options.left=n.options.left||0,n.options.zoom===void 0&&(n.options.zoom=0),s+=" /XYZ "+n.options.left+" "+I+" "+n.options.zoom+"]"}s!=""&&(s+=" >>",this.internal.write(s))}}this.internal.write("]")}}]),t.createAnnotation=function(r){var n=this.internal.getCurrentPageInfo();switch(r.type){case"link":this.link(r.bounds.x,r.bounds.y,r.bounds.w,r.bounds.h,r);break;case"text":case"freetext":n.pageContext.annotations.push(r)}},t.link=function(r,n,a,s,i){var l=this.internal.getCurrentPageInfo(),c=this.internal.getCoordinateString,u=this.internal.getVerticalCoordinateString;l.pageContext.annotations.push({finalBounds:{x:c(r),y:u(n),w:c(r+a),h:u(n+s)},options:i,type:"link"})},t.textWithLink=function(r,n,a,s){var i,l,c=this.getTextWidth(r),u=this.internal.getLineHeight()/this.internal.scaleFactor;if(s.maxWidth!==void 0){l=s.maxWidth;var d=this.splitTextToSize(r,l).length;i=Math.ceil(u*d)}else l=c,i=u;return this.text(r,n,a,s),a+=.2*u,s.align==="center"&&(n-=c/2),s.align==="right"&&(n-=c),this.link(n,a-u,l,i,s),c},t.getTextWidth=function(r){var n=this.internal.getFontSize();return this.getStringUnitWidth(r)*n/this.internal.scaleFactor}}(Or.API),function(t){var e={1569:[65152],1570:[65153,65154],1571:[65155,65156],1572:[65157,65158],1573:[65159,65160],1574:[65161,65162,65163,65164],1575:[65165,65166],1576:[65167,65168,65169,65170],1577:[65171,65172],1578:[65173,65174,65175,65176],1579:[65177,65178,65179,65180],1580:[65181,65182,65183,65184],1581:[65185,65186,65187,65188],1582:[65189,65190,65191,65192],1583:[65193,65194],1584:[65195,65196],1585:[65197,65198],1586:[65199,65200],1587:[65201,65202,65203,65204],1588:[65205,65206,65207,65208],1589:[65209,65210,65211,65212],1590:[65213,65214,65215,65216],1591:[65217,65218,65219,65220],1592:[65221,65222,65223,65224],1593:[65225,65226,65227,65228],1594:[65229,65230,65231,65232],1601:[65233,65234,65235,65236],1602:[65237,65238,65239,65240],1603:[65241,65242,65243,65244],1604:[65245,65246,65247,65248],1605:[65249,65250,65251,65252],1606:[65253,65254,65255,65256],1607:[65257,65258,65259,65260],1608:[65261,65262],1609:[65263,65264,64488,64489],1610:[65265,65266,65267,65268],1649:[64336,64337],1655:[64477],1657:[64358,64359,64360,64361],1658:[64350,64351,64352,64353],1659:[64338,64339,64340,64341],1662:[64342,64343,64344,64345],1663:[64354,64355,64356,64357],1664:[64346,64347,64348,64349],1667:[64374,64375,64376,64377],1668:[64370,64371,64372,64373],1670:[64378,64379,64380,64381],1671:[64382,64383,64384,64385],1672:[64392,64393],1676:[64388,64389],1677:[64386,64387],1678:[64390,64391],1681:[64396,64397],1688:[64394,64395],1700:[64362,64363,64364,64365],1702:[64366,64367,64368,64369],1705:[64398,64399,64400,64401],1709:[64467,64468,64469,64470],1711:[64402,64403,64404,64405],1713:[64410,64411,64412,64413],1715:[64406,64407,64408,64409],1722:[64414,64415],1723:[64416,64417,64418,64419],1726:[64426,64427,64428,64429],1728:[64420,64421],1729:[64422,64423,64424,64425],1733:[64480,64481],1734:[64473,64474],1735:[64471,64472],1736:[64475,64476],1737:[64482,64483],1739:[64478,64479],1740:[64508,64509,64510,64511],1744:[64484,64485,64486,64487],1746:[64430,64431],1747:[64432,64433]},r={65247:{65154:65269,65156:65271,65160:65273,65166:65275},65248:{65154:65270,65156:65272,65160:65274,65166:65276},65165:{65247:{65248:{65258:65010}}},1617:{1612:64606,1613:64607,1614:64608,1615:64609,1616:64610}},n={1612:64606,1613:64607,1614:64608,1615:64609,1616:64610},a=[1570,1571,1573,1575];t.__arabicParser__={};var s=t.__arabicParser__.isInArabicSubstitutionA=function(p){return e[p.charCodeAt(0)]!==void 0},i=t.__arabicParser__.isArabicLetter=function(p){return typeof p=="string"&&/^[\u0600-\u06FF\u0750-\u077F\u08A0-\u08FF\uFB50-\uFDFF\uFE70-\uFEFF]+$/.test(p)},l=t.__arabicParser__.isArabicEndLetter=function(p){return i(p)&&s(p)&&e[p.charCodeAt(0)].length<=2},c=t.__arabicParser__.isArabicAlfLetter=function(p){return i(p)&&a.indexOf(p.charCodeAt(0))>=0};t.__arabicParser__.arabicLetterHasIsolatedForm=function(p){return i(p)&&s(p)&&e[p.charCodeAt(0)].length>=1};var u=t.__arabicParser__.arabicLetterHasFinalForm=function(p){return i(p)&&s(p)&&e[p.charCodeAt(0)].length>=2};t.__arabicParser__.arabicLetterHasInitialForm=function(p){return i(p)&&s(p)&&e[p.charCodeAt(0)].length>=3};var d=t.__arabicParser__.arabicLetterHasMedialForm=function(p){return i(p)&&s(p)&&e[p.charCodeAt(0)].length==4},f=t.__arabicParser__.resolveLigatures=function(p){var g=0,x=r,y="",b=0;for(g=0;g<p.length;g+=1)x[p.charCodeAt(g)]!==void 0?(b++,typeof(x=x[p.charCodeAt(g)])=="number"&&(y+=String.fromCharCode(x),x=r,b=0),g===p.length-1&&(x=r,y+=p.charAt(g-(b-1)),g-=b-1,b=0)):(x=r,y+=p.charAt(g-b),g-=b,b=0);return y};t.__arabicParser__.isArabicDiacritic=function(p){return p!==void 0&&n[p.charCodeAt(0)]!==void 0};var h=t.__arabicParser__.getCorrectForm=function(p,g,x){return i(p)?s(p)===!1?-1:!u(p)||!i(g)&&!i(x)||!i(x)&&l(g)||l(p)&&!i(g)||l(p)&&c(g)||l(p)&&l(g)?0:d(p)&&i(g)&&!l(g)&&i(x)&&u(x)?3:l(p)||!i(x)?1:2:-1},A=function(p){var g=0,x=0,y=0,b="",w="",j="",I=(p=p||"").split("\\s+"),_=[];for(g=0;g<I.length;g+=1){for(_.push(""),x=0;x<I[g].length;x+=1)b=I[g][x],w=I[g][x-1],j=I[g][x+1],i(b)?(y=h(b,w,j),_[g]+=y!==-1?String.fromCharCode(e[b.charCodeAt(0)][y]):b):_[g]+=b;_[g]=f(_[g])}return _.join(" ")},m=t.__arabicParser__.processArabic=t.processArabic=function(){var p,g=typeof arguments[0]=="string"?arguments[0]:arguments[0].text,x=[];if(Array.isArray(g)){var y=0;for(x=[],y=0;y<g.length;y+=1)Array.isArray(g[y])?x.push([A(g[y][0]),g[y][1],g[y][2]]):x.push([A(g[y])]);p=x}else p=A(g);return typeof arguments[0]=="string"?p:(arguments[0].text=p,arguments[0])};t.events.push(["preProcessText",m])}(Or.API),Or.API.autoPrint=function(t){var e;return(t=t||{}).variant=t.variant||"non-conform",t.variant==="javascript"?this.addJS("print({});"):(this.internal.events.subscribe("postPutResources",function(){e=this.internal.newObject(),this.internal.out("<<"),this.internal.out("/S /Named"),this.internal.out("/Type /Action"),this.internal.out("/N /Print"),this.internal.out(">>"),this.internal.out("endobj")}),this.internal.events.subscribe("putCatalog",function(){this.internal.out("/OpenAction "+e+" 0 R")})),this},function(t){var e=function(){var r=void 0;Object.defineProperty(this,"pdf",{get:function(){return r},set:function(l){r=l}});var n=150;Object.defineProperty(this,"width",{get:function(){return n},set:function(l){n=isNaN(l)||Number.isInteger(l)===!1||l<0?150:l,this.getContext("2d").pageWrapXEnabled&&(this.getContext("2d").pageWrapX=n+1)}});var a=300;Object.defineProperty(this,"height",{get:function(){return a},set:function(l){a=isNaN(l)||Number.isInteger(l)===!1||l<0?300:l,this.getContext("2d").pageWrapYEnabled&&(this.getContext("2d").pageWrapY=a+1)}});var s=[];Object.defineProperty(this,"childNodes",{get:function(){return s},set:function(l){s=l}});var i={};Object.defineProperty(this,"style",{get:function(){return i},set:function(l){i=l}}),Object.defineProperty(this,"parentNode",{})};e.prototype.getContext=function(r,n){var a;if((r=r||"2d")!=="2d")return null;for(a in n)this.pdf.context2d.hasOwnProperty(a)&&(this.pdf.context2d[a]=n[a]);return this.pdf.context2d._canvas=this,this.pdf.context2d},e.prototype.toDataURL=function(){throw new Error("toDataURL is not implemented.")},t.events.push(["initialized",function(){this.canvas=new e,this.canvas.pdf=this}])}(Or.API),function(t){var e={left:0,top:0,bottom:0,right:0},r=!1,n=function(){this.internal.__cell__===void 0&&(this.internal.__cell__={},this.internal.__cell__.padding=3,this.internal.__cell__.headerFunction=void 0,this.internal.__cell__.margins=Object.assign({},e),this.internal.__cell__.margins.width=this.getPageWidth(),a.call(this))},a=function(){this.internal.__cell__.lastCell=new s,this.internal.__cell__.pages=1},s=function(){var c=arguments[0];Object.defineProperty(this,"x",{enumerable:!0,get:function(){return c},set:function(p){c=p}});var u=arguments[1];Object.defineProperty(this,"y",{enumerable:!0,get:function(){return u},set:function(p){u=p}});var d=arguments[2];Object.defineProperty(this,"width",{enumerable:!0,get:function(){return d},set:function(p){d=p}});var f=arguments[3];Object.defineProperty(this,"height",{enumerable:!0,get:function(){return f},set:function(p){f=p}});var h=arguments[4];Object.defineProperty(this,"text",{enumerable:!0,get:function(){return h},set:function(p){h=p}});var A=arguments[5];Object.defineProperty(this,"lineNumber",{enumerable:!0,get:function(){return A},set:function(p){A=p}});var m=arguments[6];return Object.defineProperty(this,"align",{enumerable:!0,get:function(){return m},set:function(p){m=p}}),this};s.prototype.clone=function(){return new s(this.x,this.y,this.width,this.height,this.text,this.lineNumber,this.align)},s.prototype.toArray=function(){return[this.x,this.y,this.width,this.height,this.text,this.lineNumber,this.align]},t.setHeaderFunction=function(c){return n.call(this),this.internal.__cell__.headerFunction=typeof c=="function"?c:void 0,this},t.getTextDimensions=function(c,u){n.call(this);var d=(u=u||{}).fontSize||this.getFontSize(),f=u.font||this.getFont(),h=u.scaleFactor||this.internal.scaleFactor,A=0,m=0,p=0,g=this;if(!Array.isArray(c)&&typeof c!="string"){if(typeof c!="number")throw new Error("getTextDimensions expects text-parameter to be of type String or type Number or an Array of Strings.");c=String(c)}var x=u.maxWidth;x>0?typeof c=="string"?c=this.splitTextToSize(c,x):Object.prototype.toString.call(c)==="[object Array]"&&(c=c.reduce(function(b,w){return b.concat(g.splitTextToSize(w,x))},[])):c=Array.isArray(c)?c:[c];for(var y=0;y<c.length;y++)A<(p=this.getStringUnitWidth(c[y],{font:f})*d)&&(A=p);return A!==0&&(m=c.length),{w:A/=h,h:Math.max((m*d*this.getLineHeightFactor()-d*(this.getLineHeightFactor()-1))/h,0)}},t.cellAddPage=function(){n.call(this),this.addPage();var c=this.internal.__cell__.margins||e;return this.internal.__cell__.lastCell=new s(c.left,c.top,void 0,void 0),this.internal.__cell__.pages+=1,this};var i=t.cell=function(){var c;c=arguments[0]instanceof s?arguments[0]:new s(arguments[0],arguments[1],arguments[2],arguments[3],arguments[4],arguments[5],arguments[6]),n.call(this);var u=this.internal.__cell__.lastCell,d=this.internal.__cell__.padding,f=this.internal.__cell__.margins||e,h=this.internal.__cell__.tableHeaderRow,A=this.internal.__cell__.printHeaders;return u.lineNumber!==void 0&&(u.lineNumber===c.lineNumber?(c.x=(u.x||0)+(u.width||0),c.y=u.y||0):u.y+u.height+c.height+f.bottom>this.getPageHeight()?(this.cellAddPage(),c.y=f.top,A&&h&&(this.printHeaderRow(c.lineNumber,!0),c.y+=h[0].height)):c.y=u.y+u.height||c.y),c.text[0]!==void 0&&(this.rect(c.x,c.y,c.width,c.height,r===!0?"FD":void 0),c.align==="right"?this.text(c.text,c.x+c.width-d,c.y+d,{align:"right",baseline:"top"}):c.align==="center"?this.text(c.text,c.x+c.width/2,c.y+d,{align:"center",baseline:"top",maxWidth:c.width-d-d}):this.text(c.text,c.x+d,c.y+d,{align:"left",baseline:"top",maxWidth:c.width-d-d})),this.internal.__cell__.lastCell=c,this};t.table=function(c,u,d,f,h){if(n.call(this),!d)throw new Error("No data for PDF table.");var A,m,p,g,x=[],y=[],b=[],w={},j={},I=[],_=[],E=(h=h||{}).autoSize||!1,S=h.printHeaders!==!1,k=h.css&&h.css["font-size"]!==void 0?16*h.css["font-size"]:h.fontSize||12,P=h.margins||Object.assign({width:this.getPageWidth()},e),T=typeof h.padding=="number"?h.padding:3,F=h.headerBackgroundColor||"#c8c8c8",Y=h.headerTextColor||"#000";if(a.call(this),this.internal.__cell__.printHeaders=S,this.internal.__cell__.margins=P,this.internal.__cell__.table_font_size=k,this.internal.__cell__.padding=T,this.internal.__cell__.headerBackgroundColor=F,this.internal.__cell__.headerTextColor=Y,this.setFontSize(k),f==null)y=x=Object.keys(d[0]),b=x.map(function(){return"left"});else if(Array.isArray(f)&&wa(f[0])==="object")for(x=f.map(function(Pe){return Pe.name}),y=f.map(function(Pe){return Pe.prompt||Pe.name||""}),b=f.map(function(Pe){return Pe.align||"left"}),A=0;A<f.length;A+=1)j[f[A].name]=.7499990551181103*f[A].width;else Array.isArray(f)&&typeof f[0]=="string"&&(y=x=f,b=x.map(function(){return"left"}));if(E||Array.isArray(f)&&typeof f[0]=="string")for(A=0;A<x.length;A+=1){for(w[g=x[A]]=d.map(function(Pe){return Pe[g]}),this.setFont(void 0,"bold"),I.push(this.getTextDimensions(y[A],{fontSize:this.internal.__cell__.table_font_size,scaleFactor:this.internal.scaleFactor}).w),m=w[g],this.setFont(void 0,"normal"),p=0;p<m.length;p+=1)I.push(this.getTextDimensions(m[p],{fontSize:this.internal.__cell__.table_font_size,scaleFactor:this.internal.scaleFactor}).w);j[g]=Math.max.apply(null,I)+T+T,I=[]}if(S){var he={};for(A=0;A<x.length;A+=1)he[x[A]]={},he[x[A]].text=y[A],he[x[A]].align=b[A];var ue=l.call(this,he,j);_=x.map(function(Pe){return new s(c,u,j[Pe],ue,he[Pe].text,void 0,he[Pe].align)}),this.setTableHeaderRow(_),this.printHeaderRow(1,!1)}var fe=f.reduce(function(Pe,Ie){return Pe[Ie.name]=Ie.align,Pe},{});for(A=0;A<d.length;A+=1){"rowStart"in h&&h.rowStart instanceof Function&&h.rowStart({row:A,data:d[A]},this);var me=l.call(this,d[A],j);for(p=0;p<x.length;p+=1){var ne=d[A][x[p]];"cellStart"in h&&h.cellStart instanceof Function&&h.cellStart({row:A,col:p,data:ne},this),i.call(this,new s(c,u,j[x[p]],me,ne,A+2,fe[x[p]]))}}return this.internal.__cell__.table_x=c,this.internal.__cell__.table_y=u,this};var l=function(c,u){var d=this.internal.__cell__.padding,f=this.internal.__cell__.table_font_size,h=this.internal.scaleFactor;return Object.keys(c).map(function(A){var m=c[A];return this.splitTextToSize(m.hasOwnProperty("text")?m.text:m,u[A]-d-d)},this).map(function(A){return this.getLineHeightFactor()*A.length*f/h+d+d},this).reduce(function(A,m){return Math.max(A,m)},0)};t.setTableHeaderRow=function(c){n.call(this),this.internal.__cell__.tableHeaderRow=c},t.printHeaderRow=function(c,u){if(n.call(this),!this.internal.__cell__.tableHeaderRow)throw new Error("Property tableHeaderRow does not exist.");var d;if(r=!0,typeof this.internal.__cell__.headerFunction=="function"){var f=this.internal.__cell__.headerFunction(this,this.internal.__cell__.pages);this.internal.__cell__.lastCell=new s(f[0],f[1],f[2],f[3],void 0,-1)}this.setFont(void 0,"bold");for(var h=[],A=0;A<this.internal.__cell__.tableHeaderRow.length;A+=1){d=this.internal.__cell__.tableHeaderRow[A].clone(),u&&(d.y=this.internal.__cell__.margins.top||0,h.push(d)),d.lineNumber=c;var m=this.getTextColor();this.setTextColor(this.internal.__cell__.headerTextColor),this.setFillColor(this.internal.__cell__.headerBackgroundColor),i.call(this,d),this.setTextColor(m)}h.length>0&&this.setTableHeaderRow(h),this.setFont(void 0,"normal"),r=!1}}(Or.API);var ete={italic:["italic","oblique","normal"],oblique:["oblique","italic","normal"],normal:["normal","oblique","italic"]},tte=["ultra-condensed","extra-condensed","condensed","semi-condensed","normal","semi-expanded","expanded","extra-expanded","ultra-expanded"],GT=Zee(tte),rte=[100,200,300,400,500,600,700,800,900],aSe=Zee(rte);function j5(t){var e=t.family.replace(/"|'/g,"").toLowerCase(),r=function(s){return ete[s=s||"normal"]?s:"normal"}(t.style),n=function(s){return s?typeof s=="number"?s>=100&&s<=900&&s%100==0?s:400:/^\d00$/.test(s)?parseInt(s):s==="bold"?700:400:400}(t.weight),a=function(s){return typeof GT[s=s||"normal"]=="number"?s:"normal"}(t.stretch);return{family:e,style:r,weight:n,stretch:a,src:t.src||[],ref:t.ref||{name:e,style:[a,r,n].join(" ")}}}function yQ(t,e,r,n){var a;for(a=r;a>=0&&a<e.length;a+=n)if(t[e[a]])return t[e[a]];for(a=r;a>=0&&a<e.length;a-=n)if(t[e[a]])return t[e[a]]}var sSe={"sans-serif":"helvetica",fixed:"courier",monospace:"courier",terminal:"courier",cursive:"times",fantasy:"times",serif:"times"},bQ={caption:"times",icon:"times",menu:"times","message-box":"times","small-caption":"times","status-bar":"times"};function wQ(t){return[t.stretch,t.style,t.weight,t.family].join(" ")}function NQ(t){return t.trimLeft()}function iSe(t,e){for(var r=0;r<t.length;){if(t.charAt(r)===e)return[t.substring(0,r),t.substring(r+1)];r+=1}return null}function oSe(t){var e=t.match(/^(-[a-z_]|[a-z_])[a-z0-9_-]*/i);return e===null?null:[e[0],t.substring(e[0].length)]}var aC,CQ,_Q,Dg,sC,EQ,SQ,IQ,B5=["times"];function jQ(t,e,r,n,a){var s=4,i=PQ;switch(a){case Or.API.image_compression.FAST:s=1,i=BQ;break;case Or.API.image_compression.MEDIUM:s=6,i=TQ;break;case Or.API.image_compression.SLOW:s=9,i=kQ}t=function(c,u,d,f){for(var h,A=c.length/u,m=new Uint8Array(c.length+A),p=[lSe,BQ,PQ,TQ,kQ],g=0;g<A;g+=1){var x=g*u,y=c.subarray(x,x+u);if(f)m.set(f(y,d,h),x+g);else{for(var b=p.length,w=[],j=0;j<b;j+=1)w[j]=p[j](y,d,h);var I=uSe(w.concat());m.set(w[I],x+g)}h=y}return m}(t,e,Math.ceil(r*n/8),i);var l=LT(t,{level:s});return Or.API.__addimage__.arrayBufferToBinaryString(l)}function lSe(t){var e=Array.apply([],t);return e.unshift(0),e}function BQ(t,e){var r=t.length,n=[];n[0]=1;for(var a=0;a<r;a+=1){var s=t[a-e]||0;n[a+1]=t[a]-s+256&255}return n}function PQ(t,e,r){var n=t.length,a=[];a[0]=2;for(var s=0;s<n;s+=1){var i=r&&r[s]||0;a[s+1]=t[s]-i+256&255}return a}function TQ(t,e,r){var n=t.length,a=[];a[0]=3;for(var s=0;s<n;s+=1){var i=t[s-e]||0,l=r&&r[s]||0;a[s+1]=t[s]+256-(i+l>>>1)&255}return a}function kQ(t,e,r){var n=t.length,a=[];a[0]=4;for(var s=0;s<n;s+=1){var i=cSe(t[s-e]||0,r&&r[s]||0,r&&r[s-e]||0);a[s+1]=t[s]-i+256&255}return a}function cSe(t,e,r){if(t===e&&e===r)return t;var n=Math.abs(e-r),a=Math.abs(t-r),s=Math.abs(t+e-r-r);return n<=a&&n<=s?t:a<=s?e:r}function uSe(t){var e=t.map(function(r){return r.reduce(function(n,a){return n+Math.abs(a)},0)});return e.indexOf(Math.min.apply(null,e))}function P5(t,e,r){var n=e*r,a=Math.floor(n/8),s=16-(n-8*a+r),i=(1<<r)-1;return nte(t,a)>>s&i}function FQ(t,e,r,n){var a=r*n,s=Math.floor(a/8),i=16-(a-8*s+n),l=(1<<n)-1,c=(e&l)<<i;(function(u,d,f){if(d+1<u.byteLength)u.setUint16(d,f,!1);else{var h=f>>8&255;u.setUint8(d,h)}})(t,s,nte(t,s)&~(l<<i)&65535|c)}function nte(t,e){return e+1<t.byteLength?t.getUint16(e,!1):t.getUint8(e)<<8}function dSe(t){var e=0;if(t[e++]!==71||t[e++]!==73||t[e++]!==70||t[e++]!==56||(t[e++]+1&253)!=56||t[e++]!==97)throw new Error("Invalid GIF 87a/89a header.");var r=t[e++]|t[e++]<<8,n=t[e++]|t[e++]<<8,a=t[e++],s=a>>7,i=1<<1+(7&a);t[e++],t[e++];var l=null,c=null;s&&(l=e,c=i,e+=3*i);var u=!0,d=[],f=0,h=null,A=0,m=null;for(this.width=r,this.height=n;u&&e<t.length;)switch(t[e++]){case 33:switch(t[e++]){case 255:if(t[e]!==11||t[e+1]==78&&t[e+2]==69&&t[e+3]==84&&t[e+4]==83&&t[e+5]==67&&t[e+6]==65&&t[e+7]==80&&t[e+8]==69&&t[e+9]==50&&t[e+10]==46&&t[e+11]==48&&t[e+12]==3&&t[e+13]==1&&t[e+16]==0)e+=14,m=t[e++]|t[e++]<<8,e++;else for(e+=12;;){if(!((P=t[e++])>=0))throw Error("Invalid block size");if(P===0)break;e+=P}break;case 249:if(t[e++]!==4||t[e+4]!==0)throw new Error("Invalid graphics extension block.");var p=t[e++];f=t[e++]|t[e++]<<8,h=t[e++],1&p||(h=null),A=p>>2&7,e++;break;case 254:for(;;){if(!((P=t[e++])>=0))throw Error("Invalid block size");if(P===0)break;e+=P}break;default:throw new Error("Unknown graphic control label: 0x"+t[e-1].toString(16))}break;case 44:var g=t[e++]|t[e++]<<8,x=t[e++]|t[e++]<<8,y=t[e++]|t[e++]<<8,b=t[e++]|t[e++]<<8,w=t[e++],j=w>>6&1,I=1<<1+(7&w),_=l,E=c,S=!1;w>>7&&(S=!0,_=e,E=I,e+=3*I);var k=e;for(e++;;){var P;if(!((P=t[e++])>=0))throw Error("Invalid block size");if(P===0)break;e+=P}d.push({x:g,y:x,width:y,height:b,has_local_palette:S,palette_offset:_,palette_size:E,data_offset:k,data_length:e-k,transparent_index:h,interlaced:!!j,delay:f,disposal:A});break;case 59:u=!1;break;default:throw new Error("Unknown gif block: 0x"+t[e-1].toString(16))}this.numFrames=function(){return d.length},this.loopCount=function(){return m},this.frameInfo=function(T){if(T<0||T>=d.length)throw new Error("Frame index out of range.");return d[T]},this.decodeAndBlitFrameBGRA=function(T,F){var Y=this.frameInfo(T),he=Y.width*Y.height,ue=new Uint8Array(he);OQ(t,Y.data_offset,ue,he);var fe=Y.palette_offset,me=Y.transparent_index;me===null&&(me=256);var ne=Y.width,Pe=r-ne,Ie=ne,O=4*(Y.y*r+Y.x),H=4*((Y.y+Y.height)*r+Y.x),R=O,M=4*Pe;Y.interlaced===!0&&(M+=4*r*7);for(var K=8,W=0,D=ue.length;W<D;++W){var L=ue[W];if(Ie===0&&(Ie=ne,(R+=M)>=H&&(M=4*Pe+4*r*(K-1),R=O+(ne+Pe)*(K<<1),K>>=1)),L===me)R+=4;else{var Z=t[fe+3*L],ge=t[fe+3*L+1],U=t[fe+3*L+2];F[R++]=U,F[R++]=ge,F[R++]=Z,F[R++]=255}--Ie}},this.decodeAndBlitFrameRGBA=function(T,F){var Y=this.frameInfo(T),he=Y.width*Y.height,ue=new Uint8Array(he);OQ(t,Y.data_offset,ue,he);var fe=Y.palette_offset,me=Y.transparent_index;me===null&&(me=256);var ne=Y.width,Pe=r-ne,Ie=ne,O=4*(Y.y*r+Y.x),H=4*((Y.y+Y.height)*r+Y.x),R=O,M=4*Pe;Y.interlaced===!0&&(M+=4*r*7);for(var K=8,W=0,D=ue.length;W<D;++W){var L=ue[W];if(Ie===0&&(Ie=ne,(R+=M)>=H&&(M=4*Pe+4*r*(K-1),R=O+(ne+Pe)*(K<<1),K>>=1)),L===me)R+=4;else{var Z=t[fe+3*L],ge=t[fe+3*L+1],U=t[fe+3*L+2];F[R++]=Z,F[R++]=ge,F[R++]=U,F[R++]=255}--Ie}}}function OQ(t,e,r,n){for(var a=t[e++],s=1<<a,i=s+1,l=i+1,c=a+1,u=(1<<c)-1,d=0,f=0,h=0,A=t[e++],m=new Int32Array(4096),p=null;;){for(;d<16&&A!==0;)f|=t[e++]<<d,d+=8,A===1?A=t[e++]:--A;if(d<c)break;var g=f&u;if(f>>=c,d-=c,g!==s){if(g===i)break;for(var x=g<l?g:p,y=0,b=x;b>s;)b=m[b]>>8,++y;var w=b;if(h+y+(x!==g?1:0)>n)return void Da.log("Warning, gif stream longer than expected.");r[h++]=w;var j=h+=y;for(x!==g&&(r[h++]=w),b=x;y--;)b=m[b],r[--j]=255&b,b>>=8;p!==null&&l<4096&&(m[l++]=p<<8|w,l>=u+1&&c<12&&(++c,u=u<<1|1)),p=g}else l=i+1,u=(1<<(c=a+1))-1,p=null}return h!==n&&Da.log("Warning, gif stream shorter than expected."),r}/**
 * @license
  Copyright (c) 2008, Adobe Systems Incorporated
  All rights reserved.

  Redistribution and use in source and binary forms, with or without 
  modification, are permitted provided that the following conditions are
  met:

  * Redistributions of source code must retain the above copyright notice, 
    this list of conditions and the following disclaimer.
  
  * Redistributions in binary form must reproduce the above copyright
    notice, this list of conditions and the following disclaimer in the 
    documentation and/or other materials provided with the distribution.
  
  * Neither the name of Adobe Systems Incorporated nor the names of its 
    contributors may be used to endorse or promote products derived from 
    this software without specific prior written permission.

  THIS SOFTWARE IS PROVIDED BY THE COPYRIGHT HOLDERS AND CONTRIBUTORS "AS
  IS" AND ANY EXPRESS OR IMPLIED WARRANTIES, INCLUDING, BUT NOT LIMITED TO,
  THE IMPLIED WARRANTIES OF MERCHANTABILITY AND FITNESS FOR A PARTICULAR
  PURPOSE ARE DISCLAIMED. IN NO EVENT SHALL THE COPYRIGHT OWNER OR 
  CONTRIBUTORS BE LIABLE FOR ANY DIRECT, INDIRECT, INCIDENTAL, SPECIAL,
  EXEMPLARY, OR CONSEQUENTIAL DAMAGES (INCLUDING, BUT NOT LIMITED TO,
  PROCUREMENT OF SUBSTITUTE GOODS OR SERVICES; LOSS OF USE, DATA, OR
  PROFITS; OR BUSINESS INTERRUPTION) HOWEVER CAUSED AND ON ANY THEORY OF
  LIABILITY, WHETHER IN CONTRACT, STRICT LIABILITY, OR TORT (INCLUDING
  NEGLIGENCE OR OTHERWISE) ARISING IN ANY WAY OUT OF THE USE OF THIS
  SOFTWARE, EVEN IF ADVISED OF THE POSSIBILITY OF SUCH DAMAGE.
*/function T5(t){var e,r,n,a,s,i=Math.floor,l=new Array(64),c=new Array(64),u=new Array(64),d=new Array(64),f=new Array(65535),h=new Array(65535),A=new Array(64),m=new Array(64),p=[],g=0,x=7,y=new Array(64),b=new Array(64),w=new Array(64),j=new Array(256),I=new Array(2048),_=[0,1,5,6,14,15,27,28,2,4,7,13,16,26,29,42,3,8,12,17,25,30,41,43,9,11,18,24,31,40,44,53,10,19,23,32,39,45,52,54,20,22,33,38,46,51,55,60,21,34,37,47,50,56,59,61,35,36,48,49,57,58,62,63],E=[0,0,1,5,1,1,1,1,1,1,0,0,0,0,0,0,0],S=[0,1,2,3,4,5,6,7,8,9,10,11],k=[0,0,2,1,3,3,2,4,3,5,5,4,4,0,0,1,125],P=[1,2,3,0,4,17,5,18,33,49,65,6,19,81,97,7,34,113,20,50,129,145,161,8,35,66,177,193,21,82,209,240,36,51,98,114,130,9,10,22,23,24,25,26,37,38,39,40,41,42,52,53,54,55,56,57,58,67,68,69,70,71,72,73,74,83,84,85,86,87,88,89,90,99,100,101,102,103,104,105,106,115,116,117,118,119,120,121,122,131,132,133,134,135,136,137,138,146,147,148,149,150,151,152,153,154,162,163,164,165,166,167,168,169,170,178,179,180,181,182,183,184,185,186,194,195,196,197,198,199,200,201,202,210,211,212,213,214,215,216,217,218,225,226,227,228,229,230,231,232,233,234,241,242,243,244,245,246,247,248,249,250],T=[0,0,3,1,1,1,1,1,1,1,1,1,0,0,0,0,0],F=[0,1,2,3,4,5,6,7,8,9,10,11],Y=[0,0,2,1,2,4,4,3,4,7,5,4,4,0,1,2,119],he=[0,1,2,3,17,4,5,33,49,6,18,65,81,7,97,113,19,34,50,129,8,20,66,145,161,177,193,9,35,51,82,240,21,98,114,209,10,22,36,52,225,37,241,23,24,25,26,38,39,40,41,42,53,54,55,56,57,58,67,68,69,70,71,72,73,74,83,84,85,86,87,88,89,90,99,100,101,102,103,104,105,106,115,116,117,118,119,120,121,122,130,131,132,133,134,135,136,137,138,146,147,148,149,150,151,152,153,154,162,163,164,165,166,167,168,169,170,178,179,180,181,182,183,184,185,186,194,195,196,197,198,199,200,201,202,210,211,212,213,214,215,216,217,218,226,227,228,229,230,231,232,233,234,242,243,244,245,246,247,248,249,250];function ue(O,H){for(var R=0,M=0,K=new Array,W=1;W<=16;W++){for(var D=1;D<=O[W];D++)K[H[M]]=[],K[H[M]][0]=R,K[H[M]][1]=W,M++,R++;R*=2}return K}function fe(O){for(var H=O[0],R=O[1]-1;R>=0;)H&1<<R&&(g|=1<<x),R--,--x<0&&(g==255?(me(255),me(0)):me(g),x=7,g=0)}function me(O){p.push(O)}function ne(O){me(O>>8&255),me(255&O)}function Pe(O,H,R,M,K){for(var W,D=K[0],L=K[240],Z=function(ye,Qe){var st,ut,De,it,dt,ce,oe,Me,Le,ve,le=0;for(Le=0;Le<8;++Le){st=ye[le],ut=ye[le+1],De=ye[le+2],it=ye[le+3],dt=ye[le+4],ce=ye[le+5],oe=ye[le+6];var Ue=st+(Me=ye[le+7]),rt=st-Me,mt=ut+oe,gt=ut-oe,Ct=De+ce,jt=De-ce,xe=it+dt,He=it-dt,Ce=Ue+xe,lt=Ue-xe,nt=mt+Ct,Xe=mt-Ct;ye[le]=Ce+nt,ye[le+4]=Ce-nt;var It=.707106781*(Xe+lt);ye[le+2]=lt+It,ye[le+6]=lt-It;var $t=.382683433*((Ce=He+jt)-(Xe=gt+rt)),Ke=.5411961*Ce+$t,wt=1.306562965*Xe+$t,q=.707106781*(nt=jt+gt),ae=rt+q,ee=rt-q;ye[le+5]=ee+Ke,ye[le+3]=ee-Ke,ye[le+1]=ae+wt,ye[le+7]=ae-wt,le+=8}for(le=0,Le=0;Le<8;++Le){st=ye[le],ut=ye[le+8],De=ye[le+16],it=ye[le+24],dt=ye[le+32],ce=ye[le+40],oe=ye[le+48];var be=st+(Me=ye[le+56]),_e=st-Me,Be=ut+oe,tt=ut-oe,ot=De+ce,te=De-ce,V=it+dt,re=it-dt,pe=be+V,Ee=be-V,Se=Be+ot,Re=Be-ot;ye[le]=pe+Se,ye[le+32]=pe-Se;var et=.707106781*(Re+Ee);ye[le+16]=Ee+et,ye[le+48]=Ee-et;var We=.382683433*((pe=re+te)-(Re=tt+_e)),At=.5411961*pe+We,vt=1.306562965*Re+We,Vt=.707106781*(Se=te+tt),or=_e+Vt,Oe=_e-Vt;ye[le+40]=Oe+At,ye[le+24]=Oe-At,ye[le+8]=or+vt,ye[le+56]=or-vt,le++}for(Le=0;Le<64;++Le)ve=ye[Le]*Qe[Le],A[Le]=ve>0?ve+.5|0:ve-.5|0;return A}(O,H),ge=0;ge<64;++ge)m[_[ge]]=Z[ge];var U=m[0]-R;R=m[0],U==0?fe(M[0]):(fe(M[h[W=32767+U]]),fe(f[W]));for(var Ge=63;Ge>0&&m[Ge]==0;)Ge--;if(Ge==0)return fe(D),R;for(var ie,J=1;J<=Ge;){for(var je=J;m[J]==0&&J<=Ge;)++J;var z=J-je;if(z>=16){ie=z>>4;for(var Ae=1;Ae<=ie;++Ae)fe(L);z&=15}W=32767+m[J],fe(K[(z<<4)+h[W]]),fe(f[W]),J++}return Ge!=63&&fe(D),R}function Ie(O){O=Math.min(Math.max(O,1),100),s!=O&&(function(H){for(var R=[16,11,10,16,24,40,51,61,12,12,14,19,26,58,60,55,14,13,16,24,40,57,69,56,14,17,22,29,51,87,80,62,18,22,37,56,68,109,103,77,24,35,55,64,81,104,113,92,49,64,78,87,103,121,120,101,72,92,95,98,112,100,103,99],M=0;M<64;M++){var K=i((R[M]*H+50)/100);K=Math.min(Math.max(K,1),255),l[_[M]]=K}for(var W=[17,18,24,47,99,99,99,99,18,21,26,66,99,99,99,99,24,26,56,99,99,99,99,99,47,66,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99],D=0;D<64;D++){var L=i((W[D]*H+50)/100);L=Math.min(Math.max(L,1),255),c[_[D]]=L}for(var Z=[1,1.387039845,1.306562965,1.175875602,1,.785694958,.5411961,.275899379],ge=0,U=0;U<8;U++)for(var Ge=0;Ge<8;Ge++)u[ge]=1/(l[_[ge]]*Z[U]*Z[Ge]*8),d[ge]=1/(c[_[ge]]*Z[U]*Z[Ge]*8),ge++}(O<50?Math.floor(5e3/O):Math.floor(200-2*O)),s=O)}this.encode=function(O,H){H&&Ie(H),p=new Array,g=0,x=7,ne(65496),ne(65504),ne(16),me(74),me(70),me(73),me(70),me(0),me(1),me(1),me(0),ne(1),ne(1),me(0),me(0),function(){ne(65499),ne(132),me(0);for(var ut=0;ut<64;ut++)me(l[ut]);me(1);for(var De=0;De<64;De++)me(c[De])}(),function(ut,De){ne(65472),ne(17),me(8),ne(De),ne(ut),me(3),me(1),me(17),me(0),me(2),me(17),me(1),me(3),me(17),me(1)}(O.width,O.height),function(){ne(65476),ne(418),me(0);for(var ut=0;ut<16;ut++)me(E[ut+1]);for(var De=0;De<=11;De++)me(S[De]);me(16);for(var it=0;it<16;it++)me(k[it+1]);for(var dt=0;dt<=161;dt++)me(P[dt]);me(1);for(var ce=0;ce<16;ce++)me(T[ce+1]);for(var oe=0;oe<=11;oe++)me(F[oe]);me(17);for(var Me=0;Me<16;Me++)me(Y[Me+1]);for(var Le=0;Le<=161;Le++)me(he[Le])}(),ne(65498),ne(12),me(3),me(1),me(0),me(2),me(17),me(3),me(17),me(0),me(63),me(0);var R=0,M=0,K=0;g=0,x=7,this.encode.displayName="_encode_";for(var W,D,L,Z,ge,U,Ge,ie,J,je=O.data,z=O.width,Ae=O.height,ye=4*z,Qe=0;Qe<Ae;){for(W=0;W<ye;){for(ge=ye*Qe+W,Ge=-1,ie=0,J=0;J<64;J++)U=ge+(ie=J>>3)*ye+(Ge=4*(7&J)),Qe+ie>=Ae&&(U-=ye*(Qe+1+ie-Ae)),W+Ge>=ye&&(U-=W+Ge-ye+4),D=je[U++],L=je[U++],Z=je[U++],y[J]=(I[D]+I[L+256|0]+I[Z+512|0]>>16)-128,b[J]=(I[D+768|0]+I[L+1024|0]+I[Z+1280|0]>>16)-128,w[J]=(I[D+1280|0]+I[L+1536|0]+I[Z+1792|0]>>16)-128;R=Pe(y,u,R,e,n),M=Pe(b,d,M,r,a),K=Pe(w,d,K,r,a),W+=32}Qe+=8}if(x>=0){var st=[];st[1]=x+1,st[0]=(1<<x+1)-1,fe(st)}return ne(65497),new Uint8Array(p)},t=t||50,function(){for(var O=String.fromCharCode,H=0;H<256;H++)j[H]=O(H)}(),e=ue(E,S),r=ue(T,F),n=ue(k,P),a=ue(Y,he),function(){for(var O=1,H=2,R=1;R<=15;R++){for(var M=O;M<H;M++)h[32767+M]=R,f[32767+M]=[],f[32767+M][1]=R,f[32767+M][0]=M;for(var K=-(H-1);K<=-O;K++)h[32767+K]=R,f[32767+K]=[],f[32767+K][1]=R,f[32767+K][0]=H-1+K;O<<=1,H<<=1}}(),function(){for(var O=0;O<256;O++)I[O]=19595*O,I[O+256|0]=38470*O,I[O+512|0]=7471*O+32768,I[O+768|0]=-11059*O,I[O+1024|0]=-21709*O,I[O+1280|0]=32768*O+8421375,I[O+1536|0]=-27439*O,I[O+1792|0]=-5329*O}(),Ie(t)}/**
 * @license
 * Copyright (c) 2017 Aras Abbasi
 *
 * Licensed under the MIT License.
 * http://opensource.org/licenses/mit-license
 */function ld(t,e){if(this.pos=0,this.buffer=t,this.datav=new DataView(t.buffer),this.is_with_alpha=!!e,this.bottom_up=!0,this.flag=String.fromCharCode(this.buffer[0])+String.fromCharCode(this.buffer[1]),this.pos+=2,["BM","BA","CI","CP","IC","PT"].indexOf(this.flag)===-1)throw new Error("Invalid BMP File");this.parseHeader(),this.parseBGR()}function DQ(t){function e(S){if(!S)throw Error("assert :P")}function r(S,k,P){for(var T=0;4>T;T++)if(S[k+T]!=P.charCodeAt(T))return!0;return!1}function n(S,k,P,T,F){for(var Y=0;Y<F;Y++)S[k+Y]=P[T+Y]}function a(S,k,P,T){for(var F=0;F<T;F++)S[k+F]=P}function s(S){return new Int32Array(S)}function i(S,k){for(var P=[],T=0;T<S;T++)P.push(new k);return P}function l(S,k){var P=[];return function T(F,Y,he){for(var ue=he[Y],fe=0;fe<ue&&(F.push(he.length>Y+1?[]:new k),!(he.length<Y+1));fe++)T(F[fe],Y+1,he)}(P,0,S),P}var c=function(){var S=this;function k(N,B){for(var G=1<<B-1>>>0;N&G;)G>>>=1;return G?(N&G-1)+G:N}function P(N,B,G,se,Ne){e(!(se%G));do N[B+(se-=G)]=Ne;while(0<se)}function T(N,B,G,se,Ne){if(e(2328>=Ne),512>=Ne)var Te=s(512);else if((Te=s(Ne))==null)return 0;return function(Fe,Ve,qe,Je,pt,kt){var Ze,yt,Et=Ve,Jt=1<<qe,Tt=s(16),rr=s(16);for(e(pt!=0),e(Je!=null),e(Fe!=null),e(0<qe),yt=0;yt<pt;++yt){if(15<Je[yt])return 0;++Tt[Je[yt]]}if(Tt[0]==pt)return 0;for(rr[1]=0,Ze=1;15>Ze;++Ze){if(Tt[Ze]>1<<Ze)return 0;rr[Ze+1]=rr[Ze]+Tt[Ze]}for(yt=0;yt<pt;++yt)Ze=Je[yt],0<Je[yt]&&(kt[rr[Ze]++]=yt);if(rr[15]==1)return(Je=new F).g=0,Je.value=kt[0],P(Fe,Et,1,Jt,Je),Jt;var ir,hr=-1,dr=Jt-1,qr=0,Mr=1,yn=1,Hr=1<<qe;for(yt=0,Ze=1,pt=2;Ze<=qe;++Ze,pt<<=1){if(Mr+=yn<<=1,0>(yn-=Tt[Ze]))return 0;for(;0<Tt[Ze];--Tt[Ze])(Je=new F).g=Ze,Je.value=kt[yt++],P(Fe,Et+qr,pt,Hr,Je),qr=k(qr,Ze)}for(Ze=qe+1,pt=2;15>=Ze;++Ze,pt<<=1){if(Mr+=yn<<=1,0>(yn-=Tt[Ze]))return 0;for(;0<Tt[Ze];--Tt[Ze]){if(Je=new F,(qr&dr)!=hr){for(Et+=Hr,ir=1<<(hr=Ze)-qe;15>hr&&!(0>=(ir-=Tt[hr]));)++hr,ir<<=1;Jt+=Hr=1<<(ir=hr-qe),Fe[Ve+(hr=qr&dr)].g=ir+qe,Fe[Ve+hr].value=Et-Ve-hr}Je.g=Ze-qe,Je.value=kt[yt++],P(Fe,Et+(qr>>qe),pt,Hr,Je),qr=k(qr,Ze)}}return Mr!=2*rr[15]-1?0:Jt}(N,B,G,se,Ne,Te)}function F(){this.value=this.g=0}function Y(){this.value=this.g=0}function he(){this.G=i(5,F),this.H=s(5),this.jc=this.Qb=this.qb=this.nd=0,this.pd=i(Am,Y)}function ue(N,B,G,se){e(N!=null),e(B!=null),e(2147483648>se),N.Ca=254,N.I=0,N.b=-8,N.Ka=0,N.oa=B,N.pa=G,N.Jd=B,N.Yc=G+se,N.Zc=4<=se?G+se-4+1:G,D(N)}function fe(N,B){for(var G=0;0<B--;)G|=Z(N,128)<<B;return G}function me(N,B){var G=fe(N,B);return L(N)?-G:G}function ne(N,B,G,se){var Ne,Te=0;for(e(N!=null),e(B!=null),e(4294967288>se),N.Sb=se,N.Ra=0,N.u=0,N.h=0,4<se&&(se=4),Ne=0;Ne<se;++Ne)Te+=B[G+Ne]<<8*Ne;N.Ra=Te,N.bb=se,N.oa=B,N.pa=G}function Pe(N){for(;8<=N.u&&N.bb<N.Sb;)N.Ra>>>=8,N.Ra+=N.oa[N.pa+N.bb]<<gh-8>>>0,++N.bb,N.u-=8;M(N)&&(N.h=1,N.u=0)}function Ie(N,B){if(e(0<=B),!N.h&&B<=Cc){var G=R(N)&Nc[B];return N.u+=B,Pe(N),G}return N.h=1,N.u=0}function O(){this.b=this.Ca=this.I=0,this.oa=[],this.pa=0,this.Jd=[],this.Yc=0,this.Zc=[],this.Ka=0}function H(){this.Ra=0,this.oa=[],this.h=this.u=this.bb=this.Sb=this.pa=0}function R(N){return N.Ra>>>(N.u&gh-1)>>>0}function M(N){return e(N.bb<=N.Sb),N.h||N.bb==N.Sb&&N.u>gh}function K(N,B){N.u=B,N.h=M(N)}function W(N){N.u>=Vf&&(e(N.u>=Vf),Pe(N))}function D(N){e(N!=null&&N.oa!=null),N.pa<N.Zc?(N.I=(N.oa[N.pa++]|N.I<<8)>>>0,N.b+=8):(e(N!=null&&N.oa!=null),N.pa<N.Yc?(N.b+=8,N.I=N.oa[N.pa++]|N.I<<8):N.Ka?N.b=0:(N.I<<=8,N.b+=8,N.Ka=1))}function L(N){return fe(N,1)}function Z(N,B){var G=N.Ca;0>N.b&&D(N);var se=N.b,Ne=G*B>>>8,Te=(N.I>>>se>Ne)+0;for(Te?(G-=Ne,N.I-=Ne+1<<se>>>0):G=Ne+1,se=G,Ne=0;256<=se;)Ne+=8,se>>=8;return se=7^Ne+xh[se],N.b-=se,N.Ca=(G<<se)-1,Te}function ge(N,B,G){N[B+0]=G>>24&255,N[B+1]=G>>16&255,N[B+2]=G>>8&255,N[B+3]=255&G}function U(N,B){return N[B+0]|N[B+1]<<8}function Ge(N,B){return U(N,B)|N[B+2]<<16}function ie(N,B){return U(N,B)|U(N,B+2)<<16}function J(N,B){var G=1<<B;return e(N!=null),e(0<B),N.X=s(G),N.X==null?0:(N.Mb=32-B,N.Xa=B,1)}function je(N,B){e(N!=null),e(B!=null),e(N.Xa==B.Xa),n(B.X,0,N.X,0,1<<B.Xa)}function z(){this.X=[],this.Xa=this.Mb=0}function Ae(N,B,G,se){e(G!=null),e(se!=null);var Ne=G[0],Te=se[0];return Ne==0&&(Ne=(N*Te+B/2)/B),Te==0&&(Te=(B*Ne+N/2)/N),0>=Ne||0>=Te?0:(G[0]=Ne,se[0]=Te,1)}function ye(N,B){return N+(1<<B)-1>>>B}function Qe(N,B){return((4278255360&N)+(4278255360&B)>>>0&4278255360)+((16711935&N)+(16711935&B)>>>0&16711935)>>>0}function st(N,B){S[B]=function(G,se,Ne,Te,Fe,Ve,qe){var Je;for(Je=0;Je<Fe;++Je){var pt=S[N](Ve[qe+Je-1],Ne,Te+Je);Ve[qe+Je]=Qe(G[se+Je],pt)}}}function ut(){this.ud=this.hd=this.jd=0}function De(N,B){return((4278124286&(N^B))>>>1)+(N&B)>>>0}function it(N){return 0<=N&&256>N?N:0>N?0:255<N?255:void 0}function dt(N,B){return it(N+(N-B+.5>>1))}function ce(N,B,G){return Math.abs(B-G)-Math.abs(N-G)}function oe(N,B,G,se,Ne,Te,Fe){for(se=Te[Fe-1],G=0;G<Ne;++G)Te[Fe+G]=se=Qe(N[B+G],se)}function Me(N,B,G,se,Ne){var Te;for(Te=0;Te<G;++Te){var Fe=N[B+Te],Ve=Fe>>8&255,qe=16711935&(qe=(qe=16711935&Fe)+((Ve<<16)+Ve));se[Ne+Te]=(4278255360&Fe)+qe>>>0}}function Le(N,B){B.jd=255&N,B.hd=N>>8&255,B.ud=N>>16&255}function ve(N,B,G,se,Ne,Te){var Fe;for(Fe=0;Fe<se;++Fe){var Ve=B[G+Fe],qe=Ve>>>8,Je=Ve,pt=255&(pt=(pt=Ve>>>16)+((N.jd<<24>>24)*(qe<<24>>24)>>>5));Je=255&(Je=(Je+=(N.hd<<24>>24)*(qe<<24>>24)>>>5)+((N.ud<<24>>24)*(pt<<24>>24)>>>5)),Ne[Te+Fe]=(4278255360&Ve)+(pt<<16)+Je}}function le(N,B,G,se,Ne){S[B]=function(Te,Fe,Ve,qe,Je,pt,kt,Ze,yt){for(qe=kt;qe<Ze;++qe)for(kt=0;kt<yt;++kt)Je[pt++]=Ne(Ve[se(Te[Fe++])])},S[N]=function(Te,Fe,Ve,qe,Je,pt,kt){var Ze=8>>Te.b,yt=Te.Ea,Et=Te.K[0],Jt=Te.w;if(8>Ze)for(Te=(1<<Te.b)-1,Jt=(1<<Ze)-1;Fe<Ve;++Fe){var Tt,rr=0;for(Tt=0;Tt<yt;++Tt)Tt&Te||(rr=se(qe[Je++])),pt[kt++]=Ne(Et[rr&Jt]),rr>>=Ze}else S["VP8LMapColor"+G](qe,Je,Et,Jt,pt,kt,Fe,Ve,yt)}}function Ue(N,B,G,se,Ne){for(G=B+G;B<G;){var Te=N[B++];se[Ne++]=Te>>16&255,se[Ne++]=Te>>8&255,se[Ne++]=255&Te}}function rt(N,B,G,se,Ne){for(G=B+G;B<G;){var Te=N[B++];se[Ne++]=Te>>16&255,se[Ne++]=Te>>8&255,se[Ne++]=255&Te,se[Ne++]=Te>>24&255}}function mt(N,B,G,se,Ne){for(G=B+G;B<G;){var Te=(Fe=N[B++])>>16&240|Fe>>12&15,Fe=240&Fe|Fe>>28&15;se[Ne++]=Te,se[Ne++]=Fe}}function gt(N,B,G,se,Ne){for(G=B+G;B<G;){var Te=(Fe=N[B++])>>16&248|Fe>>13&7,Fe=Fe>>5&224|Fe>>3&31;se[Ne++]=Te,se[Ne++]=Fe}}function Ct(N,B,G,se,Ne){for(G=B+G;B<G;){var Te=N[B++];se[Ne++]=255&Te,se[Ne++]=Te>>8&255,se[Ne++]=Te>>16&255}}function jt(N,B,G,se,Ne,Te){if(Te==0)for(G=B+G;B<G;)ge(se,((Te=N[B++])[0]>>24|Te[1]>>8&65280|Te[2]<<8&16711680|Te[3]<<24)>>>0),Ne+=32;else n(se,Ne,N,B,G)}function xe(N,B){S[B][0]=S[N+"0"],S[B][1]=S[N+"1"],S[B][2]=S[N+"2"],S[B][3]=S[N+"3"],S[B][4]=S[N+"4"],S[B][5]=S[N+"5"],S[B][6]=S[N+"6"],S[B][7]=S[N+"7"],S[B][8]=S[N+"8"],S[B][9]=S[N+"9"],S[B][10]=S[N+"10"],S[B][11]=S[N+"11"],S[B][12]=S[N+"12"],S[B][13]=S[N+"13"],S[B][14]=S[N+"0"],S[B][15]=S[N+"0"]}function He(N){return N==K3||N==G3||N==Gw||N==q3}function Ce(){this.eb=[],this.size=this.A=this.fb=0}function lt(){this.y=[],this.f=[],this.ea=[],this.F=[],this.Tc=this.Ed=this.Cd=this.Fd=this.lb=this.Db=this.Ab=this.fa=this.J=this.W=this.N=this.O=0}function nt(){this.Rd=this.height=this.width=this.S=0,this.f={},this.f.RGBA=new Ce,this.f.kb=new lt,this.sd=null}function Xe(){this.width=[0],this.height=[0],this.Pd=[0],this.Qd=[0],this.format=[0]}function It(){this.Id=this.fd=this.Md=this.hb=this.ib=this.da=this.bd=this.cd=this.j=this.v=this.Da=this.Sd=this.ob=0}function $t(N){return alert("todo:WebPSamplerProcessPlane"),N.T}function Ke(N,B){var G=N.T,se=B.ba.f.RGBA,Ne=se.eb,Te=se.fb+N.ka*se.A,Fe=hu[B.ba.S],Ve=N.y,qe=N.O,Je=N.f,pt=N.N,kt=N.ea,Ze=N.W,yt=B.cc,Et=B.dc,Jt=B.Mc,Tt=B.Nc,rr=N.ka,ir=N.ka+N.T,hr=N.U,dr=hr+1>>1;for(rr==0?Fe(Ve,qe,null,null,Je,pt,kt,Ze,Je,pt,kt,Ze,Ne,Te,null,null,hr):(Fe(B.ec,B.fc,Ve,qe,yt,Et,Jt,Tt,Je,pt,kt,Ze,Ne,Te-se.A,Ne,Te,hr),++G);rr+2<ir;rr+=2)yt=Je,Et=pt,Jt=kt,Tt=Ze,pt+=N.Rc,Ze+=N.Rc,Te+=2*se.A,Fe(Ve,(qe+=2*N.fa)-N.fa,Ve,qe,yt,Et,Jt,Tt,Je,pt,kt,Ze,Ne,Te-se.A,Ne,Te,hr);return qe+=N.fa,N.j+ir<N.o?(n(B.ec,B.fc,Ve,qe,hr),n(B.cc,B.dc,Je,pt,dr),n(B.Mc,B.Nc,kt,Ze,dr),G--):1&ir||Fe(Ve,qe,null,null,Je,pt,kt,Ze,Je,pt,kt,Ze,Ne,Te+se.A,null,null,hr),G}function wt(N,B,G){var se=N.F,Ne=[N.J];if(se!=null){var Te=N.U,Fe=B.ba.S,Ve=Fe==Kw||Fe==Gw;B=B.ba.f.RGBA;var qe=[0],Je=N.ka;qe[0]=N.T,N.Kb&&(Je==0?--qe[0]:(--Je,Ne[0]-=N.width),N.j+N.ka+N.T==N.o&&(qe[0]=N.o-N.j-Je));var pt=B.eb;Je=B.fb+Je*B.A,N=V8(se,Ne[0],N.width,Te,qe,pt,Je+(Ve?0:3),B.A),e(G==qe),N&&He(Fe)&&f1(pt,Je,Ve,Te,qe,B.A)}return 0}function q(N){var B=N.ma,G=B.ba.S,se=11>G,Ne=G==Hw||G==$w||G==Kw||G==$3||G==12||He(G);if(B.memory=null,B.Ib=null,B.Jb=null,B.Nd=null,!a1(B.Oa,N,Ne?11:12))return 0;if(Ne&&He(G)&&du(),N.da)alert("todo:use_scaling");else{if(se){if(B.Ib=$t,N.Kb){if(G=N.U+1>>1,B.memory=s(N.U+2*G),B.memory==null)return 0;B.ec=B.memory,B.fc=0,B.cc=B.ec,B.dc=B.fc+N.U,B.Mc=B.cc,B.Nc=B.dc+G,B.Ib=Ke,du()}}else alert("todo:EmitYUV");Ne&&(B.Jb=wt,se&&Wl())}if(se&&!aM){for(N=0;256>N;++N)Ece[N]=89858*(N-128)+zw>>qw,jce[N]=-22014*(N-128)+zw,Ice[N]=-45773*(N-128),Sce[N]=113618*(N-128)+zw>>qw;for(N=h1;N<X3;++N)B=76283*(N-16)+zw>>qw,Bce[N-h1]=Ir(B,255),Pce[N-h1]=Ir(B+8>>4,15);aM=1}return 1}function ae(N){var B=N.ma,G=N.U,se=N.T;return e(!(1&N.ka)),0>=G||0>=se?0:(G=B.Ib(N,B),B.Jb!=null&&B.Jb(N,B,G),B.Dc+=G,1)}function ee(N){N.ma.memory=null}function be(N,B,G,se){return Ie(N,8)!=47?0:(B[0]=Ie(N,14)+1,G[0]=Ie(N,14)+1,se[0]=Ie(N,1),Ie(N,3)!=0?0:!N.h)}function _e(N,B){if(4>N)return N+1;var G=N-2>>1;return(2+(1&N)<<G)+Ie(B,G)+1}function Be(N,B){return 120<B?B-120:1<=(G=((G=fce[B-1])>>4)*N+(8-(15&G)))?G:1;var G}function tt(N,B,G){var se=R(G),Ne=N[B+=255&se].g-8;return 0<Ne&&(K(G,G.u+8),se=R(G),B+=N[B].value,B+=se&(1<<Ne)-1),K(G,G.u+N[B].g),N[B].value}function ot(N,B,G){return G.g+=N.g,G.value+=N.value<<B>>>0,e(8>=G.g),N.g}function te(N,B,G){var se=N.xc;return e((B=se==0?0:N.vc[N.md*(G>>se)+(B>>se)])<N.Wb),N.Ya[B]}function V(N,B,G,se){var Ne=N.ab,Te=N.c*B,Fe=N.C;B=Fe+B;var Ve=G,qe=se;for(se=N.Ta,G=N.Ua;0<Ne--;){var Je=N.gc[Ne],pt=Fe,kt=B,Ze=Ve,yt=qe,Et=(qe=se,Ve=G,Je.Ea);switch(e(pt<kt),e(kt<=Je.nc),Je.hc){case 2:Xs(Ze,yt,(kt-pt)*Et,qe,Ve);break;case 0:var Jt=pt,Tt=kt,rr=qe,ir=Ve,hr=(Hr=Je).Ea;Jt==0&&(i1(Ze,yt,null,null,1,rr,ir),oe(Ze,yt+1,0,0,hr-1,rr,ir+1),yt+=hr,ir+=hr,++Jt);for(var dr=1<<Hr.b,qr=dr-1,Mr=ye(hr,Hr.b),yn=Hr.K,Hr=Hr.w+(Jt>>Hr.b)*Mr;Jt<Tt;){var Qn=yn,_i=Hr,bn=1;for(vg(Ze,yt,rr,ir-hr,1,rr,ir);bn<hr;){var $r=(bn&~qr)+dr;$r>hr&&($r=hr),(0,l1[Qn[_i++]>>8&15])(Ze,yt+ +bn,rr,ir+bn-hr,$r-bn,rr,ir+bn),bn=$r}yt+=hr,ir+=hr,++Jt&qr||(Hr+=Mr)}kt!=Je.nc&&n(qe,Ve-Et,qe,Ve+(kt-pt-1)*Et,Et);break;case 1:for(Et=Ze,Tt=yt,hr=(Ze=Je.Ea)-(ir=Ze&~(rr=(yt=1<<Je.b)-1)),Jt=ye(Ze,Je.b),dr=Je.K,Je=Je.w+(pt>>Je.b)*Jt;pt<kt;){for(qr=dr,Mr=Je,yn=new ut,Hr=Tt+ir,Qn=Tt+Ze;Tt<Hr;)Le(qr[Mr++],yn),c1(yn,Et,Tt,yt,qe,Ve),Tt+=yt,Ve+=yt;Tt<Qn&&(Le(qr[Mr++],yn),c1(yn,Et,Tt,hr,qe,Ve),Tt+=hr,Ve+=hr),++pt&rr||(Je+=Jt)}break;case 3:if(Ze==qe&&yt==Ve&&0<Je.b){for(Tt=qe,Ze=Et=Ve+(kt-pt)*Et-(ir=(kt-pt)*ye(Je.Ea,Je.b)),yt=qe,rr=Ve,Jt=[],ir=(hr=ir)-1;0<=ir;--ir)Jt[ir]=yt[rr+ir];for(ir=hr-1;0<=ir;--ir)Tt[Ze+ir]=Jt[ir];Lw(Je,pt,kt,qe,Et,qe,Ve)}else Lw(Je,pt,kt,Ze,yt,qe,Ve)}Ve=se,qe=G}qe!=G&&n(se,G,Ve,qe,Te)}function re(N,B){var G=N.V,se=N.Ba+N.c*N.C,Ne=B-N.C;if(e(B<=N.l.o),e(16>=Ne),0<Ne){var Te=N.l,Fe=N.Ta,Ve=N.Ua,qe=Te.width;if(V(N,Ne,G,se),Ne=Ve=[Ve],e((G=N.C)<(se=B)),e(Te.v<Te.va),se>Te.o&&(se=Te.o),G<Te.j){var Je=Te.j-G;G=Te.j,Ne[0]+=Je*qe}if(G>=se?G=0:(Ne[0]+=4*Te.v,Te.ka=G-Te.j,Te.U=Te.va-Te.v,Te.T=se-G,G=1),G){if(Ve=Ve[0],11>(G=N.ca).S){var pt=G.f.RGBA,kt=(se=G.S,Ne=Te.U,Te=Te.T,Je=pt.eb,pt.A),Ze=Te;for(pt=pt.fb+N.Ma*pt.A;0<Ze--;){var yt=Fe,Et=Ve,Jt=Ne,Tt=Je,rr=pt;switch(se){case Vw:u1(yt,Et,Jt,Tt,rr);break;case Hw:vh(yt,Et,Jt,Tt,rr);break;case K3:vh(yt,Et,Jt,Tt,rr),f1(Tt,rr,0,Jt,1,0);break;case W8:hm(yt,Et,Jt,Tt,rr);break;case $w:jt(yt,Et,Jt,Tt,rr,1);break;case G3:jt(yt,Et,Jt,Tt,rr,1),f1(Tt,rr,0,Jt,1,0);break;case Kw:jt(yt,Et,Jt,Tt,rr,0);break;case Gw:jt(yt,Et,Jt,Tt,rr,0),f1(Tt,rr,1,Jt,1,0);break;case $3:yh(yt,Et,Jt,Tt,rr);break;case q3:yh(yt,Et,Jt,Tt,rr),Q8(Tt,rr,Jt,1,0);break;case X8:bh(yt,Et,Jt,Tt,rr);break;default:e(0)}Ve+=qe,pt+=kt}N.Ma+=Te}else alert("todo:EmitRescaledRowsYUVA");e(N.Ma<=G.height)}}N.C=B,e(N.C<=N.i)}function pe(N){var B;if(0<N.ua)return 0;for(B=0;B<N.Wb;++B){var G=N.Ya[B].G,se=N.Ya[B].H;if(0<G[1][se[1]+0].g||0<G[2][se[2]+0].g||0<G[3][se[3]+0].g)return 0}return 1}function Ee(N,B,G,se,Ne,Te){if(N.Z!=0){var Fe=N.qd,Ve=N.rd;for(e(Ch[N.Z]!=null);B<G;++B)Ch[N.Z](Fe,Ve,se,Ne,se,Ne,Te),Fe=se,Ve=Ne,Ne+=Te;N.qd=Fe,N.rd=Ve}}function Se(N,B){var G=N.l.ma,se=G.Z==0||G.Z==1?N.l.j:N.C;if(se=N.C<se?se:N.C,e(B<=N.l.o),B>se){var Ne=N.l.width,Te=G.ca,Fe=G.tb+Ne*se,Ve=N.V,qe=N.Ba+N.c*se,Je=N.gc;e(N.ab==1),e(Je[0].hc==3),Yd(Je[0],se,B,Ve,qe,Te,Fe),Ee(G,se,B,Te,Fe,Ne)}N.C=N.Ma=B}function Re(N,B,G,se,Ne,Te,Fe){var Ve=N.$/se,qe=N.$%se,Je=N.m,pt=N.s,kt=G+N.$,Ze=kt;Ne=G+se*Ne;var yt=G+se*Te,Et=280+pt.ua,Jt=N.Pb?Ve:16777216,Tt=0<pt.ua?pt.Wa:null,rr=pt.wc,ir=kt<yt?te(pt,qe,Ve):null;e(N.C<Te),e(yt<=Ne);var hr=!1;e:for(;;){for(;hr||kt<yt;){var dr=0;if(Ve>=Jt){var qr=kt-G;e((Jt=N).Pb),Jt.wd=Jt.m,Jt.xd=qr,0<Jt.s.ua&&je(Jt.s.Wa,Jt.s.vb),Jt=Ve+hce}if(qe&rr||(ir=te(pt,qe,Ve)),e(ir!=null),ir.Qb&&(B[kt]=ir.qb,hr=!0),!hr)if(W(Je),ir.jc){dr=Je,qr=B;var Mr=kt,yn=ir.pd[R(dr)&Am-1];e(ir.jc),256>yn.g?(K(dr,dr.u+yn.g),qr[Mr]=yn.value,dr=0):(K(dr,dr.u+yn.g-256),e(256<=yn.value),dr=yn.value),dr==0&&(hr=!0)}else dr=tt(ir.G[0],ir.H[0],Je);if(Je.h)break;if(hr||256>dr){if(!hr)if(ir.nd)B[kt]=(ir.qb|dr<<8)>>>0;else{if(W(Je),hr=tt(ir.G[1],ir.H[1],Je),W(Je),qr=tt(ir.G[2],ir.H[2],Je),Mr=tt(ir.G[3],ir.H[3],Je),Je.h)break;B[kt]=(Mr<<24|hr<<16|dr<<8|qr)>>>0}if(hr=!1,++kt,++qe>=se&&(qe=0,++Ve,Fe!=null&&Ve<=Te&&!(Ve%16)&&Fe(N,Ve),Tt!=null))for(;Ze<kt;)dr=B[Ze++],Tt.X[(506832829*dr&4294967295)>>>Tt.Mb]=dr}else if(280>dr){if(dr=_e(dr-256,Je),qr=tt(ir.G[4],ir.H[4],Je),W(Je),qr=Be(se,qr=_e(qr,Je)),Je.h)break;if(kt-G<qr||Ne-kt<dr)break e;for(Mr=0;Mr<dr;++Mr)B[kt+Mr]=B[kt+Mr-qr];for(kt+=dr,qe+=dr;qe>=se;)qe-=se,++Ve,Fe!=null&&Ve<=Te&&!(Ve%16)&&Fe(N,Ve);if(e(kt<=Ne),qe&rr&&(ir=te(pt,qe,Ve)),Tt!=null)for(;Ze<kt;)dr=B[Ze++],Tt.X[(506832829*dr&4294967295)>>>Tt.Mb]=dr}else{if(!(dr<Et))break e;for(hr=dr-280,e(Tt!=null);Ze<kt;)dr=B[Ze++],Tt.X[(506832829*dr&4294967295)>>>Tt.Mb]=dr;dr=kt,e(!(hr>>>(qr=Tt).Xa)),B[dr]=qr.X[hr],hr=!0}hr||e(Je.h==M(Je))}if(N.Pb&&Je.h&&kt<Ne)e(N.m.h),N.a=5,N.m=N.wd,N.$=N.xd,0<N.s.ua&&je(N.s.vb,N.s.Wa);else{if(Je.h)break e;Fe!=null&&Fe(N,Ve>Te?Te:Ve),N.a=0,N.$=kt-G}return 1}return N.a=3,0}function et(N){e(N!=null),N.vc=null,N.yc=null,N.Ya=null;var B=N.Wa;B!=null&&(B.X=null),N.vb=null,e(N!=null)}function We(){var N=new rn;return N==null?null:(N.a=0,N.xb=Z8,xe("Predictor","VP8LPredictors"),xe("Predictor","VP8LPredictors_C"),xe("PredictorAdd","VP8LPredictorsAdd"),xe("PredictorAdd","VP8LPredictorsAdd_C"),Xs=Me,c1=ve,u1=Ue,vh=rt,yh=mt,bh=gt,hm=Ct,S.VP8LMapColor32b=Xd,S.VP8LMapColor8b=o1,N)}function At(N,B,G,se,Ne){var Te=1,Fe=[N],Ve=[B],qe=se.m,Je=se.s,pt=null,kt=0;e:for(;;){if(G)for(;Te&&Ie(qe,1);){var Ze=Fe,yt=Ve,Et=se,Jt=1,Tt=Et.m,rr=Et.gc[Et.ab],ir=Ie(Tt,2);if(Et.Oc&1<<ir)Te=0;else{switch(Et.Oc|=1<<ir,rr.hc=ir,rr.Ea=Ze[0],rr.nc=yt[0],rr.K=[null],++Et.ab,e(4>=Et.ab),ir){case 0:case 1:rr.b=Ie(Tt,3)+2,Jt=At(ye(rr.Ea,rr.b),ye(rr.nc,rr.b),0,Et,rr.K),rr.K=rr.K[0];break;case 3:var hr,dr=Ie(Tt,8)+1,qr=16<dr?0:4<dr?1:2<dr?2:3;if(Ze[0]=ye(rr.Ea,qr),rr.b=qr,hr=Jt=At(dr,1,0,Et,rr.K)){var Mr,yn=dr,Hr=rr,Qn=1<<(8>>Hr.b),_i=s(Qn);if(_i==null)hr=0;else{var bn=Hr.K[0],$r=Hr.w;for(_i[0]=Hr.K[0][0],Mr=1;Mr<1*yn;++Mr)_i[Mr]=Qe(bn[$r+Mr],_i[Mr-1]);for(;Mr<4*Qn;++Mr)_i[Mr]=0;Hr.K[0]=null,Hr.K[0]=_i,hr=1}}Jt=hr;break;case 2:break;default:e(0)}Te=Jt}}if(Fe=Fe[0],Ve=Ve[0],Te&&Ie(qe,1)&&!(Te=1<=(kt=Ie(qe,4))&&11>=kt)){se.a=3;break e}var Er;if(Er=Te)t:{var Js,pn,Hn,za=se,No=Fe,_l=Ve,Ls=kt,Xo=G,El=za.m,Ei=za.s,Gn=[null],Aa=1,Us=0,ha=Ace[Ls];r:for(;;){if(Xo&&Ie(El,1)){var Co=Ie(El,3)+2,sd=ye(No,Co),Zs=ye(_l,Co),Xl=sd*Zs;if(!At(sd,Zs,0,za,Gn))break r;for(Gn=Gn[0],Ei.xc=Co,Js=0;Js<Xl;++Js){var Fa=Gn[Js]>>8&65535;Gn[Js]=Fa,Fa>=Aa&&(Aa=Fa+1)}}if(El.h)break r;for(pn=0;5>pn;++pn){var Si=Y8[pn];!pn&&0<Ls&&(Si+=1<<Ls),Us<Si&&(Us=Si)}var Ec=i(Aa*ha,F),Sl=Aa,Sc=i(Sl,he);if(Sc==null)var Ic=null;else e(65536>=Sl),Ic=Sc;var Yl=s(Us);if(Ic==null||Yl==null||Ec==null){za.a=1;break r}var jc=Ec;for(Js=Hn=0;Js<Aa;++Js){var Ua=Ic[Js],Bc=Ua.G,id=Ua.H,pm=0,Kf=1,_o=0;for(pn=0;5>pn;++pn){Si=Y8[pn],Bc[pn]=jc,id[pn]=Hn,!pn&&0<Ls&&(Si+=1<<Ls);a:{var Xw,Y3=Si,Yw=za,m1=Yl,Fce=jc,Oce=Hn,J3=0,_h=Yw.m,Dce=Ie(_h,1);if(a(m1,0,0,Y3),Dce){var Rce=Ie(_h,1)+1,Mce=Ie(_h,1),oM=Ie(_h,Mce==0?1:8);m1[oM]=1,Rce==2&&(m1[oM=Ie(_h,8)]=1);var Jw=1}else{var lM=s(19),cM=Ie(_h,4)+4;if(19<cM){Yw.a=3;var Zw=0;break a}for(Xw=0;Xw<cM;++Xw)lM[dce[Xw]]=Ie(_h,3);var Z3=void 0,p1=void 0,uM=Yw,Lce=lM,eN=Y3,dM=m1,ej=0,Eh=uM.m,fM=8,AM=i(128,F);n:for(;T(AM,0,7,Lce,19);){if(Ie(Eh,1)){var Uce=2+2*Ie(Eh,3);if((Z3=2+Ie(Eh,Uce))>eN)break n}else Z3=eN;for(p1=0;p1<eN&&Z3--;){W(Eh);var hM=AM[0+(127&R(Eh))];K(Eh,Eh.u+hM.g);var bg=hM.value;if(16>bg)dM[p1++]=bg,bg!=0&&(fM=bg);else{var Qce=bg==16,mM=bg-16,Vce=cce[mM],pM=Ie(Eh,lce[mM])+Vce;if(p1+pM>eN)break n;for(var Hce=Qce?fM:0;0<pM--;)dM[p1++]=Hce}}ej=1;break n}ej||(uM.a=3),Jw=ej}(Jw=Jw&&!_h.h)&&(J3=T(Fce,Oce,8,m1,Y3)),Jw&&J3!=0?Zw=J3:(Yw.a=3,Zw=0)}if(Zw==0)break r;if(Kf&&uce[pn]==1&&(Kf=jc[Hn].g==0),pm+=jc[Hn].g,Hn+=Zw,3>=pn){var g1,tj=Yl[0];for(g1=1;g1<Si;++g1)Yl[g1]>tj&&(tj=Yl[g1]);_o+=tj}}if(Ua.nd=Kf,Ua.Qb=0,Kf&&(Ua.qb=(Bc[3][id[3]+0].value<<24|Bc[1][id[1]+0].value<<16|Bc[2][id[2]+0].value)>>>0,pm==0&&256>Bc[0][id[0]+0].value&&(Ua.Qb=1,Ua.qb+=Bc[0][id[0]+0].value<<8)),Ua.jc=!Ua.Qb&&6>_o,Ua.jc){var tN,Gf=Ua;for(tN=0;tN<Am;++tN){var Sh=tN,Ih=Gf.pd[Sh],rN=Gf.G[0][Gf.H[0]+Sh];256<=rN.value?(Ih.g=rN.g+256,Ih.value=rN.value):(Ih.g=0,Ih.value=0,Sh>>=ot(rN,8,Ih),Sh>>=ot(Gf.G[1][Gf.H[1]+Sh],16,Ih),Sh>>=ot(Gf.G[2][Gf.H[2]+Sh],0,Ih),ot(Gf.G[3][Gf.H[3]+Sh],24,Ih))}}}Ei.vc=Gn,Ei.Wb=Aa,Ei.Ya=Ic,Ei.yc=Ec,Er=1;break t}Er=0}if(!(Te=Er)){se.a=3;break e}if(0<kt){if(Je.ua=1<<kt,!J(Je.Wa,kt)){se.a=1,Te=0;break e}}else Je.ua=0;var rj=se,gM=Fe,$ce=Ve,nj=rj.s,aj=nj.xc;if(rj.c=gM,rj.i=$ce,nj.md=ye(gM,aj),nj.wc=aj==0?-1:(1<<aj)-1,G){se.xb=bce;break e}if((pt=s(Fe*Ve))==null){se.a=1,Te=0;break e}Te=(Te=Re(se,pt,0,Fe,Ve,Ve,null))&&!qe.h;break e}return Te?(Ne!=null?Ne[0]=pt:(e(pt==null),e(G)),se.$=0,G||et(Je)):et(Je),Te}function vt(N,B){var G=N.c*N.i,se=G+B+16*B;return e(N.c<=B),N.V=s(se),N.V==null?(N.Ta=null,N.Ua=0,N.a=1,0):(N.Ta=N.V,N.Ua=N.Ba+G+B,1)}function Vt(N,B){var G=N.C,se=B-G,Ne=N.V,Te=N.Ba+N.c*G;for(e(B<=N.l.o);0<se;){var Fe=16<se?16:se,Ve=N.l.ma,qe=N.l.width,Je=qe*Fe,pt=Ve.ca,kt=Ve.tb+qe*G,Ze=N.Ta,yt=N.Ua;V(N,Fe,Ne,Te),H8(Ze,yt,pt,kt,Je),Ee(Ve,G,G+Fe,pt,kt,qe),se-=Fe,Ne+=Fe*N.c,G+=Fe}e(G==B),N.C=N.Ma=B}function or(){this.ub=this.yd=this.td=this.Rb=0}function Oe(){this.Kd=this.Ld=this.Ud=this.Td=this.i=this.c=0}function ct(){this.Fb=this.Bb=this.Cb=0,this.Zb=s(4),this.Lb=s(4)}function bt(){this.Yb=function(){var N=[];return function B(G,se,Ne){for(var Te=Ne[se],Fe=0;Fe<Te&&(G.push(Ne.length>se+1?[]:0),!(Ne.length<se+1));Fe++)B(G[Fe],se+1,Ne)}(N,0,[3,11]),N}()}function Dt(){this.jb=s(3),this.Wc=l([4,8],bt),this.Xc=l([4,17],bt)}function xt(){this.Pc=this.wb=this.Tb=this.zd=0,this.vd=new s(4),this.od=new s(4)}function sr(){this.ld=this.La=this.dd=this.tc=0}function Xt(){this.Na=this.la=0}function Kt(){this.Sc=[0,0],this.Eb=[0,0],this.Qc=[0,0],this.ia=this.lc=0}function ar(){this.ad=s(384),this.Za=0,this.Ob=s(16),this.$b=this.Ad=this.ia=this.Gc=this.Hc=this.Dd=0}function Ar(){this.uc=this.M=this.Nb=0,this.wa=Array(new sr),this.Y=0,this.ya=Array(new ar),this.aa=0,this.l=new Tn}function Gt(){this.y=s(16),this.f=s(8),this.ea=s(8)}function _r(){this.cb=this.a=0,this.sc="",this.m=new O,this.Od=new or,this.Kc=new Oe,this.ed=new xt,this.Qa=new ct,this.Ic=this.$c=this.Aa=0,this.D=new Ar,this.Xb=this.Va=this.Hb=this.zb=this.yb=this.Ub=this.za=0,this.Jc=i(8,O),this.ia=0,this.pb=i(4,Kt),this.Pa=new Dt,this.Bd=this.kc=0,this.Ac=[],this.Bc=0,this.zc=[0,0,0,0],this.Gd=Array(new Gt),this.Hd=0,this.rb=Array(new Xt),this.sb=0,this.wa=Array(new sr),this.Y=0,this.oc=[],this.pc=0,this.sa=[],this.ta=0,this.qa=[],this.ra=0,this.Ha=[],this.B=this.R=this.Ia=0,this.Ec=[],this.M=this.ja=this.Vb=this.Fc=0,this.ya=Array(new ar),this.L=this.aa=0,this.gd=l([4,2],sr),this.ga=null,this.Fa=[],this.Cc=this.qc=this.P=0,this.Gb=[],this.Uc=0,this.mb=[],this.nb=0,this.rc=[],this.Ga=this.Vc=0}function Ir(N,B){return 0>N?0:N>B?B:N}function Tn(){this.T=this.U=this.ka=this.height=this.width=0,this.y=[],this.f=[],this.ea=[],this.Rc=this.fa=this.W=this.N=this.O=0,this.ma="void",this.put="VP8IoPutHook",this.ac="VP8IoSetupHook",this.bc="VP8IoTeardownHook",this.ha=this.Kb=0,this.data=[],this.hb=this.ib=this.da=this.o=this.j=this.va=this.v=this.Da=this.ob=this.w=0,this.F=[],this.J=0}function is(){var N=new _r;return N!=null&&(N.a=0,N.sc="OK",N.cb=0,N.Xb=0,A1||(A1=zt)),N}function fn(N,B,G){return N.a==0&&(N.a=B,N.sc=G,N.cb=0),0}function St(N,B,G){return 3<=G&&N[B+0]==157&&N[B+1]==1&&N[B+2]==42}function at(N,B){if(N==null)return 0;if(N.a=0,N.sc="OK",B==null)return fn(N,2,"null VP8Io passed to VP8GetHeaders()");var G=B.data,se=B.w,Ne=B.ha;if(4>Ne)return fn(N,7,"Truncated header.");var Te=G[se+0]|G[se+1]<<8|G[se+2]<<16,Fe=N.Od;if(Fe.Rb=!(1&Te),Fe.td=Te>>1&7,Fe.yd=Te>>4&1,Fe.ub=Te>>5,3<Fe.td)return fn(N,3,"Incorrect keyframe parameters.");if(!Fe.yd)return fn(N,4,"Frame not displayable.");se+=3,Ne-=3;var Ve=N.Kc;if(Fe.Rb){if(7>Ne)return fn(N,7,"cannot parse picture header");if(!St(G,se,Ne))return fn(N,3,"Bad code word");Ve.c=16383&(G[se+4]<<8|G[se+3]),Ve.Td=G[se+4]>>6,Ve.i=16383&(G[se+6]<<8|G[se+5]),Ve.Ud=G[se+6]>>6,se+=7,Ne-=7,N.za=Ve.c+15>>4,N.Ub=Ve.i+15>>4,B.width=Ve.c,B.height=Ve.i,B.Da=0,B.j=0,B.v=0,B.va=B.width,B.o=B.height,B.da=0,B.ib=B.width,B.hb=B.height,B.U=B.width,B.T=B.height,a((Te=N.Pa).jb,0,255,Te.jb.length),e((Te=N.Qa)!=null),Te.Cb=0,Te.Bb=0,Te.Fb=1,a(Te.Zb,0,0,Te.Zb.length),a(Te.Lb,0,0,Te.Lb)}if(Fe.ub>Ne)return fn(N,7,"bad partition length");ue(Te=N.m,G,se,Fe.ub),se+=Fe.ub,Ne-=Fe.ub,Fe.Rb&&(Ve.Ld=L(Te),Ve.Kd=L(Te)),Ve=N.Qa;var qe,Je=N.Pa;if(e(Te!=null),e(Ve!=null),Ve.Cb=L(Te),Ve.Cb){if(Ve.Bb=L(Te),L(Te)){for(Ve.Fb=L(Te),qe=0;4>qe;++qe)Ve.Zb[qe]=L(Te)?me(Te,7):0;for(qe=0;4>qe;++qe)Ve.Lb[qe]=L(Te)?me(Te,6):0}if(Ve.Bb)for(qe=0;3>qe;++qe)Je.jb[qe]=L(Te)?fe(Te,8):255}else Ve.Bb=0;if(Te.Ka)return fn(N,3,"cannot parse segment header");if((Ve=N.ed).zd=L(Te),Ve.Tb=fe(Te,6),Ve.wb=fe(Te,3),Ve.Pc=L(Te),Ve.Pc&&L(Te)){for(Je=0;4>Je;++Je)L(Te)&&(Ve.vd[Je]=me(Te,6));for(Je=0;4>Je;++Je)L(Te)&&(Ve.od[Je]=me(Te,6))}if(N.L=Ve.Tb==0?0:Ve.zd?1:2,Te.Ka)return fn(N,3,"cannot parse filter header");var pt=Ne;if(Ne=qe=se,se=qe+pt,Ve=pt,N.Xb=(1<<fe(N.m,2))-1,pt<3*(Je=N.Xb))G=7;else{for(qe+=3*Je,Ve-=3*Je,pt=0;pt<Je;++pt){var kt=G[Ne+0]|G[Ne+1]<<8|G[Ne+2]<<16;kt>Ve&&(kt=Ve),ue(N.Jc[+pt],G,qe,kt),qe+=kt,Ve-=kt,Ne+=3}ue(N.Jc[+Je],G,qe,Ve),G=qe<se?0:5}if(G!=0)return fn(N,G,"cannot parse partitions");for(G=fe(qe=N.m,7),Ne=L(qe)?me(qe,4):0,se=L(qe)?me(qe,4):0,Ve=L(qe)?me(qe,4):0,Je=L(qe)?me(qe,4):0,qe=L(qe)?me(qe,4):0,pt=N.Qa,kt=0;4>kt;++kt){if(pt.Cb){var Ze=pt.Zb[kt];pt.Fb||(Ze+=G)}else{if(0<kt){N.pb[kt]=N.pb[0];continue}Ze=G}var yt=N.pb[kt];yt.Sc[0]=z3[Ir(Ze+Ne,127)],yt.Sc[1]=W3[Ir(Ze+0,127)],yt.Eb[0]=2*z3[Ir(Ze+se,127)],yt.Eb[1]=101581*W3[Ir(Ze+Ve,127)]>>16,8>yt.Eb[1]&&(yt.Eb[1]=8),yt.Qc[0]=z3[Ir(Ze+Je,117)],yt.Qc[1]=W3[Ir(Ze+qe,127)],yt.lc=Ze+qe}if(!Fe.Rb)return fn(N,4,"Not a key frame.");for(L(Te),Fe=N.Pa,G=0;4>G;++G){for(Ne=0;8>Ne;++Ne)for(se=0;3>se;++se)for(Ve=0;11>Ve;++Ve)Je=Z(Te,vce[G][Ne][se][Ve])?fe(Te,8):gce[G][Ne][se][Ve],Fe.Wc[G][Ne].Yb[se][Ve]=Je;for(Ne=0;17>Ne;++Ne)Fe.Xc[G][Ne]=Fe.Wc[G][yce[Ne]]}return N.kc=L(Te),N.kc&&(N.Bd=fe(Te,8)),N.cb=1}function zt(N,B,G,se,Ne,Te,Fe){var Ve=B[Ne].Yb[G];for(G=0;16>Ne;++Ne){if(!Z(N,Ve[G+0]))return Ne;for(;!Z(N,Ve[G+1]);)if(Ve=B[++Ne].Yb[0],G=0,Ne==16)return 16;var qe=B[Ne+1].Yb;if(Z(N,Ve[G+2])){var Je=N,pt=0;if(Z(Je,(Ze=Ve)[(kt=G)+3]))if(Z(Je,Ze[kt+6])){for(Ve=0,kt=2*(pt=Z(Je,Ze[kt+8]))+(Ze=Z(Je,Ze[kt+9+pt])),pt=0,Ze=mce[kt];Ze[Ve];++Ve)pt+=pt+Z(Je,Ze[Ve]);pt+=3+(8<<kt)}else Z(Je,Ze[kt+7])?(pt=7+2*Z(Je,165),pt+=Z(Je,145)):pt=5+Z(Je,159);else pt=Z(Je,Ze[kt+4])?3+Z(Je,Ze[kt+5]):2;Ve=qe[2]}else pt=1,Ve=qe[1];qe=Fe+pce[Ne],0>(Je=N).b&&D(Je);var kt,Ze=Je.b,yt=(kt=Je.Ca>>1)-(Je.I>>Ze)>>31;--Je.b,Je.Ca+=yt,Je.Ca|=1,Je.I-=(kt+1&yt)<<Ze,Te[qe]=((pt^yt)-yt)*se[(0<Ne)+0]}return 16}function Ut(N){var B=N.rb[N.sb-1];B.la=0,B.Na=0,a(N.zc,0,0,N.zc.length),N.ja=0}function Qt(N,B,G,se,Ne){Ne=N[B+G+32*se]+(Ne>>3),N[B+G+32*se]=-256&Ne?0>Ne?0:255:Ne}function Bt(N,B,G,se,Ne,Te){Qt(N,B,0,G,se+Ne),Qt(N,B,1,G,se+Te),Qt(N,B,2,G,se-Te),Qt(N,B,3,G,se-Ne)}function Ht(N){return(20091*N>>16)+N}function Lt(N,B,G,se){var Ne,Te=0,Fe=s(16);for(Ne=0;4>Ne;++Ne){var Ve=N[B+0]+N[B+8],qe=N[B+0]-N[B+8],Je=(35468*N[B+4]>>16)-Ht(N[B+12]),pt=Ht(N[B+4])+(35468*N[B+12]>>16);Fe[Te+0]=Ve+pt,Fe[Te+1]=qe+Je,Fe[Te+2]=qe-Je,Fe[Te+3]=Ve-pt,Te+=4,B++}for(Ne=Te=0;4>Ne;++Ne)Ve=(N=Fe[Te+0]+4)+Fe[Te+8],qe=N-Fe[Te+8],Je=(35468*Fe[Te+4]>>16)-Ht(Fe[Te+12]),Qt(G,se,0,0,Ve+(pt=Ht(Fe[Te+4])+(35468*Fe[Te+12]>>16))),Qt(G,se,1,0,qe+Je),Qt(G,se,2,0,qe-Je),Qt(G,se,3,0,Ve-pt),Te++,se+=32}function er(N,B,G,se){var Ne=N[B+0]+4,Te=35468*N[B+4]>>16,Fe=Ht(N[B+4]),Ve=35468*N[B+1]>>16;Bt(G,se,0,Ne+Fe,N=Ht(N[B+1]),Ve),Bt(G,se,1,Ne+Te,N,Ve),Bt(G,se,2,Ne-Te,N,Ve),Bt(G,se,3,Ne-Fe,N,Ve)}function gr(N,B,G,se,Ne){Lt(N,B,G,se),Ne&&Lt(N,B+16,G,se+4)}function Cr(N,B,G,se){mm(N,B+0,G,se,1),mm(N,B+32,G,se+128,1)}function ys(N,B,G,se){var Ne;for(N=N[B+0]+4,Ne=0;4>Ne;++Ne)for(B=0;4>B;++B)Qt(G,se,B,Ne,N)}function Ta(N,B,G,se){N[B+0]&&la(N,B+0,G,se),N[B+16]&&la(N,B+16,G,se+4),N[B+32]&&la(N,B+32,G,se+128),N[B+48]&&la(N,B+48,G,se+128+4)}function da(N,B,G,se){var Ne,Te=s(16);for(Ne=0;4>Ne;++Ne){var Fe=N[B+0+Ne]+N[B+12+Ne],Ve=N[B+4+Ne]+N[B+8+Ne],qe=N[B+4+Ne]-N[B+8+Ne],Je=N[B+0+Ne]-N[B+12+Ne];Te[0+Ne]=Fe+Ve,Te[8+Ne]=Fe-Ve,Te[4+Ne]=Je+qe,Te[12+Ne]=Je-qe}for(Ne=0;4>Ne;++Ne)Fe=(N=Te[0+4*Ne]+3)+Te[3+4*Ne],Ve=Te[1+4*Ne]+Te[2+4*Ne],qe=Te[1+4*Ne]-Te[2+4*Ne],Je=N-Te[3+4*Ne],G[se+0]=Fe+Ve>>3,G[se+16]=Je+qe>>3,G[se+32]=Fe-Ve>>3,G[se+48]=Je-qe>>3,se+=64}function Ws(N,B,G){var se,Ne=B-32,Te=_c,Fe=255-N[Ne-1];for(se=0;se<G;++se){var Ve,qe=Te,Je=Fe+N[B-1];for(Ve=0;Ve<G;++Ve)N[B+Ve]=qe[Je+N[Ne+Ve]];B+=32}}function zl(N,B){Ws(N,B,4)}function ed(N,B){Ws(N,B,8)}function Gd(N,B){Ws(N,B,16)}function au(N,B){var G;for(G=0;16>G;++G)n(N,B+32*G,N,B-32,16)}function Lf(N,B){var G;for(G=16;0<G;--G)a(N,B,N[B-1],16),B+=32}function bo(N,B,G){var se;for(se=0;16>se;++se)a(B,G+32*se,N,16)}function su(N,B){var G,se=16;for(G=0;16>G;++G)se+=N[B-1+32*G]+N[B+G-32];bo(se>>5,N,B)}function qd(N,B){var G,se=8;for(G=0;16>G;++G)se+=N[B-1+32*G];bo(se>>4,N,B)}function dh(N,B){var G,se=8;for(G=0;16>G;++G)se+=N[B+G-32];bo(se>>4,N,B)}function pg(N,B){bo(128,N,B)}function tn(N,B,G){return N+2*B+G+2>>2}function e1(N,B){var G,se=B-32;for(se=new Uint8Array([tn(N[se-1],N[se+0],N[se+1]),tn(N[se+0],N[se+1],N[se+2]),tn(N[se+1],N[se+2],N[se+3]),tn(N[se+2],N[se+3],N[se+4])]),G=0;4>G;++G)n(N,B+32*G,se,0,se.length)}function t1(N,B){var G=N[B-1],se=N[B-1+32],Ne=N[B-1+64],Te=N[B-1+96];ge(N,B+0,16843009*tn(N[B-1-32],G,se)),ge(N,B+32,16843009*tn(G,se,Ne)),ge(N,B+64,16843009*tn(se,Ne,Te)),ge(N,B+96,16843009*tn(Ne,Te,Te))}function r1(N,B){var G,se=4;for(G=0;4>G;++G)se+=N[B+G-32]+N[B-1+32*G];for(se>>=3,G=0;4>G;++G)a(N,B+32*G,se,4)}function Ji(N,B){var G=N[B-1+0],se=N[B-1+32],Ne=N[B-1+64],Te=N[B-1-32],Fe=N[B+0-32],Ve=N[B+1-32],qe=N[B+2-32],Je=N[B+3-32];N[B+0+96]=tn(se,Ne,N[B-1+96]),N[B+1+96]=N[B+0+64]=tn(G,se,Ne),N[B+2+96]=N[B+1+64]=N[B+0+32]=tn(Te,G,se),N[B+3+96]=N[B+2+64]=N[B+1+32]=N[B+0+0]=tn(Fe,Te,G),N[B+3+64]=N[B+2+32]=N[B+1+0]=tn(Ve,Fe,Te),N[B+3+32]=N[B+2+0]=tn(qe,Ve,Fe),N[B+3+0]=tn(Je,qe,Ve)}function td(N,B){var G=N[B+1-32],se=N[B+2-32],Ne=N[B+3-32],Te=N[B+4-32],Fe=N[B+5-32],Ve=N[B+6-32],qe=N[B+7-32];N[B+0+0]=tn(N[B+0-32],G,se),N[B+1+0]=N[B+0+32]=tn(G,se,Ne),N[B+2+0]=N[B+1+32]=N[B+0+64]=tn(se,Ne,Te),N[B+3+0]=N[B+2+32]=N[B+1+64]=N[B+0+96]=tn(Ne,Te,Fe),N[B+3+32]=N[B+2+64]=N[B+1+96]=tn(Te,Fe,Ve),N[B+3+64]=N[B+2+96]=tn(Fe,Ve,qe),N[B+3+96]=tn(Ve,qe,qe)}function n1(N,B){var G=N[B-1+0],se=N[B-1+32],Ne=N[B-1+64],Te=N[B-1-32],Fe=N[B+0-32],Ve=N[B+1-32],qe=N[B+2-32],Je=N[B+3-32];N[B+0+0]=N[B+1+64]=Te+Fe+1>>1,N[B+1+0]=N[B+2+64]=Fe+Ve+1>>1,N[B+2+0]=N[B+3+64]=Ve+qe+1>>1,N[B+3+0]=qe+Je+1>>1,N[B+0+96]=tn(Ne,se,G),N[B+0+64]=tn(se,G,Te),N[B+0+32]=N[B+1+96]=tn(G,Te,Fe),N[B+1+32]=N[B+2+96]=tn(Te,Fe,Ve),N[B+2+32]=N[B+3+96]=tn(Fe,Ve,qe),N[B+3+32]=tn(Ve,qe,Je)}function fh(N,B){var G=N[B+0-32],se=N[B+1-32],Ne=N[B+2-32],Te=N[B+3-32],Fe=N[B+4-32],Ve=N[B+5-32],qe=N[B+6-32],Je=N[B+7-32];N[B+0+0]=G+se+1>>1,N[B+1+0]=N[B+0+64]=se+Ne+1>>1,N[B+2+0]=N[B+1+64]=Ne+Te+1>>1,N[B+3+0]=N[B+2+64]=Te+Fe+1>>1,N[B+0+32]=tn(G,se,Ne),N[B+1+32]=N[B+0+96]=tn(se,Ne,Te),N[B+2+32]=N[B+1+96]=tn(Ne,Te,Fe),N[B+3+32]=N[B+2+96]=tn(Te,Fe,Ve),N[B+3+64]=tn(Fe,Ve,qe),N[B+3+96]=tn(Ve,qe,Je)}function rd(N,B){var G=N[B-1+0],se=N[B-1+32],Ne=N[B-1+64],Te=N[B-1+96];N[B+0+0]=G+se+1>>1,N[B+2+0]=N[B+0+32]=se+Ne+1>>1,N[B+2+32]=N[B+0+64]=Ne+Te+1>>1,N[B+1+0]=tn(G,se,Ne),N[B+3+0]=N[B+1+32]=tn(se,Ne,Te),N[B+3+32]=N[B+1+64]=tn(Ne,Te,Te),N[B+3+64]=N[B+2+64]=N[B+0+96]=N[B+1+96]=N[B+2+96]=N[B+3+96]=Te}function Ah(N,B){var G=N[B-1+0],se=N[B-1+32],Ne=N[B-1+64],Te=N[B-1+96],Fe=N[B-1-32],Ve=N[B+0-32],qe=N[B+1-32],Je=N[B+2-32];N[B+0+0]=N[B+2+32]=G+Fe+1>>1,N[B+0+32]=N[B+2+64]=se+G+1>>1,N[B+0+64]=N[B+2+96]=Ne+se+1>>1,N[B+0+96]=Te+Ne+1>>1,N[B+3+0]=tn(Ve,qe,Je),N[B+2+0]=tn(Fe,Ve,qe),N[B+1+0]=N[B+3+32]=tn(G,Fe,Ve),N[B+1+32]=N[B+3+64]=tn(se,G,Fe),N[B+1+64]=N[B+3+96]=tn(Ne,se,G),N[B+1+96]=tn(Te,Ne,se)}function bc(N,B){var G;for(G=0;8>G;++G)n(N,B+32*G,N,B-32,8)}function Uf(N,B){var G;for(G=0;8>G;++G)a(N,B,N[B-1],8),B+=32}function iu(N,B,G){var se;for(se=0;8>se;++se)a(B,G+32*se,N,8)}function cm(N,B){var G,se=8;for(G=0;8>G;++G)se+=N[B+G-32]+N[B-1+32*G];iu(se>>4,N,B)}function Sa(N,B){var G,se=4;for(G=0;8>G;++G)se+=N[B+G-32];iu(se>>3,N,B)}function um(N,B){var G,se=4;for(G=0;8>G;++G)se+=N[B-1+32*G];iu(se>>3,N,B)}function gg(N,B){iu(128,N,B)}function ou(N,B,G){var se=N[B-G],Ne=N[B+0],Te=3*(Ne-se)+H3[1020+N[B-2*G]-N[B+G]],Fe=Qw[112+(Te+4>>3)];N[B-G]=_c[255+se+Qw[112+(Te+3>>3)]],N[B+0]=_c[255+Ne-Fe]}function hh(N,B,G,se){var Ne=N[B+0],Te=N[B+G];return Au[255+N[B-2*G]-N[B-G]]>se||Au[255+Te-Ne]>se}function Qf(N,B,G,se){return 4*Au[255+N[B-G]-N[B+0]]+Au[255+N[B-2*G]-N[B+G]]<=se}function zd(N,B,G,se,Ne){var Te=N[B-3*G],Fe=N[B-2*G],Ve=N[B-G],qe=N[B+0],Je=N[B+G],pt=N[B+2*G],kt=N[B+3*G];return 4*Au[255+Ve-qe]+Au[255+Fe-Je]>se?0:Au[255+N[B-4*G]-Te]<=Ne&&Au[255+Te-Fe]<=Ne&&Au[255+Fe-Ve]<=Ne&&Au[255+kt-pt]<=Ne&&Au[255+pt-Je]<=Ne&&Au[255+Je-qe]<=Ne}function Wd(N,B,G,se){var Ne=2*se+1;for(se=0;16>se;++se)Qf(N,B+se,G,Ne)&&ou(N,B+se,G)}function Nl(N,B,G,se){var Ne=2*se+1;for(se=0;16>se;++se)Qf(N,B+se*G,1,Ne)&&ou(N,B+se*G,1)}function dm(N,B,G,se){var Ne;for(Ne=3;0<Ne;--Ne)Wd(N,B+=4*G,G,se)}function xg(N,B,G,se){var Ne;for(Ne=3;0<Ne;--Ne)Nl(N,B+=4,G,se)}function Cl(N,B,G,se,Ne,Te,Fe,Ve){for(Te=2*Te+1;0<Ne--;){if(zd(N,B,G,Te,Fe))if(hh(N,B,G,Ve))ou(N,B,G);else{var qe=N,Je=B,pt=G,kt=qe[Je-2*pt],Ze=qe[Je-pt],yt=qe[Je+0],Et=qe[Je+pt],Jt=qe[Je+2*pt],Tt=27*(ir=H3[1020+3*(yt-Ze)+H3[1020+kt-Et]])+63>>7,rr=18*ir+63>>7,ir=9*ir+63>>7;qe[Je-3*pt]=_c[255+qe[Je-3*pt]+ir],qe[Je-2*pt]=_c[255+kt+rr],qe[Je-pt]=_c[255+Ze+Tt],qe[Je+0]=_c[255+yt-Tt],qe[Je+pt]=_c[255+Et-rr],qe[Je+2*pt]=_c[255+Jt-ir]}B+=se}}function lu(N,B,G,se,Ne,Te,Fe,Ve){for(Te=2*Te+1;0<Ne--;){if(zd(N,B,G,Te,Fe))if(hh(N,B,G,Ve))ou(N,B,G);else{var qe=N,Je=B,pt=G,kt=qe[Je-pt],Ze=qe[Je+0],yt=qe[Je+pt],Et=Qw[112+(4+(Jt=3*(Ze-kt))>>3)],Jt=Qw[112+(Jt+3>>3)],Tt=Et+1>>1;qe[Je-2*pt]=_c[255+qe[Je-2*pt]+Tt],qe[Je-pt]=_c[255+kt+Jt],qe[Je+0]=_c[255+Ze-Et],qe[Je+pt]=_c[255+yt-Tt]}B+=se}}function mh(N,B,G,se,Ne,Te){Cl(N,B,G,1,16,se,Ne,Te)}function cu(N,B,G,se,Ne,Te){Cl(N,B,1,G,16,se,Ne,Te)}function fm(N,B,G,se,Ne,Te){var Fe;for(Fe=3;0<Fe;--Fe)lu(N,B+=4*G,G,1,16,se,Ne,Te)}function Q(N,B,G,se,Ne,Te){var Fe;for(Fe=3;0<Fe;--Fe)lu(N,B+=4,1,G,16,se,Ne,Te)}function we(N,B,G,se,Ne,Te,Fe,Ve){Cl(N,B,Ne,1,8,Te,Fe,Ve),Cl(G,se,Ne,1,8,Te,Fe,Ve)}function Ye(N,B,G,se,Ne,Te,Fe,Ve){Cl(N,B,1,Ne,8,Te,Fe,Ve),Cl(G,se,1,Ne,8,Te,Fe,Ve)}function ft(N,B,G,se,Ne,Te,Fe,Ve){lu(N,B+4*Ne,Ne,1,8,Te,Fe,Ve),lu(G,se+4*Ne,Ne,1,8,Te,Fe,Ve)}function Nt(N,B,G,se,Ne,Te,Fe,Ve){lu(N,B+4,1,Ne,8,Te,Fe,Ve),lu(G,se+4,1,Ne,8,Te,Fe,Ve)}function tr(){this.ba=new nt,this.ec=[],this.cc=[],this.Mc=[],this.Dc=this.Nc=this.dc=this.fc=0,this.Oa=new It,this.memory=0,this.Ib="OutputFunc",this.Jb="OutputAlphaFunc",this.Nd="OutputRowFunc"}function lr(){this.data=[],this.offset=this.kd=this.ha=this.w=0,this.na=[],this.xa=this.gb=this.Ja=this.Sa=this.P=0}function Fr(){this.nc=this.Ea=this.b=this.hc=0,this.K=[],this.w=0}function Qr(){this.ua=0,this.Wa=new z,this.vb=new z,this.md=this.xc=this.wc=0,this.vc=[],this.Wb=0,this.Ya=new he,this.yc=new F}function rn(){this.xb=this.a=0,this.l=new Tn,this.ca=new nt,this.V=[],this.Ba=0,this.Ta=[],this.Ua=0,this.m=new H,this.Pb=0,this.wd=new H,this.Ma=this.$=this.C=this.i=this.c=this.xd=0,this.s=new Qr,this.ab=0,this.gc=i(4,Fr),this.Oc=0}function An(){this.Lc=this.Z=this.$a=this.i=this.c=0,this.l=new Tn,this.ic=0,this.ca=[],this.tb=0,this.qd=null,this.rd=0}function On(N,B,G,se,Ne,Te,Fe){for(N=N==null?0:N[B+0],B=0;B<Fe;++B)Ne[Te+B]=N+G[se+B]&255,N=Ne[Te+B]}function na(N,B,G,se,Ne,Te,Fe){var Ve;if(N==null)On(null,null,G,se,Ne,Te,Fe);else for(Ve=0;Ve<Fe;++Ve)Ne[Te+Ve]=N[B+Ve]+G[se+Ve]&255}function bs(N,B,G,se,Ne,Te,Fe){if(N==null)On(null,null,G,se,Ne,Te,Fe);else{var Ve,qe=N[B+0],Je=qe,pt=qe;for(Ve=0;Ve<Fe;++Ve)Je=pt+(qe=N[B+Ve])-Je,pt=G[se+Ve]+(-256&Je?0>Je?0:255:Je)&255,Je=qe,Ne[Te+Ve]=pt}}function fa(N,B,G,se){var Ne=B.width,Te=B.o;if(e(N!=null&&B!=null),0>G||0>=se||G+se>Te)return null;if(!N.Cc){if(N.ga==null){var Fe;if(N.ga=new An,(Fe=N.ga==null)||(Fe=B.width*B.o,e(N.Gb.length==0),N.Gb=s(Fe),N.Uc=0,N.Gb==null?Fe=0:(N.mb=N.Gb,N.nb=N.Uc,N.rc=null,Fe=1),Fe=!Fe),!Fe){Fe=N.ga;var Ve=N.Fa,qe=N.P,Je=N.qc,pt=N.mb,kt=N.nb,Ze=qe+1,yt=Je-1,Et=Fe.l;if(e(Ve!=null&&pt!=null&&B!=null),Ch[0]=null,Ch[1]=On,Ch[2]=na,Ch[3]=bs,Fe.ca=pt,Fe.tb=kt,Fe.c=B.width,Fe.i=B.height,e(0<Fe.c&&0<Fe.i),1>=Je)B=0;else if(Fe.$a=3&Ve[qe+0],Fe.Z=Ve[qe+0]>>2&3,Fe.Lc=Ve[qe+0]>>4&3,qe=Ve[qe+0]>>6&3,0>Fe.$a||1<Fe.$a||4<=Fe.Z||1<Fe.Lc||qe)B=0;else if(Et.put=ae,Et.ac=q,Et.bc=ee,Et.ma=Fe,Et.width=B.width,Et.height=B.height,Et.Da=B.Da,Et.v=B.v,Et.va=B.va,Et.j=B.j,Et.o=B.o,Fe.$a)e:{e(Fe.$a==1),B=We();t:for(;;){if(B==null){B=0;break e}if(e(Fe!=null),Fe.mc=B,B.c=Fe.c,B.i=Fe.i,B.l=Fe.l,B.l.ma=Fe,B.l.width=Fe.c,B.l.height=Fe.i,B.a=0,ne(B.m,Ve,Ze,yt),!At(Fe.c,Fe.i,1,B,null)||(B.ab==1&&B.gc[0].hc==3&&pe(B.s)?(Fe.ic=1,Ve=B.c*B.i,B.Ta=null,B.Ua=0,B.V=s(Ve),B.Ba=0,B.V==null?(B.a=1,B=0):B=1):(Fe.ic=0,B=vt(B,Fe.c)),!B))break t;B=1;break e}Fe.mc=null,B=0}else B=yt>=Fe.c*Fe.i;Fe=!B}if(Fe)return null;N.ga.Lc!=1?N.Ga=0:se=Te-G}e(N.ga!=null),e(G+se<=Te);e:{if(B=(Ve=N.ga).c,Te=Ve.l.o,Ve.$a==0){if(Ze=N.rc,yt=N.Vc,Et=N.Fa,qe=N.P+1+G*B,Je=N.mb,pt=N.nb+G*B,e(qe<=N.P+N.qc),Ve.Z!=0)for(e(Ch[Ve.Z]!=null),Fe=0;Fe<se;++Fe)Ch[Ve.Z](Ze,yt,Et,qe,Je,pt,B),Ze=Je,yt=pt,pt+=B,qe+=B;else for(Fe=0;Fe<se;++Fe)n(Je,pt,Et,qe,B),Ze=Je,yt=pt,pt+=B,qe+=B;N.rc=Ze,N.Vc=yt}else{if(e(Ve.mc!=null),B=G+se,e((Fe=Ve.mc)!=null),e(B<=Fe.i),Fe.C>=B)B=1;else if(Ve.ic||Wl(),Ve.ic){Ve=Fe.V,Ze=Fe.Ba,yt=Fe.c;var Jt=Fe.i,Tt=(Et=1,qe=Fe.$/yt,Je=Fe.$%yt,pt=Fe.m,kt=Fe.s,Fe.$),rr=yt*Jt,ir=yt*B,hr=kt.wc,dr=Tt<ir?te(kt,Je,qe):null;e(Tt<=rr),e(B<=Jt),e(pe(kt));t:for(;;){for(;!pt.h&&Tt<ir;){if(Je&hr||(dr=te(kt,Je,qe)),e(dr!=null),W(pt),256>(Jt=tt(dr.G[0],dr.H[0],pt)))Ve[Ze+Tt]=Jt,++Tt,++Je>=yt&&(Je=0,++qe<=B&&!(qe%16)&&Se(Fe,qe));else{if(!(280>Jt)){Et=0;break t}Jt=_e(Jt-256,pt);var qr,Mr=tt(dr.G[4],dr.H[4],pt);if(W(pt),!(Tt>=(Mr=Be(yt,Mr=_e(Mr,pt)))&&rr-Tt>=Jt)){Et=0;break t}for(qr=0;qr<Jt;++qr)Ve[Ze+Tt+qr]=Ve[Ze+Tt+qr-Mr];for(Tt+=Jt,Je+=Jt;Je>=yt;)Je-=yt,++qe<=B&&!(qe%16)&&Se(Fe,qe);Tt<ir&&Je&hr&&(dr=te(kt,Je,qe))}e(pt.h==M(pt))}Se(Fe,qe>B?B:qe);break t}!Et||pt.h&&Tt<rr?(Et=0,Fe.a=pt.h?5:3):Fe.$=Tt,B=Et}else B=Re(Fe,Fe.V,Fe.Ba,Fe.c,Fe.i,B,Vt);if(!B){se=0;break e}}G+se>=Te&&(N.Cc=1),se=1}if(!se)return null;if(N.Cc&&((se=N.ga)!=null&&(se.mc=null),N.ga=null,0<N.Ga))return alert("todo:WebPDequantizeLevels"),null}return N.nb+G*Ne}function Rs(N,B,G,se,Ne,Te){for(;0<Ne--;){var Fe,Ve=N,qe=B+(G?1:0),Je=N,pt=B+(G?0:3);for(Fe=0;Fe<se;++Fe){var kt=Je[pt+4*Fe];kt!=255&&(kt*=32897,Ve[qe+4*Fe+0]=Ve[qe+4*Fe+0]*kt>>23,Ve[qe+4*Fe+1]=Ve[qe+4*Fe+1]*kt>>23,Ve[qe+4*Fe+2]=Ve[qe+4*Fe+2]*kt>>23)}B+=Te}}function ws(N,B,G,se,Ne){for(;0<se--;){var Te;for(Te=0;Te<G;++Te){var Fe=N[B+2*Te+0],Ve=15&(Je=N[B+2*Te+1]),qe=4369*Ve,Je=(240&Je|Je>>4)*qe>>16;N[B+2*Te+0]=(240&Fe|Fe>>4)*qe>>16&240|(15&Fe|Fe<<4)*qe>>16>>4&15,N[B+2*Te+1]=240&Je|Ve}B+=Ne}}function Ms(N,B,G,se,Ne,Te,Fe,Ve){var qe,Je,pt=255;for(Je=0;Je<Ne;++Je){for(qe=0;qe<se;++qe){var kt=N[B+qe];Te[Fe+4*qe]=kt,pt&=kt}B+=G,Fe+=Ve}return pt!=255}function Ns(N,B,G,se,Ne){var Te;for(Te=0;Te<Ne;++Te)G[se+Te]=N[B+Te]>>8}function Wl(){f1=Rs,Q8=ws,V8=Ms,H8=Ns}function uu(N,B,G){S[N]=function(se,Ne,Te,Fe,Ve,qe,Je,pt,kt,Ze,yt,Et,Jt,Tt,rr,ir,hr){var dr,qr=hr-1>>1,Mr=Ve[qe+0]|Je[pt+0]<<16,yn=kt[Ze+0]|yt[Et+0]<<16;e(se!=null);var Hr=3*Mr+yn+131074>>2;for(B(se[Ne+0],255&Hr,Hr>>16,Jt,Tt),Te!=null&&(Hr=3*yn+Mr+131074>>2,B(Te[Fe+0],255&Hr,Hr>>16,rr,ir)),dr=1;dr<=qr;++dr){var Qn=Ve[qe+dr]|Je[pt+dr]<<16,_i=kt[Ze+dr]|yt[Et+dr]<<16,bn=Mr+Qn+yn+_i+524296,$r=bn+2*(Qn+yn)>>3;Hr=$r+Mr>>1,Mr=(bn=bn+2*(Mr+_i)>>3)+Qn>>1,B(se[Ne+2*dr-1],255&Hr,Hr>>16,Jt,Tt+(2*dr-1)*G),B(se[Ne+2*dr-0],255&Mr,Mr>>16,Jt,Tt+(2*dr-0)*G),Te!=null&&(Hr=bn+yn>>1,Mr=$r+_i>>1,B(Te[Fe+2*dr-1],255&Hr,Hr>>16,rr,ir+(2*dr-1)*G),B(Te[Fe+2*dr+0],255&Mr,Mr>>16,rr,ir+(2*dr+0)*G)),Mr=Qn,yn=_i}1&hr||(Hr=3*Mr+yn+131074>>2,B(se[Ne+hr-1],255&Hr,Hr>>16,Jt,Tt+(hr-1)*G),Te!=null&&(Hr=3*yn+Mr+131074>>2,B(Te[Fe+hr-1],255&Hr,Hr>>16,rr,ir+(hr-1)*G)))}}function du(){hu[Vw]=wce,hu[Hw]=eM,hu[W8]=Nce,hu[$w]=tM,hu[Kw]=rM,hu[$3]=nM,hu[X8]=Cce,hu[K3]=eM,hu[G3]=tM,hu[Gw]=rM,hu[q3]=nM}function C(N){return N&-16384?0>N?0:255:N>>_ce}function X(N,B){return C((19077*N>>8)+(26149*B>>8)-14234)}function de(N,B,G){return C((19077*N>>8)-(6419*B>>8)-(13320*G>>8)+8708)}function $e(N,B){return C((19077*N>>8)+(33050*B>>8)-17685)}function _t(N,B,G,se,Ne){se[Ne+0]=X(N,G),se[Ne+1]=de(N,B,G),se[Ne+2]=$e(N,B)}function Mt(N,B,G,se,Ne){se[Ne+0]=$e(N,B),se[Ne+1]=de(N,B,G),se[Ne+2]=X(N,G)}function xr(N,B,G,se,Ne){var Te=de(N,B,G);B=Te<<3&224|$e(N,B)>>3,se[Ne+0]=248&X(N,G)|Te>>5,se[Ne+1]=B}function Un(N,B,G,se,Ne){var Te=240&$e(N,B)|15;se[Ne+0]=240&X(N,G)|de(N,B,G)>>4,se[Ne+1]=Te}function Cs(N,B,G,se,Ne){se[Ne+0]=255,_t(N,B,G,se,Ne+1)}function In(N,B,G,se,Ne){Mt(N,B,G,se,Ne),se[Ne+3]=255}function Yn(N,B,G,se,Ne){_t(N,B,G,se,Ne),se[Ne+3]=255}function La(N,B,G){S[N]=function(se,Ne,Te,Fe,Ve,qe,Je,pt,kt){for(var Ze=pt+(-2&kt)*G;pt!=Ze;)B(se[Ne+0],Te[Fe+0],Ve[qe+0],Je,pt),B(se[Ne+1],Te[Fe+0],Ve[qe+0],Je,pt+G),Ne+=2,++Fe,++qe,pt+=2*G;1&kt&&B(se[Ne+0],Te[Fe+0],Ve[qe+0],Je,pt)}}function wc(N,B,G){return G==0?N==0?B==0?6:5:B==0?4:0:G}function Wo(N,B,G,se,Ne){switch(N>>>30){case 3:mm(B,G,se,Ne,0);break;case 2:fu(B,G,se,Ne);break;case 1:la(B,G,se,Ne)}}function wo(N,B){var G,se,Ne=B.M,Te=B.Nb,Fe=N.oc,Ve=N.pc+40,qe=N.oc,Je=N.pc+584,pt=N.oc,kt=N.pc+600;for(G=0;16>G;++G)Fe[Ve+32*G-1]=129;for(G=0;8>G;++G)qe[Je+32*G-1]=129,pt[kt+32*G-1]=129;for(0<Ne?Fe[Ve-1-32]=qe[Je-1-32]=pt[kt-1-32]=129:(a(Fe,Ve-32-1,127,21),a(qe,Je-32-1,127,9),a(pt,kt-32-1,127,9)),se=0;se<N.za;++se){var Ze=B.ya[B.aa+se];if(0<se){for(G=-1;16>G;++G)n(Fe,Ve+32*G-4,Fe,Ve+32*G+12,4);for(G=-1;8>G;++G)n(qe,Je+32*G-4,qe,Je+32*G+4,4),n(pt,kt+32*G-4,pt,kt+32*G+4,4)}var yt=N.Gd,Et=N.Hd+se,Jt=Ze.ad,Tt=Ze.Hc;if(0<Ne&&(n(Fe,Ve-32,yt[Et].y,0,16),n(qe,Je-32,yt[Et].f,0,8),n(pt,kt-32,yt[Et].ea,0,8)),Ze.Za){var rr=Fe,ir=Ve-32+16;for(0<Ne&&(se>=N.za-1?a(rr,ir,yt[Et].y[15],4):n(rr,ir,yt[Et+1].y,0,4)),G=0;4>G;G++)rr[ir+128+G]=rr[ir+256+G]=rr[ir+384+G]=rr[ir+0+G];for(G=0;16>G;++G,Tt<<=2)rr=Fe,ir=Ve+sM[G],ad[Ze.Ob[G]](rr,ir),Wo(Tt,Jt,16*+G,rr,ir)}else if(rr=wc(se,Ne,Ze.Ob[0]),Nh[rr](Fe,Ve),Tt!=0)for(G=0;16>G;++G,Tt<<=2)Wo(Tt,Jt,16*+G,Fe,Ve+sM[G]);for(G=Ze.Gc,rr=wc(se,Ne,Ze.Dd),$f[rr](qe,Je),$f[rr](pt,kt),Tt=Jt,rr=qe,ir=Je,255&(Ze=0|G)&&(170&Ze?Jd(Tt,256,rr,ir):ka(Tt,256,rr,ir)),Ze=pt,Tt=kt,255&(G>>=8)&&(170&G?Jd(Jt,320,Ze,Tt):ka(Jt,320,Ze,Tt)),Ne<N.Ub-1&&(n(yt[Et].y,0,Fe,Ve+480,16),n(yt[Et].f,0,qe,Je+224,8),n(yt[Et].ea,0,pt,kt+224,8)),G=8*Te*N.B,yt=N.sa,Et=N.ta+16*se+16*Te*N.R,Jt=N.qa,Ze=N.ra+8*se+G,Tt=N.Ha,rr=N.Ia+8*se+G,G=0;16>G;++G)n(yt,Et+G*N.R,Fe,Ve+32*G,16);for(G=0;8>G;++G)n(Jt,Ze+G*N.B,qe,Je+32*G,8),n(Tt,rr+G*N.B,pt,kt+32*G,8)}}function nd(N,B,G,se,Ne,Te,Fe,Ve,qe){var Je=[0],pt=[0],kt=0,Ze=qe!=null?qe.kd:0,yt=qe??new lr;if(N==null||12>G)return 7;yt.data=N,yt.w=B,yt.ha=G,B=[B],G=[G],yt.gb=[yt.gb];e:{var Et=B,Jt=G,Tt=yt.gb;if(e(N!=null),e(Jt!=null),e(Tt!=null),Tt[0]=0,12<=Jt[0]&&!r(N,Et[0],"RIFF")){if(r(N,Et[0]+8,"WEBP")){Tt=3;break e}var rr=ie(N,Et[0]+4);if(12>rr||4294967286<rr){Tt=3;break e}if(Ze&&rr>Jt[0]-8){Tt=7;break e}Tt[0]=rr,Et[0]+=12,Jt[0]-=12}Tt=0}if(Tt!=0)return Tt;for(rr=0<yt.gb[0],G=G[0];;){e:{var ir=N;Jt=B,Tt=G;var hr=Je,dr=pt,qr=Et=[0];if((Hr=kt=[kt])[0]=0,8>Tt[0])Tt=7;else{if(!r(ir,Jt[0],"VP8X")){if(ie(ir,Jt[0]+4)!=10){Tt=3;break e}if(18>Tt[0]){Tt=7;break e}var Mr=ie(ir,Jt[0]+8),yn=1+Ge(ir,Jt[0]+12);if(2147483648<=yn*(ir=1+Ge(ir,Jt[0]+15))){Tt=3;break e}qr!=null&&(qr[0]=Mr),hr!=null&&(hr[0]=yn),dr!=null&&(dr[0]=ir),Jt[0]+=18,Tt[0]-=18,Hr[0]=1}Tt=0}}if(kt=kt[0],Et=Et[0],Tt!=0)return Tt;if(Jt=!!(2&Et),!rr&&kt)return 3;if(Te!=null&&(Te[0]=!!(16&Et)),Fe!=null&&(Fe[0]=Jt),Ve!=null&&(Ve[0]=0),Fe=Je[0],Et=pt[0],kt&&Jt&&qe==null){Tt=0;break}if(4>G){Tt=7;break}if(rr&&kt||!rr&&!kt&&!r(N,B[0],"ALPH")){G=[G],yt.na=[yt.na],yt.P=[yt.P],yt.Sa=[yt.Sa];e:{Mr=N,Tt=B,rr=G;var Hr=yt.gb;hr=yt.na,dr=yt.P,qr=yt.Sa,yn=22,e(Mr!=null),e(rr!=null),ir=Tt[0];var Qn=rr[0];for(e(hr!=null),e(qr!=null),hr[0]=null,dr[0]=null,qr[0]=0;;){if(Tt[0]=ir,rr[0]=Qn,8>Qn){Tt=7;break e}var _i=ie(Mr,ir+4);if(4294967286<_i){Tt=3;break e}var bn=8+_i+1&-2;if(yn+=bn,0<Hr&&yn>Hr){Tt=3;break e}if(!r(Mr,ir,"VP8 ")||!r(Mr,ir,"VP8L")){Tt=0;break e}if(Qn[0]<bn){Tt=7;break e}r(Mr,ir,"ALPH")||(hr[0]=Mr,dr[0]=ir+8,qr[0]=_i),ir+=bn,Qn-=bn}}if(G=G[0],yt.na=yt.na[0],yt.P=yt.P[0],yt.Sa=yt.Sa[0],Tt!=0)break}G=[G],yt.Ja=[yt.Ja],yt.xa=[yt.xa];e:if(Hr=N,Tt=B,rr=G,hr=yt.gb[0],dr=yt.Ja,qr=yt.xa,Mr=Tt[0],ir=!r(Hr,Mr,"VP8 "),yn=!r(Hr,Mr,"VP8L"),e(Hr!=null),e(rr!=null),e(dr!=null),e(qr!=null),8>rr[0])Tt=7;else{if(ir||yn){if(Hr=ie(Hr,Mr+4),12<=hr&&Hr>hr-12){Tt=3;break e}if(Ze&&Hr>rr[0]-8){Tt=7;break e}dr[0]=Hr,Tt[0]+=8,rr[0]-=8,qr[0]=yn}else qr[0]=5<=rr[0]&&Hr[Mr+0]==47&&!(Hr[Mr+4]>>5),dr[0]=rr[0];Tt=0}if(G=G[0],yt.Ja=yt.Ja[0],yt.xa=yt.xa[0],B=B[0],Tt!=0)break;if(4294967286<yt.Ja)return 3;if(Ve==null||Jt||(Ve[0]=yt.xa?2:1),Fe=[Fe],Et=[Et],yt.xa){if(5>G){Tt=7;break}Ve=Fe,Ze=Et,Jt=Te,N==null||5>G?N=0:5<=G&&N[B+0]==47&&!(N[B+4]>>5)?(rr=[0],Hr=[0],hr=[0],ne(dr=new H,N,B,G),be(dr,rr,Hr,hr)?(Ve!=null&&(Ve[0]=rr[0]),Ze!=null&&(Ze[0]=Hr[0]),Jt!=null&&(Jt[0]=hr[0]),N=1):N=0):N=0}else{if(10>G){Tt=7;break}Ve=Et,N==null||10>G||!St(N,B+3,G-3)?N=0:(Ze=N[B+0]|N[B+1]<<8|N[B+2]<<16,Jt=16383&(N[B+7]<<8|N[B+6]),N=16383&(N[B+9]<<8|N[B+8]),1&Ze||3<(Ze>>1&7)||!(Ze>>4&1)||Ze>>5>=yt.Ja||!Jt||!N?N=0:(Fe&&(Fe[0]=Jt),Ve&&(Ve[0]=N),N=1))}if(!N||(Fe=Fe[0],Et=Et[0],kt&&(Je[0]!=Fe||pt[0]!=Et)))return 3;qe!=null&&(qe[0]=yt,qe.offset=B-qe.w,e(4294967286>B-qe.w),e(qe.offset==qe.ha-G));break}return Tt==0||Tt==7&&kt&&qe==null?(Te!=null&&(Te[0]|=yt.na!=null&&0<yt.na.length),se!=null&&(se[0]=Fe),Ne!=null&&(Ne[0]=Et),0):Tt}function a1(N,B,G){var se=B.width,Ne=B.height,Te=0,Fe=0,Ve=se,qe=Ne;if(B.Da=N!=null&&0<N.Da,B.Da&&(Ve=N.cd,qe=N.bd,Te=N.v,Fe=N.j,11>G||(Te&=-2,Fe&=-2),0>Te||0>Fe||0>=Ve||0>=qe||Te+Ve>se||Fe+qe>Ne))return 0;if(B.v=Te,B.j=Fe,B.va=Te+Ve,B.o=Fe+qe,B.U=Ve,B.T=qe,B.da=N!=null&&0<N.da,B.da){if(!Ae(Ve,qe,G=[N.ib],Te=[N.hb]))return 0;B.ib=G[0],B.hb=Te[0]}return B.ob=N!=null&&N.ob,B.Kb=N==null||!N.Sd,B.da&&(B.ob=B.ib<3*se/4&&B.hb<3*Ne/4,B.Kb=0),1}function s1(N){if(N==null)return 2;if(11>N.S){var B=N.f.RGBA;B.fb+=(N.height-1)*B.A,B.A=-B.A}else B=N.f.kb,N=N.height,B.O+=(N-1)*B.fa,B.fa=-B.fa,B.N+=(N-1>>1)*B.Ab,B.Ab=-B.Ab,B.W+=(N-1>>1)*B.Db,B.Db=-B.Db,B.F!=null&&(B.J+=(N-1)*B.lb,B.lb=-B.lb);return 0}function ph(N,B,G,se){if(se==null||0>=N||0>=B)return 2;if(G!=null){if(G.Da){var Ne=G.cd,Te=G.bd,Fe=-2&G.v,Ve=-2&G.j;if(0>Fe||0>Ve||0>=Ne||0>=Te||Fe+Ne>N||Ve+Te>B)return 2;N=Ne,B=Te}if(G.da){if(!Ae(N,B,Ne=[G.ib],Te=[G.hb]))return 2;N=Ne[0],B=Te[0]}}se.width=N,se.height=B;e:{var qe=se.width,Je=se.height;if(N=se.S,0>=qe||0>=Je||!(N>=Vw&&13>N))N=2;else{if(0>=se.Rd&&se.sd==null){Fe=Te=Ne=B=0;var pt=(Ve=qe*iM[N])*Je;if(11>N||(Te=(Je+1)/2*(B=(qe+1)/2),N==12&&(Fe=(Ne=qe)*Je)),(Je=s(pt+2*Te+Fe))==null){N=1;break e}se.sd=Je,11>N?((qe=se.f.RGBA).eb=Je,qe.fb=0,qe.A=Ve,qe.size=pt):((qe=se.f.kb).y=Je,qe.O=0,qe.fa=Ve,qe.Fd=pt,qe.f=Je,qe.N=0+pt,qe.Ab=B,qe.Cd=Te,qe.ea=Je,qe.W=0+pt+Te,qe.Db=B,qe.Ed=Te,N==12&&(qe.F=Je,qe.J=0+pt+2*Te),qe.Tc=Fe,qe.lb=Ne)}if(B=1,Ne=se.S,Te=se.width,Fe=se.height,Ne>=Vw&&13>Ne)if(11>Ne)N=se.f.RGBA,B&=(Ve=Math.abs(N.A))*(Fe-1)+Te<=N.size,B&=Ve>=Te*iM[Ne],B&=N.eb!=null;else{N=se.f.kb,Ve=(Te+1)/2,pt=(Fe+1)/2,qe=Math.abs(N.fa),Je=Math.abs(N.Ab);var kt=Math.abs(N.Db),Ze=Math.abs(N.lb),yt=Ze*(Fe-1)+Te;B&=qe*(Fe-1)+Te<=N.Fd,B&=Je*(pt-1)+Ve<=N.Cd,B=(B&=kt*(pt-1)+Ve<=N.Ed)&qe>=Te&Je>=Ve&kt>=Ve,B&=N.y!=null,B&=N.f!=null,B&=N.ea!=null,Ne==12&&(B&=Ze>=Te,B&=yt<=N.Tc,B&=N.F!=null)}else B=0;N=B?0:2}}return N!=0||G!=null&&G.fd&&(N=s1(se)),N}var Am=64,Nc=[0,1,3,7,15,31,63,127,255,511,1023,2047,4095,8191,16383,32767,65535,131071,262143,524287,1048575,2097151,4194303,8388607,16777215],Cc=24,gh=32,Vf=8,xh=[0,0,1,1,2,2,2,2,3,3,3,3,3,3,3,3,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7];st("Predictor0","PredictorAdd0"),S.Predictor0=function(){return 4278190080},S.Predictor1=function(N){return N},S.Predictor2=function(N,B,G){return B[G+0]},S.Predictor3=function(N,B,G){return B[G+1]},S.Predictor4=function(N,B,G){return B[G-1]},S.Predictor5=function(N,B,G){return De(De(N,B[G+1]),B[G+0])},S.Predictor6=function(N,B,G){return De(N,B[G-1])},S.Predictor7=function(N,B,G){return De(N,B[G+0])},S.Predictor8=function(N,B,G){return De(B[G-1],B[G+0])},S.Predictor9=function(N,B,G){return De(B[G+0],B[G+1])},S.Predictor10=function(N,B,G){return De(De(N,B[G-1]),De(B[G+0],B[G+1]))},S.Predictor11=function(N,B,G){var se=B[G+0];return 0>=ce(se>>24&255,N>>24&255,(B=B[G-1])>>24&255)+ce(se>>16&255,N>>16&255,B>>16&255)+ce(se>>8&255,N>>8&255,B>>8&255)+ce(255&se,255&N,255&B)?se:N},S.Predictor12=function(N,B,G){var se=B[G+0];return(it((N>>24&255)+(se>>24&255)-((B=B[G-1])>>24&255))<<24|it((N>>16&255)+(se>>16&255)-(B>>16&255))<<16|it((N>>8&255)+(se>>8&255)-(B>>8&255))<<8|it((255&N)+(255&se)-(255&B)))>>>0},S.Predictor13=function(N,B,G){var se=B[G-1];return(dt((N=De(N,B[G+0]))>>24&255,se>>24&255)<<24|dt(N>>16&255,se>>16&255)<<16|dt(N>>8&255,se>>8&255)<<8|dt(255&N,255&se))>>>0};var i1=S.PredictorAdd0;S.PredictorAdd1=oe,st("Predictor2","PredictorAdd2"),st("Predictor3","PredictorAdd3"),st("Predictor4","PredictorAdd4"),st("Predictor5","PredictorAdd5"),st("Predictor6","PredictorAdd6"),st("Predictor7","PredictorAdd7"),st("Predictor8","PredictorAdd8"),st("Predictor9","PredictorAdd9"),st("Predictor10","PredictorAdd10"),st("Predictor11","PredictorAdd11"),st("Predictor12","PredictorAdd12"),st("Predictor13","PredictorAdd13");var vg=S.PredictorAdd2;le("ColorIndexInverseTransform","MapARGB","32b",function(N){return N>>8&255},function(N){return N}),le("VP8LColorIndexInverseTransformAlpha","MapAlpha","8b",function(N){return N},function(N){return N>>8&255});var Xs,Lw=S.ColorIndexInverseTransform,Xd=S.MapARGB,Yd=S.VP8LColorIndexInverseTransformAlpha,o1=S.MapAlpha,l1=S.VP8LPredictorsAdd=[];l1.length=16,(S.VP8LPredictors=[]).length=16,(S.VP8LPredictorsAdd_C=[]).length=16,(S.VP8LPredictors_C=[]).length=16;var c1,u1,vh,yh,bh,hm,wh,mm,fu,Jd,la,ka,Ys,Ci,Hf,d1,yg,Uw,O8,D8,R8,M8,L8,U8,f1,Q8,V8,H8,$8=s(511),K8=s(2041),G8=s(225),q8=s(767),z8=0,H3=K8,Qw=G8,_c=q8,Au=$8,Vw=0,Hw=1,W8=2,$w=3,Kw=4,$3=5,X8=6,K3=7,G3=8,Gw=9,q3=10,lce=[2,3,7],cce=[3,3,11],Y8=[280,256,256,256,40],uce=[0,1,1,1,0],dce=[17,18,0,1,2,3,4,5,16,6,7,8,9,10,11,12,13,14,15],fce=[24,7,23,25,40,6,39,41,22,26,38,42,56,5,55,57,21,27,54,58,37,43,72,4,71,73,20,28,53,59,70,74,36,44,88,69,75,52,60,3,87,89,19,29,86,90,35,45,68,76,85,91,51,61,104,2,103,105,18,30,102,106,34,46,84,92,67,77,101,107,50,62,120,1,119,121,83,93,17,31,100,108,66,78,118,122,33,47,117,123,49,63,99,109,82,94,0,116,124,65,79,16,32,98,110,48,115,125,81,95,64,114,126,97,111,80,113,127,96,112],Ace=[2954,2956,2958,2962,2970,2986,3018,3082,3212,3468,3980,5004],hce=8,z3=[4,5,6,7,8,9,10,10,11,12,13,14,15,16,17,17,18,19,20,20,21,21,22,22,23,23,24,25,25,26,27,28,29,30,31,32,33,34,35,36,37,37,38,39,40,41,42,43,44,45,46,46,47,48,49,50,51,52,53,54,55,56,57,58,59,60,61,62,63,64,65,66,67,68,69,70,71,72,73,74,75,76,76,77,78,79,80,81,82,83,84,85,86,87,88,89,91,93,95,96,98,100,101,102,104,106,108,110,112,114,116,118,122,124,126,128,130,132,134,136,138,140,143,145,148,151,154,157],W3=[4,5,6,7,8,9,10,11,12,13,14,15,16,17,18,19,20,21,22,23,24,25,26,27,28,29,30,31,32,33,34,35,36,37,38,39,40,41,42,43,44,45,46,47,48,49,50,51,52,53,54,55,56,57,58,60,62,64,66,68,70,72,74,76,78,80,82,84,86,88,90,92,94,96,98,100,102,104,106,108,110,112,114,116,119,122,125,128,131,134,137,140,143,146,149,152,155,158,161,164,167,170,173,177,181,185,189,193,197,201,205,209,213,217,221,225,229,234,239,245,249,254,259,264,269,274,279,284],A1=null,mce=[[173,148,140,0],[176,155,140,135,0],[180,157,141,134,130,0],[254,254,243,230,196,177,153,140,133,130,129,0]],pce=[0,1,4,8,5,2,3,6,9,12,13,10,7,11,14,15],J8=[-0,1,-1,2,-2,3,4,6,-3,5,-4,-5,-6,7,-7,8,-8,-9],gce=[[[[128,128,128,128,128,128,128,128,128,128,128],[128,128,128,128,128,128,128,128,128,128,128],[128,128,128,128,128,128,128,128,128,128,128]],[[253,136,254,255,228,219,128,128,128,128,128],[189,129,242,255,227,213,255,219,128,128,128],[106,126,227,252,214,209,255,255,128,128,128]],[[1,98,248,255,236,226,255,255,128,128,128],[181,133,238,254,221,234,255,154,128,128,128],[78,134,202,247,198,180,255,219,128,128,128]],[[1,185,249,255,243,255,128,128,128,128,128],[184,150,247,255,236,224,128,128,128,128,128],[77,110,216,255,236,230,128,128,128,128,128]],[[1,101,251,255,241,255,128,128,128,128,128],[170,139,241,252,236,209,255,255,128,128,128],[37,116,196,243,228,255,255,255,128,128,128]],[[1,204,254,255,245,255,128,128,128,128,128],[207,160,250,255,238,128,128,128,128,128,128],[102,103,231,255,211,171,128,128,128,128,128]],[[1,152,252,255,240,255,128,128,128,128,128],[177,135,243,255,234,225,128,128,128,128,128],[80,129,211,255,194,224,128,128,128,128,128]],[[1,1,255,128,128,128,128,128,128,128,128],[246,1,255,128,128,128,128,128,128,128,128],[255,128,128,128,128,128,128,128,128,128,128]]],[[[198,35,237,223,193,187,162,160,145,155,62],[131,45,198,221,172,176,220,157,252,221,1],[68,47,146,208,149,167,221,162,255,223,128]],[[1,149,241,255,221,224,255,255,128,128,128],[184,141,234,253,222,220,255,199,128,128,128],[81,99,181,242,176,190,249,202,255,255,128]],[[1,129,232,253,214,197,242,196,255,255,128],[99,121,210,250,201,198,255,202,128,128,128],[23,91,163,242,170,187,247,210,255,255,128]],[[1,200,246,255,234,255,128,128,128,128,128],[109,178,241,255,231,245,255,255,128,128,128],[44,130,201,253,205,192,255,255,128,128,128]],[[1,132,239,251,219,209,255,165,128,128,128],[94,136,225,251,218,190,255,255,128,128,128],[22,100,174,245,186,161,255,199,128,128,128]],[[1,182,249,255,232,235,128,128,128,128,128],[124,143,241,255,227,234,128,128,128,128,128],[35,77,181,251,193,211,255,205,128,128,128]],[[1,157,247,255,236,231,255,255,128,128,128],[121,141,235,255,225,227,255,255,128,128,128],[45,99,188,251,195,217,255,224,128,128,128]],[[1,1,251,255,213,255,128,128,128,128,128],[203,1,248,255,255,128,128,128,128,128,128],[137,1,177,255,224,255,128,128,128,128,128]]],[[[253,9,248,251,207,208,255,192,128,128,128],[175,13,224,243,193,185,249,198,255,255,128],[73,17,171,221,161,179,236,167,255,234,128]],[[1,95,247,253,212,183,255,255,128,128,128],[239,90,244,250,211,209,255,255,128,128,128],[155,77,195,248,188,195,255,255,128,128,128]],[[1,24,239,251,218,219,255,205,128,128,128],[201,51,219,255,196,186,128,128,128,128,128],[69,46,190,239,201,218,255,228,128,128,128]],[[1,191,251,255,255,128,128,128,128,128,128],[223,165,249,255,213,255,128,128,128,128,128],[141,124,248,255,255,128,128,128,128,128,128]],[[1,16,248,255,255,128,128,128,128,128,128],[190,36,230,255,236,255,128,128,128,128,128],[149,1,255,128,128,128,128,128,128,128,128]],[[1,226,255,128,128,128,128,128,128,128,128],[247,192,255,128,128,128,128,128,128,128,128],[240,128,255,128,128,128,128,128,128,128,128]],[[1,134,252,255,255,128,128,128,128,128,128],[213,62,250,255,255,128,128,128,128,128,128],[55,93,255,128,128,128,128,128,128,128,128]],[[128,128,128,128,128,128,128,128,128,128,128],[128,128,128,128,128,128,128,128,128,128,128],[128,128,128,128,128,128,128,128,128,128,128]]],[[[202,24,213,235,186,191,220,160,240,175,255],[126,38,182,232,169,184,228,174,255,187,128],[61,46,138,219,151,178,240,170,255,216,128]],[[1,112,230,250,199,191,247,159,255,255,128],[166,109,228,252,211,215,255,174,128,128,128],[39,77,162,232,172,180,245,178,255,255,128]],[[1,52,220,246,198,199,249,220,255,255,128],[124,74,191,243,183,193,250,221,255,255,128],[24,71,130,219,154,170,243,182,255,255,128]],[[1,182,225,249,219,240,255,224,128,128,128],[149,150,226,252,216,205,255,171,128,128,128],[28,108,170,242,183,194,254,223,255,255,128]],[[1,81,230,252,204,203,255,192,128,128,128],[123,102,209,247,188,196,255,233,128,128,128],[20,95,153,243,164,173,255,203,128,128,128]],[[1,222,248,255,216,213,128,128,128,128,128],[168,175,246,252,235,205,255,255,128,128,128],[47,116,215,255,211,212,255,255,128,128,128]],[[1,121,236,253,212,214,255,255,128,128,128],[141,84,213,252,201,202,255,219,128,128,128],[42,80,160,240,162,185,255,205,128,128,128]],[[1,1,255,128,128,128,128,128,128,128,128],[244,1,255,128,128,128,128,128,128,128,128],[238,1,255,128,128,128,128,128,128,128,128]]]],xce=[[[231,120,48,89,115,113,120,152,112],[152,179,64,126,170,118,46,70,95],[175,69,143,80,85,82,72,155,103],[56,58,10,171,218,189,17,13,152],[114,26,17,163,44,195,21,10,173],[121,24,80,195,26,62,44,64,85],[144,71,10,38,171,213,144,34,26],[170,46,55,19,136,160,33,206,71],[63,20,8,114,114,208,12,9,226],[81,40,11,96,182,84,29,16,36]],[[134,183,89,137,98,101,106,165,148],[72,187,100,130,157,111,32,75,80],[66,102,167,99,74,62,40,234,128],[41,53,9,178,241,141,26,8,107],[74,43,26,146,73,166,49,23,157],[65,38,105,160,51,52,31,115,128],[104,79,12,27,217,255,87,17,7],[87,68,71,44,114,51,15,186,23],[47,41,14,110,182,183,21,17,194],[66,45,25,102,197,189,23,18,22]],[[88,88,147,150,42,46,45,196,205],[43,97,183,117,85,38,35,179,61],[39,53,200,87,26,21,43,232,171],[56,34,51,104,114,102,29,93,77],[39,28,85,171,58,165,90,98,64],[34,22,116,206,23,34,43,166,73],[107,54,32,26,51,1,81,43,31],[68,25,106,22,64,171,36,225,114],[34,19,21,102,132,188,16,76,124],[62,18,78,95,85,57,50,48,51]],[[193,101,35,159,215,111,89,46,111],[60,148,31,172,219,228,21,18,111],[112,113,77,85,179,255,38,120,114],[40,42,1,196,245,209,10,25,109],[88,43,29,140,166,213,37,43,154],[61,63,30,155,67,45,68,1,209],[100,80,8,43,154,1,51,26,71],[142,78,78,16,255,128,34,197,171],[41,40,5,102,211,183,4,1,221],[51,50,17,168,209,192,23,25,82]],[[138,31,36,171,27,166,38,44,229],[67,87,58,169,82,115,26,59,179],[63,59,90,180,59,166,93,73,154],[40,40,21,116,143,209,34,39,175],[47,15,16,183,34,223,49,45,183],[46,17,33,183,6,98,15,32,183],[57,46,22,24,128,1,54,17,37],[65,32,73,115,28,128,23,128,205],[40,3,9,115,51,192,18,6,223],[87,37,9,115,59,77,64,21,47]],[[104,55,44,218,9,54,53,130,226],[64,90,70,205,40,41,23,26,57],[54,57,112,184,5,41,38,166,213],[30,34,26,133,152,116,10,32,134],[39,19,53,221,26,114,32,73,255],[31,9,65,234,2,15,1,118,73],[75,32,12,51,192,255,160,43,51],[88,31,35,67,102,85,55,186,85],[56,21,23,111,59,205,45,37,192],[55,38,70,124,73,102,1,34,98]],[[125,98,42,88,104,85,117,175,82],[95,84,53,89,128,100,113,101,45],[75,79,123,47,51,128,81,171,1],[57,17,5,71,102,57,53,41,49],[38,33,13,121,57,73,26,1,85],[41,10,67,138,77,110,90,47,114],[115,21,2,10,102,255,166,23,6],[101,29,16,10,85,128,101,196,26],[57,18,10,102,102,213,34,20,43],[117,20,15,36,163,128,68,1,26]],[[102,61,71,37,34,53,31,243,192],[69,60,71,38,73,119,28,222,37],[68,45,128,34,1,47,11,245,171],[62,17,19,70,146,85,55,62,70],[37,43,37,154,100,163,85,160,1],[63,9,92,136,28,64,32,201,85],[75,15,9,9,64,255,184,119,16],[86,6,28,5,64,255,25,248,1],[56,8,17,132,137,255,55,116,128],[58,15,20,82,135,57,26,121,40]],[[164,50,31,137,154,133,25,35,218],[51,103,44,131,131,123,31,6,158],[86,40,64,135,148,224,45,183,128],[22,26,17,131,240,154,14,1,209],[45,16,21,91,64,222,7,1,197],[56,21,39,155,60,138,23,102,213],[83,12,13,54,192,255,68,47,28],[85,26,85,85,128,128,32,146,171],[18,11,7,63,144,171,4,4,246],[35,27,10,146,174,171,12,26,128]],[[190,80,35,99,180,80,126,54,45],[85,126,47,87,176,51,41,20,32],[101,75,128,139,118,146,116,128,85],[56,41,15,176,236,85,37,9,62],[71,30,17,119,118,255,17,18,138],[101,38,60,138,55,70,43,26,142],[146,36,19,30,171,255,97,27,20],[138,45,61,62,219,1,81,188,64],[32,41,20,117,151,142,20,21,163],[112,19,12,61,195,128,48,4,24]]],vce=[[[[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[176,246,255,255,255,255,255,255,255,255,255],[223,241,252,255,255,255,255,255,255,255,255],[249,253,253,255,255,255,255,255,255,255,255]],[[255,244,252,255,255,255,255,255,255,255,255],[234,254,254,255,255,255,255,255,255,255,255],[253,255,255,255,255,255,255,255,255,255,255]],[[255,246,254,255,255,255,255,255,255,255,255],[239,253,254,255,255,255,255,255,255,255,255],[254,255,254,255,255,255,255,255,255,255,255]],[[255,248,254,255,255,255,255,255,255,255,255],[251,255,254,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[255,253,254,255,255,255,255,255,255,255,255],[251,254,254,255,255,255,255,255,255,255,255],[254,255,254,255,255,255,255,255,255,255,255]],[[255,254,253,255,254,255,255,255,255,255,255],[250,255,254,255,254,255,255,255,255,255,255],[254,255,255,255,255,255,255,255,255,255,255]],[[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]]],[[[217,255,255,255,255,255,255,255,255,255,255],[225,252,241,253,255,255,254,255,255,255,255],[234,250,241,250,253,255,253,254,255,255,255]],[[255,254,255,255,255,255,255,255,255,255,255],[223,254,254,255,255,255,255,255,255,255,255],[238,253,254,254,255,255,255,255,255,255,255]],[[255,248,254,255,255,255,255,255,255,255,255],[249,254,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[255,253,255,255,255,255,255,255,255,255,255],[247,254,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[255,253,254,255,255,255,255,255,255,255,255],[252,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[255,254,254,255,255,255,255,255,255,255,255],[253,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[255,254,253,255,255,255,255,255,255,255,255],[250,255,255,255,255,255,255,255,255,255,255],[254,255,255,255,255,255,255,255,255,255,255]],[[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]]],[[[186,251,250,255,255,255,255,255,255,255,255],[234,251,244,254,255,255,255,255,255,255,255],[251,251,243,253,254,255,254,255,255,255,255]],[[255,253,254,255,255,255,255,255,255,255,255],[236,253,254,255,255,255,255,255,255,255,255],[251,253,253,254,254,255,255,255,255,255,255]],[[255,254,254,255,255,255,255,255,255,255,255],[254,254,254,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[255,254,255,255,255,255,255,255,255,255,255],[254,254,255,255,255,255,255,255,255,255,255],[254,255,255,255,255,255,255,255,255,255,255]],[[255,255,255,255,255,255,255,255,255,255,255],[254,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]]],[[[248,255,255,255,255,255,255,255,255,255,255],[250,254,252,254,255,255,255,255,255,255,255],[248,254,249,253,255,255,255,255,255,255,255]],[[255,253,253,255,255,255,255,255,255,255,255],[246,253,253,255,255,255,255,255,255,255,255],[252,254,251,254,254,255,255,255,255,255,255]],[[255,254,252,255,255,255,255,255,255,255,255],[248,254,253,255,255,255,255,255,255,255,255],[253,255,254,254,255,255,255,255,255,255,255]],[[255,251,254,255,255,255,255,255,255,255,255],[245,251,254,255,255,255,255,255,255,255,255],[253,253,254,255,255,255,255,255,255,255,255]],[[255,251,253,255,255,255,255,255,255,255,255],[252,253,254,255,255,255,255,255,255,255,255],[255,254,255,255,255,255,255,255,255,255,255]],[[255,252,255,255,255,255,255,255,255,255,255],[249,255,254,255,255,255,255,255,255,255,255],[255,255,254,255,255,255,255,255,255,255,255]],[[255,255,253,255,255,255,255,255,255,255,255],[250,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[255,255,255,255,255,255,255,255,255,255,255],[254,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]]]],yce=[0,1,2,3,6,4,5,6,6,6,6,6,6,6,6,7,0],Nh=[],ad=[],$f=[],bce=1,Z8=2,Ch=[],hu=[];uu("UpsampleRgbLinePair",_t,3),uu("UpsampleBgrLinePair",Mt,3),uu("UpsampleRgbaLinePair",Yn,4),uu("UpsampleBgraLinePair",In,4),uu("UpsampleArgbLinePair",Cs,4),uu("UpsampleRgba4444LinePair",Un,2),uu("UpsampleRgb565LinePair",xr,2);var wce=S.UpsampleRgbLinePair,Nce=S.UpsampleBgrLinePair,eM=S.UpsampleRgbaLinePair,tM=S.UpsampleBgraLinePair,rM=S.UpsampleArgbLinePair,nM=S.UpsampleRgba4444LinePair,Cce=S.UpsampleRgb565LinePair,qw=16,zw=1<<qw-1,h1=-227,X3=482,_ce=6,aM=0,Ece=s(256),Sce=s(256),Ice=s(256),jce=s(256),Bce=s(X3-h1),Pce=s(X3-h1);La("YuvToRgbRow",_t,3),La("YuvToBgrRow",Mt,3),La("YuvToRgbaRow",Yn,4),La("YuvToBgraRow",In,4),La("YuvToArgbRow",Cs,4),La("YuvToRgba4444Row",Un,2),La("YuvToRgb565Row",xr,2);var sM=[0,4,8,12,128,132,136,140,256,260,264,268,384,388,392,396],Ww=[0,2,8],Tce=[8,7,6,4,4,2,2,2,1,1,1,1],kce=1;this.WebPDecodeRGBA=function(N,B,G,se,Ne){var Te=Hw,Fe=new tr,Ve=new nt;Fe.ba=Ve,Ve.S=Te,Ve.width=[Ve.width],Ve.height=[Ve.height];var qe=Ve.width,Je=Ve.height,pt=new Xe;if(pt==null||N==null)var kt=2;else e(pt!=null),kt=nd(N,B,G,pt.width,pt.height,pt.Pd,pt.Qd,pt.format,null);if(kt!=0?qe=0:(qe!=null&&(qe[0]=pt.width[0]),Je!=null&&(Je[0]=pt.height[0]),qe=1),qe){Ve.width=Ve.width[0],Ve.height=Ve.height[0],se!=null&&(se[0]=Ve.width),Ne!=null&&(Ne[0]=Ve.height);e:{if(se=new Tn,(Ne=new lr).data=N,Ne.w=B,Ne.ha=G,Ne.kd=1,B=[0],e(Ne!=null),((N=nd(Ne.data,Ne.w,Ne.ha,null,null,null,B,null,Ne))==0||N==7)&&B[0]&&(N=4),(B=N)==0){if(e(Fe!=null),se.data=Ne.data,se.w=Ne.w+Ne.offset,se.ha=Ne.ha-Ne.offset,se.put=ae,se.ac=q,se.bc=ee,se.ma=Fe,Ne.xa){if((N=We())==null){Fe=1;break e}if(function(Ze,yt){var Et=[0],Jt=[0],Tt=[0];t:for(;;){if(Ze==null)return 0;if(yt==null)return Ze.a=2,0;if(Ze.l=yt,Ze.a=0,ne(Ze.m,yt.data,yt.w,yt.ha),!be(Ze.m,Et,Jt,Tt)){Ze.a=3;break t}if(Ze.xb=Z8,yt.width=Et[0],yt.height=Jt[0],!At(Et[0],Jt[0],1,Ze,null))break t;return 1}return e(Ze.a!=0),0}(N,se)){if(se=(B=ph(se.width,se.height,Fe.Oa,Fe.ba))==0){t:{se=N;r:for(;;){if(se==null){se=0;break t}if(e(se.s.yc!=null),e(se.s.Ya!=null),e(0<se.s.Wb),e((G=se.l)!=null),e((Ne=G.ma)!=null),se.xb!=0){if(se.ca=Ne.ba,se.tb=Ne.tb,e(se.ca!=null),!a1(Ne.Oa,G,$w)){se.a=2;break r}if(!vt(se,G.width)||G.da)break r;if((G.da||He(se.ca.S))&&Wl(),11>se.ca.S||(alert("todo:WebPInitConvertARGBToYUV"),se.ca.f.kb.F!=null&&Wl()),se.Pb&&0<se.s.ua&&se.s.vb.X==null&&!J(se.s.vb,se.s.Wa.Xa)){se.a=1;break r}se.xb=0}if(!Re(se,se.V,se.Ba,se.c,se.i,G.o,re))break r;Ne.Dc=se.Ma,se=1;break t}e(se.a!=0),se=0}se=!se}se&&(B=N.a)}else B=N.a}else{if((N=new is)==null){Fe=1;break e}if(N.Fa=Ne.na,N.P=Ne.P,N.qc=Ne.Sa,at(N,se)){if((B=ph(se.width,se.height,Fe.Oa,Fe.ba))==0){if(N.Aa=0,G=Fe.Oa,e((Ne=N)!=null),G!=null){if(0<(qe=0>(qe=G.Md)?0:100<qe?255:255*qe/100)){for(Je=pt=0;4>Je;++Je)12>(kt=Ne.pb[Je]).lc&&(kt.ia=qe*Tce[0>kt.lc?0:kt.lc]>>3),pt|=kt.ia;pt&&(alert("todo:VP8InitRandom"),Ne.ia=1)}Ne.Ga=G.Id,100<Ne.Ga?Ne.Ga=100:0>Ne.Ga&&(Ne.Ga=0)}(function(Ze,yt){if(Ze==null)return 0;if(yt==null)return fn(Ze,2,"NULL VP8Io parameter in VP8Decode().");if(!Ze.cb&&!at(Ze,yt))return 0;if(e(Ze.cb),yt.ac==null||yt.ac(yt)){yt.ob&&(Ze.L=0);var Et=Ww[Ze.L];if(Ze.L==2?(Ze.yb=0,Ze.zb=0):(Ze.yb=yt.v-Et>>4,Ze.zb=yt.j-Et>>4,0>Ze.yb&&(Ze.yb=0),0>Ze.zb&&(Ze.zb=0)),Ze.Va=yt.o+15+Et>>4,Ze.Hb=yt.va+15+Et>>4,Ze.Hb>Ze.za&&(Ze.Hb=Ze.za),Ze.Va>Ze.Ub&&(Ze.Va=Ze.Ub),0<Ze.L){var Jt=Ze.ed;for(Et=0;4>Et;++Et){var Tt;if(Ze.Qa.Cb){var rr=Ze.Qa.Lb[Et];Ze.Qa.Fb||(rr+=Jt.Tb)}else rr=Jt.Tb;for(Tt=0;1>=Tt;++Tt){var ir=Ze.gd[Et][Tt],hr=rr;if(Jt.Pc&&(hr+=Jt.vd[0],Tt&&(hr+=Jt.od[0])),0<(hr=0>hr?0:63<hr?63:hr)){var dr=hr;0<Jt.wb&&(dr=4<Jt.wb?dr>>2:dr>>1)>9-Jt.wb&&(dr=9-Jt.wb),1>dr&&(dr=1),ir.dd=dr,ir.tc=2*hr+dr,ir.ld=40<=hr?2:15<=hr?1:0}else ir.tc=0;ir.La=Tt}}}Et=0}else fn(Ze,6,"Frame setup failed"),Et=Ze.a;if(Et=Et==0){if(Et){Ze.$c=0,0<Ze.Aa||(Ze.Ic=kce);t:{Et=Ze.Ic,Jt=4*(dr=Ze.za);var qr=32*dr,Mr=dr+1,yn=0<Ze.L?dr*(0<Ze.Aa?2:1):0,Hr=(Ze.Aa==2?2:1)*dr;if((ir=Jt+832+(Tt=3*(16*Et+Ww[Ze.L])/2*qr)+(rr=Ze.Fa!=null&&0<Ze.Fa.length?Ze.Kc.c*Ze.Kc.i:0))!=ir)Et=0;else{if(ir>Ze.Vb){if(Ze.Vb=0,Ze.Ec=s(ir),Ze.Fc=0,Ze.Ec==null){Et=fn(Ze,1,"no memory during frame initialization.");break t}Ze.Vb=ir}ir=Ze.Ec,hr=Ze.Fc,Ze.Ac=ir,Ze.Bc=hr,hr+=Jt,Ze.Gd=i(qr,Gt),Ze.Hd=0,Ze.rb=i(Mr+1,Xt),Ze.sb=1,Ze.wa=yn?i(yn,sr):null,Ze.Y=0,Ze.D.Nb=0,Ze.D.wa=Ze.wa,Ze.D.Y=Ze.Y,0<Ze.Aa&&(Ze.D.Y+=dr),e(!0),Ze.oc=ir,Ze.pc=hr,hr+=832,Ze.ya=i(Hr,ar),Ze.aa=0,Ze.D.ya=Ze.ya,Ze.D.aa=Ze.aa,Ze.Aa==2&&(Ze.D.aa+=dr),Ze.R=16*dr,Ze.B=8*dr,dr=(qr=Ww[Ze.L])*Ze.R,qr=qr/2*Ze.B,Ze.sa=ir,Ze.ta=hr+dr,Ze.qa=Ze.sa,Ze.ra=Ze.ta+16*Et*Ze.R+qr,Ze.Ha=Ze.qa,Ze.Ia=Ze.ra+8*Et*Ze.B+qr,Ze.$c=0,hr+=Tt,Ze.mb=rr?ir:null,Ze.nb=rr?hr:null,e(hr+rr<=Ze.Fc+Ze.Vb),Ut(Ze),a(Ze.Ac,Ze.Bc,0,Jt),Et=1}}if(Et){if(yt.ka=0,yt.y=Ze.sa,yt.O=Ze.ta,yt.f=Ze.qa,yt.N=Ze.ra,yt.ea=Ze.Ha,yt.Vd=Ze.Ia,yt.fa=Ze.R,yt.Rc=Ze.B,yt.F=null,yt.J=0,!z8){for(Et=-255;255>=Et;++Et)$8[255+Et]=0>Et?-Et:Et;for(Et=-1020;1020>=Et;++Et)K8[1020+Et]=-128>Et?-128:127<Et?127:Et;for(Et=-112;112>=Et;++Et)G8[112+Et]=-16>Et?-16:15<Et?15:Et;for(Et=-255;510>=Et;++Et)q8[255+Et]=0>Et?0:255<Et?255:Et;z8=1}wh=da,mm=gr,Jd=Cr,la=ys,ka=Ta,fu=er,Ys=mh,Ci=cu,Hf=we,d1=Ye,yg=fm,Uw=Q,O8=ft,D8=Nt,R8=Wd,M8=Nl,L8=dm,U8=xg,ad[0]=r1,ad[1]=zl,ad[2]=e1,ad[3]=t1,ad[4]=Ji,ad[5]=n1,ad[6]=td,ad[7]=fh,ad[8]=Ah,ad[9]=rd,Nh[0]=su,Nh[1]=Gd,Nh[2]=au,Nh[3]=Lf,Nh[4]=qd,Nh[5]=dh,Nh[6]=pg,$f[0]=cm,$f[1]=ed,$f[2]=bc,$f[3]=Uf,$f[4]=um,$f[5]=Sa,$f[6]=gg,Et=1}else Et=0}Et&&(Et=function(Qn,_i){for(Qn.M=0;Qn.M<Qn.Va;++Qn.M){var bn,$r=Qn.Jc[Qn.M&Qn.Xb],Er=Qn.m,Js=Qn;for(bn=0;bn<Js.za;++bn){var pn=Er,Hn=Js,za=Hn.Ac,No=Hn.Bc+4*bn,_l=Hn.zc,Ls=Hn.ya[Hn.aa+bn];if(Hn.Qa.Bb?Ls.$b=Z(pn,Hn.Pa.jb[0])?2+Z(pn,Hn.Pa.jb[2]):Z(pn,Hn.Pa.jb[1]):Ls.$b=0,Hn.kc&&(Ls.Ad=Z(pn,Hn.Bd)),Ls.Za=!Z(pn,145)+0,Ls.Za){var Xo=Ls.Ob,El=0;for(Hn=0;4>Hn;++Hn){var Ei,Gn=_l[0+Hn];for(Ei=0;4>Ei;++Ei){Gn=xce[za[No+Ei]][Gn];for(var Aa=J8[Z(pn,Gn[0])];0<Aa;)Aa=J8[2*Aa+Z(pn,Gn[Aa])];Gn=-Aa,za[No+Ei]=Gn}n(Xo,El,za,No,4),El+=4,_l[0+Hn]=Gn}}else Gn=Z(pn,156)?Z(pn,128)?1:3:Z(pn,163)?2:0,Ls.Ob[0]=Gn,a(za,No,Gn,4),a(_l,0,Gn,4);Ls.Dd=Z(pn,142)?Z(pn,114)?Z(pn,183)?1:3:2:0}if(Js.m.Ka)return fn(Qn,7,"Premature end-of-partition0 encountered.");for(;Qn.ja<Qn.za;++Qn.ja){if(Js=$r,pn=(Er=Qn).rb[Er.sb-1],za=Er.rb[Er.sb+Er.ja],bn=Er.ya[Er.aa+Er.ja],No=Er.kc?bn.Ad:0)pn.la=za.la=0,bn.Za||(pn.Na=za.Na=0),bn.Hc=0,bn.Gc=0,bn.ia=0;else{var Us,ha;if(pn=za,za=Js,No=Er.Pa.Xc,_l=Er.ya[Er.aa+Er.ja],Ls=Er.pb[_l.$b],Hn=_l.ad,Xo=0,El=Er.rb[Er.sb-1],Gn=Ei=0,a(Hn,Xo,0,384),_l.Za)var Co=0,sd=No[3];else{Aa=s(16);var Zs=pn.Na+El.Na;if(Zs=A1(za,No[1],Zs,Ls.Eb,0,Aa,0),pn.Na=El.Na=(0<Zs)+0,1<Zs)wh(Aa,0,Hn,Xo);else{var Xl=Aa[0]+3>>3;for(Aa=0;256>Aa;Aa+=16)Hn[Xo+Aa]=Xl}Co=1,sd=No[0]}var Fa=15&pn.la,Si=15&El.la;for(Aa=0;4>Aa;++Aa){var Ec=1&Si;for(Xl=ha=0;4>Xl;++Xl)Fa=Fa>>1|(Ec=(Zs=A1(za,sd,Zs=Ec+(1&Fa),Ls.Sc,Co,Hn,Xo))>Co)<<7,ha=ha<<2|(3<Zs?3:1<Zs?2:Hn[Xo+0]!=0),Xo+=16;Fa>>=4,Si=Si>>1|Ec<<7,Ei=(Ei<<8|ha)>>>0}for(sd=Fa,Co=Si>>4,Us=0;4>Us;Us+=2){for(ha=0,Fa=pn.la>>4+Us,Si=El.la>>4+Us,Aa=0;2>Aa;++Aa){for(Ec=1&Si,Xl=0;2>Xl;++Xl)Zs=Ec+(1&Fa),Fa=Fa>>1|(Ec=0<(Zs=A1(za,No[2],Zs,Ls.Qc,0,Hn,Xo)))<<3,ha=ha<<2|(3<Zs?3:1<Zs?2:Hn[Xo+0]!=0),Xo+=16;Fa>>=2,Si=Si>>1|Ec<<5}Gn|=ha<<4*Us,sd|=Fa<<4<<Us,Co|=(240&Si)<<Us}pn.la=sd,El.la=Co,_l.Hc=Ei,_l.Gc=Gn,_l.ia=43690&Gn?0:Ls.ia,No=!(Ei|Gn)}if(0<Er.L&&(Er.wa[Er.Y+Er.ja]=Er.gd[bn.$b][bn.Za],Er.wa[Er.Y+Er.ja].La|=!No),Js.Ka)return fn(Qn,7,"Premature end-of-file encountered.")}if(Ut(Qn),Er=_i,Js=1,bn=($r=Qn).D,pn=0<$r.L&&$r.M>=$r.zb&&$r.M<=$r.Va,$r.Aa==0)t:{if(bn.M=$r.M,bn.uc=pn,wo($r,bn),Js=1,bn=(ha=$r.D).Nb,pn=(Gn=Ww[$r.L])*$r.R,za=Gn/2*$r.B,Aa=16*bn*$r.R,Xl=8*bn*$r.B,No=$r.sa,_l=$r.ta-pn+Aa,Ls=$r.qa,Hn=$r.ra-za+Xl,Xo=$r.Ha,El=$r.Ia-za+Xl,Si=(Fa=ha.M)==0,Ei=Fa>=$r.Va-1,$r.Aa==2&&wo($r,ha),ha.uc)for(Ec=(Zs=$r).D.M,e(Zs.D.uc),ha=Zs.yb;ha<Zs.Hb;++ha){Co=ha,sd=Ec;var Sl=(Sc=(_o=Zs).D).Nb;Us=_o.R;var Sc=Sc.wa[Sc.Y+Co],Ic=_o.sa,Yl=_o.ta+16*Sl*Us+16*Co,jc=Sc.dd,Ua=Sc.tc;if(Ua!=0)if(e(3<=Ua),_o.L==1)0<Co&&M8(Ic,Yl,Us,Ua+4),Sc.La&&U8(Ic,Yl,Us,Ua),0<sd&&R8(Ic,Yl,Us,Ua+4),Sc.La&&L8(Ic,Yl,Us,Ua);else{var Bc=_o.B,id=_o.qa,pm=_o.ra+8*Sl*Bc+8*Co,Kf=_o.Ha,_o=_o.Ia+8*Sl*Bc+8*Co;Sl=Sc.ld,0<Co&&(Ci(Ic,Yl,Us,Ua+4,jc,Sl),d1(id,pm,Kf,_o,Bc,Ua+4,jc,Sl)),Sc.La&&(Uw(Ic,Yl,Us,Ua,jc,Sl),D8(id,pm,Kf,_o,Bc,Ua,jc,Sl)),0<sd&&(Ys(Ic,Yl,Us,Ua+4,jc,Sl),Hf(id,pm,Kf,_o,Bc,Ua+4,jc,Sl)),Sc.La&&(yg(Ic,Yl,Us,Ua,jc,Sl),O8(id,pm,Kf,_o,Bc,Ua,jc,Sl))}}if($r.ia&&alert("todo:DitherRow"),Er.put!=null){if(ha=16*Fa,Fa=16*(Fa+1),Si?(Er.y=$r.sa,Er.O=$r.ta+Aa,Er.f=$r.qa,Er.N=$r.ra+Xl,Er.ea=$r.Ha,Er.W=$r.Ia+Xl):(ha-=Gn,Er.y=No,Er.O=_l,Er.f=Ls,Er.N=Hn,Er.ea=Xo,Er.W=El),Ei||(Fa-=Gn),Fa>Er.o&&(Fa=Er.o),Er.F=null,Er.J=null,$r.Fa!=null&&0<$r.Fa.length&&ha<Fa&&(Er.J=fa($r,Er,ha,Fa-ha),Er.F=$r.mb,Er.F==null&&Er.F.length==0)){Js=fn($r,3,"Could not decode alpha data.");break t}ha<Er.j&&(Gn=Er.j-ha,ha=Er.j,e(!(1&Gn)),Er.O+=$r.R*Gn,Er.N+=$r.B*(Gn>>1),Er.W+=$r.B*(Gn>>1),Er.F!=null&&(Er.J+=Er.width*Gn)),ha<Fa&&(Er.O+=Er.v,Er.N+=Er.v>>1,Er.W+=Er.v>>1,Er.F!=null&&(Er.J+=Er.v),Er.ka=ha-Er.j,Er.U=Er.va-Er.v,Er.T=Fa-ha,Js=Er.put(Er))}bn+1!=$r.Ic||Ei||(n($r.sa,$r.ta-pn,No,_l+16*$r.R,pn),n($r.qa,$r.ra-za,Ls,Hn+8*$r.B,za),n($r.Ha,$r.Ia-za,Xo,El+8*$r.B,za))}if(!Js)return fn(Qn,6,"Output aborted.")}return 1}(Ze,yt)),yt.bc!=null&&yt.bc(yt),Et&=1}return Et?(Ze.cb=0,Et):0})(N,se)||(B=N.a)}}else B=N.a}B==0&&Fe.Oa!=null&&Fe.Oa.fd&&(B=s1(Fe.ba))}Fe=B}Te=Fe!=0?null:11>Te?Ve.f.RGBA.eb:Ve.f.kb.y}else Te=null;return Te};var iM=[3,4,3,4,4,2,2,4,4,4,2,1,1]};function u(S,k){for(var P="",T=0;T<4;T++)P+=String.fromCharCode(S[k++]);return P}function d(S,k){return S[k+0]|S[k+1]<<8}function f(S,k){return(S[k+0]|S[k+1]<<8|S[k+2]<<16)>>>0}function h(S,k){return(S[k+0]|S[k+1]<<8|S[k+2]<<16|S[k+3]<<24)>>>0}new c;var A=[0],m=[0],p=[],g=new c,x=t,y=function(S,k){var P={},T=0,F=!1,Y=0,he=0;if(P.frames=[],!function(O,H){for(var R=0;R<4;R++)if(O[H+R]!="RIFF".charCodeAt(R))return!0;return!1}(S,k)){for(h(S,k+=4),k+=8;k<S.length;){var ue=u(S,k),fe=h(S,k+=4);k+=4;var me=fe+(1&fe);switch(ue){case"VP8 ":case"VP8L":P.frames[T]===void 0&&(P.frames[T]={}),(Ie=P.frames[T]).src_off=F?he:k-8,Ie.src_size=Y+fe+8,T++,F&&(F=!1,Y=0,he=0);break;case"VP8X":(Ie=P.header={}).feature_flags=S[k];var ne=k+4;Ie.canvas_width=1+f(S,ne),ne+=3,Ie.canvas_height=1+f(S,ne),ne+=3;break;case"ALPH":F=!0,Y=me+8,he=k-8;break;case"ANIM":(Ie=P.header).bgcolor=h(S,k),ne=k+4,Ie.loop_count=d(S,ne),ne+=2;break;case"ANMF":var Pe,Ie;(Ie=P.frames[T]={}).offset_x=2*f(S,k),k+=3,Ie.offset_y=2*f(S,k),k+=3,Ie.width=1+f(S,k),k+=3,Ie.height=1+f(S,k),k+=3,Ie.duration=f(S,k),k+=3,Pe=S[k++],Ie.dispose=1&Pe,Ie.blend=Pe>>1&1}ue!="ANMF"&&(k+=me)}return P}}(x,0);y.response=x,y.rgbaoutput=!0,y.dataurl=!1;var b=y.header?y.header:null,w=y.frames?y.frames:null;if(b){b.loop_counter=b.loop_count,A=[b.canvas_height],m=[b.canvas_width];for(var j=0;j<w.length&&w[j].blend!=0;j++);}var I=w[0],_=g.WebPDecodeRGBA(x,I.src_off,I.src_size,m,A);I.rgba=_,I.imgwidth=m[0],I.imgheight=A[0];for(var E=0;E<m[0]*A[0]*4;E++)p[E]=_[E];return this.width=m,this.height=A,this.data=p,this}(function(t){var e,r,n,a,s,i,l,c,u,d=function(O){return O=O||{},this.isStrokeTransparent=O.isStrokeTransparent||!1,this.strokeOpacity=O.strokeOpacity||1,this.strokeStyle=O.strokeStyle||"#000000",this.fillStyle=O.fillStyle||"#000000",this.isFillTransparent=O.isFillTransparent||!1,this.fillOpacity=O.fillOpacity||1,this.font=O.font||"10px sans-serif",this.textBaseline=O.textBaseline||"alphabetic",this.textAlign=O.textAlign||"left",this.lineWidth=O.lineWidth||1,this.lineJoin=O.lineJoin||"miter",this.lineCap=O.lineCap||"butt",this.path=O.path||[],this.transform=O.transform!==void 0?O.transform.clone():new c,this.globalCompositeOperation=O.globalCompositeOperation||"normal",this.globalAlpha=O.globalAlpha||1,this.clip_path=O.clip_path||[],this.currentPoint=O.currentPoint||new i,this.miterLimit=O.miterLimit||10,this.lastPoint=O.lastPoint||new i,this.lineDashOffset=O.lineDashOffset||0,this.lineDash=O.lineDash||[],this.margin=O.margin||[0,0,0,0],this.prevPageLastElemOffset=O.prevPageLastElemOffset||0,this.ignoreClearRect=typeof O.ignoreClearRect!="boolean"||O.ignoreClearRect,this};t.events.push(["initialized",function(){this.context2d=new f(this),e=this.internal.f2,r=this.internal.getCoordinateString,n=this.internal.getVerticalCoordinateString,a=this.internal.getHorizontalCoordinate,s=this.internal.getVerticalCoordinate,i=this.internal.Point,l=this.internal.Rectangle,c=this.internal.Matrix,u=new d}]);var f=function(O){Object.defineProperty(this,"canvas",{get:function(){return{parentNode:!1,style:!1}}});var H=O;Object.defineProperty(this,"pdf",{get:function(){return H}});var R=!1;Object.defineProperty(this,"pageWrapXEnabled",{get:function(){return R},set:function(J){R=!!J}});var M=!1;Object.defineProperty(this,"pageWrapYEnabled",{get:function(){return M},set:function(J){M=!!J}});var K=0;Object.defineProperty(this,"posX",{get:function(){return K},set:function(J){isNaN(J)||(K=J)}});var W=0;Object.defineProperty(this,"posY",{get:function(){return W},set:function(J){isNaN(J)||(W=J)}}),Object.defineProperty(this,"margin",{get:function(){return u.margin},set:function(J){var je;typeof J=="number"?je=[J,J,J,J]:((je=new Array(4))[0]=J[0],je[1]=J.length>=2?J[1]:je[0],je[2]=J.length>=3?J[2]:je[0],je[3]=J.length>=4?J[3]:je[1]),u.margin=je}});var D=!1;Object.defineProperty(this,"autoPaging",{get:function(){return D},set:function(J){D=J}});var L=0;Object.defineProperty(this,"lastBreak",{get:function(){return L},set:function(J){L=J}});var Z=[];Object.defineProperty(this,"pageBreaks",{get:function(){return Z},set:function(J){Z=J}}),Object.defineProperty(this,"ctx",{get:function(){return u},set:function(J){J instanceof d&&(u=J)}}),Object.defineProperty(this,"path",{get:function(){return u.path},set:function(J){u.path=J}});var ge=[];Object.defineProperty(this,"ctxStack",{get:function(){return ge},set:function(J){ge=J}}),Object.defineProperty(this,"fillStyle",{get:function(){return this.ctx.fillStyle},set:function(J){var je;je=h(J),this.ctx.fillStyle=je.style,this.ctx.isFillTransparent=je.a===0,this.ctx.fillOpacity=je.a,this.pdf.setFillColor(je.r,je.g,je.b,{a:je.a}),this.pdf.setTextColor(je.r,je.g,je.b,{a:je.a})}}),Object.defineProperty(this,"strokeStyle",{get:function(){return this.ctx.strokeStyle},set:function(J){var je=h(J);this.ctx.strokeStyle=je.style,this.ctx.isStrokeTransparent=je.a===0,this.ctx.strokeOpacity=je.a,je.a===0?this.pdf.setDrawColor(255,255,255):(je.a,this.pdf.setDrawColor(je.r,je.g,je.b))}}),Object.defineProperty(this,"lineCap",{get:function(){return this.ctx.lineCap},set:function(J){["butt","round","square"].indexOf(J)!==-1&&(this.ctx.lineCap=J,this.pdf.setLineCap(J))}}),Object.defineProperty(this,"lineWidth",{get:function(){return this.ctx.lineWidth},set:function(J){isNaN(J)||(this.ctx.lineWidth=J,this.pdf.setLineWidth(J))}}),Object.defineProperty(this,"lineJoin",{get:function(){return this.ctx.lineJoin},set:function(J){["bevel","round","miter"].indexOf(J)!==-1&&(this.ctx.lineJoin=J,this.pdf.setLineJoin(J))}}),Object.defineProperty(this,"miterLimit",{get:function(){return this.ctx.miterLimit},set:function(J){isNaN(J)||(this.ctx.miterLimit=J,this.pdf.setMiterLimit(J))}}),Object.defineProperty(this,"textBaseline",{get:function(){return this.ctx.textBaseline},set:function(J){this.ctx.textBaseline=J}}),Object.defineProperty(this,"textAlign",{get:function(){return this.ctx.textAlign},set:function(J){["right","end","center","left","start"].indexOf(J)!==-1&&(this.ctx.textAlign=J)}});var U=null,Ge=null,ie=null;Object.defineProperty(this,"fontFaces",{get:function(){return ie},set:function(J){U=null,Ge=null,ie=J}}),Object.defineProperty(this,"font",{get:function(){return this.ctx.font},set:function(J){var je;if(this.ctx.font=J,(je=/^\s*(?=(?:(?:[-a-z]+\s*){0,2}(italic|oblique))?)(?=(?:(?:[-a-z]+\s*){0,2}(small-caps))?)(?=(?:(?:[-a-z]+\s*){0,2}(bold(?:er)?|lighter|[1-9]00))?)(?:(?:normal|\1|\2|\3)\s*){0,3}((?:xx?-)?(?:small|large)|medium|smaller|larger|[.\d]+(?:\%|in|[cem]m|ex|p[ctx]))(?:\s*\/\s*(normal|[.\d]+(?:\%|in|[cem]m|ex|p[ctx])))?\s*([-_,\"\'\sa-z0-9]+?)\s*$/i.exec(J))!==null){var z=je[1];je[2];var Ae=je[3],ye=je[4];je[5];var Qe=je[6],st=/^([.\d]+)((?:%|in|[cem]m|ex|p[ctx]))$/i.exec(ye)[2];ye=Math.floor(st==="px"?parseFloat(ye)*this.pdf.internal.scaleFactor:st==="em"?parseFloat(ye)*this.pdf.getFontSize():parseFloat(ye)*this.pdf.internal.scaleFactor),this.pdf.setFontSize(ye);var ut=function(le){var Ue,rt,mt=[],gt=le.trim();if(gt==="")return B5;if(gt in bQ)return[bQ[gt]];for(;gt!=="";){switch(rt=null,Ue=(gt=NQ(gt)).charAt(0)){case'"':case"'":rt=iSe(gt.substring(1),Ue);break;default:rt=oSe(gt)}if(rt===null||(mt.push(rt[0]),(gt=NQ(rt[1]))!==""&&gt.charAt(0)!==","))return B5;gt=gt.replace(/^,/,"")}return mt}(Qe);if(this.fontFaces){var De=function(le,Ue){var rt=le.getFontList(),mt=JSON.stringify(rt);if(U===null||Ge!==mt){var gt=function(Ct){var jt=[];return Object.keys(Ct).forEach(function(xe){Ct[xe].forEach(function(He){var Ce=null;switch(He){case"bold":Ce={family:xe,weight:"bold"};break;case"italic":Ce={family:xe,style:"italic"};break;case"bolditalic":Ce={family:xe,weight:"bold",style:"italic"};break;case"":case"normal":Ce={family:xe}}Ce!==null&&(Ce.ref={name:xe,style:He},jt.push(Ce))})}),jt}(rt);U=function(Ct){for(var jt={},xe=0;xe<Ct.length;++xe){var He=j5(Ct[xe]),Ce=He.family,lt=He.stretch,nt=He.style,Xe=He.weight;jt[Ce]=jt[Ce]||{},jt[Ce][lt]=jt[Ce][lt]||{},jt[Ce][lt][nt]=jt[Ce][lt][nt]||{},jt[Ce][lt][nt][Xe]=He}return jt}(gt.concat(Ue)),Ge=mt}return U}(this.pdf,this.fontFaces),it=ut.map(function(le){return{family:le,stretch:"normal",weight:Ae,style:z}}),dt=function(le,Ue,rt){for(var mt=(rt=rt||{}).defaultFontFamily||"times",gt=Object.assign({},sSe,rt.genericFontFamilies||{}),Ct=null,jt=null,xe=0;xe<Ue.length;++xe)if(gt[(Ct=j5(Ue[xe])).family]&&(Ct.family=gt[Ct.family]),le.hasOwnProperty(Ct.family)){jt=le[Ct.family];break}if(!(jt=jt||le[mt]))throw new Error("Could not find a font-family for the rule '"+wQ(Ct)+"' and default family '"+mt+"'.");if(jt=function(He,Ce){if(Ce[He])return Ce[He];var lt=GT[He],nt=lt<=GT.normal?-1:1,Xe=yQ(Ce,tte,lt,nt);if(!Xe)throw new Error("Could not find a matching font-stretch value for "+He);return Xe}(Ct.stretch,jt),jt=function(He,Ce){if(Ce[He])return Ce[He];for(var lt=ete[He],nt=0;nt<lt.length;++nt)if(Ce[lt[nt]])return Ce[lt[nt]];throw new Error("Could not find a matching font-style for "+He)}(Ct.style,jt),!(jt=function(He,Ce){if(Ce[He])return Ce[He];if(He===400&&Ce[500])return Ce[500];if(He===500&&Ce[400])return Ce[400];var lt=aSe[He],nt=yQ(Ce,rte,lt,He<400?-1:1);if(!nt)throw new Error("Could not find a matching font-weight for value "+He);return nt}(Ct.weight,jt)))throw new Error("Failed to resolve a font for the rule '"+wQ(Ct)+"'.");return jt}(De,it);this.pdf.setFont(dt.ref.name,dt.ref.style)}else{var ce="";(Ae==="bold"||parseInt(Ae,10)>=700||z==="bold")&&(ce="bold"),z==="italic"&&(ce+="italic"),ce.length===0&&(ce="normal");for(var oe="",Me={arial:"Helvetica",Arial:"Helvetica",verdana:"Helvetica",Verdana:"Helvetica",helvetica:"Helvetica",Helvetica:"Helvetica","sans-serif":"Helvetica",fixed:"Courier",monospace:"Courier",terminal:"Courier",cursive:"Times",fantasy:"Times",serif:"Times"},Le=0;Le<ut.length;Le++){if(this.pdf.internal.getFont(ut[Le],ce,{noFallback:!0,disableWarning:!0})!==void 0){oe=ut[Le];break}if(ce==="bolditalic"&&this.pdf.internal.getFont(ut[Le],"bold",{noFallback:!0,disableWarning:!0})!==void 0)oe=ut[Le],ce="bold";else if(this.pdf.internal.getFont(ut[Le],"normal",{noFallback:!0,disableWarning:!0})!==void 0){oe=ut[Le],ce="normal";break}}if(oe===""){for(var ve=0;ve<ut.length;ve++)if(Me[ut[ve]]){oe=Me[ut[ve]];break}}oe=oe===""?"Times":oe,this.pdf.setFont(oe,ce)}}}}),Object.defineProperty(this,"globalCompositeOperation",{get:function(){return this.ctx.globalCompositeOperation},set:function(J){this.ctx.globalCompositeOperation=J}}),Object.defineProperty(this,"globalAlpha",{get:function(){return this.ctx.globalAlpha},set:function(J){this.ctx.globalAlpha=J}}),Object.defineProperty(this,"lineDashOffset",{get:function(){return this.ctx.lineDashOffset},set:function(J){this.ctx.lineDashOffset=J,Ie.call(this)}}),Object.defineProperty(this,"lineDash",{get:function(){return this.ctx.lineDash},set:function(J){this.ctx.lineDash=J,Ie.call(this)}}),Object.defineProperty(this,"ignoreClearRect",{get:function(){return this.ctx.ignoreClearRect},set:function(J){this.ctx.ignoreClearRect=!!J}})};f.prototype.setLineDash=function(O){this.lineDash=O},f.prototype.getLineDash=function(){return this.lineDash.length%2?this.lineDash.concat(this.lineDash):this.lineDash.slice()},f.prototype.fill=function(){w.call(this,"fill",!1)},f.prototype.stroke=function(){w.call(this,"stroke",!1)},f.prototype.beginPath=function(){this.path=[{type:"begin"}]},f.prototype.moveTo=function(O,H){if(isNaN(O)||isNaN(H))throw Da.error("jsPDF.context2d.moveTo: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.moveTo");var R=this.ctx.transform.applyToPoint(new i(O,H));this.path.push({type:"mt",x:R.x,y:R.y}),this.ctx.lastPoint=new i(O,H)},f.prototype.closePath=function(){var O=new i(0,0),H=0;for(H=this.path.length-1;H!==-1;H--)if(this.path[H].type==="begin"&&wa(this.path[H+1])==="object"&&typeof this.path[H+1].x=="number"){O=new i(this.path[H+1].x,this.path[H+1].y);break}this.path.push({type:"close"}),this.ctx.lastPoint=new i(O.x,O.y)},f.prototype.lineTo=function(O,H){if(isNaN(O)||isNaN(H))throw Da.error("jsPDF.context2d.lineTo: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.lineTo");var R=this.ctx.transform.applyToPoint(new i(O,H));this.path.push({type:"lt",x:R.x,y:R.y}),this.ctx.lastPoint=new i(R.x,R.y)},f.prototype.clip=function(){this.ctx.clip_path=JSON.parse(JSON.stringify(this.path)),w.call(this,null,!0)},f.prototype.quadraticCurveTo=function(O,H,R,M){if(isNaN(R)||isNaN(M)||isNaN(O)||isNaN(H))throw Da.error("jsPDF.context2d.quadraticCurveTo: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.quadraticCurveTo");var K=this.ctx.transform.applyToPoint(new i(R,M)),W=this.ctx.transform.applyToPoint(new i(O,H));this.path.push({type:"qct",x1:W.x,y1:W.y,x:K.x,y:K.y}),this.ctx.lastPoint=new i(K.x,K.y)},f.prototype.bezierCurveTo=function(O,H,R,M,K,W){if(isNaN(K)||isNaN(W)||isNaN(O)||isNaN(H)||isNaN(R)||isNaN(M))throw Da.error("jsPDF.context2d.bezierCurveTo: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.bezierCurveTo");var D=this.ctx.transform.applyToPoint(new i(K,W)),L=this.ctx.transform.applyToPoint(new i(O,H)),Z=this.ctx.transform.applyToPoint(new i(R,M));this.path.push({type:"bct",x1:L.x,y1:L.y,x2:Z.x,y2:Z.y,x:D.x,y:D.y}),this.ctx.lastPoint=new i(D.x,D.y)},f.prototype.arc=function(O,H,R,M,K,W){if(isNaN(O)||isNaN(H)||isNaN(R)||isNaN(M)||isNaN(K))throw Da.error("jsPDF.context2d.arc: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.arc");if(W=!!W,!this.ctx.transform.isIdentity){var D=this.ctx.transform.applyToPoint(new i(O,H));O=D.x,H=D.y;var L=this.ctx.transform.applyToPoint(new i(0,R)),Z=this.ctx.transform.applyToPoint(new i(0,0));R=Math.sqrt(Math.pow(L.x-Z.x,2)+Math.pow(L.y-Z.y,2))}Math.abs(K-M)>=2*Math.PI&&(M=0,K=2*Math.PI),this.path.push({type:"arc",x:O,y:H,radius:R,startAngle:M,endAngle:K,counterclockwise:W})},f.prototype.arcTo=function(O,H,R,M,K){throw new Error("arcTo not implemented.")},f.prototype.rect=function(O,H,R,M){if(isNaN(O)||isNaN(H)||isNaN(R)||isNaN(M))throw Da.error("jsPDF.context2d.rect: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.rect");this.moveTo(O,H),this.lineTo(O+R,H),this.lineTo(O+R,H+M),this.lineTo(O,H+M),this.lineTo(O,H),this.lineTo(O+R,H),this.lineTo(O,H)},f.prototype.fillRect=function(O,H,R,M){if(isNaN(O)||isNaN(H)||isNaN(R)||isNaN(M))throw Da.error("jsPDF.context2d.fillRect: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.fillRect");if(!A.call(this)){var K={};this.lineCap!=="butt"&&(K.lineCap=this.lineCap,this.lineCap="butt"),this.lineJoin!=="miter"&&(K.lineJoin=this.lineJoin,this.lineJoin="miter"),this.beginPath(),this.rect(O,H,R,M),this.fill(),K.hasOwnProperty("lineCap")&&(this.lineCap=K.lineCap),K.hasOwnProperty("lineJoin")&&(this.lineJoin=K.lineJoin)}},f.prototype.strokeRect=function(O,H,R,M){if(isNaN(O)||isNaN(H)||isNaN(R)||isNaN(M))throw Da.error("jsPDF.context2d.strokeRect: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.strokeRect");m.call(this)||(this.beginPath(),this.rect(O,H,R,M),this.stroke())},f.prototype.clearRect=function(O,H,R,M){if(isNaN(O)||isNaN(H)||isNaN(R)||isNaN(M))throw Da.error("jsPDF.context2d.clearRect: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.clearRect");this.ignoreClearRect||(this.fillStyle="#ffffff",this.fillRect(O,H,R,M))},f.prototype.save=function(O){O=typeof O!="boolean"||O;for(var H=this.pdf.internal.getCurrentPageInfo().pageNumber,R=0;R<this.pdf.internal.getNumberOfPages();R++)this.pdf.setPage(R+1),this.pdf.internal.out("q");if(this.pdf.setPage(H),O){this.ctx.fontSize=this.pdf.internal.getFontSize();var M=new d(this.ctx);this.ctxStack.push(this.ctx),this.ctx=M}},f.prototype.restore=function(O){O=typeof O!="boolean"||O;for(var H=this.pdf.internal.getCurrentPageInfo().pageNumber,R=0;R<this.pdf.internal.getNumberOfPages();R++)this.pdf.setPage(R+1),this.pdf.internal.out("Q");this.pdf.setPage(H),O&&this.ctxStack.length!==0&&(this.ctx=this.ctxStack.pop(),this.fillStyle=this.ctx.fillStyle,this.strokeStyle=this.ctx.strokeStyle,this.font=this.ctx.font,this.lineCap=this.ctx.lineCap,this.lineWidth=this.ctx.lineWidth,this.lineJoin=this.ctx.lineJoin,this.lineDash=this.ctx.lineDash,this.lineDashOffset=this.ctx.lineDashOffset)},f.prototype.toDataURL=function(){throw new Error("toDataUrl not implemented.")};var h=function(O){var H,R,M,K;if(O.isCanvasGradient===!0&&(O=O.getColor()),!O)return{r:0,g:0,b:0,a:0,style:O};if(/transparent|rgba\s*\(\s*(\d+)\s*,\s*(\d+)\s*,\s*(\d+)\s*,\s*0+\s*\)/.test(O))H=0,R=0,M=0,K=0;else{var W=/rgb\s*\(\s*(\d+)\s*,\s*(\d+)\s*,\s*(\d+)\s*\)/.exec(O);if(W!==null)H=parseInt(W[1]),R=parseInt(W[2]),M=parseInt(W[3]),K=1;else if((W=/rgba\s*\(\s*(\d+)\s*,\s*(\d+)\s*,\s*(\d+)\s*,\s*([\d.]+)\s*\)/.exec(O))!==null)H=parseInt(W[1]),R=parseInt(W[2]),M=parseInt(W[3]),K=parseFloat(W[4]);else{if(K=1,typeof O=="string"&&O.charAt(0)!=="#"){var D=new qee(O);O=D.ok?D.toHex():"#000000"}O.length===4?(H=O.substring(1,2),H+=H,R=O.substring(2,3),R+=R,M=O.substring(3,4),M+=M):(H=O.substring(1,3),R=O.substring(3,5),M=O.substring(5,7)),H=parseInt(H,16),R=parseInt(R,16),M=parseInt(M,16)}}return{r:H,g:R,b:M,a:K,style:O}},A=function(){return this.ctx.isFillTransparent||this.globalAlpha==0},m=function(){return!!(this.ctx.isStrokeTransparent||this.globalAlpha==0)};f.prototype.fillText=function(O,H,R,M){if(isNaN(H)||isNaN(R)||typeof O!="string")throw Da.error("jsPDF.context2d.fillText: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.fillText");if(M=isNaN(M)?void 0:M,!A.call(this)){var K=me(this.ctx.transform.rotation),W=this.ctx.transform.scaleX;T.call(this,{text:O,x:H,y:R,scale:W,angle:K,align:this.textAlign,maxWidth:M})}},f.prototype.strokeText=function(O,H,R,M){if(isNaN(H)||isNaN(R)||typeof O!="string")throw Da.error("jsPDF.context2d.strokeText: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.strokeText");if(!m.call(this)){M=isNaN(M)?void 0:M;var K=me(this.ctx.transform.rotation),W=this.ctx.transform.scaleX;T.call(this,{text:O,x:H,y:R,scale:W,renderingMode:"stroke",angle:K,align:this.textAlign,maxWidth:M})}},f.prototype.measureText=function(O){if(typeof O!="string")throw Da.error("jsPDF.context2d.measureText: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.measureText");var H=this.pdf,R=this.pdf.internal.scaleFactor,M=H.internal.getFontSize(),K=H.getStringUnitWidth(O)*M/H.internal.scaleFactor;return new function(W){var D=(W=W||{}).width||0;return Object.defineProperty(this,"width",{get:function(){return D}}),this}({width:K*=Math.round(96*R/72*1e4)/1e4})},f.prototype.scale=function(O,H){if(isNaN(O)||isNaN(H))throw Da.error("jsPDF.context2d.scale: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.scale");var R=new c(O,0,0,H,0,0);this.ctx.transform=this.ctx.transform.multiply(R)},f.prototype.rotate=function(O){if(isNaN(O))throw Da.error("jsPDF.context2d.rotate: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.rotate");var H=new c(Math.cos(O),Math.sin(O),-Math.sin(O),Math.cos(O),0,0);this.ctx.transform=this.ctx.transform.multiply(H)},f.prototype.translate=function(O,H){if(isNaN(O)||isNaN(H))throw Da.error("jsPDF.context2d.translate: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.translate");var R=new c(1,0,0,1,O,H);this.ctx.transform=this.ctx.transform.multiply(R)},f.prototype.transform=function(O,H,R,M,K,W){if(isNaN(O)||isNaN(H)||isNaN(R)||isNaN(M)||isNaN(K)||isNaN(W))throw Da.error("jsPDF.context2d.transform: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.transform");var D=new c(O,H,R,M,K,W);this.ctx.transform=this.ctx.transform.multiply(D)},f.prototype.setTransform=function(O,H,R,M,K,W){O=isNaN(O)?1:O,H=isNaN(H)?0:H,R=isNaN(R)?0:R,M=isNaN(M)?1:M,K=isNaN(K)?0:K,W=isNaN(W)?0:W,this.ctx.transform=new c(O,H,R,M,K,W)};var p=function(){return this.margin[0]>0||this.margin[1]>0||this.margin[2]>0||this.margin[3]>0};f.prototype.drawImage=function(O,H,R,M,K,W,D,L,Z){var ge=this.pdf.getImageProperties(O),U=1,Ge=1,ie=1,J=1;M!==void 0&&L!==void 0&&(ie=L/M,J=Z/K,U=ge.width/M*L/M,Ge=ge.height/K*Z/K),W===void 0&&(W=H,D=R,H=0,R=0),M!==void 0&&L===void 0&&(L=M,Z=K),M===void 0&&L===void 0&&(L=ge.width,Z=ge.height);var je=this.ctx.transform.decompose(),z=me(je.rotate.shx),Ae=new c,ye=(Ae=(Ae=(Ae=Ae.multiply(je.translate)).multiply(je.skew)).multiply(je.scale)).applyToRectangle(new l(W-H*ie,D-R*J,M*U,K*Ge));if(this.autoPaging){for(var Qe,st=g.call(this,ye),ut=[],De=0;De<st.length;De+=1)ut.indexOf(st[De])===-1&&ut.push(st[De]);b(ut);for(var it=ut[0],dt=ut[ut.length-1],ce=it;ce<dt+1;ce++){this.pdf.setPage(ce);var oe=this.pdf.internal.pageSize.width-this.margin[3]-this.margin[1],Me=ce===1?this.posY+this.margin[0]:this.margin[0],Le=this.pdf.internal.pageSize.height-this.posY-this.margin[0]-this.margin[2],ve=this.pdf.internal.pageSize.height-this.margin[0]-this.margin[2],le=ce===1?0:Le+(ce-2)*ve;if(this.ctx.clip_path.length!==0){var Ue=this.path;Qe=JSON.parse(JSON.stringify(this.ctx.clip_path)),this.path=y(Qe,this.posX+this.margin[3],-le+Me+this.ctx.prevPageLastElemOffset),j.call(this,"fill",!0),this.path=Ue}var rt=JSON.parse(JSON.stringify(ye));rt=y([rt],this.posX+this.margin[3],-le+Me+this.ctx.prevPageLastElemOffset)[0];var mt=(ce>it||ce<dt)&&p.call(this);mt&&(this.pdf.saveGraphicsState(),this.pdf.rect(this.margin[3],this.margin[0],oe,ve,null).clip().discardPath()),this.pdf.addImage(O,"JPEG",rt.x,rt.y,rt.w,rt.h,null,null,z),mt&&this.pdf.restoreGraphicsState()}}else this.pdf.addImage(O,"JPEG",ye.x,ye.y,ye.w,ye.h,null,null,z)};var g=function(O,H,R){var M=[];H=H||this.pdf.internal.pageSize.width,R=R||this.pdf.internal.pageSize.height-this.margin[0]-this.margin[2];var K=this.posY+this.ctx.prevPageLastElemOffset;switch(O.type){default:case"mt":case"lt":M.push(Math.floor((O.y+K)/R)+1);break;case"arc":M.push(Math.floor((O.y+K-O.radius)/R)+1),M.push(Math.floor((O.y+K+O.radius)/R)+1);break;case"qct":var W=ne(this.ctx.lastPoint.x,this.ctx.lastPoint.y,O.x1,O.y1,O.x,O.y);M.push(Math.floor((W.y+K)/R)+1),M.push(Math.floor((W.y+W.h+K)/R)+1);break;case"bct":var D=Pe(this.ctx.lastPoint.x,this.ctx.lastPoint.y,O.x1,O.y1,O.x2,O.y2,O.x,O.y);M.push(Math.floor((D.y+K)/R)+1),M.push(Math.floor((D.y+D.h+K)/R)+1);break;case"rect":M.push(Math.floor((O.y+K)/R)+1),M.push(Math.floor((O.y+O.h+K)/R)+1)}for(var L=0;L<M.length;L+=1)for(;this.pdf.internal.getNumberOfPages()<M[L];)x.call(this);return M},x=function(){var O=this.fillStyle,H=this.strokeStyle,R=this.font,M=this.lineCap,K=this.lineWidth,W=this.lineJoin;this.pdf.addPage(),this.fillStyle=O,this.strokeStyle=H,this.font=R,this.lineCap=M,this.lineWidth=K,this.lineJoin=W},y=function(O,H,R){for(var M=0;M<O.length;M++)switch(O[M].type){case"bct":O[M].x2+=H,O[M].y2+=R;case"qct":O[M].x1+=H,O[M].y1+=R;default:O[M].x+=H,O[M].y+=R}return O},b=function(O){return O.sort(function(H,R){return H-R})},w=function(O,H){var R=this.fillStyle,M=this.strokeStyle,K=this.lineCap,W=this.lineWidth,D=Math.abs(W*this.ctx.transform.scaleX),L=this.lineJoin;if(this.autoPaging){for(var Z,ge,U=JSON.parse(JSON.stringify(this.path)),Ge=JSON.parse(JSON.stringify(this.path)),ie=[],J=0;J<Ge.length;J++)if(Ge[J].x!==void 0)for(var je=g.call(this,Ge[J]),z=0;z<je.length;z+=1)ie.indexOf(je[z])===-1&&ie.push(je[z]);for(var Ae=0;Ae<ie.length;Ae++)for(;this.pdf.internal.getNumberOfPages()<ie[Ae];)x.call(this);b(ie);for(var ye=ie[0],Qe=ie[ie.length-1],st=ye;st<Qe+1;st++){this.pdf.setPage(st),this.fillStyle=R,this.strokeStyle=M,this.lineCap=K,this.lineWidth=D,this.lineJoin=L;var ut=this.pdf.internal.pageSize.width-this.margin[3]-this.margin[1],De=st===1?this.posY+this.margin[0]:this.margin[0],it=this.pdf.internal.pageSize.height-this.posY-this.margin[0]-this.margin[2],dt=this.pdf.internal.pageSize.height-this.margin[0]-this.margin[2],ce=st===1?0:it+(st-2)*dt;if(this.ctx.clip_path.length!==0){var oe=this.path;Z=JSON.parse(JSON.stringify(this.ctx.clip_path)),this.path=y(Z,this.posX+this.margin[3],-ce+De+this.ctx.prevPageLastElemOffset),j.call(this,O,!0),this.path=oe}if(ge=JSON.parse(JSON.stringify(U)),this.path=y(ge,this.posX+this.margin[3],-ce+De+this.ctx.prevPageLastElemOffset),H===!1||st===0){var Me=(st>ye||st<Qe)&&p.call(this);Me&&(this.pdf.saveGraphicsState(),this.pdf.rect(this.margin[3],this.margin[0],ut,dt,null).clip().discardPath()),j.call(this,O,H),Me&&this.pdf.restoreGraphicsState()}this.lineWidth=W}this.path=U}else this.lineWidth=D,j.call(this,O,H),this.lineWidth=W},j=function(O,H){if((O!=="stroke"||H||!m.call(this))&&(O==="stroke"||H||!A.call(this))){for(var R,M,K=[],W=this.path,D=0;D<W.length;D++){var L=W[D];switch(L.type){case"begin":K.push({begin:!0});break;case"close":K.push({close:!0});break;case"mt":K.push({start:L,deltas:[],abs:[]});break;case"lt":var Z=K.length;if(W[D-1]&&!isNaN(W[D-1].x)&&(R=[L.x-W[D-1].x,L.y-W[D-1].y],Z>0)){for(;Z>=0;Z--)if(K[Z-1].close!==!0&&K[Z-1].begin!==!0){K[Z-1].deltas.push(R),K[Z-1].abs.push(L);break}}break;case"bct":R=[L.x1-W[D-1].x,L.y1-W[D-1].y,L.x2-W[D-1].x,L.y2-W[D-1].y,L.x-W[D-1].x,L.y-W[D-1].y],K[K.length-1].deltas.push(R);break;case"qct":var ge=W[D-1].x+2/3*(L.x1-W[D-1].x),U=W[D-1].y+2/3*(L.y1-W[D-1].y),Ge=L.x+2/3*(L.x1-L.x),ie=L.y+2/3*(L.y1-L.y),J=L.x,je=L.y;R=[ge-W[D-1].x,U-W[D-1].y,Ge-W[D-1].x,ie-W[D-1].y,J-W[D-1].x,je-W[D-1].y],K[K.length-1].deltas.push(R);break;case"arc":K.push({deltas:[],abs:[],arc:!0}),Array.isArray(K[K.length-1].abs)&&K[K.length-1].abs.push(L)}}M=H?null:O==="stroke"?"stroke":"fill";for(var z=!1,Ae=0;Ae<K.length;Ae++)if(K[Ae].arc)for(var ye=K[Ae].abs,Qe=0;Qe<ye.length;Qe++){var st=ye[Qe];st.type==="arc"?E.call(this,st.x,st.y,st.radius,st.startAngle,st.endAngle,st.counterclockwise,void 0,H,!z):F.call(this,st.x,st.y),z=!0}else if(K[Ae].close===!0)this.pdf.internal.out("h"),z=!1;else if(K[Ae].begin!==!0){var ut=K[Ae].start.x,De=K[Ae].start.y;Y.call(this,K[Ae].deltas,ut,De),z=!0}M&&S.call(this,M),H&&k.call(this)}},I=function(O){var H=this.pdf.internal.getFontSize()/this.pdf.internal.scaleFactor,R=H*(this.pdf.internal.getLineHeightFactor()-1);switch(this.ctx.textBaseline){case"bottom":return O-R;case"top":return O+H-R;case"hanging":return O+H-2*R;case"middle":return O+H/2-R;default:return O}},_=function(O){return O+this.pdf.internal.getFontSize()/this.pdf.internal.scaleFactor*(this.pdf.internal.getLineHeightFactor()-1)};f.prototype.createLinearGradient=function(){var O=function(){};return O.colorStops=[],O.addColorStop=function(H,R){this.colorStops.push([H,R])},O.getColor=function(){return this.colorStops.length===0?"#000000":this.colorStops[0][1]},O.isCanvasGradient=!0,O},f.prototype.createPattern=function(){return this.createLinearGradient()},f.prototype.createRadialGradient=function(){return this.createLinearGradient()};var E=function(O,H,R,M,K,W,D,L,Z){for(var ge=ue.call(this,R,M,K,W),U=0;U<ge.length;U++){var Ge=ge[U];U===0&&(Z?P.call(this,Ge.x1+O,Ge.y1+H):F.call(this,Ge.x1+O,Ge.y1+H)),he.call(this,O,H,Ge.x2,Ge.y2,Ge.x3,Ge.y3,Ge.x4,Ge.y4)}L?k.call(this):S.call(this,D)},S=function(O){switch(O){case"stroke":this.pdf.internal.out("S");break;case"fill":this.pdf.internal.out("f")}},k=function(){this.pdf.clip(),this.pdf.discardPath()},P=function(O,H){this.pdf.internal.out(r(O)+" "+n(H)+" m")},T=function(O){var H;switch(O.align){case"right":case"end":H="right";break;case"center":H="center";break;default:H="left"}var R,M,K,W=this.pdf.getTextDimensions(O.text),D=I.call(this,O.y),L=_.call(this,D)-W.h,Z=this.ctx.transform.applyToPoint(new i(O.x,D));if(this.autoPaging){var ge=this.ctx.transform.decompose(),U=new c;U=(U=(U=U.multiply(ge.translate)).multiply(ge.skew)).multiply(ge.scale);for(var Ge=this.ctx.transform.applyToRectangle(new l(O.x,D,W.w,W.h)),ie=U.applyToRectangle(new l(O.x,L,W.w,W.h)),J=g.call(this,ie),je=[],z=0;z<J.length;z+=1)je.indexOf(J[z])===-1&&je.push(J[z]);b(je);for(var Ae=je[0],ye=je[je.length-1],Qe=Ae;Qe<ye+1;Qe++){this.pdf.setPage(Qe);var st=Qe===1?this.posY+this.margin[0]:this.margin[0],ut=this.pdf.internal.pageSize.height-this.posY-this.margin[0]-this.margin[2],De=this.pdf.internal.pageSize.height-this.margin[2],it=De-this.margin[0],dt=this.pdf.internal.pageSize.width-this.margin[1],ce=dt-this.margin[3],oe=Qe===1?0:ut+(Qe-2)*it;if(this.ctx.clip_path.length!==0){var Me=this.path;R=JSON.parse(JSON.stringify(this.ctx.clip_path)),this.path=y(R,this.posX+this.margin[3],-1*oe+st),j.call(this,"fill",!0),this.path=Me}var Le=y([JSON.parse(JSON.stringify(ie))],this.posX+this.margin[3],-oe+st+this.ctx.prevPageLastElemOffset)[0];O.scale>=.01&&(M=this.pdf.internal.getFontSize(),this.pdf.setFontSize(M*O.scale),K=this.lineWidth,this.lineWidth=K*O.scale);var ve=this.autoPaging!=="text";if(ve||Le.y+Le.h<=De){if(ve||Le.y>=st&&Le.x<=dt){var le=ve?O.text:this.pdf.splitTextToSize(O.text,O.maxWidth||dt-Le.x)[0],Ue=y([JSON.parse(JSON.stringify(Ge))],this.posX+this.margin[3],-oe+st+this.ctx.prevPageLastElemOffset)[0],rt=ve&&(Qe>Ae||Qe<ye)&&p.call(this);rt&&(this.pdf.saveGraphicsState(),this.pdf.rect(this.margin[3],this.margin[0],ce,it,null).clip().discardPath()),this.pdf.text(le,Ue.x,Ue.y,{angle:O.angle,align:H,renderingMode:O.renderingMode}),rt&&this.pdf.restoreGraphicsState()}}else Le.y<De&&(this.ctx.prevPageLastElemOffset+=De-Le.y);O.scale>=.01&&(this.pdf.setFontSize(M),this.lineWidth=K)}}else O.scale>=.01&&(M=this.pdf.internal.getFontSize(),this.pdf.setFontSize(M*O.scale),K=this.lineWidth,this.lineWidth=K*O.scale),this.pdf.text(O.text,Z.x+this.posX,Z.y+this.posY,{angle:O.angle,align:H,renderingMode:O.renderingMode,maxWidth:O.maxWidth}),O.scale>=.01&&(this.pdf.setFontSize(M),this.lineWidth=K)},F=function(O,H,R,M){R=R||0,M=M||0,this.pdf.internal.out(r(O+R)+" "+n(H+M)+" l")},Y=function(O,H,R){return this.pdf.lines(O,H,R,null,null)},he=function(O,H,R,M,K,W,D,L){this.pdf.internal.out([e(a(R+O)),e(s(M+H)),e(a(K+O)),e(s(W+H)),e(a(D+O)),e(s(L+H)),"c"].join(" "))},ue=function(O,H,R,M){for(var K=2*Math.PI,W=Math.PI/2;H>R;)H-=K;var D=Math.abs(R-H);D<K&&M&&(D=K-D);for(var L=[],Z=M?-1:1,ge=H;D>1e-5;){var U=ge+Z*Math.min(D,W);L.push(fe.call(this,O,ge,U)),D-=Math.abs(U-ge),ge=U}return L},fe=function(O,H,R){var M=(R-H)/2,K=O*Math.cos(M),W=O*Math.sin(M),D=K,L=-W,Z=D*D+L*L,ge=Z+D*K+L*W,U=4/3*(Math.sqrt(2*Z*ge)-ge)/(D*W-L*K),Ge=D-U*L,ie=L+U*D,J=Ge,je=-ie,z=M+H,Ae=Math.cos(z),ye=Math.sin(z);return{x1:O*Math.cos(H),y1:O*Math.sin(H),x2:Ge*Ae-ie*ye,y2:Ge*ye+ie*Ae,x3:J*Ae-je*ye,y3:J*ye+je*Ae,x4:O*Math.cos(R),y4:O*Math.sin(R)}},me=function(O){return 180*O/Math.PI},ne=function(O,H,R,M,K,W){var D=O+.5*(R-O),L=H+.5*(M-H),Z=K+.5*(R-K),ge=W+.5*(M-W),U=Math.min(O,K,D,Z),Ge=Math.max(O,K,D,Z),ie=Math.min(H,W,L,ge),J=Math.max(H,W,L,ge);return new l(U,ie,Ge-U,J-ie)},Pe=function(O,H,R,M,K,W,D,L){var Z,ge,U,Ge,ie,J,je,z,Ae,ye,Qe,st,ut,De,it=R-O,dt=M-H,ce=K-R,oe=W-M,Me=D-K,Le=L-W;for(ge=0;ge<41;ge++)Ae=(je=(U=O+(Z=ge/40)*it)+Z*((ie=R+Z*ce)-U))+Z*(ie+Z*(K+Z*Me-ie)-je),ye=(z=(Ge=H+Z*dt)+Z*((J=M+Z*oe)-Ge))+Z*(J+Z*(W+Z*Le-J)-z),ge==0?(Qe=Ae,st=ye,ut=Ae,De=ye):(Qe=Math.min(Qe,Ae),st=Math.min(st,ye),ut=Math.max(ut,Ae),De=Math.max(De,ye));return new l(Math.round(Qe),Math.round(st),Math.round(ut-Qe),Math.round(De-st))},Ie=function(){if(this.prevLineDash||this.ctx.lineDash.length||this.ctx.lineDashOffset){var O,H,R=(O=this.ctx.lineDash,H=this.ctx.lineDashOffset,JSON.stringify({lineDash:O,lineDashOffset:H}));this.prevLineDash!==R&&(this.pdf.setLineDash(this.ctx.lineDash,this.ctx.lineDashOffset),this.prevLineDash=R)}}})(Or.API),function(t){var e=function(i){var l,c,u,d,f,h,A,m,p,g;for(c=[],u=0,d=(i+=l="\0\0\0\0".slice(i.length%4||4)).length;d>u;u+=4)(f=(i.charCodeAt(u)<<24)+(i.charCodeAt(u+1)<<16)+(i.charCodeAt(u+2)<<8)+i.charCodeAt(u+3))!==0?(h=(f=((f=((f=((f=(f-(g=f%85))/85)-(p=f%85))/85)-(m=f%85))/85)-(A=f%85))/85)%85,c.push(h+33,A+33,m+33,p+33,g+33)):c.push(122);return function(x,y){for(var b=y;b>0;b--)x.pop()}(c,l.length),String.fromCharCode.apply(String,c)+"~>"},r=function(i){var l,c,u,d,f,h=String,A="length",m=255,p="charCodeAt",g="slice",x="replace";for(i[g](-2),i=i[g](0,-2)[x](/\s/g,"")[x]("z","!!!!!"),u=[],d=0,f=(i+=l="uuuuu"[g](i[A]%5||5))[A];f>d;d+=5)c=52200625*(i[p](d)-33)+614125*(i[p](d+1)-33)+7225*(i[p](d+2)-33)+85*(i[p](d+3)-33)+(i[p](d+4)-33),u.push(m&c>>24,m&c>>16,m&c>>8,m&c);return function(y,b){for(var w=b;w>0;w--)y.pop()}(u,l[A]),h.fromCharCode.apply(h,u)},n=function(i){return i.split("").map(function(l){return("0"+l.charCodeAt().toString(16)).slice(-2)}).join("")+">"},a=function(i){var l=new RegExp(/^([0-9A-Fa-f]{2})+$/);if((i=i.replace(/\s/g,"")).indexOf(">")!==-1&&(i=i.substr(0,i.indexOf(">"))),i.length%2&&(i+="0"),l.test(i)===!1)return"";for(var c="",u=0;u<i.length;u+=2)c+=String.fromCharCode("0x"+(i[u]+i[u+1]));return c},s=function(i){for(var l=new Uint8Array(i.length),c=i.length;c--;)l[c]=i.charCodeAt(c);return(l=LT(l)).reduce(function(u,d){return u+String.fromCharCode(d)},"")};t.processDataByFilters=function(i,l){var c=0,u=i||"",d=[];for(typeof(l=l||[])=="string"&&(l=[l]),c=0;c<l.length;c+=1)switch(l[c]){case"ASCII85Decode":case"/ASCII85Decode":u=r(u),d.push("/ASCII85Encode");break;case"ASCII85Encode":case"/ASCII85Encode":u=e(u),d.push("/ASCII85Decode");break;case"ASCIIHexDecode":case"/ASCIIHexDecode":u=a(u),d.push("/ASCIIHexEncode");break;case"ASCIIHexEncode":case"/ASCIIHexEncode":u=n(u),d.push("/ASCIIHexDecode");break;case"FlateEncode":case"/FlateEncode":u=s(u),d.push("/FlateDecode");break;default:throw new Error('The filter: "'+l[c]+'" is not implemented')}return{data:u,reverseChain:d.reverse().join(" ")}}}(Or.API),function(t){t.loadFile=function(e,r,n){return function(a,s,i){s=s!==!1,i=typeof i=="function"?i:function(){};var l=void 0;try{l=function(c,u,d){var f=new XMLHttpRequest,h=0,A=function(m){var p=m.length,g=[],x=String.fromCharCode;for(h=0;h<p;h+=1)g.push(x(255&m.charCodeAt(h)));return g.join("")};if(f.open("GET",c,!u),f.overrideMimeType("text/plain; charset=x-user-defined"),u===!1&&(f.onload=function(){f.status===200?d(A(this.responseText)):d(void 0)}),f.send(null),u&&f.status===200)return A(f.responseText)}(a,s,i)}catch{}return l}(e,r,n)},t.loadImageFile=t.loadFile}(Or.API),function(t){function e(){return(un.html2canvas?Promise.resolve(un.html2canvas):EA(()=>Promise.resolve().then(()=>k6),[])).catch(function(l){return Promise.reject(new Error("Could not load html2canvas: "+l))}).then(function(l){return l.default?l.default:l})}function r(){return(un.DOMPurify?Promise.resolve(un.DOMPurify):EA(()=>import("./purify.es-CQJ0hv7W.js"),[])).catch(function(l){return Promise.reject(new Error("Could not load dompurify: "+l))}).then(function(l){return l.default?l.default:l})}var n=function(l){var c=wa(l);return c==="undefined"?"undefined":c==="string"||l instanceof String?"string":c==="number"||l instanceof Number?"number":c==="function"||l instanceof Function?"function":l&&l.constructor===Array?"array":l&&l.nodeType===1?"element":c==="object"?"object":"unknown"},a=function(l,c){var u=document.createElement(l);for(var d in c.className&&(u.className=c.className),c.innerHTML&&c.dompurify&&(u.innerHTML=c.dompurify.sanitize(c.innerHTML)),c.style)u.style[d]=c.style[d];return u},s=function l(c,u){for(var d=c.nodeType===3?document.createTextNode(c.nodeValue):c.cloneNode(!1),f=c.firstChild;f;f=f.nextSibling)u!==!0&&f.nodeType===1&&f.nodeName==="SCRIPT"||d.appendChild(l(f,u));return c.nodeType===1&&(c.nodeName==="CANVAS"?(d.width=c.width,d.height=c.height,d.getContext("2d").drawImage(c,0,0)):c.nodeName!=="TEXTAREA"&&c.nodeName!=="SELECT"||(d.value=c.value),d.addEventListener("load",function(){d.scrollTop=c.scrollTop,d.scrollLeft=c.scrollLeft},!0)),d},i=function l(c){var u=Object.assign(l.convert(Promise.resolve()),JSON.parse(JSON.stringify(l.template))),d=l.convert(Promise.resolve(),u);return(d=d.setProgress(1,l,1,[l])).set(c)};(i.prototype=Object.create(Promise.prototype)).constructor=i,i.convert=function(l,c){return l.__proto__=c||i.prototype,l},i.template={prop:{src:null,container:null,overlay:null,canvas:null,img:null,pdf:null,pageSize:null,callback:function(){}},progress:{val:0,state:null,n:0,stack:[]},opt:{filename:"file.pdf",margin:[0,0,0,0],enableLinks:!0,x:0,y:0,html2canvas:{},jsPDF:{},backgroundColor:"transparent"}},i.prototype.from=function(l,c){return this.then(function(){switch(c=c||function(u){switch(n(u)){case"string":return"string";case"element":return u.nodeName.toLowerCase()==="canvas"?"canvas":"element";default:return"unknown"}}(l),c){case"string":return this.then(r).then(function(u){return this.set({src:a("div",{innerHTML:l,dompurify:u})})});case"element":return this.set({src:l});case"canvas":return this.set({canvas:l});case"img":return this.set({img:l});default:return this.error("Unknown source type.")}})},i.prototype.to=function(l){switch(l){case"container":return this.toContainer();case"canvas":return this.toCanvas();case"img":return this.toImg();case"pdf":return this.toPdf();default:return this.error("Invalid target.")}},i.prototype.toContainer=function(){return this.thenList([function(){return this.prop.src||this.error("Cannot duplicate - no source HTML.")},function(){return this.prop.pageSize||this.setPageSize()}]).then(function(){var l={position:"relative",display:"inline-block",width:(typeof this.opt.width!="number"||isNaN(this.opt.width)||typeof this.opt.windowWidth!="number"||isNaN(this.opt.windowWidth)?Math.max(this.prop.src.clientWidth,this.prop.src.scrollWidth,this.prop.src.offsetWidth):this.opt.windowWidth)+"px",left:0,right:0,top:0,margin:"auto",backgroundColor:this.opt.backgroundColor},c=s(this.prop.src,this.opt.html2canvas.javascriptEnabled);c.tagName==="BODY"&&(l.height=Math.max(document.body.scrollHeight,document.body.offsetHeight,document.documentElement.clientHeight,document.documentElement.scrollHeight,document.documentElement.offsetHeight)+"px"),this.prop.overlay=a("div",{className:"html2pdf__overlay",style:{position:"fixed",overflow:"hidden",zIndex:1e3,left:"-100000px",right:0,bottom:0,top:0}}),this.prop.container=a("div",{className:"html2pdf__container",style:l}),this.prop.container.appendChild(c),this.prop.container.firstChild.appendChild(a("div",{style:{clear:"both",border:"0 none transparent",margin:0,padding:0,height:0}})),this.prop.container.style.float="none",this.prop.overlay.appendChild(this.prop.container),document.body.appendChild(this.prop.overlay),this.prop.container.firstChild.style.position="relative",this.prop.container.height=Math.max(this.prop.container.firstChild.clientHeight,this.prop.container.firstChild.scrollHeight,this.prop.container.firstChild.offsetHeight)+"px"})},i.prototype.toCanvas=function(){var l=[function(){return document.body.contains(this.prop.container)||this.toContainer()}];return this.thenList(l).then(e).then(function(c){var u=Object.assign({},this.opt.html2canvas);return delete u.onrendered,c(this.prop.container,u)}).then(function(c){(this.opt.html2canvas.onrendered||function(){})(c),this.prop.canvas=c,document.body.removeChild(this.prop.overlay)})},i.prototype.toContext2d=function(){var l=[function(){return document.body.contains(this.prop.container)||this.toContainer()}];return this.thenList(l).then(e).then(function(c){var u=this.opt.jsPDF,d=this.opt.fontFaces,f=typeof this.opt.width!="number"||isNaN(this.opt.width)||typeof this.opt.windowWidth!="number"||isNaN(this.opt.windowWidth)?1:this.opt.width/this.opt.windowWidth,h=Object.assign({async:!0,allowTaint:!0,scale:f,scrollX:this.opt.scrollX||0,scrollY:this.opt.scrollY||0,backgroundColor:"#ffffff",imageTimeout:15e3,logging:!0,proxy:null,removeContainer:!0,foreignObjectRendering:!1,useCORS:!1},this.opt.html2canvas);if(delete h.onrendered,u.context2d.autoPaging=this.opt.autoPaging===void 0||this.opt.autoPaging,u.context2d.posX=this.opt.x,u.context2d.posY=this.opt.y,u.context2d.margin=this.opt.margin,u.context2d.fontFaces=d,d)for(var A=0;A<d.length;++A){var m=d[A],p=m.src.find(function(g){return g.format==="truetype"});p&&u.addFont(p.url,m.ref.name,m.ref.style)}return h.windowHeight=h.windowHeight||0,h.windowHeight=h.windowHeight==0?Math.max(this.prop.container.clientHeight,this.prop.container.scrollHeight,this.prop.container.offsetHeight):h.windowHeight,u.context2d.save(!0),c(this.prop.container,h)}).then(function(c){this.opt.jsPDF.context2d.restore(!0),(this.opt.html2canvas.onrendered||function(){})(c),this.prop.canvas=c,document.body.removeChild(this.prop.overlay)})},i.prototype.toImg=function(){return this.thenList([function(){return this.prop.canvas||this.toCanvas()}]).then(function(){var l=this.prop.canvas.toDataURL("image/"+this.opt.image.type,this.opt.image.quality);this.prop.img=document.createElement("img"),this.prop.img.src=l})},i.prototype.toPdf=function(){return this.thenList([function(){return this.toContext2d()}]).then(function(){this.prop.pdf=this.prop.pdf||this.opt.jsPDF})},i.prototype.output=function(l,c,u){return(u=u||"pdf").toLowerCase()==="img"||u.toLowerCase()==="image"?this.outputImg(l,c):this.outputPdf(l,c)},i.prototype.outputPdf=function(l,c){return this.thenList([function(){return this.prop.pdf||this.toPdf()}]).then(function(){return this.prop.pdf.output(l,c)})},i.prototype.outputImg=function(l){return this.thenList([function(){return this.prop.img||this.toImg()}]).then(function(){switch(l){case void 0:case"img":return this.prop.img;case"datauristring":case"dataurlstring":return this.prop.img.src;case"datauri":case"dataurl":return document.location.href=this.prop.img.src;default:throw'Image output type "'+l+'" is not supported.'}})},i.prototype.save=function(l){return this.thenList([function(){return this.prop.pdf||this.toPdf()}]).set(l?{filename:l}:null).then(function(){this.prop.pdf.save(this.opt.filename)})},i.prototype.doCallback=function(){return this.thenList([function(){return this.prop.pdf||this.toPdf()}]).then(function(){this.prop.callback(this.prop.pdf)})},i.prototype.set=function(l){if(n(l)!=="object")return this;var c=Object.keys(l||{}).map(function(u){if(u in i.template.prop)return function(){this.prop[u]=l[u]};switch(u){case"margin":return this.setMargin.bind(this,l.margin);case"jsPDF":return function(){return this.opt.jsPDF=l.jsPDF,this.setPageSize()};case"pageSize":return this.setPageSize.bind(this,l.pageSize);default:return function(){this.opt[u]=l[u]}}},this);return this.then(function(){return this.thenList(c)})},i.prototype.get=function(l,c){return this.then(function(){var u=l in i.template.prop?this.prop[l]:this.opt[l];return c?c(u):u})},i.prototype.setMargin=function(l){return this.then(function(){switch(n(l)){case"number":l=[l,l,l,l];case"array":if(l.length===2&&(l=[l[0],l[1],l[0],l[1]]),l.length===4)break;default:return this.error("Invalid margin array.")}this.opt.margin=l}).then(this.setPageSize)},i.prototype.setPageSize=function(l){function c(u,d){return Math.floor(u*d/72*96)}return this.then(function(){(l=l||Or.getPageSize(this.opt.jsPDF)).hasOwnProperty("inner")||(l.inner={width:l.width-this.opt.margin[1]-this.opt.margin[3],height:l.height-this.opt.margin[0]-this.opt.margin[2]},l.inner.px={width:c(l.inner.width,l.k),height:c(l.inner.height,l.k)},l.inner.ratio=l.inner.height/l.inner.width),this.prop.pageSize=l})},i.prototype.setProgress=function(l,c,u,d){return l!=null&&(this.progress.val=l),c!=null&&(this.progress.state=c),u!=null&&(this.progress.n=u),d!=null&&(this.progress.stack=d),this.progress.ratio=this.progress.val/this.progress.state,this},i.prototype.updateProgress=function(l,c,u,d){return this.setProgress(l?this.progress.val+l:null,c||null,u?this.progress.n+u:null,d?this.progress.stack.concat(d):null)},i.prototype.then=function(l,c){var u=this;return this.thenCore(l,c,function(d,f){return u.updateProgress(null,null,1,[d]),Promise.prototype.then.call(this,function(h){return u.updateProgress(null,d),h}).then(d,f).then(function(h){return u.updateProgress(1),h})})},i.prototype.thenCore=function(l,c,u){u=u||Promise.prototype.then;var d=this;l&&(l=l.bind(d)),c&&(c=c.bind(d));var f=Promise.toString().indexOf("[native code]")!==-1&&Promise.name==="Promise"?d:i.convert(Object.assign({},d),Promise.prototype),h=u.call(f,l,c);return i.convert(h,d.__proto__)},i.prototype.thenExternal=function(l,c){return Promise.prototype.then.call(this,l,c)},i.prototype.thenList=function(l){var c=this;return l.forEach(function(u){c=c.thenCore(u)}),c},i.prototype.catch=function(l){l&&(l=l.bind(this));var c=Promise.prototype.catch.call(this,l);return i.convert(c,this)},i.prototype.catchExternal=function(l){return Promise.prototype.catch.call(this,l)},i.prototype.error=function(l){return this.then(function(){throw new Error(l)})},i.prototype.using=i.prototype.set,i.prototype.saveAs=i.prototype.save,i.prototype.export=i.prototype.output,i.prototype.run=i.prototype.then,Or.getPageSize=function(l,c,u){if(wa(l)==="object"){var d=l;l=d.orientation,c=d.unit||c,u=d.format||u}c=c||"mm",u=u||"a4",l=(""+(l||"P")).toLowerCase();var f,h=(""+u).toLowerCase(),A={a0:[2383.94,3370.39],a1:[1683.78,2383.94],a2:[1190.55,1683.78],a3:[841.89,1190.55],a4:[595.28,841.89],a5:[419.53,595.28],a6:[297.64,419.53],a7:[209.76,297.64],a8:[147.4,209.76],a9:[104.88,147.4],a10:[73.7,104.88],b0:[2834.65,4008.19],b1:[2004.09,2834.65],b2:[1417.32,2004.09],b3:[1000.63,1417.32],b4:[708.66,1000.63],b5:[498.9,708.66],b6:[354.33,498.9],b7:[249.45,354.33],b8:[175.75,249.45],b9:[124.72,175.75],b10:[87.87,124.72],c0:[2599.37,3676.54],c1:[1836.85,2599.37],c2:[1298.27,1836.85],c3:[918.43,1298.27],c4:[649.13,918.43],c5:[459.21,649.13],c6:[323.15,459.21],c7:[229.61,323.15],c8:[161.57,229.61],c9:[113.39,161.57],c10:[79.37,113.39],dl:[311.81,623.62],letter:[612,792],"government-letter":[576,756],legal:[612,1008],"junior-legal":[576,360],ledger:[1224,792],tabloid:[792,1224],"credit-card":[153,243]};switch(c){case"pt":f=1;break;case"mm":f=72/25.4;break;case"cm":f=72/2.54;break;case"in":f=72;break;case"px":f=.75;break;case"pc":case"em":f=12;break;case"ex":f=6;break;default:throw"Invalid unit: "+c}var m,p=0,g=0;if(A.hasOwnProperty(h))p=A[h][1]/f,g=A[h][0]/f;else try{p=u[1],g=u[0]}catch{throw new Error("Invalid format: "+u)}if(l==="p"||l==="portrait")l="p",g>p&&(m=g,g=p,p=m);else{if(l!=="l"&&l!=="landscape")throw"Invalid orientation: "+l;l="l",p>g&&(m=g,g=p,p=m)}return{width:g,height:p,unit:c,k:f,orientation:l}},t.html=function(l,c){(c=c||{}).callback=c.callback||function(){},c.html2canvas=c.html2canvas||{},c.html2canvas.canvas=c.html2canvas.canvas||this.canvas,c.jsPDF=c.jsPDF||this,c.fontFaces=c.fontFaces?c.fontFaces.map(j5):null;var u=new i(c);return c.worker?u:u.from(l).doCallback()}}(Or.API),Or.API.addJS=function(t){return _Q=t,this.internal.events.subscribe("postPutResources",function(){aC=this.internal.newObject(),this.internal.out("<<"),this.internal.out("/Names [(EmbeddedJS) "+(aC+1)+" 0 R]"),this.internal.out(">>"),this.internal.out("endobj"),CQ=this.internal.newObject(),this.internal.out("<<"),this.internal.out("/S /JavaScript"),this.internal.out("/JS ("+_Q+")"),this.internal.out(">>"),this.internal.out("endobj")}),this.internal.events.subscribe("putCatalog",function(){aC!==void 0&&CQ!==void 0&&this.internal.out("/Names <</JavaScript "+aC+" 0 R>>")}),this},function(t){var e;t.events.push(["postPutResources",function(){var r=this,n=/^(\d+) 0 obj$/;if(this.outline.root.children.length>0)for(var a=r.outline.render().split(/\r\n/),s=0;s<a.length;s++){var i=a[s],l=n.exec(i);if(l!=null){var c=l[1];r.internal.newObjectDeferredBegin(c,!1)}r.internal.write(i)}if(this.outline.createNamedDestinations){var u=this.internal.pages.length,d=[];for(s=0;s<u;s++){var f=r.internal.newObject();d.push(f);var h=r.internal.getPageInfo(s+1);r.internal.write("<< /D["+h.objId+" 0 R /XYZ null null null]>> endobj")}var A=r.internal.newObject();for(r.internal.write("<< /Names [ "),s=0;s<d.length;s++)r.internal.write("(page_"+(s+1)+")"+d[s]+" 0 R");r.internal.write(" ] >>","endobj"),e=r.internal.newObject(),r.internal.write("<< /Dests "+A+" 0 R"),r.internal.write(">>","endobj")}}]),t.events.push(["putCatalog",function(){var r=this;r.outline.root.children.length>0&&(r.internal.write("/Outlines",this.outline.makeRef(this.outline.root)),this.outline.createNamedDestinations&&r.internal.write("/Names "+e+" 0 R"))}]),t.events.push(["initialized",function(){var r=this;r.outline={createNamedDestinations:!1,root:{children:[]}},r.outline.add=function(n,a,s){var i={title:a,options:s,children:[]};return n==null&&(n=this.root),n.children.push(i),i},r.outline.render=function(){return this.ctx={},this.ctx.val="",this.ctx.pdf=r,this.genIds_r(this.root),this.renderRoot(this.root),this.renderItems(this.root),this.ctx.val},r.outline.genIds_r=function(n){n.id=r.internal.newObjectDeferred();for(var a=0;a<n.children.length;a++)this.genIds_r(n.children[a])},r.outline.renderRoot=function(n){this.objStart(n),this.line("/Type /Outlines"),n.children.length>0&&(this.line("/First "+this.makeRef(n.children[0])),this.line("/Last "+this.makeRef(n.children[n.children.length-1]))),this.line("/Count "+this.count_r({count:0},n)),this.objEnd()},r.outline.renderItems=function(n){for(var a=this.ctx.pdf.internal.getVerticalCoordinateString,s=0;s<n.children.length;s++){var i=n.children[s];this.objStart(i),this.line("/Title "+this.makeString(i.title)),this.line("/Parent "+this.makeRef(n)),s>0&&this.line("/Prev "+this.makeRef(n.children[s-1])),s<n.children.length-1&&this.line("/Next "+this.makeRef(n.children[s+1])),i.children.length>0&&(this.line("/First "+this.makeRef(i.children[0])),this.line("/Last "+this.makeRef(i.children[i.children.length-1])));var l=this.count=this.count_r({count:0},i);if(l>0&&this.line("/Count "+l),i.options&&i.options.pageNumber){var c=r.internal.getPageInfo(i.options.pageNumber);this.line("/Dest ["+c.objId+" 0 R /XYZ 0 "+a(0)+" 0]")}this.objEnd()}for(var u=0;u<n.children.length;u++)this.renderItems(n.children[u])},r.outline.line=function(n){this.ctx.val+=n+`\r
`},r.outline.makeRef=function(n){return n.id+" 0 R"},r.outline.makeString=function(n){return"("+r.internal.pdfEscape(n)+")"},r.outline.objStart=function(n){this.ctx.val+=`\r
`+n.id+` 0 obj\r
<<\r
`},r.outline.objEnd=function(){this.ctx.val+=`>> \r
endobj\r
`},r.outline.count_r=function(n,a){for(var s=0;s<a.children.length;s++)n.count++,this.count_r(n,a.children[s]);return n.count}}])}(Or.API),function(t){var e=[192,193,194,195,196,197,198,199];t.processJPEG=function(r,n,a,s,i,l){var c,u=this.decode.DCT_DECODE,d=null;if(typeof r=="string"||this.__addimage__.isArrayBuffer(r)||this.__addimage__.isArrayBufferView(r)){switch(r=i||r,r=this.__addimage__.isArrayBuffer(r)?new Uint8Array(r):r,c=function(f){for(var h,A=256*f.charCodeAt(4)+f.charCodeAt(5),m=f.length,p={width:0,height:0,numcomponents:1},g=4;g<m;g+=2){if(g+=A,e.indexOf(f.charCodeAt(g+1))!==-1){h=256*f.charCodeAt(g+5)+f.charCodeAt(g+6),p={width:256*f.charCodeAt(g+7)+f.charCodeAt(g+8),height:h,numcomponents:f.charCodeAt(g+9)};break}A=256*f.charCodeAt(g+2)+f.charCodeAt(g+3)}return p}(r=this.__addimage__.isArrayBufferView(r)?this.__addimage__.arrayBufferToBinaryString(r):r),c.numcomponents){case 1:l=this.color_spaces.DEVICE_GRAY;break;case 4:l=this.color_spaces.DEVICE_CMYK;break;case 3:l=this.color_spaces.DEVICE_RGB}d={data:r,width:c.width,height:c.height,colorSpace:l,bitsPerComponent:8,filter:u,index:n,alias:a}}return d}}(Or.API),Or.API.processPNG=function(t,e,r,n){if(this.__addimage__.isArrayBuffer(t)&&(t=new Uint8Array(t)),this.__addimage__.isArrayBufferView(t)){var a,s=HEe(t,{checkCrc:!0}),i=s.width,l=s.height,c=s.channels,u=s.palette,d=s.depth;a=u&&c===1?function(E){for(var S=E.width,k=E.height,P=E.data,T=E.palette,F=E.depth,Y=!1,he=[],ue=[],fe=void 0,me=!1,ne=0,Pe=0;Pe<T.length;Pe++){var Ie=j9(T[Pe],4),O=Ie[0],H=Ie[1],R=Ie[2],M=Ie[3];he.push(O,H,R),M!=null&&(M===0?(ne++,ue.length<1&&ue.push(Pe)):M<255&&(me=!0))}if(me||ne>1){Y=!0,ue=void 0;var K=S*k;fe=new Uint8Array(K);for(var W=new DataView(P.buffer),D=0;D<K;D++){var L=P5(W,D,F),Z=j9(T[L],4)[3];fe[D]=Z}}else ne===0&&(ue=void 0);return{colorSpace:"Indexed",colorsPerPixel:1,sMaskBitsPerComponent:Y?8:void 0,colorBytes:P,alphaBytes:fe,needSMask:Y,palette:he,mask:ue}}(s):c===2||c===4?function(E){for(var S=E.data,k=E.width,P=E.height,T=E.channels,F=E.depth,Y=T===2?"DeviceGray":"DeviceRGB",he=T-1,ue=k*P,fe=he,me=ue*fe,ne=1*ue,Pe=Math.ceil(me*F/8),Ie=Math.ceil(ne*F/8),O=new Uint8Array(Pe),H=new Uint8Array(Ie),R=new DataView(S.buffer),M=new DataView(O.buffer),K=new DataView(H.buffer),W=!1,D=0;D<ue;D++){for(var L=D*T,Z=0;Z<fe;Z++)FQ(M,P5(R,L+Z,F),D*fe+Z,F);var ge=P5(R,L+fe,F);ge<(1<<F)-1&&(W=!0),FQ(K,ge,1*D,F)}return{colorSpace:Y,colorsPerPixel:he,sMaskBitsPerComponent:W?F:void 0,colorBytes:O,alphaBytes:H,needSMask:W}}(s):function(E){var S=E.data,k=E.channels===1?"DeviceGray":"DeviceRGB";return{colorSpace:k,colorsPerPixel:k==="DeviceGray"?1:3,colorBytes:S instanceof Uint16Array?function(P){for(var T=P.length,F=new Uint8Array(2*T),Y=new DataView(F.buffer,F.byteOffset,F.byteLength),he=0;he<T;he++)Y.setUint16(2*he,P[he],!1);return F}(S):S,needSMask:!1}}(s);var f,h,A,m=a,p=m.colorSpace,g=m.colorsPerPixel,x=m.sMaskBitsPerComponent,y=m.colorBytes,b=m.alphaBytes,w=m.needSMask,j=m.palette,I=m.mask,_=null;return n!==Or.API.image_compression.NONE&&typeof LT=="function"?(_=function(E){var S;switch(E){case Or.API.image_compression.FAST:S=11;break;case Or.API.image_compression.MEDIUM:S=13;break;case Or.API.image_compression.SLOW:S=14;break;default:S=12}return S}(n),f=this.decode.FLATE_DECODE,h="/Predictor ".concat(_," /Colors ").concat(g," /BitsPerComponent ").concat(d," /Columns ").concat(i),t=jQ(y,Math.ceil(i*g*d/8),g,d,n),w&&(A=jQ(b,Math.ceil(i*x/8),1,x,n))):(f=void 0,h=void 0,t=y,w&&(A=b)),(this.__addimage__.isArrayBuffer(t)||this.__addimage__.isArrayBufferView(t))&&(t=this.__addimage__.arrayBufferToBinaryString(t)),(A&&this.__addimage__.isArrayBuffer(A)||this.__addimage__.isArrayBufferView(A))&&(A=this.__addimage__.arrayBufferToBinaryString(A)),{alias:r,data:t,index:e,filter:f,decodeParameters:h,transparency:I,palette:j,sMask:A,predictor:_,width:i,height:l,bitsPerComponent:d,sMaskBitsPerComponent:x,colorSpace:p}}},function(t){t.processGIF89A=function(e,r,n,a){var s=new dSe(e),i=s.width,l=s.height,c=[];s.decodeAndBlitFrameRGBA(0,c);var u={data:c,width:i,height:l},d=new T5(100).encode(u,100);return t.processJPEG.call(this,d,r,n,a)},t.processGIF87A=t.processGIF89A}(Or.API),ld.prototype.parseHeader=function(){if(this.fileSize=this.datav.getUint32(this.pos,!0),this.pos+=4,this.reserved=this.datav.getUint32(this.pos,!0),this.pos+=4,this.offset=this.datav.getUint32(this.pos,!0),this.pos+=4,this.headerSize=this.datav.getUint32(this.pos,!0),this.pos+=4,this.width=this.datav.getUint32(this.pos,!0),this.pos+=4,this.height=this.datav.getInt32(this.pos,!0),this.pos+=4,this.planes=this.datav.getUint16(this.pos,!0),this.pos+=2,this.bitPP=this.datav.getUint16(this.pos,!0),this.pos+=2,this.compress=this.datav.getUint32(this.pos,!0),this.pos+=4,this.rawSize=this.datav.getUint32(this.pos,!0),this.pos+=4,this.hr=this.datav.getUint32(this.pos,!0),this.pos+=4,this.vr=this.datav.getUint32(this.pos,!0),this.pos+=4,this.colors=this.datav.getUint32(this.pos,!0),this.pos+=4,this.importantColors=this.datav.getUint32(this.pos,!0),this.pos+=4,this.bitPP===16&&this.is_with_alpha&&(this.bitPP=15),this.bitPP<15){var t=this.colors===0?1<<this.bitPP:this.colors;this.palette=new Array(t);for(var e=0;e<t;e++){var r=this.datav.getUint8(this.pos++,!0),n=this.datav.getUint8(this.pos++,!0),a=this.datav.getUint8(this.pos++,!0),s=this.datav.getUint8(this.pos++,!0);this.palette[e]={red:a,green:n,blue:r,quad:s}}}this.height<0&&(this.height*=-1,this.bottom_up=!1)},ld.prototype.parseBGR=function(){this.pos=this.offset;try{var t="bit"+this.bitPP,e=this.width*this.height*4;this.data=new Uint8Array(e),this[t]()}catch(r){Da.log("bit decode error:"+r)}},ld.prototype.bit1=function(){var t,e=Math.ceil(this.width/8),r=e%4;for(t=this.height-1;t>=0;t--){for(var n=this.bottom_up?t:this.height-1-t,a=0;a<e;a++)for(var s=this.datav.getUint8(this.pos++,!0),i=n*this.width*4+8*a*4,l=0;l<8&&8*a+l<this.width;l++){var c=this.palette[s>>7-l&1];this.data[i+4*l]=c.blue,this.data[i+4*l+1]=c.green,this.data[i+4*l+2]=c.red,this.data[i+4*l+3]=255}r!==0&&(this.pos+=4-r)}},ld.prototype.bit4=function(){for(var t=Math.ceil(this.width/2),e=t%4,r=this.height-1;r>=0;r--){for(var n=this.bottom_up?r:this.height-1-r,a=0;a<t;a++){var s=this.datav.getUint8(this.pos++,!0),i=n*this.width*4+2*a*4,l=s>>4,c=15&s,u=this.palette[l];if(this.data[i]=u.blue,this.data[i+1]=u.green,this.data[i+2]=u.red,this.data[i+3]=255,2*a+1>=this.width)break;u=this.palette[c],this.data[i+4]=u.blue,this.data[i+4+1]=u.green,this.data[i+4+2]=u.red,this.data[i+4+3]=255}e!==0&&(this.pos+=4-e)}},ld.prototype.bit8=function(){for(var t=this.width%4,e=this.height-1;e>=0;e--){for(var r=this.bottom_up?e:this.height-1-e,n=0;n<this.width;n++){var a=this.datav.getUint8(this.pos++,!0),s=r*this.width*4+4*n;if(a<this.palette.length){var i=this.palette[a];this.data[s]=i.red,this.data[s+1]=i.green,this.data[s+2]=i.blue,this.data[s+3]=255}else this.data[s]=255,this.data[s+1]=255,this.data[s+2]=255,this.data[s+3]=255}t!==0&&(this.pos+=4-t)}},ld.prototype.bit15=function(){for(var t=this.width%3,e=parseInt("11111",2),r=this.height-1;r>=0;r--){for(var n=this.bottom_up?r:this.height-1-r,a=0;a<this.width;a++){var s=this.datav.getUint16(this.pos,!0);this.pos+=2;var i=(s&e)/e*255|0,l=(s>>5&e)/e*255|0,c=(s>>10&e)/e*255|0,u=s>>15?255:0,d=n*this.width*4+4*a;this.data[d]=c,this.data[d+1]=l,this.data[d+2]=i,this.data[d+3]=u}this.pos+=t}},ld.prototype.bit16=function(){for(var t=this.width%3,e=parseInt("11111",2),r=parseInt("111111",2),n=this.height-1;n>=0;n--){for(var a=this.bottom_up?n:this.height-1-n,s=0;s<this.width;s++){var i=this.datav.getUint16(this.pos,!0);this.pos+=2;var l=(i&e)/e*255|0,c=(i>>5&r)/r*255|0,u=(i>>11)/e*255|0,d=a*this.width*4+4*s;this.data[d]=u,this.data[d+1]=c,this.data[d+2]=l,this.data[d+3]=255}this.pos+=t}},ld.prototype.bit24=function(){for(var t=this.height-1;t>=0;t--){for(var e=this.bottom_up?t:this.height-1-t,r=0;r<this.width;r++){var n=this.datav.getUint8(this.pos++,!0),a=this.datav.getUint8(this.pos++,!0),s=this.datav.getUint8(this.pos++,!0),i=e*this.width*4+4*r;this.data[i]=s,this.data[i+1]=a,this.data[i+2]=n,this.data[i+3]=255}this.pos+=this.width%4}},ld.prototype.bit32=function(){for(var t=this.height-1;t>=0;t--)for(var e=this.bottom_up?t:this.height-1-t,r=0;r<this.width;r++){var n=this.datav.getUint8(this.pos++,!0),a=this.datav.getUint8(this.pos++,!0),s=this.datav.getUint8(this.pos++,!0),i=this.datav.getUint8(this.pos++,!0),l=e*this.width*4+4*r;this.data[l]=s,this.data[l+1]=a,this.data[l+2]=n,this.data[l+3]=i}},ld.prototype.getData=function(){return this.data},function(t){t.processBMP=function(e,r,n,a){var s=new ld(e,!1),i=s.width,l=s.height,c={data:s.getData(),width:i,height:l},u=new T5(100).encode(c,100);return t.processJPEG.call(this,u,r,n,a)}}(Or.API),DQ.prototype.getData=function(){return this.data},function(t){t.processWEBP=function(e,r,n,a){var s=new DQ(e),i=s.width,l=s.height,c={data:s.getData(),width:i,height:l},u=new T5(100).encode(c,100);return t.processJPEG.call(this,u,r,n,a)}}(Or.API),Or.API.processRGBA=function(t,e,r){for(var n=t.data,a=n.length,s=new Uint8Array(a/4*3),i=new Uint8Array(a/4),l=0,c=0,u=0;u<a;u+=4){var d=n[u],f=n[u+1],h=n[u+2],A=n[u+3];s[l++]=d,s[l++]=f,s[l++]=h,i[c++]=A}var m=this.__addimage__.arrayBufferToBinaryString(s);return{alpha:this.__addimage__.arrayBufferToBinaryString(i),data:m,index:e,alias:r,colorSpace:"DeviceRGB",bitsPerComponent:8,width:t.width,height:t.height}},Or.API.setLanguage=function(t){return this.internal.languageSettings===void 0&&(this.internal.languageSettings={},this.internal.languageSettings.isSubscribed=!1),{af:"Afrikaans",sq:"Albanian",ar:"Arabic (Standard)","ar-DZ":"Arabic (Algeria)","ar-BH":"Arabic (Bahrain)","ar-EG":"Arabic (Egypt)","ar-IQ":"Arabic (Iraq)","ar-JO":"Arabic (Jordan)","ar-KW":"Arabic (Kuwait)","ar-LB":"Arabic (Lebanon)","ar-LY":"Arabic (Libya)","ar-MA":"Arabic (Morocco)","ar-OM":"Arabic (Oman)","ar-QA":"Arabic (Qatar)","ar-SA":"Arabic (Saudi Arabia)","ar-SY":"Arabic (Syria)","ar-TN":"Arabic (Tunisia)","ar-AE":"Arabic (U.A.E.)","ar-YE":"Arabic (Yemen)",an:"Aragonese",hy:"Armenian",as:"Assamese",ast:"Asturian",az:"Azerbaijani",eu:"Basque",be:"Belarusian",bn:"Bengali",bs:"Bosnian",br:"Breton",bg:"Bulgarian",my:"Burmese",ca:"Catalan",ch:"Chamorro",ce:"Chechen",zh:"Chinese","zh-HK":"Chinese (Hong Kong)","zh-CN":"Chinese (PRC)","zh-SG":"Chinese (Singapore)","zh-TW":"Chinese (Taiwan)",cv:"Chuvash",co:"Corsican",cr:"Cree",hr:"Croatian",cs:"Czech",da:"Danish",nl:"Dutch (Standard)","nl-BE":"Dutch (Belgian)",en:"English","en-AU":"English (Australia)","en-BZ":"English (Belize)","en-CA":"English (Canada)","en-IE":"English (Ireland)","en-JM":"English (Jamaica)","en-NZ":"English (New Zealand)","en-PH":"English (Philippines)","en-ZA":"English (South Africa)","en-TT":"English (Trinidad & Tobago)","en-GB":"English (United Kingdom)","en-US":"English (United States)","en-ZW":"English (Zimbabwe)",eo:"Esperanto",et:"Estonian",fo:"Faeroese",fj:"Fijian",fi:"Finnish",fr:"French (Standard)","fr-BE":"French (Belgium)","fr-CA":"French (Canada)","fr-FR":"French (France)","fr-LU":"French (Luxembourg)","fr-MC":"French (Monaco)","fr-CH":"French (Switzerland)",fy:"Frisian",fur:"Friulian",gd:"Gaelic (Scots)","gd-IE":"Gaelic (Irish)",gl:"Galacian",ka:"Georgian",de:"German (Standard)","de-AT":"German (Austria)","de-DE":"German (Germany)","de-LI":"German (Liechtenstein)","de-LU":"German (Luxembourg)","de-CH":"German (Switzerland)",el:"Greek",gu:"Gujurati",ht:"Haitian",he:"Hebrew",hi:"Hindi",hu:"Hungarian",is:"Icelandic",id:"Indonesian",iu:"Inuktitut",ga:"Irish",it:"Italian (Standard)","it-CH":"Italian (Switzerland)",ja:"Japanese",kn:"Kannada",ks:"Kashmiri",kk:"Kazakh",km:"Khmer",ky:"Kirghiz",tlh:"Klingon",ko:"Korean","ko-KP":"Korean (North Korea)","ko-KR":"Korean (South Korea)",la:"Latin",lv:"Latvian",lt:"Lithuanian",lb:"Luxembourgish",mk:"North Macedonia",ms:"Malay",ml:"Malayalam",mt:"Maltese",mi:"Maori",mr:"Marathi",mo:"Moldavian",nv:"Navajo",ng:"Ndonga",ne:"Nepali",no:"Norwegian",nb:"Norwegian (Bokmal)",nn:"Norwegian (Nynorsk)",oc:"Occitan",or:"Oriya",om:"Oromo",fa:"Persian","fa-IR":"Persian/Iran",pl:"Polish",pt:"Portuguese","pt-BR":"Portuguese (Brazil)",pa:"Punjabi","pa-IN":"Punjabi (India)","pa-PK":"Punjabi (Pakistan)",qu:"Quechua",rm:"Rhaeto-Romanic",ro:"Romanian","ro-MO":"Romanian (Moldavia)",ru:"Russian","ru-MO":"Russian (Moldavia)",sz:"Sami (Lappish)",sg:"Sango",sa:"Sanskrit",sc:"Sardinian",sd:"Sindhi",si:"Singhalese",sr:"Serbian",sk:"Slovak",sl:"Slovenian",so:"Somani",sb:"Sorbian",es:"Spanish","es-AR":"Spanish (Argentina)","es-BO":"Spanish (Bolivia)","es-CL":"Spanish (Chile)","es-CO":"Spanish (Colombia)","es-CR":"Spanish (Costa Rica)","es-DO":"Spanish (Dominican Republic)","es-EC":"Spanish (Ecuador)","es-SV":"Spanish (El Salvador)","es-GT":"Spanish (Guatemala)","es-HN":"Spanish (Honduras)","es-MX":"Spanish (Mexico)","es-NI":"Spanish (Nicaragua)","es-PA":"Spanish (Panama)","es-PY":"Spanish (Paraguay)","es-PE":"Spanish (Peru)","es-PR":"Spanish (Puerto Rico)","es-ES":"Spanish (Spain)","es-UY":"Spanish (Uruguay)","es-VE":"Spanish (Venezuela)",sx:"Sutu",sw:"Swahili",sv:"Swedish","sv-FI":"Swedish (Finland)","sv-SV":"Swedish (Sweden)",ta:"Tamil",tt:"Tatar",te:"Teluga",th:"Thai",tig:"Tigre",ts:"Tsonga",tn:"Tswana",tr:"Turkish",tk:"Turkmen",uk:"Ukrainian",hsb:"Upper Sorbian",ur:"Urdu",ve:"Venda",vi:"Vietnamese",vo:"Volapuk",wa:"Walloon",cy:"Welsh",xh:"Xhosa",ji:"Yiddish",zu:"Zulu"}[t]!==void 0&&(this.internal.languageSettings.languageCode=t,this.internal.languageSettings.isSubscribed===!1&&(this.internal.events.subscribe("putCatalog",function(){this.internal.write("/Lang ("+this.internal.languageSettings.languageCode+")")}),this.internal.languageSettings.isSubscribed=!0)),this},Dg=Or.API,sC=Dg.getCharWidthsArray=function(t,e){var r,n,a=(e=e||{}).font||this.internal.getFont(),s=e.fontSize||this.internal.getFontSize(),i=e.charSpace||this.internal.getCharSpace(),l=e.widths?e.widths:a.metadata.Unicode.widths,c=l.fof?l.fof:1,u=e.kerning?e.kerning:a.metadata.Unicode.kerning,d=u.fof?u.fof:1,f=e.doKerning!==!1,h=0,A=t.length,m=0,p=l[0]||c,g=[];for(r=0;r<A;r++)n=t.charCodeAt(r),typeof a.metadata.widthOfString=="function"?g.push((a.metadata.widthOfGlyph(a.metadata.characterToGlyph(n))+i*(1e3/s)||0)/1e3):(h=f&&wa(u[n])==="object"&&!isNaN(parseInt(u[n][m],10))?u[n][m]/d:0,g.push((l[n]||p)/c+h)),m=n;return g},EQ=Dg.getStringUnitWidth=function(t,e){var r=(e=e||{}).fontSize||this.internal.getFontSize(),n=e.font||this.internal.getFont(),a=e.charSpace||this.internal.getCharSpace();return Dg.processArabic&&(t=Dg.processArabic(t)),typeof n.metadata.widthOfString=="function"?n.metadata.widthOfString(t,r,a)/r:sC.apply(this,arguments).reduce(function(s,i){return s+i},0)},SQ=function(t,e,r,n){for(var a=[],s=0,i=t.length,l=0;s!==i&&l+e[s]<r;)l+=e[s],s++;a.push(t.slice(0,s));var c=s;for(l=0;s!==i;)l+e[s]>n&&(a.push(t.slice(c,s)),l=0,c=s),l+=e[s],s++;return c!==s&&a.push(t.slice(c,s)),a},IQ=function(t,e,r){r||(r={});var n,a,s,i,l,c,u,d=[],f=[d],h=r.textIndent||0,A=0,m=0,p=t.split(" "),g=sC.apply(this,[" ",r])[0];if(c=r.lineIndent===-1?p[0].length+2:r.lineIndent||0){var x=Array(c).join(" "),y=[];p.map(function(w){(w=w.split(/\s*\n/)).length>1?y=y.concat(w.map(function(j,I){return(I&&j.length?`
`:"")+j})):y.push(w[0])}),p=y,c=EQ.apply(this,[x,r])}for(s=0,i=p.length;s<i;s++){var b=0;if(n=p[s],c&&n[0]==`
`&&(n=n.substr(1),b=1),h+A+(m=(a=sC.apply(this,[n,r])).reduce(function(w,j){return w+j},0))>e||b){if(m>e){for(l=SQ.apply(this,[n,a,e-(h+A),e]),d.push(l.shift()),d=[l.pop()];l.length;)f.push([l.shift()]);m=a.slice(n.length-(d[0]?d[0].length:0)).reduce(function(w,j){return w+j},0)}else d=[n];f.push(d),h=m+c,A=g}else d.push(n),h+=A+m,A=g}return u=c?function(w,j){return(j?x:"")+w.join(" ")}:function(w){return w.join(" ")},f.map(u)},Dg.splitTextToSize=function(t,e,r){var n,a=(r=r||{}).fontSize||this.internal.getFontSize(),s=(function(d){if(d.widths&&d.kerning)return{widths:d.widths,kerning:d.kerning};var f=this.internal.getFont(d.fontName,d.fontStyle),h="Unicode";return f.metadata[h]?{widths:f.metadata[h].widths||{0:1},kerning:f.metadata[h].kerning||{}}:{font:f.metadata,fontSize:this.internal.getFontSize(),charSpace:this.internal.getCharSpace()}}).call(this,r);n=Array.isArray(t)?t:String(t).split(/\r?\n/);var i=1*this.internal.scaleFactor*e/a;s.textIndent=r.textIndent?1*r.textIndent*this.internal.scaleFactor/a:0,s.lineIndent=r.lineIndent;var l,c,u=[];for(l=0,c=n.length;l<c;l++)u=u.concat(IQ.apply(this,[n[l],i,s]));return u},function(t){t.__fontmetrics__=t.__fontmetrics__||{};for(var e="0123456789abcdef",r="klmnopqrstuvwxyz",n={},a={},s=0;s<16;s++)n[r[s]]=e[s],a[e[s]]=r[s];var i=function(h){return"0x"+parseInt(h,10).toString(16)},l=t.__fontmetrics__.compress=function(h){var A,m,p,g,x=["{"];for(var y in h){if(A=h[y],isNaN(parseInt(y,10))?m="'"+y+"'":(y=parseInt(y,10),m=(m=i(y).slice(2)).slice(0,-1)+a[m.slice(-1)]),typeof A=="number")A<0?(p=i(A).slice(3),g="-"):(p=i(A).slice(2),g=""),p=g+p.slice(0,-1)+a[p.slice(-1)];else{if(wa(A)!=="object")throw new Error("Don't know what to do with value type "+wa(A)+".");p=l(A)}x.push(m+p)}return x.push("}"),x.join("")},c=t.__fontmetrics__.uncompress=function(h){if(typeof h!="string")throw new Error("Invalid argument passed to uncompress.");for(var A,m,p,g,x={},y=1,b=x,w=[],j="",I="",_=h.length-1,E=1;E<_;E+=1)(g=h[E])=="'"?A?(p=A.join(""),A=void 0):A=[]:A?A.push(g):g=="{"?(w.push([b,p]),b={},p=void 0):g=="}"?((m=w.pop())[0][m[1]]=b,p=void 0,b=m[0]):g=="-"?y=-1:p===void 0?n.hasOwnProperty(g)?(j+=n[g],p=parseInt(j,16)*y,y=1,j=""):j+=g:n.hasOwnProperty(g)?(I+=n[g],b[p]=parseInt(I,16)*y,y=1,p=void 0,I=""):I+=g;return x},u={codePages:["WinAnsiEncoding"],WinAnsiEncoding:c("{19m8n201n9q201o9r201s9l201t9m201u8m201w9n201x9o201y8o202k8q202l8r202m9p202q8p20aw8k203k8t203t8v203u9v2cq8s212m9t15m8w15n9w2dw9s16k8u16l9u17s9z17x8y17y9y}")},d={Unicode:{Courier:u,"Courier-Bold":u,"Courier-BoldOblique":u,"Courier-Oblique":u,Helvetica:u,"Helvetica-Bold":u,"Helvetica-BoldOblique":u,"Helvetica-Oblique":u,"Times-Roman":u,"Times-Bold":u,"Times-BoldItalic":u,"Times-Italic":u}},f={Unicode:{"Courier-Oblique":c("{'widths'{k3w'fof'6o}'kerning'{'fof'-6o}}"),"Times-BoldItalic":c("{'widths'{k3o2q4ycx2r201n3m201o6o201s2l201t2l201u2l201w3m201x3m201y3m2k1t2l2r202m2n2n3m2o3m2p5n202q6o2r1w2s2l2t2l2u3m2v3t2w1t2x2l2y1t2z1w3k3m3l3m3m3m3n3m3o3m3p3m3q3m3r3m3s3m203t2l203u2l3v2l3w3t3x3t3y3t3z3m4k5n4l4m4m4m4n4m4o4s4p4m4q4m4r4s4s4y4t2r4u3m4v4m4w3x4x5t4y4s4z4s5k3x5l4s5m4m5n3r5o3x5p4s5q4m5r5t5s4m5t3x5u3x5v2l5w1w5x2l5y3t5z3m6k2l6l3m6m3m6n2w6o3m6p2w6q2l6r3m6s3r6t1w6u1w6v3m6w1w6x4y6y3r6z3m7k3m7l3m7m2r7n2r7o1w7p3r7q2w7r4m7s3m7t2w7u2r7v2n7w1q7x2n7y3t202l3mcl4mal2ram3man3mao3map3mar3mas2lat4uau1uav3maw3way4uaz2lbk2sbl3t'fof'6obo2lbp3tbq3mbr1tbs2lbu1ybv3mbz3mck4m202k3mcm4mcn4mco4mcp4mcq5ycr4mcs4mct4mcu4mcv4mcw2r2m3rcy2rcz2rdl4sdm4sdn4sdo4sdp4sdq4sds4sdt4sdu4sdv4sdw4sdz3mek3mel3mem3men3meo3mep3meq4ser2wes2wet2weu2wev2wew1wex1wey1wez1wfl3rfm3mfn3mfo3mfp3mfq3mfr3tfs3mft3rfu3rfv3rfw3rfz2w203k6o212m6o2dw2l2cq2l3t3m3u2l17s3x19m3m}'kerning'{cl{4qu5kt5qt5rs17ss5ts}201s{201ss}201t{cks4lscmscnscoscpscls2wu2yu201ts}201x{2wu2yu}2k{201ts}2w{4qx5kx5ou5qx5rs17su5tu}2x{17su5tu5ou}2y{4qx5kx5ou5qx5rs17ss5ts}'fof'-6ofn{17sw5tw5ou5qw5rs}7t{cksclscmscnscoscps4ls}3u{17su5tu5os5qs}3v{17su5tu5os5qs}7p{17su5tu}ck{4qu5kt5qt5rs17ss5ts}4l{4qu5kt5qt5rs17ss5ts}cm{4qu5kt5qt5rs17ss5ts}cn{4qu5kt5qt5rs17ss5ts}co{4qu5kt5qt5rs17ss5ts}cp{4qu5kt5qt5rs17ss5ts}6l{4qu5ou5qw5rt17su5tu}5q{ckuclucmucnucoucpu4lu}5r{ckuclucmucnucoucpu4lu}7q{cksclscmscnscoscps4ls}6p{4qu5ou5qw5rt17sw5tw}ek{4qu5ou5qw5rt17su5tu}el{4qu5ou5qw5rt17su5tu}em{4qu5ou5qw5rt17su5tu}en{4qu5ou5qw5rt17su5tu}eo{4qu5ou5qw5rt17su5tu}ep{4qu5ou5qw5rt17su5tu}es{17ss5ts5qs4qu}et{4qu5ou5qw5rt17sw5tw}eu{4qu5ou5qw5rt17ss5ts}ev{17ss5ts5qs4qu}6z{17sw5tw5ou5qw5rs}fm{17sw5tw5ou5qw5rs}7n{201ts}fo{17sw5tw5ou5qw5rs}fp{17sw5tw5ou5qw5rs}fq{17sw5tw5ou5qw5rs}7r{cksclscmscnscoscps4ls}fs{17sw5tw5ou5qw5rs}ft{17su5tu}fu{17su5tu}fv{17su5tu}fw{17su5tu}fz{cksclscmscnscoscps4ls}}}"),"Helvetica-Bold":c("{'widths'{k3s2q4scx1w201n3r201o6o201s1w201t1w201u1w201w3m201x3m201y3m2k1w2l2l202m2n2n3r2o3r2p5t202q6o2r1s2s2l2t2l2u2r2v3u2w1w2x2l2y1w2z1w3k3r3l3r3m3r3n3r3o3r3p3r3q3r3r3r3s3r203t2l203u2l3v2l3w3u3x3u3y3u3z3x4k6l4l4s4m4s4n4s4o4s4p4m4q3x4r4y4s4s4t1w4u3r4v4s4w3x4x5n4y4s4z4y5k4m5l4y5m4s5n4m5o3x5p4s5q4m5r5y5s4m5t4m5u3x5v2l5w1w5x2l5y3u5z3r6k2l6l3r6m3x6n3r6o3x6p3r6q2l6r3x6s3x6t1w6u1w6v3r6w1w6x5t6y3x6z3x7k3x7l3x7m2r7n3r7o2l7p3x7q3r7r4y7s3r7t3r7u3m7v2r7w1w7x2r7y3u202l3rcl4sal2lam3ran3rao3rap3rar3ras2lat4tau2pav3raw3uay4taz2lbk2sbl3u'fof'6obo2lbp3xbq3rbr1wbs2lbu2obv3rbz3xck4s202k3rcm4scn4sco4scp4scq6ocr4scs4mct4mcu4mcv4mcw1w2m2zcy1wcz1wdl4sdm4ydn4ydo4ydp4ydq4yds4ydt4sdu4sdv4sdw4sdz3xek3rel3rem3ren3reo3rep3req5ter3res3ret3reu3rev3rew1wex1wey1wez1wfl3xfm3xfn3xfo3xfp3xfq3xfr3ufs3xft3xfu3xfv3xfw3xfz3r203k6o212m6o2dw2l2cq2l3t3r3u2l17s4m19m3r}'kerning'{cl{4qs5ku5ot5qs17sv5tv}201t{2ww4wy2yw}201w{2ks}201x{2ww4wy2yw}2k{201ts201xs}2w{7qs4qu5kw5os5qw5rs17su5tu7tsfzs}2x{5ow5qs}2y{7qs4qu5kw5os5qw5rs17su5tu7tsfzs}'fof'-6o7p{17su5tu5ot}ck{4qs5ku5ot5qs17sv5tv}4l{4qs5ku5ot5qs17sv5tv}cm{4qs5ku5ot5qs17sv5tv}cn{4qs5ku5ot5qs17sv5tv}co{4qs5ku5ot5qs17sv5tv}cp{4qs5ku5ot5qs17sv5tv}6l{17st5tt5os}17s{2kwclvcmvcnvcovcpv4lv4wwckv}5o{2kucltcmtcntcotcpt4lt4wtckt}5q{2ksclscmscnscoscps4ls4wvcks}5r{2ks4ws}5t{2kwclvcmvcnvcovcpv4lv4wwckv}eo{17st5tt5os}fu{17su5tu5ot}6p{17ss5ts}ek{17st5tt5os}el{17st5tt5os}em{17st5tt5os}en{17st5tt5os}6o{201ts}ep{17st5tt5os}es{17ss5ts}et{17ss5ts}eu{17ss5ts}ev{17ss5ts}6z{17su5tu5os5qt}fm{17su5tu5os5qt}fn{17su5tu5os5qt}fo{17su5tu5os5qt}fp{17su5tu5os5qt}fq{17su5tu5os5qt}fs{17su5tu5os5qt}ft{17su5tu5ot}7m{5os}fv{17su5tu5ot}fw{17su5tu5ot}}}"),Courier:c("{'widths'{k3w'fof'6o}'kerning'{'fof'-6o}}"),"Courier-BoldOblique":c("{'widths'{k3w'fof'6o}'kerning'{'fof'-6o}}"),"Times-Bold":c("{'widths'{k3q2q5ncx2r201n3m201o6o201s2l201t2l201u2l201w3m201x3m201y3m2k1t2l2l202m2n2n3m2o3m2p6o202q6o2r1w2s2l2t2l2u3m2v3t2w1t2x2l2y1t2z1w3k3m3l3m3m3m3n3m3o3m3p3m3q3m3r3m3s3m203t2l203u2l3v2l3w3t3x3t3y3t3z3m4k5x4l4s4m4m4n4s4o4s4p4m4q3x4r4y4s4y4t2r4u3m4v4y4w4m4x5y4y4s4z4y5k3x5l4y5m4s5n3r5o4m5p4s5q4s5r6o5s4s5t4s5u4m5v2l5w1w5x2l5y3u5z3m6k2l6l3m6m3r6n2w6o3r6p2w6q2l6r3m6s3r6t1w6u2l6v3r6w1w6x5n6y3r6z3m7k3r7l3r7m2w7n2r7o2l7p3r7q3m7r4s7s3m7t3m7u2w7v2r7w1q7x2r7y3o202l3mcl4sal2lam3man3mao3map3mar3mas2lat4uau1yav3maw3tay4uaz2lbk2sbl3t'fof'6obo2lbp3rbr1tbs2lbu2lbv3mbz3mck4s202k3mcm4scn4sco4scp4scq6ocr4scs4mct4mcu4mcv4mcw2r2m3rcy2rcz2rdl4sdm4ydn4ydo4ydp4ydq4yds4ydt4sdu4sdv4sdw4sdz3rek3mel3mem3men3meo3mep3meq4ser2wes2wet2weu2wev2wew1wex1wey1wez1wfl3rfm3mfn3mfo3mfp3mfq3mfr3tfs3mft3rfu3rfv3rfw3rfz3m203k6o212m6o2dw2l2cq2l3t3m3u2l17s4s19m3m}'kerning'{cl{4qt5ks5ot5qy5rw17sv5tv}201t{cks4lscmscnscoscpscls4wv}2k{201ts}2w{4qu5ku7mu5os5qx5ru17su5tu}2x{17su5tu5ou5qs}2y{4qv5kv7mu5ot5qz5ru17su5tu}'fof'-6o7t{cksclscmscnscoscps4ls}3u{17su5tu5os5qu}3v{17su5tu5os5qu}fu{17su5tu5ou5qu}7p{17su5tu5ou5qu}ck{4qt5ks5ot5qy5rw17sv5tv}4l{4qt5ks5ot5qy5rw17sv5tv}cm{4qt5ks5ot5qy5rw17sv5tv}cn{4qt5ks5ot5qy5rw17sv5tv}co{4qt5ks5ot5qy5rw17sv5tv}cp{4qt5ks5ot5qy5rw17sv5tv}6l{17st5tt5ou5qu}17s{ckuclucmucnucoucpu4lu4wu}5o{ckuclucmucnucoucpu4lu4wu}5q{ckzclzcmzcnzcozcpz4lz4wu}5r{ckxclxcmxcnxcoxcpx4lx4wu}5t{ckuclucmucnucoucpu4lu4wu}7q{ckuclucmucnucoucpu4lu}6p{17sw5tw5ou5qu}ek{17st5tt5qu}el{17st5tt5ou5qu}em{17st5tt5qu}en{17st5tt5qu}eo{17st5tt5qu}ep{17st5tt5ou5qu}es{17ss5ts5qu}et{17sw5tw5ou5qu}eu{17sw5tw5ou5qu}ev{17ss5ts5qu}6z{17sw5tw5ou5qu5rs}fm{17sw5tw5ou5qu5rs}fn{17sw5tw5ou5qu5rs}fo{17sw5tw5ou5qu5rs}fp{17sw5tw5ou5qu5rs}fq{17sw5tw5ou5qu5rs}7r{cktcltcmtcntcotcpt4lt5os}fs{17sw5tw5ou5qu5rs}ft{17su5tu5ou5qu}7m{5os}fv{17su5tu5ou5qu}fw{17su5tu5ou5qu}fz{cksclscmscnscoscps4ls}}}"),Symbol:c("{'widths'{k3uaw4r19m3m2k1t2l2l202m2y2n3m2p5n202q6o3k3m2s2l2t2l2v3r2w1t3m3m2y1t2z1wbk2sbl3r'fof'6o3n3m3o3m3p3m3q3m3r3m3s3m3t3m3u1w3v1w3w3r3x3r3y3r3z2wbp3t3l3m5v2l5x2l5z3m2q4yfr3r7v3k7w1o7x3k}'kerning'{'fof'-6o}}"),Helvetica:c("{'widths'{k3p2q4mcx1w201n3r201o6o201s1q201t1q201u1q201w2l201x2l201y2l2k1w2l1w202m2n2n3r2o3r2p5t202q6o2r1n2s2l2t2l2u2r2v3u2w1w2x2l2y1w2z1w3k3r3l3r3m3r3n3r3o3r3p3r3q3r3r3r3s3r203t2l203u2l3v1w3w3u3x3u3y3u3z3r4k6p4l4m4m4m4n4s4o4s4p4m4q3x4r4y4s4s4t1w4u3m4v4m4w3r4x5n4y4s4z4y5k4m5l4y5m4s5n4m5o3x5p4s5q4m5r5y5s4m5t4m5u3x5v1w5w1w5x1w5y2z5z3r6k2l6l3r6m3r6n3m6o3r6p3r6q1w6r3r6s3r6t1q6u1q6v3m6w1q6x5n6y3r6z3r7k3r7l3r7m2l7n3m7o1w7p3r7q3m7r4s7s3m7t3m7u3m7v2l7w1u7x2l7y3u202l3rcl4mal2lam3ran3rao3rap3rar3ras2lat4tau2pav3raw3uay4taz2lbk2sbl3u'fof'6obo2lbp3rbr1wbs2lbu2obv3rbz3xck4m202k3rcm4mcn4mco4mcp4mcq6ocr4scs4mct4mcu4mcv4mcw1w2m2ncy1wcz1wdl4sdm4ydn4ydo4ydp4ydq4yds4ydt4sdu4sdv4sdw4sdz3xek3rel3rem3ren3reo3rep3req5ter3mes3ret3reu3rev3rew1wex1wey1wez1wfl3rfm3rfn3rfo3rfp3rfq3rfr3ufs3xft3rfu3rfv3rfw3rfz3m203k6o212m6o2dw2l2cq2l3t3r3u1w17s4m19m3r}'kerning'{5q{4wv}cl{4qs5kw5ow5qs17sv5tv}201t{2wu4w1k2yu}201x{2wu4wy2yu}17s{2ktclucmucnu4otcpu4lu4wycoucku}2w{7qs4qz5k1m17sy5ow5qx5rsfsu5ty7tufzu}2x{17sy5ty5oy5qs}2y{7qs4qz5k1m17sy5ow5qx5rsfsu5ty7tufzu}'fof'-6o7p{17sv5tv5ow}ck{4qs5kw5ow5qs17sv5tv}4l{4qs5kw5ow5qs17sv5tv}cm{4qs5kw5ow5qs17sv5tv}cn{4qs5kw5ow5qs17sv5tv}co{4qs5kw5ow5qs17sv5tv}cp{4qs5kw5ow5qs17sv5tv}6l{17sy5ty5ow}do{17st5tt}4z{17st5tt}7s{fst}dm{17st5tt}dn{17st5tt}5o{ckwclwcmwcnwcowcpw4lw4wv}dp{17st5tt}dq{17st5tt}7t{5ow}ds{17st5tt}5t{2ktclucmucnu4otcpu4lu4wycoucku}fu{17sv5tv5ow}6p{17sy5ty5ow5qs}ek{17sy5ty5ow}el{17sy5ty5ow}em{17sy5ty5ow}en{5ty}eo{17sy5ty5ow}ep{17sy5ty5ow}es{17sy5ty5qs}et{17sy5ty5ow5qs}eu{17sy5ty5ow5qs}ev{17sy5ty5ow5qs}6z{17sy5ty5ow5qs}fm{17sy5ty5ow5qs}fn{17sy5ty5ow5qs}fo{17sy5ty5ow5qs}fp{17sy5ty5qs}fq{17sy5ty5ow5qs}7r{5ow}fs{17sy5ty5ow5qs}ft{17sv5tv5ow}7m{5ow}fv{17sv5tv5ow}fw{17sv5tv5ow}}}"),"Helvetica-BoldOblique":c("{'widths'{k3s2q4scx1w201n3r201o6o201s1w201t1w201u1w201w3m201x3m201y3m2k1w2l2l202m2n2n3r2o3r2p5t202q6o2r1s2s2l2t2l2u2r2v3u2w1w2x2l2y1w2z1w3k3r3l3r3m3r3n3r3o3r3p3r3q3r3r3r3s3r203t2l203u2l3v2l3w3u3x3u3y3u3z3x4k6l4l4s4m4s4n4s4o4s4p4m4q3x4r4y4s4s4t1w4u3r4v4s4w3x4x5n4y4s4z4y5k4m5l4y5m4s5n4m5o3x5p4s5q4m5r5y5s4m5t4m5u3x5v2l5w1w5x2l5y3u5z3r6k2l6l3r6m3x6n3r6o3x6p3r6q2l6r3x6s3x6t1w6u1w6v3r6w1w6x5t6y3x6z3x7k3x7l3x7m2r7n3r7o2l7p3x7q3r7r4y7s3r7t3r7u3m7v2r7w1w7x2r7y3u202l3rcl4sal2lam3ran3rao3rap3rar3ras2lat4tau2pav3raw3uay4taz2lbk2sbl3u'fof'6obo2lbp3xbq3rbr1wbs2lbu2obv3rbz3xck4s202k3rcm4scn4sco4scp4scq6ocr4scs4mct4mcu4mcv4mcw1w2m2zcy1wcz1wdl4sdm4ydn4ydo4ydp4ydq4yds4ydt4sdu4sdv4sdw4sdz3xek3rel3rem3ren3reo3rep3req5ter3res3ret3reu3rev3rew1wex1wey1wez1wfl3xfm3xfn3xfo3xfp3xfq3xfr3ufs3xft3xfu3xfv3xfw3xfz3r203k6o212m6o2dw2l2cq2l3t3r3u2l17s4m19m3r}'kerning'{cl{4qs5ku5ot5qs17sv5tv}201t{2ww4wy2yw}201w{2ks}201x{2ww4wy2yw}2k{201ts201xs}2w{7qs4qu5kw5os5qw5rs17su5tu7tsfzs}2x{5ow5qs}2y{7qs4qu5kw5os5qw5rs17su5tu7tsfzs}'fof'-6o7p{17su5tu5ot}ck{4qs5ku5ot5qs17sv5tv}4l{4qs5ku5ot5qs17sv5tv}cm{4qs5ku5ot5qs17sv5tv}cn{4qs5ku5ot5qs17sv5tv}co{4qs5ku5ot5qs17sv5tv}cp{4qs5ku5ot5qs17sv5tv}6l{17st5tt5os}17s{2kwclvcmvcnvcovcpv4lv4wwckv}5o{2kucltcmtcntcotcpt4lt4wtckt}5q{2ksclscmscnscoscps4ls4wvcks}5r{2ks4ws}5t{2kwclvcmvcnvcovcpv4lv4wwckv}eo{17st5tt5os}fu{17su5tu5ot}6p{17ss5ts}ek{17st5tt5os}el{17st5tt5os}em{17st5tt5os}en{17st5tt5os}6o{201ts}ep{17st5tt5os}es{17ss5ts}et{17ss5ts}eu{17ss5ts}ev{17ss5ts}6z{17su5tu5os5qt}fm{17su5tu5os5qt}fn{17su5tu5os5qt}fo{17su5tu5os5qt}fp{17su5tu5os5qt}fq{17su5tu5os5qt}fs{17su5tu5os5qt}ft{17su5tu5ot}7m{5os}fv{17su5tu5ot}fw{17su5tu5ot}}}"),ZapfDingbats:c("{'widths'{k4u2k1w'fof'6o}'kerning'{'fof'-6o}}"),"Courier-Bold":c("{'widths'{k3w'fof'6o}'kerning'{'fof'-6o}}"),"Times-Italic":c("{'widths'{k3n2q4ycx2l201n3m201o5t201s2l201t2l201u2l201w3r201x3r201y3r2k1t2l2l202m2n2n3m2o3m2p5n202q5t2r1p2s2l2t2l2u3m2v4n2w1t2x2l2y1t2z1w3k3m3l3m3m3m3n3m3o3m3p3m3q3m3r3m3s3m203t2l203u2l3v2l3w4n3x4n3y4n3z3m4k5w4l3x4m3x4n4m4o4s4p3x4q3x4r4s4s4s4t2l4u2w4v4m4w3r4x5n4y4m4z4s5k3x5l4s5m3x5n3m5o3r5p4s5q3x5r5n5s3x5t3r5u3r5v2r5w1w5x2r5y2u5z3m6k2l6l3m6m3m6n2w6o3m6p2w6q1w6r3m6s3m6t1w6u1w6v2w6w1w6x4s6y3m6z3m7k3m7l3m7m2r7n2r7o1w7p3m7q2w7r4m7s2w7t2w7u2r7v2s7w1v7x2s7y3q202l3mcl3xal2ram3man3mao3map3mar3mas2lat4wau1vav3maw4nay4waz2lbk2sbl4n'fof'6obo2lbp3mbq3obr1tbs2lbu1zbv3mbz3mck3x202k3mcm3xcn3xco3xcp3xcq5tcr4mcs3xct3xcu3xcv3xcw2l2m2ucy2lcz2ldl4mdm4sdn4sdo4sdp4sdq4sds4sdt4sdu4sdv4sdw4sdz3mek3mel3mem3men3meo3mep3meq4mer2wes2wet2weu2wev2wew1wex1wey1wez1wfl3mfm3mfn3mfo3mfp3mfq3mfr4nfs3mft3mfu3mfv3mfw3mfz2w203k6o212m6m2dw2l2cq2l3t3m3u2l17s3r19m3m}'kerning'{cl{5kt4qw}201s{201sw}201t{201tw2wy2yy6q-t}201x{2wy2yy}2k{201tw}2w{7qs4qy7rs5ky7mw5os5qx5ru17su5tu}2x{17ss5ts5os}2y{7qs4qy7rs5ky7mw5os5qx5ru17su5tu}'fof'-6o6t{17ss5ts5qs}7t{5os}3v{5qs}7p{17su5tu5qs}ck{5kt4qw}4l{5kt4qw}cm{5kt4qw}cn{5kt4qw}co{5kt4qw}cp{5kt4qw}6l{4qs5ks5ou5qw5ru17su5tu}17s{2ks}5q{ckvclvcmvcnvcovcpv4lv}5r{ckuclucmucnucoucpu4lu}5t{2ks}6p{4qs5ks5ou5qw5ru17su5tu}ek{4qs5ks5ou5qw5ru17su5tu}el{4qs5ks5ou5qw5ru17su5tu}em{4qs5ks5ou5qw5ru17su5tu}en{4qs5ks5ou5qw5ru17su5tu}eo{4qs5ks5ou5qw5ru17su5tu}ep{4qs5ks5ou5qw5ru17su5tu}es{5ks5qs4qs}et{4qs5ks5ou5qw5ru17su5tu}eu{4qs5ks5qw5ru17su5tu}ev{5ks5qs4qs}ex{17ss5ts5qs}6z{4qv5ks5ou5qw5ru17su5tu}fm{4qv5ks5ou5qw5ru17su5tu}fn{4qv5ks5ou5qw5ru17su5tu}fo{4qv5ks5ou5qw5ru17su5tu}fp{4qv5ks5ou5qw5ru17su5tu}fq{4qv5ks5ou5qw5ru17su5tu}7r{5os}fs{4qv5ks5ou5qw5ru17su5tu}ft{17su5tu5qs}fu{17su5tu5qs}fv{17su5tu5qs}fw{17su5tu5qs}}}"),"Times-Roman":c("{'widths'{k3n2q4ycx2l201n3m201o6o201s2l201t2l201u2l201w2w201x2w201y2w2k1t2l2l202m2n2n3m2o3m2p5n202q6o2r1m2s2l2t2l2u3m2v3s2w1t2x2l2y1t2z1w3k3m3l3m3m3m3n3m3o3m3p3m3q3m3r3m3s3m203t2l203u2l3v1w3w3s3x3s3y3s3z2w4k5w4l4s4m4m4n4m4o4s4p3x4q3r4r4s4s4s4t2l4u2r4v4s4w3x4x5t4y4s4z4s5k3r5l4s5m4m5n3r5o3x5p4s5q4s5r5y5s4s5t4s5u3x5v2l5w1w5x2l5y2z5z3m6k2l6l2w6m3m6n2w6o3m6p2w6q2l6r3m6s3m6t1w6u1w6v3m6w1w6x4y6y3m6z3m7k3m7l3m7m2l7n2r7o1w7p3m7q3m7r4s7s3m7t3m7u2w7v3k7w1o7x3k7y3q202l3mcl4sal2lam3man3mao3map3mar3mas2lat4wau1vav3maw3say4waz2lbk2sbl3s'fof'6obo2lbp3mbq2xbr1tbs2lbu1zbv3mbz2wck4s202k3mcm4scn4sco4scp4scq5tcr4mcs3xct3xcu3xcv3xcw2l2m2tcy2lcz2ldl4sdm4sdn4sdo4sdp4sdq4sds4sdt4sdu4sdv4sdw4sdz3mek2wel2wem2wen2weo2wep2weq4mer2wes2wet2weu2wev2wew1wex1wey1wez1wfl3mfm3mfn3mfo3mfp3mfq3mfr3sfs3mft3mfu3mfv3mfw3mfz3m203k6o212m6m2dw2l2cq2l3t3m3u1w17s4s19m3m}'kerning'{cl{4qs5ku17sw5ou5qy5rw201ss5tw201ws}201s{201ss}201t{ckw4lwcmwcnwcowcpwclw4wu201ts}2k{201ts}2w{4qs5kw5os5qx5ru17sx5tx}2x{17sw5tw5ou5qu}2y{4qs5kw5os5qx5ru17sx5tx}'fof'-6o7t{ckuclucmucnucoucpu4lu5os5rs}3u{17su5tu5qs}3v{17su5tu5qs}7p{17sw5tw5qs}ck{4qs5ku17sw5ou5qy5rw201ss5tw201ws}4l{4qs5ku17sw5ou5qy5rw201ss5tw201ws}cm{4qs5ku17sw5ou5qy5rw201ss5tw201ws}cn{4qs5ku17sw5ou5qy5rw201ss5tw201ws}co{4qs5ku17sw5ou5qy5rw201ss5tw201ws}cp{4qs5ku17sw5ou5qy5rw201ss5tw201ws}6l{17su5tu5os5qw5rs}17s{2ktclvcmvcnvcovcpv4lv4wuckv}5o{ckwclwcmwcnwcowcpw4lw4wu}5q{ckyclycmycnycoycpy4ly4wu5ms}5r{cktcltcmtcntcotcpt4lt4ws}5t{2ktclvcmvcnvcovcpv4lv4wuckv}7q{cksclscmscnscoscps4ls}6p{17su5tu5qw5rs}ek{5qs5rs}el{17su5tu5os5qw5rs}em{17su5tu5os5qs5rs}en{17su5qs5rs}eo{5qs5rs}ep{17su5tu5os5qw5rs}es{5qs}et{17su5tu5qw5rs}eu{17su5tu5qs5rs}ev{5qs}6z{17sv5tv5os5qx5rs}fm{5os5qt5rs}fn{17sv5tv5os5qx5rs}fo{17sv5tv5os5qx5rs}fp{5os5qt5rs}fq{5os5qt5rs}7r{ckuclucmucnucoucpu4lu5os}fs{17sv5tv5os5qx5rs}ft{17ss5ts5qs}fu{17sw5tw5qs}fv{17sw5tw5qs}fw{17ss5ts5qs}fz{ckuclucmucnucoucpu4lu5os5rs}}}"),"Helvetica-Oblique":c("{'widths'{k3p2q4mcx1w201n3r201o6o201s1q201t1q201u1q201w2l201x2l201y2l2k1w2l1w202m2n2n3r2o3r2p5t202q6o2r1n2s2l2t2l2u2r2v3u2w1w2x2l2y1w2z1w3k3r3l3r3m3r3n3r3o3r3p3r3q3r3r3r3s3r203t2l203u2l3v1w3w3u3x3u3y3u3z3r4k6p4l4m4m4m4n4s4o4s4p4m4q3x4r4y4s4s4t1w4u3m4v4m4w3r4x5n4y4s4z4y5k4m5l4y5m4s5n4m5o3x5p4s5q4m5r5y5s4m5t4m5u3x5v1w5w1w5x1w5y2z5z3r6k2l6l3r6m3r6n3m6o3r6p3r6q1w6r3r6s3r6t1q6u1q6v3m6w1q6x5n6y3r6z3r7k3r7l3r7m2l7n3m7o1w7p3r7q3m7r4s7s3m7t3m7u3m7v2l7w1u7x2l7y3u202l3rcl4mal2lam3ran3rao3rap3rar3ras2lat4tau2pav3raw3uay4taz2lbk2sbl3u'fof'6obo2lbp3rbr1wbs2lbu2obv3rbz3xck4m202k3rcm4mcn4mco4mcp4mcq6ocr4scs4mct4mcu4mcv4mcw1w2m2ncy1wcz1wdl4sdm4ydn4ydo4ydp4ydq4yds4ydt4sdu4sdv4sdw4sdz3xek3rel3rem3ren3reo3rep3req5ter3mes3ret3reu3rev3rew1wex1wey1wez1wfl3rfm3rfn3rfo3rfp3rfq3rfr3ufs3xft3rfu3rfv3rfw3rfz3m203k6o212m6o2dw2l2cq2l3t3r3u1w17s4m19m3r}'kerning'{5q{4wv}cl{4qs5kw5ow5qs17sv5tv}201t{2wu4w1k2yu}201x{2wu4wy2yu}17s{2ktclucmucnu4otcpu4lu4wycoucku}2w{7qs4qz5k1m17sy5ow5qx5rsfsu5ty7tufzu}2x{17sy5ty5oy5qs}2y{7qs4qz5k1m17sy5ow5qx5rsfsu5ty7tufzu}'fof'-6o7p{17sv5tv5ow}ck{4qs5kw5ow5qs17sv5tv}4l{4qs5kw5ow5qs17sv5tv}cm{4qs5kw5ow5qs17sv5tv}cn{4qs5kw5ow5qs17sv5tv}co{4qs5kw5ow5qs17sv5tv}cp{4qs5kw5ow5qs17sv5tv}6l{17sy5ty5ow}do{17st5tt}4z{17st5tt}7s{fst}dm{17st5tt}dn{17st5tt}5o{ckwclwcmwcnwcowcpw4lw4wv}dp{17st5tt}dq{17st5tt}7t{5ow}ds{17st5tt}5t{2ktclucmucnu4otcpu4lu4wycoucku}fu{17sv5tv5ow}6p{17sy5ty5ow5qs}ek{17sy5ty5ow}el{17sy5ty5ow}em{17sy5ty5ow}en{5ty}eo{17sy5ty5ow}ep{17sy5ty5ow}es{17sy5ty5qs}et{17sy5ty5ow5qs}eu{17sy5ty5ow5qs}ev{17sy5ty5ow5qs}6z{17sy5ty5ow5qs}fm{17sy5ty5ow5qs}fn{17sy5ty5ow5qs}fo{17sy5ty5ow5qs}fp{17sy5ty5qs}fq{17sy5ty5ow5qs}7r{5ow}fs{17sy5ty5ow5qs}ft{17sv5tv5ow}7m{5ow}fv{17sv5tv5ow}fw{17sv5tv5ow}}}")}};t.events.push(["addFont",function(h){var A=h.font,m=f.Unicode[A.postScriptName];m&&(A.metadata.Unicode={},A.metadata.Unicode.widths=m.widths,A.metadata.Unicode.kerning=m.kerning);var p=d.Unicode[A.postScriptName];p&&(A.metadata.Unicode.encoding=p,A.encoding=p.codePages[0])}])}(Or.API),function(t){var e=function(r){for(var n=r.length,a=new Uint8Array(n),s=0;s<n;s++)a[s]=r.charCodeAt(s);return a};t.API.events.push(["addFont",function(r){var n=void 0,a=r.font,s=r.instance;if(!a.isStandardFont){if(s===void 0)throw new Error("Font does not exist in vFS, import fonts or remove declaration doc.addFont('"+a.postScriptName+"').");if(typeof(n=s.existsFileInVFS(a.postScriptName)===!1?s.loadFile(a.postScriptName):s.getFileFromVFS(a.postScriptName))!="string")throw new Error("Font is not stored as string-data in vFS, import fonts or remove declaration doc.addFont('"+a.postScriptName+"').");(function(i,l){l=/^\x00\x01\x00\x00/.test(l)?e(l):e(M_(l)),i.metadata=t.API.TTFFont.open(l),i.metadata.Unicode=i.metadata.Unicode||{encoding:{},kerning:{},widths:[]},i.metadata.glyIdsUsed=[0]})(a,n)}}])}(Or),Or.API.addSvgAsImage=function(t,e,r,n,a,s,i,l){if(isNaN(e)||isNaN(r))throw Da.error("jsPDF.addSvgAsImage: Invalid coordinates",arguments),new Error("Invalid coordinates passed to jsPDF.addSvgAsImage");if(isNaN(n)||isNaN(a))throw Da.error("jsPDF.addSvgAsImage: Invalid measurements",arguments),new Error("Invalid measurements (width and/or height) passed to jsPDF.addSvgAsImage");var c=document.createElement("canvas");c.width=n,c.height=a;var u=c.getContext("2d");u.fillStyle="#fff",u.fillRect(0,0,c.width,c.height);var d={ignoreMouse:!0,ignoreAnimation:!0,ignoreDimensions:!0},f=this;return(un.canvg?Promise.resolve(un.canvg):EA(()=>import("./index.es-DJl0aGSx.js"),[])).catch(function(h){return Promise.reject(new Error("Could not load canvg: "+h))}).then(function(h){return h.default?h.default:h}).then(function(h){return h.fromString(u,t,d)},function(){return Promise.reject(new Error("Could not load canvg."))}).then(function(h){return h.render(d)}).then(function(){f.addImage(c.toDataURL("image/jpeg",1),e,r,n,a,i,l)})},Or.API.putTotalPages=function(t){var e,r=0;parseInt(this.internal.getFont().id.substr(1),10)<15?(e=new RegExp(t,"g"),r=this.internal.getNumberOfPages()):(e=new RegExp(this.pdfEscape16(t,this.internal.getFont()),"g"),r=this.pdfEscape16(this.internal.getNumberOfPages()+"",this.internal.getFont()));for(var n=1;n<=this.internal.getNumberOfPages();n++)for(var a=0;a<this.internal.pages[n].length;a++)this.internal.pages[n][a]=this.internal.pages[n][a].replace(e,r);return this},Or.API.viewerPreferences=function(t,e){var r;t=t||{},e=e||!1;var n,a,s,i={HideToolbar:{defaultValue:!1,value:!1,type:"boolean",explicitSet:!1,valueSet:[!0,!1],pdfVersion:1.3},HideMenubar:{defaultValue:!1,value:!1,type:"boolean",explicitSet:!1,valueSet:[!0,!1],pdfVersion:1.3},HideWindowUI:{defaultValue:!1,value:!1,type:"boolean",explicitSet:!1,valueSet:[!0,!1],pdfVersion:1.3},FitWindow:{defaultValue:!1,value:!1,type:"boolean",explicitSet:!1,valueSet:[!0,!1],pdfVersion:1.3},CenterWindow:{defaultValue:!1,value:!1,type:"boolean",explicitSet:!1,valueSet:[!0,!1],pdfVersion:1.3},DisplayDocTitle:{defaultValue:!1,value:!1,type:"boolean",explicitSet:!1,valueSet:[!0,!1],pdfVersion:1.4},NonFullScreenPageMode:{defaultValue:"UseNone",value:"UseNone",type:"name",explicitSet:!1,valueSet:["UseNone","UseOutlines","UseThumbs","UseOC"],pdfVersion:1.3},Direction:{defaultValue:"L2R",value:"L2R",type:"name",explicitSet:!1,valueSet:["L2R","R2L"],pdfVersion:1.3},ViewArea:{defaultValue:"CropBox",value:"CropBox",type:"name",explicitSet:!1,valueSet:["MediaBox","CropBox","TrimBox","BleedBox","ArtBox"],pdfVersion:1.4},ViewClip:{defaultValue:"CropBox",value:"CropBox",type:"name",explicitSet:!1,valueSet:["MediaBox","CropBox","TrimBox","BleedBox","ArtBox"],pdfVersion:1.4},PrintArea:{defaultValue:"CropBox",value:"CropBox",type:"name",explicitSet:!1,valueSet:["MediaBox","CropBox","TrimBox","BleedBox","ArtBox"],pdfVersion:1.4},PrintClip:{defaultValue:"CropBox",value:"CropBox",type:"name",explicitSet:!1,valueSet:["MediaBox","CropBox","TrimBox","BleedBox","ArtBox"],pdfVersion:1.4},PrintScaling:{defaultValue:"AppDefault",value:"AppDefault",type:"name",explicitSet:!1,valueSet:["AppDefault","None"],pdfVersion:1.6},Duplex:{defaultValue:"",value:"none",type:"name",explicitSet:!1,valueSet:["Simplex","DuplexFlipShortEdge","DuplexFlipLongEdge","none"],pdfVersion:1.7},PickTrayByPDFSize:{defaultValue:!1,value:!1,type:"boolean",explicitSet:!1,valueSet:[!0,!1],pdfVersion:1.7},PrintPageRange:{defaultValue:"",value:"",type:"array",explicitSet:!1,valueSet:null,pdfVersion:1.7},NumCopies:{defaultValue:1,value:1,type:"integer",explicitSet:!1,valueSet:null,pdfVersion:1.7}},l=Object.keys(i),c=[],u=0,d=0,f=0;function h(m,p){var g,x=!1;for(g=0;g<m.length;g+=1)m[g]===p&&(x=!0);return x}if(this.internal.viewerpreferences===void 0&&(this.internal.viewerpreferences={},this.internal.viewerpreferences.configuration=JSON.parse(JSON.stringify(i)),this.internal.viewerpreferences.isSubscribed=!1),r=this.internal.viewerpreferences.configuration,t==="reset"||e===!0){var A=l.length;for(f=0;f<A;f+=1)r[l[f]].value=r[l[f]].defaultValue,r[l[f]].explicitSet=!1}if(wa(t)==="object"){for(a in t)if(s=t[a],h(l,a)&&s!==void 0){if(r[a].type==="boolean"&&typeof s=="boolean")r[a].value=s;else if(r[a].type==="name"&&h(r[a].valueSet,s))r[a].value=s;else if(r[a].type==="integer"&&Number.isInteger(s))r[a].value=s;else if(r[a].type==="array"){for(u=0;u<s.length;u+=1)if(n=!0,s[u].length===1&&typeof s[u][0]=="number")c.push(String(s[u]-1));else if(s[u].length>1){for(d=0;d<s[u].length;d+=1)typeof s[u][d]!="number"&&(n=!1);n===!0&&c.push([s[u][0]-1,s[u][1]-1].join(" "))}r[a].value="["+c.join(" ")+"]"}else r[a].value=r[a].defaultValue;r[a].explicitSet=!0}}return this.internal.viewerpreferences.isSubscribed===!1&&(this.internal.events.subscribe("putCatalog",function(){var m,p=[];for(m in r)r[m].explicitSet===!0&&(r[m].type==="name"?p.push("/"+m+" /"+r[m].value):p.push("/"+m+" "+r[m].value));p.length!==0&&this.internal.write(`/ViewerPreferences
<<
`+p.join(`
`)+`
>>`)}),this.internal.viewerpreferences.isSubscribed=!0),this.internal.viewerpreferences.configuration=r,this},function(t){var e=function(){var n='<rdf:RDF xmlns:rdf="http://www.w3.org/1999/02/22-rdf-syntax-ns#"><rdf:Description rdf:about="" xmlns:jspdf="'+this.internal.__metadata__.namespaceuri+'"><jspdf:metadata>',a=unescape(encodeURIComponent('<x:xmpmeta xmlns:x="adobe:ns:meta/">')),s=unescape(encodeURIComponent(n)),i=unescape(encodeURIComponent(this.internal.__metadata__.metadata)),l=unescape(encodeURIComponent("</jspdf:metadata></rdf:Description></rdf:RDF>")),c=unescape(encodeURIComponent("</x:xmpmeta>")),u=s.length+i.length+l.length+a.length+c.length;this.internal.__metadata__.metadata_object_number=this.internal.newObject(),this.internal.write("<< /Type /Metadata /Subtype /XML /Length "+u+" >>"),this.internal.write("stream"),this.internal.write(a+s+i+l+c),this.internal.write("endstream"),this.internal.write("endobj")},r=function(){this.internal.__metadata__.metadata_object_number&&this.internal.write("/Metadata "+this.internal.__metadata__.metadata_object_number+" 0 R")};t.addMetadata=function(n,a){return this.internal.__metadata__===void 0&&(this.internal.__metadata__={metadata:n,namespaceuri:a||"http://jspdf.default.namespaceuri/"},this.internal.events.subscribe("putCatalog",r),this.internal.events.subscribe("postPutResources",e)),this}}(Or.API),function(t){var e=t.API,r=e.pdfEscape16=function(s,i){for(var l,c=i.metadata.Unicode.widths,u=["","0","00","000","0000"],d=[""],f=0,h=s.length;f<h;++f){if(l=i.metadata.characterToGlyph(s.charCodeAt(f)),i.metadata.glyIdsUsed.push(l),i.metadata.toUnicode[l]=s.charCodeAt(f),c.indexOf(l)==-1&&(c.push(l),c.push([parseInt(i.metadata.widthOfGlyph(l),10)])),l=="0")return d.join("");l=l.toString(16),d.push(u[4-l.length],l)}return d.join("")},n=function(s){var i,l,c,u,d,f,h;for(d=`/CIDInit /ProcSet findresource begin
12 dict begin
begincmap
/CIDSystemInfo <<
  /Registry (Adobe)
  /Ordering (UCS)
  /Supplement 0
>> def
/CMapName /Adobe-Identity-UCS def
/CMapType 2 def
1 begincodespacerange
<0000><ffff>
endcodespacerange`,c=[],f=0,h=(l=Object.keys(s).sort(function(A,m){return A-m})).length;f<h;f++)i=l[f],c.length>=100&&(d+=`
`+c.length+` beginbfchar
`+c.join(`
`)+`
endbfchar`,c=[]),s[i]!==void 0&&s[i]!==null&&typeof s[i].toString=="function"&&(u=("0000"+s[i].toString(16)).slice(-4),i=("0000"+(+i).toString(16)).slice(-4),c.push("<"+i+"><"+u+">"));return c.length&&(d+=`
`+c.length+` beginbfchar
`+c.join(`
`)+`
endbfchar
`),d+`endcmap
CMapName currentdict /CMap defineresource pop
end
end`};e.events.push(["putFont",function(s){(function(i){var l=i.font,c=i.out,u=i.newObject,d=i.putStream;if(l.metadata instanceof t.API.TTFFont&&l.encoding==="Identity-H"){for(var f=l.metadata.Unicode.widths,h=l.metadata.subset.encode(l.metadata.glyIdsUsed,1),A="",m=0;m<h.length;m++)A+=String.fromCharCode(h[m]);var p=u();d({data:A,addLength1:!0,objectId:p}),c("endobj");var g=u();d({data:n(l.metadata.toUnicode),addLength1:!0,objectId:g}),c("endobj");var x=u();c("<<"),c("/Type /FontDescriptor"),c("/FontName /"+ax(l.fontName)),c("/FontFile2 "+p+" 0 R"),c("/FontBBox "+t.API.PDFObject.convert(l.metadata.bbox)),c("/Flags "+l.metadata.flags),c("/StemV "+l.metadata.stemV),c("/ItalicAngle "+l.metadata.italicAngle),c("/Ascent "+l.metadata.ascender),c("/Descent "+l.metadata.decender),c("/CapHeight "+l.metadata.capHeight),c(">>"),c("endobj");var y=u();c("<<"),c("/Type /Font"),c("/BaseFont /"+ax(l.fontName)),c("/FontDescriptor "+x+" 0 R"),c("/W "+t.API.PDFObject.convert(f)),c("/CIDToGIDMap /Identity"),c("/DW 1000"),c("/Subtype /CIDFontType2"),c("/CIDSystemInfo"),c("<<"),c("/Supplement 0"),c("/Registry (Adobe)"),c("/Ordering ("+l.encoding+")"),c(">>"),c(">>"),c("endobj"),l.objectNumber=u(),c("<<"),c("/Type /Font"),c("/Subtype /Type0"),c("/ToUnicode "+g+" 0 R"),c("/BaseFont /"+ax(l.fontName)),c("/Encoding /"+l.encoding),c("/DescendantFonts ["+y+" 0 R]"),c(">>"),c("endobj"),l.isAlreadyPutted=!0}})(s)}]),e.events.push(["putFont",function(s){(function(i){var l=i.font,c=i.out,u=i.newObject,d=i.putStream;if(l.metadata instanceof t.API.TTFFont&&l.encoding==="WinAnsiEncoding"){for(var f=l.metadata.rawData,h="",A=0;A<f.length;A++)h+=String.fromCharCode(f[A]);var m=u();d({data:h,addLength1:!0,objectId:m}),c("endobj");var p=u();d({data:n(l.metadata.toUnicode),addLength1:!0,objectId:p}),c("endobj");var g=u();c("<<"),c("/Descent "+l.metadata.decender),c("/CapHeight "+l.metadata.capHeight),c("/StemV "+l.metadata.stemV),c("/Type /FontDescriptor"),c("/FontFile2 "+m+" 0 R"),c("/Flags 96"),c("/FontBBox "+t.API.PDFObject.convert(l.metadata.bbox)),c("/FontName /"+ax(l.fontName)),c("/ItalicAngle "+l.metadata.italicAngle),c("/Ascent "+l.metadata.ascender),c(">>"),c("endobj"),l.objectNumber=u();for(var x=0;x<l.metadata.hmtx.widths.length;x++)l.metadata.hmtx.widths[x]=parseInt(l.metadata.hmtx.widths[x]*(1e3/l.metadata.head.unitsPerEm));c("<</Subtype/TrueType/Type/Font/ToUnicode "+p+" 0 R/BaseFont/"+ax(l.fontName)+"/FontDescriptor "+g+" 0 R/Encoding/"+l.encoding+" /FirstChar 29 /LastChar 255 /Widths "+t.API.PDFObject.convert(l.metadata.hmtx.widths)+">>"),c("endobj"),l.isAlreadyPutted=!0}})(s)}]);var a=function(s){var i,l=s.text||"",c=s.x,u=s.y,d=s.options||{},f=s.mutex||{},h=f.pdfEscape,A=f.activeFontKey,m=f.fonts,p=A,g="",x=0,y="",b=m[p].encoding;if(m[p].encoding!=="Identity-H")return{text:l,x:c,y:u,options:d,mutex:f};for(y=l,p=A,Array.isArray(l)&&(y=l[0]),x=0;x<y.length;x+=1)m[p].metadata.hasOwnProperty("cmap")&&(i=m[p].metadata.cmap.unicode.codeMap[y[x].charCodeAt(0)]),i||y[x].charCodeAt(0)<256&&m[p].metadata.hasOwnProperty("Unicode")?g+=y[x]:g+="";var w="";return parseInt(p.slice(1))<14||b==="WinAnsiEncoding"?w=h(g,p).split("").map(function(j){return j.charCodeAt(0).toString(16)}).join(""):b==="Identity-H"&&(w=r(g,m[p])),f.isHex=!0,{text:w,x:c,y:u,options:d,mutex:f}};e.events.push(["postProcessText",function(s){var i=s.text||"",l=[],c={text:i,x:s.x,y:s.y,options:s.options,mutex:s.mutex};if(Array.isArray(i)){var u=0;for(u=0;u<i.length;u+=1)Array.isArray(i[u])&&i[u].length===3?l.push([a(Object.assign({},c,{text:i[u][0]})).text,i[u][1],i[u][2]]):l.push(a(Object.assign({},c,{text:i[u]})).text);s.text=l}else s.text=a(Object.assign({},c,{text:i})).text}])}(Or),function(t){var e=function(){return this.internal.vFS===void 0&&(this.internal.vFS={}),!0};t.existsFileInVFS=function(r){return e.call(this),this.internal.vFS[r]!==void 0},t.addFileToVFS=function(r,n){return e.call(this),this.internal.vFS[r]=n,this},t.getFileFromVFS=function(r){return e.call(this),this.internal.vFS[r]!==void 0?this.internal.vFS[r]:null}}(Or.API),function(t){t.__bidiEngine__=t.prototype.__bidiEngine__=function(n){var a,s,i,l,c,u,d,f=e,h=[[0,3,0,1,0,0,0],[0,3,0,1,2,2,0],[0,3,0,17,2,0,1],[0,3,5,5,4,1,0],[0,3,21,21,4,0,1],[0,3,5,5,4,2,0]],A=[[2,0,1,1,0,1,0],[2,0,1,1,0,2,0],[2,0,2,1,3,2,0],[2,0,2,33,3,1,1]],m={L:0,R:1,EN:2,AN:3,N:4,B:5,S:6},p={0:0,5:1,6:2,7:3,32:4,251:5,254:6,255:7},g=["(",")","(","<",">","<","[","]","[","{","}","{","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","",""],x=new RegExp(/^([1-4|9]|1[0-9]|2[0-9]|3[0168]|4[04589]|5[012]|7[78]|159|16[0-9]|17[0-2]|21[569]|22[03489]|250)$/),y=!1,b=0;this.__bidiEngine__={};var w=function(P){var T=P.charCodeAt(),F=T>>8,Y=p[F];return Y!==void 0?f[256*Y+(255&T)]:F===252||F===253?"AL":x.test(F)?"L":F===8?"R":"N"},j=function(P){for(var T,F=0;F<P.length;F++){if((T=w(P.charAt(F)))==="L")return!1;if(T==="R")return!0}return!1},I=function(P,T,F,Y){var he,ue,fe,me,ne=T[Y];switch(ne){case"L":case"R":case"LRE":case"RLE":case"LRO":case"RLO":case"PDF":y=!1;break;case"N":case"AN":break;case"EN":y&&(ne="AN");break;case"AL":y=!0,ne="R";break;case"WS":case"BN":ne="N";break;case"CS":Y<1||Y+1>=T.length||(he=F[Y-1])!=="EN"&&he!=="AN"||(ue=T[Y+1])!=="EN"&&ue!=="AN"?ne="N":y&&(ue="AN"),ne=ue===he?ue:"N";break;case"ES":ne=(he=Y>0?F[Y-1]:"B")==="EN"&&Y+1<T.length&&T[Y+1]==="EN"?"EN":"N";break;case"ET":if(Y>0&&F[Y-1]==="EN"){ne="EN";break}if(y){ne="N";break}for(fe=Y+1,me=T.length;fe<me&&T[fe]==="ET";)fe++;ne=fe<me&&T[fe]==="EN"?"EN":"N";break;case"NSM":if(i&&!l){for(me=T.length,fe=Y+1;fe<me&&T[fe]==="NSM";)fe++;if(fe<me){var Pe=P[Y],Ie=Pe>=1425&&Pe<=2303||Pe===64286;if(he=T[fe],Ie&&(he==="R"||he==="AL")){ne="R";break}}}ne=Y<1||(he=T[Y-1])==="B"?"N":F[Y-1];break;case"B":y=!1,a=!0,ne=b;break;case"S":s=!0,ne="N"}return ne},_=function(P,T,F){var Y=P.split("");return F&&E(Y,F,{hiLevel:b}),Y.reverse(),T&&T.reverse(),Y.join("")},E=function(P,T,F){var Y,he,ue,fe,me,ne=-1,Pe=P.length,Ie=0,O=[],H=b?A:h,R=[];for(y=!1,a=!1,s=!1,he=0;he<Pe;he++)R[he]=w(P[he]);for(ue=0;ue<Pe;ue++){if(me=Ie,O[ue]=I(P,R,O,ue),Y=240&(Ie=H[me][m[O[ue]]]),Ie&=15,T[ue]=fe=H[Ie][5],Y>0)if(Y===16){for(he=ne;he<ue;he++)T[he]=1;ne=-1}else ne=-1;if(H[Ie][6])ne===-1&&(ne=ue);else if(ne>-1){for(he=ne;he<ue;he++)T[he]=fe;ne=-1}R[ue]==="B"&&(T[ue]=0),F.hiLevel|=fe}s&&function(M,K,W){for(var D=0;D<W;D++)if(M[D]==="S"){K[D]=b;for(var L=D-1;L>=0&&M[L]==="WS";L--)K[L]=b}}(R,T,Pe)},S=function(P,T,F,Y,he){if(!(he.hiLevel<P)){if(P===1&&b===1&&!a)return T.reverse(),void(F&&F.reverse());for(var ue,fe,me,ne,Pe=T.length,Ie=0;Ie<Pe;){if(Y[Ie]>=P){for(me=Ie+1;me<Pe&&Y[me]>=P;)me++;for(ne=Ie,fe=me-1;ne<fe;ne++,fe--)ue=T[ne],T[ne]=T[fe],T[fe]=ue,F&&(ue=F[ne],F[ne]=F[fe],F[fe]=ue);Ie=me}Ie++}}},k=function(P,T,F){var Y=P.split(""),he={hiLevel:b};return F||(F=[]),E(Y,F,he),function(ue,fe,me){if(me.hiLevel!==0&&d)for(var ne,Pe=0;Pe<ue.length;Pe++)fe[Pe]===1&&(ne=g.indexOf(ue[Pe]))>=0&&(ue[Pe]=g[ne+1])}(Y,F,he),S(2,Y,T,F,he),S(1,Y,T,F,he),Y.join("")};return this.__bidiEngine__.doBidiReorder=function(P,T,F){if(function(he,ue){if(ue)for(var fe=0;fe<he.length;fe++)ue[fe]=fe;l===void 0&&(l=j(he)),u===void 0&&(u=j(he))}(P,T),i||!c||u)if(i&&c&&l^u)b=l?1:0,P=_(P,T,F);else if(!i&&c&&u)b=l?1:0,P=k(P,T,F),P=_(P,T);else if(!i||l||c||u){if(i&&!c&&l^u)P=_(P,T),l?(b=0,P=k(P,T,F)):(b=1,P=k(P,T,F),P=_(P,T));else if(i&&l&&!c&&u)b=1,P=k(P,T,F),P=_(P,T);else if(!i&&!c&&l^u){var Y=d;l?(b=1,P=k(P,T,F),b=0,d=!1,P=k(P,T,F),d=Y):(b=0,P=k(P,T,F),P=_(P,T),b=1,d=!1,P=k(P,T,F),d=Y,P=_(P,T))}}else b=0,P=k(P,T,F);else b=l?1:0,P=k(P,T,F);return P},this.__bidiEngine__.setOptions=function(P){P&&(i=P.isInputVisual,c=P.isOutputVisual,l=P.isInputRtl,u=P.isOutputRtl,d=P.isSymmetricSwapping)},this.__bidiEngine__.setOptions(n),this.__bidiEngine__};var e=["BN","BN","BN","BN","BN","BN","BN","BN","BN","S","B","S","WS","B","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","B","B","B","S","WS","N","N","ET","ET","ET","N","N","N","N","N","ES","CS","ES","CS","CS","EN","EN","EN","EN","EN","EN","EN","EN","EN","EN","CS","N","N","N","N","N","N","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","N","N","N","N","N","N","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","N","N","N","N","BN","BN","BN","BN","BN","BN","B","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","CS","N","ET","ET","ET","ET","N","N","N","N","L","N","N","BN","N","N","ET","ET","EN","EN","N","L","N","N","N","EN","L","N","N","N","N","N","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","N","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","N","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","N","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","N","N","L","L","L","L","L","L","L","N","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","N","L","N","N","N","N","N","ET","N","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","R","NSM","R","NSM","NSM","R","NSM","NSM","R","NSM","N","N","N","N","N","N","N","N","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","N","N","N","N","N","R","R","R","R","R","N","N","N","N","N","N","N","N","N","N","N","AN","AN","AN","AN","AN","AN","N","N","AL","ET","ET","AL","CS","AL","N","N","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","AL","AL","N","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","AN","AN","AN","AN","AN","AN","AN","AN","AN","AN","ET","AN","AN","AL","AL","AL","NSM","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","NSM","NSM","NSM","NSM","NSM","NSM","NSM","AN","N","NSM","NSM","NSM","NSM","NSM","NSM","AL","AL","NSM","NSM","N","NSM","NSM","NSM","NSM","AL","AL","EN","EN","EN","EN","EN","EN","EN","EN","EN","EN","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","N","AL","AL","NSM","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","N","N","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","AL","N","N","N","N","N","N","N","N","N","N","N","N","N","N","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","R","R","N","N","N","N","R","N","N","N","N","N","WS","WS","WS","WS","WS","WS","WS","WS","WS","WS","WS","BN","BN","BN","L","R","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","WS","B","LRE","RLE","PDF","LRO","RLO","CS","ET","ET","ET","ET","ET","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","CS","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","WS","BN","BN","BN","BN","BN","N","LRI","RLI","FSI","PDI","BN","BN","BN","BN","BN","BN","EN","L","N","N","EN","EN","EN","EN","EN","EN","ES","ES","N","N","N","L","EN","EN","EN","EN","EN","EN","EN","EN","EN","EN","ES","ES","N","N","N","N","L","L","L","L","L","L","L","L","L","L","L","L","L","N","N","N","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","L","L","L","L","L","L","L","N","N","N","N","N","N","N","N","N","N","N","N","L","L","L","L","L","N","N","N","N","N","R","NSM","R","R","R","R","R","R","R","R","R","R","ES","R","R","R","R","R","R","R","R","R","R","R","R","R","N","R","R","R","R","R","N","R","N","R","R","N","R","R","N","R","R","R","R","R","R","R","R","R","R","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","CS","N","CS","N","N","CS","N","N","N","N","N","N","N","N","N","ET","N","N","ES","ES","N","N","N","N","N","ET","ET","N","N","N","N","N","AL","AL","AL","AL","AL","N","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","N","N","BN","N","N","N","ET","ET","ET","N","N","N","N","N","ES","CS","ES","CS","CS","EN","EN","EN","EN","EN","EN","EN","EN","EN","EN","CS","N","N","N","N","N","N","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","N","N","N","N","N","N","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","N","N","N","N","N","N","N","N","N","N","N","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","N","N","N","L","L","L","L","L","L","N","N","L","L","L","L","L","L","N","N","L","L","L","L","L","L","N","N","L","L","L","N","N","N","ET","ET","N","N","N","ET","ET","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N"],r=new t.__bidiEngine__({isInputVisual:!0});t.API.events.push(["postProcessText",function(n){var a=n.text;n.x,n.y;var s=n.options||{};n.mutex,s.lang;var i=[];if(s.isInputVisual=typeof s.isInputVisual!="boolean"||s.isInputVisual,r.setOptions(s),Object.prototype.toString.call(a)==="[object Array]"){var l=0;for(i=[],l=0;l<a.length;l+=1)Object.prototype.toString.call(a[l])==="[object Array]"?i.push([r.doBidiReorder(a[l][0]),a[l][1],a[l][2]]):i.push([r.doBidiReorder(a[l])]);n.text=i}else n.text=r.doBidiReorder(a);r.setOptions({isInputVisual:!0})}])}(Or),Or.API.TTFFont=function(){function t(e){var r;if(this.rawData=e,r=this.contents=new $0(e),this.contents.pos=4,r.readString(4)==="ttcf")throw new Error("TTCF not supported.");r.pos=0,this.parse(),this.subset=new ESe(this),this.registerTTF()}return t.open=function(e){return new t(e)},t.prototype.parse=function(){return this.directory=new fSe(this.contents),this.head=new hSe(this),this.name=new vSe(this),this.cmap=new ate(this),this.toUnicode={},this.hhea=new mSe(this),this.maxp=new ySe(this),this.hmtx=new bSe(this),this.post=new gSe(this),this.os2=new pSe(this),this.loca=new _Se(this),this.glyf=new wSe(this),this.ascender=this.os2.exists&&this.os2.ascender||this.hhea.ascender,this.decender=this.os2.exists&&this.os2.decender||this.hhea.decender,this.lineGap=this.os2.exists&&this.os2.lineGap||this.hhea.lineGap,this.bbox=[this.head.xMin,this.head.yMin,this.head.xMax,this.head.yMax]},t.prototype.registerTTF=function(){var e,r,n,a,s;if(this.scaleFactor=1e3/this.head.unitsPerEm,this.bbox=(function(){var i,l,c,u;for(u=[],i=0,l=(c=this.bbox).length;i<l;i++)e=c[i],u.push(Math.round(e*this.scaleFactor));return u}).call(this),this.stemV=0,this.post.exists?(n=255&(a=this.post.italic_angle),32768&(r=a>>16)&&(r=-(1+(65535^r))),this.italicAngle=+(r+"."+n)):this.italicAngle=0,this.ascender=Math.round(this.ascender*this.scaleFactor),this.decender=Math.round(this.decender*this.scaleFactor),this.lineGap=Math.round(this.lineGap*this.scaleFactor),this.capHeight=this.os2.exists&&this.os2.capHeight||this.ascender,this.xHeight=this.os2.exists&&this.os2.xHeight||0,this.familyClass=(this.os2.exists&&this.os2.familyClass||0)>>8,this.isSerif=(s=this.familyClass)===1||s===2||s===3||s===4||s===5||s===7,this.isScript=this.familyClass===10,this.flags=0,this.post.isFixedPitch&&(this.flags|=1),this.isSerif&&(this.flags|=2),this.isScript&&(this.flags|=8),this.italicAngle!==0&&(this.flags|=64),this.flags|=32,!this.cmap.unicode)throw new Error("No unicode cmap for font")},t.prototype.characterToGlyph=function(e){var r;return((r=this.cmap.unicode)!=null?r.codeMap[e]:void 0)||0},t.prototype.widthOfGlyph=function(e){var r;return r=1e3/this.head.unitsPerEm,this.hmtx.forGlyph(e).advance*r},t.prototype.widthOfString=function(e,r,n){var a,s,i,l;for(i=0,s=0,l=(e=""+e).length;0<=l?s<l:s>l;s=0<=l?++s:--s)a=e.charCodeAt(s),i+=this.widthOfGlyph(this.characterToGlyph(a))+n*(1e3/r)||0;return i*(r/1e3)},t.prototype.lineHeight=function(e,r){var n;return r==null&&(r=!1),n=r?this.lineGap:0,(this.ascender+n-this.decender)/1e3*e},t}();var $d,$0=function(){function t(e){this.data=e??[],this.pos=0,this.length=this.data.length}return t.prototype.readByte=function(){return this.data[this.pos++]},t.prototype.writeByte=function(e){return this.data[this.pos++]=e},t.prototype.readUInt32=function(){return 16777216*this.readByte()+(this.readByte()<<16)+(this.readByte()<<8)+this.readByte()},t.prototype.writeUInt32=function(e){return this.writeByte(e>>>24&255),this.writeByte(e>>16&255),this.writeByte(e>>8&255),this.writeByte(255&e)},t.prototype.readInt32=function(){var e;return(e=this.readUInt32())>=2147483648?e-4294967296:e},t.prototype.writeInt32=function(e){return e<0&&(e+=4294967296),this.writeUInt32(e)},t.prototype.readUInt16=function(){return this.readByte()<<8|this.readByte()},t.prototype.writeUInt16=function(e){return this.writeByte(e>>8&255),this.writeByte(255&e)},t.prototype.readInt16=function(){var e;return(e=this.readUInt16())>=32768?e-65536:e},t.prototype.writeInt16=function(e){return e<0&&(e+=65536),this.writeUInt16(e)},t.prototype.readString=function(e){var r,n;for(n=[],r=0;0<=e?r<e:r>e;r=0<=e?++r:--r)n[r]=String.fromCharCode(this.readByte());return n.join("")},t.prototype.writeString=function(e){var r,n,a;for(a=[],r=0,n=e.length;0<=n?r<n:r>n;r=0<=n?++r:--r)a.push(this.writeByte(e.charCodeAt(r)));return a},t.prototype.readShort=function(){return this.readInt16()},t.prototype.writeShort=function(e){return this.writeInt16(e)},t.prototype.readLongLong=function(){var e,r,n,a,s,i,l,c;return e=this.readByte(),r=this.readByte(),n=this.readByte(),a=this.readByte(),s=this.readByte(),i=this.readByte(),l=this.readByte(),c=this.readByte(),128&e?-1*(72057594037927940*(255^e)+281474976710656*(255^r)+1099511627776*(255^n)+4294967296*(255^a)+16777216*(255^s)+65536*(255^i)+256*(255^l)+(255^c)+1):72057594037927940*e+281474976710656*r+1099511627776*n+4294967296*a+16777216*s+65536*i+256*l+c},t.prototype.writeLongLong=function(e){var r,n;return r=Math.floor(e/4294967296),n=4294967295&e,this.writeByte(r>>24&255),this.writeByte(r>>16&255),this.writeByte(r>>8&255),this.writeByte(255&r),this.writeByte(n>>24&255),this.writeByte(n>>16&255),this.writeByte(n>>8&255),this.writeByte(255&n)},t.prototype.readInt=function(){return this.readInt32()},t.prototype.writeInt=function(e){return this.writeInt32(e)},t.prototype.read=function(e){var r,n;for(r=[],n=0;0<=e?n<e:n>e;n=0<=e?++n:--n)r.push(this.readByte());return r},t.prototype.write=function(e){var r,n,a,s;for(s=[],n=0,a=e.length;n<a;n++)r=e[n],s.push(this.writeByte(r));return s},t}(),fSe=function(){var t;function e(r){var n,a,s;for(this.scalarType=r.readInt(),this.tableCount=r.readShort(),this.searchRange=r.readShort(),this.entrySelector=r.readShort(),this.rangeShift=r.readShort(),this.tables={},a=0,s=this.tableCount;0<=s?a<s:a>s;a=0<=s?++a:--a)n={tag:r.readString(4),checksum:r.readInt(),offset:r.readInt(),length:r.readInt()},this.tables[n.tag]=n}return e.prototype.encode=function(r){var n,a,s,i,l,c,u,d,f,h,A,m,p;for(p in A=Object.keys(r).length,c=Math.log(2),f=16*Math.floor(Math.log(A)/c),i=Math.floor(f/c),d=16*A-f,(a=new $0).writeInt(this.scalarType),a.writeShort(A),a.writeShort(f),a.writeShort(i),a.writeShort(d),s=16*A,u=a.pos+s,l=null,m=[],r)for(h=r[p],a.writeString(p),a.writeInt(t(h)),a.writeInt(u),a.writeInt(h.length),m=m.concat(h),p==="head"&&(l=u),u+=h.length;u%4;)m.push(0),u++;return a.write(m),n=2981146554-t(a.data),a.pos=l+8,a.writeUInt32(n),a.data},t=function(r){var n,a,s,i;for(r=ste.call(r);r.length%4;)r.push(0);for(s=new $0(r),a=0,n=0,i=r.length;n<i;n=n+=4)a+=s.readUInt32();return 4294967295&a},e}(),ASe={}.hasOwnProperty,Of=function(t,e){for(var r in e)ASe.call(e,r)&&(t[r]=e[r]);function n(){this.constructor=t}return n.prototype=e.prototype,t.prototype=new n,t.__super__=e.prototype,t};$d=function(){function t(e){var r;this.file=e,r=this.file.directory.tables[this.tag],this.exists=!!r,r&&(this.offset=r.offset,this.length=r.length,this.parse(this.file.contents))}return t.prototype.parse=function(){},t.prototype.encode=function(){},t.prototype.raw=function(){return this.exists?(this.file.contents.pos=this.offset,this.file.contents.read(this.length)):null},t}();var hSe=function(){function t(){return t.__super__.constructor.apply(this,arguments)}return Of(t,$d),t.prototype.tag="head",t.prototype.parse=function(e){return e.pos=this.offset,this.version=e.readInt(),this.revision=e.readInt(),this.checkSumAdjustment=e.readInt(),this.magicNumber=e.readInt(),this.flags=e.readShort(),this.unitsPerEm=e.readShort(),this.created=e.readLongLong(),this.modified=e.readLongLong(),this.xMin=e.readShort(),this.yMin=e.readShort(),this.xMax=e.readShort(),this.yMax=e.readShort(),this.macStyle=e.readShort(),this.lowestRecPPEM=e.readShort(),this.fontDirectionHint=e.readShort(),this.indexToLocFormat=e.readShort(),this.glyphDataFormat=e.readShort()},t.prototype.encode=function(e){var r;return(r=new $0).writeInt(this.version),r.writeInt(this.revision),r.writeInt(this.checkSumAdjustment),r.writeInt(this.magicNumber),r.writeShort(this.flags),r.writeShort(this.unitsPerEm),r.writeLongLong(this.created),r.writeLongLong(this.modified),r.writeShort(this.xMin),r.writeShort(this.yMin),r.writeShort(this.xMax),r.writeShort(this.yMax),r.writeShort(this.macStyle),r.writeShort(this.lowestRecPPEM),r.writeShort(this.fontDirectionHint),r.writeShort(e),r.writeShort(this.glyphDataFormat),r.data},t}(),RQ=function(){function t(e,r){var n,a,s,i,l,c,u,d,f,h,A,m,p,g,x,y,b;switch(this.platformID=e.readUInt16(),this.encodingID=e.readShort(),this.offset=r+e.readInt(),f=e.pos,e.pos=this.offset,this.format=e.readUInt16(),this.length=e.readUInt16(),this.language=e.readUInt16(),this.isUnicode=this.platformID===3&&this.encodingID===1&&this.format===4||this.platformID===0&&this.format===4,this.codeMap={},this.format){case 0:for(c=0;c<256;++c)this.codeMap[c]=e.readByte();break;case 4:for(A=e.readUInt16(),h=A/2,e.pos+=6,s=function(){var w,j;for(j=[],c=w=0;0<=h?w<h:w>h;c=0<=h?++w:--w)j.push(e.readUInt16());return j}(),e.pos+=2,p=function(){var w,j;for(j=[],c=w=0;0<=h?w<h:w>h;c=0<=h?++w:--w)j.push(e.readUInt16());return j}(),u=function(){var w,j;for(j=[],c=w=0;0<=h?w<h:w>h;c=0<=h?++w:--w)j.push(e.readUInt16());return j}(),d=function(){var w,j;for(j=[],c=w=0;0<=h?w<h:w>h;c=0<=h?++w:--w)j.push(e.readUInt16());return j}(),a=(this.length-e.pos+this.offset)/2,l=function(){var w,j;for(j=[],c=w=0;0<=a?w<a:w>a;c=0<=a?++w:--w)j.push(e.readUInt16());return j}(),c=x=0,b=s.length;x<b;c=++x)for(g=s[c],n=y=m=p[c];m<=g?y<=g:y>=g;n=m<=g?++y:--y)d[c]===0?i=n+u[c]:(i=l[d[c]/2+(n-m)-(h-c)]||0)!==0&&(i+=u[c]),this.codeMap[n]=65535&i}e.pos=f}return t.encode=function(e,r){var n,a,s,i,l,c,u,d,f,h,A,m,p,g,x,y,b,w,j,I,_,E,S,k,P,T,F,Y,he,ue,fe,me,ne,Pe,Ie,O,H,R,M,K,W,D,L,Z,ge,U;switch(Y=new $0,i=Object.keys(e).sort(function(Ge,ie){return Ge-ie}),r){case"macroman":for(p=0,g=function(){var Ge=[];for(m=0;m<256;++m)Ge.push(0);return Ge}(),y={0:0},s={},he=0,ne=i.length;he<ne;he++)y[L=e[a=i[he]]]==null&&(y[L]=++p),s[a]={old:e[a],new:y[e[a]]},g[a]=y[e[a]];return Y.writeUInt16(1),Y.writeUInt16(0),Y.writeUInt32(12),Y.writeUInt16(0),Y.writeUInt16(262),Y.writeUInt16(0),Y.write(g),{charMap:s,subtable:Y.data,maxGlyphID:p+1};case"unicode":for(T=[],f=[],b=0,y={},n={},x=u=null,ue=0,Pe=i.length;ue<Pe;ue++)y[j=e[a=i[ue]]]==null&&(y[j]=++b),n[a]={old:j,new:y[j]},l=y[j]-a,x!=null&&l===u||(x&&f.push(x),T.push(a),u=l),x=a;for(x&&f.push(x),f.push(65535),T.push(65535),k=2*(S=T.length),E=2*Math.pow(Math.log(S)/Math.LN2,2),h=Math.log(E/2)/Math.LN2,_=2*S-E,c=[],I=[],A=[],m=fe=0,Ie=T.length;fe<Ie;m=++fe){if(P=T[m],d=f[m],P===65535){c.push(0),I.push(0);break}if(P-(F=n[P].new)>=32768)for(c.push(0),I.push(2*(A.length+S-m)),a=me=P;P<=d?me<=d:me>=d;a=P<=d?++me:--me)A.push(n[a].new);else c.push(F-P),I.push(0)}for(Y.writeUInt16(3),Y.writeUInt16(1),Y.writeUInt32(12),Y.writeUInt16(4),Y.writeUInt16(16+8*S+2*A.length),Y.writeUInt16(0),Y.writeUInt16(k),Y.writeUInt16(E),Y.writeUInt16(h),Y.writeUInt16(_),W=0,O=f.length;W<O;W++)a=f[W],Y.writeUInt16(a);for(Y.writeUInt16(0),D=0,H=T.length;D<H;D++)a=T[D],Y.writeUInt16(a);for(Z=0,R=c.length;Z<R;Z++)l=c[Z],Y.writeUInt16(l);for(ge=0,M=I.length;ge<M;ge++)w=I[ge],Y.writeUInt16(w);for(U=0,K=A.length;U<K;U++)p=A[U],Y.writeUInt16(p);return{charMap:n,subtable:Y.data,maxGlyphID:b+1}}},t}(),ate=function(){function t(){return t.__super__.constructor.apply(this,arguments)}return Of(t,$d),t.prototype.tag="cmap",t.prototype.parse=function(e){var r,n,a;for(e.pos=this.offset,this.version=e.readUInt16(),a=e.readUInt16(),this.tables=[],this.unicode=null,n=0;0<=a?n<a:n>a;n=0<=a?++n:--n)r=new RQ(e,this.offset),this.tables.push(r),r.isUnicode&&this.unicode==null&&(this.unicode=r);return!0},t.encode=function(e,r){var n,a;return r==null&&(r="macroman"),n=RQ.encode(e,r),(a=new $0).writeUInt16(0),a.writeUInt16(1),n.table=a.data.concat(n.subtable),n},t}(),mSe=function(){function t(){return t.__super__.constructor.apply(this,arguments)}return Of(t,$d),t.prototype.tag="hhea",t.prototype.parse=function(e){return e.pos=this.offset,this.version=e.readInt(),this.ascender=e.readShort(),this.decender=e.readShort(),this.lineGap=e.readShort(),this.advanceWidthMax=e.readShort(),this.minLeftSideBearing=e.readShort(),this.minRightSideBearing=e.readShort(),this.xMaxExtent=e.readShort(),this.caretSlopeRise=e.readShort(),this.caretSlopeRun=e.readShort(),this.caretOffset=e.readShort(),e.pos+=8,this.metricDataFormat=e.readShort(),this.numberOfMetrics=e.readUInt16()},t}(),pSe=function(){function t(){return t.__super__.constructor.apply(this,arguments)}return Of(t,$d),t.prototype.tag="OS/2",t.prototype.parse=function(e){if(e.pos=this.offset,this.version=e.readUInt16(),this.averageCharWidth=e.readShort(),this.weightClass=e.readUInt16(),this.widthClass=e.readUInt16(),this.type=e.readShort(),this.ySubscriptXSize=e.readShort(),this.ySubscriptYSize=e.readShort(),this.ySubscriptXOffset=e.readShort(),this.ySubscriptYOffset=e.readShort(),this.ySuperscriptXSize=e.readShort(),this.ySuperscriptYSize=e.readShort(),this.ySuperscriptXOffset=e.readShort(),this.ySuperscriptYOffset=e.readShort(),this.yStrikeoutSize=e.readShort(),this.yStrikeoutPosition=e.readShort(),this.familyClass=e.readShort(),this.panose=function(){var r,n;for(n=[],r=0;r<10;++r)n.push(e.readByte());return n}(),this.charRange=function(){var r,n;for(n=[],r=0;r<4;++r)n.push(e.readInt());return n}(),this.vendorID=e.readString(4),this.selection=e.readShort(),this.firstCharIndex=e.readShort(),this.lastCharIndex=e.readShort(),this.version>0&&(this.ascent=e.readShort(),this.descent=e.readShort(),this.lineGap=e.readShort(),this.winAscent=e.readShort(),this.winDescent=e.readShort(),this.codePageRange=function(){var r,n;for(n=[],r=0;r<2;r=++r)n.push(e.readInt());return n}(),this.version>1))return this.xHeight=e.readShort(),this.capHeight=e.readShort(),this.defaultChar=e.readShort(),this.breakChar=e.readShort(),this.maxContext=e.readShort()},t}(),gSe=function(){function t(){return t.__super__.constructor.apply(this,arguments)}return Of(t,$d),t.prototype.tag="post",t.prototype.parse=function(e){var r,n,a;switch(e.pos=this.offset,this.format=e.readInt(),this.italicAngle=e.readInt(),this.underlinePosition=e.readShort(),this.underlineThickness=e.readShort(),this.isFixedPitch=e.readInt(),this.minMemType42=e.readInt(),this.maxMemType42=e.readInt(),this.minMemType1=e.readInt(),this.maxMemType1=e.readInt(),this.format){case 65536:case 196608:break;case 131072:var s;for(n=e.readUInt16(),this.glyphNameIndex=[],s=0;0<=n?s<n:s>n;s=0<=n?++s:--s)this.glyphNameIndex.push(e.readUInt16());for(this.names=[],a=[];e.pos<this.offset+this.length;)r=e.readByte(),a.push(this.names.push(e.readString(r)));return a;case 151552:return n=e.readUInt16(),this.offsets=e.read(n);case 262144:return this.map=(function(){var i,l,c;for(c=[],s=i=0,l=this.file.maxp.numGlyphs;0<=l?i<l:i>l;s=0<=l?++i:--i)c.push(e.readUInt32());return c}).call(this)}},t}(),xSe=function(t,e){this.raw=t,this.length=t.length,this.platformID=e.platformID,this.encodingID=e.encodingID,this.languageID=e.languageID},vSe=function(){function t(){return t.__super__.constructor.apply(this,arguments)}return Of(t,$d),t.prototype.tag="name",t.prototype.parse=function(e){var r,n,a,s,i,l,c,u,d,f,h;for(e.pos=this.offset,e.readShort(),r=e.readShort(),l=e.readShort(),n=[],s=0;0<=r?s<r:s>r;s=0<=r?++s:--s)n.push({platformID:e.readShort(),encodingID:e.readShort(),languageID:e.readShort(),nameID:e.readShort(),length:e.readShort(),offset:this.offset+l+e.readShort()});for(c={},s=d=0,f=n.length;d<f;s=++d)a=n[s],e.pos=a.offset,u=e.readString(a.length),i=new xSe(u,a),c[h=a.nameID]==null&&(c[h]=[]),c[a.nameID].push(i);this.strings=c,this.copyright=c[0],this.fontFamily=c[1],this.fontSubfamily=c[2],this.uniqueSubfamily=c[3],this.fontName=c[4],this.version=c[5];try{this.postscriptName=c[6][0].raw.replace(/[\x00-\x19\x80-\xff]/g,"")}catch{this.postscriptName=c[4][0].raw.replace(/[\x00-\x19\x80-\xff]/g,"")}return this.trademark=c[7],this.manufacturer=c[8],this.designer=c[9],this.description=c[10],this.vendorUrl=c[11],this.designerUrl=c[12],this.license=c[13],this.licenseUrl=c[14],this.preferredFamily=c[15],this.preferredSubfamily=c[17],this.compatibleFull=c[18],this.sampleText=c[19]},t}(),ySe=function(){function t(){return t.__super__.constructor.apply(this,arguments)}return Of(t,$d),t.prototype.tag="maxp",t.prototype.parse=function(e){return e.pos=this.offset,this.version=e.readInt(),this.numGlyphs=e.readUInt16(),this.maxPoints=e.readUInt16(),this.maxContours=e.readUInt16(),this.maxCompositePoints=e.readUInt16(),this.maxComponentContours=e.readUInt16(),this.maxZones=e.readUInt16(),this.maxTwilightPoints=e.readUInt16(),this.maxStorage=e.readUInt16(),this.maxFunctionDefs=e.readUInt16(),this.maxInstructionDefs=e.readUInt16(),this.maxStackElements=e.readUInt16(),this.maxSizeOfInstructions=e.readUInt16(),this.maxComponentElements=e.readUInt16(),this.maxComponentDepth=e.readUInt16()},t}(),bSe=function(){function t(){return t.__super__.constructor.apply(this,arguments)}return Of(t,$d),t.prototype.tag="hmtx",t.prototype.parse=function(e){var r,n,a,s,i,l,c;for(e.pos=this.offset,this.metrics=[],r=0,l=this.file.hhea.numberOfMetrics;0<=l?r<l:r>l;r=0<=l?++r:--r)this.metrics.push({advance:e.readUInt16(),lsb:e.readInt16()});for(a=this.file.maxp.numGlyphs-this.file.hhea.numberOfMetrics,this.leftSideBearings=function(){var u,d;for(d=[],r=u=0;0<=a?u<a:u>a;r=0<=a?++u:--u)d.push(e.readInt16());return d}(),this.widths=(function(){var u,d,f,h;for(h=[],u=0,d=(f=this.metrics).length;u<d;u++)s=f[u],h.push(s.advance);return h}).call(this),n=this.widths[this.widths.length-1],c=[],r=i=0;0<=a?i<a:i>a;r=0<=a?++i:--i)c.push(this.widths.push(n));return c},t.prototype.forGlyph=function(e){return e in this.metrics?this.metrics[e]:{advance:this.metrics[this.metrics.length-1].advance,lsb:this.leftSideBearings[e-this.metrics.length]}},t}(),ste=[].slice,wSe=function(){function t(){return t.__super__.constructor.apply(this,arguments)}return Of(t,$d),t.prototype.tag="glyf",t.prototype.parse=function(){return this.cache={}},t.prototype.glyphFor=function(e){var r,n,a,s,i,l,c,u,d,f;return e in this.cache?this.cache[e]:(s=this.file.loca,r=this.file.contents,n=s.indexOf(e),(a=s.lengthOf(e))===0?this.cache[e]=null:(r.pos=this.offset+n,i=(l=new $0(r.read(a))).readShort(),u=l.readShort(),f=l.readShort(),c=l.readShort(),d=l.readShort(),this.cache[e]=i===-1?new CSe(l,u,f,c,d):new NSe(l,i,u,f,c,d),this.cache[e]))},t.prototype.encode=function(e,r,n){var a,s,i,l,c;for(i=[],s=[],l=0,c=r.length;l<c;l++)a=e[r[l]],s.push(i.length),a&&(i=i.concat(a.encode(n)));return s.push(i.length),{table:i,offsets:s}},t}(),NSe=function(){function t(e,r,n,a,s,i){this.raw=e,this.numberOfContours=r,this.xMin=n,this.yMin=a,this.xMax=s,this.yMax=i,this.compound=!1}return t.prototype.encode=function(){return this.raw.data},t}(),CSe=function(){function t(e,r,n,a,s){var i,l;for(this.raw=e,this.xMin=r,this.yMin=n,this.xMax=a,this.yMax=s,this.compound=!0,this.glyphIDs=[],this.glyphOffsets=[],i=this.raw;l=i.readShort(),this.glyphOffsets.push(i.pos),this.glyphIDs.push(i.readUInt16()),32&l;)i.pos+=1&l?4:2,128&l?i.pos+=8:64&l?i.pos+=4:8&l&&(i.pos+=2)}return t.prototype.encode=function(){var e,r,n;for(r=new $0(ste.call(this.raw.data)),e=0,n=this.glyphIDs.length;e<n;++e)r.pos=this.glyphOffsets[e];return r.data},t}(),_Se=function(){function t(){return t.__super__.constructor.apply(this,arguments)}return Of(t,$d),t.prototype.tag="loca",t.prototype.parse=function(e){var r,n;return e.pos=this.offset,r=this.file.head.indexToLocFormat,this.offsets=r===0?(function(){var a,s;for(s=[],n=0,a=this.length;n<a;n+=2)s.push(2*e.readUInt16());return s}).call(this):(function(){var a,s;for(s=[],n=0,a=this.length;n<a;n+=4)s.push(e.readUInt32());return s}).call(this)},t.prototype.indexOf=function(e){return this.offsets[e]},t.prototype.lengthOf=function(e){return this.offsets[e+1]-this.offsets[e]},t.prototype.encode=function(e,r){for(var n=new Uint32Array(this.offsets.length),a=0,s=0,i=0;i<n.length;++i)if(n[i]=a,s<r.length&&r[s]==i){++s,n[i]=a;var l=this.offsets[i],c=this.offsets[i+1]-l;c>0&&(a+=c)}for(var u=new Array(4*n.length),d=0;d<n.length;++d)u[4*d+3]=255&n[d],u[4*d+2]=(65280&n[d])>>8,u[4*d+1]=(16711680&n[d])>>16,u[4*d]=(4278190080&n[d])>>24;return u},t}(),ESe=function(){function t(e){this.font=e,this.subset={},this.unicodes={},this.next=33}return t.prototype.generateCmap=function(){var e,r,n,a,s;for(r in a=this.font.cmap.tables[0].codeMap,e={},s=this.subset)n=s[r],e[r]=a[n];return e},t.prototype.glyphsFor=function(e){var r,n,a,s,i,l,c;for(a={},i=0,l=e.length;i<l;i++)a[s=e[i]]=this.font.glyf.glyphFor(s);for(s in r=[],a)(n=a[s])!=null&&n.compound&&r.push.apply(r,n.glyphIDs);if(r.length>0)for(s in c=this.glyphsFor(r))n=c[s],a[s]=n;return a},t.prototype.encode=function(e,r){var n,a,s,i,l,c,u,d,f,h,A,m,p,g,x;for(a in n=ate.encode(this.generateCmap(),"unicode"),i=this.glyphsFor(e),A={0:0},x=n.charMap)A[(c=x[a]).old]=c.new;for(m in h=n.maxGlyphID,i)m in A||(A[m]=h++);return d=function(y){var b,w;for(b in w={},y)w[y[b]]=b;return w}(A),f=Object.keys(d).sort(function(y,b){return y-b}),p=function(){var y,b,w;for(w=[],y=0,b=f.length;y<b;y++)l=f[y],w.push(d[l]);return w}(),s=this.font.glyf.encode(i,p,A),u=this.font.loca.encode(s.offsets,p),g={cmap:this.font.cmap.raw(),glyf:s.table,loca:u,hmtx:this.font.hmtx.raw(),hhea:this.font.hhea.raw(),maxp:this.font.maxp.raw(),post:this.font.post.raw(),name:this.font.name.raw(),head:this.font.head.encode(r)},this.font.os2.exists&&(g["OS/2"]=this.font.os2.raw()),this.font.directory.encode(g)},t}();Or.API.PDFObject=function(){var t;function e(){}return t=function(r,n){return(Array(n+1).join("0")+r).slice(-n)},e.convert=function(r){var n,a,s,i;if(Array.isArray(r))return"["+function(){var l,c,u;for(u=[],l=0,c=r.length;l<c;l++)n=r[l],u.push(e.convert(n));return u}().join(" ")+"]";if(typeof r=="string")return"/"+r;if(r!=null&&r.isString)return"("+r+")";if(r instanceof Date)return"(D:"+t(r.getUTCFullYear(),4)+t(r.getUTCMonth(),2)+t(r.getUTCDate(),2)+t(r.getUTCHours(),2)+t(r.getUTCMinutes(),2)+t(r.getUTCSeconds(),2)+"Z)";if({}.toString.call(r)==="[object Object]"){for(a in s=["<<"],r)i=r[a],s.push("/"+a+" "+e.convert(i));return s.push(">>"),s.join(`
`)}return""+r},e}();const qT=Object.freeze(Object.defineProperty({__proto__:null,AcroForm:nSe,AcroFormAppearance:Lr,AcroFormButton:Fi,AcroFormCheckBox:Jy,AcroFormChoiceField:ap,AcroFormComboBox:ip,AcroFormEditBox:Xy,AcroFormListBox:sp,AcroFormPasswordField:Zy,AcroFormPushButton:Yy,AcroFormRadioButton:op,AcroFormTextField:P0,GState:Jb,ShadingPattern:s0,TilingPattern:qm,default:Or,jsPDF:Or},Symbol.toStringTag,{value:"Module"}));async function MQ(t){const e={...t,remaining:t.quantity,status:"PENDIENTE",createdAt:fr.now()};return xn(ht(ke,"inventory_batches"),e)}async function ite(t,e){await nn(qt(ke,"inventory_batches",t),{status:"PAGADO",paidAmount:null,paidAt:fr.now()})}async function SSe(t,e){const r=nr(ht(ke,"batch_allocations"),cr("saleDate",">=",t),cr("saleDate","<=",e)),n=await Ot(r),a={};return n.forEach(s=>{const i=s.data(),l=i.batchId;a[l]||(a[l]={batchId:i.batchId,batchDate:i.batchDate,productName:i.productName,quantity:0,amountCharged:0}),a[l].quantity+=Number(i.quantity||0),a[l].amountCharged+=Number(i.amountCharged||0)}),Object.values(a)}async function ote(t){const e=qt(ke,"salesV2",t),r=await ui(e);if(!r.exists())throw new Error("La venta no existe.");const n=r.data(),a=[];if(Array.isArray(n.items)){for(const l of n.items)if(Array.isArray(l==null?void 0:l.allocations))for(const c of l.allocations){const u=String((c==null?void 0:c.batchId)||"").trim(),d=Number((c==null?void 0:c.qty)||0);u&&d&&a.push({batchId:u,qty:d})}}if(Array.isArray(n.allocations))for(const l of n.allocations){const c=String((l==null?void 0:l.batchId)||"").trim(),u=Number((l==null?void 0:l.qty)||0);c&&u&&a.push({batchId:c,qty:u})}if(a.length===0)return await Hi(ke,async l=>{l.delete(e)}),{restored:0};const s=new Map;for(const l of a)s.set(l.batchId,Number((s.get(l.batchId)||0)+l.qty));let i=0;return await Hi(ke,async l=>{const c=Array.from(s.entries()),u=c.map(([f])=>qt(ke,"inventory_batches",f)),d=await Promise.all(u.map(f=>l.get(f)));c.forEach(([f,h],A)=>{const m=d[A];if(!m.exists())return;const p=m.data(),g=Number((p==null?void 0:p.remaining)??0),x=Number((g+Number(h||0)).toFixed(3));l.update(u[A],{remaining:x}),i+=Number(h||0)}),l.delete(e)}),{restored:i}}var lte={color:void 0,size:void 0,className:void 0,style:void 0,attr:void 0},LQ=Lo.createContext&&Lo.createContext(lte),ISe=["attr","size","title"];function jSe(t,e){if(t==null)return{};var r=BSe(t,e),n,a;if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(t);for(a=0;a<s.length;a++)n=s[a],!(e.indexOf(n)>=0)&&Object.prototype.propertyIsEnumerable.call(t,n)&&(r[n]=t[n])}return r}function BSe(t,e){if(t==null)return{};var r={};for(var n in t)if(Object.prototype.hasOwnProperty.call(t,n)){if(e.indexOf(n)>=0)continue;r[n]=t[n]}return r}function eS(){return eS=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var r=arguments[e];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(t[n]=r[n])}return t},eS.apply(this,arguments)}function UQ(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter(function(a){return Object.getOwnPropertyDescriptor(t,a).enumerable})),r.push.apply(r,n)}return r}function tS(t){for(var e=1;e<arguments.length;e++){var r=arguments[e]!=null?arguments[e]:{};e%2?UQ(Object(r),!0).forEach(function(n){PSe(t,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):UQ(Object(r)).forEach(function(n){Object.defineProperty(t,n,Object.getOwnPropertyDescriptor(r,n))})}return t}function PSe(t,e,r){return e=TSe(e),e in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}function TSe(t){var e=kSe(t,"string");return typeof e=="symbol"?e:e+""}function kSe(t,e){if(typeof t!="object"||!t)return t;var r=t[Symbol.toPrimitive];if(r!==void 0){var n=r.call(t,e);if(typeof n!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}function cte(t){return t&&t.map((e,r)=>Lo.createElement(e.tag,tS({key:r},e.attr),cte(e.child)))}function FSe(t){return e=>Lo.createElement(OSe,eS({attr:tS({},t.attr)},e),cte(t.child))}function OSe(t){var e=r=>{var{attr:n,size:a,title:s}=t,i=jSe(t,ISe),l=a||r.size||"1em",c;return r.className&&(c=r.className),t.className&&(c=(c?c+" ":"")+t.className),Lo.createElement("svg",eS({stroke:"currentColor",fill:"currentColor",strokeWidth:"0"},r.attr,n,i,{className:c,style:tS(tS({color:t.color||r.color},r.style),t.style),height:l,width:l,xmlns:"http://www.w3.org/2000/svg"}),s&&Lo.createElement("title",null,s),t.children)};return LQ!==void 0?Lo.createElement(LQ.Consumer,null,r=>e(r)):e(lte)}function DSe(t){return FSe({attr:{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"},child:[{tag:"polyline",attr:{points:"23 4 23 10 17 10"},child:[]},{tag:"polyline",attr:{points:"1 20 1 14 7 14"},child:[]},{tag:"path",attr:{d:"M3.51 9a9 9 0 0 1 14.85-3.36L23 10M1 14l4.64 4.36A9 9 0 0 0 20.49 15"},child:[]}]})(t)}function gc({onClick:t,loading:e,className:r=""}){return o.jsxs("button",{onClick:t,disabled:e,className:`flex items-center gap-2 px-3 py-1.5 rounded-2xl  border 
        bg-white hover:bg-gray-100 text-sm font-medium shadow-2xl
        disabled:opacity-50 disabled:cursor-not-allowed ${r}`,title:"Refrescar datos",children:[o.jsx(DSe,{className:`w-4 h-4 ${e?"animate-spin text-blue-500":""}`}),e?"Actualizando...":"Refrescar"]})}function xc(){const[t,e]=v.useState(0),r=v.useCallback(()=>e(n=>n+1),[]);return{refreshKey:t,refresh:r}}const bu=t=>Math.round((Number(t)||0)*100)/100,iC=t=>Math.round((Number(t)||0)*1e3)/1e3,vm=t=>Number(t??0).toFixed(2),oC=t=>Number(t??0).toFixed(3),QQ=(t,e)=>{var n;const r=t.date??((n=t.timestamp)!=null&&n.toDate?Sr(t.timestamp.toDate(),"yyyy-MM-dd"):"");return r?Array.isArray(t.items)&&t.items.length>0?t.items.map((a,s)=>{const i=Number((a==null?void 0:a.qty)??0),l=Number((a==null?void 0:a.lineFinal)??0)||Math.max(0,Number((a==null?void 0:a.unitPrice)||0)*i-Number((a==null?void 0:a.discount)||0));return{id:`${e}#${s}`,productName:String((a==null?void 0:a.productName)??"(sin nombre)"),quantity:i,amount:bu(l),amountSuggested:Number(t.amountSuggested??0),date:r,userEmail:t.userEmail??t.vendor??"(sin usuario)",clientName:t.clientName??"",amountReceived:Number(t.amountReceived??0),change:String(t.change??"0"),status:t.status??"FLOTANTE",allocations:Array.isArray(a==null?void 0:a.allocations)?a.allocations:t.allocations,avgUnitCost:Number((a==null?void 0:a.avgUnitCost)??t.avgUnitCost??0),cogsAmount:Number((a==null?void 0:a.cogsAmount)??0)}}):[{id:e,productName:t.productName??"(sin nombre)",quantity:Number(t.quantity??0),amount:Number(t.amount??t.amountCharged??0),amountSuggested:Number(t.amountSuggested??0),date:r,userEmail:t.userEmail??t.vendor??"(sin usuario)",clientName:t.clientName??"",amountReceived:Number(t.amountReceived??0),change:String(t.change??"0"),status:t.status??"FLOTANTE",allocations:t.allocations,avgUnitCost:t.avgUnitCost,cogsAmount:t.cogsAmount}]:[]};function RSe({role:t,roles:e}){const[r,n]=v.useState([]),[a,s]=v.useState([]),[i,l]=v.useState(null),[c,u]=v.useState(!0),[d,f]=v.useState(""),[h,A]=v.useState("ALL"),[m,p]=v.useState(null),[g,x]=v.useState(0),[y,b]=v.useState(0),[w,j]=v.useState(""),[I,_]=v.useState(0),[E,S]=v.useState("0"),k=Sr(new Date,"yyyy-MM-dd"),[P,T]=v.useState(k),[F,Y]=v.useState(k),[he,ue]=v.useState(!1),[fe,me]=v.useState(!1),[ne,Pe]=v.useState(!1),[Ie,O]=v.useState(""),H=v.useRef(null),{refreshKey:R,refresh:M}=xc(),K=e&&e.length?e:t,W=e1e(K,"bills","cerrarVentas"),D=Yr(K,"admin"),L=({title:De,open:it,onToggle:dt,right:ce})=>o.jsxs("button",{type:"button",onClick:dt,className:"w-full flex items-center justify-between gap-3 px-4 py-3 rounded-xl border bg-gray-50 hover:bg-gray-100 active:bg-gray-200",children:[o.jsxs("div",{className:"flex items-center gap-2 min-w-0",children:[o.jsx("span",{className:"font-semibold truncate",children:De}),ce?o.jsx("span",{className:"text-xs text-gray-600",children:ce}):null]}),o.jsx("div",{className:"shrink-0 text-lg font-bold leading-none",children:it?"":"+"})]});v.useEffect(()=>{if(!P||!F)return;u(!0);const De=nr(ht(ke,"salesV2"),cr("date",">=",P),cr("date","<=",F)),it=Fd(De,dt=>{const ce=[];dt.forEach(oe=>{const Me=QQ(oe.data(),oe.id);ce.push(...Me)}),n(ce),u(!1)},dt=>{console.error("Error cargando ventas por periodo:",dt),n([]),u(!1)});return()=>it()},[P,F,R]),v.useEffect(()=>{if(!P||!F)return;const De=nr(ht(ke,"salesV2"),cr("status","==","FLOTANTE"),cr("date",">=",P),cr("date","<=",F)),it=Fd(De,dt=>{const ce=[];dt.forEach(oe=>{const Me=QQ(oe.data(),oe.id);ce.push(...Me)}),s(ce)});return()=>it()},[P,F,R]),v.useEffect(()=>{(async()=>{const it=nr(ht(ke,"daily_closures"),cr("date","==",k)),dt=await Ot(it);if(dt.empty)l(null);else{const ce=dt.docs[0];l({id:ce.id,...ce.data()})}})()},[k,R]);const Z=Lo.useMemo(()=>{let De=[];if(h==="FLOTANTE"){const dt=[...r,...a],ce=new Map;for(const oe of dt)oe.status==="FLOTANTE"&&ce.set(oe.id,oe);De=Array.from(ce.values())}else if(h==="ALL"){const dt=[...r,...a],ce=new Map;for(const oe of dt)ce.set(oe.id,oe);De=Array.from(ce.values())}else De=r.filter(dt=>dt.status==="PROCESADA");const it=Ie.trim().toLowerCase();if(it){const dt=oe=>String(oe||"").toLowerCase().normalize("NFD").replace(/[\u0300-\u036f]/g,""),ce=dt(it);De=De.filter(oe=>dt(oe.productName).includes(ce))}return De},[h,r,a,Ie]);bu(Z.reduce((De,it)=>De+(it.amountSuggested||0),0));const ge=bu(Z.reduce((De,it)=>De+(it.amount||0),0)),U=iC(Z.reduce((De,it)=>De+(it.quantity||0),0)),Ge=bu(Z.reduce((De,it)=>De+Number(it.cogsAmount??0),0)),ie=bu(ge-Ge),J={};Z.forEach(De=>{const it=De.productName||"(sin nombre)";J[it]||(J[it]={totalQuantity:0,totalAmount:0}),J[it].totalQuantity=iC(J[it].totalQuantity+(De.quantity||0)),J[it].totalAmount=bu(J[it].totalAmount+(De.amount||0))});const je=Object.entries(J).map(([De,it])=>({productName:De,totalQuantity:it.totalQuantity,totalAmount:it.totalAmount})),z=async()=>{try{const De=Z.filter(ve=>ve.status==="FLOTANTE"),it=De.length>0?De:r.filter(ve=>ve.status!=="PROCESADA");if(it.length===0){f("No hay ventas para procesar.");return}const dt={totalCharged:bu(it.reduce((ve,le)=>ve+(le.amount||0),0)),totalSuggested:bu(it.reduce((ve,le)=>ve+(le.amountSuggested||0),0)),totalUnits:iC(it.reduce((ve,le)=>ve+(le.quantity||0),0)),totalCOGS:bu(it.reduce((ve,le)=>ve+Number(le.cogsAmount??0),0))},ce=bu(dt.totalCharged-dt.totalSuggested),oe=bu(dt.totalCharged-dt.totalCOGS),Me=await xn(ht(ke,"daily_closures"),{date:k,createdAt:fr.now(),periodStart:P,periodEnd:F,totalCharged:dt.totalCharged,totalSuggested:dt.totalSuggested,totalDifference:ce,totalUnits:dt.totalUnits,totalCOGS:dt.totalCOGS,grossProfit:oe,products:it.map(ve=>({productName:ve.productName,quantity:ve.quantity,amount:ve.amount})),salesV2:it.map(ve=>({id:ve.id,productName:ve.productName,quantity:ve.quantity,amount:ve.amount,amountSuggested:ve.amountSuggested,userEmail:ve.userEmail,clientName:ve.clientName,amountReceived:ve.amountReceived,change:ve.change,status:ve.status,cogsAmount:ve.cogsAmount??0,avgUnitCost:ve.avgUnitCost??null,allocations:ve.allocations??[],date:ve.date})),productSummary:Object.entries(it.reduce((ve,le)=>{const Ue=le.productName||"(sin nombre)";return ve[Ue]||(ve[Ue]={totalQuantity:0,totalAmount:0}),ve[Ue].totalQuantity=iC(ve[Ue].totalQuantity+(le.quantity||0)),ve[Ue].totalAmount=bu(ve[Ue].totalAmount+(le.amount||0)),ve},{})).map(([ve,le])=>({productName:ve,totalQuantity:le.totalQuantity,totalAmount:le.totalAmount}))}),Le=tg(ke);it.forEach(ve=>{Le.update(qt(ke,"salesV2",ve.id.split("#")[0]),{status:"PROCESADA",closureId:Me.id,closureDate:k})}),await Le.commit(),f(` Cierre guardado. Ventas procesadas: ${it.length}.`)}catch(De){console.error(De),f(" Error al guardar el cierre.")}},Ae=async De=>{if(!D){f(" No tienes permisos para revertir esta venta.");return}if(window.confirm("Revertir esta venta? Esta accin no se puede deshacer."))try{await nn(qt(ke,"salesV2",De.split("#")[0]),{status:"FLOTANTE",closureId:null,closureDate:null}),f(" Venta revertida a FLOTANTE.")}catch(it){console.error(it),f(" No se pudo revertir la venta.")}},ye=De=>{if(!D){f(" No tienes permisos para editar esta venta.");return}p(De),x(De.quantity),b(De.amount),j(De.clientName),_(De.amountReceived),S(De.change)},Qe=async()=>{if(!D){f(" No tienes permisos para guardar cambios.");return}if(m)try{await nn(qt(ke,"salesV2",m.id.split("#")[0]),{quantity:g,amount:y,amountCharged:y,clientName:w,amountReceived:I,change:E}),p(null),f(" Venta actualizada.")}catch(De){console.error(De),f(" No se pudo actualizar la venta.")}},st=async De=>{if(!D){f(" No tienes permisos para eliminar esta venta.");return}if(window.confirm("Eliminar esta venta? Se restaurar el stock en los lotes asignados."))try{const{restored:it}=await ote(De.split("#")[0]);f(` Venta eliminada. Stock restaurado: ${Number(it).toFixed(2)}.`)}catch(it){console.error(it),f(" No se pudo eliminar la venta.")}},ut=async()=>{if(H.current){H.current.classList.add("force-pdf-colors"),H.current.classList.add("pdf-print-mode");try{const it=(await rg(H.current,{backgroundColor:"#ffffff"})).toDataURL("image/png"),dt=new Or;dt.addImage(it,"PNG",10,10,190,0),dt.save(`cierre_${k}.pdf`)}finally{H.current.classList.remove("pdf-print-mode"),H.current.classList.remove("force-pdf-colors")}}};return o.jsxs("div",{className:"max-w-7xl mx-auto bg-white p-6 rounded-2xl shadow-2xl",children:[o.jsx("style",{children:`
        .pdf-print-mode .pdf-desktop { display: block !important; }
        .pdf-print-mode .pdf-mobile  { display: none !important; }
      `}),o.jsxs("div",{className:"flex items-start justify-between gap-3 mb-4",children:[o.jsxs("h2",{className:"text-2xl font-bold",children:["Cierre de Ventas - ",P,"  ",F]}),o.jsx("div",{className:"flex items-center gap-2",children:o.jsx(gc,{onClick:M})})]}),o.jsxs("div",{className:"mb-4",children:[o.jsx(L,{title:"Filtros",open:he,onToggle:()=>ue(De=>!De),right:o.jsxs("span",{className:"ml-1",children:[P,"  ",F,h!=="ALL"?`  ${h}`:"",Ie.trim()?`  "${Ie.trim()}"`:""]})}),he&&o.jsx("div",{className:"mt-3 border rounded-xl p-3 bg-white",children:o.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-4 gap-3",children:[o.jsxs("div",{className:"flex flex-col gap-1",children:[o.jsx("label",{className:"text-xs text-gray-600",children:"Periodo desde"}),o.jsx("input",{type:"date",className:"border rounded px-2 py-2 w-full",value:P,onChange:De=>T(De.target.value)})]}),o.jsxs("div",{className:"flex flex-col gap-1",children:[o.jsx("label",{className:"text-xs text-gray-600",children:"Hasta"}),o.jsx("input",{type:"date",className:"border rounded px-2 py-2 w-full",value:F,onChange:De=>Y(De.target.value)})]}),o.jsxs("div",{className:"flex flex-col gap-1",children:[o.jsx("label",{className:"text-xs text-gray-600",children:"Estado"}),o.jsxs("select",{className:"border rounded px-2 py-2 w-full",value:h,onChange:De=>A(De.target.value),children:[o.jsx("option",{value:"ALL",children:"Todas"}),o.jsx("option",{value:"FLOTANTE",children:"Venta Flotante"}),o.jsx("option",{value:"PROCESADA",children:"Venta Procesada"})]})]}),o.jsxs("div",{className:"flex flex-col gap-1",children:[o.jsx("label",{className:"text-xs text-gray-600",children:"Producto"}),o.jsx("input",{type:"text",className:"border rounded px-2 py-2 w-full",placeholder:"Buscar por producto...",value:Ie,onChange:De=>O(De.target.value)})]})]})})]}),c?o.jsx("p",{children:"Cargando ventas..."}):o.jsxs("div",{ref:H,children:[o.jsx("div",{className:"pdf-desktop hidden md:block",children:o.jsxs("table",{className:"min-w-full border text-sm mb-4 shadow-2xl",children:[o.jsx("thead",{className:"bg-gray-100",children:o.jsxs("tr",{children:[o.jsx("th",{className:"border p-2",children:"Estado"}),o.jsx("th",{className:"border p-2",children:"Producto"}),o.jsx("th",{className:"border p-2",children:"Libras - Unidad"}),o.jsx("th",{className:"border p-2",children:"Monto"}),o.jsx("th",{className:"border p-2",children:"Fecha venta"}),o.jsx("th",{className:"border p-2",children:"Vendedor"}),o.jsx("th",{className:"border p-2",children:"Acciones"})]})}),o.jsxs("tbody",{children:[Z.map(De=>o.jsxs("tr",{className:"text-center",children:[o.jsx("td",{className:"border p-1",children:o.jsx("span",{className:`px-2 py-0.5 rounded text-xs ${De.status==="PROCESADA"?"bg-green-100 text-green-700":"bg-yellow-100 text-yellow-700"}`,children:De.status})}),o.jsx("td",{className:"border p-1",children:De.productName}),o.jsx("td",{className:"border p-1",children:oC(De.quantity)}),o.jsxs("td",{className:"border p-1",children:["C$",vm(De.amount)]}),o.jsx("td",{className:"border p-1",children:De.date}),o.jsx("td",{className:"border p-1",children:De.userEmail}),o.jsx("td",{className:"border p-1",children:De.status==="FLOTANTE"?o.jsx("div",{className:"flex gap-2 justify-center",children:D?o.jsxs(o.Fragment,{children:[o.jsx("button",{onClick:()=>ye(De),className:"text-xs bg-indigo-600 text-white px-2 py-1 rounded hover:bg-indigo-700",children:"Editar"}),o.jsx("button",{onClick:()=>st(De.id),className:"text-xs bg-red-600 text-white px-2 py-1 rounded hover:bg-red-700",children:"Eliminar"})]}):o.jsx("span",{className:"text-gray-400 text-xs",children:""})}):De.status==="PROCESADA"?o.jsx("div",{className:"flex gap-2 justify-center",children:D?o.jsx("button",{onClick:()=>Ae(De.id),className:"text-xs bg-red-600 text-white px-2 py-1 rounded hover:bg-red-700",children:"Revertir"}):o.jsx("span",{className:"text-gray-400 text-xs",children:""})}):o.jsx("span",{className:"text-gray-400 text-xs",children:"No options"})})]},De.id)),Z.length===0&&o.jsx("tr",{children:o.jsx("td",{colSpan:7,className:"p-3 text-center text-gray-500",children:"Sin ventas para mostrar."})})]})]})}),o.jsxs("div",{className:"pdf-mobile md:hidden mb-4",children:[o.jsx(L,{title:"Ventas",open:fe,onToggle:()=>me(De=>!De),right:o.jsxs("span",{className:"ml-1",children:[Z.length,"  C$",vm(ge)]})}),fe&&o.jsxs("div",{className:"mt-3 space-y-3",children:[Z.map(De=>o.jsxs("details",{className:"border rounded-xl bg-white shadow-sm",children:[o.jsxs("summary",{className:"px-4 py-3 flex justify-between items-center cursor-pointer",children:[o.jsxs("div",{className:"min-w-0",children:[o.jsx("div",{className:"font-semibold truncate",children:De.productName}),o.jsx("div",{className:"text-xs text-gray-500",children:De.date})]}),o.jsxs("div",{className:"text-right shrink-0 ml-3",children:[o.jsxs("div",{className:"font-bold",children:["C$",vm(De.amount)]}),o.jsx("span",{className:`text-xs px-2 py-0.5 rounded ${De.status==="PROCESADA"?"bg-green-100 text-green-700":"bg-yellow-100 text-yellow-700"}`,children:De.status})]})]}),o.jsxs("div",{className:"px-4 pb-4 pt-2 text-sm space-y-2",children:[o.jsxs("div",{className:"flex justify-between gap-3",children:[o.jsx("span",{className:"text-gray-600",children:"Cantidad"}),o.jsx("strong",{children:oC(De.quantity)})]}),o.jsxs("div",{className:"flex justify-between gap-3",children:[o.jsx("span",{className:"text-gray-600",children:"Vendedor"}),o.jsx("strong",{className:"text-right break-all",children:De.userEmail})]}),o.jsxs("div",{className:"flex justify-between gap-3",children:[o.jsx("span",{className:"text-gray-600",children:"Cliente"}),o.jsx("strong",{className:"text-right break-all",children:De.clientName||""})]}),o.jsx("div",{className:"pt-2",children:De.status==="FLOTANTE"?o.jsx("div",{className:"flex gap-2",children:D?o.jsxs(o.Fragment,{children:[o.jsx("button",{onClick:()=>ye(De),className:"flex-1 text-xs bg-indigo-600 text-white py-2 rounded hover:bg-indigo-700",children:"Editar"}),o.jsx("button",{onClick:()=>st(De.id),className:"flex-1 text-xs bg-red-600 text-white py-2 rounded hover:bg-red-700",children:"Eliminar"})]}):o.jsx("div",{className:"text-gray-400 text-xs w-full text-center",children:""})}):De.status==="PROCESADA"?o.jsx("div",{className:"flex gap-2",children:D?o.jsx("button",{onClick:()=>Ae(De.id),className:"w-full text-xs bg-red-600 text-white py-2 rounded hover:bg-red-700",children:"Revertir"}):o.jsx("div",{className:"text-gray-400 text-xs w-full text-center",children:""})}):o.jsx("div",{className:"text-gray-400 text-xs w-full text-center",children:"No options"})})]})]},De.id)),Z.length===0&&o.jsx("div",{className:"text-center text-gray-500 text-sm py-6",children:"Sin ventas para mostrar."})]})]}),o.jsxs("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-2 text-sm mb-2",children:[o.jsxs("div",{children:["Total Libras/Unidades: ",o.jsx("strong",{children:oC(U)})]}),o.jsxs("div",{children:["Total cobrado: ",o.jsxs("strong",{children:["C$",vm(ge)]})]})]}),(Ge>0||ie!==ge)&&o.jsxs("div",{className:"grid grid-cols-2 md:grid-cols-3 gap-2 text-sm mb-6",children:[o.jsxs("div",{children:["Calculo a Precio compra:"," ",o.jsxs("strong",{children:["C$",vm(Ge)]})]}),o.jsxs("div",{children:["Ganancia antes de gasto:"," ",o.jsxs("strong",{children:["C$",vm(ie)]})]})]}),o.jsxs("div",{className:"mt-4",children:[o.jsx(L,{title:"Consolidado por producto",open:ne,onToggle:()=>Pe(De=>!De),right:o.jsx("span",{className:"ml-1",children:je.length})}),ne&&o.jsx("div",{className:"mt-3",children:o.jsxs("table",{className:"min-w-full border text-sm mb-2 shadow-2xl",children:[o.jsx("thead",{className:"bg-gray-100",children:o.jsxs("tr",{children:[o.jsx("th",{className:"border p-2",children:"Producto"}),o.jsx("th",{className:"border p-2",children:"Total libras/unidades"}),o.jsx("th",{className:"border p-2",children:"Total dinero"})]})}),o.jsxs("tbody",{children:[je.map(De=>o.jsxs("tr",{className:"text-center",children:[o.jsx("td",{className:"border p-1",children:De.productName}),o.jsx("td",{className:"border p-1",children:oC(De.totalQuantity)}),o.jsxs("td",{className:"border p-1",children:["C$",vm(De.totalAmount)]})]},De.productName)),je.length===0&&o.jsx("tr",{children:o.jsx("td",{colSpan:3,className:"p-3 text-center text-gray-500",children:"Sin datos para consolidar."})})]})]})})]})]}),o.jsxs("div",{className:"flex flex-wrap gap-2 mt-4",children:[o.jsx("button",{disabled:!W,onClick:z,className:"bg-blue-600 text-white px-4 py-2 rounded hover:bg-blue-700",children:"Cerrar ventas del da"}),o.jsx("button",{onClick:ut,className:"bg-green-600 text-white px-4 py-2 rounded hover:bg-green-700",children:"Descargar PDF"})]}),d&&o.jsx("p",{className:"mt-2 text-sm",children:d}),m&&o.jsx("div",{className:"fixed inset-0 bg-black/30 flex items-center justify-center p-4",children:o.jsxs("div",{className:"bg-white rounded-xl shadow-xl w-full max-w-md p-4 space-y-3",children:[o.jsx("h4",{className:"font-semibold text-lg",children:"Editar venta"}),o.jsxs("div",{className:"text-sm text-gray-500",children:[m.productName,"  ",m.userEmail]}),o.jsx("label",{className:"text-sm",children:"Cantidad"}),o.jsx("input",{type:"number",step:"0.01",className:"w-full border rounded px-2 py-1",value:g,onChange:De=>x(parseFloat(De.target.value||"0"))}),o.jsx("label",{className:"text-sm",children:"Monto cobrado"}),o.jsx("input",{type:"number",step:"0.01",className:"w-full border rounded px-2 py-1",value:y,onChange:De=>b(parseFloat(De.target.value||"0"))}),o.jsx("label",{className:"text-sm",children:"Cliente"}),o.jsx("input",{type:"text",className:"w-full border rounded px-2 py-1",value:w,onChange:De=>j(De.target.value)}),o.jsx("label",{className:"text-sm",children:"Paga con"}),o.jsx("input",{type:"number",step:"0.01",className:"w-full border rounded px-2 py-1",value:I,onChange:De=>_(parseFloat(De.target.value||"0"))}),o.jsx("label",{className:"text-sm",children:"Vuelto"}),o.jsx("input",{type:"text",className:"w-full border rounded px-2 py-1",value:E,onChange:De=>S(De.target.value)}),o.jsxs("div",{className:"flex gap-2 justify-end pt-2",children:[o.jsx("button",{onClick:()=>p(null),className:"px-3 py-1 border rounded",children:"Cancelar"}),o.jsx("button",{onClick:Qe,className:"px-3 py-1 rounded text-white bg-indigo-600 hover:bg-indigo-700",children:"Guardar cambios"})]})]})})]})}const mu=t=>Number(t??0).toFixed(2),Rg=t=>Number(t??0).toFixed(3);function MSe(){var y,b,w,j;const t=async I=>{if(!window.confirm(`Eliminar el cierre del ${I.date}?`))return;const _=window.confirm("Tambin quieres reabrir (revertir a FLOTANTE) las ventas vinculadas a este cierre?");try{if(_){const E=await Ot(nr(ht(ke,"salesV2"),cr("closureId","==",I.id)));if(!E.empty){const S=tg(ke);E.forEach(k=>{S.update(qt(ke,"salesV2",k.id),{status:"FLOTANTE",closureId:null,closureDate:null})}),await S.commit()}}await Cn(qt(ke,"daily_closures",I.id)),(u==null?void 0:u.id)===I.id&&d(null),await m(),h(` Cierre eliminado${_?" y ventas reabiertas.":"."}`)}catch(E){console.error(E),h(" No se pudo eliminar el cierre.")}},[e,r]=v.useState(Sr(dZ(new Date),"yyyy-MM-dd")),[n,a]=v.useState(Sr(new Date,"yyyy-MM-dd")),[s,i]=v.useState(!0),[l,c]=v.useState([]),[u,d]=v.useState(null),[f,h]=v.useState(""),A=v.useRef(null),m=async()=>{try{i(!0);const I=nr(ht(ke,"daily_closures"),cr("date",">=",e),cr("date","<=",n)),_=await Ot(I),E=[];_.forEach(S=>E.push({id:S.id,...S.data()})),E.sort((S,k)=>S.date<k.date?1:S.date>k.date?-1:0),c(E)}catch(I){console.error(I),h(" Error cargando el historial.")}finally{i(!1)}};v.useEffect(()=>{m()},[]);const p=async I=>{I.preventDefault(),m()},g=v.useMemo(()=>{if(!u)return{units:0,sug:0,chg:0,diff:0,cogs:0,profit:0};const I=Number(u.totalUnits??0),_=Number(u.totalSuggested??0),E=Number(u.totalCharged??0),S=Number(u.totalDifference??(isFinite(E-_)?E-_:0)),k=Number(u.totalCOGS??0),P=Number(u.grossProfit??(isFinite(E-k)?E-k:0));return{units:I,sug:_,chg:E,diff:S,cogs:k,profit:P}},[u]),x=async()=>{if(!A.current||!u)return;const I=A.current;I.classList.add("force-pdf-colors");try{const[{default:_},{jsPDF:E}]=await Promise.all([EA(()=>Promise.resolve().then(()=>k6),void 0),EA(()=>Promise.resolve().then(()=>qT),void 0)]),k=(await _(I,{backgroundColor:"#ffffff",onclone:F=>{const Y=F.defaultView;F.body.querySelectorAll("*").forEach(ue=>{const fe=Y.getComputedStyle(ue);fe.color&&(ue.style.color=fe.color),fe.backgroundColor&&fe.backgroundColor!=="rgba(0, 0, 0, 0)"&&(ue.style.backgroundColor=fe.backgroundColor),fe.borderColor&&(ue.style.borderColor=fe.borderColor)})}})).toDataURL("image/png"),{jsPDF:P}=await EA(async()=>{const{jsPDF:F}=await Promise.resolve().then(()=>qT);return{jsPDF:F}},void 0),T=new P;T.addImage(k,"PNG",10,10,190,0),T.save(`cierre_${u.date}.pdf`)}finally{I.classList.remove("force-pdf-colors")}};return o.jsxs("div",{className:"max-w-7xl mx-auto p-6 bg-white rounded-2xl shadow-2xl",children:[o.jsx("h1",{className:"text-2xl font-bold mb-4",children:"Histrico de cierres"}),o.jsxs("form",{onSubmit:p,className:"flex flex-wrap items-end gap-3 mb-4",children:[o.jsxs("div",{children:[o.jsx("label",{className:"block text-sm",children:"Desde"}),o.jsx("input",{type:"date",className:"border rounded px-2 py-1",value:e,onChange:I=>r(I.target.value)})]}),o.jsxs("div",{children:[o.jsx("label",{className:"block text-sm",children:"Hasta"}),o.jsx("input",{type:"date",className:"border rounded px-2 py-1",value:n,onChange:I=>a(I.target.value)})]}),o.jsx("button",{type:"submit",className:"bg-blue-600 text-white px-4 py-2 rounded hover:bg-blue-700",children:"Aplicar"})]}),s?o.jsx("p",{children:"Cargando..."}):l.length===0?o.jsx("p",{className:"text-sm text-gray-500",children:"Sin cierres en el rango seleccionado."}):o.jsxs("table",{className:"min-w-full text-sm mb-6  shadow-lg p-4 bg-white border-gray-100",children:[o.jsx("thead",{className:"bg-gray-100",children:o.jsxs("tr",{children:[o.jsx("th",{className:"border p-2",children:"Fecha"}),o.jsx("th",{className:"border p-2",children:"Total libras/unidades"}),o.jsx("th",{className:"border p-2",children:"Monto de venta"}),o.jsx("th",{className:"border p-2",children:"Monto al costo"}),o.jsx("th",{className:"border p-2",children:"Ganancia sin gastos"}),o.jsx("th",{className:"border p-2",children:"Acciones"})]})}),o.jsx("tbody",{children:l.map(I=>o.jsxs("tr",{className:"text-center",children:[o.jsx("td",{className:"border p-1",children:I.date}),o.jsx("td",{className:"border p-1",children:Rg(I.totalUnits)}),o.jsxs("td",{className:"border p-1",children:["C$",mu(I.totalCharged)]}),o.jsxs("td",{className:"border p-1",children:["C$",mu(I.totalCOGS)]}),o.jsxs("td",{className:"border p-1",children:["C$",mu(I.grossProfit??Number(I.totalCharged??0)-Number(I.totalCOGS??0))]}),o.jsx("td",{className:"border p-1",children:o.jsxs("div",{className:"flex items-center gap-2 justify-center",children:[o.jsx("button",{className:"text-xs bg-gray-800 text-white px-2 py-1 rounded hover:bg-black",onClick:()=>d(I),children:"Ver detalle"}),o.jsx("button",{className:"text-xs bg-red-600 text-white px-2 py-1 rounded hover:bg-red-700",onClick:()=>t(I),children:"Eliminar"})]})})]},I.id))})]}),u&&o.jsxs("div",{className:"mt-6 rounded-2xl shadow-lg p-4 bg-white border-solid border-2 border-gray-100",children:[o.jsxs("div",{className:"flex items-center gap-3 mb-2 ",children:[o.jsxs("h2",{className:"text-xl font-semibold",children:["Detalle ",u.date]}),o.jsx("button",{onClick:()=>d(null),className:"text-sm px-2 py-1 border rounded",children:"Cerrar"}),o.jsx("button",{onClick:x,className:"ml-auto bg-green-600 text-white px-3 py-1 rounded-2xl hover:bg-green-700 text-sm",children:"Descargar PDF"})]}),o.jsxs("div",{ref:A,className:"space-y-4",children:[o.jsx("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-2 text-sm",children:o.jsxs("div",{children:["Total Libras/Unidades: ",o.jsx("strong",{children:Rg(g.units)})]})}),o.jsxs("div",{className:"grid grid-cols-2 md:grid-cols-3 gap-2 text-sm",children:[o.jsxs("div",{children:["Monto al costo:"," ",o.jsxs("strong",{children:["C$",mu(g.cogs)]})]}),o.jsxs("div",{children:["Ganancia sin gastos:"," ",o.jsxs("strong",{children:["C$",mu(g.profit)]})]})]}),(y=u.salesV2)!=null&&y.length?o.jsxs(o.Fragment,{children:[o.jsx("h3",{className:"font-semibold",children:"Ventas incluidas en el cierre"}),o.jsxs("table",{className:"min-w-full border text-sm",children:[o.jsx("thead",{className:"bg-gray-100",children:o.jsxs("tr",{children:[o.jsx("th",{className:"border p-2",children:"Producto"}),o.jsx("th",{className:"border p-2",children:"Cantidad"}),o.jsx("th",{className:"border p-2",children:"Monto de ventas"}),o.jsx("th",{className:"border p-2",children:"Monto al costo"}),o.jsx("th",{className:"border p-2",children:"Fecha venta"}),o.jsx("th",{className:"border p-2",children:"Vendedor"})]})}),o.jsx("tbody",{children:u.salesV2.map((I,_)=>o.jsxs("tr",{className:"text-center",children:[o.jsx("td",{className:"border p-1",children:I.productName??"(sin nombre)"}),o.jsx("td",{className:"border p-1",children:Rg(I.quantity)}),o.jsxs("td",{className:"border p-1",children:["C$",mu(I.amount)]}),o.jsxs("td",{className:"border p-1",children:["C$",mu(I.cogsAmount)]}),o.jsx("td",{className:"border p-1",children:I.date??""}),o.jsx("td",{className:"border p-1",children:I.userEmail??""})]},_))})]})]}):(b=u.sales)!=null&&b.length?o.jsxs(o.Fragment,{children:[o.jsx("h3",{className:"font-semibold",children:"Ventas incluidas en el cierre"}),o.jsxs("table",{className:"min-w-full border text-sm",children:[o.jsx("thead",{className:"bg-gray-100",children:o.jsxs("tr",{children:[o.jsx("th",{className:"border p-2",children:"Producto"}),o.jsx("th",{className:"border p-2",children:"Cantidad"}),o.jsx("th",{className:"border p-2",children:"Monto"}),o.jsx("th",{className:"border p-2",children:"Vendedor"}),o.jsx("th",{className:"border p-2",children:"Cliente"}),o.jsx("th",{className:"border p-2",children:"Paga con"}),o.jsx("th",{className:"border p-2",children:"Vuelto"})]})}),o.jsx("tbody",{children:u.sales.map((I,_)=>o.jsxs("tr",{className:"text-center",children:[o.jsx("td",{className:"border p-1",children:I.productName??"(sin nombre)"}),o.jsx("td",{className:"border p-1",children:Rg(I.quantity)}),o.jsxs("td",{className:"border p-1",children:["C$",mu(I.amount)]}),o.jsx("td",{className:"border p-1",children:I.userEmail??""}),o.jsx("td",{className:"border p-1",children:I.clientName??""}),o.jsxs("td",{className:"border p-1",children:["C$",mu(I.amountReceived)]}),o.jsx("td",{className:"border p-1",children:typeof I.change=="number"?mu(I.change):I.change??"0"})]},_))})]})]}):(w=u.products)!=null&&w.length?o.jsxs(o.Fragment,{children:[o.jsx("h3",{className:"font-semibold",children:"Productos en el cierre"}),o.jsxs("table",{className:"min-w-full border text-sm",children:[o.jsx("thead",{className:"bg-gray-100",children:o.jsxs("tr",{children:[o.jsx("th",{className:"border p-2",children:"Producto"}),o.jsx("th",{className:"border p-2",children:"Cantidad"}),o.jsx("th",{className:"border p-2",children:"Monto"})]})}),o.jsx("tbody",{children:u.products.map((I,_)=>o.jsxs("tr",{className:"text-center",children:[o.jsx("td",{className:"border p-1",children:I.productName}),o.jsx("td",{className:"border p-1",children:Rg(I.quantity)}),o.jsxs("td",{className:"border p-1",children:["C$",mu(I.amount)]})]},_))})]})]}):o.jsx("p",{className:"text-sm text-gray-500",children:"Sin detalle de ventas en este cierre."}),(j=u.productSummary)!=null&&j.length?o.jsxs(o.Fragment,{children:[o.jsx("h3",{className:"font-semibold",children:"Consolidado por producto"}),o.jsxs("table",{className:"min-w-full border text-sm",children:[o.jsx("thead",{className:"bg-gray-100",children:o.jsxs("tr",{children:[o.jsx("th",{className:"border p-2",children:"Producto"}),o.jsx("th",{className:"border p-2",children:"Total libras/unidades"}),o.jsx("th",{className:"border p-2",children:"Total dinero"})]})}),o.jsx("tbody",{children:u.productSummary.map((I,_)=>o.jsxs("tr",{className:"text-center",children:[o.jsx("td",{className:"border p-1",children:I.productName}),o.jsx("td",{className:"border p-1",children:Rg(I.totalQuantity)}),o.jsxs("td",{className:"border p-1",children:["C$",mu(I.totalAmount)]})]},_))})]})]}):null]})]}),f&&o.jsx("p",{className:"mt-3 text-sm",children:f})]})}function LSe(){const[t,e]=v.useState(""),[r,n]=v.useState(""),[a,s]=v.useState(""),[i,l]=v.useState(!1),[c,u]=v.useState(["vendedor_pollo"]),[d,f]=v.useState(""),[h,A]=v.useState(""),[m,p]=v.useState([]),[g,x]=v.useState(!0),[y,b]=v.useState(null),[w,j]=v.useState(["vendedor_pollo"]),[I,_]=v.useState(""),[E,S]=v.useState(""),[k,P]=v.useState(!1),[T,F]=v.useState([]),Y=M=>!M||M==="vendedor"?"vendedor_pollo":M==="admin"||M==="supervisor_pollo"||M==="contador"||M==="vendedor_pollo"||M==="vendedor_ropa"||M==="vendedor_dulces"?M:"vendedor_pollo",he=M=>M?Array.isArray(M)?M.map(K=>Y(String(K))):[Y(String(M))]:["vendedor_pollo"],ue=async()=>{x(!0);const M=await Ot(ht(ke,"users")),K=[];M.forEach(W=>{const D=W.data();K.push({id:W.id,email:D.email??"",name:D.name??"",roles:he(D.roles??D.role),sellerCandyId:D.sellerCandyId??""})}),p(K),x(!1)},fe=async()=>{try{const M=await Ot(ht(ke,"sellers_candies")),K=[];M.forEach(W=>{const D=W.data();K.push({id:W.id,name:D.name??"(sin nombre)",branchLabel:D.branch??"",commissionPercent:Number(D.commissionPercent??0)})}),F(K)}catch(M){console.error("Error cargando sellers_candies:",M)}};v.useEffect(()=>{ue(),fe()},[]);const me=()=>{e(""),n(""),s(""),u(["vendedor_pollo"]),A("")},ne=async M=>{if(M.preventDefault(),f(""),y){if(a&&a.length>0&&a.length<6){f(" La contrasea debe tener al menos 6 caracteres.");return}}else if(a.length<6){f(" La contrasea debe tener al menos 6 caracteres.");return}if(!t.trim()){f(" El nombre es obligatorio.");return}try{if(y){const U=qt(ke,"users",y),Ge=w.length?w:["vendedor_pollo"],ie=Ge.includes("vendedor_dulces")&&(I||h)||"";if(await nn(U,{email:r,name:t.trim(),roles:Ge,role:Ge[0]||"vendedor_pollo",sellerCandyId:ie}),p(J=>J.map(je=>je.id===y?{...je,email:r,name:t.trim(),roles:Ge,sellerCandyId:ie}:je)),a&&a.length>=6)try{const J=GP(),je=E||r;await gme(J,je),f(` Usuario actualizado. Se envi correo de restablecimiento a ${je}`)}catch(J){console.error("Error sending password reset:",J),f(" Usuario actualizado. No se pudo enviar correo de restablecimiento.")}else f(" Usuario actualizado correctamente.");Ie();return}const K=CO(),W=NO(K.options,"Secondary"),D=GP(W),L=await xme(D,r,a),Z=c.length?c:["vendedor_pollo"],ge=Z.includes("vendedor_dulces")&&h||"";await tZ(qt(ht(ke,"users"),L.user.uid),{email:r,name:t.trim(),roles:Z,role:Z[0]||"vendedor_pollo",sellerCandyId:ge}),await kO(D),await u0e(W),p(U=>[{id:L.user.uid,email:r,name:t.trim(),roles:Z,sellerCandyId:ge},...U]),f(" Usuario creado correctamente."),me(),P(!1)}catch(K){console.error(K),f(" Error al crear el usuario: "+K.message)}},Pe=M=>{b(M.id),e(M.name||""),n(M.email||""),S(M.email||""),j(M.roles&&M.roles.length?M.roles:["vendedor_pollo"]),A(M.sellerCandyId||""),_(M.sellerCandyId||""),s(""),P(!0)},Ie=()=>{b(null),j(["vendedor_pollo"]),_(""),S(""),me(),P(!1)},O=async M=>{confirm("Eliminar este usuario del listado?")&&(await Cn(qt(ke,"users",M)),p(W=>W.filter(D=>D.id!==M)))},H=M=>{const K=M==="admin"?"admin":M==="supervisor_pollo"?"supervisor_pollo":M==="vendedor_ropa"?"vendedor_ropa":M==="vendedor_dulces"?"vendedor_dulces":"vendedor_pollo",W=K==="admin"?"bg-blue-100 text-blue-700":K==="supervisor_pollo"?"bg-amber-100 text-amber-700":K==="vendedor_ropa"?"bg-indigo-100 text-indigo-700":K==="vendedor_dulces"?"bg-pink-100 text-pink-700":"bg-green-100 text-green-700";return o.jsx("span",{className:`px-2 py-0.5 rounded text-xs ${W}`,children:K})},R=M=>`${M.name}  ${M.branchLabel||"Sin sucursal"}  ${M.commissionPercent.toFixed(2)}%`;return o.jsxs("div",{className:"max-w-6xl mx-auto",children:[o.jsxs("div",{className:"flex items-center justify-between mb-3",children:[o.jsx("h2",{className:"text-2xl font-bold",children:"Usuarios"}),o.jsx("button",{className:"px-3 py-2 rounded bg-purple-600 text-white hover:bg-purple-700",onClick:()=>P(!0),type:"button",children:"Crear usuario"})]}),o.jsx("div",{className:"bg-white p-2 rounded shadow border overflow-x-auto",children:o.jsxs("table",{className:"min-w-full text-sm",children:[o.jsx("thead",{className:"bg-gray-100",children:o.jsxs("tr",{children:[o.jsx("th",{className:"p-2 border",children:"Nombre"}),o.jsx("th",{className:"p-2 border",children:"Email"}),o.jsx("th",{className:"p-2 border",children:"Rol"}),o.jsx("th",{className:"p-2 border",children:"Acciones"})]})}),o.jsx("tbody",{children:g?o.jsx("tr",{children:o.jsx("td",{colSpan:4,className:"p-4 text-center",children:"Cargando"})}):m.length===0?o.jsx("tr",{children:o.jsx("td",{colSpan:4,className:"p-4 text-center",children:"Sin usuarios"})}):m.map(M=>{const K=y===M.id,W=(K?w:M.roles).includes("vendedor_dulces");return o.jsxs("tr",{className:"text-center",children:[o.jsx("td",{className:"p-2 border",children:M.name||""}),o.jsx("td",{className:"p-2 border",children:M.email}),o.jsx("td",{className:"p-2 border",children:K?o.jsxs("div",{className:"space-y-2 text-left",children:[["supervisor_pollo","admin","vendedor_pollo","vendedor_ropa","vendedor_dulces"].map(D=>o.jsxs("label",{className:"inline-flex items-center mr-3",children:[o.jsx("input",{type:"checkbox",className:"mr-2",checked:w.includes(D),onChange:()=>j(L=>L.includes(D)?L.filter(Z=>Z!==D):[...L,D])}),o.jsx("span",{className:"text-sm",children:D})]},D)),w.includes("vendedor_dulces")&&o.jsxs("select",{className:"w-full border p-1 rounded text-xs mt-1",value:I,onChange:D=>_(D.target.value),children:[o.jsx("option",{value:"",children:"Selecciona vendedor de dulces"}),T.map(D=>o.jsx("option",{value:D.id,children:R(D)},D.id))]})]}):o.jsxs(o.Fragment,{children:[o.jsx("div",{className:"flex gap-2 justify-center",children:M.roles.map(D=>o.jsx("span",{children:H(D)},D))}),W&&M.sellerCandyId&&o.jsx("div",{className:"mt-1 text-[11px] text-gray-500",children:"Vendedor asignado"})]})}),o.jsx("td",{className:"p-2 border space-x-2",children:o.jsxs(o.Fragment,{children:[o.jsx("button",{className:"px-2 py-1 rounded text-white bg-yellow-600 hover:bg-yellow-700",onClick:()=>Pe(M),children:"Editar"}),o.jsx("button",{className:"px-2 py-1 rounded text-white bg-red-600 hover:bg-red-700",onClick:()=>O(M.id),children:"Eliminar"})]})})]},M.id)})})]})}),d&&o.jsx("p",{className:"text-sm mt-2",children:d}),k&&o.jsxs("div",{className:"fixed inset-0 z-[70] flex items-center justify-center",children:[o.jsx("div",{className:"absolute inset-0 bg-black/40",onClick:()=>P(!1)}),o.jsxs("div",{className:"relative bg-white rounded-lg shadow-2xl border w-[96%] max-w-lg max-h-[92vh] overflow-auto p-4",children:[o.jsxs("div",{className:"flex items-center justify-between mb-2",children:[o.jsx("h3",{className:"text-lg font-bold",children:y?"Editar usuario":"Registrar nuevo usuario"}),o.jsx("button",{className:"px-3 py-1 rounded bg-gray-200 hover:bg-gray-300",onClick:Ie,type:"button",children:"Cerrar"})]}),o.jsxs("form",{onSubmit:ne,className:"space-y-4",children:[o.jsxs("div",{className:"space-y-1",children:[o.jsx("label",{className:"block text-sm font-semibold text-gray-700",children:"Nombre completo"}),o.jsx("input",{type:"text",className:"w-full border border-gray-300 p-2 rounded focus:ring-2 focus:ring-purple-400",value:t,onChange:M=>e(M.target.value),required:!0})]}),o.jsxs("div",{className:"space-y-1",children:[o.jsx("label",{className:"block text-sm font-semibold text-gray-700",children:"Correo electrnico"}),o.jsx("input",{type:"email",className:"w-full border border-gray-300 p-2 rounded focus:ring-2 focus:ring-purple-400",value:r,onChange:M=>n(M.target.value),required:!0})]}),o.jsxs("div",{className:"space-y-1 relative",children:[o.jsx("label",{className:"block text-sm font-semibold text-gray-700",children:"Contrasea (mnimo 6 caracteres)"}),o.jsx("input",{type:i?"text":"password",minLength:6,className:"w-full border border-gray-300 p-2 rounded focus:ring-2 focus:ring-purple-400 pr-10",value:a,onChange:M=>s(M.target.value),required:!y}),o.jsx("button",{type:"button",className:"absolute right-2 top-8 text-sm text-gray-600 hover:text-gray-800",onClick:()=>l(M=>!M),children:i?"":""})]}),o.jsxs("div",{className:"space-y-1",children:[o.jsx("label",{className:"block text-sm font-semibold text-gray-700",children:"Roles"}),o.jsx("div",{className:"flex flex-wrap gap-2",children:["supervisor_pollo","contador","admin","vendedor_pollo","vendedor_ropa","vendedor_dulces"].map(M=>o.jsxs("label",{className:"inline-flex items-center mr-3",children:[o.jsx("input",{type:"checkbox",className:"mr-2",checked:y?w.includes(M):c.includes(M),onChange:()=>{y?j(K=>K.includes(M)?K.filter(W=>W!==M):[...K,M]):u(K=>K.includes(M)?K.filter(W=>W!==M):[...K,M])}}),o.jsx("span",{className:"text-sm",children:M})]},M))})]}),(y?w.includes("vendedor_dulces"):c.includes("vendedor_dulces"))&&o.jsxs("div",{className:"space-y-1",children:[o.jsx("label",{className:"block text-sm font-semibold text-gray-700",children:"Vendedor (dulces)"}),o.jsxs("select",{className:"w-full border p-2 rounded text-sm",value:h,onChange:M=>A(M.target.value),children:[o.jsx("option",{value:"",children:"Selecciona vendedor de dulces asignado"}),T.map(M=>o.jsx("option",{value:M.id,children:R(M)},M.id))]})]}),o.jsxs("div",{className:"flex justify-end gap-2 pt-2",children:[o.jsx("button",{type:"button",className:"px-4 py-2 rounded bg-gray-200 hover:bg-gray-300",onClick:Ie,children:"Cancelar"}),o.jsx("button",{className:"bg-green-600 text-white px-4 py-2 rounded hover:bg-green-700",children:y?"Guardar cambios":"Crear usuario"})]})]}),d&&o.jsx("p",{className:"text-sm mt-2",children:d})]})]})]})}const VQ=t=>`C$${(Number(t)||0).toFixed(2)}`;function USe(){const[t,e]=v.useState(""),[r,n]=v.useState(0),[a,s]=v.useState(0),[i,l]=v.useState(""),[c,u]=v.useState(""),[d,f]=v.useState(""),[h,A]=v.useState([]),[m,p]=v.useState(!0),[g,x]=v.useState(!1),[y,b]=v.useState(null),[w,j]=v.useState(""),[I,_]=v.useState(""),[E,S]=v.useState(""),[k,P]=v.useState(0),[T,F]=v.useState(0),[Y,he]=v.useState(!1),ue=async()=>{p(!0);const R=await Ot(ht(ke,"products")),M=[];R.forEach(K=>{const W=K.data();M.push({id:K.id,name:W.name??"",price:Number(W.price??0),providerPrice:Number(W.providerPrice??0),category:W.category??"",measurement:W.measurement??"",active:W.active!==!1})}),A(M),p(!1)};v.useEffect(()=>{ue()},[]);const fe=async R=>{if(R.preventDefault(),l(""),!t||r<=0||!d){l(" Completa nombre, precio vlido y unidad de medida");return}try{const M={name:t,price:parseFloat(r.toFixed(2)),providerPrice:parseFloat((a||0).toFixed(2)),category:c,measurement:d,active:!0},K=await xn(ht(ke,"products"),M);A(W=>[{id:K.id,...M},...W]),l(" Producto registrado con exito."),e(""),n(0),s(0),f(""),u(""),he(!1)}catch(M){l(" Error: "+M.message)}},me=R=>{b(R.id),j(R.name),_(R.category),S(R.measurement),P(R.price),F(R.providerPrice||0)},ne=()=>{b(null),j(""),_(""),S(""),P(0)},Pe=async()=>{if(!y)return;const R=qt(ke,"products",y);await nn(R,{name:w,category:I,measurement:E,price:parseFloat((k||0).toFixed(2)),providerPrice:parseFloat((T||0).toFixed(2))}),A(M=>M.map(K=>K.id===y?{...K,name:w,category:I,measurement:E,price:parseFloat((k||0).toFixed(2)),providerPrice:parseFloat((T||0).toFixed(2))}:K)),ne()},Ie=async R=>{const M=qt(ke,"products",R.id),K=R.active===!1;await nn(M,{active:K}),A(W=>W.map(D=>D.id===R.id?{...D,active:K}:D))},O=async R=>{const M=nr(ht(ke,"inventory_batches"),cr("productId","==",R),ZJ(1));if(!(await Ot(M)).empty){alert(`No se puede eliminar: hay lotes asociados a este producto.
Sugerencia: desactvalo para ocultarlo.`);return}confirm("Eliminar este producto definitivamente?")&&(await Cn(qt(ke,"products",R)),A(D=>D.filter(L=>L.id!==R)))},H=g?h:h.filter(R=>R.active!==!1);return o.jsxs("div",{className:"max-w-6xl mx-auto",children:[o.jsxs("div",{className:"flex items-center justify-between mb-4",children:[o.jsx("h2",{className:"text-2xl font-bold",children:"Productos"}),o.jsxs("button",{className:"inline-flex items-center gap-2 bg-green-600 text-white px-3 py-2 rounded hover:bg-green-700",onClick:()=>{l(""),he(!0)},children:[o.jsx("span",{className:"inline-block bg-green-700/40 rounded-full p-1",children:o.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-4 w-4",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:o.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 4v16m8-8H4"})})}),"Nuevo producto"]})]}),Y&&o.jsxs("div",{className:"fixed inset-0 z-50 flex items-center justify-center",children:[o.jsx("div",{className:"absolute inset-0 bg-black/50",onClick:()=>he(!1)}),o.jsxs("div",{className:"relative z-10 w-[95%] max-w-lg bg-white rounded-lg shadow-2xl border p-5",children:[o.jsxs("div",{className:"flex items-center justify-between mb-3",children:[o.jsxs("h3",{className:"text-lg font-bold text-green-700 flex items-center gap-2",children:[o.jsx("span",{className:"inline-block bg-green-100 text-green-700 rounded-full p-2",children:o.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-5 w-5",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:o.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 4v16m8-8H4"})})}),"Registrar producto"]}),o.jsx("button",{className:"px-3 py-1 rounded bg-gray-200 hover:bg-gray-300",onClick:()=>he(!1),children:"Cerrar"})]}),o.jsxs("form",{onSubmit:fe,className:"space-y-4",children:[o.jsxs("div",{className:"space-y-1",children:[o.jsx("label",{className:"block text-sm font-semibold text-gray-700",children:"Categora"}),o.jsxs("select",{value:c,onChange:R=>u(R.target.value),className:"w-full border border-gray-300 p-2 rounded focus:ring-2 focus:ring-green-400",children:[o.jsx("option",{value:"",children:"Selecciona"}),o.jsx("option",{value:"pollo",children:"Pollo"}),o.jsx("option",{value:"cerdo",children:"Cerdo"}),o.jsx("option",{value:"huevo",children:"Huevos"}),o.jsx("option",{value:"ropa",children:"Ropa"}),o.jsx("option",{value:"otros",children:"Otros"})]})]}),o.jsxs("div",{className:"space-y-1",children:[o.jsx("label",{className:"block text-sm font-semibold text-gray-700",children:"Nombre del producto"}),o.jsx("input",{type:"text",className:"w-full border p-2 rounded",value:t,onChange:R=>e(R.target.value)})]}),o.jsxs("div",{className:"space-y-1",children:[o.jsx("label",{className:"block text-sm font-semibold text-gray-700",children:"Tipo de unidad de medida"}),o.jsxs("select",{value:d,onChange:R=>f(R.target.value),className:"w-full border border-gray-300 p-2 rounded focus:ring-2 focus:ring-green-400",children:[o.jsx("option",{value:"",children:"Selecciona"}),o.jsx("option",{value:"lb",children:"Libra"}),o.jsx("option",{value:"kg",children:"Kilogramo"}),o.jsx("option",{value:"unidad",children:"Unidad"})]})]}),o.jsxs("div",{children:[o.jsx("label",{className:"block text-sm",children:"Precio proveedor (ej: 40.00)"}),o.jsx("input",{type:"number",step:"0.01",className:"w-full border p-2 rounded",value:Number.isNaN(a)?"":a,onChange:R=>s(parseFloat(R.target.value))})]}),o.jsxs("div",{children:[o.jsx("label",{className:"block text-sm",children:"Precio por unidad (ej: 55.50)"}),o.jsx("input",{type:"number",step:"0.01",className:"w-full border p-2 rounded",value:Number.isNaN(r)?"":r,onChange:R=>n(parseFloat(R.target.value)),onFocus:R=>R.target.value==="0"?n(NaN):null})]}),o.jsx("button",{type:"submit",className:"bg-blue-600 text-white px-4 py-2 rounded hover:bg-blue-700 w-full",children:"Agregar producto"}),i&&o.jsx("p",{className:"text-sm mt-2",children:i})]})]})]}),o.jsxs("div",{className:"flex items-center justify-between mt-6 mb-2",children:[o.jsx("h3",{className:"text-lg font-semibold p-2",children:"Productos"}),o.jsxs("label",{className:"flex items-center gap-2 text-sm",children:[o.jsx("input",{type:"checkbox",checked:g,onChange:R=>x(R.target.checked)}),"Mostrar inactivos"]})]}),o.jsx("div",{className:"bg-white p-2 rounded shadow border overflow-x-auto",children:o.jsxs("table",{className:"min-w-full text-sm",children:[o.jsx("thead",{className:"bg-gray-100",children:o.jsxs("tr",{children:[o.jsx("th",{className:"p-2 border",children:"Nombre"}),o.jsx("th",{className:"p-2 border",children:"Categora"}),o.jsx("th",{className:"p-2 border",children:"Unidad"}),o.jsx("th",{className:"p-2 border",children:"Precio proveedor"}),o.jsx("th",{className:"p-2 border",children:"Precio"}),o.jsx("th",{className:"p-2 border",children:"Estado"}),o.jsx("th",{className:"p-2 border",children:"Acciones"})]})}),o.jsx("tbody",{children:m?o.jsx("tr",{children:o.jsx("td",{colSpan:6,className:"p-4 text-center",children:"Cargando"})}):H.length===0?o.jsx("tr",{children:o.jsx("td",{colSpan:6,className:"p-4 text-center",children:"Sin productos"})}):H.map(R=>{const M=y===R.id,K=R.active!==!1;return o.jsxs("tr",{className:"text-center",children:[o.jsx("td",{className:"p-2 border",children:M?o.jsx("input",{className:"w-full border p-1 rounded",value:w,onChange:W=>j(W.target.value)}):R.name}),o.jsx("td",{className:"p-2 border",children:M?o.jsxs("select",{className:"w-full border p-1 rounded",value:I,onChange:W=>_(W.target.value),children:[o.jsx("option",{value:"",children:"Selecciona"}),o.jsx("option",{value:"pollo",children:"Pollo"}),o.jsx("option",{value:"cerdo",children:"Cerdo"}),o.jsx("option",{value:"huevo",children:"Huevos"}),o.jsx("option",{value:"ropa",children:"Ropa"}),o.jsx("option",{value:"otros",children:"Otros"})]}):R.category}),o.jsx("td",{className:"p-2 border",children:M?o.jsxs("select",{className:"w-full border p-1 rounded",value:E,onChange:W=>S(W.target.value),children:[o.jsx("option",{value:"",children:"Selecciona"}),o.jsx("option",{value:"lb",children:"Libra"}),o.jsx("option",{value:"kg",children:"Kilogramo"}),o.jsx("option",{value:"unidad",children:"Unidad"})]}):R.measurement}),o.jsx("td",{className:"p-2 border",children:M?o.jsx("input",{type:"number",step:"0.01",className:"w-full border p-1 rounded text-right",value:Number.isNaN(T)?"":T,onChange:W=>F(parseFloat(W.target.value))}):VQ(R.providerPrice||0)}),o.jsx("td",{className:"p-2 border",children:M?o.jsx("input",{type:"number",step:"0.01",className:"w-full border p-1 rounded text-right",value:Number.isNaN(k)?"":k,onChange:W=>P(parseFloat(W.target.value))}):VQ(R.price)}),o.jsx("td",{className:"p-2 border",children:o.jsx("span",{className:`px-2 py-0.5 rounded text-xs ${K?"bg-green-100 text-green-700":"bg-gray-200 text-gray-700"}`,children:K?"Activo":"Inactivo"})}),o.jsx("td",{className:"p-2 border space-x-2",children:M?o.jsxs(o.Fragment,{children:[o.jsx("button",{className:"px-2 py-1 rounded text-white bg-blue-600 hover:bg-blue-700",onClick:Pe,children:"Guardar"}),o.jsx("button",{className:"px-2 py-1 rounded bg-gray-200 hover:bg-gray-300",onClick:ne,children:"Cancelar"})]}):o.jsxs(o.Fragment,{children:[o.jsx("button",{className:"px-2 py-1 rounded text-white bg-yellow-600 hover:bg-yellow-700",onClick:()=>me(R),children:"Editar"}),o.jsx("button",{className:`px-2 py-1 rounded ${K?"bg-gray-600 hover:bg-gray-700 text-white":"bg-green-600 hover:bg-green-700 text-white"}`,onClick:()=>Ie(R),children:K?"Desactivar":"Activar"}),o.jsx("button",{className:"px-2 py-1 rounded text-white bg-red-600 hover:bg-red-700",onClick:()=>O(R.id),children:"Eliminar"})]})})]},R.id)})})]})})]})}const Io=[];for(let t=0;t<256;++t)Io.push((t+256).toString(16).slice(1));function QSe(t,e=0){return(Io[t[e+0]]+Io[t[e+1]]+Io[t[e+2]]+Io[t[e+3]]+"-"+Io[t[e+4]]+Io[t[e+5]]+"-"+Io[t[e+6]]+Io[t[e+7]]+"-"+Io[t[e+8]]+Io[t[e+9]]+"-"+Io[t[e+10]]+Io[t[e+11]]+Io[t[e+12]]+Io[t[e+13]]+Io[t[e+14]]+Io[t[e+15]]).toLowerCase()}let k5;const VSe=new Uint8Array(16);function HSe(){if(!k5){if(typeof crypto>"u"||!crypto.getRandomValues)throw new Error("crypto.getRandomValues() not supported. See https://github.com/uuidjs/uuid#getrandomvalues-not-supported");k5=crypto.getRandomValues.bind(crypto)}return k5(VSe)}const $Se=typeof crypto<"u"&&crypto.randomUUID&&crypto.randomUUID.bind(crypto),HQ={randomUUID:$Se};function KSe(t,e,r){var a;if(HQ.randomUUID&&!t)return HQ.randomUUID();t=t||{};const n=t.random??((a=t.rng)==null?void 0:a.call(t))??HSe();if(n.length<16)throw new Error("Random bytes length must be >= 16");return n[6]=n[6]&15|64,n[8]=n[8]&63|128,QSe(n)}async function GSe(t,e,r,n=!1){if(r<=0)return{allocations:[],avgUnitCost:0,cogsAmount:0};const a=ht(t,"inventory_batches"),s=nr(a,cr("productName","==",e)),c=(await Ot(s)).docs.map(u=>({id:u.id,data:u.data()})).sort((u,d)=>{var p,g;const f=u.data.date??"",h=d.data.date??"";if(f!==h)return f<h?-1:1;const A=((p=u.data.createdAt)==null?void 0:p.seconds)??0,m=((g=d.data.createdAt)==null?void 0:g.seconds)??0;return A-m}).map(u=>qt(t,"inventory_batches",u.id));return Hi(t,async u=>{let d=Number(r);const f=[],h=await Promise.all(c.map(g=>u.get(g)));for(let g=0;g<c.length&&d>0;g++){const x=c[g],y=h[g];if(!y.exists())continue;const b=y.data(),w=Number(b.quantity??0),j=Number(b.remaining??w??0),I=Number(b.purchasePrice??0);if(j<=0)continue;const _=Math.min(j,d),E=Number((j-_).toFixed(3));u.update(x,{remaining:E}),f.push({batchId:x.id,qty:_,unitCost:I,lineCost:Number((_*I).toFixed(2))}),d=Number((d-_).toFixed(3))}if(d>0&&!n)throw new Error(`Stock insuficiente para "${e}". Faltan ${d} unidades.`);const A=Number(f.reduce((g,x)=>g+x.lineCost,0).toFixed(2)),m=f.reduce((g,x)=>g+x.qty,0),p=m>0?Number((A/m).toFixed(4)):0;return{allocations:f,avgUnitCost:p,cogsAmount:A}})}const ute=3,qSe=.5*10**-ute;function Ya(t){const e=Number(t??0);return Number(e.toFixed(ute))}function F5(t,e){return Ya((t??0)+(e??0))}function lC(t,e){return Ya(t)+qSe>=Ya(e)}async function zSe(t,e){const r=await Ot(ht(ke,"inventory_batches")),n=t.trim().toLowerCase();let a=0;for(const s of r.docs){const i=s.data();(i.productName||"").trim().toLowerCase()===n&&i.productId!==e&&(await nn(qt(ke,"inventory_batches",s.id),{productId:e}),a++)}return a}const Dh=t=>`C$ ${(Number(t)||0).toFixed(2)}`;function $Q({user:t,role:e,roles:r}){r&&r.length;const[n,a]=v.useState([]),[s,i]=v.useState([]),[l,c]=v.useState(""),[u,d]=v.useState(Sr(new Date,"yyyy-MM-dd")),[f,h]=v.useState(""),[A,m]=v.useState(""),[p,g]=v.useState([]),[x,y]=v.useState(0),[b,w]=v.useState(0),[j,I]=v.useState("0"),[_,E]=v.useState(""),[S,k]=v.useState(!1),[P,T]=v.useState({}),F=ce=>Math.round(ce*100)/100,Y=ce=>Ya(ce).toFixed(3),[he,ue]=v.useState("CONTADO"),[fe,me]=v.useState([]),[ne,Pe]=v.useState(""),[Ie,O]=v.useState(0),H=ce=>{ue(ce),ce==="CREDITO"?(h(""),w(0),I("0.00")):(Pe(""),O(0))},R=ce=>{const oe=Number(ce.specialPrice||0);return oe>0?oe:Number(ce.price||0)},M=async ce=>{if(!ce)return 0;const oe=nr(ht(ke,"inventory_batches"),cr("productId","==",ce)),Me=await Ot(oe);let Le=0;return Me.forEach(ve=>{const le=ve.data();Le=F5(Le,Number(le.remaining||0))}),Ya(Le)},K=async ce=>{if(!ce)return 0;const oe=await Ot(ht(ke,"inventory_batches"));let Me=0;return oe.forEach(Le=>{const ve=Le.data();(ve.productName||"").trim().toLowerCase()===ce.trim().toLowerCase()&&(Me=F5(Me,Number(ve.remaining||0)))}),Ya(Me)};v.useEffect(()=>{(async()=>{const ce=await Ot(ht(ke,"products")),oe=[];ce.forEach(Me=>{const Le=Me.data();(Le==null?void 0:Le.active)!==!1&&oe.push({id:Me.id,productName:Le.name??Le.productName??"(sin nombre)",price:Number(Le.price??0),measurement:Le.measurement??"(sin unidad)",category:Le.category??"(sin categora)"})}),a(oe)})()},[]),v.useEffect(()=>{(async()=>{const ce=await Ot(ht(ke,"inventory_batches")),oe={};ce.forEach(Me=>{const Le=Me.data(),ve=Le.productId,le=Number(Le.remaining||0);ve&&(oe[ve]=F5(oe[ve]||0,le))}),Object.keys(oe).forEach(Me=>oe[Me]=Ya(oe[Me])),T(oe)})()},[]),v.useEffect(()=>{(async()=>{const ce=await Ot(ht(ke,"users")),oe=[];ce.forEach(Me=>{const Le=Me.data();oe.push({id:Me.id,email:Le.email??"(sin email)",role:Le.role??"USER"})}),i(oe)})()},[]);const W=async()=>{if(!l)return;const ce=n.find(Me=>Me.id===l);if(!ce)return;if(p.some(Me=>Me.productId===ce.id)){c("");return}const oe=await M(ce.id);g(Me=>[...Me,{productId:ce.id,productName:ce.productName,measurement:ce.measurement,price:Number(ce.price||0),specialPrice:0,stock:oe,qty:0,discount:0}]),c("")},D=async ce=>{if(!ce)return;const oe=n.find(Le=>Le.id===ce);if(!oe||p.some(Le=>Le.productId===oe.id))return;const Me=await M(oe.id);g(Le=>[...Le,{productId:oe.id,productName:oe.productName,measurement:oe.measurement,price:Number(oe.price||0),specialPrice:0,stock:Me,qty:0,discount:0}]),c("")},L=ce=>{g(oe=>oe.filter(Me=>Me.productId!==ce))},Z=async(ce,oe)=>{g(Me=>Me.map(Le=>{if(Le.productId!==ce)return Le;const ve=(Le.measurement||"").toLowerCase()!=="lb",le=oe===""?0:Number(oe);let Ue=ve?Math.max(0,Math.round(le)):Ya(le);const rt=ve?Math.max(0,Math.floor(Number(Le.stock||0))):Ya(Number(Le.stock||0));return Ue>rt&&(Ue=rt,E(` Cantidad limitada a existencias (${rt})`)),{...Le,qty:Ue}}))},ge=(ce,oe)=>{g(Me=>Me.map(Le=>{if(Le.productId!==ce)return Le;const ve=(oe||"").replace(",","."),le=ve.trim()===""?0:Number(ve),Ue=Number.isFinite(le)?Math.max(0,F(le)):0;return{...Le,specialPrice:Ue}}))},U=(ce,oe)=>{g(Me=>Me.map(Le=>{if(Le.productId!==ce)return Le;const ve=Math.max(0,Math.floor(Number(oe||0)));return{...Le,discount:ve}}))},Ge=v.useMemo(()=>{let ce=0;for(const oe of p){const Me=R(oe),Le=Number(Me||0)*Number(oe.qty||0),ve=Math.max(0,Le-Math.max(0,Number(oe.discount||0)));ce+=ve}return F(ce)},[p]);v.useEffect(()=>{y(Ge)},[Ge]),v.useEffect(()=>{const ce=Number(b)||0,oe=Number(x)||0;I((ce-oe).toFixed(2))},[b,x]);const ie=ce=>{ce.key===","&&(ce.preventDefault(),ce.target.value+=".")},[J,je]=v.useState(!1);v.useEffect(()=>{var Me;const ce=window.matchMedia("(max-width: 900px)"),oe=()=>je(ce.matches);return oe(),(Me=ce.addEventListener)==null||Me.call(ce,"change",oe),()=>{var Le;return(Le=ce.removeEventListener)==null?void 0:Le.call(ce,"change",oe)}},[]),v.useEffect(()=>{(async()=>{try{const ce=await Ot(ht(ke,"customers_pollo")),oe=[];ce.forEach(Me=>{const Le=Me.data();oe.push({id:Me.id,name:Le.name??"",phone:Le.phone??"",status:Le.status??"ACTIVO",creditLimit:Number(Le.creditLimit??0),vendorId:Le.vendorId??"",vendorName:Le.vendorName??"",balance:0})});for(const Me of oe)try{const Le=nr(ht(ke,"ar_movements_pollo"),cr("customerId","==",Me.id)),ve=await Ot(Le);let le=0;ve.forEach(rt=>{le+=Number(rt.data().amount||0)});const Ue=Number(Me.initialDebt||0);Me.balance=le+Ue}catch{Me.balance=0}oe.sort((Me,Le)=>(Me.name||"").localeCompare(Le.name||"")),me(oe)}catch(ce){console.error("Error cargando customers_pollo:",ce),me([])}})()},[]);const z=v.useMemo(()=>fe.find(ce=>ce.id===ne)||null,[fe,ne]),Ae=Number((z==null?void 0:z.balance)||0),ye=he==="CREDITO"?Math.max(0,Number(Ae||0)+Math.max(0,Number(x||0))):0;v.useEffect(()=>{he==="CREDITO"&&O(ce=>Math.min(Math.max(0,Number(ce||0)),ye))},[he,ye]),v.useEffect(()=>{he==="CREDITO"&&(w(Number(Ie||0)),I("0.00"))},[he,Ie]);const Qe=he==="CREDITO"?Ae+Math.max(0,Number(x||0))-Math.max(0,Number(Ie||0)):0,st=async()=>{if(p.length===0)return"Agrega al menos un producto.";for(const ce of p){if(!ce.qty||ce.qty<=0)return`Cantidad invlida para "${ce.productName}".`;const oe=await M(ce.productId);if(!lC(oe,ce.qty)){const Me=await K(ce.productName);if(lC(Me,0)&&!lC(oe,0)){const Le=await zSe(ce.productName,ce.productId),ve=await M(ce.productId);if(!lC(ve,ce.qty))return`Stock insuficiente tras corregir ${Le} lote(s) para "${ce.productName}".`}else return`Stock insuficiente para "${ce.productName}". Disponible: ${oe}`}}return null},ut=async ce=>{var Me,Le;ce.preventDefault(),E("");const oe=await st();if(oe){E(" "+oe);return}try{k(!0);const ve=[];if(he==="CONTADO"){if(!f.trim())return"Ingresa el nombre del cliente (contado)."}else{if(!ne)return"Selecciona un cliente (crdito).";if(Ie<0)return"El pago inicial no puede ser negativo.";if(Ie>x)return"El pago inicial no puede superar el total.";if((z==null?void 0:z.status)==="BLOQUEADO")return"El cliente est BLOQUEADO. No se puede fiar."}for(const jt of p){const xe=jt.qty,{allocations:He,avgUnitCost:Ce,cogsAmount:lt}=await GSe(ke,jt.productName,xe,!1),nt=R(jt),Xe=Number(nt||0)*Number(xe||0),It=Math.max(0,Number(jt.discount||0)),$t=Math.max(0,Xe-It);ve.push({productId:jt.productId,productName:jt.productName,measurement:jt.measurement,unitPrice:Number(nt||0),regularPrice:Number(jt.price||0),specialPrice:Number(jt.specialPrice||0)>0?Number(jt.specialPrice):null,qty:xe,discount:It,lineTotal:F(Xe),lineFinal:F($t),allocations:He,avgUnitCost:Ce,cogsAmount:lt})}const le=ve.reduce((jt,xe)=>jt+xe.lineFinal,0),Ue=ve.reduce((jt,xe)=>jt+Number(xe.qty||0),0),rt=Number(he==="CREDITO"?Ie||0:b||0),mt=he==="CREDITO"?"0.00":j,gt={id:KSe(),quantity:Ue,amount:le,amountCharged:le,timestamp:fr.now(),date:u,userEmail:(t==null?void 0:t.email)??((Me=s[0])==null?void 0:Me.email)??"sin usuario",vendor:e??((Le=s[0])==null?void 0:Le.role)??"sin usuario",status:"FLOTANTE",items:ve,itemsTotal:le,type:he,amountReceived:rt,change:mt};if(he==="CONTADO"){if(!f.trim()){E(" Ingresa el nombre del cliente (contado).");return}}else{if(!ne){E(" Selecciona un cliente (crdito).");return}if(Ie<0){E(" El pago inicial no puede ser negativo.");return}if(Ie>x){E(" El pago inicial no puede superar el total.");return}if((z==null?void 0:z.status)==="BLOQUEADO"){E(" El cliente est BLOQUEADO. No se puede fiar.");return}const jt=Number((z==null?void 0:z.creditLimit)||0);if(jt>0&&Qe>jt){E(` Supera el lmite de crdito (C$ ${jt.toFixed(2)}).`);return}}const Ct=await xn(ht(ke,"salesV2"),gt);if(he==="CREDITO"&&ne){const jt={customerId:ne,date:u,createdAt:fr.now(),ref:{saleId:Ct.id}};await xn(ht(ke,"ar_movements_pollo"),{...jt,type:"CARGO",amount:Number(le)||0}),Number(Ie)>0&&await xn(ht(ke,"ar_movements_pollo"),{...jt,type:"ABONO",amount:-Number(Ie)}),me(xe=>xe.map(He=>He.id===ne?{...He,balance:Number(He.balance||0)+Number(le||0)-Number(Ie||0)}:He))}E(" Venta registrada y asignada a inventario (FIFO)."),g([]),c(""),y(0),w(0),I("0"),h(""),d(Sr(new Date,"yyyy-MM-dd")),Pe(""),O(0),ue("CONTADO")}catch(ve){console.error(ve),E(` ${(ve==null?void 0:ve.message)||"Error al registrar la venta."}`)}finally{k(!1)}},De=v.useMemo(()=>new Set(p.map(ce=>ce.productId)),[p]),it=v.useMemo(()=>n.filter(ce=>(P[ce.id]||0)>0),[n,P]),dt=v.useMemo(()=>{const ce=String(A||"").trim().toLowerCase();return ce?it.filter(oe=>`${oe.productName||""}`.toLowerCase().includes(ce)):it},[it,A]);return J?o.jsx("div",{className:"w-full max-w-lg mx-auto p-3",children:o.jsxs("div",{className:"bg-white rounded-2xl shadow p-3 space-y-3",children:[o.jsxs("div",{className:"flex items-center justify-between",children:[o.jsx("h2",{className:"font-bold text-lg text-blue-700",children:"Registrar venta (Pollo)"}),o.jsx("input",{type:"date",className:"text-sm text-gray-700 border rounded px-2 py-1",value:u,onChange:ce=>d(ce.target.value),"aria-label":"Fecha de la venta"})]}),o.jsxs("div",{className:"space-y-2",children:[o.jsx("label",{className:"text-sm font-semibold",children:"Tipo de cliente"}),o.jsxs("select",{className:"w-full border rounded px-2 py-2",value:he,onChange:ce=>H(ce.target.value),children:[o.jsx("option",{value:"CONTADO",children:"Contado"}),o.jsx("option",{value:"CREDITO",children:"Crdito"})]})]}),he==="CONTADO"?o.jsxs("div",{className:"space-y-2",children:[o.jsx("label",{className:"text-sm font-semibold",children:"Cliente (Contado)"}),o.jsx("input",{className:"w-full border rounded px-2 py-2",value:f,onChange:ce=>h(ce.target.value),placeholder:"Ej: Cliente Mostrador"})]}):o.jsxs("div",{className:"space-y-2",children:[o.jsx("label",{className:"text-sm font-semibold",children:"Cliente (Crdito)"}),o.jsxs("select",{className:"w-full border rounded px-2 py-2",value:ne,onChange:ce=>Pe(ce.target.value),children:[o.jsx("option",{value:"",children:"Selecciona un cliente"}),fe.map(ce=>o.jsxs("option",{value:ce.status==="ACTIVO"?ce.id:"",disabled:ce.status==="BLOQUEADO",children:[ce.name,"  Saldo: ",Dh(ce.balance||0)]},ce.id))]}),o.jsxs("div",{className:"grid grid-cols-2 gap-2",children:[o.jsxs("div",{className:"p-2 rounded bg-gray-50 border",children:[o.jsx("div",{className:"text-xs text-gray-600",children:"Saldo actual"}),o.jsx("div",{className:"text-base font-semibold",children:Dh(Ae)})]}),o.jsxs("div",{className:"p-2 rounded bg-gray-50 border",children:[o.jsx("div",{className:"text-xs text-gray-600",children:"Saldo proyectado"}),o.jsx("div",{className:"text-base font-semibold",children:Dh(Qe)})]})]}),o.jsxs("div",{children:[o.jsx("label",{className:"text-sm font-semibold",children:"Pago inicial"}),o.jsx("input",{className:"w-full border rounded px-2 py-2",type:"number",step:"0.01",inputMode:"decimal",max:ye,value:Ie===0?"":Ie,onChange:ce=>{const oe=Math.max(0,Number(ce.target.value||0)),Me=Math.min(oe,ye);O(Me)},placeholder:"0.00"}),o.jsxs("div",{className:"text-xs text-gray-500 mt-1",children:["Mximo: ",Dh(ye)]})]})]}),o.jsxs("div",{className:"space-y-2",children:[o.jsx("label",{className:"text-sm font-semibold",children:"Producto"}),o.jsx("input",{className:"w-full border rounded px-2 py-2 mb-2",placeholder:"Buscar producto por nombre...",value:A,onChange:ce=>m(ce.target.value)}),o.jsx("div",{className:"flex gap-2",children:o.jsxs("select",{className:"flex-1 border rounded px-2 py-2",value:l,onChange:async ce=>{const oe=ce.target.value;c(oe),await D(oe)},children:[o.jsx("option",{value:"",disabled:!0,children:"Selecciona un producto"}),dt.map(ce=>o.jsxs("option",{value:ce.id,disabled:De.has(ce.id),children:[ce.productName,"  ",ce.measurement,"  C$ ",ce.price]},ce.id))]})})]}),o.jsxs("div",{className:"space-y-2",children:[o.jsx("div",{className:"text-sm font-semibold",children:"Items"}),p.length===0?o.jsx("div",{className:"text-gray-500",children:"Agrega productos al carrito."}):o.jsx("div",{className:"space-y-2",children:p.map(ce=>{const oe=R(ce),Me=Number(oe||0)*Number(ce.qty||0),Le=Math.max(0,Me-Math.max(0,Number(ce.discount||0))),ve=(ce.measurement||"").toLowerCase()!=="lb";return o.jsxs("div",{className:"border rounded p-2",children:[o.jsxs("div",{className:"flex justify-between items-center",children:[o.jsx("div",{className:"font-semibold",children:ce.productName}),o.jsxs("div",{className:"text-sm",children:["C$ ",F(oe).toFixed(2)]})]}),o.jsxs("div",{className:"mt-2 grid grid-cols-3 gap-2 items-center",children:[o.jsx("input",{className:"border rounded px-2 py-1 text-right",inputMode:ve?"numeric":"decimal",step:ve?1:.01,value:ce.qty===0?"":ce.qty,onChange:le=>Z(ce.productId,le.target.value),placeholder:ve?"Unid":"Libras",title:ve?"Unidades":"Libras"}),o.jsx("input",{className:"border rounded px-1 py-1 text-right",inputMode:"numeric",value:ce.discount===0?"":ce.discount,onChange:le=>U(ce.productId,le.target.value),placeholder:"Descuento",title:"Descuento (C$)"}),o.jsx("input",{className:"border rounded px-2 py-1 text-right",inputMode:"decimal",value:ce.specialPrice===0?"":ce.specialPrice,onChange:le=>ge(ce.productId,le.target.value),placeholder:"Sugerido",title:"Precio sugerido (opcional)"})]}),o.jsxs("div",{className:"mt-2 flex items-center justify-between",children:[o.jsxs("div",{className:"text-sm text-gray-600",children:["Exist:"," ",Ya(Number(ce.stock)-Number(ce.qty||0)).toFixed(3)]}),o.jsxs("div",{className:"font-semibold",children:["C$ ",F(Le).toFixed(2)]})]}),o.jsx("div",{className:"mt-2 text-right",children:o.jsx("button",{type:"button",className:"px-2 py-1 rounded bg-red-100 text-red-600",onClick:()=>L(ce.productId),children:"Quitar"})})]},ce.productId)})})]}),o.jsxs("div",{className:"space-y-2",children:[o.jsx("div",{className:"text-sm font-semibold",children:"Monto total"}),o.jsxs("div",{className:"text-xl font-bold",children:["C$ ",x.toFixed(2)]})]}),he==="CONTADO"&&o.jsxs("div",{className:"grid grid-cols-2 gap-2",children:[o.jsx("input",{className:"border rounded px-2 py-2",inputMode:"decimal",value:b===0?"":b,onChange:ce=>w(Number(ce.target.value||0)),placeholder:"Monto recibido"}),o.jsxs("div",{className:"border rounded px-2 py-2 bg-gray-100",children:["Cambio: C$ ",j]})]}),o.jsx("button",{onClick:ut,disabled:p.length===0||S,className:"w-full bg-blue-600 text-white px-4 py-2 rounded",children:S?"Guardando...":"Guardar venta"}),_&&o.jsx("div",{className:`text-sm ${_.startsWith("")?"text-green-600":_.startsWith("")?"text-yellow-600":"text-red-600"}`,children:_})]})}):o.jsxs("div",{className:"relative",children:[o.jsxs("form",{onSubmit:ut,className:`w-full mx-auto bg-white rounded-2xl shadow-2xl\r
                 p-4 sm:p-6 md:p-8\r
                 max-w-5xl space-y-4`,children:[o.jsx("div",{className:"flex items-center justify-between",children:o.jsx("h2",{className:"text-xl sm:text-2xl font-bold text-blue-700 whitespace-nowrap",children:"Registrar venta (Pollo)"})}),o.jsxs("div",{className:"space-y-1",children:[o.jsx("label",{className:"block text-sm font-semibold text-gray-700",children:"Producto | Precio por Libra/Unidad"}),o.jsxs("div",{className:"flex gap-2",children:[o.jsxs("select",{className:"flex-1 border border-gray-300 p-2 rounded-2xl shadow-2xl focus:ring-2 focus:ring-blue-400",value:l,onChange:ce=>c(ce.target.value),children:[o.jsx("option",{value:"",disabled:!0,children:"Selecciona un producto"}),it.map(ce=>o.jsxs("option",{value:ce.id,disabled:De.has(ce.id),title:De.has(ce.id)?"Ya est en la lista":`Disponible: ${Y(P[ce.id]||0)}`,children:[ce.productName,"  ",ce.measurement,"  C$ ",ce.price," (disp:"," ",Y(P[ce.id]||0),")"]},ce.id))]}),o.jsx("button",{type:"button",onClick:W,disabled:!l||De.has(l),className:"px-3 py-2 rounded-2xl shadow-2xl bg-blue-600 text-white hover:bg-blue-700 disabled:opacity-50",children:"Agregar"})]})]}),o.jsxs("div",{className:"grid md:grid-cols-2 gap-3",children:[o.jsxs("div",{className:"space-y-1",children:[o.jsx("label",{className:"block text-sm font-semibold text-gray-700",children:"Fecha de la venta"}),o.jsx("input",{type:"date",className:"w-full border border-gray-300 p-2 rounded-2xl shadow-2xl focus:ring-2 focus:ring-blue-400",value:u,onChange:ce=>d(ce.target.value)})]}),o.jsxs("div",{className:"space-y-1",children:[o.jsx("label",{className:"block text-sm font-semibold text-gray-700",children:"Tipo de cliente"}),o.jsxs("select",{className:"w-full border border-gray-300 p-2 rounded-2xl shadow-2xl",value:he,onChange:ce=>H(ce.target.value),children:[o.jsx("option",{value:"CONTADO",children:"Contado"}),o.jsx("option",{value:"CREDITO",children:"Crdito"})]})]}),he==="CONTADO"?o.jsxs("div",{className:"md:col-span-2 space-y-1",children:[o.jsx("label",{className:"block text-sm font-semibold text-gray-700",children:"Cliente (Contado)"}),o.jsx("input",{className:"w-full border border-gray-300 p-2 rounded-2xl shadow-2xl",value:f,onChange:ce=>h(ce.target.value),placeholder:"Ej: Cliente Mostrador"})]}):o.jsxs("div",{className:"md:col-span-2 space-y-2",children:[o.jsx("label",{className:"block text-sm font-semibold text-gray-700",children:"Cliente (Crdito)"}),o.jsxs("select",{className:"w-full border border-gray-300 p-2 rounded-2xl shadow-2xl",value:ne,onChange:ce=>Pe(ce.target.value),children:[o.jsx("option",{value:"",children:"Selecciona un cliente"}),fe.map(ce=>o.jsxs("option",{value:ce.status==="ACTIVO"?ce.id:"",disabled:ce.status==="BLOQUEADO",children:[ce.name,"  Saldo: ",Dh(ce.balance||0)]},ce.id))]}),o.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-3",children:[o.jsxs("div",{className:"p-2 rounded bg-gray-50 border",children:[o.jsx("div",{className:"text-xs text-gray-600",children:"Saldo actual"}),o.jsx("div",{className:"text-lg font-semibold",children:Dh(Ae)})]}),o.jsxs("div",{children:[o.jsx("label",{className:"block text-sm font-semibold text-gray-700",children:"Pago inicial"}),o.jsxs("div",{className:"text-xs text-gray-500 mt-1",children:["Mximo: ",Dh(ye)]}),o.jsx("input",{type:"number",step:"0.01",inputMode:"decimal",max:ye,className:"w-full border border-gray-300 p-2 rounded-2xl shadow-2xl",value:Ie===0?"":Ie,onChange:ce=>{const oe=Math.max(0,Number(ce.target.value||0)),Me=Math.min(oe,ye);O(Me)},placeholder:"0.00"})]}),o.jsxs("div",{className:"p-2 rounded bg-gray-50 border",children:[o.jsx("div",{className:"text-xs text-gray-600",children:"Saldo proyectado"}),o.jsx("div",{className:"text-lg font-semibold",children:Dh(Qe)})]})]})]})]}),o.jsx("div",{className:"rounded border overflow-x-auto shadow-2xl",children:o.jsxs("table",{className:"min-w-full text-sm r",children:[o.jsx("thead",{className:"bg-gray-100",children:o.jsxs("tr",{className:"text-center",children:[o.jsx("th",{className:"p-2 border whitespace-nowrap",children:"Producto"}),o.jsx("th",{className:"p-2 border whitespace-nowrap",children:"Precio"}),o.jsx("th",{className:"p-2 border whitespace-nowrap",children:"Precio especial"}),o.jsx("th",{className:"p-2 border whitespace-nowrap",children:"Existencias"}),o.jsx("th",{className:"p-2 border whitespace-nowrap",children:"Cantidad"}),o.jsx("th",{className:"p-2 border whitespace-nowrap",children:"Descuento"}),o.jsx("th",{className:"p-2 border whitespace-nowrap",children:"Monto"}),o.jsx("th",{className:"p-2 border",children:""})]})}),o.jsx("tbody",{children:p.length===0?o.jsx("tr",{children:o.jsx("td",{colSpan:8,className:"p-4 text-center text-gray-500",children:"Agrega productos al carrito."})}):p.map(ce=>{const oe=R(ce),Me=Number(oe||0)*Number(ce.qty||0),Le=Math.max(0,Me-Math.max(0,Number(ce.discount||0))),ve=(ce.measurement||"").toLowerCase()!=="lb",le=Ya(Number(ce.stock)-Number(ce.qty||0));return o.jsxs("tr",{className:"text-center",children:[o.jsxs("td",{className:"p-2 border whitespace-nowrap",children:[ce.productName,"  ",ce.measurement]}),o.jsxs("td",{className:"p-2 border whitespace-nowrap",children:["C$ ",F(ce.price).toFixed(2)]}),o.jsxs("td",{className:"p-2 border",children:[o.jsx("input",{type:"number",step:"0.01",inputMode:"decimal",className:"w-28 border p-1 rounded text-right",value:ce.specialPrice===0?"":ce.specialPrice,onKeyDown:ie,onChange:Ue=>ge(ce.productId,Ue.target.value),placeholder:"",title:"Precio especial (si se deja vaco, se usa el precio normal)"}),o.jsxs("div",{className:"text-[11px] text-gray-500 mt-1",children:["Aplicado: C$ ",F(oe).toFixed(2)]})]}),o.jsx("td",{className:"p-2 border whitespace-nowrap",children:le.toFixed(3)}),o.jsx("td",{className:"p-2 border",children:o.jsx("input",{type:"number",step:ve?1:.01,inputMode:ve?"numeric":"decimal",className:"w-28 border p-1 rounded text-right",value:ce.qty===0?"":ce.qty,onKeyDown:ie,onChange:Ue=>Z(ce.productId,Ue.target.value),placeholder:"0",title:"Cantidad"})}),o.jsx("td",{className:"p-2 border",children:o.jsx("input",{type:"number",step:1,min:0,className:"w-24 border p-1 rounded text-right",value:ce.discount===0?"":ce.discount,onChange:Ue=>U(ce.productId,Ue.target.value),inputMode:"numeric",placeholder:"0",title:"Descuento (entero C$)"})}),o.jsxs("td",{className:"p-2 border whitespace-nowrap",children:["C$ ",F(Le).toFixed(2)]}),o.jsx("td",{className:"p-2 border",children:o.jsx("button",{type:"button",className:"px-2 py-1 rounded bg-red-100 text-red-600 hover:bg-red-200",onClick:()=>L(ce.productId),title:"Quitar",children:""})})]},ce.productId)})})]})}),o.jsxs("div",{className:"space-y-1 ",children:[o.jsx("label",{className:"block text-sm font-semibold text-gray-700 ",children:" Monto total"}),o.jsx("input",{type:"text",className:"w-full border border-gray-300 p-2 rounded-2xl shadow-2xl bg-gray-100",value:`C$ ${x.toFixed(2)}`,readOnly:!0,title:"Suma de (precio aplicado  cantidad  descuento) de cada producto."})]}),he==="CONTADO"&&o.jsx(o.Fragment,{children:o.jsxs("div",{className:"grid grid-cols-2 gap-x-3",children:[o.jsxs("div",{className:"space-y-1",children:[o.jsx("label",{className:"block text-sm font-semibold text-gray-700",children:"Monto recibido"}),o.jsx("input",{type:"number",step:"0.01",inputMode:"decimal",className:"w-full border border-gray-300 p-2 rounded-2xl shadow-2xl",value:b===0?"":b,onChange:ce=>w(Number(ce.target.value||0))})]}),o.jsxs("div",{className:"space-y-1",children:[o.jsx("label",{className:"block text-sm font-semibold text-gray-700",children:"Cambio"}),o.jsx("input",{type:"text",className:"w-full border border-gray-300 p-2 rounded-2xl shadow-2xl bg-gray-100",value:`C$ ${j}`,readOnly:!0})]})]})}),o.jsx("button",{type:"submit",className:"w-full bg-blue-600 text-white px-4 py-3 sm:py-2 rounded-2xl shadow-2xl font-semibold shadow hover:bg-blue-700 transition disabled:opacity-50",disabled:p.length===0||S,children:S?"Guardando...":"Guardar venta"}),_&&o.jsx("p",{className:`text-sm mt-2 ${_.startsWith("")?"text-green-600":_.startsWith("")?"text-yellow-600":"text-red-600"}`,children:_})]}),S&&o.jsx("div",{className:"fixed inset-0 bg-black/40 z-[60] flex items-center justify-center",children:o.jsx("div",{className:"bg-white rounded-lg shadow-xl border px-6 py-5",children:o.jsxs("div",{className:"flex items-center gap-3",children:[o.jsxs("svg",{className:"animate-spin h-5 w-5",viewBox:"0 0 24 24",fill:"none",children:[o.jsx("circle",{className:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor",strokeWidth:"4"}),o.jsx("path",{className:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8v4a4 4 0 00-4 4H4z"})]}),o.jsx("span",{className:"font-semibold",children:"Guardando venta"})]})})})]})}const Zi=t=>`C$ ${(Number(t)||0).toFixed(2)}`;function O5(t="LOT"){return`${t}-${Date.now()}-${Math.random().toString(16).slice(2)}`}function WSe({role:t="",roles:e,sellerCandyId:r="",currentUserEmail:n}){const[a,s]=v.useState([]),[i,l]=v.useState([]),[c,u]=v.useState(!0),[d,f]=v.useState(""),{refreshKey:h,refresh:A}=xc(),m=e&&e.length?e:t,p=Yr(m,"admin"),g=p||Yr(m,"contador"),[x,y]=v.useState(Sr(Qd(new Date),"yyyy-MM-dd")),[b,w]=v.useState(Sr(Ud(new Date),"yyyy-MM-dd")),[j,I]=v.useState(""),[_,E]=v.useState(!1),[S,k]=v.useState(""),[P,T]=v.useState(Sr(new Date,"yyyy-MM-dd")),[F,Y]=v.useState("lb"),[he,ue]=v.useState(""),[fe,me]=v.useState(0),[ne,Pe]=v.useState(NaN),[Ie,O]=v.useState(0),[H,R]=v.useState([]),[M,K]=v.useState(null),[W,D]=v.useState([]),[L,Z]=v.useState(!1),[ge,U]=v.useState(null),[Ge,ie]=v.useState(!1),[J,je]=v.useState(null),[z,Ae]=v.useState(null),ye=Ce=>Ae(lt=>lt===Ce?null:Ce),[Qe,st]=v.useState(!1),ut=()=>st(Ce=>!Ce),De=Ce=>{const lt=(Ce||"").toLowerCase();return/(^|\s)(lb|lbs|libra|libras)(\s|$)/.test(lt)||lt==="lb"};v.useEffect(()=>{(async()=>{u(!0),f("");const Ce=await Ot(ht(ke,"products")),lt=[];Ce.forEach($t=>{const Ke=$t.data();Ke.active===!0&&lt.push({id:$t.id,name:Ke.name??Ke.productName??"(sin nombre)",category:Ke.category??"(sin categora)",measurement:Ke.measurement??"lb",price:Number(Ke.price??0),providerPrice:Object.prototype.hasOwnProperty.call(Ke,"providerPrice")?Number(Ke.providerPrice):void 0})}),s(lt);const nt=nr(ht(ke,"inventory_batches"),on("date","desc")),Xe=await Ot(nt),It=[];Xe.forEach($t=>{const Ke=$t.data(),wt=Ya(Number(Ke.quantity||0)),q=Number(Ke.purchasePrice||0),ae=Number(Ke.salePrice||0),ee=Number((wt*q).toFixed(2)),be=Number((wt*ae).toFixed(2));It.push({id:$t.id,productId:Ke.productId,productName:Ke.productName,category:Ke.category,unit:Ke.unit,quantity:wt,remaining:Ya(Number(Ke.remaining||0)),purchasePrice:q,salePrice:ae,invoiceTotal:Ke.invoiceTotal!=null?Number(Ke.invoiceTotal):ee,expectedTotal:Ke.expectedTotal!=null?Number(Ke.expectedTotal):be,date:Ke.date,createdAt:Ke.createdAt,status:Ke.status,notes:Ke.notes,paidAmount:Number(Ke.paidAmount||0),paidAt:Ke.paidAt,batchGroupId:Ke.batchGroupId,orderName:Ke.orderName})}),l(It),u(!1)})()},[h]);const it=v.useMemo(()=>i.filter(Ce=>!(x&&Ce.date<x||b&&Ce.date>b||j&&Ce.productId!==j)),[i,x,b,j]),dt=v.useMemo(()=>{const Ce=it.reduce((q,ae)=>q+Number(ae.invoiceTotal||0),0),lt=it.reduce((q,ae)=>q+Number(ae.expectedTotal||0),0);let nt=0,Xe=0,It=0,$t=0;for(const q of it)De(q.unit)?(nt+=q.quantity,Xe+=q.remaining):(It+=q.quantity,$t+=q.remaining);const Ke=it.reduce((q,ae)=>q+ae.quantity,0),wt=it.reduce((q,ae)=>q+ae.remaining,0);return{lbsIng:nt,lbsRem:Xe,udsIng:It,udsRem:$t,qty:Ke,rem:wt,totalFacturado:Ce,totalEsperado:lt}},[it]),ce=v.useMemo(()=>{var nt,Xe;const Ce=new Map;for(const It of it){const $t=It.batchGroupId&&String(It.batchGroupId).trim()||It.id;Ce.has($t)||Ce.set($t,[]),Ce.get($t).push(It)}const lt=[];for(const[It,$t]of Ce.entries()){const Ke=[...$t].sort((V,re)=>{var Se,Re;const pe=((Se=V.createdAt)==null?void 0:Se.seconds)??0;return(((Re=re.createdAt)==null?void 0:Re.seconds)??0)-pe}),wt=((nt=Ke[0])==null?void 0:nt.date)||"",q=String(((Xe=Ke[0])==null?void 0:Xe.orderName)||"").trim()||`Pedido ${wt||""}`.trim()||"Pedido",ae=new Set(Ke.map(V=>String(V.category||"").trim()).filter(Boolean)),ee=ae.size===1?Array.from(ae)[0].toUpperCase():"MIXTO",be=Ke.some(V=>V.status==="PENDIENTE")?"PENDIENTE":"PAGADO",_e=Ya(Ke.reduce((V,re)=>V+(De(re.unit)?Number(re.quantity||0):0),0)),Be=Ya(Ke.reduce((V,re)=>V+(De(re.unit)?Number(re.remaining||0):0),0)),tt=Number(Ke.reduce((V,re)=>V+Number(re.invoiceTotal||0),0).toFixed(2)),ot=Number(Ke.reduce((V,re)=>V+Number(re.expectedTotal||0),0).toFixed(2)),te=Number((ot-tt).toFixed(2));lt.push({groupId:It,orderName:q,date:wt,typeLabel:ee,status:be,lbsIn:_e,lbsRem:Be,totalFacturado:tt,totalEsperado:ot,utilidadBruta:te,items:Ke})}return lt.sort((It,$t)=>It.date===$t.date?It.groupId<$t.groupId?1:-1:It.date<$t.date?1:-1),lt},[it]),oe=v.useMemo(()=>{const Ce=String(F||"").toLowerCase().trim();return a.filter(nt=>String(nt.measurement||"").toLowerCase().trim()===Ce).sort((nt,Xe)=>nt.name.localeCompare(Xe.name,"es"))},[a,F]);v.useEffect(()=>{const Ce=a.find(lt=>lt.id===he);Ce?(O(Number(Ce.price||0)),Ce.providerPrice!=null&&Number.isFinite(Number(Ce.providerPrice))?Pe(Number(Ce.providerPrice)):Pe(NaN)):(O(0),Pe(NaN))},[he,a,h]);const Me=()=>{f("");const Ce=a.find(wt=>wt.id===he);if(!Ce)return f("Selecciona un producto.");if(fe<=0||!Number.isFinite(ne)||ne<=0)return f("Completa libras a ingresar y precio proveedor.");const lt=Ya(fe),nt=Ce.measurement,Xe=Number((lt*Number(ne||0)).toFixed(2)),It=Number((lt*Number(Ie||0)).toFixed(2)),$t=Number((It-Xe).toFixed(2)),Ke=H.findIndex(wt=>wt.productId===Ce.id);Ke>=0?R(wt=>wt.map((q,ae)=>ae!==Ke?q:{...q,quantity:lt,remaining:lt,purchasePrice:Number(ne||0),salePrice:Number(Ie||0),invoiceTotal:Xe,expectedTotal:It,utilidadBruta:$t})):R(wt=>[...wt,{tempId:O5("IT"),productId:Ce.id,productName:Ce.name,category:Ce.category,unit:nt,quantity:lt,remaining:lt,purchasePrice:Number(ne||0),salePrice:Number(Ie||0),invoiceTotal:Xe,expectedTotal:It,utilidadBruta:$t}]),ue(""),me(0),Pe(NaN),O(0)},Le=Ce=>{R(lt=>lt.filter(nt=>nt.tempId!==Ce))},ve=(Ce,lt,nt)=>{R(Xe=>Xe.map(It=>{if(It.tempId!==Ce)return It;const $t={...It};return lt==="quantity"&&($t.quantity=Ya(Math.max(0,nt)),M||($t.remaining=$t.quantity)),lt==="purchasePrice"&&($t.purchasePrice=Math.max(0,Number(nt||0))),lt==="salePrice"&&($t.salePrice=Math.max(0,Number(nt||0))),$t.invoiceTotal=Number(($t.quantity*$t.purchasePrice).toFixed(2)),$t.expectedTotal=Number(($t.quantity*$t.salePrice).toFixed(2)),$t.utilidadBruta=Number(($t.expectedTotal-$t.invoiceTotal).toFixed(2)),$t}))},le=v.useMemo(()=>{const Ce=Ya(H.reduce(($t,Ke)=>$t+(De(Ke.unit)?Number(Ke.quantity||0):0),0)),lt=Ya(H.reduce(($t,Ke)=>$t+(De(Ke.unit)?Number(Ke.remaining||0):0),0)),nt=Number(H.reduce(($t,Ke)=>$t+Number(Ke.invoiceTotal||0),0).toFixed(2)),Xe=Number(H.reduce(($t,Ke)=>$t+Number(Ke.expectedTotal||0),0).toFixed(2)),It=Number((Xe-nt).toFixed(2));return{lbsIn:Ce,lbsRem:lt,totalFacturado:nt,totalEsperado:Xe,utilidadBruta:It}},[H]),Ue=()=>{K(null),D([]),k(""),T(Sr(new Date,"yyyy-MM-dd")),Y("lb"),ue(""),me(0),Pe(NaN),O(0),R([])},rt=async()=>{if(f(""),!H.length)return f("Agrega al menos un producto al pedido.");const Ce=P||Sr(new Date,"yyyy-MM-dd"),lt=String(S||"").trim()||`Pedido ${Ce}`,nt=M||O5("BATCH");try{if(!M){for(const Ke of H)await MQ({productId:Ke.productId,productName:Ke.productName,category:Ke.category,unit:Ke.unit,quantity:Ya(Ke.quantity),purchasePrice:Number(Ke.purchasePrice||0),salePrice:Number(Ke.salePrice||0),invoiceTotal:Number(Ke.invoiceTotal||0),expectedTotal:Number(Ke.expectedTotal||0),date:Ce,notes:"",batchGroupId:nt,orderName:lt});f(" Pedido creado"),E(!1),Ue(),A();return}const Xe=W,It=new Map;for(const Ke of Xe)It.set(Ke.productId,Ke);const $t=new Set(H.map(Ke=>Ke.productId));for(const Ke of H){const wt=It.get(Ke.productId),q=Ya(Ke.quantity);if(wt){const ae=Ya(wt.quantity-wt.remaining),ee=Math.max(0,Ya(q-ae));await nn(qt(ke,"inventory_batches",wt.id),{date:Ce,orderName:lt,batchGroupId:nt,quantity:q,purchasePrice:Number(Ke.purchasePrice||0),salePrice:Number(Ke.salePrice||0),invoiceTotal:Number(Ke.invoiceTotal||0),expectedTotal:Number(Ke.expectedTotal||0),remaining:ee})}else await MQ({productId:Ke.productId,productName:Ke.productName,category:Ke.category,unit:Ke.unit,quantity:q,purchasePrice:Number(Ke.purchasePrice||0),salePrice:Number(Ke.salePrice||0),invoiceTotal:Number(Ke.invoiceTotal||0),expectedTotal:Number(Ke.expectedTotal||0),date:Ce,notes:"",batchGroupId:nt,orderName:lt})}for(const Ke of Xe)$t.has(Ke.productId)||await Cn(qt(ke,"inventory_batches",Ke.id));f(" Pedido actualizado"),E(!1),Ue(),A()}catch(Xe){console.error(Xe),f(" Error al guardar pedido")}},mt=Ce=>{U(Ce),Z(!0)},gt=Ce=>{K(Ce.groupId),D(Ce.items),k(Ce.orderName),T(Ce.date||Sr(new Date,"yyyy-MM-dd"));const lt=Ce.items.map(nt=>{const Xe=Number(nt.invoiceTotal||0),It=Number(nt.expectedTotal||0);return{tempId:O5("IT"),productId:nt.productId,productName:nt.productName,category:nt.category,unit:nt.unit,quantity:Ya(nt.quantity),remaining:Ya(nt.remaining),purchasePrice:Number(nt.purchasePrice||0),salePrice:Number(nt.salePrice||0),invoiceTotal:Xe,expectedTotal:It,utilidadBruta:Number((It-Xe).toFixed(2))}});R(lt),E(!0)},Ct=async Ce=>{if(confirm(`Eliminar el pedido "${Ce.orderName}" del ${Ce.date}?`))try{for(const nt of Ce.items)await Cn(qt(ke,"inventory_batches",nt.id));f(" Pedido eliminado"),A()}catch(nt){console.error(nt),f(" Error al eliminar pedido")}},jt=Ce=>{je(Ce),ie(!0)},xe=async()=>{if(J)try{for(const Ce of J.items){if(Ce.status!=="PENDIENTE")continue;await ite(Ce.id),await nn(qt(ke,"inventory_batches",Ce.id),{remaining:0});const lt={date:Ce.date,productName:Ce.productName,quantity:Ce.quantity,amount:Number((Ce.expectedTotal??Ce.salePrice*Ce.quantity).toFixed(2)),allocations:[{batchId:Ce.id,qty:Ce.quantity,unitCost:Ce.purchasePrice,lineCost:Number((Ce.purchasePrice*Ce.quantity).toFixed(2))}],avgUnitCost:Ce.purchasePrice,measurement:Ce.unit,createdAt:fr.now(),autoGeneratedFromInventory:!0};await xn(ht(ke,"salesV2"),lt)}f(" Pedido pagado y reflejado como venta"),A()}catch(Ce){console.error(Ce),f(" Error al pagar pedido")}finally{ie(!1),je(null)}},He=()=>{ie(!1),je(null)};return o.jsxs("div",{className:"max-w-6xl mx-auto",children:[o.jsxs("div",{className:"flex items-center justify-between mb-3",children:[o.jsx("h2",{className:"text-2xl font-bold",children:"Inventario"}),g&&o.jsx("button",{className:"px-3 py-2 rounded-2xl bg-blue-600 text-white hover:bg-blue-700",type:"button",onClick:()=>{Ue(),E(!0)},children:"Crear Lote"})]}),o.jsxs("div",{className:"bg-white p-3 rounded shadow-2xl border mb-4 flex flex-wrap items-end gap-3 text-sm",children:[o.jsxs("div",{className:"flex flex-col",children:[o.jsx("label",{className:"font-semibold",children:"Desde"}),o.jsx("input",{type:"date",className:"border rounded px-2 py-1",value:x,onChange:Ce=>y(Ce.target.value)})]}),o.jsxs("div",{className:"flex flex-col",children:[o.jsx("label",{className:"font-semibold",children:"Hasta"}),o.jsx("input",{type:"date",className:"border rounded px-2 py-1",value:b,onChange:Ce=>w(Ce.target.value)})]}),o.jsxs("div",{className:"flex flex-col min-w-[240px]",children:[o.jsx("label",{className:"font-semibold",children:"Producto"}),o.jsxs("select",{className:"border rounded px-2 py-1",value:j,onChange:Ce=>I(Ce.target.value),children:[o.jsx("option",{value:"",children:"Todos"}),a.map(Ce=>o.jsxs("option",{value:Ce.id,children:[Ce.name,"  ",Ce.category]},Ce.id))]})]}),o.jsx("button",{className:"px-3 rounded-2xl shadow-2xl py-1 bg-gray-200 hover:bg-gray-300",onClick:()=>{y(""),w(""),I("")},children:"Quitar filtro"}),o.jsx("div",{className:"ml-auto",children:o.jsx(gc,{onClick:()=>A(),loading:c})})]}),o.jsxs("div",{className:"bg-gray-50 p-3 rounded-2xl shadow-2xl border mb-3 text-base",children:[o.jsxs("div",{className:"flex items-center justify-between cursor-pointer",onClick:ut,role:"button","aria-expanded":Qe,children:[o.jsxs("div",{className:"flex gap-6 items-center",children:[o.jsxs("div",{children:[o.jsx("span",{className:"font-semibold",children:"Libras ingresadas:"})," ",dt.lbsIng.toFixed(3)]}),o.jsxs("div",{children:[o.jsx("span",{className:"font-semibold",children:"Libras restantes:"})," ",dt.lbsRem.toFixed(3)]})]}),o.jsx("div",{className:"text-sm text-gray-500",children:Qe?"Cerrar":"Ver ms"})]}),Qe&&o.jsx("div",{className:"mt-3",children:o.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-3 gap-y-2 gap-x-8",children:[o.jsxs("div",{children:[o.jsx("span",{className:"font-semibold",children:"Libras ingresadas:"})," ",dt.lbsIng.toFixed(3)]}),o.jsxs("div",{children:[o.jsx("span",{className:"font-semibold",children:"Libras restantes:"})," ",dt.lbsRem.toFixed(3)]}),o.jsxs("div",{children:[o.jsx("span",{className:"font-semibold",children:"Unidades ingresadas:"})," ",dt.udsIng.toFixed(3)]}),o.jsxs("div",{children:[o.jsx("span",{className:"font-semibold",children:"Unidades restantes:"})," ",dt.udsRem.toFixed(3)]}),o.jsxs("div",{children:[o.jsx("span",{className:"font-semibold",children:"Total esperado en ventas:"})," ","C$ ",dt.totalEsperado.toFixed(2)]}),o.jsxs("div",{children:[o.jsx("span",{className:"font-semibold",children:"Total facturado:"})," C$"," ",dt.totalFacturado.toFixed(2)]}),o.jsxs("div",{children:[o.jsx("span",{className:"font-semibold",children:"Ganancia sin gastos:"})," C$"," ",(dt.totalEsperado-dt.totalFacturado).toFixed(2)]}),o.jsxs("div",{children:[o.jsx("span",{className:"font-semibold",children:"Cantidad de Lotes (por filtro):"})," ",it.length.toLocaleString()]})]})})]}),o.jsx("div",{className:"md:hidden space-y-3",children:c?o.jsx("div",{className:"bg-white border rounded-2xl p-4 shadow",children:"Cargando"}):ce.length===0?o.jsx("div",{className:"bg-white border rounded-2xl p-4 shadow text-center",children:"Sin lotes"}):ce.map(Ce=>{const lt=z===Ce.groupId;return o.jsxs("div",{className:"bg-white border rounded-2xl",children:[o.jsxs("div",{className:"p-4 flex items-start justify-between gap-3 cursor-pointer",onClick:()=>ye(Ce.groupId),children:[o.jsxs("div",{className:"min-w-0",children:[o.jsx("div",{className:"font-semibold text-lg",children:Ce.date}),o.jsx("div",{className:"text-xs text-gray-500 truncate",children:Ce.orderName})]}),o.jsxs("div",{className:"flex items-center gap-3",children:[o.jsx("span",{className:`px-2 py-1 rounded text-xs shrink-0 ${Ce.status==="PAGADO"?"bg-green-100 text-green-700":"bg-yellow-100 text-yellow-700"}`,children:Ce.status}),o.jsx("div",{className:"text-sm text-gray-500",children:Ce.typeLabel})]})]}),lt&&o.jsxs("div",{className:"p-4 pt-0",children:[o.jsxs("div",{className:"grid grid-cols-2 gap-2 mt-3 text-sm",children:[o.jsxs("div",{className:"bg-gray-50 rounded-xl p-2",children:[o.jsx("div",{className:"text-[11px] text-gray-500",children:"Tipo"}),o.jsx("div",{className:"font-semibold",children:Ce.typeLabel})]}),o.jsxs("div",{className:"bg-gray-50 rounded-xl p-2",children:[o.jsx("div",{className:"text-[11px] text-gray-500",children:"Utilidad bruta"}),o.jsx("div",{className:"font-semibold",children:Zi(Ce.utilidadBruta)})]}),o.jsxs("div",{className:"bg-gray-50 rounded-xl p-2",children:[o.jsx("div",{className:"text-[11px] text-gray-500",children:"Lbs ingresadas"}),o.jsx("div",{className:"font-semibold",children:Ce.lbsIn.toFixed(3)})]}),o.jsxs("div",{className:"bg-gray-50 rounded-xl p-2",children:[o.jsx("div",{className:"text-[11px] text-gray-500",children:"Lbs restantes"}),o.jsx("div",{className:"font-semibold",children:Ce.lbsRem.toFixed(3)})]}),o.jsxs("div",{className:"bg-gray-50 rounded-xl p-2 col-span-2",children:[o.jsxs("div",{className:"flex justify-between text-[11px] text-gray-500",children:[o.jsx("span",{children:"Total facturado"}),o.jsx("span",{children:"Total esperado"})]}),o.jsxs("div",{className:"flex justify-between font-semibold",children:[o.jsx("span",{children:Zi(Ce.totalFacturado)}),o.jsx("span",{children:Zi(Ce.totalEsperado)})]})]})]}),o.jsxs("div",{className:"mt-3 flex gap-2",children:[o.jsx("button",{className:"flex-1 px-3 py-2 rounded-xl bg-gray-100 hover:bg-gray-200 text-sm",onClick:()=>mt(Ce),children:"Ver detalle"}),p?o.jsxs(o.Fragment,{children:[Ce.status==="PENDIENTE"&&o.jsx("button",{className:"px-3 py-2 rounded-xl bg-green-600 hover:bg-green-700 text-white text-sm",onClick:()=>jt(Ce),children:"Pagar"}),o.jsx("button",{className:"px-3 py-2 rounded-xl bg-yellow-600 hover:bg-yellow-700 text-white text-sm",onClick:()=>gt(Ce),children:"Editar"}),o.jsx("button",{className:"px-3 py-2 rounded-xl bg-red-600 hover:bg-red-700 text-white text-sm",onClick:()=>Ct(Ce),children:"Borrar"})]}):null]})]})]},Ce.groupId)})}),o.jsx("div",{className:"hidden md:block bg-white p-2 rounded shadow border w-full overflow-x-auto",children:o.jsxs("table",{className:"min-w-[1100px] w-full text-sm shadow-2xl",children:[o.jsx("thead",{className:"bg-gray-100",children:o.jsxs("tr",{className:"whitespace-nowrap",children:[o.jsx("th",{className:"p-2 border",children:"Fecha"}),o.jsx("th",{className:"p-2 border",children:"Tipo"}),o.jsx("th",{className:"p-2 border",children:"Libras ingresadas"}),o.jsx("th",{className:"p-2 border",children:"Libras restantes"}),o.jsx("th",{className:"p-2 border",children:"Total Facturado"}),o.jsx("th",{className:"p-2 border",children:"Total esperado"}),o.jsx("th",{className:"p-2 border",children:"Utilidad bruta"}),o.jsx("th",{className:"p-2 border",children:"Estado"}),o.jsx("th",{className:"p-2 border",children:"Acciones"})]})}),o.jsx("tbody",{children:c?o.jsx("tr",{children:o.jsx("td",{colSpan:9,className:"p-4 text-center",children:"Cargando"})}):ce.length===0?o.jsx("tr",{children:o.jsx("td",{colSpan:9,className:"p-4 text-center",children:"Sin lotes"})}):ce.map(Ce=>o.jsxs("tr",{className:"text-center whitespace-nowrap",children:[o.jsxs("td",{className:"p-2 border",children:[o.jsx("button",{className:"underline text-blue-700 hover:text-blue-900",onClick:()=>mt(Ce),title:Ce.orderName,children:Ce.date}),o.jsx("div",{className:"text-[11px] text-gray-500",children:Ce.orderName})]}),o.jsx("td",{className:"p-2 border",children:Ce.typeLabel}),o.jsx("td",{className:"p-2 border",children:Ce.lbsIn.toFixed(3)}),o.jsx("td",{className:"p-2 border",children:Ce.lbsRem.toFixed(3)}),o.jsx("td",{className:"p-2 border",children:Zi(Ce.totalFacturado)}),o.jsx("td",{className:"p-2 border",children:Zi(Ce.totalEsperado)}),o.jsx("td",{className:"p-2 border",children:Zi(Ce.utilidadBruta)}),o.jsx("td",{className:"p-2 border",children:o.jsx("span",{className:`px-2 py-0.5 rounded text-xs ${Ce.status==="PAGADO"?"bg-green-100 text-green-700":"bg-yellow-100 text-yellow-700"}`,children:Ce.status})}),o.jsx("td",{className:"p-2 border",children:p?o.jsxs("div",{className:"flex gap-2 justify-center",children:[Ce.status==="PENDIENTE"&&o.jsx("button",{onClick:()=>jt(Ce),className:"px-2 py-1 rounded text-white bg-green-600 hover:bg-green-700",children:"Pagar"}),o.jsx("button",{className:"px-2 py-1 rounded text-white bg-yellow-600 hover:bg-yellow-700",onClick:()=>gt(Ce),children:"Editar"}),o.jsx("button",{className:"px-2 py-1 rounded text-white bg-red-600 hover:bg-red-700",onClick:()=>Ct(Ce),children:"Borrar"})]}):o.jsx("span",{className:"text-xs text-gray-500",children:"Solo vista"})})]},Ce.groupId))})]})}),d&&o.jsx("p",{className:"mt-2 text-sm",children:d}),_&&zc.createPortal(o.jsxs("div",{className:"fixed inset-0 z-[70] flex items-center justify-center",children:[o.jsx("div",{className:"absolute inset-0 bg-black/40",onClick:()=>E(!1)}),o.jsxs("div",{className:"relative bg-white rounded-lg shadow-2xl border w-[96%] max-w-6xl max-h-[92vh] overflow-auto p-4",children:[o.jsxs("div",{className:"flex items-center justify-between mb-2",children:[o.jsx("h3",{className:"text-lg font-bold",children:M?"Editar pedido":"Crear pedido"}),o.jsx("button",{className:"px-3 py-1 rounded bg-gray-200 hover:bg-gray-300",onClick:()=>E(!1),type:"button",children:"Cerrar"})]}),o.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4 mb-4",children:[o.jsxs("div",{className:"md:col-span-2",children:[o.jsx("label",{className:"block text-sm font-semibold",children:"Nombre de pedido"}),o.jsx("input",{className:"w-full border p-2 rounded",value:S,onChange:Ce=>k(Ce.target.value),placeholder:"Ej: Pedido Pollo - Semana 1"})]}),o.jsxs("div",{children:[o.jsx("label",{className:"block text-sm font-semibold",children:"Fecha de lote"}),o.jsx("input",{type:"date",className:"w-full border p-2 rounded",value:P,onChange:Ce=>T(Ce.target.value)})]})]}),o.jsxs("div",{className:"border rounded p-3 bg-gray-50 mb-4",children:[o.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-6 gap-3 items-end",children:[o.jsxs("div",{children:[o.jsx("label",{className:"block text-sm font-semibold",children:"Unidad"}),o.jsxs("select",{className:"w-full border p-2 rounded",value:F,onChange:Ce=>{Y(Ce.target.value),ue(""),me(0),Pe(NaN),O(0)},children:[o.jsx("option",{value:"lb",children:"lb"}),o.jsx("option",{value:"unidad",children:"unidad"}),o.jsx("option",{value:"kg",children:"kg"})]})]}),o.jsxs("div",{className:"md:col-span-2",children:[o.jsx("label",{className:"block text-sm font-semibold",children:"Producto (solo activos)"}),o.jsxs("select",{className:"w-full border p-2 rounded",value:he,onChange:Ce=>ue(Ce.target.value),children:[o.jsx("option",{value:"",children:"Selecciona un producto"}),oe.map(Ce=>o.jsxs("option",{value:Ce.id,children:[Ce.name,"  ",Ce.category,"  ",Ce.measurement]},Ce.id))]})]}),o.jsxs("div",{children:[o.jsx("label",{className:"block text-sm font-semibold",children:"Libras a ingresar"}),o.jsx("input",{type:"number",step:"0.01",inputMode:"decimal",className:"w-full border p-2 rounded",value:fe===0?"":fe,onChange:Ce=>{const lt=Ce.target.value.replace(",","."),nt=parseFloat(lt),Xe=Number.isFinite(nt)?parseFloat(nt.toFixed(3)):0;me(Math.max(0,Xe))},disabled:!he})]}),o.jsxs("div",{children:[o.jsx("label",{className:"block text-sm font-semibold",children:"Precio proveedor"}),o.jsx("input",{type:"number",step:"0.01",inputMode:"decimal",className:"w-full border p-2 rounded",value:Number.isNaN(ne)?"":ne,onChange:Ce=>{const lt=Ce.target.value.replace(",",".");if(lt==="")return Pe(NaN);const nt=parseFloat(lt),Xe=Number.isFinite(nt)?parseFloat(nt.toFixed(2)):NaN;Pe(Number.isFinite(Xe)?Math.max(0,Xe):NaN)},disabled:!he})]}),o.jsxs("div",{children:[o.jsx("label",{className:"block text-sm font-semibold",children:"Precio venta (editable)"}),o.jsx("input",{type:"number",step:"0.01",inputMode:"decimal",className:"w-full border p-2 rounded",value:Ie===0?"":Ie,onChange:Ce=>{const lt=Ce.target.value.replace(",","."),nt=parseFloat(lt),Xe=Number.isFinite(nt)?parseFloat(nt.toFixed(2)):0;O(Math.max(0,Xe))},disabled:!he})]})]}),o.jsx("div",{className:"flex justify-end mt-3",children:o.jsx("button",{type:"button",onClick:Me,className:"px-3 py-2 rounded bg-blue-600 text-white hover:bg-blue-700",children:"Agregar producto al pedido"})})]}),o.jsx("div",{className:"bg-white rounded border overflow-x-auto",children:o.jsxs("table",{className:"min-w-[1200px] text-xs md:text-sm",children:[o.jsx("thead",{className:"bg-gray-100",children:o.jsxs("tr",{className:"whitespace-nowrap",children:[o.jsx("th",{className:"p-2 border",children:"Producto"}),o.jsx("th",{className:"p-2 border",children:"Libras ingresadas"}),o.jsx("th",{className:"p-2 border",children:"Libras restantes"}),o.jsx("th",{className:"p-2 border",children:"Precio proveedor"}),o.jsx("th",{className:"p-2 border",children:"Precio venta"}),o.jsx("th",{className:"p-2 border",children:"Total facturado"}),o.jsx("th",{className:"p-2 border",children:"Total esperado"}),o.jsx("th",{className:"p-2 border",children:"Utilidad bruta"}),o.jsx("th",{className:"p-2 border",children:"Acciones"})]})}),o.jsx("tbody",{children:H.length===0?o.jsx("tr",{children:o.jsx("td",{colSpan:9,className:"p-4 text-center text-gray-500",children:"No hay productos agregados."})}):H.map(Ce=>o.jsxs("tr",{className:"text-center whitespace-nowrap",children:[o.jsxs("td",{className:"p-2 border text-left",children:[Ce.productName,o.jsxs("div",{className:"text-[11px] text-gray-500",children:[Ce.category,"  ",Ce.unit]})]}),o.jsx("td",{className:"p-2 border",children:o.jsx("input",{type:"number",step:"0.01",inputMode:"decimal",className:"w-28 border p-1 rounded text-right",value:Ce.quantity,onChange:lt=>{const nt=lt.target.value.replace(",","."),Xe=parseFloat(nt),It=Number.isFinite(Xe)?parseFloat(Xe.toFixed(3)):0;ve(Ce.tempId,"quantity",It)}})}),o.jsx("td",{className:"p-2 border",children:Number(Ce.remaining||0).toFixed(3)}),o.jsx("td",{className:"p-2 border",children:o.jsx("input",{type:"number",step:"0.01",inputMode:"decimal",className:"w-28 border p-1 rounded text-right",value:Ce.purchasePrice,onChange:lt=>{const nt=lt.target.value.replace(",","."),Xe=parseFloat(nt),It=Number.isFinite(Xe)?parseFloat(Xe.toFixed(2)):0;ve(Ce.tempId,"purchasePrice",It)}})}),o.jsx("td",{className:"p-2 border",children:o.jsx("input",{type:"number",step:"0.01",inputMode:"decimal",className:"w-28 border p-1 rounded text-right",value:Ce.salePrice,onChange:lt=>{const nt=lt.target.value.replace(",","."),Xe=parseFloat(nt),It=Number.isFinite(Xe)?parseFloat(Xe.toFixed(2)):0;ve(Ce.tempId,"salePrice",It)}})}),o.jsx("td",{className:"p-2 border",children:Zi(Ce.invoiceTotal)}),o.jsx("td",{className:"p-2 border",children:Zi(Ce.expectedTotal)}),o.jsx("td",{className:"p-2 border",children:Zi(Ce.utilidadBruta)}),o.jsx("td",{className:"p-2 border",children:o.jsx("button",{type:"button",className:"px-2 py-1 rounded bg-red-600 text-white hover:bg-red-700 text-xs",onClick:()=>Le(Ce.tempId),children:"Quitar"})})]},Ce.tempId))})]})}),o.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-3 mt-4",children:[o.jsxs("div",{className:"p-3 border rounded bg-gray-50",children:[o.jsx("div",{className:"text-xs text-gray-600",children:"Libras ingresadas"}),o.jsx("div",{className:"text-lg font-semibold",children:le.lbsIn.toFixed(3)}),o.jsx("div",{className:"text-xs text-gray-600 mt-2",children:"Libras restantes"}),o.jsx("div",{className:"text-lg font-semibold",children:le.lbsRem.toFixed(3)})]}),o.jsxs("div",{className:"p-3 border rounded bg-gray-50",children:[o.jsx("div",{className:"text-xs text-gray-600",children:"Total facturado"}),o.jsx("div",{className:"text-lg font-semibold",children:Zi(le.totalFacturado)}),o.jsx("div",{className:"text-xs text-gray-600 mt-2",children:"Total esperado"}),o.jsx("div",{className:"text-lg font-semibold",children:Zi(le.totalEsperado)}),o.jsx("div",{className:"text-xs text-gray-600 mt-2",children:"Utilidad bruta"}),o.jsx("div",{className:"text-lg font-semibold",children:Zi(le.utilidadBruta)})]})]}),o.jsxs("div",{className:"flex justify-end gap-2 mt-4",children:[o.jsx("button",{type:"button",className:"px-4 py-2 rounded bg-gray-200 hover:bg-gray-300",onClick:()=>E(!1),children:"Cancelar"}),o.jsx("button",{type:"button",className:"bg-blue-600 text-white px-4 py-2 rounded hover:bg-blue-700",onClick:rt,disabled:H.length===0,children:M?"Editar pedido":"Crear pedido"})]})]})]}),document.body),L&&ge&&zc.createPortal(o.jsxs("div",{className:"fixed inset-0 z-[75] flex items-center justify-center",children:[o.jsx("div",{className:"absolute inset-0 bg-black/40",onClick:()=>{Z(!1),U(null)}}),o.jsxs("div",{className:"relative bg-white rounded-lg shadow-2xl border w-[96%] max-w-6xl max-h-[92vh] overflow-auto p-4",children:[o.jsxs("div",{className:"flex items-center justify-between mb-2",children:[o.jsxs("div",{children:[o.jsx("h3",{className:"text-lg font-bold",children:"Detalle del pedido"}),o.jsxs("div",{className:"text-sm text-gray-600",children:[o.jsx("strong",{children:ge.orderName})," "," ",ge.date]})]}),o.jsx("button",{className:"px-3 py-1 rounded bg-gray-200 hover:bg-gray-300",onClick:()=>{Z(!1),U(null)},type:"button",children:"Cerrar"})]}),o.jsx("div",{className:"bg-white rounded border overflow-x-auto",children:o.jsxs("table",{className:"min-w-[1100px] text-xs md:text-sm",children:[o.jsx("thead",{className:"bg-gray-100",children:o.jsxs("tr",{className:"whitespace-nowrap",children:[o.jsx("th",{className:"p-2 border",children:"Producto"}),o.jsx("th",{className:"p-2 border",children:"Unidad"}),o.jsx("th",{className:"p-2 border",children:"Ingresado"}),o.jsx("th",{className:"p-2 border",children:"Restantes"}),o.jsx("th",{className:"p-2 border",children:"Precio Compra"}),o.jsx("th",{className:"p-2 border",children:"Precio Venta"}),o.jsx("th",{className:"p-2 border",children:"Total factura"}),o.jsx("th",{className:"p-2 border",children:"Total esperado"}),o.jsx("th",{className:"p-2 border",children:"Utilidad"}),o.jsx("th",{className:"p-2 border",children:"Estado"})]})}),o.jsx("tbody",{children:ge.items.map(Ce=>{const lt=Number(Ce.invoiceTotal||0),nt=Number(Ce.expectedTotal||0);return o.jsxs("tr",{className:"text-center whitespace-nowrap",children:[o.jsx("td",{className:"p-2 border text-left",children:Ce.productName}),o.jsx("td",{className:"p-2 border",children:(Ce.unit||"").toUpperCase()}),o.jsx("td",{className:"p-2 border",children:Ce.quantity.toFixed(3)}),o.jsx("td",{className:"p-2 border",children:Ce.remaining.toFixed(3)}),o.jsx("td",{className:"p-2 border",children:Zi(Ce.purchasePrice)}),o.jsx("td",{className:"p-2 border",children:Zi(Ce.salePrice)}),o.jsx("td",{className:"p-2 border",children:Zi(lt)}),o.jsx("td",{className:"p-2 border",children:Zi(nt)}),o.jsx("td",{className:"p-2 border",children:Zi(nt-lt)}),o.jsx("td",{className:"p-2 border",children:Ce.status})]},Ce.id)})})]})}),o.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-3 mt-4",children:[o.jsxs("div",{className:"p-3 border rounded bg-gray-50",children:[o.jsx("div",{className:"text-xs text-gray-600",children:"Libras ingresadas"}),o.jsx("div",{className:"text-lg font-semibold",children:ge.lbsIn.toFixed(3)})]}),o.jsxs("div",{className:"p-3 border rounded bg-gray-50",children:[o.jsx("div",{className:"text-xs text-gray-600",children:"Libras restantes"}),o.jsx("div",{className:"text-lg font-semibold",children:ge.lbsRem.toFixed(3)})]}),o.jsxs("div",{className:"p-3 border rounded bg-gray-50",children:[o.jsx("div",{className:"text-xs text-gray-600",children:"Utilidad bruta"}),o.jsx("div",{className:"text-lg font-semibold",children:Zi(ge.utilidadBruta)})]})]})]})]}),document.body),Ge&&J&&zc.createPortal(o.jsxs("div",{className:"fixed inset-0 z-[80] flex items-center justify-center",children:[o.jsx("div",{className:"absolute inset-0 bg-black/50",onClick:He}),o.jsxs("div",{className:"relative bg-white rounded-xl shadow-2xl border w-[90%] max-w-md p-6",children:[o.jsx("h3",{className:"text-lg font-bold mb-3 text-center",children:"Confirmar pago de inventario"}),o.jsxs("p",{className:"text-sm text-gray-700 mb-5 text-center",children:["Seguro que quieres pagar este pedido?",o.jsx("br",{}),o.jsx("strong",{children:J.orderName})," "," ",J.date,o.jsx("br",{}),"Ya no habrn libras disponibles al pagar este inventario."]}),o.jsxs("div",{className:"flex justify-center gap-4",children:[o.jsx("button",{onClick:xe,className:"px-4 py-2 rounded-lg bg-green-600 text-white hover:bg-green-700",children:"Confirmar"}),o.jsx("button",{onClick:He,className:"px-4 py-2 rounded-lg bg-gray-300 hover:bg-gray-400",children:"Cancelar"})]})]})]}),document.body)]})}const Yf=t=>`C$${(Number(t)||0).toFixed(2)}`;function XSe(){const t=dye(new Date),[e,r]=v.useState(Sr(t,"yyyy-MM")),[n,a]=v.useState([]),[s,i]=v.useState(!1),[l,c]=v.useState(""),u=v.useRef(null),d=v.useMemo(()=>{const[g,x]=e.split("-").map(w=>parseInt(w,10)),y=Sr(Qd(new Date(g,x-1,1)),"yyyy-MM-dd"),b=Sr(Ud(new Date(g,x-1,1)),"yyyy-MM-dd");return{from:y,to:b}},[e]),f=async()=>{i(!0);try{const g=await SSe(d.from,d.to),x=[];for(const y of g){const b=qt(ke,"inventory_batches",y.batchId),w=await ui(b);if(!w.exists())continue;const j=w.data();x.push({batchId:y.batchId,batchDate:y.batchDate,productName:y.productName,soldQty:Number(y.quantity||0),soldAmount:Number(y.amountCharged||0),status:j.status??"PENDIENTE",purchasePrice:Number(j.purchasePrice||0),salePrice:Number(j.salePrice||0),supplier:j.supplier})}a(x)}catch(g){console.error(g),c(" Error al cargar liquidaciones")}finally{i(!1)}};v.useEffect(()=>{f()},[e]);const h=async g=>{confirm("Marcar este lote como PAGADO?")&&(await ite(g),a(y=>y.map(b=>b.batchId===g?{...b,status:"PAGADO"}:b)))},A=v.useMemo(()=>{const g=n.reduce((w,j)=>w+j.soldQty,0),x=n.reduce((w,j)=>w+j.soldAmount,0),y=n.reduce((w,j)=>w+j.soldQty*j.purchasePrice,0),b=x-y;return{q:g,amt:x,cogs:y,profit:b}},[n]),m=v.useMemo(()=>{const g=new Map;for(const x of n){const y=x.productName||"(sin nombre)";g.has(y)||g.set(y,{productName:y,qty:0,revenue:0,cogs:0,profit:0});const b=g.get(y);b.qty+=x.soldQty,b.revenue+=x.soldAmount;const w=x.soldQty*x.purchasePrice;b.cogs+=w,b.profit=b.revenue-b.cogs}return Array.from(g.values()).sort((x,y)=>x.productName.localeCompare(y.productName))},[n]),p=async()=>{if(!u.current)return;const g=u.current;g.classList.add("force-pdf-colors");try{const[{default:x},{jsPDF:y}]=await Promise.all([EA(()=>Promise.resolve().then(()=>k6),void 0),EA(()=>Promise.resolve().then(()=>qT),void 0)]),w=(await x(g,{backgroundColor:"#ffffff",scale:2})).toDataURL("image/png"),j=new y("p","mm","a4"),I=190,_=j.getImageProperties(w),E=I,S=_.height*E/_.width;j.addImage(w,"PNG",10,10,E,S),j.save(`liquidaciones_${e}.pdf`)}catch(x){console.error(x),alert("No se pudo generar el PDF")}finally{g.classList.remove("force-pdf-colors")}};return o.jsxs("div",{className:"max-w-6xl mx-auto",children:[o.jsxs("div",{className:"flex items-center justify-between gap-3 mb-3",children:[o.jsx("h2",{className:"text-2xl font-bold",children:"Liquidaciones por lote"}),o.jsx("button",{onClick:p,className:"bg-green-600 text-white px-3 py-1 rounded hover:bg-green-700",children:"Descargar PDF"})]}),o.jsxs("div",{className:"bg-white p-3 rounded shadow border mb-4 flex flex-wrap items-center gap-3",children:[o.jsx("label",{className:"text-sm font-semibold",children:"Mes:"}),o.jsx("input",{type:"month",className:"border rounded px-2 py-1",value:e,onChange:g=>r(g.target.value)}),o.jsx("button",{onClick:f,className:"bg-gray-800 text-white px-3 py-1 rounded",children:"Aplicar"})]}),o.jsxs("div",{ref:u,children:[o.jsx("div",{className:"bg-white p-3 rounded shadow border mb-3 text-sm",children:o.jsxs("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-2",children:[o.jsxs("div",{children:[o.jsx("span",{className:"font-semibold",children:"Total vendido (cantidad):"})," ",A.q]}),o.jsxs("div",{children:[o.jsx("span",{className:"font-semibold",children:"Monto vendido:"})," ",Yf(A.amt)]}),o.jsxs("div",{children:[o.jsx("span",{className:"font-semibold",children:"Costo (COGS):"})," ",Yf(A.cogs)]}),o.jsxs("div",{children:[o.jsx("span",{className:"font-semibold",children:"Utilidad:"})," ",Yf(A.profit)]})]})}),o.jsx("div",{className:"bg-white p-2 rounded shadow border overflow-x-auto mb-6",children:o.jsxs("table",{className:"min-w-full text-sm",children:[o.jsx("thead",{className:"bg-gray-100",children:o.jsxs("tr",{children:[o.jsx("th",{className:"p-2 border",children:"Lote (fecha)"}),o.jsx("th",{className:"p-2 border",children:"Producto"}),o.jsx("th",{className:"p-2 border",children:"Proveedor"}),o.jsx("th",{className:"p-2 border",children:"Vendido"}),o.jsx("th",{className:"p-2 border",children:"Monto vendido"}),o.jsx("th",{className:"p-2 border",children:"COGS"}),o.jsx("th",{className:"p-2 border",children:"Utilidad"}),o.jsx("th",{className:"p-2 border",children:"Estado"}),o.jsx("th",{className:"p-2 border",children:"Acciones"})]})}),o.jsx("tbody",{children:s?o.jsx("tr",{children:o.jsx("td",{colSpan:9,className:"p-4 text-center",children:"Cargando"})}):n.length===0?o.jsx("tr",{children:o.jsx("td",{colSpan:9,className:"p-4 text-center",children:"Sin datos"})}):n.map(g=>{const x=g.soldQty*g.purchasePrice,y=g.soldAmount-x;return o.jsxs("tr",{className:"text-center",children:[o.jsx("td",{className:"p-2 border",children:g.batchDate}),o.jsx("td",{className:"p-2 border",children:g.productName}),o.jsx("td",{className:"p-2 border",children:g.supplier||"-"}),o.jsx("td",{className:"p-2 border",children:g.soldQty}),o.jsx("td",{className:"p-2 border",children:Yf(g.soldAmount)}),o.jsx("td",{className:"p-2 border",children:Yf(x)}),o.jsx("td",{className:`p-2 border ${y>=0?"text-green-700":"text-red-700"}`,children:Yf(y)}),o.jsx("td",{className:"p-2 border",children:o.jsx("span",{className:`px-2 py-0.5 rounded text-xs ${g.status==="PAGADO"?"bg-green-100 text-green-700":"bg-yellow-100 text-yellow-700"}`,children:g.status})}),o.jsx("td",{className:"p-2 border",children:g.status==="PENDIENTE"&&o.jsx("button",{onClick:()=>h(g.batchId),className:"px-2 py-1 rounded text-white bg-green-600 hover:bg-green-700",children:"Marcar pagado"})})]},g.batchId)})})]})}),o.jsx("h3",{className:"font-semibold mb-2",children:"Utilidad por producto"}),o.jsx("div",{className:"bg-white p-2 rounded shadow border overflow-x-auto",children:o.jsxs("table",{className:"min-w-full text-sm",children:[o.jsx("thead",{className:"bg-gray-100",children:o.jsxs("tr",{children:[o.jsx("th",{className:"p-2 border",children:"Producto"}),o.jsx("th",{className:"p-2 border",children:"Cantidad vendida"}),o.jsx("th",{className:"p-2 border",children:"Ingreso"}),o.jsx("th",{className:"p-2 border",children:"COGS"}),o.jsx("th",{className:"p-2 border",children:"Utilidad"})]})}),o.jsx("tbody",{children:m.length===0?o.jsx("tr",{children:o.jsx("td",{colSpan:5,className:"p-4 text-center",children:"Sin datos"})}):m.map(g=>o.jsxs("tr",{className:"text-center",children:[o.jsx("td",{className:"p-2 border",children:g.productName}),o.jsx("td",{className:"p-2 border",children:g.qty}),o.jsx("td",{className:"p-2 border",children:Yf(g.revenue)}),o.jsx("td",{className:"p-2 border",children:Yf(g.cogs)}),o.jsx("td",{className:`p-2 border ${g.profit>=0?"text-green-700":"text-red-700"}`,children:Yf(g.profit)})]},g.productName))})]})})]}),l&&o.jsx("p",{className:"mt-2 text-sm",children:l})]})}const Qs=t=>`C$${Number(t??0).toFixed(2)}`,YSe=()=>Sr(new Date,"yyyy-MM-dd"),Jf=t=>Number(t||0).toFixed(3);function JSe(){const[t,e]=v.useState(()=>{const R=new Date,M=new Date(R.getFullYear(),R.getMonth(),1);return Sr(M,"yyyy-MM-dd")}),[r,n]=v.useState(YSe()),[a,s]=v.useState(!0),[i,l]=v.useState([]),[c,u]=v.useState([]),{refreshKey:d,refresh:f}=xc(),[h,A]=v.useState({}),[m,p]=v.useState({}),[g,x]=v.useState(!1),y=()=>x(R=>!R),[b,w]=v.useState(!1),j=()=>w(R=>!R),[I,_]=v.useState(!1),E=()=>_(R=>!R),[S,k]=v.useState("");v.useEffect(()=>{(async()=>{s(!0);const M=nr(ht(ke,"salesV2"),cr("date",">=",t),cr("date","<=",r)),K=await Ot(M),W=[];K.forEach(ge=>{const U=ge.data(),Ge=U.date??"";if(Array.isArray(U.items)&&U.items.length>0){U.items.forEach((ie,J)=>{const je=String(ie.productName??"(sin nombre)"),z=Number(ie.qty??0),Ae=Number(ie.lineFinal??0)||Math.max(0,Number(ie.unitPrice||0)*z-Number(ie.discount||0));W.push({id:`${ge.id}#${J}`,date:Ge,productName:je,quantity:z,amount:Ae,allocations:Array.isArray(ie.allocations)?ie.allocations:U.allocations,avgUnitCost:Number(ie.avgUnitCost??U.avgUnitCost??0),measurement:ie.measurement??U.measurement??""})});return}W.push({id:ge.id,date:Ge,productName:U.productName??"(sin nombre)",quantity:Number(U.quantity??0),amount:Number(U.amount??U.amountCharged??0),allocations:Array.isArray(U.allocations)?U.allocations:[],avgUnitCost:Number(U.avgUnitCost??0),measurement:U.measurement??""})}),l(W);const D=nr(ht(ke,"expenses"),cr("date",">=",t),cr("date","<=",r)),L=await Ot(D),Z=[];L.forEach(ge=>{const U=ge.data();Z.push({id:ge.id,date:U.date??"",category:U.category??"(sin categora)",description:U.description??"",amount:Number(U.amount??0),status:U.status??"PAGADO",createdAt:U.createdAt})}),u(Z),s(!1)})()},[t,r,d]),v.useMemo(()=>{const R=i.reduce((L,Z)=>L+(Z.amount||0),0);let M=0;i.forEach(L=>{var Z;(Z=L.allocations)!=null&&Z.length?M+=L.allocations.reduce((ge,U)=>ge+Number(U.lineCost||0),0):L.avgUnitCost&&L.quantity&&(M+=Number(L.avgUnitCost)*Number(L.quantity))});const K=R-M,W=c.reduce((L,Z)=>L+(Z.amount||0),0),D=K-W;return{revenue:R,cogsReal:M,grossProfit:K,expensesSum:W,netProfit:D}},[i,c]);const P=v.useMemo(()=>S?i.filter(R=>(R.productName||"")===S):i,[i,S]),T=v.useMemo(()=>{const R=P.reduce((L,Z)=>L+(Z.amount||0),0);let M=0;P.forEach(L=>{var Z;(Z=L.allocations)!=null&&Z.length?M+=L.allocations.reduce((ge,U)=>ge+Number(U.lineCost||0),0):L.avgUnitCost&&L.quantity&&(M+=Number(L.avgUnitCost)*Number(L.quantity))});const K=R-M,W=c.reduce((L,Z)=>L+(Z.amount||0),0),D=K-W;return{revenue:R,cogsReal:M,grossProfit:K,expensesSum:W,netProfit:D}},[P,c]),F=R=>String(R??"").toLowerCase().trim(),Y=R=>Number(R.qty??R.quantity??0),he=R=>["lb","lbs","libra","libras"].includes(F(R)),ue=R=>["unidad","unidades","ud","uds","pieza","piezas"].includes(F(R));v.useMemo(()=>i.reduce((R,M)=>he(M.measurement)?R+Y(M):R,0),[i]);const fe=v.useMemo(()=>P.reduce((R,M)=>he(M.measurement)?R+Y(M):R,0),[P]);v.useMemo(()=>i.reduce((R,M)=>ue(M.measurement)?R+Y(M):R,0),[i]);const me=v.useMemo(()=>P.reduce((R,M)=>ue(M.measurement)?R+Y(M):R,0),[P]),ne=v.useMemo(()=>Array.from(new Set(i.map(R=>R.productName||"(sin nombre)"))).sort(),[i]),Pe=v.useMemo(()=>{var M;const R=new Map;for(const K of P){const W=K.productName||"(sin nombre)";R.has(W)||R.set(W,{productName:W,units:0,revenue:0,cogs:0,profit:0,firstDate:K.date||"",lastDate:K.date||""});const D=R.get(W);D.units+=Number(K.quantity||0),D.revenue+=Number(K.amount||0),(!D.firstDate||K.date<(D.firstDate||K.date))&&(D.firstDate=K.date),(!D.lastDate||K.date>(D.lastDate||K.date))&&(D.lastDate=K.date);let L=0;(M=K.allocations)!=null&&M.length?L=K.allocations.reduce((Z,ge)=>Z+Number(ge.lineCost||0),0):K.avgUnitCost&&(L=Number(K.avgUnitCost)*Number(K.quantity||0)),D.cogs+=L,D.profit=D.revenue-D.cogs}return Array.from(R.values()).sort((K,W)=>K.productName.localeCompare(W.productName))},[P]),Ie=v.useMemo(()=>[...Pe].sort((R,M)=>M.units-R.units).slice(0,3).map((R,M)=>({idx:M+1,name:R.productName,units:R.units})),[Pe]),O=R=>A(M=>({...M,[R]:!M[R]})),H=R=>p(M=>({...M,[R]:!M[R]}));return o.jsxs("div",{className:"max-w-7xl mx-auto bg-white p-4 sm:p-6 rounded-2xl shadow-2xl",children:[o.jsxs("div",{className:"flex items-center justify-between mb-3 gap-2",children:[o.jsx("h2",{className:"text-xl sm:text-2xl font-bold",children:"Dashboard Financiero"}),o.jsx(gc,{onClick:f,loading:a})]}),o.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-2 gap-2 mb-4",children:[o.jsxs("div",{children:[o.jsx("label",{className:"block text-sm text-gray-600 mb-1",children:"Desde"}),o.jsx("input",{type:"date",className:"border rounded px-3 py-2 w-full",value:t,onChange:R=>e(R.target.value)})]}),o.jsxs("div",{children:[o.jsx("label",{className:"block text-sm text-gray-600 mb-1",children:"Hasta"}),o.jsx("input",{type:"date",className:"border rounded px-3 py-2 w-full",value:r,onChange:R=>n(R.target.value)})]})]}),a?o.jsx("p",{children:"Cargando"}):o.jsxs(o.Fragment,{children:[o.jsxs("div",{className:"mb-3",children:[o.jsx("div",{className:"flex gap-2 mb-2 items-center",children:o.jsxs("select",{className:"w-full border rounded px-2 py-2 text-sm",value:S,onChange:R=>k(R.target.value),children:[o.jsx("option",{value:"",children:"Todos los productos"}),ne.map(R=>o.jsx("option",{value:R,children:R},R))]})}),o.jsxs("div",{className:"md:hidden",children:[o.jsxs("button",{type:"button",onClick:E,className:"w-full text-left px-3 py-3 flex items-center justify-between border rounded-2xl bg-white",children:[o.jsxs("div",{children:[o.jsx("div",{className:"font-semibold",children:"KPIs"}),o.jsxs("div",{className:"text-xs text-gray-600",children:["Ventas: ",o.jsx("b",{children:Qs(T.revenue)}),"  Utilidad Neta:"," ",o.jsx("b",{children:Qs(T.netProfit)})]})]}),o.jsx("div",{className:"text-gray-500",children:I?"":""})]}),I&&o.jsxs("div",{className:"mt-3 space-y-3",children:[o.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-5 gap-3 rounded-2xl shadow-lg p-3 sm:p-4 bg-gray-50",children:[o.jsx(rf,{title:"Ventas",value:Qs(T.revenue)}),o.jsx(rf,{title:"Costo",value:Qs(T.cogsReal)}),o.jsx(rf,{title:"Ganancia Bruta",value:Qs(T.grossProfit),positive:!0}),o.jsx(rf,{title:"Gastos",value:Qs(T.expensesSum)}),o.jsx(rf,{title:"Ganancia Neta",value:Qs(T.netProfit),positive:!0})]}),o.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-3 gap-3 rounded-lg shadow-2xl p-3 sm:p-4 bg-gray-50",children:[o.jsx(cC,{title:"Libras Vendidas",value:Jf(fe)}),o.jsx(cC,{title:"Unidades Vendidas",value:Jf(me)}),o.jsx(KQ,{title:"Productos ms vendidos",items:Ie.map(R=>({key:`${R.idx}`,label:`${R.idx}. ${R.name}`,value:`(${Jf(R.units)})`}))})]})]})]})]}),o.jsxs("div",{className:"hidden md:grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-5 gap-3 mb-3 rounded-2xl shadow-lg p-3 sm:p-4 bg-gray-50",children:[o.jsx(rf,{title:"Ventas",value:Qs(T.revenue)}),o.jsx(rf,{title:"Costo",value:Qs(T.cogsReal)}),o.jsx(rf,{title:"Ganancia Bruta",value:Qs(T.grossProfit),positive:!0}),o.jsx(rf,{title:"Gastos",value:Qs(T.expensesSum)}),o.jsx(rf,{title:"Ganancia Neta",value:Qs(T.netProfit),positive:!0})]}),o.jsxs("div",{className:"hidden md:grid grid-cols-1 sm:grid-cols-3 gap-3 mb-6 rounded-lg shadow-2xl p-3 sm:p-4 bg-gray-50",children:[o.jsx(cC,{title:"Libras Vendidas",value:Jf(fe)}),o.jsx(cC,{title:"Unidades Vendidas",value:Jf(me)}),o.jsx(KQ,{title:"Productos ms vendidos",items:Ie.map(R=>({key:`${R.idx}`,label:`${R.idx}. ${R.name}`,value:`(${Jf(R.units)})`}))})]}),o.jsx("h3",{className:"font-semibold mb-2",children:"Consolidado por producto"}),o.jsx("div",{className:"hidden md:block",children:o.jsxs("table",{className:"min-w-full border text-sm mb-6",children:[o.jsx("thead",{className:"bg-gray-100",children:o.jsxs("tr",{children:[o.jsx("th",{className:"border p-2",children:"Producto"}),o.jsx("th",{className:"border p-2",children:"Fechas"}),o.jsx("th",{className:"border p-2",children:"Total libras/unidades"}),o.jsx("th",{className:"border p-2",children:"Ingreso"}),o.jsx("th",{className:"border p-2",children:"Costo"}),o.jsx("th",{className:"border p-2",children:"Utilidad"})]})}),o.jsxs("tbody",{children:[Pe.map(R=>o.jsxs("tr",{className:"text-center",children:[o.jsx("td",{className:"border p-1",children:R.productName}),o.jsx("td",{className:"border p-1",children:R.firstDate&&R.lastDate?R.firstDate===R.lastDate?R.firstDate:`${R.firstDate}  ${R.lastDate}`:""}),o.jsx("td",{className:"border p-1",children:Jf(R.units)}),o.jsx("td",{className:"border p-1",children:Qs(R.revenue)}),o.jsx("td",{className:"border p-1",children:Qs(R.cogs)}),o.jsx("td",{className:`border p-1 ${R.profit>=0?"text-green-700":"text-red-700"}`,children:Qs(R.profit)})]},R.productName)),Pe.length===0&&o.jsx("tr",{children:o.jsx("td",{colSpan:6,className:"p-3 text-center text-gray-500",children:"Sin datos en el rango seleccionado."})})]})]})}),o.jsxs("div",{className:"md:hidden mb-6",children:[o.jsxs("button",{type:"button",onClick:y,className:"w-full text-left px-3 py-3 flex items-center justify-between border rounded-2xl bg-white",children:[o.jsxs("div",{children:[o.jsx("div",{className:"font-semibold",children:"Consolidado por producto"}),o.jsxs("div",{className:"text-xs text-gray-600",children:[Pe.length," productos"]})]}),o.jsx("div",{className:"text-gray-500",children:g?"":""})]}),g&&o.jsx("div",{className:"space-y-2 mt-3",children:Pe.length===0?o.jsx("div",{className:"border rounded-xl p-3 text-sm text-gray-500 bg-gray-50",children:"Sin datos en el rango seleccionado."}):Pe.map(R=>{const M=!!h[R.productName],K=R.firstDate&&R.lastDate?R.firstDate===R.lastDate?R.firstDate:`${R.firstDate}  ${R.lastDate}`:"";return o.jsxs("div",{className:"border rounded-2xl bg-white shadow-sm overflow-hidden",children:[o.jsxs("button",{type:"button",onClick:()=>O(R.productName),className:"w-full text-left px-3 py-3 flex items-start gap-3",children:[o.jsxs("div",{className:"flex-1 min-w-0",children:[o.jsx("div",{className:"font-semibold truncate",children:R.productName}),o.jsxs("div",{className:"text-xs text-gray-600 mt-1",children:["Total: ",o.jsx("b",{children:Jf(R.units)}),"  Utilidad:"," ",o.jsx("b",{className:R.profit>=0?"text-green-700":"text-red-700",children:Qs(R.profit)})]})]}),o.jsx("div",{className:"text-gray-500 text-sm pt-0.5",children:M?"":""})]}),M&&o.jsx("div",{className:"px-3 pb-3 text-sm",children:o.jsxs("div",{className:"grid grid-cols-2 gap-2",children:[o.jsx(nf,{label:"Fechas",value:K}),o.jsx(nf,{label:"Total",value:Jf(R.units)}),o.jsx(nf,{label:"Ingreso",value:Qs(R.revenue)}),o.jsx(nf,{label:"Costo",value:Qs(R.cogs)}),o.jsx(nf,{label:"Utilidad",value:Qs(R.profit),valueClass:R.profit>=0?"text-green-700 font-semibold":"text-red-700 font-semibold"})]})})]},R.productName)})})]}),o.jsx("h3",{className:"font-semibold mb-2",children:"Gastos del periodo"}),o.jsx("div",{className:"hidden md:block",children:o.jsxs("table",{className:"min-w-full border text-sm",children:[o.jsx("thead",{className:"bg-gray-100",children:o.jsxs("tr",{children:[o.jsx("th",{className:"border p-2",children:"Fecha"}),o.jsx("th",{className:"border p-2",children:"Categora"}),o.jsx("th",{className:"border p-2",children:"Descripcin"}),o.jsx("th",{className:"border p-2",children:"Monto"}),o.jsx("th",{className:"border p-2",children:"Estado"})]})}),o.jsxs("tbody",{children:[c.map(R=>o.jsxs("tr",{className:"text-center",children:[o.jsx("td",{className:"border p-1",children:R.date}),o.jsx("td",{className:"border p-1",children:R.category}),o.jsx("td",{className:"border p-1",children:R.description}),o.jsx("td",{className:"border p-1",children:Qs(R.amount)}),o.jsx("td",{className:"border p-1",children:o.jsx("span",{className:`px-2 py-0.5 rounded text-xs ${R.status==="PAGADO"?"bg-green-100 text-green-700":"bg-yellow-100 text-yellow-700"}`,children:R.status})})]},R.id)),c.length===0&&o.jsx("tr",{children:o.jsx("td",{colSpan:5,className:"p-3 text-center text-gray-500",children:"Sin gastos en el rango seleccionado."})})]})]})}),o.jsxs("div",{className:"md:hidden mb-6",children:[o.jsxs("button",{type:"button",onClick:j,className:"w-full text-left px-3 py-3 flex items-center justify-between border rounded-2xl bg-white",children:[o.jsxs("div",{children:[o.jsx("div",{className:"font-semibold",children:"Gastos del periodo"}),o.jsxs("div",{className:"text-xs text-gray-600",children:[c.length," registros"]})]}),o.jsx("div",{className:"text-gray-500",children:b?"":""})]}),b&&o.jsx("div",{className:"space-y-2 mt-3",children:c.length===0?o.jsx("div",{className:"border rounded-xl p-3 text-sm text-gray-500 bg-gray-50",children:"Sin gastos en el rango seleccionado."}):c.map(R=>{const M=!!m[R.id],K=R.status==="PAGADO"?"bg-green-100 text-green-700":"bg-yellow-100 text-yellow-700";return o.jsxs("div",{className:"border rounded-2xl bg-white shadow-sm overflow-hidden",children:[o.jsxs("button",{type:"button",onClick:()=>H(R.id),className:"w-full text-left px-3 py-3 flex items-start gap-3",children:[o.jsxs("div",{className:"flex-1 min-w-0",children:[o.jsxs("div",{className:"flex items-center gap-2",children:[o.jsx("div",{className:"font-semibold truncate",children:R.category}),o.jsx("span",{className:`px-2 py-0.5 rounded text-[11px] ${K}`,children:R.status})]}),o.jsxs("div",{className:"text-xs text-gray-600 mt-1",children:[R.date,"  ",o.jsx("b",{children:Qs(R.amount)})]})]}),o.jsx("div",{className:"text-gray-500 text-sm pt-0.5",children:M?"":""})]}),M&&o.jsx("div",{className:"px-3 pb-3 text-sm",children:o.jsxs("div",{className:"grid grid-cols-1 gap-2",children:[o.jsx(nf,{label:"Fecha",value:R.date}),o.jsx(nf,{label:"Categora",value:R.category}),o.jsx(nf,{label:"Descripcin",value:R.description||""}),o.jsx(nf,{label:"Monto",value:Qs(R.amount)}),o.jsx(nf,{label:"Estado",value:R.status||""})]})})]},R.id)})})]})]})]})}function rf({title:t,value:e,positive:r}){return o.jsxs("div",{className:"border rounded-2xl p-3 bg-white",children:[o.jsx("div",{className:"text-[13px] sm:text-[17px] text-gray-500",children:t}),o.jsx("div",{className:`text-[26px] sm:text-[30px] font-bold ${r?"text-green-700":""}`,children:e})]})}function cC({title:t,value:e}){return o.jsxs("div",{className:"border rounded-lg p-3 bg-white",children:[o.jsx("div",{className:"text-[13px] sm:text-[17px] text-gray-500",children:t}),o.jsx("div",{className:"text-[18px] sm:text-[20px] font-semibold",children:e})]})}function KQ({title:t,items:e}){return o.jsxs("div",{className:"border rounded-lg p-3 bg-white",children:[o.jsx("div",{className:"text-[11px] text-gray-500 mb-1",children:t}),o.jsx("ul",{className:"text-sm leading-snug list-none pl-0 m-0 space-y-0.5",children:e.length===0?o.jsx("li",{className:"text-gray-500",children:""}):e.map(r=>o.jsxs("li",{children:[r.label," ",r.value??""]},r.key))})]})}function nf({label:t,value:e,valueClass:r}){return o.jsxs("div",{className:"border rounded-xl p-2 bg-gray-50",children:[o.jsx("div",{className:"text-[11px] text-gray-600",children:t}),o.jsx("div",{className:`text-sm mt-0.5 ${r||""}`,children:e})]})}const uC=["Energia","Bolsas","Detergentes","Limpieza de Freezer","Delivery","Pago a Personal","Varios"],Mg=t=>`C$ ${(Number(t)||0).toFixed(2)}`;function ZSe(){const{refreshKey:t,refresh:e}=xc(),[r,n]=v.useState(Sr(Qd(new Date),"yyyy-MM-dd")),[a,s]=v.useState(Sr(Ud(new Date),"yyyy-MM-dd")),[i,l]=v.useState(Sr(new Date,"yyyy-MM-dd")),[c,u]=v.useState(""),[d,f]=v.useState(""),[h,A]=v.useState(0),[m,p]=v.useState("PENDIENTE"),[g,x]=v.useState(""),[y,b]=v.useState([]),[w,j]=v.useState(!0),[I,_]=v.useState(""),[E,S]=v.useState(null),[k,P]=v.useState(""),[T,F]=v.useState(""),[Y,he]=v.useState(""),[ue,fe]=v.useState(0),[me,ne]=v.useState("PENDIENTE"),[Pe,Ie]=v.useState(""),[O,H]=v.useState(!1),R=()=>H(z=>!z),[M,K]=v.useState(null),W=z=>K(Ae=>Ae===z?null:z);v.useEffect(()=>{(async()=>{j(!0),_("");try{const z=nr(ht(ke,"expenses"),on("date","desc")),Ae=await Ot(z),ye=[];Ae.forEach(Qe=>{const st=Qe.data();ye.push({id:Qe.id,date:st.date||Sr(new Date,"yyyy-MM-dd"),category:st.category||"",description:st.description||"",amount:Number(st.amount||0),status:st.status||"PENDIENTE",notes:st.notes||"",createdAt:st.createdAt??fr.now()})}),b(ye)}catch(z){console.error(z),_(" Error al cargar gastos")}finally{j(!1)}})()},[t]);const D=v.useMemo(()=>y.filter(z=>!(r&&z.date<r||a&&z.date>a)),[y,r,a]),L=v.useMemo(()=>{const z=D.reduce((Qe,st)=>Qe+(st.amount||0),0),Ae=D.filter(Qe=>Qe.status==="PAGADO").reduce((Qe,st)=>Qe+(st.amount||0),0),ye=z-Ae;return{total:z,pagado:Ae,pendiente:ye}},[D]),Z=()=>{l(Sr(new Date,"yyyy-MM-dd")),u(""),f(""),A(0),p("PENDIENTE"),x("")},ge=async z=>{if(z.preventDefault(),_(""),!c)return _("Selecciona una categora.");if(!d.trim())return _("Ingresa una descripcin.");if(!h||h<=0)return _("Ingresa un monto vlido.");try{const Ae={date:i,category:c,description:d.trim(),amount:Number(Number(h||0).toFixed(2)),status:m,notes:g||"",createdAt:fr.now()},ye=await xn(ht(ke,"expenses"),Ae);b(Qe=>[{id:ye.id,...Ae},...Qe]),Z(),_(" Gasto registrado")}catch(Ae){console.error(Ae),_(" Error al guardar gasto")}},U=z=>{_(""),S(z.id),P(z.date),F(z.category||""),he(z.description||""),fe(Number(z.amount||0)),ne(z.status||"PENDIENTE"),Ie(z.notes||"")},Ge=()=>{S(null),P(""),F(""),he(""),fe(0),ne("PENDIENTE"),Ie("")},ie=async()=>{if(E){if(!T)return _("Selecciona una categora.");if(!Y.trim())return _("Ingresa una descripcin.");if(!ue||ue<=0)return _("Ingresa un monto vlido.");try{const z={date:k,category:T,description:Y.trim(),amount:Number(Number(ue||0).toFixed(2)),status:me,notes:Pe||""};await nn(qt(ke,"expenses",E),z),b(Ae=>Ae.map(ye=>ye.id===E?{...ye,...z}:ye)),Ge(),_(" Gasto actualizado")}catch(z){console.error(z),_(" Error al actualizar gasto")}}},J=async z=>{if(confirm(`Eliminar el gasto "${z.description}"?`))try{await Cn(qt(ke,"expenses",z.id)),b(ye=>ye.filter(Qe=>Qe.id!==z.id)),_(" Gasto borrado")}catch(ye){console.error(ye),_(" Error al borrar gasto")}},je=z=>z==="PAGADO"?"bg-green-100 text-green-700":"bg-yellow-100 text-yellow-700";return o.jsxs("div",{className:"max-w-6xl mx-auto px-3 sm:px-0",children:[o.jsxs("div",{className:"flex items-center justify-between mb-3",children:[o.jsx("h2",{className:"text-2xl font-bold",children:"Gastos (Pollo)"}),o.jsx(gc,{onClick:e,loading:w})]}),o.jsxs("div",{className:"bg-white p-3 rounded-2xl shadow-2xl border mb-4 flex flex-col sm:flex-row sm:items-end gap-3 text-sm",children:[o.jsxs("div",{className:"flex gap-3",children:[o.jsxs("div",{className:"flex flex-col",children:[o.jsx("label",{className:"font-semibold",children:"Desde"}),o.jsx("input",{type:"date",className:"border rounded px-2 py-1",value:r,onChange:z=>n(z.target.value)})]}),o.jsxs("div",{className:"flex flex-col",children:[o.jsx("label",{className:"font-semibold",children:"Hasta"}),o.jsx("input",{type:"date",className:"border rounded px-2 py-1",value:a,onChange:z=>s(z.target.value)})]})]}),o.jsxs("div",{className:"sm:ml-auto text-sm bg-gray-50 border rounded-xl p-3",children:[o.jsx("div",{className:"font-semibold",children:"Totales del rango"}),o.jsxs("div",{children:["Total: ",Mg(L.total)]}),o.jsxs("div",{children:["Pagado: ",Mg(L.pagado)]}),o.jsxs("div",{children:["Pendiente: ",Mg(L.pendiente)]})]})]}),o.jsxs("div",{className:"md:hidden mb-4",children:[o.jsxs("button",{type:"button",onClick:R,className:"w-full text-left px-3 py-3 flex items-center justify-between bg-white border rounded-2xl",children:[o.jsxs("div",{children:[o.jsx("div",{className:"font-semibold",children:"Crear gasto"}),o.jsxs("div",{className:"text-xs text-gray-600",children:["Fecha: ",i,"  Monto: ",h===0?"":Mg(h)]})]}),o.jsx("div",{className:"text-gray-500",children:O?"":""})]}),O&&o.jsxs("form",{onSubmit:ge,className:"mt-3 bg-white p-4 rounded-2xl shadow-2xl border grid grid-cols-1 gap-4",children:[o.jsxs("div",{children:[o.jsx("label",{className:"block text-sm font-semibold",children:"Fecha"}),o.jsx("input",{type:"date",className:"w-full border p-2 rounded",value:i,onChange:z=>l(z.target.value)})]}),o.jsxs("div",{children:[o.jsx("label",{className:"block text-sm font-semibold",children:"Categora"}),o.jsxs("select",{className:"w-full border p-2 rounded",value:c,onChange:z=>u(z.target.value),children:[o.jsx("option",{value:"",children:"Selecciona"}),uC.map(z=>o.jsx("option",{value:z,children:z},z))]})]}),o.jsxs("div",{children:[o.jsx("label",{className:"block text-sm font-semibold",children:"Descripcin"}),o.jsx("input",{className:"w-full border p-2 rounded",placeholder:"Detalle del gasto",value:d,onChange:z=>f(z.target.value)})]}),o.jsxs("div",{children:[o.jsx("label",{className:"block text-sm font-semibold",children:"Monto"}),o.jsx("input",{type:"number",step:"0.01",inputMode:"decimal",className:"w-full border p-2 rounded text-right",value:h===0?"":h,onChange:z=>{const Ae=String(z.target.value||"").replace(",","."),ye=parseFloat(Ae);A(Number.isFinite(ye)?Math.max(0,ye):0)},placeholder:"0.00"})]}),o.jsxs("div",{children:[o.jsx("label",{className:"block text-sm font-semibold",children:"Estado"}),o.jsxs("select",{className:"w-full border p-2 rounded",value:m,onChange:z=>p(z.target.value),children:[o.jsx("option",{value:"PENDIENTE",children:"Pendiente"}),o.jsx("option",{value:"PAGADO",children:"Pagado"})]})]}),o.jsxs("div",{children:[o.jsx("label",{className:"block text-sm font-semibold",children:"Comentario"}),o.jsx("textarea",{className:"w-full border p-2 rounded resize-y min-h-24",value:g,onChange:z=>x(z.target.value),maxLength:500,placeholder:"Comentario / nota opcional"}),o.jsxs("div",{className:"text-xs text-gray-500 text-right",children:[g.length,"/500"]})]}),o.jsxs("div",{className:"flex gap-2",children:[o.jsx("button",{className:"bg-blue-600 text-white px-4 py-2 rounded hover:bg-blue-700",children:"Guardar gasto"}),o.jsx("button",{type:"button",className:"bg-gray-200 px-4 py-2 rounded hover:bg-gray-300",onClick:Z,children:"Limpiar"})]})]})]}),o.jsx("div",{className:"hidden md:block",children:o.jsxs("form",{onSubmit:ge,className:"bg-white p-4 rounded-2xl shadow-2xl border mb-6 grid grid-cols-1 md:grid-cols-2 gap-4",children:[o.jsxs("div",{children:[o.jsx("label",{className:"block text-sm font-semibold",children:"Fecha"}),o.jsx("input",{type:"date",className:"w-full border p-2 rounded",value:i,onChange:z=>l(z.target.value)})]}),o.jsxs("div",{children:[o.jsx("label",{className:"block text-sm font-semibold",children:"Categora"}),o.jsxs("select",{className:"w-full border p-2 rounded",value:c,onChange:z=>u(z.target.value),children:[o.jsx("option",{value:"",children:"Selecciona"}),uC.map(z=>o.jsx("option",{value:z,children:z},z))]})]}),o.jsxs("div",{className:"md:col-span-2",children:[o.jsx("label",{className:"block text-sm font-semibold",children:"Descripcin"}),o.jsx("input",{className:"w-full border p-2 rounded",placeholder:"Detalle del gasto",value:d,onChange:z=>f(z.target.value)})]}),o.jsxs("div",{children:[o.jsx("label",{className:"block text-sm font-semibold",children:"Monto"}),o.jsx("input",{type:"number",step:"0.01",inputMode:"decimal",className:"w-full border p-2 rounded text-right",value:h===0?"":h,onChange:z=>{const Ae=String(z.target.value||"").replace(",","."),ye=parseFloat(Ae);A(Number.isFinite(ye)?Math.max(0,ye):0)},placeholder:"0.00"})]}),o.jsxs("div",{children:[o.jsx("label",{className:"block text-sm font-semibold",children:"Estado"}),o.jsxs("select",{className:"w-full border p-2 rounded",value:m,onChange:z=>p(z.target.value),children:[o.jsx("option",{value:"PENDIENTE",children:"Pendiente"}),o.jsx("option",{value:"PAGADO",children:"Pagado"})]})]}),o.jsxs("div",{className:"md:col-span-2",children:[o.jsx("label",{className:"block text-sm font-semibold",children:"Comentario"}),o.jsx("textarea",{className:"w-full border p-2 rounded resize-y min-h-24",value:g,onChange:z=>x(z.target.value),maxLength:500,placeholder:"Comentario / nota opcional"}),o.jsxs("div",{className:"text-xs text-gray-500 text-right",children:[g.length,"/500"]})]}),o.jsxs("div",{className:"md:col-span-2 flex gap-2",children:[o.jsx("button",{className:"bg-blue-600 text-white px-4 py-2 rounded hover:bg-blue-700",children:"Guardar gasto"}),o.jsx("button",{type:"button",className:"bg-gray-200 px-4 py-2 rounded hover:bg-gray-300",onClick:Z,children:"Limpiar"})]})]})}),o.jsx("div",{className:"block md:hidden space-y-3",children:w?o.jsx("div",{className:"p-4 text-center bg-white rounded-xl border shadow",children:"Cargando"}):D.length===0?o.jsx("div",{className:"p-4 text-center bg-white rounded-xl border shadow",children:"Sin gastos en el rango seleccionado."}):D.map(z=>{const Ae=M===z.id,ye=E===z.id;return o.jsxs("div",{className:"bg-white border rounded-2xl overflow-hidden",children:[o.jsxs("button",{type:"button",className:"w-full text-left px-3 py-3 flex items-start justify-between bg-white",onClick:()=>W(z.id),children:[o.jsxs("div",{className:"min-w-0",children:[o.jsx("div",{className:"font-semibold truncate",children:z.description}),o.jsxs("div",{className:"text-xs text-gray-500",children:[z.category||"","  ",z.date]})]}),o.jsxs("div",{className:"text-right",children:[o.jsx("div",{className:"font-bold",children:Mg(z.amount)}),o.jsx("span",{className:`px-2 py-0.5 rounded text-xs ${je(z.status)}`,children:z.status})]})]}),Ae&&o.jsxs("div",{className:"p-3",children:[o.jsx("div",{className:"mt-2 text-xs text-gray-600",children:z.notes?z.notes:""}),ye?o.jsxs("div",{className:"mt-3 grid grid-cols-1 gap-2 text-sm",children:[o.jsx("input",{type:"date",className:"w-full border p-2 rounded",value:k,onChange:Qe=>P(Qe.target.value)}),o.jsxs("select",{className:"w-full border p-2 rounded",value:T,onChange:Qe=>F(Qe.target.value),children:[o.jsx("option",{value:"",children:"Selecciona"}),uC.map(Qe=>o.jsx("option",{value:Qe,children:Qe},Qe))]}),o.jsx("input",{className:"w-full border p-2 rounded",value:Y,onChange:Qe=>he(Qe.target.value)}),o.jsx("input",{type:"number",step:"0.01",inputMode:"decimal",className:"w-full border p-2 rounded text-right",value:Number.isNaN(ue)?"":ue,onChange:Qe=>{const st=String(Qe.target.value||"").replace(",","."),ut=parseFloat(st);fe(Number.isFinite(ut)?Math.max(0,ut):0)}}),o.jsxs("select",{className:"w-full border p-2 rounded",value:me,onChange:Qe=>ne(Qe.target.value),children:[o.jsx("option",{value:"PENDIENTE",children:"Pendiente"}),o.jsx("option",{value:"PAGADO",children:"Pagado"})]}),o.jsx("textarea",{className:"w-full border p-2 rounded resize-y min-h-20",value:Pe,onChange:Qe=>Ie(Qe.target.value),maxLength:500}),o.jsxs("div",{className:"flex gap-2",children:[o.jsx("button",{type:"button",className:"flex-1 px-3 py-2 rounded text-white bg-blue-600 hover:bg-blue-700",onClick:ie,children:"Guardar"}),o.jsx("button",{type:"button",className:"flex-1 px-3 py-2 rounded bg-gray-200 hover:bg-gray-300",onClick:Ge,children:"Cancelar"})]})]}):o.jsxs("div",{className:"mt-3 flex gap-2",children:[o.jsx("button",{type:"button",className:"flex-1 px-3 py-2 rounded text-white bg-yellow-600 hover:bg-yellow-700",onClick:()=>U(z),children:"Editar"}),o.jsx("button",{type:"button",className:"flex-1 px-3 py-2 rounded text-white bg-red-600 hover:bg-red-700",onClick:()=>J(z),children:"Borrar"})]})]})]},z.id)})}),o.jsx("div",{className:"hidden md:block bg-white p-2 rounded-2xl shadow-2xl border w-full",children:o.jsxs("table",{className:"min-w-full w-full text-sm",children:[o.jsx("thead",{className:"bg-gray-100",children:o.jsxs("tr",{children:[o.jsx("th",{className:"p-2 border",children:"Fecha"}),o.jsx("th",{className:"p-2 border",children:"Categora"}),o.jsx("th",{className:"p-2 border",children:"Descripcin"}),o.jsx("th",{className:"p-2 border",children:"Monto"}),o.jsx("th",{className:"p-2 border",children:"Estado"}),o.jsx("th",{className:"p-2 border",children:"Comentario"}),o.jsx("th",{className:"p-2 border",children:"Acciones"})]})}),o.jsx("tbody",{children:w?o.jsx("tr",{children:o.jsx("td",{className:"p-4 text-center",colSpan:7,children:"Cargando"})}):D.length===0?o.jsx("tr",{children:o.jsx("td",{className:"p-4 text-center",colSpan:7,children:"Sin gastos en el rango seleccionado."})}):D.map(z=>{const Ae=E===z.id;return o.jsxs("tr",{className:"text-center",children:[o.jsx("td",{className:"p-2 border",children:Ae?o.jsx("input",{type:"date",className:"w-full border p-1 rounded",value:k,onChange:ye=>P(ye.target.value)}):z.date}),o.jsx("td",{className:"p-2 border",children:Ae?o.jsxs("select",{className:"w-full border p-1 rounded",value:T,onChange:ye=>F(ye.target.value),children:[o.jsx("option",{value:"",children:"Selecciona"}),uC.map(ye=>o.jsx("option",{value:ye,children:ye},ye))]}):z.category||""}),o.jsx("td",{className:"p-2 border",children:Ae?o.jsx("input",{className:"w-full border p-1 rounded",value:Y,onChange:ye=>he(ye.target.value)}):o.jsx("span",{title:z.description,children:z.description.length>45?z.description.slice(0,45)+"":z.description})}),o.jsx("td",{className:"p-2 border",children:Ae?o.jsx("input",{type:"number",step:"0.01",inputMode:"decimal",className:"w-full border p-1 rounded text-right",value:Number.isNaN(ue)?"":ue,onChange:ye=>{const Qe=String(ye.target.value||"").replace(",","."),st=parseFloat(Qe);fe(Number.isFinite(st)?Math.max(0,st):0)}}):Mg(z.amount)}),o.jsx("td",{className:"p-2 border",children:Ae?o.jsxs("select",{className:"w-full border p-1 rounded",value:me,onChange:ye=>ne(ye.target.value),children:[o.jsx("option",{value:"PENDIENTE",children:"Pendiente"}),o.jsx("option",{value:"PAGADO",children:"Pagado"})]}):o.jsx("span",{className:`px-2 py-0.5 rounded text-xs ${je(z.status)}`,children:z.status})}),o.jsx("td",{className:"p-2 border",children:Ae?o.jsx("textarea",{className:"w-full border p-1 rounded resize-y min-h-10",value:Pe,onChange:ye=>Ie(ye.target.value),maxLength:500}):o.jsx("span",{title:z.notes||"",children:(z.notes||"").length>45?(z.notes||"").slice(0,45)+"":z.notes||""})}),o.jsx("td",{className:"p-2 border",children:o.jsx("div",{className:"flex gap-2 justify-center",children:Ae?o.jsxs(o.Fragment,{children:[o.jsx("button",{type:"button",className:"px-2 py-1 rounded text-white bg-blue-600 hover:bg-blue-700",onClick:ie,children:"Guardar"}),o.jsx("button",{type:"button",className:"px-2 py-1 rounded bg-gray-200 hover:bg-gray-300",onClick:Ge,children:"Cancelar"})]}):o.jsxs(o.Fragment,{children:[o.jsx("button",{type:"button",className:"px-2 py-1 rounded text-white bg-yellow-600 hover:bg-yellow-700",onClick:()=>U(z),children:"Editar"}),o.jsx("button",{type:"button",className:"px-2 py-1 rounded text-white bg-red-600 hover:bg-red-700",onClick:()=>J(z),children:"Borrar"})]})})})]},z.id)})})]})}),I&&o.jsx("p",{className:"mt-2 text-sm",children:I})]})}function rS(t){return(t||"").trim().toLowerCase()}async function dte(){const t=await Ot(ht(ke,"products")),e=new Map;return t.forEach(r=>{const n=r.data(),a=rS(n.name??n.productName);a&&e.set(a,r.id)}),e}async function eIe(t=!1){const e=await dte(),r=await Ot(ht(ke,"inventory_batches")),n={checked:0,fixed:0,alreadyOk:0,missingName:0,withoutMatch:0,details:[]};for(const a of r.docs){n.checked++;const s=a.data(),i=rS(s.productName);if(!i){n.missingName++,n.details.push({batchId:a.id,productName:s.productName??"",oldProductId:s.productId,status:"missingName"});continue}const l=e.get(i);if(!l){n.withoutMatch++,n.details.push({batchId:a.id,productName:s.productName??"",oldProductId:s.productId,status:"withoutMatch"});continue}if(s.productId===l){n.alreadyOk++,n.details.push({batchId:a.id,productName:s.productName??"",oldProductId:s.productId,newProductId:l,status:"alreadyOk"});continue}t||await nn(qt(ke,"inventory_batches",a.id),{productId:l}),n.fixed++,n.details.push({batchId:a.id,productName:s.productName??"",oldProductId:s.productId,newProductId:l,status:"fixed"})}return console.group("[fixAllBatchProductIds] Resultado"),console.log("checked:",n.checked),console.log("fixed:",n.fixed),console.log("alreadyOk:",n.alreadyOk),console.log("missingName:",n.missingName),console.log("withoutMatch:",n.withoutMatch),console.groupEnd(),n}async function tIe(t,e=!1){const r=rS(t),a=(await dte()).get(r);if(!a)throw new Error(`No existe un producto activo con nombre "${t}".`);const s=await Ot(ht(ke,"inventory_batches"));let i=0;for(const l of s.docs){const c=l.data();rS(c.productName)===r&&c.productId!==a&&(e||await nn(qt(ke,"inventory_batches",l.id),{productId:a}),i++)}return console.log(`[fixBatchesByProductName] "${t}" fixed: ${i} lote(s)`),i}function rIe(){const[t,e]=v.useState(!1),[r,n]=v.useState(""),a=async()=>{try{e(!0),n("");const c=await eIe(!1);n(` Hecho. Revisados: ${c.checked}, Corregidos: ${c.fixed}, Ok: ${c.alreadyOk}, Sin nombre: ${c.missingName}, Sin match: ${c.withoutMatch}. (Mira consola para detalles)`)}catch(c){n(" Error: "+((c==null?void 0:c.message)||c))}finally{e(!1)}},[s,i]=v.useState(""),l=async()=>{if(!s.trim()){n(" Escribe el nombre del producto.");return}try{e(!0),n("");const c=await tIe(s.trim(),!1);n(` Hecho. Corregidos ${c} lote(s) para "${s}".`)}catch(c){n(" Error: "+((c==null?void 0:c.message)||c))}finally{e(!1)}};return o.jsxs("div",{className:"max-w-xl mx-auto bg-white p-6 rounded shadow border space-y-4",children:[o.jsx("h1",{className:"text-xl font-bold",children:"Herramienta de Migracin de Lotes"}),o.jsxs("p",{className:"text-sm text-gray-600",children:["Corrige los ",o.jsx("code",{children:"inventory_batches.productId"})," basndose en el nombre del producto. salo una sola vez para limpiar datos viejos. Revisa la consola para un log detallado."]}),o.jsx("div",{className:"space-y-2",children:o.jsx("button",{onClick:a,disabled:t,className:"bg-blue-600 text-white px-4 py-2 rounded disabled:opacity-60",children:t?"Corriendo":"Corregir TODOS los lotes"})}),o.jsx("hr",{}),o.jsxs("div",{className:"space-y-2",children:[o.jsx("label",{className:"block text-sm font-medium",children:"Corregir por nombre:"}),o.jsx("input",{className:"border p-2 rounded w-full",placeholder:'Ej: "Pierna Entera"',value:s,onChange:c=>i(c.target.value)}),o.jsx("button",{onClick:l,disabled:t,className:"bg-indigo-600 text-white px-4 py-2 rounded disabled:opacity-60",children:t?"Corriendo":"Corregir lotes de ese producto"})]}),r&&o.jsx("p",{className:"text-sm",children:r})]})}const Tc=t=>`C$${Number(t||0).toFixed(2)}`,Lg=t=>Number(t||0).toFixed(3),nIe=t=>(t||"").toLowerCase()==="lb"||/libra/.test((t||"").toLowerCase()),D5=()=>{const t=new Date;return Sr(new Date(t.getFullYear(),t.getMonth(),1),"yyyy-MM-dd")},dC=()=>Sr(new Date,"yyyy-MM-dd");function aIe({paidBatches:t=[],onClose:e,onCreated:r}){const n=Array.isArray(t)?t:[],[a,s]=v.useState(D5()),[i,l]=v.useState(dC()),[c,u]=v.useState(""),d=v.useMemo(()=>{const ve=new Map;return n.forEach(le=>ve.set(le.productId,{id:le.productId,name:le.productName})),Array.from(ve.values()).sort((le,Ue)=>le.name.localeCompare(Ue.name))},[n]),f=v.useMemo(()=>n.filter(ve=>!(a&&ve.date<a||i&&ve.date>i||c&&ve.productId!==c)),[n,a,i,c]),[h,A]=v.useState(dC()),[m,p]=v.useState(()=>`FAC-${Date.now().toString().slice(-6)}`),[g,x]=v.useState(""),[y,b]=v.useState([]);v.useEffect(()=>{b(ve=>{const le=ve.filter(Ue=>f.some(rt=>rt.id===Ue));return le.length===0&&f.length>0?f.map(Ue=>Ue.id):le})},[f]);const[w,j]=v.useState([]),[I,_]=v.useState([]),[E,S]=v.useState(!1),[k,P]=v.useState(D5()),[T,F]=v.useState(dC());v.useEffect(()=>{(async()=>{try{S(!0);const ve=nr(ht(ke,"expenses"),on("date","desc")),le=await Ot(ve),Ue=[];le.forEach(rt=>{const mt=rt.data();Ue.push({id:rt.id,date:mt.date,description:mt.description,amount:Number(mt.amount||0)})}),j(Ue)}catch(ve){console.error(ve)}finally{S(!1)}})()},[]);const Y=v.useMemo(()=>w.filter(ve=>!(!ve.date||k&&ve.date<k||T&&ve.date>T)),[w,k,T]),[he,ue]=v.useState([]),[fe,me]=v.useState(!1),[ne,Pe]=v.useState(""),[Ie,O]=v.useState("DEBITO"),[H,R]=v.useState(""),M=()=>{const ve=Number(H);!ne.trim()||!isFinite(ve)||ve<=0||(ue(le=>[...le,{id:`${Date.now()}_${le.length+1}`,description:ne.trim(),type:Ie,amount:Number(ve.toFixed(2))}]),Pe(""),R(""))},[K,W]=v.useState(null),[D,L]=v.useState(""),[Z,ge]=v.useState("DEBITO"),[U,Ge]=v.useState(""),ie=ve=>{W(ve.id),L(ve.description),ge(ve.type),Ge(ve.amount.toFixed(2))},J=()=>{W(null),L(""),ge("DEBITO"),Ge("")},je=()=>{if(!K)return;const ve=Number(U);!isFinite(ve)||ve<=0||(ue(le=>le.map(Ue=>Ue.id===K?{...Ue,description:D.trim(),type:Z,amount:Number(ve.toFixed(2))}:Ue)),J())},z=ve=>{ue(le=>le.filter(Ue=>Ue.id!==ve)),K===ve&&J()},Ae=(ve,le)=>{b(Ue=>le?[...new Set([...Ue,ve])]:Ue.filter(rt=>rt!==ve))},ye=ve=>{b(ve?f.map(le=>le.id):[])},Qe=(ve,le)=>{_(Ue=>le?[...new Set([...Ue,ve])]:Ue.filter(rt=>rt!==ve))},st=v.useMemo(()=>f.filter(ve=>y.includes(ve.id)),[f,y]),ut=v.useMemo(()=>he.filter(ve=>ve.type==="DEBITO").reduce((ve,le)=>ve+le.amount,0),[he]),De=v.useMemo(()=>he.filter(ve=>ve.type==="CREDITO").reduce((ve,le)=>ve+le.amount,0),[he]),it=v.useMemo(()=>{let ve=0,le=0,Ue=0,rt=0;for(const Ct of st){nIe(Ct.unit)?ve+=Number(Ct.quantity||0):le+=Number(Ct.quantity||0);const jt=Ct.expectedTotal??Number((Number(Ct.quantity||0)*Number(Ct.salePrice||0)).toFixed(2)),xe=Ct.invoiceTotal!==void 0&&Ct.invoiceTotal!==null?Number(Ct.invoiceTotal):Number((Number(Ct.quantity||0)*Number(Ct.purchasePrice||0)).toFixed(2));Ue+=Number(jt||0),rt+=Number(xe||0)}const mt=Y.filter(Ct=>I.includes(Ct.id)).reduce((Ct,jt)=>Ct+Number(jt.amount||0),0),gt=Ue-mt-ut+De;return{totalLbs:ve,totalUnits:le,totalExpected:Number(Ue.toFixed(2)),totalInvoiced:Number(rt.toFixed(2)),totalGastos:Number(mt.toFixed(2)),debits:Number(ut.toFixed(2)),credits:Number(De.toFixed(2)),finalAmount:Number(gt.toFixed(2)),grossProfit:Number((Ue-rt).toFixed(2))}},[st,Y,I,ut,De]),[dt,ce]=v.useState(!1),[oe,Me]=v.useState(""),Le=async()=>{if(Me(""),st.length===0){Me("Selecciona al menos 1 lote pagado.");return}try{ce(!0);const ve={number:m.trim(),date:h,description:g.trim(),status:"PENDIENTE",createdAt:fr.now(),totalLbs:Number(Lg(it.totalLbs)),totalUnits:Number(Lg(it.totalUnits)),totalAmount:it.totalExpected,invoiceTotal:it.totalInvoiced,totalExpenses:it.totalGastos,totalDebits:it.debits,totalCredits:it.credits,finalAmount:it.finalAmount,batches:st.map(le=>{var Ue;return{id:le.id,productId:le.productId,productName:le.productName,unit:le.unit,quantity:Number(Lg(le.quantity)),salePrice:Number(Number(le.salePrice||0).toFixed(2)),purchasePrice:Number(Number(le.purchasePrice||0).toFixed(2)),expectedTotal:Number((Number(le.quantity||0)*Number(le.salePrice||0)).toFixed(2)),invoiceTotal:le.invoiceTotal!==void 0&&le.invoiceTotal!==null?Number(le.invoiceTotal):Number((Number(le.quantity||0)*Number(le.purchasePrice||0)).toFixed(2)),batchDate:le.date,paidAt:(Ue=le.paidAt)!=null&&Ue.toDate?Sr(le.paidAt.toDate(),"yyyy-MM-dd"):null}}),expenses:Y.filter(le=>I.includes(le.id)).map(le=>({id:le.id,date:le.date||null,description:le.description||"",amount:Number(Number(le.amount||0).toFixed(2))})),adjustments:he.map(le=>({id:le.id,description:le.description,type:le.type,amount:Number(le.amount.toFixed(2))}))};await xn(ht(ke,"invoices"),ve),Me(" Factura creada."),r()}catch(ve){console.error(ve),Me(` Error al crear factura: ${(ve==null?void 0:ve.message)||"desconocido"}`)}finally{ce(!1)}};return o.jsxs("div",{className:"fixed inset-0 z-[9999] bg-black/40 flex items-center justify-center p-3",children:[o.jsxs("div",{className:"bg-white w-full max-w-6xl rounded-xl shadow-xl p-4 md:p-6 max-h-[90vh] overflow-auto relative",children:[o.jsxs("div",{className:"flex items-center gap-3 mb-4",children:[o.jsx("h3",{className:"text-lg font-semibold",children:"Crear factura"}),o.jsx("button",{type:"button",onClick:e,className:"ml-auto px-2 py-1 border rounded hover:bg-gray-50",children:"Cerrar"})]}),o.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-3 mb-4",children:[o.jsxs("div",{children:[o.jsx("label",{className:"block text-sm font-medium",children:"Fecha"}),o.jsx("input",{type:"date",className:"w-full border rounded px-2 py-1",value:h,onChange:ve=>A(ve.target.value)})]}),o.jsxs("div",{children:[o.jsx("label",{className:"block text-sm font-medium",children:"Nmero"}),o.jsx("input",{type:"text",className:"w-full border rounded px-2 py-1",value:m,onChange:ve=>p(ve.target.value),placeholder:"FAC-001"})]}),o.jsxs("div",{className:"md:col-span-1",children:[o.jsx("label",{className:"block text-sm font-medium",children:"Descripcin"}),o.jsx("input",{type:"text",className:"w-full border rounded px-2 py-1",value:g,onChange:ve=>x(ve.target.value),placeholder:"Comentarios de la factura"})]})]}),o.jsx("div",{className:"bg-gray-50 border rounded p-3 mb-3",children:o.jsxs("div",{className:"flex flex-wrap items-end gap-3",children:[o.jsxs("div",{children:[o.jsx("label",{className:"block text-sm font-medium",children:"Desde (lote)"}),o.jsx("input",{type:"date",className:"border rounded px-2 py-1",value:a,onChange:ve=>s(ve.target.value)})]}),o.jsxs("div",{children:[o.jsx("label",{className:"block text-sm font-medium",children:"Hasta (lote)"}),o.jsx("input",{type:"date",className:"border rounded px-2 py-1",value:i,onChange:ve=>l(ve.target.value)})]}),o.jsxs("div",{className:"min-w-[220px]",children:[o.jsx("label",{className:"block text-sm font-medium",children:"Producto"}),o.jsxs("select",{className:"border rounded px-2 py-1 w-full",value:c,onChange:ve=>u(ve.target.value),children:[o.jsx("option",{value:"",children:"Todos"}),d.map(ve=>o.jsx("option",{value:ve.id,children:ve.name},ve.id))]})]}),o.jsx("button",{type:"button",className:"ml-auto px-3 py-1 rounded bg-gray-200 hover:bg-gray-300",onClick:()=>{s(D5()),l(dC()),u("")},children:"Quitar filtro"})]})}),o.jsxs("div",{className:"mb-4",children:[o.jsxs("div",{className:"flex items-center gap-3 mb-2",children:[o.jsx("h4",{className:"font-semibold",children:"Lotes pagados"}),o.jsxs("label",{className:"text-sm flex items-center gap-2",children:[o.jsx("input",{type:"checkbox",checked:f.length>0&&y.length===f.length,onChange:ve=>ye(ve.target.checked)}),"Seleccionar todos (sobre el filtro)"]})]}),f.length===0?o.jsx("p",{className:"text-sm text-gray-500",children:"No hay lotes pagados disponibles en el filtro actual."}):o.jsx("div",{className:"border rounded max-h-80 overflow-auto",children:o.jsxs("table",{className:"min-w-full text-sm",children:[o.jsx("thead",{className:"bg-gray-100",children:o.jsxs("tr",{children:[o.jsx("th",{className:"p-2 border",children:"Sel"}),o.jsx("th",{className:"p-2 border",children:"Fecha lote"}),o.jsx("th",{className:"p-2 border",children:"Producto"}),o.jsx("th",{className:"p-2 border",children:"Unidad"}),o.jsx("th",{className:"p-2 border",children:"Cantidad"}),o.jsx("th",{className:"p-2 border",children:"Precio venta"}),o.jsx("th",{className:"p-2 border",children:"Total facturado"}),o.jsx("th",{className:"p-2 border",children:"Total esperado"}),o.jsx("th",{className:"p-2 border",children:"Ganancia bruta"}),o.jsx("th",{className:"p-2 border",children:"Fecha pago"})]})}),o.jsx("tbody",{children:f.map(ve=>{var gt;const le=y.includes(ve.id),Ue=ve.expectedTotal??Number((Number(ve.quantity||0)*Number(ve.salePrice||0)).toFixed(2)),rt=ve.invoiceTotal!==void 0&&ve.invoiceTotal!==null?Number(ve.invoiceTotal):Number((Number(ve.quantity||0)*Number(ve.purchasePrice||0)).toFixed(2)),mt=Ue-rt;return o.jsxs("tr",{className:"text-center",children:[o.jsx("td",{className:"p-2 border",children:o.jsx("input",{type:"checkbox",checked:le,onChange:Ct=>Ae(ve.id,Ct.target.checked)})}),o.jsx("td",{className:"p-2 border",children:ve.date}),o.jsx("td",{className:"p-2 border",children:ve.productName}),o.jsx("td",{className:"p-2 border",children:(ve.unit||"").toUpperCase()}),o.jsx("td",{className:"p-2 border",children:Lg(ve.quantity)}),o.jsx("td",{className:"p-2 border",children:Tc(ve.salePrice)}),o.jsx("td",{className:"p-2 border",children:Tc(rt)}),o.jsx("td",{className:"p-2 border",children:Tc(Ue)}),o.jsx("td",{className:"p-2 border",children:Tc(mt)}),o.jsx("td",{className:"p-2 border",children:(gt=ve.paidAt)!=null&&gt.toDate?Sr(ve.paidAt.toDate(),"yyyy-MM-dd"):""})]},ve.id)})})]})})]}),o.jsxs("div",{className:"mb-4",children:[o.jsxs("div",{className:"flex items-center gap-3 mb-2",children:[o.jsx("h4",{className:"font-semibold",children:"Gastos a incluir (opcional)"}),E&&o.jsx("span",{className:"text-xs text-gray-500",children:"Cargando"}),o.jsxs("div",{className:"ml-auto flex items-end gap-3",children:[o.jsxs("div",{children:[o.jsx("label",{className:"block text-xs text-gray-600",children:"Desde (gasto)"}),o.jsx("input",{type:"date",className:"border rounded px-2 py-1",value:k,onChange:ve=>P(ve.target.value)})]}),o.jsxs("div",{children:[o.jsx("label",{className:"block text-xs text-gray-600",children:"Hasta (gasto)"}),o.jsx("input",{type:"date",className:"border rounded px-2 py-1",value:T,onChange:ve=>F(ve.target.value)})]})]})]}),Y.length===0?o.jsx("p",{className:"text-sm text-gray-500",children:"No hay gastos en el rango seleccionado."}):o.jsx("div",{className:"border rounded max-h-48 overflow-auto",children:o.jsxs("table",{className:"min-w-full text-sm",children:[o.jsx("thead",{className:"bg-gray-100",children:o.jsxs("tr",{children:[o.jsx("th",{className:"p-2 border",children:"Sel"}),o.jsx("th",{className:"p-2 border",children:"Fecha"}),o.jsx("th",{className:"p-2 border",children:"Descripcin"}),o.jsx("th",{className:"p-2 border",children:"Monto"})]})}),o.jsx("tbody",{children:Y.map(ve=>{const le=I.includes(ve.id);return o.jsxs("tr",{className:"text-center",children:[o.jsx("td",{className:"p-2 border",children:o.jsx("input",{type:"checkbox",checked:le,onChange:Ue=>Qe(ve.id,Ue.target.checked)})}),o.jsx("td",{className:"p-2 border",children:ve.date||""}),o.jsx("td",{className:"p-2 border",children:ve.description||""}),o.jsx("td",{className:"p-2 border",children:Tc(Number(ve.amount||0))})]},ve.id)})})]})})]}),o.jsxs("div",{className:"mb-4",children:[o.jsxs("div",{className:"flex items-center gap-3 mb-2",children:[o.jsx("h4",{className:"font-semibold",children:"Notas Crdito/Dbito (Cargos extras)"}),o.jsx("button",{type:"button",className:"ml-auto px-3 py-1 rounded bg-blue-600 text-white hover:bg-blue-700",onClick:()=>me(!0),children:"Crear Cargo"})]}),he.length===0?o.jsx("p",{className:"text-sm text-gray-500",children:"Sin cargos agregados."}):o.jsx("div",{className:"border rounded max-h-40 overflow-auto",children:o.jsxs("table",{className:"min-w-full text-sm",children:[o.jsx("thead",{className:"bg-gray-100",children:o.jsxs("tr",{children:[o.jsx("th",{className:"p-2 border",children:"Descripcin"}),o.jsx("th",{className:"p-2 border",children:"Tipo"}),o.jsx("th",{className:"p-2 border",children:"Monto"}),o.jsx("th",{className:"p-2 border",children:"Acciones"})]})}),o.jsx("tbody",{children:he.map(ve=>{const le=K===ve.id;return o.jsxs("tr",{className:"text-center",children:[o.jsx("td",{className:"p-2 border",children:le?o.jsx("textarea",{className:"w-full border rounded px-2 py-1 min-h-[70px]",value:D,onChange:Ue=>L(Ue.target.value)}):o.jsx("span",{title:ve.description,children:ve.description.length>60?`${ve.description.slice(0,60)}`:ve.description})}),o.jsx("td",{className:"p-2 border",children:le?o.jsxs("select",{className:"w-full border rounded px-2 py-1",value:Z,onChange:Ue=>ge(Ue.target.value),children:[o.jsx("option",{value:"DEBITO",children:"Dbito"}),o.jsx("option",{value:"CREDITO",children:"Crdito"})]}):o.jsx("span",{className:`px-2 py-0.5 rounded text-xs ${ve.type==="DEBITO"?"bg-red-100 text-red-700":"bg-green-100 text-green-700"}`,children:ve.type})}),o.jsx("td",{className:"p-2 border",children:le?o.jsx("input",{type:"number",step:"0.01",className:"w-full border rounded px-2 py-1 text-right",value:U,onChange:Ue=>Ge(Ue.target.value)}):Tc(ve.amount)}),o.jsx("td",{className:"p-2 border",children:le?o.jsxs("div",{className:"flex gap-2 justify-center",children:[o.jsx("button",{type:"button",className:"px-2 py-1 rounded bg-green-600 text-white hover:bg-green-700 text-xs",onClick:je,children:"Guardar"}),o.jsx("button",{type:"button",className:"px-2 py-1 rounded bg-gray-200 hover:bg-gray-300 text-xs",onClick:J,children:"Cancelar"}),o.jsx("button",{type:"button",className:"px-2 py-1 rounded bg-red-600 text-white hover:bg-red-700 text-xs",onClick:()=>z(ve.id),children:"Eliminar"})]}):o.jsxs("div",{className:"flex gap-2 justify-center",children:[o.jsx("button",{type:"button",className:"px-2 py-1 rounded bg-indigo-600 text-white hover:bg-indigo-700 text-xs",onClick:()=>ie(ve),children:"Editar"}),o.jsx("button",{type:"button",className:"px-2 py-1 rounded bg-red-600 text-white hover:bg-red-700 text-xs",onClick:()=>z(ve.id),children:"Eliminar"})]})})]},ve.id)})})]})})]}),o.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 text-sm mb-4 justify-between",children:[o.jsxs("div",{className:"space-y-1",children:[o.jsxs("div",{children:["Total libras: ",o.jsx("strong",{children:Lg(it.totalLbs)})]}),o.jsxs("div",{children:["Total unidades: ",o.jsx("strong",{children:Lg(it.totalUnits)})]})]}),o.jsxs("div",{className:"space-y-1 text-center",children:[o.jsxs("div",{children:["Total facturado (costo):"," ",o.jsx("strong",{children:Tc(it.totalInvoiced)})]}),o.jsxs("div",{children:["Total esperado (ventas):"," ",o.jsx("strong",{children:Tc(it.totalExpected)})]}),o.jsxs("div",{children:["Ganancia bruta (esperado  facturado):"," ",o.jsx("strong",{children:Tc(it.grossProfit)})]})]}),o.jsxs("div",{className:"space-y-1 text-right",children:[o.jsxs("div",{children:["Gastos: ",o.jsx("strong",{children:Tc(it.totalGastos)})]}),o.jsxs("div",{children:["Dbitos: ",o.jsx("strong",{children:Tc(it.debits)})]}),o.jsxs("div",{children:["Crditos: ",o.jsx("strong",{children:Tc(it.credits)})]})]}),o.jsx("div",{className:"md:col-span-3 mt-3",children:o.jsxs("div",{className:"p-3 bg-blue-50 border border-blue-200 rounded text-center font-semibold text-lg",children:["Monto final (esperado  gastos  dbitos + crditos):"," ",o.jsx("span",{className:"text-blue-700",children:Tc(it.finalAmount)})]})})]}),o.jsxs("div",{className:"flex items-center gap-2",children:[o.jsx("button",{type:"button",disabled:dt,onClick:Le,className:"bg-blue-600 text-white px-4 py-2 rounded hover:bg-blue-700 disabled:opacity-60",children:dt?"Creando":"Crear factura"}),o.jsx("button",{type:"button",onClick:e,className:"px-4 py-2 border rounded",children:"Cancelar"}),oe&&o.jsx("span",{className:"text-sm ml-2",children:oe})]}),dt&&o.jsxs("div",{className:"absolute inset-0 z-[11000] bg-white/80 backdrop-blur-sm flex flex-col items-center justify-center gap-3",children:[o.jsxs("svg",{className:"animate-spin h-8 w-8 text-blue-600",viewBox:"0 0 24 24",children:[o.jsx("circle",{className:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor",strokeWidth:"4",fill:"none"}),o.jsx("path",{className:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8v4a4 4 0 00-4 4H4z"})]}),o.jsx("div",{className:"text-sm font-medium text-blue-700",children:"Creando factura"})]})]}),fe&&o.jsx("div",{className:"fixed inset-0 z-[10000] bg-black/50 flex items-center justify-center p-3",children:o.jsxs("div",{className:"bg-white w-full max-w-lg rounded-xl shadow-xl p-4",children:[o.jsxs("div",{className:"flex items-center mb-3",children:[o.jsx("h4",{className:"font-semibold",children:"Nuevo cargo"}),o.jsx("button",{type:"button",className:"ml-auto px-2 py-1 border rounded hover:bg-gray-50",onClick:()=>me(!1),children:"Cerrar"})]}),o.jsxs("div",{className:"space-y-3",children:[o.jsxs("div",{children:[o.jsx("label",{className:"block text-sm font-medium mb-1",children:"Descripcin"}),o.jsx("textarea",{className:"w-full border rounded px-2 py-1 min-h-[90px]",value:ne,onChange:ve=>Pe(ve.target.value),placeholder:"Detalle del cargo"})]}),o.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-3",children:[o.jsxs("div",{children:[o.jsx("label",{className:"block text-sm font-medium",children:"Tipo de cargo"}),o.jsxs("select",{className:"w-full border rounded px-2 py-1",value:Ie,onChange:ve=>O(ve.target.value),children:[o.jsx("option",{value:"DEBITO",children:"Dbito"}),o.jsx("option",{value:"CREDITO",children:"Crdito"})]})]}),o.jsxs("div",{children:[o.jsx("label",{className:"block text-sm font-medium",children:"Monto"}),o.jsx("input",{type:"number",step:"0.01",className:"w-full border rounded px-2 py-1",value:H,onChange:ve=>R(ve.target.value),placeholder:"0.00"})]})]}),o.jsx("div",{className:"flex justify-end",children:o.jsx("button",{type:"button",className:"px-3 py-1 rounded bg-blue-600 text-white hover:bg-blue-700",onClick:M,children:"Agregar"})})]})]})})]})}const pu=t=>`C$ ${Number(t||0).toFixed(2)}`,Jl=t=>Number(t||0).toFixed(3),sIe=t=>(t||"").toLowerCase()==="lb"||/libra/.test((t||"").toLowerCase());function iIe(){const[t,e]=v.useState([]),[r,n]=v.useState(!0),[a,s]=v.useState(!1),[i,l]=v.useState(null),[c,u]=v.useState(Sr(new Date(new Date().getFullYear(),new Date().getMonth(),1),"yyyy-MM-dd")),[d,f]=v.useState(Sr(new Date,"yyyy-MM-dd")),[h,A]=v.useState(""),[m,p]=v.useState(!1),{refreshKey:g,refresh:x}=xc(),[y,b]=v.useState(!1),w=()=>b(F=>!F),[j,I]=v.useState(null),_=F=>I(Y=>Y===F?null:F);v.useEffect(()=>{(async()=>{n(!0);const F=nr(ht(ke,"inventory_batches"),cr("status","==","PAGADO"),on("date","desc")),Y=await Ot(F),he=[];Y.forEach(ue=>{const fe=ue.data(),me=Number(fe.quantity||0),ne=Number(fe.remaining||0),Pe=Number(fe.purchasePrice||0),Ie=Number(fe.salePrice||0),O=Number((me*Pe).toFixed(2)),H=Number((me*Ie).toFixed(2));he.push({id:ue.id,productId:fe.productId,productName:fe.productName,category:fe.category,unit:fe.unit,quantity:me,remaining:ne,purchasePrice:Pe,salePrice:Ie,invoiceTotal:fe.invoiceTotal!=null?Number(fe.invoiceTotal):O,expectedTotal:fe.expectedTotal!=null?Number(fe.expectedTotal):H,date:fe.date,status:fe.status,paidAt:fe.paidAt})}),e(he),n(!1)})()},[g]);const E=v.useMemo(()=>t.filter(F=>!(c&&F.date<c||d&&F.date>d||h&&F.productId!==h)),[t,c,d,h]),S=v.useMemo(()=>{let F=0,Y=0,he=0,ue=0,fe=0,me=0;for(const ne of E)sIe(ne.unit)?(F+=ne.quantity,Y+=ne.remaining):(he+=ne.quantity,ue+=ne.remaining),fe+=Number(ne.expectedTotal||0),me+=Number(ne.invoiceTotal||0);return{lbsIng:F,lbsRem:Y,udsIng:he,udsRem:ue,totalEsperado:fe,totalFact:me,gross:fe-me}},[E]),k=F=>{l(F),s(!0)},P=async()=>{if(i)try{const F=qt(ke,"inventory_batches",i.id);await nn(F,{status:"PENDIENTE",remaining:i.quantity});const Y=ht(ke,"salesV2"),he=await Ot(nr(Y,cr("batchId","==",i.id))),ue=await Ot(nr(Y,cr("productName","==",i.productName),cr("date","==",i.date))),fe=[...he.docs,...ue.docs];for(const me of fe)await Cn(qt(ke,"salesV2",me.id));s(!1),l(null),x()}catch(F){console.error("Error al marcar pendiente:",F)}},T=v.useMemo(()=>{const F=new Map;return t.forEach(Y=>F.set(Y.productId,{id:Y.productId,name:Y.productName})),Array.from(F.values()).sort((Y,he)=>Y.name.localeCompare(he.name))},[t]);return o.jsxs("div",{className:"max-w-7xl mx-auto px-3 sm:px-0",children:[o.jsxs("div",{className:"flex items-center justify-between mb-3",children:[o.jsx("h2",{className:"text-2xl font-bold",children:"Pagados"}),o.jsx(gc,{onClick:x,loading:r})]}),o.jsxs("div",{className:"bg-white p-3 rounded-2xl shadow-2xl border mb-4 flex flex-col sm:flex-row sm:items-end gap-3 text-sm",children:[o.jsxs("div",{className:"flex flex-wrap gap-3",children:[o.jsxs("div",{className:"flex flex-col",children:[o.jsx("label",{className:"font-semibold",children:"Desde"}),o.jsx("input",{type:"date",className:"border rounded px-2 py-1",value:c,onChange:F=>u(F.target.value)})]}),o.jsxs("div",{className:"flex flex-col",children:[o.jsx("label",{className:"font-semibold",children:"Hasta"}),o.jsx("input",{type:"date",className:"border rounded px-2 py-1",value:d,onChange:F=>f(F.target.value)})]}),o.jsxs("div",{className:"flex flex-col min-w-[240px]",children:[o.jsx("label",{className:"font-semibold",children:"Producto"}),o.jsxs("select",{className:"border rounded px-2 py-1",value:h,onChange:F=>A(F.target.value),children:[o.jsx("option",{value:"",children:"Todos"}),T.map(F=>o.jsx("option",{value:F.id,children:F.name},F.id))]})]}),o.jsx("button",{type:"button",className:"px-3 py-1 rounded-2xl bg-gray-200 hover:bg-gray-300",onClick:()=>{u(""),f(""),A("")},children:"Quitar filtro"})]}),o.jsx("button",{type:"button",className:"sm:ml-auto px-3 py-2 rounded-2xl bg-blue-600 text-white hover:bg-blue-700",onClick:()=>p(!0),children:"Crear factura"})]}),o.jsxs("div",{className:"mb-3",children:[o.jsxs("div",{className:"md:hidden",children:[o.jsxs("button",{type:"button",onClick:w,className:"w-full text-left px-3 py-3 flex items-center justify-between border rounded-2xl bg-white",children:[o.jsxs("div",{children:[o.jsx("div",{className:"font-semibold",children:"Totales"}),o.jsxs("div",{className:"text-xs text-gray-600",children:["Libras: ",o.jsx("b",{children:Jl(S.lbsIng)}),"  Restantes:"," ",o.jsx("b",{children:Jl(S.lbsRem)})]})]}),o.jsx("div",{className:"text-gray-500",children:y?"":""})]}),y&&o.jsx("div",{className:"mt-3 bg-gray-50 p-3 rounded-2xl shadow-2xl border text-base",children:o.jsxs("div",{className:"grid grid-cols-2 gap-y-2 gap-x-8",children:[o.jsxs("div",{children:[o.jsx("span",{className:"font-semibold",children:"Libras ingresadas:"})," ",Jl(S.lbsIng)]}),o.jsxs("div",{children:[o.jsx("span",{className:"font-semibold",children:"Unidades ingresadas:"})," ",Jl(S.udsIng)]}),o.jsxs("div",{children:[o.jsx("span",{className:"font-semibold",children:"Total esperado en ventas:"})," ",pu(S.totalEsperado)]}),o.jsxs("div",{children:[o.jsx("span",{className:"font-semibold",children:"Libras restantes:"})," ",Jl(S.lbsRem)]}),o.jsxs("div",{children:[o.jsx("span",{className:"font-semibold",children:"Unidades restantes:"})," ",Jl(S.udsRem)]}),o.jsxs("div",{children:[o.jsx("span",{className:"font-semibold",children:"Total facturado:"})," ",pu(S.totalFact)]}),o.jsxs("div",{className:"col-span-2",children:[o.jsx("span",{className:"font-semibold",children:"Ganancia sin gastos:"})," ",pu(S.gross)]}),o.jsxs("div",{children:[o.jsx("span",{className:"font-semibold",children:"Cantidad de Lotes:"})," ",E.length.toLocaleString()]})]})})]}),o.jsx("div",{className:"hidden md:block bg-gray-50 p-3 rounded-2xl shadow-2xl border mb-3 text-base",children:o.jsxs("div",{className:"grid grid-cols-2 gap-y-2 gap-x-8",children:[o.jsxs("div",{children:[o.jsx("span",{className:"font-semibold",children:"Libras ingresadas:"})," ",Jl(S.lbsIng)]}),o.jsxs("div",{children:[o.jsx("span",{className:"font-semibold",children:"Unidades ingresadas:"})," ",Jl(S.udsIng)]}),o.jsxs("div",{children:[o.jsx("span",{className:"font-semibold",children:"Total esperado en ventas:"})," ",pu(S.totalEsperado)]}),o.jsxs("div",{children:[o.jsx("span",{className:"font-semibold",children:"Libras restantes:"})," ",Jl(S.lbsRem)]}),o.jsxs("div",{children:[o.jsx("span",{className:"font-semibold",children:"Unidades restantes:"})," ",Jl(S.udsRem)]}),o.jsxs("div",{children:[o.jsx("span",{className:"font-semibold",children:"Total facturado:"})," ",pu(S.totalFact)]}),o.jsxs("div",{className:"col-span-2",children:[o.jsx("span",{className:"font-semibold",children:"Ganancia sin gastos:"})," ",pu(S.gross)]}),o.jsxs("div",{children:[o.jsx("span",{className:"font-semibold",children:"Cantidad de Lotes:"})," ",E.length.toLocaleString()]})]})})]}),o.jsx("div",{className:"block md:hidden space-y-3",children:r?o.jsx("div",{className:"p-4 text-center bg-white rounded-xl border shadow",children:"Cargando"}):E.length===0?o.jsx("div",{className:"p-4 text-center bg-white rounded-xl border shadow",children:"Sin lotes pagados"}):E.map(F=>{var he;const Y=j===F.id;return o.jsxs("div",{className:"bg-white border rounded-2xl overflow-hidden",children:[o.jsxs("button",{type:"button",onClick:()=>_(F.id),className:"w-full text-left px-3 py-3 flex items-center justify-between bg-white",children:[o.jsxs("div",{className:"min-w-0",children:[o.jsx("div",{className:"font-semibold truncate",children:F.productName}),o.jsxs("div",{className:"text-xs text-gray-500 truncate",children:[(F.category||"").toUpperCase(),"  ",F.date," "," ",(F.unit||"").toUpperCase()]})]}),o.jsxs("div",{className:"text-right",children:[o.jsx("div",{className:"text-sm font-bold",children:pu(F.expectedTotal||0)}),o.jsx("div",{className:"text-[11px] text-gray-500",children:Y?"Detalles":"Esperado"})]})]}),Y&&o.jsxs("div",{className:"p-3",children:[o.jsxs("div",{className:"mt-2 grid grid-cols-2 gap-2 text-sm",children:[o.jsxs("div",{className:"bg-gray-50 border rounded-xl p-2",children:[o.jsx("div",{className:"text-xs text-gray-500",children:"Ingresado"}),o.jsx("div",{className:"font-semibold",children:Jl(F.quantity)})]}),o.jsxs("div",{className:"bg-gray-50 border rounded-xl p-2",children:[o.jsx("div",{className:"text-xs text-gray-500",children:"Restantes"}),o.jsx("div",{className:"font-semibold",children:Jl(F.remaining)})]}),o.jsxs("div",{className:"bg-gray-50 border rounded-xl p-2",children:[o.jsx("div",{className:"text-xs text-gray-500",children:"Costo"}),o.jsx("div",{className:"font-semibold",children:pu(F.invoiceTotal||0)})]}),o.jsxs("div",{className:"bg-gray-50 border rounded-xl p-2",children:[o.jsx("div",{className:"text-xs text-gray-500",children:"Fecha pago"}),o.jsx("div",{className:"font-semibold",children:(he=F.paidAt)!=null&&he.toDate?Sr(F.paidAt.toDate(),"yyyy-MM-dd"):""})]})]}),o.jsx("div",{className:"mt-3",children:o.jsx("button",{type:"button",className:"w-full px-3 py-2 rounded-xl text-white bg-yellow-600 hover:bg-yellow-700",onClick:()=>k(F),children:"Marcar PENDIENTE"})})]})]},F.id)})}),o.jsx("div",{className:"hidden md:block bg-white p-2 rounded shadow-2xl border w-full",children:o.jsxs("table",{className:"min-w-full w-full text-sm",children:[o.jsx("thead",{className:"bg-gray-100",children:o.jsxs("tr",{children:[o.jsx("th",{className:"p-2 border",children:"Fecha"}),o.jsx("th",{className:"p-2 border",children:"Tipo"}),o.jsx("th",{className:"p-2 border",children:"Producto"}),o.jsx("th",{className:"p-2 border",children:"Unidad"}),o.jsx("th",{className:"p-2 border",children:"Ingresado"}),o.jsx("th",{className:"p-2 border",children:"Restantes"}),o.jsx("th",{className:"p-2 border",children:"Precio Compra"}),o.jsx("th",{className:"p-2 border",children:"Precio Venta"}),o.jsx("th",{className:"p-2 border",children:"Total factura"}),o.jsx("th",{className:"p-2 border",children:"Total esperado"}),o.jsx("th",{className:"p-2 border",children:"Fecha pago"}),o.jsx("th",{className:"p-2 border",children:"Acciones"})]})}),o.jsx("tbody",{children:r?o.jsx("tr",{children:o.jsx("td",{colSpan:12,className:"p-4 text-center",children:"Cargando"})}):E.length===0?o.jsx("tr",{children:o.jsx("td",{colSpan:12,className:"p-4 text-center",children:"Sin lotes pagados"})}):E.map(F=>{var Y;return o.jsxs("tr",{className:"text-center",children:[o.jsx("td",{className:"p-2 border",children:F.date}),o.jsx("td",{className:"p-2 border",children:(F.category||"").toUpperCase()}),o.jsx("td",{className:"p-2 border",children:F.productName}),o.jsx("td",{className:"p-2 border",children:(F.unit||"").toUpperCase()}),o.jsx("td",{className:"p-2 border",children:Jl(F.quantity)}),o.jsx("td",{className:"p-2 border",children:Jl(F.remaining)}),o.jsx("td",{className:"p-2 border",children:pu(F.purchasePrice)}),o.jsx("td",{className:"p-2 border",children:pu(F.salePrice)}),o.jsx("td",{className:"p-2 border",children:pu(F.invoiceTotal||0)}),o.jsx("td",{className:"p-2 border",children:pu(F.expectedTotal||0)}),o.jsx("td",{className:"p-2 border",children:(Y=F.paidAt)!=null&&Y.toDate?Sr(F.paidAt.toDate(),"yyyy-MM-dd"):""}),o.jsx("td",{className:"p-2 border",children:o.jsx("button",{type:"button",className:"px-2 py-1 rounded text-white bg-yellow-600 hover:bg-yellow-700",onClick:()=>k(F),children:"Marcar PENDIENTE"})})]},F.id)})})]})}),m&&o.jsx(aIe,{paidBatches:t,onClose:()=>p(!1),onCreated:()=>p(!1)}),a&&i&&o.jsx("div",{className:"fixed inset-0 flex items-center justify-center bg-black/50 z-50 p-3",children:o.jsxs("div",{className:"bg-white rounded-2xl shadow-2xl p-6 w-full max-w-md",children:[o.jsx("h3",{className:"text-lg font-semibold mb-3",children:"Confirmar accin"}),o.jsxs("p",{className:"text-gray-700 mb-4",children:["Seguro que quieres marcar pendiente este inventario?",o.jsx("br",{}),"Al hacerlo, las libras se restaurarn y se eliminarn las ventas generadas."]}),o.jsxs("div",{className:"flex justify-end gap-3",children:[o.jsx("button",{type:"button",onClick:()=>s(!1),className:"px-4 py-2 bg-gray-200 hover:bg-gray-300 rounded-xl",children:"Cancelar"}),o.jsx("button",{type:"button",onClick:P,className:"px-4 py-2 bg-yellow-600 text-white hover:bg-yellow-700 rounded-xl",children:"Confirmar"})]})]})})]})}const eo=t=>`C$ ${(Number(t)||0).toFixed(2)}`,oIe=["","HOMBRE","MUJER","NINO","NINA","UNISEX"];function fC(t){return(t||"").trim().toUpperCase().replace(/\s+/g,"-").replace(/[^A-Z0-9-]/g,"")}function lIe(t){switch((t||"").toUpperCase()){case"HOMBRE":return"HOM";case"MUJER":return"MUJ";case"NINO":return"NIN";case"NINA":return"NIA";case"UNISEX":return"UNI";default:return"GEN"}}function cIe(t){const e="ROP",r=fC(t.subcat).slice(0,3)||"GEN",n=lIe(t.gender),a=fC(t.color).slice(0,3)||"COL",s=fC(t.size)||"TLL",i=fC(t.brand).slice(0,4)||"BRD",l=Date.now().toString(36).toUpperCase().slice(-4);return`${e}-${r}-${n}-${a}-${s}-${i}-${l}`}const Q1=/^[A-Za-z0-9._-]{0,32}$/;function uIe(){const[t,e]=v.useState([]),[r,n]=v.useState([]),[a,s]=v.useState(!0),[i,l]=v.useState(""),[c,u]=v.useState(Sr(Qd(new Date),"yyyy-MM-dd")),[d,f]=v.useState(Sr(Ud(new Date),"yyyy-MM-dd")),[h,A]=v.useState(""),[m,p]=v.useState(""),[g,x]=v.useState(Sr(new Date,"yyyy-MM-dd")),[y,b]=v.useState(0),[w,j]=v.useState(0),[I,_]=v.useState(0),[E,S]=v.useState(0),[k,P]=v.useState(0),[T,F]=v.useState(""),[Y,he]=v.useState(""),[ue,fe]=v.useState(""),[me,ne]=v.useState(""),[Pe,Ie]=v.useState(""),[O,H]=v.useState(""),[R,M]=v.useState(""),[K,W]=v.useState(!1),[D,L]=v.useState(""),[Z,ge]=v.useState("Camisa"),[U,Ge]=v.useState(null),[ie,J]=v.useState(""),[je,z]=v.useState(0),[Ae,ye]=v.useState(0),[Qe,st]=v.useState(0),[ut,De]=v.useState(0),[it,dt]=v.useState(0),[ce,oe]=v.useState(""),[Me,Le]=v.useState(""),[ve,le]=v.useState(""),[Ue,rt]=v.useState(""),[mt,gt]=v.useState(""),[Ct,jt]=v.useState(""),[xe,He]=v.useState(""),[Ce,lt]=v.useState(null),[nt,Xe]=v.useState({x:0,y:0}),[It,$t]=v.useState(!1);v.useEffect(()=>{const V=()=>lt(null),re=pe=>pe.key==="Escape"&&lt(null);return document.addEventListener("click",V),document.addEventListener("keydown",re),()=>{document.removeEventListener("click",V),document.removeEventListener("keydown",re)}},[]);const Ke=(V,re,pe=192,Ee=160)=>{let Re=V;V+pe+8>window.innerWidth&&(Re=V-pe),Re=Math.max(8,Math.min(Re,window.innerWidth-pe-8));let et=re;return re+Ee+8>window.innerHeight&&(et=window.innerHeight-Ee-8),et=Math.max(8,Math.min(et,window.innerHeight-Ee-8)),{x:Re,y:et}},wt=(V,re)=>{V.stopPropagation();const pe=V.currentTarget.getBoundingClientRect(),Ee=pe.right,Se=pe.bottom,Re=Ke(Ee,Se);Xe(Re),lt(et=>et===re?null:re)};v.useEffect(()=>{const V=()=>lt(null),re=pe=>{pe.key==="Escape"&&lt(null)};return document.addEventListener("click",V),document.addEventListener("keydown",re),()=>{document.removeEventListener("click",V),document.removeEventListener("keydown",re)}},[]),v.useEffect(()=>{if(!Ce)return;const V=()=>lt(null);return window.addEventListener("scroll",V,!0),window.addEventListener("resize",V),()=>{window.removeEventListener("scroll",V,!0),window.removeEventListener("resize",V)}},[Ce]),v.useEffect(()=>{(async()=>{const V=await Ot(ht(ke,"products_clothes")),re=[];V.forEach(Re=>{const et=Re.data();re.push({id:Re.id,name:et.name??"(sin nombre)",category:et.category??"(sin categora)",measurement:et.measurement??"unidad",price:Number(et.price??0),sku:et.sku||"",size:et.size||"",color:et.color||"",gender:et.gender||"",brand:et.brand||""})}),e(re);const pe=nr(ht(ke,"inventory_clothes_batches"),on("date","desc")),Ee=await Ot(pe),Se=[];Ee.forEach(Re=>{const et=Re.data();Se.push({id:Re.id,productId:et.productId,productName:et.productName,category:et.category,unit:et.unit,quantity:Number(et.quantity||0),remaining:Number(et.remaining??et.quantity??0),purchasePrice:Number(et.purchasePrice||0),salePrice:Number(et.salePrice||0),invoiceTotal:Number(et.invoiceTotal??Number(et.quantity||0)*Number(et.purchasePrice||0)),expectedTotal:Number(et.expectedTotal??Number(et.quantity||0)*Number(et.salePrice||0)),date:et.date,createdAt:et.createdAt,status:et.status,notes:et.notes||"",sku:et.sku||"",size:et.size||"",color:et.color||"",gender:et.gender||"",brand:et.brand||"",clientCode:et.clientCode||""})}),n(Se),s(!1)})()},[]),v.useEffect(()=>{const V=t.find(re=>re.id===m);V&&(_(Number(V.price||0)),V.sku&&he(V.sku),V.size&&fe(re=>re||V.size),V.color&&ne(re=>re||V.color),V.gender&&Ie(re=>re||V.gender),V.brand&&H(re=>re||V.brand))},[m,t]),v.useEffect(()=>{S(Math.floor(y*w*100)/100)},[y,w]),v.useEffect(()=>{P(Math.floor(y*I*100)/100)},[y,I]),v.useEffect(()=>{const V=t.find(Ee=>Ee.id===m);if(V!=null&&V.sku){he(V.sku);return}const re=K&&Z?Z:(V==null?void 0:V.category)||"";if(!re&&!Pe&&!me&&!ue&&!O){he("");return}const pe=cIe({subcat:re,gender:Pe||"",color:me||"",size:ue||"",brand:O||""});he(pe)},[K,Z,m,Pe,me,ue,O,t]);const q=v.useMemo(()=>r.filter(V=>!(c&&V.date<c||d&&V.date>d||h&&V.productId!==h)),[r,c,d,h]),ae=v.useMemo(()=>{const V=q.reduce((Se,Re)=>Se+(Re.invoiceTotal||0),0),re=q.reduce((Se,Re)=>Se+(Re.expectedTotal||0),0),pe=q.reduce((Se,Re)=>Se+Re.quantity,0),Ee=q.reduce((Se,Re)=>Se+Re.remaining,0);return{udsIng:pe,udsRem:Ee,totalFacturado:V,totalEsperado:re}},[q]),ee=async V=>{V.preventDefault(),l("");const re=!!m&&!K,pe=t.find(et=>et.id===m),Ee=re?(pe==null?void 0:pe.name)||"":D||"",Se=re?(pe==null?void 0:pe.category)||"":Z||"General",Re=re&&(pe==null?void 0:pe.measurement)||"unidad";if(!Ee||y<=0||w<=0){l("Completa nombre/cantidad/costo.");return}if(R&&!Q1.test(R)){l("Cdigo del cliente invlido (solo A-Z, 0-9, . _ - , mx 32).");return}try{const et=await xn(ht(ke,"inventory_clothes_batches"),{productId:re?pe.id:"",productName:Ee,category:Se,unit:Re,quantity:y,remaining:y,purchasePrice:w,salePrice:I,invoiceTotal:E,expectedTotal:k,date:g,createdAt:fr.now(),status:"PENDIENTE",notes:T||"",sku:Y||"",size:ue||"",color:me||"",gender:Pe||"",brand:O||"",clientCode:R||""});n(We=>[{id:et.id,productId:re?pe.id:"",productName:Ee,category:Se,unit:Re,quantity:y,remaining:y,purchasePrice:w,salePrice:I,invoiceTotal:E,expectedTotal:k,date:g,createdAt:fr.now(),status:"PENDIENTE",notes:T||"",sku:Y||"",size:ue||"",color:me||"",gender:Pe||"",brand:O||"",clientCode:R||""},...We]),l(" Lote de ropa creado"),p(""),x(Sr(new Date,"yyyy-MM-dd")),b(0),j(0),_(0),S(0),P(0),F(""),he(""),fe(""),ne(""),Ie(""),H(""),M(""),W(!1),L(""),ge("Camisa")}catch(et){console.error(et),l(" Error al crear lote")}},be=async V=>{confirm(`Marcar PAGADO el lote del ${V.date} (${V.productName})?`)&&(await nn(qt(ke,"inventory_clothes_batches",V.id),{status:"PAGADO"}),n(pe=>pe.map(Ee=>Ee.id===V.id?{...Ee,status:"PAGADO"}:Ee)))},_e=V=>{Ge(V.id),J(V.date),z(V.quantity),ye(V.purchasePrice),st(V.salePrice),De(Number((V.quantity*V.purchasePrice).toFixed(2))),dt(Number((V.quantity*V.salePrice).toFixed(2))),oe(V.notes||""),Le(V.sku||""),le(V.size||""),rt(V.color||""),gt(V.gender||""),jt(V.brand||""),He(V.clientCode||"")},Be=()=>{Ge(null),J(""),z(0),ye(0),st(0),De(0),dt(0),oe(""),Le(""),le(""),rt(""),gt(""),jt(""),He("")};v.useEffect(()=>{U&&De(Math.floor(je*Ae*100)/100)},[U,je,Ae]),v.useEffect(()=>{U&&dt(Math.floor(je*Qe*100)/100)},[U,je,Qe]);const tt=async()=>{if(!U)return;const V=r.find(Se=>Se.id===U);if(!V)return;const re=Math.max(0,V.quantity-V.remaining),pe=Math.max(0,je-re);if(xe&&!Q1.test(xe)){l("Cdigo del cliente invlido (solo A-Z, 0-9, . _ - , mx 32).");return}const Ee=qt(ke,"inventory_clothes_batches",U);await nn(Ee,{date:ie,quantity:je,purchasePrice:Ae,salePrice:Qe,invoiceTotal:ut,expectedTotal:it,notes:ce,remaining:pe,sku:Me,size:ve,color:Ue,gender:mt||"",brand:Ct||"",clientCode:xe||""}),n(Se=>Se.map(Re=>Re.id===U?{...Re,date:ie,quantity:je,purchasePrice:Ae,salePrice:Qe,invoiceTotal:ut,expectedTotal:it,notes:ce,remaining:pe,sku:Me,size:ve,color:Ue,gender:mt||"",brand:Ct||"",clientCode:xe||""}:Re)),Be(),l(" Lote actualizado")},ot=async V=>{confirm(`Eliminar el lote del ${V.date} (${V.productName})?`)&&(await Cn(qt(ke,"inventory_clothes_batches",V.id)),n(pe=>pe.filter(Ee=>Ee.id!==V.id)),l(" Lote eliminado"))},te=()=>{const V=(c?`Desde ${c}`:"Desde inicio")+"  "+(d?`Hasta ${d}`:"Hasta hoy"),re=Re=>(Re||"").replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;"),pe=q.map(Re=>`
      <tr>
        <td>${Re.date}</td>
        <td>${(Re.category||"").toUpperCase()}</td>
        <td>${re(Re.productName)}</td>
        <td>${re(Re.sku||"")}</td>
        <td>${re(Re.size||"")}</td>
        <td>${re(Re.color||"")}</td>
        <td>${re(Re.clientCode||"")}</td>
        <td>${re(Re.gender||"")}</td>
        <td>${(Re.unit||"").toUpperCase()}</td>
        <td style="text-align:right">${Re.quantity.toFixed(0)}</td>
        <td style="text-align:right">${Re.remaining.toFixed(0)}</td>
        <td style="text-align:right">${eo(Re.purchasePrice)}</td>
        <td style="text-align:right">${eo(Re.salePrice)}</td>
        <td style="text-align:right">${eo(Re.invoiceTotal||0)}</td>
        <td style="text-align:right">${eo(Re.expectedTotal||0)}</td>
        <td>${re((Re.notes||"").slice(0,120))}</td>
        <td>${Re.status}</td>
      </tr>`).join(""),Ee=`
<!doctype html>
<html>
<head>
  <meta charset="utf-8" />
  <title>Inventario de Ropa por Lotes</title>
  <style>
    * { font-family: Arial, sans-serif; }
    h1 { margin: 0 0 4px; }
    .muted { color: #555; font-size: 12px; margin-bottom: 12px; }
    table { width: 100%; border-collapse: collapse; font-size: 11px; }
    th, td { border: 1px solid #ddd; padding: 6px; }
    th { background: #f5f5f5; text-align: left; }
    .totals { margin: 10px 0 16px; font-size: 12px; display: grid; grid-template-columns: repeat(2, max-content); column-gap: 32px; row-gap: 6px; align-items: center; }
    @media print { @page { size: A4 landscape; margin: 12mm; } button { display: none; } }
  </style>
</head>
<body>
  <button onclick="window.print()">Imprimir</button>
  <h1>Inventario de Ropa por Lotes</h1>
  <div class="muted">${V}</div>
  <div class="totals">
    <span><strong>Unidades ingresadas:</strong> ${ae.udsIng.toFixed(0)}</span>
    <span><strong>Unidades restantes:</strong> ${ae.udsRem.toFixed(0)}</span>
    <span><strong>Total esperado a ganar:</strong> ${eo(ae.totalEsperado)}</span>
    <span><strong>Total facturado:</strong> ${eo(ae.totalFacturado)}</span>
    <span><strong>Ganancia sin gastos:</strong> ${eo(Number((ae.totalEsperado-ae.totalFacturado).toFixed(2)))}</span>
  </div>
  <table>
    <thead>
      <tr>
        <th>Fecha</th>
        <th>Subcat.</th>
        <th>Producto</th>
        <th>SKU</th>
        <th>Talla</th>
        <th>Color</th>
        <th>Cdigo Cliente</th>
        <th>Gnero</th>
        <th>Unidad</th>
        <th>Ingresado</th>
        <th>Restantes</th>
        <th>Precio Compra</th>
        <th>Precio Venta</th>
        <th>Total factura</th>
        <th>Total esperado</th>
        <th>Comentario</th>
        <th>Estado</th>
      </tr>
    </thead>
    <tbody>${pe||'<tr><td colspan="17" style="text-align:center">Sin lotes</td></tr>'}</tbody>
  </table>
</body>
</html>`,Se=window.open("","_blank");Se&&(Se.document.open(),Se.document.write(Ee),Se.document.close())};return o.jsxs("div",{className:"max-w-6xl mx-auto",children:[o.jsxs("div",{className:"flex items-center justify-between mb-3",children:[o.jsx("h2",{className:"text-2xl font-bold",children:"Inventario de Ropa"}),o.jsx("button",{className:"px-3 py-2 rounded bg-blue-600 text-white hover:bg-blue-700",onClick:()=>$t(!0),type:"button",children:"Crear Inventario"})]}),o.jsxs("div",{className:"bg-white p-3 rounded shadow border mb-4 flex flex-wrap items-end gap-3 text-sm",children:[o.jsxs("div",{className:"flex flex-col",children:[o.jsx("label",{className:"font-semibold",children:"Desde"}),o.jsx("input",{type:"date",className:"border rounded px-2 py-1",value:c,onChange:V=>u(V.target.value)})]}),o.jsxs("div",{className:"flex flex-col",children:[o.jsx("label",{className:"font-semibold",children:"Hasta"}),o.jsx("input",{type:"date",className:"border rounded px-2 py-1",value:d,onChange:V=>f(V.target.value)})]}),o.jsxs("div",{className:"flex flex-col min-w-[240px]",children:[o.jsx("label",{className:"font-semibold",children:"Producto"}),o.jsxs("select",{className:"border rounded px-2 py-1",value:h,onChange:V=>A(V.target.value),children:[o.jsx("option",{value:"",children:"Todos"}),t.map(V=>o.jsxs("option",{value:V.id,children:[V.name,"  ",V.category]},V.id))]})]}),o.jsx("button",{className:"px-3 py-1 rounded bg-gray-200 hover:bg-gray-300",onClick:()=>{u(""),f(""),A("")},children:"Quitar filtro"}),o.jsx("button",{className:"px-3 py-1 rounded bg-blue-600 text-white hover:bg-blue-700",onClick:te,children:"Imprimir PDF"})]}),o.jsx("div",{className:"bg-gray-50 p-3 rounded shadow border mb-3 text-base",children:o.jsxs("div",{className:"grid grid-cols-3 gap-y-2 gap-x-8",children:[o.jsxs("div",{children:[o.jsx("span",{className:"font-semibold",children:"Unidades ingresadas:"})," ",ae.udsIng.toFixed(0)]}),o.jsxs("div",{children:[o.jsx("span",{className:"font-semibold",children:"Unidades restantes:"})," ",ae.udsRem.toFixed(0)]}),o.jsxs("div",{children:[o.jsx("span",{className:"font-semibold",children:"Total esperado en ventas:"})," ",eo(ae.totalEsperado)]}),o.jsxs("div",{children:[o.jsx("span",{className:"font-semibold",children:"Total facturado:"})," ",eo(ae.totalFacturado)]}),o.jsxs("div",{children:[o.jsx("span",{className:"font-semibold",children:"Ganancia sin gastos:"})," ",eo(Number((ae.totalEsperado-ae.totalFacturado).toFixed(2)))]})]})}),o.jsx("div",{className:"bg-white rounded shadow border",children:o.jsx("div",{className:"w-full overflow-x-auto",children:o.jsxs("table",{className:"min-w-full text-xs md:text-sm",children:[o.jsx("thead",{className:"bg-gray-100 sticky top-0 z-10",children:o.jsxs("tr",{children:[o.jsx("th",{className:"p-2 md:p-3 border text-left",children:"Fecha"}),o.jsx("th",{className:"p-2 md:p-3 border text-left hidden sm:table-cell",children:"Subcat."}),o.jsx("th",{className:"p-2 md:p-3 border text-left",children:"Producto"}),o.jsx("th",{className:"p-2 md:p-3 border text-left hidden lg:table-cell",children:"SKU"}),o.jsx("th",{className:"p-2 md:p-3 border text-left hidden md:table-cell",children:"Talla"}),o.jsx("th",{className:"p-2 md:p-3 border text-left hidden md:table-cell",children:"Color"}),o.jsx("th",{className:"p-2 md:p-3 border text-left hidden xl:table-cell",children:"Cdigo Cliente"}),o.jsx("th",{className:"p-2 md:p-3 border text-left hidden lg:table-cell",children:"Gnero"}),o.jsx("th",{className:"p-2 md:p-3 border text-left hidden lg:table-cell",children:"Unidad"}),o.jsx("th",{className:"p-2 md:p-3 border text-right tabular-nums",children:"Ingresado"}),o.jsx("th",{className:"p-2 md:p-3 border text-right tabular-nums",children:"Restantes"}),o.jsx("th",{className:"p-2 md:p-3 border text-right tabular-nums hidden md:table-cell",children:"Precio Compra"}),o.jsx("th",{className:"p-2 md:p-3 border text-right tabular-nums hidden md:table-cell",children:"Precio Venta"}),o.jsx("th",{className:"p-2 md:p-3 border text-right tabular-nums hidden lg:table-cell",children:"Total factura"}),o.jsx("th",{className:"p-2 md:p-3 border text-right tabular-nums hidden lg:table-cell",children:"Total esperado"}),o.jsx("th",{className:"p-2 md:p-3 border text-left hidden xl:table-cell",children:"Comentario"}),o.jsx("th",{className:"p-2 md:p-3 border text-left",children:"Estado"}),o.jsx("th",{className:"p-2 md:p-3 border text-center",children:"Acciones"})]})}),o.jsx("tbody",{className:"whitespace-nowrap",children:a?o.jsx("tr",{children:o.jsx("td",{colSpan:17,className:"p-4 text-center",children:"Cargando"})}):q.length===0?o.jsx("tr",{children:o.jsx("td",{colSpan:17,className:"p-4 text-center",children:"Sin lotes"})}):q.map(V=>{const re=U===V.id;return o.jsxs("tr",{className:"text-left",children:[o.jsx("td",{className:"p-2 md:p-3 border align-top",children:re?o.jsx("input",{type:"date",className:"w-full border p-1 rounded",value:ie,onChange:pe=>J(pe.target.value)}):V.date}),o.jsx("td",{className:"p-2 md:p-3 border align-top hidden sm:table-cell",children:(V.category||"").toUpperCase()}),o.jsx("td",{className:"p-2 md:p-3 border align-top max-w-[220px] md:max-w-[320px]",children:o.jsx("span",{className:"block truncate",title:V.productName,children:V.productName})}),o.jsx("td",{className:"p-2 md:p-3 border align-top hidden lg:table-cell max-w-[220px]",children:re?o.jsx("input",{className:"w-full border p-1 rounded",value:Me,onChange:pe=>Le(pe.target.value)}):o.jsx("span",{className:"block truncate",title:V.sku||"",children:V.sku||""})}),o.jsx("td",{className:"p-2 md:p-3 border align-top hidden md:table-cell",children:re?o.jsx("input",{className:"w-full border p-1 rounded",value:ve,onChange:pe=>le(pe.target.value)}):V.size||""}),o.jsx("td",{className:"p-2 md:p-3 border align-top hidden md:table-cell",children:re?o.jsx("input",{className:"w-full border p-1 rounded",value:Ue,onChange:pe=>rt(pe.target.value)}):V.color||""}),o.jsx("td",{className:"p-2 md:p-3 border align-top hidden xl:table-cell max-w-[200px]",children:re?o.jsx("input",{className:"w-full border p-1 rounded",value:xe,onChange:pe=>{const Ee=pe.target.value;Q1.test(Ee)&&He(Ee)},placeholder:"Ej: LOTE-SHEIN-SEP-01",title:"AZ 09 . _ - (mx 32)"}):o.jsx("span",{className:"block truncate",title:V.clientCode||"",children:V.clientCode||""})}),o.jsx("td",{className:"p-2 md:p-3 border align-top hidden lg:table-cell",children:re?o.jsx("select",{className:"w-full border p-1 rounded",value:mt,onChange:pe=>gt(pe.target.value),children:oIe.map(pe=>o.jsx("option",{value:pe,children:pe||""},pe))}):V.gender||""}),o.jsx("td",{className:"p-2 md:p-3 border align-top hidden lg:table-cell",children:(V.unit||"").toUpperCase()}),o.jsx("td",{className:"p-2 md:p-3 border align-top text-right tabular-nums",children:re?o.jsx("input",{type:"number",step:"1",inputMode:"numeric",className:"w-20 border p-1 rounded text-right",value:Number.isNaN(je)?"":je,onChange:pe=>z(Math.max(0,parseInt(pe.target.value||"0",10)))}):V.quantity.toFixed(0)}),o.jsx("td",{className:"p-2 md:p-3 border align-top text-right tabular-nums",children:re?V.remaining:V.remaining.toFixed(0)}),o.jsx("td",{className:"p-2 md:p-3 border align-top text-right tabular-nums hidden md:table-cell",children:re?o.jsx("input",{type:"number",step:"0.01",inputMode:"decimal",className:"w-24 border p-1 rounded text-right",value:Number.isNaN(Ae)?"":Ae,onChange:pe=>ye(Math.max(0,parseFloat(pe.target.value||"0")))}):eo(V.purchasePrice)}),o.jsx("td",{className:"p-2 md:p-3 border align-top text-right tabular-nums hidden md:table-cell",children:re?o.jsx("input",{type:"number",step:"0.01",inputMode:"decimal",className:"w-24 border p-1 rounded text-right",value:Number.isNaN(Qe)?"":Qe,onChange:pe=>st(Math.max(0,parseFloat(pe.target.value||"0")))}):eo(V.salePrice)}),o.jsx("td",{className:"p-2 md:p-3 border align-top text-right tabular-nums hidden lg:table-cell",children:eo(re?ut:V.invoiceTotal||0)}),o.jsx("td",{className:"p-2 md:p-3 border align-top text-right tabular-nums hidden lg:table-cell",children:eo(re?it:V.expectedTotal||0)}),o.jsx("td",{className:"p-2 md:p-3 border align-top hidden xl:table-cell max-w-[280px]",children:re?o.jsx("textarea",{className:"w-full border p-1 rounded resize-y min-h-12",value:ce,onChange:pe=>oe(pe.target.value),maxLength:500}):o.jsx("span",{className:"block truncate",title:V.notes||"",children:V.notes||""})}),o.jsx("td",{className:"p-2 md:p-3 border align-top",children:o.jsx("span",{className:`px-2 py-0.5 rounded text-[10px] md:text-xs ${V.status==="PAGADO"?"bg-green-100 text-green-700":"bg-yellow-100 text-yellow-700"}`,children:V.status})}),o.jsx("td",{className:"p-2 md:p-3 border align-top",children:re?o.jsxs("div",{className:"flex gap-2 justify-center",children:[o.jsx("button",{className:"px-2 py-1 rounded text-white bg-blue-600 hover:bg-blue-700",onClick:tt,children:"Guardar"}),o.jsx("button",{className:"px-2 py-1 rounded bg-gray-200 hover:bg-gray-300",onClick:Be,children:"Cancelar"})]}):o.jsx("button",{type:"button",className:"inline-flex items-center justify-center w-8 h-8 rounded border border-gray-200 hover:bg-gray-100",title:"Acciones",onClick:pe=>wt(pe,V.id),children:o.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-4 w-4",viewBox:"0 0 24 24",fill:"currentColor",children:[o.jsx("circle",{cx:"12",cy:"5",r:"1.6"}),o.jsx("circle",{cx:"12",cy:"12",r:"1.6"}),o.jsx("circle",{cx:"12",cy:"19",r:"1.6"})]})})})]},V.id)})})]})})}),Ce&&zc.createPortal(o.jsxs(o.Fragment,{children:[o.jsx("div",{onClick:()=>lt(null),className:"fixed inset-0 z-[60]"}),o.jsx("div",{className:"fixed z-[61] w-44 rounded-md border border-gray-200 bg-white shadow-xl",style:{left:nt.x,top:nt.y},onClick:V=>V.stopPropagation(),role:"menu","aria-orientation":"vertical",children:o.jsxs("div",{className:"py-1 text-sm",children:[(()=>{const V=q.find(re=>re.id===Ce);return(V==null?void 0:V.status)==="PENDIENTE"?o.jsx("button",{className:"w-full text-left px-3 py-2 hover:bg-green-50",onClick:()=>{lt(null),be(V)},children:" Pagar"}):null})(),o.jsx("button",{className:"w-full text-left px-3 py-2 hover:bg-yellow-50",onClick:()=>{const V=q.find(re=>re.id===Ce);V&&(lt(null),_e(V))},children:" Editar"}),o.jsx("button",{className:"w-full text-left px-3 py-2 hover:bg-red-50 text-red-600",onClick:()=>{const V=q.find(re=>re.id===Ce);V&&(lt(null),ot(V))},children:" Borrar"})]})})]}),document.body),It&&zc.createPortal(o.jsxs("div",{className:"fixed inset-0 z-[70] flex items-center justify-center",children:[o.jsx("div",{className:"absolute inset-0 bg-black/40",onClick:()=>$t(!1)}),o.jsxs("div",{className:"relative bg-white rounded-lg shadow-2xl border w-[96%] max-w-4xl max-h-[92vh] overflow-auto p-4",children:[o.jsxs("div",{className:"flex items-center justify-between mb-2",children:[o.jsx("h3",{className:"text-lg font-bold",children:"Crear Inventario (Lote)"}),o.jsx("button",{className:"px-3 py-1 rounded bg-gray-200 hover:bg-gray-300",onClick:()=>$t(!1),type:"button",children:"Cerrar"})]}),o.jsxs("form",{onSubmit:ee,className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[o.jsxs("div",{className:"md:col-span-2",children:[o.jsx("label",{className:"block text-sm font-semibold",children:"Producto de ropa"}),o.jsxs("select",{className:"w-full border p-2 rounded",value:m,onChange:V=>p(V.target.value),children:[o.jsx("option",{value:"",children:"(Opcional) Selecciona un producto"}),t.map(V=>o.jsxs("option",{value:V.id,children:[V.name,"  ",V.category,"  ",V.sku?`SKU: ${V.sku}`:""]},V.id))]})]}),o.jsxs("div",{children:[o.jsx("label",{className:"block text-sm font-semibold",children:"Fecha del lote"}),o.jsx("input",{type:"date",className:"w-full border p-2 rounded",value:g,onChange:V=>x(V.target.value)})]}),o.jsxs("div",{children:[o.jsx("label",{className:"block text-sm font-semibold",children:"Cantidad (pzas)"}),o.jsx("input",{type:"number",step:"1",inputMode:"numeric",className:"w-full border p-2 rounded",value:y===0?"":y,onChange:V=>b(Math.max(0,parseInt(V.target.value||"0",10))),placeholder:""})]}),o.jsxs("div",{children:[o.jsx("label",{className:"block text-sm font-semibold",children:"Precio de compra (pza)"}),o.jsx("input",{type:"number",step:"0.01",inputMode:"decimal",className:"w-full border p-2 rounded",value:w===0?"":w,onChange:V=>j(Math.max(0,parseFloat(V.target.value||"0")))})]}),o.jsxs("div",{children:[o.jsx("label",{className:"block text-sm font-semibold",children:"Precio de venta (pza)"}),o.jsx("input",{type:"number",step:"0.01",inputMode:"decimal",className:"w-full border p-2 rounded",value:I===0?"":I,onChange:V=>_(Math.max(0,parseFloat(V.target.value||"0")))})]}),o.jsxs("div",{children:[o.jsx("label",{className:"block text-sm font-semibold",children:"SKU (auto)"}),o.jsx("input",{className:"w-full border p-2 rounded bg-gray-100",value:Y,readOnly:!0,placeholder:"Se genera automticamente o se carga del producto",title:"Si el producto tiene SKU, se usa tal cual; si no, se genera por subcat/gnero/talla/color/marca."})]}),o.jsxs("div",{children:[o.jsx("label",{className:"block text-sm font-semibold",children:"Talla"}),o.jsx("input",{className:"w-full border p-2 rounded bg-gray-100",value:ue,readOnly:!0,onChange:V=>fe(V.target.value),placeholder:"XS/S/M/L/XL/10/12"})]}),o.jsxs("div",{children:[o.jsx("label",{className:"block text-sm font-semibold",children:"Color"}),o.jsx("input",{className:"w-full border p-2 rounded bg-gray-100",value:me,readOnly:!0,onChange:V=>ne(V.target.value),placeholder:"Negro, Azul, Rojo"})]}),o.jsxs("div",{children:[o.jsx("label",{className:"block text-sm font-semibold",children:"Color"}),o.jsx("input",{className:"w-full border p-2 rounded bg-gray-100",value:Pe,readOnly:!0,onChange:V=>Ie(V.target.value),placeholder:"Masculino, Femenino, Otro"})]}),o.jsxs("div",{children:[o.jsx("label",{className:"block text-sm font-semibold",children:"Marca / Origen (opcional)"}),o.jsx("input",{className:"w-full border p-2 rounded bg-gray-100",value:O,onChange:V=>H(V.target.value),placeholder:"Shein, Usado, Otro"})]}),o.jsxs("div",{children:[o.jsx("label",{className:"block text-sm font-semibold",children:"Cdigo del cliente (opcional)"}),o.jsx("input",{className:"w-full border p-2 rounded",placeholder:"Ej: LOTE-SHEIN-SEP-01",value:R,onChange:V=>{const re=V.target.value;Q1.test(re)&&M(re)},title:"Solo letras, nmeros, punto, guion y guion_bajo (mx 32)"}),!Q1.test(R)&&R.length>0&&o.jsx("div",{className:"text-xs text-red-600 mt-1",children:"Formato invlido"})]}),o.jsxs("div",{className:"md:col-span-2",children:[o.jsx("label",{className:"block text-sm font-semibold",children:"Comentario"}),o.jsx("textarea",{className:"w-full border p-2 rounded resize-y min-h-24",value:T,onChange:V=>F(V.target.value),maxLength:500,placeholder:"Ej: Camisita veranera, tela delgada, tirantes"}),o.jsxs("div",{className:"text-xs text-gray-500 text-right",children:[T.length,"/500"]})]}),o.jsxs("div",{children:[o.jsx("label",{className:"block text-sm font-semibold",children:"Total factura (auto)"}),o.jsx("input",{type:"text",className:"w-full border p-2 rounded bg-gray-100",value:eo(E),readOnly:!0})]}),o.jsxs("div",{children:[o.jsx("label",{className:"block text-sm font-semibold",children:"Total esperado (auto)"}),o.jsx("input",{type:"text",className:"w-full border p-2 rounded bg-gray-100",value:eo(k),readOnly:!0})]}),o.jsxs("div",{className:"md:col-span-2 flex justify-end gap-2",children:[o.jsx("button",{type:"button",className:"px-4 py-2 rounded bg-gray-200 hover:bg-gray-300",onClick:()=>$t(!1),children:"Cancelar"}),o.jsx("button",{className:"bg-blue-600 text-white px-4 py-2 rounded hover:bg-blue-700",children:"Guardar lote"})]})]})]})]}),document.body),i&&o.jsx("p",{className:"mt-2 text-sm",children:i})]})}const dIe=["Camisa","Blusa","Vestido","Jean","Pantaln","Short","Falda","Conjunto","Abrigo","Suter","Accesorio"],fIe=["Negro","Blanco","Azul","Rojo","Verde","Gris","Beige","Rosa","Amarillo","Marrn","Morado","Naranja"],AIe=["XS","S","M","L","XL","2XL"],hIe=["2","4","6","8","10","12","14"],mIe=["26","28","30","32","34","36","38"],pIe=["Shein","Usado","Otro"],gIe=["","HOMBRE","MUJER","NINO","NINA","UNISEX"];function AC(t){return(t||"").trim().toUpperCase().replace(/\s+/g,"-").replace(/[^A-Z0-9-]/g,"")}function xIe(t){switch((t||"").toUpperCase()){case"HOMBRE":return"HOM";case"MUJER":return"MUJ";case"NINO":return"NIN";case"NINA":return"NIA";case"UNISEX":return"UNI";default:return"GEN"}}function vIe(t){const e="ROP",r=AC(t.subcat).slice(0,3)||"GEN",n=xIe(t.gender),a=AC(t.color).slice(0,3)||"COL",s=AC(t.size)||"TLL",i=AC(t.brand).slice(0,4)||"BRD";return`${e}-${r}-${n}-${a}-${s}-${i}`}const yIe=/^[A-Za-z0-9._-]{0,32}$/;function bIe(){const[t,e]=v.useState(""),[r,n]=v.useState("Camisa"),[a,s]=v.useState(""),[i,l]=v.useState(""),[c,u]=v.useState("Shein"),[d,f]=v.useState(""),[h,A]=v.useState(""),[m,p]=v.useState(""),[g,x]=v.useState(""),[y,b]=v.useState(""),[w,j]=v.useState("0"),[I,_]=v.useState(""),[E,S]=v.useState(""),k=v.useMemo(()=>{const M=Number(w||0),K=Number(y||0);return Math.floor(M*K*100)/100},[w,y]),[P,T]=v.useState([]),[F,Y]=v.useState(!0),[he,ue]=v.useState(""),{refreshKey:fe,refresh:me}=xc(),[ne,Pe]=v.useState(!1),Ie=v.useMemo(()=>r.toLowerCase()==="jean"?mIe:d==="NINO"||d==="NINA"?hIe:AIe,[r,d]);v.useEffect(()=>{p(vIe({subcat:r,gender:d,color:i,size:a,brand:c}))},[r,d,i,a,c]),v.useEffect(()=>{(async()=>{Y(!0);const M=nr(ht(ke,"products_clothes"),on("createdAt","desc")),K=await Ot(M),W=[];K.forEach(D=>{const L=D.data();W.push({id:D.id,name:L.name??"(sin nombre)",category:L.category??"",measurement:L.measurement??"unidad",sku:L.sku??"",size:L.size||"",color:L.color||"",brand:L.brand||"",gender:L.gender||"",clientCode:L.clientCode||"",notes:L.notes||"",createdAt:L.createdAt??fr.now()})}),T(W),Y(!1)})()},[fe]);const O=()=>{e(""),n("Camisa"),s(""),l(""),u("Shein"),f(""),A(""),x(""),b(""),j("0"),_(""),S("")},H=async M=>{if(M.preventDefault(),ue(""),!t.trim()){ue("Ingresa el nombre del producto.");return}if(h&&!yIe.test(h)){ue("Cdigo del cliente invlido");return}const K=Number(w||0),W=Number(y||0);if(K<0){ue("La cantidad de piezas debe ser 0 o mayor.");return}if(W<0){ue("El precio de venta no puede ser negativo.");return}try{const D=await xn(ht(ke,"products_clothes"),{name:t.trim(),category:r,measurement:"unidad",sku:m,size:a||"",color:i||"",brand:c||"",gender:d||"",clientCode:h||"",notes:g||"",createdAt:fr.now(),price:W||0});if(T(L=>[{id:D.id,name:t.trim(),category:r,measurement:"unidad",sku:m,size:a||"",color:i||"",brand:c||"",gender:d||"",clientCode:h||"",notes:g||"",createdAt:fr.now()},...L]),K>0){const L=new Date().toISOString().slice(0,10),Z=I||L;await xn(ht(ke,"inventory_clothes_batches"),{productId:D.id,productName:t.trim(),category:r,unit:"unidad",quantity:K,remaining:K,purchasePrice:0,salePrice:W||0,invoiceTotal:0,expectedTotal:k||0,date:Z,createdAt:fr.now(),status:"PENDIENTE",notes:E||"",sku:m||"",size:a||"",color:i||"",gender:d||"",brand:c||"",clientCode:h||""})}ue(K>0?" Producto creado y lote de inventario registrado":" Producto de ropa creado"),O()}catch(D){console.error(D),ue(" Error al crear producto")}},R=async M=>{confirm(`Eliminar el producto "${M.name}"?`)&&(await Cn(qt(ke,"products_clothes",M.id)),T(W=>W.filter(D=>D.id!==M.id)))};return o.jsxs("div",{className:"max-w-6xl mx-auto",children:[o.jsxs("div",{className:"flex items-center justify-between mb-3",children:[o.jsx("h2",{className:"text-2xl font-bold",children:"Productos de Ropa"}),o.jsxs("div",{className:"flex gap-2",children:[o.jsx(gc,{onClick:me,loading:F}),o.jsxs("button",{className:"inline-flex items-center gap-2 bg-green-600 text-white px-3 py-2 rounded hover:bg-green-700",onClick:()=>{Pe(!0)},children:[o.jsx("span",{className:"inline-block bg-green-700/40 rounded-full p-1",children:o.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-4 w-4",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:o.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 4v16m8-8H4"})})}),"Nuevo producto"]})]})]}),ne&&o.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-40 flex items-center justify-center z-50",children:o.jsxs("div",{className:"bg-white p-6 rounded shadow-lg w-full max-w-2xl max-h-[90vh] overflow-y-auto",children:[o.jsx("h3",{className:"text-xl font-bold mb-4",children:"Nuevo producto de ropa"}),o.jsxs("form",{onSubmit:H,className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[o.jsxs("div",{children:[o.jsx("label",{className:"block text-sm font-semibold",children:"Nombre"}),o.jsx("input",{className:"w-full border p-2 rounded",value:t,onChange:M=>e(M.target.value),placeholder:"Ej: Blusa floral"})]}),o.jsxs("div",{children:[o.jsx("label",{className:"block text-sm font-semibold",children:"Subcategora"}),o.jsx("select",{className:"w-full border p-2 rounded",value:r,onChange:M=>n(M.target.value),children:dIe.map(M=>o.jsx("option",{value:M,children:M},M))})]}),o.jsxs("div",{children:[o.jsx("label",{className:"block text-sm font-semibold",children:"Gnero"}),o.jsx("select",{className:"w-full border p-2 rounded",value:d,onChange:M=>f(M.target.value),children:gIe.map(M=>o.jsx("option",{value:M,children:M||""},M))})]}),o.jsxs("div",{children:[o.jsx("label",{className:"block text-sm font-semibold",children:"Talla"}),o.jsxs("select",{className:"w-full border p-2 rounded",value:a,onChange:M=>s(M.target.value),children:[o.jsx("option",{value:"",children:""}),Ie.map(M=>o.jsx("option",{value:M,children:M},M))]})]}),o.jsxs("div",{children:[o.jsx("label",{className:"block text-sm font-semibold",children:"Color"}),o.jsxs("select",{className:"w-full border p-2 rounded",value:i,onChange:M=>l(M.target.value),children:[o.jsx("option",{value:"",children:""}),fIe.map(M=>o.jsx("option",{value:M,children:M},M))]})]}),o.jsxs("div",{children:[o.jsx("label",{className:"block text-sm font-semibold",children:"Marca"}),o.jsx("select",{className:"w-full border p-2 rounded",value:c,onChange:M=>u(M.target.value),children:pIe.map(M=>o.jsx("option",{value:M,children:M},M))})]}),o.jsxs("div",{children:[o.jsx("label",{className:"block text-sm font-semibold",children:"SKU (auto)"}),o.jsx("input",{className:"w-full border p-2 rounded bg-gray-100",value:m,readOnly:!0})]}),o.jsxs("div",{children:[o.jsx("label",{className:"block text-sm font-semibold",children:"Cdigo cliente"}),o.jsx("input",{className:"w-full border p-2 rounded",value:h,onChange:M=>A(M.target.value)})]}),o.jsxs("div",{children:[o.jsx("label",{className:"block text-sm font-semibold",children:"Precio de venta (pza)"}),o.jsx("input",{className:"w-full border p-2 rounded",type:"number",step:"0.01",min:0,value:y,onChange:M=>b(M.target.value),placeholder:"0.00"})]}),o.jsxs("div",{children:[o.jsx("label",{className:"block text-sm font-semibold",children:"Cantidad de piezas (crea lote si > 0)"}),o.jsx("input",{className:"w-full border p-2 rounded",type:"number",min:0,value:w,onChange:M=>j(M.target.value),placeholder:"0"})]}),o.jsxs("div",{children:[o.jsx("label",{className:"block text-sm font-semibold",children:"Fecha de lote"}),o.jsx("input",{className:"w-full border p-2 rounded",type:"date",value:I,onChange:M=>_(M.target.value)})]}),o.jsxs("div",{className:"md:col-span-2 flex items-center justify-between border-t pt-3 mt-2 text-sm",children:[o.jsxs("div",{children:[o.jsx("span",{className:"font-semibold",children:"Medicin:"})," unidad"]}),o.jsxs("div",{children:[o.jsx("span",{className:"font-semibold",children:"Total esperado (auto): "}),isNaN(k)?"":k.toFixed(2)]})]}),o.jsxs("div",{className:"md:col-span-2 flex justify-end gap-2 mt-2",children:[o.jsx("button",{type:"button",onClick:O,className:"px-3 py-1 rounded bg-gray-200 hover:bg-gray-300",children:"Limpiar"}),o.jsx("button",{type:"button",onClick:()=>Pe(!1),className:"px-3 py-1 rounded bg-gray-200 hover:bg-gray-300",children:"Cancelar"}),o.jsx("button",{type:"submit",className:"px-3 py-1 rounded bg-blue-600 text-white hover:bg-blue-700",children:"Guardar"})]})]})]})}),o.jsx("div",{className:"bg-white p-2 rounded shadow border w-full",children:o.jsxs("table",{className:"min-w-full text-sm",children:[o.jsx("thead",{className:"bg-gray-100",children:o.jsxs("tr",{children:[o.jsx("th",{className:"p-2 border",children:"Fecha"}),o.jsx("th",{className:"p-2 border",children:"Subcat."}),o.jsx("th",{className:"p-2 border",children:"Nombre"}),o.jsx("th",{className:"p-2 border",children:"SKU"}),o.jsx("th",{className:"p-2 border",children:"Talla"}),o.jsx("th",{className:"p-2 border",children:"Color"}),o.jsx("th",{className:"p-2 border",children:"Marca"}),o.jsx("th",{className:"p-2 border",children:"Gnero"}),o.jsx("th",{className:"p-2 border",children:"Cdigo Cliente"}),o.jsx("th",{className:"p-2 border",children:"Comentario"}),o.jsx("th",{className:"p-2 border",children:"Acciones"})]})}),o.jsx("tbody",{children:F?o.jsx("tr",{children:o.jsx("td",{colSpan:11,className:"p-4 text-center",children:"Cargando"})}):P.length===0?o.jsx("tr",{children:o.jsx("td",{colSpan:11,className:"p-4 text-center",children:"Sin productos"})}):P.map(M=>{var K;return o.jsxs("tr",{className:"text-center",children:[o.jsx("td",{className:"p-2 border",children:(K=M.createdAt)!=null&&K.toDate?M.createdAt.toDate().toISOString().slice(0,10):""}),o.jsx("td",{className:"p-2 border",children:M.category}),o.jsx("td",{className:"p-2 border",children:M.name}),o.jsx("td",{className:"p-2 border",children:M.sku}),o.jsx("td",{className:"p-2 border",children:M.size||""}),o.jsx("td",{className:"p-2 border",children:M.color||""}),o.jsx("td",{className:"p-2 border",children:M.brand||""}),o.jsx("td",{className:"p-2 border",children:M.gender||""}),o.jsx("td",{className:"p-2 border",children:M.clientCode||""}),o.jsx("td",{className:"p-2 border",children:M.notes||""}),o.jsx("td",{className:"p-2 border",children:o.jsx("button",{className:"px-2 py-1 rounded bg-red-600 text-white hover:bg-red-700",onClick:()=>R(M),children:"Borrar"})})]},M.id)})})]})}),he&&o.jsx("p",{className:"mt-2 text-sm",children:he})]})}async function wIe(t){const{productId:e,quantity:r,saleDate:n,saleId:a}=t,s=Math.max(0,Math.floor(Number(r||0)));if(!e||s<=0)throw new Error("Parmetros invlidos para allocateSaleFIFOClothes");const i=nr(ht(ke,"inventory_clothes_batches"),cr("productId","==",e)),u=(await Ot(i)).docs.map(f=>({id:f.id,data:f.data()})).sort((f,h)=>{var x,y;const A=String(f.data.date||""),m=String(h.data.date||"");if(A!==m)return A<m?-1:1;const p=((x=f.data.createdAt)==null?void 0:x.seconds)??0,g=((y=h.data.createdAt)==null?void 0:y.seconds)??0;return p-g}).map(f=>qt(ke,"inventory_clothes_batches",f.id)),d=[];return await Hi(ke,async f=>{const h=await Promise.all(u.map(m=>f.get(m)));let A=s;for(let m=0;m<u.length&&A>0;m++){const p=u[m],g=h[m];if(!g.exists())continue;const x=g.data(),y=Math.max(0,Math.floor(Number(x.quantity||0))),b=Number.isFinite(Number(x.remaining))?Math.max(0,Math.floor(Number(x.remaining||0))):y;if(b<=0)continue;const w=Math.min(b,A),j=Math.max(0,b-w);f.update(p,{remaining:j}),d.push({batchId:p.id,qty:w,batchDate:String(x.date||""),productName:String(x.productName||"")}),A-=w}if(A>0)throw new Error(`Inventario insuficiente. Faltan ${A} unidades.`);if(a)for(const m of d)await xn(ht(ke,"batch_clothes_allocations"),{saleId:a,saleDate:n,productId:e,productName:m.productName??"",batchId:m.batchId,batchDate:m.batchDate??"",quantity:m.qty,createdAt:fr.now()})}),{allocations:d}}async function zT(t){const e=qt(ke,"sales_clothes",t),r=await ui(e);if(!r.exists())throw new Error("La venta no existe.");const n=r.data(),a=[];if(Array.isArray(n.items)&&n.items.length>0){const l={};if(n.allocationsByItem&&typeof n.allocationsByItem=="object")for(const c of Object.keys(n.allocationsByItem)){const u=n.allocationsByItem[c],d=String((u==null?void 0:u.productId)||c||"");if(!d)continue;const f=Array.isArray(u==null?void 0:u.allocations)?u.allocations:[];l[d]=f.map(h=>({batchId:String(h.batchId),qty:Math.max(0,Math.floor(Number(h.qty||h.quantity||0)))}))}if(Array.isArray(n.allocationsByItem))for(const c of n.allocationsByItem){const u=String((c==null?void 0:c.productId)||"");if(!u)continue;const d=Array.isArray(c==null?void 0:c.allocations)?c.allocations:[];l[u]=d.map(f=>({batchId:String(f.batchId),qty:Math.max(0,Math.floor(Number(f.qty||f.quantity||0)))}))}for(const c of n.items){const u=String((c==null?void 0:c.productId)||"");if(!u)continue;const d=Math.max(0,Math.floor(Number((c==null?void 0:c.qty)||(c==null?void 0:c.quantity)||0))),f=Array.isArray(c==null?void 0:c.allocations)?c.allocations.map(h=>({batchId:String(h.batchId),qty:Math.max(0,Math.floor(Number(h.qty||h.quantity||0)))})):l[u]||[];a.push({productId:u,productName:String((c==null?void 0:c.productName)||""),qty:d,allocations:f.length?f:void 0})}}else{const l=n.item||{},c=String(l.productId||n.productId||""),u=Math.max(0,Math.floor(Number(l.qty??n.quantity??0))),d=Array.isArray(n.allocations)?n.allocations.map(f=>({batchId:String(f.batchId),qty:Math.max(0,Math.floor(Number(f.qty||f.quantity||0)))})):[];c&&u>0&&a.push({productId:c,productName:String(l.productName||n.productName||""),qty:u,allocations:d.length?d:void 0})}return a.length===0?(await Hi(ke,async l=>{l.delete(e)}),{restored:0}):a.every(l=>Array.isArray(l.allocations)&&l.allocations.length>0)?(await Hi(ke,async c=>{const u=[];for(const f of a)for(const h of f.allocations||[])u.push({ref:qt(ke,"inventory_clothes_batches",h.batchId),addBack:Math.max(0,Math.floor(Number(h.qty||0)))});const d=await Promise.all(u.map(f=>c.get(f.ref)));for(let f=0;f<u.length;f++){const h=d[f];if(!h.exists())continue;const A=h.data(),m=Math.max(0,Math.floor(Number(A.remaining||0)));c.update(u[f].ref,{remaining:m+u[f].addBack})}c.delete(e)}),{restored:a.reduce((c,u)=>c+(u.allocations||[]).reduce((d,f)=>d+f.qty,0),0)}):(await Hi(ke,async l=>{const c={};for(const A of a){if(!A.productId||A.qty<=0)continue;const m=nr(ht(ke,"inventory_clothes_batches"),cr("productId","==",A.productId)),g=(await Ot(m)).docs.map(x=>{const y=x.data(),b=Math.max(0,Math.floor(Number(y.quantity||0))),w=Number.isFinite(Number(y.remaining))?Math.max(0,Math.floor(Number(y.remaining||0))):b;return{id:x.id,date:String(y.date||""),quantity:b,remaining:w}}).sort((x,y)=>x.date.localeCompare(y.date));c[A.productId]=g}const u=[];for(const A of a){if(!A.productId||A.qty<=0)continue;if(Array.isArray(A.allocations)&&A.allocations.length>0){for(const g of A.allocations)u.push({id:g.batchId,addBack:Math.max(0,Math.floor(Number(g.qty||0)))});continue}const m=c[A.productId]||[];let p=A.qty;for(const g of m){if(p<=0)break;const x=Math.max(0,g.quantity-g.remaining);if(x<=0)continue;const y=Math.min(x,p);u.push({id:g.id,addBack:y}),p-=y}for(const g of m){if(p<=0)break;const x=Math.min(p,A.qty);u.push({id:g.id,addBack:x}),p-=x}}const d={};for(const A of u)d[A.id]=(d[A.id]||0)+Math.max(0,Math.floor(Number(A.addBack||0)));const f=Object.keys(d).map(A=>qt(ke,"inventory_clothes_batches",A)),h=await Promise.all(f.map(A=>l.get(A)));for(let A=0;A<f.length;A++){const m=h[A];if(!m.exists())continue;const p=m.data(),g=Math.max(0,Math.floor(Number(p.remaining||0))),x=Math.max(0,Math.floor(Number(d[f[A].id]||0)));l.update(f[A],{remaining:g+x})}l.delete(e)}),{restored:a.reduce((l,c)=>l+c.qty,0)})}const GQ=["Altagracia","Taguizapa","El paso","Calaysa","Urbaite","Las Pilas"],Zf=t=>`C$ ${(Number(t)||0).toFixed(2)}`;function hC(t){const e="+505 ";if(!t.startsWith(e)){const n=t.replace(/\D/g,"");return e+n.slice(0,8)}const r=t.slice(e.length).replace(/\D/g,"");return e+r.slice(0,8)}async function qQ(t){const e=nr(ht(ke,"ar_movements"),cr("ref.saleId","==",t)),r=await Ot(e);await Promise.all(r.docs.map(n=>Cn(qt(ke,"ar_movements",n.id))))}function NIe(){const[t,e]=v.useState(!1),[r,n]=v.useState(!1),[a,s]=v.useState(null),[i,l]=v.useState([]),c=async ae=>{e(!0),n(!0),s(ae),l([]);try{const be=(await Ot(nr(ht(ke,"sales_clothes"),cr("__name__","==",ae)))).docs[0],_e=be==null?void 0:be.data(),tt=(Array.isArray(_e==null?void 0:_e.items)?_e.items:_e!=null&&_e.item?[_e.item]:[]).map(ot=>({productName:String(ot.productName||""),qty:Number(ot.qty||0),unitPrice:Number(ot.unitPrice||0),discount:Number(ot.discount||0),total:Number(ot.total||0)}));l(tt)}catch(ee){console.error(ee)}finally{n(!1)}},[u,d]=v.useState(""),[f,h]=v.useState("+505 "),[A,m]=v.useState(""),[p,g]=v.useState(""),[x,y]=v.useState("ACTIVO"),[b,w]=v.useState(0),[j,I]=v.useState([]),[_,E]=v.useState(!0),[S,k]=v.useState(""),[P,T]=v.useState(null),[F,Y]=v.useState(""),[he,ue]=v.useState("+505 "),[fe,me]=v.useState(""),[ne,Pe]=v.useState(""),[Ie,O]=v.useState("ACTIVO"),[H,R]=v.useState(0),[M,K]=v.useState(!1),[W,D]=v.useState(null),[L,Z]=v.useState(!1),[ge,U]=v.useState([]),[Ge,ie]=v.useState({saldoActual:0,totalAbonado:0,totalCargos:0}),[J,je]=v.useState(!1),[z,Ae]=v.useState(0),[ye,Qe]=v.useState(new Date().toISOString().slice(0,10)),[st,ut]=v.useState(""),[De,it]=v.useState(!1),[dt,ce]=v.useState(null),[oe,Me]=v.useState(""),[Le,ve]=v.useState(0),[le,Ue]=v.useState(""),[rt,mt]=v.useState(!1);v.useEffect(()=>{(async()=>{const ae=nr(ht(ke,"customers_clothes"),on("createdAt","desc")),ee=await Ot(ae),be=[];ee.forEach(_e=>{const Be=_e.data();be.push({id:_e.id,name:Be.name??"",phone:Be.phone??"+505 ",place:Be.place??"",notes:Be.notes??"",status:Be.status??"ACTIVO",creditLimit:Number(Be.creditLimit??0),createdAt:Be.createdAt??fr.now(),balance:0})});for(const _e of be)try{const Be=nr(ht(ke,"ar_movements"),cr("customerId","==",_e.id)),tt=await Ot(Be);let ot=0;tt.forEach(te=>ot+=Number(te.data().amount||0)),_e.balance=ot}catch{_e.balance=0}I(be),E(!1)})()},[]);const gt=()=>{d(""),h("+505 "),m(""),g(""),y("ACTIVO"),w(0)},Ct=async ae=>{if(ae.preventDefault(),k(""),!u.trim()){k("Ingresa el nombre.");return}const ee=hC(f);if(ee.length<6){k("Telfono incompleto.");return}try{const be=await xn(ht(ke,"customers_clothes"),{name:u.trim(),phone:ee,place:A||"",notes:p||"",status:x,creditLimit:Number(b||0),createdAt:fr.now()});I(_e=>[{id:be.id,name:u.trim(),phone:ee,place:A||"",notes:p||"",status:x,creditLimit:Number(b||0),createdAt:fr.now(),balance:0},..._e]),gt(),mt(!1),k(" Cliente creado")}catch(be){console.error(be),k(" Error al crear cliente")}},jt=ae=>{T(ae.id),Y(ae.name),ue(ae.phone||"+505 "),me(ae.place||""),Pe(ae.notes||""),O(ae.status||"ACTIVO"),R(Number(ae.creditLimit||0))},xe=()=>{T(null),Y(""),ue("+505 "),me(""),Pe(""),O("ACTIVO"),R(0)},He=async()=>{if(!P)return;const ae=hC(he);if(!F.trim()){k("Ingresa el nombre.");return}try{await nn(qt(ke,"customers_clothes",P),{name:F.trim(),phone:ae,place:fe||"",notes:ne||"",status:Ie,creditLimit:Number(H||0)}),I(ee=>ee.map(be=>be.id===P?{...be,name:F.trim(),phone:ae,place:fe||"",notes:ne||"",status:Ie,creditLimit:Number(H||0)}:be)),xe(),k(" Cliente actualizado")}catch(ee){console.error(ee),k(" Error al actualizar")}},Ce=async ae=>{if(confirm(`Eliminar al cliente "${ae.name}"?
Se devolvern al inventario todas las prendas de sus compras y se borrarn sus movimientos.`))try{E(!0);const be=nr(ht(ke,"sales_clothes"),cr("customerId","==",ae.id)),_e=await Ot(be);for(const ot of _e.docs){const te=ot.id;try{await zT(te)}catch(V){console.warn("restoreSaleAndDeleteClothes error",V);try{await Cn(qt(ke,"sales_clothes",te))}catch{}}await qQ(te)}const Be=nr(ht(ke,"ar_movements"),cr("customerId","==",ae.id)),tt=await Ot(Be);await Promise.all(tt.docs.map(ot=>Cn(qt(ke,"ar_movements",ot.id)))),await Cn(qt(ke,"customers_clothes",ae.id)),I(ot=>ot.filter(te=>te.id!==ae.id)),k(" Cliente eliminado y prendas devueltas al inventario")}catch(be){console.error(be),k(" No se pudo eliminar el cliente.")}finally{E(!1)}},lt=async ae=>{D(ae),U([]),ie({saldoActual:0,totalAbonado:0,totalCargos:0}),K(!0),je(!1),Ae(0),Qe(new Date().toISOString().slice(0,10)),ut(""),ce(null),Z(!0);try{const ee=nr(ht(ke,"ar_movements"),cr("customerId","==",ae.id)),be=await Ot(ee),_e=[];be.forEach(Be=>{var ot,te;const tt=Be.data();_e.push({id:Be.id,date:tt.date??((te=(ot=tt.createdAt)==null?void 0:ot.toDate)!=null&&te.call(ot)?tt.createdAt.toDate().toISOString().slice(0,10):""),type:tt.type??"CARGO",amount:Number(tt.amount||0),ref:tt.ref||{},comment:tt.comment||"",createdAt:tt.createdAt})}),_e.sort((Be,tt)=>{var V,re;if(Be.date!==tt.date)return Be.date.localeCompare(tt.date);const ot=((V=Be.createdAt)==null?void 0:V.seconds)||0,te=((re=tt.createdAt)==null?void 0:re.seconds)||0;return ot-te}),U(_e),nt(_e)}catch(ee){console.error(ee),k(" No se pudo cargar el estado de cuenta")}finally{Z(!1)}},nt=ae=>{const ee=ae.reduce((Be,tt)=>Be+(Number(tt.amount)||0),0),be=ae.filter(Be=>Number(Be.amount)<0).reduce((Be,tt)=>Be+Math.abs(Number(tt.amount)||0),0),_e=ae.filter(Be=>Number(Be.amount)>0).reduce((Be,tt)=>Be+Number(tt.amount)||0,0);ie({saldoActual:ee,totalAbonado:be,totalCargos:_e})},Xe=async()=>{if(!W)return;k("");const ae=Number(z||0);if(!(ae>0)){k("Ingresa un monto de abono mayor a 0.");return}const ee=parseFloat(ae.toFixed(2));if(!ye){k("Selecciona la fecha del abono.");return}try{it(!0);const be={customerId:W.id,type:"ABONO",amount:-ee,date:ye,comment:st||"",createdAt:fr.now()},Be={id:(await xn(ht(ke,"ar_movements"),be)).id,date:ye,type:"ABONO",amount:-ee,comment:st||"",createdAt:fr.now()},tt=[...ge,Be].sort((ot,te)=>{var pe,Ee;if(ot.date!==te.date)return ot.date.localeCompare(te.date);const V=((pe=ot.createdAt)==null?void 0:pe.seconds)||0,re=((Ee=te.createdAt)==null?void 0:Ee.seconds)||0;return V-re});U(tt),nt(tt),I(ot=>ot.map(te=>te.id===W.id?{...te,balance:(te.balance||0)-ee}:te)),D(ot=>ot&&{...ot,balance:(ot.balance||0)-ee}),Ae(0),ut(""),Qe(new Date().toISOString().slice(0,10)),je(!1),k(" Abono registrado")}catch(be){console.error(be),k(" Error al registrar el abono")}finally{it(!1)}},It=ae=>{ce(ae.id),Me(ae.date||new Date().toISOString().slice(0,10)),ve(Math.abs(Number(ae.amount||0))),Ue(ae.comment||"")},$t=()=>{ce(null),Me(""),ve(0),Ue("")},Ke=async()=>{if(!dt)return;const ae=ge.findIndex(Be=>Be.id===dt);if(ae===-1)return;const ee=ge[ae],be=Number(Le||0);if(!(be>0)){k("El monto debe ser mayor a 0.");return}const _e=ee.type==="ABONO"?-parseFloat(be.toFixed(2)):+parseFloat(be.toFixed(2));try{await nn(qt(ke,"ar_movements",dt),{date:oe,amount:_e,comment:le||""});const Be=[...ge];Be[ae]={...ee,date:oe,amount:_e,comment:le||""},Be.sort((ot,te)=>{var pe,Ee;if(ot.date!==te.date)return ot.date.localeCompare(te.date);const V=((pe=ot.createdAt)==null?void 0:pe.seconds)||0,re=((Ee=te.createdAt)==null?void 0:Ee.seconds)||0;return V-re}),U(Be),nt(Be);const tt=Be.reduce((ot,te)=>ot+(Number(te.amount)||0),0);I(ot=>ot.map(te=>te.id===(W==null?void 0:W.id)?{...te,balance:tt}:te)),D(ot=>ot&&{...ot,balance:tt}),$t(),k(" Movimiento actualizado")}catch(Be){console.error(Be),k(" Error al actualizar movimiento")}},wt=async ae=>{var be,_e;if(confirm(`Eliminar este movimiento (${ae.type==="ABONO"?"Abono":"Compra"}) del ${ae.date}?${ae.type==="CARGO"&&((be=ae.ref)!=null&&be.saleId)?`
Se devolvern al inventario las prendas de esa venta.`:""}`))try{if(E(!0),ae.type==="CARGO"&&((_e=ae.ref)!=null&&_e.saleId)){try{await zT(ae.ref.saleId)}catch(ot){console.warn("restoreSaleAndDeleteClothes error",ot),E(!1),k(" No se pudo devolver inventario de la venta.");return}await qQ(ae.ref.saleId)}else await Cn(qt(ke,"ar_movements",ae.id));const Be=ge.filter(ot=>{var te,V;return ae.type==="CARGO"&&((te=ae.ref)!=null&&te.saleId)?((V=ot.ref)==null?void 0:V.saleId)!==ae.ref.saleId:ot.id!==ae.id});U(Be),nt(Be);const tt=Be.reduce((ot,te)=>ot+(Number(te.amount)||0),0);I(ot=>ot.map(te=>te.id===(W==null?void 0:W.id)?{...te,balance:tt}:te)),D(ot=>ot&&{...ot,balance:tt}),k(" Movimiento eliminado")}catch(Be){console.error(Be),k(" Error al eliminar movimiento")}finally{E(!1)}},q=v.useMemo(()=>[...j].sort((ae,ee)=>{var be,_e;return ae.status!==ee.status?ae.status==="BLOQUEADO"?1:-1:(((be=ee.createdAt)==null?void 0:be.seconds)||0)-(((_e=ae.createdAt)==null?void 0:_e.seconds)||0)}),[j]);return o.jsxs("div",{className:"max-w-6xl mx-auto",children:[o.jsxs("div",{className:"flex items-center justify-between mb-3",children:[o.jsx("h2",{className:"text-2xl font-bold",children:"Clientes (Ropa)"}),o.jsx("button",{className:"px-3 py-2 rounded bg-blue-600 text-white hover:bg-blue-700",onClick:()=>mt(!0),type:"button",children:"Crear Cliente"})]}),o.jsx("div",{className:"bg-white p-2 rounded shadow border w-full",children:o.jsxs("table",{className:"min-w-full w-full text-sm",children:[o.jsx("thead",{className:"bg-gray-100",children:o.jsxs("tr",{children:[o.jsx("th",{className:"p-2 border",children:"Fecha"}),o.jsx("th",{className:"p-2 border",children:"Nombre"}),o.jsx("th",{className:"p-2 border",children:"Telfono"}),o.jsx("th",{className:"p-2 border",children:"Lugar"}),o.jsx("th",{className:"p-2 border",children:"Estado"}),o.jsx("th",{className:"p-2 border",children:"Lmite"}),o.jsx("th",{className:"p-2 border",children:"Saldo"}),o.jsx("th",{className:"p-2 border",children:"Comentario"}),o.jsx("th",{className:"p-2 border",children:"Acciones"})]})}),o.jsx("tbody",{children:_?o.jsx("tr",{children:o.jsx("td",{className:"p-4 text-center",colSpan:9,children:"Cargando"})}):q.length===0?o.jsx("tr",{children:o.jsx("td",{className:"p-4 text-center",colSpan:9,children:"Sin clientes"})}):q.map(ae=>{var be;const ee=P===ae.id;return o.jsxs("tr",{className:"text-center",children:[o.jsx("td",{className:"p-2 border",children:(be=ae.createdAt)!=null&&be.toDate?ae.createdAt.toDate().toISOString().slice(0,10):""}),o.jsx("td",{className:"p-2 border",children:ee?o.jsx("input",{className:"w-full border p-1 rounded",value:F,onChange:_e=>Y(_e.target.value)}):ae.name}),o.jsx("td",{className:"p-2 border",children:ee?o.jsx("input",{className:"w-full border p-1 rounded",value:he,onChange:_e=>ue(hC(_e.target.value))}):ae.phone}),o.jsx("td",{className:"p-2 border",children:ee?o.jsxs("select",{className:"w-full border p-1 rounded",value:fe,onChange:_e=>me(_e.target.value),children:[o.jsx("option",{value:"",children:""}),GQ.map(_e=>o.jsx("option",{value:_e,children:_e},_e))]}):ae.place||""}),o.jsx("td",{className:"p-2 border",children:ee?o.jsxs("select",{className:"w-full border p-1 rounded",value:Ie,onChange:_e=>O(_e.target.value),children:[o.jsx("option",{value:"ACTIVO",children:"ACTIVO"}),o.jsx("option",{value:"BLOQUEADO",children:"BLOQUEADO"})]}):o.jsx("span",{className:`px-2 py-0.5 rounded text-xs ${ae.status==="ACTIVO"?"bg-green-100 text-green-700":"bg-red-100 text-red-700"}`,children:ae.status})}),o.jsx("td",{className:"p-2 border",children:ee?o.jsx("input",{type:"number",step:"0.01",inputMode:"decimal",className:"w-full border p-1 rounded text-right",value:Number.isNaN(H)?"":H,onChange:_e=>R(Math.max(0,Number(_e.target.value||0)))}):Zf(ae.creditLimit||0)}),o.jsx("td",{className:"p-2 border font-semibold",children:Zf(ae.balance||0)}),o.jsx("td",{className:"p-2 border",children:ee?o.jsx("textarea",{className:"w-full border p-1 rounded resize-y min-h-12",value:ne,onChange:_e=>Pe(_e.target.value),maxLength:500}):o.jsx("span",{title:ae.notes||"",children:(ae.notes||"").length>40?(ae.notes||"").slice(0,40)+"":ae.notes||""})}),o.jsx("td",{className:"p-2 border",children:o.jsx("div",{className:"flex gap-2 justify-center",children:ee?o.jsxs(o.Fragment,{children:[o.jsx("button",{className:"px-2 py-1 rounded text-white bg-blue-600 hover:bg-blue-700",onClick:He,children:"Guardar"}),o.jsx("button",{className:"px-2 py-1 rounded bg-gray-200 hover:bg-gray-300",onClick:xe,children:"Cancelar"})]}):o.jsxs(o.Fragment,{children:[o.jsx("button",{className:"px-2 py-1 rounded text-white bg-yellow-600 hover:bg-yellow-700",onClick:()=>jt(ae),children:"Editar"}),o.jsx("button",{className:"px-2 py-1 rounded text-white bg-red-600 hover:bg-red-700",onClick:()=>Ce(ae),children:"Borrar"}),o.jsx("button",{className:"px-2 py-1 rounded text-white bg-indigo-600 hover:bg-indigo-700",onClick:()=>lt(ae),title:"Ver compras y abonos",children:"Estado de cuenta"})]})})})]},ae.id)})})]})}),S&&o.jsx("p",{className:"mt-2 text-sm",children:S}),rt&&zc.createPortal(o.jsxs("div",{className:"fixed inset-0 z-[70] flex items-center justify-center",children:[o.jsx("div",{className:"absolute inset-0 bg-black/40",onClick:()=>mt(!1)}),o.jsxs("div",{className:"relative bg-white rounded-lg shadow-2xl border w-[96%] max-w-3xl max-h-[92vh] overflow-auto p-4",children:[o.jsxs("div",{className:"flex items-center justify-between mb-2",children:[o.jsx("h3",{className:"text-lg font-bold",children:"Crear Cliente"}),o.jsx("button",{className:"px-3 py-1 rounded bg-gray-200 hover:bg-gray-300",onClick:()=>mt(!1),type:"button",children:"Cerrar"})]}),o.jsxs("form",{onSubmit:Ct,className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[o.jsxs("div",{children:[o.jsx("label",{className:"block text-sm font-semibold",children:"Nombre"}),o.jsx("input",{className:"w-full border p-2 rounded",placeholder:"Ej: Mara Lpez",value:u,onChange:ae=>d(ae.target.value)})]}),o.jsxs("div",{children:[o.jsx("label",{className:"block text-sm font-semibold",children:"Telfono"}),o.jsx("input",{className:"w-full border p-2 rounded",value:f,onChange:ae=>h(hC(ae.target.value)),placeholder:"+505 88888888",inputMode:"numeric"})]}),o.jsxs("div",{children:[o.jsx("label",{className:"block text-sm font-semibold",children:"Lugar"}),o.jsxs("select",{className:"w-full border p-2 rounded",value:A,onChange:ae=>m(ae.target.value),children:[o.jsx("option",{value:"",children:""}),GQ.map(ae=>o.jsx("option",{value:ae,children:ae},ae))]})]}),o.jsxs("div",{children:[o.jsx("label",{className:"block text-sm font-semibold",children:"Estado"}),o.jsxs("select",{className:"w-full border p-2 rounded",value:x,onChange:ae=>y(ae.target.value),children:[o.jsx("option",{value:"ACTIVO",children:"ACTIVO"}),o.jsx("option",{value:"BLOQUEADO",children:"BLOQUEADO"})]})]}),o.jsxs("div",{children:[o.jsx("label",{className:"block text-sm font-semibold",children:"Lmite de crdito (opcional)"}),o.jsx("input",{type:"number",step:"0.01",inputMode:"decimal",className:"w-full border p-2 rounded",value:b===0?"":b,onChange:ae=>w(Math.max(0,Number(ae.target.value||0))),placeholder:"Ej: 2000"})]}),o.jsxs("div",{className:"md:col-span-2",children:[o.jsx("label",{className:"block text-sm font-semibold",children:"Comentario"}),o.jsx("textarea",{className:"w-full border p-2 rounded resize-y min-h-24",value:p,onChange:ae=>g(ae.target.value),maxLength:500,placeholder:"Notas del cliente"}),o.jsxs("div",{className:"text-xs text-gray-500 text-right",children:[p.length,"/500"]})]}),o.jsxs("div",{className:"md:col-span-2 flex justify-end gap-2",children:[o.jsx("button",{type:"button",className:"px-4 py-2 rounded bg-gray-200 hover:bg-gray-300",onClick:()=>mt(!1),children:"Cancelar"}),o.jsx("button",{className:"bg-blue-600 text-white px-4 py-2 rounded hover:bg-blue-700",children:"Guardar cliente"})]})]})]})]}),document.body),M&&o.jsx("div",{className:"fixed inset-0 bg-black/40 flex items-center justify-center z-50",children:o.jsxs("div",{className:"bg-white rounded-lg shadow-xl border w-[95%] max-w-5xl p-4",children:[o.jsxs("div",{className:"flex items-center justify-between mb-2",children:[o.jsxs("h3",{className:"text-lg font-bold",children:["Estado de cuenta  ",(W==null?void 0:W.name)||""]}),o.jsxs("div",{className:"flex gap-2",children:[o.jsx("button",{className:"px-3 py-1 rounded bg-green-600 text-white hover:bg-green-700",onClick:()=>{Ae(0),Qe(new Date().toISOString().slice(0,10)),ut(""),je(!0)},children:"Abonar"}),o.jsx("button",{className:"px-3 py-1 rounded bg-gray-200 hover:bg-gray-300",onClick:()=>K(!1),children:"Cerrar"})]})]}),o.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-3 mb-3",children:[o.jsxs("div",{className:"p-3 border rounded bg-gray-50",children:[o.jsx("div",{className:"text-xs text-gray-600",children:"Saldo actual"}),o.jsx("div",{className:"text-xl font-semibold",children:Zf(Ge.saldoActual)})]}),o.jsxs("div",{className:"p-3 border rounded bg-gray-50",children:[o.jsx("div",{className:"text-xs text-gray-600",children:"Total abonado"}),o.jsx("div",{className:"text-xl font-semibold",children:Zf(Ge.totalAbonado)})]}),o.jsxs("div",{className:"p-3 border rounded bg-gray-50",children:[o.jsx("div",{className:"text-xs text-gray-600",children:"Saldo restante"}),o.jsx("div",{className:"text-xl font-semibold",children:Zf(Ge.saldoActual)})]})]}),o.jsx("div",{className:"bg-white rounded border overflow-x-auto",children:o.jsxs("table",{className:"min-w-full text-sm",children:[o.jsx("thead",{className:"bg-gray-100",children:o.jsxs("tr",{children:[o.jsx("th",{className:"p-2 border",children:"Fecha"}),o.jsx("th",{className:"p-2 border",children:"Tipo"}),o.jsx("th",{className:"p-2 border",children:"Referencia"}),o.jsx("th",{className:"p-2 border",children:"Comentario"}),o.jsx("th",{className:"p-2 border",children:"Monto"}),o.jsx("th",{className:"p-2 border",children:"Acciones"})]})}),o.jsx("tbody",{children:L?o.jsx("tr",{children:o.jsx("td",{colSpan:6,className:"p-4 text-center",children:"Cargando"})}):ge.length===0?o.jsx("tr",{children:o.jsx("td",{colSpan:6,className:"p-4 text-center",children:"Sin movimientos"})}):ge.map(ae=>{var be,_e;const ee=dt===ae.id;return o.jsxs("tr",{className:"text-center",children:[o.jsx("td",{className:"p-2 border",children:ee?o.jsx("input",{type:"date",className:"w-full border p-1 rounded",value:oe,onChange:Be=>Me(Be.target.value)}):ae.date||""}),o.jsx("td",{className:"p-2 border",children:ae.amount>=0?(be=ae.ref)!=null&&be.saleId?o.jsx("button",{type:"button",className:"px-2 py-0.5 rounded text-xs bg-yellow-100 text-yellow-700 underline",title:"Ver piezas de esta compra",onClick:()=>c(ae.ref.saleId),children:"COMPRA (CARGO)"}):o.jsx("span",{className:"px-2 py-0.5 rounded text-xs bg-yellow-100 text-yellow-700",children:"COMPRA (CARGO)"}):o.jsx("span",{className:"px-2 py-0.5 rounded text-xs bg-green-100 text-green-700",children:"ABONO"})}),o.jsx("td",{className:"p-2 border",children:(_e=ae.ref)!=null&&_e.saleId?`Venta #${ae.ref.saleId}`:""}),o.jsx("td",{className:"p-2 border",children:ee?o.jsx("input",{className:"w-full border p-1 rounded",value:le,onChange:Be=>Ue(Be.target.value),placeholder:"Comentario"}):o.jsx("span",{title:ae.comment||"",children:(ae.comment||"").length>40?(ae.comment||"").slice(0,40)+"":ae.comment||""})}),o.jsx("td",{className:"p-2 border font-semibold",children:ee?o.jsx("input",{type:"number",step:"0.01",inputMode:"decimal",className:"w-full border p-1 rounded text-right",value:Number.isNaN(Le)?"":Le,onChange:Be=>{const tt=Number(Be.target.value||0),ot=Number.isFinite(tt)?Math.max(0,parseFloat(tt.toFixed(2))):0;ve(ot)},placeholder:"0.00",title:ae.type==="ABONO"?"Se guardar como negativo":"Se guardar como positivo"}):Zf(ae.amount)}),o.jsx("td",{className:"p-2 border",children:ee?o.jsxs("div",{className:"flex gap-2 justify-center",children:[o.jsx("button",{className:"px-2 py-1 rounded text-white bg-blue-600 hover:bg-blue-700",onClick:Ke,children:"Guardar"}),o.jsx("button",{className:"px-2 py-1 rounded bg-gray-200 hover:bg-gray-300",onClick:$t,children:"Cancelar"})]}):o.jsxs("div",{className:"flex gap-2 justify-center",children:[o.jsx("button",{className:"px-2 py-1 rounded text-white bg-yellow-600 hover:bg-yellow-700",onClick:()=>It(ae),children:"Editar"}),o.jsx("button",{className:"px-2 py-1 rounded text-white bg-red-600 hover:bg-red-700",onClick:()=>wt(ae),children:"Borrar"})]})})]},ae.id)})})]})})]})}),J&&o.jsx("div",{className:"fixed inset-0 bg-black/50 flex items-center justify-center z-[60]",children:o.jsxs("div",{className:"bg-white rounded-lg shadow-2xl border w-[95%] max-w-md p-4",children:[o.jsxs("h3",{className:"text-lg font-bold",children:["Registrar abono  ",(W==null?void 0:W.name)||""]}),o.jsxs("div",{className:"grid grid-cols-1 gap-3",children:[o.jsxs("div",{children:[o.jsx("label",{className:"block text-sm font-semibold",children:"Fecha"}),o.jsx("input",{type:"date",className:"w-full border p-2 rounded",value:ye,onChange:ae=>Qe(ae.target.value)})]}),o.jsxs("div",{children:[o.jsx("label",{className:"block text-sm font-semibold",children:"Monto del abono"}),o.jsx("input",{type:"number",step:"0.01",inputMode:"decimal",className:"w-full border p-2 rounded",value:z===0?"":z,onChange:ae=>{const ee=Number(ae.target.value||0),be=Number.isFinite(ee)?Math.max(0,parseFloat(ee.toFixed(2))):0;Ae(be)},placeholder:"0.00"}),o.jsx("div",{className:"text-xs text-gray-500 mt-1",children:"Se guarda con 2 decimales (se registrar como ABONO negativo)."})]}),o.jsxs("div",{children:[o.jsx("label",{className:"block text-sm font-semibold",children:"Comentario (opcional)"}),o.jsx("textarea",{className:"w-full border p-2 rounded resize-y min-h-20",value:st,onChange:ae=>ut(ae.target.value),maxLength:250,placeholder:"Ej: Abono en efectivo"}),o.jsxs("div",{className:"text-xs text-gray-500 text-right",children:[st.length,"/250"]})]})]}),o.jsxs("div",{className:"mt-4 flex justify-end gap-2",children:[o.jsx("button",{className:"px-3 py-2 rounded bg-gray-200 hover:bg-gray-300",onClick:()=>je(!1),disabled:De,children:"Cancelar"}),o.jsx("button",{className:"px-3 py-2 rounded bg-green-600 text-white hover:bg-green-700 disabled:opacity-60",onClick:Xe,disabled:De,children:De?"Guardando...":"Guardar abono"})]})]})}),t&&o.jsx("div",{className:"fixed inset-0 bg-black/40 flex items-center justify-center z-[65]",children:o.jsxs("div",{className:"bg-white rounded-lg shadow-xl border w-[95%] max-w-3xl p-4",children:[o.jsxs("div",{className:"flex items-center justify-between mb-2",children:[o.jsxs("h3",{className:"text-lg font-bold",children:["Piezas vendidas"," ",a?` #${a}`:""]}),o.jsx("button",{className:"px-3 py-1 rounded bg-gray-200 hover:bg-gray-300",onClick:()=>e(!1),children:"Cerrar"})]}),o.jsx("div",{className:"bg-white rounded border overflow-x-auto",children:o.jsxs("table",{className:"min-w-full text-sm",children:[o.jsx("thead",{className:"bg-gray-100",children:o.jsxs("tr",{children:[o.jsx("th",{className:"p-2 border",children:"Producto"}),o.jsx("th",{className:"p-2 border text-right",children:"Cantidad"}),o.jsx("th",{className:"p-2 border text-right",children:"Precio"}),o.jsx("th",{className:"p-2 border text-right",children:"Descuento"}),o.jsx("th",{className:"p-2 border text-right",children:"Monto"})]})}),o.jsx("tbody",{children:r?o.jsx("tr",{children:o.jsx("td",{colSpan:5,className:"p-4 text-center",children:"Cargando"})}):i.length===0?o.jsx("tr",{children:o.jsx("td",{colSpan:5,className:"p-4 text-center",children:"Sin tems en esta venta."})}):i.map((ae,ee)=>o.jsxs("tr",{className:"text-center",children:[o.jsx("td",{className:"p-2 border text-left",children:ae.productName}),o.jsx("td",{className:"p-2 border text-right",children:ae.qty}),o.jsx("td",{className:"p-2 border text-right",children:Zf(ae.unitPrice)}),o.jsx("td",{className:"p-2 border text-right",children:Zf(ae.discount||0)}),o.jsx("td",{className:"p-2 border text-right",children:Zf(ae.total)})]},ee))})]})})]})})]})}const Ug=t=>`C$ ${(Number(t)||0).toFixed(2)}`,CIe=["Altagracia","Taguizapa","El paso","Calaysa","Urbaite","Las Pilas"];async function _Ie(t){if(!t)return 0;const e=nr(ht(ke,"inventory_clothes_batches"),cr("productId","==",t)),r=await Ot(e);let n="0000-00-00",a=-1,s=0;return r.forEach(i=>{const l=i.data(),c=String(l.date||"0000-00-00"),u=Number(l.salePrice||0),d=l.createdAt,f=((d==null?void 0:d.seconds)??0)*1e3+((d==null?void 0:d.nanoseconds)??0)/1e6;c>n?(n=c,a=f,s=u):c===n&&f>a&&(a=f,s=u)}),Number(s||0)}async function zQ(t){if(!t)return 0;const e=nr(ht(ke,"inventory_clothes_batches"),cr("productId","==",t)),r=await Ot(e);let n=0;return r.forEach(a=>n+=Number(a.data().remaining||0)),n}function WQ(t){const e="+505 ";if(!t.startsWith(e)){const n=t.replace(/\D/g,"");return e+n.slice(0,8)}const r=t.slice(e.length).replace(/\D/g,"");return e+r.slice(0,8)}function EIe({role:t="",roles:e}={role:""}){const r=e&&e.length?e:t;Yr(r,"admin"),Yr(r,"vendedor_ropa");const[n,a]=v.useState([]),[s,i]=v.useState([]),[l,c]=v.useState({}),[u,d]=v.useState("CONTADO"),[f,h]=v.useState(""),[A,m]=v.useState(""),[p,g]=v.useState(new Date().toISOString().slice(0,10)),[x,y]=v.useState(""),[b,w]=v.useState([]),j=v.useMemo(()=>b.reduce((z,Ae)=>z+(Ae.qty||0),0),[b]),I=v.useMemo(()=>{const z=b.reduce((Ae,ye)=>{const Qe=Math.max(0,(Number(ye.unitPrice)||0)*(ye.qty||0)-(Number(ye.discount)||0));return Ae+Qe},0);return Math.floor(z*100)/100},[b]),[_,E]=v.useState(0),[S,k]=v.useState(""),[P,T]=v.useState(!1),[F,Y]=v.useState(!1),[he,ue]=v.useState(""),[fe,me]=v.useState("+505 "),[ne,Pe]=v.useState(""),[Ie,O]=v.useState(""),[H,R]=v.useState("ACTIVO"),[M,K]=v.useState(0),W=()=>{ue(""),me("+505 "),Pe(""),O(""),R("ACTIVO"),K(0)};v.useEffect(()=>{(async()=>{const z=nr(ht(ke,"customers_clothes"),on("createdAt","desc")),Ae=await Ot(z),ye=[];Ae.forEach(ce=>{const oe=ce.data();ye.push({id:ce.id,name:oe.name??"",phone:oe.phone??"+505 ",place:oe.place??"",status:oe.status??"ACTIVO",creditLimit:Number(oe.creditLimit??0),balance:0})});for(const ce of ye)try{const oe=nr(ht(ke,"ar_movements"),cr("customerId","==",ce.id)),Me=await Ot(oe);let Le=0;Me.forEach(ve=>Le+=Number(ve.data().amount||0)),ce.balance=Le}catch{ce.balance=0}a(ye);const Qe=nr(ht(ke,"products_clothes"),on("createdAt","desc")),st=await Ot(Qe),ut=[];st.forEach(ce=>{const oe=ce.data();ut.push({id:ce.id,name:oe.name??"(sin nombre)",sku:oe.sku??""})}),i(ut);const De=nr(ht(ke,"inventory_clothes_batches"),cr("remaining",">",0)),it=await Ot(De),dt={};it.forEach(ce=>{const oe=ce.data(),Me=oe.productId||"",Le=Number(oe.remaining||0);Me&&(dt[Me]=(dt[Me]||0)+Le)}),c(dt)})()},[]);const D=v.useMemo(()=>n.find(z=>z.id===f),[n,f]),L=(D==null?void 0:D.balance)||0,Z=u==="CREDITO"?L+Math.max(0,Number(I||0))-Math.max(0,Number(_||0)):0,ge=async z=>{if(!z)return;if(b.some(ut=>ut.productId===z)){y("");return}const Ae=s.find(ut=>ut.id===z);if(!Ae){y("");return}let ye=await _Ie(z);ye||(ye=Number((Ae==null?void 0:Ae.price)||0));const Qe=await zQ(z),st={productId:z,productName:Ae.name||"",sku:Ae.sku||"",unitPrice:Number(ye)||0,available:Number(Qe)||0,qty:0,discount:0};w(ut=>[...ut,st]),y("")},U=(z,Ae)=>{w(ye=>ye.map(Qe=>{if(Qe.productId!==z)return Qe;if(Ae==="")return{...Qe,qty:0};const st=Math.max(0,Math.floor(Number(Ae)));return{...Qe,qty:st}}))},Ge=(z,Ae)=>{w(ye=>ye.map(Qe=>{if(Qe.productId!==z)return Qe;if(Ae==="")return{...Qe,discount:0};const st=Math.max(0,Math.floor(Number(Ae)));return{...Qe,discount:st}}))},ie=z=>w(Ae=>Ae.filter(ye=>ye.productId!==z)),J=async()=>{if(!p)return"Selecciona la fecha.";if(b.length===0)return"Agrega al menos un producto.";const z=b.filter(Ae=>(Ae.qty||0)>0);if(z.length===0)return"Debes ingresar cantidades (> 0) en al menos un producto.";if(!(I>0))return"El total debe ser mayor a cero.";if(u==="CONTADO"){if(!A.trim())return"Ingresa el nombre del cliente (contado)."}else{if(!f)return"Selecciona un cliente (crdito).";if(_<0)return"El pago inicial no puede ser negativo.";if(_>I)return"El pago inicial no puede superar el total.";if((D==null?void 0:D.status)==="BLOQUEADO")return"El cliente est BLOQUEADO. No se puede facturar a crdito."}for(const Ae of z){const ye=await zQ(Ae.productId);if(Ae.qty>ye)return`Inventario insuficiente para "${Ae.productName}". Disponible: ${ye} unidades.`;const Qe=(Number(Ae.unitPrice)||0)*(Ae.qty||0),st=Number(Ae.discount)||0;if(!Number.isInteger(st)||st<0)return`El descuento en "${Ae.productName}" debe ser entero y  0.`;if(st>Qe)return`El descuento en "${Ae.productName}" no puede exceder C$ ${Qe.toFixed(2)}.`}return null},je=async z=>{z.preventDefault(),k("");const Ae=await J();if(Ae){k(" "+Ae);return}try{T(!0);const ye=b.filter(De=>(De.qty||0)>0).map(De=>{const it=(Number(De.unitPrice)||0)*(De.qty||0),dt=Math.max(0,Math.floor(Number(De.discount)||0)),ce=Math.max(0,it-dt);return{productId:De.productId,productName:De.productName,sku:De.sku||"",qty:De.qty,unitPrice:Number(De.unitPrice)||0,discount:dt,total:Math.floor(ce*100)/100}}),Qe={type:u,date:p,createdAt:fr.now(),itemsTotal:Number(I)||0,total:Number(I)||0,quantity:Number(j)||0,items:ye};u==="CONTADO"?Qe.customerName=A.trim():(Qe.customerId=f,Qe.downPayment=Number(_)||0);const st=await xn(ht(ke,"sales_clothes"),Qe);if(u==="CREDITO"&&f){const De={customerId:f,date:p,createdAt:fr.now(),ref:{saleId:st.id}};await xn(ht(ke,"ar_movements"),{...De,type:"CARGO",amount:Number(I)||0}),Number(_)>0&&await xn(ht(ke,"ar_movements"),{...De,type:"ABONO",amount:-Number(_)})}const ut={};for(const De of ye)if(De.qty>0){const{allocations:it}=await wIe({productId:De.productId,quantity:De.qty,saleDate:p,saleId:st.id});ut[De.productId]={productId:De.productId,allocations:it}}await nn(qt(ke,"sales_clothes",st.id),{allocationsByItem:ut}),d("CONTADO"),h(""),m(""),g(new Date().toISOString().slice(0,10)),w([]),E(0),u==="CREDITO"&&f&&a(De=>De.map(it=>it.id===f?{...it,balance:(it.balance||0)+(Number(I)||0)-(Number(_)||0)}:it)),k(" Venta registrada"),(async()=>{const De=nr(ht(ke,"inventory_clothes_batches"),cr("remaining",">",0)),it=await Ot(De),dt={};it.forEach(ce=>{const oe=ce.data(),Me=oe.productId||"",Le=Number(oe.remaining||0);Me&&(dt[Me]=(dt[Me]||0)+Le)}),c(dt)})()}catch(ye){console.error(ye),k(" Error al guardar la venta")}finally{T(!1)}};return o.jsxs("div",{className:"max-w-6xl mx-auto",children:[o.jsx("h2",{className:"text-2xl font-bold mb-3",children:"Ventas (Ropa)"}),o.jsxs("form",{onSubmit:je,className:"bg-white p-4 rounded shadow border mb-6 grid grid-cols-1 md:grid-cols-2 gap-4",children:[o.jsxs("div",{children:[o.jsx("label",{className:"block text-sm font-semibold",children:"Tipo de cliente"}),o.jsxs("select",{className:"w-full border p-2 rounded",value:u,onChange:z=>d(z.target.value),children:[o.jsx("option",{value:"CONTADO",children:"Contado"}),o.jsx("option",{value:"CREDITO",children:"Crdito"})]})]}),u==="CONTADO"?o.jsxs("div",{children:[o.jsx("label",{className:"block text-sm font-semibold",children:"Nombre del cliente (contado)"}),o.jsx("input",{className:"w-full border p-2 rounded",placeholder:"Ej: Cliente Mostrador",value:A,onChange:z=>m(z.target.value)})]}):o.jsxs("div",{className:"md:col-span-2",children:[o.jsx("label",{className:"block text-sm font-semibold",children:"Cliente (crdito)"}),o.jsxs("div",{className:"flex gap-2",children:[o.jsxs("select",{className:"flex-1 border p-2 rounded",value:f,onChange:z=>h(z.target.value),children:[o.jsx("option",{value:"",children:"Selecciona un cliente"}),n.map(z=>o.jsxs("option",{value:z.status==="ACTIVO"?z.id:"",disabled:z.status==="BLOQUEADO",children:[z.name," | ",z.phone," | Saldo: ",Ug(z.balance||0)]},z.id))]}),o.jsx("button",{type:"button",className:"px-20 py-2 rounded bg-green-600 text-white hover:bg-green-700",onClick:()=>Y(!0),children:"Crear Cliente"})]}),o.jsxs("div",{className:"mt-2 grid grid-cols-1 md:grid-cols-3 gap-3",children:[o.jsxs("div",{className:"p-2 rounded bg-gray-50 border",children:[o.jsx("div",{className:"text-xs text-gray-600",children:"Saldo actual"}),o.jsx("div",{className:"text-lg font-semibold",children:Ug(L)})]}),o.jsxs("div",{children:[o.jsx("label",{className:"block text-sm font-semibold",children:"Pago inicial (opcional)"}),o.jsx("input",{type:"number",step:"0.01",inputMode:"decimal",className:"w-full border p-2 rounded",value:_===0?"":_,onChange:z=>E(Math.max(0,Number(z.target.value||0))),placeholder:"0.00"})]}),o.jsxs("div",{className:"p-2 rounded bg-gray-50 border",children:[o.jsx("div",{className:"text-xs text-gray-600",children:"Saldo proyectado"}),o.jsx("div",{className:"text-lg font-semibold",children:Ug(Z)})]})]})]}),o.jsxs("div",{children:[o.jsx("label",{className:"block text-sm font-semibold",children:"Fecha de venta"}),o.jsx("input",{type:"date",className:"w-full border p-2 rounded",value:p,onChange:z=>g(z.target.value)})]}),o.jsxs("div",{className:"md:col-span-2",children:[o.jsx("label",{className:"block text-sm font-semibold",children:"Producto"}),o.jsxs("select",{className:"w-full border p-2 rounded",value:x,onChange:async z=>{const Ae=z.target.value;y(Ae),await ge(Ae)},children:[o.jsx("option",{value:"",children:"Selecciona un producto"}),s.map(z=>{const Ae=b.some(st=>st.productId===z.id),ye=l[z.id]||0,Qe=Ae||ye<=0;return o.jsxs("option",{value:Qe?"":z.id,disabled:Qe,children:[z.name," ",z.sku?` ${z.sku}`:""," ",ye>0?`(disp: ${ye})`:"(sin stock)",Ae?" (seleccionado)":""]},z.id)})]}),o.jsx("div",{className:"text-xs text-gray-500 mt-1",children:"Productos sin existencias se muestran en gris y no se pueden seleccionar."})]}),o.jsxs("div",{className:"md:col-span-2",children:[o.jsxs("div",{className:"border rounded overflow-hidden",children:[o.jsxs("div",{className:"grid grid-cols-12 bg-gray-50 px-3 py-2 text-xs font-semibold border-b",children:[o.jsx("div",{className:"col-span-4",children:"Producto"}),o.jsx("div",{className:"col-span-2 text-right",children:"Precio"}),o.jsx("div",{className:"col-span-2 text-right",children:"Existencias"}),o.jsx("div",{className:"col-span-1 text-right",children:"Cantidad"}),o.jsx("div",{className:"col-span-1 text-right",children:"Descuento"}),o.jsx("div",{className:"col-span-1 text-right",children:"Monto"}),o.jsx("div",{className:"col-span-1 text-center",children:"Quitar"})]}),b.length===0?o.jsx("div",{className:"px-3 py-4 text-sm text-gray-500",children:"No hay productos agregados."}):b.map(z=>{const Ae=Math.max(0,(z.available||0)-(z.qty||0)),ye=(Number(z.unitPrice)||0)*(z.qty||0),Qe=Math.max(0,ye-(Number(z.discount)||0));return o.jsxs("div",{className:"grid grid-cols-12 items-center px-3 py-2 border-b text-sm gap-x-2",children:[o.jsx("div",{className:"col-span-4",children:o.jsxs("div",{className:"font-medium",children:[z.productName,z.sku?`  ${z.sku}`:""]})}),o.jsx("div",{className:"col-span-2 text-right",children:Ug(z.unitPrice)}),o.jsx("div",{className:"col-span-2 text-right",children:Ae}),o.jsx("div",{className:"col-span-1",children:o.jsx("input",{type:"number",step:"0",min:0,className:"w-full border p-1 rounded text-right",value:Number.isNaN(z.qty)||z.qty===0?"":z.qty,onChange:st=>U(z.productId,st.target.value),inputMode:"numeric",placeholder:"0",title:"Cantidad de piezas"})}),o.jsx("div",{className:"col-span-1",children:o.jsx("input",{type:"number",step:"1",min:0,className:"w-full border p-1 rounded text-right",value:Number.isNaN(z.discount)||z.discount===0?"":z.discount,onChange:st=>Ge(z.productId,st.target.value),inputMode:"numeric",placeholder:"0",title:"Descuento entero (C$)"})}),o.jsx("div",{className:"col-span-1 text-right",children:Ug(Qe)}),o.jsx("div",{className:"col-span-1 text-center",children:o.jsx("button",{type:"button",className:"px-2 py-1 rounded bg-red-100 hover:bg-red-200",onClick:()=>ie(z.productId),title:"Quitar producto",children:""})})]},z.productId)})]}),b.length>0&&o.jsxs("div",{className:"flex justify-end gap-6 mt-3 text-sm",children:[o.jsxs("div",{children:[o.jsx("span",{className:"text-gray-600",children:"Piezas totales: "}),o.jsx("span",{className:"font-semibold",children:j})]}),o.jsxs("div",{children:[o.jsx("span",{className:"text-gray-600",children:"Total: "}),o.jsx("span",{className:"font-semibold",children:Ug(I)})]})]})]}),o.jsx("div",{className:"md:col-span-2",children:o.jsx("button",{className:"bg-blue-600 text-white px-4 py-2 rounded hover:bg-blue-700 disabled:opacity-60",disabled:P,children:P?"Guardando...":"Registrar venta"})})]}),S&&o.jsx("p",{className:"mt-2 text-sm",children:S}),F&&o.jsx("div",{className:"fixed inset-0 bg-black/40 flex items-center justify-center z-50",children:o.jsxs("div",{className:"bg-white rounded-lg shadow-xl border w-[95%] max-w-xl p-4",children:[o.jsx("h3",{className:"text-lg font-bold mb-3",children:"Nuevo cliente"}),o.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-3",children:[o.jsxs("div",{children:[o.jsx("label",{className:"block text-sm font-semibold",children:"Nombre"}),o.jsx("input",{className:"w-full border p-2 rounded",value:he,onChange:z=>ue(z.target.value)})]}),o.jsxs("div",{children:[o.jsx("label",{className:"block text-sm font-semibold",children:"Telfono"}),o.jsx("input",{className:"w-full border p-2 rounded",value:fe,onChange:z=>me(WQ(z.target.value)),placeholder:"+505 88888888",inputMode:"numeric"})]}),o.jsxs("div",{children:[o.jsx("label",{className:"block text-sm font-semibold",children:"Lugar"}),o.jsxs("select",{className:"w-full border p-2 rounded",value:ne,onChange:z=>Pe(z.target.value),children:[o.jsx("option",{value:"",children:""}),CIe.map(z=>o.jsx("option",{value:z,children:z},z))]})]}),o.jsxs("div",{children:[o.jsx("label",{className:"block text-sm font-semibold",children:"Estado"}),o.jsxs("select",{className:"w-full border p-2 rounded",value:H,onChange:z=>R(z.target.value),children:[o.jsx("option",{value:"ACTIVO",children:"ACTIVO"}),o.jsx("option",{value:"BLOQUEADO",children:"BLOQUEADO"})]})]}),o.jsxs("div",{children:[o.jsx("label",{className:"block text-sm font-semibold",children:"Lmite de crdito (opcional)"}),o.jsx("input",{type:"number",step:"0.01",inputMode:"decimal",className:"w-full border p-2 rounded",value:M===0?"":M,onChange:z=>K(Math.max(0,Number(z.target.value||0))),placeholder:"Ej: 2000"})]}),o.jsxs("div",{className:"md:col-span-2",children:[o.jsx("label",{className:"block text-sm font-semibold",children:"Comentario"}),o.jsx("textarea",{className:"w-full border p-2 rounded resize-y min-h-20",value:Ie,onChange:z=>O(z.target.value),maxLength:500})]})]}),o.jsxs("div",{className:"mt-4 flex justify-end gap-2",children:[o.jsx("button",{className:"px-3 py-2 rounded bg-gray-200 hover:bg-gray-300",onClick:()=>{W(),Y(!1)},children:"Cancelar"}),o.jsx("button",{className:"px-3 py-2 rounded bg-green-600 text-white hover:bg-green-700",onClick:async()=>{if(k(""),!he.trim()){k("Ingresa el nombre del nuevo cliente.");return}const z=WQ(fe);try{const Ae=await xn(ht(ke,"customers_clothes"),{name:he.trim(),phone:z,place:ne||"",notes:Ie||"",status:H,creditLimit:Number(M||0),createdAt:fr.now()}),ye={id:Ae.id,name:he.trim(),phone:z,place:ne||"",status:H,creditLimit:Number(M||0),balance:0};a(Qe=>[ye,...Qe]),h(Ae.id),W(),Y(!1),k(" Cliente creado")}catch(Ae){console.error(Ae),k(" Error al crear cliente")}},children:"Guardar cliente"})]})]})}),P&&o.jsx("div",{className:"fixed inset-0 z-[70] bg-black/40 flex items-center justify-center",children:o.jsxs("div",{className:"bg-white rounded-lg shadow-xl border px-4 py-3 flex items-center gap-3",children:[o.jsxs("svg",{className:"h-5 w-5 animate-spin",viewBox:"0 0 24 24",fill:"none",children:[o.jsx("circle",{className:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor",strokeWidth:"4"}),o.jsx("path",{className:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8v4a4 4 0 00-4 4H4z"})]}),o.jsx("span",{className:"font-medium",children:"Guardando venta"})]})})]})}const Ii=t=>`C$ ${(Number(t)||0).toFixed(2)}`;function L_(t){var r;const e=t==null?void 0:t.date;return e||((r=t==null?void 0:t.createdAt)!=null&&r.toDate?Sr(t.createdAt.toDate(),"yyyy-MM-dd"):"")}function SIe(t,e){const r=L_(t);if(!r)return null;if(Array.isArray(t.items))return{id:e,date:r,type:t.type||"CONTADO",total:Number(t.total??t.itemsTotal??0),items:t.items.map(i=>({productId:String(i.productId||""),productName:String(i.productName||""),sku:i.sku||"",qty:Number(i.qty||0),unitPrice:Number(i.unitPrice??(Number(i.total||0)/Math.max(1,Number(i.qty||0))||0)),discount:Number(i.discount||0)})),customerId:t.customerId||void 0,customerName:t.customerName||void 0};const n=t.item||{},a=Number(t.quantity??n.qty??0),s=Number(t.total??t.itemsTotal??n.total??0);return{id:e,date:r,type:t.type||"CONTADO",total:Number(t.total??t.itemsTotal??s??0),items:[{productId:String(n.productId||t.productId||""),productName:String(n.productName||t.productName||""),sku:n.sku||t.sku||"",qty:a,unitPrice:Number(n.unitPrice??(s&&a?s/a:0)),discount:Number(n.discount||0)}],customerId:t.customerId||void 0,customerName:t.customerName||void 0}}function IIe(t,e,r,n){const a={};for(const l of t)a[l.productId]||(a[l.productId]={productName:l.productName,lots:[]}),a[l.productId].lots.push({date:l.date,qtyLeft:Number(l.quantity||0),cost:Number(l.purchasePrice||0)});for(const l of Object.keys(a))a[l].lots.sort((c,u)=>c.date.localeCompare(u.date));const s=[...e].sort((l,c)=>l.date.localeCompare(c.date));let i=0;for(const l of s)for(const c of l.items||[]){const u=a[c.productId];if(!u)continue;let d=Number(c.qty||0);if(!(d<=0))for(const f of u.lots){if(d<=0)break;if(f.qtyLeft<=0)continue;const h=Math.min(f.qtyLeft,d);l.date>=r&&l.date<=n&&(i+=h*f.cost),f.qtyLeft-=h,d-=h}}return i}function jIe(){const{refreshKey:t,refresh:e}=xc(),[r,n]=v.useState(Sr(Qd(new Date),"yyyy-MM-dd")),[a,s]=v.useState(Sr(Ud(new Date),"yyyy-MM-dd")),[i,l]=v.useState([]),[c,u]=v.useState([]),[d,f]=v.useState([]),[h,A]=v.useState([]),[m,p]=v.useState([]),[g,x]=v.useState([]),[y,b]=v.useState(!0),[w,j]=v.useState(""),[I,_]=v.useState(!1),[E,S]=v.useState(null),[k,P]=v.useState([]),[T,F]=v.useState(!1),[Y,he]=v.useState({totalBruto:0,totalDescuento:0,totalFiado:0,saldoActual:0,abonadoPeriodo:0});v.useEffect(()=>{(async()=>{b(!0),j("");try{const O=await Ot(ht(ke,"sales_clothes")),H=[],R=[];O.forEach(ie=>{const J=ie.data(),je=SIe(J,ie.id);je&&(je.date<=a&&H.push(je),je.date>=r&&je.date<=a&&R.push(je))}),u(H),l(R);const M=await Ot(ht(ke,"inventory_clothes_batches")),K=[];M.forEach(ie=>{const J=ie.data(),je=L_(J);!je||je>a||K.push({id:ie.id,productId:J.productId,productName:J.productName||"",date:je,quantity:Number(J.quantity||0),remaining:Number(J.remaining||0),purchasePrice:Number(J.purchasePrice||0)})}),f(K);const W=await Ot(ht(ke,"expenses_clothes")),D=[];W.forEach(ie=>{const J=ie.data(),je=L_(J);je&&je>=r&&je<=a&&D.push({id:ie.id,date:je,category:J.category||"",description:J.description||"",amount:Number(J.amount||0),status:J.status||""})}),A(D);const L=await Ot(ht(ke,"ar_movements")),Z=[],ge={};L.forEach(ie=>{const J=ie.data(),je=L_(J);if(!je)return;const z=J.customerId,Ae=Number(J.amount||0);z&&(ge[z]=(ge[z]||0)+Ae),J.type==="ABONO"&&je>=r&&je<=a&&Z.push({id:ie.id,customerId:z,type:"ABONO",amount:Ae,date:je})}),p(Z);const U=await Ot(ht(ke,"customers_clothes")),Ge=[];U.forEach(ie=>{const J=ie.data();Ge.push({id:ie.id,name:J.name||"",balance:ge[ie.id]||0})}),x(Ge)}catch(O){console.error(O),j(" Error cargando datos del dashboard.")}finally{b(!1)}})()},[r,a,t]);const ue=v.useMemo(()=>{try{return IIe(d,c,r,a)}catch(O){return console.error(O),0}},[d,c,r,a]),fe=v.useMemo(()=>{const O=i.reduce((ge,U)=>ge+(U.total||0),0),H=h.reduce((ge,U)=>ge+(U.amount||0),0),R=O-ue,M=R-H,K=m.reduce((ge,U)=>ge+Math.abs(U.amount||0),0),W=g.filter(ge=>(ge.balance||0)>0),D=W.reduce((ge,U)=>ge+(U.balance||0),0);let L=0,Z=0;for(const ge of i){const U=(ge.items||[]).reduce((Ge,ie)=>Ge+(Number(ie.qty)||0),0);ge.type==="CONTADO"?L+=U:Z+=U}return{ventasTotales:O,costoMercaderia:ue,gastosPeriodo:H,gananciaAntes:R,gananciaDespues:M,abonosRecibidos:K,saldosPendientes:D,clientesConSaldo:W.length,prendasCash:L,prendasCredito:Z}},[i,h,m,g,ue]),me=v.useMemo(()=>{const O={};for(const H of i){if(H.type!=="CREDITO"||!H.customerId)continue;const R=(H.items||[]).reduce((M,K)=>M+(Number(K.qty)||0),0);O[H.customerId]=(O[H.customerId]||0)+R}return g.filter(H=>(H.balance||0)>0).map(H=>({customerId:H.id,name:H.name,prendasCredito:O[H.id]||0,saldo:H.balance||0})).sort((H,R)=>R.saldo-H.saldo)},[g,i]),ne=v.useMemo(()=>{const O={};return g.forEach(H=>O[H.id]=H.name),O},[g]),Pe=v.useMemo(()=>[...i].sort((O,H)=>H.date.localeCompare(O.date)).map(O=>{var M;const H=(O.items||[]).reduce((K,W)=>K+(Number(W.qty)||0),0);let R="Cash";return O.type==="CREDITO"&&O.customerId?R=ne[O.customerId]||"":O.type==="CONTADO"&&(R=((M=O.customerName)==null?void 0:M.trim())||"Cash"),{id:O.id,date:O.date,type:O.type==="CREDITO"?"Crdito":"Cash",customer:R,piezas:H,total:Number(O.total||0)}}),[i,ne]),Ie=async O=>{_(!0),S({id:O.customerId,name:O.name}),P([]),F(!0),he({totalBruto:0,totalDescuento:0,totalFiado:0,saldoActual:0,abonadoPeriodo:0});try{const H=[];let R=0,M=0,K=0;for(const Z of i)if(!(Z.type!=="CREDITO"||Z.customerId!==O.customerId))for(const ge of Z.items||[]){const U=Number(ge.qty||0),Ge=Number(ge.unitPrice||0),ie=U*Ge,J=Math.max(0,Number(ge.discount||0)),je=Math.max(0,ie-J);H.push({saleId:Z.id,date:Z.date,productName:ge.productName,sku:ge.sku||"",qty:U,unitPrice:Ge,lineTotal:ie,discount:J,lineFinal:je}),R+=ie,M+=J,K+=je}let W=0;for(const Z of m)Z.customerId===O.customerId&&(W+=Math.abs(Z.amount||0));const D=g.find(Z=>Z.id===O.customerId),L=(D==null?void 0:D.balance)||0;P(H),he({totalBruto:R,totalDescuento:M,totalFiado:K,saldoActual:L,abonadoPeriodo:W})}catch(H){console.error(H),j(" No se pudo cargar el detalle del cliente.")}finally{F(!1)}};return o.jsxs("div",{className:"max-w-6xl mx-auto",children:[o.jsxs("div",{className:"flex items-center justify-between mb-3",children:[o.jsx("h2",{className:"text-2xl font-bold",children:"Finanzas (Ropa)"}),o.jsx(gc,{onClick:e,loading:y})]}),o.jsxs("div",{className:"bg-white p-3 rounded shadow border mb-4 flex flex-wrap items-end gap-3 text-sm",children:[o.jsxs("div",{className:"flex flex-col",children:[o.jsx("label",{className:"font-semibold",children:"Desde"}),o.jsx("input",{type:"date",className:"border rounded px-2 py-1",value:r,onChange:O=>n(O.target.value)})]}),o.jsxs("div",{className:"flex flex-col",children:[o.jsx("label",{className:"font-semibold",children:"Hasta"}),o.jsx("input",{type:"date",className:"border rounded px-2 py-1",value:a,onChange:O=>s(O.target.value)})]})]}),o.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 xl:grid-cols-4 gap-3 mb-4",children:[o.jsxs("div",{className:"p-3 border rounded bg-gray-50",children:[o.jsx("div",{className:"text-xs text-gray-600",children:"Ventas Totales"}),o.jsx("div",{className:"text-xl font-semibold",children:Ii(fe.ventasTotales)}),o.jsx("div",{className:"text-[11px] text-gray-500 mt-1",children:"Cash + Crdito del periodo."})]}),o.jsxs("div",{className:"p-3 border rounded bg-gray-50",children:[o.jsx("div",{className:"text-xs text-gray-600",children:"Costo de Mercadera (FIFO)"}),o.jsx("div",{className:"text-xl font-semibold",children:Ii(fe.costoMercaderia)})]}),o.jsxs("div",{className:"p-3 border rounded bg-gray-50",children:[o.jsx("div",{className:"text-xs text-gray-600",children:"Ganancia antes de Gastos"}),o.jsx("div",{className:"text-xl font-semibold text-green-600",children:Ii(fe.gananciaAntes)})]}),o.jsxs("div",{className:"p-3 border rounded bg-gray-50",children:[o.jsx("div",{className:"text-xs text-gray-600",children:"Gastos del Negocio"}),o.jsx("div",{className:"text-xl font-semibold",children:Ii(fe.gastosPeriodo)})]}),o.jsxs("div",{className:"p-3 border rounded bg-gray-50",children:[o.jsx("div",{className:"text-xs text-gray-600",children:"Ganancia despus de Gastos"}),o.jsx("div",{className:"text-xl font-semibold text-green-600",children:Ii(fe.gananciaDespues)})]}),o.jsxs("div",{className:"p-3 border rounded bg-gray-50",children:[o.jsx("div",{className:"text-xs text-gray-600",children:"Abonos Recibidos"}),o.jsx("div",{className:"text-xl font-semibold",children:Ii(fe.abonosRecibidos)})]}),o.jsxs("div",{className:"p-3 border rounded bg-gray-50",children:[o.jsx("div",{className:"text-xs text-gray-600",children:"Saldos Pendientes"}),o.jsx("div",{className:"text-xl font-semibold",children:Ii(fe.saldosPendientes)}),o.jsx("div",{className:"text-[11px] text-gray-500 mt-1",children:"A la fecha."})]}),o.jsxs("div",{className:"p-3 border rounded bg-gray-50",children:[o.jsx("div",{className:"text-xs text-gray-600",children:"Clientes con Saldo"}),o.jsx("div",{className:"text-xl font-semibold",children:fe.clientesConSaldo})]}),o.jsxs("div",{className:"p-3 border rounded bg-gray-50",children:[o.jsx("div",{className:"text-xs text-gray-600",children:"Prendas Cash"}),o.jsx("div",{className:"text-xl font-semibold",children:fe.prendasCash})]}),o.jsxs("div",{className:"p-3 border rounded bg-gray-50",children:[o.jsx("div",{className:"text-xs text-gray-600",children:"Prendas Crdito (vendidas)"}),o.jsx("div",{className:"text-xl font-semibold",children:fe.prendasCredito})]})]}),o.jsx("h3",{className:"text-lg font-semibold mb-2",children:"Consolidado por cliente"}),o.jsx("div",{className:"bg-white p-2 rounded shadow border w-full mb-6",children:o.jsxs("table",{className:"min-w-full w-full text-sm",children:[o.jsx("thead",{className:"bg-gray-100",children:o.jsxs("tr",{children:[o.jsx("th",{className:"p-2 border",children:"Cliente"}),o.jsx("th",{className:"p-2 border",children:"Prendas Crdito (periodo)"}),o.jsx("th",{className:"p-2 border",children:"Saldo actual"})]})}),o.jsx("tbody",{children:y?o.jsx("tr",{children:o.jsx("td",{className:"p-4 text-center",colSpan:3,children:"Cargando"})}):me.length===0?o.jsx("tr",{children:o.jsx("td",{className:"p-4 text-center",colSpan:3,children:"Sin clientes con saldo"})}):me.map(O=>o.jsxs("tr",{className:"text-center",children:[o.jsx("td",{className:"p-2 border",children:O.name}),o.jsx("td",{className:"p-2 border",children:o.jsx("button",{className:"underline text-blue-600 hover:text-blue-800",onClick:()=>Ie({customerId:O.customerId,name:O.name}),title:"Ver piezas fiadas del periodo",children:O.prendasCredito})}),o.jsx("td",{className:"p-2 border font-semibold",children:Ii(O.saldo)})]},O.customerId))})]})}),o.jsx("h3",{className:"text-lg font-semibold mb-2",children:"Transacciones del periodo"}),o.jsx("div",{className:"bg-white p-2 rounded shadow border w-full mb-6",children:o.jsxs("table",{className:"min-w-full w-full text-sm",children:[o.jsx("thead",{className:"bg-gray-100",children:o.jsxs("tr",{children:[o.jsx("th",{className:"p-2 border",children:"Fecha"}),o.jsx("th",{className:"p-2 border",children:"Cliente"}),o.jsx("th",{className:"p-2 border",children:"Tipo"}),o.jsx("th",{className:"p-2 border",children:"Piezas"}),o.jsx("th",{className:"p-2 border",children:"Monto"})]})}),o.jsx("tbody",{children:y?o.jsx("tr",{children:o.jsx("td",{className:"p-4 text-center",colSpan:5,children:"Cargando"})}):Pe.length===0?o.jsx("tr",{children:o.jsx("td",{className:"p-4 text-center",colSpan:5,children:"Sin transacciones en el rango seleccionado."})}):Pe.map(O=>o.jsxs("tr",{className:"text-center",children:[o.jsx("td",{className:"p-2 border",children:O.date}),o.jsx("td",{className:"p-2 border",children:O.customer}),o.jsx("td",{className:"p-2 border",children:O.type}),o.jsx("td",{className:"p-2 border",children:O.piezas}),o.jsx("td",{className:"p-2 border",children:Ii(O.total)})]},O.id))})]})}),o.jsx("h3",{className:"text-lg font-semibold mb-2",children:"Gastos del periodo"}),o.jsx("div",{className:"bg-white p-2 rounded shadow border w-full",children:o.jsxs("table",{className:"min-w-full w-full text-sm",children:[o.jsx("thead",{className:"bg-gray-100",children:o.jsxs("tr",{children:[o.jsx("th",{className:"p-2 border",children:"Fecha"}),o.jsx("th",{className:"p-2 border",children:"Categora"}),o.jsx("th",{className:"p-2 border",children:"Descripcin"}),o.jsx("th",{className:"p-2 border",children:"Monto"}),o.jsx("th",{className:"p-2 border",children:"Estado"})]})}),o.jsx("tbody",{children:y?o.jsx("tr",{children:o.jsx("td",{className:"p-4 text-center",colSpan:5,children:"Cargando"})}):h.length===0?o.jsx("tr",{children:o.jsx("td",{className:"p-4 text-center",colSpan:5,children:"Sin gastos en el rango seleccionado."})}):h.sort((O,H)=>O.date.localeCompare(H.date)).map(O=>o.jsxs("tr",{className:"text-center",children:[o.jsx("td",{className:"p-2 border",children:O.date}),o.jsx("td",{className:"p-2 border",children:O.category||""}),o.jsx("td",{className:"p-2 border",children:O.description?o.jsx("span",{title:O.description,children:O.description.length>40?O.description.slice(0,40)+"":O.description}):""}),o.jsx("td",{className:"p-2 border",children:Ii(O.amount)}),o.jsx("td",{className:"p-2 border",children:O.status||""})]},O.id))})]})}),w&&o.jsx("p",{className:"mt-2 text-sm",children:w}),I&&o.jsx("div",{className:"fixed inset-0 bg-black/40 flex items-center justify-center z-50",children:o.jsxs("div",{className:"bg-white rounded-lg shadow-xl border w-[95%] max-w-5xl p-4",children:[o.jsxs("div",{className:"flex items-center justify-between mb-2",children:[o.jsxs("h3",{className:"text-lg font-bold",children:["Detalle del cliente  ",(E==null?void 0:E.name)||""]}),o.jsx("button",{className:"px-3 py-1 rounded bg-gray-200 hover:bg-gray-300",onClick:()=>_(!1),children:"Cerrar"})]}),o.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 xl:grid-cols-5 gap-3 mb-3",children:[o.jsxs("div",{className:"p-3 border rounded bg-gray-50",children:[o.jsx("div",{className:"text-xs text-gray-600",children:"Total Bruto (periodo)"}),o.jsx("div",{className:"text-xl font-semibold",children:Ii(Y.totalBruto)})]}),o.jsxs("div",{className:"p-3 border rounded bg-gray-50",children:[o.jsx("div",{className:"text-xs text-gray-600",children:"Descuento (periodo)"}),o.jsx("div",{className:"text-xl font-semibold",children:Ii(Y.totalDescuento)})]}),o.jsxs("div",{className:"p-3 border rounded bg-gray-50",children:[o.jsx("div",{className:"text-xs text-gray-600",children:"Monto Total Fiado (periodo)"}),o.jsx("div",{className:"text-xl font-semibold",children:Ii(Y.totalFiado)})]}),o.jsxs("div",{className:"p-3 border rounded bg-gray-50",children:[o.jsx("div",{className:"text-xs text-gray-600",children:"Saldo actual"}),o.jsx("div",{className:"text-xl font-semibold",children:Ii(Y.saldoActual)})]}),o.jsxs("div",{className:"p-3 border rounded bg-gray-50",children:[o.jsx("div",{className:"text-xs text-gray-600",children:"Abonado (periodo)"}),o.jsx("div",{className:"text-xl font-semibold",children:Ii(Y.abonadoPeriodo)})]})]}),o.jsx("div",{className:"bg-white rounded border overflow-x-auto",children:o.jsxs("table",{className:"min-w-full text-sm",children:[o.jsx("thead",{className:"bg-gray-100",children:o.jsxs("tr",{children:[o.jsx("th",{className:"p-2 border",children:"Fecha compra"}),o.jsx("th",{className:"p-2 border",children:"Pieza"}),o.jsx("th",{className:"p-2 border",children:"SKU"}),o.jsx("th",{className:"p-2 border",children:"Cant."}),o.jsx("th",{className:"p-2 border",children:"P. Unit"}),o.jsx("th",{className:"p-2 border",children:"Monto"})," ",o.jsx("th",{className:"p-2 border",children:"Descuento"})," ",o.jsx("th",{className:"p-2 border",children:"Monto final"})," "]})}),o.jsx("tbody",{children:T?o.jsx("tr",{children:o.jsx("td",{colSpan:8,className:"p-4 text-center",children:"Cargando"})}):k.length===0?o.jsx("tr",{children:o.jsx("td",{colSpan:8,className:"p-4 text-center",children:"Sin piezas fiadas en el periodo."})}):k.sort((O,H)=>O.date.localeCompare(H.date)).map((O,H)=>o.jsxs("tr",{className:"text-center",children:[o.jsx("td",{className:"p-2 border",children:O.date}),o.jsx("td",{className:"p-2 border",children:O.productName}),o.jsx("td",{className:"p-2 border",children:O.sku||""}),o.jsx("td",{className:"p-2 border",children:O.qty}),o.jsx("td",{className:"p-2 border",children:Ii(O.unitPrice)}),o.jsx("td",{className:"p-2 border",children:Ii(O.lineTotal)}),o.jsx("td",{className:"p-2 border",children:Ii(O.discount)}),o.jsx("td",{className:"p-2 border",children:Ii(O.lineFinal)})]},`${O.saleId}-${H}`))})]})})]})})]})}const XQ=["Energia","Bolsas","Detergentes","Limpieza de Freezer","Delivery","Pago a Personal"],mC=t=>`C$ ${(Number(t)||0).toFixed(2)}`;function BIe(){const[t,e]=v.useState(Sr(Qd(new Date),"yyyy-MM-dd")),[r,n]=v.useState(Sr(Ud(new Date),"yyyy-MM-dd")),[a,s]=v.useState(Sr(new Date,"yyyy-MM-dd")),[i,l]=v.useState(""),[c,u]=v.useState(""),[d,f]=v.useState(0),[h,A]=v.useState("PENDIENTE"),[m,p]=v.useState(""),[g,x]=v.useState([]),[y,b]=v.useState(!0),[w,j]=v.useState(""),[I,_]=v.useState(null),[E,S]=v.useState(""),[k,P]=v.useState(""),[T,F]=v.useState(""),[Y,he]=v.useState(0),[ue,fe]=v.useState("PENDIENTE"),[me,ne]=v.useState("");v.useEffect(()=>{(async()=>{b(!0);try{const D=nr(ht(ke,"expenses_clothes"),on("date","desc")),L=await Ot(D),Z=[];L.forEach(ge=>{const U=ge.data();Z.push({id:ge.id,date:U.date||Sr(new Date,"yyyy-MM-dd"),category:U.category||"",description:U.description||"",amount:Number(U.amount||0),status:U.status||"PENDIENTE",notes:U.notes||"",createdAt:U.createdAt??fr.now()})}),x(Z)}catch(D){console.error(D),j(" Error al cargar gastos")}finally{b(!1)}})()},[]);const Pe=v.useMemo(()=>g.filter(D=>!(t&&D.date<t||r&&D.date>r)),[g,t,r]),Ie=v.useMemo(()=>{const D=Pe.reduce((ge,U)=>ge+(U.amount||0),0),L=Pe.filter(ge=>ge.status==="PAGADO").reduce((ge,U)=>ge+(U.amount||0),0),Z=D-L;return{total:D,pagado:L,pendiente:Z}},[Pe]),O=()=>{s(Sr(new Date,"yyyy-MM-dd")),l(""),u(""),f(0),A("PENDIENTE"),p("")},H=async D=>{if(D.preventDefault(),j(""),!i){j("Selecciona una categora.");return}if(!c.trim()){j("Ingresa una descripcin.");return}if(!d||d<=0){j("Ingresa un monto vlido.");return}try{const L=await xn(ht(ke,"expenses_clothes"),{date:a,category:i,description:c.trim(),amount:Number(d.toFixed(2)),status:h,notes:m||"",createdAt:fr.now()});x(Z=>[{id:L.id,date:a,category:i,description:c.trim(),amount:Number(d.toFixed(2)),status:h,notes:m||"",createdAt:fr.now()},...Z]),O(),j(" Gasto registrado")}catch(L){console.error(L),j(" Error al guardar gasto")}},R=D=>{_(D.id),S(D.date),P(D.category||""),F(D.description||""),he(Number(D.amount||0)),fe(D.status||"PENDIENTE"),ne(D.notes||"")},M=()=>{_(null),S(""),P(""),F(""),he(0),fe("PENDIENTE"),ne("")},K=async()=>{if(I){if(!k){j("Selecciona una categora.");return}if(!T.trim()){j("Ingresa una descripcin.");return}if(!Y||Y<=0){j("Ingresa un monto vlido.");return}try{await nn(qt(ke,"expenses_clothes",I),{date:E,category:k,description:T.trim(),amount:Number(Y.toFixed(2)),status:ue,notes:me||""}),x(D=>D.map(L=>L.id===I?{...L,date:E,category:k,description:T.trim(),amount:Number(Y.toFixed(2)),status:ue,notes:me||""}:L)),M(),j(" Gasto actualizado")}catch(D){console.error(D),j(" Error al actualizar gasto")}}},W=async D=>{confirm(`Eliminar el gasto "${D.description}"?`)&&(await Cn(qt(ke,"expenses_clothes",D.id)),x(Z=>Z.filter(ge=>ge.id!==D.id)),j(" Gasto borrado"))};return o.jsxs("div",{className:"max-w-6xl mx-auto",children:[o.jsx("h2",{className:"text-2xl font-bold mb-3",children:"Gastos (Ropa)"}),o.jsxs("div",{className:"bg-white p-3 rounded shadow border mb-4 flex flex-wrap items-end gap-3 text-sm",children:[o.jsxs("div",{className:"flex flex-col",children:[o.jsx("label",{className:"font-semibold",children:"Desde"}),o.jsx("input",{type:"date",className:"border rounded px-2 py-1",value:t,onChange:D=>e(D.target.value)})]}),o.jsxs("div",{className:"flex flex-col",children:[o.jsx("label",{className:"font-semibold",children:"Hasta"}),o.jsx("input",{type:"date",className:"border rounded px-2 py-1",value:r,onChange:D=>n(D.target.value)})]}),o.jsxs("div",{className:"ml-auto text-sm",children:[o.jsx("div",{className:"font-semibold",children:"Totales del rango"}),o.jsxs("div",{children:["Total: ",mC(Ie.total)]}),o.jsxs("div",{children:["Pagado: ",mC(Ie.pagado)]}),o.jsxs("div",{children:["Pendiente: ",mC(Ie.pendiente)]})]})]}),o.jsxs("form",{onSubmit:H,className:"bg-white p-4 rounded shadow border mb-6 grid grid-cols-1 md:grid-cols-2 gap-4",children:[o.jsxs("div",{children:[o.jsx("label",{className:"block text-sm font-semibold",children:"Fecha"}),o.jsx("input",{type:"date",className:"w-full border p-2 rounded",value:a,onChange:D=>s(D.target.value)})]}),o.jsxs("div",{children:[o.jsx("label",{className:"block text-sm font-semibold",children:"Categora"}),o.jsxs("select",{className:"w-full border p-2 rounded",value:i,onChange:D=>l(D.target.value),children:[o.jsx("option",{value:"",children:"Selecciona"}),XQ.map(D=>o.jsx("option",{value:D,children:D},D))]})]}),o.jsxs("div",{className:"md:col-span-2",children:[o.jsx("label",{className:"block text-sm font-semibold",children:"Descripcin"}),o.jsx("input",{className:"w-full border p-2 rounded",placeholder:"Detalle del gasto",value:c,onChange:D=>u(D.target.value)})]}),o.jsxs("div",{children:[o.jsx("label",{className:"block text-sm font-semibold",children:"Monto"}),o.jsx("input",{type:"number",step:"0.01",inputMode:"decimal",className:"w-full border p-2 rounded text-right",value:d===0?"":d,onChange:D=>f(Math.max(0,Number(D.target.value||0))),placeholder:"0.00"})]}),o.jsxs("div",{children:[o.jsx("label",{className:"block text-sm font-semibold",children:"Estado"}),o.jsxs("select",{className:"w-full border p-2 rounded",value:h,onChange:D=>A(D.target.value),children:[o.jsx("option",{value:"PENDIENTE",children:"Pendiente"}),o.jsx("option",{value:"PAGADO",children:"Pagado"})]})]}),o.jsxs("div",{className:"md:col-span-2",children:[o.jsx("label",{className:"block text-sm font-semibold",children:"Comentario"}),o.jsx("textarea",{className:"w-full border p-2 rounded resize-y min-h-24",value:m,onChange:D=>p(D.target.value),maxLength:500,placeholder:"Comentario / nota opcional"}),o.jsxs("div",{className:"text-xs text-gray-500 text-right",children:[m.length,"/500"]})]}),o.jsx("div",{className:"md:col-span-2",children:o.jsx("button",{className:"bg-blue-600 text-white px-4 py-2 rounded hover:bg-blue-700",children:"Guardar gasto"})})]}),o.jsx("div",{className:"bg-white p-2 rounded shadow border w-full",children:o.jsxs("table",{className:"min-w-full w-full text-sm",children:[o.jsx("thead",{className:"bg-gray-100",children:o.jsxs("tr",{children:[o.jsx("th",{className:"p-2 border",children:"Fecha"}),o.jsx("th",{className:"p-2 border",children:"Categora"}),o.jsx("th",{className:"p-2 border",children:"Descripcin"}),o.jsx("th",{className:"p-2 border",children:"Monto"}),o.jsx("th",{className:"p-2 border",children:"Estado"}),o.jsx("th",{className:"p-2 border",children:"Comentario"}),o.jsx("th",{className:"p-2 border",children:"Acciones"})]})}),o.jsx("tbody",{children:y?o.jsx("tr",{children:o.jsx("td",{className:"p-4 text-center",colSpan:7,children:"Cargando"})}):Pe.length===0?o.jsx("tr",{children:o.jsx("td",{className:"p-4 text-center",colSpan:7,children:"Sin gastos en el rango seleccionado."})}):Pe.slice().sort((D,L)=>D.date.localeCompare(L.date)).map(D=>{const L=I===D.id;return o.jsxs("tr",{className:"text-center",children:[o.jsx("td",{className:"p-2 border",children:L?o.jsx("input",{type:"date",className:"w-full border p-1 rounded",value:E,onChange:Z=>S(Z.target.value)}):D.date}),o.jsx("td",{className:"p-2 border",children:L?o.jsxs("select",{className:"w-full border p-1 rounded",value:k,onChange:Z=>P(Z.target.value),children:[o.jsx("option",{value:"",children:"Selecciona"}),XQ.map(Z=>o.jsx("option",{value:Z,children:Z},Z))]}):D.category||""}),o.jsx("td",{className:"p-2 border",children:L?o.jsx("input",{className:"w-full border p-1 rounded",value:T,onChange:Z=>F(Z.target.value)}):o.jsx("span",{title:D.description,children:D.description.length>40?D.description.slice(0,40)+"":D.description})}),o.jsx("td",{className:"p-2 border",children:L?o.jsx("input",{type:"number",step:"0.01",inputMode:"decimal",className:"w-full border p-1 rounded text-right",value:Number.isNaN(Y)?"":Y,onChange:Z=>he(Math.max(0,Number(Z.target.value||0)))}):mC(D.amount)}),o.jsx("td",{className:"p-2 border",children:L?o.jsxs("select",{className:"w-full border p-1 rounded",value:ue,onChange:Z=>fe(Z.target.value),children:[o.jsx("option",{value:"PENDIENTE",children:"Pendiente"}),o.jsx("option",{value:"PAGADO",children:"Pagado"})]}):o.jsx("span",{className:`px-2 py-0.5 rounded text-xs ${D.status==="PAGADO"?"bg-green-100 text-green-700":"bg-yellow-100 text-yellow-700"}`,children:D.status})}),o.jsx("td",{className:"p-2 border",children:L?o.jsx("textarea",{className:"w-full border p-1 rounded resize-y min-h-10",value:me,onChange:Z=>ne(Z.target.value),maxLength:500}):o.jsx("span",{title:D.notes||"",children:(D.notes||"").length>40?(D.notes||"").slice(0,40)+"":D.notes||""})}),o.jsx("td",{className:"p-2 border",children:o.jsx("div",{className:"flex gap-2 justify-center",children:L?o.jsxs(o.Fragment,{children:[o.jsx("button",{className:"px-2 py-1 rounded text-white bg-blue-600 hover:bg-blue-700",onClick:K,children:"Guardar"}),o.jsx("button",{className:"px-2 py-1 rounded bg-gray-200 hover:bg-gray-300",onClick:M,children:"Cancelar"})]}):o.jsxs(o.Fragment,{children:[o.jsx("button",{className:"px-2 py-1 rounded text-white bg-yellow-600 hover:bg-yellow-700",onClick:()=>R(D),children:"Editar"}),o.jsx("button",{className:"px-2 py-1 rounded text-white bg-red-600 hover:bg-red-700",onClick:()=>W(D),children:"Borrar"})]})})})]},D.id)})})]})}),w&&o.jsx("p",{className:"mt-2 text-sm",children:w})]})}const cd=t=>`C$ ${(Number(t)||0).toFixed(2)}`;function PIe(t){var e;return t!=null&&t.date?t.date:(e=t==null?void 0:t.createdAt)!=null&&e.toDate?Sr(t.createdAt.toDate(),"yyyy-MM-dd"):""}function TIe(t,e){const r=PIe(t);if(!r)return null;const n=t.item||{},a=Number((n==null?void 0:n.qty)??t.quantity??0)||0,s=Number((n==null?void 0:n.total)??t.total??0)||0,i=Number((n==null?void 0:n.unitPrice)??(a>0?s/a:0))||0;return{id:e,date:r,type:t.type||"CONTADO",total:Number(t.total||0),quantity:Number(t.quantity||a||0),customerId:t.customerId||void 0,customerName:t.customerName||void 0,downPayment:Number(t.downPayment||0),item:{productId:String((n==null?void 0:n.productId)||t.productId||""),productName:String((n==null?void 0:n.productName)||t.productName||""),sku:(n==null?void 0:n.sku)||t.sku||"",qty:a,unitPrice:i,total:a*i}}}async function kIe(t,e){if(e<=0)return;const r=nr(ht(ke,"inventory_clothes_batches"),cr("productId","==",t)),n=await Ot(r),a=[];n.forEach(i=>{const l=i.data();a.push({id:i.id,productId:l.productId,date:l.date||"",quantity:Number(l.quantity||0),remaining:Number(l.remaining||0)})}),a.sort((i,l)=>i.date.localeCompare(l.date));let s=e;for(const i of a){if(s<=0)break;if(i.remaining<=0)continue;const l=Math.min(i.remaining,s);s-=l,await nn(qt(ke,"inventory_clothes_batches",i.id),{remaining:Math.max(0,Number((i.remaining-l).toFixed(0)))})}s>0&&console.warn("consumeFIFO: falt inventario",s)}async function FIe(t,e){if(e<=0)return;const r=nr(ht(ke,"inventory_clothes_batches"),cr("productId","==",t)),n=await Ot(r),a=[];n.forEach(i=>{const l=i.data();a.push({id:i.id,productId:l.productId,date:l.date||"",quantity:Number(l.quantity||0),remaining:Number(l.remaining||0)})}),a.sort((i,l)=>i.date.localeCompare(l.date));let s=e;for(const i of a){if(s<=0)break;const l=Math.max(0,i.quantity-i.remaining);if(l<=0)continue;const c=Math.min(l,s);s-=c,await nn(qt(ke,"inventory_clothes_batches",i.id),{remaining:Number((i.remaining+c).toFixed(0))})}s>0&&console.warn("restoreFIFO: no se devolvi todo",s)}async function fte(t){const e=nr(ht(ke,"ar_movements"),cr("ref.saleId","==",t)),r=await Ot(e);await Promise.all(r.docs.map(n=>Cn(qt(ke,"ar_movements",n.id))))}async function OIe(t,e,r){if(await fte(t.id),t.type!=="CREDITO"||!t.customerId)return;const n={customerId:t.customerId,date:t.date,createdAt:fr.now(),ref:{saleId:t.id}},{addDoc:a}=await EA(async()=>{const{addDoc:i}=await Promise.resolve().then(()=>zve);return{addDoc:i}},void 0);await a(ht(ke,"ar_movements"),{...n,type:"CARGO",amount:Number(e)||0});const s=Math.max(0,Number(r??t.downPayment??0));s>0&&await a(ht(ke,"ar_movements"),{...n,type:"ABONO",amount:-s})}function DIe(){const[t,e]=v.useState(!1),[r,n]=v.useState(!1),[a,s]=v.useState(null),[i,l]=v.useState([]),c=async ie=>{e(!0),n(!0),s(ie),l([]);try{const je=(await Ot(nr(ht(ke,"sales_clothes"),cr("__name__","==",ie)))).docs[0],z=je==null?void 0:je.data(),ye=(Array.isArray(z==null?void 0:z.items)?z.items:z!=null&&z.item?[z.item]:[]).map(Qe=>({productName:String(Qe.productName||""),qty:Number(Qe.qty||0),unitPrice:Number(Qe.unitPrice||0),discount:Number(Qe.discount||0),total:Number(Qe.total||0)}));l(ye)}catch(J){console.error(J)}finally{n(!1)}},[u,d]=v.useState(Sr(new Date,"yyyy-MM-01")),[f,h]=v.useState(Sr(new Date,"yyyy-MM-dd")),[A,m]=v.useState([]),[p,g]=v.useState([]),[x,y]=v.useState(!0),[b,w]=v.useState(""),[j,I]=v.useState(""),[_,E]=v.useState(""),[S,k]=v.useState(null),[P,T]=v.useState(!1),[F,Y]=v.useState(null),[he,ue]=v.useState(0),fe=15,[me,ne]=v.useState(1),Pe=v.useMemo(()=>{const ie={};return A.forEach(J=>ie[J.id]=J.name),ie},[A]);v.useEffect(()=>{(async()=>{y(!0),w("");try{const ie=await Ot(ht(ke,"customers_clothes")),J=[];ie.forEach(Ae=>J.push({id:Ae.id,name:Ae.data().name||""})),m(J);const je=await Ot(nr(ht(ke,"sales_clothes"),on("createdAt","desc"))),z=[];je.forEach(Ae=>{const ye=TIe(Ae.data(),Ae.id);ye&&ye.date>=u&&ye.date<=f&&z.push(ye)}),g(z.sort((Ae,ye)=>ye.date.localeCompare(Ae.date))),ne(1)}catch(ie){console.error(ie),w(" Error cargando transacciones.")}finally{y(!1)}})()},[u,f]);const Ie=v.useMemo(()=>p.filter(ie=>!(j&&ie.customerId!==j||_&&ie.type!==_)),[p,j,_]),O=v.useMemo(()=>{let ie=0,J=0,je=0,z=0;for(const Ae of Ie)Ae.type==="CONTADO"?(ie+=Ae.item.qty,je+=Ae.total):(J+=Ae.item.qty,z+=Ae.total);return{piezasCash:ie,piezasCredito:J,montoCash:je,montoCredito:z}},[Ie]),H=Math.max(1,Math.ceil(Ie.length/fe)),R=v.useMemo(()=>{const ie=(me-1)*fe;return Ie.slice(ie,ie+fe)},[Ie,me]),M=ie=>{k(null),Y(ie),ue(ie.item.qty||0),T(!0)},K=async ie=>{if(k(null),!!window.confirm("Eliminar esta venta? Esta accin no se puede deshacer."))try{y(!0),await zT(ie.id),await fte(ie.id),g(J=>J.filter(je=>je.id!==ie.id)),w(" Venta eliminada")}catch(J){console.error(J),w(" No se pudo eliminar la venta.")}finally{y(!1)}},W=async()=>{if(!F)return;const ie=Number(F.item.qty||0),J=Math.max(1,Math.floor(Number(he)||0));if(J===ie){T(!1);return}const je=Number(F.item.unitPrice||0),z=Number((je*J).toFixed(2));try{y(!0);const Ae=J-ie;Ae>0?await kIe(F.item.productId,Ae):Ae<0&&await FIe(F.item.productId,-Ae);const ye=qt(ke,"sales_clothes",F.id);await nn(ye,{quantity:J,total:z,itemsTotal:z,"item.qty":J,"item.total":z,updatedAt:fr.now()});const Qe=Math.min(Number(F.downPayment||0),z);await OIe(F,z,Qe),g(st=>st.map(ut=>ut.id===F.id?{...ut,quantity:J,total:z,item:{...ut.item,qty:J,total:z},downPayment:Qe}:ut)),w(" Venta actualizada"),T(!1)}catch(Ae){console.error(Ae),w(" No se pudo actualizar la venta.")}finally{y(!1)}},D=()=>{const ie=`Reporte de transacciones (Ropa)  ${u} a ${f}`,J=ye=>(ye||"").replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;"),je=Ie.map(ye=>{const Qe=ye.customerName||(ye.customerId?Pe[ye.customerId]:"")||"Nombre cliente";return`<tr>
          <td>${ye.date}</td>
          <td>${J(Qe)}</td>
          <td>${ye.type==="CREDITO"?"Crdito":"Cash"}</td>
          <td style="text-align:right">${ye.item.qty}</td>
          <td style="text-align:right">${cd(ye.total)}</td>
        </tr>`}).join(""),z=`<!doctype html><html><head><meta charset="utf-8" />
    <title>${J(ie)}</title>
    <style>
      *{font-family:Arial, sans-serif} h1{margin:0 0 8px}
      .muted{color:#555;font-size:12px;margin-bottom:12px}
      .kpis{display:grid;grid-template-columns:repeat(2,max-content);gap:8px 28px;margin:10px 0 14px}
      table{width:100%;border-collapse:collapse;font-size:12px}
      th,td{border:1px solid #ddd;padding:6px}
      th{background:#f5f5f5;text-align:left}
      @media print{@page{size:A4;margin:12mm}}
    </style></head><body>
      <h1>${J(ie)}</h1>
      <div class="kpis">
        <div><b>Piezas Cash:</b> ${O.piezasCash}</div>
        <div><b>Piezas Crdito:</b> ${O.piezasCredito}</div>
        <div><b>Monto Cash:</b> ${cd(O.montoCash)}</div>
        <div><b>Monto Crdito:</b> ${cd(O.montoCredito)}</div>
      </div>
      <table><thead><tr>
        <th>Fecha</th><th>Cliente</th><th>Tipo</th><th>Piezas</th><th>Monto</th>
      </tr></thead><tbody>
      ${je||'<tr><td colspan="5" style="text-align:center">Sin transacciones</td></tr>'}
      </tbody></table>
      <script>window.print()<\/script>
    </body></html>`,Ae=window.open("","_blank");Ae&&(Ae.document.open(),Ae.document.write(z),Ae.document.close())},L=()=>ne(1),Z=()=>ne(ie=>Math.max(1,ie-1)),ge=()=>ne(ie=>Math.min(H,ie+1)),U=()=>ne(H),Ge=()=>{const ie=[];if(H<=7)for(let je=1;je<=H;je++)ie.push(je);else{const je=Math.max(1,me-2),z=Math.min(H,me+2);ie.push(1),je>2&&ie.push(-1);for(let Ae=je;Ae<=z;Ae++)Ae!==1&&Ae!==H&&ie.push(Ae);z<H-1&&ie.push(-2),ie.push(H)}return o.jsxs("div",{className:"flex items-center gap-1 justify-between mt-3",children:[o.jsxs("div",{className:"flex items-center gap-1",children:[o.jsx("button",{className:"px-2 py-1 border rounded disabled:opacity-50",onClick:L,disabled:me===1,children:" Primero"}),o.jsx("button",{className:"px-2 py-1 border rounded disabled:opacity-50",onClick:Z,disabled:me===1,children:" Anterior"}),ie.map((je,z)=>typeof je=="number"?o.jsx("button",{className:`px-3 py-1 border rounded ${je===me?"bg-blue-600 text-white":""}`,onClick:()=>ne(je),children:je},z):o.jsx("span",{className:"px-2",children:""},z)),o.jsx("button",{className:"px-2 py-1 border rounded disabled:opacity-50",onClick:ge,disabled:me===H,children:"Siguiente "}),o.jsx("button",{className:"px-2 py-1 border rounded disabled:opacity-50",onClick:U,disabled:me===H,children:"ltimo "})]}),o.jsxs("div",{className:"text-sm text-gray-600",children:["Pgina ",me," de ",H,"  ",Ie.length," transaccin(es)"]})]})};return o.jsxs("div",{className:"max-w-6xl mx-auto",children:[o.jsx("h2",{className:"text-2xl font-bold mb-3",children:"Reporte de transacciones (Ropa)"}),o.jsxs("div",{className:"bg-white p-3 rounded shadow border mb-4 flex flex-wrap gap-3 items-end text-sm",children:[o.jsxs("div",{children:[o.jsx("label",{className:"block font-semibold",children:"Desde"}),o.jsx("input",{type:"date",className:"border rounded px-2 py-1",value:u,onChange:ie=>{d(ie.target.value),ne(1)}})]}),o.jsxs("div",{children:[o.jsx("label",{className:"block font-semibold",children:"Hasta"}),o.jsx("input",{type:"date",className:"border rounded px-2 py-1",value:f,onChange:ie=>{h(ie.target.value),ne(1)}})]}),o.jsxs("div",{children:[o.jsx("label",{className:"block font-semibold",children:"Cliente (crdito)"}),o.jsxs("select",{className:"border rounded px-2 py-1 min-w-[220px]",value:j,onChange:ie=>{I(ie.target.value),ne(1)},children:[o.jsx("option",{value:"",children:"Todos"}),A.map(ie=>o.jsx("option",{value:ie.id,children:ie.name},ie.id))]})]}),o.jsxs("div",{children:[o.jsx("label",{className:"block font-semibold",children:"Tipo"}),o.jsxs("select",{className:"border rounded px-2 py-1",value:_,onChange:ie=>{E(ie.target.value),ne(1)},children:[o.jsx("option",{value:"",children:"Todos"}),o.jsx("option",{value:"CONTADO",children:"Cash"}),o.jsx("option",{value:"CREDITO",children:"Crdito"})]})]}),o.jsx("button",{className:"ml-auto px-3 py-2 rounded bg-blue-600 text-white hover:bg-blue-700",onClick:D,children:"Exportar PDF"})]}),o.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-3 mb-4",children:[o.jsxs("div",{className:"p-3 border rounded bg-gray-50",children:[o.jsx("div",{className:"text-xs text-gray-600",children:"Piezas Cash"}),o.jsx("div",{className:"text-xl font-semibold",children:O.piezasCash})]}),o.jsxs("div",{className:"p-3 border rounded bg-gray-50",children:[o.jsx("div",{className:"text-xs text-gray-600",children:"Piezas Crdito"}),o.jsx("div",{className:"text-xl font-semibold",children:O.piezasCredito})]}),o.jsxs("div",{className:"p-3 border rounded bg-gray-50",children:[o.jsx("div",{className:"text-xs text-gray-600",children:"Monto Cash"}),o.jsx("div",{className:"text-xl font-semibold",children:cd(O.montoCash)})]}),o.jsxs("div",{className:"p-3 border rounded bg-gray-50",children:[o.jsx("div",{className:"text-xs text-gray-600",children:"Monto Crdito"}),o.jsx("div",{className:"text-xl font-semibold",children:cd(O.montoCredito)})]})]}),o.jsxs("div",{className:"bg-white p-2 rounded shadow border w-full",children:[o.jsxs("table",{className:"min-w-full w-full text-sm",children:[o.jsx("thead",{className:"bg-gray-100",children:o.jsxs("tr",{children:[o.jsx("th",{className:"p-2 border",children:"Fecha"}),o.jsx("th",{className:"p-2 border",children:"Cliente"}),o.jsx("th",{className:"p-2 border",children:"Tipo"}),o.jsx("th",{className:"p-2 border",children:"Piezas"}),o.jsx("th",{className:"p-2 border",children:"Monto"}),o.jsx("th",{className:"p-2 border",children:"Acciones"})]})}),o.jsx("tbody",{children:x?o.jsx("tr",{children:o.jsx("td",{className:"p-4 text-center",colSpan:6,children:"Cargando"})}):R.length===0?o.jsx("tr",{children:o.jsx("td",{className:"p-4 text-center",colSpan:6,children:"Sin transacciones en el rango."})}):R.map(ie=>{const J=ie.customerName||(ie.customerId?Pe[ie.customerId]:"")||"Nombre cliente";return o.jsxs("tr",{className:"text-center",children:[o.jsx("td",{className:"p-2 border",children:ie.date}),o.jsx("td",{className:"p-2 border",children:J}),o.jsx("td",{className:"p-2 border",children:ie.type==="CREDITO"?"Crdito":"Cash"}),o.jsx("td",{className:"p-2 border",children:o.jsx("button",{type:"button",className:"underline text-blue-600 hover:text-blue-800",title:"Ver piezas de esta transaccin",onClick:()=>c(ie.id),children:ie.item.qty})}),o.jsx("td",{className:"p-2 border",children:cd(ie.total)}),o.jsxs("td",{className:"p-2 border relative",children:[o.jsx("button",{className:"px-2 py-1 rounded border hover:bg-gray-50",onClick:()=>k(je=>je===ie.id?null:ie.id),title:"Acciones",children:""}),S===ie.id&&o.jsxs("div",{className:"absolute right-2 mt-1 w-28 bg-white border rounded shadow z-10 text-left",children:[o.jsx("button",{className:"block w-full text-left px-3 py-2 hover:bg-gray-100",onClick:()=>M(ie),children:"Editar"}),o.jsx("button",{className:"block w-full text-left px-3 py-2 hover:bg-gray-100 text-red-600",onClick:()=>K(ie),children:"Eliminar"})]})]})]},ie.id)})})]}),Ge()]}),b&&o.jsx("p",{className:"mt-2 text-sm",children:b}),P&&F&&o.jsx("div",{className:"fixed inset-0 bg-black/40 flex items-center justify-center z-50",children:o.jsxs("div",{className:"bg-white rounded-lg shadow-xl border w-[95%] max-w-md p-4",children:[o.jsx("h3",{className:"text-lg font-bold mb-2",children:"Editar venta"}),o.jsxs("div",{className:"space-y-2",children:[o.jsxs("div",{children:[o.jsx("div",{className:"text-xs text-gray-600",children:"Producto"}),o.jsxs("div",{className:"font-semibold",children:[F.item.productName," ",F.item.sku?` ${F.item.sku}`:""]})]}),o.jsxs("div",{children:[o.jsx("label",{className:"block text-sm font-semibold",children:"Cantidad (piezas)"}),o.jsx("input",{type:"number",step:"1",min:1,className:"w-full border p-2 rounded",value:he,onChange:ie=>ue(Math.max(1,Math.floor(Number(ie.target.value||0))))})]}),o.jsxs("div",{className:"grid grid-cols-2 gap-3",children:[o.jsxs("div",{className:"p-2 rounded bg-gray-50 border",children:[o.jsx("div",{className:"text-xs text-gray-600",children:"P. Unit"}),o.jsx("div",{className:"text-lg font-semibold",children:cd(F.item.unitPrice)})]}),o.jsxs("div",{className:"p-2 rounded bg-gray-50 border",children:[o.jsx("div",{className:"text-xs text-gray-600",children:"Nuevo total"}),o.jsx("div",{className:"text-lg font-semibold",children:cd(Number(F.item.unitPrice)*Number(he||0))})]})]})]}),o.jsxs("div",{className:"mt-4 flex justify-end gap-2",children:[o.jsx("button",{className:"px-3 py-2 rounded bg-gray-200 hover:bg-gray-300",onClick:()=>{T(!1),Y(null)},children:"Cancelar"}),o.jsx("button",{className:"px-3 py-2 rounded bg-blue-600 text-white hover:bg-blue-700",onClick:W,children:"Guardar cambios"})]})]})}),t&&o.jsx("div",{className:"fixed inset-0 bg-black/40 flex items-center justify-center z-[60]",children:o.jsxs("div",{className:"bg-white rounded-lg shadow-xl border w-[95%] max-w-3xl p-4",children:[o.jsxs("div",{className:"flex items-center justify-between mb-2",children:[o.jsxs("h3",{className:"text-lg font-bold",children:["Piezas vendidas"," ",a?` #${a}`:""]}),o.jsx("button",{className:"px-3 py-1 rounded bg-gray-200 hover:bg-gray-300",onClick:()=>e(!1),children:"Cerrar"})]}),o.jsx("div",{className:"bg-white rounded border overflow-x-auto",children:o.jsxs("table",{className:"min-w-full text-sm",children:[o.jsx("thead",{className:"bg-gray-100",children:o.jsxs("tr",{children:[o.jsx("th",{className:"p-2 border",children:"Producto"}),o.jsx("th",{className:"p-2 border text-right",children:"Cantidad"}),o.jsx("th",{className:"p-2 border text-right",children:"Precio"}),o.jsx("th",{className:"p-2 border text-right",children:"Descuento"}),o.jsx("th",{className:"p-2 border text-right",children:"Monto"})]})}),o.jsx("tbody",{children:r?o.jsx("tr",{children:o.jsx("td",{colSpan:5,className:"p-4 text-center",children:"Cargando"})}):i.length===0?o.jsx("tr",{children:o.jsx("td",{colSpan:5,className:"p-4 text-center",children:"Sin tems en esta venta."})}):i.map((ie,J)=>o.jsxs("tr",{className:"text-center",children:[o.jsx("td",{className:"p-2 border text-left",children:ie.productName}),o.jsx("td",{className:"p-2 border text-right",children:ie.qty}),o.jsx("td",{className:"p-2 border text-right",children:cd(ie.unitPrice)}),o.jsx("td",{className:"p-2 border text-right",children:cd(ie.discount||0)}),o.jsx("td",{className:"p-2 border text-right",children:cd(ie.total)})]},J))})]})})]})})]})}const YQ=["Altagracia","Taguizapa","El paso","Calaysa","Urbaite","Las Pilas"],kc=t=>`C$ ${(Number(t)||0).toFixed(2)}`;function pC(t){const e="+505 ";if(!t.startsWith(e)){const n=t.replace(/\D/g,"");return e+n.slice(0,8)}const r=t.slice(e.length).replace(/\D/g,"");return e+r.slice(0,8)}async function JQ(t){const e=nr(ht(ke,"ar_movements_pollo"),cr("ref.saleId","==",t)),r=await Ot(e);await Promise.all(r.docs.map(n=>Cn(qt(ke,"ar_movements_pollo",n.id))))}function RIe({role:t="",roles:e,sellerPolloId:r="",currentUserEmail:n}){const a=e&&e.length?e:t,s=String(r||"").trim(),i=Yr(a,"vendedor_pollo"),l=Yr(a,"admin"),[c,u]=v.useState([]),[d,f]=v.useState(!1),[h,A]=v.useState(""),[m,p]=v.useState(""),[g,x]=v.useState(""),[y,b]=v.useState(""),[w,j]=v.useState(!1),[I,_]=v.useState(!1),[E,S]=v.useState(null),[k,P]=v.useState([]),T=async St=>{var at;j(!0),_(!0),S(St),P([]);try{const zt=await ui(qt(ke,"salesV2",St));let Ut=null;zt.exists()?Ut=zt.data():Ut=(at=(await Ot(nr(ht(ke,"salesV2"),cr("name","==",St)))).docs[0])==null?void 0:at.data();const Bt=(Array.isArray(Ut==null?void 0:Ut.items)?Ut.items:Ut!=null&&Ut.item?[Ut.item]:[]).map(Ht=>({productName:String(Ht.productName||""),qty:Number(Ht.qty||0),unitPrice:Number(Ht.unitPrice||0),discount:Number(Ht.discount||0),total:Number(Ht.total||0)}));P(Bt)}catch(zt){console.error(zt)}finally{_(!1)}},[F,Y]=v.useState(""),[he,ue]=v.useState("+505 "),[fe,me]=v.useState(""),[ne,Pe]=v.useState(""),[Ie,O]=v.useState("ACTIVO"),[H,R]=v.useState(0),[M,K]=v.useState(""),[W,D]=v.useState(0),[L,Z]=v.useState([]),[ge,U]=v.useState(!0),[Ge,ie]=v.useState(""),[J,je]=v.useState(null),[z,Ae]=v.useState(""),[ye,Qe]=v.useState("+505 "),[st,ut]=v.useState(""),[De,it]=v.useState(""),[dt,ce]=v.useState("ACTIVO"),[oe,Me]=v.useState(0),[Le,ve]=v.useState(""),[le,Ue]=v.useState(!1),[rt,mt]=v.useState(null),[gt,Ct]=v.useState(!1),[jt,xe]=v.useState([]),[He,Ce]=v.useState({saldoActual:0,totalAbonado:0,totalCargos:0,saldoRestante:0}),[lt,nt]=v.useState(!1),[Xe,It]=v.useState(0),[$t,Ke]=v.useState(new Date().toISOString().slice(0,10)),[wt,q]=v.useState(""),[ae,ee]=v.useState(!1),[be,_e]=v.useState(null),[Be,tt]=v.useState(""),[ot,te]=v.useState(0),[V,re]=v.useState(""),[pe,Ee]=v.useState(!1),[Se,Re]=v.useState(null),[et,We]=v.useState(!1),[At,vt]=v.useState(!1),[Vt,or]=v.useState(null);v.useEffect(()=>{(async()=>{try{if(U(!0),i&&!s){Z([]),ie(" Este usuario no tiene vendedor asociado (sellerPolloId vaco).");return}const St=await Ot(ht(ke,"sellers_candies")),at=[];St.forEach(Bt=>{const Ht=Bt.data();at.push({id:Bt.id,name:String(Ht.name||"")})}),u(at);const zt=i?nr(ht(ke,"customers_pollo"),cr("vendorId","==",s),on("createdAt","desc")):nr(ht(ke,"customers_pollo"),on("createdAt","desc")),Ut=await Ot(zt),Qt=[];Ut.forEach(Bt=>{const Ht=Bt.data();Qt.push({id:Bt.id,name:Ht.name??"",phone:Ht.phone??"+505 ",place:Ht.place??"",notes:Ht.notes??"",status:Ht.status??"ACTIVO",creditLimit:Number(Ht.creditLimit??0),createdAt:Ht.createdAt??fr.now(),balance:0,vendorId:Ht.vendorId||"",vendorName:Ht.vendorName||"",initialDebt:Number(Ht.initialDebt||0),lastAbonoDate:"",lastAbonoAmount:0})});for(const Bt of Qt)try{const Ht=nr(ht(ke,"ar_movements_pollo"),cr("customerId","==",Bt.id)),Lt=await Ot(Ht);let er=0,gr=null;Lt.forEach(ys=>{var Ws,zl,ed;const Ta=ys.data(),da=Number(Ta.amount||0);if(er+=da,da<0){const Gd=Ta.date??((zl=(Ws=Ta.createdAt)==null?void 0:Ws.toDate)!=null&&zl.call(Ws)?Ta.createdAt.toDate().toISOString().slice(0,10):""),au=(ed=Ta.createdAt)!=null&&ed.seconds?Number(Ta.createdAt.seconds):0;(!gr||au>=gr.ts)&&(gr={date:Gd,amount:Math.abs(da),ts:au})}});const Cr=Number(Bt.initialDebt||0);Bt.balance=Cr+er,gr?(Bt.lastAbonoDate=gr==null?void 0:gr.date,Bt.lastAbonoAmount=gr==null?void 0:gr.amount):(Bt.lastAbonoDate="",Bt.lastAbonoAmount=0)}catch{Bt.balance=Number(Bt.initialDebt||0),Bt.lastAbonoDate="",Bt.lastAbonoAmount=0}Z(Qt)}catch(St){console.error(St),ie(" Error cargando clientes.")}finally{U(!1)}})()},[i,s]);const Oe=()=>{Y(""),ue("+505 "),me(""),Pe(""),O("ACTIVO"),R(0),K(""),D(0)},ct=async St=>{var Qt;if(St.preventDefault(),ie(""),!F.trim()){ie("Ingresa el nombre.");return}const at=pC(he);if(at.length<6){ie("Telfono incompleto.");return}const zt=i?s:String(M||""),Ut=zt&&((Qt=c.find(Bt=>Bt.id===zt))==null?void 0:Qt.name)||"";try{const Bt=Number(W||0),Ht=await xn(ht(ke,"customers_pollo"),{name:F.trim(),phone:at,place:fe||"",notes:ne||"",status:Ie,creditLimit:Number(H||0),vendorId:zt,vendorName:Ut,initialDebt:Bt,createdAt:fr.now()});Z(Lt=>[{id:Ht.id,name:F.trim(),phone:at,place:fe||"",notes:ne||"",status:Ie,creditLimit:Number(H||0),vendorId:zt,vendorName:Ut,initialDebt:Bt,createdAt:fr.now(),balance:Bt,lastAbonoDate:"",lastAbonoAmount:0},...Lt]),Oe(),Ee(!1),ie(" Cliente creado")}catch(Bt){console.error(Bt),ie(" Error al crear cliente")}},bt=St=>{if(i){ie(" No permitido: vendedores no editan clientes desde el listado.");return}je(St.id),Ae(St.name),Qe(St.phone||"+505 "),ut(St.place||""),it(St.notes||""),ce(St.status||"ACTIVO"),Me(Number(St.creditLimit||0)),ve(String(St.vendorId||""))},Dt=()=>{je(null),Ae(""),Qe("+505 "),ut(""),it(""),ce("ACTIVO"),Me(0),ve("")},xt=async()=>{var Ht;if(i){ie(" No permitido.");return}if(!J)return;const St=pC(ye);if(!z.trim()){ie("Ingresa el nombre.");return}const at=L.find(Lt=>Lt.id===J),zt=String((at==null?void 0:at.vendorId)||""),Ut=i?s:String(Le||"");if(i&&zt&&zt!==s){ie(" Este cliente pertenece a otro vendedor.");return}if(l&&zt&&Ut&&zt!==Ut){ie(" Este cliente ya est asociado a otro vendedor. Primero desasocia (deja vendedor en ) y guarda; luego lo puedes asignar.");return}const Qt=i?s:String(Le||""),Bt=Qt&&((Ht=c.find(Lt=>Lt.id===Qt))==null?void 0:Ht.name)||"";try{await nn(qt(ke,"customers_pollo",J),{name:z.trim(),phone:St,place:st||"",notes:De||"",status:dt,creditLimit:Number(oe||0),vendorId:Qt,vendorName:Bt}),Z(Lt=>Lt.map(er=>er.id===J?{...er,name:z.trim(),phone:St,place:st||"",notes:De||"",status:dt,creditLimit:Number(oe||0),vendorId:Qt,vendorName:Bt}:er)),Dt(),ie(" Cliente actualizado")}catch(Lt){console.error(Lt),ie(" Error al actualizar")}},sr=async St=>{if(confirm(`Eliminar al cliente "${St.name}"?
Se borrarn todas sus ventas y movimientos.`))try{U(!0);const zt=nr(ht(ke,"salesV2"),cr("customerId","==",St.id)),Ut=await Ot(zt);for(const Ht of Ut.docs){const Lt=Ht.id;try{await Cn(qt(ke,"salesV2",Lt))}catch(er){console.warn("delete sale error",er)}await JQ(Lt)}const Qt=nr(ht(ke,"ar_movements_pollo"),cr("customerId","==",St.id)),Bt=await Ot(Qt);await Promise.all(Bt.docs.map(Ht=>Cn(qt(ke,"ar_movements_pollo",Ht.id)))),await Cn(qt(ke,"customers_pollo",St.id)),Z(Ht=>Ht.filter(Lt=>Lt.id!==St.id)),ie(" Cliente eliminado y registros borrados")}catch(zt){console.error(zt),ie(" No se pudo eliminar el cliente.")}finally{U(!1)}},Xt=(St,at)=>{const zt=St.reduce((Ht,Lt)=>Ht+(Number(Lt.amount)||0),0),Ut=St.filter(Ht=>Number(Ht.amount)<0).reduce((Ht,Lt)=>Ht+Math.abs(Number(Lt.amount)||0),0),Qt=St.filter(Ht=>Number(Ht.amount)>0).reduce((Ht,Lt)=>Ht+(Number(Lt.amount)||0),0),Bt=Number(at||0)+zt;Ce({saldoActual:Bt,totalAbonado:Ut,totalCargos:Number(at||0)+Qt,saldoRestante:Bt})},Kt=async St=>{mt(St),xe([]),Ce({saldoActual:0,totalAbonado:0,totalCargos:0,saldoRestante:0}),Ue(!0),We(!1),vt(!1),or(null),nt(!1),It(0),Ke(new Date().toISOString().slice(0,10)),q(""),_e(null),Ct(!0);try{const at=nr(ht(ke,"ar_movements_pollo"),cr("customerId","==",St.id)),zt=await Ot(at),Ut=[];zt.forEach(Qt=>{var er,gr;const Bt=Qt.data(),Ht=Bt.date??((gr=(er=Bt.createdAt)==null?void 0:er.toDate)!=null&&gr.call(er)?Bt.createdAt.toDate().toISOString().slice(0,10):""),Lt=Number(Bt.amount||0);Ut.push({id:Qt.id,date:Ht,type:Bt.type??(Lt<0?"ABONO":"CARGO"),amount:Lt,ref:Bt.ref||{},comment:Bt.comment||"",createdAt:Bt.createdAt})}),Ut.sort((Qt,Bt)=>{var er,gr;if(Qt.date!==Bt.date)return Qt.date.localeCompare(Bt.date);const Ht=((er=Qt.createdAt)==null?void 0:er.seconds)||0,Lt=((gr=Bt.createdAt)==null?void 0:gr.seconds)||0;return Ht-Lt}),xe(Ut),Xt(Ut,Number(St.initialDebt||0))}catch(at){console.error(at),ie(" No se pudo cargar el estado de cuenta")}finally{Ct(!1)}},ar=St=>{const at=St.filter(zt=>Number(zt.amount)<0).map(zt=>{var Ut;return{date:zt.date,amount:Math.abs(Number(zt.amount||0)),ts:((Ut=zt.createdAt)==null?void 0:Ut.seconds)||0}}).sort((zt,Ut)=>(zt.ts||0)-(Ut.ts||0));return at.length?at[at.length-1]:null},Ar=St=>{_e(St.id),tt(St.date||new Date().toISOString().slice(0,10)),te(Math.abs(Number(St.amount||0))),re(St.comment||"")},Gt=()=>{_e(null),tt(""),te(0),re("")},_r=async()=>{if(!be||!rt)return;const St=jt.findIndex(Qt=>Qt.id===be);if(St===-1)return;const at=jt[St],zt=Number(ot||0);if(!(zt>0)){ie("El monto debe ser mayor a 0.");return}const Ut=at.type==="ABONO"?-parseFloat(zt.toFixed(2)):+parseFloat(zt.toFixed(2));try{await nn(qt(ke,"ar_movements_pollo",be),{date:Be,amount:Ut,comment:V||""});const Qt=[...jt];Qt[St]={...at,date:Be,amount:Ut,comment:V||""},Qt.sort((er,gr)=>{var Ta,da;if(er.date!==gr.date)return er.date.localeCompare(gr.date);const Cr=((Ta=er.createdAt)==null?void 0:Ta.seconds)||0,ys=((da=gr.createdAt)==null?void 0:da.seconds)||0;return Cr-ys}),xe(Qt),Xt(Qt,Number(rt.initialDebt||0));const Bt=Qt.reduce((er,gr)=>er+(Number(gr.amount)||0),0),Ht=Number(rt.initialDebt||0)+Bt,Lt=ar(Qt);Z(er=>er.map(gr=>gr.id===rt.id?{...gr,balance:Ht,lastAbonoDate:(Lt==null?void 0:Lt.date)||"",lastAbonoAmount:(Lt==null?void 0:Lt.amount)||0}:gr)),mt(er=>er&&{...er,balance:Ht,lastAbonoDate:(Lt==null?void 0:Lt.date)||"",lastAbonoAmount:(Lt==null?void 0:Lt.amount)||0}),Gt(),ie(" Movimiento actualizado")}catch(Qt){console.error(Qt),ie(" Error al actualizar movimiento")}},Ir=async St=>{var zt,Ut;if(confirm(`Eliminar este movimiento (${St.type==="ABONO"?"Abono":"Compra"}) del ${St.date}?${St.type==="CARGO"&&((zt=St.ref)!=null&&zt.saleId)?`
Se borrarn los registros de esa venta.`:""}`)&&rt)try{if(U(!0),St.type==="CARGO"&&((Ut=St.ref)!=null&&Ut.saleId)){try{await Cn(qt(ke,"salesV2",St.ref.saleId))}catch(er){console.warn("delete sale error",er),U(!1),ie(" No se pudo borrar la venta asociada.");return}await JQ(St.ref.saleId)}else await Cn(qt(ke,"ar_movements_pollo",St.id));const Qt=jt.filter(er=>{var gr,Cr;return St.type==="CARGO"&&((gr=St.ref)!=null&&gr.saleId)?((Cr=er.ref)==null?void 0:Cr.saleId)!==St.ref.saleId:er.id!==St.id});xe(Qt),Xt(Qt,Number(rt.initialDebt||0));const Bt=Qt.reduce((er,gr)=>er+(Number(gr.amount)||0),0),Ht=Number(rt.initialDebt||0)+Bt,Lt=ar(Qt);Z(er=>er.map(gr=>gr.id===rt.id?{...gr,balance:Ht,lastAbonoDate:(Lt==null?void 0:Lt.date)||"",lastAbonoAmount:(Lt==null?void 0:Lt.amount)||0}:gr)),mt(er=>er&&{...er,balance:Ht,lastAbonoDate:(Lt==null?void 0:Lt.date)||"",lastAbonoAmount:(Lt==null?void 0:Lt.amount)||0}),or(null),ie(" Movimiento eliminado")}catch(Qt){console.error(Qt),ie(" Error al eliminar movimiento")}finally{U(!1)}},Tn=v.useMemo(()=>[...L].sort((St,at)=>{var zt,Ut;return St.status!==at.status?St.status==="BLOQUEADO"?1:-1:(((zt=at.createdAt)==null?void 0:zt.seconds)||0)-(((Ut=St.createdAt)==null?void 0:Ut.seconds)||0)}),[L]),is=St=>St==="ACTIVO"?"bg-green-100 text-green-700":"bg-red-100 text-red-700",fn=v.useMemo(()=>{const St=h.trim().toLowerCase(),at=g.trim()===""?null:Number(g),zt=y.trim()===""?null:Number(y);return Tn.filter(Ut=>{const Qt=!St||String(Ut.name||"").toLowerCase().includes(St),Bt=!m||Ut.status===m,Ht=Number(Ut.balance||0),Lt=at===null||!Number.isNaN(at)&&Ht>=at,er=zt===null||!Number.isNaN(zt)&&Ht<=zt;return Qt&&Bt&&Lt&&er})},[Tn,h,m,g,y]);return o.jsxs("div",{className:"max-w-6xl mx-auto",children:[o.jsxs("div",{className:"flex items-center justify-between mb-3",children:[o.jsx("h2",{className:"text-2xl font-bold",children:"Clientes (Pollo)"}),o.jsx("button",{className:"px-3 py-2 rounded bg-blue-600 text-white hover:bg-blue-700",onClick:()=>{Ee(!0),i&&K(s)},type:"button",children:"Crear Cliente"})]}),o.jsxs("div",{className:"bg-white p-2 rounded shadow border w-full",children:[o.jsx("div",{className:"hidden md:block",children:o.jsxs("table",{className:"min-w-full w-full text-sm",children:[o.jsx("thead",{className:"bg-gray-100",children:o.jsxs("tr",{children:[o.jsx("th",{className:"p-2 border",children:"Fecha"}),o.jsx("th",{className:"p-2 border",children:"Nombre"}),o.jsx("th",{className:"p-2 border",children:"Telfono"}),o.jsx("th",{className:"p-2 border",children:"Vendedor"}),o.jsx("th",{className:"p-2 border",children:"Lugar"}),o.jsx("th",{className:"p-2 border",children:"Estado"}),o.jsx("th",{className:"p-2 border",children:"Lmite"}),o.jsx("th",{className:"p-2 border",children:"Saldo"}),o.jsx("th",{className:"p-2 border",children:"Comentario"}),o.jsx("th",{className:"p-2 border",children:"Acciones"})]})}),o.jsx("tbody",{children:ge?o.jsx("tr",{children:o.jsx("td",{className:"p-4 text-center",colSpan:10,children:"Cargando"})}):fn.length===0?o.jsx("tr",{children:o.jsx("td",{className:"p-4 text-center",colSpan:10,children:"Sin clientes"})}):fn.map(St=>{var zt;const at=J===St.id;return o.jsxs("tr",{className:"text-center",children:[o.jsx("td",{className:"p-2 border",children:(zt=St.createdAt)!=null&&zt.toDate?St.createdAt.toDate().toISOString().slice(0,10):""}),o.jsx("td",{className:"p-2 border text-left",children:at?o.jsx("input",{className:"w-full border p-1 rounded",value:z,onChange:Ut=>Ae(Ut.target.value)}):o.jsx("div",{className:"font-medium",children:St.name})}),o.jsx("td",{className:"p-2 border",children:at?o.jsx("input",{className:"w-full border p-1 rounded",value:ye,onChange:Ut=>Qe(pC(Ut.target.value))}):St.phone}),o.jsx("td",{className:"p-2 border",children:at?o.jsxs("select",{className:"w-full border p-1 rounded text-xs",value:i?s:Le,onChange:Ut=>ve(Ut.target.value),disabled:i,title:"Vendedor asociado",children:[o.jsx("option",{value:"",children:" Sin vendedor "}),c.map(Ut=>o.jsx("option",{value:Ut.id,children:Ut.name},Ut.id))]}):St.vendorName||""}),o.jsx("td",{className:"p-2 border",children:at?o.jsxs("select",{className:"w-full border p-1 rounded",value:st,onChange:Ut=>ut(Ut.target.value),children:[o.jsx("option",{value:"",children:""}),YQ.map(Ut=>o.jsx("option",{value:Ut,children:Ut},Ut))]}):St.place||""}),o.jsx("td",{className:"p-2 border",children:at?o.jsxs("select",{className:"w-full border p-1 rounded",value:dt,onChange:Ut=>ce(Ut.target.value),children:[o.jsx("option",{value:"ACTIVO",children:"ACTIVO"}),o.jsx("option",{value:"BLOQUEADO",children:"BLOQUEADO"})]}):o.jsx("span",{className:`px-2 py-0.5 rounded text-xs ${is(St.status)}`,children:St.status})}),o.jsx("td",{className:"p-2 border",children:at?o.jsx("input",{type:"number",step:"0.01",inputMode:"decimal",className:"w-full border p-1 rounded text-right",value:Number.isNaN(oe)?"":oe,onChange:Ut=>Me(Math.max(0,Number(Ut.target.value||0)))}):kc(St.creditLimit||0)}),o.jsx("td",{className:"p-2 border font-semibold",children:kc(St.balance||0)}),o.jsx("td",{className:"p-2 border",children:at?o.jsx("textarea",{className:"w-full border p-1 rounded resize-y min-h-12",value:De,onChange:Ut=>it(Ut.target.value),maxLength:500}):o.jsx("span",{title:St.notes||"",children:(St.notes||"").length>40?(St.notes||"").slice(0,40)+"":St.notes||""})}),o.jsx("td",{className:"p-2 border",children:o.jsx("div",{className:"flex gap-2 justify-center",children:at?o.jsxs(o.Fragment,{children:[o.jsx("button",{className:"px-2 py-1 rounded text-white bg-blue-600 hover:bg-blue-700",onClick:xt,children:"Guardar"}),o.jsx("button",{className:"px-2 py-1 rounded bg-gray-200 hover:bg-gray-300",onClick:Dt,children:"Cancelar"})]}):o.jsxs(o.Fragment,{children:[o.jsx("button",{className:"px-2 py-1 rounded text-white bg-yellow-600 hover:bg-yellow-700",onClick:()=>bt(St),children:"Editar"}),o.jsx("button",{className:"px-2 py-1 rounded text-white bg-red-600 hover:bg-red-700 disabled:opacity-50",onClick:()=>sr(St),disabled:!l,title:l?"Borrar":"Solo admin",children:"Borrar"}),o.jsx("button",{className:"px-2 py-1 rounded text-white bg-indigo-600 hover:bg-indigo-700",onClick:()=>Kt(St),children:"Estado de cuenta"})]})})})]},St.id)})})]})}),o.jsx("div",{className:"md:hidden space-y-2",children:ge?o.jsx("div",{className:"p-4 text-center text-sm text-gray-600",children:"Cargando"}):fn.length===0?o.jsx("div",{className:"p-4 text-center text-sm text-gray-600",children:"Sin clientes"}):fn.map(St=>o.jsxs("div",{className:"border rounded-lg bg-white p-3 shadow-sm",children:[o.jsxs("div",{className:"flex items-start justify-between gap-2",children:[o.jsxs("div",{children:[o.jsx("div",{className:"font-semibold text-base",children:St.name}),o.jsx("div",{className:"text-xs text-gray-600",children:St.phone||""}),o.jsxs("div",{className:"text-xs text-gray-600",children:["Vendedor:"," ",o.jsx("span",{className:"font-medium",children:St.vendorName||""})]})]}),o.jsx("span",{className:`px-2 py-0.5 rounded text-xs ${is(St.status)}`,children:St.status})]}),o.jsxs("div",{className:"mt-2 grid grid-cols-2 gap-2 text-sm",children:[o.jsxs("div",{className:"border rounded p-2 bg-gray-50",children:[o.jsx("div",{className:"text-[11px] text-gray-600",children:"Saldo"}),o.jsx("div",{className:"font-semibold",children:kc(St.balance||0)})]}),o.jsxs("div",{className:"border rounded p-2 bg-gray-50",children:[o.jsx("div",{className:"text-[11px] text-gray-600",children:"Lmite"}),o.jsx("div",{className:"font-semibold",children:kc(St.creditLimit||0)})]})]}),o.jsxs("div",{className:"mt-2 text-xs text-gray-600",children:["ltimo abono:"," ",o.jsx("span",{className:"font-medium",children:St.lastAbonoDate?`${St.lastAbonoDate} (${kc(St.lastAbonoAmount||0)})`:""})]}),St.notes?o.jsxs("div",{className:"mt-2 text-xs text-gray-700",children:[o.jsx("span",{className:"font-semibold",children:"Nota:"})," ",(St.notes||"").length>80?(St.notes||"").slice(0,80)+"":St.notes]}):null,o.jsxs("div",{className:"mt-3 flex gap-2 flex-wrap",children:[o.jsx("button",{type:"button",className:"px-3 py-2 rounded bg-indigo-600 text-white text-sm",onClick:()=>Kt(St),children:"Estado de cuenta"}),o.jsx("button",{type:"button",className:"px-3 py-2 rounded bg-yellow-600 text-white text-sm",onClick:()=>bt(St),disabled:i,title:i?"Vendedor no edita":"Editar",children:"Editar"}),o.jsx("button",{type:"button",className:"px-3 py-2 rounded bg-red-600 text-white text-sm disabled:opacity-50",onClick:()=>sr(St),disabled:!l,title:l?"Borrar":"Solo admin",children:"Borrar"})]})]},St.id))})]}),Ge&&o.jsx("p",{className:"mt-2 text-sm",children:Ge}),pe&&zc.createPortal(o.jsxs("div",{className:"fixed inset-0 z-[70] flex items-center justify-center",children:[o.jsx("div",{className:"absolute inset-0 bg-black/40",onClick:()=>Ee(!1)}),o.jsxs("div",{className:"relative bg-white rounded-lg shadow-2xl border w-[96%] max-w-3xl max-h-[92vh] overflow-auto p-4",children:[o.jsxs("div",{className:"flex items-center justify-between mb-2",children:[o.jsx("h3",{className:"text-lg font-bold",children:"Crear Cliente"}),o.jsx("button",{className:"px-3 py-1 rounded bg-gray-200 hover:bg-gray-300",onClick:()=>Ee(!1),type:"button",children:"Cerrar"})]}),o.jsxs("form",{onSubmit:ct,className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[o.jsxs("div",{children:[o.jsx("label",{className:"block text-sm font-semibold",children:"Nombre"}),o.jsx("input",{className:"w-full border p-2 rounded",placeholder:"Ej: Mara Lpez",value:F,onChange:St=>Y(St.target.value)})]}),o.jsxs("div",{children:[o.jsx("label",{className:"block text-sm font-semibold",children:"Telfono"}),o.jsx("input",{className:"w-full border p-2 rounded",value:he,onChange:St=>ue(pC(St.target.value)),placeholder:"+505 88888888",inputMode:"numeric"})]}),o.jsxs("div",{children:[o.jsx("label",{className:"block text-sm font-semibold",children:"Lugar"}),o.jsxs("select",{className:"w-full border p-2 rounded",value:fe,onChange:St=>me(St.target.value),children:[o.jsx("option",{value:"",children:""}),YQ.map(St=>o.jsx("option",{value:St,children:St},St))]})]}),o.jsxs("div",{children:[o.jsx("label",{className:"block text-sm font-semibold",children:"Estado"}),o.jsxs("select",{className:"w-full border p-2 rounded",value:Ie,onChange:St=>O(St.target.value),children:[o.jsx("option",{value:"ACTIVO",children:"ACTIVO"}),o.jsx("option",{value:"BLOQUEADO",children:"BLOQUEADO"})]})]}),o.jsxs("div",{children:[o.jsx("label",{className:"block text-sm font-semibold",children:"Vendedor asociado"}),o.jsxs("select",{className:"w-full border p-2 rounded",value:i?s:M,onChange:St=>K(St.target.value),disabled:i,children:[o.jsx("option",{value:"",children:" Sin vendedor "}),c.map(St=>o.jsx("option",{value:St.id,children:St.name},St.id))]})]}),o.jsxs("div",{children:[o.jsx("label",{className:"block text-sm font-semibold",children:"Deuda inicial"}),o.jsx("input",{type:"number",step:"0.01",inputMode:"decimal",className:"w-full border p-2 rounded",value:W===0?"":W,onChange:St=>D(Math.max(0,Number(St.target.value||0))),placeholder:"Ej: 1500"}),o.jsx("div",{className:"text-xs text-gray-500 mt-1",children:"Este valor cuenta como saldo desde el inicio."})]}),o.jsxs("div",{children:[o.jsx("label",{className:"block text-sm font-semibold",children:"Lmite de crdito (opcional)"}),o.jsx("input",{type:"number",step:"0.01",inputMode:"decimal",className:"w-full border p-2 rounded",value:H===0?"":H,onChange:St=>R(Math.max(0,Number(St.target.value||0))),placeholder:"Ej: 2000"})]}),o.jsxs("div",{className:"md:col-span-2",children:[o.jsx("label",{className:"block text-sm font-semibold",children:"Comentario"}),o.jsx("textarea",{className:"w-full border p-2 rounded resize-y min-h-24",value:ne,onChange:St=>Pe(St.target.value),maxLength:500,placeholder:"Notas del cliente"}),o.jsxs("div",{className:"text-xs text-gray-500 text-right",children:[ne.length,"/500"]})]}),o.jsxs("div",{className:"md:col-span-2 flex justify-end gap-2",children:[o.jsx("button",{type:"button",className:"px-4 py-2 rounded bg-gray-200 hover:bg-gray-300",onClick:()=>Ee(!1),children:"Cancelar"}),o.jsx("button",{className:"bg-blue-600 text-white px-4 py-2 rounded hover:bg-blue-700",children:"Guardar cliente"})]})]})]})]}),document.body),le&&zc.createPortal(o.jsxs("div",{className:"fixed inset-0 z-[80]",children:[o.jsx("div",{className:"absolute inset-0 bg-black/40",onClick:()=>Ue(!1)}),o.jsx("div",{className:"absolute inset-0 flex items-center justify-center p-4",children:o.jsxs("div",{className:"bg-white rounded-lg shadow-xl border w-full max-w-5xl max-h-[92vh] overflow-auto p-4",children:[o.jsxs("div",{className:"flex items-center justify-between mb-3 gap-3",children:[o.jsxs("h3",{className:"text-lg font-bold",children:["Estado de cuenta  ",(rt==null?void 0:rt.name)||""]}),o.jsxs("div",{className:"flex gap-2 shrink-0",children:[o.jsx("button",{type:"button",className:"px-3 py-1 rounded bg-green-600 text-white hover:bg-green-700",onClick:()=>{It(0),Ke(new Date().toISOString().slice(0,10)),q(""),nt(!0)},children:"Abonar"}),o.jsx("button",{type:"button",className:"px-3 py-1 rounded bg-gray-200 hover:bg-gray-300",onClick:()=>Ue(!1),children:"Cerrar"})]})]}),o.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-3 mb-3",children:[o.jsxs("div",{className:"p-3 border rounded bg-gray-50",children:[o.jsx("div",{className:"text-xs text-gray-600",children:"Deuda inicial"}),o.jsx("div",{className:"text-xl font-semibold",children:kc(Number((rt==null?void 0:rt.initialDebt)||0))})]}),o.jsxs("div",{className:"p-3 border rounded bg-gray-50",children:[o.jsx("div",{className:"text-xs text-gray-600",children:"Saldo actual"}),o.jsx("div",{className:"text-xl font-semibold",children:kc(He.saldoActual)})]}),o.jsxs("div",{className:"p-3 border rounded bg-gray-50",children:[o.jsx("div",{className:"text-xs text-gray-600",children:"Total abonado"}),o.jsx("div",{className:"text-xl font-semibold",children:kc(He.totalAbonado)})]}),o.jsxs("div",{className:"p-3 border rounded bg-gray-50",children:[o.jsx("div",{className:"text-xs text-gray-600",children:"Saldo restante"}),o.jsx("div",{className:"text-xl font-semibold",children:kc(He.saldoRestante)})]})]}),o.jsx("div",{className:"bg-white rounded border overflow-x-auto",children:o.jsxs("table",{className:"min-w-full text-sm",children:[o.jsx("thead",{className:"bg-gray-100",children:o.jsxs("tr",{children:[o.jsx("th",{className:"p-2 border",children:"Fecha"}),o.jsx("th",{className:"p-2 border",children:"Tipo"}),o.jsx("th",{className:"p-2 border",children:"Referencia"}),o.jsx("th",{className:"p-2 border",children:"Comentario"}),o.jsx("th",{className:"p-2 border",children:"Monto"}),o.jsx("th",{className:"p-2 border",children:"Acciones"})]})}),o.jsx("tbody",{children:gt?o.jsx("tr",{children:o.jsx("td",{colSpan:6,className:"p-4 text-center",children:"Cargando"})}):jt.length===0?o.jsx("tr",{children:o.jsx("td",{colSpan:6,className:"p-4 text-center",children:"Sin movimientos"})}):jt.map(St=>{var zt,Ut;const at=be===St.id;return o.jsxs("tr",{className:"text-center",children:[o.jsx("td",{className:"p-2 border",children:at?o.jsx("input",{type:"date",className:"w-full border p-1 rounded",value:Be,onChange:Qt=>tt(Qt.target.value)}):St.date||""}),o.jsx("td",{className:"p-2 border",children:St.amount>=0?(zt=St.ref)!=null&&zt.saleId?o.jsx("button",{type:"button",className:"px-2 py-0.5 rounded text-xs bg-yellow-100 text-yellow-700 underline",onClick:()=>T(St.ref.saleId),children:"COMPRA (CARGO)"}):o.jsx("span",{className:"px-2 py-0.5 rounded text-xs bg-yellow-100 text-yellow-700",children:"COMPRA (CARGO)"}):o.jsx("span",{className:"px-2 py-0.5 rounded text-xs bg-green-100 text-green-700",children:"ABONO"})}),o.jsx("td",{className:"p-2 border",children:(Ut=St.ref)!=null&&Ut.saleId?`Venta #${St.ref.saleId}`:""}),o.jsx("td",{className:"p-2 border",children:at?o.jsx("input",{className:"w-full border p-1 rounded",value:V,onChange:Qt=>re(Qt.target.value)}):o.jsx("span",{title:St.comment||"",children:(St.comment||"").length>40?(St.comment||"").slice(0,40)+"":St.comment||""})}),o.jsx("td",{className:"p-2 border font-semibold",children:at?o.jsx("input",{type:"number",step:"0.01",inputMode:"decimal",className:"w-full border p-1 rounded text-right",value:Number.isNaN(ot)?"":ot,onChange:Qt=>te(Number(Qt.target.value||0))}):kc(St.amount)}),o.jsx("td",{className:"p-2 border",children:at?o.jsxs("div",{className:"flex gap-2 justify-center",children:[o.jsx("button",{type:"button",className:"px-2 py-1 rounded text-white bg-blue-600 hover:bg-blue-700",onClick:_r,children:"Guardar"}),o.jsx("button",{type:"button",className:"px-2 py-1 rounded bg-gray-200 hover:bg-gray-300",onClick:Gt,children:"Cancelar"})]}):o.jsxs("div",{className:"flex gap-2 justify-center",children:[o.jsx("button",{type:"button",className:"px-2 py-1 rounded text-white bg-yellow-600 hover:bg-yellow-700",onClick:()=>Ar(St),children:"Editar"}),o.jsx("button",{type:"button",className:"px-2 py-1 rounded text-white bg-red-600 hover:bg-red-700",onClick:()=>Ir(St),children:"Borrar"})]})})]},St.id)})})]})})]})})]}),document.body),w&&o.jsx("div",{className:"fixed inset-0 bg-black/40 flex items-center justify-center z-[65]",children:o.jsxs("div",{className:"bg-white rounded-lg shadow-xl border w-[95%] max-w-3xl p-4",children:[o.jsxs("div",{className:"flex items-center justify-between mb-2",children:[o.jsxs("h3",{className:"text-lg font-bold",children:["Productos vendidos"," ",E?` #${E}`:""]}),o.jsx("button",{className:"px-3 py-1 rounded bg-gray-200 hover:bg-gray-300",onClick:()=>j(!1),children:"Cerrar"})]}),o.jsx("div",{className:"bg-white rounded border overflow-x-auto",children:o.jsxs("table",{className:"min-w-full text-sm",children:[o.jsx("thead",{className:"bg-gray-100",children:o.jsxs("tr",{children:[o.jsx("th",{className:"p-2 border",children:"Producto"}),o.jsx("th",{className:"p-2 border text-right",children:"Cantidad"}),o.jsx("th",{className:"p-2 border text-right",children:"Precio"}),o.jsx("th",{className:"p-2 border text-right",children:"Descuento"}),o.jsx("th",{className:"p-2 border text-right",children:"Monto"})]})}),o.jsx("tbody",{children:I?o.jsx("tr",{children:o.jsx("td",{colSpan:5,className:"p-4 text-center",children:"Cargando"})}):k.length===0?o.jsx("tr",{children:o.jsx("td",{colSpan:5,className:"p-4 text-center",children:"Sin tems en esta venta."})}):k.map((St,at)=>o.jsxs("tr",{className:"text-center",children:[o.jsx("td",{className:"p-2 border text-left",children:St.productName}),o.jsx("td",{className:"p-2 border text-right",children:St.qty}),o.jsx("td",{className:"p-2 border text-right",children:kc(St.unitPrice)}),o.jsx("td",{className:"p-2 border text-right",children:kc(St.discount||0)}),o.jsx("td",{className:"p-2 border text-right",children:kc(St.total)})]},at))})]})})]})})]})}function MIe(t,e){var r=Object.setPrototypeOf;r?r(t,e):t.__proto__=e}function LIe(t,e){e===void 0&&(e=t.constructor);var r=Error.captureStackTrace;r&&r(t,e)}var UIe=function(){var t=function(r,n){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(a,s){a.__proto__=s}||function(a,s){for(var i in s)Object.prototype.hasOwnProperty.call(s,i)&&(a[i]=s[i])},t(r,n)};return function(e,r){if(typeof r!="function"&&r!==null)throw new TypeError("Class extends value "+String(r)+" is not a constructor or null");t(e,r);function n(){this.constructor=e}e.prototype=r===null?Object.create(r):(n.prototype=r.prototype,new n)}}(),QIe=function(t){UIe(e,t);function e(r,n){var a=this.constructor,s=t.call(this,r,n)||this;return Object.defineProperty(s,"name",{value:a.name,enumerable:!1,configurable:!0}),MIe(s,a.prototype),LIe(s),s}return e}(Error),VIe=function(){var t=function(e,r){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,a){n.__proto__=a}||function(n,a){for(var s in a)a.hasOwnProperty(s)&&(n[s]=a[s])},t(e,r)};return function(e,r){t(e,r);function n(){this.constructor=e}e.prototype=r===null?Object.create(r):(n.prototype=r.prototype,new n)}}(),vc=function(t){VIe(e,t);function e(r){r===void 0&&(r=void 0);var n=t.call(this,r)||this;return n.message=r,n}return e.prototype.getKind=function(){var r=this.constructor;return r.kind},e.kind="Exception",e}(QIe),HIe=function(){var t=function(e,r){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,a){n.__proto__=a}||function(n,a){for(var s in a)a.hasOwnProperty(s)&&(n[s]=a[s])},t(e,r)};return function(e,r){t(e,r);function n(){this.constructor=e}e.prototype=r===null?Object.create(r):(n.prototype=r.prototype,new n)}}(),si=function(t){HIe(e,t);function e(){return t!==null&&t.apply(this,arguments)||this}return e.kind="ArgumentException",e}(vc),$Ie=function(){var t=function(e,r){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,a){n.__proto__=a}||function(n,a){for(var s in a)a.hasOwnProperty(s)&&(n[s]=a[s])},t(e,r)};return function(e,r){t(e,r);function n(){this.constructor=e}e.prototype=r===null?Object.create(r):(n.prototype=r.prototype,new n)}}(),en=function(t){$Ie(e,t);function e(){return t!==null&&t.apply(this,arguments)||this}return e.kind="IllegalArgumentException",e}(vc),Ate=function(){function t(e){if(this.binarizer=e,e===null)throw new en("Binarizer must be non-null.")}return t.prototype.getWidth=function(){return this.binarizer.getWidth()},t.prototype.getHeight=function(){return this.binarizer.getHeight()},t.prototype.getBlackRow=function(e,r){return this.binarizer.getBlackRow(e,r)},t.prototype.getBlackMatrix=function(){return(this.matrix===null||this.matrix===void 0)&&(this.matrix=this.binarizer.getBlackMatrix()),this.matrix},t.prototype.isCropSupported=function(){return this.binarizer.getLuminanceSource().isCropSupported()},t.prototype.crop=function(e,r,n,a){var s=this.binarizer.getLuminanceSource().crop(e,r,n,a);return new t(this.binarizer.createBinarizer(s))},t.prototype.isRotateSupported=function(){return this.binarizer.getLuminanceSource().isRotateSupported()},t.prototype.rotateCounterClockwise=function(){var e=this.binarizer.getLuminanceSource().rotateCounterClockwise();return new t(this.binarizer.createBinarizer(e))},t.prototype.rotateCounterClockwise45=function(){var e=this.binarizer.getLuminanceSource().rotateCounterClockwise45();return new t(this.binarizer.createBinarizer(e))},t.prototype.toString=function(){try{return this.getBlackMatrix().toString()}catch{return""}},t}(),KIe=function(){var t=function(e,r){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,a){n.__proto__=a}||function(n,a){for(var s in a)a.hasOwnProperty(s)&&(n[s]=a[s])},t(e,r)};return function(e,r){t(e,r);function n(){this.constructor=e}e.prototype=r===null?Object.create(r):(n.prototype=r.prototype,new n)}}(),bi=function(t){KIe(e,t);function e(){return t!==null&&t.apply(this,arguments)||this}return e.getChecksumInstance=function(){return new e},e.kind="ChecksumException",e}(vc),GIe=function(){function t(e){this.source=e}return t.prototype.getLuminanceSource=function(){return this.source},t.prototype.getWidth=function(){return this.source.getWidth()},t.prototype.getHeight=function(){return this.source.getHeight()},t}(),Ka=function(){function t(){}return t.arraycopy=function(e,r,n,a,s){for(;s--;)n[a++]=e[r++]},t.currentTimeMillis=function(){return Date.now()},t}(),qIe=function(){var t=function(e,r){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,a){n.__proto__=a}||function(n,a){for(var s in a)a.hasOwnProperty(s)&&(n[s]=a[s])},t(e,r)};return function(e,r){t(e,r);function n(){this.constructor=e}e.prototype=r===null?Object.create(r):(n.prototype=r.prototype,new n)}}(),L6=function(t){qIe(e,t);function e(){return t!==null&&t.apply(this,arguments)||this}return e.kind="IndexOutOfBoundsException",e}(vc),zIe=function(){var t=function(e,r){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,a){n.__proto__=a}||function(n,a){for(var s in a)a.hasOwnProperty(s)&&(n[s]=a[s])},t(e,r)};return function(e,r){t(e,r);function n(){this.constructor=e}e.prototype=r===null?Object.create(r):(n.prototype=r.prototype,new n)}}(),ZQ=function(t){zIe(e,t);function e(r,n){r===void 0&&(r=void 0),n===void 0&&(n=void 0);var a=t.call(this,n)||this;return a.index=r,a.message=n,a}return e.kind="ArrayIndexOutOfBoundsException",e}(L6),WIe=function(t){var e=typeof Symbol=="function"&&Symbol.iterator,r=e&&t[e],n=0;if(r)return r.call(t);if(t&&typeof t.length=="number")return{next:function(){return t&&n>=t.length&&(t=void 0),{value:t&&t[n++],done:!t}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")},Ui=function(){function t(){}return t.fill=function(e,r){for(var n=0,a=e.length;n<a;n++)e[n]=r},t.fillWithin=function(e,r,n,a){t.rangeCheck(e.length,r,n);for(var s=r;s<n;s++)e[s]=a},t.rangeCheck=function(e,r,n){if(r>n)throw new en("fromIndex("+r+") > toIndex("+n+")");if(r<0)throw new ZQ(r);if(n>e)throw new ZQ(n)},t.asList=function(){for(var e=[],r=0;r<arguments.length;r++)e[r]=arguments[r];return e},t.create=function(e,r,n){var a=Array.from({length:e});return a.map(function(s){return Array.from({length:r}).fill(n)})},t.createInt32Array=function(e,r,n){var a=Array.from({length:e});return a.map(function(s){return Int32Array.from({length:r}).fill(n)})},t.equals=function(e,r){if(!e||!r||!e.length||!r.length||e.length!==r.length)return!1;for(var n=0,a=e.length;n<a;n++)if(e[n]!==r[n])return!1;return!0},t.hashCode=function(e){var r,n;if(e===null)return 0;var a=1;try{for(var s=WIe(e),i=s.next();!i.done;i=s.next()){var l=i.value;a=31*a+l}}catch(c){r={error:c}}finally{try{i&&!i.done&&(n=s.return)&&n.call(s)}finally{if(r)throw r.error}}return a},t.fillUint8Array=function(e,r){for(var n=0;n!==e.length;n++)e[n]=r},t.copyOf=function(e,r){return e.slice(0,r)},t.copyOfUint8Array=function(e,r){if(e.length<=r){var n=new Uint8Array(r);return n.set(e),n}return e.slice(0,r)},t.copyOfRange=function(e,r,n){var a=n-r,s=new Int32Array(a);return Ka.arraycopy(e,r,s,0,a),s},t.binarySearch=function(e,r,n){n===void 0&&(n=t.numberComparator);for(var a=0,s=e.length-1;a<=s;){var i=s+a>>1,l=n(r,e[i]);if(l>0)a=i+1;else if(l<0)s=i-1;else return i}return-a-1},t.numberComparator=function(e,r){return e-r},t}(),Bn=function(){function t(){}return t.numberOfTrailingZeros=function(e){var r;if(e===0)return 32;var n=31;return r=e<<16,r!==0&&(n-=16,e=r),r=e<<8,r!==0&&(n-=8,e=r),r=e<<4,r!==0&&(n-=4,e=r),r=e<<2,r!==0&&(n-=2,e=r),n-(e<<1>>>31)},t.numberOfLeadingZeros=function(e){if(e===0)return 32;var r=1;return e>>>16||(r+=16,e<<=16),e>>>24||(r+=8,e<<=8),e>>>28||(r+=4,e<<=4),e>>>30||(r+=2,e<<=2),r-=e>>>31,r},t.toHexString=function(e){return e.toString(16)},t.toBinaryString=function(e){return String(parseInt(String(e),2))},t.bitCount=function(e){return e=e-(e>>>1&1431655765),e=(e&858993459)+(e>>>2&858993459),e=e+(e>>>4)&252645135,e=e+(e>>>8),e=e+(e>>>16),e&63},t.truncDivision=function(e,r){return Math.trunc(e/r)},t.parseInt=function(e,r){return r===void 0&&(r=void 0),parseInt(e,r)},t.MIN_VALUE_32_BITS=-2147483648,t.MAX_VALUE=Number.MAX_SAFE_INTEGER,t}(),Ao=function(){function t(e,r){e===void 0?(this.size=0,this.bits=new Int32Array(1)):(this.size=e,r==null?this.bits=t.makeArray(e):this.bits=r)}return t.prototype.getSize=function(){return this.size},t.prototype.getSizeInBytes=function(){return Math.floor((this.size+7)/8)},t.prototype.ensureCapacity=function(e){if(e>this.bits.length*32){var r=t.makeArray(e);Ka.arraycopy(this.bits,0,r,0,this.bits.length),this.bits=r}},t.prototype.get=function(e){return(this.bits[Math.floor(e/32)]&1<<(e&31))!==0},t.prototype.set=function(e){this.bits[Math.floor(e/32)]|=1<<(e&31)},t.prototype.flip=function(e){this.bits[Math.floor(e/32)]^=1<<(e&31)},t.prototype.getNextSet=function(e){var r=this.size;if(e>=r)return r;var n=this.bits,a=Math.floor(e/32),s=n[a];s&=~((1<<(e&31))-1);for(var i=n.length;s===0;){if(++a===i)return r;s=n[a]}var l=a*32+Bn.numberOfTrailingZeros(s);return l>r?r:l},t.prototype.getNextUnset=function(e){var r=this.size;if(e>=r)return r;var n=this.bits,a=Math.floor(e/32),s=~n[a];s&=~((1<<(e&31))-1);for(var i=n.length;s===0;){if(++a===i)return r;s=~n[a]}var l=a*32+Bn.numberOfTrailingZeros(s);return l>r?r:l},t.prototype.setBulk=function(e,r){this.bits[Math.floor(e/32)]=r},t.prototype.setRange=function(e,r){if(r<e||e<0||r>this.size)throw new en;if(r!==e){r--;for(var n=Math.floor(e/32),a=Math.floor(r/32),s=this.bits,i=n;i<=a;i++){var l=i>n?0:e&31,c=i<a?31:r&31,u=(2<<c)-(1<<l);s[i]|=u}}},t.prototype.clear=function(){for(var e=this.bits.length,r=this.bits,n=0;n<e;n++)r[n]=0},t.prototype.isRange=function(e,r,n){if(r<e||e<0||r>this.size)throw new en;if(r===e)return!0;r--;for(var a=Math.floor(e/32),s=Math.floor(r/32),i=this.bits,l=a;l<=s;l++){var c=l>a?0:e&31,u=l<s?31:r&31,d=(2<<u)-(1<<c)&4294967295;if((i[l]&d)!==(n?d:0))return!1}return!0},t.prototype.appendBit=function(e){this.ensureCapacity(this.size+1),e&&(this.bits[Math.floor(this.size/32)]|=1<<(this.size&31)),this.size++},t.prototype.appendBits=function(e,r){if(r<0||r>32)throw new en("Num bits must be between 0 and 32");this.ensureCapacity(this.size+r);for(var n=r;n>0;n--)this.appendBit((e>>n-1&1)===1)},t.prototype.appendBitArray=function(e){var r=e.size;this.ensureCapacity(this.size+r);for(var n=0;n<r;n++)this.appendBit(e.get(n))},t.prototype.xor=function(e){if(this.size!==e.size)throw new en("Sizes don't match");for(var r=this.bits,n=0,a=r.length;n<a;n++)r[n]^=e.bits[n]},t.prototype.toBytes=function(e,r,n,a){for(var s=0;s<a;s++){for(var i=0,l=0;l<8;l++)this.get(e)&&(i|=1<<7-l),e++;r[n+s]=i}},t.prototype.getBitArray=function(){return this.bits},t.prototype.reverse=function(){for(var e=new Int32Array(this.bits.length),r=Math.floor((this.size-1)/32),n=r+1,a=this.bits,s=0;s<n;s++){var i=a[s];i=i>>1&1431655765|(i&1431655765)<<1,i=i>>2&858993459|(i&858993459)<<2,i=i>>4&252645135|(i&252645135)<<4,i=i>>8&16711935|(i&16711935)<<8,i=i>>16&65535|(i&65535)<<16,e[r-s]=i}if(this.size!==n*32){for(var l=n*32-this.size,c=e[0]>>>l,s=1;s<n;s++){var u=e[s];c|=u<<32-l,e[s-1]=c,c=u>>>l}e[n-1]=c}this.bits=e},t.makeArray=function(e){return new Int32Array(Math.floor((e+31)/32))},t.prototype.equals=function(e){if(!(e instanceof t))return!1;var r=e;return this.size===r.size&&Ui.equals(this.bits,r.bits)},t.prototype.hashCode=function(){return 31*this.size+Ui.hashCode(this.bits)},t.prototype.toString=function(){for(var e="",r=0,n=this.size;r<n;r++)r&7||(e+=" "),e+=this.get(r)?"X":".";return e},t.prototype.clone=function(){return new t(this.size,this.bits.slice())},t.prototype.toArray=function(){for(var e=[],r=0,n=this.size;r<n;r++)e.push(this.get(r));return e},t}(),WT;(function(t){t[t.OTHER=0]="OTHER",t[t.PURE_BARCODE=1]="PURE_BARCODE",t[t.POSSIBLE_FORMATS=2]="POSSIBLE_FORMATS",t[t.TRY_HARDER=3]="TRY_HARDER",t[t.CHARACTER_SET=4]="CHARACTER_SET",t[t.ALLOWED_LENGTHS=5]="ALLOWED_LENGTHS",t[t.ASSUME_CODE_39_CHECK_DIGIT=6]="ASSUME_CODE_39_CHECK_DIGIT",t[t.ENABLE_CODE_39_EXTENDED_MODE=7]="ENABLE_CODE_39_EXTENDED_MODE",t[t.ASSUME_GS1=8]="ASSUME_GS1",t[t.RETURN_CODABAR_START_END=9]="RETURN_CODABAR_START_END",t[t.NEED_RESULT_POINT_CALLBACK=10]="NEED_RESULT_POINT_CALLBACK",t[t.ALLOWED_EAN_EXTENSIONS=11]="ALLOWED_EAN_EXTENSIONS"})(WT||(WT={}));const Ga=WT;var XIe=function(){var t=function(e,r){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,a){n.__proto__=a}||function(n,a){for(var s in a)a.hasOwnProperty(s)&&(n[s]=a[s])},t(e,r)};return function(e,r){t(e,r);function n(){this.constructor=e}e.prototype=r===null?Object.create(r):(n.prototype=r.prototype,new n)}}(),Nr=function(t){XIe(e,t);function e(){return t!==null&&t.apply(this,arguments)||this}return e.getFormatInstance=function(){return new e},e.kind="FormatException",e}(vc),YIe=function(t){var e=typeof Symbol=="function"&&Symbol.iterator,r=e&&t[e],n=0;if(r)return r.call(t);if(t&&typeof t.length=="number")return{next:function(){return t&&n>=t.length&&(t=void 0),{value:t&&t[n++],done:!t}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")},pa;(function(t){t[t.Cp437=0]="Cp437",t[t.ISO8859_1=1]="ISO8859_1",t[t.ISO8859_2=2]="ISO8859_2",t[t.ISO8859_3=3]="ISO8859_3",t[t.ISO8859_4=4]="ISO8859_4",t[t.ISO8859_5=5]="ISO8859_5",t[t.ISO8859_6=6]="ISO8859_6",t[t.ISO8859_7=7]="ISO8859_7",t[t.ISO8859_8=8]="ISO8859_8",t[t.ISO8859_9=9]="ISO8859_9",t[t.ISO8859_10=10]="ISO8859_10",t[t.ISO8859_11=11]="ISO8859_11",t[t.ISO8859_13=12]="ISO8859_13",t[t.ISO8859_14=13]="ISO8859_14",t[t.ISO8859_15=14]="ISO8859_15",t[t.ISO8859_16=15]="ISO8859_16",t[t.SJIS=16]="SJIS",t[t.Cp1250=17]="Cp1250",t[t.Cp1251=18]="Cp1251",t[t.Cp1252=19]="Cp1252",t[t.Cp1256=20]="Cp1256",t[t.UnicodeBigUnmarked=21]="UnicodeBigUnmarked",t[t.UTF8=22]="UTF8",t[t.ASCII=23]="ASCII",t[t.Big5=24]="Big5",t[t.GB18030=25]="GB18030",t[t.EUC_KR=26]="EUC_KR"})(pa||(pa={}));var Li=function(){function t(e,r,n){for(var a,s,i=[],l=3;l<arguments.length;l++)i[l-3]=arguments[l];this.valueIdentifier=e,this.name=n,typeof r=="number"?this.values=Int32Array.from([r]):this.values=r,this.otherEncodingNames=i,t.VALUE_IDENTIFIER_TO_ECI.set(e,this),t.NAME_TO_ECI.set(n,this);for(var c=this.values,u=0,d=c.length;u!==d;u++){var f=c[u];t.VALUES_TO_ECI.set(f,this)}try{for(var h=YIe(i),A=h.next();!A.done;A=h.next()){var m=A.value;t.NAME_TO_ECI.set(m,this)}}catch(p){a={error:p}}finally{try{A&&!A.done&&(s=h.return)&&s.call(h)}finally{if(a)throw a.error}}}return t.prototype.getValueIdentifier=function(){return this.valueIdentifier},t.prototype.getName=function(){return this.name},t.prototype.getValue=function(){return this.values[0]},t.getCharacterSetECIByValue=function(e){if(e<0||e>=900)throw new Nr("incorect value");var r=t.VALUES_TO_ECI.get(e);if(r===void 0)throw new Nr("incorect value");return r},t.getCharacterSetECIByName=function(e){var r=t.NAME_TO_ECI.get(e);if(r===void 0)throw new Nr("incorect value");return r},t.prototype.equals=function(e){if(!(e instanceof t))return!1;var r=e;return this.getName()===r.getName()},t.VALUE_IDENTIFIER_TO_ECI=new Map,t.VALUES_TO_ECI=new Map,t.NAME_TO_ECI=new Map,t.Cp437=new t(pa.Cp437,Int32Array.from([0,2]),"Cp437"),t.ISO8859_1=new t(pa.ISO8859_1,Int32Array.from([1,3]),"ISO-8859-1","ISO88591","ISO8859_1"),t.ISO8859_2=new t(pa.ISO8859_2,4,"ISO-8859-2","ISO88592","ISO8859_2"),t.ISO8859_3=new t(pa.ISO8859_3,5,"ISO-8859-3","ISO88593","ISO8859_3"),t.ISO8859_4=new t(pa.ISO8859_4,6,"ISO-8859-4","ISO88594","ISO8859_4"),t.ISO8859_5=new t(pa.ISO8859_5,7,"ISO-8859-5","ISO88595","ISO8859_5"),t.ISO8859_6=new t(pa.ISO8859_6,8,"ISO-8859-6","ISO88596","ISO8859_6"),t.ISO8859_7=new t(pa.ISO8859_7,9,"ISO-8859-7","ISO88597","ISO8859_7"),t.ISO8859_8=new t(pa.ISO8859_8,10,"ISO-8859-8","ISO88598","ISO8859_8"),t.ISO8859_9=new t(pa.ISO8859_9,11,"ISO-8859-9","ISO88599","ISO8859_9"),t.ISO8859_10=new t(pa.ISO8859_10,12,"ISO-8859-10","ISO885910","ISO8859_10"),t.ISO8859_11=new t(pa.ISO8859_11,13,"ISO-8859-11","ISO885911","ISO8859_11"),t.ISO8859_13=new t(pa.ISO8859_13,15,"ISO-8859-13","ISO885913","ISO8859_13"),t.ISO8859_14=new t(pa.ISO8859_14,16,"ISO-8859-14","ISO885914","ISO8859_14"),t.ISO8859_15=new t(pa.ISO8859_15,17,"ISO-8859-15","ISO885915","ISO8859_15"),t.ISO8859_16=new t(pa.ISO8859_16,18,"ISO-8859-16","ISO885916","ISO8859_16"),t.SJIS=new t(pa.SJIS,20,"SJIS","Shift_JIS"),t.Cp1250=new t(pa.Cp1250,21,"Cp1250","windows-1250"),t.Cp1251=new t(pa.Cp1251,22,"Cp1251","windows-1251"),t.Cp1252=new t(pa.Cp1252,23,"Cp1252","windows-1252"),t.Cp1256=new t(pa.Cp1256,24,"Cp1256","windows-1256"),t.UnicodeBigUnmarked=new t(pa.UnicodeBigUnmarked,25,"UnicodeBigUnmarked","UTF-16BE","UnicodeBig"),t.UTF8=new t(pa.UTF8,26,"UTF8","UTF-8"),t.ASCII=new t(pa.ASCII,Int32Array.from([27,170]),"ASCII","US-ASCII"),t.Big5=new t(pa.Big5,28,"Big5"),t.GB18030=new t(pa.GB18030,29,"GB18030","GB2312","EUC_CN","GBK"),t.EUC_KR=new t(pa.EUC_KR,30,"EUC_KR","EUC-KR"),t}(),JIe=function(){var t=function(e,r){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,a){n.__proto__=a}||function(n,a){for(var s in a)a.hasOwnProperty(s)&&(n[s]=a[s])},t(e,r)};return function(e,r){t(e,r);function n(){this.constructor=e}e.prototype=r===null?Object.create(r):(n.prototype=r.prototype,new n)}}(),U_=function(t){JIe(e,t);function e(){return t!==null&&t.apply(this,arguments)||this}return e.kind="UnsupportedOperationException",e}(vc),Vu=function(){function t(){}return t.decode=function(e,r){var n=this.encodingName(r);return this.customDecoder?this.customDecoder(e,n):typeof TextDecoder>"u"||this.shouldDecodeOnFallback(n)?this.decodeFallback(e,n):new TextDecoder(n).decode(e)},t.shouldDecodeOnFallback=function(e){return!t.isBrowser()&&e==="ISO-8859-1"},t.encode=function(e,r){var n=this.encodingName(r);return this.customEncoder?this.customEncoder(e,n):typeof TextEncoder>"u"?this.encodeFallback(e):new TextEncoder().encode(e)},t.isBrowser=function(){return typeof window<"u"&&{}.toString.call(window)==="[object Window]"},t.encodingName=function(e){return typeof e=="string"?e:e.getName()},t.encodingCharacterSet=function(e){return e instanceof Li?e:Li.getCharacterSetECIByName(e)},t.decodeFallback=function(e,r){var n=this.encodingCharacterSet(r);if(t.isDecodeFallbackSupported(n)){for(var a="",s=0,i=e.length;s<i;s++){var l=e[s].toString(16);l.length<2&&(l="0"+l),a+="%"+l}return decodeURIComponent(a)}if(n.equals(Li.UnicodeBigUnmarked))return String.fromCharCode.apply(null,new Uint16Array(e.buffer));throw new U_("Encoding "+this.encodingName(r)+" not supported by fallback.")},t.isDecodeFallbackSupported=function(e){return e.equals(Li.UTF8)||e.equals(Li.ISO8859_1)||e.equals(Li.ASCII)},t.encodeFallback=function(e){for(var r=btoa(unescape(encodeURIComponent(e))),n=r.split(""),a=[],s=0;s<n.length;s++)a.push(n[s].charCodeAt(0));return new Uint8Array(a)},t}(),Kn=function(){function t(){}return t.castAsNonUtf8Char=function(e,r){r===void 0&&(r=null);var n=r?r.getName():this.ISO88591;return Vu.decode(new Uint8Array([e]),n)},t.guessEncoding=function(e,r){if(r!=null&&r.get(Ga.CHARACTER_SET)!==void 0)return r.get(Ga.CHARACTER_SET).toString();for(var n=e.length,a=!0,s=!0,i=!0,l=0,c=0,u=0,d=0,f=0,h=0,A=0,m=0,p=0,g=0,x=0,y=e.length>3&&e[0]===239&&e[1]===187&&e[2]===191,b=0;b<n&&(a||s||i);b++){var w=e[b]&255;i&&(l>0?w&128?l--:i=!1:w&128&&(w&64?(l++,w&32?(l++,w&16?(l++,w&8?i=!1:d++):u++):c++):i=!1)),a&&(w>127&&w<160?a=!1:w>159&&(w<192||w===215||w===247)&&x++),s&&(f>0?w<64||w===127||w>252?s=!1:f--:w===128||w===160||w>239?s=!1:w>160&&w<224?(h++,m=0,A++,A>p&&(p=A)):w>127?(f++,A=0,m++,m>g&&(g=m)):(A=0,m=0))}return i&&l>0&&(i=!1),s&&f>0&&(s=!1),i&&(y||c+u+d>0)?t.UTF8:s&&(t.ASSUME_SHIFT_JIS||p>=3||g>=3)?t.SHIFT_JIS:a&&s?p===2&&h===2||x*10>=n?t.SHIFT_JIS:t.ISO88591:a?t.ISO88591:s?t.SHIFT_JIS:i?t.UTF8:t.PLATFORM_DEFAULT_ENCODING},t.format=function(e){for(var r=[],n=1;n<arguments.length;n++)r[n-1]=arguments[n];var a=-1;function s(l,c,u,d,f,h){if(l==="%%")return"%";if(r[++a]!==void 0){l=d?parseInt(d.substr(1)):void 0;var A=f?parseInt(f.substr(1)):void 0,m;switch(h){case"s":m=r[a];break;case"c":m=r[a][0];break;case"f":m=parseFloat(r[a]).toFixed(l);break;case"p":m=parseFloat(r[a]).toPrecision(l);break;case"e":m=parseFloat(r[a]).toExponential(l);break;case"x":m=parseInt(r[a]).toString(A||16);break;case"d":m=parseFloat(parseInt(r[a],A||10).toPrecision(l)).toFixed(0);break}m=typeof m=="object"?JSON.stringify(m):(+m).toString(A);for(var p=parseInt(u),g=u&&u[0]+""=="0"?"0":" ";m.length<p;)m=c!==void 0?m+g:g+m;return m}}var i=/%(-)?(0?[0-9]+)?([.][0-9]+)?([#][0-9]+)?([scfpexd%])/g;return e.replace(i,s)},t.getBytes=function(e,r){return Vu.encode(e,r)},t.getCharCode=function(e,r){return r===void 0&&(r=0),e.charCodeAt(r)},t.getCharAt=function(e){return String.fromCharCode(e)},t.SHIFT_JIS=Li.SJIS.getName(),t.GB2312="GB2312",t.ISO88591=Li.ISO8859_1.getName(),t.EUC_JP="EUC_JP",t.UTF8=Li.UTF8.getName(),t.PLATFORM_DEFAULT_ENCODING=t.UTF8,t.ASSUME_SHIFT_JIS=!1,t}(),_n=function(){function t(e){e===void 0&&(e=""),this.value=e}return t.prototype.enableDecoding=function(e){return this.encoding=e,this},t.prototype.append=function(e){return typeof e=="string"?this.value+=e.toString():this.encoding?this.value+=Kn.castAsNonUtf8Char(e,this.encoding):this.value+=String.fromCharCode(e),this},t.prototype.appendChars=function(e,r,n){for(var a=r;r<r+n;a++)this.append(e[a]);return this},t.prototype.length=function(){return this.value.length},t.prototype.charAt=function(e){return this.value.charAt(e)},t.prototype.deleteCharAt=function(e){this.value=this.value.substr(0,e)+this.value.substring(e+1)},t.prototype.setCharAt=function(e,r){this.value=this.value.substr(0,e)+r+this.value.substr(e+1)},t.prototype.substring=function(e,r){return this.value.substring(e,r)},t.prototype.setLengthToZero=function(){this.value=""},t.prototype.toString=function(){return this.value},t.prototype.insert=function(e,r){this.value=this.value.substring(0,e)+r+this.value.substring(e)},t}(),Sf=function(){function t(e,r,n,a){if(this.width=e,this.height=r,this.rowSize=n,this.bits=a,r==null&&(r=e),this.height=r,e<1||r<1)throw new en("Both dimensions must be greater than 0");n==null&&(n=Math.floor((e+31)/32)),this.rowSize=n,a==null&&(this.bits=new Int32Array(this.rowSize*this.height))}return t.parseFromBooleanArray=function(e){for(var r=e.length,n=e[0].length,a=new t(n,r),s=0;s<r;s++)for(var i=e[s],l=0;l<n;l++)i[l]&&a.set(l,s);return a},t.parseFromString=function(e,r,n){if(e===null)throw new en("stringRepresentation cannot be null");for(var a=new Array(e.length),s=0,i=0,l=-1,c=0,u=0;u<e.length;)if(e.charAt(u)===`
`||e.charAt(u)==="\r"){if(s>i){if(l===-1)l=s-i;else if(s-i!==l)throw new en("row lengths do not match");i=s,c++}u++}else if(e.substring(u,u+r.length)===r)u+=r.length,a[s]=!0,s++;else if(e.substring(u,u+n.length)===n)u+=n.length,a[s]=!1,s++;else throw new en("illegal character encountered: "+e.substring(u));if(s>i){if(l===-1)l=s-i;else if(s-i!==l)throw new en("row lengths do not match");c++}for(var d=new t(l,c),f=0;f<s;f++)a[f]&&d.set(Math.floor(f%l),Math.floor(f/l));return d},t.prototype.get=function(e,r){var n=r*this.rowSize+Math.floor(e/32);return(this.bits[n]>>>(e&31)&1)!==0},t.prototype.set=function(e,r){var n=r*this.rowSize+Math.floor(e/32);this.bits[n]|=1<<(e&31)&4294967295},t.prototype.unset=function(e,r){var n=r*this.rowSize+Math.floor(e/32);this.bits[n]&=~(1<<(e&31)&4294967295)},t.prototype.flip=function(e,r){var n=r*this.rowSize+Math.floor(e/32);this.bits[n]^=1<<(e&31)&4294967295},t.prototype.xor=function(e){if(this.width!==e.getWidth()||this.height!==e.getHeight()||this.rowSize!==e.getRowSize())throw new en("input matrix dimensions do not match");for(var r=new Ao(Math.floor(this.width/32)+1),n=this.rowSize,a=this.bits,s=0,i=this.height;s<i;s++)for(var l=s*n,c=e.getRow(s,r).getBitArray(),u=0;u<n;u++)a[l+u]^=c[u]},t.prototype.clear=function(){for(var e=this.bits,r=e.length,n=0;n<r;n++)e[n]=0},t.prototype.setRegion=function(e,r,n,a){if(r<0||e<0)throw new en("Left and top must be nonnegative");if(a<1||n<1)throw new en("Height and width must be at least 1");var s=e+n,i=r+a;if(i>this.height||s>this.width)throw new en("The region must fit inside the matrix");for(var l=this.rowSize,c=this.bits,u=r;u<i;u++)for(var d=u*l,f=e;f<s;f++)c[d+Math.floor(f/32)]|=1<<(f&31)&4294967295},t.prototype.getRow=function(e,r){r==null||r.getSize()<this.width?r=new Ao(this.width):r.clear();for(var n=this.rowSize,a=this.bits,s=e*n,i=0;i<n;i++)r.setBulk(i*32,a[s+i]);return r},t.prototype.setRow=function(e,r){Ka.arraycopy(r.getBitArray(),0,this.bits,e*this.rowSize,this.rowSize)},t.prototype.rotate180=function(){for(var e=this.getWidth(),r=this.getHeight(),n=new Ao(e),a=new Ao(e),s=0,i=Math.floor((r+1)/2);s<i;s++)n=this.getRow(s,n),a=this.getRow(r-1-s,a),n.reverse(),a.reverse(),this.setRow(s,a),this.setRow(r-1-s,n)},t.prototype.getEnclosingRectangle=function(){for(var e=this.width,r=this.height,n=this.rowSize,a=this.bits,s=e,i=r,l=-1,c=-1,u=0;u<r;u++)for(var d=0;d<n;d++){var f=a[u*n+d];if(f!==0){if(u<i&&(i=u),u>c&&(c=u),d*32<s){for(var h=0;!(f<<31-h&4294967295);)h++;d*32+h<s&&(s=d*32+h)}if(d*32+31>l){for(var h=31;!(f>>>h);)h--;d*32+h>l&&(l=d*32+h)}}}return l<s||c<i?null:Int32Array.from([s,i,l-s+1,c-i+1])},t.prototype.getTopLeftOnBit=function(){for(var e=this.rowSize,r=this.bits,n=0;n<r.length&&r[n]===0;)n++;if(n===r.length)return null;for(var a=n/e,s=n%e*32,i=r[n],l=0;!(i<<31-l&4294967295);)l++;return s+=l,Int32Array.from([s,a])},t.prototype.getBottomRightOnBit=function(){for(var e=this.rowSize,r=this.bits,n=r.length-1;n>=0&&r[n]===0;)n--;if(n<0)return null;for(var a=Math.floor(n/e),s=Math.floor(n%e)*32,i=r[n],l=31;!(i>>>l);)l--;return s+=l,Int32Array.from([s,a])},t.prototype.getWidth=function(){return this.width},t.prototype.getHeight=function(){return this.height},t.prototype.getRowSize=function(){return this.rowSize},t.prototype.equals=function(e){if(!(e instanceof t))return!1;var r=e;return this.width===r.width&&this.height===r.height&&this.rowSize===r.rowSize&&Ui.equals(this.bits,r.bits)},t.prototype.hashCode=function(){var e=this.width;return e=31*e+this.width,e=31*e+this.height,e=31*e+this.rowSize,e=31*e+Ui.hashCode(this.bits),e},t.prototype.toString=function(e,r,n){return e===void 0&&(e="X "),r===void 0&&(r="  "),n===void 0&&(n=`
`),this.buildToString(e,r,n)},t.prototype.buildToString=function(e,r,n){for(var a=new _n,s=0,i=this.height;s<i;s++){for(var l=0,c=this.width;l<c;l++)a.append(this.get(l,s)?e:r);a.append(n)}return a.toString()},t.prototype.clone=function(){return new t(this.width,this.height,this.rowSize,this.bits.slice())},t}(),ZIe=function(){var t=function(e,r){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,a){n.__proto__=a}||function(n,a){for(var s in a)a.hasOwnProperty(s)&&(n[s]=a[s])},t(e,r)};return function(e,r){t(e,r);function n(){this.constructor=e}e.prototype=r===null?Object.create(r):(n.prototype=r.prototype,new n)}}(),Wt=function(t){ZIe(e,t);function e(){return t!==null&&t.apply(this,arguments)||this}return e.getNotFoundInstance=function(){return new e},e.kind="NotFoundException",e}(vc),e4e=function(){var t=function(e,r){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,a){n.__proto__=a}||function(n,a){for(var s in a)a.hasOwnProperty(s)&&(n[s]=a[s])},t(e,r)};return function(e,r){t(e,r);function n(){this.constructor=e}e.prototype=r===null?Object.create(r):(n.prototype=r.prototype,new n)}}(),t4e=function(t){e4e(e,t);function e(r){var n=t.call(this,r)||this;return n.luminances=e.EMPTY,n.buckets=new Int32Array(e.LUMINANCE_BUCKETS),n}return e.prototype.getBlackRow=function(r,n){var a=this.getLuminanceSource(),s=a.getWidth();n==null||n.getSize()<s?n=new Ao(s):n.clear(),this.initArrays(s);for(var i=a.getRow(r,this.luminances),l=this.buckets,c=0;c<s;c++)l[(i[c]&255)>>e.LUMINANCE_SHIFT]++;var u=e.estimateBlackPoint(l);if(s<3)for(var c=0;c<s;c++)(i[c]&255)<u&&n.set(c);else for(var d=i[0]&255,f=i[1]&255,c=1;c<s-1;c++){var h=i[c+1]&255;(f*4-d-h)/2<u&&n.set(c),d=f,f=h}return n},e.prototype.getBlackMatrix=function(){var r=this.getLuminanceSource(),n=r.getWidth(),a=r.getHeight(),s=new Sf(n,a);this.initArrays(n);for(var i=this.buckets,l=1;l<5;l++)for(var c=Math.floor(a*l/5),u=r.getRow(c,this.luminances),d=Math.floor(n*4/5),f=Math.floor(n/5);f<d;f++){var h=u[f]&255;i[h>>e.LUMINANCE_SHIFT]++}for(var A=e.estimateBlackPoint(i),m=r.getMatrix(),l=0;l<a;l++)for(var p=l*n,f=0;f<n;f++){var h=m[p+f]&255;h<A&&s.set(f,l)}return s},e.prototype.createBinarizer=function(r){return new e(r)},e.prototype.initArrays=function(r){this.luminances.length<r&&(this.luminances=new Uint8ClampedArray(r));for(var n=this.buckets,a=0;a<e.LUMINANCE_BUCKETS;a++)n[a]=0},e.estimateBlackPoint=function(r){for(var n=r.length,a=0,s=0,i=0,l=0;l<n;l++)r[l]>i&&(s=l,i=r[l]),r[l]>a&&(a=r[l]);for(var c=0,u=0,l=0;l<n;l++){var d=l-s,f=r[l]*d*d;f>u&&(c=l,u=f)}if(s>c){var h=s;s=c,c=h}if(c-s<=n/16)throw new Wt;for(var A=c-1,m=-1,l=c-1;l>s;l--){var p=l-s,f=p*p*(c-l)*(a-r[l]);f>m&&(A=l,m=f)}return A<<e.LUMINANCE_SHIFT},e.LUMINANCE_BITS=5,e.LUMINANCE_SHIFT=8-e.LUMINANCE_BITS,e.LUMINANCE_BUCKETS=1<<e.LUMINANCE_BITS,e.EMPTY=Uint8ClampedArray.from([0]),e}(GIe),r4e=function(){var t=function(e,r){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,a){n.__proto__=a}||function(n,a){for(var s in a)a.hasOwnProperty(s)&&(n[s]=a[s])},t(e,r)};return function(e,r){t(e,r);function n(){this.constructor=e}e.prototype=r===null?Object.create(r):(n.prototype=r.prototype,new n)}}(),hte=function(t){r4e(e,t);function e(r){var n=t.call(this,r)||this;return n.matrix=null,n}return e.prototype.getBlackMatrix=function(){if(this.matrix!==null)return this.matrix;var r=this.getLuminanceSource(),n=r.getWidth(),a=r.getHeight();if(n>=e.MINIMUM_DIMENSION&&a>=e.MINIMUM_DIMENSION){var s=r.getMatrix(),i=n>>e.BLOCK_SIZE_POWER;n&e.BLOCK_SIZE_MASK&&i++;var l=a>>e.BLOCK_SIZE_POWER;a&e.BLOCK_SIZE_MASK&&l++;var c=e.calculateBlackPoints(s,i,l,n,a),u=new Sf(n,a);e.calculateThresholdForBlock(s,i,l,n,a,c,u),this.matrix=u}else this.matrix=t.prototype.getBlackMatrix.call(this);return this.matrix},e.prototype.createBinarizer=function(r){return new e(r)},e.calculateThresholdForBlock=function(r,n,a,s,i,l,c){for(var u=i-e.BLOCK_SIZE,d=s-e.BLOCK_SIZE,f=0;f<a;f++){var h=f<<e.BLOCK_SIZE_POWER;h>u&&(h=u);for(var A=e.cap(f,2,a-3),m=0;m<n;m++){var p=m<<e.BLOCK_SIZE_POWER;p>d&&(p=d);for(var g=e.cap(m,2,n-3),x=0,y=-2;y<=2;y++){var b=l[A+y];x+=b[g-2]+b[g-1]+b[g]+b[g+1]+b[g+2]}var w=x/25;e.thresholdBlock(r,p,h,w,s,c)}}},e.cap=function(r,n,a){return r<n?n:r>a?a:r},e.thresholdBlock=function(r,n,a,s,i,l){for(var c=0,u=a*i+n;c<e.BLOCK_SIZE;c++,u+=i)for(var d=0;d<e.BLOCK_SIZE;d++)(r[u+d]&255)<=s&&l.set(n+d,a+c)},e.calculateBlackPoints=function(r,n,a,s,i){for(var l=i-e.BLOCK_SIZE,c=s-e.BLOCK_SIZE,u=new Array(a),d=0;d<a;d++){u[d]=new Int32Array(n);var f=d<<e.BLOCK_SIZE_POWER;f>l&&(f=l);for(var h=0;h<n;h++){var A=h<<e.BLOCK_SIZE_POWER;A>c&&(A=c);for(var m=0,p=255,g=0,x=0,y=f*s+A;x<e.BLOCK_SIZE;x++,y+=s){for(var b=0;b<e.BLOCK_SIZE;b++){var w=r[y+b]&255;m+=w,w<p&&(p=w),w>g&&(g=w)}if(g-p>e.MIN_DYNAMIC_RANGE)for(x++,y+=s;x<e.BLOCK_SIZE;x++,y+=s)for(var b=0;b<e.BLOCK_SIZE;b++)m+=r[y+b]&255}var j=m>>e.BLOCK_SIZE_POWER*2;if(g-p<=e.MIN_DYNAMIC_RANGE&&(j=p/2,d>0&&h>0)){var I=(u[d-1][h]+2*u[d][h-1]+u[d-1][h-1])/4;p<I&&(j=I)}u[d][h]=j}}return u},e.BLOCK_SIZE_POWER=3,e.BLOCK_SIZE=1<<e.BLOCK_SIZE_POWER,e.BLOCK_SIZE_MASK=e.BLOCK_SIZE-1,e.MINIMUM_DIMENSION=e.BLOCK_SIZE*5,e.MIN_DYNAMIC_RANGE=24,e}(t4e),sw=function(){function t(e,r){this.width=e,this.height=r}return t.prototype.getWidth=function(){return this.width},t.prototype.getHeight=function(){return this.height},t.prototype.isCropSupported=function(){return!1},t.prototype.crop=function(e,r,n,a){throw new U_("This luminance source does not support cropping.")},t.prototype.isRotateSupported=function(){return!1},t.prototype.rotateCounterClockwise=function(){throw new U_("This luminance source does not support rotation by 90 degrees.")},t.prototype.rotateCounterClockwise45=function(){throw new U_("This luminance source does not support rotation by 45 degrees.")},t.prototype.toString=function(){for(var e=new Uint8ClampedArray(this.width),r=new _n,n=0;n<this.height;n++){for(var a=this.getRow(n,e),s=0;s<this.width;s++){var i=a[s]&255,l=void 0;i<64?l="#":i<128?l="+":i<192?l=".":l=" ",r.append(l)}r.append(`
`)}return r.toString()},t}(),n4e=function(){var t=function(e,r){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,a){n.__proto__=a}||function(n,a){for(var s in a)a.hasOwnProperty(s)&&(n[s]=a[s])},t(e,r)};return function(e,r){t(e,r);function n(){this.constructor=e}e.prototype=r===null?Object.create(r):(n.prototype=r.prototype,new n)}}(),w4=function(t){n4e(e,t);function e(r){var n=t.call(this,r.getWidth(),r.getHeight())||this;return n.delegate=r,n}return e.prototype.getRow=function(r,n){for(var a=this.delegate.getRow(r,n),s=this.getWidth(),i=0;i<s;i++)a[i]=255-(a[i]&255);return a},e.prototype.getMatrix=function(){for(var r=this.delegate.getMatrix(),n=this.getWidth()*this.getHeight(),a=new Uint8ClampedArray(n),s=0;s<n;s++)a[s]=255-(r[s]&255);return a},e.prototype.isCropSupported=function(){return this.delegate.isCropSupported()},e.prototype.crop=function(r,n,a,s){return new e(this.delegate.crop(r,n,a,s))},e.prototype.isRotateSupported=function(){return this.delegate.isRotateSupported()},e.prototype.invert=function(){return this.delegate},e.prototype.rotateCounterClockwise=function(){return new e(this.delegate.rotateCounterClockwise())},e.prototype.rotateCounterClockwise45=function(){return new e(this.delegate.rotateCounterClockwise45())},e}(sw),a4e=function(){var t=function(e,r){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,a){n.__proto__=a}||function(n,a){for(var s in a)a.hasOwnProperty(s)&&(n[s]=a[s])},t(e,r)};return function(e,r){t(e,r);function n(){this.constructor=e}e.prototype=r===null?Object.create(r):(n.prototype=r.prototype,new n)}}(),s4e=function(t){a4e(e,t);function e(r,n){n===void 0&&(n=!1);var a=t.call(this,r.width,r.height)||this;return a.canvas=r,a.tempCanvasElement=null,a.buffer=e.makeBufferFromCanvasImageData(r,n),a}return e.makeBufferFromCanvasImageData=function(r,n){n===void 0&&(n=!1);var a=r.getContext("2d").getImageData(0,0,r.width,r.height);return e.toGrayscaleBuffer(a.data,r.width,r.height,n)},e.toGrayscaleBuffer=function(r,n,a,s){s===void 0&&(s=!1);var i=new Uint8ClampedArray(n*a);if(e.FRAME_INDEX=!e.FRAME_INDEX,e.FRAME_INDEX||!s)for(var l=0,c=0,u=r.length;l<u;l+=4,c++){var d=void 0,f=r[l+3];if(f===0)d=255;else{var h=r[l],A=r[l+1],m=r[l+2];d=306*h+601*A+117*m+512>>10}i[c]=d}else for(var l=0,c=0,p=r.length;l<p;l+=4,c++){var d=void 0,f=r[l+3];if(f===0)d=255;else{var h=r[l],A=r[l+1],m=r[l+2];d=306*h+601*A+117*m+512>>10}i[c]=255-d}return i},e.prototype.getRow=function(r,n){if(r<0||r>=this.getHeight())throw new en("Requested row is outside the image: "+r);var a=this.getWidth(),s=r*a;return n===null?n=this.buffer.slice(s,s+a):(n.length<a&&(n=new Uint8ClampedArray(a)),n.set(this.buffer.slice(s,s+a))),n},e.prototype.getMatrix=function(){return this.buffer},e.prototype.isCropSupported=function(){return!0},e.prototype.crop=function(r,n,a,s){return t.prototype.crop.call(this,r,n,a,s),this},e.prototype.isRotateSupported=function(){return!0},e.prototype.rotateCounterClockwise=function(){return this.rotate(-90),this},e.prototype.rotateCounterClockwise45=function(){return this.rotate(-45),this},e.prototype.getTempCanvasElement=function(){if(this.tempCanvasElement===null){var r=this.canvas.ownerDocument.createElement("canvas");r.width=this.canvas.width,r.height=this.canvas.height,this.tempCanvasElement=r}return this.tempCanvasElement},e.prototype.rotate=function(r){var n=this.getTempCanvasElement(),a=n.getContext("2d"),s=r*e.DEGREE_TO_RADIANS,i=this.canvas.width,l=this.canvas.height,c=Math.ceil(Math.abs(Math.cos(s))*i+Math.abs(Math.sin(s))*l),u=Math.ceil(Math.abs(Math.sin(s))*i+Math.abs(Math.cos(s))*l);return n.width=c,n.height=u,a.translate(c/2,u/2),a.rotate(s),a.drawImage(this.canvas,i/-2,l/-2),this.buffer=e.makeBufferFromCanvasImageData(n),this},e.prototype.invert=function(){return new w4(this)},e.DEGREE_TO_RADIANS=Math.PI/180,e.FRAME_INDEX=!0,e}(sw),i4e=function(){function t(e,r,n){this.deviceId=e,this.label=r,this.kind="videoinput",this.groupId=n||void 0}return t.prototype.toJSON=function(){return{kind:this.kind,groupId:this.groupId,deviceId:this.deviceId,label:this.label}},t}(),Il=function(t,e,r,n){function a(s){return s instanceof r?s:new r(function(i){i(s)})}return new(r||(r=Promise))(function(s,i){function l(d){try{u(n.next(d))}catch(f){i(f)}}function c(d){try{u(n.throw(d))}catch(f){i(f)}}function u(d){d.done?s(d.value):a(d.value).then(l,c)}u((n=n.apply(t,e||[])).next())})},jl=function(t,e){var r={label:0,sent:function(){if(s[0]&1)throw s[1];return s[1]},trys:[],ops:[]},n,a,s,i;return i={next:l(0),throw:l(1),return:l(2)},typeof Symbol=="function"&&(i[Symbol.iterator]=function(){return this}),i;function l(u){return function(d){return c([u,d])}}function c(u){if(n)throw new TypeError("Generator is already executing.");for(;r;)try{if(n=1,a&&(s=u[0]&2?a.return:u[0]?a.throw||((s=a.return)&&s.call(a),0):a.next)&&!(s=s.call(a,u[1])).done)return s;switch(a=0,s&&(u=[u[0]&2,s.value]),u[0]){case 0:case 1:s=u;break;case 4:return r.label++,{value:u[1],done:!1};case 5:r.label++,a=u[1],u=[0];continue;case 7:u=r.ops.pop(),r.trys.pop();continue;default:if(s=r.trys,!(s=s.length>0&&s[s.length-1])&&(u[0]===6||u[0]===2)){r=0;continue}if(u[0]===3&&(!s||u[1]>s[0]&&u[1]<s[3])){r.label=u[1];break}if(u[0]===6&&r.label<s[1]){r.label=s[1],s=u;break}if(s&&r.label<s[2]){r.label=s[2],r.ops.push(u);break}s[2]&&r.ops.pop(),r.trys.pop();continue}u=e.call(t,r)}catch(d){u=[6,d],a=0}finally{n=s=0}if(u[0]&5)throw u[1];return{value:u[0]?u[1]:void 0,done:!0}}},o4e=function(t){var e=typeof Symbol=="function"&&Symbol.iterator,r=e&&t[e],n=0;if(r)return r.call(t);if(t&&typeof t.length=="number")return{next:function(){return t&&n>=t.length&&(t=void 0),{value:t&&t[n++],done:!t}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")},Lv=function(){function t(e,r,n){r===void 0&&(r=500),this.reader=e,this.timeBetweenScansMillis=r,this._hints=n,this._stopContinuousDecode=!1,this._stopAsyncDecode=!1,this._timeBetweenDecodingAttempts=0}return Object.defineProperty(t.prototype,"hasNavigator",{get:function(){return typeof navigator<"u"},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"isMediaDevicesSuported",{get:function(){return this.hasNavigator&&!!navigator.mediaDevices},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"canEnumerateDevices",{get:function(){return!!(this.isMediaDevicesSuported&&navigator.mediaDevices.enumerateDevices)},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"timeBetweenDecodingAttempts",{get:function(){return this._timeBetweenDecodingAttempts},set:function(e){this._timeBetweenDecodingAttempts=e<0?0:e},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"hints",{get:function(){return this._hints},set:function(e){this._hints=e||null},enumerable:!1,configurable:!0}),t.prototype.listVideoInputDevices=function(){return Il(this,void 0,void 0,function(){var e,r,n,a,s,i,l,c,u,d,f,h;return jl(this,function(A){switch(A.label){case 0:if(!this.hasNavigator)throw new Error("Can't enumerate devices, navigator is not present.");if(!this.canEnumerateDevices)throw new Error("Can't enumerate devices, method not supported.");return[4,navigator.mediaDevices.enumerateDevices()];case 1:e=A.sent(),r=[];try{for(n=o4e(e),a=n.next();!a.done;a=n.next())s=a.value,i=s.kind==="video"?"videoinput":s.kind,i==="videoinput"&&(l=s.deviceId||s.id,c=s.label||"Video device "+(r.length+1),u=s.groupId,d={deviceId:l,label:c,kind:i,groupId:u},r.push(d))}catch(m){f={error:m}}finally{try{a&&!a.done&&(h=n.return)&&h.call(n)}finally{if(f)throw f.error}}return[2,r]}})})},t.prototype.getVideoInputDevices=function(){return Il(this,void 0,void 0,function(){var e;return jl(this,function(r){switch(r.label){case 0:return[4,this.listVideoInputDevices()];case 1:return e=r.sent(),[2,e.map(function(n){return new i4e(n.deviceId,n.label)})]}})})},t.prototype.findDeviceById=function(e){return Il(this,void 0,void 0,function(){var r;return jl(this,function(n){switch(n.label){case 0:return[4,this.listVideoInputDevices()];case 1:return r=n.sent(),r?[2,r.find(function(a){return a.deviceId===e})]:[2,null]}})})},t.prototype.decodeFromInputVideoDevice=function(e,r){return Il(this,void 0,void 0,function(){return jl(this,function(n){switch(n.label){case 0:return[4,this.decodeOnceFromVideoDevice(e,r)];case 1:return[2,n.sent()]}})})},t.prototype.decodeOnceFromVideoDevice=function(e,r){return Il(this,void 0,void 0,function(){var n,a;return jl(this,function(s){switch(s.label){case 0:return this.reset(),e?n={deviceId:{exact:e}}:n={facingMode:"environment"},a={video:n},[4,this.decodeOnceFromConstraints(a,r)];case 1:return[2,s.sent()]}})})},t.prototype.decodeOnceFromConstraints=function(e,r){return Il(this,void 0,void 0,function(){var n;return jl(this,function(a){switch(a.label){case 0:return[4,navigator.mediaDevices.getUserMedia(e)];case 1:return n=a.sent(),[4,this.decodeOnceFromStream(n,r)];case 2:return[2,a.sent()]}})})},t.prototype.decodeOnceFromStream=function(e,r){return Il(this,void 0,void 0,function(){var n,a;return jl(this,function(s){switch(s.label){case 0:return this.reset(),[4,this.attachStreamToVideo(e,r)];case 1:return n=s.sent(),[4,this.decodeOnce(n)];case 2:return a=s.sent(),[2,a]}})})},t.prototype.decodeFromInputVideoDeviceContinuously=function(e,r,n){return Il(this,void 0,void 0,function(){return jl(this,function(a){switch(a.label){case 0:return[4,this.decodeFromVideoDevice(e,r,n)];case 1:return[2,a.sent()]}})})},t.prototype.decodeFromVideoDevice=function(e,r,n){return Il(this,void 0,void 0,function(){var a,s;return jl(this,function(i){switch(i.label){case 0:return e?a={deviceId:{exact:e}}:a={facingMode:"environment"},s={video:a},[4,this.decodeFromConstraints(s,r,n)];case 1:return[2,i.sent()]}})})},t.prototype.decodeFromConstraints=function(e,r,n){return Il(this,void 0,void 0,function(){var a;return jl(this,function(s){switch(s.label){case 0:return[4,navigator.mediaDevices.getUserMedia(e)];case 1:return a=s.sent(),[4,this.decodeFromStream(a,r,n)];case 2:return[2,s.sent()]}})})},t.prototype.decodeFromStream=function(e,r,n){return Il(this,void 0,void 0,function(){var a;return jl(this,function(s){switch(s.label){case 0:return this.reset(),[4,this.attachStreamToVideo(e,r)];case 1:return a=s.sent(),[4,this.decodeContinuously(a,n)];case 2:return[2,s.sent()]}})})},t.prototype.stopAsyncDecode=function(){this._stopAsyncDecode=!0},t.prototype.stopContinuousDecode=function(){this._stopContinuousDecode=!0},t.prototype.attachStreamToVideo=function(e,r){return Il(this,void 0,void 0,function(){var n;return jl(this,function(a){switch(a.label){case 0:return n=this.prepareVideoElement(r),this.addVideoSource(n,e),this.videoElement=n,this.stream=e,[4,this.playVideoOnLoadAsync(n)];case 1:return a.sent(),[2,n]}})})},t.prototype.playVideoOnLoadAsync=function(e){var r=this;return new Promise(function(n,a){return r.playVideoOnLoad(e,function(){return n()})})},t.prototype.playVideoOnLoad=function(e,r){var n=this;this.videoEndedListener=function(){return n.stopStreams()},this.videoCanPlayListener=function(){return n.tryPlayVideo(e)},e.addEventListener("ended",this.videoEndedListener),e.addEventListener("canplay",this.videoCanPlayListener),e.addEventListener("playing",r),this.tryPlayVideo(e)},t.prototype.isVideoPlaying=function(e){return e.currentTime>0&&!e.paused&&!e.ended&&e.readyState>2},t.prototype.tryPlayVideo=function(e){return Il(this,void 0,void 0,function(){return jl(this,function(r){switch(r.label){case 0:if(this.isVideoPlaying(e))return console.warn("Trying to play video that is already playing."),[2];r.label=1;case 1:return r.trys.push([1,3,,4]),[4,e.play()];case 2:return r.sent(),[3,4];case 3:return r.sent(),console.warn("It was not possible to play the video."),[3,4];case 4:return[2]}})})},t.prototype.getMediaElement=function(e,r){var n=document.getElementById(e);if(!n)throw new si("element with id '"+e+"' not found");if(n.nodeName.toLowerCase()!==r.toLowerCase())throw new si("element with id '"+e+"' must be an "+r+" element");return n},t.prototype.decodeFromImage=function(e,r){if(!e&&!r)throw new si("either imageElement with a src set or an url must be provided");return r&&!e?this.decodeFromImageUrl(r):this.decodeFromImageElement(e)},t.prototype.decodeFromVideo=function(e,r){if(!e&&!r)throw new si("Either an element with a src set or an URL must be provided");return r&&!e?this.decodeFromVideoUrl(r):this.decodeFromVideoElement(e)},t.prototype.decodeFromVideoContinuously=function(e,r,n){if(e===void 0&&r===void 0)throw new si("Either an element with a src set or an URL must be provided");return r&&!e?this.decodeFromVideoUrlContinuously(r,n):this.decodeFromVideoElementContinuously(e,n)},t.prototype.decodeFromImageElement=function(e){if(!e)throw new si("An image element must be provided.");this.reset();var r=this.prepareImageElement(e);this.imageElement=r;var n;return this.isImageLoaded(r)?n=this.decodeOnce(r,!1,!0):n=this._decodeOnLoadImage(r),n},t.prototype.decodeFromVideoElement=function(e){var r=this._decodeFromVideoElementSetup(e);return this._decodeOnLoadVideo(r)},t.prototype.decodeFromVideoElementContinuously=function(e,r){var n=this._decodeFromVideoElementSetup(e);return this._decodeOnLoadVideoContinuously(n,r)},t.prototype._decodeFromVideoElementSetup=function(e){if(!e)throw new si("A video element must be provided.");this.reset();var r=this.prepareVideoElement(e);return this.videoElement=r,r},t.prototype.decodeFromImageUrl=function(e){if(!e)throw new si("An URL must be provided.");this.reset();var r=this.prepareImageElement();this.imageElement=r;var n=this._decodeOnLoadImage(r);return r.src=e,n},t.prototype.decodeFromVideoUrl=function(e){if(!e)throw new si("An URL must be provided.");this.reset();var r=this.prepareVideoElement(),n=this.decodeFromVideoElement(r);return r.src=e,n},t.prototype.decodeFromVideoUrlContinuously=function(e,r){if(!e)throw new si("An URL must be provided.");this.reset();var n=this.prepareVideoElement(),a=this.decodeFromVideoElementContinuously(n,r);return n.src=e,a},t.prototype._decodeOnLoadImage=function(e){var r=this;return new Promise(function(n,a){r.imageLoadedListener=function(){return r.decodeOnce(e,!1,!0).then(n,a)},e.addEventListener("load",r.imageLoadedListener)})},t.prototype._decodeOnLoadVideo=function(e){return Il(this,void 0,void 0,function(){return jl(this,function(r){switch(r.label){case 0:return[4,this.playVideoOnLoadAsync(e)];case 1:return r.sent(),[4,this.decodeOnce(e)];case 2:return[2,r.sent()]}})})},t.prototype._decodeOnLoadVideoContinuously=function(e,r){return Il(this,void 0,void 0,function(){return jl(this,function(n){switch(n.label){case 0:return[4,this.playVideoOnLoadAsync(e)];case 1:return n.sent(),this.decodeContinuously(e,r),[2]}})})},t.prototype.isImageLoaded=function(e){return!(!e.complete||e.naturalWidth===0)},t.prototype.prepareImageElement=function(e){var r;return typeof e>"u"&&(r=document.createElement("img"),r.width=200,r.height=200),typeof e=="string"&&(r=this.getMediaElement(e,"img")),e instanceof HTMLImageElement&&(r=e),r},t.prototype.prepareVideoElement=function(e){var r;return!e&&typeof document<"u"&&(r=document.createElement("video"),r.width=200,r.height=200),typeof e=="string"&&(r=this.getMediaElement(e,"video")),e instanceof HTMLVideoElement&&(r=e),r.setAttribute("autoplay","true"),r.setAttribute("muted","true"),r.setAttribute("playsinline","true"),r},t.prototype.decodeOnce=function(e,r,n){var a=this;r===void 0&&(r=!0),n===void 0&&(n=!0),this._stopAsyncDecode=!1;var s=function(i,l){if(a._stopAsyncDecode){l(new Wt("Video stream has ended before any code could be detected.")),a._stopAsyncDecode=void 0;return}try{var c=a.decode(e);i(c)}catch(h){var u=r&&h instanceof Wt,d=h instanceof bi||h instanceof Nr,f=d&&n;if(u||f)return setTimeout(s,a._timeBetweenDecodingAttempts,i,l);l(h)}};return new Promise(function(i,l){return s(i,l)})},t.prototype.decodeContinuously=function(e,r){var n=this;this._stopContinuousDecode=!1;var a=function(){if(n._stopContinuousDecode){n._stopContinuousDecode=void 0;return}try{var s=n.decode(e);r(s,null),setTimeout(a,n.timeBetweenScansMillis)}catch(c){r(null,c);var i=c instanceof bi||c instanceof Nr,l=c instanceof Wt;(i||l)&&setTimeout(a,n._timeBetweenDecodingAttempts)}};a()},t.prototype.decode=function(e){var r=this.createBinaryBitmap(e);return this.decodeBitmap(r)},t.prototype.createBinaryBitmap=function(e){this.getCaptureCanvasContext(e);var r=!1;e instanceof HTMLVideoElement?(this.drawFrameOnCanvas(e),r=!0):this.drawImageOnCanvas(e);var n=this.getCaptureCanvas(e),a=new s4e(n,r),s=new hte(a);return new Ate(s)},t.prototype.getCaptureCanvasContext=function(e){if(!this.captureCanvasContext){var r=this.getCaptureCanvas(e),n=void 0;try{n=r.getContext("2d",{willReadFrequently:!0})}catch{n=r.getContext("2d")}this.captureCanvasContext=n}return this.captureCanvasContext},t.prototype.getCaptureCanvas=function(e){if(!this.captureCanvas){var r=this.createCaptureCanvas(e);this.captureCanvas=r}return this.captureCanvas},t.prototype.drawFrameOnCanvas=function(e,r,n){r===void 0&&(r={sx:0,sy:0,sWidth:e.videoWidth,sHeight:e.videoHeight,dx:0,dy:0,dWidth:e.videoWidth,dHeight:e.videoHeight}),n===void 0&&(n=this.captureCanvasContext),n.drawImage(e,r.sx,r.sy,r.sWidth,r.sHeight,r.dx,r.dy,r.dWidth,r.dHeight)},t.prototype.drawImageOnCanvas=function(e,r,n){r===void 0&&(r={sx:0,sy:0,sWidth:e.naturalWidth,sHeight:e.naturalHeight,dx:0,dy:0,dWidth:e.naturalWidth,dHeight:e.naturalHeight}),n===void 0&&(n=this.captureCanvasContext),n.drawImage(e,r.sx,r.sy,r.sWidth,r.sHeight,r.dx,r.dy,r.dWidth,r.dHeight)},t.prototype.decodeBitmap=function(e){return this.reader.decode(e,this._hints)},t.prototype.createCaptureCanvas=function(e){if(typeof document>"u")return this._destroyCaptureCanvas(),null;var r=document.createElement("canvas"),n,a;return typeof e<"u"&&(e instanceof HTMLVideoElement?(n=e.videoWidth,a=e.videoHeight):e instanceof HTMLImageElement&&(n=e.naturalWidth||e.width,a=e.naturalHeight||e.height)),r.style.width=n+"px",r.style.height=a+"px",r.width=n,r.height=a,r},t.prototype.stopStreams=function(){this.stream&&(this.stream.getVideoTracks().forEach(function(e){return e.stop()}),this.stream=void 0),this._stopAsyncDecode===!1&&this.stopAsyncDecode(),this._stopContinuousDecode===!1&&this.stopContinuousDecode()},t.prototype.reset=function(){this.stopStreams(),this._destroyVideoElement(),this._destroyImageElement(),this._destroyCaptureCanvas()},t.prototype._destroyVideoElement=function(){this.videoElement&&(typeof this.videoEndedListener<"u"&&this.videoElement.removeEventListener("ended",this.videoEndedListener),typeof this.videoPlayingEventListener<"u"&&this.videoElement.removeEventListener("playing",this.videoPlayingEventListener),typeof this.videoCanPlayListener<"u"&&this.videoElement.removeEventListener("loadedmetadata",this.videoCanPlayListener),this.cleanVideoSource(this.videoElement),this.videoElement=void 0)},t.prototype._destroyImageElement=function(){this.imageElement&&(this.imageLoadedListener!==void 0&&this.imageElement.removeEventListener("load",this.imageLoadedListener),this.imageElement.src=void 0,this.imageElement.removeAttribute("src"),this.imageElement=void 0)},t.prototype._destroyCaptureCanvas=function(){this.captureCanvasContext=void 0,this.captureCanvas=void 0},t.prototype.addVideoSource=function(e,r){try{e.srcObject=r}catch{e.src=URL.createObjectURL(r)}},t.prototype.cleanVideoSource=function(e){try{e.srcObject=null}catch{e.src=""}this.videoElement.removeAttribute("src")},t}(),bl=function(){function t(e,r,n,a,s,i){n===void 0&&(n=r==null?0:8*r.length),i===void 0&&(i=Ka.currentTimeMillis()),this.text=e,this.rawBytes=r,this.numBits=n,this.resultPoints=a,this.format=s,this.timestamp=i,this.text=e,this.rawBytes=r,n==null?this.numBits=r==null?0:8*r.length:this.numBits=n,this.resultPoints=a,this.format=s,this.resultMetadata=null,i==null?this.timestamp=Ka.currentTimeMillis():this.timestamp=i}return t.prototype.getText=function(){return this.text},t.prototype.getRawBytes=function(){return this.rawBytes},t.prototype.getNumBits=function(){return this.numBits},t.prototype.getResultPoints=function(){return this.resultPoints},t.prototype.getBarcodeFormat=function(){return this.format},t.prototype.getResultMetadata=function(){return this.resultMetadata},t.prototype.putMetadata=function(e,r){this.resultMetadata===null&&(this.resultMetadata=new Map),this.resultMetadata.set(e,r)},t.prototype.putAllMetadata=function(e){e!==null&&(this.resultMetadata===null?this.resultMetadata=e:this.resultMetadata=new Map(e))},t.prototype.addResultPoints=function(e){var r=this.resultPoints;if(r===null)this.resultPoints=e;else if(e!==null&&e.length>0){var n=new Array(r.length+e.length);Ka.arraycopy(r,0,n,0,r.length),Ka.arraycopy(e,0,n,r.length,e.length),this.resultPoints=n}},t.prototype.getTimestamp=function(){return this.timestamp},t.prototype.toString=function(){return this.text},t}(),XT;(function(t){t[t.AZTEC=0]="AZTEC",t[t.CODABAR=1]="CODABAR",t[t.CODE_39=2]="CODE_39",t[t.CODE_93=3]="CODE_93",t[t.CODE_128=4]="CODE_128",t[t.DATA_MATRIX=5]="DATA_MATRIX",t[t.EAN_8=6]="EAN_8",t[t.EAN_13=7]="EAN_13",t[t.ITF=8]="ITF",t[t.MAXICODE=9]="MAXICODE",t[t.PDF_417=10]="PDF_417",t[t.QR_CODE=11]="QR_CODE",t[t.RSS_14=12]="RSS_14",t[t.RSS_EXPANDED=13]="RSS_EXPANDED",t[t.UPC_A=14]="UPC_A",t[t.UPC_E=15]="UPC_E",t[t.UPC_EAN_EXTENSION=16]="UPC_EAN_EXTENSION"})(XT||(XT={}));const Zr=XT;var YT;(function(t){t[t.OTHER=0]="OTHER",t[t.ORIENTATION=1]="ORIENTATION",t[t.BYTE_SEGMENTS=2]="BYTE_SEGMENTS",t[t.ERROR_CORRECTION_LEVEL=3]="ERROR_CORRECTION_LEVEL",t[t.ISSUE_NUMBER=4]="ISSUE_NUMBER",t[t.SUGGESTED_PRICE=5]="SUGGESTED_PRICE",t[t.POSSIBLE_COUNTRY=6]="POSSIBLE_COUNTRY",t[t.UPC_EAN_EXTENSION=7]="UPC_EAN_EXTENSION",t[t.PDF417_EXTRA_METADATA=8]="PDF417_EXTRA_METADATA",t[t.STRUCTURED_APPEND_SEQUENCE=9]="STRUCTURED_APPEND_SEQUENCE",t[t.STRUCTURED_APPEND_PARITY=10]="STRUCTURED_APPEND_PARITY"})(YT||(YT={}));const $o=YT;var N4=function(){function t(e,r,n,a,s,i){s===void 0&&(s=-1),i===void 0&&(i=-1),this.rawBytes=e,this.text=r,this.byteSegments=n,this.ecLevel=a,this.structuredAppendSequenceNumber=s,this.structuredAppendParity=i,this.numBits=e==null?0:8*e.length}return t.prototype.getRawBytes=function(){return this.rawBytes},t.prototype.getNumBits=function(){return this.numBits},t.prototype.setNumBits=function(e){this.numBits=e},t.prototype.getText=function(){return this.text},t.prototype.getByteSegments=function(){return this.byteSegments},t.prototype.getECLevel=function(){return this.ecLevel},t.prototype.getErrorsCorrected=function(){return this.errorsCorrected},t.prototype.setErrorsCorrected=function(e){this.errorsCorrected=e},t.prototype.getErasures=function(){return this.erasures},t.prototype.setErasures=function(e){this.erasures=e},t.prototype.getOther=function(){return this.other},t.prototype.setOther=function(e){this.other=e},t.prototype.hasStructuredAppend=function(){return this.structuredAppendParity>=0&&this.structuredAppendSequenceNumber>=0},t.prototype.getStructuredAppendParity=function(){return this.structuredAppendParity},t.prototype.getStructuredAppendSequenceNumber=function(){return this.structuredAppendSequenceNumber},t}(),xy=function(){function t(){}return t.prototype.exp=function(e){return this.expTable[e]},t.prototype.log=function(e){if(e===0)throw new en;return this.logTable[e]},t.addOrSubtract=function(e,r){return e^r},t}(),T0=function(){function t(e,r){if(r.length===0)throw new en;this.field=e;var n=r.length;if(n>1&&r[0]===0){for(var a=1;a<n&&r[a]===0;)a++;a===n?this.coefficients=Int32Array.from([0]):(this.coefficients=new Int32Array(n-a),Ka.arraycopy(r,a,this.coefficients,0,this.coefficients.length))}else this.coefficients=r}return t.prototype.getCoefficients=function(){return this.coefficients},t.prototype.getDegree=function(){return this.coefficients.length-1},t.prototype.isZero=function(){return this.coefficients[0]===0},t.prototype.getCoefficient=function(e){return this.coefficients[this.coefficients.length-1-e]},t.prototype.evaluateAt=function(e){if(e===0)return this.getCoefficient(0);var r=this.coefficients,n;if(e===1){n=0;for(var a=0,s=r.length;a!==s;a++){var i=r[a];n=xy.addOrSubtract(n,i)}return n}n=r[0];for(var l=r.length,c=this.field,a=1;a<l;a++)n=xy.addOrSubtract(c.multiply(e,n),r[a]);return n},t.prototype.addOrSubtract=function(e){if(!this.field.equals(e.field))throw new en("GenericGFPolys do not have same GenericGF field");if(this.isZero())return e;if(e.isZero())return this;var r=this.coefficients,n=e.coefficients;if(r.length>n.length){var a=r;r=n,n=a}var s=new Int32Array(n.length),i=n.length-r.length;Ka.arraycopy(n,0,s,0,i);for(var l=i;l<n.length;l++)s[l]=xy.addOrSubtract(r[l-i],n[l]);return new t(this.field,s)},t.prototype.multiply=function(e){if(!this.field.equals(e.field))throw new en("GenericGFPolys do not have same GenericGF field");if(this.isZero()||e.isZero())return this.field.getZero();for(var r=this.coefficients,n=r.length,a=e.coefficients,s=a.length,i=new Int32Array(n+s-1),l=this.field,c=0;c<n;c++)for(var u=r[c],d=0;d<s;d++)i[c+d]=xy.addOrSubtract(i[c+d],l.multiply(u,a[d]));return new t(l,i)},t.prototype.multiplyScalar=function(e){if(e===0)return this.field.getZero();if(e===1)return this;for(var r=this.coefficients.length,n=this.field,a=new Int32Array(r),s=this.coefficients,i=0;i<r;i++)a[i]=n.multiply(s[i],e);return new t(n,a)},t.prototype.multiplyByMonomial=function(e,r){if(e<0)throw new en;if(r===0)return this.field.getZero();for(var n=this.coefficients,a=n.length,s=new Int32Array(a+e),i=this.field,l=0;l<a;l++)s[l]=i.multiply(n[l],r);return new t(i,s)},t.prototype.divide=function(e){if(!this.field.equals(e.field))throw new en("GenericGFPolys do not have same GenericGF field");if(e.isZero())throw new en("Divide by 0");for(var r=this.field,n=r.getZero(),a=this,s=e.getCoefficient(e.getDegree()),i=r.inverse(s);a.getDegree()>=e.getDegree()&&!a.isZero();){var l=a.getDegree()-e.getDegree(),c=r.multiply(a.getCoefficient(a.getDegree()),i),u=e.multiplyByMonomial(l,c),d=r.buildMonomial(l,c);n=n.addOrSubtract(d),a=a.addOrSubtract(u)}return[n,a]},t.prototype.toString=function(){for(var e="",r=this.getDegree();r>=0;r--){var n=this.getCoefficient(r);if(n!==0){if(n<0?(e+=" - ",n=-n):e.length>0&&(e+=" + "),r===0||n!==1){var a=this.field.log(n);a===0?e+="1":a===1?e+="a":(e+="a^",e+=a)}r!==0&&(r===1?e+="x":(e+="x^",e+=r))}}return e},t}(),l4e=function(){var t=function(e,r){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,a){n.__proto__=a}||function(n,a){for(var s in a)a.hasOwnProperty(s)&&(n[s]=a[s])},t(e,r)};return function(e,r){t(e,r);function n(){this.constructor=e}e.prototype=r===null?Object.create(r):(n.prototype=r.prototype,new n)}}(),mte=function(t){l4e(e,t);function e(){return t!==null&&t.apply(this,arguments)||this}return e.kind="ArithmeticException",e}(vc),c4e=function(){var t=function(e,r){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,a){n.__proto__=a}||function(n,a){for(var s in a)a.hasOwnProperty(s)&&(n[s]=a[s])},t(e,r)};return function(e,r){t(e,r);function n(){this.constructor=e}e.prototype=r===null?Object.create(r):(n.prototype=r.prototype,new n)}}(),oc=function(t){c4e(e,t);function e(r,n,a){var s=t.call(this)||this;s.primitive=r,s.size=n,s.generatorBase=a;for(var i=new Int32Array(n),l=1,c=0;c<n;c++)i[c]=l,l*=2,l>=n&&(l^=r,l&=n-1);s.expTable=i;for(var u=new Int32Array(n),c=0;c<n-1;c++)u[i[c]]=c;return s.logTable=u,s.zero=new T0(s,Int32Array.from([0])),s.one=new T0(s,Int32Array.from([1])),s}return e.prototype.getZero=function(){return this.zero},e.prototype.getOne=function(){return this.one},e.prototype.buildMonomial=function(r,n){if(r<0)throw new en;if(n===0)return this.zero;var a=new Int32Array(r+1);return a[0]=n,new T0(this,a)},e.prototype.inverse=function(r){if(r===0)throw new mte;return this.expTable[this.size-this.logTable[r]-1]},e.prototype.multiply=function(r,n){return r===0||n===0?0:this.expTable[(this.logTable[r]+this.logTable[n])%(this.size-1)]},e.prototype.getSize=function(){return this.size},e.prototype.getGeneratorBase=function(){return this.generatorBase},e.prototype.toString=function(){return"GF(0x"+Bn.toHexString(this.primitive)+","+this.size+")"},e.prototype.equals=function(r){return r===this},e.AZTEC_DATA_12=new e(4201,4096,1),e.AZTEC_DATA_10=new e(1033,1024,1),e.AZTEC_DATA_6=new e(67,64,1),e.AZTEC_PARAM=new e(19,16,1),e.QR_CODE_FIELD_256=new e(285,256,0),e.DATA_MATRIX_FIELD_256=new e(301,256,1),e.AZTEC_DATA_8=e.DATA_MATRIX_FIELD_256,e.MAXICODE_FIELD_64=e.AZTEC_DATA_6,e}(xy),u4e=function(){var t=function(e,r){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,a){n.__proto__=a}||function(n,a){for(var s in a)a.hasOwnProperty(s)&&(n[s]=a[s])},t(e,r)};return function(e,r){t(e,r);function n(){this.constructor=e}e.prototype=r===null?Object.create(r):(n.prototype=r.prototype,new n)}}(),gC=function(t){u4e(e,t);function e(){return t!==null&&t.apply(this,arguments)||this}return e.kind="ReedSolomonException",e}(vc),d4e=function(){var t=function(e,r){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,a){n.__proto__=a}||function(n,a){for(var s in a)a.hasOwnProperty(s)&&(n[s]=a[s])},t(e,r)};return function(e,r){t(e,r);function n(){this.constructor=e}e.prototype=r===null?Object.create(r):(n.prototype=r.prototype,new n)}}(),iw=function(t){d4e(e,t);function e(){return t!==null&&t.apply(this,arguments)||this}return e.kind="IllegalStateException",e}(vc),C4=function(){function t(e){this.field=e}return t.prototype.decode=function(e,r){for(var n=this.field,a=new T0(n,e),s=new Int32Array(r),i=!0,l=0;l<r;l++){var c=a.evaluateAt(n.exp(l+n.getGeneratorBase()));s[s.length-1-l]=c,c!==0&&(i=!1)}if(!i)for(var u=new T0(n,s),d=this.runEuclideanAlgorithm(n.buildMonomial(r,1),u,r),f=d[0],h=d[1],A=this.findErrorLocations(f),m=this.findErrorMagnitudes(h,A),l=0;l<A.length;l++){var p=e.length-1-n.log(A[l]);if(p<0)throw new gC("Bad error location");e[p]=oc.addOrSubtract(e[p],m[l])}},t.prototype.runEuclideanAlgorithm=function(e,r,n){if(e.getDegree()<r.getDegree()){var a=e;e=r,r=a}for(var s=this.field,i=e,l=r,c=s.getZero(),u=s.getOne();l.getDegree()>=(n/2|0);){var d=i,f=c;if(i=l,c=u,i.isZero())throw new gC("r_{i-1} was zero");l=d;for(var h=s.getZero(),A=i.getCoefficient(i.getDegree()),m=s.inverse(A);l.getDegree()>=i.getDegree()&&!l.isZero();){var p=l.getDegree()-i.getDegree(),g=s.multiply(l.getCoefficient(l.getDegree()),m);h=h.addOrSubtract(s.buildMonomial(p,g)),l=l.addOrSubtract(i.multiplyByMonomial(p,g))}if(u=h.multiply(c).addOrSubtract(f),l.getDegree()>=i.getDegree())throw new iw("Division algorithm failed to reduce polynomial?")}var x=u.getCoefficient(0);if(x===0)throw new gC("sigmaTilde(0) was zero");var y=s.inverse(x),b=u.multiplyScalar(y),w=l.multiplyScalar(y);return[b,w]},t.prototype.findErrorLocations=function(e){var r=e.getDegree();if(r===1)return Int32Array.from([e.getCoefficient(1)]);for(var n=new Int32Array(r),a=0,s=this.field,i=1;i<s.getSize()&&a<r;i++)e.evaluateAt(i)===0&&(n[a]=s.inverse(i),a++);if(a!==r)throw new gC("Error locator degree does not match number of roots");return n},t.prototype.findErrorMagnitudes=function(e,r){for(var n=r.length,a=new Int32Array(n),s=this.field,i=0;i<n;i++){for(var l=s.inverse(r[i]),c=1,u=0;u<n;u++)if(i!==u){var d=s.multiply(r[u],l),f=d&1?d&-2:d|1;c=s.multiply(c,f)}a[i]=s.multiply(e.evaluateAt(l),s.inverse(c)),s.getGeneratorBase()!==0&&(a[i]=s.multiply(a[i],l))}return a},t}(),jo;(function(t){t[t.UPPER=0]="UPPER",t[t.LOWER=1]="LOWER",t[t.MIXED=2]="MIXED",t[t.DIGIT=3]="DIGIT",t[t.PUNCT=4]="PUNCT",t[t.BINARY=5]="BINARY"})(jo||(jo={}));var eV=function(){function t(){}return t.prototype.decode=function(e){this.ddata=e;var r=e.getBits(),n=this.extractBits(r),a=this.correctBits(n),s=t.convertBoolArrayToByteArray(a),i=t.getEncodedData(a),l=new N4(s,i,null,null);return l.setNumBits(a.length),l},t.highLevelDecode=function(e){return this.getEncodedData(e)},t.getEncodedData=function(e){for(var r=e.length,n=jo.UPPER,a=jo.UPPER,s="",i=0;i<r;)if(a===jo.BINARY){if(r-i<5)break;var l=t.readCode(e,i,5);if(i+=5,l===0){if(r-i<11)break;l=t.readCode(e,i,11)+31,i+=11}for(var c=0;c<l;c++){if(r-i<8){i=r;break}var u=t.readCode(e,i,8);s+=Kn.castAsNonUtf8Char(u),i+=8}a=n}else{var d=a===jo.DIGIT?4:5;if(r-i<d)break;var u=t.readCode(e,i,d);i+=d;var f=t.getCharacter(a,u);f.startsWith("CTRL_")?(n=a,a=t.getTable(f.charAt(5)),f.charAt(6)==="L"&&(n=a)):(s+=f,a=n)}return s},t.getTable=function(e){switch(e){case"L":return jo.LOWER;case"P":return jo.PUNCT;case"M":return jo.MIXED;case"D":return jo.DIGIT;case"B":return jo.BINARY;case"U":default:return jo.UPPER}},t.getCharacter=function(e,r){switch(e){case jo.UPPER:return t.UPPER_TABLE[r];case jo.LOWER:return t.LOWER_TABLE[r];case jo.MIXED:return t.MIXED_TABLE[r];case jo.PUNCT:return t.PUNCT_TABLE[r];case jo.DIGIT:return t.DIGIT_TABLE[r];default:throw new iw("Bad table")}},t.prototype.correctBits=function(e){var r,n;this.ddata.getNbLayers()<=2?(n=6,r=oc.AZTEC_DATA_6):this.ddata.getNbLayers()<=8?(n=8,r=oc.AZTEC_DATA_8):this.ddata.getNbLayers()<=22?(n=10,r=oc.AZTEC_DATA_10):(n=12,r=oc.AZTEC_DATA_12);var a=this.ddata.getNbDatablocks(),s=e.length/n;if(s<a)throw new Nr;for(var i=e.length%n,l=new Int32Array(s),c=0;c<s;c++,i+=n)l[c]=t.readCode(e,i,n);try{var u=new C4(r);u.decode(l,s-a)}catch(g){throw new Nr(g)}for(var d=(1<<n)-1,f=0,c=0;c<a;c++){var h=l[c];if(h===0||h===d)throw new Nr;(h===1||h===d-1)&&f++}for(var A=new Array(a*n-f),m=0,c=0;c<a;c++){var h=l[c];if(h===1||h===d-1)A.fill(h>1,m,m+n-1),m+=n-1;else for(var p=n-1;p>=0;--p)A[m++]=(h&1<<p)!==0}return A},t.prototype.extractBits=function(e){var r=this.ddata.isCompact(),n=this.ddata.getNbLayers(),a=(r?11:14)+n*4,s=new Int32Array(a),i=new Array(this.totalBitsInLayer(n,r));if(r)for(var l=0;l<s.length;l++)s[l]=l;else for(var c=a+1+2*Bn.truncDivision(Bn.truncDivision(a,2)-1,15),u=a/2,d=Bn.truncDivision(c,2),l=0;l<u;l++){var f=l+Bn.truncDivision(l,15);s[u-l-1]=d-f-1,s[u+l]=d+f+1}for(var l=0,h=0;l<n;l++){for(var A=(n-l)*4+(r?9:12),m=l*2,p=a-1-m,g=0;g<A;g++)for(var x=g*2,y=0;y<2;y++)i[h+x+y]=e.get(s[m+y],s[m+g]),i[h+2*A+x+y]=e.get(s[m+g],s[p-y]),i[h+4*A+x+y]=e.get(s[p-y],s[p-g]),i[h+6*A+x+y]=e.get(s[p-g],s[m+y]);h+=A*8}return i},t.readCode=function(e,r,n){for(var a=0,s=r;s<r+n;s++)a<<=1,e[s]&&(a|=1);return a},t.readByte=function(e,r){var n=e.length-r;return n>=8?t.readCode(e,r,8):t.readCode(e,r,n)<<8-n},t.convertBoolArrayToByteArray=function(e){for(var r=new Uint8Array((e.length+7)/8),n=0;n<r.length;n++)r[n]=t.readByte(e,8*n);return r},t.prototype.totalBitsInLayer=function(e,r){return((r?88:112)+16*e)*e},t.UPPER_TABLE=["CTRL_PS"," ","A","B","C","D","E","F","G","H","I","J","K","L","M","N","O","P","Q","R","S","T","U","V","W","X","Y","Z","CTRL_LL","CTRL_ML","CTRL_DL","CTRL_BS"],t.LOWER_TABLE=["CTRL_PS"," ","a","b","c","d","e","f","g","h","i","j","k","l","m","n","o","p","q","r","s","t","u","v","w","x","y","z","CTRL_US","CTRL_ML","CTRL_DL","CTRL_BS"],t.MIXED_TABLE=["CTRL_PS"," ","","","","","","","\x07","\b","	",`
`,"\v","\f","\r","\x1B","","","","","@","\\","^","_","`","|","~","","CTRL_LL","CTRL_UL","CTRL_PL","CTRL_BS"],t.PUNCT_TABLE=["","\r",`\r
`,". ",", ",": ","!",'"',"#","$","%","&","'","(",")","*","+",",","-",".","/",":",";","<","=",">","?","[","]","{","}","CTRL_UL"],t.DIGIT_TABLE=["CTRL_PS"," ","0","1","2","3","4","5","6","7","8","9",",",".","CTRL_UL","CTRL_US"],t}(),Zn=function(){function t(){}return t.round=function(e){return isNaN(e)?0:e<=Number.MIN_SAFE_INTEGER?Number.MIN_SAFE_INTEGER:e>=Number.MAX_SAFE_INTEGER?Number.MAX_SAFE_INTEGER:e+(e<0?-.5:.5)|0},t.distance=function(e,r,n,a){var s=e-n,i=r-a;return Math.sqrt(s*s+i*i)},t.sum=function(e){for(var r=0,n=0,a=e.length;n!==a;n++){var s=e[n];r+=s}return r},t}(),JT=function(){function t(){}return t.floatToIntBits=function(e){return e},t.MAX_VALUE=Number.MAX_SAFE_INTEGER,t}(),Vr=function(){function t(e,r){this.x=e,this.y=r}return t.prototype.getX=function(){return this.x},t.prototype.getY=function(){return this.y},t.prototype.equals=function(e){if(e instanceof t){var r=e;return this.x===r.x&&this.y===r.y}return!1},t.prototype.hashCode=function(){return 31*JT.floatToIntBits(this.x)+JT.floatToIntBits(this.y)},t.prototype.toString=function(){return"("+this.x+","+this.y+")"},t.orderBestPatterns=function(e){var r=this.distance(e[0],e[1]),n=this.distance(e[1],e[2]),a=this.distance(e[0],e[2]),s,i,l;if(n>=r&&n>=a?(i=e[0],s=e[1],l=e[2]):a>=n&&a>=r?(i=e[1],s=e[0],l=e[2]):(i=e[2],s=e[0],l=e[1]),this.crossProductZ(s,i,l)<0){var c=s;s=l,l=c}e[0]=s,e[1]=i,e[2]=l},t.distance=function(e,r){return Zn.distance(e.x,e.y,r.x,r.y)},t.crossProductZ=function(e,r,n){var a=r.x,s=r.y;return(n.x-a)*(e.y-s)-(n.y-s)*(e.x-a)},t}(),U6=function(){function t(e,r){this.bits=e,this.points=r}return t.prototype.getBits=function(){return this.bits},t.prototype.getPoints=function(){return this.points},t}(),f4e=function(){var t=function(e,r){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,a){n.__proto__=a}||function(n,a){for(var s in a)a.hasOwnProperty(s)&&(n[s]=a[s])},t(e,r)};return function(e,r){t(e,r);function n(){this.constructor=e}e.prototype=r===null?Object.create(r):(n.prototype=r.prototype,new n)}}(),A4e=function(t){f4e(e,t);function e(r,n,a,s,i){var l=t.call(this,r,n)||this;return l.compact=a,l.nbDatablocks=s,l.nbLayers=i,l}return e.prototype.getNbLayers=function(){return this.nbLayers},e.prototype.getNbDatablocks=function(){return this.nbDatablocks},e.prototype.isCompact=function(){return this.compact},e}(U6),ZT=function(){function t(e,r,n,a){this.image=e,this.height=e.getHeight(),this.width=e.getWidth(),r==null&&(r=t.INIT_SIZE),n==null&&(n=e.getWidth()/2|0),a==null&&(a=e.getHeight()/2|0);var s=r/2|0;if(this.leftInit=n-s,this.rightInit=n+s,this.upInit=a-s,this.downInit=a+s,this.upInit<0||this.leftInit<0||this.downInit>=this.height||this.rightInit>=this.width)throw new Wt}return t.prototype.detect=function(){for(var e=this.leftInit,r=this.rightInit,n=this.upInit,a=this.downInit,s=!1,i=!0,l=!1,c=!1,u=!1,d=!1,f=!1,h=this.width,A=this.height;i;){i=!1;for(var m=!0;(m||!c)&&r<h;)m=this.containsBlackPoint(n,a,r,!1),m?(r++,i=!0,c=!0):c||r++;if(r>=h){s=!0;break}for(var p=!0;(p||!u)&&a<A;)p=this.containsBlackPoint(e,r,a,!0),p?(a++,i=!0,u=!0):u||a++;if(a>=A){s=!0;break}for(var g=!0;(g||!d)&&e>=0;)g=this.containsBlackPoint(n,a,e,!1),g?(e--,i=!0,d=!0):d||e--;if(e<0){s=!0;break}for(var x=!0;(x||!f)&&n>=0;)x=this.containsBlackPoint(e,r,n,!0),x?(n--,i=!0,f=!0):f||n--;if(n<0){s=!0;break}i&&(l=!0)}if(!s&&l){for(var y=r-e,b=null,w=1;b===null&&w<y;w++)b=this.getBlackPointOnSegment(e,a-w,e+w,a);if(b==null)throw new Wt;for(var j=null,w=1;j===null&&w<y;w++)j=this.getBlackPointOnSegment(e,n+w,e+w,n);if(j==null)throw new Wt;for(var I=null,w=1;I===null&&w<y;w++)I=this.getBlackPointOnSegment(r,n+w,r-w,n);if(I==null)throw new Wt;for(var _=null,w=1;_===null&&w<y;w++)_=this.getBlackPointOnSegment(r,a-w,r-w,a);if(_==null)throw new Wt;return this.centerEdges(_,b,I,j)}else throw new Wt},t.prototype.getBlackPointOnSegment=function(e,r,n,a){for(var s=Zn.round(Zn.distance(e,r,n,a)),i=(n-e)/s,l=(a-r)/s,c=this.image,u=0;u<s;u++){var d=Zn.round(e+u*i),f=Zn.round(r+u*l);if(c.get(d,f))return new Vr(d,f)}return null},t.prototype.centerEdges=function(e,r,n,a){var s=e.getX(),i=e.getY(),l=r.getX(),c=r.getY(),u=n.getX(),d=n.getY(),f=a.getX(),h=a.getY(),A=t.CORR;return s<this.width/2?[new Vr(f-A,h+A),new Vr(l+A,c+A),new Vr(u-A,d-A),new Vr(s+A,i-A)]:[new Vr(f+A,h+A),new Vr(l+A,c-A),new Vr(u-A,d+A),new Vr(s-A,i-A)]},t.prototype.containsBlackPoint=function(e,r,n,a){var s=this.image;if(a){for(var i=e;i<=r;i++)if(s.get(i,n))return!0}else for(var l=e;l<=r;l++)if(s.get(n,l))return!0;return!1},t.INIT_SIZE=10,t.CORR=1,t}(),tV=function(){function t(){}return t.checkAndNudgePoints=function(e,r){for(var n=e.getWidth(),a=e.getHeight(),s=!0,i=0;i<r.length&&s;i+=2){var l=Math.floor(r[i]),c=Math.floor(r[i+1]);if(l<-1||l>n||c<-1||c>a)throw new Wt;s=!1,l===-1?(r[i]=0,s=!0):l===n&&(r[i]=n-1,s=!0),c===-1?(r[i+1]=0,s=!0):c===a&&(r[i+1]=a-1,s=!0)}s=!0;for(var i=r.length-2;i>=0&&s;i-=2){var l=Math.floor(r[i]),c=Math.floor(r[i+1]);if(l<-1||l>n||c<-1||c>a)throw new Wt;s=!1,l===-1?(r[i]=0,s=!0):l===n&&(r[i]=n-1,s=!0),c===-1?(r[i+1]=0,s=!0):c===a&&(r[i+1]=a-1,s=!0)}},t}(),pte=function(){function t(e,r,n,a,s,i,l,c,u){this.a11=e,this.a21=r,this.a31=n,this.a12=a,this.a22=s,this.a32=i,this.a13=l,this.a23=c,this.a33=u}return t.quadrilateralToQuadrilateral=function(e,r,n,a,s,i,l,c,u,d,f,h,A,m,p,g){var x=t.quadrilateralToSquare(e,r,n,a,s,i,l,c),y=t.squareToQuadrilateral(u,d,f,h,A,m,p,g);return y.times(x)},t.prototype.transformPoints=function(e){for(var r=e.length,n=this.a11,a=this.a12,s=this.a13,i=this.a21,l=this.a22,c=this.a23,u=this.a31,d=this.a32,f=this.a33,h=0;h<r;h+=2){var A=e[h],m=e[h+1],p=s*A+c*m+f;e[h]=(n*A+i*m+u)/p,e[h+1]=(a*A+l*m+d)/p}},t.prototype.transformPointsWithValues=function(e,r){for(var n=this.a11,a=this.a12,s=this.a13,i=this.a21,l=this.a22,c=this.a23,u=this.a31,d=this.a32,f=this.a33,h=e.length,A=0;A<h;A++){var m=e[A],p=r[A],g=s*m+c*p+f;e[A]=(n*m+i*p+u)/g,r[A]=(a*m+l*p+d)/g}},t.squareToQuadrilateral=function(e,r,n,a,s,i,l,c){var u=e-n+s-l,d=r-a+i-c;if(u===0&&d===0)return new t(n-e,s-n,e,a-r,i-a,r,0,0,1);var f=n-s,h=l-s,A=a-i,m=c-i,p=f*m-h*A,g=(u*m-h*d)/p,x=(f*d-u*A)/p;return new t(n-e+g*n,l-e+x*l,e,a-r+g*a,c-r+x*c,r,g,x,1)},t.quadrilateralToSquare=function(e,r,n,a,s,i,l,c){return t.squareToQuadrilateral(e,r,n,a,s,i,l,c).buildAdjoint()},t.prototype.buildAdjoint=function(){return new t(this.a22*this.a33-this.a23*this.a32,this.a23*this.a31-this.a21*this.a33,this.a21*this.a32-this.a22*this.a31,this.a13*this.a32-this.a12*this.a33,this.a11*this.a33-this.a13*this.a31,this.a12*this.a31-this.a11*this.a32,this.a12*this.a23-this.a13*this.a22,this.a13*this.a21-this.a11*this.a23,this.a11*this.a22-this.a12*this.a21)},t.prototype.times=function(e){return new t(this.a11*e.a11+this.a21*e.a12+this.a31*e.a13,this.a11*e.a21+this.a21*e.a22+this.a31*e.a23,this.a11*e.a31+this.a21*e.a32+this.a31*e.a33,this.a12*e.a11+this.a22*e.a12+this.a32*e.a13,this.a12*e.a21+this.a22*e.a22+this.a32*e.a23,this.a12*e.a31+this.a22*e.a32+this.a32*e.a33,this.a13*e.a11+this.a23*e.a12+this.a33*e.a13,this.a13*e.a21+this.a23*e.a22+this.a33*e.a23,this.a13*e.a31+this.a23*e.a32+this.a33*e.a33)},t}(),h4e=function(){var t=function(e,r){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,a){n.__proto__=a}||function(n,a){for(var s in a)a.hasOwnProperty(s)&&(n[s]=a[s])},t(e,r)};return function(e,r){t(e,r);function n(){this.constructor=e}e.prototype=r===null?Object.create(r):(n.prototype=r.prototype,new n)}}(),m4e=function(t){h4e(e,t);function e(){return t!==null&&t.apply(this,arguments)||this}return e.prototype.sampleGrid=function(r,n,a,s,i,l,c,u,d,f,h,A,m,p,g,x,y,b,w){var j=pte.quadrilateralToQuadrilateral(s,i,l,c,u,d,f,h,A,m,p,g,x,y,b,w);return this.sampleGridWithTransform(r,n,a,j)},e.prototype.sampleGridWithTransform=function(r,n,a,s){if(n<=0||a<=0)throw new Wt;for(var i=new Sf(n,a),l=new Float32Array(2*n),c=0;c<a;c++){for(var u=l.length,d=c+.5,f=0;f<u;f+=2)l[f]=f/2+.5,l[f+1]=d;s.transformPoints(l),tV.checkAndNudgePoints(r,l);try{for(var f=0;f<u;f+=2)r.get(Math.floor(l[f]),Math.floor(l[f+1]))&&i.set(f/2,c)}catch{throw new Wt}}return i},e}(tV),Q6=function(){function t(){}return t.setGridSampler=function(e){t.gridSampler=e},t.getInstance=function(){return t.gridSampler},t.gridSampler=new m4e,t}(),Zl=function(){function t(e,r){this.x=e,this.y=r}return t.prototype.toResultPoint=function(){return new Vr(this.getX(),this.getY())},t.prototype.getX=function(){return this.x},t.prototype.getY=function(){return this.y},t}(),p4e=function(){function t(e){this.EXPECTED_CORNER_BITS=new Int32Array([3808,476,2107,1799]),this.image=e}return t.prototype.detect=function(){return this.detectMirror(!1)},t.prototype.detectMirror=function(e){var r=this.getMatrixCenter(),n=this.getBullsEyeCorners(r);if(e){var a=n[0];n[0]=n[2],n[2]=a}this.extractParameters(n);var s=this.sampleGrid(this.image,n[this.shift%4],n[(this.shift+1)%4],n[(this.shift+2)%4],n[(this.shift+3)%4]),i=this.getMatrixCornerPoints(n);return new A4e(s,i,this.compact,this.nbDataBlocks,this.nbLayers)},t.prototype.extractParameters=function(e){if(!this.isValidPoint(e[0])||!this.isValidPoint(e[1])||!this.isValidPoint(e[2])||!this.isValidPoint(e[3]))throw new Wt;var r=2*this.nbCenterLayers,n=new Int32Array([this.sampleLine(e[0],e[1],r),this.sampleLine(e[1],e[2],r),this.sampleLine(e[2],e[3],r),this.sampleLine(e[3],e[0],r)]);this.shift=this.getRotation(n,r);for(var a=0,s=0;s<4;s++){var i=n[(this.shift+s)%4];this.compact?(a<<=7,a+=i>>1&127):(a<<=10,a+=(i>>2&992)+(i>>1&31))}var l=this.getCorrectedParameterData(a,this.compact);this.compact?(this.nbLayers=(l>>6)+1,this.nbDataBlocks=(l&63)+1):(this.nbLayers=(l>>11)+1,this.nbDataBlocks=(l&2047)+1)},t.prototype.getRotation=function(e,r){var n=0;e.forEach(function(s,i,l){var c=(s>>r-2<<1)+(s&1);n=(n<<3)+c}),n=((n&1)<<11)+(n>>1);for(var a=0;a<4;a++)if(Bn.bitCount(n^this.EXPECTED_CORNER_BITS[a])<=2)return a;throw new Wt},t.prototype.getCorrectedParameterData=function(e,r){var n,a;r?(n=7,a=2):(n=10,a=4);for(var s=n-a,i=new Int32Array(n),l=n-1;l>=0;--l)i[l]=e&15,e>>=4;try{var c=new C4(oc.AZTEC_PARAM);c.decode(i,s)}catch{throw new Wt}for(var u=0,l=0;l<a;l++)u=(u<<4)+i[l];return u},t.prototype.getBullsEyeCorners=function(e){var r=e,n=e,a=e,s=e,i=!0;for(this.nbCenterLayers=1;this.nbCenterLayers<9;this.nbCenterLayers++){var l=this.getFirstDifferent(r,i,1,-1),c=this.getFirstDifferent(n,i,1,1),u=this.getFirstDifferent(a,i,-1,1),d=this.getFirstDifferent(s,i,-1,-1);if(this.nbCenterLayers>2){var f=this.distancePoint(d,l)*this.nbCenterLayers/(this.distancePoint(s,r)*(this.nbCenterLayers+2));if(f<.75||f>1.25||!this.isWhiteOrBlackRectangle(l,c,u,d))break}r=l,n=c,a=u,s=d,i=!i}if(this.nbCenterLayers!==5&&this.nbCenterLayers!==7)throw new Wt;this.compact=this.nbCenterLayers===5;var h=new Vr(r.getX()+.5,r.getY()-.5),A=new Vr(n.getX()+.5,n.getY()+.5),m=new Vr(a.getX()-.5,a.getY()+.5),p=new Vr(s.getX()-.5,s.getY()-.5);return this.expandSquare([h,A,m,p],2*this.nbCenterLayers-3,2*this.nbCenterLayers)},t.prototype.getMatrixCenter=function(){var e,r,n,a;try{var s=new ZT(this.image).detect();e=s[0],r=s[1],n=s[2],a=s[3]}catch{var i=this.image.getWidth()/2,l=this.image.getHeight()/2;e=this.getFirstDifferent(new Zl(i+7,l-7),!1,1,-1).toResultPoint(),r=this.getFirstDifferent(new Zl(i+7,l+7),!1,1,1).toResultPoint(),n=this.getFirstDifferent(new Zl(i-7,l+7),!1,-1,1).toResultPoint(),a=this.getFirstDifferent(new Zl(i-7,l-7),!1,-1,-1).toResultPoint()}var c=Zn.round((e.getX()+a.getX()+r.getX()+n.getX())/4),u=Zn.round((e.getY()+a.getY()+r.getY()+n.getY())/4);try{var s=new ZT(this.image,15,c,u).detect();e=s[0],r=s[1],n=s[2],a=s[3]}catch{e=this.getFirstDifferent(new Zl(c+7,u-7),!1,1,-1).toResultPoint(),r=this.getFirstDifferent(new Zl(c+7,u+7),!1,1,1).toResultPoint(),n=this.getFirstDifferent(new Zl(c-7,u+7),!1,-1,1).toResultPoint(),a=this.getFirstDifferent(new Zl(c-7,u-7),!1,-1,-1).toResultPoint()}return c=Zn.round((e.getX()+a.getX()+r.getX()+n.getX())/4),u=Zn.round((e.getY()+a.getY()+r.getY()+n.getY())/4),new Zl(c,u)},t.prototype.getMatrixCornerPoints=function(e){return this.expandSquare(e,2*this.nbCenterLayers,this.getDimension())},t.prototype.sampleGrid=function(e,r,n,a,s){var i=Q6.getInstance(),l=this.getDimension(),c=l/2-this.nbCenterLayers,u=l/2+this.nbCenterLayers;return i.sampleGrid(e,l,l,c,c,u,c,u,u,c,u,r.getX(),r.getY(),n.getX(),n.getY(),a.getX(),a.getY(),s.getX(),s.getY())},t.prototype.sampleLine=function(e,r,n){for(var a=0,s=this.distanceResultPoint(e,r),i=s/n,l=e.getX(),c=e.getY(),u=i*(r.getX()-e.getX())/s,d=i*(r.getY()-e.getY())/s,f=0;f<n;f++)this.image.get(Zn.round(l+f*u),Zn.round(c+f*d))&&(a|=1<<n-f-1);return a},t.prototype.isWhiteOrBlackRectangle=function(e,r,n,a){var s=3;e=new Zl(e.getX()-s,e.getY()+s),r=new Zl(r.getX()-s,r.getY()-s),n=new Zl(n.getX()+s,n.getY()-s),a=new Zl(a.getX()+s,a.getY()+s);var i=this.getColor(a,e);if(i===0)return!1;var l=this.getColor(e,r);return l!==i||(l=this.getColor(r,n),l!==i)?!1:(l=this.getColor(n,a),l===i)},t.prototype.getColor=function(e,r){for(var n=this.distancePoint(e,r),a=(r.getX()-e.getX())/n,s=(r.getY()-e.getY())/n,i=0,l=e.getX(),c=e.getY(),u=this.image.get(e.getX(),e.getY()),d=Math.ceil(n),f=0;f<d;f++)l+=a,c+=s,this.image.get(Zn.round(l),Zn.round(c))!==u&&i++;var h=i/n;return h>.1&&h<.9?0:h<=.1===u?1:-1},t.prototype.getFirstDifferent=function(e,r,n,a){for(var s=e.getX()+n,i=e.getY()+a;this.isValid(s,i)&&this.image.get(s,i)===r;)s+=n,i+=a;for(s-=n,i-=a;this.isValid(s,i)&&this.image.get(s,i)===r;)s+=n;for(s-=n;this.isValid(s,i)&&this.image.get(s,i)===r;)i+=a;return i-=a,new Zl(s,i)},t.prototype.expandSquare=function(e,r,n){var a=n/(2*r),s=e[0].getX()-e[2].getX(),i=e[0].getY()-e[2].getY(),l=(e[0].getX()+e[2].getX())/2,c=(e[0].getY()+e[2].getY())/2,u=new Vr(l+a*s,c+a*i),d=new Vr(l-a*s,c-a*i);s=e[1].getX()-e[3].getX(),i=e[1].getY()-e[3].getY(),l=(e[1].getX()+e[3].getX())/2,c=(e[1].getY()+e[3].getY())/2;var f=new Vr(l+a*s,c+a*i),h=new Vr(l-a*s,c-a*i),A=[u,f,d,h];return A},t.prototype.isValid=function(e,r){return e>=0&&e<this.image.getWidth()&&r>0&&r<this.image.getHeight()},t.prototype.isValidPoint=function(e){var r=Zn.round(e.getX()),n=Zn.round(e.getY());return this.isValid(r,n)},t.prototype.distancePoint=function(e,r){return Zn.distance(e.getX(),e.getY(),r.getX(),r.getY())},t.prototype.distanceResultPoint=function(e,r){return Zn.distance(e.getX(),e.getY(),r.getX(),r.getY())},t.prototype.getDimension=function(){return this.compact?4*this.nbLayers+11:this.nbLayers<=4?4*this.nbLayers+15:4*this.nbLayers+2*(Bn.truncDivision(this.nbLayers-4,8)+1)+15},t}(),nS=function(){function t(){}return t.prototype.decode=function(e,r){r===void 0&&(r=null);var n=null,a=new p4e(e.getBlackMatrix()),s=null,i=null;try{var l=a.detectMirror(!1);s=l.getPoints(),this.reportFoundResultPoints(r,s),i=new eV().decode(l)}catch(f){n=f}if(i==null)try{var l=a.detectMirror(!0);s=l.getPoints(),this.reportFoundResultPoints(r,s),i=new eV().decode(l)}catch(f){throw n??f}var c=new bl(i.getText(),i.getRawBytes(),i.getNumBits(),s,Zr.AZTEC,Ka.currentTimeMillis()),u=i.getByteSegments();u!=null&&c.putMetadata($o.BYTE_SEGMENTS,u);var d=i.getECLevel();return d!=null&&c.putMetadata($o.ERROR_CORRECTION_LEVEL,d),c},t.prototype.reportFoundResultPoints=function(e,r){if(e!=null){var n=e.get(Ga.NEED_RESULT_POINT_CALLBACK);n!=null&&r.forEach(function(a,s,i){n.foundPossibleResultPoint(a)})}},t.prototype.reset=function(){},t}(),g4e=function(){var t=function(e,r){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,a){n.__proto__=a}||function(n,a){for(var s in a)a.hasOwnProperty(s)&&(n[s]=a[s])},t(e,r)};return function(e,r){t(e,r);function n(){this.constructor=e}e.prototype=r===null?Object.create(r):(n.prototype=r.prototype,new n)}}();(function(t){g4e(e,t);function e(r){return r===void 0&&(r=500),t.call(this,new nS,r)||this}return e})(Lv);var $i=function(){function t(){}return t.prototype.decode=function(e,r){try{return this.doDecode(e,r)}catch{var n=r&&r.get(Ga.TRY_HARDER)===!0;if(n&&e.isRotateSupported()){var a=e.rotateCounterClockwise(),s=this.doDecode(a,r),i=s.getResultMetadata(),l=270;i!==null&&i.get($o.ORIENTATION)===!0&&(l=l+i.get($o.ORIENTATION)%360),s.putMetadata($o.ORIENTATION,l);var c=s.getResultPoints();if(c!==null)for(var u=a.getHeight(),d=0;d<c.length;d++)c[d]=new Vr(u-c[d].getY()-1,c[d].getX());return s}else throw new Wt}},t.prototype.reset=function(){},t.prototype.doDecode=function(e,r){var n=e.getWidth(),a=e.getHeight(),s=new Ao(n),i=r&&r.get(Ga.TRY_HARDER)===!0,l=Math.max(1,a>>(i?8:5)),c;i?c=a:c=15;for(var u=Math.trunc(a/2),d=0;d<c;d++){var f=Math.trunc((d+1)/2),h=(d&1)===0,A=u+l*(h?f:-f);if(A<0||A>=a)break;try{s=e.getBlackRow(A,s)}catch{continue}for(var m=function(y){if(y===1&&(s.reverse(),r&&r.get(Ga.NEED_RESULT_POINT_CALLBACK)===!0)){var b=new Map;r.forEach(function(I,_){return b.set(_,I)}),b.delete(Ga.NEED_RESULT_POINT_CALLBACK),r=b}try{var w=p.decodeRow(A,s,r);if(y===1){w.putMetadata($o.ORIENTATION,180);var j=w.getResultPoints();j!==null&&(j[0]=new Vr(n-j[0].getX()-1,j[0].getY()),j[1]=new Vr(n-j[1].getX()-1,j[1].getY()))}return{value:w}}catch{}},p=this,g=0;g<2;g++){var x=m(g);if(typeof x=="object")return x.value}}throw new Wt},t.recordPattern=function(e,r,n){for(var a=n.length,s=0;s<a;s++)n[s]=0;var i=e.getSize();if(r>=i)throw new Wt;for(var l=!e.get(r),c=0,u=r;u<i;){if(e.get(u)!==l)n[c]++;else{if(++c===a)break;n[c]=1,l=!l}u++}if(!(c===a||c===a-1&&u===i))throw new Wt},t.recordPatternInReverse=function(e,r,n){for(var a=n.length,s=e.get(r);r>0&&a>=0;)e.get(--r)!==s&&(a--,s=!s);if(a>=0)throw new Wt;t.recordPattern(e,r+1,n)},t.patternMatchVariance=function(e,r,n){for(var a=e.length,s=0,i=0,l=0;l<a;l++)s+=e[l],i+=r[l];if(s<i)return Number.POSITIVE_INFINITY;var c=s/i;n*=c;for(var u=0,d=0;d<a;d++){var f=e[d],h=r[d]*c,A=f>h?f-h:h-f;if(A>n)return Number.POSITIVE_INFINITY;u+=A}return u/s},t}(),x4e=function(){var t=function(e,r){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,a){n.__proto__=a}||function(n,a){for(var s in a)a.hasOwnProperty(s)&&(n[s]=a[s])},t(e,r)};return function(e,r){t(e,r);function n(){this.constructor=e}e.prototype=r===null?Object.create(r):(n.prototype=r.prototype,new n)}}(),rV=function(t){x4e(e,t);function e(){return t!==null&&t.apply(this,arguments)||this}return e.findStartPattern=function(r){for(var n=r.getSize(),a=r.getNextSet(0),s=0,i=Int32Array.from([0,0,0,0,0,0]),l=a,c=!1,u=6,d=a;d<n;d++)if(r.get(d)!==c)i[s]++;else{if(s===u-1){for(var f=e.MAX_AVG_VARIANCE,h=-1,A=e.CODE_START_A;A<=e.CODE_START_C;A++){var m=$i.patternMatchVariance(i,e.CODE_PATTERNS[A],e.MAX_INDIVIDUAL_VARIANCE);m<f&&(f=m,h=A)}if(h>=0&&r.isRange(Math.max(0,l-(d-l)/2),l,!1))return Int32Array.from([l,d,h]);l+=i[0]+i[1],i=i.slice(2,i.length),i[s-1]=0,i[s]=0,s--}else s++;i[s]=1,c=!c}throw new Wt},e.decodeCode=function(r,n,a){$i.recordPattern(r,a,n);for(var s=e.MAX_AVG_VARIANCE,i=-1,l=0;l<e.CODE_PATTERNS.length;l++){var c=e.CODE_PATTERNS[l],u=this.patternMatchVariance(n,c,e.MAX_INDIVIDUAL_VARIANCE);u<s&&(s=u,i=l)}if(i>=0)return i;throw new Wt},e.prototype.decodeRow=function(r,n,a){var s=a&&a.get(Ga.ASSUME_GS1)===!0,i=e.findStartPattern(n),l=i[2],c=0,u=new Uint8Array(20);u[c++]=l;var d;switch(l){case e.CODE_START_A:d=e.CODE_CODE_A;break;case e.CODE_START_B:d=e.CODE_CODE_B;break;case e.CODE_START_C:d=e.CODE_CODE_C;break;default:throw new Nr}for(var f=!1,h=!1,A="",m=i[0],p=i[1],g=Int32Array.from([0,0,0,0,0,0]),x=0,y=0,b=l,w=0,j=!0,I=!1,_=!1;!f;){var E=h;switch(h=!1,x=y,y=e.decodeCode(n,g,p),u[c++]=y,y!==e.CODE_STOP&&(j=!0),y!==e.CODE_STOP&&(w++,b+=w*y),m=p,p+=g.reduce(function(fe,me){return fe+me},0),y){case e.CODE_START_A:case e.CODE_START_B:case e.CODE_START_C:throw new Nr}switch(d){case e.CODE_CODE_A:if(y<64)_===I?A+=String.fromCharCode(32+y):A+=String.fromCharCode(32+y+128),_=!1;else if(y<96)_===I?A+=String.fromCharCode(y-64):A+=String.fromCharCode(y+64),_=!1;else switch(y!==e.CODE_STOP&&(j=!1),y){case e.CODE_FNC_1:s&&(A.length===0?A+="]C1":A+="");break;case e.CODE_FNC_2:case e.CODE_FNC_3:break;case e.CODE_FNC_4_A:!I&&_?(I=!0,_=!1):I&&_?(I=!1,_=!1):_=!0;break;case e.CODE_SHIFT:h=!0,d=e.CODE_CODE_B;break;case e.CODE_CODE_B:d=e.CODE_CODE_B;break;case e.CODE_CODE_C:d=e.CODE_CODE_C;break;case e.CODE_STOP:f=!0;break}break;case e.CODE_CODE_B:if(y<96)_===I?A+=String.fromCharCode(32+y):A+=String.fromCharCode(32+y+128),_=!1;else switch(y!==e.CODE_STOP&&(j=!1),y){case e.CODE_FNC_1:s&&(A.length===0?A+="]C1":A+="");break;case e.CODE_FNC_2:case e.CODE_FNC_3:break;case e.CODE_FNC_4_B:!I&&_?(I=!0,_=!1):I&&_?(I=!1,_=!1):_=!0;break;case e.CODE_SHIFT:h=!0,d=e.CODE_CODE_A;break;case e.CODE_CODE_A:d=e.CODE_CODE_A;break;case e.CODE_CODE_C:d=e.CODE_CODE_C;break;case e.CODE_STOP:f=!0;break}break;case e.CODE_CODE_C:if(y<100)y<10&&(A+="0"),A+=y;else switch(y!==e.CODE_STOP&&(j=!1),y){case e.CODE_FNC_1:s&&(A.length===0?A+="]C1":A+="");break;case e.CODE_CODE_A:d=e.CODE_CODE_A;break;case e.CODE_CODE_B:d=e.CODE_CODE_B;break;case e.CODE_STOP:f=!0;break}break}E&&(d=d===e.CODE_CODE_A?e.CODE_CODE_B:e.CODE_CODE_A)}var S=p-m;if(p=n.getNextUnset(p),!n.isRange(p,Math.min(n.getSize(),p+(p-m)/2),!1))throw new Wt;if(b-=w*x,b%103!==x)throw new bi;var k=A.length;if(k===0)throw new Wt;k>0&&j&&(d===e.CODE_CODE_C?A=A.substring(0,k-2):A=A.substring(0,k-1));for(var P=(i[1]+i[0])/2,T=m+S/2,F=u.length,Y=new Uint8Array(F),he=0;he<F;he++)Y[he]=u[he];var ue=[new Vr(P,r),new Vr(T,r)];return new bl(A,Y,0,ue,Zr.CODE_128,new Date().getTime())},e.CODE_PATTERNS=[Int32Array.from([2,1,2,2,2,2]),Int32Array.from([2,2,2,1,2,2]),Int32Array.from([2,2,2,2,2,1]),Int32Array.from([1,2,1,2,2,3]),Int32Array.from([1,2,1,3,2,2]),Int32Array.from([1,3,1,2,2,2]),Int32Array.from([1,2,2,2,1,3]),Int32Array.from([1,2,2,3,1,2]),Int32Array.from([1,3,2,2,1,2]),Int32Array.from([2,2,1,2,1,3]),Int32Array.from([2,2,1,3,1,2]),Int32Array.from([2,3,1,2,1,2]),Int32Array.from([1,1,2,2,3,2]),Int32Array.from([1,2,2,1,3,2]),Int32Array.from([1,2,2,2,3,1]),Int32Array.from([1,1,3,2,2,2]),Int32Array.from([1,2,3,1,2,2]),Int32Array.from([1,2,3,2,2,1]),Int32Array.from([2,2,3,2,1,1]),Int32Array.from([2,2,1,1,3,2]),Int32Array.from([2,2,1,2,3,1]),Int32Array.from([2,1,3,2,1,2]),Int32Array.from([2,2,3,1,1,2]),Int32Array.from([3,1,2,1,3,1]),Int32Array.from([3,1,1,2,2,2]),Int32Array.from([3,2,1,1,2,2]),Int32Array.from([3,2,1,2,2,1]),Int32Array.from([3,1,2,2,1,2]),Int32Array.from([3,2,2,1,1,2]),Int32Array.from([3,2,2,2,1,1]),Int32Array.from([2,1,2,1,2,3]),Int32Array.from([2,1,2,3,2,1]),Int32Array.from([2,3,2,1,2,1]),Int32Array.from([1,1,1,3,2,3]),Int32Array.from([1,3,1,1,2,3]),Int32Array.from([1,3,1,3,2,1]),Int32Array.from([1,1,2,3,1,3]),Int32Array.from([1,3,2,1,1,3]),Int32Array.from([1,3,2,3,1,1]),Int32Array.from([2,1,1,3,1,3]),Int32Array.from([2,3,1,1,1,3]),Int32Array.from([2,3,1,3,1,1]),Int32Array.from([1,1,2,1,3,3]),Int32Array.from([1,1,2,3,3,1]),Int32Array.from([1,3,2,1,3,1]),Int32Array.from([1,1,3,1,2,3]),Int32Array.from([1,1,3,3,2,1]),Int32Array.from([1,3,3,1,2,1]),Int32Array.from([3,1,3,1,2,1]),Int32Array.from([2,1,1,3,3,1]),Int32Array.from([2,3,1,1,3,1]),Int32Array.from([2,1,3,1,1,3]),Int32Array.from([2,1,3,3,1,1]),Int32Array.from([2,1,3,1,3,1]),Int32Array.from([3,1,1,1,2,3]),Int32Array.from([3,1,1,3,2,1]),Int32Array.from([3,3,1,1,2,1]),Int32Array.from([3,1,2,1,1,3]),Int32Array.from([3,1,2,3,1,1]),Int32Array.from([3,3,2,1,1,1]),Int32Array.from([3,1,4,1,1,1]),Int32Array.from([2,2,1,4,1,1]),Int32Array.from([4,3,1,1,1,1]),Int32Array.from([1,1,1,2,2,4]),Int32Array.from([1,1,1,4,2,2]),Int32Array.from([1,2,1,1,2,4]),Int32Array.from([1,2,1,4,2,1]),Int32Array.from([1,4,1,1,2,2]),Int32Array.from([1,4,1,2,2,1]),Int32Array.from([1,1,2,2,1,4]),Int32Array.from([1,1,2,4,1,2]),Int32Array.from([1,2,2,1,1,4]),Int32Array.from([1,2,2,4,1,1]),Int32Array.from([1,4,2,1,1,2]),Int32Array.from([1,4,2,2,1,1]),Int32Array.from([2,4,1,2,1,1]),Int32Array.from([2,2,1,1,1,4]),Int32Array.from([4,1,3,1,1,1]),Int32Array.from([2,4,1,1,1,2]),Int32Array.from([1,3,4,1,1,1]),Int32Array.from([1,1,1,2,4,2]),Int32Array.from([1,2,1,1,4,2]),Int32Array.from([1,2,1,2,4,1]),Int32Array.from([1,1,4,2,1,2]),Int32Array.from([1,2,4,1,1,2]),Int32Array.from([1,2,4,2,1,1]),Int32Array.from([4,1,1,2,1,2]),Int32Array.from([4,2,1,1,1,2]),Int32Array.from([4,2,1,2,1,1]),Int32Array.from([2,1,2,1,4,1]),Int32Array.from([2,1,4,1,2,1]),Int32Array.from([4,1,2,1,2,1]),Int32Array.from([1,1,1,1,4,3]),Int32Array.from([1,1,1,3,4,1]),Int32Array.from([1,3,1,1,4,1]),Int32Array.from([1,1,4,1,1,3]),Int32Array.from([1,1,4,3,1,1]),Int32Array.from([4,1,1,1,1,3]),Int32Array.from([4,1,1,3,1,1]),Int32Array.from([1,1,3,1,4,1]),Int32Array.from([1,1,4,1,3,1]),Int32Array.from([3,1,1,1,4,1]),Int32Array.from([4,1,1,1,3,1]),Int32Array.from([2,1,1,4,1,2]),Int32Array.from([2,1,1,2,1,4]),Int32Array.from([2,1,1,2,3,2]),Int32Array.from([2,3,3,1,1,1,2])],e.MAX_AVG_VARIANCE=.25,e.MAX_INDIVIDUAL_VARIANCE=.7,e.CODE_SHIFT=98,e.CODE_CODE_C=99,e.CODE_CODE_B=100,e.CODE_CODE_A=101,e.CODE_FNC_1=102,e.CODE_FNC_2=97,e.CODE_FNC_3=96,e.CODE_FNC_4_A=101,e.CODE_FNC_4_B=100,e.CODE_START_A=103,e.CODE_START_B=104,e.CODE_START_C=105,e.CODE_STOP=106,e}($i),v4e=function(){var t=function(e,r){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,a){n.__proto__=a}||function(n,a){for(var s in a)a.hasOwnProperty(s)&&(n[s]=a[s])},t(e,r)};return function(e,r){t(e,r);function n(){this.constructor=e}e.prototype=r===null?Object.create(r):(n.prototype=r.prototype,new n)}}(),R5=function(t){var e=typeof Symbol=="function"&&Symbol.iterator,r=e&&t[e],n=0;if(r)return r.call(t);if(t&&typeof t.length=="number")return{next:function(){return t&&n>=t.length&&(t=void 0),{value:t&&t[n++],done:!t}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")},nV=function(t){v4e(e,t);function e(r,n){r===void 0&&(r=!1),n===void 0&&(n=!1);var a=t.call(this)||this;return a.usingCheckDigit=r,a.extendedMode=n,a.decodeRowResult="",a.counters=new Int32Array(9),a}return e.prototype.decodeRow=function(r,n,a){var s,i,l,c,u=this.counters;u.fill(0),this.decodeRowResult="";var d=e.findAsteriskPattern(n,u),f=n.getNextSet(d[1]),h=n.getSize(),A,m;do{e.recordPattern(n,f,u);var p=e.toNarrowWidePattern(u);if(p<0)throw new Wt;A=e.patternToChar(p),this.decodeRowResult+=A,m=f;try{for(var g=(s=void 0,R5(u)),x=g.next();!x.done;x=g.next()){var y=x.value;f+=y}}catch(F){s={error:F}}finally{try{x&&!x.done&&(i=g.return)&&i.call(g)}finally{if(s)throw s.error}}f=n.getNextSet(f)}while(A!=="*");this.decodeRowResult=this.decodeRowResult.substring(0,this.decodeRowResult.length-1);var b=0;try{for(var w=R5(u),j=w.next();!j.done;j=w.next()){var y=j.value;b+=y}}catch(F){l={error:F}}finally{try{j&&!j.done&&(c=w.return)&&c.call(w)}finally{if(l)throw l.error}}var I=f-m-b;if(f!==h&&I*2<b)throw new Wt;if(this.usingCheckDigit){for(var _=this.decodeRowResult.length-1,E=0,S=0;S<_;S++)E+=e.ALPHABET_STRING.indexOf(this.decodeRowResult.charAt(S));if(this.decodeRowResult.charAt(_)!==e.ALPHABET_STRING.charAt(E%43))throw new bi;this.decodeRowResult=this.decodeRowResult.substring(0,_)}if(this.decodeRowResult.length===0)throw new Wt;var k;this.extendedMode?k=e.decodeExtended(this.decodeRowResult):k=this.decodeRowResult;var P=(d[1]+d[0])/2,T=m+b/2;return new bl(k,null,0,[new Vr(P,r),new Vr(T,r)],Zr.CODE_39,new Date().getTime())},e.findAsteriskPattern=function(r,n){for(var a=r.getSize(),s=r.getNextSet(0),i=0,l=s,c=!1,u=n.length,d=s;d<a;d++)if(r.get(d)!==c)n[i]++;else{if(i===u-1){if(this.toNarrowWidePattern(n)===e.ASTERISK_ENCODING&&r.isRange(Math.max(0,l-Math.floor((d-l)/2)),l,!1))return[l,d];l+=n[0]+n[1],n.copyWithin(0,2,2+i-1),n[i-1]=0,n[i]=0,i--}else i++;n[i]=1,c=!c}throw new Wt},e.toNarrowWidePattern=function(r){var n,a,s=r.length,i=0,l;do{var c=2147483647;try{for(var u=(n=void 0,R5(r)),d=u.next();!d.done;d=u.next()){var f=d.value;f<c&&f>i&&(c=f)}}catch(p){n={error:p}}finally{try{d&&!d.done&&(a=u.return)&&a.call(u)}finally{if(n)throw n.error}}i=c,l=0;for(var h=0,A=0,m=0;m<s;m++){var f=r[m];f>i&&(A|=1<<s-1-m,l++,h+=f)}if(l===3){for(var m=0;m<s&&l>0;m++){var f=r[m];if(f>i&&(l--,f*2>=h))return-1}return A}}while(l>3);return-1},e.patternToChar=function(r){for(var n=0;n<e.CHARACTER_ENCODINGS.length;n++)if(e.CHARACTER_ENCODINGS[n]===r)return e.ALPHABET_STRING.charAt(n);if(r===e.ASTERISK_ENCODING)return"*";throw new Wt},e.decodeExtended=function(r){for(var n=r.length,a="",s=0;s<n;s++){var i=r.charAt(s);if(i==="+"||i==="$"||i==="%"||i==="/"){var l=r.charAt(s+1),c="\0";switch(i){case"+":if(l>="A"&&l<="Z")c=String.fromCharCode(l.charCodeAt(0)+32);else throw new Nr;break;case"$":if(l>="A"&&l<="Z")c=String.fromCharCode(l.charCodeAt(0)-64);else throw new Nr;break;case"%":if(l>="A"&&l<="E")c=String.fromCharCode(l.charCodeAt(0)-38);else if(l>="F"&&l<="J")c=String.fromCharCode(l.charCodeAt(0)-11);else if(l>="K"&&l<="O")c=String.fromCharCode(l.charCodeAt(0)+16);else if(l>="P"&&l<="T")c=String.fromCharCode(l.charCodeAt(0)+43);else if(l==="U")c="\0";else if(l==="V")c="@";else if(l==="W")c="`";else if(l==="X"||l==="Y"||l==="Z")c="";else throw new Nr;break;case"/":if(l>="A"&&l<="O")c=String.fromCharCode(l.charCodeAt(0)-32);else if(l==="Z")c=":";else throw new Nr;break}a+=c,s++}else a+=i}return a},e.ALPHABET_STRING="0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZ-. $/+%",e.CHARACTER_ENCODINGS=[52,289,97,352,49,304,112,37,292,100,265,73,328,25,280,88,13,268,76,28,259,67,322,19,274,82,7,262,70,22,385,193,448,145,400,208,133,388,196,168,162,138,42],e.ASTERISK_ENCODING=148,e}($i),y4e=function(){var t=function(e,r){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,a){n.__proto__=a}||function(n,a){for(var s in a)a.hasOwnProperty(s)&&(n[s]=a[s])},t(e,r)};return function(e,r){t(e,r);function n(){this.constructor=e}e.prototype=r===null?Object.create(r):(n.prototype=r.prototype,new n)}}(),M5=function(t){var e=typeof Symbol=="function"&&Symbol.iterator,r=e&&t[e],n=0;if(r)return r.call(t);if(t&&typeof t.length=="number")return{next:function(){return t&&n>=t.length&&(t=void 0),{value:t&&t[n++],done:!t}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")},aV=function(t){y4e(e,t);function e(){var r=t.call(this)||this;return r.decodeRowResult="",r.counters=new Int32Array(6),r}return e.prototype.decodeRow=function(r,n,a){var s,i,l,c,u=this.findAsteriskPattern(n),d=n.getNextSet(u[1]),f=n.getSize(),h=this.counters;h.fill(0),this.decodeRowResult="";var A,m;do{e.recordPattern(n,d,h);var p=this.toPattern(h);if(p<0)throw new Wt;A=this.patternToChar(p),this.decodeRowResult+=A,m=d;try{for(var g=(s=void 0,M5(h)),x=g.next();!x.done;x=g.next()){var y=x.value;d+=y}}catch(S){s={error:S}}finally{try{x&&!x.done&&(i=g.return)&&i.call(g)}finally{if(s)throw s.error}}d=n.getNextSet(d)}while(A!=="*");this.decodeRowResult=this.decodeRowResult.substring(0,this.decodeRowResult.length-1);var b=0;try{for(var w=M5(h),j=w.next();!j.done;j=w.next()){var y=j.value;b+=y}}catch(S){l={error:S}}finally{try{j&&!j.done&&(c=w.return)&&c.call(w)}finally{if(l)throw l.error}}if(d===f||!n.get(d))throw new Wt;if(this.decodeRowResult.length<2)throw new Wt;this.checkChecksums(this.decodeRowResult),this.decodeRowResult=this.decodeRowResult.substring(0,this.decodeRowResult.length-2);var I=this.decodeExtended(this.decodeRowResult),_=(u[1]+u[0])/2,E=m+b/2;return new bl(I,null,0,[new Vr(_,r),new Vr(E,r)],Zr.CODE_93,new Date().getTime())},e.prototype.findAsteriskPattern=function(r){var n=r.getSize(),a=r.getNextSet(0);this.counters.fill(0);for(var s=this.counters,i=a,l=!1,c=s.length,u=0,d=a;d<n;d++)if(r.get(d)!==l)s[u]++;else{if(u===c-1){if(this.toPattern(s)===e.ASTERISK_ENCODING)return new Int32Array([i,d]);i+=s[0]+s[1],s.copyWithin(0,2,2+u-1),s[u-1]=0,s[u]=0,u--}else u++;s[u]=1,l=!l}throw new Wt},e.prototype.toPattern=function(r){var n,a,s=0;try{for(var i=M5(r),l=i.next();!l.done;l=i.next()){var c=l.value;s+=c}}catch(m){n={error:m}}finally{try{l&&!l.done&&(a=i.return)&&a.call(i)}finally{if(n)throw n.error}}for(var u=0,d=r.length,f=0;f<d;f++){var h=Math.round(r[f]*9/s);if(h<1||h>4)return-1;if(f&1)u<<=h;else for(var A=0;A<h;A++)u=u<<1|1}return u},e.prototype.patternToChar=function(r){for(var n=0;n<e.CHARACTER_ENCODINGS.length;n++)if(e.CHARACTER_ENCODINGS[n]===r)return e.ALPHABET_STRING.charAt(n);throw new Wt},e.prototype.decodeExtended=function(r){for(var n=r.length,a="",s=0;s<n;s++){var i=r.charAt(s);if(i>="a"&&i<="d"){if(s>=n-1)throw new Nr;var l=r.charAt(s+1),c="\0";switch(i){case"d":if(l>="A"&&l<="Z")c=String.fromCharCode(l.charCodeAt(0)+32);else throw new Nr;break;case"a":if(l>="A"&&l<="Z")c=String.fromCharCode(l.charCodeAt(0)-64);else throw new Nr;break;case"b":if(l>="A"&&l<="E")c=String.fromCharCode(l.charCodeAt(0)-38);else if(l>="F"&&l<="J")c=String.fromCharCode(l.charCodeAt(0)-11);else if(l>="K"&&l<="O")c=String.fromCharCode(l.charCodeAt(0)+16);else if(l>="P"&&l<="T")c=String.fromCharCode(l.charCodeAt(0)+43);else if(l==="U")c="\0";else if(l==="V")c="@";else if(l==="W")c="`";else if(l>="X"&&l<="Z")c="";else throw new Nr;break;case"c":if(l>="A"&&l<="O")c=String.fromCharCode(l.charCodeAt(0)-32);else if(l==="Z")c=":";else throw new Nr;break}a+=c,s++}else a+=i}return a},e.prototype.checkChecksums=function(r){var n=r.length;this.checkOneChecksum(r,n-2,20),this.checkOneChecksum(r,n-1,15)},e.prototype.checkOneChecksum=function(r,n,a){for(var s=1,i=0,l=n-1;l>=0;l--)i+=s*e.ALPHABET_STRING.indexOf(r.charAt(l)),++s>a&&(s=1);if(r.charAt(n)!==e.ALPHABET_STRING[i%47])throw new bi},e.ALPHABET_STRING="0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZ-. $/+%abcd*",e.CHARACTER_ENCODINGS=[276,328,324,322,296,292,290,336,274,266,424,420,418,404,402,394,360,356,354,308,282,344,332,326,300,278,436,434,428,422,406,410,364,358,310,314,302,468,466,458,366,374,430,294,474,470,306,350],e.ASTERISK_ENCODING=e.CHARACTER_ENCODINGS[47],e}($i),b4e=function(){var t=function(e,r){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,a){n.__proto__=a}||function(n,a){for(var s in a)a.hasOwnProperty(s)&&(n[s]=a[s])},t(e,r)};return function(e,r){t(e,r);function n(){this.constructor=e}e.prototype=r===null?Object.create(r):(n.prototype=r.prototype,new n)}}(),w4e=function(t){var e=typeof Symbol=="function"&&Symbol.iterator,r=e&&t[e],n=0;if(r)return r.call(t);if(t&&typeof t.length=="number")return{next:function(){return t&&n>=t.length&&(t=void 0),{value:t&&t[n++],done:!t}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")},sV=function(t){b4e(e,t);function e(){var r=t!==null&&t.apply(this,arguments)||this;return r.narrowLineWidth=-1,r}return e.prototype.decodeRow=function(r,n,a){var s,i,l=this.decodeStart(n),c=this.decodeEnd(n),u=new _n;e.decodeMiddle(n,l[1],c[0],u);var d=u.toString(),f=null;a!=null&&(f=a.get(Ga.ALLOWED_LENGTHS)),f==null&&(f=e.DEFAULT_ALLOWED_LENGTHS);var h=d.length,A=!1,m=0;try{for(var p=w4e(f),g=p.next();!g.done;g=p.next()){var x=g.value;if(h===x){A=!0;break}x>m&&(m=x)}}catch(w){s={error:w}}finally{try{g&&!g.done&&(i=p.return)&&i.call(p)}finally{if(s)throw s.error}}if(!A&&h>m&&(A=!0),!A)throw new Nr;var y=[new Vr(l[1],r),new Vr(c[0],r)],b=new bl(d,null,0,y,Zr.ITF,new Date().getTime());return b},e.decodeMiddle=function(r,n,a,s){var i=new Int32Array(10),l=new Int32Array(5),c=new Int32Array(5);for(i.fill(0),l.fill(0),c.fill(0);n<a;){$i.recordPattern(r,n,i);for(var u=0;u<5;u++){var d=2*u;l[u]=i[d],c[u]=i[d+1]}var f=e.decodeDigit(l);s.append(f.toString()),f=this.decodeDigit(c),s.append(f.toString()),i.forEach(function(h){n+=h})}},e.prototype.decodeStart=function(r){var n=e.skipWhiteSpace(r),a=e.findGuardPattern(r,n,e.START_PATTERN);return this.narrowLineWidth=(a[1]-a[0])/4,this.validateQuietZone(r,a[0]),a},e.prototype.validateQuietZone=function(r,n){var a=this.narrowLineWidth*10;a=a<n?a:n;for(var s=n-1;a>0&&s>=0&&!r.get(s);s--)a--;if(a!==0)throw new Wt},e.skipWhiteSpace=function(r){var n=r.getSize(),a=r.getNextSet(0);if(a===n)throw new Wt;return a},e.prototype.decodeEnd=function(r){r.reverse();try{var n=e.skipWhiteSpace(r),a=void 0;try{a=e.findGuardPattern(r,n,e.END_PATTERN_REVERSED[0])}catch(i){i instanceof Wt&&(a=e.findGuardPattern(r,n,e.END_PATTERN_REVERSED[1]))}this.validateQuietZone(r,a[0]);var s=a[0];return a[0]=r.getSize()-a[1],a[1]=r.getSize()-s,a}finally{r.reverse()}},e.findGuardPattern=function(r,n,a){var s=a.length,i=new Int32Array(s),l=r.getSize(),c=!1,u=0,d=n;i.fill(0);for(var f=n;f<l;f++)if(r.get(f)!==c)i[u]++;else{if(u===s-1){if($i.patternMatchVariance(i,a,e.MAX_INDIVIDUAL_VARIANCE)<e.MAX_AVG_VARIANCE)return[d,f];d+=i[0]+i[1],Ka.arraycopy(i,2,i,0,u-1),i[u-1]=0,i[u]=0,u--}else u++;i[u]=1,c=!c}throw new Wt},e.decodeDigit=function(r){for(var n=e.MAX_AVG_VARIANCE,a=-1,s=e.PATTERNS.length,i=0;i<s;i++){var l=e.PATTERNS[i],c=$i.patternMatchVariance(r,l,e.MAX_INDIVIDUAL_VARIANCE);c<n?(n=c,a=i):c===n&&(a=-1)}if(a>=0)return a%10;throw new Wt},e.PATTERNS=[Int32Array.from([1,1,2,2,1]),Int32Array.from([2,1,1,1,2]),Int32Array.from([1,2,1,1,2]),Int32Array.from([2,2,1,1,1]),Int32Array.from([1,1,2,1,2]),Int32Array.from([2,1,2,1,1]),Int32Array.from([1,2,2,1,1]),Int32Array.from([1,1,1,2,2]),Int32Array.from([2,1,1,2,1]),Int32Array.from([1,2,1,2,1]),Int32Array.from([1,1,3,3,1]),Int32Array.from([3,1,1,1,3]),Int32Array.from([1,3,1,1,3]),Int32Array.from([3,3,1,1,1]),Int32Array.from([1,1,3,1,3]),Int32Array.from([3,1,3,1,1]),Int32Array.from([1,3,3,1,1]),Int32Array.from([1,1,1,3,3]),Int32Array.from([3,1,1,3,1]),Int32Array.from([1,3,1,3,1])],e.MAX_AVG_VARIANCE=.38,e.MAX_INDIVIDUAL_VARIANCE=.5,e.DEFAULT_ALLOWED_LENGTHS=[6,8,10,12,14],e.START_PATTERN=Int32Array.from([1,1,1,1]),e.END_PATTERN_REVERSED=[Int32Array.from([1,1,2]),Int32Array.from([1,1,3])],e}($i),N4e=function(){var t=function(e,r){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,a){n.__proto__=a}||function(n,a){for(var s in a)a.hasOwnProperty(s)&&(n[s]=a[s])},t(e,r)};return function(e,r){t(e,r);function n(){this.constructor=e}e.prototype=r===null?Object.create(r):(n.prototype=r.prototype,new n)}}(),cv=function(t){N4e(e,t);function e(){var r=t!==null&&t.apply(this,arguments)||this;return r.decodeRowStringBuffer="",r}return e.findStartGuardPattern=function(r){for(var n=!1,a,s=0,i=Int32Array.from([0,0,0]);!n;){i=Int32Array.from([0,0,0]),a=e.findGuardPattern(r,s,!1,this.START_END_PATTERN,i);var l=a[0];s=a[1];var c=l-(s-l);c>=0&&(n=r.isRange(c,l,!1))}return a},e.checkChecksum=function(r){return e.checkStandardUPCEANChecksum(r)},e.checkStandardUPCEANChecksum=function(r){var n=r.length;if(n===0)return!1;var a=parseInt(r.charAt(n-1),10);return e.getStandardUPCEANChecksum(r.substring(0,n-1))===a},e.getStandardUPCEANChecksum=function(r){for(var n=r.length,a=0,s=n-1;s>=0;s-=2){var i=r.charAt(s).charCodeAt(0)-48;if(i<0||i>9)throw new Nr;a+=i}a*=3;for(var s=n-2;s>=0;s-=2){var i=r.charAt(s).charCodeAt(0)-48;if(i<0||i>9)throw new Nr;a+=i}return(1e3-a)%10},e.decodeEnd=function(r,n){return e.findGuardPattern(r,n,!1,e.START_END_PATTERN,new Int32Array(e.START_END_PATTERN.length).fill(0))},e.findGuardPatternWithoutCounters=function(r,n,a,s){return this.findGuardPattern(r,n,a,s,new Int32Array(s.length))},e.findGuardPattern=function(r,n,a,s,i){var l=r.getSize();n=a?r.getNextUnset(n):r.getNextSet(n);for(var c=0,u=n,d=s.length,f=a,h=n;h<l;h++)if(r.get(h)!==f)i[c]++;else{if(c===d-1){if($i.patternMatchVariance(i,s,e.MAX_INDIVIDUAL_VARIANCE)<e.MAX_AVG_VARIANCE)return Int32Array.from([u,h]);u+=i[0]+i[1];for(var A=i.slice(2,i.length),m=0;m<c-1;m++)i[m]=A[m];i[c-1]=0,i[c]=0,c--}else c++;i[c]=1,f=!f}throw new Wt},e.decodeDigit=function(r,n,a,s){this.recordPattern(r,a,n);for(var i=this.MAX_AVG_VARIANCE,l=-1,c=s.length,u=0;u<c;u++){var d=s[u],f=$i.patternMatchVariance(n,d,e.MAX_INDIVIDUAL_VARIANCE);f<i&&(i=f,l=u)}if(l>=0)return l;throw new Wt},e.MAX_AVG_VARIANCE=.48,e.MAX_INDIVIDUAL_VARIANCE=.7,e.START_END_PATTERN=Int32Array.from([1,1,1]),e.MIDDLE_PATTERN=Int32Array.from([1,1,1,1,1]),e.END_PATTERN=Int32Array.from([1,1,1,1,1,1]),e.L_PATTERNS=[Int32Array.from([3,2,1,1]),Int32Array.from([2,2,2,1]),Int32Array.from([2,1,2,2]),Int32Array.from([1,4,1,1]),Int32Array.from([1,1,3,2]),Int32Array.from([1,2,3,1]),Int32Array.from([1,1,1,4]),Int32Array.from([1,3,1,2]),Int32Array.from([1,2,1,3]),Int32Array.from([3,1,1,2])],e}($i),C4e=function(t){var e=typeof Symbol=="function"&&Symbol.iterator,r=e&&t[e],n=0;if(r)return r.call(t);if(t&&typeof t.length=="number")return{next:function(){return t&&n>=t.length&&(t=void 0),{value:t&&t[n++],done:!t}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")},_4e=function(){function t(){this.CHECK_DIGIT_ENCODINGS=[24,20,18,17,12,6,3,10,9,5],this.decodeMiddleCounters=Int32Array.from([0,0,0,0]),this.decodeRowStringBuffer=""}return t.prototype.decodeRow=function(e,r,n){var a=this.decodeRowStringBuffer,s=this.decodeMiddle(r,n,a),i=a.toString(),l=t.parseExtensionString(i),c=[new Vr((n[0]+n[1])/2,e),new Vr(s,e)],u=new bl(i,null,0,c,Zr.UPC_EAN_EXTENSION,new Date().getTime());return l!=null&&u.putAllMetadata(l),u},t.prototype.decodeMiddle=function(e,r,n){var a,s,i=this.decodeMiddleCounters;i[0]=0,i[1]=0,i[2]=0,i[3]=0;for(var l=e.getSize(),c=r[1],u=0,d=0;d<5&&c<l;d++){var f=cv.decodeDigit(e,i,c,cv.L_AND_G_PATTERNS);n+=String.fromCharCode(48+f%10);try{for(var h=(a=void 0,C4e(i)),A=h.next();!A.done;A=h.next()){var m=A.value;c+=m}}catch(g){a={error:g}}finally{try{A&&!A.done&&(s=h.return)&&s.call(h)}finally{if(a)throw a.error}}f>=10&&(u|=1<<4-d),d!==4&&(c=e.getNextSet(c),c=e.getNextUnset(c))}if(n.length!==5)throw new Wt;var p=this.determineCheckDigit(u);if(t.extensionChecksum(n.toString())!==p)throw new Wt;return c},t.extensionChecksum=function(e){for(var r=e.length,n=0,a=r-2;a>=0;a-=2)n+=e.charAt(a).charCodeAt(0)-48;n*=3;for(var a=r-1;a>=0;a-=2)n+=e.charAt(a).charCodeAt(0)-48;return n*=3,n%10},t.prototype.determineCheckDigit=function(e){for(var r=0;r<10;r++)if(e===this.CHECK_DIGIT_ENCODINGS[r])return r;throw new Wt},t.parseExtensionString=function(e){if(e.length!==5)return null;var r=t.parseExtension5String(e);return r==null?null:new Map([[$o.SUGGESTED_PRICE,r]])},t.parseExtension5String=function(e){var r;switch(e.charAt(0)){case"0":r="";break;case"5":r="$";break;case"9":switch(e){case"90000":return null;case"99991":return"0.00";case"99990":return"Used"}r="";break;default:r="";break}var n=parseInt(e.substring(1)),a=(n/100).toString(),s=n%100,i=s<10?"0"+s:s.toString();return r+a+"."+i},t}(),E4e=function(t){var e=typeof Symbol=="function"&&Symbol.iterator,r=e&&t[e],n=0;if(r)return r.call(t);if(t&&typeof t.length=="number")return{next:function(){return t&&n>=t.length&&(t=void 0),{value:t&&t[n++],done:!t}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")},S4e=function(){function t(){this.decodeMiddleCounters=Int32Array.from([0,0,0,0]),this.decodeRowStringBuffer=""}return t.prototype.decodeRow=function(e,r,n){var a=this.decodeRowStringBuffer,s=this.decodeMiddle(r,n,a),i=a.toString(),l=t.parseExtensionString(i),c=[new Vr((n[0]+n[1])/2,e),new Vr(s,e)],u=new bl(i,null,0,c,Zr.UPC_EAN_EXTENSION,new Date().getTime());return l!=null&&u.putAllMetadata(l),u},t.prototype.decodeMiddle=function(e,r,n){var a,s,i=this.decodeMiddleCounters;i[0]=0,i[1]=0,i[2]=0,i[3]=0;for(var l=e.getSize(),c=r[1],u=0,d=0;d<2&&c<l;d++){var f=cv.decodeDigit(e,i,c,cv.L_AND_G_PATTERNS);n+=String.fromCharCode(48+f%10);try{for(var h=(a=void 0,E4e(i)),A=h.next();!A.done;A=h.next()){var m=A.value;c+=m}}catch(p){a={error:p}}finally{try{A&&!A.done&&(s=h.return)&&s.call(h)}finally{if(a)throw a.error}}f>=10&&(u|=1<<1-d),d!==1&&(c=e.getNextSet(c),c=e.getNextUnset(c))}if(n.length!==2)throw new Wt;if(parseInt(n.toString())%4!==u)throw new Wt;return c},t.parseExtensionString=function(e){return e.length!==2?null:new Map([[$o.ISSUE_NUMBER,parseInt(e)]])},t}(),I4e=function(){function t(){}return t.decodeRow=function(e,r,n){var a=cv.findGuardPattern(r,n,!1,this.EXTENSION_START_PATTERN,new Int32Array(this.EXTENSION_START_PATTERN.length).fill(0));try{var s=new _4e;return s.decodeRow(e,r,a)}catch{var i=new S4e;return i.decodeRow(e,r,a)}},t.EXTENSION_START_PATTERN=Int32Array.from([1,1,2]),t}(),j4e=function(){var t=function(e,r){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,a){n.__proto__=a}||function(n,a){for(var s in a)a.hasOwnProperty(s)&&(n[s]=a[s])},t(e,r)};return function(e,r){t(e,r);function n(){this.constructor=e}e.prototype=r===null?Object.create(r):(n.prototype=r.prototype,new n)}}(),Oi=function(t){j4e(e,t);function e(){var r=t.call(this)||this;r.decodeRowStringBuffer="",e.L_AND_G_PATTERNS=e.L_PATTERNS.map(function(l){return Int32Array.from(l)});for(var n=10;n<20;n++){for(var a=e.L_PATTERNS[n-10],s=new Int32Array(a.length),i=0;i<a.length;i++)s[i]=a[a.length-i-1];e.L_AND_G_PATTERNS[n]=s}return r}return e.prototype.decodeRow=function(r,n,a){var s=e.findStartGuardPattern(n),i=a==null?null:a.get(Ga.NEED_RESULT_POINT_CALLBACK);if(i!=null){var l=new Vr((s[0]+s[1])/2,r);i.foundPossibleResultPoint(l)}var c=this.decodeMiddle(n,s,this.decodeRowStringBuffer),u=c.rowOffset,d=c.resultString;if(i!=null){var f=new Vr(u,r);i.foundPossibleResultPoint(f)}var h=e.decodeEnd(n,u);if(i!=null){var A=new Vr((h[0]+h[1])/2,r);i.foundPossibleResultPoint(A)}var m=h[1],p=m+(m-h[0]);if(p>=n.getSize()||!n.isRange(m,p,!1))throw new Wt;var g=d.toString();if(g.length<8)throw new Nr;if(!e.checkChecksum(g))throw new bi;var x=(s[1]+s[0])/2,y=(h[1]+h[0])/2,b=this.getBarcodeFormat(),w=[new Vr(x,r),new Vr(y,r)],j=new bl(g,null,0,w,b,new Date().getTime()),I=0;try{var _=I4e.decodeRow(r,n,h[1]);j.putMetadata($o.UPC_EAN_EXTENSION,_.getText()),j.putAllMetadata(_.getResultMetadata()),j.addResultPoints(_.getResultPoints()),I=_.getText().length}catch{}var E=a==null?null:a.get(Ga.ALLOWED_EAN_EXTENSIONS);if(E!=null){var S=!1;for(var k in E)if(I.toString()===k){S=!0;break}if(!S)throw new Wt}return b===Zr.EAN_13||Zr.UPC_A,j},e.checkChecksum=function(r){return e.checkStandardUPCEANChecksum(r)},e.checkStandardUPCEANChecksum=function(r){var n=r.length;if(n===0)return!1;var a=parseInt(r.charAt(n-1),10);return e.getStandardUPCEANChecksum(r.substring(0,n-1))===a},e.getStandardUPCEANChecksum=function(r){for(var n=r.length,a=0,s=n-1;s>=0;s-=2){var i=r.charAt(s).charCodeAt(0)-48;if(i<0||i>9)throw new Nr;a+=i}a*=3;for(var s=n-2;s>=0;s-=2){var i=r.charAt(s).charCodeAt(0)-48;if(i<0||i>9)throw new Nr;a+=i}return(1e3-a)%10},e.decodeEnd=function(r,n){return e.findGuardPattern(r,n,!1,e.START_END_PATTERN,new Int32Array(e.START_END_PATTERN.length).fill(0))},e}(cv),B4e=function(){var t=function(e,r){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,a){n.__proto__=a}||function(n,a){for(var s in a)a.hasOwnProperty(s)&&(n[s]=a[s])},t(e,r)};return function(e,r){t(e,r);function n(){this.constructor=e}e.prototype=r===null?Object.create(r):(n.prototype=r.prototype,new n)}}(),iV=function(t){var e=typeof Symbol=="function"&&Symbol.iterator,r=e&&t[e],n=0;if(r)return r.call(t);if(t&&typeof t.length=="number")return{next:function(){return t&&n>=t.length&&(t=void 0),{value:t&&t[n++],done:!t}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")},ek=function(t){B4e(e,t);function e(){var r=t.call(this)||this;return r.decodeMiddleCounters=Int32Array.from([0,0,0,0]),r}return e.prototype.decodeMiddle=function(r,n,a){var s,i,l,c,u=this.decodeMiddleCounters;u[0]=0,u[1]=0,u[2]=0,u[3]=0;for(var d=r.getSize(),f=n[1],h=0,A=0;A<6&&f<d;A++){var m=Oi.decodeDigit(r,u,f,Oi.L_AND_G_PATTERNS);a+=String.fromCharCode(48+m%10);try{for(var p=(s=void 0,iV(u)),g=p.next();!g.done;g=p.next()){var x=g.value;f+=x}}catch(j){s={error:j}}finally{try{g&&!g.done&&(i=p.return)&&i.call(p)}finally{if(s)throw s.error}}m>=10&&(h|=1<<5-A)}a=e.determineFirstDigit(a,h);var y=Oi.findGuardPattern(r,f,!0,Oi.MIDDLE_PATTERN,new Int32Array(Oi.MIDDLE_PATTERN.length).fill(0));f=y[1];for(var A=0;A<6&&f<d;A++){var m=Oi.decodeDigit(r,u,f,Oi.L_PATTERNS);a+=String.fromCharCode(48+m);try{for(var b=(l=void 0,iV(u)),w=b.next();!w.done;w=b.next()){var x=w.value;f+=x}}catch(_){l={error:_}}finally{try{w&&!w.done&&(c=b.return)&&c.call(b)}finally{if(l)throw l.error}}}return{rowOffset:f,resultString:a}},e.prototype.getBarcodeFormat=function(){return Zr.EAN_13},e.determineFirstDigit=function(r,n){for(var a=0;a<10;a++)if(n===this.FIRST_DIGIT_ENCODINGS[a])return r=String.fromCharCode(48+a)+r,r;throw new Wt},e.FIRST_DIGIT_ENCODINGS=[0,11,13,14,19,25,28,21,22,26],e}(Oi),P4e=function(){var t=function(e,r){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,a){n.__proto__=a}||function(n,a){for(var s in a)a.hasOwnProperty(s)&&(n[s]=a[s])},t(e,r)};return function(e,r){t(e,r);function n(){this.constructor=e}e.prototype=r===null?Object.create(r):(n.prototype=r.prototype,new n)}}(),oV=function(t){var e=typeof Symbol=="function"&&Symbol.iterator,r=e&&t[e],n=0;if(r)return r.call(t);if(t&&typeof t.length=="number")return{next:function(){return t&&n>=t.length&&(t=void 0),{value:t&&t[n++],done:!t}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")},lV=function(t){P4e(e,t);function e(){var r=t.call(this)||this;return r.decodeMiddleCounters=Int32Array.from([0,0,0,0]),r}return e.prototype.decodeMiddle=function(r,n,a){var s,i,l,c,u=this.decodeMiddleCounters;u[0]=0,u[1]=0,u[2]=0,u[3]=0;for(var d=r.getSize(),f=n[1],h=0;h<4&&f<d;h++){var A=Oi.decodeDigit(r,u,f,Oi.L_PATTERNS);a+=String.fromCharCode(48+A);try{for(var m=(s=void 0,oV(u)),p=m.next();!p.done;p=m.next()){var g=p.value;f+=g}}catch(w){s={error:w}}finally{try{p&&!p.done&&(i=m.return)&&i.call(m)}finally{if(s)throw s.error}}}var x=Oi.findGuardPattern(r,f,!0,Oi.MIDDLE_PATTERN,new Int32Array(Oi.MIDDLE_PATTERN.length).fill(0));f=x[1];for(var h=0;h<4&&f<d;h++){var A=Oi.decodeDigit(r,u,f,Oi.L_PATTERNS);a+=String.fromCharCode(48+A);try{for(var y=(l=void 0,oV(u)),b=y.next();!b.done;b=y.next()){var g=b.value;f+=g}}catch(I){l={error:I}}finally{try{b&&!b.done&&(c=y.return)&&c.call(y)}finally{if(l)throw l.error}}}return{rowOffset:f,resultString:a}},e.prototype.getBarcodeFormat=function(){return Zr.EAN_8},e}(Oi),T4e=function(){var t=function(e,r){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,a){n.__proto__=a}||function(n,a){for(var s in a)a.hasOwnProperty(s)&&(n[s]=a[s])},t(e,r)};return function(e,r){t(e,r);function n(){this.constructor=e}e.prototype=r===null?Object.create(r):(n.prototype=r.prototype,new n)}}(),cV=function(t){T4e(e,t);function e(){var r=t!==null&&t.apply(this,arguments)||this;return r.ean13Reader=new ek,r}return e.prototype.getBarcodeFormat=function(){return Zr.UPC_A},e.prototype.decode=function(r,n){return this.maybeReturnResult(this.ean13Reader.decode(r))},e.prototype.decodeRow=function(r,n,a){return this.maybeReturnResult(this.ean13Reader.decodeRow(r,n,a))},e.prototype.decodeMiddle=function(r,n,a){return this.ean13Reader.decodeMiddle(r,n,a)},e.prototype.maybeReturnResult=function(r){var n=r.getText();if(n.charAt(0)==="0"){var a=new bl(n.substring(1),null,null,r.getResultPoints(),Zr.UPC_A);return r.getResultMetadata()!=null&&a.putAllMetadata(r.getResultMetadata()),a}else throw new Wt},e.prototype.reset=function(){this.ean13Reader.reset()},e}(Oi),k4e=function(){var t=function(e,r){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,a){n.__proto__=a}||function(n,a){for(var s in a)a.hasOwnProperty(s)&&(n[s]=a[s])},t(e,r)};return function(e,r){t(e,r);function n(){this.constructor=e}e.prototype=r===null?Object.create(r):(n.prototype=r.prototype,new n)}}(),F4e=function(t){var e=typeof Symbol=="function"&&Symbol.iterator,r=e&&t[e],n=0;if(r)return r.call(t);if(t&&typeof t.length=="number")return{next:function(){return t&&n>=t.length&&(t=void 0),{value:t&&t[n++],done:!t}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")},uV=function(t){k4e(e,t);function e(){var r=t.call(this)||this;return r.decodeMiddleCounters=new Int32Array(4),r}return e.prototype.decodeMiddle=function(r,n,a){var s,i,l=this.decodeMiddleCounters.map(function(g){return g});l[0]=0,l[1]=0,l[2]=0,l[3]=0;for(var c=r.getSize(),u=n[1],d=0,f=0;f<6&&u<c;f++){var h=e.decodeDigit(r,l,u,e.L_AND_G_PATTERNS);a+=String.fromCharCode(48+h%10);try{for(var A=(s=void 0,F4e(l)),m=A.next();!m.done;m=A.next()){var p=m.value;u+=p}}catch(g){s={error:g}}finally{try{m&&!m.done&&(i=A.return)&&i.call(A)}finally{if(s)throw s.error}}h>=10&&(d|=1<<5-f)}return e.determineNumSysAndCheckDigit(new _n(a),d),u},e.prototype.decodeEnd=function(r,n){return e.findGuardPatternWithoutCounters(r,n,!0,e.MIDDLE_END_PATTERN)},e.prototype.checkChecksum=function(r){return Oi.checkChecksum(e.convertUPCEtoUPCA(r))},e.determineNumSysAndCheckDigit=function(r,n){for(var a=0;a<=1;a++)for(var s=0;s<10;s++)if(n===this.NUMSYS_AND_CHECK_DIGIT_PATTERNS[a][s]){r.insert(0,"0"+a),r.append("0"+s);return}throw Wt.getNotFoundInstance()},e.prototype.getBarcodeFormat=function(){return Zr.UPC_E},e.convertUPCEtoUPCA=function(r){var n=r.slice(1,7).split("").map(function(i){return i.charCodeAt(0)}),a=new _n;a.append(r.charAt(0));var s=n[5];switch(s){case 0:case 1:case 2:a.appendChars(n,0,2),a.append(s),a.append("0000"),a.appendChars(n,2,3);break;case 3:a.appendChars(n,0,3),a.append("00000"),a.appendChars(n,3,2);break;case 4:a.appendChars(n,0,4),a.append("00000"),a.append(n[4]);break;default:a.appendChars(n,0,5),a.append("0000"),a.append(s);break}return r.length>=8&&a.append(r.charAt(7)),a.toString()},e.MIDDLE_END_PATTERN=Int32Array.from([1,1,1,1,1,1]),e.NUMSYS_AND_CHECK_DIGIT_PATTERNS=[Int32Array.from([56,52,50,49,44,38,35,42,41,37]),Int32Array.from([7,11,13,14,19,25,28,21,22,1])],e}(Oi),O4e=function(){var t=function(e,r){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,a){n.__proto__=a}||function(n,a){for(var s in a)a.hasOwnProperty(s)&&(n[s]=a[s])},t(e,r)};return function(e,r){t(e,r);function n(){this.constructor=e}e.prototype=r===null?Object.create(r):(n.prototype=r.prototype,new n)}}(),dV=function(t){var e=typeof Symbol=="function"&&Symbol.iterator,r=e&&t[e],n=0;if(r)return r.call(t);if(t&&typeof t.length=="number")return{next:function(){return t&&n>=t.length&&(t=void 0),{value:t&&t[n++],done:!t}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")},L5=function(t){O4e(e,t);function e(r){var n=t.call(this)||this,a=r==null?null:r.get(Ga.POSSIBLE_FORMATS),s=[];return a!=null&&(a.indexOf(Zr.EAN_13)>-1&&s.push(new ek),a.indexOf(Zr.UPC_A)>-1&&s.push(new cV),a.indexOf(Zr.EAN_8)>-1&&s.push(new lV),a.indexOf(Zr.UPC_E)>-1&&s.push(new uV)),s.length===0&&(s.push(new ek),s.push(new cV),s.push(new lV),s.push(new uV)),n.readers=s,n}return e.prototype.decodeRow=function(r,n,a){var s,i;try{for(var l=dV(this.readers),c=l.next();!c.done;c=l.next()){var u=c.value;try{var d=u.decodeRow(r,n,a),f=d.getBarcodeFormat()===Zr.EAN_13&&d.getText().charAt(0)==="0",h=a==null?null:a.get(Ga.POSSIBLE_FORMATS),A=h==null||h.includes(Zr.UPC_A);if(f&&A){var m=d.getRawBytes(),p=new bl(d.getText().substring(1),m,m?m.length:null,d.getResultPoints(),Zr.UPC_A);return p.putAllMetadata(d.getResultMetadata()),p}return d}catch{}}}catch(g){s={error:g}}finally{try{c&&!c.done&&(i=l.return)&&i.call(l)}finally{if(s)throw s.error}}throw new Wt},e.prototype.reset=function(){var r,n;try{for(var a=dV(this.readers),s=a.next();!s.done;s=a.next()){var i=s.value;i.reset()}}catch(l){r={error:l}}finally{try{s&&!s.done&&(n=a.return)&&n.call(a)}finally{if(r)throw r.error}}},e}($i),D4e=function(){var t=function(e,r){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,a){n.__proto__=a}||function(n,a){for(var s in a)a.hasOwnProperty(s)&&(n[s]=a[s])},t(e,r)};return function(e,r){t(e,r);function n(){this.constructor=e}e.prototype=r===null?Object.create(r):(n.prototype=r.prototype,new n)}}(),R4e=function(t){D4e(e,t);function e(){var r=t!==null&&t.apply(this,arguments)||this;return r.CODA_BAR_CHAR_SET={nnnnnww:"0",nnnnwwn:"1",nnnwnnw:"2",wwnnnnn:"3",nnwnnwn:"4",wnnnnwn:"5",nwnnnnw:"6",nwnnwnn:"7",nwwnnnn:"8",wnnwnnn:"9",nnnwwnn:"-",nnwwnnn:"$",wnnnwnw:":",wnwnnnw:"/",wnwnwnn:".",nnwwwww:"+",nnwwnwn:"A",nwnwnnw:"B",nnnwnww:"C",nnnwwwn:"D"},r}return e.prototype.decodeRow=function(r,n,a){var s=this.getValidRowData(n);if(!s)throw new Wt;var i=this.codaBarDecodeRow(s.row);if(!i)throw new Wt;return new bl(i,null,0,[new Vr(s.left,r),new Vr(s.right,r)],Zr.CODABAR,new Date().getTime())},e.prototype.getValidRowData=function(r){var n=r.toArray(),a=n.indexOf(!0);if(a===-1)return null;var s=n.lastIndexOf(!0);if(s<=a)return null;n=n.slice(a,s+1);for(var i=[],l=n[0],c=1,u=1;u<n.length;u++)n[u]===l?c++:(l=n[u],i.push(c),c=1);return i.push(c),i.length<23&&(i.length+1)%8!==0?null:{row:i,left:a,right:s}},e.prototype.codaBarDecodeRow=function(r){for(var n=[],a=Math.ceil(r.reduce(function(c,u){return(c+u)/2},0));r.length>0;){var s=r.splice(0,8).splice(0,7),i=s.map(function(c){return c<a?"n":"w"}).join("");if(this.CODA_BAR_CHAR_SET[i]===void 0)return null;n.push(this.CODA_BAR_CHAR_SET[i])}var l=n.join("");return this.validCodaBarString(l)?l:null},e.prototype.validCodaBarString=function(r){var n=/^[A-D].{1,}[A-D]$/;return n.test(r)},e}($i),M4e=function(){var t=function(e,r){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,a){n.__proto__=a}||function(n,a){for(var s in a)a.hasOwnProperty(s)&&(n[s]=a[s])},t(e,r)};return function(e,r){t(e,r);function n(){this.constructor=e}e.prototype=r===null?Object.create(r):(n.prototype=r.prototype,new n)}}(),L4e=function(t){var e=typeof Symbol=="function"&&Symbol.iterator,r=e&&t[e],n=0;if(r)return r.call(t);if(t&&typeof t.length=="number")return{next:function(){return t&&n>=t.length&&(t=void 0),{value:t&&t[n++],done:!t}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")},Tm=function(t){M4e(e,t);function e(){var r=t.call(this)||this;return r.decodeFinderCounters=new Int32Array(4),r.dataCharacterCounters=new Int32Array(8),r.oddRoundingErrors=new Array(4),r.evenRoundingErrors=new Array(4),r.oddCounts=new Array(r.dataCharacterCounters.length/2),r.evenCounts=new Array(r.dataCharacterCounters.length/2),r}return e.prototype.getDecodeFinderCounters=function(){return this.decodeFinderCounters},e.prototype.getDataCharacterCounters=function(){return this.dataCharacterCounters},e.prototype.getOddRoundingErrors=function(){return this.oddRoundingErrors},e.prototype.getEvenRoundingErrors=function(){return this.evenRoundingErrors},e.prototype.getOddCounts=function(){return this.oddCounts},e.prototype.getEvenCounts=function(){return this.evenCounts},e.prototype.parseFinderValue=function(r,n){for(var a=0;a<n.length;a++)if($i.patternMatchVariance(r,n[a],e.MAX_INDIVIDUAL_VARIANCE)<e.MAX_AVG_VARIANCE)return a;throw new Wt},e.count=function(r){return Zn.sum(new Int32Array(r))},e.increment=function(r,n){for(var a=0,s=n[0],i=1;i<r.length;i++)n[i]>s&&(s=n[i],a=i);r[a]++},e.decrement=function(r,n){for(var a=0,s=n[0],i=1;i<r.length;i++)n[i]<s&&(s=n[i],a=i);r[a]--},e.isFinderPattern=function(r){var n,a,s=r[0]+r[1],i=s+r[2]+r[3],l=s/i;if(l>=e.MIN_FINDER_PATTERN_RATIO&&l<=e.MAX_FINDER_PATTERN_RATIO){var c=Number.MAX_SAFE_INTEGER,u=Number.MIN_SAFE_INTEGER;try{for(var d=L4e(r),f=d.next();!f.done;f=d.next()){var h=f.value;h>u&&(u=h),h<c&&(c=h)}}catch(A){n={error:A}}finally{try{f&&!f.done&&(a=d.return)&&a.call(d)}finally{if(n)throw n.error}}return u<10*c}return!1},e.MAX_AVG_VARIANCE=.2,e.MAX_INDIVIDUAL_VARIANCE=.45,e.MIN_FINDER_PATTERN_RATIO=9.5/12,e.MAX_FINDER_PATTERN_RATIO=12.5/14,e}($i),aS=function(){function t(e,r){this.value=e,this.checksumPortion=r}return t.prototype.getValue=function(){return this.value},t.prototype.getChecksumPortion=function(){return this.checksumPortion},t.prototype.toString=function(){return this.value+"("+this.checksumPortion+")"},t.prototype.equals=function(e){if(!(e instanceof t))return!1;var r=e;return this.value===r.value&&this.checksumPortion===r.checksumPortion},t.prototype.hashCode=function(){return this.value^this.checksumPortion},t}(),gte=function(){function t(e,r,n,a,s){this.value=e,this.startEnd=r,this.value=e,this.startEnd=r,this.resultPoints=new Array,this.resultPoints.push(new Vr(n,s)),this.resultPoints.push(new Vr(a,s))}return t.prototype.getValue=function(){return this.value},t.prototype.getStartEnd=function(){return this.startEnd},t.prototype.getResultPoints=function(){return this.resultPoints},t.prototype.equals=function(e){if(!(e instanceof t))return!1;var r=e;return this.value===r.value},t.prototype.hashCode=function(){return this.value},t}(),U4e=function(t){var e=typeof Symbol=="function"&&Symbol.iterator,r=e&&t[e],n=0;if(r)return r.call(t);if(t&&typeof t.length=="number")return{next:function(){return t&&n>=t.length&&(t=void 0),{value:t&&t[n++],done:!t}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")},bx=function(){function t(){}return t.getRSSvalue=function(e,r,n){var a,s,i=0;try{for(var l=U4e(e),c=l.next();!c.done;c=l.next()){var u=c.value;i+=u}}catch(y){a={error:y}}finally{try{c&&!c.done&&(s=l.return)&&s.call(l)}finally{if(a)throw a.error}}for(var d=0,f=0,h=e.length,A=0;A<h-1;A++){var m=void 0;for(m=1,f|=1<<A;m<e[A];m++,f&=~(1<<A)){var p=t.combins(i-m-1,h-A-2);if(n&&f===0&&i-m-(h-A-1)>=h-A-1&&(p-=t.combins(i-m-(h-A),h-A-2)),h-A-1>1){for(var g=0,x=i-m-(h-A-2);x>r;x--)g+=t.combins(i-m-x-1,h-A-3);p-=g*(h-1-A)}else i-m>r&&p--;d+=p}i-=m}return d},t.combins=function(e,r){var n,a;e-r>r?(a=r,n=e-r):(a=e-r,n=r);for(var s=1,i=1,l=e;l>n;l--)s*=l,i<=a&&(s/=i,i++);for(;i<=a;)s/=i,i++;return s},t}(),Q4e=function(){function t(){}return t.buildBitArray=function(e){var r=e.length*2-1;e[e.length-1].getRightChar()==null&&(r-=1);for(var n=12*r,a=new Ao(n),s=0,i=e[0],l=i.getRightChar().getValue(),c=11;c>=0;--c)l&1<<c&&a.set(s),s++;for(var c=1;c<e.length;++c){for(var u=e[c],d=u.getLeftChar().getValue(),f=11;f>=0;--f)d&1<<f&&a.set(s),s++;if(u.getRightChar()!==null)for(var h=u.getRightChar().getValue(),f=11;f>=0;--f)h&1<<f&&a.set(s),s++}return a},t}(),ym=function(){function t(e,r){r?this.decodedInformation=null:(this.finished=e,this.decodedInformation=r)}return t.prototype.getDecodedInformation=function(){return this.decodedInformation},t.prototype.isFinished=function(){return this.finished},t}(),V6=function(){function t(e){this.newPosition=e}return t.prototype.getNewPosition=function(){return this.newPosition},t}(),V4e=function(){var t=function(e,r){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,a){n.__proto__=a}||function(n,a){for(var s in a)a.hasOwnProperty(s)&&(n[s]=a[s])},t(e,r)};return function(e,r){t(e,r);function n(){this.constructor=e}e.prototype=r===null?Object.create(r):(n.prototype=r.prototype,new n)}}(),ud=function(t){V4e(e,t);function e(r,n){var a=t.call(this,r)||this;return a.value=n,a}return e.prototype.getValue=function(){return this.value},e.prototype.isFNC1=function(){return this.value===e.FNC1},e.FNC1="$",e}(V6),H4e=function(){var t=function(e,r){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,a){n.__proto__=a}||function(n,a){for(var s in a)a.hasOwnProperty(s)&&(n[s]=a[s])},t(e,r)};return function(e,r){t(e,r);function n(){this.constructor=e}e.prototype=r===null?Object.create(r):(n.prototype=r.prototype,new n)}}(),bm=function(t){H4e(e,t);function e(r,n,a){var s=t.call(this,r)||this;return a?(s.remaining=!0,s.remainingValue=s.remainingValue):(s.remaining=!1,s.remainingValue=0),s.newString=n,s}return e.prototype.getNewString=function(){return this.newString},e.prototype.isRemaining=function(){return this.remaining},e.prototype.getRemainingValue=function(){return this.remainingValue},e}(V6),$4e=function(){var t=function(e,r){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,a){n.__proto__=a}||function(n,a){for(var s in a)a.hasOwnProperty(s)&&(n[s]=a[s])},t(e,r)};return function(e,r){t(e,r);function n(){this.constructor=e}e.prototype=r===null?Object.create(r):(n.prototype=r.prototype,new n)}}(),Qg=function(t){$4e(e,t);function e(r,n,a){var s=t.call(this,r)||this;if(n<0||n>10||a<0||a>10)throw new Nr;return s.firstDigit=n,s.secondDigit=a,s}return e.prototype.getFirstDigit=function(){return this.firstDigit},e.prototype.getSecondDigit=function(){return this.secondDigit},e.prototype.getValue=function(){return this.firstDigit*10+this.secondDigit},e.prototype.isFirstDigitFNC1=function(){return this.firstDigit===e.FNC1},e.prototype.isSecondDigitFNC1=function(){return this.secondDigit===e.FNC1},e.prototype.isAnyFNC1=function(){return this.firstDigit===e.FNC1||this.secondDigit===e.FNC1},e.FNC1=10,e}(V6),xC=function(t){var e=typeof Symbol=="function"&&Symbol.iterator,r=e&&t[e],n=0;if(r)return r.call(t);if(t&&typeof t.length=="number")return{next:function(){return t&&n>=t.length&&(t=void 0),{value:t&&t[n++],done:!t}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")},K4e=function(){function t(){}return t.parseFieldsInGeneralPurpose=function(e){var r,n,a,s,i,l,c,u;if(!e)return null;if(e.length<2)throw new Wt;var d=e.substring(0,2);try{for(var f=xC(t.TWO_DIGIT_DATA_LENGTH),h=f.next();!h.done;h=f.next()){var A=h.value;if(A[0]===d)return A[1]===t.VARIABLE_LENGTH?t.processVariableAI(2,A[2],e):t.processFixedAI(2,A[1],e)}}catch(I){r={error:I}}finally{try{h&&!h.done&&(n=f.return)&&n.call(f)}finally{if(r)throw r.error}}if(e.length<3)throw new Wt;var m=e.substring(0,3);try{for(var p=xC(t.THREE_DIGIT_DATA_LENGTH),g=p.next();!g.done;g=p.next()){var A=g.value;if(A[0]===m)return A[1]===t.VARIABLE_LENGTH?t.processVariableAI(3,A[2],e):t.processFixedAI(3,A[1],e)}}catch(I){a={error:I}}finally{try{g&&!g.done&&(s=p.return)&&s.call(p)}finally{if(a)throw a.error}}try{for(var x=xC(t.THREE_DIGIT_PLUS_DIGIT_DATA_LENGTH),y=x.next();!y.done;y=x.next()){var A=y.value;if(A[0]===m)return A[1]===t.VARIABLE_LENGTH?t.processVariableAI(4,A[2],e):t.processFixedAI(4,A[1],e)}}catch(I){i={error:I}}finally{try{y&&!y.done&&(l=x.return)&&l.call(x)}finally{if(i)throw i.error}}if(e.length<4)throw new Wt;var b=e.substring(0,4);try{for(var w=xC(t.FOUR_DIGIT_DATA_LENGTH),j=w.next();!j.done;j=w.next()){var A=j.value;if(A[0]===b)return A[1]===t.VARIABLE_LENGTH?t.processVariableAI(4,A[2],e):t.processFixedAI(4,A[1],e)}}catch(I){c={error:I}}finally{try{j&&!j.done&&(u=w.return)&&u.call(w)}finally{if(c)throw c.error}}throw new Wt},t.processFixedAI=function(e,r,n){if(n.length<e)throw new Wt;var a=n.substring(0,e);if(n.length<e+r)throw new Wt;var s=n.substring(e,e+r),i=n.substring(e+r),l="("+a+")"+s,c=t.parseFieldsInGeneralPurpose(i);return c==null?l:l+c},t.processVariableAI=function(e,r,n){var a=n.substring(0,e),s;n.length<e+r?s=n.length:s=e+r;var i=n.substring(e,s),l=n.substring(s),c="("+a+")"+i,u=t.parseFieldsInGeneralPurpose(l);return u==null?c:c+u},t.VARIABLE_LENGTH=[],t.TWO_DIGIT_DATA_LENGTH=[["00",18],["01",14],["02",14],["10",t.VARIABLE_LENGTH,20],["11",6],["12",6],["13",6],["15",6],["17",6],["20",2],["21",t.VARIABLE_LENGTH,20],["22",t.VARIABLE_LENGTH,29],["30",t.VARIABLE_LENGTH,8],["37",t.VARIABLE_LENGTH,8],["90",t.VARIABLE_LENGTH,30],["91",t.VARIABLE_LENGTH,30],["92",t.VARIABLE_LENGTH,30],["93",t.VARIABLE_LENGTH,30],["94",t.VARIABLE_LENGTH,30],["95",t.VARIABLE_LENGTH,30],["96",t.VARIABLE_LENGTH,30],["97",t.VARIABLE_LENGTH,3],["98",t.VARIABLE_LENGTH,30],["99",t.VARIABLE_LENGTH,30]],t.THREE_DIGIT_DATA_LENGTH=[["240",t.VARIABLE_LENGTH,30],["241",t.VARIABLE_LENGTH,30],["242",t.VARIABLE_LENGTH,6],["250",t.VARIABLE_LENGTH,30],["251",t.VARIABLE_LENGTH,30],["253",t.VARIABLE_LENGTH,17],["254",t.VARIABLE_LENGTH,20],["400",t.VARIABLE_LENGTH,30],["401",t.VARIABLE_LENGTH,30],["402",17],["403",t.VARIABLE_LENGTH,30],["410",13],["411",13],["412",13],["413",13],["414",13],["420",t.VARIABLE_LENGTH,20],["421",t.VARIABLE_LENGTH,15],["422",3],["423",t.VARIABLE_LENGTH,15],["424",3],["425",3],["426",3]],t.THREE_DIGIT_PLUS_DIGIT_DATA_LENGTH=[["310",6],["311",6],["312",6],["313",6],["314",6],["315",6],["316",6],["320",6],["321",6],["322",6],["323",6],["324",6],["325",6],["326",6],["327",6],["328",6],["329",6],["330",6],["331",6],["332",6],["333",6],["334",6],["335",6],["336",6],["340",6],["341",6],["342",6],["343",6],["344",6],["345",6],["346",6],["347",6],["348",6],["349",6],["350",6],["351",6],["352",6],["353",6],["354",6],["355",6],["356",6],["357",6],["360",6],["361",6],["362",6],["363",6],["364",6],["365",6],["366",6],["367",6],["368",6],["369",6],["390",t.VARIABLE_LENGTH,15],["391",t.VARIABLE_LENGTH,18],["392",t.VARIABLE_LENGTH,15],["393",t.VARIABLE_LENGTH,18],["703",t.VARIABLE_LENGTH,30]],t.FOUR_DIGIT_DATA_LENGTH=[["7001",13],["7002",t.VARIABLE_LENGTH,30],["7003",10],["8001",14],["8002",t.VARIABLE_LENGTH,20],["8003",t.VARIABLE_LENGTH,30],["8004",t.VARIABLE_LENGTH,30],["8005",6],["8006",18],["8007",t.VARIABLE_LENGTH,30],["8008",t.VARIABLE_LENGTH,12],["8018",18],["8020",t.VARIABLE_LENGTH,25],["8100",6],["8101",10],["8102",2],["8110",t.VARIABLE_LENGTH,70],["8200",t.VARIABLE_LENGTH,70]],t}(),Q_=function(){function t(e){this.buffer=new _n,this.information=e}return t.prototype.decodeAllCodes=function(e,r){var n=r,a=null;do{var s=this.decodeGeneralPurposeField(n,a),i=K4e.parseFieldsInGeneralPurpose(s.getNewString());if(i!=null&&e.append(i),s.isRemaining()?a=""+s.getRemainingValue():a=null,n===s.getNewPosition())break;n=s.getNewPosition()}while(!0);return e.toString()},t.prototype.isStillNumeric=function(e){if(e+7>this.information.getSize())return e+4<=this.information.getSize();for(var r=e;r<e+3;++r)if(this.information.get(r))return!0;return this.information.get(e+3)},t.prototype.decodeNumeric=function(e){if(e+7>this.information.getSize()){var r=this.extractNumericValueFromBitArray(e,4);return r===0?new Qg(this.information.getSize(),Qg.FNC1,Qg.FNC1):new Qg(this.information.getSize(),r-1,Qg.FNC1)}var n=this.extractNumericValueFromBitArray(e,7),a=(n-8)/11,s=(n-8)%11;return new Qg(e+7,a,s)},t.prototype.extractNumericValueFromBitArray=function(e,r){return t.extractNumericValueFromBitArray(this.information,e,r)},t.extractNumericValueFromBitArray=function(e,r,n){for(var a=0,s=0;s<n;++s)e.get(r+s)&&(a|=1<<n-s-1);return a},t.prototype.decodeGeneralPurposeField=function(e,r){this.buffer.setLengthToZero(),r!=null&&this.buffer.append(r),this.current.setPosition(e);var n=this.parseBlocks();return n!=null&&n.isRemaining()?new bm(this.current.getPosition(),this.buffer.toString(),n.getRemainingValue()):new bm(this.current.getPosition(),this.buffer.toString())},t.prototype.parseBlocks=function(){var e,r;do{var n=this.current.getPosition();this.current.isAlpha()?(r=this.parseAlphaBlock(),e=r.isFinished()):this.current.isIsoIec646()?(r=this.parseIsoIec646Block(),e=r.isFinished()):(r=this.parseNumericBlock(),e=r.isFinished());var a=n!==this.current.getPosition();if(!a&&!e)break}while(!e);return r.getDecodedInformation()},t.prototype.parseNumericBlock=function(){for(;this.isStillNumeric(this.current.getPosition());){var e=this.decodeNumeric(this.current.getPosition());if(this.current.setPosition(e.getNewPosition()),e.isFirstDigitFNC1()){var r=void 0;return e.isSecondDigitFNC1()?r=new bm(this.current.getPosition(),this.buffer.toString()):r=new bm(this.current.getPosition(),this.buffer.toString(),e.getSecondDigit()),new ym(!0,r)}if(this.buffer.append(e.getFirstDigit()),e.isSecondDigitFNC1()){var r=new bm(this.current.getPosition(),this.buffer.toString());return new ym(!0,r)}this.buffer.append(e.getSecondDigit())}return this.isNumericToAlphaNumericLatch(this.current.getPosition())&&(this.current.setAlpha(),this.current.incrementPosition(4)),new ym(!1)},t.prototype.parseIsoIec646Block=function(){for(;this.isStillIsoIec646(this.current.getPosition());){var e=this.decodeIsoIec646(this.current.getPosition());if(this.current.setPosition(e.getNewPosition()),e.isFNC1()){var r=new bm(this.current.getPosition(),this.buffer.toString());return new ym(!0,r)}this.buffer.append(e.getValue())}return this.isAlphaOr646ToNumericLatch(this.current.getPosition())?(this.current.incrementPosition(3),this.current.setNumeric()):this.isAlphaTo646ToAlphaLatch(this.current.getPosition())&&(this.current.getPosition()+5<this.information.getSize()?this.current.incrementPosition(5):this.current.setPosition(this.information.getSize()),this.current.setAlpha()),new ym(!1)},t.prototype.parseAlphaBlock=function(){for(;this.isStillAlpha(this.current.getPosition());){var e=this.decodeAlphanumeric(this.current.getPosition());if(this.current.setPosition(e.getNewPosition()),e.isFNC1()){var r=new bm(this.current.getPosition(),this.buffer.toString());return new ym(!0,r)}this.buffer.append(e.getValue())}return this.isAlphaOr646ToNumericLatch(this.current.getPosition())?(this.current.incrementPosition(3),this.current.setNumeric()):this.isAlphaTo646ToAlphaLatch(this.current.getPosition())&&(this.current.getPosition()+5<this.information.getSize()?this.current.incrementPosition(5):this.current.setPosition(this.information.getSize()),this.current.setIsoIec646()),new ym(!1)},t.prototype.isStillIsoIec646=function(e){if(e+5>this.information.getSize())return!1;var r=this.extractNumericValueFromBitArray(e,5);if(r>=5&&r<16)return!0;if(e+7>this.information.getSize())return!1;var n=this.extractNumericValueFromBitArray(e,7);if(n>=64&&n<116)return!0;if(e+8>this.information.getSize())return!1;var a=this.extractNumericValueFromBitArray(e,8);return a>=232&&a<253},t.prototype.decodeIsoIec646=function(e){var r=this.extractNumericValueFromBitArray(e,5);if(r===15)return new ud(e+5,ud.FNC1);if(r>=5&&r<15)return new ud(e+5,"0"+(r-5));var n=this.extractNumericValueFromBitArray(e,7);if(n>=64&&n<90)return new ud(e+7,""+(n+1));if(n>=90&&n<116)return new ud(e+7,""+(n+7));var a=this.extractNumericValueFromBitArray(e,8),s;switch(a){case 232:s="!";break;case 233:s='"';break;case 234:s="%";break;case 235:s="&";break;case 236:s="'";break;case 237:s="(";break;case 238:s=")";break;case 239:s="*";break;case 240:s="+";break;case 241:s=",";break;case 242:s="-";break;case 243:s=".";break;case 244:s="/";break;case 245:s=":";break;case 246:s=";";break;case 247:s="<";break;case 248:s="=";break;case 249:s=">";break;case 250:s="?";break;case 251:s="_";break;case 252:s=" ";break;default:throw new Nr}return new ud(e+8,s)},t.prototype.isStillAlpha=function(e){if(e+5>this.information.getSize())return!1;var r=this.extractNumericValueFromBitArray(e,5);if(r>=5&&r<16)return!0;if(e+6>this.information.getSize())return!1;var n=this.extractNumericValueFromBitArray(e,6);return n>=16&&n<63},t.prototype.decodeAlphanumeric=function(e){var r=this.extractNumericValueFromBitArray(e,5);if(r===15)return new ud(e+5,ud.FNC1);if(r>=5&&r<15)return new ud(e+5,"0"+(r-5));var n=this.extractNumericValueFromBitArray(e,6);if(n>=32&&n<58)return new ud(e+6,""+(n+33));var a;switch(n){case 58:a="*";break;case 59:a=",";break;case 60:a="-";break;case 61:a=".";break;case 62:a="/";break;default:throw new iw("Decoding invalid alphanumeric value: "+n)}return new ud(e+6,a)},t.prototype.isAlphaTo646ToAlphaLatch=function(e){if(e+1>this.information.getSize())return!1;for(var r=0;r<5&&r+e<this.information.getSize();++r)if(r===2){if(!this.information.get(e+2))return!1}else if(this.information.get(e+r))return!1;return!0},t.prototype.isAlphaOr646ToNumericLatch=function(e){if(e+3>this.information.getSize())return!1;for(var r=e;r<e+3;++r)if(this.information.get(r))return!1;return!0},t.prototype.isNumericToAlphaNumericLatch=function(e){if(e+1>this.information.getSize())return!1;for(var r=0;r<4&&r+e<this.information.getSize();++r)if(this.information.get(e+r))return!1;return!0},t}(),xte=function(){function t(e){this.information=e,this.generalDecoder=new Q_(e)}return t.prototype.getInformation=function(){return this.information},t.prototype.getGeneralDecoder=function(){return this.generalDecoder},t}(),G4e=function(){var t=function(e,r){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,a){n.__proto__=a}||function(n,a){for(var s in a)a.hasOwnProperty(s)&&(n[s]=a[s])},t(e,r)};return function(e,r){t(e,r);function n(){this.constructor=e}e.prototype=r===null?Object.create(r):(n.prototype=r.prototype,new n)}}(),xd=function(t){G4e(e,t);function e(r){return t.call(this,r)||this}return e.prototype.encodeCompressedGtin=function(r,n){r.append("(01)");var a=r.length();r.append("9"),this.encodeCompressedGtinWithoutAI(r,n,a)},e.prototype.encodeCompressedGtinWithoutAI=function(r,n,a){for(var s=0;s<4;++s){var i=this.getGeneralDecoder().extractNumericValueFromBitArray(n+10*s,10);i/100===0&&r.append("0"),i/10===0&&r.append("0"),r.append(i)}e.appendCheckDigit(r,a)},e.appendCheckDigit=function(r,n){for(var a=0,s=0;s<13;s++){var i=r.charAt(s+n).charCodeAt(0)-48;a+=s&1?i:3*i}a=10-a%10,a===10&&(a=0),r.append(a)},e.GTIN_SIZE=40,e}(xte),q4e=function(){var t=function(e,r){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,a){n.__proto__=a}||function(n,a){for(var s in a)a.hasOwnProperty(s)&&(n[s]=a[s])},t(e,r)};return function(e,r){t(e,r);function n(){this.constructor=e}e.prototype=r===null?Object.create(r):(n.prototype=r.prototype,new n)}}(),z4e=function(t){q4e(e,t);function e(r){return t.call(this,r)||this}return e.prototype.parseInformation=function(){var r=new _n;r.append("(01)");var n=r.length(),a=this.getGeneralDecoder().extractNumericValueFromBitArray(e.HEADER_SIZE,4);return r.append(a),this.encodeCompressedGtinWithoutAI(r,e.HEADER_SIZE+4,n),this.getGeneralDecoder().decodeAllCodes(r,e.HEADER_SIZE+44)},e.HEADER_SIZE=4,e}(xd),W4e=function(){var t=function(e,r){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,a){n.__proto__=a}||function(n,a){for(var s in a)a.hasOwnProperty(s)&&(n[s]=a[s])},t(e,r)};return function(e,r){t(e,r);function n(){this.constructor=e}e.prototype=r===null?Object.create(r):(n.prototype=r.prototype,new n)}}(),X4e=function(t){W4e(e,t);function e(r){return t.call(this,r)||this}return e.prototype.parseInformation=function(){var r=new _n;return this.getGeneralDecoder().decodeAllCodes(r,e.HEADER_SIZE)},e.HEADER_SIZE=5,e}(xte),Y4e=function(){var t=function(e,r){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,a){n.__proto__=a}||function(n,a){for(var s in a)a.hasOwnProperty(s)&&(n[s]=a[s])},t(e,r)};return function(e,r){t(e,r);function n(){this.constructor=e}e.prototype=r===null?Object.create(r):(n.prototype=r.prototype,new n)}}(),V_=function(t){Y4e(e,t);function e(r){return t.call(this,r)||this}return e.prototype.encodeCompressedWeight=function(r,n,a){var s=this.getGeneralDecoder().extractNumericValueFromBitArray(n,a);this.addWeightCode(r,s);for(var i=this.checkWeight(s),l=1e5,c=0;c<5;++c)i/l===0&&r.append("0"),l/=10;r.append(i)},e}(xd),J4e=function(){var t=function(e,r){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,a){n.__proto__=a}||function(n,a){for(var s in a)a.hasOwnProperty(s)&&(n[s]=a[s])},t(e,r)};return function(e,r){t(e,r);function n(){this.constructor=e}e.prototype=r===null?Object.create(r):(n.prototype=r.prototype,new n)}}(),vte=function(t){J4e(e,t);function e(r){return t.call(this,r)||this}return e.prototype.parseInformation=function(){if(this.getInformation().getSize()!==e.HEADER_SIZE+V_.GTIN_SIZE+e.WEIGHT_SIZE)throw new Wt;var r=new _n;return this.encodeCompressedGtin(r,e.HEADER_SIZE),this.encodeCompressedWeight(r,e.HEADER_SIZE+V_.GTIN_SIZE,e.WEIGHT_SIZE),r.toString()},e.HEADER_SIZE=5,e.WEIGHT_SIZE=15,e}(V_),Z4e=function(){var t=function(e,r){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,a){n.__proto__=a}||function(n,a){for(var s in a)a.hasOwnProperty(s)&&(n[s]=a[s])},t(e,r)};return function(e,r){t(e,r);function n(){this.constructor=e}e.prototype=r===null?Object.create(r):(n.prototype=r.prototype,new n)}}(),e3e=function(t){Z4e(e,t);function e(r){return t.call(this,r)||this}return e.prototype.addWeightCode=function(r,n){r.append("(3103)")},e.prototype.checkWeight=function(r){return r},e}(vte),t3e=function(){var t=function(e,r){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,a){n.__proto__=a}||function(n,a){for(var s in a)a.hasOwnProperty(s)&&(n[s]=a[s])},t(e,r)};return function(e,r){t(e,r);function n(){this.constructor=e}e.prototype=r===null?Object.create(r):(n.prototype=r.prototype,new n)}}(),r3e=function(t){t3e(e,t);function e(r){return t.call(this,r)||this}return e.prototype.addWeightCode=function(r,n){n<1e4?r.append("(3202)"):r.append("(3203)")},e.prototype.checkWeight=function(r){return r<1e4?r:r-1e4},e}(vte),n3e=function(){var t=function(e,r){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,a){n.__proto__=a}||function(n,a){for(var s in a)a.hasOwnProperty(s)&&(n[s]=a[s])},t(e,r)};return function(e,r){t(e,r);function n(){this.constructor=e}e.prototype=r===null?Object.create(r):(n.prototype=r.prototype,new n)}}(),a3e=function(t){n3e(e,t);function e(r){return t.call(this,r)||this}return e.prototype.parseInformation=function(){if(this.getInformation().getSize()<e.HEADER_SIZE+xd.GTIN_SIZE)throw new Wt;var r=new _n;this.encodeCompressedGtin(r,e.HEADER_SIZE);var n=this.getGeneralDecoder().extractNumericValueFromBitArray(e.HEADER_SIZE+xd.GTIN_SIZE,e.LAST_DIGIT_SIZE);r.append("(392"),r.append(n),r.append(")");var a=this.getGeneralDecoder().decodeGeneralPurposeField(e.HEADER_SIZE+xd.GTIN_SIZE+e.LAST_DIGIT_SIZE,null);return r.append(a.getNewString()),r.toString()},e.HEADER_SIZE=8,e.LAST_DIGIT_SIZE=2,e}(xd),s3e=function(){var t=function(e,r){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,a){n.__proto__=a}||function(n,a){for(var s in a)a.hasOwnProperty(s)&&(n[s]=a[s])},t(e,r)};return function(e,r){t(e,r);function n(){this.constructor=e}e.prototype=r===null?Object.create(r):(n.prototype=r.prototype,new n)}}(),i3e=function(t){s3e(e,t);function e(r){return t.call(this,r)||this}return e.prototype.parseInformation=function(){if(this.getInformation().getSize()<e.HEADER_SIZE+xd.GTIN_SIZE)throw new Wt;var r=new _n;this.encodeCompressedGtin(r,e.HEADER_SIZE);var n=this.getGeneralDecoder().extractNumericValueFromBitArray(e.HEADER_SIZE+xd.GTIN_SIZE,e.LAST_DIGIT_SIZE);r.append("(393"),r.append(n),r.append(")");var a=this.getGeneralDecoder().extractNumericValueFromBitArray(e.HEADER_SIZE+xd.GTIN_SIZE+e.LAST_DIGIT_SIZE,e.FIRST_THREE_DIGITS_SIZE);a/100===0&&r.append("0"),a/10===0&&r.append("0"),r.append(a);var s=this.getGeneralDecoder().decodeGeneralPurposeField(e.HEADER_SIZE+xd.GTIN_SIZE+e.LAST_DIGIT_SIZE+e.FIRST_THREE_DIGITS_SIZE,null);return r.append(s.getNewString()),r.toString()},e.HEADER_SIZE=8,e.LAST_DIGIT_SIZE=2,e.FIRST_THREE_DIGITS_SIZE=10,e}(xd),o3e=function(){var t=function(e,r){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,a){n.__proto__=a}||function(n,a){for(var s in a)a.hasOwnProperty(s)&&(n[s]=a[s])},t(e,r)};return function(e,r){t(e,r);function n(){this.constructor=e}e.prototype=r===null?Object.create(r):(n.prototype=r.prototype,new n)}}(),Rh=function(t){o3e(e,t);function e(r,n,a){var s=t.call(this,r)||this;return s.dateCode=a,s.firstAIdigits=n,s}return e.prototype.parseInformation=function(){if(this.getInformation().getSize()!==e.HEADER_SIZE+e.GTIN_SIZE+e.WEIGHT_SIZE+e.DATE_SIZE)throw new Wt;var r=new _n;return this.encodeCompressedGtin(r,e.HEADER_SIZE),this.encodeCompressedWeight(r,e.HEADER_SIZE+e.GTIN_SIZE,e.WEIGHT_SIZE),this.encodeCompressedDate(r,e.HEADER_SIZE+e.GTIN_SIZE+e.WEIGHT_SIZE),r.toString()},e.prototype.encodeCompressedDate=function(r,n){var a=this.getGeneralDecoder().extractNumericValueFromBitArray(n,e.DATE_SIZE);if(a!==38400){r.append("("),r.append(this.dateCode),r.append(")");var s=a%32;a/=32;var i=a%12+1;a/=12;var l=a;l/10===0&&r.append("0"),r.append(l),i/10===0&&r.append("0"),r.append(i),s/10===0&&r.append("0"),r.append(s)}},e.prototype.addWeightCode=function(r,n){r.append("("),r.append(this.firstAIdigits),r.append(n/1e5),r.append(")")},e.prototype.checkWeight=function(r){return r%1e5},e.HEADER_SIZE=8,e.WEIGHT_SIZE=20,e.DATE_SIZE=16,e}(V_);function l3e(t){try{if(t.get(1))return new z4e(t);if(!t.get(2))return new X4e(t);var e=Q_.extractNumericValueFromBitArray(t,1,4);switch(e){case 4:return new e3e(t);case 5:return new r3e(t)}var r=Q_.extractNumericValueFromBitArray(t,1,5);switch(r){case 12:return new a3e(t);case 13:return new i3e(t)}var n=Q_.extractNumericValueFromBitArray(t,1,7);switch(n){case 56:return new Rh(t,"310","11");case 57:return new Rh(t,"320","11");case 58:return new Rh(t,"310","13");case 59:return new Rh(t,"320","13");case 60:return new Rh(t,"310","15");case 61:return new Rh(t,"320","15");case 62:return new Rh(t,"310","17");case 63:return new Rh(t,"320","17")}}catch(a){throw console.log(a),new iw("unknown decoder: "+t)}}var fV=function(){function t(e,r,n,a){this.leftchar=e,this.rightchar=r,this.finderpattern=n,this.maybeLast=a}return t.prototype.mayBeLast=function(){return this.maybeLast},t.prototype.getLeftChar=function(){return this.leftchar},t.prototype.getRightChar=function(){return this.rightchar},t.prototype.getFinderPattern=function(){return this.finderpattern},t.prototype.mustBeLast=function(){return this.rightchar==null},t.prototype.toString=function(){return"[ "+this.leftchar+", "+this.rightchar+" : "+(this.finderpattern==null?"null":this.finderpattern.getValue())+" ]"},t.equals=function(e,r){return e instanceof t?t.equalsOrNull(e.leftchar,r.leftchar)&&t.equalsOrNull(e.rightchar,r.rightchar)&&t.equalsOrNull(e.finderpattern,r.finderpattern):!1},t.equalsOrNull=function(e,r){return e===null?r===null:t.equals(e,r)},t.prototype.hashCode=function(){var e=this.leftchar.getValue()^this.rightchar.getValue()^this.finderpattern.getValue();return e},t}(),c3e=function(){function t(e,r,n){this.pairs=e,this.rowNumber=r,this.wasReversed=n}return t.prototype.getPairs=function(){return this.pairs},t.prototype.getRowNumber=function(){return this.rowNumber},t.prototype.isReversed=function(){return this.wasReversed},t.prototype.isEquivalent=function(e){return this.checkEqualitity(this,e)},t.prototype.toString=function(){return"{ "+this.pairs+" }"},t.prototype.equals=function(e,r){return e instanceof t?this.checkEqualitity(e,r)&&e.wasReversed===r.wasReversed:!1},t.prototype.checkEqualitity=function(e,r){if(!(!e||!r)){var n;return e.forEach(function(a,s){r.forEach(function(i){a.getLeftChar().getValue()===i.getLeftChar().getValue()&&a.getRightChar().getValue()===i.getRightChar().getValue()&&a.getFinderPatter().getValue()===i.getFinderPatter().getValue()&&(n=!0)})}),n}},t}(),u3e=function(){var t=function(e,r){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,a){n.__proto__=a}||function(n,a){for(var s in a)a.hasOwnProperty(s)&&(n[s]=a[s])},t(e,r)};return function(e,r){t(e,r);function n(){this.constructor=e}e.prototype=r===null?Object.create(r):(n.prototype=r.prototype,new n)}}(),Mh=function(t){var e=typeof Symbol=="function"&&Symbol.iterator,r=e&&t[e],n=0;if(r)return r.call(t);if(t&&typeof t.length=="number")return{next:function(){return t&&n>=t.length&&(t=void 0),{value:t&&t[n++],done:!t}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")},d3e=function(t){u3e(e,t);function e(){var r=t!==null&&t.apply(this,arguments)||this;return r.pairs=new Array(e.MAX_PAIRS),r.rows=new Array,r.startEnd=[2],r}return e.prototype.decodeRow=function(r,n,a){this.pairs.length=0,this.startFromEven=!1;try{return e.constructResult(this.decodeRow2pairs(r,n))}catch{}return this.pairs.length=0,this.startFromEven=!0,e.constructResult(this.decodeRow2pairs(r,n))},e.prototype.reset=function(){this.pairs.length=0,this.rows.length=0},e.prototype.decodeRow2pairs=function(r,n){for(var a=!1;!a;)try{this.pairs.push(this.retrieveNextPair(n,this.pairs,r))}catch(l){if(l instanceof Wt){if(!this.pairs.length)throw new Wt;a=!0}}if(this.checkChecksum())return this.pairs;var s;if(this.rows.length?s=!0:s=!1,this.storeRow(r,!1),s){var i=this.checkRowsBoolean(!1);if(i!=null||(i=this.checkRowsBoolean(!0),i!=null))return i}throw new Wt},e.prototype.checkRowsBoolean=function(r){if(this.rows.length>25)return this.rows.length=0,null;this.pairs.length=0,r&&(this.rows=this.rows.reverse());var n=null;try{n=this.checkRows(new Array,0)}catch(a){console.log(a)}return r&&(this.rows=this.rows.reverse()),n},e.prototype.checkRows=function(r,n){for(var a,s,i=n;i<this.rows.length;i++){var l=this.rows[i];this.pairs.length=0;try{for(var c=(a=void 0,Mh(r)),u=c.next();!u.done;u=c.next()){var d=u.value;this.pairs.push(d.getPairs())}}catch(h){a={error:h}}finally{try{u&&!u.done&&(s=c.return)&&s.call(c)}finally{if(a)throw a.error}}if(this.pairs.push(l.getPairs()),!!e.isValidSequence(this.pairs)){if(this.checkChecksum())return this.pairs;var f=new Array(r);f.push(l);try{return this.checkRows(f,i+1)}catch(h){console.log(h)}}}throw new Wt},e.isValidSequence=function(r){var n,a;try{for(var s=Mh(e.FINDER_PATTERN_SEQUENCES),i=s.next();!i.done;i=s.next()){var l=i.value;if(!(r.length>l.length)){for(var c=!0,u=0;u<r.length;u++)if(r[u].getFinderPattern().getValue()!==l[u]){c=!1;break}if(c)return!0}}}catch(d){n={error:d}}finally{try{i&&!i.done&&(a=s.return)&&a.call(s)}finally{if(n)throw n.error}}return!1},e.prototype.storeRow=function(r,n){for(var a=0,s=!1,i=!1;a<this.rows.length;){var l=this.rows[a];if(l.getRowNumber()>r){i=l.isEquivalent(this.pairs);break}s=l.isEquivalent(this.pairs),a++}i||s||e.isPartialRow(this.pairs,this.rows)||(this.rows.push(a,new c3e(this.pairs,r,n)),this.removePartialRows(this.pairs,this.rows))},e.prototype.removePartialRows=function(r,n){var a,s,i,l,c,u;try{for(var d=Mh(n),f=d.next();!f.done;f=d.next()){var h=f.value;if(h.getPairs().length!==r.length){var A=!0;try{for(var m=(i=void 0,Mh(h.getPairs())),p=m.next();!p.done;p=m.next()){var g=p.value,x=!1;try{for(var y=(c=void 0,Mh(r)),b=y.next();!b.done;b=y.next()){var w=b.value;if(fV.equals(g,w)){x=!0;break}}}catch(j){c={error:j}}finally{try{b&&!b.done&&(u=y.return)&&u.call(y)}finally{if(c)throw c.error}}x||(A=!1)}}catch(j){i={error:j}}finally{try{p&&!p.done&&(l=m.return)&&l.call(m)}finally{if(i)throw i.error}}}}}catch(j){a={error:j}}finally{try{f&&!f.done&&(s=d.return)&&s.call(d)}finally{if(a)throw a.error}}},e.isPartialRow=function(r,n){var a,s,i,l,c,u;try{for(var d=Mh(n),f=d.next();!f.done;f=d.next()){var h=f.value,A=!0;try{for(var m=(i=void 0,Mh(r)),p=m.next();!p.done;p=m.next()){var g=p.value,x=!1;try{for(var y=(c=void 0,Mh(h.getPairs())),b=y.next();!b.done;b=y.next()){var w=b.value;if(g.equals(w)){x=!0;break}}}catch(j){c={error:j}}finally{try{b&&!b.done&&(u=y.return)&&u.call(y)}finally{if(c)throw c.error}}if(!x){A=!1;break}}}catch(j){i={error:j}}finally{try{p&&!p.done&&(l=m.return)&&l.call(m)}finally{if(i)throw i.error}}if(A)return!0}}catch(j){a={error:j}}finally{try{f&&!f.done&&(s=d.return)&&s.call(d)}finally{if(a)throw a.error}}return!1},e.prototype.getRows=function(){return this.rows},e.constructResult=function(r){var n=Q4e.buildBitArray(r),a=l3e(n),s=a.parseInformation(),i=r[0].getFinderPattern().getResultPoints(),l=r[r.length-1].getFinderPattern().getResultPoints(),c=[i[0],i[1],l[0],l[1]];return new bl(s,null,null,c,Zr.RSS_EXPANDED,null)},e.prototype.checkChecksum=function(){var r=this.pairs.get(0),n=r.getLeftChar(),a=r.getRightChar();if(a===null)return!1;for(var s=a.getChecksumPortion(),i=2,l=1;l<this.pairs.size();++l){var c=this.pairs.get(l);s+=c.getLeftChar().getChecksumPortion(),i++;var u=c.getRightChar();u!=null&&(s+=u.getChecksumPortion(),i++)}s%=211;var d=211*(i-4)+s;return d===n.getValue()},e.getNextSecondBar=function(r,n){var a;return r.get(n)?(a=r.getNextUnset(n),a=r.getNextSet(a)):(a=r.getNextSet(n),a=r.getNextUnset(a)),a},e.prototype.retrieveNextPair=function(r,n,a){var s=n.length%2===0;this.startFromEven&&(s=!s);var i,l=!0,c=-1;do this.findNextPair(r,n,c),i=this.parseFoundFinderPattern(r,a,s),i===null?c=e.getNextSecondBar(r,this.startEnd[0]):l=!1;while(l);var u=this.decodeDataCharacter(r,i,s,!0);if(!this.isEmptyPair(n)&&n[n.length-1].mustBeLast())throw new Wt;var d;try{d=this.decodeDataCharacter(r,i,s,!1)}catch(f){d=null,console.log(f)}return new fV(u,d,i,!0)},e.prototype.isEmptyPair=function(r){return r.length===0},e.prototype.findNextPair=function(r,n,a){var s=this.getDecodeFinderCounters();s[0]=0,s[1]=0,s[2]=0,s[3]=0;var i=r.getSize(),l;if(a>=0)l=a;else if(this.isEmptyPair(n))l=0;else{var c=n[n.length-1];l=c.getFinderPattern().getStartEnd()[1]}var u=n.length%2!==0;this.startFromEven&&(u=!u);for(var d=!1;l<i&&(d=!r.get(l),!!d);)l++;for(var f=0,h=l,A=l;A<i;A++)if(r.get(A)!==d)s[f]++;else{if(f===3){if(u&&e.reverseCounters(s),e.isFinderPattern(s)){this.startEnd[0]=h,this.startEnd[1]=A;return}u&&e.reverseCounters(s),h+=s[0]+s[1],s[0]=s[2],s[1]=s[3],s[2]=0,s[3]=0,f--}else f++;s[f]=1,d=!d}throw new Wt},e.reverseCounters=function(r){for(var n=r.length,a=0;a<n/2;++a){var s=r[a];r[a]=r[n-a-1],r[n-a-1]=s}},e.prototype.parseFoundFinderPattern=function(r,n,a){var s,i,l;if(a){for(var c=this.startEnd[0]-1;c>=0&&!r.get(c);)c--;c++,s=this.startEnd[0]-c,i=c,l=this.startEnd[1]}else i=this.startEnd[0],l=r.getNextUnset(this.startEnd[1]+1),s=l-this.startEnd[1];var u=this.getDecodeFinderCounters();Ka.arraycopy(u,0,u,1,u.length-1),u[0]=s;var d;try{d=this.parseFinderValue(u,e.FINDER_PATTERNS)}catch{return null}return new gte(d,[i,l],i,l,n)},e.prototype.decodeDataCharacter=function(r,n,a,s){for(var i=this.getDataCharacterCounters(),l=0;l<i.length;l++)i[l]=0;if(s)e.recordPatternInReverse(r,n.getStartEnd()[0],i);else{e.recordPattern(r,n.getStartEnd()[1],i);for(var c=0,u=i.length-1;c<u;c++,u--){var d=i[c];i[c]=i[u],i[u]=d}}var f=17,h=Zn.sum(new Int32Array(i))/f,A=(n.getStartEnd()[1]-n.getStartEnd()[0])/15;if(Math.abs(h-A)/A>.3)throw new Wt;for(var m=this.getOddCounts(),p=this.getEvenCounts(),g=this.getOddRoundingErrors(),x=this.getEvenRoundingErrors(),c=0;c<i.length;c++){var y=1*i[c]/h,b=y+.5;if(b<1){if(y<.3)throw new Wt;b=1}else if(b>8){if(y>8.7)throw new Wt;b=8}var w=c/2;c&1?(p[w]=b,x[w]=y-b):(m[w]=b,g[w]=y-b)}this.adjustOddEvenCounts(f);for(var j=4*n.getValue()+(a?0:2)+(s?0:1)-1,I=0,_=0,c=m.length-1;c>=0;c--){if(e.isNotA1left(n,a,s)){var E=e.WEIGHTS[j][2*c];_+=m[c]*E}I+=m[c]}for(var S=0,c=p.length-1;c>=0;c--)if(e.isNotA1left(n,a,s)){var E=e.WEIGHTS[j][2*c+1];S+=p[c]*E}var k=_+S;if(I&1||I>13||I<4)throw new Wt;var P=(13-I)/2,T=e.SYMBOL_WIDEST[P],F=9-T,Y=bx.getRSSvalue(m,T,!0),he=bx.getRSSvalue(p,F,!1),ue=e.EVEN_TOTAL_SUBSET[P],fe=e.GSUM[P],me=Y*ue+he+fe;return new aS(me,k)},e.isNotA1left=function(r,n,a){return!(r.getValue()===0&&n&&a)},e.prototype.adjustOddEvenCounts=function(r){var n=Zn.sum(new Int32Array(this.getOddCounts())),a=Zn.sum(new Int32Array(this.getEvenCounts())),s=!1,i=!1;n>13?i=!0:n<4&&(s=!0);var l=!1,c=!1;a>13?c=!0:a<4&&(l=!0);var u=n+a-r,d=(n&1)===1,f=(a&1)===0;if(u===1)if(d){if(f)throw new Wt;i=!0}else{if(!f)throw new Wt;c=!0}else if(u===-1)if(d){if(f)throw new Wt;s=!0}else{if(!f)throw new Wt;l=!0}else if(u===0){if(d){if(!f)throw new Wt;n<a?(s=!0,c=!0):(i=!0,l=!0)}else if(f)throw new Wt}else throw new Wt;if(s){if(i)throw new Wt;e.increment(this.getOddCounts(),this.getOddRoundingErrors())}if(i&&e.decrement(this.getOddCounts(),this.getOddRoundingErrors()),l){if(c)throw new Wt;e.increment(this.getEvenCounts(),this.getOddRoundingErrors())}c&&e.decrement(this.getEvenCounts(),this.getEvenRoundingErrors())},e.SYMBOL_WIDEST=[7,5,4,3,1],e.EVEN_TOTAL_SUBSET=[4,20,52,104,204],e.GSUM=[0,348,1388,2948,3988],e.FINDER_PATTERNS=[Int32Array.from([1,8,4,1]),Int32Array.from([3,6,4,1]),Int32Array.from([3,4,6,1]),Int32Array.from([3,2,8,1]),Int32Array.from([2,6,5,1]),Int32Array.from([2,2,9,1])],e.WEIGHTS=[[1,3,9,27,81,32,96,77],[20,60,180,118,143,7,21,63],[189,145,13,39,117,140,209,205],[193,157,49,147,19,57,171,91],[62,186,136,197,169,85,44,132],[185,133,188,142,4,12,36,108],[113,128,173,97,80,29,87,50],[150,28,84,41,123,158,52,156],[46,138,203,187,139,206,196,166],[76,17,51,153,37,111,122,155],[43,129,176,106,107,110,119,146],[16,48,144,10,30,90,59,177],[109,116,137,200,178,112,125,164],[70,210,208,202,184,130,179,115],[134,191,151,31,93,68,204,190],[148,22,66,198,172,94,71,2],[6,18,54,162,64,192,154,40],[120,149,25,75,14,42,126,167],[79,26,78,23,69,207,199,175],[103,98,83,38,114,131,182,124],[161,61,183,127,170,88,53,159],[55,165,73,8,24,72,5,15],[45,135,194,160,58,174,100,89]],e.FINDER_PAT_A=0,e.FINDER_PAT_B=1,e.FINDER_PAT_C=2,e.FINDER_PAT_D=3,e.FINDER_PAT_E=4,e.FINDER_PAT_F=5,e.FINDER_PATTERN_SEQUENCES=[[e.FINDER_PAT_A,e.FINDER_PAT_A],[e.FINDER_PAT_A,e.FINDER_PAT_B,e.FINDER_PAT_B],[e.FINDER_PAT_A,e.FINDER_PAT_C,e.FINDER_PAT_B,e.FINDER_PAT_D],[e.FINDER_PAT_A,e.FINDER_PAT_E,e.FINDER_PAT_B,e.FINDER_PAT_D,e.FINDER_PAT_C],[e.FINDER_PAT_A,e.FINDER_PAT_E,e.FINDER_PAT_B,e.FINDER_PAT_D,e.FINDER_PAT_D,e.FINDER_PAT_F],[e.FINDER_PAT_A,e.FINDER_PAT_E,e.FINDER_PAT_B,e.FINDER_PAT_D,e.FINDER_PAT_E,e.FINDER_PAT_F,e.FINDER_PAT_F],[e.FINDER_PAT_A,e.FINDER_PAT_A,e.FINDER_PAT_B,e.FINDER_PAT_B,e.FINDER_PAT_C,e.FINDER_PAT_C,e.FINDER_PAT_D,e.FINDER_PAT_D],[e.FINDER_PAT_A,e.FINDER_PAT_A,e.FINDER_PAT_B,e.FINDER_PAT_B,e.FINDER_PAT_C,e.FINDER_PAT_C,e.FINDER_PAT_D,e.FINDER_PAT_E,e.FINDER_PAT_E],[e.FINDER_PAT_A,e.FINDER_PAT_A,e.FINDER_PAT_B,e.FINDER_PAT_B,e.FINDER_PAT_C,e.FINDER_PAT_C,e.FINDER_PAT_D,e.FINDER_PAT_E,e.FINDER_PAT_F,e.FINDER_PAT_F],[e.FINDER_PAT_A,e.FINDER_PAT_A,e.FINDER_PAT_B,e.FINDER_PAT_B,e.FINDER_PAT_C,e.FINDER_PAT_D,e.FINDER_PAT_D,e.FINDER_PAT_E,e.FINDER_PAT_E,e.FINDER_PAT_F,e.FINDER_PAT_F]],e.MAX_PAIRS=11,e}(Tm),f3e=function(){var t=function(e,r){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,a){n.__proto__=a}||function(n,a){for(var s in a)a.hasOwnProperty(s)&&(n[s]=a[s])},t(e,r)};return function(e,r){t(e,r);function n(){this.constructor=e}e.prototype=r===null?Object.create(r):(n.prototype=r.prototype,new n)}}(),A3e=function(t){f3e(e,t);function e(r,n,a){var s=t.call(this,r,n)||this;return s.count=0,s.finderPattern=a,s}return e.prototype.getFinderPattern=function(){return this.finderPattern},e.prototype.getCount=function(){return this.count},e.prototype.incrementCount=function(){this.count++},e}(aS),h3e=function(){var t=function(e,r){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,a){n.__proto__=a}||function(n,a){for(var s in a)a.hasOwnProperty(s)&&(n[s]=a[s])},t(e,r)};return function(e,r){t(e,r);function n(){this.constructor=e}e.prototype=r===null?Object.create(r):(n.prototype=r.prototype,new n)}}(),U5=function(t){var e=typeof Symbol=="function"&&Symbol.iterator,r=e&&t[e],n=0;if(r)return r.call(t);if(t&&typeof t.length=="number")return{next:function(){return t&&n>=t.length&&(t=void 0),{value:t&&t[n++],done:!t}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")},AV=function(t){h3e(e,t);function e(){var r=t!==null&&t.apply(this,arguments)||this;return r.possibleLeftPairs=[],r.possibleRightPairs=[],r}return e.prototype.decodeRow=function(r,n,a){var s,i,l,c,u=this.decodePair(n,!1,r,a);e.addOrTally(this.possibleLeftPairs,u),n.reverse();var d=this.decodePair(n,!0,r,a);e.addOrTally(this.possibleRightPairs,d),n.reverse();try{for(var f=U5(this.possibleLeftPairs),h=f.next();!h.done;h=f.next()){var A=h.value;if(A.getCount()>1)try{for(var m=(l=void 0,U5(this.possibleRightPairs)),p=m.next();!p.done;p=m.next()){var g=p.value;if(g.getCount()>1&&e.checkChecksum(A,g))return e.constructResult(A,g)}}catch(x){l={error:x}}finally{try{p&&!p.done&&(c=m.return)&&c.call(m)}finally{if(l)throw l.error}}}}catch(x){s={error:x}}finally{try{h&&!h.done&&(i=f.return)&&i.call(f)}finally{if(s)throw s.error}}throw new Wt},e.addOrTally=function(r,n){var a,s;if(n!=null){var i=!1;try{for(var l=U5(r),c=l.next();!c.done;c=l.next()){var u=c.value;if(u.getValue()===n.getValue()){u.incrementCount(),i=!0;break}}}catch(d){a={error:d}}finally{try{c&&!c.done&&(s=l.return)&&s.call(l)}finally{if(a)throw a.error}}i||r.push(n)}},e.prototype.reset=function(){this.possibleLeftPairs.length=0,this.possibleRightPairs.length=0},e.constructResult=function(r,n){for(var a=4537077*r.getValue()+n.getValue(),s=new String(a).toString(),i=new _n,l=13-s.length;l>0;l--)i.append("0");i.append(s);for(var c=0,l=0;l<13;l++){var u=i.charAt(l).charCodeAt(0)-48;c+=l&1?u:3*u}c=10-c%10,c===10&&(c=0),i.append(c.toString());var d=r.getFinderPattern().getResultPoints(),f=n.getFinderPattern().getResultPoints();return new bl(i.toString(),null,0,[d[0],d[1],f[0],f[1]],Zr.RSS_14,new Date().getTime())},e.checkChecksum=function(r,n){var a=(r.getChecksumPortion()+16*n.getChecksumPortion())%79,s=9*r.getFinderPattern().getValue()+n.getFinderPattern().getValue();return s>72&&s--,s>8&&s--,a===s},e.prototype.decodePair=function(r,n,a,s){try{var i=this.findFinderPattern(r,n),l=this.parseFoundFinderPattern(r,a,n,i),c=s==null?null:s.get(Ga.NEED_RESULT_POINT_CALLBACK);if(c!=null){var u=(i[0]+i[1])/2;n&&(u=r.getSize()-1-u),c.foundPossibleResultPoint(new Vr(u,a))}var d=this.decodeDataCharacter(r,l,!0),f=this.decodeDataCharacter(r,l,!1);return new A3e(1597*d.getValue()+f.getValue(),d.getChecksumPortion()+4*f.getChecksumPortion(),l)}catch{return null}},e.prototype.decodeDataCharacter=function(r,n,a){for(var s=this.getDataCharacterCounters(),i=0;i<s.length;i++)s[i]=0;if(a)$i.recordPatternInReverse(r,n.getStartEnd()[0],s);else{$i.recordPattern(r,n.getStartEnd()[1]+1,s);for(var l=0,c=s.length-1;l<c;l++,c--){var u=s[l];s[l]=s[c],s[c]=u}}for(var d=a?16:15,f=Zn.sum(new Int32Array(s))/d,h=this.getOddCounts(),A=this.getEvenCounts(),m=this.getOddRoundingErrors(),p=this.getEvenRoundingErrors(),l=0;l<s.length;l++){var g=s[l]/f,x=Math.floor(g+.5);x<1?x=1:x>8&&(x=8);var y=Math.floor(l/2);l&1?(A[y]=x,p[y]=g-x):(h[y]=x,m[y]=g-x)}this.adjustOddEvenCounts(a,d);for(var b=0,w=0,l=h.length-1;l>=0;l--)w*=9,w+=h[l],b+=h[l];for(var j=0,I=0,l=A.length-1;l>=0;l--)j*=9,j+=A[l],I+=A[l];var _=w+3*j;if(a){if(b&1||b>12||b<4)throw new Wt;var E=(12-b)/2,S=e.OUTSIDE_ODD_WIDEST[E],k=9-S,P=bx.getRSSvalue(h,S,!1),T=bx.getRSSvalue(A,k,!0),F=e.OUTSIDE_EVEN_TOTAL_SUBSET[E],Y=e.OUTSIDE_GSUM[E];return new aS(P*F+T+Y,_)}else{if(I&1||I>10||I<4)throw new Wt;var E=(10-I)/2,S=e.INSIDE_ODD_WIDEST[E],k=9-S,P=bx.getRSSvalue(h,S,!0),T=bx.getRSSvalue(A,k,!1),he=e.INSIDE_ODD_TOTAL_SUBSET[E],Y=e.INSIDE_GSUM[E];return new aS(T*he+P+Y,_)}},e.prototype.findFinderPattern=function(r,n){var a=this.getDecodeFinderCounters();a[0]=0,a[1]=0,a[2]=0,a[3]=0;for(var s=r.getSize(),i=!1,l=0;l<s&&(i=!r.get(l),n!==i);)l++;for(var c=0,u=l,d=l;d<s;d++)if(r.get(d)!==i)a[c]++;else{if(c===3){if(Tm.isFinderPattern(a))return[u,d];u+=a[0]+a[1],a[0]=a[2],a[1]=a[3],a[2]=0,a[3]=0,c--}else c++;a[c]=1,i=!i}throw new Wt},e.prototype.parseFoundFinderPattern=function(r,n,a,s){for(var i=r.get(s[0]),l=s[0]-1;l>=0&&i!==r.get(l);)l--;l++;var c=s[0]-l,u=this.getDecodeFinderCounters(),d=new Int32Array(u.length);Ka.arraycopy(u,0,d,1,u.length-1),d[0]=c;var f=this.parseFinderValue(d,e.FINDER_PATTERNS),h=l,A=s[1];return a&&(h=r.getSize()-1-h,A=r.getSize()-1-A),new gte(f,[l,s[1]],h,A,n)},e.prototype.adjustOddEvenCounts=function(r,n){var a=Zn.sum(new Int32Array(this.getOddCounts())),s=Zn.sum(new Int32Array(this.getEvenCounts())),i=!1,l=!1,c=!1,u=!1;r?(a>12?l=!0:a<4&&(i=!0),s>12?u=!0:s<4&&(c=!0)):(a>11?l=!0:a<5&&(i=!0),s>10?u=!0:s<4&&(c=!0));var d=a+s-n,f=(a&1)===(r?1:0),h=(s&1)===1;if(d===1)if(f){if(h)throw new Wt;l=!0}else{if(!h)throw new Wt;u=!0}else if(d===-1)if(f){if(h)throw new Wt;i=!0}else{if(!h)throw new Wt;c=!0}else if(d===0){if(f){if(!h)throw new Wt;a<s?(i=!0,u=!0):(l=!0,c=!0)}else if(h)throw new Wt}else throw new Wt;if(i){if(l)throw new Wt;Tm.increment(this.getOddCounts(),this.getOddRoundingErrors())}if(l&&Tm.decrement(this.getOddCounts(),this.getOddRoundingErrors()),c){if(u)throw new Wt;Tm.increment(this.getEvenCounts(),this.getOddRoundingErrors())}u&&Tm.decrement(this.getEvenCounts(),this.getEvenRoundingErrors())},e.OUTSIDE_EVEN_TOTAL_SUBSET=[1,10,34,70,126],e.INSIDE_ODD_TOTAL_SUBSET=[4,20,48,81],e.OUTSIDE_GSUM=[0,161,961,2015,2715],e.INSIDE_GSUM=[0,336,1036,1516],e.OUTSIDE_ODD_WIDEST=[8,6,4,3,1],e.INSIDE_ODD_WIDEST=[2,4,6,8],e.FINDER_PATTERNS=[Int32Array.from([3,8,2,1]),Int32Array.from([3,5,5,1]),Int32Array.from([3,3,7,1]),Int32Array.from([3,1,9,1]),Int32Array.from([2,7,4,1]),Int32Array.from([2,5,6,1]),Int32Array.from([2,3,8,1]),Int32Array.from([1,5,7,1]),Int32Array.from([1,3,9,1])],e}(Tm),m3e=function(){var t=function(e,r){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,a){n.__proto__=a}||function(n,a){for(var s in a)a.hasOwnProperty(s)&&(n[s]=a[s])},t(e,r)};return function(e,r){t(e,r);function n(){this.constructor=e}e.prototype=r===null?Object.create(r):(n.prototype=r.prototype,new n)}}(),wx=function(t){m3e(e,t);function e(r){var n=t.call(this)||this;n.readers=[];var a=r?r.get(Ga.POSSIBLE_FORMATS):null,s=r&&r.get(Ga.ASSUME_CODE_39_CHECK_DIGIT)!==void 0,i=r&&r.get(Ga.ENABLE_CODE_39_EXTENDED_MODE)!==void 0;return a&&((a.includes(Zr.EAN_13)||a.includes(Zr.UPC_A)||a.includes(Zr.EAN_8)||a.includes(Zr.UPC_E))&&n.readers.push(new L5(r)),a.includes(Zr.CODE_39)&&n.readers.push(new nV(s,i)),a.includes(Zr.CODE_93)&&n.readers.push(new aV),a.includes(Zr.CODE_128)&&n.readers.push(new rV),a.includes(Zr.ITF)&&n.readers.push(new sV),a.includes(Zr.CODABAR)&&n.readers.push(new R4e),a.includes(Zr.RSS_14)&&n.readers.push(new AV),a.includes(Zr.RSS_EXPANDED)&&(console.warn("RSS Expanded reader IS NOT ready for production yet! use at your own risk."),n.readers.push(new d3e))),n.readers.length===0&&(n.readers.push(new L5(r)),n.readers.push(new nV),n.readers.push(new aV),n.readers.push(new L5(r)),n.readers.push(new rV),n.readers.push(new sV),n.readers.push(new AV)),n}return e.prototype.decodeRow=function(r,n,a){for(var s=0;s<this.readers.length;s++)try{return this.readers[s].decodeRow(r,n,a)}catch{}throw new Wt},e.prototype.reset=function(){this.readers.forEach(function(r){return r.reset()})},e}($i),p3e=function(){var t=function(e,r){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,a){n.__proto__=a}||function(n,a){for(var s in a)a.hasOwnProperty(s)&&(n[s]=a[s])},t(e,r)};return function(e,r){t(e,r);function n(){this.constructor=e}e.prototype=r===null?Object.create(r):(n.prototype=r.prototype,new n)}}();(function(t){p3e(e,t);function e(r,n){return r===void 0&&(r=500),t.call(this,new wx(n),r,n)||this}return e})(Lv);var hV=function(t){var e=typeof Symbol=="function"&&Symbol.iterator,r=e&&t[e],n=0;if(r)return r.call(t);if(t&&typeof t.length=="number")return{next:function(){return t&&n>=t.length&&(t=void 0),{value:t&&t[n++],done:!t}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")},ca=function(){function t(e,r,n){this.ecCodewords=e,this.ecBlocks=[r],n&&this.ecBlocks.push(n)}return t.prototype.getECCodewords=function(){return this.ecCodewords},t.prototype.getECBlocks=function(){return this.ecBlocks},t}(),sa=function(){function t(e,r){this.count=e,this.dataCodewords=r}return t.prototype.getCount=function(){return this.count},t.prototype.getDataCodewords=function(){return this.dataCodewords},t}(),g3e=function(){function t(e,r,n,a,s,i){var l,c;this.versionNumber=e,this.symbolSizeRows=r,this.symbolSizeColumns=n,this.dataRegionSizeRows=a,this.dataRegionSizeColumns=s,this.ecBlocks=i;var u=0,d=i.getECCodewords(),f=i.getECBlocks();try{for(var h=hV(f),A=h.next();!A.done;A=h.next()){var m=A.value;u+=m.getCount()*(m.getDataCodewords()+d)}}catch(p){l={error:p}}finally{try{A&&!A.done&&(c=h.return)&&c.call(h)}finally{if(l)throw l.error}}this.totalCodewords=u}return t.prototype.getVersionNumber=function(){return this.versionNumber},t.prototype.getSymbolSizeRows=function(){return this.symbolSizeRows},t.prototype.getSymbolSizeColumns=function(){return this.symbolSizeColumns},t.prototype.getDataRegionSizeRows=function(){return this.dataRegionSizeRows},t.prototype.getDataRegionSizeColumns=function(){return this.dataRegionSizeColumns},t.prototype.getTotalCodewords=function(){return this.totalCodewords},t.prototype.getECBlocks=function(){return this.ecBlocks},t.getVersionForDimensions=function(e,r){var n,a;if(e&1||r&1)throw new Nr;try{for(var s=hV(t.VERSIONS),i=s.next();!i.done;i=s.next()){var l=i.value;if(l.symbolSizeRows===e&&l.symbolSizeColumns===r)return l}}catch(c){n={error:c}}finally{try{i&&!i.done&&(a=s.return)&&a.call(s)}finally{if(n)throw n.error}}throw new Nr},t.prototype.toString=function(){return""+this.versionNumber},t.buildVersions=function(){return[new t(1,10,10,8,8,new ca(5,new sa(1,3))),new t(2,12,12,10,10,new ca(7,new sa(1,5))),new t(3,14,14,12,12,new ca(10,new sa(1,8))),new t(4,16,16,14,14,new ca(12,new sa(1,12))),new t(5,18,18,16,16,new ca(14,new sa(1,18))),new t(6,20,20,18,18,new ca(18,new sa(1,22))),new t(7,22,22,20,20,new ca(20,new sa(1,30))),new t(8,24,24,22,22,new ca(24,new sa(1,36))),new t(9,26,26,24,24,new ca(28,new sa(1,44))),new t(10,32,32,14,14,new ca(36,new sa(1,62))),new t(11,36,36,16,16,new ca(42,new sa(1,86))),new t(12,40,40,18,18,new ca(48,new sa(1,114))),new t(13,44,44,20,20,new ca(56,new sa(1,144))),new t(14,48,48,22,22,new ca(68,new sa(1,174))),new t(15,52,52,24,24,new ca(42,new sa(2,102))),new t(16,64,64,14,14,new ca(56,new sa(2,140))),new t(17,72,72,16,16,new ca(36,new sa(4,92))),new t(18,80,80,18,18,new ca(48,new sa(4,114))),new t(19,88,88,20,20,new ca(56,new sa(4,144))),new t(20,96,96,22,22,new ca(68,new sa(4,174))),new t(21,104,104,24,24,new ca(56,new sa(6,136))),new t(22,120,120,18,18,new ca(68,new sa(6,175))),new t(23,132,132,20,20,new ca(62,new sa(8,163))),new t(24,144,144,22,22,new ca(62,new sa(8,156),new sa(2,155))),new t(25,8,18,6,16,new ca(7,new sa(1,5))),new t(26,8,32,6,14,new ca(11,new sa(1,10))),new t(27,12,26,10,24,new ca(14,new sa(1,16))),new t(28,12,36,10,16,new ca(18,new sa(1,22))),new t(29,16,36,14,16,new ca(24,new sa(1,32))),new t(30,16,48,14,22,new ca(28,new sa(1,49)))]},t.VERSIONS=t.buildVersions(),t}(),x3e=function(){function t(e){var r=e.getHeight();if(r<8||r>144||r&1)throw new Nr;this.version=t.readVersion(e),this.mappingBitMatrix=this.extractDataRegion(e),this.readMappingMatrix=new Sf(this.mappingBitMatrix.getWidth(),this.mappingBitMatrix.getHeight())}return t.prototype.getVersion=function(){return this.version},t.readVersion=function(e){var r=e.getHeight(),n=e.getWidth();return g3e.getVersionForDimensions(r,n)},t.prototype.readCodewords=function(){var e=new Int8Array(this.version.getTotalCodewords()),r=0,n=4,a=0,s=this.mappingBitMatrix.getHeight(),i=this.mappingBitMatrix.getWidth(),l=!1,c=!1,u=!1,d=!1;do if(n===s&&a===0&&!l)e[r++]=this.readCorner1(s,i)&255,n-=2,a+=2,l=!0;else if(n===s-2&&a===0&&i&3&&!c)e[r++]=this.readCorner2(s,i)&255,n-=2,a+=2,c=!0;else if(n===s+4&&a===2&&!(i&7)&&!u)e[r++]=this.readCorner3(s,i)&255,n-=2,a+=2,u=!0;else if(n===s-2&&a===0&&(i&7)===4&&!d)e[r++]=this.readCorner4(s,i)&255,n-=2,a+=2,d=!0;else{do n<s&&a>=0&&!this.readMappingMatrix.get(a,n)&&(e[r++]=this.readUtah(n,a,s,i)&255),n-=2,a+=2;while(n>=0&&a<i);n+=1,a+=3;do n>=0&&a<i&&!this.readMappingMatrix.get(a,n)&&(e[r++]=this.readUtah(n,a,s,i)&255),n+=2,a-=2;while(n<s&&a>=0);n+=3,a+=1}while(n<s||a<i);if(r!==this.version.getTotalCodewords())throw new Nr;return e},t.prototype.readModule=function(e,r,n,a){return e<0&&(e+=n,r+=4-(n+4&7)),r<0&&(r+=a,e+=4-(a+4&7)),this.readMappingMatrix.set(r,e),this.mappingBitMatrix.get(r,e)},t.prototype.readUtah=function(e,r,n,a){var s=0;return this.readModule(e-2,r-2,n,a)&&(s|=1),s<<=1,this.readModule(e-2,r-1,n,a)&&(s|=1),s<<=1,this.readModule(e-1,r-2,n,a)&&(s|=1),s<<=1,this.readModule(e-1,r-1,n,a)&&(s|=1),s<<=1,this.readModule(e-1,r,n,a)&&(s|=1),s<<=1,this.readModule(e,r-2,n,a)&&(s|=1),s<<=1,this.readModule(e,r-1,n,a)&&(s|=1),s<<=1,this.readModule(e,r,n,a)&&(s|=1),s},t.prototype.readCorner1=function(e,r){var n=0;return this.readModule(e-1,0,e,r)&&(n|=1),n<<=1,this.readModule(e-1,1,e,r)&&(n|=1),n<<=1,this.readModule(e-1,2,e,r)&&(n|=1),n<<=1,this.readModule(0,r-2,e,r)&&(n|=1),n<<=1,this.readModule(0,r-1,e,r)&&(n|=1),n<<=1,this.readModule(1,r-1,e,r)&&(n|=1),n<<=1,this.readModule(2,r-1,e,r)&&(n|=1),n<<=1,this.readModule(3,r-1,e,r)&&(n|=1),n},t.prototype.readCorner2=function(e,r){var n=0;return this.readModule(e-3,0,e,r)&&(n|=1),n<<=1,this.readModule(e-2,0,e,r)&&(n|=1),n<<=1,this.readModule(e-1,0,e,r)&&(n|=1),n<<=1,this.readModule(0,r-4,e,r)&&(n|=1),n<<=1,this.readModule(0,r-3,e,r)&&(n|=1),n<<=1,this.readModule(0,r-2,e,r)&&(n|=1),n<<=1,this.readModule(0,r-1,e,r)&&(n|=1),n<<=1,this.readModule(1,r-1,e,r)&&(n|=1),n},t.prototype.readCorner3=function(e,r){var n=0;return this.readModule(e-1,0,e,r)&&(n|=1),n<<=1,this.readModule(e-1,r-1,e,r)&&(n|=1),n<<=1,this.readModule(0,r-3,e,r)&&(n|=1),n<<=1,this.readModule(0,r-2,e,r)&&(n|=1),n<<=1,this.readModule(0,r-1,e,r)&&(n|=1),n<<=1,this.readModule(1,r-3,e,r)&&(n|=1),n<<=1,this.readModule(1,r-2,e,r)&&(n|=1),n<<=1,this.readModule(1,r-1,e,r)&&(n|=1),n},t.prototype.readCorner4=function(e,r){var n=0;return this.readModule(e-3,0,e,r)&&(n|=1),n<<=1,this.readModule(e-2,0,e,r)&&(n|=1),n<<=1,this.readModule(e-1,0,e,r)&&(n|=1),n<<=1,this.readModule(0,r-2,e,r)&&(n|=1),n<<=1,this.readModule(0,r-1,e,r)&&(n|=1),n<<=1,this.readModule(1,r-1,e,r)&&(n|=1),n<<=1,this.readModule(2,r-1,e,r)&&(n|=1),n<<=1,this.readModule(3,r-1,e,r)&&(n|=1),n},t.prototype.extractDataRegion=function(e){var r=this.version.getSymbolSizeRows(),n=this.version.getSymbolSizeColumns();if(e.getHeight()!==r)throw new en("Dimension of bitMatrix must match the version size");for(var a=this.version.getDataRegionSizeRows(),s=this.version.getDataRegionSizeColumns(),i=r/a|0,l=n/s|0,c=i*a,u=l*s,d=new Sf(u,c),f=0;f<i;++f)for(var h=f*a,A=0;A<l;++A)for(var m=A*s,p=0;p<a;++p)for(var g=f*(a+2)+1+p,x=h+p,y=0;y<s;++y){var b=A*(s+2)+1+y;if(e.get(b,g)){var w=m+y;d.set(w,x)}}return d},t}(),mV=function(t){var e=typeof Symbol=="function"&&Symbol.iterator,r=e&&t[e],n=0;if(r)return r.call(t);if(t&&typeof t.length=="number")return{next:function(){return t&&n>=t.length&&(t=void 0),{value:t&&t[n++],done:!t}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")},v3e=function(){function t(e,r){this.numDataCodewords=e,this.codewords=r}return t.getDataBlocks=function(e,r){var n,a,s,i,l=r.getECBlocks(),c=0,u=l.getECBlocks();try{for(var d=mV(u),f=d.next();!f.done;f=d.next()){var h=f.value;c+=h.getCount()}}catch(Y){n={error:Y}}finally{try{f&&!f.done&&(a=d.return)&&a.call(d)}finally{if(n)throw n.error}}var A=new Array(c),m=0;try{for(var p=mV(u),g=p.next();!g.done;g=p.next())for(var h=g.value,x=0;x<h.getCount();x++){var y=h.getDataCodewords(),b=l.getECCodewords()+y;A[m++]=new t(y,new Uint8Array(b))}}catch(Y){s={error:Y}}finally{try{g&&!g.done&&(i=p.return)&&i.call(p)}finally{if(s)throw s.error}}for(var w=A[0].codewords.length,j=w-l.getECCodewords(),I=j-1,_=0,x=0;x<I;x++)for(var E=0;E<m;E++)A[E].codewords[x]=e[_++];for(var S=r.getVersionNumber()===24,k=S?8:m,E=0;E<k;E++)A[E].codewords[j-1]=e[_++];for(var P=A[0].codewords.length,x=j;x<P;x++)for(var E=0;E<m;E++){var T=S?(E+8)%m:E,F=S&&T>7?x-1:x;A[T].codewords[F]=e[_++]}if(_!==e.length)throw new en;return A},t.prototype.getNumDataCodewords=function(){return this.numDataCodewords},t.prototype.getCodewords=function(){return this.codewords},t}(),yte=function(){function t(e){this.bytes=e,this.byteOffset=0,this.bitOffset=0}return t.prototype.getBitOffset=function(){return this.bitOffset},t.prototype.getByteOffset=function(){return this.byteOffset},t.prototype.readBits=function(e){if(e<1||e>32||e>this.available())throw new en(""+e);var r=0,n=this.bitOffset,a=this.byteOffset,s=this.bytes;if(n>0){var i=8-n,l=e<i?e:i,c=i-l,u=255>>8-l<<c;r=(s[a]&u)>>c,e-=l,n+=l,n===8&&(n=0,a++)}if(e>0){for(;e>=8;)r=r<<8|s[a]&255,a++,e-=8;if(e>0){var c=8-e,u=255>>c<<c;r=r<<e|(s[a]&u)>>c,n+=e}}return this.bitOffset=n,this.byteOffset=a,r},t.prototype.available=function(){return 8*(this.bytes.length-this.byteOffset)-this.bitOffset},t}(),Bi;(function(t){t[t.PAD_ENCODE=0]="PAD_ENCODE",t[t.ASCII_ENCODE=1]="ASCII_ENCODE",t[t.C40_ENCODE=2]="C40_ENCODE",t[t.TEXT_ENCODE=3]="TEXT_ENCODE",t[t.ANSIX12_ENCODE=4]="ANSIX12_ENCODE",t[t.EDIFACT_ENCODE=5]="EDIFACT_ENCODE",t[t.BASE256_ENCODE=6]="BASE256_ENCODE"})(Bi||(Bi={}));var y3e=function(){function t(){}return t.decode=function(e){var r=new yte(e),n=new _n,a=new _n,s=new Array,i=Bi.ASCII_ENCODE;do if(i===Bi.ASCII_ENCODE)i=this.decodeAsciiSegment(r,n,a);else{switch(i){case Bi.C40_ENCODE:this.decodeC40Segment(r,n);break;case Bi.TEXT_ENCODE:this.decodeTextSegment(r,n);break;case Bi.ANSIX12_ENCODE:this.decodeAnsiX12Segment(r,n);break;case Bi.EDIFACT_ENCODE:this.decodeEdifactSegment(r,n);break;case Bi.BASE256_ENCODE:this.decodeBase256Segment(r,n,s);break;default:throw new Nr}i=Bi.ASCII_ENCODE}while(i!==Bi.PAD_ENCODE&&r.available()>0);return a.length()>0&&n.append(a.toString()),new N4(e,n.toString(),s.length===0?null:s,null)},t.decodeAsciiSegment=function(e,r,n){var a=!1;do{var s=e.readBits(8);if(s===0)throw new Nr;if(s<=128)return a&&(s+=128),r.append(String.fromCharCode(s-1)),Bi.ASCII_ENCODE;if(s===129)return Bi.PAD_ENCODE;if(s<=229){var i=s-130;i<10&&r.append("0"),r.append(""+i)}else switch(s){case 230:return Bi.C40_ENCODE;case 231:return Bi.BASE256_ENCODE;case 232:r.append("");break;case 233:case 234:break;case 235:a=!0;break;case 236:r.append("[)>05"),n.insert(0,"");break;case 237:r.append("[)>06"),n.insert(0,"");break;case 238:return Bi.ANSIX12_ENCODE;case 239:return Bi.TEXT_ENCODE;case 240:return Bi.EDIFACT_ENCODE;case 241:break;default:if(s!==254||e.available()!==0)throw new Nr;break}}while(e.available()>0);return Bi.ASCII_ENCODE},t.decodeC40Segment=function(e,r){var n=!1,a=[],s=0;do{if(e.available()===8)return;var i=e.readBits(8);if(i===254)return;this.parseTwoBytes(i,e.readBits(8),a);for(var l=0;l<3;l++){var c=a[l];switch(s){case 0:if(c<3)s=c+1;else if(c<this.C40_BASIC_SET_CHARS.length){var u=this.C40_BASIC_SET_CHARS[c];n?(r.append(String.fromCharCode(u.charCodeAt(0)+128)),n=!1):r.append(u)}else throw new Nr;break;case 1:n?(r.append(String.fromCharCode(c+128)),n=!1):r.append(String.fromCharCode(c)),s=0;break;case 2:if(c<this.C40_SHIFT2_SET_CHARS.length){var u=this.C40_SHIFT2_SET_CHARS[c];n?(r.append(String.fromCharCode(u.charCodeAt(0)+128)),n=!1):r.append(u)}else switch(c){case 27:r.append("");break;case 30:n=!0;break;default:throw new Nr}s=0;break;case 3:n?(r.append(String.fromCharCode(c+224)),n=!1):r.append(String.fromCharCode(c+96)),s=0;break;default:throw new Nr}}}while(e.available()>0)},t.decodeTextSegment=function(e,r){var n=!1,a=[],s=0;do{if(e.available()===8)return;var i=e.readBits(8);if(i===254)return;this.parseTwoBytes(i,e.readBits(8),a);for(var l=0;l<3;l++){var c=a[l];switch(s){case 0:if(c<3)s=c+1;else if(c<this.TEXT_BASIC_SET_CHARS.length){var u=this.TEXT_BASIC_SET_CHARS[c];n?(r.append(String.fromCharCode(u.charCodeAt(0)+128)),n=!1):r.append(u)}else throw new Nr;break;case 1:n?(r.append(String.fromCharCode(c+128)),n=!1):r.append(String.fromCharCode(c)),s=0;break;case 2:if(c<this.TEXT_SHIFT2_SET_CHARS.length){var u=this.TEXT_SHIFT2_SET_CHARS[c];n?(r.append(String.fromCharCode(u.charCodeAt(0)+128)),n=!1):r.append(u)}else switch(c){case 27:r.append("");break;case 30:n=!0;break;default:throw new Nr}s=0;break;case 3:if(c<this.TEXT_SHIFT3_SET_CHARS.length){var u=this.TEXT_SHIFT3_SET_CHARS[c];n?(r.append(String.fromCharCode(u.charCodeAt(0)+128)),n=!1):r.append(u),s=0}else throw new Nr;break;default:throw new Nr}}}while(e.available()>0)},t.decodeAnsiX12Segment=function(e,r){var n=[];do{if(e.available()===8)return;var a=e.readBits(8);if(a===254)return;this.parseTwoBytes(a,e.readBits(8),n);for(var s=0;s<3;s++){var i=n[s];switch(i){case 0:r.append("\r");break;case 1:r.append("*");break;case 2:r.append(">");break;case 3:r.append(" ");break;default:if(i<14)r.append(String.fromCharCode(i+44));else if(i<40)r.append(String.fromCharCode(i+51));else throw new Nr;break}}}while(e.available()>0)},t.parseTwoBytes=function(e,r,n){var a=(e<<8)+r-1,s=Math.floor(a/1600);n[0]=s,a-=s*1600,s=Math.floor(a/40),n[1]=s,n[2]=a-s*40},t.decodeEdifactSegment=function(e,r){do{if(e.available()<=16)return;for(var n=0;n<4;n++){var a=e.readBits(6);if(a===31){var s=8-e.getBitOffset();s!==8&&e.readBits(s);return}a&32||(a|=64),r.append(String.fromCharCode(a))}}while(e.available()>0)},t.decodeBase256Segment=function(e,r,n){var a=1+e.getByteOffset(),s=this.unrandomize255State(e.readBits(8),a++),i;if(s===0?i=e.available()/8|0:s<250?i=s:i=250*(s-249)+this.unrandomize255State(e.readBits(8),a++),i<0)throw new Nr;for(var l=new Uint8Array(i),c=0;c<i;c++){if(e.available()<8)throw new Nr;l[c]=this.unrandomize255State(e.readBits(8),a++)}n.push(l);try{r.append(Vu.decode(l,Kn.ISO88591))}catch(u){throw new iw("Platform does not support required encoding: "+u.message)}},t.unrandomize255State=function(e,r){var n=149*r%255+1,a=e-n;return a>=0?a:a+256},t.C40_BASIC_SET_CHARS=["*","*","*"," ","0","1","2","3","4","5","6","7","8","9","A","B","C","D","E","F","G","H","I","J","K","L","M","N","O","P","Q","R","S","T","U","V","W","X","Y","Z"],t.C40_SHIFT2_SET_CHARS=["!",'"',"#","$","%","&","'","(",")","*","+",",","-",".","/",":",";","<","=",">","?","@","[","\\","]","^","_"],t.TEXT_BASIC_SET_CHARS=["*","*","*"," ","0","1","2","3","4","5","6","7","8","9","a","b","c","d","e","f","g","h","i","j","k","l","m","n","o","p","q","r","s","t","u","v","w","x","y","z"],t.TEXT_SHIFT2_SET_CHARS=t.C40_SHIFT2_SET_CHARS,t.TEXT_SHIFT3_SET_CHARS=["`","A","B","C","D","E","F","G","H","I","J","K","L","M","N","O","P","Q","R","S","T","U","V","W","X","Y","Z","{","|","}","~",""],t}(),b3e=function(t){var e=typeof Symbol=="function"&&Symbol.iterator,r=e&&t[e],n=0;if(r)return r.call(t);if(t&&typeof t.length=="number")return{next:function(){return t&&n>=t.length&&(t=void 0),{value:t&&t[n++],done:!t}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")},w3e=function(){function t(){this.rsDecoder=new C4(oc.DATA_MATRIX_FIELD_256)}return t.prototype.decode=function(e){var r,n,a=new x3e(e),s=a.getVersion(),i=a.readCodewords(),l=v3e.getDataBlocks(i,s),c=0;try{for(var u=b3e(l),d=u.next();!d.done;d=u.next()){var f=d.value;c+=f.getNumDataCodewords()}}catch(b){r={error:b}}finally{try{d&&!d.done&&(n=u.return)&&n.call(u)}finally{if(r)throw r.error}}for(var h=new Uint8Array(c),A=l.length,m=0;m<A;m++){var p=l[m],g=p.getCodewords(),x=p.getNumDataCodewords();this.correctErrors(g,x);for(var y=0;y<x;y++)h[y*A+m]=g[y]}return y3e.decode(h)},t.prototype.correctErrors=function(e,r){var n=new Int32Array(e);try{this.rsDecoder.decode(n,e.length-r)}catch{throw new bi}for(var a=0;a<r;a++)e[a]=n[a]},t}(),N3e=function(){function t(e){this.image=e,this.rectangleDetector=new ZT(this.image)}return t.prototype.detect=function(){var e=this.rectangleDetector.detect(),r=this.detectSolid1(e);if(r=this.detectSolid2(r),r[3]=this.correctTopRight(r),!r[3])throw new Wt;r=this.shiftToModuleCenter(r);var n=r[0],a=r[1],s=r[2],i=r[3],l=this.transitionsBetween(n,i)+1,c=this.transitionsBetween(s,i)+1;(l&1)===1&&(l+=1),(c&1)===1&&(c+=1),4*l<7*c&&4*c<7*l&&(l=c=Math.max(l,c));var u=t.sampleGrid(this.image,n,a,s,i,l,c);return new U6(u,[n,a,s,i])},t.shiftPoint=function(e,r,n){var a=(r.getX()-e.getX())/(n+1),s=(r.getY()-e.getY())/(n+1);return new Vr(e.getX()+a,e.getY()+s)},t.moveAway=function(e,r,n){var a=e.getX(),s=e.getY();return a<r?a-=1:a+=1,s<n?s-=1:s+=1,new Vr(a,s)},t.prototype.detectSolid1=function(e){var r=e[0],n=e[1],a=e[3],s=e[2],i=this.transitionsBetween(r,n),l=this.transitionsBetween(n,a),c=this.transitionsBetween(a,s),u=this.transitionsBetween(s,r),d=i,f=[s,r,n,a];return d>l&&(d=l,f[0]=r,f[1]=n,f[2]=a,f[3]=s),d>c&&(d=c,f[0]=n,f[1]=a,f[2]=s,f[3]=r),d>u&&(f[0]=a,f[1]=s,f[2]=r,f[3]=n),f},t.prototype.detectSolid2=function(e){var r=e[0],n=e[1],a=e[2],s=e[3],i=this.transitionsBetween(r,s),l=t.shiftPoint(n,a,(i+1)*4),c=t.shiftPoint(a,n,(i+1)*4),u=this.transitionsBetween(l,r),d=this.transitionsBetween(c,s);return u<d?(e[0]=r,e[1]=n,e[2]=a,e[3]=s):(e[0]=n,e[1]=a,e[2]=s,e[3]=r),e},t.prototype.correctTopRight=function(e){var r=e[0],n=e[1],a=e[2],s=e[3],i=this.transitionsBetween(r,s),l=this.transitionsBetween(n,s),c=t.shiftPoint(r,n,(l+1)*4),u=t.shiftPoint(a,n,(i+1)*4);i=this.transitionsBetween(c,s),l=this.transitionsBetween(u,s);var d=new Vr(s.getX()+(a.getX()-n.getX())/(i+1),s.getY()+(a.getY()-n.getY())/(i+1)),f=new Vr(s.getX()+(r.getX()-n.getX())/(l+1),s.getY()+(r.getY()-n.getY())/(l+1));if(!this.isValid(d))return this.isValid(f)?f:null;if(!this.isValid(f))return d;var h=this.transitionsBetween(c,d)+this.transitionsBetween(u,d),A=this.transitionsBetween(c,f)+this.transitionsBetween(u,f);return h>A?d:f},t.prototype.shiftToModuleCenter=function(e){var r=e[0],n=e[1],a=e[2],s=e[3],i=this.transitionsBetween(r,s)+1,l=this.transitionsBetween(a,s)+1,c=t.shiftPoint(r,n,l*4),u=t.shiftPoint(a,n,i*4);i=this.transitionsBetween(c,s)+1,l=this.transitionsBetween(u,s)+1,(i&1)===1&&(i+=1),(l&1)===1&&(l+=1);var d=(r.getX()+n.getX()+a.getX()+s.getX())/4,f=(r.getY()+n.getY()+a.getY()+s.getY())/4;r=t.moveAway(r,d,f),n=t.moveAway(n,d,f),a=t.moveAway(a,d,f),s=t.moveAway(s,d,f);var h,A;return c=t.shiftPoint(r,n,l*4),c=t.shiftPoint(c,s,i*4),h=t.shiftPoint(n,r,l*4),h=t.shiftPoint(h,a,i*4),u=t.shiftPoint(a,s,l*4),u=t.shiftPoint(u,n,i*4),A=t.shiftPoint(s,a,l*4),A=t.shiftPoint(A,r,i*4),[c,h,u,A]},t.prototype.isValid=function(e){return e.getX()>=0&&e.getX()<this.image.getWidth()&&e.getY()>0&&e.getY()<this.image.getHeight()},t.sampleGrid=function(e,r,n,a,s,i,l){var c=Q6.getInstance();return c.sampleGrid(e,i,l,.5,.5,i-.5,.5,i-.5,l-.5,.5,l-.5,r.getX(),r.getY(),s.getX(),s.getY(),a.getX(),a.getY(),n.getX(),n.getY())},t.prototype.transitionsBetween=function(e,r){var n=Math.trunc(e.getX()),a=Math.trunc(e.getY()),s=Math.trunc(r.getX()),i=Math.trunc(r.getY()),l=Math.abs(i-a)>Math.abs(s-n);if(l){var c=n;n=a,a=c,c=s,s=i,i=c}for(var u=Math.abs(s-n),d=Math.abs(i-a),f=-u/2,h=a<i?1:-1,A=n<s?1:-1,m=0,p=this.image.get(l?a:n,l?n:a),g=n,x=a;g!==s;g+=A){var y=this.image.get(l?x:g,l?g:x);if(y!==p&&(m++,p=y),f+=d,f>0){if(x===i)break;x+=h,f-=u}}return m},t}(),sS=function(){function t(){this.decoder=new w3e}return t.prototype.decode=function(e,r){r===void 0&&(r=null);var n,a;if(r!=null&&r.has(Ga.PURE_BARCODE)){var s=t.extractPureBits(e.getBlackMatrix());n=this.decoder.decode(s),a=t.NO_POINTS}else{var i=new N3e(e.getBlackMatrix()).detect();n=this.decoder.decode(i.getBits()),a=i.getPoints()}var l=n.getRawBytes(),c=new bl(n.getText(),l,8*l.length,a,Zr.DATA_MATRIX,Ka.currentTimeMillis()),u=n.getByteSegments();u!=null&&c.putMetadata($o.BYTE_SEGMENTS,u);var d=n.getECLevel();return d!=null&&c.putMetadata($o.ERROR_CORRECTION_LEVEL,d),c},t.prototype.reset=function(){},t.extractPureBits=function(e){var r=e.getTopLeftOnBit(),n=e.getBottomRightOnBit();if(r==null||n==null)throw new Wt;var a=this.moduleSize(r,e),s=r[1],i=n[1],l=r[0],c=n[0],u=(c-l+1)/a,d=(i-s+1)/a;if(u<=0||d<=0)throw new Wt;var f=a/2;s+=f,l+=f;for(var h=new Sf(u,d),A=0;A<d;A++)for(var m=s+A*a,p=0;p<u;p++)e.get(l+p*a,m)&&h.set(p,A);return h},t.moduleSize=function(e,r){for(var n=r.getWidth(),a=e[0],s=e[1];a<n&&r.get(a,s);)a++;if(a===n)throw new Wt;var i=a-e[0];if(i===0)throw new Wt;return i},t.NO_POINTS=[],t}(),C3e=function(){var t=function(e,r){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,a){n.__proto__=a}||function(n,a){for(var s in a)a.hasOwnProperty(s)&&(n[s]=a[s])},t(e,r)};return function(e,r){t(e,r);function n(){this.constructor=e}e.prototype=r===null?Object.create(r):(n.prototype=r.prototype,new n)}}();(function(t){C3e(e,t);function e(r){return r===void 0&&(r=500),t.call(this,new sS,r)||this}return e})(Lv);var Nx;(function(t){t[t.L=0]="L",t[t.M=1]="M",t[t.Q=2]="Q",t[t.H=3]="H"})(Nx||(Nx={}));var _3e=function(){function t(e,r,n){this.value=e,this.stringValue=r,this.bits=n,t.FOR_BITS.set(n,this),t.FOR_VALUE.set(e,this)}return t.prototype.getValue=function(){return this.value},t.prototype.getBits=function(){return this.bits},t.fromString=function(e){switch(e){case"L":return t.L;case"M":return t.M;case"Q":return t.Q;case"H":return t.H;default:throw new si(e+"not available")}},t.prototype.toString=function(){return this.stringValue},t.prototype.equals=function(e){if(!(e instanceof t))return!1;var r=e;return this.value===r.value},t.forBits=function(e){if(e<0||e>=t.FOR_BITS.size)throw new en;return t.FOR_BITS.get(e)},t.FOR_BITS=new Map,t.FOR_VALUE=new Map,t.L=new t(Nx.L,"L",1),t.M=new t(Nx.M,"M",0),t.Q=new t(Nx.Q,"Q",3),t.H=new t(Nx.H,"H",2),t}(),E3e=function(t){var e=typeof Symbol=="function"&&Symbol.iterator,r=e&&t[e],n=0;if(r)return r.call(t);if(t&&typeof t.length=="number")return{next:function(){return t&&n>=t.length&&(t=void 0),{value:t&&t[n++],done:!t}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")},bte=function(){function t(e){this.errorCorrectionLevel=_3e.forBits(e>>3&3),this.dataMask=e&7}return t.numBitsDiffering=function(e,r){return Bn.bitCount(e^r)},t.decodeFormatInformation=function(e,r){var n=t.doDecodeFormatInformation(e,r);return n!==null?n:t.doDecodeFormatInformation(e^t.FORMAT_INFO_MASK_QR,r^t.FORMAT_INFO_MASK_QR)},t.doDecodeFormatInformation=function(e,r){var n,a,s=Number.MAX_SAFE_INTEGER,i=0;try{for(var l=E3e(t.FORMAT_INFO_DECODE_LOOKUP),c=l.next();!c.done;c=l.next()){var u=c.value,d=u[0];if(d===e||d===r)return new t(u[1]);var f=t.numBitsDiffering(e,d);f<s&&(i=u[1],s=f),e!==r&&(f=t.numBitsDiffering(r,d),f<s&&(i=u[1],s=f))}}catch(h){n={error:h}}finally{try{c&&!c.done&&(a=l.return)&&a.call(l)}finally{if(n)throw n.error}}return s<=3?new t(i):null},t.prototype.getErrorCorrectionLevel=function(){return this.errorCorrectionLevel},t.prototype.getDataMask=function(){return this.dataMask},t.prototype.hashCode=function(){return this.errorCorrectionLevel.getBits()<<3|this.dataMask},t.prototype.equals=function(e){if(!(e instanceof t))return!1;var r=e;return this.errorCorrectionLevel===r.errorCorrectionLevel&&this.dataMask===r.dataMask},t.FORMAT_INFO_MASK_QR=21522,t.FORMAT_INFO_DECODE_LOOKUP=[Int32Array.from([21522,0]),Int32Array.from([20773,1]),Int32Array.from([24188,2]),Int32Array.from([23371,3]),Int32Array.from([17913,4]),Int32Array.from([16590,5]),Int32Array.from([20375,6]),Int32Array.from([19104,7]),Int32Array.from([30660,8]),Int32Array.from([29427,9]),Int32Array.from([32170,10]),Int32Array.from([30877,11]),Int32Array.from([26159,12]),Int32Array.from([25368,13]),Int32Array.from([27713,14]),Int32Array.from([26998,15]),Int32Array.from([5769,16]),Int32Array.from([5054,17]),Int32Array.from([7399,18]),Int32Array.from([6608,19]),Int32Array.from([1890,20]),Int32Array.from([597,21]),Int32Array.from([3340,22]),Int32Array.from([2107,23]),Int32Array.from([13663,24]),Int32Array.from([12392,25]),Int32Array.from([16177,26]),Int32Array.from([14854,27]),Int32Array.from([9396,28]),Int32Array.from([8579,29]),Int32Array.from([11994,30]),Int32Array.from([11245,31])],t}(),S3e=function(t){var e=typeof Symbol=="function"&&Symbol.iterator,r=e&&t[e],n=0;if(r)return r.call(t);if(t&&typeof t.length=="number")return{next:function(){return t&&n>=t.length&&(t=void 0),{value:t&&t[n++],done:!t}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")},Pt=function(){function t(e){for(var r=[],n=1;n<arguments.length;n++)r[n-1]=arguments[n];this.ecCodewordsPerBlock=e,this.ecBlocks=r}return t.prototype.getECCodewordsPerBlock=function(){return this.ecCodewordsPerBlock},t.prototype.getNumBlocks=function(){var e,r,n=0,a=this.ecBlocks;try{for(var s=S3e(a),i=s.next();!i.done;i=s.next()){var l=i.value;n+=l.getCount()}}catch(c){e={error:c}}finally{try{i&&!i.done&&(r=s.return)&&r.call(s)}finally{if(e)throw e.error}}return n},t.prototype.getTotalECCodewords=function(){return this.ecCodewordsPerBlock*this.getNumBlocks()},t.prototype.getECBlocks=function(){return this.ecBlocks},t}(),ze=function(){function t(e,r){this.count=e,this.dataCodewords=r}return t.prototype.getCount=function(){return this.count},t.prototype.getDataCodewords=function(){return this.dataCodewords},t}(),I3e=function(t){var e=typeof Symbol=="function"&&Symbol.iterator,r=e&&t[e],n=0;if(r)return r.call(t);if(t&&typeof t.length=="number")return{next:function(){return t&&n>=t.length&&(t=void 0),{value:t&&t[n++],done:!t}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")},lp=function(){function t(e,r){for(var n,a,s=[],i=2;i<arguments.length;i++)s[i-2]=arguments[i];this.versionNumber=e,this.alignmentPatternCenters=r,this.ecBlocks=s;var l=0,c=s[0].getECCodewordsPerBlock(),u=s[0].getECBlocks();try{for(var d=I3e(u),f=d.next();!f.done;f=d.next()){var h=f.value;l+=h.getCount()*(h.getDataCodewords()+c)}}catch(A){n={error:A}}finally{try{f&&!f.done&&(a=d.return)&&a.call(d)}finally{if(n)throw n.error}}this.totalCodewords=l}return t.prototype.getVersionNumber=function(){return this.versionNumber},t.prototype.getAlignmentPatternCenters=function(){return this.alignmentPatternCenters},t.prototype.getTotalCodewords=function(){return this.totalCodewords},t.prototype.getDimensionForVersion=function(){return 17+4*this.versionNumber},t.prototype.getECBlocksForLevel=function(e){return this.ecBlocks[e.getValue()]},t.getProvisionalVersionForDimension=function(e){if(e%4!==1)throw new Nr;try{return this.getVersionForNumber((e-17)/4)}catch{throw new Nr}},t.getVersionForNumber=function(e){if(e<1||e>40)throw new en;return t.VERSIONS[e-1]},t.decodeVersionInformation=function(e){for(var r=Number.MAX_SAFE_INTEGER,n=0,a=0;a<t.VERSION_DECODE_INFO.length;a++){var s=t.VERSION_DECODE_INFO[a];if(s===e)return t.getVersionForNumber(a+7);var i=bte.numBitsDiffering(e,s);i<r&&(n=a+7,r=i)}return r<=3?t.getVersionForNumber(n):null},t.prototype.buildFunctionPattern=function(){var e=this.getDimensionForVersion(),r=new Sf(e);r.setRegion(0,0,9,9),r.setRegion(e-8,0,8,9),r.setRegion(0,e-8,9,8);for(var n=this.alignmentPatternCenters.length,a=0;a<n;a++)for(var s=this.alignmentPatternCenters[a]-2,i=0;i<n;i++)a===0&&(i===0||i===n-1)||a===n-1&&i===0||r.setRegion(this.alignmentPatternCenters[i]-2,s,5,5);return r.setRegion(6,9,1,e-17),r.setRegion(9,6,e-17,1),this.versionNumber>6&&(r.setRegion(e-11,0,3,6),r.setRegion(0,e-11,6,3)),r},t.prototype.toString=function(){return""+this.versionNumber},t.VERSION_DECODE_INFO=Int32Array.from([31892,34236,39577,42195,48118,51042,55367,58893,63784,68472,70749,76311,79154,84390,87683,92361,96236,102084,102881,110507,110734,117786,119615,126325,127568,133589,136944,141498,145311,150283,152622,158308,161089,167017]),t.VERSIONS=[new t(1,new Int32Array(0),new Pt(7,new ze(1,19)),new Pt(10,new ze(1,16)),new Pt(13,new ze(1,13)),new Pt(17,new ze(1,9))),new t(2,Int32Array.from([6,18]),new Pt(10,new ze(1,34)),new Pt(16,new ze(1,28)),new Pt(22,new ze(1,22)),new Pt(28,new ze(1,16))),new t(3,Int32Array.from([6,22]),new Pt(15,new ze(1,55)),new Pt(26,new ze(1,44)),new Pt(18,new ze(2,17)),new Pt(22,new ze(2,13))),new t(4,Int32Array.from([6,26]),new Pt(20,new ze(1,80)),new Pt(18,new ze(2,32)),new Pt(26,new ze(2,24)),new Pt(16,new ze(4,9))),new t(5,Int32Array.from([6,30]),new Pt(26,new ze(1,108)),new Pt(24,new ze(2,43)),new Pt(18,new ze(2,15),new ze(2,16)),new Pt(22,new ze(2,11),new ze(2,12))),new t(6,Int32Array.from([6,34]),new Pt(18,new ze(2,68)),new Pt(16,new ze(4,27)),new Pt(24,new ze(4,19)),new Pt(28,new ze(4,15))),new t(7,Int32Array.from([6,22,38]),new Pt(20,new ze(2,78)),new Pt(18,new ze(4,31)),new Pt(18,new ze(2,14),new ze(4,15)),new Pt(26,new ze(4,13),new ze(1,14))),new t(8,Int32Array.from([6,24,42]),new Pt(24,new ze(2,97)),new Pt(22,new ze(2,38),new ze(2,39)),new Pt(22,new ze(4,18),new ze(2,19)),new Pt(26,new ze(4,14),new ze(2,15))),new t(9,Int32Array.from([6,26,46]),new Pt(30,new ze(2,116)),new Pt(22,new ze(3,36),new ze(2,37)),new Pt(20,new ze(4,16),new ze(4,17)),new Pt(24,new ze(4,12),new ze(4,13))),new t(10,Int32Array.from([6,28,50]),new Pt(18,new ze(2,68),new ze(2,69)),new Pt(26,new ze(4,43),new ze(1,44)),new Pt(24,new ze(6,19),new ze(2,20)),new Pt(28,new ze(6,15),new ze(2,16))),new t(11,Int32Array.from([6,30,54]),new Pt(20,new ze(4,81)),new Pt(30,new ze(1,50),new ze(4,51)),new Pt(28,new ze(4,22),new ze(4,23)),new Pt(24,new ze(3,12),new ze(8,13))),new t(12,Int32Array.from([6,32,58]),new Pt(24,new ze(2,92),new ze(2,93)),new Pt(22,new ze(6,36),new ze(2,37)),new Pt(26,new ze(4,20),new ze(6,21)),new Pt(28,new ze(7,14),new ze(4,15))),new t(13,Int32Array.from([6,34,62]),new Pt(26,new ze(4,107)),new Pt(22,new ze(8,37),new ze(1,38)),new Pt(24,new ze(8,20),new ze(4,21)),new Pt(22,new ze(12,11),new ze(4,12))),new t(14,Int32Array.from([6,26,46,66]),new Pt(30,new ze(3,115),new ze(1,116)),new Pt(24,new ze(4,40),new ze(5,41)),new Pt(20,new ze(11,16),new ze(5,17)),new Pt(24,new ze(11,12),new ze(5,13))),new t(15,Int32Array.from([6,26,48,70]),new Pt(22,new ze(5,87),new ze(1,88)),new Pt(24,new ze(5,41),new ze(5,42)),new Pt(30,new ze(5,24),new ze(7,25)),new Pt(24,new ze(11,12),new ze(7,13))),new t(16,Int32Array.from([6,26,50,74]),new Pt(24,new ze(5,98),new ze(1,99)),new Pt(28,new ze(7,45),new ze(3,46)),new Pt(24,new ze(15,19),new ze(2,20)),new Pt(30,new ze(3,15),new ze(13,16))),new t(17,Int32Array.from([6,30,54,78]),new Pt(28,new ze(1,107),new ze(5,108)),new Pt(28,new ze(10,46),new ze(1,47)),new Pt(28,new ze(1,22),new ze(15,23)),new Pt(28,new ze(2,14),new ze(17,15))),new t(18,Int32Array.from([6,30,56,82]),new Pt(30,new ze(5,120),new ze(1,121)),new Pt(26,new ze(9,43),new ze(4,44)),new Pt(28,new ze(17,22),new ze(1,23)),new Pt(28,new ze(2,14),new ze(19,15))),new t(19,Int32Array.from([6,30,58,86]),new Pt(28,new ze(3,113),new ze(4,114)),new Pt(26,new ze(3,44),new ze(11,45)),new Pt(26,new ze(17,21),new ze(4,22)),new Pt(26,new ze(9,13),new ze(16,14))),new t(20,Int32Array.from([6,34,62,90]),new Pt(28,new ze(3,107),new ze(5,108)),new Pt(26,new ze(3,41),new ze(13,42)),new Pt(30,new ze(15,24),new ze(5,25)),new Pt(28,new ze(15,15),new ze(10,16))),new t(21,Int32Array.from([6,28,50,72,94]),new Pt(28,new ze(4,116),new ze(4,117)),new Pt(26,new ze(17,42)),new Pt(28,new ze(17,22),new ze(6,23)),new Pt(30,new ze(19,16),new ze(6,17))),new t(22,Int32Array.from([6,26,50,74,98]),new Pt(28,new ze(2,111),new ze(7,112)),new Pt(28,new ze(17,46)),new Pt(30,new ze(7,24),new ze(16,25)),new Pt(24,new ze(34,13))),new t(23,Int32Array.from([6,30,54,78,102]),new Pt(30,new ze(4,121),new ze(5,122)),new Pt(28,new ze(4,47),new ze(14,48)),new Pt(30,new ze(11,24),new ze(14,25)),new Pt(30,new ze(16,15),new ze(14,16))),new t(24,Int32Array.from([6,28,54,80,106]),new Pt(30,new ze(6,117),new ze(4,118)),new Pt(28,new ze(6,45),new ze(14,46)),new Pt(30,new ze(11,24),new ze(16,25)),new Pt(30,new ze(30,16),new ze(2,17))),new t(25,Int32Array.from([6,32,58,84,110]),new Pt(26,new ze(8,106),new ze(4,107)),new Pt(28,new ze(8,47),new ze(13,48)),new Pt(30,new ze(7,24),new ze(22,25)),new Pt(30,new ze(22,15),new ze(13,16))),new t(26,Int32Array.from([6,30,58,86,114]),new Pt(28,new ze(10,114),new ze(2,115)),new Pt(28,new ze(19,46),new ze(4,47)),new Pt(28,new ze(28,22),new ze(6,23)),new Pt(30,new ze(33,16),new ze(4,17))),new t(27,Int32Array.from([6,34,62,90,118]),new Pt(30,new ze(8,122),new ze(4,123)),new Pt(28,new ze(22,45),new ze(3,46)),new Pt(30,new ze(8,23),new ze(26,24)),new Pt(30,new ze(12,15),new ze(28,16))),new t(28,Int32Array.from([6,26,50,74,98,122]),new Pt(30,new ze(3,117),new ze(10,118)),new Pt(28,new ze(3,45),new ze(23,46)),new Pt(30,new ze(4,24),new ze(31,25)),new Pt(30,new ze(11,15),new ze(31,16))),new t(29,Int32Array.from([6,30,54,78,102,126]),new Pt(30,new ze(7,116),new ze(7,117)),new Pt(28,new ze(21,45),new ze(7,46)),new Pt(30,new ze(1,23),new ze(37,24)),new Pt(30,new ze(19,15),new ze(26,16))),new t(30,Int32Array.from([6,26,52,78,104,130]),new Pt(30,new ze(5,115),new ze(10,116)),new Pt(28,new ze(19,47),new ze(10,48)),new Pt(30,new ze(15,24),new ze(25,25)),new Pt(30,new ze(23,15),new ze(25,16))),new t(31,Int32Array.from([6,30,56,82,108,134]),new Pt(30,new ze(13,115),new ze(3,116)),new Pt(28,new ze(2,46),new ze(29,47)),new Pt(30,new ze(42,24),new ze(1,25)),new Pt(30,new ze(23,15),new ze(28,16))),new t(32,Int32Array.from([6,34,60,86,112,138]),new Pt(30,new ze(17,115)),new Pt(28,new ze(10,46),new ze(23,47)),new Pt(30,new ze(10,24),new ze(35,25)),new Pt(30,new ze(19,15),new ze(35,16))),new t(33,Int32Array.from([6,30,58,86,114,142]),new Pt(30,new ze(17,115),new ze(1,116)),new Pt(28,new ze(14,46),new ze(21,47)),new Pt(30,new ze(29,24),new ze(19,25)),new Pt(30,new ze(11,15),new ze(46,16))),new t(34,Int32Array.from([6,34,62,90,118,146]),new Pt(30,new ze(13,115),new ze(6,116)),new Pt(28,new ze(14,46),new ze(23,47)),new Pt(30,new ze(44,24),new ze(7,25)),new Pt(30,new ze(59,16),new ze(1,17))),new t(35,Int32Array.from([6,30,54,78,102,126,150]),new Pt(30,new ze(12,121),new ze(7,122)),new Pt(28,new ze(12,47),new ze(26,48)),new Pt(30,new ze(39,24),new ze(14,25)),new Pt(30,new ze(22,15),new ze(41,16))),new t(36,Int32Array.from([6,24,50,76,102,128,154]),new Pt(30,new ze(6,121),new ze(14,122)),new Pt(28,new ze(6,47),new ze(34,48)),new Pt(30,new ze(46,24),new ze(10,25)),new Pt(30,new ze(2,15),new ze(64,16))),new t(37,Int32Array.from([6,28,54,80,106,132,158]),new Pt(30,new ze(17,122),new ze(4,123)),new Pt(28,new ze(29,46),new ze(14,47)),new Pt(30,new ze(49,24),new ze(10,25)),new Pt(30,new ze(24,15),new ze(46,16))),new t(38,Int32Array.from([6,32,58,84,110,136,162]),new Pt(30,new ze(4,122),new ze(18,123)),new Pt(28,new ze(13,46),new ze(32,47)),new Pt(30,new ze(48,24),new ze(14,25)),new Pt(30,new ze(42,15),new ze(32,16))),new t(39,Int32Array.from([6,26,54,82,110,138,166]),new Pt(30,new ze(20,117),new ze(4,118)),new Pt(28,new ze(40,47),new ze(7,48)),new Pt(30,new ze(43,24),new ze(22,25)),new Pt(30,new ze(10,15),new ze(67,16))),new t(40,Int32Array.from([6,30,58,86,114,142,170]),new Pt(30,new ze(19,118),new ze(6,119)),new Pt(28,new ze(18,47),new ze(31,48)),new Pt(30,new ze(34,24),new ze(34,25)),new Pt(30,new ze(20,15),new ze(61,16)))],t}(),no;(function(t){t[t.DATA_MASK_000=0]="DATA_MASK_000",t[t.DATA_MASK_001=1]="DATA_MASK_001",t[t.DATA_MASK_010=2]="DATA_MASK_010",t[t.DATA_MASK_011=3]="DATA_MASK_011",t[t.DATA_MASK_100=4]="DATA_MASK_100",t[t.DATA_MASK_101=5]="DATA_MASK_101",t[t.DATA_MASK_110=6]="DATA_MASK_110",t[t.DATA_MASK_111=7]="DATA_MASK_111"})(no||(no={}));var pV=function(){function t(e,r){this.value=e,this.isMasked=r}return t.prototype.unmaskBitMatrix=function(e,r){for(var n=0;n<r;n++)for(var a=0;a<r;a++)this.isMasked(n,a)&&e.flip(a,n)},t.values=new Map([[no.DATA_MASK_000,new t(no.DATA_MASK_000,function(e,r){return(e+r&1)===0})],[no.DATA_MASK_001,new t(no.DATA_MASK_001,function(e,r){return(e&1)===0})],[no.DATA_MASK_010,new t(no.DATA_MASK_010,function(e,r){return r%3===0})],[no.DATA_MASK_011,new t(no.DATA_MASK_011,function(e,r){return(e+r)%3===0})],[no.DATA_MASK_100,new t(no.DATA_MASK_100,function(e,r){return(Math.floor(e/2)+Math.floor(r/3)&1)===0})],[no.DATA_MASK_101,new t(no.DATA_MASK_101,function(e,r){return e*r%6===0})],[no.DATA_MASK_110,new t(no.DATA_MASK_110,function(e,r){return e*r%6<3})],[no.DATA_MASK_111,new t(no.DATA_MASK_111,function(e,r){return(e+r+e*r%3&1)===0})]]),t}(),j3e=function(){function t(e){var r=e.getHeight();if(r<21||(r&3)!==1)throw new Nr;this.bitMatrix=e}return t.prototype.readFormatInformation=function(){if(this.parsedFormatInfo!==null&&this.parsedFormatInfo!==void 0)return this.parsedFormatInfo;for(var e=0,r=0;r<6;r++)e=this.copyBit(r,8,e);e=this.copyBit(7,8,e),e=this.copyBit(8,8,e),e=this.copyBit(8,7,e);for(var n=5;n>=0;n--)e=this.copyBit(8,n,e);for(var a=this.bitMatrix.getHeight(),s=0,i=a-7,n=a-1;n>=i;n--)s=this.copyBit(8,n,s);for(var r=a-8;r<a;r++)s=this.copyBit(r,8,s);if(this.parsedFormatInfo=bte.decodeFormatInformation(e,s),this.parsedFormatInfo!==null)return this.parsedFormatInfo;throw new Nr},t.prototype.readVersion=function(){if(this.parsedVersion!==null&&this.parsedVersion!==void 0)return this.parsedVersion;var e=this.bitMatrix.getHeight(),r=Math.floor((e-17)/4);if(r<=6)return lp.getVersionForNumber(r);for(var n=0,a=e-11,s=5;s>=0;s--)for(var i=e-9;i>=a;i--)n=this.copyBit(i,s,n);var l=lp.decodeVersionInformation(n);if(l!==null&&l.getDimensionForVersion()===e)return this.parsedVersion=l,l;n=0;for(var i=5;i>=0;i--)for(var s=e-9;s>=a;s--)n=this.copyBit(i,s,n);if(l=lp.decodeVersionInformation(n),l!==null&&l.getDimensionForVersion()===e)return this.parsedVersion=l,l;throw new Nr},t.prototype.copyBit=function(e,r,n){var a=this.isMirror?this.bitMatrix.get(r,e):this.bitMatrix.get(e,r);return a?n<<1|1:n<<1},t.prototype.readCodewords=function(){var e=this.readFormatInformation(),r=this.readVersion(),n=pV.values.get(e.getDataMask()),a=this.bitMatrix.getHeight();n.unmaskBitMatrix(this.bitMatrix,a);for(var s=r.buildFunctionPattern(),i=!0,l=new Uint8Array(r.getTotalCodewords()),c=0,u=0,d=0,f=a-1;f>0;f-=2){f===6&&f--;for(var h=0;h<a;h++)for(var A=i?a-1-h:h,m=0;m<2;m++)s.get(f-m,A)||(d++,u<<=1,this.bitMatrix.get(f-m,A)&&(u|=1),d===8&&(l[c++]=u,d=0,u=0));i=!i}if(c!==r.getTotalCodewords())throw new Nr;return l},t.prototype.remask=function(){if(this.parsedFormatInfo!==null){var e=pV.values.get(this.parsedFormatInfo.getDataMask()),r=this.bitMatrix.getHeight();e.unmaskBitMatrix(this.bitMatrix,r)}},t.prototype.setMirror=function(e){this.parsedVersion=null,this.parsedFormatInfo=null,this.isMirror=e},t.prototype.mirror=function(){for(var e=this.bitMatrix,r=0,n=e.getWidth();r<n;r++)for(var a=r+1,s=e.getHeight();a<s;a++)e.get(r,a)!==e.get(a,r)&&(e.flip(a,r),e.flip(r,a))},t}(),gV=function(t){var e=typeof Symbol=="function"&&Symbol.iterator,r=e&&t[e],n=0;if(r)return r.call(t);if(t&&typeof t.length=="number")return{next:function(){return t&&n>=t.length&&(t=void 0),{value:t&&t[n++],done:!t}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")},B3e=function(){function t(e,r){this.numDataCodewords=e,this.codewords=r}return t.getDataBlocks=function(e,r,n){var a,s,i,l;if(e.length!==r.getTotalCodewords())throw new en;var c=r.getECBlocksForLevel(n),u=0,d=c.getECBlocks();try{for(var f=gV(d),h=f.next();!h.done;h=f.next()){var A=h.value;u+=A.getCount()}}catch(F){a={error:F}}finally{try{h&&!h.done&&(s=f.return)&&s.call(f)}finally{if(a)throw a.error}}var m=new Array(u),p=0;try{for(var g=gV(d),x=g.next();!x.done;x=g.next())for(var A=x.value,y=0;y<A.getCount();y++){var b=A.getDataCodewords(),w=c.getECCodewordsPerBlock()+b;m[p++]=new t(b,new Uint8Array(w))}}catch(F){i={error:F}}finally{try{x&&!x.done&&(l=g.return)&&l.call(g)}finally{if(i)throw i.error}}for(var j=m[0].codewords.length,I=m.length-1;I>=0;){var _=m[I].codewords.length;if(_===j)break;I--}I++;for(var E=j-c.getECCodewordsPerBlock(),S=0,y=0;y<E;y++)for(var k=0;k<p;k++)m[k].codewords[y]=e[S++];for(var k=I;k<p;k++)m[k].codewords[E]=e[S++];for(var P=m[0].codewords.length,y=E;y<P;y++)for(var k=0;k<p;k++){var T=k<I?y:y+1;m[k].codewords[T]=e[S++]}return m},t.prototype.getNumDataCodewords=function(){return this.numDataCodewords},t.prototype.getCodewords=function(){return this.codewords},t}(),Eu;(function(t){t[t.TERMINATOR=0]="TERMINATOR",t[t.NUMERIC=1]="NUMERIC",t[t.ALPHANUMERIC=2]="ALPHANUMERIC",t[t.STRUCTURED_APPEND=3]="STRUCTURED_APPEND",t[t.BYTE=4]="BYTE",t[t.ECI=5]="ECI",t[t.KANJI=6]="KANJI",t[t.FNC1_FIRST_POSITION=7]="FNC1_FIRST_POSITION",t[t.FNC1_SECOND_POSITION=8]="FNC1_SECOND_POSITION",t[t.HANZI=9]="HANZI"})(Eu||(Eu={}));var Ja=function(){function t(e,r,n,a){this.value=e,this.stringValue=r,this.characterCountBitsForVersions=n,this.bits=a,t.FOR_BITS.set(a,this),t.FOR_VALUE.set(e,this)}return t.forBits=function(e){var r=t.FOR_BITS.get(e);if(r===void 0)throw new en;return r},t.prototype.getCharacterCountBits=function(e){var r=e.getVersionNumber(),n;return r<=9?n=0:r<=26?n=1:n=2,this.characterCountBitsForVersions[n]},t.prototype.getValue=function(){return this.value},t.prototype.getBits=function(){return this.bits},t.prototype.equals=function(e){if(!(e instanceof t))return!1;var r=e;return this.value===r.value},t.prototype.toString=function(){return this.stringValue},t.FOR_BITS=new Map,t.FOR_VALUE=new Map,t.TERMINATOR=new t(Eu.TERMINATOR,"TERMINATOR",Int32Array.from([0,0,0]),0),t.NUMERIC=new t(Eu.NUMERIC,"NUMERIC",Int32Array.from([10,12,14]),1),t.ALPHANUMERIC=new t(Eu.ALPHANUMERIC,"ALPHANUMERIC",Int32Array.from([9,11,13]),2),t.STRUCTURED_APPEND=new t(Eu.STRUCTURED_APPEND,"STRUCTURED_APPEND",Int32Array.from([0,0,0]),3),t.BYTE=new t(Eu.BYTE,"BYTE",Int32Array.from([8,16,16]),4),t.ECI=new t(Eu.ECI,"ECI",Int32Array.from([0,0,0]),7),t.KANJI=new t(Eu.KANJI,"KANJI",Int32Array.from([8,10,12]),8),t.FNC1_FIRST_POSITION=new t(Eu.FNC1_FIRST_POSITION,"FNC1_FIRST_POSITION",Int32Array.from([0,0,0]),5),t.FNC1_SECOND_POSITION=new t(Eu.FNC1_SECOND_POSITION,"FNC1_SECOND_POSITION",Int32Array.from([0,0,0]),9),t.HANZI=new t(Eu.HANZI,"HANZI",Int32Array.from([8,10,12]),13),t}(),P3e=function(){function t(){}return t.decode=function(e,r,n,a){var s=new yte(e),i=new _n,l=new Array,c=-1,u=-1;try{var d=null,f=!1,h=void 0;do{if(s.available()<4)h=Ja.TERMINATOR;else{var A=s.readBits(4);h=Ja.forBits(A)}switch(h){case Ja.TERMINATOR:break;case Ja.FNC1_FIRST_POSITION:case Ja.FNC1_SECOND_POSITION:f=!0;break;case Ja.STRUCTURED_APPEND:if(s.available()<16)throw new Nr;c=s.readBits(8),u=s.readBits(8);break;case Ja.ECI:var m=t.parseECIValue(s);if(d=Li.getCharacterSetECIByValue(m),d===null)throw new Nr;break;case Ja.HANZI:var p=s.readBits(4),g=s.readBits(h.getCharacterCountBits(r));p===t.GB2312_SUBSET&&t.decodeHanziSegment(s,i,g);break;default:var x=s.readBits(h.getCharacterCountBits(r));switch(h){case Ja.NUMERIC:t.decodeNumericSegment(s,i,x);break;case Ja.ALPHANUMERIC:t.decodeAlphanumericSegment(s,i,x,f);break;case Ja.BYTE:t.decodeByteSegment(s,i,x,d,l,a);break;case Ja.KANJI:t.decodeKanjiSegment(s,i,x);break;default:throw new Nr}break}}while(h!==Ja.TERMINATOR)}catch{throw new Nr}return new N4(e,i.toString(),l.length===0?null:l,n===null?null:n.toString(),c,u)},t.decodeHanziSegment=function(e,r,n){if(n*13>e.available())throw new Nr;for(var a=new Uint8Array(2*n),s=0;n>0;){var i=e.readBits(13),l=i/96<<8&4294967295|i%96;l<959?l+=41377:l+=42657,a[s]=l>>8&255,a[s+1]=l&255,s+=2,n--}try{r.append(Vu.decode(a,Kn.GB2312))}catch(c){throw new Nr(c)}},t.decodeKanjiSegment=function(e,r,n){if(n*13>e.available())throw new Nr;for(var a=new Uint8Array(2*n),s=0;n>0;){var i=e.readBits(13),l=i/192<<8&4294967295|i%192;l<7936?l+=33088:l+=49472,a[s]=l>>8,a[s+1]=l,s+=2,n--}try{r.append(Vu.decode(a,Kn.SHIFT_JIS))}catch(c){throw new Nr(c)}},t.decodeByteSegment=function(e,r,n,a,s,i){if(8*n>e.available())throw new Nr;for(var l=new Uint8Array(n),c=0;c<n;c++)l[c]=e.readBits(8);var u;a===null?u=Kn.guessEncoding(l,i):u=a.getName();try{r.append(Vu.decode(l,u))}catch(d){throw new Nr(d)}s.push(l)},t.toAlphaNumericChar=function(e){if(e>=t.ALPHANUMERIC_CHARS.length)throw new Nr;return t.ALPHANUMERIC_CHARS[e]},t.decodeAlphanumericSegment=function(e,r,n,a){for(var s=r.length();n>1;){if(e.available()<11)throw new Nr;var i=e.readBits(11);r.append(t.toAlphaNumericChar(Math.floor(i/45))),r.append(t.toAlphaNumericChar(i%45)),n-=2}if(n===1){if(e.available()<6)throw new Nr;r.append(t.toAlphaNumericChar(e.readBits(6)))}if(a)for(var l=s;l<r.length();l++)r.charAt(l)==="%"&&(l<r.length()-1&&r.charAt(l+1)==="%"?r.deleteCharAt(l+1):r.setCharAt(l,""))},t.decodeNumericSegment=function(e,r,n){for(;n>=3;){if(e.available()<10)throw new Nr;var a=e.readBits(10);if(a>=1e3)throw new Nr;r.append(t.toAlphaNumericChar(Math.floor(a/100))),r.append(t.toAlphaNumericChar(Math.floor(a/10)%10)),r.append(t.toAlphaNumericChar(a%10)),n-=3}if(n===2){if(e.available()<7)throw new Nr;var s=e.readBits(7);if(s>=100)throw new Nr;r.append(t.toAlphaNumericChar(Math.floor(s/10))),r.append(t.toAlphaNumericChar(s%10))}else if(n===1){if(e.available()<4)throw new Nr;var i=e.readBits(4);if(i>=10)throw new Nr;r.append(t.toAlphaNumericChar(i))}},t.parseECIValue=function(e){var r=e.readBits(8);if(!(r&128))return r&127;if((r&192)===128){var n=e.readBits(8);return(r&63)<<8&4294967295|n}if((r&224)===192){var a=e.readBits(16);return(r&31)<<16&4294967295|a}throw new Nr},t.ALPHANUMERIC_CHARS="0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZ $%*+-./:",t.GB2312_SUBSET=1,t}(),wte=function(){function t(e){this.mirrored=e}return t.prototype.isMirrored=function(){return this.mirrored},t.prototype.applyMirroredCorrection=function(e){if(!(!this.mirrored||e===null||e.length<3)){var r=e[0];e[0]=e[2],e[2]=r}},t}(),xV=function(t){var e=typeof Symbol=="function"&&Symbol.iterator,r=e&&t[e],n=0;if(r)return r.call(t);if(t&&typeof t.length=="number")return{next:function(){return t&&n>=t.length&&(t=void 0),{value:t&&t[n++],done:!t}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")},T3e=function(){function t(){this.rsDecoder=new C4(oc.QR_CODE_FIELD_256)}return t.prototype.decodeBooleanArray=function(e,r){return this.decodeBitMatrix(Sf.parseFromBooleanArray(e),r)},t.prototype.decodeBitMatrix=function(e,r){var n=new j3e(e),a=null;try{return this.decodeBitMatrixParser(n,r)}catch(i){a=i}try{n.remask(),n.setMirror(!0),n.readVersion(),n.readFormatInformation(),n.mirror();var s=this.decodeBitMatrixParser(n,r);return s.setOther(new wte(!0)),s}catch(i){throw a!==null?a:i}},t.prototype.decodeBitMatrixParser=function(e,r){var n,a,s,i,l=e.readVersion(),c=e.readFormatInformation().getErrorCorrectionLevel(),u=e.readCodewords(),d=B3e.getDataBlocks(u,l,c),f=0;try{for(var h=xV(d),A=h.next();!A.done;A=h.next()){var m=A.value;f+=m.getNumDataCodewords()}}catch(I){n={error:I}}finally{try{A&&!A.done&&(a=h.return)&&a.call(h)}finally{if(n)throw n.error}}var p=new Uint8Array(f),g=0;try{for(var x=xV(d),y=x.next();!y.done;y=x.next()){var m=y.value,b=m.getCodewords(),w=m.getNumDataCodewords();this.correctErrors(b,w);for(var j=0;j<w;j++)p[g++]=b[j]}}catch(I){s={error:I}}finally{try{y&&!y.done&&(i=x.return)&&i.call(x)}finally{if(s)throw s.error}}return P3e.decode(p,l,c,r)},t.prototype.correctErrors=function(e,r){var n=new Int32Array(e);try{this.rsDecoder.decode(n,e.length-r)}catch{throw new bi}for(var a=0;a<r;a++)e[a]=n[a]},t}(),k3e=function(){var t=function(e,r){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,a){n.__proto__=a}||function(n,a){for(var s in a)a.hasOwnProperty(s)&&(n[s]=a[s])},t(e,r)};return function(e,r){t(e,r);function n(){this.constructor=e}e.prototype=r===null?Object.create(r):(n.prototype=r.prototype,new n)}}(),F3e=function(t){k3e(e,t);function e(r,n,a){var s=t.call(this,r,n)||this;return s.estimatedModuleSize=a,s}return e.prototype.aboutEquals=function(r,n,a){if(Math.abs(n-this.getY())<=r&&Math.abs(a-this.getX())<=r){var s=Math.abs(r-this.estimatedModuleSize);return s<=1||s<=this.estimatedModuleSize}return!1},e.prototype.combineEstimate=function(r,n,a){var s=(this.getX()+n)/2,i=(this.getY()+r)/2,l=(this.estimatedModuleSize+a)/2;return new e(s,i,l)},e}(Vr),O3e=function(t){var e=typeof Symbol=="function"&&Symbol.iterator,r=e&&t[e],n=0;if(r)return r.call(t);if(t&&typeof t.length=="number")return{next:function(){return t&&n>=t.length&&(t=void 0),{value:t&&t[n++],done:!t}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")},D3e=function(){function t(e,r,n,a,s,i,l){this.image=e,this.startX=r,this.startY=n,this.width=a,this.height=s,this.moduleSize=i,this.resultPointCallback=l,this.possibleCenters=[],this.crossCheckStateCount=new Int32Array(3)}return t.prototype.find=function(){for(var e=this.startX,r=this.height,n=this.width,a=e+n,s=this.startY+r/2,i=new Int32Array(3),l=this.image,c=0;c<r;c++){var u=s+(c&1?-Math.floor((c+1)/2):Math.floor((c+1)/2));i[0]=0,i[1]=0,i[2]=0;for(var d=e;d<a&&!l.get(d,u);)d++;for(var f=0;d<a;){if(l.get(d,u))if(f===1)i[1]++;else if(f===2){if(this.foundPatternCross(i)){var h=this.handlePossibleCenter(i,u,d);if(h!==null)return h}i[0]=i[2],i[1]=1,i[2]=0,f=1}else i[++f]++;else f===1&&f++,i[f]++;d++}if(this.foundPatternCross(i)){var h=this.handlePossibleCenter(i,u,a);if(h!==null)return h}}if(this.possibleCenters.length!==0)return this.possibleCenters[0];throw new Wt},t.centerFromEnd=function(e,r){return r-e[2]-e[1]/2},t.prototype.foundPatternCross=function(e){for(var r=this.moduleSize,n=r/2,a=0;a<3;a++)if(Math.abs(r-e[a])>=n)return!1;return!0},t.prototype.crossCheckVertical=function(e,r,n,a){var s=this.image,i=s.getHeight(),l=this.crossCheckStateCount;l[0]=0,l[1]=0,l[2]=0;for(var c=e;c>=0&&s.get(r,c)&&l[1]<=n;)l[1]++,c--;if(c<0||l[1]>n)return NaN;for(;c>=0&&!s.get(r,c)&&l[0]<=n;)l[0]++,c--;if(l[0]>n)return NaN;for(c=e+1;c<i&&s.get(r,c)&&l[1]<=n;)l[1]++,c++;if(c===i||l[1]>n)return NaN;for(;c<i&&!s.get(r,c)&&l[2]<=n;)l[2]++,c++;if(l[2]>n)return NaN;var u=l[0]+l[1]+l[2];return 5*Math.abs(u-a)>=2*a?NaN:this.foundPatternCross(l)?t.centerFromEnd(l,c):NaN},t.prototype.handlePossibleCenter=function(e,r,n){var a,s,i=e[0]+e[1]+e[2],l=t.centerFromEnd(e,n),c=this.crossCheckVertical(r,l,2*e[1],i);if(!isNaN(c)){var u=(e[0]+e[1]+e[2])/3;try{for(var d=O3e(this.possibleCenters),f=d.next();!f.done;f=d.next()){var h=f.value;if(h.aboutEquals(u,c,l))return h.combineEstimate(c,l,u)}}catch(m){a={error:m}}finally{try{f&&!f.done&&(s=d.return)&&s.call(d)}finally{if(a)throw a.error}}var A=new F3e(l,c,u);this.possibleCenters.push(A),this.resultPointCallback!==null&&this.resultPointCallback!==void 0&&this.resultPointCallback.foundPossibleResultPoint(A)}return null},t}(),R3e=function(){var t=function(e,r){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,a){n.__proto__=a}||function(n,a){for(var s in a)a.hasOwnProperty(s)&&(n[s]=a[s])},t(e,r)};return function(e,r){t(e,r);function n(){this.constructor=e}e.prototype=r===null?Object.create(r):(n.prototype=r.prototype,new n)}}(),M3e=function(t){R3e(e,t);function e(r,n,a,s){var i=t.call(this,r,n)||this;return i.estimatedModuleSize=a,i.count=s,s===void 0&&(i.count=1),i}return e.prototype.getEstimatedModuleSize=function(){return this.estimatedModuleSize},e.prototype.getCount=function(){return this.count},e.prototype.aboutEquals=function(r,n,a){if(Math.abs(n-this.getY())<=r&&Math.abs(a-this.getX())<=r){var s=Math.abs(r-this.estimatedModuleSize);return s<=1||s<=this.estimatedModuleSize}return!1},e.prototype.combineEstimate=function(r,n,a){var s=this.count+1,i=(this.count*this.getX()+n)/s,l=(this.count*this.getY()+r)/s,c=(this.count*this.estimatedModuleSize+a)/s;return new e(i,l,c,s)},e}(Vr),L3e=function(){function t(e){this.bottomLeft=e[0],this.topLeft=e[1],this.topRight=e[2]}return t.prototype.getBottomLeft=function(){return this.bottomLeft},t.prototype.getTopLeft=function(){return this.topLeft},t.prototype.getTopRight=function(){return this.topRight},t}(),V1=function(t){var e=typeof Symbol=="function"&&Symbol.iterator,r=e&&t[e],n=0;if(r)return r.call(t);if(t&&typeof t.length=="number")return{next:function(){return t&&n>=t.length&&(t=void 0),{value:t&&t[n++],done:!t}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")},U3e=function(){function t(e,r){this.image=e,this.resultPointCallback=r,this.possibleCenters=[],this.crossCheckStateCount=new Int32Array(5),this.resultPointCallback=r}return t.prototype.getImage=function(){return this.image},t.prototype.getPossibleCenters=function(){return this.possibleCenters},t.prototype.find=function(e){var r=e!=null&&e.get(Ga.TRY_HARDER)!==void 0,n=e!=null&&e.get(Ga.PURE_BARCODE)!==void 0,a=this.image,s=a.getHeight(),i=a.getWidth(),l=Math.floor(3*s/(4*t.MAX_MODULES));(l<t.MIN_SKIP||r)&&(l=t.MIN_SKIP);for(var c=!1,u=new Int32Array(5),d=l-1;d<s&&!c;d+=l){u[0]=0,u[1]=0,u[2]=0,u[3]=0,u[4]=0;for(var f=0,h=0;h<i;h++)if(a.get(h,d))(f&1)===1&&f++,u[f]++;else if(f&1)u[f]++;else if(f===4)if(t.foundPatternCross(u)){var A=this.handlePossibleCenter(u,d,h,n);if(A===!0)if(l=2,this.hasSkipped===!0)c=this.haveMultiplyConfirmedCenters();else{var m=this.findRowSkip();m>u[2]&&(d+=m-u[2]-l,h=i-1)}else{u[0]=u[2],u[1]=u[3],u[2]=u[4],u[3]=1,u[4]=0,f=3;continue}f=0,u[0]=0,u[1]=0,u[2]=0,u[3]=0,u[4]=0}else u[0]=u[2],u[1]=u[3],u[2]=u[4],u[3]=1,u[4]=0,f=3;else u[++f]++;if(t.foundPatternCross(u)){var A=this.handlePossibleCenter(u,d,i,n);A===!0&&(l=u[0],this.hasSkipped&&(c=this.haveMultiplyConfirmedCenters()))}}var p=this.selectBestPatterns();return Vr.orderBestPatterns(p),new L3e(p)},t.centerFromEnd=function(e,r){return r-e[4]-e[3]-e[2]/2},t.foundPatternCross=function(e){for(var r=0,n=0;n<5;n++){var a=e[n];if(a===0)return!1;r+=a}if(r<7)return!1;var s=r/7,i=s/2;return Math.abs(s-e[0])<i&&Math.abs(s-e[1])<i&&Math.abs(3*s-e[2])<3*i&&Math.abs(s-e[3])<i&&Math.abs(s-e[4])<i},t.prototype.getCrossCheckStateCount=function(){var e=this.crossCheckStateCount;return e[0]=0,e[1]=0,e[2]=0,e[3]=0,e[4]=0,e},t.prototype.crossCheckDiagonal=function(e,r,n,a){for(var s=this.getCrossCheckStateCount(),i=0,l=this.image;e>=i&&r>=i&&l.get(r-i,e-i);)s[2]++,i++;if(e<i||r<i)return!1;for(;e>=i&&r>=i&&!l.get(r-i,e-i)&&s[1]<=n;)s[1]++,i++;if(e<i||r<i||s[1]>n)return!1;for(;e>=i&&r>=i&&l.get(r-i,e-i)&&s[0]<=n;)s[0]++,i++;if(s[0]>n)return!1;var c=l.getHeight(),u=l.getWidth();for(i=1;e+i<c&&r+i<u&&l.get(r+i,e+i);)s[2]++,i++;if(e+i>=c||r+i>=u)return!1;for(;e+i<c&&r+i<u&&!l.get(r+i,e+i)&&s[3]<n;)s[3]++,i++;if(e+i>=c||r+i>=u||s[3]>=n)return!1;for(;e+i<c&&r+i<u&&l.get(r+i,e+i)&&s[4]<n;)s[4]++,i++;if(s[4]>=n)return!1;var d=s[0]+s[1]+s[2]+s[3]+s[4];return Math.abs(d-a)<2*a&&t.foundPatternCross(s)},t.prototype.crossCheckVertical=function(e,r,n,a){for(var s=this.image,i=s.getHeight(),l=this.getCrossCheckStateCount(),c=e;c>=0&&s.get(r,c);)l[2]++,c--;if(c<0)return NaN;for(;c>=0&&!s.get(r,c)&&l[1]<=n;)l[1]++,c--;if(c<0||l[1]>n)return NaN;for(;c>=0&&s.get(r,c)&&l[0]<=n;)l[0]++,c--;if(l[0]>n)return NaN;for(c=e+1;c<i&&s.get(r,c);)l[2]++,c++;if(c===i)return NaN;for(;c<i&&!s.get(r,c)&&l[3]<n;)l[3]++,c++;if(c===i||l[3]>=n)return NaN;for(;c<i&&s.get(r,c)&&l[4]<n;)l[4]++,c++;if(l[4]>=n)return NaN;var u=l[0]+l[1]+l[2]+l[3]+l[4];return 5*Math.abs(u-a)>=2*a?NaN:t.foundPatternCross(l)?t.centerFromEnd(l,c):NaN},t.prototype.crossCheckHorizontal=function(e,r,n,a){for(var s=this.image,i=s.getWidth(),l=this.getCrossCheckStateCount(),c=e;c>=0&&s.get(c,r);)l[2]++,c--;if(c<0)return NaN;for(;c>=0&&!s.get(c,r)&&l[1]<=n;)l[1]++,c--;if(c<0||l[1]>n)return NaN;for(;c>=0&&s.get(c,r)&&l[0]<=n;)l[0]++,c--;if(l[0]>n)return NaN;for(c=e+1;c<i&&s.get(c,r);)l[2]++,c++;if(c===i)return NaN;for(;c<i&&!s.get(c,r)&&l[3]<n;)l[3]++,c++;if(c===i||l[3]>=n)return NaN;for(;c<i&&s.get(c,r)&&l[4]<n;)l[4]++,c++;if(l[4]>=n)return NaN;var u=l[0]+l[1]+l[2]+l[3]+l[4];return 5*Math.abs(u-a)>=a?NaN:t.foundPatternCross(l)?t.centerFromEnd(l,c):NaN},t.prototype.handlePossibleCenter=function(e,r,n,a){var s=e[0]+e[1]+e[2]+e[3]+e[4],i=t.centerFromEnd(e,n),l=this.crossCheckVertical(r,Math.floor(i),e[2],s);if(!isNaN(l)&&(i=this.crossCheckHorizontal(Math.floor(i),Math.floor(l),e[2],s),!isNaN(i)&&(!a||this.crossCheckDiagonal(Math.floor(l),Math.floor(i),e[2],s)))){for(var c=s/7,u=!1,d=this.possibleCenters,f=0,h=d.length;f<h;f++){var A=d[f];if(A.aboutEquals(c,l,i)){d[f]=A.combineEstimate(l,i,c),u=!0;break}}if(!u){var m=new M3e(i,l,c);d.push(m),this.resultPointCallback!==null&&this.resultPointCallback!==void 0&&this.resultPointCallback.foundPossibleResultPoint(m)}return!0}return!1},t.prototype.findRowSkip=function(){var e,r,n=this.possibleCenters.length;if(n<=1)return 0;var a=null;try{for(var s=V1(this.possibleCenters),i=s.next();!i.done;i=s.next()){var l=i.value;if(l.getCount()>=t.CENTER_QUORUM)if(a==null)a=l;else return this.hasSkipped=!0,Math.floor((Math.abs(a.getX()-l.getX())-Math.abs(a.getY()-l.getY()))/2)}}catch(c){e={error:c}}finally{try{i&&!i.done&&(r=s.return)&&r.call(s)}finally{if(e)throw e.error}}return 0},t.prototype.haveMultiplyConfirmedCenters=function(){var e,r,n,a,s=0,i=0,l=this.possibleCenters.length;try{for(var c=V1(this.possibleCenters),u=c.next();!u.done;u=c.next()){var d=u.value;d.getCount()>=t.CENTER_QUORUM&&(s++,i+=d.getEstimatedModuleSize())}}catch(p){e={error:p}}finally{try{u&&!u.done&&(r=c.return)&&r.call(c)}finally{if(e)throw e.error}}if(s<3)return!1;var f=i/l,h=0;try{for(var A=V1(this.possibleCenters),m=A.next();!m.done;m=A.next()){var d=m.value;h+=Math.abs(d.getEstimatedModuleSize()-f)}}catch(p){n={error:p}}finally{try{m&&!m.done&&(a=A.return)&&a.call(A)}finally{if(n)throw n.error}}return h<=.05*i},t.prototype.selectBestPatterns=function(){var e,r,n,a,s=this.possibleCenters.length;if(s<3)throw new Wt;var i=this.possibleCenters,l;if(s>3){var c=0,u=0;try{for(var d=V1(this.possibleCenters),f=d.next();!f.done;f=d.next()){var h=f.value,A=h.getEstimatedModuleSize();c+=A,u+=A*A}}catch(j){e={error:j}}finally{try{f&&!f.done&&(r=d.return)&&r.call(d)}finally{if(e)throw e.error}}l=c/s;var m=Math.sqrt(u/s-l*l);i.sort(function(j,I){var _=Math.abs(I.getEstimatedModuleSize()-l),E=Math.abs(j.getEstimatedModuleSize()-l);return _<E?-1:_>E?1:0});for(var p=Math.max(.2*l,m),g=0;g<i.length&&i.length>3;g++){var x=i[g];Math.abs(x.getEstimatedModuleSize()-l)>p&&(i.splice(g,1),g--)}}if(i.length>3){var c=0;try{for(var y=V1(i),b=y.next();!b.done;b=y.next()){var w=b.value;c+=w.getEstimatedModuleSize()}}catch(I){n={error:I}}finally{try{b&&!b.done&&(a=y.return)&&a.call(y)}finally{if(n)throw n.error}}l=c/i.length,i.sort(function(I,_){if(_.getCount()===I.getCount()){var E=Math.abs(_.getEstimatedModuleSize()-l),S=Math.abs(I.getEstimatedModuleSize()-l);return E<S?1:E>S?-1:0}else return _.getCount()-I.getCount()}),i.splice(3)}return[i[0],i[1],i[2]]},t.CENTER_QUORUM=2,t.MIN_SKIP=3,t.MAX_MODULES=57,t}(),Q3e=function(){function t(e){this.image=e}return t.prototype.getImage=function(){return this.image},t.prototype.getResultPointCallback=function(){return this.resultPointCallback},t.prototype.detect=function(e){this.resultPointCallback=e==null?null:e.get(Ga.NEED_RESULT_POINT_CALLBACK);var r=new U3e(this.image,this.resultPointCallback),n=r.find(e);return this.processFinderPatternInfo(n)},t.prototype.processFinderPatternInfo=function(e){var r=e.getTopLeft(),n=e.getTopRight(),a=e.getBottomLeft(),s=this.calculateModuleSize(r,n,a);if(s<1)throw new Wt("No pattern found in proccess finder.");var i=t.computeDimension(r,n,a,s),l=lp.getProvisionalVersionForDimension(i),c=l.getDimensionForVersion()-7,u=null;if(l.getAlignmentPatternCenters().length>0)for(var d=n.getX()-r.getX()+a.getX(),f=n.getY()-r.getY()+a.getY(),h=1-3/c,A=Math.floor(r.getX()+h*(d-r.getX())),m=Math.floor(r.getY()+h*(f-r.getY())),p=4;p<=16;p<<=1)try{u=this.findAlignmentInRegion(s,A,m,p);break}catch(b){if(!(b instanceof Wt))throw b}var g=t.createTransform(r,n,a,u,i),x=t.sampleGrid(this.image,g,i),y;return u===null?y=[a,r,n]:y=[a,r,n,u],new U6(x,y)},t.createTransform=function(e,r,n,a,s){var i=s-3.5,l,c,u,d;return a!==null?(l=a.getX(),c=a.getY(),u=i-3,d=u):(l=r.getX()-e.getX()+n.getX(),c=r.getY()-e.getY()+n.getY(),u=i,d=i),pte.quadrilateralToQuadrilateral(3.5,3.5,i,3.5,u,d,3.5,i,e.getX(),e.getY(),r.getX(),r.getY(),l,c,n.getX(),n.getY())},t.sampleGrid=function(e,r,n){var a=Q6.getInstance();return a.sampleGridWithTransform(e,n,n,r)},t.computeDimension=function(e,r,n,a){var s=Zn.round(Vr.distance(e,r)/a),i=Zn.round(Vr.distance(e,n)/a),l=Math.floor((s+i)/2)+7;switch(l&3){case 0:l++;break;case 2:l--;break;case 3:throw new Wt("Dimensions could be not found.")}return l},t.prototype.calculateModuleSize=function(e,r,n){return(this.calculateModuleSizeOneWay(e,r)+this.calculateModuleSizeOneWay(e,n))/2},t.prototype.calculateModuleSizeOneWay=function(e,r){var n=this.sizeOfBlackWhiteBlackRunBothWays(Math.floor(e.getX()),Math.floor(e.getY()),Math.floor(r.getX()),Math.floor(r.getY())),a=this.sizeOfBlackWhiteBlackRunBothWays(Math.floor(r.getX()),Math.floor(r.getY()),Math.floor(e.getX()),Math.floor(e.getY()));return isNaN(n)?a/7:isNaN(a)?n/7:(n+a)/14},t.prototype.sizeOfBlackWhiteBlackRunBothWays=function(e,r,n,a){var s=this.sizeOfBlackWhiteBlackRun(e,r,n,a),i=1,l=e-(n-e);l<0?(i=e/(e-l),l=0):l>=this.image.getWidth()&&(i=(this.image.getWidth()-1-e)/(l-e),l=this.image.getWidth()-1);var c=Math.floor(r-(a-r)*i);return i=1,c<0?(i=r/(r-c),c=0):c>=this.image.getHeight()&&(i=(this.image.getHeight()-1-r)/(c-r),c=this.image.getHeight()-1),l=Math.floor(e+(l-e)*i),s+=this.sizeOfBlackWhiteBlackRun(e,r,l,c),s-1},t.prototype.sizeOfBlackWhiteBlackRun=function(e,r,n,a){var s=Math.abs(a-r)>Math.abs(n-e);if(s){var i=e;e=r,r=i,i=n,n=a,a=i}for(var l=Math.abs(n-e),c=Math.abs(a-r),u=-l/2,d=e<n?1:-1,f=r<a?1:-1,h=0,A=n+d,m=e,p=r;m!==A;m+=d){var g=s?p:m,x=s?m:p;if(h===1===this.image.get(g,x)){if(h===2)return Zn.distance(m,p,e,r);h++}if(u+=c,u>0){if(p===a)break;p+=f,u-=l}}return h===2?Zn.distance(n+d,a,e,r):NaN},t.prototype.findAlignmentInRegion=function(e,r,n,a){var s=Math.floor(a*e),i=Math.max(0,r-s),l=Math.min(this.image.getWidth()-1,r+s);if(l-i<e*3)throw new Wt("Alignment top exceeds estimated module size.");var c=Math.max(0,n-s),u=Math.min(this.image.getHeight()-1,n+s);if(u-c<e*3)throw new Wt("Alignment bottom exceeds estimated module size.");var d=new D3e(this.image,i,c,l-i,u-c,e,this.resultPointCallback);return d.find()},t}(),iS=function(){function t(){this.decoder=new T3e}return t.prototype.getDecoder=function(){return this.decoder},t.prototype.decode=function(e,r){var n,a;if(r!=null&&r.get(Ga.PURE_BARCODE)!==void 0){var s=t.extractPureBits(e.getBlackMatrix());n=this.decoder.decodeBitMatrix(s,r),a=t.NO_POINTS}else{var i=new Q3e(e.getBlackMatrix()).detect(r);n=this.decoder.decodeBitMatrix(i.getBits(),r),a=i.getPoints()}n.getOther()instanceof wte&&n.getOther().applyMirroredCorrection(a);var l=new bl(n.getText(),n.getRawBytes(),void 0,a,Zr.QR_CODE,void 0),c=n.getByteSegments();c!==null&&l.putMetadata($o.BYTE_SEGMENTS,c);var u=n.getECLevel();return u!==null&&l.putMetadata($o.ERROR_CORRECTION_LEVEL,u),n.hasStructuredAppend()&&(l.putMetadata($o.STRUCTURED_APPEND_SEQUENCE,n.getStructuredAppendSequenceNumber()),l.putMetadata($o.STRUCTURED_APPEND_PARITY,n.getStructuredAppendParity())),l},t.prototype.reset=function(){},t.extractPureBits=function(e){var r=e.getTopLeftOnBit(),n=e.getBottomRightOnBit();if(r===null||n===null)throw new Wt;var a=this.moduleSize(r,e),s=r[1],i=n[1],l=r[0],c=n[0];if(l>=c||s>=i)throw new Wt;if(i-s!==c-l&&(c=l+(i-s),c>=e.getWidth()))throw new Wt;var u=Math.round((c-l+1)/a),d=Math.round((i-s+1)/a);if(u<=0||d<=0)throw new Wt;if(d!==u)throw new Wt;var f=Math.floor(a/2);s+=f,l+=f;var h=l+Math.floor((u-1)*a)-c;if(h>0){if(h>f)throw new Wt;l-=h}var A=s+Math.floor((d-1)*a)-i;if(A>0){if(A>f)throw new Wt;s-=A}for(var m=new Sf(u,d),p=0;p<d;p++)for(var g=s+Math.floor(p*a),x=0;x<u;x++)e.get(l+Math.floor(x*a),g)&&m.set(x,p);return m},t.moduleSize=function(e,r){for(var n=r.getHeight(),a=r.getWidth(),s=e[0],i=e[1],l=!0,c=0;s<a&&i<n;){if(l!==r.get(s,i)){if(++c===5)break;l=!l}s++,i++}if(s===a||i===n)throw new Wt;return(s-e[0])/7},t.NO_POINTS=new Array,t}(),V3e=function(t){var e=typeof Symbol=="function"&&Symbol.iterator,r=e&&t[e],n=0;if(r)return r.call(t);if(t&&typeof t.length=="number")return{next:function(){return t&&n>=t.length&&(t=void 0),{value:t&&t[n++],done:!t}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")},qn=function(){function t(){}return t.prototype.PDF417Common=function(){},t.getBitCountSum=function(e){return Zn.sum(e)},t.toIntArray=function(e){var r,n;if(e==null||!e.length)return t.EMPTY_INT_ARRAY;var a=new Int32Array(e.length),s=0;try{for(var i=V3e(e),l=i.next();!l.done;l=i.next()){var c=l.value;a[s++]=c}}catch(u){r={error:u}}finally{try{l&&!l.done&&(n=i.return)&&n.call(i)}finally{if(r)throw r.error}}return a},t.getCodeword=function(e){var r=Ui.binarySearch(t.SYMBOL_TABLE,e&262143);return r<0?-1:(t.CODEWORD_TABLE[r]-1)%t.NUMBER_OF_CODEWORDS},t.NUMBER_OF_CODEWORDS=929,t.MAX_CODEWORDS_IN_BARCODE=t.NUMBER_OF_CODEWORDS-1,t.MIN_ROWS_IN_BARCODE=3,t.MAX_ROWS_IN_BARCODE=90,t.MODULES_IN_CODEWORD=17,t.MODULES_IN_STOP_PATTERN=18,t.BARS_IN_MODULE=8,t.EMPTY_INT_ARRAY=new Int32Array([]),t.SYMBOL_TABLE=Int32Array.from([66142,66170,66206,66236,66290,66292,66350,66382,66396,66454,66470,66476,66594,66600,66614,66626,66628,66632,66640,66654,66662,66668,66682,66690,66718,66720,66748,66758,66776,66798,66802,66804,66820,66824,66832,66846,66848,66876,66880,66936,66950,66956,66968,66992,67006,67022,67036,67042,67044,67048,67062,67118,67150,67164,67214,67228,67256,67294,67322,67350,67366,67372,67398,67404,67416,67438,67474,67476,67490,67492,67496,67510,67618,67624,67650,67656,67664,67678,67686,67692,67706,67714,67716,67728,67742,67744,67772,67782,67788,67800,67822,67826,67828,67842,67848,67870,67872,67900,67904,67960,67974,67992,68016,68030,68046,68060,68066,68068,68072,68086,68104,68112,68126,68128,68156,68160,68216,68336,68358,68364,68376,68400,68414,68448,68476,68494,68508,68536,68546,68548,68552,68560,68574,68582,68588,68654,68686,68700,68706,68708,68712,68726,68750,68764,68792,68802,68804,68808,68816,68830,68838,68844,68858,68878,68892,68920,68976,68990,68994,68996,69e3,69008,69022,69024,69052,69062,69068,69080,69102,69106,69108,69142,69158,69164,69190,69208,69230,69254,69260,69272,69296,69310,69326,69340,69386,69394,69396,69410,69416,69430,69442,69444,69448,69456,69470,69478,69484,69554,69556,69666,69672,69698,69704,69712,69726,69754,69762,69764,69776,69790,69792,69820,69830,69836,69848,69870,69874,69876,69890,69918,69920,69948,69952,70008,70022,70040,70064,70078,70094,70108,70114,70116,70120,70134,70152,70174,70176,70264,70384,70412,70448,70462,70496,70524,70542,70556,70584,70594,70600,70608,70622,70630,70636,70664,70672,70686,70688,70716,70720,70776,70896,71136,71180,71192,71216,71230,71264,71292,71360,71416,71452,71480,71536,71550,71554,71556,71560,71568,71582,71584,71612,71622,71628,71640,71662,71726,71732,71758,71772,71778,71780,71784,71798,71822,71836,71864,71874,71880,71888,71902,71910,71916,71930,71950,71964,71992,72048,72062,72066,72068,72080,72094,72096,72124,72134,72140,72152,72174,72178,72180,72206,72220,72248,72304,72318,72416,72444,72456,72464,72478,72480,72508,72512,72568,72588,72600,72624,72638,72654,72668,72674,72676,72680,72694,72726,72742,72748,72774,72780,72792,72814,72838,72856,72880,72894,72910,72924,72930,72932,72936,72950,72966,72972,72984,73008,73022,73056,73084,73102,73116,73144,73156,73160,73168,73182,73190,73196,73210,73226,73234,73236,73250,73252,73256,73270,73282,73284,73296,73310,73318,73324,73346,73348,73352,73360,73374,73376,73404,73414,73420,73432,73454,73498,73518,73522,73524,73550,73564,73570,73572,73576,73590,73800,73822,73858,73860,73872,73886,73888,73916,73944,73970,73972,73992,74014,74016,74044,74048,74104,74118,74136,74160,74174,74210,74212,74216,74230,74244,74256,74270,74272,74360,74480,74502,74508,74544,74558,74592,74620,74638,74652,74680,74690,74696,74704,74726,74732,74782,74784,74812,74992,75232,75288,75326,75360,75388,75456,75512,75576,75632,75646,75650,75652,75664,75678,75680,75708,75718,75724,75736,75758,75808,75836,75840,75896,76016,76256,76736,76824,76848,76862,76896,76924,76992,77048,77296,77340,77368,77424,77438,77536,77564,77572,77576,77584,77600,77628,77632,77688,77702,77708,77720,77744,77758,77774,77788,77870,77902,77916,77922,77928,77966,77980,78008,78018,78024,78032,78046,78060,78074,78094,78136,78192,78206,78210,78212,78224,78238,78240,78268,78278,78284,78296,78322,78324,78350,78364,78448,78462,78560,78588,78600,78622,78624,78652,78656,78712,78726,78744,78768,78782,78798,78812,78818,78820,78824,78838,78862,78876,78904,78960,78974,79072,79100,79296,79352,79368,79376,79390,79392,79420,79424,79480,79600,79628,79640,79664,79678,79712,79740,79772,79800,79810,79812,79816,79824,79838,79846,79852,79894,79910,79916,79942,79948,79960,79982,79988,80006,80024,80048,80062,80078,80092,80098,80100,80104,80134,80140,80176,80190,80224,80252,80270,80284,80312,80328,80336,80350,80358,80364,80378,80390,80396,80408,80432,80446,80480,80508,80576,80632,80654,80668,80696,80752,80766,80776,80784,80798,80800,80828,80844,80856,80878,80882,80884,80914,80916,80930,80932,80936,80950,80962,80968,80976,80990,80998,81004,81026,81028,81040,81054,81056,81084,81094,81100,81112,81134,81154,81156,81160,81168,81182,81184,81212,81216,81272,81286,81292,81304,81328,81342,81358,81372,81380,81384,81398,81434,81454,81458,81460,81486,81500,81506,81508,81512,81526,81550,81564,81592,81602,81604,81608,81616,81630,81638,81644,81702,81708,81722,81734,81740,81752,81774,81778,81780,82050,82078,82080,82108,82180,82184,82192,82206,82208,82236,82240,82296,82316,82328,82352,82366,82402,82404,82408,82440,82448,82462,82464,82492,82496,82552,82672,82694,82700,82712,82736,82750,82784,82812,82830,82882,82884,82888,82896,82918,82924,82952,82960,82974,82976,83004,83008,83064,83184,83424,83468,83480,83504,83518,83552,83580,83648,83704,83740,83768,83824,83838,83842,83844,83848,83856,83872,83900,83910,83916,83928,83950,83984,84e3,84028,84032,84088,84208,84448,84928,85040,85054,85088,85116,85184,85240,85488,85560,85616,85630,85728,85756,85764,85768,85776,85790,85792,85820,85824,85880,85894,85900,85912,85936,85966,85980,86048,86080,86136,86256,86496,86976,88160,88188,88256,88312,88560,89056,89200,89214,89312,89340,89536,89592,89608,89616,89632,89664,89720,89840,89868,89880,89904,89952,89980,89998,90012,90040,90190,90204,90254,90268,90296,90306,90308,90312,90334,90382,90396,90424,90480,90494,90500,90504,90512,90526,90528,90556,90566,90572,90584,90610,90612,90638,90652,90680,90736,90750,90848,90876,90884,90888,90896,90910,90912,90940,90944,91e3,91014,91020,91032,91056,91070,91086,91100,91106,91108,91112,91126,91150,91164,91192,91248,91262,91360,91388,91584,91640,91664,91678,91680,91708,91712,91768,91888,91928,91952,91966,92e3,92028,92046,92060,92088,92098,92100,92104,92112,92126,92134,92140,92188,92216,92272,92384,92412,92608,92664,93168,93200,93214,93216,93244,93248,93304,93424,93664,93720,93744,93758,93792,93820,93888,93944,93980,94008,94064,94078,94084,94088,94096,94110,94112,94140,94150,94156,94168,94246,94252,94278,94284,94296,94318,94342,94348,94360,94384,94398,94414,94428,94440,94470,94476,94488,94512,94526,94560,94588,94606,94620,94648,94658,94660,94664,94672,94686,94694,94700,94714,94726,94732,94744,94768,94782,94816,94844,94912,94968,94990,95004,95032,95088,95102,95112,95120,95134,95136,95164,95180,95192,95214,95218,95220,95244,95256,95280,95294,95328,95356,95424,95480,95728,95758,95772,95800,95856,95870,95968,95996,96008,96016,96030,96032,96060,96064,96120,96152,96176,96190,96220,96226,96228,96232,96290,96292,96296,96310,96322,96324,96328,96336,96350,96358,96364,96386,96388,96392,96400,96414,96416,96444,96454,96460,96472,96494,96498,96500,96514,96516,96520,96528,96542,96544,96572,96576,96632,96646,96652,96664,96688,96702,96718,96732,96738,96740,96744,96758,96772,96776,96784,96798,96800,96828,96832,96888,97008,97030,97036,97048,97072,97086,97120,97148,97166,97180,97208,97220,97224,97232,97246,97254,97260,97326,97330,97332,97358,97372,97378,97380,97384,97398,97422,97436,97464,97474,97476,97480,97488,97502,97510,97516,97550,97564,97592,97648,97666,97668,97672,97680,97694,97696,97724,97734,97740,97752,97774,97830,97836,97850,97862,97868,97880,97902,97906,97908,97926,97932,97944,97968,97998,98012,98018,98020,98024,98038,98618,98674,98676,98838,98854,98874,98892,98904,98926,98930,98932,98968,99006,99042,99044,99048,99062,99166,99194,99246,99286,99350,99366,99372,99386,99398,99416,99438,99442,99444,99462,99504,99518,99534,99548,99554,99556,99560,99574,99590,99596,99608,99632,99646,99680,99708,99726,99740,99768,99778,99780,99784,99792,99806,99814,99820,99834,99858,99860,99874,99880,99894,99906,99920,99934,99962,99970,99972,99976,99984,99998,1e5,100028,100038,100044,100056,100078,100082,100084,100142,100174,100188,100246,100262,100268,100306,100308,100390,100396,100410,100422,100428,100440,100462,100466,100468,100486,100504,100528,100542,100558,100572,100578,100580,100584,100598,100620,100656,100670,100704,100732,100750,100792,100802,100808,100816,100830,100838,100844,100858,100888,100912,100926,100960,100988,101056,101112,101148,101176,101232,101246,101250,101252,101256,101264,101278,101280,101308,101318,101324,101336,101358,101362,101364,101410,101412,101416,101430,101442,101448,101456,101470,101478,101498,101506,101508,101520,101534,101536,101564,101580,101618,101620,101636,101640,101648,101662,101664,101692,101696,101752,101766,101784,101838,101858,101860,101864,101934,101938,101940,101966,101980,101986,101988,101992,102030,102044,102072,102082,102084,102088,102096,102138,102166,102182,102188,102214,102220,102232,102254,102282,102290,102292,102306,102308,102312,102326,102444,102458,102470,102476,102488,102514,102516,102534,102552,102576,102590,102606,102620,102626,102632,102646,102662,102668,102704,102718,102752,102780,102798,102812,102840,102850,102856,102864,102878,102886,102892,102906,102936,102974,103008,103036,103104,103160,103224,103280,103294,103298,103300,103312,103326,103328,103356,103366,103372,103384,103406,103410,103412,103472,103486,103520,103548,103616,103672,103920,103992,104048,104062,104160,104188,104194,104196,104200,104208,104224,104252,104256,104312,104326,104332,104344,104368,104382,104398,104412,104418,104420,104424,104482,104484,104514,104520,104528,104542,104550,104570,104578,104580,104592,104606,104608,104636,104652,104690,104692,104706,104712,104734,104736,104764,104768,104824,104838,104856,104910,104930,104932,104936,104968,104976,104990,104992,105020,105024,105080,105200,105240,105278,105312,105372,105410,105412,105416,105424,105446,105518,105524,105550,105564,105570,105572,105576,105614,105628,105656,105666,105672,105680,105702,105722,105742,105756,105784,105840,105854,105858,105860,105864,105872,105888,105932,105970,105972,106006,106022,106028,106054,106060,106072,106100,106118,106124,106136,106160,106174,106190,106210,106212,106216,106250,106258,106260,106274,106276,106280,106306,106308,106312,106320,106334,106348,106394,106414,106418,106420,106566,106572,106610,106612,106630,106636,106648,106672,106686,106722,106724,106728,106742,106758,106764,106776,106800,106814,106848,106876,106894,106908,106936,106946,106948,106952,106960,106974,106982,106988,107032,107056,107070,107104,107132,107200,107256,107292,107320,107376,107390,107394,107396,107400,107408,107422,107424,107452,107462,107468,107480,107502,107506,107508,107544,107568,107582,107616,107644,107712,107768,108016,108060,108088,108144,108158,108256,108284,108290,108292,108296,108304,108318,108320,108348,108352,108408,108422,108428,108440,108464,108478,108494,108508,108514,108516,108520,108592,108640,108668,108736,108792,109040,109536,109680,109694,109792,109820,110016,110072,110084,110088,110096,110112,110140,110144,110200,110320,110342,110348,110360,110384,110398,110432,110460,110478,110492,110520,110532,110536,110544,110558,110658,110686,110714,110722,110724,110728,110736,110750,110752,110780,110796,110834,110836,110850,110852,110856,110864,110878,110880,110908,110912,110968,110982,111e3,111054,111074,111076,111080,111108,111112,111120,111134,111136,111164,111168,111224,111344,111372,111422,111456,111516,111554,111556,111560,111568,111590,111632,111646,111648,111676,111680,111736,111856,112096,112152,112224,112252,112320,112440,112514,112516,112520,112528,112542,112544,112588,112686,112718,112732,112782,112796,112824,112834,112836,112840,112848,112870,112890,112910,112924,112952,113008,113022,113026,113028,113032,113040,113054,113056,113100,113138,113140,113166,113180,113208,113264,113278,113376,113404,113416,113424,113440,113468,113472,113560,113614,113634,113636,113640,113686,113702,113708,113734,113740,113752,113778,113780,113798,113804,113816,113840,113854,113870,113890,113892,113896,113926,113932,113944,113968,113982,114016,114044,114076,114114,114116,114120,114128,114150,114170,114194,114196,114210,114212,114216,114242,114244,114248,114256,114270,114278,114306,114308,114312,114320,114334,114336,114364,114380,114420,114458,114478,114482,114484,114510,114524,114530,114532,114536,114842,114866,114868,114970,114994,114996,115042,115044,115048,115062,115130,115226,115250,115252,115278,115292,115298,115300,115304,115318,115342,115394,115396,115400,115408,115422,115430,115436,115450,115478,115494,115514,115526,115532,115570,115572,115738,115758,115762,115764,115790,115804,115810,115812,115816,115830,115854,115868,115896,115906,115912,115920,115934,115942,115948,115962,115996,116024,116080,116094,116098,116100,116104,116112,116126,116128,116156,116166,116172,116184,116206,116210,116212,116246,116262,116268,116282,116294,116300,116312,116334,116338,116340,116358,116364,116376,116400,116414,116430,116444,116450,116452,116456,116498,116500,116514,116520,116534,116546,116548,116552,116560,116574,116582,116588,116602,116654,116694,116714,116762,116782,116786,116788,116814,116828,116834,116836,116840,116854,116878,116892,116920,116930,116936,116944,116958,116966,116972,116986,117006,117048,117104,117118,117122,117124,117136,117150,117152,117180,117190,117196,117208,117230,117234,117236,117304,117360,117374,117472,117500,117506,117508,117512,117520,117536,117564,117568,117624,117638,117644,117656,117680,117694,117710,117724,117730,117732,117736,117750,117782,117798,117804,117818,117830,117848,117874,117876,117894,117936,117950,117966,117986,117988,117992,118022,118028,118040,118064,118078,118112,118140,118172,118210,118212,118216,118224,118238,118246,118266,118306,118312,118338,118352,118366,118374,118394,118402,118404,118408,118416,118430,118432,118460,118476,118514,118516,118574,118578,118580,118606,118620,118626,118628,118632,118678,118694,118700,118730,118738,118740,118830,118834,118836,118862,118876,118882,118884,118888,118902,118926,118940,118968,118978,118980,118984,118992,119006,119014,119020,119034,119068,119096,119152,119166,119170,119172,119176,119184,119198,119200,119228,119238,119244,119256,119278,119282,119284,119324,119352,119408,119422,119520,119548,119554,119556,119560,119568,119582,119584,119612,119616,119672,119686,119692,119704,119728,119742,119758,119772,119778,119780,119784,119798,119920,119934,120032,120060,120256,120312,120324,120328,120336,120352,120384,120440,120560,120582,120588,120600,120624,120638,120672,120700,120718,120732,120760,120770,120772,120776,120784,120798,120806,120812,120870,120876,120890,120902,120908,120920,120946,120948,120966,120972,120984,121008,121022,121038,121058,121060,121064,121078,121100,121112,121136,121150,121184,121212,121244,121282,121284,121288,121296,121318,121338,121356,121368,121392,121406,121440,121468,121536,121592,121656,121730,121732,121736,121744,121758,121760,121804,121842,121844,121890,121922,121924,121928,121936,121950,121958,121978,121986,121988,121992,122e3,122014,122016,122044,122060,122098,122100,122116,122120,122128,122142,122144,122172,122176,122232,122246,122264,122318,122338,122340,122344,122414,122418,122420,122446,122460,122466,122468,122472,122510,122524,122552,122562,122564,122568,122576,122598,122618,122646,122662,122668,122694,122700,122712,122738,122740,122762,122770,122772,122786,122788,122792,123018,123026,123028,123042,123044,123048,123062,123098,123146,123154,123156,123170,123172,123176,123190,123202,123204,123208,123216,123238,123244,123258,123290,123314,123316,123402,123410,123412,123426,123428,123432,123446,123458,123464,123472,123486,123494,123500,123514,123522,123524,123528,123536,123552,123580,123590,123596,123608,123630,123634,123636,123674,123698,123700,123740,123746,123748,123752,123834,123914,123922,123924,123938,123944,123958,123970,123976,123984,123998,124006,124012,124026,124034,124036,124048,124062,124064,124092,124102,124108,124120,124142,124146,124148,124162,124164,124168,124176,124190,124192,124220,124224,124280,124294,124300,124312,124336,124350,124366,124380,124386,124388,124392,124406,124442,124462,124466,124468,124494,124508,124514,124520,124558,124572,124600,124610,124612,124616,124624,124646,124666,124694,124710,124716,124730,124742,124748,124760,124786,124788,124818,124820,124834,124836,124840,124854,124946,124948,124962,124964,124968,124982,124994,124996,125e3,125008,125022,125030,125036,125050,125058,125060,125064,125072,125086,125088,125116,125126,125132,125144,125166,125170,125172,125186,125188,125192,125200,125216,125244,125248,125304,125318,125324,125336,125360,125374,125390,125404,125410,125412,125416,125430,125444,125448,125456,125472,125504,125560,125680,125702,125708,125720,125744,125758,125792,125820,125838,125852,125880,125890,125892,125896,125904,125918,125926,125932,125978,125998,126002,126004,126030,126044,126050,126052,126056,126094,126108,126136,126146,126148,126152,126160,126182,126202,126222,126236,126264,126320,126334,126338,126340,126344,126352,126366,126368,126412,126450,126452,126486,126502,126508,126522,126534,126540,126552,126574,126578,126580,126598,126604,126616,126640,126654,126670,126684,126690,126692,126696,126738,126754,126756,126760,126774,126786,126788,126792,126800,126814,126822,126828,126842,126894,126898,126900,126934,127126,127142,127148,127162,127178,127186,127188,127254,127270,127276,127290,127302,127308,127320,127342,127346,127348,127370,127378,127380,127394,127396,127400,127450,127510,127526,127532,127546,127558,127576,127598,127602,127604,127622,127628,127640,127664,127678,127694,127708,127714,127716,127720,127734,127754,127762,127764,127778,127784,127810,127812,127816,127824,127838,127846,127866,127898,127918,127922,127924,128022,128038,128044,128058,128070,128076,128088,128110,128114,128116,128134,128140,128152,128176,128190,128206,128220,128226,128228,128232,128246,128262,128268,128280,128304,128318,128352,128380,128398,128412,128440,128450,128452,128456,128464,128478,128486,128492,128506,128522,128530,128532,128546,128548,128552,128566,128578,128580,128584,128592,128606,128614,128634,128642,128644,128648,128656,128670,128672,128700,128716,128754,128756,128794,128814,128818,128820,128846,128860,128866,128868,128872,128886,128918,128934,128940,128954,128978,128980,129178,129198,129202,129204,129238,129258,129306,129326,129330,129332,129358,129372,129378,129380,129384,129398,129430,129446,129452,129466,129482,129490,129492,129562,129582,129586,129588,129614,129628,129634,129636,129640,129654,129678,129692,129720,129730,129732,129736,129744,129758,129766,129772,129814,129830,129836,129850,129862,129868,129880,129902,129906,129908,129930,129938,129940,129954,129956,129960,129974,130010]),t.CODEWORD_TABLE=Int32Array.from([2627,1819,2622,2621,1813,1812,2729,2724,2723,2779,2774,2773,902,896,908,868,865,861,859,2511,873,871,1780,835,2493,825,2491,842,837,844,1764,1762,811,810,809,2483,807,2482,806,2480,815,814,813,812,2484,817,816,1745,1744,1742,1746,2655,2637,2635,2626,2625,2623,2628,1820,2752,2739,2737,2728,2727,2725,2730,2785,2783,2778,2777,2775,2780,787,781,747,739,736,2413,754,752,1719,692,689,681,2371,678,2369,700,697,694,703,1688,1686,642,638,2343,631,2341,627,2338,651,646,643,2345,654,652,1652,1650,1647,1654,601,599,2322,596,2321,594,2319,2317,611,610,608,606,2324,603,2323,615,614,612,1617,1616,1614,1612,616,1619,1618,2575,2538,2536,905,901,898,909,2509,2507,2504,870,867,864,860,2512,875,872,1781,2490,2489,2487,2485,1748,836,834,832,830,2494,827,2492,843,841,839,845,1765,1763,2701,2676,2674,2653,2648,2656,2634,2633,2631,2629,1821,2638,2636,2770,2763,2761,2750,2745,2753,2736,2735,2733,2731,1848,2740,2738,2786,2784,591,588,576,569,566,2296,1590,537,534,526,2276,522,2274,545,542,539,548,1572,1570,481,2245,466,2242,462,2239,492,485,482,2249,496,494,1534,1531,1528,1538,413,2196,406,2191,2188,425,419,2202,415,2199,432,430,427,1472,1467,1464,433,1476,1474,368,367,2160,365,2159,362,2157,2155,2152,378,377,375,2166,372,2165,369,2162,383,381,379,2168,1419,1418,1416,1414,385,1411,384,1423,1422,1420,1424,2461,802,2441,2439,790,786,783,794,2409,2406,2403,750,742,738,2414,756,753,1720,2367,2365,2362,2359,1663,693,691,684,2373,680,2370,702,699,696,704,1690,1687,2337,2336,2334,2332,1624,2329,1622,640,637,2344,634,2342,630,2340,650,648,645,2346,655,653,1653,1651,1649,1655,2612,2597,2595,2571,2568,2565,2576,2534,2529,2526,1787,2540,2537,907,904,900,910,2503,2502,2500,2498,1768,2495,1767,2510,2508,2506,869,866,863,2513,876,874,1782,2720,2713,2711,2697,2694,2691,2702,2672,2670,2664,1828,2678,2675,2647,2646,2644,2642,1823,2639,1822,2654,2652,2650,2657,2771,1855,2765,2762,1850,1849,2751,2749,2747,2754,353,2148,344,342,336,2142,332,2140,345,1375,1373,306,2130,299,2128,295,2125,319,314,311,2132,1354,1352,1349,1356,262,257,2101,253,2096,2093,274,273,267,2107,263,2104,280,278,275,1316,1311,1308,1320,1318,2052,202,2050,2044,2040,219,2063,212,2060,208,2055,224,221,2066,1260,1258,1252,231,1248,229,1266,1264,1261,1268,155,1998,153,1996,1994,1991,1988,165,164,2007,162,2006,159,2003,2e3,172,171,169,2012,166,2010,1186,1184,1182,1179,175,1176,173,1192,1191,1189,1187,176,1194,1193,2313,2307,2305,592,589,2294,2292,2289,578,572,568,2297,580,1591,2272,2267,2264,1547,538,536,529,2278,525,2275,547,544,541,1574,1571,2237,2235,2229,1493,2225,1489,478,2247,470,2244,465,2241,493,488,484,2250,498,495,1536,1533,1530,1539,2187,2186,2184,2182,1432,2179,1430,2176,1427,414,412,2197,409,2195,405,2193,2190,426,424,421,2203,418,2201,431,429,1473,1471,1469,1466,434,1477,1475,2478,2472,2470,2459,2457,2454,2462,803,2437,2432,2429,1726,2443,2440,792,789,785,2401,2399,2393,1702,2389,1699,2411,2408,2405,745,741,2415,758,755,1721,2358,2357,2355,2353,1661,2350,1660,2347,1657,2368,2366,2364,2361,1666,690,687,2374,683,2372,701,698,705,1691,1689,2619,2617,2610,2608,2605,2613,2593,2588,2585,1803,2599,2596,2563,2561,2555,1797,2551,1795,2573,2570,2567,2577,2525,2524,2522,2520,1786,2517,1785,2514,1783,2535,2533,2531,2528,1788,2541,2539,906,903,911,2721,1844,2715,2712,1838,1836,2699,2696,2693,2703,1827,1826,1824,2673,2671,2669,2666,1829,2679,2677,1858,1857,2772,1854,1853,1851,1856,2766,2764,143,1987,139,1986,135,133,131,1984,128,1983,125,1981,138,137,136,1985,1133,1132,1130,112,110,1974,107,1973,104,1971,1969,122,121,119,117,1977,114,1976,124,1115,1114,1112,1110,1117,1116,84,83,1953,81,1952,78,1950,1948,1945,94,93,91,1959,88,1958,85,1955,99,97,95,1961,1086,1085,1083,1081,1078,100,1090,1089,1087,1091,49,47,1917,44,1915,1913,1910,1907,59,1926,56,1925,53,1922,1919,66,64,1931,61,1929,1042,1040,1038,71,1035,70,1032,68,1048,1047,1045,1043,1050,1049,12,10,1869,1867,1864,1861,21,1880,19,1877,1874,1871,28,1888,25,1886,22,1883,982,980,977,974,32,30,991,989,987,984,34,995,994,992,2151,2150,2147,2146,2144,356,355,354,2149,2139,2138,2136,2134,1359,343,341,338,2143,335,2141,348,347,346,1376,1374,2124,2123,2121,2119,1326,2116,1324,310,308,305,2131,302,2129,298,2127,320,318,316,313,2133,322,321,1355,1353,1351,1357,2092,2091,2089,2087,1276,2084,1274,2081,1271,259,2102,256,2100,252,2098,2095,272,269,2108,266,2106,281,279,277,1317,1315,1313,1310,282,1321,1319,2039,2037,2035,2032,1203,2029,1200,1197,207,2053,205,2051,201,2049,2046,2043,220,218,2064,215,2062,211,2059,228,226,223,2069,1259,1257,1254,232,1251,230,1267,1265,1263,2316,2315,2312,2311,2309,2314,2304,2303,2301,2299,1593,2308,2306,590,2288,2287,2285,2283,1578,2280,1577,2295,2293,2291,579,577,574,571,2298,582,581,1592,2263,2262,2260,2258,1545,2255,1544,2252,1541,2273,2271,2269,2266,1550,535,532,2279,528,2277,546,543,549,1575,1573,2224,2222,2220,1486,2217,1485,2214,1482,1479,2238,2236,2234,2231,1496,2228,1492,480,477,2248,473,2246,469,2243,490,487,2251,497,1537,1535,1532,2477,2476,2474,2479,2469,2468,2466,2464,1730,2473,2471,2453,2452,2450,2448,1729,2445,1728,2460,2458,2456,2463,805,804,2428,2427,2425,2423,1725,2420,1724,2417,1722,2438,2436,2434,2431,1727,2444,2442,793,791,788,795,2388,2386,2384,1697,2381,1696,2378,1694,1692,2402,2400,2398,2395,1703,2392,1701,2412,2410,2407,751,748,744,2416,759,757,1807,2620,2618,1806,1805,2611,2609,2607,2614,1802,1801,1799,2594,2592,2590,2587,1804,2600,2598,1794,1793,1791,1789,2564,2562,2560,2557,1798,2554,1796,2574,2572,2569,2578,1847,1846,2722,1843,1842,1840,1845,2716,2714,1835,1834,1832,1830,1839,1837,2700,2698,2695,2704,1817,1811,1810,897,862,1777,829,826,838,1760,1758,808,2481,1741,1740,1738,1743,2624,1818,2726,2776,782,740,737,1715,686,679,695,1682,1680,639,628,2339,647,644,1645,1643,1640,1648,602,600,597,595,2320,593,2318,609,607,604,1611,1610,1608,1606,613,1615,1613,2328,926,924,892,886,899,857,850,2505,1778,824,823,821,819,2488,818,2486,833,831,828,840,1761,1759,2649,2632,2630,2746,2734,2732,2782,2781,570,567,1587,531,527,523,540,1566,1564,476,467,463,2240,486,483,1524,1521,1518,1529,411,403,2192,399,2189,423,416,1462,1457,1454,428,1468,1465,2210,366,363,2158,360,2156,357,2153,376,373,370,2163,1410,1409,1407,1405,382,1402,380,1417,1415,1412,1421,2175,2174,777,774,771,784,732,725,722,2404,743,1716,676,674,668,2363,665,2360,685,1684,1681,626,624,622,2335,620,2333,617,2330,641,635,649,1646,1644,1642,2566,928,925,2530,2527,894,891,888,2501,2499,2496,858,856,854,851,1779,2692,2668,2665,2645,2643,2640,2651,2768,2759,2757,2744,2743,2741,2748,352,1382,340,337,333,1371,1369,307,300,296,2126,315,312,1347,1342,1350,261,258,250,2097,246,2094,271,268,264,1306,1301,1298,276,1312,1309,2115,203,2048,195,2045,191,2041,213,209,2056,1246,1244,1238,225,1234,222,1256,1253,1249,1262,2080,2079,154,1997,150,1995,147,1992,1989,163,160,2004,156,2001,1175,1174,1172,1170,1167,170,1164,167,1185,1183,1180,1177,174,1190,1188,2025,2024,2022,587,586,564,559,556,2290,573,1588,520,518,512,2268,508,2265,530,1568,1565,461,457,2233,450,2230,446,2226,479,471,489,1526,1523,1520,397,395,2185,392,2183,389,2180,2177,410,2194,402,422,1463,1461,1459,1456,1470,2455,799,2433,2430,779,776,773,2397,2394,2390,734,728,724,746,1717,2356,2354,2351,2348,1658,677,675,673,670,667,688,1685,1683,2606,2589,2586,2559,2556,2552,927,2523,2521,2518,2515,1784,2532,895,893,890,2718,2709,2707,2689,2687,2684,2663,2662,2660,2658,1825,2667,2769,1852,2760,2758,142,141,1139,1138,134,132,129,126,1982,1129,1128,1126,1131,113,111,108,105,1972,101,1970,120,118,115,1109,1108,1106,1104,123,1113,1111,82,79,1951,75,1949,72,1946,92,89,86,1956,1077,1076,1074,1072,98,1069,96,1084,1082,1079,1088,1968,1967,48,45,1916,42,1914,39,1911,1908,60,57,54,1923,50,1920,1031,1030,1028,1026,67,1023,65,1020,62,1041,1039,1036,1033,69,1046,1044,1944,1943,1941,11,9,1868,7,1865,1862,1859,20,1878,16,1875,13,1872,970,968,966,963,29,960,26,23,983,981,978,975,33,971,31,990,988,985,1906,1904,1902,993,351,2145,1383,331,330,328,326,2137,323,2135,339,1372,1370,294,293,291,289,2122,286,2120,283,2117,309,303,317,1348,1346,1344,245,244,242,2090,239,2088,236,2085,2082,260,2099,249,270,1307,1305,1303,1300,1314,189,2038,186,2036,183,2033,2030,2026,206,198,2047,194,216,1247,1245,1243,1240,227,1237,1255,2310,2302,2300,2286,2284,2281,565,563,561,558,575,1589,2261,2259,2256,2253,1542,521,519,517,514,2270,511,533,1569,1567,2223,2221,2218,2215,1483,2211,1480,459,456,453,2232,449,474,491,1527,1525,1522,2475,2467,2465,2451,2449,2446,801,800,2426,2424,2421,2418,1723,2435,780,778,775,2387,2385,2382,2379,1695,2375,1693,2396,735,733,730,727,749,1718,2616,2615,2604,2603,2601,2584,2583,2581,2579,1800,2591,2550,2549,2547,2545,1792,2542,1790,2558,929,2719,1841,2710,2708,1833,1831,2690,2688,2686,1815,1809,1808,1774,1756,1754,1737,1736,1734,1739,1816,1711,1676,1674,633,629,1638,1636,1633,1641,598,1605,1604,1602,1600,605,1609,1607,2327,887,853,1775,822,820,1757,1755,1584,524,1560,1558,468,464,1514,1511,1508,1519,408,404,400,1452,1447,1444,417,1458,1455,2208,364,361,358,2154,1401,1400,1398,1396,374,1393,371,1408,1406,1403,1413,2173,2172,772,726,723,1712,672,669,666,682,1678,1675,625,623,621,618,2331,636,632,1639,1637,1635,920,918,884,880,889,849,848,847,846,2497,855,852,1776,2641,2742,2787,1380,334,1367,1365,301,297,1340,1338,1335,1343,255,251,247,1296,1291,1288,265,1302,1299,2113,204,196,192,2042,1232,1230,1224,214,1220,210,1242,1239,1235,1250,2077,2075,151,148,1993,144,1990,1163,1162,1160,1158,1155,161,1152,157,1173,1171,1168,1165,168,1181,1178,2021,2020,2018,2023,585,560,557,1585,516,509,1562,1559,458,447,2227,472,1516,1513,1510,398,396,393,390,2181,386,2178,407,1453,1451,1449,1446,420,1460,2209,769,764,720,712,2391,729,1713,664,663,661,659,2352,656,2349,671,1679,1677,2553,922,919,2519,2516,885,883,881,2685,2661,2659,2767,2756,2755,140,1137,1136,130,127,1125,1124,1122,1127,109,106,102,1103,1102,1100,1098,116,1107,1105,1980,80,76,73,1947,1068,1067,1065,1063,90,1060,87,1075,1073,1070,1080,1966,1965,46,43,40,1912,36,1909,1019,1018,1016,1014,58,1011,55,1008,51,1029,1027,1024,1021,63,1037,1034,1940,1939,1937,1942,8,1866,4,1863,1,1860,956,954,952,949,946,17,14,969,967,964,961,27,957,24,979,976,972,1901,1900,1898,1896,986,1905,1903,350,349,1381,329,327,324,1368,1366,292,290,287,284,2118,304,1341,1339,1337,1345,243,240,237,2086,233,2083,254,1297,1295,1293,1290,1304,2114,190,187,184,2034,180,2031,177,2027,199,1233,1231,1229,1226,217,1223,1241,2078,2076,584,555,554,552,550,2282,562,1586,507,506,504,502,2257,499,2254,515,1563,1561,445,443,441,2219,438,2216,435,2212,460,454,475,1517,1515,1512,2447,798,797,2422,2419,770,768,766,2383,2380,2376,721,719,717,714,731,1714,2602,2582,2580,2548,2546,2543,923,921,2717,2706,2705,2683,2682,2680,1771,1752,1750,1733,1732,1731,1735,1814,1707,1670,1668,1631,1629,1626,1634,1599,1598,1596,1594,1603,1601,2326,1772,1753,1751,1581,1554,1552,1504,1501,1498,1509,1442,1437,1434,401,1448,1445,2206,1392,1391,1389,1387,1384,359,1399,1397,1394,1404,2171,2170,1708,1672,1669,619,1632,1630,1628,1773,1378,1363,1361,1333,1328,1336,1286,1281,1278,248,1292,1289,2111,1218,1216,1210,197,1206,193,1228,1225,1221,1236,2073,2071,1151,1150,1148,1146,152,1143,149,1140,145,1161,1159,1156,1153,158,1169,1166,2017,2016,2014,2019,1582,510,1556,1553,452,448,1506,1500,394,391,387,1443,1441,1439,1436,1450,2207,765,716,713,1709,662,660,657,1673,1671,916,914,879,878,877,882,1135,1134,1121,1120,1118,1123,1097,1096,1094,1092,103,1101,1099,1979,1059,1058,1056,1054,77,1051,74,1066,1064,1061,1071,1964,1963,1007,1006,1004,1002,999,41,996,37,1017,1015,1012,1009,52,1025,1022,1936,1935,1933,1938,942,940,938,935,932,5,2,955,953,950,947,18,943,15,965,962,958,1895,1894,1892,1890,973,1899,1897,1379,325,1364,1362,288,285,1334,1332,1330,241,238,234,1287,1285,1283,1280,1294,2112,188,185,181,178,2028,1219,1217,1215,1212,200,1209,1227,2074,2072,583,553,551,1583,505,503,500,513,1557,1555,444,442,439,436,2213,455,451,1507,1505,1502,796,763,762,760,767,711,710,708,706,2377,718,715,1710,2544,917,915,2681,1627,1597,1595,2325,1769,1749,1747,1499,1438,1435,2204,1390,1388,1385,1395,2169,2167,1704,1665,1662,1625,1623,1620,1770,1329,1282,1279,2109,1214,1207,1222,2068,2065,1149,1147,1144,1141,146,1157,1154,2013,2011,2008,2015,1579,1549,1546,1495,1487,1433,1431,1428,1425,388,1440,2205,1705,658,1667,1664,1119,1095,1093,1978,1057,1055,1052,1062,1962,1960,1005,1003,1e3,997,38,1013,1010,1932,1930,1927,1934,941,939,936,933,6,930,3,951,948,944,1889,1887,1884,1881,959,1893,1891,35,1377,1360,1358,1327,1325,1322,1331,1277,1275,1272,1269,235,1284,2110,1205,1204,1201,1198,182,1195,179,1213,2070,2067,1580,501,1551,1548,440,437,1497,1494,1490,1503,761,709,707,1706,913,912,2198,1386,2164,2161,1621,1766,2103,1208,2058,2054,1145,1142,2005,2002,1999,2009,1488,1429,1426,2200,1698,1659,1656,1975,1053,1957,1954,1001,998,1924,1921,1918,1928,937,934,931,1879,1876,1873,1870,945,1885,1882,1323,1273,1270,2105,1202,1199,1196,1211,2061,2057,1576,1543,1540,1484,1481,1478,1491,1700]),t}(),H3e=function(){function t(e,r){this.bits=e,this.points=r}return t.prototype.getBits=function(){return this.bits},t.prototype.getPoints=function(){return this.points},t}(),$3e=function(t){var e=typeof Symbol=="function"&&Symbol.iterator,r=e&&t[e],n=0;if(r)return r.call(t);if(t&&typeof t.length=="number")return{next:function(){return t&&n>=t.length&&(t=void 0),{value:t&&t[n++],done:!t}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")},K3e=function(){function t(){}return t.detectMultiple=function(e,r,n){var a=e.getBlackMatrix(),s=t.detect(n,a);return s.length||(a=a.clone(),a.rotate180(),s=t.detect(n,a)),new H3e(a,s)},t.detect=function(e,r){for(var n,a,s=new Array,i=0,l=0,c=!1;i<r.getHeight();){var u=t.findVertices(r,i,l);if(u[0]==null&&u[3]==null){if(!c)break;c=!1,l=0;try{for(var d=(n=void 0,$3e(s)),f=d.next();!f.done;f=d.next()){var h=f.value;h[1]!=null&&(i=Math.trunc(Math.max(i,h[1].getY()))),h[3]!=null&&(i=Math.max(i,Math.trunc(h[3].getY())))}}catch(A){n={error:A}}finally{try{f&&!f.done&&(a=d.return)&&a.call(d)}finally{if(n)throw n.error}}i+=t.ROW_STEP;continue}if(c=!0,s.push(u),!e)break;u[2]!=null?(l=Math.trunc(u[2].getX()),i=Math.trunc(u[2].getY())):(l=Math.trunc(u[4].getX()),i=Math.trunc(u[4].getY()))}return s},t.findVertices=function(e,r,n){var a=e.getHeight(),s=e.getWidth(),i=new Array(8);return t.copyToResult(i,t.findRowsWithPattern(e,a,s,r,n,t.START_PATTERN),t.INDEXES_START_PATTERN),i[4]!=null&&(n=Math.trunc(i[4].getX()),r=Math.trunc(i[4].getY())),t.copyToResult(i,t.findRowsWithPattern(e,a,s,r,n,t.STOP_PATTERN),t.INDEXES_STOP_PATTERN),i},t.copyToResult=function(e,r,n){for(var a=0;a<n.length;a++)e[n[a]]=r[a]},t.findRowsWithPattern=function(e,r,n,a,s,i){for(var l=new Array(4),c=!1,u=new Int32Array(i.length);a<r;a+=t.ROW_STEP){var d=t.findGuardPattern(e,s,a,n,!1,i,u);if(d!=null){for(;a>0;){var f=t.findGuardPattern(e,s,--a,n,!1,i,u);if(f!=null)d=f;else{a++;break}}l[0]=new Vr(d[0],a),l[1]=new Vr(d[1],a),c=!0;break}}var h=a+1;if(c){for(var A=0,f=Int32Array.from([Math.trunc(l[0].getX()),Math.trunc(l[1].getX())]);h<r;h++){var d=t.findGuardPattern(e,f[0],h,n,!1,i,u);if(d!=null&&Math.abs(f[0]-d[0])<t.MAX_PATTERN_DRIFT&&Math.abs(f[1]-d[1])<t.MAX_PATTERN_DRIFT)f=d,A=0;else{if(A>t.SKIPPED_ROW_COUNT_MAX)break;A++}}h-=A+1,l[2]=new Vr(f[0],h),l[3]=new Vr(f[1],h)}return h-a<t.BARCODE_MIN_HEIGHT&&Ui.fill(l,null),l},t.findGuardPattern=function(e,r,n,a,s,i,l){Ui.fillWithin(l,0,l.length,0);for(var c=r,u=0;e.get(c,n)&&c>0&&u++<t.MAX_PIXEL_DRIFT;)c--;for(var d=c,f=0,h=i.length,A=s;d<a;d++){var m=e.get(d,n);if(m!==A)l[f]++;else{if(f===h-1){if(t.patternMatchVariance(l,i,t.MAX_INDIVIDUAL_VARIANCE)<t.MAX_AVG_VARIANCE)return new Int32Array([c,d]);c+=l[0]+l[1],Ka.arraycopy(l,2,l,0,f-1),l[f-1]=0,l[f]=0,f--}else f++;l[f]=1,A=!A}}return f===h-1&&t.patternMatchVariance(l,i,t.MAX_INDIVIDUAL_VARIANCE)<t.MAX_AVG_VARIANCE?new Int32Array([c,d-1]):null},t.patternMatchVariance=function(e,r,n){for(var a=e.length,s=0,i=0,l=0;l<a;l++)s+=e[l],i+=r[l];if(s<i)return 1/0;var c=s/i;n*=c;for(var u=0,d=0;d<a;d++){var f=e[d],h=r[d]*c,A=f>h?f-h:h-f;if(A>n)return 1/0;u+=A}return u/s},t.INDEXES_START_PATTERN=Int32Array.from([0,4,1,5]),t.INDEXES_STOP_PATTERN=Int32Array.from([6,2,7,3]),t.MAX_AVG_VARIANCE=.42,t.MAX_INDIVIDUAL_VARIANCE=.8,t.START_PATTERN=Int32Array.from([8,1,1,1,1,1,1,3]),t.STOP_PATTERN=Int32Array.from([7,1,1,3,1,1,1,2,1]),t.MAX_PIXEL_DRIFT=3,t.MAX_PATTERN_DRIFT=5,t.SKIPPED_ROW_COUNT_MAX=25,t.ROW_STEP=5,t.BARCODE_MIN_HEIGHT=10,t}(),G3e=function(t){var e=typeof Symbol=="function"&&Symbol.iterator,r=e&&t[e],n=0;if(r)return r.call(t);if(t&&typeof t.length=="number")return{next:function(){return t&&n>=t.length&&(t=void 0),{value:t&&t[n++],done:!t}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")},zm=function(){function t(e,r){if(r.length===0)throw new en;this.field=e;var n=r.length;if(n>1&&r[0]===0){for(var a=1;a<n&&r[a]===0;)a++;a===n?this.coefficients=new Int32Array([0]):(this.coefficients=new Int32Array(n-a),Ka.arraycopy(r,a,this.coefficients,0,this.coefficients.length))}else this.coefficients=r}return t.prototype.getCoefficients=function(){return this.coefficients},t.prototype.getDegree=function(){return this.coefficients.length-1},t.prototype.isZero=function(){return this.coefficients[0]===0},t.prototype.getCoefficient=function(e){return this.coefficients[this.coefficients.length-1-e]},t.prototype.evaluateAt=function(e){var r,n;if(e===0)return this.getCoefficient(0);if(e===1){var a=0;try{for(var s=G3e(this.coefficients),i=s.next();!i.done;i=s.next()){var l=i.value;a=this.field.add(a,l)}}catch(f){r={error:f}}finally{try{i&&!i.done&&(n=s.return)&&n.call(s)}finally{if(r)throw r.error}}return a}for(var c=this.coefficients[0],u=this.coefficients.length,d=1;d<u;d++)c=this.field.add(this.field.multiply(e,c),this.coefficients[d]);return c},t.prototype.add=function(e){if(!this.field.equals(e.field))throw new en("ModulusPolys do not have same ModulusGF field");if(this.isZero())return e;if(e.isZero())return this;var r=this.coefficients,n=e.coefficients;if(r.length>n.length){var a=r;r=n,n=a}var s=new Int32Array(n.length),i=n.length-r.length;Ka.arraycopy(n,0,s,0,i);for(var l=i;l<n.length;l++)s[l]=this.field.add(r[l-i],n[l]);return new t(this.field,s)},t.prototype.subtract=function(e){if(!this.field.equals(e.field))throw new en("ModulusPolys do not have same ModulusGF field");return e.isZero()?this:this.add(e.negative())},t.prototype.multiply=function(e){return e instanceof t?this.multiplyOther(e):this.multiplyScalar(e)},t.prototype.multiplyOther=function(e){if(!this.field.equals(e.field))throw new en("ModulusPolys do not have same ModulusGF field");if(this.isZero()||e.isZero())return new t(this.field,new Int32Array([0]));for(var r=this.coefficients,n=r.length,a=e.coefficients,s=a.length,i=new Int32Array(n+s-1),l=0;l<n;l++)for(var c=r[l],u=0;u<s;u++)i[l+u]=this.field.add(i[l+u],this.field.multiply(c,a[u]));return new t(this.field,i)},t.prototype.negative=function(){for(var e=this.coefficients.length,r=new Int32Array(e),n=0;n<e;n++)r[n]=this.field.subtract(0,this.coefficients[n]);return new t(this.field,r)},t.prototype.multiplyScalar=function(e){if(e===0)return new t(this.field,new Int32Array([0]));if(e===1)return this;for(var r=this.coefficients.length,n=new Int32Array(r),a=0;a<r;a++)n[a]=this.field.multiply(this.coefficients[a],e);return new t(this.field,n)},t.prototype.multiplyByMonomial=function(e,r){if(e<0)throw new en;if(r===0)return new t(this.field,new Int32Array([0]));for(var n=this.coefficients.length,a=new Int32Array(n+e),s=0;s<n;s++)a[s]=this.field.multiply(this.coefficients[s],r);return new t(this.field,a)},t.prototype.toString=function(){for(var e=new _n,r=this.getDegree();r>=0;r--){var n=this.getCoefficient(r);n!==0&&(n<0?(e.append(" - "),n=-n):e.length()>0&&e.append(" + "),(r===0||n!==1)&&e.append(n),r!==0&&(r===1?e.append("x"):(e.append("x^"),e.append(r))))}return e.toString()},t}(),q3e=function(){function t(){}return t.prototype.add=function(e,r){return(e+r)%this.modulus},t.prototype.subtract=function(e,r){return(this.modulus+e-r)%this.modulus},t.prototype.exp=function(e){return this.expTable[e]},t.prototype.log=function(e){if(e===0)throw new en;return this.logTable[e]},t.prototype.inverse=function(e){if(e===0)throw new mte;return this.expTable[this.modulus-this.logTable[e]-1]},t.prototype.multiply=function(e,r){return e===0||r===0?0:this.expTable[(this.logTable[e]+this.logTable[r])%(this.modulus-1)]},t.prototype.getSize=function(){return this.modulus},t.prototype.equals=function(e){return e===this},t}(),z3e=function(){var t=function(e,r){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,a){n.__proto__=a}||function(n,a){for(var s in a)a.hasOwnProperty(s)&&(n[s]=a[s])},t(e,r)};return function(e,r){t(e,r);function n(){this.constructor=e}e.prototype=r===null?Object.create(r):(n.prototype=r.prototype,new n)}}(),W3e=function(t){z3e(e,t);function e(r,n){var a=t.call(this)||this;a.modulus=r,a.expTable=new Int32Array(r),a.logTable=new Int32Array(r);for(var s=1,i=0;i<r;i++)a.expTable[i]=s,s=s*n%r;for(var i=0;i<r-1;i++)a.logTable[a.expTable[i]]=i;return a.zero=new zm(a,new Int32Array([0])),a.one=new zm(a,new Int32Array([1])),a}return e.prototype.getZero=function(){return this.zero},e.prototype.getOne=function(){return this.one},e.prototype.buildMonomial=function(r,n){if(r<0)throw new en;if(n===0)return this.zero;var a=new Int32Array(r+1);return a[0]=n,new zm(this,a)},e.PDF417_GF=new e(qn.NUMBER_OF_CODEWORDS,3),e}(q3e),X3e=function(t){var e=typeof Symbol=="function"&&Symbol.iterator,r=e&&t[e],n=0;if(r)return r.call(t);if(t&&typeof t.length=="number")return{next:function(){return t&&n>=t.length&&(t=void 0),{value:t&&t[n++],done:!t}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")},Y3e=function(){function t(){this.field=W3e.PDF417_GF}return t.prototype.decode=function(e,r,n){for(var a,s,i=new zm(this.field,e),l=new Int32Array(r),c=!1,u=r;u>0;u--){var d=i.evaluateAt(this.field.exp(u));l[r-u]=d,d!==0&&(c=!0)}if(!c)return 0;var f=this.field.getOne();if(n!=null)try{for(var h=X3e(n),A=h.next();!A.done;A=h.next()){var m=A.value,p=this.field.exp(e.length-1-m),g=new zm(this.field,new Int32Array([this.field.subtract(0,p),1]));f=f.multiply(g)}}catch(E){a={error:E}}finally{try{A&&!A.done&&(s=h.return)&&s.call(h)}finally{if(a)throw a.error}}for(var x=new zm(this.field,l),y=this.runEuclideanAlgorithm(this.field.buildMonomial(r,1),x,r),b=y[0],w=y[1],j=this.findErrorLocations(b),I=this.findErrorMagnitudes(w,b,j),u=0;u<j.length;u++){var _=e.length-1-this.field.log(j[u]);if(_<0)throw bi.getChecksumInstance();e[_]=this.field.subtract(e[_],I[u])}return j.length},t.prototype.runEuclideanAlgorithm=function(e,r,n){if(e.getDegree()<r.getDegree()){var a=e;e=r,r=a}for(var s=e,i=r,l=this.field.getZero(),c=this.field.getOne();i.getDegree()>=Math.round(n/2);){var u=s,d=l;if(s=i,l=c,s.isZero())throw bi.getChecksumInstance();i=u;for(var f=this.field.getZero(),h=s.getCoefficient(s.getDegree()),A=this.field.inverse(h);i.getDegree()>=s.getDegree()&&!i.isZero();){var m=i.getDegree()-s.getDegree(),p=this.field.multiply(i.getCoefficient(i.getDegree()),A);f=f.add(this.field.buildMonomial(m,p)),i=i.subtract(s.multiplyByMonomial(m,p))}c=f.multiply(l).subtract(d).negative()}var g=c.getCoefficient(0);if(g===0)throw bi.getChecksumInstance();var x=this.field.inverse(g),y=c.multiply(x),b=i.multiply(x);return[y,b]},t.prototype.findErrorLocations=function(e){for(var r=e.getDegree(),n=new Int32Array(r),a=0,s=1;s<this.field.getSize()&&a<r;s++)e.evaluateAt(s)===0&&(n[a]=this.field.inverse(s),a++);if(a!==r)throw bi.getChecksumInstance();return n},t.prototype.findErrorMagnitudes=function(e,r,n){for(var a=r.getDegree(),s=new Int32Array(a),i=1;i<=a;i++)s[a-i]=this.field.multiply(i,r.getCoefficient(i));for(var l=new zm(this.field,s),c=n.length,u=new Int32Array(c),i=0;i<c;i++){var d=this.field.inverse(n[i]),f=this.field.subtract(0,e.evaluateAt(d)),h=this.field.inverse(l.evaluateAt(d));u[i]=this.field.multiply(f,h)}return u},t}(),tk=function(){function t(e,r,n,a,s){e instanceof t?this.constructor_2(e):this.constructor_1(e,r,n,a,s)}return t.prototype.constructor_1=function(e,r,n,a,s){var i=r==null||n==null,l=a==null||s==null;if(i&&l)throw new Wt;i?(r=new Vr(0,a.getY()),n=new Vr(0,s.getY())):l&&(a=new Vr(e.getWidth()-1,r.getY()),s=new Vr(e.getWidth()-1,n.getY())),this.image=e,this.topLeft=r,this.bottomLeft=n,this.topRight=a,this.bottomRight=s,this.minX=Math.trunc(Math.min(r.getX(),n.getX())),this.maxX=Math.trunc(Math.max(a.getX(),s.getX())),this.minY=Math.trunc(Math.min(r.getY(),a.getY())),this.maxY=Math.trunc(Math.max(n.getY(),s.getY()))},t.prototype.constructor_2=function(e){this.image=e.image,this.topLeft=e.getTopLeft(),this.bottomLeft=e.getBottomLeft(),this.topRight=e.getTopRight(),this.bottomRight=e.getBottomRight(),this.minX=e.getMinX(),this.maxX=e.getMaxX(),this.minY=e.getMinY(),this.maxY=e.getMaxY()},t.merge=function(e,r){return e==null?r:r==null?e:new t(e.image,e.topLeft,e.bottomLeft,r.topRight,r.bottomRight)},t.prototype.addMissingRows=function(e,r,n){var a=this.topLeft,s=this.bottomLeft,i=this.topRight,l=this.bottomRight;if(e>0){var c=n?this.topLeft:this.topRight,u=Math.trunc(c.getY()-e);u<0&&(u=0);var d=new Vr(c.getX(),u);n?a=d:i=d}if(r>0){var f=n?this.bottomLeft:this.bottomRight,h=Math.trunc(f.getY()+r);h>=this.image.getHeight()&&(h=this.image.getHeight()-1);var A=new Vr(f.getX(),h);n?s=A:l=A}return new t(this.image,a,s,i,l)},t.prototype.getMinX=function(){return this.minX},t.prototype.getMaxX=function(){return this.maxX},t.prototype.getMinY=function(){return this.minY},t.prototype.getMaxY=function(){return this.maxY},t.prototype.getTopLeft=function(){return this.topLeft},t.prototype.getTopRight=function(){return this.topRight},t.prototype.getBottomLeft=function(){return this.bottomLeft},t.prototype.getBottomRight=function(){return this.bottomRight},t}(),J3e=function(){function t(e,r,n,a){this.columnCount=e,this.errorCorrectionLevel=a,this.rowCountUpperPart=r,this.rowCountLowerPart=n,this.rowCount=r+n}return t.prototype.getColumnCount=function(){return this.columnCount},t.prototype.getErrorCorrectionLevel=function(){return this.errorCorrectionLevel},t.prototype.getRowCount=function(){return this.rowCount},t.prototype.getRowCountUpperPart=function(){return this.rowCountUpperPart},t.prototype.getRowCountLowerPart=function(){return this.rowCountLowerPart},t}(),H6=function(){function t(){this.buffer=""}return t.form=function(e,r){var n=-1;function a(i,l,c,u,d,f){if(i==="%%")return"%";if(r[++n]!==void 0){i=u?parseInt(u.substr(1)):void 0;var h=d?parseInt(d.substr(1)):void 0,A;switch(f){case"s":A=r[n];break;case"c":A=r[n][0];break;case"f":A=parseFloat(r[n]).toFixed(i);break;case"p":A=parseFloat(r[n]).toPrecision(i);break;case"e":A=parseFloat(r[n]).toExponential(i);break;case"x":A=parseInt(r[n]).toString(h||16);break;case"d":A=parseFloat(parseInt(r[n],h||10).toPrecision(i)).toFixed(0);break}A=typeof A=="object"?JSON.stringify(A):(+A).toString(h);for(var m=parseInt(c),p=c&&c[0]+""=="0"?"0":" ";A.length<m;)A=l!==void 0?A+p:p+A;return A}}var s=/%(-)?(0?[0-9]+)?([.][0-9]+)?([#][0-9]+)?([scfpexd%])/g;return e.replace(s,a)},t.prototype.format=function(e){for(var r=[],n=1;n<arguments.length;n++)r[n-1]=arguments[n];this.buffer+=t.form(e,r)},t.prototype.toString=function(){return this.buffer},t}(),Z3e=function(t){var e=typeof Symbol=="function"&&Symbol.iterator,r=e&&t[e],n=0;if(r)return r.call(t);if(t&&typeof t.length=="number")return{next:function(){return t&&n>=t.length&&(t=void 0),{value:t&&t[n++],done:!t}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")},Nte=function(){function t(e){this.boundingBox=new tk(e),this.codewords=new Array(e.getMaxY()-e.getMinY()+1)}return t.prototype.getCodewordNearby=function(e){var r=this.getCodeword(e);if(r!=null)return r;for(var n=1;n<t.MAX_NEARBY_DISTANCE;n++){var a=this.imageRowToCodewordIndex(e)-n;if(a>=0&&(r=this.codewords[a],r!=null)||(a=this.imageRowToCodewordIndex(e)+n,a<this.codewords.length&&(r=this.codewords[a],r!=null)))return r}return null},t.prototype.imageRowToCodewordIndex=function(e){return e-this.boundingBox.getMinY()},t.prototype.setCodeword=function(e,r){this.codewords[this.imageRowToCodewordIndex(e)]=r},t.prototype.getCodeword=function(e){return this.codewords[this.imageRowToCodewordIndex(e)]},t.prototype.getBoundingBox=function(){return this.boundingBox},t.prototype.getCodewords=function(){return this.codewords},t.prototype.toString=function(){var e,r,n=new H6,a=0;try{for(var s=Z3e(this.codewords),i=s.next();!i.done;i=s.next()){var l=i.value;if(l==null){n.format("%3d:    |   %n",a++);continue}n.format("%3d: %3d|%3d%n",a++,l.getRowNumber(),l.getValue())}}catch(c){e={error:c}}finally{try{i&&!i.done&&(r=s.return)&&r.call(s)}finally{if(e)throw e.error}}return n.toString()},t.MAX_NEARBY_DISTANCE=5,t}(),eje=function(t){var e=typeof Symbol=="function"&&Symbol.iterator,r=e&&t[e],n=0;if(r)return r.call(t);if(t&&typeof t.length=="number")return{next:function(){return t&&n>=t.length&&(t=void 0),{value:t&&t[n++],done:!t}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")},tje=function(t,e){var r=typeof Symbol=="function"&&t[Symbol.iterator];if(!r)return t;var n=r.call(t),a,s=[],i;try{for(;(e===void 0||e-- >0)&&!(a=n.next()).done;)s.push(a.value)}catch(l){i={error:l}}finally{try{a&&!a.done&&(r=n.return)&&r.call(n)}finally{if(i)throw i.error}}return s},vy=function(){function t(){this.values=new Map}return t.prototype.setValue=function(e){e=Math.trunc(e);var r=this.values.get(e);r==null&&(r=0),r++,this.values.set(e,r)},t.prototype.getValue=function(){var e,r,n=-1,a=new Array,s=function(f,h){var A={getKey:function(){return f},getValue:function(){return h}};A.getValue()>n?(n=A.getValue(),a=[],a.push(A.getKey())):A.getValue()===n&&a.push(A.getKey())};try{for(var i=eje(this.values.entries()),l=i.next();!l.done;l=i.next()){var c=tje(l.value,2),u=c[0],d=c[1];s(u,d)}}catch(f){e={error:f}}finally{try{l&&!l.done&&(r=i.return)&&r.call(i)}finally{if(e)throw e.error}}return qn.toIntArray(a)},t.prototype.getConfidence=function(e){return this.values.get(e)},t}(),rje=function(){var t=function(e,r){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,a){n.__proto__=a}||function(n,a){for(var s in a)a.hasOwnProperty(s)&&(n[s]=a[s])},t(e,r)};return function(e,r){t(e,r);function n(){this.constructor=e}e.prototype=r===null?Object.create(r):(n.prototype=r.prototype,new n)}}(),Q5=function(t){var e=typeof Symbol=="function"&&Symbol.iterator,r=e&&t[e],n=0;if(r)return r.call(t);if(t&&typeof t.length=="number")return{next:function(){return t&&n>=t.length&&(t=void 0),{value:t&&t[n++],done:!t}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")},vV=function(t){rje(e,t);function e(r,n){var a=t.call(this,r)||this;return a._isLeft=n,a}return e.prototype.setRowNumbers=function(){var r,n;try{for(var a=Q5(this.getCodewords()),s=a.next();!s.done;s=a.next()){var i=s.value;i!=null&&i.setRowNumberAsRowIndicatorColumn()}}catch(l){r={error:l}}finally{try{s&&!s.done&&(n=a.return)&&n.call(a)}finally{if(r)throw r.error}}},e.prototype.adjustCompleteIndicatorColumnRowNumbers=function(r){var n=this.getCodewords();this.setRowNumbers(),this.removeIncorrectCodewords(n,r);for(var a=this.getBoundingBox(),s=this._isLeft?a.getTopLeft():a.getTopRight(),i=this._isLeft?a.getBottomLeft():a.getBottomRight(),l=this.imageRowToCodewordIndex(Math.trunc(s.getY())),c=this.imageRowToCodewordIndex(Math.trunc(i.getY())),u=-1,d=1,f=0,h=l;h<c;h++)if(n[h]!=null){var A=n[h],m=A.getRowNumber()-u;if(m===0)f++;else if(m===1)d=Math.max(d,f),f=1,u=A.getRowNumber();else if(m<0||A.getRowNumber()>=r.getRowCount()||m>h)n[h]=null;else{var p=void 0;d>2?p=(d-2)*m:p=m;for(var g=p>=h,x=1;x<=p&&!g;x++)g=n[h-x]!=null;g?n[h]=null:(u=A.getRowNumber(),f=1)}}},e.prototype.getRowHeights=function(){var r,n,a=this.getBarcodeMetadata();if(a==null)return null;this.adjustIncompleteIndicatorColumnRowNumbers(a);var s=new Int32Array(a.getRowCount());try{for(var i=Q5(this.getCodewords()),l=i.next();!l.done;l=i.next()){var c=l.value;if(c!=null){var u=c.getRowNumber();if(u>=s.length)continue;s[u]++}}}catch(d){r={error:d}}finally{try{l&&!l.done&&(n=i.return)&&n.call(i)}finally{if(r)throw r.error}}return s},e.prototype.adjustIncompleteIndicatorColumnRowNumbers=function(r){for(var n=this.getBoundingBox(),a=this._isLeft?n.getTopLeft():n.getTopRight(),s=this._isLeft?n.getBottomLeft():n.getBottomRight(),i=this.imageRowToCodewordIndex(Math.trunc(a.getY())),l=this.imageRowToCodewordIndex(Math.trunc(s.getY())),c=this.getCodewords(),u=-1,d=i;d<l;d++)if(c[d]!=null){var f=c[d];f.setRowNumberAsRowIndicatorColumn();var h=f.getRowNumber()-u;h===0||(h===1?u=f.getRowNumber():f.getRowNumber()>=r.getRowCount()?c[d]=null:u=f.getRowNumber())}},e.prototype.getBarcodeMetadata=function(){var r,n,a=this.getCodewords(),s=new vy,i=new vy,l=new vy,c=new vy;try{for(var u=Q5(a),d=u.next();!d.done;d=u.next()){var f=d.value;if(f!=null){f.setRowNumberAsRowIndicatorColumn();var h=f.getValue()%30,A=f.getRowNumber();switch(this._isLeft||(A+=2),A%3){case 0:i.setValue(h*3+1);break;case 1:c.setValue(h/3),l.setValue(h%3);break;case 2:s.setValue(h+1);break}}}}catch(p){r={error:p}}finally{try{d&&!d.done&&(n=u.return)&&n.call(u)}finally{if(r)throw r.error}}if(s.getValue().length===0||i.getValue().length===0||l.getValue().length===0||c.getValue().length===0||s.getValue()[0]<1||i.getValue()[0]+l.getValue()[0]<qn.MIN_ROWS_IN_BARCODE||i.getValue()[0]+l.getValue()[0]>qn.MAX_ROWS_IN_BARCODE)return null;var m=new J3e(s.getValue()[0],i.getValue()[0],l.getValue()[0],c.getValue()[0]);return this.removeIncorrectCodewords(a,m),m},e.prototype.removeIncorrectCodewords=function(r,n){for(var a=0;a<r.length;a++){var s=r[a];if(r[a]!=null){var i=s.getValue()%30,l=s.getRowNumber();if(l>n.getRowCount()){r[a]=null;continue}switch(this._isLeft||(l+=2),l%3){case 0:i*3+1!==n.getRowCountUpperPart()&&(r[a]=null);break;case 1:(Math.trunc(i/3)!==n.getErrorCorrectionLevel()||i%3!==n.getRowCountLowerPart())&&(r[a]=null);break;case 2:i+1!==n.getColumnCount()&&(r[a]=null);break}}}},e.prototype.isLeft=function(){return this._isLeft},e.prototype.toString=function(){return"IsLeft: "+this._isLeft+`
`+t.prototype.toString.call(this)},e}(Nte),nje=function(t){var e=typeof Symbol=="function"&&Symbol.iterator,r=e&&t[e],n=0;if(r)return r.call(t);if(t&&typeof t.length=="number")return{next:function(){return t&&n>=t.length&&(t=void 0),{value:t&&t[n++],done:!t}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")},aje=function(){function t(e,r){this.ADJUST_ROW_NUMBER_SKIP=2,this.barcodeMetadata=e,this.barcodeColumnCount=e.getColumnCount(),this.boundingBox=r,this.detectionResultColumns=new Array(this.barcodeColumnCount+2)}return t.prototype.getDetectionResultColumns=function(){this.adjustIndicatorColumnRowNumbers(this.detectionResultColumns[0]),this.adjustIndicatorColumnRowNumbers(this.detectionResultColumns[this.barcodeColumnCount+1]);var e=qn.MAX_CODEWORDS_IN_BARCODE,r;do r=e,e=this.adjustRowNumbersAndGetCount();while(e>0&&e<r);return this.detectionResultColumns},t.prototype.adjustIndicatorColumnRowNumbers=function(e){e!=null&&e.adjustCompleteIndicatorColumnRowNumbers(this.barcodeMetadata)},t.prototype.adjustRowNumbersAndGetCount=function(){var e=this.adjustRowNumbersByRow();if(e===0)return 0;for(var r=1;r<this.barcodeColumnCount+1;r++)for(var n=this.detectionResultColumns[r].getCodewords(),a=0;a<n.length;a++)n[a]!=null&&(n[a].hasValidRowNumber()||this.adjustRowNumbers(r,a,n));return e},t.prototype.adjustRowNumbersByRow=function(){this.adjustRowNumbersFromBothRI();var e=this.adjustRowNumbersFromLRI();return e+this.adjustRowNumbersFromRRI()},t.prototype.adjustRowNumbersFromBothRI=function(){if(!(this.detectionResultColumns[0]==null||this.detectionResultColumns[this.barcodeColumnCount+1]==null)){for(var e=this.detectionResultColumns[0].getCodewords(),r=this.detectionResultColumns[this.barcodeColumnCount+1].getCodewords(),n=0;n<e.length;n++)if(e[n]!=null&&r[n]!=null&&e[n].getRowNumber()===r[n].getRowNumber())for(var a=1;a<=this.barcodeColumnCount;a++){var s=this.detectionResultColumns[a].getCodewords()[n];s!=null&&(s.setRowNumber(e[n].getRowNumber()),s.hasValidRowNumber()||(this.detectionResultColumns[a].getCodewords()[n]=null))}}},t.prototype.adjustRowNumbersFromRRI=function(){if(this.detectionResultColumns[this.barcodeColumnCount+1]==null)return 0;for(var e=0,r=this.detectionResultColumns[this.barcodeColumnCount+1].getCodewords(),n=0;n<r.length;n++)if(r[n]!=null)for(var a=r[n].getRowNumber(),s=0,i=this.barcodeColumnCount+1;i>0&&s<this.ADJUST_ROW_NUMBER_SKIP;i--){var l=this.detectionResultColumns[i].getCodewords()[n];l!=null&&(s=t.adjustRowNumberIfValid(a,s,l),l.hasValidRowNumber()||e++)}return e},t.prototype.adjustRowNumbersFromLRI=function(){if(this.detectionResultColumns[0]==null)return 0;for(var e=0,r=this.detectionResultColumns[0].getCodewords(),n=0;n<r.length;n++)if(r[n]!=null)for(var a=r[n].getRowNumber(),s=0,i=1;i<this.barcodeColumnCount+1&&s<this.ADJUST_ROW_NUMBER_SKIP;i++){var l=this.detectionResultColumns[i].getCodewords()[n];l!=null&&(s=t.adjustRowNumberIfValid(a,s,l),l.hasValidRowNumber()||e++)}return e},t.adjustRowNumberIfValid=function(e,r,n){return n==null||n.hasValidRowNumber()||(n.isValidRowNumber(e)?(n.setRowNumber(e),r=0):++r),r},t.prototype.adjustRowNumbers=function(e,r,n){var a,s;if(this.detectionResultColumns[e-1]!=null){var i=n[r],l=this.detectionResultColumns[e-1].getCodewords(),c=l;this.detectionResultColumns[e+1]!=null&&(c=this.detectionResultColumns[e+1].getCodewords());var u=new Array(14);u[2]=l[r],u[3]=c[r],r>0&&(u[0]=n[r-1],u[4]=l[r-1],u[5]=c[r-1]),r>1&&(u[8]=n[r-2],u[10]=l[r-2],u[11]=c[r-2]),r<n.length-1&&(u[1]=n[r+1],u[6]=l[r+1],u[7]=c[r+1]),r<n.length-2&&(u[9]=n[r+2],u[12]=l[r+2],u[13]=c[r+2]);try{for(var d=nje(u),f=d.next();!f.done;f=d.next()){var h=f.value;if(t.adjustRowNumber(i,h))return}}catch(A){a={error:A}}finally{try{f&&!f.done&&(s=d.return)&&s.call(d)}finally{if(a)throw a.error}}}},t.adjustRowNumber=function(e,r){return r==null?!1:r.hasValidRowNumber()&&r.getBucket()===e.getBucket()?(e.setRowNumber(r.getRowNumber()),!0):!1},t.prototype.getBarcodeColumnCount=function(){return this.barcodeColumnCount},t.prototype.getBarcodeRowCount=function(){return this.barcodeMetadata.getRowCount()},t.prototype.getBarcodeECLevel=function(){return this.barcodeMetadata.getErrorCorrectionLevel()},t.prototype.setBoundingBox=function(e){this.boundingBox=e},t.prototype.getBoundingBox=function(){return this.boundingBox},t.prototype.setDetectionResultColumn=function(e,r){this.detectionResultColumns[e]=r},t.prototype.getDetectionResultColumn=function(e){return this.detectionResultColumns[e]},t.prototype.toString=function(){var e=this.detectionResultColumns[0];e==null&&(e=this.detectionResultColumns[this.barcodeColumnCount+1]);for(var r=new H6,n=0;n<e.getCodewords().length;n++){r.format("CW %3d:",n);for(var a=0;a<this.barcodeColumnCount+2;a++){if(this.detectionResultColumns[a]==null){r.format("    |   ");continue}var s=this.detectionResultColumns[a].getCodewords()[n];if(s==null){r.format("    |   ");continue}r.format(" %3d|%3d",s.getRowNumber(),s.getValue())}r.format("%n")}return r.toString()},t}(),sje=function(){function t(e,r,n,a){this.rowNumber=t.BARCODE_ROW_UNKNOWN,this.startX=Math.trunc(e),this.endX=Math.trunc(r),this.bucket=Math.trunc(n),this.value=Math.trunc(a)}return t.prototype.hasValidRowNumber=function(){return this.isValidRowNumber(this.rowNumber)},t.prototype.isValidRowNumber=function(e){return e!==t.BARCODE_ROW_UNKNOWN&&this.bucket===e%3*3},t.prototype.setRowNumberAsRowIndicatorColumn=function(){this.rowNumber=Math.trunc(Math.trunc(this.value/30)*3+Math.trunc(this.bucket/3))},t.prototype.getWidth=function(){return this.endX-this.startX},t.prototype.getStartX=function(){return this.startX},t.prototype.getEndX=function(){return this.endX},t.prototype.getBucket=function(){return this.bucket},t.prototype.getValue=function(){return this.value},t.prototype.getRowNumber=function(){return this.rowNumber},t.prototype.setRowNumber=function(e){this.rowNumber=e},t.prototype.toString=function(){return this.rowNumber+"|"+this.value},t.BARCODE_ROW_UNKNOWN=-1,t}(),ije=function(){function t(){}return t.initialize=function(){for(var e=0;e<qn.SYMBOL_TABLE.length;e++)for(var r=qn.SYMBOL_TABLE[e],n=r&1,a=0;a<qn.BARS_IN_MODULE;a++){for(var s=0;(r&1)===n;)s+=1,r>>=1;n=r&1,t.RATIOS_TABLE[e]||(t.RATIOS_TABLE[e]=new Array(qn.BARS_IN_MODULE)),t.RATIOS_TABLE[e][qn.BARS_IN_MODULE-a-1]=Math.fround(s/qn.MODULES_IN_CODEWORD)}this.bSymbolTableReady=!0},t.getDecodedValue=function(e){var r=t.getDecodedCodewordValue(t.sampleBitCounts(e));return r!==-1?r:t.getClosestDecodedValue(e)},t.sampleBitCounts=function(e){for(var r=Zn.sum(e),n=new Int32Array(qn.BARS_IN_MODULE),a=0,s=0,i=0;i<qn.MODULES_IN_CODEWORD;i++){var l=r/(2*qn.MODULES_IN_CODEWORD)+i*r/qn.MODULES_IN_CODEWORD;s+e[a]<=l&&(s+=e[a],a++),n[a]++}return n},t.getDecodedCodewordValue=function(e){var r=t.getBitValue(e);return qn.getCodeword(r)===-1?-1:r},t.getBitValue=function(e){for(var r=0,n=0;n<e.length;n++)for(var a=0;a<e[n];a++)r=r<<1|(n%2===0?1:0);return Math.trunc(r)},t.getClosestDecodedValue=function(e){var r=Zn.sum(e),n=new Array(qn.BARS_IN_MODULE);if(r>1)for(var a=0;a<n.length;a++)n[a]=Math.fround(e[a]/r);var s=JT.MAX_VALUE,i=-1;this.bSymbolTableReady||t.initialize();for(var l=0;l<t.RATIOS_TABLE.length;l++){for(var c=0,u=t.RATIOS_TABLE[l],d=0;d<qn.BARS_IN_MODULE;d++){var f=Math.fround(u[d]-n[d]);if(c+=Math.fround(f*f),c>=s)break}c<s&&(s=c,i=qn.SYMBOL_TABLE[l])}return i},t.bSymbolTableReady=!1,t.RATIOS_TABLE=new Array(qn.SYMBOL_TABLE.length).map(function(e){return new Array(qn.BARS_IN_MODULE)}),t}(),oje=function(){function t(){this.segmentCount=-1,this.fileSize=-1,this.timestamp=-1,this.checksum=-1}return t.prototype.getSegmentIndex=function(){return this.segmentIndex},t.prototype.setSegmentIndex=function(e){this.segmentIndex=e},t.prototype.getFileId=function(){return this.fileId},t.prototype.setFileId=function(e){this.fileId=e},t.prototype.getOptionalData=function(){return this.optionalData},t.prototype.setOptionalData=function(e){this.optionalData=e},t.prototype.isLastSegment=function(){return this.lastSegment},t.prototype.setLastSegment=function(e){this.lastSegment=e},t.prototype.getSegmentCount=function(){return this.segmentCount},t.prototype.setSegmentCount=function(e){this.segmentCount=e},t.prototype.getSender=function(){return this.sender||null},t.prototype.setSender=function(e){this.sender=e},t.prototype.getAddressee=function(){return this.addressee||null},t.prototype.setAddressee=function(e){this.addressee=e},t.prototype.getFileName=function(){return this.fileName},t.prototype.setFileName=function(e){this.fileName=e},t.prototype.getFileSize=function(){return this.fileSize},t.prototype.setFileSize=function(e){this.fileSize=e},t.prototype.getChecksum=function(){return this.checksum},t.prototype.setChecksum=function(e){this.checksum=e},t.prototype.getTimestamp=function(){return this.timestamp},t.prototype.setTimestamp=function(e){this.timestamp=e},t}(),yV=function(){function t(){}return t.parseLong=function(e,r){return r===void 0&&(r=void 0),parseInt(e,r)},t}(),lje=function(){var t=function(e,r){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,a){n.__proto__=a}||function(n,a){for(var s in a)a.hasOwnProperty(s)&&(n[s]=a[s])},t(e,r)};return function(e,r){t(e,r);function n(){this.constructor=e}e.prototype=r===null?Object.create(r):(n.prototype=r.prototype,new n)}}(),cje=function(t){lje(e,t);function e(){return t!==null&&t.apply(this,arguments)||this}return e.kind="NullPointerException",e}(vc),uje=function(){function t(){}return t.prototype.writeBytes=function(e){this.writeBytesOffset(e,0,e.length)},t.prototype.writeBytesOffset=function(e,r,n){if(e==null)throw new cje;if(r<0||r>e.length||n<0||r+n>e.length||r+n<0)throw new L6;if(n===0)return;for(var a=0;a<n;a++)this.write(e[r+a])},t.prototype.flush=function(){},t.prototype.close=function(){},t}(),dje=function(){var t=function(e,r){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,a){n.__proto__=a}||function(n,a){for(var s in a)a.hasOwnProperty(s)&&(n[s]=a[s])},t(e,r)};return function(e,r){t(e,r);function n(){this.constructor=e}e.prototype=r===null?Object.create(r):(n.prototype=r.prototype,new n)}}(),fje=function(t){dje(e,t);function e(){return t!==null&&t.apply(this,arguments)||this}return e}(vc),Aje=function(){var t=function(e,r){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,a){n.__proto__=a}||function(n,a){for(var s in a)a.hasOwnProperty(s)&&(n[s]=a[s])},t(e,r)};return function(e,r){t(e,r);function n(){this.constructor=e}e.prototype=r===null?Object.create(r):(n.prototype=r.prototype,new n)}}(),hje=function(t){Aje(e,t);function e(r){r===void 0&&(r=32);var n=t.call(this)||this;if(n.count=0,r<0)throw new en("Negative initial size: "+r);return n.buf=new Uint8Array(r),n}return e.prototype.ensureCapacity=function(r){r-this.buf.length>0&&this.grow(r)},e.prototype.grow=function(r){var n=this.buf.length,a=n<<1;if(a-r<0&&(a=r),a<0){if(r<0)throw new fje;a=Bn.MAX_VALUE}this.buf=Ui.copyOfUint8Array(this.buf,a)},e.prototype.write=function(r){this.ensureCapacity(this.count+1),this.buf[this.count]=r,this.count+=1},e.prototype.writeBytesOffset=function(r,n,a){if(n<0||n>r.length||a<0||n+a-r.length>0)throw new L6;this.ensureCapacity(this.count+a),Ka.arraycopy(r,n,this.buf,this.count,a),this.count+=a},e.prototype.writeTo=function(r){r.writeBytesOffset(this.buf,0,this.count)},e.prototype.reset=function(){this.count=0},e.prototype.toByteArray=function(){return Ui.copyOfUint8Array(this.buf,this.count)},e.prototype.size=function(){return this.count},e.prototype.toString=function(r){return r?typeof r=="string"?this.toString_string(r):this.toString_number(r):this.toString_void()},e.prototype.toString_void=function(){return new String(this.buf).toString()},e.prototype.toString_string=function(r){return new String(this.buf).toString()},e.prototype.toString_number=function(r){return new String(this.buf).toString()},e.prototype.close=function(){},e}(uje),Ia;(function(t){t[t.ALPHA=0]="ALPHA",t[t.LOWER=1]="LOWER",t[t.MIXED=2]="MIXED",t[t.PUNCT=3]="PUNCT",t[t.ALPHA_SHIFT=4]="ALPHA_SHIFT",t[t.PUNCT_SHIFT=5]="PUNCT_SHIFT"})(Ia||(Ia={}));function Cte(){if(typeof window<"u")return window.BigInt||null;if(typeof global<"u")return global.BigInt||null;if(typeof self<"u")return self.BigInt||null;throw new Error("Can't search globals for BigInt!")}var vC;function zh(t){if(typeof vC>"u"&&(vC=Cte()),vC===null)throw new Error("BigInt is not supported!");return vC(t)}function mje(){var t=[];t[0]=zh(1);var e=zh(900);t[1]=e;for(var r=2;r<16;r++)t[r]=t[r-1]*e;return t}var pje=function(){function t(){}return t.decode=function(e,r){var n=new _n(""),a=Li.ISO8859_1;n.enableDecoding(a);for(var s=1,i=e[s++],l=new oje;s<e[0];){switch(i){case t.TEXT_COMPACTION_MODE_LATCH:s=t.textCompaction(e,s,n);break;case t.BYTE_COMPACTION_MODE_LATCH:case t.BYTE_COMPACTION_MODE_LATCH_6:s=t.byteCompaction(i,e,a,s,n);break;case t.MODE_SHIFT_TO_BYTE_COMPACTION_MODE:n.append(e[s++]);break;case t.NUMERIC_COMPACTION_MODE_LATCH:s=t.numericCompaction(e,s,n);break;case t.ECI_CHARSET:Li.getCharacterSetECIByValue(e[s++]);break;case t.ECI_GENERAL_PURPOSE:s+=2;break;case t.ECI_USER_DEFINED:s++;break;case t.BEGIN_MACRO_PDF417_CONTROL_BLOCK:s=t.decodeMacroBlock(e,s,l);break;case t.BEGIN_MACRO_PDF417_OPTIONAL_FIELD:case t.MACRO_PDF417_TERMINATOR:throw new Nr;default:s--,s=t.textCompaction(e,s,n);break}if(s<e.length)i=e[s++];else throw Nr.getFormatInstance()}if(n.length()===0)throw Nr.getFormatInstance();var c=new N4(null,n.toString(),null,r);return c.setOther(l),c},t.decodeMacroBlock=function(e,r,n){if(r+t.NUMBER_OF_SEQUENCE_CODEWORDS>e[0])throw Nr.getFormatInstance();for(var a=new Int32Array(t.NUMBER_OF_SEQUENCE_CODEWORDS),s=0;s<t.NUMBER_OF_SEQUENCE_CODEWORDS;s++,r++)a[s]=e[r];n.setSegmentIndex(Bn.parseInt(t.decodeBase900toBase10(a,t.NUMBER_OF_SEQUENCE_CODEWORDS)));var i=new _n;r=t.textCompaction(e,r,i),n.setFileId(i.toString());var l=-1;for(e[r]===t.BEGIN_MACRO_PDF417_OPTIONAL_FIELD&&(l=r+1);r<e[0];)switch(e[r]){case t.BEGIN_MACRO_PDF417_OPTIONAL_FIELD:switch(r++,e[r]){case t.MACRO_PDF417_OPTIONAL_FIELD_FILE_NAME:var c=new _n;r=t.textCompaction(e,r+1,c),n.setFileName(c.toString());break;case t.MACRO_PDF417_OPTIONAL_FIELD_SENDER:var u=new _n;r=t.textCompaction(e,r+1,u),n.setSender(u.toString());break;case t.MACRO_PDF417_OPTIONAL_FIELD_ADDRESSEE:var d=new _n;r=t.textCompaction(e,r+1,d),n.setAddressee(d.toString());break;case t.MACRO_PDF417_OPTIONAL_FIELD_SEGMENT_COUNT:var f=new _n;r=t.numericCompaction(e,r+1,f),n.setSegmentCount(Bn.parseInt(f.toString()));break;case t.MACRO_PDF417_OPTIONAL_FIELD_TIME_STAMP:var h=new _n;r=t.numericCompaction(e,r+1,h),n.setTimestamp(yV.parseLong(h.toString()));break;case t.MACRO_PDF417_OPTIONAL_FIELD_CHECKSUM:var A=new _n;r=t.numericCompaction(e,r+1,A),n.setChecksum(Bn.parseInt(A.toString()));break;case t.MACRO_PDF417_OPTIONAL_FIELD_FILE_SIZE:var m=new _n;r=t.numericCompaction(e,r+1,m),n.setFileSize(yV.parseLong(m.toString()));break;default:throw Nr.getFormatInstance()}break;case t.MACRO_PDF417_TERMINATOR:r++,n.setLastSegment(!0);break;default:throw Nr.getFormatInstance()}if(l!==-1){var p=r-l;n.isLastSegment()&&p--,n.setOptionalData(Ui.copyOfRange(e,l,l+p))}return r},t.textCompaction=function(e,r,n){for(var a=new Int32Array((e[0]-r)*2),s=new Int32Array((e[0]-r)*2),i=0,l=!1;r<e[0]&&!l;){var c=e[r++];if(c<t.TEXT_COMPACTION_MODE_LATCH)a[i]=c/30,a[i+1]=c%30,i+=2;else switch(c){case t.TEXT_COMPACTION_MODE_LATCH:a[i++]=t.TEXT_COMPACTION_MODE_LATCH;break;case t.BYTE_COMPACTION_MODE_LATCH:case t.BYTE_COMPACTION_MODE_LATCH_6:case t.NUMERIC_COMPACTION_MODE_LATCH:case t.BEGIN_MACRO_PDF417_CONTROL_BLOCK:case t.BEGIN_MACRO_PDF417_OPTIONAL_FIELD:case t.MACRO_PDF417_TERMINATOR:r--,l=!0;break;case t.MODE_SHIFT_TO_BYTE_COMPACTION_MODE:a[i]=t.MODE_SHIFT_TO_BYTE_COMPACTION_MODE,c=e[r++],s[i]=c,i++;break}}return t.decodeTextCompaction(a,s,i,n),r},t.decodeTextCompaction=function(e,r,n,a){for(var s=Ia.ALPHA,i=Ia.ALPHA,l=0;l<n;){var c=e[l],u="";switch(s){case Ia.ALPHA:if(c<26)u=String.fromCharCode(65+c);else switch(c){case 26:u=" ";break;case t.LL:s=Ia.LOWER;break;case t.ML:s=Ia.MIXED;break;case t.PS:i=s,s=Ia.PUNCT_SHIFT;break;case t.MODE_SHIFT_TO_BYTE_COMPACTION_MODE:a.append(r[l]);break;case t.TEXT_COMPACTION_MODE_LATCH:s=Ia.ALPHA;break}break;case Ia.LOWER:if(c<26)u=String.fromCharCode(97+c);else switch(c){case 26:u=" ";break;case t.AS:i=s,s=Ia.ALPHA_SHIFT;break;case t.ML:s=Ia.MIXED;break;case t.PS:i=s,s=Ia.PUNCT_SHIFT;break;case t.MODE_SHIFT_TO_BYTE_COMPACTION_MODE:a.append(r[l]);break;case t.TEXT_COMPACTION_MODE_LATCH:s=Ia.ALPHA;break}break;case Ia.MIXED:if(c<t.PL)u=t.MIXED_CHARS[c];else switch(c){case t.PL:s=Ia.PUNCT;break;case 26:u=" ";break;case t.LL:s=Ia.LOWER;break;case t.AL:s=Ia.ALPHA;break;case t.PS:i=s,s=Ia.PUNCT_SHIFT;break;case t.MODE_SHIFT_TO_BYTE_COMPACTION_MODE:a.append(r[l]);break;case t.TEXT_COMPACTION_MODE_LATCH:s=Ia.ALPHA;break}break;case Ia.PUNCT:if(c<t.PAL)u=t.PUNCT_CHARS[c];else switch(c){case t.PAL:s=Ia.ALPHA;break;case t.MODE_SHIFT_TO_BYTE_COMPACTION_MODE:a.append(r[l]);break;case t.TEXT_COMPACTION_MODE_LATCH:s=Ia.ALPHA;break}break;case Ia.ALPHA_SHIFT:if(s=i,c<26)u=String.fromCharCode(65+c);else switch(c){case 26:u=" ";break;case t.TEXT_COMPACTION_MODE_LATCH:s=Ia.ALPHA;break}break;case Ia.PUNCT_SHIFT:if(s=i,c<t.PAL)u=t.PUNCT_CHARS[c];else switch(c){case t.PAL:s=Ia.ALPHA;break;case t.MODE_SHIFT_TO_BYTE_COMPACTION_MODE:a.append(r[l]);break;case t.TEXT_COMPACTION_MODE_LATCH:s=Ia.ALPHA;break}break}u!==""&&a.append(u),l++}},t.byteCompaction=function(e,r,n,a,s){var i=new hje,l=0,c=0,u=!1;switch(e){case t.BYTE_COMPACTION_MODE_LATCH:for(var d=new Int32Array(6),f=r[a++];a<r[0]&&!u;)switch(d[l++]=f,c=900*c+f,f=r[a++],f){case t.TEXT_COMPACTION_MODE_LATCH:case t.BYTE_COMPACTION_MODE_LATCH:case t.NUMERIC_COMPACTION_MODE_LATCH:case t.BYTE_COMPACTION_MODE_LATCH_6:case t.BEGIN_MACRO_PDF417_CONTROL_BLOCK:case t.BEGIN_MACRO_PDF417_OPTIONAL_FIELD:case t.MACRO_PDF417_TERMINATOR:a--,u=!0;break;default:if(l%5===0&&l>0){for(var h=0;h<6;++h)i.write(Number(zh(c)>>zh(8*(5-h))));c=0,l=0}break}a===r[0]&&f<t.TEXT_COMPACTION_MODE_LATCH&&(d[l++]=f);for(var A=0;A<l;A++)i.write(d[A]);break;case t.BYTE_COMPACTION_MODE_LATCH_6:for(;a<r[0]&&!u;){var m=r[a++];if(m<t.TEXT_COMPACTION_MODE_LATCH)l++,c=900*c+m;else switch(m){case t.TEXT_COMPACTION_MODE_LATCH:case t.BYTE_COMPACTION_MODE_LATCH:case t.NUMERIC_COMPACTION_MODE_LATCH:case t.BYTE_COMPACTION_MODE_LATCH_6:case t.BEGIN_MACRO_PDF417_CONTROL_BLOCK:case t.BEGIN_MACRO_PDF417_OPTIONAL_FIELD:case t.MACRO_PDF417_TERMINATOR:a--,u=!0;break}if(l%5===0&&l>0){for(var h=0;h<6;++h)i.write(Number(zh(c)>>zh(8*(5-h))));c=0,l=0}}break}return s.append(Vu.decode(i.toByteArray(),n)),a},t.numericCompaction=function(e,r,n){for(var a=0,s=!1,i=new Int32Array(t.MAX_NUMERIC_CODEWORDS);r<e[0]&&!s;){var l=e[r++];if(r===e[0]&&(s=!0),l<t.TEXT_COMPACTION_MODE_LATCH)i[a]=l,a++;else switch(l){case t.TEXT_COMPACTION_MODE_LATCH:case t.BYTE_COMPACTION_MODE_LATCH:case t.BYTE_COMPACTION_MODE_LATCH_6:case t.BEGIN_MACRO_PDF417_CONTROL_BLOCK:case t.BEGIN_MACRO_PDF417_OPTIONAL_FIELD:case t.MACRO_PDF417_TERMINATOR:r--,s=!0;break}(a%t.MAX_NUMERIC_CODEWORDS===0||l===t.NUMERIC_COMPACTION_MODE_LATCH||s)&&a>0&&(n.append(t.decodeBase900toBase10(i,a)),a=0)}return r},t.decodeBase900toBase10=function(e,r){for(var n=zh(0),a=0;a<r;a++)n+=t.EXP900[r-a-1]*zh(e[a]);var s=n.toString();if(s.charAt(0)!=="1")throw new Nr;return s.substring(1)},t.TEXT_COMPACTION_MODE_LATCH=900,t.BYTE_COMPACTION_MODE_LATCH=901,t.NUMERIC_COMPACTION_MODE_LATCH=902,t.BYTE_COMPACTION_MODE_LATCH_6=924,t.ECI_USER_DEFINED=925,t.ECI_GENERAL_PURPOSE=926,t.ECI_CHARSET=927,t.BEGIN_MACRO_PDF417_CONTROL_BLOCK=928,t.BEGIN_MACRO_PDF417_OPTIONAL_FIELD=923,t.MACRO_PDF417_TERMINATOR=922,t.MODE_SHIFT_TO_BYTE_COMPACTION_MODE=913,t.MAX_NUMERIC_CODEWORDS=15,t.MACRO_PDF417_OPTIONAL_FIELD_FILE_NAME=0,t.MACRO_PDF417_OPTIONAL_FIELD_SEGMENT_COUNT=1,t.MACRO_PDF417_OPTIONAL_FIELD_TIME_STAMP=2,t.MACRO_PDF417_OPTIONAL_FIELD_SENDER=3,t.MACRO_PDF417_OPTIONAL_FIELD_ADDRESSEE=4,t.MACRO_PDF417_OPTIONAL_FIELD_FILE_SIZE=5,t.MACRO_PDF417_OPTIONAL_FIELD_CHECKSUM=6,t.PL=25,t.LL=27,t.AS=27,t.ML=28,t.AL=28,t.PS=29,t.PAL=29,t.PUNCT_CHARS=`;<>@[\\]_\`~!\r	,:
-.$/"|*()?{}'`,t.MIXED_CHARS="0123456789&\r	,:#-.$/+%*=^",t.EXP900=Cte()?mje():[],t.NUMBER_OF_SEQUENCE_CODEWORDS=2,t}(),H1=function(t){var e=typeof Symbol=="function"&&Symbol.iterator,r=e&&t[e],n=0;if(r)return r.call(t);if(t&&typeof t.length=="number")return{next:function(){return t&&n>=t.length&&(t=void 0),{value:t&&t[n++],done:!t}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")},gje=function(){function t(){}return t.decode=function(e,r,n,a,s,i,l){for(var c=new tk(e,r,n,a,s),u=null,d=null,f,h=!0;;h=!1){if(r!=null&&(u=t.getRowIndicatorColumn(e,c,r,!0,i,l)),a!=null&&(d=t.getRowIndicatorColumn(e,c,a,!1,i,l)),f=t.merge(u,d),f==null)throw Wt.getNotFoundInstance();var A=f.getBoundingBox();if(h&&A!=null&&(A.getMinY()<c.getMinY()||A.getMaxY()>c.getMaxY()))c=A;else break}f.setBoundingBox(c);var m=f.getBarcodeColumnCount()+1;f.setDetectionResultColumn(0,u),f.setDetectionResultColumn(m,d);for(var p=u!=null,g=1;g<=m;g++){var x=p?g:m-g;if(f.getDetectionResultColumn(x)===void 0){var y=void 0;x===0||x===m?y=new vV(c,x===0):y=new Nte(c),f.setDetectionResultColumn(x,y);for(var b=-1,w=b,j=c.getMinY();j<=c.getMaxY();j++){if(b=t.getStartColumn(f,x,j,p),b<0||b>c.getMaxX()){if(w===-1)continue;b=w}var I=t.detectCodeword(e,c.getMinX(),c.getMaxX(),p,b,j,i,l);I!=null&&(y.setCodeword(j,I),w=b,i=Math.min(i,I.getWidth()),l=Math.max(l,I.getWidth()))}}}return t.createDecoderResult(f)},t.merge=function(e,r){if(e==null&&r==null)return null;var n=t.getBarcodeMetadata(e,r);if(n==null)return null;var a=tk.merge(t.adjustBoundingBox(e),t.adjustBoundingBox(r));return new aje(n,a)},t.adjustBoundingBox=function(e){var r,n;if(e==null)return null;var a=e.getRowHeights();if(a==null)return null;var s=t.getMax(a),i=0;try{for(var l=H1(a),c=l.next();!c.done;c=l.next()){var u=c.value;if(i+=s-u,u>0)break}}catch(A){r={error:A}}finally{try{c&&!c.done&&(n=l.return)&&n.call(l)}finally{if(r)throw r.error}}for(var d=e.getCodewords(),f=0;i>0&&d[f]==null;f++)i--;for(var h=0,f=a.length-1;f>=0&&(h+=s-a[f],!(a[f]>0));f--);for(var f=d.length-1;h>0&&d[f]==null;f--)h--;return e.getBoundingBox().addMissingRows(i,h,e.isLeft())},t.getMax=function(e){var r,n,a=-1;try{for(var s=H1(e),i=s.next();!i.done;i=s.next()){var l=i.value;a=Math.max(a,l)}}catch(c){r={error:c}}finally{try{i&&!i.done&&(n=s.return)&&n.call(s)}finally{if(r)throw r.error}}return a},t.getBarcodeMetadata=function(e,r){var n;if(e==null||(n=e.getBarcodeMetadata())==null)return r==null?null:r.getBarcodeMetadata();var a;return r==null||(a=r.getBarcodeMetadata())==null?n:n.getColumnCount()!==a.getColumnCount()&&n.getErrorCorrectionLevel()!==a.getErrorCorrectionLevel()&&n.getRowCount()!==a.getRowCount()?null:n},t.getRowIndicatorColumn=function(e,r,n,a,s,i){for(var l=new vV(r,a),c=0;c<2;c++)for(var u=c===0?1:-1,d=Math.trunc(Math.trunc(n.getX())),f=Math.trunc(Math.trunc(n.getY()));f<=r.getMaxY()&&f>=r.getMinY();f+=u){var h=t.detectCodeword(e,0,e.getWidth(),a,d,f,s,i);h!=null&&(l.setCodeword(f,h),a?d=h.getStartX():d=h.getEndX())}return l},t.adjustCodewordCount=function(e,r){var n=r[0][1],a=n.getValue(),s=e.getBarcodeColumnCount()*e.getBarcodeRowCount()-t.getNumberOfECCodeWords(e.getBarcodeECLevel());if(a.length===0){if(s<1||s>qn.MAX_CODEWORDS_IN_BARCODE)throw Wt.getNotFoundInstance();n.setValue(s)}else a[0]!==s&&n.setValue(s)},t.createDecoderResult=function(e){var r=t.createBarcodeMatrix(e);t.adjustCodewordCount(e,r);for(var n=new Array,a=new Int32Array(e.getBarcodeRowCount()*e.getBarcodeColumnCount()),s=[],i=new Array,l=0;l<e.getBarcodeRowCount();l++)for(var c=0;c<e.getBarcodeColumnCount();c++){var u=r[l][c+1].getValue(),d=l*e.getBarcodeColumnCount()+c;u.length===0?n.push(d):u.length===1?a[d]=u[0]:(i.push(d),s.push(u))}for(var f=new Array(s.length),h=0;h<f.length;h++)f[h]=s[h];return t.createDecoderResultFromAmbiguousValues(e.getBarcodeECLevel(),a,qn.toIntArray(n),qn.toIntArray(i),f)},t.createDecoderResultFromAmbiguousValues=function(e,r,n,a,s){for(var i=new Int32Array(a.length),l=100;l-- >0;){for(var c=0;c<i.length;c++)r[a[c]]=s[c][i[c]];try{return t.decodeCodewords(r,e,n)}catch(d){var u=d instanceof bi;if(!u)throw d}if(i.length===0)throw bi.getChecksumInstance();for(var c=0;c<i.length;c++)if(i[c]<s[c].length-1){i[c]++;break}else if(i[c]=0,c===i.length-1)throw bi.getChecksumInstance()}throw bi.getChecksumInstance()},t.createBarcodeMatrix=function(e){for(var r,n,a,s,i=Array.from({length:e.getBarcodeRowCount()},function(){return new Array(e.getBarcodeColumnCount()+2)}),l=0;l<i.length;l++)for(var c=0;c<i[l].length;c++)i[l][c]=new vy;var u=0;try{for(var d=H1(e.getDetectionResultColumns()),f=d.next();!f.done;f=d.next()){var h=f.value;if(h!=null)try{for(var A=(a=void 0,H1(h.getCodewords())),m=A.next();!m.done;m=A.next()){var p=m.value;if(p!=null){var g=p.getRowNumber();if(g>=0){if(g>=i.length)continue;i[g][u].setValue(p.getValue())}}}}catch(x){a={error:x}}finally{try{m&&!m.done&&(s=A.return)&&s.call(A)}finally{if(a)throw a.error}}u++}}catch(x){r={error:x}}finally{try{f&&!f.done&&(n=d.return)&&n.call(d)}finally{if(r)throw r.error}}return i},t.isValidBarcodeColumn=function(e,r){return r>=0&&r<=e.getBarcodeColumnCount()+1},t.getStartColumn=function(e,r,n,a){var s,i,l=a?1:-1,c=null;if(t.isValidBarcodeColumn(e,r-l)&&(c=e.getDetectionResultColumn(r-l).getCodeword(n)),c!=null)return a?c.getEndX():c.getStartX();if(c=e.getDetectionResultColumn(r).getCodewordNearby(n),c!=null)return a?c.getStartX():c.getEndX();if(t.isValidBarcodeColumn(e,r-l)&&(c=e.getDetectionResultColumn(r-l).getCodewordNearby(n)),c!=null)return a?c.getEndX():c.getStartX();for(var u=0;t.isValidBarcodeColumn(e,r-l);){r-=l;try{for(var d=(s=void 0,H1(e.getDetectionResultColumn(r).getCodewords())),f=d.next();!f.done;f=d.next()){var h=f.value;if(h!=null)return(a?h.getEndX():h.getStartX())+l*u*(h.getEndX()-h.getStartX())}}catch(A){s={error:A}}finally{try{f&&!f.done&&(i=d.return)&&i.call(d)}finally{if(s)throw s.error}}u++}return a?e.getBoundingBox().getMinX():e.getBoundingBox().getMaxX()},t.detectCodeword=function(e,r,n,a,s,i,l,c){s=t.adjustCodewordStartColumn(e,r,n,a,s,i);var u=t.getModuleBitCount(e,r,n,a,s,i);if(u==null)return null;var d,f=Zn.sum(u);if(a)d=s+f;else{for(var h=0;h<u.length/2;h++){var A=u[h];u[h]=u[u.length-1-h],u[u.length-1-h]=A}d=s,s=d-f}if(!t.checkCodewordSkew(f,l,c))return null;var m=ije.getDecodedValue(u),p=qn.getCodeword(m);return p===-1?null:new sje(s,d,t.getCodewordBucketNumber(m),p)},t.getModuleBitCount=function(e,r,n,a,s,i){for(var l=s,c=new Int32Array(8),u=0,d=a?1:-1,f=a;(a?l<n:l>=r)&&u<c.length;)e.get(l,i)===f?(c[u]++,l+=d):(u++,f=!f);return u===c.length||l===(a?n:r)&&u===c.length-1?c:null},t.getNumberOfECCodeWords=function(e){return 2<<e},t.adjustCodewordStartColumn=function(e,r,n,a,s,i){for(var l=s,c=a?-1:1,u=0;u<2;u++){for(;(a?l>=r:l<n)&&a===e.get(l,i);){if(Math.abs(s-l)>t.CODEWORD_SKEW_SIZE)return s;l+=c}c=-c,a=!a}return l},t.checkCodewordSkew=function(e,r,n){return r-t.CODEWORD_SKEW_SIZE<=e&&e<=n+t.CODEWORD_SKEW_SIZE},t.decodeCodewords=function(e,r,n){if(e.length===0)throw Nr.getFormatInstance();var a=1<<r+1,s=t.correctErrors(e,n,a);t.verifyCodewordCount(e,a);var i=pje.decode(e,""+r);return i.setErrorsCorrected(s),i.setErasures(n.length),i},t.correctErrors=function(e,r,n){if(r!=null&&r.length>n/2+t.MAX_ERRORS||n<0||n>t.MAX_EC_CODEWORDS)throw bi.getChecksumInstance();return t.errorCorrection.decode(e,n,r)},t.verifyCodewordCount=function(e,r){if(e.length<4)throw Nr.getFormatInstance();var n=e[0];if(n>e.length)throw Nr.getFormatInstance();if(n===0)if(r<e.length)e[0]=e.length-r;else throw Nr.getFormatInstance()},t.getBitCountForCodeword=function(e){for(var r=new Int32Array(8),n=0,a=r.length-1;!((e&1)!==n&&(n=e&1,a--,a<0));)r[a]++,e>>=1;return r},t.getCodewordBucketNumber=function(e){return e instanceof Int32Array?this.getCodewordBucketNumber_Int32Array(e):this.getCodewordBucketNumber_number(e)},t.getCodewordBucketNumber_number=function(e){return t.getCodewordBucketNumber(t.getBitCountForCodeword(e))},t.getCodewordBucketNumber_Int32Array=function(e){return(e[0]-e[2]+e[4]-e[6]+9)%9},t.toString=function(e){for(var r=new H6,n=0;n<e.length;n++){r.format("Row %2d: ",n);for(var a=0;a<e[n].length;a++){var s=e[n][a];s.getValue().length===0?r.format("        ",null):r.format("%4d(%2d)",s.getValue()[0],s.getConfidence(s.getValue()[0]))}r.format("%n")}return r.toString()},t.CODEWORD_SKEW_SIZE=2,t.MAX_ERRORS=3,t.MAX_EC_CODEWORDS=512,t.errorCorrection=new Y3e,t}(),xje=function(t){var e=typeof Symbol=="function"&&Symbol.iterator,r=e&&t[e],n=0;if(r)return r.call(t);if(t&&typeof t.length=="number")return{next:function(){return t&&n>=t.length&&(t=void 0),{value:t&&t[n++],done:!t}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")},oS=function(){function t(){}return t.prototype.decode=function(e,r){r===void 0&&(r=null);var n=t.decode(e,r,!1);if(n==null||n.length===0||n[0]==null)throw Wt.getNotFoundInstance();return n[0]},t.prototype.decodeMultiple=function(e,r){r===void 0&&(r=null);try{return t.decode(e,r,!0)}catch(n){throw n instanceof Nr||n instanceof bi?Wt.getNotFoundInstance():n}},t.decode=function(e,r,n){var a,s,i=new Array,l=K3e.detectMultiple(e,r,n);try{for(var c=xje(l.getPoints()),u=c.next();!u.done;u=c.next()){var d=u.value,f=gje.decode(l.getBits(),d[4],d[5],d[6],d[7],t.getMinCodewordWidth(d),t.getMaxCodewordWidth(d)),h=new bl(f.getText(),f.getRawBytes(),void 0,d,Zr.PDF_417);h.putMetadata($o.ERROR_CORRECTION_LEVEL,f.getECLevel());var A=f.getOther();A!=null&&h.putMetadata($o.PDF417_EXTRA_METADATA,A),i.push(h)}}catch(m){a={error:m}}finally{try{u&&!u.done&&(s=c.return)&&s.call(c)}finally{if(a)throw a.error}}return i.map(function(m){return m})},t.getMaxWidth=function(e,r){return e==null||r==null?0:Math.trunc(Math.abs(e.getX()-r.getX()))},t.getMinWidth=function(e,r){return e==null||r==null?Bn.MAX_VALUE:Math.trunc(Math.abs(e.getX()-r.getX()))},t.getMaxCodewordWidth=function(e){return Math.floor(Math.max(Math.max(t.getMaxWidth(e[0],e[4]),t.getMaxWidth(e[6],e[2])*qn.MODULES_IN_CODEWORD/qn.MODULES_IN_STOP_PATTERN),Math.max(t.getMaxWidth(e[1],e[5]),t.getMaxWidth(e[7],e[3])*qn.MODULES_IN_CODEWORD/qn.MODULES_IN_STOP_PATTERN)))},t.getMinCodewordWidth=function(e){return Math.floor(Math.min(Math.min(t.getMinWidth(e[0],e[4]),t.getMinWidth(e[6],e[2])*qn.MODULES_IN_CODEWORD/qn.MODULES_IN_STOP_PATTERN),Math.min(t.getMinWidth(e[1],e[5]),t.getMinWidth(e[7],e[3])*qn.MODULES_IN_CODEWORD/qn.MODULES_IN_STOP_PATTERN)))},t.prototype.reset=function(){},t}(),vje=function(){var t=function(e,r){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,a){n.__proto__=a}||function(n,a){for(var s in a)a.hasOwnProperty(s)&&(n[s]=a[s])},t(e,r)};return function(e,r){t(e,r);function n(){this.constructor=e}e.prototype=r===null?Object.create(r):(n.prototype=r.prototype,new n)}}(),bV=function(t){vje(e,t);function e(){return t!==null&&t.apply(this,arguments)||this}return e.kind="ReaderException",e}(vc),wV=function(t){var e=typeof Symbol=="function"&&Symbol.iterator,r=e&&t[e],n=0;if(r)return r.call(t);if(t&&typeof t.length=="number")return{next:function(){return t&&n>=t.length&&(t=void 0),{value:t&&t[n++],done:!t}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")},_te=function(){function t(){}return t.prototype.decode=function(e,r){return this.setHints(r),this.decodeInternal(e)},t.prototype.decodeWithState=function(e){return(this.readers===null||this.readers===void 0)&&this.setHints(null),this.decodeInternal(e)},t.prototype.setHints=function(e){this.hints=e;var r=e!=null&&e.get(Ga.TRY_HARDER)!==void 0,n=e==null?null:e.get(Ga.POSSIBLE_FORMATS),a=new Array;if(n!=null){var s=n.some(function(i){return i===Zr.UPC_A||i===Zr.UPC_E||i===Zr.EAN_13||i===Zr.EAN_8||i===Zr.CODABAR||i===Zr.CODE_39||i===Zr.CODE_93||i===Zr.CODE_128||i===Zr.ITF||i===Zr.RSS_14||i===Zr.RSS_EXPANDED});s&&!r&&a.push(new wx(e)),n.includes(Zr.QR_CODE)&&a.push(new iS),n.includes(Zr.DATA_MATRIX)&&a.push(new sS),n.includes(Zr.AZTEC)&&a.push(new nS),n.includes(Zr.PDF_417)&&a.push(new oS),s&&r&&a.push(new wx(e))}a.length===0&&(r||a.push(new wx(e)),a.push(new iS),a.push(new sS),a.push(new nS),a.push(new oS),r&&a.push(new wx(e))),this.readers=a},t.prototype.reset=function(){var e,r;if(this.readers!==null)try{for(var n=wV(this.readers),a=n.next();!a.done;a=n.next()){var s=a.value;s.reset()}}catch(i){e={error:i}}finally{try{a&&!a.done&&(r=n.return)&&r.call(n)}finally{if(e)throw e.error}}},t.prototype.decodeInternal=function(e){var r,n;if(this.readers===null)throw new bV("No readers where selected, nothing can be read.");try{for(var a=wV(this.readers),s=a.next();!s.done;s=a.next()){var i=s.value;try{return i.decode(e,this.hints)}catch(l){if(l instanceof bV)continue}}}catch(l){r={error:l}}finally{try{s&&!s.done&&(n=a.return)&&n.call(a)}finally{if(r)throw r.error}}throw new Wt("No MultiFormat Readers were able to detect the code.")},t}(),yje=function(){var t=function(e,r){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,a){n.__proto__=a}||function(n,a){for(var s in a)a.hasOwnProperty(s)&&(n[s]=a[s])},t(e,r)};return function(e,r){t(e,r);function n(){this.constructor=e}e.prototype=r===null?Object.create(r):(n.prototype=r.prototype,new n)}}();(function(t){yje(e,t);function e(r,n){r===void 0&&(r=null),n===void 0&&(n=500);var a=this,s=new _te;return s.setHints(r),a=t.call(this,s,n)||this,a}return e.prototype.decodeBitmap=function(r){return this.reader.decodeWithState(r)},e})(Lv);var bje=function(){var t=function(e,r){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,a){n.__proto__=a}||function(n,a){for(var s in a)a.hasOwnProperty(s)&&(n[s]=a[s])},t(e,r)};return function(e,r){t(e,r);function n(){this.constructor=e}e.prototype=r===null?Object.create(r):(n.prototype=r.prototype,new n)}}();(function(t){bje(e,t);function e(r){return r===void 0&&(r=500),t.call(this,new oS,r)||this}return e})(Lv);var wje=function(){var t=function(e,r){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,a){n.__proto__=a}||function(n,a){for(var s in a)a.hasOwnProperty(s)&&(n[s]=a[s])},t(e,r)};return function(e,r){t(e,r);function n(){this.constructor=e}e.prototype=r===null?Object.create(r):(n.prototype=r.prototype,new n)}}();(function(t){wje(e,t);function e(r){return r===void 0&&(r=500),t.call(this,new iS,r)||this}return e})(Lv);var rk;(function(t){t[t.ERROR_CORRECTION=0]="ERROR_CORRECTION",t[t.CHARACTER_SET=1]="CHARACTER_SET",t[t.DATA_MATRIX_SHAPE=2]="DATA_MATRIX_SHAPE",t[t.DATA_MATRIX_COMPACT=3]="DATA_MATRIX_COMPACT",t[t.MIN_SIZE=4]="MIN_SIZE",t[t.MAX_SIZE=5]="MAX_SIZE",t[t.MARGIN=6]="MARGIN",t[t.PDF417_COMPACT=7]="PDF417_COMPACT",t[t.PDF417_COMPACTION=8]="PDF417_COMPACTION",t[t.PDF417_DIMENSIONS=9]="PDF417_DIMENSIONS",t[t.AZTEC_LAYERS=10]="AZTEC_LAYERS",t[t.QR_VERSION=11]="QR_VERSION",t[t.GS1_FORMAT=12]="GS1_FORMAT",t[t.FORCE_C40=13]="FORCE_C40"})(rk||(rk={}));const yC=rk;var Ete=function(){function t(e){this.field=e,this.cachedGenerators=[],this.cachedGenerators.push(new T0(e,Int32Array.from([1])))}return t.prototype.buildGenerator=function(e){var r=this.cachedGenerators;if(e>=r.length)for(var n=r[r.length-1],a=this.field,s=r.length;s<=e;s++){var i=n.multiply(new T0(a,Int32Array.from([1,a.exp(s-1+a.getGeneratorBase())])));r.push(i),n=i}return r[e]},t.prototype.encode=function(e,r){if(r===0)throw new en("No error correction bytes");var n=e.length-r;if(n<=0)throw new en("No data bytes provided");var a=this.buildGenerator(r),s=new Int32Array(n);Ka.arraycopy(e,0,s,0,n);var i=new T0(this.field,s);i=i.multiplyByMonomial(r,1);for(var l=i.divide(a)[1],c=l.getCoefficients(),u=r-c.length,d=0;d<u;d++)e[n+d]=0;Ka.arraycopy(c,0,e,n+u,c.length)},t}(),yy=function(){function t(){}return t.applyMaskPenaltyRule1=function(e){return t.applyMaskPenaltyRule1Internal(e,!0)+t.applyMaskPenaltyRule1Internal(e,!1)},t.applyMaskPenaltyRule2=function(e){for(var r=0,n=e.getArray(),a=e.getWidth(),s=e.getHeight(),i=0;i<s-1;i++)for(var l=n[i],c=0;c<a-1;c++){var u=l[c];u===l[c+1]&&u===n[i+1][c]&&u===n[i+1][c+1]&&r++}return t.N2*r},t.applyMaskPenaltyRule3=function(e){for(var r=0,n=e.getArray(),a=e.getWidth(),s=e.getHeight(),i=0;i<s;i++)for(var l=0;l<a;l++){var c=n[i];l+6<a&&c[l]===1&&c[l+1]===0&&c[l+2]===1&&c[l+3]===1&&c[l+4]===1&&c[l+5]===0&&c[l+6]===1&&(t.isWhiteHorizontal(c,l-4,l)||t.isWhiteHorizontal(c,l+7,l+11))&&r++,i+6<s&&n[i][l]===1&&n[i+1][l]===0&&n[i+2][l]===1&&n[i+3][l]===1&&n[i+4][l]===1&&n[i+5][l]===0&&n[i+6][l]===1&&(t.isWhiteVertical(n,l,i-4,i)||t.isWhiteVertical(n,l,i+7,i+11))&&r++}return r*t.N3},t.isWhiteHorizontal=function(e,r,n){r=Math.max(r,0),n=Math.min(n,e.length);for(var a=r;a<n;a++)if(e[a]===1)return!1;return!0},t.isWhiteVertical=function(e,r,n,a){n=Math.max(n,0),a=Math.min(a,e.length);for(var s=n;s<a;s++)if(e[s][r]===1)return!1;return!0},t.applyMaskPenaltyRule4=function(e){for(var r=0,n=e.getArray(),a=e.getWidth(),s=e.getHeight(),i=0;i<s;i++)for(var l=n[i],c=0;c<a;c++)l[c]===1&&r++;var u=e.getHeight()*e.getWidth(),d=Math.floor(Math.abs(r*2-u)*10/u);return d*t.N4},t.getDataMaskBit=function(e,r,n){var a,s;switch(e){case 0:a=n+r&1;break;case 1:a=n&1;break;case 2:a=r%3;break;case 3:a=(n+r)%3;break;case 4:a=Math.floor(n/2)+Math.floor(r/3)&1;break;case 5:s=n*r,a=(s&1)+s%3;break;case 6:s=n*r,a=(s&1)+s%3&1;break;case 7:s=n*r,a=s%3+(n+r&1)&1;break;default:throw new en("Invalid mask pattern: "+e)}return a===0},t.applyMaskPenaltyRule1Internal=function(e,r){for(var n=0,a=r?e.getHeight():e.getWidth(),s=r?e.getWidth():e.getHeight(),i=e.getArray(),l=0;l<a;l++){for(var c=0,u=-1,d=0;d<s;d++){var f=r?i[l][d]:i[d][l];f===u?c++:(c>=5&&(n+=t.N1+(c-5)),c=1,u=f)}c>=5&&(n+=t.N1+(c-5))}return n},t.N1=3,t.N2=3,t.N3=40,t.N4=10,t}(),Nje=function(t){var e=typeof Symbol=="function"&&Symbol.iterator,r=e&&t[e],n=0;if(r)return r.call(t);if(t&&typeof t.length=="number")return{next:function(){return t&&n>=t.length&&(t=void 0),{value:t&&t[n++],done:!t}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")},Cje=function(){function t(e,r){this.width=e,this.height=r;for(var n=new Array(r),a=0;a!==r;a++)n[a]=new Uint8Array(e);this.bytes=n}return t.prototype.getHeight=function(){return this.height},t.prototype.getWidth=function(){return this.width},t.prototype.get=function(e,r){return this.bytes[r][e]},t.prototype.getArray=function(){return this.bytes},t.prototype.setNumber=function(e,r,n){this.bytes[r][e]=n},t.prototype.setBoolean=function(e,r,n){this.bytes[r][e]=n?1:0},t.prototype.clear=function(e){var r,n;try{for(var a=Nje(this.bytes),s=a.next();!s.done;s=a.next()){var i=s.value;Ui.fill(i,e)}}catch(l){r={error:l}}finally{try{s&&!s.done&&(n=a.return)&&n.call(a)}finally{if(r)throw r.error}}},t.prototype.equals=function(e){if(!(e instanceof t))return!1;var r=e;if(this.width!==r.width||this.height!==r.height)return!1;for(var n=0,a=this.height;n<a;++n)for(var s=this.bytes[n],i=r.bytes[n],l=0,c=this.width;l<c;++l)if(s[l]!==i[l])return!1;return!0},t.prototype.toString=function(){for(var e=new _n,r=0,n=this.height;r<n;++r){for(var a=this.bytes[r],s=0,i=this.width;s<i;++s)switch(a[s]){case 0:e.append(" 0");break;case 1:e.append(" 1");break;default:e.append("  ");break}e.append(`
`)}return e.toString()},t}(),nk=function(){function t(){this.maskPattern=-1}return t.prototype.getMode=function(){return this.mode},t.prototype.getECLevel=function(){return this.ecLevel},t.prototype.getVersion=function(){return this.version},t.prototype.getMaskPattern=function(){return this.maskPattern},t.prototype.getMatrix=function(){return this.matrix},t.prototype.toString=function(){var e=new _n;return e.append(`<<
`),e.append(" mode: "),e.append(this.mode?this.mode.toString():"null"),e.append(`
 ecLevel: `),e.append(this.ecLevel?this.ecLevel.toString():"null"),e.append(`
 version: `),e.append(this.version?this.version.toString():"null"),e.append(`
 maskPattern: `),e.append(this.maskPattern.toString()),this.matrix?(e.append(`
 matrix:
`),e.append(this.matrix.toString())):e.append(`
 matrix: null
`),e.append(`>>
`),e.toString()},t.prototype.setMode=function(e){this.mode=e},t.prototype.setECLevel=function(e){this.ecLevel=e},t.prototype.setVersion=function(e){this.version=e},t.prototype.setMaskPattern=function(e){this.maskPattern=e},t.prototype.setMatrix=function(e){this.matrix=e},t.isValidMaskPattern=function(e){return e>=0&&e<t.NUM_MASK_PATTERNS},t.NUM_MASK_PATTERNS=8,t}(),_je=function(){var t=function(e,r){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,a){n.__proto__=a}||function(n,a){for(var s in a)a.hasOwnProperty(s)&&(n[s]=a[s])},t(e,r)};return function(e,r){t(e,r);function n(){this.constructor=e}e.prototype=r===null?Object.create(r):(n.prototype=r.prototype,new n)}}(),Xa=function(t){_je(e,t);function e(){return t!==null&&t.apply(this,arguments)||this}return e.kind="WriterException",e}(vc),NV=function(){function t(){}return t.clearMatrix=function(e){e.clear(255)},t.buildMatrix=function(e,r,n,a,s){t.clearMatrix(s),t.embedBasicPatterns(n,s),t.embedTypeInfo(r,a,s),t.maybeEmbedVersionInfo(n,s),t.embedDataBits(e,a,s)},t.embedBasicPatterns=function(e,r){t.embedPositionDetectionPatternsAndSeparators(r),t.embedDarkDotAtLeftBottomCorner(r),t.maybeEmbedPositionAdjustmentPatterns(e,r),t.embedTimingPatterns(r)},t.embedTypeInfo=function(e,r,n){var a=new Ao;t.makeTypeInfoBits(e,r,a);for(var s=0,i=a.getSize();s<i;++s){var l=a.get(a.getSize()-1-s),c=t.TYPE_INFO_COORDINATES[s],u=c[0],d=c[1];if(n.setBoolean(u,d,l),s<8){var f=n.getWidth()-s-1,h=8;n.setBoolean(f,h,l)}else{var f=8,h=n.getHeight()-7+(s-8);n.setBoolean(f,h,l)}}},t.maybeEmbedVersionInfo=function(e,r){if(!(e.getVersionNumber()<7)){var n=new Ao;t.makeVersionInfoBits(e,n);for(var a=6*3-1,s=0;s<6;++s)for(var i=0;i<3;++i){var l=n.get(a);a--,r.setBoolean(s,r.getHeight()-11+i,l),r.setBoolean(r.getHeight()-11+i,s,l)}}},t.embedDataBits=function(e,r,n){for(var a=0,s=-1,i=n.getWidth()-1,l=n.getHeight()-1;i>0;){for(i===6&&(i-=1);l>=0&&l<n.getHeight();){for(var c=0;c<2;++c){var u=i-c;if(t.isEmpty(n.get(u,l))){var d=void 0;a<e.getSize()?(d=e.get(a),++a):d=!1,r!==255&&yy.getDataMaskBit(r,u,l)&&(d=!d),n.setBoolean(u,l,d)}}l+=s}s=-s,l+=s,i-=2}if(a!==e.getSize())throw new Xa("Not all bits consumed: "+a+"/"+e.getSize())},t.findMSBSet=function(e){return 32-Bn.numberOfLeadingZeros(e)},t.calculateBCHCode=function(e,r){if(r===0)throw new en("0 polynomial");var n=t.findMSBSet(r);for(e<<=n-1;t.findMSBSet(e)>=n;)e^=r<<t.findMSBSet(e)-n;return e},t.makeTypeInfoBits=function(e,r,n){if(!nk.isValidMaskPattern(r))throw new Xa("Invalid mask pattern");var a=e.getBits()<<3|r;n.appendBits(a,5);var s=t.calculateBCHCode(a,t.TYPE_INFO_POLY);n.appendBits(s,10);var i=new Ao;if(i.appendBits(t.TYPE_INFO_MASK_PATTERN,15),n.xor(i),n.getSize()!==15)throw new Xa("should not happen but we got: "+n.getSize())},t.makeVersionInfoBits=function(e,r){r.appendBits(e.getVersionNumber(),6);var n=t.calculateBCHCode(e.getVersionNumber(),t.VERSION_INFO_POLY);if(r.appendBits(n,12),r.getSize()!==18)throw new Xa("should not happen but we got: "+r.getSize())},t.isEmpty=function(e){return e===255},t.embedTimingPatterns=function(e){for(var r=8;r<e.getWidth()-8;++r){var n=(r+1)%2;t.isEmpty(e.get(r,6))&&e.setNumber(r,6,n),t.isEmpty(e.get(6,r))&&e.setNumber(6,r,n)}},t.embedDarkDotAtLeftBottomCorner=function(e){if(e.get(8,e.getHeight()-8)===0)throw new Xa;e.setNumber(8,e.getHeight()-8,1)},t.embedHorizontalSeparationPattern=function(e,r,n){for(var a=0;a<8;++a){if(!t.isEmpty(n.get(e+a,r)))throw new Xa;n.setNumber(e+a,r,0)}},t.embedVerticalSeparationPattern=function(e,r,n){for(var a=0;a<7;++a){if(!t.isEmpty(n.get(e,r+a)))throw new Xa;n.setNumber(e,r+a,0)}},t.embedPositionAdjustmentPattern=function(e,r,n){for(var a=0;a<5;++a)for(var s=t.POSITION_ADJUSTMENT_PATTERN[a],i=0;i<5;++i)n.setNumber(e+i,r+a,s[i])},t.embedPositionDetectionPattern=function(e,r,n){for(var a=0;a<7;++a)for(var s=t.POSITION_DETECTION_PATTERN[a],i=0;i<7;++i)n.setNumber(e+i,r+a,s[i])},t.embedPositionDetectionPatternsAndSeparators=function(e){var r=t.POSITION_DETECTION_PATTERN[0].length;t.embedPositionDetectionPattern(0,0,e),t.embedPositionDetectionPattern(e.getWidth()-r,0,e),t.embedPositionDetectionPattern(0,e.getWidth()-r,e);var n=8;t.embedHorizontalSeparationPattern(0,n-1,e),t.embedHorizontalSeparationPattern(e.getWidth()-n,n-1,e),t.embedHorizontalSeparationPattern(0,e.getWidth()-n,e);var a=7;t.embedVerticalSeparationPattern(a,0,e),t.embedVerticalSeparationPattern(e.getHeight()-a-1,0,e),t.embedVerticalSeparationPattern(a,e.getHeight()-a,e)},t.maybeEmbedPositionAdjustmentPatterns=function(e,r){if(!(e.getVersionNumber()<2))for(var n=e.getVersionNumber()-1,a=t.POSITION_ADJUSTMENT_PATTERN_COORDINATE_TABLE[n],s=0,i=a.length;s!==i;s++){var l=a[s];if(l>=0)for(var c=0;c!==i;c++){var u=a[c];u>=0&&t.isEmpty(r.get(u,l))&&t.embedPositionAdjustmentPattern(u-2,l-2,r)}}},t.POSITION_DETECTION_PATTERN=Array.from([Int32Array.from([1,1,1,1,1,1,1]),Int32Array.from([1,0,0,0,0,0,1]),Int32Array.from([1,0,1,1,1,0,1]),Int32Array.from([1,0,1,1,1,0,1]),Int32Array.from([1,0,1,1,1,0,1]),Int32Array.from([1,0,0,0,0,0,1]),Int32Array.from([1,1,1,1,1,1,1])]),t.POSITION_ADJUSTMENT_PATTERN=Array.from([Int32Array.from([1,1,1,1,1]),Int32Array.from([1,0,0,0,1]),Int32Array.from([1,0,1,0,1]),Int32Array.from([1,0,0,0,1]),Int32Array.from([1,1,1,1,1])]),t.POSITION_ADJUSTMENT_PATTERN_COORDINATE_TABLE=Array.from([Int32Array.from([-1,-1,-1,-1,-1,-1,-1]),Int32Array.from([6,18,-1,-1,-1,-1,-1]),Int32Array.from([6,22,-1,-1,-1,-1,-1]),Int32Array.from([6,26,-1,-1,-1,-1,-1]),Int32Array.from([6,30,-1,-1,-1,-1,-1]),Int32Array.from([6,34,-1,-1,-1,-1,-1]),Int32Array.from([6,22,38,-1,-1,-1,-1]),Int32Array.from([6,24,42,-1,-1,-1,-1]),Int32Array.from([6,26,46,-1,-1,-1,-1]),Int32Array.from([6,28,50,-1,-1,-1,-1]),Int32Array.from([6,30,54,-1,-1,-1,-1]),Int32Array.from([6,32,58,-1,-1,-1,-1]),Int32Array.from([6,34,62,-1,-1,-1,-1]),Int32Array.from([6,26,46,66,-1,-1,-1]),Int32Array.from([6,26,48,70,-1,-1,-1]),Int32Array.from([6,26,50,74,-1,-1,-1]),Int32Array.from([6,30,54,78,-1,-1,-1]),Int32Array.from([6,30,56,82,-1,-1,-1]),Int32Array.from([6,30,58,86,-1,-1,-1]),Int32Array.from([6,34,62,90,-1,-1,-1]),Int32Array.from([6,28,50,72,94,-1,-1]),Int32Array.from([6,26,50,74,98,-1,-1]),Int32Array.from([6,30,54,78,102,-1,-1]),Int32Array.from([6,28,54,80,106,-1,-1]),Int32Array.from([6,32,58,84,110,-1,-1]),Int32Array.from([6,30,58,86,114,-1,-1]),Int32Array.from([6,34,62,90,118,-1,-1]),Int32Array.from([6,26,50,74,98,122,-1]),Int32Array.from([6,30,54,78,102,126,-1]),Int32Array.from([6,26,52,78,104,130,-1]),Int32Array.from([6,30,56,82,108,134,-1]),Int32Array.from([6,34,60,86,112,138,-1]),Int32Array.from([6,30,58,86,114,142,-1]),Int32Array.from([6,34,62,90,118,146,-1]),Int32Array.from([6,30,54,78,102,126,150]),Int32Array.from([6,24,50,76,102,128,154]),Int32Array.from([6,28,54,80,106,132,158]),Int32Array.from([6,32,58,84,110,136,162]),Int32Array.from([6,26,54,82,110,138,166]),Int32Array.from([6,30,58,86,114,142,170])]),t.TYPE_INFO_COORDINATES=Array.from([Int32Array.from([8,0]),Int32Array.from([8,1]),Int32Array.from([8,2]),Int32Array.from([8,3]),Int32Array.from([8,4]),Int32Array.from([8,5]),Int32Array.from([8,7]),Int32Array.from([8,8]),Int32Array.from([7,8]),Int32Array.from([5,8]),Int32Array.from([4,8]),Int32Array.from([3,8]),Int32Array.from([2,8]),Int32Array.from([1,8]),Int32Array.from([0,8])]),t.VERSION_INFO_POLY=7973,t.TYPE_INFO_POLY=1335,t.TYPE_INFO_MASK_PATTERN=21522,t}(),Eje=function(){function t(e,r){this.dataBytes=e,this.errorCorrectionBytes=r}return t.prototype.getDataBytes=function(){return this.dataBytes},t.prototype.getErrorCorrectionBytes=function(){return this.errorCorrectionBytes},t}(),CV=function(t){var e=typeof Symbol=="function"&&Symbol.iterator,r=e&&t[e],n=0;if(r)return r.call(t);if(t&&typeof t.length=="number")return{next:function(){return t&&n>=t.length&&(t=void 0),{value:t&&t[n++],done:!t}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")};(function(){function t(){}return t.calculateMaskPenalty=function(e){return yy.applyMaskPenaltyRule1(e)+yy.applyMaskPenaltyRule2(e)+yy.applyMaskPenaltyRule3(e)+yy.applyMaskPenaltyRule4(e)},t.encode=function(e,r,n){n===void 0&&(n=null);var a=t.DEFAULT_BYTE_MODE_ENCODING,s=n!==null&&n.get(yC.CHARACTER_SET)!==void 0;s&&(a=n.get(yC.CHARACTER_SET).toString());var i=this.chooseMode(e,a),l=new Ao;if(i===Ja.BYTE&&(s||t.DEFAULT_BYTE_MODE_ENCODING!==a)){var c=Li.getCharacterSetECIByName(a);c!==void 0&&this.appendECI(c,l)}this.appendModeInfo(i,l);var u=new Ao;this.appendBytes(e,i,u,a);var d;if(n!==null&&n.get(yC.QR_VERSION)!==void 0){var f=Number.parseInt(n.get(yC.QR_VERSION).toString(),10);d=lp.getVersionForNumber(f);var h=this.calculateBitsNeeded(i,l,u,d);if(!this.willFit(h,d,r))throw new Xa("Data too big for requested version")}else d=this.recommendVersion(r,i,l,u);var A=new Ao;A.appendBitArray(l);var m=i===Ja.BYTE?u.getSizeInBytes():e.length;this.appendLengthInfo(m,d,i,A),A.appendBitArray(u);var p=d.getECBlocksForLevel(r),g=d.getTotalCodewords()-p.getTotalECCodewords();this.terminateBits(g,A);var x=this.interleaveWithECBytes(A,d.getTotalCodewords(),g,p.getNumBlocks()),y=new nk;y.setECLevel(r),y.setMode(i),y.setVersion(d);var b=d.getDimensionForVersion(),w=new Cje(b,b),j=this.chooseMaskPattern(x,r,d,w);return y.setMaskPattern(j),NV.buildMatrix(x,r,d,j,w),y.setMatrix(w),y},t.recommendVersion=function(e,r,n,a){var s=this.calculateBitsNeeded(r,n,a,lp.getVersionForNumber(1)),i=this.chooseVersion(s,e),l=this.calculateBitsNeeded(r,n,a,i);return this.chooseVersion(l,e)},t.calculateBitsNeeded=function(e,r,n,a){return r.getSize()+e.getCharacterCountBits(a)+n.getSize()},t.getAlphanumericCode=function(e){return e<t.ALPHANUMERIC_TABLE.length?t.ALPHANUMERIC_TABLE[e]:-1},t.chooseMode=function(e,r){if(r===void 0&&(r=null),Li.SJIS.getName()===r&&this.isOnlyDoubleByteKanji(e))return Ja.KANJI;for(var n=!1,a=!1,s=0,i=e.length;s<i;++s){var l=e.charAt(s);if(t.isDigit(l))n=!0;else if(this.getAlphanumericCode(l.charCodeAt(0))!==-1)a=!0;else return Ja.BYTE}return a?Ja.ALPHANUMERIC:n?Ja.NUMERIC:Ja.BYTE},t.isOnlyDoubleByteKanji=function(e){var r;try{r=Vu.encode(e,Li.SJIS)}catch{return!1}var n=r.length;if(n%2!==0)return!1;for(var a=0;a<n;a+=2){var s=r[a]&255;if((s<129||s>159)&&(s<224||s>235))return!1}return!0},t.chooseMaskPattern=function(e,r,n,a){for(var s=Number.MAX_SAFE_INTEGER,i=-1,l=0;l<nk.NUM_MASK_PATTERNS;l++){NV.buildMatrix(e,r,n,l,a);var c=this.calculateMaskPenalty(a);c<s&&(s=c,i=l)}return i},t.chooseVersion=function(e,r){for(var n=1;n<=40;n++){var a=lp.getVersionForNumber(n);if(t.willFit(e,a,r))return a}throw new Xa("Data too big")},t.willFit=function(e,r,n){var a=r.getTotalCodewords(),s=r.getECBlocksForLevel(n),i=s.getTotalECCodewords(),l=a-i,c=(e+7)/8;return l>=c},t.terminateBits=function(e,r){var n=e*8;if(r.getSize()>n)throw new Xa("data bits cannot fit in the QR Code"+r.getSize()+" > "+n);for(var a=0;a<4&&r.getSize()<n;++a)r.appendBit(!1);var s=r.getSize()&7;if(s>0)for(var a=s;a<8;a++)r.appendBit(!1);for(var i=e-r.getSizeInBytes(),a=0;a<i;++a)r.appendBits(a&1?17:236,8);if(r.getSize()!==n)throw new Xa("Bits size does not equal capacity")},t.getNumDataBytesAndNumECBytesForBlockID=function(e,r,n,a,s,i){if(a>=n)throw new Xa("Block ID too large");var l=e%n,c=n-l,u=Math.floor(e/n),d=u+1,f=Math.floor(r/n),h=f+1,A=u-f,m=d-h;if(A!==m)throw new Xa("EC bytes mismatch");if(n!==c+l)throw new Xa("RS blocks mismatch");if(e!==(f+A)*c+(h+m)*l)throw new Xa("Total bytes mismatch");a<c?(s[0]=f,i[0]=A):(s[0]=h,i[0]=m)},t.interleaveWithECBytes=function(e,r,n,a){var s,i,l,c;if(e.getSizeInBytes()!==n)throw new Xa("Number of bits and data bytes does not match");for(var u=0,d=0,f=0,h=new Array,A=0;A<a;++A){var m=new Int32Array(1),p=new Int32Array(1);t.getNumDataBytesAndNumECBytesForBlockID(r,n,a,A,m,p);var g=m[0],x=new Uint8Array(g);e.toBytes(8*u,x,0,g);var y=t.generateECBytes(x,p[0]);h.push(new Eje(x,y)),d=Math.max(d,g),f=Math.max(f,y.length),u+=m[0]}if(n!==u)throw new Xa("Data bytes does not match offset");for(var b=new Ao,A=0;A<d;++A)try{for(var w=(s=void 0,CV(h)),j=w.next();!j.done;j=w.next()){var I=j.value,x=I.getDataBytes();A<x.length&&b.appendBits(x[A],8)}}catch(k){s={error:k}}finally{try{j&&!j.done&&(i=w.return)&&i.call(w)}finally{if(s)throw s.error}}for(var A=0;A<f;++A)try{for(var _=(l=void 0,CV(h)),E=_.next();!E.done;E=_.next()){var I=E.value,y=I.getErrorCorrectionBytes();A<y.length&&b.appendBits(y[A],8)}}catch(k){l={error:k}}finally{try{E&&!E.done&&(c=_.return)&&c.call(_)}finally{if(l)throw l.error}}if(r!==b.getSizeInBytes())throw new Xa("Interleaving error: "+r+" and "+b.getSizeInBytes()+" differ.");return b},t.generateECBytes=function(e,r){for(var n=e.length,a=new Int32Array(n+r),s=0;s<n;s++)a[s]=e[s]&255;new Ete(oc.QR_CODE_FIELD_256).encode(a,r);for(var i=new Uint8Array(r),s=0;s<r;s++)i[s]=a[n+s];return i},t.appendModeInfo=function(e,r){r.appendBits(e.getBits(),4)},t.appendLengthInfo=function(e,r,n,a){var s=n.getCharacterCountBits(r);if(e>=1<<s)throw new Xa(e+" is bigger than "+((1<<s)-1));a.appendBits(e,s)},t.appendBytes=function(e,r,n,a){switch(r){case Ja.NUMERIC:t.appendNumericBytes(e,n);break;case Ja.ALPHANUMERIC:t.appendAlphanumericBytes(e,n);break;case Ja.BYTE:t.append8BitBytes(e,n,a);break;case Ja.KANJI:t.appendKanjiBytes(e,n);break;default:throw new Xa("Invalid mode: "+r)}},t.getDigit=function(e){return e.charCodeAt(0)-48},t.isDigit=function(e){var r=t.getDigit(e);return r>=0&&r<=9},t.appendNumericBytes=function(e,r){for(var n=e.length,a=0;a<n;){var s=t.getDigit(e.charAt(a));if(a+2<n){var i=t.getDigit(e.charAt(a+1)),l=t.getDigit(e.charAt(a+2));r.appendBits(s*100+i*10+l,10),a+=3}else if(a+1<n){var i=t.getDigit(e.charAt(a+1));r.appendBits(s*10+i,7),a+=2}else r.appendBits(s,4),a++}},t.appendAlphanumericBytes=function(e,r){for(var n=e.length,a=0;a<n;){var s=t.getAlphanumericCode(e.charCodeAt(a));if(s===-1)throw new Xa;if(a+1<n){var i=t.getAlphanumericCode(e.charCodeAt(a+1));if(i===-1)throw new Xa;r.appendBits(s*45+i,11),a+=2}else r.appendBits(s,6),a++}},t.append8BitBytes=function(e,r,n){var a;try{a=Vu.encode(e,n)}catch(c){throw new Xa(c)}for(var s=0,i=a.length;s!==i;s++){var l=a[s];r.appendBits(l,8)}},t.appendKanjiBytes=function(e,r){var n;try{n=Vu.encode(e,Li.SJIS)}catch(f){throw new Xa(f)}for(var a=n.length,s=0;s<a;s+=2){var i=n[s]&255,l=n[s+1]&255,c=i<<8&4294967295|l,u=-1;if(c>=33088&&c<=40956?u=c-33088:c>=57408&&c<=60351&&(u=c-49472),u===-1)throw new Xa("Invalid byte sequence");var d=(u>>8)*192+(u&255);r.appendBits(d,13)}},t.appendECI=function(e,r){r.appendBits(Ja.ECI.getBits(),4),r.appendBits(e.getValue(),8)},t.ALPHANUMERIC_TABLE=Int32Array.from([-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,36,-1,-1,-1,37,38,-1,-1,-1,-1,39,40,-1,41,42,43,0,1,2,3,4,5,6,7,8,9,44,-1,-1,-1,-1,-1,-1,10,11,12,13,14,15,16,17,18,19,20,21,22,23,24,25,26,27,28,29,30,31,32,33,34,35,-1,-1,-1,-1,-1]),t.DEFAULT_BYTE_MODE_ENCODING=Li.UTF8.getName(),t})();var Sje=function(){var t=function(e,r){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,a){n.__proto__=a}||function(n,a){for(var s in a)a.hasOwnProperty(s)&&(n[s]=a[s])},t(e,r)};return function(e,r){t(e,r);function n(){this.constructor=e}e.prototype=r===null?Object.create(r):(n.prototype=r.prototype,new n)}}();(function(t){Sje(e,t);function e(r,n,a,s,i,l,c,u){var d=t.call(this,l,c)||this;if(d.yuvData=r,d.dataWidth=n,d.dataHeight=a,d.left=s,d.top=i,s+l>n||i+c>a)throw new en("Crop rectangle does not fit within image data.");return u&&d.reverseHorizontal(l,c),d}return e.prototype.getRow=function(r,n){if(r<0||r>=this.getHeight())throw new en("Requested row is outside the image: "+r);var a=this.getWidth();(n==null||n.length<a)&&(n=new Uint8ClampedArray(a));var s=(r+this.top)*this.dataWidth+this.left;return Ka.arraycopy(this.yuvData,s,n,0,a),n},e.prototype.getMatrix=function(){var r=this.getWidth(),n=this.getHeight();if(r===this.dataWidth&&n===this.dataHeight)return this.yuvData;var a=r*n,s=new Uint8ClampedArray(a),i=this.top*this.dataWidth+this.left;if(r===this.dataWidth)return Ka.arraycopy(this.yuvData,i,s,0,a),s;for(var l=0;l<n;l++){var c=l*r;Ka.arraycopy(this.yuvData,i,s,c,r),i+=this.dataWidth}return s},e.prototype.isCropSupported=function(){return!0},e.prototype.crop=function(r,n,a,s){return new e(this.yuvData,this.dataWidth,this.dataHeight,this.left+r,this.top+n,a,s,!1)},e.prototype.renderThumbnail=function(){for(var r=this.getWidth()/e.THUMBNAIL_SCALE_FACTOR,n=this.getHeight()/e.THUMBNAIL_SCALE_FACTOR,a=new Int32Array(r*n),s=this.yuvData,i=this.top*this.dataWidth+this.left,l=0;l<n;l++){for(var c=l*r,u=0;u<r;u++){var d=s[i+u*e.THUMBNAIL_SCALE_FACTOR]&255;a[c+u]=4278190080|d*65793}i+=this.dataWidth*e.THUMBNAIL_SCALE_FACTOR}return a},e.prototype.getThumbnailWidth=function(){return this.getWidth()/e.THUMBNAIL_SCALE_FACTOR},e.prototype.getThumbnailHeight=function(){return this.getHeight()/e.THUMBNAIL_SCALE_FACTOR},e.prototype.reverseHorizontal=function(r,n){for(var a=this.yuvData,s=0,i=this.top*this.dataWidth+this.left;s<n;s++,i+=this.dataWidth)for(var l=i+r/2,c=i,u=i+r-1;c<l;c++,u--){var d=a[c];a[c]=a[u],a[u]=d}},e.prototype.invert=function(){return new w4(this)},e.THUMBNAIL_SCALE_FACTOR=2,e})(sw);var Ije=function(){var t=function(e,r){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,a){n.__proto__=a}||function(n,a){for(var s in a)a.hasOwnProperty(s)&&(n[s]=a[s])},t(e,r)};return function(e,r){t(e,r);function n(){this.constructor=e}e.prototype=r===null?Object.create(r):(n.prototype=r.prototype,new n)}}();(function(t){Ije(e,t);function e(r,n,a,s,i,l,c){var u=t.call(this,n,a)||this;if(u.dataWidth=s,u.dataHeight=i,u.left=l,u.top=c,r.BYTES_PER_ELEMENT===4){for(var d=n*a,f=new Uint8ClampedArray(d),h=0;h<d;h++){var A=r[h],m=A>>16&255,p=A>>7&510,g=A&255;f[h]=(m+p+g)/4&255}u.luminances=f}else u.luminances=r;if(s===void 0&&(u.dataWidth=n),i===void 0&&(u.dataHeight=a),l===void 0&&(u.left=0),c===void 0&&(u.top=0),u.left+n>u.dataWidth||u.top+a>u.dataHeight)throw new en("Crop rectangle does not fit within image data.");return u}return e.prototype.getRow=function(r,n){if(r<0||r>=this.getHeight())throw new en("Requested row is outside the image: "+r);var a=this.getWidth();(n==null||n.length<a)&&(n=new Uint8ClampedArray(a));var s=(r+this.top)*this.dataWidth+this.left;return Ka.arraycopy(this.luminances,s,n,0,a),n},e.prototype.getMatrix=function(){var r=this.getWidth(),n=this.getHeight();if(r===this.dataWidth&&n===this.dataHeight)return this.luminances;var a=r*n,s=new Uint8ClampedArray(a),i=this.top*this.dataWidth+this.left;if(r===this.dataWidth)return Ka.arraycopy(this.luminances,i,s,0,a),s;for(var l=0;l<n;l++){var c=l*r;Ka.arraycopy(this.luminances,i,s,c,r),i+=this.dataWidth}return s},e.prototype.isCropSupported=function(){return!0},e.prototype.crop=function(r,n,a,s){return new e(this.luminances,a,s,this.dataWidth,this.dataHeight,this.left+r,this.top+n)},e.prototype.invert=function(){return new w4(this)},e})(sw);var jje=function(){var t=function(e,r){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,a){n.__proto__=a}||function(n,a){for(var s in a)a.hasOwnProperty(s)&&(n[s]=a[s])},t(e,r)};return function(e,r){t(e,r);function n(){this.constructor=e}e.prototype=r===null?Object.create(r):(n.prototype=r.prototype,new n)}}(),Bje=function(t){jje(e,t);function e(){return t!==null&&t.apply(this,arguments)||this}return e.forName=function(r){return this.getCharacterSetECIByName(r)},e}(Li),Pje=function(){function t(){}return t.ISO_8859_1=Li.ISO8859_1,t}(),ak,Tje=301,kje=function(t,e){for(var r=1,n=0;n<255;n++)e[n]=r,t[r]=n,r*=2,r>=256&&(r^=Tje);return{LOG:t,ALOG:e}};ak=kje([],[]),ak.LOG;ak.ALOG;var _V;(function(t){t[t.FORCE_NONE=0]="FORCE_NONE",t[t.FORCE_SQUARE=1]="FORCE_SQUARE",t[t.FORCE_RECTANGLE=2]="FORCE_RECTANGLE"})(_V||(_V={}));var EV=129,Ste=230,Fje=231,Oje=235,Dje=236,Rje=237,Mje=238,Lje=239,Uje=240,V5=254,Qje=254,SV="[)>05",IV="[)>06",jV="",ga=0,Po=1,Pl=2,Pi=3,io=4,ol=5,Vje=function(){function t(){}return t.prototype.getEncodingMode=function(){return ga},t.prototype.encode=function(e){var r=vd.determineConsecutiveDigitCount(e.getMessage(),e.pos);if(r>=2)e.writeCodeword(this.encodeASCIIDigits(e.getMessage().charCodeAt(e.pos),e.getMessage().charCodeAt(e.pos+1))),e.pos+=2;else{var n=e.getCurrentChar(),a=vd.lookAheadTest(e.getMessage(),e.pos,this.getEncodingMode());if(a!==this.getEncodingMode())switch(a){case ol:e.writeCodeword(Fje),e.signalEncoderChange(ol);return;case Po:e.writeCodeword(Ste),e.signalEncoderChange(Po);return;case Pi:e.writeCodeword(Mje),e.signalEncoderChange(Pi);break;case Pl:e.writeCodeword(Lje),e.signalEncoderChange(Pl);break;case io:e.writeCodeword(Uje),e.signalEncoderChange(io);break;default:throw new Error("Illegal mode: "+a)}else vd.isExtendedASCII(n)?(e.writeCodeword(Oje),e.writeCodeword(n-128+1),e.pos++):(e.writeCodeword(n+1),e.pos++)}},t.prototype.encodeASCIIDigits=function(e,r){if(vd.isDigit(e)&&vd.isDigit(r)){var n=(e-48)*10+(r-48);return n+130}throw new Error("not digits: "+e+r)},t}(),Hje=function(){function t(){}return t.prototype.getEncodingMode=function(){return ol},t.prototype.encode=function(e){var r=new _n;for(r.append(0);e.hasMoreCharacters();){var n=e.getCurrentChar();r.append(n),e.pos++;var a=vd.lookAheadTest(e.getMessage(),e.pos,this.getEncodingMode());if(a!==this.getEncodingMode()){e.signalEncoderChange(ga);break}}var s=r.length()-1,i=1,l=e.getCodewordCount()+s+i;e.updateSymbolInfo(l);var c=e.getSymbolInfo().getDataCapacity()-l>0;if(e.hasMoreCharacters()||c)if(s<=249)r.setCharAt(0,Kn.getCharAt(s));else if(s<=1555)r.setCharAt(0,Kn.getCharAt(Math.floor(s/250)+249)),r.insert(1,Kn.getCharAt(s%250));else throw new Error("Message length not in valid ranges: "+s);for(var u=0,n=r.length();u<n;u++)e.writeCodeword(this.randomize255State(r.charAt(u).charCodeAt(0),e.getCodewordCount()+1))},t.prototype.randomize255State=function(e,r){var n=149*r%255+1,a=e+n;return a<=255?a:a-256},t}(),$6=function(){function t(){}return t.prototype.getEncodingMode=function(){return Po},t.prototype.encodeMaximal=function(e){for(var r=new _n,n=0,a=e.pos,s=0;e.hasMoreCharacters();){var i=e.getCurrentChar();e.pos++,n=this.encodeChar(i,r),r.length()%3===0&&(a=e.pos,s=r.length())}if(s!==r.length()){var l=Math.floor(r.length()/3*2),c=Math.floor(e.getCodewordCount()+l+1);e.updateSymbolInfo(c);var u=e.getSymbolInfo().getDataCapacity()-c,d=Math.floor(r.length()%3);(d===2&&u!==2||d===1&&(n>3||u!==1))&&(e.pos=a)}r.length()>0&&e.writeCodeword(Ste),this.handleEOD(e,r)},t.prototype.encode=function(e){for(var r=new _n;e.hasMoreCharacters();){var n=e.getCurrentChar();e.pos++;var a=this.encodeChar(n,r),s=Math.floor(r.length()/3)*2,i=e.getCodewordCount()+s;e.updateSymbolInfo(i);var l=e.getSymbolInfo().getDataCapacity()-i;if(!e.hasMoreCharacters()){var c=new _n;for(r.length()%3===2&&l!==2&&(a=this.backtrackOneCharacter(e,r,c,a));r.length()%3===1&&(a>3||l!==1);)a=this.backtrackOneCharacter(e,r,c,a);break}var u=r.length();if(u%3===0){var d=vd.lookAheadTest(e.getMessage(),e.pos,this.getEncodingMode());if(d!==this.getEncodingMode()){e.signalEncoderChange(ga);break}}}this.handleEOD(e,r)},t.prototype.backtrackOneCharacter=function(e,r,n,a){var s=r.length(),i=r.toString().substring(0,s-a);r.setLengthToZero(),r.append(i),e.pos--;var l=e.getCurrentChar();return a=this.encodeChar(l,n),e.resetSymbolInfo(),a},t.prototype.writeNextTriplet=function(e,r){e.writeCodewords(this.encodeToCodewords(r.toString()));var n=r.toString().substring(3);r.setLengthToZero(),r.append(n)},t.prototype.handleEOD=function(e,r){var n=Math.floor(r.length()/3*2),a=r.length()%3,s=e.getCodewordCount()+n;e.updateSymbolInfo(s);var i=e.getSymbolInfo().getDataCapacity()-s;if(a===2){for(r.append("\0");r.length()>=3;)this.writeNextTriplet(e,r);e.hasMoreCharacters()&&e.writeCodeword(V5)}else if(i===1&&a===1){for(;r.length()>=3;)this.writeNextTriplet(e,r);e.hasMoreCharacters()&&e.writeCodeword(V5),e.pos--}else if(a===0){for(;r.length()>=3;)this.writeNextTriplet(e,r);(i>0||e.hasMoreCharacters())&&e.writeCodeword(V5)}else throw new Error("Unexpected case. Please report!");e.signalEncoderChange(ga)},t.prototype.encodeChar=function(e,r){if(e===32)return r.append(3),1;if(e>=48&&e<=57)return r.append(e-48+4),1;if(e>=65&&e<=90)return r.append(e-65+14),1;if(e<32)return r.append(0),r.append(e),2;if(e<=47)return r.append(1),r.append(e-33),2;if(e<=64)return r.append(1),r.append(e-58+15),2;if(e<=95)return r.append(1),r.append(e-91+22),2;if(e<=127)return r.append(2),r.append(e-96),2;r.append("1");var n=2;return n+=this.encodeChar(e-128,r),n},t.prototype.encodeToCodewords=function(e){var r=1600*e.charCodeAt(0)+40*e.charCodeAt(1)+e.charCodeAt(2)+1,n=r/256,a=r%256,s=new _n;return s.append(n),s.append(a),s.toString()},t}(),$je=function(){function t(){}return t.prototype.getEncodingMode=function(){return io},t.prototype.encode=function(e){for(var r=new _n;e.hasMoreCharacters();){var n=e.getCurrentChar();this.encodeChar(n,r),e.pos++;var a=r.length();if(a>=4){e.writeCodewords(this.encodeToCodewords(r.toString()));var s=r.toString().substring(4);r.setLengthToZero(),r.append(s);var i=vd.lookAheadTest(e.getMessage(),e.pos,this.getEncodingMode());if(i!==this.getEncodingMode()){e.signalEncoderChange(ga);break}}}r.append(Kn.getCharAt(31)),this.handleEOD(e,r)},t.prototype.handleEOD=function(e,r){try{var n=r.length();if(n===0)return;if(n===1){e.updateSymbolInfo();var a=e.getSymbolInfo().getDataCapacity()-e.getCodewordCount(),s=e.getRemainingCharacters();if(s>a&&(e.updateSymbolInfo(e.getCodewordCount()+1),a=e.getSymbolInfo().getDataCapacity()-e.getCodewordCount()),s<=a&&a<=2)return}if(n>4)throw new Error("Count must not exceed 4");var i=n-1,l=this.encodeToCodewords(r.toString()),c=!e.hasMoreCharacters(),u=c&&i<=2;if(i<=2){e.updateSymbolInfo(e.getCodewordCount()+i);var a=e.getSymbolInfo().getDataCapacity()-e.getCodewordCount();a>=3&&(u=!1,e.updateSymbolInfo(e.getCodewordCount()+l.length))}u?(e.resetSymbolInfo(),e.pos-=i):e.writeCodewords(l)}finally{e.signalEncoderChange(ga)}},t.prototype.encodeChar=function(e,r){e>=32&&e<=63?r.append(e):e>=64&&e<=94?r.append(Kn.getCharAt(e-64)):vd.illegalCharacter(Kn.getCharAt(e))},t.prototype.encodeToCodewords=function(e){var r=e.length;if(r===0)throw new Error("StringBuilder must not be empty");var n=e.charAt(0).charCodeAt(0),a=r>=2?e.charAt(1).charCodeAt(0):0,s=r>=3?e.charAt(2).charCodeAt(0):0,i=r>=4?e.charAt(3).charCodeAt(0):0,l=(n<<18)+(a<<12)+(s<<6)+i,c=l>>16&255,u=l>>8&255,d=l&255,f=new _n;return f.append(c),r>=2&&f.append(u),r>=3&&f.append(d),f.toString()},t}(),Kje=function(){var t=function(e,r){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,a){n.__proto__=a}||function(n,a){for(var s in a)a.hasOwnProperty(s)&&(n[s]=a[s])},t(e,r)};return function(e,r){t(e,r);function n(){this.constructor=e}e.prototype=r===null?Object.create(r):(n.prototype=r.prototype,new n)}}(),Gje=function(t){var e=typeof Symbol=="function"&&Symbol.iterator,r=e&&t[e],n=0;if(r)return r.call(t);if(t&&typeof t.length=="number")return{next:function(){return t&&n>=t.length&&(t=void 0),{value:t&&t[n++],done:!t}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")},oa=function(){function t(e,r,n,a,s,i,l,c){l===void 0&&(l=0),c===void 0&&(c=0),this.rectangular=e,this.dataCapacity=r,this.errorCodewords=n,this.matrixWidth=a,this.matrixHeight=s,this.dataRegions=i,this.rsBlockData=l,this.rsBlockError=c}return t.lookup=function(e,r,n,a,s){var i,l;r===void 0&&(r=0),n===void 0&&(n=null),a===void 0&&(a=null),s===void 0&&(s=!0);try{for(var c=Gje(zje),u=c.next();!u.done;u=c.next()){var d=u.value;if(!(r===1&&d.rectangular)&&!(r===2&&!d.rectangular)&&!(n!=null&&(d.getSymbolWidth()<n.getWidth()||d.getSymbolHeight()<n.getHeight()))&&!(a!=null&&(d.getSymbolWidth()>a.getWidth()||d.getSymbolHeight()>a.getHeight()))&&e<=d.dataCapacity)return d}}catch(f){i={error:f}}finally{try{u&&!u.done&&(l=c.return)&&l.call(c)}finally{if(i)throw i.error}}if(s)throw new Error("Can't find a symbol arrangement that matches the message. Data codewords: "+e);return null},t.prototype.getHorizontalDataRegions=function(){switch(this.dataRegions){case 1:return 1;case 2:case 4:return 2;case 16:return 4;case 36:return 6;default:throw new Error("Cannot handle this number of data regions")}},t.prototype.getVerticalDataRegions=function(){switch(this.dataRegions){case 1:case 2:return 1;case 4:return 2;case 16:return 4;case 36:return 6;default:throw new Error("Cannot handle this number of data regions")}},t.prototype.getSymbolDataWidth=function(){return this.getHorizontalDataRegions()*this.matrixWidth},t.prototype.getSymbolDataHeight=function(){return this.getVerticalDataRegions()*this.matrixHeight},t.prototype.getSymbolWidth=function(){return this.getSymbolDataWidth()+this.getHorizontalDataRegions()*2},t.prototype.getSymbolHeight=function(){return this.getSymbolDataHeight()+this.getVerticalDataRegions()*2},t.prototype.getCodewordCount=function(){return this.dataCapacity+this.errorCodewords},t.prototype.getInterleavedBlockCount=function(){return this.rsBlockData?this.dataCapacity/this.rsBlockData:1},t.prototype.getDataCapacity=function(){return this.dataCapacity},t.prototype.getErrorCodewords=function(){return this.errorCodewords},t.prototype.getDataLengthForInterleavedBlock=function(e){return this.rsBlockData},t.prototype.getErrorLengthForInterleavedBlock=function(e){return this.rsBlockError},t}(),qje=function(t){Kje(e,t);function e(){return t.call(this,!1,1558,620,22,22,36,-1,62)||this}return e.prototype.getInterleavedBlockCount=function(){return 10},e.prototype.getDataLengthForInterleavedBlock=function(r){return r<=8?156:155},e}(oa),zje=[new oa(!1,3,5,8,8,1),new oa(!1,5,7,10,10,1),new oa(!0,5,7,16,6,1),new oa(!1,8,10,12,12,1),new oa(!0,10,11,14,6,2),new oa(!1,12,12,14,14,1),new oa(!0,16,14,24,10,1),new oa(!1,18,14,16,16,1),new oa(!1,22,18,18,18,1),new oa(!0,22,18,16,10,2),new oa(!1,30,20,20,20,1),new oa(!0,32,24,16,14,2),new oa(!1,36,24,22,22,1),new oa(!1,44,28,24,24,1),new oa(!0,49,28,22,14,2),new oa(!1,62,36,14,14,4),new oa(!1,86,42,16,16,4),new oa(!1,114,48,18,18,4),new oa(!1,144,56,20,20,4),new oa(!1,174,68,22,22,4),new oa(!1,204,84,24,24,4,102,42),new oa(!1,280,112,14,14,16,140,56),new oa(!1,368,144,16,16,16,92,36),new oa(!1,456,192,18,18,16,114,48),new oa(!1,576,224,20,20,16,144,56),new oa(!1,696,272,22,22,16,174,68),new oa(!1,816,336,24,24,16,136,56),new oa(!1,1050,408,18,18,36,175,68),new oa(!1,1304,496,20,20,36,163,62),new qje],Wje=function(){function t(e){this.msg=e,this.pos=0,this.skipAtEnd=0;for(var r=e.split("").map(function(l){return l.charCodeAt(0)}),n=new _n,a=0,s=r.length;a<s;a++){var i=String.fromCharCode(r[a]&255);if(i==="?"&&e.charAt(a)!=="?")throw new Error("Message contains characters outside ISO-8859-1 encoding.");n.append(i)}this.msg=n.toString(),this.shape=0,this.codewords=new _n,this.newEncoding=-1}return t.prototype.setSymbolShape=function(e){this.shape=e},t.prototype.setSizeConstraints=function(e,r){this.minSize=e,this.maxSize=r},t.prototype.getMessage=function(){return this.msg},t.prototype.setSkipAtEnd=function(e){this.skipAtEnd=e},t.prototype.getCurrentChar=function(){return this.msg.charCodeAt(this.pos)},t.prototype.getCurrent=function(){return this.msg.charCodeAt(this.pos)},t.prototype.getCodewords=function(){return this.codewords},t.prototype.writeCodewords=function(e){this.codewords.append(e)},t.prototype.writeCodeword=function(e){this.codewords.append(e)},t.prototype.getCodewordCount=function(){return this.codewords.length()},t.prototype.getNewEncoding=function(){return this.newEncoding},t.prototype.signalEncoderChange=function(e){this.newEncoding=e},t.prototype.resetEncoderSignal=function(){this.newEncoding=-1},t.prototype.hasMoreCharacters=function(){return this.pos<this.getTotalMessageCharCount()},t.prototype.getTotalMessageCharCount=function(){return this.msg.length-this.skipAtEnd},t.prototype.getRemainingCharacters=function(){return this.getTotalMessageCharCount()-this.pos},t.prototype.getSymbolInfo=function(){return this.symbolInfo},t.prototype.updateSymbolInfo=function(e){e===void 0&&(e=this.getCodewordCount()),(this.symbolInfo==null||e>this.symbolInfo.getDataCapacity())&&(this.symbolInfo=oa.lookup(e,this.shape,this.minSize,this.maxSize,!0))},t.prototype.resetSymbolInfo=function(){this.symbolInfo=null},t}(),Xje=function(){var t=function(e,r){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,a){n.__proto__=a}||function(n,a){for(var s in a)a.hasOwnProperty(s)&&(n[s]=a[s])},t(e,r)};return function(e,r){t(e,r);function n(){this.constructor=e}e.prototype=r===null?Object.create(r):(n.prototype=r.prototype,new n)}}(),Yje=function(t){Xje(e,t);function e(){return t!==null&&t.apply(this,arguments)||this}return e.prototype.getEncodingMode=function(){return Pi},e.prototype.encode=function(r){for(var n=new _n;r.hasMoreCharacters();){var a=r.getCurrentChar();r.pos++,this.encodeChar(a,n);var s=n.length();if(s%3===0){this.writeNextTriplet(r,n);var i=vd.lookAheadTest(r.getMessage(),r.pos,this.getEncodingMode());if(i!==this.getEncodingMode()){r.signalEncoderChange(ga);break}}}this.handleEOD(r,n)},e.prototype.encodeChar=function(r,n){switch(r){case 13:n.append(0);break;case 42:n.append(1);break;case 62:n.append(2);break;case 32:n.append(3);break;default:r>=48&&r<=57?n.append(r-48+4):r>=65&&r<=90?n.append(r-65+14):vd.illegalCharacter(Kn.getCharAt(r));break}return 1},e.prototype.handleEOD=function(r,n){r.updateSymbolInfo();var a=r.getSymbolInfo().getDataCapacity()-r.getCodewordCount(),s=n.length();r.pos-=s,(r.getRemainingCharacters()>1||a>1||r.getRemainingCharacters()!==a)&&r.writeCodeword(Qje),r.getNewEncoding()<0&&r.signalEncoderChange(ga)},e}($6),Jje=function(){var t=function(e,r){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,a){n.__proto__=a}||function(n,a){for(var s in a)a.hasOwnProperty(s)&&(n[s]=a[s])},t(e,r)};return function(e,r){t(e,r);function n(){this.constructor=e}e.prototype=r===null?Object.create(r):(n.prototype=r.prototype,new n)}}(),Zje=function(t){Jje(e,t);function e(){return t!==null&&t.apply(this,arguments)||this}return e.prototype.getEncodingMode=function(){return Pl},e.prototype.encodeChar=function(r,n){if(r===32)return n.append(3),1;if(r>=48&&r<=57)return n.append(r-48+4),1;if(r>=97&&r<=122)return n.append(r-97+14),1;if(r<32)return n.append(0),n.append(r),2;if(r<=47)return n.append(1),n.append(r-33),2;if(r<=64)return n.append(1),n.append(r-58+15),2;if(r>=91&&r<=95)return n.append(1),n.append(r-91+22),2;if(r===96)return n.append(2),n.append(0),2;if(r<=90)return n.append(2),n.append(r-65+1),2;if(r<=127)return n.append(2),n.append(r-123+27),2;n.append("1");var a=2;return a+=this.encodeChar(r-128,n),a},e}($6),vd=function(){function t(){}return t.randomize253State=function(e){var r=149*e%253+1,n=EV+r;return n<=254?n:n-254},t.encodeHighLevel=function(e,r,n,a,s){r===void 0&&(r=0),n===void 0&&(n=null),a===void 0&&(a=null),s===void 0&&(s=!1);var i=new $6,l=[new Vje,i,new Zje,new Yje,new $je,new Hje],c=new Wje(e);c.setSymbolShape(r),c.setSizeConstraints(n,a),e.startsWith(SV)&&e.endsWith(jV)?(c.writeCodeword(Dje),c.setSkipAtEnd(2),c.pos+=SV.length):e.startsWith(IV)&&e.endsWith(jV)&&(c.writeCodeword(Rje),c.setSkipAtEnd(2),c.pos+=IV.length);var u=ga;for(s&&(i.encodeMaximal(c),u=c.getNewEncoding(),c.resetEncoderSignal());c.hasMoreCharacters();)l[u].encode(c),c.getNewEncoding()>=0&&(u=c.getNewEncoding(),c.resetEncoderSignal());var d=c.getCodewordCount();c.updateSymbolInfo();var f=c.getSymbolInfo().getDataCapacity();d<f&&u!==ga&&u!==ol&&u!==io&&c.writeCodeword("");var h=c.getCodewords();for(h.length()<f&&h.append(EV);h.length()<f;)h.append(this.randomize253State(h.length()+1));return c.getCodewords().toString()},t.lookAheadTest=function(e,r,n){var a=this.lookAheadTestIntern(e,r,n);if(n===Pi&&a===Pi){for(var s=Math.min(r+3,e.length),i=r;i<s;i++)if(!this.isNativeX12(e.charCodeAt(i)))return ga}else if(n===io&&a===io){for(var s=Math.min(r+4,e.length),i=r;i<s;i++)if(!this.isNativeEDIFACT(e.charCodeAt(i)))return ga}return a},t.lookAheadTestIntern=function(e,r,n){if(r>=e.length)return n;var a;n===ga?a=[0,1,1,1,1,1.25]:(a=[1,2,2,2,2,2.25],a[n]=0);for(var s=0,i=new Uint8Array(6),l=[];;){if(r+s===e.length){Ui.fill(i,0),Ui.fill(l,0);var c=this.findMinimums(a,l,Bn.MAX_VALUE,i),u=this.getMinimumCount(i);if(l[ga]===c)return ga;if(u===1){if(i[ol]>0)return ol;if(i[io]>0)return io;if(i[Pl]>0)return Pl;if(i[Pi]>0)return Pi}return Po}var d=e.charCodeAt(r+s);if(s++,this.isDigit(d)?a[ga]+=.5:this.isExtendedASCII(d)?(a[ga]=Math.ceil(a[ga]),a[ga]+=2):(a[ga]=Math.ceil(a[ga]),a[ga]++),this.isNativeC40(d)?a[Po]+=2/3:this.isExtendedASCII(d)?a[Po]+=8/3:a[Po]+=4/3,this.isNativeText(d)?a[Pl]+=2/3:this.isExtendedASCII(d)?a[Pl]+=8/3:a[Pl]+=4/3,this.isNativeX12(d)?a[Pi]+=2/3:this.isExtendedASCII(d)?a[Pi]+=13/3:a[Pi]+=10/3,this.isNativeEDIFACT(d)?a[io]+=3/4:this.isExtendedASCII(d)?a[io]+=17/4:a[io]+=13/4,this.isSpecialB256(d)?a[ol]+=4:a[ol]++,s>=4){if(Ui.fill(i,0),Ui.fill(l,0),this.findMinimums(a,l,Bn.MAX_VALUE,i),l[ga]<this.min(l[ol],l[Po],l[Pl],l[Pi],l[io]))return ga;if(l[ol]<l[ga]||l[ol]+1<this.min(l[Po],l[Pl],l[Pi],l[io]))return ol;if(l[io]+1<this.min(l[ol],l[Po],l[Pl],l[Pi],l[ga]))return io;if(l[Pl]+1<this.min(l[ol],l[Po],l[io],l[Pi],l[ga]))return Pl;if(l[Pi]+1<this.min(l[ol],l[Po],l[io],l[Pl],l[ga]))return Pi;if(l[Po]+1<this.min(l[ga],l[ol],l[io],l[Pl])){if(l[Po]<l[Pi])return Po;if(l[Po]===l[Pi]){for(var f=r+s+1;f<e.length;){var h=e.charCodeAt(f);if(this.isX12TermSep(h))return Pi;if(!this.isNativeX12(h))break;f++}return Po}}}}},t.min=function(e,r,n,a,s){var i=Math.min(e,Math.min(r,Math.min(n,a)));return s===void 0?i:Math.min(i,s)},t.findMinimums=function(e,r,n,a){for(var s=0;s<6;s++){var i=r[s]=Math.ceil(e[s]);n>i&&(n=i,Ui.fill(a,0)),n===i&&(a[s]=a[s]+1)}return n},t.getMinimumCount=function(e){for(var r=0,n=0;n<6;n++)r+=e[n];return r||0},t.isDigit=function(e){return e>=48&&e<=57},t.isExtendedASCII=function(e){return e>=128&&e<=255},t.isNativeC40=function(e){return e===32||e>=48&&e<=57||e>=65&&e<=90},t.isNativeText=function(e){return e===32||e>=48&&e<=57||e>=97&&e<=122},t.isNativeX12=function(e){return this.isX12TermSep(e)||e===32||e>=48&&e<=57||e>=65&&e<=90},t.isX12TermSep=function(e){return e===13||e===42||e===62},t.isNativeEDIFACT=function(e){return e>=32&&e<=94},t.isSpecialB256=function(e){return!1},t.determineConsecutiveDigitCount=function(e,r){r===void 0&&(r=0);for(var n=e.length,a=r;a<n&&this.isDigit(e.charCodeAt(a));)a++;return a-r},t.illegalCharacter=function(e){var r=Bn.toHexString(e.charCodeAt(0));throw r="0000".substring(0,4-r.length)+r,new Error("Illegal character: "+e+" (0x"+r+")")},t}(),H5=function(t){var e=typeof Symbol=="function"&&Symbol.iterator,r=e&&t[e],n=0;if(r)return r.call(t);if(t&&typeof t.length=="number")return{next:function(){return t&&n>=t.length&&(t=void 0),{value:t&&t[n++],done:!t}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")},BV=function(){function t(e){this.charset=e,this.name=e.name}return t.prototype.canEncode=function(e){try{return Vu.encode(e,this.charset)!=null}catch{return!1}},t}(),e5e=function(){function t(e,r,n){var a,s,i,l,c,u;this.ENCODERS=["IBM437","ISO-8859-2","ISO-8859-3","ISO-8859-4","ISO-8859-5","ISO-8859-6","ISO-8859-7","ISO-8859-8","ISO-8859-9","ISO-8859-10","ISO-8859-11","ISO-8859-13","ISO-8859-14","ISO-8859-15","ISO-8859-16","windows-1250","windows-1251","windows-1252","windows-1256","Shift_JIS"].map(function(S){return new BV(Bje.forName(S))}),this.encoders=[];var d=[];d.push(new BV(Pje.ISO_8859_1));for(var f=r!=null&&r.name.startsWith("UTF"),h=0;h<e.length;h++){var A=!1;try{for(var m=(a=void 0,H5(d)),p=m.next();!p.done;p=m.next()){var g=p.value,x=e.charAt(h),y=x.charCodeAt(0);if(y===n||g.canEncode(x)){A=!0;break}}}catch(S){a={error:S}}finally{try{p&&!p.done&&(s=m.return)&&s.call(m)}finally{if(a)throw a.error}}if(!A)try{for(var b=(i=void 0,H5(this.ENCODERS)),w=b.next();!w.done;w=b.next()){var g=w.value;if(g.canEncode(e.charAt(h))){d.push(g),A=!0;break}}}catch(S){i={error:S}}finally{try{w&&!w.done&&(l=b.return)&&l.call(b)}finally{if(i)throw i.error}}A||(f=!0)}if(d.length===1&&!f)this.encoders=[d[0]];else{this.encoders=[];var j=0;try{for(var I=H5(d),_=I.next();!_.done;_=I.next()){var g=_.value;this.encoders[j++]=g}}catch(S){c={error:S}}finally{try{_&&!_.done&&(u=I.return)&&u.call(I)}finally{if(c)throw c.error}}}var E=-1;if(r!=null){for(var h=0;h<this.encoders.length;h++)if(this.encoders[h]!=null&&r.name===this.encoders[h].name){E=h;break}}this.priorityEncoderIndex=E}return t.prototype.length=function(){return this.encoders.length},t.prototype.getCharsetName=function(e){if(!(e<this.length()))throw new Error("index must be less than length");return this.encoders[e].name},t.prototype.getCharset=function(e){if(!(e<this.length()))throw new Error("index must be less than length");return this.encoders[e].charset},t.prototype.getECIValue=function(e){return this.encoders[e].charset.getValueIdentifier()},t.prototype.getPriorityEncoderIndex=function(){return this.priorityEncoderIndex},t.prototype.canEncode=function(e,r){if(!(r<this.length()))throw new Error("index must be less than length");return!0},t.prototype.encode=function(e,r){if(!(r<this.length()))throw new Error("index must be less than length");return Vu.encode(Kn.getCharAt(e),this.encoders[r].name)},t}(),t5e=3,r5e=function(){function t(e,r,n){this.fnc1=n;var a=new e5e(e,r,n);if(a.length()===1)for(var s=0;s<this.bytes.length;s++){var i=e.charAt(s).charCodeAt(0);this.bytes[s]=i===n?1e3:i}else this.bytes=this.encodeMinimally(e,a,n)}return t.prototype.getFNC1Character=function(){return this.fnc1},t.prototype.length=function(){return this.bytes.length},t.prototype.haveNCharacters=function(e,r){if(e+r-1>=this.bytes.length)return!1;for(var n=0;n<r;n++)if(this.isECI(e+n))return!1;return!0},t.prototype.charAt=function(e){if(e<0||e>=this.length())throw new Error(""+e);if(this.isECI(e))throw new Error("value at "+e+" is not a character but an ECI");return this.isFNC1(e)?this.fnc1:this.bytes[e]},t.prototype.subSequence=function(e,r){if(e<0||e>r||r>this.length())throw new Error(""+e);for(var n=new _n,a=e;a<r;a++){if(this.isECI(a))throw new Error("value at "+a+" is not a character but an ECI");n.append(this.charAt(a))}return n.toString()},t.prototype.isECI=function(e){if(e<0||e>=this.length())throw new Error(""+e);return this.bytes[e]>255&&this.bytes[e]<=999},t.prototype.isFNC1=function(e){if(e<0||e>=this.length())throw new Error(""+e);return this.bytes[e]===1e3},t.prototype.getECIValue=function(e){if(e<0||e>=this.length())throw new Error(""+e);if(!this.isECI(e))throw new Error("value at "+e+" is not an ECI but a character");return this.bytes[e]-256},t.prototype.addEdge=function(e,r,n){(e[r][n.encoderIndex]==null||e[r][n.encoderIndex].cachedTotalSize>n.cachedTotalSize)&&(e[r][n.encoderIndex]=n)},t.prototype.addEdges=function(e,r,n,a,s,i){var l=e.charAt(a).charCodeAt(0),c=0,u=r.length();r.getPriorityEncoderIndex()>=0&&(l===i||r.canEncode(l,r.getPriorityEncoderIndex()))&&(c=r.getPriorityEncoderIndex(),u=c+1);for(var d=c;d<u;d++)(l===i||r.canEncode(l,d))&&this.addEdge(n,a+1,new PV(l,r,d,s,i))},t.prototype.encodeMinimally=function(e,r,n){var a=e.length,s=new PV[a+1][r.length()];this.addEdges(e,r,s,0,null,n);for(var i=1;i<=a;i++){for(var l=0;l<r.length();l++)s[i][l]!=null&&i<a&&this.addEdges(e,r,s,i,s[i][l],n);for(var l=0;l<r.length();l++)s[i-1][l]=null}for(var c=-1,u=Bn.MAX_VALUE,l=0;l<r.length();l++)if(s[a][l]!=null){var d=s[a][l];d.cachedTotalSize<u&&(u=d.cachedTotalSize,c=l)}if(c<0)throw new Error('Failed to encode "'+e+'"');for(var f=[],h=s[a][c];h!=null;){if(h.isFNC1())f.unshift(1e3);else for(var A=r.encode(h.c,h.encoderIndex),i=A.length-1;i>=0;i--)f.unshift(A[i]&255);var m=h.previous===null?0:h.previous.encoderIndex;m!==h.encoderIndex&&f.unshift(256+r.getECIValue(h.encoderIndex)),h=h.previous}for(var p=[],i=0;i<p.length;i++)p[i]=f[i];return p},t}(),PV=function(){function t(e,r,n,a,s){this.c=e,this.encoderSet=r,this.encoderIndex=n,this.previous=a,this.fnc1=s,this.c=e===s?1e3:e;var i=this.isFNC1()?1:r.encode(e,n).length,l=a===null?0:a.encoderIndex;l!==n&&(i+=t5e),a!=null&&(i+=a.cachedTotalSize),this.cachedTotalSize=i}return t.prototype.isFNC1=function(){return this.c===1e3},t}(),n5e=function(){var t=function(e,r){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,a){n.__proto__=a}||function(n,a){for(var s in a)a.hasOwnProperty(s)&&(n[s]=a[s])},t(e,r)};return function(e,r){t(e,r);function n(){this.constructor=e}e.prototype=r===null?Object.create(r):(n.prototype=r.prototype,new n)}}();var TV;(function(t){t[t.ASCII=0]="ASCII",t[t.C40=1]="C40",t[t.TEXT=2]="TEXT",t[t.X12=3]="X12",t[t.EDF=4]="EDF",t[t.B256=5]="B256"})(TV||(TV={}));(function(t){n5e(e,t);function e(r,n,a,s,i){var l=t.call(this,r,n,a)||this;return l.shape=s,l.macroId=i,l}return e.prototype.getMacroId=function(){return this.macroId},e.prototype.getShapeHint=function(){return this.shape},e})(r5e);var a5e=function(){function t(){}return t.prototype.isCompact=function(){return this.compact},t.prototype.setCompact=function(e){this.compact=e},t.prototype.getSize=function(){return this.size},t.prototype.setSize=function(e){this.size=e},t.prototype.getLayers=function(){return this.layers},t.prototype.setLayers=function(e){this.layers=e},t.prototype.getCodeWords=function(){return this.codeWords},t.prototype.setCodeWords=function(e){this.codeWords=e},t.prototype.getMatrix=function(){return this.matrix},t.prototype.setMatrix=function(e){this.matrix=e},t}(),kV=function(){function t(){}return t.singletonList=function(e){return[e]},t.min=function(e,r){return e.sort(r)[0]},t}(),s5e=function(){function t(e){this.previous=e}return t.prototype.getPrevious=function(){return this.previous},t}(),i5e=function(){var t=function(e,r){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,a){n.__proto__=a}||function(n,a){for(var s in a)a.hasOwnProperty(s)&&(n[s]=a[s])},t(e,r)};return function(e,r){t(e,r);function n(){this.constructor=e}e.prototype=r===null?Object.create(r):(n.prototype=r.prototype,new n)}}(),K6=function(t){i5e(e,t);function e(r,n,a){var s=t.call(this,r)||this;return s.value=n,s.bitCount=a,s}return e.prototype.appendTo=function(r,n){r.appendBits(this.value,this.bitCount)},e.prototype.add=function(r,n){return new e(this,r,n)},e.prototype.addBinaryShift=function(r,n){return console.warn("addBinaryShift on SimpleToken, this simply returns a copy of this token"),new e(this,r,n)},e.prototype.toString=function(){var r=this.value&(1<<this.bitCount)-1;return r|=1<<this.bitCount,"<"+Bn.toBinaryString(r|1<<this.bitCount).substring(1)+">"},e}(s5e),o5e=function(){var t=function(e,r){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,a){n.__proto__=a}||function(n,a){for(var s in a)a.hasOwnProperty(s)&&(n[s]=a[s])},t(e,r)};return function(e,r){t(e,r);function n(){this.constructor=e}e.prototype=r===null?Object.create(r):(n.prototype=r.prototype,new n)}}(),l5e=function(t){o5e(e,t);function e(r,n,a){var s=t.call(this,r,0,0)||this;return s.binaryShiftStart=n,s.binaryShiftByteCount=a,s}return e.prototype.appendTo=function(r,n){for(var a=0;a<this.binaryShiftByteCount;a++)(a===0||a===31&&this.binaryShiftByteCount<=62)&&(r.appendBits(31,5),this.binaryShiftByteCount>62?r.appendBits(this.binaryShiftByteCount-31,16):a===0?r.appendBits(Math.min(this.binaryShiftByteCount,31),5):r.appendBits(this.binaryShiftByteCount-31,5)),r.appendBits(n[this.binaryShiftStart+a],8)},e.prototype.addBinaryShift=function(r,n){return new e(this,r,n)},e.prototype.toString=function(){return"<"+this.binaryShiftStart+"::"+(this.binaryShiftStart+this.binaryShiftByteCount-1)+">"},e}(K6);function c5e(t,e,r){return new l5e(t,e,r)}function $1(t,e,r){return new K6(t,e,r)}var u5e=["UPPER","LOWER","DIGIT","MIXED","PUNCT"],k0=0,lS=1,Mu=2,Ite=3,gf=4,d5e=new K6(null,0,0),$5=[Int32Array.from([0,(5<<16)+28,(5<<16)+30,(5<<16)+29,656318]),Int32Array.from([(9<<16)+480+14,0,(5<<16)+30,(5<<16)+29,656318]),Int32Array.from([(4<<16)+14,(9<<16)+448+28,0,(9<<16)+448+29,932798]),Int32Array.from([(5<<16)+29,(5<<16)+28,656318,0,(5<<16)+30]),Int32Array.from([(5<<16)+31,656380,656382,656381,0])],f5e=function(t){var e=typeof Symbol=="function"&&Symbol.iterator,r=e&&t[e],n=0;if(r)return r.call(t);if(t&&typeof t.length=="number")return{next:function(){return t&&n>=t.length&&(t=void 0),{value:t&&t[n++],done:!t}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")};function A5e(t){var e,r;try{for(var n=f5e(t),a=n.next();!a.done;a=n.next()){var s=a.value;Ui.fill(s,-1)}}catch(i){e={error:i}}finally{try{a&&!a.done&&(r=n.return)&&r.call(n)}finally{if(e)throw e.error}}return t[k0][gf]=0,t[lS][gf]=0,t[lS][k0]=28,t[Ite][gf]=0,t[Mu][gf]=0,t[Mu][k0]=15,t}var jte=A5e(Ui.createInt32Array(6,6)),h5e=function(t){var e=typeof Symbol=="function"&&Symbol.iterator,r=e&&t[e],n=0;if(r)return r.call(t);if(t&&typeof t.length=="number")return{next:function(){return t&&n>=t.length&&(t=void 0),{value:t&&t[n++],done:!t}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")},m5e=function(){function t(e,r,n,a){this.token=e,this.mode=r,this.binaryShiftByteCount=n,this.bitCount=a}return t.prototype.getMode=function(){return this.mode},t.prototype.getToken=function(){return this.token},t.prototype.getBinaryShiftByteCount=function(){return this.binaryShiftByteCount},t.prototype.getBitCount=function(){return this.bitCount},t.prototype.latchAndAppend=function(e,r){var n=this.bitCount,a=this.token;if(e!==this.mode){var s=$5[this.mode][e];a=$1(a,s&65535,s>>16),n+=s>>16}var i=e===Mu?4:5;return a=$1(a,r,i),new t(a,e,0,n+i)},t.prototype.shiftAndAppend=function(e,r){var n=this.token,a=this.mode===Mu?4:5;return n=$1(n,jte[this.mode][e],a),n=$1(n,r,5),new t(n,this.mode,0,this.bitCount+a+5)},t.prototype.addBinaryShiftChar=function(e){var r=this.token,n=this.mode,a=this.bitCount;if(this.mode===gf||this.mode===Mu){var s=$5[n][k0];r=$1(r,s&65535,s>>16),a+=s>>16,n=k0}var i=this.binaryShiftByteCount===0||this.binaryShiftByteCount===31?18:this.binaryShiftByteCount===62?9:8,l=new t(r,n,this.binaryShiftByteCount+1,a+i);return l.binaryShiftByteCount===2078&&(l=l.endBinaryShift(e+1)),l},t.prototype.endBinaryShift=function(e){if(this.binaryShiftByteCount===0)return this;var r=this.token;return r=c5e(r,e-this.binaryShiftByteCount,this.binaryShiftByteCount),new t(r,this.mode,0,this.bitCount)},t.prototype.isBetterThanOrEqualTo=function(e){var r=this.bitCount+($5[this.mode][e.mode]>>16);return this.binaryShiftByteCount<e.binaryShiftByteCount?r+=t.calculateBinaryShiftCost(e)-t.calculateBinaryShiftCost(this):this.binaryShiftByteCount>e.binaryShiftByteCount&&e.binaryShiftByteCount>0&&(r+=10),r<=e.bitCount},t.prototype.toBitArray=function(e){for(var r,n,a=[],s=this.endBinaryShift(e.length).token;s!==null;s=s.getPrevious())a.unshift(s);var i=new Ao;try{for(var l=h5e(a),c=l.next();!c.done;c=l.next()){var u=c.value;u.appendTo(i,e)}}catch(d){r={error:d}}finally{try{c&&!c.done&&(n=l.return)&&n.call(l)}finally{if(r)throw r.error}}return i},t.prototype.toString=function(){return Kn.format("%s bits=%d bytes=%d",u5e[this.mode],this.bitCount,this.binaryShiftByteCount)},t.calculateBinaryShiftCost=function(e){return e.binaryShiftByteCount>62?21:e.binaryShiftByteCount>31?20:e.binaryShiftByteCount>0?10:0},t.INITIAL_STATE=new t(d5e,k0,0,0),t}();function p5e(t){var e=Kn.getCharCode(" "),r=Kn.getCharCode("."),n=Kn.getCharCode(",");t[k0][e]=1;for(var a=Kn.getCharCode("Z"),s=Kn.getCharCode("A"),i=s;i<=a;i++)t[k0][i]=i-s+2;t[lS][e]=1;for(var l=Kn.getCharCode("z"),c=Kn.getCharCode("a"),i=c;i<=l;i++)t[lS][i]=i-c+2;t[Mu][e]=1;for(var u=Kn.getCharCode("9"),d=Kn.getCharCode("0"),i=d;i<=u;i++)t[Mu][i]=i-d+2;t[Mu][n]=12,t[Mu][r]=13;for(var f=["\0"," ","","","","","","","\x07","\b","	",`
`,"\v","\f","\r","\x1B","","","","","@","\\","^","_","`","|","~",""],h=0;h<f.length;h++)t[Ite][Kn.getCharCode(f[h])]=h;for(var A=["\0","\r","\0","\0","\0","\0","!","'","#","$","%","&","'","(",")","*","+",",","-",".","/",":",";","<","=",">","?","[","]","{","}"],h=0;h<A.length;h++)Kn.getCharCode(A[h])>0&&(t[gf][Kn.getCharCode(A[h])]=h);return t}var K5=p5e(Ui.createInt32Array(5,256)),bC=function(t){var e=typeof Symbol=="function"&&Symbol.iterator,r=e&&t[e],n=0;if(r)return r.call(t);if(t&&typeof t.length=="number")return{next:function(){return t&&n>=t.length&&(t=void 0),{value:t&&t[n++],done:!t}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")},g5e=function(){function t(e){this.text=e}return t.prototype.encode=function(){for(var e=Kn.getCharCode(" "),r=Kn.getCharCode(`
`),n=kV.singletonList(m5e.INITIAL_STATE),a=0;a<this.text.length;a++){var s=void 0,i=a+1<this.text.length?this.text[a+1]:0;switch(this.text[a]){case Kn.getCharCode("\r"):s=i===r?2:0;break;case Kn.getCharCode("."):s=i===e?3:0;break;case Kn.getCharCode(","):s=i===e?4:0;break;case Kn.getCharCode(":"):s=i===e?5:0;break;default:s=0}s>0?(n=t.updateStateListForPair(n,a,s),a++):n=this.updateStateListForChar(n,a)}var l=kV.min(n,function(c,u){return c.getBitCount()-u.getBitCount()});return l.toBitArray(this.text)},t.prototype.updateStateListForChar=function(e,r){var n,a,s=[];try{for(var i=bC(e),l=i.next();!l.done;l=i.next()){var c=l.value;this.updateStateForChar(c,r,s)}}catch(u){n={error:u}}finally{try{l&&!l.done&&(a=i.return)&&a.call(i)}finally{if(n)throw n.error}}return t.simplifyStates(s)},t.prototype.updateStateForChar=function(e,r,n){for(var a=this.text[r]&255,s=K5[e.getMode()][a]>0,i=null,l=0;l<=gf;l++){var c=K5[l][a];if(c>0){if(i==null&&(i=e.endBinaryShift(r)),!s||l===e.getMode()||l===Mu){var u=i.latchAndAppend(l,c);n.push(u)}if(!s&&jte[e.getMode()][l]>=0){var d=i.shiftAndAppend(l,c);n.push(d)}}}if(e.getBinaryShiftByteCount()>0||K5[e.getMode()][a]===0){var f=e.addBinaryShiftChar(r);n.push(f)}},t.updateStateListForPair=function(e,r,n){var a,s,i=[];try{for(var l=bC(e),c=l.next();!c.done;c=l.next()){var u=c.value;this.updateStateForPair(u,r,n,i)}}catch(d){a={error:d}}finally{try{c&&!c.done&&(s=l.return)&&s.call(l)}finally{if(a)throw a.error}}return this.simplifyStates(i)},t.updateStateForPair=function(e,r,n,a){var s=e.endBinaryShift(r);if(a.push(s.latchAndAppend(gf,n)),e.getMode()!==gf&&a.push(s.shiftAndAppend(gf,n)),n===3||n===4){var i=s.latchAndAppend(Mu,16-n).latchAndAppend(Mu,1);a.push(i)}if(e.getBinaryShiftByteCount()>0){var l=e.addBinaryShiftChar(r).addBinaryShiftChar(r+1);a.push(l)}},t.simplifyStates=function(e){var r,n,a,s,i=[];try{for(var l=bC(e),c=l.next();!c.done;c=l.next()){var u=c.value,d=!0,f=function(g){if(g.isBetterThanOrEqualTo(u))return d=!1,"break";u.isBetterThanOrEqualTo(g)&&(i=i.filter(function(x){return x!==g}))};try{for(var h=(a=void 0,bC(i)),A=h.next();!A.done;A=h.next()){var m=A.value,p=f(m);if(p==="break")break}}catch(g){a={error:g}}finally{try{A&&!A.done&&(s=h.return)&&s.call(h)}finally{if(a)throw a.error}}d&&i.push(u)}}catch(g){r={error:g}}finally{try{c&&!c.done&&(n=l.return)&&n.call(l)}finally{if(r)throw r.error}}return i},t}(),x5e=function(t){var e=typeof Symbol=="function"&&Symbol.iterator,r=e&&t[e],n=0;if(r)return r.call(t);if(t&&typeof t.length=="number")return{next:function(){return t&&n>=t.length&&(t=void 0),{value:t&&t[n++],done:!t}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")};(function(){function t(){}return t.encodeBytes=function(e){return t.encode(e,t.DEFAULT_EC_PERCENT,t.DEFAULT_AZTEC_LAYERS)},t.encode=function(e,r,n){var a=new g5e(e).encode(),s=Bn.truncDivision(a.getSize()*r,100)+11,i=a.getSize()+s,l,c,u,d,f;if(n!==t.DEFAULT_AZTEC_LAYERS){if(l=n<0,c=Math.abs(n),c>(l?t.MAX_NB_BITS_COMPACT:t.MAX_NB_BITS))throw new en(Kn.format("Illegal value %s for layers",n));u=t.totalBitsInLayer(c,l),d=t.WORD_SIZE[c];var h=u-u%d;if(f=t.stuffBits(a,d),f.getSize()+s>h)throw new en("Data to large for user specified layer");if(l&&f.getSize()>d*64)throw new en("Data to large for user specified layer")}else{d=0,f=null;for(var A=0;;A++){if(A>t.MAX_NB_BITS)throw new en("Data too large for an Aztec code");if(l=A<=3,c=l?A+1:A,u=t.totalBitsInLayer(c,l),!(i>u)){(f==null||d!==t.WORD_SIZE[c])&&(d=t.WORD_SIZE[c],f=t.stuffBits(a,d));var h=u-u%d;if(!(l&&f.getSize()>d*64)&&f.getSize()+s<=h)break}}}var m=t.generateCheckWords(f,u,d),p=f.getSize()/d,g=t.generateModeMessage(l,c,p),x=(l?11:14)+c*4,y=new Int32Array(x),b;if(l){b=x;for(var A=0;A<y.length;A++)y[A]=A}else{b=x+1+2*Bn.truncDivision(Bn.truncDivision(x,2)-1,15);for(var w=Bn.truncDivision(x,2),j=Bn.truncDivision(b,2),A=0;A<w;A++){var I=A+Bn.truncDivision(A,15);y[w-A-1]=j-I-1,y[w+A]=j+I+1}}for(var _=new Sf(b),A=0,E=0;A<c;A++){for(var S=(c-A)*4+(l?9:12),k=0;k<S;k++)for(var P=k*2,T=0;T<2;T++)m.get(E+P+T)&&_.set(y[A*2+T],y[A*2+k]),m.get(E+S*2+P+T)&&_.set(y[A*2+k],y[x-1-A*2-T]),m.get(E+S*4+P+T)&&_.set(y[x-1-A*2-T],y[x-1-A*2-k]),m.get(E+S*6+P+T)&&_.set(y[x-1-A*2-k],y[A*2+T]);E+=S*8}if(t.drawModeMessage(_,l,b,g),l)t.drawBullsEye(_,Bn.truncDivision(b,2),5);else{t.drawBullsEye(_,Bn.truncDivision(b,2),7);for(var A=0,k=0;A<Bn.truncDivision(x,2)-1;A+=15,k+=16)for(var T=Bn.truncDivision(b,2)&1;T<b;T+=2)_.set(Bn.truncDivision(b,2)-k,T),_.set(Bn.truncDivision(b,2)+k,T),_.set(T,Bn.truncDivision(b,2)-k),_.set(T,Bn.truncDivision(b,2)+k)}var F=new a5e;return F.setCompact(l),F.setSize(b),F.setLayers(c),F.setCodeWords(p),F.setMatrix(_),F},t.drawBullsEye=function(e,r,n){for(var a=0;a<n;a+=2)for(var s=r-a;s<=r+a;s++)e.set(s,r-a),e.set(s,r+a),e.set(r-a,s),e.set(r+a,s);e.set(r-n,r-n),e.set(r-n+1,r-n),e.set(r-n,r-n+1),e.set(r+n,r-n),e.set(r+n,r-n+1),e.set(r+n,r+n-1)},t.generateModeMessage=function(e,r,n){var a=new Ao;return e?(a.appendBits(r-1,2),a.appendBits(n-1,6),a=t.generateCheckWords(a,28,4)):(a.appendBits(r-1,5),a.appendBits(n-1,11),a=t.generateCheckWords(a,40,4)),a},t.drawModeMessage=function(e,r,n,a){var s=Bn.truncDivision(n,2);if(r)for(var i=0;i<7;i++){var l=s-3+i;a.get(i)&&e.set(l,s-5),a.get(i+7)&&e.set(s+5,l),a.get(20-i)&&e.set(l,s+5),a.get(27-i)&&e.set(s-5,l)}else for(var i=0;i<10;i++){var l=s-5+i+Bn.truncDivision(i,5);a.get(i)&&e.set(l,s-7),a.get(i+10)&&e.set(s+7,l),a.get(29-i)&&e.set(l,s+7),a.get(39-i)&&e.set(s-7,l)}},t.generateCheckWords=function(e,r,n){var a,s,i=e.getSize()/n,l=new Ete(t.getGF(n)),c=Bn.truncDivision(r,n),u=t.bitsToWords(e,n,c);l.encode(u,c-i);var d=r%n,f=new Ao;f.appendBits(0,d);try{for(var h=x5e(Array.from(u)),A=h.next();!A.done;A=h.next()){var m=A.value;f.appendBits(m,n)}}catch(p){a={error:p}}finally{try{A&&!A.done&&(s=h.return)&&s.call(h)}finally{if(a)throw a.error}}return f},t.bitsToWords=function(e,r,n){var a=new Int32Array(n),s,i;for(s=0,i=e.getSize()/r;s<i;s++){for(var l=0,c=0;c<r;c++)l|=e.get(s*r+c)?1<<r-c-1:0;a[s]=l}return a},t.getGF=function(e){switch(e){case 4:return oc.AZTEC_PARAM;case 6:return oc.AZTEC_DATA_6;case 8:return oc.AZTEC_DATA_8;case 10:return oc.AZTEC_DATA_10;case 12:return oc.AZTEC_DATA_12;default:throw new en("Unsupported word size "+e)}},t.stuffBits=function(e,r){for(var n=new Ao,a=e.getSize(),s=(1<<r)-2,i=0;i<a;i+=r){for(var l=0,c=0;c<r;c++)(i+c>=a||e.get(i+c))&&(l|=1<<r-1-c);(l&s)===s?(n.appendBits(l&s,r),i--):l&s?n.appendBits(l,r):(n.appendBits(l|1,r),i--)}return n},t.totalBitsInLayer=function(e,r){return((r?88:112)+16*e)*e},t.DEFAULT_EC_PERCENT=33,t.DEFAULT_AZTEC_LAYERS=0,t.MAX_NB_BITS=32,t.MAX_NB_BITS_COMPACT=4,t.WORD_SIZE=Int32Array.from([4,6,6,8,8,8,8,8,8,10,10,10,10,10,10,10,10,10,10,10,10,10,10,12,12,12,12,12,12,12,12,12,12]),t})();var v5e=function(){var t=function(e,r){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,a){n.__proto__=a}||function(n,a){for(var s in a)Object.prototype.hasOwnProperty.call(a,s)&&(n[s]=a[s])},t(e,r)};return function(e,r){if(typeof r!="function"&&r!==null)throw new TypeError("Class extends value "+String(r)+" is not a constructor or null");t(e,r);function n(){this.constructor=e}e.prototype=r===null?Object.create(r):(n.prototype=r.prototype,new n)}}(),y5e=function(t){v5e(e,t);function e(r){var n=t.call(this,r.width,r.height)||this;return n.canvas=r,n.tempCanvasElement=null,n.buffer=e.makeBufferFromCanvasImageData(r),n}return e.makeBufferFromCanvasImageData=function(r){var n;try{n=r.getContext("2d",{willReadFrequently:!0})}catch{n=r.getContext("2d")}if(!n)throw new Error("Couldn't get canvas context.");var a=n.getImageData(0,0,r.width,r.height);return e.toGrayscaleBuffer(a.data,r.width,r.height)},e.toGrayscaleBuffer=function(r,n,a){for(var s=new Uint8ClampedArray(n*a),i=0,l=0,c=r.length;i<c;i+=4,l++){var u=void 0,d=r[i+3];if(d===0)u=255;else{var f=r[i],h=r[i+1],A=r[i+2];u=306*f+601*h+117*A+512>>10}s[l]=u}return s},e.prototype.getRow=function(r,n){if(r<0||r>=this.getHeight())throw new en("Requested row is outside the image: "+r);var a=this.getWidth(),s=r*a;return n===null?n=this.buffer.slice(s,s+a):(n.length<a&&(n=new Uint8ClampedArray(a)),n.set(this.buffer.slice(s,s+a))),n},e.prototype.getMatrix=function(){return this.buffer},e.prototype.isCropSupported=function(){return!0},e.prototype.crop=function(r,n,a,s){return t.prototype.crop.call(this,r,n,a,s),this},e.prototype.isRotateSupported=function(){return!0},e.prototype.rotateCounterClockwise=function(){return this.rotate(-90),this},e.prototype.rotateCounterClockwise45=function(){return this.rotate(-45),this},e.prototype.invert=function(){return new w4(this)},e.prototype.getTempCanvasElement=function(){if(this.tempCanvasElement===null){var r=this.canvas.ownerDocument.createElement("canvas");r.width=this.canvas.width,r.height=this.canvas.height,this.tempCanvasElement=r}return this.tempCanvasElement},e.prototype.rotate=function(r){var n=this.getTempCanvasElement();if(!n)throw new Error("Could not create a Canvas element.");var a=r*e.DEGREE_TO_RADIANS,s=this.canvas.width,i=this.canvas.height,l=Math.ceil(Math.abs(Math.cos(a))*s+Math.abs(Math.sin(a))*i),c=Math.ceil(Math.abs(Math.sin(a))*s+Math.abs(Math.cos(a))*i);n.width=l,n.height=c;var u=n.getContext("2d");if(!u)throw new Error("Could not create a Canvas Context element.");return u.translate(l/2,c/2),u.rotate(a),u.drawImage(this.canvas,s/-2,i/-2),this.buffer=e.makeBufferFromCanvasImageData(n),this},e.DEGREE_TO_RADIANS=Math.PI/180,e}(sw);function Bte(){return typeof navigator<"u"}function b5e(){return Bte()&&!!navigator.mediaDevices}function w5e(){return!!(b5e()&&navigator.mediaDevices.enumerateDevices)}var Cx=function(){return Cx=Object.assign||function(t){for(var e,r=1,n=arguments.length;r<n;r++){e=arguments[r];for(var a in e)Object.prototype.hasOwnProperty.call(e,a)&&(t[a]=e[a])}return t},Cx.apply(this,arguments)},_s=function(t,e,r,n){function a(s){return s instanceof r?s:new r(function(i){i(s)})}return new(r||(r=Promise))(function(s,i){function l(d){try{u(n.next(d))}catch(f){i(f)}}function c(d){try{u(n.throw(d))}catch(f){i(f)}}function u(d){d.done?s(d.value):a(d.value).then(l,c)}u((n=n.apply(t,e||[])).next())})},Es=function(t,e){var r={label:0,sent:function(){if(s[0]&1)throw s[1];return s[1]},trys:[],ops:[]},n,a,s,i;return i={next:l(0),throw:l(1),return:l(2)},typeof Symbol=="function"&&(i[Symbol.iterator]=function(){return this}),i;function l(u){return function(d){return c([u,d])}}function c(u){if(n)throw new TypeError("Generator is already executing.");for(;r;)try{if(n=1,a&&(s=u[0]&2?a.return:u[0]?a.throw||((s=a.return)&&s.call(a),0):a.next)&&!(s=s.call(a,u[1])).done)return s;switch(a=0,s&&(u=[u[0]&2,s.value]),u[0]){case 0:case 1:s=u;break;case 4:return r.label++,{value:u[1],done:!1};case 5:r.label++,a=u[1],u=[0];continue;case 7:u=r.ops.pop(),r.trys.pop();continue;default:if(s=r.trys,!(s=s.length>0&&s[s.length-1])&&(u[0]===6||u[0]===2)){r=0;continue}if(u[0]===3&&(!s||u[1]>s[0]&&u[1]<s[3])){r.label=u[1];break}if(u[0]===6&&r.label<s[1]){r.label=s[1],s=u;break}if(s&&r.label<s[2]){r.label=s[2],r.ops.push(u);break}s[2]&&r.ops.pop(),r.trys.pop();continue}u=e.call(t,r)}catch(d){u=[6,d],a=0}finally{n=s=0}if(u[0]&5)throw u[1];return{value:u[0]?u[1]:void 0,done:!0}}},G5=function(t){var e=typeof Symbol=="function"&&Symbol.iterator,r=e&&t[e],n=0;if(r)return r.call(t);if(t&&typeof t.length=="number")return{next:function(){return t&&n>=t.length&&(t=void 0),{value:t&&t[n++],done:!t}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")},N5e={delayBetweenScanAttempts:500,delayBetweenScanSuccess:500,tryPlayVideoTimeout:5e3},Uv=function(){function t(e,r,n){r===void 0&&(r=new Map),n===void 0&&(n={}),this.reader=e,this.hints=r,this.options=Cx(Cx({},N5e),n)}return Object.defineProperty(t.prototype,"possibleFormats",{set:function(e){this.hints.set(Ga.POSSIBLE_FORMATS,e)},enumerable:!1,configurable:!0}),t.addVideoSource=function(e,r){try{e.srcObject=r}catch{console.error("got interrupted by new loading request")}},t.mediaStreamSetTorch=function(e,r){return _s(this,void 0,void 0,function(){return Es(this,function(n){switch(n.label){case 0:return[4,e.applyConstraints({advanced:[{fillLightMode:r?"flash":"off",torch:!!r}]})];case 1:return n.sent(),[2]}})})},t.mediaStreamIsTorchCompatible=function(e){var r,n,a=e.getVideoTracks();try{for(var s=G5(a),i=s.next();!i.done;i=s.next()){var l=i.value;if(t.mediaStreamIsTorchCompatibleTrack(l))return!0}}catch(c){r={error:c}}finally{try{i&&!i.done&&(n=s.return)&&n.call(s)}finally{if(r)throw r.error}}return!1},t.mediaStreamIsTorchCompatibleTrack=function(e){try{var r=e.getCapabilities();return"torch"in r}catch(n){return console.error(n),console.warn("Your browser may be not fully compatible with WebRTC and/or ImageCapture specs. Torch will not be available."),!1}},t.isVideoPlaying=function(e){return e.currentTime>0&&!e.paused&&e.readyState>2},t.getMediaElement=function(e,r){var n=document.getElementById(e);if(!n)throw new si("element with id '".concat(e,"' not found"));if(n.nodeName.toLowerCase()!==r.toLowerCase())throw new si("element with id '".concat(e,"' must be an ").concat(r," element"));return n},t.createVideoElement=function(e){if(e instanceof HTMLVideoElement)return e;if(typeof e=="string")return t.getMediaElement(e,"video");if(!e&&typeof document<"u"){var r=document.createElement("video");return r.width=200,r.height=200,r}throw new Error("Couldn't get videoElement from videoSource!")},t.prepareImageElement=function(e){if(e instanceof HTMLImageElement)return e;if(typeof e=="string")return t.getMediaElement(e,"img");if(typeof e>"u"){var r=document.createElement("img");return r.width=200,r.height=200,r}throw new Error("Couldn't get imageElement from imageSource!")},t.prepareVideoElement=function(e){var r=t.createVideoElement(e);return r.setAttribute("autoplay","true"),r.setAttribute("muted","true"),r.setAttribute("playsinline","true"),r},t.isImageLoaded=function(e){return!(!e.complete||e.naturalWidth===0)},t.createBinaryBitmapFromCanvas=function(e){var r=new y5e(e),n=new hte(r);return new Ate(n)},t.drawImageOnCanvas=function(e,r){e.drawImage(r,0,0)},t.getMediaElementDimensions=function(e){if(e instanceof HTMLVideoElement)return{height:e.videoHeight,width:e.videoWidth};if(e instanceof HTMLImageElement)return{height:e.naturalHeight||e.height,width:e.naturalWidth||e.width};throw new Error("Couldn't find the Source's dimensions!")},t.createCaptureCanvas=function(e){if(!e)throw new si("Cannot create a capture canvas without a media element.");if(typeof document>"u")throw new Error(`The page "Document" is undefined, make sure you're running in a browser.`);var r=document.createElement("canvas"),n=t.getMediaElementDimensions(e),a=n.width,s=n.height;return r.style.width=a+"px",r.style.height=s+"px",r.width=a,r.height=s,r},t.tryPlayVideo=function(e){return _s(this,void 0,void 0,function(){var r;return Es(this,function(n){switch(n.label){case 0:if(e!=null&&e.ended)return console.error("Trying to play video that has ended."),[2,!1];if(t.isVideoPlaying(e))return console.warn("Trying to play video that is already playing."),[2,!0];n.label=1;case 1:return n.trys.push([1,3,,4]),[4,e.play()];case 2:return n.sent(),[2,!0];case 3:return r=n.sent(),console.warn("It was not possible to play the video.",r),[2,!1];case 4:return[2]}})})},t.createCanvasFromMediaElement=function(e){var r=t.createCaptureCanvas(e),n=r.getContext("2d");if(!n)throw new Error("Couldn't find Canvas 2D Context.");return t.drawImageOnCanvas(n,e),r},t.createBinaryBitmapFromMediaElem=function(e){var r=t.createCanvasFromMediaElement(e);return t.createBinaryBitmapFromCanvas(r)},t.destroyImageElement=function(e){e.src="",e.removeAttribute("src"),e=void 0},t.listVideoInputDevices=function(){return _s(this,void 0,void 0,function(){var e,r,n,a,s,i,l,c,u,d,f,h;return Es(this,function(A){switch(A.label){case 0:if(!Bte())throw new Error("Can't enumerate devices, navigator is not present.");if(!w5e())throw new Error("Can't enumerate devices, method not supported.");return[4,navigator.mediaDevices.enumerateDevices()];case 1:e=A.sent(),r=[];try{for(n=G5(e),a=n.next();!a.done;a=n.next())s=a.value,i=s.kind==="video"?"videoinput":s.kind,i==="videoinput"&&(l=s.deviceId||s.id,c=s.label||"Video device ".concat(r.length+1),u=s.groupId,d={deviceId:l,label:c,kind:i,groupId:u},r.push(d))}catch(m){f={error:m}}finally{try{a&&!a.done&&(h=n.return)&&h.call(n)}finally{if(f)throw f.error}}return[2,r]}})})},t.findDeviceById=function(e){return _s(this,void 0,void 0,function(){var r;return Es(this,function(n){switch(n.label){case 0:return[4,t.listVideoInputDevices()];case 1:return r=n.sent(),r?[2,r.find(function(a){return a.deviceId===e})]:[2]}})})},t.cleanVideoSource=function(e){if(e){try{e.srcObject=null}catch{e.src=""}e&&e.removeAttribute("src")}},t.releaseAllStreams=function(){t.streamTracker.length!==0&&t.streamTracker.forEach(function(e){e.getTracks().forEach(function(r){return r.stop()})}),t.streamTracker=[]},t.playVideoOnLoadAsync=function(e,r){return _s(this,void 0,void 0,function(){var n;return Es(this,function(a){switch(a.label){case 0:return[4,t.tryPlayVideo(e)];case 1:return n=a.sent(),n?[2,!0]:[2,new Promise(function(s,i){var l=setTimeout(function(){t.isVideoPlaying(e)||(i(!1),e.removeEventListener("canplay",c))},r),c=function(){t.tryPlayVideo(e).then(function(u){clearTimeout(l),e.removeEventListener("canplay",c),s(u)})};e.addEventListener("canplay",c)})]}})})},t.attachStreamToVideo=function(e,r,n){return n===void 0&&(n=5e3),_s(this,void 0,void 0,function(){var a;return Es(this,function(s){switch(s.label){case 0:return a=t.prepareVideoElement(r),t.addVideoSource(a,e),[4,t.playVideoOnLoadAsync(a,n)];case 1:return s.sent(),[2,a]}})})},t._waitImageLoad=function(e){return new Promise(function(r,n){var a=1e4,s=setTimeout(function(){t.isImageLoaded(e)||(e.removeEventListener("load",i),n())},a),i=function(){clearTimeout(s),e.removeEventListener("load",i),r()};e.addEventListener("load",i)})},t.checkCallbackFnOrThrow=function(e){if(!e)throw new si("`callbackFn` is a required parameter, you cannot capture results without it.")},t.disposeMediaStream=function(e){e.getVideoTracks().forEach(function(r){return r.stop()}),e=void 0},t.prototype.decode=function(e){var r=t.createCanvasFromMediaElement(e);return this.decodeFromCanvas(r)},t.prototype.decodeBitmap=function(e){return this.reader.decode(e,this.hints)},t.prototype.decodeFromCanvas=function(e){var r=t.createBinaryBitmapFromCanvas(e);return this.decodeBitmap(r)},t.prototype.decodeFromImageElement=function(e){return _s(this,void 0,void 0,function(){var r;return Es(this,function(n){switch(n.label){case 0:if(!e)throw new si("An image element must be provided.");return r=t.prepareImageElement(e),[4,this._decodeOnLoadImage(r)];case 1:return[2,n.sent()]}})})},t.prototype.decodeFromImageUrl=function(e){return _s(this,void 0,void 0,function(){var r;return Es(this,function(n){switch(n.label){case 0:if(!e)throw new si("An URL must be provided.");r=t.prepareImageElement(),r.src=e,n.label=1;case 1:return n.trys.push([1,,3,4]),[4,this.decodeFromImageElement(r)];case 2:return[2,n.sent()];case 3:return t.destroyImageElement(r),[7];case 4:return[2]}})})},t.prototype.decodeFromConstraints=function(e,r,n){return _s(this,void 0,void 0,function(){var a,s;return Es(this,function(i){switch(i.label){case 0:return t.checkCallbackFnOrThrow(n),[4,this.getUserMedia(e)];case 1:a=i.sent(),i.label=2;case 2:return i.trys.push([2,4,,5]),[4,this.decodeFromStream(a,r,n)];case 3:return[2,i.sent()];case 4:throw s=i.sent(),t.disposeMediaStream(a),s;case 5:return[2]}})})},t.prototype.decodeFromStream=function(e,r,n){return _s(this,void 0,void 0,function(){var a,s,i,l,c,u,d,f,h,A=this;return Es(this,function(m){switch(m.label){case 0:return t.checkCallbackFnOrThrow(n),a=this.options.tryPlayVideoTimeout,[4,t.attachStreamToVideo(e,r,a)];case 1:return s=m.sent(),i=function(){t.disposeMediaStream(e),t.cleanVideoSource(s)},l=this.scan(s,n,i),c=e.getVideoTracks(),u=Cx(Cx({},l),{stop:function(){l.stop()},streamVideoConstraintsApply:function(p,g){return _s(this,void 0,void 0,function(){var x,y,b,w,j,I,_;return Es(this,function(E){switch(E.label){case 0:x=g?c.filter(g):c,E.label=1;case 1:E.trys.push([1,6,7,8]),y=G5(x),b=y.next(),E.label=2;case 2:return b.done?[3,5]:(w=b.value,[4,w.applyConstraints(p)]);case 3:E.sent(),E.label=4;case 4:return b=y.next(),[3,2];case 5:return[3,8];case 6:return j=E.sent(),I={error:j},[3,8];case 7:try{b&&!b.done&&(_=y.return)&&_.call(y)}finally{if(I)throw I.error}return[7];case 8:return[2]}})})},streamVideoConstraintsGet:function(p){return c.find(p).getConstraints()},streamVideoSettingsGet:function(p){return c.find(p).getSettings()},streamVideoCapabilitiesGet:function(p){return c.find(p).getCapabilities()}}),d=t.mediaStreamIsTorchCompatible(e),d&&(f=c==null?void 0:c.find(function(p){return t.mediaStreamIsTorchCompatibleTrack(p)}),h=function(p){return _s(A,void 0,void 0,function(){return Es(this,function(g){switch(g.label){case 0:return[4,t.mediaStreamSetTorch(f,p)];case 1:return g.sent(),[2]}})})},u.switchTorch=h,u.stop=function(){return _s(A,void 0,void 0,function(){return Es(this,function(p){switch(p.label){case 0:return l.stop(),[4,h(!1)];case 1:return p.sent(),[2]}})})}),[2,u]}})})},t.prototype.decodeFromVideoDevice=function(e,r,n){return _s(this,void 0,void 0,function(){var a,s;return Es(this,function(i){switch(i.label){case 0:return t.checkCallbackFnOrThrow(n),e?a={deviceId:{exact:e}}:a={facingMode:"environment"},s={video:a},[4,this.decodeFromConstraints(s,r,n)];case 1:return[2,i.sent()]}})})},t.prototype.decodeFromVideoElement=function(e,r){return _s(this,void 0,void 0,function(){var n,a;return Es(this,function(s){switch(s.label){case 0:if(t.checkCallbackFnOrThrow(r),!e)throw new si("A video element must be provided.");return n=t.prepareVideoElement(e),a=this.options.tryPlayVideoTimeout,[4,t.playVideoOnLoadAsync(n,a)];case 1:return s.sent(),[2,this.scan(n,r)]}})})},t.prototype.decodeFromVideoUrl=function(e,r){return _s(this,void 0,void 0,function(){var n,a,s,i;return Es(this,function(l){switch(l.label){case 0:if(t.checkCallbackFnOrThrow(r),!e)throw new si("An URL must be provided.");return n=t.prepareVideoElement(),n.src=e,a=function(){t.cleanVideoSource(n)},s=this.options.tryPlayVideoTimeout,[4,t.playVideoOnLoadAsync(n,s)];case 1:return l.sent(),i=this.scan(n,r,a),[2,i]}})})},t.prototype.decodeOnceFromConstraints=function(e,r){return _s(this,void 0,void 0,function(){var n;return Es(this,function(a){switch(a.label){case 0:return[4,this.getUserMedia(e)];case 1:return n=a.sent(),[4,this.decodeOnceFromStream(n,r)];case 2:return[2,a.sent()]}})})},t.prototype.decodeOnceFromStream=function(e,r){return _s(this,void 0,void 0,function(){var n,a,s;return Es(this,function(i){switch(i.label){case 0:return n=!!r,[4,t.attachStreamToVideo(e,r)];case 1:a=i.sent(),i.label=2;case 2:return i.trys.push([2,,4,5]),[4,this.scanOneResult(a)];case 3:return s=i.sent(),[2,s];case 4:return n||t.cleanVideoSource(a),[7];case 5:return[2]}})})},t.prototype.decodeOnceFromVideoDevice=function(e,r){return _s(this,void 0,void 0,function(){var n,a;return Es(this,function(s){switch(s.label){case 0:return e?n={deviceId:{exact:e}}:n={facingMode:"environment"},a={video:n},[4,this.decodeOnceFromConstraints(a,r)];case 1:return[2,s.sent()]}})})},t.prototype.decodeOnceFromVideoElement=function(e){return _s(this,void 0,void 0,function(){var r,n;return Es(this,function(a){switch(a.label){case 0:if(!e)throw new si("A video element must be provided.");return r=t.prepareVideoElement(e),n=this.options.tryPlayVideoTimeout,[4,t.playVideoOnLoadAsync(r,n)];case 1:return a.sent(),[4,this.scanOneResult(r)];case 2:return[2,a.sent()]}})})},t.prototype.decodeOnceFromVideoUrl=function(e){return _s(this,void 0,void 0,function(){var r,n;return Es(this,function(a){switch(a.label){case 0:if(!e)throw new si("An URL must be provided.");r=t.prepareVideoElement(),r.src=e,n=this.decodeOnceFromVideoElement(r),a.label=1;case 1:return a.trys.push([1,,3,4]),[4,n];case 2:return[2,a.sent()];case 3:return t.cleanVideoSource(r),[7];case 4:return[2]}})})},t.prototype.scanOneResult=function(e,r,n,a){var s=this;return r===void 0&&(r=!0),n===void 0&&(n=!0),a===void 0&&(a=!0),new Promise(function(i,l){s.scan(e,function(c,u,d){if(c){i(c),d.stop();return}if(u){if(u instanceof Wt&&r||u instanceof bi&&n||u instanceof Nr&&a)return;d.stop(),l(u)}})})},t.prototype.scan=function(e,r,n){var a=this;t.checkCallbackFnOrThrow(r);var s=t.createCaptureCanvas(e),i;try{i=s.getContext("2d",{willReadFrequently:!0})}catch{i=s.getContext("2d")}if(!i)throw new Error("Couldn't create canvas for visual element scan.");var l=function(){i=void 0,s=void 0},c=!1,u,d=function(){c=!0,clearTimeout(u),l(),n&&n()},f={stop:d},h=function(){if(!c)try{t.drawImageOnCanvas(i,e);var A=a.decodeFromCanvas(s);r(A,void 0,f),u=setTimeout(h,a.options.delayBetweenScanSuccess)}catch(x){r(void 0,x,f);var m=x instanceof bi,p=x instanceof Nr,g=x instanceof Wt;if(m||p||g){u=setTimeout(h,a.options.delayBetweenScanAttempts);return}l(),n&&n(x)}};return h(),f},t.prototype._decodeOnLoadImage=function(e){return _s(this,void 0,void 0,function(){var r;return Es(this,function(n){switch(n.label){case 0:return r=t.isImageLoaded(e),r?[3,2]:[4,t._waitImageLoad(e)];case 1:n.sent(),n.label=2;case 2:return[2,this.decode(e)]}})})},t.prototype.getUserMedia=function(e){return _s(this,void 0,void 0,function(){var r;return Es(this,function(n){switch(n.label){case 0:return[4,navigator.mediaDevices.getUserMedia(e)];case 1:return r=n.sent(),t.streamTracker.push(r),[2,r]}})})},t.streamTracker=[],t}(),C5e=function(){var t=function(e,r){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,a){n.__proto__=a}||function(n,a){for(var s in a)Object.prototype.hasOwnProperty.call(a,s)&&(n[s]=a[s])},t(e,r)};return function(e,r){if(typeof r!="function"&&r!==null)throw new TypeError("Class extends value "+String(r)+" is not a constructor or null");t(e,r);function n(){this.constructor=e}e.prototype=r===null?Object.create(r):(n.prototype=r.prototype,new n)}}();(function(t){C5e(e,t);function e(r,n){return t.call(this,new nS,r,n)||this}return e})(Uv);var _5e=function(){var t=function(e,r){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,a){n.__proto__=a}||function(n,a){for(var s in a)Object.prototype.hasOwnProperty.call(a,s)&&(n[s]=a[s])},t(e,r)};return function(e,r){if(typeof r!="function"&&r!==null)throw new TypeError("Class extends value "+String(r)+" is not a constructor or null");t(e,r);function n(){this.constructor=e}e.prototype=r===null?Object.create(r):(n.prototype=r.prototype,new n)}}();(function(t){_5e(e,t);function e(r,n){return t.call(this,new wx(r),r,n)||this}return e})(Uv);var E5e=function(){var t=function(e,r){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,a){n.__proto__=a}||function(n,a){for(var s in a)Object.prototype.hasOwnProperty.call(a,s)&&(n[s]=a[s])},t(e,r)};return function(e,r){if(typeof r!="function"&&r!==null)throw new TypeError("Class extends value "+String(r)+" is not a constructor or null");t(e,r);function n(){this.constructor=e}e.prototype=r===null?Object.create(r):(n.prototype=r.prototype,new n)}}();(function(t){E5e(e,t);function e(r,n){return t.call(this,new sS,r,n)||this}return e})(Uv);var S5e=function(){var t=function(e,r){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,a){n.__proto__=a}||function(n,a){for(var s in a)Object.prototype.hasOwnProperty.call(a,s)&&(n[s]=a[s])},t(e,r)};return function(e,r){if(typeof r!="function"&&r!==null)throw new TypeError("Class extends value "+String(r)+" is not a constructor or null");t(e,r);function n(){this.constructor=e}e.prototype=r===null?Object.create(r):(n.prototype=r.prototype,new n)}}(),Zb=function(t){S5e(e,t);function e(r,n){var a=this,s=new _te;return s.setHints(r),a=t.call(this,s,r,n)||this,a.reader=s,a}return Object.defineProperty(e.prototype,"possibleFormats",{set:function(r){this.hints.set(Ga.POSSIBLE_FORMATS,r),this.reader.setHints(this.hints)},enumerable:!1,configurable:!0}),e.prototype.decodeBitmap=function(r){return this.reader.decodeWithState(r)},e.prototype.setHints=function(r){this.hints=r,this.reader.setHints(this.hints)},e}(Uv),I5e=function(){var t=function(e,r){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,a){n.__proto__=a}||function(n,a){for(var s in a)Object.prototype.hasOwnProperty.call(a,s)&&(n[s]=a[s])},t(e,r)};return function(e,r){if(typeof r!="function"&&r!==null)throw new TypeError("Class extends value "+String(r)+" is not a constructor or null");t(e,r);function n(){this.constructor=e}e.prototype=r===null?Object.create(r):(n.prototype=r.prototype,new n)}}();(function(t){I5e(e,t);function e(r,n){return t.call(this,new oS,r,n)||this}return e})(Uv);var j5e=function(){var t=function(e,r){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,a){n.__proto__=a}||function(n,a){for(var s in a)Object.prototype.hasOwnProperty.call(a,s)&&(n[s]=a[s])},t(e,r)};return function(e,r){if(typeof r!="function"&&r!==null)throw new TypeError("Class extends value "+String(r)+" is not a constructor or null");t(e,r);function n(){this.constructor=e}e.prototype=r===null?Object.create(r):(n.prototype=r.prototype,new n)}}();(function(t){j5e(e,t);function e(r,n){return t.call(this,new iS,r,n)||this}return e})(Uv);/*! xlsx.js (C) 2013-present SheetJS -- http://sheetjs.com */var cS={};cS.version="0.18.5";var Pte=1252,B5e=[874,932,936,949,950,1250,1251,1252,1253,1254,1255,1256,1257,1258,1e4],G6={0:1252,1:65001,2:65001,77:1e4,128:932,129:949,130:1361,134:936,136:950,161:1253,162:1254,163:1258,177:1255,178:1256,186:1257,204:1251,222:874,238:1250,255:1252,69:6969},q6=function(t){B5e.indexOf(t)!=-1&&(Pte=G6[0]=t)};function P5e(){q6(1252)}var Nd=function(t){q6(t)};function z6(){Nd(1200),P5e()}function FV(t){for(var e=[],r=0,n=t.length;r<n;++r)e[r]=t.charCodeAt(r);return e}function T5e(t){for(var e=[],r=0;r<t.length>>1;++r)e[r]=String.fromCharCode(t.charCodeAt(2*r)+(t.charCodeAt(2*r+1)<<8));return e.join("")}function Tte(t){for(var e=[],r=0;r<t.length>>1;++r)e[r]=String.fromCharCode(t.charCodeAt(2*r+1)+(t.charCodeAt(2*r)<<8));return e.join("")}var by=function(t){var e=t.charCodeAt(0),r=t.charCodeAt(1);return e==255&&r==254?T5e(t.slice(2)):e==254&&r==255?Tte(t.slice(2)):e==65279?t.slice(1):t},wC=function(e){return String.fromCharCode(e)},OV=function(e){return String.fromCharCode(e)},e2,h0="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=";function t2(t){for(var e="",r=0,n=0,a=0,s=0,i=0,l=0,c=0,u=0;u<t.length;)r=t.charCodeAt(u++),s=r>>2,n=t.charCodeAt(u++),i=(r&3)<<4|n>>4,a=t.charCodeAt(u++),l=(n&15)<<2|a>>6,c=a&63,isNaN(n)?l=c=64:isNaN(a)&&(c=64),e+=h0.charAt(s)+h0.charAt(i)+h0.charAt(l)+h0.charAt(c);return e}function Zc(t){var e="",r=0,n=0,a=0,s=0,i=0,l=0,c=0;t=t.replace(/[^\w\+\/\=]/g,"");for(var u=0;u<t.length;)s=h0.indexOf(t.charAt(u++)),i=h0.indexOf(t.charAt(u++)),r=s<<2|i>>4,e+=String.fromCharCode(r),l=h0.indexOf(t.charAt(u++)),n=(i&15)<<4|l>>2,l!==64&&(e+=String.fromCharCode(n)),c=h0.indexOf(t.charAt(u++)),a=(l&3)<<6|c,c!==64&&(e+=String.fromCharCode(a));return e}var En=function(){return typeof Buffer<"u"&&typeof process<"u"&&typeof process.versions<"u"&&!!process.versions.node}(),th=function(){if(typeof Buffer<"u"){var t=!Buffer.from;if(!t)try{Buffer.from("foo","utf8")}catch{t=!0}return t?function(e,r){return r?new Buffer(e,r):new Buffer(e)}:Buffer.from.bind(Buffer)}return function(){}}();function K0(t){return En?Buffer.alloc?Buffer.alloc(t):new Buffer(t):typeof Uint8Array<"u"?new Uint8Array(t):new Array(t)}function DV(t){return En?Buffer.allocUnsafe?Buffer.allocUnsafe(t):new Buffer(t):typeof Uint8Array<"u"?new Uint8Array(t):new Array(t)}var Uc=function(e){return En?th(e,"binary"):e.split("").map(function(r){return r.charCodeAt(0)&255})};function _4(t){if(typeof ArrayBuffer>"u")return Uc(t);for(var e=new ArrayBuffer(t.length),r=new Uint8Array(e),n=0;n!=t.length;++n)r[n]=t.charCodeAt(n)&255;return e}function am(t){if(Array.isArray(t))return t.map(function(n){return String.fromCharCode(n)}).join("");for(var e=[],r=0;r<t.length;++r)e[r]=String.fromCharCode(t[r]);return e.join("")}function k5e(t){if(typeof Uint8Array>"u")throw new Error("Unsupported");return new Uint8Array(t)}function W6(t){if(typeof ArrayBuffer>"u")throw new Error("Unsupported");if(t instanceof ArrayBuffer)return W6(new Uint8Array(t));for(var e=new Array(t.length),r=0;r<t.length;++r)e[r]=t[r];return e}var fo=En?function(t){return Buffer.concat(t.map(function(e){return Buffer.isBuffer(e)?e:th(e)}))}:function(t){if(typeof Uint8Array<"u"){var e=0,r=0;for(e=0;e<t.length;++e)r+=t[e].length;var n=new Uint8Array(r),a=0;for(e=0,r=0;e<t.length;r+=a,++e)if(a=t[e].length,t[e]instanceof Uint8Array)n.set(t[e],r);else{if(typeof t[e]=="string")throw"wtf";n.set(new Uint8Array(t[e]),r)}return n}return[].concat.apply([],t.map(function(s){return Array.isArray(s)?s:[].slice.call(s)}))};function F5e(t){for(var e=[],r=0,n=t.length+250,a=K0(t.length+255),s=0;s<t.length;++s){var i=t.charCodeAt(s);if(i<128)a[r++]=i;else if(i<2048)a[r++]=192|i>>6&31,a[r++]=128|i&63;else if(i>=55296&&i<57344){i=(i&1023)+64;var l=t.charCodeAt(++s)&1023;a[r++]=240|i>>8&7,a[r++]=128|i>>2&63,a[r++]=128|l>>6&15|(i&3)<<4,a[r++]=128|l&63}else a[r++]=224|i>>12&15,a[r++]=128|i>>6&63,a[r++]=128|i&63;r>n&&(e.push(a.slice(0,r)),r=0,a=K0(65535),n=65530)}return e.push(a.slice(0,r)),fo(e)}var Vl=/\u0000/g,wy=/[\u0001-\u0006]/g;function Lx(t){for(var e="",r=t.length-1;r>=0;)e+=t.charAt(r--);return e}function Cd(t,e){var r=""+t;return r.length>=e?r:Ks("0",e-r.length)+r}function X6(t,e){var r=""+t;return r.length>=e?r:Ks(" ",e-r.length)+r}function uS(t,e){var r=""+t;return r.length>=e?r:r+Ks(" ",e-r.length)}function O5e(t,e){var r=""+Math.round(t);return r.length>=e?r:Ks("0",e-r.length)+r}function D5e(t,e){var r=""+t;return r.length>=e?r:Ks("0",e-r.length)+r}var RV=Math.pow(2,32);function Vg(t,e){if(t>RV||t<-RV)return O5e(t,e);var r=Math.round(t);return D5e(r,e)}function dS(t,e){return e=e||0,t.length>=7+e&&(t.charCodeAt(e)|32)===103&&(t.charCodeAt(e+1)|32)===101&&(t.charCodeAt(e+2)|32)===110&&(t.charCodeAt(e+3)|32)===101&&(t.charCodeAt(e+4)|32)===114&&(t.charCodeAt(e+5)|32)===97&&(t.charCodeAt(e+6)|32)===108}var MV=[["Sun","Sunday"],["Mon","Monday"],["Tue","Tuesday"],["Wed","Wednesday"],["Thu","Thursday"],["Fri","Friday"],["Sat","Saturday"]],q5=[["J","Jan","January"],["F","Feb","February"],["M","Mar","March"],["A","Apr","April"],["M","May","May"],["J","Jun","June"],["J","Jul","July"],["A","Aug","August"],["S","Sep","September"],["O","Oct","October"],["N","Nov","November"],["D","Dec","December"]];function R5e(t){return t||(t={}),t[0]="General",t[1]="0",t[2]="0.00",t[3]="#,##0",t[4]="#,##0.00",t[9]="0%",t[10]="0.00%",t[11]="0.00E+00",t[12]="# ?/?",t[13]="# ??/??",t[14]="m/d/yy",t[15]="d-mmm-yy",t[16]="d-mmm",t[17]="mmm-yy",t[18]="h:mm AM/PM",t[19]="h:mm:ss AM/PM",t[20]="h:mm",t[21]="h:mm:ss",t[22]="m/d/yy h:mm",t[37]="#,##0 ;(#,##0)",t[38]="#,##0 ;[Red](#,##0)",t[39]="#,##0.00;(#,##0.00)",t[40]="#,##0.00;[Red](#,##0.00)",t[45]="mm:ss",t[46]="[h]:mm:ss",t[47]="mmss.0",t[48]="##0.0E+0",t[49]="@",t[56]='"/ "hh""mm""ss" "',t}var an={0:"General",1:"0",2:"0.00",3:"#,##0",4:"#,##0.00",9:"0%",10:"0.00%",11:"0.00E+00",12:"# ?/?",13:"# ??/??",14:"m/d/yy",15:"d-mmm-yy",16:"d-mmm",17:"mmm-yy",18:"h:mm AM/PM",19:"h:mm:ss AM/PM",20:"h:mm",21:"h:mm:ss",22:"m/d/yy h:mm",37:"#,##0 ;(#,##0)",38:"#,##0 ;[Red](#,##0)",39:"#,##0.00;(#,##0.00)",40:"#,##0.00;[Red](#,##0.00)",45:"mm:ss",46:"[h]:mm:ss",47:"mmss.0",48:"##0.0E+0",49:"@",56:'"/ "hh""mm""ss" "'},LV={5:37,6:38,7:39,8:40,23:0,24:0,25:0,26:0,27:14,28:14,29:14,30:14,31:14,50:14,51:14,52:14,53:14,54:14,55:14,56:14,57:14,58:14,59:1,60:2,61:3,62:4,67:9,68:10,69:12,70:13,71:14,72:14,73:15,74:16,75:17,76:20,77:21,78:22,79:45,80:46,81:47,82:0},M5e={5:'"$"#,##0_);\\("$"#,##0\\)',63:'"$"#,##0_);\\("$"#,##0\\)',6:'"$"#,##0_);[Red]\\("$"#,##0\\)',64:'"$"#,##0_);[Red]\\("$"#,##0\\)',7:'"$"#,##0.00_);\\("$"#,##0.00\\)',65:'"$"#,##0.00_);\\("$"#,##0.00\\)',8:'"$"#,##0.00_);[Red]\\("$"#,##0.00\\)',66:'"$"#,##0.00_);[Red]\\("$"#,##0.00\\)',41:'_(* #,##0_);_(* \\(#,##0\\);_(* "-"_);_(@_)',42:'_("$"* #,##0_);_("$"* \\(#,##0\\);_("$"* "-"_);_(@_)',43:'_(* #,##0.00_);_(* \\(#,##0.00\\);_(* "-"??_);_(@_)',44:'_("$"* #,##0.00_);_("$"* \\(#,##0.00\\);_("$"* "-"??_);_(@_)'};function fS(t,e,r){for(var n=t<0?-1:1,a=t*n,s=0,i=1,l=0,c=1,u=0,d=0,f=Math.floor(a);u<e&&(f=Math.floor(a),l=f*i+s,d=f*u+c,!(a-f<5e-8));)a=1/(a-f),s=i,i=l,c=u,u=d;if(d>e&&(u>e?(d=c,l=s):(d=u,l=i)),!r)return[0,n*l,d];var h=Math.floor(n*l/d);return[h,n*l-h*d,d]}function Wm(t,e,r){if(t>2958465||t<0)return null;var n=t|0,a=Math.floor(86400*(t-n)),s=0,i=[],l={D:n,T:a,u:86400*(t-n)-a,y:0,m:0,d:0,H:0,M:0,S:0,q:0};if(Math.abs(l.u)<1e-6&&(l.u=0),e&&e.date1904&&(n+=1462),l.u>.9999&&(l.u=0,++a==86400&&(l.T=a=0,++n,++l.D)),n===60)i=r?[1317,10,29]:[1900,2,29],s=3;else if(n===0)i=r?[1317,8,29]:[1900,1,0],s=6;else{n>60&&--n;var c=new Date(1900,0,1);c.setDate(c.getDate()+n-1),i=[c.getFullYear(),c.getMonth()+1,c.getDate()],s=c.getDay(),n<60&&(s=(s+6)%7),r&&(s=$5e(c,i))}return l.y=i[0],l.m=i[1],l.d=i[2],l.S=a%60,a=Math.floor(a/60),l.M=a%60,a=Math.floor(a/60),l.H=a,l.q=s,l}var kte=new Date(1899,11,31,0,0,0),L5e=kte.getTime(),U5e=new Date(1900,2,1,0,0,0);function Fte(t,e){var r=t.getTime();return e?r-=1461*24*60*60*1e3:t>=U5e&&(r+=24*60*60*1e3),(r-(L5e+(t.getTimezoneOffset()-kte.getTimezoneOffset())*6e4))/(24*60*60*1e3)}function Y6(t){return t.indexOf(".")==-1?t:t.replace(/(?:\.0*|(\.\d*[1-9])0+)$/,"$1")}function Q5e(t){return t.indexOf("E")==-1?t:t.replace(/(?:\.0*|(\.\d*[1-9])0+)[Ee]/,"$1E").replace(/(E[+-])(\d)$/,"$10$2")}function V5e(t){var e=t<0?12:11,r=Y6(t.toFixed(12));return r.length<=e||(r=t.toPrecision(10),r.length<=e)?r:t.toExponential(5)}function H5e(t){var e=Y6(t.toFixed(11));return e.length>(t<0?12:11)||e==="0"||e==="-0"?t.toPrecision(6):e}function r2(t){var e=Math.floor(Math.log(Math.abs(t))*Math.LOG10E),r;return e>=-4&&e<=-1?r=t.toPrecision(10+e):Math.abs(e)<=9?r=V5e(t):e===10?r=t.toFixed(10).substr(0,12):r=H5e(t),Y6(Q5e(r.toUpperCase()))}function kp(t,e){switch(typeof t){case"string":return t;case"boolean":return t?"TRUE":"FALSE";case"number":return(t|0)===t?t.toString(10):r2(t);case"undefined":return"";case"object":if(t==null)return"";if(t instanceof Date)return qu(14,Fte(t,e&&e.date1904),e)}throw new Error("unsupported value in General format: "+t)}function $5e(t,e){e[0]-=581;var r=t.getDay();return t<60&&(r=(r+6)%7),r}function K5e(t,e,r,n){var a="",s=0,i=0,l=r.y,c,u=0;switch(t){case 98:l=r.y+543;case 121:switch(e.length){case 1:case 2:c=l%100,u=2;break;default:c=l%1e4,u=4;break}break;case 109:switch(e.length){case 1:case 2:c=r.m,u=e.length;break;case 3:return q5[r.m-1][1];case 5:return q5[r.m-1][0];default:return q5[r.m-1][2]}break;case 100:switch(e.length){case 1:case 2:c=r.d,u=e.length;break;case 3:return MV[r.q][0];default:return MV[r.q][1]}break;case 104:switch(e.length){case 1:case 2:c=1+(r.H+11)%12,u=e.length;break;default:throw"bad hour format: "+e}break;case 72:switch(e.length){case 1:case 2:c=r.H,u=e.length;break;default:throw"bad hour format: "+e}break;case 77:switch(e.length){case 1:case 2:c=r.M,u=e.length;break;default:throw"bad minute format: "+e}break;case 115:if(e!="s"&&e!="ss"&&e!=".0"&&e!=".00"&&e!=".000")throw"bad second format: "+e;return r.u===0&&(e=="s"||e=="ss")?Cd(r.S,e.length):(n>=2?i=n===3?1e3:100:i=n===1?10:1,s=Math.round(i*(r.S+r.u)),s>=60*i&&(s=0),e==="s"?s===0?"0":""+s/i:(a=Cd(s,2+n),e==="ss"?a.substr(0,2):"."+a.substr(2,e.length-1)));case 90:switch(e){case"[h]":case"[hh]":c=r.D*24+r.H;break;case"[m]":case"[mm]":c=(r.D*24+r.H)*60+r.M;break;case"[s]":case"[ss]":c=((r.D*24+r.H)*60+r.M)*60+Math.round(r.S+r.u);break;default:throw"bad abstime format: "+e}u=e.length===3?1:2;break;case 101:c=l,u=1;break}var d=u>0?Cd(c,u):"";return d}function m0(t){var e=3;if(t.length<=e)return t;for(var r=t.length%e,n=t.substr(0,r);r!=t.length;r+=e)n+=(n.length>0?",":"")+t.substr(r,e);return n}var Ote=/%/g;function G5e(t,e,r){var n=e.replace(Ote,""),a=e.length-n.length;return SA(t,n,r*Math.pow(10,2*a))+Ks("%",a)}function q5e(t,e,r){for(var n=e.length-1;e.charCodeAt(n-1)===44;)--n;return SA(t,e.substr(0,n),r/Math.pow(10,3*(e.length-n)))}function Dte(t,e){var r,n=t.indexOf("E")-t.indexOf(".")-1;if(t.match(/^#+0.0E\+0$/)){if(e==0)return"0.0E+0";if(e<0)return"-"+Dte(t,-e);var a=t.indexOf(".");a===-1&&(a=t.indexOf("E"));var s=Math.floor(Math.log(e)*Math.LOG10E)%a;if(s<0&&(s+=a),r=(e/Math.pow(10,s)).toPrecision(n+1+(a+s)%a),r.indexOf("e")===-1){var i=Math.floor(Math.log(e)*Math.LOG10E);for(r.indexOf(".")===-1?r=r.charAt(0)+"."+r.substr(1)+"E+"+(i-r.length+s):r+="E+"+(i-s);r.substr(0,2)==="0.";)r=r.charAt(0)+r.substr(2,a)+"."+r.substr(2+a),r=r.replace(/^0+([1-9])/,"$1").replace(/^0+\./,"0.");r=r.replace(/\+-/,"-")}r=r.replace(/^([+-]?)(\d*)\.(\d*)[Ee]/,function(l,c,u,d){return c+u+d.substr(0,(a+s)%a)+"."+d.substr(s)+"E"})}else r=e.toExponential(n);return t.match(/E\+00$/)&&r.match(/e[+-]\d$/)&&(r=r.substr(0,r.length-1)+"0"+r.charAt(r.length-1)),t.match(/E\-/)&&r.match(/e\+/)&&(r=r.replace(/e\+/,"e")),r.replace("e","E")}var Rte=/# (\?+)( ?)\/( ?)(\d+)/;function z5e(t,e,r){var n=parseInt(t[4],10),a=Math.round(e*n),s=Math.floor(a/n),i=a-s*n,l=n;return r+(s===0?"":""+s)+" "+(i===0?Ks(" ",t[1].length+1+t[4].length):X6(i,t[1].length)+t[2]+"/"+t[3]+Cd(l,t[4].length))}function W5e(t,e,r){return r+(e===0?"":""+e)+Ks(" ",t[1].length+2+t[4].length)}var Mte=/^#*0*\.([0#]+)/,Lte=/\).*[0#]/,Ute=/\(###\) ###\\?-####/;function Ol(t){for(var e="",r,n=0;n!=t.length;++n)switch(r=t.charCodeAt(n)){case 35:break;case 63:e+=" ";break;case 48:e+="0";break;default:e+=String.fromCharCode(r)}return e}function UV(t,e){var r=Math.pow(10,e);return""+Math.round(t*r)/r}function QV(t,e){var r=t-Math.floor(t),n=Math.pow(10,e);return e<(""+Math.round(r*n)).length?0:Math.round(r*n)}function X5e(t,e){return e<(""+Math.round((t-Math.floor(t))*Math.pow(10,e))).length?1:0}function Y5e(t){return t<2147483647&&t>-2147483648?""+(t>=0?t|0:t-1|0):""+Math.floor(t)}function wu(t,e,r){if(t.charCodeAt(0)===40&&!e.match(Lte)){var n=e.replace(/\( */,"").replace(/ \)/,"").replace(/\)/,"");return r>=0?wu("n",n,r):"("+wu("n",n,-r)+")"}if(e.charCodeAt(e.length-1)===44)return q5e(t,e,r);if(e.indexOf("%")!==-1)return G5e(t,e,r);if(e.indexOf("E")!==-1)return Dte(e,r);if(e.charCodeAt(0)===36)return"$"+wu(t,e.substr(e.charAt(1)==" "?2:1),r);var a,s,i,l,c=Math.abs(r),u=r<0?"-":"";if(e.match(/^00+$/))return u+Vg(c,e.length);if(e.match(/^[#?]+$/))return a=Vg(r,0),a==="0"&&(a=""),a.length>e.length?a:Ol(e.substr(0,e.length-a.length))+a;if(s=e.match(Rte))return z5e(s,c,u);if(e.match(/^#+0+$/))return u+Vg(c,e.length-e.indexOf("0"));if(s=e.match(Mte))return a=UV(r,s[1].length).replace(/^([^\.]+)$/,"$1."+Ol(s[1])).replace(/\.$/,"."+Ol(s[1])).replace(/\.(\d*)$/,function(m,p){return"."+p+Ks("0",Ol(s[1]).length-p.length)}),e.indexOf("0.")!==-1?a:a.replace(/^0\./,".");if(e=e.replace(/^#+([0.])/,"$1"),s=e.match(/^(0*)\.(#*)$/))return u+UV(c,s[2].length).replace(/\.(\d*[1-9])0*$/,".$1").replace(/^(-?\d*)$/,"$1.").replace(/^0\./,s[1].length?"0.":".");if(s=e.match(/^#{1,3},##0(\.?)$/))return u+m0(Vg(c,0));if(s=e.match(/^#,##0\.([#0]*0)$/))return r<0?"-"+wu(t,e,-r):m0(""+(Math.floor(r)+X5e(r,s[1].length)))+"."+Cd(QV(r,s[1].length),s[1].length);if(s=e.match(/^#,#*,#0/))return wu(t,e.replace(/^#,#*,/,""),r);if(s=e.match(/^([0#]+)(\\?-([0#]+))+$/))return a=Lx(wu(t,e.replace(/[\\-]/g,""),r)),i=0,Lx(Lx(e.replace(/\\/g,"")).replace(/[0#]/g,function(m){return i<a.length?a.charAt(i++):m==="0"?"0":""}));if(e.match(Ute))return a=wu(t,"##########",r),"("+a.substr(0,3)+") "+a.substr(3,3)+"-"+a.substr(6);var d="";if(s=e.match(/^([#0?]+)( ?)\/( ?)([#0?]+)/))return i=Math.min(s[4].length,7),l=fS(c,Math.pow(10,i)-1,!1),a=""+u,d=SA("n",s[1],l[1]),d.charAt(d.length-1)==" "&&(d=d.substr(0,d.length-1)+"0"),a+=d+s[2]+"/"+s[3],d=uS(l[2],i),d.length<s[4].length&&(d=Ol(s[4].substr(s[4].length-d.length))+d),a+=d,a;if(s=e.match(/^# ([#0?]+)( ?)\/( ?)([#0?]+)/))return i=Math.min(Math.max(s[1].length,s[4].length),7),l=fS(c,Math.pow(10,i)-1,!0),u+(l[0]||(l[1]?"":"0"))+" "+(l[1]?X6(l[1],i)+s[2]+"/"+s[3]+uS(l[2],i):Ks(" ",2*i+1+s[2].length+s[3].length));if(s=e.match(/^[#0?]+$/))return a=Vg(r,0),e.length<=a.length?a:Ol(e.substr(0,e.length-a.length))+a;if(s=e.match(/^([#0?]+)\.([#0]+)$/)){a=""+r.toFixed(Math.min(s[2].length,10)).replace(/([^0])0+$/,"$1"),i=a.indexOf(".");var f=e.indexOf(".")-i,h=e.length-a.length-f;return Ol(e.substr(0,f)+a+e.substr(e.length-h))}if(s=e.match(/^00,000\.([#0]*0)$/))return i=QV(r,s[1].length),r<0?"-"+wu(t,e,-r):m0(Y5e(r)).replace(/^\d,\d{3}$/,"0$&").replace(/^\d*$/,function(m){return"00,"+(m.length<3?Cd(0,3-m.length):"")+m})+"."+Cd(i,s[1].length);switch(e){case"###,##0.00":return wu(t,"#,##0.00",r);case"###,###":case"##,###":case"#,###":var A=m0(Vg(c,0));return A!=="0"?u+A:"";case"###,###.00":return wu(t,"###,##0.00",r).replace(/^0\./,".");case"#,###.00":return wu(t,"#,##0.00",r).replace(/^0\./,".")}throw new Error("unsupported format |"+e+"|")}function J5e(t,e,r){for(var n=e.length-1;e.charCodeAt(n-1)===44;)--n;return SA(t,e.substr(0,n),r/Math.pow(10,3*(e.length-n)))}function Z5e(t,e,r){var n=e.replace(Ote,""),a=e.length-n.length;return SA(t,n,r*Math.pow(10,2*a))+Ks("%",a)}function Qte(t,e){var r,n=t.indexOf("E")-t.indexOf(".")-1;if(t.match(/^#+0.0E\+0$/)){if(e==0)return"0.0E+0";if(e<0)return"-"+Qte(t,-e);var a=t.indexOf(".");a===-1&&(a=t.indexOf("E"));var s=Math.floor(Math.log(e)*Math.LOG10E)%a;if(s<0&&(s+=a),r=(e/Math.pow(10,s)).toPrecision(n+1+(a+s)%a),!r.match(/[Ee]/)){var i=Math.floor(Math.log(e)*Math.LOG10E);r.indexOf(".")===-1?r=r.charAt(0)+"."+r.substr(1)+"E+"+(i-r.length+s):r+="E+"+(i-s),r=r.replace(/\+-/,"-")}r=r.replace(/^([+-]?)(\d*)\.(\d*)[Ee]/,function(l,c,u,d){return c+u+d.substr(0,(a+s)%a)+"."+d.substr(s)+"E"})}else r=e.toExponential(n);return t.match(/E\+00$/)&&r.match(/e[+-]\d$/)&&(r=r.substr(0,r.length-1)+"0"+r.charAt(r.length-1)),t.match(/E\-/)&&r.match(/e\+/)&&(r=r.replace(/e\+/,"e")),r.replace("e","E")}function cf(t,e,r){if(t.charCodeAt(0)===40&&!e.match(Lte)){var n=e.replace(/\( */,"").replace(/ \)/,"").replace(/\)/,"");return r>=0?cf("n",n,r):"("+cf("n",n,-r)+")"}if(e.charCodeAt(e.length-1)===44)return J5e(t,e,r);if(e.indexOf("%")!==-1)return Z5e(t,e,r);if(e.indexOf("E")!==-1)return Qte(e,r);if(e.charCodeAt(0)===36)return"$"+cf(t,e.substr(e.charAt(1)==" "?2:1),r);var a,s,i,l,c=Math.abs(r),u=r<0?"-":"";if(e.match(/^00+$/))return u+Cd(c,e.length);if(e.match(/^[#?]+$/))return a=""+r,r===0&&(a=""),a.length>e.length?a:Ol(e.substr(0,e.length-a.length))+a;if(s=e.match(Rte))return W5e(s,c,u);if(e.match(/^#+0+$/))return u+Cd(c,e.length-e.indexOf("0"));if(s=e.match(Mte))return a=(""+r).replace(/^([^\.]+)$/,"$1."+Ol(s[1])).replace(/\.$/,"."+Ol(s[1])),a=a.replace(/\.(\d*)$/,function(m,p){return"."+p+Ks("0",Ol(s[1]).length-p.length)}),e.indexOf("0.")!==-1?a:a.replace(/^0\./,".");if(e=e.replace(/^#+([0.])/,"$1"),s=e.match(/^(0*)\.(#*)$/))return u+(""+c).replace(/\.(\d*[1-9])0*$/,".$1").replace(/^(-?\d*)$/,"$1.").replace(/^0\./,s[1].length?"0.":".");if(s=e.match(/^#{1,3},##0(\.?)$/))return u+m0(""+c);if(s=e.match(/^#,##0\.([#0]*0)$/))return r<0?"-"+cf(t,e,-r):m0(""+r)+"."+Ks("0",s[1].length);if(s=e.match(/^#,#*,#0/))return cf(t,e.replace(/^#,#*,/,""),r);if(s=e.match(/^([0#]+)(\\?-([0#]+))+$/))return a=Lx(cf(t,e.replace(/[\\-]/g,""),r)),i=0,Lx(Lx(e.replace(/\\/g,"")).replace(/[0#]/g,function(m){return i<a.length?a.charAt(i++):m==="0"?"0":""}));if(e.match(Ute))return a=cf(t,"##########",r),"("+a.substr(0,3)+") "+a.substr(3,3)+"-"+a.substr(6);var d="";if(s=e.match(/^([#0?]+)( ?)\/( ?)([#0?]+)/))return i=Math.min(s[4].length,7),l=fS(c,Math.pow(10,i)-1,!1),a=""+u,d=SA("n",s[1],l[1]),d.charAt(d.length-1)==" "&&(d=d.substr(0,d.length-1)+"0"),a+=d+s[2]+"/"+s[3],d=uS(l[2],i),d.length<s[4].length&&(d=Ol(s[4].substr(s[4].length-d.length))+d),a+=d,a;if(s=e.match(/^# ([#0?]+)( ?)\/( ?)([#0?]+)/))return i=Math.min(Math.max(s[1].length,s[4].length),7),l=fS(c,Math.pow(10,i)-1,!0),u+(l[0]||(l[1]?"":"0"))+" "+(l[1]?X6(l[1],i)+s[2]+"/"+s[3]+uS(l[2],i):Ks(" ",2*i+1+s[2].length+s[3].length));if(s=e.match(/^[#0?]+$/))return a=""+r,e.length<=a.length?a:Ol(e.substr(0,e.length-a.length))+a;if(s=e.match(/^([#0]+)\.([#0]+)$/)){a=""+r.toFixed(Math.min(s[2].length,10)).replace(/([^0])0+$/,"$1"),i=a.indexOf(".");var f=e.indexOf(".")-i,h=e.length-a.length-f;return Ol(e.substr(0,f)+a+e.substr(e.length-h))}if(s=e.match(/^00,000\.([#0]*0)$/))return r<0?"-"+cf(t,e,-r):m0(""+r).replace(/^\d,\d{3}$/,"0$&").replace(/^\d*$/,function(m){return"00,"+(m.length<3?Cd(0,3-m.length):"")+m})+"."+Cd(0,s[1].length);switch(e){case"###,###":case"##,###":case"#,###":var A=m0(""+c);return A!=="0"?u+A:"";default:if(e.match(/\.[0#?]*$/))return cf(t,e.slice(0,e.lastIndexOf(".")),r)+Ol(e.slice(e.lastIndexOf(".")))}throw new Error("unsupported format |"+e+"|")}function SA(t,e,r){return(r|0)===r?cf(t,e,r):wu(t,e,r)}function eBe(t){for(var e=[],r=!1,n=0,a=0;n<t.length;++n)switch(t.charCodeAt(n)){case 34:r=!r;break;case 95:case 42:case 92:++n;break;case 59:e[e.length]=t.substr(a,n-a),a=n+1}if(e[e.length]=t.substr(a),r===!0)throw new Error("Format |"+t+"| unterminated string ");return e}var Vte=/\[[HhMmSs\u0E0A\u0E19\u0E17]*\]/;function Qv(t){for(var e=0,r="",n="";e<t.length;)switch(r=t.charAt(e)){case"G":dS(t,e)&&(e+=6),e++;break;case'"':for(;t.charCodeAt(++e)!==34&&e<t.length;);++e;break;case"\\":e+=2;break;case"_":e+=2;break;case"@":++e;break;case"B":case"b":if(t.charAt(e+1)==="1"||t.charAt(e+1)==="2")return!0;case"M":case"D":case"Y":case"H":case"S":case"E":case"m":case"d":case"y":case"h":case"s":case"e":case"g":return!0;case"A":case"a":case"":if(t.substr(e,3).toUpperCase()==="A/P"||t.substr(e,5).toUpperCase()==="AM/PM"||t.substr(e,5).toUpperCase()==="/")return!0;++e;break;case"[":for(n=r;t.charAt(e++)!=="]"&&e<t.length;)n+=t.charAt(e);if(n.match(Vte))return!0;break;case".":case"0":case"#":for(;e<t.length&&("0#?.,E+-%".indexOf(r=t.charAt(++e))>-1||r=="\\"&&t.charAt(e+1)=="-"&&"0#".indexOf(t.charAt(e+2))>-1););break;case"?":for(;t.charAt(++e)===r;);break;case"*":++e,(t.charAt(e)==" "||t.charAt(e)=="*")&&++e;break;case"(":case")":++e;break;case"1":case"2":case"3":case"4":case"5":case"6":case"7":case"8":case"9":for(;e<t.length&&"0123456789".indexOf(t.charAt(++e))>-1;);break;case" ":++e;break;default:++e;break}return!1}function tBe(t,e,r,n){for(var a=[],s="",i=0,l="",c="t",u,d,f,h="H";i<t.length;)switch(l=t.charAt(i)){case"G":if(!dS(t,i))throw new Error("unrecognized character "+l+" in "+t);a[a.length]={t:"G",v:"General"},i+=7;break;case'"':for(s="";(f=t.charCodeAt(++i))!==34&&i<t.length;)s+=String.fromCharCode(f);a[a.length]={t:"t",v:s},++i;break;case"\\":var A=t.charAt(++i),m=A==="("||A===")"?A:"t";a[a.length]={t:m,v:A},++i;break;case"_":a[a.length]={t:"t",v:" "},i+=2;break;case"@":a[a.length]={t:"T",v:e},++i;break;case"B":case"b":if(t.charAt(i+1)==="1"||t.charAt(i+1)==="2"){if(u==null&&(u=Wm(e,r,t.charAt(i+1)==="2"),u==null))return"";a[a.length]={t:"X",v:t.substr(i,2)},c=l,i+=2;break}case"M":case"D":case"Y":case"H":case"S":case"E":l=l.toLowerCase();case"m":case"d":case"y":case"h":case"s":case"e":case"g":if(e<0||u==null&&(u=Wm(e,r),u==null))return"";for(s=l;++i<t.length&&t.charAt(i).toLowerCase()===l;)s+=l;l==="m"&&c.toLowerCase()==="h"&&(l="M"),l==="h"&&(l=h),a[a.length]={t:l,v:s},c=l;break;case"A":case"a":case"":var p={t:l,v:l};if(u==null&&(u=Wm(e,r)),t.substr(i,3).toUpperCase()==="A/P"?(u!=null&&(p.v=u.H>=12?"P":"A"),p.t="T",h="h",i+=3):t.substr(i,5).toUpperCase()==="AM/PM"?(u!=null&&(p.v=u.H>=12?"PM":"AM"),p.t="T",i+=5,h="h"):t.substr(i,5).toUpperCase()==="/"?(u!=null&&(p.v=u.H>=12?"":""),p.t="T",i+=5,h="h"):(p.t="t",++i),u==null&&p.t==="T")return"";a[a.length]=p,c=l;break;case"[":for(s=l;t.charAt(i++)!=="]"&&i<t.length;)s+=t.charAt(i);if(s.slice(-1)!=="]")throw'unterminated "[" block: |'+s+"|";if(s.match(Vte)){if(u==null&&(u=Wm(e,r),u==null))return"";a[a.length]={t:"Z",v:s.toLowerCase()},c=s.charAt(1)}else s.indexOf("$")>-1&&(s=(s.match(/\$([^-\[\]]*)/)||[])[1]||"$",Qv(t)||(a[a.length]={t:"t",v:s}));break;case".":if(u!=null){for(s=l;++i<t.length&&(l=t.charAt(i))==="0";)s+=l;a[a.length]={t:"s",v:s};break}case"0":case"#":for(s=l;++i<t.length&&"0#?.,E+-%".indexOf(l=t.charAt(i))>-1;)s+=l;a[a.length]={t:"n",v:s};break;case"?":for(s=l;t.charAt(++i)===l;)s+=l;a[a.length]={t:l,v:s},c=l;break;case"*":++i,(t.charAt(i)==" "||t.charAt(i)=="*")&&++i;break;case"(":case")":a[a.length]={t:n===1?"t":l,v:l},++i;break;case"1":case"2":case"3":case"4":case"5":case"6":case"7":case"8":case"9":for(s=l;i<t.length&&"0123456789".indexOf(t.charAt(++i))>-1;)s+=t.charAt(i);a[a.length]={t:"D",v:s};break;case" ":a[a.length]={t:l,v:l},++i;break;case"$":a[a.length]={t:"t",v:"$"},++i;break;default:if(",$-+/():!^&'~{}<>=acfijklopqrtuvwxzP".indexOf(l)===-1)throw new Error("unrecognized character "+l+" in "+t);a[a.length]={t:"t",v:l},++i;break}var g=0,x=0,y;for(i=a.length-1,c="t";i>=0;--i)switch(a[i].t){case"h":case"H":a[i].t=h,c="h",g<1&&(g=1);break;case"s":(y=a[i].v.match(/\.0+$/))&&(x=Math.max(x,y[0].length-1)),g<3&&(g=3);case"d":case"y":case"M":case"e":c=a[i].t;break;case"m":c==="s"&&(a[i].t="M",g<2&&(g=2));break;case"X":break;case"Z":g<1&&a[i].v.match(/[Hh]/)&&(g=1),g<2&&a[i].v.match(/[Mm]/)&&(g=2),g<3&&a[i].v.match(/[Ss]/)&&(g=3)}switch(g){case 0:break;case 1:u.u>=.5&&(u.u=0,++u.S),u.S>=60&&(u.S=0,++u.M),u.M>=60&&(u.M=0,++u.H);break;case 2:u.u>=.5&&(u.u=0,++u.S),u.S>=60&&(u.S=0,++u.M);break}var b="",w;for(i=0;i<a.length;++i)switch(a[i].t){case"t":case"T":case" ":case"D":break;case"X":a[i].v="",a[i].t=";";break;case"d":case"m":case"y":case"h":case"H":case"M":case"s":case"e":case"b":case"Z":a[i].v=K5e(a[i].t.charCodeAt(0),a[i].v,u,x),a[i].t="t";break;case"n":case"?":for(w=i+1;a[w]!=null&&((l=a[w].t)==="?"||l==="D"||(l===" "||l==="t")&&a[w+1]!=null&&(a[w+1].t==="?"||a[w+1].t==="t"&&a[w+1].v==="/")||a[i].t==="("&&(l===" "||l==="n"||l===")")||l==="t"&&(a[w].v==="/"||a[w].v===" "&&a[w+1]!=null&&a[w+1].t=="?"));)a[i].v+=a[w].v,a[w]={v:"",t:";"},++w;b+=a[i].v,i=w-1;break;case"G":a[i].t="t",a[i].v=kp(e,r);break}var j="",I,_;if(b.length>0){b.charCodeAt(0)==40?(I=e<0&&b.charCodeAt(0)===45?-e:e,_=SA("n",b,I)):(I=e<0&&n>1?-e:e,_=SA("n",b,I),I<0&&a[0]&&a[0].t=="t"&&(_=_.substr(1),a[0].v="-"+a[0].v)),w=_.length-1;var E=a.length;for(i=0;i<a.length;++i)if(a[i]!=null&&a[i].t!="t"&&a[i].v.indexOf(".")>-1){E=i;break}var S=a.length;if(E===a.length&&_.indexOf("E")===-1){for(i=a.length-1;i>=0;--i)a[i]==null||"n?".indexOf(a[i].t)===-1||(w>=a[i].v.length-1?(w-=a[i].v.length,a[i].v=_.substr(w+1,a[i].v.length)):w<0?a[i].v="":(a[i].v=_.substr(0,w+1),w=-1),a[i].t="t",S=i);w>=0&&S<a.length&&(a[S].v=_.substr(0,w+1)+a[S].v)}else if(E!==a.length&&_.indexOf("E")===-1){for(w=_.indexOf(".")-1,i=E;i>=0;--i)if(!(a[i]==null||"n?".indexOf(a[i].t)===-1)){for(d=a[i].v.indexOf(".")>-1&&i===E?a[i].v.indexOf(".")-1:a[i].v.length-1,j=a[i].v.substr(d+1);d>=0;--d)w>=0&&(a[i].v.charAt(d)==="0"||a[i].v.charAt(d)==="#")&&(j=_.charAt(w--)+j);a[i].v=j,a[i].t="t",S=i}for(w>=0&&S<a.length&&(a[S].v=_.substr(0,w+1)+a[S].v),w=_.indexOf(".")+1,i=E;i<a.length;++i)if(!(a[i]==null||"n?(".indexOf(a[i].t)===-1&&i!==E)){for(d=a[i].v.indexOf(".")>-1&&i===E?a[i].v.indexOf(".")+1:0,j=a[i].v.substr(0,d);d<a[i].v.length;++d)w<_.length&&(j+=_.charAt(w++));a[i].v=j,a[i].t="t",S=i}}}for(i=0;i<a.length;++i)a[i]!=null&&"n?".indexOf(a[i].t)>-1&&(I=n>1&&e<0&&i>0&&a[i-1].v==="-"?-e:e,a[i].v=SA(a[i].t,a[i].v,I),a[i].t="t");var k="";for(i=0;i!==a.length;++i)a[i]!=null&&(k+=a[i].v);return k}var VV=/\[(=|>[=]?|<[>=]?)(-?\d+(?:\.\d*)?)\]/;function HV(t,e){if(e==null)return!1;var r=parseFloat(e[2]);switch(e[1]){case"=":if(t==r)return!0;break;case">":if(t>r)return!0;break;case"<":if(t<r)return!0;break;case"<>":if(t!=r)return!0;break;case">=":if(t>=r)return!0;break;case"<=":if(t<=r)return!0;break}return!1}function rBe(t,e){var r=eBe(t),n=r.length,a=r[n-1].indexOf("@");if(n<4&&a>-1&&--n,r.length>4)throw new Error("cannot find right format for |"+r.join("|")+"|");if(typeof e!="number")return[4,r.length===4||a>-1?r[r.length-1]:"@"];switch(r.length){case 1:r=a>-1?["General","General","General",r[0]]:[r[0],r[0],r[0],"@"];break;case 2:r=a>-1?[r[0],r[0],r[0],r[1]]:[r[0],r[1],r[0],"@"];break;case 3:r=a>-1?[r[0],r[1],r[0],r[2]]:[r[0],r[1],r[2],"@"];break}var s=e>0?r[0]:e<0?r[1]:r[2];if(r[0].indexOf("[")===-1&&r[1].indexOf("[")===-1)return[n,s];if(r[0].match(/\[[=<>]/)!=null||r[1].match(/\[[=<>]/)!=null){var i=r[0].match(VV),l=r[1].match(VV);return HV(e,i)?[n,r[0]]:HV(e,l)?[n,r[1]]:[n,r[i!=null&&l!=null?2:1]]}return[n,s]}function qu(t,e,r){r==null&&(r={});var n="";switch(typeof t){case"string":t=="m/d/yy"&&r.dateNF?n=r.dateNF:n=t;break;case"number":t==14&&r.dateNF?n=r.dateNF:n=(r.table!=null?r.table:an)[t],n==null&&(n=r.table&&r.table[LV[t]]||an[LV[t]]),n==null&&(n=M5e[t]||"General");break}if(dS(n,0))return kp(e,r);e instanceof Date&&(e=Fte(e,r.date1904));var a=rBe(n,e);if(dS(a[1]))return kp(e,r);if(e===!0)e="TRUE";else if(e===!1)e="FALSE";else if(e===""||e==null)return"";return tBe(a[1],e,r,a[0])}function IA(t,e){if(typeof e!="number"){e=+e||-1;for(var r=0;r<392;++r){if(an[r]==null){e<0&&(e=r);continue}if(an[r]==t){e=r;break}}e<0&&(e=391)}return an[e]=t,e}function E4(t){for(var e=0;e!=392;++e)t[e]!==void 0&&IA(t[e],e)}function Vv(){an=R5e()}var nBe={5:'"$"#,##0_);\\("$"#,##0\\)',6:'"$"#,##0_);[Red]\\("$"#,##0\\)',7:'"$"#,##0.00_);\\("$"#,##0.00\\)',8:'"$"#,##0.00_);[Red]\\("$"#,##0.00\\)',23:"General",24:"General",25:"General",26:"General",27:"m/d/yy",28:"m/d/yy",29:"m/d/yy",30:"m/d/yy",31:"m/d/yy",32:"h:mm:ss",33:"h:mm:ss",34:"h:mm:ss",35:"h:mm:ss",36:"m/d/yy",41:'_(* #,##0_);_(* (#,##0);_(* "-"_);_(@_)',42:'_("$"* #,##0_);_("$"* (#,##0);_("$"* "-"_);_(@_)',43:'_(* #,##0.00_);_(* (#,##0.00);_(* "-"??_);_(@_)',44:'_("$"* #,##0.00_);_("$"* (#,##0.00);_("$"* "-"??_);_(@_)',50:"m/d/yy",51:"m/d/yy",52:"m/d/yy",53:"m/d/yy",54:"m/d/yy",55:"m/d/yy",56:"m/d/yy",57:"m/d/yy",58:"m/d/yy",59:"0",60:"0.00",61:"#,##0",62:"#,##0.00",63:'"$"#,##0_);\\("$"#,##0\\)',64:'"$"#,##0_);[Red]\\("$"#,##0\\)',65:'"$"#,##0.00_);\\("$"#,##0.00\\)',66:'"$"#,##0.00_);[Red]\\("$"#,##0.00\\)',67:"0%",68:"0.00%",69:"# ?/?",70:"# ??/??",71:"m/d/yy",72:"m/d/yy",73:"d-mmm-yy",74:"d-mmm",75:"mmm-yy",76:"h:mm",77:"h:mm:ss",78:"m/d/yy h:mm",79:"mm:ss",80:"[h]:mm:ss",81:"mmss.0"},Hte=/[dD]+|[mM]+|[yYeE]+|[Hh]+|[Ss]+/g;function aBe(t){var e=typeof t=="number"?an[t]:t;return e=e.replace(Hte,"(\\d+)"),new RegExp("^"+e+"$")}function sBe(t,e,r){var n=-1,a=-1,s=-1,i=-1,l=-1,c=-1;(e.match(Hte)||[]).forEach(function(f,h){var A=parseInt(r[h+1],10);switch(f.toLowerCase().charAt(0)){case"y":n=A;break;case"d":s=A;break;case"h":i=A;break;case"s":c=A;break;case"m":i>=0?l=A:a=A;break}}),c>=0&&l==-1&&a>=0&&(l=a,a=-1);var u=(""+(n>=0?n:new Date().getFullYear())).slice(-4)+"-"+("00"+(a>=1?a:1)).slice(-2)+"-"+("00"+(s>=1?s:1)).slice(-2);u.length==7&&(u="0"+u),u.length==8&&(u="20"+u);var d=("00"+(i>=0?i:0)).slice(-2)+":"+("00"+(l>=0?l:0)).slice(-2)+":"+("00"+(c>=0?c:0)).slice(-2);return i==-1&&l==-1&&c==-1?u:n==-1&&a==-1&&s==-1?d:u+"T"+d}var iBe=function(){var t={};t.version="1.2.0";function e(){for(var _=0,E=new Array(256),S=0;S!=256;++S)_=S,_=_&1?-306674912^_>>>1:_>>>1,_=_&1?-306674912^_>>>1:_>>>1,_=_&1?-306674912^_>>>1:_>>>1,_=_&1?-306674912^_>>>1:_>>>1,_=_&1?-306674912^_>>>1:_>>>1,_=_&1?-306674912^_>>>1:_>>>1,_=_&1?-306674912^_>>>1:_>>>1,_=_&1?-306674912^_>>>1:_>>>1,E[S]=_;return typeof Int32Array<"u"?new Int32Array(E):E}var r=e();function n(_){var E=0,S=0,k=0,P=typeof Int32Array<"u"?new Int32Array(4096):new Array(4096);for(k=0;k!=256;++k)P[k]=_[k];for(k=0;k!=256;++k)for(S=_[k],E=256+k;E<4096;E+=256)S=P[E]=S>>>8^_[S&255];var T=[];for(k=1;k!=16;++k)T[k-1]=typeof Int32Array<"u"?P.subarray(k*256,k*256+256):P.slice(k*256,k*256+256);return T}var a=n(r),s=a[0],i=a[1],l=a[2],c=a[3],u=a[4],d=a[5],f=a[6],h=a[7],A=a[8],m=a[9],p=a[10],g=a[11],x=a[12],y=a[13],b=a[14];function w(_,E){for(var S=E^-1,k=0,P=_.length;k<P;)S=S>>>8^r[(S^_.charCodeAt(k++))&255];return~S}function j(_,E){for(var S=E^-1,k=_.length-15,P=0;P<k;)S=b[_[P++]^S&255]^y[_[P++]^S>>8&255]^x[_[P++]^S>>16&255]^g[_[P++]^S>>>24]^p[_[P++]]^m[_[P++]]^A[_[P++]]^h[_[P++]]^f[_[P++]]^d[_[P++]]^u[_[P++]]^c[_[P++]]^l[_[P++]]^i[_[P++]]^s[_[P++]]^r[_[P++]];for(k+=15;P<k;)S=S>>>8^r[(S^_[P++])&255];return~S}function I(_,E){for(var S=E^-1,k=0,P=_.length,T=0,F=0;k<P;)T=_.charCodeAt(k++),T<128?S=S>>>8^r[(S^T)&255]:T<2048?(S=S>>>8^r[(S^(192|T>>6&31))&255],S=S>>>8^r[(S^(128|T&63))&255]):T>=55296&&T<57344?(T=(T&1023)+64,F=_.charCodeAt(k++)&1023,S=S>>>8^r[(S^(240|T>>8&7))&255],S=S>>>8^r[(S^(128|T>>2&63))&255],S=S>>>8^r[(S^(128|F>>6&15|(T&3)<<4))&255],S=S>>>8^r[(S^(128|F&63))&255]):(S=S>>>8^r[(S^(224|T>>12&15))&255],S=S>>>8^r[(S^(128|T>>6&63))&255],S=S>>>8^r[(S^(128|T&63))&255]);return~S}return t.table=r,t.bstr=w,t.buf=j,t.str=I,t}(),Xr=function(){var e={};e.version="1.2.1";function r(te,V){for(var re=te.split("/"),pe=V.split("/"),Ee=0,Se=0,Re=Math.min(re.length,pe.length);Ee<Re;++Ee){if(Se=re[Ee].length-pe[Ee].length)return Se;if(re[Ee]!=pe[Ee])return re[Ee]<pe[Ee]?-1:1}return re.length-pe.length}function n(te){if(te.charAt(te.length-1)=="/")return te.slice(0,-1).indexOf("/")===-1?te:n(te.slice(0,-1));var V=te.lastIndexOf("/");return V===-1?te:te.slice(0,V+1)}function a(te){if(te.charAt(te.length-1)=="/")return a(te.slice(0,-1));var V=te.lastIndexOf("/");return V===-1?te:te.slice(V+1)}function s(te,V){typeof V=="string"&&(V=new Date(V));var re=V.getHours();re=re<<6|V.getMinutes(),re=re<<5|V.getSeconds()>>>1,te.write_shift(2,re);var pe=V.getFullYear()-1980;pe=pe<<4|V.getMonth()+1,pe=pe<<5|V.getDate(),te.write_shift(2,pe)}function i(te){var V=te.read_shift(2)&65535,re=te.read_shift(2)&65535,pe=new Date,Ee=re&31;re>>>=5;var Se=re&15;re>>>=4,pe.setMilliseconds(0),pe.setFullYear(re+1980),pe.setMonth(Se-1),pe.setDate(Ee);var Re=V&31;V>>>=5;var et=V&63;return V>>>=6,pe.setHours(V),pe.setMinutes(et),pe.setSeconds(Re<<1),pe}function l(te){Uo(te,0);for(var V={},re=0;te.l<=te.length-4;){var pe=te.read_shift(2),Ee=te.read_shift(2),Se=te.l+Ee,Re={};switch(pe){case 21589:re=te.read_shift(1),re&1&&(Re.mtime=te.read_shift(4)),Ee>5&&(re&2&&(Re.atime=te.read_shift(4)),re&4&&(Re.ctime=te.read_shift(4))),Re.mtime&&(Re.mt=new Date(Re.mtime*1e3));break}te.l=Se,V[pe]=Re}return V}var c;function u(){return c||(c={})}function d(te,V){if(te[0]==80&&te[1]==75)return Ce(te,V);if((te[0]|32)==109&&(te[1]|32)==105)return ae(te,V);if(te.length<512)throw new Error("CFB file size "+te.length+" < 512");var re=3,pe=512,Ee=0,Se=0,Re=0,et=0,We=0,At=[],vt=te.slice(0,512);Uo(vt,0);var Vt=f(vt);switch(re=Vt[0],re){case 3:pe=512;break;case 4:pe=4096;break;case 0:if(Vt[1]==0)return Ce(te,V);default:throw new Error("Major Version: Expected 3 or 4 saw "+re)}pe!==512&&(vt=te.slice(0,pe),Uo(vt,28));var or=te.slice(0,pe);h(vt,re);var Oe=vt.read_shift(4,"i");if(re===3&&Oe!==0)throw new Error("# Directory Sectors: Expected 0 saw "+Oe);vt.l+=4,Re=vt.read_shift(4,"i"),vt.l+=4,vt.chk("00100000","Mini Stream Cutoff Size: "),et=vt.read_shift(4,"i"),Ee=vt.read_shift(4,"i"),We=vt.read_shift(4,"i"),Se=vt.read_shift(4,"i");for(var ct=-1,bt=0;bt<109&&(ct=vt.read_shift(4,"i"),!(ct<0));++bt)At[bt]=ct;var Dt=A(te,pe);g(We,Se,Dt,pe,At);var xt=y(Dt,Re,At,pe);xt[Re].name="!Directory",Ee>0&&et!==F&&(xt[et].name="!MiniFAT"),xt[At[0]].name="!FAT",xt.fat_addrs=At,xt.ssz=pe;var sr={},Xt=[],Kt=[],ar=[];b(Re,xt,Dt,Xt,Ee,sr,Kt,et),m(Kt,ar,Xt),Xt.shift();var Ar={FileIndex:Kt,FullPaths:ar};return V&&V.raw&&(Ar.raw={header:or,sectors:Dt}),Ar}function f(te){if(te[te.l]==80&&te[te.l+1]==75)return[0,0];te.chk(Y,"Header Signature: "),te.l+=16;var V=te.read_shift(2,"u");return[te.read_shift(2,"u"),V]}function h(te,V){var re=9;switch(te.l+=2,re=te.read_shift(2)){case 9:if(V!=3)throw new Error("Sector Shift: Expected 9 saw "+re);break;case 12:if(V!=4)throw new Error("Sector Shift: Expected 12 saw "+re);break;default:throw new Error("Sector Shift: Expected 9 or 12 saw "+re)}te.chk("0600","Mini Sector Shift: "),te.chk("000000000000","Reserved: ")}function A(te,V){for(var re=Math.ceil(te.length/V)-1,pe=[],Ee=1;Ee<re;++Ee)pe[Ee-1]=te.slice(Ee*V,(Ee+1)*V);return pe[re-1]=te.slice(re*V),pe}function m(te,V,re){for(var pe=0,Ee=0,Se=0,Re=0,et=0,We=re.length,At=[],vt=[];pe<We;++pe)At[pe]=vt[pe]=pe,V[pe]=re[pe];for(;et<vt.length;++et)pe=vt[et],Ee=te[pe].L,Se=te[pe].R,Re=te[pe].C,At[pe]===pe&&(Ee!==-1&&At[Ee]!==Ee&&(At[pe]=At[Ee]),Se!==-1&&At[Se]!==Se&&(At[pe]=At[Se])),Re!==-1&&(At[Re]=pe),Ee!==-1&&pe!=At[pe]&&(At[Ee]=At[pe],vt.lastIndexOf(Ee)<et&&vt.push(Ee)),Se!==-1&&pe!=At[pe]&&(At[Se]=At[pe],vt.lastIndexOf(Se)<et&&vt.push(Se));for(pe=1;pe<We;++pe)At[pe]===pe&&(Se!==-1&&At[Se]!==Se?At[pe]=At[Se]:Ee!==-1&&At[Ee]!==Ee&&(At[pe]=At[Ee]));for(pe=1;pe<We;++pe)if(te[pe].type!==0){if(et=pe,et!=At[et])do et=At[et],V[pe]=V[et]+"/"+V[pe];while(et!==0&&At[et]!==-1&&et!=At[et]);At[pe]=-1}for(V[0]+="/",pe=1;pe<We;++pe)te[pe].type!==2&&(V[pe]+="/")}function p(te,V,re){for(var pe=te.start,Ee=te.size,Se=[],Re=pe;re&&Ee>0&&Re>=0;)Se.push(V.slice(Re*T,Re*T+T)),Ee-=T,Re=Qm(re,Re*4);return Se.length===0?Yt(0):fo(Se).slice(0,te.size)}function g(te,V,re,pe,Ee){var Se=F;if(te===F){if(V!==0)throw new Error("DIFAT chain shorter than expected")}else if(te!==-1){var Re=re[te],et=(pe>>>2)-1;if(!Re)return;for(var We=0;We<et&&(Se=Qm(Re,We*4))!==F;++We)Ee.push(Se);g(Qm(Re,pe-4),V-1,re,pe,Ee)}}function x(te,V,re,pe,Ee){var Se=[],Re=[];Ee||(Ee=[]);var et=pe-1,We=0,At=0;for(We=V;We>=0;){Ee[We]=!0,Se[Se.length]=We,Re.push(te[We]);var vt=re[Math.floor(We*4/pe)];if(At=We*4&et,pe<4+At)throw new Error("FAT boundary crossed: "+We+" 4 "+pe);if(!te[vt])break;We=Qm(te[vt],At)}return{nodes:Se,data:tH([Re])}}function y(te,V,re,pe){var Ee=te.length,Se=[],Re=[],et=[],We=[],At=pe-1,vt=0,Vt=0,or=0,Oe=0;for(vt=0;vt<Ee;++vt)if(et=[],or=vt+V,or>=Ee&&(or-=Ee),!Re[or]){We=[];var ct=[];for(Vt=or;Vt>=0;){ct[Vt]=!0,Re[Vt]=!0,et[et.length]=Vt,We.push(te[Vt]);var bt=re[Math.floor(Vt*4/pe)];if(Oe=Vt*4&At,pe<4+Oe)throw new Error("FAT boundary crossed: "+Vt+" 4 "+pe);if(!te[bt]||(Vt=Qm(te[bt],Oe),ct[Vt]))break}Se[or]={nodes:et,data:tH([We])}}return Se}function b(te,V,re,pe,Ee,Se,Re,et){for(var We=0,At=pe.length?2:0,vt=V[te].data,Vt=0,or=0,Oe;Vt<vt.length;Vt+=128){var ct=vt.slice(Vt,Vt+128);Uo(ct,64),or=ct.read_shift(2),Oe=aD(ct,0,or-At),pe.push(Oe);var bt={name:Oe,type:ct.read_shift(1),color:ct.read_shift(1),L:ct.read_shift(4,"i"),R:ct.read_shift(4,"i"),C:ct.read_shift(4,"i"),clsid:ct.read_shift(16),state:ct.read_shift(4,"i"),start:0,size:0},Dt=ct.read_shift(2)+ct.read_shift(2)+ct.read_shift(2)+ct.read_shift(2);Dt!==0&&(bt.ct=w(ct,ct.l-8));var xt=ct.read_shift(2)+ct.read_shift(2)+ct.read_shift(2)+ct.read_shift(2);xt!==0&&(bt.mt=w(ct,ct.l-8)),bt.start=ct.read_shift(4,"i"),bt.size=ct.read_shift(4,"i"),bt.size<0&&bt.start<0&&(bt.size=bt.type=0,bt.start=F,bt.name=""),bt.type===5?(We=bt.start,Ee>0&&We!==F&&(V[We].name="!StreamData")):bt.size>=4096?(bt.storage="fat",V[bt.start]===void 0&&(V[bt.start]=x(re,bt.start,V.fat_addrs,V.ssz)),V[bt.start].name=bt.name,bt.content=V[bt.start].data.slice(0,bt.size)):(bt.storage="minifat",bt.size<0?bt.size=0:We!==F&&bt.start!==F&&V[We]&&(bt.content=p(bt,V[We].data,(V[et]||{}).data))),bt.content&&Uo(bt.content,0),Se[Oe]=bt,Re.push(bt)}}function w(te,V){return new Date((Lc(te,V+4)/1e7*Math.pow(2,32)+Lc(te,V)/1e7-11644473600)*1e3)}function j(te,V){return u(),d(c.readFileSync(te),V)}function I(te,V){var re=V&&V.type;switch(re||En&&Buffer.isBuffer(te)&&(re="buffer"),re||"base64"){case"file":return j(te,V);case"base64":return d(Uc(Zc(te)),V);case"binary":return d(Uc(te),V)}return d(te,V)}function _(te,V){var re=V||{},pe=re.root||"Root Entry";if(te.FullPaths||(te.FullPaths=[]),te.FileIndex||(te.FileIndex=[]),te.FullPaths.length!==te.FileIndex.length)throw new Error("inconsistent CFB structure");te.FullPaths.length===0&&(te.FullPaths[0]=pe+"/",te.FileIndex[0]={name:pe,type:5}),re.CLSID&&(te.FileIndex[0].clsid=re.CLSID),E(te)}function E(te){var V="Sh33tJ5";if(!Xr.find(te,"/"+V)){var re=Yt(4);re[0]=55,re[1]=re[3]=50,re[2]=54,te.FileIndex.push({name:V,type:2,content:re,size:4,L:69,R:69,C:69}),te.FullPaths.push(te.FullPaths[0]+V),S(te)}}function S(te,V){_(te);for(var re=!1,pe=!1,Ee=te.FullPaths.length-1;Ee>=0;--Ee){var Se=te.FileIndex[Ee];switch(Se.type){case 0:pe?re=!0:(te.FileIndex.pop(),te.FullPaths.pop());break;case 1:case 2:case 5:pe=!0,isNaN(Se.R*Se.L*Se.C)&&(re=!0),Se.R>-1&&Se.L>-1&&Se.R==Se.L&&(re=!0);break;default:re=!0;break}}if(!(!re&&!V)){var Re=new Date(1987,1,19),et=0,We=Object.create?Object.create(null):{},At=[];for(Ee=0;Ee<te.FullPaths.length;++Ee)We[te.FullPaths[Ee]]=!0,te.FileIndex[Ee].type!==0&&At.push([te.FullPaths[Ee],te.FileIndex[Ee]]);for(Ee=0;Ee<At.length;++Ee){var vt=n(At[Ee][0]);pe=We[vt],pe||(At.push([vt,{name:a(vt).replace("/",""),type:1,clsid:ue,ct:Re,mt:Re,content:null}]),We[vt]=!0)}for(At.sort(function(Oe,ct){return r(Oe[0],ct[0])}),te.FullPaths=[],te.FileIndex=[],Ee=0;Ee<At.length;++Ee)te.FullPaths[Ee]=At[Ee][0],te.FileIndex[Ee]=At[Ee][1];for(Ee=0;Ee<At.length;++Ee){var Vt=te.FileIndex[Ee],or=te.FullPaths[Ee];if(Vt.name=a(or).replace("/",""),Vt.L=Vt.R=Vt.C=-(Vt.color=1),Vt.size=Vt.content?Vt.content.length:0,Vt.start=0,Vt.clsid=Vt.clsid||ue,Ee===0)Vt.C=At.length>1?1:-1,Vt.size=0,Vt.type=5;else if(or.slice(-1)=="/"){for(et=Ee+1;et<At.length&&n(te.FullPaths[et])!=or;++et);for(Vt.C=et>=At.length?-1:et,et=Ee+1;et<At.length&&n(te.FullPaths[et])!=n(or);++et);Vt.R=et>=At.length?-1:et,Vt.type=1}else n(te.FullPaths[Ee+1]||"")==n(or)&&(Vt.R=Ee+1),Vt.type=2}}}function k(te,V){var re=V||{};if(re.fileType=="mad")return ee(te,re);switch(S(te),re.fileType){case"zip":return nt(te,re)}var pe=function(Oe){for(var ct=0,bt=0,Dt=0;Dt<Oe.FileIndex.length;++Dt){var xt=Oe.FileIndex[Dt];if(xt.content){var sr=xt.content.length;sr>0&&(sr<4096?ct+=sr+63>>6:bt+=sr+511>>9)}}for(var Xt=Oe.FullPaths.length+3>>2,Kt=ct+7>>3,ar=ct+127>>7,Ar=Kt+bt+Xt+ar,Gt=Ar+127>>7,_r=Gt<=109?0:Math.ceil((Gt-109)/127);Ar+Gt+_r+127>>7>Gt;)_r=++Gt<=109?0:Math.ceil((Gt-109)/127);var Ir=[1,_r,Gt,ar,Xt,bt,ct,0];return Oe.FileIndex[0].size=ct<<6,Ir[7]=(Oe.FileIndex[0].start=Ir[0]+Ir[1]+Ir[2]+Ir[3]+Ir[4]+Ir[5])+(Ir[6]+7>>3),Ir}(te),Ee=Yt(pe[7]<<9),Se=0,Re=0;{for(Se=0;Se<8;++Se)Ee.write_shift(1,he[Se]);for(Se=0;Se<8;++Se)Ee.write_shift(2,0);for(Ee.write_shift(2,62),Ee.write_shift(2,3),Ee.write_shift(2,65534),Ee.write_shift(2,9),Ee.write_shift(2,6),Se=0;Se<3;++Se)Ee.write_shift(2,0);for(Ee.write_shift(4,0),Ee.write_shift(4,pe[2]),Ee.write_shift(4,pe[0]+pe[1]+pe[2]+pe[3]-1),Ee.write_shift(4,0),Ee.write_shift(4,4096),Ee.write_shift(4,pe[3]?pe[0]+pe[1]+pe[2]-1:F),Ee.write_shift(4,pe[3]),Ee.write_shift(-4,pe[1]?pe[0]-1:F),Ee.write_shift(4,pe[1]),Se=0;Se<109;++Se)Ee.write_shift(-4,Se<pe[2]?pe[1]+Se:-1)}if(pe[1])for(Re=0;Re<pe[1];++Re){for(;Se<236+Re*127;++Se)Ee.write_shift(-4,Se<pe[2]?pe[1]+Se:-1);Ee.write_shift(-4,Re===pe[1]-1?F:Re+1)}var et=function(Oe){for(Re+=Oe;Se<Re-1;++Se)Ee.write_shift(-4,Se+1);Oe&&(++Se,Ee.write_shift(-4,F))};for(Re=Se=0,Re+=pe[1];Se<Re;++Se)Ee.write_shift(-4,fe.DIFSECT);for(Re+=pe[2];Se<Re;++Se)Ee.write_shift(-4,fe.FATSECT);et(pe[3]),et(pe[4]);for(var We=0,At=0,vt=te.FileIndex[0];We<te.FileIndex.length;++We)vt=te.FileIndex[We],vt.content&&(At=vt.content.length,!(At<4096)&&(vt.start=Re,et(At+511>>9)));for(et(pe[6]+7>>3);Ee.l&511;)Ee.write_shift(-4,fe.ENDOFCHAIN);for(Re=Se=0,We=0;We<te.FileIndex.length;++We)vt=te.FileIndex[We],vt.content&&(At=vt.content.length,!(!At||At>=4096)&&(vt.start=Re,et(At+63>>6)));for(;Ee.l&511;)Ee.write_shift(-4,fe.ENDOFCHAIN);for(Se=0;Se<pe[4]<<2;++Se){var Vt=te.FullPaths[Se];if(!Vt||Vt.length===0){for(We=0;We<17;++We)Ee.write_shift(4,0);for(We=0;We<3;++We)Ee.write_shift(4,-1);for(We=0;We<12;++We)Ee.write_shift(4,0);continue}vt=te.FileIndex[Se],Se===0&&(vt.start=vt.size?vt.start-1:F);var or=Se===0&&re.root||vt.name;if(At=2*(or.length+1),Ee.write_shift(64,or,"utf16le"),Ee.write_shift(2,At),Ee.write_shift(1,vt.type),Ee.write_shift(1,vt.color),Ee.write_shift(-4,vt.L),Ee.write_shift(-4,vt.R),Ee.write_shift(-4,vt.C),vt.clsid)Ee.write_shift(16,vt.clsid,"hex");else for(We=0;We<4;++We)Ee.write_shift(4,0);Ee.write_shift(4,vt.state||0),Ee.write_shift(4,0),Ee.write_shift(4,0),Ee.write_shift(4,0),Ee.write_shift(4,0),Ee.write_shift(4,vt.start),Ee.write_shift(4,vt.size),Ee.write_shift(4,0)}for(Se=1;Se<te.FileIndex.length;++Se)if(vt=te.FileIndex[Se],vt.size>=4096)if(Ee.l=vt.start+1<<9,En&&Buffer.isBuffer(vt.content))vt.content.copy(Ee,Ee.l,0,vt.size),Ee.l+=vt.size+511&-512;else{for(We=0;We<vt.size;++We)Ee.write_shift(1,vt.content[We]);for(;We&511;++We)Ee.write_shift(1,0)}for(Se=1;Se<te.FileIndex.length;++Se)if(vt=te.FileIndex[Se],vt.size>0&&vt.size<4096)if(En&&Buffer.isBuffer(vt.content))vt.content.copy(Ee,Ee.l,0,vt.size),Ee.l+=vt.size+63&-64;else{for(We=0;We<vt.size;++We)Ee.write_shift(1,vt.content[We]);for(;We&63;++We)Ee.write_shift(1,0)}if(En)Ee.l=Ee.length;else for(;Ee.l<Ee.length;)Ee.write_shift(1,0);return Ee}function P(te,V){var re=te.FullPaths.map(function(We){return We.toUpperCase()}),pe=re.map(function(We){var At=We.split("/");return At[At.length-(We.slice(-1)=="/"?2:1)]}),Ee=!1;V.charCodeAt(0)===47?(Ee=!0,V=re[0].slice(0,-1)+V):Ee=V.indexOf("/")!==-1;var Se=V.toUpperCase(),Re=Ee===!0?re.indexOf(Se):pe.indexOf(Se);if(Re!==-1)return te.FileIndex[Re];var et=!Se.match(wy);for(Se=Se.replace(Vl,""),et&&(Se=Se.replace(wy,"!")),Re=0;Re<re.length;++Re)if((et?re[Re].replace(wy,"!"):re[Re]).replace(Vl,"")==Se||(et?pe[Re].replace(wy,"!"):pe[Re]).replace(Vl,"")==Se)return te.FileIndex[Re];return null}var T=64,F=-2,Y="d0cf11e0a1b11ae1",he=[208,207,17,224,161,177,26,225],ue="00000000000000000000000000000000",fe={MAXREGSECT:-6,DIFSECT:-4,FATSECT:-3,ENDOFCHAIN:F,FREESECT:-1,HEADER_SIGNATURE:Y,HEADER_MINOR_VERSION:"3e00",MAXREGSID:-6,NOSTREAM:-1,HEADER_CLSID:ue,EntryTypes:["unknown","storage","stream","lockbytes","property","root"]};function me(te,V,re){u();var pe=k(te,re);c.writeFileSync(V,pe)}function ne(te){for(var V=new Array(te.length),re=0;re<te.length;++re)V[re]=String.fromCharCode(te[re]);return V.join("")}function Pe(te,V){var re=k(te,V);switch(V&&V.type||"buffer"){case"file":return u(),c.writeFileSync(V.filename,re),re;case"binary":return typeof re=="string"?re:ne(re);case"base64":return t2(typeof re=="string"?re:ne(re));case"buffer":if(En)return Buffer.isBuffer(re)?re:th(re);case"array":return typeof re=="string"?Uc(re):re}return re}var Ie;function O(te){try{var V=te.InflateRaw,re=new V;if(re._processChunk(new Uint8Array([3,0]),re._finishFlushFlag),re.bytesRead)Ie=te;else throw new Error("zlib does not expose bytesRead")}catch(pe){console.error("cannot use native zlib: "+(pe.message||pe))}}function H(te,V){if(!Ie)return xe(te,V);var re=Ie.InflateRaw,pe=new re,Ee=pe._processChunk(te.slice(te.l),pe._finishFlushFlag);return te.l+=pe.bytesRead,Ee}function R(te){return Ie?Ie.deflateRawSync(te):ve(te)}var M=[16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15],K=[3,4,5,6,7,8,9,10,11,13,15,17,19,23,27,31,35,43,51,59,67,83,99,115,131,163,195,227,258],W=[1,2,3,4,5,7,9,13,17,25,33,49,65,97,129,193,257,385,513,769,1025,1537,2049,3073,4097,6145,8193,12289,16385,24577];function D(te){var V=(te<<1|te<<11)&139536|(te<<5|te<<15)&558144;return(V>>16|V>>8|V)&255}for(var L=typeof Uint8Array<"u",Z=L?new Uint8Array(256):[],ge=0;ge<256;++ge)Z[ge]=D(ge);function U(te,V){var re=Z[te&255];return V<=8?re>>>8-V:(re=re<<8|Z[te>>8&255],V<=16?re>>>16-V:(re=re<<8|Z[te>>16&255],re>>>24-V))}function Ge(te,V){var re=V&7,pe=V>>>3;return(te[pe]|(re<=6?0:te[pe+1]<<8))>>>re&3}function ie(te,V){var re=V&7,pe=V>>>3;return(te[pe]|(re<=5?0:te[pe+1]<<8))>>>re&7}function J(te,V){var re=V&7,pe=V>>>3;return(te[pe]|(re<=4?0:te[pe+1]<<8))>>>re&15}function je(te,V){var re=V&7,pe=V>>>3;return(te[pe]|(re<=3?0:te[pe+1]<<8))>>>re&31}function z(te,V){var re=V&7,pe=V>>>3;return(te[pe]|(re<=1?0:te[pe+1]<<8))>>>re&127}function Ae(te,V,re){var pe=V&7,Ee=V>>>3,Se=(1<<re)-1,Re=te[Ee]>>>pe;return re<8-pe||(Re|=te[Ee+1]<<8-pe,re<16-pe)||(Re|=te[Ee+2]<<16-pe,re<24-pe)||(Re|=te[Ee+3]<<24-pe),Re&Se}function ye(te,V,re){var pe=V&7,Ee=V>>>3;return pe<=5?te[Ee]|=(re&7)<<pe:(te[Ee]|=re<<pe&255,te[Ee+1]=(re&7)>>8-pe),V+3}function Qe(te,V,re){var pe=V&7,Ee=V>>>3;return re=(re&1)<<pe,te[Ee]|=re,V+1}function st(te,V,re){var pe=V&7,Ee=V>>>3;return re<<=pe,te[Ee]|=re&255,re>>>=8,te[Ee+1]=re,V+8}function ut(te,V,re){var pe=V&7,Ee=V>>>3;return re<<=pe,te[Ee]|=re&255,re>>>=8,te[Ee+1]=re&255,te[Ee+2]=re>>>8,V+16}function De(te,V){var re=te.length,pe=2*re>V?2*re:V+5,Ee=0;if(re>=V)return te;if(En){var Se=DV(pe);if(te.copy)te.copy(Se);else for(;Ee<te.length;++Ee)Se[Ee]=te[Ee];return Se}else if(L){var Re=new Uint8Array(pe);if(Re.set)Re.set(te);else for(;Ee<re;++Ee)Re[Ee]=te[Ee];return Re}return te.length=pe,te}function it(te){for(var V=new Array(te),re=0;re<te;++re)V[re]=0;return V}function dt(te,V,re){var pe=1,Ee=0,Se=0,Re=0,et=0,We=te.length,At=L?new Uint16Array(32):it(32);for(Se=0;Se<32;++Se)At[Se]=0;for(Se=We;Se<re;++Se)te[Se]=0;We=te.length;var vt=L?new Uint16Array(We):it(We);for(Se=0;Se<We;++Se)At[Ee=te[Se]]++,pe<Ee&&(pe=Ee),vt[Se]=0;for(At[0]=0,Se=1;Se<=pe;++Se)At[Se+16]=et=et+At[Se-1]<<1;for(Se=0;Se<We;++Se)et=te[Se],et!=0&&(vt[Se]=At[et+16]++);var Vt=0;for(Se=0;Se<We;++Se)if(Vt=te[Se],Vt!=0)for(et=U(vt[Se],pe)>>pe-Vt,Re=(1<<pe+4-Vt)-1;Re>=0;--Re)V[et|Re<<Vt]=Vt&15|Se<<4;return pe}var ce=L?new Uint16Array(512):it(512),oe=L?new Uint16Array(32):it(32);if(!L){for(var Me=0;Me<512;++Me)ce[Me]=0;for(Me=0;Me<32;++Me)oe[Me]=0}(function(){for(var te=[],V=0;V<32;V++)te.push(5);dt(te,oe,32);var re=[];for(V=0;V<=143;V++)re.push(8);for(;V<=255;V++)re.push(9);for(;V<=279;V++)re.push(7);for(;V<=287;V++)re.push(8);dt(re,ce,288)})();var Le=function(){for(var V=L?new Uint8Array(32768):[],re=0,pe=0;re<W.length-1;++re)for(;pe<W[re+1];++pe)V[pe]=re;for(;pe<32768;++pe)V[pe]=29;var Ee=L?new Uint8Array(259):[];for(re=0,pe=0;re<K.length-1;++re)for(;pe<K[re+1];++pe)Ee[pe]=re;function Se(et,We){for(var At=0;At<et.length;){var vt=Math.min(65535,et.length-At),Vt=At+vt==et.length;for(We.write_shift(1,+Vt),We.write_shift(2,vt),We.write_shift(2,~vt&65535);vt-- >0;)We[We.l++]=et[At++]}return We.l}function Re(et,We){for(var At=0,vt=0,Vt=L?new Uint16Array(32768):[];vt<et.length;){var or=Math.min(65535,et.length-vt);if(or<10){for(At=ye(We,At,+(vt+or==et.length)),At&7&&(At+=8-(At&7)),We.l=At/8|0,We.write_shift(2,or),We.write_shift(2,~or&65535);or-- >0;)We[We.l++]=et[vt++];At=We.l*8;continue}At=ye(We,At,+(vt+or==et.length)+2);for(var Oe=0;or-- >0;){var ct=et[vt];Oe=(Oe<<5^ct)&32767;var bt=-1,Dt=0;if((bt=Vt[Oe])&&(bt|=vt&-32768,bt>vt&&(bt-=32768),bt<vt))for(;et[bt+Dt]==et[vt+Dt]&&Dt<250;)++Dt;if(Dt>2){ct=Ee[Dt],ct<=22?At=st(We,At,Z[ct+1]>>1)-1:(st(We,At,3),At+=5,st(We,At,Z[ct-23]>>5),At+=3);var xt=ct<8?0:ct-4>>2;xt>0&&(ut(We,At,Dt-K[ct]),At+=xt),ct=V[vt-bt],At=st(We,At,Z[ct]>>3),At-=3;var sr=ct<4?0:ct-2>>1;sr>0&&(ut(We,At,vt-bt-W[ct]),At+=sr);for(var Xt=0;Xt<Dt;++Xt)Vt[Oe]=vt&32767,Oe=(Oe<<5^et[vt])&32767,++vt;or-=Dt-1}else ct<=143?ct=ct+48:At=Qe(We,At,1),At=st(We,At,Z[ct]),Vt[Oe]=vt&32767,++vt}At=st(We,At,0)-1}return We.l=(At+7)/8|0,We.l}return function(We,At){return We.length<8?Se(We,At):Re(We,At)}}();function ve(te){var V=Yt(50+Math.floor(te.length*1.1)),re=Le(te,V);return V.slice(0,re)}var le=L?new Uint16Array(32768):it(32768),Ue=L?new Uint16Array(32768):it(32768),rt=L?new Uint16Array(128):it(128),mt=1,gt=1;function Ct(te,V){var re=je(te,V)+257;V+=5;var pe=je(te,V)+1;V+=5;var Ee=J(te,V)+4;V+=4;for(var Se=0,Re=L?new Uint8Array(19):it(19),et=[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],We=1,At=L?new Uint8Array(8):it(8),vt=L?new Uint8Array(8):it(8),Vt=Re.length,or=0;or<Ee;++or)Re[M[or]]=Se=ie(te,V),We<Se&&(We=Se),At[Se]++,V+=3;var Oe=0;for(At[0]=0,or=1;or<=We;++or)vt[or]=Oe=Oe+At[or-1]<<1;for(or=0;or<Vt;++or)(Oe=Re[or])!=0&&(et[or]=vt[Oe]++);var ct=0;for(or=0;or<Vt;++or)if(ct=Re[or],ct!=0){Oe=Z[et[or]]>>8-ct;for(var bt=(1<<7-ct)-1;bt>=0;--bt)rt[Oe|bt<<ct]=ct&7|or<<3}var Dt=[];for(We=1;Dt.length<re+pe;)switch(Oe=rt[z(te,V)],V+=Oe&7,Oe>>>=3){case 16:for(Se=3+Ge(te,V),V+=2,Oe=Dt[Dt.length-1];Se-- >0;)Dt.push(Oe);break;case 17:for(Se=3+ie(te,V),V+=3;Se-- >0;)Dt.push(0);break;case 18:for(Se=11+z(te,V),V+=7;Se-- >0;)Dt.push(0);break;default:Dt.push(Oe),We<Oe&&(We=Oe);break}var xt=Dt.slice(0,re),sr=Dt.slice(re);for(or=re;or<286;++or)xt[or]=0;for(or=pe;or<30;++or)sr[or]=0;return mt=dt(xt,le,286),gt=dt(sr,Ue,30),V}function jt(te,V){if(te[0]==3&&!(te[1]&3))return[K0(V),2];for(var re=0,pe=0,Ee=DV(V||1<<18),Se=0,Re=Ee.length>>>0,et=0,We=0;!(pe&1);){if(pe=ie(te,re),re+=3,pe>>>1)pe>>1==1?(et=9,We=5):(re=Ct(te,re),et=mt,We=gt);else{re&7&&(re+=8-(re&7));var At=te[re>>>3]|te[(re>>>3)+1]<<8;if(re+=32,At>0)for(!V&&Re<Se+At&&(Ee=De(Ee,Se+At),Re=Ee.length);At-- >0;)Ee[Se++]=te[re>>>3],re+=8;continue}for(;;){!V&&Re<Se+32767&&(Ee=De(Ee,Se+32767),Re=Ee.length);var vt=Ae(te,re,et),Vt=pe>>>1==1?ce[vt]:le[vt];if(re+=Vt&15,Vt>>>=4,!(Vt>>>8&255))Ee[Se++]=Vt;else{if(Vt==256)break;Vt-=257;var or=Vt<8?0:Vt-4>>2;or>5&&(or=0);var Oe=Se+K[Vt];or>0&&(Oe+=Ae(te,re,or),re+=or),vt=Ae(te,re,We),Vt=pe>>>1==1?oe[vt]:Ue[vt],re+=Vt&15,Vt>>>=4;var ct=Vt<4?0:Vt-2>>1,bt=W[Vt];for(ct>0&&(bt+=Ae(te,re,ct),re+=ct),!V&&Re<Oe&&(Ee=De(Ee,Oe+100),Re=Ee.length);Se<Oe;)Ee[Se]=Ee[Se-bt],++Se}}}return V?[Ee,re+7>>>3]:[Ee.slice(0,Se),re+7>>>3]}function xe(te,V){var re=te.slice(te.l||0),pe=jt(re,V);return te.l+=pe[1],pe[0]}function He(te,V){if(te)typeof console<"u"&&console.error(V);else throw new Error(V)}function Ce(te,V){var re=te;Uo(re,0);var pe=[],Ee=[],Se={FileIndex:pe,FullPaths:Ee};_(Se,{root:V.root});for(var Re=re.length-4;(re[Re]!=80||re[Re+1]!=75||re[Re+2]!=5||re[Re+3]!=6)&&Re>=0;)--Re;re.l=Re+4,re.l+=4;var et=re.read_shift(2);re.l+=6;var We=re.read_shift(4);for(re.l=We,Re=0;Re<et;++Re){re.l+=20;var At=re.read_shift(4),vt=re.read_shift(4),Vt=re.read_shift(2),or=re.read_shift(2),Oe=re.read_shift(2);re.l+=8;var ct=re.read_shift(4),bt=l(re.slice(re.l+Vt,re.l+Vt+or));re.l+=Vt+or+Oe;var Dt=re.l;re.l=ct+4,lt(re,At,vt,Se,bt),re.l=Dt}return Se}function lt(te,V,re,pe,Ee){te.l+=2;var Se=te.read_shift(2),Re=te.read_shift(2),et=i(te);if(Se&8257)throw new Error("Unsupported ZIP encryption");for(var We=te.read_shift(4),At=te.read_shift(4),vt=te.read_shift(4),Vt=te.read_shift(2),or=te.read_shift(2),Oe="",ct=0;ct<Vt;++ct)Oe+=String.fromCharCode(te[te.l++]);if(or){var bt=l(te.slice(te.l,te.l+or));(bt[21589]||{}).mt&&(et=bt[21589].mt),((Ee||{})[21589]||{}).mt&&(et=Ee[21589].mt)}te.l+=or;var Dt=te.slice(te.l,te.l+At);switch(Re){case 8:Dt=H(te,vt);break;case 0:break;default:throw new Error("Unsupported ZIP Compression method "+Re)}var xt=!1;Se&8&&(We=te.read_shift(4),We==134695760&&(We=te.read_shift(4),xt=!0),At=te.read_shift(4),vt=te.read_shift(4)),At!=V&&He(xt,"Bad compressed size: "+V+" != "+At),vt!=re&&He(xt,"Bad uncompressed size: "+re+" != "+vt),_e(pe,Oe,Dt,{unsafe:!0,mt:et})}function nt(te,V){var re=V||{},pe=[],Ee=[],Se=Yt(1),Re=re.compression?8:0,et=0,We=0,At=0,vt=0,Vt=0,or=te.FullPaths[0],Oe=or,ct=te.FileIndex[0],bt=[],Dt=0;for(We=1;We<te.FullPaths.length;++We)if(Oe=te.FullPaths[We].slice(or.length),ct=te.FileIndex[We],!(!ct.size||!ct.content||Oe=="Sh33tJ5")){var xt=vt,sr=Yt(Oe.length);for(At=0;At<Oe.length;++At)sr.write_shift(1,Oe.charCodeAt(At)&127);sr=sr.slice(0,sr.l),bt[Vt]=iBe.buf(ct.content,0);var Xt=ct.content;Re==8&&(Xt=R(Xt)),Se=Yt(30),Se.write_shift(4,67324752),Se.write_shift(2,20),Se.write_shift(2,et),Se.write_shift(2,Re),ct.mt?s(Se,ct.mt):Se.write_shift(4,0),Se.write_shift(-4,bt[Vt]),Se.write_shift(4,Xt.length),Se.write_shift(4,ct.content.length),Se.write_shift(2,sr.length),Se.write_shift(2,0),vt+=Se.length,pe.push(Se),vt+=sr.length,pe.push(sr),vt+=Xt.length,pe.push(Xt),Se=Yt(46),Se.write_shift(4,33639248),Se.write_shift(2,0),Se.write_shift(2,20),Se.write_shift(2,et),Se.write_shift(2,Re),Se.write_shift(4,0),Se.write_shift(-4,bt[Vt]),Se.write_shift(4,Xt.length),Se.write_shift(4,ct.content.length),Se.write_shift(2,sr.length),Se.write_shift(2,0),Se.write_shift(2,0),Se.write_shift(2,0),Se.write_shift(2,0),Se.write_shift(4,0),Se.write_shift(4,xt),Dt+=Se.l,Ee.push(Se),Dt+=sr.length,Ee.push(sr),++Vt}return Se=Yt(22),Se.write_shift(4,101010256),Se.write_shift(2,0),Se.write_shift(2,0),Se.write_shift(2,Vt),Se.write_shift(2,Vt),Se.write_shift(4,Dt),Se.write_shift(4,vt),Se.write_shift(2,0),fo([fo(pe),fo(Ee),Se])}var Xe={htm:"text/html",xml:"text/xml",gif:"image/gif",jpg:"image/jpeg",png:"image/png",mso:"application/x-mso",thmx:"application/vnd.ms-officetheme",sh33tj5:"application/octet-stream"};function It(te,V){if(te.ctype)return te.ctype;var re=te.name||"",pe=re.match(/\.([^\.]+)$/);return pe&&Xe[pe[1]]||V&&(pe=(re=V).match(/[\.\\]([^\.\\])+$/),pe&&Xe[pe[1]])?Xe[pe[1]]:"application/octet-stream"}function $t(te){for(var V=t2(te),re=[],pe=0;pe<V.length;pe+=76)re.push(V.slice(pe,pe+76));return re.join(`\r
`)+`\r
`}function Ke(te){var V=te.replace(/[\x00-\x08\x0B\x0C\x0E-\x1F\x7E-\xFF=]/g,function(At){var vt=At.charCodeAt(0).toString(16).toUpperCase();return"="+(vt.length==1?"0"+vt:vt)});V=V.replace(/ $/mg,"=20").replace(/\t$/mg,"=09"),V.charAt(0)==`
`&&(V="=0D"+V.slice(1)),V=V.replace(/\r(?!\n)/mg,"=0D").replace(/\n\n/mg,`
=0A`).replace(/([^\r\n])\n/mg,"$1=0A");for(var re=[],pe=V.split(`\r
`),Ee=0;Ee<pe.length;++Ee){var Se=pe[Ee];if(Se.length==0){re.push("");continue}for(var Re=0;Re<Se.length;){var et=76,We=Se.slice(Re,Re+et);We.charAt(et-1)=="="?et--:We.charAt(et-2)=="="?et-=2:We.charAt(et-3)=="="&&(et-=3),We=Se.slice(Re,Re+et),Re+=et,Re<Se.length&&(We+="="),re.push(We)}}return re.join(`\r
`)}function wt(te){for(var V=[],re=0;re<te.length;++re){for(var pe=te[re];re<=te.length&&pe.charAt(pe.length-1)=="=";)pe=pe.slice(0,pe.length-1)+te[++re];V.push(pe)}for(var Ee=0;Ee<V.length;++Ee)V[Ee]=V[Ee].replace(/[=][0-9A-Fa-f]{2}/g,function(Se){return String.fromCharCode(parseInt(Se.slice(1),16))});return Uc(V.join(`\r
`))}function q(te,V,re){for(var pe="",Ee="",Se="",Re,et=0;et<10;++et){var We=V[et];if(!We||We.match(/^\s*$/))break;var At=We.match(/^(.*?):\s*([^\s].*)$/);if(At)switch(At[1].toLowerCase()){case"content-location":pe=At[2].trim();break;case"content-type":Se=At[2].trim();break;case"content-transfer-encoding":Ee=At[2].trim();break}}switch(++et,Ee.toLowerCase()){case"base64":Re=Uc(Zc(V.slice(et).join("")));break;case"quoted-printable":Re=wt(V.slice(et));break;default:throw new Error("Unsupported Content-Transfer-Encoding "+Ee)}var vt=_e(te,pe.slice(re.length),Re,{unsafe:!0});Se&&(vt.ctype=Se)}function ae(te,V){if(ne(te.slice(0,13)).toLowerCase()!="mime-version:")throw new Error("Unsupported MAD header");var re=V&&V.root||"",pe=(En&&Buffer.isBuffer(te)?te.toString("binary"):ne(te)).split(`\r
`),Ee=0,Se="";for(Ee=0;Ee<pe.length;++Ee)if(Se=pe[Ee],!!/^Content-Location:/i.test(Se)&&(Se=Se.slice(Se.indexOf("file")),re||(re=Se.slice(0,Se.lastIndexOf("/")+1)),Se.slice(0,re.length)!=re))for(;re.length>0&&(re=re.slice(0,re.length-1),re=re.slice(0,re.lastIndexOf("/")+1),Se.slice(0,re.length)!=re););var Re=(pe[1]||"").match(/boundary="(.*?)"/);if(!Re)throw new Error("MAD cannot find boundary");var et="--"+(Re[1]||""),We=[],At=[],vt={FileIndex:We,FullPaths:At};_(vt);var Vt,or=0;for(Ee=0;Ee<pe.length;++Ee){var Oe=pe[Ee];Oe!==et&&Oe!==et+"--"||(or++&&q(vt,pe.slice(Vt,Ee),re),Vt=Ee)}return vt}function ee(te,V){var re=V||{},pe=re.boundary||"SheetJS";pe="------="+pe;for(var Ee=["MIME-Version: 1.0",'Content-Type: multipart/related; boundary="'+pe.slice(2)+'"',"","",""],Se=te.FullPaths[0],Re=Se,et=te.FileIndex[0],We=1;We<te.FullPaths.length;++We)if(Re=te.FullPaths[We].slice(Se.length),et=te.FileIndex[We],!(!et.size||!et.content||Re=="Sh33tJ5")){Re=Re.replace(/[\x00-\x08\x0B\x0C\x0E-\x1F\x7E-\xFF]/g,function(Dt){return"_x"+Dt.charCodeAt(0).toString(16)+"_"}).replace(/[\u0080-\uFFFF]/g,function(Dt){return"_u"+Dt.charCodeAt(0).toString(16)+"_"});for(var At=et.content,vt=En&&Buffer.isBuffer(At)?At.toString("binary"):ne(At),Vt=0,or=Math.min(1024,vt.length),Oe=0,ct=0;ct<=or;++ct)(Oe=vt.charCodeAt(ct))>=32&&Oe<128&&++Vt;var bt=Vt>=or*4/5;Ee.push(pe),Ee.push("Content-Location: "+(re.root||"file:///C:/SheetJS/")+Re),Ee.push("Content-Transfer-Encoding: "+(bt?"quoted-printable":"base64")),Ee.push("Content-Type: "+It(et,Re)),Ee.push(""),Ee.push(bt?Ke(vt):$t(vt))}return Ee.push(pe+`--\r
`),Ee.join(`\r
`)}function be(te){var V={};return _(V,te),V}function _e(te,V,re,pe){var Ee=pe&&pe.unsafe;Ee||_(te);var Se=!Ee&&Xr.find(te,V);if(!Se){var Re=te.FullPaths[0];V.slice(0,Re.length)==Re?Re=V:(Re.slice(-1)!="/"&&(Re+="/"),Re=(Re+V).replace("//","/")),Se={name:a(V),type:2},te.FileIndex.push(Se),te.FullPaths.push(Re),Ee||Xr.utils.cfb_gc(te)}return Se.content=re,Se.size=re?re.length:0,pe&&(pe.CLSID&&(Se.clsid=pe.CLSID),pe.mt&&(Se.mt=pe.mt),pe.ct&&(Se.ct=pe.ct)),Se}function Be(te,V){_(te);var re=Xr.find(te,V);if(re){for(var pe=0;pe<te.FileIndex.length;++pe)if(te.FileIndex[pe]==re)return te.FileIndex.splice(pe,1),te.FullPaths.splice(pe,1),!0}return!1}function tt(te,V,re){_(te);var pe=Xr.find(te,V);if(pe){for(var Ee=0;Ee<te.FileIndex.length;++Ee)if(te.FileIndex[Ee]==pe)return te.FileIndex[Ee].name=a(re),te.FullPaths[Ee]=re,!0}return!1}function ot(te){S(te,!0)}return e.find=P,e.read=I,e.parse=d,e.write=Pe,e.writeFile=me,e.utils={cfb_new:be,cfb_add:_e,cfb_del:Be,cfb_mov:tt,cfb_gc:ot,ReadShift:eb,CheckField:dre,prep_blob:Uo,bconcat:fo,use_zlib:O,_deflateRaw:ve,_inflateRaw:xe,consts:fe},e}();function oBe(t){return typeof t=="string"?_4(t):Array.isArray(t)?k5e(t):t}function ow(t,e,r){if(typeof Deno<"u"){if(r&&typeof e=="string")switch(r){case"utf8":e=new TextEncoder(r).encode(e);break;case"binary":e=_4(e);break;default:throw new Error("Unsupported encoding "+r)}return Deno.writeFileSync(t,e)}var n=r=="utf8"?xf(e):e;if(typeof IE_SaveFile<"u")return IE_SaveFile(n,t);if(typeof Blob<"u"){var a=new Blob([oBe(n)],{type:"application/octet-stream"});if(typeof navigator<"u"&&navigator.msSaveBlob)return navigator.msSaveBlob(a,t);if(typeof saveAs<"u")return saveAs(a,t);if(typeof URL<"u"&&typeof document<"u"&&document.createElement&&URL.createObjectURL){var s=URL.createObjectURL(a);if(typeof chrome=="object"&&typeof(chrome.downloads||{}).download=="function")return URL.revokeObjectURL&&typeof setTimeout<"u"&&setTimeout(function(){URL.revokeObjectURL(s)},6e4),chrome.downloads.download({url:s,filename:t,saveAs:!0});var i=document.createElement("a");if(i.download!=null)return i.download=t,i.href=s,document.body.appendChild(i),i.click(),document.body.removeChild(i),URL.revokeObjectURL&&typeof setTimeout<"u"&&setTimeout(function(){URL.revokeObjectURL(s)},6e4),s}}if(typeof $<"u"&&typeof File<"u"&&typeof Folder<"u")try{var l=File(t);return l.open("w"),l.encoding="binary",Array.isArray(e)&&(e=am(e)),l.write(e),l.close(),e}catch(c){if(!c.message||!c.message.match(/onstruct/))throw c}throw new Error("cannot save file "+t)}function lBe(t){if(typeof Deno<"u")return Deno.readFileSync(t);if(typeof $<"u"&&typeof File<"u"&&typeof Folder<"u")try{var e=File(t);e.open("r"),e.encoding="binary";var r=e.read();return e.close(),r}catch(n){if(!n.message||!n.message.match(/onstruct/))throw n}throw new Error("Cannot access file "+t)}function zs(t){for(var e=Object.keys(t),r=[],n=0;n<e.length;++n)Object.prototype.hasOwnProperty.call(t,e[n])&&r.push(e[n]);return r}function $V(t,e){for(var r=[],n=zs(t),a=0;a!==n.length;++a)r[t[n[a]][e]]==null&&(r[t[n[a]][e]]=n[a]);return r}function S4(t){for(var e=[],r=zs(t),n=0;n!==r.length;++n)e[t[r[n]]]=r[n];return e}function I4(t){for(var e=[],r=zs(t),n=0;n!==r.length;++n)e[t[r[n]]]=parseInt(r[n],10);return e}function cBe(t){for(var e=[],r=zs(t),n=0;n!==r.length;++n)e[t[r[n]]]==null&&(e[t[r[n]]]=[]),e[t[r[n]]].push(r[n]);return e}var AS=new Date(1899,11,30,0,0,0);function Gi(t,e){var r=t.getTime(),n=AS.getTime()+(t.getTimezoneOffset()-AS.getTimezoneOffset())*6e4;return(r-n)/(24*60*60*1e3)}var $te=new Date,uBe=AS.getTime()+($te.getTimezoneOffset()-AS.getTimezoneOffset())*6e4,KV=$te.getTimezoneOffset();function j4(t){var e=new Date;return e.setTime(t*24*60*60*1e3+uBe),e.getTimezoneOffset()!==KV&&e.setTime(e.getTime()+(e.getTimezoneOffset()-KV)*6e4),e}function dBe(t){var e=0,r=0,n=!1,a=t.match(/P([0-9\.]+Y)?([0-9\.]+M)?([0-9\.]+D)?T([0-9\.]+H)?([0-9\.]+M)?([0-9\.]+S)?/);if(!a)throw new Error("|"+t+"| is not an ISO8601 Duration");for(var s=1;s!=a.length;++s)if(a[s]){switch(r=1,s>3&&(n=!0),a[s].slice(a[s].length-1)){case"Y":throw new Error("Unsupported ISO Duration Field: "+a[s].slice(a[s].length-1));case"D":r*=24;case"H":r*=60;case"M":if(n)r*=60;else throw new Error("Unsupported ISO Duration Field: M")}e+=r*parseInt(a[s],10)}return e}var GV=new Date("2017-02-19T19:06:09.000Z"),Kte=isNaN(GV.getFullYear())?new Date("2/19/17"):GV,fBe=Kte.getFullYear()==2017;function as(t,e){var r=new Date(t);if(fBe)return e>0?r.setTime(r.getTime()+r.getTimezoneOffset()*60*1e3):e<0&&r.setTime(r.getTime()-r.getTimezoneOffset()*60*1e3),r;if(t instanceof Date)return t;if(Kte.getFullYear()==1917&&!isNaN(r.getFullYear())){var n=r.getFullYear();return t.indexOf(""+n)>-1||r.setFullYear(r.getFullYear()+100),r}var a=t.match(/\d+/g)||["2017","2","19","0","0","0"],s=new Date(+a[0],+a[1]-1,+a[2],+a[3]||0,+a[4]||0,+a[5]||0);return t.indexOf("Z")>-1&&(s=new Date(s.getTime()-s.getTimezoneOffset()*60*1e3)),s}function Fp(t,e){if(En&&Buffer.isBuffer(t)){if(e){if(t[0]==255&&t[1]==254)return xf(t.slice(2).toString("utf16le"));if(t[1]==254&&t[2]==255)return xf(Tte(t.slice(2).toString("binary")))}return t.toString("binary")}if(typeof TextDecoder<"u")try{if(e){if(t[0]==255&&t[1]==254)return xf(new TextDecoder("utf-16le").decode(t.slice(2)));if(t[0]==254&&t[1]==255)return xf(new TextDecoder("utf-16be").decode(t.slice(2)))}var r={"":"","":"",:"","":"","":"","":"","":"","":"","":"",:"","":"",:"",:"","":"","":"","":"","":"","":"","":"","":"","":"","":"",:"","":"",:"",:"",:""};return Array.isArray(t)&&(t=new Uint8Array(t)),new TextDecoder("latin1").decode(t).replace(/[]/g,function(s){return r[s]||s})}catch{}for(var n=[],a=0;a!=t.length;++a)n.push(String.fromCharCode(t[a]));return n.join("")}function ss(t){if(typeof JSON<"u"&&!Array.isArray(t))return JSON.parse(JSON.stringify(t));if(typeof t!="object"||t==null)return t;if(t instanceof Date)return new Date(t.getTime());var e={};for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&(e[r]=ss(t[r]));return e}function Ks(t,e){for(var r="";r.length<e;)r+=t;return r}function Id(t){var e=Number(t);if(!isNaN(e))return isFinite(e)?e:NaN;if(!/\d/.test(t))return e;var r=1,n=t.replace(/([\d]),([\d])/g,"$1$2").replace(/[$]/g,"").replace(/[%]/g,function(){return r*=100,""});return!isNaN(e=Number(n))||(n=n.replace(/[(](.*)[)]/,function(a,s){return r=-r,s}),!isNaN(e=Number(n)))?e/r:e}var ABe=["january","february","march","april","may","june","july","august","september","october","november","december"];function uv(t){var e=new Date(t),r=new Date(NaN),n=e.getYear(),a=e.getMonth(),s=e.getDate();if(isNaN(s))return r;var i=t.toLowerCase();if(i.match(/jan|feb|mar|apr|may|jun|jul|aug|sep|oct|nov|dec/)){if(i=i.replace(/[^a-z]/g,"").replace(/([^a-z]|^)[ap]m?([^a-z]|$)/,""),i.length>3&&ABe.indexOf(i)==-1)return r}else if(i.match(/[a-z]/))return r;return n<0||n>8099?r:(a>0||s>1)&&n!=101?e:t.match(/[^-0-9:,\/\\]/)?r:e}var hBe=function(){var t="abacaba".split(/(:?b)/i).length==5;return function(r,n,a){if(t||typeof n=="string")return r.split(n);for(var s=r.split(n),i=[s[0]],l=1;l<s.length;++l)i.push(a),i.push(s[l]);return i}}();function Gte(t){return t?t.content&&t.type?Fp(t.content,!0):t.data?by(t.data):t.asNodeBuffer&&En?by(t.asNodeBuffer().toString("binary")):t.asBinary?by(t.asBinary()):t._data&&t._data.getContent?by(Fp(Array.prototype.slice.call(t._data.getContent(),0))):null:null}function qte(t){if(!t)return null;if(t.data)return FV(t.data);if(t.asNodeBuffer&&En)return t.asNodeBuffer();if(t._data&&t._data.getContent){var e=t._data.getContent();return typeof e=="string"?FV(e):Array.prototype.slice.call(e)}return t.content&&t.type?t.content:null}function mBe(t){return t&&t.name.slice(-4)===".bin"?qte(t):Gte(t)}function ju(t,e){for(var r=t.FullPaths||zs(t.files),n=e.toLowerCase().replace(/[\/]/g,"\\"),a=n.replace(/\\/g,"/"),s=0;s<r.length;++s){var i=r[s].replace(/^Root Entry[\/]/,"").toLowerCase();if(n==i||a==i)return t.files?t.files[r[s]]:t.FileIndex[s]}return null}function J6(t,e){var r=ju(t,e);if(r==null)throw new Error("Cannot find file "+e+" in zip");return r}function pi(t,e,r){if(!r)return mBe(J6(t,e));if(!e)return null;try{return pi(t,e)}catch{return null}}function Qc(t,e,r){if(!r)return Gte(J6(t,e));if(!e)return null;try{return Qc(t,e)}catch{return null}}function pBe(t,e,r){return qte(J6(t,e))}function qV(t){for(var e=t.FullPaths||zs(t.files),r=[],n=0;n<e.length;++n)e[n].slice(-1)!="/"&&r.push(e[n].replace(/^Root Entry[\/]/,""));return r.sort()}function Nn(t,e,r){if(t.FullPaths){if(typeof r=="string"){var n;return En?n=th(r):n=F5e(r),Xr.utils.cfb_add(t,e,n)}Xr.utils.cfb_add(t,e,r)}else t.file(e,r)}function Z6(){return Xr.utils.cfb_new()}function zte(t,e){switch(e.type){case"base64":return Xr.read(t,{type:"base64"});case"binary":return Xr.read(t,{type:"binary"});case"buffer":case"array":return Xr.read(t,{type:"buffer"})}throw new Error("Unrecognized type "+e.type)}function Ny(t,e){if(t.charAt(0)=="/")return t.slice(1);var r=e.split("/");e.slice(-1)!="/"&&r.pop();for(var n=t.split("/");n.length!==0;){var a=n.shift();a===".."?r.pop():a!=="."&&r.push(a)}return r.join("/")}var Ai=`<?xml version="1.0" encoding="UTF-8" standalone="yes"?>\r
`,gBe=/([^"\s?>\/]+)\s*=\s*((?:")([^"]*)(?:")|(?:')([^']*)(?:')|([^'">\s]+))/g,zV=/<[\/\?]?[a-zA-Z0-9:_-]+(?:\s+[^"\s?>\/]+\s*=\s*(?:"[^"]*"|'[^']*'|[^'">\s=]+))*\s*[\/\?]?>/mg,xBe=/<[^>]*>/g,wl=Ai.match(zV)?zV:xBe,vBe=/<\w*:/,yBe=/<(\/?)\w+:/;function ln(t,e,r){for(var n={},a=0,s=0;a!==t.length&&!((s=t.charCodeAt(a))===32||s===10||s===13);++a);if(e||(n[0]=t.slice(0,a)),a===t.length)return n;var i=t.match(gBe),l=0,c="",u=0,d="",f="",h=1;if(i)for(u=0;u!=i.length;++u){for(f=i[u],s=0;s!=f.length&&f.charCodeAt(s)!==61;++s);for(d=f.slice(0,s).trim();f.charCodeAt(s+1)==32;)++s;for(h=(a=f.charCodeAt(s+1))==34||a==39?1:0,c=f.slice(s+1+h,f.length-h),l=0;l!=d.length&&d.charCodeAt(l)!==58;++l);if(l===d.length)d.indexOf("_")>0&&(d=d.slice(0,d.indexOf("_"))),n[d]=c,n[d.toLowerCase()]=c;else{var A=(l===5&&d.slice(0,5)==="xmlns"?"xmlns":"")+d.slice(l+1);if(n[A]&&d.slice(l-3,l)=="ext")continue;n[A]=c,n[A.toLowerCase()]=c}}return n}function Df(t){return t.replace(yBe,"<$1")}var Wte={"&quot;":'"',"&apos;":"'","&gt;":">","&lt;":"<","&amp;":"&"},eD=S4(Wte),Wn=function(){var t=/&(?:quot|apos|gt|lt|amp|#x?([\da-fA-F]+));/ig,e=/_x([\da-fA-F]{4})_/ig;return function r(n){var a=n+"",s=a.indexOf("<![CDATA[");if(s==-1)return a.replace(t,function(l,c){return Wte[l]||String.fromCharCode(parseInt(c,l.indexOf("x")>-1?16:10))||l}).replace(e,function(l,c){return String.fromCharCode(parseInt(c,16))});var i=a.indexOf("]]>");return r(a.slice(0,s))+a.slice(s+9,i)+r(a.slice(i+3))}}(),tD=/[&<>'"]/g,bBe=/[\u0000-\u0008\u000b-\u001f]/g;function Ca(t){var e=t+"";return e.replace(tD,function(r){return eD[r]}).replace(bBe,function(r){return"_x"+("000"+r.charCodeAt(0).toString(16)).slice(-4)+"_"})}function WV(t){return Ca(t).replace(/ /g,"_x0020_")}var Xte=/[\u0000-\u001f]/g;function rD(t){var e=t+"";return e.replace(tD,function(r){return eD[r]}).replace(/\n/g,"<br/>").replace(Xte,function(r){return"&#x"+("000"+r.charCodeAt(0).toString(16)).slice(-4)+";"})}function wBe(t){var e=t+"";return e.replace(tD,function(r){return eD[r]}).replace(Xte,function(r){return"&#x"+r.charCodeAt(0).toString(16).toUpperCase()+";"})}var XV=function(){var t=/&#(\d+);/g;function e(r,n){return String.fromCharCode(parseInt(n,10))}return function(n){return n.replace(t,e)}}();function NBe(t){return t.replace(/(\r\n|[\r\n])/g,"&#10;")}function es(t){switch(t){case 1:case!0:case"1":case"true":case"TRUE":return!0;default:return!1}}function z5(t){for(var e="",r=0,n=0,a=0,s=0,i=0,l=0;r<t.length;){if(n=t.charCodeAt(r++),n<128){e+=String.fromCharCode(n);continue}if(a=t.charCodeAt(r++),n>191&&n<224){i=(n&31)<<6,i|=a&63,e+=String.fromCharCode(i);continue}if(s=t.charCodeAt(r++),n<240){e+=String.fromCharCode((n&15)<<12|(a&63)<<6|s&63);continue}i=t.charCodeAt(r++),l=((n&7)<<18|(a&63)<<12|(s&63)<<6|i&63)-65536,e+=String.fromCharCode(55296+(l>>>10&1023)),e+=String.fromCharCode(56320+(l&1023))}return e}function YV(t){var e=K0(2*t.length),r,n,a=1,s=0,i=0,l;for(n=0;n<t.length;n+=a)a=1,(l=t.charCodeAt(n))<128?r=l:l<224?(r=(l&31)*64+(t.charCodeAt(n+1)&63),a=2):l<240?(r=(l&15)*4096+(t.charCodeAt(n+1)&63)*64+(t.charCodeAt(n+2)&63),a=3):(a=4,r=(l&7)*262144+(t.charCodeAt(n+1)&63)*4096+(t.charCodeAt(n+2)&63)*64+(t.charCodeAt(n+3)&63),r-=65536,i=55296+(r>>>10&1023),r=56320+(r&1023)),i!==0&&(e[s++]=i&255,e[s++]=i>>>8,i=0),e[s++]=r%256,e[s++]=r>>>8;return e.slice(0,s).toString("ucs2")}function JV(t){return th(t,"binary").toString("utf8")}var NC="foo bar baz",Ba=En&&(JV(NC)==z5(NC)&&JV||YV(NC)==z5(NC)&&YV)||z5,xf=En?function(t){return th(t,"utf8").toString("binary")}:function(t){for(var e=[],r=0,n=0,a=0;r<t.length;)switch(n=t.charCodeAt(r++),!0){case n<128:e.push(String.fromCharCode(n));break;case n<2048:e.push(String.fromCharCode(192+(n>>6))),e.push(String.fromCharCode(128+(n&63)));break;case(n>=55296&&n<57344):n-=55296,a=t.charCodeAt(r++)-56320+(n<<10),e.push(String.fromCharCode(240+(a>>18&7))),e.push(String.fromCharCode(144+(a>>12&63))),e.push(String.fromCharCode(128+(a>>6&63))),e.push(String.fromCharCode(128+(a&63)));break;default:e.push(String.fromCharCode(224+(n>>12))),e.push(String.fromCharCode(128+(n>>6&63))),e.push(String.fromCharCode(128+(n&63)))}return e.join("")},n2=function(){var t={};return function(r,n){var a=r+"|"+(n||"");return t[a]?t[a]:t[a]=new RegExp("<(?:\\w+:)?"+r+'(?: xml:space="preserve")?(?:[^>]*)>([\\s\\S]*?)</(?:\\w+:)?'+r+">",n||"")}}(),Yte=function(){var t=[["nbsp"," "],["middot",""],["quot",'"'],["apos","'"],["gt",">"],["lt","<"],["amp","&"]].map(function(e){return[new RegExp("&"+e[0]+";","ig"),e[1]]});return function(r){for(var n=r.replace(/^[\t\n\r ]+/,"").replace(/[\t\n\r ]+$/,"").replace(/>\s+/g,">").replace(/\s+</g,"<").replace(/[\t\n\r ]+/g," ").replace(/<\s*[bB][rR]\s*\/?>/g,`
`).replace(/<[^>]*>/g,""),a=0;a<t.length;++a)n=n.replace(t[a][0],t[a][1]);return n}}(),CBe=function(){var t={};return function(r){return t[r]!==void 0?t[r]:t[r]=new RegExp("<(?:vt:)?"+r+">([\\s\\S]*?)</(?:vt:)?"+r+">","g")}}(),_Be=/<\/?(?:vt:)?variant>/g,EBe=/<(?:vt:)([^>]*)>([\s\S]*)</;function ZV(t,e){var r=ln(t),n=t.match(CBe(r.baseType))||[],a=[];if(n.length!=r.size){if(e.WTF)throw new Error("unexpected vector length "+n.length+" != "+r.size);return a}return n.forEach(function(s){var i=s.replace(_Be,"").match(EBe);i&&a.push({v:Ba(i[2]),t:i[1]})}),a}var Jte=/(^\s|\s$|\n)/;function Vo(t,e){return"<"+t+(e.match(Jte)?' xml:space="preserve"':"")+">"+e+"</"+t+">"}function a2(t){return zs(t).map(function(e){return" "+e+'="'+t[e]+'"'}).join("")}function br(t,e,r){return"<"+t+(r!=null?a2(r):"")+(e!=null?(e.match(Jte)?' xml:space="preserve"':"")+">"+e+"</"+t:"/")+">"}function sk(t,e){try{return t.toISOString().replace(/\.\d*/,"")}catch(r){if(e)throw r}return""}function SBe(t,e){switch(typeof t){case"string":var r=br("vt:lpwstr",Ca(t));return r=r.replace(/&quot;/g,"_x0022_"),r;case"number":return br((t|0)==t?"vt:i4":"vt:r8",Ca(String(t)));case"boolean":return br("vt:bool",t?"true":"false")}if(t instanceof Date)return br("vt:filetime",sk(t));throw new Error("Unable to serialize "+t)}function nD(t){if(En&&Buffer.isBuffer(t))return t.toString("utf8");if(typeof t=="string")return t;if(typeof Uint8Array<"u"&&t instanceof Uint8Array)return Ba(am(W6(t)));throw new Error("Bad input format: expected Buffer or string")}var s2=/<(\/?)([^\s?><!\/:]*:|)([^\s?<>:\/]+)(?:[\s?:\/][^>]*)?>/mg,Qi={CORE_PROPS:"http://schemas.openxmlformats.org/package/2006/metadata/core-properties",CUST_PROPS:"http://schemas.openxmlformats.org/officeDocument/2006/custom-properties",EXT_PROPS:"http://schemas.openxmlformats.org/officeDocument/2006/extended-properties",CT:"http://schemas.openxmlformats.org/package/2006/content-types",RELS:"http://schemas.openxmlformats.org/package/2006/relationships",TCMNT:"http://schemas.microsoft.com/office/spreadsheetml/2018/threadedcomments",dc:"http://purl.org/dc/elements/1.1/",dcterms:"http://purl.org/dc/terms/",dcmitype:"http://purl.org/dc/dcmitype/",r:"http://schemas.openxmlformats.org/officeDocument/2006/relationships",vt:"http://schemas.openxmlformats.org/officeDocument/2006/docPropsVTypes",xsi:"http://www.w3.org/2001/XMLSchema-instance",xsd:"http://www.w3.org/2001/XMLSchema"},sg=["http://schemas.openxmlformats.org/spreadsheetml/2006/main","http://purl.oclc.org/ooxml/spreadsheetml/main","http://schemas.microsoft.com/office/excel/2006/main","http://schemas.microsoft.com/office/excel/2006/2"],Mc={o:"urn:schemas-microsoft-com:office:office",x:"urn:schemas-microsoft-com:office:excel",ss:"urn:schemas-microsoft-com:office:spreadsheet",dt:"uuid:C2F41010-65B3-11d1-A29F-00AA00C14882",mv:"http://macVmlSchemaUri",v:"urn:schemas-microsoft-com:vml",html:"http://www.w3.org/TR/REC-html40"};function IBe(t,e){for(var r=1-2*(t[e+7]>>>7),n=((t[e+7]&127)<<4)+(t[e+6]>>>4&15),a=t[e+6]&15,s=5;s>=0;--s)a=a*256+t[e+s];return n==2047?a==0?r*(1/0):NaN:(n==0?n=-1022:(n-=1023,a+=Math.pow(2,52)),r*Math.pow(2,n-52)*a)}function jBe(t,e,r){var n=(e<0||1/e==-1/0?1:0)<<7,a=0,s=0,i=n?-e:e;isFinite(i)?i==0?a=s=0:(a=Math.floor(Math.log(i)/Math.LN2),s=i*Math.pow(2,52-a),a<=-1023&&(!isFinite(s)||s<Math.pow(2,52))?a=-1022:(s-=Math.pow(2,52),a+=1023)):(a=2047,s=isNaN(e)?26985:0);for(var l=0;l<=5;++l,s/=256)t[r+l]=s&255;t[r+6]=(a&15)<<4|s&15,t[r+7]=a>>4|n}var eH=function(t){for(var e=[],r=10240,n=0;n<t[0].length;++n)if(t[0][n])for(var a=0,s=t[0][n].length;a<s;a+=r)e.push.apply(e,t[0][n].slice(a,a+r));return e},tH=En?function(t){return t[0].length>0&&Buffer.isBuffer(t[0][0])?Buffer.concat(t[0].map(function(e){return Buffer.isBuffer(e)?e:th(e)})):eH(t)}:eH,rH=function(t,e,r){for(var n=[],a=e;a<r;a+=2)n.push(String.fromCharCode(gA(t,a)));return n.join("").replace(Vl,"")},aD=En?function(t,e,r){return Buffer.isBuffer(t)?t.toString("utf16le",e,r).replace(Vl,""):rH(t,e,r)}:rH,nH=function(t,e,r){for(var n=[],a=e;a<e+r;++a)n.push(("0"+t[a].toString(16)).slice(-2));return n.join("")},Zte=En?function(t,e,r){return Buffer.isBuffer(t)?t.toString("hex",e,e+r):nH(t,e,r)}:nH,aH=function(t,e,r){for(var n=[],a=e;a<r;a++)n.push(String.fromCharCode(sx(t,a)));return n.join("")},lw=En?function(e,r,n){return Buffer.isBuffer(e)?e.toString("utf8",r,n):aH(e,r,n)}:aH,ere=function(t,e){var r=Lc(t,e);return r>0?lw(t,e+4,e+4+r-1):""},tre=ere,rre=function(t,e){var r=Lc(t,e);return r>0?lw(t,e+4,e+4+r-1):""},nre=rre,are=function(t,e){var r=2*Lc(t,e);return r>0?lw(t,e+4,e+4+r-1):""},sre=are,ire=function(e,r){var n=Lc(e,r);return n>0?aD(e,r+4,r+4+n):""},ore=ire,lre=function(t,e){var r=Lc(t,e);return r>0?lw(t,e+4,e+4+r):""},cre=lre,ure=function(t,e){return IBe(t,e)},hS=ure,sD=function(e){return Array.isArray(e)||typeof Uint8Array<"u"&&e instanceof Uint8Array};En&&(tre=function(e,r){if(!Buffer.isBuffer(e))return ere(e,r);var n=e.readUInt32LE(r);return n>0?e.toString("utf8",r+4,r+4+n-1):""},nre=function(e,r){if(!Buffer.isBuffer(e))return rre(e,r);var n=e.readUInt32LE(r);return n>0?e.toString("utf8",r+4,r+4+n-1):""},sre=function(e,r){if(!Buffer.isBuffer(e))return are(e,r);var n=2*e.readUInt32LE(r);return e.toString("utf16le",r+4,r+4+n-1)},ore=function(e,r){if(!Buffer.isBuffer(e))return ire(e,r);var n=e.readUInt32LE(r);return e.toString("utf16le",r+4,r+4+n)},cre=function(e,r){if(!Buffer.isBuffer(e))return lre(e,r);var n=e.readUInt32LE(r);return e.toString("utf8",r+4,r+4+n)},hS=function(e,r){return Buffer.isBuffer(e)?e.readDoubleLE(r):ure(e,r)},sD=function(e){return Buffer.isBuffer(e)||Array.isArray(e)||typeof Uint8Array<"u"&&e instanceof Uint8Array});var sx=function(t,e){return t[e]},gA=function(t,e){return t[e+1]*256+t[e]},BBe=function(t,e){var r=t[e+1]*256+t[e];return r<32768?r:(65535-r+1)*-1},Lc=function(t,e){return t[e+3]*(1<<24)+(t[e+2]<<16)+(t[e+1]<<8)+t[e]},Qm=function(t,e){return t[e+3]<<24|t[e+2]<<16|t[e+1]<<8|t[e]},PBe=function(t,e){return t[e]<<24|t[e+1]<<16|t[e+2]<<8|t[e+3]};function eb(t,e){var r="",n,a,s=[],i,l,c,u;switch(e){case"dbcs":if(u=this.l,En&&Buffer.isBuffer(this))r=this.slice(this.l,this.l+2*t).toString("utf16le");else for(c=0;c<t;++c)r+=String.fromCharCode(gA(this,u)),u+=2;t*=2;break;case"utf8":r=lw(this,this.l,this.l+t);break;case"utf16le":t*=2,r=aD(this,this.l,this.l+t);break;case"wstr":return eb.call(this,t,"dbcs");case"lpstr-ansi":r=tre(this,this.l),t=4+Lc(this,this.l);break;case"lpstr-cp":r=nre(this,this.l),t=4+Lc(this,this.l);break;case"lpwstr":r=sre(this,this.l),t=4+2*Lc(this,this.l);break;case"lpp4":t=4+Lc(this,this.l),r=ore(this,this.l),t&2&&(t+=2);break;case"8lpp4":t=4+Lc(this,this.l),r=cre(this,this.l),t&3&&(t+=4-(t&3));break;case"cstr":for(t=0,r="";(i=sx(this,this.l+t++))!==0;)s.push(wC(i));r=s.join("");break;case"_wstr":for(t=0,r="";(i=gA(this,this.l+t))!==0;)s.push(wC(i)),t+=2;t+=2,r=s.join("");break;case"dbcs-cont":for(r="",u=this.l,c=0;c<t;++c){if(this.lens&&this.lens.indexOf(u)!==-1)return i=sx(this,u),this.l=u+1,l=eb.call(this,t-c,i?"dbcs-cont":"sbcs-cont"),s.join("")+l;s.push(wC(gA(this,u))),u+=2}r=s.join(""),t*=2;break;case"cpstr":case"sbcs-cont":for(r="",u=this.l,c=0;c!=t;++c){if(this.lens&&this.lens.indexOf(u)!==-1)return i=sx(this,u),this.l=u+1,l=eb.call(this,t-c,i?"dbcs-cont":"sbcs-cont"),s.join("")+l;s.push(wC(sx(this,u))),u+=1}r=s.join("");break;default:switch(t){case 1:return n=sx(this,this.l),this.l++,n;case 2:return n=(e==="i"?BBe:gA)(this,this.l),this.l+=2,n;case 4:case-4:return e==="i"||!(this[this.l+3]&128)?(n=(t>0?Qm:PBe)(this,this.l),this.l+=4,n):(a=Lc(this,this.l),this.l+=4,a);case 8:case-8:if(e==="f")return t==8?a=hS(this,this.l):a=hS([this[this.l+7],this[this.l+6],this[this.l+5],this[this.l+4],this[this.l+3],this[this.l+2],this[this.l+1],this[this.l+0]],0),this.l+=8,a;t=8;case 16:r=Zte(this,this.l,t);break}}return this.l+=t,r}var TBe=function(t,e,r){t[r]=e&255,t[r+1]=e>>>8&255,t[r+2]=e>>>16&255,t[r+3]=e>>>24&255},kBe=function(t,e,r){t[r]=e&255,t[r+1]=e>>8&255,t[r+2]=e>>16&255,t[r+3]=e>>24&255},FBe=function(t,e,r){t[r]=e&255,t[r+1]=e>>>8&255};function OBe(t,e,r){var n=0,a=0;if(r==="dbcs"){for(a=0;a!=e.length;++a)FBe(this,e.charCodeAt(a),this.l+2*a);n=2*e.length}else if(r==="sbcs"){for(e=e.replace(/[^\x00-\x7F]/g,"_"),a=0;a!=e.length;++a)this[this.l+a]=e.charCodeAt(a)&255;n=e.length}else if(r==="hex"){for(;a<t;++a)this[this.l++]=parseInt(e.slice(2*a,2*a+2),16)||0;return this}else if(r==="utf16le"){var s=Math.min(this.l+t,this.length);for(a=0;a<Math.min(e.length,t);++a){var i=e.charCodeAt(a);this[this.l++]=i&255,this[this.l++]=i>>8}for(;this.l<s;)this[this.l++]=0;return this}else switch(t){case 1:n=1,this[this.l]=e&255;break;case 2:n=2,this[this.l]=e&255,e>>>=8,this[this.l+1]=e&255;break;case 3:n=3,this[this.l]=e&255,e>>>=8,this[this.l+1]=e&255,e>>>=8,this[this.l+2]=e&255;break;case 4:n=4,TBe(this,e,this.l);break;case 8:if(n=8,r==="f"){jBe(this,e,this.l);break}case 16:break;case-4:n=4,kBe(this,e,this.l);break}return this.l+=n,this}function dre(t,e){var r=Zte(this,this.l,t.length>>1);if(r!==t)throw new Error(e+"Expected "+t+" saw "+r);this.l+=t.length>>1}function Uo(t,e){t.l=e,t.read_shift=eb,t.chk=dre,t.write_shift=OBe}function yl(t,e){t.l+=e}function Yt(t){var e=K0(t);return Uo(e,0),e}function rh(t,e,r){if(t){var n,a,s;Uo(t,t.l||0);for(var i=t.length,l=0,c=0;t.l<i;){l=t.read_shift(1),l&128&&(l=(l&127)+((t.read_shift(1)&127)<<7));var u=d2[l]||d2[65535];for(n=t.read_shift(1),s=n&127,a=1;a<4&&n&128;++a)s+=((n=t.read_shift(1))&127)<<7*a;c=t.l+s;var d=u.f&&u.f(t,s,r);if(t.l=c,e(d,u,l))return}}}function hc(){var t=[],e=En?256:2048,r=function(u){var d=Yt(u);return Uo(d,0),d},n=r(e),a=function(){n&&(n.length>n.l&&(n=n.slice(0,n.l),n.l=n.length),n.length>0&&t.push(n),n=null)},s=function(u){return n&&u<n.length-n.l?n:(a(),n=r(Math.max(u+1,e)))},i=function(){return a(),fo(t)},l=function(u){a(),n=u,n.l==null&&(n.l=n.length),s(e)};return{next:s,push:l,end:i,_bufs:t}}function ur(t,e,r,n){var a=+e,s;if(!isNaN(a)){n||(n=d2[a].p||(r||[]).length||0),s=1+(a>=128?1:0)+1,n>=128&&++s,n>=16384&&++s,n>=2097152&&++s;var i=t.next(s);a<=127?i.write_shift(1,a):(i.write_shift(1,(a&127)+128),i.write_shift(1,a>>7));for(var l=0;l!=4;++l)if(n>=128)i.write_shift(1,(n&127)+128),n>>=7;else{i.write_shift(1,n);break}n>0&&sD(r)&&t.push(r)}}function tb(t,e,r){var n=ss(t);if(e.s?(n.cRel&&(n.c+=e.s.c),n.rRel&&(n.r+=e.s.r)):(n.cRel&&(n.c+=e.c),n.rRel&&(n.r+=e.r)),!r||r.biff<12){for(;n.c>=256;)n.c-=256;for(;n.r>=65536;)n.r-=65536}return n}function sH(t,e,r){var n=ss(t);return n.s=tb(n.s,e.s,r),n.e=tb(n.e,e.s,r),n}function rb(t,e){if(t.cRel&&t.c<0)for(t=ss(t);t.c<0;)t.c+=e>8?16384:256;if(t.rRel&&t.r<0)for(t=ss(t);t.r<0;)t.r+=e>8?1048576:e>5?65536:16384;var r=sn(t);return!t.cRel&&t.cRel!=null&&(r=MBe(r)),!t.rRel&&t.rRel!=null&&(r=DBe(r)),r}function W5(t,e){return t.s.r==0&&!t.s.rRel&&t.e.r==(e.biff>=12?1048575:e.biff>=8?65536:16384)&&!t.e.rRel?(t.s.cRel?"":"$")+Bs(t.s.c)+":"+(t.e.cRel?"":"$")+Bs(t.e.c):t.s.c==0&&!t.s.cRel&&t.e.c==(e.biff>=12?16383:255)&&!t.e.cRel?(t.s.rRel?"":"$")+di(t.s.r)+":"+(t.e.rRel?"":"$")+di(t.e.r):rb(t.s,e.biff)+":"+rb(t.e,e.biff)}function iD(t){return parseInt(RBe(t),10)-1}function di(t){return""+(t+1)}function DBe(t){return t.replace(/([A-Z]|^)(\d+)$/,"$1$$$2")}function RBe(t){return t.replace(/\$(\d+)$/,"$1")}function oD(t){for(var e=LBe(t),r=0,n=0;n!==e.length;++n)r=26*r+e.charCodeAt(n)-64;return r-1}function Bs(t){if(t<0)throw new Error("invalid column "+t);var e="";for(++t;t;t=Math.floor((t-1)/26))e=String.fromCharCode((t-1)%26+65)+e;return e}function MBe(t){return t.replace(/^([A-Z])/,"$$$1")}function LBe(t){return t.replace(/^\$([A-Z])/,"$1")}function UBe(t){return t.replace(/(\$?[A-Z]*)(\$?\d*)/,"$1,$2").split(",")}function Ps(t){for(var e=0,r=0,n=0;n<t.length;++n){var a=t.charCodeAt(n);a>=48&&a<=57?e=10*e+(a-48):a>=65&&a<=90&&(r=26*r+(a-64))}return{c:r-1,r:e-1}}function sn(t){for(var e=t.c+1,r="";e;e=(e-1)/26|0)r=String.fromCharCode((e-1)%26+65)+r;return r+(t.r+1)}function mc(t){var e=t.indexOf(":");return e==-1?{s:Ps(t),e:Ps(t)}:{s:Ps(t.slice(0,e)),e:Ps(t.slice(e+1))}}function vn(t,e){return typeof e>"u"||typeof e=="number"?vn(t.s,t.e):(typeof t!="string"&&(t=sn(t)),typeof e!="string"&&(e=sn(e)),t==e?t:t+":"+e)}function Xn(t){var e={s:{c:0,r:0},e:{c:0,r:0}},r=0,n=0,a=0,s=t.length;for(r=0;n<s&&!((a=t.charCodeAt(n)-64)<1||a>26);++n)r=26*r+a;for(e.s.c=--r,r=0;n<s&&!((a=t.charCodeAt(n)-48)<0||a>9);++n)r=10*r+a;if(e.s.r=--r,n===s||a!=10)return e.e.c=e.s.c,e.e.r=e.s.r,e;for(++n,r=0;n!=s&&!((a=t.charCodeAt(n)-64)<1||a>26);++n)r=26*r+a;for(e.e.c=--r,r=0;n!=s&&!((a=t.charCodeAt(n)-48)<0||a>9);++n)r=10*r+a;return e.e.r=--r,e}function iH(t,e){var r=t.t=="d"&&e instanceof Date;if(t.z!=null)try{return t.w=qu(t.z,r?Gi(e):e)}catch{}try{return t.w=qu((t.XF||{}).numFmtId||(r?14:0),r?Gi(e):e)}catch{return""+e}}function UA(t,e,r){return t==null||t.t==null||t.t=="z"?"":t.w!==void 0?t.w:(t.t=="d"&&!t.z&&r&&r.dateNF&&(t.z=r.dateNF),t.t=="e"?nh[t.v]||t.v:e==null?iH(t,t.v):iH(t,e))}function sm(t,e){var r=e&&e.sheet?e.sheet:"Sheet1",n={};return n[r]=t,{SheetNames:[r],Sheets:n}}function fre(t,e,r){var n=r||{},a=t?Array.isArray(t):n.dense,s=t||(a?[]:{}),i=0,l=0;if(s&&n.origin!=null){if(typeof n.origin=="number")i=n.origin;else{var c=typeof n.origin=="string"?Ps(n.origin):n.origin;i=c.r,l=c.c}s["!ref"]||(s["!ref"]="A1:A1")}var u={s:{c:1e7,r:1e7},e:{c:0,r:0}};if(s["!ref"]){var d=Xn(s["!ref"]);u.s.c=d.s.c,u.s.r=d.s.r,u.e.c=Math.max(u.e.c,d.e.c),u.e.r=Math.max(u.e.r,d.e.r),i==-1&&(u.e.r=i=d.e.r+1)}for(var f=0;f!=e.length;++f)if(e[f]){if(!Array.isArray(e[f]))throw new Error("aoa_to_sheet expects an array of arrays");for(var h=0;h!=e[f].length;++h)if(!(typeof e[f][h]>"u")){var A={v:e[f][h]},m=i+f,p=l+h;if(u.s.r>m&&(u.s.r=m),u.s.c>p&&(u.s.c=p),u.e.r<m&&(u.e.r=m),u.e.c<p&&(u.e.c=p),e[f][h]&&typeof e[f][h]=="object"&&!Array.isArray(e[f][h])&&!(e[f][h]instanceof Date))A=e[f][h];else if(Array.isArray(A.v)&&(A.f=e[f][h][1],A.v=A.v[0]),A.v===null)if(A.f)A.t="n";else if(n.nullError)A.t="e",A.v=0;else if(n.sheetStubs)A.t="z";else continue;else typeof A.v=="number"?A.t="n":typeof A.v=="boolean"?A.t="b":A.v instanceof Date?(A.z=n.dateNF||an[14],n.cellDates?(A.t="d",A.w=qu(A.z,Gi(A.v))):(A.t="n",A.v=Gi(A.v),A.w=qu(A.z,A.v))):A.t="s";if(a)s[m]||(s[m]=[]),s[m][p]&&s[m][p].z&&(A.z=s[m][p].z),s[m][p]=A;else{var g=sn({c:p,r:m});s[g]&&s[g].z&&(A.z=s[g].z),s[g]=A}}}return u.s.c<1e7&&(s["!ref"]=vn(u)),s}function Hv(t,e){return fre(null,t,e)}function QBe(t){return t.read_shift(4,"i")}function jd(t,e){return e||(e=Yt(4)),e.write_shift(4,t),e}function gl(t){var e=t.read_shift(4);return e===0?"":t.read_shift(e,"dbcs")}function ho(t,e){var r=!1;return e==null&&(r=!0,e=Yt(4+2*t.length)),e.write_shift(4,t.length),t.length>0&&e.write_shift(0,t,"dbcs"),r?e.slice(0,e.l):e}function VBe(t){return{ich:t.read_shift(2),ifnt:t.read_shift(2)}}function HBe(t,e){return e||(e=Yt(4)),e.write_shift(2,0),e.write_shift(2,0),e}function lD(t,e){var r=t.l,n=t.read_shift(1),a=gl(t),s=[],i={t:a,h:a};if(n&1){for(var l=t.read_shift(4),c=0;c!=l;++c)s.push(VBe(t));i.r=s}else i.r=[{ich:0,ifnt:0}];return t.l=r+e,i}function $Be(t,e){var r=!1;return e==null&&(r=!0,e=Yt(15+4*t.t.length)),e.write_shift(1,0),ho(t.t,e),r?e.slice(0,e.l):e}var KBe=lD;function GBe(t,e){var r=!1;return e==null&&(r=!0,e=Yt(23+4*t.t.length)),e.write_shift(1,1),ho(t.t,e),e.write_shift(4,1),HBe({},e),r?e.slice(0,e.l):e}function Yu(t){var e=t.read_shift(4),r=t.read_shift(2);return r+=t.read_shift(1)<<16,t.l++,{c:e,iStyleRef:r}}function ig(t,e){return e==null&&(e=Yt(8)),e.write_shift(-4,t.c),e.write_shift(3,t.iStyleRef||t.s),e.write_shift(1,0),e}function og(t){var e=t.read_shift(2);return e+=t.read_shift(1)<<16,t.l++,{c:-1,iStyleRef:e}}function lg(t,e){return e==null&&(e=Yt(4)),e.write_shift(3,t.iStyleRef||t.s),e.write_shift(1,0),e}var qBe=gl,Are=ho;function cD(t){var e=t.read_shift(4);return e===0||e===4294967295?"":t.read_shift(e,"dbcs")}function mS(t,e){var r=!1;return e==null&&(r=!0,e=Yt(127)),e.write_shift(4,t.length>0?t.length:4294967295),t.length>0&&e.write_shift(0,t,"dbcs"),r?e.slice(0,e.l):e}var zBe=gl,ik=cD,uD=mS;function dD(t){var e=t.slice(t.l,t.l+4),r=e[0]&1,n=e[0]&2;t.l+=4;var a=n===0?hS([0,0,0,0,e[0]&252,e[1],e[2],e[3]],0):Qm(e,0)>>2;return r?a/100:a}function hre(t,e){e==null&&(e=Yt(4));var r=0,n=0,a=t*100;if(t==(t|0)&&t>=-536870912&&t<1<<29?n=1:a==(a|0)&&a>=-536870912&&a<1<<29&&(n=1,r=1),n)e.write_shift(-4,((r?a:t)<<2)+(r+2));else throw new Error("unsupported RkNumber "+t)}function mre(t){var e={s:{},e:{}};return e.s.r=t.read_shift(4),e.e.r=t.read_shift(4),e.s.c=t.read_shift(4),e.e.c=t.read_shift(4),e}function WBe(t,e){return e||(e=Yt(16)),e.write_shift(4,t.s.r),e.write_shift(4,t.e.r),e.write_shift(4,t.s.c),e.write_shift(4,t.e.c),e}var cg=mre,$v=WBe;function ml(t){if(t.length-t.l<8)throw"XLS Xnum Buffer underflow";return t.read_shift(8,"f")}function Op(t,e){return(e||Yt(8)).write_shift(8,t,"f")}function XBe(t){var e={},r=t.read_shift(1),n=r>>>1,a=t.read_shift(1),s=t.read_shift(2,"i"),i=t.read_shift(1),l=t.read_shift(1),c=t.read_shift(1);switch(t.l++,n){case 0:e.auto=1;break;case 1:e.index=a;var u=cp[a];u&&(e.rgb=o2(u));break;case 2:e.rgb=o2([i,l,c]);break;case 3:e.theme=a;break}return s!=0&&(e.tint=s>0?s/32767:s/32768),e}function pS(t,e){if(e||(e=Yt(8)),!t||t.auto)return e.write_shift(4,0),e.write_shift(4,0),e;t.index!=null?(e.write_shift(1,2),e.write_shift(1,t.index)):t.theme!=null?(e.write_shift(1,6),e.write_shift(1,t.theme)):(e.write_shift(1,5),e.write_shift(1,0));var r=t.tint||0;if(r>0?r*=32767:r<0&&(r*=32768),e.write_shift(2,r),!t.rgb||t.theme!=null)e.write_shift(2,0),e.write_shift(1,0),e.write_shift(1,0);else{var n=t.rgb||"FFFFFF";typeof n=="number"&&(n=("000000"+n.toString(16)).slice(-6)),e.write_shift(1,parseInt(n.slice(0,2),16)),e.write_shift(1,parseInt(n.slice(2,4),16)),e.write_shift(1,parseInt(n.slice(4,6),16)),e.write_shift(1,255)}return e}function YBe(t){var e=t.read_shift(1);t.l++;var r={fBold:e&1,fItalic:e&2,fUnderline:e&4,fStrikeout:e&8,fOutline:e&16,fShadow:e&32,fCondense:e&64,fExtend:e&128};return r}function JBe(t,e){e||(e=Yt(2));var r=(t.italic?2:0)|(t.strike?8:0)|(t.outline?16:0)|(t.shadow?32:0)|(t.condense?64:0)|(t.extend?128:0);return e.write_shift(1,r),e.write_shift(1,0),e}function pre(t,e){var r={2:"BITMAP",3:"METAFILEPICT",8:"DIB",14:"ENHMETAFILE"},n=t.read_shift(4);switch(n){case 0:return"";case 4294967295:case 4294967294:return r[t.read_shift(4)]||""}if(n>400)throw new Error("Unsupported Clipboard: "+n.toString(16));return t.l-=4,t.read_shift(0,e==1?"lpstr":"lpwstr")}function ZBe(t){return pre(t,1)}function ePe(t){return pre(t,2)}var fD=2,nc=3,CC=11,oH=12,gS=19,_C=64,tPe=65,rPe=71,nPe=4108,aPe=4126,lo=80,gre=81,sPe=[lo,gre],ok={1:{n:"CodePage",t:fD},2:{n:"Category",t:lo},3:{n:"PresentationFormat",t:lo},4:{n:"ByteCount",t:nc},5:{n:"LineCount",t:nc},6:{n:"ParagraphCount",t:nc},7:{n:"SlideCount",t:nc},8:{n:"NoteCount",t:nc},9:{n:"HiddenCount",t:nc},10:{n:"MultimediaClipCount",t:nc},11:{n:"ScaleCrop",t:CC},12:{n:"HeadingPairs",t:nPe},13:{n:"TitlesOfParts",t:aPe},14:{n:"Manager",t:lo},15:{n:"Company",t:lo},16:{n:"LinksUpToDate",t:CC},17:{n:"CharacterCount",t:nc},19:{n:"SharedDoc",t:CC},22:{n:"HyperlinksChanged",t:CC},23:{n:"AppVersion",t:nc,p:"version"},24:{n:"DigSig",t:tPe},26:{n:"ContentType",t:lo},27:{n:"ContentStatus",t:lo},28:{n:"Language",t:lo},29:{n:"Version",t:lo},255:{},2147483648:{n:"Locale",t:gS},2147483651:{n:"Behavior",t:gS},1919054434:{}},lk={1:{n:"CodePage",t:fD},2:{n:"Title",t:lo},3:{n:"Subject",t:lo},4:{n:"Author",t:lo},5:{n:"Keywords",t:lo},6:{n:"Comments",t:lo},7:{n:"Template",t:lo},8:{n:"LastAuthor",t:lo},9:{n:"RevNumber",t:lo},10:{n:"EditTime",t:_C},11:{n:"LastPrinted",t:_C},12:{n:"CreatedDate",t:_C},13:{n:"ModifiedDate",t:_C},14:{n:"PageCount",t:nc},15:{n:"WordCount",t:nc},16:{n:"CharCount",t:nc},17:{n:"Thumbnail",t:rPe},18:{n:"Application",t:lo},19:{n:"DocSecurity",t:nc},255:{},2147483648:{n:"Locale",t:gS},2147483651:{n:"Behavior",t:gS},1919054434:{}},lH={1:"US",2:"CA",3:"",7:"RU",20:"EG",30:"GR",31:"NL",32:"BE",33:"FR",34:"ES",36:"HU",39:"IT",41:"CH",43:"AT",44:"GB",45:"DK",46:"SE",47:"NO",48:"PL",49:"DE",52:"MX",55:"BR",61:"AU",64:"NZ",66:"TH",81:"JP",82:"KR",84:"VN",86:"CN",90:"TR",105:"JS",213:"DZ",216:"MA",218:"LY",351:"PT",354:"IS",358:"FI",420:"CZ",886:"TW",961:"LB",962:"JO",963:"SY",964:"IQ",965:"KW",966:"SA",971:"AE",972:"IL",974:"QA",981:"IR",65535:"US"},iPe=[null,"solid","mediumGray","darkGray","lightGray","darkHorizontal","darkVertical","darkDown","darkUp","darkGrid","darkTrellis","lightHorizontal","lightVertical","lightDown","lightUp","lightGrid","lightTrellis","gray125","gray0625"];function oPe(t){return t.map(function(e){return[e>>16&255,e>>8&255,e&255]})}var lPe=oPe([0,16777215,16711680,65280,255,16776960,16711935,65535,0,16777215,16711680,65280,255,16776960,16711935,65535,8388608,32768,128,8421376,8388736,32896,12632256,8421504,10066431,10040166,16777164,13434879,6684774,16744576,26316,13421823,128,16711935,16776960,65535,8388736,8388608,32896,255,52479,13434879,13434828,16777113,10079487,16751052,13408767,16764057,3368703,3394764,10079232,16763904,16750848,16737792,6710937,9868950,13158,3381606,13056,3355392,10040064,10040166,3355545,3355443,16777215,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0]),cp=ss(lPe),nh={0:"#NULL!",7:"#DIV/0!",15:"#VALUE!",23:"#REF!",29:"#NAME?",36:"#NUM!",42:"#N/A",43:"#GETTING_DATA",255:"#WTF?"},xre={"#NULL!":0,"#DIV/0!":7,"#VALUE!":15,"#REF!":23,"#NAME?":29,"#NUM!":36,"#N/A":42,"#GETTING_DATA":43,"#WTF?":255},ck={"application/vnd.openxmlformats-officedocument.spreadsheetml.sheet.main+xml":"workbooks","application/vnd.ms-excel.sheet.macroEnabled.main+xml":"workbooks","application/vnd.ms-excel.sheet.binary.macroEnabled.main":"workbooks","application/vnd.ms-excel.addin.macroEnabled.main+xml":"workbooks","application/vnd.openxmlformats-officedocument.spreadsheetml.template.main+xml":"workbooks","application/vnd.openxmlformats-officedocument.spreadsheetml.worksheet+xml":"sheets","application/vnd.ms-excel.worksheet":"sheets","application/vnd.ms-excel.binIndexWs":"TODO","application/vnd.openxmlformats-officedocument.spreadsheetml.chartsheet+xml":"charts","application/vnd.ms-excel.chartsheet":"charts","application/vnd.ms-excel.macrosheet+xml":"macros","application/vnd.ms-excel.macrosheet":"macros","application/vnd.ms-excel.intlmacrosheet":"TODO","application/vnd.ms-excel.binIndexMs":"TODO","application/vnd.openxmlformats-officedocument.spreadsheetml.dialogsheet+xml":"dialogs","application/vnd.ms-excel.dialogsheet":"dialogs","application/vnd.openxmlformats-officedocument.spreadsheetml.sharedStrings+xml":"strs","application/vnd.ms-excel.sharedStrings":"strs","application/vnd.openxmlformats-officedocument.spreadsheetml.styles+xml":"styles","application/vnd.ms-excel.styles":"styles","application/vnd.openxmlformats-package.core-properties+xml":"coreprops","application/vnd.openxmlformats-officedocument.custom-properties+xml":"custprops","application/vnd.openxmlformats-officedocument.extended-properties+xml":"extprops","application/vnd.openxmlformats-officedocument.customXmlProperties+xml":"TODO","application/vnd.openxmlformats-officedocument.spreadsheetml.customProperty":"TODO","application/vnd.openxmlformats-officedocument.spreadsheetml.comments+xml":"comments","application/vnd.ms-excel.comments":"comments","application/vnd.ms-excel.threadedcomments+xml":"threadedcomments","application/vnd.ms-excel.person+xml":"people","application/vnd.openxmlformats-officedocument.spreadsheetml.sheetMetadata+xml":"metadata","application/vnd.ms-excel.sheetMetadata":"metadata","application/vnd.ms-excel.pivotTable":"TODO","application/vnd.openxmlformats-officedocument.spreadsheetml.pivotTable+xml":"TODO","application/vnd.openxmlformats-officedocument.drawingml.chart+xml":"TODO","application/vnd.ms-office.chartcolorstyle+xml":"TODO","application/vnd.ms-office.chartstyle+xml":"TODO","application/vnd.ms-office.chartex+xml":"TODO","application/vnd.ms-excel.calcChain":"calcchains","application/vnd.openxmlformats-officedocument.spreadsheetml.calcChain+xml":"calcchains","application/vnd.openxmlformats-officedocument.spreadsheetml.printerSettings":"TODO","application/vnd.ms-office.activeX":"TODO","application/vnd.ms-office.activeX+xml":"TODO","application/vnd.ms-excel.attachedToolbars":"TODO","application/vnd.ms-excel.connections":"TODO","application/vnd.openxmlformats-officedocument.spreadsheetml.connections+xml":"TODO","application/vnd.ms-excel.externalLink":"links","application/vnd.openxmlformats-officedocument.spreadsheetml.externalLink+xml":"links","application/vnd.ms-excel.pivotCacheDefinition":"TODO","application/vnd.ms-excel.pivotCacheRecords":"TODO","application/vnd.openxmlformats-officedocument.spreadsheetml.pivotCacheDefinition+xml":"TODO","application/vnd.openxmlformats-officedocument.spreadsheetml.pivotCacheRecords+xml":"TODO","application/vnd.ms-excel.queryTable":"TODO","application/vnd.openxmlformats-officedocument.spreadsheetml.queryTable+xml":"TODO","application/vnd.ms-excel.userNames":"TODO","application/vnd.ms-excel.revisionHeaders":"TODO","application/vnd.ms-excel.revisionLog":"TODO","application/vnd.openxmlformats-officedocument.spreadsheetml.revisionHeaders+xml":"TODO","application/vnd.openxmlformats-officedocument.spreadsheetml.revisionLog+xml":"TODO","application/vnd.openxmlformats-officedocument.spreadsheetml.userNames+xml":"TODO","application/vnd.ms-excel.tableSingleCells":"TODO","application/vnd.openxmlformats-officedocument.spreadsheetml.tableSingleCells+xml":"TODO","application/vnd.ms-excel.slicer":"TODO","application/vnd.ms-excel.slicerCache":"TODO","application/vnd.ms-excel.slicer+xml":"TODO","application/vnd.ms-excel.slicerCache+xml":"TODO","application/vnd.ms-excel.wsSortMap":"TODO","application/vnd.ms-excel.table":"TODO","application/vnd.openxmlformats-officedocument.spreadsheetml.table+xml":"TODO","application/vnd.openxmlformats-officedocument.theme+xml":"themes","application/vnd.openxmlformats-officedocument.themeOverride+xml":"TODO","application/vnd.ms-excel.Timeline+xml":"TODO","application/vnd.ms-excel.TimelineCache+xml":"TODO","application/vnd.ms-office.vbaProject":"vba","application/vnd.ms-office.vbaProjectSignature":"TODO","application/vnd.ms-office.volatileDependencies":"TODO","application/vnd.openxmlformats-officedocument.spreadsheetml.volatileDependencies+xml":"TODO","application/vnd.ms-excel.controlproperties+xml":"TODO","application/vnd.openxmlformats-officedocument.model+data":"TODO","application/vnd.ms-excel.Survey+xml":"TODO","application/vnd.openxmlformats-officedocument.drawing+xml":"drawings","application/vnd.openxmlformats-officedocument.drawingml.chartshapes+xml":"TODO","application/vnd.openxmlformats-officedocument.drawingml.diagramColors+xml":"TODO","application/vnd.openxmlformats-officedocument.drawingml.diagramData+xml":"TODO","application/vnd.openxmlformats-officedocument.drawingml.diagramLayout+xml":"TODO","application/vnd.openxmlformats-officedocument.drawingml.diagramStyle+xml":"TODO","application/vnd.openxmlformats-officedocument.vmlDrawing":"TODO","application/vnd.openxmlformats-package.relationships+xml":"rels","application/vnd.openxmlformats-officedocument.oleObject":"TODO","image/png":"TODO",sheet:"js"},EC={workbooks:{xlsx:"application/vnd.openxmlformats-officedocument.spreadsheetml.sheet.main+xml",xlsm:"application/vnd.ms-excel.sheet.macroEnabled.main+xml",xlsb:"application/vnd.ms-excel.sheet.binary.macroEnabled.main",xlam:"application/vnd.ms-excel.addin.macroEnabled.main+xml",xltx:"application/vnd.openxmlformats-officedocument.spreadsheetml.template.main+xml"},strs:{xlsx:"application/vnd.openxmlformats-officedocument.spreadsheetml.sharedStrings+xml",xlsb:"application/vnd.ms-excel.sharedStrings"},comments:{xlsx:"application/vnd.openxmlformats-officedocument.spreadsheetml.comments+xml",xlsb:"application/vnd.ms-excel.comments"},sheets:{xlsx:"application/vnd.openxmlformats-officedocument.spreadsheetml.worksheet+xml",xlsb:"application/vnd.ms-excel.worksheet"},charts:{xlsx:"application/vnd.openxmlformats-officedocument.spreadsheetml.chartsheet+xml",xlsb:"application/vnd.ms-excel.chartsheet"},dialogs:{xlsx:"application/vnd.openxmlformats-officedocument.spreadsheetml.dialogsheet+xml",xlsb:"application/vnd.ms-excel.dialogsheet"},macros:{xlsx:"application/vnd.ms-excel.macrosheet+xml",xlsb:"application/vnd.ms-excel.macrosheet"},metadata:{xlsx:"application/vnd.openxmlformats-officedocument.spreadsheetml.sheetMetadata+xml",xlsb:"application/vnd.ms-excel.sheetMetadata"},styles:{xlsx:"application/vnd.openxmlformats-officedocument.spreadsheetml.styles+xml",xlsb:"application/vnd.ms-excel.styles"}};function AD(){return{workbooks:[],sheets:[],charts:[],dialogs:[],macros:[],rels:[],strs:[],comments:[],threadedcomments:[],links:[],coreprops:[],extprops:[],custprops:[],themes:[],styles:[],calcchains:[],vba:[],drawings:[],metadata:[],people:[],TODO:[],xmlns:""}}function cPe(t){var e=AD();if(!t||!t.match)return e;var r={};if((t.match(wl)||[]).forEach(function(n){var a=ln(n);switch(a[0].replace(vBe,"<")){case"<?xml":break;case"<Types":e.xmlns=a["xmlns"+(a[0].match(/<(\w+):/)||["",""])[1]];break;case"<Default":r[a.Extension]=a.ContentType;break;case"<Override":e[ck[a.ContentType]]!==void 0&&e[ck[a.ContentType]].push(a.PartName);break}}),e.xmlns!==Qi.CT)throw new Error("Unknown Namespace: "+e.xmlns);return e.calcchain=e.calcchains.length>0?e.calcchains[0]:"",e.sst=e.strs.length>0?e.strs[0]:"",e.style=e.styles.length>0?e.styles[0]:"",e.defaults=r,delete e.calcchains,e}function vre(t,e){var r=cBe(ck),n=[],a;n[n.length]=Ai,n[n.length]=br("Types",null,{xmlns:Qi.CT,"xmlns:xsd":Qi.xsd,"xmlns:xsi":Qi.xsi}),n=n.concat([["xml","application/xml"],["bin","application/vnd.ms-excel.sheet.binary.macroEnabled.main"],["vml","application/vnd.openxmlformats-officedocument.vmlDrawing"],["data","application/vnd.openxmlformats-officedocument.model+data"],["bmp","image/bmp"],["png","image/png"],["gif","image/gif"],["emf","image/x-emf"],["wmf","image/x-wmf"],["jpg","image/jpeg"],["jpeg","image/jpeg"],["tif","image/tiff"],["tiff","image/tiff"],["pdf","application/pdf"],["rels","application/vnd.openxmlformats-package.relationships+xml"]].map(function(c){return br("Default",null,{Extension:c[0],ContentType:c[1]})}));var s=function(c){t[c]&&t[c].length>0&&(a=t[c][0],n[n.length]=br("Override",null,{PartName:(a[0]=="/"?"":"/")+a,ContentType:EC[c][e.bookType]||EC[c].xlsx}))},i=function(c){(t[c]||[]).forEach(function(u){n[n.length]=br("Override",null,{PartName:(u[0]=="/"?"":"/")+u,ContentType:EC[c][e.bookType]||EC[c].xlsx})})},l=function(c){(t[c]||[]).forEach(function(u){n[n.length]=br("Override",null,{PartName:(u[0]=="/"?"":"/")+u,ContentType:r[c][0]})})};return s("workbooks"),i("sheets"),i("charts"),l("themes"),["strs","styles"].forEach(s),["coreprops","extprops","custprops"].forEach(l),l("vba"),l("comments"),l("threadedcomments"),l("drawings"),i("metadata"),l("people"),n.length>2&&(n[n.length]="</Types>",n[1]=n[1].replace("/>",">")),n.join("")}var Pn={WB:"http://schemas.openxmlformats.org/officeDocument/2006/relationships/officeDocument",SHEET:"http://sheetjs.openxmlformats.org/officeDocument/2006/relationships/officeDocument",HLINK:"http://schemas.openxmlformats.org/officeDocument/2006/relationships/hyperlink",VML:"http://schemas.openxmlformats.org/officeDocument/2006/relationships/vmlDrawing",XPATH:"http://schemas.openxmlformats.org/officeDocument/2006/relationships/externalLinkPath",XMISS:"http://schemas.microsoft.com/office/2006/relationships/xlExternalLinkPath/xlPathMissing",XLINK:"http://schemas.openxmlformats.org/officeDocument/2006/relationships/externalLink",CXML:"http://schemas.openxmlformats.org/officeDocument/2006/relationships/customXml",CXMLP:"http://schemas.openxmlformats.org/officeDocument/2006/relationships/customXmlProps",CMNT:"http://schemas.openxmlformats.org/officeDocument/2006/relationships/comments",CORE_PROPS:"http://schemas.openxmlformats.org/package/2006/relationships/metadata/core-properties",EXT_PROPS:"http://schemas.openxmlformats.org/officeDocument/2006/relationships/extended-properties",CUST_PROPS:"http://schemas.openxmlformats.org/officeDocument/2006/relationships/custom-properties",SST:"http://schemas.openxmlformats.org/officeDocument/2006/relationships/sharedStrings",STY:"http://schemas.openxmlformats.org/officeDocument/2006/relationships/styles",THEME:"http://schemas.openxmlformats.org/officeDocument/2006/relationships/theme",CHART:"http://schemas.openxmlformats.org/officeDocument/2006/relationships/chart",CHARTEX:"http://schemas.microsoft.com/office/2014/relationships/chartEx",CS:"http://schemas.openxmlformats.org/officeDocument/2006/relationships/chartsheet",WS:["http://schemas.openxmlformats.org/officeDocument/2006/relationships/worksheet","http://purl.oclc.org/ooxml/officeDocument/relationships/worksheet"],DS:"http://schemas.openxmlformats.org/officeDocument/2006/relationships/dialogsheet",MS:"http://schemas.microsoft.com/office/2006/relationships/xlMacrosheet",IMG:"http://schemas.openxmlformats.org/officeDocument/2006/relationships/image",DRAW:"http://schemas.openxmlformats.org/officeDocument/2006/relationships/drawing",XLMETA:"http://schemas.openxmlformats.org/officeDocument/2006/relationships/sheetMetadata",TCMNT:"http://schemas.microsoft.com/office/2017/10/relationships/threadedComment",PEOPLE:"http://schemas.microsoft.com/office/2017/10/relationships/person",VBA:"http://schemas.microsoft.com/office/2006/relationships/vbaProject"};function i2(t){var e=t.lastIndexOf("/");return t.slice(0,e+1)+"_rels/"+t.slice(e+1)+".rels"}function nb(t,e){var r={"!id":{}};if(!t)return r;e.charAt(0)!=="/"&&(e="/"+e);var n={};return(t.match(wl)||[]).forEach(function(a){var s=ln(a);if(s[0]==="<Relationship"){var i={};i.Type=s.Type,i.Target=s.Target,i.Id=s.Id,s.TargetMode&&(i.TargetMode=s.TargetMode);var l=s.TargetMode==="External"?s.Target:Ny(s.Target,e);r[l]=i,n[s.Id]=i}}),r["!id"]=n,r}function Ux(t){var e=[Ai,br("Relationships",null,{xmlns:Qi.RELS})];return zs(t["!id"]).forEach(function(r){e[e.length]=br("Relationship",null,t["!id"][r])}),e.length>2&&(e[e.length]="</Relationships>",e[1]=e[1].replace("/>",">")),e.join("")}function ya(t,e,r,n,a,s){if(a||(a={}),t["!id"]||(t["!id"]={}),t["!idx"]||(t["!idx"]=1),e<0)for(e=t["!idx"];t["!id"]["rId"+e];++e);if(t["!idx"]=e+1,a.Id="rId"+e,a.Type=n,a.Target=r,[Pn.HLINK,Pn.XPATH,Pn.XMISS].indexOf(a.Type)>-1&&(a.TargetMode="External"),t["!id"][a.Id])throw new Error("Cannot rewrite rId "+e);return t["!id"][a.Id]=a,t[("/"+a.Target).replace("//","/")]=a,e}var uPe="application/vnd.oasis.opendocument.spreadsheet";function dPe(t,e){for(var r=nD(t),n,a;n=s2.exec(r);)switch(n[3]){case"manifest":break;case"file-entry":if(a=ln(n[0],!1),a.path=="/"&&a.type!==uPe)throw new Error("This OpenDocument is not a spreadsheet");break;case"encryption-data":case"algorithm":case"start-key-generation":case"key-derivation":throw new Error("Unsupported ODS Encryption");default:if(e&&e.WTF)throw n}}function fPe(t){var e=[Ai];e.push(`<manifest:manifest xmlns:manifest="urn:oasis:names:tc:opendocument:xmlns:manifest:1.0" manifest:version="1.2">
`),e.push(`  <manifest:file-entry manifest:full-path="/" manifest:version="1.2" manifest:media-type="application/vnd.oasis.opendocument.spreadsheet"/>
`);for(var r=0;r<t.length;++r)e.push('  <manifest:file-entry manifest:full-path="'+t[r][0]+'" manifest:media-type="'+t[r][1]+`"/>
`);return e.push("</manifest:manifest>"),e.join("")}function cH(t,e,r){return['  <rdf:Description rdf:about="'+t+`">
`,'    <rdf:type rdf:resource="http://docs.oasis-open.org/ns/office/1.2/meta/'+(r||"odf")+"#"+e+`"/>
`,`  </rdf:Description>
`].join("")}function APe(t,e){return['  <rdf:Description rdf:about="'+t+`">
`,'    <ns0:hasPart xmlns:ns0="http://docs.oasis-open.org/ns/office/1.2/meta/pkg#" rdf:resource="'+e+`"/>
`,`  </rdf:Description>
`].join("")}function hPe(t){var e=[Ai];e.push(`<rdf:RDF xmlns:rdf="http://www.w3.org/1999/02/22-rdf-syntax-ns#">
`);for(var r=0;r!=t.length;++r)e.push(cH(t[r][0],t[r][1])),e.push(APe("",t[r][0]));return e.push(cH("","Document","pkg")),e.push("</rdf:RDF>"),e.join("")}function yre(){return'<office:document-meta xmlns:office="urn:oasis:names:tc:opendocument:xmlns:office:1.0" xmlns:meta="urn:oasis:names:tc:opendocument:xmlns:meta:1.0" xmlns:dc="http://purl.org/dc/elements/1.1/" xmlns:xlink="http://www.w3.org/1999/xlink" office:version="1.2"><office:meta><meta:generator>SheetJS '+cS.version+"</meta:generator></office:meta></office:document-meta>"}var Hu=[["cp:category","Category"],["cp:contentStatus","ContentStatus"],["cp:keywords","Keywords"],["cp:lastModifiedBy","LastAuthor"],["cp:lastPrinted","LastPrinted"],["cp:revision","RevNumber"],["cp:version","Version"],["dc:creator","Author"],["dc:description","Comments"],["dc:identifier","Identifier"],["dc:language","Language"],["dc:subject","Subject"],["dc:title","Title"],["dcterms:created","CreatedDate","date"],["dcterms:modified","ModifiedDate","date"]],mPe=function(){for(var t=new Array(Hu.length),e=0;e<Hu.length;++e){var r=Hu[e],n="(?:"+r[0].slice(0,r[0].indexOf(":"))+":)"+r[0].slice(r[0].indexOf(":")+1);t[e]=new RegExp("<"+n+"[^>]*>([\\s\\S]*?)</"+n+">")}return t}();function bre(t){var e={};t=Ba(t);for(var r=0;r<Hu.length;++r){var n=Hu[r],a=t.match(mPe[r]);a!=null&&a.length>0&&(e[n[1]]=Wn(a[1])),n[2]==="date"&&e[n[1]]&&(e[n[1]]=as(e[n[1]]))}return e}function X5(t,e,r,n,a){a[t]!=null||e==null||e===""||(a[t]=e,e=Ca(e),n[n.length]=r?br(t,e,r):Vo(t,e))}function wre(t,e){var r=e||{},n=[Ai,br("cp:coreProperties",null,{"xmlns:cp":Qi.CORE_PROPS,"xmlns:dc":Qi.dc,"xmlns:dcterms":Qi.dcterms,"xmlns:dcmitype":Qi.dcmitype,"xmlns:xsi":Qi.xsi})],a={};if(!t&&!r.Props)return n.join("");t&&(t.CreatedDate!=null&&X5("dcterms:created",typeof t.CreatedDate=="string"?t.CreatedDate:sk(t.CreatedDate,r.WTF),{"xsi:type":"dcterms:W3CDTF"},n,a),t.ModifiedDate!=null&&X5("dcterms:modified",typeof t.ModifiedDate=="string"?t.ModifiedDate:sk(t.ModifiedDate,r.WTF),{"xsi:type":"dcterms:W3CDTF"},n,a));for(var s=0;s!=Hu.length;++s){var i=Hu[s],l=r.Props&&r.Props[i[1]]!=null?r.Props[i[1]]:t?t[i[1]]:null;l===!0?l="1":l===!1?l="0":typeof l=="number"&&(l=String(l)),l!=null&&X5(i[0],l,null,n,a)}return n.length>2&&(n[n.length]="</cp:coreProperties>",n[1]=n[1].replace("/>",">")),n.join("")}var up=[["Application","Application","string"],["AppVersion","AppVersion","string"],["Company","Company","string"],["DocSecurity","DocSecurity","string"],["Manager","Manager","string"],["HyperlinksChanged","HyperlinksChanged","bool"],["SharedDoc","SharedDoc","bool"],["LinksUpToDate","LinksUpToDate","bool"],["ScaleCrop","ScaleCrop","bool"],["HeadingPairs","HeadingPairs","raw"],["TitlesOfParts","TitlesOfParts","raw"]],Nre=["Worksheets","SheetNames","NamedRanges","DefinedNames","Chartsheets","ChartNames"];function Cre(t,e,r,n){var a=[];if(typeof t=="string")a=ZV(t,n);else for(var s=0;s<t.length;++s)a=a.concat(t[s].map(function(d){return{v:d}}));var i=typeof e=="string"?ZV(e,n).map(function(d){return d.v}):e,l=0,c=0;if(i.length>0)for(var u=0;u!==a.length;u+=2){switch(c=+a[u+1].v,a[u].v){case"Worksheets":case"":case"":case" ":case"":case" ":case"Arbeitsbltter":case"alma Sayfalar":case"Feuilles de calcul":case"Fogli di lavoro":case"Folhas de clculo":case"Planilhas":case"Regneark":case"Hojas de clculo":case"Werkbladen":r.Worksheets=c,r.SheetNames=i.slice(l,l+c);break;case"Named Ranges":case"Rangos con nombre":case"":case"Benannte Bereiche":case"Navngivne omrder":r.NamedRanges=c,r.DefinedNames=i.slice(l,l+c);break;case"Charts":case"Diagramme":r.Chartsheets=c,r.ChartNames=i.slice(l,l+c);break}l+=c}}function pPe(t,e,r){var n={};return e||(e={}),t=Ba(t),up.forEach(function(a){var s=(t.match(n2(a[0]))||[])[1];switch(a[2]){case"string":s&&(e[a[1]]=Wn(s));break;case"bool":e[a[1]]=s==="true";break;case"raw":var i=t.match(new RegExp("<"+a[0]+"[^>]*>([\\s\\S]*?)</"+a[0]+">"));i&&i.length>0&&(n[a[1]]=i[1]);break}}),n.HeadingPairs&&n.TitlesOfParts&&Cre(n.HeadingPairs,n.TitlesOfParts,e,r),e}function _re(t){var e=[],r=br;return t||(t={}),t.Application="SheetJS",e[e.length]=Ai,e[e.length]=br("Properties",null,{xmlns:Qi.EXT_PROPS,"xmlns:vt":Qi.vt}),up.forEach(function(n){if(t[n[1]]!==void 0){var a;switch(n[2]){case"string":a=Ca(String(t[n[1]]));break;case"bool":a=t[n[1]]?"true":"false";break}a!==void 0&&(e[e.length]=r(n[0],a))}}),e[e.length]=r("HeadingPairs",r("vt:vector",r("vt:variant","<vt:lpstr>Worksheets</vt:lpstr>")+r("vt:variant",r("vt:i4",String(t.Worksheets))),{size:2,baseType:"variant"})),e[e.length]=r("TitlesOfParts",r("vt:vector",t.SheetNames.map(function(n){return"<vt:lpstr>"+Ca(n)+"</vt:lpstr>"}).join(""),{size:t.Worksheets,baseType:"lpstr"})),e.length>2&&(e[e.length]="</Properties>",e[1]=e[1].replace("/>",">")),e.join("")}var gPe=/<[^>]+>[^<]*/g;function xPe(t,e){var r={},n="",a=t.match(gPe);if(a)for(var s=0;s!=a.length;++s){var i=a[s],l=ln(i);switch(l[0]){case"<?xml":break;case"<Properties":break;case"<property":n=Wn(l.name);break;case"</property>":n=null;break;default:if(i.indexOf("<vt:")===0){var c=i.split(">"),u=c[0].slice(4),d=c[1];switch(u){case"lpstr":case"bstr":case"lpwstr":r[n]=Wn(d);break;case"bool":r[n]=es(d);break;case"i1":case"i2":case"i4":case"i8":case"int":case"uint":r[n]=parseInt(d,10);break;case"r4":case"r8":case"decimal":r[n]=parseFloat(d);break;case"filetime":case"date":r[n]=as(d);break;case"cy":case"error":r[n]=Wn(d);break;default:if(u.slice(-1)=="/")break;e.WTF&&typeof console<"u"&&console.warn("Unexpected",i,u,c)}}else if(i.slice(0,2)!=="</"){if(e.WTF)throw new Error(i)}}}return r}function Ere(t){var e=[Ai,br("Properties",null,{xmlns:Qi.CUST_PROPS,"xmlns:vt":Qi.vt})];if(!t)return e.join("");var r=1;return zs(t).forEach(function(a){++r,e[e.length]=br("property",SBe(t[a]),{fmtid:"{D5CDD505-2E9C-101B-9397-08002B2CF9AE}",pid:r,name:Ca(a)})}),e.length>2&&(e[e.length]="</Properties>",e[1]=e[1].replace("/>",">")),e.join("")}var uk={Title:"Title",Subject:"Subject",Author:"Author",Keywords:"Keywords",Comments:"Description",LastAuthor:"LastAuthor",RevNumber:"Revision",Application:"AppName",LastPrinted:"LastPrinted",CreatedDate:"Created",ModifiedDate:"LastSaved",Category:"Category",Manager:"Manager",Company:"Company",AppVersion:"Version",ContentStatus:"ContentStatus",Identifier:"Identifier",Language:"Language"},Y5;function vPe(t,e,r){Y5||(Y5=S4(uk)),e=Y5[e]||e,t[e]=r}function yPe(t,e){var r=[];return zs(uk).map(function(n){for(var a=0;a<Hu.length;++a)if(Hu[a][1]==n)return Hu[a];for(a=0;a<up.length;++a)if(up[a][1]==n)return up[a];throw n}).forEach(function(n){if(t[n[1]]!=null){var a=e&&e.Props&&e.Props[n[1]]!=null?e.Props[n[1]]:t[n[1]];switch(n[2]){case"date":a=new Date(a).toISOString().replace(/\.\d*Z/,"Z");break}typeof a=="number"?a=String(a):a===!0||a===!1?a=a?"1":"0":a instanceof Date&&(a=new Date(a).toISOString().replace(/\.\d*Z/,"")),r.push(Vo(uk[n[1]]||n[1],a))}}),br("DocumentProperties",r.join(""),{xmlns:Mc.o})}function bPe(t,e){var r=["Worksheets","SheetNames"],n="CustomDocumentProperties",a=[];return t&&zs(t).forEach(function(s){if(Object.prototype.hasOwnProperty.call(t,s)){for(var i=0;i<Hu.length;++i)if(s==Hu[i][1])return;for(i=0;i<up.length;++i)if(s==up[i][1])return;for(i=0;i<r.length;++i)if(s==r[i])return;var l=t[s],c="string";typeof l=="number"?(c="float",l=String(l)):l===!0||l===!1?(c="boolean",l=l?"1":"0"):l=String(l),a.push(br(WV(s),l,{"dt:dt":c}))}}),e&&zs(e).forEach(function(s){if(Object.prototype.hasOwnProperty.call(e,s)&&!(t&&Object.prototype.hasOwnProperty.call(t,s))){var i=e[s],l="string";typeof i=="number"?(l="float",i=String(i)):i===!0||i===!1?(l="boolean",i=i?"1":"0"):i instanceof Date?(l="dateTime.tz",i=i.toISOString()):i=String(i),a.push(br(WV(s),i,{"dt:dt":l}))}}),"<"+n+' xmlns="'+Mc.o+'">'+a.join("")+"</"+n+">"}function hD(t){var e=t.read_shift(4),r=t.read_shift(4);return new Date((r/1e7*Math.pow(2,32)+e/1e7-11644473600)*1e3).toISOString().replace(/\.000/,"")}function wPe(t){var e=typeof t=="string"?new Date(Date.parse(t)):t,r=e.getTime()/1e3+11644473600,n=r%Math.pow(2,32),a=(r-n)/Math.pow(2,32);n*=1e7,a*=1e7;var s=n/Math.pow(2,32)|0;s>0&&(n=n%Math.pow(2,32),a+=s);var i=Yt(8);return i.write_shift(4,n),i.write_shift(4,a),i}function Sre(t,e,r){var n=t.l,a=t.read_shift(0,"lpstr-cp");if(r)for(;t.l-n&3;)++t.l;return a}function Ire(t,e,r){var n=t.read_shift(0,"lpwstr");return n}function jre(t,e,r){return e===31?Ire(t):Sre(t,e,r)}function dk(t,e,r){return jre(t,e,r===!1?0:4)}function NPe(t,e){if(!e)throw new Error("VtUnalignedString must have positive length");return jre(t,e,0)}function CPe(t){for(var e=t.read_shift(4),r=[],n=0;n!=e;++n){var a=t.l;r[n]=t.read_shift(0,"lpwstr").replace(Vl,""),t.l-a&2&&(t.l+=2)}return r}function _Pe(t){for(var e=t.read_shift(4),r=[],n=0;n!=e;++n)r[n]=t.read_shift(0,"lpstr-cp").replace(Vl,"");return r}function EPe(t){var e=t.l,r=xS(t,gre);t[t.l]==0&&t[t.l+1]==0&&t.l-e&2&&(t.l+=2);var n=xS(t,nc);return[r,n]}function SPe(t){for(var e=t.read_shift(4),r=[],n=0;n<e/2;++n)r.push(EPe(t));return r}function uH(t,e){for(var r=t.read_shift(4),n={},a=0;a!=r;++a){var s=t.read_shift(4),i=t.read_shift(4);n[s]=t.read_shift(i,e===1200?"utf16le":"utf8").replace(Vl,"").replace(wy,"!"),e===1200&&i%2&&(t.l+=2)}return t.l&3&&(t.l=t.l>>3<<2),n}function Bre(t){var e=t.read_shift(4),r=t.slice(t.l,t.l+e);return t.l+=e,(e&3)>0&&(t.l+=4-(e&3)&3),r}function IPe(t){var e={};return e.Size=t.read_shift(4),t.l+=e.Size+3-(e.Size-1)%4,e}function xS(t,e,r){var n=t.read_shift(2),a,s=r||{};if(t.l+=2,e!==oH&&n!==e&&sPe.indexOf(e)===-1&&!((e&65534)==4126&&(n&65534)==4126))throw new Error("Expected type "+e+" saw "+n);switch(e===oH?n:e){case 2:return a=t.read_shift(2,"i"),s.raw||(t.l+=2),a;case 3:return a=t.read_shift(4,"i"),a;case 11:return t.read_shift(4)!==0;case 19:return a=t.read_shift(4),a;case 30:return Sre(t,n,4).replace(Vl,"");case 31:return Ire(t);case 64:return hD(t);case 65:return Bre(t);case 71:return IPe(t);case 80:return dk(t,n,!s.raw).replace(Vl,"");case 81:return NPe(t,n).replace(Vl,"");case 4108:return SPe(t);case 4126:case 4127:return n==4127?CPe(t):_Pe(t);default:throw new Error("TypedPropertyValue unrecognized type "+e+" "+n)}}function dH(t,e){var r=Yt(4),n=Yt(4);switch(r.write_shift(4,t==80?31:t),t){case 3:n.write_shift(-4,e);break;case 5:n=Yt(8),n.write_shift(8,e,"f");break;case 11:n.write_shift(4,e?1:0);break;case 64:n=wPe(e);break;case 31:case 80:for(n=Yt(4+2*(e.length+1)+(e.length%2?0:2)),n.write_shift(4,e.length+1),n.write_shift(0,e,"dbcs");n.l!=n.length;)n.write_shift(1,0);break;default:throw new Error("TypedPropertyValue unrecognized type "+t+" "+e)}return fo([r,n])}function fH(t,e){var r=t.l,n=t.read_shift(4),a=t.read_shift(4),s=[],i=0,l=0,c=-1,u={};for(i=0;i!=a;++i){var d=t.read_shift(4),f=t.read_shift(4);s[i]=[d,f+r]}s.sort(function(y,b){return y[1]-b[1]});var h={};for(i=0;i!=a;++i){if(t.l!==s[i][1]){var A=!0;if(i>0&&e)switch(e[s[i-1][0]].t){case 2:t.l+2===s[i][1]&&(t.l+=2,A=!1);break;case 80:t.l<=s[i][1]&&(t.l=s[i][1],A=!1);break;case 4108:t.l<=s[i][1]&&(t.l=s[i][1],A=!1);break}if((!e||i==0)&&t.l<=s[i][1]&&(A=!1,t.l=s[i][1]),A)throw new Error("Read Error: Expected address "+s[i][1]+" at "+t.l+" :"+i)}if(e){var m=e[s[i][0]];if(h[m.n]=xS(t,m.t,{raw:!0}),m.p==="version"&&(h[m.n]=String(h[m.n]>>16)+"."+("0000"+String(h[m.n]&65535)).slice(-4)),m.n=="CodePage")switch(h[m.n]){case 0:h[m.n]=1252;case 874:case 932:case 936:case 949:case 950:case 1250:case 1251:case 1253:case 1254:case 1255:case 1256:case 1257:case 1258:case 1e4:case 1200:case 1201:case 1252:case 65e3:case-536:case 65001:case-535:Nd(l=h[m.n]>>>0&65535);break;default:throw new Error("Unsupported CodePage: "+h[m.n])}}else if(s[i][0]===1){if(l=h.CodePage=xS(t,fD),Nd(l),c!==-1){var p=t.l;t.l=s[c][1],u=uH(t,l),t.l=p}}else if(s[i][0]===0){if(l===0){c=i,t.l=s[i+1][1];continue}u=uH(t,l)}else{var g=u[s[i][0]],x;switch(t[t.l]){case 65:t.l+=4,x=Bre(t);break;case 30:t.l+=4,x=dk(t,t[t.l-4]).replace(/\u0000+$/,"");break;case 31:t.l+=4,x=dk(t,t[t.l-4]).replace(/\u0000+$/,"");break;case 3:t.l+=4,x=t.read_shift(4,"i");break;case 19:t.l+=4,x=t.read_shift(4);break;case 5:t.l+=4,x=t.read_shift(8,"f");break;case 11:t.l+=4,x=ri(t,4);break;case 64:t.l+=4,x=as(hD(t));break;default:throw new Error("unparsed value: "+t[t.l])}h[g]=x}}return t.l=r+n,h}var Pre=["CodePage","Thumbnail","_PID_LINKBASE","_PID_HLINKS","SystemIdentifier","FMTID"];function jPe(t){switch(typeof t){case"boolean":return 11;case"number":return(t|0)==t?3:5;case"string":return 31;case"object":if(t instanceof Date)return 64;break}return-1}function AH(t,e,r){var n=Yt(8),a=[],s=[],i=8,l=0,c=Yt(8),u=Yt(8);if(c.write_shift(4,2),c.write_shift(4,1200),u.write_shift(4,1),s.push(c),a.push(u),i+=8+c.length,!e){u=Yt(8),u.write_shift(4,0),a.unshift(u);var d=[Yt(4)];for(d[0].write_shift(4,t.length),l=0;l<t.length;++l){var f=t[l][0];for(c=Yt(8+2*(f.length+1)+(f.length%2?0:2)),c.write_shift(4,l+2),c.write_shift(4,f.length+1),c.write_shift(0,f,"dbcs");c.l!=c.length;)c.write_shift(1,0);d.push(c)}c=fo(d),s.unshift(c),i+=8+c.length}for(l=0;l<t.length;++l)if(!(e&&!e[t[l][0]])&&!(Pre.indexOf(t[l][0])>-1||Nre.indexOf(t[l][0])>-1)&&t[l][1]!=null){var h=t[l][1],A=0;if(e){A=+e[t[l][0]];var m=r[A];if(m.p=="version"&&typeof h=="string"){var p=h.split(".");h=(+p[0]<<16)+(+p[1]||0)}c=dH(m.t,h)}else{var g=jPe(h);g==-1&&(g=31,h=String(h)),c=dH(g,h)}s.push(c),u=Yt(8),u.write_shift(4,e?A:2+l),a.push(u),i+=8+c.length}var x=8*(s.length+1);for(l=0;l<s.length;++l)a[l].write_shift(4,x),x+=s[l].length;return n.write_shift(4,i),n.write_shift(4,s.length),fo([n].concat(a).concat(s))}function hH(t,e,r){var n=t.content;if(!n)return{};Uo(n,0);var a,s,i,l,c=0;n.chk("feff","Byte Order: "),n.read_shift(2);var u=n.read_shift(4),d=n.read_shift(16);if(d!==Xr.utils.consts.HEADER_CLSID&&d!==r)throw new Error("Bad PropertySet CLSID "+d);if(a=n.read_shift(4),a!==1&&a!==2)throw new Error("Unrecognized #Sets: "+a);if(s=n.read_shift(16),l=n.read_shift(4),a===1&&l!==n.l)throw new Error("Length mismatch: "+l+" !== "+n.l);a===2&&(i=n.read_shift(16),c=n.read_shift(4));var f=fH(n,e),h={SystemIdentifier:u};for(var A in f)h[A]=f[A];if(h.FMTID=s,a===1)return h;if(c-n.l==2&&(n.l+=2),n.l!==c)throw new Error("Length mismatch 2: "+n.l+" !== "+c);var m;try{m=fH(n,null)}catch{}for(A in m)h[A]=m[A];return h.FMTID=[s,i],h}function mH(t,e,r,n,a,s){var i=Yt(a?68:48),l=[i];i.write_shift(2,65534),i.write_shift(2,0),i.write_shift(4,842412599),i.write_shift(16,Xr.utils.consts.HEADER_CLSID,"hex"),i.write_shift(4,a?2:1),i.write_shift(16,e,"hex"),i.write_shift(4,a?68:48);var c=AH(t,r,n);if(l.push(c),a){var u=AH(a,null,null);i.write_shift(16,s,"hex"),i.write_shift(4,68+c.length),l.push(u)}return fo(l)}function Lh(t,e){return t.read_shift(e),null}function BPe(t,e){e||(e=Yt(t));for(var r=0;r<t;++r)e.write_shift(1,0);return e}function PPe(t,e,r){for(var n=[],a=t.l+e;t.l<a;)n.push(r(t,a-t.l));if(a!==t.l)throw new Error("Slurp error");return n}function ri(t,e){return t.read_shift(e)===1}function Dl(t,e){return e||(e=Yt(2)),e.write_shift(2,+!!t),e}function gi(t){return t.read_shift(2,"u")}function Bu(t,e){return e||(e=Yt(2)),e.write_shift(2,t),e}function Tre(t,e){return PPe(t,e,gi)}function TPe(t){var e=t.read_shift(1),r=t.read_shift(1);return r===1?e:e===1}function kre(t,e,r){return r||(r=Yt(2)),r.write_shift(1,e=="e"?+t:+!!t),r.write_shift(1,e=="e"?1:0),r}function cw(t,e,r){var n=t.read_shift(r&&r.biff>=12?2:1),a="sbcs-cont";if(r&&r.biff>=8,!r||r.biff==8){var s=t.read_shift(1);s&&(a="dbcs-cont")}else r.biff==12&&(a="wstr");r.biff>=2&&r.biff<=5&&(a="cpstr");var i=n?t.read_shift(n,a):"";return i}function kPe(t){var e=t.read_shift(2),r=t.read_shift(1),n=r&4,a=r&8,s=1+(r&1),i=0,l,c={};a&&(i=t.read_shift(2)),n&&(l=t.read_shift(4));var u=s==2?"dbcs-cont":"sbcs-cont",d=e===0?"":t.read_shift(e,u);return a&&(t.l+=4*i),n&&(t.l+=l),c.t=d,a||(c.raw="<t>"+c.t+"</t>",c.r=c.t),c}function FPe(t){var e=t.t||"",r=Yt(3);r.write_shift(2,e.length),r.write_shift(1,1);var n=Yt(2*e.length);n.write_shift(2*e.length,e,"utf16le");var a=[r,n];return fo(a)}function Dp(t,e,r){var n;if(r){if(r.biff>=2&&r.biff<=5)return t.read_shift(e,"cpstr");if(r.biff>=12)return t.read_shift(e,"dbcs-cont")}var a=t.read_shift(1);return a===0?n=t.read_shift(e,"sbcs-cont"):n=t.read_shift(e,"dbcs-cont"),n}function uw(t,e,r){var n=t.read_shift(r&&r.biff==2?1:2);return n===0?(t.l++,""):Dp(t,n,r)}function ug(t,e,r){if(r.biff>5)return uw(t,e,r);var n=t.read_shift(1);return n===0?(t.l++,""):t.read_shift(n,r.biff<=4||!t.lens?"cpstr":"sbcs-cont")}function Fre(t,e,r){return r||(r=Yt(3+2*t.length)),r.write_shift(2,t.length),r.write_shift(1,1),r.write_shift(31,t,"utf16le"),r}function OPe(t){var e=t.read_shift(1);t.l++;var r=t.read_shift(2);return t.l+=2,[e,r]}function DPe(t){var e=t.read_shift(4),r=t.l,n=!1;e>24&&(t.l+=e-24,t.read_shift(16)==="795881f43b1d7f48af2c825dc4852763"&&(n=!0),t.l=r);var a=t.read_shift((n?e-24:e)>>1,"utf16le").replace(Vl,"");return n&&(t.l+=24),a}function RPe(t){for(var e=t.read_shift(2),r="";e-- >0;)r+="../";var n=t.read_shift(0,"lpstr-ansi");if(t.l+=2,t.read_shift(2)!=57005)throw new Error("Bad FileMoniker");var a=t.read_shift(4);if(a===0)return r+n.replace(/\\/g,"/");var s=t.read_shift(4);if(t.read_shift(2)!=3)throw new Error("Bad FileMoniker");var i=t.read_shift(s>>1,"utf16le").replace(Vl,"");return r+i}function MPe(t,e){var r=t.read_shift(16);switch(r){case"e0c9ea79f9bace118c8200aa004ba90b":return DPe(t);case"0303000000000000c000000000000046":return RPe(t);default:throw new Error("Unsupported Moniker "+r)}}function SC(t){var e=t.read_shift(4),r=e>0?t.read_shift(e,"utf16le").replace(Vl,""):"";return r}function pH(t,e){e||(e=Yt(6+t.length*2)),e.write_shift(4,1+t.length);for(var r=0;r<t.length;++r)e.write_shift(2,t.charCodeAt(r));return e.write_shift(2,0),e}function LPe(t,e){var r=t.l+e,n=t.read_shift(4);if(n!==2)throw new Error("Unrecognized streamVersion: "+n);var a=t.read_shift(2);t.l+=2;var s,i,l,c,u="",d,f;a&16&&(s=SC(t,r-t.l)),a&128&&(i=SC(t,r-t.l)),(a&257)===257&&(l=SC(t,r-t.l)),(a&257)===1&&(c=MPe(t,r-t.l)),a&8&&(u=SC(t,r-t.l)),a&32&&(d=t.read_shift(16)),a&64&&(f=hD(t)),t.l=r;var h=i||l||c||"";h&&u&&(h+="#"+u),h||(h="#"+u),a&2&&h.charAt(0)=="/"&&h.charAt(1)!="/"&&(h="file://"+h);var A={Target:h};return d&&(A.guid=d),f&&(A.time=f),s&&(A.Tooltip=s),A}function UPe(t){var e=Yt(512),r=0,n=t.Target;n.slice(0,7)=="file://"&&(n=n.slice(7));var a=n.indexOf("#"),s=a>-1?31:23;switch(n.charAt(0)){case"#":s=28;break;case".":s&=-3;break}e.write_shift(4,2),e.write_shift(4,s);var i=[8,6815827,6619237,4849780,83];for(r=0;r<i.length;++r)e.write_shift(4,i[r]);if(s==28)n=n.slice(1),pH(n,e);else if(s&2){for(i="e0 c9 ea 79 f9 ba ce 11 8c 82 00 aa 00 4b a9 0b".split(" "),r=0;r<i.length;++r)e.write_shift(1,parseInt(i[r],16));var l=a>-1?n.slice(0,a):n;for(e.write_shift(4,2*(l.length+1)),r=0;r<l.length;++r)e.write_shift(2,l.charCodeAt(r));e.write_shift(2,0),s&8&&pH(a>-1?n.slice(a+1):"",e)}else{for(i="03 03 00 00 00 00 00 00 c0 00 00 00 00 00 00 46".split(" "),r=0;r<i.length;++r)e.write_shift(1,parseInt(i[r],16));for(var c=0;n.slice(c*3,c*3+3)=="../"||n.slice(c*3,c*3+3)=="..\\";)++c;for(e.write_shift(2,c),e.write_shift(4,n.length-3*c+1),r=0;r<n.length-3*c;++r)e.write_shift(1,n.charCodeAt(r+3*c)&255);for(e.write_shift(1,0),e.write_shift(2,65535),e.write_shift(2,57005),r=0;r<6;++r)e.write_shift(4,0)}return e.slice(0,e.l)}function Ore(t){var e=t.read_shift(1),r=t.read_shift(1),n=t.read_shift(1),a=t.read_shift(1);return[e,r,n,a]}function Dre(t,e){var r=Ore(t);return r[3]=0,r}function Rf(t){var e=t.read_shift(2),r=t.read_shift(2),n=t.read_shift(2);return{r:e,c:r,ixfe:n}}function Rp(t,e,r,n){return n||(n=Yt(6)),n.write_shift(2,t),n.write_shift(2,e),n.write_shift(2,r||0),n}function QPe(t){var e=t.read_shift(2),r=t.read_shift(2);return t.l+=8,{type:e,flags:r}}function VPe(t,e,r){return e===0?"":ug(t,e,r)}function HPe(t,e,r){var n=r.biff>8?4:2,a=t.read_shift(n),s=t.read_shift(n,"i"),i=t.read_shift(n,"i");return[a,s,i]}function Rre(t){var e=t.read_shift(2),r=dD(t);return[e,r]}function $Pe(t,e,r){t.l+=4,e-=4;var n=t.l+e,a=cw(t,e,r),s=t.read_shift(2);if(n-=t.l,s!==n)throw new Error("Malformed AddinUdf: padding = "+n+" != "+s);return t.l+=s,a}function B4(t){var e=t.read_shift(2),r=t.read_shift(2),n=t.read_shift(2),a=t.read_shift(2);return{s:{c:n,r:e},e:{c:a,r}}}function Mre(t,e){return e||(e=Yt(8)),e.write_shift(2,t.s.r),e.write_shift(2,t.e.r),e.write_shift(2,t.s.c),e.write_shift(2,t.e.c),e}function Lre(t){var e=t.read_shift(2),r=t.read_shift(2),n=t.read_shift(1),a=t.read_shift(1);return{s:{c:n,r:e},e:{c:a,r}}}var KPe=Lre;function Ure(t){t.l+=4;var e=t.read_shift(2),r=t.read_shift(2),n=t.read_shift(2);return t.l+=12,[r,e,n]}function GPe(t){var e={};return t.l+=4,t.l+=16,e.fSharedNote=t.read_shift(2),t.l+=4,e}function qPe(t){var e={};return t.l+=4,t.cf=t.read_shift(2),e}function al(t){t.l+=2,t.l+=t.read_shift(2)}var zPe={0:al,4:al,5:al,6:al,7:qPe,8:al,9:al,10:al,11:al,12:al,13:GPe,14:al,15:al,16:al,17:al,18:al,19:al,20:al,21:Ure};function WPe(t,e){for(var r=t.l+e,n=[];t.l<r;){var a=t.read_shift(2);t.l-=2;try{n.push(zPe[a](t,r-t.l))}catch{return t.l=r,n}}return t.l!=r&&(t.l=r),n}function IC(t,e){var r={BIFFVer:0,dt:0};switch(r.BIFFVer=t.read_shift(2),e-=2,e>=2&&(r.dt=t.read_shift(2),t.l-=2),r.BIFFVer){case 1536:case 1280:case 1024:case 768:case 512:case 2:case 7:break;default:if(e>6)throw new Error("Unexpected BIFF Ver "+r.BIFFVer)}return t.read_shift(e),r}function mD(t,e,r){var n=1536,a=16;switch(r.bookType){case"biff8":break;case"biff5":n=1280,a=8;break;case"biff4":n=4,a=6;break;case"biff3":n=3,a=6;break;case"biff2":n=2,a=4;break;case"xla":break;default:throw new Error("unsupported BIFF version")}var s=Yt(a);return s.write_shift(2,n),s.write_shift(2,e),a>4&&s.write_shift(2,29282),a>6&&s.write_shift(2,1997),a>8&&(s.write_shift(2,49161),s.write_shift(2,1),s.write_shift(2,1798),s.write_shift(2,0)),s}function XPe(t,e){return e===0||t.read_shift(2),1200}function YPe(t,e,r){if(r.enc)return t.l+=e,"";var n=t.l,a=ug(t,0,r);return t.read_shift(e+n-t.l),a}function JPe(t,e){var r=!e||e.biff==8,n=Yt(r?112:54);for(n.write_shift(e.biff==8?2:1,7),r&&n.write_shift(1,0),n.write_shift(4,859007059),n.write_shift(4,5458548|(r?0:536870912));n.l<n.length;)n.write_shift(1,r?0:32);return n}function ZPe(t,e,r){var n=r&&r.biff==8||e==2?t.read_shift(2):(t.l+=e,0);return{fDialog:n&16,fBelow:n&64,fRight:n&128}}function eTe(t,e,r){var n=t.read_shift(4),a=t.read_shift(1)&3,s=t.read_shift(1);switch(s){case 0:s="Worksheet";break;case 1:s="Macrosheet";break;case 2:s="Chartsheet";break;case 6:s="VBAModule";break}var i=cw(t,0,r);return i.length===0&&(i="Sheet1"),{pos:n,hs:a,dt:s,name:i}}function tTe(t,e){var r=!e||e.biff>=8?2:1,n=Yt(8+r*t.name.length);n.write_shift(4,t.pos),n.write_shift(1,t.hs||0),n.write_shift(1,t.dt),n.write_shift(1,t.name.length),e.biff>=8&&n.write_shift(1,1),n.write_shift(r*t.name.length,t.name,e.biff<8?"sbcs":"utf16le");var a=n.slice(0,n.l);return a.l=n.l,a}function rTe(t,e){for(var r=t.l+e,n=t.read_shift(4),a=t.read_shift(4),s=[],i=0;i!=a&&t.l<r;++i)s.push(kPe(t));return s.Count=n,s.Unique=a,s}function nTe(t,e){var r=Yt(8);r.write_shift(4,t.Count),r.write_shift(4,t.Unique);for(var n=[],a=0;a<t.length;++a)n[a]=FPe(t[a]);var s=fo([r].concat(n));return s.parts=[r.length].concat(n.map(function(i){return i.length})),s}function aTe(t,e){var r={};return r.dsst=t.read_shift(2),t.l+=e-2,r}function sTe(t){var e={};e.r=t.read_shift(2),e.c=t.read_shift(2),e.cnt=t.read_shift(2)-e.c;var r=t.read_shift(2);t.l+=4;var n=t.read_shift(1);return t.l+=3,n&7&&(e.level=n&7),n&32&&(e.hidden=!0),n&64&&(e.hpt=r/20),e}function iTe(t){var e=QPe(t);if(e.type!=2211)throw new Error("Invalid Future Record "+e.type);var r=t.read_shift(4);return r!==0}function oTe(t){return t.read_shift(2),t.read_shift(4)}function gH(t,e,r){var n=0;r&&r.biff==2||(n=t.read_shift(2));var a=t.read_shift(2);r&&r.biff==2&&(n=1-(a>>15),a&=32767);var s={Unsynced:n&1,DyZero:(n&2)>>1,ExAsc:(n&4)>>2,ExDsc:(n&8)>>3};return[s,a]}function lTe(t){var e=t.read_shift(2),r=t.read_shift(2),n=t.read_shift(2),a=t.read_shift(2),s=t.read_shift(2),i=t.read_shift(2),l=t.read_shift(2),c=t.read_shift(2),u=t.read_shift(2);return{Pos:[e,r],Dim:[n,a],Flags:s,CurTab:i,FirstTab:l,Selected:c,TabRatio:u}}function cTe(){var t=Yt(18);return t.write_shift(2,0),t.write_shift(2,0),t.write_shift(2,29280),t.write_shift(2,17600),t.write_shift(2,56),t.write_shift(2,0),t.write_shift(2,0),t.write_shift(2,1),t.write_shift(2,500),t}function uTe(t,e,r){if(r&&r.biff>=2&&r.biff<5)return{};var n=t.read_shift(2);return{RTL:n&64}}function dTe(t){var e=Yt(18),r=1718;return t&&t.RTL&&(r|=64),e.write_shift(2,r),e.write_shift(4,0),e.write_shift(4,64),e.write_shift(4,0),e.write_shift(4,0),e}function fTe(){}function ATe(t,e,r){var n={dyHeight:t.read_shift(2),fl:t.read_shift(2)};switch(r&&r.biff||8){case 2:break;case 3:case 4:t.l+=2;break;default:t.l+=10;break}return n.name=cw(t,0,r),n}function hTe(t,e){var r=t.name||"Arial",n=e&&e.biff==5,a=n?15+r.length:16+2*r.length,s=Yt(a);return s.write_shift(2,t.sz*20),s.write_shift(4,0),s.write_shift(2,400),s.write_shift(4,0),s.write_shift(2,0),s.write_shift(1,r.length),n||s.write_shift(1,1),s.write_shift((n?1:2)*r.length,r,n?"sbcs":"utf16le"),s}function mTe(t){var e=Rf(t);return e.isst=t.read_shift(4),e}function pTe(t,e,r,n){var a=Yt(10);return Rp(t,e,n,a),a.write_shift(4,r),a}function gTe(t,e,r){r.biffguess&&r.biff==2&&(r.biff=5);var n=t.l+e,a=Rf(t);r.biff==2&&t.l++;var s=uw(t,n-t.l,r);return a.val=s,a}function xTe(t,e,r,n,a){var s=!a||a.biff==8,i=Yt(8+ +s+(1+s)*r.length);return Rp(t,e,n,i),i.write_shift(2,r.length),s&&i.write_shift(1,1),i.write_shift((1+s)*r.length,r,s?"utf16le":"sbcs"),i}function vTe(t,e,r){var n=t.read_shift(2),a=ug(t,0,r);return[n,a]}function yTe(t,e,r,n){var a=r&&r.biff==5;n||(n=Yt(a?3+e.length:5+2*e.length)),n.write_shift(2,t),n.write_shift(a?1:2,e.length),a||n.write_shift(1,1),n.write_shift((a?1:2)*e.length,e,a?"sbcs":"utf16le");var s=n.length>n.l?n.slice(0,n.l):n;return s.l==null&&(s.l=s.length),s}var bTe=ug;function xH(t,e,r){var n=t.l+e,a=r.biff==8||!r.biff?4:2,s=t.read_shift(a),i=t.read_shift(a),l=t.read_shift(2),c=t.read_shift(2);return t.l=n,{s:{r:s,c:l},e:{r:i,c}}}function wTe(t,e){var r=e.biff==8||!e.biff?4:2,n=Yt(2*r+6);return n.write_shift(r,t.s.r),n.write_shift(r,t.e.r+1),n.write_shift(2,t.s.c),n.write_shift(2,t.e.c+1),n.write_shift(2,0),n}function NTe(t){var e=t.read_shift(2),r=t.read_shift(2),n=Rre(t);return{r:e,c:r,ixfe:n[0],rknum:n[1]}}function CTe(t,e){for(var r=t.l+e-2,n=t.read_shift(2),a=t.read_shift(2),s=[];t.l<r;)s.push(Rre(t));if(t.l!==r)throw new Error("MulRK read error");var i=t.read_shift(2);if(s.length!=i-a+1)throw new Error("MulRK length mismatch");return{r:n,c:a,C:i,rkrec:s}}function _Te(t,e){for(var r=t.l+e-2,n=t.read_shift(2),a=t.read_shift(2),s=[];t.l<r;)s.push(t.read_shift(2));if(t.l!==r)throw new Error("MulBlank read error");var i=t.read_shift(2);if(s.length!=i-a+1)throw new Error("MulBlank length mismatch");return{r:n,c:a,C:i,ixfe:s}}function ETe(t,e,r,n){var a={},s=t.read_shift(4),i=t.read_shift(4),l=t.read_shift(4),c=t.read_shift(2);return a.patternType=iPe[l>>26],n.cellStyles&&(a.alc=s&7,a.fWrap=s>>3&1,a.alcV=s>>4&7,a.fJustLast=s>>7&1,a.trot=s>>8&255,a.cIndent=s>>16&15,a.fShrinkToFit=s>>20&1,a.iReadOrder=s>>22&2,a.fAtrNum=s>>26&1,a.fAtrFnt=s>>27&1,a.fAtrAlc=s>>28&1,a.fAtrBdr=s>>29&1,a.fAtrPat=s>>30&1,a.fAtrProt=s>>31&1,a.dgLeft=i&15,a.dgRight=i>>4&15,a.dgTop=i>>8&15,a.dgBottom=i>>12&15,a.icvLeft=i>>16&127,a.icvRight=i>>23&127,a.grbitDiag=i>>30&3,a.icvTop=l&127,a.icvBottom=l>>7&127,a.icvDiag=l>>14&127,a.dgDiag=l>>21&15,a.icvFore=c&127,a.icvBack=c>>7&127,a.fsxButton=c>>14&1),a}function STe(t,e,r){var n={};return n.ifnt=t.read_shift(2),n.numFmtId=t.read_shift(2),n.flags=t.read_shift(2),n.fStyle=n.flags>>2&1,e-=6,n.data=ETe(t,e,n.fStyle,r),n}function vH(t,e,r,n){var a=r&&r.biff==5;n||(n=Yt(a?16:20)),n.write_shift(2,0),t.style?(n.write_shift(2,t.numFmtId||0),n.write_shift(2,65524)):(n.write_shift(2,t.numFmtId||0),n.write_shift(2,e<<4));var s=0;return t.numFmtId>0&&a&&(s|=1024),n.write_shift(4,s),n.write_shift(4,0),a||n.write_shift(4,0),n.write_shift(2,0),n}function ITe(t){t.l+=4;var e=[t.read_shift(2),t.read_shift(2)];if(e[0]!==0&&e[0]--,e[1]!==0&&e[1]--,e[0]>7||e[1]>7)throw new Error("Bad Gutters: "+e.join("|"));return e}function jTe(t){var e=Yt(8);return e.write_shift(4,0),e.write_shift(2,0),e.write_shift(2,0),e}function yH(t,e,r){var n=Rf(t);(r.biff==2||e==9)&&++t.l;var a=TPe(t);return n.val=a,n.t=a===!0||a===!1?"b":"e",n}function BTe(t,e,r,n,a,s){var i=Yt(8);return Rp(t,e,n,i),kre(r,s,i),i}function PTe(t,e,r){r.biffguess&&r.biff==2&&(r.biff=5);var n=Rf(t),a=ml(t);return n.val=a,n}function TTe(t,e,r,n){var a=Yt(14);return Rp(t,e,n,a),Op(r,a),a}var bH=VPe;function kTe(t,e,r){var n=t.l+e,a=t.read_shift(2),s=t.read_shift(2);if(r.sbcch=s,s==1025||s==14849)return[s,a];if(s<1||s>255)throw new Error("Unexpected SupBook type: "+s);for(var i=Dp(t,s),l=[];n>t.l;)l.push(uw(t));return[s,a,i,l]}function wH(t,e,r){var n=t.read_shift(2),a,s={fBuiltIn:n&1,fWantAdvise:n>>>1&1,fWantPict:n>>>2&1,fOle:n>>>3&1,fOleLink:n>>>4&1,cf:n>>>5&1023,fIcon:n>>>15&1};return r.sbcch===14849&&(a=$Pe(t,e-2,r)),s.body=a||t.read_shift(e-2),typeof a=="string"&&(s.Name=a),s}var FTe=["_xlnm.Consolidate_Area","_xlnm.Auto_Open","_xlnm.Auto_Close","_xlnm.Extract","_xlnm.Database","_xlnm.Criteria","_xlnm.Print_Area","_xlnm.Print_Titles","_xlnm.Recorder","_xlnm.Data_Form","_xlnm.Auto_Activate","_xlnm.Auto_Deactivate","_xlnm.Sheet_Title","_xlnm._FilterDatabase"];function NH(t,e,r){var n=t.l+e,a=t.read_shift(2),s=t.read_shift(1),i=t.read_shift(1),l=t.read_shift(r&&r.biff==2?1:2),c=0;(!r||r.biff>=5)&&(r.biff!=5&&(t.l+=2),c=t.read_shift(2),r.biff==5&&(t.l+=2),t.l+=4);var u=Dp(t,i,r);a&32&&(u=FTe[u.charCodeAt(0)]);var d=n-t.l;r&&r.biff==2&&--d;var f=n==t.l||l===0||!(d>0)?[]:W6e(t,d,r,l);return{chKey:s,Name:u,itab:c,rgce:f}}function Qre(t,e,r){if(r.biff<8)return OTe(t,e,r);for(var n=[],a=t.l+e,s=t.read_shift(r.biff>8?4:2);s--!==0;)n.push(HPe(t,r.biff>8?12:6,r));if(t.l!=a)throw new Error("Bad ExternSheet: "+t.l+" != "+a);return n}function OTe(t,e,r){t[t.l+1]==3&&t[t.l]++;var n=cw(t,e,r);return n.charCodeAt(0)==3?n.slice(1):n}function DTe(t,e,r){if(r.biff<8){t.l+=e;return}var n=t.read_shift(2),a=t.read_shift(2),s=Dp(t,n,r),i=Dp(t,a,r);return[s,i]}function RTe(t,e,r){var n=Lre(t);t.l++;var a=t.read_shift(1);return e-=8,[X6e(t,e,r),a,n]}function CH(t,e,r){var n=KPe(t);switch(r.biff){case 2:t.l++,e-=7;break;case 3:case 4:t.l+=2,e-=8;break;default:t.l+=6,e-=12}return[n,q6e(t,e,r)]}function MTe(t){var e=t.read_shift(4)!==0,r=t.read_shift(4)!==0,n=t.read_shift(4);return[e,r,n]}function LTe(t,e,r){if(!(r.biff<8)){var n=t.read_shift(2),a=t.read_shift(2),s=t.read_shift(2),i=t.read_shift(2),l=ug(t,0,r);return r.biff<8&&t.read_shift(1),[{r:n,c:a},l,i,s]}}function UTe(t,e,r){return LTe(t,e,r)}function QTe(t,e){for(var r=[],n=t.read_shift(2);n--;)r.push(B4(t));return r}function VTe(t){var e=Yt(2+t.length*8);e.write_shift(2,t.length);for(var r=0;r<t.length;++r)Mre(t[r],e);return e}function HTe(t,e,r){if(r&&r.biff<8)return KTe(t,e,r);var n=Ure(t),a=WPe(t,e-22,n[1]);return{cmo:n,ft:a}}var $Te={8:function(t,e){var r=t.l+e;t.l+=10;var n=t.read_shift(2);t.l+=4,t.l+=2,t.l+=2,t.l+=2,t.l+=4;var a=t.read_shift(1);return t.l+=a,t.l=r,{fmt:n}}};function KTe(t,e,r){t.l+=4;var n=t.read_shift(2),a=t.read_shift(2),s=t.read_shift(2);t.l+=2,t.l+=2,t.l+=2,t.l+=2,t.l+=2,t.l+=2,t.l+=2,t.l+=2,t.l+=2,t.l+=6,e-=36;var i=[];return i.push(($Te[n]||yl)(t,e,r)),{cmo:[a,n,s],ft:i}}function GTe(t,e,r){var n=t.l,a="";try{t.l+=4;var s=(r.lastobj||{cmo:[0,0]}).cmo[1],i;[0,5,7,11,12,14].indexOf(s)==-1?t.l+=6:i=OPe(t,6,r);var l=t.read_shift(2);t.read_shift(2),gi(t,2);var c=t.read_shift(2);t.l+=c;for(var u=1;u<t.lens.length-1;++u){if(t.l-n!=t.lens[u])throw new Error("TxO: bad continue record");var d=t[t.l],f=Dp(t,t.lens[u+1]-t.lens[u]-1);if(a+=f,a.length>=(d?l:2*l))break}if(a.length!==l&&a.length!==l*2)throw new Error("cchText: "+l+" != "+a.length);return t.l=n+e,{t:a}}catch{return t.l=n+e,{t:a}}}function qTe(t,e){var r=B4(t);t.l+=16;var n=LPe(t,e-24);return[r,n]}function zTe(t){var e=Yt(24),r=Ps(t[0]);e.write_shift(2,r.r),e.write_shift(2,r.r),e.write_shift(2,r.c),e.write_shift(2,r.c);for(var n="d0 c9 ea 79 f9 ba ce 11 8c 82 00 aa 00 4b a9 0b".split(" "),a=0;a<16;++a)e.write_shift(1,parseInt(n[a],16));return fo([e,UPe(t[1])])}function WTe(t,e){t.read_shift(2);var r=B4(t),n=t.read_shift((e-10)/2,"dbcs-cont");return n=n.replace(Vl,""),[r,n]}function XTe(t){var e=t[1].Tooltip,r=Yt(10+2*(e.length+1));r.write_shift(2,2048);var n=Ps(t[0]);r.write_shift(2,n.r),r.write_shift(2,n.r),r.write_shift(2,n.c),r.write_shift(2,n.c);for(var a=0;a<e.length;++a)r.write_shift(2,e.charCodeAt(a));return r.write_shift(2,0),r}function YTe(t){var e=[0,0],r;return r=t.read_shift(2),e[0]=lH[r]||r,r=t.read_shift(2),e[1]=lH[r]||r,e}function JTe(t){return t||(t=Yt(4)),t.write_shift(2,1),t.write_shift(2,1),t}function ZTe(t){for(var e=t.read_shift(2),r=[];e-- >0;)r.push(Dre(t));return r}function eke(t){for(var e=t.read_shift(2),r=[];e-- >0;)r.push(Dre(t));return r}function tke(t){t.l+=2;var e={cxfs:0,crc:0};return e.cxfs=t.read_shift(2),e.crc=t.read_shift(4),e}function Vre(t,e,r){if(!r.cellStyles)return yl(t,e);var n=r&&r.biff>=12?4:2,a=t.read_shift(n),s=t.read_shift(n),i=t.read_shift(n),l=t.read_shift(n),c=t.read_shift(2);n==2&&(t.l+=2);var u={s:a,e:s,w:i,ixfe:l,flags:c};return(r.biff>=5||!r.biff)&&(u.level=c>>8&7),u}function rke(t,e){var r=Yt(12);r.write_shift(2,e),r.write_shift(2,e),r.write_shift(2,t.width*256),r.write_shift(2,0);var n=0;return t.hidden&&(n|=1),r.write_shift(1,n),n=t.level||0,r.write_shift(1,n),r.write_shift(2,0),r}function nke(t,e){var r={};return e<32||(t.l+=16,r.header=ml(t),r.footer=ml(t),t.l+=2),r}function ake(t,e,r){var n={area:!1};if(r.biff!=5)return t.l+=e,n;var a=t.read_shift(1);return t.l+=3,a&16&&(n.area=!0),n}function ske(t){for(var e=Yt(2*t),r=0;r<t;++r)e.write_shift(2,r+1);return e}var ike=Rf,oke=Tre,lke=uw;function cke(t){var e=t.read_shift(2),r=t.read_shift(2),n=t.read_shift(4),a={fmt:e,env:r,len:n,data:t.slice(t.l,t.l+n)};return t.l+=n,a}function uke(t,e,r){r.biffguess&&r.biff==5&&(r.biff=2);var n=Rf(t);++t.l;var a=ug(t,e-7,r);return n.t="str",n.val=a,n}function dke(t){var e=Rf(t);++t.l;var r=ml(t);return e.t="n",e.val=r,e}function fke(t,e,r){var n=Yt(15);return hw(n,t,e),n.write_shift(8,r,"f"),n}function Ake(t){var e=Rf(t);++t.l;var r=t.read_shift(2);return e.t="n",e.val=r,e}function hke(t,e,r){var n=Yt(9);return hw(n,t,e),n.write_shift(2,r),n}function mke(t){var e=t.read_shift(1);return e===0?(t.l++,""):t.read_shift(e,"sbcs-cont")}function pke(t,e){t.l+=6,t.l+=2,t.l+=1,t.l+=3,t.l+=1,t.l+=e-13}function gke(t,e,r){var n=t.l+e,a=Rf(t),s=t.read_shift(2),i=Dp(t,s,r);return t.l=n,a.t="str",a.val=i,a}var xke=[2,3,48,49,131,139,140,245],fk=function(){var t={1:437,2:850,3:1252,4:1e4,100:852,101:866,102:865,103:861,104:895,105:620,106:737,107:857,120:950,121:949,122:936,123:932,124:874,125:1255,126:1256,150:10007,151:10029,152:10006,200:1250,201:1251,202:1254,203:1253,0:20127,8:865,9:437,10:850,11:437,13:437,14:850,15:437,16:850,17:437,18:850,19:932,20:850,21:437,22:850,23:865,24:437,25:437,26:850,27:437,28:863,29:850,31:852,34:852,35:852,36:860,37:850,38:866,55:850,64:852,77:936,78:949,79:950,80:874,87:1252,88:1252,89:1252,108:863,134:737,135:852,136:857,204:1257,255:16969},e=S4({1:437,2:850,3:1252,4:1e4,100:852,101:866,102:865,103:861,104:895,105:620,106:737,107:857,120:950,121:949,122:936,123:932,124:874,125:1255,126:1256,150:10007,151:10029,152:10006,200:1250,201:1251,202:1254,203:1253,0:20127});function r(l,c){var u=[],d=K0(1);switch(c.type){case"base64":d=Uc(Zc(l));break;case"binary":d=Uc(l);break;case"buffer":case"array":d=l;break}Uo(d,0);var f=d.read_shift(1),h=!!(f&136),A=!1,m=!1;switch(f){case 2:break;case 3:break;case 48:A=!0,h=!0;break;case 49:A=!0,h=!0;break;case 131:break;case 139:break;case 140:m=!0;break;case 245:break;default:throw new Error("DBF Unsupported Version: "+f.toString(16))}var p=0,g=521;f==2&&(p=d.read_shift(2)),d.l+=3,f!=2&&(p=d.read_shift(4)),p>1048576&&(p=1e6),f!=2&&(g=d.read_shift(2));var x=d.read_shift(2),y=c.codepage||1252;f!=2&&(d.l+=16,d.read_shift(1),d[d.l]!==0&&(y=t[d[d.l]]),d.l+=1,d.l+=2),m&&(d.l+=36);for(var b=[],w={},j=Math.min(d.length,f==2?521:g-10-(A?264:0)),I=m?32:11;d.l<j&&d[d.l]!=13;)switch(w={},w.name=e2.utils.decode(y,d.slice(d.l,d.l+I)).replace(/[\u0000\r\n].*$/g,""),d.l+=I,w.type=String.fromCharCode(d.read_shift(1)),f!=2&&!m&&(w.offset=d.read_shift(4)),w.len=d.read_shift(1),f==2&&(w.offset=d.read_shift(2)),w.dec=d.read_shift(1),w.name.length&&b.push(w),f!=2&&(d.l+=m?13:14),w.type){case"B":(!A||w.len!=8)&&c.WTF&&console.log("Skipping "+w.name+":"+w.type);break;case"G":case"P":c.WTF&&console.log("Skipping "+w.name+":"+w.type);break;case"+":case"0":case"@":case"C":case"D":case"F":case"I":case"L":case"M":case"N":case"O":case"T":case"Y":break;default:throw new Error("Unknown Field Type: "+w.type)}if(d[d.l]!==13&&(d.l=g-1),d.read_shift(1)!==13)throw new Error("DBF Terminator not found "+d.l+" "+d[d.l]);d.l=g;var _=0,E=0;for(u[0]=[],E=0;E!=b.length;++E)u[0][E]=b[E].name;for(;p-- >0;){if(d[d.l]===42){d.l+=x;continue}for(++d.l,u[++_]=[],E=0,E=0;E!=b.length;++E){var S=d.slice(d.l,d.l+b[E].len);d.l+=b[E].len,Uo(S,0);var k=e2.utils.decode(y,S);switch(b[E].type){case"C":k.trim().length&&(u[_][E]=k.replace(/\s+$/,""));break;case"D":k.length===8?u[_][E]=new Date(+k.slice(0,4),+k.slice(4,6)-1,+k.slice(6,8)):u[_][E]=k;break;case"F":u[_][E]=parseFloat(k.trim());break;case"+":case"I":u[_][E]=m?S.read_shift(-4,"i")^2147483648:S.read_shift(4,"i");break;case"L":switch(k.trim().toUpperCase()){case"Y":case"T":u[_][E]=!0;break;case"N":case"F":u[_][E]=!1;break;case"":case"?":break;default:throw new Error("DBF Unrecognized L:|"+k+"|")}break;case"M":if(!h)throw new Error("DBF Unexpected MEMO for type "+f.toString(16));u[_][E]="##MEMO##"+(m?parseInt(k.trim(),10):S.read_shift(4));break;case"N":k=k.replace(/\u0000/g,"").trim(),k&&k!="."&&(u[_][E]=+k||0);break;case"@":u[_][E]=new Date(S.read_shift(-8,"f")-621356832e5);break;case"T":u[_][E]=new Date((S.read_shift(4)-2440588)*864e5+S.read_shift(4));break;case"Y":u[_][E]=S.read_shift(4,"i")/1e4+S.read_shift(4,"i")/1e4*Math.pow(2,32);break;case"O":u[_][E]=-S.read_shift(-8,"f");break;case"B":if(A&&b[E].len==8){u[_][E]=S.read_shift(8,"f");break}case"G":case"P":S.l+=b[E].len;break;case"0":if(b[E].name==="_NullFlags")break;default:throw new Error("DBF Unsupported data type "+b[E].type)}}}if(f!=2&&d.l<d.length&&d[d.l++]!=26)throw new Error("DBF EOF Marker missing "+(d.l-1)+" of "+d.length+" "+d[d.l-1].toString(16));return c&&c.sheetRows&&(u=u.slice(0,c.sheetRows)),c.DBF=b,u}function n(l,c){var u=c||{};u.dateNF||(u.dateNF="yyyymmdd");var d=Hv(r(l,u),u);return d["!cols"]=u.DBF.map(function(f){return{wch:f.len,DBF:f}}),delete u.DBF,d}function a(l,c){try{return sm(n(l,c),c)}catch(u){if(c&&c.WTF)throw u}return{SheetNames:[],Sheets:{}}}var s={B:8,C:250,L:1,D:8,"?":0,"":0};function i(l,c){var u=c||{};if(+u.codepage>=0&&Nd(+u.codepage),u.type=="string")throw new Error("Cannot write DBF to JS string");var d=hc(),f=bS(l,{header:1,raw:!0,cellDates:!0}),h=f[0],A=f.slice(1),m=l["!cols"]||[],p=0,g=0,x=0,y=1;for(p=0;p<h.length;++p){if(((m[p]||{}).DBF||{}).name){h[p]=m[p].DBF.name,++x;continue}if(h[p]!=null){if(++x,typeof h[p]=="number"&&(h[p]=h[p].toString(10)),typeof h[p]!="string")throw new Error("DBF Invalid column name "+h[p]+" |"+typeof h[p]+"|");if(h.indexOf(h[p])!==p){for(g=0;g<1024;++g)if(h.indexOf(h[p]+"_"+g)==-1){h[p]+="_"+g;break}}}}var b=Xn(l["!ref"]),w=[],j=[],I=[];for(p=0;p<=b.e.c-b.s.c;++p){var _="",E="",S=0,k=[];for(g=0;g<A.length;++g)A[g][p]!=null&&k.push(A[g][p]);if(k.length==0||h[p]==null){w[p]="?";continue}for(g=0;g<k.length;++g){switch(typeof k[g]){case"number":E="B";break;case"string":E="C";break;case"boolean":E="L";break;case"object":E=k[g]instanceof Date?"D":"C";break;default:E="C"}S=Math.max(S,String(k[g]).length),_=_&&_!=E?"C":E}S>250&&(S=250),E=((m[p]||{}).DBF||{}).type,E=="C"&&m[p].DBF.len>S&&(S=m[p].DBF.len),_=="B"&&E=="N"&&(_="N",I[p]=m[p].DBF.dec,S=m[p].DBF.len),j[p]=_=="C"||E=="N"?S:s[_]||0,y+=j[p],w[p]=_}var P=d.next(32);for(P.write_shift(4,318902576),P.write_shift(4,A.length),P.write_shift(2,296+32*x),P.write_shift(2,y),p=0;p<4;++p)P.write_shift(4,0);for(P.write_shift(4,0|(+e[Pte]||3)<<8),p=0,g=0;p<h.length;++p)if(h[p]!=null){var T=d.next(32),F=(h[p].slice(-10)+"\0\0\0\0\0\0\0\0\0\0\0").slice(0,11);T.write_shift(1,F,"sbcs"),T.write_shift(1,w[p]=="?"?"C":w[p],"sbcs"),T.write_shift(4,g),T.write_shift(1,j[p]||s[w[p]]||0),T.write_shift(1,I[p]||0),T.write_shift(1,2),T.write_shift(4,0),T.write_shift(1,0),T.write_shift(4,0),T.write_shift(4,0),g+=j[p]||s[w[p]]||0}var Y=d.next(264);for(Y.write_shift(4,13),p=0;p<65;++p)Y.write_shift(4,0);for(p=0;p<A.length;++p){var he=d.next(y);for(he.write_shift(1,0),g=0;g<h.length;++g)if(h[g]!=null)switch(w[g]){case"L":he.write_shift(1,A[p][g]==null?63:A[p][g]?84:70);break;case"B":he.write_shift(8,A[p][g]||0,"f");break;case"N":var ue="0";for(typeof A[p][g]=="number"&&(ue=A[p][g].toFixed(I[g]||0)),x=0;x<j[g]-ue.length;++x)he.write_shift(1,32);he.write_shift(1,ue,"sbcs");break;case"D":A[p][g]?(he.write_shift(4,("0000"+A[p][g].getFullYear()).slice(-4),"sbcs"),he.write_shift(2,("00"+(A[p][g].getMonth()+1)).slice(-2),"sbcs"),he.write_shift(2,("00"+A[p][g].getDate()).slice(-2),"sbcs")):he.write_shift(8,"00000000","sbcs");break;case"C":var fe=String(A[p][g]!=null?A[p][g]:"").slice(0,j[g]);for(he.write_shift(1,fe,"sbcs"),x=0;x<j[g]-fe.length;++x)he.write_shift(1,32);break}}return d.next(1).write_shift(1,26),d.end()}return{to_workbook:a,to_sheet:n,from_sheet:i}}(),Hre=function(){var t={AA:"",BA:"",CA:"",DA:195,HA:"",JA:197,AE:"",BE:"",CE:"",HE:"",AI:"",BI:"",CI:"",HI:"",AO:"",BO:"",CO:"",DO:213,HO:"",AU:"",BU:"",CU:"",HU:"",Aa:"",Ba:"",Ca:"",Da:227,Ha:"",Ja:229,Ae:"",Be:"",Ce:"",He:"",Ai:"",Bi:"",Ci:"",Hi:"",Ao:"",Bo:"",Co:"",Do:245,Ho:"",Au:"",Bu:"",Cu:"",Hu:"",KC:"",Kc:"",q:"",z:"",a:"",j:"",DN:209,Dn:241,Hy:255,S:169,c:170,R:174,"B ":180,0:176,1:177,2:178,3:179,5:181,6:182,7:183,Q:185,k:186,b:208,i:216,l:222,s:240,y:248,"!":161,'"':162,"#":163,"(":164,"%":165,"'":167,"H ":168,"+":171,";":187,"<":188,"=":189,">":190,"?":191,"{":223},e=new RegExp("\x1BN("+zs(t).join("|").replace(/\|\|\|/,"|\\||").replace(/([?()+])/g,"\\$1")+"|\\|)","gm"),r=function(h,A){var m=t[A];return typeof m=="number"?OV(m):m},n=function(h,A,m){var p=A.charCodeAt(0)-32<<4|m.charCodeAt(0)-48;return p==59?h:OV(p)};t["|"]=254;function a(h,A){switch(A.type){case"base64":return s(Zc(h),A);case"binary":return s(h,A);case"buffer":return s(En&&Buffer.isBuffer(h)?h.toString("binary"):am(h),A);case"array":return s(Fp(h),A)}throw new Error("Unrecognized type "+A.type)}function s(h,A){var m=h.split(/[\n\r]+/),p=-1,g=-1,x=0,y=0,b=[],w=[],j=null,I={},_=[],E=[],S=[],k=0,P;for(+A.codepage>=0&&Nd(+A.codepage);x!==m.length;++x){k=0;var T=m[x].trim().replace(/\x1B([\x20-\x2F])([\x30-\x3F])/g,n).replace(e,r),F=T.replace(/;;/g,"\0").split(";").map(function(M){return M.replace(/\u0000/g,";")}),Y=F[0],he;if(T.length>0)switch(Y){case"ID":break;case"E":break;case"B":break;case"O":break;case"W":break;case"P":F[1].charAt(0)=="P"&&w.push(T.slice(3).replace(/;;/g,";"));break;case"C":var ue=!1,fe=!1,me=!1,ne=!1,Pe=-1,Ie=-1;for(y=1;y<F.length;++y)switch(F[y].charAt(0)){case"A":break;case"X":g=parseInt(F[y].slice(1))-1,fe=!0;break;case"Y":for(p=parseInt(F[y].slice(1))-1,fe||(g=0),P=b.length;P<=p;++P)b[P]=[];break;case"K":he=F[y].slice(1),he.charAt(0)==='"'?he=he.slice(1,he.length-1):he==="TRUE"?he=!0:he==="FALSE"?he=!1:isNaN(Id(he))?isNaN(uv(he).getDate())||(he=as(he)):(he=Id(he),j!==null&&Qv(j)&&(he=j4(he))),ue=!0;break;case"E":ne=!0;var O=Qx(F[y].slice(1),{r:p,c:g});b[p][g]=[b[p][g],O];break;case"S":me=!0,b[p][g]=[b[p][g],"S5S"];break;case"G":break;case"R":Pe=parseInt(F[y].slice(1))-1;break;case"C":Ie=parseInt(F[y].slice(1))-1;break;default:if(A&&A.WTF)throw new Error("SYLK bad record "+T)}if(ue&&(b[p][g]&&b[p][g].length==2?b[p][g][0]=he:b[p][g]=he,j=null),me){if(ne)throw new Error("SYLK shared formula cannot have own formula");var H=Pe>-1&&b[Pe][Ie];if(!H||!H[1])throw new Error("SYLK shared formula cannot find base");b[p][g][1]=one(H[1],{r:p-Pe,c:g-Ie})}break;case"F":var R=0;for(y=1;y<F.length;++y)switch(F[y].charAt(0)){case"X":g=parseInt(F[y].slice(1))-1,++R;break;case"Y":for(p=parseInt(F[y].slice(1))-1,P=b.length;P<=p;++P)b[P]=[];break;case"M":k=parseInt(F[y].slice(1))/20;break;case"F":break;case"G":break;case"P":j=w[parseInt(F[y].slice(1))];break;case"S":break;case"D":break;case"N":break;case"W":for(S=F[y].slice(1).split(" "),P=parseInt(S[0],10);P<=parseInt(S[1],10);++P)k=parseInt(S[2],10),E[P-1]=k===0?{hidden:!0}:{wch:k},G0(E[P-1]);break;case"C":g=parseInt(F[y].slice(1))-1,E[g]||(E[g]={});break;case"R":p=parseInt(F[y].slice(1))-1,_[p]||(_[p]={}),k>0?(_[p].hpt=k,_[p].hpx=fv(k)):k===0&&(_[p].hidden=!0);break;default:if(A&&A.WTF)throw new Error("SYLK bad record "+T)}R<1&&(j=null);break;default:if(A&&A.WTF)throw new Error("SYLK bad record "+T)}}return _.length>0&&(I["!rows"]=_),E.length>0&&(I["!cols"]=E),A&&A.sheetRows&&(b=b.slice(0,A.sheetRows)),[b,I]}function i(h,A){var m=a(h,A),p=m[0],g=m[1],x=Hv(p,A);return zs(g).forEach(function(y){x[y]=g[y]}),x}function l(h,A){return sm(i(h,A),A)}function c(h,A,m,p){var g="C;Y"+(m+1)+";X"+(p+1)+";K";switch(h.t){case"n":g+=h.v||0,h.f&&!h.F&&(g+=";E"+bD(h.f,{r:m,c:p}));break;case"b":g+=h.v?"TRUE":"FALSE";break;case"e":g+=h.w||h.v;break;case"d":g+='"'+(h.w||h.v)+'"';break;case"s":g+='"'+h.v.replace(/"/g,"").replace(/;/g,";;")+'"';break}return g}function u(h,A){A.forEach(function(m,p){var g="F;W"+(p+1)+" "+(p+1)+" ";m.hidden?g+="0":(typeof m.width=="number"&&!m.wpx&&(m.wpx=l2(m.width)),typeof m.wpx=="number"&&!m.wch&&(m.wch=c2(m.wpx)),typeof m.wch=="number"&&(g+=Math.round(m.wch))),g.charAt(g.length-1)!=" "&&h.push(g)})}function d(h,A){A.forEach(function(m,p){var g="F;";m.hidden?g+="M0;":m.hpt?g+="M"+20*m.hpt+";":m.hpx&&(g+="M"+20*u2(m.hpx)+";"),g.length>2&&h.push(g+"R"+(p+1))})}function f(h,A){var m=["ID;PWXL;N;E"],p=[],g=Xn(h["!ref"]),x,y=Array.isArray(h),b=`\r
`;m.push("P;PGeneral"),m.push("F;P0;DG0G8;M255"),h["!cols"]&&u(m,h["!cols"]),h["!rows"]&&d(m,h["!rows"]),m.push("B;Y"+(g.e.r-g.s.r+1)+";X"+(g.e.c-g.s.c+1)+";D"+[g.s.c,g.s.r,g.e.c,g.e.r].join(" "));for(var w=g.s.r;w<=g.e.r;++w)for(var j=g.s.c;j<=g.e.c;++j){var I=sn({r:w,c:j});x=y?(h[w]||[])[j]:h[I],!(!x||x.v==null&&(!x.f||x.F))&&p.push(c(x,h,w,j))}return m.join(b)+b+p.join(b)+b+"E"+b}return{to_workbook:l,to_sheet:i,from_sheet:f}}(),$re=function(){function t(s,i){switch(i.type){case"base64":return e(Zc(s),i);case"binary":return e(s,i);case"buffer":return e(En&&Buffer.isBuffer(s)?s.toString("binary"):am(s),i);case"array":return e(Fp(s),i)}throw new Error("Unrecognized type "+i.type)}function e(s,i){for(var l=s.split(`
`),c=-1,u=-1,d=0,f=[];d!==l.length;++d){if(l[d].trim()==="BOT"){f[++c]=[],u=0;continue}if(!(c<0)){var h=l[d].trim().split(","),A=h[0],m=h[1];++d;for(var p=l[d]||"";(p.match(/["]/g)||[]).length&1&&d<l.length-1;)p+=`
`+l[++d];switch(p=p.trim(),+A){case-1:if(p==="BOT"){f[++c]=[],u=0;continue}else if(p!=="EOD")throw new Error("Unrecognized DIF special command "+p);break;case 0:p==="TRUE"?f[c][u]=!0:p==="FALSE"?f[c][u]=!1:isNaN(Id(m))?isNaN(uv(m).getDate())?f[c][u]=m:f[c][u]=as(m):f[c][u]=Id(m),++u;break;case 1:p=p.slice(1,p.length-1),p=p.replace(/""/g,'"'),p&&p.match(/^=".*"$/)&&(p=p.slice(2,-1)),f[c][u++]=p!==""?p:null;break}if(p==="EOD")break}}return i&&i.sheetRows&&(f=f.slice(0,i.sheetRows)),f}function r(s,i){return Hv(t(s,i),i)}function n(s,i){return sm(r(s,i),i)}var a=function(){var s=function(c,u,d,f,h){c.push(u),c.push(d+","+f),c.push('"'+h.replace(/"/g,'""')+'"')},i=function(c,u,d,f){c.push(u+","+d),c.push(u==1?'"'+f.replace(/"/g,'""')+'"':f)};return function(c){var u=[],d=Xn(c["!ref"]),f,h=Array.isArray(c);s(u,"TABLE",0,1,"sheetjs"),s(u,"VECTORS",0,d.e.r-d.s.r+1,""),s(u,"TUPLES",0,d.e.c-d.s.c+1,""),s(u,"DATA",0,0,"");for(var A=d.s.r;A<=d.e.r;++A){i(u,-1,0,"BOT");for(var m=d.s.c;m<=d.e.c;++m){var p=sn({r:A,c:m});if(f=h?(c[A]||[])[m]:c[p],!f){i(u,1,0,"");continue}switch(f.t){case"n":var g=f.w;!g&&f.v!=null&&(g=f.v),g==null?f.f&&!f.F?i(u,1,0,"="+f.f):i(u,1,0,""):i(u,0,g,"V");break;case"b":i(u,0,f.v?1:0,f.v?"TRUE":"FALSE");break;case"s":i(u,1,0,isNaN(f.v)?f.v:'="'+f.v+'"');break;case"d":f.w||(f.w=qu(f.z||an[14],Gi(as(f.v)))),i(u,0,f.w,"V");break;default:i(u,1,0,"")}}}i(u,-1,0,"EOD");var x=`\r
`,y=u.join(x);return y}}();return{to_workbook:n,to_sheet:r,from_sheet:a}}(),Kre=function(){function t(f){return f.replace(/\\b/g,"\\").replace(/\\c/g,":").replace(/\\n/g,`
`)}function e(f){return f.replace(/\\/g,"\\b").replace(/:/g,"\\c").replace(/\n/g,"\\n")}function r(f,h){for(var A=f.split(`
`),m=-1,p=-1,g=0,x=[];g!==A.length;++g){var y=A[g].trim().split(":");if(y[0]==="cell"){var b=Ps(y[1]);if(x.length<=b.r)for(m=x.length;m<=b.r;++m)x[m]||(x[m]=[]);switch(m=b.r,p=b.c,y[2]){case"t":x[m][p]=t(y[3]);break;case"v":x[m][p]=+y[3];break;case"vtf":var w=y[y.length-1];case"vtc":switch(y[3]){case"nl":x[m][p]=!!+y[4];break;default:x[m][p]=+y[4];break}y[2]=="vtf"&&(x[m][p]=[x[m][p],w])}}}return h&&h.sheetRows&&(x=x.slice(0,h.sheetRows)),x}function n(f,h){return Hv(r(f,h),h)}function a(f,h){return sm(n(f,h),h)}var s=["socialcalc:version:1.5","MIME-Version: 1.0","Content-Type: multipart/mixed; boundary=SocialCalcSpreadsheetControlSave"].join(`
`),i=["--SocialCalcSpreadsheetControlSave","Content-type: text/plain; charset=UTF-8"].join(`
`)+`
`,l=["# SocialCalc Spreadsheet Control Save","part:sheet"].join(`
`),c="--SocialCalcSpreadsheetControlSave--";function u(f){if(!f||!f["!ref"])return"";for(var h=[],A=[],m,p="",g=mc(f["!ref"]),x=Array.isArray(f),y=g.s.r;y<=g.e.r;++y)for(var b=g.s.c;b<=g.e.c;++b)if(p=sn({r:y,c:b}),m=x?(f[y]||[])[b]:f[p],!(!m||m.v==null||m.t==="z")){switch(A=["cell",p,"t"],m.t){case"s":case"str":A.push(e(m.v));break;case"n":m.f?(A[2]="vtf",A[3]="n",A[4]=m.v,A[5]=e(m.f)):(A[2]="v",A[3]=m.v);break;case"b":A[2]="vt"+(m.f?"f":"c"),A[3]="nl",A[4]=m.v?"1":"0",A[5]=e(m.f||(m.v?"TRUE":"FALSE"));break;case"d":var w=Gi(as(m.v));A[2]="vtc",A[3]="nd",A[4]=""+w,A[5]=m.w||qu(m.z||an[14],w);break;case"e":continue}h.push(A.join(":"))}return h.push("sheet:c:"+(g.e.c-g.s.c+1)+":r:"+(g.e.r-g.s.r+1)+":tvf:1"),h.push("valueformat:1:text-wiki"),h.join(`
`)}function d(f){return[s,i,l,i,u(f),c].join(`
`)}return{to_workbook:a,to_sheet:n,from_sheet:d}}(),dv=function(){function t(d,f,h,A,m){m.raw?f[h][A]=d:d===""||(d==="TRUE"?f[h][A]=!0:d==="FALSE"?f[h][A]=!1:isNaN(Id(d))?isNaN(uv(d).getDate())?f[h][A]=d:f[h][A]=as(d):f[h][A]=Id(d))}function e(d,f){var h=f||{},A=[];if(!d||d.length===0)return A;for(var m=d.split(/[\r\n]/),p=m.length-1;p>=0&&m[p].length===0;)--p;for(var g=10,x=0,y=0;y<=p;++y)x=m[y].indexOf(" "),x==-1?x=m[y].length:x++,g=Math.max(g,x);for(y=0;y<=p;++y){A[y]=[];var b=0;for(t(m[y].slice(0,g).trim(),A,y,b,h),b=1;b<=(m[y].length-g)/10+1;++b)t(m[y].slice(g+(b-1)*10,g+b*10).trim(),A,y,b,h)}return h.sheetRows&&(A=A.slice(0,h.sheetRows)),A}var r={44:",",9:"	",59:";",124:"|"},n={44:3,9:2,59:1,124:0};function a(d){for(var f={},h=!1,A=0,m=0;A<d.length;++A)(m=d.charCodeAt(A))==34?h=!h:!h&&m in r&&(f[m]=(f[m]||0)+1);m=[];for(A in f)Object.prototype.hasOwnProperty.call(f,A)&&m.push([f[A],A]);if(!m.length){f=n;for(A in f)Object.prototype.hasOwnProperty.call(f,A)&&m.push([f[A],A])}return m.sort(function(p,g){return p[0]-g[0]||n[p[1]]-n[g[1]]}),r[m.pop()[1]]||44}function s(d,f){var h=f||{},A="",m=h.dense?[]:{},p={s:{c:0,r:0},e:{c:0,r:0}};d.slice(0,4)=="sep="?d.charCodeAt(5)==13&&d.charCodeAt(6)==10?(A=d.charAt(4),d=d.slice(7)):d.charCodeAt(5)==13||d.charCodeAt(5)==10?(A=d.charAt(4),d=d.slice(6)):A=a(d.slice(0,1024)):h&&h.FS?A=h.FS:A=a(d.slice(0,1024));var g=0,x=0,y=0,b=0,w=0,j=A.charCodeAt(0),I=!1,_=0,E=d.charCodeAt(0);d=d.replace(/\r\n/mg,`
`);var S=h.dateNF!=null?aBe(h.dateNF):null;function k(){var P=d.slice(b,w),T={};if(P.charAt(0)=='"'&&P.charAt(P.length-1)=='"'&&(P=P.slice(1,-1).replace(/""/g,'"')),P.length===0)T.t="z";else if(h.raw)T.t="s",T.v=P;else if(P.trim().length===0)T.t="s",T.v=P;else if(P.charCodeAt(0)==61)P.charCodeAt(1)==34&&P.charCodeAt(P.length-1)==34?(T.t="s",T.v=P.slice(2,-1).replace(/""/g,'"')):kOe(P)?(T.t="n",T.f=P.slice(1)):(T.t="s",T.v=P);else if(P=="TRUE")T.t="b",T.v=!0;else if(P=="FALSE")T.t="b",T.v=!1;else if(!isNaN(y=Id(P)))T.t="n",h.cellText!==!1&&(T.w=P),T.v=y;else if(!isNaN(uv(P).getDate())||S&&P.match(S)){T.z=h.dateNF||an[14];var F=0;S&&P.match(S)&&(P=sBe(P,h.dateNF,P.match(S)||[]),F=1),h.cellDates?(T.t="d",T.v=as(P,F)):(T.t="n",T.v=Gi(as(P,F))),h.cellText!==!1&&(T.w=qu(T.z,T.v instanceof Date?Gi(T.v):T.v)),h.cellNF||delete T.z}else T.t="s",T.v=P;if(T.t=="z"||(h.dense?(m[g]||(m[g]=[]),m[g][x]=T):m[sn({c:x,r:g})]=T),b=w+1,E=d.charCodeAt(b),p.e.c<x&&(p.e.c=x),p.e.r<g&&(p.e.r=g),_==j)++x;else if(x=0,++g,h.sheetRows&&h.sheetRows<=g)return!0}e:for(;w<d.length;++w)switch(_=d.charCodeAt(w)){case 34:E===34&&(I=!I);break;case j:case 10:case 13:if(!I&&k())break e;break}return w-b>0&&k(),m["!ref"]=vn(p),m}function i(d,f){return!(f&&f.PRN)||f.FS||d.slice(0,4)=="sep="||d.indexOf("	")>=0||d.indexOf(",")>=0||d.indexOf(";")>=0?s(d,f):Hv(e(d,f),f)}function l(d,f){var h="",A=f.type=="string"?[0,0,0,0]:jD(d,f);switch(f.type){case"base64":h=Zc(d);break;case"binary":h=d;break;case"buffer":f.codepage==65001?h=d.toString("utf8"):f.codepage&&typeof e2<"u"||(h=En&&Buffer.isBuffer(d)?d.toString("binary"):am(d));break;case"array":h=Fp(d);break;case"string":h=d;break;default:throw new Error("Unrecognized type "+f.type)}return A[0]==239&&A[1]==187&&A[2]==191?h=Ba(h.slice(3)):f.type!="string"&&f.type!="buffer"&&f.codepage==65001?h=Ba(h):f.type=="binary"&&typeof e2<"u",h.slice(0,19)=="socialcalc:version:"?Kre.to_sheet(f.type=="string"?h:Ba(h),f):i(h,f)}function c(d,f){return sm(l(d,f),f)}function u(d){for(var f=[],h=Xn(d["!ref"]),A,m=Array.isArray(d),p=h.s.r;p<=h.e.r;++p){for(var g=[],x=h.s.c;x<=h.e.c;++x){var y=sn({r:p,c:x});if(A=m?(d[p]||[])[x]:d[y],!A||A.v==null){g.push("          ");continue}for(var b=(A.w||(UA(A),A.w)||"").slice(0,10);b.length<10;)b+=" ";g.push(b+(x===0?" ":""))}f.push(g.join(""))}return f.join(`
`)}return{to_workbook:c,to_sheet:l,from_sheet:u}}();function vke(t,e){var r=e||{},n=!!r.WTF;r.WTF=!0;try{var a=Hre.to_workbook(t,r);return r.WTF=n,a}catch(s){if(r.WTF=n,!s.message.match(/SYLK bad record ID/)&&n)throw s;return dv.to_workbook(t,e)}}var dp=function(){function t(O,H,R){if(O){Uo(O,O.l||0);for(var M=R.Enum||Pe;O.l<O.length;){var K=O.read_shift(2),W=M[K]||M[65535],D=O.read_shift(2),L=O.l+D,Z=W.f&&W.f(O,D,R);if(O.l=L,H(Z,W,K))return}}}function e(O,H){switch(H.type){case"base64":return r(Uc(Zc(O)),H);case"binary":return r(Uc(O),H);case"buffer":case"array":return r(O,H)}throw"Unsupported type "+H.type}function r(O,H){if(!O)return O;var R=H||{},M=R.dense?[]:{},K="Sheet1",W="",D=0,L={},Z=[],ge=[],U={s:{r:0,c:0},e:{r:0,c:0}},Ge=R.sheetRows||0;if(O[2]==0&&(O[3]==8||O[3]==9)&&O.length>=16&&O[14]==5&&O[15]===108)throw new Error("Unsupported Works 3 for Mac file");if(O[2]==2)R.Enum=Pe,t(O,function(z,Ae,ye){switch(ye){case 0:R.vers=z,z>=4096&&(R.qpro=!0);break;case 6:U=z;break;case 204:z&&(W=z);break;case 222:W=z;break;case 15:case 51:R.qpro||(z[1].v=z[1].v.slice(1));case 13:case 14:case 16:ye==14&&(z[2]&112)==112&&(z[2]&15)>1&&(z[2]&15)<15&&(z[1].z=R.dateNF||an[14],R.cellDates&&(z[1].t="d",z[1].v=j4(z[1].v))),R.qpro&&z[3]>D&&(M["!ref"]=vn(U),L[K]=M,Z.push(K),M=R.dense?[]:{},U={s:{r:0,c:0},e:{r:0,c:0}},D=z[3],K=W||"Sheet"+(D+1),W="");var Qe=R.dense?(M[z[0].r]||[])[z[0].c]:M[sn(z[0])];if(Qe){Qe.t=z[1].t,Qe.v=z[1].v,z[1].z!=null&&(Qe.z=z[1].z),z[1].f!=null&&(Qe.f=z[1].f);break}R.dense?(M[z[0].r]||(M[z[0].r]=[]),M[z[0].r][z[0].c]=z[1]):M[sn(z[0])]=z[1];break}},R);else if(O[2]==26||O[2]==14)R.Enum=Ie,O[2]==14&&(R.qpro=!0,O.l=0),t(O,function(z,Ae,ye){switch(ye){case 204:K=z;break;case 22:z[1].v=z[1].v.slice(1);case 23:case 24:case 25:case 37:case 39:case 40:if(z[3]>D&&(M["!ref"]=vn(U),L[K]=M,Z.push(K),M=R.dense?[]:{},U={s:{r:0,c:0},e:{r:0,c:0}},D=z[3],K="Sheet"+(D+1)),Ge>0&&z[0].r>=Ge)break;R.dense?(M[z[0].r]||(M[z[0].r]=[]),M[z[0].r][z[0].c]=z[1]):M[sn(z[0])]=z[1],U.e.c<z[0].c&&(U.e.c=z[0].c),U.e.r<z[0].r&&(U.e.r=z[0].r);break;case 27:z[14e3]&&(ge[z[14e3][0]]=z[14e3][1]);break;case 1537:ge[z[0]]=z[1],z[0]==D&&(K=z[1]);break}},R);else throw new Error("Unrecognized LOTUS BOF "+O[2]);if(M["!ref"]=vn(U),L[W||K]=M,Z.push(W||K),!ge.length)return{SheetNames:Z,Sheets:L};for(var ie={},J=[],je=0;je<ge.length;++je)L[Z[je]]?(J.push(ge[je]||Z[je]),ie[ge[je]]=L[ge[je]]||L[Z[je]]):(J.push(ge[je]),ie[ge[je]]={"!ref":"A1"});return{SheetNames:J,Sheets:ie}}function n(O,H){var R=H||{};if(+R.codepage>=0&&Nd(+R.codepage),R.type=="string")throw new Error("Cannot write WK1 to JS string");var M=hc(),K=Xn(O["!ref"]),W=Array.isArray(O),D=[];wr(M,0,s(1030)),wr(M,6,c(K));for(var L=Math.min(K.e.r,8191),Z=K.s.r;Z<=L;++Z)for(var ge=di(Z),U=K.s.c;U<=K.e.c;++U){Z===K.s.r&&(D[U]=Bs(U));var Ge=D[U]+ge,ie=W?(O[Z]||[])[U]:O[Ge];if(!(!ie||ie.t=="z"))if(ie.t=="n")(ie.v|0)==ie.v&&ie.v>=-32768&&ie.v<=32767?wr(M,13,A(Z,U,ie.v)):wr(M,14,p(Z,U,ie.v));else{var J=UA(ie);wr(M,15,f(Z,U,J.slice(0,239)))}}return wr(M,1),M.end()}function a(O,H){var R=H||{};if(+R.codepage>=0&&Nd(+R.codepage),R.type=="string")throw new Error("Cannot write WK3 to JS string");var M=hc();wr(M,0,i(O));for(var K=0,W=0;K<O.SheetNames.length;++K)(O.Sheets[O.SheetNames[K]]||{})["!ref"]&&wr(M,27,ne(O.SheetNames[K],W++));var D=0;for(K=0;K<O.SheetNames.length;++K){var L=O.Sheets[O.SheetNames[K]];if(!(!L||!L["!ref"])){for(var Z=Xn(L["!ref"]),ge=Array.isArray(L),U=[],Ge=Math.min(Z.e.r,8191),ie=Z.s.r;ie<=Ge;++ie)for(var J=di(ie),je=Z.s.c;je<=Z.e.c;++je){ie===Z.s.r&&(U[je]=Bs(je));var z=U[je]+J,Ae=ge?(L[ie]||[])[je]:L[z];if(!(!Ae||Ae.t=="z"))if(Ae.t=="n")wr(M,23,k(ie,je,D,Ae.v));else{var ye=UA(Ae);wr(M,22,_(ie,je,D,ye.slice(0,239)))}}++D}}return wr(M,1),M.end()}function s(O){var H=Yt(2);return H.write_shift(2,O),H}function i(O){var H=Yt(26);H.write_shift(2,4096),H.write_shift(2,4),H.write_shift(4,0);for(var R=0,M=0,K=0,W=0;W<O.SheetNames.length;++W){var D=O.SheetNames[W],L=O.Sheets[D];if(!(!L||!L["!ref"])){++K;var Z=mc(L["!ref"]);R<Z.e.r&&(R=Z.e.r),M<Z.e.c&&(M=Z.e.c)}}return R>8191&&(R=8191),H.write_shift(2,R),H.write_shift(1,K),H.write_shift(1,M),H.write_shift(2,0),H.write_shift(2,0),H.write_shift(1,1),H.write_shift(1,2),H.write_shift(4,0),H.write_shift(4,0),H}function l(O,H,R){var M={s:{c:0,r:0},e:{c:0,r:0}};return H==8&&R.qpro?(M.s.c=O.read_shift(1),O.l++,M.s.r=O.read_shift(2),M.e.c=O.read_shift(1),O.l++,M.e.r=O.read_shift(2),M):(M.s.c=O.read_shift(2),M.s.r=O.read_shift(2),H==12&&R.qpro&&(O.l+=2),M.e.c=O.read_shift(2),M.e.r=O.read_shift(2),H==12&&R.qpro&&(O.l+=2),M.s.c==65535&&(M.s.c=M.e.c=M.s.r=M.e.r=0),M)}function c(O){var H=Yt(8);return H.write_shift(2,O.s.c),H.write_shift(2,O.s.r),H.write_shift(2,O.e.c),H.write_shift(2,O.e.r),H}function u(O,H,R){var M=[{c:0,r:0},{t:"n",v:0},0,0];return R.qpro&&R.vers!=20768?(M[0].c=O.read_shift(1),M[3]=O.read_shift(1),M[0].r=O.read_shift(2),O.l+=2):(M[2]=O.read_shift(1),M[0].c=O.read_shift(2),M[0].r=O.read_shift(2)),M}function d(O,H,R){var M=O.l+H,K=u(O,H,R);if(K[1].t="s",R.vers==20768){O.l++;var W=O.read_shift(1);return K[1].v=O.read_shift(W,"utf8"),K}return R.qpro&&O.l++,K[1].v=O.read_shift(M-O.l,"cstr"),K}function f(O,H,R){var M=Yt(7+R.length);M.write_shift(1,255),M.write_shift(2,H),M.write_shift(2,O),M.write_shift(1,39);for(var K=0;K<M.length;++K){var W=R.charCodeAt(K);M.write_shift(1,W>=128?95:W)}return M.write_shift(1,0),M}function h(O,H,R){var M=u(O,H,R);return M[1].v=O.read_shift(2,"i"),M}function A(O,H,R){var M=Yt(7);return M.write_shift(1,255),M.write_shift(2,H),M.write_shift(2,O),M.write_shift(2,R,"i"),M}function m(O,H,R){var M=u(O,H,R);return M[1].v=O.read_shift(8,"f"),M}function p(O,H,R){var M=Yt(13);return M.write_shift(1,255),M.write_shift(2,H),M.write_shift(2,O),M.write_shift(8,R,"f"),M}function g(O,H,R){var M=O.l+H,K=u(O,H,R);if(K[1].v=O.read_shift(8,"f"),R.qpro)O.l=M;else{var W=O.read_shift(2);w(O.slice(O.l,O.l+W),K),O.l+=W}return K}function x(O,H,R){var M=H&32768;return H&=-32769,H=(M?O:0)+(H>=8192?H-16384:H),(M?"":"$")+(R?Bs(H):di(H))}var y={51:["FALSE",0],52:["TRUE",0],70:["LEN",1],80:["SUM",69],81:["AVERAGEA",69],82:["COUNTA",69],83:["MINA",69],84:["MAXA",69],111:["T",1]},b=["","","","","","","","","","+","-","*","/","^","=","<>","<=",">=","<",">","","","","","&","","","","","","",""];function w(O,H){Uo(O,0);for(var R=[],M=0,K="",W="",D="",L="";O.l<O.length;){var Z=O[O.l++];switch(Z){case 0:R.push(O.read_shift(8,"f"));break;case 1:W=x(H[0].c,O.read_shift(2),!0),K=x(H[0].r,O.read_shift(2),!1),R.push(W+K);break;case 2:{var ge=x(H[0].c,O.read_shift(2),!0),U=x(H[0].r,O.read_shift(2),!1);W=x(H[0].c,O.read_shift(2),!0),K=x(H[0].r,O.read_shift(2),!1),R.push(ge+U+":"+W+K)}break;case 3:if(O.l<O.length){console.error("WK1 premature formula end");return}break;case 4:R.push("("+R.pop()+")");break;case 5:R.push(O.read_shift(2));break;case 6:{for(var Ge="";Z=O[O.l++];)Ge+=String.fromCharCode(Z);R.push('"'+Ge.replace(/"/g,'""')+'"')}break;case 8:R.push("-"+R.pop());break;case 23:R.push("+"+R.pop());break;case 22:R.push("NOT("+R.pop()+")");break;case 20:case 21:L=R.pop(),D=R.pop(),R.push(["AND","OR"][Z-20]+"("+D+","+L+")");break;default:if(Z<32&&b[Z])L=R.pop(),D=R.pop(),R.push(D+b[Z]+L);else if(y[Z]){if(M=y[Z][1],M==69&&(M=O[O.l++]),M>R.length){console.error("WK1 bad formula parse 0x"+Z.toString(16)+":|"+R.join("|")+"|");return}var ie=R.slice(-M);R.length-=M,R.push(y[Z][0]+"("+ie.join(",")+")")}else return Z<=7?console.error("WK1 invalid opcode "+Z.toString(16)):Z<=24?console.error("WK1 unsupported op "+Z.toString(16)):Z<=30?console.error("WK1 invalid opcode "+Z.toString(16)):Z<=115?console.error("WK1 unsupported function opcode "+Z.toString(16)):console.error("WK1 unrecognized opcode "+Z.toString(16))}}R.length==1?H[1].f=""+R[0]:console.error("WK1 bad formula parse |"+R.join("|")+"|")}function j(O){var H=[{c:0,r:0},{t:"n",v:0},0];return H[0].r=O.read_shift(2),H[3]=O[O.l++],H[0].c=O[O.l++],H}function I(O,H){var R=j(O);return R[1].t="s",R[1].v=O.read_shift(H-4,"cstr"),R}function _(O,H,R,M){var K=Yt(6+M.length);K.write_shift(2,O),K.write_shift(1,R),K.write_shift(1,H),K.write_shift(1,39);for(var W=0;W<M.length;++W){var D=M.charCodeAt(W);K.write_shift(1,D>=128?95:D)}return K.write_shift(1,0),K}function E(O,H){var R=j(O);R[1].v=O.read_shift(2);var M=R[1].v>>1;if(R[1].v&1)switch(M&7){case 0:M=(M>>3)*5e3;break;case 1:M=(M>>3)*500;break;case 2:M=(M>>3)/20;break;case 3:M=(M>>3)/200;break;case 4:M=(M>>3)/2e3;break;case 5:M=(M>>3)/2e4;break;case 6:M=(M>>3)/16;break;case 7:M=(M>>3)/64;break}return R[1].v=M,R}function S(O,H){var R=j(O),M=O.read_shift(4),K=O.read_shift(4),W=O.read_shift(2);if(W==65535)return M===0&&K===3221225472?(R[1].t="e",R[1].v=15):M===0&&K===3489660928?(R[1].t="e",R[1].v=42):R[1].v=0,R;var D=W&32768;return W=(W&32767)-16446,R[1].v=(1-D*2)*(K*Math.pow(2,W+32)+M*Math.pow(2,W)),R}function k(O,H,R,M){var K=Yt(14);if(K.write_shift(2,O),K.write_shift(1,R),K.write_shift(1,H),M==0)return K.write_shift(4,0),K.write_shift(4,0),K.write_shift(2,65535),K;var W=0,D=0,L=0,Z=0;return M<0&&(W=1,M=-M),D=Math.log2(M)|0,M/=Math.pow(2,D-31),Z=M>>>0,Z&2147483648||(M/=2,++D,Z=M>>>0),M-=Z,Z|=2147483648,Z>>>=0,M*=Math.pow(2,32),L=M>>>0,K.write_shift(4,L),K.write_shift(4,Z),D+=16383+(W?32768:0),K.write_shift(2,D),K}function P(O,H){var R=S(O);return O.l+=H-14,R}function T(O,H){var R=j(O),M=O.read_shift(4);return R[1].v=M>>6,R}function F(O,H){var R=j(O),M=O.read_shift(8,"f");return R[1].v=M,R}function Y(O,H){var R=F(O);return O.l+=H-10,R}function he(O,H){return O[O.l+H-1]==0?O.read_shift(H,"cstr"):""}function ue(O,H){var R=O[O.l++];R>H-1&&(R=H-1);for(var M="";M.length<R;)M+=String.fromCharCode(O[O.l++]);return M}function fe(O,H,R){if(!(!R.qpro||H<21)){var M=O.read_shift(1);O.l+=17,O.l+=1,O.l+=2;var K=O.read_shift(H-21,"cstr");return[M,K]}}function me(O,H){for(var R={},M=O.l+H;O.l<M;){var K=O.read_shift(2);if(K==14e3){for(R[K]=[0,""],R[K][0]=O.read_shift(2);O[O.l];)R[K][1]+=String.fromCharCode(O[O.l]),O.l++;O.l++}}return R}function ne(O,H){var R=Yt(5+O.length);R.write_shift(2,14e3),R.write_shift(2,H);for(var M=0;M<O.length;++M){var K=O.charCodeAt(M);R[R.l++]=K>127?95:K}return R[R.l++]=0,R}var Pe={0:{n:"BOF",f:gi},1:{n:"EOF"},2:{n:"CALCMODE"},3:{n:"CALCORDER"},4:{n:"SPLIT"},5:{n:"SYNC"},6:{n:"RANGE",f:l},7:{n:"WINDOW1"},8:{n:"COLW1"},9:{n:"WINTWO"},10:{n:"COLW2"},11:{n:"NAME"},12:{n:"BLANK"},13:{n:"INTEGER",f:h},14:{n:"NUMBER",f:m},15:{n:"LABEL",f:d},16:{n:"FORMULA",f:g},24:{n:"TABLE"},25:{n:"ORANGE"},26:{n:"PRANGE"},27:{n:"SRANGE"},28:{n:"FRANGE"},29:{n:"KRANGE1"},32:{n:"HRANGE"},35:{n:"KRANGE2"},36:{n:"PROTEC"},37:{n:"FOOTER"},38:{n:"HEADER"},39:{n:"SETUP"},40:{n:"MARGINS"},41:{n:"LABELFMT"},42:{n:"TITLES"},43:{n:"SHEETJS"},45:{n:"GRAPH"},46:{n:"NGRAPH"},47:{n:"CALCCOUNT"},48:{n:"UNFORMATTED"},49:{n:"CURSORW12"},50:{n:"WINDOW"},51:{n:"STRING",f:d},55:{n:"PASSWORD"},56:{n:"LOCKED"},60:{n:"QUERY"},61:{n:"QUERYNAME"},62:{n:"PRINT"},63:{n:"PRINTNAME"},64:{n:"GRAPH2"},65:{n:"GRAPHNAME"},66:{n:"ZOOM"},67:{n:"SYMSPLIT"},68:{n:"NSROWS"},69:{n:"NSCOLS"},70:{n:"RULER"},71:{n:"NNAME"},72:{n:"ACOMM"},73:{n:"AMACRO"},74:{n:"PARSE"},102:{n:"PRANGES??"},103:{n:"RRANGES??"},104:{n:"FNAME??"},105:{n:"MRANGES??"},204:{n:"SHEETNAMECS",f:he},222:{n:"SHEETNAMELP",f:ue},65535:{n:""}},Ie={0:{n:"BOF"},1:{n:"EOF"},2:{n:"PASSWORD"},3:{n:"CALCSET"},4:{n:"WINDOWSET"},5:{n:"SHEETCELLPTR"},6:{n:"SHEETLAYOUT"},7:{n:"COLUMNWIDTH"},8:{n:"HIDDENCOLUMN"},9:{n:"USERRANGE"},10:{n:"SYSTEMRANGE"},11:{n:"ZEROFORCE"},12:{n:"SORTKEYDIR"},13:{n:"FILESEAL"},14:{n:"DATAFILLNUMS"},15:{n:"PRINTMAIN"},16:{n:"PRINTSTRING"},17:{n:"GRAPHMAIN"},18:{n:"GRAPHSTRING"},19:{n:"??"},20:{n:"ERRCELL"},21:{n:"NACELL"},22:{n:"LABEL16",f:I},23:{n:"NUMBER17",f:S},24:{n:"NUMBER18",f:E},25:{n:"FORMULA19",f:P},26:{n:"FORMULA1A"},27:{n:"XFORMAT",f:me},28:{n:"DTLABELMISC"},29:{n:"DTLABELCELL"},30:{n:"GRAPHWINDOW"},31:{n:"CPA"},32:{n:"LPLAUTO"},33:{n:"QUERY"},34:{n:"HIDDENSHEET"},35:{n:"??"},37:{n:"NUMBER25",f:T},38:{n:"??"},39:{n:"NUMBER27",f:F},40:{n:"FORMULA28",f:Y},142:{n:"??"},147:{n:"??"},150:{n:"??"},151:{n:"??"},152:{n:"??"},153:{n:"??"},154:{n:"??"},155:{n:"??"},156:{n:"??"},163:{n:"??"},174:{n:"??"},175:{n:"??"},176:{n:"??"},177:{n:"??"},184:{n:"??"},185:{n:"??"},186:{n:"??"},187:{n:"??"},188:{n:"??"},195:{n:"??"},201:{n:"??"},204:{n:"SHEETNAMECS",f:he},205:{n:"??"},206:{n:"??"},207:{n:"??"},208:{n:"??"},256:{n:"??"},259:{n:"??"},260:{n:"??"},261:{n:"??"},262:{n:"??"},263:{n:"??"},265:{n:"??"},266:{n:"??"},267:{n:"??"},268:{n:"??"},270:{n:"??"},271:{n:"??"},384:{n:"??"},389:{n:"??"},390:{n:"??"},393:{n:"??"},396:{n:"??"},512:{n:"??"},514:{n:"??"},513:{n:"??"},516:{n:"??"},517:{n:"??"},640:{n:"??"},641:{n:"??"},642:{n:"??"},643:{n:"??"},644:{n:"??"},645:{n:"??"},646:{n:"??"},647:{n:"??"},648:{n:"??"},658:{n:"??"},659:{n:"??"},660:{n:"??"},661:{n:"??"},662:{n:"??"},665:{n:"??"},666:{n:"??"},768:{n:"??"},772:{n:"??"},1537:{n:"SHEETINFOQP",f:fe},1600:{n:"??"},1602:{n:"??"},1793:{n:"??"},1794:{n:"??"},1795:{n:"??"},1796:{n:"??"},1920:{n:"??"},2048:{n:"??"},2049:{n:"??"},2052:{n:"??"},2688:{n:"??"},10998:{n:"??"},12849:{n:"??"},28233:{n:"??"},28484:{n:"??"},65535:{n:""}};return{sheet_to_wk1:n,book_to_wk3:a,to_workbook:e}}();function yke(t){var e={},r=t.match(wl),n=0,a=!1;if(r)for(;n!=r.length;++n){var s=ln(r[n]);switch(s[0].replace(/\w*:/g,"")){case"<condense":break;case"<extend":break;case"<shadow":if(!s.val)break;case"<shadow>":case"<shadow/>":e.shadow=1;break;case"</shadow>":break;case"<charset":if(s.val=="1")break;e.cp=G6[parseInt(s.val,10)];break;case"<outline":if(!s.val)break;case"<outline>":case"<outline/>":e.outline=1;break;case"</outline>":break;case"<rFont":e.name=s.val;break;case"<sz":e.sz=s.val;break;case"<strike":if(!s.val)break;case"<strike>":case"<strike/>":e.strike=1;break;case"</strike>":break;case"<u":if(!s.val)break;switch(s.val){case"double":e.uval="double";break;case"singleAccounting":e.uval="single-accounting";break;case"doubleAccounting":e.uval="double-accounting";break}case"<u>":case"<u/>":e.u=1;break;case"</u>":break;case"<b":if(s.val=="0")break;case"<b>":case"<b/>":e.b=1;break;case"</b>":break;case"<i":if(s.val=="0")break;case"<i>":case"<i/>":e.i=1;break;case"</i>":break;case"<color":s.rgb&&(e.color=s.rgb.slice(2,8));break;case"<color>":case"<color/>":case"</color>":break;case"<family":e.family=s.val;break;case"<family>":case"<family/>":case"</family>":break;case"<vertAlign":e.valign=s.val;break;case"<vertAlign>":case"<vertAlign/>":case"</vertAlign>":break;case"<scheme":break;case"<scheme>":case"<scheme/>":case"</scheme>":break;case"<extLst":case"<extLst>":case"</extLst>":break;case"<ext":a=!0;break;case"</ext>":a=!1;break;default:if(s[0].charCodeAt(1)!==47&&!a)throw new Error("Unrecognized rich format "+s[0])}}return e}var bke=function(){var t=n2("t"),e=n2("rPr");function r(s){var i=s.match(t);if(!i)return{t:"s",v:""};var l={t:"s",v:Wn(i[1])},c=s.match(e);return c&&(l.s=yke(c[1])),l}var n=/<(?:\w+:)?r>/g,a=/<\/(?:\w+:)?r>/;return function(i){return i.replace(n,"").split(a).map(r).filter(function(l){return l.v})}}(),wke=function(){var e=/(\r\n|\n)/g;function r(a,s,i){var l=[];a.u&&l.push("text-decoration: underline;"),a.uval&&l.push("text-underline-style:"+a.uval+";"),a.sz&&l.push("font-size:"+a.sz+"pt;"),a.outline&&l.push("text-effect: outline;"),a.shadow&&l.push("text-shadow: auto;"),s.push('<span style="'+l.join("")+'">'),a.b&&(s.push("<b>"),i.push("</b>")),a.i&&(s.push("<i>"),i.push("</i>")),a.strike&&(s.push("<s>"),i.push("</s>"));var c=a.valign||"";return c=="superscript"||c=="super"?c="sup":c=="subscript"&&(c="sub"),c!=""&&(s.push("<"+c+">"),i.push("</"+c+">")),i.push("</span>"),a}function n(a){var s=[[],a.v,[]];return a.v?(a.s&&r(a.s,s[0],s[2]),s[0].join("")+s[1].replace(e,"<br/>")+s[2].join("")):""}return function(s){return s.map(n).join("")}}(),Nke=/<(?:\w+:)?t[^>]*>([^<]*)<\/(?:\w+:)?t>/g,Cke=/<(?:\w+:)?r>/,_ke=/<(?:\w+:)?rPh.*?>([\s\S]*?)<\/(?:\w+:)?rPh>/g;function pD(t,e){var r=e?e.cellHTML:!0,n={};return t?(t.match(/^\s*<(?:\w+:)?t[^>]*>/)?(n.t=Wn(Ba(t.slice(t.indexOf(">")+1).split(/<\/(?:\w+:)?t>/)[0]||"")),n.r=Ba(t),r&&(n.h=rD(n.t))):t.match(Cke)&&(n.r=Ba(t),n.t=Wn(Ba((t.replace(_ke,"").match(Nke)||[]).join("").replace(wl,""))),r&&(n.h=wke(bke(n.r)))),n):{t:""}}var Eke=/<(?:\w+:)?sst([^>]*)>([\s\S]*)<\/(?:\w+:)?sst>/,Ske=/<(?:\w+:)?(?:si|sstItem)>/g,Ike=/<\/(?:\w+:)?(?:si|sstItem)>/;function jke(t,e){var r=[],n="";if(!t)return r;var a=t.match(Eke);if(a){n=a[2].replace(Ske,"").split(Ike);for(var s=0;s!=n.length;++s){var i=pD(n[s].trim(),e);i!=null&&(r[r.length]=i)}a=ln(a[1]),r.Count=a.count,r.Unique=a.uniqueCount}return r}var Bke=/^\s|\s$|[\t\n\r]/;function Gre(t,e){if(!e.bookSST)return"";var r=[Ai];r[r.length]=br("sst",null,{xmlns:sg[0],count:t.Count,uniqueCount:t.Unique});for(var n=0;n!=t.length;++n)if(t[n]!=null){var a=t[n],s="<si>";a.r?s+=a.r:(s+="<t",a.t||(a.t=""),a.t.match(Bke)&&(s+=' xml:space="preserve"'),s+=">"+Ca(a.t)+"</t>"),s+="</si>",r[r.length]=s}return r.length>2&&(r[r.length]="</sst>",r[1]=r[1].replace("/>",">")),r.join("")}function Pke(t){return[t.read_shift(4),t.read_shift(4)]}function Tke(t,e){var r=[],n=!1;return rh(t,function(s,i,l){switch(l){case 159:r.Count=s[0],r.Unique=s[1];break;case 19:r.push(s);break;case 160:return!0;case 35:n=!0;break;case 36:n=!1;break;default:if(i.T,!n||e.WTF)throw new Error("Unexpected record 0x"+l.toString(16))}}),r}function kke(t,e){return e||(e=Yt(8)),e.write_shift(4,t.Count),e.write_shift(4,t.Unique),e}var Fke=$Be;function Oke(t){var e=hc();ur(e,159,kke(t));for(var r=0;r<t.length;++r)ur(e,19,Fke(t[r]));return ur(e,160),e.end()}function qre(t){for(var e=[],r=t.split(""),n=0;n<r.length;++n)e[n]=r[n].charCodeAt(0);return e}function jA(t,e){var r={};return r.Major=t.read_shift(2),r.Minor=t.read_shift(2),e>=4&&(t.l+=e-4),r}function Dke(t){var e={};return e.id=t.read_shift(0,"lpp4"),e.R=jA(t,4),e.U=jA(t,4),e.W=jA(t,4),e}function Rke(t){for(var e=t.read_shift(4),r=t.l+e-4,n={},a=t.read_shift(4),s=[];a-- >0;)s.push({t:t.read_shift(4),v:t.read_shift(0,"lpp4")});if(n.name=t.read_shift(0,"lpp4"),n.comps=s,t.l!=r)throw new Error("Bad DataSpaceMapEntry: "+t.l+" != "+r);return n}function Mke(t){var e=[];t.l+=4;for(var r=t.read_shift(4);r-- >0;)e.push(Rke(t));return e}function Lke(t){var e=[];t.l+=4;for(var r=t.read_shift(4);r-- >0;)e.push(t.read_shift(0,"lpp4"));return e}function Uke(t){var e={};return t.read_shift(4),t.l+=4,e.id=t.read_shift(0,"lpp4"),e.name=t.read_shift(0,"lpp4"),e.R=jA(t,4),e.U=jA(t,4),e.W=jA(t,4),e}function Qke(t){var e=Uke(t);if(e.ename=t.read_shift(0,"8lpp4"),e.blksz=t.read_shift(4),e.cmode=t.read_shift(4),t.read_shift(4)!=4)throw new Error("Bad !Primary record");return e}function zre(t,e){var r=t.l+e,n={};n.Flags=t.read_shift(4)&63,t.l+=4,n.AlgID=t.read_shift(4);var a=!1;switch(n.AlgID){case 26126:case 26127:case 26128:a=n.Flags==36;break;case 26625:a=n.Flags==4;break;case 0:a=n.Flags==16||n.Flags==4||n.Flags==36;break;default:throw"Unrecognized encryption algorithm: "+n.AlgID}if(!a)throw new Error("Encryption Flags/AlgID mismatch");return n.AlgIDHash=t.read_shift(4),n.KeySize=t.read_shift(4),n.ProviderType=t.read_shift(4),t.l+=8,n.CSPName=t.read_shift(r-t.l>>1,"utf16le"),t.l=r,n}function Wre(t,e){var r={},n=t.l+e;return t.l+=4,r.Salt=t.slice(t.l,t.l+16),t.l+=16,r.Verifier=t.slice(t.l,t.l+16),t.l+=16,t.read_shift(4),r.VerifierHash=t.slice(t.l,n),t.l=n,r}function Vke(t){var e=jA(t);switch(e.Minor){case 2:return[e.Minor,Hke(t)];case 3:return[e.Minor,$ke()];case 4:return[e.Minor,Kke(t)]}throw new Error("ECMA-376 Encrypted file unrecognized Version: "+e.Minor)}function Hke(t){var e=t.read_shift(4);if((e&63)!=36)throw new Error("EncryptionInfo mismatch");var r=t.read_shift(4),n=zre(t,r),a=Wre(t,t.length-t.l);return{t:"Std",h:n,v:a}}function $ke(){throw new Error("File is password-protected: ECMA-376 Extensible")}function Kke(t){var e=["saltSize","blockSize","keyBits","hashSize","cipherAlgorithm","cipherChaining","hashAlgorithm","saltValue"];t.l+=4;var r=t.read_shift(t.length-t.l,"utf8"),n={};return r.replace(wl,function(s){var i=ln(s);switch(Df(i[0])){case"<?xml":break;case"<encryption":case"</encryption>":break;case"<keyData":e.forEach(function(l){n[l]=i[l]});break;case"<dataIntegrity":n.encryptedHmacKey=i.encryptedHmacKey,n.encryptedHmacValue=i.encryptedHmacValue;break;case"<keyEncryptors>":case"<keyEncryptors":n.encs=[];break;case"</keyEncryptors>":break;case"<keyEncryptor":n.uri=i.uri;break;case"</keyEncryptor>":break;case"<encryptedKey":n.encs.push(i);break;default:throw i[0]}}),n}function Gke(t,e){var r={},n=r.EncryptionVersionInfo=jA(t,4);if(e-=4,n.Minor!=2)throw new Error("unrecognized minor version code: "+n.Minor);if(n.Major>4||n.Major<2)throw new Error("unrecognized major version code: "+n.Major);r.Flags=t.read_shift(4),e-=4;var a=t.read_shift(4);return e-=4,r.EncryptionHeader=zre(t,a),e-=a,r.EncryptionVerifier=Wre(t,e),r}function qke(t){var e={},r=e.EncryptionVersionInfo=jA(t,4);if(r.Major!=1||r.Minor!=1)throw"unrecognized version code "+r.Major+" : "+r.Minor;return e.Salt=t.read_shift(16),e.EncryptedVerifier=t.read_shift(16),e.EncryptedVerifierHash=t.read_shift(16),e}function gD(t){var e=0,r,n=qre(t),a=n.length+1,s,i,l,c,u;for(r=K0(a),r[0]=n.length,s=1;s!=a;++s)r[s]=n[s-1];for(s=a-1;s>=0;--s)i=r[s],l=e&16384?1:0,c=e<<1&32767,u=l|c,e=u^i;return e^52811}var Xre=function(){var t=[187,255,255,186,255,255,185,128,0,190,15,0,191,15,0],e=[57840,7439,52380,33984,4364,3600,61902,12606,6258,57657,54287,34041,10252,43370,20163],r=[44796,19929,39858,10053,20106,40212,10761,31585,63170,64933,60267,50935,40399,11199,17763,35526,1453,2906,5812,11624,23248,885,1770,3540,7080,14160,28320,56640,55369,41139,20807,41614,21821,43642,17621,28485,56970,44341,19019,38038,14605,29210,60195,50791,40175,10751,21502,43004,24537,18387,36774,3949,7898,15796,31592,63184,47201,24803,49606,37805,14203,28406,56812,17824,35648,1697,3394,6788,13576,27152,43601,17539,35078,557,1114,2228,4456,30388,60776,51953,34243,7079,14158,28316,14128,28256,56512,43425,17251,34502,7597,13105,26210,52420,35241,883,1766,3532,4129,8258,16516,33032,4657,9314,18628],n=function(i){return(i/2|i*128)&255},a=function(i,l){return n(i^l)},s=function(i){for(var l=e[i.length-1],c=104,u=i.length-1;u>=0;--u)for(var d=i[u],f=0;f!=7;++f)d&64&&(l^=r[c]),d*=2,--c;return l};return function(i){for(var l=qre(i),c=s(l),u=l.length,d=K0(16),f=0;f!=16;++f)d[f]=0;var h,A,m;for((u&1)===1&&(h=c>>8,d[u]=a(t[0],h),--u,h=c&255,A=l[l.length-1],d[u]=a(A,h));u>0;)--u,h=c>>8,d[u]=a(l[u],h),--u,h=c&255,d[u]=a(l[u],h);for(u=15,m=15-l.length;m>0;)h=c>>8,d[u]=a(t[m],h),--u,--m,h=c&255,d[u]=a(l[u],h),--u,--m;return d}}(),zke=function(t,e,r,n,a){a||(a=e),n||(n=Xre(t));var s,i;for(s=0;s!=e.length;++s)i=e[s],i^=n[r],i=(i>>5|i<<3)&255,a[s]=i,++r;return[a,r,n]},Wke=function(t){var e=0,r=Xre(t);return function(n){var a=zke("",n,e,r);return e=a[1],a[0]}};function Xke(t,e,r,n){var a={key:gi(t),verificationBytes:gi(t)};return r.password&&(a.verifier=gD(r.password)),n.valid=a.verificationBytes===a.verifier,n.valid&&(n.insitu=Wke(r.password)),a}function Yke(t,e,r){var n=r||{};return n.Info=t.read_shift(2),t.l-=2,n.Info===1?n.Data=qke(t):n.Data=Gke(t,e),n}function Jke(t,e,r){var n={Type:r.biff>=8?t.read_shift(2):0};return n.Type?Yke(t,e-2,n):Xke(t,r.biff>=8?e:e-2,r,n),n}var Yre=function(){function t(a,s){switch(s.type){case"base64":return e(Zc(a),s);case"binary":return e(a,s);case"buffer":return e(En&&Buffer.isBuffer(a)?a.toString("binary"):am(a),s);case"array":return e(Fp(a),s)}throw new Error("Unrecognized type "+s.type)}function e(a,s){var i=s||{},l=i.dense?[]:{},c=a.match(/\\trowd.*?\\row\b/g);if(!c.length)throw new Error("RTF missing table");var u={s:{c:0,r:0},e:{c:0,r:c.length-1}};return c.forEach(function(d,f){Array.isArray(l)&&(l[f]=[]);for(var h=/\\\w+\b/g,A=0,m,p=-1;m=h.exec(d);){switch(m[0]){case"\\cell":var g=d.slice(A,h.lastIndex-m[0].length);if(g[0]==" "&&(g=g.slice(1)),++p,g.length){var x={v:g,t:"s"};Array.isArray(l)?l[f][p]=x:l[sn({r:f,c:p})]=x}break}A=h.lastIndex}p>u.e.c&&(u.e.c=p)}),l["!ref"]=vn(u),l}function r(a,s){return sm(t(a,s),s)}function n(a){for(var s=["{\\rtf1\\ansi"],i=Xn(a["!ref"]),l,c=Array.isArray(a),u=i.s.r;u<=i.e.r;++u){s.push("\\trowd\\trautofit1");for(var d=i.s.c;d<=i.e.c;++d)s.push("\\cellx"+(d+1));for(s.push("\\pard\\intbl"),d=i.s.c;d<=i.e.c;++d){var f=sn({r:u,c:d});l=c?(a[u]||[])[d]:a[f],!(!l||l.v==null&&(!l.f||l.F))&&(s.push(" "+(l.w||(UA(l),l.w))),s.push("\\cell"))}s.push("\\pard\\intbl\\row")}return s.join("")+"}"}return{to_workbook:r,to_sheet:t,from_sheet:n}}();function Zke(t){var e=t.slice(t[0]==="#"?1:0).slice(0,6);return[parseInt(e.slice(0,2),16),parseInt(e.slice(2,4),16),parseInt(e.slice(4,6),16)]}function o2(t){for(var e=0,r=1;e!=3;++e)r=r*256+(t[e]>255?255:t[e]<0?0:t[e]);return r.toString(16).toUpperCase().slice(1)}function eFe(t){var e=t[0]/255,r=t[1]/255,n=t[2]/255,a=Math.max(e,r,n),s=Math.min(e,r,n),i=a-s;if(i===0)return[0,0,e];var l=0,c=0,u=a+s;switch(c=i/(u>1?2-u:u),a){case e:l=((r-n)/i+6)%6;break;case r:l=(n-e)/i+2;break;case n:l=(e-r)/i+4;break}return[l/6,c,u/2]}function tFe(t){var e=t[0],r=t[1],n=t[2],a=r*2*(n<.5?n:1-n),s=n-a/2,i=[s,s,s],l=6*e,c;if(r!==0)switch(l|0){case 0:case 6:c=a*l,i[0]+=a,i[1]+=c;break;case 1:c=a*(2-l),i[0]+=c,i[1]+=a;break;case 2:c=a*(l-2),i[1]+=a,i[2]+=c;break;case 3:c=a*(4-l),i[1]+=c,i[2]+=a;break;case 4:c=a*(l-4),i[2]+=a,i[0]+=c;break;case 5:c=a*(6-l),i[2]+=c,i[0]+=a;break}for(var u=0;u!=3;++u)i[u]=Math.round(i[u]*255);return i}function vS(t,e){if(e===0)return t;var r=eFe(Zke(t));return e<0?r[2]=r[2]*(1+e):r[2]=1-(1-r[2])*(1-e),o2(tFe(r))}var Jre=6,rFe=15,nFe=1,hl=Jre;function l2(t){return Math.floor((t+Math.round(128/hl)/256)*hl)}function c2(t){return Math.floor((t-5)/hl*100+.5)/100}function yS(t){return Math.round((t*hl+5)/hl*256)/256}function J5(t){return yS(c2(l2(t)))}function xD(t){var e=Math.abs(t-J5(t)),r=hl;if(e>.005)for(hl=nFe;hl<rFe;++hl)Math.abs(t-J5(t))<=e&&(e=Math.abs(t-J5(t)),r=hl);hl=r}function G0(t){t.width?(t.wpx=l2(t.width),t.wch=c2(t.wpx),t.MDW=hl):t.wpx?(t.wch=c2(t.wpx),t.width=yS(t.wch),t.MDW=hl):typeof t.wch=="number"&&(t.width=yS(t.wch),t.wpx=l2(t.width),t.MDW=hl),t.customWidth&&delete t.customWidth}var aFe=96,Zre=aFe;function u2(t){return t*96/Zre}function fv(t){return t*Zre/96}var sFe={None:"none",Solid:"solid",Gray50:"mediumGray",Gray75:"darkGray",Gray25:"lightGray",HorzStripe:"darkHorizontal",VertStripe:"darkVertical",ReverseDiagStripe:"darkDown",DiagStripe:"darkUp",DiagCross:"darkGrid",ThickDiagCross:"darkTrellis",ThinHorzStripe:"lightHorizontal",ThinVertStripe:"lightVertical",ThinReverseDiagStripe:"lightDown",ThinHorzCross:"lightGrid"};function iFe(t,e,r,n){e.Borders=[];var a={},s=!1;(t[0].match(wl)||[]).forEach(function(i){var l=ln(i);switch(Df(l[0])){case"<borders":case"<borders>":case"</borders>":break;case"<border":case"<border>":case"<border/>":a={},l.diagonalUp&&(a.diagonalUp=es(l.diagonalUp)),l.diagonalDown&&(a.diagonalDown=es(l.diagonalDown)),e.Borders.push(a);break;case"</border>":break;case"<left/>":break;case"<left":case"<left>":break;case"</left>":break;case"<right/>":break;case"<right":case"<right>":break;case"</right>":break;case"<top/>":break;case"<top":case"<top>":break;case"</top>":break;case"<bottom/>":break;case"<bottom":case"<bottom>":break;case"</bottom>":break;case"<diagonal":case"<diagonal>":case"<diagonal/>":break;case"</diagonal>":break;case"<horizontal":case"<horizontal>":case"<horizontal/>":break;case"</horizontal>":break;case"<vertical":case"<vertical>":case"<vertical/>":break;case"</vertical>":break;case"<start":case"<start>":case"<start/>":break;case"</start>":break;case"<end":case"<end>":case"<end/>":break;case"</end>":break;case"<color":case"<color>":break;case"<color/>":case"</color>":break;case"<extLst":case"<extLst>":case"</extLst>":break;case"<ext":s=!0;break;case"</ext>":s=!1;break;default:if(n&&n.WTF&&!s)throw new Error("unrecognized "+l[0]+" in borders")}})}function oFe(t,e,r,n){e.Fills=[];var a={},s=!1;(t[0].match(wl)||[]).forEach(function(i){var l=ln(i);switch(Df(l[0])){case"<fills":case"<fills>":case"</fills>":break;case"<fill>":case"<fill":case"<fill/>":a={},e.Fills.push(a);break;case"</fill>":break;case"<gradientFill>":break;case"<gradientFill":case"</gradientFill>":e.Fills.push(a),a={};break;case"<patternFill":case"<patternFill>":l.patternType&&(a.patternType=l.patternType);break;case"<patternFill/>":case"</patternFill>":break;case"<bgColor":a.bgColor||(a.bgColor={}),l.indexed&&(a.bgColor.indexed=parseInt(l.indexed,10)),l.theme&&(a.bgColor.theme=parseInt(l.theme,10)),l.tint&&(a.bgColor.tint=parseFloat(l.tint)),l.rgb&&(a.bgColor.rgb=l.rgb.slice(-6));break;case"<bgColor/>":case"</bgColor>":break;case"<fgColor":a.fgColor||(a.fgColor={}),l.theme&&(a.fgColor.theme=parseInt(l.theme,10)),l.tint&&(a.fgColor.tint=parseFloat(l.tint)),l.rgb!=null&&(a.fgColor.rgb=l.rgb.slice(-6));break;case"<fgColor/>":case"</fgColor>":break;case"<stop":case"<stop/>":break;case"</stop>":break;case"<color":case"<color/>":break;case"</color>":break;case"<extLst":case"<extLst>":case"</extLst>":break;case"<ext":s=!0;break;case"</ext>":s=!1;break;default:if(n&&n.WTF&&!s)throw new Error("unrecognized "+l[0]+" in fills")}})}function lFe(t,e,r,n){e.Fonts=[];var a={},s=!1;(t[0].match(wl)||[]).forEach(function(i){var l=ln(i);switch(Df(l[0])){case"<fonts":case"<fonts>":case"</fonts>":break;case"<font":case"<font>":break;case"</font>":case"<font/>":e.Fonts.push(a),a={};break;case"<name":l.val&&(a.name=Ba(l.val));break;case"<name/>":case"</name>":break;case"<b":a.bold=l.val?es(l.val):1;break;case"<b/>":a.bold=1;break;case"<i":a.italic=l.val?es(l.val):1;break;case"<i/>":a.italic=1;break;case"<u":switch(l.val){case"none":a.underline=0;break;case"single":a.underline=1;break;case"double":a.underline=2;break;case"singleAccounting":a.underline=33;break;case"doubleAccounting":a.underline=34;break}break;case"<u/>":a.underline=1;break;case"<strike":a.strike=l.val?es(l.val):1;break;case"<strike/>":a.strike=1;break;case"<outline":a.outline=l.val?es(l.val):1;break;case"<outline/>":a.outline=1;break;case"<shadow":a.shadow=l.val?es(l.val):1;break;case"<shadow/>":a.shadow=1;break;case"<condense":a.condense=l.val?es(l.val):1;break;case"<condense/>":a.condense=1;break;case"<extend":a.extend=l.val?es(l.val):1;break;case"<extend/>":a.extend=1;break;case"<sz":l.val&&(a.sz=+l.val);break;case"<sz/>":case"</sz>":break;case"<vertAlign":l.val&&(a.vertAlign=l.val);break;case"<vertAlign/>":case"</vertAlign>":break;case"<family":l.val&&(a.family=parseInt(l.val,10));break;case"<family/>":case"</family>":break;case"<scheme":l.val&&(a.scheme=l.val);break;case"<scheme/>":case"</scheme>":break;case"<charset":if(l.val=="1")break;l.codepage=G6[parseInt(l.val,10)];break;case"<color":if(a.color||(a.color={}),l.auto&&(a.color.auto=es(l.auto)),l.rgb)a.color.rgb=l.rgb.slice(-6);else if(l.indexed){a.color.index=parseInt(l.indexed,10);var c=cp[a.color.index];a.color.index==81&&(c=cp[1]),c||(c=cp[1]),a.color.rgb=c[0].toString(16)+c[1].toString(16)+c[2].toString(16)}else l.theme&&(a.color.theme=parseInt(l.theme,10),l.tint&&(a.color.tint=parseFloat(l.tint)),l.theme&&r.themeElements&&r.themeElements.clrScheme&&(a.color.rgb=vS(r.themeElements.clrScheme[a.color.theme].rgb,a.color.tint||0)));break;case"<color/>":case"</color>":break;case"<AlternateContent":s=!0;break;case"</AlternateContent>":s=!1;break;case"<extLst":case"<extLst>":case"</extLst>":break;case"<ext":s=!0;break;case"</ext>":s=!1;break;default:if(n&&n.WTF&&!s)throw new Error("unrecognized "+l[0]+" in fonts")}})}function cFe(t,e,r){e.NumberFmt=[];for(var n=zs(an),a=0;a<n.length;++a)e.NumberFmt[n[a]]=an[n[a]];var s=t[0].match(wl);if(s)for(a=0;a<s.length;++a){var i=ln(s[a]);switch(Df(i[0])){case"<numFmts":case"</numFmts>":case"<numFmts/>":case"<numFmts>":break;case"<numFmt":{var l=Wn(Ba(i.formatCode)),c=parseInt(i.numFmtId,10);if(e.NumberFmt[c]=l,c>0){if(c>392){for(c=392;c>60&&e.NumberFmt[c]!=null;--c);e.NumberFmt[c]=l}IA(l,c)}}break;case"</numFmt>":break;default:if(r.WTF)throw new Error("unrecognized "+i[0]+" in numFmts")}}}function uFe(t){var e=["<numFmts>"];return[[5,8],[23,26],[41,44],[50,392]].forEach(function(r){for(var n=r[0];n<=r[1];++n)t[n]!=null&&(e[e.length]=br("numFmt",null,{numFmtId:n,formatCode:Ca(t[n])}))}),e.length===1?"":(e[e.length]="</numFmts>",e[0]=br("numFmts",null,{count:e.length-2}).replace("/>",">"),e.join(""))}var jC=["numFmtId","fillId","fontId","borderId","xfId"],BC=["applyAlignment","applyBorder","applyFill","applyFont","applyNumberFormat","applyProtection","pivotButton","quotePrefix"];function dFe(t,e,r){e.CellXf=[];var n,a=!1;(t[0].match(wl)||[]).forEach(function(s){var i=ln(s),l=0;switch(Df(i[0])){case"<cellXfs":case"<cellXfs>":case"<cellXfs/>":case"</cellXfs>":break;case"<xf":case"<xf/>":for(n=i,delete n[0],l=0;l<jC.length;++l)n[jC[l]]&&(n[jC[l]]=parseInt(n[jC[l]],10));for(l=0;l<BC.length;++l)n[BC[l]]&&(n[BC[l]]=es(n[BC[l]]));if(e.NumberFmt&&n.numFmtId>392){for(l=392;l>60;--l)if(e.NumberFmt[n.numFmtId]==e.NumberFmt[l]){n.numFmtId=l;break}}e.CellXf.push(n);break;case"</xf>":break;case"<alignment":case"<alignment/>":var c={};i.vertical&&(c.vertical=i.vertical),i.horizontal&&(c.horizontal=i.horizontal),i.textRotation!=null&&(c.textRotation=i.textRotation),i.indent&&(c.indent=i.indent),i.wrapText&&(c.wrapText=es(i.wrapText)),n.alignment=c;break;case"</alignment>":break;case"<protection":break;case"</protection>":case"<protection/>":break;case"<AlternateContent":a=!0;break;case"</AlternateContent>":a=!1;break;case"<extLst":case"<extLst>":case"</extLst>":break;case"<ext":a=!0;break;case"</ext>":a=!1;break;default:if(r&&r.WTF&&!a)throw new Error("unrecognized "+i[0]+" in cellXfs")}})}function fFe(t){var e=[];return e[e.length]=br("cellXfs",null),t.forEach(function(r){e[e.length]=br("xf",null,r)}),e[e.length]="</cellXfs>",e.length===2?"":(e[0]=br("cellXfs",null,{count:e.length-2}).replace("/>",">"),e.join(""))}var AFe=function(){var e=/<(?:\w+:)?numFmts([^>]*)>[\S\s]*?<\/(?:\w+:)?numFmts>/,r=/<(?:\w+:)?cellXfs([^>]*)>[\S\s]*?<\/(?:\w+:)?cellXfs>/,n=/<(?:\w+:)?fills([^>]*)>[\S\s]*?<\/(?:\w+:)?fills>/,a=/<(?:\w+:)?fonts([^>]*)>[\S\s]*?<\/(?:\w+:)?fonts>/,s=/<(?:\w+:)?borders([^>]*)>[\S\s]*?<\/(?:\w+:)?borders>/;return function(l,c,u){var d={};if(!l)return d;l=l.replace(/<!--([\s\S]*?)-->/mg,"").replace(/<!DOCTYPE[^\[]*\[[^\]]*\]>/gm,"");var f;return(f=l.match(e))&&cFe(f,d,u),(f=l.match(a))&&lFe(f,d,c,u),(f=l.match(n))&&oFe(f,d,c,u),(f=l.match(s))&&iFe(f,d,c,u),(f=l.match(r))&&dFe(f,d,u),d}}();function ene(t,e){var r=[Ai,br("styleSheet",null,{xmlns:sg[0],"xmlns:vt":Qi.vt})],n;return t.SSF&&(n=uFe(t.SSF))!=null&&(r[r.length]=n),r[r.length]='<fonts count="1"><font><sz val="12"/><color theme="1"/><name val="Calibri"/><family val="2"/><scheme val="minor"/></font></fonts>',r[r.length]='<fills count="2"><fill><patternFill patternType="none"/></fill><fill><patternFill patternType="gray125"/></fill></fills>',r[r.length]='<borders count="1"><border><left/><right/><top/><bottom/><diagonal/></border></borders>',r[r.length]='<cellStyleXfs count="1"><xf numFmtId="0" fontId="0" fillId="0" borderId="0"/></cellStyleXfs>',(n=fFe(e.cellXfs))&&(r[r.length]=n),r[r.length]='<cellStyles count="1"><cellStyle name="Normal" xfId="0" builtinId="0"/></cellStyles>',r[r.length]='<dxfs count="0"/>',r[r.length]='<tableStyles count="0" defaultTableStyle="TableStyleMedium9" defaultPivotStyle="PivotStyleMedium4"/>',r.length>2&&(r[r.length]="</styleSheet>",r[1]=r[1].replace("/>",">")),r.join("")}function hFe(t,e){var r=t.read_shift(2),n=gl(t);return[r,n]}function mFe(t,e,r){r||(r=Yt(6+4*e.length)),r.write_shift(2,t),ho(e,r);var n=r.length>r.l?r.slice(0,r.l):r;return r.l==null&&(r.l=r.length),n}function pFe(t,e,r){var n={};n.sz=t.read_shift(2)/20;var a=YBe(t);a.fItalic&&(n.italic=1),a.fCondense&&(n.condense=1),a.fExtend&&(n.extend=1),a.fShadow&&(n.shadow=1),a.fOutline&&(n.outline=1),a.fStrikeout&&(n.strike=1);var s=t.read_shift(2);switch(s===700&&(n.bold=1),t.read_shift(2)){case 1:n.vertAlign="superscript";break;case 2:n.vertAlign="subscript";break}var i=t.read_shift(1);i!=0&&(n.underline=i);var l=t.read_shift(1);l>0&&(n.family=l);var c=t.read_shift(1);switch(c>0&&(n.charset=c),t.l++,n.color=XBe(t),t.read_shift(1)){case 1:n.scheme="major";break;case 2:n.scheme="minor";break}return n.name=gl(t),n}function gFe(t,e){e||(e=Yt(25+4*32)),e.write_shift(2,t.sz*20),JBe(t,e),e.write_shift(2,t.bold?700:400);var r=0;t.vertAlign=="superscript"?r=1:t.vertAlign=="subscript"&&(r=2),e.write_shift(2,r),e.write_shift(1,t.underline||0),e.write_shift(1,t.family||0),e.write_shift(1,t.charset||0),e.write_shift(1,0),pS(t.color,e);var n=0;return n=2,e.write_shift(1,n),ho(t.name,e),e.length>e.l?e.slice(0,e.l):e}var xFe=["none","solid","mediumGray","darkGray","lightGray","darkHorizontal","darkVertical","darkDown","darkUp","darkGrid","darkTrellis","lightHorizontal","lightVertical","lightDown","lightUp","lightGrid","lightTrellis","gray125","gray0625"],Z5,vFe=yl;function _H(t,e){e||(e=Yt(4*3+8*7+16*1)),Z5||(Z5=S4(xFe));var r=Z5[t.patternType];r==null&&(r=40),e.write_shift(4,r);var n=0;if(r!=40)for(pS({auto:1},e),pS({auto:1},e);n<12;++n)e.write_shift(4,0);else{for(;n<4;++n)e.write_shift(4,0);for(;n<12;++n)e.write_shift(4,0)}return e.length>e.l?e.slice(0,e.l):e}function yFe(t,e){var r=t.l+e,n=t.read_shift(2),a=t.read_shift(2);return t.l=r,{ixfe:n,numFmtId:a}}function tne(t,e,r){r||(r=Yt(16)),r.write_shift(2,e||0),r.write_shift(2,t.numFmtId||0),r.write_shift(2,0),r.write_shift(2,0),r.write_shift(2,0),r.write_shift(1,0),r.write_shift(1,0);var n=0;return r.write_shift(1,n),r.write_shift(1,0),r.write_shift(1,0),r.write_shift(1,0),r}function K1(t,e){return e||(e=Yt(10)),e.write_shift(1,0),e.write_shift(1,0),e.write_shift(4,0),e.write_shift(4,0),e}var bFe=yl;function wFe(t,e){return e||(e=Yt(51)),e.write_shift(1,0),K1(null,e),K1(null,e),K1(null,e),K1(null,e),K1(null,e),e.length>e.l?e.slice(0,e.l):e}function NFe(t,e){return e||(e=Yt(12+4*10)),e.write_shift(4,t.xfId),e.write_shift(2,1),e.write_shift(1,0),e.write_shift(1,0),mS(t.name||"",e),e.length>e.l?e.slice(0,e.l):e}function CFe(t,e,r){var n=Yt(2052);return n.write_shift(4,t),mS(e,n),mS(r,n),n.length>n.l?n.slice(0,n.l):n}function _Fe(t,e,r){var n={};n.NumberFmt=[];for(var a in an)n.NumberFmt[a]=an[a];n.CellXf=[],n.Fonts=[];var s=[],i=!1;return rh(t,function(c,u,d){switch(d){case 44:n.NumberFmt[c[0]]=c[1],IA(c[1],c[0]);break;case 43:n.Fonts.push(c),c.color.theme!=null&&e&&e.themeElements&&e.themeElements.clrScheme&&(c.color.rgb=vS(e.themeElements.clrScheme[c.color.theme].rgb,c.color.tint||0));break;case 1025:break;case 45:break;case 46:break;case 47:s[s.length-1]==617&&n.CellXf.push(c);break;case 48:case 507:case 572:case 475:break;case 1171:case 2102:case 1130:case 512:case 2095:case 3072:break;case 35:i=!0;break;case 36:i=!1;break;case 37:s.push(d),i=!0;break;case 38:s.pop(),i=!1;break;default:if(u.T>0)s.push(d);else if(u.T<0)s.pop();else if(!i||r.WTF&&s[s.length-1]!=37)throw new Error("Unexpected record 0x"+d.toString(16))}}),n}function EFe(t,e){if(e){var r=0;[[5,8],[23,26],[41,44],[50,392]].forEach(function(n){for(var a=n[0];a<=n[1];++a)e[a]!=null&&++r}),r!=0&&(ur(t,615,jd(r)),[[5,8],[23,26],[41,44],[50,392]].forEach(function(n){for(var a=n[0];a<=n[1];++a)e[a]!=null&&ur(t,44,mFe(a,e[a]))}),ur(t,616))}}function SFe(t){var e=1;ur(t,611,jd(e)),ur(t,43,gFe({sz:12,color:{theme:1},name:"Calibri",family:2})),ur(t,612)}function IFe(t){var e=2;ur(t,603,jd(e)),ur(t,45,_H({patternType:"none"})),ur(t,45,_H({patternType:"gray125"})),ur(t,604)}function jFe(t){var e=1;ur(t,613,jd(e)),ur(t,46,wFe()),ur(t,614)}function BFe(t){var e=1;ur(t,626,jd(e)),ur(t,47,tne({numFmtId:0},65535)),ur(t,627)}function PFe(t,e){ur(t,617,jd(e.length)),e.forEach(function(r){ur(t,47,tne(r,0))}),ur(t,618)}function TFe(t){var e=1;ur(t,619,jd(e)),ur(t,48,NFe({xfId:0,name:"Normal"})),ur(t,620)}function kFe(t){var e=0;ur(t,505,jd(e)),ur(t,506)}function FFe(t){var e=0;ur(t,508,CFe(e,"TableStyleMedium9","PivotStyleMedium4")),ur(t,509)}function OFe(t,e){var r=hc();return ur(r,278),EFe(r,t.SSF),SFe(r),IFe(r),jFe(r),BFe(r),PFe(r,e.cellXfs),TFe(r),kFe(r),FFe(r),ur(r,279),r.end()}var DFe=["</a:lt1>","</a:dk1>","</a:lt2>","</a:dk2>","</a:accent1>","</a:accent2>","</a:accent3>","</a:accent4>","</a:accent5>","</a:accent6>","</a:hlink>","</a:folHlink>"];function RFe(t,e,r){e.themeElements.clrScheme=[];var n={};(t[0].match(wl)||[]).forEach(function(a){var s=ln(a);switch(s[0]){case"<a:clrScheme":case"</a:clrScheme>":break;case"<a:srgbClr":n.rgb=s.val;break;case"<a:sysClr":n.rgb=s.lastClr;break;case"<a:dk1>":case"</a:dk1>":case"<a:lt1>":case"</a:lt1>":case"<a:dk2>":case"</a:dk2>":case"<a:lt2>":case"</a:lt2>":case"<a:accent1>":case"</a:accent1>":case"<a:accent2>":case"</a:accent2>":case"<a:accent3>":case"</a:accent3>":case"<a:accent4>":case"</a:accent4>":case"<a:accent5>":case"</a:accent5>":case"<a:accent6>":case"</a:accent6>":case"<a:hlink>":case"</a:hlink>":case"<a:folHlink>":case"</a:folHlink>":s[0].charAt(1)==="/"?(e.themeElements.clrScheme[DFe.indexOf(s[0])]=n,n={}):n.name=s[0].slice(3,s[0].length-1);break;default:if(r&&r.WTF)throw new Error("Unrecognized "+s[0]+" in clrScheme")}})}function MFe(){}function LFe(){}var UFe=/<a:clrScheme([^>]*)>[\s\S]*<\/a:clrScheme>/,QFe=/<a:fontScheme([^>]*)>[\s\S]*<\/a:fontScheme>/,VFe=/<a:fmtScheme([^>]*)>[\s\S]*<\/a:fmtScheme>/;function HFe(t,e,r){e.themeElements={};var n;[["clrScheme",UFe,RFe],["fontScheme",QFe,MFe],["fmtScheme",VFe,LFe]].forEach(function(a){if(!(n=t.match(a[1])))throw new Error(a[0]+" not found in themeElements");a[2](n,e,r)})}var $Fe=/<a:themeElements([^>]*)>[\s\S]*<\/a:themeElements>/;function rne(t,e){(!t||t.length===0)&&(t=vD());var r,n={};if(!(r=t.match($Fe)))throw new Error("themeElements not found in theme");return HFe(r[0],n,e),n.raw=t,n}function vD(t,e){if(e&&e.themeXLSX)return e.themeXLSX;if(t&&typeof t.raw=="string")return t.raw;var r=[Ai];return r[r.length]='<a:theme xmlns:a="http://schemas.openxmlformats.org/drawingml/2006/main" name="Office Theme">',r[r.length]="<a:themeElements>",r[r.length]='<a:clrScheme name="Office">',r[r.length]='<a:dk1><a:sysClr val="windowText" lastClr="000000"/></a:dk1>',r[r.length]='<a:lt1><a:sysClr val="window" lastClr="FFFFFF"/></a:lt1>',r[r.length]='<a:dk2><a:srgbClr val="1F497D"/></a:dk2>',r[r.length]='<a:lt2><a:srgbClr val="EEECE1"/></a:lt2>',r[r.length]='<a:accent1><a:srgbClr val="4F81BD"/></a:accent1>',r[r.length]='<a:accent2><a:srgbClr val="C0504D"/></a:accent2>',r[r.length]='<a:accent3><a:srgbClr val="9BBB59"/></a:accent3>',r[r.length]='<a:accent4><a:srgbClr val="8064A2"/></a:accent4>',r[r.length]='<a:accent5><a:srgbClr val="4BACC6"/></a:accent5>',r[r.length]='<a:accent6><a:srgbClr val="F79646"/></a:accent6>',r[r.length]='<a:hlink><a:srgbClr val="0000FF"/></a:hlink>',r[r.length]='<a:folHlink><a:srgbClr val="800080"/></a:folHlink>',r[r.length]="</a:clrScheme>",r[r.length]='<a:fontScheme name="Office">',r[r.length]="<a:majorFont>",r[r.length]='<a:latin typeface="Cambria"/>',r[r.length]='<a:ea typeface=""/>',r[r.length]='<a:cs typeface=""/>',r[r.length]='<a:font script="Jpan" typeface=" "/>',r[r.length]='<a:font script="Hang" typeface=" "/>',r[r.length]='<a:font script="Hans" typeface=""/>',r[r.length]='<a:font script="Hant" typeface=""/>',r[r.length]='<a:font script="Arab" typeface="Times New Roman"/>',r[r.length]='<a:font script="Hebr" typeface="Times New Roman"/>',r[r.length]='<a:font script="Thai" typeface="Tahoma"/>',r[r.length]='<a:font script="Ethi" typeface="Nyala"/>',r[r.length]='<a:font script="Beng" typeface="Vrinda"/>',r[r.length]='<a:font script="Gujr" typeface="Shruti"/>',r[r.length]='<a:font script="Khmr" typeface="MoolBoran"/>',r[r.length]='<a:font script="Knda" typeface="Tunga"/>',r[r.length]='<a:font script="Guru" typeface="Raavi"/>',r[r.length]='<a:font script="Cans" typeface="Euphemia"/>',r[r.length]='<a:font script="Cher" typeface="Plantagenet Cherokee"/>',r[r.length]='<a:font script="Yiii" typeface="Microsoft Yi Baiti"/>',r[r.length]='<a:font script="Tibt" typeface="Microsoft Himalaya"/>',r[r.length]='<a:font script="Thaa" typeface="MV Boli"/>',r[r.length]='<a:font script="Deva" typeface="Mangal"/>',r[r.length]='<a:font script="Telu" typeface="Gautami"/>',r[r.length]='<a:font script="Taml" typeface="Latha"/>',r[r.length]='<a:font script="Syrc" typeface="Estrangelo Edessa"/>',r[r.length]='<a:font script="Orya" typeface="Kalinga"/>',r[r.length]='<a:font script="Mlym" typeface="Kartika"/>',r[r.length]='<a:font script="Laoo" typeface="DokChampa"/>',r[r.length]='<a:font script="Sinh" typeface="Iskoola Pota"/>',r[r.length]='<a:font script="Mong" typeface="Mongolian Baiti"/>',r[r.length]='<a:font script="Viet" typeface="Times New Roman"/>',r[r.length]='<a:font script="Uigh" typeface="Microsoft Uighur"/>',r[r.length]='<a:font script="Geor" typeface="Sylfaen"/>',r[r.length]="</a:majorFont>",r[r.length]="<a:minorFont>",r[r.length]='<a:latin typeface="Calibri"/>',r[r.length]='<a:ea typeface=""/>',r[r.length]='<a:cs typeface=""/>',r[r.length]='<a:font script="Jpan" typeface=" "/>',r[r.length]='<a:font script="Hang" typeface=" "/>',r[r.length]='<a:font script="Hans" typeface=""/>',r[r.length]='<a:font script="Hant" typeface=""/>',r[r.length]='<a:font script="Arab" typeface="Arial"/>',r[r.length]='<a:font script="Hebr" typeface="Arial"/>',r[r.length]='<a:font script="Thai" typeface="Tahoma"/>',r[r.length]='<a:font script="Ethi" typeface="Nyala"/>',r[r.length]='<a:font script="Beng" typeface="Vrinda"/>',r[r.length]='<a:font script="Gujr" typeface="Shruti"/>',r[r.length]='<a:font script="Khmr" typeface="DaunPenh"/>',r[r.length]='<a:font script="Knda" typeface="Tunga"/>',r[r.length]='<a:font script="Guru" typeface="Raavi"/>',r[r.length]='<a:font script="Cans" typeface="Euphemia"/>',r[r.length]='<a:font script="Cher" typeface="Plantagenet Cherokee"/>',r[r.length]='<a:font script="Yiii" typeface="Microsoft Yi Baiti"/>',r[r.length]='<a:font script="Tibt" typeface="Microsoft Himalaya"/>',r[r.length]='<a:font script="Thaa" typeface="MV Boli"/>',r[r.length]='<a:font script="Deva" typeface="Mangal"/>',r[r.length]='<a:font script="Telu" typeface="Gautami"/>',r[r.length]='<a:font script="Taml" typeface="Latha"/>',r[r.length]='<a:font script="Syrc" typeface="Estrangelo Edessa"/>',r[r.length]='<a:font script="Orya" typeface="Kalinga"/>',r[r.length]='<a:font script="Mlym" typeface="Kartika"/>',r[r.length]='<a:font script="Laoo" typeface="DokChampa"/>',r[r.length]='<a:font script="Sinh" typeface="Iskoola Pota"/>',r[r.length]='<a:font script="Mong" typeface="Mongolian Baiti"/>',r[r.length]='<a:font script="Viet" typeface="Arial"/>',r[r.length]='<a:font script="Uigh" typeface="Microsoft Uighur"/>',r[r.length]='<a:font script="Geor" typeface="Sylfaen"/>',r[r.length]="</a:minorFont>",r[r.length]="</a:fontScheme>",r[r.length]='<a:fmtScheme name="Office">',r[r.length]="<a:fillStyleLst>",r[r.length]='<a:solidFill><a:schemeClr val="phClr"/></a:solidFill>',r[r.length]='<a:gradFill rotWithShape="1">',r[r.length]="<a:gsLst>",r[r.length]='<a:gs pos="0"><a:schemeClr val="phClr"><a:tint val="50000"/><a:satMod val="300000"/></a:schemeClr></a:gs>',r[r.length]='<a:gs pos="35000"><a:schemeClr val="phClr"><a:tint val="37000"/><a:satMod val="300000"/></a:schemeClr></a:gs>',r[r.length]='<a:gs pos="100000"><a:schemeClr val="phClr"><a:tint val="15000"/><a:satMod val="350000"/></a:schemeClr></a:gs>',r[r.length]="</a:gsLst>",r[r.length]='<a:lin ang="16200000" scaled="1"/>',r[r.length]="</a:gradFill>",r[r.length]='<a:gradFill rotWithShape="1">',r[r.length]="<a:gsLst>",r[r.length]='<a:gs pos="0"><a:schemeClr val="phClr"><a:tint val="100000"/><a:shade val="100000"/><a:satMod val="130000"/></a:schemeClr></a:gs>',r[r.length]='<a:gs pos="100000"><a:schemeClr val="phClr"><a:tint val="50000"/><a:shade val="100000"/><a:satMod val="350000"/></a:schemeClr></a:gs>',r[r.length]="</a:gsLst>",r[r.length]='<a:lin ang="16200000" scaled="0"/>',r[r.length]="</a:gradFill>",r[r.length]="</a:fillStyleLst>",r[r.length]="<a:lnStyleLst>",r[r.length]='<a:ln w="9525" cap="flat" cmpd="sng" algn="ctr"><a:solidFill><a:schemeClr val="phClr"><a:shade val="95000"/><a:satMod val="105000"/></a:schemeClr></a:solidFill><a:prstDash val="solid"/></a:ln>',r[r.length]='<a:ln w="25400" cap="flat" cmpd="sng" algn="ctr"><a:solidFill><a:schemeClr val="phClr"/></a:solidFill><a:prstDash val="solid"/></a:ln>',r[r.length]='<a:ln w="38100" cap="flat" cmpd="sng" algn="ctr"><a:solidFill><a:schemeClr val="phClr"/></a:solidFill><a:prstDash val="solid"/></a:ln>',r[r.length]="</a:lnStyleLst>",r[r.length]="<a:effectStyleLst>",r[r.length]="<a:effectStyle>",r[r.length]="<a:effectLst>",r[r.length]='<a:outerShdw blurRad="40000" dist="20000" dir="5400000" rotWithShape="0"><a:srgbClr val="000000"><a:alpha val="38000"/></a:srgbClr></a:outerShdw>',r[r.length]="</a:effectLst>",r[r.length]="</a:effectStyle>",r[r.length]="<a:effectStyle>",r[r.length]="<a:effectLst>",r[r.length]='<a:outerShdw blurRad="40000" dist="23000" dir="5400000" rotWithShape="0"><a:srgbClr val="000000"><a:alpha val="35000"/></a:srgbClr></a:outerShdw>',r[r.length]="</a:effectLst>",r[r.length]="</a:effectStyle>",r[r.length]="<a:effectStyle>",r[r.length]="<a:effectLst>",r[r.length]='<a:outerShdw blurRad="40000" dist="23000" dir="5400000" rotWithShape="0"><a:srgbClr val="000000"><a:alpha val="35000"/></a:srgbClr></a:outerShdw>',r[r.length]="</a:effectLst>",r[r.length]='<a:scene3d><a:camera prst="orthographicFront"><a:rot lat="0" lon="0" rev="0"/></a:camera><a:lightRig rig="threePt" dir="t"><a:rot lat="0" lon="0" rev="1200000"/></a:lightRig></a:scene3d>',r[r.length]='<a:sp3d><a:bevelT w="63500" h="25400"/></a:sp3d>',r[r.length]="</a:effectStyle>",r[r.length]="</a:effectStyleLst>",r[r.length]="<a:bgFillStyleLst>",r[r.length]='<a:solidFill><a:schemeClr val="phClr"/></a:solidFill>',r[r.length]='<a:gradFill rotWithShape="1">',r[r.length]="<a:gsLst>",r[r.length]='<a:gs pos="0"><a:schemeClr val="phClr"><a:tint val="40000"/><a:satMod val="350000"/></a:schemeClr></a:gs>',r[r.length]='<a:gs pos="40000"><a:schemeClr val="phClr"><a:tint val="45000"/><a:shade val="99000"/><a:satMod val="350000"/></a:schemeClr></a:gs>',r[r.length]='<a:gs pos="100000"><a:schemeClr val="phClr"><a:shade val="20000"/><a:satMod val="255000"/></a:schemeClr></a:gs>',r[r.length]="</a:gsLst>",r[r.length]='<a:path path="circle"><a:fillToRect l="50000" t="-80000" r="50000" b="180000"/></a:path>',r[r.length]="</a:gradFill>",r[r.length]='<a:gradFill rotWithShape="1">',r[r.length]="<a:gsLst>",r[r.length]='<a:gs pos="0"><a:schemeClr val="phClr"><a:tint val="80000"/><a:satMod val="300000"/></a:schemeClr></a:gs>',r[r.length]='<a:gs pos="100000"><a:schemeClr val="phClr"><a:shade val="30000"/><a:satMod val="200000"/></a:schemeClr></a:gs>',r[r.length]="</a:gsLst>",r[r.length]='<a:path path="circle"><a:fillToRect l="50000" t="50000" r="50000" b="50000"/></a:path>',r[r.length]="</a:gradFill>",r[r.length]="</a:bgFillStyleLst>",r[r.length]="</a:fmtScheme>",r[r.length]="</a:themeElements>",r[r.length]="<a:objectDefaults>",r[r.length]="<a:spDef>",r[r.length]='<a:spPr/><a:bodyPr/><a:lstStyle/><a:style><a:lnRef idx="1"><a:schemeClr val="accent1"/></a:lnRef><a:fillRef idx="3"><a:schemeClr val="accent1"/></a:fillRef><a:effectRef idx="2"><a:schemeClr val="accent1"/></a:effectRef><a:fontRef idx="minor"><a:schemeClr val="lt1"/></a:fontRef></a:style>',r[r.length]="</a:spDef>",r[r.length]="<a:lnDef>",r[r.length]='<a:spPr/><a:bodyPr/><a:lstStyle/><a:style><a:lnRef idx="2"><a:schemeClr val="accent1"/></a:lnRef><a:fillRef idx="0"><a:schemeClr val="accent1"/></a:fillRef><a:effectRef idx="1"><a:schemeClr val="accent1"/></a:effectRef><a:fontRef idx="minor"><a:schemeClr val="tx1"/></a:fontRef></a:style>',r[r.length]="</a:lnDef>",r[r.length]="</a:objectDefaults>",r[r.length]="<a:extraClrSchemeLst/>",r[r.length]="</a:theme>",r.join("")}function KFe(t,e,r){var n=t.l+e,a=t.read_shift(4);if(a!==124226){if(!r.cellStyles){t.l=n;return}var s=t.slice(t.l);t.l=n;var i;try{i=zte(s,{type:"array"})}catch{return}var l=Qc(i,"theme/theme/theme1.xml",!0);if(l)return rne(l,r)}}function GFe(t){return t.read_shift(4)}function qFe(t){var e={};switch(e.xclrType=t.read_shift(2),e.nTintShade=t.read_shift(2),e.xclrType){case 0:t.l+=4;break;case 1:e.xclrValue=zFe(t,4);break;case 2:e.xclrValue=Ore(t);break;case 3:e.xclrValue=GFe(t);break;case 4:t.l+=4;break}return t.l+=8,e}function zFe(t,e){return yl(t,e)}function WFe(t,e){return yl(t,e)}function XFe(t){var e=t.read_shift(2),r=t.read_shift(2)-4,n=[e];switch(e){case 4:case 5:case 7:case 8:case 9:case 10:case 11:case 13:n[1]=qFe(t);break;case 6:n[1]=WFe(t,r);break;case 14:case 15:n[1]=t.read_shift(r===1?1:2);break;default:throw new Error("Unrecognized ExtProp type: "+e+" "+r)}return n}function YFe(t,e){var r=t.l+e;t.l+=2;var n=t.read_shift(2);t.l+=2;for(var a=t.read_shift(2),s=[];a-- >0;)s.push(XFe(t,r-t.l));return{ixfe:n,ext:s}}function JFe(t,e){e.forEach(function(r){switch(r[0]){}})}function ZFe(t,e){return{flags:t.read_shift(4),version:t.read_shift(4),name:gl(t)}}function eOe(t){var e=Yt(12+2*t.name.length);return e.write_shift(4,t.flags),e.write_shift(4,t.version),ho(t.name,e),e.slice(0,e.l)}function tOe(t){for(var e=[],r=t.read_shift(4);r-- >0;)e.push([t.read_shift(4),t.read_shift(4)]);return e}function rOe(t){var e=Yt(4+8*t.length);e.write_shift(4,t.length);for(var r=0;r<t.length;++r)e.write_shift(4,t[r][0]),e.write_shift(4,t[r][1]);return e}function nOe(t,e){var r=Yt(8+2*e.length);return r.write_shift(4,t),ho(e,r),r.slice(0,r.l)}function aOe(t){return t.l+=4,t.read_shift(4)!=0}function sOe(t,e){var r=Yt(8);return r.write_shift(4,t),r.write_shift(4,1),r}function iOe(t,e,r){var n={Types:[],Cell:[],Value:[]},a=r||{},s=[],i=!1,l=2;return rh(t,function(c,u,d){switch(d){case 335:n.Types.push({name:c.name});break;case 51:c.forEach(function(f){l==1?n.Cell.push({type:n.Types[f[0]-1].name,index:f[1]}):l==0&&n.Value.push({type:n.Types[f[0]-1].name,index:f[1]})});break;case 337:l=c?1:0;break;case 338:l=2;break;case 35:s.push(d),i=!0;break;case 36:s.pop(),i=!1;break;default:if(!u.T){if(!i||a.WTF&&s[s.length-1]!=35)throw new Error("Unexpected record 0x"+d.toString(16))}}}),n}function oOe(){var t=hc();return ur(t,332),ur(t,334,jd(1)),ur(t,335,eOe({name:"XLDAPR",version:12e4,flags:3496657072})),ur(t,336),ur(t,339,nOe(1,"XLDAPR")),ur(t,52),ur(t,35,jd(514)),ur(t,4096,jd(0)),ur(t,4097,Bu(1)),ur(t,36),ur(t,53),ur(t,340),ur(t,337,sOe(1)),ur(t,51,rOe([[1,0]])),ur(t,338),ur(t,333),t.end()}function lOe(t,e,r){var n={Types:[],Cell:[],Value:[]};if(!t)return n;var a=!1,s=2,i;return t.replace(wl,function(l){var c=ln(l);switch(Df(c[0])){case"<?xml":break;case"<metadata":case"</metadata>":break;case"<metadataTypes":case"</metadataTypes>":break;case"<metadataType":n.Types.push({name:c.name});break;case"</metadataType>":break;case"<futureMetadata":for(var u=0;u<n.Types.length;++u)n.Types[u].name==c.name&&(i=n.Types[u]);break;case"</futureMetadata>":break;case"<bk>":break;case"</bk>":break;case"<rc":s==1?n.Cell.push({type:n.Types[c.t-1].name,index:+c.v}):s==0&&n.Value.push({type:n.Types[c.t-1].name,index:+c.v});break;case"</rc>":break;case"<cellMetadata":s=1;break;case"</cellMetadata>":s=2;break;case"<valueMetadata":s=0;break;case"</valueMetadata>":s=2;break;case"<extLst":case"<extLst>":case"</extLst>":case"<extLst/>":break;case"<ext":a=!0;break;case"</ext>":a=!1;break;case"<rvb":if(!i)break;i.offsets||(i.offsets=[]),i.offsets.push(+c.i);break;default:if(!a&&r.WTF)throw new Error("unrecognized "+c[0]+" in metadata")}return l}),n}function nne(){var t=[Ai];return t.push(`<metadata xmlns="http://schemas.openxmlformats.org/spreadsheetml/2006/main" xmlns:xlrd="http://schemas.microsoft.com/office/spreadsheetml/2017/richdata" xmlns:xda="http://schemas.microsoft.com/office/spreadsheetml/2017/dynamicarray">
  <metadataTypes count="1">
    <metadataType name="XLDAPR" minSupportedVersion="120000" copy="1" pasteAll="1" pasteValues="1" merge="1" splitFirst="1" rowColShift="1" clearFormats="1" clearComments="1" assign="1" coerce="1" cellMeta="1"/>
  </metadataTypes>
  <futureMetadata name="XLDAPR" count="1">
    <bk>
      <extLst>
        <ext uri="{bdbb8cdc-fa1e-496e-a857-3c3f30c029c3}">
          <xda:dynamicArrayProperties fDynamic="1" fCollapsed="0"/>
        </ext>
      </extLst>
    </bk>
  </futureMetadata>
  <cellMetadata count="1">
    <bk>
      <rc t="1" v="0"/>
    </bk>
  </cellMetadata>
</metadata>`),t.join("")}function cOe(t){var e=[];if(!t)return e;var r=1;return(t.match(wl)||[]).forEach(function(n){var a=ln(n);switch(a[0]){case"<?xml":break;case"<calcChain":case"<calcChain>":case"</calcChain>":break;case"<c":delete a[0],a.i?r=a.i:a.i=r,e.push(a);break}}),e}function uOe(t){var e={};e.i=t.read_shift(4);var r={};r.r=t.read_shift(4),r.c=t.read_shift(4),e.r=sn(r);var n=t.read_shift(1);return n&2&&(e.l="1"),n&8&&(e.a="1"),e}function dOe(t,e,r){var n=[];return rh(t,function(s,i,l){switch(l){case 63:n.push(s);break;default:if(!i.T)throw new Error("Unexpected record 0x"+l.toString(16))}}),n}function fOe(t,e,r,n){if(!t)return t;var a=n||{},s=!1;rh(t,function(l,c,u){switch(u){case 359:case 363:case 364:case 366:case 367:case 368:case 369:case 370:case 371:case 472:case 577:case 578:case 579:case 580:case 581:case 582:case 583:case 584:case 585:case 586:case 587:break;case 35:s=!0;break;case 36:s=!1;break;default:if(!c.T){if(!s||a.WTF)throw new Error("Unexpected record 0x"+u.toString(16))}}},a)}function AOe(t,e){if(!t)return"??";var r=(t.match(/<c:chart [^>]*r:id="([^"]*)"/)||["",""])[1];return e["!id"][r].Target}var _x=1024;function ane(t,e){for(var r=[21600,21600],n=["m0,0l0",r[1],r[0],r[1],r[0],"0xe"].join(","),a=[br("xml",null,{"xmlns:v":Mc.v,"xmlns:o":Mc.o,"xmlns:x":Mc.x,"xmlns:mv":Mc.mv}).replace(/\/>/,">"),br("o:shapelayout",br("o:idmap",null,{"v:ext":"edit",data:t}),{"v:ext":"edit"}),br("v:shapetype",[br("v:stroke",null,{joinstyle:"miter"}),br("v:path",null,{gradientshapeok:"t","o:connecttype":"rect"})].join(""),{id:"_x0000_t202","o:spt":202,coordsize:r.join(","),path:n})];_x<t*1e3;)_x+=1e3;return e.forEach(function(s){var i=Ps(s[0]),l={color2:"#BEFF82",type:"gradient"};l.type=="gradient"&&(l.angle="-180");var c=l.type=="gradient"?br("o:fill",null,{type:"gradientUnscaled","v:ext":"view"}):null,u=br("v:fill",c,l),d={on:"t",obscured:"t"};++_x,a=a.concat(["<v:shape"+a2({id:"_x0000_s"+_x,type:"#_x0000_t202",style:"position:absolute; margin-left:80pt;margin-top:5pt;width:104pt;height:64pt;z-index:10"+(s[1].hidden?";visibility:hidden":""),fillcolor:"#ECFAD4",strokecolor:"#edeaa1"})+">",u,br("v:shadow",null,d),br("v:path",null,{"o:connecttype":"none"}),'<v:textbox><div style="text-align:left"></div></v:textbox>','<x:ClientData ObjectType="Note">',"<x:MoveWithCells/>","<x:SizeWithCells/>",Vo("x:Anchor",[i.c+1,0,i.r+1,0,i.c+3,20,i.r+5,20].join(",")),Vo("x:AutoFill","False"),Vo("x:Row",String(i.r)),Vo("x:Column",String(i.c)),s[1].hidden?"":"<x:Visible/>","</x:ClientData>","</v:shape>"])}),a.push("</xml>"),a.join("")}function EH(t,e,r,n){var a=Array.isArray(t),s;e.forEach(function(i){var l=Ps(i.ref);if(a?(t[l.r]||(t[l.r]=[]),s=t[l.r][l.c]):s=t[i.ref],!s){s={t:"z"},a?t[l.r][l.c]=s:t[i.ref]=s;var c=Xn(t["!ref"]||"BDWGO1000001:A1");c.s.r>l.r&&(c.s.r=l.r),c.e.r<l.r&&(c.e.r=l.r),c.s.c>l.c&&(c.s.c=l.c),c.e.c<l.c&&(c.e.c=l.c);var u=vn(c);u!==t["!ref"]&&(t["!ref"]=u)}s.c||(s.c=[]);var d={a:i.author,t:i.t,r:i.r,T:r};i.h&&(d.h=i.h);for(var f=s.c.length-1;f>=0;--f){if(!r&&s.c[f].T)return;r&&!s.c[f].T&&s.c.splice(f,1)}if(r&&n){for(f=0;f<n.length;++f)if(d.a==n[f].id){d.a=n[f].name||d.a;break}}s.c.push(d)})}function hOe(t,e){if(t.match(/<(?:\w+:)?comments *\/>/))return[];var r=[],n=[],a=t.match(/<(?:\w+:)?authors>([\s\S]*)<\/(?:\w+:)?authors>/);a&&a[1]&&a[1].split(/<\/\w*:?author>/).forEach(function(i){if(!(i===""||i.trim()==="")){var l=i.match(/<(?:\w+:)?author[^>]*>(.*)/);l&&r.push(l[1])}});var s=t.match(/<(?:\w+:)?commentList>([\s\S]*)<\/(?:\w+:)?commentList>/);return s&&s[1]&&s[1].split(/<\/\w*:?comment>/).forEach(function(i){if(!(i===""||i.trim()==="")){var l=i.match(/<(?:\w+:)?comment[^>]*>/);if(l){var c=ln(l[0]),u={author:c.authorId&&r[c.authorId]||"sheetjsghost",ref:c.ref,guid:c.guid},d=Ps(c.ref);if(!(e.sheetRows&&e.sheetRows<=d.r)){var f=i.match(/<(?:\w+:)?text>([\s\S]*)<\/(?:\w+:)?text>/),h=!!f&&!!f[1]&&pD(f[1])||{r:"",t:"",h:""};u.r=h.r,h.r=="<t></t>"&&(h.t=h.h=""),u.t=(h.t||"").replace(/\r\n/g,`
`).replace(/\r/g,`
`),e.cellHTML&&(u.h=h.h),n.push(u)}}}}),n}function sne(t){var e=[Ai,br("comments",null,{xmlns:sg[0]})],r=[];return e.push("<authors>"),t.forEach(function(n){n[1].forEach(function(a){var s=Ca(a.a);r.indexOf(s)==-1&&(r.push(s),e.push("<author>"+s+"</author>")),a.T&&a.ID&&r.indexOf("tc="+a.ID)==-1&&(r.push("tc="+a.ID),e.push("<author>tc="+a.ID+"</author>"))})}),r.length==0&&(r.push("SheetJ5"),e.push("<author>SheetJ5</author>")),e.push("</authors>"),e.push("<commentList>"),t.forEach(function(n){var a=0,s=[];if(n[1][0]&&n[1][0].T&&n[1][0].ID?a=r.indexOf("tc="+n[1][0].ID):n[1].forEach(function(c){c.a&&(a=r.indexOf(Ca(c.a))),s.push(c.t||"")}),e.push('<comment ref="'+n[0]+'" authorId="'+a+'"><text>'),s.length<=1)e.push(Vo("t",Ca(s[0]||"")));else{for(var i=`Comment:
    `+s[0]+`
`,l=1;l<s.length;++l)i+=`Reply:
    `+s[l]+`
`;e.push(Vo("t",Ca(i)))}e.push("</text></comment>")}),e.push("</commentList>"),e.length>2&&(e[e.length]="</comments>",e[1]=e[1].replace("/>",">")),e.join("")}function mOe(t,e){var r=[],n=!1,a={},s=0;return t.replace(wl,function(l,c){var u=ln(l);switch(Df(u[0])){case"<?xml":break;case"<ThreadedComments":break;case"</ThreadedComments>":break;case"<threadedComment":a={author:u.personId,guid:u.id,ref:u.ref,T:1};break;case"</threadedComment>":a.t!=null&&r.push(a);break;case"<text>":case"<text":s=c+l.length;break;case"</text>":a.t=t.slice(s,c).replace(/\r\n/g,`
`).replace(/\r/g,`
`);break;case"<mentions":case"<mentions>":n=!0;break;case"</mentions>":n=!1;break;case"<extLst":case"<extLst>":case"</extLst>":case"<extLst/>":break;case"<ext":n=!0;break;case"</ext>":n=!1;break;default:if(!n&&e.WTF)throw new Error("unrecognized "+u[0]+" in threaded comments")}return l}),r}function pOe(t,e,r){var n=[Ai,br("ThreadedComments",null,{xmlns:Qi.TCMNT}).replace(/[\/]>/,">")];return t.forEach(function(a){var s="";(a[1]||[]).forEach(function(i,l){if(!i.T){delete i.ID;return}i.a&&e.indexOf(i.a)==-1&&e.push(i.a);var c={ref:a[0],id:"{54EE7951-7262-4200-6969-"+("000000000000"+r.tcid++).slice(-12)+"}"};l==0?s=c.id:c.parentId=s,i.ID=c.id,i.a&&(c.personId="{54EE7950-7262-4200-6969-"+("000000000000"+e.indexOf(i.a)).slice(-12)+"}"),n.push(br("threadedComment",Vo("text",i.t||""),c))})}),n.push("</ThreadedComments>"),n.join("")}function gOe(t,e){var r=[],n=!1;return t.replace(wl,function(s){var i=ln(s);switch(Df(i[0])){case"<?xml":break;case"<personList":break;case"</personList>":break;case"<person":r.push({name:i.displayname,id:i.id});break;case"</person>":break;case"<extLst":case"<extLst>":case"</extLst>":case"<extLst/>":break;case"<ext":n=!0;break;case"</ext>":n=!1;break;default:if(!n&&e.WTF)throw new Error("unrecognized "+i[0]+" in threaded comments")}return s}),r}function xOe(t){var e=[Ai,br("personList",null,{xmlns:Qi.TCMNT,"xmlns:x":sg[0]}).replace(/[\/]>/,">")];return t.forEach(function(r,n){e.push(br("person",null,{displayName:r,id:"{54EE7950-7262-4200-6969-"+("000000000000"+n).slice(-12)+"}",userId:r,providerId:"None"}))}),e.push("</personList>"),e.join("")}function vOe(t){var e={};e.iauthor=t.read_shift(4);var r=cg(t);return e.rfx=r.s,e.ref=sn(r.s),t.l+=16,e}function yOe(t,e){return e==null&&(e=Yt(36)),e.write_shift(4,t[1].iauthor),$v(t[0],e),e.write_shift(4,0),e.write_shift(4,0),e.write_shift(4,0),e.write_shift(4,0),e}var bOe=gl;function wOe(t){return ho(t.slice(0,54))}function NOe(t,e){var r=[],n=[],a={},s=!1;return rh(t,function(l,c,u){switch(u){case 632:n.push(l);break;case 635:a=l;break;case 637:a.t=l.t,a.h=l.h,a.r=l.r;break;case 636:if(a.author=n[a.iauthor],delete a.iauthor,e.sheetRows&&a.rfx&&e.sheetRows<=a.rfx.r)break;a.t||(a.t=""),delete a.rfx,r.push(a);break;case 3072:break;case 35:s=!0;break;case 36:s=!1;break;case 37:break;case 38:break;default:if(!c.T){if(!s||e.WTF)throw new Error("Unexpected record 0x"+u.toString(16))}}}),r}function COe(t){var e=hc(),r=[];return ur(e,628),ur(e,630),t.forEach(function(n){n[1].forEach(function(a){r.indexOf(a.a)>-1||(r.push(a.a.slice(0,54)),ur(e,632,wOe(a.a)))})}),ur(e,631),ur(e,633),t.forEach(function(n){n[1].forEach(function(a){a.iauthor=r.indexOf(a.a);var s={s:Ps(n[0]),e:Ps(n[0])};ur(e,635,yOe([s,a])),a.t&&a.t.length>0&&ur(e,637,GBe(a)),ur(e,636),delete a.iauthor})}),ur(e,634),ur(e,629),e.end()}var _Oe="application/vnd.ms-office.vbaProject";function EOe(t){var e=Xr.utils.cfb_new({root:"R"});return t.FullPaths.forEach(function(r,n){if(!(r.slice(-1)==="/"||!r.match(/_VBA_PROJECT_CUR/))){var a=r.replace(/^[^\/]*/,"R").replace(/\/_VBA_PROJECT_CUR\u0000*/,"");Xr.utils.cfb_add(e,a,t.FileIndex[n].content)}}),Xr.write(e)}function SOe(t,e){e.FullPaths.forEach(function(r,n){if(n!=0){var a=r.replace(/[^\/]*[\/]/,"/_VBA_PROJECT_CUR/");a.slice(-1)!=="/"&&Xr.utils.cfb_add(t,a,e.FileIndex[n].content)}})}var ine=["xlsb","xlsm","xlam","biff8","xla"];function IOe(){return{"!type":"dialog"}}function jOe(){return{"!type":"dialog"}}function BOe(){return{"!type":"macro"}}function POe(){return{"!type":"macro"}}var Qx=function(){var t=/(^|[^A-Za-z_])R(\[?-?\d+\]|[1-9]\d*|)C(\[?-?\d+\]|[1-9]\d*|)(?![A-Za-z0-9_])/g,e={r:0,c:0};function r(n,a,s,i){var l=!1,c=!1;s.length==0?c=!0:s.charAt(0)=="["&&(c=!0,s=s.slice(1,-1)),i.length==0?l=!0:i.charAt(0)=="["&&(l=!0,i=i.slice(1,-1));var u=s.length>0?parseInt(s,10)|0:0,d=i.length>0?parseInt(i,10)|0:0;return l?d+=e.c:--d,c?u+=e.r:--u,a+(l?"":"$")+Bs(d)+(c?"":"$")+di(u)}return function(a,s){return e=s,a.replace(t,r)}}(),yD=/(^|[^._A-Z0-9])([$]?)([A-Z]{1,2}|[A-W][A-Z]{2}|X[A-E][A-Z]|XF[A-D])([$]?)(10[0-3]\d{4}|104[0-7]\d{3}|1048[0-4]\d{2}|10485[0-6]\d|104857[0-6]|[1-9]\d{0,5})(?![_.\(A-Za-z0-9])/g,bD=function(){return function(e,r){return e.replace(yD,function(n,a,s,i,l,c){var u=oD(i)-(s?0:r.c),d=iD(c)-(l?0:r.r),f=d==0?"":l?d+1:"["+d+"]",h=u==0?"":s?u+1:"["+u+"]";return a+"R"+f+"C"+h})}}();function one(t,e){return t.replace(yD,function(r,n,a,s,i,l){return n+(a=="$"?a+s:Bs(oD(s)+e.c))+(i=="$"?i+l:di(iD(l)+e.r))})}function TOe(t,e,r){var n=mc(e),a=n.s,s=Ps(r),i={r:s.r-a.r,c:s.c-a.c};return one(t,i)}function kOe(t){return t.length!=1}function SH(t){return t.replace(/_xlfn\./g,"")}function hi(t){t.l+=1}function q0(t,e){var r=t.read_shift(2);return[r&16383,r>>14&1,r>>15&1]}function lne(t,e,r){var n=2;if(r){if(r.biff>=2&&r.biff<=5)return cne(t);r.biff==12&&(n=4)}var a=t.read_shift(n),s=t.read_shift(n),i=q0(t),l=q0(t);return{s:{r:a,c:i[0],cRel:i[1],rRel:i[2]},e:{r:s,c:l[0],cRel:l[1],rRel:l[2]}}}function cne(t){var e=q0(t),r=q0(t),n=t.read_shift(1),a=t.read_shift(1);return{s:{r:e[0],c:n,cRel:e[1],rRel:e[2]},e:{r:r[0],c:a,cRel:r[1],rRel:r[2]}}}function FOe(t,e,r){if(r.biff<8)return cne(t);var n=t.read_shift(r.biff==12?4:2),a=t.read_shift(r.biff==12?4:2),s=q0(t),i=q0(t);return{s:{r:n,c:s[0],cRel:s[1],rRel:s[2]},e:{r:a,c:i[0],cRel:i[1],rRel:i[2]}}}function une(t,e,r){if(r&&r.biff>=2&&r.biff<=5)return OOe(t);var n=t.read_shift(r&&r.biff==12?4:2),a=q0(t);return{r:n,c:a[0],cRel:a[1],rRel:a[2]}}function OOe(t){var e=q0(t),r=t.read_shift(1);return{r:e[0],c:r,cRel:e[1],rRel:e[2]}}function DOe(t){var e=t.read_shift(2),r=t.read_shift(2);return{r:e,c:r&255,fQuoted:!!(r&16384),cRel:r>>15,rRel:r>>15}}function ROe(t,e,r){var n=r&&r.biff?r.biff:8;if(n>=2&&n<=5)return MOe(t);var a=t.read_shift(n>=12?4:2),s=t.read_shift(2),i=(s&16384)>>14,l=(s&32768)>>15;if(s&=16383,l==1)for(;a>524287;)a-=1048576;if(i==1)for(;s>8191;)s=s-16384;return{r:a,c:s,cRel:i,rRel:l}}function MOe(t){var e=t.read_shift(2),r=t.read_shift(1),n=(e&32768)>>15,a=(e&16384)>>14;return e&=16383,n==1&&e>=8192&&(e=e-16384),a==1&&r>=128&&(r=r-256),{r:e,c:r,cRel:a,rRel:n}}function LOe(t,e,r){var n=(t[t.l++]&96)>>5,a=lne(t,r.biff>=2&&r.biff<=5?6:8,r);return[n,a]}function UOe(t,e,r){var n=(t[t.l++]&96)>>5,a=t.read_shift(2,"i"),s=8;if(r)switch(r.biff){case 5:t.l+=12,s=6;break;case 12:s=12;break}var i=lne(t,s,r);return[n,a,i]}function QOe(t,e,r){var n=(t[t.l++]&96)>>5;return t.l+=r&&r.biff>8?12:r.biff<8?6:8,[n]}function VOe(t,e,r){var n=(t[t.l++]&96)>>5,a=t.read_shift(2),s=8;if(r)switch(r.biff){case 5:t.l+=12,s=6;break;case 12:s=12;break}return t.l+=s,[n,a]}function HOe(t,e,r){var n=(t[t.l++]&96)>>5,a=FOe(t,e-1,r);return[n,a]}function $Oe(t,e,r){var n=(t[t.l++]&96)>>5;return t.l+=r.biff==2?6:r.biff==12?14:7,[n]}function IH(t){var e=t[t.l+1]&1,r=1;return t.l+=4,[e,r]}function KOe(t,e,r){t.l+=2;for(var n=t.read_shift(r&&r.biff==2?1:2),a=[],s=0;s<=n;++s)a.push(t.read_shift(r&&r.biff==2?1:2));return a}function GOe(t,e,r){var n=t[t.l+1]&255?1:0;return t.l+=2,[n,t.read_shift(r&&r.biff==2?1:2)]}function qOe(t,e,r){var n=t[t.l+1]&255?1:0;return t.l+=2,[n,t.read_shift(r&&r.biff==2?1:2)]}function zOe(t){var e=t[t.l+1]&255?1:0;return t.l+=2,[e,t.read_shift(2)]}function WOe(t,e,r){var n=t[t.l+1]&255?1:0;return t.l+=r&&r.biff==2?3:4,[n]}function dne(t){var e=t.read_shift(1),r=t.read_shift(1);return[e,r]}function XOe(t){return t.read_shift(2),dne(t)}function YOe(t){return t.read_shift(2),dne(t)}function JOe(t,e,r){var n=(t[t.l]&96)>>5;t.l+=1;var a=une(t,0,r);return[n,a]}function ZOe(t,e,r){var n=(t[t.l]&96)>>5;t.l+=1;var a=ROe(t,0,r);return[n,a]}function e6e(t,e,r){var n=(t[t.l]&96)>>5;t.l+=1;var a=t.read_shift(2);r&&r.biff==5&&(t.l+=12);var s=une(t,0,r);return[n,a,s]}function t6e(t,e,r){var n=(t[t.l]&96)>>5;t.l+=1;var a=t.read_shift(r&&r.biff<=3?1:2);return[aDe[a],hne[a],n]}function r6e(t,e,r){var n=t[t.l++],a=t.read_shift(1),s=r&&r.biff<=3?[n==88?-1:0,t.read_shift(1)]:n6e(t);return[a,(s[0]===0?hne:nDe)[s[1]]]}function n6e(t){return[t[t.l+1]>>7,t.read_shift(2)&32767]}function a6e(t,e,r){t.l+=r&&r.biff==2?3:4}function s6e(t,e,r){if(t.l++,r&&r.biff==12)return[t.read_shift(4,"i"),0];var n=t.read_shift(2),a=t.read_shift(r&&r.biff==2?1:2);return[n,a]}function i6e(t){return t.l++,nh[t.read_shift(1)]}function o6e(t){return t.l++,t.read_shift(2)}function l6e(t){return t.l++,t.read_shift(1)!==0}function c6e(t){return t.l++,ml(t)}function u6e(t,e,r){return t.l++,cw(t,e-1,r)}function d6e(t,e){var r=[t.read_shift(1)];if(e==12)switch(r[0]){case 2:r[0]=4;break;case 4:r[0]=16;break;case 0:r[0]=1;break;case 1:r[0]=2;break}switch(r[0]){case 4:r[1]=ri(t,1)?"TRUE":"FALSE",e!=12&&(t.l+=7);break;case 37:case 16:r[1]=nh[t[t.l]],t.l+=e==12?4:8;break;case 0:t.l+=8;break;case 1:r[1]=ml(t);break;case 2:r[1]=ug(t,0,{biff:e>0&&e<8?2:e});break;default:throw new Error("Bad SerAr: "+r[0])}return r}function f6e(t,e,r){for(var n=t.read_shift(r.biff==12?4:2),a=[],s=0;s!=n;++s)a.push((r.biff==12?cg:B4)(t));return a}function A6e(t,e,r){var n=0,a=0;r.biff==12?(n=t.read_shift(4),a=t.read_shift(4)):(a=1+t.read_shift(1),n=1+t.read_shift(2)),r.biff>=2&&r.biff<8&&(--n,--a==0&&(a=256));for(var s=0,i=[];s!=n&&(i[s]=[]);++s)for(var l=0;l!=a;++l)i[s][l]=d6e(t,r.biff);return i}function h6e(t,e,r){var n=t.read_shift(1)>>>5&3,a=!r||r.biff>=8?4:2,s=t.read_shift(a);switch(r.biff){case 2:t.l+=5;break;case 3:case 4:t.l+=8;break;case 5:t.l+=12;break}return[n,0,s]}function m6e(t,e,r){if(r.biff==5)return p6e(t);var n=t.read_shift(1)>>>5&3,a=t.read_shift(2),s=t.read_shift(4);return[n,a,s]}function p6e(t){var e=t.read_shift(1)>>>5&3,r=t.read_shift(2,"i");t.l+=8;var n=t.read_shift(2);return t.l+=12,[e,r,n]}function g6e(t,e,r){var n=t.read_shift(1)>>>5&3;t.l+=r&&r.biff==2?3:4;var a=t.read_shift(r&&r.biff==2?1:2);return[n,a]}function x6e(t,e,r){var n=t.read_shift(1)>>>5&3,a=t.read_shift(r&&r.biff==2?1:2);return[n,a]}function v6e(t,e,r){var n=t.read_shift(1)>>>5&3;return t.l+=4,r.biff<8&&t.l--,r.biff==12&&(t.l+=2),[n]}function y6e(t,e,r){var n=(t[t.l++]&96)>>5,a=t.read_shift(2),s=4;if(r)switch(r.biff){case 5:s=15;break;case 12:s=6;break}return t.l+=s,[n,a]}var b6e=yl,w6e=yl,N6e=yl;function dw(t,e,r){return t.l+=2,[DOe(t)]}function wD(t){return t.l+=6,[]}var C6e=dw,_6e=wD,E6e=wD,S6e=dw;function fne(t){return t.l+=2,[gi(t),t.read_shift(2)&1]}var I6e=dw,j6e=fne,B6e=wD,P6e=dw,T6e=dw,k6e=["Data","All","Headers","??","?Data2","??","?DataHeaders","??","Totals","??","??","??","?DataTotals","??","??","??","?Current"];function F6e(t){t.l+=2;var e=t.read_shift(2),r=t.read_shift(2),n=t.read_shift(4),a=t.read_shift(2),s=t.read_shift(2),i=k6e[r>>2&31];return{ixti:e,coltype:r&3,rt:i,idx:n,c:a,C:s}}function O6e(t){return t.l+=2,[t.read_shift(4)]}function D6e(t,e,r){return t.l+=5,t.l+=2,t.l+=r.biff==2?1:4,["PTGSHEET"]}function R6e(t,e,r){return t.l+=r.biff==2?4:5,["PTGENDSHEET"]}function M6e(t){var e=t.read_shift(1)>>>5&3,r=t.read_shift(2);return[e,r]}function L6e(t){var e=t.read_shift(1)>>>5&3,r=t.read_shift(2);return[e,r]}function U6e(t){return t.l+=4,[0,0]}var jH={1:{n:"PtgExp",f:s6e},2:{n:"PtgTbl",f:N6e},3:{n:"PtgAdd",f:hi},4:{n:"PtgSub",f:hi},5:{n:"PtgMul",f:hi},6:{n:"PtgDiv",f:hi},7:{n:"PtgPower",f:hi},8:{n:"PtgConcat",f:hi},9:{n:"PtgLt",f:hi},10:{n:"PtgLe",f:hi},11:{n:"PtgEq",f:hi},12:{n:"PtgGe",f:hi},13:{n:"PtgGt",f:hi},14:{n:"PtgNe",f:hi},15:{n:"PtgIsect",f:hi},16:{n:"PtgUnion",f:hi},17:{n:"PtgRange",f:hi},18:{n:"PtgUplus",f:hi},19:{n:"PtgUminus",f:hi},20:{n:"PtgPercent",f:hi},21:{n:"PtgParen",f:hi},22:{n:"PtgMissArg",f:hi},23:{n:"PtgStr",f:u6e},26:{n:"PtgSheet",f:D6e},27:{n:"PtgEndSheet",f:R6e},28:{n:"PtgErr",f:i6e},29:{n:"PtgBool",f:l6e},30:{n:"PtgInt",f:o6e},31:{n:"PtgNum",f:c6e},32:{n:"PtgArray",f:$Oe},33:{n:"PtgFunc",f:t6e},34:{n:"PtgFuncVar",f:r6e},35:{n:"PtgName",f:h6e},36:{n:"PtgRef",f:JOe},37:{n:"PtgArea",f:LOe},38:{n:"PtgMemArea",f:g6e},39:{n:"PtgMemErr",f:b6e},40:{n:"PtgMemNoMem",f:w6e},41:{n:"PtgMemFunc",f:x6e},42:{n:"PtgRefErr",f:v6e},43:{n:"PtgAreaErr",f:QOe},44:{n:"PtgRefN",f:ZOe},45:{n:"PtgAreaN",f:HOe},46:{n:"PtgMemAreaN",f:M6e},47:{n:"PtgMemNoMemN",f:L6e},57:{n:"PtgNameX",f:m6e},58:{n:"PtgRef3d",f:e6e},59:{n:"PtgArea3d",f:UOe},60:{n:"PtgRefErr3d",f:y6e},61:{n:"PtgAreaErr3d",f:VOe},255:{}},Q6e={64:32,96:32,65:33,97:33,66:34,98:34,67:35,99:35,68:36,100:36,69:37,101:37,70:38,102:38,71:39,103:39,72:40,104:40,73:41,105:41,74:42,106:42,75:43,107:43,76:44,108:44,77:45,109:45,78:46,110:46,79:47,111:47,88:34,120:34,89:57,121:57,90:58,122:58,91:59,123:59,92:60,124:60,93:61,125:61},V6e={1:{n:"PtgElfLel",f:fne},2:{n:"PtgElfRw",f:P6e},3:{n:"PtgElfCol",f:C6e},6:{n:"PtgElfRwV",f:T6e},7:{n:"PtgElfColV",f:S6e},10:{n:"PtgElfRadical",f:I6e},11:{n:"PtgElfRadicalS",f:B6e},13:{n:"PtgElfColS",f:_6e},15:{n:"PtgElfColSV",f:E6e},16:{n:"PtgElfRadicalLel",f:j6e},25:{n:"PtgList",f:F6e},29:{n:"PtgSxName",f:O6e},255:{}},H6e={0:{n:"PtgAttrNoop",f:U6e},1:{n:"PtgAttrSemi",f:WOe},2:{n:"PtgAttrIf",f:qOe},4:{n:"PtgAttrChoose",f:KOe},8:{n:"PtgAttrGoto",f:GOe},16:{n:"PtgAttrSum",f:a6e},32:{n:"PtgAttrBaxcel",f:IH},33:{n:"PtgAttrBaxcel",f:IH},64:{n:"PtgAttrSpace",f:XOe},65:{n:"PtgAttrSpaceSemi",f:YOe},128:{n:"PtgAttrIfError",f:zOe},255:{}};function fw(t,e,r,n){if(n.biff<8)return yl(t,e);for(var a=t.l+e,s=[],i=0;i!==r.length;++i)switch(r[i][0]){case"PtgArray":r[i][1]=A6e(t,0,n),s.push(r[i][1]);break;case"PtgMemArea":r[i][2]=f6e(t,r[i][1],n),s.push(r[i][2]);break;case"PtgExp":n&&n.biff==12&&(r[i][1][1]=t.read_shift(4),s.push(r[i][1]));break;case"PtgList":case"PtgElfRadicalS":case"PtgElfColS":case"PtgElfColSV":throw"Unsupported "+r[i][0]}return e=a-t.l,e!==0&&s.push(yl(t,e)),s}function Aw(t,e,r){for(var n=t.l+e,a,s,i=[];n!=t.l;)e=n-t.l,s=t[t.l],a=jH[s]||jH[Q6e[s]],(s===24||s===25)&&(a=(s===24?V6e:H6e)[t[t.l+1]]),!a||!a.f?yl(t,e):i.push([a.n,a.f(t,e,r)]);return i}function $6e(t){for(var e=[],r=0;r<t.length;++r){for(var n=t[r],a=[],s=0;s<n.length;++s){var i=n[s];if(i)switch(i[0]){case 2:a.push('"'+i[1].replace(/"/g,'""')+'"');break;default:a.push(i[1])}else a.push("")}e.push(a.join(","))}return e.join(";")}var K6e={PtgAdd:"+",PtgConcat:"&",PtgDiv:"/",PtgEq:"=",PtgGe:">=",PtgGt:">",PtgLe:"<=",PtgLt:"<",PtgMul:"*",PtgNe:"<>",PtgPower:"^",PtgSub:"-"};function G6e(t,e){if(!t&&!(e&&e.biff<=5&&e.biff>=2))throw new Error("empty sheet name");return/[^\w\u4E00-\u9FFF\u3040-\u30FF]/.test(t)?"'"+t+"'":t}function Ane(t,e,r){if(!t)return"SH33TJSERR0";if(r.biff>8&&(!t.XTI||!t.XTI[e]))return t.SheetNames[e];if(!t.XTI)return"SH33TJSERR6";var n=t.XTI[e];if(r.biff<8)return e>1e4&&(e-=65536),e<0&&(e=-e),e==0?"":t.XTI[e-1];if(!n)return"SH33TJSERR1";var a="";if(r.biff>8)switch(t[n[0]][0]){case 357:return a=n[1]==-1?"#REF":t.SheetNames[n[1]],n[1]==n[2]?a:a+":"+t.SheetNames[n[2]];case 358:return r.SID!=null?t.SheetNames[r.SID]:"SH33TJSSAME"+t[n[0]][0];case 355:default:return"SH33TJSSRC"+t[n[0]][0]}switch(t[n[0]][0][0]){case 1025:return a=n[1]==-1?"#REF":t.SheetNames[n[1]]||"SH33TJSERR3",n[1]==n[2]?a:a+":"+t.SheetNames[n[2]];case 14849:return t[n[0]].slice(1).map(function(s){return s.Name}).join(";;");default:return t[n[0]][0][3]?(a=n[1]==-1?"#REF":t[n[0]][0][3][n[1]]||"SH33TJSERR4",n[1]==n[2]?a:a+":"+t[n[0]][0][3][n[2]]):"SH33TJSERR2"}}function BH(t,e,r){var n=Ane(t,e,r);return n=="#REF"?n:G6e(n,r)}function fl(t,e,r,n,a){var s=a&&a.biff||8,i={s:{c:0,r:0}},l=[],c,u,d,f=0,h=0,A,m="";if(!t[0]||!t[0][0])return"";for(var p=-1,g="",x=0,y=t[0].length;x<y;++x){var b=t[0][x];switch(b[0]){case"PtgUminus":l.push("-"+l.pop());break;case"PtgUplus":l.push("+"+l.pop());break;case"PtgPercent":l.push(l.pop()+"%");break;case"PtgAdd":case"PtgConcat":case"PtgDiv":case"PtgEq":case"PtgGe":case"PtgGt":case"PtgLe":case"PtgLt":case"PtgMul":case"PtgNe":case"PtgPower":case"PtgSub":if(c=l.pop(),u=l.pop(),p>=0){switch(t[0][p][1][0]){case 0:g=Ks(" ",t[0][p][1][1]);break;case 1:g=Ks("\r",t[0][p][1][1]);break;default:if(g="",a.WTF)throw new Error("Unexpected PtgAttrSpaceType "+t[0][p][1][0])}u=u+g,p=-1}l.push(u+K6e[b[0]]+c);break;case"PtgIsect":c=l.pop(),u=l.pop(),l.push(u+" "+c);break;case"PtgUnion":c=l.pop(),u=l.pop(),l.push(u+","+c);break;case"PtgRange":c=l.pop(),u=l.pop(),l.push(u+":"+c);break;case"PtgAttrChoose":break;case"PtgAttrGoto":break;case"PtgAttrIf":break;case"PtgAttrIfError":break;case"PtgRef":d=tb(b[1][1],i,a),l.push(rb(d,s));break;case"PtgRefN":d=r?tb(b[1][1],r,a):b[1][1],l.push(rb(d,s));break;case"PtgRef3d":f=b[1][1],d=tb(b[1][2],i,a),m=BH(n,f,a),l.push(m+"!"+rb(d,s));break;case"PtgFunc":case"PtgFuncVar":var w=b[1][0],j=b[1][1];w||(w=0),w&=127;var I=w==0?[]:l.slice(-w);l.length-=w,j==="User"&&(j=I.shift()),l.push(j+"("+I.join(",")+")");break;case"PtgBool":l.push(b[1]?"TRUE":"FALSE");break;case"PtgInt":l.push(b[1]);break;case"PtgNum":l.push(String(b[1]));break;case"PtgStr":l.push('"'+b[1].replace(/"/g,'""')+'"');break;case"PtgErr":l.push(b[1]);break;case"PtgAreaN":A=sH(b[1][1],r?{s:r}:i,a),l.push(W5(A,a));break;case"PtgArea":A=sH(b[1][1],i,a),l.push(W5(A,a));break;case"PtgArea3d":f=b[1][1],A=b[1][2],m=BH(n,f,a),l.push(m+"!"+W5(A,a));break;case"PtgAttrSum":l.push("SUM("+l.pop()+")");break;case"PtgAttrBaxcel":case"PtgAttrSemi":break;case"PtgName":h=b[1][2];var _=(n.names||[])[h-1]||(n[0]||[])[h],E=_?_.Name:"SH33TJSNAME"+String(h);E&&E.slice(0,6)=="_xlfn."&&!a.xlfn&&(E=E.slice(6)),l.push(E);break;case"PtgNameX":var S=b[1][1];h=b[1][2];var k;if(a.biff<=5)S<0&&(S=-S),n[S]&&(k=n[S][h]);else{var P="";if(((n[S]||[])[0]||[])[0]==14849||(((n[S]||[])[0]||[])[0]==1025?n[S][h]&&n[S][h].itab>0&&(P=n.SheetNames[n[S][h].itab-1]+"!"):P=n.SheetNames[h-1]+"!"),n[S]&&n[S][h])P+=n[S][h].Name;else if(n[0]&&n[0][h])P+=n[0][h].Name;else{var T=(Ane(n,S,a)||"").split(";;");T[h-1]?P=T[h-1]:P+="SH33TJSERRX"}l.push(P);break}k||(k={Name:"SH33TJSERRY"}),l.push(k.Name);break;case"PtgParen":var F="(",Y=")";if(p>=0){switch(g="",t[0][p][1][0]){case 2:F=Ks(" ",t[0][p][1][1])+F;break;case 3:F=Ks("\r",t[0][p][1][1])+F;break;case 4:Y=Ks(" ",t[0][p][1][1])+Y;break;case 5:Y=Ks("\r",t[0][p][1][1])+Y;break;default:if(a.WTF)throw new Error("Unexpected PtgAttrSpaceType "+t[0][p][1][0])}p=-1}l.push(F+l.pop()+Y);break;case"PtgRefErr":l.push("#REF!");break;case"PtgRefErr3d":l.push("#REF!");break;case"PtgExp":d={c:b[1][1],r:b[1][0]};var he={c:r.c,r:r.r};if(n.sharedf[sn(d)]){var ue=n.sharedf[sn(d)];l.push(fl(ue,i,he,n,a))}else{var fe=!1;for(c=0;c!=n.arrayf.length;++c)if(u=n.arrayf[c],!(d.c<u[0].s.c||d.c>u[0].e.c)&&!(d.r<u[0].s.r||d.r>u[0].e.r)){l.push(fl(u[1],i,he,n,a)),fe=!0;break}fe||l.push(b[1])}break;case"PtgArray":l.push("{"+$6e(b[1])+"}");break;case"PtgMemArea":break;case"PtgAttrSpace":case"PtgAttrSpaceSemi":p=x;break;case"PtgTbl":break;case"PtgMemErr":break;case"PtgMissArg":l.push("");break;case"PtgAreaErr":l.push("#REF!");break;case"PtgAreaErr3d":l.push("#REF!");break;case"PtgList":l.push("Table"+b[1].idx+"[#"+b[1].rt+"]");break;case"PtgMemAreaN":case"PtgMemNoMemN":case"PtgAttrNoop":case"PtgSheet":case"PtgEndSheet":break;case"PtgMemFunc":break;case"PtgMemNoMem":break;case"PtgElfCol":case"PtgElfColS":case"PtgElfColSV":case"PtgElfColV":case"PtgElfLel":case"PtgElfRadical":case"PtgElfRadicalLel":case"PtgElfRadicalS":case"PtgElfRw":case"PtgElfRwV":throw new Error("Unsupported ELFs");case"PtgSxName":throw new Error("Unrecognized Formula Token: "+String(b));default:throw new Error("Unrecognized Formula Token: "+String(b))}var me=["PtgAttrSpace","PtgAttrSpaceSemi","PtgAttrGoto"];if(a.biff!=3&&p>=0&&me.indexOf(t[0][x][0])==-1){b=t[0][p];var ne=!0;switch(b[1][0]){case 4:ne=!1;case 0:g=Ks(" ",b[1][1]);break;case 5:ne=!1;case 1:g=Ks("\r",b[1][1]);break;default:if(g="",a.WTF)throw new Error("Unexpected PtgAttrSpaceType "+b[1][0])}l.push((ne?g:"")+l.pop()+(ne?"":g)),p=-1}}if(l.length>1&&a.WTF)throw new Error("bad formula stack");return l[0]}function q6e(t,e,r){var n=t.l+e,a=r.biff==2?1:2,s,i=t.read_shift(a);if(i==65535)return[[],yl(t,e-2)];var l=Aw(t,i,r);return e!==i+a&&(s=fw(t,e-i-a,l,r)),t.l=n,[l,s]}function z6e(t,e,r){var n=t.l+e,a=r.biff==2?1:2,s,i=t.read_shift(a);if(i==65535)return[[],yl(t,e-2)];var l=Aw(t,i,r);return e!==i+a&&(s=fw(t,e-i-a,l,r)),t.l=n,[l,s]}function W6e(t,e,r,n){var a=t.l+e,s=Aw(t,n,r),i;return a!==t.l&&(i=fw(t,a-t.l,s,r)),[s,i]}function X6e(t,e,r){var n=t.l+e,a,s=t.read_shift(2),i=Aw(t,s,r);return s==65535?[[],yl(t,e-2)]:(e!==s+2&&(a=fw(t,n-s-2,i,r)),[i,a])}function Y6e(t){var e;if(gA(t,t.l+6)!==65535)return[ml(t),"n"];switch(t[t.l]){case 0:return t.l+=8,["String","s"];case 1:return e=t[t.l+2]===1,t.l+=8,[e,"b"];case 2:return e=t[t.l+2],t.l+=8,[e,"e"];case 3:return t.l+=8,["","s"]}return[]}function J6e(t){if(t==null){var e=Yt(8);return e.write_shift(1,3),e.write_shift(1,0),e.write_shift(2,0),e.write_shift(2,0),e.write_shift(2,65535),e}else if(typeof t=="number")return Op(t);return Op(0)}function eB(t,e,r){var n=t.l+e,a=Rf(t);r.biff==2&&++t.l;var s=Y6e(t),i=t.read_shift(1);r.biff!=2&&(t.read_shift(1),r.biff>=5&&t.read_shift(4));var l=z6e(t,n-t.l,r);return{cell:a,val:s[0],formula:l,shared:i>>3&1,tt:s[1]}}function Z6e(t,e,r,n,a){var s=Rp(e,r,a),i=J6e(t.v),l=Yt(6),c=33;l.write_shift(2,c),l.write_shift(4,0);for(var u=Yt(t.bf.length),d=0;d<t.bf.length;++d)u[d]=t.bf[d];var f=fo([s,i,l,u]);return f}function P4(t,e,r){var n=t.read_shift(4),a=Aw(t,n,r),s=t.read_shift(4),i=s>0?fw(t,s,a,r):null;return[a,i]}var eDe=P4,T4=P4,tDe=P4,rDe=P4,nDe={0:"BEEP",1:"OPEN",2:"OPEN.LINKS",3:"CLOSE.ALL",4:"SAVE",5:"SAVE.AS",6:"FILE.DELETE",7:"PAGE.SETUP",8:"PRINT",9:"PRINTER.SETUP",10:"QUIT",11:"NEW.WINDOW",12:"ARRANGE.ALL",13:"WINDOW.SIZE",14:"WINDOW.MOVE",15:"FULL",16:"CLOSE",17:"RUN",22:"SET.PRINT.AREA",23:"SET.PRINT.TITLES",24:"SET.PAGE.BREAK",25:"REMOVE.PAGE.BREAK",26:"FONT",27:"DISPLAY",28:"PROTECT.DOCUMENT",29:"PRECISION",30:"A1.R1C1",31:"CALCULATE.NOW",32:"CALCULATION",34:"DATA.FIND",35:"EXTRACT",36:"DATA.DELETE",37:"SET.DATABASE",38:"SET.CRITERIA",39:"SORT",40:"DATA.SERIES",41:"TABLE",42:"FORMAT.NUMBER",43:"ALIGNMENT",44:"STYLE",45:"BORDER",46:"CELL.PROTECTION",47:"COLUMN.WIDTH",48:"UNDO",49:"CUT",50:"COPY",51:"PASTE",52:"CLEAR",53:"PASTE.SPECIAL",54:"EDIT.DELETE",55:"INSERT",56:"FILL.RIGHT",57:"FILL.DOWN",61:"DEFINE.NAME",62:"CREATE.NAMES",63:"FORMULA.GOTO",64:"FORMULA.FIND",65:"SELECT.LAST.CELL",66:"SHOW.ACTIVE.CELL",67:"GALLERY.AREA",68:"GALLERY.BAR",69:"GALLERY.COLUMN",70:"GALLERY.LINE",71:"GALLERY.PIE",72:"GALLERY.SCATTER",73:"COMBINATION",74:"PREFERRED",75:"ADD.OVERLAY",76:"GRIDLINES",77:"SET.PREFERRED",78:"AXES",79:"LEGEND",80:"ATTACH.TEXT",81:"ADD.ARROW",82:"SELECT.CHART",83:"SELECT.PLOT.AREA",84:"PATTERNS",85:"MAIN.CHART",86:"OVERLAY",87:"SCALE",88:"FORMAT.LEGEND",89:"FORMAT.TEXT",90:"EDIT.REPEAT",91:"PARSE",92:"JUSTIFY",93:"HIDE",94:"UNHIDE",95:"WORKSPACE",96:"FORMULA",97:"FORMULA.FILL",98:"FORMULA.ARRAY",99:"DATA.FIND.NEXT",100:"DATA.FIND.PREV",101:"FORMULA.FIND.NEXT",102:"FORMULA.FIND.PREV",103:"ACTIVATE",104:"ACTIVATE.NEXT",105:"ACTIVATE.PREV",106:"UNLOCKED.NEXT",107:"UNLOCKED.PREV",108:"COPY.PICTURE",109:"SELECT",110:"DELETE.NAME",111:"DELETE.FORMAT",112:"VLINE",113:"HLINE",114:"VPAGE",115:"HPAGE",116:"VSCROLL",117:"HSCROLL",118:"ALERT",119:"NEW",120:"CANCEL.COPY",121:"SHOW.CLIPBOARD",122:"MESSAGE",124:"PASTE.LINK",125:"APP.ACTIVATE",126:"DELETE.ARROW",127:"ROW.HEIGHT",128:"FORMAT.MOVE",129:"FORMAT.SIZE",130:"FORMULA.REPLACE",131:"SEND.KEYS",132:"SELECT.SPECIAL",133:"APPLY.NAMES",134:"REPLACE.FONT",135:"FREEZE.PANES",136:"SHOW.INFO",137:"SPLIT",138:"ON.WINDOW",139:"ON.DATA",140:"DISABLE.INPUT",142:"OUTLINE",143:"LIST.NAMES",144:"FILE.CLOSE",145:"SAVE.WORKBOOK",146:"DATA.FORM",147:"COPY.CHART",148:"ON.TIME",149:"WAIT",150:"FORMAT.FONT",151:"FILL.UP",152:"FILL.LEFT",153:"DELETE.OVERLAY",155:"SHORT.MENUS",159:"SET.UPDATE.STATUS",161:"COLOR.PALETTE",162:"DELETE.STYLE",163:"WINDOW.RESTORE",164:"WINDOW.MAXIMIZE",166:"CHANGE.LINK",167:"CALCULATE.DOCUMENT",168:"ON.KEY",169:"APP.RESTORE",170:"APP.MOVE",171:"APP.SIZE",172:"APP.MINIMIZE",173:"APP.MAXIMIZE",174:"BRING.TO.FRONT",175:"SEND.TO.BACK",185:"MAIN.CHART.TYPE",186:"OVERLAY.CHART.TYPE",187:"SELECT.END",188:"OPEN.MAIL",189:"SEND.MAIL",190:"STANDARD.FONT",191:"CONSOLIDATE",192:"SORT.SPECIAL",193:"GALLERY.3D.AREA",194:"GALLERY.3D.COLUMN",195:"GALLERY.3D.LINE",196:"GALLERY.3D.PIE",197:"VIEW.3D",198:"GOAL.SEEK",199:"WORKGROUP",200:"FILL.GROUP",201:"UPDATE.LINK",202:"PROMOTE",203:"DEMOTE",204:"SHOW.DETAIL",206:"UNGROUP",207:"OBJECT.PROPERTIES",208:"SAVE.NEW.OBJECT",209:"SHARE",210:"SHARE.NAME",211:"DUPLICATE",212:"APPLY.STYLE",213:"ASSIGN.TO.OBJECT",214:"OBJECT.PROTECTION",215:"HIDE.OBJECT",216:"SET.EXTRACT",217:"CREATE.PUBLISHER",218:"SUBSCRIBE.TO",219:"ATTRIBUTES",220:"SHOW.TOOLBAR",222:"PRINT.PREVIEW",223:"EDIT.COLOR",224:"SHOW.LEVELS",225:"FORMAT.MAIN",226:"FORMAT.OVERLAY",227:"ON.RECALC",228:"EDIT.SERIES",229:"DEFINE.STYLE",240:"LINE.PRINT",243:"ENTER.DATA",249:"GALLERY.RADAR",250:"MERGE.STYLES",251:"EDITION.OPTIONS",252:"PASTE.PICTURE",253:"PASTE.PICTURE.LINK",254:"SPELLING",256:"ZOOM",259:"INSERT.OBJECT",260:"WINDOW.MINIMIZE",265:"SOUND.NOTE",266:"SOUND.PLAY",267:"FORMAT.SHAPE",268:"EXTEND.POLYGON",269:"FORMAT.AUTO",272:"GALLERY.3D.BAR",273:"GALLERY.3D.SURFACE",274:"FILL.AUTO",276:"CUSTOMIZE.TOOLBAR",277:"ADD.TOOL",278:"EDIT.OBJECT",279:"ON.DOUBLECLICK",280:"ON.ENTRY",281:"WORKBOOK.ADD",282:"WORKBOOK.MOVE",283:"WORKBOOK.COPY",284:"WORKBOOK.OPTIONS",285:"SAVE.WORKSPACE",288:"CHART.WIZARD",289:"DELETE.TOOL",290:"MOVE.TOOL",291:"WORKBOOK.SELECT",292:"WORKBOOK.ACTIVATE",293:"ASSIGN.TO.TOOL",295:"COPY.TOOL",296:"RESET.TOOL",297:"CONSTRAIN.NUMERIC",298:"PASTE.TOOL",302:"WORKBOOK.NEW",305:"SCENARIO.CELLS",306:"SCENARIO.DELETE",307:"SCENARIO.ADD",308:"SCENARIO.EDIT",309:"SCENARIO.SHOW",310:"SCENARIO.SHOW.NEXT",311:"SCENARIO.SUMMARY",312:"PIVOT.TABLE.WIZARD",313:"PIVOT.FIELD.PROPERTIES",314:"PIVOT.FIELD",315:"PIVOT.ITEM",316:"PIVOT.ADD.FIELDS",318:"OPTIONS.CALCULATION",319:"OPTIONS.EDIT",320:"OPTIONS.VIEW",321:"ADDIN.MANAGER",322:"MENU.EDITOR",323:"ATTACH.TOOLBARS",324:"VBAActivate",325:"OPTIONS.CHART",328:"VBA.INSERT.FILE",330:"VBA.PROCEDURE.DEFINITION",336:"ROUTING.SLIP",338:"ROUTE.DOCUMENT",339:"MAIL.LOGON",342:"INSERT.PICTURE",343:"EDIT.TOOL",344:"GALLERY.DOUGHNUT",350:"CHART.TREND",352:"PIVOT.ITEM.PROPERTIES",354:"WORKBOOK.INSERT",355:"OPTIONS.TRANSITION",356:"OPTIONS.GENERAL",370:"FILTER.ADVANCED",373:"MAIL.ADD.MAILER",374:"MAIL.DELETE.MAILER",375:"MAIL.REPLY",376:"MAIL.REPLY.ALL",377:"MAIL.FORWARD",378:"MAIL.NEXT.LETTER",379:"DATA.LABEL",380:"INSERT.TITLE",381:"FONT.PROPERTIES",382:"MACRO.OPTIONS",383:"WORKBOOK.HIDE",384:"WORKBOOK.UNHIDE",385:"WORKBOOK.DELETE",386:"WORKBOOK.NAME",388:"GALLERY.CUSTOM",390:"ADD.CHART.AUTOFORMAT",391:"DELETE.CHART.AUTOFORMAT",392:"CHART.ADD.DATA",393:"AUTO.OUTLINE",394:"TAB.ORDER",395:"SHOW.DIALOG",396:"SELECT.ALL",397:"UNGROUP.SHEETS",398:"SUBTOTAL.CREATE",399:"SUBTOTAL.REMOVE",400:"RENAME.OBJECT",412:"WORKBOOK.SCROLL",413:"WORKBOOK.NEXT",414:"WORKBOOK.PREV",415:"WORKBOOK.TAB.SPLIT",416:"FULL.SCREEN",417:"WORKBOOK.PROTECT",420:"SCROLLBAR.PROPERTIES",421:"PIVOT.SHOW.PAGES",422:"TEXT.TO.COLUMNS",423:"FORMAT.CHARTTYPE",424:"LINK.FORMAT",425:"TRACER.DISPLAY",430:"TRACER.NAVIGATE",431:"TRACER.CLEAR",432:"TRACER.ERROR",433:"PIVOT.FIELD.GROUP",434:"PIVOT.FIELD.UNGROUP",435:"CHECKBOX.PROPERTIES",436:"LABEL.PROPERTIES",437:"LISTBOX.PROPERTIES",438:"EDITBOX.PROPERTIES",439:"PIVOT.REFRESH",440:"LINK.COMBO",441:"OPEN.TEXT",442:"HIDE.DIALOG",443:"SET.DIALOG.FOCUS",444:"ENABLE.OBJECT",445:"PUSHBUTTON.PROPERTIES",446:"SET.DIALOG.DEFAULT",447:"FILTER",448:"FILTER.SHOW.ALL",449:"CLEAR.OUTLINE",450:"FUNCTION.WIZARD",451:"ADD.LIST.ITEM",452:"SET.LIST.ITEM",453:"REMOVE.LIST.ITEM",454:"SELECT.LIST.ITEM",455:"SET.CONTROL.VALUE",456:"SAVE.COPY.AS",458:"OPTIONS.LISTS.ADD",459:"OPTIONS.LISTS.DELETE",460:"SERIES.AXES",461:"SERIES.X",462:"SERIES.Y",463:"ERRORBAR.X",464:"ERRORBAR.Y",465:"FORMAT.CHART",466:"SERIES.ORDER",467:"MAIL.LOGOFF",468:"CLEAR.ROUTING.SLIP",469:"APP.ACTIVATE.MICROSOFT",470:"MAIL.EDIT.MAILER",471:"ON.SHEET",472:"STANDARD.WIDTH",473:"SCENARIO.MERGE",474:"SUMMARY.INFO",475:"FIND.FILE",476:"ACTIVE.CELL.FONT",477:"ENABLE.TIPWIZARD",478:"VBA.MAKE.ADDIN",480:"INSERTDATATABLE",481:"WORKGROUP.OPTIONS",482:"MAIL.SEND.MAILER",485:"AUTOCORRECT",489:"POST.DOCUMENT",491:"PICKLIST",493:"VIEW.SHOW",494:"VIEW.DEFINE",495:"VIEW.DELETE",509:"SHEET.BACKGROUND",510:"INSERT.MAP.OBJECT",511:"OPTIONS.MENONO",517:"MSOCHECKS",518:"NORMAL",519:"LAYOUT",520:"RM.PRINT.AREA",521:"CLEAR.PRINT.AREA",522:"ADD.PRINT.AREA",523:"MOVE.BRK",545:"HIDECURR.NOTE",546:"HIDEALL.NOTES",547:"DELETE.NOTE",548:"TRAVERSE.NOTES",549:"ACTIVATE.NOTES",620:"PROTECT.REVISIONS",621:"UNPROTECT.REVISIONS",647:"OPTIONS.ME",653:"WEB.PUBLISH",667:"NEWWEBQUERY",673:"PIVOT.TABLE.CHART",753:"OPTIONS.SAVE",755:"OPTIONS.SPELL",808:"HIDEALL.INKANNOTS"},hne={0:"COUNT",1:"IF",2:"ISNA",3:"ISERROR",4:"SUM",5:"AVERAGE",6:"MIN",7:"MAX",8:"ROW",9:"COLUMN",10:"NA",11:"NPV",12:"STDEV",13:"DOLLAR",14:"FIXED",15:"SIN",16:"COS",17:"TAN",18:"ATAN",19:"PI",20:"SQRT",21:"EXP",22:"LN",23:"LOG10",24:"ABS",25:"INT",26:"SIGN",27:"ROUND",28:"LOOKUP",29:"INDEX",30:"REPT",31:"MID",32:"LEN",33:"VALUE",34:"TRUE",35:"FALSE",36:"AND",37:"OR",38:"NOT",39:"MOD",40:"DCOUNT",41:"DSUM",42:"DAVERAGE",43:"DMIN",44:"DMAX",45:"DSTDEV",46:"VAR",47:"DVAR",48:"TEXT",49:"LINEST",50:"TREND",51:"LOGEST",52:"GROWTH",53:"GOTO",54:"HALT",55:"RETURN",56:"PV",57:"FV",58:"NPER",59:"PMT",60:"RATE",61:"MIRR",62:"IRR",63:"RAND",64:"MATCH",65:"DATE",66:"TIME",67:"DAY",68:"MONTH",69:"YEAR",70:"WEEKDAY",71:"HOUR",72:"MINUTE",73:"SECOND",74:"NOW",75:"AREAS",76:"ROWS",77:"COLUMNS",78:"OFFSET",79:"ABSREF",80:"RELREF",81:"ARGUMENT",82:"SEARCH",83:"TRANSPOSE",84:"ERROR",85:"STEP",86:"TYPE",87:"ECHO",88:"SET.NAME",89:"CALLER",90:"DEREF",91:"WINDOWS",92:"SERIES",93:"DOCUMENTS",94:"ACTIVE.CELL",95:"SELECTION",96:"RESULT",97:"ATAN2",98:"ASIN",99:"ACOS",100:"CHOOSE",101:"HLOOKUP",102:"VLOOKUP",103:"LINKS",104:"INPUT",105:"ISREF",106:"GET.FORMULA",107:"GET.NAME",108:"SET.VALUE",109:"LOG",110:"EXEC",111:"CHAR",112:"LOWER",113:"UPPER",114:"PROPER",115:"LEFT",116:"RIGHT",117:"EXACT",118:"TRIM",119:"REPLACE",120:"SUBSTITUTE",121:"CODE",122:"NAMES",123:"DIRECTORY",124:"FIND",125:"CELL",126:"ISERR",127:"ISTEXT",128:"ISNUMBER",129:"ISBLANK",130:"T",131:"N",132:"FOPEN",133:"FCLOSE",134:"FSIZE",135:"FREADLN",136:"FREAD",137:"FWRITELN",138:"FWRITE",139:"FPOS",140:"DATEVALUE",141:"TIMEVALUE",142:"SLN",143:"SYD",144:"DDB",145:"GET.DEF",146:"REFTEXT",147:"TEXTREF",148:"INDIRECT",149:"REGISTER",150:"CALL",151:"ADD.BAR",152:"ADD.MENU",153:"ADD.COMMAND",154:"ENABLE.COMMAND",155:"CHECK.COMMAND",156:"RENAME.COMMAND",157:"SHOW.BAR",158:"DELETE.MENU",159:"DELETE.COMMAND",160:"GET.CHART.ITEM",161:"DIALOG.BOX",162:"CLEAN",163:"MDETERM",164:"MINVERSE",165:"MMULT",166:"FILES",167:"IPMT",168:"PPMT",169:"COUNTA",170:"CANCEL.KEY",171:"FOR",172:"WHILE",173:"BREAK",174:"NEXT",175:"INITIATE",176:"REQUEST",177:"POKE",178:"EXECUTE",179:"TERMINATE",180:"RESTART",181:"HELP",182:"GET.BAR",183:"PRODUCT",184:"FACT",185:"GET.CELL",186:"GET.WORKSPACE",187:"GET.WINDOW",188:"GET.DOCUMENT",189:"DPRODUCT",190:"ISNONTEXT",191:"GET.NOTE",192:"NOTE",193:"STDEVP",194:"VARP",195:"DSTDEVP",196:"DVARP",197:"TRUNC",198:"ISLOGICAL",199:"DCOUNTA",200:"DELETE.BAR",201:"UNREGISTER",204:"USDOLLAR",205:"FINDB",206:"SEARCHB",207:"REPLACEB",208:"LEFTB",209:"RIGHTB",210:"MIDB",211:"LENB",212:"ROUNDUP",213:"ROUNDDOWN",214:"ASC",215:"DBCS",216:"RANK",219:"ADDRESS",220:"DAYS360",221:"TODAY",222:"VDB",223:"ELSE",224:"ELSE.IF",225:"END.IF",226:"FOR.CELL",227:"MEDIAN",228:"SUMPRODUCT",229:"SINH",230:"COSH",231:"TANH",232:"ASINH",233:"ACOSH",234:"ATANH",235:"DGET",236:"CREATE.OBJECT",237:"VOLATILE",238:"LAST.ERROR",239:"CUSTOM.UNDO",240:"CUSTOM.REPEAT",241:"FORMULA.CONVERT",242:"GET.LINK.INFO",243:"TEXT.BOX",244:"INFO",245:"GROUP",246:"GET.OBJECT",247:"DB",248:"PAUSE",251:"RESUME",252:"FREQUENCY",253:"ADD.TOOLBAR",254:"DELETE.TOOLBAR",255:"User",256:"RESET.TOOLBAR",257:"EVALUATE",258:"GET.TOOLBAR",259:"GET.TOOL",260:"SPELLING.CHECK",261:"ERROR.TYPE",262:"APP.TITLE",263:"WINDOW.TITLE",264:"SAVE.TOOLBAR",265:"ENABLE.TOOL",266:"PRESS.TOOL",267:"REGISTER.ID",268:"GET.WORKBOOK",269:"AVEDEV",270:"BETADIST",271:"GAMMALN",272:"BETAINV",273:"BINOMDIST",274:"CHIDIST",275:"CHIINV",276:"COMBIN",277:"CONFIDENCE",278:"CRITBINOM",279:"EVEN",280:"EXPONDIST",281:"FDIST",282:"FINV",283:"FISHER",284:"FISHERINV",285:"FLOOR",286:"GAMMADIST",287:"GAMMAINV",288:"CEILING",289:"HYPGEOMDIST",290:"LOGNORMDIST",291:"LOGINV",292:"NEGBINOMDIST",293:"NORMDIST",294:"NORMSDIST",295:"NORMINV",296:"NORMSINV",297:"STANDARDIZE",298:"ODD",299:"PERMUT",300:"POISSON",301:"TDIST",302:"WEIBULL",303:"SUMXMY2",304:"SUMX2MY2",305:"SUMX2PY2",306:"CHITEST",307:"CORREL",308:"COVAR",309:"FORECAST",310:"FTEST",311:"INTERCEPT",312:"PEARSON",313:"RSQ",314:"STEYX",315:"SLOPE",316:"TTEST",317:"PROB",318:"DEVSQ",319:"GEOMEAN",320:"HARMEAN",321:"SUMSQ",322:"KURT",323:"SKEW",324:"ZTEST",325:"LARGE",326:"SMALL",327:"QUARTILE",328:"PERCENTILE",329:"PERCENTRANK",330:"MODE",331:"TRIMMEAN",332:"TINV",334:"MOVIE.COMMAND",335:"GET.MOVIE",336:"CONCATENATE",337:"POWER",338:"PIVOT.ADD.DATA",339:"GET.PIVOT.TABLE",340:"GET.PIVOT.FIELD",341:"GET.PIVOT.ITEM",342:"RADIANS",343:"DEGREES",344:"SUBTOTAL",345:"SUMIF",346:"COUNTIF",347:"COUNTBLANK",348:"SCENARIO.GET",349:"OPTIONS.LISTS.GET",350:"ISPMT",351:"DATEDIF",352:"DATESTRING",353:"NUMBERSTRING",354:"ROMAN",355:"OPEN.DIALOG",356:"SAVE.DIALOG",357:"VIEW.GET",358:"GETPIVOTDATA",359:"HYPERLINK",360:"PHONETIC",361:"AVERAGEA",362:"MAXA",363:"MINA",364:"STDEVPA",365:"VARPA",366:"STDEVA",367:"VARA",368:"BAHTTEXT",369:"THAIDAYOFWEEK",370:"THAIDIGIT",371:"THAIMONTHOFYEAR",372:"THAINUMSOUND",373:"THAINUMSTRING",374:"THAISTRINGLENGTH",375:"ISTHAIDIGIT",376:"ROUNDBAHTDOWN",377:"ROUNDBAHTUP",378:"THAIYEAR",379:"RTD",380:"CUBEVALUE",381:"CUBEMEMBER",382:"CUBEMEMBERPROPERTY",383:"CUBERANKEDMEMBER",384:"HEX2BIN",385:"HEX2DEC",386:"HEX2OCT",387:"DEC2BIN",388:"DEC2HEX",389:"DEC2OCT",390:"OCT2BIN",391:"OCT2HEX",392:"OCT2DEC",393:"BIN2DEC",394:"BIN2OCT",395:"BIN2HEX",396:"IMSUB",397:"IMDIV",398:"IMPOWER",399:"IMABS",400:"IMSQRT",401:"IMLN",402:"IMLOG2",403:"IMLOG10",404:"IMSIN",405:"IMCOS",406:"IMEXP",407:"IMARGUMENT",408:"IMCONJUGATE",409:"IMAGINARY",410:"IMREAL",411:"COMPLEX",412:"IMSUM",413:"IMPRODUCT",414:"SERIESSUM",415:"FACTDOUBLE",416:"SQRTPI",417:"QUOTIENT",418:"DELTA",419:"GESTEP",420:"ISEVEN",421:"ISODD",422:"MROUND",423:"ERF",424:"ERFC",425:"BESSELJ",426:"BESSELK",427:"BESSELY",428:"BESSELI",429:"XIRR",430:"XNPV",431:"PRICEMAT",432:"YIELDMAT",433:"INTRATE",434:"RECEIVED",435:"DISC",436:"PRICEDISC",437:"YIELDDISC",438:"TBILLEQ",439:"TBILLPRICE",440:"TBILLYIELD",441:"PRICE",442:"YIELD",443:"DOLLARDE",444:"DOLLARFR",445:"NOMINAL",446:"EFFECT",447:"CUMPRINC",448:"CUMIPMT",449:"EDATE",450:"EOMONTH",451:"YEARFRAC",452:"COUPDAYBS",453:"COUPDAYS",454:"COUPDAYSNC",455:"COUPNCD",456:"COUPNUM",457:"COUPPCD",458:"DURATION",459:"MDURATION",460:"ODDLPRICE",461:"ODDLYIELD",462:"ODDFPRICE",463:"ODDFYIELD",464:"RANDBETWEEN",465:"WEEKNUM",466:"AMORDEGRC",467:"AMORLINC",468:"CONVERT",724:"SHEETJS",469:"ACCRINT",470:"ACCRINTM",471:"WORKDAY",472:"NETWORKDAYS",473:"GCD",474:"MULTINOMIAL",475:"LCM",476:"FVSCHEDULE",477:"CUBEKPIMEMBER",478:"CUBESET",479:"CUBESETCOUNT",480:"IFERROR",481:"COUNTIFS",482:"SUMIFS",483:"AVERAGEIF",484:"AVERAGEIFS"},aDe={2:1,3:1,10:0,15:1,16:1,17:1,18:1,19:0,20:1,21:1,22:1,23:1,24:1,25:1,26:1,27:2,30:2,31:3,32:1,33:1,34:0,35:0,38:1,39:2,40:3,41:3,42:3,43:3,44:3,45:3,47:3,48:2,53:1,61:3,63:0,65:3,66:3,67:1,68:1,69:1,70:1,71:1,72:1,73:1,74:0,75:1,76:1,77:1,79:2,80:2,83:1,85:0,86:1,89:0,90:1,94:0,95:0,97:2,98:1,99:1,101:3,102:3,105:1,106:1,108:2,111:1,112:1,113:1,114:1,117:2,118:1,119:4,121:1,126:1,127:1,128:1,129:1,130:1,131:1,133:1,134:1,135:1,136:2,137:2,138:2,140:1,141:1,142:3,143:4,144:4,161:1,162:1,163:1,164:1,165:2,172:1,175:2,176:2,177:3,178:2,179:1,184:1,186:1,189:3,190:1,195:3,196:3,197:1,198:1,199:3,201:1,207:4,210:3,211:1,212:2,213:2,214:1,215:1,225:0,229:1,230:1,231:1,232:1,233:1,234:1,235:3,244:1,247:4,252:2,257:1,261:1,271:1,273:4,274:2,275:2,276:2,277:3,278:3,279:1,280:3,281:3,282:3,283:1,284:1,285:2,286:4,287:3,288:2,289:4,290:3,291:3,292:3,293:4,294:1,295:3,296:1,297:3,298:1,299:2,300:3,301:3,302:4,303:2,304:2,305:2,306:2,307:2,308:2,309:3,310:2,311:2,312:2,313:2,314:2,315:2,316:4,325:2,326:2,327:2,328:2,331:2,332:2,337:2,342:1,343:1,346:2,347:1,350:4,351:3,352:1,353:2,360:1,368:1,369:1,370:1,371:1,372:1,373:1,374:1,375:1,376:1,377:1,378:1,382:3,385:1,392:1,393:1,396:2,397:2,398:2,399:1,400:1,401:1,402:1,403:1,404:1,405:1,406:1,407:1,408:1,409:1,410:1,414:4,415:1,416:1,417:2,420:1,421:1,422:2,424:1,425:2,426:2,427:2,428:2,430:3,438:3,439:3,440:3,443:2,444:2,445:2,446:2,447:6,448:6,449:2,450:2,464:2,468:3,476:2,479:1,480:2,65535:0};function PH(t){return t.slice(0,3)=="of:"&&(t=t.slice(3)),t.charCodeAt(0)==61&&(t=t.slice(1),t.charCodeAt(0)==61&&(t=t.slice(1))),t=t.replace(/COM\.MICROSOFT\./g,""),t=t.replace(/\[((?:\.[A-Z]+[0-9]+)(?::\.[A-Z]+[0-9]+)?)\]/g,function(e,r){return r.replace(/\./g,"")}),t=t.replace(/\[.(#[A-Z]*[?!])\]/g,"$1"),t.replace(/[;~]/g,",").replace(/\|/g,";")}function sDe(t){var e="of:="+t.replace(yD,"$1[.$2$3$4$5]").replace(/\]:\[/g,":");return e.replace(/;/g,"|").replace(/,/g,";")}function tB(t){var e=t.split(":"),r=e[0].split(".")[0];return[r,e[0].split(".")[1]+(e.length>1?":"+(e[1].split(".")[1]||e[1].split(".")[0]):"")]}function iDe(t){return t.replace(/\./,"!")}var ab={},Vx={},sb=typeof Map<"u";function ND(t,e,r){var n=0,a=t.length;if(r){if(sb?r.has(e):Object.prototype.hasOwnProperty.call(r,e)){for(var s=sb?r.get(e):r[e];n<s.length;++n)if(t[s[n]].t===e)return t.Count++,s[n]}}else for(;n<a;++n)if(t[n].t===e)return t.Count++,n;return t[a]={t:e},t.Count++,t.Unique++,r&&(sb?(r.has(e)||r.set(e,[]),r.get(e).push(a)):(Object.prototype.hasOwnProperty.call(r,e)||(r[e]=[]),r[e].push(a))),a}function k4(t,e){var r={min:t+1,max:t+1},n=-1;return e.MDW&&(hl=e.MDW),e.width!=null?r.customWidth=1:e.wpx!=null?n=c2(e.wpx):e.wch!=null&&(n=e.wch),n>-1?(r.width=yS(n),r.customWidth=1):e.width!=null&&(r.width=e.width),e.hidden&&(r.hidden=!0),e.level!=null&&(r.outlineLevel=r.level=e.level),r}function fp(t,e){if(t){var r=[.7,.7,.75,.75,.3,.3];e=="xlml"&&(r=[1,1,1,1,.5,.5]),t.left==null&&(t.left=r[0]),t.right==null&&(t.right=r[1]),t.top==null&&(t.top=r[2]),t.bottom==null&&(t.bottom=r[3]),t.header==null&&(t.header=r[4]),t.footer==null&&(t.footer=r[5])}}function im(t,e,r){var n=r.revssf[e.z!=null?e.z:"General"],a=60,s=t.length;if(n==null&&r.ssf){for(;a<392;++a)if(r.ssf[a]==null){IA(e.z,a),r.ssf[a]=e.z,r.revssf[e.z]=n=a;break}}for(a=0;a!=s;++a)if(t[a].numFmtId===n)return a;return t[s]={numFmtId:n,fontId:0,fillId:0,borderId:0,xfId:0,applyNumberFormat:1},s}function mne(t,e,r,n,a,s){try{n.cellNF&&(t.z=an[e])}catch(l){if(n.WTF)throw l}if(!(t.t==="z"&&!n.cellStyles)){if(t.t==="d"&&typeof t.v=="string"&&(t.v=as(t.v)),(!n||n.cellText!==!1)&&t.t!=="z")try{if(an[e]==null&&IA(nBe[e]||"General",e),t.t==="e")t.w=t.w||nh[t.v];else if(e===0)if(t.t==="n")(t.v|0)===t.v?t.w=t.v.toString(10):t.w=r2(t.v);else if(t.t==="d"){var i=Gi(t.v);(i|0)===i?t.w=i.toString(10):t.w=r2(i)}else{if(t.v===void 0)return"";t.w=kp(t.v,Vx)}else t.t==="d"?t.w=qu(e,Gi(t.v),Vx):t.w=qu(e,t.v,Vx)}catch(l){if(n.WTF)throw l}if(n.cellStyles&&r!=null)try{t.s=s.Fills[r],t.s.fgColor&&t.s.fgColor.theme&&!t.s.fgColor.rgb&&(t.s.fgColor.rgb=vS(a.themeElements.clrScheme[t.s.fgColor.theme].rgb,t.s.fgColor.tint||0),n.WTF&&(t.s.fgColor.raw_rgb=a.themeElements.clrScheme[t.s.fgColor.theme].rgb)),t.s.bgColor&&t.s.bgColor.theme&&(t.s.bgColor.rgb=vS(a.themeElements.clrScheme[t.s.bgColor.theme].rgb,t.s.bgColor.tint||0),n.WTF&&(t.s.bgColor.raw_rgb=a.themeElements.clrScheme[t.s.bgColor.theme].rgb))}catch(l){if(n.WTF&&s.Fills)throw l}}}function oDe(t,e,r){if(t&&t["!ref"]){var n=Xn(t["!ref"]);if(n.e.c<n.s.c||n.e.r<n.s.r)throw new Error("Bad range ("+r+"): "+t["!ref"])}}function lDe(t,e){var r=Xn(e);r.s.r<=r.e.r&&r.s.c<=r.e.c&&r.s.r>=0&&r.s.c>=0&&(t["!ref"]=vn(r))}var cDe=/<(?:\w:)?mergeCell ref="[A-Z0-9:]+"\s*[\/]?>/g,uDe=/<(?:\w+:)?sheetData[^>]*>([\s\S]*)<\/(?:\w+:)?sheetData>/,dDe=/<(?:\w:)?hyperlink [^>]*>/mg,fDe=/"(\w*:\w*)"/,ADe=/<(?:\w:)?col\b[^>]*[\/]?>/g,hDe=/<(?:\w:)?autoFilter[^>]*([\/]|>([\s\S]*)<\/(?:\w:)?autoFilter)>/g,mDe=/<(?:\w:)?pageMargins[^>]*\/>/g,pne=/<(?:\w:)?sheetPr\b(?:[^>a-z][^>]*)?\/>/,pDe=/<(?:\w:)?sheetPr[^>]*(?:[\/]|>([\s\S]*)<\/(?:\w:)?sheetPr)>/,gDe=/<(?:\w:)?sheetViews[^>]*(?:[\/]|>([\s\S]*)<\/(?:\w:)?sheetViews)>/;function xDe(t,e,r,n,a,s,i){if(!t)return t;n||(n={"!id":{}});var l=e.dense?[]:{},c={s:{r:2e6,c:2e6},e:{r:0,c:0}},u="",d="",f=t.match(uDe);f?(u=t.slice(0,f.index),d=t.slice(f.index+f[0].length)):u=d=t;var h=u.match(pne);h?CD(h[0],l,a,r):(h=u.match(pDe))&&yDe(h[0],h[1]||"",l,a,r);var A=(u.match(/<(?:\w*:)?dimension/)||{index:-1}).index;if(A>0){var m=u.slice(A,A+50).match(fDe);m&&lDe(l,m[1])}var p=u.match(gDe);p&&p[1]&&kDe(p[1],a);var g=[];if(e.cellStyles){var x=u.match(ADe);x&&IDe(g,x)}f&&DDe(f[1],l,e,c,s,i);var y=d.match(hDe);y&&(l["!autofilter"]=BDe(y[0]));var b=[],w=d.match(cDe);if(w)for(A=0;A!=w.length;++A)b[A]=Xn(w[A].slice(w[A].indexOf('"')+1));var j=d.match(dDe);j&&_De(l,j,n);var I=d.match(mDe);if(I&&(l["!margins"]=EDe(ln(I[0]))),!l["!ref"]&&c.e.c>=c.s.c&&c.e.r>=c.s.r&&(l["!ref"]=vn(c)),e.sheetRows>0&&l["!ref"]){var _=Xn(l["!ref"]);e.sheetRows<=+_.e.r&&(_.e.r=e.sheetRows-1,_.e.r>c.e.r&&(_.e.r=c.e.r),_.e.r<_.s.r&&(_.s.r=_.e.r),_.e.c>c.e.c&&(_.e.c=c.e.c),_.e.c<_.s.c&&(_.s.c=_.e.c),l["!fullref"]=l["!ref"],l["!ref"]=vn(_))}return g.length>0&&(l["!cols"]=g),b.length>0&&(l["!merges"]=b),l}function vDe(t){if(t.length===0)return"";for(var e='<mergeCells count="'+t.length+'">',r=0;r!=t.length;++r)e+='<mergeCell ref="'+vn(t[r])+'"/>';return e+"</mergeCells>"}function CD(t,e,r,n){var a=ln(t);r.Sheets[n]||(r.Sheets[n]={}),a.codeName&&(r.Sheets[n].CodeName=Wn(Ba(a.codeName)))}function yDe(t,e,r,n,a){CD(t.slice(0,t.indexOf(">")),r,n,a)}function bDe(t,e,r,n,a){var s=!1,i={},l=null;if(n.bookType!=="xlsx"&&e.vbaraw){var c=e.SheetNames[r];try{e.Workbook&&(c=e.Workbook.Sheets[r].CodeName||c)}catch{}s=!0,i.codeName=xf(Ca(c))}if(t&&t["!outline"]){var u={summaryBelow:1,summaryRight:1};t["!outline"].above&&(u.summaryBelow=0),t["!outline"].left&&(u.summaryRight=0),l=(l||"")+br("outlinePr",null,u)}!s&&!l||(a[a.length]=br("sheetPr",l,i))}var wDe=["objects","scenarios","selectLockedCells","selectUnlockedCells"],NDe=["formatColumns","formatRows","formatCells","insertColumns","insertRows","insertHyperlinks","deleteColumns","deleteRows","sort","autoFilter","pivotTables"];function CDe(t){var e={sheet:1};return wDe.forEach(function(r){t[r]!=null&&t[r]&&(e[r]="1")}),NDe.forEach(function(r){t[r]!=null&&!t[r]&&(e[r]="0")}),t.password&&(e.password=gD(t.password).toString(16).toUpperCase()),br("sheetProtection",null,e)}function _De(t,e,r){for(var n=Array.isArray(t),a=0;a!=e.length;++a){var s=ln(Ba(e[a]),!0);if(!s.ref)return;var i=((r||{})["!id"]||[])[s.id];i?(s.Target=i.Target,s.location&&(s.Target+="#"+Wn(s.location))):(s.Target="#"+Wn(s.location),i={Target:s.Target,TargetMode:"Internal"}),s.Rel=i,s.tooltip&&(s.Tooltip=s.tooltip,delete s.tooltip);for(var l=Xn(s.ref),c=l.s.r;c<=l.e.r;++c)for(var u=l.s.c;u<=l.e.c;++u){var d=sn({c:u,r:c});n?(t[c]||(t[c]=[]),t[c][u]||(t[c][u]={t:"z",v:void 0}),t[c][u].l=s):(t[d]||(t[d]={t:"z",v:void 0}),t[d].l=s)}}}function EDe(t){var e={};return["left","right","top","bottom","header","footer"].forEach(function(r){t[r]&&(e[r]=parseFloat(t[r]))}),e}function SDe(t){return fp(t),br("pageMargins",null,t)}function IDe(t,e){for(var r=!1,n=0;n!=e.length;++n){var a=ln(e[n],!0);a.hidden&&(a.hidden=es(a.hidden));var s=parseInt(a.min,10)-1,i=parseInt(a.max,10)-1;for(a.outlineLevel&&(a.level=+a.outlineLevel||0),delete a.min,delete a.max,a.width=+a.width,!r&&a.width&&(r=!0,xD(a.width)),G0(a);s<=i;)t[s++]=ss(a)}}function jDe(t,e){for(var r=["<cols>"],n,a=0;a!=e.length;++a)(n=e[a])&&(r[r.length]=br("col",null,k4(a,n)));return r[r.length]="</cols>",r.join("")}function BDe(t){var e={ref:(t.match(/ref="([^"]*)"/)||[])[1]};return e}function PDe(t,e,r,n){var a=typeof t.ref=="string"?t.ref:vn(t.ref);r.Workbook||(r.Workbook={Sheets:[]}),r.Workbook.Names||(r.Workbook.Names=[]);var s=r.Workbook.Names,i=mc(a);i.s.r==i.e.r&&(i.e.r=mc(e["!ref"]).e.r,a=vn(i));for(var l=0;l<s.length;++l){var c=s[l];if(c.Name=="_xlnm._FilterDatabase"&&c.Sheet==n){c.Ref="'"+r.SheetNames[n]+"'!"+a;break}}return l==s.length&&s.push({Name:"_xlnm._FilterDatabase",Sheet:n,Ref:"'"+r.SheetNames[n]+"'!"+a}),br("autoFilter",null,{ref:a})}var TDe=/<(?:\w:)?sheetView(?:[^>a-z][^>]*)?\/?>/;function kDe(t,e){e.Views||(e.Views=[{}]),(t.match(TDe)||[]).forEach(function(r,n){var a=ln(r);e.Views[n]||(e.Views[n]={}),+a.zoomScale&&(e.Views[n].zoom=+a.zoomScale),es(a.rightToLeft)&&(e.Views[n].RTL=!0)})}function FDe(t,e,r,n){var a={workbookViewId:"0"};return(((n||{}).Workbook||{}).Views||[])[0]&&(a.rightToLeft=n.Workbook.Views[0].RTL?"1":"0"),br("sheetViews",br("sheetView",null,a),{})}function ODe(t,e,r,n){if(t.c&&r["!comments"].push([e,t.c]),t.v===void 0&&typeof t.f!="string"||t.t==="z"&&!t.f)return"";var a="",s=t.t,i=t.v;if(t.t!=="z")switch(t.t){case"b":a=t.v?"1":"0";break;case"n":a=""+t.v;break;case"e":a=nh[t.v];break;case"d":n&&n.cellDates?a=as(t.v,-1).toISOString():(t=ss(t),t.t="n",a=""+(t.v=Gi(as(t.v)))),typeof t.z>"u"&&(t.z=an[14]);break;default:a=t.v;break}var l=Vo("v",Ca(a)),c={r:e},u=im(n.cellXfs,t,n);switch(u!==0&&(c.s=u),t.t){case"n":break;case"d":c.t="d";break;case"b":c.t="b";break;case"e":c.t="e";break;case"z":break;default:if(t.v==null){delete t.t;break}if(t.v.length>32767)throw new Error("Text length must not exceed 32767 characters");if(n&&n.bookSST){l=Vo("v",""+ND(n.Strings,t.v,n.revStrings)),c.t="s";break}c.t="str";break}if(t.t!=s&&(t.t=s,t.v=i),typeof t.f=="string"&&t.f){var d=t.F&&t.F.slice(0,e.length)==e?{t:"array",ref:t.F}:null;l=br("f",Ca(t.f),d)+(t.v!=null?l:"")}return t.l&&r["!links"].push([e,t.l]),t.D&&(c.cm=1),br("c",l,c)}var DDe=function(){var t=/<(?:\w+:)?c[ \/>]/,e=/<\/(?:\w+:)?row>/,r=/r=["']([^"']*)["']/,n=/<(?:\w+:)?is>([\S\s]*?)<\/(?:\w+:)?is>/,a=/ref=["']([^"']*)["']/,s=n2("v"),i=n2("f");return function(c,u,d,f,h,A){for(var m=0,p="",g=[],x=[],y=0,b=0,w=0,j="",I,_,E=0,S=0,k,P,T=0,F=0,Y=Array.isArray(A.CellXf),he,ue=[],fe=[],me=Array.isArray(u),ne=[],Pe={},Ie=!1,O=!!d.sheetStubs,H=c.split(e),R=0,M=H.length;R!=M;++R){p=H[R].trim();var K=p.length;if(K!==0){var W=0;e:for(m=0;m<K;++m)switch(p[m]){case">":if(p[m-1]!="/"){++m;break e}if(d&&d.cellStyles){if(_=ln(p.slice(W,m),!0),E=_.r!=null?parseInt(_.r,10):E+1,S=-1,d.sheetRows&&d.sheetRows<E)continue;Pe={},Ie=!1,_.ht&&(Ie=!0,Pe.hpt=parseFloat(_.ht),Pe.hpx=fv(Pe.hpt)),_.hidden=="1"&&(Ie=!0,Pe.hidden=!0),_.outlineLevel!=null&&(Ie=!0,Pe.level=+_.outlineLevel),Ie&&(ne[E-1]=Pe)}break;case"<":W=m;break}if(W>=m)break;if(_=ln(p.slice(W,m),!0),E=_.r!=null?parseInt(_.r,10):E+1,S=-1,!(d.sheetRows&&d.sheetRows<E)){f.s.r>E-1&&(f.s.r=E-1),f.e.r<E-1&&(f.e.r=E-1),d&&d.cellStyles&&(Pe={},Ie=!1,_.ht&&(Ie=!0,Pe.hpt=parseFloat(_.ht),Pe.hpx=fv(Pe.hpt)),_.hidden=="1"&&(Ie=!0,Pe.hidden=!0),_.outlineLevel!=null&&(Ie=!0,Pe.level=+_.outlineLevel),Ie&&(ne[E-1]=Pe)),g=p.slice(m).split(t);for(var D=0;D!=g.length&&g[D].trim().charAt(0)=="<";++D);for(g=g.slice(D),m=0;m!=g.length;++m)if(p=g[m].trim(),p.length!==0){if(x=p.match(r),y=m,b=0,w=0,p="<c "+(p.slice(0,1)=="<"?">":"")+p,x!=null&&x.length===2){for(y=0,j=x[1],b=0;b!=j.length&&!((w=j.charCodeAt(b)-64)<1||w>26);++b)y=26*y+w;--y,S=y}else++S;for(b=0;b!=p.length&&p.charCodeAt(b)!==62;++b);if(++b,_=ln(p.slice(0,b),!0),_.r||(_.r=sn({r:E-1,c:S})),j=p.slice(b),I={t:""},(x=j.match(s))!=null&&x[1]!==""&&(I.v=Wn(x[1])),d.cellFormula){if((x=j.match(i))!=null&&x[1]!==""){if(I.f=Wn(Ba(x[1])).replace(/\r\n/g,`
`),d.xlfn||(I.f=SH(I.f)),x[0].indexOf('t="array"')>-1)I.F=(j.match(a)||[])[1],I.F.indexOf(":")>-1&&ue.push([Xn(I.F),I.F]);else if(x[0].indexOf('t="shared"')>-1){P=ln(x[0]);var L=Wn(Ba(x[1]));d.xlfn||(L=SH(L)),fe[parseInt(P.si,10)]=[P,L,_.r]}}else(x=j.match(/<f[^>]*\/>/))&&(P=ln(x[0]),fe[P.si]&&(I.f=TOe(fe[P.si][1],fe[P.si][2],_.r)));var Z=Ps(_.r);for(b=0;b<ue.length;++b)Z.r>=ue[b][0].s.r&&Z.r<=ue[b][0].e.r&&Z.c>=ue[b][0].s.c&&Z.c<=ue[b][0].e.c&&(I.F=ue[b][1])}if(_.t==null&&I.v===void 0)if(I.f||I.F)I.v=0,I.t="n";else if(O)I.t="z";else continue;else I.t=_.t||"n";switch(f.s.c>S&&(f.s.c=S),f.e.c<S&&(f.e.c=S),I.t){case"n":if(I.v==""||I.v==null){if(!O)continue;I.t="z"}else I.v=parseFloat(I.v);break;case"s":if(typeof I.v>"u"){if(!O)continue;I.t="z"}else k=ab[parseInt(I.v,10)],I.v=k.t,I.r=k.r,d.cellHTML&&(I.h=k.h);break;case"str":I.t="s",I.v=I.v!=null?Ba(I.v):"",d.cellHTML&&(I.h=rD(I.v));break;case"inlineStr":x=j.match(n),I.t="s",x!=null&&(k=pD(x[1]))?(I.v=k.t,d.cellHTML&&(I.h=k.h)):I.v="";break;case"b":I.v=es(I.v);break;case"d":d.cellDates?I.v=as(I.v,1):(I.v=Gi(as(I.v,1)),I.t="n");break;case"e":(!d||d.cellText!==!1)&&(I.w=I.v),I.v=xre[I.v];break}if(T=F=0,he=null,Y&&_.s!==void 0&&(he=A.CellXf[_.s],he!=null&&(he.numFmtId!=null&&(T=he.numFmtId),d.cellStyles&&he.fillId!=null&&(F=he.fillId))),mne(I,T,F,d,h,A),d.cellDates&&Y&&I.t=="n"&&Qv(an[T])&&(I.t="d",I.v=j4(I.v)),_.cm&&d.xlmeta){var ge=(d.xlmeta.Cell||[])[+_.cm-1];ge&&ge.type=="XLDAPR"&&(I.D=!0)}if(me){var U=Ps(_.r);u[U.r]||(u[U.r]=[]),u[U.r][U.c]=I}else u[_.r]=I}}}}ne.length>0&&(u["!rows"]=ne)}}();function RDe(t,e,r,n){var a=[],s=[],i=Xn(t["!ref"]),l="",c,u="",d=[],f=0,h=0,A=t["!rows"],m=Array.isArray(t),p={r:u},g,x=-1;for(h=i.s.c;h<=i.e.c;++h)d[h]=Bs(h);for(f=i.s.r;f<=i.e.r;++f){for(s=[],u=di(f),h=i.s.c;h<=i.e.c;++h){c=d[h]+u;var y=m?(t[f]||[])[h]:t[c];y!==void 0&&(l=ODe(y,c,t,e))!=null&&s.push(l)}(s.length>0||A&&A[f])&&(p={r:u},A&&A[f]&&(g=A[f],g.hidden&&(p.hidden=1),x=-1,g.hpx?x=u2(g.hpx):g.hpt&&(x=g.hpt),x>-1&&(p.ht=x,p.customHeight=1),g.level&&(p.outlineLevel=g.level)),a[a.length]=br("row",s.join(""),p))}if(A)for(;f<A.length;++f)A&&A[f]&&(p={r:f+1},g=A[f],g.hidden&&(p.hidden=1),x=-1,g.hpx?x=u2(g.hpx):g.hpt&&(x=g.hpt),x>-1&&(p.ht=x,p.customHeight=1),g.level&&(p.outlineLevel=g.level),a[a.length]=br("row","",p));return a.join("")}function gne(t,e,r,n){var a=[Ai,br("worksheet",null,{xmlns:sg[0],"xmlns:r":Qi.r})],s=r.SheetNames[t],i=0,l="",c=r.Sheets[s];c==null&&(c={});var u=c["!ref"]||"A1",d=Xn(u);if(d.e.c>16383||d.e.r>1048575){if(e.WTF)throw new Error("Range "+u+" exceeds format limit A1:XFD1048576");d.e.c=Math.min(d.e.c,16383),d.e.r=Math.min(d.e.c,1048575),u=vn(d)}n||(n={}),c["!comments"]=[];var f=[];bDe(c,r,t,e,a),a[a.length]=br("dimension",null,{ref:u}),a[a.length]=FDe(c,e,t,r),e.sheetFormat&&(a[a.length]=br("sheetFormatPr",null,{defaultRowHeight:e.sheetFormat.defaultRowHeight||"16",baseColWidth:e.sheetFormat.baseColWidth||"10",outlineLevelRow:e.sheetFormat.outlineLevelRow||"7"})),c["!cols"]!=null&&c["!cols"].length>0&&(a[a.length]=jDe(c,c["!cols"])),a[i=a.length]="<sheetData/>",c["!links"]=[],c["!ref"]!=null&&(l=RDe(c,e),l.length>0&&(a[a.length]=l)),a.length>i+1&&(a[a.length]="</sheetData>",a[i]=a[i].replace("/>",">")),c["!protect"]&&(a[a.length]=CDe(c["!protect"])),c["!autofilter"]!=null&&(a[a.length]=PDe(c["!autofilter"],c,r,t)),c["!merges"]!=null&&c["!merges"].length>0&&(a[a.length]=vDe(c["!merges"]));var h=-1,A,m=-1;return c["!links"].length>0&&(a[a.length]="<hyperlinks>",c["!links"].forEach(function(p){p[1].Target&&(A={ref:p[0]},p[1].Target.charAt(0)!="#"&&(m=ya(n,-1,Ca(p[1].Target).replace(/#.*$/,""),Pn.HLINK),A["r:id"]="rId"+m),(h=p[1].Target.indexOf("#"))>-1&&(A.location=Ca(p[1].Target.slice(h+1))),p[1].Tooltip&&(A.tooltip=Ca(p[1].Tooltip)),a[a.length]=br("hyperlink",null,A))}),a[a.length]="</hyperlinks>"),delete c["!links"],c["!margins"]!=null&&(a[a.length]=SDe(c["!margins"])),(!e||e.ignoreEC||e.ignoreEC==null)&&(a[a.length]=Vo("ignoredErrors",br("ignoredError",null,{numberStoredAsText:1,sqref:u}))),f.length>0&&(m=ya(n,-1,"../drawings/drawing"+(t+1)+".xml",Pn.DRAW),a[a.length]=br("drawing",null,{"r:id":"rId"+m}),c["!drawing"]=f),c["!comments"].length>0&&(m=ya(n,-1,"../drawings/vmlDrawing"+(t+1)+".vml",Pn.VML),a[a.length]=br("legacyDrawing",null,{"r:id":"rId"+m}),c["!legacy"]=m),a.length>1&&(a[a.length]="</worksheet>",a[1]=a[1].replace("/>",">")),a.join("")}function MDe(t,e){var r={},n=t.l+e;r.r=t.read_shift(4),t.l+=4;var a=t.read_shift(2);t.l+=1;var s=t.read_shift(1);return t.l=n,s&7&&(r.level=s&7),s&16&&(r.hidden=!0),s&32&&(r.hpt=a/20),r}function LDe(t,e,r){var n=Yt(145),a=(r["!rows"]||[])[t]||{};n.write_shift(4,t),n.write_shift(4,0);var s=320;a.hpx?s=u2(a.hpx)*20:a.hpt&&(s=a.hpt*20),n.write_shift(2,s),n.write_shift(1,0);var i=0;a.level&&(i|=a.level),a.hidden&&(i|=16),(a.hpx||a.hpt)&&(i|=32),n.write_shift(1,i),n.write_shift(1,0);var l=0,c=n.l;n.l+=4;for(var u={r:t,c:0},d=0;d<16;++d)if(!(e.s.c>d+1<<10||e.e.c<d<<10)){for(var f=-1,h=-1,A=d<<10;A<d+1<<10;++A){u.c=A;var m=Array.isArray(r)?(r[u.r]||[])[u.c]:r[sn(u)];m&&(f<0&&(f=A),h=A)}f<0||(++l,n.write_shift(4,f),n.write_shift(4,h))}var p=n.l;return n.l=c,n.write_shift(4,l),n.l=p,n.length>n.l?n.slice(0,n.l):n}function UDe(t,e,r,n){var a=LDe(n,r,e);(a.length>17||(e["!rows"]||[])[n])&&ur(t,0,a)}var QDe=cg,VDe=$v;function HDe(){}function $De(t,e){var r={},n=t[t.l];return++t.l,r.above=!(n&64),r.left=!(n&128),t.l+=18,r.name=qBe(t),r}function KDe(t,e,r){r==null&&(r=Yt(84+4*t.length));var n=192;e&&(e.above&&(n&=-65),e.left&&(n&=-129)),r.write_shift(1,n);for(var a=1;a<3;++a)r.write_shift(1,0);return pS({auto:1},r),r.write_shift(-4,-1),r.write_shift(-4,-1),Are(t,r),r.slice(0,r.l)}function GDe(t){var e=Yu(t);return[e]}function qDe(t,e,r){return r==null&&(r=Yt(8)),ig(e,r)}function zDe(t){var e=og(t);return[e]}function WDe(t,e,r){return r==null&&(r=Yt(4)),lg(e,r)}function XDe(t){var e=Yu(t),r=t.read_shift(1);return[e,r,"b"]}function YDe(t,e,r){return r==null&&(r=Yt(9)),ig(e,r),r.write_shift(1,t.v?1:0),r}function JDe(t){var e=og(t),r=t.read_shift(1);return[e,r,"b"]}function ZDe(t,e,r){return r==null&&(r=Yt(5)),lg(e,r),r.write_shift(1,t.v?1:0),r}function eRe(t){var e=Yu(t),r=t.read_shift(1);return[e,r,"e"]}function tRe(t,e,r){return r==null&&(r=Yt(9)),ig(e,r),r.write_shift(1,t.v),r}function rRe(t){var e=og(t),r=t.read_shift(1);return[e,r,"e"]}function nRe(t,e,r){return r==null&&(r=Yt(8)),lg(e,r),r.write_shift(1,t.v),r.write_shift(2,0),r.write_shift(1,0),r}function aRe(t){var e=Yu(t),r=t.read_shift(4);return[e,r,"s"]}function sRe(t,e,r){return r==null&&(r=Yt(12)),ig(e,r),r.write_shift(4,e.v),r}function iRe(t){var e=og(t),r=t.read_shift(4);return[e,r,"s"]}function oRe(t,e,r){return r==null&&(r=Yt(8)),lg(e,r),r.write_shift(4,e.v),r}function lRe(t){var e=Yu(t),r=ml(t);return[e,r,"n"]}function cRe(t,e,r){return r==null&&(r=Yt(16)),ig(e,r),Op(t.v,r),r}function xne(t){var e=og(t),r=ml(t);return[e,r,"n"]}function uRe(t,e,r){return r==null&&(r=Yt(12)),lg(e,r),Op(t.v,r),r}function dRe(t){var e=Yu(t),r=dD(t);return[e,r,"n"]}function fRe(t,e,r){return r==null&&(r=Yt(12)),ig(e,r),hre(t.v,r),r}function ARe(t){var e=og(t),r=dD(t);return[e,r,"n"]}function hRe(t,e,r){return r==null&&(r=Yt(8)),lg(e,r),hre(t.v,r),r}function mRe(t){var e=Yu(t),r=lD(t);return[e,r,"is"]}function pRe(t){var e=Yu(t),r=gl(t);return[e,r,"str"]}function gRe(t,e,r){return r==null&&(r=Yt(12+4*t.v.length)),ig(e,r),ho(t.v,r),r.length>r.l?r.slice(0,r.l):r}function xRe(t){var e=og(t),r=gl(t);return[e,r,"str"]}function vRe(t,e,r){return r==null&&(r=Yt(8+4*t.v.length)),lg(e,r),ho(t.v,r),r.length>r.l?r.slice(0,r.l):r}function yRe(t,e,r){var n=t.l+e,a=Yu(t);a.r=r["!row"];var s=t.read_shift(1),i=[a,s,"b"];if(r.cellFormula){t.l+=2;var l=T4(t,n-t.l,r);i[3]=fl(l,null,a,r.supbooks,r)}else t.l=n;return i}function bRe(t,e,r){var n=t.l+e,a=Yu(t);a.r=r["!row"];var s=t.read_shift(1),i=[a,s,"e"];if(r.cellFormula){t.l+=2;var l=T4(t,n-t.l,r);i[3]=fl(l,null,a,r.supbooks,r)}else t.l=n;return i}function wRe(t,e,r){var n=t.l+e,a=Yu(t);a.r=r["!row"];var s=ml(t),i=[a,s,"n"];if(r.cellFormula){t.l+=2;var l=T4(t,n-t.l,r);i[3]=fl(l,null,a,r.supbooks,r)}else t.l=n;return i}function NRe(t,e,r){var n=t.l+e,a=Yu(t);a.r=r["!row"];var s=gl(t),i=[a,s,"str"];if(r.cellFormula){t.l+=2;var l=T4(t,n-t.l,r);i[3]=fl(l,null,a,r.supbooks,r)}else t.l=n;return i}var CRe=cg,_Re=$v;function ERe(t,e){return e==null&&(e=Yt(4)),e.write_shift(4,t),e}function SRe(t,e){var r=t.l+e,n=cg(t),a=cD(t),s=gl(t),i=gl(t),l=gl(t);t.l=r;var c={rfx:n,relId:a,loc:s,display:l};return i&&(c.Tooltip=i),c}function IRe(t,e){var r=Yt(50+4*(t[1].Target.length+(t[1].Tooltip||"").length));$v({s:Ps(t[0]),e:Ps(t[0])},r),uD("rId"+e,r);var n=t[1].Target.indexOf("#"),a=n==-1?"":t[1].Target.slice(n+1);return ho(a||"",r),ho(t[1].Tooltip||"",r),ho("",r),r.slice(0,r.l)}function jRe(){}function BRe(t,e,r){var n=t.l+e,a=mre(t),s=t.read_shift(1),i=[a];if(i[2]=s,r.cellFormula){var l=eDe(t,n-t.l,r);i[1]=l}else t.l=n;return i}function PRe(t,e,r){var n=t.l+e,a=cg(t),s=[a];if(r.cellFormula){var i=rDe(t,n-t.l,r);s[1]=i,t.l=n}else t.l=n;return s}function TRe(t,e,r){r==null&&(r=Yt(18));var n=k4(t,e);r.write_shift(-4,t),r.write_shift(-4,t),r.write_shift(4,(n.width||10)*256),r.write_shift(4,0);var a=0;return e.hidden&&(a|=1),typeof n.width=="number"&&(a|=2),e.level&&(a|=e.level<<8),r.write_shift(2,a),r}var vne=["left","right","top","bottom","header","footer"];function kRe(t){var e={};return vne.forEach(function(r){e[r]=ml(t)}),e}function FRe(t,e){return e==null&&(e=Yt(6*8)),fp(t),vne.forEach(function(r){Op(t[r],e)}),e}function ORe(t){var e=t.read_shift(2);return t.l+=28,{RTL:e&32}}function DRe(t,e,r){r==null&&(r=Yt(30));var n=924;return(((e||{}).Views||[])[0]||{}).RTL&&(n|=32),r.write_shift(2,n),r.write_shift(4,0),r.write_shift(4,0),r.write_shift(4,0),r.write_shift(1,0),r.write_shift(1,0),r.write_shift(2,0),r.write_shift(2,100),r.write_shift(2,0),r.write_shift(2,0),r.write_shift(2,0),r.write_shift(4,0),r}function RRe(t){var e=Yt(24);return e.write_shift(4,4),e.write_shift(4,1),$v(t,e),e}function MRe(t,e){return e==null&&(e=Yt(16*4+2)),e.write_shift(2,t.password?gD(t.password):0),e.write_shift(4,1),[["objects",!1],["scenarios",!1],["formatCells",!0],["formatColumns",!0],["formatRows",!0],["insertColumns",!0],["insertRows",!0],["insertHyperlinks",!0],["deleteColumns",!0],["deleteRows",!0],["selectLockedCells",!1],["sort",!0],["autoFilter",!0],["pivotTables",!0],["selectUnlockedCells",!1]].forEach(function(r){r[1]?e.write_shift(4,t[r[0]]!=null&&!t[r[0]]?1:0):e.write_shift(4,t[r[0]]!=null&&t[r[0]]?0:1)}),e}function LRe(){}function URe(){}function QRe(t,e,r,n,a,s,i){if(!t)return t;var l=e||{};n||(n={"!id":{}});var c=l.dense?[]:{},u,d={s:{r:2e6,c:2e6},e:{r:0,c:0}},f=!1,h=!1,A,m,p,g,x,y,b,w,j,I=[];l.biff=12,l["!row"]=0;var _=0,E=!1,S=[],k={},P=l.supbooks||a.supbooks||[[]];if(P.sharedf=k,P.arrayf=S,P.SheetNames=a.SheetNames||a.Sheets.map(function(me){return me.name}),!l.supbooks&&(l.supbooks=P,a.Names))for(var T=0;T<a.Names.length;++T)P[0][T+1]=a.Names[T];var F=[],Y=[],he=!1;d2[16]={n:"BrtShortReal",f:xne};var ue;if(rh(t,function(ne,Pe,Ie){if(!h)switch(Ie){case 148:u=ne;break;case 0:A=ne,l.sheetRows&&l.sheetRows<=A.r&&(h=!0),w=di(g=A.r),l["!row"]=A.r,(ne.hidden||ne.hpt||ne.level!=null)&&(ne.hpt&&(ne.hpx=fv(ne.hpt)),Y[ne.r]=ne);break;case 2:case 3:case 4:case 5:case 6:case 7:case 8:case 9:case 10:case 11:case 13:case 14:case 15:case 16:case 17:case 18:case 62:switch(m={t:ne[2]},ne[2]){case"n":m.v=ne[1];break;case"s":b=ab[ne[1]],m.v=b.t,m.r=b.r;break;case"b":m.v=!!ne[1];break;case"e":m.v=ne[1],l.cellText!==!1&&(m.w=nh[m.v]);break;case"str":m.t="s",m.v=ne[1];break;case"is":m.t="s",m.v=ne[1].t;break}if((p=i.CellXf[ne[0].iStyleRef])&&mne(m,p.numFmtId,null,l,s,i),x=ne[0].c==-1?x+1:ne[0].c,l.dense?(c[g]||(c[g]=[]),c[g][x]=m):c[Bs(x)+w]=m,l.cellFormula){for(E=!1,_=0;_<S.length;++_){var O=S[_];A.r>=O[0].s.r&&A.r<=O[0].e.r&&x>=O[0].s.c&&x<=O[0].e.c&&(m.F=vn(O[0]),E=!0)}!E&&ne.length>3&&(m.f=ne[3])}if(d.s.r>A.r&&(d.s.r=A.r),d.s.c>x&&(d.s.c=x),d.e.r<A.r&&(d.e.r=A.r),d.e.c<x&&(d.e.c=x),l.cellDates&&p&&m.t=="n"&&Qv(an[p.numFmtId])){var H=Wm(m.v);H&&(m.t="d",m.v=new Date(H.y,H.m-1,H.d,H.H,H.M,H.S,H.u))}ue&&(ue.type=="XLDAPR"&&(m.D=!0),ue=void 0);break;case 1:case 12:if(!l.sheetStubs||f)break;m={t:"z",v:void 0},x=ne[0].c==-1?x+1:ne[0].c,l.dense?(c[g]||(c[g]=[]),c[g][x]=m):c[Bs(x)+w]=m,d.s.r>A.r&&(d.s.r=A.r),d.s.c>x&&(d.s.c=x),d.e.r<A.r&&(d.e.r=A.r),d.e.c<x&&(d.e.c=x),ue&&(ue.type=="XLDAPR"&&(m.D=!0),ue=void 0);break;case 176:I.push(ne);break;case 49:ue=((l.xlmeta||{}).Cell||[])[ne-1];break;case 494:var R=n["!id"][ne.relId];for(R?(ne.Target=R.Target,ne.loc&&(ne.Target+="#"+ne.loc),ne.Rel=R):ne.relId==""&&(ne.Target="#"+ne.loc),g=ne.rfx.s.r;g<=ne.rfx.e.r;++g)for(x=ne.rfx.s.c;x<=ne.rfx.e.c;++x)l.dense?(c[g]||(c[g]=[]),c[g][x]||(c[g][x]={t:"z",v:void 0}),c[g][x].l=ne):(y=sn({c:x,r:g}),c[y]||(c[y]={t:"z",v:void 0}),c[y].l=ne);break;case 426:if(!l.cellFormula)break;S.push(ne),j=l.dense?c[g][x]:c[Bs(x)+w],j.f=fl(ne[1],d,{r:A.r,c:x},P,l),j.F=vn(ne[0]);break;case 427:if(!l.cellFormula)break;k[sn(ne[0].s)]=ne[1],j=l.dense?c[g][x]:c[Bs(x)+w],j.f=fl(ne[1],d,{r:A.r,c:x},P,l);break;case 60:if(!l.cellStyles)break;for(;ne.e>=ne.s;)F[ne.e--]={width:ne.w/256,hidden:!!(ne.flags&1),level:ne.level},he||(he=!0,xD(ne.w/256)),G0(F[ne.e+1]);break;case 161:c["!autofilter"]={ref:vn(ne)};break;case 476:c["!margins"]=ne;break;case 147:a.Sheets[r]||(a.Sheets[r]={}),ne.name&&(a.Sheets[r].CodeName=ne.name),(ne.above||ne.left)&&(c["!outline"]={above:ne.above,left:ne.left});break;case 137:a.Views||(a.Views=[{}]),a.Views[0]||(a.Views[0]={}),ne.RTL&&(a.Views[0].RTL=!0);break;case 485:break;case 64:case 1053:break;case 151:break;case 152:case 175:case 644:case 625:case 562:case 396:case 1112:case 1146:case 471:case 1050:case 649:case 1105:case 589:case 607:case 564:case 1055:case 168:case 174:case 1180:case 499:case 507:case 550:case 171:case 167:case 1177:case 169:case 1181:case 551:case 552:case 661:case 639:case 478:case 537:case 477:case 536:case 1103:case 680:case 1104:case 1024:case 663:case 535:case 678:case 504:case 1043:case 428:case 170:case 3072:case 50:case 2070:case 1045:break;case 35:f=!0;break;case 36:f=!1;break;case 37:f=!0;break;case 38:f=!1;break;default:if(!Pe.T){if(!f||l.WTF)throw new Error("Unexpected record 0x"+Ie.toString(16))}}},l),delete l.supbooks,delete l["!row"],!c["!ref"]&&(d.s.r<2e6||u&&(u.e.r>0||u.e.c>0||u.s.r>0||u.s.c>0))&&(c["!ref"]=vn(u||d)),l.sheetRows&&c["!ref"]){var fe=Xn(c["!ref"]);l.sheetRows<=+fe.e.r&&(fe.e.r=l.sheetRows-1,fe.e.r>d.e.r&&(fe.e.r=d.e.r),fe.e.r<fe.s.r&&(fe.s.r=fe.e.r),fe.e.c>d.e.c&&(fe.e.c=d.e.c),fe.e.c<fe.s.c&&(fe.s.c=fe.e.c),c["!fullref"]=c["!ref"],c["!ref"]=vn(fe))}return I.length>0&&(c["!merges"]=I),F.length>0&&(c["!cols"]=F),Y.length>0&&(c["!rows"]=Y),c}function VRe(t,e,r,n,a,s,i){if(e.v===void 0)return!1;var l="";switch(e.t){case"b":l=e.v?"1":"0";break;case"d":e=ss(e),e.z=e.z||an[14],e.v=Gi(as(e.v)),e.t="n";break;case"n":case"e":l=""+e.v;break;default:l=e.v;break}var c={r,c:n};switch(c.s=im(a.cellXfs,e,a),e.l&&s["!links"].push([sn(c),e.l]),e.c&&s["!comments"].push([sn(c),e.c]),e.t){case"s":case"str":return a.bookSST?(l=ND(a.Strings,e.v,a.revStrings),c.t="s",c.v=l,i?ur(t,18,oRe(e,c)):ur(t,7,sRe(e,c))):(c.t="str",i?ur(t,17,vRe(e,c)):ur(t,6,gRe(e,c))),!0;case"n":return e.v==(e.v|0)&&e.v>-1e3&&e.v<1e3?i?ur(t,13,hRe(e,c)):ur(t,2,fRe(e,c)):i?ur(t,16,uRe(e,c)):ur(t,5,cRe(e,c)),!0;case"b":return c.t="b",i?ur(t,15,ZDe(e,c)):ur(t,4,YDe(e,c)),!0;case"e":return c.t="e",i?ur(t,14,nRe(e,c)):ur(t,3,tRe(e,c)),!0}return i?ur(t,12,WDe(e,c)):ur(t,1,qDe(e,c)),!0}function HRe(t,e,r,n){var a=Xn(e["!ref"]||"A1"),s,i="",l=[];ur(t,145);var c=Array.isArray(e),u=a.e.r;e["!rows"]&&(u=Math.max(a.e.r,e["!rows"].length-1));for(var d=a.s.r;d<=u;++d){i=di(d),UDe(t,e,a,d);var f=!1;if(d<=a.e.r)for(var h=a.s.c;h<=a.e.c;++h){d===a.s.r&&(l[h]=Bs(h)),s=l[h]+i;var A=c?(e[d]||[])[h]:e[s];if(!A){f=!1;continue}f=VRe(t,A,d,h,n,e,f)}}ur(t,146)}function $Re(t,e){!e||!e["!merges"]||(ur(t,177,ERe(e["!merges"].length)),e["!merges"].forEach(function(r){ur(t,176,_Re(r))}),ur(t,178))}function KRe(t,e){!e||!e["!cols"]||(ur(t,390),e["!cols"].forEach(function(r,n){r&&ur(t,60,TRe(n,r))}),ur(t,391))}function GRe(t,e){!e||!e["!ref"]||(ur(t,648),ur(t,649,RRe(Xn(e["!ref"]))),ur(t,650))}function qRe(t,e,r){e["!links"].forEach(function(n){if(n[1].Target){var a=ya(r,-1,n[1].Target.replace(/#.*$/,""),Pn.HLINK);ur(t,494,IRe(n,a))}}),delete e["!links"]}function zRe(t,e,r,n){if(e["!comments"].length>0){var a=ya(n,-1,"../drawings/vmlDrawing"+(r+1)+".vml",Pn.VML);ur(t,551,uD("rId"+a)),e["!legacy"]=a}}function WRe(t,e,r,n){if(e["!autofilter"]){var a=e["!autofilter"],s=typeof a.ref=="string"?a.ref:vn(a.ref);r.Workbook||(r.Workbook={Sheets:[]}),r.Workbook.Names||(r.Workbook.Names=[]);var i=r.Workbook.Names,l=mc(s);l.s.r==l.e.r&&(l.e.r=mc(e["!ref"]).e.r,s=vn(l));for(var c=0;c<i.length;++c){var u=i[c];if(u.Name=="_xlnm._FilterDatabase"&&u.Sheet==n){u.Ref="'"+r.SheetNames[n]+"'!"+s;break}}c==i.length&&i.push({Name:"_xlnm._FilterDatabase",Sheet:n,Ref:"'"+r.SheetNames[n]+"'!"+s}),ur(t,161,$v(Xn(s))),ur(t,162)}}function XRe(t,e,r){ur(t,133),ur(t,137,DRe(e,r)),ur(t,138),ur(t,134)}function YRe(t,e){e["!protect"]&&ur(t,535,MRe(e["!protect"]))}function JRe(t,e,r,n){var a=hc(),s=r.SheetNames[t],i=r.Sheets[s]||{},l=s;try{r&&r.Workbook&&(l=r.Workbook.Sheets[t].CodeName||l)}catch{}var c=Xn(i["!ref"]||"A1");if(c.e.c>16383||c.e.r>1048575){if(e.WTF)throw new Error("Range "+(i["!ref"]||"A1")+" exceeds format limit A1:XFD1048576");c.e.c=Math.min(c.e.c,16383),c.e.r=Math.min(c.e.c,1048575)}return i["!links"]=[],i["!comments"]=[],ur(a,129),(r.vbaraw||i["!outline"])&&ur(a,147,KDe(l,i["!outline"])),ur(a,148,VDe(c)),XRe(a,i,r.Workbook),KRe(a,i),HRe(a,i,t,e),YRe(a,i),WRe(a,i,r,t),$Re(a,i),qRe(a,i,n),i["!margins"]&&ur(a,476,FRe(i["!margins"])),(!e||e.ignoreEC||e.ignoreEC==null)&&GRe(a,i),zRe(a,i,t,n),ur(a,130),a.end()}function ZRe(t){var e=[],r=t.match(/^<c:numCache>/),n;(t.match(/<c:pt idx="(\d*)">(.*?)<\/c:pt>/mg)||[]).forEach(function(s){var i=s.match(/<c:pt idx="(\d*?)"><c:v>(.*)<\/c:v><\/c:pt>/);i&&(e[+i[1]]=r?+i[2]:i[2])});var a=Wn((t.match(/<c:formatCode>([\s\S]*?)<\/c:formatCode>/)||["","General"])[1]);return(t.match(/<c:f>(.*?)<\/c:f>/mg)||[]).forEach(function(s){n=s.replace(/<.*?>/g,"")}),[e,a,n]}function e8e(t,e,r,n,a,s){var i=s||{"!type":"chart"};if(!t)return s;var l=0,c=0,u="A",d={s:{r:2e6,c:2e6},e:{r:0,c:0}};return(t.match(/<c:numCache>[\s\S]*?<\/c:numCache>/gm)||[]).forEach(function(f){var h=ZRe(f);d.s.r=d.s.c=0,d.e.c=l,u=Bs(l),h[0].forEach(function(A,m){i[u+di(m)]={t:"n",v:A,z:h[1]},c=m}),d.e.r<c&&(d.e.r=c),++l}),l>0&&(i["!ref"]=vn(d)),i}function t8e(t,e,r,n,a){if(!t)return t;n||(n={"!id":{}});var s={"!type":"chart","!drawel":null,"!rel":""},i,l=t.match(pne);return l&&CD(l[0],s,a,r),(i=t.match(/drawing r:id="(.*?)"/))&&(s["!rel"]=i[1]),n["!id"][s["!rel"]]&&(s["!drawel"]=n["!id"][s["!rel"]]),s}function r8e(t,e){t.l+=10;var r=gl(t);return{name:r}}function n8e(t,e,r,n,a){if(!t)return t;n||(n={"!id":{}});var s={"!type":"chart","!drawel":null,"!rel":""},i=!1;return rh(t,function(c,u,d){switch(d){case 550:s["!rel"]=c;break;case 651:a.Sheets[r]||(a.Sheets[r]={}),c.name&&(a.Sheets[r].CodeName=c.name);break;case 562:case 652:case 669:case 679:case 551:case 552:case 476:case 3072:break;case 35:i=!0;break;case 36:i=!1;break;case 37:break;case 38:break;default:if(!(u.T>0)){if(!(u.T<0)){if(!i||e.WTF)throw new Error("Unexpected record 0x"+d.toString(16))}}}},e),n["!id"][s["!rel"]]&&(s["!drawel"]=n["!id"][s["!rel"]]),s}var _D=[["allowRefreshQuery",!1,"bool"],["autoCompressPictures",!0,"bool"],["backupFile",!1,"bool"],["checkCompatibility",!1,"bool"],["CodeName",""],["date1904",!1,"bool"],["defaultThemeVersion",0,"int"],["filterPrivacy",!1,"bool"],["hidePivotFieldList",!1,"bool"],["promptedSolutions",!1,"bool"],["publishItems",!1,"bool"],["refreshAllConnections",!1,"bool"],["saveExternalLinkValues",!0,"bool"],["showBorderUnselectedTables",!0,"bool"],["showInkAnnotation",!0,"bool"],["showObjects","all"],["showPivotChartFilter",!1,"bool"],["updateLinks","userSet"]],a8e=[["activeTab",0,"int"],["autoFilterDateGrouping",!0,"bool"],["firstSheet",0,"int"],["minimized",!1,"bool"],["showHorizontalScroll",!0,"bool"],["showSheetTabs",!0,"bool"],["showVerticalScroll",!0,"bool"],["tabRatio",600,"int"],["visibility","visible"]],s8e=[],i8e=[["calcCompleted","true"],["calcMode","auto"],["calcOnSave","true"],["concurrentCalc","true"],["fullCalcOnLoad","false"],["fullPrecision","true"],["iterate","false"],["iterateCount","100"],["iterateDelta","0.001"],["refMode","A1"]];function TH(t,e){for(var r=0;r!=t.length;++r)for(var n=t[r],a=0;a!=e.length;++a){var s=e[a];if(n[s[0]]==null)n[s[0]]=s[1];else switch(s[2]){case"bool":typeof n[s[0]]=="string"&&(n[s[0]]=es(n[s[0]]));break;case"int":typeof n[s[0]]=="string"&&(n[s[0]]=parseInt(n[s[0]],10));break}}}function kH(t,e){for(var r=0;r!=e.length;++r){var n=e[r];if(t[n[0]]==null)t[n[0]]=n[1];else switch(n[2]){case"bool":typeof t[n[0]]=="string"&&(t[n[0]]=es(t[n[0]]));break;case"int":typeof t[n[0]]=="string"&&(t[n[0]]=parseInt(t[n[0]],10));break}}}function yne(t){kH(t.WBProps,_D),kH(t.CalcPr,i8e),TH(t.WBView,a8e),TH(t.Sheets,s8e),Vx.date1904=es(t.WBProps.date1904)}function o8e(t){return!t.Workbook||!t.Workbook.WBProps?"false":es(t.Workbook.WBProps.date1904)?"true":"false"}var l8e="][*?/\\".split("");function bne(t,e){if(t.length>31)throw new Error("Sheet names cannot exceed 31 chars");var r=!0;return l8e.forEach(function(n){if(t.indexOf(n)!=-1)throw new Error("Sheet name cannot contain : \\ / ? * [ ]")}),r}function c8e(t,e,r){t.forEach(function(n,a){bne(n);for(var s=0;s<a;++s)if(n==t[s])throw new Error("Duplicate Sheet Name: "+n);if(r){var i=e&&e[a]&&e[a].CodeName||n;if(i.charCodeAt(0)==95&&i.length>22)throw new Error("Bad Code Name: Worksheet"+i)}})}function u8e(t){if(!t||!t.SheetNames||!t.Sheets)throw new Error("Invalid Workbook");if(!t.SheetNames.length)throw new Error("Workbook is empty");var e=t.Workbook&&t.Workbook.Sheets||[];c8e(t.SheetNames,e,!!t.vbaraw);for(var r=0;r<t.SheetNames.length;++r)oDe(t.Sheets[t.SheetNames[r]],t.SheetNames[r],r)}var d8e=/<\w+:workbook/;function f8e(t,e){if(!t)throw new Error("Could not find file");var r={AppVersion:{},WBProps:{},WBView:[],Sheets:[],CalcPr:{},Names:[],xmlns:""},n=!1,a="xmlns",s={},i=0;if(t.replace(wl,function(c,u){var d=ln(c);switch(Df(d[0])){case"<?xml":break;case"<workbook":c.match(d8e)&&(a="xmlns"+c.match(/<(\w+):/)[1]),r.xmlns=d[a];break;case"</workbook>":break;case"<fileVersion":delete d[0],r.AppVersion=d;break;case"<fileVersion/>":case"</fileVersion>":break;case"<fileSharing":break;case"<fileSharing/>":break;case"<workbookPr":case"<workbookPr/>":_D.forEach(function(f){if(d[f[0]]!=null)switch(f[2]){case"bool":r.WBProps[f[0]]=es(d[f[0]]);break;case"int":r.WBProps[f[0]]=parseInt(d[f[0]],10);break;default:r.WBProps[f[0]]=d[f[0]]}}),d.codeName&&(r.WBProps.CodeName=Ba(d.codeName));break;case"</workbookPr>":break;case"<workbookProtection":break;case"<workbookProtection/>":break;case"<bookViews":case"<bookViews>":case"</bookViews>":break;case"<workbookView":case"<workbookView/>":delete d[0],r.WBView.push(d);break;case"</workbookView>":break;case"<sheets":case"<sheets>":case"</sheets>":break;case"<sheet":switch(d.state){case"hidden":d.Hidden=1;break;case"veryHidden":d.Hidden=2;break;default:d.Hidden=0}delete d.state,d.name=Wn(Ba(d.name)),delete d[0],r.Sheets.push(d);break;case"</sheet>":break;case"<functionGroups":case"<functionGroups/>":break;case"<functionGroup":break;case"<externalReferences":case"</externalReferences>":case"<externalReferences>":break;case"<externalReference":break;case"<definedNames/>":break;case"<definedNames>":case"<definedNames":n=!0;break;case"</definedNames>":n=!1;break;case"<definedName":s={},s.Name=Ba(d.name),d.comment&&(s.Comment=d.comment),d.localSheetId&&(s.Sheet=+d.localSheetId),es(d.hidden||"0")&&(s.Hidden=!0),i=u+c.length;break;case"</definedName>":s.Ref=Wn(Ba(t.slice(i,u))),r.Names.push(s);break;case"<definedName/>":break;case"<calcPr":delete d[0],r.CalcPr=d;break;case"<calcPr/>":delete d[0],r.CalcPr=d;break;case"</calcPr>":break;case"<oleSize":break;case"<customWorkbookViews>":case"</customWorkbookViews>":case"<customWorkbookViews":break;case"<customWorkbookView":case"</customWorkbookView>":break;case"<pivotCaches>":case"</pivotCaches>":case"<pivotCaches":break;case"<pivotCache":break;case"<smartTagPr":case"<smartTagPr/>":break;case"<smartTagTypes":case"<smartTagTypes>":case"</smartTagTypes>":break;case"<smartTagType":break;case"<webPublishing":case"<webPublishing/>":break;case"<fileRecoveryPr":case"<fileRecoveryPr/>":break;case"<webPublishObjects>":case"<webPublishObjects":case"</webPublishObjects>":break;case"<webPublishObject":break;case"<extLst":case"<extLst>":case"</extLst>":case"<extLst/>":break;case"<ext":n=!0;break;case"</ext>":n=!1;break;case"<ArchID":break;case"<AlternateContent":case"<AlternateContent>":n=!0;break;case"</AlternateContent>":n=!1;break;case"<revisionPtr":break;default:if(!n&&e.WTF)throw new Error("unrecognized "+d[0]+" in workbook")}return c}),sg.indexOf(r.xmlns)===-1)throw new Error("Unknown Namespace: "+r.xmlns);return yne(r),r}function wne(t){var e=[Ai];e[e.length]=br("workbook",null,{xmlns:sg[0],"xmlns:r":Qi.r});var r=t.Workbook&&(t.Workbook.Names||[]).length>0,n={codeName:"ThisWorkbook"};t.Workbook&&t.Workbook.WBProps&&(_D.forEach(function(l){t.Workbook.WBProps[l[0]]!=null&&t.Workbook.WBProps[l[0]]!=l[1]&&(n[l[0]]=t.Workbook.WBProps[l[0]])}),t.Workbook.WBProps.CodeName&&(n.codeName=t.Workbook.WBProps.CodeName,delete n.CodeName)),e[e.length]=br("workbookPr",null,n);var a=t.Workbook&&t.Workbook.Sheets||[],s=0;if(a&&a[0]&&a[0].Hidden){for(e[e.length]="<bookViews>",s=0;s!=t.SheetNames.length&&!(!a[s]||!a[s].Hidden);++s);s==t.SheetNames.length&&(s=0),e[e.length]='<workbookView firstSheet="'+s+'" activeTab="'+s+'"/>',e[e.length]="</bookViews>"}for(e[e.length]="<sheets>",s=0;s!=t.SheetNames.length;++s){var i={name:Ca(t.SheetNames[s].slice(0,31))};if(i.sheetId=""+(s+1),i["r:id"]="rId"+(s+1),a[s])switch(a[s].Hidden){case 1:i.state="hidden";break;case 2:i.state="veryHidden";break}e[e.length]=br("sheet",null,i)}return e[e.length]="</sheets>",r&&(e[e.length]="<definedNames>",t.Workbook&&t.Workbook.Names&&t.Workbook.Names.forEach(function(l){var c={name:l.Name};l.Comment&&(c.comment=l.Comment),l.Sheet!=null&&(c.localSheetId=""+l.Sheet),l.Hidden&&(c.hidden="1"),l.Ref&&(e[e.length]=br("definedName",Ca(l.Ref),c))}),e[e.length]="</definedNames>"),e.length>2&&(e[e.length]="</workbook>",e[1]=e[1].replace("/>",">")),e.join("")}function A8e(t,e){var r={};return r.Hidden=t.read_shift(4),r.iTabID=t.read_shift(4),r.strRelID=ik(t),r.name=gl(t),r}function h8e(t,e){return e||(e=Yt(127)),e.write_shift(4,t.Hidden),e.write_shift(4,t.iTabID),uD(t.strRelID,e),ho(t.name.slice(0,31),e),e.length>e.l?e.slice(0,e.l):e}function m8e(t,e){var r={},n=t.read_shift(4);r.defaultThemeVersion=t.read_shift(4);var a=e>8?gl(t):"";return a.length>0&&(r.CodeName=a),r.autoCompressPictures=!!(n&65536),r.backupFile=!!(n&64),r.checkCompatibility=!!(n&4096),r.date1904=!!(n&1),r.filterPrivacy=!!(n&8),r.hidePivotFieldList=!!(n&1024),r.promptedSolutions=!!(n&16),r.publishItems=!!(n&2048),r.refreshAllConnections=!!(n&262144),r.saveExternalLinkValues=!!(n&128),r.showBorderUnselectedTables=!!(n&4),r.showInkAnnotation=!!(n&32),r.showObjects=["all","placeholders","none"][n>>13&3],r.showPivotChartFilter=!!(n&32768),r.updateLinks=["userSet","never","always"][n>>8&3],r}function p8e(t,e){e||(e=Yt(72));var r=0;return t&&t.filterPrivacy&&(r|=8),e.write_shift(4,r),e.write_shift(4,0),Are(t&&t.CodeName||"ThisWorkbook",e),e.slice(0,e.l)}function g8e(t,e){var r={};return t.read_shift(4),r.ArchID=t.read_shift(4),t.l+=e-8,r}function x8e(t,e,r){var n=t.l+e;t.l+=4,t.l+=1;var a=t.read_shift(4),s=zBe(t),i=tDe(t,0,r),l=cD(t);t.l=n;var c={Name:s,Ptg:i};return a<268435455&&(c.Sheet=a),l&&(c.Comment=l),c}function v8e(t,e){var r={AppVersion:{},WBProps:{},WBView:[],Sheets:[],CalcPr:{},xmlns:""},n=[],a=!1;e||(e={}),e.biff=12;var s=[],i=[[]];return i.SheetNames=[],i.XTI=[],d2[16]={n:"BrtFRTArchID$",f:g8e},rh(t,function(c,u,d){switch(d){case 156:i.SheetNames.push(c.name),r.Sheets.push(c);break;case 153:r.WBProps=c;break;case 39:c.Sheet!=null&&(e.SID=c.Sheet),c.Ref=fl(c.Ptg,null,null,i,e),delete e.SID,delete c.Ptg,s.push(c);break;case 1036:break;case 357:case 358:case 355:case 667:i[0].length?i.push([d,c]):i[0]=[d,c],i[i.length-1].XTI=[];break;case 362:i.length===0&&(i[0]=[],i[0].XTI=[]),i[i.length-1].XTI=i[i.length-1].XTI.concat(c),i.XTI=i.XTI.concat(c);break;case 361:break;case 2071:case 158:case 143:case 664:case 353:break;case 3072:case 3073:case 534:case 677:case 157:case 610:case 2050:case 155:case 548:case 676:case 128:case 665:case 2128:case 2125:case 549:case 2053:case 596:case 2076:case 2075:case 2082:case 397:case 154:case 1117:case 553:case 2091:break;case 35:n.push(d),a=!0;break;case 36:n.pop(),a=!1;break;case 37:n.push(d),a=!0;break;case 38:n.pop(),a=!1;break;case 16:break;default:if(!u.T){if(!a||e.WTF&&n[n.length-1]!=37&&n[n.length-1]!=35)throw new Error("Unexpected record 0x"+d.toString(16))}}},e),yne(r),r.Names=s,r.supbooks=i,r}function y8e(t,e){ur(t,143);for(var r=0;r!=e.SheetNames.length;++r){var n=e.Workbook&&e.Workbook.Sheets&&e.Workbook.Sheets[r]&&e.Workbook.Sheets[r].Hidden||0,a={Hidden:n,iTabID:r+1,strRelID:"rId"+(r+1),name:e.SheetNames[r]};ur(t,156,h8e(a))}ur(t,144)}function b8e(t,e){e||(e=Yt(127));for(var r=0;r!=4;++r)e.write_shift(4,0);return ho("SheetJS",e),ho(cS.version,e),ho(cS.version,e),ho("7262",e),e.length>e.l?e.slice(0,e.l):e}function w8e(t,e){e||(e=Yt(29)),e.write_shift(-4,0),e.write_shift(-4,460),e.write_shift(4,28800),e.write_shift(4,17600),e.write_shift(4,500),e.write_shift(4,t),e.write_shift(4,t);var r=120;return e.write_shift(1,r),e.length>e.l?e.slice(0,e.l):e}function N8e(t,e){if(!(!e.Workbook||!e.Workbook.Sheets)){for(var r=e.Workbook.Sheets,n=0,a=-1,s=-1;n<r.length;++n)!r[n]||!r[n].Hidden&&a==-1?a=n:r[n].Hidden==1&&s==-1&&(s=n);s>a||(ur(t,135),ur(t,158,w8e(a)),ur(t,136))}}function C8e(t,e){var r=hc();return ur(r,131),ur(r,128,b8e()),ur(r,153,p8e(t.Workbook&&t.Workbook.WBProps||null)),N8e(r,t),y8e(r,t),ur(r,132),r.end()}function _8e(t,e,r){return e.slice(-4)===".bin"?v8e(t,r):f8e(t,r)}function E8e(t,e,r,n,a,s,i,l){return e.slice(-4)===".bin"?QRe(t,n,r,a,s,i,l):xDe(t,n,r,a,s,i,l)}function S8e(t,e,r,n,a,s,i,l){return e.slice(-4)===".bin"?n8e(t,n,r,a,s):t8e(t,n,r,a,s)}function I8e(t,e,r,n,a,s,i,l){return e.slice(-4)===".bin"?BOe():POe()}function j8e(t,e,r,n,a,s,i,l){return e.slice(-4)===".bin"?IOe():jOe()}function B8e(t,e,r,n){return e.slice(-4)===".bin"?_Fe(t,r,n):AFe(t,r,n)}function P8e(t,e,r){return rne(t,r)}function T8e(t,e,r){return e.slice(-4)===".bin"?Tke(t,r):jke(t,r)}function k8e(t,e,r){return e.slice(-4)===".bin"?NOe(t,r):hOe(t,r)}function F8e(t,e,r){return e.slice(-4)===".bin"?dOe(t):cOe(t)}function O8e(t,e,r,n){return r.slice(-4)===".bin"?fOe(t,e,r,n):void 0}function D8e(t,e,r){return e.slice(-4)===".bin"?iOe(t,e,r):lOe(t,e,r)}function R8e(t,e,r){return(e.slice(-4)===".bin"?C8e:wne)(t)}function M8e(t,e,r,n,a){return(e.slice(-4)===".bin"?JRe:gne)(t,r,n,a)}function L8e(t,e,r){return(e.slice(-4)===".bin"?OFe:ene)(t,r)}function U8e(t,e,r){return(e.slice(-4)===".bin"?Oke:Gre)(t,r)}function Q8e(t,e,r){return(e.slice(-4)===".bin"?COe:sne)(t)}function V8e(t){return(t.slice(-4)===".bin"?oOe:nne)()}var Nne=/([\w:]+)=((?:")([^"]*)(?:")|(?:')([^']*)(?:'))/g,Cne=/([\w:]+)=((?:")(?:[^"]*)(?:")|(?:')(?:[^']*)(?:'))/;function dd(t,e){var r=t.split(/\s+/),n=[];if(n[0]=r[0],r.length===1)return n;var a=t.match(Nne),s,i,l,c;if(a)for(c=0;c!=a.length;++c)s=a[c].match(Cne),(i=s[1].indexOf(":"))===-1?n[s[1]]=s[2].slice(1,s[2].length-1):(s[1].slice(0,6)==="xmlns:"?l="xmlns"+s[1].slice(6):l=s[1].slice(i+1),n[l]=s[2].slice(1,s[2].length-1));return n}function H8e(t){var e=t.split(/\s+/),r={};if(e.length===1)return r;var n=t.match(Nne),a,s,i,l;if(n)for(l=0;l!=n.length;++l)a=n[l].match(Cne),(s=a[1].indexOf(":"))===-1?r[a[1]]=a[2].slice(1,a[2].length-1):(a[1].slice(0,6)==="xmlns:"?i="xmlns"+a[1].slice(6):i=a[1].slice(s+1),r[i]=a[2].slice(1,a[2].length-1));return r}var ib;function $8e(t,e){var r=ib[t]||Wn(t);return r==="General"?kp(e):qu(r,e)}function K8e(t,e,r,n){var a=n;switch((r[0].match(/dt:dt="([\w.]+)"/)||["",""])[1]){case"boolean":a=es(n);break;case"i2":case"int":a=parseInt(n,10);break;case"r4":case"float":a=parseFloat(n);break;case"date":case"dateTime.tz":a=as(n);break;case"i8":case"string":case"fixed":case"uuid":case"bin.base64":break;default:throw new Error("bad custprop:"+r[0])}t[Wn(e)]=a}function G8e(t,e,r){if(t.t!=="z"){if(!r||r.cellText!==!1)try{t.t==="e"?t.w=t.w||nh[t.v]:e==="General"?t.t==="n"?(t.v|0)===t.v?t.w=t.v.toString(10):t.w=r2(t.v):t.w=kp(t.v):t.w=$8e(e||"General",t.v)}catch(s){if(r.WTF)throw s}try{var n=ib[e]||e||"General";if(r.cellNF&&(t.z=n),r.cellDates&&t.t=="n"&&Qv(n)){var a=Wm(t.v);a&&(t.t="d",t.v=new Date(a.y,a.m-1,a.d,a.H,a.M,a.S,a.u))}}catch(s){if(r.WTF)throw s}}}function q8e(t,e,r){if(r.cellStyles&&e.Interior){var n=e.Interior;n.Pattern&&(n.patternType=sFe[n.Pattern]||n.Pattern)}t[e.ID]=e}function z8e(t,e,r,n,a,s,i,l,c,u){var d="General",f=n.StyleID,h={};u=u||{};var A=[],m=0;for(f===void 0&&l&&(f=l.StyleID),f===void 0&&i&&(f=i.StyleID);s[f]!==void 0&&(s[f].nf&&(d=s[f].nf),s[f].Interior&&A.push(s[f].Interior),!!s[f].Parent);)f=s[f].Parent;switch(r.Type){case"Boolean":n.t="b",n.v=es(t);break;case"String":n.t="s",n.r=XV(Wn(t)),n.v=t.indexOf("<")>-1?Wn(e||t).replace(/<.*?>/g,""):n.r;break;case"DateTime":t.slice(-1)!="Z"&&(t+="Z"),n.v=(as(t)-new Date(Date.UTC(1899,11,30)))/(24*60*60*1e3),n.v!==n.v?n.v=Wn(t):n.v<60&&(n.v=n.v-1),(!d||d=="General")&&(d="yyyy-mm-dd");case"Number":n.v===void 0&&(n.v=+t),n.t||(n.t="n");break;case"Error":n.t="e",n.v=xre[t],u.cellText!==!1&&(n.w=t);break;default:t==""&&e==""?n.t="z":(n.t="s",n.v=XV(e||t));break}if(G8e(n,d,u),u.cellFormula!==!1)if(n.Formula){var p=Wn(n.Formula);p.charCodeAt(0)==61&&(p=p.slice(1)),n.f=Qx(p,a),delete n.Formula,n.ArrayRange=="RC"?n.F=Qx("RC:RC",a):n.ArrayRange&&(n.F=Qx(n.ArrayRange,a),c.push([Xn(n.F),n.F]))}else for(m=0;m<c.length;++m)a.r>=c[m][0].s.r&&a.r<=c[m][0].e.r&&a.c>=c[m][0].s.c&&a.c<=c[m][0].e.c&&(n.F=c[m][1]);u.cellStyles&&(A.forEach(function(g){!h.patternType&&g.patternType&&(h.patternType=g.patternType)}),n.s=h),n.StyleID!==void 0&&(n.ixfe=n.StyleID)}function W8e(t){t.t=t.v||"",t.t=t.t.replace(/\r\n/g,`
`).replace(/\r/g,`
`),t.v=t.w=t.ixfe=void 0}function rB(t,e){var r=e||{};Vv();var n=by(nD(t));(r.type=="binary"||r.type=="array"||r.type=="base64")&&(n=Ba(n));var a=n.slice(0,1024).toLowerCase(),s=!1;if(a=a.replace(/".*?"/g,""),(a.indexOf(">")&1023)>Math.min(a.indexOf(",")&1023,a.indexOf(";")&1023)){var i=ss(r);return i.type="string",dv.to_workbook(n,i)}if(a.indexOf("<?xml")==-1&&["html","table","head","meta","script","style","div"].forEach(function(Ae){a.indexOf("<"+Ae)>=0&&(s=!0)}),s)return FMe(n,r);ib={"General Number":"General","General Date":an[22],"Long Date":"dddd, mmmm dd, yyyy","Medium Date":an[15],"Short Date":an[14],"Long Time":an[19],"Medium Time":an[18],"Short Time":an[20],Currency:'"$"#,##0.00_);[Red]\\("$"#,##0.00\\)',Fixed:an[2],Standard:an[4],Percent:an[10],Scientific:an[11],"Yes/No":'"Yes";"Yes";"No";@',"True/False":'"True";"True";"False";@',"On/Off":'"Yes";"Yes";"No";@'};var l,c=[],u,d={},f=[],h=r.dense?[]:{},A="",m={},p={},g=dd('<Data ss:Type="String">'),x=0,y=0,b=0,w={s:{r:2e6,c:2e6},e:{r:0,c:0}},j={},I={},_="",E=0,S=[],k={},P={},T=0,F=[],Y=[],he={},ue=[],fe,me=!1,ne=[],Pe=[],Ie={},O=0,H=0,R={Sheets:[],WBProps:{date1904:!1}},M={};s2.lastIndex=0,n=n.replace(/<!--([\s\S]*?)-->/mg,"");for(var K="";l=s2.exec(n);)switch(l[3]=(K=l[3]).toLowerCase()){case"data":if(K=="data"){if(l[1]==="/"){if((u=c.pop())[0]!==l[3])throw new Error("Bad state: "+u.join("|"))}else l[0].charAt(l[0].length-2)!=="/"&&c.push([l[3],!0]);break}if(c[c.length-1][1])break;l[1]==="/"?z8e(n.slice(x,l.index),_,g,c[c.length-1][0]=="comment"?he:m,{c:y,r:b},j,ue[y],p,ne,r):(_="",g=dd(l[0]),x=l.index+l[0].length);break;case"cell":if(l[1]==="/")if(Y.length>0&&(m.c=Y),(!r.sheetRows||r.sheetRows>b)&&m.v!==void 0&&(r.dense?(h[b]||(h[b]=[]),h[b][y]=m):h[Bs(y)+di(b)]=m),m.HRef&&(m.l={Target:Wn(m.HRef)},m.HRefScreenTip&&(m.l.Tooltip=m.HRefScreenTip),delete m.HRef,delete m.HRefScreenTip),(m.MergeAcross||m.MergeDown)&&(O=y+(parseInt(m.MergeAcross,10)|0),H=b+(parseInt(m.MergeDown,10)|0),S.push({s:{c:y,r:b},e:{c:O,r:H}})),!r.sheetStubs)m.MergeAcross?y=O+1:++y;else if(m.MergeAcross||m.MergeDown){for(var W=y;W<=O;++W)for(var D=b;D<=H;++D)(W>y||D>b)&&(r.dense?(h[D]||(h[D]=[]),h[D][W]={t:"z"}):h[Bs(W)+di(D)]={t:"z"});y=O+1}else++y;else m=H8e(l[0]),m.Index&&(y=+m.Index-1),y<w.s.c&&(w.s.c=y),y>w.e.c&&(w.e.c=y),l[0].slice(-2)==="/>"&&++y,Y=[];break;case"row":l[1]==="/"||l[0].slice(-2)==="/>"?(b<w.s.r&&(w.s.r=b),b>w.e.r&&(w.e.r=b),l[0].slice(-2)==="/>"&&(p=dd(l[0]),p.Index&&(b=+p.Index-1)),y=0,++b):(p=dd(l[0]),p.Index&&(b=+p.Index-1),Ie={},(p.AutoFitHeight=="0"||p.Height)&&(Ie.hpx=parseInt(p.Height,10),Ie.hpt=u2(Ie.hpx),Pe[b]=Ie),p.Hidden=="1"&&(Ie.hidden=!0,Pe[b]=Ie));break;case"worksheet":if(l[1]==="/"){if((u=c.pop())[0]!==l[3])throw new Error("Bad state: "+u.join("|"));f.push(A),w.s.r<=w.e.r&&w.s.c<=w.e.c&&(h["!ref"]=vn(w),r.sheetRows&&r.sheetRows<=w.e.r&&(h["!fullref"]=h["!ref"],w.e.r=r.sheetRows-1,h["!ref"]=vn(w))),S.length&&(h["!merges"]=S),ue.length>0&&(h["!cols"]=ue),Pe.length>0&&(h["!rows"]=Pe),d[A]=h}else w={s:{r:2e6,c:2e6},e:{r:0,c:0}},b=y=0,c.push([l[3],!1]),u=dd(l[0]),A=Wn(u.Name),h=r.dense?[]:{},S=[],ne=[],Pe=[],M={name:A,Hidden:0},R.Sheets.push(M);break;case"table":if(l[1]==="/"){if((u=c.pop())[0]!==l[3])throw new Error("Bad state: "+u.join("|"))}else{if(l[0].slice(-2)=="/>")break;c.push([l[3],!1]),ue=[],me=!1}break;case"style":l[1]==="/"?q8e(j,I,r):I=dd(l[0]);break;case"numberformat":I.nf=Wn(dd(l[0]).Format||"General"),ib[I.nf]&&(I.nf=ib[I.nf]);for(var L=0;L!=392&&an[L]!=I.nf;++L);if(L==392){for(L=57;L!=392;++L)if(an[L]==null){IA(I.nf,L);break}}break;case"column":if(c[c.length-1][0]!=="table")break;if(fe=dd(l[0]),fe.Hidden&&(fe.hidden=!0,delete fe.Hidden),fe.Width&&(fe.wpx=parseInt(fe.Width,10)),!me&&fe.wpx>10){me=!0,hl=Jre;for(var Z=0;Z<ue.length;++Z)ue[Z]&&G0(ue[Z])}me&&G0(fe),ue[fe.Index-1||ue.length]=fe;for(var ge=0;ge<+fe.Span;++ge)ue[ue.length]=ss(fe);break;case"namedrange":if(l[1]==="/")break;R.Names||(R.Names=[]);var U=ln(l[0]),Ge={Name:U.Name,Ref:Qx(U.RefersTo.slice(1),{r:0,c:0})};R.Sheets.length>0&&(Ge.Sheet=R.Sheets.length-1),R.Names.push(Ge);break;case"namedcell":break;case"b":break;case"i":break;case"u":break;case"s":break;case"em":break;case"h2":break;case"h3":break;case"sub":break;case"sup":break;case"span":break;case"alignment":break;case"borders":break;case"border":break;case"font":if(l[0].slice(-2)==="/>")break;l[1]==="/"?_+=n.slice(E,l.index):E=l.index+l[0].length;break;case"interior":if(!r.cellStyles)break;I.Interior=dd(l[0]);break;case"protection":break;case"author":case"title":case"description":case"created":case"keywords":case"subject":case"category":case"company":case"lastauthor":case"lastsaved":case"lastprinted":case"version":case"revision":case"totaltime":case"hyperlinkbase":case"manager":case"contentstatus":case"identifier":case"language":case"appname":if(l[0].slice(-2)==="/>")break;l[1]==="/"?vPe(k,K,n.slice(T,l.index)):T=l.index+l[0].length;break;case"paragraphs":break;case"styles":case"workbook":if(l[1]==="/"){if((u=c.pop())[0]!==l[3])throw new Error("Bad state: "+u.join("|"))}else c.push([l[3],!1]);break;case"comment":if(l[1]==="/"){if((u=c.pop())[0]!==l[3])throw new Error("Bad state: "+u.join("|"));W8e(he),Y.push(he)}else c.push([l[3],!1]),u=dd(l[0]),he={a:u.Author};break;case"autofilter":if(l[1]==="/"){if((u=c.pop())[0]!==l[3])throw new Error("Bad state: "+u.join("|"))}else if(l[0].charAt(l[0].length-2)!=="/"){var ie=dd(l[0]);h["!autofilter"]={ref:Qx(ie.Range).replace(/\$/g,"")},c.push([l[3],!0])}break;case"name":break;case"datavalidation":if(l[1]==="/"){if((u=c.pop())[0]!==l[3])throw new Error("Bad state: "+u.join("|"))}else l[0].charAt(l[0].length-2)!=="/"&&c.push([l[3],!0]);break;case"pixelsperinch":break;case"componentoptions":case"documentproperties":case"customdocumentproperties":case"officedocumentsettings":case"pivottable":case"pivotcache":case"names":case"mapinfo":case"pagebreaks":case"querytable":case"sorting":case"schema":case"conditionalformatting":case"smarttagtype":case"smarttags":case"excelworkbook":case"workbookoptions":case"worksheetoptions":if(l[1]==="/"){if((u=c.pop())[0]!==l[3])throw new Error("Bad state: "+u.join("|"))}else l[0].charAt(l[0].length-2)!=="/"&&c.push([l[3],!0]);break;case"null":break;default:if(c.length==0&&l[3]=="document"||c.length==0&&l[3]=="uof")return MH(n,r);var J=!0;switch(c[c.length-1][0]){case"officedocumentsettings":switch(l[3]){case"allowpng":break;case"removepersonalinformation":break;case"downloadcomponents":break;case"locationofcomponents":break;case"colors":break;case"color":break;case"index":break;case"rgb":break;case"targetscreensize":break;case"readonlyrecommended":break;default:J=!1}break;case"componentoptions":switch(l[3]){case"toolbar":break;case"hideofficelogo":break;case"spreadsheetautofit":break;case"label":break;case"caption":break;case"maxheight":break;case"maxwidth":break;case"nextsheetnumber":break;default:J=!1}break;case"excelworkbook":switch(l[3]){case"date1904":R.WBProps.date1904=!0;break;case"windowheight":break;case"windowwidth":break;case"windowtopx":break;case"windowtopy":break;case"tabratio":break;case"protectstructure":break;case"protectwindow":break;case"protectwindows":break;case"activesheet":break;case"displayinknotes":break;case"firstvisiblesheet":break;case"supbook":break;case"sheetname":break;case"sheetindex":break;case"sheetindexfirst":break;case"sheetindexlast":break;case"dll":break;case"acceptlabelsinformulas":break;case"donotsavelinkvalues":break;case"iteration":break;case"maxiterations":break;case"maxchange":break;case"path":break;case"xct":break;case"count":break;case"selectedsheets":break;case"calculation":break;case"uncalced":break;case"startupprompt":break;case"crn":break;case"externname":break;case"formula":break;case"colfirst":break;case"collast":break;case"wantadvise":break;case"boolean":break;case"error":break;case"text":break;case"ole":break;case"noautorecover":break;case"publishobjects":break;case"donotcalculatebeforesave":break;case"number":break;case"refmoder1c1":break;case"embedsavesmarttags":break;default:J=!1}break;case"workbookoptions":switch(l[3]){case"owcversion":break;case"height":break;case"width":break;default:J=!1}break;case"worksheetoptions":switch(l[3]){case"visible":if(l[0].slice(-2)!=="/>")if(l[1]==="/")switch(n.slice(T,l.index)){case"SheetHidden":M.Hidden=1;break;case"SheetVeryHidden":M.Hidden=2;break}else T=l.index+l[0].length;break;case"header":h["!margins"]||fp(h["!margins"]={},"xlml"),isNaN(+ln(l[0]).Margin)||(h["!margins"].header=+ln(l[0]).Margin);break;case"footer":h["!margins"]||fp(h["!margins"]={},"xlml"),isNaN(+ln(l[0]).Margin)||(h["!margins"].footer=+ln(l[0]).Margin);break;case"pagemargins":var je=ln(l[0]);h["!margins"]||fp(h["!margins"]={},"xlml"),isNaN(+je.Top)||(h["!margins"].top=+je.Top),isNaN(+je.Left)||(h["!margins"].left=+je.Left),isNaN(+je.Right)||(h["!margins"].right=+je.Right),isNaN(+je.Bottom)||(h["!margins"].bottom=+je.Bottom);break;case"displayrighttoleft":R.Views||(R.Views=[]),R.Views[0]||(R.Views[0]={}),R.Views[0].RTL=!0;break;case"freezepanes":break;case"frozennosplit":break;case"splithorizontal":case"splitvertical":break;case"donotdisplaygridlines":break;case"activerow":break;case"activecol":break;case"toprowbottompane":break;case"leftcolumnrightpane":break;case"unsynced":break;case"print":break;case"printerrors":break;case"panes":break;case"scale":break;case"pane":break;case"number":break;case"layout":break;case"pagesetup":break;case"selected":break;case"protectobjects":break;case"enableselection":break;case"protectscenarios":break;case"validprinterinfo":break;case"horizontalresolution":break;case"verticalresolution":break;case"numberofcopies":break;case"activepane":break;case"toprowvisible":break;case"leftcolumnvisible":break;case"fittopage":break;case"rangeselection":break;case"papersizeindex":break;case"pagelayoutzoom":break;case"pagebreakzoom":break;case"filteron":break;case"fitwidth":break;case"fitheight":break;case"commentslayout":break;case"zoom":break;case"lefttoright":break;case"gridlines":break;case"allowsort":break;case"allowfilter":break;case"allowinsertrows":break;case"allowdeleterows":break;case"allowinsertcols":break;case"allowdeletecols":break;case"allowinserthyperlinks":break;case"allowformatcells":break;case"allowsizecols":break;case"allowsizerows":break;case"nosummaryrowsbelowdetail":h["!outline"]||(h["!outline"]={}),h["!outline"].above=!0;break;case"tabcolorindex":break;case"donotdisplayheadings":break;case"showpagelayoutzoom":break;case"nosummarycolumnsrightdetail":h["!outline"]||(h["!outline"]={}),h["!outline"].left=!0;break;case"blackandwhite":break;case"donotdisplayzeros":break;case"displaypagebreak":break;case"rowcolheadings":break;case"donotdisplayoutline":break;case"noorientation":break;case"allowusepivottables":break;case"zeroheight":break;case"viewablerange":break;case"selection":break;case"protectcontents":break;default:J=!1}break;case"pivottable":case"pivotcache":switch(l[3]){case"immediateitemsondrop":break;case"showpagemultipleitemlabel":break;case"compactrowindent":break;case"location":break;case"pivotfield":break;case"orientation":break;case"layoutform":break;case"layoutsubtotallocation":break;case"layoutcompactrow":break;case"position":break;case"pivotitem":break;case"datatype":break;case"datafield":break;case"sourcename":break;case"parentfield":break;case"ptlineitems":break;case"ptlineitem":break;case"countofsameitems":break;case"item":break;case"itemtype":break;case"ptsource":break;case"cacheindex":break;case"consolidationreference":break;case"filename":break;case"reference":break;case"nocolumngrand":break;case"norowgrand":break;case"blanklineafteritems":break;case"hidden":break;case"subtotal":break;case"basefield":break;case"mapchilditems":break;case"function":break;case"refreshonfileopen":break;case"printsettitles":break;case"mergelabels":break;case"defaultversion":break;case"refreshname":break;case"refreshdate":break;case"refreshdatecopy":break;case"versionlastrefresh":break;case"versionlastupdate":break;case"versionupdateablemin":break;case"versionrefreshablemin":break;case"calculation":break;default:J=!1}break;case"pagebreaks":switch(l[3]){case"colbreaks":break;case"colbreak":break;case"rowbreaks":break;case"rowbreak":break;case"colstart":break;case"colend":break;case"rowend":break;default:J=!1}break;case"autofilter":switch(l[3]){case"autofiltercolumn":break;case"autofiltercondition":break;case"autofilterand":break;case"autofilteror":break;default:J=!1}break;case"querytable":switch(l[3]){case"id":break;case"autoformatfont":break;case"autoformatpattern":break;case"querysource":break;case"querytype":break;case"enableredirections":break;case"refreshedinxl9":break;case"urlstring":break;case"htmltables":break;case"connection":break;case"commandtext":break;case"refreshinfo":break;case"notitles":break;case"nextid":break;case"columninfo":break;case"overwritecells":break;case"donotpromptforfile":break;case"textwizardsettings":break;case"source":break;case"number":break;case"decimal":break;case"thousandseparator":break;case"trailingminusnumbers":break;case"formatsettings":break;case"fieldtype":break;case"delimiters":break;case"tab":break;case"comma":break;case"autoformatname":break;case"versionlastedit":break;case"versionlastrefresh":break;default:J=!1}break;case"datavalidation":switch(l[3]){case"range":break;case"type":break;case"min":break;case"max":break;case"sort":break;case"descending":break;case"order":break;case"casesensitive":break;case"value":break;case"errorstyle":break;case"errormessage":break;case"errortitle":break;case"inputmessage":break;case"inputtitle":break;case"combohide":break;case"inputhide":break;case"condition":break;case"qualifier":break;case"useblank":break;case"value1":break;case"value2":break;case"format":break;case"cellrangelist":break;default:J=!1}break;case"sorting":case"conditionalformatting":switch(l[3]){case"range":break;case"type":break;case"min":break;case"max":break;case"sort":break;case"descending":break;case"order":break;case"casesensitive":break;case"value":break;case"errorstyle":break;case"errormessage":break;case"errortitle":break;case"cellrangelist":break;case"inputmessage":break;case"inputtitle":break;case"combohide":break;case"inputhide":break;case"condition":break;case"qualifier":break;case"useblank":break;case"value1":break;case"value2":break;case"format":break;default:J=!1}break;case"mapinfo":case"schema":case"data":switch(l[3]){case"map":break;case"entry":break;case"range":break;case"xpath":break;case"field":break;case"xsdtype":break;case"filteron":break;case"aggregate":break;case"elementtype":break;case"attributetype":break;case"schema":case"element":case"complextype":case"datatype":case"all":case"attribute":case"extends":break;case"row":break;default:J=!1}break;case"smarttags":break;default:J=!1;break}if(J||l[3].match(/!\[CDATA/))break;if(!c[c.length-1][1])throw"Unrecognized tag: "+l[3]+"|"+c.join("|");if(c[c.length-1][0]==="customdocumentproperties"){if(l[0].slice(-2)==="/>")break;l[1]==="/"?K8e(P,K,F,n.slice(T,l.index)):(F=l,T=l.index+l[0].length);break}if(r.WTF)throw"Unrecognized tag: "+l[3]+"|"+c.join("|")}var z={};return!r.bookSheets&&!r.bookProps&&(z.Sheets=d),z.SheetNames=f,z.Workbook=R,z.SSF=ss(an),z.Props=k,z.Custprops=P,z}function Ak(t,e){switch(SD(e=e||{}),e.type||"base64"){case"base64":return rB(Zc(t),e);case"binary":case"buffer":case"file":return rB(t,e);case"array":return rB(am(t),e)}}function X8e(t,e){var r=[];return t.Props&&r.push(yPe(t.Props,e)),t.Custprops&&r.push(bPe(t.Props,t.Custprops)),r.join("")}function Y8e(){return""}function J8e(t,e){var r=['<Style ss:ID="Default" ss:Name="Normal"><NumberFormat/></Style>'];return e.cellXfs.forEach(function(n,a){var s=[];s.push(br("NumberFormat",null,{"ss:Format":Ca(an[n.numFmtId])}));var i={"ss:ID":"s"+(21+a)};r.push(br("Style",s.join(""),i))}),br("Styles",r.join(""))}function _ne(t){return br("NamedRange",null,{"ss:Name":t.Name,"ss:RefersTo":"="+bD(t.Ref,{r:0,c:0})})}function Z8e(t){if(!((t||{}).Workbook||{}).Names)return"";for(var e=t.Workbook.Names,r=[],n=0;n<e.length;++n){var a=e[n];a.Sheet==null&&(a.Name.match(/^_xlfn\./)||r.push(_ne(a)))}return br("Names",r.join(""))}function eMe(t,e,r,n){if(!t||!((n||{}).Workbook||{}).Names)return"";for(var a=n.Workbook.Names,s=[],i=0;i<a.length;++i){var l=a[i];l.Sheet==r&&(l.Name.match(/^_xlfn\./)||s.push(_ne(l)))}return s.join("")}function tMe(t,e,r,n){if(!t)return"";var a=[];if(t["!margins"]&&(a.push("<PageSetup>"),t["!margins"].header&&a.push(br("Header",null,{"x:Margin":t["!margins"].header})),t["!margins"].footer&&a.push(br("Footer",null,{"x:Margin":t["!margins"].footer})),a.push(br("PageMargins",null,{"x:Bottom":t["!margins"].bottom||"0.75","x:Left":t["!margins"].left||"0.7","x:Right":t["!margins"].right||"0.7","x:Top":t["!margins"].top||"0.75"})),a.push("</PageSetup>")),n&&n.Workbook&&n.Workbook.Sheets&&n.Workbook.Sheets[r])if(n.Workbook.Sheets[r].Hidden)a.push(br("Visible",n.Workbook.Sheets[r].Hidden==1?"SheetHidden":"SheetVeryHidden",{}));else{for(var s=0;s<r&&!(n.Workbook.Sheets[s]&&!n.Workbook.Sheets[s].Hidden);++s);s==r&&a.push("<Selected/>")}return((((n||{}).Workbook||{}).Views||[])[0]||{}).RTL&&a.push("<DisplayRightToLeft/>"),t["!protect"]&&(a.push(Vo("ProtectContents","True")),t["!protect"].objects&&a.push(Vo("ProtectObjects","True")),t["!protect"].scenarios&&a.push(Vo("ProtectScenarios","True")),t["!protect"].selectLockedCells!=null&&!t["!protect"].selectLockedCells?a.push(Vo("EnableSelection","NoSelection")):t["!protect"].selectUnlockedCells!=null&&!t["!protect"].selectUnlockedCells&&a.push(Vo("EnableSelection","UnlockedCells")),[["formatCells","AllowFormatCells"],["formatColumns","AllowSizeCols"],["formatRows","AllowSizeRows"],["insertColumns","AllowInsertCols"],["insertRows","AllowInsertRows"],["insertHyperlinks","AllowInsertHyperlinks"],["deleteColumns","AllowDeleteCols"],["deleteRows","AllowDeleteRows"],["sort","AllowSort"],["autoFilter","AllowFilter"],["pivotTables","AllowUsePivotTables"]].forEach(function(i){t["!protect"][i[0]]&&a.push("<"+i[1]+"/>")})),a.length==0?"":br("WorksheetOptions",a.join(""),{xmlns:Mc.x})}function rMe(t){return t.map(function(e){var r=NBe(e.t||""),n=br("ss:Data",r,{xmlns:"http://www.w3.org/TR/REC-html40"});return br("Comment",n,{"ss:Author":e.a})}).join("")}function nMe(t,e,r,n,a,s,i){if(!t||t.v==null&&t.f==null)return"";var l={};if(t.f&&(l["ss:Formula"]="="+Ca(bD(t.f,i))),t.F&&t.F.slice(0,e.length)==e){var c=Ps(t.F.slice(e.length+1));l["ss:ArrayRange"]="RC:R"+(c.r==i.r?"":"["+(c.r-i.r)+"]")+"C"+(c.c==i.c?"":"["+(c.c-i.c)+"]")}if(t.l&&t.l.Target&&(l["ss:HRef"]=Ca(t.l.Target),t.l.Tooltip&&(l["x:HRefScreenTip"]=Ca(t.l.Tooltip))),r["!merges"])for(var u=r["!merges"],d=0;d!=u.length;++d)u[d].s.c!=i.c||u[d].s.r!=i.r||(u[d].e.c>u[d].s.c&&(l["ss:MergeAcross"]=u[d].e.c-u[d].s.c),u[d].e.r>u[d].s.r&&(l["ss:MergeDown"]=u[d].e.r-u[d].s.r));var f="",h="";switch(t.t){case"z":if(!n.sheetStubs)return"";break;case"n":f="Number",h=String(t.v);break;case"b":f="Boolean",h=t.v?"1":"0";break;case"e":f="Error",h=nh[t.v];break;case"d":f="DateTime",h=new Date(t.v).toISOString(),t.z==null&&(t.z=t.z||an[14]);break;case"s":f="String",h=wBe(t.v||"");break}var A=im(n.cellXfs,t,n);l["ss:StyleID"]="s"+(21+A),l["ss:Index"]=i.c+1;var m=t.v!=null?h:"",p=t.t=="z"?"":'<Data ss:Type="'+f+'">'+m+"</Data>";return(t.c||[]).length>0&&(p+=rMe(t.c)),br("Cell",p,l)}function aMe(t,e){var r='<Row ss:Index="'+(t+1)+'"';return e&&(e.hpt&&!e.hpx&&(e.hpx=fv(e.hpt)),e.hpx&&(r+=' ss:AutoFitHeight="0" ss:Height="'+e.hpx+'"'),e.hidden&&(r+=' ss:Hidden="1"')),r+">"}function sMe(t,e,r,n){if(!t["!ref"])return"";var a=Xn(t["!ref"]),s=t["!merges"]||[],i=0,l=[];t["!cols"]&&t["!cols"].forEach(function(g,x){G0(g);var y=!!g.width,b=k4(x,g),w={"ss:Index":x+1};y&&(w["ss:Width"]=l2(b.width)),g.hidden&&(w["ss:Hidden"]="1"),l.push(br("Column",null,w))});for(var c=Array.isArray(t),u=a.s.r;u<=a.e.r;++u){for(var d=[aMe(u,(t["!rows"]||[])[u])],f=a.s.c;f<=a.e.c;++f){var h=!1;for(i=0;i!=s.length;++i)if(!(s[i].s.c>f)&&!(s[i].s.r>u)&&!(s[i].e.c<f)&&!(s[i].e.r<u)){(s[i].s.c!=f||s[i].s.r!=u)&&(h=!0);break}if(!h){var A={r:u,c:f},m=sn(A),p=c?(t[u]||[])[f]:t[m];d.push(nMe(p,m,t,e,r,n,A))}}d.push("</Row>"),d.length>2&&l.push(d.join(""))}return l.join("")}function iMe(t,e,r){var n=[],a=r.SheetNames[t],s=r.Sheets[a],i=s?eMe(s,e,t,r):"";return i.length>0&&n.push("<Names>"+i+"</Names>"),i=s?sMe(s,e,t,r):"",i.length>0&&n.push("<Table>"+i+"</Table>"),n.push(tMe(s,e,t,r)),n.join("")}function oMe(t,e){e||(e={}),t.SSF||(t.SSF=ss(an)),t.SSF&&(Vv(),E4(t.SSF),e.revssf=I4(t.SSF),e.revssf[t.SSF[65535]]=0,e.ssf=t.SSF,e.cellXfs=[],im(e.cellXfs,{},{revssf:{General:0}}));var r=[];r.push(X8e(t,e)),r.push(Y8e()),r.push(""),r.push("");for(var n=0;n<t.SheetNames.length;++n)r.push(br("Worksheet",iMe(n,e,t),{"ss:Name":Ca(t.SheetNames[n])}));return r[2]=J8e(t,e),r[3]=Z8e(t),Ai+br("Workbook",r.join(""),{xmlns:Mc.ss,"xmlns:o":Mc.o,"xmlns:x":Mc.x,"xmlns:ss":Mc.ss,"xmlns:dt":Mc.dt,"xmlns:html":Mc.html})}function lMe(t){var e={},r=t.content;if(r.l=28,e.AnsiUserType=r.read_shift(0,"lpstr-ansi"),e.AnsiClipboardFormat=ZBe(r),r.length-r.l<=4)return e;var n=r.read_shift(4);if(n==0||n>40||(r.l-=4,e.Reserved1=r.read_shift(0,"lpstr-ansi"),r.length-r.l<=4)||(n=r.read_shift(4),n!==1907505652)||(e.UnicodeClipboardFormat=ePe(r),n=r.read_shift(4),n==0||n>40))return e;r.l-=4,e.Reserved2=r.read_shift(0,"lpwstr")}var cMe=[60,1084,2066,2165,2175];function uMe(t,e,r,n,a){var s=n,i=[],l=r.slice(r.l,r.l+s);if(a&&a.enc&&a.enc.insitu&&l.length>0)switch(t){case 9:case 521:case 1033:case 2057:case 47:case 405:case 225:case 406:case 312:case 404:case 10:break;case 133:break;default:a.enc.insitu(l)}i.push(l),r.l+=s;for(var c=gA(r,r.l),u=hk[c],d=0;u!=null&&cMe.indexOf(c)>-1;)s=gA(r,r.l+2),d=r.l+4,c==2066?d+=4:(c==2165||c==2175)&&(d+=12),l=r.slice(d,r.l+4+s),i.push(l),r.l+=4+s,u=hk[c=gA(r,r.l)];var f=fo(i);Uo(f,0);var h=0;f.lens=[];for(var A=0;A<i.length;++A)f.lens.push(h),h+=i[A].length;if(f.length<n)throw"XLS Record 0x"+t.toString(16)+" Truncated: "+f.length+" < "+n;return e.f(f,f.length,a)}function af(t,e,r){if(t.t!=="z"&&t.XF){var n=0;try{n=t.z||t.XF.numFmtId||0,e.cellNF&&(t.z=an[n])}catch(s){if(e.WTF)throw s}if(!e||e.cellText!==!1)try{t.t==="e"?t.w=t.w||nh[t.v]:n===0||n=="General"?t.t==="n"?(t.v|0)===t.v?t.w=t.v.toString(10):t.w=r2(t.v):t.w=kp(t.v):t.w=qu(n,t.v,{date1904:!!r,dateNF:e&&e.dateNF})}catch(s){if(e.WTF)throw s}if(e.cellDates&&n&&t.t=="n"&&Qv(an[n]||String(n))){var a=Wm(t.v);a&&(t.t="d",t.v=new Date(a.y,a.m-1,a.d,a.H,a.M,a.S,a.u))}}}function PC(t,e,r){return{v:t,ixfe:e,t:r}}function dMe(t,e){var r={opts:{}},n={},a=e.dense?[]:{},s={},i={},l=null,c=[],u="",d={},f,h="",A,m,p,g,x={},y=[],b,w,j=[],I=[],_={Sheets:[],WBProps:{date1904:!1},Views:[{}]},E={},S=function(ve){return ve<8?cp[ve]:ve<64&&I[ve-8]||cp[ve]},k=function(ve,le,Ue){var rt=le.XF.data;if(!(!rt||!rt.patternType||!Ue||!Ue.cellStyles)){le.s={},le.s.patternType=rt.patternType;var mt;(mt=o2(S(rt.icvFore)))&&(le.s.fgColor={rgb:mt}),(mt=o2(S(rt.icvBack)))&&(le.s.bgColor={rgb:mt})}},P=function(ve,le,Ue){if(!(Ie>1)&&!(Ue.sheetRows&&ve.r>=Ue.sheetRows)){if(Ue.cellStyles&&le.XF&&le.XF.data&&k(ve,le,Ue),delete le.ixfe,delete le.XF,f=ve,h=sn(ve),(!i||!i.s||!i.e)&&(i={s:{r:0,c:0},e:{r:0,c:0}}),ve.r<i.s.r&&(i.s.r=ve.r),ve.c<i.s.c&&(i.s.c=ve.c),ve.r+1>i.e.r&&(i.e.r=ve.r+1),ve.c+1>i.e.c&&(i.e.c=ve.c+1),Ue.cellFormula&&le.f){for(var rt=0;rt<y.length;++rt)if(!(y[rt][0].s.c>ve.c||y[rt][0].s.r>ve.r)&&!(y[rt][0].e.c<ve.c||y[rt][0].e.r<ve.r)){le.F=vn(y[rt][0]),(y[rt][0].s.c!=ve.c||y[rt][0].s.r!=ve.r)&&delete le.f,le.f&&(le.f=""+fl(y[rt][1],i,ve,ne,T));break}}Ue.dense?(a[ve.r]||(a[ve.r]=[]),a[ve.r][ve.c]=le):a[h]=le}},T={enc:!1,sbcch:0,snames:[],sharedf:x,arrayf:y,rrtabid:[],lastuser:"",biff:8,codepage:0,winlocked:0,cellStyles:!!e&&!!e.cellStyles,WTF:!!e&&!!e.wtf};e.password&&(T.password=e.password);var F,Y=[],he=[],ue=[],fe=[],me=!1,ne=[];ne.SheetNames=T.snames,ne.sharedf=T.sharedf,ne.arrayf=T.arrayf,ne.names=[],ne.XTI=[];var Pe=0,Ie=0,O=0,H=[],R=[],M;T.codepage=1200,Nd(1200);for(var K=!1;t.l<t.length-1;){var W=t.l,D=t.read_shift(2);if(D===0&&Pe===10)break;var L=t.l===t.length?0:t.read_shift(2),Z=hk[D];if(Z&&Z.f){if(e.bookSheets&&Pe===133&&D!==133)break;if(Pe=D,Z.r===2||Z.r==12){var ge=t.read_shift(2);if(L-=2,!T.enc&&ge!==D&&((ge&255)<<8|ge>>8)!==D)throw new Error("rt mismatch: "+ge+"!="+D);Z.r==12&&(t.l+=10,L-=10)}var U={};if(D===10?U=Z.f(t,L,T):U=uMe(D,Z,t,L,T),Ie==0&&[9,521,1033,2057].indexOf(Pe)===-1)continue;switch(D){case 34:r.opts.Date1904=_.WBProps.date1904=U;break;case 134:r.opts.WriteProtect=!0;break;case 47:if(T.enc||(t.l=0),T.enc=U,!e.password)throw new Error("File is password-protected");if(U.valid==null)throw new Error("Encryption scheme unsupported");if(!U.valid)throw new Error("Password is incorrect");break;case 92:T.lastuser=U;break;case 66:var Ge=Number(U);switch(Ge){case 21010:Ge=1200;break;case 32768:Ge=1e4;break;case 32769:Ge=1252;break}Nd(T.codepage=Ge),K=!0;break;case 317:T.rrtabid=U;break;case 25:T.winlocked=U;break;case 439:r.opts.RefreshAll=U;break;case 12:r.opts.CalcCount=U;break;case 16:r.opts.CalcDelta=U;break;case 17:r.opts.CalcIter=U;break;case 13:r.opts.CalcMode=U;break;case 14:r.opts.CalcPrecision=U;break;case 95:r.opts.CalcSaveRecalc=U;break;case 15:T.CalcRefMode=U;break;case 2211:r.opts.FullCalc=U;break;case 129:U.fDialog&&(a["!type"]="dialog"),U.fBelow||((a["!outline"]||(a["!outline"]={})).above=!0),U.fRight||((a["!outline"]||(a["!outline"]={})).left=!0);break;case 224:j.push(U);break;case 430:ne.push([U]),ne[ne.length-1].XTI=[];break;case 35:case 547:ne[ne.length-1].push(U);break;case 24:case 536:M={Name:U.Name,Ref:fl(U.rgce,i,null,ne,T)},U.itab>0&&(M.Sheet=U.itab-1),ne.names.push(M),ne[0]||(ne[0]=[],ne[0].XTI=[]),ne[ne.length-1].push(U),U.Name=="_xlnm._FilterDatabase"&&U.itab>0&&U.rgce&&U.rgce[0]&&U.rgce[0][0]&&U.rgce[0][0][0]=="PtgArea3d"&&(R[U.itab-1]={ref:vn(U.rgce[0][0][1][2])});break;case 22:T.ExternCount=U;break;case 23:ne.length==0&&(ne[0]=[],ne[0].XTI=[]),ne[ne.length-1].XTI=ne[ne.length-1].XTI.concat(U),ne.XTI=ne.XTI.concat(U);break;case 2196:if(T.biff<8)break;M!=null&&(M.Comment=U[1]);break;case 18:a["!protect"]=U;break;case 19:U!==0&&T.WTF&&console.error("Password verifier: "+U);break;case 133:s[U.pos]=U,T.snames.push(U.name);break;case 10:{if(--Ie)break;if(i.e){if(i.e.r>0&&i.e.c>0){if(i.e.r--,i.e.c--,a["!ref"]=vn(i),e.sheetRows&&e.sheetRows<=i.e.r){var ie=i.e.r;i.e.r=e.sheetRows-1,a["!fullref"]=a["!ref"],a["!ref"]=vn(i),i.e.r=ie}i.e.r++,i.e.c++}Y.length>0&&(a["!merges"]=Y),he.length>0&&(a["!objects"]=he),ue.length>0&&(a["!cols"]=ue),fe.length>0&&(a["!rows"]=fe),_.Sheets.push(E)}u===""?d=a:n[u]=a,a=e.dense?[]:{}}break;case 9:case 521:case 1033:case 2057:{if(T.biff===8&&(T.biff={9:2,521:3,1033:4}[D]||{512:2,768:3,1024:4,1280:5,1536:8,2:2,7:2}[U.BIFFVer]||8),T.biffguess=U.BIFFVer==0,U.BIFFVer==0&&U.dt==4096&&(T.biff=5,K=!0,Nd(T.codepage=28591)),T.biff==8&&U.BIFFVer==0&&U.dt==16&&(T.biff=2),Ie++)break;if(a=e.dense?[]:{},T.biff<8&&!K&&(K=!0,Nd(T.codepage=e.codepage||1252)),T.biff<5||U.BIFFVer==0&&U.dt==4096){u===""&&(u="Sheet1"),i={s:{r:0,c:0},e:{r:0,c:0}};var J={pos:t.l-L,name:u};s[J.pos]=J,T.snames.push(u)}else u=(s[W]||{name:""}).name;U.dt==32&&(a["!type"]="chart"),U.dt==64&&(a["!type"]="macro"),Y=[],he=[],T.arrayf=y=[],ue=[],fe=[],me=!1,E={Hidden:(s[W]||{hs:0}).hs,name:u}}break;case 515:case 3:case 2:a["!type"]=="chart"&&(e.dense?(a[U.r]||[])[U.c]:a[sn({c:U.c,r:U.r})])&&++U.c,b={ixfe:U.ixfe,XF:j[U.ixfe]||{},v:U.val,t:"n"},O>0&&(b.z=H[b.ixfe>>8&63]),af(b,e,r.opts.Date1904),P({c:U.c,r:U.r},b,e);break;case 5:case 517:b={ixfe:U.ixfe,XF:j[U.ixfe],v:U.val,t:U.t},O>0&&(b.z=H[b.ixfe>>8&63]),af(b,e,r.opts.Date1904),P({c:U.c,r:U.r},b,e);break;case 638:b={ixfe:U.ixfe,XF:j[U.ixfe],v:U.rknum,t:"n"},O>0&&(b.z=H[b.ixfe>>8&63]),af(b,e,r.opts.Date1904),P({c:U.c,r:U.r},b,e);break;case 189:for(var je=U.c;je<=U.C;++je){var z=U.rkrec[je-U.c][0];b={ixfe:z,XF:j[z],v:U.rkrec[je-U.c][1],t:"n"},O>0&&(b.z=H[b.ixfe>>8&63]),af(b,e,r.opts.Date1904),P({c:je,r:U.r},b,e)}break;case 6:case 518:case 1030:{if(U.val=="String"){l=U;break}if(b=PC(U.val,U.cell.ixfe,U.tt),b.XF=j[b.ixfe],e.cellFormula){var Ae=U.formula;if(Ae&&Ae[0]&&Ae[0][0]&&Ae[0][0][0]=="PtgExp"){var ye=Ae[0][0][1][0],Qe=Ae[0][0][1][1],st=sn({r:ye,c:Qe});x[st]?b.f=""+fl(U.formula,i,U.cell,ne,T):b.F=((e.dense?(a[ye]||[])[Qe]:a[st])||{}).F}else b.f=""+fl(U.formula,i,U.cell,ne,T)}O>0&&(b.z=H[b.ixfe>>8&63]),af(b,e,r.opts.Date1904),P(U.cell,b,e),l=U}break;case 7:case 519:if(l)l.val=U,b=PC(U,l.cell.ixfe,"s"),b.XF=j[b.ixfe],e.cellFormula&&(b.f=""+fl(l.formula,i,l.cell,ne,T)),O>0&&(b.z=H[b.ixfe>>8&63]),af(b,e,r.opts.Date1904),P(l.cell,b,e),l=null;else throw new Error("String record expects Formula");break;case 33:case 545:{y.push(U);var ut=sn(U[0].s);if(A=e.dense?(a[U[0].s.r]||[])[U[0].s.c]:a[ut],e.cellFormula&&A){if(!l||!ut||!A)break;A.f=""+fl(U[1],i,U[0],ne,T),A.F=vn(U[0])}}break;case 1212:{if(!e.cellFormula)break;if(h){if(!l)break;x[sn(l.cell)]=U[0],A=e.dense?(a[l.cell.r]||[])[l.cell.c]:a[sn(l.cell)],(A||{}).f=""+fl(U[0],i,f,ne,T)}}break;case 253:b=PC(c[U.isst].t,U.ixfe,"s"),c[U.isst].h&&(b.h=c[U.isst].h),b.XF=j[b.ixfe],O>0&&(b.z=H[b.ixfe>>8&63]),af(b,e,r.opts.Date1904),P({c:U.c,r:U.r},b,e);break;case 513:e.sheetStubs&&(b={ixfe:U.ixfe,XF:j[U.ixfe],t:"z"},O>0&&(b.z=H[b.ixfe>>8&63]),af(b,e,r.opts.Date1904),P({c:U.c,r:U.r},b,e));break;case 190:if(e.sheetStubs)for(var De=U.c;De<=U.C;++De){var it=U.ixfe[De-U.c];b={ixfe:it,XF:j[it],t:"z"},O>0&&(b.z=H[b.ixfe>>8&63]),af(b,e,r.opts.Date1904),P({c:De,r:U.r},b,e)}break;case 214:case 516:case 4:b=PC(U.val,U.ixfe,"s"),b.XF=j[b.ixfe],O>0&&(b.z=H[b.ixfe>>8&63]),af(b,e,r.opts.Date1904),P({c:U.c,r:U.r},b,e);break;case 0:case 512:Ie===1&&(i=U);break;case 252:c=U;break;case 1054:if(T.biff==4){H[O++]=U[1];for(var dt=0;dt<O+163&&an[dt]!=U[1];++dt);dt>=163&&IA(U[1],O+163)}else IA(U[1],U[0]);break;case 30:{H[O++]=U;for(var ce=0;ce<O+163&&an[ce]!=U;++ce);ce>=163&&IA(U,O+163)}break;case 229:Y=Y.concat(U);break;case 93:he[U.cmo[0]]=T.lastobj=U;break;case 438:T.lastobj.TxO=U;break;case 127:T.lastobj.ImData=U;break;case 440:for(g=U[0].s.r;g<=U[0].e.r;++g)for(p=U[0].s.c;p<=U[0].e.c;++p)A=e.dense?(a[g]||[])[p]:a[sn({c:p,r:g})],A&&(A.l=U[1]);break;case 2048:for(g=U[0].s.r;g<=U[0].e.r;++g)for(p=U[0].s.c;p<=U[0].e.c;++p)A=e.dense?(a[g]||[])[p]:a[sn({c:p,r:g})],A&&A.l&&(A.l.Tooltip=U[1]);break;case 28:{if(T.biff<=5&&T.biff>=2)break;A=e.dense?(a[U[0].r]||[])[U[0].c]:a[sn(U[0])];var oe=he[U[2]];A||(e.dense?(a[U[0].r]||(a[U[0].r]=[]),A=a[U[0].r][U[0].c]={t:"z"}):A=a[sn(U[0])]={t:"z"},i.e.r=Math.max(i.e.r,U[0].r),i.s.r=Math.min(i.s.r,U[0].r),i.e.c=Math.max(i.e.c,U[0].c),i.s.c=Math.min(i.s.c,U[0].c)),A.c||(A.c=[]),m={a:U[1],t:oe.TxO.t},A.c.push(m)}break;case 2173:JFe(j[U.ixfe],U.ext);break;case 125:{if(!T.cellStyles)break;for(;U.e>=U.s;)ue[U.e--]={width:U.w/256,level:U.level||0,hidden:!!(U.flags&1)},me||(me=!0,xD(U.w/256)),G0(ue[U.e+1])}break;case 520:{var Me={};U.level!=null&&(fe[U.r]=Me,Me.level=U.level),U.hidden&&(fe[U.r]=Me,Me.hidden=!0),U.hpt&&(fe[U.r]=Me,Me.hpt=U.hpt,Me.hpx=fv(U.hpt))}break;case 38:case 39:case 40:case 41:a["!margins"]||fp(a["!margins"]={}),a["!margins"][{38:"left",39:"right",40:"top",41:"bottom"}[D]]=U;break;case 161:a["!margins"]||fp(a["!margins"]={}),a["!margins"].header=U.header,a["!margins"].footer=U.footer;break;case 574:U.RTL&&(_.Views[0].RTL=!0);break;case 146:I=U;break;case 2198:F=U;break;case 140:w=U;break;case 442:u?E.CodeName=U||E.name:_.WBProps.CodeName=U||"ThisWorkbook";break}}else Z||console.error("Missing Info for XLS Record 0x"+D.toString(16)),t.l+=L}return r.SheetNames=zs(s).sort(function(Le,ve){return Number(Le)-Number(ve)}).map(function(Le){return s[Le].name}),e.bookSheets||(r.Sheets=n),!r.SheetNames.length&&d["!ref"]?(r.SheetNames.push("Sheet1"),r.Sheets&&(r.Sheets.Sheet1=d)):r.Preamble=d,r.Sheets&&R.forEach(function(Le,ve){r.Sheets[r.SheetNames[ve]]["!autofilter"]=Le}),r.Strings=c,r.SSF=ss(an),T.enc&&(r.Encryption=T.enc),F&&(r.Themes=F),r.Metadata={},w!==void 0&&(r.Metadata.Country=w),ne.names.length>0&&(_.Names=ne.names),r.Workbook=_,r}var ob={SI:"e0859ff2f94f6810ab9108002b27b3d9",DSI:"02d5cdd59c2e1b10939708002b2cf9ae",UDI:"05d5cdd59c2e1b10939708002b2cf9ae"};function fMe(t,e,r){var n=Xr.find(t,"/!DocumentSummaryInformation");if(n&&n.size>0)try{var a=hH(n,ok,ob.DSI);for(var s in a)e[s]=a[s]}catch(u){if(r.WTF)throw u}var i=Xr.find(t,"/!SummaryInformation");if(i&&i.size>0)try{var l=hH(i,lk,ob.SI);for(var c in l)e[c]==null&&(e[c]=l[c])}catch(u){if(r.WTF)throw u}e.HeadingPairs&&e.TitlesOfParts&&(Cre(e.HeadingPairs,e.TitlesOfParts,e,r),delete e.HeadingPairs,delete e.TitlesOfParts)}function AMe(t,e){var r=[],n=[],a=[],s=0,i,l=$V(ok,"n"),c=$V(lk,"n");if(t.Props)for(i=zs(t.Props),s=0;s<i.length;++s)(Object.prototype.hasOwnProperty.call(l,i[s])?r:Object.prototype.hasOwnProperty.call(c,i[s])?n:a).push([i[s],t.Props[i[s]]]);if(t.Custprops)for(i=zs(t.Custprops),s=0;s<i.length;++s)Object.prototype.hasOwnProperty.call(t.Props||{},i[s])||(Object.prototype.hasOwnProperty.call(l,i[s])?r:Object.prototype.hasOwnProperty.call(c,i[s])?n:a).push([i[s],t.Custprops[i[s]]]);var u=[];for(s=0;s<a.length;++s)Pre.indexOf(a[s][0])>-1||Nre.indexOf(a[s][0])>-1||a[s][1]!=null&&u.push(a[s]);n.length&&Xr.utils.cfb_add(e,"/SummaryInformation",mH(n,ob.SI,c,lk)),(r.length||u.length)&&Xr.utils.cfb_add(e,"/DocumentSummaryInformation",mH(r,ob.DSI,l,ok,u.length?u:null,ob.UDI))}function Ene(t,e){e||(e={}),SD(e),z6(),e.codepage&&q6(e.codepage);var r,n;if(t.FullPaths){if(Xr.find(t,"/encryption"))throw new Error("File is password-protected");r=Xr.find(t,"!CompObj"),n=Xr.find(t,"/Workbook")||Xr.find(t,"/Book")}else{switch(e.type){case"base64":t=Uc(Zc(t));break;case"binary":t=Uc(t);break;case"buffer":break;case"array":Array.isArray(t)||(t=Array.prototype.slice.call(t));break}Uo(t,0),n={content:t}}var a,s;if(r&&lMe(r),e.bookProps&&!e.bookSheets)a={};else{var i=En?"buffer":"array";if(n&&n.content)a=dMe(n.content,e);else if((s=Xr.find(t,"PerfectOffice_MAIN"))&&s.content)a=dp.to_workbook(s.content,(e.type=i,e));else if((s=Xr.find(t,"NativeContent_MAIN"))&&s.content)a=dp.to_workbook(s.content,(e.type=i,e));else throw(s=Xr.find(t,"MN0"))&&s.content?new Error("Unsupported Works 4 for Mac file"):new Error("Cannot find Workbook stream");e.bookVBA&&t.FullPaths&&Xr.find(t,"/_VBA_PROJECT_CUR/VBA/dir")&&(a.vbaraw=EOe(t))}var l={};return t.FullPaths&&fMe(t,l,e),a.Props=a.Custprops=l,e.bookFiles&&(a.cfb=t),a}function hMe(t,e){var r=e||{},n=Xr.utils.cfb_new({root:"R"}),a="/Workbook";switch(r.bookType||"xls"){case"xls":r.bookType="biff8";case"xla":r.bookType||(r.bookType="xla");case"biff8":a="/Workbook",r.biff=8;break;case"biff5":a="/Book",r.biff=5;break;default:throw new Error("invalid type "+r.bookType+" for XLS CFB")}return Xr.utils.cfb_add(n,a,Sne(t,r)),r.biff==8&&(t.Props||t.Custprops)&&AMe(t,n),r.biff==8&&t.vbaraw&&SOe(n,Xr.read(t.vbaraw,{type:typeof t.vbaraw=="string"?"binary":"buffer"})),n}var d2={0:{f:MDe},1:{f:GDe},2:{f:dRe},3:{f:eRe},4:{f:XDe},5:{f:lRe},6:{f:pRe},7:{f:aRe},8:{f:NRe},9:{f:wRe},10:{f:yRe},11:{f:bRe},12:{f:zDe},13:{f:ARe},14:{f:rRe},15:{f:JDe},16:{f:xne},17:{f:xRe},18:{f:iRe},19:{f:lD},20:{},21:{},22:{},23:{},24:{},25:{},26:{},27:{},28:{},29:{},30:{},31:{},32:{},33:{},34:{},35:{T:1},36:{T:-1},37:{T:1},38:{T:-1},39:{f:x8e},40:{},42:{},43:{f:pFe},44:{f:hFe},45:{f:vFe},46:{f:bFe},47:{f:yFe},48:{},49:{f:QBe},50:{},51:{f:tOe},52:{T:1},53:{T:-1},54:{T:1},55:{T:-1},56:{T:1},57:{T:-1},58:{},59:{},60:{f:Vre},62:{f:mRe},63:{f:uOe},64:{f:LRe},65:{},66:{},67:{},68:{},69:{},70:{},128:{},129:{T:1},130:{T:-1},131:{T:1,f:yl,p:0},132:{T:-1},133:{T:1},134:{T:-1},135:{T:1},136:{T:-1},137:{T:1,f:ORe},138:{T:-1},139:{T:1},140:{T:-1},141:{T:1},142:{T:-1},143:{T:1},144:{T:-1},145:{T:1},146:{T:-1},147:{f:$De},148:{f:QDe,p:16},151:{f:jRe},152:{},153:{f:m8e},154:{},155:{},156:{f:A8e},157:{},158:{},159:{T:1,f:Pke},160:{T:-1},161:{T:1,f:cg},162:{T:-1},163:{T:1},164:{T:-1},165:{T:1},166:{T:-1},167:{},168:{},169:{},170:{},171:{},172:{T:1},173:{T:-1},174:{},175:{},176:{f:CRe},177:{T:1},178:{T:-1},179:{T:1},180:{T:-1},181:{T:1},182:{T:-1},183:{T:1},184:{T:-1},185:{T:1},186:{T:-1},187:{T:1},188:{T:-1},189:{T:1},190:{T:-1},191:{T:1},192:{T:-1},193:{T:1},194:{T:-1},195:{T:1},196:{T:-1},197:{T:1},198:{T:-1},199:{T:1},200:{T:-1},201:{T:1},202:{T:-1},203:{T:1},204:{T:-1},205:{T:1},206:{T:-1},207:{T:1},208:{T:-1},209:{T:1},210:{T:-1},211:{T:1},212:{T:-1},213:{T:1},214:{T:-1},215:{T:1},216:{T:-1},217:{T:1},218:{T:-1},219:{T:1},220:{T:-1},221:{T:1},222:{T:-1},223:{T:1},224:{T:-1},225:{T:1},226:{T:-1},227:{T:1},228:{T:-1},229:{T:1},230:{T:-1},231:{T:1},232:{T:-1},233:{T:1},234:{T:-1},235:{T:1},236:{T:-1},237:{T:1},238:{T:-1},239:{T:1},240:{T:-1},241:{T:1},242:{T:-1},243:{T:1},244:{T:-1},245:{T:1},246:{T:-1},247:{T:1},248:{T:-1},249:{T:1},250:{T:-1},251:{T:1},252:{T:-1},253:{T:1},254:{T:-1},255:{T:1},256:{T:-1},257:{T:1},258:{T:-1},259:{T:1},260:{T:-1},261:{T:1},262:{T:-1},263:{T:1},264:{T:-1},265:{T:1},266:{T:-1},267:{T:1},268:{T:-1},269:{T:1},270:{T:-1},271:{T:1},272:{T:-1},273:{T:1},274:{T:-1},275:{T:1},276:{T:-1},277:{},278:{T:1},279:{T:-1},280:{T:1},281:{T:-1},282:{T:1},283:{T:1},284:{T:-1},285:{T:1},286:{T:-1},287:{T:1},288:{T:-1},289:{T:1},290:{T:-1},291:{T:1},292:{T:-1},293:{T:1},294:{T:-1},295:{T:1},296:{T:-1},297:{T:1},298:{T:-1},299:{T:1},300:{T:-1},301:{T:1},302:{T:-1},303:{T:1},304:{T:-1},305:{T:1},306:{T:-1},307:{T:1},308:{T:-1},309:{T:1},310:{T:-1},311:{T:1},312:{T:-1},313:{T:-1},314:{T:1},315:{T:-1},316:{T:1},317:{T:-1},318:{T:1},319:{T:-1},320:{T:1},321:{T:-1},322:{T:1},323:{T:-1},324:{T:1},325:{T:-1},326:{T:1},327:{T:-1},328:{T:1},329:{T:-1},330:{T:1},331:{T:-1},332:{T:1},333:{T:-1},334:{T:1},335:{f:ZFe},336:{T:-1},337:{f:aOe,T:1},338:{T:-1},339:{T:1},340:{T:-1},341:{T:1},342:{T:-1},343:{T:1},344:{T:-1},345:{T:1},346:{T:-1},347:{T:1},348:{T:-1},349:{T:1},350:{T:-1},351:{},352:{},353:{T:1},354:{T:-1},355:{f:ik},357:{},358:{},359:{},360:{T:1},361:{},362:{f:Qre},363:{},364:{},366:{},367:{},368:{},369:{},370:{},371:{},372:{T:1},373:{T:-1},374:{T:1},375:{T:-1},376:{T:1},377:{T:-1},378:{T:1},379:{T:-1},380:{T:1},381:{T:-1},382:{T:1},383:{T:-1},384:{T:1},385:{T:-1},386:{T:1},387:{T:-1},388:{T:1},389:{T:-1},390:{T:1},391:{T:-1},392:{T:1},393:{T:-1},394:{T:1},395:{T:-1},396:{},397:{},398:{},399:{},400:{},401:{T:1},403:{},404:{},405:{},406:{},407:{},408:{},409:{},410:{},411:{},412:{},413:{},414:{},415:{},416:{},417:{},418:{},419:{},420:{},421:{},422:{T:1},423:{T:1},424:{T:-1},425:{T:-1},426:{f:BRe},427:{f:PRe},428:{},429:{T:1},430:{T:-1},431:{T:1},432:{T:-1},433:{T:1},434:{T:-1},435:{T:1},436:{T:-1},437:{T:1},438:{T:-1},439:{T:1},440:{T:-1},441:{T:1},442:{T:-1},443:{T:1},444:{T:-1},445:{T:1},446:{T:-1},447:{T:1},448:{T:-1},449:{T:1},450:{T:-1},451:{T:1},452:{T:-1},453:{T:1},454:{T:-1},455:{T:1},456:{T:-1},457:{T:1},458:{T:-1},459:{T:1},460:{T:-1},461:{T:1},462:{T:-1},463:{T:1},464:{T:-1},465:{T:1},466:{T:-1},467:{T:1},468:{T:-1},469:{T:1},470:{T:-1},471:{},472:{},473:{T:1},474:{T:-1},475:{},476:{f:kRe},477:{},478:{},479:{T:1},480:{T:-1},481:{T:1},482:{T:-1},483:{T:1},484:{T:-1},485:{f:HDe},486:{T:1},487:{T:-1},488:{T:1},489:{T:-1},490:{T:1},491:{T:-1},492:{T:1},493:{T:-1},494:{f:SRe},495:{T:1},496:{T:-1},497:{T:1},498:{T:-1},499:{},500:{T:1},501:{T:-1},502:{T:1},503:{T:-1},504:{},505:{T:1},506:{T:-1},507:{},508:{T:1},509:{T:-1},510:{T:1},511:{T:-1},512:{},513:{},514:{T:1},515:{T:-1},516:{T:1},517:{T:-1},518:{T:1},519:{T:-1},520:{T:1},521:{T:-1},522:{},523:{},524:{},525:{},526:{},527:{},528:{T:1},529:{T:-1},530:{T:1},531:{T:-1},532:{T:1},533:{T:-1},534:{},535:{},536:{},537:{},538:{T:1},539:{T:-1},540:{T:1},541:{T:-1},542:{T:1},548:{},549:{},550:{f:ik},551:{},552:{},553:{},554:{T:1},555:{T:-1},556:{T:1},557:{T:-1},558:{T:1},559:{T:-1},560:{T:1},561:{T:-1},562:{},564:{},565:{T:1},566:{T:-1},569:{T:1},570:{T:-1},572:{},573:{T:1},574:{T:-1},577:{},578:{},579:{},580:{},581:{},582:{},583:{},584:{},585:{},586:{},587:{},588:{T:-1},589:{},590:{T:1},591:{T:-1},592:{T:1},593:{T:-1},594:{T:1},595:{T:-1},596:{},597:{T:1},598:{T:-1},599:{T:1},600:{T:-1},601:{T:1},602:{T:-1},603:{T:1},604:{T:-1},605:{T:1},606:{T:-1},607:{},608:{T:1},609:{T:-1},610:{},611:{T:1},612:{T:-1},613:{T:1},614:{T:-1},615:{T:1},616:{T:-1},617:{T:1},618:{T:-1},619:{T:1},620:{T:-1},625:{},626:{T:1},627:{T:-1},628:{T:1},629:{T:-1},630:{T:1},631:{T:-1},632:{f:bOe},633:{T:1},634:{T:-1},635:{T:1,f:vOe},636:{T:-1},637:{f:KBe},638:{T:1},639:{},640:{T:-1},641:{T:1},642:{T:-1},643:{T:1},644:{},645:{T:-1},646:{T:1},648:{T:1},649:{},650:{T:-1},651:{f:r8e},652:{},653:{T:1},654:{T:-1},655:{T:1},656:{T:-1},657:{T:1},658:{T:-1},659:{},660:{T:1},661:{},662:{T:-1},663:{},664:{T:1},665:{},666:{T:-1},667:{},668:{},669:{},671:{T:1},672:{T:-1},673:{T:1},674:{T:-1},675:{},676:{},677:{},678:{},679:{},680:{},681:{},1024:{},1025:{},1026:{T:1},1027:{T:-1},1028:{T:1},1029:{T:-1},1030:{},1031:{T:1},1032:{T:-1},1033:{T:1},1034:{T:-1},1035:{},1036:{},1037:{},1038:{T:1},1039:{T:-1},1040:{},1041:{T:1},1042:{T:-1},1043:{},1044:{},1045:{},1046:{T:1},1047:{T:-1},1048:{T:1},1049:{T:-1},1050:{},1051:{T:1},1052:{T:1},1053:{f:URe},1054:{T:1},1055:{},1056:{T:1},1057:{T:-1},1058:{T:1},1059:{T:-1},1061:{},1062:{T:1},1063:{T:-1},1064:{T:1},1065:{T:-1},1066:{T:1},1067:{T:-1},1068:{T:1},1069:{T:-1},1070:{T:1},1071:{T:-1},1072:{T:1},1073:{T:-1},1075:{T:1},1076:{T:-1},1077:{T:1},1078:{T:-1},1079:{T:1},1080:{T:-1},1081:{T:1},1082:{T:-1},1083:{T:1},1084:{T:-1},1085:{},1086:{T:1},1087:{T:-1},1088:{T:1},1089:{T:-1},1090:{T:1},1091:{T:-1},1092:{T:1},1093:{T:-1},1094:{T:1},1095:{T:-1},1096:{},1097:{T:1},1098:{},1099:{T:-1},1100:{T:1},1101:{T:-1},1102:{},1103:{},1104:{},1105:{},1111:{},1112:{},1113:{T:1},1114:{T:-1},1115:{T:1},1116:{T:-1},1117:{},1118:{T:1},1119:{T:-1},1120:{T:1},1121:{T:-1},1122:{T:1},1123:{T:-1},1124:{T:1},1125:{T:-1},1126:{},1128:{T:1},1129:{T:-1},1130:{},1131:{T:1},1132:{T:-1},1133:{T:1},1134:{T:-1},1135:{T:1},1136:{T:-1},1137:{T:1},1138:{T:-1},1139:{T:1},1140:{T:-1},1141:{},1142:{T:1},1143:{T:-1},1144:{T:1},1145:{T:-1},1146:{},1147:{T:1},1148:{T:-1},1149:{T:1},1150:{T:-1},1152:{T:1},1153:{T:-1},1154:{T:-1},1155:{T:-1},1156:{T:-1},1157:{T:1},1158:{T:-1},1159:{T:1},1160:{T:-1},1161:{T:1},1162:{T:-1},1163:{T:1},1164:{T:-1},1165:{T:1},1166:{T:-1},1167:{T:1},1168:{T:-1},1169:{T:1},1170:{T:-1},1171:{},1172:{T:1},1173:{T:-1},1177:{},1178:{T:1},1180:{},1181:{},1182:{},2048:{T:1},2049:{T:-1},2050:{},2051:{T:1},2052:{T:-1},2053:{},2054:{},2055:{T:1},2056:{T:-1},2057:{T:1},2058:{T:-1},2060:{},2067:{},2068:{T:1},2069:{T:-1},2070:{},2071:{},2072:{T:1},2073:{T:-1},2075:{},2076:{},2077:{T:1},2078:{T:-1},2079:{},2080:{T:1},2081:{T:-1},2082:{},2083:{T:1},2084:{T:-1},2085:{T:1},2086:{T:-1},2087:{T:1},2088:{T:-1},2089:{T:1},2090:{T:-1},2091:{},2092:{},2093:{T:1},2094:{T:-1},2095:{},2096:{T:1},2097:{T:-1},2098:{T:1},2099:{T:-1},2100:{T:1},2101:{T:-1},2102:{},2103:{T:1},2104:{T:-1},2105:{},2106:{T:1},2107:{T:-1},2108:{},2109:{T:1},2110:{T:-1},2111:{T:1},2112:{T:-1},2113:{T:1},2114:{T:-1},2115:{},2116:{},2117:{},2118:{T:1},2119:{T:-1},2120:{},2121:{T:1},2122:{T:-1},2123:{T:1},2124:{T:-1},2125:{},2126:{T:1},2127:{T:-1},2128:{},2129:{T:1},2130:{T:-1},2131:{T:1},2132:{T:-1},2133:{T:1},2134:{},2135:{},2136:{},2137:{T:1},2138:{T:-1},2139:{T:1},2140:{T:-1},2141:{},3072:{},3073:{},4096:{T:1},4097:{T:-1},5002:{T:1},5003:{T:-1},5081:{T:1},5082:{T:-1},5083:{},5084:{T:1},5085:{T:-1},5086:{T:1},5087:{T:-1},5088:{},5089:{},5090:{},5092:{T:1},5093:{T:-1},5094:{},5095:{T:1},5096:{T:-1},5097:{},5099:{},65535:{n:""}},hk={6:{f:eB},10:{f:Lh},12:{f:gi},13:{f:gi},14:{f:ri},15:{f:ri},16:{f:ml},17:{f:ri},18:{f:ri},19:{f:gi},20:{f:bH},21:{f:bH},23:{f:Qre},24:{f:NH},25:{f:ri},26:{},27:{},28:{f:UTe},29:{},34:{f:ri},35:{f:wH},38:{f:ml},39:{f:ml},40:{f:ml},41:{f:ml},42:{f:ri},43:{f:ri},47:{f:Jke},49:{f:ATe},51:{f:gi},60:{},61:{f:lTe},64:{f:ri},65:{f:fTe},66:{f:gi},77:{},80:{},81:{},82:{},85:{f:gi},89:{},90:{},91:{},92:{f:YPe},93:{f:HTe},94:{},95:{f:ri},96:{},97:{},99:{f:ri},125:{f:Vre},128:{f:ITe},129:{f:ZPe},130:{f:gi},131:{f:ri},132:{f:ri},133:{f:eTe},134:{},140:{f:YTe},141:{f:gi},144:{},146:{f:eke},151:{},152:{},153:{},154:{},155:{},156:{f:gi},157:{},158:{},160:{f:oke},161:{f:nke},174:{},175:{},176:{},177:{},178:{},180:{},181:{},182:{},184:{},185:{},189:{f:CTe},190:{f:_Te},193:{f:Lh},197:{},198:{},199:{},200:{},201:{},202:{f:ri},203:{},204:{},205:{},206:{},207:{},208:{},209:{},210:{},211:{},213:{},215:{},216:{},217:{},218:{f:gi},220:{},221:{f:ri},222:{},224:{f:STe},225:{f:XPe},226:{f:Lh},227:{},229:{f:QTe},233:{},235:{},236:{},237:{},239:{},240:{},241:{},242:{},244:{},245:{},246:{},247:{},248:{},249:{},251:{},252:{f:rTe},253:{f:mTe},255:{f:aTe},256:{},259:{},290:{},311:{},312:{},315:{},317:{f:Tre},318:{},319:{},320:{},330:{},331:{},333:{},334:{},335:{},336:{},337:{},338:{},339:{},340:{},351:{},352:{f:ri},353:{f:Lh},401:{},402:{},403:{},404:{},405:{},406:{},407:{},408:{},425:{},426:{},427:{},428:{},429:{},430:{f:kTe},431:{f:ri},432:{},433:{},434:{},437:{},438:{f:GTe},439:{f:ri},440:{f:qTe},441:{},442:{f:uw},443:{},444:{f:gi},445:{},446:{},448:{f:Lh},449:{f:oTe,r:2},450:{f:Lh},512:{f:xH},513:{f:ike},515:{f:PTe},516:{f:gTe},517:{f:yH},519:{f:lke},520:{f:sTe},523:{},545:{f:CH},549:{f:gH},566:{},574:{f:uTe},638:{f:NTe},659:{},1048:{},1054:{f:vTe},1084:{},1212:{f:RTe},2048:{f:WTe},2049:{},2050:{},2051:{},2052:{},2053:{},2054:{},2055:{},2056:{},2057:{f:IC},2058:{},2059:{},2060:{},2061:{},2062:{},2063:{},2064:{},2066:{},2067:{},2128:{},2129:{},2130:{},2131:{},2132:{},2133:{},2134:{},2135:{},2136:{},2137:{},2138:{},2146:{},2147:{r:12},2148:{},2149:{},2150:{},2151:{f:Lh},2152:{},2154:{},2155:{},2156:{},2161:{},2162:{},2164:{},2165:{},2166:{},2167:{},2168:{},2169:{},2170:{},2171:{},2172:{f:tke,r:12},2173:{f:YFe,r:12},2174:{},2175:{},2180:{},2181:{},2182:{},2183:{},2184:{},2185:{},2186:{},2187:{},2188:{f:ri,r:12},2189:{},2190:{r:12},2191:{},2192:{},2194:{},2195:{},2196:{f:DTe,r:12},2197:{},2198:{f:KFe,r:12},2199:{},2200:{},2201:{},2202:{f:MTe,r:12},2203:{f:Lh},2204:{},2205:{},2206:{},2207:{},2211:{f:iTe},2212:{},2213:{},2214:{},2215:{},4097:{},4098:{},4099:{},4102:{},4103:{},4105:{},4106:{},4107:{},4108:{},4109:{},4116:{},4117:{},4118:{},4119:{},4120:{},4121:{},4122:{},4123:{},4124:{},4125:{},4126:{},4127:{},4128:{},4129:{},4130:{},4132:{},4133:{},4134:{f:gi},4135:{},4146:{},4147:{},4148:{},4149:{},4154:{},4156:{},4157:{},4158:{},4159:{},4160:{},4161:{},4163:{},4164:{f:ake},4165:{},4166:{},4168:{},4170:{},4171:{},4174:{},4175:{},4176:{},4177:{},4187:{},4188:{f:ZTe},4189:{},4191:{},4192:{},4193:{},4194:{},4195:{},4196:{},4197:{},4198:{},4199:{},4200:{},0:{f:xH},1:{},2:{f:Ake},3:{f:dke},4:{f:uke},5:{f:yH},7:{f:mke},8:{},9:{f:IC},11:{},22:{f:gi},30:{f:bTe},31:{},32:{},33:{f:CH},36:{},37:{f:gH},50:{f:pke},62:{},52:{},67:{},68:{f:gi},69:{},86:{},126:{},127:{f:cke},135:{},136:{},137:{},145:{},148:{},149:{},150:{},169:{},171:{},188:{},191:{},192:{},194:{},195:{},214:{f:gke},223:{},234:{},354:{},421:{},518:{f:eB},521:{f:IC},536:{f:NH},547:{f:wH},561:{},579:{},1030:{f:eB},1033:{f:IC},1091:{},2157:{},2163:{},2177:{},2240:{},2241:{},2242:{},2243:{},2244:{},2245:{},2246:{},2247:{},2248:{},2249:{},2250:{},2251:{},2262:{r:12},29282:{}};function wr(t,e,r,n){var a=e;if(!isNaN(a)){var s=n||(r||[]).length||0,i=t.next(4);i.write_shift(2,a),i.write_shift(2,s),s>0&&sD(r)&&t.push(r)}}function mMe(t,e,r,n){var a=(r||[]).length||0;if(a<=8224)return wr(t,e,r,a);var s=e;if(!isNaN(s)){for(var i=r.parts||[],l=0,c=0,u=0;u+(i[l]||8224)<=8224;)u+=i[l]||8224,l++;var d=t.next(4);for(d.write_shift(2,s),d.write_shift(2,u),t.push(r.slice(c,c+u)),c+=u;c<a;){for(d=t.next(4),d.write_shift(2,60),u=0;u+(i[l]||8224)<=8224;)u+=i[l]||8224,l++;d.write_shift(2,u),t.push(r.slice(c,c+u)),c+=u}}}function hw(t,e,r){return t||(t=Yt(7)),t.write_shift(2,e),t.write_shift(2,r),t.write_shift(2,0),t.write_shift(1,0),t}function pMe(t,e,r,n){var a=Yt(9);return hw(a,t,e),kre(r,n||"b",a),a}function gMe(t,e,r){var n=Yt(8+2*r.length);return hw(n,t,e),n.write_shift(1,r.length),n.write_shift(r.length,r,"sbcs"),n.l<n.length?n.slice(0,n.l):n}function xMe(t,e,r,n){if(e.v!=null)switch(e.t){case"d":case"n":var a=e.t=="d"?Gi(as(e.v)):e.v;a==(a|0)&&a>=0&&a<65536?wr(t,2,hke(r,n,a)):wr(t,3,fke(r,n,a));return;case"b":case"e":wr(t,5,pMe(r,n,e.v,e.t));return;case"s":case"str":wr(t,4,gMe(r,n,(e.v||"").slice(0,255)));return}wr(t,1,hw(null,r,n))}function vMe(t,e,r,n){var a=Array.isArray(e),s=Xn(e["!ref"]||"A1"),i,l="",c=[];if(s.e.c>255||s.e.r>16383){if(n.WTF)throw new Error("Range "+(e["!ref"]||"A1")+" exceeds format limit A1:IV16384");s.e.c=Math.min(s.e.c,255),s.e.r=Math.min(s.e.c,16383),i=vn(s)}for(var u=s.s.r;u<=s.e.r;++u){l=di(u);for(var d=s.s.c;d<=s.e.c;++d){u===s.s.r&&(c[d]=Bs(d)),i=c[d]+l;var f=a?(e[u]||[])[d]:e[i];f&&xMe(t,f,u,d)}}}function yMe(t,e){for(var r=e||{},n=hc(),a=0,s=0;s<t.SheetNames.length;++s)t.SheetNames[s]==r.sheet&&(a=s);if(a==0&&r.sheet&&t.SheetNames[0]!=r.sheet)throw new Error("Sheet not found: "+r.sheet);return wr(n,r.biff==4?1033:r.biff==3?521:9,mD(t,16,r)),vMe(n,t.Sheets[t.SheetNames[a]],a,r),wr(n,10),n.end()}function bMe(t,e,r){wr(t,49,hTe({sz:12,name:"Arial"},r))}function wMe(t,e,r){e&&[[5,8],[23,26],[41,44],[50,392]].forEach(function(n){for(var a=n[0];a<=n[1];++a)e[a]!=null&&wr(t,1054,yTe(a,e[a],r))})}function NMe(t,e){var r=Yt(19);r.write_shift(4,2151),r.write_shift(4,0),r.write_shift(4,0),r.write_shift(2,3),r.write_shift(1,1),r.write_shift(4,0),wr(t,2151,r),r=Yt(39),r.write_shift(4,2152),r.write_shift(4,0),r.write_shift(4,0),r.write_shift(2,3),r.write_shift(1,0),r.write_shift(4,0),r.write_shift(2,1),r.write_shift(4,4),r.write_shift(2,0),Mre(Xn(e["!ref"]||"A1"),r),r.write_shift(4,4),wr(t,2152,r)}function CMe(t,e){for(var r=0;r<16;++r)wr(t,224,vH({numFmtId:0,style:!0},0,e));e.cellXfs.forEach(function(n){wr(t,224,vH(n,0,e))})}function _Me(t,e){for(var r=0;r<e["!links"].length;++r){var n=e["!links"][r];wr(t,440,zTe(n)),n[1].Tooltip&&wr(t,2048,XTe(n))}delete e["!links"]}function EMe(t,e){if(e){var r=0;e.forEach(function(n,a){++r<=256&&n&&wr(t,125,rke(k4(a,n),a))})}}function SMe(t,e,r,n,a){var s=16+im(a.cellXfs,e,a);if(e.v==null&&!e.bf){wr(t,513,Rp(r,n,s));return}if(e.bf)wr(t,6,Z6e(e,r,n,a,s));else switch(e.t){case"d":case"n":var i=e.t=="d"?Gi(as(e.v)):e.v;wr(t,515,TTe(r,n,i,s));break;case"b":case"e":wr(t,517,BTe(r,n,e.v,s,a,e.t));break;case"s":case"str":if(a.bookSST){var l=ND(a.Strings,e.v,a.revStrings);wr(t,253,pTe(r,n,l,s))}else wr(t,516,xTe(r,n,(e.v||"").slice(0,255),s,a));break;default:wr(t,513,Rp(r,n,s))}}function IMe(t,e,r){var n=hc(),a=r.SheetNames[t],s=r.Sheets[a]||{},i=(r||{}).Workbook||{},l=(i.Sheets||[])[t]||{},c=Array.isArray(s),u=e.biff==8,d,f="",h=[],A=Xn(s["!ref"]||"A1"),m=u?65536:16384;if(A.e.c>255||A.e.r>=m){if(e.WTF)throw new Error("Range "+(s["!ref"]||"A1")+" exceeds format limit A1:IV16384");A.e.c=Math.min(A.e.c,255),A.e.r=Math.min(A.e.c,m-1)}wr(n,2057,mD(r,16,e)),wr(n,13,Bu(1)),wr(n,12,Bu(100)),wr(n,15,Dl(!0)),wr(n,17,Dl(!1)),wr(n,16,Op(.001)),wr(n,95,Dl(!0)),wr(n,42,Dl(!1)),wr(n,43,Dl(!1)),wr(n,130,Bu(1)),wr(n,128,jTe()),wr(n,131,Dl(!1)),wr(n,132,Dl(!1)),u&&EMe(n,s["!cols"]),wr(n,512,wTe(A,e)),u&&(s["!links"]=[]);for(var p=A.s.r;p<=A.e.r;++p){f=di(p);for(var g=A.s.c;g<=A.e.c;++g){p===A.s.r&&(h[g]=Bs(g)),d=h[g]+f;var x=c?(s[p]||[])[g]:s[d];x&&(SMe(n,x,p,g,e),u&&x.l&&s["!links"].push([d,x.l]))}}var y=l.CodeName||l.name||a;return u&&wr(n,574,dTe((i.Views||[])[0])),u&&(s["!merges"]||[]).length&&wr(n,229,VTe(s["!merges"])),u&&_Me(n,s),wr(n,442,Fre(y)),u&&NMe(n,s),wr(n,10),n.end()}function jMe(t,e,r){var n=hc(),a=(t||{}).Workbook||{},s=a.Sheets||[],i=a.WBProps||{},l=r.biff==8,c=r.biff==5;if(wr(n,2057,mD(t,5,r)),r.bookType=="xla"&&wr(n,135),wr(n,225,l?Bu(1200):null),wr(n,193,BPe(2)),c&&wr(n,191),c&&wr(n,192),wr(n,226),wr(n,92,JPe("SheetJS",r)),wr(n,66,Bu(l?1200:1252)),l&&wr(n,353,Bu(0)),l&&wr(n,448),wr(n,317,ske(t.SheetNames.length)),l&&t.vbaraw&&wr(n,211),l&&t.vbaraw){var u=i.CodeName||"ThisWorkbook";wr(n,442,Fre(u))}wr(n,156,Bu(17)),wr(n,25,Dl(!1)),wr(n,18,Dl(!1)),wr(n,19,Bu(0)),l&&wr(n,431,Dl(!1)),l&&wr(n,444,Bu(0)),wr(n,61,cTe()),wr(n,64,Dl(!1)),wr(n,141,Bu(0)),wr(n,34,Dl(o8e(t)=="true")),wr(n,14,Dl(!0)),l&&wr(n,439,Dl(!1)),wr(n,218,Bu(0)),bMe(n,t,r),wMe(n,t.SSF,r),CMe(n,r),l&&wr(n,352,Dl(!1));var d=n.end(),f=hc();l&&wr(f,140,JTe()),l&&r.Strings&&mMe(f,252,nTe(r.Strings)),wr(f,10);var h=f.end(),A=hc(),m=0,p=0;for(p=0;p<t.SheetNames.length;++p)m+=(l?12:11)+(l?2:1)*t.SheetNames[p].length;var g=d.length+m+h.length;for(p=0;p<t.SheetNames.length;++p){var x=s[p]||{};wr(A,133,tTe({pos:g,hs:x.Hidden||0,dt:0,name:t.SheetNames[p]},r)),g+=e[p].length}var y=A.end();if(m!=y.length)throw new Error("BS8 "+m+" != "+y.length);var b=[];return d.length&&b.push(d),y.length&&b.push(y),h.length&&b.push(h),fo(b)}function BMe(t,e){var r=e||{},n=[];t&&!t.SSF&&(t.SSF=ss(an)),t&&t.SSF&&(Vv(),E4(t.SSF),r.revssf=I4(t.SSF),r.revssf[t.SSF[65535]]=0,r.ssf=t.SSF),r.Strings=[],r.Strings.Count=0,r.Strings.Unique=0,ID(r),r.cellXfs=[],im(r.cellXfs,{},{revssf:{General:0}}),t.Props||(t.Props={});for(var a=0;a<t.SheetNames.length;++a)n[n.length]=IMe(a,r,t);return n.unshift(jMe(t,n,r)),fo(n)}function Sne(t,e){for(var r=0;r<=t.SheetNames.length;++r){var n=t.Sheets[t.SheetNames[r]];if(!(!n||!n["!ref"])){var a=mc(n["!ref"]);a.e.c>255&&typeof console<"u"&&console.error&&console.error("Worksheet '"+t.SheetNames[r]+"' extends beyond column IV (255).  Data may be lost.")}}var s=e||{};switch(s.biff||2){case 8:case 5:return BMe(t,e);case 4:case 3:case 2:return yMe(t,e)}throw new Error("invalid type "+s.bookType+" for BIFF")}function FH(t,e){var r=e||{},n=r.dense?[]:{};t=t.replace(/<!--.*?-->/g,"");var a=t.match(/<table/i);if(!a)throw new Error("Invalid HTML: could not find <table>");var s=t.match(/<\/table/i),i=a.index,l=s&&s.index||t.length,c=hBe(t.slice(i,l),/(:?<tr[^>]*>)/i,"<tr>"),u=-1,d=0,f=0,h=0,A={s:{r:1e7,c:1e7},e:{r:0,c:0}},m=[];for(i=0;i<c.length;++i){var p=c[i].trim(),g=p.slice(0,3).toLowerCase();if(g=="<tr"){if(++u,r.sheetRows&&r.sheetRows<=u){--u;break}d=0;continue}if(!(g!="<td"&&g!="<th")){var x=p.split(/<\/t[dh]>/i);for(l=0;l<x.length;++l){var y=x[l].trim();if(y.match(/<t[dh]/i)){for(var b=y,w=0;b.charAt(0)=="<"&&(w=b.indexOf(">"))>-1;)b=b.slice(w+1);for(var j=0;j<m.length;++j){var I=m[j];I.s.c==d&&I.s.r<u&&u<=I.e.r&&(d=I.e.c+1,j=-1)}var _=ln(y.slice(0,y.indexOf(">")));h=_.colspan?+_.colspan:1,((f=+_.rowspan)>1||h>1)&&m.push({s:{r:u,c:d},e:{r:u+(f||1)-1,c:d+h-1}});var E=_.t||_["data-t"]||"";if(!b.length){d+=h;continue}if(b=Yte(b),A.s.r>u&&(A.s.r=u),A.e.r<u&&(A.e.r=u),A.s.c>d&&(A.s.c=d),A.e.c<d&&(A.e.c=d),!b.length){d+=h;continue}var S={t:"s",v:b};r.raw||!b.trim().length||E=="s"||(b==="TRUE"?S={t:"b",v:!0}:b==="FALSE"?S={t:"b",v:!1}:isNaN(Id(b))?isNaN(uv(b).getDate())||(S={t:"d",v:as(b)},r.cellDates||(S={t:"n",v:Gi(S.v)}),S.z=r.dateNF||an[14]):S={t:"n",v:Id(b)}),r.dense?(n[u]||(n[u]=[]),n[u][d]=S):n[sn({r:u,c:d})]=S,d+=h}}}}return n["!ref"]=vn(A),m.length&&(n["!merges"]=m),n}function PMe(t,e,r,n){for(var a=t["!merges"]||[],s=[],i=e.s.c;i<=e.e.c;++i){for(var l=0,c=0,u=0;u<a.length;++u)if(!(a[u].s.r>r||a[u].s.c>i)&&!(a[u].e.r<r||a[u].e.c<i)){if(a[u].s.r<r||a[u].s.c<i){l=-1;break}l=a[u].e.r-a[u].s.r+1,c=a[u].e.c-a[u].s.c+1;break}if(!(l<0)){var d=sn({r,c:i}),f=n.dense?(t[r]||[])[i]:t[d],h=f&&f.v!=null&&(f.h||rD(f.w||(UA(f),f.w)||""))||"",A={};l>1&&(A.rowspan=l),c>1&&(A.colspan=c),n.editable?h='<span contenteditable="true">'+h+"</span>":f&&(A["data-t"]=f&&f.t||"z",f.v!=null&&(A["data-v"]=f.v),f.z!=null&&(A["data-z"]=f.z),f.l&&(f.l.Target||"#").charAt(0)!="#"&&(h='<a href="'+f.l.Target+'">'+h+"</a>")),A.id=(n.id||"sjs")+"-"+d,s.push(br("td",h,A))}}var m="<tr>";return m+s.join("")+"</tr>"}var TMe='<html><head><meta charset="utf-8"/><title>SheetJS Table Export</title></head><body>',kMe="</body></html>";function FMe(t,e){var r=t.match(/<table[\s\S]*?>[\s\S]*?<\/table>/gi);if(!r||r.length==0)throw new Error("Invalid HTML: could not find <table>");if(r.length==1)return sm(FH(r[0],e),e);var n=PD();return r.forEach(function(a,s){TD(n,FH(a,e),"Sheet"+(s+1))}),n}function OMe(t,e,r){var n=[];return n.join("")+"<table"+(r&&r.id?' id="'+r.id+'"':"")+">"}function Ine(t,e){var r=e||{},n=r.header!=null?r.header:TMe,a=r.footer!=null?r.footer:kMe,s=[n],i=mc(t["!ref"]);r.dense=Array.isArray(t),s.push(OMe(t,i,r));for(var l=i.s.r;l<=i.e.r;++l)s.push(PMe(t,i,l,r));return s.push("</table>"+a),s.join("")}function jne(t,e,r){var n=r||{},a=0,s=0;if(n.origin!=null)if(typeof n.origin=="number")a=n.origin;else{var i=typeof n.origin=="string"?Ps(n.origin):n.origin;a=i.r,s=i.c}var l=e.getElementsByTagName("tr"),c=Math.min(n.sheetRows||1e7,l.length),u={s:{r:0,c:0},e:{r:a,c:s}};if(t["!ref"]){var d=mc(t["!ref"]);u.s.r=Math.min(u.s.r,d.s.r),u.s.c=Math.min(u.s.c,d.s.c),u.e.r=Math.max(u.e.r,d.e.r),u.e.c=Math.max(u.e.c,d.e.c),a==-1&&(u.e.r=a=d.e.r+1)}var f=[],h=0,A=t["!rows"]||(t["!rows"]=[]),m=0,p=0,g=0,x=0,y=0,b=0;for(t["!cols"]||(t["!cols"]=[]);m<l.length&&p<c;++m){var w=l[m];if(OH(w)){if(n.display)continue;A[p]={hidden:!0}}var j=w.children;for(g=x=0;g<j.length;++g){var I=j[g];if(!(n.display&&OH(I))){var _=I.hasAttribute("data-v")?I.getAttribute("data-v"):I.hasAttribute("v")?I.getAttribute("v"):Yte(I.innerHTML),E=I.getAttribute("data-z")||I.getAttribute("z");for(h=0;h<f.length;++h){var S=f[h];S.s.c==x+s&&S.s.r<p+a&&p+a<=S.e.r&&(x=S.e.c+1-s,h=-1)}b=+I.getAttribute("colspan")||1,((y=+I.getAttribute("rowspan")||1)>1||b>1)&&f.push({s:{r:p+a,c:x+s},e:{r:p+a+(y||1)-1,c:x+s+(b||1)-1}});var k={t:"s",v:_},P=I.getAttribute("data-t")||I.getAttribute("t")||"";_!=null&&(_.length==0?k.t=P||"z":n.raw||_.trim().length==0||P=="s"||(_==="TRUE"?k={t:"b",v:!0}:_==="FALSE"?k={t:"b",v:!1}:isNaN(Id(_))?isNaN(uv(_).getDate())||(k={t:"d",v:as(_)},n.cellDates||(k={t:"n",v:Gi(k.v)}),k.z=n.dateNF||an[14]):k={t:"n",v:Id(_)})),k.z===void 0&&E!=null&&(k.z=E);var T="",F=I.getElementsByTagName("A");if(F&&F.length)for(var Y=0;Y<F.length&&!(F[Y].hasAttribute("href")&&(T=F[Y].getAttribute("href"),T.charAt(0)!="#"));++Y);T&&T.charAt(0)!="#"&&(k.l={Target:T}),n.dense?(t[p+a]||(t[p+a]=[]),t[p+a][x+s]=k):t[sn({c:x+s,r:p+a})]=k,u.e.c<x+s&&(u.e.c=x+s),x+=b}}++p}return f.length&&(t["!merges"]=(t["!merges"]||[]).concat(f)),u.e.r=Math.max(u.e.r,p-1+a),t["!ref"]=vn(u),p>=c&&(t["!fullref"]=vn((u.e.r=l.length-m+p-1+a,u))),t}function Bne(t,e){var r=e||{},n=r.dense?[]:{};return jne(n,t,e)}function DMe(t,e){return sm(Bne(t,e),e)}function OH(t){var e="",r=RMe(t);return r&&(e=r(t).getPropertyValue("display")),e||(e=t.style&&t.style.display),e==="none"}function RMe(t){return t.ownerDocument.defaultView&&typeof t.ownerDocument.defaultView.getComputedStyle=="function"?t.ownerDocument.defaultView.getComputedStyle:typeof getComputedStyle=="function"?getComputedStyle:null}function MMe(t){var e=t.replace(/[\t\r\n]/g," ").trim().replace(/ +/g," ").replace(/<text:s\/>/g," ").replace(/<text:s text:c="(\d+)"\/>/g,function(n,a){return Array(parseInt(a,10)+1).join(" ")}).replace(/<text:tab[^>]*\/>/g,"	").replace(/<text:line-break\/>/g,`
`),r=Wn(e.replace(/<[^>]*>/g,""));return[r]}var DH={day:["d","dd"],month:["m","mm"],year:["y","yy"],hours:["h","hh"],minutes:["m","mm"],seconds:["s","ss"],"am-pm":["A/P","AM/PM"],"day-of-week":["ddd","dddd"],era:["e","ee"],quarter:["\\Qm",'m\\"th quarter"']};function Pne(t,e){var r=e||{},n=nD(t),a=[],s,i,l={name:""},c="",u=0,d,f,h={},A=[],m=r.dense?[]:{},p,g,x={value:""},y="",b=0,w=[],j=-1,I=-1,_={s:{r:1e6,c:1e7},e:{r:0,c:0}},E=0,S={},k=[],P={},T=0,F=0,Y=[],he=1,ue=1,fe=[],me={Names:[]},ne={},Pe=["",""],Ie=[],O={},H="",R=0,M=!1,K=!1,W=0;for(s2.lastIndex=0,n=n.replace(/<!--([\s\S]*?)-->/mg,"").replace(/<!DOCTYPE[^\[]*\[[^\]]*\]>/gm,"");p=s2.exec(n);)switch(p[3]=p[3].replace(/_.*$/,"")){case"table":case"":p[1]==="/"?(_.e.c>=_.s.c&&_.e.r>=_.s.r?m["!ref"]=vn(_):m["!ref"]="A1:A1",r.sheetRows>0&&r.sheetRows<=_.e.r&&(m["!fullref"]=m["!ref"],_.e.r=r.sheetRows-1,m["!ref"]=vn(_)),k.length&&(m["!merges"]=k),Y.length&&(m["!rows"]=Y),d.name=d.||d.name,typeof JSON<"u"&&JSON.stringify(d),A.push(d.name),h[d.name]=m,K=!1):p[0].charAt(p[0].length-2)!=="/"&&(d=ln(p[0],!1),j=I=-1,_.s.r=_.s.c=1e7,_.e.r=_.e.c=0,m=r.dense?[]:{},k=[],Y=[],K=!0);break;case"table-row-group":p[1]==="/"?--E:++E;break;case"table-row":case"":if(p[1]==="/"){j+=he,he=1;break}if(f=ln(p[0],!1),f.?j=f.-1:j==-1&&(j=0),he=+f["number-rows-repeated"]||1,he<10)for(W=0;W<he;++W)E>0&&(Y[j+W]={level:E});I=-1;break;case"covered-table-cell":p[1]!=="/"&&++I,r.sheetStubs&&(r.dense?(m[j]||(m[j]=[]),m[j][I]={t:"z"}):m[sn({r:j,c:I})]={t:"z"}),y="",w=[];break;case"table-cell":case"":if(p[0].charAt(p[0].length-2)==="/")++I,x=ln(p[0],!1),ue=parseInt(x["number-columns-repeated"]||"1",10),g={t:"z",v:null},x.formula&&r.cellFormula!=!1&&(g.f=PH(Wn(x.formula))),(x.||x["value-type"])=="string"&&(g.t="s",g.v=Wn(x["string-value"]||""),r.dense?(m[j]||(m[j]=[]),m[j][I]=g):m[sn({r:j,c:I})]=g),I+=ue-1;else if(p[1]!=="/"){++I,y="",b=0,w=[],ue=1;var D=he?j+he-1:j;if(I>_.e.c&&(_.e.c=I),I<_.s.c&&(_.s.c=I),j<_.s.r&&(_.s.r=j),D>_.e.r&&(_.e.r=D),x=ln(p[0],!1),Ie=[],O={},g={t:x.||x["value-type"],v:null},r.cellFormula)if(x.formula&&(x.formula=Wn(x.formula)),x["number-matrix-columns-spanned"]&&x["number-matrix-rows-spanned"]&&(T=parseInt(x["number-matrix-rows-spanned"],10)||0,F=parseInt(x["number-matrix-columns-spanned"],10)||0,P={s:{r:j,c:I},e:{r:j+T-1,c:I+F-1}},g.F=vn(P),fe.push([P,g.F])),x.formula)g.f=PH(x.formula);else for(W=0;W<fe.length;++W)j>=fe[W][0].s.r&&j<=fe[W][0].e.r&&I>=fe[W][0].s.c&&I<=fe[W][0].e.c&&(g.F=fe[W][1]);switch((x["number-columns-spanned"]||x["number-rows-spanned"])&&(T=parseInt(x["number-rows-spanned"],10)||0,F=parseInt(x["number-columns-spanned"],10)||0,P={s:{r:j,c:I},e:{r:j+T-1,c:I+F-1}},k.push(P)),x["number-columns-repeated"]&&(ue=parseInt(x["number-columns-repeated"],10)),g.t){case"boolean":g.t="b",g.v=es(x["boolean-value"]);break;case"float":g.t="n",g.v=parseFloat(x.value);break;case"percentage":g.t="n",g.v=parseFloat(x.value);break;case"currency":g.t="n",g.v=parseFloat(x.value);break;case"date":g.t="d",g.v=as(x["date-value"]),r.cellDates||(g.t="n",g.v=Gi(g.v)),g.z="m/d/yy";break;case"time":g.t="n",g.v=dBe(x["time-value"])/86400,r.cellDates&&(g.t="d",g.v=j4(g.v)),g.z="HH:MM:SS";break;case"number":g.t="n",g.v=parseFloat(x.);break;default:if(g.t==="string"||g.t==="text"||!g.t)g.t="s",x["string-value"]!=null&&(y=Wn(x["string-value"]),w=[]);else throw new Error("Unsupported value type "+g.t)}}else{if(M=!1,g.t==="s"&&(g.v=y||"",w.length&&(g.R=w),M=b==0),ne.Target&&(g.l=ne),Ie.length>0&&(g.c=Ie,Ie=[]),y&&r.cellText!==!1&&(g.w=y),M&&(g.t="z",delete g.v),(!M||r.sheetStubs)&&!(r.sheetRows&&r.sheetRows<=j))for(var L=0;L<he;++L){if(ue=parseInt(x["number-columns-repeated"]||"1",10),r.dense)for(m[j+L]||(m[j+L]=[]),m[j+L][I]=L==0?g:ss(g);--ue>0;)m[j+L][I+ue]=ss(g);else for(m[sn({r:j+L,c:I})]=g;--ue>0;)m[sn({r:j+L,c:I+ue})]=ss(g);_.e.c<=I&&(_.e.c=I)}ue=parseInt(x["number-columns-repeated"]||"1",10),I+=ue-1,ue=0,g={},y="",w=[]}ne={};break;case"document":case"document-content":case"":case"spreadsheet":case"":case"scripts":case"styles":case"font-face-decls":case"master-styles":if(p[1]==="/"){if((s=a.pop())[0]!==p[3])throw"Bad state: "+s}else p[0].charAt(p[0].length-2)!=="/"&&a.push([p[3],!0]);break;case"annotation":if(p[1]==="/"){if((s=a.pop())[0]!==p[3])throw"Bad state: "+s;O.t=y,w.length&&(O.R=w),O.a=H,Ie.push(O)}else p[0].charAt(p[0].length-2)!=="/"&&a.push([p[3],!1]);H="",R=0,y="",b=0,w=[];break;case"creator":p[1]==="/"?H=n.slice(R,p.index):R=p.index+p[0].length;break;case"meta":case"":case"settings":case"config-item-set":case"config-item-map-indexed":case"config-item-map-entry":case"config-item-map-named":case"shapes":case"frame":case"text-box":case"image":case"data-pilot-tables":case"list-style":case"form":case"dde-links":case"event-listeners":case"chart":if(p[1]==="/"){if((s=a.pop())[0]!==p[3])throw"Bad state: "+s}else p[0].charAt(p[0].length-2)!=="/"&&a.push([p[3],!1]);y="",b=0,w=[];break;case"scientific-number":break;case"currency-symbol":break;case"currency-style":break;case"number-style":case"percentage-style":case"date-style":case"time-style":if(p[1]==="/"){if(S[l.name]=c,(s=a.pop())[0]!==p[3])throw"Bad state: "+s}else p[0].charAt(p[0].length-2)!=="/"&&(c="",l=ln(p[0],!1),a.push([p[3],!0]));break;case"script":break;case"libraries":break;case"automatic-styles":break;case"default-style":case"page-layout":break;case"style":break;case"map":break;case"font-face":break;case"paragraph-properties":break;case"table-properties":break;case"table-column-properties":break;case"table-row-properties":break;case"table-cell-properties":break;case"number":switch(a[a.length-1][0]){case"time-style":case"date-style":i=ln(p[0],!1),c+=DH[p[3]][i.style==="long"?1:0];break}break;case"fraction":break;case"day":case"month":case"year":case"era":case"day-of-week":case"week-of-year":case"quarter":case"hours":case"minutes":case"seconds":case"am-pm":switch(a[a.length-1][0]){case"time-style":case"date-style":i=ln(p[0],!1),c+=DH[p[3]][i.style==="long"?1:0];break}break;case"boolean-style":break;case"boolean":break;case"text-style":break;case"text":if(p[0].slice(-2)==="/>")break;if(p[1]==="/")switch(a[a.length-1][0]){case"number-style":case"date-style":case"time-style":c+=n.slice(u,p.index);break}else u=p.index+p[0].length;break;case"named-range":i=ln(p[0],!1),Pe=tB(i["cell-range-address"]);var Z={Name:i.name,Ref:Pe[0]+"!"+Pe[1]};K&&(Z.Sheet=A.length),me.Names.push(Z);break;case"text-content":break;case"text-properties":break;case"embedded-text":break;case"body":case"":break;case"forms":break;case"table-column":break;case"table-header-rows":break;case"table-rows":break;case"table-column-group":break;case"table-header-columns":break;case"table-columns":break;case"null-date":break;case"graphic-properties":break;case"calculation-settings":break;case"named-expressions":break;case"label-range":break;case"label-ranges":break;case"named-expression":break;case"sort":break;case"sort-by":break;case"sort-groups":break;case"tab":break;case"line-break":break;case"span":break;case"p":case"":if(["master-styles"].indexOf(a[a.length-1][0])>-1)break;if(p[1]==="/"&&(!x||!x["string-value"])){var ge=MMe(n.slice(b,p.index));y=(y.length>0?y+`
`:"")+ge[0]}else ln(p[0],!1),b=p.index+p[0].length;break;case"s":break;case"database-range":if(p[1]==="/")break;try{Pe=tB(ln(p[0])["target-range-address"]),h[Pe[0]]["!autofilter"]={ref:Pe[1]}}catch{}break;case"date":break;case"object":break;case"title":case"":break;case"desc":break;case"binary-data":break;case"table-source":break;case"scenario":break;case"iteration":break;case"content-validations":break;case"content-validation":break;case"help-message":break;case"error-message":break;case"database-ranges":break;case"filter":break;case"filter-and":break;case"filter-or":break;case"filter-condition":break;case"list-level-style-bullet":break;case"list-level-style-number":break;case"list-level-properties":break;case"sender-firstname":case"sender-lastname":case"sender-initials":case"sender-title":case"sender-position":case"sender-email":case"sender-phone-private":case"sender-fax":case"sender-company":case"sender-phone-work":case"sender-street":case"sender-city":case"sender-postal-code":case"sender-country":case"sender-state-or-province":case"author-name":case"author-initials":case"chapter":case"file-name":case"template-name":case"sheet-name":break;case"event-listener":break;case"initial-creator":case"creation-date":case"print-date":case"generator":case"document-statistic":case"user-defined":case"editing-duration":case"editing-cycles":break;case"config-item":break;case"page-number":break;case"page-count":break;case"time":break;case"cell-range-source":break;case"detective":break;case"operation":break;case"highlighted-range":break;case"data-pilot-table":case"source-cell-range":case"source-service":case"data-pilot-field":case"data-pilot-level":case"data-pilot-subtotals":case"data-pilot-subtotal":case"data-pilot-members":case"data-pilot-member":case"data-pilot-display-info":case"data-pilot-sort-info":case"data-pilot-layout-info":case"data-pilot-field-reference":case"data-pilot-groups":case"data-pilot-group":case"data-pilot-group-member":break;case"rect":break;case"dde-connection-decls":case"dde-connection-decl":case"dde-link":case"dde-source":break;case"properties":break;case"property":break;case"a":if(p[1]!=="/"){if(ne=ln(p[0],!1),!ne.href)break;ne.Target=Wn(ne.href),delete ne.href,ne.Target.charAt(0)=="#"&&ne.Target.indexOf(".")>-1?(Pe=tB(ne.Target.slice(1)),ne.Target="#"+Pe[0]+"!"+Pe[1]):ne.Target.match(/^\.\.[\\\/]/)&&(ne.Target=ne.Target.slice(3))}break;case"table-protection":break;case"data-pilot-grand-total":break;case"office-document-common-attrs":break;default:switch(p[2]){case"dc:":case"calcext:":case"loext:":case"ooo:":case"chartooo:":case"draw:":case"style:":case"chart:":case"form:":case"uof:":case":":case":":break;default:if(r.WTF)throw new Error(p)}}var U={Sheets:h,SheetNames:A,Workbook:me};return r.bookSheets&&delete U.Sheets,U}function RH(t,e){e=e||{},ju(t,"META-INF/manifest.xml")&&dPe(pi(t,"META-INF/manifest.xml"),e);var r=Qc(t,"content.xml");if(!r)throw new Error("Missing content.xml in ODS / UOF file");var n=Pne(Ba(r),e);return ju(t,"meta.xml")&&(n.Props=bre(pi(t,"meta.xml"))),n}function MH(t,e){return Pne(t,e)}var LMe=function(){var t=["<office:master-styles>",'<style:master-page style:name="mp1" style:page-layout-name="mp1">',"<style:header/>",'<style:header-left style:display="false"/>',"<style:footer/>",'<style:footer-left style:display="false"/>',"</style:master-page>","</office:master-styles>"].join(""),e="<office:document-styles "+a2({"xmlns:office":"urn:oasis:names:tc:opendocument:xmlns:office:1.0","xmlns:table":"urn:oasis:names:tc:opendocument:xmlns:table:1.0","xmlns:style":"urn:oasis:names:tc:opendocument:xmlns:style:1.0","xmlns:text":"urn:oasis:names:tc:opendocument:xmlns:text:1.0","xmlns:draw":"urn:oasis:names:tc:opendocument:xmlns:drawing:1.0","xmlns:fo":"urn:oasis:names:tc:opendocument:xmlns:xsl-fo-compatible:1.0","xmlns:xlink":"http://www.w3.org/1999/xlink","xmlns:dc":"http://purl.org/dc/elements/1.1/","xmlns:number":"urn:oasis:names:tc:opendocument:xmlns:datastyle:1.0","xmlns:svg":"urn:oasis:names:tc:opendocument:xmlns:svg-compatible:1.0","xmlns:of":"urn:oasis:names:tc:opendocument:xmlns:of:1.2","office:version":"1.2"})+">"+t+"</office:document-styles>";return function(){return Ai+e}}(),LH=function(){var t=function(s){return Ca(s).replace(/  +/g,function(i){return'<text:s text:c="'+i.length+'"/>'}).replace(/\t/g,"<text:tab/>").replace(/\n/g,"</text:p><text:p>").replace(/^ /,"<text:s/>").replace(/ $/,"<text:s/>")},e=`          <table:table-cell />
`,r=`          <table:covered-table-cell/>
`,n=function(s,i,l){var c=[];c.push('      <table:table table:name="'+Ca(i.SheetNames[l])+`" table:style-name="ta1">
`);var u=0,d=0,f=mc(s["!ref"]||"A1"),h=s["!merges"]||[],A=0,m=Array.isArray(s);if(s["!cols"])for(d=0;d<=f.e.c;++d)c.push("        <table:table-column"+(s["!cols"][d]?' table:style-name="co'+s["!cols"][d].ods+'"':"")+`></table:table-column>
`);var p="",g=s["!rows"]||[];for(u=0;u<f.s.r;++u)p=g[u]?' table:style-name="ro'+g[u].ods+'"':"",c.push("        <table:table-row"+p+`></table:table-row>
`);for(;u<=f.e.r;++u){for(p=g[u]?' table:style-name="ro'+g[u].ods+'"':"",c.push("        <table:table-row"+p+`>
`),d=0;d<f.s.c;++d)c.push(e);for(;d<=f.e.c;++d){var x=!1,y={},b="";for(A=0;A!=h.length;++A)if(!(h[A].s.c>d)&&!(h[A].s.r>u)&&!(h[A].e.c<d)&&!(h[A].e.r<u)){(h[A].s.c!=d||h[A].s.r!=u)&&(x=!0),y["table:number-columns-spanned"]=h[A].e.c-h[A].s.c+1,y["table:number-rows-spanned"]=h[A].e.r-h[A].s.r+1;break}if(x){c.push(r);continue}var w=sn({r:u,c:d}),j=m?(s[u]||[])[d]:s[w];if(j&&j.f&&(y["table:formula"]=Ca(sDe(j.f)),j.F&&j.F.slice(0,w.length)==w)){var I=mc(j.F);y["table:number-matrix-columns-spanned"]=I.e.c-I.s.c+1,y["table:number-matrix-rows-spanned"]=I.e.r-I.s.r+1}if(!j){c.push(e);continue}switch(j.t){case"b":b=j.v?"TRUE":"FALSE",y["office:value-type"]="boolean",y["office:boolean-value"]=j.v?"true":"false";break;case"n":b=j.w||String(j.v||0),y["office:value-type"]="float",y["office:value"]=j.v||0;break;case"s":case"str":b=j.v==null?"":j.v,y["office:value-type"]="string";break;case"d":b=j.w||as(j.v).toISOString(),y["office:value-type"]="date",y["office:date-value"]=as(j.v).toISOString(),y["table:style-name"]="ce1";break;default:c.push(e);continue}var _=t(b);if(j.l&&j.l.Target){var E=j.l.Target;E=E.charAt(0)=="#"?"#"+iDe(E.slice(1)):E,E.charAt(0)!="#"&&!E.match(/^\w+:/)&&(E="../"+E),_=br("text:a",_,{"xlink:href":E.replace(/&/g,"&amp;")})}c.push("          "+br("table:table-cell",br("text:p",_,{}),y)+`
`)}c.push(`        </table:table-row>
`)}return c.push(`      </table:table>
`),c.join("")},a=function(s,i){s.push(` <office:automatic-styles>
`),s.push(`  <number:date-style style:name="N37" number:automatic-order="true">
`),s.push(`   <number:month number:style="long"/>
`),s.push(`   <number:text>/</number:text>
`),s.push(`   <number:day number:style="long"/>
`),s.push(`   <number:text>/</number:text>
`),s.push(`   <number:year/>
`),s.push(`  </number:date-style>
`);var l=0;i.SheetNames.map(function(u){return i.Sheets[u]}).forEach(function(u){if(u&&u["!cols"]){for(var d=0;d<u["!cols"].length;++d)if(u["!cols"][d]){var f=u["!cols"][d];if(f.width==null&&f.wpx==null&&f.wch==null)continue;G0(f),f.ods=l;var h=u["!cols"][d].wpx+"px";s.push('  <style:style style:name="co'+l+`" style:family="table-column">
`),s.push('   <style:table-column-properties fo:break-before="auto" style:column-width="'+h+`"/>
`),s.push(`  </style:style>
`),++l}}});var c=0;i.SheetNames.map(function(u){return i.Sheets[u]}).forEach(function(u){if(u&&u["!rows"]){for(var d=0;d<u["!rows"].length;++d)if(u["!rows"][d]){u["!rows"][d].ods=c;var f=u["!rows"][d].hpx+"px";s.push('  <style:style style:name="ro'+c+`" style:family="table-row">
`),s.push('   <style:table-row-properties fo:break-before="auto" style:row-height="'+f+`"/>
`),s.push(`  </style:style>
`),++c}}}),s.push(`  <style:style style:name="ta1" style:family="table" style:master-page-name="mp1">
`),s.push(`   <style:table-properties table:display="true" style:writing-mode="lr-tb"/>
`),s.push(`  </style:style>
`),s.push(`  <style:style style:name="ce1" style:family="table-cell" style:parent-style-name="Default" style:data-style-name="N37"/>
`),s.push(` </office:automatic-styles>
`)};return function(i,l){var c=[Ai],u=a2({"xmlns:office":"urn:oasis:names:tc:opendocument:xmlns:office:1.0","xmlns:table":"urn:oasis:names:tc:opendocument:xmlns:table:1.0","xmlns:style":"urn:oasis:names:tc:opendocument:xmlns:style:1.0","xmlns:text":"urn:oasis:names:tc:opendocument:xmlns:text:1.0","xmlns:draw":"urn:oasis:names:tc:opendocument:xmlns:drawing:1.0","xmlns:fo":"urn:oasis:names:tc:opendocument:xmlns:xsl-fo-compatible:1.0","xmlns:xlink":"http://www.w3.org/1999/xlink","xmlns:dc":"http://purl.org/dc/elements/1.1/","xmlns:meta":"urn:oasis:names:tc:opendocument:xmlns:meta:1.0","xmlns:number":"urn:oasis:names:tc:opendocument:xmlns:datastyle:1.0","xmlns:presentation":"urn:oasis:names:tc:opendocument:xmlns:presentation:1.0","xmlns:svg":"urn:oasis:names:tc:opendocument:xmlns:svg-compatible:1.0","xmlns:chart":"urn:oasis:names:tc:opendocument:xmlns:chart:1.0","xmlns:dr3d":"urn:oasis:names:tc:opendocument:xmlns:dr3d:1.0","xmlns:math":"http://www.w3.org/1998/Math/MathML","xmlns:form":"urn:oasis:names:tc:opendocument:xmlns:form:1.0","xmlns:script":"urn:oasis:names:tc:opendocument:xmlns:script:1.0","xmlns:ooo":"http://openoffice.org/2004/office","xmlns:ooow":"http://openoffice.org/2004/writer","xmlns:oooc":"http://openoffice.org/2004/calc","xmlns:dom":"http://www.w3.org/2001/xml-events","xmlns:xforms":"http://www.w3.org/2002/xforms","xmlns:xsd":"http://www.w3.org/2001/XMLSchema","xmlns:xsi":"http://www.w3.org/2001/XMLSchema-instance","xmlns:sheet":"urn:oasis:names:tc:opendocument:sh33tjs:1.0","xmlns:rpt":"http://openoffice.org/2005/report","xmlns:of":"urn:oasis:names:tc:opendocument:xmlns:of:1.2","xmlns:xhtml":"http://www.w3.org/1999/xhtml","xmlns:grddl":"http://www.w3.org/2003/g/data-view#","xmlns:tableooo":"http://openoffice.org/2009/table","xmlns:drawooo":"http://openoffice.org/2010/draw","xmlns:calcext":"urn:org:documentfoundation:names:experimental:calc:xmlns:calcext:1.0","xmlns:loext":"urn:org:documentfoundation:names:experimental:office:xmlns:loext:1.0","xmlns:field":"urn:openoffice:names:experimental:ooo-ms-interop:xmlns:field:1.0","xmlns:formx":"urn:openoffice:names:experimental:ooxml-odf-interop:xmlns:form:1.0","xmlns:css3t":"http://www.w3.org/TR/css3-text/","office:version":"1.2"}),d=a2({"xmlns:config":"urn:oasis:names:tc:opendocument:xmlns:config:1.0","office:mimetype":"application/vnd.oasis.opendocument.spreadsheet"});l.bookType=="fods"?(c.push("<office:document"+u+d+`>
`),c.push(yre().replace(/office:document-meta/g,"office:meta"))):c.push("<office:document-content"+u+`>
`),a(c,i),c.push(`  <office:body>
`),c.push(`    <office:spreadsheet>
`);for(var f=0;f!=i.SheetNames.length;++f)c.push(n(i.Sheets[i.SheetNames[f]],i,f));return c.push(`    </office:spreadsheet>
`),c.push(`  </office:body>
`),l.bookType=="fods"?c.push("</office:document>"):c.push("</office:document-content>"),c.join("")}}();function Tne(t,e){if(e.bookType=="fods")return LH(t,e);var r=Z6(),n="",a=[],s=[];return n="mimetype",Nn(r,n,"application/vnd.oasis.opendocument.spreadsheet"),n="content.xml",Nn(r,n,LH(t,e)),a.push([n,"text/xml"]),s.push([n,"ContentFile"]),n="styles.xml",Nn(r,n,LMe(t,e)),a.push([n,"text/xml"]),s.push([n,"StylesFile"]),n="meta.xml",Nn(r,n,Ai+yre()),a.push([n,"text/xml"]),s.push([n,"MetadataFile"]),n="manifest.rdf",Nn(r,n,hPe(s)),a.push([n,"application/rdf+xml"]),n="META-INF/manifest.xml",Nn(r,n,fPe(a)),r}/*! sheetjs (C) 2013-present SheetJS -- http://sheetjs.com */function Mp(t){return new DataView(t.buffer,t.byteOffset,t.byteLength)}function mk(t){return typeof TextDecoder<"u"?new TextDecoder().decode(t):Ba(am(t))}function UMe(t){return typeof TextEncoder<"u"?new TextEncoder().encode(t):Uc(xf(t))}function QMe(t,e){e:for(var r=0;r<=t.length-e.length;++r){for(var n=0;n<e.length;++n)if(t[r+n]!=e[n])continue e;return!0}return!1}function z0(t){var e=t.reduce(function(a,s){return a+s.length},0),r=new Uint8Array(e),n=0;return t.forEach(function(a){r.set(a,n),n+=a.length}),r}function UH(t){return t-=t>>1&1431655765,t=(t&858993459)+(t>>2&858993459),(t+(t>>4)&252645135)*16843009>>>24}function VMe(t,e){for(var r=(t[e+15]&127)<<7|t[e+14]>>1,n=t[e+14]&1,a=e+13;a>=e;--a)n=n*256+t[a];return(t[e+15]&128?-n:n)*Math.pow(10,r-6176)}function HMe(t,e,r){var n=Math.floor(r==0?0:Math.LOG10E*Math.log(Math.abs(r)))+6176-20,a=r/Math.pow(10,n-6176);t[e+15]|=n>>7,t[e+14]|=(n&127)<<1;for(var s=0;a>=1;++s,a/=256)t[e+s]=a&255;t[e+15]|=r>=0?0:128}function f2(t,e){var r=e?e[0]:0,n=t[r]&127;e:if(t[r++]>=128&&(n|=(t[r]&127)<<7,t[r++]<128||(n|=(t[r]&127)<<14,t[r++]<128)||(n|=(t[r]&127)<<21,t[r++]<128)||(n+=(t[r]&127)*Math.pow(2,28),++r,t[r++]<128)||(n+=(t[r]&127)*Math.pow(2,35),++r,t[r++]<128)||(n+=(t[r]&127)*Math.pow(2,42),++r,t[r++]<128)))break e;return e&&(e[0]=r),n}function xa(t){var e=new Uint8Array(7);e[0]=t&127;var r=1;e:if(t>127){if(e[r-1]|=128,e[r]=t>>7&127,++r,t<=16383||(e[r-1]|=128,e[r]=t>>14&127,++r,t<=2097151)||(e[r-1]|=128,e[r]=t>>21&127,++r,t<=268435455)||(e[r-1]|=128,e[r]=t/256>>>21&127,++r,t<=34359738367)||(e[r-1]|=128,e[r]=t/65536>>>21&127,++r,t<=4398046511103))break e;e[r-1]|=128,e[r]=t/16777216>>>21&127,++r}return e.slice(0,r)}function qs(t){var e=0,r=t[e]&127;e:if(t[e++]>=128){if(r|=(t[e]&127)<<7,t[e++]<128||(r|=(t[e]&127)<<14,t[e++]<128)||(r|=(t[e]&127)<<21,t[e++]<128))break e;r|=(t[e]&127)<<28}return r}function Jn(t){for(var e=[],r=[0];r[0]<t.length;){var n=r[0],a=f2(t,r),s=a&7;a=Math.floor(a/8);var i=0,l;if(a==0)break;switch(s){case 0:{for(var c=r[0];t[r[0]++]>=128;);l=t.slice(c,r[0])}break;case 5:i=4,l=t.slice(r[0],r[0]+i),r[0]+=i;break;case 1:i=8,l=t.slice(r[0],r[0]+i),r[0]+=i;break;case 2:i=f2(t,r),l=t.slice(r[0],r[0]+i),r[0]+=i;break;case 3:case 4:default:throw new Error("PB Type ".concat(s," for Field ").concat(a," at offset ").concat(n))}var u={data:l,type:s};e[a]==null?e[a]=[u]:e[a].push(u)}return e}function Bo(t){var e=[];return t.forEach(function(r,n){r.forEach(function(a){a.data&&(e.push(xa(n*8+a.type)),a.type==2&&e.push(xa(a.data.length)),e.push(a.data))})}),z0(e)}function ED(t,e){return(t==null?void 0:t.map(function(r){return e(r.data)}))||[]}function Nu(t){for(var e,r=[],n=[0];n[0]<t.length;){var a=f2(t,n),s=Jn(t.slice(n[0],n[0]+a));n[0]+=a;var i={id:qs(s[1][0].data),messages:[]};s[2].forEach(function(l){var c=Jn(l.data),u=qs(c[3][0].data);i.messages.push({meta:c,data:t.slice(n[0],n[0]+u)}),n[0]+=u}),(e=s[3])!=null&&e[0]&&(i.merge=qs(s[3][0].data)>>>0>0),r.push(i)}return r}function Hg(t){var e=[];return t.forEach(function(r){var n=[];n[1]=[{data:xa(r.id),type:0}],n[2]=[],r.merge!=null&&(n[3]=[{data:xa(+!!r.merge),type:0}]);var a=[];r.messages.forEach(function(i){a.push(i.data),i.meta[3]=[{type:0,data:xa(i.data.length)}],n[2].push({data:Bo(i.meta),type:2})});var s=Bo(n);e.push(xa(s.length)),e.push(s),a.forEach(function(i){return e.push(i)})}),z0(e)}function $Me(t,e){if(t!=0)throw new Error("Unexpected Snappy chunk type ".concat(t));for(var r=[0],n=f2(e,r),a=[];r[0]<e.length;){var s=e[r[0]]&3;if(s==0){var i=e[r[0]++]>>2;if(i<60)++i;else{var l=i-59;i=e[r[0]],l>1&&(i|=e[r[0]+1]<<8),l>2&&(i|=e[r[0]+2]<<16),l>3&&(i|=e[r[0]+3]<<24),i>>>=0,i++,r[0]+=l}a.push(e.slice(r[0],r[0]+i)),r[0]+=i;continue}else{var c=0,u=0;if(s==1?(u=(e[r[0]]>>2&7)+4,c=(e[r[0]++]&224)<<3,c|=e[r[0]++]):(u=(e[r[0]++]>>2)+1,s==2?(c=e[r[0]]|e[r[0]+1]<<8,r[0]+=2):(c=(e[r[0]]|e[r[0]+1]<<8|e[r[0]+2]<<16|e[r[0]+3]<<24)>>>0,r[0]+=4)),a=[z0(a)],c==0)throw new Error("Invalid offset 0");if(c>a[0].length)throw new Error("Invalid offset beyond length");if(u>=c)for(a.push(a[0].slice(-c)),u-=c;u>=a[a.length-1].length;)a.push(a[a.length-1]),u-=a[a.length-1].length;a.push(a[0].slice(-c,-c+u))}}var d=z0(a);if(d.length!=n)throw new Error("Unexpected length: ".concat(d.length," != ").concat(n));return d}function Cu(t){for(var e=[],r=0;r<t.length;){var n=t[r++],a=t[r]|t[r+1]<<8|t[r+2]<<16;r+=3,e.push($Me(n,t.slice(r,r+a))),r+=a}if(r!==t.length)throw new Error("data is not a valid framed stream!");return z0(e)}function $g(t){for(var e=[],r=0;r<t.length;){var n=Math.min(t.length-r,268435455),a=new Uint8Array(4);e.push(a);var s=xa(n),i=s.length;e.push(s),n<=60?(i++,e.push(new Uint8Array([n-1<<2]))):n<=256?(i+=2,e.push(new Uint8Array([240,n-1&255]))):n<=65536?(i+=3,e.push(new Uint8Array([244,n-1&255,n-1>>8&255]))):n<=16777216?(i+=4,e.push(new Uint8Array([248,n-1&255,n-1>>8&255,n-1>>16&255]))):n<=4294967296&&(i+=5,e.push(new Uint8Array([252,n-1&255,n-1>>8&255,n-1>>16&255,n-1>>>24&255]))),e.push(t.slice(r,r+n)),i+=n,a[0]=0,a[1]=i&255,a[2]=i>>8&255,a[3]=i>>16&255,r+=n}return z0(e)}function KMe(t,e,r,n){var a=Mp(t),s=a.getUint32(4,!0),i=(n>1?12:8)+UH(s&(n>1?3470:398))*4,l=-1,c=-1,u=NaN,d=new Date(2001,0,1);s&512&&(l=a.getUint32(i,!0),i+=4),i+=UH(s&(n>1?12288:4096))*4,s&16&&(c=a.getUint32(i,!0),i+=4),s&32&&(u=a.getFloat64(i,!0),i+=8),s&64&&(d.setTime(d.getTime()+a.getFloat64(i,!0)*1e3),i+=8);var f;switch(t[2]){case 0:break;case 2:f={t:"n",v:u};break;case 3:f={t:"s",v:e[c]};break;case 5:f={t:"d",v:d};break;case 6:f={t:"b",v:u>0};break;case 7:f={t:"n",v:u/86400};break;case 8:f={t:"e",v:0};break;case 9:if(l>-1)f={t:"s",v:r[l]};else if(c>-1)f={t:"s",v:e[c]};else if(!isNaN(u))f={t:"n",v:u};else throw new Error("Unsupported cell type ".concat(t.slice(0,4)));break;default:throw new Error("Unsupported cell type ".concat(t.slice(0,4)))}return f}function GMe(t,e,r){var n=Mp(t),a=n.getUint32(8,!0),s=12,i=-1,l=-1,c=NaN,u=NaN,d=new Date(2001,0,1);a&1&&(c=VMe(t,s),s+=16),a&2&&(u=n.getFloat64(s,!0),s+=8),a&4&&(d.setTime(d.getTime()+n.getFloat64(s,!0)*1e3),s+=8),a&8&&(l=n.getUint32(s,!0),s+=4),a&16&&(i=n.getUint32(s,!0),s+=4);var f;switch(t[1]){case 0:break;case 2:f={t:"n",v:c};break;case 3:f={t:"s",v:e[l]};break;case 5:f={t:"d",v:d};break;case 6:f={t:"b",v:u>0};break;case 7:f={t:"n",v:u/86400};break;case 8:f={t:"e",v:0};break;case 9:if(i>-1)f={t:"s",v:r[i]};else throw new Error("Unsupported cell type ".concat(t[1]," : ").concat(a&31," : ").concat(t.slice(0,4)));break;case 10:f={t:"n",v:c};break;default:throw new Error("Unsupported cell type ".concat(t[1]," : ").concat(a&31," : ").concat(t.slice(0,4)))}return f}function nB(t,e){var r=new Uint8Array(32),n=Mp(r),a=12,s=0;switch(r[0]=5,t.t){case"n":r[1]=2,HMe(r,a,t.v),s|=1,a+=16;break;case"b":r[1]=6,n.setFloat64(a,t.v?1:0,!0),s|=2,a+=8;break;case"s":if(e.indexOf(t.v)==-1)throw new Error("Value ".concat(t.v," missing from SST!"));r[1]=3,n.setUint32(a,e.indexOf(t.v),!0),s|=8,a+=4;break;default:throw"unsupported cell type "+t.t}return n.setUint32(8,s,!0),r.slice(0,a)}function aB(t,e){var r=new Uint8Array(32),n=Mp(r),a=12,s=0;switch(r[0]=3,t.t){case"n":r[2]=2,n.setFloat64(a,t.v,!0),s|=32,a+=8;break;case"b":r[2]=6,n.setFloat64(a,t.v?1:0,!0),s|=32,a+=8;break;case"s":if(e.indexOf(t.v)==-1)throw new Error("Value ".concat(t.v," missing from SST!"));r[2]=3,n.setUint32(a,e.indexOf(t.v),!0),s|=16,a+=4;break;default:throw"unsupported cell type "+t.t}return n.setUint32(4,s,!0),r.slice(0,a)}function qMe(t,e,r){switch(t[0]){case 0:case 1:case 2:case 3:return KMe(t,e,r,t[0]);case 5:return GMe(t,e,r);default:throw new Error("Unsupported payload version ".concat(t[0]))}}function ul(t){var e=Jn(t);return f2(e[1][0].data)}function QH(t,e){var r=Jn(e.data),n=qs(r[1][0].data),a=r[3],s=[];return(a||[]).forEach(function(i){var l=Jn(i.data),c=qs(l[1][0].data)>>>0;switch(n){case 1:s[c]=mk(l[3][0].data);break;case 8:{var u=t[ul(l[9][0].data)][0],d=Jn(u.data),f=t[ul(d[1][0].data)][0],h=qs(f.meta[1][0].data);if(h!=2001)throw new Error("2000 unexpected reference to ".concat(h));var A=Jn(f.data);s[c]=A[3].map(function(m){return mk(m.data)}).join("")}break}}),s}function zMe(t,e){var r,n,a,s,i,l,c,u,d,f,h,A,m,p,g=Jn(t),x=qs(g[1][0].data)>>>0,y=qs(g[2][0].data)>>>0,b=((n=(r=g[8])==null?void 0:r[0])==null?void 0:n.data)&&qs(g[8][0].data)>0||!1,w,j;if((s=(a=g[7])==null?void 0:a[0])!=null&&s.data&&e!=0)w=(l=(i=g[7])==null?void 0:i[0])==null?void 0:l.data,j=(u=(c=g[6])==null?void 0:c[0])==null?void 0:u.data;else if((f=(d=g[4])==null?void 0:d[0])!=null&&f.data&&e!=1)w=(A=(h=g[4])==null?void 0:h[0])==null?void 0:A.data,j=(p=(m=g[3])==null?void 0:m[0])==null?void 0:p.data;else throw"NUMBERS Tile missing ".concat(e," cell storage");for(var I=b?4:1,_=Mp(w),E=[],S=0;S<w.length/2;++S){var k=_.getUint16(S*2,!0);k<65535&&E.push([S,k])}if(E.length!=y)throw"Expected ".concat(y," cells, found ").concat(E.length);var P=[];for(S=0;S<E.length-1;++S)P[E[S][0]]=j.subarray(E[S][1]*I,E[S+1][1]*I);return E.length>=1&&(P[E[E.length-1][0]]=j.subarray(E[E.length-1][1]*I)),{R:x,cells:P}}function WMe(t,e){var r,n=Jn(e.data),a=(r=n==null?void 0:n[7])!=null&&r[0]?qs(n[7][0].data)>>>0>0?1:0:-1,s=ED(n[5],function(i){return zMe(i,a)});return{nrows:qs(n[4][0].data)>>>0,data:s.reduce(function(i,l){return i[l.R]||(i[l.R]=[]),l.cells.forEach(function(c,u){if(i[l.R][u])throw new Error("Duplicate cell r=".concat(l.R," c=").concat(u));i[l.R][u]=c}),i},[])}}function XMe(t,e,r){var n,a=Jn(e.data),s={s:{r:0,c:0},e:{r:0,c:0}};if(s.e.r=(qs(a[6][0].data)>>>0)-1,s.e.r<0)throw new Error("Invalid row varint ".concat(a[6][0].data));if(s.e.c=(qs(a[7][0].data)>>>0)-1,s.e.c<0)throw new Error("Invalid col varint ".concat(a[7][0].data));r["!ref"]=vn(s);var i=Jn(a[4][0].data),l=QH(t,t[ul(i[4][0].data)][0]),c=(n=i[17])!=null&&n[0]?QH(t,t[ul(i[17][0].data)][0]):[],u=Jn(i[3][0].data),d=0;u[1].forEach(function(f){var h=Jn(f.data),A=t[ul(h[2][0].data)][0],m=qs(A.meta[1][0].data);if(m!=6002)throw new Error("6001 unexpected reference to ".concat(m));var p=WMe(t,A);p.data.forEach(function(g,x){g.forEach(function(y,b){var w=sn({r:d+x,c:b}),j=qMe(y,l,c);j&&(r[w]=j)})}),d+=p.nrows})}function YMe(t,e){var r=Jn(e.data),n={"!ref":"A1"},a=t[ul(r[2][0].data)],s=qs(a[0].meta[1][0].data);if(s!=6001)throw new Error("6000 unexpected reference to ".concat(s));return XMe(t,a[0],n),n}function JMe(t,e){var r,n=Jn(e.data),a={name:(r=n[1])!=null&&r[0]?mk(n[1][0].data):"",sheets:[]},s=ED(n[2],ul);return s.forEach(function(i){t[i].forEach(function(l){var c=qs(l.meta[1][0].data);c==6e3&&a.sheets.push(YMe(t,l))})}),a}function ZMe(t,e){var r=PD(),n=Jn(e.data),a=ED(n[1],ul);if(a.forEach(function(s){t[s].forEach(function(i){var l=qs(i.meta[1][0].data);if(l==2){var c=JMe(t,i);c.sheets.forEach(function(u,d){TD(r,u,d==0?c.name:c.name+"_"+d,!0)})}})}),r.SheetNames.length==0)throw new Error("Empty NUMBERS file");return r}function sB(t){var e,r,n,a,s={},i=[];if(t.FullPaths.forEach(function(c){if(c.match(/\.iwpv2/))throw new Error("Unsupported password protection")}),t.FileIndex.forEach(function(c){if(c.name.match(/\.iwa$/)){var u;try{u=Cu(c.content)}catch(f){return console.log("?? "+c.content.length+" "+(f.message||f))}var d;try{d=Nu(u)}catch(f){return console.log("## "+(f.message||f))}d.forEach(function(f){s[f.id]=f.messages,i.push(f.id)})}}),!i.length)throw new Error("File has no messages");var l=((a=(n=(r=(e=s==null?void 0:s[1])==null?void 0:e[0])==null?void 0:r.meta)==null?void 0:n[1])==null?void 0:a[0].data)&&qs(s[1][0].meta[1][0].data)==1&&s[1][0];if(l||i.forEach(function(c){s[c].forEach(function(u){var d=qs(u.meta[1][0].data)>>>0;if(d==1)if(!l)l=u;else throw new Error("Document has multiple roots")})}),!l)throw new Error("Cannot find Document root");return ZMe(s,l)}function eLe(t,e,r){var n,a,s,i;if(!((n=t[6])!=null&&n[0])||!((a=t[7])!=null&&a[0]))throw"Mutation only works on post-BNC storages!";var l=((i=(s=t[8])==null?void 0:s[0])==null?void 0:i.data)&&qs(t[8][0].data)>0||!1;if(l)throw"Math only works with normal offsets";for(var c=0,u=Mp(t[7][0].data),d=0,f=[],h=Mp(t[4][0].data),A=0,m=[],p=0;p<e.length;++p){if(e[p]==null){u.setUint16(p*2,65535,!0),h.setUint16(p*2,65535);continue}u.setUint16(p*2,d,!0),h.setUint16(p*2,A,!0);var g,x;switch(typeof e[p]){case"string":g=nB({t:"s",v:e[p]},r),x=aB({t:"s",v:e[p]},r);break;case"number":g=nB({t:"n",v:e[p]},r),x=aB({t:"n",v:e[p]},r);break;case"boolean":g=nB({t:"b",v:e[p]},r),x=aB({t:"b",v:e[p]},r);break;default:throw new Error("Unsupported value "+e[p])}f.push(g),d+=g.length,m.push(x),A+=x.length,++c}for(t[2][0].data=xa(c);p<t[7][0].data.length/2;++p)u.setUint16(p*2,65535,!0),h.setUint16(p*2,65535,!0);return t[6][0].data=z0(f),t[3][0].data=z0(m),c}function tLe(t,e){if(!e||!e.numbers)throw new Error("Must pass a `numbers` option -- check the README");var r=t.Sheets[t.SheetNames[0]];t.SheetNames.length>1&&console.error("The Numbers writer currently writes only the first table");var n=mc(r["!ref"]);n.s.r=n.s.c=0;var a=!1;n.e.c>9&&(a=!0,n.e.c=9),n.e.r>49&&(a=!0,n.e.r=49),a&&console.error("The Numbers writer is currently limited to ".concat(vn(n)));var s=bS(r,{range:n,header:1}),i=["~Sh33tJ5~"];s.forEach(function(H){return H.forEach(function(R){typeof R=="string"&&i.push(R)})});var l={},c=[],u=Xr.read(e.numbers,{type:"base64"});u.FileIndex.map(function(H,R){return[H,u.FullPaths[R]]}).forEach(function(H){var R=H[0],M=H[1];if(R.type==2&&R.name.match(/\.iwa/)){var K=R.content,W=Cu(K),D=Nu(W);D.forEach(function(L){c.push(L.id),l[L.id]={deps:[],location:M,type:qs(L.messages[0].meta[1][0].data)}})}}),c.sort(function(H,R){return H-R});var d=c.filter(function(H){return H>1}).map(function(H){return[H,xa(H)]});u.FileIndex.map(function(H,R){return[H,u.FullPaths[R]]}).forEach(function(H){var R=H[0];if(H[1],!!R.name.match(/\.iwa/)){var M=Nu(Cu(R.content));M.forEach(function(K){K.messages.forEach(function(W){d.forEach(function(D){K.messages.some(function(L){return qs(L.meta[1][0].data)!=11006&&QMe(L.data,D[1])})&&l[D[0]].deps.push(K.id)})})})}});for(var f=Xr.find(u,l[1].location),h=Nu(Cu(f.content)),A,m=0;m<h.length;++m){var p=h[m];p.id==1&&(A=p)}var g=ul(Jn(A.messages[0].data)[1][0].data);for(f=Xr.find(u,l[g].location),h=Nu(Cu(f.content)),m=0;m<h.length;++m)p=h[m],p.id==g&&(A=p);for(g=ul(Jn(A.messages[0].data)[2][0].data),f=Xr.find(u,l[g].location),h=Nu(Cu(f.content)),m=0;m<h.length;++m)p=h[m],p.id==g&&(A=p);for(g=ul(Jn(A.messages[0].data)[2][0].data),f=Xr.find(u,l[g].location),h=Nu(Cu(f.content)),m=0;m<h.length;++m)p=h[m],p.id==g&&(A=p);var x=Jn(A.messages[0].data);{x[6][0].data=xa(n.e.r+1),x[7][0].data=xa(n.e.c+1);var y=ul(x[46][0].data),b=Xr.find(u,l[y].location),w=Nu(Cu(b.content));{for(var j=0;j<w.length&&w[j].id!=y;++j);if(w[j].id!=y)throw"Bad ColumnRowUIDMapArchive";var I=Jn(w[j].messages[0].data);I[1]=[],I[2]=[],I[3]=[];for(var _=0;_<=n.e.c;++_){var E=[];E[1]=E[2]=[{type:0,data:xa(_+420690)}],I[1].push({type:2,data:Bo(E)}),I[2].push({type:0,data:xa(_)}),I[3].push({type:0,data:xa(_)})}I[4]=[],I[5]=[],I[6]=[];for(var S=0;S<=n.e.r;++S)E=[],E[1]=E[2]=[{type:0,data:xa(S+726270)}],I[4].push({type:2,data:Bo(E)}),I[5].push({type:0,data:xa(S)}),I[6].push({type:0,data:xa(S)});w[j].messages[0].data=Bo(I)}b.content=$g(Hg(w)),b.size=b.content.length,delete x[46];var k=Jn(x[4][0].data);{k[7][0].data=xa(n.e.r+1);var P=Jn(k[1][0].data),T=ul(P[2][0].data);b=Xr.find(u,l[T].location),w=Nu(Cu(b.content));{if(w[0].id!=T)throw"Bad HeaderStorageBucket";var F=Jn(w[0].messages[0].data);for(S=0;S<s.length;++S){var Y=Jn(F[2][0].data);Y[1][0].data=xa(S),Y[4][0].data=xa(s[S].length),F[2][S]={type:F[2][0].type,data:Bo(Y)}}w[0].messages[0].data=Bo(F)}b.content=$g(Hg(w)),b.size=b.content.length;var he=ul(k[2][0].data);b=Xr.find(u,l[he].location),w=Nu(Cu(b.content));{if(w[0].id!=he)throw"Bad HeaderStorageBucket";for(F=Jn(w[0].messages[0].data),_=0;_<=n.e.c;++_)Y=Jn(F[2][0].data),Y[1][0].data=xa(_),Y[4][0].data=xa(n.e.r+1),F[2][_]={type:F[2][0].type,data:Bo(Y)};w[0].messages[0].data=Bo(F)}b.content=$g(Hg(w)),b.size=b.content.length;var ue=ul(k[4][0].data);(function(){for(var H=Xr.find(u,l[ue].location),R=Nu(Cu(H.content)),M,K=0;K<R.length;++K){var W=R[K];W.id==ue&&(M=W)}var D=Jn(M.messages[0].data);{D[3]=[];var L=[];i.forEach(function(U,Ge){L[1]=[{type:0,data:xa(Ge)}],L[2]=[{type:0,data:xa(1)}],L[3]=[{type:2,data:UMe(U)}],D[3].push({type:2,data:Bo(L)})})}M.messages[0].data=Bo(D);var Z=Hg(R),ge=$g(Z);H.content=ge,H.size=H.content.length})();var fe=Jn(k[3][0].data);{var me=fe[1][0];delete fe[2];var ne=Jn(me.data);{var Pe=ul(ne[2][0].data);(function(){for(var H=Xr.find(u,l[Pe].location),R=Nu(Cu(H.content)),M,K=0;K<R.length;++K){var W=R[K];W.id==Pe&&(M=W)}var D=Jn(M.messages[0].data);{delete D[6],delete fe[7];var L=new Uint8Array(D[5][0].data);D[5]=[];for(var Z=0,ge=0;ge<=n.e.r;++ge){var U=Jn(L);Z+=eLe(U,s[ge],i),U[1][0].data=xa(ge),D[5].push({data:Bo(U),type:2})}D[1]=[{type:0,data:xa(n.e.c+1)}],D[2]=[{type:0,data:xa(n.e.r+1)}],D[3]=[{type:0,data:xa(Z)}],D[4]=[{type:0,data:xa(n.e.r+1)}]}M.messages[0].data=Bo(D);var Ge=Hg(R),ie=$g(Ge);H.content=ie,H.size=H.content.length})()}me.data=Bo(ne)}k[3][0].data=Bo(fe)}x[4][0].data=Bo(k)}A.messages[0].data=Bo(x);var Ie=Hg(h),O=$g(Ie);return f.content=O,f.size=f.content.length,u}function kne(t){return function(r){for(var n=0;n!=t.length;++n){var a=t[n];r[a[0]]===void 0&&(r[a[0]]=a[1]),a[2]==="n"&&(r[a[0]]=Number(r[a[0]]))}}}function SD(t){kne([["cellNF",!1],["cellHTML",!0],["cellFormula",!0],["cellStyles",!1],["cellText",!0],["cellDates",!1],["sheetStubs",!1],["sheetRows",0,"n"],["bookDeps",!1],["bookSheets",!1],["bookProps",!1],["bookFiles",!1],["bookVBA",!1],["password",""],["WTF",!1]])(t)}function ID(t){kne([["cellDates",!1],["bookSST",!1],["bookType","xlsx"],["compression",!1],["WTF",!1]])(t)}function rLe(t){return Pn.WS.indexOf(t)>-1?"sheet":t==Pn.CS?"chart":t==Pn.DS?"dialog":t==Pn.MS?"macro":t&&t.length?t:"sheet"}function nLe(t,e){if(!t)return 0;try{t=e.map(function(n){return n.id||(n.id=n.strRelID),[n.name,t["!id"][n.id].Target,rLe(t["!id"][n.id].Type)]})}catch{return null}return!t||t.length===0?null:t}function aLe(t,e,r,n,a,s,i,l,c,u,d,f){try{s[n]=nb(Qc(t,r,!0),e);var h=pi(t,e),A;switch(l){case"sheet":A=E8e(h,e,a,c,s[n],u,d,f);break;case"chart":if(A=S8e(h,e,a,c,s[n],u,d,f),!A||!A["!drawel"])break;var m=Ny(A["!drawel"].Target,e),p=i2(m),g=AOe(Qc(t,m,!0),nb(Qc(t,p,!0),m)),x=Ny(g,m),y=i2(x);A=e8e(Qc(t,x,!0),x,c,nb(Qc(t,y,!0),x),u,A);break;case"macro":A=I8e(h,e,a,c,s[n],u,d,f);break;case"dialog":A=j8e(h,e,a,c,s[n],u,d,f);break;default:throw new Error("Unrecognized sheet type "+l)}i[n]=A;var b=[];s&&s[n]&&zs(s[n]).forEach(function(w){var j="";if(s[n][w].Type==Pn.CMNT){j=Ny(s[n][w].Target,e);var I=k8e(pi(t,j,!0),j,c);if(!I||!I.length)return;EH(A,I,!1)}s[n][w].Type==Pn.TCMNT&&(j=Ny(s[n][w].Target,e),b=b.concat(mOe(pi(t,j,!0),c)))}),b&&b.length&&EH(A,b,!0,c.people||[])}catch(w){if(c.WTF)throw w}}function gu(t){return t.charAt(0)=="/"?t.slice(1):t}function sLe(t,e){if(Vv(),e=e||{},SD(e),ju(t,"META-INF/manifest.xml")||ju(t,"objectdata.xml"))return RH(t,e);if(ju(t,"Index/Document.iwa")){if(typeof Uint8Array>"u")throw new Error("NUMBERS file parsing requires Uint8Array support");if(typeof sB<"u"){if(t.FileIndex)return sB(t);var r=Xr.utils.cfb_new();return qV(t).forEach(function(Y){Nn(r,Y,pBe(t,Y))}),sB(r)}throw new Error("Unsupported NUMBERS file")}if(!ju(t,"[Content_Types].xml"))throw ju(t,"index.xml.gz")?new Error("Unsupported NUMBERS 08 file"):ju(t,"index.xml")?new Error("Unsupported NUMBERS 09 file"):new Error("Unsupported ZIP file");var n=qV(t),a=cPe(Qc(t,"[Content_Types].xml")),s=!1,i,l;if(a.workbooks.length===0&&(l="xl/workbook.xml",pi(t,l,!0)&&a.workbooks.push(l)),a.workbooks.length===0){if(l="xl/workbook.bin",!pi(t,l,!0))throw new Error("Could not find workbook");a.workbooks.push(l),s=!0}a.workbooks[0].slice(-3)=="bin"&&(s=!0);var c={},u={};if(!e.bookSheets&&!e.bookProps){if(ab=[],a.sst)try{ab=T8e(pi(t,gu(a.sst)),a.sst,e)}catch(Y){if(e.WTF)throw Y}e.cellStyles&&a.themes.length&&(c=P8e(Qc(t,a.themes[0].replace(/^\//,""),!0)||"",a.themes[0],e)),a.style&&(u=B8e(pi(t,gu(a.style)),a.style,c,e))}a.links.map(function(Y){try{var he=nb(Qc(t,i2(gu(Y))),Y);return O8e(pi(t,gu(Y)),he,Y,e)}catch{}});var d=_8e(pi(t,gu(a.workbooks[0])),a.workbooks[0],e),f={},h="";a.coreprops.length&&(h=pi(t,gu(a.coreprops[0]),!0),h&&(f=bre(h)),a.extprops.length!==0&&(h=pi(t,gu(a.extprops[0]),!0),h&&pPe(h,f,e)));var A={};(!e.bookSheets||e.bookProps)&&a.custprops.length!==0&&(h=Qc(t,gu(a.custprops[0]),!0),h&&(A=xPe(h,e)));var m={};if((e.bookSheets||e.bookProps)&&(d.Sheets?i=d.Sheets.map(function(he){return he.name}):f.Worksheets&&f.SheetNames.length>0&&(i=f.SheetNames),e.bookProps&&(m.Props=f,m.Custprops=A),e.bookSheets&&typeof i<"u"&&(m.SheetNames=i),e.bookSheets?m.SheetNames:e.bookProps))return m;i={};var p={};e.bookDeps&&a.calcchain&&(p=F8e(pi(t,gu(a.calcchain)),a.calcchain));var g=0,x={},y,b;{var w=d.Sheets;f.Worksheets=w.length,f.SheetNames=[];for(var j=0;j!=w.length;++j)f.SheetNames[j]=w[j].name}var I=s?"bin":"xml",_=a.workbooks[0].lastIndexOf("/"),E=(a.workbooks[0].slice(0,_+1)+"_rels/"+a.workbooks[0].slice(_+1)+".rels").replace(/^\//,"");ju(t,E)||(E="xl/_rels/workbook."+I+".rels");var S=nb(Qc(t,E,!0),E.replace(/_rels.*/,"s5s"));(a.metadata||[]).length>=1&&(e.xlmeta=D8e(pi(t,gu(a.metadata[0])),a.metadata[0],e)),(a.people||[]).length>=1&&(e.people=gOe(pi(t,gu(a.people[0])),e)),S&&(S=nLe(S,d.Sheets));var k=pi(t,"xl/worksheets/sheet.xml",!0)?1:0;e:for(g=0;g!=f.Worksheets;++g){var P="sheet";if(S&&S[g]?(y="xl/"+S[g][1].replace(/[\/]?xl\//,""),ju(t,y)||(y=S[g][1]),ju(t,y)||(y=E.replace(/_rels\/.*$/,"")+S[g][1]),P=S[g][2]):(y="xl/worksheets/sheet"+(g+1-k)+"."+I,y=y.replace(/sheet0\./,"sheet.")),b=y.replace(/^(.*)(\/)([^\/]*)$/,"$1/_rels/$3.rels"),e&&e.sheets!=null)switch(typeof e.sheets){case"number":if(g!=e.sheets)continue e;break;case"string":if(f.SheetNames[g].toLowerCase()!=e.sheets.toLowerCase())continue e;break;default:if(Array.isArray&&Array.isArray(e.sheets)){for(var T=!1,F=0;F!=e.sheets.length;++F)typeof e.sheets[F]=="number"&&e.sheets[F]==g&&(T=1),typeof e.sheets[F]=="string"&&e.sheets[F].toLowerCase()==f.SheetNames[g].toLowerCase()&&(T=1);if(!T)continue e}}aLe(t,y,b,f.SheetNames[g],g,x,i,P,e,d,c,u)}return m={Directory:a,Workbook:d,Props:f,Custprops:A,Deps:p,Sheets:i,SheetNames:f.SheetNames,Strings:ab,Styles:u,Themes:c,SSF:ss(an)},e&&e.bookFiles&&(t.files?(m.keys=n,m.files=t.files):(m.keys=[],m.files={},t.FullPaths.forEach(function(Y,he){Y=Y.replace(/^Root Entry[\/]/,""),m.keys.push(Y),m.files[Y]=t.FileIndex[he]}))),e&&e.bookVBA&&(a.vba.length>0?m.vbaraw=pi(t,gu(a.vba[0]),!0):a.defaults&&a.defaults.bin===_Oe&&(m.vbaraw=pi(t,"xl/vbaProject.bin",!0))),m}function iLe(t,e){var r=e||{},n="Workbook",a=Xr.find(t,n);try{if(n="/!DataSpaces/Version",a=Xr.find(t,n),!a||!a.content)throw new Error("ECMA-376 Encrypted file missing "+n);if(Dke(a.content),n="/!DataSpaces/DataSpaceMap",a=Xr.find(t,n),!a||!a.content)throw new Error("ECMA-376 Encrypted file missing "+n);var s=Mke(a.content);if(s.length!==1||s[0].comps.length!==1||s[0].comps[0].t!==0||s[0].name!=="StrongEncryptionDataSpace"||s[0].comps[0].v!=="EncryptedPackage")throw new Error("ECMA-376 Encrypted file bad "+n);if(n="/!DataSpaces/DataSpaceInfo/StrongEncryptionDataSpace",a=Xr.find(t,n),!a||!a.content)throw new Error("ECMA-376 Encrypted file missing "+n);var i=Lke(a.content);if(i.length!=1||i[0]!="StrongEncryptionTransform")throw new Error("ECMA-376 Encrypted file bad "+n);if(n="/!DataSpaces/TransformInfo/StrongEncryptionTransform/!Primary",a=Xr.find(t,n),!a||!a.content)throw new Error("ECMA-376 Encrypted file missing "+n);Qke(a.content)}catch{}if(n="/EncryptionInfo",a=Xr.find(t,n),!a||!a.content)throw new Error("ECMA-376 Encrypted file missing "+n);var l=Vke(a.content);if(n="/EncryptedPackage",a=Xr.find(t,n),!a||!a.content)throw new Error("ECMA-376 Encrypted file missing "+n);if(l[0]==4&&typeof decrypt_agile<"u")return decrypt_agile(l[1],a.content,r.password||"",r);if(l[0]==2&&typeof decrypt_std76<"u")return decrypt_std76(l[1],a.content,r.password||"",r);throw new Error("File is password-protected")}function oLe(t,e){return e.bookType=="ods"?Tne(t,e):e.bookType=="numbers"?tLe(t,e):e.bookType=="xlsb"?lLe(t,e):cLe(t,e)}function lLe(t,e){_x=1024,t&&!t.SSF&&(t.SSF=ss(an)),t&&t.SSF&&(Vv(),E4(t.SSF),e.revssf=I4(t.SSF),e.revssf[t.SSF[65535]]=0,e.ssf=t.SSF),e.rels={},e.wbrels={},e.Strings=[],e.Strings.Count=0,e.Strings.Unique=0,sb?e.revStrings=new Map:(e.revStrings={},e.revStrings.foo=[],delete e.revStrings.foo);var r=e.bookType=="xlsb"?"bin":"xml",n=ine.indexOf(e.bookType)>-1,a=AD();ID(e=e||{});var s=Z6(),i="",l=0;if(e.cellXfs=[],im(e.cellXfs,{},{revssf:{General:0}}),t.Props||(t.Props={}),i="docProps/core.xml",Nn(s,i,wre(t.Props,e)),a.coreprops.push(i),ya(e.rels,2,i,Pn.CORE_PROPS),i="docProps/app.xml",!(t.Props&&t.Props.SheetNames))if(!t.Workbook||!t.Workbook.Sheets)t.Props.SheetNames=t.SheetNames;else{for(var c=[],u=0;u<t.SheetNames.length;++u)(t.Workbook.Sheets[u]||{}).Hidden!=2&&c.push(t.SheetNames[u]);t.Props.SheetNames=c}for(t.Props.Worksheets=t.Props.SheetNames.length,Nn(s,i,_re(t.Props)),a.extprops.push(i),ya(e.rels,3,i,Pn.EXT_PROPS),t.Custprops!==t.Props&&zs(t.Custprops||{}).length>0&&(i="docProps/custom.xml",Nn(s,i,Ere(t.Custprops)),a.custprops.push(i),ya(e.rels,4,i,Pn.CUST_PROPS)),l=1;l<=t.SheetNames.length;++l){var d={"!id":{}},f=t.Sheets[t.SheetNames[l-1]],h=(f||{})["!type"]||"sheet";switch(h){case"chart":default:i="xl/worksheets/sheet"+l+"."+r,Nn(s,i,M8e(l-1,i,e,t,d)),a.sheets.push(i),ya(e.wbrels,-1,"worksheets/sheet"+l+"."+r,Pn.WS[0])}if(f){var A=f["!comments"],m=!1,p="";A&&A.length>0&&(p="xl/comments"+l+"."+r,Nn(s,p,Q8e(A,p)),a.comments.push(p),ya(d,-1,"../comments"+l+"."+r,Pn.CMNT),m=!0),f["!legacy"]&&m&&Nn(s,"xl/drawings/vmlDrawing"+l+".vml",ane(l,f["!comments"])),delete f["!comments"],delete f["!legacy"]}d["!id"].rId1&&Nn(s,i2(i),Ux(d))}return e.Strings!=null&&e.Strings.length>0&&(i="xl/sharedStrings."+r,Nn(s,i,U8e(e.Strings,i,e)),a.strs.push(i),ya(e.wbrels,-1,"sharedStrings."+r,Pn.SST)),i="xl/workbook."+r,Nn(s,i,R8e(t,i)),a.workbooks.push(i),ya(e.rels,1,i,Pn.WB),i="xl/theme/theme1.xml",Nn(s,i,vD(t.Themes,e)),a.themes.push(i),ya(e.wbrels,-1,"theme/theme1.xml",Pn.THEME),i="xl/styles."+r,Nn(s,i,L8e(t,i,e)),a.styles.push(i),ya(e.wbrels,-1,"styles."+r,Pn.STY),t.vbaraw&&n&&(i="xl/vbaProject.bin",Nn(s,i,t.vbaraw),a.vba.push(i),ya(e.wbrels,-1,"vbaProject.bin",Pn.VBA)),i="xl/metadata."+r,Nn(s,i,V8e(i)),a.metadata.push(i),ya(e.wbrels,-1,"metadata."+r,Pn.XLMETA),Nn(s,"[Content_Types].xml",vre(a,e)),Nn(s,"_rels/.rels",Ux(e.rels)),Nn(s,"xl/_rels/workbook."+r+".rels",Ux(e.wbrels)),delete e.revssf,delete e.ssf,s}function cLe(t,e){_x=1024,t&&!t.SSF&&(t.SSF=ss(an)),t&&t.SSF&&(Vv(),E4(t.SSF),e.revssf=I4(t.SSF),e.revssf[t.SSF[65535]]=0,e.ssf=t.SSF),e.rels={},e.wbrels={},e.Strings=[],e.Strings.Count=0,e.Strings.Unique=0,sb?e.revStrings=new Map:(e.revStrings={},e.revStrings.foo=[],delete e.revStrings.foo);var r="xml",n=ine.indexOf(e.bookType)>-1,a=AD();ID(e=e||{});var s=Z6(),i="",l=0;if(e.cellXfs=[],im(e.cellXfs,{},{revssf:{General:0}}),t.Props||(t.Props={}),i="docProps/core.xml",Nn(s,i,wre(t.Props,e)),a.coreprops.push(i),ya(e.rels,2,i,Pn.CORE_PROPS),i="docProps/app.xml",!(t.Props&&t.Props.SheetNames))if(!t.Workbook||!t.Workbook.Sheets)t.Props.SheetNames=t.SheetNames;else{for(var c=[],u=0;u<t.SheetNames.length;++u)(t.Workbook.Sheets[u]||{}).Hidden!=2&&c.push(t.SheetNames[u]);t.Props.SheetNames=c}t.Props.Worksheets=t.Props.SheetNames.length,Nn(s,i,_re(t.Props)),a.extprops.push(i),ya(e.rels,3,i,Pn.EXT_PROPS),t.Custprops!==t.Props&&zs(t.Custprops||{}).length>0&&(i="docProps/custom.xml",Nn(s,i,Ere(t.Custprops)),a.custprops.push(i),ya(e.rels,4,i,Pn.CUST_PROPS));var d=["SheetJ5"];for(e.tcid=0,l=1;l<=t.SheetNames.length;++l){var f={"!id":{}},h=t.Sheets[t.SheetNames[l-1]],A=(h||{})["!type"]||"sheet";switch(A){case"chart":default:i="xl/worksheets/sheet"+l+"."+r,Nn(s,i,gne(l-1,e,t,f)),a.sheets.push(i),ya(e.wbrels,-1,"worksheets/sheet"+l+"."+r,Pn.WS[0])}if(h){var m=h["!comments"],p=!1,g="";if(m&&m.length>0){var x=!1;m.forEach(function(y){y[1].forEach(function(b){b.T==!0&&(x=!0)})}),x&&(g="xl/threadedComments/threadedComment"+l+"."+r,Nn(s,g,pOe(m,d,e)),a.threadedcomments.push(g),ya(f,-1,"../threadedComments/threadedComment"+l+"."+r,Pn.TCMNT)),g="xl/comments"+l+"."+r,Nn(s,g,sne(m)),a.comments.push(g),ya(f,-1,"../comments"+l+"."+r,Pn.CMNT),p=!0}h["!legacy"]&&p&&Nn(s,"xl/drawings/vmlDrawing"+l+".vml",ane(l,h["!comments"])),delete h["!comments"],delete h["!legacy"]}f["!id"].rId1&&Nn(s,i2(i),Ux(f))}return e.Strings!=null&&e.Strings.length>0&&(i="xl/sharedStrings."+r,Nn(s,i,Gre(e.Strings,e)),a.strs.push(i),ya(e.wbrels,-1,"sharedStrings."+r,Pn.SST)),i="xl/workbook."+r,Nn(s,i,wne(t)),a.workbooks.push(i),ya(e.rels,1,i,Pn.WB),i="xl/theme/theme1.xml",Nn(s,i,vD(t.Themes,e)),a.themes.push(i),ya(e.wbrels,-1,"theme/theme1.xml",Pn.THEME),i="xl/styles."+r,Nn(s,i,ene(t,e)),a.styles.push(i),ya(e.wbrels,-1,"styles."+r,Pn.STY),t.vbaraw&&n&&(i="xl/vbaProject.bin",Nn(s,i,t.vbaraw),a.vba.push(i),ya(e.wbrels,-1,"vbaProject.bin",Pn.VBA)),i="xl/metadata."+r,Nn(s,i,nne()),a.metadata.push(i),ya(e.wbrels,-1,"metadata."+r,Pn.XLMETA),d.length>1&&(i="xl/persons/person.xml",Nn(s,i,xOe(d)),a.people.push(i),ya(e.wbrels,-1,"persons/person.xml",Pn.PEOPLE)),Nn(s,"[Content_Types].xml",vre(a,e)),Nn(s,"_rels/.rels",Ux(e.rels)),Nn(s,"xl/_rels/workbook."+r+".rels",Ux(e.wbrels)),delete e.revssf,delete e.ssf,s}function jD(t,e){var r="";switch((e||{}).type||"base64"){case"buffer":return[t[0],t[1],t[2],t[3],t[4],t[5],t[6],t[7]];case"base64":r=Zc(t.slice(0,12));break;case"binary":r=t;break;case"array":return[t[0],t[1],t[2],t[3],t[4],t[5],t[6],t[7]];default:throw new Error("Unrecognized type "+(e&&e.type||"undefined"))}return[r.charCodeAt(0),r.charCodeAt(1),r.charCodeAt(2),r.charCodeAt(3),r.charCodeAt(4),r.charCodeAt(5),r.charCodeAt(6),r.charCodeAt(7)]}function uLe(t,e){return Xr.find(t,"EncryptedPackage")?iLe(t,e):Ene(t,e)}function dLe(t,e){var r,n=t,a=e||{};return a.type||(a.type=En&&Buffer.isBuffer(t)?"buffer":"base64"),r=zte(n,a),sLe(r,a)}function Fne(t,e){var r=0;e:for(;r<t.length;)switch(t.charCodeAt(r)){case 10:case 13:case 32:++r;break;case 60:return Ak(t.slice(r),e);default:break e}return dv.to_workbook(t,e)}function fLe(t,e){var r="",n=jD(t,e);switch(e.type){case"base64":r=Zc(t);break;case"binary":r=t;break;case"buffer":r=t.toString("binary");break;case"array":r=Fp(t);break;default:throw new Error("Unrecognized type "+e.type)}return n[0]==239&&n[1]==187&&n[2]==191&&(r=Ba(r)),e.type="binary",Fne(r,e)}function ALe(t,e){var r=t;return e.type=="base64"&&(r=Zc(r)),r=e2.utils.decode(1200,r.slice(2),"str"),e.type="binary",Fne(r,e)}function hLe(t){return t.match(/[^\x00-\x7F]/)?xf(t):t}function iB(t,e,r,n){return n?(r.type="string",dv.to_workbook(t,r)):dv.to_workbook(e,r)}function A2(t,e){z6();var r=e||{};if(typeof ArrayBuffer<"u"&&t instanceof ArrayBuffer)return A2(new Uint8Array(t),(r=ss(r),r.type="array",r));typeof Uint8Array<"u"&&t instanceof Uint8Array&&!r.type&&(r.type=typeof Deno<"u"?"buffer":"array");var n=t,a=[0,0,0,0],s=!1;if(r.cellStyles&&(r.cellNF=!0,r.sheetStubs=!0),Vx={},r.dateNF&&(Vx.dateNF=r.dateNF),r.type||(r.type=En&&Buffer.isBuffer(t)?"buffer":"base64"),r.type=="file"&&(r.type=En?"buffer":"binary",n=lBe(t),typeof Uint8Array<"u"&&!En&&(r.type="array")),r.type=="string"&&(s=!0,r.type="binary",r.codepage=65001,n=hLe(t)),r.type=="array"&&typeof Uint8Array<"u"&&t instanceof Uint8Array&&typeof ArrayBuffer<"u"){var i=new ArrayBuffer(3),l=new Uint8Array(i);if(l.foo="bar",!l.foo)return r=ss(r),r.type="array",A2(W6(n),r)}switch((a=jD(n,r))[0]){case 208:if(a[1]===207&&a[2]===17&&a[3]===224&&a[4]===161&&a[5]===177&&a[6]===26&&a[7]===225)return uLe(Xr.read(n,r),r);break;case 9:if(a[1]<=8)return Ene(n,r);break;case 60:return Ak(n,r);case 73:if(a[1]===73&&a[2]===42&&a[3]===0)throw new Error("TIFF Image File is not a spreadsheet");if(a[1]===68)return vke(n,r);break;case 84:if(a[1]===65&&a[2]===66&&a[3]===76)return $re.to_workbook(n,r);break;case 80:return a[1]===75&&a[2]<9&&a[3]<9?dLe(n,r):iB(t,n,r,s);case 239:return a[3]===60?Ak(n,r):iB(t,n,r,s);case 255:if(a[1]===254)return ALe(n,r);if(a[1]===0&&a[2]===2&&a[3]===0)return dp.to_workbook(n,r);break;case 0:if(a[1]===0&&(a[2]>=2&&a[3]===0||a[2]===0&&(a[3]===8||a[3]===9)))return dp.to_workbook(n,r);break;case 3:case 131:case 139:case 140:return fk.to_workbook(n,r);case 123:if(a[1]===92&&a[2]===114&&a[3]===116)return Yre.to_workbook(n,r);break;case 10:case 13:case 32:return fLe(n,r);case 137:if(a[1]===80&&a[2]===78&&a[3]===71)throw new Error("PNG Image File is not a spreadsheet");break}return xke.indexOf(a[0])>-1&&a[2]<=12&&a[3]<=31?fk.to_workbook(n,r):iB(t,n,r,s)}function One(t,e){switch(e.type){case"base64":case"binary":break;case"buffer":case"array":e.type="";break;case"file":return ow(e.file,Xr.write(t,{type:En?"buffer":""}));case"string":throw new Error("'string' output type invalid for '"+e.bookType+"' files");default:throw new Error("Unrecognized type "+e.type)}return Xr.write(t,e)}function mLe(t,e){var r=ss(e||{}),n=oLe(t,r);return pLe(n,r)}function pLe(t,e){var r={},n=En?"nodebuffer":typeof Uint8Array<"u"?"array":"string";if(e.compression&&(r.compression="DEFLATE"),e.password)r.type=n;else switch(e.type){case"base64":r.type="base64";break;case"binary":r.type="string";break;case"string":throw new Error("'string' output type invalid for '"+e.bookType+"' files");case"buffer":case"file":r.type=n;break;default:throw new Error("Unrecognized type "+e.type)}var a=t.FullPaths?Xr.write(t,{fileType:"zip",type:{nodebuffer:"buffer",string:"binary"}[r.type]||r.type,compression:!!e.compression}):t.generate(r);if(typeof Deno<"u"&&typeof a=="string"){if(e.type=="binary"||e.type=="base64")return a;a=new Uint8Array(_4(a))}return e.password&&typeof encrypt_agile<"u"?One(encrypt_agile(a,e.password),e):e.type==="file"?ow(e.file,a):e.type=="string"?Ba(a):a}function gLe(t,e){var r=e||{},n=hMe(t,r);return One(n,r)}function uf(t,e,r){r||(r="");var n=r+t;switch(e.type){case"base64":return t2(xf(n));case"binary":return xf(n);case"string":return t;case"file":return ow(e.file,n,"utf8");case"buffer":return En?th(n,"utf8"):typeof TextEncoder<"u"?new TextEncoder().encode(n):uf(n,{type:"binary"}).split("").map(function(a){return a.charCodeAt(0)})}throw new Error("Unrecognized type "+e.type)}function xLe(t,e){switch(e.type){case"base64":return t2(t);case"binary":return t;case"string":return t;case"file":return ow(e.file,t,"binary");case"buffer":return En?th(t,"binary"):t.split("").map(function(r){return r.charCodeAt(0)})}throw new Error("Unrecognized type "+e.type)}function TC(t,e){switch(e.type){case"string":case"base64":case"binary":for(var r="",n=0;n<t.length;++n)r+=String.fromCharCode(t[n]);return e.type=="base64"?t2(r):e.type=="string"?Ba(r):r;case"file":return ow(e.file,t);case"buffer":return t;default:throw new Error("Unrecognized type "+e.type)}}function F4(t,e){z6(),u8e(t);var r=ss(e||{});if(r.cellStyles&&(r.cellNF=!0,r.sheetStubs=!0),r.type=="array"){r.type="binary";var n=F4(t,r);return r.type="array",_4(n)}var a=0;if(r.sheet&&(typeof r.sheet=="number"?a=r.sheet:a=t.SheetNames.indexOf(r.sheet),!t.SheetNames[a]))throw new Error("Sheet not found: "+r.sheet+" : "+typeof r.sheet);switch(r.bookType||"xlsb"){case"xml":case"xlml":return uf(oMe(t,r),r);case"slk":case"sylk":return uf(Hre.from_sheet(t.Sheets[t.SheetNames[a]],r),r);case"htm":case"html":return uf(Ine(t.Sheets[t.SheetNames[a]],r),r);case"txt":return xLe(Dne(t.Sheets[t.SheetNames[a]],r),r);case"csv":return uf(BD(t.Sheets[t.SheetNames[a]],r),r,"\uFEFF");case"dif":return uf($re.from_sheet(t.Sheets[t.SheetNames[a]],r),r);case"dbf":return TC(fk.from_sheet(t.Sheets[t.SheetNames[a]],r),r);case"prn":return uf(dv.from_sheet(t.Sheets[t.SheetNames[a]],r),r);case"rtf":return uf(Yre.from_sheet(t.Sheets[t.SheetNames[a]],r),r);case"eth":return uf(Kre.from_sheet(t.Sheets[t.SheetNames[a]],r),r);case"fods":return uf(Tne(t,r),r);case"wk1":return TC(dp.sheet_to_wk1(t.Sheets[t.SheetNames[a]],r),r);case"wk3":return TC(dp.book_to_wk3(t,r),r);case"biff2":r.biff||(r.biff=2);case"biff3":r.biff||(r.biff=3);case"biff4":return r.biff||(r.biff=4),TC(Sne(t,r),r);case"biff5":r.biff||(r.biff=5);case"biff8":case"xla":case"xls":return r.biff||(r.biff=8),gLe(t,r);case"xlsx":case"xlsm":case"xlam":case"xlsb":case"numbers":case"ods":return mLe(t,r);default:throw new Error("Unrecognized bookType |"+r.bookType+"|")}}function vLe(t){if(!t.bookType){var e={xls:"biff8",htm:"html",slk:"sylk",socialcalc:"eth",Sh33tJS:"WTF"},r=t.file.slice(t.file.lastIndexOf(".")).toLowerCase();r.match(/^\.[a-z]+$/)&&(t.bookType=r.slice(1)),t.bookType=e[t.bookType]||t.bookType}}function pk(t,e,r){var n={};return n.type="file",n.file=e,vLe(n),F4(t,n)}function yLe(t,e,r,n,a,s,i,l){var c=di(r),u=l.defval,d=l.raw||!Object.prototype.hasOwnProperty.call(l,"raw"),f=!0,h=a===1?[]:{};if(a!==1)if(Object.defineProperty)try{Object.defineProperty(h,"__rowNum__",{value:r,enumerable:!1})}catch{h.__rowNum__=r}else h.__rowNum__=r;if(!i||t[r])for(var A=e.s.c;A<=e.e.c;++A){var m=i?t[r][A]:t[n[A]+c];if(m===void 0||m.t===void 0){if(u===void 0)continue;s[A]!=null&&(h[s[A]]=u);continue}var p=m.v;switch(m.t){case"z":if(p==null)break;continue;case"e":p=p==0?null:void 0;break;case"s":case"d":case"b":case"n":break;default:throw new Error("unrecognized type "+m.t)}if(s[A]!=null){if(p==null)if(m.t=="e"&&p===null)h[s[A]]=null;else if(u!==void 0)h[s[A]]=u;else if(d&&p===null)h[s[A]]=null;else continue;else h[s[A]]=d&&(m.t!=="n"||m.t==="n"&&l.rawNumbers!==!1)?p:UA(m,p,l);p!=null&&(f=!1)}}return{row:h,isempty:f}}function bS(t,e){if(t==null||t["!ref"]==null)return[];var r={t:"n",v:0},n=0,a=1,s=[],i=0,l="",c={s:{r:0,c:0},e:{r:0,c:0}},u=e||{},d=u.range!=null?u.range:t["!ref"];switch(u.header===1?n=1:u.header==="A"?n=2:Array.isArray(u.header)?n=3:u.header==null&&(n=0),typeof d){case"string":c=Xn(d);break;case"number":c=Xn(t["!ref"]),c.s.r=d;break;default:c=d}n>0&&(a=0);var f=di(c.s.r),h=[],A=[],m=0,p=0,g=Array.isArray(t),x=c.s.r,y=0,b={};g&&!t[x]&&(t[x]=[]);var w=u.skipHidden&&t["!cols"]||[],j=u.skipHidden&&t["!rows"]||[];for(y=c.s.c;y<=c.e.c;++y)if(!(w[y]||{}).hidden)switch(h[y]=Bs(y),r=g?t[x][y]:t[h[y]+f],n){case 1:s[y]=y-c.s.c;break;case 2:s[y]=h[y];break;case 3:s[y]=u.header[y-c.s.c];break;default:if(r==null&&(r={w:"__EMPTY",t:"s"}),l=i=UA(r,null,u),p=b[i]||0,!p)b[i]=1;else{do l=i+"_"+p++;while(b[l]);b[i]=p,b[l]=1}s[y]=l}for(x=c.s.r+a;x<=c.e.r;++x)if(!(j[x]||{}).hidden){var I=yLe(t,c,x,h,n,s,g,u);(I.isempty===!1||(n===1?u.blankrows!==!1:u.blankrows))&&(A[m++]=I.row)}return A.length=m,A}var VH=/"/g;function bLe(t,e,r,n,a,s,i,l){for(var c=!0,u=[],d="",f=di(r),h=e.s.c;h<=e.e.c;++h)if(n[h]){var A=l.dense?(t[r]||[])[h]:t[n[h]+f];if(A==null)d="";else if(A.v!=null){c=!1,d=""+(l.rawNumbers&&A.t=="n"?A.v:UA(A,null,l));for(var m=0,p=0;m!==d.length;++m)if((p=d.charCodeAt(m))===a||p===s||p===34||l.forceQuotes){d='"'+d.replace(VH,'""')+'"';break}d=="ID"&&(d='"ID"')}else A.f!=null&&!A.F?(c=!1,d="="+A.f,d.indexOf(",")>=0&&(d='"'+d.replace(VH,'""')+'"')):d="";u.push(d)}return l.blankrows===!1&&c?null:u.join(i)}function BD(t,e){var r=[],n=e??{};if(t==null||t["!ref"]==null)return"";var a=Xn(t["!ref"]),s=n.FS!==void 0?n.FS:",",i=s.charCodeAt(0),l=n.RS!==void 0?n.RS:`
`,c=l.charCodeAt(0),u=new RegExp((s=="|"?"\\|":s)+"+$"),d="",f=[];n.dense=Array.isArray(t);for(var h=n.skipHidden&&t["!cols"]||[],A=n.skipHidden&&t["!rows"]||[],m=a.s.c;m<=a.e.c;++m)(h[m]||{}).hidden||(f[m]=Bs(m));for(var p=0,g=a.s.r;g<=a.e.r;++g)(A[g]||{}).hidden||(d=bLe(t,a,g,f,i,c,s,n),d!=null&&(n.strip&&(d=d.replace(u,"")),(d||n.blankrows!==!1)&&r.push((p++?l:"")+d)));return delete n.dense,r.join("")}function Dne(t,e){e||(e={}),e.FS="	",e.RS=`
`;var r=BD(t,e);return r}function wLe(t){var e="",r,n="";if(t==null||t["!ref"]==null)return[];var a=Xn(t["!ref"]),s="",i=[],l,c=[],u=Array.isArray(t);for(l=a.s.c;l<=a.e.c;++l)i[l]=Bs(l);for(var d=a.s.r;d<=a.e.r;++d)for(s=di(d),l=a.s.c;l<=a.e.c;++l)if(e=i[l]+s,r=u?(t[d]||[])[l]:t[e],n="",r!==void 0){if(r.F!=null){if(e=r.F,!r.f)continue;n=r.f,e.indexOf(":")==-1&&(e=e+":"+e)}if(r.f!=null)n=r.f;else{if(r.t=="z")continue;if(r.t=="n"&&r.v!=null)n=""+r.v;else if(r.t=="b")n=r.v?"TRUE":"FALSE";else if(r.w!==void 0)n="'"+r.w;else{if(r.v===void 0)continue;r.t=="s"?n="'"+r.v:n=""+r.v}}c[c.length]=e+"="+n}return c}function Rne(t,e,r){var n=r||{},a=+!n.skipHeader,s=t||{},i=0,l=0;if(s&&n.origin!=null)if(typeof n.origin=="number")i=n.origin;else{var c=typeof n.origin=="string"?Ps(n.origin):n.origin;i=c.r,l=c.c}var u,d={s:{c:0,r:0},e:{c:l,r:i+e.length-1+a}};if(s["!ref"]){var f=Xn(s["!ref"]);d.e.c=Math.max(d.e.c,f.e.c),d.e.r=Math.max(d.e.r,f.e.r),i==-1&&(i=f.e.r+1,d.e.r=i+e.length-1+a)}else i==-1&&(i=0,d.e.r=e.length-1+a);var h=n.header||[],A=0;e.forEach(function(p,g){zs(p).forEach(function(x){(A=h.indexOf(x))==-1&&(h[A=h.length]=x);var y=p[x],b="z",w="",j=sn({c:l+A,r:i+g+a});u=h2(s,j),y&&typeof y=="object"&&!(y instanceof Date)?s[j]=y:(typeof y=="number"?b="n":typeof y=="boolean"?b="b":typeof y=="string"?b="s":y instanceof Date?(b="d",n.cellDates||(b="n",y=Gi(y)),w=n.dateNF||an[14]):y===null&&n.nullError&&(b="e",y=0),u?(u.t=b,u.v=y,delete u.w,delete u.R,w&&(u.z=w)):s[j]=u={t:b,v:y},w&&(u.z=w))})}),d.e.c=Math.max(d.e.c,l+h.length-1);var m=di(i);if(a)for(A=0;A<h.length;++A)s[Bs(A+l)+m]={t:"s",v:h[A]};return s["!ref"]=vn(d),s}function NLe(t,e){return Rne(null,t,e)}function h2(t,e,r){if(typeof e=="string"){if(Array.isArray(t)){var n=Ps(e);return t[n.r]||(t[n.r]=[]),t[n.r][n.c]||(t[n.r][n.c]={t:"z"})}return t[e]||(t[e]={t:"z"})}return typeof e!="number"?h2(t,sn(e)):h2(t,sn({r:e,c:r||0}))}function CLe(t,e){if(typeof e=="number"){if(e>=0&&t.SheetNames.length>e)return e;throw new Error("Cannot find sheet # "+e)}else if(typeof e=="string"){var r=t.SheetNames.indexOf(e);if(r>-1)return r;throw new Error("Cannot find sheet name |"+e+"|")}else throw new Error("Cannot find sheet |"+e+"|")}function PD(){return{SheetNames:[],Sheets:{}}}function TD(t,e,r,n){var a=1;if(!r)for(;a<=65535&&t.SheetNames.indexOf(r="Sheet"+a)!=-1;++a,r=void 0);if(!r||t.SheetNames.length>=65535)throw new Error("Too many worksheets");if(n&&t.SheetNames.indexOf(r)>=0){var s=r.match(/(^.*?)(\d+)$/);a=s&&+s[2]||0;var i=s&&s[1]||r;for(++a;a<=65535&&t.SheetNames.indexOf(r=i+a)!=-1;++a);}if(bne(r),t.SheetNames.indexOf(r)>=0)throw new Error("Worksheet with name |"+r+"| already exists!");return t.SheetNames.push(r),t.Sheets[r]=e,r}function _Le(t,e,r){t.Workbook||(t.Workbook={}),t.Workbook.Sheets||(t.Workbook.Sheets=[]);var n=CLe(t,e);switch(t.Workbook.Sheets[n]||(t.Workbook.Sheets[n]={}),r){case 0:case 1:case 2:break;default:throw new Error("Bad sheet visibility setting "+r)}t.Workbook.Sheets[n].Hidden=r}function ELe(t,e){return t.z=e,t}function Mne(t,e,r){return e?(t.l={Target:e},r&&(t.l.Tooltip=r)):delete t.l,t}function SLe(t,e,r){return Mne(t,"#"+e,r)}function ILe(t,e,r){t.c||(t.c=[]),t.c.push({t:e,a:r||"SheetJS"})}function jLe(t,e,r,n){for(var a=typeof e!="string"?e:Xn(e),s=typeof e=="string"?e:vn(e),i=a.s.r;i<=a.e.r;++i)for(var l=a.s.c;l<=a.e.c;++l){var c=h2(t,i,l);c.t="n",c.F=s,delete c.v,i==a.s.r&&l==a.s.c&&(c.f=r,n&&(c.D=!0))}return t}var Is={encode_col:Bs,encode_row:di,encode_cell:sn,encode_range:vn,decode_col:oD,decode_row:iD,split_cell:UBe,decode_cell:Ps,decode_range:mc,format_cell:UA,sheet_add_aoa:fre,sheet_add_json:Rne,sheet_add_dom:jne,aoa_to_sheet:Hv,json_to_sheet:NLe,table_to_sheet:Bne,table_to_book:DMe,sheet_to_csv:BD,sheet_to_txt:Dne,sheet_to_json:bS,sheet_to_html:Ine,sheet_to_formulae:wLe,sheet_to_row_object_array:bS,sheet_get_cell:h2,book_new:PD,book_append_sheet:TD,book_set_sheet_visibility:_Le,cell_set_number_format:ELe,cell_set_hyperlink:Mne,cell_set_internal_link:SLe,cell_add_comment:ILe,sheet_set_array_formula:jLe,consts:{SHEET_VISIBLE:0,SHEET_HIDDEN:1,SHEET_VERY_HIDDEN:2}};const oB=t=>`C$ ${(Number(t)||0).toFixed(2)}`;function Qa(t){return String(t??"").trim().replace(/\s+/g," ").toLowerCase()}function aA(t,e=0){const r=Number(String(t??"").replace(",","."));return Number.isFinite(r)?r:e}function Uh(t,e=1){const r=Math.floor(aA(t,e));return r>0?r:e}function BLe(t){return Object.values(t||{}).every(r=>Qa(r)==="")}function wm(t,e){const r=Object.keys(t||{}),n=new Map;r.forEach(a=>n.set(Qa(a),a));for(const a of e){const s=n.get(Qa(a));if(s!=null)return t[s]}}function PLe({open:t,code:e,onClose:r}){return t?o.jsx("div",{className:"fixed inset-0 bg-black/40 flex items-center justify-center z-50 p-3",children:o.jsxs("div",{className:"bg-white w-full max-w-sm rounded-2xl shadow-lg border p-4",children:[o.jsxs("div",{className:"flex items-center justify-between mb-2",children:[o.jsx("div",{className:"font-bold text-lg",children:"Cdigo de barras"}),o.jsx("button",{className:"px-3 py-1 rounded bg-gray-200 hover:bg-gray-300",onClick:r,type:"button",children:"Cerrar"})]}),o.jsxs("div",{className:"bg-gray-50 border rounded-xl p-3",children:[o.jsx("div",{className:"text-xs text-gray-600 mb-1",children:"Valor"}),o.jsx("div",{className:"text-xl font-mono font-semibold break-all",children:e})]}),o.jsx("div",{className:"mt-3 flex gap-2 justify-end",children:o.jsx("button",{className:"px-3 py-2 rounded bg-indigo-600 text-white hover:bg-indigo-700",type:"button",onClick:()=>{var n;try{(n=navigator.clipboard)==null||n.writeText(e)}catch{}},children:"Copiar"})})]})}):null}function TLe({open:t,onClose:e,onDetected:r}){const n=v.useRef(null),a=v.useRef(null),[s,i]=v.useState(""),l=v.useRef("");return v.useEffect(()=>{if(!t)return;let c=!1;const u=new Zb,d=()=>{var h,A,m;try{(h=a.current)==null||h.stop()}catch{}a.current=null;try{const p=(A=n.current)==null?void 0:A.srcObject;(m=p==null?void 0:p.getTracks)==null||m.call(p).forEach(g=>g.stop())}catch{}try{n.current&&(n.current.srcObject=null)}catch{}};return(async()=>{i("");try{if(!n.current)return;try{(await navigator.mediaDevices.getUserMedia({video:{facingMode:{ideal:"environment"}},audio:!1})).getTracks().forEach(m=>m.stop())}catch{}const h=await u.decodeFromConstraints({video:{facingMode:{ideal:"environment"},width:{ideal:1280},height:{ideal:720}},audio:!1},n.current,A=>{if(!c&&A){const m=String(A.getText()||"").trim().replace(/\s+/g,"");if(!m||m===l.current)return;l.current=m,d(),r(m),e()}});a.current=h}catch(h){const A=String((h==null?void 0:h.message)||""),m=String((h==null?void 0:h.name)||"");A.toLowerCase().includes("permission")||m==="NotAllowedError"?i("Permiso de cmara denegado."):m==="NotFoundError"||A.toLowerCase().includes("notfound")?i("No se encontr cmara en este dispositivo."):A.toLowerCase().includes("secure")||A.toLowerCase().includes("https")?i("La cmara requiere HTTPS (sitio seguro)."):i(A||"No se pudo iniciar el escner.")}})(),()=>{c=!0,d()}},[t,e,r]),t?o.jsx("div",{className:"fixed inset-0 bg-black/70 z-50 p-3 flex items-center justify-center",children:o.jsxs("div",{className:"bg-white w-full max-w-md rounded-2xl shadow-lg border overflow-hidden",children:[o.jsxs("div",{className:"flex items-center justify-between p-3 border-b",children:[o.jsx("div",{className:"font-bold",children:"Escanear cdigo"}),o.jsx("button",{className:"px-3 py-1 rounded bg-gray-200 hover:bg-gray-300",onClick:e,type:"button",children:"Cerrar"})]}),o.jsxs("div",{className:"p-3",children:[o.jsxs("div",{className:"relative w-full aspect-[3/4] bg-black rounded-xl overflow-hidden",children:[o.jsx("video",{ref:n,className:"w-full h-full object-cover",muted:!0,playsInline:!0,autoPlay:!0}),o.jsx("div",{className:"absolute inset-0 pointer-events-none",children:o.jsx("div",{className:"absolute left-1/2 top-1/2 -translate-x-1/2 -translate-y-1/2 w-[85%] h-40 border-2 border-white/70 rounded-xl"})})]}),s&&o.jsx("div",{className:"mt-3 text-sm text-red-600 bg-red-50 border border-red-200 rounded p-2",children:s}),o.jsx("div",{className:"mt-2 text-xs text-gray-600",children:"Apunt al cdigo de barras y mantenelo estable."})]})]})}):null}function kLe(){const{refreshKey:t,refresh:e}=xc(),[r,n]=v.useState(!0),[a,s]=v.useState(""),[i,l]=v.useState([]),[c,u]=v.useState(""),[d,f]=v.useState(""),[h,A]=v.useState(0),[m,p]=v.useState(1),[g,x]=v.useState(""),[y,b]=v.useState(""),[w,j]=v.useState(null),[I,_]=v.useState(""),[E,S]=v.useState(""),[k,P]=v.useState(0),[T,F]=v.useState(1),[Y,he]=v.useState(""),[ue,fe]=v.useState(""),[me,ne]=v.useState(""),[Pe,Ie]=v.useState(""),[O,H]=v.useState(""),[R,M]=v.useState(!1),[K,W]=v.useState(""),[D,L]=v.useState(!1),[Z,ge]=v.useState("create"),[U,Ge]=v.useState(!1),[ie,J]=v.useState(""),[je,z]=v.useState([]),[Ae,ye]=v.useState([]),[Qe,st]=v.useState(!1),[ut,De]=v.useState(!1);v.useEffect(()=>{var q;const Ke=window.matchMedia("(max-width: 900px)"),wt=()=>De(Ke.matches);return wt(),(q=Ke.addEventListener)==null||q.call(Ke,"change",wt),()=>{var ae;return(ae=Ke.removeEventListener)==null?void 0:ae.call(Ke,"change",wt)}},[]);const[it,dt]=v.useState(!0),[ce,oe]=v.useState(!0);v.useEffect(()=>{ut?(dt(!1),oe(!1)):(dt(!0),oe(!0))},[ut]);const[Me,Le]=v.useState(null);v.useEffect(()=>{n(!0),s("");const Ke=ht(ke,"products_candies"),wt=nr(Ke,on("name","asc")),q=Fd(wt,ae=>{const ee=[],be={};ae.forEach(tt=>{const ot=tt.data(),te=String(ot.barcode||"").trim()||void 0;te&&(be[tt.id]=te),ee.push({id:tt.id,name:ot.name||"",category:ot.category||"",providerPrice:Number(ot.providerPrice||0),unitsPerPackage:Number(ot.unitsPerPackage||1),barcode:te,packaging:String(ot.packaging||ot.empaque||"").trim()||void 0,createdAt:ot.createdAt})});const _e=ve.current||{};let Be=!1;for(const tt of Object.keys(be))if((be[tt]||"")!==(_e[tt]||"")){Be=!0;break}l(ee),ve.current=be,n(!1),!le.current&&Be&&(s(" Catlogo actualizado."),setTimeout(()=>s(""),3e3)),le.current=!1},ae=>{console.error(ae),s(" Error sincronizando catlogo de dulces."),n(!1)});return()=>q()},[t]);const ve=v.useRef({}),le=v.useRef(!0),Ue=v.useMemo(()=>{const Ke=Qa(me),wt=String(Pe||"").trim(),q=String(O||"").trim().toLowerCase();return q?i.filter(ae=>String(ae.packaging||"").trim().toLowerCase()===q):!Ke&&!wt?i:i.filter(ae=>{const ee=`${ae.category} ${ae.name}`.toLowerCase(),be=Ke?ee.includes(Ke):!0,_e=String(ae.barcode||""),Be=wt?_e.includes(wt):!0;return be&&Be})},[i,me,Pe,O]),rt=v.useMemo(()=>{const Ke=new Set;return i.forEach(wt=>{const q=String(wt.category||"").trim();q&&Ke.add(q)}),Array.from(Ke).sort((wt,q)=>wt.localeCompare(q,"es"))},[i]),mt=()=>{u(""),f(""),A(0),p(1),x(""),b("")},gt=async Ke=>{Ke.preventDefault(),s("");const wt=String(c||"").trim(),q=String(d||"").trim(),ae=Math.max(0,aA(h,0)),ee=Uh(m,1),be=String(g||"").trim();if(!wt)return s(" La categora es requerida.");if(!q)return s(" El nombre del producto es requerido.");if(ae<=0)return s(" El precio proveedor debe ser > 0.");if(ee<=0)return s(" Und x paquete debe ser > 0.");if(i.some(Be=>Qa(Be.category)===Qa(wt)&&Qa(Be.name)===Qa(q)))return s(" Ya existe un producto con esa categora y nombre.");if(be&&i.some(tt=>String(tt.barcode||"")===be))return s(" Ya existe un producto con ese cdigo de barras.");try{n(!0);const Be={category:wt,name:q,providerPrice:ae,unitsPerPackage:ee,createdAt:fr.now()};be&&(Be.barcode=be);const tt=String(y||"").trim();tt&&(Be.packaging=tt);const ot=await xn(ht(ke,"products_candies"),Be);l(te=>[...te,{id:ot.id,...Be}].sort((V,re)=>V.name.localeCompare(re.name,"es"))),s(" Producto creado."),mt()}catch(Be){console.error(Be),s(" Error creando producto.")}finally{n(!1)}},Ct=Ke=>{j(Ke.id),_(Ke.category),S(Ke.name),P(Ke.providerPrice),F(Ke.unitsPerPackage||1),he(String(Ke.barcode||"")),fe(String(Ke.packaging||"")),s("")},jt=()=>{j(null),_(""),S(""),P(0),F(1),he(""),fe("")},xe=async()=>{if(!w)return;s("");const Ke=String(I||"").trim(),wt=String(E||"").trim(),q=Math.max(0,aA(k,0)),ae=Uh(T,1),ee=String(Y||"").trim(),be=String(ue||"").trim();if(!Ke)return s(" La categora es requerida.");if(!wt)return s(" El nombre del producto es requerido.");if(q<=0)return s(" El precio proveedor debe ser > 0.");if(ae<=0)return s(" Und x paquete debe ser > 0.");if(i.some(Be=>Be.id!==w&&Qa(Be.category)===Qa(Ke)&&Qa(Be.name)===Qa(wt)))return s(" Ya existe otro producto con esa categora y nombre.");if(ee&&i.some(tt=>tt.id!==w&&String(tt.barcode||"")===ee))return s(" Ya existe otro producto con ese cdigo de barras.");try{n(!0);const Be={category:Ke,name:wt,providerPrice:q,unitsPerPackage:ae,updatedAt:fr.now()};Be.barcode=ee||"",Be.packaging=be||"",await nn(qt(ke,"products_candies",w),Be),l(tt=>tt.map(ot=>ot.id===w?{...ot,category:Ke,name:wt,providerPrice:q,unitsPerPackage:ae,barcode:ee||void 0,packaging:be||void 0}:ot).sort((ot,te)=>ot.name.localeCompare(te.name,"es"))),ut&&s(" Producto guardado."),jt()}catch(Be){console.error(Be),s(" Error actualizando producto.")}finally{n(!1)}},He=async Ke=>{if(confirm(`Eliminar "${Ke.name}" (${Ke.category}) del catlogo?`))try{n(!0),await Cn(qt(ke,"products_candies",Ke.id)),l(q=>q.filter(ae=>ae.id!==Ke.id)),s(" Producto eliminado.")}catch(q){console.error(q),s(" Error eliminando producto.")}finally{n(!1)}},Ce=()=>{const Ke=[{Id:"",Categoria:"Gomitas",Producto:"Gomita Fresa",PrecioProveedor:120,UnidadesPorPaquete:24,Empaque:"Tarro",Codigo:"7445074183182"}],wt=Is.json_to_sheet(Ke),q=Is.book_new();Is.book_append_sheet(q,wt,"Productos");const ae=F4(q,{type:"array",bookType:"xlsx"}),ee=new Blob([ae],{type:"application/vnd.openxmlformats-officedocument.spreadsheetml.sheet"}),be=URL.createObjectURL(ee),_e=document.createElement("a");_e.href=be,_e.download="template_productos_dulces.xlsx",document.body.appendChild(_e),_e.click(),_e.remove(),URL.revokeObjectURL(be)},lt=Ke=>{const wt=[],q=[];Ke.forEach((ee,be)=>{if(!ee||typeof ee!="object"||BLe(ee))return;const _e=String(wm(ee,["Id","ID","productId","docId"])??"").trim(),Be=String(wm(ee,["Categoria","Categora","Category","cat","category"])??"").trim(),tt=String(wm(ee,["Producto","Product","Nombre","Name","producto","name"])??"").trim(),ot=wm(ee,["PrecioProveedor","Precio Prov","Precio Prov.","ProviderPrice","Precio","Costo","providerPrice"]),te=wm(ee,["UnidadesPorPaquete","Und x Paquete","UnitsPerPackage","UPP","unitsPerPackage"]),V=wm(ee,["Codigo","Cdigo","Barcode","barcode","EAN","UPC","Code"]),re=String(V??"").trim(),pe=wm(ee,["Empaque","Packaging","PackagingType","Pack","Formato"]),Ee=String(pe??"").trim(),Se=Math.max(0,aA(ot,0)),Re=Uh(te,1),et=be+2;Be||q.push(`Fila ${et}: falta Categoria.`),tt||q.push(`Fila ${et}: falta Producto/Nombre.`),Se<=0&&q.push(`Fila ${et}: PrecioProveedor debe ser > 0.`),Re<=0&&q.push(`Fila ${et}: UnidadesPorPaquete debe ser > 0.`),Be&&tt&&Se>0&&Re>0&&wt.push({id:_e||void 0,category:Be,name:tt,providerPrice:Se,unitsPerPackage:Re,barcode:re||void 0,packaging:Ee||void 0,_raw:ee})});const ae=new Map;for(const ee of wt){const be=ee.id?`id::${ee.id}`:`${Qa(ee.category)}::${Qa(ee.name)}`;ae.set(be,ee)}return{rows:Array.from(ae.values()),errors:q}},nt=async Ke=>{if(s(""),ye([]),z([]),J((Ke==null?void 0:Ke.name)||""),!Ke)return;const wt=Ke.name.toLowerCase(),q=wt.endsWith(".xlsx")||wt.endsWith(".xls"),ae=wt.endsWith(".csv");if(!q&&!ae){ye(["Solo se permiten archivos .xlsx, .xls o .csv"]);return}try{st(!0);const ee=new FileReader,be=await new Promise((re,pe)=>{ee.onerror=()=>pe(new Error("No se pudo leer el archivo.")),ee.onload=()=>re(ee.result),ee.readAsArrayBuffer(Ke)}),_e=A2(new Uint8Array(be),{type:"array"}),Be=_e.SheetNames[0],tt=_e.Sheets[Be],ot=Is.sheet_to_json(tt,{defval:""}),{rows:te,errors:V}=lt(ot);z(te),ye(V),te.length===0&&V.length===0&&ye(["No se encontraron filas vlidas para importar."])}catch(ee){console.error(ee),ye(["Error leyendo el archivo. Revis que no est corrupto."])}finally{st(!1)}},Xe=(Ke,wt)=>{z(q=>{const ae=[...q],ee=ae[Ke];return ee?(ae[Ke]={...ee,...wt},ae):q})},It=async()=>{if(s(""),Ae.length>0){s(" Correg los errores antes de importar.");return}if(je.length===0){s(" No hay filas para importar.");return}try{st(!0);const Ke={},wt={},q={};i.forEach(_e=>{Ke[_e.id]=_e,wt[`${Qa(_e.category)}::${Qa(_e.name)}`]=_e;const Be=String(_e.barcode||"").trim();Be&&(q[Be]=_e)});const ae=tg(ke);let ee=0,be=0;for(const _e of je){const Be=String(_e.category||"").trim(),tt=String(_e.name||"").trim(),ot=Math.max(0,aA(_e.providerPrice,0)),te=Uh(_e.unitsPerPackage,1),V=String(_e.barcode||"").trim();if(!Be||!tt||ot<=0||te<=0)continue;let re;if(_e.id&&Ke[_e.id])re=Ke[_e.id];else{const pe=`${Qa(Be)}::${Qa(tt)}`;re=wt[pe]}if(!re&&V&&q[V]&&(re=q[V]),re){const pe={category:Be,name:tt,providerPrice:ot,unitsPerPackage:te,updatedAt:fr.now()};_e.barcode!=null&&(pe.barcode=V||""),_e.packaging!=null&&(pe.packaging=String(_e.packaging||"")||""),ae.update(qt(ke,"products_candies",re.id),pe),be+=1}else{const pe=qt(ht(ke,"products_candies")),Ee={category:Be,name:tt,providerPrice:ot,unitsPerPackage:te,createdAt:fr.now()};V&&(Ee.barcode=V),_e.packaging&&(Ee.packaging=_e.packaging),ae.set(pe,Ee),ee+=1}}await ae.commit(),s(` Importacin lista. Creados: ${ee}, Actualizados: ${be}`),Ge(!1),z([]),ye([]),J(""),e()}catch(Ke){console.error(Ke),s(" Error importando productos a Firestore.")}finally{st(!1)}},$t=v.useMemo(()=>{const Ke=new Set(i.map(be=>be.id)),wt=new Set(i.map(be=>`${Qa(be.category)}::${Qa(be.name)}`)),q=new Set(i.map(be=>String(be.barcode||"").trim()).filter(Boolean));let ae=0,ee=0;for(const be of je){if(be.id&&Ke.has(be.id)){ae+=1;continue}const _e=`${Qa(be.category)}::${Qa(be.name)}`;if(wt.has(_e)){ae+=1;continue}const Be=String(be.barcode||"").trim();if(Be&&q.has(Be)){ae+=1;continue}ee+=1}return{willCreate:ee,willUpdate:ae,total:je.length}},[je,i]);return o.jsxs("div",{className:"max-w-7xl mx-auto",children:[o.jsxs("div",{className:"flex items-center justify-between mb-3",children:[o.jsx("h2",{className:"text-2xl font-bold",children:"Catalogo"}),o.jsx("div",{className:"flex gap-2",children:o.jsxs("div",{className:"flex gap-2",children:[o.jsx(gc,{onClick:e,loading:r||Qe}),!ut&&o.jsx("button",{type:"button",className:"px-3 py-2 rounded bg-white border shadow-sm",onClick:()=>{Ge(!0),z([]),ye([]),J("")},children:"Importar"})]})})]}),ut&&o.jsxs("div",{className:"flex flex-col gap-2 mb-3",children:[o.jsx("button",{type:"button",className:"w-full px-3 py-2 rounded bg-gray-900 text-white",onClick:()=>dt(Ke=>!Ke),children:it?"Ocultar creacin":"Crear producto"}),o.jsx("button",{type:"button",className:"w-full px-3 py-2 rounded bg-white border shadow-sm",onClick:()=>{Ge(!0),z([]),ye([]),J("")},children:"Importar"}),o.jsx("button",{type:"button",className:"w-full px-3 py-2 rounded bg-gray-200",onClick:()=>oe(Ke=>!Ke),children:ce?"Ocultar filtros":"Mostrar filtros"}),ce&&o.jsxs("div",{className:"bg-white p-3 rounded shadow-sm border",children:[o.jsx("label",{className:"block font-semibold",children:"Empaque"}),o.jsxs("select",{className:"w-full border rounded px-2 py-1",value:O,onChange:Ke=>H(Ke.target.value),children:[o.jsx("option",{value:"",children:"Todos"}),o.jsx("option",{value:"Tarro",children:"Tarro"}),o.jsx("option",{value:"Bolsa",children:"Bolsa"}),o.jsx("option",{value:"Ristra",children:"Ristra"}),o.jsx("option",{value:"Caja",children:"Caja"}),o.jsx("option",{value:"Vaso",children:"Vaso"}),o.jsx("option",{value:"Pana",children:"Pana"})]})]})]}),it&&o.jsxs("form",{onSubmit:gt,className:"bg-white p-3 rounded shadow border mb-4 grid grid-cols-1 md:grid-cols-6 gap-3 items-end text-sm",children:[o.jsxs("div",{children:[o.jsx("label",{className:"block font-semibold",children:"Categora"}),o.jsx("input",{className:"w-full border rounded px-2 py-1",value:c,onChange:Ke=>u(Ke.target.value),placeholder:"Ej: Gomitas"})]}),o.jsxs("div",{className:"md:col-span-2",children:[o.jsx("label",{className:"block font-semibold",children:"Producto"}),o.jsx("input",{className:"w-full border rounded px-2 py-1",value:d,onChange:Ke=>f(Ke.target.value),placeholder:"Ej: Gomita Fresa"})]}),o.jsxs("div",{children:[o.jsx("label",{className:"block font-semibold",children:"Empaque"}),o.jsxs("select",{className:"w-full border rounded px-2 py-1",value:y,onChange:Ke=>b(Ke.target.value),children:[o.jsx("option",{value:"",children:"Seleccionar"}),o.jsx("option",{value:"Tarro",children:"Tarro"}),o.jsx("option",{value:"Bolsa",children:"Bolsa"}),o.jsx("option",{value:"Ristra",children:"Ristra"}),o.jsx("option",{value:"Caja",children:"Caja"}),o.jsx("option",{value:"Vaso",children:"Vaso"}),o.jsx("option",{value:"Pana",children:"Pana"})]})]}),o.jsxs("div",{children:[o.jsx("label",{className:"block font-semibold",children:"Empaque"}),o.jsxs("select",{className:"w-full border rounded px-2 py-1",value:y,onChange:Ke=>b(Ke.target.value),children:[o.jsx("option",{value:"",children:""}),o.jsx("option",{value:"Tarro",children:"Tarro"}),o.jsx("option",{value:"Bolsa",children:"Bolsa"}),o.jsx("option",{value:"Ristra",children:"Ristra"}),o.jsx("option",{value:"Caja",children:"Caja"}),o.jsx("option",{value:"Vaso",children:"Vaso"}),o.jsx("option",{value:"Pana",children:"Pana"})]})]}),o.jsxs("div",{children:[o.jsx("label",{className:"block font-semibold",children:"Precio proveedor (paq)"}),o.jsx("input",{type:"number",step:"0.01",inputMode:"decimal",className:"w-full border rounded px-2 py-1 text-right",value:Number.isNaN(h)?"":h,onChange:Ke=>A(Math.max(0,aA(Ke.target.value,0)))})]}),o.jsxs("div",{children:[o.jsx("label",{className:"block font-semibold",children:"Und x paquete"}),o.jsx("input",{type:"number",min:1,className:"w-full border rounded px-2 py-1 text-right",value:m,onChange:Ke=>p(Uh(Ke.target.value,1))})]}),o.jsxs("div",{children:[o.jsx("label",{className:"block font-semibold",children:"Cdigo (opcional)"}),o.jsxs("div",{className:"flex gap-2",children:[o.jsx("input",{className:"w-full border rounded px-2 py-1",value:g,onChange:Ke=>x(Ke.target.value),placeholder:"EAN/UPC"}),o.jsx("button",{type:"button",className:"px-3 py-2 rounded bg-gray-800 text-white hover:bg-black whitespace-nowrap",onClick:()=>{ge("create"),L(!0)},children:"Escanear"})]})]}),o.jsxs("div",{className:"md:col-span-6 flex justify-end gap-2",children:[o.jsx("button",{type:"button",className:"px-3 py-2 rounded bg-gray-200 hover:bg-gray-300",onClick:mt,children:"Limpiar"}),o.jsx("button",{type:"submit",className:"px-3 py-2 rounded bg-green-600 text-white hover:bg-green-700",disabled:r,children:"Crear producto"})]})]}),ce&&o.jsxs("div",{className:"bg-white p-3 rounded shadow border mb-3 flex flex-col md:flex-row gap-3 items-center text-sm",children:[o.jsxs("div",{className:"w-full md:w-1/2",children:[o.jsx("label",{className:"block font-semibold",children:"Buscar"}),o.jsx("input",{className:"w-full border rounded px-2 py-1",value:me,onChange:Ke=>ne(Ke.target.value),placeholder:"Buscar por categora o producto"}),o.jsxs("div",{className:"mt-2",children:[o.jsx("label",{className:"block font-semibold",children:"Empaque"}),o.jsxs("select",{className:"w-full border rounded px-2 py-1",value:O,onChange:Ke=>H(Ke.target.value),children:[o.jsx("option",{value:"",children:"Todos"}),o.jsx("option",{value:"Tarro",children:"Tarro"}),o.jsx("option",{value:"Bolsa",children:"Bolsa"}),o.jsx("option",{value:"Ristra",children:"Ristra"}),o.jsx("option",{value:"Caja",children:"Caja"}),o.jsx("option",{value:"Vaso",children:"Vaso"}),o.jsx("option",{value:"Pana",children:"Pana"})]})]})]}),o.jsxs("div",{className:"w-full md:w-1/2",children:[o.jsx("label",{className:"block font-semibold",children:"Buscar por cdigo"}),o.jsx("input",{className:"w-full border rounded px-2 py-1",value:Pe,onChange:Ke=>Ie(Ke.target.value),placeholder:"Ej: 7445074183182"}),o.jsx("div",{className:"mt-2 md:mt-0",children:o.jsx("button",{type:"button",className:"w-full md:w-auto px-3 py-2 rounded bg-gray-800 text-white",onClick:()=>{ge("search"),L(!0),oe(!0)},children:"Escanear producto"})}),o.jsx("div",{className:"mt-2 md:mt-0",children:o.jsx("button",{type:"button",className:"w-full md:w-auto px-3 py-2 rounded bg-gray-200 hover:bg-gray-300",onClick:()=>{ne(""),Ie("")},children:"Limpiar filtros"})})]}),o.jsxs("div",{className:"w-full md:w-auto text-right",children:[o.jsx("div",{className:"text-xs text-gray-600",children:"Productos en catlogo"}),o.jsx("div",{className:"text-lg font-semibold",children:Ue.length})]})]}),ut?o.jsx("div",{className:"space-y-2",children:r?o.jsx("div",{className:"bg-white border rounded p-4 text-center",children:"Cargando"}):Ue.length===0?o.jsx("div",{className:"bg-white border rounded p-4 text-center",children:"Sin productos."}):Ue.map(Ke=>{const wt=w===Ke.id,q=Me===Ke.id,ae=!!String(Ke.barcode||"").trim();return o.jsxs("div",{className:"bg-white border rounded-2xl shadow-sm overflow-hidden",children:[o.jsxs("button",{type:"button",className:"w-full px-3 py-3 flex items-center justify-between text-left",onClick:()=>Le(ee=>ee===Ke.id?null:Ke.id),children:[o.jsxs("div",{className:"min-w-0",children:[o.jsx("div",{className:"font-bold truncate",children:Ke.name}),o.jsx("div",{className:"text-xs text-gray-600 truncate",children:Ke.category})]}),o.jsxs("div",{className:"text-right",children:[o.jsx("div",{className:"text-xs text-gray-600",children:"Precio proveedor"}),o.jsx("div",{className:"font-bold tabular-nums",children:oB(Ke.providerPrice)})]})]}),q&&o.jsx("div",{className:"px-3 pb-3 border-t",children:o.jsxs("div",{className:"pt-3 space-y-2 text-sm",children:[o.jsxs("div",{className:"grid grid-cols-2 gap-2",children:[o.jsxs("div",{children:[o.jsx("div",{className:"text-xs text-gray-600",children:"Categora"}),wt?o.jsx("input",{className:"w-full border rounded px-2 py-1",value:I,onChange:ee=>_(ee.target.value)}):o.jsx("div",{className:"font-semibold",children:Ke.category})]}),o.jsxs("div",{children:[o.jsx("div",{className:"text-xs text-gray-600",children:"Und x paquete"}),wt?o.jsx("input",{type:"number",min:1,className:"w-full border rounded px-2 py-1 text-right",value:T,onChange:ee=>F(Uh(ee.target.value,1))}):o.jsx("div",{className:"font-semibold text-right tabular-nums",children:Ke.unitsPerPackage})]}),o.jsxs("div",{className:"col-span-2",children:[o.jsx("div",{className:"text-xs text-gray-600",children:"Empaque"}),wt?o.jsxs("select",{className:"w-full border rounded px-2 py-1",value:ue,onChange:ee=>fe(ee.target.value),children:[o.jsx("option",{value:"",children:"Seleccionar"}),o.jsx("option",{value:"Tarro",children:"Tarro"}),o.jsx("option",{value:"Bolsa",children:"Bolsa"}),o.jsx("option",{value:"Ristra",children:"Ristra"}),o.jsx("option",{value:"Caja",children:"Caja"}),o.jsx("option",{value:"Vaso",children:"Vaso"}),o.jsx("option",{value:"Pana",children:"Pana"})]}):o.jsx("div",{className:"font-semibold",children:Ke.packaging||""})]}),o.jsxs("div",{children:[o.jsx("div",{className:"text-xs text-gray-600",children:"Precio proveedor"}),wt?o.jsx("input",{type:"number",step:"0.01",inputMode:"decimal",className:"w-full border rounded px-2 py-1 text-right",value:Number.isNaN(k)?"":k,onChange:ee=>P(Math.max(0,aA(ee.target.value,0)))}):o.jsx("div",{className:"font-semibold tabular-nums",children:oB(Ke.providerPrice)})]}),o.jsxs("div",{children:[o.jsx("div",{className:"text-xs text-gray-600",children:"Cdigo"}),wt?o.jsxs("div",{className:"flex gap-2",children:[o.jsx("input",{className:"flex-1 border rounded px-2 py-1",value:Y,onChange:ee=>he(ee.target.value),placeholder:"EAN/UPC"}),o.jsx("button",{type:"button",className:"px-3 py-2 rounded bg-gray-800 text-white",onClick:()=>{ge("edit"),L(!0)},children:"Escanear"})]}):ae?o.jsx("button",{type:"button",className:"px-2 py-1 rounded bg-green-100 text-green-700 hover:bg-green-200",onClick:()=>{W(String(Ke.barcode||"").trim()),M(!0)},children:"Ver cdigo"}):o.jsx("div",{className:"text-gray-600",children:"No"})]})]}),o.jsx("div",{className:"pt-2 flex gap-2",children:wt?o.jsxs(o.Fragment,{children:[o.jsx("button",{className:"flex-1 px-3 py-2 rounded bg-blue-600 text-white",onClick:xe,type:"button",children:"Guardar"}),o.jsx("button",{className:"flex-1 px-3 py-2 rounded bg-gray-800 text-white",onClick:()=>{ge("edit"),L(!0)},type:"button",children:"Escanear"}),o.jsx("button",{className:"flex-1 px-3 py-2 rounded bg-gray-200",onClick:jt,type:"button",children:"Cancelar"})]}):o.jsxs(o.Fragment,{children:[o.jsx("button",{className:"flex-1 px-3 py-2 rounded bg-yellow-400",onClick:()=>Ct(Ke),type:"button",children:"Editar"}),o.jsx("button",{className:"flex-1 px-3 py-2 rounded bg-red-600 text-white",onClick:()=>He(Ke),type:"button",children:"Borrar"})]})})]})})]},Ke.id)})}):o.jsx("div",{className:"bg-white rounded shadow border w-full overflow-x-auto",children:o.jsxs("table",{className:"min-w-[1050px] w-full text-xs md:text-sm",children:[o.jsx("thead",{className:"bg-gray-100",children:o.jsxs("tr",{className:"whitespace-nowrap",children:[o.jsx("th",{className:"p-2 border text-left",children:"Categora"}),o.jsx("th",{className:"p-2 border text-left",children:"Producto"}),o.jsx("th",{className:"p-2 border text-left",children:"Empaque"}),o.jsx("th",{className:"p-2 border text-right",children:"Precio proveedor"}),o.jsx("th",{className:"p-2 border text-right",children:"Und x paquete"}),o.jsx("th",{className:"p-2 border text-center",children:"Cdigo"}),o.jsx("th",{className:"p-2 border text-center",children:"Acciones"})]})}),o.jsx("tbody",{children:r?o.jsx("tr",{children:o.jsx("td",{className:"p-4 text-center",colSpan:7,children:"Cargando"})}):Ue.length===0?o.jsx("tr",{children:o.jsx("td",{className:"p-4 text-center",colSpan:7,children:"Sin productos."})}):Ue.map(Ke=>{const wt=w===Ke.id,q=!!String(Ke.barcode||"").trim();return o.jsxs("tr",{className:"align-top",children:[o.jsx("td",{className:"p-2 border",children:wt?o.jsx("input",{className:"w-full border rounded px-2 py-1",value:I,onChange:ae=>_(ae.target.value)}):Ke.category}),o.jsx("td",{className:"p-2 border",children:wt?o.jsx("input",{className:"w-full border rounded px-2 py-1",value:E,onChange:ae=>S(ae.target.value)}):Ke.name}),o.jsx("td",{className:"p-2 border",children:wt?o.jsxs("select",{className:"w-full border rounded px-2 py-1",value:ue,onChange:ae=>fe(ae.target.value),children:[o.jsx("option",{value:"",children:""}),o.jsx("option",{value:"Tarro",children:"Tarro"}),o.jsx("option",{value:"Bolsa",children:"Bolsa"}),o.jsx("option",{value:"Ristra",children:"Ristra"}),o.jsx("option",{value:"Caja",children:"Caja"}),o.jsx("option",{value:"Vaso",children:"Vaso"}),o.jsx("option",{value:"Pana",children:"Pana"})]}):Ke.packaging||""}),o.jsx("td",{className:"p-2 border text-right tabular-nums",children:wt?o.jsx("input",{type:"number",step:"0.01",inputMode:"decimal",className:"w-28 border rounded px-2 py-1 text-right",value:Number.isNaN(k)?"":k,onChange:ae=>P(Math.max(0,aA(ae.target.value,0)))}):oB(Ke.providerPrice)}),o.jsx("td",{className:"p-2 border text-right tabular-nums",children:wt?o.jsx("input",{type:"number",min:1,className:"w-24 border rounded px-2 py-1 text-right",value:T,onChange:ae=>F(Uh(ae.target.value,1))}):Ke.unitsPerPackage}),o.jsx("td",{className:"p-2 border text-center",children:wt?o.jsxs("div",{className:"flex gap-2 justify-center",children:[o.jsx("input",{className:"w-44 border rounded px-2 py-1",value:Y,onChange:ae=>he(ae.target.value),placeholder:"EAN/UPC"}),o.jsx("button",{type:"button",className:"px-2 py-1 rounded bg-gray-800 text-white hover:bg-black",onClick:()=>{ge("edit"),L(!0)},children:"Escanear"})]}):q?o.jsx("button",{type:"button",className:"px-2 py-1 rounded bg-green-100 text-green-700 hover:bg-green-200",onClick:()=>{W(String(Ke.barcode||"").trim()),M(!0)},children:"S"}):o.jsx("span",{className:"px-2 py-1 rounded bg-gray-100 text-gray-600",children:"No"})}),o.jsx("td",{className:"p-2 border",children:wt?o.jsxs("div",{className:"flex gap-2 justify-center",children:[o.jsx("button",{className:"px-2 py-1 rounded bg-blue-600 text-white hover:bg-blue-700",onClick:xe,type:"button",children:"Guardar"}),o.jsx("button",{className:"px-2 py-1 rounded bg-gray-200 hover:bg-gray-300",onClick:jt,type:"button",children:"Cancelar"})]}):o.jsxs("div",{className:"flex gap-2 justify-center flex-wrap",children:[o.jsx("button",{className:"px-2 py-1 rounded bg-yellow-400 hover:bg-yellow-500",onClick:()=>Ct(Ke),type:"button",children:"Editar"}),o.jsx("button",{className:"px-2 py-1 rounded bg-red-600 text-white hover:bg-red-700",onClick:()=>He(Ke),type:"button",children:"Borrar"})]})})]},Ke.id)})})]})}),a?ut&&a===" Producto guardado."?o.jsxs("div",{className:"mt-2 flex items-center gap-3",children:[o.jsx("div",{className:"flex-1 text-sm",children:a}),o.jsx("button",{className:"px-3 py-1 rounded bg-blue-600 text-white",onClick:()=>{s(""),jt(),L(!1)},children:"Aceptar"})]}):o.jsx("p",{className:"mt-2 text-sm",children:a}):null,o.jsx(PLe,{open:R,code:K,onClose:()=>M(!1)}),o.jsx(TLe,{open:D,onClose:()=>L(!1),onDetected:async Ke=>{const wt=String(Ke||"").trim();if(wt){if(Z==="edit"&&w){if(i.some(ae=>ae.id!==w&&String(ae.barcode||"")===wt)){s(" Ya existe otro producto con ese cdigo de barras."),he(wt),L(!1);return}try{await nn(qt(ke,"products_candies",w),{barcode:wt}),l(ae=>ae.map(ee=>ee.id===w?{...ee,barcode:wt}:ee)),he(wt),ut&&s(" Producto guardado.")}catch(ae){console.error(ae),s(" Error guardando cdigo de barras.")}finally{L(!1)}return}if(Z==="search"){Ie(wt),L(!1);return}Z==="create"?x(Ke):he(Ke)}}}),U&&o.jsx("div",{className:"fixed inset-0 bg-black/40 flex items-center justify-center z-50",children:o.jsxs("div",{className:"bg-white w-full max-w-6xl max-h-[90vh] overflow-y-auto rounded shadow-lg p-5 text-sm",children:[o.jsxs("div",{className:"flex items-center justify-between mb-3",children:[o.jsx("h3",{className:"text-xl font-bold",children:"Importar productos (.xlsx / .csv)"}),o.jsx("button",{className:"px-3 py-1 rounded bg-gray-200 hover:bg-gray-300",onClick:()=>Ge(!1),children:"Cerrar"})]}),o.jsxs("div",{className:"bg-gray-50 border rounded p-3 mb-3",children:[o.jsxs("div",{className:"flex flex-col md:flex-row gap-3 md:items-end md:justify-between",children:[o.jsxs("div",{children:[o.jsx("div",{className:"font-semibold",children:"1) Sub tu archivo"}),o.jsx("div",{className:"text-xs text-gray-600",children:"Columnas esperadas (flexible): Id (opcional), Categoria, Producto/Nombre, PrecioProveedor, UnidadesPorPaquete, Empaque (opcional), Codigo (opcional)."})]}),o.jsx("button",{className:"px-3 py-2 rounded bg-gray-200 hover:bg-gray-300",onClick:Ce,type:"button",children:"Descargar template .xlsx"})]}),o.jsxs("div",{className:"mt-3 flex flex-col md:flex-row gap-3 md:items-center",children:[o.jsx("input",{type:"file",accept:".xlsx,.xls,.csv",onChange:Ke=>{var wt;return nt(((wt=Ke.target.files)==null?void 0:wt[0])||null)}}),ie&&o.jsxs("span",{className:"text-xs text-gray-600",children:["Archivo: ",o.jsx("b",{children:ie})]}),Qe&&o.jsx("span",{className:"text-xs",children:"Procesando"})]})]}),Ae.length>0&&o.jsxs("div",{className:"bg-red-50 border border-red-200 rounded p-3 mb-3",children:[o.jsx("div",{className:"font-semibold text-red-700 mb-2",children:"Errores encontrados"}),o.jsx("ul",{className:"list-disc pl-5 text-red-700 text-xs space-y-1",children:Ae.slice(0,50).map((Ke,wt)=>o.jsx("li",{children:Ke},wt))})]}),o.jsxs("div",{className:"bg-white border rounded p-3",children:[o.jsxs("div",{className:"flex flex-wrap gap-4 items-center justify-between mb-2",children:[o.jsxs("div",{children:[o.jsx("div",{className:"font-semibold",children:"2) Previsualizacin (editable)"}),o.jsxs("div",{className:"text-xs text-gray-600",children:["Se importarn ",$t.total," filas (Crear:"," ",$t.willCreate," / Actualizar:"," ",$t.willUpdate,")"]})]}),o.jsx("button",{className:"px-3 py-2 rounded bg-indigo-600 text-white hover:bg-indigo-700 disabled:opacity-50",onClick:It,disabled:Qe||je.length===0||Ae.length>0,type:"button",children:"Importar a Firestore"})]}),o.jsxs("div",{className:"overflow-x-auto border rounded",children:[o.jsxs("table",{className:"min-w-[1250px] w-full text-xs",children:[o.jsx("thead",{className:"bg-gray-100",children:o.jsxs("tr",{className:"whitespace-nowrap",children:[o.jsx("th",{className:"p-2 border text-left",children:"Id (opcional)"}),o.jsx("th",{className:"p-2 border text-left",children:"Categora"}),o.jsx("th",{className:"p-2 border text-left",children:"Producto"}),o.jsx("th",{className:"p-2 border text-right",children:"Precio proveedor"}),o.jsx("th",{className:"p-2 border text-right",children:"Und x paquete"}),o.jsx("th",{className:"p-2 border text-left",children:"Empaque (opcional)"}),o.jsx("th",{className:"p-2 border text-left",children:"Codigo (opcional)"}),o.jsx("th",{className:"p-2 border text-center",children:"Accin"})]})}),o.jsx("tbody",{children:je.length===0?o.jsx("tr",{children:o.jsx("td",{colSpan:8,className:"p-4 text-center text-gray-500",children:"Sub un archivo para ver la previsualizacin."})}):je.slice(0,300).map((Ke,wt)=>{const q=Ke.id?i.some(_e=>_e.id===Ke.id):!1,ae=i.some(_e=>`${Qa(_e.category)}::${Qa(_e.name)}`==`${Qa(Ke.category)}::${Qa(Ke.name)}`),ee=Ke.barcode?i.some(_e=>String(_e.barcode||"")===Ke.barcode):!1,be=q||ae||ee;return o.jsxs("tr",{className:"whitespace-nowrap",children:[o.jsx("td",{className:"p-2 border",children:o.jsx("input",{className:"w-56 border rounded px-2 py-1",value:Ke.id||"",onChange:_e=>Xe(wt,{id:_e.target.value.trim()||void 0}),placeholder:"docId (si quers update exacto)"})}),o.jsx("td",{className:"p-2 border",children:o.jsx("input",{className:"w-56 border rounded px-2 py-1",value:Ke.category,onChange:_e=>Xe(wt,{category:_e.target.value}),list:"categories-list"})}),o.jsx("td",{className:"p-2 border",children:o.jsx("input",{className:"w-72 border rounded px-2 py-1",value:Ke.name,onChange:_e=>Xe(wt,{name:_e.target.value})})}),o.jsx("td",{className:"p-2 border text-right tabular-nums",children:o.jsx("input",{type:"number",step:"0.01",inputMode:"decimal",className:"w-28 border rounded px-2 py-1 text-right",value:Number.isNaN(Ke.providerPrice)?"":Ke.providerPrice,onChange:_e=>Xe(wt,{providerPrice:Math.max(0,aA(_e.target.value,0))})})}),o.jsx("td",{className:"p-2 border text-right tabular-nums",children:o.jsx("input",{type:"number",min:1,className:"w-24 border rounded px-2 py-1 text-right",value:Ke.unitsPerPackage,onChange:_e=>Xe(wt,{unitsPerPackage:Uh(_e.target.value,1)})})}),o.jsx("td",{className:"p-2 border",children:o.jsx("input",{className:"w-56 border rounded px-2 py-1",value:Ke.packaging||"",onChange:_e=>Xe(wt,{packaging:_e.target.value.trim()||void 0}),placeholder:"Tarro, Bolsa..."})}),o.jsx("td",{className:"p-2 border",children:o.jsx("input",{className:"w-56 border rounded px-2 py-1",value:Ke.barcode||"",onChange:_e=>Xe(wt,{barcode:_e.target.value.trim()||void 0}),placeholder:"EAN/UPC (opcional)"})}),o.jsx("td",{className:"p-2 border text-center",children:o.jsx("span",{className:`px-2 py-0.5 rounded text-[10px] ${be?"bg-yellow-100 text-yellow-700":"bg-green-100 text-green-700"}`,children:be?"ACTUALIZA":"CREA"})})]},`${Ke.id||""}-${wt}`)})})]}),o.jsx("datalist",{id:"categories-list",children:rt.map(Ke=>o.jsx("option",{value:Ke},Ke))})]}),je.length>300&&o.jsxs("div",{className:"text-xs text-gray-600 mt-2",children:["Mostrando 300 de ",je.length," filas (el import importa todas)."]})]})]})})]})}function kD(t){const e=Math.max(1,Math.floor(Number(t.unitsPerPackage||1))),r=Number(t.totalUnits||0),n=Number(t.quantity||0),a=Number(t.packages||0);return r>0?Math.floor(r):n>0?Math.floor(n):a>0?Math.floor(a*e):0}function lb(t){const e=Number(t.remaining);return Number.isFinite(e)&&e>0?Math.floor(e):kD(t)}function FLe(t){const e=Math.max(1,Math.floor(Number(t.unitsPerPackage||1))),r=kD(t);return r>0&&e>0?Math.floor(r/e):Math.max(0,Math.floor(Number(t.packages||0)))}function OLe(t){if(typeof t.remainingPackages=="number"&&isFinite(t.remainingPackages))return Math.max(0,Math.floor(Number(t.remainingPackages)));const e=Math.max(1,Math.floor(Number(t.unitsPerPackage||1))),r=lb(t);return Math.max(0,Math.floor(r/e))}async function DLe(t){const e=qt(ke,"candy_main_orders",t);if((await ui(e)).exists())return e;const n=nr(ht(ke,"candy_main_orders"),cr("orderId","==",t)),a=await Ot(n);return a.empty?null:qt(ke,"candy_main_orders",a.docs[0].id)}async function lB(t){if(!t)return;const e=await DLe(t);if(!e)return;const r=nr(ht(ke,"inventory_candies"),cr("orderId","==",t)),n=await Ot(r),a=new Map;n.forEach(l=>{const c=l.data(),u=String(c.productId||"");if(!u)return;const d=FLe(c),f=OLe(c),h=Math.max(1,Math.floor(Number(c.unitsPerPackage||1))),A=Number(c.providerPrice||0),m=Number(c.unitPriceRivas||0),p=Number(c.unitPriceSanJorge||0),g=Number(c.unitPriceIsla||0),x=A*d,y=m*d,b=p*d,w=g*d,j=y-x,I=b-x,_=w-x;a.has(u)||a.set(u,{productId:u,name:String(c.productName||""),category:String(c.category||""),unitsPerPackage:h,providerPrice:A,marginRivas:typeof c.marginRivas=="number"?Number(c.marginRivas):void 0,marginSanJorge:typeof c.marginSanJorge=="number"?Number(c.marginSanJorge):void 0,marginIsla:typeof c.marginIsla=="number"?Number(c.marginIsla):void 0,packages:0,remainingPackages:0,subtotal:0,totalRivas:0,totalSanJorge:0,totalIsla:0,unitPriceRivas:m||0,unitPriceSanJorge:p||0,unitPriceIsla:g||0,gainRivas:0,gainSanJorge:0,gainIsla:0});const E=a.get(u);E.packages+=d,E.remainingPackages+=f,E.subtotal+=x,E.totalRivas+=y,E.totalSanJorge+=b,E.totalIsla+=w,E.gainRivas+=j,E.gainSanJorge+=I,E.gainIsla+=_,E.providerPrice=A,E.unitPriceRivas=m||E.unitPriceRivas,E.unitPriceSanJorge=p||E.unitPriceSanJorge,E.unitPriceIsla=g||E.unitPriceIsla,E.unitsPerPackage=h||E.unitsPerPackage,E.name=String(c.productName||E.name),E.category=String(c.category||E.category)});const s=Array.from(a.values()).map(l=>({id:l.productId,name:l.name,category:l.category,providerPrice:l.providerPrice,unitsPerPackage:l.unitsPerPackage,packages:l.packages,remainingPackages:l.remainingPackages,marginRivas:l.marginRivas??void 0,marginSanJorge:l.marginSanJorge??void 0,marginIsla:l.marginIsla??void 0,subtotal:l.subtotal,totalRivas:l.totalRivas,totalSanJorge:l.totalSanJorge,totalIsla:l.totalIsla,unitPriceRivas:l.unitPriceRivas,unitPriceSanJorge:l.unitPriceSanJorge,unitPriceIsla:l.unitPriceIsla,gainRivas:l.gainRivas,gainSanJorge:l.gainSanJorge,gainIsla:l.gainIsla})),i=s.reduce((l,c)=>l+Number(c.packages||0),0);await nn(e,{totalPackages:i,items:s})}async function RLe(t){const{productId:e,saleDate:r,saleId:n}=t,a=t.quantityPacks,s=t.quantity;if(!e)throw new Error("Parmetros invlidos para allocateSaleFIFOCandy (sin producto)");const i=nr(ht(ke,"inventory_candies"),cr("productId","==",e)),l=await Ot(i);if(l.empty)throw new Error("No hay inventario para este producto.");const c=l.docs.map(A=>({id:A.id,data:A.data()})).sort((A,m)=>{var b,w;const p=String(A.data.date||""),g=String(m.data.date||"");if(p!==g)return p<g?-1:1;const x=((b=A.data.createdAt)==null?void 0:b.seconds)??0,y=((w=m.data.createdAt)==null?void 0:w.seconds)??0;return x-y});let u=0;for(const A of c){const m=Number(A.data.unitsPerPackage??0);if(m>0){u=m;break}}if(!u)for(const A of c){const m=A.data,p=Number(m.totalUnits??0),g=Number(m.packages??0);if(p>0&&g>0){u=p/g;break}}u||(u=1);let d;if(a!=null&&!Number.isNaN(Number(a))){const A=Math.max(0,Math.floor(Number(a)));if(A<=0)throw new Error("La cantidad en paquetes debe ser mayor que cero.");d=A*u}else{const A=Math.max(0,Math.floor(Number(s||0)));if(A<=0)throw new Error("La cantidad debe ser mayor que cero.");d=A}const f=c.map(A=>qt(ke,"inventory_candies",A.id)),h=[];return await Hi(ke,async A=>{const m=await Promise.all(f.map(g=>A.get(g)));let p=d;for(let g=0;g<f.length&&p>0;g++){const x=f[g],y=m[g];if(!y.exists())continue;const b=y.data(),w=lb(b);if(w<=0)continue;const j=Math.min(w,p),I=Math.max(0,w-j),_=Math.max(1,Math.floor(Number(b.unitsPerPackage||1))),E=Math.floor(I/_);A.update(x,{remaining:I,remainingPackages:E,packages:E}),h.push({batchId:x.id,qty:j,batchDate:String(b.date||""),productName:String(b.productName||"")}),p-=j}if(p>0){const g=Math.ceil(p/u);throw new Error(`Inventario insuficiente. Faltan aproximadamente ${g} paquetes.`)}if(n)for(const g of h)await xn(ht(ke,"batch_candies_allocations"),{saleId:n,saleDate:r,productId:e,productName:g.productName??"",batchId:g.batchId,batchDate:g.batchDate??"",quantity:g.qty,createdAt:fr.now()})}),{allocations:h}}function MLe(t){const e=t==null?void 0:t.allocationsByItem;if(!e)return null;const r=[];if(Array.isArray(e))for(const n of e){const a=Array.isArray(n==null?void 0:n.allocations)?n.allocations:[];for(const s of a){const i=String(s.inventorySellerId||""),l=Math.max(0,Math.floor(Number(s.units??s.qty??s.quantity??0)));!i||l<=0||r.push({inventorySellerId:i,units:l})}}else if(typeof e=="object")for(const n of Object.keys(e)){const a=e[n],s=Array.isArray(a==null?void 0:a.allocations)?a.allocations:[];for(const i of s){const l=String(i.inventorySellerId||""),c=Math.max(0,Math.floor(Number(i.units??i.qty??i.quantity??0)));!l||c<=0||r.push({inventorySellerId:l,units:c})}}return r.length?{allocations:r}:null}async function m2(t){const e=t.split("#")[0],r=qt(ke,"sales_candies",e),n=await ui(r);if(!n.exists())throw new Error("La venta no existe.");const a=n.data(),s=MLe(a);if(s&&s.allocations.length>0){let u=0;return await Hi(ke,async d=>{const f={};for(const p of s.allocations){const g=p.inventorySellerId,x=Math.max(0,Math.floor(Number(p.units||0)));!g||x<=0||(f[g]=(f[g]||0)+x,u+=x)}const A=Object.keys(f).map(p=>qt(ke,"inventory_candies_sellers",p)),m=await Promise.all(A.map(p=>d.get(p)));for(let p=0;p<A.length;p++){const g=m[p];if(!g.exists())continue;const x=g.data(),y=Number(x.remainingUnits??x.remaining??0),b=Math.max(0,Math.floor(Number(f[A[p].id]||0))),w=y+b,j=Math.max(1,Math.floor(Number(x.unitsPerPackage||1))),I=Math.floor(w/j);d.update(A[p],{remainingUnits:w,remainingPackages:I})}d.delete(r)}),{restored:u}}const i=[];if(Array.isArray(a.items)&&a.items.length>0){const u={};if(a.allocationsByItem&&typeof a.allocationsByItem=="object")for(const d of Object.keys(a.allocationsByItem)){const f=a.allocationsByItem[d],h=String((f==null?void 0:f.productId)||d||"");if(!h)continue;const A=Array.isArray(f==null?void 0:f.allocations)?f.allocations:[];u[h]=A.map(m=>({batchId:String(m.batchId),qty:Math.max(0,Math.floor(Number(m.qty||m.quantity||0)))}))}if(Array.isArray(a.allocationsByItem))for(const d of a.allocationsByItem){const f=String((d==null?void 0:d.productId)||"");if(!f)continue;const h=Array.isArray(d==null?void 0:d.allocations)?d.allocations:[];u[f]=h.map(A=>({batchId:String(A.batchId),qty:Math.max(0,Math.floor(Number(A.qty||A.quantity||0)))}))}for(const d of a.items){const f=String((d==null?void 0:d.productId)||"");if(!f)continue;const h=Math.max(0,Math.floor(Number((d==null?void 0:d.qty)||(d==null?void 0:d.quantity)||0))),A=Array.isArray(d==null?void 0:d.allocations)?d.allocations.map(m=>({batchId:String(m.batchId),qty:Math.max(0,Math.floor(Number(m.qty||m.quantity||0)))})):u[f]||[];i.push({productId:f,productName:String((d==null?void 0:d.productName)||""),qty:h,allocations:A.length?A:void 0})}}else{const u=a.item||{},d=String(u.productId||a.productId||""),f=Math.max(0,Math.floor(Number(u.qty??a.quantity??0))),h=Array.isArray(a.allocations)?a.allocations.map(A=>({batchId:String(A.batchId),qty:Math.max(0,Math.floor(Number(A.qty||A.quantity||0)))})):[];d&&f>0&&i.push({productId:d,productName:String(u.productName||a.productName||""),qty:f,allocations:h.length?h:void 0})}if(i.length===0)return await Hi(ke,async u=>{u.delete(r)}),{restored:0};if(i.every(u=>Array.isArray(u.allocations)&&u.allocations.length>0)){let u=0;return await Hi(ke,async d=>{const f=[];for(const A of i)for(const m of A.allocations||[]){const p=Math.max(0,Math.floor(Number(m.qty||0)));u+=p,f.push({ref:qt(ke,"inventory_candies",m.batchId),addBack:p})}const h=await Promise.all(f.map(A=>d.get(A.ref)));for(let A=0;A<f.length;A++){const m=h[A];if(!m.exists())continue;const p=m.data(),g=lb(p),x=Math.max(0,Math.floor(Number(f[A].addBack||0))),y=g+x,b=Math.max(1,Math.floor(Number(p.unitsPerPackage||1))),w=Math.floor(y/b);d.update(f[A].ref,{remaining:y,remainingPackages:w,packages:w})}d.delete(r)}),{restored:u}}let c=0;return await Hi(ke,async u=>{const d={};for(const p of i){if(!p.productId||p.qty<=0)continue;const g=nr(ht(ke,"inventory_candies"),cr("productId","==",p.productId)),y=(await Ot(g)).docs.map(b=>{const w=b.data(),j=kD(w),I=lb(w);return{id:b.id,date:String(w.date||""),baseUnits:j,remaining:I}}).sort((b,w)=>b.date.localeCompare(w.date));d[p.productId]=y}const f=[];for(const p of i){if(!p.productId||p.qty<=0)continue;if(Array.isArray(p.allocations)&&p.allocations.length>0){for(const y of p.allocations){const b=Math.max(0,Math.floor(Number(y.qty||0)));c+=b,f.push({id:y.batchId,addBack:b})}continue}const g=d[p.productId]||[];let x=p.qty;for(const y of g){if(x<=0)break;const b=Math.max(0,y.baseUnits-y.remaining);if(b<=0)continue;const w=Math.min(b,x);f.push({id:y.id,addBack:w}),c+=w,x-=w}for(const y of g){if(x<=0)break;const b=Math.min(x,p.qty);f.push({id:y.id,addBack:b}),c+=b,x-=b}}const h={};for(const p of f)h[p.id]=(h[p.id]||0)+Math.max(0,Math.floor(Number(p.addBack||0)));const A=Object.keys(h).map(p=>qt(ke,"inventory_candies",p)),m=await Promise.all(A.map(p=>u.get(p)));for(let p=0;p<A.length;p++){const g=m[p];if(!g.exists())continue;const x=g.data(),y=lb(x),b=Math.max(0,Math.floor(Number(h[A[p].id]||0))),w=y+b,j=Math.max(1,Math.floor(Number(x.unitsPerPackage||1))),I=Math.floor(w/j);u.update(A[p],{remaining:w,remainingPackages:I,packages:I})}u.delete(r)}),{restored:c}}async function LLe(t){return m2(t)}const Bl=t=>`C$ ${(Number(t)||0).toFixed(2)}`;function cB(t){return isFinite(t)?Math.round(t):0}function fd(t){return t.unitsPerPackage>0&&t.totalUnits>0?Math.floor(t.totalUnits/t.unitsPerPackage):Math.max(0,Math.floor(Number(t.packages||0)))}function uB(t){return typeof t.remainingPackages=="number"&&isFinite(t.remainingPackages)?Math.max(0,Math.floor(t.remainingPackages)):t.unitsPerPackage>0?Math.max(0,Math.floor(Number(t.remaining||0)/t.unitsPerPackage)):0}function ULe(t,e){var i,l;const r=String(t.date||""),n=String(e.date||"");if(r!==n)return n.localeCompare(r);const a=((i=t.createdAt)==null?void 0:i.seconds)??0;return(((l=e.createdAt)==null?void 0:l.seconds)??0)-a}function QLe(){const[t,e]=v.useState([]),[r,n]=v.useState([]),[a,s]=v.useState(!0),[i,l]=v.useState(""),[c,u]=v.useState(Sr(Qd(new Date),"yyyy-MM-dd")),[d,f]=v.useState(Sr(Ud(new Date),"yyyy-MM-dd")),[h,A]=v.useState(""),[m,p]=v.useState(""),[g,x]=v.useState(null),[y,b]=v.useState(""),[w,j]=v.useState(0),[I,_]=v.useState(!1),[E,S]=v.useState(""),[k,P]=v.useState(""),[T,F]=v.useState([]);v.useEffect(()=>{(async()=>{try{s(!0);const K=await Ot(ht(ke,"products_candies")),W=[];K.forEach(ge=>{const U=ge.data();W.push({id:ge.id,name:U.name??"(sin nombre)",category:U.category??"(sin categora)"})}),e(W);const D=nr(ht(ke,"inventory_candies"),on("date","desc")),L=await Ot(D),Z=[];L.forEach(ge=>{const U=ge.data(),Ge=Number(U.unitsPerPackage||0),ie=Number(U.totalUnits??U.quantity??(U.packages||0)*(U.unitsPerPackage||0)),J=Number(U.remaining??U.totalUnits??ie??0);Z.push({id:ge.id,productId:U.productId,productName:U.productName,category:U.category,measurement:U.measurement??"unidad",packages:Number(U.packages||0),unitsPerPackage:Ge,totalUnits:ie,remaining:J,remainingPackages:typeof U.remainingPackages=="number"?Number(U.remainingPackages):void 0,providerPrice:Number(U.providerPrice||0),subtotal:Number(U.subtotal||0),totalRivas:Number(U.totalRivas||0),totalSanJorge:Number(U.totalSanJorge||0),totalIsla:Number(U.totalIsla||0),gainRivas:Number(U.gainRivas||0),gainSanJorge:Number(U.gainSanJorge||0),gainIsla:Number(U.gainIsla||0),unitPriceRivas:Number(U.unitPriceRivas||0),unitPriceSanJorge:Number(U.unitPriceSanJorge||0),unitPriceIsla:Number(U.unitPriceIsla||0),date:U.date,createdAt:U.createdAt,status:U.status??"PENDIENTE",orderId:U.orderId??null})}),n(Z)}catch(K){console.error(K),l(" Error cargando inventario.")}finally{s(!1)}})()},[]);const Y=v.useMemo(()=>r.filter(K=>!(c&&K.date<c||d&&K.date>d||h&&K.productId!==h||m&&String(K.category||"")!==m)),[r,c,d,h,m]),he=v.useMemo(()=>{const K=new Set;for(const W of t)W.category&&K.add(W.category);return Array.from(K).sort((W,D)=>W.localeCompare(D))},[t]),ue=v.useMemo(()=>{const K=Y.reduce((U,Ge)=>U+fd(Ge),0),W=Y.reduce((U,Ge)=>U+uB(Ge),0),D=Y.reduce((U,Ge)=>{const ie=fd(Ge);return U+Number(Ge.providerPrice||0)*ie},0),L=Y.reduce((U,Ge)=>{const ie=fd(Ge);return U+Number(Ge.unitPriceRivas||0)*ie},0),Z=Y.reduce((U,Ge)=>{const ie=fd(Ge);return U+Number(Ge.unitPriceSanJorge||0)*ie},0),ge=Y.reduce((U,Ge)=>{const ie=fd(Ge);return U+Number(Ge.unitPriceIsla||0)*ie},0);return{totalPaquetes:K,totalPaquetesRestantes:W,totalSubtotal:D,totalRivas:L,totalSJ:Z,totalIsla:ge}},[Y]),fe=v.useMemo(()=>{let K=0,W=0;for(const D of Y)D.status==="PENDIENTE"&&(K+=1),D.status==="PAGADO"&&(W+=1);return{totalLotes:Y.length,pendientes:K,pagados:W}},[Y]),me=v.useMemo(()=>{const K=new Map;for(const D of Y){const L=String(D.productId||"");L&&(K.has(L)||K.set(L,{batches:[]}),K.get(L).batches.push(D))}const W=[];for(const[D,L]of K.entries()){const Z=[...L.batches].sort(ULe),ge=Z[0],U=Z.reduce((it,dt)=>it+fd(dt),0),Ge=Z.reduce((it,dt)=>it+uB(dt),0),ie=Number((ge==null?void 0:ge.providerPrice)||0),J=Number((ge==null?void 0:ge.unitPriceRivas)||0),je=Number((ge==null?void 0:ge.unitPriceIsla)||0),z=Z.reduce((it,dt)=>{const ce=fd(dt);return it+Number(dt.providerPrice||0)*ce},0),Ae=Z.reduce((it,dt)=>{const ce=fd(dt);return it+Number(dt.unitPriceRivas||0)*ce},0),ye=Z.reduce((it,dt)=>{const ce=fd(dt);return it+Number(dt.unitPriceIsla||0)*ce},0),Qe=Ae-z,st=ye-z;let ut="",De;for(const it of Z)(!ut||String(it.date||"")>ut)&&(ut=String(it.date||""),De=it.createdAt);W.push({productId:D,productName:(ge==null?void 0:ge.productName)||"",category:(ge==null?void 0:ge.category)||"",totalPackages:U,remainingPackages:Ge,providerPrice:ie,unitPriceRivas:J,unitPriceIsla:je,subtotal:z,totalRivas:Ae,totalIsla:ye,gainRivas:Qe,gainIsla:st,lastDate:ut,lastCreatedAt:De,batchCount:Z.length})}return W.sort((D,L)=>String(L.lastDate).localeCompare(String(D.lastDate))),W},[Y]),ne=K=>{x(K.id),b(K.date),j(K.providerPrice),l("")},Pe=()=>{x(null),b(""),j(0)},Ie=async()=>{if(!g)return;const K=r.find(ye=>ye.id===g);if(!K)return;if(w<0){l("El precio proveedor no puede ser negativo.");return}const W=fd(K),D=w*W,L=W>0?D/.8:0,Z=W>0?D/.85:0,ge=W>0?D/.7:0,U=L-D,Ge=Z-D,ie=ge-D,J=W>0?cB(L/W):0,je=W>0?cB(Z/W):0,z=W>0?cB(ge/W):0,Ae=qt(ke,"inventory_candies",g);await nn(Ae,{date:y,providerPrice:w,subtotal:D,totalRivas:L,totalSanJorge:Z,totalIsla:ge,gainRivas:U,gainSanJorge:Ge,gainIsla:ie,unitPriceRivas:J,unitPriceSanJorge:je,unitPriceIsla:z}),n(ye=>ye.map(Qe=>Qe.id===g?{...Qe,date:y,providerPrice:w,subtotal:D,totalRivas:L,totalSanJorge:Z,totalIsla:ge,gainRivas:U,gainSanJorge:Ge,gainIsla:ie,unitPriceRivas:J,unitPriceSanJorge:je,unitPriceIsla:z}:Qe)),K.orderId&&await lB(String(K.orderId)),l(" Lote de dulces actualizado"),Pe()},O=async K=>{confirm(`Marcar PAGADO el lote del ${K.date} (${K.productName})?`)&&(await nn(qt(ke,"inventory_candies",K.id),{status:"PAGADO"}),n(D=>D.map(L=>L.id===K.id?{...L,status:"PAGADO"}:L)),l(" Lote marcado como pagado"))},H=async K=>{confirm(`Eliminar el lote del ${K.date} (${K.productName})?`)&&(await Cn(qt(ke,"inventory_candies",K.id)),n(D=>D.filter(L=>L.id!==K.id)),K.orderId&&await lB(String(K.orderId)),l(" Lote eliminado"))},R=async(K,W)=>{try{s(!0),l("");const D=nr(ht(ke,"inventory_candies"),cr("productId","==",K),on("date","desc")),L=await Ot(D),Z=[];L.forEach(ge=>{const U=ge.data(),Ge=Number(U.unitsPerPackage||0),ie=Number(U.totalUnits??U.quantity??(U.packages||0)*(U.unitsPerPackage||0)),J=Number(U.remaining??U.totalUnits??ie??0);Z.push({id:ge.id,productId:U.productId,productName:U.productName,category:U.category,measurement:U.measurement??"unidad",packages:Number(U.packages||0),unitsPerPackage:Ge,totalUnits:ie,remaining:J,remainingPackages:typeof U.remainingPackages=="number"?Number(U.remainingPackages):void 0,providerPrice:Number(U.providerPrice||0),subtotal:Number(U.subtotal||0),totalRivas:Number(U.totalRivas||0),totalSanJorge:Number(U.totalSanJorge||0),totalIsla:Number(U.totalIsla||0),gainRivas:Number(U.gainRivas||0),gainSanJorge:Number(U.gainSanJorge||0),gainIsla:Number(U.gainIsla||0),unitPriceRivas:Number(U.unitPriceRivas||0),unitPriceSanJorge:Number(U.unitPriceSanJorge||0),unitPriceIsla:Number(U.unitPriceIsla||0),date:U.date,createdAt:U.createdAt,status:U.status??"PENDIENTE",orderId:U.orderId??null})}),S(K),P(W),F(Z),_(!0)}catch(D){console.error(D),l(" Error abriendo detalle del producto.")}finally{s(!1)}},M=async(K,W)=>{const D=r.filter(Z=>Z.productId===K);if(confirm(`Eliminar COMPLETAMENTE "${W}"?
Esto eliminar ${D.length} lote(s) de este producto.`))try{s(!0),l("");const Z=Array.from(new Set(D.map(ge=>ge.orderId?String(ge.orderId):"").filter(Boolean)));for(const ge of D)await Cn(qt(ke,"inventory_candies",ge.id));n(ge=>ge.filter(U=>U.productId!==K)),l(" Producto eliminado (todos sus lotes).");for(const ge of Z)await lB(ge);I&&E===K&&(_(!1),F([]),S(""),P(""))}catch(Z){console.error(Z),l(" Error eliminando lotes del producto.")}finally{s(!1)}};return o.jsxs("div",{className:"max-w-6xl mx-auto",children:[o.jsx("div",{className:"flex items-center justify-between mb-3",children:o.jsx("h2",{className:"text-2xl font-bold",children:"Inventario Productos"})}),o.jsxs("div",{className:"bg-white p-3 rounded shadow border mb-4 flex flex-wrap items-end gap-3 text-sm",children:[o.jsxs("div",{className:"flex flex-col",children:[o.jsx("label",{className:"font-semibold",children:"Desde"}),o.jsx("input",{type:"date",className:"border rounded px-2 py-1",value:c,onChange:K=>u(K.target.value)})]}),o.jsxs("div",{className:"flex flex-col",children:[o.jsx("label",{className:"font-semibold",children:"Hasta"}),o.jsx("input",{type:"date",className:"border rounded px-2 py-1",value:d,onChange:K=>f(K.target.value)})]}),o.jsxs("div",{className:"flex flex-col min-w-[220px]",children:[o.jsx("label",{className:"font-semibold",children:"Categora"}),o.jsxs("select",{className:"border rounded px-2 py-1",value:m,onChange:K=>p(K.target.value),children:[o.jsx("option",{value:"",children:"Todas"}),he.map(K=>o.jsx("option",{value:K,children:K},K))]})]}),o.jsxs("div",{className:"flex flex-col min-w-[240px]",children:[o.jsx("label",{className:"font-semibold",children:"Producto"}),o.jsxs("select",{className:"border rounded px-2 py-1",value:h,onChange:K=>A(K.target.value),children:[o.jsx("option",{value:"",children:"Todos"}),t.map(K=>o.jsxs("option",{value:K.id,children:[K.name,"  ",K.category]},K.id))]})]}),o.jsx("button",{className:"px-3 py-1 rounded bg-gray-200 hover:bg-gray-300",onClick:()=>{u(""),f(""),A(""),p("")},children:"Quitar filtro"})]}),o.jsx("div",{className:"bg-gray-50 p-2 rounded shadow border mb-2 text-xs md:text-sm",children:o.jsxs("div",{className:"flex flex-wrap gap-x-6 gap-y-1",children:[o.jsxs("div",{children:[o.jsx("span",{className:"font-semibold",children:"Lotes totales:"})," ",fe.totalLotes]}),o.jsxs("div",{children:[o.jsx("span",{className:"font-semibold",children:"Lotes pendientes:"})," ",fe.pendientes]}),o.jsxs("div",{children:[o.jsx("span",{className:"font-semibold",children:"Lotes pagados:"})," ",fe.pagados]})]})}),o.jsx("div",{className:"bg-gray-50 p-3 rounded shadow border mb-3 text-sm md:text-base",children:o.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-y-1 gap-x-8",children:[o.jsxs("div",{children:[o.jsx("span",{className:"font-semibold",children:"Paquetes ingresados:"})," ",ue.totalPaquetes]}),o.jsxs("div",{children:[o.jsx("span",{className:"font-semibold",children:"Paquetes restantes:"})," ",ue.totalPaquetesRestantes]}),o.jsxs("div",{children:[o.jsx("span",{className:"font-semibold",children:"Sub total:"})," ",Bl(ue.totalSubtotal)]}),o.jsxs("div",{children:[o.jsx("span",{className:"font-semibold",children:"Total Rivas:"})," ",Bl(ue.totalRivas)]}),o.jsxs("div",{children:[o.jsx("span",{className:"font-semibold",children:"Total San Jorge:"})," ",Bl(ue.totalSJ)]}),o.jsxs("div",{children:[o.jsx("span",{className:"font-semibold",children:"Total Isla:"})," ",Bl(ue.totalIsla)]})]})}),o.jsx("div",{className:"bg-white rounded shadow border w-full overflow-x-auto",children:o.jsx("div",{className:"w-full overflow-x-auto",children:o.jsxs("table",{className:"min-w-[1200px] table-auto text-xs md:text-sm",children:[o.jsx("thead",{className:"bg-gray-100 sticky top-0 z-10",children:o.jsxs("tr",{children:[o.jsx("th",{className:"p-2 border text-left",children:"Categora"}),o.jsx("th",{className:"p-2 border text-left",children:"Producto"}),o.jsx("th",{className:"p-2 border whitespace-nowrap text-right",children:"Paquetes totales"}),o.jsx("th",{className:"p-2 border whitespace-nowrap text-right",children:"Paquetes restantes"}),o.jsx("th",{className:"p-2 border whitespace-nowrap text-right",children:"Precio proveedor"}),o.jsx("th",{className:"p-2 border whitespace-nowrap text-right",children:"Precio venta Rivas"}),o.jsx("th",{className:"p-2 border whitespace-nowrap text-right",children:"Precio venta Isla"}),o.jsx("th",{className:"p-2 border whitespace-nowrap text-right",children:"Subtotal"}),o.jsx("th",{className:"p-2 border whitespace-nowrap text-right",children:"Total Rivas"}),o.jsx("th",{className:"p-2 border whitespace-nowrap text-right",children:"Total Isla"}),o.jsx("th",{className:"p-2 border whitespace-nowrap text-right",children:"Ganancia bruta Rivas"}),o.jsx("th",{className:"p-2 border whitespace-nowrap text-right",children:"Ganancia bruta Isla"}),o.jsx("th",{className:"p-2 border whitespace-nowrap",children:"ltima fecha"}),o.jsx("th",{className:"p-2 border whitespace-nowrap text-center",children:"Opciones"})]})}),o.jsx("tbody",{className:"whitespace-nowrap",children:a?o.jsx("tr",{children:o.jsx("td",{colSpan:14,className:"p-4 text-center",children:"Cargando"})}):me.length===0?o.jsx("tr",{children:o.jsx("td",{colSpan:14,className:"p-4 text-center",children:"Sin productos"})}):me.map(K=>o.jsxs("tr",{className:"text-left",children:[o.jsx("td",{className:"p-2 border",children:K.category||""}),o.jsxs("td",{className:"p-2 border max-w-[260px]",children:[o.jsx("span",{className:"block truncate",title:K.productName,children:K.productName}),o.jsxs("span",{className:"text-[10px] text-gray-500",children:["Lotes: ",K.batchCount]})]}),o.jsx("td",{className:"p-2 border text-right tabular-nums",children:K.totalPackages}),o.jsx("td",{className:"p-2 border text-right tabular-nums",children:K.remainingPackages}),o.jsx("td",{className:"p-2 border text-right tabular-nums",children:Bl(K.providerPrice)}),o.jsx("td",{className:"p-2 border text-right tabular-nums",children:Bl(K.unitPriceRivas)}),o.jsx("td",{className:"p-2 border text-right tabular-nums",children:Bl(K.unitPriceIsla)}),o.jsx("td",{className:"p-2 border text-right tabular-nums",children:Bl(K.subtotal)}),o.jsx("td",{className:"p-2 border text-right tabular-nums",children:Bl(K.totalRivas)}),o.jsx("td",{className:"p-2 border text-right tabular-nums",children:Bl(K.totalIsla)}),o.jsx("td",{className:"p-2 border text-right tabular-nums",children:Bl(K.gainRivas)}),o.jsx("td",{className:"p-2 border text-right tabular-nums",children:Bl(K.gainIsla)}),o.jsx("td",{className:"p-2 border",children:K.lastDate||""}),o.jsx("td",{className:"p-2 border",children:o.jsxs("div",{className:"flex gap-1 justify-center flex-wrap",children:[o.jsx("button",{className:"px-2 py-1 rounded bg-blue-600 text-white hover:bg-blue-700 text-xs",onClick:()=>R(K.productId,K.productName),children:"Detalle"}),o.jsx("button",{className:"px-2 py-1 rounded bg-red-600 text-white hover:bg-red-700 text-xs",onClick:()=>M(K.productId,K.productName),children:"Borrar"})]})})]},K.productId))})]})})}),i&&o.jsx("p",{className:"mt-2 text-sm",children:i}),I&&o.jsx("div",{className:"fixed inset-0 bg-black/40 flex items-center justify-center z-50",children:o.jsxs("div",{className:"bg-white p-4 rounded shadow-lg w-full max-w-6xl max-h-[90vh] overflow-y-auto text-sm",children:[o.jsxs("div",{className:"flex items-start justify-between gap-3 mb-3",children:[o.jsxs("div",{children:[o.jsx("h3",{className:"text-lg font-bold",children:"Detalle del producto"}),o.jsxs("div",{className:"text-xs text-gray-600",children:[o.jsx("span",{className:"font-semibold",children:"Producto:"})," ",k||""," ",o.jsxs("span",{className:"ml-2",children:[o.jsx("span",{className:"font-semibold",children:"ID:"})," ",E]})]})]}),o.jsx("button",{className:"px-3 py-1 rounded bg-gray-200 hover:bg-gray-300",onClick:()=>{_(!1),F([]),S(""),P(""),Pe()},children:"Cerrar"})]}),o.jsx("div",{className:"bg-white rounded shadow border w-full overflow-x-auto",children:o.jsxs("table",{className:"min-w-[1200px] table-auto text-xs md:text-sm",children:[o.jsx("thead",{className:"bg-gray-100 sticky top-0 z-10",children:o.jsxs("tr",{children:[o.jsx("th",{className:"p-2 border text-left",children:"Fecha"}),o.jsx("th",{className:"p-2 border",children:"Categora"}),o.jsx("th",{className:"p-2 border text-left",children:"Producto"}),o.jsx("th",{className:"p-2 border text-right",children:"Paquetes ingresados"}),o.jsx("th",{className:"p-2 border text-right",children:"Paquetes restantes"}),o.jsx("th",{className:"p-2 border text-right",children:"Unidades"}),o.jsx("th",{className:"p-2 border text-right",children:"Precio proveedor"}),o.jsx("th",{className:"p-2 border text-right",children:"Precio venta Rivas"}),o.jsx("th",{className:"p-2 border text-right",children:"Precio venta Isla"}),o.jsx("th",{className:"p-2 border",children:"Nmero orden"}),o.jsx("th",{className:"p-2 border",children:"Status"}),o.jsx("th",{className:"p-2 border text-center",children:"Acciones"})]})}),o.jsx("tbody",{className:"whitespace-nowrap",children:T.length===0?o.jsx("tr",{children:o.jsx("td",{colSpan:12,className:"p-4 text-center text-gray-500",children:"Sin lotes"})}):T.map(K=>{const W=g===K.id,D=fd(K),L=uB(K);return o.jsxs("tr",{className:"text-left",children:[o.jsx("td",{className:"p-2 border align-top",children:W?o.jsx("input",{type:"date",className:"w-full border p-1 rounded",value:y,onChange:Z=>b(Z.target.value)}):K.date}),o.jsx("td",{className:"p-2 border align-top",children:K.category||""}),o.jsxs("td",{className:"p-2 border align-top max-w-[260px]",children:[o.jsx("span",{className:"block truncate",title:K.productName,children:K.productName}),o.jsxs("span",{className:"text-[10px] text-gray-500",children:["Lote ID: ",K.id]})]}),o.jsx("td",{className:"p-2 border align-top text-right tabular-nums",children:D}),o.jsx("td",{className:"p-2 border align-top text-right tabular-nums",children:L}),o.jsx("td",{className:"p-2 border align-top text-right tabular-nums",children:K.totalUnits}),o.jsx("td",{className:"p-2 border align-top text-right tabular-nums",children:W?o.jsx("input",{type:"number",step:"0.01",inputMode:"decimal",className:"w-24 border p-1 rounded text-right",value:Number.isNaN(w)?"":w,onChange:Z=>j(Math.max(0,parseFloat(Z.target.value||"0")))}):Bl(K.providerPrice)}),o.jsx("td",{className:"p-2 border align-top text-right tabular-nums",children:Bl(K.unitPriceRivas)}),o.jsx("td",{className:"p-2 border align-top text-right tabular-nums",children:Bl(K.unitPriceIsla)}),o.jsx("td",{className:"p-2 border align-top",children:K.orderId?String(K.orderId):""}),o.jsx("td",{className:"p-2 border align-top",children:o.jsx("span",{className:`px-2 py-0.5 rounded text-[10px] md:text-xs ${K.status==="PAGADO"?"bg-green-100 text-green-700":"bg-yellow-100 text-yellow-700"}`,children:K.status})}),o.jsx("td",{className:"p-2 border align-top",children:W?o.jsxs("div",{className:"flex gap-2 justify-center",children:[o.jsx("button",{className:"px-2 py-1 rounded text-white bg-blue-600 hover:bg-blue-700",onClick:Ie,children:"Guardar"}),o.jsx("button",{className:"px-2 py-1 rounded bg-gray-200 hover:bg-gray-300",onClick:Pe,children:"Cancelar"})]}):o.jsxs("div",{className:"flex gap-1 justify-center flex-wrap",children:[K.status==="PENDIENTE"&&o.jsx("button",{className:"px-2 py-1 rounded bg-green-600 text-white hover:bg-green-700 text-xs",onClick:()=>O(K),children:"Pagar"}),o.jsx("button",{className:"px-2 py-1 rounded bg-yellow-400 text-black hover:bg-yellow-500 text-xs",onClick:()=>ne(K),children:"Editar"}),o.jsx("button",{className:"px-2 py-1 rounded bg-red-600 text-white hover:bg-red-700 text-xs",onClick:()=>H(K),children:"Borrar"})]})})]},K.id)})})]})}),o.jsx("div",{className:"mt-3 flex justify-end",children:o.jsx("button",{className:"px-3 py-1 rounded bg-red-600 text-white hover:bg-red-700",onClick:()=>M(E,k),children:"Borrar producto (todos los lotes)"})})]})})]})}const dB=["Altagracia","Taguizapa","El paso","Calaysa","Urbaite","Las Pilas"],to=t=>`C$ ${(Number(t)||0).toFixed(2)}`;function G1(t){const e="+505 ";if(!t.startsWith(e)){const n=t.replace(/\D/g,"");return e+n.slice(0,8)}const r=t.slice(e.length).replace(/\D/g,"");return e+r.slice(0,8)}async function HH(t){const e=nr(ht(ke,"ar_movements"),cr("ref.saleId","==",t)),r=await Ot(e);await Promise.all(r.docs.map(n=>Cn(qt(ke,"ar_movements",n.id))))}function VLe({role:t="",roles:e,sellerCandyId:r="",currentUserEmail:n}){const a=e&&e.length?e:t,s=String(r||"").trim(),i=Yr(a,"vendedor_dulces"),l=Yr(a,"admin"),[c,u]=v.useState([]),[d,f]=v.useState(!1),[h,A]=v.useState(""),[m,p]=v.useState(""),[g,x]=v.useState(""),[y,b]=v.useState(""),[w,j]=v.useState(!1),[I,_]=v.useState(!1),[E,S]=v.useState(null),[k,P]=v.useState([]),T=async at=>{var zt;j(!0),_(!0),S(at),P([]);try{const Ut=await ui(qt(ke,"sales_candies",at));let Qt=null;Ut.exists()?Qt=Ut.data():Qt=(zt=(await Ot(nr(ht(ke,"sales_candies"),cr("name","==",at)))).docs[0])==null?void 0:zt.data();const Ht=(Array.isArray(Qt==null?void 0:Qt.items)?Qt.items:Qt!=null&&Qt.item?[Qt.item]:[]).map(Lt=>({productName:String(Lt.productName||""),qty:Number(Lt.qty||0),unitPrice:Number(Lt.unitPrice||0),discount:Number(Lt.discount||0),total:Number(Lt.total||0)}));P(Ht)}catch(Ut){console.error(Ut)}finally{_(!1)}},[F,Y]=v.useState(""),[he,ue]=v.useState("+505 "),[fe,me]=v.useState(""),[ne,Pe]=v.useState(""),[Ie,O]=v.useState("ACTIVO"),[H,R]=v.useState(0),[M,K]=v.useState(""),[W,D]=v.useState(0),[L,Z]=v.useState([]),[ge,U]=v.useState(!0),[Ge,ie]=v.useState(""),[J,je]=v.useState(null),[z,Ae]=v.useState(""),[ye,Qe]=v.useState("+505 "),[st,ut]=v.useState(""),[De,it]=v.useState(""),[dt,ce]=v.useState("ACTIVO"),[oe,Me]=v.useState(0),[Le,ve]=v.useState(""),[le,Ue]=v.useState(!1),[rt,mt]=v.useState(null),[gt,Ct]=v.useState(!1),[jt,xe]=v.useState([]),[He,Ce]=v.useState({saldoActual:0,totalAbonado:0,totalCargos:0,saldoRestante:0}),[lt,nt]=v.useState(!1),[Xe,It]=v.useState(0),[$t,Ke]=v.useState(new Date().toISOString().slice(0,10)),[wt,q]=v.useState(""),[ae,ee]=v.useState(!1),[be,_e]=v.useState(null),[Be,tt]=v.useState(""),[ot,te]=v.useState(0),[V,re]=v.useState(""),[pe,Ee]=v.useState(!1),[Se,Re]=v.useState(null),[et,We]=v.useState(!1),[At,vt]=v.useState(!1),[Vt,or]=v.useState(null);v.useEffect(()=>{(async()=>{try{if(U(!0),i&&!s){Z([]),ie(" Este usuario no tiene vendedor asociado (sellerCandyId vaco).");return}const at=await Ot(ht(ke,"sellers_candies")),zt=[];at.forEach(Ht=>{const Lt=Ht.data(),er=String(Lt.status||"ACTIVO");er==="ACTIVO"&&zt.push({id:Ht.id,name:String(Lt.name||""),status:er})}),u(zt);const Ut=i?nr(ht(ke,"customers_candies"),cr("vendorId","==",s),on("createdAt","desc")):nr(ht(ke,"customers_candies"),on("createdAt","desc")),Qt=await Ot(Ut),Bt=[];Qt.forEach(Ht=>{const Lt=Ht.data();Bt.push({id:Ht.id,name:Lt.name??"",phone:Lt.phone??"+505 ",place:Lt.place??"",notes:Lt.notes??"",status:Lt.status??"ACTIVO",creditLimit:Number(Lt.creditLimit??0),createdAt:Lt.createdAt??fr.now(),balance:0,sellerId:Lt.sellerId||"",vendorId:Lt.vendorId||"",vendorName:Lt.vendorName||"",initialDebt:Number(Lt.initialDebt||0),lastAbonoDate:"",lastAbonoAmount:0})});for(const Ht of Bt)try{const Lt=nr(ht(ke,"ar_movements"),cr("customerId","==",Ht.id)),er=await Ot(Lt);let gr=0,Cr=null;er.forEach(Ta=>{var zl,ed,Gd;const da=Ta.data(),Ws=Number(da.amount||0);if(gr+=Ws,Ws<0){const au=da.date??((ed=(zl=da.createdAt)==null?void 0:zl.toDate)!=null&&ed.call(zl)?da.createdAt.toDate().toISOString().slice(0,10):""),Lf=(Gd=da.createdAt)!=null&&Gd.seconds?Number(da.createdAt.seconds):0;(!Cr||Lf>=Cr.ts)&&(Cr={date:au,amount:Math.abs(Ws),ts:Lf})}});const ys=Number(Ht.initialDebt||0);Ht.balance=ys+gr,Cr?(Ht.lastAbonoDate=Cr==null?void 0:Cr.date,Ht.lastAbonoAmount=Cr==null?void 0:Cr.amount):(Ht.lastAbonoDate="",Ht.lastAbonoAmount=0)}catch{Ht.balance=Number(Ht.initialDebt||0),Ht.lastAbonoDate="",Ht.lastAbonoAmount=0}Z(Bt)}catch(at){console.error(at),ie(" Error cargando clientes.")}finally{U(!1)}})()},[i,s]);const Oe=()=>{Y(""),ue("+505 "),me(""),Pe(""),O("ACTIVO"),R(0),K(""),D(0)},ct=async at=>{var Bt;if(at.preventDefault(),ie(""),!F.trim()){ie("Ingresa el nombre.");return}const zt=G1(he);if(zt.length<6){ie("Telfono incompleto.");return}const Ut=i?s:String(M||"").trim(),Qt=Ut&&((Bt=c.find(Ht=>Ht.id===Ut))==null?void 0:Bt.name)||"";try{const Ht=Number(W||0),Lt=await xn(ht(ke,"customers_candies"),{name:F.trim(),phone:zt,place:fe||"",notes:ne||"",status:Ie,creditLimit:Number(H||0),vendorId:Ut,vendorName:Qt,initialDebt:Ht,createdAt:fr.now()});Z(er=>[{id:Lt.id,name:F.trim(),phone:zt,place:fe||"",notes:ne||"",status:Ie,creditLimit:Number(H||0),vendorId:Ut,vendorName:Qt,initialDebt:Ht,createdAt:fr.now(),balance:Ht,lastAbonoDate:"",lastAbonoAmount:0},...er]),Oe(),Ee(!1),ie(" Cliente creado")}catch(Ht){console.error(Ht),ie(" Error al crear cliente")}},bt=at=>{if(i){ie(" No permitido: vendedores no editan clientes desde el listado.");return}je(at.id),Ae(at.name),Qe(at.phone||"+505 "),ut(at.place||""),it(at.notes||""),ce(at.status||"ACTIVO"),Me(Number(at.creditLimit||0)),ve(String(at.vendorId||""))},Dt=()=>{je(null),Ae(""),Qe("+505 "),ut(""),it(""),ce("ACTIVO"),Me(0),ve("")},xt=async()=>{var Lt;if(i){ie(" No permitido.");return}if(!J)return;const at=G1(ye);if(!z.trim()){ie("Ingresa el nombre.");return}const zt=L.find(er=>er.id===J),Ut=String((zt==null?void 0:zt.vendorId)||""),Qt=i?s:String(Le||"");if(i&&Ut&&Ut!==s){ie(" Este cliente pertenece a otro vendedor.");return}if(l&&Ut&&Qt&&Ut!==Qt){ie(" Este cliente ya est asociado a otro vendedor. Primero desasocia (deja vendedor en ) y guarda; luego lo puedes asignar.");return}const Bt=i?s:String(Le||""),Ht=Bt&&((Lt=c.find(er=>er.id===Bt))==null?void 0:Lt.name)||"";try{await nn(qt(ke,"customers_candies",J),{name:z.trim(),phone:at,place:st||"",notes:De||"",status:dt,creditLimit:Number(oe||0),vendorId:Bt,vendorName:Ht}),Z(er=>er.map(gr=>gr.id===J?{...gr,name:z.trim(),phone:at,place:st||"",notes:De||"",status:dt,creditLimit:Number(oe||0),vendorId:Bt,vendorName:Ht}:gr)),Dt(),ie(" Cliente actualizado")}catch(er){console.error(er),ie(" Error al actualizar")}},sr=async at=>{if(confirm(`Eliminar al cliente "${at.name}"?
Se devolvern al inventario todos los dulces de sus compras y se borrarn sus movimientos.`))try{U(!0);const Ut=nr(ht(ke,"sales_candies"),cr("customerId","==",at.id)),Qt=await Ot(Ut);for(const Lt of Qt.docs){const er=Lt.id;try{await m2(er)}catch(gr){console.warn("restoreSaleAndDeleteCandy error",gr);try{await Cn(qt(ke,"sales_candies",er))}catch{}}await HH(er)}const Bt=nr(ht(ke,"ar_movements"),cr("customerId","==",at.id)),Ht=await Ot(Bt);await Promise.all(Ht.docs.map(Lt=>Cn(qt(ke,"ar_movements",Lt.id)))),await Cn(qt(ke,"customers_candies",at.id)),Z(Lt=>Lt.filter(er=>er.id!==at.id)),ie(" Cliente eliminado y dulces devueltos al inventario")}catch(Ut){console.error(Ut),ie(" No se pudo eliminar el cliente.")}finally{U(!1)}},Xt=(at,zt)=>{const Ut=at.reduce((Lt,er)=>Lt+(Number(er.amount)||0),0),Qt=at.filter(Lt=>Number(Lt.amount)<0).reduce((Lt,er)=>Lt+Math.abs(Number(er.amount)||0),0),Bt=at.filter(Lt=>Number(Lt.amount)>0).reduce((Lt,er)=>Lt+(Number(er.amount)||0),0),Ht=Number(zt||0)+Ut;Ce({saldoActual:Ht,totalAbonado:Qt,totalCargos:Number(zt||0)+Bt,saldoRestante:Ht})},Kt=async at=>{mt(at),xe([]),Ce({saldoActual:0,totalAbonado:0,totalCargos:0,saldoRestante:0}),Ue(!0),We(!1),vt(!1),or(null),nt(!1),It(0),Ke(new Date().toISOString().slice(0,10)),q(""),_e(null),Ct(!0);try{const zt=nr(ht(ke,"ar_movements"),cr("customerId","==",at.id)),Ut=await Ot(zt),Qt=[];Ut.forEach(Bt=>{var gr,Cr;const Ht=Bt.data(),Lt=Ht.date??((Cr=(gr=Ht.createdAt)==null?void 0:gr.toDate)!=null&&Cr.call(gr)?Ht.createdAt.toDate().toISOString().slice(0,10):""),er=Number(Ht.amount||0);Qt.push({id:Bt.id,date:Lt,type:Ht.type??(er<0?"ABONO":"CARGO"),amount:er,ref:Ht.ref||{},comment:Ht.comment||"",createdAt:Ht.createdAt})}),Qt.sort((Bt,Ht)=>{var gr,Cr;if(Bt.date!==Ht.date)return Bt.date.localeCompare(Ht.date);const Lt=((gr=Bt.createdAt)==null?void 0:gr.seconds)||0,er=((Cr=Ht.createdAt)==null?void 0:Cr.seconds)||0;return Lt-er}),xe(Qt),Xt(Qt,Number(at.initialDebt||0))}catch(zt){console.error(zt),ie(" No se pudo cargar el estado de cuenta")}finally{Ct(!1)}},ar=at=>{const zt=at.filter(Ut=>Number(Ut.amount)<0).map(Ut=>{var Qt;return{date:Ut.date,amount:Math.abs(Number(Ut.amount||0)),ts:((Qt=Ut.createdAt)==null?void 0:Qt.seconds)||0}}).sort((Ut,Qt)=>(Ut.ts||0)-(Qt.ts||0));return zt.length?zt[zt.length-1]:null},Ar=async()=>{if(!rt)return;ie("");const at=Number(Xe||0);if(!(at>0)){ie("Ingresa un monto de abono mayor a 0.");return}const zt=parseFloat(at.toFixed(2));if(!$t){ie("Selecciona la fecha del abono.");return}try{ee(!0);const Ut={customerId:rt.id,type:"ABONO",amount:-zt,date:$t,comment:wt||"",createdAt:fr.now()},Bt={id:(await xn(ht(ke,"ar_movements"),Ut)).id,date:$t,type:"ABONO",amount:-zt,comment:wt||"",createdAt:fr.now()},Ht=[...jt,Bt].sort((Lt,er)=>{var ys,Ta;if(Lt.date!==er.date)return Lt.date.localeCompare(er.date);const gr=((ys=Lt.createdAt)==null?void 0:ys.seconds)||0,Cr=((Ta=er.createdAt)==null?void 0:Ta.seconds)||0;return gr-Cr});xe(Ht),Xt(Ht,Number(rt.initialDebt||0)),Z(Lt=>Lt.map(er=>{if(er.id!==rt.id)return er;const gr=(er.balance||0)-zt;return{...er,balance:gr,lastAbonoDate:$t,lastAbonoAmount:zt}})),mt(Lt=>Lt&&{...Lt,balance:(Lt.balance||0)-zt,lastAbonoDate:$t,lastAbonoAmount:zt}),It(0),q(""),Ke(new Date().toISOString().slice(0,10)),nt(!1),ie(" Abono registrado")}catch(Ut){console.error(Ut),ie(" Error al registrar el abono")}finally{ee(!1)}},Gt=at=>{_e(at.id),tt(at.date||new Date().toISOString().slice(0,10)),te(Math.abs(Number(at.amount||0))),re(at.comment||"")},_r=()=>{_e(null),tt(""),te(0),re("")},Ir=async()=>{if(!be||!rt)return;const at=jt.findIndex(Bt=>Bt.id===be);if(at===-1)return;const zt=jt[at],Ut=Number(ot||0);if(!(Ut>0)){ie("El monto debe ser mayor a 0.");return}const Qt=zt.type==="ABONO"?-parseFloat(Ut.toFixed(2)):+parseFloat(Ut.toFixed(2));try{await nn(qt(ke,"ar_movements",be),{date:Be,amount:Qt,comment:V||""});const Bt=[...jt];Bt[at]={...zt,date:Be,amount:Qt,comment:V||""},Bt.sort((gr,Cr)=>{var da,Ws;if(gr.date!==Cr.date)return gr.date.localeCompare(Cr.date);const ys=((da=gr.createdAt)==null?void 0:da.seconds)||0,Ta=((Ws=Cr.createdAt)==null?void 0:Ws.seconds)||0;return ys-Ta}),xe(Bt),Xt(Bt,Number(rt.initialDebt||0));const Ht=Bt.reduce((gr,Cr)=>gr+(Number(Cr.amount)||0),0),Lt=Number(rt.initialDebt||0)+Ht,er=ar(Bt);Z(gr=>gr.map(Cr=>Cr.id===rt.id?{...Cr,balance:Lt,lastAbonoDate:(er==null?void 0:er.date)||"",lastAbonoAmount:(er==null?void 0:er.amount)||0}:Cr)),mt(gr=>gr&&{...gr,balance:Lt,lastAbonoDate:(er==null?void 0:er.date)||"",lastAbonoAmount:(er==null?void 0:er.amount)||0}),_r(),ie(" Movimiento actualizado")}catch(Bt){console.error(Bt),ie(" Error al actualizar movimiento")}},Tn=async at=>{var Ut,Qt;if(confirm(`Eliminar este movimiento (${at.type==="ABONO"?"Abono":"Compra"}) del ${at.date}?${at.type==="CARGO"&&((Ut=at.ref)!=null&&Ut.saleId)?`
Se devolvern al inventario los dulces de esa venta.`:""}`)&&rt)try{if(U(!0),at.type==="CARGO"&&((Qt=at.ref)!=null&&Qt.saleId)){try{await m2(at.ref.saleId)}catch(gr){console.warn("restoreSaleAndDeleteCandy error",gr),U(!1),ie(" No se pudo devolver inventario de la venta.");return}await HH(at.ref.saleId)}else await Cn(qt(ke,"ar_movements",at.id));const Bt=jt.filter(gr=>{var Cr,ys;return at.type==="CARGO"&&((Cr=at.ref)!=null&&Cr.saleId)?((ys=gr.ref)==null?void 0:ys.saleId)!==at.ref.saleId:gr.id!==at.id});xe(Bt),Xt(Bt,Number(rt.initialDebt||0));const Ht=Bt.reduce((gr,Cr)=>gr+(Number(Cr.amount)||0),0),Lt=Number(rt.initialDebt||0)+Ht,er=ar(Bt);Z(gr=>gr.map(Cr=>Cr.id===rt.id?{...Cr,balance:Lt,lastAbonoDate:(er==null?void 0:er.date)||"",lastAbonoAmount:(er==null?void 0:er.amount)||0}:Cr)),mt(gr=>gr&&{...gr,balance:Lt,lastAbonoDate:(er==null?void 0:er.date)||"",lastAbonoAmount:(er==null?void 0:er.amount)||0}),or(null),ie(" Movimiento eliminado")}catch(Bt){console.error(Bt),ie(" Error al eliminar movimiento")}finally{U(!1)}},is=v.useMemo(()=>[...L].sort((at,zt)=>{var Ut,Qt;return at.status!==zt.status?at.status==="BLOQUEADO"?1:-1:(((Ut=zt.createdAt)==null?void 0:Ut.seconds)||0)-(((Qt=at.createdAt)==null?void 0:Qt.seconds)||0)}),[L]),fn=at=>at==="ACTIVO"?"bg-green-100 text-green-700":"bg-red-100 text-red-700",St=v.useMemo(()=>{const at=h.trim().toLowerCase(),zt=g.trim()===""?null:Number(g),Ut=y.trim()===""?null:Number(y);return is.filter(Qt=>{const Bt=!at||String(Qt.name||"").toLowerCase().includes(at),Ht=!m||Qt.status===m,Lt=Number(Qt.balance||0),er=zt===null||!Number.isNaN(zt)&&Lt>=zt,gr=Ut===null||!Number.isNaN(Ut)&&Lt<=Ut;return Bt&&Ht&&er&&gr})},[is,h,m,g,y]);return o.jsxs("div",{className:"max-w-6xl mx-auto",children:[o.jsxs("div",{className:"flex items-center justify-between mb-3",children:[o.jsx("h2",{className:"text-2xl font-bold",children:"Clientes (Dulces)"}),o.jsx("button",{className:"px-3 py-2 rounded bg-blue-600 text-white hover:bg-blue-700",onClick:()=>{Ee(!0),i&&K(s)},type:"button",children:"Crear Cliente"})]}),o.jsxs("div",{className:"mb-3",children:[o.jsx("button",{type:"button",className:"px-3 py-2 rounded bg-gray-100 hover:bg-gray-200 border w-full md:w-auto",onClick:()=>f(at=>!at),children:d?"Ocultar filtros":"Mostrar filtros"}),d&&o.jsxs("div",{className:"mt-2 bg-white border rounded-xl p-3 grid grid-cols-1 md:grid-cols-4 gap-3",children:[o.jsxs("div",{className:"md:col-span-2",children:[o.jsx("div",{className:"text-xs text-gray-500 mb-1",children:"Cliente"}),o.jsx("input",{className:"w-full border p-2 rounded",value:h,onChange:at=>A(at.target.value),placeholder:"Buscar por nombre"})]}),o.jsxs("div",{children:[o.jsx("div",{className:"text-xs text-gray-500 mb-1",children:"Estado"}),o.jsxs("select",{className:"w-full border p-2 rounded",value:m,onChange:at=>p(at.target.value||""),children:[o.jsx("option",{value:"",children:"Todos"}),o.jsx("option",{value:"ACTIVO",children:"ACTIVO"}),o.jsx("option",{value:"BLOQUEADO",children:"BLOQUEADO"})]})]}),o.jsxs("div",{className:"grid grid-cols-2 gap-2",children:[o.jsxs("div",{children:[o.jsx("div",{className:"text-xs text-gray-500 mb-1",children:"Monto mn."}),o.jsx("input",{className:"w-full border p-2 rounded text-right",inputMode:"decimal",value:g,onChange:at=>x(at.target.value),placeholder:"0"})]}),o.jsxs("div",{children:[o.jsx("div",{className:"text-xs text-gray-500 mb-1",children:"Monto mx."}),o.jsx("input",{className:"w-full border p-2 rounded text-right",inputMode:"decimal",value:y,onChange:at=>b(at.target.value),placeholder:""})]})]}),o.jsx("div",{className:"md:col-span-4 flex flex-wrap gap-2 justify-end",children:o.jsx("button",{type:"button",className:"px-3 py-2 rounded bg-gray-100 hover:bg-gray-200 border",onClick:()=>{A(""),p(""),x(""),b("")},children:"Limpiar"})})]})]}),o.jsxs("div",{className:"bg-white p-2 rounded shadow border w-full",children:[o.jsx("div",{className:"hidden md:block",children:o.jsxs("table",{className:"min-w-full w-full text-sm",children:[o.jsx("thead",{className:"bg-gray-100",children:o.jsxs("tr",{children:[o.jsx("th",{className:"p-2 border",children:"Fecha"}),o.jsx("th",{className:"p-2 border",children:"Nombre"}),o.jsx("th",{className:"p-2 border",children:"Telfono"}),o.jsx("th",{className:"p-2 border",children:"Vendedor"}),o.jsx("th",{className:"p-2 border",children:"Lugar"}),o.jsx("th",{className:"p-2 border",children:"Estado"}),o.jsx("th",{className:"p-2 border",children:"Lmite"}),o.jsx("th",{className:"p-2 border",children:"Saldo"}),o.jsx("th",{className:"p-2 border",children:"Comentario"}),o.jsx("th",{className:"p-2 border",children:"Acciones"})]})}),o.jsx("tbody",{children:ge?o.jsx("tr",{children:o.jsx("td",{className:"p-4 text-center",colSpan:10,children:"Cargando"})}):St.length===0?o.jsx("tr",{children:o.jsx("td",{className:"p-4 text-center",colSpan:10,children:"Sin clientes"})}):St.map(at=>{var Ut;const zt=J===at.id;return o.jsxs("tr",{className:"text-center",children:[o.jsx("td",{className:"p-2 border",children:(Ut=at.createdAt)!=null&&Ut.toDate?at.createdAt.toDate().toISOString().slice(0,10):""}),o.jsx("td",{className:"p-2 border text-left",children:zt?o.jsx("input",{className:"w-full border p-1 rounded",value:z,onChange:Qt=>Ae(Qt.target.value)}):o.jsx("div",{className:"font-medium",children:at.name})}),o.jsx("td",{className:"p-2 border",children:zt?o.jsx("input",{className:"w-full border p-1 rounded",value:ye,onChange:Qt=>Qe(G1(Qt.target.value))}):at.phone}),o.jsx("td",{className:"p-2 border",children:zt?o.jsxs("select",{className:"w-full border p-1 rounded text-xs",value:i?s:Le,onChange:Qt=>ve(Qt.target.value),disabled:i,title:"Vendedor asociado",children:[o.jsx("option",{value:"",children:" Sin vendedor "}),c.map(Qt=>o.jsx("option",{value:Qt.id,children:Qt.name},Qt.id))]}):at.vendorName||""}),o.jsx("td",{className:"p-2 border",children:zt?o.jsxs("select",{className:"w-full border p-1 rounded",value:st,onChange:Qt=>ut(Qt.target.value),children:[o.jsx("option",{value:"",children:""}),dB.map(Qt=>o.jsx("option",{value:Qt,children:Qt},Qt))]}):at.place||""}),o.jsx("td",{className:"p-2 border",children:zt?o.jsxs("select",{className:"w-full border p-1 rounded",value:dt,onChange:Qt=>ce(Qt.target.value),children:[o.jsx("option",{value:"ACTIVO",children:"ACTIVO"}),o.jsx("option",{value:"BLOQUEADO",children:"BLOQUEADO"})]}):o.jsx("span",{className:`px-2 py-0.5 rounded text-xs ${fn(at.status)}`,children:at.status})}),o.jsx("td",{className:"p-2 border",children:zt?o.jsx("input",{type:"number",step:"0.01",inputMode:"decimal",className:"w-full border p-1 rounded text-right",value:Number.isNaN(oe)?"":oe,onChange:Qt=>Me(Math.max(0,Number(Qt.target.value||0)))}):to(at.creditLimit||0)}),o.jsx("td",{className:"p-2 border font-semibold",children:to(at.balance||0)}),o.jsx("td",{className:"p-2 border",children:zt?o.jsx("textarea",{className:"w-full border p-1 rounded resize-y min-h-12",value:De,onChange:Qt=>it(Qt.target.value),maxLength:500}):o.jsx("span",{title:at.notes||"",children:(at.notes||"").length>40?(at.notes||"").slice(0,40)+"":at.notes||""})}),o.jsx("td",{className:"p-2 border",children:o.jsx("div",{className:"flex gap-2 justify-center",children:zt?o.jsxs(o.Fragment,{children:[o.jsx("button",{className:"px-2 py-1 rounded text-white bg-blue-600 hover:bg-blue-700",onClick:xt,children:"Guardar"}),o.jsx("button",{className:"px-2 py-1 rounded bg-gray-200 hover:bg-gray-300",onClick:Dt,children:"Cancelar"})]}):o.jsxs(o.Fragment,{children:[o.jsx("button",{className:"px-2 py-1 rounded text-white bg-yellow-600 hover:bg-yellow-700",onClick:()=>bt(at),children:"Editar"}),o.jsx("button",{className:"px-2 py-1 rounded text-white bg-red-600 hover:bg-red-700 disabled:opacity-50",onClick:()=>sr(at),disabled:!l,title:l?"Borrar":"Solo admin",children:"Borrar"}),o.jsx("button",{className:"px-2 py-1 rounded text-white bg-indigo-600 hover:bg-indigo-700",onClick:()=>Kt(at),children:"Estado de cuenta"})]})})})]},at.id)})})]})}),o.jsx("div",{className:"md:hidden",children:ge?o.jsx("div",{className:"p-4 text-center text-sm",children:"Cargando"}):St.length===0?o.jsx("div",{className:"p-4 text-center text-sm",children:"Sin clientes"}):o.jsx("div",{className:"space-y-2",children:St.map(at=>{const zt=Se===at.id,Ut=J===at.id,Qt=o.jsx("span",{className:`px-2 py-0.5 rounded-full text-[11px] ${fn(at.status)}`,children:at.status});return o.jsxs("div",{className:"border rounded-2xl shadow-sm bg-white overflow-hidden",children:[o.jsxs("button",{type:"button",className:"w-full px-3 py-3 flex items-center justify-between gap-2 text-left",onClick:()=>{ie(""),!Ut&&Re(Bt=>Bt===at.id?null:at.id)},children:[o.jsx("div",{className:"min-w-0 flex-1",children:o.jsx("div",{className:"truncate font-semibold",children:at.name})}),o.jsxs("div",{className:"flex items-center gap-2 shrink-0",children:[o.jsxs("div",{className:"text-right",children:[o.jsx("div",{className:"text-[11px] text-gray-500 leading-3",children:"Pendiente"}),o.jsx("div",{className:"font-semibold leading-4",children:to(at.balance||0)})]}),Qt]})]}),zt&&o.jsxs("div",{className:"px-3 pb-3",children:[o.jsxs("div",{className:"grid grid-cols-2 gap-2 text-sm",children:[o.jsxs("div",{className:"bg-gray-50 border rounded-xl p-2",children:[o.jsx("div",{className:"text-[11px] text-gray-500",children:"ltimo abono"}),o.jsx("div",{className:"font-medium",children:at.lastAbonoDate?at.lastAbonoDate:""}),o.jsx("div",{className:"text-[12px] text-gray-700",children:at.lastAbonoAmount?to(at.lastAbonoAmount):""})]}),o.jsxs("div",{className:"bg-gray-50 border rounded-xl p-2",children:[o.jsx("div",{className:"text-[11px] text-gray-500",children:"Saldo pendiente"}),o.jsx("div",{className:"text-lg font-bold",children:to(at.balance||0)})]})]}),Ut?o.jsxs("div",{className:"mt-3 space-y-3",children:[o.jsxs("div",{className:"grid grid-cols-2 gap-2 text-sm",children:[o.jsxs("div",{className:"col-span-2",children:[o.jsx("div",{className:"text-[11px] text-gray-500",children:"Nombre"}),o.jsx("input",{className:"w-full border p-2 rounded-xl",value:z,onChange:Bt=>Ae(Bt.target.value)})]}),o.jsxs("div",{className:"col-span-2",children:[o.jsx("div",{className:"text-[11px] text-gray-500",children:"Telfono"}),o.jsx("input",{className:"w-full border p-2 rounded-xl",value:ye,onChange:Bt=>Qe(G1(Bt.target.value))})]}),o.jsxs("div",{children:[o.jsx("div",{className:"text-[11px] text-gray-500",children:"Estado"}),o.jsxs("select",{className:"w-full border p-2 rounded-xl",value:dt,onChange:Bt=>ce(Bt.target.value),children:[o.jsx("option",{value:"ACTIVO",children:"ACTIVO"}),o.jsx("option",{value:"BLOQUEADO",children:"BLOQUEADO"})]})]}),o.jsxs("div",{children:[o.jsx("div",{className:"text-[11px] text-gray-500",children:"Lugar"}),o.jsxs("select",{className:"w-full border p-2 rounded-xl",value:st,onChange:Bt=>ut(Bt.target.value),children:[o.jsx("option",{value:"",children:""}),dB.map(Bt=>o.jsx("option",{value:Bt,children:Bt},Bt))]})]}),o.jsxs("div",{className:"col-span-2",children:[o.jsx("div",{className:"text-[11px] text-gray-500",children:"Vendedor"}),o.jsxs("select",{className:"w-full border p-2 rounded-xl",value:i?s:Le,onChange:Bt=>ve(Bt.target.value),disabled:i,children:[o.jsx("option",{value:"",children:" Sin vendedor "}),c.map(Bt=>o.jsx("option",{value:Bt.id,children:Bt.name},Bt.id))]})]}),o.jsxs("div",{className:"col-span-2",children:[o.jsx("div",{className:"text-[11px] text-gray-500",children:"Lmite"}),o.jsx("input",{type:"number",step:"0.01",inputMode:"decimal",className:"w-full border p-2 rounded-xl text-right",value:Number.isNaN(oe)?"":oe,onChange:Bt=>Me(Math.max(0,Number(Bt.target.value||0)))})]}),o.jsxs("div",{className:"col-span-2",children:[o.jsx("div",{className:"text-[11px] text-gray-500",children:"Comentario"}),o.jsx("textarea",{className:"w-full border p-2 rounded-xl min-h-24 resize-y",value:De,onChange:Bt=>it(Bt.target.value),maxLength:500})]})]}),o.jsxs("div",{className:"grid grid-cols-2 gap-2",children:[o.jsx("button",{className:"px-3 py-2 rounded-xl text-white bg-blue-600 hover:bg-blue-700",onClick:xt,type:"button",children:"Guardar"}),o.jsx("button",{className:"px-3 py-2 rounded-xl bg-gray-200 hover:bg-gray-300",onClick:()=>{Dt(),Re(null)},type:"button",children:"Cancelar"})]})]}):o.jsxs("div",{className:"mt-3 grid grid-cols-3 gap-2",children:[o.jsx("button",{className:"px-3 py-2 rounded-xl text-white bg-yellow-600 hover:bg-yellow-700",onClick:()=>bt(at),type:"button",children:"Editar"}),o.jsx("button",{className:"px-3 py-2 rounded-xl text-white bg-red-600 hover:bg-red-700 disabled:opacity-50",onClick:()=>sr(at),disabled:!l,title:l?"Borrar":"Solo admin",type:"button",children:"Borrar"}),o.jsx("button",{className:"px-3 py-2 rounded-xl text-white bg-indigo-600 hover:bg-indigo-700",onClick:()=>Kt(at),type:"button",children:"Estado"})]})]})]},at.id)})})})]}),Ge&&o.jsx("p",{className:"mt-2 text-sm",children:Ge}),pe&&zc.createPortal(o.jsxs("div",{className:"fixed inset-0 z-[70] flex items-center justify-center",children:[o.jsx("div",{className:"absolute inset-0 bg-black/40",onClick:()=>Ee(!1)}),o.jsxs("div",{className:"relative bg-white rounded-lg shadow-2xl border w-[96%] max-w-3xl max-h-[92vh] overflow-auto p-4",children:[o.jsxs("div",{className:"flex items-center justify-between mb-2",children:[o.jsx("h3",{className:"text-lg font-bold",children:"Crear Cliente"}),o.jsx("button",{className:"px-3 py-1 rounded bg-gray-200 hover:bg-gray-300",onClick:()=>Ee(!1),type:"button",children:"Cerrar"})]}),o.jsxs("form",{onSubmit:ct,className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[o.jsxs("div",{children:[o.jsx("label",{className:"block text-sm font-semibold",children:"Nombre"}),o.jsx("input",{className:"w-full border p-2 rounded",placeholder:"Ej: Mara Lpez",value:F,onChange:at=>Y(at.target.value)})]}),o.jsxs("div",{children:[o.jsx("label",{className:"block text-sm font-semibold",children:"Telfono"}),o.jsx("input",{className:"w-full border p-2 rounded",value:he,onChange:at=>ue(G1(at.target.value)),placeholder:"+505 88888888",inputMode:"numeric"})]}),o.jsxs("div",{children:[o.jsx("label",{className:"block text-sm font-semibold",children:"Lugar"}),o.jsxs("select",{className:"w-full border p-2 rounded",value:fe,onChange:at=>me(at.target.value),children:[o.jsx("option",{value:"",children:""}),dB.map(at=>o.jsx("option",{value:at,children:at},at))]})]}),o.jsxs("div",{children:[o.jsx("label",{className:"block text-sm font-semibold",children:"Estado"}),o.jsxs("select",{className:"w-full border p-2 rounded",value:Ie,onChange:at=>O(at.target.value),children:[o.jsx("option",{value:"ACTIVO",children:"ACTIVO"}),o.jsx("option",{value:"BLOQUEADO",children:"BLOQUEADO"})]})]}),o.jsxs("div",{children:[o.jsx("label",{className:"block text-sm font-semibold",children:"Vendedor asociado"}),o.jsxs("select",{className:"w-full border p-2 rounded",value:i?s:M,onChange:at=>K(at.target.value),disabled:i,children:[o.jsx("option",{value:"",children:" Sin vendedor "}),c.map(at=>o.jsx("option",{value:at.id,children:at.name},at.id))]})]}),o.jsxs("div",{children:[o.jsx("label",{className:"block text-sm font-semibold",children:"Deuda inicial"}),o.jsx("input",{type:"number",step:"0.01",inputMode:"decimal",className:"w-full border p-2 rounded",value:W===0?"":W,onChange:at=>D(Math.max(0,Number(at.target.value||0))),placeholder:"Ej: 1500"}),o.jsx("div",{className:"text-xs text-gray-500 mt-1",children:"Este valor cuenta como saldo desde el inicio."})]}),o.jsxs("div",{children:[o.jsx("label",{className:"block text-sm font-semibold",children:"Lmite de crdito (opcional)"}),o.jsx("input",{type:"number",step:"0.01",inputMode:"decimal",className:"w-full border p-2 rounded",value:H===0?"":H,onChange:at=>R(Math.max(0,Number(at.target.value||0))),placeholder:"Ej: 2000"})]}),o.jsxs("div",{className:"md:col-span-2",children:[o.jsx("label",{className:"block text-sm font-semibold",children:"Comentario"}),o.jsx("textarea",{className:"w-full border p-2 rounded resize-y min-h-24",value:ne,onChange:at=>Pe(at.target.value),maxLength:500,placeholder:"Notas del cliente"}),o.jsxs("div",{className:"text-xs text-gray-500 text-right",children:[ne.length,"/500"]})]}),o.jsxs("div",{className:"md:col-span-2 flex justify-end gap-2",children:[o.jsx("button",{type:"button",className:"px-4 py-2 rounded bg-gray-200 hover:bg-gray-300",onClick:()=>Ee(!1),children:"Cancelar"}),o.jsx("button",{className:"bg-blue-600 text-white px-4 py-2 rounded hover:bg-blue-700",children:"Guardar cliente"})]})]})]})]}),document.body),le&&o.jsx("div",{className:"fixed inset-0 bg-black/40 flex items-center justify-center z-50",children:o.jsxs("div",{className:"bg-white rounded-lg shadow-xl border w-[95%] max-w-5xl p-4 max-h-[92vh] overflow-auto",children:[o.jsxs("div",{className:"flex items-center justify-between mb-2",children:[o.jsxs("h3",{className:"text-lg font-bold",children:["Estado de cuenta  ",(rt==null?void 0:rt.name)||""]}),o.jsxs("div",{className:"flex gap-2",children:[o.jsx("button",{className:"px-3 py-1 rounded bg-green-600 text-white hover:bg-green-700",onClick:()=>{It(0),Ke(new Date().toISOString().slice(0,10)),q(""),nt(!0)},children:"Abonar"}),o.jsx("button",{className:"px-3 py-1 rounded bg-gray-200 hover:bg-gray-300",onClick:()=>Ue(!1),children:"Cerrar"})]})]}),o.jsxs("div",{className:"hidden md:block",children:[o.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-3 mb-3",children:[o.jsxs("div",{className:"p-3 border rounded bg-gray-50",children:[o.jsx("div",{className:"text-xs text-gray-600",children:"Deuda inicial"}),o.jsx("div",{className:"text-xl font-semibold",children:to(Number((rt==null?void 0:rt.initialDebt)||0))})]}),o.jsxs("div",{className:"p-3 border rounded bg-gray-50",children:[o.jsx("div",{className:"text-xs text-gray-600",children:"Saldo actual"}),o.jsx("div",{className:"text-xl font-semibold",children:to(He.saldoActual)})]}),o.jsxs("div",{className:"p-3 border rounded bg-gray-50",children:[o.jsx("div",{className:"text-xs text-gray-600",children:"Total abonado"}),o.jsx("div",{className:"text-xl font-semibold",children:to(He.totalAbonado)})]}),o.jsxs("div",{className:"p-3 border rounded bg-gray-50",children:[o.jsx("div",{className:"text-xs text-gray-600",children:"Saldo restante"}),o.jsx("div",{className:"text-xl font-semibold",children:to(He.saldoRestante)})]})]}),o.jsx("div",{className:"bg-white rounded border overflow-x-auto",children:o.jsxs("table",{className:"min-w-full text-sm",children:[o.jsx("thead",{className:"bg-gray-100",children:o.jsxs("tr",{children:[o.jsx("th",{className:"p-2 border",children:"Fecha"}),o.jsx("th",{className:"p-2 border",children:"Tipo"}),o.jsx("th",{className:"p-2 border",children:"Referencia"}),o.jsx("th",{className:"p-2 border",children:"Comentario"}),o.jsx("th",{className:"p-2 border",children:"Monto"}),o.jsx("th",{className:"p-2 border",children:"Acciones"})]})}),o.jsx("tbody",{children:gt?o.jsx("tr",{children:o.jsx("td",{colSpan:6,className:"p-4 text-center",children:"Cargando"})}):jt.length===0?o.jsx("tr",{children:o.jsx("td",{colSpan:6,className:"p-4 text-center",children:"Sin movimientos"})}):jt.map(at=>{var Ut,Qt;const zt=be===at.id;return o.jsxs("tr",{className:"text-center",children:[o.jsx("td",{className:"p-2 border",children:zt?o.jsx("input",{type:"date",className:"w-full border p-1 rounded",value:Be,onChange:Bt=>tt(Bt.target.value)}):at.date||""}),o.jsx("td",{className:"p-2 border",children:at.amount>=0?(Ut=at.ref)!=null&&Ut.saleId?o.jsx("button",{type:"button",className:"px-2 py-0.5 rounded text-xs bg-yellow-100 text-yellow-700 underline",title:"Ver dulces de esta compra",onClick:()=>T(at.ref.saleId),children:"COMPRA (CARGO)"}):o.jsx("span",{className:"px-2 py-0.5 rounded text-xs bg-yellow-100 text-yellow-700",children:"COMPRA (CARGO)"}):o.jsx("span",{className:"px-2 py-0.5 rounded text-xs bg-green-100 text-green-700",children:"ABONO"})}),o.jsx("td",{className:"p-2 border",children:(Qt=at.ref)!=null&&Qt.saleId?`Venta #${at.ref.saleId}`:""}),o.jsx("td",{className:"p-2 border",children:zt?o.jsx("input",{className:"w-full border p-1 rounded",value:V,onChange:Bt=>re(Bt.target.value),placeholder:"Comentario"}):o.jsx("span",{title:at.comment||"",children:(at.comment||"").length>40?(at.comment||"").slice(0,40)+"":at.comment||""})}),o.jsx("td",{className:"p-2 border font-semibold",children:zt?o.jsx("input",{type:"number",step:"0.01",inputMode:"decimal",className:"w-full border p-1 rounded text-right",value:Number.isNaN(ot)?"":ot,onChange:Bt=>{const Ht=Number(Bt.target.value||0),Lt=Number.isFinite(Ht)?Math.max(0,parseFloat(Ht.toFixed(2))):0;te(Lt)},placeholder:"0.00"}):to(at.amount)}),o.jsx("td",{className:"p-2 border",children:zt?o.jsxs("div",{className:"flex gap-2 justify-center",children:[o.jsx("button",{className:"px-2 py-1 rounded text-white bg-blue-600 hover:bg-blue-700",onClick:Ir,children:"Guardar"}),o.jsx("button",{className:"px-2 py-1 rounded bg-gray-200 hover:bg-gray-300",onClick:_r,children:"Cancelar"})]}):o.jsxs("div",{className:"flex gap-2 justify-center",children:[o.jsx("button",{className:"px-2 py-1 rounded text-white bg-yellow-600 hover:bg-yellow-700",onClick:()=>Gt(at),children:"Editar"}),o.jsx("button",{className:"px-2 py-1 rounded text-white bg-red-600 hover:bg-red-700",onClick:()=>Tn(at),children:"Borrar"})]})})]},at.id)})})]})})]}),o.jsxs("div",{className:"md:hidden space-y-3",children:[o.jsxs("div",{className:"border rounded-2xl overflow-hidden",children:[o.jsxs("button",{type:"button",className:"w-full px-3 py-3 flex items-center justify-between text-left",onClick:()=>We(at=>!at),children:[o.jsx("div",{className:"font-semibold",children:"Estado de cuenta"}),o.jsx("div",{className:"text-sm text-gray-500",children:et?"Ocultar":"Ver"})]}),et&&o.jsxs("div",{className:"px-3 pb-3 grid grid-cols-2 gap-2",children:[o.jsxs("div",{className:"bg-gray-50 border rounded-xl p-2",children:[o.jsx("div",{className:"text-[11px] text-gray-500",children:"Deuda inicial"}),o.jsx("div",{className:"font-bold",children:to(Number((rt==null?void 0:rt.initialDebt)||0))})]}),o.jsxs("div",{className:"bg-gray-50 border rounded-xl p-2",children:[o.jsx("div",{className:"text-[11px] text-gray-500",children:"Saldo actual"}),o.jsx("div",{className:"font-bold",children:to(He.saldoActual)})]}),o.jsxs("div",{className:"bg-gray-50 border rounded-xl p-2",children:[o.jsx("div",{className:"text-[11px] text-gray-500",children:"Total abonado"}),o.jsx("div",{className:"font-bold",children:to(He.totalAbonado)})]}),o.jsxs("div",{className:"bg-gray-50 border rounded-xl p-2",children:[o.jsx("div",{className:"text-[11px] text-gray-500",children:"Saldo restante"}),o.jsx("div",{className:"font-bold",children:to(He.saldoRestante)})]})]})]}),o.jsxs("div",{className:"border rounded-2xl overflow-hidden",children:[o.jsxs("button",{type:"button",className:"w-full px-3 py-3 flex items-center justify-between text-left",onClick:()=>vt(at=>!at),children:[o.jsx("div",{className:"font-semibold",children:"Movimientos"}),o.jsx("div",{className:"text-sm text-gray-500",children:At?"Ocultar":"Ver"})]}),At&&o.jsx("div",{className:"px-3 pb-3 space-y-2",children:gt?o.jsx("div",{className:"text-center text-sm p-3",children:"Cargando"}):jt.length===0?o.jsx("div",{className:"text-center text-sm p-3",children:"Sin movimientos"}):jt.map(at=>{var Ht;const zt=Vt===at.id,Ut=be===at.id,Qt=at.amount>=0?"CARGO":"ABONO",Bt=at.amount>=0?"bg-yellow-100 text-yellow-700":"bg-green-100 text-green-700";return o.jsxs("div",{className:"border rounded-2xl overflow-hidden bg-white",children:[o.jsxs("button",{type:"button",className:"w-full px-3 py-3 flex items-center justify-between gap-2 text-left",onClick:()=>{Ut||or(Lt=>Lt===at.id?null:at.id)},children:[o.jsxs("div",{className:"min-w-0",children:[o.jsx("div",{className:"text-[11px] text-gray-500 leading-3",children:"Fecha"}),o.jsx("div",{className:"font-semibold",children:at.date||""})]}),o.jsxs("div",{className:"flex items-center gap-2",children:[o.jsx("span",{className:`px-2 py-0.5 rounded-full text-[11px] ${Bt}`,children:Qt}),o.jsxs("div",{className:"text-right",children:[o.jsx("div",{className:"text-[11px] text-gray-500 leading-3",children:"Monto"}),o.jsx("div",{className:"font-semibold",children:to(at.amount)})]})]})]}),zt&&o.jsxs("div",{className:"px-3 pb-3 space-y-2",children:[o.jsxs("div",{className:"text-sm",children:[o.jsx("div",{className:"text-[11px] text-gray-500",children:"Referencia"}),o.jsx("div",{className:"font-medium",children:(Ht=at.ref)!=null&&Ht.saleId?`Venta #${at.ref.saleId}`:""})]}),o.jsxs("div",{className:"text-sm",children:[o.jsx("div",{className:"text-[11px] text-gray-500",children:"Comentario"}),Ut?o.jsx("input",{className:"w-full border p-2 rounded-xl",value:V,onChange:Lt=>re(Lt.target.value),placeholder:"Comentario"}):o.jsx("div",{className:"font-medium",children:(at.comment||"").trim()||""})]}),Ut&&o.jsxs("div",{className:"grid grid-cols-2 gap-2",children:[o.jsxs("div",{children:[o.jsx("div",{className:"text-[11px] text-gray-500",children:"Fecha"}),o.jsx("input",{type:"date",className:"w-full border p-2 rounded-xl",value:Be,onChange:Lt=>tt(Lt.target.value)})]}),o.jsxs("div",{children:[o.jsx("div",{className:"text-[11px] text-gray-500",children:"Monto"}),o.jsx("input",{type:"number",step:"0.01",inputMode:"decimal",className:"w-full border p-2 rounded-xl text-right",value:Number.isNaN(ot)?"":ot,onChange:Lt=>{const er=Number(Lt.target.value||0),gr=Number.isFinite(er)?Math.max(0,parseFloat(er.toFixed(2))):0;te(gr)}})]})]}),Ut?o.jsxs("div",{className:"grid grid-cols-2 gap-2 pt-1",children:[o.jsx("button",{className:"px-3 py-2 rounded-xl text-white bg-blue-600 hover:bg-blue-700",onClick:Ir,type:"button",children:"Guardar"}),o.jsx("button",{className:"px-3 py-2 rounded-xl bg-gray-200 hover:bg-gray-300",onClick:_r,type:"button",children:"Cancelar"})]}):o.jsxs("div",{className:"grid grid-cols-2 gap-2 pt-1",children:[o.jsx("button",{className:"px-3 py-2 rounded-xl text-white bg-yellow-600 hover:bg-yellow-700",onClick:()=>Gt(at),type:"button",children:"Editar"}),o.jsx("button",{className:"px-3 py-2 rounded-xl text-white bg-red-600 hover:bg-red-700",onClick:()=>Tn(at),type:"button",children:"Borrar"})]})]})]},at.id)})})]})]}),lt&&o.jsx("div",{className:"fixed inset-0 bg-black/50 flex items-center justify-center z-[60]",children:o.jsxs("div",{className:"bg-white rounded-lg shadow-2xl border w-[95%] max-w-md p-4",children:[o.jsxs("h3",{className:"text-lg font-bold",children:["Registrar abono  ",(rt==null?void 0:rt.name)||""]}),o.jsxs("div",{className:"grid grid-cols-1 gap-3",children:[o.jsxs("div",{children:[o.jsx("label",{className:"block text-sm font-semibold",children:"Fecha"}),o.jsx("input",{type:"date",className:"w-full border p-2 rounded",value:$t,onChange:at=>Ke(at.target.value)})]}),o.jsxs("div",{children:[o.jsx("label",{className:"block text-sm font-semibold",children:"Monto"}),o.jsx("input",{type:"number",step:"0.01",inputMode:"decimal",className:"w-full border p-2 rounded",value:Xe===0?"":Xe,onChange:at=>{const zt=Number(at.target.value||0),Ut=Number.isFinite(zt)?Math.max(0,parseFloat(zt.toFixed(2))):0;It(Ut)},placeholder:"0.00"}),o.jsx("div",{className:"text-xs text-gray-500 mt-1",children:"Se registrar como ABONO (negativo) con 2 decimales."})]}),o.jsxs("div",{children:[o.jsx("label",{className:"block text-sm font-semibold",children:"Comentario (opcional)"}),o.jsx("textarea",{className:"w-full border p-2 rounded resize-y min-h-20",value:wt,onChange:at=>q(at.target.value),maxLength:250,placeholder:"Ej: Abono en efectivo"}),o.jsxs("div",{className:"text-xs text-gray-500 text-right",children:[wt.length,"/250"]})]})]}),o.jsxs("div",{className:"mt-4 flex justify-end gap-2",children:[o.jsx("button",{className:"px-3 py-2 rounded bg-gray-200 hover:bg-gray-300",onClick:()=>nt(!1),disabled:ae,children:"Cancelar"}),o.jsx("button",{className:"px-3 py-2 rounded bg-green-600 text-white hover:bg-green-700 disabled:opacity-60",onClick:Ar,disabled:ae,children:ae?"Guardando...":"Guardar abono"})]})]})})]})}),w&&o.jsx("div",{className:"fixed inset-0 bg-black/40 flex items-center justify-center z-[65]",children:o.jsxs("div",{className:"bg-white rounded-lg shadow-xl border w-[95%] max-w-3xl p-4",children:[o.jsxs("div",{className:"flex items-center justify-between mb-2",children:[o.jsxs("h3",{className:"text-lg font-bold",children:["Dulces vendidos"," ",E?` #${E}`:""]}),o.jsx("button",{className:"px-3 py-1 rounded bg-gray-200 hover:bg-gray-300",onClick:()=>j(!1),children:"Cerrar"})]}),o.jsx("div",{className:"bg-white rounded border overflow-x-auto",children:o.jsxs("table",{className:"min-w-full text-sm",children:[o.jsx("thead",{className:"bg-gray-100",children:o.jsxs("tr",{children:[o.jsx("th",{className:"p-2 border",children:"Producto"}),o.jsx("th",{className:"p-2 border text-right",children:"Cantidad"}),o.jsx("th",{className:"p-2 border text-right",children:"Precio"}),o.jsx("th",{className:"p-2 border text-right",children:"Descuento"}),o.jsx("th",{className:"p-2 border text-right",children:"Monto"})]})}),o.jsx("tbody",{children:I?o.jsx("tr",{children:o.jsx("td",{colSpan:5,className:"p-4 text-center",children:"Cargando"})}):k.length===0?o.jsx("tr",{children:o.jsx("td",{colSpan:5,className:"p-4 text-center",children:"Sin tems en esta venta."})}):k.map((at,zt)=>o.jsxs("tr",{className:"text-center",children:[o.jsx("td",{className:"p-2 border text-left",children:at.productName}),o.jsx("td",{className:"p-2 border text-right",children:at.qty}),o.jsx("td",{className:"p-2 border text-right",children:to(at.unitPrice)}),o.jsx("td",{className:"p-2 border text-right",children:to(at.discount||0)}),o.jsx("td",{className:"p-2 border text-right",children:to(at.total)})]},zt))})]})})]})})]})}const ec=t=>`C$ ${(Number(t)||0).toFixed(2)}`,HLe=["Altagracia","Taguizapa","El paso","Calaysa","Urbaite","Las Pilas","Pull","Tilgue","Balge","Santa Cruz","Moyogalpa","Santo Domingo","San Jos del Sur","San Fernando","Merida","La Paloma","San Lorenzo","San Carlos","San Miguel"];function $Le(t){switch(t){case"RIVAS":return"Rivas";case"SAN_JORGE":return"San Jorge";case"ISLA":return"Isla de Ometepe";default:return""}}function KLe(t){switch(t){case"Rivas":return"RIVAS";case"San Jorge":return"SAN_JORGE";case"Isla Ometepe":return"ISLA";default:return"RIVAS"}}function GLe(t){const{saleId:e,date:r,customerName:n,branch:a,items:s,total:i,vendorName:l,vendorCommissionPercent:c,vendorCommissionAmount:u}=t,d=new Or;let f=12;if(d.setFontSize(16),d.text("Multiservicios Ortiz",10,f),f+=6,d.setFontSize(12),d.text("Recibo de venta certificada",10,f),f+=8,d.setFontSize(12),d.text(`Fecha: ${r}`,10,f),f+=5,d.text(`Cliente: ${n||"Cliente Mostrador"}`,10,f),f+=5,d.text(`Sucursal: ${$Le(a)}`,10,f),f+=5,d.text(`Autorizado: ${e}`,10,f),f+=5,l&&(d.text(`Vendedor: ${l}`,10,f),f+=5),typeof c=="number"){const h=Number(u||0).toFixed(2),A=c.toFixed(2);d.text(`Comisin vendedor: ${A}%  C$ ${h}`,10,f),f+=8}else f+=3;d.setFontSize(12),d.text("Producto",10,f),d.text("Paquetes",110,f,{align:"right"}),d.text("Precio.",150,f,{align:"right"}),d.text("Subtotal",190,f,{align:"right"}),f+=4,d.line(10,f,190,f),f+=4,s.forEach(h=>{f>270&&(d.addPage(),f=12);const A=(h.productName||"").length>50?h.productName.slice(0,47)+"...":h.productName;d.text(A,10,f),d.text(String(h.qty),110,f,{align:"right"}),d.text(`C$ ${Number(h.unitPrice||0).toFixed(2)}`,150,f,{align:"right"}),d.text(`C$ ${Number(h.total||0).toFixed(2)}`,190,f,{align:"right"}),f+=5}),f+=4,d.line(10,f,190,f),f+=6,d.setFontSize(13),d.text(`Total: C$ ${Number(i||0).toFixed(2)}`,190,f,{align:"right"}),f+=6,d.setFontSize(9),d.text("Gracias por su compra.",10,f),d.save(`venta_dulces_${e}.pdf`)}async function $H(t,e){if(!t||!e)return 0;const r=nr(ht(ke,"inventory_candies_sellers"),cr("sellerId","==",e),cr("productId","==",t)),n=await Ot(r);let a=0;return n.forEach(s=>{const i=s.data(),l=Number(i.remainingUnits??i.remaining??i.totalUnits??0);l>0&&(a+=l)}),a}const KH=()=>{const t=new Date;return t.setMinutes(t.getMinutes()-t.getTimezoneOffset()),t.toISOString().slice(0,10)};async function qLe(t){const{productId:e,vendorId:r,quantityUnits:n,saleDate:a,saleId:s}=t;let i=Math.max(0,Math.floor(Number(n||0)));const l=[];if(!e||!r||i<=0)return{allocations:[]};const c=nr(ht(ke,"inventory_candies_sellers"),cr("sellerId","==",r),cr("productId","==",e),cr("remainingUnits",">",0),on("date","asc"),on("createdAt","asc")),u=await Ot(c);for(const d of u.docs){if(i<=0)break;const f=d.data(),h=Number(f.remainingUnits||0);if(h<=0)continue;const A=Math.min(h,i),m=h-A,p=Math.max(1,Math.floor(Number(f.unitsPerPackage||1))),g=Math.floor(m/p);await nn(d.ref,{remainingUnits:m,remainingPackages:g}),l.push({inventorySellerId:d.id,productId:e,units:A,saleDate:a,saleId:s}),i-=A}return i>0&&console.warn("[allocateSaleFIFOCandyFromVendor] No alcanz el inventario del vendedor, faltaron unidades.",{productId:e,vendorId:r,remaining:i}),{allocations:l}}function GH(t){const e="+505 ";if(!t.startsWith(e)){const n=t.replace(/\D/g,"");return e+n.slice(0,8)}const r=t.slice(e.length).replace(/\D/g,"");return e+r.slice(0,8)}function zLe({role:t="",roles:e,sellerCandyId:r="",currentUserEmail:n}){const a=e&&e.length?e:t;Yr(a,"admin"),Yr(a,"vendedor_dulces");const[s,i]=v.useState([]),[l,c]=v.useState([]),[u,d]=v.useState([]),[f,h]=v.useState({}),[A,m]=v.useState("CONTADO"),[p,g]=v.useState("RIVAS"),[x,y]=v.useState(""),[b,w]=v.useState(""),[j,I]=v.useState(KH()),[_,E]=v.useState(""),[S,k]=v.useState(!1),[P,T]=v.useState(""),[F,Y]=v.useState([]),[he,ue]=v.useState(!0),[fe,me]=v.useState(!1),ne=v.useMemo(()=>F.reduce((ee,be)=>ee+(be.qtyPackages||0),0),[F]),Pe=v.useMemo(()=>F.reduce((ee,be)=>ee+(be.qtyPackages||0)*(be.unitsPerPackage||1),0),[F]),Ie=v.useMemo(()=>{const ee=F.reduce((be,_e)=>{const Be=(Number(_e.pricePerPackage)||0)*(_e.qtyPackages||0),tt=Number(_e.discount)||0,ot=Math.max(0,Be-tt);return be+ot},0);return Math.floor(ee*100)/100},[F]),[O,H]=v.useState(0),[R,M]=v.useState(""),[K,W]=v.useState(!1),[D,L]=v.useState(!1),[Z,ge]=v.useState(""),[U,Ge]=v.useState("+505 "),[ie,J]=v.useState(""),[je,z]=v.useState(""),[Ae,ye]=v.useState("ACTIVO"),[Qe,st]=v.useState(0),[ut,De]=v.useState(""),it=()=>{ge(""),Ge("+505 "),J(""),z(""),ye("ACTIVO"),st(0)},[dt,ce]=v.useState(!1),oe=async ee=>{const be=String(ee||"").trim();if(!be)return;const _e=Ke.find(te=>String(te.barcode||"")===be),Be=Ke.find(te=>String(te.sku||"")===be),tt=Ke.find(te=>String(te.id||"")===be),ot=_e||Be||tt||null;ot?(await Ce(ot.id),M(" Producto agregado desde escner."),setTimeout(()=>M(""),2500)):(M(" Cdigo no corresponde a ningn producto disponible."),setTimeout(()=>M(""),2500))};function Me({open:ee,onClose:be,onDetected:_e}){const Be=v.useRef(null),tt=v.useRef(null),[ot,te]=v.useState(""),V=v.useRef("");return v.useEffect(()=>{if(!ee)return;let re=!1;const pe=new Zb,Ee=()=>{var Re,et,We;try{(Re=tt.current)==null||Re.stop()}catch{}tt.current=null;try{const At=(et=Be.current)==null?void 0:et.srcObject;try{(We=At==null?void 0:At.getTracks)==null||We.call(At).forEach(vt=>vt.stop())}catch{}}catch{}try{Be.current&&(Be.current.srcObject=null)}catch{}};return(async()=>{te("");try{if(!Be.current)return;try{(await navigator.mediaDevices.getUserMedia({video:{facingMode:{ideal:"environment"}},audio:!1})).getTracks().forEach(We=>We.stop())}catch{}const Re=await pe.decodeFromConstraints({video:{facingMode:{ideal:"environment"},width:{ideal:1280},height:{ideal:720}},audio:!1},Be.current,et=>{if(!re&&et){const We=String(et.getText()||"").trim().replace(/\s+/g,"");if(!We||We===V.current)return;V.current=We,Ee(),_e(We),be()}});tt.current=Re}catch(Re){const et=String((Re==null?void 0:Re.message)||""),We=String((Re==null?void 0:Re.name)||"");et.toLowerCase().includes("permission")||We==="NotAllowedError"?te("Permiso de cmara denegado."):We==="NotFoundError"||et.toLowerCase().includes("notfound")?te("No se encontr cmara en este dispositivo."):et.toLowerCase().includes("secure")||et.toLowerCase().includes("https")?te("La cmara requiere HTTPS (sitio seguro)."):te(et||"No se pudo iniciar el escner.")}})(),()=>{var Re;re=!0;try{(Re=tt.current)==null||Re.stop()}catch{}tt.current=null}},[ee,be,_e]),ee?o.jsx("div",{className:"fixed inset-0 bg-black/70 z-50 p-3 flex items-center justify-center",children:o.jsxs("div",{className:"bg-white w-full max-w-md rounded-2xl shadow-lg border overflow-hidden",children:[o.jsxs("div",{className:"flex items-center justify-between p-3 border-b",children:[o.jsx("div",{className:"font-bold",children:"Escanear cdigo"}),o.jsx("button",{className:"px-3 py-1 rounded bg-gray-200 hover:bg-gray-300",onClick:be,type:"button",children:"Cerrar"})]}),o.jsxs("div",{className:"p-3",children:[o.jsxs("div",{className:"relative w-full aspect-[3/4] bg-black rounded-xl overflow-hidden",children:[o.jsx("video",{ref:Be,className:"w-full h-full object-cover",muted:!0,playsInline:!0,autoPlay:!0}),o.jsx("div",{className:"absolute inset-0 pointer-events-none",children:o.jsx("div",{className:"absolute left-1/2 top-1/2 -translate-x-1/2 -translate-y-1/2 w-[85%] h-40 border-2 border-white/70 rounded-xl"})})]}),ot&&o.jsx("div",{className:"mt-3 text-sm text-red-600 bg-red-50 border border-red-200 rounded p-2",children:ot}),o.jsx("div",{className:"mt-2 text-xs text-gray-600",children:"Apunt al cdigo de barras y mantenelo estable."})]})]})}):null}const Le=v.useMemo(()=>s.find(ee=>ee.id===x),[s,x]),ve=v.useMemo(()=>S&&_?s.filter(ee=>(ee.vendorId??ee.sellerId??"")===_):s,[s,S,_]),le=(Le==null?void 0:Le.balance)||0,Ue=A==="CREDITO"?le+Math.max(0,Number(Ie||0))-Math.max(0,Number(O||0)):0,rt=v.useMemo(()=>{if(A!=="CREDITO")return 0;const ee=Math.max(0,Number(le||0))+Math.max(0,Number(Ie||0));return Math.floor(ee*100)/100},[A,le,Ie]),mt=ee=>{const be=Math.max(0,Number(ee||0));return Math.min(be,rt)},gt=v.useMemo(()=>u.find(ee=>ee.id===_)||null,[u,_]),Ct=(gt==null?void 0:gt.commissionPercent)||0,jt=v.useMemo(()=>{const ee=Number(Ie||0),be=Number(Ct||0),_e=ee*be/100;return Number(_e.toFixed(2))},[Ie,Ct]);v.useEffect(()=>{(async()=>{const ee=nr(ht(ke,"customers_candies"),on("createdAt","desc")),be=await Ot(ee),_e=[];be.forEach(te=>{const V=te.data();_e.push({id:te.id,name:V.name??"",phone:V.phone??"+505 ",place:V.place??"",status:V.status??"ACTIVO",creditLimit:Number(V.creditLimit??0),balance:0,sellerId:V.sellerId??V.vendorId??"",vendorId:V.vendorId??V.sellerId??""})});for(const te of _e)try{const V=nr(ht(ke,"ar_movements"),cr("customerId","==",te.id)),re=await Ot(V);let pe=0;re.forEach(Se=>pe+=Number(Se.data().amount||0));const Ee=Number(te.initialDebt||0);te.balance=pe+Ee}catch{te.balance=0}i(_e);const Be=nr(ht(ke,"products_candies"),on("createdAt","desc")),tt=await Ot(Be),ot=[];tt.forEach(te=>{const V=te.data();ot.push({id:te.id,name:V.name??"(sin nombre)",sku:V.sku??"",unitsPerPackage:Number(V.unitsPerPackage??1),barcode:String(V.barcode||""),priceRivas:Number(V.unitPriceRivas??0),priceSanJorge:Number(V.unitPriceSanJorge??0),priceIsla:Number(V.unitPriceIsla??0)})}),c(ot);try{const te=await Ot(ht(ke,"sellers_candies")),V=[];te.forEach(re=>{const pe=re.data(),Ee=pe.branch||"Rivas",Se=KLe(Ee);V.push({id:re.id,name:pe.name??"(sin nombre)",branch:Se,branchLabel:Ee,commissionPercent:Number(pe.commissionPercent??0)})}),d(V)}catch(te){console.error("Error cargando vendedores:",te)}h({})})()},[]),v.useEffect(()=>{var be,_e;const ee=e&&e.length?e:t;if(ee&&((be=ee.includes)!=null&&be.call(ee,"vendedor_dulces"))&&r){E(r),k(!0);try{localStorage.setItem("pos_vendorId",r),localStorage.setItem("pos_role","VENDEDOR")}catch{}return}if(ee&&((_e=ee.includes)!=null&&_e.call(ee,"admin"))){k(!1);return}try{const Be=localStorage.getItem("pos_vendorId")||"",tt=localStorage.getItem("pos_role")||"";Be&&E(Be),tt.toUpperCase()==="VENDEDOR"&&k(!0)}catch{}},[t,r]);const xe=async ee=>{if(!ee){h({});return}const be=nr(ht(ke,"inventory_candies_sellers"),cr("sellerId","==",ee)),_e=await Ot(be),Be={};_e.forEach(tt=>{const ot=tt.data(),te=ot.productId||"";if(!te)return;const V=Number(ot.remainingUnits??ot.remaining??ot.totalUnits??0);V<=0||(Be[te]=(Be[te]||0)+V)}),h(Be),Y(tt=>{const ot=[];for(const te of tt){const V=Be[te.productId]??0;V>0&&ot.push({...te,availableUnits:V})}return ot})};v.useEffect(()=>{if(!_){h({});return}const ee=u.find(be=>be.id===_);ee&&g(ee.branch),xe(_)},[_,u]),v.useEffect(()=>{Y(ee=>ee.map(be=>{const _e=l.find(tt=>tt.id===be.productId);if(!_e)return be;const Be=p==="RIVAS"?_e.priceRivas:p==="SAN_JORGE"?_e.priceSanJorge:_e.priceIsla;return{...be,pricePerPackage:Number(Be)||0}}))},[p,l]);async function He(ee){const{productId:be,vendorId:_e,branch:Be}=ee;if(!be||!_e)return 0;const tt=nr(ht(ke,"inventory_candies_sellers"),cr("sellerId","==",_e),cr("productId","==",be)),ot=await Ot(tt);if(ot.empty)return 0;const te=ot.docs[0].data(),V=Number(te.unitPriceVendor??0);if(V>0)return V;const re=Number(Be==="RIVAS"?te.unitPriceRivas??0:Be==="SAN_JORGE"?te.unitPriceSanJorge??0:te.unitPriceIsla??0);return Number(re||0)}const Ce=async ee=>{var re;if(!ee)return;if(!_){M("Selecciona primero el vendedor para usar su inventario."),T("");return}if(F.some(pe=>pe.productId===ee)){T("");return}const be=l.find(pe=>pe.id===ee);if(!be){T("");return}const _e=await $H(ee,_),Be=((re=u.find(pe=>pe.id===_))==null?void 0:re.branch)??p,tt=await He({productId:ee,vendorId:_,branch:Be}),te=await(async pe=>{const{productId:Ee,vendorId:Se}=pe;if(!Ee||!Se)return 0;try{const Re=nr(ht(ke,"inventory_candies_sellers"),cr("sellerId","==",Se),cr("productId","==",Ee)),et=await Ot(Re);if(et.empty)return 0;const We=et.docs[0].data();return Number(We.providerPrice??0)}catch{return 0}})({productId:ee,vendorId:_}),V={productId:ee,productName:be.name||"",sku:be.sku||"",unitsPerPackage:be.unitsPerPackage||1,pricePerPackage:Number(tt)||0,availableUnits:Number(_e)||0,qtyPackages:0,discount:0,providerPricePerPackage:Number(te)||0,margenVendedor:0};Y(pe=>[...pe,V]),T("")},lt=(ee,be)=>{Y(_e=>_e.map(Be=>{if(Be.productId!==ee)return Be;if(be==="")return{...Be,qtyPackages:0};const tt=Math.max(0,Math.floor(Number(be))),ot=f[ee]??Be.availableUnits??0,te=Math.max(1,Number(Be.unitsPerPackage||1)),V=Math.floor(ot/te);let re=tt;tt>V&&(re=V,M(` Solo hay ${V} paquetes disponibles.`),setTimeout(()=>M(""),2500));const pe=Number(Be.pricePerPackage||0)*re,Ee=Math.max(0,pe-Number(Be.discount||0)),Se=Number(Be.providerPricePerPackage||0)*re,Re=Ee-Se,et=Math.max(0,Number((Re*.25).toFixed(2)));return{...Be,qtyPackages:re,margenVendedor:et}}))},nt=(ee,be)=>{Y(_e=>_e.map(Be=>{if(Be.productId!==ee)return Be;if(be==="")return{...Be,discount:0};const tt=Math.max(0,Math.floor(Number(be))),ot=Be.qtyPackages||0,te=Number(Be.pricePerPackage||0)*ot,V=Number(Be.providerPricePerPackage||0)*ot,re=te-V-Number(tt||0),pe=Math.max(0,Number((re*.25).toFixed(2)));return{...Be,discount:tt,margenVendedor:pe}}))},Xe=ee=>Y(be=>be.filter(_e=>_e.productId!==ee)),It=async()=>{if(!j)return"Selecciona la fecha.";if(!_)return"Selecciona el vendedor para esta venta.";if(F.length===0)return"Agrega al menos un producto.";const ee=F.filter(be=>(be.qtyPackages||0)>0);if(ee.length===0)return"Debes ingresar cantidades (> 0) en al menos un producto.";if(!(Ie>0))return"El total debe ser mayor a cero.";if(A==="CONTADO"){if(!b.trim())return"Ingresa el nombre del cliente (contado)."}else{if(!x)return"Selecciona un cliente (crdito).";if(O<0)return"El pago inicial no puede ser negativo.";if(O>rt)return"El pago inicial no puede superar el saldo a deber (saldo actual + venta).";if((Le==null?void 0:Le.status)==="BLOQUEADO")return"El cliente est BLOQUEADO. No se puede facturar a crdito."}for(const be of ee){const _e=be.unitsPerPackage||1,Be=(be.qtyPackages||0)*_e,tt=await $H(be.productId,_),ot=Math.floor(tt/_e);if(Be>tt)return`Inventario insuficiente en el pedido del vendedor para "${be.productName}". Disponible: ${ot} paquetes.`;const te=(Number(be.pricePerPackage)||0)*(be.qtyPackages||0),V=Number(be.discount)||0;if(!Number.isInteger(V)||V<0)return`El descuento en "${be.productName}" debe ser entero y  0.`;if(V>te)return`El descuento en "${be.productName}" no puede exceder C$ ${te.toFixed(2)}.`}return null},$t=async ee=>{ee.preventDefault(),M("");const be=await It();if(be){M(" "+be);return}try{W(!0);const _e=F.filter(V=>(V.qtyPackages||0)>0).map(V=>{const re=V.unitsPerPackage||1,pe=V.qtyPackages||0,Ee=pe*re,Se=(Number(V.pricePerPackage)||0)*(pe||0),Re=Math.max(0,Math.floor(Number(V.discount)||0)),et=Math.max(0,Se-Re),We=Number(V.providerPricePerPackage||0),At=We*pe,vt=et-At,Vt=Math.max(0,Number((vt*.25).toFixed(2)));return{productId:V.productId,productName:V.productName,sku:V.sku||"",qty:Ee,packages:pe,unitsPerPackage:re,branch:p,unitPricePackage:Number(V.pricePerPackage)||0,discount:Re,total:Math.floor(et*100)/100,providerPricePerPackage:We,margenVendedor:Vt}}),Be={type:A,branch:p,date:j,createdAt:fr.now(),itemsTotal:Number(Ie)||0,total:Number(Ie)||0,quantity:Number(Pe)||0,packagesTotal:Number(ne)||0,items:_e,vendorId:_},tt=u.find(V=>V.id===_);tt&&(Be.vendorName=tt.name,Be.vendorBranch=tt.branch,Be.vendorBranchLabel=tt.branchLabel,Be.vendorCommissionPercent=tt.commissionPercent||0,Be.vendorCommissionAmount=jt||0),A==="CONTADO"?Be.customerName=b.trim():(Be.customerId=x,Be.downPayment=Number(O)||0);const ot=await xn(ht(ke,"sales_candies"),Be);if(A==="CONTADO"){const V=(b||"").trim();if(V)try{await xn(ht(ke,"cash_customers"),{name:V,date:j,branch:p,vendorId:_,createdAt:fr.now()})}catch(re){console.warn("No se pudo guardar cash_customer:",re)}}if(A==="CREDITO"&&x){const V={customerId:x,date:j,createdAt:fr.now(),ref:{saleId:ot.id}},re=Number((Le==null?void 0:Le.balance)||0);if(await xn(ht(ke,"ar_movements"),{...V,type:"CARGO",amount:Number(Ie)||0}),Number(O)>0&&await xn(ht(ke,"ar_movements"),{...V,type:"ABONO",amount:-Number(O)}),re===0)try{await nn(qt(ke,"customers_candies",x),{initialDebt:Number(Ie)||0,initialDebtDate:j})}catch(pe){console.warn("No se pudo setear initialDebt:",pe)}}const te={};for(const V of _e)if(V.qty>0){const{allocations:re}=await qLe({productId:V.productId,vendorId:_,quantityUnits:V.qty,saleDate:j,saleId:ot.id});te[V.productId]={productId:V.productId,vendorId:_,allocations:re}}await nn(qt(ke,"sales_candies",ot.id),{allocationsByItem:te});try{const V=A==="CONTADO"?b.trim()||"Cliente Mostrador":(Le==null?void 0:Le.name)||"Cliente crdito";GLe({saleId:ot.id,date:j,customerName:V,branch:p,items:_e.map(re=>({productName:re.productName,qty:re.packages,unitPrice:re.unitPricePackage,total:re.total})),total:Number(Ie)||0,vendorName:tt==null?void 0:tt.name,vendorCommissionPercent:(tt==null?void 0:tt.commissionPercent)||0,vendorCommissionAmount:jt})}catch(V){console.error("Error generando voucher PDF:",V)}m("CONTADO"),y(""),w(""),I(KH()),Y([]),H(0),A==="CREDITO"&&x&&i(V=>V.map(re=>re.id===x?{...re,balance:(re.balance||0)+(Number(Ie)||0)-(Number(O)||0)}:re)),M(" Venta de dulces registrada"),_?await xe(_):h({})}catch(_e){console.error(_e),M(" Error al guardar la venta de dulces")}finally{W(!1)}},Ke=v.useMemo(()=>l.filter(ee=>{const be=f[ee.id]||0,_e=Math.max(1,Number(ee.unitsPerPackage||1));return Math.floor(be/_e)>0}).sort((ee,be)=>(ee.name||"").localeCompare(be.name||"")),[l,f]),[wt,q]=v.useState(""),ae=v.useMemo(()=>{const ee=String(wt||"").trim().toLowerCase();return ee?Ke.filter(be=>`${be.name||""} ${be.sku||""}`.toLowerCase().includes(ee)||String(be.id||"").includes(ee)):Ke},[wt,Ke]);return o.jsxs("div",{className:"max-w-6xl mx-auto",children:[o.jsx("div",{className:"flex flex-col sm:flex-row sm:items-center sm:justify-between gap-2 mb-3",children:o.jsx("h2",{className:"text-2xl font-bold",children:"Ventas (Dulces)"})}),o.jsxs("form",{onSubmit:$t,className:"bg-white p-3 sm:p-4 rounded shadow border mb-6",children:[o.jsxs("div",{className:"hidden md:grid grid-cols-1 md:grid-cols-2 gap-4",children:[o.jsxs("div",{children:[o.jsx("label",{className:"block text-sm font-semibold",children:"Tipo de cliente"}),o.jsxs("select",{className:"w-full border p-2 rounded",value:A,onChange:ee=>m(ee.target.value),children:[o.jsx("option",{value:"CONTADO",children:"Contado"}),o.jsx("option",{value:"CREDITO",children:"Crdito"})]})]}),A==="CONTADO"?o.jsxs("div",{children:[o.jsx("label",{className:"block text-sm font-semibold",children:"Nombre del cliente (contado)"}),o.jsx("input",{className:"w-full border p-2 rounded",placeholder:"Ej: Cliente Mostrador",value:b,onChange:ee=>w(ee.target.value)})]}):o.jsxs("div",{className:"md:col-span-2",children:[o.jsx("label",{className:"block text-sm font-semibold",children:"Cliente (crdito)"}),o.jsxs("div",{className:"flex flex-col sm:flex-row gap-2",children:[o.jsxs("select",{className:"w-full sm:flex-1 border p-2 rounded",value:x,onChange:ee=>y(ee.target.value),children:[o.jsx("option",{value:"",children:"Selecciona un cliente"}),ve.map(ee=>o.jsxs("option",{value:ee.status==="ACTIVO"?ee.id:"",disabled:ee.status==="BLOQUEADO",children:[ee.name," | ",ee.phone," | Saldo: ",ec(ee.balance||0)]},ee.id))]}),o.jsx("button",{type:"button",className:"w-full sm:w-auto px-4 py-2 rounded bg-green-600 text-white hover:bg-green-700",onClick:()=>L(!0),children:"Crear Cliente"})]}),o.jsxs("div",{className:"mt-2 grid grid-cols-1 md:grid-cols-3 gap-3",children:[o.jsxs("div",{className:"p-2 rounded bg-gray-50 border",children:[o.jsx("div",{className:"text-xs text-gray-600",children:"Saldo actual"}),o.jsx("div",{className:"text-lg font-semibold",children:ec(le)})]}),o.jsxs("div",{children:[o.jsx("label",{className:"block text-sm font-semibold",children:"Pago inicial (opcional)"}),o.jsx("input",{type:"number",step:"0.01",inputMode:"decimal",max:rt,className:"w-full border p-2 rounded",value:O===0?"":O,onChange:ee=>{const be=mt(ee.target.value);H(be)},placeholder:"0.00"})]}),o.jsxs("div",{className:"p-2 rounded bg-gray-50 border",children:[o.jsx("div",{className:"text-xs text-gray-600",children:"Saldo proyectado"}),o.jsx("div",{className:"text-lg font-semibold",children:ec(Ue)})]})]})]}),o.jsxs("div",{children:[o.jsx("label",{className:"block text-sm font-semibold",children:"Fecha de venta"}),o.jsx("input",{type:"date",className:"w-full border p-2 rounded",value:j,onChange:ee=>I(ee.target.value)})]}),o.jsxs("div",{children:[o.jsx("label",{className:"block text-sm font-semibold",children:"Vendedor"}),o.jsxs("select",{className:"w-full border p-2 rounded",value:_,onChange:ee=>{E(ee.target.value),Y([])},disabled:S,children:[o.jsx("option",{value:"",children:"Selecciona un vendedor"}),u.map(ee=>o.jsxs("option",{value:ee.id,children:[ee.name,"  ",ee.branchLabel,"  ",ee.commissionPercent.toFixed(2),"%"," comisin"]},ee.id))]}),S&&o.jsx("p",{className:"text-xs text-gray-500 mt-1",children:"Vendedor fijado por el usuario logueado."})]}),o.jsxs("div",{className:"md:col-span-1",children:[o.jsx("label",{className:"block text-sm font-semibold mb-1",children:"Lista de precios / Sucursal"}),o.jsxs("div",{className:"flex flex-wrap gap-4 text-sm",children:[o.jsxs("label",{className:"inline-flex items-center gap-1",children:[o.jsx("input",{type:"radio",className:"accent-blue-600",value:"RIVAS",checked:p==="RIVAS",readOnly:!0,disabled:!0}),o.jsx("span",{children:"Rivas"})]}),o.jsxs("label",{className:"inline-flex items-center gap-1",children:[o.jsx("input",{type:"radio",className:"accent-blue-600",value:"SAN_JORGE",checked:p==="SAN_JORGE",readOnly:!0,disabled:!0}),o.jsx("span",{children:"San Jorge"})]}),o.jsxs("label",{className:"inline-flex items-center gap-1",children:[o.jsx("input",{type:"radio",className:"accent-blue-600",value:"ISLA",checked:p==="ISLA",readOnly:!0,disabled:!0}),o.jsx("span",{children:"Isla de Ometepe"})]})]}),o.jsx("div",{className:"text-xs text-gray-500 mt-1",children:"La sucursal se toma automticamente del vendedor seleccionado."})]}),o.jsxs("div",{className:"md:col-span-2",children:[o.jsx("label",{className:"block text-sm font-semibold",children:"Producto"}),o.jsxs("div",{className:"mt-1 mb-2 flex gap-2",children:[o.jsx("input",{className:"flex-1 border rounded px-2 py-2",placeholder:_?"Buscar producto por nombre o SKU":"Selecciona un vendedor primero",value:wt,onChange:ee=>q(ee.target.value),disabled:!_}),o.jsx("button",{type:"button",className:"px-3 py-2 rounded bg-gray-800 text-white",onClick:()=>ce(!0),disabled:!_,children:o.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-5 w-5",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",children:[o.jsx("rect",{x:"3",y:"3",width:"6",height:"6",rx:"1"}),o.jsx("rect",{x:"15",y:"3",width:"6",height:"6",rx:"1"}),o.jsx("rect",{x:"3",y:"15",width:"6",height:"6",rx:"1"}),o.jsx("rect",{x:"15",y:"15",width:"6",height:"6",rx:"1"})]})})]}),o.jsxs("select",{className:"w-full border p-2 rounded",value:P,onChange:async ee=>{const be=ee.target.value;T(be),await Ce(be)},disabled:!_,children:[o.jsx("option",{value:"",children:_?"Selecciona un producto":"Selecciona un vendedor primero"}),ae.map(ee=>{const be=F.some(ot=>ot.productId===ee.id),_e=f[ee.id]||0,Be=Math.max(1,Number(ee.unitsPerPackage||1)),tt=Math.floor(_e/Be);return tt<=0?null:o.jsxs("option",{value:be?"":ee.id,disabled:be,children:[ee.name," ",ee.sku?` ${ee.sku}`:""," (disp: ",tt," ","paq.)",be?" ":""]},ee.id)})]}),o.jsx("div",{className:"text-xs text-gray-500 mt-1",children:"El selector solo muestra productos disponibles del pedido del vendedor seleccionado (sin ceros)."})]}),o.jsxs("div",{className:"md:col-span-2",children:[o.jsx("div",{className:"w-full overflow-x-auto",children:o.jsxs("div",{className:"border rounded overflow-hidden min-w-[860px]",children:[o.jsxs("div",{className:"grid grid-cols-12 bg-gray-50 px-3 py-2 text-xs font-semibold border-b",children:[o.jsx("div",{className:"col-span-4",children:"Producto"}),o.jsx("div",{className:"col-span-2 text-right",children:"Precio (paq.)"}),o.jsx("div",{className:"col-span-2 text-right",children:"Existencias (paq.)"}),o.jsx("div",{className:"col-span-1 text-right",children:"Cantidad (paq.)"}),o.jsx("div",{className:"col-span-1 text-right",children:"Descuento"}),o.jsx("div",{className:"col-span-1 text-right",children:"Monto"}),o.jsx("div",{className:"col-span-1 text-center",children:"Quitar"})]}),F.length===0?o.jsx("div",{className:"px-3 py-4 text-sm text-gray-500",children:"No hay productos agregados."}):F.map(ee=>{const be=f[ee.productId]??ee.availableUnits??0,_e=ee.unitsPerPackage?Math.floor(be/ee.unitsPerPackage):0,Be=Math.max(0,_e-(ee.qtyPackages||0)),tt=(Number(ee.pricePerPackage)||0)*(ee.qtyPackages||0),ot=Math.max(0,tt-(Number(ee.discount)||0));return o.jsxs("div",{className:"grid grid-cols-12 items-center px-3 py-2 border-b text-sm gap-x-2",children:[o.jsx("div",{className:"col-span-4",children:o.jsxs("div",{className:"font-medium",children:[ee.productName,ee.sku?`  ${ee.sku}`:""]})}),o.jsx("div",{className:"col-span-2 text-right",children:ec(ee.pricePerPackage)}),o.jsxs("div",{className:"col-span-2 text-right",children:[Be," paq."]}),o.jsx("div",{className:"col-span-1",children:o.jsx("input",{type:"number",step:"0",min:0,className:"w-full border p-1 rounded text-right",value:Number.isNaN(ee.qtyPackages)||ee.qtyPackages===0?"":ee.qtyPackages,onChange:te=>lt(ee.productId,te.target.value),inputMode:"numeric",placeholder:"0"})}),o.jsx("div",{className:"col-span-1",children:o.jsx("input",{type:"number",step:"1",min:0,className:"w-full border p-1 rounded text-right",value:Number.isNaN(ee.discount)||ee.discount===0?"":ee.discount,onChange:te=>nt(ee.productId,te.target.value),inputMode:"numeric",placeholder:"0"})}),o.jsx("div",{className:"col-span-1 text-right",children:ec(ot)}),o.jsx("div",{className:"col-span-1 text-center",children:o.jsx("button",{type:"button",className:"px-2 py-1 rounded bg-red-100 hover:bg-red-200",onClick:()=>Xe(ee.productId),title:"Quitar producto",children:""})})]},ee.productId)})]})}),F.length>0&&o.jsxs("div",{className:"flex flex-col sm:flex-row sm:justify-end gap-2 sm:gap-6 mt-3 text-sm",children:[o.jsxs("div",{children:[o.jsx("span",{className:"text-gray-600",children:"Paquetes totales: "}),o.jsx("span",{className:"font-semibold",children:ne})]}),o.jsxs("div",{children:[o.jsx("span",{className:"text-gray-600",children:"Total: "}),o.jsx("span",{className:"font-semibold",children:ec(Ie)})]}),o.jsxs("div",{children:[o.jsx("span",{className:"text-gray-600",children:"Comisin vendedor: "}),o.jsxs("span",{className:"font-semibold",children:[ec(jt)," ",Ct?`(${Ct.toFixed(2)}%)`:""]})]})]})]}),o.jsx("div",{className:"md:col-span-2",children:o.jsx("button",{type:"submit",className:"w-full sm:w-auto bg-blue-600 text-white px-4 py-2 rounded hover:bg-blue-700 disabled:opacity-60",disabled:K,children:K?"Guardando...":"Registrar venta"})})]}),o.jsxs("div",{className:"md:hidden space-y-3",children:[o.jsxs("div",{className:"bg-white rounded-xl border shadow",children:[o.jsxs("button",{type:"button",onClick:()=>ue(ee=>!ee),className:"w-full flex justify-between items-center p-3 font-semibold",children:["Datos de venta",o.jsx("span",{className:"text-lg",children:he?"":"+"})]}),he&&o.jsxs("div",{className:"p-3 space-y-3",children:[o.jsxs("div",{children:[o.jsx("label",{className:"block text-sm font-semibold",children:"Fecha de venta"}),o.jsx("input",{type:"date",className:"w-full border p-2 rounded",value:j,onChange:ee=>I(ee.target.value)})]}),o.jsxs("div",{children:[o.jsx("label",{className:"block text-sm font-semibold",children:"Tipo de cliente"}),o.jsxs("select",{className:"w-full border p-2 rounded",value:A,onChange:ee=>m(ee.target.value),children:[o.jsx("option",{value:"CONTADO",children:"Contado"}),o.jsx("option",{value:"CREDITO",children:"Crdito"})]})]}),A==="CONTADO"?o.jsxs("div",{children:[o.jsx("label",{className:"block text-sm font-semibold",children:"Cliente (Cash)"}),o.jsx("input",{className:"w-full border p-2 rounded",placeholder:"Ej: Mario Bergoglio",value:b,onChange:ee=>w(ee.target.value)})]}):o.jsxs("div",{children:[o.jsx("label",{className:"block text-sm font-semibold",children:"Cliente (crdito)"}),o.jsxs("div",{className:"flex flex-col gap-2",children:[o.jsxs("select",{className:"w-full border p-2 rounded",value:x,onChange:ee=>y(ee.target.value),children:[o.jsx("option",{value:"",children:"Selecciona un cliente"}),ve.map(ee=>o.jsxs("option",{value:ee.status==="ACTIVO"?ee.id:"",disabled:ee.status==="BLOQUEADO",children:[ee.name," | Saldo: ",ec(ee.balance||0)]},ee.id))]}),o.jsx("button",{type:"button",className:"w-full px-4 py-2 rounded bg-green-600 text-white hover:bg-green-700",onClick:()=>L(!0),children:"Crear Cliente"})]}),o.jsxs("div",{className:"mt-2 grid grid-cols-2 gap-2",children:[o.jsxs("div",{className:"p-2 rounded bg-gray-50 border",children:[o.jsx("div",{className:"text-xs text-gray-600",children:"Saldo actual"}),o.jsx("div",{className:"text-base font-semibold",children:ec(le)})]}),o.jsxs("div",{className:"p-2 rounded bg-gray-50 border",children:[o.jsx("div",{className:"text-xs text-gray-600",children:"Saldo proyectado"}),o.jsx("div",{className:"text-base font-semibold",children:ec(Ue)})]})]}),o.jsxs("div",{className:"mt-2",children:[o.jsx("label",{className:"block text-sm font-semibold",children:"Pago inicial (opcional)"}),o.jsx("input",{type:"number",step:"0.01",inputMode:"decimal",max:rt,className:"w-full border p-2 rounded",value:O===0?"":O,onChange:ee=>{const be=mt(ee.target.value);H(be)},placeholder:"0.00"})]})]}),o.jsxs("div",{children:[o.jsx("label",{className:"block text-sm font-semibold",children:"Vendedor"}),o.jsxs("select",{className:"w-full border p-2 rounded",value:_,onChange:ee=>{E(ee.target.value),Y([])},disabled:S,children:[o.jsx("option",{value:"",children:"Selecciona un vendedor"}),u.map(ee=>o.jsxs("option",{value:ee.id,children:[ee.name,"  "," ",ee.commissionPercent.toFixed(2),"%"]},ee.id))]}),S&&o.jsx("p",{className:"text-xs text-gray-500 mt-1",children:"Vendedor Logueado en esta app."})]})]})]}),o.jsxs("div",{className:"bg-white rounded-xl border shadow",children:[o.jsxs("button",{type:"button",onClick:()=>me(ee=>!ee),className:"w-full flex justify-between items-center p-3 font-semibold",children:["Agrega Productos",o.jsx("span",{className:"text-lg",children:fe?"":"+"})]}),fe&&o.jsxs("div",{className:"p-3 space-y-3",children:[o.jsxs("div",{children:[o.jsx("label",{className:"block text-sm font-semibold",children:"Productos"}),o.jsxs("div",{className:"mt-1 mb-2 flex gap-2",children:[o.jsx("input",{className:"flex-1 border rounded px-2 py-2",placeholder:_?"Buscar producto por nombre o SKU":"Selecciona un vendedor primero",value:wt,onChange:ee=>q(ee.target.value),disabled:!_}),o.jsx("button",{type:"button",className:"px-3 py-2 rounded bg-gray-800 text-white",onClick:()=>ce(!0),disabled:!_,children:o.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-5 w-5",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",children:[o.jsx("rect",{x:"3",y:"3",width:"6",height:"6",rx:"1"}),o.jsx("rect",{x:"15",y:"3",width:"6",height:"6",rx:"1"}),o.jsx("rect",{x:"3",y:"15",width:"6",height:"6",rx:"1"}),o.jsx("rect",{x:"15",y:"15",width:"6",height:"6",rx:"1"})]})})]}),o.jsxs("select",{className:"w-full border p-2 rounded",value:P,onChange:async ee=>{const be=ee.target.value;T(be),await Ce(be)},disabled:!_,children:[o.jsx("option",{value:"",children:_?"Selecciona un producto":"Selecciona un vendedor primero"}),ae.map(ee=>{const be=F.some(ot=>ot.productId===ee.id),_e=f[ee.id]||0,Be=Math.max(1,Number(ee.unitsPerPackage||1)),tt=Math.floor(_e/Be);return tt<=0?null:o.jsxs("option",{value:be?"":ee.id,disabled:be,children:[ee.name," ",ee.sku?` ${ee.sku}`:""," (disp:"," ",tt," paq.)",be?" ":""]},ee.id)})]})]}),F.length===0?o.jsx("div",{className:"text-sm text-gray-500",children:"No hay productos agregados."}):o.jsx("div",{className:"space-y-2",children:F.map(ee=>{const be=f[ee.productId]??ee.availableUnits??0,_e=ee.unitsPerPackage?Math.floor(be/ee.unitsPerPackage):0,Be=Math.max(0,_e-(ee.qtyPackages||0)),tt=(Number(ee.pricePerPackage)||0)*(ee.qtyPackages||0),ot=Math.max(0,tt-(Number(ee.discount)||0));return o.jsxs("div",{className:"border rounded-xl p-3 bg-gray-50 space-y-2",children:[o.jsxs("div",{className:"font-semibold leading-tight",children:[ee.productName,ee.sku?`  ${ee.sku}`:""]}),o.jsxs("div",{className:"grid grid-cols-2 gap-2 text-sm",children:[o.jsxs("div",{className:"p-2 rounded border bg-white",children:[o.jsx("div",{className:"text-xs text-gray-600",children:"Precio x Paquete"}),o.jsx("div",{className:"font-bold",children:ec(ee.pricePerPackage)})]}),o.jsxs("div",{className:"p-2 rounded border bg-white",children:[o.jsx("div",{className:"text-xs text-gray-600",children:"Existencias"}),o.jsxs("div",{className:"font-bold",children:[Be," paq."]})]})]}),o.jsxs("div",{className:"grid grid-cols-2 gap-2",children:[o.jsxs("div",{children:[o.jsx("label",{className:"block text-xs text-gray-600",children:"Cantidad Paquetes"}),o.jsx("input",{type:"number",step:"0",min:0,className:"w-full border p-2 rounded text-right",value:Number.isNaN(ee.qtyPackages)||ee.qtyPackages===0?"":ee.qtyPackages,onChange:te=>lt(ee.productId,te.target.value),inputMode:"numeric",placeholder:"0"})]}),o.jsxs("div",{children:[o.jsx("label",{className:"block text-xs text-gray-600",children:"Descuento"}),o.jsx("input",{type:"number",step:"1",min:0,className:"w-full border p-2 rounded text-right",value:Number.isNaN(ee.discount)||ee.discount===0?"":ee.discount,onChange:te=>nt(ee.productId,te.target.value),inputMode:"numeric",placeholder:"0"})]})]}),o.jsxs("div",{className:"flex items-center justify-between",children:[o.jsxs("div",{className:"font-regular text-gray-600",children:["Total ",ec(ot)]}),o.jsxs("div",{className:"font-regular text-gray-600",children:["Comision ",ec(ee.margenVendedor||0)]}),o.jsx("button",{type:"button",className:"px-3 py-2 rounded-lg bg-red-100 hover:bg-red-200",onClick:()=>Xe(ee.productId),children:"Quitar"})]})]},ee.productId)})}),F.length>0&&o.jsxs("div",{className:"mt-2 grid grid-cols-2 gap-2 text-sm",children:[o.jsxs("div",{className:"p-2 rounded bg-gray-50 border",children:[o.jsx("div",{className:"text-xs text-gray-600",children:"Paquetes"}),o.jsx("div",{className:"font-semibold",children:ne})]}),o.jsxs("div",{className:"p-2 rounded bg-gray-50 border",children:[o.jsx("div",{className:"text-xs text-gray-600",children:"Total"}),o.jsx("div",{className:"font-semibold",children:ec(Ie)})]})]})]})]}),o.jsx("button",{type:"submit",className:"w-full bg-blue-600 text-white px-4 py-3 rounded-xl hover:bg-blue-700 disabled:opacity-60",disabled:K,children:K?"Guardando...":"Registrar venta"})]})]}),R&&o.jsx("p",{className:"mt-2 text-sm",children:R}),D&&o.jsx("div",{className:"fixed inset-0 bg-black/40 flex items-center justify-center z-50 p-2 sm:p-4",children:o.jsxs("div",{className:"bg-white rounded-lg shadow-xl border w-[98%] sm:w-[95%] max-w-xl p-3 sm:p-4 max-h-[92vh] overflow-auto",children:[o.jsx("h3",{className:"text-lg font-bold mb-3",children:"Nuevo cliente"}),o.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-3",children:[o.jsxs("div",{children:[o.jsx("label",{className:"block text-sm font-semibold",children:"Nombre"}),o.jsx("input",{className:"w-full border p-2 rounded",value:Z,onChange:ee=>ge(ee.target.value)})]}),o.jsxs("div",{children:[o.jsx("label",{className:"block text-sm font-semibold",children:"Telfono"}),o.jsx("input",{className:"w-full border p-2 rounded",value:U,onChange:ee=>Ge(GH(ee.target.value)),placeholder:"+505 88888888",inputMode:"numeric"})]}),o.jsxs("div",{children:[o.jsx("label",{className:"block text-sm font-semibold",children:"Lugar"}),o.jsxs("select",{className:"w-full border p-2 rounded",value:ie,onChange:ee=>J(ee.target.value),children:[o.jsx("option",{value:"",children:""}),HLe.map(ee=>o.jsx("option",{value:ee,children:ee},ee))]})]}),!S&&o.jsxs("div",{children:[o.jsx("label",{className:"block text-sm font-semibold",children:"Vendedor"}),o.jsxs("select",{className:"w-full border p-2 rounded",value:ut,onChange:ee=>De(ee.target.value),children:[o.jsx("option",{value:"",children:"Selecciona un vendedor"}),u.filter(ee=>(ee.status??"ACTIVO")==="ACTIVO").map(ee=>o.jsxs("option",{value:ee.id,children:[ee.name,"  ",ee.branchLabel]},ee.id))]})]}),o.jsxs("div",{className:"md:col-span-2",children:[o.jsx("label",{className:"block text-sm font-semibold",children:"Comentario"}),o.jsx("textarea",{className:"w-full border p-2 rounded resize-y min-h-20",value:je,onChange:ee=>z(ee.target.value),maxLength:500})]})]}),o.jsxs("div",{className:"mt-4 flex flex-col sm:flex-row justify-end gap-2",children:[o.jsx("button",{className:"w-full sm:w-auto px-3 py-2 rounded bg-gray-200 hover:bg-gray-300",onClick:()=>{it(),L(!1)},children:"Cancelar"}),o.jsx("button",{className:"w-full sm:w-auto px-3 py-2 rounded bg-green-600 text-white hover:bg-green-700",onClick:async()=>{var _e;const ee=S?_||r:ut;if(!ee){M("Selecciona el vendedor para asociar este cliente.");return}if(M(""),!Z.trim()){M("Ingresa el nombre del nuevo cliente.");return}const be=GH(U);try{const Be=await xn(ht(ke,"customers_candies"),{name:Z.trim(),phone:be,place:ie||"",notes:je||"",status:Ae,creditLimit:Number(Qe||0),createdAt:fr.now(),sellerId:ee,vendorId:ee,vendorName:((_e=u.find(ot=>ot.id===ee))==null?void 0:_e.name)||""}),tt={id:Be.id,name:Z.trim(),phone:be,place:ie||"",status:Ae,creditLimit:Number(Qe||0),balance:0,sellerId:ee};i(ot=>[tt,...ot]),y(Be.id),it(),L(!1),M(" Cliente creado")}catch(Be){console.error(Be),M(" Error al crear cliente")}},children:"Guardar cliente"})]})]})}),o.jsx(Me,{open:dt,onClose:()=>ce(!1),onDetected:oe}),K&&o.jsx("div",{className:"fixed inset-0 z-[70] bg-black/40 flex items-center justify-center p-2",children:o.jsxs("div",{className:"bg-white rounded-lg shadow-xl border px-4 py-3 flex items-center gap-3",children:[o.jsxs("svg",{className:"h-5 w-5 animate-spin",viewBox:"0 0 24 24",fill:"none",children:[o.jsx("circle",{className:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor",strokeWidth:"4"}),o.jsx("path",{className:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8v4a4 4 0 00-4 4H4z"})]}),o.jsx("span",{className:"font-medium",children:"Guardando venta"})]})})]})}const qH=["Energia","Bolsas","Detergentes","Limpieza de Freezer","Delivery","Pago a Personal"],kC=t=>`C$ ${(Number(t)||0).toFixed(2)}`;function WLe(){const[t,e]=v.useState(Sr(Qd(new Date),"yyyy-MM-dd")),[r,n]=v.useState(Sr(Ud(new Date),"yyyy-MM-dd")),[a,s]=v.useState(Sr(new Date,"yyyy-MM-dd")),[i,l]=v.useState(""),[c,u]=v.useState(""),[d,f]=v.useState(0),[h,A]=v.useState("PENDIENTE"),[m,p]=v.useState(""),[g,x]=v.useState([]),[y,b]=v.useState(!0),[w,j]=v.useState(""),[I,_]=v.useState(null),[E,S]=v.useState(""),[k,P]=v.useState(""),[T,F]=v.useState(""),[Y,he]=v.useState(0),[ue,fe]=v.useState("PENDIENTE"),[me,ne]=v.useState("");v.useEffect(()=>{(async()=>{b(!0);try{const D=nr(ht(ke,"expenses_candies"),on("date","desc")),L=await Ot(D),Z=[];L.forEach(ge=>{const U=ge.data();Z.push({id:ge.id,date:U.date||Sr(new Date,"yyyy-MM-dd"),category:U.category||"",description:U.description||"",amount:Number(U.amount||0),status:U.status||"PENDIENTE",notes:U.notes||"",createdAt:U.createdAt??fr.now()})}),x(Z)}catch(D){console.error(D),j(" Error al cargar gastos")}finally{b(!1)}})()},[]);const Pe=v.useMemo(()=>g.filter(D=>!(t&&D.date<t||r&&D.date>r)),[g,t,r]),Ie=v.useMemo(()=>{const D=Pe.reduce((ge,U)=>ge+(U.amount||0),0),L=Pe.filter(ge=>ge.status==="PAGADO").reduce((ge,U)=>ge+(U.amount||0),0),Z=D-L;return{total:D,pagado:L,pendiente:Z}},[Pe]),O=()=>{s(Sr(new Date,"yyyy-MM-dd")),l(""),u(""),f(0),A("PENDIENTE"),p("")},H=async D=>{if(D.preventDefault(),j(""),!i){j("Selecciona una categora.");return}if(!c.trim()){j("Ingresa una descripcin.");return}if(!d||d<=0){j("Ingresa un monto vlido.");return}try{const L=await xn(ht(ke,"expenses_candies"),{date:a,category:i,description:c.trim(),amount:Number(d.toFixed(2)),status:h,notes:m||"",createdAt:fr.now()});x(Z=>[{id:L.id,date:a,category:i,description:c.trim(),amount:Number(d.toFixed(2)),status:h,notes:m||"",createdAt:fr.now()},...Z]),O(),j(" Gasto registrado")}catch(L){console.error(L),j(" Error al guardar gasto")}},R=D=>{_(D.id),S(D.date),P(D.category||""),F(D.description||""),he(Number(D.amount||0)),fe(D.status||"PENDIENTE"),ne(D.notes||"")},M=()=>{_(null),S(""),P(""),F(""),he(0),fe("PENDIENTE"),ne("")},K=async()=>{if(I){if(!k){j("Selecciona una categora.");return}if(!T.trim()){j("Ingresa una descripcin.");return}if(!Y||Y<=0){j("Ingresa un monto vlido.");return}try{await nn(qt(ke,"expenses_candies",I),{date:E,category:k,description:T.trim(),amount:Number(Y.toFixed(2)),status:ue,notes:me||""}),x(D=>D.map(L=>L.id===I?{...L,date:E,category:k,description:T.trim(),amount:Number(Y.toFixed(2)),status:ue,notes:me||""}:L)),M(),j(" Gasto actualizado")}catch(D){console.error(D),j(" Error al actualizar gasto")}}},W=async D=>{confirm(`Eliminar el gasto "${D.description}"?`)&&(await Cn(qt(ke,"expenses_candies",D.id)),x(Z=>Z.filter(ge=>ge.id!==D.id)),j(" Gasto borrado"))};return o.jsxs("div",{className:"max-w-6xl mx-auto",children:[o.jsx("h2",{className:"text-2xl font-bold mb-3",children:"Gastos (Dulces)"}),o.jsxs("div",{className:"bg-white p-3 rounded shadow border mb-4 flex flex-wrap items-end gap-3 text-sm",children:[o.jsxs("div",{className:"flex flex-col",children:[o.jsx("label",{className:"font-semibold",children:"Desde"}),o.jsx("input",{type:"date",className:"border rounded px-2 py-1",value:t,onChange:D=>e(D.target.value)})]}),o.jsxs("div",{className:"flex flex-col",children:[o.jsx("label",{className:"font-semibold",children:"Hasta"}),o.jsx("input",{type:"date",className:"border rounded px-2 py-1",value:r,onChange:D=>n(D.target.value)})]}),o.jsxs("div",{className:"ml-auto text-sm",children:[o.jsx("div",{className:"font-semibold",children:"Totales del rango"}),o.jsxs("div",{children:["Total: ",kC(Ie.total)]}),o.jsxs("div",{children:["Pagado: ",kC(Ie.pagado)]}),o.jsxs("div",{children:["Pendiente: ",kC(Ie.pendiente)]})]})]}),o.jsxs("form",{onSubmit:H,className:"bg-white p-4 rounded shadow border mb-6 grid grid-cols-1 md:grid-cols-2 gap-4",children:[o.jsxs("div",{children:[o.jsx("label",{className:"block text-sm font-semibold",children:"Fecha"}),o.jsx("input",{type:"date",className:"w-full border p-2 rounded",value:a,onChange:D=>s(D.target.value)})]}),o.jsxs("div",{children:[o.jsx("label",{className:"block text-sm font-semibold",children:"Categora"}),o.jsxs("select",{className:"w-full border p-2 rounded",value:i,onChange:D=>l(D.target.value),children:[o.jsx("option",{value:"",children:"Selecciona"}),qH.map(D=>o.jsx("option",{value:D,children:D},D))]})]}),o.jsxs("div",{className:"md:col-span-2",children:[o.jsx("label",{className:"block text-sm font-semibold",children:"Descripcin"}),o.jsx("input",{className:"w-full border p-2 rounded",placeholder:"Detalle del gasto",value:c,onChange:D=>u(D.target.value)})]}),o.jsxs("div",{children:[o.jsx("label",{className:"block text-sm font-semibold",children:"Monto"}),o.jsx("input",{type:"number",step:"0.01",inputMode:"decimal",className:"w-full border p-2 rounded text-right",value:d===0?"":d,onChange:D=>f(Math.max(0,Number(D.target.value||0))),placeholder:"0.00"})]}),o.jsxs("div",{children:[o.jsx("label",{className:"block text-sm font-semibold",children:"Estado"}),o.jsxs("select",{className:"w-full border p-2 rounded",value:h,onChange:D=>A(D.target.value),children:[o.jsx("option",{value:"PENDIENTE",children:"Pendiente"}),o.jsx("option",{value:"PAGADO",children:"Pagado"})]})]}),o.jsxs("div",{className:"md:col-span-2",children:[o.jsx("label",{className:"block text-sm font-semibold",children:"Comentario"}),o.jsx("textarea",{className:"w-full border p-2 rounded resize-y min-h-24",value:m,onChange:D=>p(D.target.value),maxLength:500,placeholder:"Comentario / nota opcional"}),o.jsxs("div",{className:"text-xs text-gray-500 text-right",children:[m.length,"/500"]})]}),o.jsx("div",{className:"md:col-span-2",children:o.jsx("button",{className:"bg-blue-600 text-white px-4 py-2 rounded hover:bg-blue-700",children:"Guardar gasto"})})]}),o.jsx("div",{className:"bg-white p-2 rounded shadow border w-full",children:o.jsxs("table",{className:"min-w-full w-full text-sm",children:[o.jsx("thead",{className:"bg-gray-100",children:o.jsxs("tr",{children:[o.jsx("th",{className:"p-2 border",children:"Fecha"}),o.jsx("th",{className:"p-2 border",children:"Categora"}),o.jsx("th",{className:"p-2 border",children:"Descripcin"}),o.jsx("th",{className:"p-2 border",children:"Monto"}),o.jsx("th",{className:"p-2 border",children:"Estado"}),o.jsx("th",{className:"p-2 border",children:"Comentario"}),o.jsx("th",{className:"p-2 border",children:"Acciones"})]})}),o.jsx("tbody",{children:y?o.jsx("tr",{children:o.jsx("td",{className:"p-4 text-center",colSpan:7,children:"Cargando"})}):Pe.length===0?o.jsx("tr",{children:o.jsx("td",{className:"p-4 text-center",colSpan:7,children:"Sin gastos en el rango seleccionado."})}):Pe.slice().sort((D,L)=>D.date.localeCompare(L.date)).map(D=>{const L=I===D.id;return o.jsxs("tr",{className:"text-center",children:[o.jsx("td",{className:"p-2 border",children:L?o.jsx("input",{type:"date",className:"w-full border p-1 rounded",value:E,onChange:Z=>S(Z.target.value)}):D.date}),o.jsx("td",{className:"p-2 border",children:L?o.jsxs("select",{className:"w-full border p-1 rounded",value:k,onChange:Z=>P(Z.target.value),children:[o.jsx("option",{value:"",children:"Selecciona"}),qH.map(Z=>o.jsx("option",{value:Z,children:Z},Z))]}):D.category||""}),o.jsx("td",{className:"p-2 border",children:L?o.jsx("input",{className:"w-full border p-1 rounded",value:T,onChange:Z=>F(Z.target.value)}):o.jsx("span",{title:D.description,children:D.description.length>40?D.description.slice(0,40)+"":D.description})}),o.jsx("td",{className:"p-2 border",children:L?o.jsx("input",{type:"number",step:"0.01",inputMode:"decimal",className:"w-full border p-1 rounded text-right",value:Number.isNaN(Y)?"":Y,onChange:Z=>he(Math.max(0,Number(Z.target.value||0)))}):kC(D.amount)}),o.jsx("td",{className:"p-2 border",children:L?o.jsxs("select",{className:"w-full border p-1 rounded",value:ue,onChange:Z=>fe(Z.target.value),children:[o.jsx("option",{value:"PENDIENTE",children:"Pendiente"}),o.jsx("option",{value:"PAGADO",children:"Pagado"})]}):o.jsx("span",{className:`px-2 py-0.5 rounded text-xs ${D.status==="PAGADO"?"bg-green-100 text-green-700":"bg-yellow-100 text-yellow-700"}`,children:D.status})}),o.jsx("td",{className:"p-2 border",children:L?o.jsx("textarea",{className:"w-full border p-1 rounded resize-y min-h-10",value:me,onChange:Z=>ne(Z.target.value),maxLength:500}):o.jsx("span",{title:D.notes||"",children:(D.notes||"").length>40?(D.notes||"").slice(0,40)+"":D.notes||""})}),o.jsx("td",{className:"p-2 border",children:o.jsx("div",{className:"flex gap-2 justify-center",children:L?o.jsxs(o.Fragment,{children:[o.jsx("button",{className:"px-2 py-1 rounded text-white bg-blue-600 hover:bg-blue-700",onClick:K,children:"Guardar"}),o.jsx("button",{className:"px-2 py-1 rounded bg-gray-200 hover:bg-gray-300",onClick:M,children:"Cancelar"})]}):o.jsxs(o.Fragment,{children:[o.jsx("button",{className:"px-2 py-1 rounded text-white bg-yellow-600 hover:bg-yellow-700",onClick:()=>R(D),children:"Editar"}),o.jsx("button",{className:"px-2 py-1 rounded text-white bg-red-600 hover:bg-red-700",onClick:()=>W(D),children:"Borrar"})]})})})]},D.id)})})]})}),w&&o.jsx("p",{className:"mt-2 text-sm",children:w})]})}const tc=t=>`C$ ${(Number(t)||0).toFixed(2)}`;function XLe(t){var e;return t!=null&&t.date?t.date:(e=t==null?void 0:t.createdAt)!=null&&e.toDate?Sr(t.createdAt.toDate(),"yyyy-MM-dd"):""}function YLe(t,e){var s,i,l;const r=XLe(t);if(!r)return null;let n=0,a=0;return Array.isArray(t.items)&&t.items.length>0?(n=t.items.reduce((c,u)=>c+(Number(u.packages??u.qty??u.quantity??0)||0),0),a=Number(t.total??t.itemsTotal??0)||0):(n=Number(t.packagesTotal??t.quantity??((s=t.item)==null?void 0:s.packages)??((i=t.item)==null?void 0:i.qty)??0)||0,a=Number(t.total??((l=t.item)==null?void 0:l.total)??0)||0),{id:e,date:r,type:t.type||"CONTADO",total:a,quantity:n,customerId:t.customerId||void 0,customerName:t.customerName||void 0,downPayment:Number(t.downPayment||0),vendorId:t.vendorId||void 0,vendorName:t.vendorName||t.vendor||void 0,vendorCommissionPercent:Number(t.vendorCommissionPercent||0)||0,vendorCommissionAmount:Number(t.vendorCommissionAmount||0)||0}}async function JLe(t){const e=nr(ht(ke,"ar_movements"),cr("ref.saleId","==",t)),r=await Ot(e);await Promise.all(r.docs.map(n=>Cn(qt(ke,"ar_movements",n.id))))}function ZLe({role:t="",sellerCandyId:e="",roles:r}){const n=r&&r.length?r:t,a=Yr(n,"vendedor_dulces"),s=Yr(n,"admin"),i=s?8:7,[l,c]=v.useState(!1),[u,d]=v.useState(!1),[f,h]=v.useState(null),[A,m]=v.useState([]),p=async Ae=>{c(!0),d(!0),h(Ae),m([]);try{const ye=await ui(qt(ke,"sales_candies",Ae)),Qe=ye.exists()?ye.data():null;if(!Qe){m([]);return}const ut=(Array.isArray(Qe==null?void 0:Qe.items)?Qe.items:Qe!=null&&Qe.item?[Qe.item]:[]).map(De=>({productName:String(De.productName||""),qty:Number(De.packages??De.qty??De.quantity??0),unitPrice:Number(De.unitPricePackage??De.unitPrice??0),discount:Number(De.discount||0),total:Number(De.total??De.lineFinal??0)}));m(ut)}catch(ye){console.error(ye)}finally{d(!1)}},[g,x]=v.useState(Sr(new Date,"yyyy-MM-01")),[y,b]=v.useState(Sr(new Date,"yyyy-MM-dd")),[w,j]=v.useState([]),[I,_]=v.useState([]),[E,S]=v.useState([]),[k,P]=v.useState(!0),[T,F]=v.useState(""),[Y,he]=v.useState(""),[ue,fe]=v.useState(""),[me,ne]=v.useState(null),Pe=15,[Ie,O]=v.useState(1),H=v.useMemo(()=>{const Ae={};return w.forEach(ye=>Ae[ye.id]=ye.name),Ae},[w]),R=v.useMemo(()=>{const Ae={};return E.forEach(ye=>{Ae[ye.id]=ye}),Ae},[E]),M=Ae=>{const ye=Number(Ae.vendorCommissionAmount||0);if(ye>0)return ye;if(!Ae.vendorId)return 0;const Qe=R[Ae.vendorId];if(!Qe||!Qe.commissionPercent)return 0;const st=(Number(Ae.total)||0)*(Number(Qe.commissionPercent)||0)/100;return Number(st.toFixed(2))};v.useEffect(()=>{(async()=>{P(!0),F("");try{const Ae=await Ot(ht(ke,"customers_candies")),ye=[];Ae.forEach(it=>ye.push({id:it.id,name:it.data().name||""})),j(ye);const Qe=await Ot(ht(ke,"sellers_candies")),st=[];Qe.forEach(it=>{const dt=it.data();st.push({id:it.id,name:dt.name||"",commissionPercent:Number(dt.commissionPercent||0)})}),S(st);const ut=await Ot(nr(ht(ke,"sales_candies"),on("createdAt","desc"))),De=[];ut.forEach(it=>{const dt=YLe(it.data(),it.id);dt&&dt.date>=g&&dt.date<=y&&De.push(dt)}),_(De.sort((it,dt)=>dt.date.localeCompare(it.date))),O(1)}catch(Ae){console.error(Ae),F(" Error cargando transacciones.")}finally{P(!1)}})()},[g,y]);const K=v.useMemo(()=>I.filter(Ae=>!(a&&(!e||!Ae.vendorId||Ae.vendorId!==e)||Y&&Ae.customerId!==Y||ue&&Ae.type!==ue)),[I,Y,ue,a,e]),W=v.useMemo(()=>{let Ae=0,ye=0,Qe=0,st=0;for(const ut of K)ut.type==="CONTADO"?(Ae+=ut.quantity,Qe+=ut.total):(ye+=ut.quantity,st+=ut.total);return{packsCash:Ae,packsCredito:ye,montoCash:Qe,montoCredito:st}},[K]),D=Math.max(1,Math.ceil(K.length/Pe)),L=v.useMemo(()=>{const Ae=(Ie-1)*Pe;return K.slice(Ae,Ae+Pe)},[K,Ie]),Z=v.useMemo(()=>f&&I.find(Ae=>Ae.id===f)||null,[f,I]),ge=async Ae=>{if(s&&(ne(null),!!window.confirm("Eliminar esta venta de dulces? Se restaurar el inventario asociado.")))try{P(!0),await m2(Ae.id),await JLe(Ae.id),_(ye=>ye.filter(Qe=>Qe.id!==Ae.id)),F(" Venta eliminada")}catch(ye){console.error(ye),F(" No se pudo eliminar la venta.")}finally{P(!1)}},U=()=>{const Ae=`Ventas del dia  ${g} a ${y}`,ye=De=>(De||"").replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;"),Qe=K.map(De=>{const it=De.customerName||(De.customerId?H[De.customerId]:"")||"Nombre cliente";return`<tr>
          <td>${De.date}</td>
          <td>${ye(it)}</td>
          <td>${De.type==="CREDITO"?"Crdito":"Cash"}</td>
          <td style="text-align:right">${De.quantity}</td>
          <td style="text-align:right">${tc(De.total)}</td>
        </tr>`}).join(""),st=`<!doctype html><html><head><meta charset="utf-8" />
    <title>${ye(Ae)}</title>
    <style>
      *{font-family:Arial, sans-serif} h1{margin:0 0 8px}
      .muted{color:#555;font-size:12px;margin-bottom:12px}
      .kpis{display:grid;grid-template-columns:repeat(2,max-content);gap:8px 28px;margin:10px 0 14px}
      table{width:100%;border-collapse:collapse;font-size:12px}
      th,td{border:1px solid #ddd;padding:6px}
      th{background:#f5f5f5;text-align:left}
      @media print{@page{size:A4;margin:12mm}}
    </style></head><body>
      <h1>${ye(Ae)}</h1>
      <div class="kpis">
        <div><b>Paquetes Cash:</b> ${W.packsCash}</div>
        <div><b>Paquetes Crdito:</b> ${W.packsCredito}</div>
        <div><b>Monto Cash:</b> ${tc(W.montoCash)}</div>
        <div><b>Monto Crdito:</b> ${tc(W.montoCredito)}</div>
      </div>
      <table><thead><tr>
        <th>Fecha</th><th>Cliente</th><th>Tipo</th><th>Paquetes</th><th>Monto</th>
      </tr></thead><tbody>
      ${Qe||'<tr><td colspan="5" style="text-align:center">Sin transacciones</td></tr>'}
      </tbody></table>
      <script>window.print()<\/script>
    </body></html>`,ut=window.open("","_blank");ut&&(ut.document.open(),ut.document.write(st),ut.document.close())},Ge=()=>O(1),ie=()=>O(Ae=>Math.max(1,Ae-1)),J=()=>O(Ae=>Math.min(D,Ae+1)),je=()=>O(D),z=()=>{const Ae=[];if(D<=7)for(let Qe=1;Qe<=D;Qe++)Ae.push(Qe);else{const Qe=Math.max(1,Ie-2),st=Math.min(D,Ie+2);Ae.push(1),Qe>2&&Ae.push(-1);for(let ut=Qe;ut<=st;ut++)ut!==1&&ut!==D&&Ae.push(ut);st<D-1&&Ae.push(-2),Ae.push(D)}return o.jsxs("div",{className:"flex flex-col sm:flex-row sm:items-center gap-2 justify-between mt-3",children:[o.jsxs("div",{className:"flex items-center gap-1 flex-wrap",children:[o.jsx("button",{className:"px-2 py-1 border rounded disabled:opacity-50",onClick:Ge,disabled:Ie===1,children:" Primero"}),o.jsx("button",{className:"px-2 py-1 border rounded disabled:opacity-50",onClick:ie,disabled:Ie===1,children:" Anterior"}),Ae.map((Qe,st)=>typeof Qe=="number"?o.jsx("button",{className:`px-3 py-1 border rounded ${Qe===Ie?"bg-blue-600 text-white":""}`,onClick:()=>O(Qe),children:Qe},st):o.jsx("span",{className:"px-2",children:""},st)),o.jsx("button",{className:"px-2 py-1 border rounded disabled:opacity-50",onClick:J,disabled:Ie===D,children:"Siguiente "}),o.jsx("button",{className:"px-2 py-1 border rounded disabled:opacity-50",onClick:je,disabled:Ie===D,children:"ltimo "})]}),o.jsxs("div",{className:"text-sm text-gray-600",children:["Pgina ",Ie," de ",D,"  ",K.length," transaccin(es)"]})]})};return o.jsxs("div",{className:"max-w-6xl mx-auto",children:[o.jsx("h2",{className:"text-2xl font-bold mb-3",children:"Ventas del dia"}),o.jsxs("div",{className:"bg-white p-3 rounded shadow border mb-4 grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-5 gap-3 items-end text-sm",children:[o.jsxs("div",{children:[o.jsx("label",{className:"block font-semibold",children:"Desde"}),o.jsx("input",{type:"date",className:"border rounded px-2 py-1 w-full",value:g,onChange:Ae=>{x(Ae.target.value),O(1)}})]}),o.jsxs("div",{children:[o.jsx("label",{className:"block font-semibold",children:"Hasta"}),o.jsx("input",{type:"date",className:"border rounded px-2 py-1 w-full",value:y,onChange:Ae=>{b(Ae.target.value),O(1)}})]}),o.jsxs("div",{className:"sm:col-span-2 lg:col-span-2",children:[o.jsx("label",{className:"block font-semibold",children:"Cliente (crdito)"}),o.jsxs("select",{className:"border rounded px-2 py-1 w-full",value:Y,onChange:Ae=>{he(Ae.target.value),O(1)},children:[o.jsx("option",{value:"",children:"Todos"}),w.map(Ae=>o.jsx("option",{value:Ae.id,children:Ae.name},Ae.id))]})]}),o.jsxs("div",{children:[o.jsx("label",{className:"block font-semibold",children:"Tipo"}),o.jsxs("select",{className:"border rounded px-2 py-1 w-full",value:ue,onChange:Ae=>{fe(Ae.target.value),O(1)},children:[o.jsx("option",{value:"",children:"Todos"}),o.jsx("option",{value:"CONTADO",children:"Cash"}),o.jsx("option",{value:"CREDITO",children:"Crdito"})]})]}),o.jsx("button",{className:"sm:col-span-2 lg:col-span-1 px-3 py-2 rounded bg-blue-600 text-white hover:bg-blue-700 w-full",onClick:U,children:"Exportar PDF"})]}),o.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-4 gap-3 mb-4",children:[o.jsxs("div",{className:"p-3 border rounded bg-gray-50",children:[o.jsx("div",{className:"text-xs text-gray-600",children:"Paquetes Cash"}),o.jsx("div",{className:"text-xl font-semibold",children:W.packsCash})]}),o.jsxs("div",{className:"p-3 border rounded bg-gray-50",children:[o.jsx("div",{className:"text-xs text-gray-600",children:"Paquetes Crdito"}),o.jsx("div",{className:"text-xl font-semibold",children:W.packsCredito})]}),o.jsxs("div",{className:"p-3 border rounded bg-gray-50",children:[o.jsx("div",{className:"text-xs text-gray-600",children:"Monto Cash"}),o.jsx("div",{className:"text-xl font-semibold",children:tc(W.montoCash)})]}),o.jsxs("div",{className:"p-3 border rounded bg-gray-50",children:[o.jsx("div",{className:"text-xs text-gray-600",children:"Monto Crdito"}),o.jsx("div",{className:"text-xl font-semibold",children:tc(W.montoCredito)})]})]}),o.jsxs("div",{className:"block md:hidden space-y-3",children:[k?o.jsx("div",{className:"bg-white border rounded-lg p-4 shadow",children:"Cargando"}):L.length===0?o.jsx("div",{className:"bg-white border rounded-lg p-4 shadow",children:"Sin transacciones en el rango."}):L.map(Ae=>{const ye=Ae.customerName||(Ae.customerId?H[Ae.customerId]:"")||"Nombre cliente",Qe=M(Ae);return o.jsx("div",{className:"bg-white border rounded-xl shadow",children:o.jsxs("details",{className:"group",children:[o.jsxs("summary",{className:"list-none cursor-pointer p-3 flex items-start gap-3",children:[o.jsxs("div",{className:"flex-1 min-w-0",children:[o.jsxs("div",{className:"flex items-center justify-between gap-2",children:[o.jsx("div",{className:"font-semibold truncate",children:ye}),o.jsx("div",{className:"text-xs text-gray-600 shrink-0",children:Ae.date})]}),o.jsxs("div",{className:"mt-1 flex items-center gap-2 flex-wrap text-xs",children:[o.jsx("span",{className:`px-2 py-1 rounded-full border ${Ae.type==="CREDITO"?"bg-yellow-50 border-yellow-200 text-yellow-700":"bg-green-50 border-green-200 text-green-700"}`,children:Ae.type==="CREDITO"?"Crdito":"Cash"}),o.jsxs("span",{className:"text-gray-700",children:[o.jsx("b",{children:"Paquetes:"})," ",o.jsx("button",{type:"button",className:"underline text-blue-600",onClick:st=>{st.preventDefault(),p(Ae.id)},title:"Ver detalle",children:Ae.quantity})]}),o.jsxs("span",{className:"text-gray-700",children:[o.jsx("b",{children:"Monto:"})," ",tc(Ae.total)]})]})]}),o.jsx("div",{className:"text-gray-500 mt-1",children:o.jsx("span",{className:"inline-block transition-transform group-open:rotate-180",children:""})})]}),o.jsx("div",{className:"px-3 pb-3 pt-0 text-sm",children:o.jsxs("div",{className:"grid grid-cols-1 gap-2 border-t pt-3",children:[o.jsxs("div",{className:"flex items-center justify-between",children:[o.jsx("span",{className:"text-gray-600",children:"Cliente"}),o.jsx("span",{className:"font-medium text-right",children:ye})]}),o.jsxs("div",{className:"flex items-center justify-between",children:[o.jsx("span",{className:"text-gray-600",children:"Fecha"}),o.jsx("span",{className:"font-medium",children:Ae.date})]}),o.jsxs("div",{className:"flex items-center justify-between",children:[o.jsx("span",{className:"text-gray-600",children:"Tipo"}),o.jsx("span",{className:"font-medium",children:Ae.type==="CREDITO"?"Crdito":"Cash"})]}),o.jsxs("div",{className:"flex items-center justify-between",children:[o.jsx("span",{className:"text-gray-600",children:"Paquetes"}),o.jsx("span",{className:"font-medium",children:o.jsx("button",{type:"button",className:"underline text-blue-600",onClick:()=>p(Ae.id),title:"Ver detalle",children:Ae.quantity})})]}),o.jsxs("div",{className:"flex items-center justify-between",children:[o.jsx("span",{className:"text-gray-600",children:"Monto"}),o.jsx("span",{className:"font-semibold",children:tc(Ae.total)})]}),o.jsxs("div",{className:"flex items-center justify-between",children:[o.jsx("span",{className:"text-gray-600",children:"Comisin"}),o.jsx("span",{className:"font-medium",children:Qe>0?tc(Qe):""})]}),o.jsxs("div",{className:"flex items-center justify-between",children:[o.jsx("span",{className:"text-gray-600",children:"Vendedor"}),o.jsx("span",{className:"font-medium",children:Ae.vendorName||""})]}),s&&o.jsxs("div",{className:"pt-2 flex items-center justify-end gap-2",children:[o.jsx("button",{className:"px-3 py-2 rounded border hover:bg-gray-50",onClick:()=>ne(st=>st===Ae.id?null:Ae.id),children:" Acciones"}),me===Ae.id&&o.jsx("button",{className:"px-3 py-2 rounded bg-red-600 text-white hover:bg-red-700",onClick:()=>ge(Ae),children:"Eliminar"})]})]})})]})},Ae.id)}),o.jsx("div",{className:"bg-white p-3 rounded shadow border",children:z()})]}),o.jsxs("div",{className:"hidden md:block bg-white p-2 rounded shadow border w-full",children:[o.jsxs("table",{className:"min-w-full w-full text-sm",children:[o.jsx("thead",{className:"bg-gray-100",children:o.jsxs("tr",{children:[o.jsx("th",{className:"p-2 border",children:"Fecha"}),o.jsx("th",{className:"p-2 border",children:"Cliente"}),o.jsx("th",{className:"p-2 border",children:"Tipo"}),o.jsx("th",{className:"p-2 border",children:"Paquetes"}),o.jsx("th",{className:"p-2 border",children:"Monto"}),o.jsx("th",{className:"p-2 border",children:"Comisin"}),o.jsx("th",{className:"p-2 border",children:"Vendedor"}),s&&o.jsx("th",{className:"p-2 border",children:"Acciones"})]})}),o.jsx("tbody",{children:k?o.jsx("tr",{children:o.jsx("td",{className:"p-4 text-center",colSpan:i,children:"Cargando"})}):L.length===0?o.jsx("tr",{children:o.jsx("td",{className:"p-4 text-center",colSpan:i,children:"Sin transacciones en el rango."})}):L.map(Ae=>{const ye=Ae.customerName||(Ae.customerId?H[Ae.customerId]:"")||"Nombre cliente",Qe=M(Ae);return o.jsxs("tr",{className:"text-center",children:[o.jsx("td",{className:"p-2 border",children:Ae.date}),o.jsx("td",{className:"p-2 border",children:ye}),o.jsx("td",{className:"p-2 border",children:Ae.type==="CREDITO"?"Crdito":"Cash"}),o.jsx("td",{className:"p-2 border",children:o.jsx("button",{type:"button",className:"underline text-blue-600 hover:text-blue-800",title:"Ver detalle de productos de esta venta",onClick:()=>p(Ae.id),children:Ae.quantity})}),o.jsx("td",{className:"p-2 border",children:tc(Ae.total)}),o.jsx("td",{className:"p-2 border",children:Qe>0?tc(Qe):""}),o.jsx("td",{className:"p-2 border",children:Ae.vendorName||""}),s&&o.jsxs("td",{className:"p-2 border relative",children:[o.jsx("button",{className:"px-2 py-1 rounded border hover:bg-gray-50",onClick:()=>ne(st=>st===Ae.id?null:Ae.id),title:"Acciones",children:""}),me===Ae.id&&o.jsx("div",{className:"absolute right-2 mt-1 w-28 bg-white border rounded shadow z-10 text-left",children:o.jsx("button",{className:"block w-full text-left px-3 py-2 hover:bg-gray-100 text-red-600",onClick:()=>ge(Ae),children:"Eliminar"})})]})]},Ae.id)})})]}),z()]}),T&&o.jsx("p",{className:"mt-2 text-sm",children:T}),l&&o.jsx("div",{className:"fixed inset-0 bg-black/40 flex items-center justify-center z-[60]",children:o.jsxs("div",{className:"bg-white rounded-lg shadow-xl border w-[95%] max-w-3xl p-4",children:[o.jsxs("div",{className:"flex items-center justify-between mb-2",children:[o.jsxs("div",{children:[o.jsxs("h3",{className:"text-lg font-bold",children:["Productos/paquetes vendidos"," ",f?` #${f}`:""]}),Z&&o.jsxs("div",{className:"text-sm text-gray-700 mt-1",children:["Comisin de vendedor:"," ",o.jsx("span",{className:"font-semibold",children:M(Z)>0?tc(M(Z)):""})]})]}),o.jsx("button",{className:"px-3 py-1 rounded bg-gray-200 hover:bg-gray-300",onClick:()=>c(!1),children:"Cerrar"})]}),o.jsx("div",{className:"bg-white rounded border overflow-x-auto",children:o.jsxs("table",{className:"min-w-full text-sm",children:[o.jsx("thead",{className:"bg-gray-100",children:o.jsxs("tr",{children:[o.jsx("th",{className:"p-2 border",children:"Producto"}),o.jsx("th",{className:"p-2 border text-right",children:"Paquetes"}),o.jsx("th",{className:"p-2 border text-right",children:"Precio"}),o.jsx("th",{className:"p-2 border text-right",children:"Descuento"}),o.jsx("th",{className:"p-2 border text-right",children:"Monto"})]})}),o.jsx("tbody",{children:u?o.jsx("tr",{children:o.jsx("td",{colSpan:5,className:"p-4 text-center",children:"Cargando"})}):A.length===0?o.jsx("tr",{children:o.jsx("td",{colSpan:5,className:"p-4 text-center",children:"Sin tems en esta venta."})}):A.map((Ae,ye)=>o.jsxs("tr",{className:"text-center",children:[o.jsx("td",{className:"p-2 border text-left",children:Ae.productName}),o.jsx("td",{className:"p-2 border text-right",children:Ae.qty}),o.jsx("td",{className:"p-2 border text-right",children:tc(Ae.unitPrice)}),o.jsx("td",{className:"p-2 border text-right",children:tc(Ae.discount||0)}),o.jsx("td",{className:"p-2 border text-right",children:tc(Ae.total)})]},ye))})]})})]})})]})}const Dn=t=>`C$ ${(Number(t)||0).toFixed(2)}`;function Cy(t){var r;const e=t==null?void 0:t.date;return e||((r=t==null?void 0:t.createdAt)!=null&&r.toDate?Sr(t.createdAt.toDate(),"yyyy-MM-dd"):"")}function eUe(t){if(Array.isArray(t==null?void 0:t.items))return t.items.map(n=>{const a=Number((n==null?void 0:n.packages)??(n==null?void 0:n.qty)??(n==null?void 0:n.quantity)??0)||0,s=Number((n==null?void 0:n.unitPricePackage)??(n==null?void 0:n.unitPrice)??0)||(a>0?Number((n==null?void 0:n.total)??(n==null?void 0:n.lineFinal)??0)/a:0)||0;return{productId:String((n==null?void 0:n.productId)||""),productName:String((n==null?void 0:n.productName)||""),sku:(n==null?void 0:n.sku)||"",qty:a,unitPrice:Number(s||0),discount:Number((n==null?void 0:n.discount)||0),vendorCommissionAmount:Number((n==null?void 0:n.vendorCommissionAmount)??(n==null?void 0:n.commissionAmount)??0)}});if(t!=null&&t.item){const n=t.item,a=Number((n==null?void 0:n.packages)??(n==null?void 0:n.qty)??(n==null?void 0:n.quantity)??0)||Number((t==null?void 0:t.packagesTotal)??(t==null?void 0:t.quantity)??0)||0,s=Number((n==null?void 0:n.unitPricePackage)??(n==null?void 0:n.unitPrice)??0)||(a>0?Number((n==null?void 0:n.total)??(t==null?void 0:t.total)??0)/a:0)||0;return[{productId:String((n==null?void 0:n.productId)||""),productName:String((n==null?void 0:n.productName)||""),sku:(n==null?void 0:n.sku)||"",qty:a,unitPrice:Number(s||0),discount:Number((n==null?void 0:n.discount)||0),vendorCommissionAmount:Number((n==null?void 0:n.vendorCommissionAmount)??(n==null?void 0:n.commissionAmount)??0)}]}const e=Number((t==null?void 0:t.packagesTotal)??(t==null?void 0:t.quantity)??0)||0,r=e>0?Number((t==null?void 0:t.total)||0)/e:0;return e>0?[{productId:String((t==null?void 0:t.productId)||""),productName:String((t==null?void 0:t.productName)||""),sku:(t==null?void 0:t.sku)||"",qty:e,unitPrice:Number(r||0),discount:Number((t==null?void 0:t.discount)||0),vendorCommissionAmount:Number((t==null?void 0:t.vendorCommissionAmount)??(t==null?void 0:t.commissionAmount)??0)}]:[]}function tUe(t,e){const r=Cy(t);if(!r)return null;const n=t.vendorId||t.sellerId||void 0,a=t.vendorName||t.sellerName||void 0,s=eUe(t);let i=Number(t.total??t.itemsTotal??0)||s.reduce((l,c)=>{const u=(Number(c.qty||0)||0)*(Number(c.unitPrice||0)||0),d=Math.max(0,Number(c.discount||0)),f=Math.max(0,u-d);return l+f},0);return i=Number(i||0),{id:e,date:r,type:t.type||"CONTADO",total:i,items:s,customerId:t.customerId||void 0,customerName:t.customerName||void 0,vendorId:n,vendorName:a}}function rUe(t,e,r,n){const a={};for(const l of t)a[l.productId]||(a[l.productId]={productName:l.productName,lots:[]}),a[l.productId].lots.push({date:l.date,qtyLeft:Number(l.quantity||0),cost:Number(l.purchasePrice||0)});for(const l of Object.keys(a))a[l].lots.sort((c,u)=>c.date.localeCompare(u.date));const s=[...e].sort((l,c)=>l.date.localeCompare(c.date));let i=0;for(const l of s)for(const c of l.items||[]){const u=a[c.productId];if(!u)continue;let d=Number(c.qty||0);if(!(d<=0))for(const f of u.lots){if(d<=0)break;if(f.qtyLeft<=0)continue;const h=Math.min(f.qtyLeft,d);l.date>=r&&l.date<=n&&(i+=h*f.cost),f.qtyLeft-=h,d-=h}}return i}async function nUe(t){const e=nr(ht(ke,"ar_movements"),cr("ref.saleId","==",t)),r=await Ot(e);await Promise.all(r.docs.map(n=>Cn(qt(ke,"ar_movements",n.id))))}function aUe(){const{refreshKey:t,refresh:e}=xc(),[r,n]=v.useState(Sr(Qd(new Date),"yyyy-MM-dd")),[a,s]=v.useState(Sr(Ud(new Date),"yyyy-MM-dd")),[i,l]=v.useState([]),[c,u]=v.useState([]),[d,f]=v.useState([]),[h,A]=v.useState([]),[m,p]=v.useState([]),[g,x]=v.useState([]),[y,b]=v.useState(!0),[w,j]=v.useState(""),[I,_]=v.useState([]),[E,S]=v.useState({}),[k,P]=v.useState({}),[T,F]=v.useState(!1),[Y,he]=v.useState(null),[ue,fe]=v.useState([]),[me,ne]=v.useState(!1),[Pe,Ie]=v.useState({totalBruto:0,totalDescuento:0,totalFiado:0,saldoActual:0,abonadoPeriodo:0}),[O,H]=v.useState(!1),[R,M]=v.useState(""),[K,W]=v.useState([]),[D,L]=v.useState(!1),[Z,ge]=v.useState(!1),[U,Ge]=v.useState(null);v.useEffect(()=>{(async()=>{try{const oe=await Ot(ht(ke,"sellers_candies")),Me=[];oe.forEach(Le=>{const ve=Le.data();Me.push({id:Le.id,name:ve.name||"",commissionPercent:Number(ve.commissionPercent||0)})}),_(Me)}catch(oe){console.error("Error cargando sellers_candies",oe)}})()},[]);const ie=v.useMemo(()=>{const oe={};return I.forEach(Me=>{oe[Me.id]=Me}),oe},[I]);v.useEffect(()=>{(async()=>{b(!0),j("");try{const oe=await Ot(ht(ke,"sales_candies")),Me=[],Le=[];oe.forEach(nt=>{const Xe=nt.data(),It=tUe(Xe,nt.id);It&&(It.date<=a&&Me.push(It),It.date>=r&&It.date<=a&&Le.push(It))}),u(Me),l(Le);const ve=await Ot(ht(ke,"inventory_candies")),le=[];ve.forEach(nt=>{const Xe=nt.data(),It=Cy(Xe);if(!It||It>a)return;const $t=Math.max(1,Math.floor(Number(Xe.unitsPerPackage||1))),Ke=Number(Xe.totalUnits??Xe.quantity??0),wt=Number(Xe.packages??0),q=Number(Xe.remaining??0),ae=Number(Xe.remainingPackages??0),ee=wt>0?wt:Ke>0?Math.floor(Ke/$t):0,be=ae>0?ae:q>0?Math.floor(q/$t):0;le.push({id:nt.id,productId:Xe.productId,productName:Xe.productName||"",date:It,quantity:Number(ee||0),remaining:Number(be||0),purchasePrice:Number(Xe.providerPrice||Xe.purchasePrice||0),unitsPerPackage:$t})}),f(le);const Ue=await Ot(ht(ke,"expenses_candies")),rt=[];Ue.forEach(nt=>{const Xe=nt.data(),It=Cy(Xe);It&&It>=r&&It<=a&&rt.push({id:nt.id,date:It,category:Xe.category||"",description:Xe.description||"",amount:Number(Xe.amount||0),status:Xe.status||""})}),A(rt);const mt=await Ot(ht(ke,"ar_movements")),gt=[],Ct={};mt.forEach(nt=>{const Xe=nt.data(),It=Cy(Xe);if(!It)return;const $t=Xe.customerId,Ke=Number(Xe.amount||0);$t&&(Ct[$t]=(Ct[$t]||0)+Ke),Xe.type==="ABONO"&&It>=r&&It<=a&&gt.push({id:nt.id,customerId:$t,type:"ABONO",amount:Ke,date:It})}),p(gt);const jt=await Ot(ht(ke,"customers_candies")),xe=[];jt.forEach(nt=>{const Xe=nt.data();xe.push({id:nt.id,name:Xe.name||"",balance:Ct[nt.id]||0})}),x(xe);const He=await Ot(ht(ke,"inventory_candies_sellers")),Ce={},lt={};He.forEach(nt=>{const Xe=nt.data(),It=Cy(Xe);if(!It||It<r||It>a)return;const $t=Xe.sellerId||Xe.vendorId||"NO_VENDOR",Ke=Xe.productName||"",wt=Xe.sku||"",q=Math.max(1,Math.floor(Number(Xe.unitsPerPackage||1))),ae=Number(Xe.totalUnits??0),ee=Number(Xe.packages??0),be=Number(Xe.remainingUnits??Xe.remaining??0),_e=Number(Xe.remainingPackages??0),Be=ee>0?ee:ae>0?Math.floor(ae/q):0,tt=_e>0?_e:be>0?Math.floor(be/q):0,ot=Number(Xe.totalVendor??0),te=Number(Xe.gainVendor??0),V=Be,re=V>0?ot/V:0,pe=V>0?te/V:0;if(Ce[$t]||(Ce[$t]={associated:[],remaining:[]}),Be>0){const Ee=Be,Se=Ee*re,Re=Se,et=Ee*pe;Ce[$t].associated.push({saleId:nt.id,date:It,productName:Ke,sku:wt,qty:Ee,unitPrice:re,lineTotal:Se,discount:0,lineFinal:Re,vendorCommissionAmount:et,type:"ASSOCIATED"}),lt[$t]=(lt[$t]||0)+Ee}if(tt>0){const Ee=tt,Se=Ee*re,Re=Se,et=Ee*pe;Ce[$t].remaining.push({saleId:nt.id,date:It,productName:Ke,sku:wt,qty:Ee,unitPrice:re,lineTotal:Se,discount:0,lineFinal:Re,vendorCommissionAmount:et,type:"REMAINING"})}}),S(Ce),P(lt)}catch(oe){console.error(oe),j(" Error cargando datos del dashboard.")}finally{b(!1)}})()},[r,a,t]);const J=v.useCallback(oe=>{if(oe.vendorId&&ie[oe.vendorId])return ie[oe.vendorId];const Me=(oe.vendorName||"").trim().toLowerCase();if(Me)return I.find(Le=>(Le.name||"").trim().toLowerCase()===Me)},[ie,I]),je=v.useCallback((oe,Me)=>{const Le=Number(Me.vendorCommissionAmount||0);if(Le)return Le;const ve=J(oe);if(!ve||!ve.commissionPercent)return 0;const le=Number(Me.qty||0),Ue=Number(Me.unitPrice||0),rt=le*Ue,mt=Math.max(0,Number(Me.discount||0)),gt=Math.max(0,rt-mt);if(!gt)return 0;const Ct=Number(ve.commissionPercent)||0;return gt*Ct/100},[J]),z=v.useMemo(()=>{try{return rUe(d,c,r,a)}catch(oe){return console.error(oe),0}},[d,c,r,a]),Ae=v.useMemo(()=>{const oe=i.reduce((xe,He)=>xe+(He.total||0),0),Me=h.reduce((xe,He)=>xe+(He.amount||0),0),Le=oe-z,ve=Le-Me,le=m.reduce((xe,He)=>xe+Math.abs(He.amount||0),0),Ue=g.filter(xe=>(xe.balance||0)>0),rt=Ue.reduce((xe,He)=>xe+(He.balance||0),0);let mt=0,gt=0,Ct=0,jt=0;for(const xe of i){const He=(xe.items||[]).reduce((lt,nt)=>lt+(Number(nt.qty)||0),0),Ce=(xe.items||[]).reduce((lt,nt)=>lt+je(xe,nt),0);xe.type==="CONTADO"?(mt+=He,Ct+=Ce):(gt+=He,jt+=Ce)}return{ventasTotales:oe,costoMercaderia:z,gastosPeriodo:Me,gananciaAntes:Le,gananciaDespues:ve,abonosRecibidos:le,saldosPendientes:rt,clientesConSaldo:Ue.length,paquetesCash:mt,paquetesCredito:gt,comisionCash:Ct,comisionCredito:jt}},[i,h,m,g,z,je]),ye=v.useMemo(()=>{const oe={},Me={};for(const Le of i)if(!(Le.type!=="CREDITO"||!Le.customerId))for(const ve of Le.items||[]){const le=Number(ve.qty||0),Ue=Number(ve.unitPrice||0),rt=le*Ue,mt=Math.max(0,Number(ve.discount||0)),gt=Math.max(0,rt-mt);oe[Le.customerId]=(oe[Le.customerId]||0)+le,Me[Le.customerId]=(Me[Le.customerId]||0)+gt}return g.filter(Le=>(Le.balance||0)>0).map(Le=>({customerId:Le.id,name:Le.name,paquetesAsociados:oe[Le.id]||0,saldoTotal:Me[Le.id]||0,saldoPendiente:Le.balance||0})).sort((Le,ve)=>ve.saldoPendiente-Le.saldoPendiente)},[g,i]),Qe=v.useMemo(()=>{const oe={};return g.forEach(Me=>oe[Me.id]=Me.name),oe},[g]),st=v.useMemo(()=>[...i].sort((oe,Me)=>Me.date.localeCompare(oe.date)).map(oe=>{var le;const Me=(oe.items||[]).reduce((Ue,rt)=>Ue+(Number(rt.qty)||0),0);let Le="Cash";oe.type==="CREDITO"&&oe.customerId?Le=Qe[oe.customerId]||"":oe.type==="CONTADO"&&(Le=((le=oe.customerName)==null?void 0:le.trim())||"Cash");const ve=Me>0?oe.total/Me:0;return{id:oe.id,date:oe.date,type:oe.type==="CREDITO"?"Crdito":"Cash",customer:Le,paquetes:Me,total:Number(oe.total||0),avgPrice:ve}}),[i,Qe]),ut=v.useMemo(()=>{var Me,Le;const oe=new Map;for(const ve of i){const le=ve.vendorId||"NO_VENDOR",Ue=ve.vendorName||((Me=ie[le])==null?void 0:Me.name)||"Sin vendedor";oe.has(le)||oe.set(le,{vendorId:le,vendorName:Ue,paquetesAsociados:0,paquetesVendidos:0,paquetesFiados:0,totalVendido:0,totalFiado:0,comisionCash:0,comisionCredito:0,paquetesRestantes:0});const rt=oe.get(le);for(const mt of ve.items||[]){const gt=Number(mt.qty||0),Ct=Number(mt.unitPrice||0),jt=gt*Ct,xe=Math.max(0,Number(mt.discount||0)),He=Math.max(0,jt-xe),Ce=je(ve,mt);ve.type==="CONTADO"?(rt.paquetesVendidos+=gt,rt.totalVendido+=He,rt.comisionCash+=Ce):(rt.paquetesFiados+=gt,rt.totalFiado+=He,rt.comisionCredito+=Ce)}}for(const[ve,le]of Object.entries(k)){const Ue=oe.get(ve),rt=(Ue==null?void 0:Ue.vendorName)||((Le=ie[ve])==null?void 0:Le.name)||"Sin vendedor",mt=Ue||{vendorId:ve,vendorName:rt,paquetesAsociados:0,paquetesVendidos:0,paquetesFiados:0,totalVendido:0,totalFiado:0,comisionCash:0,comisionCredito:0,paquetesRestantes:0};mt.paquetesAsociados=le,mt.paquetesRestantes=Math.max(le-mt.paquetesVendidos-mt.paquetesFiados,0),oe.set(ve,mt)}return Array.from(oe.values()).sort((ve,le)=>le.totalVendido+le.totalFiado-(ve.totalVendido+ve.totalFiado))},[i,k,ie,je]),De=async oe=>{F(!0),he({id:oe.customerId,name:oe.name}),fe([]),ne(!0),Ie({totalBruto:0,totalDescuento:0,totalFiado:0,saldoActual:0,abonadoPeriodo:0});try{const Me=[];let Le=0,ve=0,le=0;for(const gt of i)if(!(gt.type!=="CREDITO"||gt.customerId!==oe.customerId))for(const Ct of gt.items||[]){const jt=Number(Ct.qty||0),xe=Number(Ct.unitPrice||0),He=jt*xe,Ce=Math.max(0,Number(Ct.discount||0)),lt=Math.max(0,He-Ce);Me.push({saleId:gt.id,date:gt.date,productName:Ct.productName,sku:Ct.sku||"",qty:jt,unitPrice:xe,lineTotal:He,discount:Ce,lineFinal:lt}),Le+=He,ve+=Ce,le+=lt}let Ue=0;for(const gt of m)gt.customerId===oe.customerId&&(Ue+=Math.abs(gt.amount||0));const rt=g.find(gt=>gt.id===oe.customerId),mt=(rt==null?void 0:rt.balance)||0;fe(Me),Ie({totalBruto:Le,totalDescuento:ve,totalFiado:le,saldoActual:mt,abonadoPeriodo:Ue})}catch(Me){console.error(Me),j(" No se pudo cargar el detalle del cliente.")}finally{ne(!1)}},it=(oe,Me,Le)=>{H(!0);let ve="";Le==="ASSOCIATED"?ve=`Paquetes asociados  ${Me}`:Le==="REMAINING"?ve=`Paquetes restantes  ${Me}`:Le==="CASH"?ve=`Paquetes vendidos (Cash)  ${Me}`:ve=`Paquetes fiados (Crdito)  ${Me}`,M(ve),W([]),L(!0);try{if(Le==="ASSOCIATED"||Le==="REMAINING"){const Ue=E[oe],rt=Le==="ASSOCIATED"?(Ue==null?void 0:Ue.associated)||[]:(Ue==null?void 0:Ue.remaining)||[];W([...rt].sort((mt,gt)=>mt.date.localeCompare(gt.date))),L(!1);return}const le=[];for(const Ue of i)if(((Ue.vendorId||"NO_VENDOR")===oe||!Ue.vendorId&&oe==="NO_VENDOR")&&!(Le==="CASH"&&Ue.type!=="CONTADO")&&!(Le==="CREDIT"&&Ue.type!=="CREDITO"))for(const mt of Ue.items||[]){const gt=Number(mt.qty||0),Ct=Number(mt.unitPrice||0),jt=gt*Ct,xe=Math.max(0,Number(mt.discount||0)),He=Math.max(0,jt-xe),Ce=je(Ue,mt);le.push({saleId:Ue.id,date:Ue.date,productName:mt.productName,sku:mt.sku||"",qty:gt,unitPrice:Ct,lineTotal:jt,discount:xe,lineFinal:He,vendorCommissionAmount:Ce,type:Le})}W(le.sort((Ue,rt)=>Ue.date.localeCompare(rt.date)))}catch(le){console.error(le),j(" No se pudo cargar el detalle del vendedor.")}finally{L(!1)}},dt=oe=>{const Me=i.find(Le=>Le.id===oe)||null;Ge(Me),ge(!0)},ce=async oe=>{if(window.confirm("Eliminar esta venta? Esta accin no se puede deshacer."))try{await m2(oe),await nUe(oe),l(Me=>Me.filter(Le=>Le.id!==oe)),u(Me=>Me.filter(Le=>Le.id!==oe)),ge(!1),Ge(null)}catch(Me){console.error(Me),alert("No se pudo eliminar la venta. Revisa la consola para ms detalles.")}};return o.jsxs("div",{className:"max-w-6xl mx-auto",children:[o.jsxs("div",{className:"flex items-center justify-between mb-3",children:[o.jsx("h2",{className:"text-2xl font-bold",children:"Finanzas (Dulces)"}),o.jsx(gc,{onClick:e,loading:y})]}),o.jsxs("div",{className:"bg-white p-3 rounded shadow border mb-4 flex flex-wrap items-end gap-3 text-sm",children:[o.jsxs("div",{className:"flex flex-col",children:[o.jsx("label",{className:"font-semibold",children:"Desde"}),o.jsx("input",{type:"date",className:"border rounded px-2 py-1",value:r,onChange:oe=>n(oe.target.value)})]}),o.jsxs("div",{className:"flex flex-col",children:[o.jsx("label",{className:"font-semibold",children:"Hasta"}),o.jsx("input",{type:"date",className:"border rounded px-2 py-1",value:a,onChange:oe=>s(oe.target.value)})]})]}),o.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 xl:grid-cols-5 gap-3 mb-4",children:[o.jsxs("div",{className:"p-3 border rounded bg-gray-50",children:[o.jsx("div",{className:"text-xs text-gray-600",children:"Ventas Totales"}),o.jsx("div",{className:"text-xl font-semibold",children:Dn(Ae.ventasTotales)}),o.jsx("div",{className:"text-[11px] text-gray-500 mt-1",children:"Contado + Crdito del periodo."})]}),o.jsxs("div",{className:"p-3 border rounded bg-gray-50",children:[o.jsx("div",{className:"text-xs text-gray-600",children:"Costo de Mercadera (FIFO)"}),o.jsx("div",{className:"text-xl font-semibold",children:Dn(Ae.costoMercaderia)})]}),o.jsxs("div",{className:"p-3 border rounded bg-gray-50",children:[o.jsx("div",{className:"text-xs text-gray-600",children:"Utilidad Bruta"}),o.jsx("div",{className:"text-xl font-semibold text-green-600",children:Dn(Ae.gananciaAntes)})]}),o.jsxs("div",{className:"p-3 border rounded bg-gray-50",children:[o.jsx("div",{className:"text-xs text-gray-600",children:"Gastos"}),o.jsx("div",{className:"text-xl font-semibold",children:Dn(Ae.gastosPeriodo)})]}),o.jsxs("div",{className:"p-3 border rounded bg-gray-50",children:[o.jsx("div",{className:"text-xs text-gray-600",children:"Utilidad Neta"}),o.jsx("div",{className:"text-xl font-semibold text-green-600",children:Dn(Ae.gananciaDespues)})]}),o.jsxs("div",{className:"p-3 border rounded bg-gray-50",children:[o.jsx("div",{className:"text-xs text-gray-600",children:"Abonos Recibidos"}),o.jsx("div",{className:"text-xl font-semibold",children:Dn(Ae.abonosRecibidos)})]}),o.jsxs("div",{className:"p-3 border rounded bg-gray-50",children:[o.jsx("div",{className:"text-xs text-gray-600",children:"Saldos Pendientes"}),o.jsx("div",{className:"text-xl font-semibold",children:Dn(Ae.saldosPendientes)}),o.jsx("div",{className:"text-[11px] text-gray-500 mt-1",children:"A la fecha."})]}),o.jsxs("div",{className:"p-3 border rounded bg-gray-50",children:[o.jsx("div",{className:"text-xs text-gray-600",children:"Clientes con Saldo"}),o.jsx("div",{className:"text-xl font-semibold",children:Ae.clientesConSaldo})]}),o.jsxs("div",{className:"p-3 border rounded bg-gray-50",children:[o.jsx("div",{className:"text-xs text-gray-600",children:"Paquetes Cash"}),o.jsx("div",{className:"text-xl font-semibold",children:Ae.paquetesCash})]}),o.jsxs("div",{className:"p-3 border rounded bg-gray-50",children:[o.jsx("div",{className:"text-xs text-gray-600",children:"Paquetes Crdito (vendidos)"}),o.jsx("div",{className:"text-xl font-semibold",children:Ae.paquetesCredito})]}),o.jsxs("div",{className:"p-3 border rounded bg-gray-50",children:[o.jsx("div",{className:"text-xs text-gray-600",children:"Comisin Cash"}),o.jsx("div",{className:"text-xl font-semibold",children:Dn(Ae.comisionCash)})]}),o.jsxs("div",{className:"p-3 border rounded bg-gray-50",children:[o.jsx("div",{className:"text-xs text-gray-600",children:"Comisin Crdito"}),o.jsx("div",{className:"text-xl font-semibold",children:Dn(Ae.comisionCredito)})]})]}),o.jsx("h3",{className:"text-lg font-semibold mb-2",children:"Consolidado por cliente (Crdito)"}),o.jsx("div",{className:"bg-white p-2 rounded shadow border w-full mb-6",children:o.jsxs("table",{className:"min-w-full w-full text-sm",children:[o.jsx("thead",{className:"bg-gray-100",children:o.jsxs("tr",{children:[o.jsx("th",{className:"p-2 border",children:"Cliente"}),o.jsx("th",{className:"p-2 border",children:"Paquetes asociados (periodo)"}),o.jsx("th",{className:"p-2 border",children:"Saldo total (periodo)"}),o.jsx("th",{className:"p-2 border",children:"Saldo pendiente"})]})}),o.jsx("tbody",{children:y?o.jsx("tr",{children:o.jsx("td",{className:"p-4 text-center",colSpan:4,children:"Cargando"})}):ye.length===0?o.jsx("tr",{children:o.jsx("td",{className:"p-4 text-center",colSpan:4,children:"Sin clientes con saldo"})}):ye.map(oe=>o.jsxs("tr",{className:"text-center",children:[o.jsx("td",{className:"p-2 border",children:oe.name}),o.jsx("td",{className:"p-2 border",children:o.jsx("button",{className:"underline text-blue-600 hover:text-blue-800",onClick:()=>De({customerId:oe.customerId,name:oe.name}),title:"Ver paquetes fiados del periodo",children:oe.paquetesAsociados})}),o.jsx("td",{className:"p-2 border",children:Dn(oe.saldoTotal)}),o.jsx("td",{className:"p-2 border font-semibold",children:Dn(oe.saldoPendiente)})]},oe.customerId))})]})}),o.jsx("h3",{className:"text-lg font-semibold mb-2",children:"Consolidado vendedores"}),o.jsx("div",{className:"bg-white p-2 rounded shadow border w-full mb-6 overflow-x-auto",children:o.jsxs("table",{className:"min-w-full w-full text-sm",children:[o.jsx("thead",{className:"bg-gray-100",children:o.jsxs("tr",{children:[o.jsx("th",{className:"p-2 border whitespace-nowrap",children:"Vendedor"}),o.jsx("th",{className:"p-2 border whitespace-nowrap",children:"Paquetes asociados"}),o.jsx("th",{className:"p-2 border whitespace-nowrap",children:"Paquetes restantes"}),o.jsx("th",{className:"p-2 border whitespace-nowrap",children:"Paquetes vendidos (Cash)"}),o.jsx("th",{className:"p-2 border whitespace-nowrap",children:"Total vendido (Cash)"}),o.jsx("th",{className:"p-2 border whitespace-nowrap",children:"Comisin Cash"}),o.jsx("th",{className:"p-2 border whitespace-nowrap",children:"Paquetes fiados (Crdito)"}),o.jsx("th",{className:"p-2 border whitespace-nowrap",children:"Total fiado (Crdito)"}),o.jsx("th",{className:"p-2 border whitespace-nowrap",children:"Comisin Crdito"})]})}),o.jsx("tbody",{children:y?o.jsx("tr",{children:o.jsx("td",{className:"p-4 text-center",colSpan:9,children:"Cargando"})}):ut.length===0?o.jsx("tr",{children:o.jsx("td",{className:"p-4 text-center",colSpan:9,children:"Sin datos de vendedores en el rango seleccionado."})}):ut.map(oe=>o.jsxs("tr",{className:"text-center",children:[o.jsx("td",{className:"p-2 border whitespace-nowrap",children:oe.vendorName}),o.jsx("td",{className:"p-2 border whitespace-nowrap",children:o.jsx("button",{className:"underline text-blue-600 hover:text-blue-800",onClick:()=>it(oe.vendorId,oe.vendorName,"ASSOCIATED"),children:oe.paquetesAsociados})}),o.jsx("td",{className:"p-2 border whitespace-nowrap",children:o.jsx("button",{className:"underline text-blue-600 hover:text-blue-800",onClick:()=>it(oe.vendorId,oe.vendorName,"REMAINING"),children:oe.paquetesRestantes})}),o.jsx("td",{className:"p-2 border whitespace-nowrap",children:o.jsx("button",{className:"underline text-blue-600 hover:text-blue-800",onClick:()=>it(oe.vendorId,oe.vendorName,"CASH"),children:oe.paquetesVendidos})}),o.jsx("td",{className:"p-2 border whitespace-nowrap",children:Dn(oe.totalVendido)}),o.jsx("td",{className:"p-2 border whitespace-nowrap",children:Dn(oe.comisionCash)}),o.jsx("td",{className:"p-2 border whitespace-nowrap",children:o.jsx("button",{className:"underline text-blue-600 hover:text-blue-800",onClick:()=>it(oe.vendorId,oe.vendorName,"CREDIT"),children:oe.paquetesFiados})}),o.jsx("td",{className:"p-2 border whitespace-nowrap",children:Dn(oe.totalFiado)}),o.jsx("td",{className:"p-2 border whitespace-nowrap",children:Dn(oe.comisionCredito)})]},oe.vendorId))})]})}),o.jsx("h3",{className:"text-lg font-semibold mb-2",children:"Transacciones del periodo"}),o.jsx("div",{className:"bg-white p-2 rounded shadow border w-full mb-6 overflow-x-auto",children:o.jsxs("table",{className:"min-w-full w-full text-sm",children:[o.jsx("thead",{className:"bg-gray-100",children:o.jsxs("tr",{children:[o.jsx("th",{className:"p-2 border whitespace-nowrap",children:"Fecha"}),o.jsx("th",{className:"p-2 border whitespace-nowrap",children:"Cliente"}),o.jsx("th",{className:"p-2 border whitespace-nowrap",children:"Tipo"}),o.jsx("th",{className:"p-2 border whitespace-nowrap",children:"Paquetes"}),o.jsx("th",{className:"p-2 border whitespace-nowrap",children:"Precio venta (prom.)"}),o.jsx("th",{className:"p-2 border whitespace-nowrap",children:"Total"}),o.jsx("th",{className:"p-2 border whitespace-nowrap",children:"Acciones"})]})}),o.jsx("tbody",{children:y?o.jsx("tr",{children:o.jsx("td",{className:"p-4 text-center",colSpan:7,children:"Cargando"})}):st.length===0?o.jsx("tr",{children:o.jsx("td",{className:"p-4 text-center",colSpan:7,children:"Sin transacciones en el rango seleccionado."})}):st.map(oe=>o.jsxs("tr",{className:"text-center",children:[o.jsx("td",{className:"p-2 border whitespace-nowrap",children:oe.date}),o.jsx("td",{className:"p-2 border whitespace-nowrap",children:oe.customer}),o.jsx("td",{className:"p-2 border whitespace-nowrap",children:oe.type}),o.jsx("td",{className:"p-2 border whitespace-nowrap",children:o.jsx("button",{className:"underline text-blue-600 hover:text-blue-800",onClick:()=>dt(oe.id),children:oe.paquetes})}),o.jsx("td",{className:"p-2 border whitespace-nowrap",children:Dn(oe.avgPrice)}),o.jsx("td",{className:"p-2 border whitespace-nowrap",children:Dn(oe.total)}),o.jsx("td",{className:"p-2 border whitespace-nowrap",children:o.jsx("button",{className:"text-xs bg-red-600 text-white px-2 py-1 rounded hover:bg-red-700",onClick:()=>ce(oe.id),children:"Eliminar"})})]},oe.id))})]})}),o.jsx("h3",{className:"text-lg font-semibold mb-2",children:"Gastos del periodo"}),o.jsx("div",{className:"bg-white p-2 rounded shadow border w-full",children:o.jsxs("table",{className:"min-w-full w-full text-sm",children:[o.jsx("thead",{className:"bg-gray-100",children:o.jsxs("tr",{children:[o.jsx("th",{className:"p-2 border",children:"Fecha"}),o.jsx("th",{className:"p-2 border",children:"Categora"}),o.jsx("th",{className:"p-2 border",children:"Descripcin"}),o.jsx("th",{className:"p-2 border",children:"Monto"}),o.jsx("th",{className:"p-2 border",children:"Estado"})]})}),o.jsx("tbody",{children:y?o.jsx("tr",{children:o.jsx("td",{className:"p-4 text-center",colSpan:5,children:"Cargando"})}):h.length===0?o.jsx("tr",{children:o.jsx("td",{className:"p-4 text-center",colSpan:5,children:"Sin gastos en el rango seleccionado."})}):h.sort((oe,Me)=>oe.date.localeCompare(Me.date)).map(oe=>o.jsxs("tr",{className:"text-center",children:[o.jsx("td",{className:"p-2 border",children:oe.date}),o.jsx("td",{className:"p-2 border",children:oe.category||""}),o.jsx("td",{className:"p-2 border",children:oe.description?o.jsx("span",{title:oe.description,children:oe.description.length>40?oe.description.slice(0,40)+"":oe.description}):""}),o.jsx("td",{className:"p-2 border",children:Dn(oe.amount)}),o.jsx("td",{className:"p-2 border",children:oe.status||""})]},oe.id))})]})}),w&&o.jsx("p",{className:"mt-2 text-sm",children:w}),T&&o.jsx("div",{className:"fixed inset-0 bg-black/40 flex items-center justify-center z-50",children:o.jsxs("div",{className:"bg-white rounded-lg shadow-xl border w-[95%] max-w-5xl p-4",children:[o.jsxs("div",{className:"flex items-center justify-between mb-2",children:[o.jsxs("h3",{className:"text-lg font-bold",children:["Detalle cliente  ",(Y==null?void 0:Y.name)||""]}),o.jsx("button",{className:"px-3 py-1 rounded bg-gray-200 hover:bg-gray-300",onClick:()=>F(!1),children:"Cerrar"})]}),o.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 xl:grid-cols-5 gap-3 mb-3",children:[o.jsxs("div",{className:"p-3 border rounded bg-gray-50",children:[o.jsx("div",{className:"text-xs text-gray-600",children:"Total bruto (periodo)"}),o.jsx("div",{className:"text-xl font-semibold",children:Dn(Pe.totalBruto)})]}),o.jsxs("div",{className:"p-3 border rounded bg-gray-50",children:[o.jsx("div",{className:"text-xs text-gray-600",children:"Descuento (periodo)"}),o.jsx("div",{className:"text-xl font-semibold",children:Dn(Pe.totalDescuento)})]}),o.jsxs("div",{className:"p-3 border rounded bg-gray-50",children:[o.jsx("div",{className:"text-xs text-gray-600",children:"Monto total fiado (periodo)"}),o.jsx("div",{className:"text-xl font-semibold",children:Dn(Pe.totalFiado)})]}),o.jsxs("div",{className:"p-3 border rounded bg-gray-50",children:[o.jsx("div",{className:"text-xs text-gray-600",children:"Saldo actual"}),o.jsx("div",{className:"text-xl font-semibold",children:Dn(Pe.saldoActual)})]}),o.jsxs("div",{className:"p-3 border rounded bg-gray-50",children:[o.jsx("div",{className:"text-xs text-gray-600",children:"Abonado (periodo)"}),o.jsx("div",{className:"text-xl font-semibold",children:Dn(Pe.abonadoPeriodo)})]})]}),o.jsx("div",{className:"bg-white rounded border overflow-x-auto",children:o.jsxs("table",{className:"min-w-full text-sm",children:[o.jsx("thead",{className:"bg-gray-100",children:o.jsxs("tr",{children:[o.jsx("th",{className:"p-2 border",children:"Fecha compra"}),o.jsx("th",{className:"p-2 border",children:"Producto"}),o.jsx("th",{className:"p-2 border",children:"SKU"}),o.jsx("th",{className:"p-2 border",children:"Paquetes"}),o.jsx("th",{className:"p-2 border",children:"P. Unit"}),o.jsx("th",{className:"p-2 border",children:"Monto"}),o.jsx("th",{className:"p-2 border",children:"Descuento"}),o.jsx("th",{className:"p-2 border",children:"Monto final"})]})}),o.jsx("tbody",{children:me?o.jsx("tr",{children:o.jsx("td",{colSpan:8,className:"p-4 text-center",children:"Cargando"})}):ue.length===0?o.jsx("tr",{children:o.jsx("td",{colSpan:8,className:"p-4 text-center",children:"Sin paquetes fiados en el periodo."})}):ue.sort((oe,Me)=>oe.date.localeCompare(Me.date)).map((oe,Me)=>o.jsxs("tr",{className:"text-center",children:[o.jsx("td",{className:"p-2 border",children:oe.date}),o.jsx("td",{className:"p-2 border",children:oe.productName}),o.jsx("td",{className:"p-2 border",children:oe.sku||""}),o.jsx("td",{className:"p-2 border",children:oe.qty}),o.jsx("td",{className:"p-2 border",children:Dn(oe.unitPrice)}),o.jsx("td",{className:"p-2 border",children:Dn(oe.lineTotal)}),o.jsx("td",{className:"p-2 border",children:Dn(oe.discount)}),o.jsx("td",{className:"p-2 border",children:Dn(oe.lineFinal)})]},`${oe.saleId}-${Me}`))})]})})]})}),O&&o.jsx("div",{className:"fixed inset-0 bg-black/40 flex items-center justify-center z-50",children:o.jsxs("div",{className:"bg-white rounded-lg shadow-xl border w-[95%] max-w-5xl p-4",children:[o.jsxs("div",{className:"flex items-center justify-between mb-2",children:[o.jsx("h3",{className:"text-lg font-bold",children:R}),o.jsx("button",{className:"px-3 py-1 rounded bg-gray-200 hover:bg-gray-300",onClick:()=>H(!1),children:"Cerrar"})]}),o.jsx("div",{className:"bg-white rounded border overflow-x-auto",children:o.jsxs("table",{className:"min-w-full text-sm",children:[o.jsx("thead",{className:"bg-gray-100",children:o.jsxs("tr",{children:[o.jsx("th",{className:"p-2 border",children:"Fecha"}),o.jsx("th",{className:"p-2 border",children:"Producto"}),o.jsx("th",{className:"p-2 border",children:"SKU"}),o.jsx("th",{className:"p-2 border",children:"Paquetes"}),o.jsx("th",{className:"p-2 border",children:"P. Unit"}),o.jsx("th",{className:"p-2 border",children:"Monto"}),o.jsx("th",{className:"p-2 border",children:"Descuento"}),o.jsx("th",{className:"p-2 border",children:"Monto final"}),o.jsx("th",{className:"p-2 border",children:"Comisin"})]})}),o.jsx("tbody",{children:D?o.jsx("tr",{children:o.jsx("td",{colSpan:9,className:"p-4 text-center",children:"Cargando"})}):K.length===0?o.jsx("tr",{children:o.jsx("td",{colSpan:9,className:"p-4 text-center",children:"Sin paquetes para este vendedor en el periodo."})}):K.map((oe,Me)=>o.jsxs("tr",{className:"text-center",children:[o.jsx("td",{className:"p-2 border",children:oe.date}),o.jsx("td",{className:"p-2 border",children:oe.productName}),o.jsx("td",{className:"p-2 border",children:oe.sku||""}),o.jsx("td",{className:"p-2 border",children:oe.qty}),o.jsx("td",{className:"p-2 border",children:Dn(oe.unitPrice)}),o.jsx("td",{className:"p-2 border",children:Dn(oe.lineTotal)}),o.jsx("td",{className:"p-2 border",children:Dn(oe.discount)}),o.jsx("td",{className:"p-2 border",children:Dn(oe.lineFinal)}),o.jsx("td",{className:"p-2 border",children:Dn(oe.vendorCommissionAmount)})]},`${oe.saleId}-${Me}`))})]})})]})}),Z&&U&&o.jsx("div",{className:"fixed inset-0 bg-black/40 flex items-center justify-center z-50",children:o.jsxs("div",{className:"bg-white rounded-lg shadow-xl border w-[95%] max-w-4xl p-4",children:[o.jsxs("div",{className:"flex items-center justify-between mb-2",children:[o.jsxs("h3",{className:"text-lg font-bold",children:["Detalle de venta  ",U.date]}),o.jsx("button",{className:"px-3 py-1 rounded bg-gray-200 hover:bg-gray-300",onClick:()=>ge(!1),children:"Cerrar"})]}),o.jsx("div",{className:"bg-white rounded border overflow-x-auto mb-3",children:o.jsxs("table",{className:"min-w-full text-sm",children:[o.jsx("thead",{className:"bg-gray-100",children:o.jsxs("tr",{children:[o.jsx("th",{className:"p-2 border",children:"Producto"}),o.jsx("th",{className:"p-2 border",children:"SKU"}),o.jsx("th",{className:"p-2 border",children:"Paquetes"}),o.jsx("th",{className:"p-2 border",children:"P. Unit"}),o.jsx("th",{className:"p-2 border",children:"Monto"}),o.jsx("th",{className:"p-2 border",children:"Comisin"})]})}),o.jsx("tbody",{children:(U.items||[]).map((oe,Me)=>{const Le=Number(oe.qty||0),ve=Number(oe.unitPrice||0),le=Le*ve,Ue=je(U,oe);return o.jsxs("tr",{className:"text-center",children:[o.jsx("td",{className:"p-2 border",children:oe.productName}),o.jsx("td",{className:"p-2 border",children:oe.sku||""}),o.jsx("td",{className:"p-2 border",children:Le}),o.jsx("td",{className:"p-2 border",children:Dn(ve)}),o.jsx("td",{className:"p-2 border",children:Dn(le)}),o.jsx("td",{className:"p-2 border",children:Dn(Ue)})]},Me)})})]})}),o.jsxs("div",{className:"flex justify-between items-center",children:[o.jsxs("div",{className:"text-sm",children:[o.jsx("span",{className:"font-semibold",children:"Total venta:"}),Dn(U.total)]}),o.jsx("button",{className:"text-xs bg-red-600 text-white px-3 py-1 rounded hover:bg-red-700",onClick:()=>ce(U.id),children:"Eliminar venta"})]})]})})]})}const zH=["Rivas","Isla Ometepe","San Jorge"];function sUe(){const{refreshKey:t,refresh:e}=xc(),[r,n]=v.useState([]),[a,s]=v.useState(!0),[i,l]=v.useState(""),[c,u]=v.useState(!1),[d,f]=v.useState(""),[h,A]=v.useState("0"),[m,p]=v.useState("Rivas"),[g,x]=v.useState(null),[y,b]=v.useState(""),[w,j]=v.useState("0"),[I,_]=v.useState("Rivas");v.useEffect(()=>{(async()=>{s(!0),l("");try{const Y=nr(ht(ke,"sellers_candies"),on("name","asc")),he=await Ot(Y),ue=[];he.forEach(fe=>{const me=fe.data();ue.push({id:fe.id,name:me.name||"",commissionPercent:Number(me.commissionPercent||0),branch:me.branch||"Rivas",createdAt:me.createdAt||fr.now()})}),n(ue)}catch(Y){console.error(Y),l(" Error cargando vendedores.")}finally{s(!1)}})()},[t]);const E=()=>{f(""),A("0"),p("Rivas")},S=async Y=>{Y.preventDefault(),l("");const he=d.trim();if(!he){l("Ingresa el nombre y apellido del vendedor.");return}const ue=Number(h||0);if(ue<0){l("El margen no puede ser negativo.");return}try{const fe={name:he,commissionPercent:ue,branch:m,createdAt:fr.now()},me=await xn(ht(ke,"sellers_candies"),fe);n(ne=>[{id:me.id,...fe},...ne]),l(" Vendedor creado correctamente."),E(),u(!1)}catch(fe){console.error(fe),l(" Error al crear el vendedor.")}},k=Y=>{x(Y.id),b(Y.name),j(Y.commissionPercent.toString()),_(Y.branch)},P=()=>{x(null),b(""),j("0"),_("Rivas")},T=async()=>{if(!g)return;l("");const Y=y.trim();if(!Y){l("El nombre y apellido no pueden estar vacos.");return}const he=Number(w||0);if(he<0){l("El margen no puede ser negativo.");return}try{await nn(qt(ke,"sellers_candies",g),{name:Y,commissionPercent:he,branch:I}),n(ue=>ue.map(fe=>fe.id===g?{...fe,name:Y,commissionPercent:he,branch:I}:fe)),l(" Vendedor actualizado."),P()}catch(ue){console.error(ue),l(" Error al actualizar el vendedor.")}},F=async Y=>{if(window.confirm(`Eliminar al vendedor "${Y.name}"? Esta accin no se puede deshacer.`))try{await Cn(qt(ke,"sellers_candies",Y.id)),n(ue=>ue.filter(fe=>fe.id!==Y.id)),l(" Vendedor eliminado.")}catch(ue){console.error(ue),l(" Error al eliminar el vendedor.")}};return o.jsxs("div",{className:"max-w-5xl mx-auto",children:[o.jsxs("div",{className:"flex items-center justify-between mb-3",children:[o.jsx("h2",{className:"text-2xl font-bold",children:"Vendedores de Dulces"}),o.jsxs("div",{className:"flex gap-2",children:[o.jsx(gc,{onClick:e,loading:a}),o.jsxs("button",{className:"inline-flex items-center gap-2 bg-green-600 text-white px-3 py-2 rounded hover:bg-green-700",onClick:()=>u(!0),children:[o.jsx("span",{className:"inline-block bg-green-700/40 rounded-full p-1",children:o.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-4 w-4",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:o.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 4v16m8-8H4"})})}),"Nuevo vendedor"]})]})]}),c&&o.jsx("div",{className:"fixed inset-0 bg-black/40 flex items-center justify-center z-50",children:o.jsxs("div",{className:"bg-white p-6 rounded shadow-lg w-full max-w-lg max-h-[90vh] overflow-y-auto",children:[o.jsx("h3",{className:"text-xl font-bold mb-4",children:"Nuevo vendedor de dulces"}),o.jsxs("form",{onSubmit:S,className:"space-y-4 text-sm",children:[o.jsxs("div",{children:[o.jsx("label",{className:"block text-sm font-semibold",children:"Nombre y apellido"}),o.jsx("input",{className:"w-full border p-2 rounded",value:d,onChange:Y=>f(Y.target.value),placeholder:"Ej: Juan Prez"})]}),o.jsxs("div",{children:[o.jsx("label",{className:"block text-sm font-semibold",children:"Margen del vendedor (% sobre U Aproximada)"}),o.jsx("input",{type:"number",step:"0.01",min:0,className:"w-full border p-2 rounded",value:h,onChange:Y=>A(Y.target.value),placeholder:"Ej: 30"}),o.jsx("p",{className:"text-[11px] text-gray-500 mt-1",children:"Este porcentaje YA NO es comisin sobre venta. Se aplica as: U. Vendedor = U. Aproximada  (margen/100). U. Inversionista = U. Aproximada  U. Vendedor."})]}),o.jsxs("div",{children:[o.jsx("label",{className:"block text-sm font-semibold",children:"Sucursal"}),o.jsx("select",{className:"w-full border p-2 rounded",value:m,onChange:Y=>p(Y.target.value),children:zH.map(Y=>o.jsx("option",{value:Y,children:Y},Y))})]}),o.jsxs("div",{className:"flex justify-end gap-2 mt-2",children:[o.jsx("button",{type:"button",onClick:()=>{E(),u(!1)},className:"px-3 py-1 rounded bg-gray-200 hover:bg-gray-300",children:"Cancelar"}),o.jsx("button",{type:"submit",className:"px-3 py-1 rounded bg-blue-600 text-white hover:bg-blue-700",children:"Guardar vendedor"})]})]})]})}),o.jsx("div",{className:"bg-white p-2 rounded shadow border w-full overflow-x-auto mt-3",children:o.jsxs("table",{className:"min-w-[700px] text-xs md:text-sm",children:[o.jsx("thead",{className:"bg-gray-100",children:o.jsxs("tr",{className:"whitespace-nowrap",children:[o.jsx("th",{className:"p-2 border",children:"Nombre y apellido"}),o.jsx("th",{className:"p-2 border",children:"Margen (% U Aproximada)"}),o.jsx("th",{className:"p-2 border",children:"Sucursal"}),o.jsx("th",{className:"p-2 border",children:"Acciones"})]})}),o.jsx("tbody",{children:a?o.jsx("tr",{children:o.jsx("td",{className:"p-4 text-center",colSpan:4,children:"Cargando"})}):r.length===0?o.jsx("tr",{children:o.jsx("td",{className:"p-4 text-center",colSpan:4,children:"Sin vendedores registrados."})}):r.map(Y=>{const he=g===Y.id;return o.jsxs("tr",{className:"text-center whitespace-nowrap",children:[o.jsx("td",{className:"p-2 border",children:he?o.jsx("input",{className:"border p-1 rounded text-xs w-full",value:y,onChange:ue=>b(ue.target.value)}):Y.name}),o.jsx("td",{className:"p-2 border",children:he?o.jsx("input",{type:"number",step:"0.01",min:0,className:"border p-1 rounded text-xs w-24 text-right",value:w,onChange:ue=>j(ue.target.value)}):`${Y.commissionPercent.toFixed(2)} %`}),o.jsx("td",{className:"p-2 border",children:he?o.jsx("select",{className:"border p-1 rounded text-xs",value:I,onChange:ue=>_(ue.target.value),children:zH.map(ue=>o.jsx("option",{value:ue,children:ue},ue))}):Y.branch}),o.jsx("td",{className:"p-2 border",children:he?o.jsxs("div",{className:"flex gap-1 justify-center",children:[o.jsx("button",{className:"px-2 py-1 rounded bg-blue-600 text-white hover:bg-blue-700 text-xs",onClick:T,children:"Guardar"}),o.jsx("button",{className:"px-2 py-1 rounded bg-gray-200 hover:bg-gray-300 text-xs",onClick:P,children:"Cancelar"})]}):o.jsxs("div",{className:"flex gap-1 justify-center",children:[o.jsx("button",{className:"px-2 py-1 rounded bg-yellow-500 text-white hover:bg-yellow-600 text-xs",onClick:()=>k(Y),children:"Editar"}),o.jsx("button",{className:"px-2 py-1 rounded bg-red-600 text-white hover:bg-red-700 text-xs",onClick:()=>F(Y),children:"Borrar"})]})})]},Y.id)})})]})}),i&&o.jsx("p",{className:"mt-2 text-sm",children:i})]})}const Mo=t=>Math.max(0,Math.floor(Number(t||0)));function iUe(t){return Math.max(1,Mo(t.unitsPerPackage||1))}async function oUe(t){const{orderId:e,productId:r}=t;let n=Mo(t.packagesToReturn);if(!e||!r||n<=0)return;const a=nr(ht(ke,"inventory_candies"),cr("orderId","==",e),cr("productId","==",r),on("createdAt","asc")),s=await Ot(a);if(s.empty)return;const i=s.docs.map(l=>l.ref);await Hi(ke,async l=>{const c=await Promise.all(i.map(u=>l.get(u)));for(let u=0;u<i.length&&n>0;u++){const d=c[u];if(!d.exists())continue;const f=d.data(),h=iUe(f),A=n*h,p=Mo(f.remaining??0)+A,g=Math.floor(p/h);l.update(i[u],{remaining:p,remainingPackages:g,packages:g,updatedAt:fr.now()}),n=0}})}async function lUe(t){const{orderId:e,productId:r}=t,n=Mo(t.packagesToReturn);if(!e||!r||n<=0)return;const a=qt(ke,"candy_main_orders",e);await Hi(ke,async s=>{const i=await s.get(a);if(!i.exists())return;const l=i.data(),c=Array.isArray(l.items)?l.items:[];let u=!1;const d=c.map(f=>String((f==null?void 0:f.id)||"")!==String(r)?f:(u=!0,{...f,remainingPackages:Mo(f.remainingPackages)+n}));u&&s.update(a,{items:d,updatedAt:fr.now()})})}function cUe(t){if(!Array.isArray(t))return[];const e=[];for(const r of t){const n=String((r==null?void 0:r.batchId)||""),a=String((r==null?void 0:r.masterOrderId)||(r==null?void 0:r.orderId)||""),s=Mo((r==null?void 0:r.units)??(r==null?void 0:r.qty)??(r==null?void 0:r.quantity)??0),i=Math.max(1,Mo((r==null?void 0:r.unitsPerPackage)||1));!n||!a||s<=0||e.push({batchId:n,masterOrderId:a,units:s,unitsPerPackage:i})}return e}function WH(t,e){const r=Mo(t),n=Math.max(1,Mo(e));return Math.floor(r/n)}async function XH(t){if(!t)throw new Error("vendorInventoryId requerido");const e=qt(ke,"inventory_candies_sellers",t),r=await ui(e);if(!r.exists())throw new Error("No existe la orden del vendedor");const n=r.data(),a=String(n.productId||""),s=Mo(n.packages||n.remainingPackages||0),i=cUe(n.masterAllocations||n.allocations||n.allocationsByBatch);if(!i.length){const c=String(n.orderId||"");if(!c)throw new Error("La orden del vendedor no tiene orderId");if(!a)throw new Error("La orden del vendedor no tiene productId");return s<=0?(await Hi(ke,async u=>{u.delete(e)}),{restoredPackages:0,mode:"legacy"}):(await oUe({orderId:c,productId:a,packagesToReturn:s}),await lUe({orderId:c,productId:a,packagesToReturn:s}),await Hi(ke,async u=>{u.delete(e)}),{restoredPackages:s,mode:"legacy"})}let l=0;return await Hi(ke,async c=>{const u={};for(const g of i){const x=Math.max(1,Mo(g.unitsPerPackage||1)),y=Mo(g.units),b=WH(y,x);b>0&&(u[g.masterOrderId]=(u[g.masterOrderId]||0)+b)}const d=i.map(g=>qt(ke,"inventory_candies",g.batchId)),h=Object.keys(u).map(g=>qt(ke,"candy_main_orders",g)),[A,m]=await Promise.all([Promise.all(d.map(g=>c.get(g))),Promise.all(h.map(g=>c.get(g)))]);let p=0;for(let g=0;g<i.length;g++){const x=i[g],y=A[g];if(!y.exists())continue;const b=y.data(),w=Math.max(1,Mo(x.unitsPerPackage||b.unitsPerPackage||1)),j=Mo(x.units),_=Mo(b.remaining??0)+j,E=Math.floor(_/w);c.update(d[g],{remaining:_,remainingPackages:E,packages:E,updatedAt:fr.now()});const S=WH(j,w);S>0&&(p+=S)}for(let g=0;g<h.length;g++){const x=m[g];if(!x.exists())continue;const y=h[g].id,b=Mo(u[y]||0);if(b<=0)continue;const w=x.data(),j=Array.isArray(w.items)?w.items:[];let I=!1;const _=j.map(E=>String((E==null?void 0:E.id)||"")!==String(a)?E:(I=!0,{...E,remainingPackages:Mo(E.remainingPackages)+b}));I&&c.update(h[g],{items:_,updatedAt:fr.now()})}c.delete(e),l=p}),{restoredPackages:l,mode:"blind"}}const kn=t=>`C$ ${(Number(t)||0).toFixed(2)}`;function uUe(t){const e=String(t||"").trim().toUpperCase();if(e.includes("ISLA"))return"ISLA";if(e.includes("JORGE"))return"SAN_JORGE";if(e.includes("RIVAS"))return"RIVAS"}const YH=t=>Math.max(0,Math.floor(Number(t||0)));function dUe({role:t="",sellerCandyId:e="",currentUserEmail:r,roles:n}){const{refreshKey:a,refresh:s}=xc(),i=n&&n.length?n:t,l=!i||Yr(i,"admin"),c=Yr(i,"vendedor_dulces"),u=(r||"").trim().toLowerCase(),d=!l&&c,[f,h]=v.useState({}),[A,m]=v.useState([]),[p,g]=v.useState([]),[x,y]=v.useState({}),[b,w]=v.useState(null),[j,I]=v.useState([]),[_,E]=v.useState(!0),[S,k]=v.useState(""),[P,T]=v.useState(!1),[F,Y]=v.useState(null),[he,ue]=v.useState([]),[fe,me]=v.useState(""),[ne,Pe]=v.useState(""),[Ie,O]=v.useState(""),[H,R]=v.useState("0"),[M,K]=v.useState([]),[W,D]=v.useState(!1),L=v.useMemo(()=>A.find(Oe=>Oe.id===fe)||null,[fe,A]),[Z,ge]=v.useState(""),U=L==null?void 0:L.branch,[Ge,ie]=v.useState(""),J=v.useMemo(()=>p.find(Oe=>Oe.id===Ie)||null,[Ie,p]),je=v.useMemo(()=>new Set(M.map(Oe=>Oe.productId)),[M]),z=v.useMemo(()=>p.filter(Oe=>(x[Oe.id]??0)>0||je.has(Oe.id)).sort((Oe,ct)=>Oe.name.localeCompare(ct.name)),[p,x,je]),Ae=v.useMemo(()=>{const Oe=Z.trim().toLowerCase();return Oe?z.filter(ct=>`${ct.category??""} ${ct.name??""}`.toLowerCase().includes(Oe)):z},[z,Z]),ye=v.useMemo(()=>{const Oe={};return A.forEach(ct=>Oe[ct.id]=ct),Oe},[A]),Qe=v.useMemo(()=>!c||!u?null:A.find(Oe=>(Oe.email||"").trim().toLowerCase()===u)||null,[c,u,A]),st=v.useMemo(()=>{const Oe=A.find(ct=>(ct.email||"").trim().toLowerCase()===u)||null;return(Oe==null?void 0:Oe.name)||(r||"").trim()||""},[A,u,r]),ut=async()=>{try{const Oe=ht(ke,"inventory_transfers_candies");if(!c){const Kt=await Ot(Oe),ar={};Kt.forEach(Ar=>{const Gt=Ar.data(),_r=Number(Gt.packagesMoved||0),Ir=String(Gt.fromOrderKey||""),Tn=String(Gt.toOrderKey||"");Ir&&(ar[Ir]=ar[Ir]||{out:0,in:0},ar[Ir].out+=_r),Tn&&(ar[Tn]=ar[Tn]||{out:0,in:0},ar[Tn].in+=_r)}),h(ar);return}const ct=nr(Oe,cr("fromSellerId","==",e)),bt=nr(Oe,cr("toSellerId","==",e)),[Dt,xt]=await Promise.all([Ot(ct),Ot(bt)]),sr={},Xt=(Kt,ar)=>{Kt.forEach(Ar=>{const Gt=Ar.data(),_r=Number(Gt.packagesMoved||0),Ir=String(ar==="out"?Gt.fromOrderKey||"":Gt.toOrderKey||"");Ir&&(sr[Ir]=sr[Ir]||{out:0,in:0},sr[Ir][ar]+=_r)})};Xt(Dt.docs,"out"),Xt(xt.docs,"in"),h(sr)}catch(Oe){console.error(Oe),h({})}};v.useEffect(()=>{(async()=>{E(!0),k("");try{const Oe=await Ot(nr(ht(ke,"sellers_candies"),on("name","asc"))),ct=[];Oe.forEach(Ar=>{const Gt=Ar.data(),_r=Gt.branch||Gt.branchLabel||Gt.route||Gt.sucursal||Gt.location||"";ct.push({id:Ar.id,name:Gt.name||"",email:Gt.email||"",commissionPercent:Number(Gt.commissionPercent||0),branch:uUe(_r),branchLabel:_r})}),m(ct);const bt=await Ot(ht(ke,"inventory_candies")),Dt={},xt={};bt.forEach(Ar=>{var Qt;const Gt=Ar.data(),_r=String(Gt.productId||"");if(!_r)return;const Ir=Number(Gt.remainingPackages);if(Number.isFinite(Ir))Dt[_r]=(Dt[_r]||0)+Math.max(0,Math.floor(Ir));else{const Bt=Number(Gt.remaining??Gt.quantity??0),Ht=Number(Gt.unitsPerPackage||0);let Lt=0;Ht>0?Lt=Bt/Ht:Lt=Number(Gt.packages||0),Dt[_r]=(Dt[_r]||0)+Math.max(0,Lt)}const Tn=String(Gt.date||""),is=Number(((Qt=Gt.createdAt)==null?void 0:Qt.seconds)??0),fn={unitPriceRivas:Number(Gt.unitPriceRivas||0),unitPriceSanJorge:Number(Gt.unitPriceSanJorge||0),unitPriceIsla:Number(Gt.unitPriceIsla||0),date:Tn,createdAtSec:is};if(!(fn.unitPriceRivas>0||fn.unitPriceSanJorge>0||fn.unitPriceIsla>0))return;const at=xt[_r];if(!at){xt[_r]=fn;return}const zt=`${at.date}#${String(at.createdAtSec).padStart(10,"0")}`;`${fn.date}#${String(fn.createdAtSec).padStart(10,"0")}`>zt&&(xt[_r]=fn)}),Object.keys(Dt).forEach(Ar=>Dt[Ar]=Math.floor(Dt[Ar])),y(Dt);const sr=await Ot(nr(ht(ke,"products_candies"),on("name","asc"))),Xt=[];sr.forEach(Ar=>{const Gt=Ar.data(),_r=Ar.id,Ir=xt[_r];Xt.push({id:_r,name:Gt.name||"",category:Gt.category||"",providerPrice:Number(Gt.providerPrice||0),packages:Number(Gt.packages||0),unitsPerPackage:Number(Gt.unitsPerPackage||0),unitPriceRivas:Number((Ir==null?void 0:Ir.unitPriceRivas)||0),unitPriceSanJorge:Number((Ir==null?void 0:Ir.unitPriceSanJorge)||0),unitPriceIsla:Number((Ir==null?void 0:Ir.unitPriceIsla)||0)})}),g(Xt);const Kt=await Ot(c?nr(ht(ke,"inventory_candies_sellers"),cr("sellerId","==",e),on("createdAt","desc")):nr(ht(ke,"inventory_candies_sellers"),on("createdAt","desc"))),ar=[];Kt.forEach(Ar=>{const Gt=Ar.data();ar.push({id:Ar.id,sellerId:Gt.sellerId,sellerName:Gt.sellerName||"",productId:Gt.productId,productName:Gt.productName||"",category:Gt.category||"",orderId:Gt.orderId||null,packages:Number(Gt.packages||0),unitsPerPackage:Number(Gt.unitsPerPackage||0),totalUnits:Number(Gt.totalUnits||0),remainingPackages:Number(Gt.remainingPackages||0),remainingUnits:Number(Gt.remainingUnits||0),providerPrice:Number(Gt.providerPrice||0),totalRivas:Number(Gt.totalRivas||0),totalSanJorge:Number(Gt.totalSanJorge||0),totalIsla:Number(Gt.totalIsla||0),unitPriceRivas:Number(Gt.unitPriceRivas||0),unitPriceSanJorge:Number(Gt.unitPriceSanJorge||0),unitPriceIsla:Number(Gt.unitPriceIsla||0),markupPercent:Number(Gt.markupPercent||0),subtotal:Number(Gt.subtotal||0),totalVendor:Number(Gt.totalVendor||0),gainVendor:Number(Gt.gainVendor||0),unitPriceVendor:Number(Gt.unitPriceVendor||0),date:Gt.date||"",createdAt:Gt.createdAt||fr.now()})}),I(ar),await ut()}catch(Oe){console.error(Oe),k(" Error cargando datos de vendedores / pedidos.")}finally{E(!1)}})()},[a,t,e]);const De=v.useMemo(()=>c&&Qe?j.filter(Oe=>Oe.sellerId===Qe.id):j,[j,c,Qe,fe]),it=Oe=>De.filter(ct=>(ct.orderId||ct.id)===Oe),dt=v.useMemo(()=>{var ct;const Oe={};for(const bt of De){const Dt=bt.orderId||bt.id,xt=Oe[Dt],sr=bt.date||((ct=bt.createdAt)!=null&&ct.toDate?bt.createdAt.toDate().toISOString().slice(0,10):"");if(xt)xt.totalPackages+=bt.packages,xt.totalRemainingPackages+=bt.remainingPackages,xt.subtotal+=bt.subtotal,xt.totalVendor+=bt.totalVendor,sr>xt.date&&(xt.date=sr);else{const Xt=f[Dt]||{out:0,in:0};Oe[Dt]={orderKey:Dt,sellerId:bt.sellerId,sellerName:bt.sellerName,date:sr,totalPackages:bt.packages,totalRemainingPackages:bt.remainingPackages,subtotal:bt.subtotal,totalVendor:bt.totalVendor,transferredOut:Xt.out,transferredIn:Xt.in}}}return Object.values(Oe).map(bt=>{const Dt=f[bt.orderKey]||{out:0,in:0};return{...bt,transferredOut:Dt.out||0,transferredIn:Dt.in||0}}).sort((bt,Dt)=>Dt.date.localeCompare(bt.date))},[De,f]),ce=v.useMemo(()=>{const Oe={};return dt.forEach(ct=>Oe[ct.orderKey]=ct),Oe},[dt]),oe=v.useMemo(()=>{const Oe=M.reduce((Xt,Kt)=>Xt+Kt.packages,0),ct=M.reduce((Xt,Kt)=>Xt+Kt.subtotal,0),bt=M.reduce((Xt,Kt)=>Xt+Kt.totalVendor,0),Dt=M.reduce((Xt,Kt)=>Xt+Kt.gainVendor,0),xt=Number((L==null?void 0:L.commissionPercent)||0),sr=bt*xt/100;return{totalPackages:Oe,subtotal:ct,totalVendor:bt,gainVendor:Dt,commissionPercent:xt,commissionAmount:sr}},[M,L]),Me=()=>{Y(null),ue([]),me(""),Pe(""),O(""),R("0"),K([])};function Le(Oe){const ct=Number(Oe.providerPrice||0),bt=Number(Oe.packages||0),Dt=Number(Oe.unitPriceRivas||0),xt=Number(Oe.unitPriceSanJorge||0),sr=Number(Oe.unitPriceIsla||0),Xt=ct*bt,Kt=Dt*bt,ar=xt*bt,Ar=sr*bt;let Gt=Dt,_r=Kt;switch(Oe.sellerBranch){case"SAN_JORGE":Gt=xt,_r=ar;break;case"ISLA":Gt=sr,_r=Ar;break;case"RIVAS":default:Gt=Dt,_r=Kt;break}const Ir=_r-Xt;return{subtotal:Xt,totalVendor:_r,gainVendor:Ir,pricePerPackage:Gt,totalRivas:Kt,totalSanJorge:ar,totalIsla:Ar,unitPriceRivas:Dt,unitPriceSanJorge:xt,unitPriceIsla:sr}}function ve(Oe,ct){const{subtotal:bt,totalVendor:Dt,gainVendor:xt,pricePerPackage:sr,totalRivas:Xt,totalSanJorge:Kt,totalIsla:ar,unitPriceRivas:Ar,unitPriceSanJorge:Gt,unitPriceIsla:_r}=Le({providerPrice:Oe.providerPrice,unitPriceRivas:Oe.unitPriceRivas,unitPriceSanJorge:Oe.unitPriceSanJorge,unitPriceIsla:Oe.unitPriceIsla,packages:ct,sellerBranch:U});return{id:`${Oe.id}-${Date.now()}-${Math.random()}`,productId:Oe.id,productName:Oe.name,category:Oe.category,providerPrice:Oe.providerPrice,unitsPerPackage:Oe.unitsPerPackage,packages:ct,subtotal:bt,totalVendor:Dt,gainVendor:xt,pricePerPackage:sr,totalRivas:Xt,totalSanJorge:Kt,totalIsla:ar,unitPriceRivas:Ar,unitPriceSanJorge:Gt,unitPriceIsla:_r,remainingPackages:ct}}const le=()=>{if(d)return;if(!J){k("Selecciona un producto antes de agregarlo.");return}if(je.has(J.id)){k("Ese producto ya est agregado en este pedido.");return}const Oe=Number(H||0);if(Oe<=0){k("La cantidad de paquetes debe ser mayor a 0.");return}const ct=x[J.id]??0;if(!F&&Oe>ct){k(`No hay suficientes paquetes en inventario general. Disponibles: ${ct}`);return}const bt=ve(J,Oe);K(Dt=>[...Dt,bt]),O(""),R("0")},Ue=Oe=>{d||K(ct=>ct.filter(bt=>bt.id!==Oe))},rt=(Oe,ct)=>{if(d)return;const bt=Number(ct||0);K(Dt=>Dt.map(xt=>{if(xt.id!==Oe)return xt;const{subtotal:sr,totalVendor:Xt,gainVendor:Kt,pricePerPackage:ar,totalRivas:Ar,totalSanJorge:Gt,totalIsla:_r}=Le({providerPrice:xt.providerPrice,unitPriceRivas:xt.unitPriceRivas,unitPriceSanJorge:xt.unitPriceSanJorge,unitPriceIsla:xt.unitPriceIsla,packages:bt,sellerBranch:U});return{...xt,packages:bt,subtotal:sr,totalVendor:Xt,gainVendor:Kt,pricePerPackage:ar,totalRivas:Ar,totalSanJorge:Gt,totalIsla:_r}}))};async function mt(Oe,ct,bt){const Dt=await RLe({productId:Oe,quantityPacks:ct,saleDate:bt}),xt=Array.isArray(Dt==null?void 0:Dt.allocations)?Dt.allocations:[];if(!xt.length)return[];const sr=xt.map(ar=>String(ar.batchId||"")).filter(Boolean),Xt=await Promise.all(sr.map(ar=>ui(qt(ke,"inventory_candies",ar)))),Kt=[];for(let ar=0;ar<xt.length;ar++){const Ar=xt[ar],Gt=String(Ar.batchId||""),_r=YH(Ar.qty||Ar.units||Ar.quantity||0),Ir=Xt[ar];if(!Gt||_r<=0||!Ir.exists())continue;const Tn=Ir.data(),is=String(Tn.orderId||""),fn=Math.max(1,YH(Tn.unitsPerPackage||1));is&&Kt.push({batchId:Gt,masterOrderId:is,units:_r,unitsPerPackage:fn})}return Kt}const gt=async Oe=>{if(Oe.preventDefault(),W)return;if(!l){k("No tienes permiso para guardar pedidos.");return}if(k(""),!L){k("Selecciona un vendedor.");return}if(!M.length){k("Agrega al menos un producto al pedido.");return}const ct=new Date().toISOString().slice(0,10),bt=ne||ct;try{if(E(!0),D(!0),F){const Dt={};he.forEach(Xt=>{Dt[Xt.productId]=Xt});const xt={};M.forEach(Xt=>{xt[Xt.productId]=Xt});for(const Xt of Object.keys(xt)){const Kt=xt[Xt],ar=Dt[Xt],Ar=Number(Kt.packages||0),Gt=ar?Number(ar.packages||0):0,_r=Ar-Gt;if(_r>0){const Ir=await mt(Xt,_r,bt);if(ar&&Ir.length){const Tn=qt(ke,"inventory_candies_sellers",ar.id),is=await ui(Tn),fn=is.exists()?is.data():{},at=[...Array.isArray(fn.masterAllocations)?fn.masterAllocations:[],...Ir];await nn(Tn,{masterAllocations:at,updatedAt:fr.now()})}}else _r<0}let sr=[...j];for(const Xt of Object.keys(xt)){const Kt=xt[Xt],ar=Dt[Xt],Ar=p.find(Ir=>Ir.id===Xt),Gt=(Ar==null?void 0:Ar.unitsPerPackage)||Kt.unitsPerPackage||0,_r=Kt.packages>0&&Gt>0?Kt.packages*Gt:0;if(ar)await nn(qt(ke,"inventory_candies_sellers",ar.id),{sellerId:L.id,sellerName:L.name,productId:Xt,productName:Kt.productName,category:Kt.category,packages:Kt.packages,unitsPerPackage:Gt,totalUnits:_r,remainingPackages:Kt.packages,remainingUnits:_r,providerPrice:Kt.providerPrice,totalRivas:Kt.totalRivas,totalSanJorge:Kt.totalSanJorge,totalIsla:Kt.totalIsla,unitPriceRivas:Kt.unitPriceRivas,unitPriceSanJorge:Kt.unitPriceSanJorge,unitPriceIsla:Kt.unitPriceIsla,markupPercent:0,subtotal:Kt.subtotal,totalVendor:Kt.totalVendor,gainVendor:Kt.gainVendor,unitPriceVendor:Kt.pricePerPackage,date:bt,orderId:ar.orderId||F,updatedAt:fr.now()}),sr=sr.map(Ir=>Ir.id===ar.id?{...Ir,sellerId:L.id,sellerName:L.name,productId:Xt,productName:Kt.productName,category:Kt.category,packages:Kt.packages,unitsPerPackage:Gt,totalUnits:_r,remainingPackages:Kt.packages,remainingUnits:_r,providerPrice:Kt.providerPrice,totalRivas:Kt.totalRivas,totalSanJorge:Kt.totalSanJorge,totalIsla:Kt.totalIsla,unitPriceRivas:Kt.unitPriceRivas,unitPriceSanJorge:Kt.unitPriceSanJorge,unitPriceIsla:Kt.unitPriceIsla,markupPercent:0,subtotal:Kt.subtotal,totalVendor:Kt.totalVendor,gainVendor:Kt.gainVendor,unitPriceVendor:Kt.pricePerPackage,date:bt,orderId:ar.orderId||F}:Ir);else{const Ir=await mt(Xt,Kt.packages,bt),Tn={sellerId:L.id,sellerName:L.name,productId:Xt,productName:Kt.productName,category:Kt.category,orderId:F,packages:Kt.packages,unitsPerPackage:Gt,totalUnits:_r,remainingPackages:Kt.packages,remainingUnits:_r,providerPrice:Kt.providerPrice,totalRivas:Kt.totalRivas,totalSanJorge:Kt.totalSanJorge,totalIsla:Kt.totalIsla,unitPriceRivas:Kt.unitPriceRivas,unitPriceSanJorge:Kt.unitPriceSanJorge,unitPriceIsla:Kt.unitPriceIsla,markupPercent:0,subtotal:Kt.subtotal,totalVendor:Kt.totalVendor,gainVendor:Kt.gainVendor,unitPriceVendor:Kt.pricePerPackage,date:bt,createdAt:fr.now(),status:"ASIGNADO",masterAllocations:Ir};sr=[{id:(await xn(ht(ke,"inventory_candies_sellers"),Tn)).id,...Tn},...sr]}}for(const Xt of Object.keys(Dt))if(!xt[Xt]){const Kt=Dt[Xt];await XH(Kt.id),sr=sr.filter(ar=>ar.id!==Kt.id)}I(sr),k(" Pedido actualizado para el vendedor y sincronizado con inventario principal.")}else{const Dt=`ORD-${Date.now()}-${Math.random().toString(36).slice(2,8)}`;for(const xt of M){const sr=p.find(Gt=>Gt.id===xt.productId);if(!sr)continue;const Xt=xt.packages>0&&sr.unitsPerPackage>0?xt.packages*sr.unitsPerPackage:0,Kt=await mt(xt.productId,xt.packages,bt),ar={sellerId:L.id,sellerName:L.name,productId:xt.productId,productName:xt.productName,category:xt.category,orderId:Dt,packages:xt.packages,unitsPerPackage:sr.unitsPerPackage,totalUnits:Xt,remainingPackages:xt.packages,remainingUnits:Xt,providerPrice:xt.providerPrice,totalRivas:xt.totalRivas,totalSanJorge:xt.totalSanJorge,totalIsla:xt.totalIsla,unitPriceRivas:xt.unitPriceRivas,unitPriceSanJorge:xt.unitPriceSanJorge,unitPriceIsla:xt.unitPriceIsla,markupPercent:0,subtotal:xt.subtotal,totalVendor:xt.totalVendor,gainVendor:xt.gainVendor,unitPriceVendor:xt.pricePerPackage,date:bt,createdAt:fr.now(),status:"ASIGNADO",masterAllocations:Kt},Ar=await xn(ht(ke,"inventory_candies_sellers"),ar);I(Gt=>[{id:Ar.id,...ar},...Gt])}k(" Pedido asignado al vendedor y descontado del inventario.")}Me(),T(!1)}catch(Dt){console.error(Dt),k((Dt==null?void 0:Dt.message)||" Error al guardar el pedido del vendedor / ajustar inventario.")}finally{D(!1),E(!1)}},Ct=()=>{if(!L){k("Selecciona un vendedor para imprimir el pedido.");return}if(!M.length){k("No hay productos en el pedido para imprimir.");return}const Oe=ne||new Date().toISOString().slice(0,10),ct=Xt=>(Xt||"").replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;"),bt="Pedido de dulces para vendedor",Dt=M.map(Xt=>`
      <tr>
        <td>${ct(Xt.productName)}</td>
        <td class="right">${ct(Xt.category||"")}</td>
        <td class="right">${Xt.packages}</td>

        <td class="right">${kn(Xt.providerPrice)}</td>
        <td class="right">${kn(Xt.subtotal)}</td>
        <td class="right">${kn(Xt.pricePerPackage)}</td>
        <td class="right">${kn(Xt.totalVendor)}</td>
      </tr>`).join(""),xt=`<!doctype html>
<html>
<head>
  <meta charset="utf-8" />
  <title>${ct(bt)}</title>
  <style>
    *{font-family: Arial, sans-serif; box-sizing:border-box;}
    body{margin:16px;font-size:13px;}
    h1{font-size:18px;margin:0 0 4px;}
    h2{font-size:14px;margin:12px 0 6px;}
    .muted{color:#555;font-size:11px;margin-bottom:10px;}
    .grid{display:grid;grid-template-columns:repeat(2,minmax(0,1fr));gap:6px 18px;margin:10px 0 14px;}
    .card{border:1px solid #ddd;border-radius:6px;padding:6px 8px;background:#fafafa;}
    .label{font-size:11px;color:#555;margin-bottom:2px;}
    .value{font-size:14px;font-weight:bold;}
    table{width:100%;border-collapse:collapse;margin-top:8px;font-size:12px;}
    th,td{border:1px solid #ddd;padding:4px 6px;}
    th{background:#f5f5f5;text-align:left;}
    .right{text-align:right;}
    @media print{
      @page{size:A5;margin:10mm;}
      body{margin:0;font-size:12px;}
    }
  </style>
</head>
<body>
  <h1>${ct(bt)}</h1>
  <div class="muted">
    Fecha pedido: <b>${ct(Oe)}</b><br/>
    Vendedor: <b>${ct(L.name)}</b>${L.commissionPercent?` &mdash; Comisin: <b>${L.commissionPercent.toFixed(2)}%</b>`:""}${L.branchLabel?`<br/>Ruta / sucursal: <b>${ct(L.branchLabel)}</b>`:""}
  </div>

  <div class="grid">
    <div class="card">
      <div class="label">Paquetes totales del pedido</div>
      <div class="value">${oe.totalPackages}</div>
    </div>
    <div class="card">
      <div class="label">Subtotal costo (proveedor)</div>
      <div class="value">${kn(oe.subtotal)}</div>
    </div>
    <div class="card">
      <div class="label">Total vendedor (precio venta)</div>
      <div class="value">${kn(oe.totalVendor)}</div>
    </div>
    <div class="card">
      <div class="label">Comisin posible del vendedor</div>
      <div class="value">${kn(oe.commissionAmount)}</div>
    </div>
  </div>

  <h2>Detalle del pedido</h2>
  <table>
    <thead>
      <tr>
        <th>Producto</th>
        <th class="right">Categora</th>
        <th class="right">Paquetes</th>
        <th class="right">P. Proveedor (paq)</th>
        <th class="right">Subtotal</th>
        <th class="right">P. Paquete vendedor</th>
        <th class="right">Total vendedor</th>
      </tr>
    </thead>
    <tbody>
      ${Dt}
    </tbody>
  </table>

  <script>window.print()<\/script>
</body>
</html>`,sr=window.open("","_blank");if(!sr){alert("No se pudo abrir la ventana de impresin (revisa bloqueadores de pop-ups).");return}sr.document.open(),sr.document.write(xt),sr.document.close()},jt=Oe=>{const ct=De.filter(xt=>(xt.orderId||xt.id)===Oe);if(!ct.length){k("No se encontraron filas para este pedido.");return}const bt=ct[0];if(c&&Qe&&bt.sellerId!==Qe.id){k("No tienes permiso para ver este pedido.");return}Y(Oe),ue(ct),me(bt.sellerId),Pe(bt.date);const Dt=ct.map(xt=>{const sr=xt.unitPriceRivas||0,Xt=xt.unitPriceSanJorge||0,Kt=xt.unitPriceIsla||0,ar=xt.totalRivas||sr*Number(xt.packages||0),Ar=xt.totalSanJorge||Xt*Number(xt.packages||0),Gt=xt.totalIsla||Kt*Number(xt.packages||0);return{id:xt.id,productId:xt.productId,productName:xt.productName,category:xt.category,providerPrice:xt.providerPrice,unitsPerPackage:xt.unitsPerPackage,packages:xt.packages,subtotal:xt.subtotal,totalVendor:xt.totalVendor,gainVendor:xt.gainVendor,pricePerPackage:xt.unitPriceVendor,totalRivas:ar,totalSanJorge:Ar,totalIsla:Gt,unitPriceRivas:sr,unitPriceSanJorge:Xt,unitPriceIsla:Kt,remainingPackages:xt.remainingPackages}});K(Dt),O(""),R("0"),T(!0),ge("")},xe=async Oe=>{if(!l){k("No tienes permiso para borrar pedidos.");return}const ct=j.filter(xt=>(xt.orderId||xt.id)===Oe);if(!ct.length)return;const bt=ct[0].sellerName||"";if(confirm(`Eliminar COMPLETAMENTE este pedido del vendedor "${bt}"? Se regresarn los paquetes al inventario principal.`))try{E(!0);for(const xt of ct)await XH(xt.id);I(xt=>xt.filter(sr=>(sr.orderId||sr.id)!==Oe)),k(" Pedido eliminado y paquetes regresados correctamente.")}catch(xt){console.error(xt),k(" Error al eliminar el pedido / regresar paquetes.")}finally{E(!1)}},[He,Ce]=v.useState(!1),[lt,nt]=v.useState(!1),[Xe,It]=v.useState([]),[$t,Ke]=v.useState(""),[wt,q]=v.useState(""),[ae,ee]=v.useState(""),[be,_e]=v.useState(""),[Be,tt]=v.useState("0"),[ot,te]=v.useState(""),[V,re]=v.useState(!1),pe=v.useMemo(()=>dt.map(Oe=>Oe.orderKey),[dt]),Ee=v.useMemo(()=>$t?De.filter(Oe=>(Oe.orderId||Oe.id)===$t):[],[De,$t]),Se=v.useMemo(()=>Ee.filter(Oe=>Number(Oe.remainingPackages||0)>0),[Ee]),Re=v.useMemo(()=>wt&&De.find(Oe=>Oe.id===wt)||null,[De,wt]),et=v.useMemo(()=>ae?De.filter(Oe=>(Oe.orderId||Oe.id)===ae):[],[De,ae]),We=v.useMemo(()=>Re?et.filter(Oe=>Oe.productId===Re.productId):[],[et,Re]),At=async()=>{try{nt(!0);let Oe=[];if(c&&e){const ct=nr(ht(ke,"inventory_transfers_candies"),cr("fromSellerId","==",e),on("createdAt","desc")),bt=nr(ht(ke,"inventory_transfers_candies"),cr("toSellerId","==",e),on("createdAt","desc")),[Dt,xt]=await Promise.all([Ot(ct),Ot(bt)]),sr=new Set,Xt=Kt=>{Kt.forEach(ar=>{if(sr.has(ar.id))return;sr.add(ar.id);const Ar=ar.data();Oe.push({id:ar.id,createdAt:Ar.createdAt,date:Ar.date,createdByEmail:Ar.createdByEmail||"",createdByName:Ar.createdByName||"",productId:Ar.productId||"",productName:Ar.productName||"",packagesMoved:Number(Ar.packagesMoved||0),providerPrice:Number(Ar.providerPrice||0),unitPriceRivas:Number(Ar.unitPriceRivas||0),unitPriceIsla:Number(Ar.unitPriceIsla||0),toSellerId:Ar.toSellerId||"",toSellerName:Ar.toSellerName||"",toOrderKey:Ar.toOrderKey||"",toOrderLabel:Ar.toOrderLabel||"",comment:Ar.comment||"",fromSellerId:Ar.fromSellerId||"",fromSellerName:Ar.fromSellerName||"",fromOrderKey:Ar.fromOrderKey||"",fromOrderLabel:Ar.fromOrderLabel||"",fromVendorRowId:Ar.fromVendorRowId||"",toVendorRowId:Ar.toVendorRowId||""})})};Xt(Dt),Xt(xt),Oe.sort((Kt,ar)=>{var _r,Ir;const Ar=((_r=Kt.createdAt)==null?void 0:_r.seconds)||0;return(((Ir=ar.createdAt)==null?void 0:Ir.seconds)||0)-Ar})}else{const ct=nr(ht(ke,"inventory_transfers_candies"),on("createdAt","desc"));(await Ot(ct)).forEach(Dt=>{const xt=Dt.data();Oe.push({id:Dt.id,createdAt:xt.createdAt,date:xt.date,createdByEmail:xt.createdByEmail||"",createdByName:xt.createdByName||"",productId:xt.productId||"",productName:xt.productName||"",packagesMoved:Number(xt.packagesMoved||0),providerPrice:Number(xt.providerPrice||0),unitPriceRivas:Number(xt.unitPriceRivas||0),unitPriceIsla:Number(xt.unitPriceIsla||0),toSellerId:xt.toSellerId||"",toSellerName:xt.toSellerName||"",toOrderKey:xt.toOrderKey||"",toOrderLabel:xt.toOrderLabel||"",comment:xt.comment||"",fromSellerId:xt.fromSellerId||"",fromSellerName:xt.fromSellerName||"",fromOrderKey:xt.fromOrderKey||"",fromOrderLabel:xt.fromOrderLabel||"",fromVendorRowId:xt.fromVendorRowId||"",toVendorRowId:xt.toVendorRowId||""})})}It(Oe)}catch(Oe){console.error(Oe),k(" Error cargando traslados.")}finally{nt(!1)}},vt=async()=>{Ce(!0),await At()},Vt=()=>{Ke(""),q(""),ee(""),_e(""),tt("0"),te("")},or=async()=>{if(!l){k("No tienes permiso para hacer traslados.");return}k("");const Oe=Number(Be||0);if(!(Oe>0)){k("La cantidad de paquetes debe ser mayor a 0.");return}if(!ot.trim()){k("Debes escribir el motivo de la movida.");return}if(!$t||!wt){k("Selecciona el pedido origen y el producto.");return}if(!ae||!be){k("Selecciona el pedido destino y el producto destino.");return}if(wt===be){k("Origen y destino no pueden ser el mismo.");return}const ct=j.find(Dt=>Dt.id===wt)||null,bt=j.find(Dt=>Dt.id===be)||null;if(!ct||!bt){k("No se encontr la fila origen/destino.");return}if(ct.productId!==bt.productId){k("El producto destino no coincide con el producto origen.");return}if(Number(ct.remainingPackages||0)<Oe){k("El origen no tiene suficientes paquetes disponibles.");return}try{re(!0),E(!0);const Dt=qt(ke,"inventory_candies_sellers",ct.id),xt=qt(ke,"inventory_candies_sellers",bt.id),sr=fr.now(),Xt=new Date().toISOString().slice(0,10);await Hi(ke,async Kt=>{const ar=await Kt.get(Dt),Ar=await Kt.get(xt);if(!ar.exists())throw new Error("Orden origen no existe.");if(!Ar.exists())throw new Error("Orden destino no existe.");const Gt=ar.data(),_r=Ar.data(),Ir=Number(Gt.remainingPackages||0);if(Ir<Oe)throw new Error("Origen no tiene suficientes paquetes.");const Tn=Number(Gt.unitsPerPackage||_r.unitsPerPackage||0),is=Tn>0?Oe*Tn:0;Kt.update(Dt,{remainingPackages:Ir-Oe,...Tn>0?{remainingUnits:Number(Gt.remainingUnits||0)-is}:{},updatedAt:sr}),Kt.update(xt,{remainingPackages:Number(_r.remainingPackages||0)+Oe,...Tn>0?{remainingUnits:Number(_r.remainingUnits||0)+is}:{},updatedAt:sr});const fn=qt(ht(ke,"inventory_transfers_candies"));Kt.set(fn,{createdAt:sr,date:Xt,createdByEmail:(r||"").trim(),createdByName:String(st||"").trim(),productId:String(Gt.productId||""),productName:String(Gt.productName||""),packagesMoved:Oe,providerPrice:Number(Gt.providerPrice||0),unitPriceRivas:Number(Gt.unitPriceRivas||0),unitPriceIsla:Number(Gt.unitPriceIsla||0),fromSellerId:String(Gt.sellerId||""),fromSellerName:String(Gt.sellerName||""),fromOrderKey:String(Gt.orderId||ct.id||""),fromOrderLabel:String(Gt.orderId||ct.id||""),toSellerId:String(_r.sellerId||""),toSellerName:String(_r.sellerName||""),toOrderKey:String(_r.orderId||bt.id||""),toOrderLabel:String(_r.orderId||bt.id||""),fromVendorRowId:ct.id,toVendorRowId:bt.id,comment:ot.trim()})}),I(Kt=>Kt.map(ar=>{if(ar.id===ct.id){const Ar=Number(ar.unitsPerPackage||0),Gt=Ar>0?Oe*Ar:0;return{...ar,remainingPackages:Number(ar.remainingPackages||0)-Oe,remainingUnits:Ar>0?Number(ar.remainingUnits||0)-Gt:ar.remainingUnits}}if(ar.id===bt.id){const Ar=Number(ar.unitsPerPackage||0),Gt=Ar>0?Oe*Ar:0;return{...ar,remainingPackages:Number(ar.remainingPackages||0)+Oe,remainingUnits:Ar>0?Number(ar.remainingUnits||0)+Gt:ar.remainingUnits}}return ar})),await At(),h(Kt=>{const ar={...Kt},Ar=$t,Gt=ae,_r=Number(Be||0);return Ar&&(ar[Ar]=ar[Ar]||{out:0,in:0},ar[Ar].out+=_r),Gt&&(ar[Gt]=ar[Gt]||{out:0,in:0},ar[Gt].in+=_r),ar}),Vt(),k(" Traslado realizado.")}catch(Dt){console.error(Dt),k((Dt==null?void 0:Dt.message)||" Error realizando el traslado.")}finally{re(!1),E(!1)}};return o.jsxs("div",{className:"max-w-7xl mx-auto",children:[o.jsxs("div",{className:"flex items-center justify-between mb-3",children:[o.jsx("h2",{className:"text-2xl font-bold",children:"Ordenes de Rutas"}),o.jsxs("div",{className:"flex gap-2",children:[o.jsx(gc,{onClick:s,loading:_}),o.jsx("button",{className:"inline-flex items-center gap-2 bg-indigo-600 text-white px-3 py-2 rounded hover:bg-indigo-700 disabled:opacity-30 disabled:bg-gray-300",onClick:vt,type:"button",disabled:!l,children:"Traslados"}),l&&o.jsxs("button",{className:"inline-flex items-center gap-2 bg-green-600 text-white px-3 py-2 rounded hover:bg-green-700",onClick:()=>{Me(),T(!0)},children:[o.jsx("span",{className:"inline-block bg-green-700/40 rounded-full p-1",children:o.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-4 w-4",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:o.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 4v16m8-8H4"})})}),"Nuevo pedido a vendedor"]})]})]}),He&&o.jsx("div",{className:"fixed inset-0 bg-black/40 flex items-center justify-center z-[55]",children:o.jsxs("div",{className:"bg-white p-6 rounded shadow-lg w-full max-w-7xl max-h-[90vh] overflow-y-auto text-sm relative",children:[V&&o.jsx("div",{className:"absolute inset-0 bg-white/70 flex items-center justify-center z-50",children:o.jsx("div",{className:"bg-white border rounded-lg px-4 py-3 shadow text-sm font-semibold",children:"Guardando traslado..."})}),o.jsxs("div",{className:"flex items-center justify-between mb-3",children:[o.jsx("h3",{className:"text-xl font-bold",children:"Traslado de paquetes"}),o.jsx("button",{className:"px-3 py-1 rounded bg-gray-200 hover:bg-gray-300",onClick:()=>{Ce(!1),Vt()},type:"button",children:"Cerrar"})]}),o.jsxs("div",{className:"border rounded p-3 bg-gray-50 mb-4",children:[o.jsx("div",{className:"text-sm font-semibold mb-2",children:"Crear traslado (requiere motivo)"}),o.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-3",children:[o.jsxs("div",{children:[o.jsx("label",{className:"block text-sm font-semibold",children:"Pedido origen"}),o.jsxs("select",{className:"w-full border p-2 rounded",value:$t,onChange:Oe=>{Ke(Oe.target.value),q(""),ee(""),_e(""),tt("0")},disabled:!l,children:[o.jsx("option",{value:"",children:"Selecciona"}),pe.map(Oe=>{const ct=ce[Oe];return o.jsxs("option",{value:Oe,children:["Vendedor: ",(ct==null?void 0:ct.sellerName)||"","  Existencias: ","",(ct==null?void 0:ct.totalRemainingPackages)||"0"," Paquetes - Fecha Orden: ",(ct==null?void 0:ct.date)||""]},Oe)})]})]}),o.jsxs("div",{children:[o.jsx("label",{className:"block text-sm font-semibold",children:"Producto (desde el pedido origen)"}),o.jsxs("select",{className:"w-full border p-2 rounded",value:wt,onChange:Oe=>{q(Oe.target.value),ee(""),_e(""),tt("0")},disabled:!l||!$t,children:[o.jsx("option",{value:"",children:"Selecciona"}),Se.map(Oe=>o.jsxs("option",{value:Oe.id,children:["Tipo: ",Oe.category," - ",Oe.productName,"  Existencias:"," ",Number(Oe.remainingPackages||0)," Paquetes - Precio Costo: $",Oe.providerPrice]},Oe.id))]})]}),o.jsxs("div",{children:[o.jsx("label",{className:"block text-sm font-semibold",children:"Pedido destino"}),o.jsxs("select",{className:"w-full border p-2 rounded",value:ae,onChange:Oe=>{ee(Oe.target.value),_e("")},disabled:!l||!wt,children:[o.jsx("option",{value:"",children:"Selecciona"}),pe.filter(Oe=>Oe!==$t).map(Oe=>{const ct=ce[Oe];return o.jsxs("option",{value:Oe,children:["Vendedor: ",(ct==null?void 0:ct.sellerName)||"","  Existencias: ","",(ct==null?void 0:ct.totalRemainingPackages)||"0"," - Fecha Orden:"," ",(ct==null?void 0:ct.date)||""]},Oe)})]})]}),o.jsxs("div",{children:[o.jsx("label",{className:"block text-sm font-semibold",children:"Producto destino (mismo producto)"}),o.jsxs("select",{className:"w-full border p-2 rounded",value:be,onChange:Oe=>_e(Oe.target.value),disabled:!l||!ae||!Re,children:[o.jsx("option",{value:"",children:"Selecciona"}),We.map(Oe=>o.jsxs("option",{value:Oe.id,children:["Tipo: ",Oe.category," - ",Oe.productName,"  Existencias:"," ",Number(Oe.remainingPackages||0)," Paquetes - Precio Costo: $",Oe.providerPrice]},Oe.id))]}),ae&&Re&&We.length===0&&o.jsx("div",{className:"text-xs text-red-600 mt-1",children:" El pedido destino no tiene este producto. (Debe existir en el pedido destino)"})]}),o.jsxs("div",{children:[o.jsx("label",{className:"block text-sm font-semibold",children:"Cantidad paquetes a mover"}),o.jsx("input",{type:"number",min:0,className:"w-full border p-2 rounded",value:Be,onChange:Oe=>tt(Oe.target.value),disabled:!l||!wt||!be})]}),o.jsxs("div",{className:"md:col-span-2",children:[o.jsx("label",{className:"block text-sm font-semibold",children:"Motivo de movida (obligatorio)"}),o.jsx("textarea",{className:"w-full border p-2 rounded resize-y min-h-20",value:ot,onChange:Oe=>te(Oe.target.value),disabled:!l,placeholder:"Ej: Se cambi de ruta por reorganizacin",maxLength:250})]})]}),o.jsxs("div",{className:"flex justify-end gap-2 mt-3",children:[o.jsx("button",{type:"button",className:"px-3 py-2 rounded bg-gray-200 hover:bg-gray-300 disabled:opacity-60",onClick:Vt,disabled:!l||V,children:"Limpiar"}),o.jsx("button",{type:"button",className:"px-3 py-2 rounded bg-indigo-600 text-white hover:bg-indigo-700 disabled:opacity-60",onClick:or,disabled:!l||V||!wt||!be||Number(Be||0)<=0||!ot.trim(),children:"Hacer traslado"})]})]}),o.jsxs("div",{className:"bg-white rounded border overflow-x-auto",children:[o.jsxs("div",{className:"flex items-center justify-between p-2",children:[o.jsx("div",{className:"text-lg font-semibold",children:"Historial de traslados"}),o.jsx("button",{className:"px-3 py-1 rounded bg-gray-200 hover:bg-gray-300",onClick:At,disabled:lt,type:"button",children:lt?"Cargando...":"Recargar"})]}),o.jsxs("table",{className:"min-w-[1400px] text-xs md:text-sm",children:[o.jsx("thead",{className:"bg-gray-100",children:o.jsxs("tr",{className:"whitespace-nowrap",children:[o.jsx("th",{className:"p-2 border",children:"Fecha y hora"}),o.jsx("th",{className:"p-2 border",children:"Usuario"}),o.jsx("th",{className:"p-2 border",children:"Producto"}),o.jsx("th",{className:"p-2 border",children:"Cantidad paquetes"}),o.jsx("th",{className:"p-2 border",children:"Precio proveedor"}),o.jsx("th",{className:"p-2 border",children:"Precio Rivas"}),o.jsx("th",{className:"p-2 border",children:"Precio Isla"}),o.jsx("th",{className:"p-2 border",children:"Movido a vendedor"}),o.jsx("th",{className:"p-2 border",children:"Movido a orden"}),o.jsx("th",{className:"p-2 border",children:"Motivo de movida"})]})}),o.jsx("tbody",{children:lt?o.jsx("tr",{children:o.jsx("td",{colSpan:10,className:"p-4 text-center",children:"Cargando"})}):Xe.length===0?o.jsx("tr",{children:o.jsx("td",{colSpan:10,className:"p-4 text-center",children:"Sin traslados"})}):Xe.map(Oe=>{var xt,sr;const ct=((sr=(xt=Oe.createdAt)==null?void 0:xt.toDate)==null?void 0:sr.call(xt))||(Oe.createdAt?new Date(Oe.createdAt.seconds*1e3):null),bt=ct?`${ct.toISOString().slice(0,10)} ${ct.toISOString().slice(11,19)}`:Oe.date||"",Dt=(Oe.createdByName||"").trim()||(Oe.createdByEmail||"").trim()||"";return o.jsxs("tr",{className:"text-center whitespace-nowrap",children:[o.jsx("td",{className:"p-2 border",children:bt}),o.jsx("td",{className:"p-2 border",children:Dt}),o.jsx("td",{className:"p-2 border text-left",children:Oe.productName||""}),o.jsx("td",{className:"p-2 border",children:Number(Oe.packagesMoved||0)}),o.jsx("td",{className:"p-2 border",children:kn(Oe.providerPrice||0)}),o.jsx("td",{className:"p-2 border",children:kn(Oe.unitPriceRivas||0)}),o.jsx("td",{className:"p-2 border",children:kn(Oe.unitPriceIsla||0)}),o.jsx("td",{className:"p-2 border",children:Oe.toSellerName||""}),o.jsx("td",{className:"p-2 border",children:Oe.toOrderLabel||Oe.toOrderKey||""}),o.jsx("td",{className:"p-2 border text-left",children:Oe.comment||""})]},Oe.id)})})]})]}),o.jsx("div",{className:"text-xs text-gray-500 mt-2",children:"Nota: el traslado mueve EXISTENCIA (remainingPackages/remainingUnits) del pedido origen al destino."})]})}),P&&o.jsx("div",{className:"fixed inset-0 bg-black/40 flex items-center justify-center z-50",children:o.jsxs("div",{className:"bg-white p-6 rounded shadow-lg w-full max-w-5xl max-h-[90vh] overflow-y-auto text-sm relative",children:[W&&o.jsx("div",{className:"absolute inset-0 bg-white/70 flex items-center justify-center z-50",children:o.jsx("div",{className:"bg-white border rounded-lg px-4 py-3 shadow text-sm font-semibold",children:"Guardando pedido..."})}),o.jsx("h3",{className:"text-xl font-bold mb-4",children:F?"Editar pedido de vendedor":"Nuevo pedido para vendedor"}),A.length===0&&o.jsx("p",{className:"text-sm text-red-600 mb-2",children:" No hay vendedores. Primero crea vendedores en la pantalla correspondiente."}),o.jsxs("form",{onSubmit:gt,className:"space-y-4",children:[o.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:[o.jsxs("div",{className:"md:col-span-2",children:[o.jsx("label",{className:"block text-sm font-semibold",children:"Vendedor"}),o.jsxs("select",{className:"w-full border p-2 rounded",value:fe,onChange:Oe=>me(Oe.target.value),disabled:d,children:[o.jsx("option",{value:"",children:"Selecciona un vendedor"}),A.map(Oe=>o.jsxs("option",{value:Oe.id,children:[Oe.name,Oe.branchLabel?` - ${Oe.branchLabel}`:"",Oe.commissionPercent?` (${Oe.commissionPercent.toFixed(1)}% comisin)`:""]},Oe.id))]})]}),o.jsxs("div",{children:[o.jsx("label",{className:"block text-sm font-semibold",children:"Fecha del pedido"}),o.jsx("input",{type:"date",className:"w-full border p-2 rounded",value:ne,onChange:Oe=>Pe(Oe.target.value),disabled:d})]})]}),o.jsxs("div",{className:"border rounded p-3 bg-gray-50",children:[o.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-3 items-end",children:[o.jsxs("div",{className:"md:col-span-2",children:[o.jsx("label",{className:"block text-sm font-semibold",children:"Producto"}),o.jsx("input",{type:"text",className:"w-full border p-2 rounded mb-2",placeholder:"Buscar producto (nombre o categora)...",value:Z,onChange:Oe=>ge(Oe.target.value),disabled:d}),o.jsxs("select",{className:"w-full border p-2 rounded",value:Ie,onChange:Oe=>O(Oe.target.value),disabled:d,children:[o.jsx("option",{value:"",children:Z.trim()?`Resultados: ${Ae.length}`:"Selecciona un producto"}),Ae.map(Oe=>{const ct=x[Oe.id]??0,bt=[];bt.push(Oe.category?`${Oe.category} - ${Oe.name}`:Oe.name);const Dt=[];Oe.unitPriceRivas>0&&Dt.push(`R: ${kn(Oe.unitPriceRivas)}`),Oe.unitPriceSanJorge>0&&Dt.push(`SJ: ${kn(Oe.unitPriceSanJorge)}`),Oe.unitPriceIsla>0&&Dt.push(`I: ${kn(Oe.unitPriceIsla)}`),Dt.length&&bt.push(Dt.join(" | ")),bt.push(`Disp: ${ct} paq`);const xt=je.has(Oe.id);return o.jsx("option",{value:Oe.id,disabled:xt,children:xt?` (Agregado) ${bt.join("  ")}`:bt.join("  ")},Oe.id)})]})]}),o.jsxs("div",{children:[o.jsx("label",{className:"block text-sm font-semibold",children:"Paquetes / bolsas"}),o.jsx("input",{type:"number",min:0,className:"w-full border p-2 rounded",value:H,onChange:Oe=>R(Oe.target.value),disabled:d})]})]}),o.jsx("div",{className:"flex justify-end mt-3",children:o.jsx("button",{type:"button",onClick:le,className:"px-3 py-1 rounded bg-blue-600 text-white hover:bg-blue-700 disabled:opacity-50",disabled:d||!Ie||je.has(Ie),title:je.has(Ie)?"Ese producto ya est en el pedido":"",children:"Agregar producto al pedido"})})]}),o.jsx("div",{className:"bg-white rounded border overflow-x-auto",children:o.jsxs("table",{className:"min-w-[1100px] text-xs md:text-sm",children:[o.jsx("thead",{className:"bg-gray-100",children:o.jsxs("tr",{className:"whitespace-nowrap",children:[o.jsx("th",{className:"p-2 border",children:"Producto"}),o.jsx("th",{className:"p-2 border",children:"Categora"}),o.jsx("th",{className:"p-2 border",children:"Paquetes"}),o.jsx("th",{className:"p-2 border",children:"Paquetes restantes"}),o.jsx("th",{className:"p-2 border",children:"Paq x Und (ref)"}),o.jsx("th",{className:"p-2 border",children:"P. proveedor (paq)"}),o.jsx("th",{className:"p-2 border",children:"Subtotal"}),o.jsx("th",{className:"p-2 border",children:"Total Rivas"}),o.jsx("th",{className:"p-2 border",children:"Total San Jorge"}),o.jsx("th",{className:"p-2 border",children:"Total Isla"}),o.jsx("th",{className:"p-2 border",children:"P. unidad Rivas"}),o.jsx("th",{className:"p-2 border",children:"P. unidad San Jorge"}),o.jsx("th",{className:"p-2 border",children:"P. unidad Isla"}),o.jsx("th",{className:"p-2 border",children:"P. paquete vendedor"}),o.jsx("th",{className:"p-2 border",children:"Total vendedor"}),o.jsx("th",{className:"p-2 border",children:"Acciones"})]})}),o.jsx("tbody",{children:M.length===0?o.jsx("tr",{children:o.jsx("td",{colSpan:16,className:"p-4 text-center text-gray-500",children:"No hay productos en este pedido. Agrega al menos uno."})}):M.map(Oe=>o.jsxs("tr",{className:"text-center whitespace-nowrap",children:[o.jsx("td",{className:"p-2 border",children:Oe.productName}),o.jsx("td",{className:"p-2 border",children:Oe.category}),o.jsx("td",{className:"p-2 border",children:o.jsx("input",{type:"number",min:0,className:"border p-1 rounded text-right text-xs w-20",value:Oe.packages,onChange:ct=>rt(Oe.id,ct.target.value),disabled:d})}),o.jsx("td",{className:"p-2 border",children:Oe.remainingPackages??Oe.packages}),o.jsx("td",{className:"p-2 border",children:Oe.unitsPerPackage||""}),o.jsx("td",{className:"p-2 border",children:kn(Oe.providerPrice)}),o.jsx("td",{className:"p-2 border",children:kn(Oe.subtotal)}),o.jsx("td",{className:"p-2 border",children:kn(Oe.totalRivas)}),o.jsx("td",{className:"p-2 border",children:kn(Oe.totalSanJorge)}),o.jsx("td",{className:"p-2 border",children:kn(Oe.totalIsla)}),o.jsx("td",{className:"p-2 border",children:kn(Oe.unitPriceRivas)}),o.jsx("td",{className:"p-2 border",children:kn(Oe.unitPriceSanJorge)}),o.jsx("td",{className:"p-2 border",children:kn(Oe.unitPriceIsla)}),o.jsx("td",{className:"p-2 border",children:kn(Oe.pricePerPackage)}),o.jsx("td",{className:"p-2 border",children:kn(Oe.totalVendor)}),o.jsx("td",{className:"p-2 border",children:o.jsx("button",{type:"button",className:"px-2 py-1 rounded bg-red-600 text-white hover:bg-red-700 text-xs disabled:opacity-50",onClick:()=>Ue(Oe.id),disabled:d,children:"Quitar"})})]},Oe.id))})]})}),o.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-3 mt-3",children:[o.jsxs("div",{className:"p-3 border rounded bg-gray-50",children:[o.jsx("div",{className:"text-xs text-gray-600",children:"Paquetes totales del pedido"}),o.jsx("div",{className:"text-lg font-semibold",children:oe.totalPackages})]}),o.jsxs("div",{className:"p-3 border rounded bg-gray-50",children:[o.jsx("div",{className:"text-xs text-gray-600",children:"Subtotal costo (proveedor)"}),o.jsx("div",{className:"text-lg font-semibold",children:kn(oe.subtotal)})]}),o.jsxs("div",{className:"p-3 border rounded bg-gray-50",children:[o.jsx("div",{className:"text-xs text-gray-600",children:"Total vendedor (precio venta)"}),o.jsx("div",{className:"text-lg font-semibold text-green-600",children:kn(oe.totalVendor)})]}),o.jsxs("div",{className:"p-3 border rounded bg-gray-50",children:[o.jsx("div",{className:"text-xs text-gray-600",children:"Comisin posible vendedor"}),o.jsx("div",{className:"text-lg font-semibold",children:kn(oe.commissionAmount)})]})]}),o.jsxs("div",{className:"flex justify-end gap-2 mt-4",children:[l&&o.jsx("button",{type:"button",onClick:Me,className:"px-3 py-1 rounded bg-gray-200 hover:bg-gray-300 disabled:opacity-60",disabled:W,children:"Limpiar pedido"}),o.jsx("button",{type:"button",onClick:()=>{Me(),T(!1)},className:"px-3 py-1 rounded bg-gray-200 hover:bg-gray-300 disabled:opacity-60",disabled:W,children:"Cerrar"}),o.jsx("button",{type:"button",onClick:Ct,className:"px-3 py-1 rounded bg-purple-600 text-white hover:bg-purple-700",disabled:!L||M.length===0,children:"Imprimir pedido"}),l&&o.jsx("button",{type:"submit",className:"px-3 py-1 rounded bg-blue-600 text-white hover:bg-blue-700",disabled:W||!L||M.length===0,children:W?"Guardando...":"Guardar pedido"})]})]})]})}),o.jsx("div",{className:"block md:hidden space-y-3 mt-4",children:dt.map(Oe=>{var Xt,Kt;const ct=ye[Oe.sellerId],bt=Number((ct==null?void 0:ct.commissionPercent)||0),Dt=Oe.totalVendor*bt/100,xt=b===Oe.orderKey,sr=xt?it(Oe.orderKey):[];return o.jsxs("div",{className:"border rounded-lg p-3 bg-white shadow-sm",children:[o.jsxs("div",{className:"flex justify-between items-start mb-2",children:[o.jsxs("div",{children:[o.jsx("div",{className:"font-semibold text-sm",children:Oe.sellerName}),o.jsx("div",{className:"text-xs text-gray-500",children:(ct==null?void 0:ct.branchLabel)||""})]}),o.jsxs("div",{className:"text-xs text-gray-500 text-right",children:[o.jsx("div",{children:Oe.date||""}),o.jsx("div",{className:"truncate max-w-[140px]",children:Oe.orderKey})]})]}),o.jsxs("div",{className:"grid grid-cols-2 gap-2 text-xs mb-2",children:[o.jsxs("div",{children:[o.jsx("span",{className:"text-gray-500",children:"Paquetes:"})," ",o.jsx("b",{children:Oe.totalPackages})]}),o.jsxs("div",{children:[o.jsx("span",{className:"text-gray-500",children:"Restantes:"})," ",o.jsx("b",{children:Oe.totalRemainingPackages})]}),o.jsxs("div",{children:[o.jsx("span",{className:"text-gray-500",children:"Trasl. OUT:"})," ",o.jsx("b",{children:((Xt=f[Oe.orderKey])==null?void 0:Xt.out)||0})]}),o.jsxs("div",{children:[o.jsx("span",{className:"text-gray-500",children:"Trasl. IN:"})," ",o.jsx("b",{children:((Kt=f[Oe.orderKey])==null?void 0:Kt.in)||0})]})]}),o.jsxs("div",{className:"text-sm border-t pt-2 space-y-1",children:[o.jsxs("div",{className:"flex justify-between",children:[o.jsx("span",{className:"text-gray-600",children:"Subtotal:"}),o.jsx("span",{children:kn(Oe.subtotal)})]}),o.jsxs("div",{className:"flex justify-between font-semibold",children:[o.jsx("span",{children:"Total:"}),o.jsx("span",{children:kn(Oe.totalVendor)})]}),o.jsxs("div",{className:"flex justify-between text-xs text-gray-600",children:[o.jsx("span",{children:"Comisin:"}),o.jsx("span",{children:kn(Dt)})]})]}),o.jsxs("div",{className:"flex gap-2 mt-3",children:[o.jsx("button",{className:"flex-1 bg-blue-600 text-white py-2 rounded text-xs",onClick:()=>jt(Oe.orderKey),children:"Ver / Editar"}),l&&o.jsx("button",{className:"flex-1 bg-red-600 text-white py-2 rounded text-xs",onClick:()=>xe(Oe.orderKey),children:"Borrar"})]}),o.jsx("button",{type:"button",className:"w-full mt-2 border rounded py-2 text-xs bg-gray-50 hover:bg-gray-100",onClick:()=>{w(ar=>ar===Oe.orderKey?null:Oe.orderKey)},children:xt?"Ocultar detalle":"Ver detalle del pedido"}),xt&&o.jsxs("div",{className:"mt-2 border rounded bg-white overflow-hidden",children:[o.jsx("div",{className:"px-3 py-2 text-xs font-semibold bg-gray-100",children:"Detalle del pedido"}),sr.length===0?o.jsx("div",{className:"p-3 text-xs text-gray-500",children:"Sin detalle"}):o.jsx("div",{className:"divide-y",children:sr.map(ar=>o.jsxs("div",{className:"p-3 text-xs",children:[o.jsxs("div",{className:"flex justify-between gap-2",children:[o.jsxs("div",{className:"min-w-0",children:[o.jsx("div",{className:"font-semibold truncate",children:ar.productName}),o.jsx("div",{className:"text-gray-500 truncate",children:ar.category||""})]}),o.jsxs("div",{className:"text-right",children:[o.jsxs("div",{children:[o.jsx("span",{className:"text-gray-500",children:"Paq:"})," ",o.jsx("b",{children:Number(ar.packages||0)})]}),o.jsxs("div",{children:[o.jsx("span",{className:"text-gray-500",children:"Rem:"})," ",o.jsx("b",{children:Number(ar.remainingPackages||0)})]})]})]}),o.jsxs("div",{className:"grid grid-cols-2 gap-2 mt-2",children:[o.jsxs("div",{className:"flex justify-between",children:[o.jsx("span",{className:"text-gray-500",children:"Costo:"}),o.jsx("span",{children:kn(Number(ar.providerPrice||0))})]}),o.jsxs("div",{className:"flex justify-between",children:[o.jsx("span",{className:"text-gray-500",children:"Total:"}),o.jsx("span",{className:"font-semibold",children:kn(Number(ar.totalVendor||0))})]})]}),o.jsxs("div",{className:"grid grid-cols-3 gap-2 mt-2 text-[11px] text-gray-600",children:[o.jsxs("div",{className:"text-center border rounded py-1",children:["R ",kn(Number(ar.unitPriceRivas||0))]}),o.jsxs("div",{className:"text-center border rounded py-1",children:["SJ ",kn(Number(ar.unitPriceSanJorge||0))]}),o.jsxs("div",{className:"text-center border rounded py-1",children:["I ",kn(Number(ar.unitPriceIsla||0))]})]})]},ar.id))})]})]},Oe.orderKey)})}),o.jsxs("div",{className:"hidden md:block bg-white p-2 rounded shadow border w-full overflow-x-auto mt-4",children:[o.jsx("h3",{className:"text-lg font-semibold mb-2",children:"Listado de pedidos"}),o.jsxs("table",{className:"min-w-[1000px] text-xs md:text-sm",children:[o.jsx("thead",{className:"bg-gray-100",children:o.jsxs("tr",{className:"whitespace-nowrap",children:[o.jsx("th",{className:"p-2 border",children:"Fecha"}),o.jsx("th",{className:"p-2 border",children:"Vendedor"}),o.jsx("th",{className:"p-2 border",children:"Paquetes totales"}),o.jsx("th",{className:"p-2 border",children:"Paquetes restantes"}),o.jsx("th",{className:"p-2 border",children:"Paquetes Trasladados"}),o.jsx("th",{className:"p-2 border",children:"Paquetes Adicionales"}),o.jsx("th",{className:"p-2 border",children:"Subtotal costo"}),o.jsx("th",{className:"p-2 border",children:"Total vendedor"}),o.jsx("th",{className:"p-2 border",children:"Comisin posible"}),o.jsx("th",{className:"p-2 border",children:"Acciones"})]})}),o.jsx("tbody",{children:_?o.jsx("tr",{children:o.jsx("td",{className:"p-4 text-center",colSpan:8,children:"Cargando"})}):dt.length===0?o.jsx("tr",{children:o.jsx("td",{className:"p-4 text-center",colSpan:8,children:"Sin pedidos asignados a vendedores."})}):dt.map(Oe=>{var xt,sr;const ct=ye[Oe.sellerId],bt=Number((ct==null?void 0:ct.commissionPercent)||0),Dt=Oe.totalVendor*bt/100;return o.jsxs("tr",{className:"text-center whitespace-nowrap",children:[o.jsx("td",{className:"p-2 border",children:Oe.date||""}),o.jsxs("td",{className:"p-2 border",children:[Oe.sellerName,ct!=null&&ct.branchLabel?` - ${ct.branchLabel}`:""]}),o.jsx("td",{className:"p-2 border",children:Oe.totalPackages}),o.jsx("td",{className:"p-2 border",children:Oe.totalRemainingPackages}),o.jsx("td",{className:"p-2 border",children:((xt=f[Oe.orderKey])==null?void 0:xt.out)||0}),o.jsx("td",{className:"p-2 border",children:((sr=f[Oe.orderKey])==null?void 0:sr.in)||0}),o.jsx("td",{className:"p-2 border",children:kn(Oe.subtotal)}),o.jsx("td",{className:"p-2 border",children:kn(Oe.totalVendor)}),o.jsx("td",{className:"p-2 border",children:kn(Dt)}),o.jsx("td",{className:"p-2 border",children:o.jsxs("div",{className:"flex gap-1 justify-center",children:[o.jsx("button",{className:"px-2 py-1 rounded bg-blue-600 text-white hover:bg-blue-700 text-xs",onClick:()=>jt(Oe.orderKey),children:"Ver / Editar"}),l&&o.jsx("button",{className:"px-2 py-1 rounded bg-red-600 text-white hover:bg-red-700 text-xs",onClick:()=>xe(Oe.orderKey),children:"Borrar"})]})})]},Oe.orderKey)})})]})]}),S&&o.jsx("p",{className:"mt-2 text-sm",children:S})]})}const jn=t=>Math.max(0,Math.floor(Number(t)||0)),cb=t=>Math.round(t||0);function Lne(t){const e=Math.max(1,jn(t.unitsPerPackage||1)),r=jn(t.totalUnits||0),n=jn(t.quantity||0),a=jn(t.packages||0);return r>0?r:n>0?n:a>0?a*e:0}function fUe(t){const e=Number(t.remaining);return Number.isFinite(e)&&e>0?Math.floor(e):Lne(t)}function JH(t){const e=Number(t.remainingPackages);if(Number.isFinite(e))return Math.max(0,Math.floor(e));const r=Math.max(1,jn(t.unitsPerPackage||1)),n=fUe(t);return Math.max(0,Math.floor(n/r))}function AUe(t){const e=Math.max(1,jn(t.unitsPerPackage||1)),r=Lne(t);return Math.max(0,Math.floor(r/e))}function ub(t){return String(t??"").trim().toLowerCase().replace(/\s+/g," ")}function sf(t){const e=String(t??"").trim();if(!e)return 0;const r=e.replace(/,/g,"."),n=Number(r);return Number.isFinite(n)?n:0}function eA(t,e){const r={};Object.keys(t||{}).forEach(n=>r[ub(n)]=t[n]);for(const n of e){const a=r[ub(n)];if(a!=null&&String(a).trim()!=="")return a}}function Nm(t,e,r){const n=t*e,a=Math.min(Math.max(r.marginR,0),99.9)/100,s=Math.min(Math.max(r.marginSJ,0),99.9)/100,i=Math.min(Math.max(r.marginIsla,0),99.9)/100,l=e>0&&a<1?n/(1-a):n,c=e>0&&s<1?n/(1-s):n,u=e>0&&i<1?n/(1-i):n,d=l-n,f=c-n,h=u-n,A=e>0?cb(l/e):0,m=e>0?cb(c/e):0,p=e>0?cb(u/e):0;return{subtotal:n,totalRivas:l,totalSanJorge:c,totalIsla:u,gainRivas:d,gainSanJorge:f,gainIsla:h,unitPriceRivas:A,unitPriceSanJorge:m,unitPriceIsla:p}}function hUe(t){return Number(t.gainRivas||0)}function mUe(t){return Number(t.gainIsla||0)}function ZH(t,e,r){const n=hUe(t),a=mUe(t),s=Number(t.subtotal||0),i=e>0&&r>0?e*s/r:0;return{...t,grossProfit:n,grossProfitIsla:a,logisticAllocated:i}}function pUe(){const{refreshKey:t,refresh:e}=xc(),[r,n]=v.useState(""),[a,s]=v.useState(!0),[i,l]=v.useState(!1),[c,u]=v.useState([]),[d,f]=v.useState(!1),[h,A]=v.useState([]),[m,p]=v.useState({}),[g,x]=v.useState(!1),[y,b]=v.useState(null),[w,j]=v.useState(""),[I,_]=v.useState(""),[E,S]=v.useState("20"),[k,P]=v.useState("15"),[T,F]=v.useState("30"),[Y,he]=v.useState("0"),[ue,fe]=v.useState([]),[me,ne]=v.useState(""),[Pe,Ie]=v.useState(""),[O,H]=v.useState(""),[R,M]=v.useState("1"),[K,W]=v.useState("0"),[D,L]=v.useState("DATOS"),[Z,ge]=v.useState(""),[U,Ge]=v.useState(1),ie=15,J=v.useMemo(()=>Math.max(1,Math.ceil(h.length/ie)),[h.length]);v.useEffect(()=>Ge(1),[h.length]);const je=v.useMemo(()=>{const q=(U-1)*ie;return h.slice(q,q+ie)},[h,U]),z=v.useMemo(()=>{const q=new Set;for(const ae of c){const ee=String(ae.category||"").trim();ee&&q.add(ee)}return Array.from(q).sort((ae,ee)=>ae.localeCompare(ee,"es"))},[c]);v.useEffect(()=>{!me&&z.length>0&&ne(z[0])},[z]);const Ae=async()=>{f(!0);try{const q=await Ot(nr(ht(ke,"products_candies"),on("createdAt","desc"))),ae=[];q.forEach(ee=>{const be=ee.data();ae.push({id:ee.id,name:String(be.name??"").trim(),category:String(be.category??"").trim()||"Caramelo",providerPrice:Number(be.providerPrice??0),unitsPerPackage:Number(be.unitsPerPackage??1)})}),u(ae)}catch(q){console.error(q),n(" Error cargando catlogo de dulces.")}finally{f(!1)}};v.useEffect(()=>{Ae()},[t]);const ye=v.useMemo(()=>(me.trim().length>0?c.filter(ae=>ae.category===me):c).sort((ae,ee)=>ae.name.localeCompare(ee.name,"es")),[c,me]);v.useEffect(()=>{if(!Pe){H(""),M("1");return}const q=c.find(ae=>ae.id===Pe);q&&(H(String(q.providerPrice??0)),M(String(q.unitsPerPackage??1)))},[Pe,c]);const Qe=()=>{b(null),j(""),_(""),fe([]),ne(z[0]||""),Ie(""),H(""),W("0"),M("1"),S("20"),P("15"),F("30"),he("0"),L("DATOS"),ge("")},st=()=>{if(n(""),!Pe){n("Selecciona un producto del catlogo.");return}const q=c.find(V=>V.id===Pe);if(!q){n("Producto de catlogo no encontrado (refresca).");return}const ae=Number(q.providerPrice||0),ee=jn(K||0),be=jn(q.unitsPerPackage||0);if(ae<0){n("El precio proveedor no puede ser negativo.");return}if(ee<=0){n("Los paquetes deben ser mayor que 0.");return}if(be<=0){n("Las unidades por paquete deben ser mayor que 0.");return}const _e=Number(E||0),Be=Number(k||0),tt=Number(T||0),ot=Nm(ae,ee,{marginR:_e,marginSJ:Be,marginIsla:tt});if(ue.find(V=>V.id===q.id))fe(V=>V.map(re=>{if(re.id!==q.id)return re;const pe=jn(re.packages||0)+ee,Ee=Nm(ae,pe,{marginR:Number(re.marginRivas??_e),marginSJ:Number(re.marginSanJorge??Be),marginIsla:Number(re.marginIsla??tt)}),Re=jn(re.remainingPackages??re.packages)+ee;return{...re,providerPrice:ae,unitsPerPackage:be,packages:pe,remainingPackages:Re,...Ee}}));else{const V={id:q.id,name:q.name,category:q.category,providerPrice:ae,packages:ee,unitsPerPackage:be,marginRivas:_e,marginSanJorge:Be,marginIsla:tt,subtotal:ot.subtotal,totalRivas:ot.totalRivas,totalSanJorge:ot.totalSanJorge,totalIsla:ot.totalIsla,gainRivas:ot.gainRivas,gainSanJorge:ot.gainSanJorge,gainIsla:ot.gainIsla,unitPriceRivas:ot.unitPriceRivas,unitPriceSanJorge:ot.unitPriceSanJorge,unitPriceIsla:ot.unitPriceIsla,remainingPackages:ee};fe(re=>[...re,V])}Ie(""),W("0"),L("ITEMS")},ut=q=>{fe(ae=>ae.filter(ee=>ee.id!==q))},De=(q,ae,ee)=>{fe(be=>be.map(_e=>{if(_e.id!==q)return _e;let Be={..._e};if(ae==="packages"&&(Be.packages=jn(ee||0)),ae==="unitsPerPackage"&&(Be.unitsPerPackage=jn(ee||0)),ae==="marginRivas"&&(Be.marginRivas=Number(ee||0)),ae==="marginIsla"&&(Be.marginIsla=Number(ee||0)),ae==="marginSanJorge"&&(Be.marginSanJorge=Number(ee||0)),ae==="packages"||ae==="marginRivas"||ae==="marginIsla"||ae==="marginSanJorge"){const tt=Nm(Be.providerPrice,Be.packages,{marginR:Number(Be.marginRivas||0),marginSJ:Number(Be.marginSanJorge||0),marginIsla:Number(Be.marginIsla||0)});Be={...Be,...tt}}return(Be.remainingPackages===void 0||Be.remainingPackages===null)&&(Be.remainingPackages=Be.packages),Be}))},it=v.useMemo(()=>{const q=ue.reduce((Be,tt)=>Be+jn(tt.packages),0),ae=ue.reduce((Be,tt)=>Be+Number(tt.subtotal||0),0),ee=ue.reduce((Be,tt)=>Be+Number(tt.totalRivas||0),0),be=ue.reduce((Be,tt)=>Be+Number(tt.totalSanJorge||0),0),_e=ue.reduce((Be,tt)=>Be+Number(tt.totalIsla||0),0);return{totalPackages:q,subtotal:ae,totalRivas:ee,totalSanJorge:be,totalIsla:_e}},[ue]),dt=v.useMemo(()=>{const q=Math.max(0,sf(Y||0)),ae=Number(it.subtotal||0),ee=ue.map(tt=>ZH(tt,q,ae)),be=ee.reduce((tt,ot)=>tt+Number(ot.grossProfit||0),0),_e=ee.reduce((tt,ot)=>tt+Number(ot.grossProfitIsla||0),0),Be=ee.reduce((tt,ot)=>tt+Number(ot.logisticAllocated||0),0);return{items:ee,logisticsTotal:q,grossTotal:be,grossIslaTotal:_e,logisticAllocatedTotal:Be}},[ue,Y,it.subtotal]),ce=v.useMemo(()=>{const q=String(Z||"").trim().toLowerCase();return q?dt.items.filter(ae=>{const ee=String(ae.name||"").toLowerCase(),be=String(ae.category||"").toLowerCase();return ee.includes(q)||be.includes(q)}):dt.items},[dt.items,Z]),[oe,Me]=v.useState(1),Le=15,ve=v.useMemo(()=>Math.max(1,Math.ceil(ce.length/Le)),[ce.length]);v.useEffect(()=>Me(1),[ce.length]);const le=v.useMemo(()=>{const q=(oe-1)*Le;return ce.slice(q,q+Le)},[ce,oe]),[Ue,rt]=v.useState({});v.useEffect(()=>rt({}),[ce.length]);const[mt,gt]=v.useState({});v.useEffect(()=>{const q={};for(const ae of h)ae&&ae.id&&(q[ae.id]=!1);gt(q)},[h]);const Ct=v.useMemo(()=>({totalPackages:it.totalPackages,subtotalCosto:it.subtotal,esperadoRivas:it.totalRivas,esperadoIsla:it.totalIsla,gastosLogisticos:dt.logisticsTotal,utilidadBrutaRivas:dt.grossTotal,utilidadBrutaIsla:dt.grossIslaTotal}),[it,dt]),jt=()=>{if(n(""),!c.length){n(" No hay catlogo cargado para generar plantilla.");return}const q=Number(E||0),ae=Number(T||0),ee=c.slice().sort((te,V)=>te.name.localeCompare(V.name,"es")).map(te=>({Producto:te.name,Paquetes:"","Margen rivas":q,"Margen Isla":ae,"P. unidad Rivas":"","P. unidad Isla":""})),be=[{Campo:"Gastos logisticos",Valor:sf(Y||0)}],_e=Is.book_new(),Be=Is.json_to_sheet(ee),tt=Is.json_to_sheet(be);Is.book_append_sheet(_e,Be,"Productos"),Is.book_append_sheet(_e,tt,"Config");const ot=I&&String(I).trim()||new Date().toISOString().slice(0,10);pk(_e,`plantilla_orden_maestra_${ot}.xlsx`)},xe=()=>{if(n(""),!dt.items.length){n(" No hay items para exportar.");return}const q=dt.items.slice().sort((Be,tt)=>Be.name.localeCompare(tt.name,"es")).map(Be=>({Categora:Be.category,Producto:Be.name,Paquetes:jn(Be.packages),"Paquetes restantes":jn(Be.remainingPackages??Be.packages),"Und x Paquete":jn(Be.unitsPerPackage),"Precio proveedor":Number(Be.providerPrice||0),Facturado:Number(Be.subtotal||0),"Esperado Rivas":Number(Be.totalRivas||0),"Esperado Isla":Number(Be.totalIsla||0),"MV Rivas":Number(Be.marginRivas||0),"MV Isla":Number(Be.marginIsla||0),"Utilidad Bruta":Number(Be.grossProfit||0),"Utilidad Bruta Isla":Number(Be.grossProfitIsla||0),"Prorrateo logistico":Number(Be.logisticAllocated||0),"Precio Rivas":Number(Be.unitPriceRivas||0),"Precio Isla":Number(Be.unitPriceIsla||0)})),ae=[{KPI:"Paquetes totales",Valor:Ct.totalPackages},{KPI:"Subtotal costo",Valor:Ct.subtotalCosto},{KPI:"Esperado Rivas",Valor:Ct.esperadoRivas},{KPI:"Esperado Isla",Valor:Ct.esperadoIsla},{KPI:"Gastos logsticos",Valor:Ct.gastosLogisticos},{KPI:"Utilidad Bruta Rivas",Valor:Ct.utilidadBrutaRivas},{KPI:"Utilidad Bruta Isla",Valor:Ct.utilidadBrutaIsla}],ee=Is.book_new();Is.book_append_sheet(ee,Is.json_to_sheet(q),"Productos"),Is.book_append_sheet(ee,Is.json_to_sheet(ae),"Resumen");const be=I&&String(I).trim()||new Date().toISOString().slice(0,10),_e=w&&String(w).trim()||`Orden_${be}`;pk(ee,`orden_maestra_${_e.replace(/[^\w\-]+/g,"_")}_${be}.xlsx`)},He=v.useRef(null),[Ce,lt]=v.useState(!1),nt=()=>{var q;if(!c.length){n(" Catlogo no cargado todava. Esper y prob de nuevo.");return}(q=He.current)==null||q.click()},Xe=async q=>{var ee;const ae=(ee=q.target.files)==null?void 0:ee[0];if(ae){q.target.value="",lt(!0),n("");try{const be=await ae.arrayBuffer(),_e=A2(be,{type:"array"}),Be=_e.SheetNames||[],tt=_e.Sheets.Productos||_e.Sheets.Plantilla||_e.Sheets[Be[0]];if(!tt){n(" No se encontr hoja de Productos/Plantilla.");return}const ot=Is.sheet_to_json(tt,{defval:""});if(!ot.length){n(" El Excel viene vaco.");return}let te=0;const V=_e.Sheets.Config;if(V){const Re=Is.sheet_to_json(V,{defval:""}),et=new Map;for(const We of Re){const At=ub(eA(We,["Campo","Key","Nombre"])??""),vt=eA(We,["Valor","Value"]);At&&et.set(At,vt)}et.has("gastos logisticos")&&(te=Math.max(0,sf(et.get("gastos logisticos"))))}else for(const Re of ot){const et=eA(Re,["Gastos","Gasto","Gastos logisticos","Logistica"]),We=sf(et);if(We>0){te=We;break}}he(String(te||0));const re=new Map;for(const Re of c)re.set(ub(Re.name),Re);const pe=[],Ee=new Map;for(let Re=0;Re<ot.length;Re++){const et=ot[Re],We=eA(et,["Producto","Product","Nombre","Name"]),At=eA(et,["Paquetes","Packages"]),vt=eA(et,["Margen rivas","Margen Rivas","MV Rivas"]),Vt=eA(et,["Margen Isla","Margen isla","MV Isla"]),or=eA(et,["P. unidad Rivas","P unidad Rivas","Precio Rivas"]),Oe=eA(et,["P. unidad Isla","P unidad Isla","Precio Isla"]),ct=ub(We);if(!ct)continue;const bt=re.get(ct);if(!bt){pe.push(`Fila ${Re+2}: Producto no existe en catlogo: "${String(We).trim()}".`);continue}const Dt=Math.floor(sf(At));if(Dt<=0){pe.push(`Fila ${Re+2}: "Paquetes" invlido para "${bt.name}".`);continue}const xt=String(vt??"").trim()!==""?sf(vt):Number(E||0),sr=String(Vt??"").trim()!==""?sf(Vt):Number(T||0),Xt=Math.floor(sf(or)),Kt=Math.floor(sf(Oe)),ar=Ee.get(bt.id);ar?Ee.set(bt.id,{packages:ar.packages+Dt,mR:xt,mI:sr,puR:Xt>0?Xt:ar.puR,puI:Kt>0?Kt:ar.puI}):Ee.set(bt.id,{packages:Dt,mR:xt,mI:sr,puR:Xt>0?Xt:void 0,puI:Kt>0?Kt:void 0})}const Se=[];Ee.forEach((Re,et)=>{const We=c.find(Kt=>Kt.id===et);if(!We)return;const At=Number(We.providerPrice||0),vt=Math.max(1,jn(We.unitsPerPackage||1)),Vt=Math.max(1,jn(Re.packages)),or=At*Vt,Oe=Number(Re.puR||0),ct=Number(Re.puI||0),bt=Oe>0||ct>0;let Dt=Re.mR,xt=Re.mI;const sr=Number(k||0);let Xt;if(bt){const Kt=Nm(At,Vt,{marginR:Dt,marginSJ:sr,marginIsla:xt}),ar=Oe>0?Oe*Vt:Kt.totalRivas,Ar=ct>0?ct*Vt:Kt.totalIsla,Gt=_r=>{if(!Number.isFinite(_r)||_r<=0)return 0;const Ir=(1-or/_r)*100;return Math.min(Math.max(Ir,0),99.9)};Oe>0&&(Dt=Gt(ar)),ct>0&&(xt=Gt(Ar)),Xt={subtotal:or,totalRivas:ar,totalSanJorge:Kt.totalSanJorge,totalIsla:Ar,gainRivas:ar-or,gainSanJorge:Kt.gainSanJorge,gainIsla:Ar-or,unitPriceRivas:Vt>0?cb(ar/Vt):0,unitPriceSanJorge:Kt.unitPriceSanJorge,unitPriceIsla:Vt>0?cb(Ar/Vt):0}}else Xt=Nm(At,Vt,{marginR:Dt,marginSJ:sr,marginIsla:xt});Se.push({id:We.id,name:We.name,category:We.category,providerPrice:At,packages:Vt,unitsPerPackage:vt,marginRivas:Dt,marginSanJorge:sr,marginIsla:xt,subtotal:Xt.subtotal,totalRivas:Xt.totalRivas,totalSanJorge:Xt.totalSanJorge,totalIsla:Xt.totalIsla,gainRivas:Xt.gainRivas,gainSanJorge:Xt.gainSanJorge,gainIsla:Xt.gainIsla,unitPriceRivas:Xt.unitPriceRivas,unitPriceSanJorge:Xt.unitPriceSanJorge,unitPriceIsla:Xt.unitPriceIsla,remainingPackages:Vt})}),fe(Re=>{const et=new Map;Re.forEach(We=>et.set(We.id,We));for(const We of Se){const At=et.get(We.id);if(!At)et.set(We.id,We);else{const vt=jn(At.packages)+jn(We.packages),Vt=Nm(At.providerPrice,vt,{marginR:We.marginRivas,marginSJ:Number(At.marginSanJorge||0),marginIsla:We.marginIsla});et.set(We.id,{...At,packages:vt,marginRivas:We.marginRivas,marginIsla:We.marginIsla,remainingPackages:jn(At.remainingPackages??At.packages)+jn(We.packages),...Vt})}}return Array.from(et.values()).sort((We,At)=>We.name.localeCompare(At.name,"es"))}),L("ITEMS"),pe.length?(n(` Importado con detalles. Errores: ${pe.length}.`),console.warn("Errores import:",pe)):n(` Importacin lista: ${Se.length} productos agregados.`)}catch(be){console.error(be),n(" Error importando Excel. Revis hojas: Productos + Config (o Plantilla).")}finally{lt(!1)}}};v.useEffect(()=>{(async()=>{s(!0);try{const q=nr(ht(ke,"candy_main_orders"),on("createdAt","desc")),ae=await Ot(q),ee=[];ae.forEach(Be=>{const tt=Be.data();ee.push({id:Be.id,name:tt.name??"",date:tt.date??"",totalPackages:Number(tt.totalPackages??0),subtotal:Number(tt.subtotal??0),totalRivas:Number(tt.totalRivas??0),totalSanJorge:Number(tt.totalSanJorge??0),totalIsla:Number(tt.totalIsla??0),marginRivas:Number(tt.marginRivas??20),marginSanJorge:Number(tt.marginSanJorge??15),marginIsla:Number(tt.marginIsla??30),logisticsCost:Number(tt.logisticsCost??0),createdAt:tt.createdAt??fr.now()})}),A(ee);const be=await Ot(ht(ke,"inventory_candies")),_e={};be.forEach(Be=>{const tt=Be.data(),ot=tt.orderId;if(!ot)return;const te=AUe(tt),V=JH(tt);_e[ot]||(_e[ot]={orderId:ot,totalPackages:0,remainingPackages:0}),_e[ot].totalPackages+=te,_e[ot].remainingPackages+=V}),p(_e)}catch(q){console.error(q),n(" Error cargando pedidos generales.")}finally{s(!1)}})()},[t]);const It=q=>{var ae;return q.date?q.date:(ae=q.createdAt)!=null&&ae.toDate?q.createdAt.toDate().toISOString().slice(0,10):""},$t=async q=>{if(q.preventDefault(),n(""),l(!0),!ue.length){n("Agrega al menos un producto a la orden.");return}try{const ae=new Date().toISOString().slice(0,10),ee=I||ae,be=Number(E||0),_e=Number(k||0),Be=Number(T||0),tt=Math.max(0,sf(Y||0));for(const Re of ue){if(!String(Re.name||"").trim()){n("Hay un producto sin nombre en el pedido.");return}if(Number(Re.providerPrice||0)<0){n(`El precio proveedor no puede ser negativo (producto: ${Re.name}).`);return}if(jn(Re.packages)<=0){n(`Los paquetes deben ser mayor que 0 (producto: ${Re.name}).`);return}if(jn(Re.unitsPerPackage)<=0){n(`Las unidades por paquete deben ser mayor que 0 (producto: ${Re.name}).`);return}}const ot=Number(it.subtotal||0),te=ue.map(Re=>ZH(Re,tt,ot)),V={totalPackages:it.totalPackages,subtotal:it.subtotal,totalRivas:it.totalRivas,totalSanJorge:it.totalSanJorge,totalIsla:it.totalIsla},re={name:w||`Pedido ${ee}`,date:ee,totalPackages:V.totalPackages,subtotal:V.subtotal,totalRivas:V.totalRivas,totalSanJorge:V.totalSanJorge,totalIsla:V.totalIsla,marginRivas:be,marginSanJorge:_e,marginIsla:Be,logisticsCost:tt,items:te};if(y){await nn(qt(ke,"candy_main_orders",y),{...re});for(const We of te){const At=await Ot(nr(ht(ke,"inventory_candies"),cr("orderId","==",y),cr("productId","==",We.id))),vt=Math.max(1,jn(We.unitsPerPackage||1)),Vt=jn(We.packages)*vt;if(At.empty)await xn(ht(ke,"inventory_candies"),{productId:We.id,productName:We.name,category:We.category,measurement:"unidad",quantity:Vt,remaining:Vt,packages:jn(We.packages),remainingPackages:jn(We.packages),unitsPerPackage:vt,totalUnits:Vt,providerPrice:We.providerPrice,subtotal:We.subtotal,totalRivas:We.totalRivas,totalSanJorge:We.totalSanJorge,totalIsla:We.totalIsla,gainRivas:We.gainRivas,gainSanJorge:We.gainSanJorge,gainIsla:We.gainIsla,unitPriceRivas:We.unitPriceRivas,unitPriceSanJorge:We.unitPriceSanJorge,unitPriceIsla:We.unitPriceIsla,date:ee,createdAt:fr.now(),status:"PENDIENTE",orderId:y});else for(const or of At.docs){const Oe=or.data(),ct=jn(Oe.totalUnits??0),bt=jn(Oe.remaining??ct),Dt=Vt-ct,xt=Math.max(0,bt+Dt),sr=Math.max(0,Math.floor(xt/vt));await nn(qt(ke,"inventory_candies",or.id),{productName:We.name,category:We.category,unitsPerPackage:vt,totalUnits:Vt,quantity:Vt,remaining:xt,packages:jn(We.packages),remainingPackages:sr,providerPrice:We.providerPrice,subtotal:We.subtotal,totalRivas:We.totalRivas,totalSanJorge:We.totalSanJorge,totalIsla:We.totalIsla,gainRivas:We.gainRivas,gainSanJorge:We.gainSanJorge,gainIsla:We.gainIsla,unitPriceRivas:We.unitPriceRivas,unitPriceSanJorge:We.unitPriceSanJorge,unitPriceIsla:We.unitPriceIsla,date:ee})}}const Re=await Ot(nr(ht(ke,"inventory_candies"),cr("orderId","==",y))),et=new Set(te.map(We=>We.id));for(const We of Re.docs){const At=We.data(),vt=String(At.productId||"");vt&&!et.has(vt)&&await Cn(qt(ke,"inventory_candies",We.id))}A(We=>We.map(At=>At.id===y?{...At,name:re.name,date:re.date,totalPackages:re.totalPackages,subtotal:re.subtotal,totalRivas:re.totalRivas,totalSanJorge:re.totalSanJorge,totalIsla:re.totalIsla,marginRivas:re.marginRivas,marginSanJorge:re.marginSanJorge,marginIsla:re.marginIsla,logisticsCost:re.logisticsCost}:At)),n(" Orden maestra actualizada (pedido + inventario)."),Qe(),x(!1),e();return}const Ee=(await xn(ht(ke,"candy_main_orders"),{...re,createdAt:fr.now()})).id,Se=tg(ke);for(const Re of te){const et=Math.max(1,jn(Re.unitsPerPackage||1)),We=jn(Re.packages)*et,At=qt(ht(ke,"inventory_candies"));Se.set(At,{productId:Re.id,productName:Re.name,category:Re.category,measurement:"unidad",quantity:We,remaining:We,packages:jn(Re.packages),remainingPackages:jn(Re.packages),unitsPerPackage:et,totalUnits:We,providerPrice:Re.providerPrice,subtotal:Re.subtotal,totalRivas:Re.totalRivas,totalSanJorge:Re.totalSanJorge,totalIsla:Re.totalIsla,gainRivas:Re.gainRivas,gainSanJorge:Re.gainSanJorge,gainIsla:Re.gainIsla,unitPriceRivas:Re.unitPriceRivas,unitPriceSanJorge:Re.unitPriceSanJorge,unitPriceIsla:Re.unitPriceIsla,date:ee,createdAt:fr.now(),status:"PENDIENTE",orderId:Ee})}await Se.commit(),n(" Orden maestra creada y registrada en inventario."),Qe(),x(!1),e()}catch(ae){console.error(ae),n(" Error al guardar orden maestra.")}finally{l(!1)}},Ke=async q=>{try{s(!0),n(""),b(q.id),j(q.name),_(q.date),S(String(q.marginRivas??20)),P(String(q.marginSanJorge??15)),F(String(q.marginIsla??30));const ae=Number(q.logisticsCost??0);he(String(ae||0)),L("DATOS");const ee=qt(ke,"candy_main_orders",q.id),be=await ui(ee);if(!be.exists()){n(" No se encontr la orden.");return}const _e=be.data(),Be=Array.isArray(_e.items)?_e.items:[],tt=await Ot(nr(ht(ke,"inventory_candies"),cr("orderId","==",q.id))),ot={};tt.forEach(V=>{const re=V.data(),pe=String(re.productId||"");if(!pe)return;const Ee=JH(re);ot[pe]=(ot[pe]||0)+Ee});const te=Be.map(V=>{const re=c.find(At=>At.id===V.id),pe=Number((re==null?void 0:re.providerPrice)??V.providerPrice??0),Ee=Math.max(1,jn((re==null?void 0:re.unitsPerPackage)??V.unitsPerPackage??1)),Se=Number(V.marginRivas??0),Re=Number(V.marginSanJorge??Number(k||0)),et=Number(V.marginIsla??0),We=Nm(pe,jn(V.packages||0),{marginR:Se,marginSJ:Re,marginIsla:et});return{...V,name:String((re==null?void 0:re.name)??V.name??"").trim(),category:String((re==null?void 0:re.category)??V.category??"Caramelo").trim(),providerPrice:pe,unitsPerPackage:Ee,remainingPackages:ot[V.id]??V.remainingPackages??V.packages??0,...We}});fe(te),x(!0)}catch(ae){console.error(ae),n(" Error al abrir orden maestra.")}finally{s(!1)}},wt=async q=>{if(confirm(`Eliminar la orden "${q.name}" y todo su inventario asociado?`)){n("");try{const ee=await Ot(nr(ht(ke,"inventory_candies"),cr("orderId","==",q.id)));for(const be of ee.docs)await Cn(qt(ke,"inventory_candies",be.id));await Cn(qt(ke,"candy_main_orders",q.id)),A(be=>be.filter(_e=>_e.id!==q.id)),n(" Orden maestra eliminada."),e()}catch(ee){console.error(ee),n(" Error al eliminar orden maestra.")}}};return o.jsxs("div",{className:"max-w-7xl mx-auto",children:[o.jsxs("div",{className:"mb-3",children:[o.jsx("div",{className:"flex items-center justify-between",children:o.jsx("h2",{className:"text-2xl font-bold",children:"Ordenes Maestras"})}),o.jsxs("div",{className:"mt-3 flex items-center justify-between",children:[o.jsx("div",{}),o.jsxs("div",{className:"flex items-center gap-2",children:[o.jsx(gc,{onClick:e,loading:a||d}),o.jsxs("button",{className:"inline-flex items-center gap-2 bg-indigo-600 text-white px-2 md:px-3 py-2 rounded-2xl hover:bg-indigo-700 w-full md:w-auto max-w-[220px] justify-center",onClick:()=>{Qe(),x(!0)},children:[o.jsx("span",{className:"items-center gap-4 inline-block bg-indigo-700/40 rounded-full p-1",children:o.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-4 w-4",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:o.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 4v16m8-8H4"})})}),"Nueva Orden"]})]})]}),r&&o.jsx("p",{className:"mt-2 text-sm",children:r})]}),g&&o.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-40 flex items-center justify-center z-50 p-3",children:o.jsxs("div",{className:"relative bg-white p-4 md:p-6 rounded shadow-lg w-full max-w-6xl max-h-[90vh] overflow-y-auto text-sm",children:[i&&o.jsx("div",{className:"absolute inset-0 bg-white/70 z-50 flex items-center justify-center",children:o.jsxs("div",{className:"bg-white border rounded-xl px-4 py-3 shadow flex items-center gap-3",children:[o.jsxs("svg",{className:"animate-spin h-5 w-5 text-gray-700",xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",children:[o.jsx("circle",{className:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor",strokeWidth:"4"}),o.jsx("path",{className:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8v4a4 4 0 00-4 4H4z"})]}),o.jsx("div",{className:"text-sm font-semibold",children:"Guardando orden"})]})}),o.jsxs("div",{className:"sticky top-0 bg-white z-20 pb-3 border-b",children:[o.jsxs("div",{className:"flex items-center gap-3",children:[o.jsx("h3",{className:"text-lg md:text-xl font-bold",children:y?"Editar Orden Maestra":"Nueva Orden Maestra"}),o.jsx("div",{className:"ml-auto flex gap-2",children:o.jsx("button",{type:"button",className:"px-3 py-2 rounded bg-gray-200 hover:bg-gray-300 disabled:opacity-60",disabled:i,onClick:()=>{Qe(),x(!1)},children:"Cerrar"})})]}),o.jsx("div",{className:"mt-3 grid grid-cols-1 md:grid-cols-1 gap-2",children:o.jsxs("div",{children:[o.jsx("label",{className:"block text-xs font-semibold",children:"Gastos logsticos (orden)"}),o.jsx("input",{type:"number",className:"w-full border p-2 rounded",value:Y,onChange:q=>he(q.target.value),placeholder:"0",min:0})]})}),o.jsx("div",{className:"md:hidden mt-3",children:o.jsxs("div",{className:"grid grid-cols-4 gap-2",children:[o.jsx("button",{type:"button",onClick:()=>L("DATOS"),className:`px-2 py-2 rounded text-xs font-semibold border ${D==="DATOS"?"bg-blue-600 text-white border-blue-600":"bg-white text-gray-700 border-gray-200"}`,children:"Datos"}),o.jsx("button",{type:"button",onClick:()=>L("AGREGAR"),className:`px-2 py-2 rounded text-xs font-semibold border ${D==="AGREGAR"?"bg-blue-600 text-white border-blue-600":"bg-white text-gray-700 border-gray-200"}`,children:"Agregar"}),o.jsxs("button",{type:"button",onClick:()=>L("ITEMS"),className:`px-2 py-2 rounded text-xs font-semibold border ${D==="ITEMS"?"bg-blue-600 text-white border-blue-600":"bg-white text-gray-700 border-gray-200"}`,children:["Items (",ue.length,")"]}),o.jsx("button",{type:"button",onClick:()=>L("TOTALES"),className:`px-2 py-2 rounded text-xs font-semibold border ${D==="TOTALES"?"bg-blue-600 text-white border-blue-600":"bg-white text-gray-700 border-gray-200"}`,children:"Totales"})]})})]}),o.jsxs("form",{onSubmit:$t,className:"space-y-4 pt-4",children:[o.jsx("input",{ref:He,type:"file",accept:".xlsx,.xls,.csv",className:"hidden",onChange:Xe}),o.jsx("div",{className:`${D==="DATOS"?"block":"hidden"} md:block`,children:o.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:[o.jsxs("div",{className:"md:col-span-2",children:[o.jsx("label",{className:"block text-sm font-semibold",children:"Nombre de Orden"}),o.jsx("input",{className:"w-full border p-2 rounded",value:w,onChange:q=>j(q.target.value),placeholder:"Ej: Pedido enero 19"})]}),o.jsxs("div",{children:[o.jsx("label",{className:"block text-sm font-semibold",children:"Fecha del pedido"}),o.jsx("input",{type:"date",className:"w-full border p-2 rounded",value:I,onChange:q=>_(q.target.value)})]}),o.jsxs("div",{children:[o.jsx("label",{className:"block text-sm font-semibold",children:"% Ganancia Rivas"}),o.jsx("input",{type:"number",className:"w-full border p-2 rounded",value:E,onChange:q=>S(q.target.value)})]}),o.jsx("input",{type:"hidden",value:k,readOnly:!0}),o.jsxs("div",{children:[o.jsx("label",{className:"block text-sm font-semibold",children:"% Ganancia Isla Ometepe"}),o.jsx("input",{type:"number",className:"w-full border p-2 rounded",value:T,onChange:q=>F(q.target.value)})]})]})}),o.jsx("div",{className:`${D==="AGREGAR"?"block":"hidden"} md:block`,children:o.jsxs("div",{className:"border rounded p-3 bg-gray-50",children:[o.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-3",children:[o.jsxs("div",{children:[o.jsx("label",{className:"block text-sm font-semibold",children:"Categora (dinmica)"}),o.jsx("select",{className:"w-full border p-2 rounded",value:me,onChange:q=>{ne(q.target.value),Ie("")},disabled:d,children:z.length===0?o.jsx("option",{value:"",children:d?"Cargando...":"No hay categoras en catlogo"}):z.map(q=>o.jsx("option",{value:q,children:q},q))})]}),o.jsxs("div",{className:"md:col-span-2",children:[o.jsx("label",{className:"block text-sm font-semibold",children:"Producto (catlogo)"}),o.jsxs("select",{className:"w-full border p-2 rounded",value:Pe,onChange:q=>Ie(q.target.value),children:[o.jsx("option",{value:"",children:d?"Cargando catlogo...":"Selecciona producto"}),ye.map(q=>o.jsx("option",{value:q.id,children:q.name},q.id))]})]}),o.jsxs("div",{children:[o.jsx("label",{className:"block text-sm font-semibold",children:"Precio proveedor (paq)"}),o.jsx("input",{type:"number",className:"w-full border p-2 rounded bg-gray-100",value:O,readOnly:!0})]}),o.jsxs("div",{children:[o.jsx("label",{className:"block text-sm font-semibold",children:"Paquetes"}),o.jsx("input",{type:"number",min:0,className:"w-full border p-2 rounded",value:K,onChange:q=>W(q.target.value)})]}),o.jsxs("div",{children:[o.jsx("label",{className:"block text-sm font-semibold",children:"Unidades por paquete"}),o.jsx("input",{type:"number",className:"w-full border p-2 rounded bg-gray-100",value:R,readOnly:!0})]})]}),o.jsx("div",{className:"flex flex-col md:flex-row md:items-center md:justify-end gap-2 mt-3",children:o.jsx("button",{type:"button",onClick:st,className:"px-3 py-2 rounded bg-blue-600 text-white hover:bg-blue-700",children:"Agregar producto"})})]})}),o.jsxs("div",{className:"hidden md:flex items-center justify-end gap-2",children:[o.jsx("button",{type:"button",onClick:jt,className:"px-3 py-2 rounded bg-gray-200 hover:bg-gray-300",title:"Descarga plantilla (Productos + Config)",children:"Descargar plantilla"}),o.jsx("button",{type:"button",onClick:nt,disabled:Ce,className:"px-3 py-2 rounded bg-emerald-600 text-white hover:bg-emerald-700 disabled:opacity-60",title:"Importa desde Excel (Productos + Config)",children:Ce?"Importando...":"Importar Excel"}),o.jsx("button",{type:"button",onClick:xe,className:"px-3 py-2 rounded bg-indigo-600 text-white hover:bg-indigo-700",title:"Exporta la orden actual (Productos + Resumen)",children:"Exportar Excel"})]}),o.jsx("div",{className:`${D==="ITEMS"?"block":"hidden"} md:block`,children:o.jsxs("div",{className:"mt-2",children:[o.jsxs("div",{className:"mb-2 flex flex-col md:flex-row md:items-center md:justify-between gap-2",children:[o.jsxs("div",{className:"text-xs text-gray-600",children:["Items:"," ",o.jsx("span",{className:"font-semibold",children:ue.length}),Z.trim()?o.jsxs(o.Fragment,{children:[" "," Mostrando"," ",o.jsx("span",{className:"font-semibold",children:ce.length})]}):null]}),o.jsx("input",{value:Z,onChange:q=>ge(q.target.value),placeholder:"Buscar producto o categora",className:"w-full md:w-80 border rounded px-3 py-2 text-sm"})]}),o.jsxs("div",{className:"hidden md:block",children:[o.jsx("div",{className:"overflow-x-auto border rounded pb-5",children:o.jsxs("table",{className:"min-w-[1400px] w-full text-xs",children:[o.jsx("thead",{className:"bg-gray-100",children:o.jsxs("tr",{children:[o.jsx("th",{className:"text-left p-2",children:"Categora"}),o.jsx("th",{className:"text-left p-2",children:"Producto"}),o.jsx("th",{className:"text-right p-2",children:"Paquetes"}),o.jsx("th",{className:"text-right p-2",children:"Restantes"}),o.jsx("th",{className:"text-right p-2",children:"Und x Paq"}),o.jsx("th",{className:"text-right p-2",children:"Precio prov"}),o.jsx("th",{className:"text-right p-2",children:"Facturado"}),o.jsx("th",{className:"text-right p-2",children:"Esperado Rivas"}),o.jsx("th",{className:"text-right p-2",children:"Esperado Isla"}),o.jsx("th",{className:"text-right p-2",children:"MV Rivas"}),o.jsx("th",{className:"text-right p-2",children:"MV Isla"}),o.jsx("th",{className:"text-right p-2",children:"U. Bruta Rivas"}),o.jsx("th",{className:"text-right p-2",children:"U. Bruta Isla"}),o.jsx("th",{className:"text-right p-2",children:"Prorrateo"}),o.jsx("th",{className:"text-right p-2",children:"Precio Rivas"}),o.jsx("th",{className:"text-right p-2",children:"Precio Isla"}),o.jsx("th",{className:"text-center p-2",children:"Acciones"})]})}),o.jsxs("tbody",{children:[le.map(q=>o.jsxs("tr",{className:"border-t",children:[o.jsx("td",{className:"p-2",children:q.category}),o.jsx("td",{className:"p-2 font-semibold",children:q.name}),o.jsx("td",{className:"p-2 text-right",children:o.jsx("input",{type:"number",className:"w-20 border rounded p-1 text-right",value:q.packages,onChange:ae=>De(q.id,"packages",ae.target.value)})}),o.jsx("td",{className:"p-2 text-right",children:o.jsx("span",{className:"inline-block min-w-[60px] text-right",children:jn(q.remainingPackages??q.packages)})}),o.jsx("td",{className:"p-2 text-right",children:o.jsx("input",{type:"number",className:"w-20 border rounded p-1 text-right",value:q.unitsPerPackage,onChange:ae=>De(q.id,"unitsPerPackage",ae.target.value)})}),o.jsx("td",{className:"p-2 text-right",children:Number(q.providerPrice||0).toFixed(2)}),o.jsx("td",{className:"p-2 text-right",children:Number(q.subtotal||0).toFixed(2)}),o.jsx("td",{className:"p-2 text-right",children:Number(q.totalRivas||0).toFixed(2)}),o.jsx("td",{className:"p-2 text-right",children:Number(q.totalIsla||0).toFixed(2)}),o.jsx("td",{className:"p-2 text-right",children:o.jsx("input",{type:"number",className:"w-16 border rounded p-1 text-right",value:Number(q.marginRivas??0),onChange:ae=>De(q.id,"marginRivas",ae.target.value)})}),o.jsx("td",{className:"p-2 text-right",children:o.jsx("input",{type:"number",className:"w-16 border rounded p-1 text-right",value:Number(q.marginIsla??0),onChange:ae=>De(q.id,"marginIsla",ae.target.value)})}),o.jsx("td",{className:"p-2 text-right",children:Number(q.grossProfit||0).toFixed(2)}),o.jsx("td",{className:"p-2 text-right",children:Number(q.grossProfitIsla||0).toFixed(2)}),o.jsx("td",{className:"p-2 text-right",children:Number(q.logisticAllocated||0).toFixed(2)}),o.jsx("td",{className:"p-2 text-right",children:Number(q.unitPriceRivas||0)}),o.jsx("td",{className:"p-2 text-right",children:Number(q.unitPriceIsla||0)}),o.jsx("td",{className:"p-2 text-center",children:o.jsx("button",{type:"button",className:"px-2 py-1 rounded bg-red-600 text-white hover:bg-red-700",onClick:()=>ut(q.id),children:"Quitar"})})]},q.id)),ce.length===0&&o.jsx("tr",{children:o.jsx("td",{colSpan:17,className:"p-4 text-center text-gray-500",children:"No hay productos en la orden."})})]})]})}),o.jsxs("div",{className:"mt-2 flex items-center justify-between",children:[o.jsxs("div",{className:"text-sm text-gray-600",children:["Mostrando"," ",Math.min((oe-1)*Le+1,ce.length),"-",Math.min(oe*Le,ce.length)," ","de ",ce.length]}),o.jsxs("div",{className:"flex items-center gap-2",children:[o.jsx("button",{type:"button",disabled:oe<=1,onClick:()=>Me(q=>Math.max(1,q-1)),className:"px-2 py-1 rounded border disabled:opacity-50 text-sm",children:"Anterior"}),o.jsxs("div",{className:"px-3 py-1 border rounded text-sm",children:[oe," / ",ve]}),o.jsx("button",{type:"button",disabled:oe>=ve,onClick:()=>Me(q=>Math.min(ve,q+1)),className:"px-2 py-1 rounded border disabled:opacity-50 text-sm",children:"Siguiente"})]})]})]}),o.jsx("div",{className:"md:hidden space-y-3",children:ce.length===0?o.jsx("div",{className:"p-4 border rounded bg-gray-50 text-gray-600",children:"No hay productos en esta orden."}):ce.map(q=>o.jsxs("div",{className:"border rounded-xl p-3 shadow-sm",children:[o.jsxs("div",{className:"flex items-start gap-2",children:[o.jsxs("div",{className:"flex-1 min-w-0",children:[o.jsx("div",{className:"font-semibold text-base leading-tight truncate",children:q.name}),o.jsx("div",{className:"text-xs text-gray-500 truncate",children:q.category})]}),o.jsx("button",{type:"button",className:"px-2 py-1 rounded bg-red-600 text-white hover:bg-red-700 text-xs",onClick:()=>ut(q.id),children:"Quitar"})]}),o.jsxs("div",{className:"grid grid-cols-2 gap-2 mt-3",children:[o.jsxs("div",{children:[o.jsx("label",{className:"text-xs text-gray-600",children:"Paquetes"}),o.jsx("input",{type:"number",className:"w-full border p-2 rounded text-right",value:q.packages,onChange:ae=>De(q.id,"packages",ae.target.value)})]}),o.jsxs("div",{children:[o.jsx("label",{className:"text-xs text-gray-600",children:"Paquetes restantes"}),o.jsx("input",{className:"w-full border p-2 rounded text-right bg-gray-100",value:q.remainingPackages??q.packages,readOnly:!0})]}),o.jsxs("div",{children:[o.jsx("label",{className:"text-xs text-gray-600",children:"Und x Paquete"}),o.jsx("input",{type:"number",className:"w-full border p-2 rounded text-right",value:q.unitsPerPackage,onChange:ae=>De(q.id,"unitsPerPackage",ae.target.value)})]}),o.jsxs("div",{children:[o.jsx("label",{className:"text-xs text-gray-600",children:"Precio proveedor"}),o.jsx("input",{className:"w-full border p-2 rounded text-right bg-gray-100",value:Number(q.providerPrice||0).toFixed(2),readOnly:!0})]})]}),o.jsxs("div",{className:"grid grid-cols-2 gap-2 mt-3",children:[o.jsxs("div",{children:[o.jsx("label",{className:"text-xs text-gray-600",children:"MV Rivas (%)"}),o.jsx("input",{type:"number",className:"w-full border p-2 rounded text-right",value:q.marginRivas??0,onChange:ae=>De(q.id,"marginRivas",ae.target.value)})]}),o.jsxs("div",{children:[o.jsx("label",{className:"text-xs text-gray-600",children:"MV Isla (%)"}),o.jsx("input",{type:"number",className:"w-full border p-2 rounded text-right",value:q.marginIsla??0,onChange:ae=>De(q.id,"marginIsla",ae.target.value)})]})]}),o.jsxs("div",{className:"grid grid-cols-2 gap-2 mt-3 text-sm",children:[o.jsxs("div",{className:"p-2 rounded bg-gray-50 border",children:[o.jsx("div",{className:"text-xs text-gray-600",children:"Facturado"}),o.jsx("div",{className:"font-semibold",children:Number(q.subtotal||0).toFixed(2)})]}),o.jsxs("div",{className:"p-2 rounded bg-gray-50 border",children:[o.jsx("div",{className:"text-xs text-gray-600",children:"Esperado Rivas"}),o.jsx("div",{className:"font-semibold",children:Number(q.totalRivas||0).toFixed(2)})]}),o.jsxs("div",{className:"p-2 rounded bg-gray-50 border",children:[o.jsx("div",{className:"text-xs text-gray-600",children:"Esperado Isla"}),o.jsx("div",{className:"font-semibold",children:Number(q.totalIsla||0).toFixed(2)})]}),o.jsxs("div",{className:"p-2 rounded bg-gray-50 border",children:[o.jsx("div",{className:"text-xs text-gray-600",children:"Prorrateo logstico"}),o.jsx("div",{className:"font-semibold",children:Number(q.logisticAllocated||0).toFixed(2)})]})]}),o.jsxs("div",{className:"grid grid-cols-2 gap-2 mt-3 text-xs",children:[o.jsxs("div",{className:"p-2 rounded bg-emerald-50 border",children:[o.jsx("div",{className:"text-gray-600",children:"U. Bruta Rivas"}),o.jsx("div",{className:"font-semibold",children:Number(q.grossProfit||0).toFixed(2)})]}),o.jsxs("div",{className:"p-2 rounded bg-emerald-50 border",children:[o.jsx("div",{className:"text-gray-600",children:"U. Bruta Isla"}),o.jsx("div",{className:"font-semibold",children:Number(q.grossProfitIsla||0).toFixed(2)})]})]}),o.jsxs("div",{className:"grid grid-cols-2 gap-2 mt-3 text-xs",children:[o.jsxs("div",{className:"p-2 rounded bg-blue-50 border",children:[o.jsx("div",{className:"text-gray-600",children:"Precio Rivas (paq)"}),o.jsx("div",{className:"font-semibold",children:q.unitPriceRivas})]}),o.jsxs("div",{className:"p-2 rounded bg-blue-50 border",children:[o.jsx("div",{className:"text-gray-600",children:"Precio Isla (paq)"}),o.jsx("div",{className:"font-semibold",children:q.unitPriceIsla})]})]})]},q.id))})]})}),o.jsxs("div",{className:`${D==="TOTALES"?"block":"hidden"} md:block`,children:[o.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-3 mt-3",children:[o.jsxs("div",{className:"p-3 border rounded bg-gray-50",children:[o.jsx("div",{className:"text-xs text-gray-600",children:"Paquetes totales"}),o.jsx("div",{className:"text-lg font-semibold",children:Ct.totalPackages})]}),o.jsxs("div",{className:"p-3 border rounded bg-gray-50",children:[o.jsx("div",{className:"text-xs text-gray-600",children:"Subtotal costo (facturado)"}),o.jsx("div",{className:"text-lg font-semibold",children:Number(Ct.subtotalCosto||0).toFixed(2)})]}),o.jsxs("div",{className:"p-3 border rounded bg-gray-50",children:[o.jsx("div",{className:"text-xs text-gray-600",children:"Esperado (Rivas / Isla)"}),o.jsxs("div",{className:"text-sm font-semibold",children:["Rivas: ",Number(Ct.esperadoRivas||0).toFixed(2),o.jsx("br",{}),"Isla: ",Number(Ct.esperadoIsla||0).toFixed(2)]})]}),o.jsxs("div",{className:"p-3 border rounded bg-gray-50",children:[o.jsx("div",{className:"text-xs text-gray-600",children:"Gastos logsticos"}),o.jsx("div",{className:"text-lg font-semibold",children:Number(Ct.gastosLogisticos||0).toFixed(2)})]})]}),o.jsxs("div",{className:"mt-3",children:[o.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-3",children:[o.jsxs("div",{className:"p-3 border rounded bg-emerald-50",children:[o.jsx("div",{className:"text-xs text-gray-600",children:"Utilidad Bruta Rivas"}),o.jsx("div",{className:"text-lg font-semibold",children:Number(Ct.utilidadBrutaRivas||0).toFixed(2)})]}),o.jsxs("div",{className:"p-3 border rounded bg-emerald-50",children:[o.jsx("div",{className:"text-xs text-gray-600",children:"Utilidad Bruta Isla"}),o.jsx("div",{className:"text-lg font-semibold",children:Number(Ct.utilidadBrutaIsla||0).toFixed(2)})]})]}),o.jsx("div",{className:"mt-3 border rounded p-3 bg-white",children:o.jsx("div",{className:"flex justify-end",children:o.jsx("button",{type:"button",className:"px-3 py-2 rounded bg-gray-200 hover:bg-gray-300",onClick:xe,disabled:!dt.items.length,title:"Exporta la orden actual (productos + resumen)",children:"Exportar orden a Excel"})})})]})]}),o.jsxs("div",{className:"sticky bottom-0 bg-white pt-3 mt-4 border-t",children:[o.jsxs("div",{className:"flex justify-end gap-2",children:[o.jsx("button",{type:"button",onClick:Qe,className:"px-3 py-2 rounded bg-gray-200 hover:bg-gray-300",children:"Limpiar orden"}),o.jsx("button",{type:"button",onClick:()=>{Qe(),x(!1)},className:"px-3 py-2 rounded bg-gray-200 hover:bg-gray-300",children:"Cerrar"}),o.jsx("button",{type:"submit",className:"px-3 py-2 rounded bg-blue-600 text-white hover:bg-blue-700 disabled:opacity-60",disabled:i||ue.length===0,children:i?"Guardando...":"Guardar orden"})]}),o.jsx("div",{className:"md:hidden mt-2",children:o.jsx("button",{type:"button",className:"w-full px-3 py-2 rounded bg-gray-100 hover:bg-gray-200 text-sm",onClick:()=>{L(D==="DATOS"&&!y?"AGREGAR":D==="DATOS"||D==="AGREGAR"?"ITEMS":D==="ITEMS"?"TOTALES":"DATOS")},children:"Siguiente"})})]})]})]})}),o.jsxs("div",{className:"mt-4",children:[o.jsx("div",{className:"md:hidden space-y-3",children:a?o.jsx("div",{className:"p-4 border rounded bg-white text-center",children:"Cargando"}):h.length===0?o.jsx("div",{className:"p-4 border rounded bg-white text-center",children:"Sin ordenes maestras."}):h.map(q=>{const ae=m[q.id],ee=It(q),be=q.totalPackages>0?(q.subtotal/q.totalPackages).toFixed(2):"0.00",_e=Number(q.logisticsCost||0),Be=Number(q.totalRivas||0)-Number(q.subtotal||0);return o.jsxs("div",{className:"border rounded-xl p-3 bg-white shadow-sm",children:[o.jsxs("div",{className:"flex items-start gap-3",children:[o.jsxs("div",{className:"flex-1",children:[o.jsx("div",{className:"text-xs text-gray-500",children:ee}),o.jsx("div",{className:"font-semibold text-base leading-tight",children:q.name})]}),o.jsxs("div",{className:"flex gap-2",children:[o.jsx("button",{className:"px-3 py-2 rounded bg-blue-600 text-white text-xs",onClick:()=>Ke(q),children:"Ver"}),o.jsx("button",{className:"px-3 py-2 rounded bg-red-600 text-white text-xs",onClick:()=>wt(q),children:"Borrar"})]})]}),o.jsxs("div",{className:"grid grid-cols-2 gap-2 mt-3 text-sm",children:[o.jsxs("div",{className:"p-2 rounded bg-gray-50 border",children:[o.jsx("div",{className:"text-xs text-gray-600",children:"Paquetes"}),o.jsx("div",{className:"font-semibold",children:q.totalPackages})]}),o.jsxs("div",{className:"p-2 rounded bg-gray-50 border",children:[o.jsx("div",{className:"text-xs text-gray-600",children:"Restantes"}),o.jsx("div",{className:"font-semibold",children:ae?ae.remainingPackages:0})]}),o.jsxs("div",{className:"p-2 rounded bg-gray-50 border",children:[o.jsx("div",{className:"text-xs text-gray-600",children:"P. Proveedor"}),o.jsx("div",{className:"font-semibold",children:be})]}),o.jsxs("div",{className:"p-2 rounded bg-gray-50 border",children:[o.jsx("div",{className:"text-xs text-gray-600",children:"Subtotal"}),o.jsx("div",{className:"font-semibold",children:Number(q.subtotal||0).toFixed(2)})]})]}),o.jsxs("div",{className:"grid grid-cols-2 gap-2 mt-2 text-xs",children:[o.jsxs("div",{className:"p-2 rounded bg-blue-50 border",children:[o.jsx("div",{className:"text-gray-600",children:"Esperado Rivas"}),o.jsx("div",{className:"font-semibold",children:Number(q.totalRivas||0).toFixed(2)})]}),o.jsxs("div",{className:"p-2 rounded bg-blue-50 border",children:[o.jsx("div",{className:"text-gray-600",children:"Esperado Isla"}),o.jsx("div",{className:"font-semibold",children:Number(q.totalIsla||0).toFixed(2)})]})]}),o.jsxs("div",{className:"grid grid-cols-2 gap-2 mt-2 text-xs",children:[o.jsxs("div",{className:"p-2 rounded bg-emerald-50 border",children:[o.jsx("div",{className:"text-gray-600",children:"Gastos log."}),o.jsx("div",{className:"font-semibold",children:_e.toFixed(2)})]}),o.jsxs("div",{className:"p-2 rounded bg-emerald-50 border",children:[o.jsx("div",{className:"text-gray-600",children:"U. Bruta (est)"}),o.jsx("div",{className:"font-semibold",children:Be.toFixed(2)})]})]})]},q.id)})}),o.jsxs("div",{className:"hidden md:block bg-white p-2 rounded shadow border w-full overflow-x-auto",children:[o.jsxs("table",{className:"min-w-[1100px] text-xs md:text-sm",children:[o.jsx("thead",{className:"bg-gray-100",children:o.jsxs("tr",{className:"whitespace-nowrap",children:[o.jsx("th",{className:"p-2 border",children:"Fecha"}),o.jsx("th",{className:"p-2 border",children:"Nombre"}),o.jsx("th",{className:"p-2 border",children:"Paquetes totales"}),o.jsx("th",{className:"p-2 border",children:"Paquetes restantes"}),o.jsx("th",{className:"p-2 border",children:"Precio Proveedor"}),o.jsx("th",{className:"p-2 border",children:"Subtotal"}),o.jsx("th",{className:"p-2 border",children:"Esperado Rivas"}),o.jsx("th",{className:"p-2 border",children:"Esperado Isla"}),o.jsx("th",{className:"p-2 border",children:"Gastos log."}),o.jsx("th",{className:"p-2 border",children:"U. Bruta (est)"}),o.jsx("th",{className:"p-2 border",children:"Acciones"})]})}),o.jsx("tbody",{children:a?o.jsx("tr",{children:o.jsx("td",{colSpan:11,className:"p-4 text-center",children:"Cargando"})}):h.length===0?o.jsx("tr",{children:o.jsx("td",{colSpan:11,className:"p-4 text-center",children:"Sin ordenes maestras."})}):je.map(q=>{const ae=m[q.id],ee=It(q),be=q.totalPackages>0?(q.subtotal/q.totalPackages).toFixed(2):"0.00",_e=Number(q.logisticsCost||0),Be=Number(q.totalRivas||0)-Number(q.subtotal||0);return o.jsxs("tr",{className:"text-center whitespace-nowrap",children:[o.jsx("td",{className:"p-2 border",children:ee}),o.jsx("td",{className:"p-2 border text-left",children:q.name}),o.jsx("td",{className:"p-2 border",children:q.totalPackages}),o.jsx("td",{className:"p-2 border",children:ae?ae.remainingPackages:0}),o.jsx("td",{className:"p-2 border",children:be}),o.jsx("td",{className:"p-2 border",children:Number(q.subtotal||0).toFixed(2)}),o.jsx("td",{className:"p-2 border",children:Number(q.totalRivas||0).toFixed(2)}),o.jsx("td",{className:"p-2 border",children:Number(q.totalIsla||0).toFixed(2)}),o.jsx("td",{className:"p-2 border",children:_e.toFixed(2)}),o.jsx("td",{className:"p-2 border",children:Be.toFixed(2)}),o.jsx("td",{className:"p-2 border",children:o.jsxs("div",{className:"flex gap-1 justify-center",children:[o.jsx("button",{className:"px-2 py-1 rounded bg-blue-600 text-white hover:bg-blue-700 text-xs",onClick:()=>Ke(q),children:"Ver / Editar"}),o.jsx("button",{className:"px-2 py-1 rounded bg-red-600 text-white hover:bg-red-700 text-xs",onClick:()=>wt(q),children:"Borrar"})]})})]},q.id)})})]}),o.jsxs("div",{className:"mt-2 flex items-center justify-between",children:[o.jsxs("div",{className:"text-sm text-gray-600",children:["Mostrando ",Math.min((U-1)*ie+1,h.length),"-",Math.min(U*ie,h.length)," de ",h.length]}),o.jsxs("div",{className:"flex items-center gap-2",children:[o.jsx("button",{type:"button",disabled:U<=1,onClick:()=>Ge(q=>Math.max(1,q-1)),className:"px-2 py-1 rounded border disabled:opacity-50 text-sm",children:"Anterior"}),o.jsxs("div",{className:"px-3 py-1 border rounded text-sm",children:[U," / ",J]}),o.jsx("button",{type:"button",disabled:U>=J,onClick:()=>Ge(q=>Math.min(J,q+1)),className:"px-2 py-1 rounded border disabled:opacity-50 text-sm",children:"Siguiente"})]})]})]})]})]})}const Qh=t=>`C$ ${(Number(t)||0).toFixed(2)}`;function fB(t){const e=Number(t.packages||0),r=Number(t.providerPrice||0),n=Number(t.unitsPerPackage||0),a=r*e,s=e>0&&n>0?e*n:1,i=Number(t.marginRivas||0),l=Number(t.marginSanJorge||0),c=Number(t.marginIsla||0),u=a*(1+i/100),d=a*(1+l/100),f=a*(1+c/100),h=u-a,A=d-a,m=f-a,p=u/s,g=d/s,x=f/s;return{...t,subtotal:Number(a.toFixed(2)),totalRivas:Number(u.toFixed(2)),totalSanJorge:Number(d.toFixed(2)),totalIsla:Number(f.toFixed(2)),gainRivas:Number(h.toFixed(2)),gainSanJorge:Number(A.toFixed(2)),gainIsla:Number(m.toFixed(2)),unitPriceRivas:Number(p.toFixed(2)),unitPriceSanJorge:Number(g.toFixed(2)),unitPriceIsla:Number(x.toFixed(2))}}function e$(t){return t.reduce((e,r)=>(e.totalPackages+=Number(r.packages||0),e.subtotal+=Number(r.subtotal||0),e.totalRivas+=Number(r.totalRivas||0),e.totalSanJorge+=Number(r.totalSanJorge||0),e.totalIsla+=Number(r.totalIsla||0),e),{totalPackages:0,subtotal:0,totalRivas:0,totalSanJorge:0,totalIsla:0})}function rc(t,e=0){const r=Number(t);return Number.isFinite(r)?r:e}function AB(t){const{margin:e,gain:r,subtotal:n,orderMargin:a}=t;if(e!=null&&Number.isFinite(Number(e)))return Number(e);const s=Number(n||0),i=Number(r);return Number.isFinite(i)&&s>0?i/s*100:Number(a||0)}function gUe(){var M,K,W;const[t,e]=v.useState([]),[r,n]=v.useState({}),[a,s]=v.useState(!0),[i,l]=v.useState(""),[c,u]=v.useState(Sr(Qd(new Date),"yyyy-MM-dd")),[d,f]=v.useState(Sr(Ud(new Date),"yyyy-MM-dd")),[h,A]=v.useState(!1),[m,p]=v.useState(!1),[g,x]=v.useState(null),[y,b]=v.useState([]),[w,j]=v.useState(0),[I,_]=v.useState(0),[E,S]=v.useState(0),[k,P]=v.useState(""),[T,F]=v.useState(""),[Y,he]=v.useState(0),[ue,fe]=v.useState(0),[me,ne]=v.useState(1);v.useEffect(()=>{(async()=>{try{s(!0),l("");const D=nr(ht(ke,"candy_main_orders"),on("createdAt","desc")),L=await Ot(D),Z=[];L.forEach(Ge=>{const ie=Ge.data();Z.push({id:Ge.id,name:ie.name??"",date:ie.date??"",totalPackages:Number(ie.totalPackages??0),subtotal:Number(ie.subtotal??0),totalRivas:Number(ie.totalRivas??0),totalSanJorge:Number(ie.totalSanJorge??0),totalIsla:Number(ie.totalIsla??0),marginRivas:Number(ie.marginRivas??0),marginSanJorge:Number(ie.marginSanJorge??0),marginIsla:Number(ie.marginIsla??0),createdAt:ie.createdAt??fr.now()})}),e(Z);const ge=await Ot(nr(ht(ke,"inventory_candies"))),U={};ge.forEach(Ge=>{const ie=Ge.data(),J=ie.orderId;if(!J)return;const je=Number(ie.unitsPerPackage||1)||1,z=Number(ie.totalUnits??(ie.packages||0)*je),Ae=Math.round(z/je),ye=Number(ie.remaining??ie.totalUnits??z),Qe=Number(ie.remainingPackages??NaN),st=Number.isFinite(Qe)?Math.round(Qe):Math.round(ye/je);U[J]||(U[J]={orderId:J,totalPackages:0,remainingPackages:0}),U[J].totalPackages+=Ae,U[J].remainingPackages+=st}),n(U)}catch(D){console.error(D),l(" Error cargando inventario de pedidos.")}finally{s(!1)}})()},[]);const Pe=v.useMemo(()=>t.filter(D=>{var Z;const L=D.date||((Z=D.createdAt)!=null&&Z.toDate?D.createdAt.toDate().toISOString().slice(0,10):"");return!(!L||c&&L<c||d&&L>d)}),[t,c,d]),Ie=v.useMemo(()=>{let D=0,L=0,Z=0,ge=0,U=0,Ge=0;for(const ie of Pe){D+=ie.totalPackages,L+=ie.subtotal,Z+=ie.totalRivas,ge+=ie.totalSanJorge,U+=ie.totalIsla;const J=r[ie.id];J&&(Ge+=J.remainingPackages)}return{totalPaquetes:D,totalSubtotal:L,totalRivas:Z,totalSJ:ge,totalIsla:U,totalPaquetesRestantes:Ge,totalPedidos:Pe.length}},[Pe,r]),O=async(D,L,Z)=>{if(!g)return;const ge=Number(Z||0),U=y.map(J=>J.id!==D?J:fB({...J,[L]:ge}));b(U);const Ge=U.find(J=>J.id===D);if(!Ge)return;const ie=e$(U);try{await nn(qt(ke,"products_candies",D),{marginRivas:Ge.marginRivas,marginSanJorge:Ge.marginSanJorge,marginIsla:Ge.marginIsla,subtotal:Ge.subtotal,totalRivas:Ge.totalRivas,totalSanJorge:Ge.totalSanJorge,totalIsla:Ge.totalIsla,unitPriceRivas:Ge.unitPriceRivas,unitPriceSanJorge:Ge.unitPriceSanJorge,unitPriceIsla:Ge.unitPriceIsla,gainRivas:Ge.gainRivas,gainSanJorge:Ge.gainSanJorge,gainIsla:Ge.gainIsla}),await nn(qt(ke,"candy_main_orders",g.id),{totalPackages:ie.totalPackages,subtotal:Number(ie.subtotal.toFixed(2)),totalRivas:Number(ie.totalRivas.toFixed(2)),totalSanJorge:Number(ie.totalSanJorge.toFixed(2)),totalIsla:Number(ie.totalIsla.toFixed(2))}),x(J=>J&&{...J,totalPackages:ie.totalPackages,subtotal:Number(ie.subtotal.toFixed(2)),totalRivas:Number(ie.totalRivas.toFixed(2)),totalSanJorge:Number(ie.totalSanJorge.toFixed(2)),totalIsla:Number(ie.totalIsla.toFixed(2))}),l(" Mrgenes del producto actualizados.")}catch(J){console.error(J),l(" Error actualizando mrgenes del producto.")}},H=async()=>{if(g)try{l("");const D=Number.isFinite(w)&&w!==0?w:g.marginRivas||0,L=Number.isFinite(I)&&I!==0?I:g.marginSanJorge||0,Z=Number.isFinite(E)&&E!==0?E:g.marginIsla||0,ge=fB({id:"tmp",name:k.trim(),category:T.trim(),providerPrice:Number(Y||0),packages:Number(ue||0),unitsPerPackage:Number(me||1),marginRivas:Number(D||0),marginSanJorge:Number(L||0),marginIsla:Number(Z||0),subtotal:0,totalRivas:0,totalSanJorge:0,totalIsla:0,gainRivas:0,gainSanJorge:0,gainIsla:0,unitPriceRivas:0,unitPriceSanJorge:0,unitPriceIsla:0,remainingPackages:Number(ue||0)}),U=await xn(ht(ke,"products_candies"),{orderId:g.id,inventoryDate:g.date||"",name:ge.name,category:ge.category,providerPrice:ge.providerPrice,packages:ge.packages,unitsPerPackage:ge.unitsPerPackage,marginRivas:ge.marginRivas,marginSanJorge:ge.marginSanJorge,marginIsla:ge.marginIsla,gainRivas:ge.gainRivas,gainSanJorge:ge.gainSanJorge,gainIsla:ge.gainIsla,subtotal:ge.subtotal,totalRivas:ge.totalRivas,totalSanJorge:ge.totalSanJorge,totalIsla:ge.totalIsla,unitPriceRivas:ge.unitPriceRivas,unitPriceSanJorge:ge.unitPriceSanJorge,unitPriceIsla:ge.unitPriceIsla,createdAt:fr.now()}),ie=[{...ge,id:U.id},...y];b(ie);const J=e$(ie);await nn(qt(ke,"candy_main_orders",g.id),{totalPackages:J.totalPackages,subtotal:Number(J.subtotal.toFixed(2)),totalRivas:Number(J.totalRivas.toFixed(2)),totalSanJorge:Number(J.totalSanJorge.toFixed(2)),totalIsla:Number(J.totalIsla.toFixed(2))}),x(je=>je&&{...je,totalPackages:J.totalPackages,subtotal:Number(J.subtotal.toFixed(2)),totalRivas:Number(J.totalRivas.toFixed(2)),totalSanJorge:Number(J.totalSanJorge.toFixed(2)),totalIsla:Number(J.totalIsla.toFixed(2))}),j(0),_(0),S(0),P(""),F(""),he(0),fe(0),ne(1),l(" Producto agregado con mrgenes por sucursal.")}catch(D){console.error(D),l(" Error agregando producto al pedido.")}},R=async D=>{try{x(D),b([]),A(!0),p(!0),l("");const L=await Ot(nr(ht(ke,"inventory_candies"),cr("orderId","==",D.id))),Z={};L.forEach(Ge=>{const ie=Ge.data(),J=ie.productId;if(!J)return;const je=Number(ie.unitsPerPackage||1)||1,z=Number(ie.remaining??ie.totalUnits??0),Ae=Number(ie.remainingPackages??NaN),ye=Number.isFinite(Ae)?Math.round(Ae):Math.round(z/je);Z[J]=(Z[J]||0)+ye});const ge=await Ot(nr(ht(ke,"products_candies"),cr("orderId","==",D.id))),U=[];ge.forEach(Ge=>{const ie=Ge.data(),J=rc(ie.providerPrice,0),je=rc(ie.packages,0),z=ie.subtotal??J*je,Ae=AB({margin:ie.marginRivas,gain:ie.gainRivas,subtotal:z,orderMargin:D.marginRivas||0}),ye=AB({margin:ie.marginSanJorge,gain:ie.gainSanJorge,subtotal:z,orderMargin:D.marginSanJorge||0}),Qe=AB({margin:ie.marginIsla,gain:ie.gainIsla,subtotal:z,orderMargin:D.marginIsla||0}),st=fB({id:Ge.id,name:ie.name??"",category:ie.category??"",providerPrice:J,packages:je,unitsPerPackage:rc(ie.unitsPerPackage,1),marginRivas:Number(Ae||0),marginSanJorge:Number(ye||0),marginIsla:Number(Qe||0),subtotal:rc(ie.subtotal,0),totalRivas:rc(ie.totalRivas,0),totalSanJorge:rc(ie.totalSanJorge,0),totalIsla:rc(ie.totalIsla,0),gainRivas:rc(ie.gainRivas,0),gainSanJorge:rc(ie.gainSanJorge,0),gainIsla:rc(ie.gainIsla,0),unitPriceRivas:rc(ie.unitPriceRivas,0),unitPriceSanJorge:rc(ie.unitPriceSanJorge,0),unitPriceIsla:rc(ie.unitPriceIsla,0),remainingPackages:Z[Ge.id]??rc(ie.packages,0)});U.push(st)}),b(U)}catch(L){console.error(L),l(" Error cargando productos del pedido.")}finally{p(!1)}};return o.jsxs("div",{className:"max-w-7xl mx-auto",children:[o.jsx("div",{className:"flex items-center justify-between mb-3",children:o.jsx("h2",{className:"text-2xl font-bold",children:"Inventario Ordenes Maestras"})}),o.jsxs("div",{className:"bg-white p-3 rounded shadow border mb-4 flex flex-wrap items-end gap-3 text-sm",children:[o.jsxs("div",{className:"flex flex-col",children:[o.jsx("label",{className:"font-semibold",children:"Desde"}),o.jsx("input",{type:"date",className:"border rounded px-2 py-1",value:c,onChange:D=>u(D.target.value)})]}),o.jsxs("div",{className:"flex flex-col",children:[o.jsx("label",{className:"font-semibold",children:"Hasta"}),o.jsx("input",{type:"date",className:"border rounded px-2 py-1",value:d,onChange:D=>f(D.target.value)})]}),o.jsx("button",{className:"px-3 py-1 rounded bg-gray-200 hover:bg-gray-300",onClick:()=>{u(""),f("")},children:"Quitar filtro"}),o.jsxs("div",{className:"ml-auto text-xs md:text-sm text-gray-600",children:["Cantidad de pedidos:"," ",o.jsx("span",{className:"font-semibold",children:Ie.totalPedidos})]})]}),o.jsx("div",{className:"bg-gray-50 p-3 rounded shadow border mb-3 text-sm md:text-base",children:o.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-y-2 gap-x-8",children:[o.jsxs("div",{children:[o.jsx("span",{className:"font-semibold",children:"Paquetes totales:"})," ",Ie.totalPaquetes]}),o.jsxs("div",{children:[o.jsx("span",{className:"font-semibold",children:"Paquetes restantes:"})," ",Ie.totalPaquetesRestantes]}),o.jsxs("div",{children:[o.jsx("span",{className:"font-semibold",children:"Subtotal total:"})," ",Qh(Ie.totalSubtotal)]}),o.jsxs("div",{children:[o.jsx("span",{className:"font-semibold",children:"Total Rivas (todo):"})," ",Qh(Ie.totalRivas)]}),o.jsxs("div",{children:[o.jsx("span",{className:"font-semibold",children:"Total San Jorge (todo):"})," ",Qh(Ie.totalSJ)]}),o.jsxs("div",{children:[o.jsx("span",{className:"font-semibold",children:"Total Isla (todo):"})," ",Qh(Ie.totalIsla)]})]})}),o.jsx("div",{className:"bg-white p-2 rounded shadow border w-full overflow-x-auto mt-2",children:o.jsxs("table",{className:"min-w-[900px] text-xs md:text-sm",children:[o.jsx("thead",{className:"bg-gray-100",children:o.jsxs("tr",{className:"whitespace-nowrap",children:[o.jsx("th",{className:"p-2 border",children:"Fecha"}),o.jsx("th",{className:"p-2 border",children:"Nombre"}),o.jsx("th",{className:"p-2 border",children:"Paquetes totales"}),o.jsx("th",{className:"p-2 border",children:"Paquetes restantes"}),o.jsx("th",{className:"p-2 border",children:"Subtotal"}),o.jsx("th",{className:"p-2 border",children:"Total Rivas"}),o.jsx("th",{className:"p-2 border",children:"Total San Jorge"}),o.jsx("th",{className:"p-2 border",children:"Total Isla"}),o.jsx("th",{className:"p-2 border",children:"P. prom. Rivas"}),o.jsx("th",{className:"p-2 border",children:"P. prom. San Jorge"}),o.jsx("th",{className:"p-2 border",children:"P. prom. Isla"}),o.jsx("th",{className:"p-2 border",children:"Acciones"})]})}),o.jsx("tbody",{children:a?o.jsx("tr",{children:o.jsx("td",{colSpan:12,className:"p-4 text-center",children:"Cargando"})}):Pe.length===0?o.jsx("tr",{children:o.jsx("td",{colSpan:12,className:"p-4 text-center",children:"Sin pedidos generales en este rango."})}):Pe.map(D=>{var ie;const L=D.totalPackages>0?Math.round(D.totalRivas/D.totalPackages):0,Z=D.totalPackages>0?Math.round(D.totalSanJorge/D.totalPackages):0,ge=D.totalPackages>0?Math.round(D.totalIsla/D.totalPackages):0,U=D.date||((ie=D.createdAt)!=null&&ie.toDate?D.createdAt.toDate().toISOString().slice(0,10):""),Ge=r[D.id];return o.jsxs("tr",{className:"text-center whitespace-nowrap",children:[o.jsx("td",{className:"p-2 border",children:U}),o.jsx("td",{className:"p-2 border",children:D.name}),o.jsx("td",{className:"p-2 border",children:D.totalPackages}),o.jsx("td",{className:"p-2 border",children:Ge?Ge.remainingPackages:0}),o.jsx("td",{className:"p-2 border",children:D.subtotal.toFixed(2)}),o.jsx("td",{className:"p-2 border",children:D.totalRivas.toFixed(2)}),o.jsx("td",{className:"p-2 border",children:D.totalSanJorge.toFixed(2)}),o.jsx("td",{className:"p-2 border",children:D.totalIsla.toFixed(2)}),o.jsx("td",{className:"p-2 border",children:L}),o.jsx("td",{className:"p-2 border",children:Z}),o.jsx("td",{className:"p-2 border",children:ge}),o.jsx("td",{className:"p-2 border",children:o.jsx("button",{className:"px-2 py-1 rounded bg-blue-600 text-white hover:bg-blue-700 text-xs",onClick:()=>R(D),children:"Ver pedido"})})]},D.id)})})]})}),h&&g&&o.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-40 flex items-center justify-center z-50",children:o.jsxs("div",{className:"bg-white p-6 rounded shadow-lg w-full max-w-5xl max-h-[90vh] overflow-y-auto text-sm",children:[o.jsxs("div",{className:"flex justify-between items-center mb-3",children:[o.jsxs("h3",{className:"text-xl font-bold",children:["Detalle: ",g.name]}),o.jsx("button",{className:"px-3 py-1 rounded bg-gray-200 hover:bg-gray-300 text-xs",onClick:()=>{A(!1),x(null),b([]),l("")},children:"Cerrar"})]}),o.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-3 mb-4 text-xs md:text-sm",children:[o.jsxs("div",{className:"p-2 border rounded bg-gray-50",children:[o.jsx("div",{className:"text-gray-600",children:"Fecha del pedido"}),o.jsx("div",{className:"font-semibold",children:g.date||((M=g.createdAt)!=null&&M.toDate?g.createdAt.toDate().toISOString().slice(0,10):"")})]}),o.jsxs("div",{className:"p-2 border rounded bg-gray-50",children:[o.jsx("div",{className:"text-gray-600",children:"Paquetes totales"}),o.jsx("div",{className:"font-semibold",children:((K=r[g.id])==null?void 0:K.totalPackages)??g.totalPackages})]}),o.jsxs("div",{className:"p-2 border rounded bg-gray-50",children:[o.jsx("div",{className:"text-gray-600",children:"Paquetes restantes"}),o.jsx("div",{className:"font-semibold",children:((W=r[g.id])==null?void 0:W.remainingPackages)??0})]}),o.jsxs("div",{className:"p-2 border rounded bg-gray-50",children:[o.jsx("div",{className:"text-gray-600",children:"Subtotal (proveedor)"}),o.jsx("div",{className:"font-semibold",children:Qh(g.subtotal)})]}),o.jsxs("div",{className:"p-2 border rounded bg-gray-50",children:[o.jsx("div",{className:"text-gray-600",children:"Total Rivas"}),o.jsx("div",{className:"font-semibold",children:Qh(g.totalRivas)})]}),o.jsxs("div",{className:"p-2 border rounded bg-gray-50",children:[o.jsx("div",{className:"text-gray-600",children:"Total San Jorge"}),o.jsx("div",{className:"font-semibold",children:Qh(g.totalSanJorge)})]}),o.jsxs("div",{className:"p-2 border rounded bg-gray-50",children:[o.jsx("div",{className:"text-gray-600",children:"Total Isla"}),o.jsx("div",{className:"font-semibold",children:Qh(g.totalIsla)})]})]}),o.jsxs("div",{className:"bg-white border rounded p-3 mb-4",children:[o.jsx("div",{className:"font-semibold mb-2",children:"Agregar producto"}),o.jsxs("div",{className:"flex flex-wrap gap-2 items-end text-xs",children:[o.jsxs("div",{className:"flex flex-col",children:[o.jsx("label",{className:"text-gray-600",children:"Margen Rivas"}),o.jsx("input",{type:"number",className:"border rounded px-2 py-1 w-28 text-right",value:w,onChange:D=>j(Number(D.target.value||0))})]}),o.jsxs("div",{className:"flex flex-col",children:[o.jsx("label",{className:"text-gray-600",children:"Margen SJ"}),o.jsx("input",{type:"number",className:"border rounded px-2 py-1 w-28 text-right",value:I,onChange:D=>_(Number(D.target.value||0))})]}),o.jsxs("div",{className:"flex flex-col",children:[o.jsx("label",{className:"text-gray-600",children:"Margen Isla"}),o.jsx("input",{type:"number",className:"border rounded px-2 py-1 w-28 text-right",value:E,onChange:D=>S(Number(D.target.value||0))})]}),o.jsxs("div",{className:"flex flex-col",children:[o.jsx("label",{className:"text-gray-600",children:"Producto"}),o.jsx("input",{className:"border rounded px-2 py-1 w-56",value:k,onChange:D=>P(D.target.value)})]}),o.jsxs("div",{className:"flex flex-col",children:[o.jsx("label",{className:"text-gray-600",children:"Categora"}),o.jsx("input",{className:"border rounded px-2 py-1 w-40",value:T,onChange:D=>F(D.target.value)})]}),o.jsxs("div",{className:"flex flex-col",children:[o.jsx("label",{className:"text-gray-600",children:"P. proveedor (paq)"}),o.jsx("input",{type:"number",className:"border rounded px-2 py-1 w-32 text-right",value:Y,onChange:D=>he(Number(D.target.value||0))})]}),o.jsxs("div",{className:"flex flex-col",children:[o.jsx("label",{className:"text-gray-600",children:"Paquetes"}),o.jsx("input",{type:"number",className:"border rounded px-2 py-1 w-24 text-right",value:ue,onChange:D=>fe(Number(D.target.value||0))})]}),o.jsxs("div",{className:"flex flex-col",children:[o.jsx("label",{className:"text-gray-600",children:"Und x Paq"}),o.jsx("input",{type:"number",className:"border rounded px-2 py-1 w-24 text-right",value:me,onChange:D=>ne(Number(D.target.value||1))})]}),o.jsx("button",{className:"px-3 py-2 rounded bg-green-600 text-white hover:bg-green-700",onClick:H,children:"Agregar producto"})]})]}),o.jsx("h4",{className:"font-semibold mb-2",children:"Productos del pedido"}),o.jsx("div",{className:"bg-white rounded border overflow-x-auto",children:o.jsxs("table",{className:"min-w-[1200px] text-xs md:text-sm",children:[o.jsx("thead",{className:"bg-gray-100",children:o.jsxs("tr",{className:"whitespace-nowrap",children:[o.jsx("th",{className:"p-2 border",children:"Producto"}),o.jsx("th",{className:"p-2 border",children:"Categora"}),o.jsx("th",{className:"p-2 border",children:"Paquetes"}),o.jsx("th",{className:"p-2 border",children:"Paquetes restantes"}),o.jsx("th",{className:"p-2 border",children:"Und x Paq"}),o.jsx("th",{className:"p-2 border",children:"P. proveedor (paq)"}),o.jsx("th",{className:"p-2 border",children:"Margen Rivas (%)"}),o.jsx("th",{className:"p-2 border",children:"Margen San Jorge (%)"}),o.jsx("th",{className:"p-2 border",children:"Margen Isla (%)"}),o.jsx("th",{className:"p-2 border",children:"Subtotal"}),o.jsx("th",{className:"p-2 border",children:"Total Rivas"}),o.jsx("th",{className:"p-2 border",children:"Total San Jorge"}),o.jsx("th",{className:"p-2 border",children:"Total Isla"}),o.jsx("th",{className:"p-2 border",children:"P. unidad Rivas"}),o.jsx("th",{className:"p-2 border",children:"P. unidad San Jorge"}),o.jsx("th",{className:"p-2 border",children:"P. unidad Isla"})]})}),o.jsx("tbody",{children:m?o.jsx("tr",{children:o.jsx("td",{colSpan:16,className:"p-4 text-center",children:"Cargando productos"})}):y.length===0?o.jsx("tr",{children:o.jsx("td",{colSpan:16,className:"p-4 text-center",children:"Este pedido no tiene productos registrados."})}):y.map(D=>o.jsxs("tr",{className:"text-center whitespace-nowrap",children:[o.jsx("td",{className:"p-2 border",children:D.name}),o.jsx("td",{className:"p-2 border",children:D.category}),o.jsx("td",{className:"p-2 border",children:D.packages}),o.jsx("td",{className:"p-2 border",children:D.remainingPackages??D.packages}),o.jsx("td",{className:"p-2 border",children:D.unitsPerPackage}),o.jsx("td",{className:"p-2 border",children:D.providerPrice.toFixed(2)}),o.jsx("td",{className:"p-2 border",children:o.jsx("input",{type:"number",className:"w-20 border rounded px-1 py-0.5 text-right text-xs",value:D.marginRivas??0,onChange:L=>O(D.id,"marginRivas",L.target.value)})}),o.jsx("td",{className:"p-2 border",children:o.jsx("input",{type:"number",className:"w-20 border rounded px-1 py-0.5 text-right text-xs",value:D.marginSanJorge??0,onChange:L=>O(D.id,"marginSanJorge",L.target.value)})}),o.jsx("td",{className:"p-2 border",children:o.jsx("input",{type:"number",className:"w-20 border rounded px-1 py-0.5 text-right text-xs",value:D.marginIsla??0,onChange:L=>O(D.id,"marginIsla",L.target.value)})}),o.jsx("td",{className:"p-2 border",children:D.subtotal.toFixed(2)}),o.jsx("td",{className:"p-2 border",children:D.totalRivas.toFixed(2)}),o.jsx("td",{className:"p-2 border",children:D.totalSanJorge.toFixed(2)}),o.jsx("td",{className:"p-2 border",children:D.totalIsla.toFixed(2)}),o.jsx("td",{className:"p-2 border",children:D.unitPriceRivas}),o.jsx("td",{className:"p-2 border",children:D.unitPriceSanJorge}),o.jsx("td",{className:"p-2 border",children:D.unitPriceIsla})]},D.id))})]})}),i&&o.jsx("p",{className:"mt-3 text-sm",children:i})]})}),i&&!h&&o.jsx("p",{className:"mt-2 text-sm",children:i})]})}const Oa=t=>Math.round((Number(t)||0)*100)/100,Kg=t=>Math.round((Number(t)||0)*1e3)/1e3,Eo=t=>Number(t??0).toFixed(2),Cm=t=>Number(t??0).toFixed(3),xUe=(t,e)=>{var A;const r=t.date??((A=t.timestamp)!=null&&A.toDate?Sr(t.timestamp.toDate(),"yyyy-MM-dd"):"");if(!r)return[];const n=t.userEmail??"",a=t.vendorName||t.vendor||n||t.vendorId||"(sin vendedor)",s=t.type||"CONTADO",i=t.vendorId,l=Number(t.total??t.itemsTotal??t.amount??t.amountCharged??0)||0,c=Number(t.vendorCommissionAmount??0)||0,u=t.processedDate??t.closureDate??"";if(Array.isArray(t.items)&&t.items.length>0)return t.items.map((m,p)=>{const g=Number((m==null?void 0:m.packages)??(m==null?void 0:m.qty)??(m==null?void 0:m.quantity)??0),x=Number((m==null?void 0:m.lineFinal)??0)||Math.max(0,Number((m==null?void 0:m.unitPricePackage)||(m==null?void 0:m.unitPrice)||0)*g-Number((m==null?void 0:m.discount)||0));let y=0;return c>0&&l>0&&Number(x||0)>0&&(y=Oa(c*Number(x||0)/l)),{id:`${e}#${p}`,productName:String((m==null?void 0:m.productName)??"(sin nombre)"),quantity:g,amount:Oa(x),amountSuggested:Number(t.amountSuggested??0),date:r,userEmail:a,sellerEmail:n,clientName:t.clientName??"",amountReceived:Number(t.amountReceived??0),change:String(t.change??"0"),status:t.status??"FLOTANTE",allocations:Array.isArray(m==null?void 0:m.allocations)?m.allocations:t.allocations,avgUnitCost:Number((m==null?void 0:m.avgUnitCost)??t.avgUnitCost??0),cogsAmount:Number((m==null?void 0:m.cogsAmount)??0),type:s,vendorId:i,vendorCommissionAmount:y,processedDate:u||""}});const d=Number(t.packagesTotal??t.quantity??0),f=Number(t.amount??t.amountCharged??t.total??0)||0;let h=0;return h=Oa(Number(t.vendorCommissionAmount??0)||0),[{id:e,productName:t.productName??"(sin nombre)",quantity:d,amount:f,amountSuggested:Number(t.amountSuggested??0),date:r,userEmail:a,sellerEmail:n,clientName:t.clientName??"",amountReceived:Number(t.amountReceived??0),change:String(t.change??"0"),status:t.status??"FLOTANTE",allocations:t.allocations,avgUnitCost:t.avgUnitCost,cogsAmount:t.cogsAmount,type:s,vendorId:i,vendorCommissionAmount:h,processedDate:u||""}]};function vUe({role:t,currentUserEmail:e,sellerCandyId:r,roles:n}){const[a,s]=v.useState([]),[i,l]=v.useState(null),[c,u]=v.useState(!0),[d,f]=v.useState(""),[h,A]=v.useState("ALL"),m=Sr(new Date,"yyyy-MM-dd"),[p,g]=v.useState(m),[x,y]=v.useState(m),[b,w]=v.useState("ALL"),[j,I]=v.useState(null),[_,E]=v.useState(0),[S,k]=v.useState(0),[P,T]=v.useState(""),[F,Y]=v.useState(0),[he,ue]=v.useState("0"),fe=v.useRef(null),me=n&&n.length?n:t,ne=!me||Yr(me,"admin"),Pe=Yr(me,"vendedor_dulces"),Ie=(e||"").trim().toLowerCase(),[O,H]=v.useState([]);v.useEffect(()=>{if(!p||!x)return;u(!0);const le=nr(ht(ke,"sales_candies"),cr("date",">=",p),cr("date","<=",x),on("date","asc")),Ue=Fd(le,rt=>{const mt=[];rt.forEach(gt=>{const Ct=xUe(gt.data(),gt.id);mt.push(...Ct)}),s(mt),u(!1)},rt=>{console.error("Error cargando ventas por periodo:",rt),s([]),u(!1)});return()=>Ue()},[p,x]),v.useEffect(()=>{(async()=>{const Ue=nr(ht(ke,"daily_closures_candies"),cr("date","==",m)),rt=await Ot(Ue);if(rt.empty)l(null);else{const mt=rt.docs[0];l({id:mt.id,...mt.data()})}})()},[m]),v.useEffect(()=>{(async()=>{try{const Ue=await Ot(ht(ke,"sellers_candies")),rt=[];Ue.forEach(mt=>{const gt=mt.data();rt.push({id:mt.id,name:gt.name||"",commissionPercent:Number(gt.commissionPercent||0)})}),H(rt)}catch(Ue){console.error("Error cargando sellers_candies",Ue)}})()},[]);const R=le=>Oa(Number(le.vendorCommissionAmount??0)||0),M=Lo.useMemo(()=>{let le=[...a];return h==="FLOTANTE"&&(le=le.filter(Ue=>Ue.status==="FLOTANTE")),h==="PROCESADA"&&(le=le.filter(Ue=>Ue.status==="PROCESADA")),ne&&b!=="ALL"&&(le=le.filter(Ue=>(Ue.vendorId||"")===b)),Pe&&(r?le=le.filter(Ue=>(Ue.vendorId||"")===r):Ie?le=le.filter(Ue=>(Ue.sellerEmail||"").toLowerCase()===Ie):le=[]),le},[h,a,ne,b,Pe,r,Ie]),K=Lo.useMemo(()=>M.filter(le=>le.status==="FLOTANTE").length,[M]),W=Lo.useMemo(()=>M.filter(le=>le.status==="PROCESADA").length,[M]),D=Lo.useMemo(()=>M.filter(le=>le.type==="CREDITO").length,[M]),L=Lo.useMemo(()=>M.filter(le=>le.type!=="CREDITO").length,[M]),Z=Kg(M.reduce((le,Ue)=>le+(Ue.quantity||0),0)),ge=Oa(M.reduce((le,Ue)=>le+Number(Ue.cogsAmount??0),0)),U=Oa(M.reduce((le,Ue)=>le+(Ue.amount||0),0)),Ge=Oa(U-ge);let ie=0,J=0,je=0,z=0,Ae=0,ye=0,Qe=0;M.forEach(le=>{const Ue=Number(le.amount||0),rt=Number(le.amountReceived||0),mt=R(le);Ae+=mt,le.type==="CREDITO"?(ie+=le.quantity||0,je+=Ue-rt,Qe+=mt):(J+=le.quantity||0,z+=Ue,ye+=mt)}),je=Oa(je),z=Oa(z),Ae=Oa(Ae),ye=Oa(ye),Qe=Oa(Qe);const st=Lo.useMemo(()=>{const le={};for(const Ue of M){const rt=(Ue.vendorId||"").trim();if(!rt||Ue.type==="CREDITO")continue;const mt=R(Ue);if(!le[rt]){const gt=O.find(Ct=>Ct.id===rt);le[rt]={vendorId:rt,name:(gt==null?void 0:gt.name)||Ue.userEmail||"(sin vendedor)",total:0}}le[rt].total=Oa(le[rt].total+mt)}return Object.values(le).filter(Ue=>Ue.total>0).sort((Ue,rt)=>rt.total-Ue.total)},[M,O]),ut=Lo.useMemo(()=>{const le={};for(const Ue of M){const rt=(Ue.vendorId||"").trim();if(!rt||Ue.type!=="CREDITO")continue;const mt=R(Ue);if(!le[rt]){const gt=O.find(Ct=>Ct.id===rt);le[rt]={vendorId:rt,name:(gt==null?void 0:gt.name)||Ue.userEmail||"(sin vendedor)",total:0}}le[rt].total=Oa(le[rt].total+mt)}return Object.values(le).filter(Ue=>Ue.total>0).sort((Ue,rt)=>rt.total-Ue.total)},[M,O]),De={};M.forEach(le=>{const Ue=le.productName||"(sin nombre)";De[Ue]||(De[Ue]={totalQuantity:0,totalAmount:0,totalCommission:0}),De[Ue].totalQuantity=Kg(De[Ue].totalQuantity+(le.quantity||0)),De[Ue].totalAmount=Oa(De[Ue].totalAmount+(le.amount||0)),De[Ue].totalCommission=Oa(De[Ue].totalCommission+R(le))});const it=Object.entries(De).map(([le,Ue])=>({productName:le,totalQuantity:Ue.totalQuantity,totalAmount:Ue.totalAmount,totalCommission:Ue.totalCommission})),dt=async()=>{if(ne)try{const le=M.filter(He=>He.status==="FLOTANTE");if(le.length===0){f("No hay ventas flotantes para procesar en este perodo.");return}const Ue={totalCharged:Oa(le.reduce((He,Ce)=>He+(Ce.amount||0),0)),totalSuggested:Oa(le.reduce((He,Ce)=>He+(Ce.amountSuggested||0),0)),totalUnits:Kg(le.reduce((He,Ce)=>He+(Ce.quantity||0),0)),totalCOGS:Oa(le.reduce((He,Ce)=>He+Number(Ce.cogsAmount??0),0))},rt=Oa(Ue.totalCharged-Ue.totalSuggested),mt=Oa(Ue.totalCharged-Ue.totalCOGS),gt=le.reduce((He,Ce)=>{const lt=Number(Ce.quantity||0),nt=Number(Ce.amount||0),Xe=Number(Ce.vendorCommissionAmount||0);return Ce.type==="CREDITO"?(He.packsCredit+=lt,He.amountCredit+=nt,He.comCredit+=Xe):(He.packsCash+=lt,He.amountCash+=nt,He.comCash+=Xe),He},{packsCash:0,packsCredit:0,amountCash:0,amountCredit:0,comCash:0,comCredit:0}),Ct={totalPacksCash:Kg(gt.packsCash),totalPacksCredit:Kg(gt.packsCredit),totalAmountCash:Oa(gt.amountCash),totalAmountCredit:Oa(gt.amountCredit),totalCommissionCash:Oa(gt.comCash),totalCommissionCredit:Oa(gt.comCredit)},jt=await xn(ht(ke,"daily_closures_candies"),{date:m,createdAt:fr.now(),periodStart:p,periodEnd:x,totalCharged:Ue.totalCharged,totalSuggested:Ue.totalSuggested,totalDifference:rt,totalUnits:Ue.totalUnits,totalCOGS:Ue.totalCOGS,grossProfit:mt,...Ct,products:le.map(He=>({productName:He.productName,quantity:He.quantity,amount:He.amount})),sales:le.map(He=>({id:He.id,productName:He.productName,quantity:He.quantity,amount:He.amount,amountSuggested:He.amountSuggested,userEmail:He.userEmail,clientName:He.clientName,amountReceived:He.amountReceived,change:He.change,status:He.status,cogsAmount:He.cogsAmount??0,avgUnitCost:He.avgUnitCost??null,allocations:He.allocations??[],date:He.date,type:He.type??"CONTADO",vendorId:He.vendorId??"",vendorCommissionAmount:Number(He.vendorCommissionAmount??0)||0,processedDate:m})),productSummary:Object.entries(le.reduce((He,Ce)=>{const lt=Ce.productName||"(sin nombre)";return He[lt]||(He[lt]={totalQuantity:0,totalAmount:0}),He[lt].totalQuantity=Kg(He[lt].totalQuantity+(Ce.quantity||0)),He[lt].totalAmount=Oa(He[lt].totalAmount+(Ce.amount||0)),He},{})).map(([He,Ce])=>({productName:He,totalQuantity:Ce.totalQuantity,totalAmount:Ce.totalAmount}))}),xe=tg(ke);le.forEach(He=>{xe.update(qt(ke,"sales_candies",He.id.split("#")[0]),{status:"PROCESADA",closureId:jt.id,closureDate:m,processedDate:m,processedAt:fr.now()})}),await xe.commit(),f(` Cierre guardado. Ventas procesadas: ${le.length}. (Proceso: ${m})`)}catch(le){console.error(le),f(" Error al guardar el cierre de dulces.")}},ce=async le=>{if(ne&&window.confirm("Revertir esta venta? Esta accin no se puede deshacer."))try{await nn(qt(ke,"sales_candies",le.split("#")[0]),{status:"FLOTANTE",closureId:null,closureDate:null,processedDate:null,processedAt:null}),f(" Venta revertida a FLOTANTE.")}catch(Ue){console.error(Ue),f(" No se pudo revertir la venta.")}},oe=le=>{ne&&(I(le),E(le.quantity),k(le.amount),T(le.clientName),Y(le.amountReceived),ue(le.change))},Me=async()=>{if(!(!j||!ne))try{await nn(qt(ke,"sales_candies",j.id.split("#")[0]),{packagesTotal:_,amount:S,amountCharged:S,clientName:P,amountReceived:F,change:he}),I(null),f(" Venta de dulces actualizada.")}catch(le){console.error(le),f(" No se pudo actualizar la venta de dulces.")}},Le=async le=>{if(ne&&window.confirm("Eliminar esta venta? Se restaurar el stock (paquetes) en los lotes asignados."))try{const{restored:Ue}=await LLe(le.split("#")[0]);f(` Venta eliminada. Stock restaurado (unidades internas): ${Number(Ue).toFixed(2)}.`)}catch(Ue){console.error(Ue),f(" No se pudo eliminar la venta de dulces.")}},ve=async()=>{if(fe.current){fe.current.classList.add("force-pdf-colors"),fe.current.classList.add("pdf-print-mode");try{const Ue=(await rg(fe.current,{backgroundColor:"#ffffff"})).toDataURL("image/png"),rt=new Or;rt.addImage(Ue,"PNG",10,10,190,0),rt.save(`cierre_dulces_${p}_a_${x}_proc_${m}.pdf`)}finally{fe.current.classList.remove("pdf-print-mode"),fe.current.classList.remove("force-pdf-colors")}}};return o.jsxs("div",{className:"max-w-7xl mx-auto bg-white p-6 rounded-2xl shadow-2xl",children:[o.jsx("style",{children:`
        .pdf-print-mode .pdf-desktop { display: block !important; }
        .pdf-print-mode .pdf-mobile  { display: none !important; }
      `}),o.jsxs("h2",{className:"text-2xl font-bold mb-4",children:["Cierre de Ventas de Dulces - Proceso: ",m]}),o.jsxs("div",{className:"flex flex-col md:flex-row md:items-end gap-3 mb-4",children:[o.jsxs("div",{className:"flex items-center gap-2",children:[o.jsx("label",{className:"text-sm",children:"Desde:"}),o.jsx("input",{type:"date",className:"border rounded px-2 py-1",value:p,onChange:le=>g(le.target.value)})]}),o.jsxs("div",{className:"flex items-center gap-2",children:[o.jsx("label",{className:"text-sm",children:"Hasta:"}),o.jsx("input",{type:"date",className:"border rounded px-2 py-1",value:x,onChange:le=>y(le.target.value)})]}),o.jsxs("div",{className:"flex items-center gap-2",children:[o.jsx("label",{className:"text-sm",children:"Filtrar:"}),o.jsxs("select",{className:"border rounded px-2 py-1",value:h,onChange:le=>A(le.target.value),children:[o.jsx("option",{value:"ALL",children:"Todas"}),o.jsx("option",{value:"FLOTANTE",children:"Venta Flotante"}),o.jsx("option",{value:"PROCESADA",children:"Venta Procesada"})]})]}),ne&&o.jsxs("div",{className:"flex items-center gap-2",children:[o.jsx("label",{className:"text-sm",children:"Vendedor:"}),o.jsxs("select",{className:"border rounded px-2 py-1",value:b,onChange:le=>w(le.target.value),children:[o.jsx("option",{value:"ALL",children:"Todos"}),O.map(le=>o.jsx("option",{value:le.id,children:le.name||le.id},le.id))]})]})]}),o.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 lg:grid-cols-5 gap-3 mb-4",children:[o.jsxs("div",{className:"border rounded-xl p-3 shadow-sm bg-gray-50",children:[o.jsx("div",{className:"text-xs text-gray-600",children:"Ventas flotantes"}),o.jsx("div",{className:"text-2xl font-bold",children:K}),o.jsxs("div",{className:"text-xs text-gray-500 mt-1",children:["Perodo: ",p,"  ",x]})]}),o.jsxs("div",{className:"border rounded-xl p-3 shadow-sm bg-gray-50",children:[o.jsx("div",{className:"text-xs text-gray-600",children:"Ventas procesadas"}),o.jsx("div",{className:"text-2xl font-bold",children:W}),o.jsxs("div",{className:"text-xs text-gray-500 mt-1",children:["Perodo: ",p,"  ",x]})]}),o.jsxs("div",{className:"border rounded-xl p-3 shadow-sm bg-gray-50",children:[o.jsx("div",{className:"text-xs text-gray-600",children:"Ventas crdito"}),o.jsx("div",{className:"text-2xl font-bold",children:D}),o.jsxs("div",{className:"text-xs text-gray-500 mt-1",children:["Perodo: ",p,"  ",x]})]}),o.jsxs("div",{className:"border rounded-xl p-3 shadow-sm bg-gray-50",children:[o.jsx("div",{className:"text-xs text-gray-600",children:"Ventas cash"}),o.jsx("div",{className:"text-2xl font-bold",children:L}),o.jsxs("div",{className:"text-xs text-gray-500 mt-1",children:["Perodo: ",p,"  ",x]})]}),o.jsxs("div",{className:"border rounded-xl p-3 shadow-sm bg-gray-50",children:[o.jsx("div",{className:"text-xs text-gray-600",children:"Comisin cash (perodo)"}),o.jsxs("div",{className:"text-2xl font-bold",children:["C$",Eo(ye)]}),o.jsxs("div",{className:"text-xs text-gray-500 mt-1",children:["Perodo: ",p,"  ",x]})]}),o.jsxs("div",{className:"border rounded-xl p-3 shadow-sm bg-gray-50",children:[o.jsx("div",{className:"text-xs text-gray-600",children:"Comisin crdito (perodo)"}),o.jsxs("div",{className:"text-2xl font-bold",children:["C$",Eo(Qe)]}),o.jsxs("div",{className:"text-xs text-gray-500 mt-1",children:["Perodo: ",p,"  ",x]})]})]}),o.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-3 mb-4",children:[o.jsxs("div",{className:"border rounded-xl p-3 shadow-sm bg-gray-50",children:[o.jsx("div",{className:"text-xs text-gray-600",children:"Vendedores (comisin CASH del perodo)"}),st.length===0?o.jsx("div",{className:"text-sm text-gray-500 mt-2",children:""}):o.jsx("div",{className:"mt-2 space-y-1 max-h-28 overflow-auto pr-1",children:st.map(le=>o.jsxs("div",{className:"flex items-center justify-between text-sm",children:[o.jsx("span",{className:"truncate",children:le.name}),o.jsxs("strong",{className:"ml-2",children:["C$",Eo(le.total)]})]},le.vendorId))})]}),o.jsxs("div",{className:"border rounded-xl p-3 shadow-sm bg-gray-50",children:[o.jsx("div",{className:"text-xs text-gray-600",children:"Vendedores (comisin CRDITO del perodo)"}),ut.length===0?o.jsx("div",{className:"text-sm text-gray-500 mt-2",children:""}):o.jsx("div",{className:"mt-2 space-y-1 max-h-28 overflow-auto pr-1",children:ut.map(le=>o.jsxs("div",{className:"flex items-center justify-between text-sm",children:[o.jsx("span",{className:"truncate",children:le.name}),o.jsxs("strong",{className:"ml-2",children:["C$",Eo(le.total)]})]},le.vendorId))})]})]}),c?o.jsx("p",{children:"Cargando ventas..."}):o.jsxs("div",{ref:fe,children:[o.jsx("div",{className:"pdf-desktop hidden md:block",children:o.jsxs("table",{className:"min-w-full border text-sm mb-4 shadow-2xl",children:[o.jsx("thead",{className:"bg-gray-100",children:o.jsxs("tr",{children:[o.jsx("th",{className:"border p-2",children:"Estado"}),o.jsx("th",{className:"border p-2",children:"Producto"}),o.jsx("th",{className:"border p-2",children:"Tipo"}),o.jsx("th",{className:"border p-2",children:"Paquetes"}),o.jsx("th",{className:"border p-2",children:"Monto"}),o.jsx("th",{className:"border p-2",children:"Comisin"}),o.jsx("th",{className:"border p-2",children:"Fecha venta"}),o.jsx("th",{className:"border p-2",children:"Fecha proceso"}),o.jsx("th",{className:"border p-2",children:"Vendedor"}),o.jsx("th",{className:"border p-2",children:"Acciones"})]})}),o.jsxs("tbody",{children:[M.map(le=>{const Ue=R(le),rt=(le.processedDate||"").trim();return o.jsxs("tr",{className:"text-center",children:[o.jsx("td",{className:"border p-1",children:o.jsx("span",{className:`px-2 py-0.5 rounded text-xs ${le.status==="PROCESADA"?"bg-green-100 text-green-700":"bg-yellow-100 text-yellow-700"}`,children:le.status})}),o.jsx("td",{className:"border p-1",children:le.productName}),o.jsx("td",{className:"border p-1",children:le.type==="CREDITO"?"Crdito":"Cash"}),o.jsx("td",{className:"border p-1",children:Cm(le.quantity)}),o.jsxs("td",{className:"border p-1",children:["C$",Eo(le.amount)]}),o.jsx("td",{className:"border p-1",children:Ue>0?`C$${Eo(Ue)}`:""}),o.jsx("td",{className:"border p-1",children:le.date}),o.jsx("td",{className:"border p-1",children:rt||""}),o.jsx("td",{className:"border p-1",children:le.userEmail}),o.jsx("td",{className:"border p-1",children:le.status==="FLOTANTE"?o.jsx("div",{className:"flex gap-2 justify-center",children:ne?o.jsxs(o.Fragment,{children:[o.jsx("button",{onClick:()=>oe(le),className:"text-xs bg-indigo-600 text-white px-2 py-1 rounded hover:bg-indigo-700",children:"Editar"}),o.jsx("button",{onClick:()=>Le(le.id),className:"text-xs bg-red-600 text-white px-2 py-1 rounded hover:bg-red-700",children:"Eliminar"})]}):o.jsx("span",{className:"text-gray-400 text-xs",children:""})}):le.status==="PROCESADA"?o.jsx("div",{className:"flex gap-2 justify-center",children:ne?o.jsx("button",{onClick:()=>ce(le.id),className:"text-xs bg-red-600 text-white px-2 py-1 rounded hover:bg-red-700",children:"Revertir"}):o.jsx("span",{className:"text-gray-400 text-xs",children:""})}):o.jsx("span",{className:"text-gray-400 text-xs",children:"No options"})})]},le.id)}),M.length===0&&o.jsx("tr",{children:o.jsx("td",{colSpan:10,className:"p-3 text-center text-gray-500",children:"Sin ventas para mostrar."})})]})]})}),o.jsxs("div",{className:"pdf-mobile md:hidden space-y-3 mb-4",children:[M.map(le=>{const Ue=R(le),rt=(le.processedDate||"").trim();return o.jsxs("details",{className:"border rounded-xl bg-white shadow-sm",children:[o.jsxs("summary",{className:"px-4 py-3 flex justify-between items-center cursor-pointer",children:[o.jsxs("div",{className:"min-w-0",children:[o.jsx("div",{className:"font-semibold truncate",children:le.productName}),o.jsxs("div",{className:"text-xs text-gray-500",children:[le.type==="CREDITO"?"Crdito":"Cash","  ",le.date]})]}),o.jsxs("div",{className:"text-right shrink-0 ml-3",children:[o.jsxs("div",{className:"font-bold",children:["C$",Eo(le.amount)]}),o.jsx("span",{className:`text-xs px-2 py-0.5 rounded ${le.status==="PROCESADA"?"bg-green-100 text-green-700":"bg-yellow-100 text-yellow-700"}`,children:le.status})]})]}),o.jsxs("div",{className:"px-4 pb-4 pt-2 text-sm space-y-2",children:[o.jsxs("div",{className:"flex justify-between gap-3",children:[o.jsx("span",{className:"text-gray-600",children:"Paquetes"}),o.jsx("strong",{children:Cm(le.quantity)})]}),o.jsxs("div",{className:"flex justify-between gap-3",children:[o.jsx("span",{className:"text-gray-600",children:"Comisin"}),o.jsx("strong",{children:Ue>0?`C$${Eo(Ue)}`:""})]}),o.jsxs("div",{className:"flex justify-between gap-3",children:[o.jsx("span",{className:"text-gray-600",children:"Fecha proceso"}),o.jsx("strong",{children:rt||""})]}),o.jsxs("div",{className:"flex justify-between gap-3",children:[o.jsx("span",{className:"text-gray-600",children:"Vendedor"}),o.jsx("strong",{className:"text-right break-all",children:le.userEmail})]}),o.jsx("div",{className:"pt-2",children:le.status==="FLOTANTE"?o.jsx("div",{className:"flex gap-2",children:ne?o.jsxs(o.Fragment,{children:[o.jsx("button",{onClick:()=>oe(le),className:"flex-1 text-xs bg-indigo-600 text-white py-2 rounded hover:bg-indigo-700",children:"Editar"}),o.jsx("button",{onClick:()=>Le(le.id),className:"flex-1 text-xs bg-red-600 text-white py-2 rounded hover:bg-red-700",children:"Eliminar"})]}):o.jsx("div",{className:"text-gray-400 text-xs w-full text-center",children:""})}):le.status==="PROCESADA"?o.jsx("div",{className:"flex gap-2",children:ne?o.jsx("button",{onClick:()=>ce(le.id),className:"w-full text-xs bg-red-600 text-white py-2 rounded hover:bg-red-700",children:"Revertir"}):o.jsx("div",{className:"text-gray-400 text-xs w-full text-center",children:""})}):o.jsx("div",{className:"text-gray-400 text-xs w-full text-center",children:"No options"})})]})]},le.id)}),M.length===0&&o.jsx("div",{className:"text-center text-gray-500 text-sm py-6",children:"Sin ventas para mostrar."})]}),o.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 lg:grid-cols-5 gap-2 text-sm mb-4",children:[o.jsxs("div",{children:["Total paquetes crdito: ",o.jsx("strong",{children:Cm(ie)})]}),o.jsxs("div",{children:["Total paquetes cash: ",o.jsx("strong",{children:Cm(J)})]}),o.jsxs("div",{children:["Total pendiente crdito:"," ",o.jsxs("strong",{children:["C$",Eo(je)]})]}),o.jsxs("div",{children:["Total cobrado cash: ",o.jsxs("strong",{children:["C$",Eo(z)]})]}),o.jsxs("div",{children:["Total comisin: ",o.jsxs("strong",{children:["C$",Eo(Ae)]})]})]}),(ge>0||Ge!==U)&&o.jsxs("div",{className:"grid grid-cols-2 md:grid-cols-3 gap-2 text-sm mb-6",children:[o.jsxs("div",{children:["Costo total (COGS): ",o.jsxs("strong",{children:["C$",Eo(ge)]})]}),o.jsxs("div",{children:["Ganancia antes de gasto:"," ",o.jsxs("strong",{children:["C$",Eo(Ge)]})]}),o.jsxs("div",{children:["Total paquetes (visibles):"," ",o.jsx("strong",{children:Cm(Z)})]})]}),o.jsx("h3",{className:"font-semibold mb-2",children:"Consolidado por producto"}),o.jsx("div",{className:"pdf-desktop hidden md:block",children:o.jsxs("table",{className:"min-w-full border text-sm mb-2 shadow-2xl",children:[o.jsx("thead",{className:"bg-gray-100",children:o.jsxs("tr",{children:[o.jsx("th",{className:"border p-2",children:"Producto"}),o.jsx("th",{className:"border p-2",children:"Total paquetes"}),o.jsx("th",{className:"border p-2",children:"Total dinero"}),o.jsx("th",{className:"border p-2",children:"Comisin"})]})}),o.jsxs("tbody",{children:[it.map(le=>o.jsxs("tr",{className:"text-center",children:[o.jsx("td",{className:"border p-1",children:le.productName}),o.jsx("td",{className:"border p-1",children:Cm(le.totalQuantity)}),o.jsxs("td",{className:"border p-1",children:["C$",Eo(le.totalAmount)]}),o.jsx("td",{className:"border p-1",children:le.totalCommission>0?`C$${Eo(le.totalCommission)}`:""})]},le.productName)),it.length===0&&o.jsx("tr",{children:o.jsx("td",{colSpan:4,className:"p-3 text-center text-gray-500",children:"Sin datos para consolidar."})})]})]})}),o.jsxs("div",{className:"pdf-mobile md:hidden space-y-2",children:[it.map(le=>o.jsxs("div",{className:"border rounded-xl bg-white shadow-sm p-3",children:[o.jsx("div",{className:"font-semibold",children:le.productName}),o.jsxs("div",{className:"mt-2 text-sm space-y-1",children:[o.jsxs("div",{className:"flex justify-between gap-3",children:[o.jsx("span",{className:"text-gray-600",children:"Total paquetes"}),o.jsx("strong",{children:Cm(le.totalQuantity)})]}),o.jsxs("div",{className:"flex justify-between gap-3",children:[o.jsx("span",{className:"text-gray-600",children:"Total dinero"}),o.jsxs("strong",{children:["C$",Eo(le.totalAmount)]})]}),o.jsxs("div",{className:"flex justify-between gap-3",children:[o.jsx("span",{className:"text-gray-600",children:"Comisin"}),o.jsx("strong",{children:le.totalCommission>0?`C$${Eo(le.totalCommission)}`:""})]})]})]},le.productName)),it.length===0&&o.jsx("div",{className:"text-center text-gray-500 text-sm py-6",children:"Sin datos para consolidar."})]})]}),o.jsxs("div",{className:"flex gap-2 mt-4",children:[ne&&o.jsx("button",{onClick:dt,className:"bg-blue-600 text-white px-4 py-2 rounded hover:bg-blue-700",children:"Cerrar ventas del perodo"}),o.jsx("button",{onClick:ve,className:"bg-green-600 text-white px-4 py-2 rounded hover:bg-green-700",children:"Descargar PDF"})]}),d&&o.jsx("p",{className:"mt-2 text-sm",children:d}),j&&ne&&o.jsx("div",{className:"fixed inset-0 bg-black/30 flex items-center justify-center p-4",children:o.jsxs("div",{className:"bg-white rounded-xl shadow-xl w-full max-w-md p-4 space-y-3",children:[o.jsx("h4",{className:"font-semibold text-lg",children:"Editar venta de dulces"}),o.jsxs("div",{className:"text-sm text-gray-500",children:[j.productName,"  ",j.userEmail]}),o.jsx("label",{className:"text-sm",children:"Paquetes"}),o.jsx("input",{type:"number",step:"0.01",className:"w-full border rounded px-2 py-1",value:_,onChange:le=>E(parseFloat(le.target.value||"0"))}),o.jsx("label",{className:"text-sm",children:"Monto cobrado"}),o.jsx("input",{type:"number",step:"0.01",className:"w-full border rounded px-2 py-1",value:S,onChange:le=>k(parseFloat(le.target.value||"0"))}),o.jsx("label",{className:"text-sm",children:"Cliente"}),o.jsx("input",{type:"text",className:"w-full border rounded px-2 py-1",value:P,onChange:le=>T(le.target.value)}),o.jsx("label",{className:"text-sm",children:"Paga con"}),o.jsx("input",{type:"number",step:"0.01",className:"w-full border rounded px-2 py-1",value:F,onChange:le=>Y(parseFloat(le.target.value||"0"))}),o.jsx("label",{className:"text-sm",children:"Vuelto"}),o.jsx("input",{type:"text",className:"w-full border rounded px-2 py-1",value:he,onChange:le=>ue(le.target.value)}),o.jsxs("div",{className:"flex gap-2 justify-end pt-2",children:[o.jsx("button",{onClick:()=>I(null),className:"px-3 py-1 border rounded",children:"Cancelar"}),o.jsx("button",{onClick:Me,className:"px-3 py-1 rounded text-white bg-indigo-600 hover:bg-indigo-700",children:"Guardar cambios"})]})]})})]})}const tA=t=>`C$ ${(Number(t)||0).toFixed(2)}`,Fc=t=>Math.round((Number(t)||0)*100)/100;function yUe(t){if(!t)return"";switch(t){case"RIVAS":return"Rivas";case"SAN_JORGE":return"San Jorge";case"ISLA":return"Isla de Ometepe";default:return""}}function bUe(t){return t.toISOString().slice(0,10)}function wUe(){const t=new Date;return`${t.getFullYear()}-${String(t.getMonth()+1).padStart(2,"0")}-01`}function NUe(){const t=new Date,e=new Date(t.getFullYear(),t.getMonth()+1,1),r=new Date(e.getTime()-24*60*60*1e3);return bUe(r)}function CUe(){const[t,e]=v.useState(wUe()),[r,n]=v.useState(NUe()),[a,s]=v.useState(!1),[i,l]=v.useState(""),[c,u]=v.useState({}),[d,f]=v.useState({}),[h,A]=v.useState([]),[m,p]=v.useState([]),[g,x]=v.useState({}),[y,b]=v.useState(!1),[w,j]=v.useState(null),[I,_]=v.useState(null),E=v.useMemo(()=>w&&h.find(ue=>ue.vendorId===w)||null,[w,h]),S=v.useMemo(()=>{var ue;return!w||!I?[]:((ue=g[w])==null?void 0:ue[I])||[]},[w,I,g]),k=v.useMemo(()=>Fc(h.reduce((ue,fe)=>ue+(fe.totalSoldMoney||0),0)),[h]),P=v.useMemo(()=>Fc(h.reduce((ue,fe)=>ue+(fe.totalCreditMoney||0),0)),[h]);v.useEffect(()=>{(async()=>{try{const ue=await Ot(ht(ke,"sellers_candies")),fe={};ue.forEach(Pe=>{const Ie=Pe.data(),O=Ie.branch||"Rivas";let H="RIVAS";O==="San Jorge"?H="SAN_JORGE":O==="Isla Ometepe"&&(H="ISLA"),fe[Pe.id]={id:Pe.id,name:Ie.name??"(sin nombre)",branch:H,branchLabel:O,commissionPercent:Number(Ie.commissionPercent??0)}});const me=await Ot(ht(ke,"products_candies")),ne={};me.forEach(Pe=>{const Ie=Pe.data();ne[Pe.id]={id:Pe.id,name:Ie.name??"(sin nombre)"}}),u(fe),f(ne)}catch(ue){console.error(ue),l(" Error cargando catlogos de vendedores/productos.")}})()},[]);const T=async()=>{if(!t||!r){l("Selecciona rango de fechas vlido.");return}if(!Object.keys(c).length){l("Cargando vendedores, intenta de nuevo en unos segundos.");return}s(!0),l("");try{const ue={},fe={},me=nr(ht(ke,"inventory_candies_sellers"),cr("date",">=",t),cr("date","<=",r)),ne=await Ot(me),Pe={},Ie={},O={},H={};ne.forEach(z=>{var lt,nt;const Ae=z.data(),ye=Ae.sellerId||"";if(!ye)return;const Qe=Ae.productId||"",st=Ae.productName||((lt=d[Qe])==null?void 0:lt.name)||"(sin nombre)",ut=Math.max(1,Math.floor(Number(Ae.unitsPerPackage||1))),De=Number(Ae.totalUnits??0),it=Number(Ae.packages??0),dt=Number(Ae.remainingUnits??Ae.remaining??0),ce=Number(Ae.remainingPackages??0),oe=it>0?it:De>0?Math.floor(De/ut):0,Me=ce>0?ce:dt>0?Math.floor(dt/ut):0;Pe[ye]=(Pe[ye]||0)+oe,Ie[ye]=(Ie[ye]||0)+Me;const Le=Ae.orderId||Ae.vendorOrderId||Ae.orderNumber||Ae.order||z.id;O[ye]||(O[ye]=new Set),O[ye].add(Le);const ve=((nt=c[ye])==null?void 0:nt.name)||Ae.sellerName||"(sin vendedor)",le=String(Ae.date||""),Ue=Number(Ae.totalVendor??0),rt=Number(Ae.gainVendor??0),mt=it>0?it:De>0?Math.floor(De/ut):0,gt=mt>0?Ue/mt:0,Ct=mt>0?rt/mt:0,jt=Fc(oe*gt),xe=Fc(oe*Ct),He=Fc(Me*gt),Ce=Fc(Me*Ct);H[ye]||(H[ye]={ordered:[],remaining:[]}),oe>0&&H[ye].ordered.push({date:le,vendorName:ve,productName:st,packages:oe,totalMoney:jt,vendorCommission:xe}),Me>0&&H[ye].remaining.push({date:le,vendorName:ve,productName:st,packages:Me,totalMoney:He,vendorCommission:Ce})});const R={};Object.keys(O).forEach(z=>{R[z]=O[z].size});const M=nr(ht(ke,"sales_candies"),cr("date",">=",t),cr("date","<=",r)),K=await Ot(M),W={},D={},L={},Z={},ge={},U={};K.forEach(z=>{const Ae=z.data(),ye=Ae.date||"",Qe=Ae.vendorId||Ae.sellerId||"";if(!Qe)return;const st=c[Qe],ut=Ae.vendorName||(st==null?void 0:st.name)||"(sin vendedor)",De=Number(Ae.vendorCommissionPercent??(st==null?void 0:st.commissionPercent)??0)||0,it=Array.isArray(Ae.items)?Ae.items:[];if(!it.length)return;const dt=String(Ae.type||"").toUpperCase()==="CREDITO";ge[Qe]||(ge[Qe]={sold:[],credit:[]}),it.forEach(ce=>{var jt;const oe=ce.productName||((jt=d[ce.productId||""])==null?void 0:jt.name)||"(sin nombre)",Me=ce.packages??ce.qty??ce.quantity??0,Le=Number(Me||0);if(Le<=0)return;const ve=Number(ce.unitPricePackage??ce.unitPrice??0)||0,le=Math.max(0,Number(ce.discount||0)),Ue=Le*ve,rt=Fc(Math.max(0,Ue-le));if(rt<=0)return;console.log("DBG",{isCredit:dt,vendorId:Qe,commissionPercent:De,lineFinal:rt,storedItemCommission:Number(ce.vendorCommissionAmount??0)});let mt=0;const gt=Number(ce.vendorCommissionAmount??0);gt?mt=Fc(gt):De>0&&(mt=Fc(rt*De/100)),dt?(D[Qe]=(D[Qe]||0)+Le,Z[Qe]=(Z[Qe]||0)+rt):(W[Qe]=(W[Qe]||0)+Le,L[Qe]=(L[Qe]||0)+rt),dt?fe[Qe]=(fe[Qe]||0)+mt:ue[Qe]=(ue[Qe]||0)+mt,dt?ge[Qe].credit.push({date:ye,vendorName:ut,productName:oe,packages:Le,totalMoney:rt,vendorCommission:0}):ge[Qe].sold.push({date:ye,vendorName:ut,productName:oe,packages:Le,totalMoney:rt,vendorCommission:mt});const Ct=oe;U[Ct]||(U[Ct]={productName:oe,packages:0,totalMoney:0}),U[Ct].packages+=Le,U[Ct].totalMoney+=rt})});const Ge=new Set([...Object.keys(Pe),...Object.keys(Ie),...Object.keys(W),...Object.keys(D)]),ie=[],J={};Ge.forEach(z=>{var Me,Le,ve,le;const Ae=c[z],ye=(Ae==null?void 0:Ae.name)||"(sin vendedor)",Qe=Ae?Ae.branchLabel||yUe(Ae.branch):"",st=Pe[z]||0,ut=Ie[z]||0,De=W[z]||0,it=D[z]||0,dt=Fc(L[z]||0),ce=Fc(Z[z]||0),oe=R[z]||0;ie.push({vendorId:z,vendorName:ye,branchLabel:Qe,orderedPackages:st,remainingPackages:ut,soldPackages:De,creditPackages:it,totalSoldMoney:dt,totalCreditMoney:ce,ordersCreated:oe,commissionCash:Fc(ue[z]||0),commissionCredit:0}),J[z]={ordered:(((Me=H[z])==null?void 0:Me.ordered)||[]).sort((Ue,rt)=>Ue.date.localeCompare(rt.date)),remaining:(((Le=H[z])==null?void 0:Le.remaining)||[]).sort((Ue,rt)=>Ue.date.localeCompare(rt.date)),sold:(((ve=ge[z])==null?void 0:ve.sold)||[]).sort((Ue,rt)=>Ue.date.localeCompare(rt.date)),credit:(((le=ge[z])==null?void 0:le.credit)||[]).sort((Ue,rt)=>Ue.date.localeCompare(rt.date))}}),ie.sort((z,Ae)=>z.vendorName.localeCompare(Ae.vendorName,"es")),A(ie),x(J);const je=Object.values(U).map(z=>({productName:z.productName,packages:z.packages,totalMoney:Fc(z.totalMoney)})).sort((z,Ae)=>Ae.packages-z.packages).slice(0,10);p(je),ie.length||l("Sin datos para el rango seleccionado.")}catch(ue){console.error(ue),l(" Error cargando consolidado de vendedores.")}finally{s(!1)}};v.useEffect(()=>{Object.keys(c).length&&T()},[c]);const F=(ue,fe)=>{j(ue),_(fe),b(!0)},Y=()=>{b(!1),j(null),_(null)},he=()=>{if(!h.length){l("No hay datos para exportar.");return}const ue=["Vendedor","Sucursal","Paquetes ordenados","Paquetes restantes","Paquetes vendidos","Paquetes fiados","Total vendidos (C$)","Comisin Cash (C$)","Total fiado (C$)","Comisin Crdito (C$)","rdenes creadas"],fe=h.map(O=>[O.vendorName,O.branchLabel,O.orderedPackages.toString(),O.remainingPackages.toString(),O.soldPackages.toString(),O.creditPackages.toString(),O.totalSoldMoney.toFixed(2),O.commissionCash.toFixed(2),O.totalCreditMoney.toFixed(2),O.commissionCredit.toFixed(2),O.ordersCreated.toString()]),me=[ue,...fe].map(O=>O.map(H=>`"${String(H).replace(/"/g,'""')}"`).join(",")).join(`
`),ne=new Blob([me],{type:"text/csv;charset=utf-8;"}),Pe=URL.createObjectURL(ne),Ie=document.createElement("a");Ie.href=Pe,Ie.download=`consolidado_vendedores_dulces_${t}_a_${r}.csv`,Ie.click(),URL.revokeObjectURL(Pe)};return o.jsxs("div",{className:"max-w-7xl mx-auto bg-white p-6 rounded-2xl shadow-2xl",children:[o.jsx("h2",{className:"text-2xl font-bold mb-4",children:"Consolidado por Vendedor - Dulces"}),o.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-3 mb-4 text-sm",children:[o.jsxs("div",{children:[o.jsx("label",{className:"block font-semibold mb-1",children:"Desde"}),o.jsx("input",{type:"date",className:"w-full border rounded px-2 py-1",value:t,onChange:ue=>e(ue.target.value)})]}),o.jsxs("div",{children:[o.jsx("label",{className:"block font-semibold mb-1",children:"Hasta"}),o.jsx("input",{type:"date",className:"w-full border rounded px-2 py-1",value:r,onChange:ue=>n(ue.target.value)})]}),o.jsx("div",{className:"flex items-end",children:o.jsx("button",{type:"button",onClick:T,className:"bg-blue-600 text-white px-4 py-2 rounded hover:bg-blue-700 w-full",disabled:a,children:a?"Cargando...":"Aplicar filtros"})}),o.jsx("div",{className:"flex items-end",children:o.jsx("button",{type:"button",onClick:he,className:"bg-green-600 text-white px-4 py-2 rounded hover:bg-green-700 w-full",children:"Exportar CSV"})})]}),o.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4 mb-6 text-sm",children:[o.jsxs("div",{className:"border rounded-lg p-3 bg-gray-50",children:[o.jsx("div",{className:"text-xs text-gray-500",children:"Ventas Cash"}),o.jsx("div",{className:"text-xl font-semibold",children:tA(k)})]}),o.jsxs("div",{className:"border rounded-lg p-3 bg-gray-50",children:[o.jsx("div",{className:"text-xs text-gray-500",children:"Ventas Credito"}),o.jsx("div",{className:"text-xl font-semibold",children:tA(P)})]}),o.jsxs("div",{className:"border rounded-lg p-3 bg-gray-50",children:[o.jsx("div",{className:"text-xs text-gray-500",children:"Vendedores con Inventario"}),o.jsx("div",{className:"text-xl font-semibold",children:h.length})]})]}),o.jsx("div",{className:"overflow-x-auto mb-6",children:o.jsxs("table",{className:"min-w-full border text-sm shadow-2xl",children:[o.jsx("thead",{className:"bg-gray-100",children:o.jsxs("tr",{children:[o.jsx("th",{className:"border p-2",children:"Vendedor"}),o.jsx("th",{className:"border p-2",children:"Sucursal"}),o.jsx("th",{className:"border p-2",children:"Paquetes ordenados"}),o.jsx("th",{className:"border p-2",children:"Paquetes restantes"}),o.jsx("th",{className:"border p-2",children:"Paquetes vendidos"}),o.jsx("th",{className:"border p-2",children:"Paquetes fiados"}),o.jsx("th",{className:"border p-2",children:"Total vendidos (C$)"}),o.jsx("th",{className:"border p-2",children:"Comisin Cash (C$)"}),o.jsx("th",{className:"border p-2",children:"Total fiado (C$)"}),o.jsx("th",{className:"border p-2",children:"Comisin Crdito (C$)"}),o.jsx("th",{className:"border p-2",children:"rdenes creadas"})]})}),o.jsxs("tbody",{children:[h.map(ue=>o.jsxs("tr",{className:"text-center",children:[o.jsx("td",{className:"border p-1",children:ue.vendorName}),o.jsx("td",{className:"border p-1",children:ue.branchLabel}),o.jsx("td",{className:"border p-1",children:o.jsx("button",{type:"button",className:"text-blue-600 underline",onClick:()=>F(ue.vendorId,"ordered"),children:ue.orderedPackages})}),o.jsx("td",{className:"border p-1",children:o.jsx("button",{type:"button",className:"text-blue-600 underline",onClick:()=>F(ue.vendorId,"remaining"),children:ue.remainingPackages})}),o.jsx("td",{className:"border p-1",children:o.jsx("button",{type:"button",className:"text-blue-600 underline",onClick:()=>F(ue.vendorId,"sold"),children:ue.soldPackages})}),o.jsx("td",{className:"border p-1",children:o.jsx("button",{type:"button",className:"text-blue-600 underline",onClick:()=>F(ue.vendorId,"credit"),children:ue.creditPackages})}),o.jsx("td",{className:"border p-1",children:tA(ue.totalSoldMoney)}),o.jsx("td",{className:"border p-1",children:tA(ue.commissionCash)}),o.jsx("td",{className:"border p-1",children:tA(ue.totalCreditMoney)}),o.jsx("td",{className:"border p-1",children:tA(ue.commissionCredit)}),o.jsx("td",{className:"border p-1",children:ue.ordersCreated})]},ue.vendorId)),h.length===0&&!a&&o.jsx("tr",{children:o.jsx("td",{colSpan:11,className:"p-3 text-center text-gray-500",children:"Sin datos para mostrar."})})]})]})}),o.jsxs("div",{className:"mb-6",children:[o.jsx("h3",{className:"font-semibold mb-2 text-sm",children:"Top 10 productos ms vendidos (paquetes)"}),o.jsx("div",{className:"overflow-x-auto",children:o.jsxs("table",{className:"min-w-full border text-xs shadow-2xl",children:[o.jsx("thead",{className:"bg-gray-100",children:o.jsxs("tr",{children:[o.jsx("th",{className:"border p-2",children:"#"}),o.jsx("th",{className:"border p-2",children:"Producto"}),o.jsx("th",{className:"border p-2",children:"Paquetes vendidos"}),o.jsx("th",{className:"border p-2",children:"Total dinero (C$)"})]})}),o.jsxs("tbody",{children:[m.map((ue,fe)=>o.jsxs("tr",{className:"text-center",children:[o.jsx("td",{className:"border p-1",children:fe+1}),o.jsx("td",{className:"border p-1",children:ue.productName}),o.jsx("td",{className:"border p-1",children:ue.packages}),o.jsx("td",{className:"border p-1",children:tA(ue.totalMoney)})]},ue.productName)),m.length===0&&!a&&o.jsx("tr",{children:o.jsx("td",{colSpan:4,className:"p-3 text-center text-gray-500",children:"Sin productos para mostrar."})})]})]})})]}),i&&o.jsx("p",{className:"mt-2 text-sm text-gray-700",children:i}),y&&I&&w&&o.jsx("div",{className:"fixed inset-0 bg-black/40 flex items-center justify-center z-50",children:o.jsxs("div",{className:"bg-white rounded-xl shadow-xl w-[95%] max-w-4xl max-h-[90vh] flex flex-col",children:[o.jsxs("div",{className:"flex items-center justify-between px-4 py-3 border-b",children:[o.jsxs("div",{children:[o.jsxs("h4",{className:"font-semibold text-lg",children:["Detalle"," ",I==="ordered"?"Paquetes ordenados":I==="remaining"?"Paquetes restantes":I==="sold"?"Paquetes vendidos":"Paquetes fiados"]}),o.jsxs("p",{className:"text-xs text-gray-500",children:[E==null?void 0:E.vendorName,"  ",E==null?void 0:E.branchLabel]})]}),o.jsx("button",{onClick:Y,className:"px-3 py-1 rounded bg-gray-200 hover:bg-gray-300 text-sm",children:"Cerrar"})]}),o.jsx("div",{className:"flex-1 overflow-auto p-4",children:o.jsxs("table",{className:"min-w-full border text-xs",children:[o.jsx("thead",{className:"bg-gray-100",children:o.jsxs("tr",{children:[o.jsx("th",{className:"border p-2",children:"Fecha"}),o.jsx("th",{className:"border p-2",children:"Producto"}),o.jsx("th",{className:"border p-2",children:"Paquetes"}),o.jsx("th",{className:"border p-2",children:"Total dinero (C$)"}),o.jsx("th",{className:"border p-2",children:"Vendedor"}),o.jsx("th",{className:"border p-2",children:"Comisin vendedor (C$)"})]})}),o.jsxs("tbody",{children:[S.map((ue,fe)=>o.jsxs("tr",{className:"text-center",children:[o.jsx("td",{className:"border p-1",children:ue.date}),o.jsx("td",{className:"border p-1",children:ue.productName}),o.jsx("td",{className:"border p-1",children:ue.packages}),o.jsx("td",{className:"border p-1",children:tA(ue.totalMoney)}),o.jsx("td",{className:"border p-1",children:ue.vendorName}),o.jsx("td",{className:"border p-1",children:tA(ue.vendorCommission)})]},fe)),S.length===0&&o.jsx("tr",{children:o.jsx("td",{colSpan:6,className:"p-3 text-center text-gray-500",children:"Sin registros para mostrar."})})]})]})})]})})]})}const sl=t=>`C$${Number(t||0).toFixed(2)}`,FC=t=>Number(t||0).toFixed(3),hB=()=>{const t=new Date;return Sr(new Date(t.getFullYear(),t.getMonth(),1),"yyyy-MM-dd")},OC=()=>Sr(new Date,"yyyy-MM-dd");function _Ue({transactions:t=[],onClose:e,onCreated:r}){const n=Array.isArray(t)?t:[],[a,s]=v.useState([]),i=v.useMemo(()=>{const xe={};return a.forEach(He=>{He.email&&(xe[He.email.trim().toLowerCase()]=He)}),xe},[a]);v.useEffect(()=>{(async()=>{try{const xe=nr(ht(ke,"sellers_candies"),on("name","asc")),He=await Ot(xe),Ce=[];He.forEach(lt=>{const nt=lt.data();Ce.push({id:lt.id,name:nt.name||"",email:nt.email||"",commissionPercent:Number(nt.commissionPercent||0)})}),s(Ce)}catch(xe){console.error(xe)}})()},[]);const[l,c]=v.useState(hB()),[u,d]=v.useState(OC()),[f,h]=v.useState(""),[A,m]=v.useState(""),p=v.useMemo(()=>{const xe=new Map;return n.forEach(He=>{const Ce=He.productId||He.productName;xe.set(Ce,{key:Ce,name:He.productName})}),Array.from(xe.values()).sort((He,Ce)=>He.name.localeCompare(Ce.name))},[n]),g=v.useMemo(()=>{const xe=new Map;return n.forEach(He=>{const Ce=(He.sellerEmail||"").trim().toLowerCase();if(!Ce)return;const lt=i[Ce],nt=(lt==null?void 0:lt.name)||He.vendorName||Ce;xe.set(Ce,{email:Ce,label:nt})}),Array.from(xe.values()).sort((He,Ce)=>He.label.localeCompare(Ce.label))},[n,i]),x=v.useMemo(()=>n.filter(xe=>!(l&&xe.date<l||u&&xe.date>u||f&&(xe.productId||xe.productName)!==f||A&&(xe.sellerEmail||"").trim().toLowerCase()!==A)),[n,l,u,f,A]),[y,b]=v.useState(OC()),[w,j]=v.useState(()=>`FAC-CANDY-${Date.now().toString().slice(-6)}`),[I,_]=v.useState(""),[E,S]=v.useState("0"),[k,P]=v.useState(()=>x.map(xe=>xe.id));v.useEffect(()=>{P(xe=>xe.filter(He=>x.some(Ce=>Ce.id===He)))},[x]);const[T,F]=v.useState([]),[Y,he]=v.useState([]),[ue,fe]=v.useState(!1),[me,ne]=v.useState(hB()),[Pe,Ie]=v.useState(OC());v.useEffect(()=>{(async()=>{try{fe(!0);const xe=nr(ht(ke,"expensesCandies"),on("date","desc")),He=await Ot(xe),Ce=[];He.forEach(lt=>{const nt=lt.data();Ce.push({id:lt.id,date:nt.date,description:nt.description,amount:Number(nt.amount||0)})}),F(Ce)}catch(xe){console.error(xe)}finally{fe(!1)}})()},[]);const O=v.useMemo(()=>T.filter(xe=>!(!xe.date||me&&xe.date<me||Pe&&xe.date>Pe)),[T,me,Pe]),[H,R]=v.useState([]),[M,K]=v.useState(!1),[W,D]=v.useState(""),[L,Z]=v.useState("DEBITO"),[ge,U]=v.useState(""),Ge=()=>{const xe=Number(ge);!W.trim()||!isFinite(xe)||xe<=0||(R(He=>[...He,{id:`${Date.now()}_${He.length+1}`,description:W.trim(),type:L,amount:Number(xe.toFixed(2))}]),D(""),U(""))},[ie,J]=v.useState(null),[je,z]=v.useState(""),[Ae,ye]=v.useState("DEBITO"),[Qe,st]=v.useState(""),ut=xe=>{J(xe.id),z(xe.description),ye(xe.type),st(xe.amount.toFixed(2))},De=()=>{J(null),z(""),ye("DEBITO"),st("")},it=()=>{if(!ie)return;const xe=Number(Qe);!isFinite(xe)||xe<=0||(R(He=>He.map(Ce=>Ce.id===ie?{...Ce,description:je.trim(),type:Ae,amount:Number(xe.toFixed(2))}:Ce)),De())},dt=xe=>{R(He=>He.filter(Ce=>Ce.id!==xe)),ie===xe&&De()},ce=(xe,He)=>{P(Ce=>He?[...new Set([...Ce,xe])]:Ce.filter(lt=>lt!==xe))},oe=xe=>{P(xe?x.map(He=>He.id):[])},Me=(xe,He)=>{he(Ce=>He?[...new Set([...Ce,xe])]:Ce.filter(lt=>lt!==xe))},Le=v.useMemo(()=>x.filter(xe=>k.includes(xe.id)),[x,k]),ve=v.useMemo(()=>H.filter(xe=>xe.type==="DEBITO").reduce((xe,He)=>xe+He.amount,0),[H]),le=v.useMemo(()=>H.filter(xe=>xe.type==="CREDITO").reduce((xe,He)=>xe+He.amount,0),[H]),Ue=v.useMemo(()=>{let xe=0,He=0,Ce=0,lt=0;for(const wt of Le){const q=Number(wt.packages||0),ae=Number(wt.cogsAmount||0),ee=Number(wt.amount||0);xe+=q,He+=ae,Ce+=ee;const be=(wt.sellerEmail||"").trim().toLowerCase(),_e=i[be],Be=Number((_e==null?void 0:_e.commissionPercent)||0),tt=ee*Be/100;lt+=tt}const nt=O.filter(wt=>Y.includes(wt.id)).reduce((wt,q)=>wt+Number(q.amount||0),0),Xe=Ce-He,It=Ce-nt-ve+le-lt,$t=Number(E||0),Ke=Ce*$t/100;return{totalPackages:Number(FC(xe)),totalProvider:Number(He.toFixed(2)),totalSale:Number(Ce.toFixed(2)),totalGastos:Number(nt.toFixed(2)),debits:Number(ve.toFixed(2)),credits:Number(le.toFixed(2)),grossProfit:Number(Xe.toFixed(2)),finalAmount:Number(It.toFixed(2)),totalCommissionVendors:Number(lt.toFixed(2)),branchProfit:Number(Ke.toFixed(2)),branchFactor:$t}},[Le,O,Y,ve,le,i,E]),[rt,mt]=v.useState(!1),[gt,Ct]=v.useState(""),jt=async()=>{if(Ct(""),Le.length===0){Ct("Selecciona al menos 1 transaccin procesada.");return}try{mt(!0);const xe={number:w.trim(),date:y,description:I.trim(),status:"PENDIENTE",createdAt:fr.now(),totalPackages:Ue.totalPackages,totalProvider:Ue.totalProvider,totalSale:Ue.totalSale,totalExpenses:Ue.totalGastos,totalDebits:Ue.debits,totalCredits:Ue.credits,grossProfit:Ue.grossProfit,totalCommissionVendors:Ue.totalCommissionVendors,branchFactorPercent:Ue.branchFactor,branchProfit:Ue.branchProfit,finalAmount:Ue.finalAmount,transactions:Le.map(He=>{const Ce=Number(He.packages||0)||1,lt=Number(He.cogsAmount||0),nt=Number(He.amount||0),Xe=lt/Ce,It=nt/Ce,$t=(He.sellerEmail||"").trim().toLowerCase(),Ke=i[$t],wt=Number((Ke==null?void 0:Ke.commissionPercent)||0),q=nt*wt/100;return{id:He.id,date:He.date,productId:He.productId||null,productName:He.productName,vendorName:He.vendorName,sellerEmail:He.sellerEmail||null,packages:Number(FC(He.packages)),providerPricePack:Number(Xe.toFixed(4)),salePricePack:Number(It.toFixed(4)),totalProvider:Number(lt.toFixed(2)),totalSale:Number(nt.toFixed(2)),commissionPercent:wt,commissionAmount:Number(q.toFixed(2))}}),expenses:O.filter(He=>Y.includes(He.id)).map(He=>({id:He.id,date:He.date||null,description:He.description||"",amount:Number(Number(He.amount||0).toFixed(2))})),adjustments:H.map(He=>({id:He.id,description:He.description,type:He.type,amount:Number(He.amount.toFixed(2))}))};await xn(ht(ke,"invoicesCandies"),xe),Ct(" Factura de dulces creada."),r()}catch(xe){console.error(xe),Ct(` Error al crear factura: ${(xe==null?void 0:xe.message)||"desconocido"}`)}finally{mt(!1)}};return o.jsxs("div",{className:"fixed inset-0 z-[9999] bg-black/40 flex items-center justify-center p-3",children:[o.jsxs("div",{className:"bg-white w-full max-w-6xl rounded-xl shadow-xl p-4 md:p-6 max-h-[90vh] overflow-auto relative",children:[o.jsxs("div",{className:"flex items-center gap-3 mb-4",children:[o.jsx("h3",{className:"text-lg font-semibold",children:"Crear factura CandyShop"}),o.jsx("button",{onClick:e,className:"ml-auto px-2 py-1 border rounded hover:bg-gray-50",children:"Cerrar"})]}),o.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-3 mb-4",children:[o.jsxs("div",{children:[o.jsx("label",{className:"block text-sm font-medium",children:"Fecha"}),o.jsx("input",{type:"date",className:"w-full border rounded px-2 py-1",value:y,onChange:xe=>b(xe.target.value)})]}),o.jsxs("div",{children:[o.jsx("label",{className:"block text-sm font-medium",children:"Nmero"}),o.jsx("input",{type:"text",className:"w-full border rounded px-2 py-1",value:w,onChange:xe=>j(xe.target.value),placeholder:"FAC-CANDY-001"})]}),o.jsxs("div",{children:[o.jsx("label",{className:"block text-sm font-medium",children:"Factor sucursal (%)"}),o.jsx("input",{type:"number",step:"0.01",className:"w-full border rounded px-2 py-1",value:E,onChange:xe=>S(xe.target.value),placeholder:"Ej: 30"}),o.jsx("p",{className:"text-[11px] text-gray-500 mt-1",children:"Se aplica sobre el total de ventas para calcular la ganancia de sucursal."})]}),o.jsxs("div",{className:"md:col-span-1",children:[o.jsx("label",{className:"block text-sm font-medium",children:"Descripcin"}),o.jsx("input",{type:"text",className:"w-full border rounded px-2 py-1",value:I,onChange:xe=>_(xe.target.value),placeholder:"Comentarios de la factura"})]})]}),o.jsx("div",{className:"bg-gray-50 border rounded p-3 mb-3",children:o.jsxs("div",{className:"flex flex-wrap items-end gap-3",children:[o.jsxs("div",{children:[o.jsx("label",{className:"block text-sm font-medium",children:"Desde (transaccin)"}),o.jsx("input",{type:"date",className:"border rounded px-2 py-1",value:l,onChange:xe=>c(xe.target.value)})]}),o.jsxs("div",{children:[o.jsx("label",{className:"block text-sm font-medium",children:"Hasta (transaccin)"}),o.jsx("input",{type:"date",className:"border rounded px-2 py-1",value:u,onChange:xe=>d(xe.target.value)})]}),o.jsxs("div",{className:"min-w-[180px]",children:[o.jsx("label",{className:"block text-sm font-medium",children:"Producto"}),o.jsxs("select",{className:"border rounded px-2 py-1 w-full",value:f,onChange:xe=>h(xe.target.value),children:[o.jsx("option",{value:"",children:"Todos"}),p.map(xe=>o.jsx("option",{value:xe.key,children:xe.name},xe.key))]})]}),o.jsxs("div",{className:"min-w-[180px]",children:[o.jsx("label",{className:"block text-sm font-medium",children:"Vendedor"}),o.jsxs("select",{className:"border rounded px-2 py-1 w-full",value:A,onChange:xe=>m(xe.target.value),children:[o.jsx("option",{value:"",children:"Todos"}),g.map(xe=>o.jsx("option",{value:xe.email,children:xe.label},xe.email))]})]}),o.jsx("button",{className:"ml-auto px-3 py-1 rounded bg-gray-200 hover:bg-gray-300",onClick:()=>{c(hB()),d(OC()),h(""),m("")},children:"Quitar filtro"})]})}),o.jsxs("div",{className:"mb-4",children:[o.jsxs("div",{className:"flex items-center gap-3 mb-2",children:[o.jsx("h4",{className:"font-semibold",children:"Transacciones procesadas"}),o.jsxs("label",{className:"text-sm flex items-center gap-2",children:[o.jsx("input",{type:"checkbox",checked:x.length>0&&k.length===x.length,onChange:xe=>oe(xe.target.checked)}),"Seleccionar todas (sobre el filtro)"]})]}),x.length===0?o.jsx("p",{className:"text-sm text-gray-500",children:"No hay transacciones procesadas en el filtro actual."}):o.jsx("div",{className:"border rounded max-h-80 overflow-auto",children:o.jsxs("table",{className:"min-w-full text-sm",children:[o.jsx("thead",{className:"bg-gray-100",children:o.jsxs("tr",{children:[o.jsx("th",{className:"p-2 border",children:"Sel"}),o.jsx("th",{className:"p-2 border",children:"Fecha"}),o.jsx("th",{className:"p-2 border",children:"Vendedor"}),o.jsx("th",{className:"p-2 border",children:"Producto"}),o.jsx("th",{className:"p-2 border",children:"Paquetes"}),o.jsx("th",{className:"p-2 border",children:"Precio proveedor"}),o.jsx("th",{className:"p-2 border",children:"Precio venta"}),o.jsx("th",{className:"p-2 border",children:"Total proveedor"}),o.jsx("th",{className:"p-2 border",children:"Total venta"}),o.jsx("th",{className:"p-2 border",children:"Comisin venta"})]})}),o.jsx("tbody",{children:x.map(xe=>{const He=k.includes(xe.id),Ce=Number(xe.packages||0)||1,lt=Number(xe.cogsAmount||0),nt=Number(xe.amount||0),Xe=lt/Ce,It=nt/Ce,$t=(xe.sellerEmail||"").trim().toLowerCase(),Ke=i[$t],wt=Number((Ke==null?void 0:Ke.commissionPercent)||0),q=nt*wt/100;return o.jsxs("tr",{className:"text-center",children:[o.jsx("td",{className:"p-2 border",children:o.jsx("input",{type:"checkbox",checked:He,onChange:ae=>ce(xe.id,ae.target.checked)})}),o.jsx("td",{className:"p-2 border",children:xe.date}),o.jsx("td",{className:"p-2 border",children:(Ke==null?void 0:Ke.name)||xe.vendorName}),o.jsx("td",{className:"p-2 border",children:xe.productName}),o.jsx("td",{className:"p-2 border",children:FC(xe.packages)}),o.jsx("td",{className:"p-2 border",children:sl(Xe)}),o.jsx("td",{className:"p-2 border",children:sl(It)}),o.jsx("td",{className:"p-2 border",children:sl(lt)}),o.jsx("td",{className:"p-2 border",children:sl(nt)}),o.jsx("td",{className:"p-2 border",children:wt>0?`${sl(q)} (${wt.toFixed(2)}%)`:""})]},xe.id)})})]})})]}),o.jsxs("div",{className:"mb-4",children:[o.jsxs("div",{className:"flex items-center gap-3 mb-2",children:[o.jsx("h4",{className:"font-semibold",children:"Gastos a incluir (opcional)"}),ue&&o.jsx("span",{className:"text-xs text-gray-500",children:"Cargando"}),o.jsxs("div",{className:"ml-auto flex items-end gap-3",children:[o.jsxs("div",{children:[o.jsx("label",{className:"block text-xs text-gray-600",children:"Desde (gasto)"}),o.jsx("input",{type:"date",className:"border rounded px-2 py-1",value:me,onChange:xe=>ne(xe.target.value)})]}),o.jsxs("div",{children:[o.jsx("label",{className:"block text-xs text-gray-600",children:"Hasta (gasto)"}),o.jsx("input",{type:"date",className:"border rounded px-2 py-1",value:Pe,onChange:xe=>Ie(xe.target.value)})]})]})]}),O.length===0?o.jsx("p",{className:"text-sm text-gray-500",children:"No hay gastos en el rango seleccionado."}):o.jsx("div",{className:"border rounded max-h-48 overflow-auto",children:o.jsxs("table",{className:"min-w-full text-sm",children:[o.jsx("thead",{className:"bg-gray-100",children:o.jsxs("tr",{children:[o.jsx("th",{className:"p-2 border",children:"Sel"}),o.jsx("th",{className:"p-2 border",children:"Fecha"}),o.jsx("th",{className:"p-2 border",children:"Descripcin"}),o.jsx("th",{className:"p-2 border",children:"Monto"})]})}),o.jsx("tbody",{children:O.map(xe=>{const He=Y.includes(xe.id);return o.jsxs("tr",{className:"text-center",children:[o.jsx("td",{className:"p-2 border",children:o.jsx("input",{type:"checkbox",checked:He,onChange:Ce=>Me(xe.id,Ce.target.checked)})}),o.jsx("td",{className:"p-2 border",children:xe.date||""}),o.jsx("td",{className:"p-2 border",children:xe.description||""}),o.jsx("td",{className:"p-2 border",children:sl(Number(xe.amount||0))})]},xe.id)})})]})})]}),o.jsxs("div",{className:"mb-4",children:[o.jsxs("div",{className:"flex items-center gap-3 mb-2",children:[o.jsx("h4",{className:"font-semibold",children:"Notas Crdito/Dbito (Cargos extras)"}),o.jsx("button",{className:"ml-auto px-3 py-1 rounded bg-blue-600 text-white hover:bg-blue-700",onClick:()=>K(!0),children:"Crear Cargo"})]}),H.length===0?o.jsx("p",{className:"text-sm text-gray-500",children:"Sin cargos agregados."}):o.jsx("div",{className:"border rounded max-h-40 overflow-auto",children:o.jsxs("table",{className:"min-w-full text-sm",children:[o.jsx("thead",{className:"bg-gray-100",children:o.jsxs("tr",{children:[o.jsx("th",{className:"p-2 border",children:"Descripcin"}),o.jsx("th",{className:"p-2 border",children:"Tipo"}),o.jsx("th",{className:"p-2 border",children:"Monto"}),o.jsx("th",{className:"p-2 border",children:"Acciones"})]})}),o.jsx("tbody",{children:H.map(xe=>{const He=ie===xe.id;return o.jsxs("tr",{className:"text-center",children:[o.jsx("td",{className:"p-2 border",children:He?o.jsx("textarea",{className:"w-full border rounded px-2 py-1 min-h-[70px]",value:je,onChange:Ce=>z(Ce.target.value)}):o.jsx("span",{title:xe.description,children:xe.description.length>60?`${xe.description.slice(0,60)}`:xe.description})}),o.jsx("td",{className:"p-2 border",children:He?o.jsxs("select",{className:"w-full border rounded px-2 py-1",value:Ae,onChange:Ce=>ye(Ce.target.value),children:[o.jsx("option",{value:"DEBITO",children:"Dbito"}),o.jsx("option",{value:"CREDITO",children:"Crdito"})]}):o.jsx("span",{className:`px-2 py-0.5 rounded text-xs ${xe.type==="DEBITO"?"bg-red-100 text-red-700":"bg-green-100 text-green-700"}`,children:xe.type})}),o.jsx("td",{className:"p-2 border",children:He?o.jsx("input",{type:"number",step:"0.01",className:"w-full border rounded px-2 py-1 text-right",value:Qe,onChange:Ce=>st(Ce.target.value)}):sl(xe.amount)}),o.jsx("td",{className:"p-2 border",children:He?o.jsxs("div",{className:"flex gap-2 justify-center",children:[o.jsx("button",{className:"px-2 py-1 rounded bg-green-600 text-white hover:bg-green-700 text-xs",onClick:it,children:"Guardar"}),o.jsx("button",{className:"px-2 py-1 rounded bg-gray-200 hover:bg-gray-300 text-xs",onClick:De,children:"Cancelar"}),o.jsx("button",{className:"px-2 py-1 rounded bg-red-600 text-white hover:bg-red-700 text-xs",onClick:()=>dt(xe.id),children:"Eliminar"})]}):o.jsxs("div",{className:"flex gap-2 justify-center",children:[o.jsx("button",{className:"px-2 py-1 rounded bg-indigo-600 text-white hover:bg-indigo-700 text-xs",onClick:()=>ut(xe),children:"Editar"}),o.jsx("button",{className:"px-2 py-1 rounded bg-red-600 text-white hover:bg-red-700 text-xs",onClick:()=>dt(xe.id),children:"Eliminar"})]})})]},xe.id)})})]})})]}),o.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 text-sm mb-4 justify-between",children:[o.jsx("div",{className:"space-y-1",children:o.jsxs("div",{children:["Total paquetes: ",o.jsx("strong",{children:FC(Ue.totalPackages)})]})}),o.jsxs("div",{className:"space-y-1 text-center",children:[o.jsxs("div",{children:["Total proveedor (costo):"," ",o.jsx("strong",{children:sl(Ue.totalProvider)})]}),o.jsxs("div",{children:["Total venta: ",o.jsx("strong",{children:sl(Ue.totalSale)})]}),o.jsxs("div",{children:["Ganancia bruta (venta  costo):"," ",o.jsx("strong",{children:sl(Ue.grossProfit)})]})]}),o.jsxs("div",{className:"space-y-1 text-right",children:[o.jsxs("div",{children:["Gastos: ",o.jsx("strong",{children:sl(Ue.totalGastos)})]}),o.jsxs("div",{children:["Dbitos: ",o.jsx("strong",{children:sl(Ue.debits)})]}),o.jsxs("div",{children:["Crditos: ",o.jsx("strong",{children:sl(Ue.credits)})]}),o.jsxs("div",{children:["Comisin total vendedores:"," ",o.jsx("strong",{children:sl(Ue.totalCommissionVendors)})]}),o.jsxs("div",{children:["Ganancia sucursal (ventas  factor):"," ",o.jsx("strong",{children:sl(Ue.branchProfit)})]})]}),o.jsx("div",{className:"md:col-span-3 mt-3",children:o.jsxs("div",{className:"p-3 bg-blue-50 border border-blue-200 rounded text-center font-semibold text-lg",children:["Monto final (ventas  gastos  dbitos + crditos  comisin vendedores):"," ",o.jsx("span",{className:"text-blue-700",children:sl(Ue.finalAmount)})]})})]}),o.jsxs("div",{className:"flex items-center gap-2",children:[o.jsx("button",{disabled:rt,onClick:jt,className:"bg-blue-600 text-white px-4 py-2 rounded hover:bg-blue-700 disabled:opacity-60",children:rt?"Creando":"Crear factura"}),o.jsx("button",{onClick:e,className:"px-4 py-2 border rounded",children:"Cancelar"}),gt&&o.jsx("span",{className:"text-sm ml-2",children:gt})]}),rt&&o.jsxs("div",{className:"absolute inset-0 z-[11000] bg-white/80 backdrop-blur-sm flex flex-col items-center justify-center gap-3",children:[o.jsxs("svg",{className:"animate-spin h-8 w-8 text-blue-600",viewBox:"0 0 24 24",children:[o.jsx("circle",{className:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor",strokeWidth:"4",fill:"none"}),o.jsx("path",{className:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8v4a4 4 0 00-4 4H4z"})]}),o.jsx("div",{className:"text-sm font-medium text-blue-700",children:"Creando factura"})]})]}),M&&o.jsx("div",{className:"fixed inset-0 z-[10000] bg-black/50 flex items-center justify-center p-3",children:o.jsxs("div",{className:"bg_WHITE w-full max-w-lg rounded-xl shadow-xl p-4",children:[o.jsxs("div",{className:"flex items-center mb-3",children:[o.jsx("h4",{className:"font-semibold",children:"Nuevo cargo"}),o.jsx("button",{className:"ml-auto px-2 py-1 border rounded hover:bg-gray-50",onClick:()=>K(!1),children:"Cerrar"})]}),o.jsxs("div",{className:"space-y-3",children:[o.jsxs("div",{children:[o.jsx("label",{className:"block text-sm font-medium mb-1",children:"Descripcin"}),o.jsx("textarea",{className:"w-full border rounded px-2 py-1 min-h-[90px]",value:W,onChange:xe=>D(xe.target.value),placeholder:"Detalle del cargo"})]}),o.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-3",children:[o.jsxs("div",{children:[o.jsx("label",{className:"block text-sm font-medium",children:"Tipo de cargo"}),o.jsxs("select",{className:"w-full border rounded px-2 py-1",value:L,onChange:xe=>Z(xe.target.value),children:[o.jsx("option",{value:"DEBITO",children:"Dbito"}),o.jsx("option",{value:"CREDITO",children:"Crdito"})]})]}),o.jsxs("div",{children:[o.jsx("label",{className:"block text-sm font-medium",children:"Monto"}),o.jsx("input",{type:"number",step:"0.01",className:"w-full border rounded px-2 py-1",value:ge,onChange:xe=>U(xe.target.value),placeholder:"0.00"})]})]}),o.jsx("div",{className:"flex justify-end",children:o.jsx("button",{className:"px-3 py-1 rounded bg-blue-600 text-white hover:bg-blue-700",onClick:Ge,children:"Agregar"})})]})]})})]})}const ma=t=>`C$ ${Number(t??0).toFixed(2)}`,DC=t=>Number(t??0).toFixed(3);function mB(t){const e=t.transactions||[];let r=Number(t.totalPackages??0),n=Number(t.totalProvider??0),a=Number(t.totalSale??0),s=Number(t.totalCommissionVendors??0);if(e.length>0&&(a===0||r===0)){r=0,n=0,a=0,s=0;for(const x of e){const y=Number(x.packages??0);r+=y,n+=Number(x.totalProvider??y*(x.providerPricePack??0)),a+=Number(x.totalSale??y*(x.salePricePack??0));const b=x.commissionAmount??Number(x.totalSale??0)*Number(x.commissionPercent??0)/100;s+=Number(b||0)}}const i=t.expenses||[],l=t.adjustments||[],c=t.totalExpenses!==void 0?Number(t.totalExpenses):i.reduce((x,y)=>x+Number(y.amount||0),0),u=l.filter(x=>x.type==="DEBITO").reduce((x,y)=>x+Number(y.amount||0),0),d=l.filter(x=>x.type==="CREDITO").reduce((x,y)=>x+Number(y.amount||0),0),f=t.totalDebits!==void 0?Number(t.totalDebits):u,h=t.totalCredits!==void 0?Number(t.totalCredits):d,A=a-n,m=Number(t.branchFactorPercent??0),p=t.branchProfit!==void 0?Number(t.branchProfit):Number((A*m/100).toFixed(2)),g=t.finalAmount!==void 0?Number(t.finalAmount):a-s-c-f+h;return{totalPackages:r,totalProvider:n,totalSale:a,commissionTotal:s,expenses:c,debits:f,credits:h,grossProfit:A,branchProfit:p,finalAmount:g}}function t$(t){const e=t.transactions||[];if(e.length===0)return"";const r=Array.from(new Set(e.map(n=>n.vendorName||"Sin nombre")));return r.length===1?r[0]:"Varios"}function EUe(){const[t,e]=v.useState([]),[r,n]=v.useState(!0),[a,s]=v.useState(null),i=v.useRef(null),[l,c]=v.useState(!1),u=async()=>{n(!0);const A=nr(ht(ke,"invoicesCandies"),on("date","desc")),m=await Ot(A),p=[];m.forEach(g=>{const x=g.data();p.push({id:g.id,date:x.date,number:x.number,description:x.description,status:x.status||"PENDIENTE",totalPackages:x.totalPackages||0,totalProvider:x.totalProvider||0,totalSale:x.totalSale||0,totalExpenses:x.totalExpenses||0,totalDebits:x.totalDebits||0,totalCredits:x.totalCredits||0,totalCommissionVendors:x.totalCommissionVendors||0,finalAmount:x.finalAmount||0,branchFactorPercent:x.branchFactorPercent||0,branchProfit:x.branchProfit||0,transactions:(x.transactions||[]).map(y=>({id:y.id,date:y.date,vendorId:y.vendorId||null,vendorName:y.vendorName||"Sin nombre",sellerEmail:y.sellerEmail||null,productId:y.productId,productName:y.productName||"Sin nombre",packages:Number(y.packages||0),providerPricePack:Number(y.providerPricePack||0),salePricePack:Number(y.salePricePack||0),totalProvider:Number(y.totalProvider||0),totalSale:Number(y.totalSale||0),commissionPercent:Number(y.commissionPercent||0),commissionAmount:Number(y.commissionAmount||0)})),expenses:(x.expenses||[]).map(y=>({id:y.id,description:y.description||"",date:y.date||null,amount:Number(y.amount||0)})),adjustments:(x.adjustments||[]).map(y=>({id:y.id,description:y.description||"",type:y.type||"DEBITO",amount:Number(y.amount||0)}))})}),e(p),n(!1)};v.useEffect(()=>{u()},[]);const d=async A=>{const m=A.status==="PAGADA"?"PENDIENTE":"PAGADA";await nn(qt(ke,"invoicesCandies",A.id),{status:m}),e(p=>p.map(g=>g.id===A.id?{...g,status:m}:g)),(a==null?void 0:a.id)===A.id&&s({...A,status:m})},f=async A=>{if(window.confirm(`Eliminar factura del ${A.date}?`))try{await Cn(qt(ke,"invoicesCandies",A.id)),e(m=>m.filter(p=>p.id!==A.id)),(a==null?void 0:a.id)===A.id&&s(null)}catch(m){console.error(m),alert("No se pudo eliminar la factura.")}},h=async()=>{if(!i.current||!a)return;const A=i.current,m=await rg(A,{backgroundColor:"#ffffff",onclone:b=>{const w=b.body;w.style.background="#ffffff",w.querySelectorAll("*").forEach(j=>{const I=b.defaultView.getComputedStyle(j);I.boxShadow&&I.boxShadow!=="none"&&(j.style.boxShadow="none")})},scale:2}),p=m.toDataURL("image/png"),g=new Or("p","mm","a4"),x=g.internal.pageSize.getWidth(),y=m.height*x/m.width;g.addImage(p,"PNG",0,0,x,y),g.save(`factura_candy_${a.number||a.date}.pdf`)};return o.jsxs("div",{className:"max-w-7xl mx-auto p-6 bg-white rounded shadow",children:[o.jsxs("div",{className:"flex items-center mb-4 gap-3",children:[o.jsx("h2",{className:"text-2xl font-bold",children:"Facturacin CandyShop"}),o.jsx("button",{className:"ml-auto bg-blue-600 text-white px-4 py-2 rounded-2xl hover:bg-blue-700 text-sm",onClick:()=>c(!0),children:"Crear factura Candy"})]}),l&&o.jsx(_Ue,{onClose:()=>c(!1),onCreated:()=>{c(!1),u()}}),o.jsx("div",{className:"bg-white p-2 rounded shadow border w-full mb-4 overflow-x-auto",children:o.jsxs("table",{className:"min-w-full text-sm",children:[o.jsx("thead",{className:"bg-gray-100",children:o.jsxs("tr",{children:[o.jsx("th",{className:"p-2 border whitespace-nowrap",children:"Fecha"}),o.jsx("th",{className:"p-2 border whitespace-nowrap",children:"N factura"}),o.jsx("th",{className:"p-2 border whitespace-nowrap",children:"Vendedor"}),o.jsx("th",{className:"p-2 border whitespace-nowrap",children:"Comisin total"}),o.jsx("th",{className:"p-2 border whitespace-nowrap",children:"Paquetes"}),o.jsx("th",{className:"p-2 border whitespace-nowrap",children:"Sub total (sin gastos/ajustes)"}),o.jsx("th",{className:"p-2 border whitespace-nowrap",children:"Gastos"}),o.jsx("th",{className:"p-2 border whitespace-nowrap",children:"Dbitos"}),o.jsx("th",{className:"p-2 border whitespace-nowrap",children:"Crditos"}),o.jsx("th",{className:"p-2 border whitespace-nowrap",children:"Total"}),o.jsx("th",{className:"p-2 border whitespace-nowrap",children:"Estado"}),o.jsx("th",{className:"p-2 border whitespace-nowrap",children:"Acciones"})]})}),o.jsx("tbody",{children:r?o.jsx("tr",{children:o.jsx("td",{colSpan:12,className:"p-4 text-center",children:"Cargando"})}):t.length===0?o.jsx("tr",{children:o.jsx("td",{colSpan:12,className:"p-4 text-center",children:"Sin facturas"})}):t.map(A=>{const m=mB(A),p=t$(A);return o.jsxs("tr",{className:"text-center",children:[o.jsx("td",{className:"p-2 border whitespace-nowrap",children:A.date}),o.jsx("td",{className:"p-2 border whitespace-nowrap",children:A.number||""}),o.jsx("td",{className:"p-2 border whitespace-nowrap",children:p}),o.jsx("td",{className:"p-2 border whitespace-nowrap",children:ma(m.commissionTotal)}),o.jsx("td",{className:"p-2 border whitespace-nowrap",children:DC(m.totalPackages)}),o.jsx("td",{className:"p-2 border whitespace-nowrap",children:ma(m.totalSale)}),o.jsx("td",{className:"p-2 border whitespace-nowrap",children:ma(m.expenses)}),o.jsx("td",{className:"p-2 border whitespace-nowrap",children:ma(m.debits)}),o.jsx("td",{className:"p-2 border whitespace-nowrap",children:ma(m.credits)}),o.jsx("td",{className:"p-2 border whitespace-nowrap",children:ma(m.finalAmount)}),o.jsx("td",{className:"p-2 border whitespace-nowrap",children:o.jsx("span",{className:`px-2 py-0.5 rounded text-xs ${A.status==="PAGADA"?"bg-green-100 text-green-700":"bg-yellow-100 text-yellow-700"}`,children:A.status})}),o.jsx("td",{className:"p-2 border whitespace-nowrap",children:o.jsxs("div",{className:"flex gap-2 justify-center",children:[o.jsx("button",{className:"text-xs bg-indigo-600 text-white px-2 py-1 rounded hover:bg-indigo-700",onClick:()=>s(A),children:"Ver"}),o.jsx("button",{className:"text-xs bg-blue-600 text-white px-2 py-1 rounded hover:bg-blue-700",onClick:()=>d(A),children:A.status==="PAGADA"?"Marcar PENDIENTE":"Marcar PAGADA"}),o.jsx("button",{className:"text-xs bg-red-600 text-white px-2 py-1 rounded hover:bg-red-700",onClick:()=>f(A),children:"Eliminar"})]})})]},A.id)})})]})}),a&&o.jsxs("div",{ref:i,className:"bg-white p-4 rounded shadow-2xl",children:[o.jsxs("div",{className:"flex items-center gap-2 mb-2",children:[o.jsxs("h3",{className:"text-lg font-semibold",children:["Detalle ",a.date," ",a.number?` ${a.number}`:""]}),o.jsx("button",{className:"ml-auto px-3 py-1 border rounded",onClick:()=>s(null),children:"Cerrar"}),o.jsx("button",{onClick:h,className:"bg-green-600 text-white px-3 py-1 rounded-2xl hover:bg-green-700 text-sm",children:"Imprimir PDF"})]}),(()=>{const A=mB(a),m=t$(a);return o.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4 text-sm mb-4",children:[o.jsxs("div",{className:"space-y-1",children:[o.jsxs("div",{children:[o.jsx("span",{className:"font-semibold",children:"Estado:"})," ",a.status]}),o.jsxs("div",{children:[o.jsx("span",{className:"font-semibold",children:"Vendedor:"})," ",m]}),o.jsxs("div",{children:[o.jsx("span",{className:"font-semibold",children:"Paquetes:"})," ",DC(A.totalPackages)]})]}),o.jsxs("div",{className:"space-y-1",children:[o.jsxs("div",{children:[o.jsx("span",{className:"font-semibold",children:"Total proveedor:"})," ",ma(A.totalProvider)]}),o.jsxs("div",{children:[o.jsx("span",{className:"font-semibold",children:"Sub total ventas:"})," ",ma(A.totalSale)]}),o.jsxs("div",{children:[o.jsx("span",{className:"font-semibold",children:"Ganancia bruta:"})," ",ma(A.grossProfit)]})]}),o.jsxs("div",{className:"space-y-1",children:[o.jsxs("div",{children:[o.jsx("span",{className:"font-semibold",children:"Comisin vendedores:"})," ",ma(A.commissionTotal)]}),o.jsxs("div",{children:[o.jsx("span",{className:"font-semibold",children:"Gastos:"})," ",ma(A.expenses)]}),o.jsxs("div",{children:[o.jsx("span",{className:"font-semibold",children:"Dbitos:"})," ",ma(A.debits)]}),o.jsxs("div",{children:[o.jsx("span",{className:"font-semibold",children:"Crditos:"})," ",ma(A.credits)]})]})]})})(),o.jsx("h4",{className:"font-semibold mb-1",children:"Transacciones"}),o.jsx("div",{className:"overflow-x-auto mb-4",children:o.jsxs("table",{className:"min-w-full text-sm shadow-2xl",children:[o.jsx("thead",{className:"bg-gray-100",children:o.jsxs("tr",{children:[o.jsx("th",{className:"p-2 border whitespace-nowrap",children:"Fecha"}),o.jsx("th",{className:"p-2 border whitespace-nowrap",children:"Vendedor"}),o.jsx("th",{className:"p-2 border whitespace-nowrap",children:"Producto"}),o.jsx("th",{className:"p-2 border whitespace-nowrap",children:"Paquetes"}),o.jsx("th",{className:"p-2 border whitespace-nowrap",children:"Precio proveedor"}),o.jsx("th",{className:"p-2 border whitespace-nowrap",children:"Precio venta"}),o.jsx("th",{className:"p-2 border whitespace-nowrap",children:"Total proveedor"}),o.jsx("th",{className:"p-2 border whitespace-nowrap",children:"Total venta"}),o.jsx("th",{className:"p-2 border whitespace-nowrap",children:"Comisin venta"})]})}),o.jsx("tbody",{children:(a.transactions||[]).length>0?(a.transactions||[]).map((A,m)=>o.jsxs("tr",{className:"text-center",children:[o.jsx("td",{className:"p-2 border whitespace-nowrap",children:A.date}),o.jsx("td",{className:"p-2 border whitespace-nowrap",children:A.vendorName}),o.jsx("td",{className:"p-2 border whitespace-nowrap",children:A.productName}),o.jsx("td",{className:"p-2 border whitespace-nowrap",children:DC(A.packages)}),o.jsx("td",{className:"p-2 border whitespace-nowrap",children:ma(A.providerPricePack)}),o.jsx("td",{className:"p-2 border whitespace-nowrap",children:ma(A.salePricePack)}),o.jsx("td",{className:"p-2 border whitespace-nowrap",children:ma(A.totalProvider)}),o.jsx("td",{className:"p-2 border whitespace-nowrap",children:ma(A.totalSale)}),o.jsxs("td",{className:"p-2 border whitespace-nowrap",children:[ma(A.commissionAmount||0),A.commissionPercent?` (${A.commissionPercent.toFixed(2)}%)`:""]})]},m)):o.jsx("tr",{children:o.jsx("td",{colSpan:9,className:"p-3 text-center text-gray-500 whitespace-nowrap",children:"Sin transacciones"})})})]})}),o.jsx("h4",{className:"font-semibold mb-1",children:"Gastos"}),o.jsx("div",{className:"overflow-x-auto mb-4",children:o.jsxs("table",{className:"min-w-full text-sm shadow-xl",children:[o.jsx("thead",{className:"bg-gray-100",children:o.jsxs("tr",{children:[o.jsx("th",{className:"p-2 border whitespace-nowrap",children:"Fecha"}),o.jsx("th",{className:"p-2 border whitespace-nowrap",children:"Descripcin"}),o.jsx("th",{className:"p-2 border whitespace-nowrap",children:"Monto"})]})}),o.jsx("tbody",{children:(a.expenses||[]).length>0?(a.expenses||[]).map((A,m)=>o.jsxs("tr",{className:"text-center",children:[o.jsx("td",{className:"p-2 border whitespace-nowrap",children:A.date||""}),o.jsx("td",{className:"p-2 border whitespace-nowrap",children:A.description||""}),o.jsx("td",{className:"p-2 border whitespace-nowrap",children:ma(A.amount)})]},m)):o.jsx("tr",{children:o.jsx("td",{colSpan:3,className:"p-3 text-center text-gray-500 whitespace-nowrap",children:"Sin gastos"})})})]})}),o.jsx("h4",{className:"font-semibold mb-1",children:"Cargos extras (Notas crdito/dbito)"}),o.jsx("div",{className:"overflow-x-auto mb-4",children:o.jsxs("table",{className:"min-w-full text-sm shadow-xl",children:[o.jsx("thead",{className:"bg-gray-100",children:o.jsxs("tr",{children:[o.jsx("th",{className:"p-2 border whitespace-nowrap",children:"Descripcin"}),o.jsx("th",{className:"p-2 border whitespace-nowrap",children:"Tipo de cargo"}),o.jsx("th",{className:"p-2 border whitespace-nowrap",children:"Monto"}),o.jsx("th",{className:"p-2 border whitespace-nowrap",children:"Fecha"})]})}),o.jsx("tbody",{children:(a.adjustments||[]).length>0?(a.adjustments||[]).map((A,m)=>o.jsxs("tr",{className:"text-center",children:[o.jsx("td",{className:"p-2 border whitespace-nowrap",children:A.description}),o.jsx("td",{className:"p-2 border whitespace-nowrap",children:o.jsx("span",{className:`px-2 py-0.5 rounded text-xs ${A.type==="DEBITO"?"bg-red-100 text-red-700":"bg-green-100 text-green-700"}`,children:A.type})}),o.jsx("td",{className:"p-2 border whitespace-nowrap",children:ma(A.amount)}),o.jsx("td",{className:"p-2 border whitespace-nowrap",children:a.date})]},m)):o.jsx("tr",{children:o.jsx("td",{colSpan:4,className:"p-3 text-center text-gray-500 whitespace-nowrap",children:"Sin cargos extras"})})})]})}),(()=>{const A=mB(a);return o.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 text-sm mb-2 justify-between",children:[o.jsxs("div",{className:"space-y-1",children:[o.jsxs("div",{children:["Total paquetes: ",o.jsx("strong",{children:DC(A.totalPackages)})]}),o.jsxs("div",{children:["Total proveedor: ",o.jsx("strong",{children:ma(A.totalProvider)})]})]}),o.jsxs("div",{className:"space-y-1 text-center",children:[o.jsxs("div",{children:["Sub total ventas: ",o.jsx("strong",{children:ma(A.totalSale)})]}),o.jsxs("div",{children:["Ganancia bruta: ",o.jsx("strong",{children:ma(A.grossProfit)})]}),o.jsxs("div",{children:["Ganancia sucursal: ",o.jsx("strong",{children:ma(A.branchProfit)})]})]}),o.jsxs("div",{className:"space-y-1 text-right",children:[o.jsxs("div",{children:["Comisin vendedores:"," ",o.jsx("strong",{children:ma(A.commissionTotal)})]}),o.jsxs("div",{children:["Gastos: ",o.jsx("strong",{children:ma(A.expenses)})]}),o.jsxs("div",{children:["Dbitos: ",o.jsx("strong",{children:ma(A.debits)})]}),o.jsxs("div",{children:["Crditos: ",o.jsx("strong",{children:ma(A.credits)})]})]}),o.jsx("div",{className:"md:col-span-3 mt-3",children:o.jsxs("div",{className:"bg-blue-50 border border-blue-300 rounded-lg p-4 text-center",children:[o.jsx("span",{className:"block text-lg font-semibold text-gray-800",children:"Total (sub total  comisin  gastos  dbitos + crditos):"}),o.jsx("span",{className:"block text-2xl font-bold text-blue-700 mt-1",children:ma(A.finalAmount)})]})})]})})()]})]})}const cs=t=>Math.round((Number(t)||0)*100)/100,Vh=t=>Math.round((Number(t)||0)*1e3)/1e3,ji=t=>Number(t??0).toFixed(2),rA=t=>Number(t??0).toFixed(3),SUe=(t,e)=>{var h;const r=t.date??((h=t.timestamp)!=null&&h.toDate?Sr(t.timestamp.toDate(),"yyyy-MM-dd"):"");if(!r)return[];const n=t.userEmail??"",a=t.vendorName||t.vendor||n||t.vendorId||"(sin vendedor)",s=t.type||"CONTADO",i=t.vendorId,l=Number(t.total??t.itemsTotal??t.amount??t.amountCharged??0)||0,c=Number(t.vendorCommissionAmount??0)||0;if(Array.isArray(t.items)&&t.items.length>0)return t.items.map((A,m)=>{const p=Number((A==null?void 0:A.packages)??(A==null?void 0:A.qty)??(A==null?void 0:A.quantity)??0),g=Number((A==null?void 0:A.lineFinal)??0)||Math.max(0,Number((A==null?void 0:A.unitPricePackage)||(A==null?void 0:A.unitPrice)||0)*p-Number((A==null?void 0:A.discount)||0));let x=0;return c>0&&l>0&&Number(g||0)>0&&(x=cs(c*Number(g||0)/l)),{id:`${e}#${m}`,productName:String((A==null?void 0:A.productName)??"(sin nombre)"),quantity:p,amount:cs(g),date:r,type:s,vendorId:i,userEmail:a,vendorCommissionAmount:x}});const u=Number(t.packagesTotal??t.quantity??0),d=Number(t.amount??t.amountCharged??t.total??0)||0,f=cs(Number(t.vendorCommissionAmount??0)||0);return[{id:e,productName:String((t==null?void 0:t.productName)??"(sin nombre)"),quantity:u,amount:cs(d),date:r,type:s,vendorId:i,userEmail:a,vendorCommissionAmount:f}]};function IUe({role:t,roles:e,currentUserEmail:r,sellerCandyId:n}){const a=e&&e.length?e:t,s=!a||Yr(a,"admin"),i="daily_closures_candies",l="sales_candies",c="sellers_candies",[u,d]=v.useState(Sr(dZ(new Date),"yyyy-MM-dd")),[f,h]=v.useState(Sr(new Date,"yyyy-MM-dd")),[A,m]=v.useState(!0),[p,g]=v.useState([]),[x,y]=v.useState(null),[b,w]=v.useState(""),[j,I]=v.useState([]),[_,E]=v.useState("ALL"),[S,k]=v.useState({}),P=v.useRef(null);if(!s)return o.jsxs("div",{className:"max-w-7xl mx-auto p-6 bg-white rounded-2xl shadow-2xl",children:[o.jsx("h1",{className:"text-2xl font-bold mb-2",children:"Liquidaciones"}),o.jsx("p",{className:"text-sm text-red-600",children:"Acceso denegado: solo admin."})]});const T=async()=>{try{const W=await Ot(ht(ke,c)),D=[];W.forEach(L=>{const Z=L.data();D.push({id:L.id,name:Z.name||"",commissionPercent:Number(Z.commissionPercent||0)})}),I(D)}catch(W){console.error("Error cargando sellers_candies",W)}},F=async()=>{const W=performance.now();try{m(!0);const D=nr(ht(ke,i),cr("date",">=",u),cr("date","<=",f)),L=await Ot(D),Z=performance.now();console.log(" getDocs ms:",(Z-W).toFixed(1),"docs:",L.size);const ge=[];L.forEach(J=>ge.push({id:J.id,...J.data()}));const U=performance.now();console.log(" parse+set ms:",(U-Z).toFixed(1),"rows:",ge.length),ge.sort((J,je)=>J.date<je.date?1:J.date>je.date?-1:0),g(ge),y(null);const Ge=new Set;ge.forEach(J=>{(J.sales||[]).forEach(je=>{const z=String((je==null?void 0:je.id)??"").split("#")[0].trim();z&&Ge.add(z)})});const ie=Array.from(Ge).filter(J=>!S[J]);if(ie.length>0){const J={};for(const je of ie)try{const z=await ui(qt(ke,l,je));if(z.exists()){const Ae=z.data();J[je]=SUe(Ae,je)}else J[je]=[]}catch(z){console.error("Error leyendo sale",je,z),J[je]=[]}k(je=>({...je,...J}))}}catch(D){console.error(D),w(" Error cargando liquidaciones.")}finally{m(!1)}};v.useEffect(()=>{T()},[]),v.useEffect(()=>{F()},[]);const Y=async W=>{W.preventDefault(),await F()},he=v.useMemo(()=>{const W={};return j.forEach(D=>W[D.id]=D.name||D.id),W},[j]),ue=W=>{const D=[];return(W.sales||[]).forEach(L=>{const Z=String((L==null?void 0:L.id)??"").trim();if(!Z)return;const ge=Z.split("#")[0],Ge=(S[ge]||[]).find(ie=>ie.id===Z);Ge?D.push(Ge):D.push({id:Z,productName:String((L==null?void 0:L.productName)??"(sin nombre)"),quantity:Number((L==null?void 0:L.quantity)??0),amount:cs(Number((L==null?void 0:L.amount)??0)),date:String((L==null?void 0:L.date)??""),type:"CONTADO",vendorId:"",userEmail:String((L==null?void 0:L.userEmail)??"(sin vendedor)"),vendorCommissionAmount:0})}),D},fe=W=>_==="ALL"?W:W.filter(D=>(D.vendorId||"")===_),me=v.useMemo(()=>p.map(W=>{const D=fe(ue(W));let L=0,Z=0,ge=0,U=0,Ge=0,ie=0;for(const J of D){const je=Number(J.quantity||0),z=Number(J.amount||0),Ae=Number(J.vendorCommissionAmount||0);J.type==="CREDITO"?(Z+=je,U+=z,ie+=Ae):(L+=je,ge+=z,Ge+=Ae)}return{...W,_sales:D,_packsCash:Vh(L),_packsCredit:Vh(Z),_amountCash:cs(ge),_amountCredit:cs(U),_comCash:cs(Ge),_comCredit:cs(ie)}}),[p,S,_]),ne=v.useMemo(()=>{let W=0,D=0,L=0,Z=0,ge=0,U=0;for(const Ge of me)W+=Number(Ge._packsCash||0),D+=Number(Ge._packsCredit||0),L+=Number(Ge._amountCash||0),Z+=Number(Ge._amountCredit||0),ge+=Number(Ge._comCash||0),U+=Number(Ge._comCredit||0);return{packsCash:Vh(W),packsCredit:Vh(D),totalSales:cs(L+Z),amountCash:cs(L),amountCredit:cs(Z),comCash:cs(ge),comCredit:cs(U)}},[me]),Pe=v.useMemo(()=>{const W={},D={};for(const L of me){const Z=L._sales||[];for(const ge of Z){const U=(ge.vendorId||"").trim();if(!U)continue;const Ge=he[U]||ge.userEmail||U,ie=cs(Number(ge.vendorCommissionAmount||0));ge.type==="CREDITO"?(D[U]||(D[U]={vendorId:U,name:Ge,total:0}),D[U].total=cs(D[U].total+ie)):(W[U]||(W[U]={vendorId:U,name:Ge,total:0}),W[U].total=cs(W[U].total+ie))}}return{cashRows:Object.values(W).filter(L=>L.total>0).sort((L,Z)=>Z.total-L.total),creditRows:Object.values(D).filter(L=>L.total>0).sort((L,Z)=>Z.total-L.total)}},[me,he]),Ie=v.useMemo(()=>j.map(W=>({id:W.id,label:W.name||W.id})).sort((W,D)=>W.label.localeCompare(D.label)),[j]),O=v.useMemo(()=>x&&me.find(W=>W.id===x.id)||null,[x,me]),H=v.useMemo(()=>O?O._sales||[]:[],[O]),R=v.useMemo(()=>{let W=0,D=0,L=0,Z=0;for(const ge of H)ge.type==="CREDITO"?(D+=Number(ge.quantity||0),Z+=Number(ge.amount||0)):(W+=Number(ge.quantity||0),L+=Number(ge.amount||0));return{packsCash:Vh(W),packsCredit:Vh(D),amountCash:cs(L),amountCredit:cs(Z)}},[H]),M=v.useMemo(()=>{const W={};for(const D of H){const L=D.productName||"(sin nombre)";W[L]||(W[L]={productName:L,packsCash:0,packsCredit:0,amountCash:0,amountCredit:0,comCash:0,comCredit:0});const Z=Number(D.quantity||0),ge=Number(D.amount||0),U=Number(D.vendorCommissionAmount||0);D.type==="CREDITO"?(W[L].packsCredit=Vh(W[L].packsCredit+Z),W[L].amountCredit=cs(W[L].amountCredit+ge),W[L].comCredit=cs(W[L].comCredit+U)):(W[L].packsCash=Vh(W[L].packsCash+Z),W[L].amountCash=cs(W[L].amountCash+ge),W[L].comCash=cs(W[L].comCash+U))}return Object.values(W)},[H]),K=async()=>{if(!P.current||!O)return;const W=P.current;W.classList.add("force-pdf-colors");try{const L=(await rg(W,{backgroundColor:"#ffffff"})).toDataURL("image/png"),Z=new Or;Z.addImage(L,"PNG",10,10,190,0),Z.save(`liquidacion_${O.date}.pdf`)}finally{W.classList.remove("force-pdf-colors")}};return o.jsxs("div",{className:"max-w-7xl mx-auto p-6 bg-white rounded-2xl shadow-2xl",children:[o.jsx("h1",{className:"text-2xl font-bold mb-4",children:"Liquidaciones"}),o.jsxs("form",{onSubmit:Y,className:"flex flex-wrap items-end gap-3 mb-4",children:[o.jsxs("div",{children:[o.jsx("label",{className:"block text-sm",children:"Desde"}),o.jsx("input",{type:"date",className:"border rounded px-2 py-1",value:u,onChange:W=>d(W.target.value)})]}),o.jsxs("div",{children:[o.jsx("label",{className:"block text-sm",children:"Hasta"}),o.jsx("input",{type:"date",className:"border rounded px-2 py-1",value:f,onChange:W=>h(W.target.value)})]}),o.jsxs("div",{children:[o.jsx("label",{className:"block text-sm",children:"Vendedor"}),o.jsxs("select",{className:"border rounded px-2 py-1 min-w-[240px]",value:_,onChange:W=>E(W.target.value),children:[o.jsx("option",{value:"ALL",children:"Todos"}),Ie.map(W=>o.jsx("option",{value:W.id,children:W.label},W.id))]})]}),o.jsx("button",{type:"submit",className:"bg-blue-600 text-white px-4 py-2 rounded hover:bg-blue-700",children:"Aplicar"})]}),o.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 lg:grid-cols-4 gap-3 mb-6",children:[o.jsxs("div",{className:"border rounded-xl p-3 shadow-sm bg-gray-50",children:[o.jsx("div",{className:"text-xs text-gray-600",children:"Paquetes cash"}),o.jsx("div",{className:"text-2xl font-bold",children:rA(ne.packsCash)})]}),o.jsxs("div",{className:"border rounded-xl p-3 shadow-sm bg-gray-50",children:[o.jsx("div",{className:"text-xs text-gray-600",children:"Paquetes crdito"}),o.jsx("div",{className:"text-2xl font-bold",children:rA(ne.packsCredit)})]}),o.jsxs("div",{className:"border rounded-xl p-3 shadow-sm bg-gray-50",children:[o.jsx("div",{className:"text-xs text-gray-600",children:"Ventas totales"}),o.jsxs("div",{className:"text-2xl font-bold",children:["C$",ji(ne.totalSales)]})]}),o.jsxs("div",{className:"border rounded-xl p-3 shadow-sm bg-gray-50",children:[o.jsx("div",{className:"text-xs text-gray-600",children:"Ventas cash"}),o.jsxs("div",{className:"text-2xl font-bold",children:["C$",ji(ne.amountCash)]})]}),o.jsxs("div",{className:"border rounded-xl p-3 shadow-sm bg-gray-50",children:[o.jsx("div",{className:"text-xs text-gray-600",children:"Ventas crdito"}),o.jsxs("div",{className:"text-2xl font-bold",children:["C$",ji(ne.amountCredit)]})]}),o.jsxs("div",{className:"border rounded-xl p-3 shadow-sm bg-gray-50",children:[o.jsx("div",{className:"text-xs text-gray-600",children:"Comisin cash"}),o.jsxs("div",{className:"text-2xl font-bold",children:["C$",ji(ne.comCash)]})]}),o.jsxs("div",{className:"border rounded-xl p-3 shadow-sm bg-gray-50",children:[o.jsx("div",{className:"text-xs text-gray-600",children:"Comisin crdito"}),o.jsxs("div",{className:"text-2xl font-bold",children:["C$",ji(ne.comCredit)]})]}),o.jsxs("div",{className:"border rounded-xl p-3 shadow-sm bg-gray-50",children:[o.jsx("div",{className:"text-xs text-gray-600",children:"Vendedores (comisin cash)"}),Pe.cashRows.length===0?o.jsx("div",{className:"text-sm text-gray-500 mt-2",children:""}):o.jsx("div",{className:"mt-2 space-y-1 max-h-28 overflow-auto pr-1",children:Pe.cashRows.map(W=>o.jsxs("div",{className:"flex items-center justify-between text-sm",children:[o.jsx("span",{className:"truncate",children:W.name}),o.jsxs("strong",{className:"ml-2",children:["C$",ji(W.total)]})]},W.vendorId))})]}),o.jsxs("div",{className:"border rounded-xl p-3 shadow-sm bg-gray-50",children:[o.jsx("div",{className:"text-xs text-gray-600",children:"Vendedores (comisin crdito)"}),Pe.creditRows.length===0?o.jsx("div",{className:"text-sm text-gray-500 mt-2",children:""}):o.jsx("div",{className:"mt-2 space-y-1 max-h-28 overflow-auto pr-1",children:Pe.creditRows.map(W=>o.jsxs("div",{className:"flex items-center justify-between text-sm",children:[o.jsx("span",{className:"truncate",children:W.name}),o.jsxs("strong",{className:"ml-2",children:["C$",ji(W.total)]})]},W.vendorId))})]})]}),A?o.jsx("p",{children:"Cargando..."}):me.length===0?o.jsx("p",{className:"text-sm text-gray-500",children:"Sin cierres en el rango seleccionado."}):o.jsxs("table",{className:"min-w-full text-sm mb-6 shadow-lg p-4 bg-white border-gray-100",children:[o.jsx("thead",{className:"bg-gray-100",children:o.jsxs("tr",{children:[o.jsx("th",{className:"border p-2",children:"Fecha"}),o.jsx("th",{className:"border p-2",children:"Total paquetes Cash"}),o.jsx("th",{className:"border p-2",children:"Total paquetes crdito"}),o.jsx("th",{className:"border p-2",children:"Total Ventas cash"}),o.jsx("th",{className:"border p-2",children:"Total Ventas crdito"}),o.jsx("th",{className:"border p-2",children:"Comisin cash"}),o.jsx("th",{className:"border p-2",children:"Comisin crdito"}),o.jsx("th",{className:"border p-2",children:"Opciones"})]})}),o.jsx("tbody",{children:me.map(W=>o.jsxs("tr",{className:"text-center",children:[o.jsx("td",{className:"border p-1",children:W.date}),o.jsx("td",{className:"border p-1",children:rA(W._packsCash)}),o.jsx("td",{className:"border p-1",children:rA(W._packsCredit)}),o.jsxs("td",{className:"border p-1",children:["C$",ji(W._amountCash)]}),o.jsxs("td",{className:"border p-1",children:["C$",ji(W._amountCredit)]}),o.jsxs("td",{className:"border p-1",children:["C$",ji(W._comCash)]}),o.jsxs("td",{className:"border p-1",children:["C$",ji(W._comCredit)]}),o.jsx("td",{className:"border p-1",children:o.jsx("div",{className:"flex items-center gap-2 justify-center",children:o.jsx("button",{className:"text-xs bg-gray-800 text-white px-2 py-1 rounded hover:bg-black",onClick:()=>y(W),children:"Ver detalle"})})})]},W.id))})]}),O&&o.jsxs("div",{className:"mt-6 rounded-2xl shadow-lg p-4 bg-white border-solid border-2 border-gray-100",children:[o.jsxs("div",{className:"flex items-center gap-3 mb-2 ",children:[o.jsxs("h2",{className:"text-xl font-semibold",children:["Detalle ",O.date]}),o.jsx("button",{onClick:()=>y(null),className:"text-sm px-2 py-1 border rounded",children:"Cerrar"}),o.jsx("button",{onClick:K,className:"ml-auto bg-green-600 text-white px-3 py-1 rounded-2xl hover:bg-green-700 text-sm",children:"Descargar PDF"})]}),o.jsxs("div",{ref:P,className:"space-y-4",children:[o.jsxs("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-2 text-sm",children:[o.jsxs("div",{children:["Total Ventas cash:"," ",o.jsxs("strong",{children:["C$",ji(R.amountCash)]})]}),o.jsxs("div",{children:["Total Ventas crdito:"," ",o.jsxs("strong",{children:["C$",ji(R.amountCredit)]})]}),o.jsxs("div",{children:["Total paquetes cash:"," ",o.jsx("strong",{children:rA(R.packsCash)})]}),o.jsxs("div",{children:["Total paquetes crdito:"," ",o.jsx("strong",{children:rA(R.packsCredit)})]})]}),o.jsx("h3",{className:"font-semibold",children:"Ventas incluidas en el cierre"}),H.length===0?o.jsx("p",{className:"text-sm text-gray-500",children:"Sin ventas en este cierre."}):o.jsxs("table",{className:"min-w-full border text-sm",children:[o.jsx("thead",{className:"bg-gray-100",children:o.jsxs("tr",{children:[o.jsx("th",{className:"border p-2",children:"Vendedor"}),o.jsx("th",{className:"border p-2",children:"Producto"}),o.jsx("th",{className:"border p-2",children:"Tipo"}),o.jsx("th",{className:"border p-2",children:"Paquetes"}),o.jsx("th",{className:"border p-2",children:"Monto"}),o.jsx("th",{className:"border p-2",children:"Comisin"}),o.jsx("th",{className:"border p-2",children:"Fecha venta"})]})}),o.jsx("tbody",{children:H.map((W,D)=>{const L=W.vendorId&&he[W.vendorId]?he[W.vendorId]:W.userEmail,Z=cs(Number(W.vendorCommissionAmount||0));return o.jsxs("tr",{className:"text-center",children:[o.jsx("td",{className:"border p-1",children:L}),o.jsx("td",{className:"border p-1",children:W.productName}),o.jsx("td",{className:"border p-1",children:W.type==="CREDITO"?"Crdito":"Cash"}),o.jsx("td",{className:"border p-1",children:rA(W.quantity)}),o.jsxs("td",{className:"border p-1",children:["C$",ji(W.amount)]}),o.jsx("td",{className:"border p-1",children:Z>0?`C$${ji(Z)}`:""}),o.jsx("td",{className:"border p-1",children:W.date||""})]},D)})})]}),o.jsx("h3",{className:"font-semibold",children:"Consolidado por producto"}),M.length===0?o.jsx("p",{className:"text-sm text-gray-500",children:"Sin datos para consolidar."}):o.jsxs("table",{className:"min-w-full border text-sm",children:[o.jsx("thead",{className:"bg-gray-100",children:o.jsxs("tr",{children:[o.jsx("th",{className:"border p-2",children:"Producto"}),o.jsx("th",{className:"border p-2",children:"Total paquetes cash"}),o.jsx("th",{className:"border p-2",children:"Total paquetes crdito"}),o.jsx("th",{className:"border p-2",children:"Ventas cash"}),o.jsx("th",{className:"border p-2",children:"Ventas crdito"}),o.jsx("th",{className:"border p-2",children:"Comisin cash"}),o.jsx("th",{className:"border p-2",children:"Comisin crdito"})]})}),o.jsx("tbody",{children:M.map((W,D)=>o.jsxs("tr",{className:"text-center",children:[o.jsx("td",{className:"border p-1",children:W.productName}),o.jsx("td",{className:"border p-1",children:rA(W.packsCash)}),o.jsx("td",{className:"border p-1",children:rA(W.packsCredit)}),o.jsxs("td",{className:"border p-1",children:["C$",ji(W.amountCash)]}),o.jsxs("td",{className:"border p-1",children:["C$",ji(W.amountCredit)]}),o.jsxs("td",{className:"border p-1",children:["C$",ji(W.comCash)]}),o.jsxs("td",{className:"border p-1",children:["C$",ji(W.comCredit)]})]},D))})]})]})]}),b&&o.jsx("p",{className:"mt-3 text-sm",children:b})]})}const Tr=t=>Math.round((Number(t)||0)*100)/100,So=t=>Math.round((Number(t)||0)*1e3)/1e3,yr=t=>Number(t??0).toFixed(2),Ss=t=>Number(t??0).toFixed(3),wS=t=>{const e=String(t||"").toUpperCase().trim();return e==="RIVAS"?"RIVAS":e==="SAN_JORGE"||e==="SANJORGE"||e==="SJ"?"SAN_JORGE":e==="ISLA"||e==="OMETEPE"?"ISLA":""},Br=t=>{const e=Number(t);return Number.isFinite(e)?e:0},jUe=t=>Math.max(0,Math.min(1,t));function r$({title:t,series:e,valuePrefix:r="C$"}){const u=e.map(b=>Number(b.value||0)),d=u.length?Math.min(...u):0,f=u.length?Math.max(...u):0,h=f-d||1,A=840,m=204,p=e.map((b,w)=>{const j=44+(e.length<=1?A/2:w/(e.length-1)*A),I=18+(1-(Number(b.value||0)-d)/h)*m;return{x:j,y:I,...b}}),g=p.map((b,w)=>`${w===0?"M":"L"} ${b.x.toFixed(2)} ${b.y.toFixed(2)}`).join(" "),x=p[p.length-1],y=x?x.value:0;return o.jsxs("div",{className:"border rounded-2xl p-3 shadow-sm bg-white",children:[o.jsxs("div",{className:"flex items-start justify-between gap-2 mb-2",children:[o.jsx("div",{className:"font-semibold text-sm sm:text-base",children:t}),o.jsxs("div",{className:"text-xs text-gray-600 whitespace-nowrap",children:["ltimo: ",o.jsx("strong",{children:r+yr(y)})]})]}),o.jsx("div",{className:"w-full overflow-x-auto",children:o.jsxs("svg",{viewBox:"0 0 900 260",className:"min-w-[720px] w-full h-auto",role:"img","aria-label":t,children:[[0,1,2,3].map(b=>{const w=18+b/3*m;return o.jsx("line",{x1:44,y1:w,x2:884,y2:w,stroke:"#e5e7eb",strokeWidth:"1"},b)}),o.jsxs("text",{x:8,y:28,fontSize:"12",fill:"#6b7280",children:[r,yr(f)]}),o.jsxs("text",{x:8,y:18+m,fontSize:"12",fill:"#6b7280",children:[r,yr(d)]}),o.jsx("path",{d:g,fill:"none",stroke:"#111827",strokeWidth:"2.5"}),p.map((b,w)=>o.jsx("circle",{cx:b.x,cy:b.y,r:"3.5",fill:"#111827"},w)),e.length>0&&o.jsxs(o.Fragment,{children:[o.jsx("text",{x:44,y:246,fontSize:"12",fill:"#6b7280",textAnchor:"start",children:e[0].label}),o.jsx("text",{x:884,y:246,fontSize:"12",fill:"#6b7280",textAnchor:"end",children:e[e.length-1].label})]})]})})]})}function BUe({title:t,items:e}){const r=e.reduce((f,h)=>f+Number(h.value||0),0),n=240,a=86,s=120,i=120,l=r>0?r:1;let c=0;const u=["#111827","#374151","#6b7280","#9ca3af"],d=e.map((f,h)=>{const A=Math.max(0,Number(f.value||0)),m=c/l,p=A/l;c+=A;const g=m+p,x=m*Math.PI*2-Math.PI/2,y=g*Math.PI*2-Math.PI/2,b=s+a*Math.cos(x),w=i+a*Math.sin(x),j=s+a*Math.cos(y),I=i+a*Math.sin(y),_=p>.5?1:0;return{d:[`M ${s} ${i}`,`L ${b.toFixed(2)} ${w.toFixed(2)}`,`A ${a} ${a} 0 ${_} 1 ${j.toFixed(2)} ${I.toFixed(2)}`,"Z"].join(" "),fill:u[h%u.length],...f,frac:p}});return o.jsxs("div",{className:"border rounded-2xl p-3 shadow-sm bg-white",children:[o.jsx("div",{className:"font-semibold text-sm sm:text-base mb-2",children:t}),o.jsxs("div",{className:"flex flex-col md:flex-row gap-3 md:items-center",children:[o.jsx("div",{className:"w-full md:w-auto overflow-x-auto",children:o.jsxs("svg",{viewBox:`0 0 ${n} ${n}`,className:"min-w-[240px] w-[260px] h-auto",role:"img","aria-label":t,children:[d.map((f,h)=>o.jsx("path",{d:f.d,fill:f.fill},h)),o.jsx("circle",{cx:s,cy:i,r:"48",fill:"#ffffff"}),o.jsx("text",{x:s,y:i-4,textAnchor:"middle",fontSize:"12",fill:"#6b7280",children:"Total"}),o.jsxs("text",{x:s,y:i+16,textAnchor:"middle",fontSize:"14",fill:"#111827",fontWeight:"700",children:["C$",yr(r)]})]})}),o.jsxs("div",{className:"flex-1",children:[o.jsx("div",{className:"grid grid-cols-1 sm:grid-cols-2 gap-2",children:e.map((f,h)=>{const A=Number(f.value||0),m=jUe(A/(r||1))*100;return o.jsxs("div",{className:"border rounded-xl p-2 bg-gray-50",children:[o.jsxs("div",{className:"flex items-center justify-between gap-2",children:[o.jsx("div",{className:"text-sm font-semibold truncate",children:f.label}),o.jsxs("div",{className:"text-sm font-bold whitespace-nowrap",children:["C$",yr(A)]})]}),o.jsxs("div",{className:"text-xs text-gray-600 mt-1",children:[m.toFixed(1),"%"]}),o.jsx("div",{className:"h-2 bg-white border rounded-full mt-2 overflow-hidden",children:o.jsx("div",{className:"h-full",style:{width:`${m}%`,background:u[h%u.length]}})})]},f.label)})}),o.jsx("div",{className:"text-xs text-gray-500 mt-2",children:"*Distribucin basada en ventas del perodo con los filtros actuales."})]})]})]})}const PUe=(t,e)=>{var g;const r=t.date??((g=t.timestamp)!=null&&g.toDate?Sr(t.timestamp.toDate(),"yyyy-MM-dd"):"");if(!r)return[];const n=String(t.processedDate??t.closureDate??"").trim(),a=t.status??"FLOTANTE",s=t.type||"CONTADO",i=String(t.vendorId??"").trim(),l=String(t.vendorName??"").trim()||String(t.userEmail??"").trim()||i||"(sin vendedor)",c=String(t.customerId??"").trim(),u=String(t.customerName??"").trim()||String(t.clientName??"").trim()||"",d=Number(t.total??t.itemsTotal??t.amount??t.amountCharged??0)||0,f=Number(t.vendorCommissionAmount??0)||0,h=wS(t.branch??t.vendorBranch);if(Array.isArray(t.items)&&t.items.length>0)return t.items.map((x,y)=>{const b=Number((x==null?void 0:x.packages)??0)||0,w=Number((x==null?void 0:x.total)??0)||Math.max(0,Number((x==null?void 0:x.unitPricePackage)||0)*b-Number((x==null?void 0:x.discount)||0)),j=wS(x==null?void 0:x.branch)||h;let I=0;return f>0&&d>0&&w>0&&(I=Tr(f*w/d)),{id:`${e}#${y}`,docId:e,productId:String((x==null?void 0:x.productId)??""),productName:String((x==null?void 0:x.productName)??"(sin nombre)"),date:r,processedDate:n,status:a,type:s,vendorId:i,vendorName:l,customerId:c,customerName:u,branch:j||"",packages:b,amount:Tr(w),commission:Tr(I)}});const A=Number(t.packagesTotal??0)||0,m=Number(t.total??t.amount??t.amountCharged??0)||0,p=Tr(Number(t.vendorCommissionAmount??0)||0);return[{id:`${e}#0`,docId:e,productId:"",productName:"(sin nombre)",date:r,processedDate:n,status:a,type:s,vendorId:i,vendorName:l,customerId:c,customerName:u,branch:h||"",packages:A,amount:Tr(m),commission:Tr(p)}]};function TUe({role:t,roles:e}){var wt;const r=e&&e.length?e:t,n=!r||Yr(r,"admin"),a=Sr(new Date,"yyyy-MM-dd"),[s,i]=v.useState(a),[l,c]=v.useState(a),[u,d]=v.useState("TODAS"),[f,h]=v.useState("AMBAS"),[A,m]=v.useState("ALL"),[p,g]=v.useState("ALL"),[x,y]=v.useState(""),[b,w]=v.useState(""),[j,I]=v.useState(""),[_,E]=v.useState(""),[S,k]=v.useState("DIA"),[P,T]=v.useState(!0),[F,Y]=v.useState(""),[he,ue]=v.useState([]),[fe,me]=v.useState([]),[ne,Pe]=v.useState([]),[Ie,O]=v.useState([]),[H,R]=v.useState([]),[M,K]=v.useState([]),[W,D]=v.useState([]),[L,Z]=v.useState([]),[ge,U]=v.useState([]),[Ge,ie]=v.useState(""),[J,je]=v.useState(""),z=v.useRef(null),[Ae,ye]=v.useState([]),[Qe,st]=v.useState("DETALLE"),ut=v.useMemo(()=>{const q={};return H.forEach(ae=>q[ae.id]=String(ae.name||"").trim()),q},[H]),De=v.useMemo(()=>{const q={};return fe.forEach(ae=>q[ae.id]=ae),q},[fe]),it=q=>{const ae=q.customerId?ut[q.customerId]:"";return(q.customerName||ae||"").trim()||(q.customerId?ut[q.customerId]||q.customerId:"")||""};v.useEffect(()=>{if(!n)return;(async()=>{try{const ae=await Ot(ht(ke,"inventory_candies")),ee=[];ae.forEach(be=>ee.push({id:be.id,...be.data()})),ye(ee)}catch(ae){console.error("inventory_candies all error:",ae),ye([])}})()},[n]),v.useEffect(()=>{(async()=>{try{const ae=await Ot(ht(ke,"sellers_candies")),ee=[];ae.forEach(_e=>{const Be=_e.data();ee.push({id:_e.id,name:String(Be.name||"").trim(),commissionPercent:Number(Be.commissionPercent||0),branch:Be.branch||""})});const be=new Map;ee.forEach(_e=>be.set(_e.id,_e)),me(Array.from(be.values()).sort((_e,Be)=>_e.name.localeCompare(Be.name)))}catch(ae){console.error(ae)}})()},[]),v.useEffect(()=>{if(!n||!s||!l)return;T(!0),Y("");const q=nr(ht(ke,"sales_candies"),cr("date",">=",s),cr("date","<=",l),on("date","asc")),ae=Fd(q,ee=>{const be=[];ee.forEach(_e=>be.push(...PUe(_e.data(),_e.id))),ue(be),T(!1)},ee=>{console.error("sales_candies periodo error:",ee),ue([]),T(!1),Y(" Error cargando ventas del perodo (revis ndices si aplica).")});return()=>ae()},[n,s,l]),v.useEffect(()=>{if(!n)return;(async()=>{try{const ae=nr(ht(ke,"candy_main_orders"),cr("date",">=",s),cr("date","<=",l)),ee=await Ot(ae),be=[];ee.forEach(_e=>be.push({id:_e.id,..._e.data()})),Pe(be)}catch(ae){console.error("candy_main_orders error:",ae),Pe([])}})()},[n,s,l]),v.useEffect(()=>{if(!n)return;(async()=>{try{const ae=nr(ht(ke,"inventory_candies_sellers"),cr("date",">=",s),cr("date","<=",l)),ee=await Ot(ae),be=[];ee.forEach(_e=>be.push({id:_e.id,..._e.data()})),O(be)}catch(ae){console.error("inventory_candies_sellers error:",ae),O([])}})()},[n,s,l]),v.useEffect(()=>{if(!n)return;(async()=>{try{const ae=nr(ht(ke,"expenses_candies"),cr("date",">=",s),cr("date","<=",l),on("date","asc")),ee=await Ot(ae),be=[];ee.forEach(_e=>be.push({id:_e.id,..._e.data()})),D(be)}catch(ae){console.warn("expenses_candies sin ndice, usando fallback:",ae);try{const ee=await Ot(ht(ke,"expenses_candies")),be=[];ee.forEach(_e=>be.push({id:_e.id,..._e.data()})),D(be.filter(_e=>String(_e.date||"")>=s&&String(_e.date||"")<=l))}catch(ee){console.error(ee),D([])}}})()},[n,s,l]),v.useEffect(()=>{if(!n)return;(async()=>{try{const ae=await Ot(ht(ke,"inventory_candies")),ee=[];ae.forEach(be=>ee.push({id:be.id,...be.data()})),Z(ee)}catch(ae){console.error("inventory_candies global error:",ae),Z([])}})()},[n]),v.useEffect(()=>{if(!n)return;(async()=>{try{const ae=await Ot(ht(ke,"inventory_candies_sellers")),ee=[];ae.forEach(be=>ee.push({id:be.id,...be.data()})),U(ee)}catch(ae){console.error("inventory_candies_sellers global error:",ae),U([])}})()},[n]),v.useEffect(()=>{if(!n)return;const q=nr(ht(ke,"customers_candies")),ae=Fd(q,ee=>{const be=[];ee.forEach(_e=>{var Be;return be.push({id:_e.id,name:String(((Be=_e.data())==null?void 0:Be.name)||"").trim()})}),R(be)},ee=>{console.error("customers_candies snapshot error:",ee),R([])});return()=>ae()},[n]),v.useEffect(()=>{if(!n)return;(async()=>{try{const ae=nr(ht(ke,"ar_movements"),cr("date","<=",l),on("date","asc")),ee=await Ot(ae),be=[];ee.forEach(_e=>be.push({id:_e.id,..._e.data()})),K(be)}catch(ae){console.warn("ar_movements sin ndice, usando fallback:",ae);try{const ee=await Ot(ht(ke,"ar_movements")),be=[];ee.forEach(_e=>be.push({id:_e.id,..._e.data()})),K(be.filter(_e=>String(_e.date||"")<=l))}catch(ee){console.error(ee),K([])}}})()},[n,l]);const dt=v.useMemo(()=>{let q=[...he];if(u!=="TODAS"&&(q=q.filter(be=>be.status===u)),f==="CASH"&&(q=q.filter(be=>be.type==="CONTADO")),f==="CREDITO"&&(q=q.filter(be=>be.type==="CREDITO")),A!=="ALL"&&(q=q.filter(be=>(be.vendorId||"")===A)),p!=="ALL"&&(q=q.filter(be=>be.branch===p)),x.trim()){const be=x.trim().toLowerCase();q=q.filter(_e=>(_e.productName||"").toLowerCase().includes(be))}if(b.trim()){const be=b.trim().toLowerCase();q=q.filter(_e=>(it(_e)||"").toLowerCase().includes(be))}const ae=j.trim()?Number(j):null,ee=_.trim()?Number(_):null;return ae!==null&&!Number.isNaN(ae)&&(q=q.filter(be=>(be.amount||0)>=ae)),ee!==null&&!Number.isNaN(ee)&&(q=q.filter(be=>(be.amount||0)<=ee)),q},[he,u,f,A,p,x,b,j,_,ut]),ce=v.useMemo(()=>{let q=0,ae=0,ee=0,be=0,_e=0,Be=0;for(const ot of dt){const te=Br(ot.packages),V=Br(ot.amount),re=Br(ot.commission);ot.type==="CREDITO"?(ae+=te,be+=V,Be+=re):(q+=te,ee+=V,_e+=re)}const tt=Tr(ee+be);return{packsCash:So(q),packsCredit:So(ae),salesCash:Tr(ee),salesCredit:Tr(be),salesTotal:tt,commCash:Tr(_e),commCredit:Tr(Be),commTotal:Tr(_e+Be)}},[dt]),oe=v.useMemo(()=>{let q=0,ae=0,ee=0,be=0,_e=0,Be=0;for(const tt of ne){const ot=Array.isArray(tt.items)?tt.items:[];for(const te of ot)q+=Br(te.totalRivas),ae+=Br(te.totalSanJorge),ee+=Br(te.totalIsla),be+=Br(te.gainRivas),_e+=Br(te.gainSanJorge),Be+=Br(te.gainIsla)}return{expectedRivas:Tr(q),expectedSanJorge:Tr(ae),expectedIsla:Tr(ee),grossRivas:Tr(be),grossSanJorge:Tr(_e),grossIsla:Tr(Be),grossTotal:Tr(be+_e+Be),expectedTotal:Tr(q+ae+ee)}},[ne]),Me=v.useMemo(()=>{const q={RIVAS:{sales:0,packages:0},SAN_JORGE:{sales:0,packages:0},ISLA:{sales:0,packages:0}};for(const ae of dt){const ee=ae.branch;ee&&(q[ee].sales+=Br(ae.amount),q[ee].packages+=Br(ae.packages))}return{RIVAS:{sales:Tr(q.RIVAS.sales),packages:So(q.RIVAS.packages)},SAN_JORGE:{sales:Tr(q.SAN_JORGE.sales),packages:So(q.SAN_JORGE.packages)},ISLA:{sales:Tr(q.ISLA.sales),packages:So(q.ISLA.packages)}}},[dt]),Le=v.useMemo(()=>({RIVAS:Tr(Me.RIVAS.sales-oe.expectedRivas),SAN_JORGE:Tr(Me.SAN_JORGE.sales-oe.expectedSanJorge),ISLA:Tr(Me.ISLA.sales-oe.expectedIsla)}),[Me,oe]),ve=v.useMemo(()=>{const q={},ae={};for(const _e of dt){const Be=(_e.vendorId||"").trim();if(!Be)continue;const tt=fe.find(V=>V.id===Be),ot=(tt==null?void 0:tt.name)||_e.vendorName||"(sin vendedor)",te=Br(_e.commission);_e.type==="CREDITO"?(ae[Be]||(ae[Be]={vendorId:Be,name:ot,total:0}),ae[Be].total=Tr(ae[Be].total+te)):(q[Be]||(q[Be]={vendorId:Be,name:ot,total:0}),q[Be].total=Tr(q[Be].total+te))}const ee=Object.values(q).sort((_e,Be)=>Be.total-_e.total),be=Object.values(ae).sort((_e,Be)=>Be.total-_e.total);return{cashArr:ee,creditArr:be}},[dt,fe]),le=v.useMemo(()=>{const q=(Se,Re)=>Se.reduce((et,We)=>et+Number((We==null?void 0:We[Re])??0),0),ae=Se=>{const Re=Number(Se);return Number.isFinite(Re)?Math.floor(Re):0},ee=Se=>{const Re=Number((Se==null?void 0:Se.totalPackages)??0);if(Re>0)return Re;const et=Array.isArray(Se==null?void 0:Se.items)?Se.items:[];return q(et,"packages")};let be=0,_e=0;for(const Se of ne){const Re=Array.isArray(Se.items)?Se.items:[];if(Re.length)for(const et of Re)be+=Number((et==null?void 0:et.subtotal)??0);else be+=Number(Se.subtotal??0);_e+=ee(Se)}let Be=0,tt=0,ot=0;const te=Se=>{const Re=Number(Se==null?void 0:Se.remainingPackages);if(Number.isFinite(Re)&&Re>0)return Math.floor(Re);const et=Math.max(1,ae((Se==null?void 0:Se.unitsPerPackage)??1)),We=ae((Se==null?void 0:Se.remainingUnits)??(Se==null?void 0:Se.remaining)??0);return We>0?Math.max(0,Math.floor(We/et)):0};for(const Se of Ie)Be+=Number(Se.subtotal??0),tt+=Number(Se.packages??0),ot+=te(Se);const V=new Set(ne.filter(Se=>String(Se.date||"")>=s&&String(Se.date||"")<=l).map(Se=>Se.id));let re=0;for(const Se of Ae){const Re=String(Se.orderId||"").trim();Re&&V.has(Re)&&(re+=Number(Se.remainingPackages??0))}const pe=L.reduce((Se,Re)=>Se+Br(Re.remainingPackages),0),Ee=ge.reduce((Se,Re)=>Se+Br(Re.remainingPackages),0);return{providerTotalMaster:Tr(be),providerTotalVendor:Tr(Be),orderedPacksMaster:So(_e),remainingPacksMaster:So(re),orderedPacksVendor:So(tt),remainingPacksVendor:So(ot),globalRemainingMaster:So(pe),globalRemainingVendor:So(Ee)}},[ne,Ie,Ae,s,l,L,ge]),Ue=v.useMemo(()=>{const q={};let ae=0;for(const ee of W){const be=String(ee.date||"").trim();if(!be)continue;const _e=Math.max(0,Br(ee.amount));ae+=_e,q[be]=Tr((q[be]||0)+_e)}return{total:Tr(ae),byDay:q}},[W]),rt=v.useMemo(()=>{let q=0;for(const ae of ne){const ee=Array.isArray(ae.items)?ae.items:[];if(ee.length)for(const be of ee)q+=Br(be==null?void 0:be.subtotal);else q+=Br(ae.subtotal)}return Tr(q)},[ne]),mt=v.useMemo(()=>{let q=0,ae=0;for(const be of Ie){const _e=String(be.sellerId||"").trim(),Be=_e?De[_e]:void 0,tt=wS(Be==null?void 0:Be.branch)||"ISLA",ot=Br(be.totalVendor)||Br(tt==="ISLA"?be.totalIsla:tt==="RIVAS"?be.totalRivas:be.totalSanJorge);q+=ot,tt==="ISLA"&&(ae+=ot)}const ee=Tr(Br(oe.expectedIsla)-ae);return{dispersedTotal:Tr(q),dispersedIsla:Tr(ae),totalExistenteIsla:ee}},[Ie,De,oe.expectedIsla]),gt=v.useMemo(()=>{var ot,te;const q=V=>{const re=Math.max(1,Math.floor(Br(V.unitsPerPackage||1))),pe=Br(V.totalUnits)>0?Br(V.totalUnits):Br(V.packages)*re;let Ee=0;Br(V.remainingUnits)>0?Ee=Br(V.remainingUnits):Br(V.remainingPackages)>0?Ee=Br(V.remainingPackages)*re:Ee=0;const Se=Math.max(0,pe-Ee);return{orderedUnits:pe,remainingUnits:Ee,soldUnits:Se,upp:re}},ae=V=>{const re=De[V];return wS(re==null?void 0:re.branch)},ee=(V,re)=>{const pe=Br(V.totalVendor)||(re==="ISLA"?Br(V.totalIsla):re==="RIVAS"?Br(V.totalRivas):re==="SAN_JORGE"?Br(V.totalSanJorge):0);if(pe>0)return pe;const Ee=Br(V.unitPriceVendor);if(Ee>0){const{orderedUnits:Se}=q(V);return Ee*Se}return 0},be=(V,re)=>{const pe=Br(V.unitPriceVendor);if(pe>0)return pe;const Ee=ee(V,re),{orderedUnits:Se}=q(V);return Ee>0&&Se>0?Ee/Se:0},_e=new Map;for(const V of Ie){const re=String(V.orderId||"").trim(),pe=re||`DOC:${V.id}`,Ee=String(V.sellerId||"").trim(),Se=String(V.sellerName||"").trim()||Ee&&((ot=De[Ee])==null?void 0:ot.name)||""||"(sin vendedor)",Re=String(V.date||"").trim(),et=Ee?ae(Ee):"",{orderedUnits:We,remainingUnits:At,soldUnits:vt}=q(V),Vt=ee(V,et),or=be(V,et),Oe=or>0?or*vt:We>0?Vt*vt/We:0,ct=or>0?or*At:We>0?Vt*At/We:0;_e.has(pe)||_e.set(pe,{orderKey:pe,orderId:re||pe,date:Re,sellerId:Ee,sellerName:Se,branch:et,totalOrden:0,vendido:0,restante:0,comision:0,totalEsperado:0,lines:[]});const bt=_e.get(pe);bt.lines.push({...V,orderedUnits:We,soldUnits:vt,remainingUnits:At,lineTotal:Tr(Vt),lineSoldValue:Tr(Oe),lineRemainingValue:Tr(ct)}),bt.totalOrden+=Vt,bt.vendido+=Oe,bt.restante+=ct}for(const V of _e.values()){const re=V.sellerId?Br((te=De[V.sellerId])==null?void 0:te.commissionPercent):0;V.comision=Tr(V.totalOrden*re/100),V.totalEsperado=Tr(V.totalOrden-V.comision),V.totalOrden=Tr(V.totalOrden),V.vendido=Tr(V.vendido),V.restante=Tr(V.restante)}const Be=Array.from(_e.values()).sort((V,re)=>V.date&&re.date?V.date<re.date?1:-1:re.totalOrden-V.totalOrden),tt=Be.reduce((V,re)=>(V.totalOrden+=Br(re.totalOrden),V.vendido+=Br(re.vendido),V.restante+=Br(re.restante),V.comision+=Br(re.comision),V.totalEsperado+=Br(re.totalEsperado),V),{totalOrden:0,vendido:0,restante:0,comision:0,totalEsperado:0});return{global:{totalOrden:Tr(tt.totalOrden),vendido:Tr(tt.vendido),restante:Tr(tt.restante),comision:Tr(tt.comision),totalEsperado:Tr(tt.totalEsperado)},orders:Be}},[Ie,De]),Ct=v.useMemo(()=>{if(!J)return null;const q=gt.orders.find(be=>be.orderKey===J);if(!q)return null;const ae={};for(const be of q.lines){const _e=String(be.productName||"(sin nombre)");ae[_e]||(ae[_e]={productName:_e,asociados:0,vendidos:0,restantes:0}),ae[_e].asociados+=Br(be.orderedUnits),ae[_e].vendidos+=Br(be.soldUnits),ae[_e].restantes+=Br(be.remainingUnits)}const ee=Object.values(ae).map(be=>({...be,asociados:Math.floor(be.asociados),vendidos:Math.floor(be.vendidos),restantes:Math.floor(be.restantes)})).sort((be,_e)=>_e.asociados-be.asociados);return{...q,products:ee}},[J,gt.orders]),jt=v.useMemo(()=>{const q=L.reduce((ee,be)=>ee+Br(be.remainingPackages),0),ae=ge.reduce((ee,be)=>ee+Br(be.remainingPackages),0);return{masterRemainingPackages:So(q),vendorRemainingPackages:So(ae)}},[L,ge]),xe=v.useMemo(()=>{const q=new Map,ae=be=>S==="DIA"?{key:be.date,label:be.date}:S==="VENDEDOR"?{key:be.vendorId||"",label:be.vendorName||""}:S==="PRODUCTO"?{key:be.productName||"",label:be.productName||""}:{key:be.branch||"",label:be.branch||""};for(const be of dt){const{key:_e,label:Be}=ae(be);q.has(_e)||q.set(_e,{key:_e,label:Be,packsCash:0,packsCredit:0,salesCash:0,salesCredit:0,commCash:0,commCredit:0,rows:[]});const tt=q.get(_e);tt.rows.push(be),be.type==="CREDITO"?(tt.packsCredit+=Br(be.packages),tt.salesCredit+=Br(be.amount),tt.commCredit+=Br(be.commission)):(tt.packsCash+=Br(be.packages),tt.salesCash+=Br(be.amount),tt.commCash+=Br(be.commission))}const ee=Array.from(q.values()).map(be=>({...be,packsCash:So(be.packsCash),packsCredit:So(be.packsCredit),salesCash:Tr(be.salesCash),salesCredit:Tr(be.salesCredit),commCash:Tr(be.commCash),commCredit:Tr(be.commCredit)}));return S==="DIA"?ee.sort((be,_e)=>be.key<_e.key?1:-1):ee.sort((be,_e)=>_e.salesCash+_e.salesCredit-(be.salesCash+be.salesCredit)),ee},[dt,S]),He=v.useMemo(()=>{if(!Ge)return[];const q=xe.find(ae=>ae.key===Ge);return(q==null?void 0:q.rows)||[]},[Ge,xe]),Ce=v.useMemo(()=>{const q={};for(const ae of He){const ee=ae.productName||"(sin nombre)";q[ee]||(q[ee]={productName:ee,packsCash:0,packsCredit:0,salesCash:0,salesCredit:0,commCash:0,commCredit:0}),ae.type==="CREDITO"?(q[ee].packsCredit+=Br(ae.packages),q[ee].salesCredit+=Br(ae.amount),q[ee].commCredit+=Br(ae.commission)):(q[ee].packsCash+=Br(ae.packages),q[ee].salesCash+=Br(ae.amount),q[ee].commCash+=Br(ae.commission))}return Object.values(q).map(ae=>({...ae,packsCash:So(ae.packsCash),packsCredit:So(ae.packsCredit),salesCash:Tr(ae.salesCash),salesCredit:Tr(ae.salesCredit),commCash:Tr(ae.commCash),commCredit:Tr(ae.commCredit)})).sort((ae,ee)=>ee.salesCash+ee.salesCredit-(ae.salesCash+ae.salesCredit))},[He]),lt=v.useMemo(()=>{const q={},ae=_e=>(ut[_e]||"").trim()||_e;for(const _e of M){const Be=String(_e.customerId||"").trim();if(!Be)continue;const tt=String(_e.date||"");if(tt&&tt>l)continue;q[Be]||(q[Be]={customerId:Be,name:ae(Be),balance:0,lastPayment:""});const ot=Br(_e.amount);_e.type==="CARGO"&&(q[Be].balance+=ot),_e.type==="ABONO"&&(q[Be].balance-=ot,(!q[Be].lastPayment||tt>q[Be].lastPayment)&&(q[Be].lastPayment=tt))}const ee=Object.values(q).map(_e=>({..._e,balance:Tr(_e.balance)})).filter(_e=>_e.balance>0).sort((_e,Be)=>Be.balance-_e.balance),be=Tr(ee.reduce((_e,Be)=>_e+Be.balance,0));return{count:ee.length,totalPending:be,list:ee.slice(0,20)}},[M,ut,l]),nt=v.useMemo(()=>{const q=Tr(ce.salesTotal),ae=Tr(ce.commTotal),ee=Tr(Ue.total),be=Tr(q-ae-ee),_e=new Set;for(const re of dt)re.date&&_e.add(re.date);const Be=Math.max(1,_e.size),tt=Tr(q/Be),ot=Tr(ae/Be),te=Tr(ee/Be),V=Tr(be/Be);return{ingreso:q,comision:ae,gastos:ee,gananciaNeta:be,daysCount:Be,ingresoDia:tt,comisionDia:ot,gastosDia:te,netaDia:V}},[ce,Ue.total,dt]),Xe=v.useMemo(()=>{const q={};for(const _e of dt){const Be=_e.date;Be&&(q[Be]||(q[Be]={date:Be,ingreso:0,comision:0}),q[Be].ingreso+=Br(_e.amount),q[Be].comision+=Br(_e.commission))}const ae=Object.keys(q).sort((_e,Be)=>_e<Be?-1:1),ee=ae.map(_e=>({label:_e.slice(5),value:Tr(q[_e].ingreso)})),be=ae.map(_e=>{var V,re;const Be=Br((V=q[_e])==null?void 0:V.ingreso),tt=Br((re=q[_e])==null?void 0:re.comision),ot=Br(Ue.byDay[_e]||0),te=Be-tt-ot;return{label:_e.slice(5),value:Tr(te)}});return{seriesIngreso:ee,seriesNeta:be,datesCount:ae.length}},[dt,Ue.byDay]),It=v.useMemo(()=>[{label:"Rivas",value:Br(Me.RIVAS.sales)},{label:"San Jorge",value:Br(Me.SAN_JORGE.sales)},{label:"Isla",value:Br(Me.ISLA.sales)}].map(q=>({...q,value:Tr(q.value)})),[Me]),$t=async()=>{if(z.current){z.current.classList.add("force-pdf-colors");try{const ae=(await rg(z.current,{backgroundColor:"#ffffff"})).toDataURL("image/png"),ee=new Or;ee.addImage(ae,"PNG",10,10,190,0),ee.save(`data_center_dulces_${s}_a_${l}.pdf`)}finally{z.current.classList.remove("force-pdf-colors")}}},Ke=()=>{const ae=[["date","processedDate","status","type","vendorId","vendorName","branch","productName","packages","amount","commission","customerId","customerName"].join(","),...dt.map(Be=>[Be.date,Be.processedDate||"",Be.status,Be.type,Be.vendorId,`"${String(Be.vendorName||"").replace(/"/g,'""')}"`,Be.branch||"",`"${String(Be.productName||"").replace(/"/g,'""')}"`,Ss(Be.packages),yr(Be.amount),yr(Be.commission),Be.customerId||"",`"${String(it(Be)||"").replace(/"/g,'""')}"`].join(","))],ee=new Blob([ae.join(`
`)],{type:"text/csv;charset=utf-8;"}),be=URL.createObjectURL(ee),_e=document.createElement("a");_e.href=be,_e.download=`data_center_dulces_${s}_a_${l}.csv`,_e.click(),URL.revokeObjectURL(be)};return n?o.jsx("div",{className:"max-w-7xl mx-auto px-2 sm:px-4 md:px-0",children:o.jsxs("div",{className:"bg-white p-3 sm:p-4 md:p-6 rounded-2xl shadow-2xl",children:[o.jsxs("div",{className:"flex flex-col gap-2 md:flex-row md:items-center md:justify-between mb-4",children:[o.jsx("h2",{className:"text-lg sm:text-xl md:text-2xl font-bold",children:"Data Center - Dulces"}),o.jsxs("div",{className:"flex flex-col sm:flex-row gap-2 sm:items-center sm:justify-end",children:[o.jsx("button",{onClick:$t,className:`\r
                inline-flex items-center justify-center gap-2\r
                w-full sm:w-auto\r
                px-3 py-2 text-sm font-semibold\r
                rounded-lg md:rounded-md\r
                bg-green-600 text-white hover:bg-green-700 transition-colors\r
              `,children:"Exportar PDF"}),o.jsx("button",{onClick:Ke,className:`\r
                inline-flex items-center justify-center gap-2\r
                w-full sm:w-auto\r
                px-3 py-2 text-sm font-semibold\r
                rounded-lg md:rounded-md\r
                bg-gray-800 text-white hover:bg-black transition-colors\r
              `,children:"Exportar CSV"})]})]}),o.jsx("div",{className:"rounded-2xl border border-gray-100 p-3 sm:p-4 mb-3 shadow-sm bg-white",children:o.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-6 gap-3",children:[o.jsxs("div",{children:[o.jsx("label",{className:"block text-xs text-gray-600",children:"Desde"}),o.jsx("input",{type:"date",className:"border rounded-lg px-3 py-2 w-full text-sm",value:s,onChange:q=>i(q.target.value)})]}),o.jsxs("div",{children:[o.jsx("label",{className:"block text-xs text-gray-600",children:"Hasta"}),o.jsx("input",{type:"date",className:"border rounded-lg px-3 py-2 w-full text-sm",value:l,onChange:q=>c(q.target.value)})]}),o.jsxs("div",{children:[o.jsx("label",{className:"block text-xs text-gray-600",children:"Estado"}),o.jsxs("select",{className:"border rounded-lg px-3 py-2 w-full text-sm",value:u,onChange:q=>d(q.target.value),children:[o.jsx("option",{value:"TODAS",children:"Todas"}),o.jsx("option",{value:"FLOTANTE",children:"Flotante"}),o.jsx("option",{value:"PROCESADA",children:"Procesada"})]})]}),o.jsxs("div",{children:[o.jsx("label",{className:"block text-xs text-gray-600",children:"Tipo"}),o.jsxs("select",{className:"border rounded-lg px-3 py-2 w-full text-sm",value:f,onChange:q=>h(q.target.value),children:[o.jsx("option",{value:"AMBAS",children:"Ambas"}),o.jsx("option",{value:"CASH",children:"Cash"}),o.jsx("option",{value:"CREDITO",children:"Crdito"})]})]}),o.jsxs("div",{children:[o.jsx("label",{className:"block text-xs text-gray-600",children:"Vendedor"}),o.jsxs("select",{className:"border rounded-lg px-3 py-2 w-full text-sm",value:A,onChange:q=>m(q.target.value),children:[o.jsx("option",{value:"ALL",children:"Todos"}),fe.map(q=>o.jsx("option",{value:q.id,children:q.name||q.id},q.id))]})]}),o.jsxs("div",{children:[o.jsx("label",{className:"block text-xs text-gray-600",children:"Sucursal"}),o.jsxs("select",{className:"border rounded-lg px-3 py-2 w-full text-sm",value:p,onChange:q=>g(q.target.value),children:[o.jsx("option",{value:"ALL",children:"Todas"}),o.jsx("option",{value:"RIVAS",children:"Rivas"}),o.jsx("option",{value:"SAN_JORGE",children:"San Jorge"}),o.jsx("option",{value:"ISLA",children:"Isla"})]})]}),o.jsxs("div",{className:"sm:col-span-2 lg:col-span-3",children:[o.jsx("label",{className:"block text-xs text-gray-600",children:"Producto (opcional)"}),o.jsx("input",{className:"border rounded-lg px-3 py-2 w-full text-sm",value:x,onChange:q=>y(q.target.value),placeholder:"Ej: Conitos"})]}),o.jsxs("div",{className:"sm:col-span-2 lg:col-span-3",children:[o.jsx("label",{className:"block text-xs text-gray-600",children:"Cliente (opcional)"}),o.jsx("input",{className:"border rounded-lg px-3 py-2 w-full text-sm",value:b,onChange:q=>w(q.target.value),placeholder:"Ej: Javier"})]}),o.jsxs("div",{children:[o.jsx("label",{className:"block text-xs text-gray-600",children:"Monto min"}),o.jsx("input",{className:"border rounded-lg px-3 py-2 w-full text-sm",value:j,onChange:q=>I(q.target.value),placeholder:"0"})]}),o.jsxs("div",{children:[o.jsx("label",{className:"block text-xs text-gray-600",children:"Monto max"}),o.jsx("input",{className:"border rounded-lg px-3 py-2 w-full text-sm",value:_,onChange:q=>E(q.target.value),placeholder:"999999"})]}),o.jsxs("div",{className:"sm:col-span-2 lg:col-span-2",children:[o.jsx("label",{className:"block text-xs text-gray-600",children:"Agrupar por"}),o.jsxs("select",{className:"border rounded-lg px-3 py-2 w-full text-sm",value:S,onChange:q=>{ie(""),k(q.target.value)},children:[o.jsx("option",{value:"DIA",children:"Da"}),o.jsx("option",{value:"VENDEDOR",children:"Vendedor"}),o.jsx("option",{value:"PRODUCTO",children:"Producto"}),o.jsx("option",{value:"SUCURSAL",children:"Sucursal"})]})]})]})}),o.jsxs("div",{className:"flex flex-col gap-2 sm:flex-row sm:items-center sm:justify-between mb-4",children:[o.jsxs("div",{className:"flex gap-2",children:[o.jsx("button",{onClick:()=>{je(""),st("MACRO")},className:["px-3 py-2 rounded-full text-sm font-semibold border transition-colors",Qe==="MACRO"?"bg-gray-900 text-white border-gray-900":"bg-white text-gray-800 border-gray-200 hover:bg-gray-50"].join(" "),children:"Data Macro"}),o.jsx("button",{onClick:()=>{je(""),st("DETALLE")},className:["px-3 py-2 rounded-full text-sm font-semibold border transition-colors",Qe==="DETALLE"?"bg-gray-900 text-white border-gray-900":"bg-white text-gray-800 border-gray-200 hover:bg-gray-50"].join(" "),children:"Data Detalle"})]}),o.jsxs("div",{className:"text-xs text-gray-600",children:["Gastos del perodo (expenses_candies):"," ",o.jsxs("strong",{children:["C$",yr(Ue.total)]})]})]}),o.jsxs("div",{ref:z,children:[Qe==="MACRO"&&o.jsxs(o.Fragment,{children:[o.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-5 gap-3 mb-4",children:[o.jsxs("div",{className:"border rounded-xl p-3 shadow-sm bg-gray-50",children:[o.jsx("div",{className:"text-xs text-gray-600",children:"Ingreso (ventas)"}),o.jsxs("div",{className:"text-xl sm:text-2xl font-bold",children:["C$",yr(nt.ingreso)]}),o.jsxs("div",{className:"text-xs text-gray-500 mt-1",children:[s,"  ",l]})]}),o.jsxs("div",{className:"border rounded-xl p-3 shadow-sm bg-gray-50",children:[o.jsx("div",{className:"text-xs text-gray-600",children:"Comisin vendedor"}),o.jsxs("div",{className:"text-xl sm:text-2xl font-bold",children:["-C$",yr(nt.comision)]}),o.jsxs("div",{className:"text-xs text-gray-500 mt-1",children:["Cash: C$",yr(ce.commCash),"  Crdito: C$",yr(ce.commCredit)]})]}),o.jsxs("div",{className:"border rounded-xl p-3 shadow-sm bg-gray-50",children:[o.jsx("div",{className:"text-xs text-gray-600",children:"Gastos (expenses_candies)"}),o.jsxs("div",{className:"text-xl sm:text-2xl font-bold",children:["-C$",yr(nt.gastos)]}),o.jsx("div",{className:"text-xs text-gray-500 mt-1",children:"Se calcula automtico por fechas"})]}),o.jsxs("div",{className:"border rounded-xl p-3 shadow-sm bg-gray-50",children:[o.jsx("div",{className:"text-xs text-gray-600",children:"Ganancia neta (real)"}),o.jsxs("div",{className:"text-xl sm:text-2xl font-bold",children:["C$",yr(nt.gananciaNeta)]}),o.jsx("div",{className:"text-xs text-gray-500 mt-1",children:"Ingreso  Comisin  Gastos"})]}),o.jsxs("div",{className:"border rounded-xl p-3 shadow-sm bg-gray-50",children:[o.jsx("div",{className:"text-xs text-gray-600",children:"Promedio neto por da"}),o.jsxs("div",{className:"text-xl sm:text-2xl font-bold",children:["C$",yr(nt.netaDia)]}),o.jsxs("div",{className:"text-xs text-gray-500 mt-1",children:["Das con ventas: ",o.jsx("strong",{children:nt.daysCount})]})]})]}),o.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-3 mb-3",children:[o.jsx(r$,{title:"Ventas por da (Ingreso)",series:Xe.seriesIngreso,valuePrefix:"C$"}),o.jsx(r$,{title:"Ganancia neta por da (real)",series:Xe.seriesNeta,valuePrefix:"C$"})]}),o.jsx("div",{className:"mb-6",children:o.jsx(BUe,{title:"Distribucin de ventas por sucursal",items:It})})]}),Qe==="DETALLE"&&o.jsxs(o.Fragment,{children:[o.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-4 gap-3 mb-4",children:[o.jsxs("div",{className:"border rounded-xl p-3 shadow-sm bg-gray-50",children:[o.jsx("div",{className:"text-xs text-gray-600",children:"Paquetes cash"}),o.jsx("div",{className:"text-xl sm:text-2xl font-bold",children:Ss(ce.packsCash)}),o.jsxs("div",{className:"text-xs text-gray-500 mt-1",children:[s,"  ",l]})]}),o.jsxs("div",{className:"border rounded-xl p-3 shadow-sm bg-gray-50",children:[o.jsx("div",{className:"text-xs text-gray-600",children:"Paquetes crdito"}),o.jsx("div",{className:"text-xl sm:text-2xl font-bold",children:Ss(ce.packsCredit)}),o.jsxs("div",{className:"text-xs text-gray-500 mt-1",children:[s,"  ",l]})]}),o.jsxs("div",{className:"border rounded-xl p-3 shadow-sm bg-gray-50",children:[o.jsx("div",{className:"text-xs text-gray-600",children:"Ventas totales"}),o.jsxs("div",{className:"text-xl sm:text-2xl font-bold",children:["C$",yr(ce.salesTotal)]}),o.jsxs("div",{className:"text-xs text-gray-500 mt-1",children:["Cash: C$",yr(ce.salesCash),"  Crdito: C$",yr(ce.salesCredit)]})]}),o.jsxs("div",{className:"border rounded-xl p-3 shadow-sm bg-gray-50",children:[o.jsx("div",{className:"text-xs text-gray-600",children:"Comisin"}),o.jsxs("div",{className:"text-xl sm:text-2xl font-bold",children:["C$",yr(ce.commTotal)]}),o.jsxs("div",{className:"text-xs text-gray-500 mt-1",children:["Cash: C$",yr(ce.commCash),"  Crdito: C$",yr(ce.commCredit)]})]})]}),o.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-4 gap-3 mb-4",children:[o.jsxs("div",{className:"border rounded-xl p-3 shadow-sm bg-gray-50",children:[o.jsx("div",{className:"text-xs text-gray-600",children:"Gross Profit total (rdenes maestras)"}),o.jsxs("div",{className:"text-xl sm:text-2xl font-bold",children:["C$",yr(oe.grossTotal)]}),o.jsxs("div",{className:"text-xs text-gray-500 mt-1",children:["R: ",yr(oe.grossRivas),"  SJ:"," ",yr(oe.grossSanJorge),"  I:"," ",yr(oe.grossIsla)]})]}),o.jsxs("div",{className:"border rounded-xl p-3 shadow-sm bg-gray-50",children:[o.jsx("div",{className:"text-xs text-gray-600",children:"Total esperado (por sucursal)"}),o.jsxs("div",{className:"text-sm mt-2 space-y-1",children:[o.jsxs("div",{className:"flex justify-between",children:[o.jsx("span",{children:"Rivas"}),o.jsxs("strong",{children:["C$",yr(oe.expectedRivas)]})]}),o.jsxs("div",{className:"flex justify-between",children:[o.jsx("span",{children:"San Jorge"}),o.jsxs("strong",{children:["C$",yr(oe.expectedSanJorge)]})]}),o.jsxs("div",{className:"flex justify-between",children:[o.jsx("span",{children:"Isla"}),o.jsxs("strong",{children:["C$",yr(oe.expectedIsla)]})]})]})]}),o.jsxs("div",{className:"border rounded-xl p-3 shadow-sm bg-gray-50",children:[o.jsx("div",{className:"text-xs text-gray-600",children:"Actual ventas por sucursal"}),o.jsxs("div",{className:"text-sm mt-2 space-y-1",children:[o.jsxs("div",{className:"flex justify-between",children:[o.jsx("span",{children:"Rivas"}),o.jsxs("strong",{children:["C$",yr(Me.RIVAS.sales)]})]}),o.jsxs("div",{className:"flex justify-between",children:[o.jsx("span",{children:"San Jorge"}),o.jsxs("strong",{children:["C$",yr(Me.SAN_JORGE.sales)]})]}),o.jsxs("div",{className:"flex justify-between",children:[o.jsx("span",{children:"Isla"}),o.jsxs("strong",{children:["C$",yr(Me.ISLA.sales)]})]})]})]}),o.jsxs("div",{className:"border rounded-xl p-3 shadow-sm bg-gray-50",children:[o.jsx("div",{className:"text-xs text-gray-600",children:"Diferencia vs esperado"}),o.jsxs("div",{className:"text-sm mt-2 space-y-1",children:[o.jsxs("div",{className:"flex justify-between",children:[o.jsx("span",{children:"Rivas"}),o.jsxs("strong",{children:["C$",yr(Le.RIVAS)]})]}),o.jsxs("div",{className:"flex justify-between",children:[o.jsx("span",{children:"San Jorge"}),o.jsxs("strong",{children:["C$",yr(Le.SAN_JORGE)]})]}),o.jsxs("div",{className:"flex justify-between",children:[o.jsx("span",{children:"Isla"}),o.jsxs("strong",{children:["C$",yr(Le.ISLA)]})]})]})]})]}),o.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-3 gap-3 mb-4",children:[o.jsxs("div",{className:"border rounded-xl p-3 shadow-sm bg-gray-50",children:[o.jsx("div",{className:"text-xs text-gray-600",children:"Total facturado a precio proveedor (rdenes vendedor)"}),o.jsxs("div",{className:"text-xl sm:text-2xl font-bold",children:["C$",yr(le.providerTotalVendor)]}),o.jsxs("div",{className:"text-xs text-gray-500 mt-1",children:[s,"  ",l]})]}),o.jsxs("div",{className:"border rounded-xl p-3 shadow-sm bg-gray-50",children:[o.jsx("div",{className:"text-xs text-gray-600",children:"Paquetes ordenados (maestras)"}),o.jsx("div",{className:"text-xl sm:text-2xl font-bold",children:Ss(le.orderedPacksMaster)}),o.jsxs("div",{className:"text-xs text-gray-500 mt-1",children:["Restantes (perodo):"," ",o.jsx("strong",{children:Ss(le.remainingPacksMaster)})]}),o.jsxs("div",{className:"text-xs text-gray-500 mt-1",children:["Existencia global (todas):"," ",o.jsx("strong",{children:Ss(jt.masterRemainingPackages)})]})]}),o.jsxs("div",{className:"border rounded-xl p-3 shadow-sm bg-gray-50",children:[o.jsx("div",{className:"text-xs text-gray-600",children:"Paquetes ordenados (rdenes vendedor)"}),o.jsx("div",{className:"text-xl sm:text-2xl font-bold",children:Ss(le.orderedPacksVendor)}),o.jsxs("div",{className:"text-xs text-gray-500 mt-1",children:["Restantes (perodo):"," ",o.jsx("strong",{children:Ss(le.remainingPacksVendor)})]}),o.jsxs("div",{className:"text-xs text-gray-500 mt-1",children:["Existencia global (todas):"," ",o.jsx("strong",{children:Ss(jt.vendorRemainingPackages)})]})]})]}),o.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-4 gap-3 mb-4",children:[o.jsxs("div",{className:"border rounded-xl p-3 shadow-sm bg-gray-50",children:[o.jsx("div",{className:"text-xs text-gray-600",children:"Total facturado (precio proveedor)"}),o.jsxs("div",{className:"text-xl sm:text-2xl font-bold",children:["C$",yr(rt)]}),o.jsx("div",{className:"text-xs text-gray-500 mt-1",children:"Sumatoria rdenes maestras (perodo)"})]}),o.jsxs("div",{className:"border rounded-xl p-3 shadow-sm bg-gray-50",children:[o.jsx("div",{className:"text-xs text-gray-600",children:"Productos dispersados (precio venta)"}),o.jsxs("div",{className:"text-xl sm:text-2xl font-bold",children:["C$",yr(mt.dispersedTotal)]}),o.jsx("div",{className:"text-xs text-gray-500 mt-1",children:"Sumatoria rdenes de vendedores (perodo)"})]}),o.jsxs("div",{className:"border rounded-xl p-3 shadow-sm bg-gray-50",children:[o.jsx("div",{className:"text-xs text-gray-600",children:"Dispersado Isla (precio venta)"}),o.jsxs("div",{className:"text-xl sm:text-2xl font-bold",children:["C$",yr(mt.dispersedIsla)]}),o.jsx("div",{className:"text-xs text-gray-500 mt-1",children:"Usado para Total existente"})]}),o.jsxs("div",{className:"border rounded-xl p-3 shadow-sm bg-gray-50",children:[o.jsx("div",{className:"text-xs text-gray-600",children:"Total existente (Isla)"}),o.jsxs("div",{className:"text-xl sm:text-2xl font-bold",children:["C$",yr(mt.totalExistenteIsla)]}),o.jsx("div",{className:"text-xs text-gray-500 mt-1",children:"Esperado Isla  Dispersado Isla"})]})]}),o.jsxs("div",{className:"border rounded-2xl p-3 sm:p-4 mb-4 shadow-sm bg-white border-gray-100",children:[o.jsxs("div",{className:"flex items-start justify-between gap-2 mb-2",children:[o.jsx("h3",{className:"font-semibold text-sm sm:text-base",children:"rdenes de vendedores (Global)"}),o.jsxs("div",{className:"text-xs text-gray-500",children:["Basado en ",o.jsx("strong",{children:"precio de venta"})," (por sucursal del vendedor)"]})]}),o.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-5 gap-2 text-sm",children:[o.jsxs("div",{className:"border rounded-xl p-3 bg-gray-50",children:["Total orden:"," ",o.jsxs("strong",{children:["C$",yr(gt.global.totalOrden)]})]}),o.jsxs("div",{className:"border rounded-xl p-3 bg-gray-50",children:["Vendido:"," ",o.jsxs("strong",{children:["C$",yr(gt.global.vendido)]})]}),o.jsxs("div",{className:"border rounded-xl p-3 bg-gray-50",children:["Restante:"," ",o.jsxs("strong",{children:["C$",yr(gt.global.restante)]})]}),o.jsxs("div",{className:"border rounded-xl p-3 bg-gray-50",children:["Comisin:"," ",o.jsxs("strong",{children:["C$",yr(gt.global.comision)]})]}),o.jsxs("div",{className:"border rounded-xl p-3 bg-gray-50",children:["Total esperado:"," ",o.jsxs("strong",{children:["C$",yr(gt.global.totalEsperado)]})]})]})]}),o.jsxs("div",{className:"border rounded-2xl p-3 sm:p-4 mb-6 shadow-sm bg-white border-gray-100",children:[o.jsxs("div",{className:"flex items-center justify-between gap-2 mb-3",children:[o.jsx("h3",{className:"font-semibold text-sm sm:text-base",children:"rdenes de vendedores (Detalle por orden)"}),o.jsx("div",{className:"text-xs text-gray-500",children:"Click/Tap en una orden para ver productos asociados/vendidos/restantes"})]}),gt.orders.length===0?o.jsx("div",{className:"text-sm text-gray-500",children:""}):o.jsxs(o.Fragment,{children:[o.jsx("div",{className:"md:hidden space-y-2",children:gt.orders.map(q=>o.jsxs("div",{className:"border rounded-2xl p-3",children:[o.jsxs("div",{className:"flex items-start justify-between gap-2",children:[o.jsxs("div",{className:"min-w-0",children:[o.jsx("div",{className:"font-semibold truncate",children:q.orderId}),o.jsxs("div",{className:"text-xs text-gray-600 mt-1 truncate",children:[q.sellerName," ",q.branch?` ${q.branch}`:""," ",q.date?` ${q.date}`:""]})]}),o.jsx("button",{className:"px-3 py-2 rounded-lg bg-gray-800 text-white text-sm font-semibold",onClick:()=>je(q.orderKey),children:"Ver"})]}),o.jsxs("div",{className:"grid grid-cols-2 gap-2 mt-3 text-sm",children:[o.jsxs("div",{className:"bg-gray-50 rounded-xl p-2",children:[o.jsx("div",{className:"text-xs text-gray-600",children:"Total"}),o.jsxs("div",{className:"font-bold",children:["C$",yr(q.totalOrden)]})]}),o.jsxs("div",{className:"bg-gray-50 rounded-xl p-2",children:[o.jsx("div",{className:"text-xs text-gray-600",children:"Vendido"}),o.jsxs("div",{className:"font-bold",children:["C$",yr(q.vendido)]})]}),o.jsxs("div",{className:"bg-gray-50 rounded-xl p-2",children:[o.jsx("div",{className:"text-xs text-gray-600",children:"Restante"}),o.jsxs("div",{className:"font-bold",children:["C$",yr(q.restante)]})]}),o.jsxs("div",{className:"bg-gray-50 rounded-xl p-2",children:[o.jsx("div",{className:"text-xs text-gray-600",children:"Comisin"}),o.jsxs("div",{className:"font-bold",children:["C$",yr(q.comision)]})]})]})]},q.orderKey))}),o.jsx("div",{className:"hidden md:block overflow-x-auto",children:o.jsxs("table",{className:"min-w-full border text-sm",children:[o.jsx("thead",{className:"bg-gray-100",children:o.jsxs("tr",{children:[o.jsx("th",{className:"border p-2 text-left",children:"Orden"}),o.jsx("th",{className:"border p-2 text-left",children:"Vendedor"}),o.jsx("th",{className:"border p-2",children:"Sucursal"}),o.jsx("th",{className:"border p-2",children:"Fecha"}),o.jsx("th",{className:"border p-2",children:"Total orden"}),o.jsx("th",{className:"border p-2",children:"Vendido"}),o.jsx("th",{className:"border p-2",children:"Restante"}),o.jsx("th",{className:"border p-2",children:"Comisin"}),o.jsx("th",{className:"border p-2",children:"Total esperado"}),o.jsx("th",{className:"border p-2",children:"Accin"})]})}),o.jsx("tbody",{children:gt.orders.map(q=>o.jsxs("tr",{className:"text-center",children:[o.jsx("td",{className:"border p-2 text-left",children:q.orderId}),o.jsx("td",{className:"border p-2 text-left",children:q.sellerName}),o.jsx("td",{className:"border p-2",children:q.branch||""}),o.jsx("td",{className:"border p-2",children:q.date||""}),o.jsxs("td",{className:"border p-2",children:["C$",yr(q.totalOrden)]}),o.jsxs("td",{className:"border p-2",children:["C$",yr(q.vendido)]}),o.jsxs("td",{className:"border p-2",children:["C$",yr(q.restante)]}),o.jsxs("td",{className:"border p-2",children:["C$",yr(q.comision)]}),o.jsxs("td",{className:"border p-2",children:["C$",yr(q.totalEsperado)]}),o.jsx("td",{className:"border p-2",children:o.jsx("button",{className:"text-xs bg-gray-800 text-white px-3 py-2 rounded-lg hover:bg-black",onClick:()=>je(q.orderKey),children:"Ver detalle"})})]},q.orderKey))})]})}),Ct&&o.jsxs("div",{className:"mt-4 rounded-2xl border-2 border-gray-100 p-3 sm:p-4 shadow-lg bg-white",children:[o.jsxs("div",{className:"flex flex-col sm:flex-row sm:items-center gap-2 mb-3",children:[o.jsxs("h4",{className:"text-base sm:text-xl font-semibold truncate",children:["Detalle orden vendedor  ",Ct.orderId]}),o.jsx("button",{onClick:()=>je(""),className:"w-full sm:w-auto text-sm px-3 py-2 border rounded-lg hover:bg-gray-50",children:"Cerrar"})]}),o.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-5 gap-2 text-sm mb-4",children:[o.jsxs("div",{className:"border rounded-xl p-3 bg-gray-50",children:["Total orden:"," ",o.jsxs("strong",{children:["C$",yr(Ct.totalOrden)]})]}),o.jsxs("div",{className:"border rounded-xl p-3 bg-gray-50",children:["Vendido:"," ",o.jsxs("strong",{children:["C$",yr(Ct.vendido)]})]}),o.jsxs("div",{className:"border rounded-xl p-3 bg-gray-50",children:["Restante:"," ",o.jsxs("strong",{children:["C$",yr(Ct.restante)]})]}),o.jsxs("div",{className:"border rounded-xl p-3 bg-gray-50",children:["Comisin:"," ",o.jsxs("strong",{children:["C$",yr(Ct.comision)]})]}),o.jsxs("div",{className:"border rounded-xl p-3 bg-gray-50",children:["Total esperado:"," ",o.jsxs("strong",{children:["C$",yr(Ct.totalEsperado)]})]})]}),o.jsx("h5",{className:"font-semibold mb-2 text-sm sm:text-base",children:"Productos asociados (Nombre - Asociados - Vendidos - Restantes)"}),o.jsx("div",{className:"md:hidden space-y-2",children:Ct.products.map(q=>o.jsxs("div",{className:"border rounded-2xl p-3",children:[o.jsx("div",{className:"font-semibold",children:q.productName}),o.jsxs("div",{className:"grid grid-cols-3 gap-2 mt-3 text-sm",children:[o.jsxs("div",{className:"bg-gray-50 rounded-xl p-2 text-center",children:[o.jsx("div",{className:"text-xs text-gray-600",children:"Asociados"}),o.jsx("div",{className:"font-bold",children:q.asociados})]}),o.jsxs("div",{className:"bg-gray-50 rounded-xl p-2 text-center",children:[o.jsx("div",{className:"text-xs text-gray-600",children:"Vendidos"}),o.jsx("div",{className:"font-bold",children:q.vendidos})]}),o.jsxs("div",{className:"bg-gray-50 rounded-xl p-2 text-center",children:[o.jsx("div",{className:"text-xs text-gray-600",children:"Restantes"}),o.jsx("div",{className:"font-bold",children:q.restantes})]})]})]},q.productName))}),o.jsx("div",{className:"hidden md:block overflow-x-auto",children:o.jsxs("table",{className:"min-w-full border text-sm",children:[o.jsx("thead",{className:"bg-gray-100",children:o.jsxs("tr",{children:[o.jsx("th",{className:"border p-2 text-left",children:"Nombre producto"}),o.jsx("th",{className:"border p-2",children:"Asociados"}),o.jsx("th",{className:"border p-2",children:"Vendidos"}),o.jsx("th",{className:"border p-2",children:"Restantes"})]})}),o.jsxs("tbody",{children:[Ct.products.map(q=>o.jsxs("tr",{className:"text-center",children:[o.jsx("td",{className:"border p-2 text-left",children:q.productName}),o.jsx("td",{className:"border p-2",children:q.asociados}),o.jsx("td",{className:"border p-2",children:q.vendidos}),o.jsx("td",{className:"border p-2",children:q.restantes})]},q.productName)),Ct.products.length===0&&o.jsx("tr",{children:o.jsx("td",{colSpan:4,className:"p-4 text-center text-gray-500",children:"Sin productos."})})]})]})})]})]})]}),o.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-2 gap-3 mb-4",children:[o.jsxs("div",{className:"border rounded-xl p-3 shadow-sm bg-gray-50",children:[o.jsx("div",{className:"text-xs text-gray-600",children:"Existencia global (maestras)"}),o.jsx("div",{className:"text-xl sm:text-2xl font-bold",children:Ss(jt.masterRemainingPackages)}),o.jsx("div",{className:"text-xs text-gray-500 mt-1",children:"remainingPackages (todas)"})]}),o.jsxs("div",{className:"border rounded-xl p-3 shadow-sm bg-gray-50",children:[o.jsx("div",{className:"text-xs text-gray-600",children:"Existencia global (vendedores)"}),o.jsx("div",{className:"text-xl sm:text-2xl font-bold",children:Ss(jt.vendorRemainingPackages)}),o.jsx("div",{className:"text-xs text-gray-500 mt-1",children:"remainingPackages (todas)"})]})]}),o.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-3 mb-4",children:[o.jsxs("div",{className:"border rounded-xl p-3 shadow-sm bg-gray-50",children:[o.jsx("div",{className:"text-xs text-gray-600",children:"Vendedores (comisin cash)"}),ve.cashArr.length===0?o.jsx("div",{className:"text-sm text-gray-500 mt-2",children:""}):o.jsx("div",{className:"mt-2 space-y-1 max-h-40 overflow-auto pr-1",children:ve.cashArr.map(q=>o.jsxs("div",{className:"flex justify-between text-sm",children:[o.jsx("span",{className:"truncate",children:q.name}),o.jsxs("strong",{className:"ml-2",children:["C$",yr(q.total)]})]},q.vendorId))})]}),o.jsxs("div",{className:"border rounded-xl p-3 shadow-sm bg-gray-50",children:[o.jsx("div",{className:"text-xs text-gray-600",children:"Vendedores (comisin crdito)"}),ve.creditArr.length===0?o.jsx("div",{className:"text-sm text-gray-500 mt-2",children:""}):o.jsx("div",{className:"mt-2 space-y-1 max-h-40 overflow-auto pr-1",children:ve.creditArr.map(q=>o.jsxs("div",{className:"flex justify-between text-sm",children:[o.jsx("span",{className:"truncate",children:q.name}),o.jsxs("strong",{className:"ml-2",children:["C$",yr(q.total)]})]},q.vendorId))})]})]}),o.jsxs("div",{className:"border rounded-2xl p-3 sm:p-4 mb-6 shadow-sm bg-white border-gray-100",children:[o.jsxs("h3",{className:"font-semibold mb-2 text-sm sm:text-base",children:["Cartera (saldo pendiente hasta ",l,")"]}),o.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-3 gap-2 text-sm mb-3",children:[o.jsxs("div",{children:["Clientes con saldo: ",o.jsx("strong",{children:lt.count})]}),o.jsxs("div",{children:["Saldo total pendiente:"," ",o.jsxs("strong",{children:["C$",yr(lt.totalPending)]})]}),o.jsx("div",{className:"text-gray-500",children:"*Muestra top 20 por monto"})]}),lt.list.length===0?o.jsx("div",{className:"text-sm text-gray-500",children:""}):o.jsxs(o.Fragment,{children:[o.jsx("div",{className:"md:hidden space-y-2",children:lt.list.map(q=>o.jsxs("div",{className:"border rounded-xl p-3",children:[o.jsxs("div",{className:"flex items-start justify-between gap-2",children:[o.jsx("div",{className:"font-semibold truncate",children:q.name}),o.jsxs("div",{className:"text-sm font-bold whitespace-nowrap",children:["C$",yr(q.balance)]})]}),o.jsxs("div",{className:"text-xs text-gray-600 mt-1",children:["ltimo abono:"," ",o.jsx("span",{className:"font-medium",children:q.lastPayment||""})]})]},q.customerId))}),o.jsx("div",{className:"hidden md:block overflow-x-auto",children:o.jsxs("table",{className:"min-w-full border text-sm",children:[o.jsx("thead",{className:"bg-gray-100",children:o.jsxs("tr",{children:[o.jsx("th",{className:"border p-2 text-left",children:"Cliente"}),o.jsx("th",{className:"border p-2",children:"Saldo"}),o.jsx("th",{className:"border p-2",children:"ltimo abono"})]})}),o.jsx("tbody",{children:lt.list.map(q=>o.jsxs("tr",{className:"text-center",children:[o.jsx("td",{className:"border p-2 text-left",children:q.name}),o.jsxs("td",{className:"border p-2",children:["C$",yr(q.balance)]}),o.jsx("td",{className:"border p-2",children:q.lastPayment||""})]},q.customerId))})]})})]})]}),o.jsxs("div",{className:"mb-3 flex flex-col sm:flex-row sm:items-center gap-2",children:[o.jsxs("h3",{className:"font-semibold text-sm sm:text-base",children:["Tabla principal (Agrupar por: ",S,")"]}),o.jsx("span",{className:"text-xs text-gray-500 sm:ml-auto",children:"Tap/Click en Ver detalle para drill-down"})]}),P?o.jsx("p",{className:"text-sm",children:"Cargando..."}):o.jsxs(o.Fragment,{children:[o.jsx("div",{className:"md:hidden space-y-2 mb-6",children:xe.length===0?o.jsx("div",{className:"border rounded-xl p-3 text-center text-gray-500",children:"Sin datos con los filtros seleccionados."}):xe.map(q=>o.jsxs("div",{className:"border rounded-2xl p-3 shadow-sm bg-white",children:[o.jsxs("div",{className:"flex items-start justify-between gap-2",children:[o.jsx("div",{className:"font-semibold truncate",children:q.label}),o.jsx("button",{className:"px-3 py-2 rounded-lg bg-gray-800 text-white text-sm font-semibold",onClick:()=>ie(q.key),children:"Ver detalle"})]}),o.jsxs("div",{className:"grid grid-cols-2 gap-2 mt-3 text-sm",children:[o.jsxs("div",{className:"bg-gray-50 rounded-xl p-2",children:[o.jsx("div",{className:"text-xs text-gray-600",children:"Paquetes cash"}),o.jsx("div",{className:"font-bold",children:Ss(q.packsCash)})]}),o.jsxs("div",{className:"bg-gray-50 rounded-xl p-2",children:[o.jsx("div",{className:"text-xs text-gray-600",children:"Paquetes crdito"}),o.jsx("div",{className:"font-bold",children:Ss(q.packsCredit)})]}),o.jsxs("div",{className:"bg-gray-50 rounded-xl p-2",children:[o.jsx("div",{className:"text-xs text-gray-600",children:"Ventas cash"}),o.jsxs("div",{className:"font-bold",children:["C$",yr(q.salesCash)]})]}),o.jsxs("div",{className:"bg-gray-50 rounded-xl p-2",children:[o.jsx("div",{className:"text-xs text-gray-600",children:"Ventas crdito"}),o.jsxs("div",{className:"font-bold",children:["C$",yr(q.salesCredit)]})]}),o.jsxs("div",{className:"bg-gray-50 rounded-xl p-2",children:[o.jsx("div",{className:"text-xs text-gray-600",children:"Comisin cash"}),o.jsxs("div",{className:"font-bold",children:["C$",yr(q.commCash)]})]}),o.jsxs("div",{className:"bg-gray-50 rounded-xl p-2",children:[o.jsx("div",{className:"text-xs text-gray-600",children:"Comisin crdito"}),o.jsxs("div",{className:"font-bold",children:["C$",yr(q.commCredit)]})]})]})]},q.key))}),o.jsx("div",{className:"hidden md:block overflow-x-auto mb-6 shadow-2xl rounded-xl border",children:o.jsxs("table",{className:"min-w-full border text-sm",children:[o.jsx("thead",{className:"bg-gray-100",children:o.jsxs("tr",{children:[o.jsx("th",{className:"border p-2 text-left",children:S==="DIA"?"Da":S==="VENDEDOR"?"Vendedor":S==="PRODUCTO"?"Producto":"Sucursal"}),o.jsx("th",{className:"border p-2",children:"Paquetes cash"}),o.jsx("th",{className:"border p-2",children:"Paquetes crdito"}),o.jsx("th",{className:"border p-2",children:"Ventas cash"}),o.jsx("th",{className:"border p-2",children:"Ventas crdito"}),o.jsx("th",{className:"border p-2",children:"Comisin cash"}),o.jsx("th",{className:"border p-2",children:"Comisin crdito"}),o.jsx("th",{className:"border p-2",children:"Opciones"})]})}),o.jsxs("tbody",{children:[xe.map(q=>o.jsxs("tr",{className:"text-center",children:[o.jsx("td",{className:"border p-2 text-left",children:q.label}),o.jsx("td",{className:"border p-2",children:Ss(q.packsCash)}),o.jsx("td",{className:"border p-2",children:Ss(q.packsCredit)}),o.jsxs("td",{className:"border p-2",children:["C$",yr(q.salesCash)]}),o.jsxs("td",{className:"border p-2",children:["C$",yr(q.salesCredit)]}),o.jsxs("td",{className:"border p-2",children:["C$",yr(q.commCash)]}),o.jsxs("td",{className:"border p-2",children:["C$",yr(q.commCredit)]}),o.jsx("td",{className:"border p-2",children:o.jsx("button",{className:"text-xs bg-gray-800 text-white px-3 py-2 rounded-lg hover:bg-black",onClick:()=>ie(q.key),children:"Ver detalle"})})]},q.key)),xe.length===0&&o.jsx("tr",{children:o.jsx("td",{colSpan:8,className:"p-4 text-center text-gray-500",children:"Sin datos con los filtros seleccionados."})})]})]})})]}),Ge&&o.jsxs("div",{className:"rounded-2xl shadow-lg p-3 sm:p-4 bg-white border-solid border-2 border-gray-100",children:[o.jsxs("div",{className:"flex flex-col sm:flex-row sm:items-center gap-2 mb-3",children:[o.jsxs("h2",{className:"text-base sm:text-xl font-semibold truncate",children:["Detalle "," ",((wt=xe.find(q=>q.key===Ge))==null?void 0:wt.label)||Ge]}),o.jsx("button",{onClick:()=>ie(""),className:"w-full sm:w-auto text-sm px-3 py-2 border rounded-lg hover:bg-gray-50",children:"Cerrar"})]}),o.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-4 gap-2 text-sm mb-4",children:[o.jsxs("div",{className:"border rounded-xl p-3 bg-gray-50",children:["Total Ventas cash:"," ",o.jsxs("strong",{children:["C$",yr(He.filter(q=>q.type==="CONTADO").reduce((q,ae)=>q+Br(ae.amount),0))]})]}),o.jsxs("div",{className:"border rounded-xl p-3 bg-gray-50",children:["Total Ventas crdito:"," ",o.jsxs("strong",{children:["C$",yr(He.filter(q=>q.type==="CREDITO").reduce((q,ae)=>q+Br(ae.amount),0))]})]}),o.jsxs("div",{className:"border rounded-xl p-3 bg-gray-50",children:["Total paquetes cash:"," ",o.jsx("strong",{children:Ss(He.filter(q=>q.type==="CONTADO").reduce((q,ae)=>q+Br(ae.packages),0))})]}),o.jsxs("div",{className:"border rounded-xl p-3 bg-gray-50",children:["Total paquetes crdito:"," ",o.jsx("strong",{children:Ss(He.filter(q=>q.type==="CREDITO").reduce((q,ae)=>q+Br(ae.packages),0))})]})]}),o.jsx("h3",{className:"font-semibold mb-2 text-sm sm:text-base",children:"Ventas incluidas"}),o.jsx("div",{className:"md:hidden space-y-2 mb-4",children:He.length===0?o.jsx("div",{className:"border rounded-xl p-3 text-center text-gray-500",children:"Sin detalle."}):He.map(q=>o.jsxs("div",{className:"border rounded-2xl p-3",children:[o.jsxs("div",{className:"flex items-start justify-between gap-2",children:[o.jsx("div",{className:"font-semibold truncate",children:q.productName}),o.jsxs("div",{className:"text-sm font-bold whitespace-nowrap",children:["C$",yr(q.amount)]})]}),o.jsxs("div",{className:"text-xs text-gray-600 mt-1",children:["Vendedor:"," ",o.jsx("span",{className:"font-medium",children:q.vendorName})]}),o.jsxs("div",{className:"grid grid-cols-2 gap-2 mt-3 text-sm",children:[o.jsxs("div",{className:"bg-gray-50 rounded-xl p-2",children:[o.jsx("div",{className:"text-xs text-gray-600",children:"Tipo"}),o.jsx("div",{className:"font-bold",children:q.type==="CREDITO"?"Crdito":"Cash"})]}),o.jsxs("div",{className:"bg-gray-50 rounded-xl p-2",children:[o.jsx("div",{className:"text-xs text-gray-600",children:"Sucursal"}),o.jsx("div",{className:"font-bold",children:q.branch||""})]}),o.jsxs("div",{className:"bg-gray-50 rounded-xl p-2",children:[o.jsx("div",{className:"text-xs text-gray-600",children:"Paquetes"}),o.jsx("div",{className:"font-bold",children:Ss(q.packages)})]}),o.jsxs("div",{className:"bg-gray-50 rounded-xl p-2",children:[o.jsx("div",{className:"text-xs text-gray-600",children:"Comisin"}),o.jsxs("div",{className:"font-bold",children:["C$",yr(q.commission)]})]})]}),o.jsxs("div",{className:"text-xs text-gray-500 mt-2",children:["Fecha: ",q.date]})]},q.id))}),o.jsx("div",{className:"hidden md:block overflow-x-auto mb-4",children:o.jsxs("table",{className:"min-w-full border text-sm",children:[o.jsx("thead",{className:"bg-gray-100",children:o.jsxs("tr",{children:[o.jsx("th",{className:"border p-2",children:"Vendedor"}),o.jsx("th",{className:"border p-2",children:"Producto"}),o.jsx("th",{className:"border p-2",children:"Tipo"}),o.jsx("th",{className:"border p-2",children:"Sucursal"}),o.jsx("th",{className:"border p-2",children:"Paquetes"}),o.jsx("th",{className:"border p-2",children:"Monto"}),o.jsx("th",{className:"border p-2",children:"Comisin"}),o.jsx("th",{className:"border p-2",children:"Fecha venta"})]})}),o.jsxs("tbody",{children:[He.map(q=>o.jsxs("tr",{className:"text-center",children:[o.jsx("td",{className:"border p-2",children:q.vendorName}),o.jsx("td",{className:"border p-2",children:q.productName}),o.jsx("td",{className:"border p-2",children:q.type==="CREDITO"?"Crdito":"Cash"}),o.jsx("td",{className:"border p-2",children:q.branch||""}),o.jsx("td",{className:"border p-2",children:Ss(q.packages)}),o.jsxs("td",{className:"border p-2",children:["C$",yr(q.amount)]}),o.jsxs("td",{className:"border p-2",children:["C$",yr(q.commission)]}),o.jsx("td",{className:"border p-2",children:q.date})]},q.id)),He.length===0&&o.jsx("tr",{children:o.jsx("td",{colSpan:8,className:"p-4 text-center text-gray-500",children:"Sin detalle."})})]})]})}),o.jsx("h3",{className:"font-semibold mb-2 text-sm sm:text-base",children:"Consolidado por producto"}),o.jsx("div",{className:"md:hidden space-y-2",children:Ce.length===0?o.jsx("div",{className:"border rounded-xl p-3 text-center text-gray-500",children:"Sin consolidado."}):Ce.map(q=>o.jsxs("div",{className:"border rounded-2xl p-3",children:[o.jsx("div",{className:"font-semibold",children:q.productName}),o.jsxs("div",{className:"grid grid-cols-2 gap-2 mt-3 text-sm",children:[o.jsxs("div",{className:"bg-gray-50 rounded-xl p-2",children:[o.jsx("div",{className:"text-xs text-gray-600",children:"Paq cash"}),o.jsx("div",{className:"font-bold",children:Ss(q.packsCash)})]}),o.jsxs("div",{className:"bg-gray-50 rounded-xl p-2",children:[o.jsx("div",{className:"text-xs text-gray-600",children:"Paq crdito"}),o.jsx("div",{className:"font-bold",children:Ss(q.packsCredit)})]}),o.jsxs("div",{className:"bg-gray-50 rounded-xl p-2",children:[o.jsx("div",{className:"text-xs text-gray-600",children:"Ventas cash"}),o.jsxs("div",{className:"font-bold",children:["C$",yr(q.salesCash)]})]}),o.jsxs("div",{className:"bg-gray-50 rounded-xl p-2",children:[o.jsx("div",{className:"text-xs text-gray-600",children:"Ventas crdito"}),o.jsxs("div",{className:"font-bold",children:["C$",yr(q.salesCredit)]})]}),o.jsxs("div",{className:"bg-gray-50 rounded-xl p-2",children:[o.jsx("div",{className:"text-xs text-gray-600",children:"Com cash"}),o.jsxs("div",{className:"font-bold",children:["C$",yr(q.commCash)]})]}),o.jsxs("div",{className:"bg-gray-50 rounded-xl p-2",children:[o.jsx("div",{className:"text-xs text-gray-600",children:"Com crdito"}),o.jsxs("div",{className:"font-bold",children:["C$",yr(q.commCredit)]})]})]})]},q.productName))}),o.jsx("div",{className:"hidden md:block overflow-x-auto",children:o.jsxs("table",{className:"min-w-full border text-sm",children:[o.jsx("thead",{className:"bg-gray-100",children:o.jsxs("tr",{children:[o.jsx("th",{className:"border p-2",children:"Producto"}),o.jsx("th",{className:"border p-2",children:"Total paquetes cash"}),o.jsx("th",{className:"border p-2",children:"Total paquetes crdito"}),o.jsx("th",{className:"border p-2",children:"Ventas cash"}),o.jsx("th",{className:"border p-2",children:"Ventas crdito"}),o.jsx("th",{className:"border p-2",children:"Comisin cash"}),o.jsx("th",{className:"border p-2",children:"Comisin crdito"})]})}),o.jsxs("tbody",{children:[Ce.map(q=>o.jsxs("tr",{className:"text-center",children:[o.jsx("td",{className:"border p-2 text-left",children:q.productName}),o.jsx("td",{className:"border p-2",children:Ss(q.packsCash)}),o.jsx("td",{className:"border p-2",children:Ss(q.packsCredit)}),o.jsxs("td",{className:"border p-2",children:["C$",yr(q.salesCash)]}),o.jsxs("td",{className:"border p-2",children:["C$",yr(q.salesCredit)]}),o.jsxs("td",{className:"border p-2",children:["C$",yr(q.commCash)]}),o.jsxs("td",{className:"border p-2",children:["C$",yr(q.commCredit)]})]},q.productName)),Ce.length===0&&o.jsx("tr",{children:o.jsx("td",{colSpan:7,className:"p-4 text-center text-gray-500",children:"Sin consolidado."})})]})]})})]})]})]}),F&&o.jsx("p",{className:"mt-3 text-sm",children:F})]})}):o.jsxs("div",{className:"max-w-5xl mx-auto p-3 sm:p-4 md:p-6 bg-white rounded-2xl shadow-2xl",children:[o.jsx("h2",{className:"text-lg md:text-xl font-bold",children:"Data Center - Dulces"}),o.jsx("p",{className:"text-sm text-gray-600 mt-2",children:"No autorizado."})]})}function Une(t){var e,r,n="";if(typeof t=="string"||typeof t=="number")n+=t;else if(typeof t=="object")if(Array.isArray(t)){var a=t.length;for(e=0;e<a;e++)t[e]&&(r=Une(t[e]))&&(n&&(n+=" "),n+=r)}else for(r in t)t[r]&&(n&&(n+=" "),n+=r);return n}function Ea(){for(var t,e,r=0,n="",a=arguments.length;r<a;r++)(t=arguments[r])&&(e=Une(t))&&(n&&(n+=" "),n+=e);return n}var kUe=["dangerouslySetInnerHTML","onCopy","onCopyCapture","onCut","onCutCapture","onPaste","onPasteCapture","onCompositionEnd","onCompositionEndCapture","onCompositionStart","onCompositionStartCapture","onCompositionUpdate","onCompositionUpdateCapture","onFocus","onFocusCapture","onBlur","onBlurCapture","onChange","onChangeCapture","onBeforeInput","onBeforeInputCapture","onInput","onInputCapture","onReset","onResetCapture","onSubmit","onSubmitCapture","onInvalid","onInvalidCapture","onLoad","onLoadCapture","onError","onErrorCapture","onKeyDown","onKeyDownCapture","onKeyPress","onKeyPressCapture","onKeyUp","onKeyUpCapture","onAbort","onAbortCapture","onCanPlay","onCanPlayCapture","onCanPlayThrough","onCanPlayThroughCapture","onDurationChange","onDurationChangeCapture","onEmptied","onEmptiedCapture","onEncrypted","onEncryptedCapture","onEnded","onEndedCapture","onLoadedData","onLoadedDataCapture","onLoadedMetadata","onLoadedMetadataCapture","onLoadStart","onLoadStartCapture","onPause","onPauseCapture","onPlay","onPlayCapture","onPlaying","onPlayingCapture","onProgress","onProgressCapture","onRateChange","onRateChangeCapture","onSeeked","onSeekedCapture","onSeeking","onSeekingCapture","onStalled","onStalledCapture","onSuspend","onSuspendCapture","onTimeUpdate","onTimeUpdateCapture","onVolumeChange","onVolumeChangeCapture","onWaiting","onWaitingCapture","onAuxClick","onAuxClickCapture","onClick","onClickCapture","onContextMenu","onContextMenuCapture","onDoubleClick","onDoubleClickCapture","onDrag","onDragCapture","onDragEnd","onDragEndCapture","onDragEnter","onDragEnterCapture","onDragExit","onDragExitCapture","onDragLeave","onDragLeaveCapture","onDragOver","onDragOverCapture","onDragStart","onDragStartCapture","onDrop","onDropCapture","onMouseDown","onMouseDownCapture","onMouseEnter","onMouseLeave","onMouseMove","onMouseMoveCapture","onMouseOut","onMouseOutCapture","onMouseOver","onMouseOverCapture","onMouseUp","onMouseUpCapture","onSelect","onSelectCapture","onTouchCancel","onTouchCancelCapture","onTouchEnd","onTouchEndCapture","onTouchMove","onTouchMoveCapture","onTouchStart","onTouchStartCapture","onPointerDown","onPointerDownCapture","onPointerMove","onPointerMoveCapture","onPointerUp","onPointerUpCapture","onPointerCancel","onPointerCancelCapture","onPointerEnter","onPointerEnterCapture","onPointerLeave","onPointerLeaveCapture","onPointerOver","onPointerOverCapture","onPointerOut","onPointerOutCapture","onGotPointerCapture","onGotPointerCaptureCapture","onLostPointerCapture","onLostPointerCaptureCapture","onScroll","onScrollCapture","onWheel","onWheelCapture","onAnimationStart","onAnimationStartCapture","onAnimationEnd","onAnimationEndCapture","onAnimationIteration","onAnimationIterationCapture","onTransitionEnd","onTransitionEndCapture"];function FD(t){if(typeof t!="string")return!1;var e=kUe;return e.includes(t)}var FUe=["aria-activedescendant","aria-atomic","aria-autocomplete","aria-busy","aria-checked","aria-colcount","aria-colindex","aria-colspan","aria-controls","aria-current","aria-describedby","aria-details","aria-disabled","aria-errormessage","aria-expanded","aria-flowto","aria-haspopup","aria-hidden","aria-invalid","aria-keyshortcuts","aria-label","aria-labelledby","aria-level","aria-live","aria-modal","aria-multiline","aria-multiselectable","aria-orientation","aria-owns","aria-placeholder","aria-posinset","aria-pressed","aria-readonly","aria-relevant","aria-required","aria-roledescription","aria-rowcount","aria-rowindex","aria-rowspan","aria-selected","aria-setsize","aria-sort","aria-valuemax","aria-valuemin","aria-valuenow","aria-valuetext","className","color","height","id","lang","max","media","method","min","name","style","target","width","role","tabIndex","accentHeight","accumulate","additive","alignmentBaseline","allowReorder","alphabetic","amplitude","arabicForm","ascent","attributeName","attributeType","autoReverse","azimuth","baseFrequency","baselineShift","baseProfile","bbox","begin","bias","by","calcMode","capHeight","clip","clipPath","clipPathUnits","clipRule","colorInterpolation","colorInterpolationFilters","colorProfile","colorRendering","contentScriptType","contentStyleType","cursor","cx","cy","d","decelerate","descent","diffuseConstant","direction","display","divisor","dominantBaseline","dur","dx","dy","edgeMode","elevation","enableBackground","end","exponent","externalResourcesRequired","fill","fillOpacity","fillRule","filter","filterRes","filterUnits","floodColor","floodOpacity","focusable","fontFamily","fontSize","fontSizeAdjust","fontStretch","fontStyle","fontVariant","fontWeight","format","from","fx","fy","g1","g2","glyphName","glyphOrientationHorizontal","glyphOrientationVertical","glyphRef","gradientTransform","gradientUnits","hanging","horizAdvX","horizOriginX","href","ideographic","imageRendering","in2","in","intercept","k1","k2","k3","k4","k","kernelMatrix","kernelUnitLength","kerning","keyPoints","keySplines","keyTimes","lengthAdjust","letterSpacing","lightingColor","limitingConeAngle","local","markerEnd","markerHeight","markerMid","markerStart","markerUnits","markerWidth","mask","maskContentUnits","maskUnits","mathematical","mode","numOctaves","offset","opacity","operator","order","orient","orientation","origin","overflow","overlinePosition","overlineThickness","paintOrder","panose1","pathLength","patternContentUnits","patternTransform","patternUnits","pointerEvents","pointsAtX","pointsAtY","pointsAtZ","preserveAlpha","preserveAspectRatio","primitiveUnits","r","radius","refX","refY","renderingIntent","repeatCount","repeatDur","requiredExtensions","requiredFeatures","restart","result","rotate","rx","ry","seed","shapeRendering","slope","spacing","specularConstant","specularExponent","speed","spreadMethod","startOffset","stdDeviation","stemh","stemv","stitchTiles","stopColor","stopOpacity","strikethroughPosition","strikethroughThickness","string","stroke","strokeDasharray","strokeDashoffset","strokeLinecap","strokeLinejoin","strokeMiterlimit","strokeOpacity","strokeWidth","surfaceScale","systemLanguage","tableValues","targetX","targetY","textAnchor","textDecoration","textLength","textRendering","to","transform","u1","u2","underlinePosition","underlineThickness","unicode","unicodeBidi","unicodeRange","unitsPerEm","vAlphabetic","values","vectorEffect","version","vertAdvY","vertOriginX","vertOriginY","vHanging","vIdeographic","viewTarget","visibility","vMathematical","widths","wordSpacing","writingMode","x1","x2","x","xChannelSelector","xHeight","xlinkActuate","xlinkArcrole","xlinkHref","xlinkRole","xlinkShow","xlinkTitle","xlinkType","xmlBase","xmlLang","xmlns","xmlnsXlink","xmlSpace","y1","y2","y","yChannelSelector","z","zoomAndPan","ref","key","angle"],OUe=new Set(FUe);function Qne(t){return typeof t!="string"?!1:OUe.has(t)}function Vne(t){return typeof t=="string"&&t.startsWith("data-")}function If(t){if(typeof t!="object"||t===null)return{};var e={};for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&(Qne(r)||Vne(r))&&(e[r]=t[r]);return e}function p2(t){if(t==null)return null;if(v.isValidElement(t)&&typeof t.props=="object"&&t.props!==null){var e=t.props;return If(e)}return typeof t=="object"&&!Array.isArray(t)?If(t):null}function zu(t){var e={};for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&(Qne(r)||Vne(r)||FD(r))&&(e[r]=t[r]);return e}var DUe=["children","width","height","viewBox","className","style","title","desc"];function gk(){return gk=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var r=arguments[e];for(var n in r)({}).hasOwnProperty.call(r,n)&&(t[n]=r[n])}return t},gk.apply(null,arguments)}function RUe(t,e){if(t==null)return{};var r,n,a=MUe(t,e);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(t);for(n=0;n<s.length;n++)r=s[n],e.indexOf(r)===-1&&{}.propertyIsEnumerable.call(t,r)&&(a[r]=t[r])}return a}function MUe(t,e){if(t==null)return{};var r={};for(var n in t)if({}.hasOwnProperty.call(t,n)){if(e.indexOf(n)!==-1)continue;r[n]=t[n]}return r}var OD=v.forwardRef((t,e)=>{var{children:r,width:n,height:a,viewBox:s,className:i,style:l,title:c,desc:u}=t,d=RUe(t,DUe),f=s||{width:n,height:a,x:0,y:0},h=Ea("recharts-surface",i);return v.createElement("svg",gk({},zu(d),{className:h,width:n,height:a,style:l,viewBox:"".concat(f.x," ").concat(f.y," ").concat(f.width," ").concat(f.height),ref:e}),v.createElement("title",null,c),v.createElement("desc",null,u),r)}),LUe=["children","className"];function xk(){return xk=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var r=arguments[e];for(var n in r)({}).hasOwnProperty.call(r,n)&&(t[n]=r[n])}return t},xk.apply(null,arguments)}function UUe(t,e){if(t==null)return{};var r,n,a=QUe(t,e);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(t);for(n=0;n<s.length;n++)r=s[n],e.indexOf(r)===-1&&{}.propertyIsEnumerable.call(t,r)&&(a[r]=t[r])}return a}function QUe(t,e){if(t==null)return{};var r={};for(var n in t)if({}.hasOwnProperty.call(t,n)){if(e.indexOf(n)!==-1)continue;r[n]=t[n]}return r}var Hl=v.forwardRef((t,e)=>{var{children:r,className:n}=t,a=UUe(t,LUe),s=Ea("recharts-layer",n);return v.createElement("g",xk({className:s},zu(a),{ref:e}),r)}),Hne=v.createContext(null),VUe=()=>v.useContext(Hne);function Va(t){return function(){return t}}const $ne=Math.cos,NS=Math.sin,Kd=Math.sqrt,CS=Math.PI,O4=2*CS,vk=Math.PI,yk=2*vk,km=1e-6,HUe=yk-km;function Kne(t){this._+=t[0];for(let e=1,r=t.length;e<r;++e)this._+=arguments[e]+t[e]}function $Ue(t){let e=Math.floor(t);if(!(e>=0))throw new Error(`invalid digits: ${t}`);if(e>15)return Kne;const r=10**e;return function(n){this._+=n[0];for(let a=1,s=n.length;a<s;++a)this._+=Math.round(arguments[a]*r)/r+n[a]}}class KUe{constructor(e){this._x0=this._y0=this._x1=this._y1=null,this._="",this._append=e==null?Kne:$Ue(e)}moveTo(e,r){this._append`M${this._x0=this._x1=+e},${this._y0=this._y1=+r}`}closePath(){this._x1!==null&&(this._x1=this._x0,this._y1=this._y0,this._append`Z`)}lineTo(e,r){this._append`L${this._x1=+e},${this._y1=+r}`}quadraticCurveTo(e,r,n,a){this._append`Q${+e},${+r},${this._x1=+n},${this._y1=+a}`}bezierCurveTo(e,r,n,a,s,i){this._append`C${+e},${+r},${+n},${+a},${this._x1=+s},${this._y1=+i}`}arcTo(e,r,n,a,s){if(e=+e,r=+r,n=+n,a=+a,s=+s,s<0)throw new Error(`negative radius: ${s}`);let i=this._x1,l=this._y1,c=n-e,u=a-r,d=i-e,f=l-r,h=d*d+f*f;if(this._x1===null)this._append`M${this._x1=e},${this._y1=r}`;else if(h>km)if(!(Math.abs(f*c-u*d)>km)||!s)this._append`L${this._x1=e},${this._y1=r}`;else{let A=n-i,m=a-l,p=c*c+u*u,g=A*A+m*m,x=Math.sqrt(p),y=Math.sqrt(h),b=s*Math.tan((vk-Math.acos((p+h-g)/(2*x*y)))/2),w=b/y,j=b/x;Math.abs(w-1)>km&&this._append`L${e+w*d},${r+w*f}`,this._append`A${s},${s},0,0,${+(f*A>d*m)},${this._x1=e+j*c},${this._y1=r+j*u}`}}arc(e,r,n,a,s,i){if(e=+e,r=+r,n=+n,i=!!i,n<0)throw new Error(`negative radius: ${n}`);let l=n*Math.cos(a),c=n*Math.sin(a),u=e+l,d=r+c,f=1^i,h=i?a-s:s-a;this._x1===null?this._append`M${u},${d}`:(Math.abs(this._x1-u)>km||Math.abs(this._y1-d)>km)&&this._append`L${u},${d}`,n&&(h<0&&(h=h%yk+yk),h>HUe?this._append`A${n},${n},0,1,${f},${e-l},${r-c}A${n},${n},0,1,${f},${this._x1=u},${this._y1=d}`:h>km&&this._append`A${n},${n},0,${+(h>=vk)},${f},${this._x1=e+n*Math.cos(s)},${this._y1=r+n*Math.sin(s)}`)}rect(e,r,n,a){this._append`M${this._x0=this._x1=+e},${this._y0=this._y1=+r}h${n=+n}v${+a}h${-n}Z`}toString(){return this._}}function DD(t){let e=3;return t.digits=function(r){if(!arguments.length)return e;if(r==null)e=null;else{const n=Math.floor(r);if(!(n>=0))throw new RangeError(`invalid digits: ${r}`);e=n}return t},()=>new KUe(e)}function RD(t){return typeof t=="object"&&"length"in t?t:Array.from(t)}function Gne(t){this._context=t}Gne.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._point=0},lineEnd:function(){(this._line||this._line!==0&&this._point===1)&&this._context.closePath(),this._line=1-this._line},point:function(t,e){switch(t=+t,e=+e,this._point){case 0:this._point=1,this._line?this._context.lineTo(t,e):this._context.moveTo(t,e);break;case 1:this._point=2;default:this._context.lineTo(t,e);break}}};function D4(t){return new Gne(t)}function qne(t){return t[0]}function zne(t){return t[1]}function Wne(t,e){var r=Va(!0),n=null,a=D4,s=null,i=DD(l);t=typeof t=="function"?t:t===void 0?qne:Va(t),e=typeof e=="function"?e:e===void 0?zne:Va(e);function l(c){var u,d=(c=RD(c)).length,f,h=!1,A;for(n==null&&(s=a(A=i())),u=0;u<=d;++u)!(u<d&&r(f=c[u],u,c))===h&&((h=!h)?s.lineStart():s.lineEnd()),h&&s.point(+t(f,u,c),+e(f,u,c));if(A)return s=null,A+""||null}return l.x=function(c){return arguments.length?(t=typeof c=="function"?c:Va(+c),l):t},l.y=function(c){return arguments.length?(e=typeof c=="function"?c:Va(+c),l):e},l.defined=function(c){return arguments.length?(r=typeof c=="function"?c:Va(!!c),l):r},l.curve=function(c){return arguments.length?(a=c,n!=null&&(s=a(n)),l):a},l.context=function(c){return arguments.length?(c==null?n=s=null:s=a(n=c),l):n},l}function RC(t,e,r){var n=null,a=Va(!0),s=null,i=D4,l=null,c=DD(u);t=typeof t=="function"?t:t===void 0?qne:Va(+t),e=typeof e=="function"?e:Va(e===void 0?0:+e),r=typeof r=="function"?r:r===void 0?zne:Va(+r);function u(f){var h,A,m,p=(f=RD(f)).length,g,x=!1,y,b=new Array(p),w=new Array(p);for(s==null&&(l=i(y=c())),h=0;h<=p;++h){if(!(h<p&&a(g=f[h],h,f))===x)if(x=!x)A=h,l.areaStart(),l.lineStart();else{for(l.lineEnd(),l.lineStart(),m=h-1;m>=A;--m)l.point(b[m],w[m]);l.lineEnd(),l.areaEnd()}x&&(b[h]=+t(g,h,f),w[h]=+e(g,h,f),l.point(n?+n(g,h,f):b[h],r?+r(g,h,f):w[h]))}if(y)return l=null,y+""||null}function d(){return Wne().defined(a).curve(i).context(s)}return u.x=function(f){return arguments.length?(t=typeof f=="function"?f:Va(+f),n=null,u):t},u.x0=function(f){return arguments.length?(t=typeof f=="function"?f:Va(+f),u):t},u.x1=function(f){return arguments.length?(n=f==null?null:typeof f=="function"?f:Va(+f),u):n},u.y=function(f){return arguments.length?(e=typeof f=="function"?f:Va(+f),r=null,u):e},u.y0=function(f){return arguments.length?(e=typeof f=="function"?f:Va(+f),u):e},u.y1=function(f){return arguments.length?(r=f==null?null:typeof f=="function"?f:Va(+f),u):r},u.lineX0=u.lineY0=function(){return d().x(t).y(e)},u.lineY1=function(){return d().x(t).y(r)},u.lineX1=function(){return d().x(n).y(e)},u.defined=function(f){return arguments.length?(a=typeof f=="function"?f:Va(!!f),u):a},u.curve=function(f){return arguments.length?(i=f,s!=null&&(l=i(s)),u):i},u.context=function(f){return arguments.length?(f==null?s=l=null:l=i(s=f),u):s},u}class Xne{constructor(e,r){this._context=e,this._x=r}areaStart(){this._line=0}areaEnd(){this._line=NaN}lineStart(){this._point=0}lineEnd(){(this._line||this._line!==0&&this._point===1)&&this._context.closePath(),this._line=1-this._line}point(e,r){switch(e=+e,r=+r,this._point){case 0:{this._point=1,this._line?this._context.lineTo(e,r):this._context.moveTo(e,r);break}case 1:this._point=2;default:{this._x?this._context.bezierCurveTo(this._x0=(this._x0+e)/2,this._y0,this._x0,r,e,r):this._context.bezierCurveTo(this._x0,this._y0=(this._y0+r)/2,e,this._y0,e,r);break}}this._x0=e,this._y0=r}}function GUe(t){return new Xne(t,!0)}function qUe(t){return new Xne(t,!1)}const MD={draw(t,e){const r=Kd(e/CS);t.moveTo(r,0),t.arc(0,0,r,0,O4)}},zUe={draw(t,e){const r=Kd(e/5)/2;t.moveTo(-3*r,-r),t.lineTo(-r,-r),t.lineTo(-r,-3*r),t.lineTo(r,-3*r),t.lineTo(r,-r),t.lineTo(3*r,-r),t.lineTo(3*r,r),t.lineTo(r,r),t.lineTo(r,3*r),t.lineTo(-r,3*r),t.lineTo(-r,r),t.lineTo(-3*r,r),t.closePath()}},Yne=Kd(1/3),WUe=Yne*2,XUe={draw(t,e){const r=Kd(e/WUe),n=r*Yne;t.moveTo(0,-r),t.lineTo(n,0),t.lineTo(0,r),t.lineTo(-n,0),t.closePath()}},YUe={draw(t,e){const r=Kd(e),n=-r/2;t.rect(n,n,r,r)}},JUe=.8908130915292852,Jne=NS(CS/10)/NS(7*CS/10),ZUe=NS(O4/10)*Jne,e7e=-$ne(O4/10)*Jne,t7e={draw(t,e){const r=Kd(e*JUe),n=ZUe*r,a=e7e*r;t.moveTo(0,-r),t.lineTo(n,a);for(let s=1;s<5;++s){const i=O4*s/5,l=$ne(i),c=NS(i);t.lineTo(c*r,-l*r),t.lineTo(l*n-c*a,c*n+l*a)}t.closePath()}},pB=Kd(3),r7e={draw(t,e){const r=-Kd(e/(pB*3));t.moveTo(0,r*2),t.lineTo(-pB*r,-r),t.lineTo(pB*r,-r),t.closePath()}},xu=-.5,vu=Kd(3)/2,bk=1/Kd(12),n7e=(bk/2+1)*3,a7e={draw(t,e){const r=Kd(e/n7e),n=r/2,a=r*bk,s=n,i=r*bk+r,l=-s,c=i;t.moveTo(n,a),t.lineTo(s,i),t.lineTo(l,c),t.lineTo(xu*n-vu*a,vu*n+xu*a),t.lineTo(xu*s-vu*i,vu*s+xu*i),t.lineTo(xu*l-vu*c,vu*l+xu*c),t.lineTo(xu*n+vu*a,xu*a-vu*n),t.lineTo(xu*s+vu*i,xu*i-vu*s),t.lineTo(xu*l+vu*c,xu*c-vu*l),t.closePath()}};function s7e(t,e){let r=null,n=DD(a);t=typeof t=="function"?t:Va(t||MD),e=typeof e=="function"?e:Va(e===void 0?64:+e);function a(){let s;if(r||(r=s=n()),t.apply(this,arguments).draw(r,+e.apply(this,arguments)),s)return r=null,s+""||null}return a.type=function(s){return arguments.length?(t=typeof s=="function"?s:Va(s),a):t},a.size=function(s){return arguments.length?(e=typeof s=="function"?s:Va(+s),a):e},a.context=function(s){return arguments.length?(r=s??null,a):r},a}function _S(){}function ES(t,e,r){t._context.bezierCurveTo((2*t._x0+t._x1)/3,(2*t._y0+t._y1)/3,(t._x0+2*t._x1)/3,(t._y0+2*t._y1)/3,(t._x0+4*t._x1+e)/6,(t._y0+4*t._y1+r)/6)}function Zne(t){this._context=t}Zne.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._y0=this._y1=NaN,this._point=0},lineEnd:function(){switch(this._point){case 3:ES(this,this._x1,this._y1);case 2:this._context.lineTo(this._x1,this._y1);break}(this._line||this._line!==0&&this._point===1)&&this._context.closePath(),this._line=1-this._line},point:function(t,e){switch(t=+t,e=+e,this._point){case 0:this._point=1,this._line?this._context.lineTo(t,e):this._context.moveTo(t,e);break;case 1:this._point=2;break;case 2:this._point=3,this._context.lineTo((5*this._x0+this._x1)/6,(5*this._y0+this._y1)/6);default:ES(this,t,e);break}this._x0=this._x1,this._x1=t,this._y0=this._y1,this._y1=e}};function i7e(t){return new Zne(t)}function eae(t){this._context=t}eae.prototype={areaStart:_S,areaEnd:_S,lineStart:function(){this._x0=this._x1=this._x2=this._x3=this._x4=this._y0=this._y1=this._y2=this._y3=this._y4=NaN,this._point=0},lineEnd:function(){switch(this._point){case 1:{this._context.moveTo(this._x2,this._y2),this._context.closePath();break}case 2:{this._context.moveTo((this._x2+2*this._x3)/3,(this._y2+2*this._y3)/3),this._context.lineTo((this._x3+2*this._x2)/3,(this._y3+2*this._y2)/3),this._context.closePath();break}case 3:{this.point(this._x2,this._y2),this.point(this._x3,this._y3),this.point(this._x4,this._y4);break}}},point:function(t,e){switch(t=+t,e=+e,this._point){case 0:this._point=1,this._x2=t,this._y2=e;break;case 1:this._point=2,this._x3=t,this._y3=e;break;case 2:this._point=3,this._x4=t,this._y4=e,this._context.moveTo((this._x0+4*this._x1+t)/6,(this._y0+4*this._y1+e)/6);break;default:ES(this,t,e);break}this._x0=this._x1,this._x1=t,this._y0=this._y1,this._y1=e}};function o7e(t){return new eae(t)}function tae(t){this._context=t}tae.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._y0=this._y1=NaN,this._point=0},lineEnd:function(){(this._line||this._line!==0&&this._point===3)&&this._context.closePath(),this._line=1-this._line},point:function(t,e){switch(t=+t,e=+e,this._point){case 0:this._point=1;break;case 1:this._point=2;break;case 2:this._point=3;var r=(this._x0+4*this._x1+t)/6,n=(this._y0+4*this._y1+e)/6;this._line?this._context.lineTo(r,n):this._context.moveTo(r,n);break;case 3:this._point=4;default:ES(this,t,e);break}this._x0=this._x1,this._x1=t,this._y0=this._y1,this._y1=e}};function l7e(t){return new tae(t)}function rae(t){this._context=t}rae.prototype={areaStart:_S,areaEnd:_S,lineStart:function(){this._point=0},lineEnd:function(){this._point&&this._context.closePath()},point:function(t,e){t=+t,e=+e,this._point?this._context.lineTo(t,e):(this._point=1,this._context.moveTo(t,e))}};function c7e(t){return new rae(t)}function n$(t){return t<0?-1:1}function a$(t,e,r){var n=t._x1-t._x0,a=e-t._x1,s=(t._y1-t._y0)/(n||a<0&&-0),i=(r-t._y1)/(a||n<0&&-0),l=(s*a+i*n)/(n+a);return(n$(s)+n$(i))*Math.min(Math.abs(s),Math.abs(i),.5*Math.abs(l))||0}function s$(t,e){var r=t._x1-t._x0;return r?(3*(t._y1-t._y0)/r-e)/2:e}function gB(t,e,r){var n=t._x0,a=t._y0,s=t._x1,i=t._y1,l=(s-n)/3;t._context.bezierCurveTo(n+l,a+l*e,s-l,i-l*r,s,i)}function SS(t){this._context=t}SS.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._y0=this._y1=this._t0=NaN,this._point=0},lineEnd:function(){switch(this._point){case 2:this._context.lineTo(this._x1,this._y1);break;case 3:gB(this,this._t0,s$(this,this._t0));break}(this._line||this._line!==0&&this._point===1)&&this._context.closePath(),this._line=1-this._line},point:function(t,e){var r=NaN;if(t=+t,e=+e,!(t===this._x1&&e===this._y1)){switch(this._point){case 0:this._point=1,this._line?this._context.lineTo(t,e):this._context.moveTo(t,e);break;case 1:this._point=2;break;case 2:this._point=3,gB(this,s$(this,r=a$(this,t,e)),r);break;default:gB(this,this._t0,r=a$(this,t,e));break}this._x0=this._x1,this._x1=t,this._y0=this._y1,this._y1=e,this._t0=r}}};function nae(t){this._context=new aae(t)}(nae.prototype=Object.create(SS.prototype)).point=function(t,e){SS.prototype.point.call(this,e,t)};function aae(t){this._context=t}aae.prototype={moveTo:function(t,e){this._context.moveTo(e,t)},closePath:function(){this._context.closePath()},lineTo:function(t,e){this._context.lineTo(e,t)},bezierCurveTo:function(t,e,r,n,a,s){this._context.bezierCurveTo(e,t,n,r,s,a)}};function u7e(t){return new SS(t)}function d7e(t){return new nae(t)}function sae(t){this._context=t}sae.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x=[],this._y=[]},lineEnd:function(){var t=this._x,e=this._y,r=t.length;if(r)if(this._line?this._context.lineTo(t[0],e[0]):this._context.moveTo(t[0],e[0]),r===2)this._context.lineTo(t[1],e[1]);else for(var n=i$(t),a=i$(e),s=0,i=1;i<r;++s,++i)this._context.bezierCurveTo(n[0][s],a[0][s],n[1][s],a[1][s],t[i],e[i]);(this._line||this._line!==0&&r===1)&&this._context.closePath(),this._line=1-this._line,this._x=this._y=null},point:function(t,e){this._x.push(+t),this._y.push(+e)}};function i$(t){var e,r=t.length-1,n,a=new Array(r),s=new Array(r),i=new Array(r);for(a[0]=0,s[0]=2,i[0]=t[0]+2*t[1],e=1;e<r-1;++e)a[e]=1,s[e]=4,i[e]=4*t[e]+2*t[e+1];for(a[r-1]=2,s[r-1]=7,i[r-1]=8*t[r-1]+t[r],e=1;e<r;++e)n=a[e]/s[e-1],s[e]-=n,i[e]-=n*i[e-1];for(a[r-1]=i[r-1]/s[r-1],e=r-2;e>=0;--e)a[e]=(i[e]-a[e+1])/s[e];for(s[r-1]=(t[r]+a[r-1])/2,e=0;e<r-1;++e)s[e]=2*t[e+1]-a[e+1];return[a,s]}function f7e(t){return new sae(t)}function R4(t,e){this._context=t,this._t=e}R4.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x=this._y=NaN,this._point=0},lineEnd:function(){0<this._t&&this._t<1&&this._point===2&&this._context.lineTo(this._x,this._y),(this._line||this._line!==0&&this._point===1)&&this._context.closePath(),this._line>=0&&(this._t=1-this._t,this._line=1-this._line)},point:function(t,e){switch(t=+t,e=+e,this._point){case 0:this._point=1,this._line?this._context.lineTo(t,e):this._context.moveTo(t,e);break;case 1:this._point=2;default:{if(this._t<=0)this._context.lineTo(this._x,e),this._context.lineTo(t,e);else{var r=this._x*(1-this._t)+t*this._t;this._context.lineTo(r,this._y),this._context.lineTo(r,e)}break}}this._x=t,this._y=e}};function A7e(t){return new R4(t,.5)}function h7e(t){return new R4(t,0)}function m7e(t){return new R4(t,1)}function Lp(t,e){if((i=t.length)>1)for(var r=1,n,a,s=t[e[0]],i,l=s.length;r<i;++r)for(a=s,s=t[e[r]],n=0;n<l;++n)s[n][1]+=s[n][0]=isNaN(a[n][1])?a[n][0]:a[n][1]}function wk(t){for(var e=t.length,r=new Array(e);--e>=0;)r[e]=e;return r}function p7e(t,e){return t[e]}function g7e(t){const e=[];return e.key=t,e}function x7e(){var t=Va([]),e=wk,r=Lp,n=p7e;function a(s){var i=Array.from(t.apply(this,arguments),g7e),l,c=i.length,u=-1,d;for(const f of s)for(l=0,++u;l<c;++l)(i[l][u]=[0,+n(f,i[l].key,u,s)]).data=f;for(l=0,d=RD(e(i));l<c;++l)i[d[l]].index=l;return r(i,d),i}return a.keys=function(s){return arguments.length?(t=typeof s=="function"?s:Va(Array.from(s)),a):t},a.value=function(s){return arguments.length?(n=typeof s=="function"?s:Va(+s),a):n},a.order=function(s){return arguments.length?(e=s==null?wk:typeof s=="function"?s:Va(Array.from(s)),a):e},a.offset=function(s){return arguments.length?(r=s??Lp,a):r},a}function v7e(t,e){if((n=t.length)>0){for(var r,n,a=0,s=t[0].length,i;a<s;++a){for(i=r=0;r<n;++r)i+=t[r][a][1]||0;if(i)for(r=0;r<n;++r)t[r][a][1]/=i}Lp(t,e)}}function y7e(t,e){if((a=t.length)>0){for(var r=0,n=t[e[0]],a,s=n.length;r<s;++r){for(var i=0,l=0;i<a;++i)l+=t[i][r][1]||0;n[r][1]+=n[r][0]=-l/2}Lp(t,e)}}function b7e(t,e){if(!(!((i=t.length)>0)||!((s=(a=t[e[0]]).length)>0))){for(var r=0,n=1,a,s,i;n<s;++n){for(var l=0,c=0,u=0;l<i;++l){for(var d=t[e[l]],f=d[n][1]||0,h=d[n-1][1]||0,A=(f-h)/2,m=0;m<l;++m){var p=t[e[m]],g=p[n][1]||0,x=p[n-1][1]||0;A+=g-x}c+=f,u+=A*f}a[n-1][1]+=a[n-1][0]=r,c&&(r-=u/c)}a[n-1][1]+=a[n-1][0]=r,Lp(t,e)}}var M4={},iae={};(function(t){Object.defineProperty(t,Symbol.toStringTag,{value:"Module"});function e(r){return r==="__proto__"}t.isUnsafeProperty=e})(iae);var LD={};(function(t){Object.defineProperty(t,Symbol.toStringTag,{value:"Module"});function e(r){switch(typeof r){case"number":case"symbol":return!1;case"string":return r.includes(".")||r.includes("[")||r.includes("]")}}t.isDeepKey=e})(LD);var L4={};(function(t){Object.defineProperty(t,Symbol.toStringTag,{value:"Module"});function e(r){var n;return typeof r=="string"||typeof r=="symbol"?r:Object.is((n=r==null?void 0:r.valueOf)==null?void 0:n.call(r),-0)?"-0":String(r)}t.toKey=e})(L4);var U4={},oae={};(function(t){Object.defineProperty(t,Symbol.toStringTag,{value:"Module"});function e(r){if(r==null)return"";if(typeof r=="string")return r;if(Array.isArray(r))return r.map(e).join(",");const n=String(r);return n==="0"&&Object.is(Number(r),-0)?"-0":n}t.toString=e})(oae);(function(t){Object.defineProperty(t,Symbol.toStringTag,{value:"Module"});const e=oae,r=L4;function n(a){if(Array.isArray(a))return a.map(r.toKey);if(typeof a=="symbol")return[a];a=e.toString(a);const s=[],i=a.length;if(i===0)return s;let l=0,c="",u="",d=!1;for(a.charCodeAt(0)===46&&(s.push(""),l++);l<i;){const f=a[l];u?f==="\\"&&l+1<i?(l++,c+=a[l]):f===u?u="":c+=f:d?f==='"'||f==="'"?u=f:f==="]"?(d=!1,s.push(c),c=""):c+=f:f==="["?(d=!0,c&&(s.push(c),c="")):f==="."?c&&(s.push(c),c=""):c+=f,l++}return c&&s.push(c),s}t.toPath=n})(U4);(function(t){Object.defineProperty(t,Symbol.toStringTag,{value:"Module"});const e=iae,r=LD,n=L4,a=U4;function s(l,c,u){if(l==null)return u;switch(typeof c){case"string":{if(e.isUnsafeProperty(c))return u;const d=l[c];return d===void 0?r.isDeepKey(c)?s(l,a.toPath(c),u):u:d}case"number":case"symbol":{typeof c=="number"&&(c=n.toKey(c));const d=l[c];return d===void 0?u:d}default:{if(Array.isArray(c))return i(l,c,u);if(Object.is(c==null?void 0:c.valueOf(),-0)?c="-0":c=String(c),e.isUnsafeProperty(c))return u;const d=l[c];return d===void 0?u:d}}}function i(l,c,u){if(c.length===0)return u;let d=l;for(let f=0;f<c.length;f++){if(d==null||e.isUnsafeProperty(c[f]))return u;d=d[c[f]]}return d===void 0?u:d}t.get=s})(M4);var w7e=M4.get;const Up=zA(w7e);var N7e=4;function p0(t){var e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:N7e,r=10**e,n=Math.round(t*r)/r;return Object.is(n,-0)?0:n}function Hs(t){for(var e=arguments.length,r=new Array(e>1?e-1:0),n=1;n<e;n++)r[n-1]=arguments[n];return t.reduce((a,s,i)=>{var l=r[i-1];return typeof l=="string"?a+l+s:l!==void 0?a+p0(l)+s:a+s},"")}var Ko=t=>t===0?0:t>0?1:-1,jf=t=>typeof t=="number"&&t!=+t,QA=t=>typeof t=="string"&&t.indexOf("%")===t.length-1,Wr=t=>(typeof t=="number"||t instanceof Number)&&!jf(t),Bf=t=>Wr(t)||typeof t=="string",C7e=0,g2=t=>{var e=++C7e;return"".concat(t||"").concat(e)},xl=function(e,r){var n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:0,a=arguments.length>3&&arguments[3]!==void 0?arguments[3]:!1;if(!Wr(e)&&typeof e!="string")return n;var s;if(QA(e)){if(r==null)return n;var i=e.indexOf("%");s=r*parseFloat(e.slice(0,i))/100}else s=+e;return jf(s)&&(s=n),a&&r!=null&&s>r&&(s=r),s},lae=t=>{if(!Array.isArray(t))return!1;for(var e=t.length,r={},n=0;n<e;n++)if(!r[String(t[n])])r[String(t[n])]=!0;else return!0;return!1};function Di(t,e,r){return Wr(t)&&Wr(e)?p0(t+r*(e-t)):e}function _7e(t,e,r){if(!(!t||!t.length))return t.find(n=>n&&(typeof e=="function"?e(n):Up(n,e))===r)}var vo=t=>t===null||typeof t>"u",mw=t=>vo(t)?t:"".concat(t.charAt(0).toUpperCase()).concat(t.slice(1));function E7e(t){return t!=null}function pw(){}var S7e=["type","size","sizeType"];function Nk(){return Nk=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var r=arguments[e];for(var n in r)({}).hasOwnProperty.call(r,n)&&(t[n]=r[n])}return t},Nk.apply(null,arguments)}function o$(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter(function(a){return Object.getOwnPropertyDescriptor(t,a).enumerable})),r.push.apply(r,n)}return r}function l$(t){for(var e=1;e<arguments.length;e++){var r=arguments[e]!=null?arguments[e]:{};e%2?o$(Object(r),!0).forEach(function(n){I7e(t,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):o$(Object(r)).forEach(function(n){Object.defineProperty(t,n,Object.getOwnPropertyDescriptor(r,n))})}return t}function I7e(t,e,r){return(e=j7e(e))in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}function j7e(t){var e=B7e(t,"string");return typeof e=="symbol"?e:e+""}function B7e(t,e){if(typeof t!="object"||!t)return t;var r=t[Symbol.toPrimitive];if(r!==void 0){var n=r.call(t,e);if(typeof n!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}function P7e(t,e){if(t==null)return{};var r,n,a=T7e(t,e);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(t);for(n=0;n<s.length;n++)r=s[n],e.indexOf(r)===-1&&{}.propertyIsEnumerable.call(t,r)&&(a[r]=t[r])}return a}function T7e(t,e){if(t==null)return{};var r={};for(var n in t)if({}.hasOwnProperty.call(t,n)){if(e.indexOf(n)!==-1)continue;r[n]=t[n]}return r}var cae={symbolCircle:MD,symbolCross:zUe,symbolDiamond:XUe,symbolSquare:YUe,symbolStar:t7e,symbolTriangle:r7e,symbolWye:a7e},k7e=Math.PI/180,F7e=t=>{var e="symbol".concat(mw(t));return cae[e]||MD},O7e=(t,e,r)=>{if(e==="area")return t;switch(r){case"cross":return 5*t*t/9;case"diamond":return .5*t*t/Math.sqrt(3);case"square":return t*t;case"star":{var n=18*k7e;return 1.25*t*t*(Math.tan(n)-Math.tan(n*2)*Math.tan(n)**2)}case"triangle":return Math.sqrt(3)*t*t/4;case"wye":return(21-10*Math.sqrt(3))*t*t/8;default:return Math.PI*t*t/4}},D7e=(t,e)=>{cae["symbol".concat(mw(t))]=e},UD=t=>{var{type:e="circle",size:r=64,sizeType:n="area"}=t,a=P7e(t,S7e),s=l$(l$({},a),{},{type:e,size:r,sizeType:n}),i="circle";typeof e=="string"&&(i=e);var l=()=>{var h=F7e(i),A=s7e().type(h).size(O7e(r,n,i)),m=A();if(m!==null)return m},{className:c,cx:u,cy:d}=s,f=zu(s);return Wr(u)&&Wr(d)&&Wr(r)?v.createElement("path",Nk({},f,{className:Ea("recharts-symbols",c),transform:"translate(".concat(u,", ").concat(d,")"),d:l()})):null};UD.registerSymbol=D7e;var uae=t=>"radius"in t&&"startAngle"in t&&"endAngle"in t,R7e=(t,e)=>{if(!t||typeof t=="function"||typeof t=="boolean")return null;var r=t;if(v.isValidElement(t)&&(r=t.props),typeof r!="object"&&typeof r!="function")return null;var n={};return Object.keys(r).forEach(a=>{FD(a)&&(n[a]=s=>r[a](r,s))}),n},M7e=(t,e,r)=>n=>(t(e,r,n),null),gw=(t,e,r)=>{if(t===null||typeof t!="object"&&typeof t!="function")return null;var n=null;return Object.keys(t).forEach(a=>{var s=t[a];FD(a)&&typeof s=="function"&&(n||(n={}),n[a]=M7e(s,e,r))}),n};function c$(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter(function(a){return Object.getOwnPropertyDescriptor(t,a).enumerable})),r.push.apply(r,n)}return r}function L7e(t){for(var e=1;e<arguments.length;e++){var r=arguments[e]!=null?arguments[e]:{};e%2?c$(Object(r),!0).forEach(function(n){U7e(t,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):c$(Object(r)).forEach(function(n){Object.defineProperty(t,n,Object.getOwnPropertyDescriptor(r,n))})}return t}function U7e(t,e,r){return(e=Q7e(e))in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}function Q7e(t){var e=V7e(t,"string");return typeof e=="symbol"?e:e+""}function V7e(t,e){if(typeof t!="object"||!t)return t;var r=t[Symbol.toPrimitive];if(r!==void 0){var n=r.call(t,e);if(typeof n!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}function zo(t,e){var r=L7e({},t),n=e,a=Object.keys(e),s=a.reduce((i,l)=>(i[l]===void 0&&n[l]!==void 0&&(i[l]=n[l]),i),r);return s}function IS(){return IS=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var r=arguments[e];for(var n in r)({}).hasOwnProperty.call(r,n)&&(t[n]=r[n])}return t},IS.apply(null,arguments)}function u$(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter(function(a){return Object.getOwnPropertyDescriptor(t,a).enumerable})),r.push.apply(r,n)}return r}function H7e(t){for(var e=1;e<arguments.length;e++){var r=arguments[e]!=null?arguments[e]:{};e%2?u$(Object(r),!0).forEach(function(n){$7e(t,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):u$(Object(r)).forEach(function(n){Object.defineProperty(t,n,Object.getOwnPropertyDescriptor(r,n))})}return t}function $7e(t,e,r){return(e=K7e(e))in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}function K7e(t){var e=G7e(t,"string");return typeof e=="symbol"?e:e+""}function G7e(t,e){if(typeof t!="object"||!t)return t;var r=t[Symbol.toPrimitive];if(r!==void 0){var n=r.call(t,e);if(typeof n!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}var Su=32,q7e={align:"center",iconSize:14,inactiveColor:"#ccc",layout:"horizontal",verticalAlign:"middle"};function z7e(t){var{data:e,iconType:r,inactiveColor:n}=t,a=Su/2,s=Su/6,i=Su/3,l=e.inactive?n:e.color,c=r??e.type;if(c==="none")return null;if(c==="plainline"){var u;return v.createElement("line",{strokeWidth:4,fill:"none",stroke:l,strokeDasharray:(u=e.payload)===null||u===void 0?void 0:u.strokeDasharray,x1:0,y1:a,x2:Su,y2:a,className:"recharts-legend-icon"})}if(c==="line")return v.createElement("path",{strokeWidth:4,fill:"none",stroke:l,d:"M0,".concat(a,"h").concat(i,`
            A`).concat(s,",").concat(s,",0,1,1,").concat(2*i,",").concat(a,`
            H`).concat(Su,"M").concat(2*i,",").concat(a,`
            A`).concat(s,",").concat(s,",0,1,1,").concat(i,",").concat(a),className:"recharts-legend-icon"});if(c==="rect")return v.createElement("path",{stroke:"none",fill:l,d:"M0,".concat(Su/8,"h").concat(Su,"v").concat(Su*3/4,"h").concat(-Su,"z"),className:"recharts-legend-icon"});if(v.isValidElement(e.legendIcon)){var d=H7e({},e);return delete d.legendIcon,v.cloneElement(e.legendIcon,d)}return v.createElement(UD,{fill:l,cx:a,cy:a,size:Su,sizeType:"diameter",type:c})}function W7e(t){var{payload:e,iconSize:r,layout:n,formatter:a,inactiveColor:s,iconType:i}=t,l={x:0,y:0,width:Su,height:Su},c={display:n==="horizontal"?"inline-block":"block",marginRight:10},u={display:"inline-block",verticalAlign:"middle",marginRight:4};return e.map((d,f)=>{var h=d.formatter||a,A=Ea({"recharts-legend-item":!0,["legend-item-".concat(f)]:!0,inactive:d.inactive});if(d.type==="none")return null;var m=d.inactive?s:d.color,p=h?h(d.value,d,f):d.value;return v.createElement("li",IS({className:A,style:c,key:"legend-item-".concat(f)},gw(t,d,f)),v.createElement(OD,{width:r,height:r,viewBox:l,style:u,"aria-label":"".concat(p," legend icon")},v.createElement(z7e,{data:d,iconType:i,inactiveColor:s})),v.createElement("span",{className:"recharts-legend-item-text",style:{color:m}},p))})}var X7e=t=>{var e=zo(t,q7e),{payload:r,layout:n,align:a}=e;if(!r||!r.length)return null;var s={padding:0,margin:0,textAlign:n==="horizontal"?a:"left"};return v.createElement("ul",{className:"recharts-default-legend",style:s},v.createElement(W7e,IS({},e,{payload:r})))},dae={},fae={};(function(t){Object.defineProperty(t,Symbol.toStringTag,{value:"Module"});function e(r,n){const a=new Map;for(let s=0;s<r.length;s++){const i=r[s],l=n(i);a.has(l)||a.set(l,i)}return Array.from(a.values())}t.uniqBy=e})(fae);var QD={};(function(t){Object.defineProperty(t,Symbol.toStringTag,{value:"Module"});function e(r){return r}t.identity=e})(QD);var Aae={},Q4={},hae={};(function(t){Object.defineProperty(t,Symbol.toStringTag,{value:"Module"});function e(r){return Number.isSafeInteger(r)&&r>=0}t.isLength=e})(hae);(function(t){Object.defineProperty(t,Symbol.toStringTag,{value:"Module"});const e=hae;function r(n){return n!=null&&typeof n!="function"&&e.isLength(n.length)}t.isArrayLike=r})(Q4);var mae={};(function(t){Object.defineProperty(t,Symbol.toStringTag,{value:"Module"});function e(r){return typeof r=="object"&&r!==null}t.isObjectLike=e})(mae);(function(t){Object.defineProperty(t,Symbol.toStringTag,{value:"Module"});const e=Q4,r=mae;function n(a){return r.isObjectLike(a)&&e.isArrayLike(a)}t.isArrayLikeObject=n})(Aae);var pae={},gae={};(function(t){Object.defineProperty(t,Symbol.toStringTag,{value:"Module"});const e=M4;function r(n){return function(a){return e.get(a,n)}}t.property=r})(gae);var xae={},VD={},vae={},HD={};(function(t){Object.defineProperty(t,Symbol.toStringTag,{value:"Module"});function e(r){return r!==null&&(typeof r=="object"||typeof r=="function")}t.isObject=e})(HD);var $D={};(function(t){Object.defineProperty(t,Symbol.toStringTag,{value:"Module"});function e(r){return r==null||typeof r!="object"&&typeof r!="function"}t.isPrimitive=e})($D);var KD={};(function(t){Object.defineProperty(t,Symbol.toStringTag,{value:"Module"});function e(r,n){return r===n||Number.isNaN(r)&&Number.isNaN(n)}t.eq=e})(KD);(function(t){Object.defineProperty(t,Symbol.toStringTag,{value:"Module"});const e=HD,r=$D,n=KD;function a(d,f,h){return typeof h!="function"?a(d,f,()=>{}):s(d,f,function A(m,p,g,x,y,b){const w=h(m,p,g,x,y,b);return w!==void 0?!!w:s(m,p,A,b)},new Map)}function s(d,f,h,A){if(f===d)return!0;switch(typeof f){case"object":return i(d,f,h,A);case"function":return Object.keys(f).length>0?s(d,{...f},h,A):n.eq(d,f);default:return e.isObject(d)?typeof f=="string"?f==="":!0:n.eq(d,f)}}function i(d,f,h,A){if(f==null)return!0;if(Array.isArray(f))return c(d,f,h,A);if(f instanceof Map)return l(d,f,h,A);if(f instanceof Set)return u(d,f,h,A);const m=Object.keys(f);if(d==null||r.isPrimitive(d))return m.length===0;if(m.length===0)return!0;if(A!=null&&A.has(f))return A.get(f)===d;A==null||A.set(f,d);try{for(let p=0;p<m.length;p++){const g=m[p];if(!r.isPrimitive(d)&&!(g in d)||f[g]===void 0&&d[g]!==void 0||f[g]===null&&d[g]!==null||!h(d[g],f[g],g,d,f,A))return!1}return!0}finally{A==null||A.delete(f)}}function l(d,f,h,A){if(f.size===0)return!0;if(!(d instanceof Map))return!1;for(const[m,p]of f.entries()){const g=d.get(m);if(h(g,p,m,d,f,A)===!1)return!1}return!0}function c(d,f,h,A){if(f.length===0)return!0;if(!Array.isArray(d))return!1;const m=new Set;for(let p=0;p<f.length;p++){const g=f[p];let x=!1;for(let y=0;y<d.length;y++){if(m.has(y))continue;const b=d[y];let w=!1;if(h(b,g,p,d,f,A)&&(w=!0),w){m.add(y),x=!0;break}}if(!x)return!1}return!0}function u(d,f,h,A){return f.size===0?!0:d instanceof Set?c([...d],[...f],h,A):!1}t.isMatchWith=a,t.isSetMatch=u})(vae);(function(t){Object.defineProperty(t,Symbol.toStringTag,{value:"Module"});const e=vae;function r(n,a){return e.isMatchWith(n,a,()=>{})}t.isMatch=r})(VD);var yae={},GD={},bae={};(function(t){Object.defineProperty(t,Symbol.toStringTag,{value:"Module"});function e(r){return Object.getOwnPropertySymbols(r).filter(n=>Object.prototype.propertyIsEnumerable.call(r,n))}t.getSymbols=e})(bae);var qD={};(function(t){Object.defineProperty(t,Symbol.toStringTag,{value:"Module"});function e(r){return r==null?r===void 0?"[object Undefined]":"[object Null]":Object.prototype.toString.call(r)}t.getTag=e})(qD);var zD={};(function(t){Object.defineProperty(t,Symbol.toStringTag,{value:"Module"});const e="[object RegExp]",r="[object String]",n="[object Number]",a="[object Boolean]",s="[object Arguments]",i="[object Symbol]",l="[object Date]",c="[object Map]",u="[object Set]",d="[object Array]",f="[object Function]",h="[object ArrayBuffer]",A="[object Object]",m="[object Error]",p="[object DataView]",g="[object Uint8Array]",x="[object Uint8ClampedArray]",y="[object Uint16Array]",b="[object Uint32Array]",w="[object BigUint64Array]",j="[object Int8Array]",I="[object Int16Array]",_="[object Int32Array]",E="[object BigInt64Array]",S="[object Float32Array]",k="[object Float64Array]";t.argumentsTag=s,t.arrayBufferTag=h,t.arrayTag=d,t.bigInt64ArrayTag=E,t.bigUint64ArrayTag=w,t.booleanTag=a,t.dataViewTag=p,t.dateTag=l,t.errorTag=m,t.float32ArrayTag=S,t.float64ArrayTag=k,t.functionTag=f,t.int16ArrayTag=I,t.int32ArrayTag=_,t.int8ArrayTag=j,t.mapTag=c,t.numberTag=n,t.objectTag=A,t.regexpTag=e,t.setTag=u,t.stringTag=r,t.symbolTag=i,t.uint16ArrayTag=y,t.uint32ArrayTag=b,t.uint8ArrayTag=g,t.uint8ClampedArrayTag=x})(zD);var wae={};(function(t){Object.defineProperty(t,Symbol.toStringTag,{value:"Module"});function e(r){return ArrayBuffer.isView(r)&&!(r instanceof DataView)}t.isTypedArray=e})(wae);(function(t){Object.defineProperty(t,Symbol.toStringTag,{value:"Module"});const e=bae,r=qD,n=zD,a=$D,s=wae;function i(d,f){return l(d,void 0,d,new Map,f)}function l(d,f,h,A=new Map,m=void 0){const p=m==null?void 0:m(d,f,h,A);if(p!==void 0)return p;if(a.isPrimitive(d))return d;if(A.has(d))return A.get(d);if(Array.isArray(d)){const g=new Array(d.length);A.set(d,g);for(let x=0;x<d.length;x++)g[x]=l(d[x],x,h,A,m);return Object.hasOwn(d,"index")&&(g.index=d.index),Object.hasOwn(d,"input")&&(g.input=d.input),g}if(d instanceof Date)return new Date(d.getTime());if(d instanceof RegExp){const g=new RegExp(d.source,d.flags);return g.lastIndex=d.lastIndex,g}if(d instanceof Map){const g=new Map;A.set(d,g);for(const[x,y]of d)g.set(x,l(y,x,h,A,m));return g}if(d instanceof Set){const g=new Set;A.set(d,g);for(const x of d)g.add(l(x,void 0,h,A,m));return g}if(typeof Buffer<"u"&&Buffer.isBuffer(d))return d.subarray();if(s.isTypedArray(d)){const g=new(Object.getPrototypeOf(d)).constructor(d.length);A.set(d,g);for(let x=0;x<d.length;x++)g[x]=l(d[x],x,h,A,m);return g}if(d instanceof ArrayBuffer||typeof SharedArrayBuffer<"u"&&d instanceof SharedArrayBuffer)return d.slice(0);if(d instanceof DataView){const g=new DataView(d.buffer.slice(0),d.byteOffset,d.byteLength);return A.set(d,g),c(g,d,h,A,m),g}if(typeof File<"u"&&d instanceof File){const g=new File([d],d.name,{type:d.type});return A.set(d,g),c(g,d,h,A,m),g}if(typeof Blob<"u"&&d instanceof Blob){const g=new Blob([d],{type:d.type});return A.set(d,g),c(g,d,h,A,m),g}if(d instanceof Error){const g=new d.constructor;return A.set(d,g),g.message=d.message,g.name=d.name,g.stack=d.stack,g.cause=d.cause,c(g,d,h,A,m),g}if(d instanceof Boolean){const g=new Boolean(d.valueOf());return A.set(d,g),c(g,d,h,A,m),g}if(d instanceof Number){const g=new Number(d.valueOf());return A.set(d,g),c(g,d,h,A,m),g}if(d instanceof String){const g=new String(d.valueOf());return A.set(d,g),c(g,d,h,A,m),g}if(typeof d=="object"&&u(d)){const g=Object.create(Object.getPrototypeOf(d));return A.set(d,g),c(g,d,h,A,m),g}return d}function c(d,f,h=d,A,m){const p=[...Object.keys(f),...e.getSymbols(f)];for(let g=0;g<p.length;g++){const x=p[g],y=Object.getOwnPropertyDescriptor(d,x);(y==null||y.writable)&&(d[x]=l(f[x],x,h,A,m))}}function u(d){switch(r.getTag(d)){case n.argumentsTag:case n.arrayTag:case n.arrayBufferTag:case n.dataViewTag:case n.booleanTag:case n.dateTag:case n.float32ArrayTag:case n.float64ArrayTag:case n.int8ArrayTag:case n.int16ArrayTag:case n.int32ArrayTag:case n.mapTag:case n.numberTag:case n.objectTag:case n.regexpTag:case n.setTag:case n.stringTag:case n.symbolTag:case n.uint8ArrayTag:case n.uint8ClampedArrayTag:case n.uint16ArrayTag:case n.uint32ArrayTag:return!0;default:return!1}}t.cloneDeepWith=i,t.cloneDeepWithImpl=l,t.copyProperties=c})(GD);(function(t){Object.defineProperty(t,Symbol.toStringTag,{value:"Module"});const e=GD;function r(n){return e.cloneDeepWithImpl(n,void 0,n,new Map,void 0)}t.cloneDeep=r})(yae);(function(t){Object.defineProperty(t,Symbol.toStringTag,{value:"Module"});const e=VD,r=yae;function n(a){return a=r.cloneDeep(a),s=>e.isMatch(s,a)}t.matches=n})(xae);var Nae={},Cae={},_ae={};(function(t){Object.defineProperty(t,Symbol.toStringTag,{value:"Module"});const e=GD,r=zD;function n(a,s){return e.cloneDeepWith(a,(i,l,c,u)=>{const d=s==null?void 0:s(i,l,c,u);if(d!==void 0)return d;if(typeof a=="object")switch(Object.prototype.toString.call(a)){case r.numberTag:case r.stringTag:case r.booleanTag:{const f=new a.constructor(a==null?void 0:a.valueOf());return e.copyProperties(f,a),f}case r.argumentsTag:{const f={};return e.copyProperties(f,a),f.length=a.length,f[Symbol.iterator]=a[Symbol.iterator],f}default:return}})}t.cloneDeepWith=n})(_ae);(function(t){Object.defineProperty(t,Symbol.toStringTag,{value:"Module"});const e=_ae;function r(n){return e.cloneDeepWith(n)}t.cloneDeep=r})(Cae);var Eae={},WD={};(function(t){Object.defineProperty(t,Symbol.toStringTag,{value:"Module"});const e=/^(?:0|[1-9]\d*)$/;function r(n,a=Number.MAX_SAFE_INTEGER){switch(typeof n){case"number":return Number.isInteger(n)&&n>=0&&n<a;case"symbol":return!1;case"string":return e.test(n)}}t.isIndex=r})(WD);var Sae={};(function(t){Object.defineProperty(t,Symbol.toStringTag,{value:"Module"});const e=qD;function r(n){return n!==null&&typeof n=="object"&&e.getTag(n)==="[object Arguments]"}t.isArguments=r})(Sae);(function(t){Object.defineProperty(t,Symbol.toStringTag,{value:"Module"});const e=LD,r=WD,n=Sae,a=U4;function s(i,l){let c;if(Array.isArray(l)?c=l:typeof l=="string"&&e.isDeepKey(l)&&(i==null?void 0:i[l])==null?c=a.toPath(l):c=[l],c.length===0)return!1;let u=i;for(let d=0;d<c.length;d++){const f=c[d];if((u==null||!Object.hasOwn(u,f))&&!((Array.isArray(u)||n.isArguments(u))&&r.isIndex(f)&&f<u.length))return!1;u=u[f]}return!0}t.has=s})(Eae);(function(t){Object.defineProperty(t,Symbol.toStringTag,{value:"Module"});const e=VD,r=L4,n=Cae,a=M4,s=Eae;function i(l,c){switch(typeof l){case"object":{Object.is(l==null?void 0:l.valueOf(),-0)&&(l="-0");break}case"number":{l=r.toKey(l);break}}return c=n.cloneDeep(c),function(u){const d=a.get(u,l);return d===void 0?s.has(u,l):c===void 0?d===void 0:e.isMatch(d,c)}}t.matchesProperty=i})(Nae);(function(t){Object.defineProperty(t,Symbol.toStringTag,{value:"Module"});const e=QD,r=gae,n=xae,a=Nae;function s(i){if(i==null)return e.identity;switch(typeof i){case"function":return i;case"object":return Array.isArray(i)&&i.length===2?a.matchesProperty(i[0],i[1]):n.matches(i);case"string":case"symbol":case"number":return r.property(i)}}t.iteratee=s})(pae);(function(t){Object.defineProperty(t,Symbol.toStringTag,{value:"Module"});const e=fae,r=QD,n=Aae,a=pae;function s(i,l=r.identity){return n.isArrayLikeObject(i)?e.uniqBy(Array.from(i),a.iteratee(l)):[]}t.uniqBy=s})(dae);var Y7e=dae.uniqBy;const d$=zA(Y7e);function Iae(t,e,r){return e===!0?d$(t,r):typeof e=="function"?d$(t,e):t}var jae={exports:{}},Bae={},Pae={exports:{}},Tae={};/**
 * @license React
 * use-sync-external-store-shim.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Av=v;function J7e(t,e){return t===e&&(t!==0||1/t===1/e)||t!==t&&e!==e}var Z7e=typeof Object.is=="function"?Object.is:J7e,e9e=Av.useState,t9e=Av.useEffect,r9e=Av.useLayoutEffect,n9e=Av.useDebugValue;function a9e(t,e){var r=e(),n=e9e({inst:{value:r,getSnapshot:e}}),a=n[0].inst,s=n[1];return r9e(function(){a.value=r,a.getSnapshot=e,xB(a)&&s({inst:a})},[t,r,e]),t9e(function(){return xB(a)&&s({inst:a}),t(function(){xB(a)&&s({inst:a})})},[t]),n9e(r),r}function xB(t){var e=t.getSnapshot;t=t.value;try{var r=e();return!Z7e(t,r)}catch{return!0}}function s9e(t,e){return e()}var i9e=typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"?s9e:a9e;Tae.useSyncExternalStore=Av.useSyncExternalStore!==void 0?Av.useSyncExternalStore:i9e;Pae.exports=Tae;var o9e=Pae.exports;/**
 * @license React
 * use-sync-external-store-shim/with-selector.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var V4=v,l9e=o9e;function c9e(t,e){return t===e&&(t!==0||1/t===1/e)||t!==t&&e!==e}var u9e=typeof Object.is=="function"?Object.is:c9e,d9e=l9e.useSyncExternalStore,f9e=V4.useRef,A9e=V4.useEffect,h9e=V4.useMemo,m9e=V4.useDebugValue;Bae.useSyncExternalStoreWithSelector=function(t,e,r,n,a){var s=f9e(null);if(s.current===null){var i={hasValue:!1,value:null};s.current=i}else i=s.current;s=h9e(function(){function c(A){if(!u){if(u=!0,d=A,A=n(A),a!==void 0&&i.hasValue){var m=i.value;if(a(m,A))return f=m}return f=A}if(m=f,u9e(d,A))return m;var p=n(A);return a!==void 0&&a(m,p)?(d=A,m):(d=A,f=p)}var u=!1,d,f,h=r===void 0?null:r;return[function(){return c(e())},h===null?void 0:function(){return c(h())}]},[e,r,n,a]);var l=d9e(t,s[0],s[1]);return A9e(function(){i.hasValue=!0,i.value=l},[l]),m9e(l),l};jae.exports=Bae;var p9e=jae.exports,XD=v.createContext(null),g9e=t=>t,qa=()=>{var t=v.useContext(XD);return t?t.store.dispatch:g9e},H_=()=>{},x9e=()=>H_,v9e=(t,e)=>t===e;function Gr(t){var e=v.useContext(XD);return p9e.useSyncExternalStoreWithSelector(e?e.subscription.addNestedSub:x9e,e?e.store.getState:H_,e?e.store.getState:H_,e?t:H_,v9e)}function y9e(t,e=`expected a function, instead received ${typeof t}`){if(typeof t!="function")throw new TypeError(e)}function b9e(t,e=`expected an object, instead received ${typeof t}`){if(typeof t!="object")throw new TypeError(e)}function w9e(t,e="expected all items to be functions, instead received the following types: "){if(!t.every(r=>typeof r=="function")){const r=t.map(n=>typeof n=="function"?`function ${n.name||"unnamed"}()`:typeof n).join(", ");throw new TypeError(`${e}[${r}]`)}}var f$=t=>Array.isArray(t)?t:[t];function N9e(t){const e=Array.isArray(t[0])?t[0]:t;return w9e(e,"createSelector expects all input-selectors to be functions, but received the following types: "),e}function C9e(t,e){const r=[],{length:n}=t;for(let a=0;a<n;a++)r.push(t[a].apply(null,e));return r}var _9e=class{constructor(t){this.value=t}deref(){return this.value}},E9e=typeof WeakRef<"u"?WeakRef:_9e,S9e=0,A$=1;function MC(){return{s:S9e,v:void 0,o:null,p:null}}function kae(t,e={}){let r=MC();const{resultEqualityCheck:n}=e;let a,s=0;function i(){var f;let l=r;const{length:c}=arguments;for(let h=0,A=c;h<A;h++){const m=arguments[h];if(typeof m=="function"||typeof m=="object"&&m!==null){let p=l.o;p===null&&(l.o=p=new WeakMap);const g=p.get(m);g===void 0?(l=MC(),p.set(m,l)):l=g}else{let p=l.p;p===null&&(l.p=p=new Map);const g=p.get(m);g===void 0?(l=MC(),p.set(m,l)):l=g}}const u=l;let d;if(l.s===A$)d=l.v;else if(d=t.apply(null,arguments),s++,n){const h=((f=a==null?void 0:a.deref)==null?void 0:f.call(a))??a;h!=null&&n(h,d)&&(d=h,s!==0&&s--),a=typeof d=="object"&&d!==null||typeof d=="function"?new E9e(d):d}return u.s=A$,u.v=d,d}return i.clearCache=()=>{r=MC(),i.resetResultsCount()},i.resultsCount=()=>s,i.resetResultsCount=()=>{s=0},i}function I9e(t,...e){const r=typeof t=="function"?{memoize:t,memoizeOptions:e}:t,n=(...a)=>{let s=0,i=0,l,c={},u=a.pop();typeof u=="object"&&(c=u,u=a.pop()),y9e(u,`createSelector expects an output function after the inputs, but received: [${typeof u}]`);const d={...r,...c},{memoize:f,memoizeOptions:h=[],argsMemoize:A=kae,argsMemoizeOptions:m=[]}=d,p=f$(h),g=f$(m),x=N9e(a),y=f(function(){return s++,u.apply(null,arguments)},...p),b=A(function(){i++;const j=C9e(x,arguments);return l=y.apply(null,j),l},...g);return Object.assign(b,{resultFunc:u,memoizedResultFunc:y,dependencies:x,dependencyRecomputations:()=>i,resetDependencyRecomputations:()=>{i=0},lastResult:()=>l,recomputations:()=>s,resetRecomputations:()=>{s=0},memoize:f,argsMemoize:A})};return Object.assign(n,{withTypes:()=>n}),n}var Rt=I9e(kae),j9e=Object.assign((t,e=Rt)=>{b9e(t,`createStructuredSelector expects first argument to be an object where each property is a selector, instead received a ${typeof t}`);const r=Object.keys(t),n=r.map(s=>t[s]);return e(n,(...s)=>s.reduce((i,l,c)=>(i[r[c]]=l,i),{}))},{withTypes:()=>j9e}),Fae={},Oae={},Dae={};(function(t){Object.defineProperty(t,Symbol.toStringTag,{value:"Module"});function e(n){return typeof n=="symbol"?1:n===null?2:n===void 0?3:n!==n?4:0}const r=(n,a,s)=>{if(n!==a){const i=e(n),l=e(a);if(i===l&&i===0){if(n<a)return s==="desc"?1:-1;if(n>a)return s==="desc"?-1:1}return s==="desc"?l-i:i-l}return 0};t.compareValues=r})(Dae);var Rae={},YD={};(function(t){Object.defineProperty(t,Symbol.toStringTag,{value:"Module"});function e(r){return typeof r=="symbol"||r instanceof Symbol}t.isSymbol=e})(YD);(function(t){Object.defineProperty(t,Symbol.toStringTag,{value:"Module"});const e=YD,r=/\.|\[(?:[^[\]]*|(["'])(?:(?!\1)[^\\]|\\.)*?\1)\]/,n=/^\w*$/;function a(s,i){return Array.isArray(s)?!1:typeof s=="number"||typeof s=="boolean"||s==null||e.isSymbol(s)?!0:typeof s=="string"&&(n.test(s)||!r.test(s))||i!=null&&Object.hasOwn(i,s)}t.isKey=a})(Rae);(function(t){Object.defineProperty(t,Symbol.toStringTag,{value:"Module"});const e=Dae,r=Rae,n=U4;function a(s,i,l,c){if(s==null)return[];l=c?void 0:l,Array.isArray(s)||(s=Object.values(s)),Array.isArray(i)||(i=i==null?[null]:[i]),i.length===0&&(i=[null]),Array.isArray(l)||(l=l==null?[]:[l]),l=l.map(A=>String(A));const u=(A,m)=>{let p=A;for(let g=0;g<m.length&&p!=null;++g)p=p[m[g]];return p},d=(A,m)=>m==null||A==null?m:typeof A=="object"&&"key"in A?Object.hasOwn(m,A.key)?m[A.key]:u(m,A.path):typeof A=="function"?A(m):Array.isArray(A)?u(m,A):typeof m=="object"?m[A]:m,f=i.map(A=>(Array.isArray(A)&&A.length===1&&(A=A[0]),A==null||typeof A=="function"||Array.isArray(A)||r.isKey(A)?A:{key:A,path:n.toPath(A)}));return s.map(A=>({original:A,criteria:f.map(m=>d(m,A))})).slice().sort((A,m)=>{for(let p=0;p<f.length;p++){const g=e.compareValues(A.criteria[p],m.criteria[p],l[p]);if(g!==0)return g}return 0}).map(A=>A.original)}t.orderBy=a})(Oae);var Mae={};(function(t){Object.defineProperty(t,Symbol.toStringTag,{value:"Module"});function e(r,n=1){const a=[],s=Math.floor(n),i=(l,c)=>{for(let u=0;u<l.length;u++){const d=l[u];Array.isArray(d)&&c<s?i(d,c+1):a.push(d)}};return i(r,0),a}t.flatten=e})(Mae);var JD={};(function(t){Object.defineProperty(t,Symbol.toStringTag,{value:"Module"});const e=WD,r=Q4,n=HD,a=KD;function s(i,l,c){return n.isObject(c)&&(typeof l=="number"&&r.isArrayLike(c)&&e.isIndex(l)&&l<c.length||typeof l=="string"&&l in c)?a.eq(c[l],i):!1}t.isIterateeCall=s})(JD);(function(t){Object.defineProperty(t,Symbol.toStringTag,{value:"Module"});const e=Oae,r=Mae,n=JD;function a(s,...i){const l=i.length;return l>1&&n.isIterateeCall(s,i[0],i[1])?i=[]:l>2&&n.isIterateeCall(i[0],i[1],i[2])&&(i=[i[0]]),e.orderBy(s,r.flatten(i),["asc"])}t.sortBy=a})(Fae);var B9e=Fae.sortBy;const H4=zA(B9e);var Lae=t=>t.legend.settings,P9e=t=>t.legend.size,T9e=t=>t.legend.payload,k9e=Rt([T9e,Lae],(t,e)=>{var{itemSorter:r}=e,n=t.flat(1);return r?H4(n,r):n});function F9e(){return Gr(k9e)}var LC=1;function Uae(){var t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:[],[e,r]=v.useState({height:0,left:0,top:0,width:0}),n=v.useCallback(a=>{if(a!=null){var s=a.getBoundingClientRect(),i={height:s.height,left:s.left,top:s.top,width:s.width};(Math.abs(i.height-e.height)>LC||Math.abs(i.left-e.left)>LC||Math.abs(i.top-e.top)>LC||Math.abs(i.width-e.width)>LC)&&r({height:i.height,left:i.left,top:i.top,width:i.width})}},[e.width,e.height,e.top,e.left,...t]);return[e,n]}function To(t){return`Minified Redux error #${t}; visit https://redux.js.org/Errors?code=${t} for the full message or use the non-minified dev environment for full errors. `}var O9e=typeof Symbol=="function"&&Symbol.observable||"@@observable",h$=O9e,vB=()=>Math.random().toString(36).substring(7).split("").join("."),D9e={INIT:`@@redux/INIT${vB()}`,REPLACE:`@@redux/REPLACE${vB()}`,PROBE_UNKNOWN_ACTION:()=>`@@redux/PROBE_UNKNOWN_ACTION${vB()}`},jS=D9e;function ZD(t){if(typeof t!="object"||t===null)return!1;let e=t;for(;Object.getPrototypeOf(e)!==null;)e=Object.getPrototypeOf(e);return Object.getPrototypeOf(t)===e||Object.getPrototypeOf(t)===null}function Qae(t,e,r){if(typeof t!="function")throw new Error(To(2));if(typeof e=="function"&&typeof r=="function"||typeof r=="function"&&typeof arguments[3]=="function")throw new Error(To(0));if(typeof e=="function"&&typeof r>"u"&&(r=e,e=void 0),typeof r<"u"){if(typeof r!="function")throw new Error(To(1));return r(Qae)(t,e)}let n=t,a=e,s=new Map,i=s,l=0,c=!1;function u(){i===s&&(i=new Map,s.forEach((g,x)=>{i.set(x,g)}))}function d(){if(c)throw new Error(To(3));return a}function f(g){if(typeof g!="function")throw new Error(To(4));if(c)throw new Error(To(5));let x=!0;u();const y=l++;return i.set(y,g),function(){if(x){if(c)throw new Error(To(6));x=!1,u(),i.delete(y),s=null}}}function h(g){if(!ZD(g))throw new Error(To(7));if(typeof g.type>"u")throw new Error(To(8));if(typeof g.type!="string")throw new Error(To(17));if(c)throw new Error(To(9));try{c=!0,a=n(a,g)}finally{c=!1}return(s=i).forEach(y=>{y()}),g}function A(g){if(typeof g!="function")throw new Error(To(10));n=g,h({type:jS.REPLACE})}function m(){const g=f;return{subscribe(x){if(typeof x!="object"||x===null)throw new Error(To(11));function y(){const w=x;w.next&&w.next(d())}return y(),{unsubscribe:g(y)}},[h$](){return this}}}return h({type:jS.INIT}),{dispatch:h,subscribe:f,getState:d,replaceReducer:A,[h$]:m}}function R9e(t){Object.keys(t).forEach(e=>{const r=t[e];if(typeof r(void 0,{type:jS.INIT})>"u")throw new Error(To(12));if(typeof r(void 0,{type:jS.PROBE_UNKNOWN_ACTION()})>"u")throw new Error(To(13))})}function Vae(t){const e=Object.keys(t),r={};for(let s=0;s<e.length;s++){const i=e[s];typeof t[i]=="function"&&(r[i]=t[i])}const n=Object.keys(r);let a;try{R9e(r)}catch(s){a=s}return function(i={},l){if(a)throw a;let c=!1;const u={};for(let d=0;d<n.length;d++){const f=n[d],h=r[f],A=i[f],m=h(A,l);if(typeof m>"u")throw l&&l.type,new Error(To(14));u[f]=m,c=c||m!==A}return c=c||n.length!==Object.keys(i).length,c?u:i}}function BS(...t){return t.length===0?e=>e:t.length===1?t[0]:t.reduce((e,r)=>(...n)=>e(r(...n)))}function M9e(...t){return e=>(r,n)=>{const a=e(r,n);let s=()=>{throw new Error(To(15))};const i={getState:a.getState,dispatch:(c,...u)=>s(c,...u)},l=t.map(c=>c(i));return s=BS(...l)(a.dispatch),{...a,dispatch:s}}}function Hae(t){return ZD(t)&&"type"in t&&typeof t.type=="string"}var $ae=Symbol.for("immer-nothing"),m$=Symbol.for("immer-draftable"),$l=Symbol.for("immer-state");function yd(t,...e){throw new Error(`[Immer] minified error nr: ${t}. Full error at: https://bit.ly/3cXEKWf`)}var Gc=Object,hv=Gc.getPrototypeOf,PS="constructor",$4="prototype",Ck="configurable",TS="enumerable",$_="writable",x2="value",VA=t=>!!t&&!!t[$l];function Rd(t){var e;return t?Kae(t)||G4(t)||!!t[m$]||!!((e=t[PS])!=null&&e[m$])||q4(t)||z4(t):!1}var L9e=Gc[$4][PS].toString(),p$=new WeakMap;function Kae(t){if(!t||!eR(t))return!1;const e=hv(t);if(e===null||e===Gc[$4])return!0;const r=Gc.hasOwnProperty.call(e,PS)&&e[PS];if(r===Object)return!0;if(!ix(r))return!1;let n=p$.get(r);return n===void 0&&(n=Function.toString.call(r),p$.set(r,n)),n===L9e}function K4(t,e,r=!0){xw(t)===0?(r?Reflect.ownKeys(t):Gc.keys(t)).forEach(a=>{e(a,t[a],t)}):t.forEach((n,a)=>e(a,n,t))}function xw(t){const e=t[$l];return e?e.type_:G4(t)?1:q4(t)?2:z4(t)?3:0}var g$=(t,e,r=xw(t))=>r===2?t.has(e):Gc[$4].hasOwnProperty.call(t,e),_k=(t,e,r=xw(t))=>r===2?t.get(e):t[e],kS=(t,e,r,n=xw(t))=>{n===2?t.set(e,r):n===3?t.add(r):t[e]=r};function U9e(t,e){return t===e?t!==0||1/t===1/e:t!==t&&e!==e}var G4=Array.isArray,q4=t=>t instanceof Map,z4=t=>t instanceof Set,eR=t=>typeof t=="object",ix=t=>typeof t=="function",yB=t=>typeof t=="boolean";function Q9e(t){const e=+t;return Number.isInteger(e)&&String(e)===t}var lA=t=>t.copy_||t.base_,tR=t=>t.modified_?t.copy_:t.base_;function Ek(t,e){if(q4(t))return new Map(t);if(z4(t))return new Set(t);if(G4(t))return Array[$4].slice.call(t);const r=Kae(t);if(e===!0||e==="class_only"&&!r){const n=Gc.getOwnPropertyDescriptors(t);delete n[$l];let a=Reflect.ownKeys(n);for(let s=0;s<a.length;s++){const i=a[s],l=n[i];l[$_]===!1&&(l[$_]=!0,l[Ck]=!0),(l.get||l.set)&&(n[i]={[Ck]:!0,[$_]:!0,[TS]:l[TS],[x2]:t[i]})}return Gc.create(hv(t),n)}else{const n=hv(t);if(n!==null&&r)return{...t};const a=Gc.create(n);return Gc.assign(a,t)}}function rR(t,e=!1){return W4(t)||VA(t)||!Rd(t)||(xw(t)>1&&Gc.defineProperties(t,{set:UC,add:UC,clear:UC,delete:UC}),Gc.freeze(t),e&&K4(t,(r,n)=>{rR(n,!0)},!1)),t}function V9e(){yd(2)}var UC={[x2]:V9e};function W4(t){return t===null||!eR(t)?!0:Gc.isFrozen(t)}var FS="MapSet",Sk="Patches",x$="ArrayMethods",Gae={};function Qp(t){const e=Gae[t];return e||yd(0,t),e}var v$=t=>!!Gae[t],v2,qae=()=>v2,H9e=(t,e)=>({drafts_:[],parent_:t,immer_:e,canAutoFreeze_:!0,unfinalizedDrafts_:0,handledSet_:new Set,processedForPatches_:new Set,mapSetPlugin_:v$(FS)?Qp(FS):void 0,arrayMethodsPlugin_:v$(x$)?Qp(x$):void 0});function y$(t,e){e&&(t.patchPlugin_=Qp(Sk),t.patches_=[],t.inversePatches_=[],t.patchListener_=e)}function Ik(t){jk(t),t.drafts_.forEach($9e),t.drafts_=null}function jk(t){t===v2&&(v2=t.parent_)}var b$=t=>v2=H9e(v2,t);function $9e(t){const e=t[$l];e.type_===0||e.type_===1?e.revoke_():e.revoked_=!0}function w$(t,e){e.unfinalizedDrafts_=e.drafts_.length;const r=e.drafts_[0];if(t!==void 0&&t!==r){r[$l].modified_&&(Ik(e),yd(4)),Rd(t)&&(t=N$(e,t));const{patchPlugin_:a}=e;a&&a.generateReplacementPatches_(r[$l].base_,t,e)}else t=N$(e,r);return K9e(e,t,!0),Ik(e),e.patches_&&e.patchListener_(e.patches_,e.inversePatches_),t!==$ae?t:void 0}function N$(t,e){if(W4(e))return e;const r=e[$l];if(!r)return OS(e,t.handledSet_,t);if(!X4(r,t))return e;if(!r.modified_)return r.base_;if(!r.finalized_){const{callbacks_:n}=r;if(n)for(;n.length>0;)n.pop()(t);Xae(r,t)}return r.copy_}function K9e(t,e,r=!1){!t.parent_&&t.immer_.autoFreeze_&&t.canAutoFreeze_&&rR(e,r)}function zae(t){t.finalized_=!0,t.scope_.unfinalizedDrafts_--}var X4=(t,e)=>t.scope_===e,G9e=[];function Wae(t,e,r,n){const a=lA(t),s=t.type_;if(n!==void 0&&_k(a,n,s)===e){kS(a,n,r,s);return}if(!t.draftLocations_){const l=t.draftLocations_=new Map;K4(a,(c,u)=>{if(VA(u)){const d=l.get(u)||[];d.push(c),l.set(u,d)}})}const i=t.draftLocations_.get(e)??G9e;for(const l of i)kS(a,l,r,s)}function q9e(t,e,r){t.callbacks_.push(function(a){var l;const s=e;if(!s||!X4(s,a))return;(l=a.mapSetPlugin_)==null||l.fixSetContents(s);const i=tR(s);Wae(t,s.draft_??s,i,r),Xae(s,a)})}function Xae(t,e){var n;if(t.modified_&&!t.finalized_&&(t.type_===3||t.type_===1&&t.allIndicesReassigned_||(((n=t.assigned_)==null?void 0:n.size)??0)>0)){const{patchPlugin_:a}=e;if(a){const s=a.getPath(t);s&&a.generatePatches_(t,s,e)}zae(t)}}function z9e(t,e,r){const{scope_:n}=t;if(VA(r)){const a=r[$l];X4(a,n)&&a.callbacks_.push(function(){K_(t);const i=tR(a);Wae(t,r,i,e)})}else Rd(r)&&t.callbacks_.push(function(){const s=lA(t);t.type_===3?s.has(r)&&OS(r,n.handledSet_,n):_k(s,e,t.type_)===r&&n.drafts_.length>1&&(t.assigned_.get(e)??!1)===!0&&t.copy_&&OS(_k(t.copy_,e,t.type_),n.handledSet_,n)})}function OS(t,e,r){return!r.immer_.autoFreeze_&&r.unfinalizedDrafts_<1||VA(t)||e.has(t)||!Rd(t)||W4(t)||(e.add(t),K4(t,(n,a)=>{if(VA(a)){const s=a[$l];if(X4(s,r)){const i=tR(s);kS(t,n,i,t.type_),zae(s)}}else Rd(a)&&OS(a,e,r)})),t}function W9e(t,e){const r=G4(t),n={type_:r?1:0,scope_:e?e.scope_:qae(),modified_:!1,finalized_:!1,assigned_:void 0,parent_:e,base_:t,draft_:null,copy_:null,revoke_:null,isManual_:!1,callbacks_:void 0};let a=n,s=DS;r&&(a=[n],s=y2);const{revoke:i,proxy:l}=Proxy.revocable(a,s);return n.draft_=l,n.revoke_=i,[l,n]}var DS={get(t,e){if(e===$l)return t;let r=t.scope_.arrayMethodsPlugin_;const n=t.type_===1&&typeof e=="string";if(n&&r!=null&&r.isArrayOperationMethod(e))return r.createMethodInterceptor(t,e);const a=lA(t);if(!g$(a,e,t.type_))return X9e(t,a,e);const s=a[e];if(t.finalized_||!Rd(s)||n&&t.operationMethod&&(r!=null&&r.isMutatingArrayMethod(t.operationMethod))&&Q9e(e))return s;if(s===bB(t.base_,e)){K_(t);const i=t.type_===1?+e:e,l=Pk(t.scope_,s,t,i);return t.copy_[i]=l}return s},has(t,e){return e in lA(t)},ownKeys(t){return Reflect.ownKeys(lA(t))},set(t,e,r){const n=Yae(lA(t),e);if(n!=null&&n.set)return n.set.call(t.draft_,r),!0;if(!t.modified_){const a=bB(lA(t),e),s=a==null?void 0:a[$l];if(s&&s.base_===r)return t.copy_[e]=r,t.assigned_.set(e,!1),!0;if(U9e(r,a)&&(r!==void 0||g$(t.base_,e,t.type_)))return!0;K_(t),Bk(t)}return t.copy_[e]===r&&(r!==void 0||e in t.copy_)||Number.isNaN(r)&&Number.isNaN(t.copy_[e])||(t.copy_[e]=r,t.assigned_.set(e,!0),z9e(t,e,r)),!0},deleteProperty(t,e){return K_(t),bB(t.base_,e)!==void 0||e in t.base_?(t.assigned_.set(e,!1),Bk(t)):t.assigned_.delete(e),t.copy_&&delete t.copy_[e],!0},getOwnPropertyDescriptor(t,e){const r=lA(t),n=Reflect.getOwnPropertyDescriptor(r,e);return n&&{[$_]:!0,[Ck]:t.type_!==1||e!=="length",[TS]:n[TS],[x2]:r[e]}},defineProperty(){yd(11)},getPrototypeOf(t){return hv(t.base_)},setPrototypeOf(){yd(12)}},y2={};for(let t in DS){let e=DS[t];y2[t]=function(){const r=arguments;return r[0]=r[0][0],e.apply(this,r)}}y2.deleteProperty=function(t,e){return y2.set.call(this,t,e,void 0)};y2.set=function(t,e,r){return DS.set.call(this,t[0],e,r,t[0])};function bB(t,e){const r=t[$l];return(r?lA(r):t)[e]}function X9e(t,e,r){var a;const n=Yae(e,r);return n?x2 in n?n[x2]:(a=n.get)==null?void 0:a.call(t.draft_):void 0}function Yae(t,e){if(!(e in t))return;let r=hv(t);for(;r;){const n=Object.getOwnPropertyDescriptor(r,e);if(n)return n;r=hv(r)}}function Bk(t){t.modified_||(t.modified_=!0,t.parent_&&Bk(t.parent_))}function K_(t){t.copy_||(t.assigned_=new Map,t.copy_=Ek(t.base_,t.scope_.immer_.useStrictShallowCopy_))}var Y9e=class{constructor(e){this.autoFreeze_=!0,this.useStrictShallowCopy_=!1,this.useStrictIteration_=!1,this.produce=(r,n,a)=>{if(ix(r)&&!ix(n)){const i=n;n=r;const l=this;return function(u=i,...d){return l.produce(u,f=>n.call(this,f,...d))}}ix(n)||yd(6),a!==void 0&&!ix(a)&&yd(7);let s;if(Rd(r)){const i=b$(this),l=Pk(i,r,void 0);let c=!0;try{s=n(l),c=!1}finally{c?Ik(i):jk(i)}return y$(i,a),w$(s,i)}else if(!r||!eR(r)){if(s=n(r),s===void 0&&(s=r),s===$ae&&(s=void 0),this.autoFreeze_&&rR(s,!0),a){const i=[],l=[];Qp(Sk).generateReplacementPatches_(r,s,{patches_:i,inversePatches_:l}),a(i,l)}return s}else yd(1,r)},this.produceWithPatches=(r,n)=>{if(ix(r))return(l,...c)=>this.produceWithPatches(l,u=>r(u,...c));let a,s;return[this.produce(r,n,(l,c)=>{a=l,s=c}),a,s]},yB(e==null?void 0:e.autoFreeze)&&this.setAutoFreeze(e.autoFreeze),yB(e==null?void 0:e.useStrictShallowCopy)&&this.setUseStrictShallowCopy(e.useStrictShallowCopy),yB(e==null?void 0:e.useStrictIteration)&&this.setUseStrictIteration(e.useStrictIteration)}createDraft(e){Rd(e)||yd(8),VA(e)&&(e=Bd(e));const r=b$(this),n=Pk(r,e,void 0);return n[$l].isManual_=!0,jk(r),n}finishDraft(e,r){const n=e&&e[$l];(!n||!n.isManual_)&&yd(9);const{scope_:a}=n;return y$(a,r),w$(void 0,a)}setAutoFreeze(e){this.autoFreeze_=e}setUseStrictShallowCopy(e){this.useStrictShallowCopy_=e}setUseStrictIteration(e){this.useStrictIteration_=e}shouldUseStrictIteration(){return this.useStrictIteration_}applyPatches(e,r){let n;for(n=r.length-1;n>=0;n--){const s=r[n];if(s.path.length===0&&s.op==="replace"){e=s.value;break}}n>-1&&(r=r.slice(n+1));const a=Qp(Sk).applyPatches_;return VA(e)?a(e,r):this.produce(e,s=>a(s,r))}};function Pk(t,e,r,n){const[a,s]=q4(e)?Qp(FS).proxyMap_(e,r):z4(e)?Qp(FS).proxySet_(e,r):W9e(e,r);return((r==null?void 0:r.scope_)??qae()).drafts_.push(a),s.callbacks_=(r==null?void 0:r.callbacks_)??[],s.key_=n,r&&n!==void 0?q9e(r,s,n):s.callbacks_.push(function(c){var d;(d=c.mapSetPlugin_)==null||d.fixSetContents(s);const{patchPlugin_:u}=c;s.modified_&&u&&u.generatePatches_(s,[],c)}),a}function Bd(t){return VA(t)||yd(10,t),Jae(t)}function Jae(t){if(!Rd(t)||W4(t))return t;const e=t[$l];let r,n=!0;if(e){if(!e.modified_)return e.base_;e.finalized_=!0,r=Ek(t,e.scope_.immer_.useStrictShallowCopy_),n=e.scope_.immer_.shouldUseStrictIteration()}else r=Ek(t,!0);return K4(r,(a,s)=>{kS(r,a,Jae(s))},n),e&&(e.finalized_=!1),r}var J9e=new Y9e,Zae=J9e.produce;function ese(t){return({dispatch:r,getState:n})=>a=>s=>typeof s=="function"?s(r,n,t):a(s)}var Z9e=ese(),eQe=ese,tQe=typeof window<"u"&&window.__REDUX_DEVTOOLS_EXTENSION_COMPOSE__?window.__REDUX_DEVTOOLS_EXTENSION_COMPOSE__:function(){if(arguments.length!==0)return typeof arguments[0]=="object"?BS:BS.apply(null,arguments)};function Wu(t,e){function r(...n){if(e){let a=e(...n);if(!a)throw new Error(Wc(0));return{type:t,payload:a.payload,..."meta"in a&&{meta:a.meta},..."error"in a&&{error:a.error}}}return{type:t,payload:n[0]}}return r.toString=()=>`${t}`,r.type=t,r.match=n=>Hae(n)&&n.type===t,r}var tse=class _y extends Array{constructor(...e){super(...e),Object.setPrototypeOf(this,_y.prototype)}static get[Symbol.species](){return _y}concat(...e){return super.concat.apply(this,e)}prepend(...e){return e.length===1&&Array.isArray(e[0])?new _y(...e[0].concat(this)):new _y(...e.concat(this))}};function C$(t){return Rd(t)?Zae(t,()=>{}):t}function QC(t,e,r){return t.has(e)?t.get(e):t.set(e,r(e)).get(e)}function rQe(t){return typeof t=="boolean"}var nQe=()=>function(e){const{thunk:r=!0,immutableCheck:n=!0,serializableCheck:a=!0,actionCreatorCheck:s=!0}=e??{};let i=new tse;return r&&(rQe(r)?i.push(Z9e):i.push(eQe(r.extraArgument))),i},rse="RTK_autoBatch",us=()=>t=>({payload:t,meta:{[rse]:!0}}),_$=t=>e=>{setTimeout(e,t)},nse=(t={type:"raf"})=>e=>(...r)=>{const n=e(...r);let a=!0,s=!1,i=!1;const l=new Set,c=t.type==="tick"?queueMicrotask:t.type==="raf"?typeof window<"u"&&window.requestAnimationFrame?window.requestAnimationFrame:_$(10):t.type==="callback"?t.queueNotification:_$(t.timeout),u=()=>{i=!1,s&&(s=!1,l.forEach(d=>d()))};return Object.assign({},n,{subscribe(d){const f=()=>a&&d(),h=n.subscribe(f);return l.add(d),()=>{h(),l.delete(d)}},dispatch(d){var f;try{return a=!((f=d==null?void 0:d.meta)!=null&&f[rse]),s=!a,s&&(i||(i=!0,c(u))),n.dispatch(d)}finally{a=!0}}})},aQe=t=>function(r){const{autoBatch:n=!0}=r??{};let a=new tse(t);return n&&a.push(nse(typeof n=="object"?n:void 0)),a};function sQe(t){const e=nQe(),{reducer:r=void 0,middleware:n,devTools:a=!0,preloadedState:s=void 0,enhancers:i=void 0}=t||{};let l;if(typeof r=="function")l=r;else if(ZD(r))l=Vae(r);else throw new Error(Wc(1));let c;typeof n=="function"?c=n(e):c=e();let u=BS;a&&(u=tQe({trace:!1,...typeof a=="object"&&a}));const d=M9e(...c),f=aQe(d);let h=typeof i=="function"?i(f):f();const A=u(...h);return Qae(l,s,A)}function ase(t){const e={},r=[];let n;const a={addCase(s,i){const l=typeof s=="string"?s:s.type;if(!l)throw new Error(Wc(28));if(l in e)throw new Error(Wc(29));return e[l]=i,a},addAsyncThunk(s,i){return i.pending&&(e[s.pending.type]=i.pending),i.rejected&&(e[s.rejected.type]=i.rejected),i.fulfilled&&(e[s.fulfilled.type]=i.fulfilled),i.settled&&r.push({matcher:s.settled,reducer:i.settled}),a},addMatcher(s,i){return r.push({matcher:s,reducer:i}),a},addDefaultCase(s){return n=s,a}};return t(a),[e,r,n]}function iQe(t){return typeof t=="function"}function oQe(t,e){let[r,n,a]=ase(e),s;if(iQe(t))s=()=>C$(t());else{const l=C$(t);s=()=>l}function i(l=s(),c){let u=[r[c.type],...n.filter(({matcher:d})=>d(c)).map(({reducer:d})=>d)];return u.filter(d=>!!d).length===0&&(u=[a]),u.reduce((d,f)=>{if(f)if(VA(d)){const A=f(d,c);return A===void 0?d:A}else{if(Rd(d))return Zae(d,h=>f(h,c));{const h=f(d,c);if(h===void 0){if(d===null)return d;throw Error("A case reducer on a non-draftable value must not return undefined")}return h}}return d},l)}return i.getInitialState=s,i}var lQe="ModuleSymbhasOwnPr-0123456789ABCDEFGHNRVfgctiUvz_KqYTJkLxpZXIjQW",cQe=(t=21)=>{let e="",r=t;for(;r--;)e+=lQe[Math.random()*64|0];return e},uQe=Symbol.for("rtk-slice-createasyncthunk");function dQe(t,e){return`${t}/${e}`}function fQe({creators:t}={}){var r;const e=(r=t==null?void 0:t.asyncThunk)==null?void 0:r[uQe];return function(a){const{name:s,reducerPath:i=s}=a;if(!s)throw new Error(Wc(11));const l=(typeof a.reducers=="function"?a.reducers(hQe()):a.reducers)||{},c=Object.keys(l),u={sliceCaseReducersByName:{},sliceCaseReducersByType:{},actionCreators:{},sliceMatchers:[]},d={addCase(w,j){const I=typeof w=="string"?w:w.type;if(!I)throw new Error(Wc(12));if(I in u.sliceCaseReducersByType)throw new Error(Wc(13));return u.sliceCaseReducersByType[I]=j,d},addMatcher(w,j){return u.sliceMatchers.push({matcher:w,reducer:j}),d},exposeAction(w,j){return u.actionCreators[w]=j,d},exposeCaseReducer(w,j){return u.sliceCaseReducersByName[w]=j,d}};c.forEach(w=>{const j=l[w],I={reducerName:w,type:dQe(s,w),createNotation:typeof a.reducers=="function"};pQe(j)?xQe(I,j,d,e):mQe(I,j,d)});function f(){const[w={},j=[],I=void 0]=typeof a.extraReducers=="function"?ase(a.extraReducers):[a.extraReducers],_={...w,...u.sliceCaseReducersByType};return oQe(a.initialState,E=>{for(let S in _)E.addCase(S,_[S]);for(let S of u.sliceMatchers)E.addMatcher(S.matcher,S.reducer);for(let S of j)E.addMatcher(S.matcher,S.reducer);I&&E.addDefaultCase(I)})}const h=w=>w,A=new Map,m=new WeakMap;let p;function g(w,j){return p||(p=f()),p(w,j)}function x(){return p||(p=f()),p.getInitialState()}function y(w,j=!1){function I(E){let S=E[w];return typeof S>"u"&&j&&(S=QC(m,I,x)),S}function _(E=h){const S=QC(A,j,()=>new WeakMap);return QC(S,E,()=>{const k={};for(const[P,T]of Object.entries(a.selectors??{}))k[P]=AQe(T,E,()=>QC(m,E,x),j);return k})}return{reducerPath:w,getSelectors:_,get selectors(){return _(I)},selectSlice:I}}const b={name:s,reducer:g,actions:u.actionCreators,caseReducers:u.sliceCaseReducersByName,getInitialState:x,...y(i),injectInto(w,{reducerPath:j,...I}={}){const _=j??i;return w.inject({reducerPath:_,reducer:g},I),{...b,...y(_,!0)}}};return b}}function AQe(t,e,r,n){function a(s,...i){let l=e(s);return typeof l>"u"&&n&&(l=r()),t(l,...i)}return a.unwrapped=t,a}var yc=fQe();function hQe(){function t(e,r){return{_reducerDefinitionType:"asyncThunk",payloadCreator:e,...r}}return t.withTypes=()=>t,{reducer(e){return Object.assign({[e.name](...r){return e(...r)}}[e.name],{_reducerDefinitionType:"reducer"})},preparedReducer(e,r){return{_reducerDefinitionType:"reducerWithPrepare",prepare:e,reducer:r}},asyncThunk:t}}function mQe({type:t,reducerName:e,createNotation:r},n,a){let s,i;if("reducer"in n){if(r&&!gQe(n))throw new Error(Wc(17));s=n.reducer,i=n.prepare}else s=n;a.addCase(t,s).exposeCaseReducer(e,s).exposeAction(e,i?Wu(t,i):Wu(t))}function pQe(t){return t._reducerDefinitionType==="asyncThunk"}function gQe(t){return t._reducerDefinitionType==="reducerWithPrepare"}function xQe({type:t,reducerName:e},r,n,a){if(!a)throw new Error(Wc(18));const{payloadCreator:s,fulfilled:i,pending:l,rejected:c,settled:u,options:d}=r,f=a(t,s,d);n.exposeAction(e,f),i&&n.addCase(f.fulfilled,i),l&&n.addCase(f.pending,l),c&&n.addCase(f.rejected,c),u&&n.addMatcher(f.settled,u),n.exposeCaseReducer(e,{fulfilled:i||VC,pending:l||VC,rejected:c||VC,settled:u||VC})}function VC(){}var vQe="task",sse="listener",ise="completed",nR="cancelled",yQe=`task-${nR}`,bQe=`task-${ise}`,Tk=`${sse}-${nR}`,wQe=`${sse}-${ise}`,Y4=class{constructor(t){aa(this,"name","TaskAbortError");aa(this,"message");this.code=t,this.message=`${vQe} ${nR} (reason: ${t})`}},aR=(t,e)=>{if(typeof t!="function")throw new TypeError(Wc(32))},RS=()=>{},ose=(t,e=RS)=>(t.catch(e),t),lse=(t,e)=>(t.addEventListener("abort",e,{once:!0}),()=>t.removeEventListener("abort",e)),Ap=t=>{if(t.aborted)throw new Y4(t.reason)};function cse(t,e){let r=RS;return new Promise((n,a)=>{const s=()=>a(new Y4(t.reason));if(t.aborted){s();return}r=lse(t,s),e.finally(()=>r()).then(n,a)}).finally(()=>{r=RS})}var NQe=async(t,e)=>{try{return await Promise.resolve(),{status:"ok",value:await t()}}catch(r){return{status:r instanceof Y4?"cancelled":"rejected",error:r}}finally{e==null||e()}},MS=t=>e=>ose(cse(t,e).then(r=>(Ap(t),r))),use=t=>{const e=MS(t);return r=>e(new Promise(n=>setTimeout(n,r)))},{assign:Hx}=Object,E$={},J4="listenerMiddleware",CQe=(t,e)=>{const r=n=>lse(t,()=>n.abort(t.reason));return(n,a)=>{aR(n);const s=new AbortController;r(s);const i=NQe(async()=>{Ap(t),Ap(s.signal);const l=await n({pause:MS(s.signal),delay:use(s.signal),signal:s.signal});return Ap(s.signal),l},()=>s.abort(bQe));return a!=null&&a.autoJoin&&e.push(i.catch(RS)),{result:MS(t)(i),cancel(){s.abort(yQe)}}}},_Qe=(t,e)=>{const r=async(n,a)=>{Ap(e);let s=()=>{};const l=[new Promise((c,u)=>{let d=t({predicate:n,effect:(f,h)=>{h.unsubscribe(),c([f,h.getState(),h.getOriginalState()])}});s=()=>{d(),u()}})];a!=null&&l.push(new Promise(c=>setTimeout(c,a,null)));try{const c=await cse(e,Promise.race(l));return Ap(e),c}finally{s()}};return(n,a)=>ose(r(n,a))},dse=t=>{let{type:e,actionCreator:r,matcher:n,predicate:a,effect:s}=t;if(e)a=Wu(e).match;else if(r)e=r.type,a=r.match;else if(n)a=n;else if(!a)throw new Error(Wc(21));return aR(s),{predicate:a,type:e,effect:s}},fse=Hx(t=>{const{type:e,predicate:r,effect:n}=dse(t);return{id:cQe(),effect:n,type:e,predicate:r,pending:new Set,unsubscribe:()=>{throw new Error(Wc(22))}}},{withTypes:()=>fse}),S$=(t,e)=>{const{type:r,effect:n,predicate:a}=dse(e);return Array.from(t.values()).find(s=>(typeof r=="string"?s.type===r:s.predicate===a)&&s.effect===n)},kk=t=>{t.pending.forEach(e=>{e.abort(Tk)})},EQe=(t,e)=>()=>{for(const r of e.keys())kk(r);t.clear()},I$=(t,e,r)=>{try{t(e,r)}catch(n){setTimeout(()=>{throw n},0)}},Ase=Hx(Wu(`${J4}/add`),{withTypes:()=>Ase}),SQe=Wu(`${J4}/removeAll`),hse=Hx(Wu(`${J4}/remove`),{withTypes:()=>hse}),IQe=(...t)=>{console.error(`${J4}/error`,...t)},vw=(t={})=>{const e=new Map,r=new Map,n=A=>{const m=r.get(A)??0;r.set(A,m+1)},a=A=>{const m=r.get(A)??1;m===1?r.delete(A):r.set(A,m-1)},{extra:s,onError:i=IQe}=t;aR(i);const l=A=>(A.unsubscribe=()=>e.delete(A.id),e.set(A.id,A),m=>{A.unsubscribe(),m!=null&&m.cancelActive&&kk(A)}),c=A=>{const m=S$(e,A)??fse(A);return l(m)};Hx(c,{withTypes:()=>c});const u=A=>{const m=S$(e,A);return m&&(m.unsubscribe(),A.cancelActive&&kk(m)),!!m};Hx(u,{withTypes:()=>u});const d=async(A,m,p,g)=>{const x=new AbortController,y=_Qe(c,x.signal),b=[];try{A.pending.add(x),n(A),await Promise.resolve(A.effect(m,Hx({},p,{getOriginalState:g,condition:(w,j)=>y(w,j).then(Boolean),take:y,delay:use(x.signal),pause:MS(x.signal),extra:s,signal:x.signal,fork:CQe(x.signal,b),unsubscribe:A.unsubscribe,subscribe:()=>{e.set(A.id,A)},cancelActiveListeners:()=>{A.pending.forEach((w,j,I)=>{w!==x&&(w.abort(Tk),I.delete(w))})},cancel:()=>{x.abort(Tk),A.pending.delete(x)},throwIfCancelled:()=>{Ap(x.signal)}})))}catch(w){w instanceof Y4||I$(i,w,{raisedBy:"effect"})}finally{await Promise.all(b),x.abort(wQe),a(A),A.pending.delete(x)}},f=EQe(e,r);return{middleware:A=>m=>p=>{if(!Hae(p))return m(p);if(Ase.match(p))return c(p.payload);if(SQe.match(p)){f();return}if(hse.match(p))return u(p.payload);let g=A.getState();const x=()=>{if(g===E$)throw new Error(Wc(23));return g};let y;try{if(y=m(p),e.size>0){const b=A.getState(),w=Array.from(e.values());for(const j of w){let I=!1;try{I=j.predicate(p,b,g)}catch(_){I=!1,I$(i,_,{raisedBy:"predicate"})}I&&d(j,p,A,x)}}}finally{g=E$}return y},startListening:c,stopListening:u,clearListeners:f}};function Wc(t){return`Minified Redux Toolkit error #${t}; visit https://redux-toolkit.js.org/Errors?code=${t} for the full message or use the non-minified dev environment for full errors. `}var jQe={layoutType:"horizontal",width:0,height:0,margin:{top:5,right:5,bottom:5,left:5},scale:1},mse=yc({name:"chartLayout",initialState:jQe,reducers:{setLayout(t,e){t.layoutType=e.payload},setChartSize(t,e){t.width=e.payload.width,t.height=e.payload.height},setMargin(t,e){var r,n,a,s;t.margin.top=(r=e.payload.top)!==null&&r!==void 0?r:0,t.margin.right=(n=e.payload.right)!==null&&n!==void 0?n:0,t.margin.bottom=(a=e.payload.bottom)!==null&&a!==void 0?a:0,t.margin.left=(s=e.payload.left)!==null&&s!==void 0?s:0},setScale(t,e){t.scale=e.payload}}}),{setMargin:BQe,setLayout:PQe,setChartSize:TQe,setScale:kQe}=mse.actions,FQe=mse.reducer;function pse(t,e,r){return Array.isArray(t)&&t&&e+r!==0?t.slice(e,r+1):t}function Os(t){return Number.isFinite(t)}function W0(t){return typeof t=="number"&&t>0&&Number.isFinite(t)}function j$(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter(function(a){return Object.getOwnPropertyDescriptor(t,a).enumerable})),r.push.apply(r,n)}return r}function Ex(t){for(var e=1;e<arguments.length;e++){var r=arguments[e]!=null?arguments[e]:{};e%2?j$(Object(r),!0).forEach(function(n){OQe(t,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):j$(Object(r)).forEach(function(n){Object.defineProperty(t,n,Object.getOwnPropertyDescriptor(r,n))})}return t}function OQe(t,e,r){return(e=DQe(e))in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}function DQe(t){var e=RQe(t,"string");return typeof e=="symbol"?e:e+""}function RQe(t,e){if(typeof t!="object"||!t)return t;var r=t[Symbol.toPrimitive];if(r!==void 0){var n=r.call(t,e);if(typeof n!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}function ns(t,e,r){return vo(t)||vo(e)?r:Bf(e)?Up(t,e,r):typeof e=="function"?e(t):r}var MQe=(t,e,r)=>{if(e&&r){var{width:n,height:a}=r,{align:s,verticalAlign:i,layout:l}=e;if((l==="vertical"||l==="horizontal"&&i==="middle")&&s!=="center"&&Wr(t[s]))return Ex(Ex({},t),{},{[s]:t[s]+(n||0)});if((l==="horizontal"||l==="vertical"&&s==="center")&&i!=="middle"&&Wr(t[i]))return Ex(Ex({},t),{},{[i]:t[i]+(a||0)})}return t},dg=(t,e)=>t==="horizontal"&&e==="xAxis"||t==="vertical"&&e==="yAxis"||t==="centric"&&e==="angleAxis"||t==="radial"&&e==="radiusAxis",B$=1e-4,LQe=t=>{var e=t.domain();if(!(!e||e.length<=2)){var r=e.length,n=t.range(),a=Math.min(n[0],n[1])-B$,s=Math.max(n[0],n[1])+B$,i=t(e[0]),l=t(e[r-1]);(i<a||i>s||l<a||l>s)&&t.domain([e[0],e[r-1]])}},UQe=(t,e)=>{if(!e||e.length!==2||!Wr(e[0])||!Wr(e[1]))return t;var r=Math.min(e[0],e[1]),n=Math.max(e[0],e[1]),a=[t[0],t[1]];return(!Wr(t[0])||t[0]<r)&&(a[0]=r),(!Wr(t[1])||t[1]>n)&&(a[1]=n),a[0]>n&&(a[0]=n),a[1]<r&&(a[1]=r),a},QQe=t=>{var e,r=t.length;if(!(r<=0)){var n=(e=t[0])===null||e===void 0?void 0:e.length;if(!(n==null||n<=0))for(var a=0;a<n;++a)for(var s=0,i=0,l=0;l<r;++l){var c=t[l],u=c==null?void 0:c[a];if(u!=null){var d=u[1],f=u[0],h=jf(d)?f:d;h>=0?(u[0]=s,u[1]=s+h,s=d):(u[0]=i,u[1]=i+h,i=d)}}}},VQe=t=>{var e,r=t.length;if(!(r<=0)){var n=(e=t[0])===null||e===void 0?void 0:e.length;if(!(n==null||n<=0))for(var a=0;a<n;++a)for(var s=0,i=0;i<r;++i){var l=t[i],c=l==null?void 0:l[a];if(c!=null){var u=jf(c[1])?c[0]:c[1];u>=0?(c[0]=s,c[1]=s+u,s=c[1]):(c[0]=0,c[1]=0)}}}},HQe={sign:QQe,expand:v7e,none:Lp,silhouette:y7e,wiggle:b7e,positive:VQe},$Qe=(t,e,r)=>{var n,a=(n=HQe[r])!==null&&n!==void 0?n:Lp,s=x7e().keys(e).value((l,c)=>Number(ns(l,c,0))).order(wk).offset(a),i=s(t);return i.forEach((l,c)=>{l.forEach((u,d)=>{var f=ns(t[d],e[c],0);Array.isArray(f)&&f.length===2&&Wr(f[0])&&Wr(f[1])&&(u[0]=f[0],u[1]=f[1])})}),i};function KQe(t){return t==null?void 0:String(t)}var P$=t=>{var{axis:e,ticks:r,offset:n,bandSize:a,entry:s,index:i}=t;if(e.type==="category")return r[i]?r[i].coordinate+n:null;var l=ns(s,e.dataKey,e.scale.domain()[i]);return vo(l)?null:e.scale(l)-a/2+n},GQe=t=>{var{numericAxis:e}=t,r=e.scale.domain();if(e.type==="number"){var n=Math.min(r[0],r[1]),a=Math.max(r[0],r[1]);return n<=0&&a>=0?0:a<0?a:n}return r[0]},qQe=t=>{var e=t.flat(2).filter(Wr);return[Math.min(...e),Math.max(...e)]},zQe=t=>[t[0]===1/0?0:t[0],t[1]===-1/0?0:t[1]],WQe=(t,e,r)=>{if(t!=null)return zQe(Object.keys(t).reduce((n,a)=>{var s=t[a];if(!s)return n;var{stackedData:i}=s,l=i.reduce((c,u)=>{var d=pse(u,e,r),f=qQe(d);return!Os(f[0])||!Os(f[1])?c:[Math.min(c[0],f[0]),Math.max(c[1],f[1])]},[1/0,-1/0]);return[Math.min(l[0],n[0]),Math.max(l[1],n[1])]},[1/0,-1/0]))},T$=/^dataMin[\s]*-[\s]*([0-9]+([.]{1}[0-9]+){0,1})$/,k$=/^dataMax[\s]*\+[\s]*([0-9]+([.]{1}[0-9]+){0,1})$/,LS=(t,e,r)=>{if(t&&t.scale&&t.scale.bandwidth){var n=t.scale.bandwidth();if(!r||n>0)return n}if(t&&e&&e.length>=2){for(var a=H4(e,d=>d.coordinate),s=1/0,i=1,l=a.length;i<l;i++){var c=a[i],u=a[i-1];s=Math.min(((c==null?void 0:c.coordinate)||0)-((u==null?void 0:u.coordinate)||0),s)}return s===1/0?0:s}return r?void 0:0};function F$(t){var{tooltipEntrySettings:e,dataKey:r,payload:n,value:a,name:s}=t;return Ex(Ex({},e),{},{dataKey:r,payload:n,value:a,name:s})}function Z4(t,e){if(t)return String(t);if(typeof e=="string")return e}var XQe=(t,e)=>{if(e==="horizontal")return t.chartX;if(e==="vertical")return t.chartY},YQe=(t,e)=>e==="centric"?t.angle:t.radius,ah=t=>t.layout.width,sh=t=>t.layout.height,JQe=t=>t.layout.scale,gse=t=>t.layout.margin,e3=Rt(t=>t.cartesianAxis.xAxis,t=>Object.values(t)),t3=Rt(t=>t.cartesianAxis.yAxis,t=>Object.values(t)),xse="data-recharts-item-index",vse="data-recharts-item-id",yw=60;function O$(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter(function(a){return Object.getOwnPropertyDescriptor(t,a).enumerable})),r.push.apply(r,n)}return r}function HC(t){for(var e=1;e<arguments.length;e++){var r=arguments[e]!=null?arguments[e]:{};e%2?O$(Object(r),!0).forEach(function(n){ZQe(t,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):O$(Object(r)).forEach(function(n){Object.defineProperty(t,n,Object.getOwnPropertyDescriptor(r,n))})}return t}function ZQe(t,e,r){return(e=eVe(e))in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}function eVe(t){var e=tVe(t,"string");return typeof e=="symbol"?e:e+""}function tVe(t,e){if(typeof t!="object"||!t)return t;var r=t[Symbol.toPrimitive];if(r!==void 0){var n=r.call(t,e);if(typeof n!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}var rVe=t=>t.brush.height;function nVe(t){var e=t3(t);return e.reduce((r,n)=>{if(n.orientation==="left"&&!n.mirror&&!n.hide){var a=typeof n.width=="number"?n.width:yw;return r+a}return r},0)}function aVe(t){var e=t3(t);return e.reduce((r,n)=>{if(n.orientation==="right"&&!n.mirror&&!n.hide){var a=typeof n.width=="number"?n.width:yw;return r+a}return r},0)}function sVe(t){var e=e3(t);return e.reduce((r,n)=>n.orientation==="top"&&!n.mirror&&!n.hide?r+n.height:r,0)}function iVe(t){var e=e3(t);return e.reduce((r,n)=>n.orientation==="bottom"&&!n.mirror&&!n.hide?r+n.height:r,0)}var zi=Rt([ah,sh,gse,rVe,nVe,aVe,sVe,iVe,Lae,P9e],(t,e,r,n,a,s,i,l,c,u)=>{var d={left:(r.left||0)+a,right:(r.right||0)+s},f={top:(r.top||0)+i,bottom:(r.bottom||0)+l},h=HC(HC({},f),d),A=h.bottom;h.bottom+=n,h=MQe(h,c,u);var m=t-h.left-h.right,p=e-h.top-h.bottom;return HC(HC({brushBottom:A},h),{},{width:Math.max(m,0),height:Math.max(p,0)})}),oVe=Rt(zi,t=>({x:t.left,y:t.top,width:t.width,height:t.height})),sR=Rt(ah,sh,(t,e)=>({x:0,y:0,width:t,height:e})),lVe=v.createContext(null),nu=()=>v.useContext(lVe)!=null,r3=t=>t.brush,n3=Rt([r3,zi,gse],(t,e,r)=>({height:t.height,x:Wr(t.x)?t.x:e.left,y:Wr(t.y)?t.y:e.top+e.height+e.brushBottom-((r==null?void 0:r.bottom)||0),width:Wr(t.width)?t.width:e.width})),yse={},bse={},wse={};(function(t){Object.defineProperty(t,Symbol.toStringTag,{value:"Module"});function e(r,n,{signal:a,edges:s}={}){let i,l=null;const c=s!=null&&s.includes("leading"),u=s==null||s.includes("trailing"),d=()=>{l!==null&&(r.apply(i,l),i=void 0,l=null)},f=()=>{u&&d(),p()};let h=null;const A=()=>{h!=null&&clearTimeout(h),h=setTimeout(()=>{h=null,f()},n)},m=()=>{h!==null&&(clearTimeout(h),h=null)},p=()=>{m(),i=void 0,l=null},g=()=>{d()},x=function(...y){if(a!=null&&a.aborted)return;i=this,l=y;const b=h==null;A(),c&&b&&d()};return x.schedule=A,x.cancel=p,x.flush=g,a==null||a.addEventListener("abort",p,{once:!0}),x}t.debounce=e})(wse);(function(t){Object.defineProperty(t,Symbol.toStringTag,{value:"Module"});const e=wse;function r(n,a=0,s={}){typeof s!="object"&&(s={});const{leading:i=!1,trailing:l=!0,maxWait:c}=s,u=Array(2);i&&(u[0]="leading"),l&&(u[1]="trailing");let d,f=null;const h=e.debounce(function(...p){d=n.apply(this,p),f=null},a,{edges:u}),A=function(...p){return c!=null&&(f===null&&(f=Date.now()),Date.now()-f>=c)?(d=n.apply(this,p),f=Date.now(),h.cancel(),h.schedule(),d):(h.apply(this,p),d)},m=()=>(h.flush(),d);return A.cancel=h.cancel,A.flush=m,A}t.debounce=r})(bse);(function(t){Object.defineProperty(t,Symbol.toStringTag,{value:"Module"});const e=bse;function r(n,a=0,s={}){const{leading:i=!0,trailing:l=!0}=s;return e.debounce(n,a,{leading:i,maxWait:a,trailing:l})}t.throttle=r})(yse);var cVe=yse.throttle;const uVe=zA(cVe);var D$=function(e,r){for(var n=arguments.length,a=new Array(n>2?n-2:0),s=2;s<n;s++)a[s-2]=arguments[s];if(typeof console<"u"&&console.warn&&(r===void 0&&console.warn("LogUtils requires an error message argument"),!e))if(r===void 0)console.warn("Minified exception occurred; use the non-minified dev environment for the full error message and additional helpful warnings.");else{var i=0;console.warn(r.replace(/%s/g,()=>a[i++]))}},Nse=(t,e,r)=>{var{width:n="100%",height:a="100%",aspect:s,maxHeight:i}=r,l=QA(n)?t:Number(n),c=QA(a)?e:Number(a);return s&&s>0&&(l?c=l/s:c&&(l=c*s),i&&c!=null&&c>i&&(c=i)),{calculatedWidth:l,calculatedHeight:c}},dVe={width:0,height:0,overflow:"visible"},fVe={width:0,overflowX:"visible"},AVe={height:0,overflowY:"visible"},hVe={},mVe=t=>{var{width:e,height:r}=t,n=QA(e),a=QA(r);return n&&a?dVe:n?fVe:a?AVe:hVe};function pVe(t){var{width:e,height:r,aspect:n}=t,a=e,s=r;return a===void 0&&s===void 0?(a="100%",s="100%"):a===void 0?a=n&&n>0?void 0:"100%":s===void 0&&(s=n&&n>0?void 0:"100%"),{width:a,height:s}}function Fk(){return Fk=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var r=arguments[e];for(var n in r)({}).hasOwnProperty.call(r,n)&&(t[n]=r[n])}return t},Fk.apply(null,arguments)}function R$(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter(function(a){return Object.getOwnPropertyDescriptor(t,a).enumerable})),r.push.apply(r,n)}return r}function M$(t){for(var e=1;e<arguments.length;e++){var r=arguments[e]!=null?arguments[e]:{};e%2?R$(Object(r),!0).forEach(function(n){gVe(t,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):R$(Object(r)).forEach(function(n){Object.defineProperty(t,n,Object.getOwnPropertyDescriptor(r,n))})}return t}function gVe(t,e,r){return(e=xVe(e))in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}function xVe(t){var e=vVe(t,"string");return typeof e=="symbol"?e:e+""}function vVe(t,e){if(typeof t!="object"||!t)return t;var r=t[Symbol.toPrimitive];if(r!==void 0){var n=r.call(t,e);if(typeof n!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}var Cse=v.createContext({width:-1,height:-1});function yVe(t){return W0(t.width)&&W0(t.height)}function _se(t){var{children:e,width:r,height:n}=t,a=v.useMemo(()=>({width:r,height:n}),[r,n]);return yVe(a)?v.createElement(Cse.Provider,{value:a},e):null}var iR=()=>v.useContext(Cse),bVe=v.forwardRef((t,e)=>{var{aspect:r,initialDimension:n={width:-1,height:-1},width:a,height:s,minWidth:i=0,minHeight:l,maxHeight:c,children:u,debounce:d=0,id:f,className:h,onResize:A,style:m={}}=t,p=v.useRef(null),g=v.useRef();g.current=A,v.useImperativeHandle(e,()=>p.current);var[x,y]=v.useState({containerWidth:n.width,containerHeight:n.height}),b=v.useCallback((E,S)=>{y(k=>{var P=Math.round(E),T=Math.round(S);return k.containerWidth===P&&k.containerHeight===T?k:{containerWidth:P,containerHeight:T}})},[]);v.useEffect(()=>{if(p.current==null||typeof ResizeObserver>"u")return pw;var E=T=>{var F,{width:Y,height:he}=T[0].contentRect;b(Y,he),(F=g.current)===null||F===void 0||F.call(g,Y,he)};d>0&&(E=uVe(E,d,{trailing:!0,leading:!1}));var S=new ResizeObserver(E),{width:k,height:P}=p.current.getBoundingClientRect();return b(k,P),S.observe(p.current),()=>{S.disconnect()}},[b,d]);var{containerWidth:w,containerHeight:j}=x;D$(!r||r>0,"The aspect(%s) must be greater than zero.",r);var{calculatedWidth:I,calculatedHeight:_}=Nse(w,j,{width:a,height:s,aspect:r,maxHeight:c});return D$(I!=null&&I>0||_!=null&&_>0,`The width(%s) and height(%s) of chart should be greater than 0,
       please check the style of container, or the props width(%s) and height(%s),
       or add a minWidth(%s) or minHeight(%s) or use aspect(%s) to control the
       height and width.`,I,_,a,s,i,l,r),v.createElement("div",{id:f?"".concat(f):void 0,className:Ea("recharts-responsive-container",h),style:M$(M$({},m),{},{width:a,height:s,minWidth:i,minHeight:l,maxHeight:c}),ref:p},v.createElement("div",{style:mVe({width:a,height:s})},v.createElement(_se,{width:I,height:_},u)))}),L$=v.forwardRef((t,e)=>{var r=iR();if(W0(r.width)&&W0(r.height))return t.children;var{width:n,height:a}=pVe({width:t.width,height:t.height,aspect:t.aspect}),{calculatedWidth:s,calculatedHeight:i}=Nse(void 0,void 0,{width:n,height:a,aspect:t.aspect,maxHeight:t.maxHeight});return Wr(s)&&Wr(i)?v.createElement(_se,{width:s,height:i},t.children):v.createElement(bVe,Fk({},t,{width:n,height:a,ref:e}))});function Ese(t){if(t)return{x:t.x,y:t.y,upperWidth:"upperWidth"in t?t.upperWidth:t.width,lowerWidth:"lowerWidth"in t?t.lowerWidth:t.width,width:t.width,height:t.height}}var a3=()=>{var t,e=nu(),r=Gr(oVe),n=Gr(n3),a=(t=Gr(r3))===null||t===void 0?void 0:t.padding;return!e||!n||!a?r:{width:n.width-a.left-a.right,height:n.height-a.top-a.bottom,x:a.left,y:a.top}},wVe={top:0,bottom:0,left:0,right:0,width:0,height:0,brushBottom:0},NVe=()=>{var t;return(t=Gr(zi))!==null&&t!==void 0?t:wVe},Sse=()=>Gr(ah),Ise=()=>Gr(sh),CVe=()=>Gr(t=>t.layout.margin),ra=t=>t.layout.layoutType,bw=()=>Gr(ra),_Ve=()=>{var t=bw();return t!==void 0},s3=t=>{var e=qa(),r=nu(),{width:n,height:a}=t,s=iR(),i=n,l=a;return s&&(i=s.width>0?s.width:n,l=s.height>0?s.height:a),v.useEffect(()=>{!r&&W0(i)&&W0(l)&&e(TQe({width:i,height:l}))},[e,r,i,l]),null},jse=Symbol.for("immer-nothing"),U$=Symbol.for("immer-draftable"),eu=Symbol.for("immer-state");function bd(t,...e){throw new Error(`[Immer] minified error nr: ${t}. Full error at: https://bit.ly/3cXEKWf`)}var b2=Object.getPrototypeOf;function mv(t){return!!t&&!!t[eu]}function Vp(t){var e;return t?Bse(t)||Array.isArray(t)||!!t[U$]||!!((e=t.constructor)!=null&&e[U$])||ww(t)||o3(t):!1}var EVe=Object.prototype.constructor.toString(),Q$=new WeakMap;function Bse(t){if(!t||typeof t!="object")return!1;const e=Object.getPrototypeOf(t);if(e===null||e===Object.prototype)return!0;const r=Object.hasOwnProperty.call(e,"constructor")&&e.constructor;if(r===Object)return!0;if(typeof r!="function")return!1;let n=Q$.get(r);return n===void 0&&(n=Function.toString.call(r),Q$.set(r,n)),n===EVe}function US(t,e,r=!0){i3(t)===0?(r?Reflect.ownKeys(t):Object.keys(t)).forEach(a=>{e(a,t[a],t)}):t.forEach((n,a)=>e(a,n,t))}function i3(t){const e=t[eu];return e?e.type_:Array.isArray(t)?1:ww(t)?2:o3(t)?3:0}function Ok(t,e){return i3(t)===2?t.has(e):Object.prototype.hasOwnProperty.call(t,e)}function Pse(t,e,r){const n=i3(t);n===2?t.set(e,r):n===3?t.add(r):t[e]=r}function SVe(t,e){return t===e?t!==0||1/t===1/e:t!==t&&e!==e}function ww(t){return t instanceof Map}function o3(t){return t instanceof Set}function Fm(t){return t.copy_||t.base_}function Dk(t,e){if(ww(t))return new Map(t);if(o3(t))return new Set(t);if(Array.isArray(t))return Array.prototype.slice.call(t);const r=Bse(t);if(e===!0||e==="class_only"&&!r){const n=Object.getOwnPropertyDescriptors(t);delete n[eu];let a=Reflect.ownKeys(n);for(let s=0;s<a.length;s++){const i=a[s],l=n[i];l.writable===!1&&(l.writable=!0,l.configurable=!0),(l.get||l.set)&&(n[i]={configurable:!0,writable:!0,enumerable:l.enumerable,value:t[i]})}return Object.create(b2(t),n)}else{const n=b2(t);if(n!==null&&r)return{...t};const a=Object.create(n);return Object.assign(a,t)}}function oR(t,e=!1){return l3(t)||mv(t)||!Vp(t)||(i3(t)>1&&Object.defineProperties(t,{set:$C,add:$C,clear:$C,delete:$C}),Object.freeze(t),e&&Object.values(t).forEach(r=>oR(r,!0))),t}function IVe(){bd(2)}var $C={value:IVe};function l3(t){return t===null||typeof t!="object"?!0:Object.isFrozen(t)}var jVe={};function Hp(t){const e=jVe[t];return e||bd(0,t),e}var w2;function Tse(){return w2}function BVe(t,e){return{drafts_:[],parent_:t,immer_:e,canAutoFreeze_:!0,unfinalizedDrafts_:0}}function V$(t,e){e&&(Hp("Patches"),t.patches_=[],t.inversePatches_=[],t.patchListener_=e)}function Rk(t){Mk(t),t.drafts_.forEach(PVe),t.drafts_=null}function Mk(t){t===w2&&(w2=t.parent_)}function H$(t){return w2=BVe(w2,t)}function PVe(t){const e=t[eu];e.type_===0||e.type_===1?e.revoke_():e.revoked_=!0}function $$(t,e){e.unfinalizedDrafts_=e.drafts_.length;const r=e.drafts_[0];return t!==void 0&&t!==r?(r[eu].modified_&&(Rk(e),bd(4)),Vp(t)&&(t=QS(e,t),e.parent_||VS(e,t)),e.patches_&&Hp("Patches").generateReplacementPatches_(r[eu].base_,t,e.patches_,e.inversePatches_)):t=QS(e,r,[]),Rk(e),e.patches_&&e.patchListener_(e.patches_,e.inversePatches_),t!==jse?t:void 0}function QS(t,e,r){if(l3(e))return e;const n=t.immer_.shouldUseStrictIteration(),a=e[eu];if(!a)return US(e,(s,i)=>K$(t,a,e,s,i,r),n),e;if(a.scope_!==t)return e;if(!a.modified_)return VS(t,a.base_,!0),a.base_;if(!a.finalized_){a.finalized_=!0,a.scope_.unfinalizedDrafts_--;const s=a.copy_;let i=s,l=!1;a.type_===3&&(i=new Set(s),s.clear(),l=!0),US(i,(c,u)=>K$(t,a,s,c,u,r,l),n),VS(t,s,!1),r&&t.patches_&&Hp("Patches").generatePatches_(a,r,t.patches_,t.inversePatches_)}return a.copy_}function K$(t,e,r,n,a,s,i){if(a==null||typeof a!="object"&&!i)return;const l=l3(a);if(!(l&&!i)){if(mv(a)){const c=s&&e&&e.type_!==3&&!Ok(e.assigned_,n)?s.concat(n):void 0,u=QS(t,a,c);if(Pse(r,n,u),mv(u))t.canAutoFreeze_=!1;else return}else i&&r.add(a);if(Vp(a)&&!l){if(!t.immer_.autoFreeze_&&t.unfinalizedDrafts_<1||e&&e.base_&&e.base_[n]===a&&l)return;QS(t,a),(!e||!e.scope_.parent_)&&typeof n!="symbol"&&(ww(r)?r.has(n):Object.prototype.propertyIsEnumerable.call(r,n))&&VS(t,a)}}}function VS(t,e,r=!1){!t.parent_&&t.immer_.autoFreeze_&&t.canAutoFreeze_&&oR(e,r)}function TVe(t,e){const r=Array.isArray(t),n={type_:r?1:0,scope_:e?e.scope_:Tse(),modified_:!1,finalized_:!1,assigned_:{},parent_:e,base_:t,draft_:null,copy_:null,revoke_:null,isManual_:!1};let a=n,s=lR;r&&(a=[n],s=N2);const{revoke:i,proxy:l}=Proxy.revocable(a,s);return n.draft_=l,n.revoke_=i,l}var lR={get(t,e){if(e===eu)return t;const r=Fm(t);if(!Ok(r,e))return kVe(t,r,e);const n=r[e];return t.finalized_||!Vp(n)?n:n===wB(t.base_,e)?(NB(t),t.copy_[e]=Uk(n,t)):n},has(t,e){return e in Fm(t)},ownKeys(t){return Reflect.ownKeys(Fm(t))},set(t,e,r){const n=kse(Fm(t),e);if(n!=null&&n.set)return n.set.call(t.draft_,r),!0;if(!t.modified_){const a=wB(Fm(t),e),s=a==null?void 0:a[eu];if(s&&s.base_===r)return t.copy_[e]=r,t.assigned_[e]=!1,!0;if(SVe(r,a)&&(r!==void 0||Ok(t.base_,e)))return!0;NB(t),Lk(t)}return t.copy_[e]===r&&(r!==void 0||e in t.copy_)||Number.isNaN(r)&&Number.isNaN(t.copy_[e])||(t.copy_[e]=r,t.assigned_[e]=!0),!0},deleteProperty(t,e){return wB(t.base_,e)!==void 0||e in t.base_?(t.assigned_[e]=!1,NB(t),Lk(t)):delete t.assigned_[e],t.copy_&&delete t.copy_[e],!0},getOwnPropertyDescriptor(t,e){const r=Fm(t),n=Reflect.getOwnPropertyDescriptor(r,e);return n&&{writable:!0,configurable:t.type_!==1||e!=="length",enumerable:n.enumerable,value:r[e]}},defineProperty(){bd(11)},getPrototypeOf(t){return b2(t.base_)},setPrototypeOf(){bd(12)}},N2={};US(lR,(t,e)=>{N2[t]=function(){return arguments[0]=arguments[0][0],e.apply(this,arguments)}});N2.deleteProperty=function(t,e){return N2.set.call(this,t,e,void 0)};N2.set=function(t,e,r){return lR.set.call(this,t[0],e,r,t[0])};function wB(t,e){const r=t[eu];return(r?Fm(r):t)[e]}function kVe(t,e,r){var a;const n=kse(e,r);return n?"value"in n?n.value:(a=n.get)==null?void 0:a.call(t.draft_):void 0}function kse(t,e){if(!(e in t))return;let r=b2(t);for(;r;){const n=Object.getOwnPropertyDescriptor(r,e);if(n)return n;r=b2(r)}}function Lk(t){t.modified_||(t.modified_=!0,t.parent_&&Lk(t.parent_))}function NB(t){t.copy_||(t.copy_=Dk(t.base_,t.scope_.immer_.useStrictShallowCopy_))}var FVe=class{constructor(t){this.autoFreeze_=!0,this.useStrictShallowCopy_=!1,this.useStrictIteration_=!0,this.produce=(e,r,n)=>{if(typeof e=="function"&&typeof r!="function"){const s=r;r=e;const i=this;return function(c=s,...u){return i.produce(c,d=>r.call(this,d,...u))}}typeof r!="function"&&bd(6),n!==void 0&&typeof n!="function"&&bd(7);let a;if(Vp(e)){const s=H$(this),i=Uk(e,void 0);let l=!0;try{a=r(i),l=!1}finally{l?Rk(s):Mk(s)}return V$(s,n),$$(a,s)}else if(!e||typeof e!="object"){if(a=r(e),a===void 0&&(a=e),a===jse&&(a=void 0),this.autoFreeze_&&oR(a,!0),n){const s=[],i=[];Hp("Patches").generateReplacementPatches_(e,a,s,i),n(s,i)}return a}else bd(1,e)},this.produceWithPatches=(e,r)=>{if(typeof e=="function")return(i,...l)=>this.produceWithPatches(i,c=>e(c,...l));let n,a;return[this.produce(e,r,(i,l)=>{n=i,a=l}),n,a]},typeof(t==null?void 0:t.autoFreeze)=="boolean"&&this.setAutoFreeze(t.autoFreeze),typeof(t==null?void 0:t.useStrictShallowCopy)=="boolean"&&this.setUseStrictShallowCopy(t.useStrictShallowCopy),typeof(t==null?void 0:t.useStrictIteration)=="boolean"&&this.setUseStrictIteration(t.useStrictIteration)}createDraft(t){Vp(t)||bd(8),mv(t)&&(t=OVe(t));const e=H$(this),r=Uk(t,void 0);return r[eu].isManual_=!0,Mk(e),r}finishDraft(t,e){const r=t&&t[eu];(!r||!r.isManual_)&&bd(9);const{scope_:n}=r;return V$(n,e),$$(void 0,n)}setAutoFreeze(t){this.autoFreeze_=t}setUseStrictShallowCopy(t){this.useStrictShallowCopy_=t}setUseStrictIteration(t){this.useStrictIteration_=t}shouldUseStrictIteration(){return this.useStrictIteration_}applyPatches(t,e){let r;for(r=e.length-1;r>=0;r--){const a=e[r];if(a.path.length===0&&a.op==="replace"){t=a.value;break}}r>-1&&(e=e.slice(r+1));const n=Hp("Patches").applyPatches_;return mv(t)?n(t,e):this.produce(t,a=>n(a,e))}};function Uk(t,e){const r=ww(t)?Hp("MapSet").proxyMap_(t,e):o3(t)?Hp("MapSet").proxySet_(t,e):TVe(t,e);return(e?e.scope_:Tse()).drafts_.push(r),r}function OVe(t){return mv(t)||bd(10,t),Fse(t)}function Fse(t){if(!Vp(t)||l3(t))return t;const e=t[eu];let r,n=!0;if(e){if(!e.modified_)return e.base_;e.finalized_=!0,r=Dk(t,e.scope_.immer_.useStrictShallowCopy_),n=e.scope_.immer_.shouldUseStrictIteration()}else r=Dk(t,!0);return US(r,(a,s)=>{Pse(r,a,Fse(s))},n),e&&(e.finalized_=!1),r}var DVe=new FVe;DVe.produce;var RVe={settings:{layout:"horizontal",align:"center",verticalAlign:"middle",itemSorter:"value"},size:{width:0,height:0},payload:[]},Ose=yc({name:"legend",initialState:RVe,reducers:{setLegendSize(t,e){t.size.width=e.payload.width,t.size.height=e.payload.height},setLegendSettings(t,e){t.settings.align=e.payload.align,t.settings.layout=e.payload.layout,t.settings.verticalAlign=e.payload.verticalAlign,t.settings.itemSorter=e.payload.itemSorter},addLegendPayload:{reducer(t,e){t.payload.push(e.payload)},prepare:us()},replaceLegendPayload:{reducer(t,e){var{prev:r,next:n}=e.payload,a=Bd(t).payload.indexOf(r);a>-1&&(t.payload[a]=n)},prepare:us()},removeLegendPayload:{reducer(t,e){var r=Bd(t).payload.indexOf(e.payload);r>-1&&t.payload.splice(r,1)},prepare:us()}}}),{setLegendSize:G$,setLegendSettings:MVe,addLegendPayload:Dse,replaceLegendPayload:Rse,removeLegendPayload:Mse}=Ose.actions,LVe=Ose.reducer,UVe=["contextPayload"];function Qk(){return Qk=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var r=arguments[e];for(var n in r)({}).hasOwnProperty.call(r,n)&&(t[n]=r[n])}return t},Qk.apply(null,arguments)}function q$(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter(function(a){return Object.getOwnPropertyDescriptor(t,a).enumerable})),r.push.apply(r,n)}return r}function pv(t){for(var e=1;e<arguments.length;e++){var r=arguments[e]!=null?arguments[e]:{};e%2?q$(Object(r),!0).forEach(function(n){QVe(t,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):q$(Object(r)).forEach(function(n){Object.defineProperty(t,n,Object.getOwnPropertyDescriptor(r,n))})}return t}function QVe(t,e,r){return(e=VVe(e))in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}function VVe(t){var e=HVe(t,"string");return typeof e=="symbol"?e:e+""}function HVe(t,e){if(typeof t!="object"||!t)return t;var r=t[Symbol.toPrimitive];if(r!==void 0){var n=r.call(t,e);if(typeof n!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}function $Ve(t,e){if(t==null)return{};var r,n,a=KVe(t,e);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(t);for(n=0;n<s.length;n++)r=s[n],e.indexOf(r)===-1&&{}.propertyIsEnumerable.call(t,r)&&(a[r]=t[r])}return a}function KVe(t,e){if(t==null)return{};var r={};for(var n in t)if({}.hasOwnProperty.call(t,n)){if(e.indexOf(n)!==-1)continue;r[n]=t[n]}return r}function GVe(t){return t.value}function qVe(t){var{contextPayload:e}=t,r=$Ve(t,UVe),n=Iae(e,t.payloadUniqBy,GVe),a=pv(pv({},r),{},{payload:n});return v.isValidElement(t.content)?v.cloneElement(t.content,a):typeof t.content=="function"?v.createElement(t.content,a):v.createElement(X7e,a)}function zVe(t,e,r,n,a,s){var{layout:i,align:l,verticalAlign:c}=e,u,d;return(!t||(t.left===void 0||t.left===null)&&(t.right===void 0||t.right===null))&&(l==="center"&&i==="vertical"?u={left:((n||0)-s.width)/2}:u=l==="right"?{right:r&&r.right||0}:{left:r&&r.left||0}),(!t||(t.top===void 0||t.top===null)&&(t.bottom===void 0||t.bottom===null))&&(c==="middle"?d={top:((a||0)-s.height)/2}:d=c==="bottom"?{bottom:r&&r.bottom||0}:{top:r&&r.top||0}),pv(pv({},u),d)}function WVe(t){var e=qa();return v.useEffect(()=>{e(MVe(t))},[e,t]),null}function XVe(t){var e=qa();return v.useEffect(()=>(e(G$(t)),()=>{e(G$({width:0,height:0}))}),[e,t]),null}function YVe(t,e,r,n){return t==="vertical"&&Wr(e)?{height:e}:t==="horizontal"?{width:r||n}:null}var JVe={align:"center",iconSize:14,itemSorter:"value",layout:"horizontal",verticalAlign:"bottom"};function Vk(t){var e=zo(t,JVe),r=F9e(),n=VUe(),a=CVe(),{width:s,height:i,wrapperStyle:l,portal:c}=e,[u,d]=Uae([r]),f=Sse(),h=Ise();if(f==null||h==null)return null;var A=f-((a==null?void 0:a.left)||0)-((a==null?void 0:a.right)||0),m=YVe(e.layout,i,s,A),p=c?l:pv(pv({position:"absolute",width:(m==null?void 0:m.width)||s||"auto",height:(m==null?void 0:m.height)||i||"auto"},zVe(l,e,a,f,h,u)),l),g=c??n;if(g==null||r==null)return null;var x=v.createElement("div",{className:"recharts-legend-wrapper",style:p,ref:d},v.createElement(WVe,{layout:e.layout,align:e.align,verticalAlign:e.verticalAlign,itemSorter:e.itemSorter}),!c&&v.createElement(XVe,{width:u.width,height:u.height}),v.createElement(qVe,Qk({},e,m,{margin:a,chartWidth:f,chartHeight:h,contextPayload:r})));return zc.createPortal(x,g)}Vk.displayName="Legend";function Hk(){return Hk=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var r=arguments[e];for(var n in r)({}).hasOwnProperty.call(r,n)&&(t[n]=r[n])}return t},Hk.apply(null,arguments)}function z$(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter(function(a){return Object.getOwnPropertyDescriptor(t,a).enumerable})),r.push.apply(r,n)}return r}function CB(t){for(var e=1;e<arguments.length;e++){var r=arguments[e]!=null?arguments[e]:{};e%2?z$(Object(r),!0).forEach(function(n){ZVe(t,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):z$(Object(r)).forEach(function(n){Object.defineProperty(t,n,Object.getOwnPropertyDescriptor(r,n))})}return t}function ZVe(t,e,r){return(e=eHe(e))in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}function eHe(t){var e=tHe(t,"string");return typeof e=="symbol"?e:e+""}function tHe(t,e){if(typeof t!="object"||!t)return t;var r=t[Symbol.toPrimitive];if(r!==void 0){var n=r.call(t,e);if(typeof n!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}function rHe(t){return Array.isArray(t)&&Bf(t[0])&&Bf(t[1])?t.join(" ~ "):t}var nHe=t=>{var{separator:e=" : ",contentStyle:r={},itemStyle:n={},labelStyle:a={},payload:s,formatter:i,itemSorter:l,wrapperClassName:c,labelClassName:u,label:d,labelFormatter:f,accessibilityLayer:h=!1}=t,A=()=>{if(s&&s.length){var j={padding:0,margin:0},I=(l?H4(s,l):s).map((_,E)=>{if(_.type==="none")return null;var S=_.formatter||i||rHe,{value:k,name:P}=_,T=k,F=P;if(S){var Y=S(k,P,_,E,s);if(Array.isArray(Y))[T,F]=Y;else if(Y!=null)T=Y;else return null}var he=CB({display:"block",paddingTop:4,paddingBottom:4,color:_.color||"#000"},n);return v.createElement("li",{className:"recharts-tooltip-item",key:"tooltip-item-".concat(E),style:he},Bf(F)?v.createElement("span",{className:"recharts-tooltip-item-name"},F):null,Bf(F)?v.createElement("span",{className:"recharts-tooltip-item-separator"},e):null,v.createElement("span",{className:"recharts-tooltip-item-value"},T),v.createElement("span",{className:"recharts-tooltip-item-unit"},_.unit||""))});return v.createElement("ul",{className:"recharts-tooltip-item-list",style:j},I)}return null},m=CB({margin:0,padding:10,backgroundColor:"#fff",border:"1px solid #ccc",whiteSpace:"nowrap"},r),p=CB({margin:0},a),g=!vo(d),x=g?d:"",y=Ea("recharts-default-tooltip",c),b=Ea("recharts-tooltip-label",u);g&&f&&s!==void 0&&s!==null&&(x=f(d,s));var w=h?{role:"status","aria-live":"assertive"}:{};return v.createElement("div",Hk({className:y,style:m},w),v.createElement("p",{className:b,style:p},v.isValidElement(x)?x:"".concat(x)),A())},q1="recharts-tooltip-wrapper",aHe={visibility:"hidden"};function sHe(t){var{coordinate:e,translateX:r,translateY:n}=t;return Ea(q1,{["".concat(q1,"-right")]:Wr(r)&&e&&Wr(e.x)&&r>=e.x,["".concat(q1,"-left")]:Wr(r)&&e&&Wr(e.x)&&r<e.x,["".concat(q1,"-bottom")]:Wr(n)&&e&&Wr(e.y)&&n>=e.y,["".concat(q1,"-top")]:Wr(n)&&e&&Wr(e.y)&&n<e.y})}function W$(t){var{allowEscapeViewBox:e,coordinate:r,key:n,offsetTopLeft:a,position:s,reverseDirection:i,tooltipDimension:l,viewBox:c,viewBoxDimension:u}=t;if(s&&Wr(s[n]))return s[n];var d=r[n]-l-(a>0?a:0),f=r[n]+a;if(e[n])return i[n]?d:f;var h=c[n];if(h==null)return 0;if(i[n]){var A=d,m=h;return A<m?Math.max(f,h):Math.max(d,h)}if(u==null)return 0;var p=f+l,g=h+u;return p>g?Math.max(d,h):Math.max(f,h)}function iHe(t){var{translateX:e,translateY:r,useTranslate3d:n}=t;return{transform:n?"translate3d(".concat(e,"px, ").concat(r,"px, 0)"):"translate(".concat(e,"px, ").concat(r,"px)")}}function oHe(t){var{allowEscapeViewBox:e,coordinate:r,offsetTopLeft:n,position:a,reverseDirection:s,tooltipBox:i,useTranslate3d:l,viewBox:c}=t,u,d,f;return i.height>0&&i.width>0&&r?(d=W$({allowEscapeViewBox:e,coordinate:r,key:"x",offsetTopLeft:n,position:a,reverseDirection:s,tooltipDimension:i.width,viewBox:c,viewBoxDimension:c.width}),f=W$({allowEscapeViewBox:e,coordinate:r,key:"y",offsetTopLeft:n,position:a,reverseDirection:s,tooltipDimension:i.height,viewBox:c,viewBoxDimension:c.height}),u=iHe({translateX:d,translateY:f,useTranslate3d:l})):u=aHe,{cssProperties:u,cssClasses:sHe({translateX:d,translateY:f,coordinate:r})}}function X$(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter(function(a){return Object.getOwnPropertyDescriptor(t,a).enumerable})),r.push.apply(r,n)}return r}function KC(t){for(var e=1;e<arguments.length;e++){var r=arguments[e]!=null?arguments[e]:{};e%2?X$(Object(r),!0).forEach(function(n){$k(t,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):X$(Object(r)).forEach(function(n){Object.defineProperty(t,n,Object.getOwnPropertyDescriptor(r,n))})}return t}function $k(t,e,r){return(e=lHe(e))in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}function lHe(t){var e=cHe(t,"string");return typeof e=="symbol"?e:e+""}function cHe(t,e){if(typeof t!="object"||!t)return t;var r=t[Symbol.toPrimitive];if(r!==void 0){var n=r.call(t,e);if(typeof n!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}class uHe extends v.PureComponent{constructor(){super(...arguments),$k(this,"state",{dismissed:!1,dismissedAtCoordinate:{x:0,y:0}}),$k(this,"handleKeyDown",e=>{if(e.key==="Escape"){var r,n,a,s;this.setState({dismissed:!0,dismissedAtCoordinate:{x:(r=(n=this.props.coordinate)===null||n===void 0?void 0:n.x)!==null&&r!==void 0?r:0,y:(a=(s=this.props.coordinate)===null||s===void 0?void 0:s.y)!==null&&a!==void 0?a:0}})}})}componentDidMount(){document.addEventListener("keydown",this.handleKeyDown)}componentWillUnmount(){document.removeEventListener("keydown",this.handleKeyDown)}componentDidUpdate(){var e,r;this.state.dismissed&&(((e=this.props.coordinate)===null||e===void 0?void 0:e.x)!==this.state.dismissedAtCoordinate.x||((r=this.props.coordinate)===null||r===void 0?void 0:r.y)!==this.state.dismissedAtCoordinate.y)&&(this.state.dismissed=!1)}render(){var{active:e,allowEscapeViewBox:r,animationDuration:n,animationEasing:a,children:s,coordinate:i,hasPayload:l,isAnimationActive:c,offset:u,position:d,reverseDirection:f,useTranslate3d:h,viewBox:A,wrapperStyle:m,lastBoundingBox:p,innerRef:g,hasPortalFromProps:x}=this.props,{cssClasses:y,cssProperties:b}=oHe({allowEscapeViewBox:r,coordinate:i,offsetTopLeft:u,position:d,reverseDirection:f,tooltipBox:{height:p.height,width:p.width},useTranslate3d:h,viewBox:A}),w=x?{}:KC(KC({transition:c&&e?"transform ".concat(n,"ms ").concat(a):void 0},b),{},{pointerEvents:"none",visibility:!this.state.dismissed&&e&&l?"visible":"hidden",position:"absolute",top:0,left:0}),j=KC(KC({},w),{},{visibility:!this.state.dismissed&&e&&l?"visible":"hidden"},m);return v.createElement("div",{xmlns:"http://www.w3.org/1999/xhtml",tabIndex:-1,className:y,style:j,ref:g},s)}}var Lse=()=>{var t;return(t=Gr(e=>e.rootProps.accessibilityLayer))!==null&&t!==void 0?t:!0};function Kk(){return Kk=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var r=arguments[e];for(var n in r)({}).hasOwnProperty.call(r,n)&&(t[n]=r[n])}return t},Kk.apply(null,arguments)}function Y$(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter(function(a){return Object.getOwnPropertyDescriptor(t,a).enumerable})),r.push.apply(r,n)}return r}function J$(t){for(var e=1;e<arguments.length;e++){var r=arguments[e]!=null?arguments[e]:{};e%2?Y$(Object(r),!0).forEach(function(n){dHe(t,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):Y$(Object(r)).forEach(function(n){Object.defineProperty(t,n,Object.getOwnPropertyDescriptor(r,n))})}return t}function dHe(t,e,r){return(e=fHe(e))in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}function fHe(t){var e=AHe(t,"string");return typeof e=="symbol"?e:e+""}function AHe(t,e){if(typeof t!="object"||!t)return t;var r=t[Symbol.toPrimitive];if(r!==void 0){var n=r.call(t,e);if(typeof n!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}var Z$={curveBasisClosed:o7e,curveBasisOpen:l7e,curveBasis:i7e,curveBumpX:GUe,curveBumpY:qUe,curveLinearClosed:c7e,curveLinear:D4,curveMonotoneX:u7e,curveMonotoneY:d7e,curveNatural:f7e,curveStep:A7e,curveStepAfter:m7e,curveStepBefore:h7e},HS=t=>Os(t.x)&&Os(t.y),eK=t=>t.base!=null&&HS(t.base)&&HS(t),z1=t=>t.x,W1=t=>t.y,hHe=(t,e)=>{if(typeof t=="function")return t;var r="curve".concat(mw(t));return(r==="curveMonotone"||r==="curveBump")&&e?Z$["".concat(r).concat(e==="vertical"?"Y":"X")]:Z$[r]||D4},mHe=t=>{var{type:e="linear",points:r=[],baseLine:n,layout:a,connectNulls:s=!1}=t,i=hHe(e,a),l=s?r.filter(HS):r,c;if(Array.isArray(n)){var u=r.map((A,m)=>J$(J$({},A),{},{base:n[m]}));a==="vertical"?c=RC().y(W1).x1(z1).x0(A=>A.base.x):c=RC().x(z1).y1(W1).y0(A=>A.base.y);var d=c.defined(eK).curve(i),f=s?u.filter(eK):u;return d(f)}a==="vertical"&&Wr(n)?c=RC().y(W1).x1(z1).x0(n):Wr(n)?c=RC().x(z1).y1(W1).y0(n):c=Wne().x(z1).y(W1);var h=c.defined(HS).curve(i);return h(l)},cR=t=>{var{className:e,points:r,path:n,pathRef:a}=t,s=bw();if((!r||!r.length)&&!n)return null;var i={type:t.type,points:t.points,baseLine:t.baseLine,layout:t.layout||s,connectNulls:t.connectNulls},l=r&&r.length?mHe(i):n;return v.createElement("path",Kk({},If(t),R7e(t),{className:Ea("recharts-curve",e),d:l===null?void 0:l,ref:a}))},pHe=["x","y","top","left","width","height","className"];function Gk(){return Gk=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var r=arguments[e];for(var n in r)({}).hasOwnProperty.call(r,n)&&(t[n]=r[n])}return t},Gk.apply(null,arguments)}function tK(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter(function(a){return Object.getOwnPropertyDescriptor(t,a).enumerable})),r.push.apply(r,n)}return r}function gHe(t){for(var e=1;e<arguments.length;e++){var r=arguments[e]!=null?arguments[e]:{};e%2?tK(Object(r),!0).forEach(function(n){xHe(t,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):tK(Object(r)).forEach(function(n){Object.defineProperty(t,n,Object.getOwnPropertyDescriptor(r,n))})}return t}function xHe(t,e,r){return(e=vHe(e))in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}function vHe(t){var e=yHe(t,"string");return typeof e=="symbol"?e:e+""}function yHe(t,e){if(typeof t!="object"||!t)return t;var r=t[Symbol.toPrimitive];if(r!==void 0){var n=r.call(t,e);if(typeof n!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}function bHe(t,e){if(t==null)return{};var r,n,a=wHe(t,e);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(t);for(n=0;n<s.length;n++)r=s[n],e.indexOf(r)===-1&&{}.propertyIsEnumerable.call(t,r)&&(a[r]=t[r])}return a}function wHe(t,e){if(t==null)return{};var r={};for(var n in t)if({}.hasOwnProperty.call(t,n)){if(e.indexOf(n)!==-1)continue;r[n]=t[n]}return r}var NHe=(t,e,r,n,a,s)=>"M".concat(t,",").concat(a,"v").concat(n,"M").concat(s,",").concat(e,"h").concat(r),CHe=t=>{var{x:e=0,y:r=0,top:n=0,left:a=0,width:s=0,height:i=0,className:l}=t,c=bHe(t,pHe),u=gHe({x:e,y:r,top:n,left:a,width:s,height:i},c);return!Wr(e)||!Wr(r)||!Wr(s)||!Wr(i)||!Wr(n)||!Wr(a)?null:v.createElement("path",Gk({},zu(u),{className:Ea("recharts-cross",l),d:NHe(e,r,s,i,n,a)}))};function _He(t,e,r,n){var a=n/2;return{stroke:"none",fill:"#ccc",x:t==="horizontal"?e.x-a:r.left+.5,y:t==="horizontal"?r.top+.5:e.y-a,width:t==="horizontal"?n:r.width-1,height:t==="horizontal"?r.height-1:n}}function rK(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter(function(a){return Object.getOwnPropertyDescriptor(t,a).enumerable})),r.push.apply(r,n)}return r}function nK(t){for(var e=1;e<arguments.length;e++){var r=arguments[e]!=null?arguments[e]:{};e%2?rK(Object(r),!0).forEach(function(n){EHe(t,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):rK(Object(r)).forEach(function(n){Object.defineProperty(t,n,Object.getOwnPropertyDescriptor(r,n))})}return t}function EHe(t,e,r){return(e=SHe(e))in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}function SHe(t){var e=IHe(t,"string");return typeof e=="symbol"?e:e+""}function IHe(t,e){if(typeof t!="object"||!t)return t;var r=t[Symbol.toPrimitive];if(r!==void 0){var n=r.call(t,e);if(typeof n!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}var jHe=t=>t.replace(/([A-Z])/g,e=>"-".concat(e.toLowerCase())),Use=(t,e,r)=>t.map(n=>"".concat(jHe(n)," ").concat(e,"ms ").concat(r)).join(","),BHe=(t,e)=>[Object.keys(t),Object.keys(e)].reduce((r,n)=>r.filter(a=>n.includes(a))),C2=(t,e)=>Object.keys(e).reduce((r,n)=>nK(nK({},r),{},{[n]:t(n,e[n])}),{});function aK(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter(function(a){return Object.getOwnPropertyDescriptor(t,a).enumerable})),r.push.apply(r,n)}return r}function Ri(t){for(var e=1;e<arguments.length;e++){var r=arguments[e]!=null?arguments[e]:{};e%2?aK(Object(r),!0).forEach(function(n){PHe(t,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):aK(Object(r)).forEach(function(n){Object.defineProperty(t,n,Object.getOwnPropertyDescriptor(r,n))})}return t}function PHe(t,e,r){return(e=THe(e))in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}function THe(t){var e=kHe(t,"string");return typeof e=="symbol"?e:e+""}function kHe(t,e){if(typeof t!="object"||!t)return t;var r=t[Symbol.toPrimitive];if(r!==void 0){var n=r.call(t,e);if(typeof n!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}var $S=(t,e,r)=>t+(e-t)*r,qk=t=>{var{from:e,to:r}=t;return e!==r},Qse=(t,e,r)=>{var n=C2((a,s)=>{if(qk(s)){var[i,l]=t(s.from,s.to,s.velocity);return Ri(Ri({},s),{},{from:i,velocity:l})}return s},e);return r<1?C2((a,s)=>qk(s)&&n[a]!=null?Ri(Ri({},s),{},{velocity:$S(s.velocity,n[a].velocity,r),from:$S(s.from,n[a].from,r)}):s,e):Qse(t,n,r-1)};function FHe(t,e,r,n,a,s){var i,l=n.reduce((h,A)=>Ri(Ri({},h),{},{[A]:{from:t[A],velocity:0,to:e[A]}}),{}),c=()=>C2((h,A)=>A.from,l),u=()=>!Object.values(l).filter(qk).length,d=null,f=h=>{i||(i=h);var A=h-i,m=A/r.dt;l=Qse(r,l,m),a(Ri(Ri(Ri({},t),e),c())),i=h,u()||(d=s.setTimeout(f))};return()=>(d=s.setTimeout(f),()=>{var h;(h=d)===null||h===void 0||h()})}function OHe(t,e,r,n,a,s,i){var l=null,c=a.reduce((f,h)=>{var A=t[h],m=e[h];return A==null||m==null?f:Ri(Ri({},f),{},{[h]:[A,m]})},{}),u,d=f=>{u||(u=f);var h=(f-u)/n,A=C2((p,g)=>$S(...g,r(h)),c);if(s(Ri(Ri(Ri({},t),e),A)),h<1)l=i.setTimeout(d);else{var m=C2((p,g)=>$S(...g,r(1)),c);s(Ri(Ri(Ri({},t),e),m))}};return()=>(l=i.setTimeout(d),()=>{var f;(f=l)===null||f===void 0||f()})}const DHe=(t,e,r,n,a,s)=>{var i=BHe(t,e);return r==null?()=>(a(Ri(Ri({},t),e)),()=>{}):r.isStepper===!0?FHe(t,e,r,i,a,s):OHe(t,e,r,n,i,a,s)};var KS=1e-4,Vse=(t,e)=>[0,3*t,3*e-6*t,3*t-3*e+1],Hse=(t,e)=>t.map((r,n)=>r*e**n).reduce((r,n)=>r+n),sK=(t,e)=>r=>{var n=Vse(t,e);return Hse(n,r)},RHe=(t,e)=>r=>{var n=Vse(t,e),a=[...n.map((s,i)=>s*i).slice(1),0];return Hse(a,r)},MHe=t=>{var e,r=t.split("(");if(r.length!==2||r[0]!=="cubic-bezier")return null;var n=(e=r[1])===null||e===void 0||(e=e.split(")")[0])===null||e===void 0?void 0:e.split(",");if(n==null||n.length!==4)return null;var a=n.map(s=>parseFloat(s));return[a[0],a[1],a[2],a[3]]},LHe=function(){for(var e=arguments.length,r=new Array(e),n=0;n<e;n++)r[n]=arguments[n];if(r.length===1)switch(r[0]){case"linear":return[0,0,1,1];case"ease":return[.25,.1,.25,1];case"ease-in":return[.42,0,1,1];case"ease-out":return[.42,0,.58,1];case"ease-in-out":return[0,0,.58,1];default:{var a=MHe(r[0]);if(a)return a}}return r.length===4?r:[0,0,1,1]},UHe=(t,e,r,n)=>{var a=sK(t,r),s=sK(e,n),i=RHe(t,r),l=u=>u>1?1:u<0?0:u,c=u=>{for(var d=u>1?1:u,f=d,h=0;h<8;++h){var A=a(f)-d,m=i(f);if(Math.abs(A-d)<KS||m<KS)return s(f);f=l(f-A/m)}return s(f)};return c.isStepper=!1,c},iK=function(){return UHe(...LHe(...arguments))},QHe=function(){var e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},{stiff:r=100,damping:n=8,dt:a=17}=e,s=(i,l,c)=>{var u=-(i-l)*r,d=c*n,f=c+(u-d)*a/1e3,h=c*a/1e3+i;return Math.abs(h-l)<KS&&Math.abs(f)<KS?[l,0]:[h,f]};return s.isStepper=!0,s.dt=a,s},VHe=t=>{if(typeof t=="string")switch(t){case"ease":case"ease-in-out":case"ease-out":case"ease-in":case"linear":return iK(t);case"spring":return QHe();default:if(t.split("(")[0]==="cubic-bezier")return iK(t)}return typeof t=="function"?t:null};function HHe(t){var e,r=()=>null,n=!1,a=null,s=i=>{if(!n){if(Array.isArray(i)){if(!i.length)return;var l=i,[c,...u]=l;if(typeof c=="number"){a=t.setTimeout(s.bind(null,u),c);return}s(c),a=t.setTimeout(s.bind(null,u));return}typeof i=="string"&&(e=i,r(e)),typeof i=="object"&&(e=i,r(e)),typeof i=="function"&&i()}};return{stop:()=>{n=!0},start:i=>{n=!1,a&&(a(),a=null),s(i)},subscribe:i=>(r=i,()=>{r=()=>null}),getTimeoutController:()=>t}}class $He{setTimeout(e){var r=arguments.length>1&&arguments[1]!==void 0?arguments[1]:0,n=performance.now(),a=null,s=i=>{i-n>=r?e(i):typeof requestAnimationFrame=="function"&&(a=requestAnimationFrame(s))};return a=requestAnimationFrame(s),()=>{a!=null&&cancelAnimationFrame(a)}}}function KHe(){return HHe(new $He)}var GHe=v.createContext(KHe);function qHe(t,e){var r=v.useContext(GHe);return v.useMemo(()=>e??r(t),[t,e,r])}var zHe=()=>!(typeof window<"u"&&window.document&&window.document.createElement&&window.setTimeout),c3={isSsr:zHe()},WHe={begin:0,duration:1e3,easing:"ease",isActive:!0,canBegin:!0,onAnimationEnd:()=>{},onAnimationStart:()=>{}},oK={t:0},_B={t:1};function u3(t){var e=zo(t,WHe),{isActive:r,canBegin:n,duration:a,easing:s,begin:i,onAnimationEnd:l,onAnimationStart:c,children:u}=e,d=r==="auto"?!c3.isSsr:r,f=qHe(e.animationId,e.animationManager),[h,A]=v.useState(d?oK:_B),m=v.useRef(null);return v.useEffect(()=>{d||A(_B)},[d]),v.useEffect(()=>{if(!d||!n)return pw;var p=DHe(oK,_B,VHe(s),a,A,f.getTimeoutController()),g=()=>{m.current=p()};return f.start([c,i,g,a,l]),()=>{f.stop(),m.current&&m.current(),l()}},[d,n,a,s,i,c,l,f]),u(h.t)}function d3(t){var e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:"animation-",r=v.useRef(g2(e)),n=v.useRef(t);return n.current!==t&&(r.current=g2(e),n.current=t),r.current}var XHe=["radius"],YHe=["radius"],lK,cK,uK,dK,fK,AK,hK,mK,pK,gK;function xK(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter(function(a){return Object.getOwnPropertyDescriptor(t,a).enumerable})),r.push.apply(r,n)}return r}function vK(t){for(var e=1;e<arguments.length;e++){var r=arguments[e]!=null?arguments[e]:{};e%2?xK(Object(r),!0).forEach(function(n){JHe(t,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):xK(Object(r)).forEach(function(n){Object.defineProperty(t,n,Object.getOwnPropertyDescriptor(r,n))})}return t}function JHe(t,e,r){return(e=ZHe(e))in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}function ZHe(t){var e=e$e(t,"string");return typeof e=="symbol"?e:e+""}function e$e(t,e){if(typeof t!="object"||!t)return t;var r=t[Symbol.toPrimitive];if(r!==void 0){var n=r.call(t,e);if(typeof n!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}function GS(){return GS=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var r=arguments[e];for(var n in r)({}).hasOwnProperty.call(r,n)&&(t[n]=r[n])}return t},GS.apply(null,arguments)}function yK(t,e){if(t==null)return{};var r,n,a=t$e(t,e);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(t);for(n=0;n<s.length;n++)r=s[n],e.indexOf(r)===-1&&{}.propertyIsEnumerable.call(t,r)&&(a[r]=t[r])}return a}function t$e(t,e){if(t==null)return{};var r={};for(var n in t)if({}.hasOwnProperty.call(t,n)){if(e.indexOf(n)!==-1)continue;r[n]=t[n]}return r}function of(t,e){return e||(e=t.slice(0)),Object.freeze(Object.defineProperties(t,{raw:{value:Object.freeze(e)}}))}var bK=(t,e,r,n,a)=>{var s=p0(r),i=p0(n),l=Math.min(Math.abs(s)/2,Math.abs(i)/2),c=i>=0?1:-1,u=s>=0?1:-1,d=i>=0&&s>=0||i<0&&s<0?1:0,f;if(l>0&&a instanceof Array){for(var h=[0,0,0,0],A=0,m=4;A<m;A++)h[A]=a[A]>l?l:a[A];f=Hs(lK||(lK=of(["M",",",""])),t,e+c*h[0]),h[0]>0&&(f+=Hs(cK||(cK=of(["A ",",",",0,0,",",",",",""])),h[0],h[0],d,t+u*h[0],e)),f+=Hs(uK||(uK=of(["L ",",",""])),t+r-u*h[1],e),h[1]>0&&(f+=Hs(dK||(dK=of(["A ",",",",0,0,",`,
        `,",",""])),h[1],h[1],d,t+r,e+c*h[1])),f+=Hs(fK||(fK=of(["L ",",",""])),t+r,e+n-c*h[2]),h[2]>0&&(f+=Hs(AK||(AK=of(["A ",",",",0,0,",`,
        `,",",""])),h[2],h[2],d,t+r-u*h[2],e+n)),f+=Hs(hK||(hK=of(["L ",",",""])),t+u*h[3],e+n),h[3]>0&&(f+=Hs(mK||(mK=of(["A ",",",",0,0,",`,
        `,",",""])),h[3],h[3],d,t,e+n-c*h[3])),f+="Z"}else if(l>0&&a===+a&&a>0){var p=Math.min(l,a);f=Hs(pK||(pK=of(["M ",",",`
            A `,",",",0,0,",",",",",`
            L `,",",`
            A `,",",",0,0,",",",",",`
            L `,",",`
            A `,",",",0,0,",",",",",`
            L `,",",`
            A `,",",",0,0,",",",","," Z"])),t,e+c*p,p,p,d,t+u*p,e,t+r-u*p,e,p,p,d,t+r,e+c*p,t+r,e+n-c*p,p,p,d,t+r-u*p,e+n,t+u*p,e+n,p,p,d,t,e+n-c*p)}else f=Hs(gK||(gK=of(["M ",","," h "," v "," h "," Z"])),t,e,r,n,-r);return f},wK={x:0,y:0,width:0,height:0,radius:0,isAnimationActive:!1,isUpdateAnimationActive:!1,animationBegin:0,animationDuration:1500,animationEasing:"ease"},$se=t=>{var e=zo(t,wK),r=v.useRef(null),[n,a]=v.useState(-1);v.useEffect(()=>{if(r.current&&r.current.getTotalLength)try{var fe=r.current.getTotalLength();fe&&a(fe)}catch{}},[]);var{x:s,y:i,width:l,height:c,radius:u,className:d}=e,{animationEasing:f,animationDuration:h,animationBegin:A,isAnimationActive:m,isUpdateAnimationActive:p}=e,g=v.useRef(l),x=v.useRef(c),y=v.useRef(s),b=v.useRef(i),w=v.useMemo(()=>({x:s,y:i,width:l,height:c,radius:u}),[s,i,l,c,u]),j=d3(w,"rectangle-");if(s!==+s||i!==+i||l!==+l||c!==+c||l===0||c===0)return null;var I=Ea("recharts-rectangle",d);if(!p){var _=zu(e),{radius:E}=_,S=yK(_,XHe);return v.createElement("path",GS({},S,{x:p0(s),y:p0(i),width:p0(l),height:p0(c),radius:typeof u=="number"?u:void 0,className:I,d:bK(s,i,l,c,u)}))}var k=g.current,P=x.current,T=y.current,F=b.current,Y="0px ".concat(n===-1?1:n,"px"),he="".concat(n,"px 0px"),ue=Use(["strokeDasharray"],h,typeof f=="string"?f:wK.animationEasing);return v.createElement(u3,{animationId:j,key:j,canBegin:n>0,duration:h,easing:f,isActive:p,begin:A},fe=>{var me=Di(k,l,fe),ne=Di(P,c,fe),Pe=Di(T,s,fe),Ie=Di(F,i,fe);r.current&&(g.current=me,x.current=ne,y.current=Pe,b.current=Ie);var O;m?fe>0?O={transition:ue,strokeDasharray:he}:O={strokeDasharray:Y}:O={strokeDasharray:he};var H=zu(e),{radius:R}=H,M=yK(H,YHe);return v.createElement("path",GS({},M,{radius:typeof u=="number"?u:void 0,className:I,d:bK(Pe,Ie,me,ne,u),ref:r,style:vK(vK({},O),e.style)}))})};function NK(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter(function(a){return Object.getOwnPropertyDescriptor(t,a).enumerable})),r.push.apply(r,n)}return r}function CK(t){for(var e=1;e<arguments.length;e++){var r=arguments[e]!=null?arguments[e]:{};e%2?NK(Object(r),!0).forEach(function(n){r$e(t,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):NK(Object(r)).forEach(function(n){Object.defineProperty(t,n,Object.getOwnPropertyDescriptor(r,n))})}return t}function r$e(t,e,r){return(e=n$e(e))in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}function n$e(t){var e=a$e(t,"string");return typeof e=="symbol"?e:e+""}function a$e(t,e){if(typeof t!="object"||!t)return t;var r=t[Symbol.toPrimitive];if(r!==void 0){var n=r.call(t,e);if(typeof n!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}var qS=Math.PI/180,s$e=t=>t*180/Math.PI,wi=(t,e,r,n)=>({x:t+Math.cos(-qS*n)*r,y:e+Math.sin(-qS*n)*r}),Kse=function(e,r){var n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{top:0,right:0,bottom:0,left:0};return Math.min(Math.abs(e-(n.left||0)-(n.right||0)),Math.abs(r-(n.top||0)-(n.bottom||0)))/2},i$e=(t,e)=>{var{x:r,y:n}=t,{x:a,y:s}=e;return Math.sqrt((r-a)**2+(n-s)**2)},o$e=(t,e)=>{var{x:r,y:n}=t,{cx:a,cy:s}=e,i=i$e({x:r,y:n},{x:a,y:s});if(i<=0)return{radius:i,angle:0};var l=(r-a)/i,c=Math.acos(l);return n>s&&(c=2*Math.PI-c),{radius:i,angle:s$e(c),angleInRadian:c}},l$e=t=>{var{startAngle:e,endAngle:r}=t,n=Math.floor(e/360),a=Math.floor(r/360),s=Math.min(n,a);return{startAngle:e-s*360,endAngle:r-s*360}},c$e=(t,e)=>{var{startAngle:r,endAngle:n}=e,a=Math.floor(r/360),s=Math.floor(n/360),i=Math.min(a,s);return t+i*360},u$e=(t,e)=>{var{chartX:r,chartY:n}=t,{radius:a,angle:s}=o$e({x:r,y:n},e),{innerRadius:i,outerRadius:l}=e;if(a<i||a>l||a===0)return null;var{startAngle:c,endAngle:u}=l$e(e),d=s,f;if(c<=u){for(;d>u;)d-=360;for(;d<c;)d+=360;f=d>=c&&d<=u}else{for(;d>c;)d-=360;for(;d<u;)d+=360;f=d>=u&&d<=c}return f?CK(CK({},e),{},{radius:a,angle:c$e(d,e)}):null};function Gse(t){var{cx:e,cy:r,radius:n,startAngle:a,endAngle:s}=t,i=wi(e,r,n,a),l=wi(e,r,n,s);return{points:[i,l],cx:e,cy:r,radius:n,startAngle:a,endAngle:s}}var _K,EK,SK,IK,jK,BK,PK;function zk(){return zk=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var r=arguments[e];for(var n in r)({}).hasOwnProperty.call(r,n)&&(t[n]=r[n])}return t},zk.apply(null,arguments)}function Xm(t,e){return e||(e=t.slice(0)),Object.freeze(Object.defineProperties(t,{raw:{value:Object.freeze(e)}}))}var d$e=(t,e)=>{var r=Ko(e-t),n=Math.min(Math.abs(e-t),359.999);return r*n},GC=t=>{var{cx:e,cy:r,radius:n,angle:a,sign:s,isExternal:i,cornerRadius:l,cornerIsExternal:c}=t,u=l*(i?1:-1)+n,d=Math.asin(l/u)/qS,f=c?a:a+s*d,h=wi(e,r,u,f),A=wi(e,r,n,f),m=c?a-s*d:a,p=wi(e,r,u*Math.cos(d*qS),m);return{center:h,circleTangency:A,lineTangency:p,theta:d}},qse=t=>{var{cx:e,cy:r,innerRadius:n,outerRadius:a,startAngle:s,endAngle:i}=t,l=d$e(s,i),c=s+l,u=wi(e,r,a,s),d=wi(e,r,a,c),f=Hs(_K||(_K=Xm(["M ",",",`
    A `,",",`,0,
    `,",",`,
    `,",",`
  `])),u.x,u.y,a,a,+(Math.abs(l)>180),+(s>c),d.x,d.y);if(n>0){var h=wi(e,r,n,s),A=wi(e,r,n,c);f+=Hs(EK||(EK=Xm(["L ",",",`
            A `,",",`,0,
            `,",",`,
            `,","," Z"])),A.x,A.y,n,n,+(Math.abs(l)>180),+(s<=c),h.x,h.y)}else f+=Hs(SK||(SK=Xm(["L ",","," Z"])),e,r);return f},f$e=t=>{var{cx:e,cy:r,innerRadius:n,outerRadius:a,cornerRadius:s,forceCornerRadius:i,cornerIsExternal:l,startAngle:c,endAngle:u}=t,d=Ko(u-c),{circleTangency:f,lineTangency:h,theta:A}=GC({cx:e,cy:r,radius:a,angle:c,sign:d,cornerRadius:s,cornerIsExternal:l}),{circleTangency:m,lineTangency:p,theta:g}=GC({cx:e,cy:r,radius:a,angle:u,sign:-d,cornerRadius:s,cornerIsExternal:l}),x=l?Math.abs(c-u):Math.abs(c-u)-A-g;if(x<0)return i?Hs(IK||(IK=Xm(["M ",",",`
        a`,",",",0,0,1,",`,0
        a`,",",",0,0,1,",`,0
      `])),h.x,h.y,s,s,s*2,s,s,-s*2):qse({cx:e,cy:r,innerRadius:n,outerRadius:a,startAngle:c,endAngle:u});var y=Hs(jK||(jK=Xm(["M ",",",`
    A`,",",",0,0,",",",",",`
    A`,",",",0,",",",",",",",`
    A`,",",",0,0,",",",",",`
  `])),h.x,h.y,s,s,+(d<0),f.x,f.y,a,a,+(x>180),+(d<0),m.x,m.y,s,s,+(d<0),p.x,p.y);if(n>0){var{circleTangency:b,lineTangency:w,theta:j}=GC({cx:e,cy:r,radius:n,angle:c,sign:d,isExternal:!0,cornerRadius:s,cornerIsExternal:l}),{circleTangency:I,lineTangency:_,theta:E}=GC({cx:e,cy:r,radius:n,angle:u,sign:-d,isExternal:!0,cornerRadius:s,cornerIsExternal:l}),S=l?Math.abs(c-u):Math.abs(c-u)-j-E;if(S<0&&s===0)return"".concat(y,"L").concat(e,",").concat(r,"Z");y+=Hs(BK||(BK=Xm(["L",",",`
      A`,",",",0,0,",",",",",`
      A`,",",",0,",",",",",",",`
      A`,",",",0,0,",",",",","Z"])),_.x,_.y,s,s,+(d<0),I.x,I.y,n,n,+(S>180),+(d>0),b.x,b.y,s,s,+(d<0),w.x,w.y)}else y+=Hs(PK||(PK=Xm(["L",",","Z"])),e,r);return y},A$e={cx:0,cy:0,innerRadius:0,outerRadius:0,startAngle:0,endAngle:0,cornerRadius:0,forceCornerRadius:!1,cornerIsExternal:!1},zse=t=>{var e=zo(t,A$e),{cx:r,cy:n,innerRadius:a,outerRadius:s,cornerRadius:i,forceCornerRadius:l,cornerIsExternal:c,startAngle:u,endAngle:d,className:f}=e;if(s<a||u===d)return null;var h=Ea("recharts-sector",f),A=s-a,m=xl(i,A,0,!0),p;return m>0&&Math.abs(u-d)<360?p=f$e({cx:r,cy:n,innerRadius:a,outerRadius:s,cornerRadius:Math.min(m,A/2),forceCornerRadius:l,cornerIsExternal:c,startAngle:u,endAngle:d}):p=qse({cx:r,cy:n,innerRadius:a,outerRadius:s,startAngle:u,endAngle:d}),v.createElement("path",zk({},zu(e),{className:h,d:p}))};function h$e(t,e,r){if(t==="horizontal")return[{x:e.x,y:r.top},{x:e.x,y:r.top+r.height}];if(t==="vertical")return[{x:r.left,y:e.y},{x:r.left+r.width,y:e.y}];if(uae(e)){if(t==="centric"){var{cx:n,cy:a,innerRadius:s,outerRadius:i,angle:l}=e,c=wi(n,a,s,l),u=wi(n,a,i,l);return[{x:c.x,y:c.y},{x:u.x,y:u.y}]}return Gse(e)}}var Wse={},Xse={},Yse={};(function(t){Object.defineProperty(t,Symbol.toStringTag,{value:"Module"});const e=YD;function r(n){return e.isSymbol(n)?NaN:Number(n)}t.toNumber=r})(Yse);(function(t){Object.defineProperty(t,Symbol.toStringTag,{value:"Module"});const e=Yse;function r(n){return n?(n=e.toNumber(n),n===1/0||n===-1/0?(n<0?-1:1)*Number.MAX_VALUE:n===n?n:0):n===0?n:0}t.toFinite=r})(Xse);(function(t){Object.defineProperty(t,Symbol.toStringTag,{value:"Module"});const e=JD,r=Xse;function n(a,s,i){i&&typeof i!="number"&&e.isIterateeCall(a,s,i)&&(s=i=void 0),a=r.toFinite(a),s===void 0?(s=a,a=0):s=r.toFinite(s),i=i===void 0?a<s?1:-1:r.toFinite(i);const l=Math.max(Math.ceil((s-a)/(i||1)),0),c=new Array(l);for(let u=0;u<l;u++)c[u]=a,a+=i;return c}t.range=n})(Wse);var m$e=Wse.range;const Jse=zA(m$e);function F0(t,e){return t==null||e==null?NaN:t<e?-1:t>e?1:t>=e?0:NaN}function p$e(t,e){return t==null||e==null?NaN:e<t?-1:e>t?1:e>=t?0:NaN}function uR(t){let e,r,n;t.length!==2?(e=F0,r=(l,c)=>F0(t(l),c),n=(l,c)=>t(l)-c):(e=t===F0||t===p$e?t:g$e,r=t,n=t);function a(l,c,u=0,d=l.length){if(u<d){if(e(c,c)!==0)return d;do{const f=u+d>>>1;r(l[f],c)<0?u=f+1:d=f}while(u<d)}return u}function s(l,c,u=0,d=l.length){if(u<d){if(e(c,c)!==0)return d;do{const f=u+d>>>1;r(l[f],c)<=0?u=f+1:d=f}while(u<d)}return u}function i(l,c,u=0,d=l.length){const f=a(l,c,u,d-1);return f>u&&n(l[f-1],c)>-n(l[f],c)?f-1:f}return{left:a,center:i,right:s}}function g$e(){return 0}function Zse(t){return t===null?NaN:+t}function*x$e(t,e){for(let r of t)r!=null&&(r=+r)>=r&&(yield r)}const v$e=uR(F0),Nw=v$e.right;uR(Zse).center;class TK extends Map{constructor(e,r=w$e){if(super(),Object.defineProperties(this,{_intern:{value:new Map},_key:{value:r}}),e!=null)for(const[n,a]of e)this.set(n,a)}get(e){return super.get(kK(this,e))}has(e){return super.has(kK(this,e))}set(e,r){return super.set(y$e(this,e),r)}delete(e){return super.delete(b$e(this,e))}}function kK({_intern:t,_key:e},r){const n=e(r);return t.has(n)?t.get(n):r}function y$e({_intern:t,_key:e},r){const n=e(r);return t.has(n)?t.get(n):(t.set(n,r),r)}function b$e({_intern:t,_key:e},r){const n=e(r);return t.has(n)&&(r=t.get(n),t.delete(n)),r}function w$e(t){return t!==null&&typeof t=="object"?t.valueOf():t}function N$e(t=F0){if(t===F0)return eie;if(typeof t!="function")throw new TypeError("compare is not a function");return(e,r)=>{const n=t(e,r);return n||n===0?n:(t(r,r)===0)-(t(e,e)===0)}}function eie(t,e){return(t==null||!(t>=t))-(e==null||!(e>=e))||(t<e?-1:t>e?1:0)}const C$e=Math.sqrt(50),_$e=Math.sqrt(10),E$e=Math.sqrt(2);function zS(t,e,r){const n=(e-t)/Math.max(0,r),a=Math.floor(Math.log10(n)),s=n/Math.pow(10,a),i=s>=C$e?10:s>=_$e?5:s>=E$e?2:1;let l,c,u;return a<0?(u=Math.pow(10,-a)/i,l=Math.round(t*u),c=Math.round(e*u),l/u<t&&++l,c/u>e&&--c,u=-u):(u=Math.pow(10,a)*i,l=Math.round(t/u),c=Math.round(e/u),l*u<t&&++l,c*u>e&&--c),c<l&&.5<=r&&r<2?zS(t,e,r*2):[l,c,u]}function Wk(t,e,r){if(e=+e,t=+t,r=+r,!(r>0))return[];if(t===e)return[t];const n=e<t,[a,s,i]=n?zS(e,t,r):zS(t,e,r);if(!(s>=a))return[];const l=s-a+1,c=new Array(l);if(n)if(i<0)for(let u=0;u<l;++u)c[u]=(s-u)/-i;else for(let u=0;u<l;++u)c[u]=(s-u)*i;else if(i<0)for(let u=0;u<l;++u)c[u]=(a+u)/-i;else for(let u=0;u<l;++u)c[u]=(a+u)*i;return c}function Xk(t,e,r){return e=+e,t=+t,r=+r,zS(t,e,r)[2]}function Yk(t,e,r){e=+e,t=+t,r=+r;const n=e<t,a=n?Xk(e,t,r):Xk(t,e,r);return(n?-1:1)*(a<0?1/-a:a)}function FK(t,e){let r;for(const n of t)n!=null&&(r<n||r===void 0&&n>=n)&&(r=n);return r}function OK(t,e){let r;for(const n of t)n!=null&&(r>n||r===void 0&&n>=n)&&(r=n);return r}function tie(t,e,r=0,n=1/0,a){if(e=Math.floor(e),r=Math.floor(Math.max(0,r)),n=Math.floor(Math.min(t.length-1,n)),!(r<=e&&e<=n))return t;for(a=a===void 0?eie:N$e(a);n>r;){if(n-r>600){const c=n-r+1,u=e-r+1,d=Math.log(c),f=.5*Math.exp(2*d/3),h=.5*Math.sqrt(d*f*(c-f)/c)*(u-c/2<0?-1:1),A=Math.max(r,Math.floor(e-u*f/c+h)),m=Math.min(n,Math.floor(e+(c-u)*f/c+h));tie(t,e,A,m,a)}const s=t[e];let i=r,l=n;for(X1(t,r,e),a(t[n],s)>0&&X1(t,r,n);i<l;){for(X1(t,i,l),++i,--l;a(t[i],s)<0;)++i;for(;a(t[l],s)>0;)--l}a(t[r],s)===0?X1(t,r,l):(++l,X1(t,l,n)),l<=e&&(r=l+1),e<=l&&(n=l-1)}return t}function X1(t,e,r){const n=t[e];t[e]=t[r],t[r]=n}function S$e(t,e,r){if(t=Float64Array.from(x$e(t)),!(!(n=t.length)||isNaN(e=+e))){if(e<=0||n<2)return OK(t);if(e>=1)return FK(t);var n,a=(n-1)*e,s=Math.floor(a),i=FK(tie(t,s).subarray(0,s+1)),l=OK(t.subarray(s+1));return i+(l-i)*(a-s)}}function I$e(t,e,r=Zse){if(!(!(n=t.length)||isNaN(e=+e))){if(e<=0||n<2)return+r(t[0],0,t);if(e>=1)return+r(t[n-1],n-1,t);var n,a=(n-1)*e,s=Math.floor(a),i=+r(t[s],s,t),l=+r(t[s+1],s+1,t);return i+(l-i)*(a-s)}}function j$e(t,e,r){t=+t,e=+e,r=(a=arguments.length)<2?(e=t,t=0,1):a<3?1:+r;for(var n=-1,a=Math.max(0,Math.ceil((e-t)/r))|0,s=new Array(a);++n<a;)s[n]=t+n*r;return s}function Ju(t,e){switch(arguments.length){case 0:break;case 1:this.range(t);break;default:this.range(e).domain(t);break}return this}function ih(t,e){switch(arguments.length){case 0:break;case 1:{typeof t=="function"?this.interpolator(t):this.range(t);break}default:{this.domain(t),typeof e=="function"?this.interpolator(e):this.range(e);break}}return this}const Jk=Symbol("implicit");function dR(){var t=new TK,e=[],r=[],n=Jk;function a(s){let i=t.get(s);if(i===void 0){if(n!==Jk)return n;t.set(s,i=e.push(s)-1)}return r[i%r.length]}return a.domain=function(s){if(!arguments.length)return e.slice();e=[],t=new TK;for(const i of s)t.has(i)||t.set(i,e.push(i)-1);return a},a.range=function(s){return arguments.length?(r=Array.from(s),a):r.slice()},a.unknown=function(s){return arguments.length?(n=s,a):n},a.copy=function(){return dR(e,r).unknown(n)},Ju.apply(a,arguments),a}function fR(){var t=dR().unknown(void 0),e=t.domain,r=t.range,n=0,a=1,s,i,l=!1,c=0,u=0,d=.5;delete t.unknown;function f(){var h=e().length,A=a<n,m=A?a:n,p=A?n:a;s=(p-m)/Math.max(1,h-c+u*2),l&&(s=Math.floor(s)),m+=(p-m-s*(h-c))*d,i=s*(1-c),l&&(m=Math.round(m),i=Math.round(i));var g=j$e(h).map(function(x){return m+s*x});return r(A?g.reverse():g)}return t.domain=function(h){return arguments.length?(e(h),f()):e()},t.range=function(h){return arguments.length?([n,a]=h,n=+n,a=+a,f()):[n,a]},t.rangeRound=function(h){return[n,a]=h,n=+n,a=+a,l=!0,f()},t.bandwidth=function(){return i},t.step=function(){return s},t.round=function(h){return arguments.length?(l=!!h,f()):l},t.padding=function(h){return arguments.length?(c=Math.min(1,u=+h),f()):c},t.paddingInner=function(h){return arguments.length?(c=Math.min(1,h),f()):c},t.paddingOuter=function(h){return arguments.length?(u=+h,f()):u},t.align=function(h){return arguments.length?(d=Math.max(0,Math.min(1,h)),f()):d},t.copy=function(){return fR(e(),[n,a]).round(l).paddingInner(c).paddingOuter(u).align(d)},Ju.apply(f(),arguments)}function rie(t){var e=t.copy;return t.padding=t.paddingOuter,delete t.paddingInner,delete t.paddingOuter,t.copy=function(){return rie(e())},t}function B$e(){return rie(fR.apply(null,arguments).paddingInner(1))}function AR(t,e,r){t.prototype=e.prototype=r,r.constructor=t}function nie(t,e){var r=Object.create(t.prototype);for(var n in e)r[n]=e[n];return r}function Cw(){}var _2=.7,WS=1/_2,$x="\\s*([+-]?\\d+)\\s*",E2="\\s*([+-]?(?:\\d*\\.)?\\d+(?:[eE][+-]?\\d+)?)\\s*",_f="\\s*([+-]?(?:\\d*\\.)?\\d+(?:[eE][+-]?\\d+)?)%\\s*",P$e=/^#([0-9a-f]{3,8})$/,T$e=new RegExp(`^rgb\\(${$x},${$x},${$x}\\)$`),k$e=new RegExp(`^rgb\\(${_f},${_f},${_f}\\)$`),F$e=new RegExp(`^rgba\\(${$x},${$x},${$x},${E2}\\)$`),O$e=new RegExp(`^rgba\\(${_f},${_f},${_f},${E2}\\)$`),D$e=new RegExp(`^hsl\\(${E2},${_f},${_f}\\)$`),R$e=new RegExp(`^hsla\\(${E2},${_f},${_f},${E2}\\)$`),DK={aliceblue:15792383,antiquewhite:16444375,aqua:65535,aquamarine:8388564,azure:15794175,beige:16119260,bisque:16770244,black:0,blanchedalmond:16772045,blue:255,blueviolet:9055202,brown:10824234,burlywood:14596231,cadetblue:6266528,chartreuse:8388352,chocolate:13789470,coral:16744272,cornflowerblue:6591981,cornsilk:16775388,crimson:14423100,cyan:65535,darkblue:139,darkcyan:35723,darkgoldenrod:12092939,darkgray:11119017,darkgreen:25600,darkgrey:11119017,darkkhaki:12433259,darkmagenta:9109643,darkolivegreen:5597999,darkorange:16747520,darkorchid:10040012,darkred:9109504,darksalmon:15308410,darkseagreen:9419919,darkslateblue:4734347,darkslategray:3100495,darkslategrey:3100495,darkturquoise:52945,darkviolet:9699539,deeppink:16716947,deepskyblue:49151,dimgray:6908265,dimgrey:6908265,dodgerblue:2003199,firebrick:11674146,floralwhite:16775920,forestgreen:2263842,fuchsia:16711935,gainsboro:14474460,ghostwhite:16316671,gold:16766720,goldenrod:14329120,gray:8421504,green:32768,greenyellow:11403055,grey:8421504,honeydew:15794160,hotpink:16738740,indianred:13458524,indigo:4915330,ivory:16777200,khaki:15787660,lavender:15132410,lavenderblush:16773365,lawngreen:8190976,lemonchiffon:16775885,lightblue:11393254,lightcoral:15761536,lightcyan:14745599,lightgoldenrodyellow:16448210,lightgray:13882323,lightgreen:9498256,lightgrey:13882323,lightpink:16758465,lightsalmon:16752762,lightseagreen:2142890,lightskyblue:8900346,lightslategray:7833753,lightslategrey:7833753,lightsteelblue:11584734,lightyellow:16777184,lime:65280,limegreen:3329330,linen:16445670,magenta:16711935,maroon:8388608,mediumaquamarine:6737322,mediumblue:205,mediumorchid:12211667,mediumpurple:9662683,mediumseagreen:3978097,mediumslateblue:8087790,mediumspringgreen:64154,mediumturquoise:4772300,mediumvioletred:13047173,midnightblue:1644912,mintcream:16121850,mistyrose:16770273,moccasin:16770229,navajowhite:16768685,navy:128,oldlace:16643558,olive:8421376,olivedrab:7048739,orange:16753920,orangered:16729344,orchid:14315734,palegoldenrod:15657130,palegreen:10025880,paleturquoise:11529966,palevioletred:14381203,papayawhip:16773077,peachpuff:16767673,peru:13468991,pink:16761035,plum:14524637,powderblue:11591910,purple:8388736,rebeccapurple:6697881,red:16711680,rosybrown:12357519,royalblue:4286945,saddlebrown:9127187,salmon:16416882,sandybrown:16032864,seagreen:3050327,seashell:16774638,sienna:10506797,silver:12632256,skyblue:8900331,slateblue:6970061,slategray:7372944,slategrey:7372944,snow:16775930,springgreen:65407,steelblue:4620980,tan:13808780,teal:32896,thistle:14204888,tomato:16737095,turquoise:4251856,violet:15631086,wheat:16113331,white:16777215,whitesmoke:16119285,yellow:16776960,yellowgreen:10145074};AR(Cw,S2,{copy(t){return Object.assign(new this.constructor,this,t)},displayable(){return this.rgb().displayable()},hex:RK,formatHex:RK,formatHex8:M$e,formatHsl:L$e,formatRgb:MK,toString:MK});function RK(){return this.rgb().formatHex()}function M$e(){return this.rgb().formatHex8()}function L$e(){return aie(this).formatHsl()}function MK(){return this.rgb().formatRgb()}function S2(t){var e,r;return t=(t+"").trim().toLowerCase(),(e=P$e.exec(t))?(r=e[1].length,e=parseInt(e[1],16),r===6?LK(e):r===3?new uc(e>>8&15|e>>4&240,e>>4&15|e&240,(e&15)<<4|e&15,1):r===8?qC(e>>24&255,e>>16&255,e>>8&255,(e&255)/255):r===4?qC(e>>12&15|e>>8&240,e>>8&15|e>>4&240,e>>4&15|e&240,((e&15)<<4|e&15)/255):null):(e=T$e.exec(t))?new uc(e[1],e[2],e[3],1):(e=k$e.exec(t))?new uc(e[1]*255/100,e[2]*255/100,e[3]*255/100,1):(e=F$e.exec(t))?qC(e[1],e[2],e[3],e[4]):(e=O$e.exec(t))?qC(e[1]*255/100,e[2]*255/100,e[3]*255/100,e[4]):(e=D$e.exec(t))?VK(e[1],e[2]/100,e[3]/100,1):(e=R$e.exec(t))?VK(e[1],e[2]/100,e[3]/100,e[4]):DK.hasOwnProperty(t)?LK(DK[t]):t==="transparent"?new uc(NaN,NaN,NaN,0):null}function LK(t){return new uc(t>>16&255,t>>8&255,t&255,1)}function qC(t,e,r,n){return n<=0&&(t=e=r=NaN),new uc(t,e,r,n)}function U$e(t){return t instanceof Cw||(t=S2(t)),t?(t=t.rgb(),new uc(t.r,t.g,t.b,t.opacity)):new uc}function Zk(t,e,r,n){return arguments.length===1?U$e(t):new uc(t,e,r,n??1)}function uc(t,e,r,n){this.r=+t,this.g=+e,this.b=+r,this.opacity=+n}AR(uc,Zk,nie(Cw,{brighter(t){return t=t==null?WS:Math.pow(WS,t),new uc(this.r*t,this.g*t,this.b*t,this.opacity)},darker(t){return t=t==null?_2:Math.pow(_2,t),new uc(this.r*t,this.g*t,this.b*t,this.opacity)},rgb(){return this},clamp(){return new uc(hp(this.r),hp(this.g),hp(this.b),XS(this.opacity))},displayable(){return-.5<=this.r&&this.r<255.5&&-.5<=this.g&&this.g<255.5&&-.5<=this.b&&this.b<255.5&&0<=this.opacity&&this.opacity<=1},hex:UK,formatHex:UK,formatHex8:Q$e,formatRgb:QK,toString:QK}));function UK(){return`#${Ym(this.r)}${Ym(this.g)}${Ym(this.b)}`}function Q$e(){return`#${Ym(this.r)}${Ym(this.g)}${Ym(this.b)}${Ym((isNaN(this.opacity)?1:this.opacity)*255)}`}function QK(){const t=XS(this.opacity);return`${t===1?"rgb(":"rgba("}${hp(this.r)}, ${hp(this.g)}, ${hp(this.b)}${t===1?")":`, ${t})`}`}function XS(t){return isNaN(t)?1:Math.max(0,Math.min(1,t))}function hp(t){return Math.max(0,Math.min(255,Math.round(t)||0))}function Ym(t){return t=hp(t),(t<16?"0":"")+t.toString(16)}function VK(t,e,r,n){return n<=0?t=e=r=NaN:r<=0||r>=1?t=e=NaN:e<=0&&(t=NaN),new wd(t,e,r,n)}function aie(t){if(t instanceof wd)return new wd(t.h,t.s,t.l,t.opacity);if(t instanceof Cw||(t=S2(t)),!t)return new wd;if(t instanceof wd)return t;t=t.rgb();var e=t.r/255,r=t.g/255,n=t.b/255,a=Math.min(e,r,n),s=Math.max(e,r,n),i=NaN,l=s-a,c=(s+a)/2;return l?(e===s?i=(r-n)/l+(r<n)*6:r===s?i=(n-e)/l+2:i=(e-r)/l+4,l/=c<.5?s+a:2-s-a,i*=60):l=c>0&&c<1?0:i,new wd(i,l,c,t.opacity)}function V$e(t,e,r,n){return arguments.length===1?aie(t):new wd(t,e,r,n??1)}function wd(t,e,r,n){this.h=+t,this.s=+e,this.l=+r,this.opacity=+n}AR(wd,V$e,nie(Cw,{brighter(t){return t=t==null?WS:Math.pow(WS,t),new wd(this.h,this.s,this.l*t,this.opacity)},darker(t){return t=t==null?_2:Math.pow(_2,t),new wd(this.h,this.s,this.l*t,this.opacity)},rgb(){var t=this.h%360+(this.h<0)*360,e=isNaN(t)||isNaN(this.s)?0:this.s,r=this.l,n=r+(r<.5?r:1-r)*e,a=2*r-n;return new uc(EB(t>=240?t-240:t+120,a,n),EB(t,a,n),EB(t<120?t+240:t-120,a,n),this.opacity)},clamp(){return new wd(HK(this.h),zC(this.s),zC(this.l),XS(this.opacity))},displayable(){return(0<=this.s&&this.s<=1||isNaN(this.s))&&0<=this.l&&this.l<=1&&0<=this.opacity&&this.opacity<=1},formatHsl(){const t=XS(this.opacity);return`${t===1?"hsl(":"hsla("}${HK(this.h)}, ${zC(this.s)*100}%, ${zC(this.l)*100}%${t===1?")":`, ${t})`}`}}));function HK(t){return t=(t||0)%360,t<0?t+360:t}function zC(t){return Math.max(0,Math.min(1,t||0))}function EB(t,e,r){return(t<60?e+(r-e)*t/60:t<180?r:t<240?e+(r-e)*(240-t)/60:e)*255}const hR=t=>()=>t;function H$e(t,e){return function(r){return t+r*e}}function $$e(t,e,r){return t=Math.pow(t,r),e=Math.pow(e,r)-t,r=1/r,function(n){return Math.pow(t+n*e,r)}}function K$e(t){return(t=+t)==1?sie:function(e,r){return r-e?$$e(e,r,t):hR(isNaN(e)?r:e)}}function sie(t,e){var r=e-t;return r?H$e(t,r):hR(isNaN(t)?e:t)}const $K=function t(e){var r=K$e(e);function n(a,s){var i=r((a=Zk(a)).r,(s=Zk(s)).r),l=r(a.g,s.g),c=r(a.b,s.b),u=sie(a.opacity,s.opacity);return function(d){return a.r=i(d),a.g=l(d),a.b=c(d),a.opacity=u(d),a+""}}return n.gamma=t,n}(1);function G$e(t,e){e||(e=[]);var r=t?Math.min(e.length,t.length):0,n=e.slice(),a;return function(s){for(a=0;a<r;++a)n[a]=t[a]*(1-s)+e[a]*s;return n}}function q$e(t){return ArrayBuffer.isView(t)&&!(t instanceof DataView)}function z$e(t,e){var r=e?e.length:0,n=t?Math.min(r,t.length):0,a=new Array(n),s=new Array(r),i;for(i=0;i<n;++i)a[i]=Kv(t[i],e[i]);for(;i<r;++i)s[i]=e[i];return function(l){for(i=0;i<n;++i)s[i]=a[i](l);return s}}function W$e(t,e){var r=new Date;return t=+t,e=+e,function(n){return r.setTime(t*(1-n)+e*n),r}}function YS(t,e){return t=+t,e=+e,function(r){return t*(1-r)+e*r}}function X$e(t,e){var r={},n={},a;(t===null||typeof t!="object")&&(t={}),(e===null||typeof e!="object")&&(e={});for(a in e)a in t?r[a]=Kv(t[a],e[a]):n[a]=e[a];return function(s){for(a in r)n[a]=r[a](s);return n}}var eF=/[-+]?(?:\d+\.?\d*|\.?\d+)(?:[eE][-+]?\d+)?/g,SB=new RegExp(eF.source,"g");function Y$e(t){return function(){return t}}function J$e(t){return function(e){return t(e)+""}}function Z$e(t,e){var r=eF.lastIndex=SB.lastIndex=0,n,a,s,i=-1,l=[],c=[];for(t=t+"",e=e+"";(n=eF.exec(t))&&(a=SB.exec(e));)(s=a.index)>r&&(s=e.slice(r,s),l[i]?l[i]+=s:l[++i]=s),(n=n[0])===(a=a[0])?l[i]?l[i]+=a:l[++i]=a:(l[++i]=null,c.push({i,x:YS(n,a)})),r=SB.lastIndex;return r<e.length&&(s=e.slice(r),l[i]?l[i]+=s:l[++i]=s),l.length<2?c[0]?J$e(c[0].x):Y$e(e):(e=c.length,function(u){for(var d=0,f;d<e;++d)l[(f=c[d]).i]=f.x(u);return l.join("")})}function Kv(t,e){var r=typeof e,n;return e==null||r==="boolean"?hR(e):(r==="number"?YS:r==="string"?(n=S2(e))?(e=n,$K):Z$e:e instanceof S2?$K:e instanceof Date?W$e:q$e(e)?G$e:Array.isArray(e)?z$e:typeof e.valueOf!="function"&&typeof e.toString!="function"||isNaN(e)?X$e:YS)(t,e)}function mR(t,e){return t=+t,e=+e,function(r){return Math.round(t*(1-r)+e*r)}}function eKe(t,e){e===void 0&&(e=t,t=Kv);for(var r=0,n=e.length-1,a=e[0],s=new Array(n<0?0:n);r<n;)s[r]=t(a,a=e[++r]);return function(i){var l=Math.max(0,Math.min(n-1,Math.floor(i*=n)));return s[l](i-l)}}function tKe(t){return function(){return t}}function JS(t){return+t}var KK=[0,1];function Ll(t){return t}function tF(t,e){return(e-=t=+t)?function(r){return(r-t)/e}:tKe(isNaN(e)?NaN:.5)}function rKe(t,e){var r;return t>e&&(r=t,t=e,e=r),function(n){return Math.max(t,Math.min(e,n))}}function nKe(t,e,r){var n=t[0],a=t[1],s=e[0],i=e[1];return a<n?(n=tF(a,n),s=r(i,s)):(n=tF(n,a),s=r(s,i)),function(l){return s(n(l))}}function aKe(t,e,r){var n=Math.min(t.length,e.length)-1,a=new Array(n),s=new Array(n),i=-1;for(t[n]<t[0]&&(t=t.slice().reverse(),e=e.slice().reverse());++i<n;)a[i]=tF(t[i],t[i+1]),s[i]=r(e[i],e[i+1]);return function(l){var c=Nw(t,l,1,n)-1;return s[c](a[c](l))}}function _w(t,e){return e.domain(t.domain()).range(t.range()).interpolate(t.interpolate()).clamp(t.clamp()).unknown(t.unknown())}function f3(){var t=KK,e=KK,r=Kv,n,a,s,i=Ll,l,c,u;function d(){var h=Math.min(t.length,e.length);return i!==Ll&&(i=rKe(t[0],t[h-1])),l=h>2?aKe:nKe,c=u=null,f}function f(h){return h==null||isNaN(h=+h)?s:(c||(c=l(t.map(n),e,r)))(n(i(h)))}return f.invert=function(h){return i(a((u||(u=l(e,t.map(n),YS)))(h)))},f.domain=function(h){return arguments.length?(t=Array.from(h,JS),d()):t.slice()},f.range=function(h){return arguments.length?(e=Array.from(h),d()):e.slice()},f.rangeRound=function(h){return e=Array.from(h),r=mR,d()},f.clamp=function(h){return arguments.length?(i=h?!0:Ll,d()):i!==Ll},f.interpolate=function(h){return arguments.length?(r=h,d()):r},f.unknown=function(h){return arguments.length?(s=h,f):s},function(h,A){return n=h,a=A,d()}}function pR(){return f3()(Ll,Ll)}function sKe(t){return Math.abs(t=Math.round(t))>=1e21?t.toLocaleString("en").replace(/,/g,""):t.toString(10)}function ZS(t,e){if(!isFinite(t)||t===0)return null;var r=(t=e?t.toExponential(e-1):t.toExponential()).indexOf("e"),n=t.slice(0,r);return[n.length>1?n[0]+n.slice(2):n,+t.slice(r+1)]}function gv(t){return t=ZS(Math.abs(t)),t?t[1]:NaN}function iKe(t,e){return function(r,n){for(var a=r.length,s=[],i=0,l=t[0],c=0;a>0&&l>0&&(c+l+1>n&&(l=Math.max(1,n-c)),s.push(r.substring(a-=l,a+l)),!((c+=l+1)>n));)l=t[i=(i+1)%t.length];return s.reverse().join(e)}}function oKe(t){return function(e){return e.replace(/[0-9]/g,function(r){return t[+r]})}}var lKe=/^(?:(.)?([<>=^]))?([+\-( ])?([$#])?(0)?(\d+)?(,)?(\.\d+)?(~)?([a-z%])?$/i;function I2(t){if(!(e=lKe.exec(t)))throw new Error("invalid format: "+t);var e;return new gR({fill:e[1],align:e[2],sign:e[3],symbol:e[4],zero:e[5],width:e[6],comma:e[7],precision:e[8]&&e[8].slice(1),trim:e[9],type:e[10]})}I2.prototype=gR.prototype;function gR(t){this.fill=t.fill===void 0?" ":t.fill+"",this.align=t.align===void 0?">":t.align+"",this.sign=t.sign===void 0?"-":t.sign+"",this.symbol=t.symbol===void 0?"":t.symbol+"",this.zero=!!t.zero,this.width=t.width===void 0?void 0:+t.width,this.comma=!!t.comma,this.precision=t.precision===void 0?void 0:+t.precision,this.trim=!!t.trim,this.type=t.type===void 0?"":t.type+""}gR.prototype.toString=function(){return this.fill+this.align+this.sign+this.symbol+(this.zero?"0":"")+(this.width===void 0?"":Math.max(1,this.width|0))+(this.comma?",":"")+(this.precision===void 0?"":"."+Math.max(0,this.precision|0))+(this.trim?"~":"")+this.type};function cKe(t){e:for(var e=t.length,r=1,n=-1,a;r<e;++r)switch(t[r]){case".":n=a=r;break;case"0":n===0&&(n=r),a=r;break;default:if(!+t[r])break e;n>0&&(n=0);break}return n>0?t.slice(0,n)+t.slice(a+1):t}var eI;function uKe(t,e){var r=ZS(t,e);if(!r)return eI=void 0,t.toPrecision(e);var n=r[0],a=r[1],s=a-(eI=Math.max(-8,Math.min(8,Math.floor(a/3)))*3)+1,i=n.length;return s===i?n:s>i?n+new Array(s-i+1).join("0"):s>0?n.slice(0,s)+"."+n.slice(s):"0."+new Array(1-s).join("0")+ZS(t,Math.max(0,e+s-1))[0]}function GK(t,e){var r=ZS(t,e);if(!r)return t+"";var n=r[0],a=r[1];return a<0?"0."+new Array(-a).join("0")+n:n.length>a+1?n.slice(0,a+1)+"."+n.slice(a+1):n+new Array(a-n.length+2).join("0")}const qK={"%":(t,e)=>(t*100).toFixed(e),b:t=>Math.round(t).toString(2),c:t=>t+"",d:sKe,e:(t,e)=>t.toExponential(e),f:(t,e)=>t.toFixed(e),g:(t,e)=>t.toPrecision(e),o:t=>Math.round(t).toString(8),p:(t,e)=>GK(t*100,e),r:GK,s:uKe,X:t=>Math.round(t).toString(16).toUpperCase(),x:t=>Math.round(t).toString(16)};function zK(t){return t}var WK=Array.prototype.map,XK=["y","z","a","f","p","n","","m","","k","M","G","T","P","E","Z","Y"];function dKe(t){var e=t.grouping===void 0||t.thousands===void 0?zK:iKe(WK.call(t.grouping,Number),t.thousands+""),r=t.currency===void 0?"":t.currency[0]+"",n=t.currency===void 0?"":t.currency[1]+"",a=t.decimal===void 0?".":t.decimal+"",s=t.numerals===void 0?zK:oKe(WK.call(t.numerals,String)),i=t.percent===void 0?"%":t.percent+"",l=t.minus===void 0?"":t.minus+"",c=t.nan===void 0?"NaN":t.nan+"";function u(f,h){f=I2(f);var A=f.fill,m=f.align,p=f.sign,g=f.symbol,x=f.zero,y=f.width,b=f.comma,w=f.precision,j=f.trim,I=f.type;I==="n"?(b=!0,I="g"):qK[I]||(w===void 0&&(w=12),j=!0,I="g"),(x||A==="0"&&m==="=")&&(x=!0,A="0",m="=");var _=(h&&h.prefix!==void 0?h.prefix:"")+(g==="$"?r:g==="#"&&/[boxX]/.test(I)?"0"+I.toLowerCase():""),E=(g==="$"?n:/[%p]/.test(I)?i:"")+(h&&h.suffix!==void 0?h.suffix:""),S=qK[I],k=/[defgprs%]/.test(I);w=w===void 0?6:/[gprs]/.test(I)?Math.max(1,Math.min(21,w)):Math.max(0,Math.min(20,w));function P(T){var F=_,Y=E,he,ue,fe;if(I==="c")Y=S(T)+Y,T="";else{T=+T;var me=T<0||1/T<0;if(T=isNaN(T)?c:S(Math.abs(T),w),j&&(T=cKe(T)),me&&+T==0&&p!=="+"&&(me=!1),F=(me?p==="("?p:l:p==="-"||p==="("?"":p)+F,Y=(I==="s"&&!isNaN(T)&&eI!==void 0?XK[8+eI/3]:"")+Y+(me&&p==="("?")":""),k){for(he=-1,ue=T.length;++he<ue;)if(fe=T.charCodeAt(he),48>fe||fe>57){Y=(fe===46?a+T.slice(he+1):T.slice(he))+Y,T=T.slice(0,he);break}}}b&&!x&&(T=e(T,1/0));var ne=F.length+T.length+Y.length,Pe=ne<y?new Array(y-ne+1).join(A):"";switch(b&&x&&(T=e(Pe+T,Pe.length?y-Y.length:1/0),Pe=""),m){case"<":T=F+T+Y+Pe;break;case"=":T=F+Pe+T+Y;break;case"^":T=Pe.slice(0,ne=Pe.length>>1)+F+T+Y+Pe.slice(ne);break;default:T=Pe+F+T+Y;break}return s(T)}return P.toString=function(){return f+""},P}function d(f,h){var A=Math.max(-8,Math.min(8,Math.floor(gv(h)/3)))*3,m=Math.pow(10,-A),p=u((f=I2(f),f.type="f",f),{suffix:XK[8+A/3]});return function(g){return p(m*g)}}return{format:u,formatPrefix:d}}var WC,xR,iie;fKe({thousands:",",grouping:[3],currency:["$",""]});function fKe(t){return WC=dKe(t),xR=WC.format,iie=WC.formatPrefix,WC}function AKe(t){return Math.max(0,-gv(Math.abs(t)))}function hKe(t,e){return Math.max(0,Math.max(-8,Math.min(8,Math.floor(gv(e)/3)))*3-gv(Math.abs(t)))}function mKe(t,e){return t=Math.abs(t),e=Math.abs(e)-t,Math.max(0,gv(e)-gv(t))+1}function oie(t,e,r,n){var a=Yk(t,e,r),s;switch(n=I2(n??",f"),n.type){case"s":{var i=Math.max(Math.abs(t),Math.abs(e));return n.precision==null&&!isNaN(s=hKe(a,i))&&(n.precision=s),iie(n,i)}case"":case"e":case"g":case"p":case"r":{n.precision==null&&!isNaN(s=mKe(a,Math.max(Math.abs(t),Math.abs(e))))&&(n.precision=s-(n.type==="e"));break}case"f":case"%":{n.precision==null&&!isNaN(s=AKe(a))&&(n.precision=s-(n.type==="%")*2);break}}return xR(n)}function om(t){var e=t.domain;return t.ticks=function(r){var n=e();return Wk(n[0],n[n.length-1],r??10)},t.tickFormat=function(r,n){var a=e();return oie(a[0],a[a.length-1],r??10,n)},t.nice=function(r){r==null&&(r=10);var n=e(),a=0,s=n.length-1,i=n[a],l=n[s],c,u,d=10;for(l<i&&(u=i,i=l,l=u,u=a,a=s,s=u);d-- >0;){if(u=Xk(i,l,r),u===c)return n[a]=i,n[s]=l,e(n);if(u>0)i=Math.floor(i/u)*u,l=Math.ceil(l/u)*u;else if(u<0)i=Math.ceil(i*u)/u,l=Math.floor(l*u)/u;else break;c=u}return t},t}function lie(){var t=pR();return t.copy=function(){return _w(t,lie())},Ju.apply(t,arguments),om(t)}function cie(t){var e;function r(n){return n==null||isNaN(n=+n)?e:n}return r.invert=r,r.domain=r.range=function(n){return arguments.length?(t=Array.from(n,JS),r):t.slice()},r.unknown=function(n){return arguments.length?(e=n,r):e},r.copy=function(){return cie(t).unknown(e)},t=arguments.length?Array.from(t,JS):[0,1],om(r)}function uie(t,e){t=t.slice();var r=0,n=t.length-1,a=t[r],s=t[n],i;return s<a&&(i=r,r=n,n=i,i=a,a=s,s=i),t[r]=e.floor(a),t[n]=e.ceil(s),t}function YK(t){return Math.log(t)}function JK(t){return Math.exp(t)}function pKe(t){return-Math.log(-t)}function gKe(t){return-Math.exp(-t)}function xKe(t){return isFinite(t)?+("1e"+t):t<0?0:t}function vKe(t){return t===10?xKe:t===Math.E?Math.exp:e=>Math.pow(t,e)}function yKe(t){return t===Math.E?Math.log:t===10&&Math.log10||t===2&&Math.log2||(t=Math.log(t),e=>Math.log(e)/t)}function ZK(t){return(e,r)=>-t(-e,r)}function vR(t){const e=t(YK,JK),r=e.domain;let n=10,a,s;function i(){return a=yKe(n),s=vKe(n),r()[0]<0?(a=ZK(a),s=ZK(s),t(pKe,gKe)):t(YK,JK),e}return e.base=function(l){return arguments.length?(n=+l,i()):n},e.domain=function(l){return arguments.length?(r(l),i()):r()},e.ticks=l=>{const c=r();let u=c[0],d=c[c.length-1];const f=d<u;f&&([u,d]=[d,u]);let h=a(u),A=a(d),m,p;const g=l==null?10:+l;let x=[];if(!(n%1)&&A-h<g){if(h=Math.floor(h),A=Math.ceil(A),u>0){for(;h<=A;++h)for(m=1;m<n;++m)if(p=h<0?m/s(-h):m*s(h),!(p<u)){if(p>d)break;x.push(p)}}else for(;h<=A;++h)for(m=n-1;m>=1;--m)if(p=h>0?m/s(-h):m*s(h),!(p<u)){if(p>d)break;x.push(p)}x.length*2<g&&(x=Wk(u,d,g))}else x=Wk(h,A,Math.min(A-h,g)).map(s);return f?x.reverse():x},e.tickFormat=(l,c)=>{if(l==null&&(l=10),c==null&&(c=n===10?"s":","),typeof c!="function"&&(!(n%1)&&(c=I2(c)).precision==null&&(c.trim=!0),c=xR(c)),l===1/0)return c;const u=Math.max(1,n*l/e.ticks().length);return d=>{let f=d/s(Math.round(a(d)));return f*n<n-.5&&(f*=n),f<=u?c(d):""}},e.nice=()=>r(uie(r(),{floor:l=>s(Math.floor(a(l))),ceil:l=>s(Math.ceil(a(l)))})),e}function die(){const t=vR(f3()).domain([1,10]);return t.copy=()=>_w(t,die()).base(t.base()),Ju.apply(t,arguments),t}function eG(t){return function(e){return Math.sign(e)*Math.log1p(Math.abs(e/t))}}function tG(t){return function(e){return Math.sign(e)*Math.expm1(Math.abs(e))*t}}function yR(t){var e=1,r=t(eG(e),tG(e));return r.constant=function(n){return arguments.length?t(eG(e=+n),tG(e)):e},om(r)}function fie(){var t=yR(f3());return t.copy=function(){return _w(t,fie()).constant(t.constant())},Ju.apply(t,arguments)}function rG(t){return function(e){return e<0?-Math.pow(-e,t):Math.pow(e,t)}}function bKe(t){return t<0?-Math.sqrt(-t):Math.sqrt(t)}function wKe(t){return t<0?-t*t:t*t}function bR(t){var e=t(Ll,Ll),r=1;function n(){return r===1?t(Ll,Ll):r===.5?t(bKe,wKe):t(rG(r),rG(1/r))}return e.exponent=function(a){return arguments.length?(r=+a,n()):r},om(e)}function wR(){var t=bR(f3());return t.copy=function(){return _w(t,wR()).exponent(t.exponent())},Ju.apply(t,arguments),t}function NKe(){return wR.apply(null,arguments).exponent(.5)}function nG(t){return Math.sign(t)*t*t}function CKe(t){return Math.sign(t)*Math.sqrt(Math.abs(t))}function Aie(){var t=pR(),e=[0,1],r=!1,n;function a(s){var i=CKe(t(s));return isNaN(i)?n:r?Math.round(i):i}return a.invert=function(s){return t.invert(nG(s))},a.domain=function(s){return arguments.length?(t.domain(s),a):t.domain()},a.range=function(s){return arguments.length?(t.range((e=Array.from(s,JS)).map(nG)),a):e.slice()},a.rangeRound=function(s){return a.range(s).round(!0)},a.round=function(s){return arguments.length?(r=!!s,a):r},a.clamp=function(s){return arguments.length?(t.clamp(s),a):t.clamp()},a.unknown=function(s){return arguments.length?(n=s,a):n},a.copy=function(){return Aie(t.domain(),e).round(r).clamp(t.clamp()).unknown(n)},Ju.apply(a,arguments),om(a)}function hie(){var t=[],e=[],r=[],n;function a(){var i=0,l=Math.max(1,e.length);for(r=new Array(l-1);++i<l;)r[i-1]=I$e(t,i/l);return s}function s(i){return i==null||isNaN(i=+i)?n:e[Nw(r,i)]}return s.invertExtent=function(i){var l=e.indexOf(i);return l<0?[NaN,NaN]:[l>0?r[l-1]:t[0],l<r.length?r[l]:t[t.length-1]]},s.domain=function(i){if(!arguments.length)return t.slice();t=[];for(let l of i)l!=null&&!isNaN(l=+l)&&t.push(l);return t.sort(F0),a()},s.range=function(i){return arguments.length?(e=Array.from(i),a()):e.slice()},s.unknown=function(i){return arguments.length?(n=i,s):n},s.quantiles=function(){return r.slice()},s.copy=function(){return hie().domain(t).range(e).unknown(n)},Ju.apply(s,arguments)}function mie(){var t=0,e=1,r=1,n=[.5],a=[0,1],s;function i(c){return c!=null&&c<=c?a[Nw(n,c,0,r)]:s}function l(){var c=-1;for(n=new Array(r);++c<r;)n[c]=((c+1)*e-(c-r)*t)/(r+1);return i}return i.domain=function(c){return arguments.length?([t,e]=c,t=+t,e=+e,l()):[t,e]},i.range=function(c){return arguments.length?(r=(a=Array.from(c)).length-1,l()):a.slice()},i.invertExtent=function(c){var u=a.indexOf(c);return u<0?[NaN,NaN]:u<1?[t,n[0]]:u>=r?[n[r-1],e]:[n[u-1],n[u]]},i.unknown=function(c){return arguments.length&&(s=c),i},i.thresholds=function(){return n.slice()},i.copy=function(){return mie().domain([t,e]).range(a).unknown(s)},Ju.apply(om(i),arguments)}function pie(){var t=[.5],e=[0,1],r,n=1;function a(s){return s!=null&&s<=s?e[Nw(t,s,0,n)]:r}return a.domain=function(s){return arguments.length?(t=Array.from(s),n=Math.min(t.length,e.length-1),a):t.slice()},a.range=function(s){return arguments.length?(e=Array.from(s),n=Math.min(t.length,e.length-1),a):e.slice()},a.invertExtent=function(s){var i=e.indexOf(s);return[t[i-1],t[i]]},a.unknown=function(s){return arguments.length?(r=s,a):r},a.copy=function(){return pie().domain(t).range(e).unknown(r)},Ju.apply(a,arguments)}const IB=new Date,jB=new Date;function Wi(t,e,r,n){function a(s){return t(s=arguments.length===0?new Date:new Date(+s)),s}return a.floor=s=>(t(s=new Date(+s)),s),a.ceil=s=>(t(s=new Date(s-1)),e(s,1),t(s),s),a.round=s=>{const i=a(s),l=a.ceil(s);return s-i<l-s?i:l},a.offset=(s,i)=>(e(s=new Date(+s),i==null?1:Math.floor(i)),s),a.range=(s,i,l)=>{const c=[];if(s=a.ceil(s),l=l==null?1:Math.floor(l),!(s<i)||!(l>0))return c;let u;do c.push(u=new Date(+s)),e(s,l),t(s);while(u<s&&s<i);return c},a.filter=s=>Wi(i=>{if(i>=i)for(;t(i),!s(i);)i.setTime(i-1)},(i,l)=>{if(i>=i)if(l<0)for(;++l<=0;)for(;e(i,-1),!s(i););else for(;--l>=0;)for(;e(i,1),!s(i););}),r&&(a.count=(s,i)=>(IB.setTime(+s),jB.setTime(+i),t(IB),t(jB),Math.floor(r(IB,jB))),a.every=s=>(s=Math.floor(s),!isFinite(s)||!(s>0)?null:s>1?a.filter(n?i=>n(i)%s===0:i=>a.count(0,i)%s===0):a)),a}const tI=Wi(()=>{},(t,e)=>{t.setTime(+t+e)},(t,e)=>e-t);tI.every=t=>(t=Math.floor(t),!isFinite(t)||!(t>0)?null:t>1?Wi(e=>{e.setTime(Math.floor(e/t)*t)},(e,r)=>{e.setTime(+e+r*t)},(e,r)=>(r-e)/t):tI);tI.range;const xA=1e3,Lu=xA*60,vA=Lu*60,HA=vA*24,NR=HA*7,aG=HA*30,BB=HA*365,Jm=Wi(t=>{t.setTime(t-t.getMilliseconds())},(t,e)=>{t.setTime(+t+e*xA)},(t,e)=>(e-t)/xA,t=>t.getUTCSeconds());Jm.range;const CR=Wi(t=>{t.setTime(t-t.getMilliseconds()-t.getSeconds()*xA)},(t,e)=>{t.setTime(+t+e*Lu)},(t,e)=>(e-t)/Lu,t=>t.getMinutes());CR.range;const _R=Wi(t=>{t.setUTCSeconds(0,0)},(t,e)=>{t.setTime(+t+e*Lu)},(t,e)=>(e-t)/Lu,t=>t.getUTCMinutes());_R.range;const ER=Wi(t=>{t.setTime(t-t.getMilliseconds()-t.getSeconds()*xA-t.getMinutes()*Lu)},(t,e)=>{t.setTime(+t+e*vA)},(t,e)=>(e-t)/vA,t=>t.getHours());ER.range;const SR=Wi(t=>{t.setUTCMinutes(0,0,0)},(t,e)=>{t.setTime(+t+e*vA)},(t,e)=>(e-t)/vA,t=>t.getUTCHours());SR.range;const Ew=Wi(t=>t.setHours(0,0,0,0),(t,e)=>t.setDate(t.getDate()+e),(t,e)=>(e-t-(e.getTimezoneOffset()-t.getTimezoneOffset())*Lu)/HA,t=>t.getDate()-1);Ew.range;const A3=Wi(t=>{t.setUTCHours(0,0,0,0)},(t,e)=>{t.setUTCDate(t.getUTCDate()+e)},(t,e)=>(e-t)/HA,t=>t.getUTCDate()-1);A3.range;const gie=Wi(t=>{t.setUTCHours(0,0,0,0)},(t,e)=>{t.setUTCDate(t.getUTCDate()+e)},(t,e)=>(e-t)/HA,t=>Math.floor(t/HA));gie.range;function fg(t){return Wi(e=>{e.setDate(e.getDate()-(e.getDay()+7-t)%7),e.setHours(0,0,0,0)},(e,r)=>{e.setDate(e.getDate()+r*7)},(e,r)=>(r-e-(r.getTimezoneOffset()-e.getTimezoneOffset())*Lu)/NR)}const h3=fg(0),rI=fg(1),_Ke=fg(2),EKe=fg(3),xv=fg(4),SKe=fg(5),IKe=fg(6);h3.range;rI.range;_Ke.range;EKe.range;xv.range;SKe.range;IKe.range;function Ag(t){return Wi(e=>{e.setUTCDate(e.getUTCDate()-(e.getUTCDay()+7-t)%7),e.setUTCHours(0,0,0,0)},(e,r)=>{e.setUTCDate(e.getUTCDate()+r*7)},(e,r)=>(r-e)/NR)}const m3=Ag(0),nI=Ag(1),jKe=Ag(2),BKe=Ag(3),vv=Ag(4),PKe=Ag(5),TKe=Ag(6);m3.range;nI.range;jKe.range;BKe.range;vv.range;PKe.range;TKe.range;const IR=Wi(t=>{t.setDate(1),t.setHours(0,0,0,0)},(t,e)=>{t.setMonth(t.getMonth()+e)},(t,e)=>e.getMonth()-t.getMonth()+(e.getFullYear()-t.getFullYear())*12,t=>t.getMonth());IR.range;const jR=Wi(t=>{t.setUTCDate(1),t.setUTCHours(0,0,0,0)},(t,e)=>{t.setUTCMonth(t.getUTCMonth()+e)},(t,e)=>e.getUTCMonth()-t.getUTCMonth()+(e.getUTCFullYear()-t.getUTCFullYear())*12,t=>t.getUTCMonth());jR.range;const $A=Wi(t=>{t.setMonth(0,1),t.setHours(0,0,0,0)},(t,e)=>{t.setFullYear(t.getFullYear()+e)},(t,e)=>e.getFullYear()-t.getFullYear(),t=>t.getFullYear());$A.every=t=>!isFinite(t=Math.floor(t))||!(t>0)?null:Wi(e=>{e.setFullYear(Math.floor(e.getFullYear()/t)*t),e.setMonth(0,1),e.setHours(0,0,0,0)},(e,r)=>{e.setFullYear(e.getFullYear()+r*t)});$A.range;const KA=Wi(t=>{t.setUTCMonth(0,1),t.setUTCHours(0,0,0,0)},(t,e)=>{t.setUTCFullYear(t.getUTCFullYear()+e)},(t,e)=>e.getUTCFullYear()-t.getUTCFullYear(),t=>t.getUTCFullYear());KA.every=t=>!isFinite(t=Math.floor(t))||!(t>0)?null:Wi(e=>{e.setUTCFullYear(Math.floor(e.getUTCFullYear()/t)*t),e.setUTCMonth(0,1),e.setUTCHours(0,0,0,0)},(e,r)=>{e.setUTCFullYear(e.getUTCFullYear()+r*t)});KA.range;function xie(t,e,r,n,a,s){const i=[[Jm,1,xA],[Jm,5,5*xA],[Jm,15,15*xA],[Jm,30,30*xA],[s,1,Lu],[s,5,5*Lu],[s,15,15*Lu],[s,30,30*Lu],[a,1,vA],[a,3,3*vA],[a,6,6*vA],[a,12,12*vA],[n,1,HA],[n,2,2*HA],[r,1,NR],[e,1,aG],[e,3,3*aG],[t,1,BB]];function l(u,d,f){const h=d<u;h&&([u,d]=[d,u]);const A=f&&typeof f.range=="function"?f:c(u,d,f),m=A?A.range(u,+d+1):[];return h?m.reverse():m}function c(u,d,f){const h=Math.abs(d-u)/f,A=uR(([,,g])=>g).right(i,h);if(A===i.length)return t.every(Yk(u/BB,d/BB,f));if(A===0)return tI.every(Math.max(Yk(u,d,f),1));const[m,p]=i[h/i[A-1][2]<i[A][2]/h?A-1:A];return m.every(p)}return[l,c]}const[kKe,FKe]=xie(KA,jR,m3,gie,SR,_R),[OKe,DKe]=xie($A,IR,h3,Ew,ER,CR);function PB(t){if(0<=t.y&&t.y<100){var e=new Date(-1,t.m,t.d,t.H,t.M,t.S,t.L);return e.setFullYear(t.y),e}return new Date(t.y,t.m,t.d,t.H,t.M,t.S,t.L)}function TB(t){if(0<=t.y&&t.y<100){var e=new Date(Date.UTC(-1,t.m,t.d,t.H,t.M,t.S,t.L));return e.setUTCFullYear(t.y),e}return new Date(Date.UTC(t.y,t.m,t.d,t.H,t.M,t.S,t.L))}function Y1(t,e,r){return{y:t,m:e,d:r,H:0,M:0,S:0,L:0}}function RKe(t){var e=t.dateTime,r=t.date,n=t.time,a=t.periods,s=t.days,i=t.shortDays,l=t.months,c=t.shortMonths,u=J1(a),d=Z1(a),f=J1(s),h=Z1(s),A=J1(i),m=Z1(i),p=J1(l),g=Z1(l),x=J1(c),y=Z1(c),b={a:fe,A:me,b:ne,B:Pe,c:null,d:uG,e:uG,f:iGe,g:pGe,G:xGe,H:nGe,I:aGe,j:sGe,L:vie,m:oGe,M:lGe,p:Ie,q:O,Q:AG,s:hG,S:cGe,u:uGe,U:dGe,V:fGe,w:AGe,W:hGe,x:null,X:null,y:mGe,Y:gGe,Z:vGe,"%":fG},w={a:H,A:R,b:M,B:K,c:null,d:dG,e:dG,f:NGe,g:kGe,G:OGe,H:yGe,I:bGe,j:wGe,L:bie,m:CGe,M:_Ge,p:W,q:D,Q:AG,s:hG,S:EGe,u:SGe,U:IGe,V:jGe,w:BGe,W:PGe,x:null,X:null,y:TGe,Y:FGe,Z:DGe,"%":fG},j={a:k,A:P,b:T,B:F,c:Y,d:lG,e:lG,f:ZKe,g:oG,G:iG,H:cG,I:cG,j:WKe,L:JKe,m:zKe,M:XKe,p:S,q:qKe,Q:tGe,s:rGe,S:YKe,u:VKe,U:HKe,V:$Ke,w:QKe,W:KKe,x:he,X:ue,y:oG,Y:iG,Z:GKe,"%":eGe};b.x=I(r,b),b.X=I(n,b),b.c=I(e,b),w.x=I(r,w),w.X=I(n,w),w.c=I(e,w);function I(L,Z){return function(ge){var U=[],Ge=-1,ie=0,J=L.length,je,z,Ae;for(ge instanceof Date||(ge=new Date(+ge));++Ge<J;)L.charCodeAt(Ge)===37&&(U.push(L.slice(ie,Ge)),(z=sG[je=L.charAt(++Ge)])!=null?je=L.charAt(++Ge):z=je==="e"?" ":"0",(Ae=Z[je])&&(je=Ae(ge,z)),U.push(je),ie=Ge+1);return U.push(L.slice(ie,Ge)),U.join("")}}function _(L,Z){return function(ge){var U=Y1(1900,void 0,1),Ge=E(U,L,ge+="",0),ie,J;if(Ge!=ge.length)return null;if("Q"in U)return new Date(U.Q);if("s"in U)return new Date(U.s*1e3+("L"in U?U.L:0));if(Z&&!("Z"in U)&&(U.Z=0),"p"in U&&(U.H=U.H%12+U.p*12),U.m===void 0&&(U.m="q"in U?U.q:0),"V"in U){if(U.V<1||U.V>53)return null;"w"in U||(U.w=1),"Z"in U?(ie=TB(Y1(U.y,0,1)),J=ie.getUTCDay(),ie=J>4||J===0?nI.ceil(ie):nI(ie),ie=A3.offset(ie,(U.V-1)*7),U.y=ie.getUTCFullYear(),U.m=ie.getUTCMonth(),U.d=ie.getUTCDate()+(U.w+6)%7):(ie=PB(Y1(U.y,0,1)),J=ie.getDay(),ie=J>4||J===0?rI.ceil(ie):rI(ie),ie=Ew.offset(ie,(U.V-1)*7),U.y=ie.getFullYear(),U.m=ie.getMonth(),U.d=ie.getDate()+(U.w+6)%7)}else("W"in U||"U"in U)&&("w"in U||(U.w="u"in U?U.u%7:"W"in U?1:0),J="Z"in U?TB(Y1(U.y,0,1)).getUTCDay():PB(Y1(U.y,0,1)).getDay(),U.m=0,U.d="W"in U?(U.w+6)%7+U.W*7-(J+5)%7:U.w+U.U*7-(J+6)%7);return"Z"in U?(U.H+=U.Z/100|0,U.M+=U.Z%100,TB(U)):PB(U)}}function E(L,Z,ge,U){for(var Ge=0,ie=Z.length,J=ge.length,je,z;Ge<ie;){if(U>=J)return-1;if(je=Z.charCodeAt(Ge++),je===37){if(je=Z.charAt(Ge++),z=j[je in sG?Z.charAt(Ge++):je],!z||(U=z(L,ge,U))<0)return-1}else if(je!=ge.charCodeAt(U++))return-1}return U}function S(L,Z,ge){var U=u.exec(Z.slice(ge));return U?(L.p=d.get(U[0].toLowerCase()),ge+U[0].length):-1}function k(L,Z,ge){var U=A.exec(Z.slice(ge));return U?(L.w=m.get(U[0].toLowerCase()),ge+U[0].length):-1}function P(L,Z,ge){var U=f.exec(Z.slice(ge));return U?(L.w=h.get(U[0].toLowerCase()),ge+U[0].length):-1}function T(L,Z,ge){var U=x.exec(Z.slice(ge));return U?(L.m=y.get(U[0].toLowerCase()),ge+U[0].length):-1}function F(L,Z,ge){var U=p.exec(Z.slice(ge));return U?(L.m=g.get(U[0].toLowerCase()),ge+U[0].length):-1}function Y(L,Z,ge){return E(L,e,Z,ge)}function he(L,Z,ge){return E(L,r,Z,ge)}function ue(L,Z,ge){return E(L,n,Z,ge)}function fe(L){return i[L.getDay()]}function me(L){return s[L.getDay()]}function ne(L){return c[L.getMonth()]}function Pe(L){return l[L.getMonth()]}function Ie(L){return a[+(L.getHours()>=12)]}function O(L){return 1+~~(L.getMonth()/3)}function H(L){return i[L.getUTCDay()]}function R(L){return s[L.getUTCDay()]}function M(L){return c[L.getUTCMonth()]}function K(L){return l[L.getUTCMonth()]}function W(L){return a[+(L.getUTCHours()>=12)]}function D(L){return 1+~~(L.getUTCMonth()/3)}return{format:function(L){var Z=I(L+="",b);return Z.toString=function(){return L},Z},parse:function(L){var Z=_(L+="",!1);return Z.toString=function(){return L},Z},utcFormat:function(L){var Z=I(L+="",w);return Z.toString=function(){return L},Z},utcParse:function(L){var Z=_(L+="",!0);return Z.toString=function(){return L},Z}}}var sG={"-":"",_:" ",0:"0"},yo=/^\s*\d+/,MKe=/^%/,LKe=/[\\^$*+?|[\]().{}]/g;function ta(t,e,r){var n=t<0?"-":"",a=(n?-t:t)+"",s=a.length;return n+(s<r?new Array(r-s+1).join(e)+a:a)}function UKe(t){return t.replace(LKe,"\\$&")}function J1(t){return new RegExp("^(?:"+t.map(UKe).join("|")+")","i")}function Z1(t){return new Map(t.map((e,r)=>[e.toLowerCase(),r]))}function QKe(t,e,r){var n=yo.exec(e.slice(r,r+1));return n?(t.w=+n[0],r+n[0].length):-1}function VKe(t,e,r){var n=yo.exec(e.slice(r,r+1));return n?(t.u=+n[0],r+n[0].length):-1}function HKe(t,e,r){var n=yo.exec(e.slice(r,r+2));return n?(t.U=+n[0],r+n[0].length):-1}function $Ke(t,e,r){var n=yo.exec(e.slice(r,r+2));return n?(t.V=+n[0],r+n[0].length):-1}function KKe(t,e,r){var n=yo.exec(e.slice(r,r+2));return n?(t.W=+n[0],r+n[0].length):-1}function iG(t,e,r){var n=yo.exec(e.slice(r,r+4));return n?(t.y=+n[0],r+n[0].length):-1}function oG(t,e,r){var n=yo.exec(e.slice(r,r+2));return n?(t.y=+n[0]+(+n[0]>68?1900:2e3),r+n[0].length):-1}function GKe(t,e,r){var n=/^(Z)|([+-]\d\d)(?::?(\d\d))?/.exec(e.slice(r,r+6));return n?(t.Z=n[1]?0:-(n[2]+(n[3]||"00")),r+n[0].length):-1}function qKe(t,e,r){var n=yo.exec(e.slice(r,r+1));return n?(t.q=n[0]*3-3,r+n[0].length):-1}function zKe(t,e,r){var n=yo.exec(e.slice(r,r+2));return n?(t.m=n[0]-1,r+n[0].length):-1}function lG(t,e,r){var n=yo.exec(e.slice(r,r+2));return n?(t.d=+n[0],r+n[0].length):-1}function WKe(t,e,r){var n=yo.exec(e.slice(r,r+3));return n?(t.m=0,t.d=+n[0],r+n[0].length):-1}function cG(t,e,r){var n=yo.exec(e.slice(r,r+2));return n?(t.H=+n[0],r+n[0].length):-1}function XKe(t,e,r){var n=yo.exec(e.slice(r,r+2));return n?(t.M=+n[0],r+n[0].length):-1}function YKe(t,e,r){var n=yo.exec(e.slice(r,r+2));return n?(t.S=+n[0],r+n[0].length):-1}function JKe(t,e,r){var n=yo.exec(e.slice(r,r+3));return n?(t.L=+n[0],r+n[0].length):-1}function ZKe(t,e,r){var n=yo.exec(e.slice(r,r+6));return n?(t.L=Math.floor(n[0]/1e3),r+n[0].length):-1}function eGe(t,e,r){var n=MKe.exec(e.slice(r,r+1));return n?r+n[0].length:-1}function tGe(t,e,r){var n=yo.exec(e.slice(r));return n?(t.Q=+n[0],r+n[0].length):-1}function rGe(t,e,r){var n=yo.exec(e.slice(r));return n?(t.s=+n[0],r+n[0].length):-1}function uG(t,e){return ta(t.getDate(),e,2)}function nGe(t,e){return ta(t.getHours(),e,2)}function aGe(t,e){return ta(t.getHours()%12||12,e,2)}function sGe(t,e){return ta(1+Ew.count($A(t),t),e,3)}function vie(t,e){return ta(t.getMilliseconds(),e,3)}function iGe(t,e){return vie(t,e)+"000"}function oGe(t,e){return ta(t.getMonth()+1,e,2)}function lGe(t,e){return ta(t.getMinutes(),e,2)}function cGe(t,e){return ta(t.getSeconds(),e,2)}function uGe(t){var e=t.getDay();return e===0?7:e}function dGe(t,e){return ta(h3.count($A(t)-1,t),e,2)}function yie(t){var e=t.getDay();return e>=4||e===0?xv(t):xv.ceil(t)}function fGe(t,e){return t=yie(t),ta(xv.count($A(t),t)+($A(t).getDay()===4),e,2)}function AGe(t){return t.getDay()}function hGe(t,e){return ta(rI.count($A(t)-1,t),e,2)}function mGe(t,e){return ta(t.getFullYear()%100,e,2)}function pGe(t,e){return t=yie(t),ta(t.getFullYear()%100,e,2)}function gGe(t,e){return ta(t.getFullYear()%1e4,e,4)}function xGe(t,e){var r=t.getDay();return t=r>=4||r===0?xv(t):xv.ceil(t),ta(t.getFullYear()%1e4,e,4)}function vGe(t){var e=t.getTimezoneOffset();return(e>0?"-":(e*=-1,"+"))+ta(e/60|0,"0",2)+ta(e%60,"0",2)}function dG(t,e){return ta(t.getUTCDate(),e,2)}function yGe(t,e){return ta(t.getUTCHours(),e,2)}function bGe(t,e){return ta(t.getUTCHours()%12||12,e,2)}function wGe(t,e){return ta(1+A3.count(KA(t),t),e,3)}function bie(t,e){return ta(t.getUTCMilliseconds(),e,3)}function NGe(t,e){return bie(t,e)+"000"}function CGe(t,e){return ta(t.getUTCMonth()+1,e,2)}function _Ge(t,e){return ta(t.getUTCMinutes(),e,2)}function EGe(t,e){return ta(t.getUTCSeconds(),e,2)}function SGe(t){var e=t.getUTCDay();return e===0?7:e}function IGe(t,e){return ta(m3.count(KA(t)-1,t),e,2)}function wie(t){var e=t.getUTCDay();return e>=4||e===0?vv(t):vv.ceil(t)}function jGe(t,e){return t=wie(t),ta(vv.count(KA(t),t)+(KA(t).getUTCDay()===4),e,2)}function BGe(t){return t.getUTCDay()}function PGe(t,e){return ta(nI.count(KA(t)-1,t),e,2)}function TGe(t,e){return ta(t.getUTCFullYear()%100,e,2)}function kGe(t,e){return t=wie(t),ta(t.getUTCFullYear()%100,e,2)}function FGe(t,e){return ta(t.getUTCFullYear()%1e4,e,4)}function OGe(t,e){var r=t.getUTCDay();return t=r>=4||r===0?vv(t):vv.ceil(t),ta(t.getUTCFullYear()%1e4,e,4)}function DGe(){return"+0000"}function fG(){return"%"}function AG(t){return+t}function hG(t){return Math.floor(+t/1e3)}var Gg,Nie,Cie;RGe({dateTime:"%x, %X",date:"%-m/%-d/%Y",time:"%-I:%M:%S %p",periods:["AM","PM"],days:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],shortDays:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],months:["January","February","March","April","May","June","July","August","September","October","November","December"],shortMonths:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"]});function RGe(t){return Gg=RKe(t),Nie=Gg.format,Gg.parse,Cie=Gg.utcFormat,Gg.utcParse,Gg}function MGe(t){return new Date(t)}function LGe(t){return t instanceof Date?+t:+new Date(+t)}function BR(t,e,r,n,a,s,i,l,c,u){var d=pR(),f=d.invert,h=d.domain,A=u(".%L"),m=u(":%S"),p=u("%I:%M"),g=u("%I %p"),x=u("%a %d"),y=u("%b %d"),b=u("%B"),w=u("%Y");function j(I){return(c(I)<I?A:l(I)<I?m:i(I)<I?p:s(I)<I?g:n(I)<I?a(I)<I?x:y:r(I)<I?b:w)(I)}return d.invert=function(I){return new Date(f(I))},d.domain=function(I){return arguments.length?h(Array.from(I,LGe)):h().map(MGe)},d.ticks=function(I){var _=h();return t(_[0],_[_.length-1],I??10)},d.tickFormat=function(I,_){return _==null?j:u(_)},d.nice=function(I){var _=h();return(!I||typeof I.range!="function")&&(I=e(_[0],_[_.length-1],I??10)),I?h(uie(_,I)):d},d.copy=function(){return _w(d,BR(t,e,r,n,a,s,i,l,c,u))},d}function UGe(){return Ju.apply(BR(OKe,DKe,$A,IR,h3,Ew,ER,CR,Jm,Nie).domain([new Date(2e3,0,1),new Date(2e3,0,2)]),arguments)}function QGe(){return Ju.apply(BR(kKe,FKe,KA,jR,m3,A3,SR,_R,Jm,Cie).domain([Date.UTC(2e3,0,1),Date.UTC(2e3,0,2)]),arguments)}function p3(){var t=0,e=1,r,n,a,s,i=Ll,l=!1,c;function u(f){return f==null||isNaN(f=+f)?c:i(a===0?.5:(f=(s(f)-r)*a,l?Math.max(0,Math.min(1,f)):f))}u.domain=function(f){return arguments.length?([t,e]=f,r=s(t=+t),n=s(e=+e),a=r===n?0:1/(n-r),u):[t,e]},u.clamp=function(f){return arguments.length?(l=!!f,u):l},u.interpolator=function(f){return arguments.length?(i=f,u):i};function d(f){return function(h){var A,m;return arguments.length?([A,m]=h,i=f(A,m),u):[i(0),i(1)]}}return u.range=d(Kv),u.rangeRound=d(mR),u.unknown=function(f){return arguments.length?(c=f,u):c},function(f){return s=f,r=f(t),n=f(e),a=r===n?0:1/(n-r),u}}function lm(t,e){return e.domain(t.domain()).interpolator(t.interpolator()).clamp(t.clamp()).unknown(t.unknown())}function _ie(){var t=om(p3()(Ll));return t.copy=function(){return lm(t,_ie())},ih.apply(t,arguments)}function Eie(){var t=vR(p3()).domain([1,10]);return t.copy=function(){return lm(t,Eie()).base(t.base())},ih.apply(t,arguments)}function Sie(){var t=yR(p3());return t.copy=function(){return lm(t,Sie()).constant(t.constant())},ih.apply(t,arguments)}function PR(){var t=bR(p3());return t.copy=function(){return lm(t,PR()).exponent(t.exponent())},ih.apply(t,arguments)}function VGe(){return PR.apply(null,arguments).exponent(.5)}function Iie(){var t=[],e=Ll;function r(n){if(n!=null&&!isNaN(n=+n))return e((Nw(t,n,1)-1)/(t.length-1))}return r.domain=function(n){if(!arguments.length)return t.slice();t=[];for(let a of n)a!=null&&!isNaN(a=+a)&&t.push(a);return t.sort(F0),r},r.interpolator=function(n){return arguments.length?(e=n,r):e},r.range=function(){return t.map((n,a)=>e(a/(t.length-1)))},r.quantiles=function(n){return Array.from({length:n+1},(a,s)=>S$e(t,s/n))},r.copy=function(){return Iie(e).domain(t)},ih.apply(r,arguments)}function g3(){var t=0,e=.5,r=1,n=1,a,s,i,l,c,u=Ll,d,f=!1,h;function A(p){return isNaN(p=+p)?h:(p=.5+((p=+d(p))-s)*(n*p<n*s?l:c),u(f?Math.max(0,Math.min(1,p)):p))}A.domain=function(p){return arguments.length?([t,e,r]=p,a=d(t=+t),s=d(e=+e),i=d(r=+r),l=a===s?0:.5/(s-a),c=s===i?0:.5/(i-s),n=s<a?-1:1,A):[t,e,r]},A.clamp=function(p){return arguments.length?(f=!!p,A):f},A.interpolator=function(p){return arguments.length?(u=p,A):u};function m(p){return function(g){var x,y,b;return arguments.length?([x,y,b]=g,u=eKe(p,[x,y,b]),A):[u(0),u(.5),u(1)]}}return A.range=m(Kv),A.rangeRound=m(mR),A.unknown=function(p){return arguments.length?(h=p,A):h},function(p){return d=p,a=p(t),s=p(e),i=p(r),l=a===s?0:.5/(s-a),c=s===i?0:.5/(i-s),n=s<a?-1:1,A}}function jie(){var t=om(g3()(Ll));return t.copy=function(){return lm(t,jie())},ih.apply(t,arguments)}function Bie(){var t=vR(g3()).domain([.1,1,10]);return t.copy=function(){return lm(t,Bie()).base(t.base())},ih.apply(t,arguments)}function Pie(){var t=yR(g3());return t.copy=function(){return lm(t,Pie()).constant(t.constant())},ih.apply(t,arguments)}function TR(){var t=bR(g3());return t.copy=function(){return lm(t,TR()).exponent(t.exponent())},ih.apply(t,arguments)}function HGe(){return TR.apply(null,arguments).exponent(.5)}const Ey=Object.freeze(Object.defineProperty({__proto__:null,scaleBand:fR,scaleDiverging:jie,scaleDivergingLog:Bie,scaleDivergingPow:TR,scaleDivergingSqrt:HGe,scaleDivergingSymlog:Pie,scaleIdentity:cie,scaleImplicit:Jk,scaleLinear:lie,scaleLog:die,scaleOrdinal:dR,scalePoint:B$e,scalePow:wR,scaleQuantile:hie,scaleQuantize:mie,scaleRadial:Aie,scaleSequential:_ie,scaleSequentialLog:Eie,scaleSequentialPow:PR,scaleSequentialQuantile:Iie,scaleSequentialSqrt:VGe,scaleSequentialSymlog:Sie,scaleSqrt:NKe,scaleSymlog:fie,scaleThreshold:pie,scaleTime:UGe,scaleUtc:QGe,tickFormat:oie},Symbol.toStringTag,{value:"Module"}));var oh=t=>t.chartData,x3=Rt([oh],t=>{var e=t.chartData!=null?t.chartData.length-1:0;return{chartData:t.chartData,computedData:t.computedData,dataEndIndex:e,dataStartIndex:0}}),Tie=(t,e,r,n)=>n?x3(t):oh(t),$Ge=(t,e,r)=>r?x3(t):oh(t);function X0(t){if(Array.isArray(t)&&t.length===2){var[e,r]=t;if(Os(e)&&Os(r))return!0}return!1}function mG(t,e,r){return r?t:[Math.min(t[0],e[0]),Math.max(t[1],e[1])]}function kie(t,e){if(e&&typeof t!="function"&&Array.isArray(t)&&t.length===2){var[r,n]=t,a,s;if(Os(r))a=r;else if(typeof r=="function")return;if(Os(n))s=n;else if(typeof n=="function")return;var i=[a,s];if(X0(i))return i}}function KGe(t,e,r){if(!(!r&&e==null)){if(typeof t=="function"&&e!=null)try{var n=t(e,r);if(X0(n))return mG(n,e,r)}catch{}if(Array.isArray(t)&&t.length===2){var[a,s]=t,i,l;if(a==="auto")e!=null&&(i=Math.min(...e));else if(Wr(a))i=a;else if(typeof a=="function")try{e!=null&&(i=a(e==null?void 0:e[0]))}catch{}else if(typeof a=="string"&&T$.test(a)){var c=T$.exec(a);if(c==null||c[1]==null||e==null)i=void 0;else{var u=+c[1];i=e[0]-u}}else i=e==null?void 0:e[0];if(s==="auto")e!=null&&(l=Math.max(...e));else if(Wr(s))l=s;else if(typeof s=="function")try{e!=null&&(l=s(e==null?void 0:e[1]))}catch{}else if(typeof s=="string"&&k$.test(s)){var d=k$.exec(s);if(d==null||d[1]==null||e==null)l=void 0;else{var f=+d[1];l=e[1]+f}}else l=e==null?void 0:e[1];var h=[i,l];if(X0(h))return e==null?h:mG(h,e,r)}}}var Gv=1e9,GGe={precision:20,rounding:4,toExpNeg:-7,toExpPos:21,LN10:"2.302585092994045684017991454684364207601101488628772976033327900967572609677352480235997205089598298341967784042286"},FR,ps=!0,Xu="[DecimalError] ",mp=Xu+"Invalid argument: ",kR=Xu+"Exponent out of range: ",qv=Math.floor,Om=Math.pow,qGe=/^(\d+(\.\d*)?|\.\d+)(e[+-]?\d+)?$/i,Vc,co=1e7,Za=7,Fie=9007199254740991,aI=qv(Fie/Za),Rr={};Rr.absoluteValue=Rr.abs=function(){var t=new this.constructor(this);return t.s&&(t.s=1),t};Rr.comparedTo=Rr.cmp=function(t){var e,r,n,a,s=this;if(t=new s.constructor(t),s.s!==t.s)return s.s||-t.s;if(s.e!==t.e)return s.e>t.e^s.s<0?1:-1;for(n=s.d.length,a=t.d.length,e=0,r=n<a?n:a;e<r;++e)if(s.d[e]!==t.d[e])return s.d[e]>t.d[e]^s.s<0?1:-1;return n===a?0:n>a^s.s<0?1:-1};Rr.decimalPlaces=Rr.dp=function(){var t=this,e=t.d.length-1,r=(e-t.e)*Za;if(e=t.d[e],e)for(;e%10==0;e/=10)r--;return r<0?0:r};Rr.dividedBy=Rr.div=function(t){return BA(this,new this.constructor(t))};Rr.dividedToIntegerBy=Rr.idiv=function(t){var e=this,r=e.constructor;return Ra(BA(e,new r(t),0,1),r.precision)};Rr.equals=Rr.eq=function(t){return!this.cmp(t)};Rr.exponent=function(){return Ni(this)};Rr.greaterThan=Rr.gt=function(t){return this.cmp(t)>0};Rr.greaterThanOrEqualTo=Rr.gte=function(t){return this.cmp(t)>=0};Rr.isInteger=Rr.isint=function(){return this.e>this.d.length-2};Rr.isNegative=Rr.isneg=function(){return this.s<0};Rr.isPositive=Rr.ispos=function(){return this.s>0};Rr.isZero=function(){return this.s===0};Rr.lessThan=Rr.lt=function(t){return this.cmp(t)<0};Rr.lessThanOrEqualTo=Rr.lte=function(t){return this.cmp(t)<1};Rr.logarithm=Rr.log=function(t){var e,r=this,n=r.constructor,a=n.precision,s=a+5;if(t===void 0)t=new n(10);else if(t=new n(t),t.s<1||t.eq(Vc))throw Error(Xu+"NaN");if(r.s<1)throw Error(Xu+(r.s?"NaN":"-Infinity"));return r.eq(Vc)?new n(0):(ps=!1,e=BA(j2(r,s),j2(t,s),s),ps=!0,Ra(e,a))};Rr.minus=Rr.sub=function(t){var e=this;return t=new e.constructor(t),e.s==t.s?Rie(e,t):Oie(e,(t.s=-t.s,t))};Rr.modulo=Rr.mod=function(t){var e,r=this,n=r.constructor,a=n.precision;if(t=new n(t),!t.s)throw Error(Xu+"NaN");return r.s?(ps=!1,e=BA(r,t,0,1).times(t),ps=!0,r.minus(e)):Ra(new n(r),a)};Rr.naturalExponential=Rr.exp=function(){return Die(this)};Rr.naturalLogarithm=Rr.ln=function(){return j2(this)};Rr.negated=Rr.neg=function(){var t=new this.constructor(this);return t.s=-t.s||0,t};Rr.plus=Rr.add=function(t){var e=this;return t=new e.constructor(t),e.s==t.s?Oie(e,t):Rie(e,(t.s=-t.s,t))};Rr.precision=Rr.sd=function(t){var e,r,n,a=this;if(t!==void 0&&t!==!!t&&t!==1&&t!==0)throw Error(mp+t);if(e=Ni(a)+1,n=a.d.length-1,r=n*Za+1,n=a.d[n],n){for(;n%10==0;n/=10)r--;for(n=a.d[0];n>=10;n/=10)r++}return t&&e>r?e:r};Rr.squareRoot=Rr.sqrt=function(){var t,e,r,n,a,s,i,l=this,c=l.constructor;if(l.s<1){if(!l.s)return new c(0);throw Error(Xu+"NaN")}for(t=Ni(l),ps=!1,a=Math.sqrt(+l),a==0||a==1/0?(e=vf(l.d),(e.length+t)%2==0&&(e+="0"),a=Math.sqrt(e),t=qv((t+1)/2)-(t<0||t%2),a==1/0?e="5e"+t:(e=a.toExponential(),e=e.slice(0,e.indexOf("e")+1)+t),n=new c(e)):n=new c(a.toString()),r=c.precision,a=i=r+3;;)if(s=n,n=s.plus(BA(l,s,i+2)).times(.5),vf(s.d).slice(0,i)===(e=vf(n.d)).slice(0,i)){if(e=e.slice(i-3,i+1),a==i&&e=="4999"){if(Ra(s,r+1,0),s.times(s).eq(l)){n=s;break}}else if(e!="9999")break;i+=4}return ps=!0,Ra(n,r)};Rr.times=Rr.mul=function(t){var e,r,n,a,s,i,l,c,u,d=this,f=d.constructor,h=d.d,A=(t=new f(t)).d;if(!d.s||!t.s)return new f(0);for(t.s*=d.s,r=d.e+t.e,c=h.length,u=A.length,c<u&&(s=h,h=A,A=s,i=c,c=u,u=i),s=[],i=c+u,n=i;n--;)s.push(0);for(n=u;--n>=0;){for(e=0,a=c+n;a>n;)l=s[a]+A[n]*h[a-n-1]+e,s[a--]=l%co|0,e=l/co|0;s[a]=(s[a]+e)%co|0}for(;!s[--i];)s.pop();return e?++r:s.shift(),t.d=s,t.e=r,ps?Ra(t,f.precision):t};Rr.toDecimalPlaces=Rr.todp=function(t,e){var r=this,n=r.constructor;return r=new n(r),t===void 0?r:(Pf(t,0,Gv),e===void 0?e=n.rounding:Pf(e,0,8),Ra(r,t+Ni(r)+1,e))};Rr.toExponential=function(t,e){var r,n=this,a=n.constructor;return t===void 0?r=$p(n,!0):(Pf(t,0,Gv),e===void 0?e=a.rounding:Pf(e,0,8),n=Ra(new a(n),t+1,e),r=$p(n,!0,t+1)),r};Rr.toFixed=function(t,e){var r,n,a=this,s=a.constructor;return t===void 0?$p(a):(Pf(t,0,Gv),e===void 0?e=s.rounding:Pf(e,0,8),n=Ra(new s(a),t+Ni(a)+1,e),r=$p(n.abs(),!1,t+Ni(n)+1),a.isneg()&&!a.isZero()?"-"+r:r)};Rr.toInteger=Rr.toint=function(){var t=this,e=t.constructor;return Ra(new e(t),Ni(t)+1,e.rounding)};Rr.toNumber=function(){return+this};Rr.toPower=Rr.pow=function(t){var e,r,n,a,s,i,l=this,c=l.constructor,u=12,d=+(t=new c(t));if(!t.s)return new c(Vc);if(l=new c(l),!l.s){if(t.s<1)throw Error(Xu+"Infinity");return l}if(l.eq(Vc))return l;if(n=c.precision,t.eq(Vc))return Ra(l,n);if(e=t.e,r=t.d.length-1,i=e>=r,s=l.s,i){if((r=d<0?-d:d)<=Fie){for(a=new c(Vc),e=Math.ceil(n/Za+4),ps=!1;r%2&&(a=a.times(l),gG(a.d,e)),r=qv(r/2),r!==0;)l=l.times(l),gG(l.d,e);return ps=!0,t.s<0?new c(Vc).div(a):Ra(a,n)}}else if(s<0)throw Error(Xu+"NaN");return s=s<0&&t.d[Math.max(e,r)]&1?-1:1,l.s=1,ps=!1,a=t.times(j2(l,n+u)),ps=!0,a=Die(a),a.s=s,a};Rr.toPrecision=function(t,e){var r,n,a=this,s=a.constructor;return t===void 0?(r=Ni(a),n=$p(a,r<=s.toExpNeg||r>=s.toExpPos)):(Pf(t,1,Gv),e===void 0?e=s.rounding:Pf(e,0,8),a=Ra(new s(a),t,e),r=Ni(a),n=$p(a,t<=r||r<=s.toExpNeg,t)),n};Rr.toSignificantDigits=Rr.tosd=function(t,e){var r=this,n=r.constructor;return t===void 0?(t=n.precision,e=n.rounding):(Pf(t,1,Gv),e===void 0?e=n.rounding:Pf(e,0,8)),Ra(new n(r),t,e)};Rr.toString=Rr.valueOf=Rr.val=Rr.toJSON=Rr[Symbol.for("nodejs.util.inspect.custom")]=function(){var t=this,e=Ni(t),r=t.constructor;return $p(t,e<=r.toExpNeg||e>=r.toExpPos)};function Oie(t,e){var r,n,a,s,i,l,c,u,d=t.constructor,f=d.precision;if(!t.s||!e.s)return e.s||(e=new d(t)),ps?Ra(e,f):e;if(c=t.d,u=e.d,i=t.e,a=e.e,c=c.slice(),s=i-a,s){for(s<0?(n=c,s=-s,l=u.length):(n=u,a=i,l=c.length),i=Math.ceil(f/Za),l=i>l?i+1:l+1,s>l&&(s=l,n.length=1),n.reverse();s--;)n.push(0);n.reverse()}for(l=c.length,s=u.length,l-s<0&&(s=l,n=u,u=c,c=n),r=0;s;)r=(c[--s]=c[s]+u[s]+r)/co|0,c[s]%=co;for(r&&(c.unshift(r),++a),l=c.length;c[--l]==0;)c.pop();return e.d=c,e.e=a,ps?Ra(e,f):e}function Pf(t,e,r){if(t!==~~t||t<e||t>r)throw Error(mp+t)}function vf(t){var e,r,n,a=t.length-1,s="",i=t[0];if(a>0){for(s+=i,e=1;e<a;e++)n=t[e]+"",r=Za-n.length,r&&(s+=Wh(r)),s+=n;i=t[e],n=i+"",r=Za-n.length,r&&(s+=Wh(r))}else if(i===0)return"0";for(;i%10===0;)i/=10;return s+i}var BA=function(){function t(n,a){var s,i=0,l=n.length;for(n=n.slice();l--;)s=n[l]*a+i,n[l]=s%co|0,i=s/co|0;return i&&n.unshift(i),n}function e(n,a,s,i){var l,c;if(s!=i)c=s>i?1:-1;else for(l=c=0;l<s;l++)if(n[l]!=a[l]){c=n[l]>a[l]?1:-1;break}return c}function r(n,a,s){for(var i=0;s--;)n[s]-=i,i=n[s]<a[s]?1:0,n[s]=i*co+n[s]-a[s];for(;!n[0]&&n.length>1;)n.shift()}return function(n,a,s,i){var l,c,u,d,f,h,A,m,p,g,x,y,b,w,j,I,_,E,S=n.constructor,k=n.s==a.s?1:-1,P=n.d,T=a.d;if(!n.s)return new S(n);if(!a.s)throw Error(Xu+"Division by zero");for(c=n.e-a.e,_=T.length,j=P.length,A=new S(k),m=A.d=[],u=0;T[u]==(P[u]||0);)++u;if(T[u]>(P[u]||0)&&--c,s==null?y=s=S.precision:i?y=s+(Ni(n)-Ni(a))+1:y=s,y<0)return new S(0);if(y=y/Za+2|0,u=0,_==1)for(d=0,T=T[0],y++;(u<j||d)&&y--;u++)b=d*co+(P[u]||0),m[u]=b/T|0,d=b%T|0;else{for(d=co/(T[0]+1)|0,d>1&&(T=t(T,d),P=t(P,d),_=T.length,j=P.length),w=_,p=P.slice(0,_),g=p.length;g<_;)p[g++]=0;E=T.slice(),E.unshift(0),I=T[0],T[1]>=co/2&&++I;do d=0,l=e(T,p,_,g),l<0?(x=p[0],_!=g&&(x=x*co+(p[1]||0)),d=x/I|0,d>1?(d>=co&&(d=co-1),f=t(T,d),h=f.length,g=p.length,l=e(f,p,h,g),l==1&&(d--,r(f,_<h?E:T,h))):(d==0&&(l=d=1),f=T.slice()),h=f.length,h<g&&f.unshift(0),r(p,f,g),l==-1&&(g=p.length,l=e(T,p,_,g),l<1&&(d++,r(p,_<g?E:T,g))),g=p.length):l===0&&(d++,p=[0]),m[u++]=d,l&&p[0]?p[g++]=P[w]||0:(p=[P[w]],g=1);while((w++<j||p[0]!==void 0)&&y--)}return m[0]||m.shift(),A.e=c,Ra(A,i?s+Ni(A)+1:s)}}();function Die(t,e){var r,n,a,s,i,l,c=0,u=0,d=t.constructor,f=d.precision;if(Ni(t)>16)throw Error(kR+Ni(t));if(!t.s)return new d(Vc);for(ps=!1,l=f,i=new d(.03125);t.abs().gte(.1);)t=t.times(i),u+=5;for(n=Math.log(Om(2,u))/Math.LN10*2+5|0,l+=n,r=a=s=new d(Vc),d.precision=l;;){if(a=Ra(a.times(t),l),r=r.times(++c),i=s.plus(BA(a,r,l)),vf(i.d).slice(0,l)===vf(s.d).slice(0,l)){for(;u--;)s=Ra(s.times(s),l);return d.precision=f,e==null?(ps=!0,Ra(s,f)):s}s=i}}function Ni(t){for(var e=t.e*Za,r=t.d[0];r>=10;r/=10)e++;return e}function kB(t,e,r){if(e>t.LN10.sd())throw ps=!0,r&&(t.precision=r),Error(Xu+"LN10 precision limit exceeded");return Ra(new t(t.LN10),e)}function Wh(t){for(var e="";t--;)e+="0";return e}function j2(t,e){var r,n,a,s,i,l,c,u,d,f=1,h=10,A=t,m=A.d,p=A.constructor,g=p.precision;if(A.s<1)throw Error(Xu+(A.s?"NaN":"-Infinity"));if(A.eq(Vc))return new p(0);if(e==null?(ps=!1,u=g):u=e,A.eq(10))return e==null&&(ps=!0),kB(p,u);if(u+=h,p.precision=u,r=vf(m),n=r.charAt(0),s=Ni(A),Math.abs(s)<15e14){for(;n<7&&n!=1||n==1&&r.charAt(1)>3;)A=A.times(t),r=vf(A.d),n=r.charAt(0),f++;s=Ni(A),n>1?(A=new p("0."+r),s++):A=new p(n+"."+r.slice(1))}else return c=kB(p,u+2,g).times(s+""),A=j2(new p(n+"."+r.slice(1)),u-h).plus(c),p.precision=g,e==null?(ps=!0,Ra(A,g)):A;for(l=i=A=BA(A.minus(Vc),A.plus(Vc),u),d=Ra(A.times(A),u),a=3;;){if(i=Ra(i.times(d),u),c=l.plus(BA(i,new p(a),u)),vf(c.d).slice(0,u)===vf(l.d).slice(0,u))return l=l.times(2),s!==0&&(l=l.plus(kB(p,u+2,g).times(s+""))),l=BA(l,new p(f),u),p.precision=g,e==null?(ps=!0,Ra(l,g)):l;l=c,a+=2}}function pG(t,e){var r,n,a;for((r=e.indexOf("."))>-1&&(e=e.replace(".","")),(n=e.search(/e/i))>0?(r<0&&(r=n),r+=+e.slice(n+1),e=e.substring(0,n)):r<0&&(r=e.length),n=0;e.charCodeAt(n)===48;)++n;for(a=e.length;e.charCodeAt(a-1)===48;)--a;if(e=e.slice(n,a),e){if(a-=n,r=r-n-1,t.e=qv(r/Za),t.d=[],n=(r+1)%Za,r<0&&(n+=Za),n<a){for(n&&t.d.push(+e.slice(0,n)),a-=Za;n<a;)t.d.push(+e.slice(n,n+=Za));e=e.slice(n),n=Za-e.length}else n-=a;for(;n--;)e+="0";if(t.d.push(+e),ps&&(t.e>aI||t.e<-aI))throw Error(kR+r)}else t.s=0,t.e=0,t.d=[0];return t}function Ra(t,e,r){var n,a,s,i,l,c,u,d,f=t.d;for(i=1,s=f[0];s>=10;s/=10)i++;if(n=e-i,n<0)n+=Za,a=e,u=f[d=0];else{if(d=Math.ceil((n+1)/Za),s=f.length,d>=s)return t;for(u=s=f[d],i=1;s>=10;s/=10)i++;n%=Za,a=n-Za+i}if(r!==void 0&&(s=Om(10,i-a-1),l=u/s%10|0,c=e<0||f[d+1]!==void 0||u%s,c=r<4?(l||c)&&(r==0||r==(t.s<0?3:2)):l>5||l==5&&(r==4||c||r==6&&(n>0?a>0?u/Om(10,i-a):0:f[d-1])%10&1||r==(t.s<0?8:7))),e<1||!f[0])return c?(s=Ni(t),f.length=1,e=e-s-1,f[0]=Om(10,(Za-e%Za)%Za),t.e=qv(-e/Za)||0):(f.length=1,f[0]=t.e=t.s=0),t;if(n==0?(f.length=d,s=1,d--):(f.length=d+1,s=Om(10,Za-n),f[d]=a>0?(u/Om(10,i-a)%Om(10,a)|0)*s:0),c)for(;;)if(d==0){(f[0]+=s)==co&&(f[0]=1,++t.e);break}else{if(f[d]+=s,f[d]!=co)break;f[d--]=0,s=1}for(n=f.length;f[--n]===0;)f.pop();if(ps&&(t.e>aI||t.e<-aI))throw Error(kR+Ni(t));return t}function Rie(t,e){var r,n,a,s,i,l,c,u,d,f,h=t.constructor,A=h.precision;if(!t.s||!e.s)return e.s?e.s=-e.s:e=new h(t),ps?Ra(e,A):e;if(c=t.d,f=e.d,n=e.e,u=t.e,c=c.slice(),i=u-n,i){for(d=i<0,d?(r=c,i=-i,l=f.length):(r=f,n=u,l=c.length),a=Math.max(Math.ceil(A/Za),l)+2,i>a&&(i=a,r.length=1),r.reverse(),a=i;a--;)r.push(0);r.reverse()}else{for(a=c.length,l=f.length,d=a<l,d&&(l=a),a=0;a<l;a++)if(c[a]!=f[a]){d=c[a]<f[a];break}i=0}for(d&&(r=c,c=f,f=r,e.s=-e.s),l=c.length,a=f.length-l;a>0;--a)c[l++]=0;for(a=f.length;a>i;){if(c[--a]<f[a]){for(s=a;s&&c[--s]===0;)c[s]=co-1;--c[s],c[a]+=co}c[a]-=f[a]}for(;c[--l]===0;)c.pop();for(;c[0]===0;c.shift())--n;return c[0]?(e.d=c,e.e=n,ps?Ra(e,A):e):new h(0)}function $p(t,e,r){var n,a=Ni(t),s=vf(t.d),i=s.length;return e?(r&&(n=r-i)>0?s=s.charAt(0)+"."+s.slice(1)+Wh(n):i>1&&(s=s.charAt(0)+"."+s.slice(1)),s=s+(a<0?"e":"e+")+a):a<0?(s="0."+Wh(-a-1)+s,r&&(n=r-i)>0&&(s+=Wh(n))):a>=i?(s+=Wh(a+1-i),r&&(n=r-a-1)>0&&(s=s+"."+Wh(n))):((n=a+1)<i&&(s=s.slice(0,n)+"."+s.slice(n)),r&&(n=r-i)>0&&(a+1===i&&(s+="."),s+=Wh(n))),t.s<0?"-"+s:s}function gG(t,e){if(t.length>e)return t.length=e,!0}function Mie(t){var e,r,n;function a(s){var i=this;if(!(i instanceof a))return new a(s);if(i.constructor=a,s instanceof a){i.s=s.s,i.e=s.e,i.d=(s=s.d)?s.slice():s;return}if(typeof s=="number"){if(s*0!==0)throw Error(mp+s);if(s>0)i.s=1;else if(s<0)s=-s,i.s=-1;else{i.s=0,i.e=0,i.d=[0];return}if(s===~~s&&s<1e7){i.e=0,i.d=[s];return}return pG(i,s.toString())}else if(typeof s!="string")throw Error(mp+s);if(s.charCodeAt(0)===45?(s=s.slice(1),i.s=-1):i.s=1,qGe.test(s))pG(i,s);else throw Error(mp+s)}if(a.prototype=Rr,a.ROUND_UP=0,a.ROUND_DOWN=1,a.ROUND_CEIL=2,a.ROUND_FLOOR=3,a.ROUND_HALF_UP=4,a.ROUND_HALF_DOWN=5,a.ROUND_HALF_EVEN=6,a.ROUND_HALF_CEIL=7,a.ROUND_HALF_FLOOR=8,a.clone=Mie,a.config=a.set=zGe,t===void 0&&(t={}),t)for(n=["precision","rounding","toExpNeg","toExpPos","LN10"],e=0;e<n.length;)t.hasOwnProperty(r=n[e++])||(t[r]=this[r]);return a.config(t),a}function zGe(t){if(!t||typeof t!="object")throw Error(Xu+"Object expected");var e,r,n,a=["precision",1,Gv,"rounding",0,8,"toExpNeg",-1/0,0,"toExpPos",0,1/0];for(e=0;e<a.length;e+=3)if((n=t[r=a[e]])!==void 0)if(qv(n)===n&&n>=a[e+1]&&n<=a[e+2])this[r]=n;else throw Error(mp+r+": "+n);if((n=t[r="LN10"])!==void 0)if(n==Math.LN10)this[r]=new this(n);else throw Error(mp+r+": "+n);return this}var FR=Mie(GGe);Vc=new FR(1);const ba=FR;var WGe=t=>t,Lie={},Uie=t=>t===Lie,xG=t=>function e(){return arguments.length===0||arguments.length===1&&Uie(arguments.length<=0?void 0:arguments[0])?e:t(...arguments)},Qie=(t,e)=>t===1?e:xG(function(){for(var r=arguments.length,n=new Array(r),a=0;a<r;a++)n[a]=arguments[a];var s=n.filter(i=>i!==Lie).length;return s>=t?e(...n):Qie(t-s,xG(function(){for(var i=arguments.length,l=new Array(i),c=0;c<i;c++)l[c]=arguments[c];var u=n.map(d=>Uie(d)?l.shift():d);return e(...u,...l)}))}),XGe=t=>Qie(t.length,t),rF=(t,e)=>{for(var r=[],n=t;n<e;++n)r[n-t]=n;return r},YGe=XGe((t,e)=>Array.isArray(e)?e.map(t):Object.keys(e).map(r=>e[r]).map(t)),JGe=function(){for(var e=arguments.length,r=new Array(e),n=0;n<e;n++)r[n]=arguments[n];if(!r.length)return WGe;var a=r.reverse(),s=a[0],i=a.slice(1);return function(){return i.reduce((l,c)=>c(l),s(...arguments))}};function Vie(t){var e;return t===0?e=1:e=Math.floor(new ba(t).abs().log(10).toNumber())+1,e}function Hie(t,e,r){for(var n=new ba(t),a=0,s=[];n.lt(e)&&a<1e5;)s.push(n.toNumber()),n=n.add(r),a++;return s}var $ie=t=>{var[e,r]=t,[n,a]=[e,r];return e>r&&([n,a]=[r,e]),[n,a]},Kie=(t,e,r)=>{if(t.lte(0))return new ba(0);var n=Vie(t.toNumber()),a=new ba(10).pow(n),s=t.div(a),i=n!==1?.05:.1,l=new ba(Math.ceil(s.div(i).toNumber())).add(r).mul(i),c=l.mul(a);return e?new ba(c.toNumber()):new ba(Math.ceil(c.toNumber()))},ZGe=(t,e,r)=>{var n=new ba(1),a=new ba(t);if(!a.isint()&&r){var s=Math.abs(t);s<1?(n=new ba(10).pow(Vie(t)-1),a=new ba(Math.floor(a.div(n).toNumber())).mul(n)):s>1&&(a=new ba(Math.floor(t)))}else t===0?a=new ba(Math.floor((e-1)/2)):r||(a=new ba(Math.floor(t)));var i=Math.floor((e-1)/2),l=JGe(YGe(c=>a.add(new ba(c-i).mul(n)).toNumber()),rF);return l(0,e)},Gie=function(e,r,n,a){var s=arguments.length>4&&arguments[4]!==void 0?arguments[4]:0;if(!Number.isFinite((r-e)/(n-1)))return{step:new ba(0),tickMin:new ba(0),tickMax:new ba(0)};var i=Kie(new ba(r).sub(e).div(n-1),a,s),l;e<=0&&r>=0?l=new ba(0):(l=new ba(e).add(r).div(2),l=l.sub(new ba(l).mod(i)));var c=Math.ceil(l.sub(e).div(i).toNumber()),u=Math.ceil(new ba(r).sub(l).div(i).toNumber()),d=c+u+1;return d>n?Gie(e,r,n,a,s+1):(d<n&&(u=r>0?u+(n-d):u,c=r>0?c:c+(n-d)),{step:i,tickMin:l.sub(new ba(c).mul(i)),tickMax:l.add(new ba(u).mul(i))})},eqe=function(e){var[r,n]=e,a=arguments.length>1&&arguments[1]!==void 0?arguments[1]:6,s=arguments.length>2&&arguments[2]!==void 0?arguments[2]:!0,i=Math.max(a,2),[l,c]=$ie([r,n]);if(l===-1/0||c===1/0){var u=c===1/0?[l,...rF(0,a-1).map(()=>1/0)]:[...rF(0,a-1).map(()=>-1/0),c];return r>n?u.reverse():u}if(l===c)return ZGe(l,a,s);var{step:d,tickMin:f,tickMax:h}=Gie(l,c,i,s,0),A=Hie(f,h.add(new ba(.1).mul(d)),d);return r>n?A.reverse():A},tqe=function(e,r){var[n,a]=e,s=arguments.length>2&&arguments[2]!==void 0?arguments[2]:!0,[i,l]=$ie([n,a]);if(i===-1/0||l===1/0)return[n,a];if(i===l)return[i];var c=Math.max(r,2),u=Kie(new ba(l).sub(i).div(c-1),s,0),d=[...Hie(new ba(i),new ba(l),u),l];return s===!1&&(d=d.map(f=>Math.round(f))),n>a?d.reverse():d},qie=t=>t.rootProps.maxBarSize,rqe=t=>t.rootProps.barGap,zie=t=>t.rootProps.barCategoryGap,nqe=t=>t.rootProps.barSize,Sw=t=>t.rootProps.stackOffset,Wie=t=>t.rootProps.reverseStackOrder,OR=t=>t.options.chartName,DR=t=>t.rootProps.syncId,Xie=t=>t.rootProps.syncMethod,RR=t=>t.options.eventEmitter,pl={grid:-100,barBackground:-50,area:100,cursorRectangle:200,bar:300,line:400,axis:500,scatter:600,activeBar:1e3,cursorLine:1100,activeDot:1200,label:2e3},cA={allowDuplicatedCategory:!0,angleAxisId:0,reversed:!1,scale:"auto",tick:!0,type:"category"},Rc={allowDataOverflow:!1,allowDuplicatedCategory:!0,radiusAxisId:0,scale:"auto",tick:!0,tickCount:5,type:"number"},v3=(t,e)=>{if(!(!t||!e))return t!=null&&t.reversed?[e[1],e[0]]:e},aqe={allowDataOverflow:!1,allowDecimals:!1,allowDuplicatedCategory:!1,dataKey:void 0,domain:void 0,id:cA.angleAxisId,includeHidden:!1,name:void 0,reversed:cA.reversed,scale:cA.scale,tick:cA.tick,tickCount:void 0,ticks:void 0,type:cA.type,unit:void 0},sqe={allowDataOverflow:Rc.allowDataOverflow,allowDecimals:!1,allowDuplicatedCategory:Rc.allowDuplicatedCategory,dataKey:void 0,domain:void 0,id:Rc.radiusAxisId,includeHidden:!1,name:void 0,reversed:!1,scale:Rc.scale,tick:Rc.tick,tickCount:Rc.tickCount,ticks:void 0,type:Rc.type,unit:void 0},iqe={allowDataOverflow:!1,allowDecimals:!1,allowDuplicatedCategory:cA.allowDuplicatedCategory,dataKey:void 0,domain:void 0,id:cA.angleAxisId,includeHidden:!1,name:void 0,reversed:!1,scale:cA.scale,tick:cA.tick,tickCount:void 0,ticks:void 0,type:"number",unit:void 0},oqe={allowDataOverflow:Rc.allowDataOverflow,allowDecimals:!1,allowDuplicatedCategory:Rc.allowDuplicatedCategory,dataKey:void 0,domain:void 0,id:Rc.radiusAxisId,includeHidden:!1,name:void 0,reversed:!1,scale:Rc.scale,tick:Rc.tick,tickCount:Rc.tickCount,ticks:void 0,type:"category",unit:void 0},MR=(t,e)=>t.polarAxis.angleAxis[e]!=null?t.polarAxis.angleAxis[e]:t.layout.layoutType==="radial"?iqe:aqe,LR=(t,e)=>t.polarAxis.radiusAxis[e]!=null?t.polarAxis.radiusAxis[e]:t.layout.layoutType==="radial"?oqe:sqe,y3=t=>t.polarOptions,UR=Rt([ah,sh,zi],Kse),Yie=Rt([y3,UR],(t,e)=>{if(t!=null)return xl(t.innerRadius,e,0)}),Jie=Rt([y3,UR],(t,e)=>{if(t!=null)return xl(t.outerRadius,e,e*.8)}),lqe=t=>{if(t==null)return[0,0];var{startAngle:e,endAngle:r}=t;return[e,r]},Zie=Rt([y3],lqe);Rt([MR,Zie],v3);var eoe=Rt([UR,Yie,Jie],(t,e,r)=>{if(!(t==null||e==null||r==null))return[e,r]});Rt([LR,eoe],v3);var toe=Rt([ra,y3,Yie,Jie,ah,sh],(t,e,r,n,a,s)=>{if(!(t!=="centric"&&t!=="radial"||e==null||r==null||n==null)){var{cx:i,cy:l,startAngle:c,endAngle:u}=e;return{cx:xl(i,a,a/2),cy:xl(l,s,s/2),innerRadius:r,outerRadius:n,startAngle:c,endAngle:u,clockWise:!1}}}),vs=(t,e)=>e,Iw=(t,e,r)=>r;function QR(t){return t==null?void 0:t.id}function roe(t,e,r){var{chartData:n=[]}=e,{allowDuplicatedCategory:a,dataKey:s}=r,i=new Map;return t.forEach(l=>{var c,u=(c=l.data)!==null&&c!==void 0?c:n;if(!(u==null||u.length===0)){var d=QR(l);u.forEach((f,h)=>{var A=s==null||a?h:String(ns(f,s,null)),m=ns(f,l.dataKey,0),p;i.has(A)?p=i.get(A):p={},Object.assign(p,{[d]:m}),i.set(A,p)})}}),Array.from(i.values())}function b3(t){return"stackId"in t&&t.stackId!=null&&t.dataKey!=null}var w3=(t,e)=>t===e?!0:t==null||e==null?!1:t[0]===e[0]&&t[1]===e[1];function N3(t,e){return Array.isArray(t)&&Array.isArray(e)&&t.length===0&&e.length===0?!0:t===e}function cqe(t,e){if(t.length===e.length){for(var r=0;r<t.length;r++)if(t[r]!==e[r])return!1;return!0}return!1}var Xi=t=>{var e=ra(t);return e==="horizontal"?"xAxis":e==="vertical"?"yAxis":e==="centric"?"angleAxis":"radiusAxis"},zv=t=>t.tooltip.settings.axisId;function vG(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter(function(a){return Object.getOwnPropertyDescriptor(t,a).enumerable})),r.push.apply(r,n)}return r}function sI(t){for(var e=1;e<arguments.length;e++){var r=arguments[e]!=null?arguments[e]:{};e%2?vG(Object(r),!0).forEach(function(n){uqe(t,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):vG(Object(r)).forEach(function(n){Object.defineProperty(t,n,Object.getOwnPropertyDescriptor(r,n))})}return t}function uqe(t,e,r){return(e=dqe(e))in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}function dqe(t){var e=fqe(t,"string");return typeof e=="symbol"?e:e+""}function fqe(t,e){if(typeof t!="object"||!t)return t;var r=t[Symbol.toPrimitive];if(r!==void 0){var n=r.call(t,e);if(typeof n!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}var nF=[0,"auto"],ao={allowDataOverflow:!1,allowDecimals:!0,allowDuplicatedCategory:!0,angle:0,dataKey:void 0,domain:void 0,height:30,hide:!0,id:0,includeHidden:!1,interval:"preserveEnd",minTickGap:5,mirror:!1,name:void 0,orientation:"bottom",padding:{left:0,right:0},reversed:!1,scale:"auto",tick:!0,tickCount:5,tickFormatter:void 0,ticks:void 0,type:"category",unit:void 0},noe=(t,e)=>t.cartesianAxis.xAxis[e],lh=(t,e)=>{var r=noe(t,e);return r??ao},so={allowDataOverflow:!1,allowDecimals:!0,allowDuplicatedCategory:!0,angle:0,dataKey:void 0,domain:nF,hide:!0,id:0,includeHidden:!1,interval:"preserveEnd",minTickGap:5,mirror:!1,name:void 0,orientation:"left",padding:{top:0,bottom:0},reversed:!1,scale:"auto",tick:!0,tickCount:5,tickFormatter:void 0,ticks:void 0,type:"number",unit:void 0,width:yw},aoe=(t,e)=>t.cartesianAxis.yAxis[e],ch=(t,e)=>{var r=aoe(t,e);return r??so},Aqe={domain:[0,"auto"],includeHidden:!1,reversed:!1,allowDataOverflow:!1,allowDuplicatedCategory:!1,dataKey:void 0,id:0,name:"",range:[64,64],scale:"auto",type:"number",unit:""},VR=(t,e)=>{var r=t.cartesianAxis.zAxis[e];return r??Aqe},Ds=(t,e,r)=>{switch(e){case"xAxis":return lh(t,r);case"yAxis":return ch(t,r);case"zAxis":return VR(t,r);case"angleAxis":return MR(t,r);case"radiusAxis":return LR(t,r);default:throw new Error("Unexpected axis type: ".concat(e))}},hqe=(t,e,r)=>{switch(e){case"xAxis":return lh(t,r);case"yAxis":return ch(t,r);default:throw new Error("Unexpected axis type: ".concat(e))}},jw=(t,e,r)=>{switch(e){case"xAxis":return lh(t,r);case"yAxis":return ch(t,r);case"angleAxis":return MR(t,r);case"radiusAxis":return LR(t,r);default:throw new Error("Unexpected axis type: ".concat(e))}},soe=t=>t.graphicalItems.cartesianItems.some(e=>e.type==="bar")||t.graphicalItems.polarItems.some(e=>e.type==="radialBar");function HR(t,e){return r=>{switch(t){case"xAxis":return"xAxisId"in r&&r.xAxisId===e;case"yAxis":return"yAxisId"in r&&r.yAxisId===e;case"zAxis":return"zAxisId"in r&&r.zAxisId===e;case"angleAxis":return"angleAxisId"in r&&r.angleAxisId===e;case"radiusAxis":return"radiusAxisId"in r&&r.radiusAxisId===e;default:return!1}}}var $R=t=>t.graphicalItems.cartesianItems,mqe=Rt([vs,Iw],HR),KR=(t,e,r)=>t.filter(r).filter(n=>(e==null?void 0:e.includeHidden)===!0?!0:!n.hide),Bw=Rt([$R,Ds,mqe],KR,{memoizeOptions:{resultEqualityCheck:N3}}),ioe=Rt([Bw],t=>t.filter(e=>e.type==="area"||e.type==="bar").filter(b3)),ooe=t=>t.filter(e=>!("stackId"in e)||e.stackId===void 0),pqe=Rt([Bw],ooe),GR=t=>t.map(e=>e.data).filter(Boolean).flat(1),gqe=Rt([Bw],GR,{memoizeOptions:{resultEqualityCheck:N3}}),qR=(t,e)=>{var{chartData:r=[],dataStartIndex:n,dataEndIndex:a}=e;return t.length>0?t:r.slice(n,a+1)},zR=Rt([gqe,Tie],qR),WR=(t,e,r)=>(e==null?void 0:e.dataKey)!=null?t.map(n=>({value:ns(n,e.dataKey)})):r.length>0?r.map(n=>n.dataKey).flatMap(n=>t.map(a=>({value:ns(a,n)}))):t.map(n=>({value:n})),C3=Rt([zR,Ds,Bw],WR);function loe(t,e){switch(t){case"xAxis":return e.direction==="x";case"yAxis":return e.direction==="y";default:return!1}}function G_(t){if(Bf(t)||t instanceof Date){var e=Number(t);if(Os(e))return e}}function yG(t){if(Array.isArray(t)){var e=[G_(t[0]),G_(t[1])];return X0(e)?e:void 0}var r=G_(t);if(r!=null)return[r,r]}function GA(t){return t.map(G_).filter(E7e)}function xqe(t,e,r){return!r||typeof e!="number"||jf(e)?[]:r.length?GA(r.flatMap(n=>{var a=ns(t,n.dataKey),s,i;if(Array.isArray(a)?[s,i]=a:s=i=a,!(!Os(s)||!Os(i)))return[e-s,e+i]})):[]}var Yi=t=>{var e=Xi(t),r=zv(t);return jw(t,e,r)},Pw=Rt([Yi],t=>t==null?void 0:t.dataKey),vqe=Rt([ioe,Tie,Yi],roe),coe=(t,e,r,n)=>{var a={},s=e.reduce((i,l)=>{if(l.stackId==null)return i;var c=i[l.stackId];return c==null&&(c=[]),c.push(l),i[l.stackId]=c,i},a);return Object.fromEntries(Object.entries(s).map(i=>{var[l,c]=i,u=n?[...c].reverse():c,d=u.map(QR);return[l,{stackedData:$Qe(t,d,r),graphicalItems:u}]}))},aF=Rt([vqe,ioe,Sw,Wie],coe),uoe=(t,e,r,n)=>{var{dataStartIndex:a,dataEndIndex:s}=e;if(n==null&&r!=="zAxis"){var i=WQe(t,a,s);if(!(i!=null&&i[0]===0&&i[1]===0))return i}},yqe=Rt([Ds],t=>t.allowDataOverflow),XR=t=>{var e;if(t==null||!("domain"in t))return nF;if(t.domain!=null)return t.domain;if("ticks"in t&&t.ticks!=null){if(t.type==="number"){var r=GA(t.ticks);return[Math.min(...r),Math.max(...r)]}if(t.type==="category")return t.ticks.map(String)}return(e=t==null?void 0:t.domain)!==null&&e!==void 0?e:nF},YR=Rt([Ds],XR),JR=Rt([YR,yqe],kie),bqe=Rt([aF,oh,vs,JR],uoe,{memoizeOptions:{resultEqualityCheck:w3}}),_3=t=>t.errorBars,wqe=(t,e,r)=>t.flatMap(n=>e[n.id]).filter(Boolean).filter(n=>loe(r,n)),iI=function(){for(var e=arguments.length,r=new Array(e),n=0;n<e;n++)r[n]=arguments[n];var a=r.filter(Boolean);if(a.length!==0){var s=a.flat(),i=Math.min(...s),l=Math.max(...s);return[i,l]}},ZR=(t,e,r,n,a)=>{var s,i;if(r.length>0&&t.forEach(l=>{r.forEach(c=>{var u,d,f=(u=n[c.id])===null||u===void 0?void 0:u.filter(x=>loe(a,x)),h=ns(l,(d=e.dataKey)!==null&&d!==void 0?d:c.dataKey),A=xqe(l,h,f);if(A.length>=2){var m=Math.min(...A),p=Math.max(...A);(s==null||m<s)&&(s=m),(i==null||p>i)&&(i=p)}var g=yG(h);g!=null&&(s=s==null?g[0]:Math.min(s,g[0]),i=i==null?g[1]:Math.max(i,g[1]))})}),(e==null?void 0:e.dataKey)!=null&&t.forEach(l=>{var c=yG(ns(l,e.dataKey));c!=null&&(s=s==null?c[0]:Math.min(s,c[0]),i=i==null?c[1]:Math.max(i,c[1]))}),Os(s)&&Os(i))return[s,i]},Nqe=Rt([zR,Ds,pqe,_3,vs],ZR,{memoizeOptions:{resultEqualityCheck:w3}});function Cqe(t){var{value:e}=t;if(Bf(e)||e instanceof Date)return e}var _qe=(t,e,r)=>{var n=t.map(Cqe).filter(a=>a!=null);return r&&(e.dataKey==null||e.allowDuplicatedCategory&&lae(n))?Jse(0,t.length):e.allowDuplicatedCategory?n:Array.from(new Set(n))},doe=t=>t.referenceElements.dots,Wv=(t,e,r)=>t.filter(n=>n.ifOverflow==="extendDomain").filter(n=>e==="xAxis"?n.xAxisId===r:n.yAxisId===r),Eqe=Rt([doe,vs,Iw],Wv),foe=t=>t.referenceElements.areas,Sqe=Rt([foe,vs,Iw],Wv),Aoe=t=>t.referenceElements.lines,Iqe=Rt([Aoe,vs,Iw],Wv),hoe=(t,e)=>{if(t!=null){var r=GA(t.map(n=>e==="xAxis"?n.x:n.y));if(r.length!==0)return[Math.min(...r),Math.max(...r)]}},jqe=Rt(Eqe,vs,hoe),moe=(t,e)=>{if(t!=null){var r=GA(t.flatMap(n=>[e==="xAxis"?n.x1:n.y1,e==="xAxis"?n.x2:n.y2]));if(r.length!==0)return[Math.min(...r),Math.max(...r)]}},Bqe=Rt([Sqe,vs],moe);function Pqe(t){var e;if(t.x!=null)return GA([t.x]);var r=(e=t.segment)===null||e===void 0?void 0:e.map(n=>n.x);return r==null||r.length===0?[]:GA(r)}function Tqe(t){var e;if(t.y!=null)return GA([t.y]);var r=(e=t.segment)===null||e===void 0?void 0:e.map(n=>n.y);return r==null||r.length===0?[]:GA(r)}var poe=(t,e)=>{if(t!=null){var r=t.flatMap(n=>e==="xAxis"?Pqe(n):Tqe(n));if(r.length!==0)return[Math.min(...r),Math.max(...r)]}},kqe=Rt([Iqe,vs],poe),Fqe=Rt(jqe,kqe,Bqe,(t,e,r)=>iI(t,r,e)),e8=(t,e,r,n,a,s,i,l)=>{if(r!=null)return r;var c=i==="vertical"&&l==="xAxis"||i==="horizontal"&&l==="yAxis",u=c?iI(n,s,a):iI(s,a);return KGe(e,u,t.allowDataOverflow)},Oqe=Rt([Ds,YR,JR,bqe,Nqe,Fqe,ra,vs],e8,{memoizeOptions:{resultEqualityCheck:w3}}),Dqe=[0,1],t8=(t,e,r,n,a,s,i)=>{if(!((t==null||r==null||r.length===0)&&i===void 0)){var{dataKey:l,type:c}=t,u=dg(e,s);if(u&&l==null){var d;return Jse(0,(d=r==null?void 0:r.length)!==null&&d!==void 0?d:0)}return c==="category"?_qe(n,t,u):a==="expand"?Dqe:i}},r8=Rt([Ds,ra,zR,C3,Sw,vs,Oqe],t8),goe=(t,e,r,n,a)=>{if(t!=null){var{scale:s,type:i}=t;if(s==="auto")return e==="radial"&&a==="radiusAxis"?"band":e==="radial"&&a==="angleAxis"?"linear":i==="category"&&n&&(n.indexOf("LineChart")>=0||n.indexOf("AreaChart")>=0||n.indexOf("ComposedChart")>=0&&!r)?"point":i==="category"?"band":"linear";if(typeof s=="string"){var l="scale".concat(mw(s));return l in Ey?l:"point"}}},Xv=Rt([Ds,ra,soe,OR,vs],goe);function Rqe(t){if(t!=null){if(t in Ey)return Ey[t]();var e="scale".concat(mw(t));if(e in Ey)return Ey[e]()}}function n8(t,e,r,n){if(!(r==null||n==null)){if(typeof t.scale=="function")return t.scale.copy().domain(r).range(n);var a=Rqe(e);if(a!=null){var s=a.domain(r).range(n);return LQe(s),s}}}var a8=(t,e,r)=>{var n=XR(e);if(!(r!=="auto"&&r!=="linear")){if(e!=null&&e.tickCount&&Array.isArray(n)&&(n[0]==="auto"||n[1]==="auto")&&X0(t))return eqe(t,e.tickCount,e.allowDecimals);if(e!=null&&e.tickCount&&e.type==="number"&&X0(t))return tqe(t,e.tickCount,e.allowDecimals)}},s8=Rt([r8,jw,Xv],a8),i8=(t,e,r,n)=>{if(n!=="angleAxis"&&(t==null?void 0:t.type)==="number"&&X0(e)&&Array.isArray(r)&&r.length>0){var a=e[0],s=r[0],i=e[1],l=r[r.length-1];return[Math.min(a,s),Math.max(i,l)]}return e},Mqe=Rt([Ds,r8,s8,vs],i8),Lqe=Rt(C3,Ds,(t,e)=>{if(!(!e||e.type!=="number")){var r=1/0,n=Array.from(GA(t.map(f=>f.value))).sort((f,h)=>f-h),a=n[0],s=n[n.length-1];if(a==null||s==null)return 1/0;var i=s-a;if(i===0)return 1/0;for(var l=0;l<n.length-1;l++){var c=n[l],u=n[l+1];if(!(c==null||u==null)){var d=u-c;r=Math.min(r,d)}}return r/i}}),xoe=Rt(Lqe,ra,zie,zi,(t,e,r,n,a)=>a,(t,e,r,n,a)=>{if(!Os(t))return 0;var s=e==="vertical"?n.height:n.width;if(a==="gap")return t*s/2;if(a==="no-gap"){var i=xl(r,t*s),l=t*s/2;return l-i-(l-i)/s*i}return 0}),Uqe=(t,e,r)=>{var n=lh(t,e);return n==null||typeof n.padding!="string"?0:xoe(t,"xAxis",e,r,n.padding)},Qqe=(t,e,r)=>{var n=ch(t,e);return n==null||typeof n.padding!="string"?0:xoe(t,"yAxis",e,r,n.padding)},Vqe=Rt(lh,Uqe,(t,e)=>{var r,n;if(t==null)return{left:0,right:0};var{padding:a}=t;return typeof a=="string"?{left:e,right:e}:{left:((r=a.left)!==null&&r!==void 0?r:0)+e,right:((n=a.right)!==null&&n!==void 0?n:0)+e}}),Hqe=Rt(ch,Qqe,(t,e)=>{var r,n;if(t==null)return{top:0,bottom:0};var{padding:a}=t;return typeof a=="string"?{top:e,bottom:e}:{top:((r=a.top)!==null&&r!==void 0?r:0)+e,bottom:((n=a.bottom)!==null&&n!==void 0?n:0)+e}}),$qe=Rt([zi,Vqe,n3,r3,(t,e,r)=>r],(t,e,r,n,a)=>{var{padding:s}=n;return a?[s.left,r.width-s.right]:[t.left+e.left,t.left+t.width-e.right]}),Kqe=Rt([zi,ra,Hqe,n3,r3,(t,e,r)=>r],(t,e,r,n,a,s)=>{var{padding:i}=a;return s?[n.height-i.bottom,i.top]:e==="horizontal"?[t.top+t.height-r.bottom,t.top+r.top]:[t.top+r.top,t.top+t.height-r.bottom]}),Tw=(t,e,r,n)=>{var a;switch(e){case"xAxis":return $qe(t,r,n);case"yAxis":return Kqe(t,r,n);case"zAxis":return(a=VR(t,r))===null||a===void 0?void 0:a.range;case"angleAxis":return Zie(t);case"radiusAxis":return eoe(t,r);default:return}},voe=Rt([Ds,Tw],v3),E3=Rt([Ds,Xv,Mqe,voe],n8);Rt([Bw,_3,vs],wqe);function yoe(t,e){return t.id<e.id?-1:t.id>e.id?1:0}var S3=(t,e)=>e,I3=(t,e,r)=>r,Gqe=Rt(e3,S3,I3,(t,e,r)=>t.filter(n=>n.orientation===e).filter(n=>n.mirror===r).sort(yoe)),qqe=Rt(t3,S3,I3,(t,e,r)=>t.filter(n=>n.orientation===e).filter(n=>n.mirror===r).sort(yoe)),boe=(t,e)=>({width:t.width,height:e.height}),zqe=(t,e)=>{var r=typeof e.width=="number"?e.width:yw;return{width:r,height:t.height}},woe=Rt(zi,lh,boe),Wqe=(t,e,r)=>{switch(e){case"top":return t.top;case"bottom":return r-t.bottom;default:return 0}},Xqe=(t,e,r)=>{switch(e){case"left":return t.left;case"right":return r-t.right;default:return 0}},Yqe=Rt(sh,zi,Gqe,S3,I3,(t,e,r,n,a)=>{var s={},i;return r.forEach(l=>{var c=boe(e,l);i==null&&(i=Wqe(e,n,t));var u=n==="top"&&!a||n==="bottom"&&a;s[l.id]=i-Number(u)*c.height,i+=(u?-1:1)*c.height}),s}),Jqe=Rt(ah,zi,qqe,S3,I3,(t,e,r,n,a)=>{var s={},i;return r.forEach(l=>{var c=zqe(e,l);i==null&&(i=Xqe(e,n,t));var u=n==="left"&&!a||n==="right"&&a;s[l.id]=i-Number(u)*c.width,i+=(u?-1:1)*c.width}),s}),Zqe=(t,e)=>{var r=lh(t,e);if(r!=null)return Yqe(t,r.orientation,r.mirror)},eze=Rt([zi,lh,Zqe,(t,e)=>e],(t,e,r,n)=>{if(e!=null){var a=r==null?void 0:r[n];return a==null?{x:t.left,y:0}:{x:t.left,y:a}}}),tze=(t,e)=>{var r=ch(t,e);if(r!=null)return Jqe(t,r.orientation,r.mirror)},rze=Rt([zi,ch,tze,(t,e)=>e],(t,e,r,n)=>{if(e!=null){var a=r==null?void 0:r[n];return a==null?{x:0,y:t.top}:{x:a,y:t.top}}}),Noe=Rt(zi,ch,(t,e)=>{var r=typeof e.width=="number"?e.width:yw;return{width:r,height:t.height}}),bG=(t,e,r)=>{switch(e){case"xAxis":return woe(t,r).width;case"yAxis":return Noe(t,r).height;default:return}},Coe=(t,e,r,n)=>{if(r!=null){var{allowDuplicatedCategory:a,type:s,dataKey:i}=r,l=dg(t,n),c=e.map(u=>u.value);if(i&&l&&s==="category"&&a&&lae(c))return c}},o8=Rt([ra,C3,Ds,vs],Coe),_oe=(t,e,r,n)=>{if(!(r==null||r.dataKey==null)){var{type:a,scale:s}=r,i=dg(t,n);if(i&&(a==="number"||s!=="auto"))return e.map(l=>l.value)}},l8=Rt([ra,C3,jw,vs],_oe);Rt([ra,hqe,Xv,E3,o8,l8,Tw,s8,vs],(t,e,r,n,a,s,i,l,c)=>{if(e!=null){var u=dg(t,c);return{angle:e.angle,interval:e.interval,minTickGap:e.minTickGap,orientation:e.orientation,tick:e.tick,tickCount:e.tickCount,tickFormatter:e.tickFormatter,ticks:e.ticks,type:e.type,unit:e.unit,axisType:c,categoricalDomain:s,duplicateDomain:a,isCategorical:u,niceTicks:l,range:i,realScaleType:r,scale:n}}});var nze=(t,e,r,n,a,s,i,l,c)=>{if(!(e==null||n==null)){var u=dg(t,c),{type:d,ticks:f,tickCount:h}=e,A=r==="scaleBand"&&typeof n.bandwidth=="function"?n.bandwidth()/2:2,m=d==="category"&&n.bandwidth?n.bandwidth()/A:0;m=c==="angleAxis"&&s!=null&&s.length>=2?Ko(s[0]-s[1])*2*m:m;var p=f||a;if(p){var g=p.map((x,y)=>{var b=i?i.indexOf(x):x;return{index:y,coordinate:n(b)+m,value:x,offset:m}});return g.filter(x=>Os(x.coordinate))}return u&&l?l.map((x,y)=>({coordinate:n(x)+m,value:x,index:y,offset:m})).filter(x=>Os(x.coordinate)):n.ticks?n.ticks(h).map(x=>({coordinate:n(x)+m,value:x,offset:m})):n.domain().map((x,y)=>({coordinate:n(x)+m,value:i?i[x]:x,index:y,offset:m}))}},Eoe=Rt([ra,jw,Xv,E3,s8,Tw,o8,l8,vs],nze),aze=(t,e,r,n,a,s,i)=>{if(!(e==null||r==null||n==null||n[0]===n[1])){var l=dg(t,i),{tickCount:c}=e,u=0;return u=i==="angleAxis"&&(n==null?void 0:n.length)>=2?Ko(n[0]-n[1])*2*u:u,l&&s?s.map((d,f)=>({coordinate:r(d)+u,value:d,index:f,offset:u})):r.ticks?r.ticks(c).map(d=>({coordinate:r(d)+u,value:d,offset:u})):r.domain().map((d,f)=>({coordinate:r(d)+u,value:a?a[d]:d,index:f,offset:u}))}},yv=Rt([ra,jw,E3,Tw,o8,l8,vs],aze),bv=Rt(Ds,E3,(t,e)=>{if(!(t==null||e==null))return sI(sI({},t),{},{scale:e})}),sze=Rt([Ds,Xv,r8,voe],n8);Rt((t,e,r)=>VR(t,r),sze,(t,e)=>{if(!(t==null||e==null))return sI(sI({},t),{},{scale:e})});var ize=Rt([ra,e3,t3],(t,e,r)=>{switch(t){case"horizontal":return e.some(n=>n.reversed)?"right-to-left":"left-to-right";case"vertical":return r.some(n=>n.reversed)?"bottom-to-top":"top-to-bottom";case"centric":case"radial":return"left-to-right";default:return}}),Soe=t=>t.options.defaultTooltipEventType,Ioe=t=>t.options.validateTooltipEventTypes;function joe(t,e,r){if(t==null)return e;var n=t?"axis":"item";return r==null?e:r.includes(n)?n:e}function c8(t,e){var r=Soe(t),n=Ioe(t);return joe(e,r,n)}function oze(t){return Gr(e=>c8(e,t))}var Boe=(t,e)=>{var r,n=Number(e);if(!(jf(n)||e==null))return n>=0?t==null||(r=t[n])===null||r===void 0?void 0:r.value:void 0},lze=t=>t.tooltip.settings,i0={active:!1,index:null,dataKey:void 0,graphicalItemId:void 0,coordinate:void 0},cze={itemInteraction:{click:i0,hover:i0},axisInteraction:{click:i0,hover:i0},keyboardInteraction:i0,syncInteraction:{active:!1,index:null,dataKey:void 0,label:void 0,coordinate:void 0,sourceViewBox:void 0,graphicalItemId:void 0},tooltipItemPayloads:[],settings:{shared:void 0,trigger:"hover",axisId:0,active:!1,defaultIndex:void 0}},Poe=yc({name:"tooltip",initialState:cze,reducers:{addTooltipEntrySettings:{reducer(t,e){t.tooltipItemPayloads.push(e.payload)},prepare:us()},replaceTooltipEntrySettings:{reducer(t,e){var{prev:r,next:n}=e.payload,a=Bd(t).tooltipItemPayloads.indexOf(r);a>-1&&(t.tooltipItemPayloads[a]=n)},prepare:us()},removeTooltipEntrySettings:{reducer(t,e){var r=Bd(t).tooltipItemPayloads.indexOf(e.payload);r>-1&&t.tooltipItemPayloads.splice(r,1)},prepare:us()},setTooltipSettingsState(t,e){t.settings=e.payload},setActiveMouseOverItemIndex(t,e){t.syncInteraction.active=!1,t.keyboardInteraction.active=!1,t.itemInteraction.hover.active=!0,t.itemInteraction.hover.index=e.payload.activeIndex,t.itemInteraction.hover.dataKey=e.payload.activeDataKey,t.itemInteraction.hover.graphicalItemId=e.payload.activeGraphicalItemId,t.itemInteraction.hover.coordinate=e.payload.activeCoordinate},mouseLeaveChart(t){t.itemInteraction.hover.active=!1,t.axisInteraction.hover.active=!1},mouseLeaveItem(t){t.itemInteraction.hover.active=!1},setActiveClickItemIndex(t,e){t.syncInteraction.active=!1,t.itemInteraction.click.active=!0,t.keyboardInteraction.active=!1,t.itemInteraction.click.index=e.payload.activeIndex,t.itemInteraction.click.dataKey=e.payload.activeDataKey,t.itemInteraction.click.graphicalItemId=e.payload.activeGraphicalItemId,t.itemInteraction.click.coordinate=e.payload.activeCoordinate},setMouseOverAxisIndex(t,e){t.syncInteraction.active=!1,t.axisInteraction.hover.active=!0,t.keyboardInteraction.active=!1,t.axisInteraction.hover.index=e.payload.activeIndex,t.axisInteraction.hover.dataKey=e.payload.activeDataKey,t.axisInteraction.hover.coordinate=e.payload.activeCoordinate},setMouseClickAxisIndex(t,e){t.syncInteraction.active=!1,t.keyboardInteraction.active=!1,t.axisInteraction.click.active=!0,t.axisInteraction.click.index=e.payload.activeIndex,t.axisInteraction.click.dataKey=e.payload.activeDataKey,t.axisInteraction.click.coordinate=e.payload.activeCoordinate},setSyncInteraction(t,e){t.syncInteraction=e.payload},setKeyboardInteraction(t,e){t.keyboardInteraction.active=e.payload.active,t.keyboardInteraction.index=e.payload.activeIndex,t.keyboardInteraction.coordinate=e.payload.activeCoordinate}}}),{addTooltipEntrySettings:uze,replaceTooltipEntrySettings:dze,removeTooltipEntrySettings:fze,setTooltipSettingsState:Aze,setActiveMouseOverItemIndex:Toe,mouseLeaveItem:hze,mouseLeaveChart:koe,setActiveClickItemIndex:mze,setMouseOverAxisIndex:Foe,setMouseClickAxisIndex:pze,setSyncInteraction:sF,setKeyboardInteraction:iF}=Poe.actions,gze=Poe.reducer;function wG(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter(function(a){return Object.getOwnPropertyDescriptor(t,a).enumerable})),r.push.apply(r,n)}return r}function XC(t){for(var e=1;e<arguments.length;e++){var r=arguments[e]!=null?arguments[e]:{};e%2?wG(Object(r),!0).forEach(function(n){xze(t,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):wG(Object(r)).forEach(function(n){Object.defineProperty(t,n,Object.getOwnPropertyDescriptor(r,n))})}return t}function xze(t,e,r){return(e=vze(e))in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}function vze(t){var e=yze(t,"string");return typeof e=="symbol"?e:e+""}function yze(t,e){if(typeof t!="object"||!t)return t;var r=t[Symbol.toPrimitive];if(r!==void 0){var n=r.call(t,e);if(typeof n!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}function bze(t,e,r){return e==="axis"?r==="click"?t.axisInteraction.click:t.axisInteraction.hover:r==="click"?t.itemInteraction.click:t.itemInteraction.hover}function wze(t){return t.index!=null}var Ooe=(t,e,r,n)=>{if(e==null)return i0;var a=bze(t,e,r);if(a==null)return i0;if(a.active)return a;if(t.keyboardInteraction.active)return t.keyboardInteraction;if(t.syncInteraction.active&&t.syncInteraction.index!=null)return t.syncInteraction;var s=t.settings.active===!0;if(wze(a)){if(s)return XC(XC({},a),{},{active:!0})}else if(n!=null)return{active:!0,coordinate:void 0,dataKey:void 0,index:n,graphicalItemId:void 0};return XC(XC({},i0),{},{coordinate:a.coordinate})};function Nze(t){if(typeof t=="number")return Number.isFinite(t)?t:void 0;if(t instanceof Date){var e=t.valueOf();return Number.isFinite(e)?e:void 0}var r=Number(t);return Number.isFinite(r)?r:void 0}function Cze(t,e){var r=Nze(t),n=e[0],a=e[1];if(r===void 0)return!1;var s=Math.min(n,a),i=Math.max(n,a);return r>=s&&r<=i}function _ze(t,e,r){if(r==null||e==null)return!0;var n=ns(t,e);return n==null||!X0(r)?!0:Cze(n,r)}var u8=(t,e,r,n)=>{var a=t==null?void 0:t.index;if(a==null)return null;var s=Number(a);if(!Os(s))return a;var i=0,l=1/0;e.length>0&&(l=e.length-1);var c=Math.max(i,Math.min(s,l)),u=e[c];return u==null||_ze(u,r,n)?String(c):null},Doe=(t,e,r,n,a,s,i,l)=>{if(!(s==null||l==null)){var c=i[0],u=c==null?void 0:l(c.positions,s);if(u!=null)return u;var d=a==null?void 0:a[Number(s)];if(d)switch(r){case"horizontal":return{x:d.coordinate,y:(n.top+e)/2};default:return{x:(n.left+t)/2,y:d.coordinate}}}},Roe=(t,e,r,n)=>{if(e==="axis")return t.tooltipItemPayloads;if(t.tooltipItemPayloads.length===0)return[];var a;if(r==="hover"?a=t.itemInteraction.hover.graphicalItemId:a=t.itemInteraction.click.graphicalItemId,a==null&&n!=null){var s=t.tooltipItemPayloads[0];return s!=null?[s]:[]}return t.tooltipItemPayloads.filter(i=>{var l;return((l=i.settings)===null||l===void 0?void 0:l.graphicalItemId)===a})},kw=t=>t.options.tooltipPayloadSearcher,Yv=t=>t.tooltip;function NG(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter(function(a){return Object.getOwnPropertyDescriptor(t,a).enumerable})),r.push.apply(r,n)}return r}function CG(t){for(var e=1;e<arguments.length;e++){var r=arguments[e]!=null?arguments[e]:{};e%2?NG(Object(r),!0).forEach(function(n){Eze(t,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):NG(Object(r)).forEach(function(n){Object.defineProperty(t,n,Object.getOwnPropertyDescriptor(r,n))})}return t}function Eze(t,e,r){return(e=Sze(e))in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}function Sze(t){var e=Ize(t,"string");return typeof e=="symbol"?e:e+""}function Ize(t,e){if(typeof t!="object"||!t)return t;var r=t[Symbol.toPrimitive];if(r!==void 0){var n=r.call(t,e);if(typeof n!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}function jze(t,e){return t??e}var Moe=(t,e,r,n,a,s,i)=>{if(!(e==null||s==null)){var{chartData:l,computedData:c,dataStartIndex:u,dataEndIndex:d}=r,f=[];return t.reduce((h,A)=>{var m,{dataDefinedOnItem:p,settings:g}=A,x=jze(p,l),y=Array.isArray(x)?pse(x,u,d):x,b=(m=g==null?void 0:g.dataKey)!==null&&m!==void 0?m:n,w=g==null?void 0:g.nameKey,j;if(n&&Array.isArray(y)&&!Array.isArray(y[0])&&i==="axis"?j=_7e(y,n,a):j=s(y,e,c,w),Array.isArray(j))j.forEach(_=>{var E=CG(CG({},g),{},{name:_.name,unit:_.unit,color:void 0,fill:void 0});h.push(F$({tooltipEntrySettings:E,dataKey:_.dataKey,payload:_.payload,value:ns(_.payload,_.dataKey),name:_.name}))});else{var I;h.push(F$({tooltipEntrySettings:g,dataKey:b,payload:j,value:ns(j,b),name:(I=ns(j,w))!==null&&I!==void 0?I:g==null?void 0:g.name}))}return h},f)}},d8=Rt([Yi,ra,soe,OR,Xi],goe),Bze=Rt([t=>t.graphicalItems.cartesianItems,t=>t.graphicalItems.polarItems],(t,e)=>[...t,...e]),Pze=Rt([Xi,zv],HR),Jv=Rt([Bze,Yi,Pze],KR,{memoizeOptions:{resultEqualityCheck:N3}}),Tze=Rt([Jv],t=>t.filter(b3)),kze=Rt([Jv],GR,{memoizeOptions:{resultEqualityCheck:N3}}),Zv=Rt([kze,oh],qR),Fze=Rt([Tze,oh,Yi],roe),f8=Rt([Zv,Yi,Jv],WR),Loe=Rt([Yi],XR),Oze=Rt([Yi],t=>t.allowDataOverflow),Uoe=Rt([Loe,Oze],kie),Dze=Rt([Jv],t=>t.filter(b3)),Rze=Rt([Fze,Dze,Sw,Wie],coe),Mze=Rt([Rze,oh,Xi,Uoe],uoe),Lze=Rt([Jv],ooe),Uze=Rt([Zv,Yi,Lze,_3,Xi],ZR,{memoizeOptions:{resultEqualityCheck:w3}}),Qze=Rt([doe,Xi,zv],Wv),Vze=Rt([Qze,Xi],hoe),Hze=Rt([foe,Xi,zv],Wv),$ze=Rt([Hze,Xi],moe),Kze=Rt([Aoe,Xi,zv],Wv),Gze=Rt([Kze,Xi],poe),qze=Rt([Vze,Gze,$ze],iI),zze=Rt([Yi,Loe,Uoe,Mze,Uze,qze,ra,Xi],e8),Fw=Rt([Yi,ra,Zv,f8,Sw,Xi,zze],t8),Wze=Rt([Fw,Yi,d8],a8),Xze=Rt([Yi,Fw,Wze,Xi],i8),Qoe=t=>{var e=Xi(t),r=zv(t),n=!1;return Tw(t,e,r,n)},Voe=Rt([Yi,Qoe],v3),Hoe=Rt([Yi,d8,Xze,Voe],n8),Yze=Rt([ra,f8,Yi,Xi],Coe),Jze=Rt([ra,f8,Yi,Xi],_oe),Zze=(t,e,r,n,a,s,i,l)=>{if(e){var{type:c}=e,u=dg(t,l);if(n){var d=r==="scaleBand"&&n.bandwidth?n.bandwidth()/2:2,f=c==="category"&&n.bandwidth?n.bandwidth()/d:0;return f=l==="angleAxis"&&a!=null&&(a==null?void 0:a.length)>=2?Ko(a[0]-a[1])*2*f:f,u&&i?i.map((h,A)=>({coordinate:n(h)+f,value:h,index:A,offset:f})):n.domain().map((h,A)=>({coordinate:n(h)+f,value:s?s[h]:h,index:A,offset:f}))}}},uh=Rt([ra,Yi,d8,Hoe,Qoe,Yze,Jze,Xi],Zze),A8=Rt([Soe,Ioe,lze],(t,e,r)=>joe(r.shared,t,e)),$oe=t=>t.tooltip.settings.trigger,h8=t=>t.tooltip.settings.defaultIndex,Ow=Rt([Yv,A8,$oe,h8],Ooe),Kp=Rt([Ow,Zv,Pw,Fw],u8),Koe=Rt([uh,Kp],Boe),m8=Rt([Ow],t=>{if(t)return t.dataKey}),eWe=Rt([Ow],t=>{if(t)return t.graphicalItemId}),Goe=Rt([Yv,A8,$oe,h8],Roe),tWe=Rt([ah,sh,ra,zi,uh,h8,Goe,kw],Doe),rWe=Rt([Ow,tWe],(t,e)=>t!=null&&t.coordinate?t.coordinate:e),nWe=Rt([Ow],t=>{var e;return(e=t==null?void 0:t.active)!==null&&e!==void 0?e:!1}),aWe=Rt([Goe,Kp,oh,Pw,Koe,kw,A8],Moe);Rt([aWe],t=>{if(t!=null){var e=t.map(r=>r.payload).filter(r=>r!=null);return Array.from(new Set(e))}});function _G(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter(function(a){return Object.getOwnPropertyDescriptor(t,a).enumerable})),r.push.apply(r,n)}return r}function EG(t){for(var e=1;e<arguments.length;e++){var r=arguments[e]!=null?arguments[e]:{};e%2?_G(Object(r),!0).forEach(function(n){sWe(t,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):_G(Object(r)).forEach(function(n){Object.defineProperty(t,n,Object.getOwnPropertyDescriptor(r,n))})}return t}function sWe(t,e,r){return(e=iWe(e))in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}function iWe(t){var e=oWe(t,"string");return typeof e=="symbol"?e:e+""}function oWe(t,e){if(typeof t!="object"||!t)return t;var r=t[Symbol.toPrimitive];if(r!==void 0){var n=r.call(t,e);if(typeof n!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}var lWe=()=>Gr(Yi),cWe=()=>{var t=lWe(),e=Gr(uh),r=Gr(Hoe);return LS(!t||!r?void 0:EG(EG({},t),{},{scale:r}),e)};function SG(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter(function(a){return Object.getOwnPropertyDescriptor(t,a).enumerable})),r.push.apply(r,n)}return r}function qg(t){for(var e=1;e<arguments.length;e++){var r=arguments[e]!=null?arguments[e]:{};e%2?SG(Object(r),!0).forEach(function(n){uWe(t,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):SG(Object(r)).forEach(function(n){Object.defineProperty(t,n,Object.getOwnPropertyDescriptor(r,n))})}return t}function uWe(t,e,r){return(e=dWe(e))in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}function dWe(t){var e=fWe(t,"string");return typeof e=="symbol"?e:e+""}function fWe(t,e){if(typeof t!="object"||!t)return t;var r=t[Symbol.toPrimitive];if(r!==void 0){var n=r.call(t,e);if(typeof n!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}var AWe=(t,e,r,n)=>{var a=e.find(s=>s&&s.index===r);if(a){if(t==="horizontal")return{x:a.coordinate,y:n.chartY};if(t==="vertical")return{x:n.chartX,y:a.coordinate}}return{x:0,y:0}},hWe=(t,e,r,n)=>{var a=e.find(u=>u&&u.index===r);if(a){if(t==="centric"){var s=a.coordinate,{radius:i}=n;return qg(qg(qg({},n),wi(n.cx,n.cy,i,s)),{},{angle:s,radius:i})}var l=a.coordinate,{angle:c}=n;return qg(qg(qg({},n),wi(n.cx,n.cy,l,c)),{},{angle:c,radius:l})}return{angle:0,clockWise:!1,cx:0,cy:0,endAngle:0,innerRadius:0,outerRadius:0,radius:0,startAngle:0,x:0,y:0}};function mWe(t,e){var{chartX:r,chartY:n}=t;return r>=e.left&&r<=e.left+e.width&&n>=e.top&&n<=e.top+e.height}var qoe=(t,e,r,n,a)=>{var s,i=(s=e==null?void 0:e.length)!==null&&s!==void 0?s:0;if(i<=1||t==null)return 0;if(n==="angleAxis"&&a!=null&&Math.abs(Math.abs(a[1]-a[0])-360)<=1e-6)for(var l=0;l<i;l++){var c,u,d,f,h,A=l>0?(c=r[l-1])===null||c===void 0?void 0:c.coordinate:(u=r[i-1])===null||u===void 0?void 0:u.coordinate,m=(d=r[l])===null||d===void 0?void 0:d.coordinate,p=l>=i-1?(f=r[0])===null||f===void 0?void 0:f.coordinate:(h=r[l+1])===null||h===void 0?void 0:h.coordinate,g=void 0;if(!(A==null||m==null||p==null))if(Ko(m-A)!==Ko(p-m)){var x=[];if(Ko(p-m)===Ko(a[1]-a[0])){g=p;var y=m+a[1]-a[0];x[0]=Math.min(y,(y+A)/2),x[1]=Math.max(y,(y+A)/2)}else{g=A;var b=p+a[1]-a[0];x[0]=Math.min(m,(b+m)/2),x[1]=Math.max(m,(b+m)/2)}var w=[Math.min(m,(g+m)/2),Math.max(m,(g+m)/2)];if(t>w[0]&&t<=w[1]||t>=x[0]&&t<=x[1]){var j;return(j=r[l])===null||j===void 0?void 0:j.index}}else{var I=Math.min(A,p),_=Math.max(A,p);if(t>(I+m)/2&&t<=(_+m)/2){var E;return(E=r[l])===null||E===void 0?void 0:E.index}}}else if(e)for(var S=0;S<i;S++){var k=e[S];if(k!=null){var P=e[S+1],T=e[S-1];if(S===0&&P!=null&&t<=(k.coordinate+P.coordinate)/2||S===i-1&&T!=null&&t>(k.coordinate+T.coordinate)/2||S>0&&S<i-1&&T!=null&&P!=null&&t>(k.coordinate+T.coordinate)/2&&t<=(k.coordinate+P.coordinate)/2)return k.index}}return-1},pWe=()=>Gr(OR),p8=(t,e)=>e,zoe=(t,e,r)=>r,g8=(t,e,r,n)=>n,gWe=Rt(uh,t=>H4(t,e=>e.coordinate)),x8=Rt([Yv,p8,zoe,g8],Ooe),v8=Rt([x8,Zv,Pw,Fw],u8),xWe=(t,e,r)=>{if(e!=null){var n=Yv(t);return e==="axis"?r==="hover"?n.axisInteraction.hover.dataKey:n.axisInteraction.click.dataKey:r==="hover"?n.itemInteraction.hover.dataKey:n.itemInteraction.click.dataKey}},Woe=Rt([Yv,p8,zoe,g8],Roe),oI=Rt([ah,sh,ra,zi,uh,g8,Woe,kw],Doe),vWe=Rt([x8,oI],(t,e)=>{var r;return(r=t.coordinate)!==null&&r!==void 0?r:e}),Xoe=Rt([uh,v8],Boe),yWe=Rt([Woe,v8,oh,Pw,Xoe,kw,p8],Moe),bWe=Rt([x8,v8],(t,e)=>({isActive:t.active&&e!=null,activeIndex:e})),wWe=(t,e,r,n,a,s,i)=>{if(!(!t||!r||!n||!a)&&mWe(t,i)){var l=XQe(t,e),c=qoe(l,s,a,r,n),u=AWe(e,a,c,t);return{activeIndex:String(c),activeCoordinate:u}}},NWe=(t,e,r,n,a,s,i)=>{if(!(!t||!n||!a||!s||!r)){var l=u$e(t,r);if(l){var c=YQe(l,e),u=qoe(c,i,s,n,a),d=hWe(e,s,u,l);return{activeIndex:String(u),activeCoordinate:d}}}},CWe=(t,e,r,n,a,s,i,l)=>{if(!(!t||!e||!n||!a||!s))return e==="horizontal"||e==="vertical"?wWe(t,e,n,a,s,i,l):NWe(t,e,r,n,a,s,i)},_We=Rt(t=>t.zIndex.zIndexMap,(t,e)=>e,(t,e,r)=>r,(t,e,r)=>{if(e!=null){var n=t[e];if(n!=null)return r?n.panoramaElement:n.element}}),EWe=Rt(t=>t.zIndex.zIndexMap,t=>{var e=Object.keys(t).map(n=>parseInt(n,10)).concat(Object.values(pl)),r=Array.from(new Set(e));return r.sort((n,a)=>n-a)},{memoizeOptions:{resultEqualityCheck:cqe}});function IG(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter(function(a){return Object.getOwnPropertyDescriptor(t,a).enumerable})),r.push.apply(r,n)}return r}function jG(t){for(var e=1;e<arguments.length;e++){var r=arguments[e]!=null?arguments[e]:{};e%2?IG(Object(r),!0).forEach(function(n){SWe(t,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):IG(Object(r)).forEach(function(n){Object.defineProperty(t,n,Object.getOwnPropertyDescriptor(r,n))})}return t}function SWe(t,e,r){return(e=IWe(e))in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}function IWe(t){var e=jWe(t,"string");return typeof e=="symbol"?e:e+""}function jWe(t,e){if(typeof t!="object"||!t)return t;var r=t[Symbol.toPrimitive];if(r!==void 0){var n=r.call(t,e);if(typeof n!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}var BWe={},PWe={zIndexMap:Object.values(pl).reduce((t,e)=>jG(jG({},t),{},{[e]:{element:void 0,panoramaElement:void 0,consumers:0}}),BWe)},TWe=new Set(Object.values(pl));function kWe(t){return TWe.has(t)}var Yoe=yc({name:"zIndex",initialState:PWe,reducers:{registerZIndexPortal:{reducer:(t,e)=>{var{zIndex:r}=e.payload;t.zIndexMap[r]?t.zIndexMap[r].consumers+=1:t.zIndexMap[r]={consumers:1,element:void 0,panoramaElement:void 0}},prepare:us()},unregisterZIndexPortal:{reducer:(t,e)=>{var{zIndex:r}=e.payload;t.zIndexMap[r]&&(t.zIndexMap[r].consumers-=1,t.zIndexMap[r].consumers<=0&&!kWe(r)&&delete t.zIndexMap[r])},prepare:us()},registerZIndexPortalElement:{reducer:(t,e)=>{var{zIndex:r,element:n,isPanorama:a}=e.payload;t.zIndexMap[r]?a?t.zIndexMap[r].panoramaElement=n:t.zIndexMap[r].element=n:t.zIndexMap[r]={consumers:0,element:a?void 0:n,panoramaElement:a?n:void 0}},prepare:us()},unregisterZIndexPortalElement:{reducer:(t,e)=>{var{zIndex:r}=e.payload;t.zIndexMap[r]&&(e.payload.isPanorama?t.zIndexMap[r].panoramaElement=void 0:t.zIndexMap[r].element=void 0)},prepare:us()}}}),{registerZIndexPortal:FWe,unregisterZIndexPortal:OWe,registerZIndexPortalElement:DWe,unregisterZIndexPortalElement:RWe}=Yoe.actions,MWe=Yoe.reducer;function Mf(t){var{zIndex:e,children:r}=t,n=_Ve(),a=n&&e!==void 0&&e!==0,s=nu(),i=qa();v.useLayoutEffect(()=>a?(i(FWe({zIndex:e})),()=>{i(OWe({zIndex:e}))}):pw,[i,e,a]);var l=Gr(c=>_We(c,e,s));return a?l?zc.createPortal(r,l):null:r}function oF(){return oF=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var r=arguments[e];for(var n in r)({}).hasOwnProperty.call(r,n)&&(t[n]=r[n])}return t},oF.apply(null,arguments)}function BG(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter(function(a){return Object.getOwnPropertyDescriptor(t,a).enumerable})),r.push.apply(r,n)}return r}function YC(t){for(var e=1;e<arguments.length;e++){var r=arguments[e]!=null?arguments[e]:{};e%2?BG(Object(r),!0).forEach(function(n){LWe(t,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):BG(Object(r)).forEach(function(n){Object.defineProperty(t,n,Object.getOwnPropertyDescriptor(r,n))})}return t}function LWe(t,e,r){return(e=UWe(e))in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}function UWe(t){var e=QWe(t,"string");return typeof e=="symbol"?e:e+""}function QWe(t,e){if(typeof t!="object"||!t)return t;var r=t[Symbol.toPrimitive];if(r!==void 0){var n=r.call(t,e);if(typeof n!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}function VWe(t){var{cursor:e,cursorComp:r,cursorProps:n}=t;return v.isValidElement(e)?v.cloneElement(e,n):v.createElement(r,n)}function HWe(t){var e,{coordinate:r,payload:n,index:a,offset:s,tooltipAxisBandSize:i,layout:l,cursor:c,tooltipEventType:u,chartName:d}=t,f=r,h=n,A=a;if(!c||!f||d!=="ScatterChart"&&u!=="axis")return null;var m,p,g;if(d==="ScatterChart")m=f,p=CHe,g=pl.cursorLine;else if(d==="BarChart")m=_He(l,f,s,i),p=$se,g=pl.cursorRectangle;else if(l==="radial"&&uae(f)){var{cx:x,cy:y,radius:b,startAngle:w,endAngle:j}=Gse(f);m={cx:x,cy:y,startAngle:w,endAngle:j,innerRadius:b,outerRadius:b},p=zse,g=pl.cursorLine}else m={points:h$e(l,f,s)},p=cR,g=pl.cursorLine;var I=typeof c=="object"&&"className"in c?c.className:void 0,_=YC(YC(YC(YC({stroke:"#ccc",pointerEvents:"none"},s),m),p2(c)),{},{payload:h,payloadIndex:A,className:Ea("recharts-tooltip-cursor",I)});return v.createElement(Mf,{zIndex:(e=t.zIndex)!==null&&e!==void 0?e:g},v.createElement(VWe,{cursor:c,cursorComp:p,cursorProps:_}))}function $We(t){var e=cWe(),r=NVe(),n=bw(),a=pWe();return e==null||r==null||n==null||a==null?null:v.createElement(HWe,oF({},t,{offset:r,layout:n,tooltipAxisBandSize:e,chartName:a}))}var Joe=v.createContext(null),KWe=()=>v.useContext(Joe),Zoe={exports:{}};(function(t){var e=Object.prototype.hasOwnProperty,r="~";function n(){}Object.create&&(n.prototype=Object.create(null),new n().__proto__||(r=!1));function a(c,u,d){this.fn=c,this.context=u,this.once=d||!1}function s(c,u,d,f,h){if(typeof d!="function")throw new TypeError("The listener must be a function");var A=new a(d,f||c,h),m=r?r+u:u;return c._events[m]?c._events[m].fn?c._events[m]=[c._events[m],A]:c._events[m].push(A):(c._events[m]=A,c._eventsCount++),c}function i(c,u){--c._eventsCount===0?c._events=new n:delete c._events[u]}function l(){this._events=new n,this._eventsCount=0}l.prototype.eventNames=function(){var u=[],d,f;if(this._eventsCount===0)return u;for(f in d=this._events)e.call(d,f)&&u.push(r?f.slice(1):f);return Object.getOwnPropertySymbols?u.concat(Object.getOwnPropertySymbols(d)):u},l.prototype.listeners=function(u){var d=r?r+u:u,f=this._events[d];if(!f)return[];if(f.fn)return[f.fn];for(var h=0,A=f.length,m=new Array(A);h<A;h++)m[h]=f[h].fn;return m},l.prototype.listenerCount=function(u){var d=r?r+u:u,f=this._events[d];return f?f.fn?1:f.length:0},l.prototype.emit=function(u,d,f,h,A,m){var p=r?r+u:u;if(!this._events[p])return!1;var g=this._events[p],x=arguments.length,y,b;if(g.fn){switch(g.once&&this.removeListener(u,g.fn,void 0,!0),x){case 1:return g.fn.call(g.context),!0;case 2:return g.fn.call(g.context,d),!0;case 3:return g.fn.call(g.context,d,f),!0;case 4:return g.fn.call(g.context,d,f,h),!0;case 5:return g.fn.call(g.context,d,f,h,A),!0;case 6:return g.fn.call(g.context,d,f,h,A,m),!0}for(b=1,y=new Array(x-1);b<x;b++)y[b-1]=arguments[b];g.fn.apply(g.context,y)}else{var w=g.length,j;for(b=0;b<w;b++)switch(g[b].once&&this.removeListener(u,g[b].fn,void 0,!0),x){case 1:g[b].fn.call(g[b].context);break;case 2:g[b].fn.call(g[b].context,d);break;case 3:g[b].fn.call(g[b].context,d,f);break;case 4:g[b].fn.call(g[b].context,d,f,h);break;default:if(!y)for(j=1,y=new Array(x-1);j<x;j++)y[j-1]=arguments[j];g[b].fn.apply(g[b].context,y)}}return!0},l.prototype.on=function(u,d,f){return s(this,u,d,f,!1)},l.prototype.once=function(u,d,f){return s(this,u,d,f,!0)},l.prototype.removeListener=function(u,d,f,h){var A=r?r+u:u;if(!this._events[A])return this;if(!d)return i(this,A),this;var m=this._events[A];if(m.fn)m.fn===d&&(!h||m.once)&&(!f||m.context===f)&&i(this,A);else{for(var p=0,g=[],x=m.length;p<x;p++)(m[p].fn!==d||h&&!m[p].once||f&&m[p].context!==f)&&g.push(m[p]);g.length?this._events[A]=g.length===1?g[0]:g:i(this,A)}return this},l.prototype.removeAllListeners=function(u){var d;return u?(d=r?r+u:u,this._events[d]&&i(this,d)):(this._events=new n,this._eventsCount=0),this},l.prototype.off=l.prototype.removeListener,l.prototype.addListener=l.prototype.on,l.prefixed=r,l.EventEmitter=l,t.exports=l})(Zoe);var GWe=Zoe.exports;const qWe=zA(GWe);var B2=new qWe,lF="recharts.syncEvent.tooltip",PG="recharts.syncEvent.brush";function ele(t,e){if(e){var r=Number.parseInt(e,10);if(!jf(r))return t==null?void 0:t[r]}}var zWe={chartName:"",tooltipPayloadSearcher:void 0,eventEmitter:void 0,defaultTooltipEventType:"axis"},tle=yc({name:"options",initialState:zWe,reducers:{createEventEmitter:t=>{t.eventEmitter==null&&(t.eventEmitter=Symbol("rechartsEventEmitter"))}}}),WWe=tle.reducer,{createEventEmitter:XWe}=tle.actions;function YWe(t){return t.tooltip.syncInteraction}var JWe={chartData:void 0,computedData:void 0,dataStartIndex:0,dataEndIndex:0},rle=yc({name:"chartData",initialState:JWe,reducers:{setChartData(t,e){if(t.chartData=e.payload,e.payload==null){t.dataStartIndex=0,t.dataEndIndex=0;return}e.payload.length>0&&t.dataEndIndex!==e.payload.length-1&&(t.dataEndIndex=e.payload.length-1)},setComputedData(t,e){t.computedData=e.payload},setDataStartEndIndexes(t,e){var{startIndex:r,endIndex:n}=e.payload;r!=null&&(t.dataStartIndex=r),n!=null&&(t.dataEndIndex=n)}}}),{setChartData:TG,setDataStartEndIndexes:ZWe,setComputedData:ant}=rle.actions,eXe=rle.reducer,tXe=["x","y"];function kG(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter(function(a){return Object.getOwnPropertyDescriptor(t,a).enumerable})),r.push.apply(r,n)}return r}function zg(t){for(var e=1;e<arguments.length;e++){var r=arguments[e]!=null?arguments[e]:{};e%2?kG(Object(r),!0).forEach(function(n){rXe(t,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):kG(Object(r)).forEach(function(n){Object.defineProperty(t,n,Object.getOwnPropertyDescriptor(r,n))})}return t}function rXe(t,e,r){return(e=nXe(e))in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}function nXe(t){var e=aXe(t,"string");return typeof e=="symbol"?e:e+""}function aXe(t,e){if(typeof t!="object"||!t)return t;var r=t[Symbol.toPrimitive];if(r!==void 0){var n=r.call(t,e);if(typeof n!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}function sXe(t,e){if(t==null)return{};var r,n,a=iXe(t,e);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(t);for(n=0;n<s.length;n++)r=s[n],e.indexOf(r)===-1&&{}.propertyIsEnumerable.call(t,r)&&(a[r]=t[r])}return a}function iXe(t,e){if(t==null)return{};var r={};for(var n in t)if({}.hasOwnProperty.call(t,n)){if(e.indexOf(n)!==-1)continue;r[n]=t[n]}return r}function oXe(){var t=Gr(DR),e=Gr(RR),r=qa(),n=Gr(Xie),a=Gr(uh),s=bw(),i=a3(),l=Gr(c=>c.rootProps.className);v.useEffect(()=>{if(t==null)return pw;var c=(u,d,f)=>{if(e!==f&&t===u){if(n==="index"){var h;if(i&&d!==null&&d!==void 0&&(h=d.payload)!==null&&h!==void 0&&h.coordinate&&d.payload.sourceViewBox){var A=d.payload.coordinate,{x:m,y:p}=A,g=sXe(A,tXe),{x,y,width:b,height:w}=d.payload.sourceViewBox,j=zg(zg({},g),{},{x:i.x+(b?(m-x)/b:0)*i.width,y:i.y+(w?(p-y)/w:0)*i.height});r(zg(zg({},d),{},{payload:zg(zg({},d.payload),{},{coordinate:j})}))}else r(d);return}if(a!=null){var I;if(typeof n=="function"){var _={activeTooltipIndex:d.payload.index==null?void 0:Number(d.payload.index),isTooltipActive:d.payload.active,activeIndex:d.payload.index==null?void 0:Number(d.payload.index),activeLabel:d.payload.label,activeDataKey:d.payload.dataKey,activeCoordinate:d.payload.coordinate},E=n(a,_);I=a[E]}else n==="value"&&(I=a.find(ue=>String(ue.value)===d.payload.label));var{coordinate:S}=d.payload;if(I==null||d.payload.active===!1||S==null||i==null){r(sF({active:!1,coordinate:void 0,dataKey:void 0,index:null,label:void 0,sourceViewBox:void 0,graphicalItemId:void 0}));return}var{x:k,y:P}=S,T=Math.min(k,i.x+i.width),F=Math.min(P,i.y+i.height),Y={x:s==="horizontal"?I.coordinate:T,y:s==="horizontal"?F:I.coordinate},he=sF({active:d.payload.active,coordinate:Y,dataKey:d.payload.dataKey,index:String(I.index),label:d.payload.label,sourceViewBox:d.payload.sourceViewBox,graphicalItemId:d.payload.graphicalItemId});r(he)}}};return B2.on(lF,c),()=>{B2.off(lF,c)}},[l,r,e,t,n,a,s,i])}function lXe(){var t=Gr(DR),e=Gr(RR),r=qa();v.useEffect(()=>{if(t==null)return pw;var n=(a,s,i)=>{e!==i&&t===a&&r(ZWe(s))};return B2.on(PG,n),()=>{B2.off(PG,n)}},[r,e,t])}function cXe(){var t=qa();v.useEffect(()=>{t(XWe())},[t]),oXe(),lXe()}function uXe(t,e,r,n,a,s){var i=Gr(A=>xWe(A,t,e)),l=Gr(RR),c=Gr(DR),u=Gr(Xie),d=Gr(YWe),f=d==null?void 0:d.active,h=a3();v.useEffect(()=>{if(!f&&c!=null&&l!=null){var A=sF({active:s,coordinate:r,dataKey:i,index:a,label:typeof n=="number"?String(n):n,sourceViewBox:h,graphicalItemId:void 0});B2.emit(lF,c,A,l)}},[f,r,i,a,n,l,c,u,s,h])}function FG(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter(function(a){return Object.getOwnPropertyDescriptor(t,a).enumerable})),r.push.apply(r,n)}return r}function OG(t){for(var e=1;e<arguments.length;e++){var r=arguments[e]!=null?arguments[e]:{};e%2?FG(Object(r),!0).forEach(function(n){dXe(t,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):FG(Object(r)).forEach(function(n){Object.defineProperty(t,n,Object.getOwnPropertyDescriptor(r,n))})}return t}function dXe(t,e,r){return(e=fXe(e))in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}function fXe(t){var e=AXe(t,"string");return typeof e=="symbol"?e:e+""}function AXe(t,e){if(typeof t!="object"||!t)return t;var r=t[Symbol.toPrimitive];if(r!==void 0){var n=r.call(t,e);if(typeof n!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}function hXe(t){return t.dataKey}function mXe(t,e){return v.isValidElement(t)?v.cloneElement(t,e):typeof t=="function"?v.createElement(t,e):v.createElement(nHe,e)}var DG=[],pXe={allowEscapeViewBox:{x:!1,y:!1},animationDuration:400,animationEasing:"ease",axisId:0,contentStyle:{},cursor:!0,filterNull:!0,includeHidden:!1,isAnimationActive:"auto",itemSorter:"name",itemStyle:{},labelStyle:{},offset:10,reverseDirection:{x:!1,y:!1},separator:" : ",trigger:"hover",useTranslate3d:!1,wrapperStyle:{}};function RG(t){var e,r,n=zo(t,pXe),{active:a,allowEscapeViewBox:s,animationDuration:i,animationEasing:l,content:c,filterNull:u,isAnimationActive:d,offset:f,payloadUniqBy:h,position:A,reverseDirection:m,useTranslate3d:p,wrapperStyle:g,cursor:x,shared:y,trigger:b,defaultIndex:w,portal:j,axisId:I}=n,_=qa(),E=typeof w=="number"?String(w):w;v.useEffect(()=>{_(Aze({shared:y,trigger:b,axisId:I,active:a,defaultIndex:E}))},[_,y,b,I,a,E]);var S=a3(),k=Lse(),P=oze(y),{activeIndex:T,isActive:F}=(e=Gr(W=>bWe(W,P,b,E)))!==null&&e!==void 0?e:{},Y=Gr(W=>yWe(W,P,b,E)),he=Gr(W=>Xoe(W,P,b,E)),ue=Gr(W=>vWe(W,P,b,E)),fe=Y,me=KWe(),ne=(r=a??F)!==null&&r!==void 0?r:!1,[Pe,Ie]=Uae([fe,ne]),O=P==="axis"?he:void 0;uXe(P,b,ue,O,T,ne);var H=j??me;if(H==null||S==null||P==null)return null;var R=fe??DG;ne||(R=DG),u&&R.length&&(R=Iae(R.filter(W=>W.value!=null&&(W.hide!==!0||n.includeHidden)),h,hXe));var M=R.length>0,K=v.createElement(uHe,{allowEscapeViewBox:s,animationDuration:i,animationEasing:l,isAnimationActive:d,active:ne,coordinate:ue,hasPayload:M,offset:f,position:A,reverseDirection:m,useTranslate3d:p,viewBox:S,wrapperStyle:g,lastBoundingBox:Pe,innerRef:Ie,hasPortalFromProps:!!j},mXe(c,OG(OG({},n),{},{payload:R,label:O,active:ne,activeIndex:T,coordinate:ue,accessibilityLayer:k})));return v.createElement(v.Fragment,null,zc.createPortal(K,H),ne&&v.createElement($We,{cursor:x,tooltipEventType:P,coordinate:ue,payload:R,index:T}))}var Dw=t=>null;Dw.displayName="Cell";function gXe(t,e,r){return(e=xXe(e))in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}function xXe(t){var e=vXe(t,"string");return typeof e=="symbol"?e:e+""}function vXe(t,e){if(typeof t!="object"||!t)return t;var r=t[Symbol.toPrimitive];if(r!==void 0){var n=r.call(t,e);if(typeof n!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}class yXe{constructor(e){gXe(this,"cache",new Map),this.maxSize=e}get(e){var r=this.cache.get(e);return r!==void 0&&(this.cache.delete(e),this.cache.set(e,r)),r}set(e,r){if(this.cache.has(e))this.cache.delete(e);else if(this.cache.size>=this.maxSize){var n=this.cache.keys().next().value;n!=null&&this.cache.delete(n)}this.cache.set(e,r)}clear(){this.cache.clear()}size(){return this.cache.size}}function MG(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter(function(a){return Object.getOwnPropertyDescriptor(t,a).enumerable})),r.push.apply(r,n)}return r}function bXe(t){for(var e=1;e<arguments.length;e++){var r=arguments[e]!=null?arguments[e]:{};e%2?MG(Object(r),!0).forEach(function(n){wXe(t,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):MG(Object(r)).forEach(function(n){Object.defineProperty(t,n,Object.getOwnPropertyDescriptor(r,n))})}return t}function wXe(t,e,r){return(e=NXe(e))in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}function NXe(t){var e=CXe(t,"string");return typeof e=="symbol"?e:e+""}function CXe(t,e){if(typeof t!="object"||!t)return t;var r=t[Symbol.toPrimitive];if(r!==void 0){var n=r.call(t,e);if(typeof n!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}var _Xe={cacheSize:2e3,enableCache:!0},nle=bXe({},_Xe),LG=new yXe(nle.cacheSize),EXe={position:"absolute",top:"-20000px",left:0,padding:0,margin:0,border:"none",whiteSpace:"pre"},UG="recharts_measurement_span";function SXe(t,e){var r=e.fontSize||"",n=e.fontFamily||"",a=e.fontWeight||"",s=e.fontStyle||"",i=e.letterSpacing||"",l=e.textTransform||"";return"".concat(t,"|").concat(r,"|").concat(n,"|").concat(a,"|").concat(s,"|").concat(i,"|").concat(l)}var QG=(t,e)=>{try{var r=document.getElementById(UG);r||(r=document.createElement("span"),r.setAttribute("id",UG),r.setAttribute("aria-hidden","true"),document.body.appendChild(r)),Object.assign(r.style,EXe,e),r.textContent="".concat(t);var n=r.getBoundingClientRect();return{width:n.width,height:n.height}}catch{return{width:0,height:0}}},db=function(e){var r=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};if(e==null||c3.isSsr)return{width:0,height:0};if(!nle.enableCache)return QG(e,r);var n=SXe(e,r),a=LG.get(n);if(a)return a;var s=QG(e,r);return LG.set(n,s),s},ale;function IXe(t,e,r){return(e=jXe(e))in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}function jXe(t){var e=BXe(t,"string");return typeof e=="symbol"?e:e+""}function BXe(t,e){if(typeof t!="object"||!t)return t;var r=t[Symbol.toPrimitive];if(r!==void 0){var n=r.call(t,e);if(typeof n!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}var VG=/(-?\d+(?:\.\d+)?[a-zA-Z%]*)([*/])(-?\d+(?:\.\d+)?[a-zA-Z%]*)/,HG=/(-?\d+(?:\.\d+)?[a-zA-Z%]*)([+-])(-?\d+(?:\.\d+)?[a-zA-Z%]*)/,PXe=/^px|cm|vh|vw|em|rem|%|mm|in|pt|pc|ex|ch|vmin|vmax|Q$/,TXe=/(-?\d+(?:\.\d+)?)([a-zA-Z%]+)?/,kXe={cm:96/2.54,mm:96/25.4,pt:96/72,pc:96/6,in:96,Q:96/(2.54*40),px:1},FXe=["cm","mm","pt","pc","in","Q","px"];function OXe(t){return FXe.includes(t)}var Sx="NaN";function DXe(t,e){return t*kXe[e]}class Fo{static parse(e){var r,[,n,a]=(r=TXe.exec(e))!==null&&r!==void 0?r:[];return n==null?Fo.NaN:new Fo(parseFloat(n),a??"")}constructor(e,r){this.num=e,this.unit=r,this.num=e,this.unit=r,jf(e)&&(this.unit=""),r!==""&&!PXe.test(r)&&(this.num=NaN,this.unit=""),OXe(r)&&(this.num=DXe(e,r),this.unit="px")}add(e){return this.unit!==e.unit?new Fo(NaN,""):new Fo(this.num+e.num,this.unit)}subtract(e){return this.unit!==e.unit?new Fo(NaN,""):new Fo(this.num-e.num,this.unit)}multiply(e){return this.unit!==""&&e.unit!==""&&this.unit!==e.unit?new Fo(NaN,""):new Fo(this.num*e.num,this.unit||e.unit)}divide(e){return this.unit!==""&&e.unit!==""&&this.unit!==e.unit?new Fo(NaN,""):new Fo(this.num/e.num,this.unit||e.unit)}toString(){return"".concat(this.num).concat(this.unit)}isNaN(){return jf(this.num)}}ale=Fo;IXe(Fo,"NaN",new ale(NaN,""));function sle(t){if(t==null||t.includes(Sx))return Sx;for(var e=t;e.includes("*")||e.includes("/");){var r,[,n,a,s]=(r=VG.exec(e))!==null&&r!==void 0?r:[],i=Fo.parse(n??""),l=Fo.parse(s??""),c=a==="*"?i.multiply(l):i.divide(l);if(c.isNaN())return Sx;e=e.replace(VG,c.toString())}for(;e.includes("+")||/.-\d+(?:\.\d+)?/.test(e);){var u,[,d,f,h]=(u=HG.exec(e))!==null&&u!==void 0?u:[],A=Fo.parse(d??""),m=Fo.parse(h??""),p=f==="+"?A.add(m):A.subtract(m);if(p.isNaN())return Sx;e=e.replace(HG,p.toString())}return e}var $G=/\(([^()]*)\)/;function RXe(t){for(var e=t,r;(r=$G.exec(e))!=null;){var[,n]=r;e=e.replace($G,sle(n))}return e}function MXe(t){var e=t.replace(/\s+/g,"");return e=RXe(e),e=sle(e),e}function LXe(t){try{return MXe(t)}catch{return Sx}}function FB(t){var e=LXe(t.slice(5,-1));return e===Sx?"":e}var UXe=["x","y","lineHeight","capHeight","fill","scaleToFit","textAnchor","verticalAnchor"],QXe=["dx","dy","angle","className","breakAll"];function cF(){return cF=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var r=arguments[e];for(var n in r)({}).hasOwnProperty.call(r,n)&&(t[n]=r[n])}return t},cF.apply(null,arguments)}function KG(t,e){if(t==null)return{};var r,n,a=VXe(t,e);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(t);for(n=0;n<s.length;n++)r=s[n],e.indexOf(r)===-1&&{}.propertyIsEnumerable.call(t,r)&&(a[r]=t[r])}return a}function VXe(t,e){if(t==null)return{};var r={};for(var n in t)if({}.hasOwnProperty.call(t,n)){if(e.indexOf(n)!==-1)continue;r[n]=t[n]}return r}var ile=/[ \f\n\r\t\v\u2028\u2029]+/,ole=t=>{var{children:e,breakAll:r,style:n}=t;try{var a=[];vo(e)||(r?a=e.toString().split(""):a=e.toString().split(ile));var s=a.map(l=>({word:l,width:db(l,n).width})),i=r?0:db("",n).width;return{wordsWithComputedWidth:s,spaceWidth:i}}catch{return null}};function HXe(t){return t==="start"||t==="middle"||t==="end"||t==="inherit"}var lle=(t,e,r,n)=>t.reduce((a,s)=>{var{word:i,width:l}=s,c=a[a.length-1];if(c&&l!=null&&(e==null||n||c.width+l+r<Number(e)))c.words.push(i),c.width+=l+r;else{var u={words:[i],width:l};a.push(u)}return a},[]),cle=t=>t.reduce((e,r)=>e.width>r.width?e:r),$Xe="",GG=(t,e,r,n,a,s,i,l)=>{var c=t.slice(0,e),u=ole({breakAll:r,style:n,children:c+$Xe});if(!u)return[!1,[]];var d=lle(u.wordsWithComputedWidth,s,i,l),f=d.length>a||cle(d).width>Number(s);return[f,d]},KXe=(t,e,r,n,a)=>{var{maxLines:s,children:i,style:l,breakAll:c}=t,u=Wr(s),d=String(i),f=lle(e,n,r,a);if(!u||a)return f;var h=f.length>s||cle(f).width>Number(n);if(!h)return f;for(var A=0,m=d.length-1,p=0,g;A<=m&&p<=d.length-1;){var x=Math.floor((A+m)/2),y=x-1,[b,w]=GG(d,y,c,l,s,n,r,a),[j]=GG(d,x,c,l,s,n,r,a);if(!b&&!j&&(A=x+1),b&&j&&(m=x-1),!b&&j){g=w;break}p++}return g||f},qG=t=>{var e=vo(t)?[]:t.toString().split(ile);return[{words:e,width:void 0}]},GXe=t=>{var{width:e,scaleToFit:r,children:n,style:a,breakAll:s,maxLines:i}=t;if((e||r)&&!c3.isSsr){var l,c,u=ole({breakAll:s,children:n,style:a});if(u){var{wordsWithComputedWidth:d,spaceWidth:f}=u;l=d,c=f}else return qG(n);return KXe({breakAll:s,children:n,maxLines:i,style:a},l,c,e,!!r)}return qG(n)},ule="#808080",qXe={angle:0,breakAll:!1,capHeight:"0.71em",fill:ule,lineHeight:"1em",scaleToFit:!1,textAnchor:"start",verticalAnchor:"end",x:0,y:0},j3=v.forwardRef((t,e)=>{var r=zo(t,qXe),{x:n,y:a,lineHeight:s,capHeight:i,fill:l,scaleToFit:c,textAnchor:u,verticalAnchor:d}=r,f=KG(r,UXe),h=v.useMemo(()=>GXe({breakAll:f.breakAll,children:f.children,maxLines:f.maxLines,scaleToFit:c,style:f.style,width:f.width}),[f.breakAll,f.children,f.maxLines,c,f.style,f.width]),{dx:A,dy:m,angle:p,className:g,breakAll:x}=f,y=KG(f,QXe);if(!Bf(n)||!Bf(a)||h.length===0)return null;var b=Number(n)+(Wr(A)?A:0),w=Number(a)+(Wr(m)?m:0);if(!Os(b)||!Os(w))return null;var j;switch(d){case"start":j=FB("calc(".concat(i,")"));break;case"middle":j=FB("calc(".concat((h.length-1)/2," * -").concat(s," + (").concat(i," / 2))"));break;default:j=FB("calc(".concat(h.length-1," * -").concat(s,")"));break}var I=[];if(c){var _=h[0].width,{width:E}=f;I.push("scale(".concat(Wr(E)&&Wr(_)?E/_:1,")"))}return p&&I.push("rotate(".concat(p,", ").concat(b,", ").concat(w,")")),I.length&&(y.transform=I.join(" ")),v.createElement("text",cF({},zu(y),{ref:e,x:b,y:w,className:Ea("recharts-text",g),textAnchor:u,fill:l.includes("url")?ule:l}),h.map((S,k)=>{var P=S.words.join(x?"":" ");return v.createElement("tspan",{x:b,dy:k===0?j:s,key:"".concat(P,"-").concat(k)},P)}))});j3.displayName="Text";var zXe=["labelRef"],WXe=["content"];function zG(t,e){if(t==null)return{};var r,n,a=XXe(t,e);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(t);for(n=0;n<s.length;n++)r=s[n],e.indexOf(r)===-1&&{}.propertyIsEnumerable.call(t,r)&&(a[r]=t[r])}return a}function XXe(t,e){if(t==null)return{};var r={};for(var n in t)if({}.hasOwnProperty.call(t,n)){if(e.indexOf(n)!==-1)continue;r[n]=t[n]}return r}function WG(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter(function(a){return Object.getOwnPropertyDescriptor(t,a).enumerable})),r.push.apply(r,n)}return r}function ni(t){for(var e=1;e<arguments.length;e++){var r=arguments[e]!=null?arguments[e]:{};e%2?WG(Object(r),!0).forEach(function(n){YXe(t,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):WG(Object(r)).forEach(function(n){Object.defineProperty(t,n,Object.getOwnPropertyDescriptor(r,n))})}return t}function YXe(t,e,r){return(e=JXe(e))in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}function JXe(t){var e=ZXe(t,"string");return typeof e=="symbol"?e:e+""}function ZXe(t,e){if(typeof t!="object"||!t)return t;var r=t[Symbol.toPrimitive];if(r!==void 0){var n=r.call(t,e);if(typeof n!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}function uA(){return uA=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var r=arguments[e];for(var n in r)({}).hasOwnProperty.call(r,n)&&(t[n]=r[n])}return t},uA.apply(null,arguments)}var dle=v.createContext(null),eYe=t=>{var{x:e,y:r,upperWidth:n,lowerWidth:a,width:s,height:i,children:l}=t,c=v.useMemo(()=>({x:e,y:r,upperWidth:n,lowerWidth:a,width:s,height:i}),[e,r,n,a,s,i]);return v.createElement(dle.Provider,{value:c},l)},fle=()=>{var t=v.useContext(dle),e=a3();return t||Ese(e)},tYe=v.createContext(null),rYe=()=>{var t=v.useContext(tYe),e=Gr(toe);return t||e},nYe=t=>{var{value:e,formatter:r}=t,n=vo(t.children)?e:t.children;return typeof r=="function"?r(n):n},y8=t=>t!=null&&typeof t=="function",aYe=(t,e)=>{var r=Ko(e-t),n=Math.min(Math.abs(e-t),360);return r*n},sYe=(t,e,r,n,a)=>{var{offset:s,className:i}=t,{cx:l,cy:c,innerRadius:u,outerRadius:d,startAngle:f,endAngle:h,clockWise:A}=a,m=(u+d)/2,p=aYe(f,h),g=p>=0?1:-1,x,y;switch(e){case"insideStart":x=f+g*s,y=A;break;case"insideEnd":x=h-g*s,y=!A;break;case"end":x=h+g*s,y=A;break;default:throw new Error("Unsupported position ".concat(e))}y=p<=0?y:!y;var b=wi(l,c,m,x),w=wi(l,c,m,x+(y?1:-1)*359),j="M".concat(b.x,",").concat(b.y,`
    A`).concat(m,",").concat(m,",0,1,").concat(y?0:1,`,
    `).concat(w.x,",").concat(w.y),I=vo(t.id)?g2("recharts-radial-line-"):t.id;return v.createElement("text",uA({},n,{dominantBaseline:"central",className:Ea("recharts-radial-bar-label",i)}),v.createElement("defs",null,v.createElement("path",{id:I,d:j})),v.createElement("textPath",{xlinkHref:"#".concat(I)},r))},iYe=(t,e,r)=>{var{cx:n,cy:a,innerRadius:s,outerRadius:i,startAngle:l,endAngle:c}=t,u=(l+c)/2;if(r==="outside"){var{x:d,y:f}=wi(n,a,i+e,u);return{x:d,y:f,textAnchor:d>=n?"start":"end",verticalAnchor:"middle"}}if(r==="center")return{x:n,y:a,textAnchor:"middle",verticalAnchor:"middle"};if(r==="centerTop")return{x:n,y:a,textAnchor:"middle",verticalAnchor:"start"};if(r==="centerBottom")return{x:n,y:a,textAnchor:"middle",verticalAnchor:"end"};var h=(s+i)/2,{x:A,y:m}=wi(n,a,h,u);return{x:A,y:m,textAnchor:"middle",verticalAnchor:"middle"}},uF=t=>"cx"in t&&Wr(t.cx),oYe=(t,e)=>{var{parentViewBox:r,offset:n,position:a}=t,s;r!=null&&!uF(r)&&(s=r);var{x:i,y:l,upperWidth:c,lowerWidth:u,height:d}=e,f=i,h=i+(c-u)/2,A=(f+h)/2,m=(c+u)/2,p=f+c/2,g=d>=0?1:-1,x=g*n,y=g>0?"end":"start",b=g>0?"start":"end",w=c>=0?1:-1,j=w*n,I=w>0?"end":"start",_=w>0?"start":"end";if(a==="top"){var E={x:f+c/2,y:l-x,textAnchor:"middle",verticalAnchor:y};return ni(ni({},E),s?{height:Math.max(l-s.y,0),width:c}:{})}if(a==="bottom"){var S={x:h+u/2,y:l+d+x,textAnchor:"middle",verticalAnchor:b};return ni(ni({},S),s?{height:Math.max(s.y+s.height-(l+d),0),width:u}:{})}if(a==="left"){var k={x:A-j,y:l+d/2,textAnchor:I,verticalAnchor:"middle"};return ni(ni({},k),s?{width:Math.max(k.x-s.x,0),height:d}:{})}if(a==="right"){var P={x:A+m+j,y:l+d/2,textAnchor:_,verticalAnchor:"middle"};return ni(ni({},P),s?{width:Math.max(s.x+s.width-P.x,0),height:d}:{})}var T=s?{width:m,height:d}:{};return a==="insideLeft"?ni({x:A+j,y:l+d/2,textAnchor:_,verticalAnchor:"middle"},T):a==="insideRight"?ni({x:A+m-j,y:l+d/2,textAnchor:I,verticalAnchor:"middle"},T):a==="insideTop"?ni({x:f+c/2,y:l+x,textAnchor:"middle",verticalAnchor:b},T):a==="insideBottom"?ni({x:h+u/2,y:l+d-x,textAnchor:"middle",verticalAnchor:y},T):a==="insideTopLeft"?ni({x:f+j,y:l+x,textAnchor:_,verticalAnchor:b},T):a==="insideTopRight"?ni({x:f+c-j,y:l+x,textAnchor:I,verticalAnchor:b},T):a==="insideBottomLeft"?ni({x:h+j,y:l+d-x,textAnchor:_,verticalAnchor:y},T):a==="insideBottomRight"?ni({x:h+u-j,y:l+d-x,textAnchor:I,verticalAnchor:y},T):a&&typeof a=="object"&&(Wr(a.x)||QA(a.x))&&(Wr(a.y)||QA(a.y))?ni({x:i+xl(a.x,m),y:l+xl(a.y,d),textAnchor:"end",verticalAnchor:"end"},T):ni({x:p,y:l+d/2,textAnchor:"middle",verticalAnchor:"middle"},T)},lYe={angle:0,offset:5,zIndex:pl.label,position:"middle",textBreakAll:!1};function Xh(t){var e=zo(t,lYe),{viewBox:r,position:n,value:a,children:s,content:i,className:l="",textBreakAll:c,labelRef:u}=e,d=rYe(),f=fle(),h=n==="center"?f:d??f,A,m,p;if(r==null?A=h:uF(r)?A=r:A=Ese(r),!A||vo(a)&&vo(s)&&!v.isValidElement(i)&&typeof i!="function")return null;var g=ni(ni({},e),{},{viewBox:A});if(v.isValidElement(i)){var{labelRef:x}=g,y=zG(g,zXe);return v.cloneElement(i,y)}if(typeof i=="function"){var{content:b}=g,w=zG(g,WXe);if(m=v.createElement(i,w),v.isValidElement(m))return m}else m=nYe(e);var j=zu(e);if(uF(A)){if(n==="insideStart"||n==="insideEnd"||n==="end")return sYe(e,n,m,j,A);p=iYe(A,e.offset,e.position)}else p=oYe(e,A);return v.createElement(Mf,{zIndex:e.zIndex},v.createElement(j3,uA({ref:u,className:Ea("recharts-label",l)},j,p,{textAnchor:HXe(j.textAnchor)?j.textAnchor:p.textAnchor,breakAll:c}),m))}Xh.displayName="Label";var cYe=(t,e,r)=>{if(!t)return null;var n={viewBox:e,labelRef:r};return t===!0?v.createElement(Xh,uA({key:"label-implicit"},n)):Bf(t)?v.createElement(Xh,uA({key:"label-implicit",value:t},n)):v.isValidElement(t)?t.type===Xh?v.cloneElement(t,ni({key:"label-implicit"},n)):v.createElement(Xh,uA({key:"label-implicit",content:t},n)):y8(t)?v.createElement(Xh,uA({key:"label-implicit",content:t},n)):t&&typeof t=="object"?v.createElement(Xh,uA({},t,{key:"label-implicit"},n)):null};function uYe(t){var{label:e,labelRef:r}=t,n=fle();return cYe(e,n,r)||null}var Ale={},hle={};(function(t){Object.defineProperty(t,Symbol.toStringTag,{value:"Module"});function e(r){return r[r.length-1]}t.last=e})(hle);var mle={};(function(t){Object.defineProperty(t,Symbol.toStringTag,{value:"Module"});function e(r){return Array.isArray(r)?r:Array.from(r)}t.toArray=e})(mle);(function(t){Object.defineProperty(t,Symbol.toStringTag,{value:"Module"});const e=hle,r=mle,n=Q4;function a(s){if(n.isArrayLike(s))return e.last(r.toArray(s))}t.last=a})(Ale);var dYe=Ale.last;const fYe=zA(dYe);var AYe=["valueAccessor"],hYe=["dataKey","clockWise","id","textBreakAll","zIndex"];function lI(){return lI=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var r=arguments[e];for(var n in r)({}).hasOwnProperty.call(r,n)&&(t[n]=r[n])}return t},lI.apply(null,arguments)}function XG(t,e){if(t==null)return{};var r,n,a=mYe(t,e);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(t);for(n=0;n<s.length;n++)r=s[n],e.indexOf(r)===-1&&{}.propertyIsEnumerable.call(t,r)&&(a[r]=t[r])}return a}function mYe(t,e){if(t==null)return{};var r={};for(var n in t)if({}.hasOwnProperty.call(t,n)){if(e.indexOf(n)!==-1)continue;r[n]=t[n]}return r}var pYe=t=>Array.isArray(t.value)?fYe(t.value):t.value,ple=v.createContext(void 0),gYe=ple.Provider,gle=v.createContext(void 0),xYe=gle.Provider;function vYe(){return v.useContext(ple)}function yYe(){return v.useContext(gle)}function q_(t){var{valueAccessor:e=pYe}=t,r=XG(t,AYe),{dataKey:n,clockWise:a,id:s,textBreakAll:i,zIndex:l}=r,c=XG(r,hYe),u=vYe(),d=yYe(),f=u||d;return!f||!f.length?null:v.createElement(Mf,{zIndex:l??pl.label},v.createElement(Hl,{className:"recharts-label-list"},f.map((h,A)=>{var m,p=vo(n)?e(h,A):ns(h&&h.payload,n),g=vo(s)?{}:{id:"".concat(s,"-").concat(A)};return v.createElement(Xh,lI({key:"label-".concat(A)},zu(h),c,g,{fill:(m=r.fill)!==null&&m!==void 0?m:h.fill,parentViewBox:h.parentViewBox,value:p,textBreakAll:i,viewBox:h.viewBox,index:A,zIndex:0}))})))}q_.displayName="LabelList";function xle(t){var{label:e}=t;return e?e===!0?v.createElement(q_,{key:"labelList-implicit"}):v.isValidElement(e)||y8(e)?v.createElement(q_,{key:"labelList-implicit",content:e}):typeof e=="object"?v.createElement(q_,lI({key:"labelList-implicit"},e,{type:String(e.type)})):null:null}var vle=t=>t.graphicalItems.polarItems,bYe=Rt([vs,Iw],HR),B3=Rt([vle,Ds,bYe],KR),wYe=Rt([B3],GR),P3=Rt([wYe,x3],qR),NYe=Rt([P3,Ds,B3],WR);Rt([P3,Ds,B3],(t,e,r)=>r.length>0?t.flatMap(n=>r.flatMap(a=>{var s,i=ns(n,(s=e.dataKey)!==null&&s!==void 0?s:a.dataKey);return{value:i,errorDomain:[]}})).filter(Boolean):(e==null?void 0:e.dataKey)!=null?t.map(n=>({value:ns(n,e.dataKey),errorDomain:[]})):t.map(n=>({value:n,errorDomain:[]})));var YG=()=>{},CYe=Rt([P3,Ds,B3,_3,vs],ZR),_Ye=Rt([Ds,YR,JR,YG,CYe,YG,ra,vs],e8),yle=Rt([Ds,ra,P3,NYe,Sw,vs,_Ye],t8),EYe=Rt([yle,Ds,Xv],a8);Rt([Ds,yle,EYe,vs],i8);var SYe={radiusAxis:{},angleAxis:{}},ble=yc({name:"polarAxis",initialState:SYe,reducers:{addRadiusAxis(t,e){t.radiusAxis[e.payload.id]=e.payload},removeRadiusAxis(t,e){delete t.radiusAxis[e.payload.id]},addAngleAxis(t,e){t.angleAxis[e.payload.id]=e.payload},removeAngleAxis(t,e){delete t.angleAxis[e.payload.id]}}}),{addRadiusAxis:snt,removeRadiusAxis:int,addAngleAxis:ont,removeAngleAxis:lnt}=ble.actions,IYe=ble.reducer;function JG(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter(function(a){return Object.getOwnPropertyDescriptor(t,a).enumerable})),r.push.apply(r,n)}return r}function ZG(t){for(var e=1;e<arguments.length;e++){var r=arguments[e]!=null?arguments[e]:{};e%2?JG(Object(r),!0).forEach(function(n){jYe(t,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):JG(Object(r)).forEach(function(n){Object.defineProperty(t,n,Object.getOwnPropertyDescriptor(r,n))})}return t}function jYe(t,e,r){return(e=BYe(e))in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}function BYe(t){var e=PYe(t,"string");return typeof e=="symbol"?e:e+""}function PYe(t,e){if(typeof t!="object"||!t)return t;var r=t[Symbol.toPrimitive];if(r!==void 0){var n=r.call(t,e);if(typeof n!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}var TYe=(t,e)=>e,b8=Rt([vle,TYe],(t,e)=>t.filter(r=>r.type==="pie").find(r=>r.id===e)),kYe=[],w8=(t,e,r)=>(r==null?void 0:r.length)===0?kYe:r,wle=Rt([x3,b8,w8],(t,e,r)=>{var{chartData:n}=t;if(e!=null){var a;if((e==null?void 0:e.data)!=null&&e.data.length>0?a=e.data:a=n,(!a||!a.length)&&r!=null&&(a=r.map(s=>ZG(ZG({},e.presentationProps),s.props))),a!=null)return a}}),FYe=Rt([wle,b8,w8],(t,e,r)=>{if(!(t==null||e==null))return t.map((n,a)=>{var s,i=ns(n,e.nameKey,e.name),l;return r!=null&&(s=r[a])!==null&&s!==void 0&&(s=s.props)!==null&&s!==void 0&&s.fill?l=r[a].props.fill:typeof n=="object"&&n!=null&&"fill"in n?l=n.fill:l=e.fill,{value:Z4(i,e.dataKey),color:l,payload:n,type:e.legendType}})}),OYe=Rt([wle,b8,w8,zi],(t,e,r,n)=>{if(!(e==null||t==null))return RJe({offset:n,pieSettings:e,displayedData:t,cells:r})}),Nle={exports:{}},Ma={};/**
 * @license React
 * react-is.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var N8=Symbol.for("react.transitional.element"),C8=Symbol.for("react.portal"),T3=Symbol.for("react.fragment"),k3=Symbol.for("react.strict_mode"),F3=Symbol.for("react.profiler"),O3=Symbol.for("react.consumer"),D3=Symbol.for("react.context"),R3=Symbol.for("react.forward_ref"),M3=Symbol.for("react.suspense"),L3=Symbol.for("react.suspense_list"),U3=Symbol.for("react.memo"),Q3=Symbol.for("react.lazy"),DYe=Symbol.for("react.view_transition"),RYe=Symbol.for("react.client.reference");function Zu(t){if(typeof t=="object"&&t!==null){var e=t.$$typeof;switch(e){case N8:switch(t=t.type,t){case T3:case F3:case k3:case M3:case L3:case DYe:return t;default:switch(t=t&&t.$$typeof,t){case D3:case R3:case Q3:case U3:return t;case O3:return t;default:return e}}case C8:return e}}}Ma.ContextConsumer=O3;Ma.ContextProvider=D3;Ma.Element=N8;Ma.ForwardRef=R3;Ma.Fragment=T3;Ma.Lazy=Q3;Ma.Memo=U3;Ma.Portal=C8;Ma.Profiler=F3;Ma.StrictMode=k3;Ma.Suspense=M3;Ma.SuspenseList=L3;Ma.isContextConsumer=function(t){return Zu(t)===O3};Ma.isContextProvider=function(t){return Zu(t)===D3};Ma.isElement=function(t){return typeof t=="object"&&t!==null&&t.$$typeof===N8};Ma.isForwardRef=function(t){return Zu(t)===R3};Ma.isFragment=function(t){return Zu(t)===T3};Ma.isLazy=function(t){return Zu(t)===Q3};Ma.isMemo=function(t){return Zu(t)===U3};Ma.isPortal=function(t){return Zu(t)===C8};Ma.isProfiler=function(t){return Zu(t)===F3};Ma.isStrictMode=function(t){return Zu(t)===k3};Ma.isSuspense=function(t){return Zu(t)===M3};Ma.isSuspenseList=function(t){return Zu(t)===L3};Ma.isValidElementType=function(t){return typeof t=="string"||typeof t=="function"||t===T3||t===F3||t===k3||t===M3||t===L3||typeof t=="object"&&t!==null&&(t.$$typeof===Q3||t.$$typeof===U3||t.$$typeof===D3||t.$$typeof===O3||t.$$typeof===R3||t.$$typeof===RYe||t.getModuleId!==void 0)};Ma.typeOf=Zu;Nle.exports=Ma;var MYe=Nle.exports,eq=t=>typeof t=="string"?t:t?t.displayName||t.name||"Component":"",tq=null,OB=null,Cle=t=>{if(t===tq&&Array.isArray(OB))return OB;var e=[];return v.Children.forEach(t,r=>{vo(r)||(MYe.isFragment(r)?e=e.concat(Cle(r.props.children)):e.push(r))}),OB=e,tq=t,e};function _8(t,e){var r=[],n=[];return Array.isArray(e)?n=e.map(a=>eq(a)):n=[eq(e)],Cle(t).forEach(a=>{var s=Up(a,"type.displayName")||Up(a,"type.name");s&&n.indexOf(s)!==-1&&r.push(a)}),r}var _le={};(function(t){Object.defineProperty(t,Symbol.toStringTag,{value:"Module"});function e(r){var a;if(typeof r!="object"||r==null)return!1;if(Object.getPrototypeOf(r)===null)return!0;if(Object.prototype.toString.call(r)!=="[object Object]"){const s=r[Symbol.toStringTag];return s==null||!((a=Object.getOwnPropertyDescriptor(r,Symbol.toStringTag))!=null&&a.writable)?!1:r.toString()===`[object ${s}]`}let n=r;for(;Object.getPrototypeOf(n)!==null;)n=Object.getPrototypeOf(n);return Object.getPrototypeOf(r)===n}t.isPlainObject=e})(_le);var LYe=_le.isPlainObject;const UYe=zA(LYe);var rq,nq,aq,sq,iq;function oq(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter(function(a){return Object.getOwnPropertyDescriptor(t,a).enumerable})),r.push.apply(r,n)}return r}function lq(t){for(var e=1;e<arguments.length;e++){var r=arguments[e]!=null?arguments[e]:{};e%2?oq(Object(r),!0).forEach(function(n){QYe(t,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):oq(Object(r)).forEach(function(n){Object.defineProperty(t,n,Object.getOwnPropertyDescriptor(r,n))})}return t}function QYe(t,e,r){return(e=VYe(e))in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}function VYe(t){var e=HYe(t,"string");return typeof e=="symbol"?e:e+""}function HYe(t,e){if(typeof t!="object"||!t)return t;var r=t[Symbol.toPrimitive];if(r!==void 0){var n=r.call(t,e);if(typeof n!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}function cI(){return cI=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var r=arguments[e];for(var n in r)({}).hasOwnProperty.call(r,n)&&(t[n]=r[n])}return t},cI.apply(null,arguments)}function ey(t,e){return e||(e=t.slice(0)),Object.freeze(Object.defineProperties(t,{raw:{value:Object.freeze(e)}}))}var cq=(t,e,r,n,a)=>{var s=r-n,i;return i=Hs(rq||(rq=ey(["M ",",",""])),t,e),i+=Hs(nq||(nq=ey(["L ",",",""])),t+r,e),i+=Hs(aq||(aq=ey(["L ",",",""])),t+r-s/2,e+a),i+=Hs(sq||(sq=ey(["L ",",",""])),t+r-s/2-n,e+a),i+=Hs(iq||(iq=ey(["L ",","," Z"])),t,e),i},$Ye={x:0,y:0,upperWidth:0,lowerWidth:0,height:0,isUpdateAnimationActive:!1,animationBegin:0,animationDuration:1500,animationEasing:"ease"},KYe=t=>{var e=zo(t,$Ye),{x:r,y:n,upperWidth:a,lowerWidth:s,height:i,className:l}=e,{animationEasing:c,animationDuration:u,animationBegin:d,isUpdateAnimationActive:f}=e,h=v.useRef(null),[A,m]=v.useState(-1),p=v.useRef(a),g=v.useRef(s),x=v.useRef(i),y=v.useRef(r),b=v.useRef(n),w=d3(t,"trapezoid-");if(v.useEffect(()=>{if(h.current&&h.current.getTotalLength)try{var Y=h.current.getTotalLength();Y&&m(Y)}catch{}},[]),r!==+r||n!==+n||a!==+a||s!==+s||i!==+i||a===0&&s===0||i===0)return null;var j=Ea("recharts-trapezoid",l);if(!f)return v.createElement("g",null,v.createElement("path",cI({},zu(e),{className:j,d:cq(r,n,a,s,i)})));var I=p.current,_=g.current,E=x.current,S=y.current,k=b.current,P="0px ".concat(A===-1?1:A,"px"),T="".concat(A,"px 0px"),F=Use(["strokeDasharray"],u,c);return v.createElement(u3,{animationId:w,key:w,canBegin:A>0,duration:u,easing:c,isActive:f,begin:d},Y=>{var he=Di(I,a,Y),ue=Di(_,s,Y),fe=Di(E,i,Y),me=Di(S,r,Y),ne=Di(k,n,Y);h.current&&(p.current=he,g.current=ue,x.current=fe,y.current=me,b.current=ne);var Pe=Y>0?{transition:F,strokeDasharray:T}:{strokeDasharray:P};return v.createElement("path",cI({},zu(e),{className:j,d:cq(me,ne,he,ue,fe),ref:h,style:lq(lq({},Pe),e.style)}))})},GYe=["option","shapeType","activeClassName"];function qYe(t,e){if(t==null)return{};var r,n,a=zYe(t,e);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(t);for(n=0;n<s.length;n++)r=s[n],e.indexOf(r)===-1&&{}.propertyIsEnumerable.call(t,r)&&(a[r]=t[r])}return a}function zYe(t,e){if(t==null)return{};var r={};for(var n in t)if({}.hasOwnProperty.call(t,n)){if(e.indexOf(n)!==-1)continue;r[n]=t[n]}return r}function uq(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter(function(a){return Object.getOwnPropertyDescriptor(t,a).enumerable})),r.push.apply(r,n)}return r}function uI(t){for(var e=1;e<arguments.length;e++){var r=arguments[e]!=null?arguments[e]:{};e%2?uq(Object(r),!0).forEach(function(n){WYe(t,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):uq(Object(r)).forEach(function(n){Object.defineProperty(t,n,Object.getOwnPropertyDescriptor(r,n))})}return t}function WYe(t,e,r){return(e=XYe(e))in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}function XYe(t){var e=YYe(t,"string");return typeof e=="symbol"?e:e+""}function YYe(t,e){if(typeof t!="object"||!t)return t;var r=t[Symbol.toPrimitive];if(r!==void 0){var n=r.call(t,e);if(typeof n!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}function JYe(t,e){return uI(uI({},e),t)}function ZYe(t,e){return t==="symbols"}function dq(t){var{shapeType:e,elementProps:r}=t;switch(e){case"rectangle":return v.createElement($se,r);case"trapezoid":return v.createElement(KYe,r);case"sector":return v.createElement(zse,r);case"symbols":if(ZYe(e))return v.createElement(UD,r);break;case"curve":return v.createElement(cR,r);default:return null}}function eJe(t){return v.isValidElement(t)?t.props:t}function Ele(t){var{option:e,shapeType:r,activeClassName:n="recharts-active-shape"}=t,a=qYe(t,GYe),s;if(v.isValidElement(e))s=v.cloneElement(e,uI(uI({},a),eJe(e)));else if(typeof e=="function")s=e(a,a.index);else if(UYe(e)&&typeof e!="boolean"){var i=JYe(e,a);s=v.createElement(dq,{shapeType:r,elementProps:i})}else{var l=a;s=v.createElement(dq,{shapeType:r,elementProps:l})}return a.isActive?v.createElement(Hl,{className:n},s):s}var E8=(t,e,r)=>{var n=qa();return(a,s)=>i=>{t==null||t(a,s,i),n(Toe({activeIndex:String(s),activeDataKey:e,activeCoordinate:a.tooltipPosition,activeGraphicalItemId:r}))}},S8=t=>{var e=qa();return(r,n)=>a=>{t==null||t(r,n,a),e(hze())}},I8=(t,e,r)=>{var n=qa();return(a,s)=>i=>{t==null||t(a,s,i),n(mze({activeIndex:String(s),activeDataKey:e,activeCoordinate:a.tooltipPosition,activeGraphicalItemId:r}))}};function Sle(t){var{tooltipEntrySettings:e}=t,r=qa(),n=nu(),a=v.useRef(null);return v.useLayoutEffect(()=>{n||(a.current===null?r(uze(e)):a.current!==e&&r(dze({prev:a.current,next:e})),a.current=e)},[e,r,n]),v.useLayoutEffect(()=>()=>{a.current&&(r(fze(a.current)),a.current=null)},[r]),null}function tJe(t){var{legendPayload:e}=t,r=qa(),n=nu(),a=v.useRef(null);return v.useLayoutEffect(()=>{n||(a.current===null?r(Dse(e)):a.current!==e&&r(Rse({prev:a.current,next:e})),a.current=e)},[r,n,e]),v.useLayoutEffect(()=>()=>{a.current&&(r(Mse(a.current)),a.current=null)},[r]),null}function rJe(t){var{legendPayload:e}=t,r=qa(),n=Gr(ra),a=v.useRef(null);return v.useLayoutEffect(()=>{n!=="centric"&&n!=="radial"||(a.current===null?r(Dse(e)):a.current!==e&&r(Rse({prev:a.current,next:e})),a.current=e)},[r,n,e]),v.useLayoutEffect(()=>()=>{a.current&&(r(Mse(a.current)),a.current=null)},[r]),null}var DB,nJe=()=>{var[t]=v.useState(()=>g2("uid-"));return t},aJe=(DB=cue.useId)!==null&&DB!==void 0?DB:nJe;function sJe(t,e){var r=aJe();return e||(t?"".concat(t,"-").concat(r):r)}var iJe=v.createContext(void 0),Ile=t=>{var{id:e,type:r,children:n}=t,a=sJe("recharts-".concat(r),e);return v.createElement(iJe.Provider,{value:a},n(a))},oJe={cartesianItems:[],polarItems:[]},jle=yc({name:"graphicalItems",initialState:oJe,reducers:{addCartesianGraphicalItem:{reducer(t,e){t.cartesianItems.push(e.payload)},prepare:us()},replaceCartesianGraphicalItem:{reducer(t,e){var{prev:r,next:n}=e.payload,a=Bd(t).cartesianItems.indexOf(r);a>-1&&(t.cartesianItems[a]=n)},prepare:us()},removeCartesianGraphicalItem:{reducer(t,e){var r=Bd(t).cartesianItems.indexOf(e.payload);r>-1&&t.cartesianItems.splice(r,1)},prepare:us()},addPolarGraphicalItem:{reducer(t,e){t.polarItems.push(e.payload)},prepare:us()},removePolarGraphicalItem:{reducer(t,e){var r=Bd(t).polarItems.indexOf(e.payload);r>-1&&t.polarItems.splice(r,1)},prepare:us()}}}),{addCartesianGraphicalItem:lJe,replaceCartesianGraphicalItem:cJe,removeCartesianGraphicalItem:uJe,addPolarGraphicalItem:dJe,removePolarGraphicalItem:fJe}=jle.actions,AJe=jle.reducer,hJe=t=>{var e=qa(),r=v.useRef(null);return v.useLayoutEffect(()=>{r.current===null?e(lJe(t)):r.current!==t&&e(cJe({prev:r.current,next:t})),r.current=t},[e,t]),v.useLayoutEffect(()=>()=>{r.current&&(e(uJe(r.current)),r.current=null)},[e]),null},mJe=v.memo(hJe);function pJe(t){var e=qa();return v.useLayoutEffect(()=>(e(dJe(t)),()=>{e(fJe(t))}),[e,t]),null}var gJe=["key"],xJe=["onMouseEnter","onClick","onMouseLeave"],vJe=["id"],yJe=["id"];function fq(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter(function(a){return Object.getOwnPropertyDescriptor(t,a).enumerable})),r.push.apply(r,n)}return r}function Gs(t){for(var e=1;e<arguments.length;e++){var r=arguments[e]!=null?arguments[e]:{};e%2?fq(Object(r),!0).forEach(function(n){bJe(t,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):fq(Object(r)).forEach(function(n){Object.defineProperty(t,n,Object.getOwnPropertyDescriptor(r,n))})}return t}function bJe(t,e,r){return(e=wJe(e))in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}function wJe(t){var e=NJe(t,"string");return typeof e=="symbol"?e:e+""}function NJe(t,e){if(typeof t!="object"||!t)return t;var r=t[Symbol.toPrimitive];if(r!==void 0){var n=r.call(t,e);if(typeof n!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}function Y0(){return Y0=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var r=arguments[e];for(var n in r)({}).hasOwnProperty.call(r,n)&&(t[n]=r[n])}return t},Y0.apply(null,arguments)}function V3(t,e){if(t==null)return{};var r,n,a=CJe(t,e);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(t);for(n=0;n<s.length;n++)r=s[n],e.indexOf(r)===-1&&{}.propertyIsEnumerable.call(t,r)&&(a[r]=t[r])}return a}function CJe(t,e){if(t==null)return{};var r={};for(var n in t)if({}.hasOwnProperty.call(t,n)){if(e.indexOf(n)!==-1)continue;r[n]=t[n]}return r}function _Je(t){var e=v.useMemo(()=>_8(t.children,Dw),[t.children]),r=Gr(n=>FYe(n,t.id,e));return r==null?null:v.createElement(rJe,{legendPayload:r})}var EJe=v.memo(t=>{var{dataKey:e,nameKey:r,sectors:n,stroke:a,strokeWidth:s,fill:i,name:l,hide:c,tooltipType:u,id:d}=t,f={dataDefinedOnItem:n.map(h=>h.tooltipPayload),positions:n.map(h=>h.tooltipPosition),settings:{stroke:a,strokeWidth:s,fill:i,dataKey:e,nameKey:r,name:Z4(l,e),hide:c,type:u,color:i,unit:"",graphicalItemId:d}};return v.createElement(Sle,{tooltipEntrySettings:f})}),SJe=(t,e)=>t>e?"start":t<e?"end":"middle",IJe=(t,e,r)=>xl(typeof e=="function"?e(t):e,r,r*.8),jJe=(t,e,r)=>{var{top:n,left:a,width:s,height:i}=e,l=Kse(s,i),c=a+xl(t.cx,s,s/2),u=n+xl(t.cy,i,i/2),d=xl(t.innerRadius,l,0),f=IJe(r,t.outerRadius,l),h=t.maxRadius||Math.sqrt(s*s+i*i)/2;return{cx:c,cy:u,innerRadius:d,outerRadius:f,maxRadius:h}},BJe=(t,e)=>{var r=Ko(e-t),n=Math.min(Math.abs(e-t),360);return r*n};function PJe(t){return t&&typeof t=="object"&&"className"in t&&typeof t.className=="string"?t.className:""}var TJe=(t,e)=>{if(v.isValidElement(t))return v.cloneElement(t,e);if(typeof t=="function")return t(e);var r=Ea("recharts-pie-label-line",typeof t!="boolean"?t.className:""),{key:n}=e,a=V3(e,gJe);return v.createElement(cR,Y0({},a,{type:"linear",className:r}))},kJe=(t,e,r)=>{if(v.isValidElement(t))return v.cloneElement(t,e);var n=r;if(typeof t=="function"&&(n=t(e),v.isValidElement(n)))return n;var a=Ea("recharts-pie-label-text",PJe(t));return v.createElement(j3,Y0({},e,{alignmentBaseline:"middle",className:a}),n)};function FJe(t){var{sectors:e,props:r,showLabels:n}=t,{label:a,labelLine:s,dataKey:i}=r;if(!n||!a||!e)return null;var l=If(r),c=p2(a),u=p2(s),d=typeof a=="object"&&"offsetRadius"in a&&typeof a.offsetRadius=="number"&&a.offsetRadius||20,f=e.map((h,A)=>{var m=(h.startAngle+h.endAngle)/2,p=wi(h.cx,h.cy,h.outerRadius+d,m),g=Gs(Gs(Gs(Gs({},l),h),{},{stroke:"none"},c),{},{index:A,textAnchor:SJe(p.x,h.cx)},p),x=Gs(Gs(Gs(Gs({},l),h),{},{fill:"none",stroke:h.fill},u),{},{index:A,points:[wi(h.cx,h.cy,h.outerRadius,m),p],key:"line"});return v.createElement(Mf,{zIndex:pl.label,key:"label-".concat(h.startAngle,"-").concat(h.endAngle,"-").concat(h.midAngle,"-").concat(A)},v.createElement(Hl,null,s&&TJe(s,x),kJe(a,g,ns(h,i))))});return v.createElement(Hl,{className:"recharts-pie-labels"},f)}function OJe(t){var{sectors:e,props:r,showLabels:n}=t,{label:a}=r;return typeof a=="object"&&a!=null&&"position"in a?v.createElement(xle,{label:a}):v.createElement(FJe,{sectors:e,props:r,showLabels:n})}function DJe(t){var{sectors:e,activeShape:r,inactiveShape:n,allOtherPieProps:a,shape:s,id:i}=t,l=Gr(Kp),c=Gr(m8),u=Gr(eWe),{onMouseEnter:d,onClick:f,onMouseLeave:h}=a,A=V3(a,xJe),m=E8(d,a.dataKey,i),p=S8(h),g=I8(f,a.dataKey,i);return e==null||e.length===0?null:v.createElement(v.Fragment,null,e.map((x,y)=>{if((x==null?void 0:x.startAngle)===0&&(x==null?void 0:x.endAngle)===0&&e.length!==1)return null;var b=u==null||u===i,w=String(y)===l&&(c==null||a.dataKey===c)&&b,j=l?n:null,I=r&&w?r:j,_=Gs(Gs({},x),{},{stroke:x.stroke,tabIndex:-1,[xse]:y,[vse]:i});return v.createElement(Hl,Y0({key:"sector-".concat(x==null?void 0:x.startAngle,"-").concat(x==null?void 0:x.endAngle,"-").concat(x.midAngle,"-").concat(y),tabIndex:-1,className:"recharts-pie-sector"},gw(A,x,y),{onMouseEnter:m(x,y),onMouseLeave:p(x,y),onClick:g(x,y)}),v.createElement(Ele,Y0({option:s??I,index:y,shapeType:"sector",isActive:w},_)))}))}function RJe(t){var e,{pieSettings:r,displayedData:n,cells:a,offset:s}=t,{cornerRadius:i,startAngle:l,endAngle:c,dataKey:u,nameKey:d,tooltipType:f}=r,h=Math.abs(r.minAngle),A=BJe(l,c),m=Math.abs(A),p=n.length<=1?0:(e=r.paddingAngle)!==null&&e!==void 0?e:0,g=n.filter(I=>ns(I,u,0)!==0).length,x=(m>=360?g:g-1)*p,y=m-g*h-x,b=n.reduce((I,_)=>{var E=ns(_,u,0);return I+(Wr(E)?E:0)},0),w;if(b>0){var j;w=n.map((I,_)=>{var E=ns(I,u,0),S=ns(I,d,_),k=jJe(r,s,I),P=(Wr(E)?E:0)/b,T,F=Gs(Gs({},I),a&&a[_]&&a[_].props);_?T=j.endAngle+Ko(A)*p*(E!==0?1:0):T=l;var Y=T+Ko(A)*((E!==0?h:0)+P*y),he=(T+Y)/2,ue=(k.innerRadius+k.outerRadius)/2,fe=[{name:S,value:E,payload:F,dataKey:u,type:f,graphicalItemId:r.id}],me=wi(k.cx,k.cy,ue,he);return j=Gs(Gs(Gs(Gs({},r.presentationProps),{},{percent:P,cornerRadius:typeof i=="string"?parseFloat(i):i,name:S,tooltipPayload:fe,midAngle:he,middleRadius:ue,tooltipPosition:me},F),k),{},{value:E,dataKey:u,startAngle:T,endAngle:Y,payload:F,paddingAngle:Ko(A)*p}),j})}return w}function MJe(t){var{showLabels:e,sectors:r,children:n}=t,a=v.useMemo(()=>!e||!r?[]:r.map(s=>({value:s.value,payload:s.payload,clockWise:!1,parentViewBox:void 0,viewBox:{cx:s.cx,cy:s.cy,innerRadius:s.innerRadius,outerRadius:s.outerRadius,startAngle:s.startAngle,endAngle:s.endAngle,clockWise:!1},fill:s.fill})),[r,e]);return v.createElement(xYe,{value:e?a:void 0},n)}function LJe(t){var{props:e,previousSectorsRef:r,id:n}=t,{sectors:a,isAnimationActive:s,animationBegin:i,animationDuration:l,animationEasing:c,activeShape:u,inactiveShape:d,onAnimationStart:f,onAnimationEnd:h}=e,A=d3(e,"recharts-pie-"),m=r.current,[p,g]=v.useState(!1),x=v.useCallback(()=>{typeof h=="function"&&h(),g(!1)},[h]),y=v.useCallback(()=>{typeof f=="function"&&f(),g(!0)},[f]);return v.createElement(MJe,{showLabels:!p,sectors:a},v.createElement(u3,{animationId:A,begin:i,duration:l,isActive:s,easing:c,onAnimationStart:y,onAnimationEnd:x,key:A},b=>{var w=[],j=a&&a[0],I=j==null?void 0:j.startAngle;return a==null||a.forEach((_,E)=>{var S=m&&m[E],k=E>0?Up(_,"paddingAngle",0):0;if(S){var P=Di(S.endAngle-S.startAngle,_.endAngle-_.startAngle,b),T=Gs(Gs({},_),{},{startAngle:I+k,endAngle:I+P+k});w.push(T),I=T.endAngle}else{var{endAngle:F,startAngle:Y}=_,he=Di(0,F-Y,b),ue=Gs(Gs({},_),{},{startAngle:I+k,endAngle:I+he+k});w.push(ue),I=ue.endAngle}}),r.current=w,v.createElement(Hl,null,v.createElement(DJe,{sectors:w,activeShape:u,inactiveShape:d,allOtherPieProps:e,shape:e.shape,id:n}))}),v.createElement(OJe,{showLabels:!p,sectors:a,props:e}),e.children)}var UJe={animationBegin:400,animationDuration:1500,animationEasing:"ease",cx:"50%",cy:"50%",dataKey:"value",endAngle:360,fill:"#808080",hide:!1,innerRadius:0,isAnimationActive:"auto",label:!1,labelLine:!0,legendType:"rect",minAngle:0,nameKey:"name",outerRadius:"80%",paddingAngle:0,rootTabIndex:0,startAngle:0,stroke:"#fff",zIndex:pl.area};function QJe(t){var{id:e}=t,r=V3(t,vJe),{hide:n,className:a,rootTabIndex:s}=t,i=v.useMemo(()=>_8(t.children,Dw),[t.children]),l=Gr(d=>OYe(d,e,i)),c=v.useRef(null),u=Ea("recharts-pie",a);return n||l==null?(c.current=null,v.createElement(Hl,{tabIndex:s,className:u})):v.createElement(Mf,{zIndex:t.zIndex},v.createElement(EJe,{dataKey:t.dataKey,nameKey:t.nameKey,sectors:l,stroke:t.stroke,strokeWidth:t.strokeWidth,fill:t.fill,name:t.name,hide:t.hide,tooltipType:t.tooltipType,id:e}),v.createElement(Hl,{tabIndex:s,className:u},v.createElement(LJe,{props:Gs(Gs({},r),{},{sectors:l}),previousSectorsRef:c,id:e})))}function Ble(t){var e=zo(t,UJe),{id:r}=e,n=V3(e,yJe),a=If(n);return v.createElement(Ile,{id:r,type:"pie"},s=>v.createElement(v.Fragment,null,v.createElement(pJe,{type:"pie",id:s,data:n.data,dataKey:n.dataKey,hide:n.hide,angleAxisId:0,radiusAxisId:0,name:n.name,nameKey:n.nameKey,tooltipType:n.tooltipType,legendType:n.legendType,fill:n.fill,cx:n.cx,cy:n.cy,startAngle:n.startAngle,endAngle:n.endAngle,paddingAngle:n.paddingAngle,minAngle:n.minAngle,innerRadius:n.innerRadius,outerRadius:n.outerRadius,cornerRadius:n.cornerRadius,presentationProps:a,maxRadius:e.maxRadius}),v.createElement(_Je,Y0({},n,{id:s})),v.createElement(QJe,Y0({},n,{id:s}))))}Ble.displayName="Pie";function Aq(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter(function(a){return Object.getOwnPropertyDescriptor(t,a).enumerable})),r.push.apply(r,n)}return r}function hq(t){for(var e=1;e<arguments.length;e++){var r=arguments[e]!=null?arguments[e]:{};e%2?Aq(Object(r),!0).forEach(function(n){VJe(t,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):Aq(Object(r)).forEach(function(n){Object.defineProperty(t,n,Object.getOwnPropertyDescriptor(r,n))})}return t}function VJe(t,e,r){return(e=HJe(e))in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}function HJe(t){var e=$Je(t,"string");return typeof e=="symbol"?e:e+""}function $Je(t,e){if(typeof t!="object"||!t)return t;var r=t[Symbol.toPrimitive];if(r!==void 0){var n=r.call(t,e);if(typeof n!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}var Ple=0,KJe={xAxis:{},yAxis:{},zAxis:{}},Tle=yc({name:"cartesianAxis",initialState:KJe,reducers:{addXAxis:{reducer(t,e){t.xAxis[e.payload.id]=e.payload},prepare:us()},replaceXAxis:{reducer(t,e){var{prev:r,next:n}=e.payload;t.xAxis[r.id]!==void 0&&(r.id!==n.id&&delete t.xAxis[r.id],t.xAxis[n.id]=n)},prepare:us()},removeXAxis:{reducer(t,e){delete t.xAxis[e.payload.id]},prepare:us()},addYAxis:{reducer(t,e){t.yAxis[e.payload.id]=e.payload},prepare:us()},replaceYAxis:{reducer(t,e){var{prev:r,next:n}=e.payload;t.yAxis[r.id]!==void 0&&(r.id!==n.id&&delete t.yAxis[r.id],t.yAxis[n.id]=n)},prepare:us()},removeYAxis:{reducer(t,e){delete t.yAxis[e.payload.id]},prepare:us()},addZAxis:{reducer(t,e){t.zAxis[e.payload.id]=e.payload},prepare:us()},replaceZAxis:{reducer(t,e){var{prev:r,next:n}=e.payload;t.zAxis[r.id]!==void 0&&(r.id!==n.id&&delete t.zAxis[r.id],t.zAxis[n.id]=n)},prepare:us()},removeZAxis:{reducer(t,e){delete t.zAxis[e.payload.id]},prepare:us()},updateYAxisWidth(t,e){var{id:r,width:n}=e.payload,a=t.yAxis[r];if(a){var s=a.widthHistory||[];if(s.length===3&&s[0]===s[2]&&n===s[1]&&n!==a.width&&Math.abs(n-s[0])<=1)return;var i=[...s,n].slice(-3);t.yAxis[r]=hq(hq({},t.yAxis[r]),{},{width:n,widthHistory:i})}}}}),{addXAxis:GJe,replaceXAxis:qJe,removeXAxis:zJe,addYAxis:WJe,replaceYAxis:XJe,removeYAxis:YJe,addZAxis:cnt,replaceZAxis:unt,removeZAxis:dnt,updateYAxisWidth:JJe}=Tle.actions,ZJe=Tle.reducer,eZe=Rt([zi],t=>({top:t.top,bottom:t.bottom,left:t.left,right:t.right})),tZe=Rt([eZe,ah,sh],(t,e,r)=>{if(!(!t||e==null||r==null))return{x:t.left,y:t.top,width:Math.max(0,e-t.left-t.right),height:Math.max(0,r-t.top-t.bottom)}}),kle=()=>Gr(tZe),mq=(t,e,r)=>{var n=r??t;if(!vo(n))return xl(n,e,0)},rZe=(t,e,r)=>{var n={},a=t.filter(b3),s=t.filter(u=>u.stackId==null),i=a.reduce((u,d)=>(u[d.stackId]||(u[d.stackId]=[]),u[d.stackId].push(d),u),n),l=Object.entries(i).map(u=>{var[d,f]=u,h=f.map(m=>m.dataKey),A=mq(e,r,f[0].barSize);return{stackId:d,dataKeys:h,barSize:A}}),c=s.map(u=>{var d=[u.dataKey].filter(h=>h!=null),f=mq(e,r,u.barSize);return{stackId:void 0,dataKeys:d,barSize:f}});return[...l,...c]};function pq(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter(function(a){return Object.getOwnPropertyDescriptor(t,a).enumerable})),r.push.apply(r,n)}return r}function JC(t){for(var e=1;e<arguments.length;e++){var r=arguments[e]!=null?arguments[e]:{};e%2?pq(Object(r),!0).forEach(function(n){nZe(t,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):pq(Object(r)).forEach(function(n){Object.defineProperty(t,n,Object.getOwnPropertyDescriptor(r,n))})}return t}function nZe(t,e,r){return(e=aZe(e))in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}function aZe(t){var e=sZe(t,"string");return typeof e=="symbol"?e:e+""}function sZe(t,e){if(typeof t!="object"||!t)return t;var r=t[Symbol.toPrimitive];if(r!==void 0){var n=r.call(t,e);if(typeof n!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}function iZe(t,e,r,n,a){var s=n.length;if(!(s<1)){var i=xl(t,r,0,!0),l,c=[];if(Os(n[0].barSize)){var u=!1,d=r/s,f=n.reduce((x,y)=>x+(y.barSize||0),0);f+=(s-1)*i,f>=r&&(f-=(s-1)*i,i=0),f>=r&&d>0&&(u=!0,d*=.9,f=s*d);var h=(r-f)/2>>0,A={offset:h-i,size:0};l=n.reduce((x,y)=>{var b,w={stackId:y.stackId,dataKeys:y.dataKeys,position:{offset:A.offset+A.size+i,size:u?d:(b=y.barSize)!==null&&b!==void 0?b:0}},j=[...x,w];return A=j[j.length-1].position,j},c)}else{var m=xl(e,r,0,!0);r-2*m-(s-1)*i<=0&&(i=0);var p=(r-2*m-(s-1)*i)/s;p>1&&(p>>=0);var g=Os(a)?Math.min(p,a):p;l=n.reduce((x,y,b)=>[...x,{stackId:y.stackId,dataKeys:y.dataKeys,position:{offset:m+(p+i)*b+(p-g)/2,size:g}}],c)}return l}}var oZe=(t,e,r,n,a,s,i)=>{var l=vo(i)?e:i,c=iZe(r,n,a!==s?a:s,t,l);return a!==s&&c!=null&&(c=c.map(u=>JC(JC({},u),{},{position:JC(JC({},u.position),{},{offset:u.position.offset-a/2})}))),c},lZe=(t,e)=>{var r=QR(e);if(!(!t||r==null||e==null)){var{stackId:n}=e;if(n!=null){var a=t[n];if(a){var{stackedData:s}=a;if(s)return s.find(i=>i.key===r)}}}};function cZe(t,e){return t&&typeof t=="object"&&"zIndex"in t&&typeof t.zIndex=="number"&&Os(t.zIndex)?t.zIndex:e}var Fle=t=>{var{chartData:e}=t,r=qa(),n=nu();return v.useEffect(()=>n?()=>{}:(r(TG(e)),()=>{r(TG(void 0))}),[e,r,n]),null},gq={x:0,y:0,width:0,height:0,padding:{top:0,right:0,bottom:0,left:0}},Ole=yc({name:"brush",initialState:gq,reducers:{setBrushSettings(t,e){return e.payload==null?gq:e.payload}}}),{setBrushSettings:fnt}=Ole.actions,uZe=Ole.reducer;function dZe(t,e,r){return(e=fZe(e))in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}function fZe(t){var e=AZe(t,"string");return typeof e=="symbol"?e:e+""}function AZe(t,e){if(typeof t!="object"||!t)return t;var r=t[Symbol.toPrimitive];if(r!==void 0){var n=r.call(t,e);if(typeof n!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}class j8{static create(e){return new j8(e)}constructor(e){this.scale=e}get domain(){return this.scale.domain}get range(){return this.scale.range}get rangeMin(){return this.range()[0]}get rangeMax(){return this.range()[1]}get bandwidth(){return this.scale.bandwidth}apply(e){var{bandAware:r,position:n}=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};if(e!==void 0){if(n)switch(n){case"start":return this.scale(e);case"middle":{var a=this.bandwidth?this.bandwidth()/2:0;return this.scale(e)+a}case"end":{var s=this.bandwidth?this.bandwidth():0;return this.scale(e)+s}default:return this.scale(e)}if(r){var i=this.bandwidth?this.bandwidth()/2:0;return this.scale(e)+i}return this.scale(e)}}isInRange(e){var r=this.range(),n=r[0],a=r[r.length-1];return n<=a?e>=n&&e<=a:e>=a&&e<=n}}dZe(j8,"EPS",1e-4);function hZe(t){return(t%180+180)%180}var mZe=function(e){var{width:r,height:n}=e,a=arguments.length>1&&arguments[1]!==void 0?arguments[1]:0,s=hZe(a),i=s*Math.PI/180,l=Math.atan(n/r),c=i>l&&i<Math.PI-l?n/Math.sin(i):r/Math.cos(i);return Math.abs(c)},pZe={dots:[],areas:[],lines:[]},Dle=yc({name:"referenceElements",initialState:pZe,reducers:{addDot:(t,e)=>{t.dots.push(e.payload)},removeDot:(t,e)=>{var r=Bd(t).dots.findIndex(n=>n===e.payload);r!==-1&&t.dots.splice(r,1)},addArea:(t,e)=>{t.areas.push(e.payload)},removeArea:(t,e)=>{var r=Bd(t).areas.findIndex(n=>n===e.payload);r!==-1&&t.areas.splice(r,1)},addLine:(t,e)=>{t.lines.push(e.payload)},removeLine:(t,e)=>{var r=Bd(t).lines.findIndex(n=>n===e.payload);r!==-1&&t.lines.splice(r,1)}}}),{addDot:Ant,removeDot:hnt,addArea:mnt,removeArea:pnt,addLine:gnt,removeLine:xnt}=Dle.actions,gZe=Dle.reducer,xZe=v.createContext(void 0),vZe=t=>{var{children:e}=t,[r]=v.useState("".concat(g2("recharts"),"-clip")),n=kle();if(n==null)return null;var{x:a,y:s,width:i,height:l}=n;return v.createElement(xZe.Provider,{value:r},v.createElement("defs",null,v.createElement("clipPath",{id:r},v.createElement("rect",{x:a,y:s,height:l,width:i}))),e)};function Rle(t,e){if(e<1)return[];if(e===1)return t;for(var r=[],n=0;n<t.length;n+=e){var a=t[n];a!==void 0&&r.push(a)}return r}function yZe(t,e,r){var n={width:t.width+e.width,height:t.height+e.height};return mZe(n,r)}function bZe(t,e,r){var n=r==="width",{x:a,y:s,width:i,height:l}=t;return e===1?{start:n?a:s,end:n?a+i:s+l}:{start:n?a+i:s+l,end:n?a:s}}function P2(t,e,r,n,a){if(t*e<t*n||t*e>t*a)return!1;var s=r();return t*(e-t*s/2-n)>=0&&t*(e+t*s/2-a)<=0}function wZe(t,e){return Rle(t,e+1)}function NZe(t,e,r,n,a){for(var s=(n||[]).slice(),{start:i,end:l}=e,c=0,u=1,d=i,f=function(){var m=n==null?void 0:n[c];if(m===void 0)return{v:Rle(n,u)};var p=c,g,x=()=>(g===void 0&&(g=r(m,p)),g),y=m.coordinate,b=c===0||P2(t,y,x,d,l);b||(c=0,d=i,u+=1),b&&(d=y+t*(x()/2+a),c+=u)},h;u<=s.length;)if(h=f(),h)return h.v;return[]}function CZe(t,e,r,n,a){var s=(n||[]).slice(),i=s.length;if(i===0)return[];for(var{start:l,end:c}=e,u=1;u<=i;u++){for(var d=(i-1)%u,f=l,h=!0,A=function(){var y=n[m],b=m,w,j=()=>(w===void 0&&(w=r(y,b)),w),I=y.coordinate,_=m===d||P2(t,I,j,f,c);if(!_)return h=!1,1;_&&(f=I+t*(j()/2+a))},m=d;m<i&&!A();m+=u);if(h){for(var p=[],g=d;g<i;g+=u)p.push(n[g]);return p}}return[]}function xq(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter(function(a){return Object.getOwnPropertyDescriptor(t,a).enumerable})),r.push.apply(r,n)}return r}function cl(t){for(var e=1;e<arguments.length;e++){var r=arguments[e]!=null?arguments[e]:{};e%2?xq(Object(r),!0).forEach(function(n){_Ze(t,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):xq(Object(r)).forEach(function(n){Object.defineProperty(t,n,Object.getOwnPropertyDescriptor(r,n))})}return t}function _Ze(t,e,r){return(e=EZe(e))in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}function EZe(t){var e=SZe(t,"string");return typeof e=="symbol"?e:e+""}function SZe(t,e){if(typeof t!="object"||!t)return t;var r=t[Symbol.toPrimitive];if(r!==void 0){var n=r.call(t,e);if(typeof n!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}function IZe(t,e,r,n,a){for(var s=(n||[]).slice(),i=s.length,{start:l}=e,{end:c}=e,u=function(h){var A=s[h],m,p=()=>(m===void 0&&(m=r(A,h)),m);if(h===i-1){var g=t*(A.coordinate+t*p()/2-c);s[h]=A=cl(cl({},A),{},{tickCoord:g>0?A.coordinate-g*t:A.coordinate})}else s[h]=A=cl(cl({},A),{},{tickCoord:A.coordinate});if(A.tickCoord!=null){var x=P2(t,A.tickCoord,p,l,c);x&&(c=A.tickCoord-t*(p()/2+a),s[h]=cl(cl({},A),{},{isShow:!0}))}},d=i-1;d>=0;d--)u(d);return s}function jZe(t,e,r,n,a,s){var i=(n||[]).slice(),l=i.length,{start:c,end:u}=e;if(s){var d=n[l-1],f=r(d,l-1),h=t*(d.coordinate+t*f/2-u);if(i[l-1]=d=cl(cl({},d),{},{tickCoord:h>0?d.coordinate-h*t:d.coordinate}),d.tickCoord!=null){var A=P2(t,d.tickCoord,()=>f,c,u);A&&(u=d.tickCoord-t*(f/2+a),i[l-1]=cl(cl({},d),{},{isShow:!0}))}}for(var m=s?l-1:l,p=function(y){var b=i[y],w,j=()=>(w===void 0&&(w=r(b,y)),w);if(y===0){var I=t*(b.coordinate-t*j()/2-c);i[y]=b=cl(cl({},b),{},{tickCoord:I<0?b.coordinate-I*t:b.coordinate})}else i[y]=b=cl(cl({},b),{},{tickCoord:b.coordinate});if(b.tickCoord!=null){var _=P2(t,b.tickCoord,j,c,u);_&&(c=b.tickCoord+t*(j()/2+a),i[y]=cl(cl({},b),{},{isShow:!0}))}},g=0;g<m;g++)p(g);return i}function BZe(t,e,r){var{tick:n,ticks:a,viewBox:s,minTickGap:i,orientation:l,interval:c,tickFormatter:u,unit:d,angle:f}=t;if(!a||!a.length||!n)return[];if(Wr(c)||c3.isSsr){var h;return(h=wZe(a,Wr(c)?c:0))!==null&&h!==void 0?h:[]}var A=[],m=l==="top"||l==="bottom"?"width":"height",p=d&&m==="width"?db(d,{fontSize:e,letterSpacing:r}):{width:0,height:0},g=(b,w)=>{var j=typeof u=="function"?u(b.value,w):b.value;return m==="width"?yZe(db(j,{fontSize:e,letterSpacing:r}),p,f):db(j,{fontSize:e,letterSpacing:r})[m]},x=a.length>=2?Ko(a[1].coordinate-a[0].coordinate):1,y=bZe(s,x,m);return c==="equidistantPreserveStart"?NZe(x,y,g,a,i):c==="equidistantPreserveEnd"?CZe(x,y,g,a,i):(c==="preserveStart"||c==="preserveStartEnd"?A=jZe(x,y,g,a,i,c==="preserveStartEnd"):A=IZe(x,y,g,a,i),A.filter(b=>b.isShow))}var PZe=t=>{var{ticks:e,label:r,labelGapWithTick:n=5,tickSize:a=0,tickMargin:s=0}=t,i=0;if(e){Array.from(e).forEach(d=>{if(d){var f=d.getBoundingClientRect();f.width>i&&(i=f.width)}});var l=r?r.getBoundingClientRect().width:0,c=a+s,u=i+c+l+(r?n:0);return Math.round(u)}return 0},TZe=["axisLine","width","height","className","hide","ticks","axisType"];function kZe(t,e){if(t==null)return{};var r,n,a=FZe(t,e);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(t);for(n=0;n<s.length;n++)r=s[n],e.indexOf(r)===-1&&{}.propertyIsEnumerable.call(t,r)&&(a[r]=t[r])}return a}function FZe(t,e){if(t==null)return{};var r={};for(var n in t)if({}.hasOwnProperty.call(t,n)){if(e.indexOf(n)!==-1)continue;r[n]=t[n]}return r}function Gp(){return Gp=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var r=arguments[e];for(var n in r)({}).hasOwnProperty.call(r,n)&&(t[n]=r[n])}return t},Gp.apply(null,arguments)}function vq(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter(function(a){return Object.getOwnPropertyDescriptor(t,a).enumerable})),r.push.apply(r,n)}return r}function xi(t){for(var e=1;e<arguments.length;e++){var r=arguments[e]!=null?arguments[e]:{};e%2?vq(Object(r),!0).forEach(function(n){OZe(t,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):vq(Object(r)).forEach(function(n){Object.defineProperty(t,n,Object.getOwnPropertyDescriptor(r,n))})}return t}function OZe(t,e,r){return(e=DZe(e))in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}function DZe(t){var e=RZe(t,"string");return typeof e=="symbol"?e:e+""}function RZe(t,e){if(typeof t!="object"||!t)return t;var r=t[Symbol.toPrimitive];if(r!==void 0){var n=r.call(t,e);if(typeof n!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}var pp={x:0,y:0,width:0,height:0,viewBox:{x:0,y:0,width:0,height:0},orientation:"bottom",ticks:[],stroke:"#666",tickLine:!0,axisLine:!0,tick:!0,mirror:!1,minTickGap:5,tickSize:6,tickMargin:2,interval:"preserveEnd",zIndex:pl.axis};function MZe(t){var{x:e,y:r,width:n,height:a,orientation:s,mirror:i,axisLine:l,otherSvgProps:c}=t;if(!l)return null;var u=xi(xi(xi({},c),If(l)),{},{fill:"none"});if(s==="top"||s==="bottom"){var d=+(s==="top"&&!i||s==="bottom"&&i);u=xi(xi({},u),{},{x1:e,y1:r+d*a,x2:e+n,y2:r+d*a})}else{var f=+(s==="left"&&!i||s==="right"&&i);u=xi(xi({},u),{},{x1:e+f*n,y1:r,x2:e+f*n,y2:r+a})}return v.createElement("line",Gp({},u,{className:Ea("recharts-cartesian-axis-line",Up(l,"className"))}))}function LZe(t,e,r,n,a,s,i,l,c){var u,d,f,h,A,m,p=l?-1:1,g=t.tickSize||i,x=Wr(t.tickCoord)?t.tickCoord:t.coordinate;switch(s){case"top":u=d=t.coordinate,h=r+ +!l*a,f=h-p*g,m=f-p*c,A=x;break;case"left":f=h=t.coordinate,d=e+ +!l*n,u=d-p*g,A=u-p*c,m=x;break;case"right":f=h=t.coordinate,d=e+ +l*n,u=d+p*g,A=u+p*c,m=x;break;default:u=d=t.coordinate,h=r+ +l*a,f=h+p*g,m=f+p*c,A=x;break}return{line:{x1:u,y1:f,x2:d,y2:h},tick:{x:A,y:m}}}function UZe(t,e){switch(t){case"left":return e?"start":"end";case"right":return e?"end":"start";default:return"middle"}}function QZe(t,e){switch(t){case"left":case"right":return"middle";case"top":return e?"start":"end";default:return e?"end":"start"}}function VZe(t){var{option:e,tickProps:r,value:n}=t,a,s=Ea(r.className,"recharts-cartesian-axis-tick-value");if(v.isValidElement(e))a=v.cloneElement(e,xi(xi({},r),{},{className:s}));else if(typeof e=="function")a=e(xi(xi({},r),{},{className:s}));else{var i="recharts-cartesian-axis-tick-value";typeof e!="boolean"&&(i=Ea(i,e==null?void 0:e.className)),a=v.createElement(j3,Gp({},r,{className:i}),n)}return a}var HZe=v.forwardRef((t,e)=>{var{ticks:r=[],tick:n,tickLine:a,stroke:s,tickFormatter:i,unit:l,padding:c,tickTextProps:u,orientation:d,mirror:f,x:h,y:A,width:m,height:p,tickSize:g,tickMargin:x,fontSize:y,letterSpacing:b,getTicksConfig:w,events:j,axisType:I}=t,_=BZe(xi(xi({},w),{},{ticks:r}),y,b),E=UZe(d,f),S=QZe(d,f),k=If(w),P=p2(n),T={};typeof a=="object"&&(T=a);var F=xi(xi({},k),{},{fill:"none"},T),Y=_.map(fe=>xi({entry:fe},LZe(fe,h,A,m,p,d,g,f,x))),he=Y.map(fe=>{var{entry:me,line:ne}=fe;return v.createElement(Hl,{className:"recharts-cartesian-axis-tick",key:"tick-".concat(me.value,"-").concat(me.coordinate,"-").concat(me.tickCoord)},a&&v.createElement("line",Gp({},F,ne,{className:Ea("recharts-cartesian-axis-tick-line",Up(a,"className"))})))}),ue=Y.map((fe,me)=>{var{entry:ne,tick:Pe}=fe,Ie=xi(xi(xi(xi({textAnchor:E,verticalAnchor:S},k),{},{stroke:"none",fill:s},P),Pe),{},{index:me,payload:ne,visibleTicksCount:_.length,tickFormatter:i,padding:c},u);return v.createElement(Hl,Gp({className:"recharts-cartesian-axis-tick-label",key:"tick-label-".concat(ne.value,"-").concat(ne.coordinate,"-").concat(ne.tickCoord)},gw(j,ne,me)),n&&v.createElement(VZe,{option:n,tickProps:Ie,value:"".concat(typeof i=="function"?i(ne.value,me):ne.value).concat(l||"")}))});return v.createElement("g",{className:"recharts-cartesian-axis-ticks recharts-".concat(I,"-ticks")},ue.length>0&&v.createElement(Mf,{zIndex:pl.label},v.createElement("g",{className:"recharts-cartesian-axis-tick-labels recharts-".concat(I,"-tick-labels"),ref:e},ue)),he.length>0&&v.createElement("g",{className:"recharts-cartesian-axis-tick-lines recharts-".concat(I,"-tick-lines")},he))}),$Ze=v.forwardRef((t,e)=>{var{axisLine:r,width:n,height:a,className:s,hide:i,ticks:l,axisType:c}=t,u=kZe(t,TZe),[d,f]=v.useState(""),[h,A]=v.useState(""),m=v.useRef(null);v.useImperativeHandle(e,()=>({getCalculatedWidth:()=>{var g;return PZe({ticks:m.current,label:(g=t.labelRef)===null||g===void 0?void 0:g.current,labelGapWithTick:5,tickSize:t.tickSize,tickMargin:t.tickMargin})}}));var p=v.useCallback(g=>{if(g){var x=g.getElementsByClassName("recharts-cartesian-axis-tick-value");m.current=x;var y=x[0];if(y){var b=window.getComputedStyle(y),w=b.fontSize,j=b.letterSpacing;(w!==d||j!==h)&&(f(w),A(j))}}},[d,h]);return i||n!=null&&n<=0||a!=null&&a<=0?null:v.createElement(Mf,{zIndex:t.zIndex},v.createElement(Hl,{className:Ea("recharts-cartesian-axis",s)},v.createElement(MZe,{x:t.x,y:t.y,width:n,height:a,orientation:t.orientation,mirror:t.mirror,axisLine:r,otherSvgProps:If(t)}),v.createElement(HZe,{ref:p,axisType:c,events:u,fontSize:d,getTicksConfig:t,height:t.height,letterSpacing:h,mirror:t.mirror,orientation:t.orientation,padding:t.padding,stroke:t.stroke,tick:t.tick,tickFormatter:t.tickFormatter,tickLine:t.tickLine,tickMargin:t.tickMargin,tickSize:t.tickSize,tickTextProps:t.tickTextProps,ticks:l,unit:t.unit,width:t.width,x:t.x,y:t.y}),v.createElement(eYe,{x:t.x,y:t.y,width:t.width,height:t.height,lowerWidth:t.width,upperWidth:t.width},v.createElement(uYe,{label:t.label,labelRef:t.labelRef}),t.children)))}),B8=v.forwardRef((t,e)=>{var r=zo(t,pp);return v.createElement($Ze,Gp({},r,{ref:e}))});B8.displayName="CartesianAxis";var KZe={},Mle=yc({name:"errorBars",initialState:KZe,reducers:{addErrorBar:(t,e)=>{var{itemId:r,errorBar:n}=e.payload;t[r]||(t[r]=[]),t[r].push(n)},replaceErrorBar:(t,e)=>{var{itemId:r,prev:n,next:a}=e.payload;t[r]&&(t[r]=t[r].map(s=>s.dataKey===n.dataKey&&s.direction===n.direction?a:s))},removeErrorBar:(t,e)=>{var{itemId:r,errorBar:n}=e.payload;t[r]&&(t[r]=t[r].filter(a=>a.dataKey!==n.dataKey||a.direction!==n.direction))}}}),{addErrorBar:vnt,replaceErrorBar:ynt,removeErrorBar:bnt}=Mle.actions,GZe=Mle.reducer,qZe=["children"];function zZe(t,e){if(t==null)return{};var r,n,a=WZe(t,e);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(t);for(n=0;n<s.length;n++)r=s[n],e.indexOf(r)===-1&&{}.propertyIsEnumerable.call(t,r)&&(a[r]=t[r])}return a}function WZe(t,e){if(t==null)return{};var r={};for(var n in t)if({}.hasOwnProperty.call(t,n)){if(e.indexOf(n)!==-1)continue;r[n]=t[n]}return r}var XZe={data:[],xAxisId:"xAxis-0",yAxisId:"yAxis-0",dataPointFormatter:()=>({x:0,y:0,value:0}),errorBarOffset:0},YZe=v.createContext(XZe);function JZe(t){var{children:e}=t,r=zZe(t,qZe);return v.createElement(YZe.Provider,{value:r},e)}function Lle(t,e){var r,n,a=Gr(u=>lh(u,t)),s=Gr(u=>ch(u,e)),i=(r=a==null?void 0:a.allowDataOverflow)!==null&&r!==void 0?r:ao.allowDataOverflow,l=(n=s==null?void 0:s.allowDataOverflow)!==null&&n!==void 0?n:so.allowDataOverflow,c=i||l;return{needClip:c,needClipX:i,needClipY:l}}function ZZe(t){var{xAxisId:e,yAxisId:r,clipPathId:n}=t,a=kle(),{needClipX:s,needClipY:i,needClip:l}=Lle(e,r);if(!l||!a)return null;var{x:c,y:u,width:d,height:f}=a;return v.createElement("clipPath",{id:"clipPath-".concat(n)},v.createElement("rect",{x:s?c:c-d/2,y:i?u:u-f/2,width:s?d:d*2,height:i?f:f*2}))}var eet={};/**
 * @license React
 * use-sync-external-store-with-selector.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Rw=v;function tet(t,e){return t===e&&(t!==0||1/t===1/e)||t!==t&&e!==e}var ret=typeof Object.is=="function"?Object.is:tet,net=Rw.useSyncExternalStore,aet=Rw.useRef,set=Rw.useEffect,iet=Rw.useMemo,oet=Rw.useDebugValue;eet.useSyncExternalStoreWithSelector=function(t,e,r,n,a){var s=aet(null);if(s.current===null){var i={hasValue:!1,value:null};s.current=i}else i=s.current;s=iet(function(){function c(A){if(!u){if(u=!0,d=A,A=n(A),a!==void 0&&i.hasValue){var m=i.value;if(a(m,A))return f=m}return f=A}if(m=f,ret(d,A))return m;var p=n(A);return a!==void 0&&a(m,p)?(d=A,m):(d=A,f=p)}var u=!1,d,f,h=r===void 0?null:r;return[function(){return c(e())},h===null?void 0:function(){return c(h())}]},[e,r,n,a]);var l=net(t,s[0],s[1]);return set(function(){i.hasValue=!0,i.value=l},[l]),oet(l),l};function cet(t){t()}function uet(){let t=null,e=null;return{clear(){t=null,e=null},notify(){cet(()=>{let r=t;for(;r;)r.callback(),r=r.next})},get(){const r=[];let n=t;for(;n;)r.push(n),n=n.next;return r},subscribe(r){let n=!0;const a=e={callback:r,next:null,prev:e};return a.prev?a.prev.next=a:t=a,function(){!n||t===null||(n=!1,a.next?a.next.prev=a.prev:e=a.prev,a.prev?a.prev.next=a.next:t=a.next)}}}}var yq={notify(){},get:()=>[]};function det(t,e){let r,n=yq,a=0,s=!1;function i(p){d();const g=n.subscribe(p);let x=!1;return()=>{x||(x=!0,g(),f())}}function l(){n.notify()}function c(){m.onStateChange&&m.onStateChange()}function u(){return s}function d(){a++,r||(r=t.subscribe(c),n=uet())}function f(){a--,r&&a===0&&(r(),r=void 0,n.clear(),n=yq)}function h(){s||(s=!0,d())}function A(){s&&(s=!1,f())}const m={addNestedSub:i,notifyNestedSubs:l,handleChangeWrapper:c,isSubscribed:u,trySubscribe:h,tryUnsubscribe:A,getListeners:()=>n};return m}var fet=()=>typeof window<"u"&&typeof window.document<"u"&&typeof window.document.createElement<"u",Aet=fet(),het=()=>typeof navigator<"u"&&navigator.product==="ReactNative",met=het(),pet=()=>Aet||met?v.useLayoutEffect:v.useEffect,get=pet();function bq(t,e){return t===e?t!==0||e!==0||1/t===1/e:t!==t&&e!==e}function xet(t,e){if(bq(t,e))return!0;if(typeof t!="object"||t===null||typeof e!="object"||e===null)return!1;const r=Object.keys(t),n=Object.keys(e);if(r.length!==n.length)return!1;for(let a=0;a<r.length;a++)if(!Object.prototype.hasOwnProperty.call(e,r[a])||!bq(t[r[a]],e[r[a]]))return!1;return!0}var RB=Symbol.for("react-redux-context"),MB=typeof globalThis<"u"?globalThis:{};function vet(){if(!v.createContext)return{};const t=MB[RB]??(MB[RB]=new Map);let e=t.get(v.createContext);return e||(e=v.createContext(null),t.set(v.createContext,e)),e}var yet=vet();function bet(t){const{children:e,context:r,serverState:n,store:a}=t,s=v.useMemo(()=>{const c=det(a);return{store:a,subscription:c,getServerState:n?()=>n:void 0}},[a,n]),i=v.useMemo(()=>a.getState(),[a]);get(()=>{const{subscription:c}=s;return c.onStateChange=c.notifyNestedSubs,c.trySubscribe(),i!==a.getState()&&c.notifyNestedSubs(),()=>{c.tryUnsubscribe(),c.onStateChange=void 0}},[s,i]);const l=r||yet;return v.createElement(l.Provider,{value:s},e)}var wet=bet,Net=new Set(["axisLine","tickLine","activeBar","activeDot","activeLabel","activeShape","allowEscapeViewBox","background","cursor","dot","label","line","margin","padding","position","shape","style","tick","wrapperStyle","radius"]);function Cet(t,e){return t==null&&e==null?!0:typeof t=="number"&&typeof e=="number"?t===e||t!==t&&e!==e:t===e}function P8(t,e){var r=new Set([...Object.keys(t),...Object.keys(e)]);for(var n of r)if(Net.has(n)){if(t[n]==null&&e[n]==null)continue;if(!xet(t[n],e[n]))return!1}else if(!Cet(t[n],e[n]))return!1;return!0}function hg(t,e){var r,n;return(r=(n=t.graphicalItems.cartesianItems.find(a=>a.id===e))===null||n===void 0?void 0:n.xAxisId)!==null&&r!==void 0?r:Ple}function mg(t,e){var r,n;return(r=(n=t.graphicalItems.cartesianItems.find(a=>a.id===e))===null||n===void 0?void 0:n.yAxisId)!==null&&r!==void 0?r:Ple}var _et="Invariant failed";function Eet(t,e){throw new Error(_et)}function dF(){return dF=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var r=arguments[e];for(var n in r)({}).hasOwnProperty.call(r,n)&&(t[n]=r[n])}return t},dF.apply(null,arguments)}function dI(t){return v.createElement(Ele,dF({shapeType:"rectangle",activeClassName:"recharts-active-bar"},t))}var Iet=function(e){var r=arguments.length>1&&arguments[1]!==void 0?arguments[1]:0;return(n,a)=>{if(Wr(e))return e;var s=Wr(n)||vo(n);return s?e(n,a):(s||Eet(),r)}},jet=(t,e,r)=>r,Bet=(t,e)=>e,Mw=Rt([$R,Bet],(t,e)=>t.filter(r=>r.type==="bar").find(r=>r.id===e)),Pet=Rt([Mw],t=>t==null?void 0:t.maxBarSize),Tet=(t,e,r,n)=>n,ket=Rt([ra,$R,hg,mg,jet],(t,e,r,n,a)=>e.filter(s=>t==="horizontal"?s.xAxisId===r:s.yAxisId===n).filter(s=>s.isPanorama===a).filter(s=>s.hide===!1).filter(s=>s.type==="bar")),Fet=(t,e,r)=>{var n=ra(t),a=hg(t,e),s=mg(t,e);if(!(a==null||s==null))return n==="horizontal"?aF(t,"yAxis",s,r):aF(t,"xAxis",a,r)},Oet=(t,e)=>{var r=ra(t),n=hg(t,e),a=mg(t,e);if(!(n==null||a==null))return r==="horizontal"?bG(t,"xAxis",n):bG(t,"yAxis",a)},Det=Rt([ket,nqe,Oet],rZe),Ret=(t,e,r)=>{var n,a,s=Mw(t,e);if(s!=null){var i=hg(t,e),l=mg(t,e);if(!(i==null||l==null)){var c=ra(t),u=qie(t),{maxBarSize:d}=s,f=vo(d)?u:d,h,A;return c==="horizontal"?(h=bv(t,"xAxis",i,r),A=yv(t,"xAxis",i,r)):(h=bv(t,"yAxis",l,r),A=yv(t,"yAxis",l,r)),(n=(a=LS(h,A,!0))!==null&&a!==void 0?a:f)!==null&&n!==void 0?n:0}}},Ule=(t,e,r)=>{var n=ra(t),a=hg(t,e),s=mg(t,e);if(!(a==null||s==null)){var i,l;return n==="horizontal"?(i=bv(t,"xAxis",a,r),l=yv(t,"xAxis",a,r)):(i=bv(t,"yAxis",s,r),l=yv(t,"yAxis",s,r)),LS(i,l)}},Met=Rt([Det,qie,rqe,zie,Ret,Ule,Pet],oZe),Let=(t,e,r)=>{var n=hg(t,e);if(n!=null)return bv(t,"xAxis",n,r)},Uet=(t,e,r)=>{var n=mg(t,e);if(n!=null)return bv(t,"yAxis",n,r)},Qet=(t,e,r)=>{var n=hg(t,e);if(n!=null)return yv(t,"xAxis",n,r)},Vet=(t,e,r)=>{var n=mg(t,e);if(n!=null)return yv(t,"yAxis",n,r)},Het=Rt([Met,Mw],(t,e)=>{if(!(t==null||e==null)){var r=t.find(n=>n.stackId===e.stackId&&e.dataKey!=null&&n.dataKeys.includes(e.dataKey));if(r!=null)return r.position}}),$et=Rt([Fet,Mw],lZe),Ket=Rt([zi,sR,Let,Uet,Qet,Vet,Het,ra,$Ge,Ule,$et,Mw,Tet],(t,e,r,n,a,s,i,l,c,u,d,f,h)=>{var{chartData:A,dataStartIndex:m,dataEndIndex:p}=c;if(!(f==null||i==null||e==null||l!=="horizontal"&&l!=="vertical"||r==null||n==null||a==null||s==null||u==null)){var{data:g}=f,x;if(g!=null&&g.length>0?x=g:x=A==null?void 0:A.slice(m,p+1),x!=null)return ytt({layout:l,barSettings:f,pos:i,parentViewBox:e,bandSize:u,xAxis:r,yAxis:n,xAxisTicks:a,yAxisTicks:s,stackedData:d,displayedData:x,offset:t,cells:h,dataStartIndex:m})}}),Get=["index"];function fF(){return fF=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var r=arguments[e];for(var n in r)({}).hasOwnProperty.call(r,n)&&(t[n]=r[n])}return t},fF.apply(null,arguments)}function qet(t,e){if(t==null)return{};var r,n,a=zet(t,e);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(t);for(n=0;n<s.length;n++)r=s[n],e.indexOf(r)===-1&&{}.propertyIsEnumerable.call(t,r)&&(a[r]=t[r])}return a}function zet(t,e){if(t==null)return{};var r={};for(var n in t)if({}.hasOwnProperty.call(t,n)){if(e.indexOf(n)!==-1)continue;r[n]=t[n]}return r}var Qle=v.createContext(void 0),Wet=t=>{var e=v.useContext(Qle);if(e!=null)return e.stackId;if(t!=null)return KQe(t)},Xet=(t,e)=>"recharts-bar-stack-clip-path-".concat(t,"-").concat(e),Yet=t=>{var e=v.useContext(Qle);if(e!=null){var{stackId:r}=e;return"url(#".concat(Xet(r,t),")")}},Jet=t=>{var{index:e}=t,r=qet(t,Get),n=Yet(e);return v.createElement(Hl,fF({className:"recharts-bar-stack-layer",clipPath:n},r))},Zet=["onMouseEnter","onMouseLeave","onClick"],ett=["value","background","tooltipPosition"],ttt=["id"],rtt=["onMouseEnter","onClick","onMouseLeave"];function qA(){return qA=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var r=arguments[e];for(var n in r)({}).hasOwnProperty.call(r,n)&&(t[n]=r[n])}return t},qA.apply(null,arguments)}function wq(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter(function(a){return Object.getOwnPropertyDescriptor(t,a).enumerable})),r.push.apply(r,n)}return r}function Rl(t){for(var e=1;e<arguments.length;e++){var r=arguments[e]!=null?arguments[e]:{};e%2?wq(Object(r),!0).forEach(function(n){ntt(t,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):wq(Object(r)).forEach(function(n){Object.defineProperty(t,n,Object.getOwnPropertyDescriptor(r,n))})}return t}function ntt(t,e,r){return(e=att(e))in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}function att(t){var e=stt(t,"string");return typeof e=="symbol"?e:e+""}function stt(t,e){if(typeof t!="object"||!t)return t;var r=t[Symbol.toPrimitive];if(r!==void 0){var n=r.call(t,e);if(typeof n!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}function fI(t,e){if(t==null)return{};var r,n,a=itt(t,e);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(t);for(n=0;n<s.length;n++)r=s[n],e.indexOf(r)===-1&&{}.propertyIsEnumerable.call(t,r)&&(a[r]=t[r])}return a}function itt(t,e){if(t==null)return{};var r={};for(var n in t)if({}.hasOwnProperty.call(t,n)){if(e.indexOf(n)!==-1)continue;r[n]=t[n]}return r}var ott=t=>{var{dataKey:e,name:r,fill:n,legendType:a,hide:s}=t;return[{inactive:s,dataKey:e,type:a,color:n,value:Z4(r,e),payload:t}]},ltt=v.memo(t=>{var{dataKey:e,stroke:r,strokeWidth:n,fill:a,name:s,hide:i,unit:l,tooltipType:c,id:u}=t,d={dataDefinedOnItem:void 0,positions:void 0,settings:{stroke:r,strokeWidth:n,fill:a,dataKey:e,nameKey:void 0,name:Z4(s,e),hide:i,type:c,color:a,unit:l,graphicalItemId:u}};return v.createElement(Sle,{tooltipEntrySettings:d})});function ctt(t){var e=Gr(Kp),{data:r,dataKey:n,background:a,allOtherBarProps:s}=t,{onMouseEnter:i,onMouseLeave:l,onClick:c}=s,u=fI(s,Zet),d=E8(i,n,s.id),f=S8(l),h=I8(c,n,s.id);if(!a||r==null)return null;var A=p2(a);return v.createElement(Mf,{zIndex:cZe(a,pl.barBackground)},r.map((m,p)=>{var{value:g,background:x,tooltipPosition:y}=m,b=fI(m,ett);if(!x)return null;var w=d(m,p),j=f(m,p),I=h(m,p),_=Rl(Rl(Rl(Rl(Rl({option:a,isActive:String(p)===e},b),{},{fill:"#eee"},x),A),gw(u,m,p)),{},{onMouseEnter:w,onMouseLeave:j,onClick:I,dataKey:n,index:p,className:"recharts-bar-background-rectangle"});return v.createElement(dI,qA({key:"background-bar-".concat(p)},_))}))}function utt(t){var{showLabels:e,children:r,rects:n}=t,a=n==null?void 0:n.map(s=>{var i={x:s.x,y:s.y,width:s.width,lowerWidth:s.width,upperWidth:s.width,height:s.height};return Rl(Rl({},i),{},{value:s.value,payload:s.payload,parentViewBox:s.parentViewBox,viewBox:i,fill:s.fill})});return v.createElement(gYe,{value:e?a:void 0},r)}function dtt(t){var{shape:e,activeBar:r,baseProps:n,entry:a,index:s,dataKey:i}=t,l=Gr(Kp),c=Gr(m8),u=r&&String(s)===l&&(c==null||i===c),d=u?r:e;return u?v.createElement(Mf,{zIndex:pl.activeBar},v.createElement(dI,qA({},n,{name:String(n.name)},a,{isActive:u,option:d,index:s,dataKey:i}))):v.createElement(dI,qA({},n,{name:String(n.name)},a,{isActive:u,option:d,index:s,dataKey:i}))}function ftt(t){var{shape:e,baseProps:r,entry:n,index:a,dataKey:s}=t;return v.createElement(dI,qA({},r,{name:String(r.name)},n,{isActive:!1,option:e,index:a,dataKey:s}))}function Att(t){var e,{data:r,props:n}=t,a=(e=If(n))!==null&&e!==void 0?e:{},{id:s}=a,i=fI(a,ttt),{shape:l,dataKey:c,activeBar:u}=n,{onMouseEnter:d,onClick:f,onMouseLeave:h}=n,A=fI(n,rtt),m=E8(d,c,s),p=S8(h),g=I8(f,c,s);return r?v.createElement(v.Fragment,null,r.map((x,y)=>v.createElement(Jet,qA({index:y,key:"rectangle-".concat(x==null?void 0:x.x,"-").concat(x==null?void 0:x.y,"-").concat(x==null?void 0:x.value,"-").concat(y),className:"recharts-bar-rectangle"},gw(A,x,y),{onMouseEnter:m(x,y),onMouseLeave:p(x,y),onClick:g(x,y)}),u?v.createElement(dtt,{shape:l,activeBar:u,baseProps:i,entry:x,index:y,dataKey:c}):v.createElement(ftt,{shape:l,baseProps:i,entry:x,index:y,dataKey:c})))):null}function htt(t){var{props:e,previousRectanglesRef:r}=t,{data:n,layout:a,isAnimationActive:s,animationBegin:i,animationDuration:l,animationEasing:c,onAnimationEnd:u,onAnimationStart:d}=e,f=r.current,h=d3(e,"recharts-bar-"),[A,m]=v.useState(!1),p=!A,g=v.useCallback(()=>{typeof u=="function"&&u(),m(!1)},[u]),x=v.useCallback(()=>{typeof d=="function"&&d(),m(!0)},[d]);return v.createElement(utt,{showLabels:p,rects:n},v.createElement(u3,{animationId:h,begin:i,duration:l,isActive:s,easing:c,onAnimationEnd:g,onAnimationStart:x,key:h},y=>{var b=y===1?n:n==null?void 0:n.map((w,j)=>{var I=f&&f[j];if(I)return Rl(Rl({},w),{},{x:Di(I.x,w.x,y),y:Di(I.y,w.y,y),width:Di(I.width,w.width,y),height:Di(I.height,w.height,y)});if(a==="horizontal"){var _=Di(0,w.height,y),E=Di(w.stackedBarStart,w.y,y);return Rl(Rl({},w),{},{y:E,height:_})}var S=Di(0,w.width,y),k=Di(w.stackedBarStart,w.x,y);return Rl(Rl({},w),{},{width:S,x:k})});return y>0&&(r.current=b??null),b==null?null:v.createElement(Hl,null,v.createElement(Att,{props:e,data:b}))}),v.createElement(xle,{label:e.label}),e.children)}function mtt(t){var e=v.useRef(null);return v.createElement(htt,{previousRectanglesRef:e,props:t})}var Vle=0,ptt=(t,e)=>{var r=Array.isArray(t.value)?t.value[1]:t.value;return{x:t.x,y:t.y,value:r,errorVal:ns(t,e)}};class gtt extends v.PureComponent{render(){var{hide:e,data:r,dataKey:n,className:a,xAxisId:s,yAxisId:i,needClip:l,background:c,id:u}=this.props;if(e||r==null)return null;var d=Ea("recharts-bar",a),f=u;return v.createElement(Hl,{className:d,id:u},l&&v.createElement("defs",null,v.createElement(ZZe,{clipPathId:f,xAxisId:s,yAxisId:i})),v.createElement(Hl,{className:"recharts-bar-rectangles",clipPath:l?"url(#clipPath-".concat(f,")"):void 0},v.createElement(ctt,{data:r,dataKey:n,background:c,allOtherBarProps:this.props}),v.createElement(mtt,this.props)))}}var xtt={activeBar:!1,animationBegin:0,animationDuration:400,animationEasing:"ease",background:!1,hide:!1,isAnimationActive:"auto",label:!1,legendType:"rect",minPointSize:Vle,xAxisId:0,yAxisId:0,zIndex:pl.bar};function vtt(t){var{xAxisId:e,yAxisId:r,hide:n,legendType:a,minPointSize:s,activeBar:i,animationBegin:l,animationDuration:c,animationEasing:u,isAnimationActive:d}=t,{needClip:f}=Lle(e,r),h=bw(),A=nu(),m=_8(t.children,Dw),p=Gr(y=>Ket(y,t.id,A,m));if(h!=="vertical"&&h!=="horizontal")return null;var g,x=p==null?void 0:p[0];return x==null||x.height==null||x.width==null?g=0:g=h==="vertical"?x.height/2:x.width/2,v.createElement(JZe,{xAxisId:e,yAxisId:r,data:p,dataPointFormatter:ptt,errorBarOffset:g},v.createElement(gtt,qA({},t,{layout:h,needClip:f,data:p,xAxisId:e,yAxisId:r,hide:n,legendType:a,minPointSize:s,activeBar:i,animationBegin:l,animationDuration:c,animationEasing:u,isAnimationActive:d})))}function ytt(t){var{layout:e,barSettings:{dataKey:r,minPointSize:n},pos:a,bandSize:s,xAxis:i,yAxis:l,xAxisTicks:c,yAxisTicks:u,stackedData:d,displayedData:f,offset:h,cells:A,parentViewBox:m,dataStartIndex:p}=t,g=e==="horizontal"?l:i,x=d?g.scale.domain():null,y=GQe({numericAxis:g}),b=g.scale(y);return f.map((w,j)=>{var I,_,E,S,k,P;if(d){var T=d[j+p];if(T==null)return null;I=UQe(T,x)}else I=ns(w,r),Array.isArray(I)||(I=[y,I]);var F=Iet(n,Vle)(I[1],j);if(e==="horizontal"){var Y,[he,ue]=[l.scale(I[0]),l.scale(I[1])];_=P$({axis:i,ticks:c,bandSize:s,offset:a.offset,entry:w,index:j}),E=(Y=ue??he)!==null&&Y!==void 0?Y:void 0,S=a.size;var fe=he-ue;if(k=jf(fe)?0:fe,P={x:_,y:h.top,width:S,height:h.height},Math.abs(F)>0&&Math.abs(k)<Math.abs(F)){var me=Ko(k||F)*(Math.abs(F)-Math.abs(k));E-=me,k+=me}}else{var[ne,Pe]=[i.scale(I[0]),i.scale(I[1])];if(_=ne,E=P$({axis:l,ticks:u,bandSize:s,offset:a.offset,entry:w,index:j}),S=Pe-ne,k=a.size,P={x:h.left,y:E,width:h.width,height:k},Math.abs(F)>0&&Math.abs(S)<Math.abs(F)){var Ie=Ko(S||F)*(Math.abs(F)-Math.abs(S));S+=Ie}}if(_==null||E==null||S==null||k==null)return null;var O=Rl(Rl({},w),{},{stackedBarStart:b,x:_,y:E,width:S,height:k,value:d?I:I[1],payload:w,background:P,tooltipPosition:{x:_+S/2,y:E+k/2},parentViewBox:m},A&&A[j]&&A[j].props);return O}).filter(Boolean)}function btt(t){var e=zo(t,xtt),r=Wet(e.stackId),n=nu();return v.createElement(Ile,{id:e.id,type:"bar"},a=>v.createElement(v.Fragment,null,v.createElement(tJe,{legendPayload:ott(e)}),v.createElement(ltt,{dataKey:e.dataKey,stroke:e.stroke,strokeWidth:e.strokeWidth,fill:e.fill,name:e.name,hide:e.hide,unit:e.unit,tooltipType:e.tooltipType,id:a}),v.createElement(mJe,{type:"bar",id:a,data:void 0,xAxisId:e.xAxisId,yAxisId:e.yAxisId,zAxisId:0,dataKey:e.dataKey,stackId:r,hide:e.hide,barSize:e.barSize,minPointSize:e.minPointSize,maxBarSize:e.maxBarSize,isPanorama:n}),v.createElement(Mf,{zIndex:e.zIndex},v.createElement(vtt,qA({},e,{id:a})))))}var AF=v.memo(btt,P8);AF.displayName="Bar";var wtt=["domain","range"],Ntt=["domain","range"];function Nq(t,e){if(t==null)return{};var r,n,a=Ctt(t,e);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(t);for(n=0;n<s.length;n++)r=s[n],e.indexOf(r)===-1&&{}.propertyIsEnumerable.call(t,r)&&(a[r]=t[r])}return a}function Ctt(t,e){if(t==null)return{};var r={};for(var n in t)if({}.hasOwnProperty.call(t,n)){if(e.indexOf(n)!==-1)continue;r[n]=t[n]}return r}function Cq(t,e){return t===e?!0:Array.isArray(t)&&t.length===2&&Array.isArray(e)&&e.length===2?t[0]===e[0]&&t[1]===e[1]:!1}function Hle(t,e){if(t===e)return!0;var{domain:r,range:n}=t,a=Nq(t,wtt),{domain:s,range:i}=e,l=Nq(e,Ntt);return!Cq(r,s)||!Cq(n,i)?!1:P8(a,l)}var _tt=["dangerouslySetInnerHTML","ticks","scale"],Ett=["id","scale"];function hF(){return hF=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var r=arguments[e];for(var n in r)({}).hasOwnProperty.call(r,n)&&(t[n]=r[n])}return t},hF.apply(null,arguments)}function _q(t,e){if(t==null)return{};var r,n,a=Stt(t,e);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(t);for(n=0;n<s.length;n++)r=s[n],e.indexOf(r)===-1&&{}.propertyIsEnumerable.call(t,r)&&(a[r]=t[r])}return a}function Stt(t,e){if(t==null)return{};var r={};for(var n in t)if({}.hasOwnProperty.call(t,n)){if(e.indexOf(n)!==-1)continue;r[n]=t[n]}return r}function Itt(t){var e=qa(),r=v.useRef(null);return v.useLayoutEffect(()=>{r.current===null?e(GJe(t)):r.current!==t&&e(qJe({prev:r.current,next:t})),r.current=t},[t,e]),v.useLayoutEffect(()=>()=>{r.current&&(e(zJe(r.current)),r.current=null)},[e]),null}var jtt=t=>{var{xAxisId:e,className:r}=t,n=Gr(sR),a=nu(),s="xAxis",i=Gr(x=>Eoe(x,s,e,a)),l=Gr(x=>woe(x,e)),c=Gr(x=>eze(x,e)),u=Gr(x=>noe(x,e));if(l==null||c==null||u==null)return null;var{dangerouslySetInnerHTML:d,ticks:f,scale:h}=t,A=_q(t,_tt),{id:m,scale:p}=u,g=_q(u,Ett);return v.createElement(B8,hF({},A,g,{x:c.x,y:c.y,width:l.width,height:l.height,className:Ea("recharts-".concat(s," ").concat(s),r),viewBox:n,ticks:i,axisType:s}))},Btt={allowDataOverflow:ao.allowDataOverflow,allowDecimals:ao.allowDecimals,allowDuplicatedCategory:ao.allowDuplicatedCategory,angle:ao.angle,axisLine:pp.axisLine,height:ao.height,hide:!1,includeHidden:ao.includeHidden,interval:ao.interval,minTickGap:ao.minTickGap,mirror:ao.mirror,orientation:ao.orientation,padding:ao.padding,reversed:ao.reversed,scale:ao.scale,tick:ao.tick,tickCount:ao.tickCount,tickLine:pp.tickLine,tickSize:pp.tickSize,type:ao.type,xAxisId:0},Ptt=t=>{var e=zo(t,Btt);return v.createElement(v.Fragment,null,v.createElement(Itt,{allowDataOverflow:e.allowDataOverflow,allowDecimals:e.allowDecimals,allowDuplicatedCategory:e.allowDuplicatedCategory,angle:e.angle,dataKey:e.dataKey,domain:e.domain,height:e.height,hide:e.hide,id:e.xAxisId,includeHidden:e.includeHidden,interval:e.interval,minTickGap:e.minTickGap,mirror:e.mirror,name:e.name,orientation:e.orientation,padding:e.padding,reversed:e.reversed,scale:e.scale,tick:e.tick,tickCount:e.tickCount,tickFormatter:e.tickFormatter,ticks:e.ticks,type:e.type,unit:e.unit}),v.createElement(jtt,e))},$le=v.memo(Ptt,Hle);$le.displayName="XAxis";var Ttt=["dangerouslySetInnerHTML","ticks","scale"],ktt=["id","scale"];function mF(){return mF=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var r=arguments[e];for(var n in r)({}).hasOwnProperty.call(r,n)&&(t[n]=r[n])}return t},mF.apply(null,arguments)}function Eq(t,e){if(t==null)return{};var r,n,a=Ftt(t,e);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(t);for(n=0;n<s.length;n++)r=s[n],e.indexOf(r)===-1&&{}.propertyIsEnumerable.call(t,r)&&(a[r]=t[r])}return a}function Ftt(t,e){if(t==null)return{};var r={};for(var n in t)if({}.hasOwnProperty.call(t,n)){if(e.indexOf(n)!==-1)continue;r[n]=t[n]}return r}function Ott(t){var e=qa(),r=v.useRef(null);return v.useLayoutEffect(()=>{r.current===null?e(WJe(t)):r.current!==t&&e(XJe({prev:r.current,next:t})),r.current=t},[t,e]),v.useLayoutEffect(()=>()=>{r.current&&(e(YJe(r.current)),r.current=null)},[e]),null}var Dtt=t=>{var{yAxisId:e,className:r,width:n,label:a}=t,s=v.useRef(null),i=v.useRef(null),l=Gr(sR),c=nu(),u=qa(),d="yAxis",f=Gr(I=>Noe(I,e)),h=Gr(I=>rze(I,e)),A=Gr(I=>Eoe(I,d,e,c)),m=Gr(I=>aoe(I,e));if(v.useLayoutEffect(()=>{if(!(n!=="auto"||!f||y8(a)||v.isValidElement(a)||m==null)){var I=s.current;if(I){var _=I.getCalculatedWidth();Math.round(f.width)!==Math.round(_)&&u(JJe({id:e,width:_}))}}},[A,f,u,a,e,n,m]),f==null||h==null||m==null)return null;var{dangerouslySetInnerHTML:p,ticks:g,scale:x}=t,y=Eq(t,Ttt),{id:b,scale:w}=m,j=Eq(m,ktt);return v.createElement(B8,mF({},y,j,{ref:s,labelRef:i,x:h.x,y:h.y,tickTextProps:n==="auto"?{width:void 0}:{width:n},width:f.width,height:f.height,className:Ea("recharts-".concat(d," ").concat(d),r),viewBox:l,ticks:A,axisType:d}))},Rtt={allowDataOverflow:so.allowDataOverflow,allowDecimals:so.allowDecimals,allowDuplicatedCategory:so.allowDuplicatedCategory,angle:so.angle,axisLine:pp.axisLine,hide:!1,includeHidden:so.includeHidden,interval:so.interval,minTickGap:so.minTickGap,mirror:so.mirror,orientation:so.orientation,padding:so.padding,reversed:so.reversed,scale:so.scale,tick:so.tick,tickCount:so.tickCount,tickLine:pp.tickLine,tickSize:pp.tickSize,type:so.type,width:so.width,yAxisId:0},Mtt=t=>{var e=zo(t,Rtt);return v.createElement(v.Fragment,null,v.createElement(Ott,{interval:e.interval,id:e.yAxisId,scale:e.scale,type:e.type,domain:e.domain,allowDataOverflow:e.allowDataOverflow,dataKey:e.dataKey,allowDuplicatedCategory:e.allowDuplicatedCategory,allowDecimals:e.allowDecimals,tickCount:e.tickCount,padding:e.padding,includeHidden:e.includeHidden,reversed:e.reversed,ticks:e.ticks,width:e.width,orientation:e.orientation,mirror:e.mirror,hide:e.hide,unit:e.unit,name:e.name,angle:e.angle,minTickGap:e.minTickGap,tick:e.tick,tickFormatter:e.tickFormatter}),v.createElement(Dtt,e))},Kle=v.memo(Mtt,Hle);Kle.displayName="YAxis";var Ltt=(t,e)=>e,T8=Rt([Ltt,ra,toe,Xi,Voe,uh,gWe,zi],CWe),k8=t=>{var e=t.currentTarget.getBoundingClientRect(),r=e.width/t.currentTarget.offsetWidth,n=e.height/t.currentTarget.offsetHeight;return{chartX:Math.round((t.clientX-e.left)/r),chartY:Math.round((t.clientY-e.top)/n)}},Gle=Wu("mouseClick"),qle=vw();qle.startListening({actionCreator:Gle,effect:(t,e)=>{var r=t.payload,n=T8(e.getState(),k8(r));(n==null?void 0:n.activeIndex)!=null&&e.dispatch(pze({activeIndex:n.activeIndex,activeDataKey:void 0,activeCoordinate:n.activeCoordinate}))}});var pF=Wu("mouseMove"),zle=vw(),ZC=null;zle.startListening({actionCreator:pF,effect:(t,e)=>{var r=t.payload;ZC!==null&&cancelAnimationFrame(ZC);var n=k8(r);ZC=requestAnimationFrame(()=>{var a=e.getState(),s=c8(a,a.tooltip.settings.shared);if(s==="axis"){var i=T8(a,n);(i==null?void 0:i.activeIndex)!=null?e.dispatch(Foe({activeIndex:i.activeIndex,activeDataKey:void 0,activeCoordinate:i.activeCoordinate})):e.dispatch(koe())}ZC=null})}});function Utt(t,e){return e instanceof HTMLElement?"HTMLElement <".concat(e.tagName,' class="').concat(e.className,'">'):e===window?"global.window":t==="children"&&typeof e=="object"&&e!==null?"<<CHILDREN>>":e}var Sq={accessibilityLayer:!0,barCategoryGap:"10%",barGap:4,barSize:void 0,className:void 0,maxBarSize:void 0,stackOffset:"none",syncId:void 0,syncMethod:"index",baseValue:void 0,reverseStackOrder:!1},Wle=yc({name:"rootProps",initialState:Sq,reducers:{updateOptions:(t,e)=>{var r;t.accessibilityLayer=e.payload.accessibilityLayer,t.barCategoryGap=e.payload.barCategoryGap,t.barGap=(r=e.payload.barGap)!==null&&r!==void 0?r:Sq.barGap,t.barSize=e.payload.barSize,t.maxBarSize=e.payload.maxBarSize,t.stackOffset=e.payload.stackOffset,t.syncId=e.payload.syncId,t.syncMethod=e.payload.syncMethod,t.className=e.payload.className,t.baseValue=e.payload.baseValue,t.reverseStackOrder=e.payload.reverseStackOrder}}}),Qtt=Wle.reducer,{updateOptions:Vtt}=Wle.actions,Xle=yc({name:"polarOptions",initialState:null,reducers:{updatePolarOptions:(t,e)=>e.payload}}),{updatePolarOptions:Htt}=Xle.actions,$tt=Xle.reducer,Yle=Wu("keyDown"),Jle=Wu("focus"),F8=vw();F8.startListening({actionCreator:Yle,effect:(t,e)=>{var r=e.getState(),n=r.rootProps.accessibilityLayer!==!1;if(n){var{keyboardInteraction:a}=r.tooltip,s=t.payload;if(!(s!=="ArrowRight"&&s!=="ArrowLeft"&&s!=="Enter")){var i=u8(a,Zv(r),Pw(r),Fw(r)),l=i==null?-1:Number(i);if(!(!Number.isFinite(l)||l<0)){var c=uh(r);if(s==="Enter"){var u=oI(r,"axis","hover",String(a.index));e.dispatch(iF({active:!a.active,activeIndex:a.index,activeCoordinate:u}));return}var d=ize(r),f=d==="left-to-right"?1:-1,h=s==="ArrowRight"?1:-1,A=l+h*f;if(!(c==null||A>=c.length||A<0)){var m=oI(r,"axis","hover",String(A));e.dispatch(iF({active:!0,activeIndex:A.toString(),activeCoordinate:m}))}}}}}});F8.startListening({actionCreator:Jle,effect:(t,e)=>{var r=e.getState(),n=r.rootProps.accessibilityLayer!==!1;if(n){var{keyboardInteraction:a}=r.tooltip;if(!a.active&&a.index==null){var s="0",i=oI(r,"axis","hover",String(s));e.dispatch(iF({active:!0,activeIndex:s,activeCoordinate:i}))}}}});var _u=Wu("externalEvent"),Zle=vw(),LB=new Map;Zle.startListening({actionCreator:_u,effect:(t,e)=>{var{handler:r,reactEvent:n}=t.payload;if(r!=null){n.persist();var a=n.type,s=LB.get(a);s!==void 0&&cancelAnimationFrame(s);var i=requestAnimationFrame(()=>{try{var l=e.getState(),c={activeCoordinate:rWe(l),activeDataKey:m8(l),activeIndex:Kp(l),activeLabel:Koe(l),activeTooltipIndex:Kp(l),isTooltipActive:nWe(l)};r(c,n)}finally{LB.delete(a)}});LB.set(a,i)}}});var Ktt=Rt([Yv],t=>t.tooltipItemPayloads),Gtt=Rt([Ktt,kw,(t,e)=>e,(t,e,r)=>r],(t,e,r,n)=>{var a=t.find(l=>l.settings.graphicalItemId===n);if(a!=null){var{positions:s}=a;if(s!=null){var i=e(s,r);return i}}}),ece=Wu("touchMove"),tce=vw();tce.startListening({actionCreator:ece,effect:(t,e)=>{var r=t.payload;if(!(r.touches==null||r.touches.length===0)){var n=e.getState(),a=c8(n,n.tooltip.settings.shared);if(a==="axis"){var s=r.touches[0];if(s==null)return;var i=T8(n,k8({clientX:s.clientX,clientY:s.clientY,currentTarget:r.currentTarget}));(i==null?void 0:i.activeIndex)!=null&&e.dispatch(Foe({activeIndex:i.activeIndex,activeDataKey:void 0,activeCoordinate:i.activeCoordinate}))}else if(a==="item"){var l,c=r.touches[0];if(document.elementFromPoint==null||c==null)return;var u=document.elementFromPoint(c.clientX,c.clientY);if(!u||!u.getAttribute)return;var d=u.getAttribute(xse),f=(l=u.getAttribute(vse))!==null&&l!==void 0?l:void 0,h=Jv(n).find(p=>p.id===f);if(d==null||h==null||f==null)return;var{dataKey:A}=h,m=Gtt(n,d,f);e.dispatch(Toe({activeDataKey:A,activeIndex:d,activeCoordinate:m,activeGraphicalItemId:f}))}}}});var qtt=Vae({brush:uZe,cartesianAxis:ZJe,chartData:eXe,errorBars:GZe,graphicalItems:AJe,layout:FQe,legend:LVe,options:WWe,polarAxis:IYe,polarOptions:$tt,referenceElements:gZe,rootProps:Qtt,tooltip:gze,zIndex:MWe}),ztt=function(e){var r=arguments.length>1&&arguments[1]!==void 0?arguments[1]:"Chart";return sQe({reducer:qtt,preloadedState:e,middleware:n=>{var a;return n({serializableCheck:!1,immutableCheck:!["commonjs","es6","production"].includes((a="es6")!==null&&a!==void 0?a:"")}).concat([qle.middleware,zle.middleware,F8.middleware,Zle.middleware,tce.middleware])},enhancers:n=>{var a=n;return typeof n=="function"&&(a=n()),a.concat(nse({type:"raf"}))},devTools:{serialize:{replacer:Utt},name:"recharts-".concat(r)}})};function rce(t){var{preloadedState:e,children:r,reduxStoreName:n}=t,a=nu(),s=v.useRef(null);if(a)return r;s.current==null&&(s.current=ztt(e,n));var i=XD;return v.createElement(wet,{context:i,store:s.current},r)}function Wtt(t){var{layout:e,margin:r}=t,n=qa(),a=nu();return v.useEffect(()=>{a||(n(PQe(e)),n(BQe(r)))},[n,a,e,r]),null}var nce=v.memo(Wtt,P8);function ace(t){var e=qa();return v.useEffect(()=>{e(Vtt(t))},[e,t]),null}function Iq(t){var{zIndex:e,isPanorama:r}=t,n=v.useRef(null),a=qa();return v.useLayoutEffect(()=>(n.current&&a(DWe({zIndex:e,element:n.current,isPanorama:r})),()=>{a(RWe({zIndex:e,isPanorama:r}))}),[a,e,r]),v.createElement("g",{tabIndex:-1,ref:n})}function jq(t){var{children:e,isPanorama:r}=t,n=Gr(EWe);if(!n||n.length===0)return e;var a=n.filter(i=>i<0),s=n.filter(i=>i>0);return v.createElement(v.Fragment,null,a.map(i=>v.createElement(Iq,{key:i,zIndex:i,isPanorama:r})),e,s.map(i=>v.createElement(Iq,{key:i,zIndex:i,isPanorama:r})))}var Xtt=["children"];function Ytt(t,e){if(t==null)return{};var r,n,a=Jtt(t,e);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(t);for(n=0;n<s.length;n++)r=s[n],e.indexOf(r)===-1&&{}.propertyIsEnumerable.call(t,r)&&(a[r]=t[r])}return a}function Jtt(t,e){if(t==null)return{};var r={};for(var n in t)if({}.hasOwnProperty.call(t,n)){if(e.indexOf(n)!==-1)continue;r[n]=t[n]}return r}function AI(){return AI=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var r=arguments[e];for(var n in r)({}).hasOwnProperty.call(r,n)&&(t[n]=r[n])}return t},AI.apply(null,arguments)}var Ztt={width:"100%",height:"100%",display:"block"},ert=v.forwardRef((t,e)=>{var r=Sse(),n=Ise(),a=Lse();if(!W0(r)||!W0(n))return null;var{children:s,otherAttributes:i,title:l,desc:c}=t,u,d;return i!=null&&(typeof i.tabIndex=="number"?u=i.tabIndex:u=a?0:void 0,typeof i.role=="string"?d=i.role:d=a?"application":void 0),v.createElement(OD,AI({},i,{title:l,desc:c,role:d,tabIndex:u,width:r,height:n,style:Ztt,ref:e}),s)}),trt=t=>{var{children:e}=t,r=Gr(n3);if(!r)return null;var{width:n,height:a,y:s,x:i}=r;return v.createElement(OD,{width:n,height:a,x:i,y:s},e)},Bq=v.forwardRef((t,e)=>{var{children:r}=t,n=Ytt(t,Xtt),a=nu();return a?v.createElement(trt,null,v.createElement(jq,{isPanorama:!0},r)):v.createElement(ert,AI({ref:e},n),v.createElement(jq,{isPanorama:!1},r))});function rrt(){var t=qa(),[e,r]=v.useState(null),n=Gr(JQe);return v.useEffect(()=>{if(e!=null){var a=e.getBoundingClientRect(),s=a.width/e.offsetWidth;Os(s)&&s!==n&&t(kQe(s))}},[e,t,n]),r}function Pq(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter(function(a){return Object.getOwnPropertyDescriptor(t,a).enumerable})),r.push.apply(r,n)}return r}function nrt(t){for(var e=1;e<arguments.length;e++){var r=arguments[e]!=null?arguments[e]:{};e%2?Pq(Object(r),!0).forEach(function(n){art(t,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):Pq(Object(r)).forEach(function(n){Object.defineProperty(t,n,Object.getOwnPropertyDescriptor(r,n))})}return t}function art(t,e,r){return(e=srt(e))in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}function srt(t){var e=irt(t,"string");return typeof e=="symbol"?e:e+""}function irt(t,e){if(typeof t!="object"||!t)return t;var r=t[Symbol.toPrimitive];if(r!==void 0){var n=r.call(t,e);if(typeof n!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}function qp(){return qp=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var r=arguments[e];for(var n in r)({}).hasOwnProperty.call(r,n)&&(t[n]=r[n])}return t},qp.apply(null,arguments)}var ort=()=>(cXe(),null);function hI(t){if(typeof t=="number")return t;if(typeof t=="string"){var e=parseFloat(t);if(!Number.isNaN(e))return e}return 0}var lrt=v.forwardRef((t,e)=>{var r,n,a=v.useRef(null),[s,i]=v.useState({containerWidth:hI((r=t.style)===null||r===void 0?void 0:r.width),containerHeight:hI((n=t.style)===null||n===void 0?void 0:n.height)}),l=v.useCallback((u,d)=>{i(f=>{var h=Math.round(u),A=Math.round(d);return f.containerWidth===h&&f.containerHeight===A?f:{containerWidth:h,containerHeight:A}})},[]),c=v.useCallback(u=>{if(typeof e=="function"&&e(u),u!=null&&typeof ResizeObserver<"u"){var{width:d,height:f}=u.getBoundingClientRect();l(d,f);var h=m=>{var{width:p,height:g}=m[0].contentRect;l(p,g)},A=new ResizeObserver(h);A.observe(u),a.current=A}},[e,l]);return v.useEffect(()=>()=>{var u=a.current;u!=null&&u.disconnect()},[l]),v.createElement(v.Fragment,null,v.createElement(s3,{width:s.containerWidth,height:s.containerHeight}),v.createElement("div",qp({ref:c},t)))}),crt=v.forwardRef((t,e)=>{var{width:r,height:n}=t,[a,s]=v.useState({containerWidth:hI(r),containerHeight:hI(n)}),i=v.useCallback((c,u)=>{s(d=>{var f=Math.round(c),h=Math.round(u);return d.containerWidth===f&&d.containerHeight===h?d:{containerWidth:f,containerHeight:h}})},[]),l=v.useCallback(c=>{if(typeof e=="function"&&e(c),c!=null){var{width:u,height:d}=c.getBoundingClientRect();i(u,d)}},[e,i]);return v.createElement(v.Fragment,null,v.createElement(s3,{width:a.containerWidth,height:a.containerHeight}),v.createElement("div",qp({ref:l},t)))}),urt=v.forwardRef((t,e)=>{var{width:r,height:n}=t;return v.createElement(v.Fragment,null,v.createElement(s3,{width:r,height:n}),v.createElement("div",qp({ref:e},t)))}),drt=v.forwardRef((t,e)=>{var{width:r,height:n}=t;return QA(r)||QA(n)?v.createElement(crt,qp({},t,{ref:e})):v.createElement(urt,qp({},t,{ref:e}))});function frt(t){return t===!0?lrt:drt}var Art=v.forwardRef((t,e)=>{var{children:r,className:n,height:a,onClick:s,onContextMenu:i,onDoubleClick:l,onMouseDown:c,onMouseEnter:u,onMouseLeave:d,onMouseMove:f,onMouseUp:h,onTouchEnd:A,onTouchMove:m,onTouchStart:p,style:g,width:x,responsive:y,dispatchTouchEvents:b=!0}=t,w=v.useRef(null),j=qa(),[I,_]=v.useState(null),[E,S]=v.useState(null),k=rrt(),P=iR(),T=(P==null?void 0:P.width)>0?P.width:x,F=(P==null?void 0:P.height)>0?P.height:a,Y=v.useCallback(L=>{k(L),typeof e=="function"&&e(L),_(L),S(L),L!=null&&(w.current=L)},[k,e,_,S]),he=v.useCallback(L=>{j(Gle(L)),j(_u({handler:s,reactEvent:L}))},[j,s]),ue=v.useCallback(L=>{j(pF(L)),j(_u({handler:u,reactEvent:L}))},[j,u]),fe=v.useCallback(L=>{j(koe()),j(_u({handler:d,reactEvent:L}))},[j,d]),me=v.useCallback(L=>{j(pF(L)),j(_u({handler:f,reactEvent:L}))},[j,f]),ne=v.useCallback(()=>{j(Jle())},[j]),Pe=v.useCallback(L=>{j(Yle(L.key))},[j]),Ie=v.useCallback(L=>{j(_u({handler:i,reactEvent:L}))},[j,i]),O=v.useCallback(L=>{j(_u({handler:l,reactEvent:L}))},[j,l]),H=v.useCallback(L=>{j(_u({handler:c,reactEvent:L}))},[j,c]),R=v.useCallback(L=>{j(_u({handler:h,reactEvent:L}))},[j,h]),M=v.useCallback(L=>{j(_u({handler:p,reactEvent:L}))},[j,p]),K=v.useCallback(L=>{b&&j(ece(L)),j(_u({handler:m,reactEvent:L}))},[j,b,m]),W=v.useCallback(L=>{j(_u({handler:A,reactEvent:L}))},[j,A]),D=frt(y);return v.createElement(Joe.Provider,{value:I},v.createElement(Hne.Provider,{value:E},v.createElement(D,{width:T??(g==null?void 0:g.width),height:F??(g==null?void 0:g.height),className:Ea("recharts-wrapper",n),style:nrt({position:"relative",cursor:"default",width:T,height:F},g),onClick:he,onContextMenu:Ie,onDoubleClick:O,onFocus:ne,onKeyDown:Pe,onMouseDown:H,onMouseEnter:ue,onMouseLeave:fe,onMouseMove:me,onMouseUp:R,onTouchEnd:W,onTouchMove:K,onTouchStart:M,ref:Y},v.createElement(ort,null),r)))}),hrt=["width","height","responsive","children","className","style","compact","title","desc"];function mrt(t,e){if(t==null)return{};var r,n,a=prt(t,e);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(t);for(n=0;n<s.length;n++)r=s[n],e.indexOf(r)===-1&&{}.propertyIsEnumerable.call(t,r)&&(a[r]=t[r])}return a}function prt(t,e){if(t==null)return{};var r={};for(var n in t)if({}.hasOwnProperty.call(t,n)){if(e.indexOf(n)!==-1)continue;r[n]=t[n]}return r}var sce=v.forwardRef((t,e)=>{var{width:r,height:n,responsive:a,children:s,className:i,style:l,compact:c,title:u,desc:d}=t,f=mrt(t,hrt),h=If(f);return c?v.createElement(v.Fragment,null,v.createElement(s3,{width:r,height:n}),v.createElement(Bq,{otherAttributes:h,title:u,desc:d},s)):v.createElement(Art,{className:i,style:l,width:r,height:n,responsive:a??!1,onClick:t.onClick,onMouseLeave:t.onMouseLeave,onMouseEnter:t.onMouseEnter,onMouseMove:t.onMouseMove,onMouseDown:t.onMouseDown,onMouseUp:t.onMouseUp,onContextMenu:t.onContextMenu,onDoubleClick:t.onDoubleClick,onTouchStart:t.onTouchStart,onTouchMove:t.onTouchMove,onTouchEnd:t.onTouchEnd},v.createElement(Bq,{otherAttributes:h,title:u,desc:d,ref:e},v.createElement(vZe,null,s)))});function gF(){return gF=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var r=arguments[e];for(var n in r)({}).hasOwnProperty.call(r,n)&&(t[n]=r[n])}return t},gF.apply(null,arguments)}var grt={top:5,right:5,bottom:5,left:5},xrt={accessibilityLayer:!0,barCategoryGap:"10%",barGap:4,layout:"horizontal",margin:grt,responsive:!1,reverseStackOrder:!1,stackOffset:"none",syncMethod:"index"},vrt=v.forwardRef(function(e,r){var n,a=zo(e.categoricalChartProps,xrt),{chartName:s,defaultTooltipEventType:i,validateTooltipEventTypes:l,tooltipPayloadSearcher:c,categoricalChartProps:u}=e,d={chartName:s,defaultTooltipEventType:i,validateTooltipEventTypes:l,tooltipPayloadSearcher:c,eventEmitter:void 0};return v.createElement(rce,{preloadedState:{options:d},reduxStoreName:(n=u.id)!==null&&n!==void 0?n:s},v.createElement(Fle,{chartData:u.data}),v.createElement(nce,{layout:a.layout,margin:a.margin}),v.createElement(ace,{baseValue:a.baseValue,accessibilityLayer:a.accessibilityLayer,barCategoryGap:a.barCategoryGap,maxBarSize:a.maxBarSize,stackOffset:a.stackOffset,barGap:a.barGap,barSize:a.barSize,syncId:a.syncId,syncMethod:a.syncMethod,className:a.className,reverseStackOrder:a.reverseStackOrder}),v.createElement(sce,gF({},a,{ref:r})))}),yrt=["axis","item"],brt=v.forwardRef((t,e)=>v.createElement(vrt,{chartName:"BarChart",defaultTooltipEventType:"axis",validateTooltipEventTypes:yrt,tooltipPayloadSearcher:ele,categoricalChartProps:t,ref:e}));function wrt(t){var e=qa();return v.useEffect(()=>{e(Htt(t))},[e,t]),null}var Nrt=["layout"];function xF(){return xF=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var r=arguments[e];for(var n in r)({}).hasOwnProperty.call(r,n)&&(t[n]=r[n])}return t},xF.apply(null,arguments)}function Crt(t,e){if(t==null)return{};var r,n,a=_rt(t,e);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(t);for(n=0;n<s.length;n++)r=s[n],e.indexOf(r)===-1&&{}.propertyIsEnumerable.call(t,r)&&(a[r]=t[r])}return a}function _rt(t,e){if(t==null)return{};var r={};for(var n in t)if({}.hasOwnProperty.call(t,n)){if(e.indexOf(n)!==-1)continue;r[n]=t[n]}return r}var Ert={top:5,right:5,bottom:5,left:5},ice={accessibilityLayer:!0,stackOffset:"none",barCategoryGap:"10%",barGap:4,margin:Ert,reverseStackOrder:!1,syncMethod:"index",layout:"radial",responsive:!1,cx:"50%",cy:"50%",innerRadius:0,outerRadius:"80%"},Srt=v.forwardRef(function(e,r){var n,a=zo(e.categoricalChartProps,ice),{layout:s}=a,i=Crt(a,Nrt),{chartName:l,defaultTooltipEventType:c,validateTooltipEventTypes:u,tooltipPayloadSearcher:d}=e,f={chartName:l,defaultTooltipEventType:c,validateTooltipEventTypes:u,tooltipPayloadSearcher:d,eventEmitter:void 0};return v.createElement(rce,{preloadedState:{options:f},reduxStoreName:(n=a.id)!==null&&n!==void 0?n:l},v.createElement(Fle,{chartData:a.data}),v.createElement(nce,{layout:s,margin:a.margin}),v.createElement(ace,{baseValue:void 0,accessibilityLayer:a.accessibilityLayer,barCategoryGap:a.barCategoryGap,maxBarSize:a.maxBarSize,stackOffset:a.stackOffset,barGap:a.barGap,barSize:a.barSize,syncId:a.syncId,syncMethod:a.syncMethod,className:a.className,reverseStackOrder:a.reverseStackOrder}),v.createElement(wrt,{cx:a.cx,cy:a.cy,startAngle:a.startAngle,endAngle:a.endAngle,innerRadius:a.innerRadius,outerRadius:a.outerRadius}),v.createElement(sce,xF({},i,{ref:r})))});function Tq(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter(function(a){return Object.getOwnPropertyDescriptor(t,a).enumerable})),r.push.apply(r,n)}return r}function kq(t){for(var e=1;e<arguments.length;e++){var r=arguments[e]!=null?arguments[e]:{};e%2?Tq(Object(r),!0).forEach(function(n){Irt(t,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):Tq(Object(r)).forEach(function(n){Object.defineProperty(t,n,Object.getOwnPropertyDescriptor(r,n))})}return t}function Irt(t,e,r){return(e=jrt(e))in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}function jrt(t){var e=Brt(t,"string");return typeof e=="symbol"?e:e+""}function Brt(t,e){if(typeof t!="object"||!t)return t;var r=t[Symbol.toPrimitive];if(r!==void 0){var n=r.call(t,e);if(typeof n!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}var Prt=["item"],Trt=kq(kq({},ice),{},{layout:"centric",startAngle:0,endAngle:360}),krt=v.forwardRef((t,e)=>{var r=zo(t,Trt);return v.createElement(Srt,{chartName:"PieChart",defaultTooltipEventType:"item",validateTooltipEventTypes:Prt,tooltipPayloadSearcher:ele,categoricalChartProps:r,ref:e})});const Frt="sellers_candies",e_="cash_deliveries_candies";function ia(t){const e=typeof t=="number"?t:parseFloat(String(t??"").replace(/,/g,""));return Number.isFinite(e)?e:0}function ti(t){return Number.isFinite(t)?t.toLocaleString("en-US",{minimumFractionDigits:2,maximumFractionDigits:2}):"0.00"}function t_(t,e){return t*e/100}function r_(t,e,r){return t-e-r}function Fq(t){return t?Sr(t.toDate(),"yyyy-MM-dd"):""}function n_(t){if(!t)return fr.fromDate(new Date);const[e,r,n]=t.split("-").map(s=>parseInt(s,10)),a=new Date(e,(r||1)-1,n||1,0,0,0,0);return fr.fromDate(a)}function Ort(){const t=new Date,[e,r]=v.useState(Sr(Qd(t),"yyyy-MM-dd")),[n,a]=v.useState(Sr(Ud(t),"yyyy-MM-dd")),[s,i]=v.useState([]),l=v.useMemo(()=>{const D=new Map;return s.forEach(L=>D.set(L.id,L)),D},[s]),[c,u]=v.useState([]),[d,f]=v.useState(!0),[h,A]=v.useState(()=>Sr(new Date,"yyyy-MM-dd")),[m,p]=v.useState(""),[g,x]=v.useState(""),[y,b]=v.useState("0"),[w,j]=v.useState(""),[I,_]=v.useState(null),[E,S]=v.useState({}),k=v.useRef(null);v.useEffect(()=>{const D=nr(ht(ke,Frt),on("name","asc")),L=Fd(D,Z=>{const ge=Z.docs.map(U=>{const Ge=U.data();return{id:U.id,name:String((Ge==null?void 0:Ge.name)??""),branch:Ge!=null&&Ge.branch?String(Ge.branch):"",commissionPercent:ia((Ge==null?void 0:Ge.commissionPercent)??0)}});i(ge)},()=>i([]));return()=>L()},[]),v.useEffect(()=>{f(!0);const D=n_(e),L=new Date(n_(n).toDate().getTime());L.setDate(L.getDate()+1);const Z=fr.fromDate(L),ge=nr(ht(ke,e_),cr("date",">=",D),cr("date","<",Z),on("date","desc")),U=Fd(ge,Ge=>{const ie=Ge.docs.map(J=>{const je=J.data();return{id:J.id,date:je==null?void 0:je.date,sellerId:String((je==null?void 0:je.sellerId)??""),sellerName:String((je==null?void 0:je.sellerName)??""),amountDelivered:ia(je==null?void 0:je.amountDelivered),commissionPercent:ia(je==null?void 0:je.commissionPercent),commissionPaid:ia(je==null?void 0:je.commissionPaid),extraExpenses:ia(je==null?void 0:je.extraExpenses),totalFinal:ia(je==null?void 0:je.totalFinal),comment:String((je==null?void 0:je.comment)??""),createdAt:je==null?void 0:je.createdAt,updatedAt:je==null?void 0:je.updatedAt}});u(ie),f(!1)},Ge=>{console.error("Firestore deliveries query error:",Ge),u([]),f(!1),alert("Firestore query fall. Revis consola (probable ndice).")});return()=>U()},[e,n]);const P=v.useMemo(()=>m?l.get(m):void 0,[m,l]),T=ia((P==null?void 0:P.commissionPercent)??0),F=ia(g),Y=ia(y),he=t_(F,T),ue=r_(F,he,Y),fe=v.useMemo(()=>{var L;const D=new Map;for(const Z of c){const ge=Z.sellerId||Z.sellerName||"UNKNOWN",U=D.get(ge)??{sellerId:Z.sellerId,sellerName:Z.sellerName||((L=l.get(Z.sellerId))==null?void 0:L.name)||"Sin nombre",delivered:0,commission:0,totalFinal:0};U.delivered+=ia(Z.amountDelivered),U.commission+=ia(Z.commissionPaid),U.totalFinal+=ia(Z.totalFinal),D.set(ge,U)}return Array.from(D.values()).sort((Z,ge)=>Z.sellerName.localeCompare(ge.sellerName))},[c,l]),me=v.useMemo(()=>{let D=0,L=0,Z=0,ge=0;for(const U of c)D+=ia(U.amountDelivered),L+=ia(U.commissionPaid),Z+=ia(U.extraExpenses),ge+=ia(U.totalFinal);return{delivered:D,commission:L,expenses:Z,totalFinal:ge}},[c]),ne=v.useMemo(()=>fe.map(D=>({name:D.sellerName,Entregado:Number(D.delivered.toFixed(2)),Comision:Number(D.commission.toFixed(2))})),[fe]),Pe=v.useMemo(()=>[{name:"Total Entregado (Bruto)",value:Number(me.delivered.toFixed(2))},{name:"Total Comisin",value:Number(me.commission.toFixed(2))},{name:"Total Gastos",value:Number(me.expenses.toFixed(2))}].filter(D=>D.value>0),[me]),Ie=["#3B82F6","#F59E0B","#EF4444"];async function O(){if(!m)return alert("Seleccion un vendedor.");if(F<=0)return alert("Ingres un Monto entregado vlido (> 0).");const D=l.get(m),L=(D==null?void 0:D.name)??"Sin nombre",Z=ia((D==null?void 0:D.commissionPercent)??0),ge=t_(F,Z),U=r_(F,ge,Y);await xn(ht(ke,e_),{date:n_(h),sellerId:m,sellerName:L,amountDelivered:F,commissionPercent:Z,commissionPaid:ge,extraExpenses:Y,totalFinal:U,comment:w??"",createdAt:fr.now()}),x(""),b("0"),j("")}function H(D){_(D.id),S({...D,dateInput:Fq(D.date)})}function R(){_(null),S({})}async function M(D){const L=E,Z=String(L.sellerId??""),ge=l.get(Z),U=String(L.sellerName??(ge==null?void 0:ge.name)??"Sin nombre"),Ge=ia(L.amountDelivered),ie=ia(L.extraExpenses),J=ia(L.commissionPercent??(ge==null?void 0:ge.commissionPercent)??0),je=t_(Ge,J),z=r_(Ge,je,ie),Ae=n_(String(L.dateInput??Fq(L.date)));await nn(qt(ke,e_,D),{date:Ae,sellerId:Z,sellerName:U,amountDelivered:Ge,commissionPercent:J,commissionPaid:je,extraExpenses:ie,totalFinal:z,comment:String(L.comment??""),updatedAt:fr.now()}),R()}async function K(D){confirm("Eliminar este registro?")&&await Cn(qt(ke,e_,D))}async function W(){if(!k.current)return;const D=await rg(k.current,{scale:2,useCORS:!0,backgroundColor:"#ffffff",scrollX:0,scrollY:-window.scrollY}),L=D.toDataURL("image/png"),Z=new Or("p","mm","a4"),ge=Z.internal.pageSize.getWidth(),U=Z.internal.pageSize.getHeight(),Ge=ge,ie=D.height*Ge/D.width;let J=ie,je=0;for(Z.addImage(L,"PNG",0,je,Ge,ie),J-=U;J>0;)Z.addPage(),je=-(ie-J),Z.addImage(L,"PNG",0,je,Ge,ie),J-=U;Z.save(`Entregas_Dulces_${e}_a_${n}.pdf`)}return o.jsxs("div",{className:"p-3 md:p-6 max-w-7xl mx-auto space-y-3 md:space-y-4",children:[o.jsxs("div",{className:"flex flex-col md:flex-row md:items-center md:justify-between gap-3",children:[o.jsxs("div",{children:[o.jsx("h1",{className:"text-lg md:text-2xl font-black text-gray-900",children:"Control Contable - Entregas de Vendedores (Dulces)"}),o.jsxs("p",{className:"text-xs md:text-sm text-gray-600",children:["Periodo: ",o.jsx("span",{className:"font-bold",children:e})," "," ",o.jsx("span",{className:"font-bold",children:n})]})]}),o.jsx("button",{onClick:W,className:"h-10 px-4 rounded-xl bg-gray-900 text-white font-extrabold hover:bg-gray-800 active:scale-[0.99] transition",children:"Exportar a PDF"})]}),o.jsxs("div",{className:"bg-white border border-gray-100 rounded-2xl shadow-sm p-3 md:p-4",children:[o.jsx("div",{className:"font-black text-sm text-gray-900 mb-3",children:"Filtros de periodo"}),o.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-3",children:[o.jsxs("label",{className:"space-y-1",children:[o.jsx("span",{className:"text-xs font-bold text-gray-600",children:"Desde"}),o.jsx("input",{type:"date",value:e,onChange:D=>r(D.target.value),className:"w-full h-10 rounded-xl border border-gray-200 px-3 outline-none focus:ring-2 focus:ring-gray-900/10"})]}),o.jsxs("label",{className:"space-y-1",children:[o.jsx("span",{className:"text-xs font-bold text-gray-600",children:"Hasta"}),o.jsx("input",{type:"date",value:n,onChange:D=>a(D.target.value),className:"w-full h-10 rounded-xl border border-gray-200 px-3 outline-none focus:ring-2 focus:ring-gray-900/10"})]})]})]}),o.jsxs("div",{ref:k,className:"space-y-3 md:space-y-4",children:[o.jsxs("div",{className:"bg-white border border-gray-100 rounded-2xl shadow-sm p-3 md:p-4",children:[o.jsx("div",{className:"font-black text-sm text-gray-900 mb-3",children:"KPIs Consolidados"}),o.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-3",children:[o.jsxs("div",{className:"rounded-2xl border border-gray-100 bg-gray-50 p-3",children:[o.jsx("div",{className:"text-xs font-extrabold text-gray-600",children:"KPI Entradas (Neto)"}),o.jsxs("div",{className:"text-xl font-black text-gray-900 mt-1",children:["$ ",ti(me.totalFinal)]}),o.jsx("div",{className:"text-[11px] text-gray-500 mt-1",children:"Entregado - Comisin - Gastos"})]}),o.jsxs("div",{className:"rounded-2xl border border-gray-100 bg-gray-50 p-3",children:[o.jsx("div",{className:"text-xs font-extrabold text-gray-600",children:"KPI Comisiones"}),o.jsxs("div",{className:"text-xl font-black text-gray-900 mt-1",children:["$ ",ti(me.commission)]}),o.jsx("div",{className:"text-[11px] text-gray-500 mt-1",children:"Suma de comisin pagada"})]}),o.jsxs("div",{className:"rounded-2xl border border-gray-100 bg-gray-50 p-3",children:[o.jsx("div",{className:"text-xs font-extrabold text-gray-600",children:"KPI Gastos extras"}),o.jsxs("div",{className:"text-xl font-black text-gray-900 mt-1",children:["$ ",ti(me.expenses)]}),o.jsx("div",{className:"text-[11px] text-gray-500 mt-1",children:"Suma de gastos registrados"})]}),o.jsxs("div",{className:"rounded-2xl border border-gray-100 bg-gray-50 p-3",children:[o.jsx("div",{className:"text-xs font-extrabold text-gray-600",children:"Total entregado (Bruto)"}),o.jsxs("div",{className:"text-xl font-black text-gray-900 mt-1",children:["$ ",ti(me.delivered)]}),o.jsx("div",{className:"text-[11px] text-gray-500 mt-1",children:"Sin restar nada"})]})]}),o.jsx("div",{className:"font-black text-sm text-gray-900 mt-4 mb-2",children:"KPI Vendedores (sumatoria del periodo)"}),o.jsx("div",{className:"overflow-x-auto",children:o.jsxs("table",{className:"min-w-[520px] w-full text-sm",children:[o.jsx("thead",{children:o.jsxs("tr",{className:"bg-gray-50 text-gray-700",children:[o.jsx("th",{className:"text-left p-2 font-black",children:"Vendedor"}),o.jsx("th",{className:"text-right p-2 font-black",children:"Entregado"}),o.jsx("th",{className:"text-right p-2 font-black",children:"Comisin"}),o.jsx("th",{className:"text-right p-2 font-black",children:"Total final"})]})}),o.jsx("tbody",{children:fe.length===0?o.jsx("tr",{children:o.jsx("td",{className:"p-2 text-gray-500",colSpan:4,children:"Sin datos en el periodo seleccionado."})}):fe.map(D=>o.jsxs("tr",{className:"border-t",children:[o.jsx("td",{className:"p-2",children:D.sellerName}),o.jsxs("td",{className:"p-2 text-right",children:["$ ",ti(D.delivered)]}),o.jsxs("td",{className:"p-2 text-right",children:["$ ",ti(D.commission)]}),o.jsxs("td",{className:"p-2 text-right font-extrabold",children:["$ ",ti(D.totalFinal)]})]},D.sellerId||D.sellerName))})]})})]}),o.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-3",children:[o.jsxs("div",{className:"bg-white border border-gray-100 rounded-2xl shadow-sm p-3 md:p-4",children:[o.jsx("div",{className:"font-black text-sm text-gray-900 mb-3",children:"Entregas y Comisin por vendedor (Barras)"}),o.jsx("div",{className:"w-full h-[320px]",children:o.jsx(L$,{children:o.jsxs(brt,{data:ne,children:[o.jsx($le,{dataKey:"name",interval:0,angle:-12,height:70}),o.jsx(Kle,{}),o.jsx(RG,{}),o.jsx(Vk,{}),o.jsx(AF,{dataKey:"Entregado"}),o.jsx(AF,{dataKey:"Comision"})]})})})]}),o.jsxs("div",{className:"bg-white border border-gray-100 rounded-2xl shadow-sm p-3 md:p-4",children:[o.jsx("div",{className:"font-black text-sm text-gray-900 mb-3",children:"Distribucin (Pastel)"}),o.jsx("div",{className:"w-full h-[320px]",children:o.jsx(L$,{children:o.jsxs(krt,{children:[o.jsx(Ble,{data:Pe,dataKey:"value",nameKey:"name",outerRadius:110,label:!0,children:Pe.map((D,L)=>o.jsx(Dw,{fill:Ie[L%Ie.length]},L))}),o.jsx(RG,{}),o.jsx(Vk,{})]})})})]})]}),o.jsxs("div",{className:"bg-white border border-gray-100 rounded-2xl shadow-sm p-3 md:p-4",children:[o.jsx("div",{className:"font-black text-sm text-gray-900 mb-3",children:"Agregar movimiento"}),o.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-3",children:[o.jsxs("label",{className:"space-y-1",children:[o.jsx("span",{className:"text-xs font-bold text-gray-600",children:"Fecha"}),o.jsx("input",{type:"date",value:h,onChange:D=>A(D.target.value),className:"w-full h-10 rounded-xl border border-gray-200 px-3 outline-none focus:ring-2 focus:ring-gray-900/10"})]}),o.jsxs("label",{className:"space-y-1",children:[o.jsx("span",{className:"text-xs font-bold text-gray-600",children:"Vendedor"}),o.jsxs("select",{value:m,onChange:D=>p(D.target.value),className:"w-full h-10 rounded-xl border border-gray-200 px-3 outline-none focus:ring-2 focus:ring-gray-900/10 bg-white",children:[o.jsx("option",{value:"",children:"Seleccionar..."}),s.map(D=>o.jsxs("option",{value:D.id,children:[D.name," ",D.branch?`(${D.branch})`:""]},D.id))]})]}),o.jsxs("label",{className:"space-y-1",children:[o.jsx("span",{className:"text-xs font-bold text-gray-600",children:"Monto entregado"}),o.jsx("input",{type:"number",inputMode:"decimal",value:g,onChange:D=>x(D.target.value),placeholder:"0.00",className:"w-full h-10 rounded-xl border border-gray-200 px-3 outline-none focus:ring-2 focus:ring-gray-900/10"})]}),o.jsxs("label",{className:"space-y-1",children:[o.jsx("span",{className:"text-xs font-bold text-gray-600",children:"Comisin configurada"}),o.jsx("input",{value:`${T}%`,readOnly:!0,className:"w-full h-10 rounded-xl border border-gray-200 px-3 bg-gray-50 text-gray-800"})]}),o.jsxs("label",{className:"space-y-1",children:[o.jsx("span",{className:"text-xs font-bold text-gray-600",children:"Comisin pagada"}),o.jsx("input",{value:`$ ${ti(he)}`,readOnly:!0,className:"w-full h-10 rounded-xl border border-gray-200 px-3 bg-gray-50 text-gray-800"})]}),o.jsxs("label",{className:"space-y-1",children:[o.jsx("span",{className:"text-xs font-bold text-gray-600",children:"Gastos extras"}),o.jsx("input",{type:"number",inputMode:"decimal",value:y,onChange:D=>b(D.target.value),placeholder:"0.00",className:"w-full h-10 rounded-xl border border-gray-200 px-3 outline-none focus:ring-2 focus:ring-gray-900/10"})]}),o.jsxs("label",{className:"space-y-1",children:[o.jsx("span",{className:"text-xs font-bold text-gray-600",children:"Total final"}),o.jsx("input",{value:`$ ${ti(ue)}`,readOnly:!0,className:"w-full h-10 rounded-xl border border-gray-200 px-3 bg-gray-50 text-gray-900 font-extrabold"})]}),o.jsxs("label",{className:"space-y-1 md:col-span-2",children:[o.jsx("span",{className:"text-xs font-bold text-gray-600",children:"Comentario"}),o.jsx("input",{value:w,onChange:D=>j(D.target.value),placeholder:"Opcional...",className:"w-full h-10 rounded-xl border border-gray-200 px-3 outline-none focus:ring-2 focus:ring-gray-900/10"})]})]}),o.jsx("div",{className:"mt-3",children:o.jsx("button",{onClick:O,className:"w-full md:w-auto h-10 px-4 rounded-xl bg-gray-900 text-white font-extrabold hover:bg-gray-800 active:scale-[0.99] transition",children:"Guardar movimiento"})})]}),o.jsxs("div",{className:"bg-white border border-gray-100 rounded-2xl shadow-sm p-3 md:p-4",children:[o.jsx("div",{className:"font-black text-sm text-gray-900 mb-3",children:"Registro detallado"}),d?o.jsx("div",{className:"text-sm text-gray-500",children:"Cargando..."}):c.length===0?o.jsx("div",{className:"text-sm text-gray-500",children:"No hay registros en el periodo."}):o.jsxs(o.Fragment,{children:[o.jsx("div",{className:"hidden md:block overflow-x-auto",children:o.jsxs("table",{className:"min-w-[1100px] w-full text-sm",children:[o.jsx("thead",{children:o.jsxs("tr",{className:"bg-gray-50 text-gray-700",children:[o.jsx("th",{className:"text-left p-2 font-black",children:"Fecha"}),o.jsx("th",{className:"text-left p-2 font-black",children:"Vendedor"}),o.jsx("th",{className:"text-right p-2 font-black",children:"Monto entregado"}),o.jsx("th",{className:"text-right p-2 font-black",children:"Comisin %"}),o.jsx("th",{className:"text-right p-2 font-black",children:"Comisin pagada"}),o.jsx("th",{className:"text-right p-2 font-black",children:"Gastos"}),o.jsx("th",{className:"text-right p-2 font-black",children:"Total final"}),o.jsx("th",{className:"text-left p-2 font-black",children:"Comentario"}),o.jsx("th",{className:"text-left p-2 font-black",children:"Acciones"})]})}),o.jsx("tbody",{children:c.map(D=>{if(!(I===D.id))return o.jsxs("tr",{className:"border-t",children:[o.jsx("td",{className:"p-2",children:Sr(D.date.toDate(),"yyyy-MM-dd")}),o.jsx("td",{className:"p-2 font-semibold",children:D.sellerName}),o.jsxs("td",{className:"p-2 text-right",children:["$ ",ti(D.amountDelivered)]}),o.jsxs("td",{className:"p-2 text-right",children:[ti(D.commissionPercent),"%"]}),o.jsxs("td",{className:"p-2 text-right",children:["$ ",ti(D.commissionPaid)]}),o.jsxs("td",{className:"p-2 text-right",children:["$ ",ti(D.extraExpenses)]}),o.jsxs("td",{className:"p-2 text-right font-extrabold",children:["$ ",ti(D.totalFinal)]}),o.jsx("td",{className:"p-2",children:D.comment}),o.jsx("td",{className:"p-2",children:o.jsxs("div",{className:"flex gap-2",children:[o.jsx("button",{onClick:()=>H(D),className:"h-8 px-3 rounded-xl border border-gray-200 font-extrabold hover:bg-gray-50",children:"Editar"}),o.jsx("button",{onClick:()=>K(D.id),className:"h-8 px-3 rounded-xl border border-gray-200 font-extrabold text-red-700 hover:bg-red-50",children:"Eliminar"})]})})]},D.id);const Z=ia(E.amountDelivered??D.amountDelivered),ge=ia(E.commissionPercent??D.commissionPercent),U=ia(E.extraExpenses??D.extraExpenses),Ge=t_(Z,ge),ie=r_(Z,Ge,U);return o.jsxs("tr",{className:"border-t bg-yellow-50/40",children:[o.jsx("td",{className:"p-2",children:o.jsx("input",{type:"date",value:String(E.dateInput??""),onChange:J=>S(je=>({...je,dateInput:J.target.value})),className:"h-9 px-3 rounded-xl border border-gray-200 bg-white outline-none"})}),o.jsx("td",{className:"p-2",children:o.jsxs("select",{value:String(E.sellerId??D.sellerId),onChange:J=>{const je=J.target.value,z=l.get(je);S(Ae=>({...Ae,sellerId:je,sellerName:(z==null?void 0:z.name)??"",commissionPercent:ia((z==null?void 0:z.commissionPercent)??0)}))},className:"h-9 px-3 rounded-xl border border-gray-200 bg-white outline-none",children:[o.jsx("option",{value:"",children:"Seleccionar..."}),s.map(J=>o.jsxs("option",{value:J.id,children:[J.name," ",J.branch?`(${J.branch})`:""]},J.id))]})}),o.jsx("td",{className:"p-2 text-right",children:o.jsx("input",{type:"number",value:String(Z),onChange:J=>S(je=>({...je,amountDelivered:ia(J.target.value)})),className:"h-9 w-32 text-right px-3 rounded-xl border border-gray-200 bg-white outline-none"})}),o.jsx("td",{className:"p-2 text-right",children:o.jsx("input",{type:"number",value:String(ge),onChange:J=>S(je=>({...je,commissionPercent:ia(J.target.value)})),className:"h-9 w-24 text-right px-3 rounded-xl border border-gray-200 bg-white outline-none"})}),o.jsxs("td",{className:"p-2 text-right font-semibold",children:["$ ",ti(Ge)]}),o.jsx("td",{className:"p-2 text-right",children:o.jsx("input",{type:"number",value:String(U),onChange:J=>S(je=>({...je,extraExpenses:ia(J.target.value)})),className:"h-9 w-32 text-right px-3 rounded-xl border border-gray-200 bg-white outline-none"})}),o.jsxs("td",{className:"p-2 text-right font-extrabold",children:["$ ",ti(ie)]}),o.jsx("td",{className:"p-2",children:o.jsx("input",{type:"text",value:String(E.comment??D.comment),onChange:J=>S(je=>({...je,comment:J.target.value})),className:"h-9 w-full px-3 rounded-xl border border-gray-200 bg-white outline-none"})}),o.jsx("td",{className:"p-2",children:o.jsxs("div",{className:"flex gap-2",children:[o.jsx("button",{onClick:()=>M(D.id),className:"h-8 px-3 rounded-xl bg-gray-900 text-white font-extrabold hover:bg-gray-800",children:"Guardar"}),o.jsx("button",{onClick:R,className:"h-8 px-3 rounded-xl border border-gray-200 font-extrabold hover:bg-gray-50",children:"Cancelar"})]})})]},D.id)})})]})}),o.jsxs("div",{className:"md:hidden space-y-3",children:[c.map(D=>o.jsxs("div",{className:"rounded-2xl border border-gray-100 p-3 bg-white",children:[o.jsxs("div",{className:"flex items-start justify-between gap-2",children:[o.jsx("div",{className:"font-black text-gray-900",children:D.sellerName}),o.jsx("div",{className:"text-xs font-extrabold bg-gray-100 rounded-full px-3 py-1",children:Sr(D.date.toDate(),"yyyy-MM-dd")})]}),o.jsxs("div",{className:"mt-3 grid grid-cols-2 gap-2 text-sm",children:[o.jsxs("div",{children:[o.jsx("div",{className:"text-[11px] font-bold text-gray-500",children:"Monto entregado"}),o.jsxs("div",{className:"font-extrabold",children:["$ ",ti(D.amountDelivered)]})]}),o.jsxs("div",{children:[o.jsx("div",{className:"text-[11px] font-bold text-gray-500",children:"Comisin %"}),o.jsxs("div",{className:"font-semibold",children:[ti(D.commissionPercent),"%"]})]}),o.jsxs("div",{children:[o.jsx("div",{className:"text-[11px] font-bold text-gray-500",children:"Comisin pagada"}),o.jsxs("div",{className:"font-semibold",children:["$ ",ti(D.commissionPaid)]})]}),o.jsxs("div",{children:[o.jsx("div",{className:"text-[11px] font-bold text-gray-500",children:"Gastos"}),o.jsxs("div",{className:"font-semibold",children:["$ ",ti(D.extraExpenses)]})]}),o.jsxs("div",{className:"col-span-2",children:[o.jsx("div",{className:"text-[11px] font-bold text-gray-500",children:"Total final"}),o.jsxs("div",{className:"text-base font-black",children:["$ ",ti(D.totalFinal)]})]}),D.comment?o.jsxs("div",{className:"col-span-2",children:[o.jsx("div",{className:"text-[11px] font-bold text-gray-500",children:"Comentario"}),o.jsx("div",{className:"text-sm text-gray-800",children:D.comment})]}):null]}),o.jsxs("div",{className:"mt-3 flex gap-2",children:[o.jsx("button",{onClick:()=>H(D),className:"flex-1 h-10 rounded-xl border border-gray-200 font-extrabold hover:bg-gray-50",children:"Editar"}),o.jsx("button",{onClick:()=>K(D.id),className:"flex-1 h-10 rounded-xl border border-gray-200 font-extrabold text-red-700 hover:bg-red-50",children:"Eliminar"})]})]},D.id)),I?o.jsxs("div",{className:"rounded-2xl border border-yellow-200 bg-yellow-50 p-3",children:[o.jsx("div",{className:"font-black text-gray-900 mb-3",children:"Editando registro"}),o.jsxs("div",{className:"grid grid-cols-1 gap-3",children:[o.jsxs("label",{className:"space-y-1",children:[o.jsx("span",{className:"text-xs font-bold text-gray-600",children:"Fecha"}),o.jsx("input",{type:"date",value:String(E.dateInput??""),onChange:D=>S(L=>({...L,dateInput:D.target.value})),className:"w-full h-10 rounded-xl border border-gray-200 px-3 outline-none bg-white"})]}),o.jsxs("label",{className:"space-y-1",children:[o.jsx("span",{className:"text-xs font-bold text-gray-600",children:"Vendedor"}),o.jsxs("select",{value:String(E.sellerId??""),onChange:D=>{const L=D.target.value,Z=l.get(L);S(ge=>({...ge,sellerId:L,sellerName:(Z==null?void 0:Z.name)??"",commissionPercent:ia((Z==null?void 0:Z.commissionPercent)??0)}))},className:"w-full h-10 rounded-xl border border-gray-200 px-3 outline-none bg-white",children:[o.jsx("option",{value:"",children:"Seleccionar..."}),s.map(D=>o.jsxs("option",{value:D.id,children:[D.name," ",D.branch?`(${D.branch})`:""]},D.id))]})]}),o.jsxs("label",{className:"space-y-1",children:[o.jsx("span",{className:"text-xs font-bold text-gray-600",children:"Monto entregado"}),o.jsx("input",{type:"number",value:String(E.amountDelivered??""),onChange:D=>S(L=>({...L,amountDelivered:ia(D.target.value)})),className:"w-full h-10 rounded-xl border border-gray-200 px-3 outline-none bg-white"})]}),o.jsxs("label",{className:"space-y-1",children:[o.jsx("span",{className:"text-xs font-bold text-gray-600",children:"Gastos extras"}),o.jsx("input",{type:"number",value:String(E.extraExpenses??""),onChange:D=>S(L=>({...L,extraExpenses:ia(D.target.value)})),className:"w-full h-10 rounded-xl border border-gray-200 px-3 outline-none bg-white"})]}),o.jsxs("label",{className:"space-y-1",children:[o.jsx("span",{className:"text-xs font-bold text-gray-600",children:"Comisin %"}),o.jsx("input",{type:"number",value:String(E.commissionPercent??""),onChange:D=>S(L=>({...L,commissionPercent:ia(D.target.value)})),className:"w-full h-10 rounded-xl border border-gray-200 px-3 outline-none bg-white"})]}),o.jsxs("label",{className:"space-y-1",children:[o.jsx("span",{className:"text-xs font-bold text-gray-600",children:"Comentario"}),o.jsx("input",{type:"text",value:String(E.comment??""),onChange:D=>S(L=>({...L,comment:D.target.value})),className:"w-full h-10 rounded-xl border border-gray-200 px-3 outline-none bg-white"})]}),o.jsxs("div",{className:"flex gap-2",children:[o.jsx("button",{onClick:()=>M(I),className:"flex-1 h-10 rounded-xl bg-gray-900 text-white font-extrabold hover:bg-gray-800",children:"Guardar"}),o.jsx("button",{onClick:R,className:"flex-1 h-10 rounded-xl border border-gray-200 font-extrabold hover:bg-gray-50",children:"Cancelar"})]})]})]}):null]})]})]})]})]})}const _m=t=>`C$ ${(Number(t)||0).toFixed(2)}`;function Drt(t){return String(t??"").trim().replace(/\s+/g," ").toLowerCase()}function Oq(t,e=0){const r=Number(String(t??"").replace(",","."));return Number.isFinite(r)?r:e}function Rrt(t){const e=String(t||"").trim();if(!e)return 0;const r=Date.parse(e);return Number.isFinite(r)?r:0}function Mrt({open:t,onClose:e,onDetected:r}){const n=v.useRef(null),a=v.useRef(null),[s,i]=v.useState(""),l=v.useRef("");return v.useEffect(()=>{if(!t)return;let c=!1;const u=new Zb,d=()=>{var h,A,m;try{(h=a.current)==null||h.stop()}catch{}a.current=null;try{const p=(A=n.current)==null?void 0:A.srcObject;(m=p==null?void 0:p.getTracks)==null||m.call(p).forEach(g=>g.stop())}catch{}try{n.current&&(n.current.srcObject=null)}catch{}};return(async()=>{i("");try{if(!n.current)return;try{(await navigator.mediaDevices.getUserMedia({video:{facingMode:{ideal:"environment"}},audio:!1})).getTracks().forEach(m=>m.stop())}catch{}const h=await u.decodeFromConstraints({video:{facingMode:{ideal:"environment"},width:{ideal:1280},height:{ideal:720}},audio:!1},n.current,A=>{if(!c&&A){const m=String(A.getText()||"").trim().replace(/\s+/g,"");if(!m||m===l.current)return;l.current=m,d(),r(m),e()}});a.current=h}catch(h){const A=String((h==null?void 0:h.message)||""),m=String((h==null?void 0:h.name)||"");A.toLowerCase().includes("permission")||m==="NotAllowedError"?i("Permiso de cmara denegado."):m==="NotFoundError"||A.toLowerCase().includes("notfound")?i("No se encontr cmara en este dispositivo."):A.toLowerCase().includes("secure")||A.toLowerCase().includes("https")?i("La cmara requiere HTTPS (sitio seguro)."):i(A||"No se pudo iniciar el escner.")}})(),()=>{c=!0,d()}},[t,e,r]),t?o.jsx("div",{className:"fixed inset-0 bg-black/70 z-50 p-3 flex items-center justify-center",children:o.jsxs("div",{className:"bg-white w-full max-w-md rounded-2xl shadow-lg border overflow-hidden",children:[o.jsxs("div",{className:"flex items-center justify-between p-3 border-b",children:[o.jsx("div",{className:"font-bold",children:"Escanear cdigo"}),o.jsx("button",{className:"px-3 py-1 rounded bg-gray-200 hover:bg-gray-300",onClick:e,type:"button",children:"Cerrar"})]}),o.jsxs("div",{className:"p-3",children:[o.jsxs("div",{className:"relative w-full aspect-[3/4] bg-black rounded-xl overflow-hidden",children:[o.jsx("video",{ref:n,className:"w-full h-full object-cover",muted:!0,playsInline:!0,autoPlay:!0}),o.jsx("div",{className:"absolute inset-0 pointer-events-none",children:o.jsx("div",{className:"absolute left-1/2 top-1/2 -translate-x-1/2 -translate-y-1/2 w-[85%] h-40 border-2 border-white/70 rounded-xl"})})]}),s&&o.jsx("div",{className:"mt-3 text-sm text-red-600 bg-red-50 border border-red-200 rounded p-2",children:s}),o.jsx("div",{className:"mt-2 text-xs text-gray-600",children:"Apunt al cdigo de barras y mantenelo estable."})]})]})}):null}function Lrt(){const{refreshKey:t,refresh:e}=xc(),[r,n]=v.useState(!0),[a,s]=v.useState(""),[i,l]=v.useState([]),[c,u]=v.useState(""),[d,f]=v.useState(""),[h,A]=v.useState(""),[m,p]=v.useState(""),[g,x]=v.useState("ANY"),[y,b]=v.useState(!1);v.useEffect(()=>{(async()=>{n(!0),s("");try{const ce=await Ot(nr(ht(ke,"candy_main_orders"))),oe=new Map;ce.forEach(Le=>{var gt,Ct,jt;const ve=Le.data(),le=Rrt(ve.date),Ue=((Ct=(gt=ve==null?void 0:ve.createdAt)==null?void 0:gt.toMillis)==null?void 0:Ct.call(gt))||((jt=ve==null?void 0:ve.createdAt)!=null&&jt.seconds?ve.createdAt.seconds*1e3:0)||0,rt=Math.max(le,Ue),mt=Array.isArray(ve.items)?ve.items:[];for(const xe of mt){const He=String((xe==null?void 0:xe.id)||(xe==null?void 0:xe.productId)||"").trim();if(!He)continue;const Ce=String((xe==null?void 0:xe.name)||(xe==null?void 0:xe.productName)||"").trim(),lt=String((xe==null?void 0:xe.category)||"").trim(),nt=Number((xe==null?void 0:xe.unitPriceIsla)||0),Xe=Number((xe==null?void 0:xe.unitPriceRivas)||0),It=Number((xe==null?void 0:xe.unitsPerPackage)||(xe==null?void 0:xe.unitsPerPack)||1),$t=oe.get(He);(!$t||rt>=$t._sortKey)&&oe.set(He,{productId:He,category:lt,productName:Ce,priceIsla:nt,priceRivas:Xe,unitsPerPackage:It,_sortKey:rt})}});const Me=Array.from(oe.values()).sort((Le,ve)=>Le.productName.localeCompare(ve.productName,"es"));l(Me)}catch(ce){console.error(ce),s(" Error cargando precios desde rdenes maestras."),l([])}finally{n(!1)}})()},[t]),v.useEffect(()=>{const ce=ht(ke,"products_candies"),oe=nr(ce),Me=Fd(oe,Le=>{const ve={},le={},Ue={},rt={};Le.forEach(mt=>{const gt=mt.data();ve[mt.id]=Number((gt==null?void 0:gt.providerPrice)||(gt==null?void 0:gt.providerPricePerUnit)||0),Ue[mt.id]=Number((gt==null?void 0:gt.unitsPerPackage)||(gt==null?void 0:gt.unitsPerPack)||1)||1;const Ct=String((gt==null?void 0:gt.barcode)||"").trim();Ct&&(le[mt.id]=Ct);const jt=String((gt==null?void 0:gt.packaging)||(gt==null?void 0:gt.empaque)||"").trim();jt&&(rt[mt.id]=jt)});try{const mt=I.current||{};let gt=!1;for(const He of Object.keys(le))if((le[He]||"")!==(mt[He]||"")){gt=!0;break}const Ct=E.current||{};let jt=!1;for(const He of Object.keys(Ue))if((Ue[He]||0)!==(Ct[He]||0)){jt=!0;break}T(ve),Y(Ue);const xe={...le,...mt};j(xe),I.current=xe,E.current={...Ue},me(rt),l(He=>He.map(Ce=>({...Ce,unitsPerPackage:Ue[Ce.productId]??Ce.unitsPerPackage}))),!_.current&&gt&&(s(" Cdigo actualizado."),setTimeout(()=>s(""),3e3)),!_.current&&jt&&(s(" Unidades x paquete actualizadas."),setTimeout(()=>s(""),3e3)),_.current=!1}catch{T(ve),Y(Ue),j(gt=>({...le,...gt})),E.current={...Ue},me(rt),l(gt=>gt.map(Ct=>({...Ct,unitsPerPackage:Ue[Ct.productId]??Ct.unitsPerPackage})))}},Le=>console.error(Le));return()=>Me()},[]);const[w,j]=v.useState({}),I=v.useRef({}),_=v.useRef(!0),E=v.useRef({}),S=v.useRef({}),k=v.useRef(!0),[P,T]=v.useState({}),[F,Y]=v.useState({}),[he,ue]=v.useState({}),[fe,me]=v.useState({}),[ne,Pe]=v.useState("");v.useEffect(()=>{const ce=ht(ke,"inventory_candies"),oe=nr(ce),Me=Fd(oe,Le=>{try{const ve={};Le.forEach(Ue=>{var xe,He,Ce;const rt=Ue.data(),mt=String(rt.productId||"").trim();if(!mt)return;const gt=Number(rt.unitsPerPackage||rt.unitsPerPack||0)||0,Ct=((He=(xe=rt==null?void 0:rt.createdAt)==null?void 0:xe.toMillis)==null?void 0:He.call(xe))||((Ce=rt==null?void 0:rt.createdAt)!=null&&Ce.seconds?rt.createdAt.seconds*1e3:0)||0,jt=ve[mt];(!jt||Ct>=jt.ts)&&(ve[mt]={val:gt||0,ts:Ct})});const le={};for(const Ue of Object.keys(ve))le[Ue]=ve[Ue].val||0;ue(le);try{const Ue=S.current||{};let rt=!1;for(const mt of Object.keys(le))if((le[mt]||0)!==(Ue[mt]||0)){rt=!0;break}S.current={...le},!k.current&&rt&&(s(" Inventario: unidades por paquete actualizadas."),setTimeout(()=>s(""),3e3)),k.current=!1}catch{}l(Ue=>Ue.map(rt=>({...rt,unitsPerPackage:le[rt.productId]??F[rt.productId]??rt.unitsPerPackage})))}catch(ve){console.error("inventory_candies snapshot error:",ve)}},Le=>console.error(Le));return()=>Me()},[F]),v.useEffect(()=>{l(ce=>ce.map(oe=>({...oe,unitsPerPackage:he[oe.productId]??F[oe.productId]??oe.unitsPerPackage})))},[F,he]);const Ie=v.useMemo(()=>{const ce=Drt(c),oe=String(d||"").trim(),Me=String(ne||"").trim().toLowerCase(),Le=h.trim()===""?null:Oq(h,NaN),ve=m.trim()===""?null:Oq(m,NaN);return i.filter(le=>{const Ue=String(fe[le.productId]||"").trim().toLowerCase();if(Me)return Ue===Me;if(ce&&!`${le.category} ${le.productName}`.toLowerCase().includes(ce))return!1;if(oe){const Ct=String(le.productId||""),jt=String(w[le.productId]||"");if(!Ct.includes(oe)&&!jt.includes(oe))return!1}const rt=g==="ISLA"?[le.priceIsla]:g==="RIVAS"?[le.priceRivas]:[le.priceIsla,le.priceRivas],mt=Le==null||!Number.isFinite(Le)?!0:rt.some(Ct=>Ct>=Le),gt=ve==null||!Number.isFinite(ve)?!0:rt.some(Ct=>Ct<=ve);return mt&&gt})},[i,c,h,m,g,w,ne,fe]),O=()=>{u(""),A(""),p(""),x("ANY"),Pe("")},[H,R]=v.useState(!1),[M,K]=v.useState("search"),[W,D]=v.useState(null),[L,Z]=v.useState(0),[ge,U]=v.useState(0),[Ge,ie]=v.useState(null),[J,je]=v.useState(""),[z,Ae]=v.useState(""),ye=v.useMemo(()=>c.trim()!==""||h.trim()!==""||m.trim()!==""||g!=="ANY"||ne.trim()!=="",[c,h,m,g,ne]),[Qe,st]=v.useState(!1);v.useEffect(()=>{var Me;const ce=window.matchMedia("(max-width: 900px)"),oe=()=>st(ce.matches);return oe(),(Me=ce.addEventListener)==null||Me.call(ce,"change",oe),()=>{var Le;return(Le=ce.removeEventListener)==null?void 0:Le.call(ce,"change",oe)}},[]);const[ut,De]=v.useState(!1);v.useEffect(()=>{const ce=TO(Cf,async oe=>{if(!oe)return De(!1);try{const Me=await ui(qt(ke,"users",oe.uid)),Le=Me.exists()?Me.data():null,ve=Le?Array.isArray(Le.roles)?Le.roles:Le.role?[Le.role]:[]:[];De(Yr(ve,"admin"))}catch(Me){console.error(Me),De(!1)}});return()=>ce()},[]);const it=async ce=>{var oe;if(M==="search"){f(ce);const Me=Object.keys(w).find(le=>(w[le]||"")===ce),Le=(oe=i.find(le=>String(le.productId||"").includes(ce)))==null?void 0:oe.productId,ve=Me||Le||null;ve&&(ie(ve),b(!1)),R(!1);return}if(M==="edit"&&W)try{const Me=ht(ke,"products_candies"),Le=qt(Me,W);await nn(Le,{barcode:ce}),j(ve=>({...ve,[W]:ce})),je(ce),R(!1),K("search"),s(" Producto guardado.")}catch(Me){console.error(Me),s(" Error guardando el cdigo.")}},dt=async ce=>{l(oe=>oe.map(Me=>Me.productId===ce?{...Me,priceIsla:Number(L||0),priceRivas:Number(ge||0)}:Me));try{const oe=String(z||"").trim();await nn(qt(ht(ke,"products_candies"),ce),{packaging:oe||""}),me(Me=>({...Me,[ce]:oe||""}))}catch(oe){console.error("Error updating packaging:",oe),s(" Error guardando empaque.")}D(null),s(Qe?" Producto guardado.":"")};return o.jsxs("div",{className:"max-w-7xl mx-auto",children:[o.jsxs("div",{className:"flex items-center justify-between mb-3",children:[o.jsx("h2",{className:"text-2xl font-bold",children:"Precio Ventas"}),o.jsx("div",{className:"flex gap-2",children:o.jsx(gc,{onClick:e,loading:r})})]}),o.jsxs("div",{className:"md:hidden mb-3",children:[o.jsxs("button",{type:"button",onClick:()=>b(ce=>!ce),className:`w-full px-3 py-3 rounded-xl border shadow-sm flex items-center justify-between ${ye?"bg-yellow-50 border-yellow-200":"bg-white"}`,children:[o.jsxs("div",{className:"text-left",children:[o.jsx("div",{className:"font-semibold",children:"Filtros"}),o.jsxs("div",{className:"text-xs text-gray-600",children:[ye?"Activos":"Ninguno","  ","Mostrando ",o.jsx("b",{children:Ie.length})]})]}),o.jsx("div",{className:"text-sm font-semibold",children:y?"Cerrar":"Abrir"})]}),y&&o.jsx("div",{className:"mt-2 bg-white border rounded-xl shadow-sm p-3 text-sm",children:o.jsxs("div",{className:"grid grid-cols-1 gap-3",children:[o.jsxs("div",{children:[o.jsx("label",{className:"block font-semibold",children:"Producto"}),o.jsx("input",{className:"w-full border rounded px-2 py-2",value:c,onChange:ce=>u(ce.target.value),placeholder:"Ej: Conitos, Gomitas"})]}),o.jsxs("div",{children:[o.jsx("label",{className:"block font-semibold",children:"Tipo empaque"}),o.jsxs("select",{className:"w-full border rounded px-2 py-2",value:ne,onChange:ce=>Pe(ce.target.value),children:[o.jsx("option",{value:"",children:"Todos"}),o.jsx("option",{value:"Tarro",children:"Tarro"}),o.jsx("option",{value:"Bolsa",children:"Bolsa"}),o.jsx("option",{value:"Ristra",children:"Ristra"}),o.jsx("option",{value:"Caja",children:"Caja"}),o.jsx("option",{value:"Vaso",children:"Vaso"}),o.jsx("option",{value:"Pana",children:"Pana"})]})]}),o.jsxs("div",{children:[o.jsx("label",{className:"block font-semibold",children:"Buscar por EAN"}),o.jsxs("div",{className:"flex gap-2",children:[o.jsx("input",{className:"flex-1 border rounded px-2 py-2",value:d,onChange:ce=>f(ce.target.value),placeholder:"Cdigo EAN"}),o.jsx("button",{type:"button",className:"px-3 py-2 rounded bg-gray-200 hover:bg-gray-300",onClick:()=>{K("search"),R(!0)},children:"Escanear"})]})]}),o.jsxs("div",{className:"flex gap-2",children:[o.jsx("button",{type:"button",className:"flex-1 px-3 py-2 rounded bg-gray-200 hover:bg-gray-300",onClick:()=>{O(),f("")},children:"Limpiar filtros"}),o.jsx("button",{type:"button",className:"flex-1 px-3 py-2 rounded bg-indigo-600 text-white hover:bg-indigo-700",onClick:()=>b(!1),children:"Aplicar"})]})]})})]}),o.jsxs("div",{className:"hidden md:block bg-white p-3 rounded shadow border mb-3 text-sm",children:[o.jsxs("div",{className:"grid grid-cols-6 gap-3 items-end",children:[o.jsxs("div",{className:"col-span-2",children:[o.jsx("label",{className:"block font-semibold",children:"Filtrar por producto"}),o.jsx("input",{className:"w-full border rounded px-2 py-1",value:c,onChange:ce=>u(ce.target.value),placeholder:"Ej: Conitos, Gomitas"})]}),o.jsxs("div",{children:[o.jsx("label",{className:"block font-semibold",children:"Tipo empaque"}),o.jsxs("select",{className:"w-full border rounded px-2 py-1",value:ne,onChange:ce=>Pe(ce.target.value),children:[o.jsx("option",{value:"",children:"Todos"}),o.jsx("option",{value:"Tarro",children:"Tarro"}),o.jsx("option",{value:"Bolsa",children:"Bolsa"}),o.jsx("option",{value:"Ristra",children:"Ristra"}),o.jsx("option",{value:"Caja",children:"Caja"}),o.jsx("option",{value:"Vaso",children:"Vaso"}),o.jsx("option",{value:"Pana",children:"Pana"})]})]}),o.jsxs("div",{children:[o.jsx("label",{className:"block font-semibold",children:"Precio mn"}),o.jsx("input",{className:"w-full border rounded px-2 py-1 text-right",inputMode:"decimal",value:h,onChange:ce=>A(ce.target.value),placeholder:"0"})]}),o.jsxs("div",{children:[o.jsx("label",{className:"block font-semibold",children:"Precio mx"}),o.jsx("input",{className:"w-full border rounded px-2 py-1 text-right",inputMode:"decimal",value:m,onChange:ce=>p(ce.target.value),placeholder:"0"})]}),o.jsx("div",{className:"text-right",children:o.jsx("button",{className:"px-3 py-2 rounded bg-gray-200 hover:bg-gray-300",type:"button",onClick:O,children:"Limpiar"})})]}),o.jsxs("div",{className:"mt-2 flex items-center justify-between",children:[o.jsxs("div",{className:"text-xs text-gray-600",children:["Fuente: ",o.jsx("b",{children:"candy_main_orders.items[]"}),"  Muestra el"," ",o.jsx("b",{children:"ltimo precio"})," registrado por producto."]}),o.jsxs("div",{className:"text-sm",children:[o.jsx("span",{className:"text-gray-600",children:"Mostrando:"})," ",o.jsx("b",{children:Ie.length})]})]})]}),o.jsxs("div",{className:"md:hidden",children:[r?o.jsx("div",{className:"bg-white rounded-xl border shadow p-4 text-center",children:"Cargando"}):Ie.length===0?o.jsx("div",{className:"bg-white rounded-xl border shadow p-4 text-center",children:"Sin resultados."}):o.jsx("div",{className:"space-y-2",children:Ie.map(ce=>{const oe=Ge===ce.productId,Me=W===ce.productId,Le=P[ce.productId]||0,ve=ce.priceIsla-Le,le=ve*.25;return o.jsxs("div",{className:"bg-white border rounded-2xl shadow-sm overflow-hidden",children:[o.jsxs("button",{type:"button",className:"w-full px-3 py-3 flex items-center justify-between text-left",onClick:()=>ie(Ue=>Ue===ce.productId?null:ce.productId),children:[o.jsxs("div",{className:"min-w-0",children:[o.jsx("div",{className:"text-[13px] font-semibold truncate",children:ce.productName}),o.jsx("div",{className:"text-[10px] text-gray-600 truncate",children:ce.category})]}),o.jsxs("div",{className:"text-right",children:[o.jsx("div",{className:"text-[10px] text-gray-600",children:"P. Paquete"}),o.jsx("div",{className:"text-sm font-semibold tabular-nums",children:_m(ce.priceIsla)})]})]}),oe&&o.jsx("div",{className:"px-3 pb-3 border-t",children:o.jsxs("div",{className:"pt-3 space-y-2 text-sm",children:[o.jsxs("div",{className:"grid grid-cols-2 gap-2",children:[o.jsxs("div",{children:[o.jsx("div",{className:"text-[10px] text-gray-600",children:"Categora"}),o.jsx("div",{className:"text-sm",children:ce.category}),o.jsxs("div",{className:"mt-2",children:[o.jsx("div",{className:"text-[10px] text-gray-600",children:"Unidades x paquete"}),o.jsx("div",{className:"text-sm",children:String(ce.unitsPerPackage||1)})]}),o.jsxs("div",{className:"mt-2",children:[o.jsx("div",{className:"text-[10px] text-gray-600",children:"Precio Unidad"}),o.jsx("div",{className:"text-sm tabular-nums",children:_m(ce.priceIsla/(ce.unitsPerPackage||1))})]}),o.jsxs("div",{className:"mt-2",children:[o.jsx("div",{className:"text-[10px] text-gray-600",children:"Precio Paquete"}),Me?o.jsx("input",{className:"w-full border rounded px-2 py-2 text-right",inputMode:"decimal",value:String(L),onChange:Ue=>Z(Number(Ue.target.value||0))}):o.jsx("div",{className:"text-sm font-semibold tabular-nums",children:_m(ce.priceIsla)})]})]}),o.jsxs("div",{children:[o.jsxs("div",{children:[o.jsx("div",{className:"text-[10px] text-gray-600",children:"Utilidad Bruta"}),o.jsx("div",{className:"text-sm tabular-nums",children:_m(ve)})]}),o.jsxs("div",{className:"mt-1",children:[o.jsx("div",{className:"text-[10px] text-gray-600",children:"Comisin"}),o.jsx("div",{className:"text-sm tabular-nums",children:_m(le)})]}),o.jsxs("div",{className:"mt-2",children:[o.jsx("div",{className:"text-[10px] text-gray-600",children:"Cdigo EAN"}),Me?o.jsxs("div",{className:"flex gap-2",children:[o.jsx("input",{className:"flex-1 border rounded px-2 py-2",value:J,readOnly:!0}),o.jsx("button",{className:"px-3 py-2 rounded bg-blue-600 text-white",onClick:()=>{K("edit"),R(!0)},type:"button",children:"Escanear"})]}):o.jsx("div",{children:w[ce.productId]||""})]}),o.jsxs("div",{className:"mt-2",children:[o.jsx("div",{className:"text-[10px] text-gray-600",children:"Tipo Empaque"}),Me?o.jsxs("select",{className:"w-full border rounded px-2 py-2",value:z,onChange:Ue=>Ae(Ue.target.value),children:[o.jsx("option",{value:"",children:""}),o.jsx("option",{value:"Tarro",children:"Tarro"}),o.jsx("option",{value:"Bolsa",children:"Bolsa"}),o.jsx("option",{value:"Ristra",children:"Ristra"}),o.jsx("option",{value:"Caja",children:"Caja"}),o.jsx("option",{value:"Vaso",children:"Vaso"}),o.jsx("option",{value:"Pana",children:"Pana"})]}):o.jsx("div",{className:"text-sm",children:fe[ce.productId]||""})]})]})]}),o.jsx("div",{className:"flex gap-2",children:Me?o.jsxs(o.Fragment,{children:[o.jsx("button",{className:"px-3 py-2 rounded bg-green-600 text-white",onClick:()=>{dt(ce.productId),ie(null)},type:"button",children:"Guardar"}),o.jsx("button",{className:"px-3 py-2 rounded bg-gray-800 text-white",onClick:()=>{K("edit"),R(!0)},type:"button",children:"Escanear"}),o.jsx("button",{className:"px-3 py-2 rounded bg-gray-200",onClick:()=>D(null),type:"button",children:"Cancelar"})]}):ut&&o.jsxs(o.Fragment,{children:[o.jsx("button",{className:"px-3 py-2 rounded bg-yellow-400",onClick:()=>{D(ce.productId),Z(ce.priceIsla||0),U(ce.priceRivas||0),je(w[ce.productId]||""),Ae(fe[ce.productId]||"")},type:"button",children:"Editar"}),o.jsx("button",{className:"px-3 py-2 rounded bg-red-600 text-white",onClick:()=>l(Ue=>Ue.filter(rt=>rt.productId!==ce.productId)),type:"button",children:"Borrar"})]})})]})})]},ce.productId)})}),a&&o.jsx("p",{className:"mt-2 text-sm",children:a})]}),o.jsx(Mrt,{open:H,onClose:()=>R(!1),onDetected:it}),o.jsx("div",{className:"hidden md:block bg-white rounded shadow border w-full overflow-x-auto",children:o.jsxs("table",{className:"min-w-[900px] w-full text-sm",children:[o.jsx("thead",{className:"bg-gray-100",children:o.jsxs("tr",{className:"whitespace-nowrap",children:[o.jsx("th",{className:"p-2 border text-left",children:"Categora"}),o.jsx("th",{className:"p-2 border text-left",children:"Producto"}),o.jsx("th",{className:"p-2 border text-left",children:"Empaque"}),o.jsx("th",{className:"p-2 border text-right",children:"Precio Isla"}),o.jsx("th",{className:"p-2 border text-right",children:"Precio Rivas"}),o.jsx("th",{className:"p-2 border text-right",children:"Acciones"})]})}),o.jsx("tbody",{children:r?o.jsx("tr",{children:o.jsx("td",{className:"p-4 text-center",colSpan:6,children:"Cargando"})}):Ie.length===0?o.jsx("tr",{children:o.jsx("td",{className:"p-4 text-center",colSpan:6,children:"Sin resultados."})}):Ie.map(ce=>o.jsxs("tr",{children:[o.jsx("td",{className:"p-2 border",children:ce.category}),o.jsx("td",{className:"p-2 border",children:ce.productName}),o.jsx("td",{className:"p-2 border",children:W===ce.productId?o.jsxs("select",{className:"w-full border rounded px-2 py-1",value:z,onChange:oe=>Ae(oe.target.value),children:[o.jsx("option",{value:"",children:""}),o.jsx("option",{value:"Tarro",children:"Tarro"}),o.jsx("option",{value:"Bolsa",children:"Bolsa"}),o.jsx("option",{value:"Ristra",children:"Ristra"}),o.jsx("option",{value:"Caja",children:"Caja"}),o.jsx("option",{value:"Vaso",children:"Vaso"}),o.jsx("option",{value:"Pana",children:"Pana"})]}):fe[ce.productId]||""}),o.jsx("td",{className:"p-2 border text-right tabular-nums",children:W===ce.productId?o.jsx("input",{className:"w-24 border rounded px-2 py-1 text-right",inputMode:"decimal",value:String(L),onChange:oe=>Z(Number(oe.target.value||0))}):_m(ce.priceIsla)}),o.jsx("td",{className:"p-2 border text-right tabular-nums",children:W===ce.productId?o.jsx("input",{className:"w-24 border rounded px-2 py-1 text-right",inputMode:"decimal",value:String(ge),onChange:oe=>U(Number(oe.target.value||0))}):_m(ce.priceRivas)}),o.jsx("td",{className:"p-2 border text-right",children:W===ce.productId?o.jsxs("div",{className:"flex items-center justify-end gap-2",children:[o.jsx("button",{className:"px-2 py-1 rounded bg-green-600 text-white text-sm",onClick:()=>dt(ce.productId),type:"button",children:"Guardar"}),o.jsx("button",{className:"px-2 py-1 rounded bg-gray-200 text-sm",onClick:()=>D(null),type:"button",children:"Cancelar"})]}):ut&&o.jsxs("div",{className:"flex items-center justify-end gap-2",children:[o.jsx("button",{className:"px-2 py-1 rounded bg-yellow-400 text-sm",onClick:()=>{D(ce.productId),Z(ce.priceIsla||0),U(ce.priceRivas||0),je(w[ce.productId]||"")},type:"button",children:"Editar"}),o.jsx("button",{className:"px-2 py-1 rounded bg-blue-600 text-white text-sm",onClick:()=>{D(ce.productId),K("edit"),R(!0)},type:"button",children:"Escanear"}),o.jsx("button",{className:"px-2 py-1 rounded bg-red-600 text-white text-sm",onClick:()=>l(oe=>oe.filter(Me=>Me.productId!==ce.productId)),type:"button",children:"Borrar"})]})})]},ce.productId))})]})}),a&&o.jsx("p",{className:"hidden md:block mt-2 text-sm",children:a})]})}const a_=["Cuaderno","Block","Lapicero","Lpiz","Tajador","Borrador","Corrector","Cartucheras"],Dq=["Lider","Scribe","Smarty","Pointer","Paper Mate","Otro"],UB=["Hombre","Mujer","Variado","NA"],Urt=["Universitario Cocido","5 Materia","2 Materia","Doble Raya","Rayado","Cuadriculado","Subrayado","Sublineado","Liso"],il=t=>`C$ ${(Number(t)||0).toFixed(2)}`;function Ti(t){return String(t??"").trim().replace(/\s+/g," ").toLowerCase()}function kl(t,e=0){const r=Number(String(t??"").replace(",","."));return Number.isFinite(r)?r:e}function z_(t,e=1){const r=Math.floor(kl(t,e));return r>0?r:e}function oce(t){return!Number.isFinite(t)||t<=0?0:t}function QB(t){const e=String(t??"").trim();return e||""}function Ad(t,e){const r=Object.keys(t||{}),n=new Map;r.forEach(a=>n.set(Ti(a),a));for(const a of e){const s=n.get(Ti(a));if(s!=null)return t[s]}}function Qrt(t){return Object.values(t||{}).every(r=>Ti(r)==="")}function Wg(t){const e=Math.max(0,kl(t.providerPrice,0)),r=Math.max(1,z_(t.quantity,1)),n=oce(kl(t.margin,0)),a=Math.max(0,kl(t.salePrice,0)),s=n>0?e/n:e,i=a>0?a:s,l=i>0?e/i:n,c=e*r,u=(i-e)*r,d=i*r;return{providerPrice:e,quantity:r,margin:l,salePrice:i,facturado:c,gain:u,totalEsperado:d}}function Vrt(){const{refreshKey:t,refresh:e}=xc(),[r,n]=v.useState(!0),[a,s]=v.useState(""),[i,l]=v.useState([]),[c,u]=v.useState(!1),[d,f]=v.useState(""),[h,A]=v.useState(""),[m,p]=v.useState(""),[g,x]=v.useState(""),[y,b]=v.useState(!1),[w,j]=v.useState(null),[I,_]=v.useState(!1),[E,S]=v.useState(null),[k,P]=v.useState(a_[0]),[T,F]=v.useState(Dq[0]),[Y,he]=v.useState(""),[ue,fe]=v.useState(0),[me,ne]=v.useState(1),[Pe,Ie]=v.useState(.7),[O,H]=v.useState(0),[R,M]=v.useState("NA"),[K,W]=v.useState(""),[D,L]=v.useState(""),[Z,ge]=v.useState(!1),[U,Ge]=v.useState(""),[ie,J]=v.useState([]),[je,z]=v.useState([]),[Ae,ye]=v.useState(!1);v.useEffect(()=>{(async()=>{n(!0),s("");try{const xe=await Ot(nr(ht(ke,"products_stationery"))),He=[];xe.forEach(Ce=>{const lt=Ce.data();He.push({id:Ce.id,category:lt.category||"",brand:lt.brand||"",name:lt.name||"",providerPrice:Number(lt.providerPrice||0),quantity:Number(lt.quantity||1),facturado:Number(lt.facturado||0),margin:Number(lt.margin||0),salePrice:Number(lt.salePrice||0),gain:Number(lt.gain||0),gender:lt.gender||"NA",typeProduct:lt.typeProduct||"",code:lt.code??"",createdAt:lt.createdAt,updatedAt:lt.updatedAt,totalEsperado:Number(lt.totalEsperado||Number(lt.salePrice||0)*Number(lt.quantity||1))})}),l(He)}catch(xe){console.error(xe),s(" Error cargando productos (papelera).")}finally{n(!1)}})()},[t]);const Qe=v.useMemo(()=>{const xe=Ti(d),He=Ti(h),Ce=m.trim()===""?null:kl(m,NaN),lt=g.trim()===""?null:kl(g,NaN);return i.filter(nt=>!(xe&&!`${nt.category} ${nt.name}`.toLowerCase().includes(xe)||He&&!String(nt.code||"").toLowerCase().includes(He)||Ce!=null&&Number.isFinite(Ce)&&nt.salePrice<Ce||lt!=null&&Number.isFinite(lt)&&nt.salePrice>lt))},[i,d,h,m,g]),st=v.useMemo(()=>d.trim()!==""||h.trim()!==""||m.trim()!==""||g.trim()!=="",[d,h,m,g]),ut=v.useMemo(()=>{const xe=i.length,He=i.reduce((nt,Xe)=>nt+(Xe.facturado||0),0),Ce=i.reduce((nt,Xe)=>nt+Number(Xe.totalEsperado||Number(Xe.salePrice||0)*Number(Xe.quantity||1)),0),lt=i.reduce((nt,Xe)=>nt+(Xe.gain||0),0);return{count:xe,sumFact:He,sumEsperado:Ce,sumGain:lt}},[i]),De=()=>{P(a_[0]),he(""),fe(0),ne(1),Ie(.7),H(0),M("NA"),W(""),L(""),j(null)},it=()=>{De(),b(!0)},dt=xe=>{j(xe),P(xe.category||a_[0]),F(xe.brand||Dq[0]),he(xe.name||""),fe(Number(xe.providerPrice||0)),ne(Number(xe.quantity||1)),Ie(Number(xe.margin||.7)),H(Number(xe.salePrice||0)),M(xe.gender||"NA"),W(xe.typeProduct||""),L(String(xe.code||"")),b(!0)},ce=async()=>{s("");const xe=String(k||"").trim(),He=String(T||"").trim(),Ce=String(Y||"").trim(),{providerPrice:lt,quantity:nt,margin:Xe,salePrice:It,facturado:$t,totalEsperado:Ke,gain:wt}=Wg({providerPrice:ue,quantity:me,margin:Pe,salePrice:O});if(!xe)return s(" Categora requerida.");if(!Ce)return s(" Producto requerido.");if(lt<=0)return s(" Precio proveedor debe ser > 0.");if(nt<=0)return s(" Cantidad debe ser > 0.");if(It<=0)return s(" Precio venta invlido.");if(Xe<=0)return s(" Margen invlido.");const q={category:xe,brand:He,name:Ce,providerPrice:lt,quantity:nt,facturado:$t,margin:Xe,salePrice:It,gain:wt,gender:R||"NA",typeProduct:String(K||"").trim(),code:QB(D)||null,updatedAt:fr.now(),totalEsperado:Ke};try{n(!0),w?(await nn(qt(ke,"products_stationery",w.id),q),s(" Producto actualizado.")):(await xn(ht(ke,"products_stationery"),{...q,createdAt:fr.now()}),s(" Producto creado.")),b(!1),j(null),De(),e()}catch(ae){console.error(ae),s(" Error guardando producto.")}finally{n(!1)}},oe=async()=>{var xe;try{const He=new Zb,Ce=await Zb.listVideoInputDevices(),lt=(xe=Ce[Ce.length-1])==null?void 0:xe.deviceId;if(!lt)return null;const nt=document.createElement("div");nt.className="fixed inset-0 z-[9999] bg-black/70 flex items-center justify-center p-3";const Xe=document.createElement("div");Xe.className="bg-white w-full max-w-md rounded-xl overflow-hidden shadow-xl";const It=document.createElement("div");It.className="p-3 flex items-center justify-between border-b",It.innerHTML="<div style='font-weight:700'>Escanear cdigo</div>";const $t=document.createElement("button");$t.textContent="Cerrar",$t.className="px-3 py-1 rounded bg-gray-200";const Ke=document.createElement("div");Ke.className="p-3";const wt=document.createElement("video");return wt.style.width="100%",wt.style.borderRadius="12px",Ke.appendChild(wt),It.appendChild($t),Xe.appendChild(It),Xe.appendChild(Ke),nt.appendChild(Xe),document.body.appendChild(nt),await new Promise(async q=>{const ae=()=>{nt.remove(),q(null)};$t.onclick=ae;const ee=await He.decodeFromVideoDevice(lt,wt,be=>{if(be){const _e=be.getText();try{ee.stop()}catch{}nt.remove(),q(_e)}})})}catch(He){return console.error(He),null}},Me=async()=>{const xe=await oe();xe&&L(xe)},Le=async()=>{const xe=await oe();if(!xe)return;const He=i.find(Ce=>String(Ce.code||"")===String(xe));He?(S(He),_(!0),s("")):(S(null),_(!0),s(""))},ve=(xe,He)=>{const Ce=xe.map(Xe=>({Id:Xe.id,Categoria:Xe.category,brand:Xe.brand,Producto:Xe.name,PrecioProveedor:Xe.providerPrice,Cantidad:Xe.quantity,Facturado:Xe.facturado,TotalEsperado:Xe.totalEsperado||Xe.salePrice*Xe.quantity,Margen:Xe.margin,PrecioVenta:Xe.salePrice,Ganancia:Xe.gain,Genero:Xe.gender,TipoProducto:Xe.typeProduct,Codigo:Xe.code||""})),lt=Is.json_to_sheet(Ce),nt=Is.book_new();Is.book_append_sheet(nt,lt,"Productos"),pk(nt,He)},le=()=>{const xe=[{Id:"",Categoria:"Cuaderno",brand:"Lider",Producto:"Cuaderno Norma 100 hojas",PrecioProveedor:120,Cantidad:12,Margen:.7,PrecioVenta:"",Genero:"NA",TipoProducto:"Universitario Cocido",Codigo:"1234567890123"}],He=Is.json_to_sheet(xe),Ce=Is.book_new();Is.book_append_sheet(Ce,He,"Productos");const lt=F4(Ce,{type:"array",bookType:"xlsx"}),nt=new Blob([lt],{type:"application/vnd.openxmlformats-officedocument.spreadsheetml.sheet"}),Xe=URL.createObjectURL(nt),It=document.createElement("a");It.href=Xe,It.download="template_products_stationery.xlsx",document.body.appendChild(It),It.click(),It.remove(),URL.revokeObjectURL(Xe)},Ue=xe=>{const He=[],Ce=[];xe.forEach((nt,Xe)=>{if(!nt||typeof nt!="object"||Qrt(nt))return;const It=Xe+2,$t=String(Ad(nt,["Id","ID","docId","DocId"])??"").trim(),Ke=String(Ad(nt,["Categoria","Categora","Category","category"])??"").trim(),wt=String(Ad(nt,["Brand","Marca","brand","marca"])??"").trim(),q=String(Ad(nt,["Producto","Product","Nombre","Name","name"])??"").trim(),ae=Ad(nt,["PrecioProveedor","Precio Prov","Precio Prov.","ProviderPrice","Costo","providerPrice"]),ee=Ad(nt,["Cantidad","Qty","quantity","cantidad"]),be=Ad(nt,["Margen","Margin","margen","margin"]),_e=Ad(nt,["PrecioVenta","Precio Venta","SalePrice","salePrice"]),Be=String(Ad(nt,["Genero","Gnero","Gender","gender"])??"NA").trim(),tt=String(Ad(nt,["TipoProducto","Tipo","TypeProduct","typeProduct","Tipo producto"])??"").trim(),ot=Ad(nt,["Codigo","Cdigo","Code","Barcode","code"]),te=QB(ot),V=Math.max(0,kl(ae,0)),re=Math.max(1,z_(ee,1)),pe=oce(kl(be,0)),Ee=Math.max(0,kl(_e,0));Ke||Ce.push(`Fila ${It}: falta Categoria.`),q||Ce.push(`Fila ${It}: falta Producto.`),V<=0&&Ce.push(`Fila ${It}: PrecioProveedor debe ser > 0.`),re<=0&&Ce.push(`Fila ${It}: Cantidad debe ser > 0.`),pe<=0&&Ee<=0&&Ce.push(`Fila ${It}: Margen debe ser > 0 (o enviar PrecioVenta).`);const Re=UB.includes(Be||"NA")?Be:"NA";Ke&&q&&V>0&&re>0&&(pe>0||Ee>0)&&He.push({id:$t||void 0,category:Ke,brand:wt,name:q,providerPrice:V,quantity:re,margin:pe>0?pe:.7,salePrice:Ee>0?Ee:void 0,gender:Re,typeProduct:tt,code:te||"",_raw:nt})});const lt=new Map;for(const nt of He){const Xe=nt.id?`id::${nt.id}`:`${Ti(nt.category)}::${Ti(nt.name)}`;lt.set(Xe,nt)}return{rows:Array.from(lt.values()),errors:Ce}},rt=async xe=>{if(s(""),z([]),J([]),Ge((xe==null?void 0:xe.name)||""),!xe)return;const He=xe.name.toLowerCase(),Ce=He.endsWith(".xlsx")||He.endsWith(".xls"),lt=He.endsWith(".csv");if(!Ce&&!lt){z(["Solo se permiten archivos .xlsx, .xls o .csv"]);return}try{ye(!0);const nt=new FileReader,Xe=await new Promise((ee,be)=>{nt.onerror=()=>be(new Error("No se pudo leer el archivo.")),nt.onload=()=>ee(nt.result),nt.readAsArrayBuffer(xe)}),It=A2(new Uint8Array(Xe),{type:"array"}),$t=It.SheetNames[0],Ke=It.Sheets[$t],wt=Is.sheet_to_json(Ke,{defval:""}),{rows:q,errors:ae}=Ue(wt);J(q),z(ae),q.length===0&&ae.length===0&&z(["No se encontraron filas vlidas para importar."])}catch(nt){console.error(nt),z(["Error leyendo el archivo. Revis que no est corrupto."])}finally{ye(!1)}},mt=(xe,He)=>{J(Ce=>{const lt=[...Ce],nt=lt[xe];return nt?(lt[xe]={...nt,...He},lt):Ce})},gt=v.useMemo(()=>{const xe=new Set(i.map(nt=>nt.id)),He=new Set(i.map(nt=>`${Ti(nt.category)}::${Ti(nt.name)}`));let Ce=0,lt=0;for(const nt of ie){if(nt.id&&xe.has(nt.id)){Ce+=1;continue}const Xe=`${Ti(nt.category)}::${Ti(nt.name)}`;He.has(Xe)?Ce+=1:lt+=1}return{total:ie.length,willCreate:lt,willUpdate:Ce}},[ie,i]),Ct=async()=>{if(s(""),je.length>0){s(" Correg los errores antes de importar.");return}if(ie.length===0){s(" No hay filas para importar.");return}try{ye(!0);const xe={},He={};i.forEach(Xe=>{xe[Xe.id]=Xe,He[`${Ti(Xe.category)}::${Ti(Xe.name)}`]=Xe});const Ce=tg(ke);let lt=0,nt=0;for(const Xe of ie){const It=String(Xe.category||"").trim(),$t=String(Xe.name||"").trim(),{providerPrice:Ke,quantity:wt,margin:q,salePrice:ae,facturado:ee,totalEsperado:be,gain:_e}=Wg({providerPrice:Xe.providerPrice,quantity:Xe.quantity,margin:Xe.margin,salePrice:Xe.salePrice});if(!It||!$t||Ke<=0||wt<=0||ae<=0||q<=0)continue;const Be={category:It,name:$t,providerPrice:Ke,quantity:wt,facturado:ee,totalEsperado:be,margin:q,salePrice:ae,gain:_e,gender:Xe.gender||"NA",typeProduct:String(Xe.typeProduct||"").trim(),code:QB(Xe.code)||null,updatedAt:fr.now()};let tt;if(Xe.id&&xe[Xe.id])tt=xe[Xe.id];else{const ot=`${Ti(It)}::${Ti($t)}`;tt=He[ot]}if(tt)Ce.update(qt(ke,"products_stationery",tt.id),Be),nt+=1;else{const ot=qt(ht(ke,"products_stationery"));Ce.set(ot,{...Be,createdAt:fr.now()}),lt+=1}}await Ce.commit(),s(` Importacin lista. Creados: ${lt}, Actualizados: ${nt}`),ge(!1),J([]),z([]),Ge(""),e()}catch(xe){console.error(xe),s(" Error importando productos a Firestore.")}finally{ye(!1)}},jt=()=>{f(""),A(""),p(""),x("")};return o.jsxs("div",{className:"max-w-7xl mx-auto",children:[o.jsxs("div",{className:"flex items-center justify-between mb-3",children:[o.jsx("h2",{className:"text-2xl font-bold",children:"Papelera"}),o.jsxs("div",{className:"flex gap-2 flex-wrap justify-end",children:[o.jsx("button",{className:"px-3 py-2 rounded bg-gray-900 text-white hover:bg-black",onClick:Le,type:"button",children:"Escanear"}),o.jsx("button",{className:"px-3 py-2 rounded bg-green-600 text-white hover:bg-green-700",onClick:it,type:"button",children:"+ Nuevo"}),o.jsx("button",{className:"px-3 py-2 rounded bg-indigo-600 text-white hover:bg-indigo-700",onClick:()=>{ge(!0),J([]),z([]),Ge("")},type:"button",children:"Importar (.xlsx)"}),o.jsx("button",{className:"px-3 py-2 rounded bg-gray-200 hover:bg-gray-300",onClick:()=>ve(i,"products_stationery_todo.xlsx"),type:"button",children:"Exportar (todo)"}),o.jsx("button",{className:"px-3 py-2 rounded bg-gray-200 hover:bg-gray-300",onClick:()=>ve(Qe,"products_stationery_filtrado.xlsx"),type:"button",children:"Exportar (filtrado)"}),o.jsx(gc,{onClick:e,loading:r||Ae})]})]}),o.jsxs("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-3 mb-4",children:[o.jsx(s_,{label:"Productos",value:ut.count}),o.jsx(s_,{label:"Facturado",value:il(ut.sumFact)}),o.jsx(s_,{label:"Esperado",value:il(ut.sumEsperado)}),o.jsx(s_,{label:"Ganancia",value:il(ut.sumGain)})]}),o.jsxs("div",{className:"mb-3",children:[o.jsxs("button",{className:`w-full md:w-auto px-3 py-2 rounded border bg-white hover:bg-gray-50 ${st?"border-yellow-300 bg-yellow-50":""}`,type:"button",onClick:()=>u(xe=>!xe),children:[c?"Cerrar filtros":"Abrir filtros"," ",st?"(activos)":""]}),c&&o.jsxs("div",{className:"mt-2 bg-white border rounded-xl shadow-sm p-3 text-sm",children:[o.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-3 items-end",children:[o.jsxs("div",{children:[o.jsx("label",{className:"block font-semibold",children:"Producto"}),o.jsx("input",{className:"w-full border rounded px-2 py-2",value:d,onChange:xe=>f(xe.target.value),placeholder:"Ej: Cuaderno Norma"})]}),o.jsxs("div",{children:[o.jsx("label",{className:"block font-semibold",children:"Cdigo"}),o.jsx("input",{className:"w-full border rounded px-2 py-2",value:h,onChange:xe=>A(xe.target.value),placeholder:"Barcode"})]}),o.jsxs("div",{children:[o.jsx("label",{className:"block font-semibold",children:"Precio venta mn"}),o.jsx("input",{className:"w-full border rounded px-2 py-2 text-right",inputMode:"decimal",value:m,onChange:xe=>p(xe.target.value),placeholder:"0"})]}),o.jsxs("div",{children:[o.jsx("label",{className:"block font-semibold",children:"Precio venta mx"}),o.jsx("input",{className:"w-full border rounded px-2 py-2 text-right",inputMode:"decimal",value:g,onChange:xe=>x(xe.target.value),placeholder:"0"})]}),o.jsxs("div",{className:"md:col-span-4 flex gap-2 justify-end",children:[o.jsx("button",{className:"px-3 py-2 rounded bg-gray-200 hover:bg-gray-300",type:"button",onClick:jt,children:"Limpiar"}),o.jsx("button",{className:"px-3 py-2 rounded bg-indigo-600 text-white hover:bg-indigo-700",type:"button",onClick:()=>u(!1),children:"Aplicar"})]})]}),o.jsxs("div",{className:"mt-2 flex items-center justify-between text-xs text-gray-600",children:[o.jsxs("div",{children:["Mostrando: ",o.jsx("b",{children:Qe.length})]}),o.jsxs("div",{children:["Coleccin: ",o.jsx("b",{children:"products_stationery"})]})]})]})]}),o.jsx("div",{className:"md:hidden space-y-2",children:r?o.jsx("div",{className:"bg-white rounded-xl border shadow p-4 text-center",children:"Cargando"}):Qe.length===0?o.jsx("div",{className:"bg-white rounded-xl border shadow p-4 text-center",children:"Sin resultados."}):Qe.map(xe=>o.jsxs("div",{className:"bg-white border rounded-xl p-3 shadow-sm",children:[o.jsx("div",{className:"text-xs text-gray-600",children:xe.category}),o.jsx("div",{className:"text-base font-bold leading-tight",children:xe.name}),o.jsxs("div",{className:"mt-2 grid grid-cols-2 gap-2",children:[o.jsxs("div",{className:"rounded-lg border bg-gray-50 p-2",children:[o.jsx("div",{className:"text-[11px] text-gray-600",children:"Venta"}),o.jsx("div",{className:"text-lg font-extrabold tabular-nums",children:il(xe.salePrice)})]}),o.jsxs("div",{className:"rounded-lg border bg-gray-50 p-2",children:[o.jsx("div",{className:"text-[11px] text-gray-600",children:"Ganancia"}),o.jsxs("div",{className:"mt-2 text-xs text-gray-600",children:["Esperado:"," ",o.jsx("b",{children:il(xe.totalEsperado||xe.salePrice*xe.quantity)})]}),o.jsx("div",{className:"text-lg font-extrabold tabular-nums",children:il(xe.gain)})]})]}),o.jsxs("div",{className:"mt-2 text-xs text-gray-600",children:["Cdigo: ",o.jsx("b",{children:xe.code||""})]}),o.jsx("div",{className:"mt-2 flex gap-2",children:o.jsx("button",{className:"flex-1 px-3 py-2 rounded bg-yellow-400 hover:bg-yellow-500",type:"button",onClick:()=>dt(xe),children:"Editar"})})]},xe.id))}),o.jsx("div",{className:"hidden md:block bg-white border rounded overflow-x-auto",children:o.jsxs("table",{className:"min-w-[1200px] w-full text-sm",children:[o.jsx("thead",{className:"bg-gray-100",children:o.jsxs("tr",{className:"whitespace-nowrap",children:[o.jsx("th",{className:"p-2 border text-left",children:"Categora"}),o.jsx("th",{className:"p-2 border text-left",children:"Producto"}),o.jsx("th",{className:"p-2 border text-right",children:"Proveedor"}),o.jsx("th",{className:"p-2 border text-right",children:"Cantidad"}),o.jsx("th",{className:"p-2 border text-right",children:"Facturado"}),o.jsx("th",{className:"p-2 border text-right",children:"Esperado"}),o.jsx("th",{className:"p-2 border text-right",children:"Margen"}),o.jsx("th",{className:"p-2 border text-right",children:"Venta"}),o.jsx("th",{className:"p-2 border text-right",children:"Ganancia"}),o.jsx("th",{className:"p-2 border text-left",children:"Gnero"}),o.jsx("th",{className:"p-2 border text-left",children:"Tipo"}),o.jsx("th",{className:"p-2 border text-left",children:"Cdigo"}),o.jsx("th",{className:"p-2 border text-center",children:"Acciones"})]})}),o.jsx("tbody",{children:r?o.jsx("tr",{children:o.jsx("td",{className:"p-4 text-center",colSpan:12,children:"Cargando"})}):Qe.length===0?o.jsx("tr",{children:o.jsx("td",{className:"p-4 text-center",colSpan:12,children:"Sin resultados."})}):Qe.map(xe=>o.jsxs("tr",{className:"align-top",children:[o.jsx("td",{className:"p-2 border",children:xe.category}),o.jsx("td",{className:"p-2 border",children:xe.name}),o.jsx("td",{className:"p-2 border text-right tabular-nums",children:il(xe.providerPrice)}),o.jsx("td",{className:"p-2 border text-right tabular-nums",children:xe.quantity}),o.jsx("td",{className:"p-2 border text-right tabular-nums",children:il(xe.facturado)}),o.jsx("td",{className:"p-2 border text-right tabular-nums",children:il(xe.totalEsperado||xe.salePrice*xe.quantity)}),o.jsx("td",{className:"p-2 border text-right tabular-nums",children:Number(xe.margin||0).toFixed(2)}),o.jsx("td",{className:"p-2 border text-right tabular-nums",children:il(xe.salePrice)}),o.jsx("td",{className:"p-2 border text-right tabular-nums",children:il(xe.gain)}),o.jsx("td",{className:"p-2 border",children:xe.gender}),o.jsx("td",{className:"p-2 border",children:xe.typeProduct}),o.jsx("td",{className:"p-2 border",children:xe.code||""}),o.jsx("td",{className:"p-2 border text-center",children:o.jsx("button",{className:"px-2 py-1 rounded bg-yellow-400 hover:bg-yellow-500",type:"button",onClick:()=>dt(xe),children:"Editar"})})]},xe.id))})]})}),a&&o.jsx("p",{className:"mt-2 text-sm",children:a}),y&&o.jsxs(Rq,{onClose:()=>b(!1),title:w?"Editar producto":"Nuevo producto",children:[o.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-3 text-sm",children:[o.jsxs("div",{children:[o.jsx("label",{className:"block font-semibold",children:"Categora"}),o.jsx("select",{className:"w-full border rounded px-2 py-2",value:k,onChange:xe=>P(xe.target.value),children:a_.map(xe=>o.jsx("option",{value:xe,children:xe},xe))})]}),o.jsxs("div",{children:[o.jsx("label",{className:"block font-semibold",children:"Producto"}),o.jsx("input",{className:"w-full border rounded px-2 py-2",value:Y,onChange:xe=>he(xe.target.value),placeholder:"Ej: Cuaderno Norma..."})]}),o.jsxs("div",{children:[o.jsx("label",{className:"block font-semibold",children:"Precio proveedor"}),o.jsx("input",{type:"number",step:"0.01",inputMode:"decimal",className:"w-full border rounded px-2 py-2 text-right",value:Number.isNaN(ue)?"":ue,onChange:xe=>fe(Math.max(0,kl(xe.target.value,0)))})]}),o.jsxs("div",{children:[o.jsx("label",{className:"block font-semibold",children:"Cantidad"}),o.jsx("input",{type:"number",min:1,className:"w-full border rounded px-2 py-2 text-right",value:me,onChange:xe=>ne(z_(xe.target.value,1))})]}),o.jsxs("div",{children:[o.jsx("label",{className:"block font-semibold",children:"Facturado (auto)"}),o.jsx("div",{className:"w-full border rounded px-2 py-2 text-right bg-gray-50 tabular-nums",children:il(Wg({providerPrice:ue,quantity:me,margin:Pe,salePrice:O}).facturado)})]}),o.jsxs("div",{children:[o.jsx("label",{className:"block font-semibold",children:"Margen"}),o.jsx("input",{type:"number",step:"0.01",inputMode:"decimal",className:"w-full border rounded px-2 py-2 text-right",value:Number.isNaN(Pe)?"":Pe,onChange:xe=>Ie(Math.max(0,kl(xe.target.value,0)))}),o.jsx("div",{className:"text-[11px] text-gray-600 mt-1",children:"Ej: 0.70 / 0.80"})]}),o.jsxs("div",{children:[o.jsx("label",{className:"block font-semibold",children:"Precio venta (editable)"}),o.jsx("input",{type:"number",step:"0.01",inputMode:"decimal",className:"w-full border rounded px-2 py-2 text-right",value:Number.isNaN(Wg({providerPrice:ue,quantity:me,margin:Pe,salePrice:O}).salePrice)?"":Wg({providerPrice:ue,quantity:me,margin:Pe,salePrice:O}).salePrice,onChange:xe=>{H(Math.max(0,kl(xe.target.value,0)))}})]}),o.jsxs("div",{children:[o.jsx("label",{className:"block font-semibold",children:"Ganancia (auto)"}),o.jsx("div",{className:"w-full border rounded px-2 py-2 text-right bg-gray-50 tabular-nums",children:il(Wg({providerPrice:ue,quantity:me,margin:Pe,salePrice:O}).gain)})]}),o.jsxs("div",{children:[o.jsx("label",{className:"block font-semibold",children:"Gnero"}),o.jsx("select",{className:"w-full border rounded px-2 py-2",value:R,onChange:xe=>M(xe.target.value),children:UB.map(xe=>o.jsx("option",{value:xe,children:xe},xe))})]}),o.jsxs("div",{children:[o.jsx("label",{className:"block font-semibold",children:"Tipo producto"}),o.jsxs("select",{className:"w-full border rounded px-2 py-2",value:K,onChange:xe=>W(xe.target.value),children:[o.jsx("option",{value:"",children:""}),Urt.map(xe=>o.jsx("option",{value:xe,children:xe},xe))]})]}),o.jsxs("div",{className:"md:col-span-2",children:[o.jsx("label",{className:"block font-semibold",children:"Cdigo"}),o.jsxs("div",{className:"flex gap-2",children:[o.jsx("input",{className:"flex-1 border rounded px-2 py-2",value:D,onChange:xe=>L(xe.target.value),placeholder:"Escane o peg el cdigo"}),o.jsx("button",{className:"px-3 py-2 rounded bg-gray-200 hover:bg-gray-300",type:"button",onClick:Me,children:"Escanear"})]})]})]}),o.jsxs("div",{className:"mt-4 flex justify-end gap-2",children:[o.jsx("button",{className:"px-4 py-2 rounded bg-gray-200 hover:bg-gray-300",type:"button",onClick:()=>{b(!1),j(null)},children:"Cancelar"}),o.jsx("button",{className:"px-4 py-2 rounded bg-indigo-600 text-white hover:bg-indigo-700",type:"button",onClick:ce,disabled:r,children:"Guardar"})]})]}),I&&o.jsx(Rq,{onClose:()=>_(!1),title:"Resultado de escaneo",children:E?o.jsxs("div",{className:"text-sm",children:[o.jsx("div",{className:"text-xs text-gray-600",children:E.category}),o.jsx("div",{className:"text-lg font-bold",children:E.name}),o.jsxs("div",{className:"mt-3 grid grid-cols-2 gap-2",children:[o.jsxs("div",{className:"rounded-lg border bg-gray-50 p-2",children:[o.jsx("div",{className:"text-[11px] text-gray-600",children:"Precio venta"}),o.jsx("div",{className:"text-lg font-extrabold tabular-nums",children:il(E.salePrice)})]}),o.jsxs("div",{className:"rounded-lg border bg-gray-50 p-2",children:[o.jsx("div",{className:"text-[11px] text-gray-600",children:"Ganancia"}),o.jsx("div",{className:"text-lg font-extrabold tabular-nums",children:il(E.gain)})]})]}),o.jsxs("div",{className:"mt-3 grid grid-cols-2 gap-2",children:[o.jsxs("div",{className:"rounded-lg border p-2",children:[o.jsx("div",{className:"text-[11px] text-gray-600",children:"Proveedor"}),o.jsx("div",{className:"font-semibold tabular-nums",children:il(E.providerPrice)})]}),o.jsxs("div",{className:"rounded-lg border p-2",children:[o.jsx("div",{className:"text-[11px] text-gray-600",children:"Cantidad"}),o.jsx("div",{className:"font-semibold tabular-nums",children:E.quantity})]}),o.jsxs("div",{className:"rounded-lg border p-2 col-span-2",children:[o.jsx("div",{className:"text-[11px] text-gray-600",children:"Cdigo"}),o.jsx("div",{className:"font-semibold tabular-nums",children:E.code||""})]})]}),o.jsx("div",{className:"mt-4 flex justify-end",children:o.jsx("button",{className:"px-4 py-2 rounded bg-yellow-400 hover:bg-yellow-500",type:"button",onClick:()=>{_(!1),dt(E)},children:"Editar"})})]}):o.jsxs("div",{className:"text-sm",children:[o.jsx("div",{className:"font-semibold",children:"No encontrado"}),o.jsxs("div",{className:"text-gray-600 mt-1",children:["Ese cdigo no existe en ",o.jsx("b",{children:"products_stationery"}),"."]})]})}),Z&&o.jsx("div",{className:"fixed inset-0 bg-black/40 flex items-center justify-center z-50 p-3",children:o.jsxs("div",{className:"bg-white w-full max-w-6xl max-h-[90vh] overflow-y-auto rounded shadow-lg p-5 text-sm",children:[o.jsxs("div",{className:"flex items-center justify-between mb-3",children:[o.jsx("h3",{className:"text-xl font-bold",children:"Importar papelera (.xlsx / .csv)"}),o.jsx("button",{className:"px-3 py-1 rounded bg-gray-200 hover:bg-gray-300",onClick:()=>ge(!1),children:"Cerrar"})]}),o.jsxs("div",{className:"bg-gray-50 border rounded p-3 mb-3",children:[o.jsxs("div",{className:"flex flex-col md:flex-row gap-3 md:items-end md:justify-between",children:[o.jsxs("div",{children:[o.jsx("div",{className:"font-semibold",children:"1) Sub tu archivo"}),o.jsx("div",{className:"text-xs text-gray-600",children:"Columnas esperadas: Id (opcional), Categoria, Producto, PrecioProveedor, Cantidad, Margen (o PrecioVenta), Genero, TipoProducto, Codigo."})]}),o.jsx("button",{className:"px-3 py-2 rounded bg-gray-200 hover:bg-gray-300",onClick:le,type:"button",children:"Descargar template .xlsx"})]}),o.jsxs("div",{className:"mt-3 flex flex-col md:flex-row gap-3 md:items-center",children:[o.jsx("input",{type:"file",accept:".xlsx,.xls,.csv",onChange:xe=>{var He;return rt(((He=xe.target.files)==null?void 0:He[0])||null)}}),U&&o.jsxs("span",{className:"text-xs text-gray-600",children:["Archivo: ",o.jsx("b",{children:U})]}),Ae&&o.jsx("span",{className:"text-xs",children:"Procesando"})]})]}),je.length>0&&o.jsxs("div",{className:"bg-red-50 border border-red-200 rounded p-3 mb-3",children:[o.jsx("div",{className:"font-semibold text-red-700 mb-2",children:"Errores encontrados"}),o.jsx("ul",{className:"list-disc pl-5 text-red-700 text-xs space-y-1",children:je.slice(0,60).map((xe,He)=>o.jsx("li",{children:xe},He))})]}),o.jsxs("div",{className:"bg-white border rounded p-3",children:[o.jsxs("div",{className:"flex flex-wrap gap-4 items-center justify-between mb-2",children:[o.jsxs("div",{children:[o.jsx("div",{className:"font-semibold",children:"2) Previsualizacin (editable)"}),o.jsxs("div",{className:"text-xs text-gray-600",children:["Se importarn ",gt.total," filas (Crear:"," ",gt.willCreate," / Actualizar:"," ",gt.willUpdate,")"]})]}),o.jsx("button",{className:"px-3 py-2 rounded bg-indigo-600 text-white hover:bg-indigo-700 disabled:opacity-50",onClick:Ct,disabled:Ae||ie.length===0||je.length>0,type:"button",children:"Importar a Firestore"})]}),o.jsxs("div",{className:"overflow-x-auto border rounded",children:[o.jsxs("table",{className:"min-w-[1500px] w-full text-xs",children:[o.jsx("thead",{className:"bg-gray-100",children:o.jsxs("tr",{className:"whitespace-nowrap",children:[o.jsx("th",{className:"p-2 border text-left",children:"Id (opcional)"}),o.jsx("th",{className:"p-2 border text-left",children:"Categora"}),o.jsx("th",{className:"p-2 border text-left",children:"Producto"}),o.jsx("th",{className:"p-2 border text-right",children:"Proveedor"}),o.jsx("th",{className:"p-2 border text-right",children:"Cantidad"}),o.jsx("th",{className:"p-2 border text-right",children:"Margen"}),o.jsx("th",{className:"p-2 border text-right",children:"PrecioVenta"}),o.jsx("th",{className:"p-2 border text-left",children:"Gnero"}),o.jsx("th",{className:"p-2 border text-left",children:"Tipo"}),o.jsx("th",{className:"p-2 border text-left",children:"Cdigo"}),o.jsx("th",{className:"p-2 border text-center",children:"Accin"})]})}),o.jsx("tbody",{children:ie.length===0?o.jsx("tr",{children:o.jsx("td",{colSpan:11,className:"p-4 text-center text-gray-500",children:"Sub un archivo para ver la previsualizacin."})}):ie.slice(0,300).map((xe,He)=>{const Ce=xe.id?i.some(Xe=>Xe.id===xe.id):!1,lt=i.some(Xe=>`${Ti(Xe.category)}::${Ti(Xe.name)}`==`${Ti(xe.category)}::${Ti(xe.name)}`),nt=Ce||lt;return o.jsxs("tr",{className:"whitespace-nowrap",children:[o.jsx("td",{className:"p-2 border",children:o.jsx("input",{className:"w-56 border rounded px-2 py-1",value:xe.id||"",onChange:Xe=>mt(He,{id:Xe.target.value.trim()||void 0}),placeholder:"docId (update exacto)"})}),o.jsx("td",{className:"p-2 border",children:o.jsx("input",{className:"w-44 border rounded px-2 py-1",value:xe.category,onChange:Xe=>mt(He,{category:Xe.target.value})})}),o.jsx("td",{className:"p-2 border",children:o.jsx("input",{className:"w-72 border rounded px-2 py-1",value:xe.name,onChange:Xe=>mt(He,{name:Xe.target.value})})}),o.jsx("td",{className:"p-2 border text-right tabular-nums",children:o.jsx("input",{type:"number",step:"0.01",className:"w-28 border rounded px-2 py-1 text-right",value:xe.providerPrice,onChange:Xe=>mt(He,{providerPrice:Math.max(0,kl(Xe.target.value,0))})})}),o.jsx("td",{className:"p-2 border text-right tabular-nums",children:o.jsx("input",{type:"number",min:1,className:"w-24 border rounded px-2 py-1 text-right",value:xe.quantity,onChange:Xe=>mt(He,{quantity:z_(Xe.target.value,1)})})}),o.jsx("td",{className:"p-2 border text-right tabular-nums",children:o.jsx("input",{type:"number",step:"0.01",className:"w-24 border rounded px-2 py-1 text-right",value:xe.margin,onChange:Xe=>mt(He,{margin:Math.max(0,kl(Xe.target.value,0))})})}),o.jsx("td",{className:"p-2 border text-right tabular-nums",children:o.jsx("input",{type:"number",step:"0.01",className:"w-28 border rounded px-2 py-1 text-right",value:xe.salePrice??"",onChange:Xe=>mt(He,{salePrice:Math.max(0,kl(Xe.target.value,0))||void 0}),placeholder:"Opcional"})}),o.jsx("td",{className:"p-2 border",children:o.jsx("select",{className:"w-28 border rounded px-2 py-1",value:xe.gender,onChange:Xe=>mt(He,{gender:Xe.target.value}),children:UB.map(Xe=>o.jsx("option",{value:Xe,children:Xe},Xe))})}),o.jsx("td",{className:"p-2 border",children:o.jsx("input",{className:"w-56 border rounded px-2 py-1",value:xe.typeProduct,onChange:Xe=>mt(He,{typeProduct:Xe.target.value})})}),o.jsx("td",{className:"p-2 border",children:o.jsx("input",{className:"w-56 border rounded px-2 py-1",value:xe.code||"",onChange:Xe=>mt(He,{code:Xe.target.value})})}),o.jsx("td",{className:"p-2 border text-center",children:o.jsx("span",{className:`px-2 py-0.5 rounded text-[10px] ${nt?"bg-yellow-100 text-yellow-700":"bg-green-100 text-green-700"}`,children:nt?"ACTUALIZA":"CREA"})})]},`${xe.id||""}-${He}`)})})]}),ie.length>300&&o.jsxs("div",{className:"text-xs text-gray-600 mt-2",children:["Mostrando 300 de ",ie.length," filas (importa todas)."]})]})]})]})})]})}function s_({label:t,value:e}){return o.jsxs("div",{className:"bg-white border rounded p-3 shadow-sm",children:[o.jsx("div",{className:"text-xs text-gray-500",children:t}),o.jsx("div",{className:"text-lg font-extrabold",children:e})]})}function Rq({title:t,children:e,onClose:r}){return o.jsx("div",{className:"fixed inset-0 bg-black/50 z-50 flex items-center justify-center p-3",children:o.jsxs("div",{className:"bg-white rounded-xl shadow-lg w-full max-w-3xl p-4 relative",children:[o.jsxs("div",{className:"flex items-center justify-between mb-3",children:[o.jsx("h3",{className:"text-xl font-bold",children:t}),o.jsx("button",{className:"px-3 py-1 rounded bg-gray-200 hover:bg-gray-300",onClick:r,type:"button",children:"Cerrar"})]}),e]})})}const yu=t=>`C$ ${(Number(t)||0).toFixed(2)}`;function Hrt(t){var e;return t!=null&&t.date?t.date:(e=t==null?void 0:t.createdAt)!=null&&e.toDate?Sr(t.createdAt.toDate(),"yyyy-MM-dd"):""}function $rt(t,e){const r=Hrt(t);if(!r)return null;let n=0,a=0;return Array.isArray(t.items)&&t.items.length>0?(n=t.items.reduce((s,i)=>s+(Number(i.qty??i.quantity??i.lbs??0)||0),0),a=Number(t.amount??t.total??0)||0):(n=Number(t.quantity??t.lbs??t.weight??0)||0,a=Number(t.amount??t.total??0)||0),{id:e,date:r,type:t.type||"CONTADO",total:a,quantity:n,customerId:t.customerId||void 0,customerName:t.customerName||void 0,_raw:t}}async function Krt(t){const e=nr(ht(ke,"ar_movements"),cr("ref.saleId","==",t)),r=await Ot(e);await Promise.all(r.docs.map(n=>Cn(qt(ke,"ar_movements",n.id))))}function Grt({role:t="",sellerCandyId:e="",roles:r}){const n=r&&r.length?r:t,a=Yr(n,"vendedor_pollo"),s=Yr(n,"admin");if(!(Yr(n,"admin")||Yr(n,"vendedor_pollo")||Yr(n,"supervisor_pollo")||Yr(n,"contador")))return o.jsx("div",{className:"p-6 max-w-4xl mx-auto text-center text-red-600",children:"Acceso restringido  Solo administradores, vendedores y supervisores de pollo."});const i=s?7:6,[l,c]=v.useState(!1),[u,d]=v.useState(!1),[f,h]=v.useState(null),[A,m]=v.useState([]),p=async z=>{c(!0),d(!0),h(z),m([]);try{const Ae=await ui(qt(ke,"salesV2",z)),ye=Ae.exists()?Ae.data():null;if(!ye){m([]);return}let Qe=[];if(Array.isArray(ye.items)&&ye.items.length>0)Qe=ye.items;else if(ye.items&&typeof ye.items=="object")try{Qe=Object.values(ye.items)}catch{Qe=[]}else ye.item?Qe=[ye.item]:Array.isArray(ye.products)&&ye.products.length>0?Qe=ye.products:Array.isArray(ye.lines)&&ye.lines.length>0?Qe=ye.lines:Array.isArray(ye.detalles)&&ye.detalles.length>0?Qe=ye.detalles:(ye.productName||ye.product)&&(Qe=[{productName:ye.productName||ye.product||"",qty:ye.qty??ye.quantity??ye.lbs??0,unitPrice:ye.unitPrice??ye.price??0,discount:ye.discount??0,total:ye.total??ye.amount??0}]);const st=oe=>{if(oe==null)return NaN;if(typeof oe=="number")return oe;let Me=String(oe).trim();if(!Me)return NaN;if(Me=Me.replace(/[^0-9.,-]/g,""),!Me)return NaN;Me.indexOf(".")>-1&&Me.indexOf(",")>-1?Me=Me.replace(/,/g,""):Me.indexOf(",")>-1&&Me.indexOf(".")===-1&&(Me=Me.replace(/,/g,"."));const Le=Number(Me);return isNaN(Le)?NaN:Le},ut=new Set;for(const oe of Qe)if(Array.isArray(oe==null?void 0:oe.allocations))for(const Me of oe.allocations){const Le=String((Me==null?void 0:Me.batchId)||"").trim();Le&&ut.add(Le)}else if(oe!=null&&oe.allocations&&typeof oe.allocations=="object")try{for(const Me of Object.values(oe.allocations)){const Le=String((Me==null?void 0:Me.batchId)||"").trim();Le&&ut.add(Le)}}catch{}if(Array.isArray(ye==null?void 0:ye.allocations))for(const oe of ye.allocations){const Me=String((oe==null?void 0:oe.batchId)||"").trim();Me&&ut.add(Me)}const De={};ut.size>0&&await Promise.all(Array.from(ut).map(async oe=>{try{const Me=await ui(qt(ke,"inventory_batches",oe));if(Me.exists()){const Le=Me.data();De[oe]=Number(Le.salePrice??Le.sale_price??Le.price??0)}}catch{}}));const it=new Set;for(const oe of Qe){const Me=String(oe.productId||oe.productId||"").trim();Me&&it.add(Me)}const dt={};it.size>0&&await Promise.all(Array.from(it).map(async oe=>{try{const Me=await ui(qt(ke,"products",oe));if(Me.exists()){const Le=Me.data();dt[oe]=Number(Le.salePrice??Le.price??0)}}catch{}}));const ce=Qe.map(oe=>{const Me=String(oe.productName||oe.product||oe.name||"(sin nombre)"),Le=Number(oe.qty??oe.quantity??oe.lbs??oe.weight??0)||0,ve=st(oe.total??oe.lineFinal??oe.amount??oe.monto??oe.line_total)||0;let le=0;const Ue=[oe.unitPrice,oe.unitPricePackage,oe.salePrice,oe.sale_price,oe.price,oe.unit_price,oe.pricePerUnit,oe.price_per_unit];for(const gt of Ue){const Ct=st(gt);if(!isNaN(Ct)&&Ct!==0){le=Ct;break}}if(!le){const gt=(ye==null?void 0:ye.salePrice)??(ye==null?void 0:ye.sale_price)??(ye==null?void 0:ye.unitPrice)??(ye==null?void 0:ye.unit_price)??(ye==null?void 0:ye.price)??(ye==null?void 0:ye.pricePerUnit),Ct=st(gt);!isNaN(Ct)&&Ct!==0&&(le=Ct)}if(!le){const gt=Array.isArray(oe.allocations)?oe.allocations[0]:oe.allocations&&typeof oe.allocations=="object"?Object.values(oe.allocations)[0]:null,Ct=gt?String(gt.batchId||"").trim():"";Ct&&De[Ct]&&(le=De[Ct]||0)}!le&&oe.productId&&(le=dt[String(oe.productId)]||0),(!le||le===0)&&ve>0&&Le>0&&(le=ve/Le);const rt=st(oe.discount??oe.desc??0)||0;let mt=ve;return(!mt||mt===0)&&(mt=Number(le*Le||0)),mt=Number(mt)||0,{productName:Me,qty:Le,unitPrice:le,discount:rt,total:mt}});m(ce)}catch(Ae){console.error(Ae)}finally{d(!1)}},[g,x]=v.useState(Sr(new Date,"yyyy-MM-01")),[y,b]=v.useState(Sr(new Date,"yyyy-MM-dd")),[w,j]=v.useState([]),[I,_]=v.useState([]),[E,S]=v.useState([]),[k,P]=v.useState(!0),[T,F]=v.useState(""),[Y,he]=v.useState(""),[ue,fe]=v.useState(""),[me,ne]=v.useState("ALL"),[Pe,Ie]=v.useState(null),O=15,[H,R]=v.useState(1),M=v.useMemo(()=>{const z={};return w.forEach(Ae=>z[Ae.id]=Ae.name),z},[w]);v.useEffect(()=>{(async()=>{P(!0),F("");try{const z=[];if(a&&e){const st=nr(ht(ke,"customers_pollo"),cr("vendorId","==",e),on("createdAt","desc"));(await Ot(st)).forEach(De=>z.push({id:De.id,name:De.data().name||""}))}else(await Ot(nr(ht(ke,"customers_pollo"),on("createdAt","desc")))).forEach(ut=>z.push({id:ut.id,name:ut.data().name||""}));j(z);const Ae=await Ot(nr(ht(ke,"salesV2"),on("createdAt","desc"))),ye=[];Ae.forEach(st=>{const ut=$rt(st.data(),st.id);ut&&ut.date>=g&&ut.date<=y&&ye.push(ut)});const Qe=ye.sort((st,ut)=>ut.date.localeCompare(st.date));_(Qe),S(Array.from(new Set(Qe.map(st=>{var ut,De,it,dt;return((ut=st._raw)==null?void 0:ut.productName)||((dt=(it=(De=st._raw)==null?void 0:De.items)==null?void 0:it[0])==null?void 0:dt.productName)||"(sin producto)"}))).sort()),R(1)}catch(z){console.error(z),F(" Error cargando transacciones.")}finally{P(!1)}})()},[g,y]);const K=v.useMemo(()=>I.filter(z=>{var Ae,ye,Qe,st;if(Y&&z.customerId!==Y||ue&&z.type!==ue)return!1;if(me&&me!=="ALL"){const ut=((Ae=z._raw)==null?void 0:Ae.productName)||((st=(Qe=(ye=z._raw)==null?void 0:ye.items)==null?void 0:Qe[0])==null?void 0:st.productName)||"";if(!ut||ut!==me)return!1}return!0}),[I,Y,ue,me]),W=v.useMemo(()=>{let z=0,Ae=0,ye=0,Qe=0;for(const De of K)De.type==="CONTADO"?(z+=De.quantity,ye+=De.total):(Ae+=De.quantity,Qe+=De.total);const st=z+Ae,ut=ye+Qe;return{packsCash:z,packsCredito:Ae,packsTotal:st,montoCash:ye,montoCredito:Qe,montoTotal:ut}},[K]),D=Math.max(1,Math.ceil(K.length/O)),L=v.useMemo(()=>{const z=(H-1)*O;return K.slice(z,z+O)},[K,H]);v.useMemo(()=>f&&I.find(z=>z.id===f)||null,[f,I]);const Z=async z=>{if(s&&(Ie(null),!!window.confirm("Eliminar esta venta? Se restaurar el inventario asociado.")))try{P(!0),await ote(z.id),await Krt(z.id),_(Ae=>Ae.filter(ye=>ye.id!==z.id)),F(" Venta eliminada")}catch(Ae){console.error(Ae),F(" No se pudo eliminar la venta.")}finally{P(!1)}},ge=()=>{const z=`Ventas del dia  ${g} a ${y}`,Ae=ut=>(ut||"").replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;"),ye=K.map(ut=>{var it,dt,ce,oe;const De=ut.customerName||(ut.customerId?M[ut.customerId]:"")||"Nombre cliente";return(it=ut._raw)!=null&&it.productName||(oe=(ce=(dt=ut._raw)==null?void 0:dt.items)==null?void 0:ce[0])!=null&&oe.productName,`<tr>
          <td>${ut.date}</td>
          <td>${Ae(De)}</td>
          <td>${ut.type==="CREDITO"?"Crdito":"Cash"}</td>
          <td style="text-align:right">${ut.quantity}</td>
          <td style="text-align:right">${yu(ut.total)}</td>
        </tr>`}).join(""),Qe=`<!doctype html><html><head><meta charset="utf-8" />
    <title>${Ae(z)}</title>
    <style>
      *{font-family:Arial, sans-serif} h1{margin:0 0 8px}
      .muted{color:#555;font-size:12px;margin-bottom:12px}
      .kpis{display:grid;grid-template-columns:repeat(2,max-content);gap:8px 28px;margin:10px 0 14px}
      table{width:100%;border-collapse:collapse;font-size:12px}
      th,td{border:1px solid #ddd;padding:6px}
      th{background:#f5f5f5;text-align:left}
      @media print{@page{size:A4;margin:12mm}}
    </style></head><body>
      <h1>${Ae(z)}</h1>
      <div class="kpis">
        <div><b>Libras Cash:</b> ${W.packsCash}</div>
        <div><b>Libras Crdito:</b> ${W.packsCredito}</div>
        <div><b>Ventas Cash:</b> ${yu(W.montoCash)}</div>
        <div><b>Ventas Crdito:</b> ${yu(W.montoCredito)}</div>
      </div>
      <table><thead><tr>
        <th>Fecha</th><th>Cliente</th><th>Tipo</th><th>Libras</th><th>Ventas</th>
      </tr></thead><tbody>
      ${ye||'<tr><td colspan="5" style="text-align:center">Sin transacciones</td></tr>'}
      </tbody></table>
      <script>window.print()<\/script>
    </body></html>`,st=window.open("","_blank");st&&(st.document.open(),st.document.write(Qe),st.document.close())},U=()=>R(1),Ge=()=>R(z=>Math.max(1,z-1)),ie=()=>R(z=>Math.min(D,z+1)),J=()=>R(D),je=()=>{const z=[];if(D<=7)for(let ye=1;ye<=D;ye++)z.push(ye);else{const ye=Math.max(1,H-2),Qe=Math.min(D,H+2);z.push(1),ye>2&&z.push(-1);for(let st=ye;st<=Qe;st++)st!==1&&st!==D&&z.push(st);Qe<D-1&&z.push(-2),z.push(D)}return o.jsxs("div",{className:"flex flex-col sm:flex-row sm:items-center gap-2 justify-between mt-3",children:[o.jsxs("div",{className:"flex items-center gap-1 flex-wrap",children:[o.jsx("button",{className:"px-2 py-1 border rounded disabled:opacity-50",onClick:U,disabled:H===1,children:" Primero"}),o.jsx("button",{className:"px-2 py-1 border rounded disabled:opacity-50",onClick:Ge,disabled:H===1,children:" Anterior"}),z.map((ye,Qe)=>typeof ye=="number"?o.jsx("button",{className:`px-3 py-1 border rounded ${ye===H?"bg-blue-600 text-white":""}`,onClick:()=>R(ye),children:ye},Qe):o.jsx("span",{className:"px-2",children:""},Qe)),o.jsx("button",{className:"px-2 py-1 border rounded disabled:opacity-50",onClick:ie,disabled:H===D,children:"Siguiente "}),o.jsx("button",{className:"px-2 py-1 border rounded disabled:opacity-50",onClick:J,disabled:H===D,children:"ltimo "})]}),o.jsxs("div",{className:"text-sm text-gray-600",children:["Pgina ",H," de ",D,"  ",K.length," transaccin(es)"]})]})};return o.jsxs("div",{className:"max-w-6xl mx-auto",children:[o.jsx("h2",{className:"text-2xl font-bold mb-3",children:"Ventas del dia"}),o.jsxs("div",{className:"bg-white p-3 rounded shadow border mb-4 grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-5 gap-3 items-end text-sm",children:[o.jsxs("div",{children:[o.jsx("label",{className:"block font-semibold",children:"Desde"}),o.jsx("input",{type:"date",className:"border rounded px-2 py-1 w-full",value:g,onChange:z=>{x(z.target.value),R(1)}})]}),o.jsxs("div",{children:[o.jsx("label",{className:"block font-semibold",children:"Hasta"}),o.jsx("input",{type:"date",className:"border rounded px-2 py-1 w-full",value:y,onChange:z=>{b(z.target.value),R(1)}})]}),o.jsxs("div",{className:"sm:col-span-2 lg:col-span-2",children:[o.jsx("label",{className:"block font-semibold",children:"Cliente (crdito)"}),o.jsxs("select",{className:"border rounded px-2 py-1 w-full",value:Y,onChange:z=>{he(z.target.value),R(1)},children:[o.jsx("option",{value:"",children:"Todos"}),w.map(z=>o.jsx("option",{value:z.id,children:z.name},z.id))]})]}),o.jsxs("div",{children:[o.jsx("label",{className:"block font-semibold",children:"Tipo"}),o.jsxs("select",{className:"border rounded px-2 py-1 w-full",value:ue,onChange:z=>{fe(z.target.value),R(1)},children:[o.jsx("option",{value:"",children:"Todos"}),o.jsx("option",{value:"CONTADO",children:"Cash"}),o.jsx("option",{value:"CREDITO",children:"Crdito"})]})]}),o.jsxs("div",{children:[o.jsx("label",{className:"block font-semibold",children:"Producto"}),o.jsxs("select",{className:"border rounded px-2 py-1 w-full",value:me,onChange:z=>{ne(z.target.value),R(1)},children:[o.jsx("option",{value:"ALL",children:"Todos"}),E.map(z=>o.jsx("option",{value:z,children:z},z))]})]}),o.jsx("button",{className:"sm:col-span-2 lg:col-span-1 px-3 py-2 rounded bg-blue-600 text-white hover:bg-blue-700 w-full",onClick:ge,children:"Exportar PDF"})]}),o.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-6 gap-3 mb-4",children:[o.jsxs("div",{className:"p-3 border rounded bg-gray-50",children:[o.jsx("div",{className:"text-xs text-gray-600",children:"Libras Cash"}),o.jsx("div",{className:"text-xl font-semibold",children:W.packsCash})]}),o.jsxs("div",{className:"p-3 border rounded bg-gray-50",children:[o.jsx("div",{className:"text-xs text-gray-600",children:"Libras Crdito"}),o.jsx("div",{className:"text-xl font-semibold",children:W.packsCredito})]}),o.jsxs("div",{className:"p-3 border rounded bg-gray-50",children:[o.jsx("div",{className:"text-xs text-gray-600",children:"Libras Total"}),o.jsx("div",{className:"text-xl font-semibold",children:W.packsTotal})]}),o.jsxs("div",{className:"p-3 border rounded bg-gray-50",children:[o.jsx("div",{className:"text-xs text-gray-600",children:"Ventas Cash"}),o.jsx("div",{className:"text-xl font-semibold",children:yu(W.montoCash)})]}),o.jsxs("div",{className:"p-3 border rounded bg-gray-50",children:[o.jsx("div",{className:"text-xs text-gray-600",children:"Ventas Crdito"}),o.jsx("div",{className:"text-xl font-semibold",children:yu(W.montoCredito)})]}),o.jsxs("div",{className:"p-3 border rounded bg-gray-50",children:[o.jsx("div",{className:"text-xs text-gray-600",children:"Ventas Total"}),o.jsx("div",{className:"text-xl font-semibold",children:yu(W.montoTotal)})]})]}),o.jsxs("div",{className:"block md:hidden space-y-3",children:[k?o.jsx("div",{className:"bg-white border rounded-lg p-4 shadow",children:"Cargando"}):L.length===0?o.jsx("div",{className:"bg-white border rounded-lg p-4 shadow",children:"Sin transacciones en el rango."}):L.map(z=>{var Qe,st,ut,De;const Ae=z.customerName||(z.customerId?M[z.customerId]:"")||"Nombre cliente",ye=((Qe=z._raw)==null?void 0:Qe.productName)||((De=(ut=(st=z._raw)==null?void 0:st.items)==null?void 0:ut[0])==null?void 0:De.productName)||"(sin producto)";return o.jsx("div",{className:"bg-white border rounded-xl shadow",children:o.jsxs("details",{className:"group",children:[o.jsxs("summary",{className:"list-none cursor-pointer p-3 flex items-start gap-3",children:[o.jsxs("div",{className:"flex-1 min-w-0",children:[o.jsxs("div",{className:"flex items-center justify-between gap-2",children:[o.jsx("div",{className:"font-semibold truncate",children:Ae}),o.jsx("div",{className:"text-xs text-gray-600 shrink-0",children:z.date})]}),o.jsxs("div",{className:"mt-1 flex items-center gap-2 flex-wrap text-xs",children:[o.jsx("span",{className:`px-2 py-1 rounded-full border ${z.type==="CREDITO"?"bg-yellow-50 border-yellow-200 text-yellow-700":"bg-green-50 border-green-200 text-green-700"}`,children:z.type==="CREDITO"?"Crdito":"Cash"}),o.jsxs("span",{className:"text-gray-700",children:[o.jsx("b",{children:"Libras:"})," ",o.jsx("button",{type:"button",className:"underline text-blue-600",onClick:it=>{it.preventDefault(),p(z.id)},title:"Ver detalle",children:z.quantity})]}),o.jsxs("span",{className:"text-gray-700",children:[o.jsx("b",{children:"Monto:"})," ",yu(z.total)]})]})]}),o.jsx("div",{className:"text-gray-500 mt-1",children:o.jsx("span",{className:"inline-block transition-transform group-open:rotate-180",children:""})})]}),o.jsx("div",{className:"px-3 pb-3 pt-0 text-sm",children:o.jsxs("div",{className:"grid grid-cols-1 gap-2 border-t pt-3",children:[o.jsxs("div",{className:"flex items-center justify-between",children:[o.jsx("span",{className:"text-gray-600",children:"Cliente"}),o.jsx("span",{className:"font-medium text-right",children:Ae})]}),o.jsxs("div",{className:"flex items-center justify-between",children:[o.jsx("span",{className:"text-gray-600",children:"Producto"}),o.jsx("span",{className:"font-medium text-right",children:ye})]}),o.jsxs("div",{className:"flex items-center justify-between",children:[o.jsx("span",{className:"text-gray-600",children:"Fecha"}),o.jsx("span",{className:"font-medium",children:z.date})]}),o.jsxs("div",{className:"flex items-center justify-between",children:[o.jsx("span",{className:"text-gray-600",children:"Tipo"}),o.jsx("span",{className:"font-medium",children:z.type==="CREDITO"?"Crdito":"Cash"})]}),o.jsxs("div",{className:"flex items-center justify-between",children:[o.jsx("span",{className:"text-gray-600",children:"Libras"}),o.jsx("span",{className:"font-medium",children:o.jsx("button",{type:"button",className:"underline text-blue-600",onClick:()=>p(z.id),title:"Ver detalle",children:z.quantity})})]}),o.jsxs("div",{className:"flex items-center justify-between",children:[o.jsx("span",{className:"text-gray-600",children:"Monto"}),o.jsx("span",{className:"font-semibold",children:yu(z.total)})]}),o.jsx("div",{className:"flex items-center justify-between",children:s&&o.jsxs("div",{className:"pt-2 flex items-center justify-end gap-2",children:[o.jsx("button",{className:"px-3 py-2 rounded border hover:bg-gray-50",onClick:()=>Ie(it=>it===z.id?null:z.id),children:" Acciones"}),Pe===z.id&&o.jsx("button",{className:"px-3 py-2 rounded bg-red-600 text-white hover:bg-red-700",onClick:()=>Z(z),children:"Eliminar"})]})})]})})]})},z.id)}),o.jsx("div",{className:"bg-white p-3 rounded shadow border",children:je()})]}),o.jsxs("div",{className:"hidden md:block bg-white p-2 rounded shadow border w-full",children:[o.jsxs("table",{className:"min-w-full w-full text-sm",children:[o.jsx("thead",{className:"bg-gray-100",children:o.jsxs("tr",{children:[o.jsx("th",{className:"p-2 border",children:"Fecha"}),o.jsx("th",{className:"p-2 border",children:"Cliente"}),o.jsx("th",{className:"p-2 border",children:"Producto"}),o.jsx("th",{className:"p-2 border",children:"Tipo"}),o.jsx("th",{className:"p-2 border",children:"Libras"}),o.jsx("th",{className:"p-2 border",children:"Ventas"}),s&&o.jsx("th",{className:"p-2 border",children:"Acciones"})]})}),o.jsx("tbody",{children:k?o.jsx("tr",{children:o.jsx("td",{className:"p-4 text-center",colSpan:i,children:"Cargando"})}):L.length===0?o.jsx("tr",{children:o.jsx("td",{className:"p-4 text-center",colSpan:i,children:"Sin transacciones en el rango."})}):L.map(z=>{var Qe,st,ut,De;const Ae=z.customerName||(z.customerId?M[z.customerId]:"")||"Nombre cliente",ye=((Qe=z._raw)==null?void 0:Qe.productName)||((De=(ut=(st=z._raw)==null?void 0:st.items)==null?void 0:ut[0])==null?void 0:De.productName)||"(sin producto)";return o.jsxs("tr",{className:"text-center",children:[o.jsx("td",{className:"p-2 border",children:z.date}),o.jsx("td",{className:"p-2 border",children:Ae}),o.jsx("td",{className:"p-2 border",children:ye}),o.jsx("td",{className:"p-2 border",children:z.type==="CREDITO"?"Crdito":"Cash"}),o.jsx("td",{className:"p-2 border",children:o.jsx("button",{type:"button",className:"underline text-blue-600 hover:text-blue-800",title:"Ver detalle de productos de esta venta",onClick:()=>p(z.id),children:z.quantity})}),o.jsx("td",{className:"p-2 border",children:yu(z.total)}),s&&o.jsxs("td",{className:"p-2 border relative",children:[o.jsx("button",{className:"px-2 py-1 rounded border hover:bg-gray-50",onClick:()=>Ie(it=>it===z.id?null:z.id),title:"Acciones",children:""}),Pe===z.id&&o.jsx("div",{className:"absolute right-2 mt-1 w-28 bg-white border rounded shadow z-10 text-left",children:o.jsx("button",{className:"block w-full text-left px-3 py-2 hover:bg-gray-100 text-red-600",onClick:()=>Z(z),children:"Eliminar"})})]})]},z.id)})})]}),je()]}),T&&o.jsx("p",{className:"mt-2 text-sm",children:T}),l&&o.jsx("div",{className:"fixed inset-0 bg-black/40 flex items-center justify-center z-[60]",children:o.jsxs("div",{className:"bg-white rounded-lg shadow-xl border w-[95%] max-w-3xl p-4",children:[o.jsxs("div",{className:"flex items-center justify-between mb-2",children:[o.jsx("div",{children:o.jsxs("h3",{className:"text-lg font-bold",children:["Productos vendidos"," ",f?` #${f}`:""]})}),o.jsx("button",{className:"px-3 py-1 rounded bg-gray-200 hover:bg-gray-300",onClick:()=>c(!1),children:"Cerrar"})]}),o.jsx("div",{className:"bg-white rounded border overflow-x-auto",children:o.jsxs("table",{className:"min-w-full text-sm",children:[o.jsx("thead",{className:"bg-gray-100",children:o.jsxs("tr",{children:[o.jsx("th",{className:"p-2 border",children:"Producto"}),o.jsx("th",{className:"p-2 border text-right",children:"Libras"}),o.jsx("th",{className:"p-2 border text-right",children:"Precio"}),o.jsx("th",{className:"p-2 border text-right",children:"Descuento"}),o.jsx("th",{className:"p-2 border text-right",children:"Monto"})]})}),o.jsx("tbody",{children:u?o.jsx("tr",{children:o.jsx("td",{colSpan:5,className:"p-4 text-center",children:"Cargando"})}):A.length===0?o.jsx("tr",{children:o.jsx("td",{colSpan:5,className:"p-4 text-center",children:"Sin tems en esta venta."})}):A.map((z,Ae)=>o.jsxs("tr",{className:"text-center",children:[o.jsx("td",{className:"p-2 border text-left",children:z.productName}),o.jsx("td",{className:"p-2 border text-right",children:z.qty}),o.jsx("td",{className:"p-2 border text-right",children:yu(z.unitPrice)}),o.jsx("td",{className:"p-2 border text-right",children:yu(z.discount||0)}),o.jsx("td",{className:"p-2 border text-right",children:yu(z.total)})]},Ae))})]})})]})})]})}function qrt(){const[t,e]=v.useState(!1);return v.useEffect(()=>{var a;const r=window.matchMedia("(max-width: 900px)"),n=()=>e(r.matches);return n(),(a=r.addEventListener)==null||a.call(r,"change",n),()=>{var s;return(s=r.removeEventListener)==null?void 0:s.call(r,"change",n)}},[]),t}function zrt(){const[t,e]=v.useState(null),[r,n]=v.useState(""),[a,s]=v.useState([]),[i,l]=v.useState(""),[c,u]=v.useState(!0),d=qrt(),f=v.useMemo(()=>d?o.jsx(r1e,{role:r,roles:a}):o.jsx(t1e,{role:r,roles:a}),[d,r,a]),h=(t==null?void 0:t.email)||"";if(v.useEffect(()=>{const m=TO(Cf,async p=>{if(u(!0),p){e(p);try{const g=qt(ke,"users",p.uid),x=await ui(g);if(x.exists()){const y=x.data(),b=Array.isArray(y.roles)?y.roles:y.role?[y.role]:[],w=y.sellerCandyId||"";s(b),n(b[0]||""),l(w||"")}else n(""),s([]),l("")}catch{n(""),l("")}}else e(null),n(""),l("");u(!1)});return()=>m()},[]),c)return o.jsx("div",{className:"p-6 text-center",children:"Cargando..."});const A=()=>{const m=a&&a.length?a:r;return Yr(m,"admin")?o.jsx(nA,{to:"financialDashboard",replace:!0}):Yr(m,"vendedor_pollo")?o.jsx(nA,{to:"salesV2",replace:!0}):Yr(m,"supervisor_pollo")?o.jsx(nA,{to:"batches",replace:!0}):Yr(m,"contador")?o.jsx(nA,{to:"batches",replace:!0}):Yr(m,"vendedor_ropa")?o.jsx(nA,{to:"salesClothes",replace:!0}):Yr(m,"vendedor_dulces")?o.jsx(nA,{to:"salesCandies",replace:!0}):o.jsx(nA,{to:"/",replace:!0})};return o.jsx(FAe,{children:o.jsxs(dAe,{children:[o.jsx(hn,{path:"/",element:o.jsx(Yve,{})}),o.jsxs(hn,{path:"/admin",element:o.jsx(wn,{allowedRoles:["admin","vendedor_pollo","vendedor_ropa","vendedor_dulces","supervisor_pollo","contador"],children:f}),children:[o.jsx(hn,{index:!0,element:o.jsx(A,{})}),o.jsx(hn,{path:"bills",element:o.jsx(wn,{allowedRoles:["admin","vendedor_pollo","supervisor_pollo","contador"],children:o.jsx(RSe,{role:r,roles:a})})}),o.jsx(hn,{path:"salesV2",element:o.jsx(wn,{allowedRoles:["admin","vendedor_pollo","supervisor_pollo","contador"],children:o.jsx($Q,{user:t})})}),o.jsx(hn,{path:"financialDashboard",element:o.jsx(wn,{allowedRoles:["admin"],children:o.jsx(JSe,{})})}),o.jsx(hn,{path:"expenses",element:o.jsx(wn,{allowedRoles:["admin"],children:o.jsx(ZSe,{})})}),o.jsx(hn,{path:"transactionsPollo",element:o.jsx(wn,{allowedRoles:["admin","vendedor_pollo","supervisor_pollo","contador"],children:o.jsx(Grt,{role:r,roles:a})})}),o.jsx(hn,{path:"batches",element:o.jsx(wn,{allowedRoles:["admin","vendedor_pollo","supervisor_pollo","contador"],children:o.jsx(WSe,{role:r,roles:a})})}),o.jsx(hn,{path:"paidBatches",element:o.jsx(wn,{allowedRoles:["admin"],children:o.jsx(iIe,{})})}),o.jsx(hn,{path:"fix",element:o.jsx(wn,{allowedRoles:["admin"],children:o.jsx(rIe,{})})}),o.jsx(hn,{path:"transactionclose",element:o.jsx(wn,{allowedRoles:["admin"],children:o.jsx(XSe,{})})}),o.jsx(hn,{path:"billhistoric",element:o.jsx(wn,{allowedRoles:["admin"],children:o.jsx(MSe,{})})}),o.jsx(hn,{path:"users",element:o.jsx(wn,{allowedRoles:["admin"],children:o.jsx(LSe,{})})}),o.jsx(hn,{path:"products",element:o.jsx(wn,{allowedRoles:["admin"],children:o.jsx(USe,{})})}),o.jsx(hn,{path:"customersPollo",element:o.jsx(wn,{allowedRoles:["admin","vendedor_pollo","supervisor_pollo","contador"],children:o.jsx(RIe,{role:r,roles:a,currentUserEmail:h,sellerPolloId:i})})}),o.jsx(hn,{path:"datacenter",element:o.jsx(wn,{allowedRoles:["admin","vendedor_dulces"],children:o.jsx(TUe,{})})}),o.jsx(hn,{path:"productsCandies",element:o.jsx(wn,{allowedRoles:["admin","vendedor_dulces"],children:o.jsx(kLe,{})})}),o.jsx(hn,{path:"mainordersCandies",element:o.jsx(wn,{allowedRoles:["admin","vendedor_dulces"],children:o.jsx(pUe,{})})}),o.jsx(hn,{path:"productsPricesCandies",element:o.jsx(wn,{allowedRoles:["admin","vendedor_dulces"],children:o.jsx(Lrt,{})})}),o.jsx(hn,{path:"inventoryMainOrderCandies",element:o.jsx(wn,{allowedRoles:["admin","vendedor_dulces"],children:o.jsx(gUe,{})})}),o.jsx(hn,{path:"inventoryCandies",element:o.jsx(wn,{allowedRoles:["admin","vendedor_dulces"],children:o.jsx(QLe,{})})}),o.jsx(hn,{path:"billingsCandies",element:o.jsx(wn,{allowedRoles:["admin","vendedor_dulces"],children:o.jsx(EUe,{})})}),o.jsx(hn,{path:"cashDeliveries",element:o.jsx(wn,{allowedRoles:["admin"],children:o.jsx(Ort,{})})}),o.jsx(hn,{path:"customersCandies",element:o.jsx(wn,{allowedRoles:["admin","vendedor_dulces"],children:o.jsx(VLe,{role:r,roles:a,currentUserEmail:h,sellerCandyId:i})})}),o.jsx(hn,{path:"salesCandies",element:o.jsx(wn,{allowedRoles:["admin","vendedor_dulces"],children:o.jsx(zLe,{role:r,roles:a,currentUserEmail:h,sellerCandyId:i})})}),o.jsx(hn,{path:"expensesCandies",element:o.jsx(wn,{allowedRoles:["admin","vendedor_dulces"],children:o.jsx(WLe,{})})}),o.jsx(hn,{path:"dashboardCandies",element:o.jsx(wn,{allowedRoles:["admin","vendedor_dulces"],children:o.jsx(aUe,{})})}),o.jsx(hn,{path:"transactionCandies",element:o.jsx(wn,{allowedRoles:["admin","vendedor_dulces"],children:o.jsx(ZLe,{role:r,roles:a,currentUserEmail:h,sellerCandyId:i})})}),o.jsx(hn,{path:"vendorsCandies",element:o.jsx(wn,{allowedRoles:["admin","vendedor_dulces"],children:o.jsx(sUe,{})})}),o.jsx(hn,{path:"productsVendorsCandies",element:o.jsx(wn,{allowedRoles:["admin","vendedor_dulces"],children:o.jsx(dUe,{role:r,roles:a,currentUserEmail:h,sellerCandyId:i})})}),o.jsx(hn,{path:"cierreVentasCandies",element:o.jsx(wn,{allowedRoles:["admin","vendedor_dulces"],children:o.jsx(vUe,{role:r,roles:a,currentUserEmail:h,sellerCandyId:i})})}),o.jsx(hn,{path:"reporteCierresCandies",element:o.jsx(wn,{allowedRoles:["admin","vendedor_dulces"],children:o.jsx(IUe,{role:r,roles:a,currentUserEmail:h,sellerCandyId:i})})}),o.jsx(hn,{path:"consolidatedVendors",element:o.jsx(wn,{allowedRoles:["admin","vendedor_dulces"],children:o.jsx(CUe,{})})}),o.jsx(hn,{path:"salesClothes",element:o.jsx(wn,{allowedRoles:["admin","vendedor_ropa"],children:o.jsx(EIe,{})})}),o.jsx(hn,{path:"notebooksInventory",element:o.jsx(wn,{allowedRoles:["admin","vendedor_ropa"],children:o.jsx(Vrt,{})})}),o.jsx(hn,{path:"TransactionsReportClothes",element:o.jsx(wn,{allowedRoles:["admin","vendedor_ropa"],children:o.jsx(DIe,{})})}),o.jsx(hn,{path:"financialDashboardClothes",element:o.jsx(wn,{allowedRoles:["admin","vendedor_ropa"],children:o.jsx(jIe,{})})}),o.jsx(hn,{path:"ExpensesClothes",element:o.jsx(wn,{allowedRoles:["admin"],children:o.jsx(BIe,{})})}),o.jsx(hn,{path:"inventoryClothesBatches",element:o.jsx(wn,{allowedRoles:["admin"],children:o.jsx(uIe,{})})}),o.jsx(hn,{path:"productsClothes",element:o.jsx(wn,{allowedRoles:["admin","vendedor_ropa"],children:o.jsx(bIe,{})})}),o.jsx(hn,{path:"CustomersClothes",element:o.jsx(wn,{allowedRoles:["admin","vendedor_ropa"],children:o.jsx(NIe,{})})})]}),o.jsx(hn,{path:"/salesV2",element:o.jsx(wn,{allowedRoles:["admin","vendedor_pollo","contador"],children:o.jsx($Q,{user:t})})}),o.jsx(hn,{path:"*",element:o.jsx(nA,{to:"/"})})]})})}Xve.then(t=>{console.info("Auth persistence mode:",t)}).catch(()=>{}).finally(()=>{VB.createRoot(document.getElementById("root")).render(o.jsx(Lo.StrictMode,{children:o.jsx(zrt,{})}))});export{wa as _,Xrt as c,zA as g};
