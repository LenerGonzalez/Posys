var Gde=Object.defineProperty;var Kde=(t,e,r)=>e in t?Gde(t,e,{enumerable:!0,configurable:!0,writable:!0,value:r}):t[e]=r;var Cr=(t,e,r)=>Kde(t,typeof e!="symbol"?e+"":e,r);function qde(t,e){for(var r=0;r<e.length;r++){const n=e[r];if(typeof n!="string"&&!Array.isArray(n)){for(const a in n)if(a!=="default"&&!(a in t)){const s=Object.getOwnPropertyDescriptor(n,a);s&&Object.defineProperty(t,a,s.get?s:{enumerable:!0,get:()=>n[a]})}}}return Object.freeze(Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}))}(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const a of document.querySelectorAll('link[rel="modulepreload"]'))n(a);new MutationObserver(a=>{for(const s of a)if(s.type==="childList")for(const o of s.addedNodes)o.tagName==="LINK"&&o.rel==="modulepreload"&&n(o)}).observe(document,{childList:!0,subtree:!0});function r(a){const s={};return a.integrity&&(s.integrity=a.integrity),a.referrerPolicy&&(s.referrerPolicy=a.referrerPolicy),a.crossOrigin==="use-credentials"?s.credentials="include":a.crossOrigin==="anonymous"?s.credentials="omit":s.credentials="same-origin",s}function n(a){if(a.ep)return;a.ep=!0;const s=r(a);fetch(a.href,s)}})();var Dit=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};function IA(t){return t&&t.__esModule&&Object.prototype.hasOwnProperty.call(t,"default")?t.default:t}var lW={exports:{}},JI={},cW={exports:{}},ca={};/**
 * @license React
 * react.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var uw=Symbol.for("react.element"),zde=Symbol.for("react.portal"),Wde=Symbol.for("react.fragment"),Xde=Symbol.for("react.strict_mode"),Yde=Symbol.for("react.profiler"),Jde=Symbol.for("react.provider"),Zde=Symbol.for("react.context"),efe=Symbol.for("react.forward_ref"),tfe=Symbol.for("react.suspense"),rfe=Symbol.for("react.memo"),nfe=Symbol.for("react.lazy"),_L=Symbol.iterator;function afe(t){return t===null||typeof t!="object"?null:(t=_L&&t[_L]||t["@@iterator"],typeof t=="function"?t:null)}var uW={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},dW=Object.assign,fW={};function Zv(t,e,r){this.props=t,this.context=e,this.refs=fW,this.updater=r||uW}Zv.prototype.isReactComponent={};Zv.prototype.setState=function(t,e){if(typeof t!="object"&&typeof t!="function"&&t!=null)throw Error("setState(...): takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,t,e,"setState")};Zv.prototype.forceUpdate=function(t){this.updater.enqueueForceUpdate(this,t,"forceUpdate")};function hW(){}hW.prototype=Zv.prototype;function NO(t,e,r){this.props=t,this.context=e,this.refs=fW,this.updater=r||uW}var CO=NO.prototype=new hW;CO.constructor=NO;dW(CO,Zv.prototype);CO.isPureReactComponent=!0;var EL=Array.isArray,AW=Object.prototype.hasOwnProperty,_O={current:null},mW={key:!0,ref:!0,__self:!0,__source:!0};function pW(t,e,r){var n,a={},s=null,o=null;if(e!=null)for(n in e.ref!==void 0&&(o=e.ref),e.key!==void 0&&(s=""+e.key),e)AW.call(e,n)&&!mW.hasOwnProperty(n)&&(a[n]=e[n]);var l=arguments.length-2;if(l===1)a.children=r;else if(1<l){for(var c=Array(l),u=0;u<l;u++)c[u]=arguments[u+2];a.children=c}if(t&&t.defaultProps)for(n in l=t.defaultProps,l)a[n]===void 0&&(a[n]=l[n]);return{$$typeof:uw,type:t,key:s,ref:o,props:a,_owner:_O.current}}function sfe(t,e){return{$$typeof:uw,type:t.type,key:e,ref:t.ref,props:t.props,_owner:t._owner}}function EO(t){return typeof t=="object"&&t!==null&&t.$$typeof===uw}function ife(t){var e={"=":"=0",":":"=2"};return"$"+t.replace(/[=:]/g,function(r){return e[r]})}var SL=/\/+/g;function $4(t,e){return typeof t=="object"&&t!==null&&t.key!=null?ife(""+t.key):e.toString(36)}function M_(t,e,r,n,a){var s=typeof t;(s==="undefined"||s==="boolean")&&(t=null);var o=!1;if(t===null)o=!0;else switch(s){case"string":case"number":o=!0;break;case"object":switch(t.$$typeof){case uw:case zde:o=!0}}if(o)return o=t,a=a(o),t=n===""?"."+$4(o,0):n,EL(a)?(r="",t!=null&&(r=t.replace(SL,"$&/")+"/"),M_(a,e,r,"",function(u){return u})):a!=null&&(EO(a)&&(a=sfe(a,r+(!a.key||o&&o.key===a.key?"":(""+a.key).replace(SL,"$&/")+"/")+t)),e.push(a)),1;if(o=0,n=n===""?".":n+":",EL(t))for(var l=0;l<t.length;l++){s=t[l];var c=n+$4(s,l);o+=M_(s,e,r,c,a)}else if(c=afe(t),typeof c=="function")for(t=c.call(t),l=0;!(s=t.next()).done;)s=s.value,c=n+$4(s,l++),o+=M_(s,e,r,c,a);else if(s==="object")throw e=String(t),Error("Objects are not valid as a React child (found: "+(e==="[object Object]"?"object with keys {"+Object.keys(t).join(", ")+"}":e)+"). If you meant to render a collection of children, use an array instead.");return o}function ON(t,e,r){if(t==null)return t;var n=[],a=0;return M_(t,n,"","",function(s){return e.call(r,s,a++)}),n}function ofe(t){if(t._status===-1){var e=t._result;e=e(),e.then(function(r){(t._status===0||t._status===-1)&&(t._status=1,t._result=r)},function(r){(t._status===0||t._status===-1)&&(t._status=2,t._result=r)}),t._status===-1&&(t._status=0,t._result=e)}if(t._status===1)return t._result.default;throw t._result}var Tc={current:null},L_={transition:null},lfe={ReactCurrentDispatcher:Tc,ReactCurrentBatchConfig:L_,ReactCurrentOwner:_O};function gW(){throw Error("act(...) is not supported in production builds of React.")}ca.Children={map:ON,forEach:function(t,e,r){ON(t,function(){e.apply(this,arguments)},r)},count:function(t){var e=0;return ON(t,function(){e++}),e},toArray:function(t){return ON(t,function(e){return e})||[]},only:function(t){if(!EO(t))throw Error("React.Children.only expected to receive a single React element child.");return t}};ca.Component=Zv;ca.Fragment=Wde;ca.Profiler=Yde;ca.PureComponent=NO;ca.StrictMode=Xde;ca.Suspense=tfe;ca.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=lfe;ca.act=gW;ca.cloneElement=function(t,e,r){if(t==null)throw Error("React.cloneElement(...): The argument must be a React element, but you passed "+t+".");var n=dW({},t.props),a=t.key,s=t.ref,o=t._owner;if(e!=null){if(e.ref!==void 0&&(s=e.ref,o=_O.current),e.key!==void 0&&(a=""+e.key),t.type&&t.type.defaultProps)var l=t.type.defaultProps;for(c in e)AW.call(e,c)&&!mW.hasOwnProperty(c)&&(n[c]=e[c]===void 0&&l!==void 0?l[c]:e[c])}var c=arguments.length-2;if(c===1)n.children=r;else if(1<c){l=Array(c);for(var u=0;u<c;u++)l[u]=arguments[u+2];n.children=l}return{$$typeof:uw,type:t.type,key:a,ref:s,props:n,_owner:o}};ca.createContext=function(t){return t={$$typeof:Zde,_currentValue:t,_currentValue2:t,_threadCount:0,Provider:null,Consumer:null,_defaultValue:null,_globalName:null},t.Provider={$$typeof:Jde,_context:t},t.Consumer=t};ca.createElement=pW;ca.createFactory=function(t){var e=pW.bind(null,t);return e.type=t,e};ca.createRef=function(){return{current:null}};ca.forwardRef=function(t){return{$$typeof:efe,render:t}};ca.isValidElement=EO;ca.lazy=function(t){return{$$typeof:nfe,_payload:{_status:-1,_result:t},_init:ofe}};ca.memo=function(t,e){return{$$typeof:rfe,type:t,compare:e===void 0?null:e}};ca.startTransition=function(t){var e=L_.transition;L_.transition={};try{t()}finally{L_.transition=e}};ca.unstable_act=gW;ca.useCallback=function(t,e){return Tc.current.useCallback(t,e)};ca.useContext=function(t){return Tc.current.useContext(t)};ca.useDebugValue=function(){};ca.useDeferredValue=function(t){return Tc.current.useDeferredValue(t)};ca.useEffect=function(t,e){return Tc.current.useEffect(t,e)};ca.useId=function(){return Tc.current.useId()};ca.useImperativeHandle=function(t,e,r){return Tc.current.useImperativeHandle(t,e,r)};ca.useInsertionEffect=function(t,e){return Tc.current.useInsertionEffect(t,e)};ca.useLayoutEffect=function(t,e){return Tc.current.useLayoutEffect(t,e)};ca.useMemo=function(t,e){return Tc.current.useMemo(t,e)};ca.useReducer=function(t,e,r){return Tc.current.useReducer(t,e,r)};ca.useRef=function(t){return Tc.current.useRef(t)};ca.useState=function(t){return Tc.current.useState(t)};ca.useSyncExternalStore=function(t,e,r){return Tc.current.useSyncExternalStore(t,e,r)};ca.useTransition=function(){return Tc.current.useTransition()};ca.version="18.3.1";cW.exports=ca;var g=cW.exports;const Wo=IA(g),cfe=qde({__proto__:null,default:Wo},[g]);/**
 * @license React
 * react-jsx-runtime.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var ufe=g,dfe=Symbol.for("react.element"),ffe=Symbol.for("react.fragment"),hfe=Object.prototype.hasOwnProperty,Afe=ufe.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,mfe={key:!0,ref:!0,__self:!0,__source:!0};function xW(t,e,r){var n,a={},s=null,o=null;r!==void 0&&(s=""+r),e.key!==void 0&&(s=""+e.key),e.ref!==void 0&&(o=e.ref);for(n in e)hfe.call(e,n)&&!mfe.hasOwnProperty(n)&&(a[n]=e[n]);if(t&&t.defaultProps)for(n in e=t.defaultProps,e)a[n]===void 0&&(a[n]=e[n]);return{$$typeof:dfe,type:t,key:s,ref:o,props:a,_owner:Afe.current}}JI.Fragment=ffe;JI.jsx=xW;JI.jsxs=xW;lW.exports=JI;var i=lW.exports,RB={},vW={exports:{}},Gu={},yW={exports:{}},bW={};/**
 * @license React
 * scheduler.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */(function(t){function e(ve,ae){var Pe=ve.length;ve.push(ae);e:for(;0<Pe;){var ke=Pe-1>>>1,O=ve[ke];if(0<a(O,ae))ve[ke]=ae,ve[Pe]=O,Pe=ke;else break e}}function r(ve){return ve.length===0?null:ve[0]}function n(ve){if(ve.length===0)return null;var ae=ve[0],Pe=ve.pop();if(Pe!==ae){ve[0]=Pe;e:for(var ke=0,O=ve.length,G=O>>>1;ke<G;){var z=2*(ke+1)-1,U=ve[z],Y=z+1,ee=ve[Y];if(0>a(U,Pe))Y<O&&0>a(ee,U)?(ve[ke]=ee,ve[Y]=Pe,ke=Y):(ve[ke]=U,ve[z]=Pe,ke=z);else if(Y<O&&0>a(ee,Pe))ve[ke]=ee,ve[Y]=Pe,ke=Y;else break e}}return ae}function a(ve,ae){var Pe=ve.sortIndex-ae.sortIndex;return Pe!==0?Pe:ve.id-ae.id}if(typeof performance=="object"&&typeof performance.now=="function"){var s=performance;t.unstable_now=function(){return s.now()}}else{var o=Date,l=o.now();t.unstable_now=function(){return o.now()-l}}var c=[],u=[],d=1,f=null,A=3,h=!1,m=!1,p=!1,x=typeof setTimeout=="function"?setTimeout:null,v=typeof clearTimeout=="function"?clearTimeout:null,y=typeof setImmediate<"u"?setImmediate:null;typeof navigator<"u"&&navigator.scheduling!==void 0&&navigator.scheduling.isInputPending!==void 0&&navigator.scheduling.isInputPending.bind(navigator.scheduling);function b(ve){for(var ae=r(u);ae!==null;){if(ae.callback===null)n(u);else if(ae.startTime<=ve)n(u),ae.sortIndex=ae.expirationTime,e(c,ae);else break;ae=r(u)}}function w(ve){if(p=!1,b(ve),!m)if(r(c)!==null)m=!0,pe(j);else{var ae=r(u);ae!==null&&he(w,ae.startTime-ve)}}function j(ve,ae){m=!1,p&&(p=!1,v(S),S=-1),h=!0;var Pe=A;try{for(b(ae),f=r(c);f!==null&&(!(f.expirationTime>ae)||ve&&!k());){var ke=f.callback;if(typeof ke=="function"){f.callback=null,A=f.priorityLevel;var O=ke(f.expirationTime<=ae);ae=t.unstable_now(),typeof O=="function"?f.callback=O:f===r(c)&&n(c),b(ae)}else n(c);f=r(c)}if(f!==null)var G=!0;else{var z=r(u);z!==null&&he(w,z.startTime-ae),G=!1}return G}finally{f=null,A=Pe,h=!1}}var I=!1,_=null,S=-1,E=5,T=-1;function k(){return!(t.unstable_now()-T<E)}function B(){if(_!==null){var ve=t.unstable_now();T=ve;var ae=!0;try{ae=_(!0,ve)}finally{ae?D():(I=!1,_=null)}}else I=!1}var D;if(typeof y=="function")D=function(){y(B)};else if(typeof MessageChannel<"u"){var X=new MessageChannel,me=X.port2;X.port1.onmessage=B,D=function(){me.postMessage(null)}}else D=function(){x(B,0)};function pe(ve){_=ve,I||(I=!0,D())}function he(ve,ae){S=x(function(){ve(t.unstable_now())},ae)}t.unstable_IdlePriority=5,t.unstable_ImmediatePriority=1,t.unstable_LowPriority=4,t.unstable_NormalPriority=3,t.unstable_Profiling=null,t.unstable_UserBlockingPriority=2,t.unstable_cancelCallback=function(ve){ve.callback=null},t.unstable_continueExecution=function(){m||h||(m=!0,pe(j))},t.unstable_forceFrameRate=function(ve){0>ve||125<ve?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):E=0<ve?Math.floor(1e3/ve):5},t.unstable_getCurrentPriorityLevel=function(){return A},t.unstable_getFirstCallbackNode=function(){return r(c)},t.unstable_next=function(ve){switch(A){case 1:case 2:case 3:var ae=3;break;default:ae=A}var Pe=A;A=ae;try{return ve()}finally{A=Pe}},t.unstable_pauseExecution=function(){},t.unstable_requestPaint=function(){},t.unstable_runWithPriority=function(ve,ae){switch(ve){case 1:case 2:case 3:case 4:case 5:break;default:ve=3}var Pe=A;A=ve;try{return ae()}finally{A=Pe}},t.unstable_scheduleCallback=function(ve,ae,Pe){var ke=t.unstable_now();switch(typeof Pe=="object"&&Pe!==null?(Pe=Pe.delay,Pe=typeof Pe=="number"&&0<Pe?ke+Pe:ke):Pe=ke,ve){case 1:var O=-1;break;case 2:O=250;break;case 5:O=1073741823;break;case 4:O=1e4;break;default:O=5e3}return O=Pe+O,ve={id:d++,callback:ae,priorityLevel:ve,startTime:Pe,expirationTime:O,sortIndex:-1},Pe>ke?(ve.sortIndex=Pe,e(u,ve),r(c)===null&&ve===r(u)&&(p?(v(S),S=-1):p=!0,he(w,Pe-ke))):(ve.sortIndex=O,e(c,ve),m||h||(m=!0,pe(j))),ve},t.unstable_shouldYield=k,t.unstable_wrapCallback=function(ve){var ae=A;return function(){var Pe=A;A=ae;try{return ve.apply(this,arguments)}finally{A=Pe}}}})(bW);yW.exports=bW;var pfe=yW.exports;/**
 * @license React
 * react-dom.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var gfe=g,Uu=pfe;function Br(t){for(var e="https://reactjs.org/docs/error-decoder.html?invariant="+t,r=1;r<arguments.length;r++)e+="&args[]="+encodeURIComponent(arguments[r]);return"Minified React error #"+t+"; visit "+e+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var wW=new Set,Vb={};function Eg(t,e){bv(t,e),bv(t+"Capture",e)}function bv(t,e){for(Vb[t]=e,t=0;t<e.length;t++)wW.add(e[t])}var uA=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),MB=Object.prototype.hasOwnProperty,xfe=/^[:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD][:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\-.0-9\u00B7\u0300-\u036F\u203F-\u2040]*$/,IL={},jL={};function vfe(t){return MB.call(jL,t)?!0:MB.call(IL,t)?!1:xfe.test(t)?jL[t]=!0:(IL[t]=!0,!1)}function yfe(t,e,r,n){if(r!==null&&r.type===0)return!1;switch(typeof e){case"function":case"symbol":return!0;case"boolean":return n?!1:r!==null?!r.acceptsBooleans:(t=t.toLowerCase().slice(0,5),t!=="data-"&&t!=="aria-");default:return!1}}function bfe(t,e,r,n){if(e===null||typeof e>"u"||yfe(t,e,r,n))return!0;if(n)return!1;if(r!==null)switch(r.type){case 3:return!e;case 4:return e===!1;case 5:return isNaN(e);case 6:return isNaN(e)||1>e}return!1}function kc(t,e,r,n,a,s,o){this.acceptsBooleans=e===2||e===3||e===4,this.attributeName=n,this.attributeNamespace=a,this.mustUseProperty=r,this.propertyName=t,this.type=e,this.sanitizeURL=s,this.removeEmptyString=o}var Bl={};"children dangerouslySetInnerHTML defaultValue defaultChecked innerHTML suppressContentEditableWarning suppressHydrationWarning style".split(" ").forEach(function(t){Bl[t]=new kc(t,0,!1,t,null,!1,!1)});[["acceptCharset","accept-charset"],["className","class"],["htmlFor","for"],["httpEquiv","http-equiv"]].forEach(function(t){var e=t[0];Bl[e]=new kc(e,1,!1,t[1],null,!1,!1)});["contentEditable","draggable","spellCheck","value"].forEach(function(t){Bl[t]=new kc(t,2,!1,t.toLowerCase(),null,!1,!1)});["autoReverse","externalResourcesRequired","focusable","preserveAlpha"].forEach(function(t){Bl[t]=new kc(t,2,!1,t,null,!1,!1)});"allowFullScreen async autoFocus autoPlay controls default defer disabled disablePictureInPicture disableRemotePlayback formNoValidate hidden loop noModule noValidate open playsInline readOnly required reversed scoped seamless itemScope".split(" ").forEach(function(t){Bl[t]=new kc(t,3,!1,t.toLowerCase(),null,!1,!1)});["checked","multiple","muted","selected"].forEach(function(t){Bl[t]=new kc(t,3,!0,t,null,!1,!1)});["capture","download"].forEach(function(t){Bl[t]=new kc(t,4,!1,t,null,!1,!1)});["cols","rows","size","span"].forEach(function(t){Bl[t]=new kc(t,6,!1,t,null,!1,!1)});["rowSpan","start"].forEach(function(t){Bl[t]=new kc(t,5,!1,t.toLowerCase(),null,!1,!1)});var SO=/[\-:]([a-z])/g;function IO(t){return t[1].toUpperCase()}"accent-height alignment-baseline arabic-form baseline-shift cap-height clip-path clip-rule color-interpolation color-interpolation-filters color-profile color-rendering dominant-baseline enable-background fill-opacity fill-rule flood-color flood-opacity font-family font-size font-size-adjust font-stretch font-style font-variant font-weight glyph-name glyph-orientation-horizontal glyph-orientation-vertical horiz-adv-x horiz-origin-x image-rendering letter-spacing lighting-color marker-end marker-mid marker-start overline-position overline-thickness paint-order panose-1 pointer-events rendering-intent shape-rendering stop-color stop-opacity strikethrough-position strikethrough-thickness stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width text-anchor text-decoration text-rendering underline-position underline-thickness unicode-bidi unicode-range units-per-em v-alphabetic v-hanging v-ideographic v-mathematical vector-effect vert-adv-y vert-origin-x vert-origin-y word-spacing writing-mode xmlns:xlink x-height".split(" ").forEach(function(t){var e=t.replace(SO,IO);Bl[e]=new kc(e,1,!1,t,null,!1,!1)});"xlink:actuate xlink:arcrole xlink:role xlink:show xlink:title xlink:type".split(" ").forEach(function(t){var e=t.replace(SO,IO);Bl[e]=new kc(e,1,!1,t,"http://www.w3.org/1999/xlink",!1,!1)});["xml:base","xml:lang","xml:space"].forEach(function(t){var e=t.replace(SO,IO);Bl[e]=new kc(e,1,!1,t,"http://www.w3.org/XML/1998/namespace",!1,!1)});["tabIndex","crossOrigin"].forEach(function(t){Bl[t]=new kc(t,1,!1,t.toLowerCase(),null,!1,!1)});Bl.xlinkHref=new kc("xlinkHref",1,!1,"xlink:href","http://www.w3.org/1999/xlink",!0,!1);["src","href","action","formAction"].forEach(function(t){Bl[t]=new kc(t,1,!1,t.toLowerCase(),null,!0,!0)});function jO(t,e,r,n){var a=Bl.hasOwnProperty(e)?Bl[e]:null;(a!==null?a.type!==0:n||!(2<e.length)||e[0]!=="o"&&e[0]!=="O"||e[1]!=="n"&&e[1]!=="N")&&(bfe(e,r,a,n)&&(r=null),n||a===null?vfe(e)&&(r===null?t.removeAttribute(e):t.setAttribute(e,""+r)):a.mustUseProperty?t[a.propertyName]=r===null?a.type===3?!1:"":r:(e=a.attributeName,n=a.attributeNamespace,r===null?t.removeAttribute(e):(a=a.type,r=a===3||a===4&&r===!0?"":""+r,n?t.setAttributeNS(n,e,r):t.setAttribute(e,r))))}var jA=gfe.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,DN=Symbol.for("react.element"),Ox=Symbol.for("react.portal"),Dx=Symbol.for("react.fragment"),PO=Symbol.for("react.strict_mode"),LB=Symbol.for("react.profiler"),NW=Symbol.for("react.provider"),CW=Symbol.for("react.context"),BO=Symbol.for("react.forward_ref"),UB=Symbol.for("react.suspense"),QB=Symbol.for("react.suspense_list"),TO=Symbol.for("react.memo"),C0=Symbol.for("react.lazy"),_W=Symbol.for("react.offscreen"),PL=Symbol.iterator;function q1(t){return t===null||typeof t!="object"?null:(t=PL&&t[PL]||t["@@iterator"],typeof t=="function"?t:null)}var ui=Object.assign,G4;function By(t){if(G4===void 0)try{throw Error()}catch(r){var e=r.stack.trim().match(/\n( *(at )?)/);G4=e&&e[1]||""}return`
`+G4+t}var K4=!1;function q4(t,e){if(!t||K4)return"";K4=!0;var r=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{if(e)if(e=function(){throw Error()},Object.defineProperty(e.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(e,[])}catch(u){var n=u}Reflect.construct(t,[],e)}else{try{e.call()}catch(u){n=u}t.call(e.prototype)}else{try{throw Error()}catch(u){n=u}t()}}catch(u){if(u&&n&&typeof u.stack=="string"){for(var a=u.stack.split(`
`),s=n.stack.split(`
`),o=a.length-1,l=s.length-1;1<=o&&0<=l&&a[o]!==s[l];)l--;for(;1<=o&&0<=l;o--,l--)if(a[o]!==s[l]){if(o!==1||l!==1)do if(o--,l--,0>l||a[o]!==s[l]){var c=`
`+a[o].replace(" at new "," at ");return t.displayName&&c.includes("<anonymous>")&&(c=c.replace("<anonymous>",t.displayName)),c}while(1<=o&&0<=l);break}}}finally{K4=!1,Error.prepareStackTrace=r}return(t=t?t.displayName||t.name:"")?By(t):""}function wfe(t){switch(t.tag){case 5:return By(t.type);case 16:return By("Lazy");case 13:return By("Suspense");case 19:return By("SuspenseList");case 0:case 2:case 15:return t=q4(t.type,!1),t;case 11:return t=q4(t.type.render,!1),t;case 1:return t=q4(t.type,!0),t;default:return""}}function VB(t){if(t==null)return null;if(typeof t=="function")return t.displayName||t.name||null;if(typeof t=="string")return t;switch(t){case Dx:return"Fragment";case Ox:return"Portal";case LB:return"Profiler";case PO:return"StrictMode";case UB:return"Suspense";case QB:return"SuspenseList"}if(typeof t=="object")switch(t.$$typeof){case CW:return(t.displayName||"Context")+".Consumer";case NW:return(t._context.displayName||"Context")+".Provider";case BO:var e=t.render;return t=t.displayName,t||(t=e.displayName||e.name||"",t=t!==""?"ForwardRef("+t+")":"ForwardRef"),t;case TO:return e=t.displayName||null,e!==null?e:VB(t.type)||"Memo";case C0:e=t._payload,t=t._init;try{return VB(t(e))}catch{}}return null}function Nfe(t){var e=t.type;switch(t.tag){case 24:return"Cache";case 9:return(e.displayName||"Context")+".Consumer";case 10:return(e._context.displayName||"Context")+".Provider";case 18:return"DehydratedFragment";case 11:return t=e.render,t=t.displayName||t.name||"",e.displayName||(t!==""?"ForwardRef("+t+")":"ForwardRef");case 7:return"Fragment";case 5:return e;case 4:return"Portal";case 3:return"Root";case 6:return"Text";case 16:return VB(e);case 8:return e===PO?"StrictMode":"Mode";case 22:return"Offscreen";case 12:return"Profiler";case 21:return"Scope";case 13:return"Suspense";case 19:return"SuspenseList";case 25:return"TracingMarker";case 1:case 0:case 17:case 2:case 14:case 15:if(typeof e=="function")return e.displayName||e.name||null;if(typeof e=="string")return e}return null}function mm(t){switch(typeof t){case"boolean":case"number":case"string":case"undefined":return t;case"object":return t;default:return""}}function EW(t){var e=t.type;return(t=t.nodeName)&&t.toLowerCase()==="input"&&(e==="checkbox"||e==="radio")}function Cfe(t){var e=EW(t)?"checked":"value",r=Object.getOwnPropertyDescriptor(t.constructor.prototype,e),n=""+t[e];if(!t.hasOwnProperty(e)&&typeof r<"u"&&typeof r.get=="function"&&typeof r.set=="function"){var a=r.get,s=r.set;return Object.defineProperty(t,e,{configurable:!0,get:function(){return a.call(this)},set:function(o){n=""+o,s.call(this,o)}}),Object.defineProperty(t,e,{enumerable:r.enumerable}),{getValue:function(){return n},setValue:function(o){n=""+o},stopTracking:function(){t._valueTracker=null,delete t[e]}}}}function RN(t){t._valueTracker||(t._valueTracker=Cfe(t))}function SW(t){if(!t)return!1;var e=t._valueTracker;if(!e)return!0;var r=e.getValue(),n="";return t&&(n=EW(t)?t.checked?"true":"false":t.value),t=n,t!==r?(e.setValue(t),!0):!1}function SE(t){if(t=t||(typeof document<"u"?document:void 0),typeof t>"u")return null;try{return t.activeElement||t.body}catch{return t.body}}function HB(t,e){var r=e.checked;return ui({},e,{defaultChecked:void 0,defaultValue:void 0,value:void 0,checked:r??t._wrapperState.initialChecked})}function BL(t,e){var r=e.defaultValue==null?"":e.defaultValue,n=e.checked!=null?e.checked:e.defaultChecked;r=mm(e.value!=null?e.value:r),t._wrapperState={initialChecked:n,initialValue:r,controlled:e.type==="checkbox"||e.type==="radio"?e.checked!=null:e.value!=null}}function IW(t,e){e=e.checked,e!=null&&jO(t,"checked",e,!1)}function $B(t,e){IW(t,e);var r=mm(e.value),n=e.type;if(r!=null)n==="number"?(r===0&&t.value===""||t.value!=r)&&(t.value=""+r):t.value!==""+r&&(t.value=""+r);else if(n==="submit"||n==="reset"){t.removeAttribute("value");return}e.hasOwnProperty("value")?GB(t,e.type,r):e.hasOwnProperty("defaultValue")&&GB(t,e.type,mm(e.defaultValue)),e.checked==null&&e.defaultChecked!=null&&(t.defaultChecked=!!e.defaultChecked)}function TL(t,e,r){if(e.hasOwnProperty("value")||e.hasOwnProperty("defaultValue")){var n=e.type;if(!(n!=="submit"&&n!=="reset"||e.value!==void 0&&e.value!==null))return;e=""+t._wrapperState.initialValue,r||e===t.value||(t.value=e),t.defaultValue=e}r=t.name,r!==""&&(t.name=""),t.defaultChecked=!!t._wrapperState.initialChecked,r!==""&&(t.name=r)}function GB(t,e,r){(e!=="number"||SE(t.ownerDocument)!==t)&&(r==null?t.defaultValue=""+t._wrapperState.initialValue:t.defaultValue!==""+r&&(t.defaultValue=""+r))}var Ty=Array.isArray;function nv(t,e,r,n){if(t=t.options,e){e={};for(var a=0;a<r.length;a++)e["$"+r[a]]=!0;for(r=0;r<t.length;r++)a=e.hasOwnProperty("$"+t[r].value),t[r].selected!==a&&(t[r].selected=a),a&&n&&(t[r].defaultSelected=!0)}else{for(r=""+mm(r),e=null,a=0;a<t.length;a++){if(t[a].value===r){t[a].selected=!0,n&&(t[a].defaultSelected=!0);return}e!==null||t[a].disabled||(e=t[a])}e!==null&&(e.selected=!0)}}function KB(t,e){if(e.dangerouslySetInnerHTML!=null)throw Error(Br(91));return ui({},e,{value:void 0,defaultValue:void 0,children:""+t._wrapperState.initialValue})}function kL(t,e){var r=e.value;if(r==null){if(r=e.children,e=e.defaultValue,r!=null){if(e!=null)throw Error(Br(92));if(Ty(r)){if(1<r.length)throw Error(Br(93));r=r[0]}e=r}e==null&&(e=""),r=e}t._wrapperState={initialValue:mm(r)}}function jW(t,e){var r=mm(e.value),n=mm(e.defaultValue);r!=null&&(r=""+r,r!==t.value&&(t.value=r),e.defaultValue==null&&t.defaultValue!==r&&(t.defaultValue=r)),n!=null&&(t.defaultValue=""+n)}function FL(t){var e=t.textContent;e===t._wrapperState.initialValue&&e!==""&&e!==null&&(t.value=e)}function PW(t){switch(t){case"svg":return"http://www.w3.org/2000/svg";case"math":return"http://www.w3.org/1998/Math/MathML";default:return"http://www.w3.org/1999/xhtml"}}function qB(t,e){return t==null||t==="http://www.w3.org/1999/xhtml"?PW(e):t==="http://www.w3.org/2000/svg"&&e==="foreignObject"?"http://www.w3.org/1999/xhtml":t}var MN,BW=function(t){return typeof MSApp<"u"&&MSApp.execUnsafeLocalFunction?function(e,r,n,a){MSApp.execUnsafeLocalFunction(function(){return t(e,r,n,a)})}:t}(function(t,e){if(t.namespaceURI!=="http://www.w3.org/2000/svg"||"innerHTML"in t)t.innerHTML=e;else{for(MN=MN||document.createElement("div"),MN.innerHTML="<svg>"+e.valueOf().toString()+"</svg>",e=MN.firstChild;t.firstChild;)t.removeChild(t.firstChild);for(;e.firstChild;)t.appendChild(e.firstChild)}});function Hb(t,e){if(e){var r=t.firstChild;if(r&&r===t.lastChild&&r.nodeType===3){r.nodeValue=e;return}}t.textContent=e}var nb={animationIterationCount:!0,aspectRatio:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridArea:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},_fe=["Webkit","ms","Moz","O"];Object.keys(nb).forEach(function(t){_fe.forEach(function(e){e=e+t.charAt(0).toUpperCase()+t.substring(1),nb[e]=nb[t]})});function TW(t,e,r){return e==null||typeof e=="boolean"||e===""?"":r||typeof e!="number"||e===0||nb.hasOwnProperty(t)&&nb[t]?(""+e).trim():e+"px"}function kW(t,e){t=t.style;for(var r in e)if(e.hasOwnProperty(r)){var n=r.indexOf("--")===0,a=TW(r,e[r],n);r==="float"&&(r="cssFloat"),n?t.setProperty(r,a):t[r]=a}}var Efe=ui({menuitem:!0},{area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0});function zB(t,e){if(e){if(Efe[t]&&(e.children!=null||e.dangerouslySetInnerHTML!=null))throw Error(Br(137,t));if(e.dangerouslySetInnerHTML!=null){if(e.children!=null)throw Error(Br(60));if(typeof e.dangerouslySetInnerHTML!="object"||!("__html"in e.dangerouslySetInnerHTML))throw Error(Br(61))}if(e.style!=null&&typeof e.style!="object")throw Error(Br(62))}}function WB(t,e){if(t.indexOf("-")===-1)return typeof e.is=="string";switch(t){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var XB=null;function kO(t){return t=t.target||t.srcElement||window,t.correspondingUseElement&&(t=t.correspondingUseElement),t.nodeType===3?t.parentNode:t}var YB=null,av=null,sv=null;function OL(t){if(t=hw(t)){if(typeof YB!="function")throw Error(Br(280));var e=t.stateNode;e&&(e=nj(e),YB(t.stateNode,t.type,e))}}function FW(t){av?sv?sv.push(t):sv=[t]:av=t}function OW(){if(av){var t=av,e=sv;if(sv=av=null,OL(t),e)for(t=0;t<e.length;t++)OL(e[t])}}function DW(t,e){return t(e)}function RW(){}var z4=!1;function MW(t,e,r){if(z4)return t(e,r);z4=!0;try{return DW(t,e,r)}finally{z4=!1,(av!==null||sv!==null)&&(RW(),OW())}}function $b(t,e){var r=t.stateNode;if(r===null)return null;var n=nj(r);if(n===null)return null;r=n[e];e:switch(e){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(n=!n.disabled)||(t=t.type,n=!(t==="button"||t==="input"||t==="select"||t==="textarea")),t=!n;break e;default:t=!1}if(t)return null;if(r&&typeof r!="function")throw Error(Br(231,e,typeof r));return r}var JB=!1;if(uA)try{var z1={};Object.defineProperty(z1,"passive",{get:function(){JB=!0}}),window.addEventListener("test",z1,z1),window.removeEventListener("test",z1,z1)}catch{JB=!1}function Sfe(t,e,r,n,a,s,o,l,c){var u=Array.prototype.slice.call(arguments,3);try{e.apply(r,u)}catch(d){this.onError(d)}}var ab=!1,IE=null,jE=!1,ZB=null,Ife={onError:function(t){ab=!0,IE=t}};function jfe(t,e,r,n,a,s,o,l,c){ab=!1,IE=null,Sfe.apply(Ife,arguments)}function Pfe(t,e,r,n,a,s,o,l,c){if(jfe.apply(this,arguments),ab){if(ab){var u=IE;ab=!1,IE=null}else throw Error(Br(198));jE||(jE=!0,ZB=u)}}function Sg(t){var e=t,r=t;if(t.alternate)for(;e.return;)e=e.return;else{t=e;do e=t,e.flags&4098&&(r=e.return),t=e.return;while(t)}return e.tag===3?r:null}function LW(t){if(t.tag===13){var e=t.memoizedState;if(e===null&&(t=t.alternate,t!==null&&(e=t.memoizedState)),e!==null)return e.dehydrated}return null}function DL(t){if(Sg(t)!==t)throw Error(Br(188))}function Bfe(t){var e=t.alternate;if(!e){if(e=Sg(t),e===null)throw Error(Br(188));return e!==t?null:t}for(var r=t,n=e;;){var a=r.return;if(a===null)break;var s=a.alternate;if(s===null){if(n=a.return,n!==null){r=n;continue}break}if(a.child===s.child){for(s=a.child;s;){if(s===r)return DL(a),t;if(s===n)return DL(a),e;s=s.sibling}throw Error(Br(188))}if(r.return!==n.return)r=a,n=s;else{for(var o=!1,l=a.child;l;){if(l===r){o=!0,r=a,n=s;break}if(l===n){o=!0,n=a,r=s;break}l=l.sibling}if(!o){for(l=s.child;l;){if(l===r){o=!0,r=s,n=a;break}if(l===n){o=!0,n=s,r=a;break}l=l.sibling}if(!o)throw Error(Br(189))}}if(r.alternate!==n)throw Error(Br(190))}if(r.tag!==3)throw Error(Br(188));return r.stateNode.current===r?t:e}function UW(t){return t=Bfe(t),t!==null?QW(t):null}function QW(t){if(t.tag===5||t.tag===6)return t;for(t=t.child;t!==null;){var e=QW(t);if(e!==null)return e;t=t.sibling}return null}var VW=Uu.unstable_scheduleCallback,RL=Uu.unstable_cancelCallback,Tfe=Uu.unstable_shouldYield,kfe=Uu.unstable_requestPaint,Ui=Uu.unstable_now,Ffe=Uu.unstable_getCurrentPriorityLevel,FO=Uu.unstable_ImmediatePriority,HW=Uu.unstable_UserBlockingPriority,PE=Uu.unstable_NormalPriority,Ofe=Uu.unstable_LowPriority,$W=Uu.unstable_IdlePriority,ZI=null,th=null;function Dfe(t){if(th&&typeof th.onCommitFiberRoot=="function")try{th.onCommitFiberRoot(ZI,t,void 0,(t.current.flags&128)===128)}catch{}}var Af=Math.clz32?Math.clz32:Lfe,Rfe=Math.log,Mfe=Math.LN2;function Lfe(t){return t>>>=0,t===0?32:31-(Rfe(t)/Mfe|0)|0}var LN=64,UN=4194304;function ky(t){switch(t&-t){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return t&4194240;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return t&130023424;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 1073741824;default:return t}}function BE(t,e){var r=t.pendingLanes;if(r===0)return 0;var n=0,a=t.suspendedLanes,s=t.pingedLanes,o=r&268435455;if(o!==0){var l=o&~a;l!==0?n=ky(l):(s&=o,s!==0&&(n=ky(s)))}else o=r&~a,o!==0?n=ky(o):s!==0&&(n=ky(s));if(n===0)return 0;if(e!==0&&e!==n&&!(e&a)&&(a=n&-n,s=e&-e,a>=s||a===16&&(s&4194240)!==0))return e;if(n&4&&(n|=r&16),e=t.entangledLanes,e!==0)for(t=t.entanglements,e&=n;0<e;)r=31-Af(e),a=1<<r,n|=t[r],e&=~a;return n}function Ufe(t,e){switch(t){case 1:case 2:case 4:return e+250;case 8:case 16:case 32:case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return e+5e3;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return-1;case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function Qfe(t,e){for(var r=t.suspendedLanes,n=t.pingedLanes,a=t.expirationTimes,s=t.pendingLanes;0<s;){var o=31-Af(s),l=1<<o,c=a[o];c===-1?(!(l&r)||l&n)&&(a[o]=Ufe(l,e)):c<=e&&(t.expiredLanes|=l),s&=~l}}function eT(t){return t=t.pendingLanes&-1073741825,t!==0?t:t&1073741824?1073741824:0}function GW(){var t=LN;return LN<<=1,!(LN&4194240)&&(LN=64),t}function W4(t){for(var e=[],r=0;31>r;r++)e.push(t);return e}function dw(t,e,r){t.pendingLanes|=e,e!==536870912&&(t.suspendedLanes=0,t.pingedLanes=0),t=t.eventTimes,e=31-Af(e),t[e]=r}function Vfe(t,e){var r=t.pendingLanes&~e;t.pendingLanes=e,t.suspendedLanes=0,t.pingedLanes=0,t.expiredLanes&=e,t.mutableReadLanes&=e,t.entangledLanes&=e,e=t.entanglements;var n=t.eventTimes;for(t=t.expirationTimes;0<r;){var a=31-Af(r),s=1<<a;e[a]=0,n[a]=-1,t[a]=-1,r&=~s}}function OO(t,e){var r=t.entangledLanes|=e;for(t=t.entanglements;r;){var n=31-Af(r),a=1<<n;a&e|t[n]&e&&(t[n]|=e),r&=~a}}var rs=0;function KW(t){return t&=-t,1<t?4<t?t&268435455?16:536870912:4:1}var qW,DO,zW,WW,XW,tT=!1,QN=[],Y0=null,J0=null,Z0=null,Gb=new Map,Kb=new Map,P0=[],Hfe="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset submit".split(" ");function ML(t,e){switch(t){case"focusin":case"focusout":Y0=null;break;case"dragenter":case"dragleave":J0=null;break;case"mouseover":case"mouseout":Z0=null;break;case"pointerover":case"pointerout":Gb.delete(e.pointerId);break;case"gotpointercapture":case"lostpointercapture":Kb.delete(e.pointerId)}}function W1(t,e,r,n,a,s){return t===null||t.nativeEvent!==s?(t={blockedOn:e,domEventName:r,eventSystemFlags:n,nativeEvent:s,targetContainers:[a]},e!==null&&(e=hw(e),e!==null&&DO(e)),t):(t.eventSystemFlags|=n,e=t.targetContainers,a!==null&&e.indexOf(a)===-1&&e.push(a),t)}function $fe(t,e,r,n,a){switch(e){case"focusin":return Y0=W1(Y0,t,e,r,n,a),!0;case"dragenter":return J0=W1(J0,t,e,r,n,a),!0;case"mouseover":return Z0=W1(Z0,t,e,r,n,a),!0;case"pointerover":var s=a.pointerId;return Gb.set(s,W1(Gb.get(s)||null,t,e,r,n,a)),!0;case"gotpointercapture":return s=a.pointerId,Kb.set(s,W1(Kb.get(s)||null,t,e,r,n,a)),!0}return!1}function YW(t){var e=vp(t.target);if(e!==null){var r=Sg(e);if(r!==null){if(e=r.tag,e===13){if(e=LW(r),e!==null){t.blockedOn=e,XW(t.priority,function(){zW(r)});return}}else if(e===3&&r.stateNode.current.memoizedState.isDehydrated){t.blockedOn=r.tag===3?r.stateNode.containerInfo:null;return}}}t.blockedOn=null}function U_(t){if(t.blockedOn!==null)return!1;for(var e=t.targetContainers;0<e.length;){var r=rT(t.domEventName,t.eventSystemFlags,e[0],t.nativeEvent);if(r===null){r=t.nativeEvent;var n=new r.constructor(r.type,r);XB=n,r.target.dispatchEvent(n),XB=null}else return e=hw(r),e!==null&&DO(e),t.blockedOn=r,!1;e.shift()}return!0}function LL(t,e,r){U_(t)&&r.delete(e)}function Gfe(){tT=!1,Y0!==null&&U_(Y0)&&(Y0=null),J0!==null&&U_(J0)&&(J0=null),Z0!==null&&U_(Z0)&&(Z0=null),Gb.forEach(LL),Kb.forEach(LL)}function X1(t,e){t.blockedOn===e&&(t.blockedOn=null,tT||(tT=!0,Uu.unstable_scheduleCallback(Uu.unstable_NormalPriority,Gfe)))}function qb(t){function e(a){return X1(a,t)}if(0<QN.length){X1(QN[0],t);for(var r=1;r<QN.length;r++){var n=QN[r];n.blockedOn===t&&(n.blockedOn=null)}}for(Y0!==null&&X1(Y0,t),J0!==null&&X1(J0,t),Z0!==null&&X1(Z0,t),Gb.forEach(e),Kb.forEach(e),r=0;r<P0.length;r++)n=P0[r],n.blockedOn===t&&(n.blockedOn=null);for(;0<P0.length&&(r=P0[0],r.blockedOn===null);)YW(r),r.blockedOn===null&&P0.shift()}var iv=jA.ReactCurrentBatchConfig,TE=!0;function Kfe(t,e,r,n){var a=rs,s=iv.transition;iv.transition=null;try{rs=1,RO(t,e,r,n)}finally{rs=a,iv.transition=s}}function qfe(t,e,r,n){var a=rs,s=iv.transition;iv.transition=null;try{rs=4,RO(t,e,r,n)}finally{rs=a,iv.transition=s}}function RO(t,e,r,n){if(TE){var a=rT(t,e,r,n);if(a===null)s3(t,e,n,kE,r),ML(t,n);else if($fe(a,t,e,r,n))n.stopPropagation();else if(ML(t,n),e&4&&-1<Hfe.indexOf(t)){for(;a!==null;){var s=hw(a);if(s!==null&&qW(s),s=rT(t,e,r,n),s===null&&s3(t,e,n,kE,r),s===a)break;a=s}a!==null&&n.stopPropagation()}else s3(t,e,n,null,r)}}var kE=null;function rT(t,e,r,n){if(kE=null,t=kO(n),t=vp(t),t!==null)if(e=Sg(t),e===null)t=null;else if(r=e.tag,r===13){if(t=LW(e),t!==null)return t;t=null}else if(r===3){if(e.stateNode.current.memoizedState.isDehydrated)return e.tag===3?e.stateNode.containerInfo:null;t=null}else e!==t&&(t=null);return kE=t,null}function JW(t){switch(t){case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 1;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"toggle":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 4;case"message":switch(Ffe()){case FO:return 1;case HW:return 4;case PE:case Ofe:return 16;case $W:return 536870912;default:return 16}default:return 16}}var Q0=null,MO=null,Q_=null;function ZW(){if(Q_)return Q_;var t,e=MO,r=e.length,n,a="value"in Q0?Q0.value:Q0.textContent,s=a.length;for(t=0;t<r&&e[t]===a[t];t++);var o=r-t;for(n=1;n<=o&&e[r-n]===a[s-n];n++);return Q_=a.slice(t,1<n?1-n:void 0)}function V_(t){var e=t.keyCode;return"charCode"in t?(t=t.charCode,t===0&&e===13&&(t=13)):t=e,t===10&&(t=13),32<=t||t===13?t:0}function VN(){return!0}function UL(){return!1}function Ku(t){function e(r,n,a,s,o){this._reactName=r,this._targetInst=a,this.type=n,this.nativeEvent=s,this.target=o,this.currentTarget=null;for(var l in t)t.hasOwnProperty(l)&&(r=t[l],this[l]=r?r(s):s[l]);return this.isDefaultPrevented=(s.defaultPrevented!=null?s.defaultPrevented:s.returnValue===!1)?VN:UL,this.isPropagationStopped=UL,this}return ui(e.prototype,{preventDefault:function(){this.defaultPrevented=!0;var r=this.nativeEvent;r&&(r.preventDefault?r.preventDefault():typeof r.returnValue!="unknown"&&(r.returnValue=!1),this.isDefaultPrevented=VN)},stopPropagation:function(){var r=this.nativeEvent;r&&(r.stopPropagation?r.stopPropagation():typeof r.cancelBubble!="unknown"&&(r.cancelBubble=!0),this.isPropagationStopped=VN)},persist:function(){},isPersistent:VN}),e}var e1={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(t){return t.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},LO=Ku(e1),fw=ui({},e1,{view:0,detail:0}),zfe=Ku(fw),X4,Y4,Y1,ej=ui({},fw,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:UO,button:0,buttons:0,relatedTarget:function(t){return t.relatedTarget===void 0?t.fromElement===t.srcElement?t.toElement:t.fromElement:t.relatedTarget},movementX:function(t){return"movementX"in t?t.movementX:(t!==Y1&&(Y1&&t.type==="mousemove"?(X4=t.screenX-Y1.screenX,Y4=t.screenY-Y1.screenY):Y4=X4=0,Y1=t),X4)},movementY:function(t){return"movementY"in t?t.movementY:Y4}}),QL=Ku(ej),Wfe=ui({},ej,{dataTransfer:0}),Xfe=Ku(Wfe),Yfe=ui({},fw,{relatedTarget:0}),J4=Ku(Yfe),Jfe=ui({},e1,{animationName:0,elapsedTime:0,pseudoElement:0}),Zfe=Ku(Jfe),ehe=ui({},e1,{clipboardData:function(t){return"clipboardData"in t?t.clipboardData:window.clipboardData}}),the=Ku(ehe),rhe=ui({},e1,{data:0}),VL=Ku(rhe),nhe={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},ahe={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},she={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function ihe(t){var e=this.nativeEvent;return e.getModifierState?e.getModifierState(t):(t=she[t])?!!e[t]:!1}function UO(){return ihe}var ohe=ui({},fw,{key:function(t){if(t.key){var e=nhe[t.key]||t.key;if(e!=="Unidentified")return e}return t.type==="keypress"?(t=V_(t),t===13?"Enter":String.fromCharCode(t)):t.type==="keydown"||t.type==="keyup"?ahe[t.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:UO,charCode:function(t){return t.type==="keypress"?V_(t):0},keyCode:function(t){return t.type==="keydown"||t.type==="keyup"?t.keyCode:0},which:function(t){return t.type==="keypress"?V_(t):t.type==="keydown"||t.type==="keyup"?t.keyCode:0}}),lhe=Ku(ohe),che=ui({},ej,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),HL=Ku(che),uhe=ui({},fw,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:UO}),dhe=Ku(uhe),fhe=ui({},e1,{propertyName:0,elapsedTime:0,pseudoElement:0}),hhe=Ku(fhe),Ahe=ui({},ej,{deltaX:function(t){return"deltaX"in t?t.deltaX:"wheelDeltaX"in t?-t.wheelDeltaX:0},deltaY:function(t){return"deltaY"in t?t.deltaY:"wheelDeltaY"in t?-t.wheelDeltaY:"wheelDelta"in t?-t.wheelDelta:0},deltaZ:0,deltaMode:0}),mhe=Ku(Ahe),phe=[9,13,27,32],QO=uA&&"CompositionEvent"in window,sb=null;uA&&"documentMode"in document&&(sb=document.documentMode);var ghe=uA&&"TextEvent"in window&&!sb,eX=uA&&(!QO||sb&&8<sb&&11>=sb),$L=" ",GL=!1;function tX(t,e){switch(t){case"keyup":return phe.indexOf(e.keyCode)!==-1;case"keydown":return e.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function rX(t){return t=t.detail,typeof t=="object"&&"data"in t?t.data:null}var Rx=!1;function xhe(t,e){switch(t){case"compositionend":return rX(e);case"keypress":return e.which!==32?null:(GL=!0,$L);case"textInput":return t=e.data,t===$L&&GL?null:t;default:return null}}function vhe(t,e){if(Rx)return t==="compositionend"||!QO&&tX(t,e)?(t=ZW(),Q_=MO=Q0=null,Rx=!1,t):null;switch(t){case"paste":return null;case"keypress":if(!(e.ctrlKey||e.altKey||e.metaKey)||e.ctrlKey&&e.altKey){if(e.char&&1<e.char.length)return e.char;if(e.which)return String.fromCharCode(e.which)}return null;case"compositionend":return eX&&e.locale!=="ko"?null:e.data;default:return null}}var yhe={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function KL(t){var e=t&&t.nodeName&&t.nodeName.toLowerCase();return e==="input"?!!yhe[t.type]:e==="textarea"}function nX(t,e,r,n){FW(n),e=FE(e,"onChange"),0<e.length&&(r=new LO("onChange","change",null,r,n),t.push({event:r,listeners:e}))}var ib=null,zb=null;function bhe(t){AX(t,0)}function tj(t){var e=Ux(t);if(SW(e))return t}function whe(t,e){if(t==="change")return e}var aX=!1;if(uA){var Z4;if(uA){var e3="oninput"in document;if(!e3){var qL=document.createElement("div");qL.setAttribute("oninput","return;"),e3=typeof qL.oninput=="function"}Z4=e3}else Z4=!1;aX=Z4&&(!document.documentMode||9<document.documentMode)}function zL(){ib&&(ib.detachEvent("onpropertychange",sX),zb=ib=null)}function sX(t){if(t.propertyName==="value"&&tj(zb)){var e=[];nX(e,zb,t,kO(t)),MW(bhe,e)}}function Nhe(t,e,r){t==="focusin"?(zL(),ib=e,zb=r,ib.attachEvent("onpropertychange",sX)):t==="focusout"&&zL()}function Che(t){if(t==="selectionchange"||t==="keyup"||t==="keydown")return tj(zb)}function _he(t,e){if(t==="click")return tj(e)}function Ehe(t,e){if(t==="input"||t==="change")return tj(e)}function She(t,e){return t===e&&(t!==0||1/t===1/e)||t!==t&&e!==e}var yf=typeof Object.is=="function"?Object.is:She;function Wb(t,e){if(yf(t,e))return!0;if(typeof t!="object"||t===null||typeof e!="object"||e===null)return!1;var r=Object.keys(t),n=Object.keys(e);if(r.length!==n.length)return!1;for(n=0;n<r.length;n++){var a=r[n];if(!MB.call(e,a)||!yf(t[a],e[a]))return!1}return!0}function WL(t){for(;t&&t.firstChild;)t=t.firstChild;return t}function XL(t,e){var r=WL(t);t=0;for(var n;r;){if(r.nodeType===3){if(n=t+r.textContent.length,t<=e&&n>=e)return{node:r,offset:e-t};t=n}e:{for(;r;){if(r.nextSibling){r=r.nextSibling;break e}r=r.parentNode}r=void 0}r=WL(r)}}function iX(t,e){return t&&e?t===e?!0:t&&t.nodeType===3?!1:e&&e.nodeType===3?iX(t,e.parentNode):"contains"in t?t.contains(e):t.compareDocumentPosition?!!(t.compareDocumentPosition(e)&16):!1:!1}function oX(){for(var t=window,e=SE();e instanceof t.HTMLIFrameElement;){try{var r=typeof e.contentWindow.location.href=="string"}catch{r=!1}if(r)t=e.contentWindow;else break;e=SE(t.document)}return e}function VO(t){var e=t&&t.nodeName&&t.nodeName.toLowerCase();return e&&(e==="input"&&(t.type==="text"||t.type==="search"||t.type==="tel"||t.type==="url"||t.type==="password")||e==="textarea"||t.contentEditable==="true")}function Ihe(t){var e=oX(),r=t.focusedElem,n=t.selectionRange;if(e!==r&&r&&r.ownerDocument&&iX(r.ownerDocument.documentElement,r)){if(n!==null&&VO(r)){if(e=n.start,t=n.end,t===void 0&&(t=e),"selectionStart"in r)r.selectionStart=e,r.selectionEnd=Math.min(t,r.value.length);else if(t=(e=r.ownerDocument||document)&&e.defaultView||window,t.getSelection){t=t.getSelection();var a=r.textContent.length,s=Math.min(n.start,a);n=n.end===void 0?s:Math.min(n.end,a),!t.extend&&s>n&&(a=n,n=s,s=a),a=XL(r,s);var o=XL(r,n);a&&o&&(t.rangeCount!==1||t.anchorNode!==a.node||t.anchorOffset!==a.offset||t.focusNode!==o.node||t.focusOffset!==o.offset)&&(e=e.createRange(),e.setStart(a.node,a.offset),t.removeAllRanges(),s>n?(t.addRange(e),t.extend(o.node,o.offset)):(e.setEnd(o.node,o.offset),t.addRange(e)))}}for(e=[],t=r;t=t.parentNode;)t.nodeType===1&&e.push({element:t,left:t.scrollLeft,top:t.scrollTop});for(typeof r.focus=="function"&&r.focus(),r=0;r<e.length;r++)t=e[r],t.element.scrollLeft=t.left,t.element.scrollTop=t.top}}var jhe=uA&&"documentMode"in document&&11>=document.documentMode,Mx=null,nT=null,ob=null,aT=!1;function YL(t,e,r){var n=r.window===r?r.document:r.nodeType===9?r:r.ownerDocument;aT||Mx==null||Mx!==SE(n)||(n=Mx,"selectionStart"in n&&VO(n)?n={start:n.selectionStart,end:n.selectionEnd}:(n=(n.ownerDocument&&n.ownerDocument.defaultView||window).getSelection(),n={anchorNode:n.anchorNode,anchorOffset:n.anchorOffset,focusNode:n.focusNode,focusOffset:n.focusOffset}),ob&&Wb(ob,n)||(ob=n,n=FE(nT,"onSelect"),0<n.length&&(e=new LO("onSelect","select",null,e,r),t.push({event:e,listeners:n}),e.target=Mx)))}function HN(t,e){var r={};return r[t.toLowerCase()]=e.toLowerCase(),r["Webkit"+t]="webkit"+e,r["Moz"+t]="moz"+e,r}var Lx={animationend:HN("Animation","AnimationEnd"),animationiteration:HN("Animation","AnimationIteration"),animationstart:HN("Animation","AnimationStart"),transitionend:HN("Transition","TransitionEnd")},t3={},lX={};uA&&(lX=document.createElement("div").style,"AnimationEvent"in window||(delete Lx.animationend.animation,delete Lx.animationiteration.animation,delete Lx.animationstart.animation),"TransitionEvent"in window||delete Lx.transitionend.transition);function rj(t){if(t3[t])return t3[t];if(!Lx[t])return t;var e=Lx[t],r;for(r in e)if(e.hasOwnProperty(r)&&r in lX)return t3[t]=e[r];return t}var cX=rj("animationend"),uX=rj("animationiteration"),dX=rj("animationstart"),fX=rj("transitionend"),hX=new Map,JL="abort auxClick cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");function km(t,e){hX.set(t,e),Eg(e,[t])}for(var r3=0;r3<JL.length;r3++){var n3=JL[r3],Phe=n3.toLowerCase(),Bhe=n3[0].toUpperCase()+n3.slice(1);km(Phe,"on"+Bhe)}km(cX,"onAnimationEnd");km(uX,"onAnimationIteration");km(dX,"onAnimationStart");km("dblclick","onDoubleClick");km("focusin","onFocus");km("focusout","onBlur");km(fX,"onTransitionEnd");bv("onMouseEnter",["mouseout","mouseover"]);bv("onMouseLeave",["mouseout","mouseover"]);bv("onPointerEnter",["pointerout","pointerover"]);bv("onPointerLeave",["pointerout","pointerover"]);Eg("onChange","change click focusin focusout input keydown keyup selectionchange".split(" "));Eg("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" "));Eg("onBeforeInput",["compositionend","keypress","textInput","paste"]);Eg("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" "));Eg("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" "));Eg("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var Fy="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),The=new Set("cancel close invalid load scroll toggle".split(" ").concat(Fy));function ZL(t,e,r){var n=t.type||"unknown-event";t.currentTarget=r,Pfe(n,e,void 0,t),t.currentTarget=null}function AX(t,e){e=(e&4)!==0;for(var r=0;r<t.length;r++){var n=t[r],a=n.event;n=n.listeners;e:{var s=void 0;if(e)for(var o=n.length-1;0<=o;o--){var l=n[o],c=l.instance,u=l.currentTarget;if(l=l.listener,c!==s&&a.isPropagationStopped())break e;ZL(a,l,u),s=c}else for(o=0;o<n.length;o++){if(l=n[o],c=l.instance,u=l.currentTarget,l=l.listener,c!==s&&a.isPropagationStopped())break e;ZL(a,l,u),s=c}}}if(jE)throw t=ZB,jE=!1,ZB=null,t}function Es(t,e){var r=e[cT];r===void 0&&(r=e[cT]=new Set);var n=t+"__bubble";r.has(n)||(mX(e,t,2,!1),r.add(n))}function a3(t,e,r){var n=0;e&&(n|=4),mX(r,t,n,e)}var $N="_reactListening"+Math.random().toString(36).slice(2);function Xb(t){if(!t[$N]){t[$N]=!0,wW.forEach(function(r){r!=="selectionchange"&&(The.has(r)||a3(r,!1,t),a3(r,!0,t))});var e=t.nodeType===9?t:t.ownerDocument;e===null||e[$N]||(e[$N]=!0,a3("selectionchange",!1,e))}}function mX(t,e,r,n){switch(JW(e)){case 1:var a=Kfe;break;case 4:a=qfe;break;default:a=RO}r=a.bind(null,e,r,t),a=void 0,!JB||e!=="touchstart"&&e!=="touchmove"&&e!=="wheel"||(a=!0),n?a!==void 0?t.addEventListener(e,r,{capture:!0,passive:a}):t.addEventListener(e,r,!0):a!==void 0?t.addEventListener(e,r,{passive:a}):t.addEventListener(e,r,!1)}function s3(t,e,r,n,a){var s=n;if(!(e&1)&&!(e&2)&&n!==null)e:for(;;){if(n===null)return;var o=n.tag;if(o===3||o===4){var l=n.stateNode.containerInfo;if(l===a||l.nodeType===8&&l.parentNode===a)break;if(o===4)for(o=n.return;o!==null;){var c=o.tag;if((c===3||c===4)&&(c=o.stateNode.containerInfo,c===a||c.nodeType===8&&c.parentNode===a))return;o=o.return}for(;l!==null;){if(o=vp(l),o===null)return;if(c=o.tag,c===5||c===6){n=s=o;continue e}l=l.parentNode}}n=n.return}MW(function(){var u=s,d=kO(r),f=[];e:{var A=hX.get(t);if(A!==void 0){var h=LO,m=t;switch(t){case"keypress":if(V_(r)===0)break e;case"keydown":case"keyup":h=lhe;break;case"focusin":m="focus",h=J4;break;case"focusout":m="blur",h=J4;break;case"beforeblur":case"afterblur":h=J4;break;case"click":if(r.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":h=QL;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":h=Xfe;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":h=dhe;break;case cX:case uX:case dX:h=Zfe;break;case fX:h=hhe;break;case"scroll":h=zfe;break;case"wheel":h=mhe;break;case"copy":case"cut":case"paste":h=the;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":h=HL}var p=(e&4)!==0,x=!p&&t==="scroll",v=p?A!==null?A+"Capture":null:A;p=[];for(var y=u,b;y!==null;){b=y;var w=b.stateNode;if(b.tag===5&&w!==null&&(b=w,v!==null&&(w=$b(y,v),w!=null&&p.push(Yb(y,w,b)))),x)break;y=y.return}0<p.length&&(A=new h(A,m,null,r,d),f.push({event:A,listeners:p}))}}if(!(e&7)){e:{if(A=t==="mouseover"||t==="pointerover",h=t==="mouseout"||t==="pointerout",A&&r!==XB&&(m=r.relatedTarget||r.fromElement)&&(vp(m)||m[dA]))break e;if((h||A)&&(A=d.window===d?d:(A=d.ownerDocument)?A.defaultView||A.parentWindow:window,h?(m=r.relatedTarget||r.toElement,h=u,m=m?vp(m):null,m!==null&&(x=Sg(m),m!==x||m.tag!==5&&m.tag!==6)&&(m=null)):(h=null,m=u),h!==m)){if(p=QL,w="onMouseLeave",v="onMouseEnter",y="mouse",(t==="pointerout"||t==="pointerover")&&(p=HL,w="onPointerLeave",v="onPointerEnter",y="pointer"),x=h==null?A:Ux(h),b=m==null?A:Ux(m),A=new p(w,y+"leave",h,r,d),A.target=x,A.relatedTarget=b,w=null,vp(d)===u&&(p=new p(v,y+"enter",m,r,d),p.target=b,p.relatedTarget=x,w=p),x=w,h&&m)t:{for(p=h,v=m,y=0,b=p;b;b=Xg(b))y++;for(b=0,w=v;w;w=Xg(w))b++;for(;0<y-b;)p=Xg(p),y--;for(;0<b-y;)v=Xg(v),b--;for(;y--;){if(p===v||v!==null&&p===v.alternate)break t;p=Xg(p),v=Xg(v)}p=null}else p=null;h!==null&&eU(f,A,h,p,!1),m!==null&&x!==null&&eU(f,x,m,p,!0)}}e:{if(A=u?Ux(u):window,h=A.nodeName&&A.nodeName.toLowerCase(),h==="select"||h==="input"&&A.type==="file")var j=whe;else if(KL(A))if(aX)j=Ehe;else{j=Che;var I=Nhe}else(h=A.nodeName)&&h.toLowerCase()==="input"&&(A.type==="checkbox"||A.type==="radio")&&(j=_he);if(j&&(j=j(t,u))){nX(f,j,r,d);break e}I&&I(t,A,u),t==="focusout"&&(I=A._wrapperState)&&I.controlled&&A.type==="number"&&GB(A,"number",A.value)}switch(I=u?Ux(u):window,t){case"focusin":(KL(I)||I.contentEditable==="true")&&(Mx=I,nT=u,ob=null);break;case"focusout":ob=nT=Mx=null;break;case"mousedown":aT=!0;break;case"contextmenu":case"mouseup":case"dragend":aT=!1,YL(f,r,d);break;case"selectionchange":if(jhe)break;case"keydown":case"keyup":YL(f,r,d)}var _;if(QO)e:{switch(t){case"compositionstart":var S="onCompositionStart";break e;case"compositionend":S="onCompositionEnd";break e;case"compositionupdate":S="onCompositionUpdate";break e}S=void 0}else Rx?tX(t,r)&&(S="onCompositionEnd"):t==="keydown"&&r.keyCode===229&&(S="onCompositionStart");S&&(eX&&r.locale!=="ko"&&(Rx||S!=="onCompositionStart"?S==="onCompositionEnd"&&Rx&&(_=ZW()):(Q0=d,MO="value"in Q0?Q0.value:Q0.textContent,Rx=!0)),I=FE(u,S),0<I.length&&(S=new VL(S,t,null,r,d),f.push({event:S,listeners:I}),_?S.data=_:(_=rX(r),_!==null&&(S.data=_)))),(_=ghe?xhe(t,r):vhe(t,r))&&(u=FE(u,"onBeforeInput"),0<u.length&&(d=new VL("onBeforeInput","beforeinput",null,r,d),f.push({event:d,listeners:u}),d.data=_))}AX(f,e)})}function Yb(t,e,r){return{instance:t,listener:e,currentTarget:r}}function FE(t,e){for(var r=e+"Capture",n=[];t!==null;){var a=t,s=a.stateNode;a.tag===5&&s!==null&&(a=s,s=$b(t,r),s!=null&&n.unshift(Yb(t,s,a)),s=$b(t,e),s!=null&&n.push(Yb(t,s,a))),t=t.return}return n}function Xg(t){if(t===null)return null;do t=t.return;while(t&&t.tag!==5);return t||null}function eU(t,e,r,n,a){for(var s=e._reactName,o=[];r!==null&&r!==n;){var l=r,c=l.alternate,u=l.stateNode;if(c!==null&&c===n)break;l.tag===5&&u!==null&&(l=u,a?(c=$b(r,s),c!=null&&o.unshift(Yb(r,c,l))):a||(c=$b(r,s),c!=null&&o.push(Yb(r,c,l)))),r=r.return}o.length!==0&&t.push({event:e,listeners:o})}var khe=/\r\n?/g,Fhe=/\u0000|\uFFFD/g;function tU(t){return(typeof t=="string"?t:""+t).replace(khe,`
`).replace(Fhe,"")}function GN(t,e,r){if(e=tU(e),tU(t)!==e&&r)throw Error(Br(425))}function OE(){}var sT=null,iT=null;function oT(t,e){return t==="textarea"||t==="noscript"||typeof e.children=="string"||typeof e.children=="number"||typeof e.dangerouslySetInnerHTML=="object"&&e.dangerouslySetInnerHTML!==null&&e.dangerouslySetInnerHTML.__html!=null}var lT=typeof setTimeout=="function"?setTimeout:void 0,Ohe=typeof clearTimeout=="function"?clearTimeout:void 0,rU=typeof Promise=="function"?Promise:void 0,Dhe=typeof queueMicrotask=="function"?queueMicrotask:typeof rU<"u"?function(t){return rU.resolve(null).then(t).catch(Rhe)}:lT;function Rhe(t){setTimeout(function(){throw t})}function i3(t,e){var r=e,n=0;do{var a=r.nextSibling;if(t.removeChild(r),a&&a.nodeType===8)if(r=a.data,r==="/$"){if(n===0){t.removeChild(a),qb(e);return}n--}else r!=="$"&&r!=="$?"&&r!=="$!"||n++;r=a}while(r);qb(e)}function em(t){for(;t!=null;t=t.nextSibling){var e=t.nodeType;if(e===1||e===3)break;if(e===8){if(e=t.data,e==="$"||e==="$!"||e==="$?")break;if(e==="/$")return null}}return t}function nU(t){t=t.previousSibling;for(var e=0;t;){if(t.nodeType===8){var r=t.data;if(r==="$"||r==="$!"||r==="$?"){if(e===0)return t;e--}else r==="/$"&&e++}t=t.previousSibling}return null}var t1=Math.random().toString(36).slice(2),Gf="__reactFiber$"+t1,Jb="__reactProps$"+t1,dA="__reactContainer$"+t1,cT="__reactEvents$"+t1,Mhe="__reactListeners$"+t1,Lhe="__reactHandles$"+t1;function vp(t){var e=t[Gf];if(e)return e;for(var r=t.parentNode;r;){if(e=r[dA]||r[Gf]){if(r=e.alternate,e.child!==null||r!==null&&r.child!==null)for(t=nU(t);t!==null;){if(r=t[Gf])return r;t=nU(t)}return e}t=r,r=t.parentNode}return null}function hw(t){return t=t[Gf]||t[dA],!t||t.tag!==5&&t.tag!==6&&t.tag!==13&&t.tag!==3?null:t}function Ux(t){if(t.tag===5||t.tag===6)return t.stateNode;throw Error(Br(33))}function nj(t){return t[Jb]||null}var uT=[],Qx=-1;function Fm(t){return{current:t}}function Ts(t){0>Qx||(t.current=uT[Qx],uT[Qx]=null,Qx--)}function bs(t,e){Qx++,uT[Qx]=t.current,t.current=e}var pm={},ic=Fm(pm),nu=Fm(!1),zp=pm;function wv(t,e){var r=t.type.contextTypes;if(!r)return pm;var n=t.stateNode;if(n&&n.__reactInternalMemoizedUnmaskedChildContext===e)return n.__reactInternalMemoizedMaskedChildContext;var a={},s;for(s in r)a[s]=e[s];return n&&(t=t.stateNode,t.__reactInternalMemoizedUnmaskedChildContext=e,t.__reactInternalMemoizedMaskedChildContext=a),a}function au(t){return t=t.childContextTypes,t!=null}function DE(){Ts(nu),Ts(ic)}function aU(t,e,r){if(ic.current!==pm)throw Error(Br(168));bs(ic,e),bs(nu,r)}function pX(t,e,r){var n=t.stateNode;if(e=e.childContextTypes,typeof n.getChildContext!="function")return r;n=n.getChildContext();for(var a in n)if(!(a in e))throw Error(Br(108,Nfe(t)||"Unknown",a));return ui({},r,n)}function RE(t){return t=(t=t.stateNode)&&t.__reactInternalMemoizedMergedChildContext||pm,zp=ic.current,bs(ic,t),bs(nu,nu.current),!0}function sU(t,e,r){var n=t.stateNode;if(!n)throw Error(Br(169));r?(t=pX(t,e,zp),n.__reactInternalMemoizedMergedChildContext=t,Ts(nu),Ts(ic),bs(ic,t)):Ts(nu),bs(nu,r)}var Mh=null,aj=!1,o3=!1;function gX(t){Mh===null?Mh=[t]:Mh.push(t)}function Uhe(t){aj=!0,gX(t)}function Om(){if(!o3&&Mh!==null){o3=!0;var t=0,e=rs;try{var r=Mh;for(rs=1;t<r.length;t++){var n=r[t];do n=n(!0);while(n!==null)}Mh=null,aj=!1}catch(a){throw Mh!==null&&(Mh=Mh.slice(t+1)),VW(FO,Om),a}finally{rs=e,o3=!1}}return null}var Vx=[],Hx=0,ME=null,LE=0,xd=[],vd=0,Wp=null,Hh=1,$h="";function np(t,e){Vx[Hx++]=LE,Vx[Hx++]=ME,ME=t,LE=e}function xX(t,e,r){xd[vd++]=Hh,xd[vd++]=$h,xd[vd++]=Wp,Wp=t;var n=Hh;t=$h;var a=32-Af(n)-1;n&=~(1<<a),r+=1;var s=32-Af(e)+a;if(30<s){var o=a-a%5;s=(n&(1<<o)-1).toString(32),n>>=o,a-=o,Hh=1<<32-Af(e)+a|r<<a|n,$h=s+t}else Hh=1<<s|r<<a|n,$h=t}function HO(t){t.return!==null&&(np(t,1),xX(t,1,0))}function $O(t){for(;t===ME;)ME=Vx[--Hx],Vx[Hx]=null,LE=Vx[--Hx],Vx[Hx]=null;for(;t===Wp;)Wp=xd[--vd],xd[vd]=null,$h=xd[--vd],xd[vd]=null,Hh=xd[--vd],xd[vd]=null}var Ru=null,ku=null,Qs=!1,sf=null;function vX(t,e){var r=bd(5,null,null,0);r.elementType="DELETED",r.stateNode=e,r.return=t,e=t.deletions,e===null?(t.deletions=[r],t.flags|=16):e.push(r)}function iU(t,e){switch(t.tag){case 5:var r=t.type;return e=e.nodeType!==1||r.toLowerCase()!==e.nodeName.toLowerCase()?null:e,e!==null?(t.stateNode=e,Ru=t,ku=em(e.firstChild),!0):!1;case 6:return e=t.pendingProps===""||e.nodeType!==3?null:e,e!==null?(t.stateNode=e,Ru=t,ku=null,!0):!1;case 13:return e=e.nodeType!==8?null:e,e!==null?(r=Wp!==null?{id:Hh,overflow:$h}:null,t.memoizedState={dehydrated:e,treeContext:r,retryLane:1073741824},r=bd(18,null,null,0),r.stateNode=e,r.return=t,t.child=r,Ru=t,ku=null,!0):!1;default:return!1}}function dT(t){return(t.mode&1)!==0&&(t.flags&128)===0}function fT(t){if(Qs){var e=ku;if(e){var r=e;if(!iU(t,e)){if(dT(t))throw Error(Br(418));e=em(r.nextSibling);var n=Ru;e&&iU(t,e)?vX(n,r):(t.flags=t.flags&-4097|2,Qs=!1,Ru=t)}}else{if(dT(t))throw Error(Br(418));t.flags=t.flags&-4097|2,Qs=!1,Ru=t}}}function oU(t){for(t=t.return;t!==null&&t.tag!==5&&t.tag!==3&&t.tag!==13;)t=t.return;Ru=t}function KN(t){if(t!==Ru)return!1;if(!Qs)return oU(t),Qs=!0,!1;var e;if((e=t.tag!==3)&&!(e=t.tag!==5)&&(e=t.type,e=e!=="head"&&e!=="body"&&!oT(t.type,t.memoizedProps)),e&&(e=ku)){if(dT(t))throw yX(),Error(Br(418));for(;e;)vX(t,e),e=em(e.nextSibling)}if(oU(t),t.tag===13){if(t=t.memoizedState,t=t!==null?t.dehydrated:null,!t)throw Error(Br(317));e:{for(t=t.nextSibling,e=0;t;){if(t.nodeType===8){var r=t.data;if(r==="/$"){if(e===0){ku=em(t.nextSibling);break e}e--}else r!=="$"&&r!=="$!"&&r!=="$?"||e++}t=t.nextSibling}ku=null}}else ku=Ru?em(t.stateNode.nextSibling):null;return!0}function yX(){for(var t=ku;t;)t=em(t.nextSibling)}function Nv(){ku=Ru=null,Qs=!1}function GO(t){sf===null?sf=[t]:sf.push(t)}var Qhe=jA.ReactCurrentBatchConfig;function J1(t,e,r){if(t=r.ref,t!==null&&typeof t!="function"&&typeof t!="object"){if(r._owner){if(r=r._owner,r){if(r.tag!==1)throw Error(Br(309));var n=r.stateNode}if(!n)throw Error(Br(147,t));var a=n,s=""+t;return e!==null&&e.ref!==null&&typeof e.ref=="function"&&e.ref._stringRef===s?e.ref:(e=function(o){var l=a.refs;o===null?delete l[s]:l[s]=o},e._stringRef=s,e)}if(typeof t!="string")throw Error(Br(284));if(!r._owner)throw Error(Br(290,t))}return t}function qN(t,e){throw t=Object.prototype.toString.call(e),Error(Br(31,t==="[object Object]"?"object with keys {"+Object.keys(e).join(", ")+"}":t))}function lU(t){var e=t._init;return e(t._payload)}function bX(t){function e(v,y){if(t){var b=v.deletions;b===null?(v.deletions=[y],v.flags|=16):b.push(y)}}function r(v,y){if(!t)return null;for(;y!==null;)e(v,y),y=y.sibling;return null}function n(v,y){for(v=new Map;y!==null;)y.key!==null?v.set(y.key,y):v.set(y.index,y),y=y.sibling;return v}function a(v,y){return v=am(v,y),v.index=0,v.sibling=null,v}function s(v,y,b){return v.index=b,t?(b=v.alternate,b!==null?(b=b.index,b<y?(v.flags|=2,y):b):(v.flags|=2,y)):(v.flags|=1048576,y)}function o(v){return t&&v.alternate===null&&(v.flags|=2),v}function l(v,y,b,w){return y===null||y.tag!==6?(y=A3(b,v.mode,w),y.return=v,y):(y=a(y,b),y.return=v,y)}function c(v,y,b,w){var j=b.type;return j===Dx?d(v,y,b.props.children,w,b.key):y!==null&&(y.elementType===j||typeof j=="object"&&j!==null&&j.$$typeof===C0&&lU(j)===y.type)?(w=a(y,b.props),w.ref=J1(v,y,b),w.return=v,w):(w=W_(b.type,b.key,b.props,null,v.mode,w),w.ref=J1(v,y,b),w.return=v,w)}function u(v,y,b,w){return y===null||y.tag!==4||y.stateNode.containerInfo!==b.containerInfo||y.stateNode.implementation!==b.implementation?(y=m3(b,v.mode,w),y.return=v,y):(y=a(y,b.children||[]),y.return=v,y)}function d(v,y,b,w,j){return y===null||y.tag!==7?(y=Bp(b,v.mode,w,j),y.return=v,y):(y=a(y,b),y.return=v,y)}function f(v,y,b){if(typeof y=="string"&&y!==""||typeof y=="number")return y=A3(""+y,v.mode,b),y.return=v,y;if(typeof y=="object"&&y!==null){switch(y.$$typeof){case DN:return b=W_(y.type,y.key,y.props,null,v.mode,b),b.ref=J1(v,null,y),b.return=v,b;case Ox:return y=m3(y,v.mode,b),y.return=v,y;case C0:var w=y._init;return f(v,w(y._payload),b)}if(Ty(y)||q1(y))return y=Bp(y,v.mode,b,null),y.return=v,y;qN(v,y)}return null}function A(v,y,b,w){var j=y!==null?y.key:null;if(typeof b=="string"&&b!==""||typeof b=="number")return j!==null?null:l(v,y,""+b,w);if(typeof b=="object"&&b!==null){switch(b.$$typeof){case DN:return b.key===j?c(v,y,b,w):null;case Ox:return b.key===j?u(v,y,b,w):null;case C0:return j=b._init,A(v,y,j(b._payload),w)}if(Ty(b)||q1(b))return j!==null?null:d(v,y,b,w,null);qN(v,b)}return null}function h(v,y,b,w,j){if(typeof w=="string"&&w!==""||typeof w=="number")return v=v.get(b)||null,l(y,v,""+w,j);if(typeof w=="object"&&w!==null){switch(w.$$typeof){case DN:return v=v.get(w.key===null?b:w.key)||null,c(y,v,w,j);case Ox:return v=v.get(w.key===null?b:w.key)||null,u(y,v,w,j);case C0:var I=w._init;return h(v,y,b,I(w._payload),j)}if(Ty(w)||q1(w))return v=v.get(b)||null,d(y,v,w,j,null);qN(y,w)}return null}function m(v,y,b,w){for(var j=null,I=null,_=y,S=y=0,E=null;_!==null&&S<b.length;S++){_.index>S?(E=_,_=null):E=_.sibling;var T=A(v,_,b[S],w);if(T===null){_===null&&(_=E);break}t&&_&&T.alternate===null&&e(v,_),y=s(T,y,S),I===null?j=T:I.sibling=T,I=T,_=E}if(S===b.length)return r(v,_),Qs&&np(v,S),j;if(_===null){for(;S<b.length;S++)_=f(v,b[S],w),_!==null&&(y=s(_,y,S),I===null?j=_:I.sibling=_,I=_);return Qs&&np(v,S),j}for(_=n(v,_);S<b.length;S++)E=h(_,v,S,b[S],w),E!==null&&(t&&E.alternate!==null&&_.delete(E.key===null?S:E.key),y=s(E,y,S),I===null?j=E:I.sibling=E,I=E);return t&&_.forEach(function(k){return e(v,k)}),Qs&&np(v,S),j}function p(v,y,b,w){var j=q1(b);if(typeof j!="function")throw Error(Br(150));if(b=j.call(b),b==null)throw Error(Br(151));for(var I=j=null,_=y,S=y=0,E=null,T=b.next();_!==null&&!T.done;S++,T=b.next()){_.index>S?(E=_,_=null):E=_.sibling;var k=A(v,_,T.value,w);if(k===null){_===null&&(_=E);break}t&&_&&k.alternate===null&&e(v,_),y=s(k,y,S),I===null?j=k:I.sibling=k,I=k,_=E}if(T.done)return r(v,_),Qs&&np(v,S),j;if(_===null){for(;!T.done;S++,T=b.next())T=f(v,T.value,w),T!==null&&(y=s(T,y,S),I===null?j=T:I.sibling=T,I=T);return Qs&&np(v,S),j}for(_=n(v,_);!T.done;S++,T=b.next())T=h(_,v,S,T.value,w),T!==null&&(t&&T.alternate!==null&&_.delete(T.key===null?S:T.key),y=s(T,y,S),I===null?j=T:I.sibling=T,I=T);return t&&_.forEach(function(B){return e(v,B)}),Qs&&np(v,S),j}function x(v,y,b,w){if(typeof b=="object"&&b!==null&&b.type===Dx&&b.key===null&&(b=b.props.children),typeof b=="object"&&b!==null){switch(b.$$typeof){case DN:e:{for(var j=b.key,I=y;I!==null;){if(I.key===j){if(j=b.type,j===Dx){if(I.tag===7){r(v,I.sibling),y=a(I,b.props.children),y.return=v,v=y;break e}}else if(I.elementType===j||typeof j=="object"&&j!==null&&j.$$typeof===C0&&lU(j)===I.type){r(v,I.sibling),y=a(I,b.props),y.ref=J1(v,I,b),y.return=v,v=y;break e}r(v,I);break}else e(v,I);I=I.sibling}b.type===Dx?(y=Bp(b.props.children,v.mode,w,b.key),y.return=v,v=y):(w=W_(b.type,b.key,b.props,null,v.mode,w),w.ref=J1(v,y,b),w.return=v,v=w)}return o(v);case Ox:e:{for(I=b.key;y!==null;){if(y.key===I)if(y.tag===4&&y.stateNode.containerInfo===b.containerInfo&&y.stateNode.implementation===b.implementation){r(v,y.sibling),y=a(y,b.children||[]),y.return=v,v=y;break e}else{r(v,y);break}else e(v,y);y=y.sibling}y=m3(b,v.mode,w),y.return=v,v=y}return o(v);case C0:return I=b._init,x(v,y,I(b._payload),w)}if(Ty(b))return m(v,y,b,w);if(q1(b))return p(v,y,b,w);qN(v,b)}return typeof b=="string"&&b!==""||typeof b=="number"?(b=""+b,y!==null&&y.tag===6?(r(v,y.sibling),y=a(y,b),y.return=v,v=y):(r(v,y),y=A3(b,v.mode,w),y.return=v,v=y),o(v)):r(v,y)}return x}var Cv=bX(!0),wX=bX(!1),UE=Fm(null),QE=null,$x=null,KO=null;function qO(){KO=$x=QE=null}function zO(t){var e=UE.current;Ts(UE),t._currentValue=e}function hT(t,e,r){for(;t!==null;){var n=t.alternate;if((t.childLanes&e)!==e?(t.childLanes|=e,n!==null&&(n.childLanes|=e)):n!==null&&(n.childLanes&e)!==e&&(n.childLanes|=e),t===r)break;t=t.return}}function ov(t,e){QE=t,KO=$x=null,t=t.dependencies,t!==null&&t.firstContext!==null&&(t.lanes&e&&(Zc=!0),t.firstContext=null)}function Td(t){var e=t._currentValue;if(KO!==t)if(t={context:t,memoizedValue:e,next:null},$x===null){if(QE===null)throw Error(Br(308));$x=t,QE.dependencies={lanes:0,firstContext:t}}else $x=$x.next=t;return e}var yp=null;function WO(t){yp===null?yp=[t]:yp.push(t)}function NX(t,e,r,n){var a=e.interleaved;return a===null?(r.next=r,WO(e)):(r.next=a.next,a.next=r),e.interleaved=r,fA(t,n)}function fA(t,e){t.lanes|=e;var r=t.alternate;for(r!==null&&(r.lanes|=e),r=t,t=t.return;t!==null;)t.childLanes|=e,r=t.alternate,r!==null&&(r.childLanes|=e),r=t,t=t.return;return r.tag===3?r.stateNode:null}var _0=!1;function XO(t){t.updateQueue={baseState:t.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,interleaved:null,lanes:0},effects:null}}function CX(t,e){t=t.updateQueue,e.updateQueue===t&&(e.updateQueue={baseState:t.baseState,firstBaseUpdate:t.firstBaseUpdate,lastBaseUpdate:t.lastBaseUpdate,shared:t.shared,effects:t.effects})}function Zh(t,e){return{eventTime:t,lane:e,tag:0,payload:null,callback:null,next:null}}function tm(t,e,r){var n=t.updateQueue;if(n===null)return null;if(n=n.shared,Ca&2){var a=n.pending;return a===null?e.next=e:(e.next=a.next,a.next=e),n.pending=e,fA(t,r)}return a=n.interleaved,a===null?(e.next=e,WO(n)):(e.next=a.next,a.next=e),n.interleaved=e,fA(t,r)}function H_(t,e,r){if(e=e.updateQueue,e!==null&&(e=e.shared,(r&4194240)!==0)){var n=e.lanes;n&=t.pendingLanes,r|=n,e.lanes=r,OO(t,r)}}function cU(t,e){var r=t.updateQueue,n=t.alternate;if(n!==null&&(n=n.updateQueue,r===n)){var a=null,s=null;if(r=r.firstBaseUpdate,r!==null){do{var o={eventTime:r.eventTime,lane:r.lane,tag:r.tag,payload:r.payload,callback:r.callback,next:null};s===null?a=s=o:s=s.next=o,r=r.next}while(r!==null);s===null?a=s=e:s=s.next=e}else a=s=e;r={baseState:n.baseState,firstBaseUpdate:a,lastBaseUpdate:s,shared:n.shared,effects:n.effects},t.updateQueue=r;return}t=r.lastBaseUpdate,t===null?r.firstBaseUpdate=e:t.next=e,r.lastBaseUpdate=e}function VE(t,e,r,n){var a=t.updateQueue;_0=!1;var s=a.firstBaseUpdate,o=a.lastBaseUpdate,l=a.shared.pending;if(l!==null){a.shared.pending=null;var c=l,u=c.next;c.next=null,o===null?s=u:o.next=u,o=c;var d=t.alternate;d!==null&&(d=d.updateQueue,l=d.lastBaseUpdate,l!==o&&(l===null?d.firstBaseUpdate=u:l.next=u,d.lastBaseUpdate=c))}if(s!==null){var f=a.baseState;o=0,d=u=c=null,l=s;do{var A=l.lane,h=l.eventTime;if((n&A)===A){d!==null&&(d=d.next={eventTime:h,lane:0,tag:l.tag,payload:l.payload,callback:l.callback,next:null});e:{var m=t,p=l;switch(A=e,h=r,p.tag){case 1:if(m=p.payload,typeof m=="function"){f=m.call(h,f,A);break e}f=m;break e;case 3:m.flags=m.flags&-65537|128;case 0:if(m=p.payload,A=typeof m=="function"?m.call(h,f,A):m,A==null)break e;f=ui({},f,A);break e;case 2:_0=!0}}l.callback!==null&&l.lane!==0&&(t.flags|=64,A=a.effects,A===null?a.effects=[l]:A.push(l))}else h={eventTime:h,lane:A,tag:l.tag,payload:l.payload,callback:l.callback,next:null},d===null?(u=d=h,c=f):d=d.next=h,o|=A;if(l=l.next,l===null){if(l=a.shared.pending,l===null)break;A=l,l=A.next,A.next=null,a.lastBaseUpdate=A,a.shared.pending=null}}while(!0);if(d===null&&(c=f),a.baseState=c,a.firstBaseUpdate=u,a.lastBaseUpdate=d,e=a.shared.interleaved,e!==null){a=e;do o|=a.lane,a=a.next;while(a!==e)}else s===null&&(a.shared.lanes=0);Yp|=o,t.lanes=o,t.memoizedState=f}}function uU(t,e,r){if(t=e.effects,e.effects=null,t!==null)for(e=0;e<t.length;e++){var n=t[e],a=n.callback;if(a!==null){if(n.callback=null,n=r,typeof a!="function")throw Error(Br(191,a));a.call(n)}}}var Aw={},rh=Fm(Aw),Zb=Fm(Aw),e2=Fm(Aw);function bp(t){if(t===Aw)throw Error(Br(174));return t}function YO(t,e){switch(bs(e2,e),bs(Zb,t),bs(rh,Aw),t=e.nodeType,t){case 9:case 11:e=(e=e.documentElement)?e.namespaceURI:qB(null,"");break;default:t=t===8?e.parentNode:e,e=t.namespaceURI||null,t=t.tagName,e=qB(e,t)}Ts(rh),bs(rh,e)}function _v(){Ts(rh),Ts(Zb),Ts(e2)}function _X(t){bp(e2.current);var e=bp(rh.current),r=qB(e,t.type);e!==r&&(bs(Zb,t),bs(rh,r))}function JO(t){Zb.current===t&&(Ts(rh),Ts(Zb))}var si=Fm(0);function HE(t){for(var e=t;e!==null;){if(e.tag===13){var r=e.memoizedState;if(r!==null&&(r=r.dehydrated,r===null||r.data==="$?"||r.data==="$!"))return e}else if(e.tag===19&&e.memoizedProps.revealOrder!==void 0){if(e.flags&128)return e}else if(e.child!==null){e.child.return=e,e=e.child;continue}if(e===t)break;for(;e.sibling===null;){if(e.return===null||e.return===t)return null;e=e.return}e.sibling.return=e.return,e=e.sibling}return null}var l3=[];function ZO(){for(var t=0;t<l3.length;t++)l3[t]._workInProgressVersionPrimary=null;l3.length=0}var $_=jA.ReactCurrentDispatcher,c3=jA.ReactCurrentBatchConfig,Xp=0,ci=null,yo=null,zo=null,$E=!1,lb=!1,t2=0,Vhe=0;function Rl(){throw Error(Br(321))}function eD(t,e){if(e===null)return!1;for(var r=0;r<e.length&&r<t.length;r++)if(!yf(t[r],e[r]))return!1;return!0}function tD(t,e,r,n,a,s){if(Xp=s,ci=e,e.memoizedState=null,e.updateQueue=null,e.lanes=0,$_.current=t===null||t.memoizedState===null?Khe:qhe,t=r(n,a),lb){s=0;do{if(lb=!1,t2=0,25<=s)throw Error(Br(301));s+=1,zo=yo=null,e.updateQueue=null,$_.current=zhe,t=r(n,a)}while(lb)}if($_.current=GE,e=yo!==null&&yo.next!==null,Xp=0,zo=yo=ci=null,$E=!1,e)throw Error(Br(300));return t}function rD(){var t=t2!==0;return t2=0,t}function $f(){var t={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return zo===null?ci.memoizedState=zo=t:zo=zo.next=t,zo}function kd(){if(yo===null){var t=ci.alternate;t=t!==null?t.memoizedState:null}else t=yo.next;var e=zo===null?ci.memoizedState:zo.next;if(e!==null)zo=e,yo=t;else{if(t===null)throw Error(Br(310));yo=t,t={memoizedState:yo.memoizedState,baseState:yo.baseState,baseQueue:yo.baseQueue,queue:yo.queue,next:null},zo===null?ci.memoizedState=zo=t:zo=zo.next=t}return zo}function r2(t,e){return typeof e=="function"?e(t):e}function u3(t){var e=kd(),r=e.queue;if(r===null)throw Error(Br(311));r.lastRenderedReducer=t;var n=yo,a=n.baseQueue,s=r.pending;if(s!==null){if(a!==null){var o=a.next;a.next=s.next,s.next=o}n.baseQueue=a=s,r.pending=null}if(a!==null){s=a.next,n=n.baseState;var l=o=null,c=null,u=s;do{var d=u.lane;if((Xp&d)===d)c!==null&&(c=c.next={lane:0,action:u.action,hasEagerState:u.hasEagerState,eagerState:u.eagerState,next:null}),n=u.hasEagerState?u.eagerState:t(n,u.action);else{var f={lane:d,action:u.action,hasEagerState:u.hasEagerState,eagerState:u.eagerState,next:null};c===null?(l=c=f,o=n):c=c.next=f,ci.lanes|=d,Yp|=d}u=u.next}while(u!==null&&u!==s);c===null?o=n:c.next=l,yf(n,e.memoizedState)||(Zc=!0),e.memoizedState=n,e.baseState=o,e.baseQueue=c,r.lastRenderedState=n}if(t=r.interleaved,t!==null){a=t;do s=a.lane,ci.lanes|=s,Yp|=s,a=a.next;while(a!==t)}else a===null&&(r.lanes=0);return[e.memoizedState,r.dispatch]}function d3(t){var e=kd(),r=e.queue;if(r===null)throw Error(Br(311));r.lastRenderedReducer=t;var n=r.dispatch,a=r.pending,s=e.memoizedState;if(a!==null){r.pending=null;var o=a=a.next;do s=t(s,o.action),o=o.next;while(o!==a);yf(s,e.memoizedState)||(Zc=!0),e.memoizedState=s,e.baseQueue===null&&(e.baseState=s),r.lastRenderedState=s}return[s,n]}function EX(){}function SX(t,e){var r=ci,n=kd(),a=e(),s=!yf(n.memoizedState,a);if(s&&(n.memoizedState=a,Zc=!0),n=n.queue,nD(PX.bind(null,r,n,t),[t]),n.getSnapshot!==e||s||zo!==null&&zo.memoizedState.tag&1){if(r.flags|=2048,n2(9,jX.bind(null,r,n,a,e),void 0,null),Zo===null)throw Error(Br(349));Xp&30||IX(r,e,a)}return a}function IX(t,e,r){t.flags|=16384,t={getSnapshot:e,value:r},e=ci.updateQueue,e===null?(e={lastEffect:null,stores:null},ci.updateQueue=e,e.stores=[t]):(r=e.stores,r===null?e.stores=[t]:r.push(t))}function jX(t,e,r,n){e.value=r,e.getSnapshot=n,BX(e)&&TX(t)}function PX(t,e,r){return r(function(){BX(e)&&TX(t)})}function BX(t){var e=t.getSnapshot;t=t.value;try{var r=e();return!yf(t,r)}catch{return!0}}function TX(t){var e=fA(t,1);e!==null&&mf(e,t,1,-1)}function dU(t){var e=$f();return typeof t=="function"&&(t=t()),e.memoizedState=e.baseState=t,t={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:r2,lastRenderedState:t},e.queue=t,t=t.dispatch=Ghe.bind(null,ci,t),[e.memoizedState,t]}function n2(t,e,r,n){return t={tag:t,create:e,destroy:r,deps:n,next:null},e=ci.updateQueue,e===null?(e={lastEffect:null,stores:null},ci.updateQueue=e,e.lastEffect=t.next=t):(r=e.lastEffect,r===null?e.lastEffect=t.next=t:(n=r.next,r.next=t,t.next=n,e.lastEffect=t)),t}function kX(){return kd().memoizedState}function G_(t,e,r,n){var a=$f();ci.flags|=t,a.memoizedState=n2(1|e,r,void 0,n===void 0?null:n)}function sj(t,e,r,n){var a=kd();n=n===void 0?null:n;var s=void 0;if(yo!==null){var o=yo.memoizedState;if(s=o.destroy,n!==null&&eD(n,o.deps)){a.memoizedState=n2(e,r,s,n);return}}ci.flags|=t,a.memoizedState=n2(1|e,r,s,n)}function fU(t,e){return G_(8390656,8,t,e)}function nD(t,e){return sj(2048,8,t,e)}function FX(t,e){return sj(4,2,t,e)}function OX(t,e){return sj(4,4,t,e)}function DX(t,e){if(typeof e=="function")return t=t(),e(t),function(){e(null)};if(e!=null)return t=t(),e.current=t,function(){e.current=null}}function RX(t,e,r){return r=r!=null?r.concat([t]):null,sj(4,4,DX.bind(null,e,t),r)}function aD(){}function MX(t,e){var r=kd();e=e===void 0?null:e;var n=r.memoizedState;return n!==null&&e!==null&&eD(e,n[1])?n[0]:(r.memoizedState=[t,e],t)}function LX(t,e){var r=kd();e=e===void 0?null:e;var n=r.memoizedState;return n!==null&&e!==null&&eD(e,n[1])?n[0]:(t=t(),r.memoizedState=[t,e],t)}function UX(t,e,r){return Xp&21?(yf(r,e)||(r=GW(),ci.lanes|=r,Yp|=r,t.baseState=!0),e):(t.baseState&&(t.baseState=!1,Zc=!0),t.memoizedState=r)}function Hhe(t,e){var r=rs;rs=r!==0&&4>r?r:4,t(!0);var n=c3.transition;c3.transition={};try{t(!1),e()}finally{rs=r,c3.transition=n}}function QX(){return kd().memoizedState}function $he(t,e,r){var n=nm(t);if(r={lane:n,action:r,hasEagerState:!1,eagerState:null,next:null},VX(t))HX(e,r);else if(r=NX(t,e,r,n),r!==null){var a=Sc();mf(r,t,n,a),$X(r,e,n)}}function Ghe(t,e,r){var n=nm(t),a={lane:n,action:r,hasEagerState:!1,eagerState:null,next:null};if(VX(t))HX(e,a);else{var s=t.alternate;if(t.lanes===0&&(s===null||s.lanes===0)&&(s=e.lastRenderedReducer,s!==null))try{var o=e.lastRenderedState,l=s(o,r);if(a.hasEagerState=!0,a.eagerState=l,yf(l,o)){var c=e.interleaved;c===null?(a.next=a,WO(e)):(a.next=c.next,c.next=a),e.interleaved=a;return}}catch{}finally{}r=NX(t,e,a,n),r!==null&&(a=Sc(),mf(r,t,n,a),$X(r,e,n))}}function VX(t){var e=t.alternate;return t===ci||e!==null&&e===ci}function HX(t,e){lb=$E=!0;var r=t.pending;r===null?e.next=e:(e.next=r.next,r.next=e),t.pending=e}function $X(t,e,r){if(r&4194240){var n=e.lanes;n&=t.pendingLanes,r|=n,e.lanes=r,OO(t,r)}}var GE={readContext:Td,useCallback:Rl,useContext:Rl,useEffect:Rl,useImperativeHandle:Rl,useInsertionEffect:Rl,useLayoutEffect:Rl,useMemo:Rl,useReducer:Rl,useRef:Rl,useState:Rl,useDebugValue:Rl,useDeferredValue:Rl,useTransition:Rl,useMutableSource:Rl,useSyncExternalStore:Rl,useId:Rl,unstable_isNewReconciler:!1},Khe={readContext:Td,useCallback:function(t,e){return $f().memoizedState=[t,e===void 0?null:e],t},useContext:Td,useEffect:fU,useImperativeHandle:function(t,e,r){return r=r!=null?r.concat([t]):null,G_(4194308,4,DX.bind(null,e,t),r)},useLayoutEffect:function(t,e){return G_(4194308,4,t,e)},useInsertionEffect:function(t,e){return G_(4,2,t,e)},useMemo:function(t,e){var r=$f();return e=e===void 0?null:e,t=t(),r.memoizedState=[t,e],t},useReducer:function(t,e,r){var n=$f();return e=r!==void 0?r(e):e,n.memoizedState=n.baseState=e,t={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:t,lastRenderedState:e},n.queue=t,t=t.dispatch=$he.bind(null,ci,t),[n.memoizedState,t]},useRef:function(t){var e=$f();return t={current:t},e.memoizedState=t},useState:dU,useDebugValue:aD,useDeferredValue:function(t){return $f().memoizedState=t},useTransition:function(){var t=dU(!1),e=t[0];return t=Hhe.bind(null,t[1]),$f().memoizedState=t,[e,t]},useMutableSource:function(){},useSyncExternalStore:function(t,e,r){var n=ci,a=$f();if(Qs){if(r===void 0)throw Error(Br(407));r=r()}else{if(r=e(),Zo===null)throw Error(Br(349));Xp&30||IX(n,e,r)}a.memoizedState=r;var s={value:r,getSnapshot:e};return a.queue=s,fU(PX.bind(null,n,s,t),[t]),n.flags|=2048,n2(9,jX.bind(null,n,s,r,e),void 0,null),r},useId:function(){var t=$f(),e=Zo.identifierPrefix;if(Qs){var r=$h,n=Hh;r=(n&~(1<<32-Af(n)-1)).toString(32)+r,e=":"+e+"R"+r,r=t2++,0<r&&(e+="H"+r.toString(32)),e+=":"}else r=Vhe++,e=":"+e+"r"+r.toString(32)+":";return t.memoizedState=e},unstable_isNewReconciler:!1},qhe={readContext:Td,useCallback:MX,useContext:Td,useEffect:nD,useImperativeHandle:RX,useInsertionEffect:FX,useLayoutEffect:OX,useMemo:LX,useReducer:u3,useRef:kX,useState:function(){return u3(r2)},useDebugValue:aD,useDeferredValue:function(t){var e=kd();return UX(e,yo.memoizedState,t)},useTransition:function(){var t=u3(r2)[0],e=kd().memoizedState;return[t,e]},useMutableSource:EX,useSyncExternalStore:SX,useId:QX,unstable_isNewReconciler:!1},zhe={readContext:Td,useCallback:MX,useContext:Td,useEffect:nD,useImperativeHandle:RX,useInsertionEffect:FX,useLayoutEffect:OX,useMemo:LX,useReducer:d3,useRef:kX,useState:function(){return d3(r2)},useDebugValue:aD,useDeferredValue:function(t){var e=kd();return yo===null?e.memoizedState=t:UX(e,yo.memoizedState,t)},useTransition:function(){var t=d3(r2)[0],e=kd().memoizedState;return[t,e]},useMutableSource:EX,useSyncExternalStore:SX,useId:QX,unstable_isNewReconciler:!1};function nf(t,e){if(t&&t.defaultProps){e=ui({},e),t=t.defaultProps;for(var r in t)e[r]===void 0&&(e[r]=t[r]);return e}return e}function AT(t,e,r,n){e=t.memoizedState,r=r(n,e),r=r==null?e:ui({},e,r),t.memoizedState=r,t.lanes===0&&(t.updateQueue.baseState=r)}var ij={isMounted:function(t){return(t=t._reactInternals)?Sg(t)===t:!1},enqueueSetState:function(t,e,r){t=t._reactInternals;var n=Sc(),a=nm(t),s=Zh(n,a);s.payload=e,r!=null&&(s.callback=r),e=tm(t,s,a),e!==null&&(mf(e,t,a,n),H_(e,t,a))},enqueueReplaceState:function(t,e,r){t=t._reactInternals;var n=Sc(),a=nm(t),s=Zh(n,a);s.tag=1,s.payload=e,r!=null&&(s.callback=r),e=tm(t,s,a),e!==null&&(mf(e,t,a,n),H_(e,t,a))},enqueueForceUpdate:function(t,e){t=t._reactInternals;var r=Sc(),n=nm(t),a=Zh(r,n);a.tag=2,e!=null&&(a.callback=e),e=tm(t,a,n),e!==null&&(mf(e,t,n,r),H_(e,t,n))}};function hU(t,e,r,n,a,s,o){return t=t.stateNode,typeof t.shouldComponentUpdate=="function"?t.shouldComponentUpdate(n,s,o):e.prototype&&e.prototype.isPureReactComponent?!Wb(r,n)||!Wb(a,s):!0}function GX(t,e,r){var n=!1,a=pm,s=e.contextType;return typeof s=="object"&&s!==null?s=Td(s):(a=au(e)?zp:ic.current,n=e.contextTypes,s=(n=n!=null)?wv(t,a):pm),e=new e(r,s),t.memoizedState=e.state!==null&&e.state!==void 0?e.state:null,e.updater=ij,t.stateNode=e,e._reactInternals=t,n&&(t=t.stateNode,t.__reactInternalMemoizedUnmaskedChildContext=a,t.__reactInternalMemoizedMaskedChildContext=s),e}function AU(t,e,r,n){t=e.state,typeof e.componentWillReceiveProps=="function"&&e.componentWillReceiveProps(r,n),typeof e.UNSAFE_componentWillReceiveProps=="function"&&e.UNSAFE_componentWillReceiveProps(r,n),e.state!==t&&ij.enqueueReplaceState(e,e.state,null)}function mT(t,e,r,n){var a=t.stateNode;a.props=r,a.state=t.memoizedState,a.refs={},XO(t);var s=e.contextType;typeof s=="object"&&s!==null?a.context=Td(s):(s=au(e)?zp:ic.current,a.context=wv(t,s)),a.state=t.memoizedState,s=e.getDerivedStateFromProps,typeof s=="function"&&(AT(t,e,s,r),a.state=t.memoizedState),typeof e.getDerivedStateFromProps=="function"||typeof a.getSnapshotBeforeUpdate=="function"||typeof a.UNSAFE_componentWillMount!="function"&&typeof a.componentWillMount!="function"||(e=a.state,typeof a.componentWillMount=="function"&&a.componentWillMount(),typeof a.UNSAFE_componentWillMount=="function"&&a.UNSAFE_componentWillMount(),e!==a.state&&ij.enqueueReplaceState(a,a.state,null),VE(t,r,a,n),a.state=t.memoizedState),typeof a.componentDidMount=="function"&&(t.flags|=4194308)}function Ev(t,e){try{var r="",n=e;do r+=wfe(n),n=n.return;while(n);var a=r}catch(s){a=`
Error generating stack: `+s.message+`
`+s.stack}return{value:t,source:e,stack:a,digest:null}}function f3(t,e,r){return{value:t,source:null,stack:r??null,digest:e??null}}function pT(t,e){try{console.error(e.value)}catch(r){setTimeout(function(){throw r})}}var Whe=typeof WeakMap=="function"?WeakMap:Map;function KX(t,e,r){r=Zh(-1,r),r.tag=3,r.payload={element:null};var n=e.value;return r.callback=function(){qE||(qE=!0,ET=n),pT(t,e)},r}function qX(t,e,r){r=Zh(-1,r),r.tag=3;var n=t.type.getDerivedStateFromError;if(typeof n=="function"){var a=e.value;r.payload=function(){return n(a)},r.callback=function(){pT(t,e)}}var s=t.stateNode;return s!==null&&typeof s.componentDidCatch=="function"&&(r.callback=function(){pT(t,e),typeof n!="function"&&(rm===null?rm=new Set([this]):rm.add(this));var o=e.stack;this.componentDidCatch(e.value,{componentStack:o!==null?o:""})}),r}function mU(t,e,r){var n=t.pingCache;if(n===null){n=t.pingCache=new Whe;var a=new Set;n.set(e,a)}else a=n.get(e),a===void 0&&(a=new Set,n.set(e,a));a.has(r)||(a.add(r),t=cAe.bind(null,t,e,r),e.then(t,t))}function pU(t){do{var e;if((e=t.tag===13)&&(e=t.memoizedState,e=e!==null?e.dehydrated!==null:!0),e)return t;t=t.return}while(t!==null);return null}function gU(t,e,r,n,a){return t.mode&1?(t.flags|=65536,t.lanes=a,t):(t===e?t.flags|=65536:(t.flags|=128,r.flags|=131072,r.flags&=-52805,r.tag===1&&(r.alternate===null?r.tag=17:(e=Zh(-1,1),e.tag=2,tm(r,e,1))),r.lanes|=1),t)}var Xhe=jA.ReactCurrentOwner,Zc=!1;function yc(t,e,r,n){e.child=t===null?wX(e,null,r,n):Cv(e,t.child,r,n)}function xU(t,e,r,n,a){r=r.render;var s=e.ref;return ov(e,a),n=tD(t,e,r,n,s,a),r=rD(),t!==null&&!Zc?(e.updateQueue=t.updateQueue,e.flags&=-2053,t.lanes&=~a,hA(t,e,a)):(Qs&&r&&HO(e),e.flags|=1,yc(t,e,n,a),e.child)}function vU(t,e,r,n,a){if(t===null){var s=r.type;return typeof s=="function"&&!fD(s)&&s.defaultProps===void 0&&r.compare===null&&r.defaultProps===void 0?(e.tag=15,e.type=s,zX(t,e,s,n,a)):(t=W_(r.type,null,n,e,e.mode,a),t.ref=e.ref,t.return=e,e.child=t)}if(s=t.child,!(t.lanes&a)){var o=s.memoizedProps;if(r=r.compare,r=r!==null?r:Wb,r(o,n)&&t.ref===e.ref)return hA(t,e,a)}return e.flags|=1,t=am(s,n),t.ref=e.ref,t.return=e,e.child=t}function zX(t,e,r,n,a){if(t!==null){var s=t.memoizedProps;if(Wb(s,n)&&t.ref===e.ref)if(Zc=!1,e.pendingProps=n=s,(t.lanes&a)!==0)t.flags&131072&&(Zc=!0);else return e.lanes=t.lanes,hA(t,e,a)}return gT(t,e,r,n,a)}function WX(t,e,r){var n=e.pendingProps,a=n.children,s=t!==null?t.memoizedState:null;if(n.mode==="hidden")if(!(e.mode&1))e.memoizedState={baseLanes:0,cachePool:null,transitions:null},bs(Kx,Eu),Eu|=r;else{if(!(r&1073741824))return t=s!==null?s.baseLanes|r:r,e.lanes=e.childLanes=1073741824,e.memoizedState={baseLanes:t,cachePool:null,transitions:null},e.updateQueue=null,bs(Kx,Eu),Eu|=t,null;e.memoizedState={baseLanes:0,cachePool:null,transitions:null},n=s!==null?s.baseLanes:r,bs(Kx,Eu),Eu|=n}else s!==null?(n=s.baseLanes|r,e.memoizedState=null):n=r,bs(Kx,Eu),Eu|=n;return yc(t,e,a,r),e.child}function XX(t,e){var r=e.ref;(t===null&&r!==null||t!==null&&t.ref!==r)&&(e.flags|=512,e.flags|=2097152)}function gT(t,e,r,n,a){var s=au(r)?zp:ic.current;return s=wv(e,s),ov(e,a),r=tD(t,e,r,n,s,a),n=rD(),t!==null&&!Zc?(e.updateQueue=t.updateQueue,e.flags&=-2053,t.lanes&=~a,hA(t,e,a)):(Qs&&n&&HO(e),e.flags|=1,yc(t,e,r,a),e.child)}function yU(t,e,r,n,a){if(au(r)){var s=!0;RE(e)}else s=!1;if(ov(e,a),e.stateNode===null)K_(t,e),GX(e,r,n),mT(e,r,n,a),n=!0;else if(t===null){var o=e.stateNode,l=e.memoizedProps;o.props=l;var c=o.context,u=r.contextType;typeof u=="object"&&u!==null?u=Td(u):(u=au(r)?zp:ic.current,u=wv(e,u));var d=r.getDerivedStateFromProps,f=typeof d=="function"||typeof o.getSnapshotBeforeUpdate=="function";f||typeof o.UNSAFE_componentWillReceiveProps!="function"&&typeof o.componentWillReceiveProps!="function"||(l!==n||c!==u)&&AU(e,o,n,u),_0=!1;var A=e.memoizedState;o.state=A,VE(e,n,o,a),c=e.memoizedState,l!==n||A!==c||nu.current||_0?(typeof d=="function"&&(AT(e,r,d,n),c=e.memoizedState),(l=_0||hU(e,r,l,n,A,c,u))?(f||typeof o.UNSAFE_componentWillMount!="function"&&typeof o.componentWillMount!="function"||(typeof o.componentWillMount=="function"&&o.componentWillMount(),typeof o.UNSAFE_componentWillMount=="function"&&o.UNSAFE_componentWillMount()),typeof o.componentDidMount=="function"&&(e.flags|=4194308)):(typeof o.componentDidMount=="function"&&(e.flags|=4194308),e.memoizedProps=n,e.memoizedState=c),o.props=n,o.state=c,o.context=u,n=l):(typeof o.componentDidMount=="function"&&(e.flags|=4194308),n=!1)}else{o=e.stateNode,CX(t,e),l=e.memoizedProps,u=e.type===e.elementType?l:nf(e.type,l),o.props=u,f=e.pendingProps,A=o.context,c=r.contextType,typeof c=="object"&&c!==null?c=Td(c):(c=au(r)?zp:ic.current,c=wv(e,c));var h=r.getDerivedStateFromProps;(d=typeof h=="function"||typeof o.getSnapshotBeforeUpdate=="function")||typeof o.UNSAFE_componentWillReceiveProps!="function"&&typeof o.componentWillReceiveProps!="function"||(l!==f||A!==c)&&AU(e,o,n,c),_0=!1,A=e.memoizedState,o.state=A,VE(e,n,o,a);var m=e.memoizedState;l!==f||A!==m||nu.current||_0?(typeof h=="function"&&(AT(e,r,h,n),m=e.memoizedState),(u=_0||hU(e,r,u,n,A,m,c)||!1)?(d||typeof o.UNSAFE_componentWillUpdate!="function"&&typeof o.componentWillUpdate!="function"||(typeof o.componentWillUpdate=="function"&&o.componentWillUpdate(n,m,c),typeof o.UNSAFE_componentWillUpdate=="function"&&o.UNSAFE_componentWillUpdate(n,m,c)),typeof o.componentDidUpdate=="function"&&(e.flags|=4),typeof o.getSnapshotBeforeUpdate=="function"&&(e.flags|=1024)):(typeof o.componentDidUpdate!="function"||l===t.memoizedProps&&A===t.memoizedState||(e.flags|=4),typeof o.getSnapshotBeforeUpdate!="function"||l===t.memoizedProps&&A===t.memoizedState||(e.flags|=1024),e.memoizedProps=n,e.memoizedState=m),o.props=n,o.state=m,o.context=c,n=u):(typeof o.componentDidUpdate!="function"||l===t.memoizedProps&&A===t.memoizedState||(e.flags|=4),typeof o.getSnapshotBeforeUpdate!="function"||l===t.memoizedProps&&A===t.memoizedState||(e.flags|=1024),n=!1)}return xT(t,e,r,n,s,a)}function xT(t,e,r,n,a,s){XX(t,e);var o=(e.flags&128)!==0;if(!n&&!o)return a&&sU(e,r,!1),hA(t,e,s);n=e.stateNode,Xhe.current=e;var l=o&&typeof r.getDerivedStateFromError!="function"?null:n.render();return e.flags|=1,t!==null&&o?(e.child=Cv(e,t.child,null,s),e.child=Cv(e,null,l,s)):yc(t,e,l,s),e.memoizedState=n.state,a&&sU(e,r,!0),e.child}function YX(t){var e=t.stateNode;e.pendingContext?aU(t,e.pendingContext,e.pendingContext!==e.context):e.context&&aU(t,e.context,!1),YO(t,e.containerInfo)}function bU(t,e,r,n,a){return Nv(),GO(a),e.flags|=256,yc(t,e,r,n),e.child}var vT={dehydrated:null,treeContext:null,retryLane:0};function yT(t){return{baseLanes:t,cachePool:null,transitions:null}}function JX(t,e,r){var n=e.pendingProps,a=si.current,s=!1,o=(e.flags&128)!==0,l;if((l=o)||(l=t!==null&&t.memoizedState===null?!1:(a&2)!==0),l?(s=!0,e.flags&=-129):(t===null||t.memoizedState!==null)&&(a|=1),bs(si,a&1),t===null)return fT(e),t=e.memoizedState,t!==null&&(t=t.dehydrated,t!==null)?(e.mode&1?t.data==="$!"?e.lanes=8:e.lanes=1073741824:e.lanes=1,null):(o=n.children,t=n.fallback,s?(n=e.mode,s=e.child,o={mode:"hidden",children:o},!(n&1)&&s!==null?(s.childLanes=0,s.pendingProps=o):s=cj(o,n,0,null),t=Bp(t,n,r,null),s.return=e,t.return=e,s.sibling=t,e.child=s,e.child.memoizedState=yT(r),e.memoizedState=vT,t):sD(e,o));if(a=t.memoizedState,a!==null&&(l=a.dehydrated,l!==null))return Yhe(t,e,o,n,l,a,r);if(s){s=n.fallback,o=e.mode,a=t.child,l=a.sibling;var c={mode:"hidden",children:n.children};return!(o&1)&&e.child!==a?(n=e.child,n.childLanes=0,n.pendingProps=c,e.deletions=null):(n=am(a,c),n.subtreeFlags=a.subtreeFlags&14680064),l!==null?s=am(l,s):(s=Bp(s,o,r,null),s.flags|=2),s.return=e,n.return=e,n.sibling=s,e.child=n,n=s,s=e.child,o=t.child.memoizedState,o=o===null?yT(r):{baseLanes:o.baseLanes|r,cachePool:null,transitions:o.transitions},s.memoizedState=o,s.childLanes=t.childLanes&~r,e.memoizedState=vT,n}return s=t.child,t=s.sibling,n=am(s,{mode:"visible",children:n.children}),!(e.mode&1)&&(n.lanes=r),n.return=e,n.sibling=null,t!==null&&(r=e.deletions,r===null?(e.deletions=[t],e.flags|=16):r.push(t)),e.child=n,e.memoizedState=null,n}function sD(t,e){return e=cj({mode:"visible",children:e},t.mode,0,null),e.return=t,t.child=e}function zN(t,e,r,n){return n!==null&&GO(n),Cv(e,t.child,null,r),t=sD(e,e.pendingProps.children),t.flags|=2,e.memoizedState=null,t}function Yhe(t,e,r,n,a,s,o){if(r)return e.flags&256?(e.flags&=-257,n=f3(Error(Br(422))),zN(t,e,o,n)):e.memoizedState!==null?(e.child=t.child,e.flags|=128,null):(s=n.fallback,a=e.mode,n=cj({mode:"visible",children:n.children},a,0,null),s=Bp(s,a,o,null),s.flags|=2,n.return=e,s.return=e,n.sibling=s,e.child=n,e.mode&1&&Cv(e,t.child,null,o),e.child.memoizedState=yT(o),e.memoizedState=vT,s);if(!(e.mode&1))return zN(t,e,o,null);if(a.data==="$!"){if(n=a.nextSibling&&a.nextSibling.dataset,n)var l=n.dgst;return n=l,s=Error(Br(419)),n=f3(s,n,void 0),zN(t,e,o,n)}if(l=(o&t.childLanes)!==0,Zc||l){if(n=Zo,n!==null){switch(o&-o){case 4:a=2;break;case 16:a=8;break;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:a=32;break;case 536870912:a=268435456;break;default:a=0}a=a&(n.suspendedLanes|o)?0:a,a!==0&&a!==s.retryLane&&(s.retryLane=a,fA(t,a),mf(n,t,a,-1))}return dD(),n=f3(Error(Br(421))),zN(t,e,o,n)}return a.data==="$?"?(e.flags|=128,e.child=t.child,e=uAe.bind(null,t),a._reactRetry=e,null):(t=s.treeContext,ku=em(a.nextSibling),Ru=e,Qs=!0,sf=null,t!==null&&(xd[vd++]=Hh,xd[vd++]=$h,xd[vd++]=Wp,Hh=t.id,$h=t.overflow,Wp=e),e=sD(e,n.children),e.flags|=4096,e)}function wU(t,e,r){t.lanes|=e;var n=t.alternate;n!==null&&(n.lanes|=e),hT(t.return,e,r)}function h3(t,e,r,n,a){var s=t.memoizedState;s===null?t.memoizedState={isBackwards:e,rendering:null,renderingStartTime:0,last:n,tail:r,tailMode:a}:(s.isBackwards=e,s.rendering=null,s.renderingStartTime=0,s.last=n,s.tail=r,s.tailMode=a)}function ZX(t,e,r){var n=e.pendingProps,a=n.revealOrder,s=n.tail;if(yc(t,e,n.children,r),n=si.current,n&2)n=n&1|2,e.flags|=128;else{if(t!==null&&t.flags&128)e:for(t=e.child;t!==null;){if(t.tag===13)t.memoizedState!==null&&wU(t,r,e);else if(t.tag===19)wU(t,r,e);else if(t.child!==null){t.child.return=t,t=t.child;continue}if(t===e)break e;for(;t.sibling===null;){if(t.return===null||t.return===e)break e;t=t.return}t.sibling.return=t.return,t=t.sibling}n&=1}if(bs(si,n),!(e.mode&1))e.memoizedState=null;else switch(a){case"forwards":for(r=e.child,a=null;r!==null;)t=r.alternate,t!==null&&HE(t)===null&&(a=r),r=r.sibling;r=a,r===null?(a=e.child,e.child=null):(a=r.sibling,r.sibling=null),h3(e,!1,a,r,s);break;case"backwards":for(r=null,a=e.child,e.child=null;a!==null;){if(t=a.alternate,t!==null&&HE(t)===null){e.child=a;break}t=a.sibling,a.sibling=r,r=a,a=t}h3(e,!0,r,null,s);break;case"together":h3(e,!1,null,null,void 0);break;default:e.memoizedState=null}return e.child}function K_(t,e){!(e.mode&1)&&t!==null&&(t.alternate=null,e.alternate=null,e.flags|=2)}function hA(t,e,r){if(t!==null&&(e.dependencies=t.dependencies),Yp|=e.lanes,!(r&e.childLanes))return null;if(t!==null&&e.child!==t.child)throw Error(Br(153));if(e.child!==null){for(t=e.child,r=am(t,t.pendingProps),e.child=r,r.return=e;t.sibling!==null;)t=t.sibling,r=r.sibling=am(t,t.pendingProps),r.return=e;r.sibling=null}return e.child}function Jhe(t,e,r){switch(e.tag){case 3:YX(e),Nv();break;case 5:_X(e);break;case 1:au(e.type)&&RE(e);break;case 4:YO(e,e.stateNode.containerInfo);break;case 10:var n=e.type._context,a=e.memoizedProps.value;bs(UE,n._currentValue),n._currentValue=a;break;case 13:if(n=e.memoizedState,n!==null)return n.dehydrated!==null?(bs(si,si.current&1),e.flags|=128,null):r&e.child.childLanes?JX(t,e,r):(bs(si,si.current&1),t=hA(t,e,r),t!==null?t.sibling:null);bs(si,si.current&1);break;case 19:if(n=(r&e.childLanes)!==0,t.flags&128){if(n)return ZX(t,e,r);e.flags|=128}if(a=e.memoizedState,a!==null&&(a.rendering=null,a.tail=null,a.lastEffect=null),bs(si,si.current),n)break;return null;case 22:case 23:return e.lanes=0,WX(t,e,r)}return hA(t,e,r)}var eY,bT,tY,rY;eY=function(t,e){for(var r=e.child;r!==null;){if(r.tag===5||r.tag===6)t.appendChild(r.stateNode);else if(r.tag!==4&&r.child!==null){r.child.return=r,r=r.child;continue}if(r===e)break;for(;r.sibling===null;){if(r.return===null||r.return===e)return;r=r.return}r.sibling.return=r.return,r=r.sibling}};bT=function(){};tY=function(t,e,r,n){var a=t.memoizedProps;if(a!==n){t=e.stateNode,bp(rh.current);var s=null;switch(r){case"input":a=HB(t,a),n=HB(t,n),s=[];break;case"select":a=ui({},a,{value:void 0}),n=ui({},n,{value:void 0}),s=[];break;case"textarea":a=KB(t,a),n=KB(t,n),s=[];break;default:typeof a.onClick!="function"&&typeof n.onClick=="function"&&(t.onclick=OE)}zB(r,n);var o;r=null;for(u in a)if(!n.hasOwnProperty(u)&&a.hasOwnProperty(u)&&a[u]!=null)if(u==="style"){var l=a[u];for(o in l)l.hasOwnProperty(o)&&(r||(r={}),r[o]="")}else u!=="dangerouslySetInnerHTML"&&u!=="children"&&u!=="suppressContentEditableWarning"&&u!=="suppressHydrationWarning"&&u!=="autoFocus"&&(Vb.hasOwnProperty(u)?s||(s=[]):(s=s||[]).push(u,null));for(u in n){var c=n[u];if(l=a!=null?a[u]:void 0,n.hasOwnProperty(u)&&c!==l&&(c!=null||l!=null))if(u==="style")if(l){for(o in l)!l.hasOwnProperty(o)||c&&c.hasOwnProperty(o)||(r||(r={}),r[o]="");for(o in c)c.hasOwnProperty(o)&&l[o]!==c[o]&&(r||(r={}),r[o]=c[o])}else r||(s||(s=[]),s.push(u,r)),r=c;else u==="dangerouslySetInnerHTML"?(c=c?c.__html:void 0,l=l?l.__html:void 0,c!=null&&l!==c&&(s=s||[]).push(u,c)):u==="children"?typeof c!="string"&&typeof c!="number"||(s=s||[]).push(u,""+c):u!=="suppressContentEditableWarning"&&u!=="suppressHydrationWarning"&&(Vb.hasOwnProperty(u)?(c!=null&&u==="onScroll"&&Es("scroll",t),s||l===c||(s=[])):(s=s||[]).push(u,c))}r&&(s=s||[]).push("style",r);var u=s;(e.updateQueue=u)&&(e.flags|=4)}};rY=function(t,e,r,n){r!==n&&(e.flags|=4)};function Z1(t,e){if(!Qs)switch(t.tailMode){case"hidden":e=t.tail;for(var r=null;e!==null;)e.alternate!==null&&(r=e),e=e.sibling;r===null?t.tail=null:r.sibling=null;break;case"collapsed":r=t.tail;for(var n=null;r!==null;)r.alternate!==null&&(n=r),r=r.sibling;n===null?e||t.tail===null?t.tail=null:t.tail.sibling=null:n.sibling=null}}function Ml(t){var e=t.alternate!==null&&t.alternate.child===t.child,r=0,n=0;if(e)for(var a=t.child;a!==null;)r|=a.lanes|a.childLanes,n|=a.subtreeFlags&14680064,n|=a.flags&14680064,a.return=t,a=a.sibling;else for(a=t.child;a!==null;)r|=a.lanes|a.childLanes,n|=a.subtreeFlags,n|=a.flags,a.return=t,a=a.sibling;return t.subtreeFlags|=n,t.childLanes=r,e}function Zhe(t,e,r){var n=e.pendingProps;switch($O(e),e.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return Ml(e),null;case 1:return au(e.type)&&DE(),Ml(e),null;case 3:return n=e.stateNode,_v(),Ts(nu),Ts(ic),ZO(),n.pendingContext&&(n.context=n.pendingContext,n.pendingContext=null),(t===null||t.child===null)&&(KN(e)?e.flags|=4:t===null||t.memoizedState.isDehydrated&&!(e.flags&256)||(e.flags|=1024,sf!==null&&(jT(sf),sf=null))),bT(t,e),Ml(e),null;case 5:JO(e);var a=bp(e2.current);if(r=e.type,t!==null&&e.stateNode!=null)tY(t,e,r,n,a),t.ref!==e.ref&&(e.flags|=512,e.flags|=2097152);else{if(!n){if(e.stateNode===null)throw Error(Br(166));return Ml(e),null}if(t=bp(rh.current),KN(e)){n=e.stateNode,r=e.type;var s=e.memoizedProps;switch(n[Gf]=e,n[Jb]=s,t=(e.mode&1)!==0,r){case"dialog":Es("cancel",n),Es("close",n);break;case"iframe":case"object":case"embed":Es("load",n);break;case"video":case"audio":for(a=0;a<Fy.length;a++)Es(Fy[a],n);break;case"source":Es("error",n);break;case"img":case"image":case"link":Es("error",n),Es("load",n);break;case"details":Es("toggle",n);break;case"input":BL(n,s),Es("invalid",n);break;case"select":n._wrapperState={wasMultiple:!!s.multiple},Es("invalid",n);break;case"textarea":kL(n,s),Es("invalid",n)}zB(r,s),a=null;for(var o in s)if(s.hasOwnProperty(o)){var l=s[o];o==="children"?typeof l=="string"?n.textContent!==l&&(s.suppressHydrationWarning!==!0&&GN(n.textContent,l,t),a=["children",l]):typeof l=="number"&&n.textContent!==""+l&&(s.suppressHydrationWarning!==!0&&GN(n.textContent,l,t),a=["children",""+l]):Vb.hasOwnProperty(o)&&l!=null&&o==="onScroll"&&Es("scroll",n)}switch(r){case"input":RN(n),TL(n,s,!0);break;case"textarea":RN(n),FL(n);break;case"select":case"option":break;default:typeof s.onClick=="function"&&(n.onclick=OE)}n=a,e.updateQueue=n,n!==null&&(e.flags|=4)}else{o=a.nodeType===9?a:a.ownerDocument,t==="http://www.w3.org/1999/xhtml"&&(t=PW(r)),t==="http://www.w3.org/1999/xhtml"?r==="script"?(t=o.createElement("div"),t.innerHTML="<script><\/script>",t=t.removeChild(t.firstChild)):typeof n.is=="string"?t=o.createElement(r,{is:n.is}):(t=o.createElement(r),r==="select"&&(o=t,n.multiple?o.multiple=!0:n.size&&(o.size=n.size))):t=o.createElementNS(t,r),t[Gf]=e,t[Jb]=n,eY(t,e,!1,!1),e.stateNode=t;e:{switch(o=WB(r,n),r){case"dialog":Es("cancel",t),Es("close",t),a=n;break;case"iframe":case"object":case"embed":Es("load",t),a=n;break;case"video":case"audio":for(a=0;a<Fy.length;a++)Es(Fy[a],t);a=n;break;case"source":Es("error",t),a=n;break;case"img":case"image":case"link":Es("error",t),Es("load",t),a=n;break;case"details":Es("toggle",t),a=n;break;case"input":BL(t,n),a=HB(t,n),Es("invalid",t);break;case"option":a=n;break;case"select":t._wrapperState={wasMultiple:!!n.multiple},a=ui({},n,{value:void 0}),Es("invalid",t);break;case"textarea":kL(t,n),a=KB(t,n),Es("invalid",t);break;default:a=n}zB(r,a),l=a;for(s in l)if(l.hasOwnProperty(s)){var c=l[s];s==="style"?kW(t,c):s==="dangerouslySetInnerHTML"?(c=c?c.__html:void 0,c!=null&&BW(t,c)):s==="children"?typeof c=="string"?(r!=="textarea"||c!=="")&&Hb(t,c):typeof c=="number"&&Hb(t,""+c):s!=="suppressContentEditableWarning"&&s!=="suppressHydrationWarning"&&s!=="autoFocus"&&(Vb.hasOwnProperty(s)?c!=null&&s==="onScroll"&&Es("scroll",t):c!=null&&jO(t,s,c,o))}switch(r){case"input":RN(t),TL(t,n,!1);break;case"textarea":RN(t),FL(t);break;case"option":n.value!=null&&t.setAttribute("value",""+mm(n.value));break;case"select":t.multiple=!!n.multiple,s=n.value,s!=null?nv(t,!!n.multiple,s,!1):n.defaultValue!=null&&nv(t,!!n.multiple,n.defaultValue,!0);break;default:typeof a.onClick=="function"&&(t.onclick=OE)}switch(r){case"button":case"input":case"select":case"textarea":n=!!n.autoFocus;break e;case"img":n=!0;break e;default:n=!1}}n&&(e.flags|=4)}e.ref!==null&&(e.flags|=512,e.flags|=2097152)}return Ml(e),null;case 6:if(t&&e.stateNode!=null)rY(t,e,t.memoizedProps,n);else{if(typeof n!="string"&&e.stateNode===null)throw Error(Br(166));if(r=bp(e2.current),bp(rh.current),KN(e)){if(n=e.stateNode,r=e.memoizedProps,n[Gf]=e,(s=n.nodeValue!==r)&&(t=Ru,t!==null))switch(t.tag){case 3:GN(n.nodeValue,r,(t.mode&1)!==0);break;case 5:t.memoizedProps.suppressHydrationWarning!==!0&&GN(n.nodeValue,r,(t.mode&1)!==0)}s&&(e.flags|=4)}else n=(r.nodeType===9?r:r.ownerDocument).createTextNode(n),n[Gf]=e,e.stateNode=n}return Ml(e),null;case 13:if(Ts(si),n=e.memoizedState,t===null||t.memoizedState!==null&&t.memoizedState.dehydrated!==null){if(Qs&&ku!==null&&e.mode&1&&!(e.flags&128))yX(),Nv(),e.flags|=98560,s=!1;else if(s=KN(e),n!==null&&n.dehydrated!==null){if(t===null){if(!s)throw Error(Br(318));if(s=e.memoizedState,s=s!==null?s.dehydrated:null,!s)throw Error(Br(317));s[Gf]=e}else Nv(),!(e.flags&128)&&(e.memoizedState=null),e.flags|=4;Ml(e),s=!1}else sf!==null&&(jT(sf),sf=null),s=!0;if(!s)return e.flags&65536?e:null}return e.flags&128?(e.lanes=r,e):(n=n!==null,n!==(t!==null&&t.memoizedState!==null)&&n&&(e.child.flags|=8192,e.mode&1&&(t===null||si.current&1?jo===0&&(jo=3):dD())),e.updateQueue!==null&&(e.flags|=4),Ml(e),null);case 4:return _v(),bT(t,e),t===null&&Xb(e.stateNode.containerInfo),Ml(e),null;case 10:return zO(e.type._context),Ml(e),null;case 17:return au(e.type)&&DE(),Ml(e),null;case 19:if(Ts(si),s=e.memoizedState,s===null)return Ml(e),null;if(n=(e.flags&128)!==0,o=s.rendering,o===null)if(n)Z1(s,!1);else{if(jo!==0||t!==null&&t.flags&128)for(t=e.child;t!==null;){if(o=HE(t),o!==null){for(e.flags|=128,Z1(s,!1),n=o.updateQueue,n!==null&&(e.updateQueue=n,e.flags|=4),e.subtreeFlags=0,n=r,r=e.child;r!==null;)s=r,t=n,s.flags&=14680066,o=s.alternate,o===null?(s.childLanes=0,s.lanes=t,s.child=null,s.subtreeFlags=0,s.memoizedProps=null,s.memoizedState=null,s.updateQueue=null,s.dependencies=null,s.stateNode=null):(s.childLanes=o.childLanes,s.lanes=o.lanes,s.child=o.child,s.subtreeFlags=0,s.deletions=null,s.memoizedProps=o.memoizedProps,s.memoizedState=o.memoizedState,s.updateQueue=o.updateQueue,s.type=o.type,t=o.dependencies,s.dependencies=t===null?null:{lanes:t.lanes,firstContext:t.firstContext}),r=r.sibling;return bs(si,si.current&1|2),e.child}t=t.sibling}s.tail!==null&&Ui()>Sv&&(e.flags|=128,n=!0,Z1(s,!1),e.lanes=4194304)}else{if(!n)if(t=HE(o),t!==null){if(e.flags|=128,n=!0,r=t.updateQueue,r!==null&&(e.updateQueue=r,e.flags|=4),Z1(s,!0),s.tail===null&&s.tailMode==="hidden"&&!o.alternate&&!Qs)return Ml(e),null}else 2*Ui()-s.renderingStartTime>Sv&&r!==1073741824&&(e.flags|=128,n=!0,Z1(s,!1),e.lanes=4194304);s.isBackwards?(o.sibling=e.child,e.child=o):(r=s.last,r!==null?r.sibling=o:e.child=o,s.last=o)}return s.tail!==null?(e=s.tail,s.rendering=e,s.tail=e.sibling,s.renderingStartTime=Ui(),e.sibling=null,r=si.current,bs(si,n?r&1|2:r&1),e):(Ml(e),null);case 22:case 23:return uD(),n=e.memoizedState!==null,t!==null&&t.memoizedState!==null!==n&&(e.flags|=8192),n&&e.mode&1?Eu&1073741824&&(Ml(e),e.subtreeFlags&6&&(e.flags|=8192)):Ml(e),null;case 24:return null;case 25:return null}throw Error(Br(156,e.tag))}function eAe(t,e){switch($O(e),e.tag){case 1:return au(e.type)&&DE(),t=e.flags,t&65536?(e.flags=t&-65537|128,e):null;case 3:return _v(),Ts(nu),Ts(ic),ZO(),t=e.flags,t&65536&&!(t&128)?(e.flags=t&-65537|128,e):null;case 5:return JO(e),null;case 13:if(Ts(si),t=e.memoizedState,t!==null&&t.dehydrated!==null){if(e.alternate===null)throw Error(Br(340));Nv()}return t=e.flags,t&65536?(e.flags=t&-65537|128,e):null;case 19:return Ts(si),null;case 4:return _v(),null;case 10:return zO(e.type._context),null;case 22:case 23:return uD(),null;case 24:return null;default:return null}}var WN=!1,ec=!1,tAe=typeof WeakSet=="function"?WeakSet:Set,an=null;function Gx(t,e){var r=t.ref;if(r!==null)if(typeof r=="function")try{r(null)}catch(n){Ni(t,e,n)}else r.current=null}function wT(t,e,r){try{r()}catch(n){Ni(t,e,n)}}var NU=!1;function rAe(t,e){if(sT=TE,t=oX(),VO(t)){if("selectionStart"in t)var r={start:t.selectionStart,end:t.selectionEnd};else e:{r=(r=t.ownerDocument)&&r.defaultView||window;var n=r.getSelection&&r.getSelection();if(n&&n.rangeCount!==0){r=n.anchorNode;var a=n.anchorOffset,s=n.focusNode;n=n.focusOffset;try{r.nodeType,s.nodeType}catch{r=null;break e}var o=0,l=-1,c=-1,u=0,d=0,f=t,A=null;t:for(;;){for(var h;f!==r||a!==0&&f.nodeType!==3||(l=o+a),f!==s||n!==0&&f.nodeType!==3||(c=o+n),f.nodeType===3&&(o+=f.nodeValue.length),(h=f.firstChild)!==null;)A=f,f=h;for(;;){if(f===t)break t;if(A===r&&++u===a&&(l=o),A===s&&++d===n&&(c=o),(h=f.nextSibling)!==null)break;f=A,A=f.parentNode}f=h}r=l===-1||c===-1?null:{start:l,end:c}}else r=null}r=r||{start:0,end:0}}else r=null;for(iT={focusedElem:t,selectionRange:r},TE=!1,an=e;an!==null;)if(e=an,t=e.child,(e.subtreeFlags&1028)!==0&&t!==null)t.return=e,an=t;else for(;an!==null;){e=an;try{var m=e.alternate;if(e.flags&1024)switch(e.tag){case 0:case 11:case 15:break;case 1:if(m!==null){var p=m.memoizedProps,x=m.memoizedState,v=e.stateNode,y=v.getSnapshotBeforeUpdate(e.elementType===e.type?p:nf(e.type,p),x);v.__reactInternalSnapshotBeforeUpdate=y}break;case 3:var b=e.stateNode.containerInfo;b.nodeType===1?b.textContent="":b.nodeType===9&&b.documentElement&&b.removeChild(b.documentElement);break;case 5:case 6:case 4:case 17:break;default:throw Error(Br(163))}}catch(w){Ni(e,e.return,w)}if(t=e.sibling,t!==null){t.return=e.return,an=t;break}an=e.return}return m=NU,NU=!1,m}function cb(t,e,r){var n=e.updateQueue;if(n=n!==null?n.lastEffect:null,n!==null){var a=n=n.next;do{if((a.tag&t)===t){var s=a.destroy;a.destroy=void 0,s!==void 0&&wT(e,r,s)}a=a.next}while(a!==n)}}function oj(t,e){if(e=e.updateQueue,e=e!==null?e.lastEffect:null,e!==null){var r=e=e.next;do{if((r.tag&t)===t){var n=r.create;r.destroy=n()}r=r.next}while(r!==e)}}function NT(t){var e=t.ref;if(e!==null){var r=t.stateNode;switch(t.tag){case 5:t=r;break;default:t=r}typeof e=="function"?e(t):e.current=t}}function nY(t){var e=t.alternate;e!==null&&(t.alternate=null,nY(e)),t.child=null,t.deletions=null,t.sibling=null,t.tag===5&&(e=t.stateNode,e!==null&&(delete e[Gf],delete e[Jb],delete e[cT],delete e[Mhe],delete e[Lhe])),t.stateNode=null,t.return=null,t.dependencies=null,t.memoizedProps=null,t.memoizedState=null,t.pendingProps=null,t.stateNode=null,t.updateQueue=null}function aY(t){return t.tag===5||t.tag===3||t.tag===4}function CU(t){e:for(;;){for(;t.sibling===null;){if(t.return===null||aY(t.return))return null;t=t.return}for(t.sibling.return=t.return,t=t.sibling;t.tag!==5&&t.tag!==6&&t.tag!==18;){if(t.flags&2||t.child===null||t.tag===4)continue e;t.child.return=t,t=t.child}if(!(t.flags&2))return t.stateNode}}function CT(t,e,r){var n=t.tag;if(n===5||n===6)t=t.stateNode,e?r.nodeType===8?r.parentNode.insertBefore(t,e):r.insertBefore(t,e):(r.nodeType===8?(e=r.parentNode,e.insertBefore(t,r)):(e=r,e.appendChild(t)),r=r._reactRootContainer,r!=null||e.onclick!==null||(e.onclick=OE));else if(n!==4&&(t=t.child,t!==null))for(CT(t,e,r),t=t.sibling;t!==null;)CT(t,e,r),t=t.sibling}function _T(t,e,r){var n=t.tag;if(n===5||n===6)t=t.stateNode,e?r.insertBefore(t,e):r.appendChild(t);else if(n!==4&&(t=t.child,t!==null))for(_T(t,e,r),t=t.sibling;t!==null;)_T(t,e,r),t=t.sibling}var vl=null,af=!1;function s0(t,e,r){for(r=r.child;r!==null;)sY(t,e,r),r=r.sibling}function sY(t,e,r){if(th&&typeof th.onCommitFiberUnmount=="function")try{th.onCommitFiberUnmount(ZI,r)}catch{}switch(r.tag){case 5:ec||Gx(r,e);case 6:var n=vl,a=af;vl=null,s0(t,e,r),vl=n,af=a,vl!==null&&(af?(t=vl,r=r.stateNode,t.nodeType===8?t.parentNode.removeChild(r):t.removeChild(r)):vl.removeChild(r.stateNode));break;case 18:vl!==null&&(af?(t=vl,r=r.stateNode,t.nodeType===8?i3(t.parentNode,r):t.nodeType===1&&i3(t,r),qb(t)):i3(vl,r.stateNode));break;case 4:n=vl,a=af,vl=r.stateNode.containerInfo,af=!0,s0(t,e,r),vl=n,af=a;break;case 0:case 11:case 14:case 15:if(!ec&&(n=r.updateQueue,n!==null&&(n=n.lastEffect,n!==null))){a=n=n.next;do{var s=a,o=s.destroy;s=s.tag,o!==void 0&&(s&2||s&4)&&wT(r,e,o),a=a.next}while(a!==n)}s0(t,e,r);break;case 1:if(!ec&&(Gx(r,e),n=r.stateNode,typeof n.componentWillUnmount=="function"))try{n.props=r.memoizedProps,n.state=r.memoizedState,n.componentWillUnmount()}catch(l){Ni(r,e,l)}s0(t,e,r);break;case 21:s0(t,e,r);break;case 22:r.mode&1?(ec=(n=ec)||r.memoizedState!==null,s0(t,e,r),ec=n):s0(t,e,r);break;default:s0(t,e,r)}}function _U(t){var e=t.updateQueue;if(e!==null){t.updateQueue=null;var r=t.stateNode;r===null&&(r=t.stateNode=new tAe),e.forEach(function(n){var a=dAe.bind(null,t,n);r.has(n)||(r.add(n),n.then(a,a))})}}function zd(t,e){var r=e.deletions;if(r!==null)for(var n=0;n<r.length;n++){var a=r[n];try{var s=t,o=e,l=o;e:for(;l!==null;){switch(l.tag){case 5:vl=l.stateNode,af=!1;break e;case 3:vl=l.stateNode.containerInfo,af=!0;break e;case 4:vl=l.stateNode.containerInfo,af=!0;break e}l=l.return}if(vl===null)throw Error(Br(160));sY(s,o,a),vl=null,af=!1;var c=a.alternate;c!==null&&(c.return=null),a.return=null}catch(u){Ni(a,e,u)}}if(e.subtreeFlags&12854)for(e=e.child;e!==null;)iY(e,t),e=e.sibling}function iY(t,e){var r=t.alternate,n=t.flags;switch(t.tag){case 0:case 11:case 14:case 15:if(zd(e,t),Of(t),n&4){try{cb(3,t,t.return),oj(3,t)}catch(p){Ni(t,t.return,p)}try{cb(5,t,t.return)}catch(p){Ni(t,t.return,p)}}break;case 1:zd(e,t),Of(t),n&512&&r!==null&&Gx(r,r.return);break;case 5:if(zd(e,t),Of(t),n&512&&r!==null&&Gx(r,r.return),t.flags&32){var a=t.stateNode;try{Hb(a,"")}catch(p){Ni(t,t.return,p)}}if(n&4&&(a=t.stateNode,a!=null)){var s=t.memoizedProps,o=r!==null?r.memoizedProps:s,l=t.type,c=t.updateQueue;if(t.updateQueue=null,c!==null)try{l==="input"&&s.type==="radio"&&s.name!=null&&IW(a,s),WB(l,o);var u=WB(l,s);for(o=0;o<c.length;o+=2){var d=c[o],f=c[o+1];d==="style"?kW(a,f):d==="dangerouslySetInnerHTML"?BW(a,f):d==="children"?Hb(a,f):jO(a,d,f,u)}switch(l){case"input":$B(a,s);break;case"textarea":jW(a,s);break;case"select":var A=a._wrapperState.wasMultiple;a._wrapperState.wasMultiple=!!s.multiple;var h=s.value;h!=null?nv(a,!!s.multiple,h,!1):A!==!!s.multiple&&(s.defaultValue!=null?nv(a,!!s.multiple,s.defaultValue,!0):nv(a,!!s.multiple,s.multiple?[]:"",!1))}a[Jb]=s}catch(p){Ni(t,t.return,p)}}break;case 6:if(zd(e,t),Of(t),n&4){if(t.stateNode===null)throw Error(Br(162));a=t.stateNode,s=t.memoizedProps;try{a.nodeValue=s}catch(p){Ni(t,t.return,p)}}break;case 3:if(zd(e,t),Of(t),n&4&&r!==null&&r.memoizedState.isDehydrated)try{qb(e.containerInfo)}catch(p){Ni(t,t.return,p)}break;case 4:zd(e,t),Of(t);break;case 13:zd(e,t),Of(t),a=t.child,a.flags&8192&&(s=a.memoizedState!==null,a.stateNode.isHidden=s,!s||a.alternate!==null&&a.alternate.memoizedState!==null||(lD=Ui())),n&4&&_U(t);break;case 22:if(d=r!==null&&r.memoizedState!==null,t.mode&1?(ec=(u=ec)||d,zd(e,t),ec=u):zd(e,t),Of(t),n&8192){if(u=t.memoizedState!==null,(t.stateNode.isHidden=u)&&!d&&t.mode&1)for(an=t,d=t.child;d!==null;){for(f=an=d;an!==null;){switch(A=an,h=A.child,A.tag){case 0:case 11:case 14:case 15:cb(4,A,A.return);break;case 1:Gx(A,A.return);var m=A.stateNode;if(typeof m.componentWillUnmount=="function"){n=A,r=A.return;try{e=n,m.props=e.memoizedProps,m.state=e.memoizedState,m.componentWillUnmount()}catch(p){Ni(n,r,p)}}break;case 5:Gx(A,A.return);break;case 22:if(A.memoizedState!==null){SU(f);continue}}h!==null?(h.return=A,an=h):SU(f)}d=d.sibling}e:for(d=null,f=t;;){if(f.tag===5){if(d===null){d=f;try{a=f.stateNode,u?(s=a.style,typeof s.setProperty=="function"?s.setProperty("display","none","important"):s.display="none"):(l=f.stateNode,c=f.memoizedProps.style,o=c!=null&&c.hasOwnProperty("display")?c.display:null,l.style.display=TW("display",o))}catch(p){Ni(t,t.return,p)}}}else if(f.tag===6){if(d===null)try{f.stateNode.nodeValue=u?"":f.memoizedProps}catch(p){Ni(t,t.return,p)}}else if((f.tag!==22&&f.tag!==23||f.memoizedState===null||f===t)&&f.child!==null){f.child.return=f,f=f.child;continue}if(f===t)break e;for(;f.sibling===null;){if(f.return===null||f.return===t)break e;d===f&&(d=null),f=f.return}d===f&&(d=null),f.sibling.return=f.return,f=f.sibling}}break;case 19:zd(e,t),Of(t),n&4&&_U(t);break;case 21:break;default:zd(e,t),Of(t)}}function Of(t){var e=t.flags;if(e&2){try{e:{for(var r=t.return;r!==null;){if(aY(r)){var n=r;break e}r=r.return}throw Error(Br(160))}switch(n.tag){case 5:var a=n.stateNode;n.flags&32&&(Hb(a,""),n.flags&=-33);var s=CU(t);_T(t,s,a);break;case 3:case 4:var o=n.stateNode.containerInfo,l=CU(t);CT(t,l,o);break;default:throw Error(Br(161))}}catch(c){Ni(t,t.return,c)}t.flags&=-3}e&4096&&(t.flags&=-4097)}function nAe(t,e,r){an=t,oY(t)}function oY(t,e,r){for(var n=(t.mode&1)!==0;an!==null;){var a=an,s=a.child;if(a.tag===22&&n){var o=a.memoizedState!==null||WN;if(!o){var l=a.alternate,c=l!==null&&l.memoizedState!==null||ec;l=WN;var u=ec;if(WN=o,(ec=c)&&!u)for(an=a;an!==null;)o=an,c=o.child,o.tag===22&&o.memoizedState!==null?IU(a):c!==null?(c.return=o,an=c):IU(a);for(;s!==null;)an=s,oY(s),s=s.sibling;an=a,WN=l,ec=u}EU(t)}else a.subtreeFlags&8772&&s!==null?(s.return=a,an=s):EU(t)}}function EU(t){for(;an!==null;){var e=an;if(e.flags&8772){var r=e.alternate;try{if(e.flags&8772)switch(e.tag){case 0:case 11:case 15:ec||oj(5,e);break;case 1:var n=e.stateNode;if(e.flags&4&&!ec)if(r===null)n.componentDidMount();else{var a=e.elementType===e.type?r.memoizedProps:nf(e.type,r.memoizedProps);n.componentDidUpdate(a,r.memoizedState,n.__reactInternalSnapshotBeforeUpdate)}var s=e.updateQueue;s!==null&&uU(e,s,n);break;case 3:var o=e.updateQueue;if(o!==null){if(r=null,e.child!==null)switch(e.child.tag){case 5:r=e.child.stateNode;break;case 1:r=e.child.stateNode}uU(e,o,r)}break;case 5:var l=e.stateNode;if(r===null&&e.flags&4){r=l;var c=e.memoizedProps;switch(e.type){case"button":case"input":case"select":case"textarea":c.autoFocus&&r.focus();break;case"img":c.src&&(r.src=c.src)}}break;case 6:break;case 4:break;case 12:break;case 13:if(e.memoizedState===null){var u=e.alternate;if(u!==null){var d=u.memoizedState;if(d!==null){var f=d.dehydrated;f!==null&&qb(f)}}}break;case 19:case 17:case 21:case 22:case 23:case 25:break;default:throw Error(Br(163))}ec||e.flags&512&&NT(e)}catch(A){Ni(e,e.return,A)}}if(e===t){an=null;break}if(r=e.sibling,r!==null){r.return=e.return,an=r;break}an=e.return}}function SU(t){for(;an!==null;){var e=an;if(e===t){an=null;break}var r=e.sibling;if(r!==null){r.return=e.return,an=r;break}an=e.return}}function IU(t){for(;an!==null;){var e=an;try{switch(e.tag){case 0:case 11:case 15:var r=e.return;try{oj(4,e)}catch(c){Ni(e,r,c)}break;case 1:var n=e.stateNode;if(typeof n.componentDidMount=="function"){var a=e.return;try{n.componentDidMount()}catch(c){Ni(e,a,c)}}var s=e.return;try{NT(e)}catch(c){Ni(e,s,c)}break;case 5:var o=e.return;try{NT(e)}catch(c){Ni(e,o,c)}}}catch(c){Ni(e,e.return,c)}if(e===t){an=null;break}var l=e.sibling;if(l!==null){l.return=e.return,an=l;break}an=e.return}}var aAe=Math.ceil,KE=jA.ReactCurrentDispatcher,iD=jA.ReactCurrentOwner,Sd=jA.ReactCurrentBatchConfig,Ca=0,Zo=null,ao=null,Pl=0,Eu=0,Kx=Fm(0),jo=0,a2=null,Yp=0,lj=0,oD=0,ub=null,Yc=null,lD=0,Sv=1/0,Rh=null,qE=!1,ET=null,rm=null,XN=!1,V0=null,zE=0,db=0,ST=null,q_=-1,z_=0;function Sc(){return Ca&6?Ui():q_!==-1?q_:q_=Ui()}function nm(t){return t.mode&1?Ca&2&&Pl!==0?Pl&-Pl:Qhe.transition!==null?(z_===0&&(z_=GW()),z_):(t=rs,t!==0||(t=window.event,t=t===void 0?16:JW(t.type)),t):1}function mf(t,e,r,n){if(50<db)throw db=0,ST=null,Error(Br(185));dw(t,r,n),(!(Ca&2)||t!==Zo)&&(t===Zo&&(!(Ca&2)&&(lj|=r),jo===4&&B0(t,Pl)),su(t,n),r===1&&Ca===0&&!(e.mode&1)&&(Sv=Ui()+500,aj&&Om()))}function su(t,e){var r=t.callbackNode;Qfe(t,e);var n=BE(t,t===Zo?Pl:0);if(n===0)r!==null&&RL(r),t.callbackNode=null,t.callbackPriority=0;else if(e=n&-n,t.callbackPriority!==e){if(r!=null&&RL(r),e===1)t.tag===0?Uhe(jU.bind(null,t)):gX(jU.bind(null,t)),Dhe(function(){!(Ca&6)&&Om()}),r=null;else{switch(KW(n)){case 1:r=FO;break;case 4:r=HW;break;case 16:r=PE;break;case 536870912:r=$W;break;default:r=PE}r=mY(r,lY.bind(null,t))}t.callbackPriority=e,t.callbackNode=r}}function lY(t,e){if(q_=-1,z_=0,Ca&6)throw Error(Br(327));var r=t.callbackNode;if(lv()&&t.callbackNode!==r)return null;var n=BE(t,t===Zo?Pl:0);if(n===0)return null;if(n&30||n&t.expiredLanes||e)e=WE(t,n);else{e=n;var a=Ca;Ca|=2;var s=uY();(Zo!==t||Pl!==e)&&(Rh=null,Sv=Ui()+500,Pp(t,e));do try{oAe();break}catch(l){cY(t,l)}while(!0);qO(),KE.current=s,Ca=a,ao!==null?e=0:(Zo=null,Pl=0,e=jo)}if(e!==0){if(e===2&&(a=eT(t),a!==0&&(n=a,e=IT(t,a))),e===1)throw r=a2,Pp(t,0),B0(t,n),su(t,Ui()),r;if(e===6)B0(t,n);else{if(a=t.current.alternate,!(n&30)&&!sAe(a)&&(e=WE(t,n),e===2&&(s=eT(t),s!==0&&(n=s,e=IT(t,s))),e===1))throw r=a2,Pp(t,0),B0(t,n),su(t,Ui()),r;switch(t.finishedWork=a,t.finishedLanes=n,e){case 0:case 1:throw Error(Br(345));case 2:ap(t,Yc,Rh);break;case 3:if(B0(t,n),(n&130023424)===n&&(e=lD+500-Ui(),10<e)){if(BE(t,0)!==0)break;if(a=t.suspendedLanes,(a&n)!==n){Sc(),t.pingedLanes|=t.suspendedLanes&a;break}t.timeoutHandle=lT(ap.bind(null,t,Yc,Rh),e);break}ap(t,Yc,Rh);break;case 4:if(B0(t,n),(n&4194240)===n)break;for(e=t.eventTimes,a=-1;0<n;){var o=31-Af(n);s=1<<o,o=e[o],o>a&&(a=o),n&=~s}if(n=a,n=Ui()-n,n=(120>n?120:480>n?480:1080>n?1080:1920>n?1920:3e3>n?3e3:4320>n?4320:1960*aAe(n/1960))-n,10<n){t.timeoutHandle=lT(ap.bind(null,t,Yc,Rh),n);break}ap(t,Yc,Rh);break;case 5:ap(t,Yc,Rh);break;default:throw Error(Br(329))}}}return su(t,Ui()),t.callbackNode===r?lY.bind(null,t):null}function IT(t,e){var r=ub;return t.current.memoizedState.isDehydrated&&(Pp(t,e).flags|=256),t=WE(t,e),t!==2&&(e=Yc,Yc=r,e!==null&&jT(e)),t}function jT(t){Yc===null?Yc=t:Yc.push.apply(Yc,t)}function sAe(t){for(var e=t;;){if(e.flags&16384){var r=e.updateQueue;if(r!==null&&(r=r.stores,r!==null))for(var n=0;n<r.length;n++){var a=r[n],s=a.getSnapshot;a=a.value;try{if(!yf(s(),a))return!1}catch{return!1}}}if(r=e.child,e.subtreeFlags&16384&&r!==null)r.return=e,e=r;else{if(e===t)break;for(;e.sibling===null;){if(e.return===null||e.return===t)return!0;e=e.return}e.sibling.return=e.return,e=e.sibling}}return!0}function B0(t,e){for(e&=~oD,e&=~lj,t.suspendedLanes|=e,t.pingedLanes&=~e,t=t.expirationTimes;0<e;){var r=31-Af(e),n=1<<r;t[r]=-1,e&=~n}}function jU(t){if(Ca&6)throw Error(Br(327));lv();var e=BE(t,0);if(!(e&1))return su(t,Ui()),null;var r=WE(t,e);if(t.tag!==0&&r===2){var n=eT(t);n!==0&&(e=n,r=IT(t,n))}if(r===1)throw r=a2,Pp(t,0),B0(t,e),su(t,Ui()),r;if(r===6)throw Error(Br(345));return t.finishedWork=t.current.alternate,t.finishedLanes=e,ap(t,Yc,Rh),su(t,Ui()),null}function cD(t,e){var r=Ca;Ca|=1;try{return t(e)}finally{Ca=r,Ca===0&&(Sv=Ui()+500,aj&&Om())}}function Jp(t){V0!==null&&V0.tag===0&&!(Ca&6)&&lv();var e=Ca;Ca|=1;var r=Sd.transition,n=rs;try{if(Sd.transition=null,rs=1,t)return t()}finally{rs=n,Sd.transition=r,Ca=e,!(Ca&6)&&Om()}}function uD(){Eu=Kx.current,Ts(Kx)}function Pp(t,e){t.finishedWork=null,t.finishedLanes=0;var r=t.timeoutHandle;if(r!==-1&&(t.timeoutHandle=-1,Ohe(r)),ao!==null)for(r=ao.return;r!==null;){var n=r;switch($O(n),n.tag){case 1:n=n.type.childContextTypes,n!=null&&DE();break;case 3:_v(),Ts(nu),Ts(ic),ZO();break;case 5:JO(n);break;case 4:_v();break;case 13:Ts(si);break;case 19:Ts(si);break;case 10:zO(n.type._context);break;case 22:case 23:uD()}r=r.return}if(Zo=t,ao=t=am(t.current,null),Pl=Eu=e,jo=0,a2=null,oD=lj=Yp=0,Yc=ub=null,yp!==null){for(e=0;e<yp.length;e++)if(r=yp[e],n=r.interleaved,n!==null){r.interleaved=null;var a=n.next,s=r.pending;if(s!==null){var o=s.next;s.next=a,n.next=o}r.pending=n}yp=null}return t}function cY(t,e){do{var r=ao;try{if(qO(),$_.current=GE,$E){for(var n=ci.memoizedState;n!==null;){var a=n.queue;a!==null&&(a.pending=null),n=n.next}$E=!1}if(Xp=0,zo=yo=ci=null,lb=!1,t2=0,iD.current=null,r===null||r.return===null){jo=1,a2=e,ao=null;break}e:{var s=t,o=r.return,l=r,c=e;if(e=Pl,l.flags|=32768,c!==null&&typeof c=="object"&&typeof c.then=="function"){var u=c,d=l,f=d.tag;if(!(d.mode&1)&&(f===0||f===11||f===15)){var A=d.alternate;A?(d.updateQueue=A.updateQueue,d.memoizedState=A.memoizedState,d.lanes=A.lanes):(d.updateQueue=null,d.memoizedState=null)}var h=pU(o);if(h!==null){h.flags&=-257,gU(h,o,l,s,e),h.mode&1&&mU(s,u,e),e=h,c=u;var m=e.updateQueue;if(m===null){var p=new Set;p.add(c),e.updateQueue=p}else m.add(c);break e}else{if(!(e&1)){mU(s,u,e),dD();break e}c=Error(Br(426))}}else if(Qs&&l.mode&1){var x=pU(o);if(x!==null){!(x.flags&65536)&&(x.flags|=256),gU(x,o,l,s,e),GO(Ev(c,l));break e}}s=c=Ev(c,l),jo!==4&&(jo=2),ub===null?ub=[s]:ub.push(s),s=o;do{switch(s.tag){case 3:s.flags|=65536,e&=-e,s.lanes|=e;var v=KX(s,c,e);cU(s,v);break e;case 1:l=c;var y=s.type,b=s.stateNode;if(!(s.flags&128)&&(typeof y.getDerivedStateFromError=="function"||b!==null&&typeof b.componentDidCatch=="function"&&(rm===null||!rm.has(b)))){s.flags|=65536,e&=-e,s.lanes|=e;var w=qX(s,l,e);cU(s,w);break e}}s=s.return}while(s!==null)}fY(r)}catch(j){e=j,ao===r&&r!==null&&(ao=r=r.return);continue}break}while(!0)}function uY(){var t=KE.current;return KE.current=GE,t===null?GE:t}function dD(){(jo===0||jo===3||jo===2)&&(jo=4),Zo===null||!(Yp&268435455)&&!(lj&268435455)||B0(Zo,Pl)}function WE(t,e){var r=Ca;Ca|=2;var n=uY();(Zo!==t||Pl!==e)&&(Rh=null,Pp(t,e));do try{iAe();break}catch(a){cY(t,a)}while(!0);if(qO(),Ca=r,KE.current=n,ao!==null)throw Error(Br(261));return Zo=null,Pl=0,jo}function iAe(){for(;ao!==null;)dY(ao)}function oAe(){for(;ao!==null&&!Tfe();)dY(ao)}function dY(t){var e=AY(t.alternate,t,Eu);t.memoizedProps=t.pendingProps,e===null?fY(t):ao=e,iD.current=null}function fY(t){var e=t;do{var r=e.alternate;if(t=e.return,e.flags&32768){if(r=eAe(r,e),r!==null){r.flags&=32767,ao=r;return}if(t!==null)t.flags|=32768,t.subtreeFlags=0,t.deletions=null;else{jo=6,ao=null;return}}else if(r=Zhe(r,e,Eu),r!==null){ao=r;return}if(e=e.sibling,e!==null){ao=e;return}ao=e=t}while(e!==null);jo===0&&(jo=5)}function ap(t,e,r){var n=rs,a=Sd.transition;try{Sd.transition=null,rs=1,lAe(t,e,r,n)}finally{Sd.transition=a,rs=n}return null}function lAe(t,e,r,n){do lv();while(V0!==null);if(Ca&6)throw Error(Br(327));r=t.finishedWork;var a=t.finishedLanes;if(r===null)return null;if(t.finishedWork=null,t.finishedLanes=0,r===t.current)throw Error(Br(177));t.callbackNode=null,t.callbackPriority=0;var s=r.lanes|r.childLanes;if(Vfe(t,s),t===Zo&&(ao=Zo=null,Pl=0),!(r.subtreeFlags&2064)&&!(r.flags&2064)||XN||(XN=!0,mY(PE,function(){return lv(),null})),s=(r.flags&15990)!==0,r.subtreeFlags&15990||s){s=Sd.transition,Sd.transition=null;var o=rs;rs=1;var l=Ca;Ca|=4,iD.current=null,rAe(t,r),iY(r,t),Ihe(iT),TE=!!sT,iT=sT=null,t.current=r,nAe(r),kfe(),Ca=l,rs=o,Sd.transition=s}else t.current=r;if(XN&&(XN=!1,V0=t,zE=a),s=t.pendingLanes,s===0&&(rm=null),Dfe(r.stateNode),su(t,Ui()),e!==null)for(n=t.onRecoverableError,r=0;r<e.length;r++)a=e[r],n(a.value,{componentStack:a.stack,digest:a.digest});if(qE)throw qE=!1,t=ET,ET=null,t;return zE&1&&t.tag!==0&&lv(),s=t.pendingLanes,s&1?t===ST?db++:(db=0,ST=t):db=0,Om(),null}function lv(){if(V0!==null){var t=KW(zE),e=Sd.transition,r=rs;try{if(Sd.transition=null,rs=16>t?16:t,V0===null)var n=!1;else{if(t=V0,V0=null,zE=0,Ca&6)throw Error(Br(331));var a=Ca;for(Ca|=4,an=t.current;an!==null;){var s=an,o=s.child;if(an.flags&16){var l=s.deletions;if(l!==null){for(var c=0;c<l.length;c++){var u=l[c];for(an=u;an!==null;){var d=an;switch(d.tag){case 0:case 11:case 15:cb(8,d,s)}var f=d.child;if(f!==null)f.return=d,an=f;else for(;an!==null;){d=an;var A=d.sibling,h=d.return;if(nY(d),d===u){an=null;break}if(A!==null){A.return=h,an=A;break}an=h}}}var m=s.alternate;if(m!==null){var p=m.child;if(p!==null){m.child=null;do{var x=p.sibling;p.sibling=null,p=x}while(p!==null)}}an=s}}if(s.subtreeFlags&2064&&o!==null)o.return=s,an=o;else e:for(;an!==null;){if(s=an,s.flags&2048)switch(s.tag){case 0:case 11:case 15:cb(9,s,s.return)}var v=s.sibling;if(v!==null){v.return=s.return,an=v;break e}an=s.return}}var y=t.current;for(an=y;an!==null;){o=an;var b=o.child;if(o.subtreeFlags&2064&&b!==null)b.return=o,an=b;else e:for(o=y;an!==null;){if(l=an,l.flags&2048)try{switch(l.tag){case 0:case 11:case 15:oj(9,l)}}catch(j){Ni(l,l.return,j)}if(l===o){an=null;break e}var w=l.sibling;if(w!==null){w.return=l.return,an=w;break e}an=l.return}}if(Ca=a,Om(),th&&typeof th.onPostCommitFiberRoot=="function")try{th.onPostCommitFiberRoot(ZI,t)}catch{}n=!0}return n}finally{rs=r,Sd.transition=e}}return!1}function PU(t,e,r){e=Ev(r,e),e=KX(t,e,1),t=tm(t,e,1),e=Sc(),t!==null&&(dw(t,1,e),su(t,e))}function Ni(t,e,r){if(t.tag===3)PU(t,t,r);else for(;e!==null;){if(e.tag===3){PU(e,t,r);break}else if(e.tag===1){var n=e.stateNode;if(typeof e.type.getDerivedStateFromError=="function"||typeof n.componentDidCatch=="function"&&(rm===null||!rm.has(n))){t=Ev(r,t),t=qX(e,t,1),e=tm(e,t,1),t=Sc(),e!==null&&(dw(e,1,t),su(e,t));break}}e=e.return}}function cAe(t,e,r){var n=t.pingCache;n!==null&&n.delete(e),e=Sc(),t.pingedLanes|=t.suspendedLanes&r,Zo===t&&(Pl&r)===r&&(jo===4||jo===3&&(Pl&130023424)===Pl&&500>Ui()-lD?Pp(t,0):oD|=r),su(t,e)}function hY(t,e){e===0&&(t.mode&1?(e=UN,UN<<=1,!(UN&130023424)&&(UN=4194304)):e=1);var r=Sc();t=fA(t,e),t!==null&&(dw(t,e,r),su(t,r))}function uAe(t){var e=t.memoizedState,r=0;e!==null&&(r=e.retryLane),hY(t,r)}function dAe(t,e){var r=0;switch(t.tag){case 13:var n=t.stateNode,a=t.memoizedState;a!==null&&(r=a.retryLane);break;case 19:n=t.stateNode;break;default:throw Error(Br(314))}n!==null&&n.delete(e),hY(t,r)}var AY;AY=function(t,e,r){if(t!==null)if(t.memoizedProps!==e.pendingProps||nu.current)Zc=!0;else{if(!(t.lanes&r)&&!(e.flags&128))return Zc=!1,Jhe(t,e,r);Zc=!!(t.flags&131072)}else Zc=!1,Qs&&e.flags&1048576&&xX(e,LE,e.index);switch(e.lanes=0,e.tag){case 2:var n=e.type;K_(t,e),t=e.pendingProps;var a=wv(e,ic.current);ov(e,r),a=tD(null,e,n,t,a,r);var s=rD();return e.flags|=1,typeof a=="object"&&a!==null&&typeof a.render=="function"&&a.$$typeof===void 0?(e.tag=1,e.memoizedState=null,e.updateQueue=null,au(n)?(s=!0,RE(e)):s=!1,e.memoizedState=a.state!==null&&a.state!==void 0?a.state:null,XO(e),a.updater=ij,e.stateNode=a,a._reactInternals=e,mT(e,n,t,r),e=xT(null,e,n,!0,s,r)):(e.tag=0,Qs&&s&&HO(e),yc(null,e,a,r),e=e.child),e;case 16:n=e.elementType;e:{switch(K_(t,e),t=e.pendingProps,a=n._init,n=a(n._payload),e.type=n,a=e.tag=hAe(n),t=nf(n,t),a){case 0:e=gT(null,e,n,t,r);break e;case 1:e=yU(null,e,n,t,r);break e;case 11:e=xU(null,e,n,t,r);break e;case 14:e=vU(null,e,n,nf(n.type,t),r);break e}throw Error(Br(306,n,""))}return e;case 0:return n=e.type,a=e.pendingProps,a=e.elementType===n?a:nf(n,a),gT(t,e,n,a,r);case 1:return n=e.type,a=e.pendingProps,a=e.elementType===n?a:nf(n,a),yU(t,e,n,a,r);case 3:e:{if(YX(e),t===null)throw Error(Br(387));n=e.pendingProps,s=e.memoizedState,a=s.element,CX(t,e),VE(e,n,null,r);var o=e.memoizedState;if(n=o.element,s.isDehydrated)if(s={element:n,isDehydrated:!1,cache:o.cache,pendingSuspenseBoundaries:o.pendingSuspenseBoundaries,transitions:o.transitions},e.updateQueue.baseState=s,e.memoizedState=s,e.flags&256){a=Ev(Error(Br(423)),e),e=bU(t,e,n,r,a);break e}else if(n!==a){a=Ev(Error(Br(424)),e),e=bU(t,e,n,r,a);break e}else for(ku=em(e.stateNode.containerInfo.firstChild),Ru=e,Qs=!0,sf=null,r=wX(e,null,n,r),e.child=r;r;)r.flags=r.flags&-3|4096,r=r.sibling;else{if(Nv(),n===a){e=hA(t,e,r);break e}yc(t,e,n,r)}e=e.child}return e;case 5:return _X(e),t===null&&fT(e),n=e.type,a=e.pendingProps,s=t!==null?t.memoizedProps:null,o=a.children,oT(n,a)?o=null:s!==null&&oT(n,s)&&(e.flags|=32),XX(t,e),yc(t,e,o,r),e.child;case 6:return t===null&&fT(e),null;case 13:return JX(t,e,r);case 4:return YO(e,e.stateNode.containerInfo),n=e.pendingProps,t===null?e.child=Cv(e,null,n,r):yc(t,e,n,r),e.child;case 11:return n=e.type,a=e.pendingProps,a=e.elementType===n?a:nf(n,a),xU(t,e,n,a,r);case 7:return yc(t,e,e.pendingProps,r),e.child;case 8:return yc(t,e,e.pendingProps.children,r),e.child;case 12:return yc(t,e,e.pendingProps.children,r),e.child;case 10:e:{if(n=e.type._context,a=e.pendingProps,s=e.memoizedProps,o=a.value,bs(UE,n._currentValue),n._currentValue=o,s!==null)if(yf(s.value,o)){if(s.children===a.children&&!nu.current){e=hA(t,e,r);break e}}else for(s=e.child,s!==null&&(s.return=e);s!==null;){var l=s.dependencies;if(l!==null){o=s.child;for(var c=l.firstContext;c!==null;){if(c.context===n){if(s.tag===1){c=Zh(-1,r&-r),c.tag=2;var u=s.updateQueue;if(u!==null){u=u.shared;var d=u.pending;d===null?c.next=c:(c.next=d.next,d.next=c),u.pending=c}}s.lanes|=r,c=s.alternate,c!==null&&(c.lanes|=r),hT(s.return,r,e),l.lanes|=r;break}c=c.next}}else if(s.tag===10)o=s.type===e.type?null:s.child;else if(s.tag===18){if(o=s.return,o===null)throw Error(Br(341));o.lanes|=r,l=o.alternate,l!==null&&(l.lanes|=r),hT(o,r,e),o=s.sibling}else o=s.child;if(o!==null)o.return=s;else for(o=s;o!==null;){if(o===e){o=null;break}if(s=o.sibling,s!==null){s.return=o.return,o=s;break}o=o.return}s=o}yc(t,e,a.children,r),e=e.child}return e;case 9:return a=e.type,n=e.pendingProps.children,ov(e,r),a=Td(a),n=n(a),e.flags|=1,yc(t,e,n,r),e.child;case 14:return n=e.type,a=nf(n,e.pendingProps),a=nf(n.type,a),vU(t,e,n,a,r);case 15:return zX(t,e,e.type,e.pendingProps,r);case 17:return n=e.type,a=e.pendingProps,a=e.elementType===n?a:nf(n,a),K_(t,e),e.tag=1,au(n)?(t=!0,RE(e)):t=!1,ov(e,r),GX(e,n,a),mT(e,n,a,r),xT(null,e,n,!0,t,r);case 19:return ZX(t,e,r);case 22:return WX(t,e,r)}throw Error(Br(156,e.tag))};function mY(t,e){return VW(t,e)}function fAe(t,e,r,n){this.tag=t,this.key=r,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=e,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=n,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function bd(t,e,r,n){return new fAe(t,e,r,n)}function fD(t){return t=t.prototype,!(!t||!t.isReactComponent)}function hAe(t){if(typeof t=="function")return fD(t)?1:0;if(t!=null){if(t=t.$$typeof,t===BO)return 11;if(t===TO)return 14}return 2}function am(t,e){var r=t.alternate;return r===null?(r=bd(t.tag,e,t.key,t.mode),r.elementType=t.elementType,r.type=t.type,r.stateNode=t.stateNode,r.alternate=t,t.alternate=r):(r.pendingProps=e,r.type=t.type,r.flags=0,r.subtreeFlags=0,r.deletions=null),r.flags=t.flags&14680064,r.childLanes=t.childLanes,r.lanes=t.lanes,r.child=t.child,r.memoizedProps=t.memoizedProps,r.memoizedState=t.memoizedState,r.updateQueue=t.updateQueue,e=t.dependencies,r.dependencies=e===null?null:{lanes:e.lanes,firstContext:e.firstContext},r.sibling=t.sibling,r.index=t.index,r.ref=t.ref,r}function W_(t,e,r,n,a,s){var o=2;if(n=t,typeof t=="function")fD(t)&&(o=1);else if(typeof t=="string")o=5;else e:switch(t){case Dx:return Bp(r.children,a,s,e);case PO:o=8,a|=8;break;case LB:return t=bd(12,r,e,a|2),t.elementType=LB,t.lanes=s,t;case UB:return t=bd(13,r,e,a),t.elementType=UB,t.lanes=s,t;case QB:return t=bd(19,r,e,a),t.elementType=QB,t.lanes=s,t;case _W:return cj(r,a,s,e);default:if(typeof t=="object"&&t!==null)switch(t.$$typeof){case NW:o=10;break e;case CW:o=9;break e;case BO:o=11;break e;case TO:o=14;break e;case C0:o=16,n=null;break e}throw Error(Br(130,t==null?t:typeof t,""))}return e=bd(o,r,e,a),e.elementType=t,e.type=n,e.lanes=s,e}function Bp(t,e,r,n){return t=bd(7,t,n,e),t.lanes=r,t}function cj(t,e,r,n){return t=bd(22,t,n,e),t.elementType=_W,t.lanes=r,t.stateNode={isHidden:!1},t}function A3(t,e,r){return t=bd(6,t,null,e),t.lanes=r,t}function m3(t,e,r){return e=bd(4,t.children!==null?t.children:[],t.key,e),e.lanes=r,e.stateNode={containerInfo:t.containerInfo,pendingChildren:null,implementation:t.implementation},e}function AAe(t,e,r,n,a){this.tag=e,this.containerInfo=t,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.pendingContext=this.context=null,this.callbackPriority=0,this.eventTimes=W4(0),this.expirationTimes=W4(-1),this.entangledLanes=this.finishedLanes=this.mutableReadLanes=this.expiredLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=W4(0),this.identifierPrefix=n,this.onRecoverableError=a,this.mutableSourceEagerHydrationData=null}function hD(t,e,r,n,a,s,o,l,c){return t=new AAe(t,e,r,l,c),e===1?(e=1,s===!0&&(e|=8)):e=0,s=bd(3,null,null,e),t.current=s,s.stateNode=t,s.memoizedState={element:n,isDehydrated:r,cache:null,transitions:null,pendingSuspenseBoundaries:null},XO(s),t}function mAe(t,e,r){var n=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:Ox,key:n==null?null:""+n,children:t,containerInfo:e,implementation:r}}function pY(t){if(!t)return pm;t=t._reactInternals;e:{if(Sg(t)!==t||t.tag!==1)throw Error(Br(170));var e=t;do{switch(e.tag){case 3:e=e.stateNode.context;break e;case 1:if(au(e.type)){e=e.stateNode.__reactInternalMemoizedMergedChildContext;break e}}e=e.return}while(e!==null);throw Error(Br(171))}if(t.tag===1){var r=t.type;if(au(r))return pX(t,r,e)}return e}function gY(t,e,r,n,a,s,o,l,c){return t=hD(r,n,!0,t,a,s,o,l,c),t.context=pY(null),r=t.current,n=Sc(),a=nm(r),s=Zh(n,a),s.callback=e??null,tm(r,s,a),t.current.lanes=a,dw(t,a,n),su(t,n),t}function uj(t,e,r,n){var a=e.current,s=Sc(),o=nm(a);return r=pY(r),e.context===null?e.context=r:e.pendingContext=r,e=Zh(s,o),e.payload={element:t},n=n===void 0?null:n,n!==null&&(e.callback=n),t=tm(a,e,o),t!==null&&(mf(t,a,o,s),H_(t,a,o)),o}function XE(t){if(t=t.current,!t.child)return null;switch(t.child.tag){case 5:return t.child.stateNode;default:return t.child.stateNode}}function BU(t,e){if(t=t.memoizedState,t!==null&&t.dehydrated!==null){var r=t.retryLane;t.retryLane=r!==0&&r<e?r:e}}function AD(t,e){BU(t,e),(t=t.alternate)&&BU(t,e)}function pAe(){return null}var xY=typeof reportError=="function"?reportError:function(t){console.error(t)};function mD(t){this._internalRoot=t}dj.prototype.render=mD.prototype.render=function(t){var e=this._internalRoot;if(e===null)throw Error(Br(409));uj(t,e,null,null)};dj.prototype.unmount=mD.prototype.unmount=function(){var t=this._internalRoot;if(t!==null){this._internalRoot=null;var e=t.containerInfo;Jp(function(){uj(null,t,null,null)}),e[dA]=null}};function dj(t){this._internalRoot=t}dj.prototype.unstable_scheduleHydration=function(t){if(t){var e=WW();t={blockedOn:null,target:t,priority:e};for(var r=0;r<P0.length&&e!==0&&e<P0[r].priority;r++);P0.splice(r,0,t),r===0&&YW(t)}};function pD(t){return!(!t||t.nodeType!==1&&t.nodeType!==9&&t.nodeType!==11)}function fj(t){return!(!t||t.nodeType!==1&&t.nodeType!==9&&t.nodeType!==11&&(t.nodeType!==8||t.nodeValue!==" react-mount-point-unstable "))}function TU(){}function gAe(t,e,r,n,a){if(a){if(typeof n=="function"){var s=n;n=function(){var u=XE(o);s.call(u)}}var o=gY(e,n,t,0,null,!1,!1,"",TU);return t._reactRootContainer=o,t[dA]=o.current,Xb(t.nodeType===8?t.parentNode:t),Jp(),o}for(;a=t.lastChild;)t.removeChild(a);if(typeof n=="function"){var l=n;n=function(){var u=XE(c);l.call(u)}}var c=hD(t,0,!1,null,null,!1,!1,"",TU);return t._reactRootContainer=c,t[dA]=c.current,Xb(t.nodeType===8?t.parentNode:t),Jp(function(){uj(e,c,r,n)}),c}function hj(t,e,r,n,a){var s=r._reactRootContainer;if(s){var o=s;if(typeof a=="function"){var l=a;a=function(){var c=XE(o);l.call(c)}}uj(e,o,t,a)}else o=gAe(r,e,t,a,n);return XE(o)}qW=function(t){switch(t.tag){case 3:var e=t.stateNode;if(e.current.memoizedState.isDehydrated){var r=ky(e.pendingLanes);r!==0&&(OO(e,r|1),su(e,Ui()),!(Ca&6)&&(Sv=Ui()+500,Om()))}break;case 13:Jp(function(){var n=fA(t,1);if(n!==null){var a=Sc();mf(n,t,1,a)}}),AD(t,1)}};DO=function(t){if(t.tag===13){var e=fA(t,134217728);if(e!==null){var r=Sc();mf(e,t,134217728,r)}AD(t,134217728)}};zW=function(t){if(t.tag===13){var e=nm(t),r=fA(t,e);if(r!==null){var n=Sc();mf(r,t,e,n)}AD(t,e)}};WW=function(){return rs};XW=function(t,e){var r=rs;try{return rs=t,e()}finally{rs=r}};YB=function(t,e,r){switch(e){case"input":if($B(t,r),e=r.name,r.type==="radio"&&e!=null){for(r=t;r.parentNode;)r=r.parentNode;for(r=r.querySelectorAll("input[name="+JSON.stringify(""+e)+'][type="radio"]'),e=0;e<r.length;e++){var n=r[e];if(n!==t&&n.form===t.form){var a=nj(n);if(!a)throw Error(Br(90));SW(n),$B(n,a)}}}break;case"textarea":jW(t,r);break;case"select":e=r.value,e!=null&&nv(t,!!r.multiple,e,!1)}};DW=cD;RW=Jp;var xAe={usingClientEntryPoint:!1,Events:[hw,Ux,nj,FW,OW,cD]},ey={findFiberByHostInstance:vp,bundleType:0,version:"18.3.1",rendererPackageName:"react-dom"},vAe={bundleType:ey.bundleType,version:ey.version,rendererPackageName:ey.rendererPackageName,rendererConfig:ey.rendererConfig,overrideHookState:null,overrideHookStateDeletePath:null,overrideHookStateRenamePath:null,overrideProps:null,overridePropsDeletePath:null,overridePropsRenamePath:null,setErrorHandler:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:jA.ReactCurrentDispatcher,findHostInstanceByFiber:function(t){return t=UW(t),t===null?null:t.stateNode},findFiberByHostInstance:ey.findFiberByHostInstance||pAe,findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null,reconcilerVersion:"18.3.1-next-f1338f8080-20240426"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var YN=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!YN.isDisabled&&YN.supportsFiber)try{ZI=YN.inject(vAe),th=YN}catch{}}Gu.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=xAe;Gu.createPortal=function(t,e){var r=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!pD(e))throw Error(Br(200));return mAe(t,e,null,r)};Gu.createRoot=function(t,e){if(!pD(t))throw Error(Br(299));var r=!1,n="",a=xY;return e!=null&&(e.unstable_strictMode===!0&&(r=!0),e.identifierPrefix!==void 0&&(n=e.identifierPrefix),e.onRecoverableError!==void 0&&(a=e.onRecoverableError)),e=hD(t,1,!1,null,null,r,!1,n,a),t[dA]=e.current,Xb(t.nodeType===8?t.parentNode:t),new mD(e)};Gu.findDOMNode=function(t){if(t==null)return null;if(t.nodeType===1)return t;var e=t._reactInternals;if(e===void 0)throw typeof t.render=="function"?Error(Br(188)):(t=Object.keys(t).join(","),Error(Br(268,t)));return t=UW(e),t=t===null?null:t.stateNode,t};Gu.flushSync=function(t){return Jp(t)};Gu.hydrate=function(t,e,r){if(!fj(e))throw Error(Br(200));return hj(null,t,e,!0,r)};Gu.hydrateRoot=function(t,e,r){if(!pD(t))throw Error(Br(405));var n=r!=null&&r.hydratedSources||null,a=!1,s="",o=xY;if(r!=null&&(r.unstable_strictMode===!0&&(a=!0),r.identifierPrefix!==void 0&&(s=r.identifierPrefix),r.onRecoverableError!==void 0&&(o=r.onRecoverableError)),e=gY(e,null,t,1,r??null,a,!1,s,o),t[dA]=e.current,Xb(t),n)for(t=0;t<n.length;t++)r=n[t],a=r._getVersion,a=a(r._source),e.mutableSourceEagerHydrationData==null?e.mutableSourceEagerHydrationData=[r,a]:e.mutableSourceEagerHydrationData.push(r,a);return new dj(e)};Gu.render=function(t,e,r){if(!fj(e))throw Error(Br(200));return hj(null,t,e,!1,r)};Gu.unmountComponentAtNode=function(t){if(!fj(t))throw Error(Br(40));return t._reactRootContainer?(Jp(function(){hj(null,null,t,!1,function(){t._reactRootContainer=null,t[dA]=null})}),!0):!1};Gu.unstable_batchedUpdates=cD;Gu.unstable_renderSubtreeIntoContainer=function(t,e,r,n){if(!fj(r))throw Error(Br(200));if(t==null||t._reactInternals===void 0)throw Error(Br(38));return hj(t,e,r,!1,n)};Gu.version="18.3.1-next-f1338f8080-20240426";function vY(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(vY)}catch(t){console.error(t)}}vY(),vW.exports=Gu;var Mu=vW.exports,kU=Mu;RB.createRoot=kU.createRoot,RB.hydrateRoot=kU.hydrateRoot;/**
 * react-router v7.8.1
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */var FU="popstate";function yAe(t={}){function e(n,a){let{pathname:s,search:o,hash:l}=n.location;return PT("",{pathname:s,search:o,hash:l},a.state&&a.state.usr||null,a.state&&a.state.key||"default")}function r(n,a){return typeof a=="string"?a:s2(a)}return wAe(e,r,null,t)}function qs(t,e){if(t===!1||t===null||typeof t>"u")throw new Error(e)}function bf(t,e){if(!t){typeof console<"u"&&console.warn(e);try{throw new Error(e)}catch{}}}function bAe(){return Math.random().toString(36).substring(2,10)}function OU(t,e){return{usr:t.state,key:t.key,idx:e}}function PT(t,e,r=null,n){return{pathname:typeof t=="string"?t:t.pathname,search:"",hash:"",...typeof e=="string"?r1(e):e,state:r,key:e&&e.key||n||bAe()}}function s2({pathname:t="/",search:e="",hash:r=""}){return e&&e!=="?"&&(t+=e.charAt(0)==="?"?e:"?"+e),r&&r!=="#"&&(t+=r.charAt(0)==="#"?r:"#"+r),t}function r1(t){let e={};if(t){let r=t.indexOf("#");r>=0&&(e.hash=t.substring(r),t=t.substring(0,r));let n=t.indexOf("?");n>=0&&(e.search=t.substring(n),t=t.substring(0,n)),t&&(e.pathname=t)}return e}function wAe(t,e,r,n={}){let{window:a=document.defaultView,v5Compat:s=!1}=n,o=a.history,l="POP",c=null,u=d();u==null&&(u=0,o.replaceState({...o.state,idx:u},""));function d(){return(o.state||{idx:null}).idx}function f(){l="POP";let x=d(),v=x==null?null:x-u;u=x,c&&c({action:l,location:p.location,delta:v})}function A(x,v){l="PUSH";let y=PT(p.location,x,v);u=d()+1;let b=OU(y,u),w=p.createHref(y);try{o.pushState(b,"",w)}catch(j){if(j instanceof DOMException&&j.name==="DataCloneError")throw j;a.location.assign(w)}s&&c&&c({action:l,location:p.location,delta:1})}function h(x,v){l="REPLACE";let y=PT(p.location,x,v);u=d();let b=OU(y,u),w=p.createHref(y);o.replaceState(b,"",w),s&&c&&c({action:l,location:p.location,delta:0})}function m(x){return NAe(x)}let p={get action(){return l},get location(){return t(a,o)},listen(x){if(c)throw new Error("A history only accepts one active listener");return a.addEventListener(FU,f),c=x,()=>{a.removeEventListener(FU,f),c=null}},createHref(x){return e(a,x)},createURL:m,encodeLocation(x){let v=m(x);return{pathname:v.pathname,search:v.search,hash:v.hash}},push:A,replace:h,go(x){return o.go(x)}};return p}function NAe(t,e=!1){let r="http://localhost";typeof window<"u"&&(r=window.location.origin!=="null"?window.location.origin:window.location.href),qs(r,"No window.location.(origin|href) available to create URL");let n=typeof t=="string"?t:s2(t);return n=n.replace(/ $/,"%20"),!e&&n.startsWith("//")&&(n=r+n),new URL(n,r)}function yY(t,e,r="/"){return CAe(t,e,r,!1)}function CAe(t,e,r,n){let a=typeof e=="string"?r1(e):e,s=AA(a.pathname||"/",r);if(s==null)return null;let o=bY(t);_Ae(o);let l=null;for(let c=0;l==null&&c<o.length;++c){let u=DAe(s);l=FAe(o[c],u,n)}return l}function bY(t,e=[],r=[],n="",a=!1){let s=(o,l,c=a,u)=>{let d={relativePath:u===void 0?o.path||"":u,caseSensitive:o.caseSensitive===!0,childrenIndex:l,route:o};if(d.relativePath.startsWith("/")){if(!d.relativePath.startsWith(n)&&c)return;qs(d.relativePath.startsWith(n),`Absolute route path "${d.relativePath}" nested under path "${n}" is not valid. An absolute child route path must start with the combined path of all its parent routes.`),d.relativePath=d.relativePath.slice(n.length)}let f=eA([n,d.relativePath]),A=r.concat(d);o.children&&o.children.length>0&&(qs(o.index!==!0,`Index routes must not have child routes. Please remove all child routes from route path "${f}".`),bY(o.children,e,A,f,c)),!(o.path==null&&!o.index)&&e.push({path:f,score:TAe(f,o.index),routesMeta:A})};return t.forEach((o,l)=>{var c;if(o.path===""||!((c=o.path)!=null&&c.includes("?")))s(o,l);else for(let u of wY(o.path))s(o,l,!0,u)}),e}function wY(t){let e=t.split("/");if(e.length===0)return[];let[r,...n]=e,a=r.endsWith("?"),s=r.replace(/\?$/,"");if(n.length===0)return a?[s,""]:[s];let o=wY(n.join("/")),l=[];return l.push(...o.map(c=>c===""?s:[s,c].join("/"))),a&&l.push(...o),l.map(c=>t.startsWith("/")&&c===""?"/":c)}function _Ae(t){t.sort((e,r)=>e.score!==r.score?r.score-e.score:kAe(e.routesMeta.map(n=>n.childrenIndex),r.routesMeta.map(n=>n.childrenIndex)))}var EAe=/^:[\w-]+$/,SAe=3,IAe=2,jAe=1,PAe=10,BAe=-2,DU=t=>t==="*";function TAe(t,e){let r=t.split("/"),n=r.length;return r.some(DU)&&(n+=BAe),e&&(n+=IAe),r.filter(a=>!DU(a)).reduce((a,s)=>a+(EAe.test(s)?SAe:s===""?jAe:PAe),n)}function kAe(t,e){return t.length===e.length&&t.slice(0,-1).every((n,a)=>n===e[a])?t[t.length-1]-e[e.length-1]:0}function FAe(t,e,r=!1){let{routesMeta:n}=t,a={},s="/",o=[];for(let l=0;l<n.length;++l){let c=n[l],u=l===n.length-1,d=s==="/"?e:e.slice(s.length)||"/",f=YE({path:c.relativePath,caseSensitive:c.caseSensitive,end:u},d),A=c.route;if(!f&&u&&r&&!n[n.length-1].route.index&&(f=YE({path:c.relativePath,caseSensitive:c.caseSensitive,end:!1},d)),!f)return null;Object.assign(a,f.params),o.push({params:a,pathname:eA([s,f.pathname]),pathnameBase:UAe(eA([s,f.pathnameBase])),route:A}),f.pathnameBase!=="/"&&(s=eA([s,f.pathnameBase]))}return o}function YE(t,e){typeof t=="string"&&(t={path:t,caseSensitive:!1,end:!0});let[r,n]=OAe(t.path,t.caseSensitive,t.end),a=e.match(r);if(!a)return null;let s=a[0],o=s.replace(/(.)\/+$/,"$1"),l=a.slice(1);return{params:n.reduce((u,{paramName:d,isOptional:f},A)=>{if(d==="*"){let m=l[A]||"";o=s.slice(0,s.length-m.length).replace(/(.)\/+$/,"$1")}const h=l[A];return f&&!h?u[d]=void 0:u[d]=(h||"").replace(/%2F/g,"/"),u},{}),pathname:s,pathnameBase:o,pattern:t}}function OAe(t,e=!1,r=!0){bf(t==="*"||!t.endsWith("*")||t.endsWith("/*"),`Route path "${t}" will be treated as if it were "${t.replace(/\*$/,"/*")}" because the \`*\` character must always follow a \`/\` in the pattern. To get rid of this warning, please change the route path to "${t.replace(/\*$/,"/*")}".`);let n=[],a="^"+t.replace(/\/*\*?$/,"").replace(/^\/*/,"/").replace(/[\\.*+^${}|()[\]]/g,"\\$&").replace(/\/:([\w-]+)(\?)?/g,(o,l,c)=>(n.push({paramName:l,isOptional:c!=null}),c?"/?([^\\/]+)?":"/([^\\/]+)")).replace(/\/([\w-]+)\?(\/|$)/g,"(/$1)?$2");return t.endsWith("*")?(n.push({paramName:"*"}),a+=t==="*"||t==="/*"?"(.*)$":"(?:\\/(.+)|\\/*)$"):r?a+="\\/*$":t!==""&&t!=="/"&&(a+="(?:(?=\\/|$))"),[new RegExp(a,e?void 0:"i"),n]}function DAe(t){try{return t.split("/").map(e=>decodeURIComponent(e).replace(/\//g,"%2F")).join("/")}catch(e){return bf(!1,`The URL path "${t}" could not be decoded because it is a malformed URL segment. This is probably due to a bad percent encoding (${e}).`),t}}function AA(t,e){if(e==="/")return t;if(!t.toLowerCase().startsWith(e.toLowerCase()))return null;let r=e.endsWith("/")?e.length-1:e.length,n=t.charAt(r);return n&&n!=="/"?null:t.slice(r)||"/"}function RAe(t,e="/"){let{pathname:r,search:n="",hash:a=""}=typeof t=="string"?r1(t):t;return{pathname:r?r.startsWith("/")?r:MAe(r,e):e,search:QAe(n),hash:VAe(a)}}function MAe(t,e){let r=e.replace(/\/+$/,"").split("/");return t.split("/").forEach(a=>{a===".."?r.length>1&&r.pop():a!=="."&&r.push(a)}),r.length>1?r.join("/"):"/"}function p3(t,e,r,n){return`Cannot include a '${t}' character in a manually specified \`to.${e}\` field [${JSON.stringify(n)}].  Please separate it out to the \`to.${r}\` field. Alternatively you may provide the full path as a string in <Link to="..."> and the router will parse it for you.`}function LAe(t){return t.filter((e,r)=>r===0||e.route.path&&e.route.path.length>0)}function gD(t){let e=LAe(t);return e.map((r,n)=>n===e.length-1?r.pathname:r.pathnameBase)}function xD(t,e,r,n=!1){let a;typeof t=="string"?a=r1(t):(a={...t},qs(!a.pathname||!a.pathname.includes("?"),p3("?","pathname","search",a)),qs(!a.pathname||!a.pathname.includes("#"),p3("#","pathname","hash",a)),qs(!a.search||!a.search.includes("#"),p3("#","search","hash",a)));let s=t===""||a.pathname==="",o=s?"/":a.pathname,l;if(o==null)l=r;else{let f=e.length-1;if(!n&&o.startsWith("..")){let A=o.split("/");for(;A[0]==="..";)A.shift(),f-=1;a.pathname=A.join("/")}l=f>=0?e[f]:"/"}let c=RAe(a,l),u=o&&o!=="/"&&o.endsWith("/"),d=(s||o===".")&&r.endsWith("/");return!c.pathname.endsWith("/")&&(u||d)&&(c.pathname+="/"),c}var eA=t=>t.join("/").replace(/\/\/+/g,"/"),UAe=t=>t.replace(/\/+$/,"").replace(/^\/*/,"/"),QAe=t=>!t||t==="?"?"":t.startsWith("?")?t:"?"+t,VAe=t=>!t||t==="#"?"":t.startsWith("#")?t:"#"+t;function HAe(t){return t!=null&&typeof t.status=="number"&&typeof t.statusText=="string"&&typeof t.internal=="boolean"&&"data"in t}var NY=["POST","PUT","PATCH","DELETE"];new Set(NY);var $Ae=["GET",...NY];new Set($Ae);var n1=g.createContext(null);n1.displayName="DataRouter";var Aj=g.createContext(null);Aj.displayName="DataRouterState";g.createContext(!1);var CY=g.createContext({isTransitioning:!1});CY.displayName="ViewTransition";var GAe=g.createContext(new Map);GAe.displayName="Fetchers";var KAe=g.createContext(null);KAe.displayName="Await";var _f=g.createContext(null);_f.displayName="Navigation";var mw=g.createContext(null);mw.displayName="Location";var Ef=g.createContext({outlet:null,matches:[],isDataRoute:!1});Ef.displayName="Route";var vD=g.createContext(null);vD.displayName="RouteError";function qAe(t,{relative:e}={}){qs(a1(),"useHref() may be used only in the context of a <Router> component.");let{basename:r,navigator:n}=g.useContext(_f),{hash:a,pathname:s,search:o}=gw(t,{relative:e}),l=s;return r!=="/"&&(l=s==="/"?r:eA([r,s])),n.createHref({pathname:l,search:o,hash:a})}function a1(){return g.useContext(mw)!=null}function PA(){return qs(a1(),"useLocation() may be used only in the context of a <Router> component."),g.useContext(mw).location}var _Y="You should call navigate() in a React.useEffect(), not when your component is first rendered.";function EY(t){g.useContext(_f).static||g.useLayoutEffect(t)}function pw(){let{isDataRoute:t}=g.useContext(Ef);return t?l0e():zAe()}function zAe(){qs(a1(),"useNavigate() may be used only in the context of a <Router> component.");let t=g.useContext(n1),{basename:e,navigator:r}=g.useContext(_f),{matches:n}=g.useContext(Ef),{pathname:a}=PA(),s=JSON.stringify(gD(n)),o=g.useRef(!1);return EY(()=>{o.current=!0}),g.useCallback((c,u={})=>{if(bf(o.current,_Y),!o.current)return;if(typeof c=="number"){r.go(c);return}let d=xD(c,JSON.parse(s),a,u.relative==="path");t==null&&e!=="/"&&(d.pathname=d.pathname==="/"?e:eA([e,d.pathname])),(u.replace?r.replace:r.push)(d,u.state,u)},[e,r,s,a,t])}var WAe=g.createContext(null);function XAe(t){let e=g.useContext(Ef).outlet;return e&&g.createElement(WAe.Provider,{value:t},e)}function gw(t,{relative:e}={}){let{matches:r}=g.useContext(Ef),{pathname:n}=PA(),a=JSON.stringify(gD(r));return g.useMemo(()=>xD(t,JSON.parse(a),n,e==="path"),[t,a,n,e])}function YAe(t,e){return SY(t,e)}function SY(t,e,r,n){var v;qs(a1(),"useRoutes() may be used only in the context of a <Router> component.");let{navigator:a}=g.useContext(_f),{matches:s}=g.useContext(Ef),o=s[s.length-1],l=o?o.params:{},c=o?o.pathname:"/",u=o?o.pathnameBase:"/",d=o&&o.route;{let y=d&&d.path||"";IY(c,!d||y.endsWith("*")||y.endsWith("*?"),`You rendered descendant <Routes> (or called \`useRoutes()\`) at "${c}" (under <Route path="${y}">) but the parent route path has no trailing "*". This means if you navigate deeper, the parent won't match anymore and therefore the child routes will never render.

Please change the parent <Route path="${y}"> to <Route path="${y==="/"?"*":`${y}/*`}">.`)}let f=PA(),A;if(e){let y=typeof e=="string"?r1(e):e;qs(u==="/"||((v=y.pathname)==null?void 0:v.startsWith(u)),`When overriding the location using \`<Routes location>\` or \`useRoutes(routes, location)\`, the location pathname must begin with the portion of the URL pathname that was matched by all parent routes. The current pathname base is "${u}" but pathname "${y.pathname}" was given in the \`location\` prop.`),A=y}else A=f;let h=A.pathname||"/",m=h;if(u!=="/"){let y=u.replace(/^\//,"").split("/");m="/"+h.replace(/^\//,"").split("/").slice(y.length).join("/")}let p=yY(t,{pathname:m});bf(d||p!=null,`No routes matched location "${A.pathname}${A.search}${A.hash}" `),bf(p==null||p[p.length-1].route.element!==void 0||p[p.length-1].route.Component!==void 0||p[p.length-1].route.lazy!==void 0,`Matched leaf route at location "${A.pathname}${A.search}${A.hash}" does not have an element or Component. This means it will render an <Outlet /> with a null value by default resulting in an "empty" page.`);let x=r0e(p&&p.map(y=>Object.assign({},y,{params:Object.assign({},l,y.params),pathname:eA([u,a.encodeLocation?a.encodeLocation(y.pathname).pathname:y.pathname]),pathnameBase:y.pathnameBase==="/"?u:eA([u,a.encodeLocation?a.encodeLocation(y.pathnameBase).pathname:y.pathnameBase])})),s,r,n);return e&&x?g.createElement(mw.Provider,{value:{location:{pathname:"/",search:"",hash:"",state:null,key:"default",...A},navigationType:"POP"}},x):x}function JAe(){let t=o0e(),e=HAe(t)?`${t.status} ${t.statusText}`:t instanceof Error?t.message:JSON.stringify(t),r=t instanceof Error?t.stack:null,n="rgba(200,200,200, 0.5)",a={padding:"0.5rem",backgroundColor:n},s={padding:"2px 4px",backgroundColor:n},o=null;return console.error("Error handled by React Router default ErrorBoundary:",t),o=g.createElement(g.Fragment,null,g.createElement("p",null," Hey developer "),g.createElement("p",null,"You can provide a way better UX than this when your app throws errors by providing your own ",g.createElement("code",{style:s},"ErrorBoundary")," or"," ",g.createElement("code",{style:s},"errorElement")," prop on your route.")),g.createElement(g.Fragment,null,g.createElement("h2",null,"Unexpected Application Error!"),g.createElement("h3",{style:{fontStyle:"italic"}},e),r?g.createElement("pre",{style:a},r):null,o)}var ZAe=g.createElement(JAe,null),e0e=class extends g.Component{constructor(t){super(t),this.state={location:t.location,revalidation:t.revalidation,error:t.error}}static getDerivedStateFromError(t){return{error:t}}static getDerivedStateFromProps(t,e){return e.location!==t.location||e.revalidation!=="idle"&&t.revalidation==="idle"?{error:t.error,location:t.location,revalidation:t.revalidation}:{error:t.error!==void 0?t.error:e.error,location:e.location,revalidation:t.revalidation||e.revalidation}}componentDidCatch(t,e){console.error("React Router caught the following error during render",t,e)}render(){return this.state.error!==void 0?g.createElement(Ef.Provider,{value:this.props.routeContext},g.createElement(vD.Provider,{value:this.state.error,children:this.props.component})):this.props.children}};function t0e({routeContext:t,match:e,children:r}){let n=g.useContext(n1);return n&&n.static&&n.staticContext&&(e.route.errorElement||e.route.ErrorBoundary)&&(n.staticContext._deepestRenderedBoundaryId=e.route.id),g.createElement(Ef.Provider,{value:t},r)}function r0e(t,e=[],r=null,n=null){if(t==null){if(!r)return null;if(r.errors)t=r.matches;else if(e.length===0&&!r.initialized&&r.matches.length>0)t=r.matches;else return null}let a=t,s=r==null?void 0:r.errors;if(s!=null){let c=a.findIndex(u=>u.route.id&&(s==null?void 0:s[u.route.id])!==void 0);qs(c>=0,`Could not find a matching route for errors on route IDs: ${Object.keys(s).join(",")}`),a=a.slice(0,Math.min(a.length,c+1))}let o=!1,l=-1;if(r)for(let c=0;c<a.length;c++){let u=a[c];if((u.route.HydrateFallback||u.route.hydrateFallbackElement)&&(l=c),u.route.id){let{loaderData:d,errors:f}=r,A=u.route.loader&&!d.hasOwnProperty(u.route.id)&&(!f||f[u.route.id]===void 0);if(u.route.lazy||A){o=!0,l>=0?a=a.slice(0,l+1):a=[a[0]];break}}}return a.reduceRight((c,u,d)=>{let f,A=!1,h=null,m=null;r&&(f=s&&u.route.id?s[u.route.id]:void 0,h=u.route.errorElement||ZAe,o&&(l<0&&d===0?(IY("route-fallback",!1,"No `HydrateFallback` element provided to render during initial hydration"),A=!0,m=null):l===d&&(A=!0,m=u.route.hydrateFallbackElement||null)));let p=e.concat(a.slice(0,d+1)),x=()=>{let v;return f?v=h:A?v=m:u.route.Component?v=g.createElement(u.route.Component,null):u.route.element?v=u.route.element:v=c,g.createElement(t0e,{match:u,routeContext:{outlet:c,matches:p,isDataRoute:r!=null},children:v})};return r&&(u.route.ErrorBoundary||u.route.errorElement||d===0)?g.createElement(e0e,{location:r.location,revalidation:r.revalidation,component:h,error:f,children:x(),routeContext:{outlet:null,matches:p,isDataRoute:!0}}):x()},null)}function yD(t){return`${t} must be used within a data router.  See https://reactrouter.com/en/main/routers/picking-a-router.`}function n0e(t){let e=g.useContext(n1);return qs(e,yD(t)),e}function a0e(t){let e=g.useContext(Aj);return qs(e,yD(t)),e}function s0e(t){let e=g.useContext(Ef);return qs(e,yD(t)),e}function bD(t){let e=s0e(t),r=e.matches[e.matches.length-1];return qs(r.route.id,`${t} can only be used on routes that contain a unique "id"`),r.route.id}function i0e(){return bD("useRouteId")}function o0e(){var n;let t=g.useContext(vD),e=a0e("useRouteError"),r=bD("useRouteError");return t!==void 0?t:(n=e.errors)==null?void 0:n[r]}function l0e(){let{router:t}=n0e("useNavigate"),e=bD("useNavigate"),r=g.useRef(!1);return EY(()=>{r.current=!0}),g.useCallback(async(a,s={})=>{bf(r.current,_Y),r.current&&(typeof a=="number"?t.navigate(a):await t.navigate(a,{fromRouteId:e,...s}))},[t,e])}var RU={};function IY(t,e,r){!e&&!RU[t]&&(RU[t]=!0,bf(!1,r))}g.memo(c0e);function c0e({routes:t,future:e,state:r}){return SY(t,void 0,r,e)}function Oh({to:t,replace:e,state:r,relative:n}){qs(a1(),"<Navigate> may be used only in the context of a <Router> component.");let{static:a}=g.useContext(_f);bf(!a,"<Navigate> must not be used on the initial render in a <StaticRouter>. This is a no-op, but you should modify your code so the <Navigate> is only ever rendered in response to some user interaction or state change.");let{matches:s}=g.useContext(Ef),{pathname:o}=PA(),l=pw(),c=xD(t,gD(s),o,n==="path"),u=JSON.stringify(c);return g.useEffect(()=>{l(JSON.parse(u),{replace:e,state:r,relative:n})},[l,u,n,e,r]),null}function jY(t){return XAe(t.context)}function Un(t){qs(!1,"A <Route> is only ever to be used as the child of <Routes> element, never rendered directly. Please wrap your <Route> in a <Routes>.")}function u0e({basename:t="/",children:e=null,location:r,navigationType:n="POP",navigator:a,static:s=!1}){qs(!a1(),"You cannot render a <Router> inside another <Router>. You should never have more than one in your app.");let o=t.replace(/^\/*/,"/"),l=g.useMemo(()=>({basename:o,navigator:a,static:s,future:{}}),[o,a,s]);typeof r=="string"&&(r=r1(r));let{pathname:c="/",search:u="",hash:d="",state:f=null,key:A="default"}=r,h=g.useMemo(()=>{let m=AA(c,o);return m==null?null:{location:{pathname:m,search:u,hash:d,state:f,key:A},navigationType:n}},[o,c,u,d,f,A,n]);return bf(h!=null,`<Router basename="${o}"> is not able to match the URL "${c}${u}${d}" because it does not start with the basename, so the <Router> won't render anything.`),h==null?null:g.createElement(_f.Provider,{value:l},g.createElement(mw.Provider,{children:e,value:h}))}function d0e({children:t,location:e}){return YAe(BT(t),e)}function BT(t,e=[]){let r=[];return g.Children.forEach(t,(n,a)=>{if(!g.isValidElement(n))return;let s=[...e,a];if(n.type===g.Fragment){r.push.apply(r,BT(n.props.children,s));return}qs(n.type===Un,`[${typeof n.type=="string"?n.type:n.type.name}] is not a <Route> component. All component children of <Routes> must be a <Route> or <React.Fragment>`),qs(!n.props.index||!n.props.children,"An index route cannot have child routes.");let o={id:n.props.id||s.join("-"),caseSensitive:n.props.caseSensitive,element:n.props.element,Component:n.props.Component,index:n.props.index,path:n.props.path,loader:n.props.loader,action:n.props.action,hydrateFallbackElement:n.props.hydrateFallbackElement,HydrateFallback:n.props.HydrateFallback,errorElement:n.props.errorElement,ErrorBoundary:n.props.ErrorBoundary,hasErrorBoundary:n.props.hasErrorBoundary===!0||n.props.ErrorBoundary!=null||n.props.errorElement!=null,shouldRevalidate:n.props.shouldRevalidate,handle:n.props.handle,lazy:n.props.lazy};n.props.children&&(o.children=BT(n.props.children,s)),r.push(o)}),r}var X_="get",Y_="application/x-www-form-urlencoded";function mj(t){return t!=null&&typeof t.tagName=="string"}function f0e(t){return mj(t)&&t.tagName.toLowerCase()==="button"}function h0e(t){return mj(t)&&t.tagName.toLowerCase()==="form"}function A0e(t){return mj(t)&&t.tagName.toLowerCase()==="input"}function m0e(t){return!!(t.metaKey||t.altKey||t.ctrlKey||t.shiftKey)}function p0e(t,e){return t.button===0&&(!e||e==="_self")&&!m0e(t)}var JN=null;function g0e(){if(JN===null)try{new FormData(document.createElement("form"),0),JN=!1}catch{JN=!0}return JN}var x0e=new Set(["application/x-www-form-urlencoded","multipart/form-data","text/plain"]);function g3(t){return t!=null&&!x0e.has(t)?(bf(!1,`"${t}" is not a valid \`encType\` for \`<Form>\`/\`<fetcher.Form>\` and will default to "${Y_}"`),null):t}function v0e(t,e){let r,n,a,s,o;if(h0e(t)){let l=t.getAttribute("action");n=l?AA(l,e):null,r=t.getAttribute("method")||X_,a=g3(t.getAttribute("enctype"))||Y_,s=new FormData(t)}else if(f0e(t)||A0e(t)&&(t.type==="submit"||t.type==="image")){let l=t.form;if(l==null)throw new Error('Cannot submit a <button> or <input type="submit"> without a <form>');let c=t.getAttribute("formaction")||l.getAttribute("action");if(n=c?AA(c,e):null,r=t.getAttribute("formmethod")||l.getAttribute("method")||X_,a=g3(t.getAttribute("formenctype"))||g3(l.getAttribute("enctype"))||Y_,s=new FormData(l,t),!g0e()){let{name:u,type:d,value:f}=t;if(d==="image"){let A=u?`${u}.`:"";s.append(`${A}x`,"0"),s.append(`${A}y`,"0")}else u&&s.append(u,f)}}else{if(mj(t))throw new Error('Cannot submit element that is not <form>, <button>, or <input type="submit|image">');r=X_,n=null,a=Y_,o=t}return s&&a==="text/plain"&&(o=s,s=void 0),{action:n,method:r.toLowerCase(),encType:a,formData:s,body:o}}Object.getOwnPropertyNames(Object.prototype).sort().join("\0");function wD(t,e){if(t===!1||t===null||typeof t>"u")throw new Error(e)}function y0e(t,e,r){let n=typeof t=="string"?new URL(t,typeof window>"u"?"server://singlefetch/":window.location.origin):t;return n.pathname==="/"?n.pathname=`_root.${r}`:e&&AA(n.pathname,e)==="/"?n.pathname=`${e.replace(/\/$/,"")}/_root.${r}`:n.pathname=`${n.pathname.replace(/\/$/,"")}.${r}`,n}async function b0e(t,e){if(t.id in e)return e[t.id];try{let r=await import(t.module);return e[t.id]=r,r}catch(r){return console.error(`Error loading route module \`${t.module}\`, reloading page...`),console.error(r),window.__reactRouterContext&&window.__reactRouterContext.isSpaMode,window.location.reload(),new Promise(()=>{})}}function w0e(t){return t==null?!1:t.href==null?t.rel==="preload"&&typeof t.imageSrcSet=="string"&&typeof t.imageSizes=="string":typeof t.rel=="string"&&typeof t.href=="string"}async function N0e(t,e,r){let n=await Promise.all(t.map(async a=>{let s=e.routes[a.route.id];if(s){let o=await b0e(s,r);return o.links?o.links():[]}return[]}));return S0e(n.flat(1).filter(w0e).filter(a=>a.rel==="stylesheet"||a.rel==="preload").map(a=>a.rel==="stylesheet"?{...a,rel:"prefetch",as:"style"}:{...a,rel:"prefetch"}))}function MU(t,e,r,n,a,s){let o=(c,u)=>r[u]?c.route.id!==r[u].route.id:!0,l=(c,u)=>{var d;return r[u].pathname!==c.pathname||((d=r[u].route.path)==null?void 0:d.endsWith("*"))&&r[u].params["*"]!==c.params["*"]};return s==="assets"?e.filter((c,u)=>o(c,u)||l(c,u)):s==="data"?e.filter((c,u)=>{var f;let d=n.routes[c.route.id];if(!d||!d.hasLoader)return!1;if(o(c,u)||l(c,u))return!0;if(c.route.shouldRevalidate){let A=c.route.shouldRevalidate({currentUrl:new URL(a.pathname+a.search+a.hash,window.origin),currentParams:((f=r[0])==null?void 0:f.params)||{},nextUrl:new URL(t,window.origin),nextParams:c.params,defaultShouldRevalidate:!0});if(typeof A=="boolean")return A}return!0}):[]}function C0e(t,e,{includeHydrateFallback:r}={}){return _0e(t.map(n=>{let a=e.routes[n.route.id];if(!a)return[];let s=[a.module];return a.clientActionModule&&(s=s.concat(a.clientActionModule)),a.clientLoaderModule&&(s=s.concat(a.clientLoaderModule)),r&&a.hydrateFallbackModule&&(s=s.concat(a.hydrateFallbackModule)),a.imports&&(s=s.concat(a.imports)),s}).flat(1))}function _0e(t){return[...new Set(t)]}function E0e(t){let e={},r=Object.keys(t).sort();for(let n of r)e[n]=t[n];return e}function S0e(t,e){let r=new Set;return new Set(e),t.reduce((n,a)=>{let s=JSON.stringify(E0e(a));return r.has(s)||(r.add(s),n.push({key:s,link:a})),n},[])}function PY(){let t=g.useContext(n1);return wD(t,"You must render this element inside a <DataRouterContext.Provider> element"),t}function I0e(){let t=g.useContext(Aj);return wD(t,"You must render this element inside a <DataRouterStateContext.Provider> element"),t}var ND=g.createContext(void 0);ND.displayName="FrameworkContext";function BY(){let t=g.useContext(ND);return wD(t,"You must render this element inside a <HydratedRouter> element"),t}function j0e(t,e){let r=g.useContext(ND),[n,a]=g.useState(!1),[s,o]=g.useState(!1),{onFocus:l,onBlur:c,onMouseEnter:u,onMouseLeave:d,onTouchStart:f}=e,A=g.useRef(null);g.useEffect(()=>{if(t==="render"&&o(!0),t==="viewport"){let p=v=>{v.forEach(y=>{o(y.isIntersecting)})},x=new IntersectionObserver(p,{threshold:.5});return A.current&&x.observe(A.current),()=>{x.disconnect()}}},[t]),g.useEffect(()=>{if(n){let p=setTimeout(()=>{o(!0)},100);return()=>{clearTimeout(p)}}},[n]);let h=()=>{a(!0)},m=()=>{a(!1),o(!1)};return r?t!=="intent"?[s,A,{}]:[s,A,{onFocus:ty(l,h),onBlur:ty(c,m),onMouseEnter:ty(u,h),onMouseLeave:ty(d,m),onTouchStart:ty(f,h)}]:[!1,A,{}]}function ty(t,e){return r=>{t&&t(r),r.defaultPrevented||e(r)}}function P0e({page:t,...e}){let{router:r}=PY(),n=g.useMemo(()=>yY(r.routes,t,r.basename),[r.routes,t,r.basename]);return n?g.createElement(T0e,{page:t,matches:n,...e}):null}function B0e(t){let{manifest:e,routeModules:r}=BY(),[n,a]=g.useState([]);return g.useEffect(()=>{let s=!1;return N0e(t,e,r).then(o=>{s||a(o)}),()=>{s=!0}},[t,e,r]),n}function T0e({page:t,matches:e,...r}){let n=PA(),{manifest:a,routeModules:s}=BY(),{basename:o}=PY(),{loaderData:l,matches:c}=I0e(),u=g.useMemo(()=>MU(t,e,c,a,n,"data"),[t,e,c,a,n]),d=g.useMemo(()=>MU(t,e,c,a,n,"assets"),[t,e,c,a,n]),f=g.useMemo(()=>{if(t===n.pathname+n.search+n.hash)return[];let m=new Set,p=!1;if(e.forEach(v=>{var b;let y=a.routes[v.route.id];!y||!y.hasLoader||(!u.some(w=>w.route.id===v.route.id)&&v.route.id in l&&((b=s[v.route.id])!=null&&b.shouldRevalidate)||y.hasClientLoader?p=!0:m.add(v.route.id))}),m.size===0)return[];let x=y0e(t,o,"data");return p&&m.size>0&&x.searchParams.set("_routes",e.filter(v=>m.has(v.route.id)).map(v=>v.route.id).join(",")),[x.pathname+x.search]},[o,l,n,a,u,e,t,s]),A=g.useMemo(()=>C0e(d,a),[d,a]),h=B0e(d);return g.createElement(g.Fragment,null,f.map(m=>g.createElement("link",{key:m,rel:"prefetch",as:"fetch",href:m,...r})),A.map(m=>g.createElement("link",{key:m,rel:"modulepreload",href:m,...r})),h.map(({key:m,link:p})=>g.createElement("link",{key:m,nonce:r.nonce,...p})))}function k0e(...t){return e=>{t.forEach(r=>{typeof r=="function"?r(e):r!=null&&(r.current=e)})}}var TY=typeof window<"u"&&typeof window.document<"u"&&typeof window.document.createElement<"u";try{TY&&(window.__reactRouterVersion="7.8.1")}catch{}function F0e({basename:t,children:e,window:r}){let n=g.useRef();n.current==null&&(n.current=yAe({window:r,v5Compat:!0}));let a=n.current,[s,o]=g.useState({action:a.action,location:a.location}),l=g.useCallback(c=>{g.startTransition(()=>o(c))},[o]);return g.useLayoutEffect(()=>a.listen(l),[a,l]),g.createElement(u0e,{basename:t,children:e,location:s.location,navigationType:s.action,navigator:a})}var kY=/^(?:[a-z][a-z0-9+.-]*:|\/\/)/i,FY=g.forwardRef(function({onClick:e,discover:r="render",prefetch:n="none",relative:a,reloadDocument:s,replace:o,state:l,target:c,to:u,preventScrollReset:d,viewTransition:f,...A},h){let{basename:m}=g.useContext(_f),p=typeof u=="string"&&kY.test(u),x,v=!1;if(typeof u=="string"&&p&&(x=u,TY))try{let E=new URL(window.location.href),T=u.startsWith("//")?new URL(E.protocol+u):new URL(u),k=AA(T.pathname,m);T.origin===E.origin&&k!=null?u=k+T.search+T.hash:v=!0}catch{bf(!1,`<Link to="${u}"> contains an invalid URL which will probably break when clicked - please update to a valid URL path.`)}let y=qAe(u,{relative:a}),[b,w,j]=j0e(n,A),I=R0e(u,{replace:o,state:l,target:c,preventScrollReset:d,relative:a,viewTransition:f});function _(E){e&&e(E),E.defaultPrevented||I(E)}let S=g.createElement("a",{...A,...j,href:x||y,onClick:v||s?e:_,ref:k0e(h,w),target:c,"data-discover":!p&&r==="render"?"true":void 0});return b&&!p?g.createElement(g.Fragment,null,S,g.createElement(P0e,{page:y})):S});FY.displayName="Link";var bn=g.forwardRef(function({"aria-current":e="page",caseSensitive:r=!1,className:n="",end:a=!1,style:s,to:o,viewTransition:l,children:c,...u},d){let f=gw(o,{relative:u.relative}),A=PA(),h=g.useContext(Aj),{navigator:m,basename:p}=g.useContext(_f),x=h!=null&&V0e(f)&&l===!0,v=m.encodeLocation?m.encodeLocation(f).pathname:f.pathname,y=A.pathname,b=h&&h.navigation&&h.navigation.location?h.navigation.location.pathname:null;r||(y=y.toLowerCase(),b=b?b.toLowerCase():null,v=v.toLowerCase()),b&&p&&(b=AA(b,p)||b);const w=v!=="/"&&v.endsWith("/")?v.length-1:v.length;let j=y===v||!a&&y.startsWith(v)&&y.charAt(w)==="/",I=b!=null&&(b===v||!a&&b.startsWith(v)&&b.charAt(v.length)==="/"),_={isActive:j,isPending:I,isTransitioning:x},S=j?e:void 0,E;typeof n=="function"?E=n(_):E=[n,j?"active":null,I?"pending":null,x?"transitioning":null].filter(Boolean).join(" ");let T=typeof s=="function"?s(_):s;return g.createElement(FY,{...u,"aria-current":S,className:E,ref:d,style:T,to:o,viewTransition:l},typeof c=="function"?c(_):c)});bn.displayName="NavLink";var O0e=g.forwardRef(({discover:t="render",fetcherKey:e,navigate:r,reloadDocument:n,replace:a,state:s,method:o=X_,action:l,onSubmit:c,relative:u,preventScrollReset:d,viewTransition:f,...A},h)=>{let m=U0e(),p=Q0e(l,{relative:u}),x=o.toLowerCase()==="get"?"get":"post",v=typeof l=="string"&&kY.test(l),y=b=>{if(c&&c(b),b.defaultPrevented)return;b.preventDefault();let w=b.nativeEvent.submitter,j=(w==null?void 0:w.getAttribute("formmethod"))||o;m(w||b.currentTarget,{fetcherKey:e,method:j,navigate:r,replace:a,state:s,relative:u,preventScrollReset:d,viewTransition:f})};return g.createElement("form",{ref:h,method:x,action:p,onSubmit:n?c:y,...A,"data-discover":!v&&t==="render"?"true":void 0})});O0e.displayName="Form";function D0e(t){return`${t} must be used within a data router.  See https://reactrouter.com/en/main/routers/picking-a-router.`}function OY(t){let e=g.useContext(n1);return qs(e,D0e(t)),e}function R0e(t,{target:e,replace:r,state:n,preventScrollReset:a,relative:s,viewTransition:o}={}){let l=pw(),c=PA(),u=gw(t,{relative:s});return g.useCallback(d=>{if(p0e(d,e)){d.preventDefault();let f=r!==void 0?r:s2(c)===s2(u);l(t,{replace:f,state:n,preventScrollReset:a,relative:s,viewTransition:o})}},[c,l,u,r,n,e,t,a,s,o])}var M0e=0,L0e=()=>`__${String(++M0e)}__`;function U0e(){let{router:t}=OY("useSubmit"),{basename:e}=g.useContext(_f),r=i0e();return g.useCallback(async(n,a={})=>{let{action:s,method:o,encType:l,formData:c,body:u}=v0e(n,e);if(a.navigate===!1){let d=a.fetcherKey||L0e();await t.fetch(d,r,a.action||s,{preventScrollReset:a.preventScrollReset,formData:c,body:u,formMethod:a.method||o,formEncType:a.encType||l,flushSync:a.flushSync})}else await t.navigate(a.action||s,{preventScrollReset:a.preventScrollReset,formData:c,body:u,formMethod:a.method||o,formEncType:a.encType||l,replace:a.replace,state:a.state,fromRouteId:r,flushSync:a.flushSync,viewTransition:a.viewTransition})},[t,e,r])}function Q0e(t,{relative:e}={}){let{basename:r}=g.useContext(_f),n=g.useContext(Ef);qs(n,"useFormAction must be used inside a RouteContext");let[a]=n.matches.slice(-1),s={...gw(t||".",{relative:e})},o=PA();if(t==null){s.search=o.search;let l=new URLSearchParams(s.search),c=l.getAll("index");if(c.some(d=>d==="")){l.delete("index"),c.filter(f=>f).forEach(f=>l.append("index",f));let d=l.toString();s.search=d?`?${d}`:""}}return(!t||t===".")&&a.route.index&&(s.search=s.search?s.search.replace(/^\?/,"?index&"):"?index"),r!=="/"&&(s.pathname=s.pathname==="/"?r:eA([r,s.pathname])),s2(s)}function V0e(t,{relative:e}={}){let r=g.useContext(CY);qs(r!=null,"`useViewTransitionState` must be used within `react-router-dom`'s `RouterProvider`.  Did you accidentally import `RouterProvider` from `react-router`?");let{basename:n}=OY("useViewTransitionState"),a=gw(t,{relative:e});if(!r.isTransitioning)return!1;let s=AA(r.currentLocation.pathname,n)||r.currentLocation.pathname,o=AA(r.nextLocation.pathname,n)||r.nextLocation.pathname;return YE(a.pathname,o)!=null||YE(a.pathname,s)!=null}function En(t,e){if(!t)return!1;const r=String(e);if(Array.isArray(t))return t.map(String).includes(r);const n=String(t);return n===r||n==="vendedor"&&r==="vendedor_pollo"}var LU={};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const DY=function(t){const e=[];let r=0;for(let n=0;n<t.length;n++){let a=t.charCodeAt(n);a<128?e[r++]=a:a<2048?(e[r++]=a>>6|192,e[r++]=a&63|128):(a&64512)===55296&&n+1<t.length&&(t.charCodeAt(n+1)&64512)===56320?(a=65536+((a&1023)<<10)+(t.charCodeAt(++n)&1023),e[r++]=a>>18|240,e[r++]=a>>12&63|128,e[r++]=a>>6&63|128,e[r++]=a&63|128):(e[r++]=a>>12|224,e[r++]=a>>6&63|128,e[r++]=a&63|128)}return e},H0e=function(t){const e=[];let r=0,n=0;for(;r<t.length;){const a=t[r++];if(a<128)e[n++]=String.fromCharCode(a);else if(a>191&&a<224){const s=t[r++];e[n++]=String.fromCharCode((a&31)<<6|s&63)}else if(a>239&&a<365){const s=t[r++],o=t[r++],l=t[r++],c=((a&7)<<18|(s&63)<<12|(o&63)<<6|l&63)-65536;e[n++]=String.fromCharCode(55296+(c>>10)),e[n++]=String.fromCharCode(56320+(c&1023))}else{const s=t[r++],o=t[r++];e[n++]=String.fromCharCode((a&15)<<12|(s&63)<<6|o&63)}}return e.join("")},RY={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:typeof atob=="function",encodeByteArray(t,e){if(!Array.isArray(t))throw Error("encodeByteArray takes an array as a parameter");this.init_();const r=e?this.byteToCharMapWebSafe_:this.byteToCharMap_,n=[];for(let a=0;a<t.length;a+=3){const s=t[a],o=a+1<t.length,l=o?t[a+1]:0,c=a+2<t.length,u=c?t[a+2]:0,d=s>>2,f=(s&3)<<4|l>>4;let A=(l&15)<<2|u>>6,h=u&63;c||(h=64,o||(A=64)),n.push(r[d],r[f],r[A],r[h])}return n.join("")},encodeString(t,e){return this.HAS_NATIVE_SUPPORT&&!e?btoa(t):this.encodeByteArray(DY(t),e)},decodeString(t,e){return this.HAS_NATIVE_SUPPORT&&!e?atob(t):H0e(this.decodeStringToByteArray(t,e))},decodeStringToByteArray(t,e){this.init_();const r=e?this.charToByteMapWebSafe_:this.charToByteMap_,n=[];for(let a=0;a<t.length;){const s=r[t.charAt(a++)],l=a<t.length?r[t.charAt(a)]:0;++a;const u=a<t.length?r[t.charAt(a)]:64;++a;const f=a<t.length?r[t.charAt(a)]:64;if(++a,s==null||l==null||u==null||f==null)throw new $0e;const A=s<<2|l>>4;if(n.push(A),u!==64){const h=l<<4&240|u>>2;if(n.push(h),f!==64){const m=u<<6&192|f;n.push(m)}}}return n},init_(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(let t=0;t<this.ENCODED_VALS.length;t++)this.byteToCharMap_[t]=this.ENCODED_VALS.charAt(t),this.charToByteMap_[this.byteToCharMap_[t]]=t,this.byteToCharMapWebSafe_[t]=this.ENCODED_VALS_WEBSAFE.charAt(t),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[t]]=t,t>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(t)]=t,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(t)]=t)}}};class $0e extends Error{constructor(){super(...arguments),this.name="DecodeBase64StringError"}}const G0e=function(t){const e=DY(t);return RY.encodeByteArray(e,!0)},JE=function(t){return G0e(t).replace(/\./g,"")},MY=function(t){try{return RY.decodeString(t,!0)}catch(e){console.error("base64Decode failed: ",e)}return null};/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function K0e(){if(typeof self<"u")return self;if(typeof window<"u")return window;if(typeof global<"u")return global;throw new Error("Unable to locate global object.")}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const q0e=()=>K0e().__FIREBASE_DEFAULTS__,z0e=()=>{if(typeof process>"u"||typeof LU>"u")return;const t=LU.__FIREBASE_DEFAULTS__;if(t)return JSON.parse(t)},W0e=()=>{if(typeof document>"u")return;let t;try{t=document.cookie.match(/__FIREBASE_DEFAULTS__=([^;]+)/)}catch{return}const e=t&&MY(t[1]);return e&&JSON.parse(e)},pj=()=>{try{return q0e()||z0e()||W0e()}catch(t){console.info(`Unable to get __FIREBASE_DEFAULTS__ due to: ${t}`);return}},LY=t=>{var e,r;return(r=(e=pj())===null||e===void 0?void 0:e.emulatorHosts)===null||r===void 0?void 0:r[t]},X0e=t=>{const e=LY(t);if(!e)return;const r=e.lastIndexOf(":");if(r<=0||r+1===e.length)throw new Error(`Invalid host ${e} with no separate hostname and port!`);const n=parseInt(e.substring(r+1),10);return e[0]==="["?[e.substring(1,r-1),n]:[e.substring(0,r),n]},UY=()=>{var t;return(t=pj())===null||t===void 0?void 0:t.config},QY=t=>{var e;return(e=pj())===null||e===void 0?void 0:e[`_${t}`]};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Y0e{constructor(){this.reject=()=>{},this.resolve=()=>{},this.promise=new Promise((e,r)=>{this.resolve=e,this.reject=r})}wrapCallback(e){return(r,n)=>{r?this.reject(r):this.resolve(n),typeof e=="function"&&(this.promise.catch(()=>{}),e.length===1?e(r):e(r,n))}}}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function J0e(t,e){if(t.uid)throw new Error('The "uid" field is no longer supported by mockUserToken. Please use "sub" instead for Firebase Auth User ID.');const r={alg:"none",type:"JWT"},n=e||"demo-project",a=t.iat||0,s=t.sub||t.user_id;if(!s)throw new Error("mockUserToken must contain 'sub' or 'user_id' field!");const o=Object.assign({iss:`https://securetoken.google.com/${n}`,aud:n,iat:a,exp:a+3600,auth_time:a,sub:s,user_id:s,firebase:{sign_in_provider:"custom",identities:{}}},t);return[JE(JSON.stringify(r)),JE(JSON.stringify(o)),""].join(".")}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Bo(){return typeof navigator<"u"&&typeof navigator.userAgent=="string"?navigator.userAgent:""}function Z0e(){return typeof window<"u"&&!!(window.cordova||window.phonegap||window.PhoneGap)&&/ios|iphone|ipod|ipad|android|blackberry|iemobile/i.test(Bo())}function eme(){var t;const e=(t=pj())===null||t===void 0?void 0:t.forceEnvironment;if(e==="node")return!0;if(e==="browser")return!1;try{return Object.prototype.toString.call(global.process)==="[object process]"}catch{return!1}}function tme(){return typeof navigator<"u"&&navigator.userAgent==="Cloudflare-Workers"}function rme(){const t=typeof chrome=="object"?chrome.runtime:typeof browser=="object"?browser.runtime:void 0;return typeof t=="object"&&t.id!==void 0}function nme(){return typeof navigator=="object"&&navigator.product==="ReactNative"}function ame(){const t=Bo();return t.indexOf("MSIE ")>=0||t.indexOf("Trident/")>=0}function VY(){return!eme()&&!!navigator.userAgent&&navigator.userAgent.includes("Safari")&&!navigator.userAgent.includes("Chrome")}function HY(){try{return typeof indexedDB=="object"}catch{return!1}}function sme(){return new Promise((t,e)=>{try{let r=!0;const n="validate-browser-context-for-indexeddb-analytics-module",a=self.indexedDB.open(n);a.onsuccess=()=>{a.result.close(),r||self.indexedDB.deleteDatabase(n),t(!0)},a.onupgradeneeded=()=>{r=!1},a.onerror=()=>{var s;e(((s=a.error)===null||s===void 0?void 0:s.message)||"")}}catch(r){e(r)}})}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ime="FirebaseError";class BA extends Error{constructor(e,r,n){super(r),this.code=e,this.customData=n,this.name=ime,Object.setPrototypeOf(this,BA.prototype),Error.captureStackTrace&&Error.captureStackTrace(this,xw.prototype.create)}}class xw{constructor(e,r,n){this.service=e,this.serviceName=r,this.errors=n}create(e,...r){const n=r[0]||{},a=`${this.service}/${e}`,s=this.errors[e],o=s?ome(s,n):"Error",l=`${this.serviceName}: ${o} (${a}).`;return new BA(a,l,n)}}function ome(t,e){return t.replace(lme,(r,n)=>{const a=e[n];return a!=null?String(a):`<${n}?>`})}const lme=/\{\$([^}]+)}/g;function cme(t){for(const e in t)if(Object.prototype.hasOwnProperty.call(t,e))return!1;return!0}function i2(t,e){if(t===e)return!0;const r=Object.keys(t),n=Object.keys(e);for(const a of r){if(!n.includes(a))return!1;const s=t[a],o=e[a];if(UU(s)&&UU(o)){if(!i2(s,o))return!1}else if(s!==o)return!1}for(const a of n)if(!r.includes(a))return!1;return!0}function UU(t){return t!==null&&typeof t=="object"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function vw(t){const e=[];for(const[r,n]of Object.entries(t))Array.isArray(n)?n.forEach(a=>{e.push(encodeURIComponent(r)+"="+encodeURIComponent(a))}):e.push(encodeURIComponent(r)+"="+encodeURIComponent(n));return e.length?"&"+e.join("&"):""}function Oy(t){const e={};return t.replace(/^\?/,"").split("&").forEach(n=>{if(n){const[a,s]=n.split("=");e[decodeURIComponent(a)]=decodeURIComponent(s)}}),e}function Dy(t){const e=t.indexOf("?");if(!e)return"";const r=t.indexOf("#",e);return t.substring(e,r>0?r:void 0)}function ume(t,e){const r=new dme(t,e);return r.subscribe.bind(r)}class dme{constructor(e,r){this.observers=[],this.unsubscribes=[],this.observerCount=0,this.task=Promise.resolve(),this.finalized=!1,this.onNoObservers=r,this.task.then(()=>{e(this)}).catch(n=>{this.error(n)})}next(e){this.forEachObserver(r=>{r.next(e)})}error(e){this.forEachObserver(r=>{r.error(e)}),this.close(e)}complete(){this.forEachObserver(e=>{e.complete()}),this.close()}subscribe(e,r,n){let a;if(e===void 0&&r===void 0&&n===void 0)throw new Error("Missing Observer.");fme(e,["next","error","complete"])?a=e:a={next:e,error:r,complete:n},a.next===void 0&&(a.next=x3),a.error===void 0&&(a.error=x3),a.complete===void 0&&(a.complete=x3);const s=this.unsubscribeOne.bind(this,this.observers.length);return this.finalized&&this.task.then(()=>{try{this.finalError?a.error(this.finalError):a.complete()}catch{}}),this.observers.push(a),s}unsubscribeOne(e){this.observers===void 0||this.observers[e]===void 0||(delete this.observers[e],this.observerCount-=1,this.observerCount===0&&this.onNoObservers!==void 0&&this.onNoObservers(this))}forEachObserver(e){if(!this.finalized)for(let r=0;r<this.observers.length;r++)this.sendOne(r,e)}sendOne(e,r){this.task.then(()=>{if(this.observers!==void 0&&this.observers[e]!==void 0)try{r(this.observers[e])}catch(n){typeof console<"u"&&console.error&&console.error(n)}})}close(e){this.finalized||(this.finalized=!0,e!==void 0&&(this.finalError=e),this.task.then(()=>{this.observers=void 0,this.onNoObservers=void 0}))}}function fme(t,e){if(typeof t!="object"||t===null)return!1;for(const r of e)if(r in t&&typeof t[r]=="function")return!0;return!1}function x3(){}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function di(t){return t&&t._delegate?t._delegate:t}class Zp{constructor(e,r,n){this.name=e,this.instanceFactory=r,this.type=n,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY",this.onInstanceCreated=null}setInstantiationMode(e){return this.instantiationMode=e,this}setMultipleInstances(e){return this.multipleInstances=e,this}setServiceProps(e){return this.serviceProps=e,this}setInstanceCreatedCallback(e){return this.onInstanceCreated=e,this}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const sp="[DEFAULT]";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let hme=class{constructor(e,r){this.name=e,this.container=r,this.component=null,this.instances=new Map,this.instancesDeferred=new Map,this.instancesOptions=new Map,this.onInitCallbacks=new Map}get(e){const r=this.normalizeInstanceIdentifier(e);if(!this.instancesDeferred.has(r)){const n=new Y0e;if(this.instancesDeferred.set(r,n),this.isInitialized(r)||this.shouldAutoInitialize())try{const a=this.getOrInitializeService({instanceIdentifier:r});a&&n.resolve(a)}catch{}}return this.instancesDeferred.get(r).promise}getImmediate(e){var r;const n=this.normalizeInstanceIdentifier(e==null?void 0:e.identifier),a=(r=e==null?void 0:e.optional)!==null&&r!==void 0?r:!1;if(this.isInitialized(n)||this.shouldAutoInitialize())try{return this.getOrInitializeService({instanceIdentifier:n})}catch(s){if(a)return null;throw s}else{if(a)return null;throw Error(`Service ${this.name} is not available`)}}getComponent(){return this.component}setComponent(e){if(e.name!==this.name)throw Error(`Mismatching Component ${e.name} for Provider ${this.name}.`);if(this.component)throw Error(`Component for ${this.name} has already been provided`);if(this.component=e,!!this.shouldAutoInitialize()){if(mme(e))try{this.getOrInitializeService({instanceIdentifier:sp})}catch{}for(const[r,n]of this.instancesDeferred.entries()){const a=this.normalizeInstanceIdentifier(r);try{const s=this.getOrInitializeService({instanceIdentifier:a});n.resolve(s)}catch{}}}}clearInstance(e=sp){this.instancesDeferred.delete(e),this.instancesOptions.delete(e),this.instances.delete(e)}async delete(){const e=Array.from(this.instances.values());await Promise.all([...e.filter(r=>"INTERNAL"in r).map(r=>r.INTERNAL.delete()),...e.filter(r=>"_delete"in r).map(r=>r._delete())])}isComponentSet(){return this.component!=null}isInitialized(e=sp){return this.instances.has(e)}getOptions(e=sp){return this.instancesOptions.get(e)||{}}initialize(e={}){const{options:r={}}=e,n=this.normalizeInstanceIdentifier(e.instanceIdentifier);if(this.isInitialized(n))throw Error(`${this.name}(${n}) has already been initialized`);if(!this.isComponentSet())throw Error(`Component ${this.name} has not been registered yet`);const a=this.getOrInitializeService({instanceIdentifier:n,options:r});for(const[s,o]of this.instancesDeferred.entries()){const l=this.normalizeInstanceIdentifier(s);n===l&&o.resolve(a)}return a}onInit(e,r){var n;const a=this.normalizeInstanceIdentifier(r),s=(n=this.onInitCallbacks.get(a))!==null&&n!==void 0?n:new Set;s.add(e),this.onInitCallbacks.set(a,s);const o=this.instances.get(a);return o&&e(o,a),()=>{s.delete(e)}}invokeOnInitCallbacks(e,r){const n=this.onInitCallbacks.get(r);if(n)for(const a of n)try{a(e,r)}catch{}}getOrInitializeService({instanceIdentifier:e,options:r={}}){let n=this.instances.get(e);if(!n&&this.component&&(n=this.component.instanceFactory(this.container,{instanceIdentifier:Ame(e),options:r}),this.instances.set(e,n),this.instancesOptions.set(e,r),this.invokeOnInitCallbacks(n,e),this.component.onInstanceCreated))try{this.component.onInstanceCreated(this.container,e,n)}catch{}return n||null}normalizeInstanceIdentifier(e=sp){return this.component?this.component.multipleInstances?e:sp:e}shouldAutoInitialize(){return!!this.component&&this.component.instantiationMode!=="EXPLICIT"}};function Ame(t){return t===sp?void 0:t}function mme(t){return t.instantiationMode==="EAGER"}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class pme{constructor(e){this.name=e,this.providers=new Map}addComponent(e){const r=this.getProvider(e.name);if(r.isComponentSet())throw new Error(`Component ${e.name} has already been registered with ${this.name}`);r.setComponent(e)}addOrOverwriteComponent(e){this.getProvider(e.name).isComponentSet()&&this.providers.delete(e.name),this.addComponent(e)}getProvider(e){if(this.providers.has(e))return this.providers.get(e);const r=new hme(e,this);return this.providers.set(e,r),r}getProviders(){return Array.from(this.providers.values())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var ha;(function(t){t[t.DEBUG=0]="DEBUG",t[t.VERBOSE=1]="VERBOSE",t[t.INFO=2]="INFO",t[t.WARN=3]="WARN",t[t.ERROR=4]="ERROR",t[t.SILENT=5]="SILENT"})(ha||(ha={}));const gme={debug:ha.DEBUG,verbose:ha.VERBOSE,info:ha.INFO,warn:ha.WARN,error:ha.ERROR,silent:ha.SILENT},xme=ha.INFO,vme={[ha.DEBUG]:"log",[ha.VERBOSE]:"log",[ha.INFO]:"info",[ha.WARN]:"warn",[ha.ERROR]:"error"},yme=(t,e,...r)=>{if(e<t.logLevel)return;const n=new Date().toISOString(),a=vme[e];if(a)console[a](`[${n}]  ${t.name}:`,...r);else throw new Error(`Attempted to log a message with an invalid logType (value: ${e})`)};let CD=class{constructor(e){this.name=e,this._logLevel=xme,this._logHandler=yme,this._userLogHandler=null}get logLevel(){return this._logLevel}set logLevel(e){if(!(e in ha))throw new TypeError(`Invalid value "${e}" assigned to \`logLevel\``);this._logLevel=e}setLogLevel(e){this._logLevel=typeof e=="string"?gme[e]:e}get logHandler(){return this._logHandler}set logHandler(e){if(typeof e!="function")throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=e}get userLogHandler(){return this._userLogHandler}set userLogHandler(e){this._userLogHandler=e}debug(...e){this._userLogHandler&&this._userLogHandler(this,ha.DEBUG,...e),this._logHandler(this,ha.DEBUG,...e)}log(...e){this._userLogHandler&&this._userLogHandler(this,ha.VERBOSE,...e),this._logHandler(this,ha.VERBOSE,...e)}info(...e){this._userLogHandler&&this._userLogHandler(this,ha.INFO,...e),this._logHandler(this,ha.INFO,...e)}warn(...e){this._userLogHandler&&this._userLogHandler(this,ha.WARN,...e),this._logHandler(this,ha.WARN,...e)}error(...e){this._userLogHandler&&this._userLogHandler(this,ha.ERROR,...e),this._logHandler(this,ha.ERROR,...e)}};const bme=(t,e)=>e.some(r=>t instanceof r);let QU,VU;function wme(){return QU||(QU=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction])}function Nme(){return VU||(VU=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])}const $Y=new WeakMap,TT=new WeakMap,GY=new WeakMap,v3=new WeakMap,_D=new WeakMap;function Cme(t){const e=new Promise((r,n)=>{const a=()=>{t.removeEventListener("success",s),t.removeEventListener("error",o)},s=()=>{r(sm(t.result)),a()},o=()=>{n(t.error),a()};t.addEventListener("success",s),t.addEventListener("error",o)});return e.then(r=>{r instanceof IDBCursor&&$Y.set(r,t)}).catch(()=>{}),_D.set(e,t),e}function _me(t){if(TT.has(t))return;const e=new Promise((r,n)=>{const a=()=>{t.removeEventListener("complete",s),t.removeEventListener("error",o),t.removeEventListener("abort",o)},s=()=>{r(),a()},o=()=>{n(t.error||new DOMException("AbortError","AbortError")),a()};t.addEventListener("complete",s),t.addEventListener("error",o),t.addEventListener("abort",o)});TT.set(t,e)}let kT={get(t,e,r){if(t instanceof IDBTransaction){if(e==="done")return TT.get(t);if(e==="objectStoreNames")return t.objectStoreNames||GY.get(t);if(e==="store")return r.objectStoreNames[1]?void 0:r.objectStore(r.objectStoreNames[0])}return sm(t[e])},set(t,e,r){return t[e]=r,!0},has(t,e){return t instanceof IDBTransaction&&(e==="done"||e==="store")?!0:e in t}};function Eme(t){kT=t(kT)}function Sme(t){return t===IDBDatabase.prototype.transaction&&!("objectStoreNames"in IDBTransaction.prototype)?function(e,...r){const n=t.call(y3(this),e,...r);return GY.set(n,e.sort?e.sort():[e]),sm(n)}:Nme().includes(t)?function(...e){return t.apply(y3(this),e),sm($Y.get(this))}:function(...e){return sm(t.apply(y3(this),e))}}function Ime(t){return typeof t=="function"?Sme(t):(t instanceof IDBTransaction&&_me(t),bme(t,wme())?new Proxy(t,kT):t)}function sm(t){if(t instanceof IDBRequest)return Cme(t);if(v3.has(t))return v3.get(t);const e=Ime(t);return e!==t&&(v3.set(t,e),_D.set(e,t)),e}const y3=t=>_D.get(t);function jme(t,e,{blocked:r,upgrade:n,blocking:a,terminated:s}={}){const o=indexedDB.open(t,e),l=sm(o);return n&&o.addEventListener("upgradeneeded",c=>{n(sm(o.result),c.oldVersion,c.newVersion,sm(o.transaction),c)}),r&&o.addEventListener("blocked",c=>r(c.oldVersion,c.newVersion,c)),l.then(c=>{s&&c.addEventListener("close",()=>s()),a&&c.addEventListener("versionchange",u=>a(u.oldVersion,u.newVersion,u))}).catch(()=>{}),l}const Pme=["get","getKey","getAll","getAllKeys","count"],Bme=["put","add","delete","clear"],b3=new Map;function HU(t,e){if(!(t instanceof IDBDatabase&&!(e in t)&&typeof e=="string"))return;if(b3.get(e))return b3.get(e);const r=e.replace(/FromIndex$/,""),n=e!==r,a=Bme.includes(r);if(!(r in(n?IDBIndex:IDBObjectStore).prototype)||!(a||Pme.includes(r)))return;const s=async function(o,...l){const c=this.transaction(o,a?"readwrite":"readonly");let u=c.store;return n&&(u=u.index(l.shift())),(await Promise.all([u[r](...l),a&&c.done]))[0]};return b3.set(e,s),s}Eme(t=>({...t,get:(e,r,n)=>HU(e,r)||t.get(e,r,n),has:(e,r)=>!!HU(e,r)||t.has(e,r)}));/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Tme{constructor(e){this.container=e}getPlatformInfoString(){return this.container.getProviders().map(r=>{if(kme(r)){const n=r.getImmediate();return`${n.library}/${n.version}`}else return null}).filter(r=>r).join(" ")}}function kme(t){const e=t.getComponent();return(e==null?void 0:e.type)==="VERSION"}const FT="@firebase/app",$U="0.10.13";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const mA=new CD("@firebase/app"),Fme="@firebase/app-compat",Ome="@firebase/analytics-compat",Dme="@firebase/analytics",Rme="@firebase/app-check-compat",Mme="@firebase/app-check",Lme="@firebase/auth",Ume="@firebase/auth-compat",Qme="@firebase/database",Vme="@firebase/data-connect",Hme="@firebase/database-compat",$me="@firebase/functions",Gme="@firebase/functions-compat",Kme="@firebase/installations",qme="@firebase/installations-compat",zme="@firebase/messaging",Wme="@firebase/messaging-compat",Xme="@firebase/performance",Yme="@firebase/performance-compat",Jme="@firebase/remote-config",Zme="@firebase/remote-config-compat",epe="@firebase/storage",tpe="@firebase/storage-compat",rpe="@firebase/firestore",npe="@firebase/vertexai-preview",ape="@firebase/firestore-compat",spe="firebase",ipe="10.14.1";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const OT="[DEFAULT]",ope={[FT]:"fire-core",[Fme]:"fire-core-compat",[Dme]:"fire-analytics",[Ome]:"fire-analytics-compat",[Mme]:"fire-app-check",[Rme]:"fire-app-check-compat",[Lme]:"fire-auth",[Ume]:"fire-auth-compat",[Qme]:"fire-rtdb",[Vme]:"fire-data-connect",[Hme]:"fire-rtdb-compat",[$me]:"fire-fn",[Gme]:"fire-fn-compat",[Kme]:"fire-iid",[qme]:"fire-iid-compat",[zme]:"fire-fcm",[Wme]:"fire-fcm-compat",[Xme]:"fire-perf",[Yme]:"fire-perf-compat",[Jme]:"fire-rc",[Zme]:"fire-rc-compat",[epe]:"fire-gcs",[tpe]:"fire-gcs-compat",[rpe]:"fire-fst",[ape]:"fire-fst-compat",[npe]:"fire-vertex","fire-js":"fire-js",[spe]:"fire-js-all"};/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Iv=new Map,DT=new Map,RT=new Map;function GU(t,e){try{t.container.addComponent(e)}catch(r){mA.debug(`Component ${e.name} failed to register with FirebaseApp ${t.name}`,r)}}function jv(t){const e=t.name;if(RT.has(e))return mA.debug(`There were multiple attempts to register component ${e}.`),!1;RT.set(e,t);for(const r of Iv.values())GU(r,t);for(const r of DT.values())GU(r,t);return!0}function ED(t,e){const r=t.container.getProvider("heartbeat").getImmediate({optional:!0});return r&&r.triggerHeartbeat(),t.container.getProvider(e)}function zf(t){return t.settings!==void 0}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const lpe={"no-app":"No Firebase App '{$appName}' has been created - call initializeApp() first","bad-app-name":"Illegal App name: '{$appName}'","duplicate-app":"Firebase App named '{$appName}' already exists with different options or config","app-deleted":"Firebase App named '{$appName}' already deleted","server-app-deleted":"Firebase Server App has been deleted","no-options":"Need to provide options, when not being deployed to hosting via source.","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance.","invalid-log-argument":"First argument to `onLog` must be null or a function.","idb-open":"Error thrown when opening IndexedDB. Original error: {$originalErrorMessage}.","idb-get":"Error thrown when reading from IndexedDB. Original error: {$originalErrorMessage}.","idb-set":"Error thrown when writing to IndexedDB. Original error: {$originalErrorMessage}.","idb-delete":"Error thrown when deleting from IndexedDB. Original error: {$originalErrorMessage}.","finalization-registry-not-supported":"FirebaseServerApp deleteOnDeref field defined but the JS runtime does not support FinalizationRegistry.","invalid-server-app-environment":"FirebaseServerApp is not for use in browser environments."},im=new xw("app","Firebase",lpe);/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class cpe{constructor(e,r,n){this._isDeleted=!1,this._options=Object.assign({},e),this._config=Object.assign({},r),this._name=r.name,this._automaticDataCollectionEnabled=r.automaticDataCollectionEnabled,this._container=n,this.container.addComponent(new Zp("app",()=>this,"PUBLIC"))}get automaticDataCollectionEnabled(){return this.checkDestroyed(),this._automaticDataCollectionEnabled}set automaticDataCollectionEnabled(e){this.checkDestroyed(),this._automaticDataCollectionEnabled=e}get name(){return this.checkDestroyed(),this._name}get options(){return this.checkDestroyed(),this._options}get config(){return this.checkDestroyed(),this._config}get container(){return this._container}get isDeleted(){return this._isDeleted}set isDeleted(e){this._isDeleted=e}checkDestroyed(){if(this.isDeleted)throw im.create("app-deleted",{appName:this._name})}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const s1=ipe;function SD(t,e={}){let r=t;typeof e!="object"&&(e={name:e});const n=Object.assign({name:OT,automaticDataCollectionEnabled:!1},e),a=n.name;if(typeof a!="string"||!a)throw im.create("bad-app-name",{appName:String(a)});if(r||(r=UY()),!r)throw im.create("no-options");const s=Iv.get(a);if(s){if(i2(r,s.options)&&i2(n,s.config))return s;throw im.create("duplicate-app",{appName:a})}const o=new pme(a);for(const c of RT.values())o.addComponent(c);const l=new cpe(r,n,o);return Iv.set(a,l),l}function ID(t=OT){const e=Iv.get(t);if(!e&&t===OT&&UY())return SD();if(!e)throw im.create("no-app",{appName:t});return e}async function upe(t){let e=!1;const r=t.name;Iv.has(r)?(e=!0,Iv.delete(r)):DT.has(r)&&t.decRefCount()<=0&&(DT.delete(r),e=!0),e&&(await Promise.all(t.container.getProviders().map(n=>n.delete())),t.isDeleted=!0)}function om(t,e,r){var n;let a=(n=ope[t])!==null&&n!==void 0?n:t;r&&(a+=`-${r}`);const s=a.match(/\s|\//),o=e.match(/\s|\//);if(s||o){const l=[`Unable to register library "${a}" with version "${e}":`];s&&l.push(`library name "${a}" contains illegal characters (whitespace or "/")`),s&&o&&l.push("and"),o&&l.push(`version name "${e}" contains illegal characters (whitespace or "/")`),mA.warn(l.join(" "));return}jv(new Zp(`${a}-version`,()=>({library:a,version:e}),"VERSION"))}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const dpe="firebase-heartbeat-database",fpe=1,o2="firebase-heartbeat-store";let w3=null;function KY(){return w3||(w3=jme(dpe,fpe,{upgrade:(t,e)=>{switch(e){case 0:try{t.createObjectStore(o2)}catch(r){console.warn(r)}}}}).catch(t=>{throw im.create("idb-open",{originalErrorMessage:t.message})})),w3}async function hpe(t){try{const r=(await KY()).transaction(o2),n=await r.objectStore(o2).get(qY(t));return await r.done,n}catch(e){if(e instanceof BA)mA.warn(e.message);else{const r=im.create("idb-get",{originalErrorMessage:e==null?void 0:e.message});mA.warn(r.message)}}}async function KU(t,e){try{const n=(await KY()).transaction(o2,"readwrite");await n.objectStore(o2).put(e,qY(t)),await n.done}catch(r){if(r instanceof BA)mA.warn(r.message);else{const n=im.create("idb-set",{originalErrorMessage:r==null?void 0:r.message});mA.warn(n.message)}}}function qY(t){return`${t.name}!${t.options.appId}`}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Ape=1024,mpe=30*24*60*60*1e3;class ppe{constructor(e){this.container=e,this._heartbeatsCache=null;const r=this.container.getProvider("app").getImmediate();this._storage=new xpe(r),this._heartbeatsCachePromise=this._storage.read().then(n=>(this._heartbeatsCache=n,n))}async triggerHeartbeat(){var e,r;try{const a=this.container.getProvider("platform-logger").getImmediate().getPlatformInfoString(),s=qU();return((e=this._heartbeatsCache)===null||e===void 0?void 0:e.heartbeats)==null&&(this._heartbeatsCache=await this._heartbeatsCachePromise,((r=this._heartbeatsCache)===null||r===void 0?void 0:r.heartbeats)==null)||this._heartbeatsCache.lastSentHeartbeatDate===s||this._heartbeatsCache.heartbeats.some(o=>o.date===s)?void 0:(this._heartbeatsCache.heartbeats.push({date:s,agent:a}),this._heartbeatsCache.heartbeats=this._heartbeatsCache.heartbeats.filter(o=>{const l=new Date(o.date).valueOf();return Date.now()-l<=mpe}),this._storage.overwrite(this._heartbeatsCache))}catch(n){mA.warn(n)}}async getHeartbeatsHeader(){var e;try{if(this._heartbeatsCache===null&&await this._heartbeatsCachePromise,((e=this._heartbeatsCache)===null||e===void 0?void 0:e.heartbeats)==null||this._heartbeatsCache.heartbeats.length===0)return"";const r=qU(),{heartbeatsToSend:n,unsentEntries:a}=gpe(this._heartbeatsCache.heartbeats),s=JE(JSON.stringify({version:2,heartbeats:n}));return this._heartbeatsCache.lastSentHeartbeatDate=r,a.length>0?(this._heartbeatsCache.heartbeats=a,await this._storage.overwrite(this._heartbeatsCache)):(this._heartbeatsCache.heartbeats=[],this._storage.overwrite(this._heartbeatsCache)),s}catch(r){return mA.warn(r),""}}}function qU(){return new Date().toISOString().substring(0,10)}function gpe(t,e=Ape){const r=[];let n=t.slice();for(const a of t){const s=r.find(o=>o.agent===a.agent);if(s){if(s.dates.push(a.date),zU(r)>e){s.dates.pop();break}}else if(r.push({agent:a.agent,dates:[a.date]}),zU(r)>e){r.pop();break}n=n.slice(1)}return{heartbeatsToSend:r,unsentEntries:n}}class xpe{constructor(e){this.app=e,this._canUseIndexedDBPromise=this.runIndexedDBEnvironmentCheck()}async runIndexedDBEnvironmentCheck(){return HY()?sme().then(()=>!0).catch(()=>!1):!1}async read(){if(await this._canUseIndexedDBPromise){const r=await hpe(this.app);return r!=null&&r.heartbeats?r:{heartbeats:[]}}else return{heartbeats:[]}}async overwrite(e){var r;if(await this._canUseIndexedDBPromise){const a=await this.read();return KU(this.app,{lastSentHeartbeatDate:(r=e.lastSentHeartbeatDate)!==null&&r!==void 0?r:a.lastSentHeartbeatDate,heartbeats:e.heartbeats})}else return}async add(e){var r;if(await this._canUseIndexedDBPromise){const a=await this.read();return KU(this.app,{lastSentHeartbeatDate:(r=e.lastSentHeartbeatDate)!==null&&r!==void 0?r:a.lastSentHeartbeatDate,heartbeats:[...a.heartbeats,...e.heartbeats]})}else return}}function zU(t){return JE(JSON.stringify({version:2,heartbeats:t})).length}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function vpe(t){jv(new Zp("platform-logger",e=>new Tme(e),"PRIVATE")),jv(new Zp("heartbeat",e=>new ppe(e),"PRIVATE")),om(FT,$U,t),om(FT,$U,"esm2017"),om("fire-js","")}vpe("");function jD(t,e){var r={};for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&e.indexOf(n)<0&&(r[n]=t[n]);if(t!=null&&typeof Object.getOwnPropertySymbols=="function")for(var a=0,n=Object.getOwnPropertySymbols(t);a<n.length;a++)e.indexOf(n[a])<0&&Object.prototype.propertyIsEnumerable.call(t,n[a])&&(r[n[a]]=t[n[a]]);return r}function zY(){return{"dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."}}const ype=zY,WY=new xw("auth","Firebase",zY());/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ZE=new CD("@firebase/auth");function bpe(t,...e){ZE.logLevel<=ha.WARN&&ZE.warn(`Auth (${s1}): ${t}`,...e)}function J_(t,...e){ZE.logLevel<=ha.ERROR&&ZE.error(`Auth (${s1}): ${t}`,...e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function wf(t,...e){throw PD(t,...e)}function nh(t,...e){return PD(t,...e)}function XY(t,e,r){const n=Object.assign(Object.assign({},ype()),{[e]:r});return new xw("auth","Firebase",n).create(e,{appName:t.name})}function tA(t){return XY(t,"operation-not-supported-in-this-environment","Operations that alter the current user are not supported in conjunction with FirebaseServerApp")}function PD(t,...e){if(typeof t!="string"){const r=e[0],n=[...e.slice(1)];return n[0]&&(n[0].appName=t.name),t._errorFactory.create(r,...n)}return WY.create(t,...e)}function Rn(t,e,...r){if(!t)throw PD(e,...r)}function Gh(t){const e="INTERNAL ASSERTION FAILED: "+t;throw J_(e),new Error(e)}function pA(t,e){t||Gh(e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function MT(){var t;return typeof self<"u"&&((t=self.location)===null||t===void 0?void 0:t.href)||""}function wpe(){return WU()==="http:"||WU()==="https:"}function WU(){var t;return typeof self<"u"&&((t=self.location)===null||t===void 0?void 0:t.protocol)||null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Npe(){return typeof navigator<"u"&&navigator&&"onLine"in navigator&&typeof navigator.onLine=="boolean"&&(wpe()||rme()||"connection"in navigator)?navigator.onLine:!0}function Cpe(){if(typeof navigator>"u")return null;const t=navigator;return t.languages&&t.languages[0]||t.language||null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class yw{constructor(e,r){this.shortDelay=e,this.longDelay=r,pA(r>e,"Short delay should be less than long delay!"),this.isMobile=Z0e()||nme()}get(){return Npe()?this.isMobile?this.longDelay:this.shortDelay:Math.min(5e3,this.shortDelay)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function BD(t,e){pA(t.emulator,"Emulator should always be set here");const{url:r}=t.emulator;return e?`${r}${e.startsWith("/")?e.slice(1):e}`:r}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class YY{static initialize(e,r,n){this.fetchImpl=e,r&&(this.headersImpl=r),n&&(this.responseImpl=n)}static fetch(){if(this.fetchImpl)return this.fetchImpl;if(typeof self<"u"&&"fetch"in self)return self.fetch;if(typeof globalThis<"u"&&globalThis.fetch)return globalThis.fetch;if(typeof fetch<"u")return fetch;Gh("Could not find fetch implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static headers(){if(this.headersImpl)return this.headersImpl;if(typeof self<"u"&&"Headers"in self)return self.Headers;if(typeof globalThis<"u"&&globalThis.Headers)return globalThis.Headers;if(typeof Headers<"u")return Headers;Gh("Could not find Headers implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static response(){if(this.responseImpl)return this.responseImpl;if(typeof self<"u"&&"Response"in self)return self.Response;if(typeof globalThis<"u"&&globalThis.Response)return globalThis.Response;if(typeof Response<"u")return Response;Gh("Could not find Response implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const _pe={CREDENTIAL_MISMATCH:"custom-token-mismatch",MISSING_CUSTOM_TOKEN:"internal-error",INVALID_IDENTIFIER:"invalid-email",MISSING_CONTINUE_URI:"internal-error",INVALID_PASSWORD:"wrong-password",MISSING_PASSWORD:"missing-password",INVALID_LOGIN_CREDENTIALS:"invalid-credential",EMAIL_EXISTS:"email-already-in-use",PASSWORD_LOGIN_DISABLED:"operation-not-allowed",INVALID_IDP_RESPONSE:"invalid-credential",INVALID_PENDING_TOKEN:"invalid-credential",FEDERATED_USER_ID_ALREADY_LINKED:"credential-already-in-use",MISSING_REQ_TYPE:"internal-error",EMAIL_NOT_FOUND:"user-not-found",RESET_PASSWORD_EXCEED_LIMIT:"too-many-requests",EXPIRED_OOB_CODE:"expired-action-code",INVALID_OOB_CODE:"invalid-action-code",MISSING_OOB_CODE:"internal-error",CREDENTIAL_TOO_OLD_LOGIN_AGAIN:"requires-recent-login",INVALID_ID_TOKEN:"invalid-user-token",TOKEN_EXPIRED:"user-token-expired",USER_NOT_FOUND:"user-token-expired",TOO_MANY_ATTEMPTS_TRY_LATER:"too-many-requests",PASSWORD_DOES_NOT_MEET_REQUIREMENTS:"password-does-not-meet-requirements",INVALID_CODE:"invalid-verification-code",INVALID_SESSION_INFO:"invalid-verification-id",INVALID_TEMPORARY_PROOF:"invalid-credential",MISSING_SESSION_INFO:"missing-verification-id",SESSION_EXPIRED:"code-expired",MISSING_ANDROID_PACKAGE_NAME:"missing-android-pkg-name",UNAUTHORIZED_DOMAIN:"unauthorized-continue-uri",INVALID_OAUTH_CLIENT_ID:"invalid-oauth-client-id",ADMIN_ONLY_OPERATION:"admin-restricted-operation",INVALID_MFA_PENDING_CREDENTIAL:"invalid-multi-factor-session",MFA_ENROLLMENT_NOT_FOUND:"multi-factor-info-not-found",MISSING_MFA_ENROLLMENT_ID:"missing-multi-factor-info",MISSING_MFA_PENDING_CREDENTIAL:"missing-multi-factor-session",SECOND_FACTOR_EXISTS:"second-factor-already-in-use",SECOND_FACTOR_LIMIT_EXCEEDED:"maximum-second-factor-count-exceeded",BLOCKING_FUNCTION_ERROR_RESPONSE:"internal-error",RECAPTCHA_NOT_ENABLED:"recaptcha-not-enabled",MISSING_RECAPTCHA_TOKEN:"missing-recaptcha-token",INVALID_RECAPTCHA_TOKEN:"invalid-recaptcha-token",INVALID_RECAPTCHA_ACTION:"invalid-recaptcha-action",MISSING_CLIENT_TYPE:"missing-client-type",MISSING_RECAPTCHA_VERSION:"missing-recaptcha-version",INVALID_RECAPTCHA_VERSION:"invalid-recaptcha-version",INVALID_REQ_TYPE:"invalid-req-type"};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Epe=new yw(3e4,6e4);function TA(t,e){return t.tenantId&&!e.tenantId?Object.assign(Object.assign({},e),{tenantId:t.tenantId}):e}async function kA(t,e,r,n,a={}){return JY(t,a,async()=>{let s={},o={};n&&(e==="GET"?o=n:s={body:JSON.stringify(n)});const l=vw(Object.assign({key:t.config.apiKey},o)).slice(1),c=await t._getAdditionalHeaders();c["Content-Type"]="application/json",t.languageCode&&(c["X-Firebase-Locale"]=t.languageCode);const u=Object.assign({method:e,headers:c},s);return tme()||(u.referrerPolicy="no-referrer"),YY.fetch()(ZY(t,t.config.apiHost,r,l),u)})}async function JY(t,e,r){t._canInitEmulator=!1;const n=Object.assign(Object.assign({},_pe),e);try{const a=new Ipe(t),s=await Promise.race([r(),a.promise]);a.clearNetworkTimeout();const o=await s.json();if("needConfirmation"in o)throw ZN(t,"account-exists-with-different-credential",o);if(s.ok&&!("errorMessage"in o))return o;{const l=s.ok?o.errorMessage:o.error.message,[c,u]=l.split(" : ");if(c==="FEDERATED_USER_ID_ALREADY_LINKED")throw ZN(t,"credential-already-in-use",o);if(c==="EMAIL_EXISTS")throw ZN(t,"email-already-in-use",o);if(c==="USER_DISABLED")throw ZN(t,"user-disabled",o);const d=n[c]||c.toLowerCase().replace(/[_\s]+/g,"-");if(u)throw XY(t,d,u);wf(t,d)}}catch(a){if(a instanceof BA)throw a;wf(t,"network-request-failed",{message:String(a)})}}async function bw(t,e,r,n,a={}){const s=await kA(t,e,r,n,a);return"mfaPendingCredential"in s&&wf(t,"multi-factor-auth-required",{_serverResponse:s}),s}function ZY(t,e,r,n){const a=`${e}${r}?${n}`;return t.config.emulator?BD(t.config,a):`${t.config.apiScheme}://${a}`}function Spe(t){switch(t){case"ENFORCE":return"ENFORCE";case"AUDIT":return"AUDIT";case"OFF":return"OFF";default:return"ENFORCEMENT_STATE_UNSPECIFIED"}}class Ipe{constructor(e){this.auth=e,this.timer=null,this.promise=new Promise((r,n)=>{this.timer=setTimeout(()=>n(nh(this.auth,"network-request-failed")),Epe.get())})}clearNetworkTimeout(){clearTimeout(this.timer)}}function ZN(t,e,r){const n={appName:t.name};r.email&&(n.email=r.email),r.phoneNumber&&(n.phoneNumber=r.phoneNumber);const a=nh(t,e,n);return a.customData._tokenResponse=r,a}function XU(t){return t!==void 0&&t.enterprise!==void 0}class jpe{constructor(e){if(this.siteKey="",this.recaptchaEnforcementState=[],e.recaptchaKey===void 0)throw new Error("recaptchaKey undefined");this.siteKey=e.recaptchaKey.split("/")[3],this.recaptchaEnforcementState=e.recaptchaEnforcementState}getProviderEnforcementState(e){if(!this.recaptchaEnforcementState||this.recaptchaEnforcementState.length===0)return null;for(const r of this.recaptchaEnforcementState)if(r.provider&&r.provider===e)return Spe(r.enforcementState);return null}isProviderEnabled(e){return this.getProviderEnforcementState(e)==="ENFORCE"||this.getProviderEnforcementState(e)==="AUDIT"}}async function Ppe(t,e){return kA(t,"GET","/v2/recaptchaConfig",TA(t,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Bpe(t,e){return kA(t,"POST","/v1/accounts:delete",e)}async function eJ(t,e){return kA(t,"POST","/v1/accounts:lookup",e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function fb(t){if(t)try{const e=new Date(Number(t));if(!isNaN(e.getTime()))return e.toUTCString()}catch{}}async function Tpe(t,e=!1){const r=di(t),n=await r.getIdToken(e),a=TD(n);Rn(a&&a.exp&&a.auth_time&&a.iat,r.auth,"internal-error");const s=typeof a.firebase=="object"?a.firebase:void 0,o=s==null?void 0:s.sign_in_provider;return{claims:a,token:n,authTime:fb(N3(a.auth_time)),issuedAtTime:fb(N3(a.iat)),expirationTime:fb(N3(a.exp)),signInProvider:o||null,signInSecondFactor:(s==null?void 0:s.sign_in_second_factor)||null}}function N3(t){return Number(t)*1e3}function TD(t){const[e,r,n]=t.split(".");if(e===void 0||r===void 0||n===void 0)return J_("JWT malformed, contained fewer than 3 sections"),null;try{const a=MY(r);return a?JSON.parse(a):(J_("Failed to decode base64 JWT payload"),null)}catch(a){return J_("Caught error parsing JWT payload as JSON",a==null?void 0:a.toString()),null}}function YU(t){const e=TD(t);return Rn(e,"internal-error"),Rn(typeof e.exp<"u","internal-error"),Rn(typeof e.iat<"u","internal-error"),Number(e.exp)-Number(e.iat)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function l2(t,e,r=!1){if(r)return e;try{return await e}catch(n){throw n instanceof BA&&kpe(n)&&t.auth.currentUser===t&&await t.auth.signOut(),n}}function kpe({code:t}){return t==="auth/user-disabled"||t==="auth/user-token-expired"}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Fpe{constructor(e){this.user=e,this.isRunning=!1,this.timerId=null,this.errorBackoff=3e4}_start(){this.isRunning||(this.isRunning=!0,this.schedule())}_stop(){this.isRunning&&(this.isRunning=!1,this.timerId!==null&&clearTimeout(this.timerId))}getInterval(e){var r;if(e){const n=this.errorBackoff;return this.errorBackoff=Math.min(this.errorBackoff*2,96e4),n}else{this.errorBackoff=3e4;const a=((r=this.user.stsTokenManager.expirationTime)!==null&&r!==void 0?r:0)-Date.now()-3e5;return Math.max(0,a)}}schedule(e=!1){if(!this.isRunning)return;const r=this.getInterval(e);this.timerId=setTimeout(async()=>{await this.iteration()},r)}async iteration(){try{await this.user.getIdToken(!0)}catch(e){(e==null?void 0:e.code)==="auth/network-request-failed"&&this.schedule(!0);return}this.schedule()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class LT{constructor(e,r){this.createdAt=e,this.lastLoginAt=r,this._initializeTime()}_initializeTime(){this.lastSignInTime=fb(this.lastLoginAt),this.creationTime=fb(this.createdAt)}_copy(e){this.createdAt=e.createdAt,this.lastLoginAt=e.lastLoginAt,this._initializeTime()}toJSON(){return{createdAt:this.createdAt,lastLoginAt:this.lastLoginAt}}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function eS(t){var e;const r=t.auth,n=await t.getIdToken(),a=await l2(t,eJ(r,{idToken:n}));Rn(a==null?void 0:a.users.length,r,"internal-error");const s=a.users[0];t._notifyReloadListener(s);const o=!((e=s.providerUserInfo)===null||e===void 0)&&e.length?tJ(s.providerUserInfo):[],l=Dpe(t.providerData,o),c=t.isAnonymous,u=!(t.email&&s.passwordHash)&&!(l!=null&&l.length),d=c?u:!1,f={uid:s.localId,displayName:s.displayName||null,photoURL:s.photoUrl||null,email:s.email||null,emailVerified:s.emailVerified||!1,phoneNumber:s.phoneNumber||null,tenantId:s.tenantId||null,providerData:l,metadata:new LT(s.createdAt,s.lastLoginAt),isAnonymous:d};Object.assign(t,f)}async function Ope(t){const e=di(t);await eS(e),await e.auth._persistUserIfCurrent(e),e.auth._notifyListenersIfCurrent(e)}function Dpe(t,e){return[...t.filter(n=>!e.some(a=>a.providerId===n.providerId)),...e]}function tJ(t){return t.map(e=>{var{providerId:r}=e,n=jD(e,["providerId"]);return{providerId:r,uid:n.rawId||"",displayName:n.displayName||null,email:n.email||null,phoneNumber:n.phoneNumber||null,photoURL:n.photoUrl||null}})}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Rpe(t,e){const r=await JY(t,{},async()=>{const n=vw({grant_type:"refresh_token",refresh_token:e}).slice(1),{tokenApiHost:a,apiKey:s}=t.config,o=ZY(t,a,"/v1/token",`key=${s}`),l=await t._getAdditionalHeaders();return l["Content-Type"]="application/x-www-form-urlencoded",YY.fetch()(o,{method:"POST",headers:l,body:n})});return{accessToken:r.access_token,expiresIn:r.expires_in,refreshToken:r.refresh_token}}async function Mpe(t,e){return kA(t,"POST","/v2/accounts:revokeToken",TA(t,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class cv{constructor(){this.refreshToken=null,this.accessToken=null,this.expirationTime=null}get isExpired(){return!this.expirationTime||Date.now()>this.expirationTime-3e4}updateFromServerResponse(e){Rn(e.idToken,"internal-error"),Rn(typeof e.idToken<"u","internal-error"),Rn(typeof e.refreshToken<"u","internal-error");const r="expiresIn"in e&&typeof e.expiresIn<"u"?Number(e.expiresIn):YU(e.idToken);this.updateTokensAndExpiration(e.idToken,e.refreshToken,r)}updateFromIdToken(e){Rn(e.length!==0,"internal-error");const r=YU(e);this.updateTokensAndExpiration(e,null,r)}async getToken(e,r=!1){return!r&&this.accessToken&&!this.isExpired?this.accessToken:(Rn(this.refreshToken,e,"user-token-expired"),this.refreshToken?(await this.refresh(e,this.refreshToken),this.accessToken):null)}clearRefreshToken(){this.refreshToken=null}async refresh(e,r){const{accessToken:n,refreshToken:a,expiresIn:s}=await Rpe(e,r);this.updateTokensAndExpiration(n,a,Number(s))}updateTokensAndExpiration(e,r,n){this.refreshToken=r||null,this.accessToken=e||null,this.expirationTime=Date.now()+n*1e3}static fromJSON(e,r){const{refreshToken:n,accessToken:a,expirationTime:s}=r,o=new cv;return n&&(Rn(typeof n=="string","internal-error",{appName:e}),o.refreshToken=n),a&&(Rn(typeof a=="string","internal-error",{appName:e}),o.accessToken=a),s&&(Rn(typeof s=="number","internal-error",{appName:e}),o.expirationTime=s),o}toJSON(){return{refreshToken:this.refreshToken,accessToken:this.accessToken,expirationTime:this.expirationTime}}_assign(e){this.accessToken=e.accessToken,this.refreshToken=e.refreshToken,this.expirationTime=e.expirationTime}_clone(){return Object.assign(new cv,this.toJSON())}_performRefresh(){return Gh("not implemented")}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function i0(t,e){Rn(typeof t=="string"||typeof t>"u","internal-error",{appName:e})}class Kh{constructor(e){var{uid:r,auth:n,stsTokenManager:a}=e,s=jD(e,["uid","auth","stsTokenManager"]);this.providerId="firebase",this.proactiveRefresh=new Fpe(this),this.reloadUserInfo=null,this.reloadListener=null,this.uid=r,this.auth=n,this.stsTokenManager=a,this.accessToken=a.accessToken,this.displayName=s.displayName||null,this.email=s.email||null,this.emailVerified=s.emailVerified||!1,this.phoneNumber=s.phoneNumber||null,this.photoURL=s.photoURL||null,this.isAnonymous=s.isAnonymous||!1,this.tenantId=s.tenantId||null,this.providerData=s.providerData?[...s.providerData]:[],this.metadata=new LT(s.createdAt||void 0,s.lastLoginAt||void 0)}async getIdToken(e){const r=await l2(this,this.stsTokenManager.getToken(this.auth,e));return Rn(r,this.auth,"internal-error"),this.accessToken!==r&&(this.accessToken=r,await this.auth._persistUserIfCurrent(this),this.auth._notifyListenersIfCurrent(this)),r}getIdTokenResult(e){return Tpe(this,e)}reload(){return Ope(this)}_assign(e){this!==e&&(Rn(this.uid===e.uid,this.auth,"internal-error"),this.displayName=e.displayName,this.photoURL=e.photoURL,this.email=e.email,this.emailVerified=e.emailVerified,this.phoneNumber=e.phoneNumber,this.isAnonymous=e.isAnonymous,this.tenantId=e.tenantId,this.providerData=e.providerData.map(r=>Object.assign({},r)),this.metadata._copy(e.metadata),this.stsTokenManager._assign(e.stsTokenManager))}_clone(e){const r=new Kh(Object.assign(Object.assign({},this),{auth:e,stsTokenManager:this.stsTokenManager._clone()}));return r.metadata._copy(this.metadata),r}_onReload(e){Rn(!this.reloadListener,this.auth,"internal-error"),this.reloadListener=e,this.reloadUserInfo&&(this._notifyReloadListener(this.reloadUserInfo),this.reloadUserInfo=null)}_notifyReloadListener(e){this.reloadListener?this.reloadListener(e):this.reloadUserInfo=e}_startProactiveRefresh(){this.proactiveRefresh._start()}_stopProactiveRefresh(){this.proactiveRefresh._stop()}async _updateTokensIfNecessary(e,r=!1){let n=!1;e.idToken&&e.idToken!==this.stsTokenManager.accessToken&&(this.stsTokenManager.updateFromServerResponse(e),n=!0),r&&await eS(this),await this.auth._persistUserIfCurrent(this),n&&this.auth._notifyListenersIfCurrent(this)}async delete(){if(zf(this.auth.app))return Promise.reject(tA(this.auth));const e=await this.getIdToken();return await l2(this,Bpe(this.auth,{idToken:e})),this.stsTokenManager.clearRefreshToken(),this.auth.signOut()}toJSON(){return Object.assign(Object.assign({uid:this.uid,email:this.email||void 0,emailVerified:this.emailVerified,displayName:this.displayName||void 0,isAnonymous:this.isAnonymous,photoURL:this.photoURL||void 0,phoneNumber:this.phoneNumber||void 0,tenantId:this.tenantId||void 0,providerData:this.providerData.map(e=>Object.assign({},e)),stsTokenManager:this.stsTokenManager.toJSON(),_redirectEventId:this._redirectEventId},this.metadata.toJSON()),{apiKey:this.auth.config.apiKey,appName:this.auth.name})}get refreshToken(){return this.stsTokenManager.refreshToken||""}static _fromJSON(e,r){var n,a,s,o,l,c,u,d;const f=(n=r.displayName)!==null&&n!==void 0?n:void 0,A=(a=r.email)!==null&&a!==void 0?a:void 0,h=(s=r.phoneNumber)!==null&&s!==void 0?s:void 0,m=(o=r.photoURL)!==null&&o!==void 0?o:void 0,p=(l=r.tenantId)!==null&&l!==void 0?l:void 0,x=(c=r._redirectEventId)!==null&&c!==void 0?c:void 0,v=(u=r.createdAt)!==null&&u!==void 0?u:void 0,y=(d=r.lastLoginAt)!==null&&d!==void 0?d:void 0,{uid:b,emailVerified:w,isAnonymous:j,providerData:I,stsTokenManager:_}=r;Rn(b&&_,e,"internal-error");const S=cv.fromJSON(this.name,_);Rn(typeof b=="string",e,"internal-error"),i0(f,e.name),i0(A,e.name),Rn(typeof w=="boolean",e,"internal-error"),Rn(typeof j=="boolean",e,"internal-error"),i0(h,e.name),i0(m,e.name),i0(p,e.name),i0(x,e.name),i0(v,e.name),i0(y,e.name);const E=new Kh({uid:b,auth:e,email:A,emailVerified:w,displayName:f,isAnonymous:j,photoURL:m,phoneNumber:h,tenantId:p,stsTokenManager:S,createdAt:v,lastLoginAt:y});return I&&Array.isArray(I)&&(E.providerData=I.map(T=>Object.assign({},T))),x&&(E._redirectEventId=x),E}static async _fromIdTokenResponse(e,r,n=!1){const a=new cv;a.updateFromServerResponse(r);const s=new Kh({uid:r.localId,auth:e,stsTokenManager:a,isAnonymous:n});return await eS(s),s}static async _fromGetAccountInfoResponse(e,r,n){const a=r.users[0];Rn(a.localId!==void 0,"internal-error");const s=a.providerUserInfo!==void 0?tJ(a.providerUserInfo):[],o=!(a.email&&a.passwordHash)&&!(s!=null&&s.length),l=new cv;l.updateFromIdToken(n);const c=new Kh({uid:a.localId,auth:e,stsTokenManager:l,isAnonymous:o}),u={uid:a.localId,displayName:a.displayName||null,photoURL:a.photoUrl||null,email:a.email||null,emailVerified:a.emailVerified||!1,phoneNumber:a.phoneNumber||null,tenantId:a.tenantId||null,providerData:s,metadata:new LT(a.createdAt,a.lastLoginAt),isAnonymous:!(a.email&&a.passwordHash)&&!(s!=null&&s.length)};return Object.assign(c,u),c}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const JU=new Map;function qh(t){pA(t instanceof Function,"Expected a class definition");let e=JU.get(t);return e?(pA(e instanceof t,"Instance stored in cache mismatched with class"),e):(e=new t,JU.set(t,e),e)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class rJ{constructor(){this.type="NONE",this.storage={}}async _isAvailable(){return!0}async _set(e,r){this.storage[e]=r}async _get(e){const r=this.storage[e];return r===void 0?null:r}async _remove(e){delete this.storage[e]}_addListener(e,r){}_removeListener(e,r){}}rJ.type="NONE";const ZU=rJ;/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Z_(t,e,r){return`firebase:${t}:${e}:${r}`}class uv{constructor(e,r,n){this.persistence=e,this.auth=r,this.userKey=n;const{config:a,name:s}=this.auth;this.fullUserKey=Z_(this.userKey,a.apiKey,s),this.fullPersistenceKey=Z_("persistence",a.apiKey,s),this.boundEventHandler=r._onStorageEvent.bind(r),this.persistence._addListener(this.fullUserKey,this.boundEventHandler)}setCurrentUser(e){return this.persistence._set(this.fullUserKey,e.toJSON())}async getCurrentUser(){const e=await this.persistence._get(this.fullUserKey);return e?Kh._fromJSON(this.auth,e):null}removeCurrentUser(){return this.persistence._remove(this.fullUserKey)}savePersistenceForRedirect(){return this.persistence._set(this.fullPersistenceKey,this.persistence.type)}async setPersistence(e){if(this.persistence===e)return;const r=await this.getCurrentUser();if(await this.removeCurrentUser(),this.persistence=e,r)return this.setCurrentUser(r)}delete(){this.persistence._removeListener(this.fullUserKey,this.boundEventHandler)}static async create(e,r,n="authUser"){if(!r.length)return new uv(qh(ZU),e,n);const a=(await Promise.all(r.map(async u=>{if(await u._isAvailable())return u}))).filter(u=>u);let s=a[0]||qh(ZU);const o=Z_(n,e.config.apiKey,e.name);let l=null;for(const u of r)try{const d=await u._get(o);if(d){const f=Kh._fromJSON(e,d);u!==s&&(l=f),s=u;break}}catch{}const c=a.filter(u=>u._shouldAllowMigration);return!s._shouldAllowMigration||!c.length?new uv(s,e,n):(s=c[0],l&&await s._set(o,l.toJSON()),await Promise.all(r.map(async u=>{if(u!==s)try{await u._remove(o)}catch{}})),new uv(s,e,n))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function e7(t){const e=t.toLowerCase();if(e.includes("opera/")||e.includes("opr/")||e.includes("opios/"))return"Opera";if(iJ(e))return"IEMobile";if(e.includes("msie")||e.includes("trident/"))return"IE";if(e.includes("edge/"))return"Edge";if(nJ(e))return"Firefox";if(e.includes("silk/"))return"Silk";if(lJ(e))return"Blackberry";if(cJ(e))return"Webos";if(aJ(e))return"Safari";if((e.includes("chrome/")||sJ(e))&&!e.includes("edge/"))return"Chrome";if(oJ(e))return"Android";{const r=/([a-zA-Z\d\.]+)\/[a-zA-Z\d\.]*$/,n=t.match(r);if((n==null?void 0:n.length)===2)return n[1]}return"Other"}function nJ(t=Bo()){return/firefox\//i.test(t)}function aJ(t=Bo()){const e=t.toLowerCase();return e.includes("safari/")&&!e.includes("chrome/")&&!e.includes("crios/")&&!e.includes("android")}function sJ(t=Bo()){return/crios\//i.test(t)}function iJ(t=Bo()){return/iemobile/i.test(t)}function oJ(t=Bo()){return/android/i.test(t)}function lJ(t=Bo()){return/blackberry/i.test(t)}function cJ(t=Bo()){return/webos/i.test(t)}function kD(t=Bo()){return/iphone|ipad|ipod/i.test(t)||/macintosh/i.test(t)&&/mobile/i.test(t)}function Lpe(t=Bo()){var e;return kD(t)&&!!(!((e=window.navigator)===null||e===void 0)&&e.standalone)}function Upe(){return ame()&&document.documentMode===10}function uJ(t=Bo()){return kD(t)||oJ(t)||cJ(t)||lJ(t)||/windows phone/i.test(t)||iJ(t)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function dJ(t,e=[]){let r;switch(t){case"Browser":r=e7(Bo());break;case"Worker":r=`${e7(Bo())}-${t}`;break;default:r=t}const n=e.length?e.join(","):"FirebaseCore-web";return`${r}/JsCore/${s1}/${n}`}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Qpe{constructor(e){this.auth=e,this.queue=[]}pushCallback(e,r){const n=s=>new Promise((o,l)=>{try{const c=e(s);o(c)}catch(c){l(c)}});n.onAbort=r,this.queue.push(n);const a=this.queue.length-1;return()=>{this.queue[a]=()=>Promise.resolve()}}async runMiddleware(e){if(this.auth.currentUser===e)return;const r=[];try{for(const n of this.queue)await n(e),n.onAbort&&r.push(n.onAbort)}catch(n){r.reverse();for(const a of r)try{a()}catch{}throw this.auth._errorFactory.create("login-blocked",{originalMessage:n==null?void 0:n.message})}}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Vpe(t,e={}){return kA(t,"GET","/v2/passwordPolicy",TA(t,e))}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Hpe=6;class $pe{constructor(e){var r,n,a,s;const o=e.customStrengthOptions;this.customStrengthOptions={},this.customStrengthOptions.minPasswordLength=(r=o.minPasswordLength)!==null&&r!==void 0?r:Hpe,o.maxPasswordLength&&(this.customStrengthOptions.maxPasswordLength=o.maxPasswordLength),o.containsLowercaseCharacter!==void 0&&(this.customStrengthOptions.containsLowercaseLetter=o.containsLowercaseCharacter),o.containsUppercaseCharacter!==void 0&&(this.customStrengthOptions.containsUppercaseLetter=o.containsUppercaseCharacter),o.containsNumericCharacter!==void 0&&(this.customStrengthOptions.containsNumericCharacter=o.containsNumericCharacter),o.containsNonAlphanumericCharacter!==void 0&&(this.customStrengthOptions.containsNonAlphanumericCharacter=o.containsNonAlphanumericCharacter),this.enforcementState=e.enforcementState,this.enforcementState==="ENFORCEMENT_STATE_UNSPECIFIED"&&(this.enforcementState="OFF"),this.allowedNonAlphanumericCharacters=(a=(n=e.allowedNonAlphanumericCharacters)===null||n===void 0?void 0:n.join(""))!==null&&a!==void 0?a:"",this.forceUpgradeOnSignin=(s=e.forceUpgradeOnSignin)!==null&&s!==void 0?s:!1,this.schemaVersion=e.schemaVersion}validatePassword(e){var r,n,a,s,o,l;const c={isValid:!0,passwordPolicy:this};return this.validatePasswordLengthOptions(e,c),this.validatePasswordCharacterOptions(e,c),c.isValid&&(c.isValid=(r=c.meetsMinPasswordLength)!==null&&r!==void 0?r:!0),c.isValid&&(c.isValid=(n=c.meetsMaxPasswordLength)!==null&&n!==void 0?n:!0),c.isValid&&(c.isValid=(a=c.containsLowercaseLetter)!==null&&a!==void 0?a:!0),c.isValid&&(c.isValid=(s=c.containsUppercaseLetter)!==null&&s!==void 0?s:!0),c.isValid&&(c.isValid=(o=c.containsNumericCharacter)!==null&&o!==void 0?o:!0),c.isValid&&(c.isValid=(l=c.containsNonAlphanumericCharacter)!==null&&l!==void 0?l:!0),c}validatePasswordLengthOptions(e,r){const n=this.customStrengthOptions.minPasswordLength,a=this.customStrengthOptions.maxPasswordLength;n&&(r.meetsMinPasswordLength=e.length>=n),a&&(r.meetsMaxPasswordLength=e.length<=a)}validatePasswordCharacterOptions(e,r){this.updatePasswordCharacterOptionsStatuses(r,!1,!1,!1,!1);let n;for(let a=0;a<e.length;a++)n=e.charAt(a),this.updatePasswordCharacterOptionsStatuses(r,n>="a"&&n<="z",n>="A"&&n<="Z",n>="0"&&n<="9",this.allowedNonAlphanumericCharacters.includes(n))}updatePasswordCharacterOptionsStatuses(e,r,n,a,s){this.customStrengthOptions.containsLowercaseLetter&&(e.containsLowercaseLetter||(e.containsLowercaseLetter=r)),this.customStrengthOptions.containsUppercaseLetter&&(e.containsUppercaseLetter||(e.containsUppercaseLetter=n)),this.customStrengthOptions.containsNumericCharacter&&(e.containsNumericCharacter||(e.containsNumericCharacter=a)),this.customStrengthOptions.containsNonAlphanumericCharacter&&(e.containsNonAlphanumericCharacter||(e.containsNonAlphanumericCharacter=s))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Gpe{constructor(e,r,n,a){this.app=e,this.heartbeatServiceProvider=r,this.appCheckServiceProvider=n,this.config=a,this.currentUser=null,this.emulatorConfig=null,this.operations=Promise.resolve(),this.authStateSubscription=new t7(this),this.idTokenSubscription=new t7(this),this.beforeStateQueue=new Qpe(this),this.redirectUser=null,this.isProactiveRefreshEnabled=!1,this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION=1,this._canInitEmulator=!0,this._isInitialized=!1,this._deleted=!1,this._initializationPromise=null,this._popupRedirectResolver=null,this._errorFactory=WY,this._agentRecaptchaConfig=null,this._tenantRecaptchaConfigs={},this._projectPasswordPolicy=null,this._tenantPasswordPolicies={},this.lastNotifiedUid=void 0,this.languageCode=null,this.tenantId=null,this.settings={appVerificationDisabledForTesting:!1},this.frameworks=[],this.name=e.name,this.clientVersion=a.sdkClientVersion}_initializeWithPersistence(e,r){return r&&(this._popupRedirectResolver=qh(r)),this._initializationPromise=this.queue(async()=>{var n,a;if(!this._deleted&&(this.persistenceManager=await uv.create(this,e),!this._deleted)){if(!((n=this._popupRedirectResolver)===null||n===void 0)&&n._shouldInitProactively)try{await this._popupRedirectResolver._initialize(this)}catch{}await this.initializeCurrentUser(r),this.lastNotifiedUid=((a=this.currentUser)===null||a===void 0?void 0:a.uid)||null,!this._deleted&&(this._isInitialized=!0)}}),this._initializationPromise}async _onStorageEvent(){if(this._deleted)return;const e=await this.assertedPersistence.getCurrentUser();if(!(!this.currentUser&&!e)){if(this.currentUser&&e&&this.currentUser.uid===e.uid){this._currentUser._assign(e),await this.currentUser.getIdToken();return}await this._updateCurrentUser(e,!0)}}async initializeCurrentUserFromIdToken(e){try{const r=await eJ(this,{idToken:e}),n=await Kh._fromGetAccountInfoResponse(this,r,e);await this.directlySetCurrentUser(n)}catch(r){console.warn("FirebaseServerApp could not login user with provided authIdToken: ",r),await this.directlySetCurrentUser(null)}}async initializeCurrentUser(e){var r;if(zf(this.app)){const o=this.app.settings.authIdToken;return o?new Promise(l=>{setTimeout(()=>this.initializeCurrentUserFromIdToken(o).then(l,l))}):this.directlySetCurrentUser(null)}const n=await this.assertedPersistence.getCurrentUser();let a=n,s=!1;if(e&&this.config.authDomain){await this.getOrInitRedirectPersistenceManager();const o=(r=this.redirectUser)===null||r===void 0?void 0:r._redirectEventId,l=a==null?void 0:a._redirectEventId,c=await this.tryRedirectSignIn(e);(!o||o===l)&&(c!=null&&c.user)&&(a=c.user,s=!0)}if(!a)return this.directlySetCurrentUser(null);if(!a._redirectEventId){if(s)try{await this.beforeStateQueue.runMiddleware(a)}catch(o){a=n,this._popupRedirectResolver._overrideRedirectResult(this,()=>Promise.reject(o))}return a?this.reloadAndSetCurrentUserOrClear(a):this.directlySetCurrentUser(null)}return Rn(this._popupRedirectResolver,this,"argument-error"),await this.getOrInitRedirectPersistenceManager(),this.redirectUser&&this.redirectUser._redirectEventId===a._redirectEventId?this.directlySetCurrentUser(a):this.reloadAndSetCurrentUserOrClear(a)}async tryRedirectSignIn(e){let r=null;try{r=await this._popupRedirectResolver._completeRedirectFn(this,e,!0)}catch{await this._setRedirectUser(null)}return r}async reloadAndSetCurrentUserOrClear(e){try{await eS(e)}catch(r){if((r==null?void 0:r.code)!=="auth/network-request-failed")return this.directlySetCurrentUser(null)}return this.directlySetCurrentUser(e)}useDeviceLanguage(){this.languageCode=Cpe()}async _delete(){this._deleted=!0}async updateCurrentUser(e){if(zf(this.app))return Promise.reject(tA(this));const r=e?di(e):null;return r&&Rn(r.auth.config.apiKey===this.config.apiKey,this,"invalid-user-token"),this._updateCurrentUser(r&&r._clone(this))}async _updateCurrentUser(e,r=!1){if(!this._deleted)return e&&Rn(this.tenantId===e.tenantId,this,"tenant-id-mismatch"),r||await this.beforeStateQueue.runMiddleware(e),this.queue(async()=>{await this.directlySetCurrentUser(e),this.notifyAuthListeners()})}async signOut(){return zf(this.app)?Promise.reject(tA(this)):(await this.beforeStateQueue.runMiddleware(null),(this.redirectPersistenceManager||this._popupRedirectResolver)&&await this._setRedirectUser(null),this._updateCurrentUser(null,!0))}setPersistence(e){return zf(this.app)?Promise.reject(tA(this)):this.queue(async()=>{await this.assertedPersistence.setPersistence(qh(e))})}_getRecaptchaConfig(){return this.tenantId==null?this._agentRecaptchaConfig:this._tenantRecaptchaConfigs[this.tenantId]}async validatePassword(e){this._getPasswordPolicyInternal()||await this._updatePasswordPolicy();const r=this._getPasswordPolicyInternal();return r.schemaVersion!==this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION?Promise.reject(this._errorFactory.create("unsupported-password-policy-schema-version",{})):r.validatePassword(e)}_getPasswordPolicyInternal(){return this.tenantId===null?this._projectPasswordPolicy:this._tenantPasswordPolicies[this.tenantId]}async _updatePasswordPolicy(){const e=await Vpe(this),r=new $pe(e);this.tenantId===null?this._projectPasswordPolicy=r:this._tenantPasswordPolicies[this.tenantId]=r}_getPersistence(){return this.assertedPersistence.persistence.type}_updateErrorMap(e){this._errorFactory=new xw("auth","Firebase",e())}onAuthStateChanged(e,r,n){return this.registerStateListener(this.authStateSubscription,e,r,n)}beforeAuthStateChanged(e,r){return this.beforeStateQueue.pushCallback(e,r)}onIdTokenChanged(e,r,n){return this.registerStateListener(this.idTokenSubscription,e,r,n)}authStateReady(){return new Promise((e,r)=>{if(this.currentUser)e();else{const n=this.onAuthStateChanged(()=>{n(),e()},r)}})}async revokeAccessToken(e){if(this.currentUser){const r=await this.currentUser.getIdToken(),n={providerId:"apple.com",tokenType:"ACCESS_TOKEN",token:e,idToken:r};this.tenantId!=null&&(n.tenantId=this.tenantId),await Mpe(this,n)}}toJSON(){var e;return{apiKey:this.config.apiKey,authDomain:this.config.authDomain,appName:this.name,currentUser:(e=this._currentUser)===null||e===void 0?void 0:e.toJSON()}}async _setRedirectUser(e,r){const n=await this.getOrInitRedirectPersistenceManager(r);return e===null?n.removeCurrentUser():n.setCurrentUser(e)}async getOrInitRedirectPersistenceManager(e){if(!this.redirectPersistenceManager){const r=e&&qh(e)||this._popupRedirectResolver;Rn(r,this,"argument-error"),this.redirectPersistenceManager=await uv.create(this,[qh(r._redirectPersistence)],"redirectUser"),this.redirectUser=await this.redirectPersistenceManager.getCurrentUser()}return this.redirectPersistenceManager}async _redirectUserForId(e){var r,n;return this._isInitialized&&await this.queue(async()=>{}),((r=this._currentUser)===null||r===void 0?void 0:r._redirectEventId)===e?this._currentUser:((n=this.redirectUser)===null||n===void 0?void 0:n._redirectEventId)===e?this.redirectUser:null}async _persistUserIfCurrent(e){if(e===this.currentUser)return this.queue(async()=>this.directlySetCurrentUser(e))}_notifyListenersIfCurrent(e){e===this.currentUser&&this.notifyAuthListeners()}_key(){return`${this.config.authDomain}:${this.config.apiKey}:${this.name}`}_startProactiveRefresh(){this.isProactiveRefreshEnabled=!0,this.currentUser&&this._currentUser._startProactiveRefresh()}_stopProactiveRefresh(){this.isProactiveRefreshEnabled=!1,this.currentUser&&this._currentUser._stopProactiveRefresh()}get _currentUser(){return this.currentUser}notifyAuthListeners(){var e,r;if(!this._isInitialized)return;this.idTokenSubscription.next(this.currentUser);const n=(r=(e=this.currentUser)===null||e===void 0?void 0:e.uid)!==null&&r!==void 0?r:null;this.lastNotifiedUid!==n&&(this.lastNotifiedUid=n,this.authStateSubscription.next(this.currentUser))}registerStateListener(e,r,n,a){if(this._deleted)return()=>{};const s=typeof r=="function"?r:r.next.bind(r);let o=!1;const l=this._isInitialized?Promise.resolve():this._initializationPromise;if(Rn(l,this,"internal-error"),l.then(()=>{o||s(this.currentUser)}),typeof r=="function"){const c=e.addObserver(r,n,a);return()=>{o=!0,c()}}else{const c=e.addObserver(r);return()=>{o=!0,c()}}}async directlySetCurrentUser(e){this.currentUser&&this.currentUser!==e&&this._currentUser._stopProactiveRefresh(),e&&this.isProactiveRefreshEnabled&&e._startProactiveRefresh(),this.currentUser=e,e?await this.assertedPersistence.setCurrentUser(e):await this.assertedPersistence.removeCurrentUser()}queue(e){return this.operations=this.operations.then(e,e),this.operations}get assertedPersistence(){return Rn(this.persistenceManager,this,"internal-error"),this.persistenceManager}_logFramework(e){!e||this.frameworks.includes(e)||(this.frameworks.push(e),this.frameworks.sort(),this.clientVersion=dJ(this.config.clientPlatform,this._getFrameworks()))}_getFrameworks(){return this.frameworks}async _getAdditionalHeaders(){var e;const r={"X-Client-Version":this.clientVersion};this.app.options.appId&&(r["X-Firebase-gmpid"]=this.app.options.appId);const n=await((e=this.heartbeatServiceProvider.getImmediate({optional:!0}))===null||e===void 0?void 0:e.getHeartbeatsHeader());n&&(r["X-Firebase-Client"]=n);const a=await this._getAppCheckToken();return a&&(r["X-Firebase-AppCheck"]=a),r}async _getAppCheckToken(){var e;const r=await((e=this.appCheckServiceProvider.getImmediate({optional:!0}))===null||e===void 0?void 0:e.getToken());return r!=null&&r.error&&bpe(`Error while retrieving App Check token: ${r.error}`),r==null?void 0:r.token}}function Dm(t){return di(t)}class t7{constructor(e){this.auth=e,this.observer=null,this.addObserver=ume(r=>this.observer=r)}get next(){return Rn(this.observer,this.auth,"internal-error"),this.observer.next.bind(this.observer)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let gj={async loadJS(){throw new Error("Unable to load external scripts")},recaptchaV2Script:"",recaptchaEnterpriseScript:"",gapiScript:""};function Kpe(t){gj=t}function fJ(t){return gj.loadJS(t)}function qpe(){return gj.recaptchaEnterpriseScript}function zpe(){return gj.gapiScript}function Wpe(t){return`__${t}${Math.floor(Math.random()*1e6)}`}const Xpe="recaptcha-enterprise",Ype="NO_RECAPTCHA";class Jpe{constructor(e){this.type=Xpe,this.auth=Dm(e)}async verify(e="verify",r=!1){async function n(s){if(!r){if(s.tenantId==null&&s._agentRecaptchaConfig!=null)return s._agentRecaptchaConfig.siteKey;if(s.tenantId!=null&&s._tenantRecaptchaConfigs[s.tenantId]!==void 0)return s._tenantRecaptchaConfigs[s.tenantId].siteKey}return new Promise(async(o,l)=>{Ppe(s,{clientType:"CLIENT_TYPE_WEB",version:"RECAPTCHA_ENTERPRISE"}).then(c=>{if(c.recaptchaKey===void 0)l(new Error("recaptcha Enterprise site key undefined"));else{const u=new jpe(c);return s.tenantId==null?s._agentRecaptchaConfig=u:s._tenantRecaptchaConfigs[s.tenantId]=u,o(u.siteKey)}}).catch(c=>{l(c)})})}function a(s,o,l){const c=window.grecaptcha;XU(c)?c.enterprise.ready(()=>{c.enterprise.execute(s,{action:e}).then(u=>{o(u)}).catch(()=>{o(Ype)})}):l(Error("No reCAPTCHA enterprise script loaded."))}return new Promise((s,o)=>{n(this.auth).then(l=>{if(!r&&XU(window.grecaptcha))a(l,s,o);else{if(typeof window>"u"){o(new Error("RecaptchaVerifier is only supported in browser"));return}let c=qpe();c.length!==0&&(c+=l),fJ(c).then(()=>{a(l,s,o)}).catch(u=>{o(u)})}}).catch(l=>{o(l)})})}}async function r7(t,e,r,n=!1){const a=new Jpe(t);let s;try{s=await a.verify(r)}catch{s=await a.verify(r,!0)}const o=Object.assign({},e);return n?Object.assign(o,{captchaResp:s}):Object.assign(o,{captchaResponse:s}),Object.assign(o,{clientType:"CLIENT_TYPE_WEB"}),Object.assign(o,{recaptchaVersion:"RECAPTCHA_ENTERPRISE"}),o}async function tS(t,e,r,n){var a;if(!((a=t._getRecaptchaConfig())===null||a===void 0)&&a.isProviderEnabled("EMAIL_PASSWORD_PROVIDER")){const s=await r7(t,e,r,r==="getOobCode");return n(t,s)}else return n(t,e).catch(async s=>{if(s.code==="auth/missing-recaptcha-token"){console.log(`${r} is protected by reCAPTCHA Enterprise for this project. Automatically triggering the reCAPTCHA flow and restarting the flow.`);const o=await r7(t,e,r,r==="getOobCode");return n(t,o)}else return Promise.reject(s)})}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Zpe(t,e){const r=ED(t,"auth");if(r.isInitialized()){const a=r.getImmediate(),s=r.getOptions();if(i2(s,e??{}))return a;wf(a,"already-initialized")}return r.initialize({options:e})}function ege(t,e){const r=(e==null?void 0:e.persistence)||[],n=(Array.isArray(r)?r:[r]).map(qh);e!=null&&e.errorMap&&t._updateErrorMap(e.errorMap),t._initializeWithPersistence(n,e==null?void 0:e.popupRedirectResolver)}function tge(t,e,r){const n=Dm(t);Rn(n._canInitEmulator,n,"emulator-config-failed"),Rn(/^https?:\/\//.test(e),n,"invalid-emulator-scheme");const a=!1,s=hJ(e),{host:o,port:l}=rge(e),c=l===null?"":`:${l}`;n.config.emulator={url:`${s}//${o}${c}/`},n.settings.appVerificationDisabledForTesting=!0,n.emulatorConfig=Object.freeze({host:o,port:l,protocol:s.replace(":",""),options:Object.freeze({disableWarnings:a})}),nge()}function hJ(t){const e=t.indexOf(":");return e<0?"":t.substr(0,e+1)}function rge(t){const e=hJ(t),r=/(\/\/)?([^?#/]+)/.exec(t.substr(e.length));if(!r)return{host:"",port:null};const n=r[2].split("@").pop()||"",a=/^(\[[^\]]+\])(:|$)/.exec(n);if(a){const s=a[1];return{host:s,port:n7(n.substr(s.length+1))}}else{const[s,o]=n.split(":");return{host:s,port:n7(o)}}}function n7(t){if(!t)return null;const e=Number(t);return isNaN(e)?null:e}function nge(){function t(){const e=document.createElement("p"),r=e.style;e.innerText="Running in emulator mode. Do not use with production credentials.",r.position="fixed",r.width="100%",r.backgroundColor="#ffffff",r.border=".1em solid #000000",r.color="#b50000",r.bottom="0px",r.left="0px",r.margin="0px",r.zIndex="10000",r.textAlign="center",e.classList.add("firebase-emulator-warning"),document.body.appendChild(e)}typeof console<"u"&&typeof console.info=="function"&&console.info("WARNING: You are using the Auth Emulator, which is intended for local testing only.  Do not use with production credentials."),typeof window<"u"&&typeof document<"u"&&(document.readyState==="loading"?window.addEventListener("DOMContentLoaded",t):t())}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class FD{constructor(e,r){this.providerId=e,this.signInMethod=r}toJSON(){return Gh("not implemented")}_getIdTokenResponse(e){return Gh("not implemented")}_linkToIdToken(e,r){return Gh("not implemented")}_getReauthenticationResolver(e){return Gh("not implemented")}}async function age(t,e){return kA(t,"POST","/v1/accounts:signUp",e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function sge(t,e){return bw(t,"POST","/v1/accounts:signInWithPassword",TA(t,e))}async function ige(t,e){return kA(t,"POST","/v1/accounts:sendOobCode",TA(t,e))}async function oge(t,e){return ige(t,e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function lge(t,e){return bw(t,"POST","/v1/accounts:signInWithEmailLink",TA(t,e))}async function cge(t,e){return bw(t,"POST","/v1/accounts:signInWithEmailLink",TA(t,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class c2 extends FD{constructor(e,r,n,a=null){super("password",n),this._email=e,this._password=r,this._tenantId=a}static _fromEmailAndPassword(e,r){return new c2(e,r,"password")}static _fromEmailAndCode(e,r,n=null){return new c2(e,r,"emailLink",n)}toJSON(){return{email:this._email,password:this._password,signInMethod:this.signInMethod,tenantId:this._tenantId}}static fromJSON(e){const r=typeof e=="string"?JSON.parse(e):e;if(r!=null&&r.email&&(r!=null&&r.password)){if(r.signInMethod==="password")return this._fromEmailAndPassword(r.email,r.password);if(r.signInMethod==="emailLink")return this._fromEmailAndCode(r.email,r.password,r.tenantId)}return null}async _getIdTokenResponse(e){switch(this.signInMethod){case"password":const r={returnSecureToken:!0,email:this._email,password:this._password,clientType:"CLIENT_TYPE_WEB"};return tS(e,r,"signInWithPassword",sge);case"emailLink":return lge(e,{email:this._email,oobCode:this._password});default:wf(e,"internal-error")}}async _linkToIdToken(e,r){switch(this.signInMethod){case"password":const n={idToken:r,returnSecureToken:!0,email:this._email,password:this._password,clientType:"CLIENT_TYPE_WEB"};return tS(e,n,"signUpPassword",age);case"emailLink":return cge(e,{idToken:r,email:this._email,oobCode:this._password});default:wf(e,"internal-error")}}_getReauthenticationResolver(e){return this._getIdTokenResponse(e)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function dv(t,e){return bw(t,"POST","/v1/accounts:signInWithIdp",TA(t,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const uge="http://localhost";class eg extends FD{constructor(){super(...arguments),this.pendingToken=null}static _fromParams(e){const r=new eg(e.providerId,e.signInMethod);return e.idToken||e.accessToken?(e.idToken&&(r.idToken=e.idToken),e.accessToken&&(r.accessToken=e.accessToken),e.nonce&&!e.pendingToken&&(r.nonce=e.nonce),e.pendingToken&&(r.pendingToken=e.pendingToken)):e.oauthToken&&e.oauthTokenSecret?(r.accessToken=e.oauthToken,r.secret=e.oauthTokenSecret):wf("argument-error"),r}toJSON(){return{idToken:this.idToken,accessToken:this.accessToken,secret:this.secret,nonce:this.nonce,pendingToken:this.pendingToken,providerId:this.providerId,signInMethod:this.signInMethod}}static fromJSON(e){const r=typeof e=="string"?JSON.parse(e):e,{providerId:n,signInMethod:a}=r,s=jD(r,["providerId","signInMethod"]);if(!n||!a)return null;const o=new eg(n,a);return o.idToken=s.idToken||void 0,o.accessToken=s.accessToken||void 0,o.secret=s.secret,o.nonce=s.nonce,o.pendingToken=s.pendingToken||null,o}_getIdTokenResponse(e){const r=this.buildRequest();return dv(e,r)}_linkToIdToken(e,r){const n=this.buildRequest();return n.idToken=r,dv(e,n)}_getReauthenticationResolver(e){const r=this.buildRequest();return r.autoCreate=!1,dv(e,r)}buildRequest(){const e={requestUri:uge,returnSecureToken:!0};if(this.pendingToken)e.pendingToken=this.pendingToken;else{const r={};this.idToken&&(r.id_token=this.idToken),this.accessToken&&(r.access_token=this.accessToken),this.secret&&(r.oauth_token_secret=this.secret),r.providerId=this.providerId,this.nonce&&!this.pendingToken&&(r.nonce=this.nonce),e.postBody=vw(r)}return e}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function dge(t){switch(t){case"recoverEmail":return"RECOVER_EMAIL";case"resetPassword":return"PASSWORD_RESET";case"signIn":return"EMAIL_SIGNIN";case"verifyEmail":return"VERIFY_EMAIL";case"verifyAndChangeEmail":return"VERIFY_AND_CHANGE_EMAIL";case"revertSecondFactorAddition":return"REVERT_SECOND_FACTOR_ADDITION";default:return null}}function fge(t){const e=Oy(Dy(t)).link,r=e?Oy(Dy(e)).deep_link_id:null,n=Oy(Dy(t)).deep_link_id;return(n?Oy(Dy(n)).link:null)||n||r||e||t}class OD{constructor(e){var r,n,a,s,o,l;const c=Oy(Dy(e)),u=(r=c.apiKey)!==null&&r!==void 0?r:null,d=(n=c.oobCode)!==null&&n!==void 0?n:null,f=dge((a=c.mode)!==null&&a!==void 0?a:null);Rn(u&&d&&f,"argument-error"),this.apiKey=u,this.operation=f,this.code=d,this.continueUrl=(s=c.continueUrl)!==null&&s!==void 0?s:null,this.languageCode=(o=c.languageCode)!==null&&o!==void 0?o:null,this.tenantId=(l=c.tenantId)!==null&&l!==void 0?l:null}static parseLink(e){const r=fge(e);try{return new OD(r)}catch{return null}}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class i1{constructor(){this.providerId=i1.PROVIDER_ID}static credential(e,r){return c2._fromEmailAndPassword(e,r)}static credentialWithLink(e,r){const n=OD.parseLink(r);return Rn(n,"argument-error"),c2._fromEmailAndCode(e,n.code,n.tenantId)}}i1.PROVIDER_ID="password";i1.EMAIL_PASSWORD_SIGN_IN_METHOD="password";i1.EMAIL_LINK_SIGN_IN_METHOD="emailLink";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class AJ{constructor(e){this.providerId=e,this.defaultLanguageCode=null,this.customParameters={}}setDefaultLanguage(e){this.defaultLanguageCode=e}setCustomParameters(e){return this.customParameters=e,this}getCustomParameters(){return this.customParameters}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ww extends AJ{constructor(){super(...arguments),this.scopes=[]}addScope(e){return this.scopes.includes(e)||this.scopes.push(e),this}getScopes(){return[...this.scopes]}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class T0 extends ww{constructor(){super("facebook.com")}static credential(e){return eg._fromParams({providerId:T0.PROVIDER_ID,signInMethod:T0.FACEBOOK_SIGN_IN_METHOD,accessToken:e})}static credentialFromResult(e){return T0.credentialFromTaggedObject(e)}static credentialFromError(e){return T0.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e||!("oauthAccessToken"in e)||!e.oauthAccessToken)return null;try{return T0.credential(e.oauthAccessToken)}catch{return null}}}T0.FACEBOOK_SIGN_IN_METHOD="facebook.com";T0.PROVIDER_ID="facebook.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class k0 extends ww{constructor(){super("google.com"),this.addScope("profile")}static credential(e,r){return eg._fromParams({providerId:k0.PROVIDER_ID,signInMethod:k0.GOOGLE_SIGN_IN_METHOD,idToken:e,accessToken:r})}static credentialFromResult(e){return k0.credentialFromTaggedObject(e)}static credentialFromError(e){return k0.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e)return null;const{oauthIdToken:r,oauthAccessToken:n}=e;if(!r&&!n)return null;try{return k0.credential(r,n)}catch{return null}}}k0.GOOGLE_SIGN_IN_METHOD="google.com";k0.PROVIDER_ID="google.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class F0 extends ww{constructor(){super("github.com")}static credential(e){return eg._fromParams({providerId:F0.PROVIDER_ID,signInMethod:F0.GITHUB_SIGN_IN_METHOD,accessToken:e})}static credentialFromResult(e){return F0.credentialFromTaggedObject(e)}static credentialFromError(e){return F0.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e||!("oauthAccessToken"in e)||!e.oauthAccessToken)return null;try{return F0.credential(e.oauthAccessToken)}catch{return null}}}F0.GITHUB_SIGN_IN_METHOD="github.com";F0.PROVIDER_ID="github.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class O0 extends ww{constructor(){super("twitter.com")}static credential(e,r){return eg._fromParams({providerId:O0.PROVIDER_ID,signInMethod:O0.TWITTER_SIGN_IN_METHOD,oauthToken:e,oauthTokenSecret:r})}static credentialFromResult(e){return O0.credentialFromTaggedObject(e)}static credentialFromError(e){return O0.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e)return null;const{oauthAccessToken:r,oauthTokenSecret:n}=e;if(!r||!n)return null;try{return O0.credential(r,n)}catch{return null}}}O0.TWITTER_SIGN_IN_METHOD="twitter.com";O0.PROVIDER_ID="twitter.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function hge(t,e){return bw(t,"POST","/v1/accounts:signUp",TA(t,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class tg{constructor(e){this.user=e.user,this.providerId=e.providerId,this._tokenResponse=e._tokenResponse,this.operationType=e.operationType}static async _fromIdTokenResponse(e,r,n,a=!1){const s=await Kh._fromIdTokenResponse(e,n,a),o=a7(n);return new tg({user:s,providerId:o,_tokenResponse:n,operationType:r})}static async _forOperation(e,r,n){await e._updateTokensIfNecessary(n,!0);const a=a7(n);return new tg({user:e,providerId:a,_tokenResponse:n,operationType:r})}}function a7(t){return t.providerId?t.providerId:"phoneNumber"in t?"phone":null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class rS extends BA{constructor(e,r,n,a){var s;super(r.code,r.message),this.operationType=n,this.user=a,Object.setPrototypeOf(this,rS.prototype),this.customData={appName:e.name,tenantId:(s=e.tenantId)!==null&&s!==void 0?s:void 0,_serverResponse:r.customData._serverResponse,operationType:n}}static _fromErrorAndOperation(e,r,n,a){return new rS(e,r,n,a)}}function mJ(t,e,r,n){return(e==="reauthenticate"?r._getReauthenticationResolver(t):r._getIdTokenResponse(t)).catch(s=>{throw s.code==="auth/multi-factor-auth-required"?rS._fromErrorAndOperation(t,s,e,n):s})}async function Age(t,e,r=!1){const n=await l2(t,e._linkToIdToken(t.auth,await t.getIdToken()),r);return tg._forOperation(t,"link",n)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function mge(t,e,r=!1){const{auth:n}=t;if(zf(n.app))return Promise.reject(tA(n));const a="reauthenticate";try{const s=await l2(t,mJ(n,a,e,t),r);Rn(s.idToken,n,"internal-error");const o=TD(s.idToken);Rn(o,n,"internal-error");const{sub:l}=o;return Rn(t.uid===l,n,"user-mismatch"),tg._forOperation(t,a,s)}catch(s){throw(s==null?void 0:s.code)==="auth/user-not-found"&&wf(n,"user-mismatch"),s}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function pJ(t,e,r=!1){if(zf(t.app))return Promise.reject(tA(t));const n="signIn",a=await mJ(t,n,e),s=await tg._fromIdTokenResponse(t,n,a);return r||await t._updateCurrentUser(s.user),s}async function pge(t,e){return pJ(Dm(t),e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function gJ(t){const e=Dm(t);e._getPasswordPolicyInternal()&&await e._updatePasswordPolicy()}async function gge(t,e,r){const n=Dm(t);await tS(n,{requestType:"PASSWORD_RESET",email:e,clientType:"CLIENT_TYPE_WEB"},"getOobCode",oge)}async function xge(t,e,r){if(zf(t.app))return Promise.reject(tA(t));const n=Dm(t),o=await tS(n,{returnSecureToken:!0,email:e,password:r,clientType:"CLIENT_TYPE_WEB"},"signUpPassword",hge).catch(c=>{throw c.code==="auth/password-does-not-meet-requirements"&&gJ(t),c}),l=await tg._fromIdTokenResponse(n,"signIn",o);return await n._updateCurrentUser(l.user),l}function vge(t,e,r){return zf(t.app)?Promise.reject(tA(t)):pge(di(t),i1.credential(e,r)).catch(async n=>{throw n.code==="auth/password-does-not-meet-requirements"&&gJ(t),n})}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function eE(t,e){return di(t).setPersistence(e)}function yge(t,e,r,n){return di(t).onIdTokenChanged(e,r,n)}function bge(t,e,r){return di(t).beforeAuthStateChanged(e,r)}function xj(t,e,r,n){return di(t).onAuthStateChanged(e,r,n)}function DD(t){return di(t).signOut()}const nS="__sak";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class xJ{constructor(e,r){this.storageRetriever=e,this.type=r}_isAvailable(){try{return this.storage?(this.storage.setItem(nS,"1"),this.storage.removeItem(nS),Promise.resolve(!0)):Promise.resolve(!1)}catch{return Promise.resolve(!1)}}_set(e,r){return this.storage.setItem(e,JSON.stringify(r)),Promise.resolve()}_get(e){const r=this.storage.getItem(e);return Promise.resolve(r?JSON.parse(r):null)}_remove(e){return this.storage.removeItem(e),Promise.resolve()}get storage(){return this.storageRetriever()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const wge=1e3,Nge=10;class vJ extends xJ{constructor(){super(()=>window.localStorage,"LOCAL"),this.boundEventHandler=(e,r)=>this.onStorageEvent(e,r),this.listeners={},this.localCache={},this.pollTimer=null,this.fallbackToPolling=uJ(),this._shouldAllowMigration=!0}forAllChangedKeys(e){for(const r of Object.keys(this.listeners)){const n=this.storage.getItem(r),a=this.localCache[r];n!==a&&e(r,a,n)}}onStorageEvent(e,r=!1){if(!e.key){this.forAllChangedKeys((o,l,c)=>{this.notifyListeners(o,c)});return}const n=e.key;r?this.detachListener():this.stopPolling();const a=()=>{const o=this.storage.getItem(n);!r&&this.localCache[n]===o||this.notifyListeners(n,o)},s=this.storage.getItem(n);Upe()&&s!==e.newValue&&e.newValue!==e.oldValue?setTimeout(a,Nge):a()}notifyListeners(e,r){this.localCache[e]=r;const n=this.listeners[e];if(n)for(const a of Array.from(n))a(r&&JSON.parse(r))}startPolling(){this.stopPolling(),this.pollTimer=setInterval(()=>{this.forAllChangedKeys((e,r,n)=>{this.onStorageEvent(new StorageEvent("storage",{key:e,oldValue:r,newValue:n}),!0)})},wge)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}attachListener(){window.addEventListener("storage",this.boundEventHandler)}detachListener(){window.removeEventListener("storage",this.boundEventHandler)}_addListener(e,r){Object.keys(this.listeners).length===0&&(this.fallbackToPolling?this.startPolling():this.attachListener()),this.listeners[e]||(this.listeners[e]=new Set,this.localCache[e]=this.storage.getItem(e)),this.listeners[e].add(r)}_removeListener(e,r){this.listeners[e]&&(this.listeners[e].delete(r),this.listeners[e].size===0&&delete this.listeners[e]),Object.keys(this.listeners).length===0&&(this.detachListener(),this.stopPolling())}async _set(e,r){await super._set(e,r),this.localCache[e]=JSON.stringify(r)}async _get(e){const r=await super._get(e);return this.localCache[e]=JSON.stringify(r),r}async _remove(e){await super._remove(e),delete this.localCache[e]}}vJ.type="LOCAL";const RD=vJ;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class yJ extends xJ{constructor(){super(()=>window.sessionStorage,"SESSION")}_addListener(e,r){}_removeListener(e,r){}}yJ.type="SESSION";const MD=yJ;/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Cge(t){return Promise.all(t.map(async e=>{try{return{fulfilled:!0,value:await e}}catch(r){return{fulfilled:!1,reason:r}}}))}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class vj{constructor(e){this.eventTarget=e,this.handlersMap={},this.boundEventHandler=this.handleEvent.bind(this)}static _getInstance(e){const r=this.receivers.find(a=>a.isListeningto(e));if(r)return r;const n=new vj(e);return this.receivers.push(n),n}isListeningto(e){return this.eventTarget===e}async handleEvent(e){const r=e,{eventId:n,eventType:a,data:s}=r.data,o=this.handlersMap[a];if(!(o!=null&&o.size))return;r.ports[0].postMessage({status:"ack",eventId:n,eventType:a});const l=Array.from(o).map(async u=>u(r.origin,s)),c=await Cge(l);r.ports[0].postMessage({status:"done",eventId:n,eventType:a,response:c})}_subscribe(e,r){Object.keys(this.handlersMap).length===0&&this.eventTarget.addEventListener("message",this.boundEventHandler),this.handlersMap[e]||(this.handlersMap[e]=new Set),this.handlersMap[e].add(r)}_unsubscribe(e,r){this.handlersMap[e]&&r&&this.handlersMap[e].delete(r),(!r||this.handlersMap[e].size===0)&&delete this.handlersMap[e],Object.keys(this.handlersMap).length===0&&this.eventTarget.removeEventListener("message",this.boundEventHandler)}}vj.receivers=[];/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function LD(t="",e=10){let r="";for(let n=0;n<e;n++)r+=Math.floor(Math.random()*10);return t+r}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class _ge{constructor(e){this.target=e,this.handlers=new Set}removeMessageHandler(e){e.messageChannel&&(e.messageChannel.port1.removeEventListener("message",e.onMessage),e.messageChannel.port1.close()),this.handlers.delete(e)}async _send(e,r,n=50){const a=typeof MessageChannel<"u"?new MessageChannel:null;if(!a)throw new Error("connection_unavailable");let s,o;return new Promise((l,c)=>{const u=LD("",20);a.port1.start();const d=setTimeout(()=>{c(new Error("unsupported_event"))},n);o={messageChannel:a,onMessage(f){const A=f;if(A.data.eventId===u)switch(A.data.status){case"ack":clearTimeout(d),s=setTimeout(()=>{c(new Error("timeout"))},3e3);break;case"done":clearTimeout(s),l(A.data.response);break;default:clearTimeout(d),clearTimeout(s),c(new Error("invalid_response"));break}}},this.handlers.add(o),a.port1.addEventListener("message",o.onMessage),this.target.postMessage({eventType:e,eventId:u,data:r},[a.port2])}).finally(()=>{o&&this.removeMessageHandler(o)})}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ah(){return window}function Ege(t){ah().location.href=t}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function bJ(){return typeof ah().WorkerGlobalScope<"u"&&typeof ah().importScripts=="function"}async function Sge(){if(!(navigator!=null&&navigator.serviceWorker))return null;try{return(await navigator.serviceWorker.ready).active}catch{return null}}function Ige(){var t;return((t=navigator==null?void 0:navigator.serviceWorker)===null||t===void 0?void 0:t.controller)||null}function jge(){return bJ()?self:null}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const wJ="firebaseLocalStorageDb",Pge=1,aS="firebaseLocalStorage",NJ="fbase_key";class Nw{constructor(e){this.request=e}toPromise(){return new Promise((e,r)=>{this.request.addEventListener("success",()=>{e(this.request.result)}),this.request.addEventListener("error",()=>{r(this.request.error)})})}}function yj(t,e){return t.transaction([aS],e?"readwrite":"readonly").objectStore(aS)}function Bge(){const t=indexedDB.deleteDatabase(wJ);return new Nw(t).toPromise()}function UT(){const t=indexedDB.open(wJ,Pge);return new Promise((e,r)=>{t.addEventListener("error",()=>{r(t.error)}),t.addEventListener("upgradeneeded",()=>{const n=t.result;try{n.createObjectStore(aS,{keyPath:NJ})}catch(a){r(a)}}),t.addEventListener("success",async()=>{const n=t.result;n.objectStoreNames.contains(aS)?e(n):(n.close(),await Bge(),e(await UT()))})})}async function s7(t,e,r){const n=yj(t,!0).put({[NJ]:e,value:r});return new Nw(n).toPromise()}async function Tge(t,e){const r=yj(t,!1).get(e),n=await new Nw(r).toPromise();return n===void 0?null:n.value}function i7(t,e){const r=yj(t,!0).delete(e);return new Nw(r).toPromise()}const kge=800,Fge=3;class CJ{constructor(){this.type="LOCAL",this._shouldAllowMigration=!0,this.listeners={},this.localCache={},this.pollTimer=null,this.pendingWrites=0,this.receiver=null,this.sender=null,this.serviceWorkerReceiverAvailable=!1,this.activeServiceWorker=null,this._workerInitializationPromise=this.initializeServiceWorkerMessaging().then(()=>{},()=>{})}async _openDb(){return this.db?this.db:(this.db=await UT(),this.db)}async _withRetries(e){let r=0;for(;;)try{const n=await this._openDb();return await e(n)}catch(n){if(r++>Fge)throw n;this.db&&(this.db.close(),this.db=void 0)}}async initializeServiceWorkerMessaging(){return bJ()?this.initializeReceiver():this.initializeSender()}async initializeReceiver(){this.receiver=vj._getInstance(jge()),this.receiver._subscribe("keyChanged",async(e,r)=>({keyProcessed:(await this._poll()).includes(r.key)})),this.receiver._subscribe("ping",async(e,r)=>["keyChanged"])}async initializeSender(){var e,r;if(this.activeServiceWorker=await Sge(),!this.activeServiceWorker)return;this.sender=new _ge(this.activeServiceWorker);const n=await this.sender._send("ping",{},800);n&&!((e=n[0])===null||e===void 0)&&e.fulfilled&&!((r=n[0])===null||r===void 0)&&r.value.includes("keyChanged")&&(this.serviceWorkerReceiverAvailable=!0)}async notifyServiceWorker(e){if(!(!this.sender||!this.activeServiceWorker||Ige()!==this.activeServiceWorker))try{await this.sender._send("keyChanged",{key:e},this.serviceWorkerReceiverAvailable?800:50)}catch{}}async _isAvailable(){try{if(!indexedDB)return!1;const e=await UT();return await s7(e,nS,"1"),await i7(e,nS),!0}catch{}return!1}async _withPendingWrite(e){this.pendingWrites++;try{await e()}finally{this.pendingWrites--}}async _set(e,r){return this._withPendingWrite(async()=>(await this._withRetries(n=>s7(n,e,r)),this.localCache[e]=r,this.notifyServiceWorker(e)))}async _get(e){const r=await this._withRetries(n=>Tge(n,e));return this.localCache[e]=r,r}async _remove(e){return this._withPendingWrite(async()=>(await this._withRetries(r=>i7(r,e)),delete this.localCache[e],this.notifyServiceWorker(e)))}async _poll(){const e=await this._withRetries(a=>{const s=yj(a,!1).getAll();return new Nw(s).toPromise()});if(!e)return[];if(this.pendingWrites!==0)return[];const r=[],n=new Set;if(e.length!==0)for(const{fbase_key:a,value:s}of e)n.add(a),JSON.stringify(this.localCache[a])!==JSON.stringify(s)&&(this.notifyListeners(a,s),r.push(a));for(const a of Object.keys(this.localCache))this.localCache[a]&&!n.has(a)&&(this.notifyListeners(a,null),r.push(a));return r}notifyListeners(e,r){this.localCache[e]=r;const n=this.listeners[e];if(n)for(const a of Array.from(n))a(r)}startPolling(){this.stopPolling(),this.pollTimer=setInterval(async()=>this._poll(),kge)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}_addListener(e,r){Object.keys(this.listeners).length===0&&this.startPolling(),this.listeners[e]||(this.listeners[e]=new Set,this._get(e)),this.listeners[e].add(r)}_removeListener(e,r){this.listeners[e]&&(this.listeners[e].delete(r),this.listeners[e].size===0&&delete this.listeners[e]),Object.keys(this.listeners).length===0&&this.stopPolling()}}CJ.type="LOCAL";const _J=CJ;new yw(3e4,6e4);/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Oge(t,e){return e?qh(e):(Rn(t._popupRedirectResolver,t,"argument-error"),t._popupRedirectResolver)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class UD extends FD{constructor(e){super("custom","custom"),this.params=e}_getIdTokenResponse(e){return dv(e,this._buildIdpRequest())}_linkToIdToken(e,r){return dv(e,this._buildIdpRequest(r))}_getReauthenticationResolver(e){return dv(e,this._buildIdpRequest())}_buildIdpRequest(e){const r={requestUri:this.params.requestUri,sessionId:this.params.sessionId,postBody:this.params.postBody,tenantId:this.params.tenantId,pendingToken:this.params.pendingToken,returnSecureToken:!0,returnIdpCredential:!0};return e&&(r.idToken=e),r}}function Dge(t){return pJ(t.auth,new UD(t),t.bypassAuthState)}function Rge(t){const{auth:e,user:r}=t;return Rn(r,e,"internal-error"),mge(r,new UD(t),t.bypassAuthState)}async function Mge(t){const{auth:e,user:r}=t;return Rn(r,e,"internal-error"),Age(r,new UD(t),t.bypassAuthState)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class EJ{constructor(e,r,n,a,s=!1){this.auth=e,this.resolver=n,this.user=a,this.bypassAuthState=s,this.pendingPromise=null,this.eventManager=null,this.filter=Array.isArray(r)?r:[r]}execute(){return new Promise(async(e,r)=>{this.pendingPromise={resolve:e,reject:r};try{this.eventManager=await this.resolver._initialize(this.auth),await this.onExecution(),this.eventManager.registerConsumer(this)}catch(n){this.reject(n)}})}async onAuthEvent(e){const{urlResponse:r,sessionId:n,postBody:a,tenantId:s,error:o,type:l}=e;if(o){this.reject(o);return}const c={auth:this.auth,requestUri:r,sessionId:n,tenantId:s||void 0,postBody:a||void 0,user:this.user,bypassAuthState:this.bypassAuthState};try{this.resolve(await this.getIdpTask(l)(c))}catch(u){this.reject(u)}}onError(e){this.reject(e)}getIdpTask(e){switch(e){case"signInViaPopup":case"signInViaRedirect":return Dge;case"linkViaPopup":case"linkViaRedirect":return Mge;case"reauthViaPopup":case"reauthViaRedirect":return Rge;default:wf(this.auth,"internal-error")}}resolve(e){pA(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.resolve(e),this.unregisterAndCleanUp()}reject(e){pA(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.reject(e),this.unregisterAndCleanUp()}unregisterAndCleanUp(){this.eventManager&&this.eventManager.unregisterConsumer(this),this.pendingPromise=null,this.cleanUp()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Lge=new yw(2e3,1e4);class qx extends EJ{constructor(e,r,n,a,s){super(e,r,a,s),this.provider=n,this.authWindow=null,this.pollId=null,qx.currentPopupAction&&qx.currentPopupAction.cancel(),qx.currentPopupAction=this}async executeNotNull(){const e=await this.execute();return Rn(e,this.auth,"internal-error"),e}async onExecution(){pA(this.filter.length===1,"Popup operations only handle one event");const e=LD();this.authWindow=await this.resolver._openPopup(this.auth,this.provider,this.filter[0],e),this.authWindow.associatedEvent=e,this.resolver._originValidation(this.auth).catch(r=>{this.reject(r)}),this.resolver._isIframeWebStorageSupported(this.auth,r=>{r||this.reject(nh(this.auth,"web-storage-unsupported"))}),this.pollUserCancellation()}get eventId(){var e;return((e=this.authWindow)===null||e===void 0?void 0:e.associatedEvent)||null}cancel(){this.reject(nh(this.auth,"cancelled-popup-request"))}cleanUp(){this.authWindow&&this.authWindow.close(),this.pollId&&window.clearTimeout(this.pollId),this.authWindow=null,this.pollId=null,qx.currentPopupAction=null}pollUserCancellation(){const e=()=>{var r,n;if(!((n=(r=this.authWindow)===null||r===void 0?void 0:r.window)===null||n===void 0)&&n.closed){this.pollId=window.setTimeout(()=>{this.pollId=null,this.reject(nh(this.auth,"popup-closed-by-user"))},8e3);return}this.pollId=window.setTimeout(e,Lge.get())};e()}}qx.currentPopupAction=null;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Uge="pendingRedirect",tE=new Map;class Qge extends EJ{constructor(e,r,n=!1){super(e,["signInViaRedirect","linkViaRedirect","reauthViaRedirect","unknown"],r,void 0,n),this.eventId=null}async execute(){let e=tE.get(this.auth._key());if(!e){try{const n=await Vge(this.resolver,this.auth)?await super.execute():null;e=()=>Promise.resolve(n)}catch(r){e=()=>Promise.reject(r)}tE.set(this.auth._key(),e)}return this.bypassAuthState||tE.set(this.auth._key(),()=>Promise.resolve(null)),e()}async onAuthEvent(e){if(e.type==="signInViaRedirect")return super.onAuthEvent(e);if(e.type==="unknown"){this.resolve(null);return}if(e.eventId){const r=await this.auth._redirectUserForId(e.eventId);if(r)return this.user=r,super.onAuthEvent(e);this.resolve(null)}}async onExecution(){}cleanUp(){}}async function Vge(t,e){const r=Gge(e),n=$ge(t);if(!await n._isAvailable())return!1;const a=await n._get(r)==="true";return await n._remove(r),a}function Hge(t,e){tE.set(t._key(),e)}function $ge(t){return qh(t._redirectPersistence)}function Gge(t){return Z_(Uge,t.config.apiKey,t.name)}async function Kge(t,e,r=!1){if(zf(t.app))return Promise.reject(tA(t));const n=Dm(t),a=Oge(n,e),o=await new Qge(n,a,r).execute();return o&&!r&&(delete o.user._redirectEventId,await n._persistUserIfCurrent(o.user),await n._setRedirectUser(null,e)),o}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const qge=10*60*1e3;class zge{constructor(e){this.auth=e,this.cachedEventUids=new Set,this.consumers=new Set,this.queuedRedirectEvent=null,this.hasHandledPotentialRedirect=!1,this.lastProcessedEventTime=Date.now()}registerConsumer(e){this.consumers.add(e),this.queuedRedirectEvent&&this.isEventForConsumer(this.queuedRedirectEvent,e)&&(this.sendToConsumer(this.queuedRedirectEvent,e),this.saveEventToCache(this.queuedRedirectEvent),this.queuedRedirectEvent=null)}unregisterConsumer(e){this.consumers.delete(e)}onEvent(e){if(this.hasEventBeenHandled(e))return!1;let r=!1;return this.consumers.forEach(n=>{this.isEventForConsumer(e,n)&&(r=!0,this.sendToConsumer(e,n),this.saveEventToCache(e))}),this.hasHandledPotentialRedirect||!Wge(e)||(this.hasHandledPotentialRedirect=!0,r||(this.queuedRedirectEvent=e,r=!0)),r}sendToConsumer(e,r){var n;if(e.error&&!SJ(e)){const a=((n=e.error.code)===null||n===void 0?void 0:n.split("auth/")[1])||"internal-error";r.onError(nh(this.auth,a))}else r.onAuthEvent(e)}isEventForConsumer(e,r){const n=r.eventId===null||!!e.eventId&&e.eventId===r.eventId;return r.filter.includes(e.type)&&n}hasEventBeenHandled(e){return Date.now()-this.lastProcessedEventTime>=qge&&this.cachedEventUids.clear(),this.cachedEventUids.has(o7(e))}saveEventToCache(e){this.cachedEventUids.add(o7(e)),this.lastProcessedEventTime=Date.now()}}function o7(t){return[t.type,t.eventId,t.sessionId,t.tenantId].filter(e=>e).join("-")}function SJ({type:t,error:e}){return t==="unknown"&&(e==null?void 0:e.code)==="auth/no-auth-event"}function Wge(t){switch(t.type){case"signInViaRedirect":case"linkViaRedirect":case"reauthViaRedirect":return!0;case"unknown":return SJ(t);default:return!1}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Xge(t,e={}){return kA(t,"GET","/v1/projects",e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Yge=/^\d{1,3}\.\d{1,3}\.\d{1,3}\.\d{1,3}$/,Jge=/^https?/;async function Zge(t){if(t.config.emulator)return;const{authorizedDomains:e}=await Xge(t);for(const r of e)try{if(exe(r))return}catch{}wf(t,"unauthorized-domain")}function exe(t){const e=MT(),{protocol:r,hostname:n}=new URL(e);if(t.startsWith("chrome-extension://")){const o=new URL(t);return o.hostname===""&&n===""?r==="chrome-extension:"&&t.replace("chrome-extension://","")===e.replace("chrome-extension://",""):r==="chrome-extension:"&&o.hostname===n}if(!Jge.test(r))return!1;if(Yge.test(t))return n===t;const a=t.replace(/\./g,"\\.");return new RegExp("^(.+\\."+a+"|"+a+")$","i").test(n)}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const txe=new yw(3e4,6e4);function l7(){const t=ah().___jsl;if(t!=null&&t.H){for(const e of Object.keys(t.H))if(t.H[e].r=t.H[e].r||[],t.H[e].L=t.H[e].L||[],t.H[e].r=[...t.H[e].L],t.CP)for(let r=0;r<t.CP.length;r++)t.CP[r]=null}}function rxe(t){return new Promise((e,r)=>{var n,a,s;function o(){l7(),gapi.load("gapi.iframes",{callback:()=>{e(gapi.iframes.getContext())},ontimeout:()=>{l7(),r(nh(t,"network-request-failed"))},timeout:txe.get()})}if(!((a=(n=ah().gapi)===null||n===void 0?void 0:n.iframes)===null||a===void 0)&&a.Iframe)e(gapi.iframes.getContext());else if(!((s=ah().gapi)===null||s===void 0)&&s.load)o();else{const l=Wpe("iframefcb");return ah()[l]=()=>{gapi.load?o():r(nh(t,"network-request-failed"))},fJ(`${zpe()}?onload=${l}`).catch(c=>r(c))}}).catch(e=>{throw rE=null,e})}let rE=null;function nxe(t){return rE=rE||rxe(t),rE}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const axe=new yw(5e3,15e3),sxe="__/auth/iframe",ixe="emulator/auth/iframe",oxe={style:{position:"absolute",top:"-100px",width:"1px",height:"1px"},"aria-hidden":"true",tabindex:"-1"},lxe=new Map([["identitytoolkit.googleapis.com","p"],["staging-identitytoolkit.sandbox.googleapis.com","s"],["test-identitytoolkit.sandbox.googleapis.com","t"]]);function cxe(t){const e=t.config;Rn(e.authDomain,t,"auth-domain-config-required");const r=e.emulator?BD(e,ixe):`https://${t.config.authDomain}/${sxe}`,n={apiKey:e.apiKey,appName:t.name,v:s1},a=lxe.get(t.config.apiHost);a&&(n.eid=a);const s=t._getFrameworks();return s.length&&(n.fw=s.join(",")),`${r}?${vw(n).slice(1)}`}async function uxe(t){const e=await nxe(t),r=ah().gapi;return Rn(r,t,"internal-error"),e.open({where:document.body,url:cxe(t),messageHandlersFilter:r.iframes.CROSS_ORIGIN_IFRAMES_FILTER,attributes:oxe,dontclear:!0},n=>new Promise(async(a,s)=>{await n.restyle({setHideOnLeave:!1});const o=nh(t,"network-request-failed"),l=ah().setTimeout(()=>{s(o)},axe.get());function c(){ah().clearTimeout(l),a(n)}n.ping(c).then(c,()=>{s(o)})}))}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const dxe={location:"yes",resizable:"yes",statusbar:"yes",toolbar:"no"},fxe=500,hxe=600,Axe="_blank",mxe="http://localhost";class c7{constructor(e){this.window=e,this.associatedEvent=null}close(){if(this.window)try{this.window.close()}catch{}}}function pxe(t,e,r,n=fxe,a=hxe){const s=Math.max((window.screen.availHeight-a)/2,0).toString(),o=Math.max((window.screen.availWidth-n)/2,0).toString();let l="";const c=Object.assign(Object.assign({},dxe),{width:n.toString(),height:a.toString(),top:s,left:o}),u=Bo().toLowerCase();r&&(l=sJ(u)?Axe:r),nJ(u)&&(e=e||mxe,c.scrollbars="yes");const d=Object.entries(c).reduce((A,[h,m])=>`${A}${h}=${m},`,"");if(Lpe(u)&&l!=="_self")return gxe(e||"",l),new c7(null);const f=window.open(e||"",l,d);Rn(f,t,"popup-blocked");try{f.focus()}catch{}return new c7(f)}function gxe(t,e){const r=document.createElement("a");r.href=t,r.target=e;const n=document.createEvent("MouseEvent");n.initMouseEvent("click",!0,!0,window,1,0,0,0,0,!1,!1,!1,!1,1,null),r.dispatchEvent(n)}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const xxe="__/auth/handler",vxe="emulator/auth/handler",yxe=encodeURIComponent("fac");async function u7(t,e,r,n,a,s){Rn(t.config.authDomain,t,"auth-domain-config-required"),Rn(t.config.apiKey,t,"invalid-api-key");const o={apiKey:t.config.apiKey,appName:t.name,authType:r,redirectUrl:n,v:s1,eventId:a};if(e instanceof AJ){e.setDefaultLanguage(t.languageCode),o.providerId=e.providerId||"",cme(e.getCustomParameters())||(o.customParameters=JSON.stringify(e.getCustomParameters()));for(const[d,f]of Object.entries({}))o[d]=f}if(e instanceof ww){const d=e.getScopes().filter(f=>f!=="");d.length>0&&(o.scopes=d.join(","))}t.tenantId&&(o.tid=t.tenantId);const l=o;for(const d of Object.keys(l))l[d]===void 0&&delete l[d];const c=await t._getAppCheckToken(),u=c?`#${yxe}=${encodeURIComponent(c)}`:"";return`${bxe(t)}?${vw(l).slice(1)}${u}`}function bxe({config:t}){return t.emulator?BD(t,vxe):`https://${t.authDomain}/${xxe}`}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const C3="webStorageSupport";class wxe{constructor(){this.eventManagers={},this.iframes={},this.originValidationPromises={},this._redirectPersistence=MD,this._completeRedirectFn=Kge,this._overrideRedirectResult=Hge}async _openPopup(e,r,n,a){var s;pA((s=this.eventManagers[e._key()])===null||s===void 0?void 0:s.manager,"_initialize() not called before _openPopup()");const o=await u7(e,r,n,MT(),a);return pxe(e,o,LD())}async _openRedirect(e,r,n,a){await this._originValidation(e);const s=await u7(e,r,n,MT(),a);return Ege(s),new Promise(()=>{})}_initialize(e){const r=e._key();if(this.eventManagers[r]){const{manager:a,promise:s}=this.eventManagers[r];return a?Promise.resolve(a):(pA(s,"If manager is not set, promise should be"),s)}const n=this.initAndGetManager(e);return this.eventManagers[r]={promise:n},n.catch(()=>{delete this.eventManagers[r]}),n}async initAndGetManager(e){const r=await uxe(e),n=new zge(e);return r.register("authEvent",a=>(Rn(a==null?void 0:a.authEvent,e,"invalid-auth-event"),{status:n.onEvent(a.authEvent)?"ACK":"ERROR"}),gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER),this.eventManagers[e._key()]={manager:n},this.iframes[e._key()]=r,n}_isIframeWebStorageSupported(e,r){this.iframes[e._key()].send(C3,{type:C3},a=>{var s;const o=(s=a==null?void 0:a[0])===null||s===void 0?void 0:s[C3];o!==void 0&&r(!!o),wf(e,"internal-error")},gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER)}_originValidation(e){const r=e._key();return this.originValidationPromises[r]||(this.originValidationPromises[r]=Zge(e)),this.originValidationPromises[r]}get _shouldInitProactively(){return uJ()||aJ()||kD()}}const Nxe=wxe;var d7="@firebase/auth",f7="1.7.9";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Cxe{constructor(e){this.auth=e,this.internalListeners=new Map}getUid(){var e;return this.assertAuthConfigured(),((e=this.auth.currentUser)===null||e===void 0?void 0:e.uid)||null}async getToken(e){return this.assertAuthConfigured(),await this.auth._initializationPromise,this.auth.currentUser?{accessToken:await this.auth.currentUser.getIdToken(e)}:null}addAuthTokenListener(e){if(this.assertAuthConfigured(),this.internalListeners.has(e))return;const r=this.auth.onIdTokenChanged(n=>{e((n==null?void 0:n.stsTokenManager.accessToken)||null)});this.internalListeners.set(e,r),this.updateProactiveRefresh()}removeAuthTokenListener(e){this.assertAuthConfigured();const r=this.internalListeners.get(e);r&&(this.internalListeners.delete(e),r(),this.updateProactiveRefresh())}assertAuthConfigured(){Rn(this.auth._initializationPromise,"dependent-sdk-initialized-before-auth")}updateProactiveRefresh(){this.internalListeners.size>0?this.auth._startProactiveRefresh():this.auth._stopProactiveRefresh()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function _xe(t){switch(t){case"Node":return"node";case"ReactNative":return"rn";case"Worker":return"webworker";case"Cordova":return"cordova";case"WebExtension":return"web-extension";default:return}}function Exe(t){jv(new Zp("auth",(e,{options:r})=>{const n=e.getProvider("app").getImmediate(),a=e.getProvider("heartbeat"),s=e.getProvider("app-check-internal"),{apiKey:o,authDomain:l}=n.options;Rn(o&&!o.includes(":"),"invalid-api-key",{appName:n.name});const c={apiKey:o,authDomain:l,clientPlatform:t,apiHost:"identitytoolkit.googleapis.com",tokenApiHost:"securetoken.googleapis.com",apiScheme:"https",sdkClientVersion:dJ(t)},u=new Gpe(n,a,s,c);return ege(u,r),u},"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback((e,r,n)=>{e.getProvider("auth-internal").initialize()})),jv(new Zp("auth-internal",e=>{const r=Dm(e.getProvider("auth").getImmediate());return(n=>new Cxe(n))(r)},"PRIVATE").setInstantiationMode("EXPLICIT")),om(d7,f7,_xe(t)),om(d7,f7,"esm2017")}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Sxe=5*60,Ixe=QY("authIdTokenMaxAge")||Sxe;let h7=null;const jxe=t=>async e=>{const r=e&&await e.getIdTokenResult(),n=r&&(new Date().getTime()-Date.parse(r.issuedAtTime))/1e3;if(n&&n>Ixe)return;const a=r==null?void 0:r.token;h7!==a&&(h7=a,await fetch(t,{method:a?"POST":"DELETE",headers:a?{Authorization:`Bearer ${a}`}:{}}))};function QT(t=ID()){const e=ED(t,"auth");if(e.isInitialized())return e.getImmediate();const r=Zpe(t,{popupRedirectResolver:Nxe,persistence:[_J,RD,MD]}),n=QY("authTokenSyncURL");if(n&&typeof isSecureContext=="boolean"&&isSecureContext){const s=new URL(n,location.origin);if(location.origin===s.origin){const o=jxe(s.toString());bge(r,o,()=>o(r.currentUser)),yge(r,l=>o(l))}}const a=LY("auth");return a&&tge(r,`http://${a}`),r}function Pxe(){var t,e;return(e=(t=document.getElementsByTagName("head"))===null||t===void 0?void 0:t[0])!==null&&e!==void 0?e:document}Kpe({loadJS(t){return new Promise((e,r)=>{const n=document.createElement("script");n.setAttribute("src",t),n.onload=e,n.onerror=a=>{const s=nh("internal-error");s.customData=a,r(s)},n.type="text/javascript",n.charset="UTF-8",Pxe().appendChild(n)})},gapiScript:"https://apis.google.com/js/api.js",recaptchaV2Script:"https://www.google.com/recaptcha/api.js",recaptchaEnterpriseScript:"https://www.google.com/recaptcha/enterprise.js?render="});Exe("Browser");var Bxe="firebase",Txe="10.14.1";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */om(Bxe,Txe,"app");var A7=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};/** @license
Copyright The Closure Library Authors.
SPDX-License-Identifier: Apache-2.0
*/var Tp,IJ;(function(){var t;/** @license

 Copyright The Closure Library Authors.
 SPDX-License-Identifier: Apache-2.0
*/function e(_,S){function E(){}E.prototype=S.prototype,_.D=S.prototype,_.prototype=new E,_.prototype.constructor=_,_.C=function(T,k,B){for(var D=Array(arguments.length-2),X=2;X<arguments.length;X++)D[X-2]=arguments[X];return S.prototype[k].apply(T,D)}}function r(){this.blockSize=-1}function n(){this.blockSize=-1,this.blockSize=64,this.g=Array(4),this.B=Array(this.blockSize),this.o=this.h=0,this.s()}e(n,r),n.prototype.s=function(){this.g[0]=1732584193,this.g[1]=4023233417,this.g[2]=2562383102,this.g[3]=271733878,this.o=this.h=0};function a(_,S,E){E||(E=0);var T=Array(16);if(typeof S=="string")for(var k=0;16>k;++k)T[k]=S.charCodeAt(E++)|S.charCodeAt(E++)<<8|S.charCodeAt(E++)<<16|S.charCodeAt(E++)<<24;else for(k=0;16>k;++k)T[k]=S[E++]|S[E++]<<8|S[E++]<<16|S[E++]<<24;S=_.g[0],E=_.g[1],k=_.g[2];var B=_.g[3],D=S+(B^E&(k^B))+T[0]+3614090360&4294967295;S=E+(D<<7&4294967295|D>>>25),D=B+(k^S&(E^k))+T[1]+3905402710&4294967295,B=S+(D<<12&4294967295|D>>>20),D=k+(E^B&(S^E))+T[2]+606105819&4294967295,k=B+(D<<17&4294967295|D>>>15),D=E+(S^k&(B^S))+T[3]+3250441966&4294967295,E=k+(D<<22&4294967295|D>>>10),D=S+(B^E&(k^B))+T[4]+4118548399&4294967295,S=E+(D<<7&4294967295|D>>>25),D=B+(k^S&(E^k))+T[5]+1200080426&4294967295,B=S+(D<<12&4294967295|D>>>20),D=k+(E^B&(S^E))+T[6]+2821735955&4294967295,k=B+(D<<17&4294967295|D>>>15),D=E+(S^k&(B^S))+T[7]+4249261313&4294967295,E=k+(D<<22&4294967295|D>>>10),D=S+(B^E&(k^B))+T[8]+1770035416&4294967295,S=E+(D<<7&4294967295|D>>>25),D=B+(k^S&(E^k))+T[9]+2336552879&4294967295,B=S+(D<<12&4294967295|D>>>20),D=k+(E^B&(S^E))+T[10]+4294925233&4294967295,k=B+(D<<17&4294967295|D>>>15),D=E+(S^k&(B^S))+T[11]+2304563134&4294967295,E=k+(D<<22&4294967295|D>>>10),D=S+(B^E&(k^B))+T[12]+1804603682&4294967295,S=E+(D<<7&4294967295|D>>>25),D=B+(k^S&(E^k))+T[13]+4254626195&4294967295,B=S+(D<<12&4294967295|D>>>20),D=k+(E^B&(S^E))+T[14]+2792965006&4294967295,k=B+(D<<17&4294967295|D>>>15),D=E+(S^k&(B^S))+T[15]+1236535329&4294967295,E=k+(D<<22&4294967295|D>>>10),D=S+(k^B&(E^k))+T[1]+4129170786&4294967295,S=E+(D<<5&4294967295|D>>>27),D=B+(E^k&(S^E))+T[6]+3225465664&4294967295,B=S+(D<<9&4294967295|D>>>23),D=k+(S^E&(B^S))+T[11]+643717713&4294967295,k=B+(D<<14&4294967295|D>>>18),D=E+(B^S&(k^B))+T[0]+3921069994&4294967295,E=k+(D<<20&4294967295|D>>>12),D=S+(k^B&(E^k))+T[5]+3593408605&4294967295,S=E+(D<<5&4294967295|D>>>27),D=B+(E^k&(S^E))+T[10]+38016083&4294967295,B=S+(D<<9&4294967295|D>>>23),D=k+(S^E&(B^S))+T[15]+3634488961&4294967295,k=B+(D<<14&4294967295|D>>>18),D=E+(B^S&(k^B))+T[4]+3889429448&4294967295,E=k+(D<<20&4294967295|D>>>12),D=S+(k^B&(E^k))+T[9]+568446438&4294967295,S=E+(D<<5&4294967295|D>>>27),D=B+(E^k&(S^E))+T[14]+3275163606&4294967295,B=S+(D<<9&4294967295|D>>>23),D=k+(S^E&(B^S))+T[3]+4107603335&4294967295,k=B+(D<<14&4294967295|D>>>18),D=E+(B^S&(k^B))+T[8]+1163531501&4294967295,E=k+(D<<20&4294967295|D>>>12),D=S+(k^B&(E^k))+T[13]+2850285829&4294967295,S=E+(D<<5&4294967295|D>>>27),D=B+(E^k&(S^E))+T[2]+4243563512&4294967295,B=S+(D<<9&4294967295|D>>>23),D=k+(S^E&(B^S))+T[7]+1735328473&4294967295,k=B+(D<<14&4294967295|D>>>18),D=E+(B^S&(k^B))+T[12]+2368359562&4294967295,E=k+(D<<20&4294967295|D>>>12),D=S+(E^k^B)+T[5]+4294588738&4294967295,S=E+(D<<4&4294967295|D>>>28),D=B+(S^E^k)+T[8]+2272392833&4294967295,B=S+(D<<11&4294967295|D>>>21),D=k+(B^S^E)+T[11]+1839030562&4294967295,k=B+(D<<16&4294967295|D>>>16),D=E+(k^B^S)+T[14]+4259657740&4294967295,E=k+(D<<23&4294967295|D>>>9),D=S+(E^k^B)+T[1]+2763975236&4294967295,S=E+(D<<4&4294967295|D>>>28),D=B+(S^E^k)+T[4]+1272893353&4294967295,B=S+(D<<11&4294967295|D>>>21),D=k+(B^S^E)+T[7]+4139469664&4294967295,k=B+(D<<16&4294967295|D>>>16),D=E+(k^B^S)+T[10]+3200236656&4294967295,E=k+(D<<23&4294967295|D>>>9),D=S+(E^k^B)+T[13]+681279174&4294967295,S=E+(D<<4&4294967295|D>>>28),D=B+(S^E^k)+T[0]+3936430074&4294967295,B=S+(D<<11&4294967295|D>>>21),D=k+(B^S^E)+T[3]+3572445317&4294967295,k=B+(D<<16&4294967295|D>>>16),D=E+(k^B^S)+T[6]+76029189&4294967295,E=k+(D<<23&4294967295|D>>>9),D=S+(E^k^B)+T[9]+3654602809&4294967295,S=E+(D<<4&4294967295|D>>>28),D=B+(S^E^k)+T[12]+3873151461&4294967295,B=S+(D<<11&4294967295|D>>>21),D=k+(B^S^E)+T[15]+530742520&4294967295,k=B+(D<<16&4294967295|D>>>16),D=E+(k^B^S)+T[2]+3299628645&4294967295,E=k+(D<<23&4294967295|D>>>9),D=S+(k^(E|~B))+T[0]+4096336452&4294967295,S=E+(D<<6&4294967295|D>>>26),D=B+(E^(S|~k))+T[7]+1126891415&4294967295,B=S+(D<<10&4294967295|D>>>22),D=k+(S^(B|~E))+T[14]+2878612391&4294967295,k=B+(D<<15&4294967295|D>>>17),D=E+(B^(k|~S))+T[5]+4237533241&4294967295,E=k+(D<<21&4294967295|D>>>11),D=S+(k^(E|~B))+T[12]+1700485571&4294967295,S=E+(D<<6&4294967295|D>>>26),D=B+(E^(S|~k))+T[3]+2399980690&4294967295,B=S+(D<<10&4294967295|D>>>22),D=k+(S^(B|~E))+T[10]+4293915773&4294967295,k=B+(D<<15&4294967295|D>>>17),D=E+(B^(k|~S))+T[1]+2240044497&4294967295,E=k+(D<<21&4294967295|D>>>11),D=S+(k^(E|~B))+T[8]+1873313359&4294967295,S=E+(D<<6&4294967295|D>>>26),D=B+(E^(S|~k))+T[15]+4264355552&4294967295,B=S+(D<<10&4294967295|D>>>22),D=k+(S^(B|~E))+T[6]+2734768916&4294967295,k=B+(D<<15&4294967295|D>>>17),D=E+(B^(k|~S))+T[13]+1309151649&4294967295,E=k+(D<<21&4294967295|D>>>11),D=S+(k^(E|~B))+T[4]+4149444226&4294967295,S=E+(D<<6&4294967295|D>>>26),D=B+(E^(S|~k))+T[11]+3174756917&4294967295,B=S+(D<<10&4294967295|D>>>22),D=k+(S^(B|~E))+T[2]+718787259&4294967295,k=B+(D<<15&4294967295|D>>>17),D=E+(B^(k|~S))+T[9]+3951481745&4294967295,_.g[0]=_.g[0]+S&4294967295,_.g[1]=_.g[1]+(k+(D<<21&4294967295|D>>>11))&4294967295,_.g[2]=_.g[2]+k&4294967295,_.g[3]=_.g[3]+B&4294967295}n.prototype.u=function(_,S){S===void 0&&(S=_.length);for(var E=S-this.blockSize,T=this.B,k=this.h,B=0;B<S;){if(k==0)for(;B<=E;)a(this,_,B),B+=this.blockSize;if(typeof _=="string"){for(;B<S;)if(T[k++]=_.charCodeAt(B++),k==this.blockSize){a(this,T),k=0;break}}else for(;B<S;)if(T[k++]=_[B++],k==this.blockSize){a(this,T),k=0;break}}this.h=k,this.o+=S},n.prototype.v=function(){var _=Array((56>this.h?this.blockSize:2*this.blockSize)-this.h);_[0]=128;for(var S=1;S<_.length-8;++S)_[S]=0;var E=8*this.o;for(S=_.length-8;S<_.length;++S)_[S]=E&255,E/=256;for(this.u(_),_=Array(16),S=E=0;4>S;++S)for(var T=0;32>T;T+=8)_[E++]=this.g[S]>>>T&255;return _};function s(_,S){var E=l;return Object.prototype.hasOwnProperty.call(E,_)?E[_]:E[_]=S(_)}function o(_,S){this.h=S;for(var E=[],T=!0,k=_.length-1;0<=k;k--){var B=_[k]|0;T&&B==S||(E[k]=B,T=!1)}this.g=E}var l={};function c(_){return-128<=_&&128>_?s(_,function(S){return new o([S|0],0>S?-1:0)}):new o([_|0],0>_?-1:0)}function u(_){if(isNaN(_)||!isFinite(_))return f;if(0>_)return x(u(-_));for(var S=[],E=1,T=0;_>=E;T++)S[T]=_/E|0,E*=4294967296;return new o(S,0)}function d(_,S){if(_.length==0)throw Error("number format error: empty string");if(S=S||10,2>S||36<S)throw Error("radix out of range: "+S);if(_.charAt(0)=="-")return x(d(_.substring(1),S));if(0<=_.indexOf("-"))throw Error('number format error: interior "-" character');for(var E=u(Math.pow(S,8)),T=f,k=0;k<_.length;k+=8){var B=Math.min(8,_.length-k),D=parseInt(_.substring(k,k+B),S);8>B?(B=u(Math.pow(S,B)),T=T.j(B).add(u(D))):(T=T.j(E),T=T.add(u(D)))}return T}var f=c(0),A=c(1),h=c(16777216);t=o.prototype,t.m=function(){if(p(this))return-x(this).m();for(var _=0,S=1,E=0;E<this.g.length;E++){var T=this.i(E);_+=(0<=T?T:4294967296+T)*S,S*=4294967296}return _},t.toString=function(_){if(_=_||10,2>_||36<_)throw Error("radix out of range: "+_);if(m(this))return"0";if(p(this))return"-"+x(this).toString(_);for(var S=u(Math.pow(_,6)),E=this,T="";;){var k=w(E,S).g;E=v(E,k.j(S));var B=((0<E.g.length?E.g[0]:E.h)>>>0).toString(_);if(E=k,m(E))return B+T;for(;6>B.length;)B="0"+B;T=B+T}},t.i=function(_){return 0>_?0:_<this.g.length?this.g[_]:this.h};function m(_){if(_.h!=0)return!1;for(var S=0;S<_.g.length;S++)if(_.g[S]!=0)return!1;return!0}function p(_){return _.h==-1}t.l=function(_){return _=v(this,_),p(_)?-1:m(_)?0:1};function x(_){for(var S=_.g.length,E=[],T=0;T<S;T++)E[T]=~_.g[T];return new o(E,~_.h).add(A)}t.abs=function(){return p(this)?x(this):this},t.add=function(_){for(var S=Math.max(this.g.length,_.g.length),E=[],T=0,k=0;k<=S;k++){var B=T+(this.i(k)&65535)+(_.i(k)&65535),D=(B>>>16)+(this.i(k)>>>16)+(_.i(k)>>>16);T=D>>>16,B&=65535,D&=65535,E[k]=D<<16|B}return new o(E,E[E.length-1]&-2147483648?-1:0)};function v(_,S){return _.add(x(S))}t.j=function(_){if(m(this)||m(_))return f;if(p(this))return p(_)?x(this).j(x(_)):x(x(this).j(_));if(p(_))return x(this.j(x(_)));if(0>this.l(h)&&0>_.l(h))return u(this.m()*_.m());for(var S=this.g.length+_.g.length,E=[],T=0;T<2*S;T++)E[T]=0;for(T=0;T<this.g.length;T++)for(var k=0;k<_.g.length;k++){var B=this.i(T)>>>16,D=this.i(T)&65535,X=_.i(k)>>>16,me=_.i(k)&65535;E[2*T+2*k]+=D*me,y(E,2*T+2*k),E[2*T+2*k+1]+=B*me,y(E,2*T+2*k+1),E[2*T+2*k+1]+=D*X,y(E,2*T+2*k+1),E[2*T+2*k+2]+=B*X,y(E,2*T+2*k+2)}for(T=0;T<S;T++)E[T]=E[2*T+1]<<16|E[2*T];for(T=S;T<2*S;T++)E[T]=0;return new o(E,0)};function y(_,S){for(;(_[S]&65535)!=_[S];)_[S+1]+=_[S]>>>16,_[S]&=65535,S++}function b(_,S){this.g=_,this.h=S}function w(_,S){if(m(S))throw Error("division by zero");if(m(_))return new b(f,f);if(p(_))return S=w(x(_),S),new b(x(S.g),x(S.h));if(p(S))return S=w(_,x(S)),new b(x(S.g),S.h);if(30<_.g.length){if(p(_)||p(S))throw Error("slowDivide_ only works with positive integers.");for(var E=A,T=S;0>=T.l(_);)E=j(E),T=j(T);var k=I(E,1),B=I(T,1);for(T=I(T,2),E=I(E,2);!m(T);){var D=B.add(T);0>=D.l(_)&&(k=k.add(E),B=D),T=I(T,1),E=I(E,1)}return S=v(_,k.j(S)),new b(k,S)}for(k=f;0<=_.l(S);){for(E=Math.max(1,Math.floor(_.m()/S.m())),T=Math.ceil(Math.log(E)/Math.LN2),T=48>=T?1:Math.pow(2,T-48),B=u(E),D=B.j(S);p(D)||0<D.l(_);)E-=T,B=u(E),D=B.j(S);m(B)&&(B=A),k=k.add(B),_=v(_,D)}return new b(k,_)}t.A=function(_){return w(this,_).h},t.and=function(_){for(var S=Math.max(this.g.length,_.g.length),E=[],T=0;T<S;T++)E[T]=this.i(T)&_.i(T);return new o(E,this.h&_.h)},t.or=function(_){for(var S=Math.max(this.g.length,_.g.length),E=[],T=0;T<S;T++)E[T]=this.i(T)|_.i(T);return new o(E,this.h|_.h)},t.xor=function(_){for(var S=Math.max(this.g.length,_.g.length),E=[],T=0;T<S;T++)E[T]=this.i(T)^_.i(T);return new o(E,this.h^_.h)};function j(_){for(var S=_.g.length+1,E=[],T=0;T<S;T++)E[T]=_.i(T)<<1|_.i(T-1)>>>31;return new o(E,_.h)}function I(_,S){var E=S>>5;S%=32;for(var T=_.g.length-E,k=[],B=0;B<T;B++)k[B]=0<S?_.i(B+E)>>>S|_.i(B+E+1)<<32-S:_.i(B+E);return new o(k,_.h)}n.prototype.digest=n.prototype.v,n.prototype.reset=n.prototype.s,n.prototype.update=n.prototype.u,IJ=n,o.prototype.add=o.prototype.add,o.prototype.multiply=o.prototype.j,o.prototype.modulo=o.prototype.A,o.prototype.compare=o.prototype.l,o.prototype.toNumber=o.prototype.m,o.prototype.toString=o.prototype.toString,o.prototype.getBits=o.prototype.i,o.fromNumber=u,o.fromString=d,Tp=o}).apply(typeof A7<"u"?A7:typeof self<"u"?self:typeof window<"u"?window:{});var eC=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};/** @license
Copyright The Closure Library Authors.
SPDX-License-Identifier: Apache-2.0
*/var jJ,Ry,PJ,nE,VT,BJ,TJ,kJ;(function(){var t,e=typeof Object.defineProperties=="function"?Object.defineProperty:function(C,Z,be){return C==Array.prototype||C==Object.prototype||(C[Z]=be.value),C};function r(C){C=[typeof globalThis=="object"&&globalThis,C,typeof window=="object"&&window,typeof self=="object"&&self,typeof eC=="object"&&eC];for(var Z=0;Z<C.length;++Z){var be=C[Z];if(be&&be.Math==Math)return be}throw Error("Cannot find global object")}var n=r(this);function a(C,Z){if(Z)e:{var be=n;C=C.split(".");for(var Xe=0;Xe<C.length-1;Xe++){var Ft=C[Xe];if(!(Ft in be))break e;be=be[Ft]}C=C[C.length-1],Xe=be[C],Z=Z(Xe),Z!=Xe&&Z!=null&&e(be,C,{configurable:!0,writable:!0,value:Z})}}function s(C,Z){C instanceof String&&(C+="");var be=0,Xe=!1,Ft={next:function(){if(!Xe&&be<C.length){var qt=be++;return{value:Z(qt,C[qt]),done:!1}}return Xe=!0,{done:!0,value:void 0}}};return Ft[Symbol.iterator]=function(){return Ft},Ft}a("Array.prototype.values",function(C){return C||function(){return s(this,function(Z,be){return be})}});/** @license

 Copyright The Closure Library Authors.
 SPDX-License-Identifier: Apache-2.0
*/var o=o||{},l=this||self;function c(C){var Z=typeof C;return Z=Z!="object"?Z:C?Array.isArray(C)?"array":Z:"null",Z=="array"||Z=="object"&&typeof C.length=="number"}function u(C){var Z=typeof C;return Z=="object"&&C!=null||Z=="function"}function d(C,Z,be){return C.call.apply(C.bind,arguments)}function f(C,Z,be){if(!C)throw Error();if(2<arguments.length){var Xe=Array.prototype.slice.call(arguments,2);return function(){var Ft=Array.prototype.slice.call(arguments);return Array.prototype.unshift.apply(Ft,Xe),C.apply(Z,Ft)}}return function(){return C.apply(Z,arguments)}}function A(C,Z,be){return A=Function.prototype.bind&&Function.prototype.bind.toString().indexOf("native code")!=-1?d:f,A.apply(null,arguments)}function h(C,Z){var be=Array.prototype.slice.call(arguments,1);return function(){var Xe=be.slice();return Xe.push.apply(Xe,arguments),C.apply(this,Xe)}}function m(C,Z){function be(){}be.prototype=Z.prototype,C.aa=Z.prototype,C.prototype=new be,C.prototype.constructor=C,C.Qb=function(Xe,Ft,qt){for(var Fr=Array(arguments.length-2),ma=2;ma<arguments.length;ma++)Fr[ma-2]=arguments[ma];return Z.prototype[Ft].apply(Xe,Fr)}}function p(C){const Z=C.length;if(0<Z){const be=Array(Z);for(let Xe=0;Xe<Z;Xe++)be[Xe]=C[Xe];return be}return[]}function x(C,Z){for(let be=1;be<arguments.length;be++){const Xe=arguments[be];if(c(Xe)){const Ft=C.length||0,qt=Xe.length||0;C.length=Ft+qt;for(let Fr=0;Fr<qt;Fr++)C[Ft+Fr]=Xe[Fr]}else C.push(Xe)}}class v{constructor(Z,be){this.i=Z,this.j=be,this.h=0,this.g=null}get(){let Z;return 0<this.h?(this.h--,Z=this.g,this.g=Z.next,Z.next=null):Z=this.i(),Z}}function y(C){return/^[\s\xa0]*$/.test(C)}function b(){var C=l.navigator;return C&&(C=C.userAgent)?C:""}function w(C){return w[" "](C),C}w[" "]=function(){};var j=b().indexOf("Gecko")!=-1&&!(b().toLowerCase().indexOf("webkit")!=-1&&b().indexOf("Edge")==-1)&&!(b().indexOf("Trident")!=-1||b().indexOf("MSIE")!=-1)&&b().indexOf("Edge")==-1;function I(C,Z,be){for(const Xe in C)Z.call(be,C[Xe],Xe,C)}function _(C,Z){for(const be in C)Z.call(void 0,C[be],be,C)}function S(C){const Z={};for(const be in C)Z[be]=C[be];return Z}const E="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function T(C,Z){let be,Xe;for(let Ft=1;Ft<arguments.length;Ft++){Xe=arguments[Ft];for(be in Xe)C[be]=Xe[be];for(let qt=0;qt<E.length;qt++)be=E[qt],Object.prototype.hasOwnProperty.call(Xe,be)&&(C[be]=Xe[be])}}function k(C){var Z=1;C=C.split(":");const be=[];for(;0<Z&&C.length;)be.push(C.shift()),Z--;return C.length&&be.push(C.join(":")),be}function B(C){l.setTimeout(()=>{throw C},0)}function D(){var C=ae;let Z=null;return C.g&&(Z=C.g,C.g=C.g.next,C.g||(C.h=null),Z.next=null),Z}class X{constructor(){this.h=this.g=null}add(Z,be){const Xe=me.get();Xe.set(Z,be),this.h?this.h.next=Xe:this.g=Xe,this.h=Xe}}var me=new v(()=>new pe,C=>C.reset());class pe{constructor(){this.next=this.g=this.h=null}set(Z,be){this.h=Z,this.g=be,this.next=null}reset(){this.next=this.g=this.h=null}}let he,ve=!1,ae=new X,Pe=()=>{const C=l.Promise.resolve(void 0);he=()=>{C.then(ke)}};var ke=()=>{for(var C;C=D();){try{C.h.call(C.g)}catch(be){B(be)}var Z=me;Z.j(C),100>Z.h&&(Z.h++,C.next=Z.g,Z.g=C)}ve=!1};function O(){this.s=this.s,this.C=this.C}O.prototype.s=!1,O.prototype.ma=function(){this.s||(this.s=!0,this.N())},O.prototype.N=function(){if(this.C)for(;this.C.length;)this.C.shift()()};function G(C,Z){this.type=C,this.g=this.target=Z,this.defaultPrevented=!1}G.prototype.h=function(){this.defaultPrevented=!0};var z=function(){if(!l.addEventListener||!Object.defineProperty)return!1;var C=!1,Z=Object.defineProperty({},"passive",{get:function(){C=!0}});try{const be=()=>{};l.addEventListener("test",be,Z),l.removeEventListener("test",be,Z)}catch{}return C}();function U(C,Z){if(G.call(this,C?C.type:""),this.relatedTarget=this.g=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key="",this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.state=null,this.pointerId=0,this.pointerType="",this.i=null,C){var be=this.type=C.type,Xe=C.changedTouches&&C.changedTouches.length?C.changedTouches[0]:null;if(this.target=C.target||C.srcElement,this.g=Z,Z=C.relatedTarget){if(j){e:{try{w(Z.nodeName);var Ft=!0;break e}catch{}Ft=!1}Ft||(Z=null)}}else be=="mouseover"?Z=C.fromElement:be=="mouseout"&&(Z=C.toElement);this.relatedTarget=Z,Xe?(this.clientX=Xe.clientX!==void 0?Xe.clientX:Xe.pageX,this.clientY=Xe.clientY!==void 0?Xe.clientY:Xe.pageY,this.screenX=Xe.screenX||0,this.screenY=Xe.screenY||0):(this.clientX=C.clientX!==void 0?C.clientX:C.pageX,this.clientY=C.clientY!==void 0?C.clientY:C.pageY,this.screenX=C.screenX||0,this.screenY=C.screenY||0),this.button=C.button,this.key=C.key||"",this.ctrlKey=C.ctrlKey,this.altKey=C.altKey,this.shiftKey=C.shiftKey,this.metaKey=C.metaKey,this.pointerId=C.pointerId||0,this.pointerType=typeof C.pointerType=="string"?C.pointerType:Y[C.pointerType]||"",this.state=C.state,this.i=C,C.defaultPrevented&&U.aa.h.call(this)}}m(U,G);var Y={2:"touch",3:"pen",4:"mouse"};U.prototype.h=function(){U.aa.h.call(this);var C=this.i;C.preventDefault?C.preventDefault():C.returnValue=!1};var ee="closure_listenable_"+(1e6*Math.random()|0),M=0;function H(C,Z,be,Xe,Ft){this.listener=C,this.proxy=null,this.src=Z,this.type=be,this.capture=!!Xe,this.ha=Ft,this.key=++M,this.da=this.fa=!1}function te(C){C.da=!0,C.listener=null,C.proxy=null,C.src=null,C.ha=null}function Ce(C){this.src=C,this.g={},this.h=0}Ce.prototype.add=function(C,Z,be,Xe,Ft){var qt=C.toString();C=this.g[qt],C||(C=this.g[qt]=[],this.h++);var Fr=We(C,Z,Xe,Ft);return-1<Fr?(Z=C[Fr],be||(Z.fa=!1)):(Z=new H(Z,this.src,qt,!!Xe,Ft),Z.fa=be,C.push(Z)),Z};function V(C,Z){var be=Z.type;if(be in C.g){var Xe=C.g[be],Ft=Array.prototype.indexOf.call(Xe,Z,void 0),qt;(qt=0<=Ft)&&Array.prototype.splice.call(Xe,Ft,1),qt&&(te(Z),C.g[be].length==0&&(delete C.g[be],C.h--))}}function We(C,Z,be,Xe){for(var Ft=0;Ft<C.length;++Ft){var qt=C[Ft];if(!qt.da&&qt.listener==Z&&qt.capture==!!be&&qt.ha==Xe)return Ft}return-1}var ie="closure_lm_"+(1e6*Math.random()|0),J={};function Oe(C,Z,be,Xe,Ft){if(Array.isArray(Z)){for(var qt=0;qt<Z.length;qt++)Oe(C,Z[qt],be,Xe,Ft);return null}return be=jt(be),C&&C[ee]?C.K(Z,be,u(Xe)?!!Xe.capture:!1,Ft):fe(C,Z,be,!1,Xe,Ft)}function fe(C,Z,be,Xe,Ft,qt){if(!Z)throw Error("Invalid event type");var Fr=u(Ft)?!!Ft.capture:!!Ft,ma=bt(C);if(ma||(C[ie]=ma=new Ce(C)),be=ma.add(Z,be,Xe,Fr,qt),be.proxy)return be;if(Xe=_e(),be.proxy=Xe,Xe.src=C,Xe.listener=be,C.addEventListener)z||(Ft=Fr),Ft===void 0&&(Ft=!1),C.addEventListener(Z.toString(),Xe,Ft);else if(C.attachEvent)C.attachEvent(At(Z.toString()),Xe);else if(C.addListener&&C.removeListener)C.addListener(Xe);else throw Error("addEventListener and attachEvent are unavailable.");return be}function _e(){function C(be){return Z.call(C.src,C.listener,be)}const Z=yt;return C}function Ue(C,Z,be,Xe,Ft){if(Array.isArray(Z))for(var qt=0;qt<Z.length;qt++)Ue(C,Z[qt],be,Xe,Ft);else Xe=u(Xe)?!!Xe.capture:!!Xe,be=jt(be),C&&C[ee]?(C=C.i,Z=String(Z).toString(),Z in C.g&&(qt=C.g[Z],be=We(qt,be,Xe,Ft),-1<be&&(te(qt[be]),Array.prototype.splice.call(qt,be,1),qt.length==0&&(delete C.g[Z],C.h--)))):C&&(C=bt(C))&&(Z=C.g[Z.toString()],C=-1,Z&&(C=We(Z,be,Xe,Ft)),(be=-1<C?Z[C]:null)&&Ye(be))}function Ye(C){if(typeof C!="number"&&C&&!C.da){var Z=C.src;if(Z&&Z[ee])V(Z.i,C);else{var be=C.type,Xe=C.proxy;Z.removeEventListener?Z.removeEventListener(be,Xe,C.capture):Z.detachEvent?Z.detachEvent(At(be),Xe):Z.addListener&&Z.removeListener&&Z.removeListener(Xe),(be=bt(Z))?(V(be,C),be.h==0&&(be.src=null,Z[ie]=null)):te(C)}}}function At(C){return C in J?J[C]:J[C]="on"+C}function yt(C,Z){if(C.da)C=!0;else{Z=new U(Z,this);var be=C.listener,Xe=C.ha||C.src;C.fa&&Ye(C),C=be.call(Xe,Z)}return C}function bt(C){return C=C[ie],C instanceof Ce?C:null}var Nt="__closure_events_fn_"+(1e9*Math.random()>>>0);function jt(C){return typeof C=="function"?C:(C[Nt]||(C[Nt]=function(Z){return C.handleEvent(Z)}),C[Nt])}function St(){O.call(this),this.i=new Ce(this),this.M=this,this.F=null}m(St,O),St.prototype[ee]=!0,St.prototype.removeEventListener=function(C,Z,be,Xe){Ue(this,C,Z,be,Xe)};function Ve(C,Z){var be,Xe=C.F;if(Xe)for(be=[];Xe;Xe=Xe.F)be.push(Xe);if(C=C.M,Xe=Z.type||Z,typeof Z=="string")Z=new G(Z,C);else if(Z instanceof G)Z.target=Z.target||C;else{var Ft=Z;Z=new G(Xe,C),T(Z,Ft)}if(Ft=!0,be)for(var qt=be.length-1;0<=qt;qt--){var Fr=Z.g=be[qt];Ft=Te(Fr,Xe,!0,Z)&&Ft}if(Fr=Z.g=C,Ft=Te(Fr,Xe,!0,Z)&&Ft,Ft=Te(Fr,Xe,!1,Z)&&Ft,be)for(qt=0;qt<be.length;qt++)Fr=Z.g=be[qt],Ft=Te(Fr,Xe,!1,Z)&&Ft}St.prototype.N=function(){if(St.aa.N.call(this),this.i){var C=this.i,Z;for(Z in C.g){for(var be=C.g[Z],Xe=0;Xe<be.length;Xe++)te(be[Xe]);delete C.g[Z],C.h--}}this.F=null},St.prototype.K=function(C,Z,be,Xe){return this.i.add(String(C),Z,!1,be,Xe)},St.prototype.L=function(C,Z,be,Xe){return this.i.add(String(C),Z,!0,be,Xe)};function Te(C,Z,be,Xe){if(Z=C.i.g[String(Z)],!Z)return!0;Z=Z.concat();for(var Ft=!0,qt=0;qt<Z.length;++qt){var Fr=Z[qt];if(Fr&&!Fr.da&&Fr.capture==be){var ma=Fr.listener,ei=Fr.ha||Fr.src;Fr.fa&&V(C.i,Fr),Ft=ma.call(ei,Xe)!==!1&&Ft}}return Ft&&!Xe.defaultPrevented}function qe(C,Z,be){if(typeof C=="function")be&&(C=A(C,be));else if(C&&typeof C.handleEvent=="function")C=A(C.handleEvent,C);else throw Error("Invalid listener argument");return 2147483647<Number(Z)?-1:l.setTimeout(C,Z||0)}function ge(C){C.g=qe(()=>{C.g=null,C.i&&(C.i=!1,ge(C))},C.l);const Z=C.h;C.h=null,C.m.apply(null,Z)}class q extends O{constructor(Z,be){super(),this.m=Z,this.l=be,this.h=null,this.i=!1,this.g=null}j(Z){this.h=arguments,this.g?this.i=!0:ge(this)}N(){super.N(),this.g&&(l.clearTimeout(this.g),this.g=null,this.i=!1,this.h=null)}}function se(C){O.call(this),this.h=C,this.g={}}m(se,O);var ye=[];function ue(C){I(C.g,function(Z,be){this.g.hasOwnProperty(be)&&Ye(Z)},C),C.g={}}se.prototype.N=function(){se.aa.N.call(this),ue(this)},se.prototype.handleEvent=function(){throw Error("EventHandler.handleEvent not implemented")};var Le=l.JSON.stringify,ct=l.JSON.parse,ht=class{stringify(C){return l.JSON.stringify(C,void 0)}parse(C){return l.JSON.parse(C,void 0)}};function xe(){}xe.prototype.h=null;function Ae(C){return C.h||(C.h=C.i())}function Re(){}var lt={OPEN:"a",kb:"b",Ja:"c",wb:"d"};function Ne(){G.call(this,"d")}m(Ne,G);function De(){G.call(this,"c")}m(De,G);var xt={},_t=null;function Et(){return _t=_t||new St}xt.La="serverreachability";function Mt(C){G.call(this,xt.La,C)}m(Mt,G);function nt(C){const Z=Et();Ve(Z,new Mt(Z))}xt.STAT_EVENT="statevent";function Ee(C,Z){G.call(this,xt.STAT_EVENT,C),this.stat=Z}m(Ee,G);function we(C){const Z=Et();Ve(Z,new Ee(Z,C))}xt.Ma="timingevent";function oe(C,Z){G.call(this,xt.Ma,C),this.size=Z}m(oe,G);function Fe(C,Z){if(typeof C!="function")throw Error("Fn must not be null and must be a function");return l.setTimeout(function(){C()},Z)}function ce(){this.g=!0}ce.prototype.xa=function(){this.g=!1};function Me(C,Z,be,Xe,Ft,qt){C.info(function(){if(C.g)if(qt)for(var Fr="",ma=qt.split("&"),ei=0;ei<ma.length;ei++){var ra=ma[ei].split("=");if(1<ra.length){var Sa=ra[0];ra=ra[1];var gs=Sa.split("_");Fr=2<=gs.length&&gs[1]=="type"?Fr+(Sa+"="+ra+"&"):Fr+(Sa+"=redacted&")}}else Fr=null;else Fr=qt;return"XMLHTTP REQ ("+Xe+") [attempt "+Ft+"]: "+Z+`
`+be+`
`+Fr})}function Ke(C,Z,be,Xe,Ft,qt,Fr){C.info(function(){return"XMLHTTP RESP ("+Xe+") [ attempt "+Ft+"]: "+Z+`
`+be+`
`+qt+" "+Fr})}function P(C,Z,be,Xe){C.info(function(){return"XMLHTTP TEXT ("+Z+"): "+L(C,be)+(Xe?" "+Xe:"")})}function R(C,Z){C.info(function(){return"TIMEOUT: "+Z})}ce.prototype.info=function(){};function L(C,Z){if(!C.g)return Z;if(!Z)return null;try{var be=JSON.parse(Z);if(be){for(C=0;C<be.length;C++)if(Array.isArray(be[C])){var Xe=be[C];if(!(2>Xe.length)){var Ft=Xe[1];if(Array.isArray(Ft)&&!(1>Ft.length)){var qt=Ft[0];if(qt!="noop"&&qt!="stop"&&qt!="close")for(var Fr=1;Fr<Ft.length;Fr++)Ft[Fr]=""}}}}return Le(be)}catch{return Z}}var K={NO_ERROR:0,gb:1,tb:2,sb:3,nb:4,rb:5,ub:6,Ia:7,TIMEOUT:8,xb:9},re={lb:"complete",Hb:"success",Ja:"error",Ia:"abort",zb:"ready",Ab:"readystatechange",TIMEOUT:"timeout",vb:"incrementaldata",yb:"progress",ob:"downloadprogress",Pb:"uploadprogress"},de;function Ge(){}m(Ge,xe),Ge.prototype.g=function(){return new XMLHttpRequest},Ge.prototype.i=function(){return{}},de=new Ge;function rt(C,Z,be,Xe){this.j=C,this.i=Z,this.l=be,this.R=Xe||1,this.U=new se(this),this.I=45e3,this.H=null,this.o=!1,this.m=this.A=this.v=this.L=this.F=this.S=this.B=null,this.D=[],this.g=null,this.C=0,this.s=this.u=null,this.X=-1,this.J=!1,this.O=0,this.M=null,this.W=this.K=this.T=this.P=!1,this.h=new ft}function ft(){this.i=null,this.g="",this.h=!1}var et={},ut={};function Ot(C,Z,be){C.L=1,C.v=tt(ar(Z)),C.m=be,C.P=!0,zt(C,null)}function zt(C,Z){C.F=Date.now(),Be(C),C.A=ar(C.v);var be=C.A,Xe=C.R;Array.isArray(Xe)||(Xe=[String(Xe)]),Er(be.i,"t",Xe),C.C=0,be=C.j.J,C.h=new ft,C.g=mi(C.j,be?Z:null,!C.m),0<C.O&&(C.M=new q(A(C.Y,C,C.g),C.O)),Z=C.U,be=C.g,Xe=C.ca;var Ft="readystatechange";Array.isArray(Ft)||(Ft&&(ye[0]=Ft.toString()),Ft=ye);for(var qt=0;qt<Ft.length;qt++){var Fr=Oe(be,Ft[qt],Xe||Z.handleEvent,!1,Z.h||Z);if(!Fr)break;Z.g[Fr.key]=Fr}Z=C.H?S(C.H):{},C.m?(C.u||(C.u="POST"),Z["Content-Type"]="application/x-www-form-urlencoded",C.g.ea(C.A,C.u,C.m,Z)):(C.u="GET",C.g.ea(C.A,C.u,null,Z)),nt(),Me(C.i,C.u,C.A,C.l,C.R,C.m)}rt.prototype.ca=function(C){C=C.target;const Z=this.M;Z&&sl(C)==3?Z.j():this.Y(C)},rt.prototype.Y=function(C){try{if(C==this.g)e:{const gs=sl(this.g);var Z=this.g.Ba();const hu=this.g.Z();if(!(3>gs)&&(gs!=3||this.g&&(this.h.h||this.g.oa()||fu(this.g)))){this.J||gs!=4||Z==7||(Z==8||0>=hu?nt(3):nt(2)),hr(this);var be=this.g.Z();this.X=be;t:if(Bt(this)){var Xe=fu(this.g);C="";var Ft=Xe.length,qt=sl(this.g)==4;if(!this.h.i){if(typeof TextDecoder>"u"){Nr(this),xr(this);var Fr="";break t}this.h.i=new l.TextDecoder}for(Z=0;Z<Ft;Z++)this.h.h=!0,C+=this.h.i.decode(Xe[Z],{stream:!(qt&&Z==Ft-1)});Xe.length=0,this.h.g+=C,this.C=0,Fr=this.h.g}else Fr=this.g.oa();if(this.o=be==200,Ke(this.i,this.u,this.A,this.l,this.R,gs,be),this.o){if(this.T&&!this.K){t:{if(this.g){var ma,ei=this.g;if((ma=ei.g?ei.g.getResponseHeader("X-HTTP-Initial-Response"):null)&&!y(ma)){var ra=ma;break t}}ra=null}if(be=ra)P(this.i,this.l,be,"Initial handshake response via X-HTTP-Initial-Response"),this.K=!0,gr(this,be);else{this.o=!1,this.s=3,we(12),Nr(this),xr(this);break e}}if(this.P){be=!0;let Ol;for(;!this.J&&this.C<Fr.length;)if(Ol=Lt(this,Fr),Ol==ut){gs==4&&(this.s=4,we(14),be=!1),P(this.i,this.l,null,"[Incomplete Response]");break}else if(Ol==et){this.s=4,we(15),P(this.i,this.l,Fr,"[Invalid Chunk]"),be=!1;break}else P(this.i,this.l,Ol,null),gr(this,Ol);if(Bt(this)&&this.C!=0&&(this.h.g=this.h.g.slice(this.C),this.C=0),gs!=4||Fr.length!=0||this.h.h||(this.s=1,we(16),be=!1),this.o=this.o&&be,!be)P(this.i,this.l,Fr,"[Invalid Chunked Response]"),Nr(this),xr(this);else if(0<Fr.length&&!this.W){this.W=!0;var Sa=this.j;Sa.g==this&&Sa.ba&&!Sa.M&&(Sa.j.info("Great, no buffering proxy detected. Bytes received: "+Fr.length),nn(Sa),Sa.M=!0,we(11))}}else P(this.i,this.l,Fr,null),gr(this,Fr);gs==4&&Nr(this),this.o&&!this.J&&(gs==4?Vn(this.j,this):(this.o=!1,Be(this)))}else GA(this.g),be==400&&0<Fr.indexOf("Unknown SID")?(this.s=3,we(12)):(this.s=0,we(13)),Nr(this),xr(this)}}}catch{}finally{}};function Bt(C){return C.g?C.u=="GET"&&C.L!=2&&C.j.Ca:!1}function Lt(C,Z){var be=C.C,Xe=Z.indexOf(`
`,be);return Xe==-1?ut:(be=Number(Z.substring(be,Xe)),isNaN(be)?et:(Xe+=1,Xe+be>Z.length?ut:(Z=Z.slice(Xe,Xe+be),C.C=Xe+be,Z)))}rt.prototype.cancel=function(){this.J=!0,Nr(this)};function Be(C){C.S=Date.now()+C.I,vt(C,C.I)}function vt(C,Z){if(C.B!=null)throw Error("WatchDog timer not null");C.B=Fe(A(C.ba,C),Z)}function hr(C){C.B&&(l.clearTimeout(C.B),C.B=null)}rt.prototype.ba=function(){this.B=null;const C=Date.now();0<=C-this.S?(R(this.i,this.A),this.L!=2&&(nt(),we(17)),Nr(this),this.s=2,xr(this)):vt(this,this.S-C)};function xr(C){C.j.G==0||C.J||Vn(C.j,C)}function Nr(C){hr(C);var Z=C.M;Z&&typeof Z.ma=="function"&&Z.ma(),C.M=null,ue(C.U),C.g&&(Z=C.g,C.g=null,Z.abort(),Z.ma())}function gr(C,Z){try{var be=C.j;if(be.G!=0&&(be.g==C||Qr(be.h,C))){if(!C.K&&Qr(be.h,C)&&be.G==3){try{var Xe=be.Da.g.parse(Z)}catch{Xe=null}if(Array.isArray(Xe)&&Xe.length==3){var Ft=Xe;if(Ft[0]==0){e:if(!be.u){if(be.g)if(be.g.F+3e3<C.F)Bn(be),co(be);else break e;vr(be),we(18)}}else be.za=Ft[1],0<be.za-be.T&&37500>Ft[2]&&be.F&&be.v==0&&!be.C&&(be.C=Fe(A(be.Za,be),6e3));if(1>=en(be.h)&&be.ca){try{be.ca()}catch{}be.ca=void 0}}else ka(be,11)}else if((C.K||be.g==C)&&Bn(be),!y(Z))for(Ft=be.Da.g.parse(Z),Z=0;Z<Ft.length;Z++){let ra=Ft[Z];if(be.T=ra[0],ra=ra[1],be.G==2)if(ra[0]=="c"){be.K=ra[1],be.ia=ra[2];const Sa=ra[3];Sa!=null&&(be.la=Sa,be.j.info("VER="+be.la));const gs=ra[4];gs!=null&&(be.Aa=gs,be.j.info("SVER="+be.Aa));const hu=ra[5];hu!=null&&typeof hu=="number"&&0<hu&&(Xe=1.5*hu,be.L=Xe,be.j.info("backChannelRequestTimeoutMs_="+Xe)),Xe=be;const Ol=C.g;if(Ol){const ol=Ol.g?Ol.g.getResponseHeader("X-Client-Wire-Protocol"):null;if(ol){var qt=Xe.h;qt.g||ol.indexOf("spdy")==-1&&ol.indexOf("quic")==-1&&ol.indexOf("h2")==-1||(qt.j=qt.l,qt.g=new Set,qt.h&&(wr(qt,qt.h),qt.h=null))}if(Xe.D){const $d=Ol.g?Ol.g.getResponseHeader("X-HTTP-Session-Id"):null;$d&&(Xe.ya=$d,He(Xe.I,Xe.D,$d))}}be.G=3,be.l&&be.l.ua(),be.ba&&(be.R=Date.now()-C.F,be.j.info("Handshake RTT: "+be.R+"ms")),Xe=be;var Fr=C;if(Xe.qa=Va(Xe,Xe.J?Xe.ia:null,Xe.W),Fr.K){Or(Xe.h,Fr);var ma=Fr,ei=Xe.L;ei&&(ma.I=ei),ma.B&&(hr(ma),Be(ma)),Xe.g=Fr}else lr(Xe);0<be.i.length&&Q(be)}else ra[0]!="stop"&&ra[0]!="close"||ka(be,7);else be.G==3&&(ra[0]=="stop"||ra[0]=="close"?ra[0]=="stop"?ka(be,7):Bf(be):ra[0]!="noop"&&be.l&&be.l.ta(ra),be.v=0)}}nt(4)}catch{}}var _r=class{constructor(C,Z){this.g=C,this.map=Z}};function Zr(C){this.l=C||10,l.PerformanceNavigationTiming?(C=l.performance.getEntriesByType("navigation"),C=0<C.length&&(C[0].nextHopProtocol=="hq"||C[0].nextHopProtocol=="h2")):C=!!(l.chrome&&l.chrome.loadTimes&&l.chrome.loadTimes()&&l.chrome.loadTimes().wasFetchedViaSpdy),this.j=C?this.l:1,this.g=null,1<this.j&&(this.g=new Set),this.h=null,this.i=[]}function Nn(C){return C.h?!0:C.g?C.g.size>=C.j:!1}function en(C){return C.h?1:C.g?C.g.size:0}function Qr(C,Z){return C.h?C.h==Z:C.g?C.g.has(Z):!1}function wr(C,Z){C.g?C.g.add(Z):C.h=Z}function Or(C,Z){C.h&&C.h==Z?C.h=null:C.g&&C.g.has(Z)&&C.g.delete(Z)}Zr.prototype.cancel=function(){if(this.i=$r(this),this.h)this.h.cancel(),this.h=null;else if(this.g&&this.g.size!==0){for(const C of this.g.values())C.cancel();this.g.clear()}};function $r(C){if(C.h!=null)return C.i.concat(C.h.D);if(C.g!=null&&C.g.size!==0){let Z=C.i;for(const be of C.g.values())Z=Z.concat(be.D);return Z}return p(C.i)}function mr(C){if(C.V&&typeof C.V=="function")return C.V();if(typeof Map<"u"&&C instanceof Map||typeof Set<"u"&&C instanceof Set)return Array.from(C.values());if(typeof C=="string")return C.split("");if(c(C)){for(var Z=[],be=C.length,Xe=0;Xe<be;Xe++)Z.push(C[Xe]);return Z}Z=[],be=0;for(Xe in C)Z[be++]=C[Xe];return Z}function Kr(C){if(C.na&&typeof C.na=="function")return C.na();if(!C.V||typeof C.V!="function"){if(typeof Map<"u"&&C instanceof Map)return Array.from(C.keys());if(!(typeof Set<"u"&&C instanceof Set)){if(c(C)||typeof C=="string"){var Z=[];C=C.length;for(var be=0;be<C;be++)Z.push(be);return Z}Z=[],be=0;for(const Xe in C)Z[be++]=Xe;return Z}}}function or(C,Z){if(C.forEach&&typeof C.forEach=="function")C.forEach(Z,void 0);else if(c(C)||typeof C=="string")Array.prototype.forEach.call(C,Z,void 0);else for(var be=Kr(C),Xe=mr(C),Ft=Xe.length,qt=0;qt<Ft;qt++)Z.call(void 0,Xe[qt],be&&be[qt],C)}var dt=RegExp("^(?:([^:/?#.]+):)?(?://(?:([^\\\\/?#]*)@)?([^\\\\/?#]*?)(?::([0-9]+))?(?=[\\\\/?#]|$))?([^?#]+)?(?:\\?([^#]*))?(?:#([\\s\\S]*))?$");function er(C,Z){if(C){C=C.split("&");for(var be=0;be<C.length;be++){var Xe=C[be].indexOf("="),Ft=null;if(0<=Xe){var qt=C[be].substring(0,Xe);Ft=C[be].substring(Xe+1)}else qt=C[be];Z(qt,Ft?decodeURIComponent(Ft.replace(/\+/g," ")):"")}}}function Jt(C){if(this.g=this.o=this.j="",this.s=null,this.m=this.l="",this.h=!1,C instanceof Jt){this.h=C.h,tr(this,C.j),this.o=C.o,this.g=C.g,fr(this,C.s),this.l=C.l;var Z=C.i,be=new Zt;be.i=Z.i,Z.g&&(be.g=new Map(Z.g),be.h=Z.h),ne(this,be),this.m=C.m}else C&&(Z=String(C).match(dt))?(this.h=!1,tr(this,Z[1]||"",!0),this.o=Je(Z[2]||""),this.g=Je(Z[3]||"",!0),fr(this,Z[4]),this.l=Je(Z[5]||"",!0),ne(this,Z[6]||"",!0),this.m=Je(Z[7]||"")):(this.h=!1,this.i=new Zt(null,this.h))}Jt.prototype.toString=function(){var C=[],Z=this.j;Z&&C.push(pt(Z,Wt,!0),":");var be=this.g;return(be||Z=="file")&&(C.push("//"),(Z=this.o)&&C.push(pt(Z,Wt,!0),"@"),C.push(encodeURIComponent(String(be)).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),be=this.s,be!=null&&C.push(":",String(be))),(be=this.l)&&(this.g&&be.charAt(0)!="/"&&C.push("/"),C.push(pt(be,be.charAt(0)=="/"?Rt:Xt,!0))),(be=this.i.toString())&&C.push("?",be),(be=this.m)&&C.push("#",pt(be,kr)),C.join("")};function ar(C){return new Jt(C)}function tr(C,Z,be){C.j=be?Je(Z,!0):Z,C.j&&(C.j=C.j.replace(/:$/,""))}function fr(C,Z){if(Z){if(Z=Number(Z),isNaN(Z)||0>Z)throw Error("Bad port number "+Z);C.s=Z}else C.s=null}function ne(C,Z,be){Z instanceof Zt?(C.i=Z,pn(C.i,C.h)):(be||(Z=pt(Z,$t)),C.i=new Zt(Z,C.h))}function He(C,Z,be){C.i.set(Z,be)}function tt(C){return He(C,"zx",Math.floor(2147483648*Math.random()).toString(36)+Math.abs(Math.floor(2147483648*Math.random())^Date.now()).toString(36)),C}function Je(C,Z){return C?Z?decodeURI(C.replace(/%25/g,"%2525")):decodeURIComponent(C):""}function pt(C,Z,be){return typeof C=="string"?(C=encodeURI(C).replace(Z,wt),be&&(C=C.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),C):null}function wt(C){return C=C.charCodeAt(0),"%"+(C>>4&15).toString(16)+(C&15).toString(16)}var Wt=/[#\/\?@]/g,Xt=/[#\?:]/g,Rt=/[#\?]/g,$t=/[#\?@]/g,kr=/#/g;function Zt(C,Z){this.h=this.g=null,this.i=C||null,this.j=!!Z}function Dr(C){C.g||(C.g=new Map,C.h=0,C.i&&er(C.i,function(Z,be){C.add(decodeURIComponent(Z.replace(/\+/g," ")),be)}))}t=Zt.prototype,t.add=function(C,Z){Dr(this),this.i=null,C=Tt(this,C);var be=this.g.get(C);return be||this.g.set(C,be=[]),be.push(Z),this.h+=1,this};function Yr(C,Z){Dr(C),Z=Tt(C,Z),C.g.has(Z)&&(C.i=null,C.h-=C.g.get(Z).length,C.g.delete(Z))}function zr(C,Z){return Dr(C),Z=Tt(C,Z),C.g.has(Z)}t.forEach=function(C,Z){Dr(this),this.g.forEach(function(be,Xe){be.forEach(function(Ft){C.call(Z,Ft,Xe,this)},this)},this)},t.na=function(){Dr(this);const C=Array.from(this.g.values()),Z=Array.from(this.g.keys()),be=[];for(let Xe=0;Xe<Z.length;Xe++){const Ft=C[Xe];for(let qt=0;qt<Ft.length;qt++)be.push(Z[Xe])}return be},t.V=function(C){Dr(this);let Z=[];if(typeof C=="string")zr(this,C)&&(Z=Z.concat(this.g.get(Tt(this,C))));else{C=Array.from(this.g.values());for(let be=0;be<C.length;be++)Z=Z.concat(C[be])}return Z},t.set=function(C,Z){return Dr(this),this.i=null,C=Tt(this,C),zr(this,C)&&(this.h-=this.g.get(C).length),this.g.set(C,[Z]),this.h+=1,this},t.get=function(C,Z){return C?(C=this.V(C),0<C.length?String(C[0]):Z):Z};function Er(C,Z,be){Yr(C,Z),0<be.length&&(C.i=null,C.g.set(Tt(C,Z),p(be)),C.h+=be.length)}t.toString=function(){if(this.i)return this.i;if(!this.g)return"";const C=[],Z=Array.from(this.g.keys());for(var be=0;be<Z.length;be++){var Xe=Z[be];const qt=encodeURIComponent(String(Xe)),Fr=this.V(Xe);for(Xe=0;Xe<Fr.length;Xe++){var Ft=qt;Fr[Xe]!==""&&(Ft+="="+encodeURIComponent(String(Fr[Xe]))),C.push(Ft)}}return this.i=C.join("&")};function Tt(C,Z){return Z=String(Z),C.j&&(Z=Z.toLowerCase()),Z}function pn(C,Z){Z&&!C.j&&(Dr(C),C.i=null,C.g.forEach(function(be,Xe){var Ft=Xe.toLowerCase();Xe!=Ft&&(Yr(this,Xe),Er(this,Ft,be))},C)),C.j=Z}function un(C,Z){const be=new ce;if(l.Image){const Xe=new Image;Xe.onload=h(pr,be,"TestLoadImage: loaded",!0,Z,Xe),Xe.onerror=h(pr,be,"TestLoadImage: error",!1,Z,Xe),Xe.onabort=h(pr,be,"TestLoadImage: abort",!1,Z,Xe),Xe.ontimeout=h(pr,be,"TestLoadImage: timeout",!1,Z,Xe),l.setTimeout(function(){Xe.ontimeout&&Xe.ontimeout()},1e4),Xe.src=C}else Z(!1)}function Ir(C,Z){const be=new ce,Xe=new AbortController,Ft=setTimeout(()=>{Xe.abort(),pr(be,"TestPingServer: timeout",!1,Z)},1e4);fetch(C,{signal:Xe.signal}).then(qt=>{clearTimeout(Ft),qt.ok?pr(be,"TestPingServer: ok",!0,Z):pr(be,"TestPingServer: server error",!1,Z)}).catch(()=>{clearTimeout(Ft),pr(be,"TestPingServer: error",!1,Z)})}function pr(C,Z,be,Xe,Ft){try{Ft&&(Ft.onload=null,Ft.onerror=null,Ft.onabort=null,Ft.ontimeout=null),Xe(be)}catch{}}function jr(){this.g=new ht}function Fn(C,Z,be){const Xe=be||"";try{or(C,function(Ft,qt){let Fr=Ft;u(Ft)&&(Fr=Le(Ft)),Z.push(Xe+qt+"="+encodeURIComponent(Fr))})}catch(Ft){throw Z.push(Xe+"type="+encodeURIComponent("_badmap")),Ft}}function Sn(C){this.l=C.Ub||null,this.j=C.eb||!1}m(Sn,xe),Sn.prototype.g=function(){return new yn(this.l,this.j)},Sn.prototype.i=function(C){return function(){return C}}({});function yn(C,Z){St.call(this),this.D=C,this.o=Z,this.m=void 0,this.status=this.readyState=0,this.responseType=this.responseText=this.response=this.statusText="",this.onreadystatechange=null,this.u=new Headers,this.h=null,this.B="GET",this.A="",this.g=!1,this.v=this.j=this.l=null}m(yn,St),t=yn.prototype,t.open=function(C,Z){if(this.readyState!=0)throw this.abort(),Error("Error reopening a connection");this.B=C,this.A=Z,this.readyState=1,Wi(this)},t.send=function(C){if(this.readyState!=1)throw this.abort(),Error("need to call open() first. ");this.g=!0;const Z={headers:this.u,method:this.B,credentials:this.m,cache:void 0};C&&(Z.body=C),(this.D||l).fetch(new Request(this.A,Z)).then(this.Sa.bind(this),this.ga.bind(this))},t.abort=function(){this.response=this.responseText="",this.u=new Headers,this.status=0,this.j&&this.j.cancel("Request was aborted.").catch(()=>{}),1<=this.readyState&&this.g&&this.readyState!=4&&(this.g=!1,ga(this)),this.readyState=0},t.Sa=function(C){if(this.g&&(this.l=C,this.h||(this.status=this.l.status,this.statusText=this.l.statusText,this.h=C.headers,this.readyState=2,Wi(this)),this.g&&(this.readyState=3,Wi(this),this.g)))if(this.responseType==="arraybuffer")C.arrayBuffer().then(this.Qa.bind(this),this.ga.bind(this));else if(typeof l.ReadableStream<"u"&&"body"in C){if(this.j=C.body.getReader(),this.o){if(this.responseType)throw Error('responseType must be empty for "streamBinaryChunks" mode responses.');this.response=[]}else this.response=this.responseText="",this.v=new TextDecoder;ua(this)}else C.text().then(this.Ra.bind(this),this.ga.bind(this))};function ua(C){C.j.read().then(C.Pa.bind(C)).catch(C.ga.bind(C))}t.Pa=function(C){if(this.g){if(this.o&&C.value)this.response.push(C.value);else if(!this.o){var Z=C.value?C.value:new Uint8Array(0);(Z=this.v.decode(Z,{stream:!C.done}))&&(this.response=this.responseText+=Z)}C.done?ga(this):Wi(this),this.readyState==3&&ua(this)}},t.Ra=function(C){this.g&&(this.response=this.responseText=C,ga(this))},t.Qa=function(C){this.g&&(this.response=C,ga(this))},t.ga=function(){this.g&&ga(this)};function ga(C){C.readyState=4,C.l=null,C.j=null,C.v=null,Wi(C)}t.setRequestHeader=function(C,Z){this.u.append(C,Z)},t.getResponseHeader=function(C){return this.h&&this.h.get(C.toLowerCase())||""},t.getAllResponseHeaders=function(){if(!this.h)return"";const C=[],Z=this.h.entries();for(var be=Z.next();!be.done;)be=be.value,C.push(be[0]+": "+be[1]),be=Z.next();return C.join(`\r
`)};function Wi(C){C.onreadystatechange&&C.onreadystatechange.call(C)}Object.defineProperty(yn.prototype,"withCredentials",{get:function(){return this.m==="include"},set:function(C){this.m=C?"include":"same-origin"}});function Xi(C){let Z="";return I(C,function(be,Xe){Z+=Xe,Z+=":",Z+=be,Z+=`\r
`}),Z}function kl(C,Z,be){e:{for(Xe in be){var Xe=!1;break e}Xe=!0}Xe||(be=Xi(be),typeof C=="string"?be!=null&&encodeURIComponent(String(be)):He(C,Z,be))}function xa(C){St.call(this),this.headers=new Map,this.o=C||null,this.h=!1,this.v=this.g=null,this.D="",this.m=0,this.l="",this.j=this.B=this.u=this.A=!1,this.I=null,this.H="",this.J=!1}m(xa,St);var Qn=/^https?$/i,du=["POST","PUT"];t=xa.prototype,t.Ha=function(C){this.J=C},t.ea=function(C,Z,be,Xe){if(this.g)throw Error("[goog.net.XhrIo] Object is active with another request="+this.D+"; newUri="+C);Z=Z?Z.toUpperCase():"GET",this.D=C,this.l="",this.m=0,this.A=!1,this.h=!0,this.g=this.o?this.o.g():de.g(),this.v=this.o?Ae(this.o):Ae(de),this.g.onreadystatechange=A(this.Ea,this);try{this.B=!0,this.g.open(Z,String(C),!0),this.B=!1}catch(qt){Fl(this,qt);return}if(C=be||"",be=new Map(this.headers),Xe)if(Object.getPrototypeOf(Xe)===Object.prototype)for(var Ft in Xe)be.set(Ft,Xe[Ft]);else if(typeof Xe.keys=="function"&&typeof Xe.get=="function")for(const qt of Xe.keys())be.set(qt,Xe.get(qt));else throw Error("Unknown input type for opt_headers: "+String(Xe));Xe=Array.from(be.keys()).find(qt=>qt.toLowerCase()=="content-type"),Ft=l.FormData&&C instanceof l.FormData,!(0<=Array.prototype.indexOf.call(du,Z,void 0))||Xe||Ft||be.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8");for(const[qt,Fr]of be)this.g.setRequestHeader(qt,Fr);this.H&&(this.g.responseType=this.H),"withCredentials"in this.g&&this.g.withCredentials!==this.J&&(this.g.withCredentials=this.J);try{uc(this),this.u=!0,this.g.send(C),this.u=!1}catch(qt){Fl(this,qt)}};function Fl(C,Z){C.h=!1,C.g&&(C.j=!0,C.g.abort(),C.j=!1),C.l=Z,C.m=5,Yi(C),Rc(C)}function Yi(C){C.A||(C.A=!0,Ve(C,"complete"),Ve(C,"error"))}t.abort=function(C){this.g&&this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1,this.m=C||7,Ve(this,"complete"),Ve(this,"abort"),Rc(this))},t.N=function(){this.g&&(this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1),Rc(this,!0)),xa.aa.N.call(this)},t.Ea=function(){this.s||(this.B||this.u||this.j?Dc(this):this.bb())},t.bb=function(){Dc(this)};function Dc(C){if(C.h&&typeof o<"u"&&(!C.v[1]||sl(C)!=4||C.Z()!=2)){if(C.u&&sl(C)==4)qe(C.Ea,0,C);else if(Ve(C,"readystatechange"),sl(C)==4){C.h=!1;try{const Fr=C.Z();e:switch(Fr){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var Z=!0;break e;default:Z=!1}var be;if(!(be=Z)){var Xe;if(Xe=Fr===0){var Ft=String(C.D).match(dt)[1]||null;!Ft&&l.self&&l.self.location&&(Ft=l.self.location.protocol.slice(0,-1)),Xe=!Qn.test(Ft?Ft.toLowerCase():"")}be=Xe}if(be)Ve(C,"complete"),Ve(C,"success");else{C.m=6;try{var qt=2<sl(C)?C.g.statusText:""}catch{qt=""}C.l=qt+" ["+C.Z()+"]",Yi(C)}}finally{Rc(C)}}}}function Rc(C,Z){if(C.g){uc(C);const be=C.g,Xe=C.v[0]?()=>{}:null;C.g=null,C.v=null,Z||Ve(C,"ready");try{be.onreadystatechange=Xe}catch{}}}function uc(C){C.I&&(l.clearTimeout(C.I),C.I=null)}t.isActive=function(){return!!this.g};function sl(C){return C.g?C.g.readyState:0}t.Z=function(){try{return 2<sl(this)?this.g.status:-1}catch{return-1}},t.oa=function(){try{return this.g?this.g.responseText:""}catch{return""}},t.Oa=function(C){if(this.g){var Z=this.g.responseText;return C&&Z.indexOf(C)==0&&(Z=Z.substring(C.length)),ct(Z)}};function fu(C){try{if(!C.g)return null;if("response"in C.g)return C.g.response;switch(C.H){case"":case"text":return C.g.responseText;case"arraybuffer":if("mozResponseArrayBuffer"in C.g)return C.g.mozResponseArrayBuffer}return null}catch{return null}}function GA(C){const Z={};C=(C.g&&2<=sl(C)&&C.g.getAllResponseHeaders()||"").split(`\r
`);for(let Xe=0;Xe<C.length;Xe++){if(y(C[Xe]))continue;var be=k(C[Xe]);const Ft=be[0];if(be=be[1],typeof be!="string")continue;be=be.trim();const qt=Z[Ft]||[];Z[Ft]=qt,qt.push(be)}_(Z,function(Xe){return Xe.join(", ")})}t.Ba=function(){return this.m},t.Ka=function(){return typeof this.l=="string"?this.l:String(this.l)};function il(C,Z,be){return be&&be.internalChannelParams&&be.internalChannelParams[C]||Z}function Mc(C){this.Aa=0,this.i=[],this.j=new ce,this.ia=this.qa=this.I=this.W=this.g=this.ya=this.D=this.H=this.m=this.S=this.o=null,this.Ya=this.U=0,this.Va=il("failFast",!1,C),this.F=this.C=this.u=this.s=this.l=null,this.X=!0,this.za=this.T=-1,this.Y=this.v=this.B=0,this.Ta=il("baseRetryDelayMs",5e3,C),this.cb=il("retryDelaySeedMs",1e4,C),this.Wa=il("forwardChannelMaxRetries",2,C),this.wa=il("forwardChannelRequestTimeoutMs",2e4,C),this.pa=C&&C.xmlHttpFactory||void 0,this.Xa=C&&C.Tb||void 0,this.Ca=C&&C.useFetchStreams||!1,this.L=void 0,this.J=C&&C.supportsCrossDomainXhr||!1,this.K="",this.h=new Zr(C&&C.concurrentRequestLimit),this.Da=new jr,this.P=C&&C.fastHandshake||!1,this.O=C&&C.encodeInitMessageHeaders||!1,this.P&&this.O&&(this.O=!1),this.Ua=C&&C.Rb||!1,C&&C.xa&&this.j.xa(),C&&C.forceLongPolling&&(this.X=!1),this.ba=!this.P&&this.X&&C&&C.detectBufferingProxy||!1,this.ja=void 0,C&&C.longPollingTimeout&&0<C.longPollingTimeout&&(this.ja=C.longPollingTimeout),this.ca=void 0,this.R=0,this.M=!1,this.ka=this.A=null}t=Mc.prototype,t.la=8,t.G=1,t.connect=function(C,Z,be,Xe){we(0),this.W=C,this.H=Z||{},be&&Xe!==void 0&&(this.H.OSID=be,this.H.OAID=Xe),this.F=this.X,this.I=Va(this,null,this.W),Q(this)};function Bf(C){if(zu(C),C.G==3){var Z=C.U++,be=ar(C.I);if(He(be,"SID",C.K),He(be,"RID",Z),He(be,"TYPE","terminate"),gt(C,be),Z=new rt(C,C.j,Z),Z.L=2,Z.v=tt(ar(be)),be=!1,l.navigator&&l.navigator.sendBeacon)try{be=l.navigator.sendBeacon(Z.v.toString(),"")}catch{}!be&&l.Image&&(new Image().src=Z.v,be=!0),be||(Z.g=mi(Z.j,null),Z.g.ea(Z.v)),Z.F=Date.now(),Be(Z)}Ys(C)}function co(C){C.g&&(nn(C),C.g.cancel(),C.g=null)}function zu(C){co(C),C.u&&(l.clearTimeout(C.u),C.u=null),Bn(C),C.h.cancel(),C.s&&(typeof C.s=="number"&&l.clearTimeout(C.s),C.s=null)}function Q(C){if(!Nn(C.h)&&!C.s){C.s=!0;var Z=C.Ga;he||Pe(),ve||(he(),ve=!0),ae.add(Z,C),C.B=0}}function Ie(C,Z){return en(C.h)>=C.h.j-(C.s?1:0)?!1:C.s?(C.i=Z.D.concat(C.i),!0):C.G==1||C.G==2||C.B>=(C.Va?0:C.Wa)?!1:(C.s=Fe(A(C.Ga,C,Z),da(C,C.B)),C.B++,!0)}t.Ga=function(C){if(this.s)if(this.s=null,this.G==1){if(!C){this.U=Math.floor(1e5*Math.random()),C=this.U++;const Ft=new rt(this,this.j,C);let qt=this.o;if(this.S&&(qt?(qt=S(qt),T(qt,this.S)):qt=this.S),this.m!==null||this.O||(Ft.H=qt,qt=null),this.P)e:{for(var Z=0,be=0;be<this.i.length;be++){t:{var Xe=this.i[be];if("__data__"in Xe.map&&(Xe=Xe.map.__data__,typeof Xe=="string")){Xe=Xe.length;break t}Xe=void 0}if(Xe===void 0)break;if(Z+=Xe,4096<Z){Z=be;break e}if(Z===4096||be===this.i.length-1){Z=be+1;break e}}Z=1e3}else Z=1e3;Z=Pt(this,Ft,Z),be=ar(this.I),He(be,"RID",C),He(be,"CVER",22),this.D&&He(be,"X-HTTP-Session-Id",this.D),gt(this,be),qt&&(this.O?Z="headers="+encodeURIComponent(String(Xi(qt)))+"&"+Z:this.m&&kl(be,this.m,qt)),wr(this.h,Ft),this.Ua&&He(be,"TYPE","init"),this.P?(He(be,"$req",Z),He(be,"SID","null"),Ft.T=!0,Ot(Ft,be,null)):Ot(Ft,be,Z),this.G=2}}else this.G==3&&(C?st(this,C):this.i.length==0||Nn(this.h)||st(this))};function st(C,Z){var be;Z?be=Z.l:be=C.U++;const Xe=ar(C.I);He(Xe,"SID",C.K),He(Xe,"RID",be),He(Xe,"AID",C.T),gt(C,Xe),C.m&&C.o&&kl(Xe,C.m,C.o),be=new rt(C,C.j,be,C.B+1),C.m===null&&(be.H=C.o),Z&&(C.i=Z.D.concat(C.i)),Z=Pt(C,be,1e3),be.I=Math.round(.5*C.wa)+Math.round(.5*C.wa*Math.random()),wr(C.h,be),Ot(be,Xe,Z)}function gt(C,Z){C.H&&I(C.H,function(be,Xe){He(Z,Xe,be)}),C.l&&or({},function(be,Xe){He(Z,Xe,be)})}function Pt(C,Z,be){be=Math.min(C.i.length,be);var Xe=C.l?A(C.l.Na,C.l,C):null;e:{var Ft=C.i;let qt=-1;for(;;){const Fr=["count="+be];qt==-1?0<be?(qt=Ft[0].g,Fr.push("ofs="+qt)):qt=0:Fr.push("ofs="+qt);let ma=!0;for(let ei=0;ei<be;ei++){let ra=Ft[ei].g;const Sa=Ft[ei].map;if(ra-=qt,0>ra)qt=Math.max(0,Ft[ei].g-100),ma=!1;else try{Fn(Sa,Fr,"req"+ra+"_")}catch{Xe&&Xe(Sa)}}if(ma){Xe=Fr.join("&");break e}}}return C=C.i.splice(0,be),Z.D=C,Xe}function lr(C){if(!C.g&&!C.u){C.Y=1;var Z=C.Fa;he||Pe(),ve||(he(),ve=!0),ae.add(Z,C),C.v=0}}function vr(C){return C.g||C.u||3<=C.v?!1:(C.Y++,C.u=Fe(A(C.Fa,C),da(C,C.v)),C.v++,!0)}t.Fa=function(){if(this.u=null,dn(this),this.ba&&!(this.M||this.g==null||0>=this.R)){var C=2*this.R;this.j.info("BP detection timer enabled: "+C),this.A=Fe(A(this.ab,this),C)}},t.ab=function(){this.A&&(this.A=null,this.j.info("BP detection timeout reached."),this.j.info("Buffering proxy detected and switch to long-polling!"),this.F=!1,this.M=!0,we(10),co(this),dn(this))};function nn(C){C.A!=null&&(l.clearTimeout(C.A),C.A=null)}function dn(C){C.g=new rt(C,C.j,"rpc",C.Y),C.m===null&&(C.g.H=C.o),C.g.O=0;var Z=ar(C.qa);He(Z,"RID","rpc"),He(Z,"SID",C.K),He(Z,"AID",C.T),He(Z,"CI",C.F?"0":"1"),!C.F&&C.ja&&He(Z,"TO",C.ja),He(Z,"TYPE","xmlhttp"),gt(C,Z),C.m&&C.o&&kl(Z,C.m,C.o),C.L&&(C.g.I=C.L);var be=C.g;C=C.ia,be.L=1,be.v=tt(ar(Z)),be.m=null,be.P=!0,zt(be,C)}t.Za=function(){this.C!=null&&(this.C=null,co(this),vr(this),we(19))};function Bn(C){C.C!=null&&(l.clearTimeout(C.C),C.C=null)}function Vn(C,Z){var be=null;if(C.g==Z){Bn(C),nn(C),C.g=null;var Xe=2}else if(Qr(C.h,Z))be=Z.D,Or(C.h,Z),Xe=1;else return;if(C.G!=0){if(Z.o)if(Xe==1){be=Z.m?Z.m.length:0,Z=Date.now()-Z.F;var Ft=C.B;Xe=Et(),Ve(Xe,new oe(Xe,be)),Q(C)}else lr(C);else if(Ft=Z.s,Ft==3||Ft==0&&0<Z.X||!(Xe==1&&Ie(C,Z)||Xe==2&&vr(C)))switch(be&&0<be.length&&(Z=C.h,Z.i=Z.i.concat(be)),Ft){case 1:ka(C,5);break;case 4:ka(C,10);break;case 3:ka(C,6);break;default:ka(C,2)}}}function da(C,Z){let be=C.Ta+Math.floor(Math.random()*C.cb);return C.isActive()||(be*=2),be*Z}function ka(C,Z){if(C.j.info("Error code "+Z),Z==2){var be=A(C.fb,C),Xe=C.Xa;const Ft=!Xe;Xe=new Jt(Xe||"//www.google.com/images/cleardot.gif"),l.location&&l.location.protocol=="http"||tr(Xe,"https"),tt(Xe),Ft?un(Xe.toString(),be):Ir(Xe.toString(),be)}else we(2);C.G=0,C.l&&C.l.sa(Z),Ys(C),zu(C)}t.fb=function(C){C?(this.j.info("Successfully pinged google.com"),we(2)):(this.j.info("Failed to ping google.com"),we(1))};function Ys(C){if(C.G=0,C.ka=[],C.l){const Z=$r(C.h);(Z.length!=0||C.i.length!=0)&&(x(C.ka,Z),x(C.ka,C.i),C.h.i.length=0,p(C.i),C.i.length=0),C.l.ra()}}function Va(C,Z,be){var Xe=be instanceof Jt?ar(be):new Jt(be);if(Xe.g!="")Z&&(Xe.g=Z+"."+Xe.g),fr(Xe,Xe.s);else{var Ft=l.location;Xe=Ft.protocol,Z=Z?Z+"."+Ft.hostname:Ft.hostname,Ft=+Ft.port;var qt=new Jt(null);Xe&&tr(qt,Xe),Z&&(qt.g=Z),Ft&&fr(qt,Ft),be&&(qt.l=be),Xe=qt}return be=C.D,Z=C.ya,be&&Z&&He(Xe,be,Z),He(Xe,"VER",C.la),gt(C,Xe),Xe}function mi(C,Z,be){if(Z&&!C.J)throw Error("Can't create secondary domain capable XhrIo object.");return Z=C.Ca&&!C.pa?new xa(new Sn({eb:be})):new xa(C.pa),Z.Ha(C.J),Z}t.isActive=function(){return!!this.l&&this.l.isActive(this)};function Js(){}t=Js.prototype,t.ua=function(){},t.ta=function(){},t.sa=function(){},t.ra=function(){},t.isActive=function(){return!0},t.Na=function(){};function pi(){}pi.prototype.g=function(C,Z){return new Zs(C,Z)};function Zs(C,Z){St.call(this),this.g=new Mc(Z),this.l=C,this.h=Z&&Z.messageUrlParams||null,C=Z&&Z.messageHeaders||null,Z&&Z.clientProtocolHeaderRequired&&(C?C["X-Client-Protocol"]="webchannel":C={"X-Client-Protocol":"webchannel"}),this.g.o=C,C=Z&&Z.initMessageHeaders||null,Z&&Z.messageContentType&&(C?C["X-WebChannel-Content-Type"]=Z.messageContentType:C={"X-WebChannel-Content-Type":Z.messageContentType}),Z&&Z.va&&(C?C["X-WebChannel-Client-Profile"]=Z.va:C={"X-WebChannel-Client-Profile":Z.va}),this.g.S=C,(C=Z&&Z.Sb)&&!y(C)&&(this.g.m=C),this.v=Z&&Z.supportsCrossDomainXhr||!1,this.u=Z&&Z.sendRawJson||!1,(Z=Z&&Z.httpSessionIdParam)&&!y(Z)&&(this.g.D=Z,C=this.h,C!==null&&Z in C&&(C=this.h,Z in C&&delete C[Z])),this.j=new Xu(this)}m(Zs,St),Zs.prototype.m=function(){this.g.l=this.j,this.v&&(this.g.J=!0),this.g.connect(this.l,this.h||void 0)},Zs.prototype.close=function(){Bf(this.g)},Zs.prototype.o=function(C){var Z=this.g;if(typeof C=="string"){var be={};be.__data__=C,C=be}else this.u&&(be={},be.__data__=Le(C),C=be);Z.i.push(new _r(Z.Ya++,C)),Z.G==3&&Q(Z)},Zs.prototype.N=function(){this.g.l=null,delete this.j,Bf(this.g),delete this.g,Zs.aa.N.call(this)};function Lc(C){Ne.call(this),C.__headers__&&(this.headers=C.__headers__,this.statusCode=C.__status__,delete C.__headers__,delete C.__status__);var Z=C.__sm__;if(Z){e:{for(const be in Z){C=be;break e}C=void 0}(this.i=C)&&(C=this.i,Z=Z!==null&&C in Z?Z[C]:void 0),this.data=Z}else this.data=C}m(Lc,Ne);function Wu(){De.call(this),this.status=1}m(Wu,De);function Xu(C){this.g=C}m(Xu,Js),Xu.prototype.ua=function(){Ve(this.g,"a")},Xu.prototype.ta=function(C){Ve(this.g,new Lc(C))},Xu.prototype.sa=function(C){Ve(this.g,new Wu)},Xu.prototype.ra=function(){Ve(this.g,"b")},pi.prototype.createWebChannel=pi.prototype.g,Zs.prototype.send=Zs.prototype.o,Zs.prototype.open=Zs.prototype.m,Zs.prototype.close=Zs.prototype.close,kJ=function(){return new pi},TJ=function(){return Et()},BJ=xt,VT={mb:0,pb:1,qb:2,Jb:3,Ob:4,Lb:5,Mb:6,Kb:7,Ib:8,Nb:9,PROXY:10,NOPROXY:11,Gb:12,Cb:13,Db:14,Bb:15,Eb:16,Fb:17,ib:18,hb:19,jb:20},K.NO_ERROR=0,K.TIMEOUT=8,K.HTTP_ERROR=6,nE=K,re.COMPLETE="complete",PJ=re,Re.EventType=lt,lt.OPEN="a",lt.CLOSE="b",lt.ERROR="c",lt.MESSAGE="d",St.prototype.listen=St.prototype.K,Ry=Re,xa.prototype.listenOnce=xa.prototype.L,xa.prototype.getLastError=xa.prototype.Ka,xa.prototype.getLastErrorCode=xa.prototype.Ba,xa.prototype.getStatus=xa.prototype.Z,xa.prototype.getResponseJson=xa.prototype.Oa,xa.prototype.getResponseText=xa.prototype.oa,xa.prototype.send=xa.prototype.ea,xa.prototype.setWithCredentials=xa.prototype.Ha,jJ=xa}).apply(typeof eC<"u"?eC:typeof self<"u"?self:typeof window<"u"?window:{});const m7="@firebase/firestore";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class wl{constructor(e){this.uid=e}isAuthenticated(){return this.uid!=null}toKey(){return this.isAuthenticated()?"uid:"+this.uid:"anonymous-user"}isEqual(e){return e.uid===this.uid}}wl.UNAUTHENTICATED=new wl(null),wl.GOOGLE_CREDENTIALS=new wl("google-credentials-uid"),wl.FIRST_PARTY=new wl("first-party-uid"),wl.MOCK_USER=new wl("mock-user");/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let o1="10.14.0";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const rg=new CD("@firebase/firestore");function Cx(){return rg.logLevel}function Pr(t,...e){if(rg.logLevel<=ha.DEBUG){const r=e.map(QD);rg.debug(`Firestore (${o1}): ${t}`,...r)}}function Cc(t,...e){if(rg.logLevel<=ha.ERROR){const r=e.map(QD);rg.error(`Firestore (${o1}): ${t}`,...r)}}function gm(t,...e){if(rg.logLevel<=ha.WARN){const r=e.map(QD);rg.warn(`Firestore (${o1}): ${t}`,...r)}}function QD(t){if(typeof t=="string")return t;try{/**
* @license
* Copyright 2020 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/return function(r){return JSON.stringify(r)}(t)}catch{return t}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function cn(t="Unexpected state"){const e=`FIRESTORE (${o1}) INTERNAL ASSERTION FAILED: `+t;throw Cc(e),new Error(e)}function mn(t,e){t||cn()}function Ln(t,e){return t}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ir={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"};class Lr extends BA{constructor(e,r){super(e,r),this.code=e,this.message=r,this.toString=()=>`${this.name}: [code=${this.code}]: ${this.message}`}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class pf{constructor(){this.promise=new Promise((e,r)=>{this.resolve=e,this.reject=r})}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class FJ{constructor(e,r){this.user=r,this.type="OAuth",this.headers=new Map,this.headers.set("Authorization",`Bearer ${e}`)}}class OJ{getToken(){return Promise.resolve(null)}invalidateToken(){}start(e,r){e.enqueueRetryable(()=>r(wl.UNAUTHENTICATED))}shutdown(){}}class kxe{constructor(e){this.token=e,this.changeListener=null}getToken(){return Promise.resolve(this.token)}invalidateToken(){}start(e,r){this.changeListener=r,e.enqueueRetryable(()=>r(this.token.user))}shutdown(){this.changeListener=null}}class Fxe{constructor(e){this.t=e,this.currentUser=wl.UNAUTHENTICATED,this.i=0,this.forceRefresh=!1,this.auth=null}start(e,r){mn(this.o===void 0);let n=this.i;const a=c=>this.i!==n?(n=this.i,r(c)):Promise.resolve();let s=new pf;this.o=()=>{this.i++,this.currentUser=this.u(),s.resolve(),s=new pf,e.enqueueRetryable(()=>a(this.currentUser))};const o=()=>{const c=s;e.enqueueRetryable(async()=>{await c.promise,await a(this.currentUser)})},l=c=>{Pr("FirebaseAuthCredentialsProvider","Auth detected"),this.auth=c,this.o&&(this.auth.addAuthTokenListener(this.o),o())};this.t.onInit(c=>l(c)),setTimeout(()=>{if(!this.auth){const c=this.t.getImmediate({optional:!0});c?l(c):(Pr("FirebaseAuthCredentialsProvider","Auth not yet detected"),s.resolve(),s=new pf)}},0),o()}getToken(){const e=this.i,r=this.forceRefresh;return this.forceRefresh=!1,this.auth?this.auth.getToken(r).then(n=>this.i!==e?(Pr("FirebaseAuthCredentialsProvider","getToken aborted due to token change."),this.getToken()):n?(mn(typeof n.accessToken=="string"),new FJ(n.accessToken,this.currentUser)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.auth&&this.o&&this.auth.removeAuthTokenListener(this.o),this.o=void 0}u(){const e=this.auth&&this.auth.getUid();return mn(e===null||typeof e=="string"),new wl(e)}}class Oxe{constructor(e,r,n){this.l=e,this.h=r,this.P=n,this.type="FirstParty",this.user=wl.FIRST_PARTY,this.I=new Map}T(){return this.P?this.P():null}get headers(){this.I.set("X-Goog-AuthUser",this.l);const e=this.T();return e&&this.I.set("Authorization",e),this.h&&this.I.set("X-Goog-Iam-Authorization-Token",this.h),this.I}}class Dxe{constructor(e,r,n){this.l=e,this.h=r,this.P=n}getToken(){return Promise.resolve(new Oxe(this.l,this.h,this.P))}start(e,r){e.enqueueRetryable(()=>r(wl.FIRST_PARTY))}shutdown(){}invalidateToken(){}}class Rxe{constructor(e){this.value=e,this.type="AppCheck",this.headers=new Map,e&&e.length>0&&this.headers.set("x-firebase-appcheck",this.value)}}class Mxe{constructor(e){this.A=e,this.forceRefresh=!1,this.appCheck=null,this.R=null}start(e,r){mn(this.o===void 0);const n=s=>{s.error!=null&&Pr("FirebaseAppCheckTokenProvider",`Error getting App Check token; using placeholder token instead. Error: ${s.error.message}`);const o=s.token!==this.R;return this.R=s.token,Pr("FirebaseAppCheckTokenProvider",`Received ${o?"new":"existing"} token.`),o?r(s.token):Promise.resolve()};this.o=s=>{e.enqueueRetryable(()=>n(s))};const a=s=>{Pr("FirebaseAppCheckTokenProvider","AppCheck detected"),this.appCheck=s,this.o&&this.appCheck.addTokenListener(this.o)};this.A.onInit(s=>a(s)),setTimeout(()=>{if(!this.appCheck){const s=this.A.getImmediate({optional:!0});s?a(s):Pr("FirebaseAppCheckTokenProvider","AppCheck not yet detected")}},0)}getToken(){const e=this.forceRefresh;return this.forceRefresh=!1,this.appCheck?this.appCheck.getToken(e).then(r=>r?(mn(typeof r.token=="string"),this.R=r.token,new Rxe(r.token)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.appCheck&&this.o&&this.appCheck.removeTokenListener(this.o),this.o=void 0}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Lxe(t){const e=typeof self<"u"&&(self.crypto||self.msCrypto),r=new Uint8Array(t);if(e&&typeof e.getRandomValues=="function")e.getRandomValues(r);else for(let n=0;n<t;n++)r[n]=Math.floor(256*Math.random());return r}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class VD{static newId(){const e="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",r=Math.floor(256/e.length)*e.length;let n="";for(;n.length<20;){const a=Lxe(40);for(let s=0;s<a.length;++s)n.length<20&&a[s]<r&&(n+=e.charAt(a[s]%e.length))}return n}}function Gn(t,e){return t<e?-1:t>e?1:0}function Pv(t,e,r){return t.length===e.length&&t.every((n,a)=>r(n,e[a]))}function DJ(t){return t+"\0"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ar{constructor(e,r){if(this.seconds=e,this.nanoseconds=r,r<0)throw new Lr(ir.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+r);if(r>=1e9)throw new Lr(ir.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+r);if(e<-62135596800)throw new Lr(ir.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e);if(e>=253402300800)throw new Lr(ir.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e)}static now(){return Ar.fromMillis(Date.now())}static fromDate(e){return Ar.fromMillis(e.getTime())}static fromMillis(e){const r=Math.floor(e/1e3),n=Math.floor(1e6*(e-1e3*r));return new Ar(r,n)}toDate(){return new Date(this.toMillis())}toMillis(){return 1e3*this.seconds+this.nanoseconds/1e6}_compareTo(e){return this.seconds===e.seconds?Gn(this.nanoseconds,e.nanoseconds):Gn(this.seconds,e.seconds)}isEqual(e){return e.seconds===this.seconds&&e.nanoseconds===this.nanoseconds}toString(){return"Timestamp(seconds="+this.seconds+", nanoseconds="+this.nanoseconds+")"}toJSON(){return{seconds:this.seconds,nanoseconds:this.nanoseconds}}valueOf(){const e=this.seconds- -62135596800;return String(e).padStart(12,"0")+"."+String(this.nanoseconds).padStart(9,"0")}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class wn{constructor(e){this.timestamp=e}static fromTimestamp(e){return new wn(e)}static min(){return new wn(new Ar(0,0))}static max(){return new wn(new Ar(253402300799,999999999))}compareTo(e){return this.timestamp._compareTo(e.timestamp)}isEqual(e){return this.timestamp.isEqual(e.timestamp)}toMicroseconds(){return 1e6*this.timestamp.seconds+this.timestamp.nanoseconds/1e3}toString(){return"SnapshotVersion("+this.timestamp.toString()+")"}toTimestamp(){return this.timestamp}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class u2{constructor(e,r,n){r===void 0?r=0:r>e.length&&cn(),n===void 0?n=e.length-r:n>e.length-r&&cn(),this.segments=e,this.offset=r,this.len=n}get length(){return this.len}isEqual(e){return u2.comparator(this,e)===0}child(e){const r=this.segments.slice(this.offset,this.limit());return e instanceof u2?e.forEach(n=>{r.push(n)}):r.push(e),this.construct(r)}limit(){return this.offset+this.length}popFirst(e){return e=e===void 0?1:e,this.construct(this.segments,this.offset+e,this.length-e)}popLast(){return this.construct(this.segments,this.offset,this.length-1)}firstSegment(){return this.segments[this.offset]}lastSegment(){return this.get(this.length-1)}get(e){return this.segments[this.offset+e]}isEmpty(){return this.length===0}isPrefixOf(e){if(e.length<this.length)return!1;for(let r=0;r<this.length;r++)if(this.get(r)!==e.get(r))return!1;return!0}isImmediateParentOf(e){if(this.length+1!==e.length)return!1;for(let r=0;r<this.length;r++)if(this.get(r)!==e.get(r))return!1;return!0}forEach(e){for(let r=this.offset,n=this.limit();r<n;r++)e(this.segments[r])}toArray(){return this.segments.slice(this.offset,this.limit())}static comparator(e,r){const n=Math.min(e.length,r.length);for(let a=0;a<n;a++){const s=e.get(a),o=r.get(a);if(s<o)return-1;if(s>o)return 1}return e.length<r.length?-1:e.length>r.length?1:0}}class Pa extends u2{construct(e,r,n){return new Pa(e,r,n)}canonicalString(){return this.toArray().join("/")}toString(){return this.canonicalString()}toUriEncodedString(){return this.toArray().map(encodeURIComponent).join("/")}static fromString(...e){const r=[];for(const n of e){if(n.indexOf("//")>=0)throw new Lr(ir.INVALID_ARGUMENT,`Invalid segment (${n}). Paths must not contain // in them.`);r.push(...n.split("/").filter(a=>a.length>0))}return new Pa(r)}static emptyPath(){return new Pa([])}}const Uxe=/^[_a-zA-Z][_a-zA-Z0-9]*$/;class Hs extends u2{construct(e,r,n){return new Hs(e,r,n)}static isValidIdentifier(e){return Uxe.test(e)}canonicalString(){return this.toArray().map(e=>(e=e.replace(/\\/g,"\\\\").replace(/`/g,"\\`"),Hs.isValidIdentifier(e)||(e="`"+e+"`"),e)).join(".")}toString(){return this.canonicalString()}isKeyField(){return this.length===1&&this.get(0)==="__name__"}static keyField(){return new Hs(["__name__"])}static fromServerFormat(e){const r=[];let n="",a=0;const s=()=>{if(n.length===0)throw new Lr(ir.INVALID_ARGUMENT,`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`);r.push(n),n=""};let o=!1;for(;a<e.length;){const l=e[a];if(l==="\\"){if(a+1===e.length)throw new Lr(ir.INVALID_ARGUMENT,"Path has trailing escape character: "+e);const c=e[a+1];if(c!=="\\"&&c!=="."&&c!=="`")throw new Lr(ir.INVALID_ARGUMENT,"Path has invalid escape sequence: "+e);n+=c,a+=2}else l==="`"?(o=!o,a++):l!=="."||o?(n+=l,a++):(s(),a++)}if(s(),o)throw new Lr(ir.INVALID_ARGUMENT,"Unterminated ` in path: "+e);return new Hs(r)}static emptyPath(){return new Hs([])}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Wr{constructor(e){this.path=e}static fromPath(e){return new Wr(Pa.fromString(e))}static fromName(e){return new Wr(Pa.fromString(e).popFirst(5))}static empty(){return new Wr(Pa.emptyPath())}get collectionGroup(){return this.path.popLast().lastSegment()}hasCollectionId(e){return this.path.length>=2&&this.path.get(this.path.length-2)===e}getCollectionGroup(){return this.path.get(this.path.length-2)}getCollectionPath(){return this.path.popLast()}isEqual(e){return e!==null&&Pa.comparator(this.path,e.path)===0}toString(){return this.path.toString()}static comparator(e,r){return Pa.comparator(e.path,r.path)}static isDocumentKey(e){return e.length%2==0}static fromSegments(e){return new Wr(new Pa(e.slice()))}}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class sS{constructor(e,r,n,a){this.indexId=e,this.collectionGroup=r,this.fields=n,this.indexState=a}}function HT(t){return t.fields.find(e=>e.kind===2)}function ip(t){return t.fields.filter(e=>e.kind!==2)}sS.UNKNOWN_ID=-1;class aE{constructor(e,r){this.fieldPath=e,this.kind=r}}class d2{constructor(e,r){this.sequenceNumber=e,this.offset=r}static empty(){return new d2(0,Qu.min())}}function Qxe(t,e){const r=t.toTimestamp().seconds,n=t.toTimestamp().nanoseconds+1,a=wn.fromTimestamp(n===1e9?new Ar(r+1,0):new Ar(r,n));return new Qu(a,Wr.empty(),e)}function RJ(t){return new Qu(t.readTime,t.key,-1)}class Qu{constructor(e,r,n){this.readTime=e,this.documentKey=r,this.largestBatchId=n}static min(){return new Qu(wn.min(),Wr.empty(),-1)}static max(){return new Qu(wn.max(),Wr.empty(),-1)}}function HD(t,e){let r=t.readTime.compareTo(e.readTime);return r!==0?r:(r=Wr.comparator(t.documentKey,e.documentKey),r!==0?r:Gn(t.largestBatchId,e.largestBatchId))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const MJ="The current tab is not in the required state to perform this operation. It might be necessary to refresh the browser tab.";class LJ{constructor(){this.onCommittedListeners=[]}addOnCommittedListener(e){this.onCommittedListeners.push(e)}raiseOnCommittedEvent(){this.onCommittedListeners.forEach(e=>e())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Ig(t){if(t.code!==ir.FAILED_PRECONDITION||t.message!==MJ)throw t;Pr("LocalStore","Unexpectedly lost primary lease")}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ht{constructor(e){this.nextCallback=null,this.catchCallback=null,this.result=void 0,this.error=void 0,this.isDone=!1,this.callbackAttached=!1,e(r=>{this.isDone=!0,this.result=r,this.nextCallback&&this.nextCallback(r)},r=>{this.isDone=!0,this.error=r,this.catchCallback&&this.catchCallback(r)})}catch(e){return this.next(void 0,e)}next(e,r){return this.callbackAttached&&cn(),this.callbackAttached=!0,this.isDone?this.error?this.wrapFailure(r,this.error):this.wrapSuccess(e,this.result):new Ht((n,a)=>{this.nextCallback=s=>{this.wrapSuccess(e,s).next(n,a)},this.catchCallback=s=>{this.wrapFailure(r,s).next(n,a)}})}toPromise(){return new Promise((e,r)=>{this.next(e,r)})}wrapUserFunction(e){try{const r=e();return r instanceof Ht?r:Ht.resolve(r)}catch(r){return Ht.reject(r)}}wrapSuccess(e,r){return e?this.wrapUserFunction(()=>e(r)):Ht.resolve(r)}wrapFailure(e,r){return e?this.wrapUserFunction(()=>e(r)):Ht.reject(r)}static resolve(e){return new Ht((r,n)=>{r(e)})}static reject(e){return new Ht((r,n)=>{n(e)})}static waitFor(e){return new Ht((r,n)=>{let a=0,s=0,o=!1;e.forEach(l=>{++a,l.next(()=>{++s,o&&s===a&&r()},c=>n(c))}),o=!0,s===a&&r()})}static or(e){let r=Ht.resolve(!1);for(const n of e)r=r.next(a=>a?Ht.resolve(a):n());return r}static forEach(e,r){const n=[];return e.forEach((a,s)=>{n.push(r.call(this,a,s))}),this.waitFor(n)}static mapArray(e,r){return new Ht((n,a)=>{const s=e.length,o=new Array(s);let l=0;for(let c=0;c<s;c++){const u=c;r(e[u]).next(d=>{o[u]=d,++l,l===s&&n(o)},d=>a(d))}})}static doWhile(e,r){return new Ht((n,a)=>{const s=()=>{e()===!0?r().next(()=>{s()},a):n()};s()})}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class bj{constructor(e,r){this.action=e,this.transaction=r,this.aborted=!1,this.V=new pf,this.transaction.oncomplete=()=>{this.V.resolve()},this.transaction.onabort=()=>{r.error?this.V.reject(new hb(e,r.error)):this.V.resolve()},this.transaction.onerror=n=>{const a=$D(n.target.error);this.V.reject(new hb(e,a))}}static open(e,r,n,a){try{return new bj(r,e.transaction(a,n))}catch(s){throw new hb(r,s)}}get m(){return this.V.promise}abort(e){e&&this.V.reject(e),this.aborted||(Pr("SimpleDb","Aborting transaction:",e?e.message:"Client-initiated abort"),this.aborted=!0,this.transaction.abort())}g(){const e=this.transaction;this.aborted||typeof e.commit!="function"||e.commit()}store(e){const r=this.transaction.objectStore(e);return new Hxe(r)}}class lm{constructor(e,r,n){this.name=e,this.version=r,this.p=n,lm.S(Bo())===12.2&&Cc("Firestore persistence suffers from a bug in iOS 12.2 Safari that may cause your app to stop working. See https://stackoverflow.com/q/56496296/110915 for details and a potential workaround.")}static delete(e){return Pr("SimpleDb","Removing database:",e),hp(window.indexedDB.deleteDatabase(e)).toPromise()}static D(){if(!HY())return!1;if(lm.v())return!0;const e=Bo(),r=lm.S(e),n=0<r&&r<10,a=UJ(e),s=0<a&&a<4.5;return!(e.indexOf("MSIE ")>0||e.indexOf("Trident/")>0||e.indexOf("Edge/")>0||n||s)}static v(){var e;return typeof process<"u"&&((e=process.__PRIVATE_env)===null||e===void 0?void 0:e.C)==="YES"}static F(e,r){return e.store(r)}static S(e){const r=e.match(/i(?:phone|pad|pod) os ([\d_]+)/i),n=r?r[1].split("_").slice(0,2).join("."):"-1";return Number(n)}async M(e){return this.db||(Pr("SimpleDb","Opening database:",this.name),this.db=await new Promise((r,n)=>{const a=indexedDB.open(this.name,this.version);a.onsuccess=s=>{const o=s.target.result;r(o)},a.onblocked=()=>{n(new hb(e,"Cannot upgrade IndexedDB schema while another tab is open. Close all tabs that access Firestore and reload this page to proceed."))},a.onerror=s=>{const o=s.target.error;o.name==="VersionError"?n(new Lr(ir.FAILED_PRECONDITION,"A newer version of the Firestore SDK was previously used and so the persisted data is not compatible with the version of the SDK you are now using. The SDK will operate with persistence disabled. If you need persistence, please re-upgrade to a newer version of the SDK or else clear the persisted IndexedDB data for your app to start fresh.")):o.name==="InvalidStateError"?n(new Lr(ir.FAILED_PRECONDITION,"Unable to open an IndexedDB connection. This could be due to running in a private browsing session on a browser whose private browsing sessions do not support IndexedDB: "+o)):n(new hb(e,o))},a.onupgradeneeded=s=>{Pr("SimpleDb",'Database "'+this.name+'" requires upgrade from version:',s.oldVersion);const o=s.target.result;this.p.O(o,a.transaction,s.oldVersion,this.version).next(()=>{Pr("SimpleDb","Database upgrade to version "+this.version+" complete")})}})),this.N&&(this.db.onversionchange=r=>this.N(r)),this.db}L(e){this.N=e,this.db&&(this.db.onversionchange=r=>e(r))}async runTransaction(e,r,n,a){const s=r==="readonly";let o=0;for(;;){++o;try{this.db=await this.M(e);const l=bj.open(this.db,e,s?"readonly":"readwrite",n),c=a(l).next(u=>(l.g(),u)).catch(u=>(l.abort(u),Ht.reject(u))).toPromise();return c.catch(()=>{}),await l.m,c}catch(l){const c=l,u=c.name!=="FirebaseError"&&o<3;if(Pr("SimpleDb","Transaction failed with error:",c.message,"Retrying:",u),this.close(),!u)return Promise.reject(c)}}}close(){this.db&&this.db.close(),this.db=void 0}}function UJ(t){const e=t.match(/Android ([\d.]+)/i),r=e?e[1].split(".").slice(0,2).join("."):"-1";return Number(r)}class Vxe{constructor(e){this.B=e,this.k=!1,this.q=null}get isDone(){return this.k}get K(){return this.q}set cursor(e){this.B=e}done(){this.k=!0}$(e){this.q=e}delete(){return hp(this.B.delete())}}class hb extends Lr{constructor(e,r){super(ir.UNAVAILABLE,`IndexedDB transaction '${e}' failed: ${r}`),this.name="IndexedDbTransactionError"}}function Rm(t){return t.name==="IndexedDbTransactionError"}class Hxe{constructor(e){this.store=e}put(e,r){let n;return r!==void 0?(Pr("SimpleDb","PUT",this.store.name,e,r),n=this.store.put(r,e)):(Pr("SimpleDb","PUT",this.store.name,"<auto-key>",e),n=this.store.put(e)),hp(n)}add(e){return Pr("SimpleDb","ADD",this.store.name,e,e),hp(this.store.add(e))}get(e){return hp(this.store.get(e)).next(r=>(r===void 0&&(r=null),Pr("SimpleDb","GET",this.store.name,e,r),r))}delete(e){return Pr("SimpleDb","DELETE",this.store.name,e),hp(this.store.delete(e))}count(){return Pr("SimpleDb","COUNT",this.store.name),hp(this.store.count())}U(e,r){const n=this.options(e,r),a=n.index?this.store.index(n.index):this.store;if(typeof a.getAll=="function"){const s=a.getAll(n.range);return new Ht((o,l)=>{s.onerror=c=>{l(c.target.error)},s.onsuccess=c=>{o(c.target.result)}})}{const s=this.cursor(n),o=[];return this.W(s,(l,c)=>{o.push(c)}).next(()=>o)}}G(e,r){const n=this.store.getAll(e,r===null?void 0:r);return new Ht((a,s)=>{n.onerror=o=>{s(o.target.error)},n.onsuccess=o=>{a(o.target.result)}})}j(e,r){Pr("SimpleDb","DELETE ALL",this.store.name);const n=this.options(e,r);n.H=!1;const a=this.cursor(n);return this.W(a,(s,o,l)=>l.delete())}J(e,r){let n;r?n=e:(n={},r=e);const a=this.cursor(n);return this.W(a,r)}Y(e){const r=this.cursor({});return new Ht((n,a)=>{r.onerror=s=>{const o=$D(s.target.error);a(o)},r.onsuccess=s=>{const o=s.target.result;o?e(o.primaryKey,o.value).next(l=>{l?o.continue():n()}):n()}})}W(e,r){const n=[];return new Ht((a,s)=>{e.onerror=o=>{s(o.target.error)},e.onsuccess=o=>{const l=o.target.result;if(!l)return void a();const c=new Vxe(l),u=r(l.primaryKey,l.value,c);if(u instanceof Ht){const d=u.catch(f=>(c.done(),Ht.reject(f)));n.push(d)}c.isDone?a():c.K===null?l.continue():l.continue(c.K)}}).next(()=>Ht.waitFor(n))}options(e,r){let n;return e!==void 0&&(typeof e=="string"?n=e:r=e),{index:n,range:r}}cursor(e){let r="next";if(e.reverse&&(r="prev"),e.index){const n=this.store.index(e.index);return e.H?n.openKeyCursor(e.range,r):n.openCursor(e.range,r)}return this.store.openCursor(e.range,r)}}function hp(t){return new Ht((e,r)=>{t.onsuccess=n=>{const a=n.target.result;e(a)},t.onerror=n=>{const a=$D(n.target.error);r(a)}})}let p7=!1;function $D(t){const e=lm.S(Bo());if(e>=12.2&&e<13){const r="An internal error was encountered in the Indexed Database server";if(t.message.indexOf(r)>=0){const n=new Lr("internal",`IOS_INDEXEDDB_BUG1: IndexedDb has thrown '${r}'. This is likely due to an unavoidable bug in iOS. See https://stackoverflow.com/q/56496296/110915 for details and a potential workaround.`);return p7||(p7=!0,setTimeout(()=>{throw n},0)),n}}return t}class $xe{constructor(e,r){this.asyncQueue=e,this.Z=r,this.task=null}start(){this.X(15e3)}stop(){this.task&&(this.task.cancel(),this.task=null)}get started(){return this.task!==null}X(e){Pr("IndexBackfiller",`Scheduled in ${e}ms`),this.task=this.asyncQueue.enqueueAfterDelay("index_backfill",e,async()=>{this.task=null;try{Pr("IndexBackfiller",`Documents written: ${await this.Z.ee()}`)}catch(r){Rm(r)?Pr("IndexBackfiller","Ignoring IndexedDB error during index backfill: ",r):await Ig(r)}await this.X(6e4)})}}class Gxe{constructor(e,r){this.localStore=e,this.persistence=r}async ee(e=50){return this.persistence.runTransaction("Backfill Indexes","readwrite-primary",r=>this.te(r,e))}te(e,r){const n=new Set;let a=r,s=!0;return Ht.doWhile(()=>s===!0&&a>0,()=>this.localStore.indexManager.getNextCollectionGroupToUpdate(e).next(o=>{if(o!==null&&!n.has(o))return Pr("IndexBackfiller",`Processing collection: ${o}`),this.ne(e,o,a).next(l=>{a-=l,n.add(o)});s=!1})).next(()=>r-a)}ne(e,r,n){return this.localStore.indexManager.getMinOffsetFromCollectionGroup(e,r).next(a=>this.localStore.localDocuments.getNextDocuments(e,r,a,n).next(s=>{const o=s.changes;return this.localStore.indexManager.updateIndexEntries(e,o).next(()=>this.re(a,s)).next(l=>(Pr("IndexBackfiller",`Updating offset: ${l}`),this.localStore.indexManager.updateCollectionGroup(e,r,l))).next(()=>o.size)}))}re(e,r){let n=e;return r.changes.forEach((a,s)=>{const o=RJ(s);HD(o,n)>0&&(n=o)}),new Qu(n.readTime,n.documentKey,Math.max(r.batchId,e.largestBatchId))}}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class wd{constructor(e,r){this.previousValue=e,r&&(r.sequenceNumberHandler=n=>this.ie(n),this.se=n=>r.writeSequenceNumber(n))}ie(e){return this.previousValue=Math.max(e,this.previousValue),this.previousValue}next(){const e=++this.previousValue;return this.se&&this.se(e),e}}wd.oe=-1;function Cw(t){return t==null}function f2(t){return t===0&&1/t==-1/0}function Kxe(t){return typeof t=="number"&&Number.isInteger(t)&&!f2(t)&&t<=Number.MAX_SAFE_INTEGER&&t>=Number.MIN_SAFE_INTEGER}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Ic(t){let e="";for(let r=0;r<t.length;r++)e.length>0&&(e=g7(e)),e=qxe(t.get(r),e);return g7(e)}function qxe(t,e){let r=e;const n=t.length;for(let a=0;a<n;a++){const s=t.charAt(a);switch(s){case"\0":r+="";break;case"":r+="";break;default:r+=s}}return r}function g7(t){return t+""}function Wf(t){const e=t.length;if(mn(e>=2),e===2)return mn(t.charAt(0)===""&&t.charAt(1)===""),Pa.emptyPath();const r=e-2,n=[];let a="";for(let s=0;s<e;){const o=t.indexOf("",s);switch((o<0||o>r)&&cn(),t.charAt(o+1)){case"":const l=t.substring(s,o);let c;a.length===0?c=l:(a+=l,c=a,a=""),n.push(c);break;case"":a+=t.substring(s,o),a+="\0";break;case"":a+=t.substring(s,o+1);break;default:cn()}s=o+2}return new Pa(n)}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const x7=["userId","batchId"];/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function sE(t,e){return[t,Ic(e)]}function QJ(t,e,r){return[t,Ic(e),r]}const zxe={},Wxe=["prefixPath","collectionGroup","readTime","documentId"],Xxe=["prefixPath","collectionGroup","documentId"],Yxe=["collectionGroup","readTime","prefixPath","documentId"],Jxe=["canonicalId","targetId"],Zxe=["targetId","path"],eve=["path","targetId"],tve=["collectionId","parent"],rve=["indexId","uid"],nve=["uid","sequenceNumber"],ave=["indexId","uid","arrayValue","directionalValue","orderedDocumentKey","documentKey"],sve=["indexId","uid","orderedDocumentKey"],ive=["userId","collectionPath","documentId"],ove=["userId","collectionPath","largestBatchId"],lve=["userId","collectionGroup","largestBatchId"],VJ=["mutationQueues","mutations","documentMutations","remoteDocuments","targets","owner","targetGlobal","targetDocuments","clientMetadata","remoteDocumentGlobal","collectionParents","bundles","namedQueries"],cve=[...VJ,"documentOverlays"],HJ=["mutationQueues","mutations","documentMutations","remoteDocumentsV14","targets","owner","targetGlobal","targetDocuments","clientMetadata","remoteDocumentGlobal","collectionParents","bundles","namedQueries","documentOverlays"],$J=HJ,GD=[...$J,"indexConfiguration","indexState","indexEntries"],uve=GD,dve=[...GD,"globals"];/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class $T extends LJ{constructor(e,r){super(),this._e=e,this.currentSequenceNumber=r}}function ko(t,e){const r=Ln(t);return lm.F(r._e,e)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function v7(t){let e=0;for(const r in t)Object.prototype.hasOwnProperty.call(t,r)&&e++;return e}function jg(t,e){for(const r in t)Object.prototype.hasOwnProperty.call(t,r)&&e(r,t[r])}function GJ(t){for(const e in t)if(Object.prototype.hasOwnProperty.call(t,e))return!1;return!0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ws{constructor(e,r){this.comparator=e,this.root=r||Nl.EMPTY}insert(e,r){return new Ws(this.comparator,this.root.insert(e,r,this.comparator).copy(null,null,Nl.BLACK,null,null))}remove(e){return new Ws(this.comparator,this.root.remove(e,this.comparator).copy(null,null,Nl.BLACK,null,null))}get(e){let r=this.root;for(;!r.isEmpty();){const n=this.comparator(e,r.key);if(n===0)return r.value;n<0?r=r.left:n>0&&(r=r.right)}return null}indexOf(e){let r=0,n=this.root;for(;!n.isEmpty();){const a=this.comparator(e,n.key);if(a===0)return r+n.left.size;a<0?n=n.left:(r+=n.left.size+1,n=n.right)}return-1}isEmpty(){return this.root.isEmpty()}get size(){return this.root.size}minKey(){return this.root.minKey()}maxKey(){return this.root.maxKey()}inorderTraversal(e){return this.root.inorderTraversal(e)}forEach(e){this.inorderTraversal((r,n)=>(e(r,n),!1))}toString(){const e=[];return this.inorderTraversal((r,n)=>(e.push(`${r}:${n}`),!1)),`{${e.join(", ")}}`}reverseTraversal(e){return this.root.reverseTraversal(e)}getIterator(){return new tC(this.root,null,this.comparator,!1)}getIteratorFrom(e){return new tC(this.root,e,this.comparator,!1)}getReverseIterator(){return new tC(this.root,null,this.comparator,!0)}getReverseIteratorFrom(e){return new tC(this.root,e,this.comparator,!0)}}class tC{constructor(e,r,n,a){this.isReverse=a,this.nodeStack=[];let s=1;for(;!e.isEmpty();)if(s=r?n(e.key,r):1,r&&a&&(s*=-1),s<0)e=this.isReverse?e.left:e.right;else{if(s===0){this.nodeStack.push(e);break}this.nodeStack.push(e),e=this.isReverse?e.right:e.left}}getNext(){let e=this.nodeStack.pop();const r={key:e.key,value:e.value};if(this.isReverse)for(e=e.left;!e.isEmpty();)this.nodeStack.push(e),e=e.right;else for(e=e.right;!e.isEmpty();)this.nodeStack.push(e),e=e.left;return r}hasNext(){return this.nodeStack.length>0}peek(){if(this.nodeStack.length===0)return null;const e=this.nodeStack[this.nodeStack.length-1];return{key:e.key,value:e.value}}}class Nl{constructor(e,r,n,a,s){this.key=e,this.value=r,this.color=n??Nl.RED,this.left=a??Nl.EMPTY,this.right=s??Nl.EMPTY,this.size=this.left.size+1+this.right.size}copy(e,r,n,a,s){return new Nl(e??this.key,r??this.value,n??this.color,a??this.left,s??this.right)}isEmpty(){return!1}inorderTraversal(e){return this.left.inorderTraversal(e)||e(this.key,this.value)||this.right.inorderTraversal(e)}reverseTraversal(e){return this.right.reverseTraversal(e)||e(this.key,this.value)||this.left.reverseTraversal(e)}min(){return this.left.isEmpty()?this:this.left.min()}minKey(){return this.min().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(e,r,n){let a=this;const s=n(e,a.key);return a=s<0?a.copy(null,null,null,a.left.insert(e,r,n),null):s===0?a.copy(null,r,null,null,null):a.copy(null,null,null,null,a.right.insert(e,r,n)),a.fixUp()}removeMin(){if(this.left.isEmpty())return Nl.EMPTY;let e=this;return e.left.isRed()||e.left.left.isRed()||(e=e.moveRedLeft()),e=e.copy(null,null,null,e.left.removeMin(),null),e.fixUp()}remove(e,r){let n,a=this;if(r(e,a.key)<0)a.left.isEmpty()||a.left.isRed()||a.left.left.isRed()||(a=a.moveRedLeft()),a=a.copy(null,null,null,a.left.remove(e,r),null);else{if(a.left.isRed()&&(a=a.rotateRight()),a.right.isEmpty()||a.right.isRed()||a.right.left.isRed()||(a=a.moveRedRight()),r(e,a.key)===0){if(a.right.isEmpty())return Nl.EMPTY;n=a.right.min(),a=a.copy(n.key,n.value,null,null,a.right.removeMin())}a=a.copy(null,null,null,null,a.right.remove(e,r))}return a.fixUp()}isRed(){return this.color}fixUp(){let e=this;return e.right.isRed()&&!e.left.isRed()&&(e=e.rotateLeft()),e.left.isRed()&&e.left.left.isRed()&&(e=e.rotateRight()),e.left.isRed()&&e.right.isRed()&&(e=e.colorFlip()),e}moveRedLeft(){let e=this.colorFlip();return e.right.left.isRed()&&(e=e.copy(null,null,null,null,e.right.rotateRight()),e=e.rotateLeft(),e=e.colorFlip()),e}moveRedRight(){let e=this.colorFlip();return e.left.left.isRed()&&(e=e.rotateRight(),e=e.colorFlip()),e}rotateLeft(){const e=this.copy(null,null,Nl.RED,null,this.right.left);return this.right.copy(null,null,this.color,e,null)}rotateRight(){const e=this.copy(null,null,Nl.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,e)}colorFlip(){const e=this.left.copy(null,null,!this.left.color,null,null),r=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,e,r)}checkMaxDepth(){const e=this.check();return Math.pow(2,e)<=this.size+1}check(){if(this.isRed()&&this.left.isRed()||this.right.isRed())throw cn();const e=this.left.check();if(e!==this.right.check())throw cn();return e+(this.isRed()?0:1)}}Nl.EMPTY=null,Nl.RED=!0,Nl.BLACK=!1;Nl.EMPTY=new class{constructor(){this.size=0}get key(){throw cn()}get value(){throw cn()}get color(){throw cn()}get left(){throw cn()}get right(){throw cn()}copy(e,r,n,a,s){return this}insert(e,r,n){return new Nl(e,r)}remove(e,r){return this}isEmpty(){return!0}inorderTraversal(e){return!1}reverseTraversal(e){return!1}minKey(){return null}maxKey(){return null}isRed(){return!1}checkMaxDepth(){return!0}check(){return 0}};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class cs{constructor(e){this.comparator=e,this.data=new Ws(this.comparator)}has(e){return this.data.get(e)!==null}first(){return this.data.minKey()}last(){return this.data.maxKey()}get size(){return this.data.size}indexOf(e){return this.data.indexOf(e)}forEach(e){this.data.inorderTraversal((r,n)=>(e(r),!1))}forEachInRange(e,r){const n=this.data.getIteratorFrom(e[0]);for(;n.hasNext();){const a=n.getNext();if(this.comparator(a.key,e[1])>=0)return;r(a.key)}}forEachWhile(e,r){let n;for(n=r!==void 0?this.data.getIteratorFrom(r):this.data.getIterator();n.hasNext();)if(!e(n.getNext().key))return}firstAfterOrEqual(e){const r=this.data.getIteratorFrom(e);return r.hasNext()?r.getNext().key:null}getIterator(){return new y7(this.data.getIterator())}getIteratorFrom(e){return new y7(this.data.getIteratorFrom(e))}add(e){return this.copy(this.data.remove(e).insert(e,!0))}delete(e){return this.has(e)?this.copy(this.data.remove(e)):this}isEmpty(){return this.data.isEmpty()}unionWith(e){let r=this;return r.size<e.size&&(r=e,e=this),e.forEach(n=>{r=r.add(n)}),r}isEqual(e){if(!(e instanceof cs)||this.size!==e.size)return!1;const r=this.data.getIterator(),n=e.data.getIterator();for(;r.hasNext();){const a=r.getNext().key,s=n.getNext().key;if(this.comparator(a,s)!==0)return!1}return!0}toArray(){const e=[];return this.forEach(r=>{e.push(r)}),e}toString(){const e=[];return this.forEach(r=>e.push(r)),"SortedSet("+e.toString()+")"}copy(e){const r=new cs(this.comparator);return r.data=e,r}}class y7{constructor(e){this.iter=e}getNext(){return this.iter.getNext().key}hasNext(){return this.iter.hasNext()}}function Yg(t){return t.hasNext()?t.getNext():void 0}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class eu{constructor(e){this.fields=e,e.sort(Hs.comparator)}static empty(){return new eu([])}unionWith(e){let r=new cs(Hs.comparator);for(const n of this.fields)r=r.add(n);for(const n of e)r=r.add(n);return new eu(r.toArray())}covers(e){for(const r of this.fields)if(r.isPrefixOf(e))return!0;return!1}isEqual(e){return Pv(this.fields,e.fields,(r,n)=>r.isEqual(n))}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class KJ extends Error{constructor(){super(...arguments),this.name="Base64DecodeError"}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class qi{constructor(e){this.binaryString=e}static fromBase64String(e){const r=function(a){try{return atob(a)}catch(s){throw typeof DOMException<"u"&&s instanceof DOMException?new KJ("Invalid base64 string: "+s):s}}(e);return new qi(r)}static fromUint8Array(e){const r=function(a){let s="";for(let o=0;o<a.length;++o)s+=String.fromCharCode(a[o]);return s}(e);return new qi(r)}[Symbol.iterator](){let e=0;return{next:()=>e<this.binaryString.length?{value:this.binaryString.charCodeAt(e++),done:!1}:{value:void 0,done:!0}}}toBase64(){return function(r){return btoa(r)}(this.binaryString)}toUint8Array(){return function(r){const n=new Uint8Array(r.length);for(let a=0;a<r.length;a++)n[a]=r.charCodeAt(a);return n}(this.binaryString)}approximateByteSize(){return 2*this.binaryString.length}compareTo(e){return Gn(this.binaryString,e.binaryString)}isEqual(e){return this.binaryString===e.binaryString}}qi.EMPTY_BYTE_STRING=new qi("");const fve=new RegExp(/^\d{4}-\d\d-\d\dT\d\d:\d\d:\d\d(?:\.(\d+))?Z$/);function gA(t){if(mn(!!t),typeof t=="string"){let e=0;const r=fve.exec(t);if(mn(!!r),r[1]){let a=r[1];a=(a+"000000000").substr(0,9),e=Number(a)}const n=new Date(t);return{seconds:Math.floor(n.getTime()/1e3),nanos:e}}return{seconds:Us(t.seconds),nanos:Us(t.nanos)}}function Us(t){return typeof t=="number"?t:typeof t=="string"?Number(t):0}function xm(t){return typeof t=="string"?qi.fromBase64String(t):qi.fromUint8Array(t)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function KD(t){var e,r;return((r=(((e=t==null?void 0:t.mapValue)===null||e===void 0?void 0:e.fields)||{}).__type__)===null||r===void 0?void 0:r.stringValue)==="server_timestamp"}function qD(t){const e=t.mapValue.fields.__previous_value__;return KD(e)?qD(e):e}function h2(t){const e=gA(t.mapValue.fields.__local_write_time__.timestampValue);return new Ar(e.seconds,e.nanos)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class hve{constructor(e,r,n,a,s,o,l,c,u){this.databaseId=e,this.appId=r,this.persistenceKey=n,this.host=a,this.ssl=s,this.forceLongPolling=o,this.autoDetectLongPolling=l,this.longPollingOptions=c,this.useFetchStreams=u}}class vm{constructor(e,r){this.projectId=e,this.database=r||"(default)"}static empty(){return new vm("","")}get isDefaultDatabase(){return this.database==="(default)"}isEqual(e){return e instanceof vm&&e.projectId===this.projectId&&e.database===this.database}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const H0={mapValue:{fields:{__type__:{stringValue:"__max__"}}}},iE={nullValue:"NULL_VALUE"};function ng(t){return"nullValue"in t?0:"booleanValue"in t?1:"integerValue"in t||"doubleValue"in t?2:"timestampValue"in t?3:"stringValue"in t?5:"bytesValue"in t?6:"referenceValue"in t?7:"geoPointValue"in t?8:"arrayValue"in t?9:"mapValue"in t?KD(t)?4:qJ(t)?9007199254740991:wj(t)?10:11:cn()}function ih(t,e){if(t===e)return!0;const r=ng(t);if(r!==ng(e))return!1;switch(r){case 0:case 9007199254740991:return!0;case 1:return t.booleanValue===e.booleanValue;case 4:return h2(t).isEqual(h2(e));case 3:return function(a,s){if(typeof a.timestampValue=="string"&&typeof s.timestampValue=="string"&&a.timestampValue.length===s.timestampValue.length)return a.timestampValue===s.timestampValue;const o=gA(a.timestampValue),l=gA(s.timestampValue);return o.seconds===l.seconds&&o.nanos===l.nanos}(t,e);case 5:return t.stringValue===e.stringValue;case 6:return function(a,s){return xm(a.bytesValue).isEqual(xm(s.bytesValue))}(t,e);case 7:return t.referenceValue===e.referenceValue;case 8:return function(a,s){return Us(a.geoPointValue.latitude)===Us(s.geoPointValue.latitude)&&Us(a.geoPointValue.longitude)===Us(s.geoPointValue.longitude)}(t,e);case 2:return function(a,s){if("integerValue"in a&&"integerValue"in s)return Us(a.integerValue)===Us(s.integerValue);if("doubleValue"in a&&"doubleValue"in s){const o=Us(a.doubleValue),l=Us(s.doubleValue);return o===l?f2(o)===f2(l):isNaN(o)&&isNaN(l)}return!1}(t,e);case 9:return Pv(t.arrayValue.values||[],e.arrayValue.values||[],ih);case 10:case 11:return function(a,s){const o=a.mapValue.fields||{},l=s.mapValue.fields||{};if(v7(o)!==v7(l))return!1;for(const c in o)if(o.hasOwnProperty(c)&&(l[c]===void 0||!ih(o[c],l[c])))return!1;return!0}(t,e);default:return cn()}}function A2(t,e){return(t.values||[]).find(r=>ih(r,e))!==void 0}function ym(t,e){if(t===e)return 0;const r=ng(t),n=ng(e);if(r!==n)return Gn(r,n);switch(r){case 0:case 9007199254740991:return 0;case 1:return Gn(t.booleanValue,e.booleanValue);case 2:return function(s,o){const l=Us(s.integerValue||s.doubleValue),c=Us(o.integerValue||o.doubleValue);return l<c?-1:l>c?1:l===c?0:isNaN(l)?isNaN(c)?0:-1:1}(t,e);case 3:return b7(t.timestampValue,e.timestampValue);case 4:return b7(h2(t),h2(e));case 5:return Gn(t.stringValue,e.stringValue);case 6:return function(s,o){const l=xm(s),c=xm(o);return l.compareTo(c)}(t.bytesValue,e.bytesValue);case 7:return function(s,o){const l=s.split("/"),c=o.split("/");for(let u=0;u<l.length&&u<c.length;u++){const d=Gn(l[u],c[u]);if(d!==0)return d}return Gn(l.length,c.length)}(t.referenceValue,e.referenceValue);case 8:return function(s,o){const l=Gn(Us(s.latitude),Us(o.latitude));return l!==0?l:Gn(Us(s.longitude),Us(o.longitude))}(t.geoPointValue,e.geoPointValue);case 9:return w7(t.arrayValue,e.arrayValue);case 10:return function(s,o){var l,c,u,d;const f=s.fields||{},A=o.fields||{},h=(l=f.value)===null||l===void 0?void 0:l.arrayValue,m=(c=A.value)===null||c===void 0?void 0:c.arrayValue,p=Gn(((u=h==null?void 0:h.values)===null||u===void 0?void 0:u.length)||0,((d=m==null?void 0:m.values)===null||d===void 0?void 0:d.length)||0);return p!==0?p:w7(h,m)}(t.mapValue,e.mapValue);case 11:return function(s,o){if(s===H0.mapValue&&o===H0.mapValue)return 0;if(s===H0.mapValue)return 1;if(o===H0.mapValue)return-1;const l=s.fields||{},c=Object.keys(l),u=o.fields||{},d=Object.keys(u);c.sort(),d.sort();for(let f=0;f<c.length&&f<d.length;++f){const A=Gn(c[f],d[f]);if(A!==0)return A;const h=ym(l[c[f]],u[d[f]]);if(h!==0)return h}return Gn(c.length,d.length)}(t.mapValue,e.mapValue);default:throw cn()}}function b7(t,e){if(typeof t=="string"&&typeof e=="string"&&t.length===e.length)return Gn(t,e);const r=gA(t),n=gA(e),a=Gn(r.seconds,n.seconds);return a!==0?a:Gn(r.nanos,n.nanos)}function w7(t,e){const r=t.values||[],n=e.values||[];for(let a=0;a<r.length&&a<n.length;++a){const s=ym(r[a],n[a]);if(s)return s}return Gn(r.length,n.length)}function Bv(t){return GT(t)}function GT(t){return"nullValue"in t?"null":"booleanValue"in t?""+t.booleanValue:"integerValue"in t?""+t.integerValue:"doubleValue"in t?""+t.doubleValue:"timestampValue"in t?function(r){const n=gA(r);return`time(${n.seconds},${n.nanos})`}(t.timestampValue):"stringValue"in t?t.stringValue:"bytesValue"in t?function(r){return xm(r).toBase64()}(t.bytesValue):"referenceValue"in t?function(r){return Wr.fromName(r).toString()}(t.referenceValue):"geoPointValue"in t?function(r){return`geo(${r.latitude},${r.longitude})`}(t.geoPointValue):"arrayValue"in t?function(r){let n="[",a=!0;for(const s of r.values||[])a?a=!1:n+=",",n+=GT(s);return n+"]"}(t.arrayValue):"mapValue"in t?function(r){const n=Object.keys(r.fields||{}).sort();let a="{",s=!0;for(const o of n)s?s=!1:a+=",",a+=`${o}:${GT(r.fields[o])}`;return a+"}"}(t.mapValue):cn()}function m2(t,e){return{referenceValue:`projects/${t.projectId}/databases/${t.database}/documents/${e.path.canonicalString()}`}}function KT(t){return!!t&&"integerValue"in t}function p2(t){return!!t&&"arrayValue"in t}function N7(t){return!!t&&"nullValue"in t}function C7(t){return!!t&&"doubleValue"in t&&isNaN(Number(t.doubleValue))}function oE(t){return!!t&&"mapValue"in t}function wj(t){var e,r;return((r=(((e=t==null?void 0:t.mapValue)===null||e===void 0?void 0:e.fields)||{}).__type__)===null||r===void 0?void 0:r.stringValue)==="__vector__"}function Ab(t){if(t.geoPointValue)return{geoPointValue:Object.assign({},t.geoPointValue)};if(t.timestampValue&&typeof t.timestampValue=="object")return{timestampValue:Object.assign({},t.timestampValue)};if(t.mapValue){const e={mapValue:{fields:{}}};return jg(t.mapValue.fields,(r,n)=>e.mapValue.fields[r]=Ab(n)),e}if(t.arrayValue){const e={arrayValue:{values:[]}};for(let r=0;r<(t.arrayValue.values||[]).length;++r)e.arrayValue.values[r]=Ab(t.arrayValue.values[r]);return e}return Object.assign({},t)}function qJ(t){return(((t.mapValue||{}).fields||{}).__type__||{}).stringValue==="__max__"}const zJ={mapValue:{fields:{__type__:{stringValue:"__vector__"},value:{arrayValue:{}}}}};function Ave(t){return"nullValue"in t?iE:"booleanValue"in t?{booleanValue:!1}:"integerValue"in t||"doubleValue"in t?{doubleValue:NaN}:"timestampValue"in t?{timestampValue:{seconds:Number.MIN_SAFE_INTEGER}}:"stringValue"in t?{stringValue:""}:"bytesValue"in t?{bytesValue:""}:"referenceValue"in t?m2(vm.empty(),Wr.empty()):"geoPointValue"in t?{geoPointValue:{latitude:-90,longitude:-180}}:"arrayValue"in t?{arrayValue:{}}:"mapValue"in t?wj(t)?zJ:{mapValue:{}}:cn()}function mve(t){return"nullValue"in t?{booleanValue:!1}:"booleanValue"in t?{doubleValue:NaN}:"integerValue"in t||"doubleValue"in t?{timestampValue:{seconds:Number.MIN_SAFE_INTEGER}}:"timestampValue"in t?{stringValue:""}:"stringValue"in t?{bytesValue:""}:"bytesValue"in t?m2(vm.empty(),Wr.empty()):"referenceValue"in t?{geoPointValue:{latitude:-90,longitude:-180}}:"geoPointValue"in t?{arrayValue:{}}:"arrayValue"in t?zJ:"mapValue"in t?wj(t)?{mapValue:{}}:H0:cn()}function _7(t,e){const r=ym(t.value,e.value);return r!==0?r:t.inclusive&&!e.inclusive?-1:!t.inclusive&&e.inclusive?1:0}function E7(t,e){const r=ym(t.value,e.value);return r!==0?r:t.inclusive&&!e.inclusive?1:!t.inclusive&&e.inclusive?-1:0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class _l{constructor(e){this.value=e}static empty(){return new _l({mapValue:{}})}field(e){if(e.isEmpty())return this.value;{let r=this.value;for(let n=0;n<e.length-1;++n)if(r=(r.mapValue.fields||{})[e.get(n)],!oE(r))return null;return r=(r.mapValue.fields||{})[e.lastSegment()],r||null}}set(e,r){this.getFieldsMap(e.popLast())[e.lastSegment()]=Ab(r)}setAll(e){let r=Hs.emptyPath(),n={},a=[];e.forEach((o,l)=>{if(!r.isImmediateParentOf(l)){const c=this.getFieldsMap(r);this.applyChanges(c,n,a),n={},a=[],r=l.popLast()}o?n[l.lastSegment()]=Ab(o):a.push(l.lastSegment())});const s=this.getFieldsMap(r);this.applyChanges(s,n,a)}delete(e){const r=this.field(e.popLast());oE(r)&&r.mapValue.fields&&delete r.mapValue.fields[e.lastSegment()]}isEqual(e){return ih(this.value,e.value)}getFieldsMap(e){let r=this.value;r.mapValue.fields||(r.mapValue={fields:{}});for(let n=0;n<e.length;++n){let a=r.mapValue.fields[e.get(n)];oE(a)&&a.mapValue.fields||(a={mapValue:{fields:{}}},r.mapValue.fields[e.get(n)]=a),r=a}return r.mapValue.fields}applyChanges(e,r,n){jg(r,(a,s)=>e[a]=s);for(const a of n)delete e[a]}clone(){return new _l(Ab(this.value))}}function WJ(t){const e=[];return jg(t.fields,(r,n)=>{const a=new Hs([r]);if(oE(n)){const s=WJ(n.mapValue).fields;if(s.length===0)e.push(a);else for(const o of s)e.push(a.child(o))}else e.push(a)}),new eu(e)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Vs{constructor(e,r,n,a,s,o,l){this.key=e,this.documentType=r,this.version=n,this.readTime=a,this.createTime=s,this.data=o,this.documentState=l}static newInvalidDocument(e){return new Vs(e,0,wn.min(),wn.min(),wn.min(),_l.empty(),0)}static newFoundDocument(e,r,n,a){return new Vs(e,1,r,wn.min(),n,a,0)}static newNoDocument(e,r){return new Vs(e,2,r,wn.min(),wn.min(),_l.empty(),0)}static newUnknownDocument(e,r){return new Vs(e,3,r,wn.min(),wn.min(),_l.empty(),2)}convertToFoundDocument(e,r){return!this.createTime.isEqual(wn.min())||this.documentType!==2&&this.documentType!==0||(this.createTime=e),this.version=e,this.documentType=1,this.data=r,this.documentState=0,this}convertToNoDocument(e){return this.version=e,this.documentType=2,this.data=_l.empty(),this.documentState=0,this}convertToUnknownDocument(e){return this.version=e,this.documentType=3,this.data=_l.empty(),this.documentState=2,this}setHasCommittedMutations(){return this.documentState=2,this}setHasLocalMutations(){return this.documentState=1,this.version=wn.min(),this}setReadTime(e){return this.readTime=e,this}get hasLocalMutations(){return this.documentState===1}get hasCommittedMutations(){return this.documentState===2}get hasPendingWrites(){return this.hasLocalMutations||this.hasCommittedMutations}isValidDocument(){return this.documentType!==0}isFoundDocument(){return this.documentType===1}isNoDocument(){return this.documentType===2}isUnknownDocument(){return this.documentType===3}isEqual(e){return e instanceof Vs&&this.key.isEqual(e.key)&&this.version.isEqual(e.version)&&this.documentType===e.documentType&&this.documentState===e.documentState&&this.data.isEqual(e.data)}mutableCopy(){return new Vs(this.key,this.documentType,this.version,this.readTime,this.createTime,this.data.clone(),this.documentState)}toString(){return`Document(${this.key}, ${this.version}, ${JSON.stringify(this.data.value)}, {createTime: ${this.createTime}}), {documentType: ${this.documentType}}), {documentState: ${this.documentState}})`}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Tv{constructor(e,r){this.position=e,this.inclusive=r}}function S7(t,e,r){let n=0;for(let a=0;a<t.position.length;a++){const s=e[a],o=t.position[a];if(s.field.isKeyField()?n=Wr.comparator(Wr.fromName(o.referenceValue),r.key):n=ym(o,r.data.field(s.field)),s.dir==="desc"&&(n*=-1),n!==0)break}return n}function I7(t,e){if(t===null)return e===null;if(e===null||t.inclusive!==e.inclusive||t.position.length!==e.position.length)return!1;for(let r=0;r<t.position.length;r++)if(!ih(t.position[r],e.position[r]))return!1;return!0}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class g2{constructor(e,r="asc"){this.field=e,this.dir=r}}function pve(t,e){return t.dir===e.dir&&t.field.isEqual(e.field)}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class XJ{}class Aa extends XJ{constructor(e,r,n){super(),this.field=e,this.op=r,this.value=n}static create(e,r,n){return e.isKeyField()?r==="in"||r==="not-in"?this.createKeyFieldInFilter(e,r,n):new gve(e,r,n):r==="array-contains"?new yve(e,n):r==="in"?new rZ(e,n):r==="not-in"?new bve(e,n):r==="array-contains-any"?new wve(e,n):new Aa(e,r,n)}static createKeyFieldInFilter(e,r,n){return r==="in"?new xve(e,n):new vve(e,n)}matches(e){const r=e.data.field(this.field);return this.op==="!="?r!==null&&this.matchesComparison(ym(r,this.value)):r!==null&&ng(this.value)===ng(r)&&this.matchesComparison(ym(r,this.value))}matchesComparison(e){switch(this.op){case"<":return e<0;case"<=":return e<=0;case"==":return e===0;case"!=":return e!==0;case">":return e>0;case">=":return e>=0;default:return cn()}}isInequality(){return["<","<=",">",">=","!=","not-in"].indexOf(this.op)>=0}getFlattenedFilters(){return[this]}getFilters(){return[this]}}class es extends XJ{constructor(e,r){super(),this.filters=e,this.op=r,this.ae=null}static create(e,r){return new es(e,r)}matches(e){return kv(this)?this.filters.find(r=>!r.matches(e))===void 0:this.filters.find(r=>r.matches(e))!==void 0}getFlattenedFilters(){return this.ae!==null||(this.ae=this.filters.reduce((e,r)=>e.concat(r.getFlattenedFilters()),[])),this.ae}getFilters(){return Object.assign([],this.filters)}}function kv(t){return t.op==="and"}function qT(t){return t.op==="or"}function zD(t){return YJ(t)&&kv(t)}function YJ(t){for(const e of t.filters)if(e instanceof es)return!1;return!0}function zT(t){if(t instanceof Aa)return t.field.canonicalString()+t.op.toString()+Bv(t.value);if(zD(t))return t.filters.map(e=>zT(e)).join(",");{const e=t.filters.map(r=>zT(r)).join(",");return`${t.op}(${e})`}}function JJ(t,e){return t instanceof Aa?function(n,a){return a instanceof Aa&&n.op===a.op&&n.field.isEqual(a.field)&&ih(n.value,a.value)}(t,e):t instanceof es?function(n,a){return a instanceof es&&n.op===a.op&&n.filters.length===a.filters.length?n.filters.reduce((s,o,l)=>s&&JJ(o,a.filters[l]),!0):!1}(t,e):void cn()}function ZJ(t,e){const r=t.filters.concat(e);return es.create(r,t.op)}function eZ(t){return t instanceof Aa?function(r){return`${r.field.canonicalString()} ${r.op} ${Bv(r.value)}`}(t):t instanceof es?function(r){return r.op.toString()+" {"+r.getFilters().map(eZ).join(" ,")+"}"}(t):"Filter"}class gve extends Aa{constructor(e,r,n){super(e,r,n),this.key=Wr.fromName(n.referenceValue)}matches(e){const r=Wr.comparator(e.key,this.key);return this.matchesComparison(r)}}class xve extends Aa{constructor(e,r){super(e,"in",r),this.keys=tZ("in",r)}matches(e){return this.keys.some(r=>r.isEqual(e.key))}}class vve extends Aa{constructor(e,r){super(e,"not-in",r),this.keys=tZ("not-in",r)}matches(e){return!this.keys.some(r=>r.isEqual(e.key))}}function tZ(t,e){var r;return(((r=e.arrayValue)===null||r===void 0?void 0:r.values)||[]).map(n=>Wr.fromName(n.referenceValue))}class yve extends Aa{constructor(e,r){super(e,"array-contains",r)}matches(e){const r=e.data.field(this.field);return p2(r)&&A2(r.arrayValue,this.value)}}class rZ extends Aa{constructor(e,r){super(e,"in",r)}matches(e){const r=e.data.field(this.field);return r!==null&&A2(this.value.arrayValue,r)}}class bve extends Aa{constructor(e,r){super(e,"not-in",r)}matches(e){if(A2(this.value.arrayValue,{nullValue:"NULL_VALUE"}))return!1;const r=e.data.field(this.field);return r!==null&&!A2(this.value.arrayValue,r)}}class wve extends Aa{constructor(e,r){super(e,"array-contains-any",r)}matches(e){const r=e.data.field(this.field);return!(!p2(r)||!r.arrayValue.values)&&r.arrayValue.values.some(n=>A2(this.value.arrayValue,n))}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Nve{constructor(e,r=null,n=[],a=[],s=null,o=null,l=null){this.path=e,this.collectionGroup=r,this.orderBy=n,this.filters=a,this.limit=s,this.startAt=o,this.endAt=l,this.ue=null}}function WT(t,e=null,r=[],n=[],a=null,s=null,o=null){return new Nve(t,e,r,n,a,s,o)}function ag(t){const e=Ln(t);if(e.ue===null){let r=e.path.canonicalString();e.collectionGroup!==null&&(r+="|cg:"+e.collectionGroup),r+="|f:",r+=e.filters.map(n=>zT(n)).join(","),r+="|ob:",r+=e.orderBy.map(n=>function(s){return s.field.canonicalString()+s.dir}(n)).join(","),Cw(e.limit)||(r+="|l:",r+=e.limit),e.startAt&&(r+="|lb:",r+=e.startAt.inclusive?"b:":"a:",r+=e.startAt.position.map(n=>Bv(n)).join(",")),e.endAt&&(r+="|ub:",r+=e.endAt.inclusive?"a:":"b:",r+=e.endAt.position.map(n=>Bv(n)).join(",")),e.ue=r}return e.ue}function _w(t,e){if(t.limit!==e.limit||t.orderBy.length!==e.orderBy.length)return!1;for(let r=0;r<t.orderBy.length;r++)if(!pve(t.orderBy[r],e.orderBy[r]))return!1;if(t.filters.length!==e.filters.length)return!1;for(let r=0;r<t.filters.length;r++)if(!JJ(t.filters[r],e.filters[r]))return!1;return t.collectionGroup===e.collectionGroup&&!!t.path.isEqual(e.path)&&!!I7(t.startAt,e.startAt)&&I7(t.endAt,e.endAt)}function iS(t){return Wr.isDocumentKey(t.path)&&t.collectionGroup===null&&t.filters.length===0}function oS(t,e){return t.filters.filter(r=>r instanceof Aa&&r.field.isEqual(e))}function j7(t,e,r){let n=iE,a=!0;for(const s of oS(t,e)){let o=iE,l=!0;switch(s.op){case"<":case"<=":o=Ave(s.value);break;case"==":case"in":case">=":o=s.value;break;case">":o=s.value,l=!1;break;case"!=":case"not-in":o=iE}_7({value:n,inclusive:a},{value:o,inclusive:l})<0&&(n=o,a=l)}if(r!==null){for(let s=0;s<t.orderBy.length;++s)if(t.orderBy[s].field.isEqual(e)){const o=r.position[s];_7({value:n,inclusive:a},{value:o,inclusive:r.inclusive})<0&&(n=o,a=r.inclusive);break}}return{value:n,inclusive:a}}function P7(t,e,r){let n=H0,a=!0;for(const s of oS(t,e)){let o=H0,l=!0;switch(s.op){case">=":case">":o=mve(s.value),l=!1;break;case"==":case"in":case"<=":o=s.value;break;case"<":o=s.value,l=!1;break;case"!=":case"not-in":o=H0}E7({value:n,inclusive:a},{value:o,inclusive:l})>0&&(n=o,a=l)}if(r!==null){for(let s=0;s<t.orderBy.length;++s)if(t.orderBy[s].field.isEqual(e)){const o=r.position[s];E7({value:n,inclusive:a},{value:o,inclusive:r.inclusive})>0&&(n=o,a=r.inclusive);break}}return{value:n,inclusive:a}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class l1{constructor(e,r=null,n=[],a=[],s=null,o="F",l=null,c=null){this.path=e,this.collectionGroup=r,this.explicitOrderBy=n,this.filters=a,this.limit=s,this.limitType=o,this.startAt=l,this.endAt=c,this.ce=null,this.le=null,this.he=null,this.startAt,this.endAt}}function Cve(t,e,r,n,a,s,o,l){return new l1(t,e,r,n,a,s,o,l)}function Ew(t){return new l1(t)}function B7(t){return t.filters.length===0&&t.limit===null&&t.startAt==null&&t.endAt==null&&(t.explicitOrderBy.length===0||t.explicitOrderBy.length===1&&t.explicitOrderBy[0].field.isKeyField())}function nZ(t){return t.collectionGroup!==null}function mb(t){const e=Ln(t);if(e.ce===null){e.ce=[];const r=new Set;for(const s of e.explicitOrderBy)e.ce.push(s),r.add(s.field.canonicalString());const n=e.explicitOrderBy.length>0?e.explicitOrderBy[e.explicitOrderBy.length-1].dir:"asc";(function(o){let l=new cs(Hs.comparator);return o.filters.forEach(c=>{c.getFlattenedFilters().forEach(u=>{u.isInequality()&&(l=l.add(u.field))})}),l})(e).forEach(s=>{r.has(s.canonicalString())||s.isKeyField()||e.ce.push(new g2(s,n))}),r.has(Hs.keyField().canonicalString())||e.ce.push(new g2(Hs.keyField(),n))}return e.ce}function Id(t){const e=Ln(t);return e.le||(e.le=_ve(e,mb(t))),e.le}function _ve(t,e){if(t.limitType==="F")return WT(t.path,t.collectionGroup,e,t.filters,t.limit,t.startAt,t.endAt);{e=e.map(a=>{const s=a.dir==="desc"?"asc":"desc";return new g2(a.field,s)});const r=t.endAt?new Tv(t.endAt.position,t.endAt.inclusive):null,n=t.startAt?new Tv(t.startAt.position,t.startAt.inclusive):null;return WT(t.path,t.collectionGroup,e,t.filters,t.limit,r,n)}}function XT(t,e){const r=t.filters.concat([e]);return new l1(t.path,t.collectionGroup,t.explicitOrderBy.slice(),r,t.limit,t.limitType,t.startAt,t.endAt)}function lS(t,e,r){return new l1(t.path,t.collectionGroup,t.explicitOrderBy.slice(),t.filters.slice(),e,r,t.startAt,t.endAt)}function Nj(t,e){return _w(Id(t),Id(e))&&t.limitType===e.limitType}function aZ(t){return`${ag(Id(t))}|lt:${t.limitType}`}function _x(t){return`Query(target=${function(r){let n=r.path.canonicalString();return r.collectionGroup!==null&&(n+=" collectionGroup="+r.collectionGroup),r.filters.length>0&&(n+=`, filters: [${r.filters.map(a=>eZ(a)).join(", ")}]`),Cw(r.limit)||(n+=", limit: "+r.limit),r.orderBy.length>0&&(n+=`, orderBy: [${r.orderBy.map(a=>function(o){return`${o.field.canonicalString()} (${o.dir})`}(a)).join(", ")}]`),r.startAt&&(n+=", startAt: ",n+=r.startAt.inclusive?"b:":"a:",n+=r.startAt.position.map(a=>Bv(a)).join(",")),r.endAt&&(n+=", endAt: ",n+=r.endAt.inclusive?"a:":"b:",n+=r.endAt.position.map(a=>Bv(a)).join(",")),`Target(${n})`}(Id(t))}; limitType=${t.limitType})`}function Sw(t,e){return e.isFoundDocument()&&function(n,a){const s=a.key.path;return n.collectionGroup!==null?a.key.hasCollectionId(n.collectionGroup)&&n.path.isPrefixOf(s):Wr.isDocumentKey(n.path)?n.path.isEqual(s):n.path.isImmediateParentOf(s)}(t,e)&&function(n,a){for(const s of mb(n))if(!s.field.isKeyField()&&a.data.field(s.field)===null)return!1;return!0}(t,e)&&function(n,a){for(const s of n.filters)if(!s.matches(a))return!1;return!0}(t,e)&&function(n,a){return!(n.startAt&&!function(o,l,c){const u=S7(o,l,c);return o.inclusive?u<=0:u<0}(n.startAt,mb(n),a)||n.endAt&&!function(o,l,c){const u=S7(o,l,c);return o.inclusive?u>=0:u>0}(n.endAt,mb(n),a))}(t,e)}function Eve(t){return t.collectionGroup||(t.path.length%2==1?t.path.lastSegment():t.path.get(t.path.length-2))}function sZ(t){return(e,r)=>{let n=!1;for(const a of mb(t)){const s=Sve(a,e,r);if(s!==0)return s;n=n||a.field.isKeyField()}return 0}}function Sve(t,e,r){const n=t.field.isKeyField()?Wr.comparator(e.key,r.key):function(s,o,l){const c=o.data.field(s),u=l.data.field(s);return c!==null&&u!==null?ym(c,u):cn()}(t.field,e,r);switch(t.dir){case"asc":return n;case"desc":return-1*n;default:return cn()}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Mm{constructor(e,r){this.mapKeyFn=e,this.equalsFn=r,this.inner={},this.innerSize=0}get(e){const r=this.mapKeyFn(e),n=this.inner[r];if(n!==void 0){for(const[a,s]of n)if(this.equalsFn(a,e))return s}}has(e){return this.get(e)!==void 0}set(e,r){const n=this.mapKeyFn(e),a=this.inner[n];if(a===void 0)return this.inner[n]=[[e,r]],void this.innerSize++;for(let s=0;s<a.length;s++)if(this.equalsFn(a[s][0],e))return void(a[s]=[e,r]);a.push([e,r]),this.innerSize++}delete(e){const r=this.mapKeyFn(e),n=this.inner[r];if(n===void 0)return!1;for(let a=0;a<n.length;a++)if(this.equalsFn(n[a][0],e))return n.length===1?delete this.inner[r]:n.splice(a,1),this.innerSize--,!0;return!1}forEach(e){jg(this.inner,(r,n)=>{for(const[a,s]of n)e(a,s)})}isEmpty(){return GJ(this.inner)}size(){return this.innerSize}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Ive=new Ws(Wr.comparator);function Fu(){return Ive}const iZ=new Ws(Wr.comparator);function My(...t){let e=iZ;for(const r of t)e=e.insert(r.key,r);return e}function oZ(t){let e=iZ;return t.forEach((r,n)=>e=e.insert(r,n.overlayedDocument)),e}function Xf(){return pb()}function lZ(){return pb()}function pb(){return new Mm(t=>t.toString(),(t,e)=>t.isEqual(e))}const jve=new Ws(Wr.comparator),Pve=new cs(Wr.comparator);function ta(...t){let e=Pve;for(const r of t)e=e.add(r);return e}const Bve=new cs(Gn);function Tve(){return Bve}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function WD(t,e){if(t.useProto3Json){if(isNaN(e))return{doubleValue:"NaN"};if(e===1/0)return{doubleValue:"Infinity"};if(e===-1/0)return{doubleValue:"-Infinity"}}return{doubleValue:f2(e)?"-0":e}}function cZ(t){return{integerValue:""+t}}function kve(t,e){return Kxe(e)?cZ(e):WD(t,e)}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Cj{constructor(){this._=void 0}}function Fve(t,e,r){return t instanceof x2?function(a,s){const o={fields:{__type__:{stringValue:"server_timestamp"},__local_write_time__:{timestampValue:{seconds:a.seconds,nanos:a.nanoseconds}}}};return s&&KD(s)&&(s=qD(s)),s&&(o.fields.__previous_value__=s),{mapValue:o}}(r,e):t instanceof sg?dZ(t,e):t instanceof Fv?fZ(t,e):function(a,s){const o=uZ(a,s),l=T7(o)+T7(a.Pe);return KT(o)&&KT(a.Pe)?cZ(l):WD(a.serializer,l)}(t,e)}function Ove(t,e,r){return t instanceof sg?dZ(t,e):t instanceof Fv?fZ(t,e):r}function uZ(t,e){return t instanceof v2?function(n){return KT(n)||function(s){return!!s&&"doubleValue"in s}(n)}(e)?e:{integerValue:0}:null}class x2 extends Cj{}class sg extends Cj{constructor(e){super(),this.elements=e}}function dZ(t,e){const r=hZ(e);for(const n of t.elements)r.some(a=>ih(a,n))||r.push(n);return{arrayValue:{values:r}}}class Fv extends Cj{constructor(e){super(),this.elements=e}}function fZ(t,e){let r=hZ(e);for(const n of t.elements)r=r.filter(a=>!ih(a,n));return{arrayValue:{values:r}}}class v2 extends Cj{constructor(e,r){super(),this.serializer=e,this.Pe=r}}function T7(t){return Us(t.integerValue||t.doubleValue)}function hZ(t){return p2(t)&&t.arrayValue.values?t.arrayValue.values.slice():[]}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class AZ{constructor(e,r){this.field=e,this.transform=r}}function Dve(t,e){return t.field.isEqual(e.field)&&function(n,a){return n instanceof sg&&a instanceof sg||n instanceof Fv&&a instanceof Fv?Pv(n.elements,a.elements,ih):n instanceof v2&&a instanceof v2?ih(n.Pe,a.Pe):n instanceof x2&&a instanceof x2}(t.transform,e.transform)}class Rve{constructor(e,r){this.version=e,this.transformResults=r}}class $s{constructor(e,r){this.updateTime=e,this.exists=r}static none(){return new $s}static exists(e){return new $s(void 0,e)}static updateTime(e){return new $s(e)}get isNone(){return this.updateTime===void 0&&this.exists===void 0}isEqual(e){return this.exists===e.exists&&(this.updateTime?!!e.updateTime&&this.updateTime.isEqual(e.updateTime):!e.updateTime)}}function lE(t,e){return t.updateTime!==void 0?e.isFoundDocument()&&e.version.isEqual(t.updateTime):t.exists===void 0||t.exists===e.isFoundDocument()}class _j{}function mZ(t,e){if(!t.hasLocalMutations||e&&e.fields.length===0)return null;if(e===null)return t.isNoDocument()?new u1(t.key,$s.none()):new c1(t.key,t.data,$s.none());{const r=t.data,n=_l.empty();let a=new cs(Hs.comparator);for(let s of e.fields)if(!a.has(s)){let o=r.field(s);o===null&&s.length>1&&(s=s.popLast(),o=r.field(s)),o===null?n.delete(s):n.set(s,o),a=a.add(s)}return new FA(t.key,n,new eu(a.toArray()),$s.none())}}function Mve(t,e,r){t instanceof c1?function(a,s,o){const l=a.value.clone(),c=F7(a.fieldTransforms,s,o.transformResults);l.setAll(c),s.convertToFoundDocument(o.version,l).setHasCommittedMutations()}(t,e,r):t instanceof FA?function(a,s,o){if(!lE(a.precondition,s))return void s.convertToUnknownDocument(o.version);const l=F7(a.fieldTransforms,s,o.transformResults),c=s.data;c.setAll(pZ(a)),c.setAll(l),s.convertToFoundDocument(o.version,c).setHasCommittedMutations()}(t,e,r):function(a,s,o){s.convertToNoDocument(o.version).setHasCommittedMutations()}(0,e,r)}function gb(t,e,r,n){return t instanceof c1?function(s,o,l,c){if(!lE(s.precondition,o))return l;const u=s.value.clone(),d=O7(s.fieldTransforms,c,o);return u.setAll(d),o.convertToFoundDocument(o.version,u).setHasLocalMutations(),null}(t,e,r,n):t instanceof FA?function(s,o,l,c){if(!lE(s.precondition,o))return l;const u=O7(s.fieldTransforms,c,o),d=o.data;return d.setAll(pZ(s)),d.setAll(u),o.convertToFoundDocument(o.version,d).setHasLocalMutations(),l===null?null:l.unionWith(s.fieldMask.fields).unionWith(s.fieldTransforms.map(f=>f.field))}(t,e,r,n):function(s,o,l){return lE(s.precondition,o)?(o.convertToNoDocument(o.version).setHasLocalMutations(),null):l}(t,e,r)}function Lve(t,e){let r=null;for(const n of t.fieldTransforms){const a=e.data.field(n.field),s=uZ(n.transform,a||null);s!=null&&(r===null&&(r=_l.empty()),r.set(n.field,s))}return r||null}function k7(t,e){return t.type===e.type&&!!t.key.isEqual(e.key)&&!!t.precondition.isEqual(e.precondition)&&!!function(n,a){return n===void 0&&a===void 0||!(!n||!a)&&Pv(n,a,(s,o)=>Dve(s,o))}(t.fieldTransforms,e.fieldTransforms)&&(t.type===0?t.value.isEqual(e.value):t.type!==1||t.data.isEqual(e.data)&&t.fieldMask.isEqual(e.fieldMask))}class c1 extends _j{constructor(e,r,n,a=[]){super(),this.key=e,this.value=r,this.precondition=n,this.fieldTransforms=a,this.type=0}getFieldMask(){return null}}class FA extends _j{constructor(e,r,n,a,s=[]){super(),this.key=e,this.data=r,this.fieldMask=n,this.precondition=a,this.fieldTransforms=s,this.type=1}getFieldMask(){return this.fieldMask}}function pZ(t){const e=new Map;return t.fieldMask.fields.forEach(r=>{if(!r.isEmpty()){const n=t.data.field(r);e.set(r,n)}}),e}function F7(t,e,r){const n=new Map;mn(t.length===r.length);for(let a=0;a<r.length;a++){const s=t[a],o=s.transform,l=e.data.field(s.field);n.set(s.field,Ove(o,l,r[a]))}return n}function O7(t,e,r){const n=new Map;for(const a of t){const s=a.transform,o=r.data.field(a.field);n.set(a.field,Fve(s,o,e))}return n}class u1 extends _j{constructor(e,r){super(),this.key=e,this.precondition=r,this.type=2,this.fieldTransforms=[]}getFieldMask(){return null}}class XD extends _j{constructor(e,r){super(),this.key=e,this.precondition=r,this.type=3,this.fieldTransforms=[]}getFieldMask(){return null}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class YD{constructor(e,r,n,a){this.batchId=e,this.localWriteTime=r,this.baseMutations=n,this.mutations=a}applyToRemoteDocument(e,r){const n=r.mutationResults;for(let a=0;a<this.mutations.length;a++){const s=this.mutations[a];s.key.isEqual(e.key)&&Mve(s,e,n[a])}}applyToLocalView(e,r){for(const n of this.baseMutations)n.key.isEqual(e.key)&&(r=gb(n,e,r,this.localWriteTime));for(const n of this.mutations)n.key.isEqual(e.key)&&(r=gb(n,e,r,this.localWriteTime));return r}applyToLocalDocumentSet(e,r){const n=lZ();return this.mutations.forEach(a=>{const s=e.get(a.key),o=s.overlayedDocument;let l=this.applyToLocalView(o,s.mutatedFields);l=r.has(a.key)?null:l;const c=mZ(o,l);c!==null&&n.set(a.key,c),o.isValidDocument()||o.convertToNoDocument(wn.min())}),n}keys(){return this.mutations.reduce((e,r)=>e.add(r.key),ta())}isEqual(e){return this.batchId===e.batchId&&Pv(this.mutations,e.mutations,(r,n)=>k7(r,n))&&Pv(this.baseMutations,e.baseMutations,(r,n)=>k7(r,n))}}class JD{constructor(e,r,n,a){this.batch=e,this.commitVersion=r,this.mutationResults=n,this.docVersions=a}static from(e,r,n){mn(e.mutations.length===n.length);let a=function(){return jve}();const s=e.mutations;for(let o=0;o<s.length;o++)a=a.insert(s[o].key,n[o].version);return new JD(e,r,n,a)}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ZD{constructor(e,r){this.largestBatchId=e,this.mutation=r}getKey(){return this.mutation.key}isEqual(e){return e!==null&&this.mutation===e.mutation}toString(){return`Overlay{
      largestBatchId: ${this.largestBatchId},
      mutation: ${this.mutation.toString()}
    }`}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Uve{constructor(e,r){this.count=e,this.unchangedNames=r}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var Zi,ya;function gZ(t){switch(t){default:return cn();case ir.CANCELLED:case ir.UNKNOWN:case ir.DEADLINE_EXCEEDED:case ir.RESOURCE_EXHAUSTED:case ir.INTERNAL:case ir.UNAVAILABLE:case ir.UNAUTHENTICATED:return!1;case ir.INVALID_ARGUMENT:case ir.NOT_FOUND:case ir.ALREADY_EXISTS:case ir.PERMISSION_DENIED:case ir.FAILED_PRECONDITION:case ir.ABORTED:case ir.OUT_OF_RANGE:case ir.UNIMPLEMENTED:case ir.DATA_LOSS:return!0}}function xZ(t){if(t===void 0)return Cc("GRPC error has no .code"),ir.UNKNOWN;switch(t){case Zi.OK:return ir.OK;case Zi.CANCELLED:return ir.CANCELLED;case Zi.UNKNOWN:return ir.UNKNOWN;case Zi.DEADLINE_EXCEEDED:return ir.DEADLINE_EXCEEDED;case Zi.RESOURCE_EXHAUSTED:return ir.RESOURCE_EXHAUSTED;case Zi.INTERNAL:return ir.INTERNAL;case Zi.UNAVAILABLE:return ir.UNAVAILABLE;case Zi.UNAUTHENTICATED:return ir.UNAUTHENTICATED;case Zi.INVALID_ARGUMENT:return ir.INVALID_ARGUMENT;case Zi.NOT_FOUND:return ir.NOT_FOUND;case Zi.ALREADY_EXISTS:return ir.ALREADY_EXISTS;case Zi.PERMISSION_DENIED:return ir.PERMISSION_DENIED;case Zi.FAILED_PRECONDITION:return ir.FAILED_PRECONDITION;case Zi.ABORTED:return ir.ABORTED;case Zi.OUT_OF_RANGE:return ir.OUT_OF_RANGE;case Zi.UNIMPLEMENTED:return ir.UNIMPLEMENTED;case Zi.DATA_LOSS:return ir.DATA_LOSS;default:return cn()}}(ya=Zi||(Zi={}))[ya.OK=0]="OK",ya[ya.CANCELLED=1]="CANCELLED",ya[ya.UNKNOWN=2]="UNKNOWN",ya[ya.INVALID_ARGUMENT=3]="INVALID_ARGUMENT",ya[ya.DEADLINE_EXCEEDED=4]="DEADLINE_EXCEEDED",ya[ya.NOT_FOUND=5]="NOT_FOUND",ya[ya.ALREADY_EXISTS=6]="ALREADY_EXISTS",ya[ya.PERMISSION_DENIED=7]="PERMISSION_DENIED",ya[ya.UNAUTHENTICATED=16]="UNAUTHENTICATED",ya[ya.RESOURCE_EXHAUSTED=8]="RESOURCE_EXHAUSTED",ya[ya.FAILED_PRECONDITION=9]="FAILED_PRECONDITION",ya[ya.ABORTED=10]="ABORTED",ya[ya.OUT_OF_RANGE=11]="OUT_OF_RANGE",ya[ya.UNIMPLEMENTED=12]="UNIMPLEMENTED",ya[ya.INTERNAL=13]="INTERNAL",ya[ya.UNAVAILABLE=14]="UNAVAILABLE",ya[ya.DATA_LOSS=15]="DATA_LOSS";/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Qve(){return new TextEncoder}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Vve=new Tp([4294967295,4294967295],0);function D7(t){const e=Qve().encode(t),r=new IJ;return r.update(e),new Uint8Array(r.digest())}function R7(t){const e=new DataView(t.buffer),r=e.getUint32(0,!0),n=e.getUint32(4,!0),a=e.getUint32(8,!0),s=e.getUint32(12,!0);return[new Tp([r,n],0),new Tp([a,s],0)]}class e6{constructor(e,r,n){if(this.bitmap=e,this.padding=r,this.hashCount=n,r<0||r>=8)throw new Ly(`Invalid padding: ${r}`);if(n<0)throw new Ly(`Invalid hash count: ${n}`);if(e.length>0&&this.hashCount===0)throw new Ly(`Invalid hash count: ${n}`);if(e.length===0&&r!==0)throw new Ly(`Invalid padding when bitmap length is 0: ${r}`);this.Ie=8*e.length-r,this.Te=Tp.fromNumber(this.Ie)}Ee(e,r,n){let a=e.add(r.multiply(Tp.fromNumber(n)));return a.compare(Vve)===1&&(a=new Tp([a.getBits(0),a.getBits(1)],0)),a.modulo(this.Te).toNumber()}de(e){return(this.bitmap[Math.floor(e/8)]&1<<e%8)!=0}mightContain(e){if(this.Ie===0)return!1;const r=D7(e),[n,a]=R7(r);for(let s=0;s<this.hashCount;s++){const o=this.Ee(n,a,s);if(!this.de(o))return!1}return!0}static create(e,r,n){const a=e%8==0?0:8-e%8,s=new Uint8Array(Math.ceil(e/8)),o=new e6(s,a,r);return n.forEach(l=>o.insert(l)),o}insert(e){if(this.Ie===0)return;const r=D7(e),[n,a]=R7(r);for(let s=0;s<this.hashCount;s++){const o=this.Ee(n,a,s);this.Ae(o)}}Ae(e){const r=Math.floor(e/8),n=e%8;this.bitmap[r]|=1<<n}}class Ly extends Error{constructor(){super(...arguments),this.name="BloomFilterError"}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ej{constructor(e,r,n,a,s){this.snapshotVersion=e,this.targetChanges=r,this.targetMismatches=n,this.documentUpdates=a,this.resolvedLimboDocuments=s}static createSynthesizedRemoteEventForCurrentChange(e,r,n){const a=new Map;return a.set(e,Iw.createSynthesizedTargetChangeForCurrentChange(e,r,n)),new Ej(wn.min(),a,new Ws(Gn),Fu(),ta())}}class Iw{constructor(e,r,n,a,s){this.resumeToken=e,this.current=r,this.addedDocuments=n,this.modifiedDocuments=a,this.removedDocuments=s}static createSynthesizedTargetChangeForCurrentChange(e,r,n){return new Iw(n,r,ta(),ta(),ta())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class cE{constructor(e,r,n,a){this.Re=e,this.removedTargetIds=r,this.key=n,this.Ve=a}}class vZ{constructor(e,r){this.targetId=e,this.me=r}}class yZ{constructor(e,r,n=qi.EMPTY_BYTE_STRING,a=null){this.state=e,this.targetIds=r,this.resumeToken=n,this.cause=a}}class M7{constructor(){this.fe=0,this.ge=U7(),this.pe=qi.EMPTY_BYTE_STRING,this.ye=!1,this.we=!0}get current(){return this.ye}get resumeToken(){return this.pe}get Se(){return this.fe!==0}get be(){return this.we}De(e){e.approximateByteSize()>0&&(this.we=!0,this.pe=e)}ve(){let e=ta(),r=ta(),n=ta();return this.ge.forEach((a,s)=>{switch(s){case 0:e=e.add(a);break;case 2:r=r.add(a);break;case 1:n=n.add(a);break;default:cn()}}),new Iw(this.pe,this.ye,e,r,n)}Ce(){this.we=!1,this.ge=U7()}Fe(e,r){this.we=!0,this.ge=this.ge.insert(e,r)}Me(e){this.we=!0,this.ge=this.ge.remove(e)}xe(){this.fe+=1}Oe(){this.fe-=1,mn(this.fe>=0)}Ne(){this.we=!0,this.ye=!0}}class Hve{constructor(e){this.Le=e,this.Be=new Map,this.ke=Fu(),this.qe=L7(),this.Qe=new Ws(Gn)}Ke(e){for(const r of e.Re)e.Ve&&e.Ve.isFoundDocument()?this.$e(r,e.Ve):this.Ue(r,e.key,e.Ve);for(const r of e.removedTargetIds)this.Ue(r,e.key,e.Ve)}We(e){this.forEachTarget(e,r=>{const n=this.Ge(r);switch(e.state){case 0:this.ze(r)&&n.De(e.resumeToken);break;case 1:n.Oe(),n.Se||n.Ce(),n.De(e.resumeToken);break;case 2:n.Oe(),n.Se||this.removeTarget(r);break;case 3:this.ze(r)&&(n.Ne(),n.De(e.resumeToken));break;case 4:this.ze(r)&&(this.je(r),n.De(e.resumeToken));break;default:cn()}})}forEachTarget(e,r){e.targetIds.length>0?e.targetIds.forEach(r):this.Be.forEach((n,a)=>{this.ze(a)&&r(a)})}He(e){const r=e.targetId,n=e.me.count,a=this.Je(r);if(a){const s=a.target;if(iS(s))if(n===0){const o=new Wr(s.path);this.Ue(r,o,Vs.newNoDocument(o,wn.min()))}else mn(n===1);else{const o=this.Ye(r);if(o!==n){const l=this.Ze(e),c=l?this.Xe(l,e,o):1;if(c!==0){this.je(r);const u=c===2?"TargetPurposeExistenceFilterMismatchBloom":"TargetPurposeExistenceFilterMismatch";this.Qe=this.Qe.insert(r,u)}}}}}Ze(e){const r=e.me.unchangedNames;if(!r||!r.bits)return null;const{bits:{bitmap:n="",padding:a=0},hashCount:s=0}=r;let o,l;try{o=xm(n).toUint8Array()}catch(c){if(c instanceof KJ)return gm("Decoding the base64 bloom filter in existence filter failed ("+c.message+"); ignoring the bloom filter and falling back to full re-query."),null;throw c}try{l=new e6(o,a,s)}catch(c){return gm(c instanceof Ly?"BloomFilter error: ":"Applying bloom filter failed: ",c),null}return l.Ie===0?null:l}Xe(e,r,n){return r.me.count===n-this.nt(e,r.targetId)?0:2}nt(e,r){const n=this.Le.getRemoteKeysForTarget(r);let a=0;return n.forEach(s=>{const o=this.Le.tt(),l=`projects/${o.projectId}/databases/${o.database}/documents/${s.path.canonicalString()}`;e.mightContain(l)||(this.Ue(r,s,null),a++)}),a}rt(e){const r=new Map;this.Be.forEach((s,o)=>{const l=this.Je(o);if(l){if(s.current&&iS(l.target)){const c=new Wr(l.target.path);this.ke.get(c)!==null||this.it(o,c)||this.Ue(o,c,Vs.newNoDocument(c,e))}s.be&&(r.set(o,s.ve()),s.Ce())}});let n=ta();this.qe.forEach((s,o)=>{let l=!0;o.forEachWhile(c=>{const u=this.Je(c);return!u||u.purpose==="TargetPurposeLimboResolution"||(l=!1,!1)}),l&&(n=n.add(s))}),this.ke.forEach((s,o)=>o.setReadTime(e));const a=new Ej(e,r,this.Qe,this.ke,n);return this.ke=Fu(),this.qe=L7(),this.Qe=new Ws(Gn),a}$e(e,r){if(!this.ze(e))return;const n=this.it(e,r.key)?2:0;this.Ge(e).Fe(r.key,n),this.ke=this.ke.insert(r.key,r),this.qe=this.qe.insert(r.key,this.st(r.key).add(e))}Ue(e,r,n){if(!this.ze(e))return;const a=this.Ge(e);this.it(e,r)?a.Fe(r,1):a.Me(r),this.qe=this.qe.insert(r,this.st(r).delete(e)),n&&(this.ke=this.ke.insert(r,n))}removeTarget(e){this.Be.delete(e)}Ye(e){const r=this.Ge(e).ve();return this.Le.getRemoteKeysForTarget(e).size+r.addedDocuments.size-r.removedDocuments.size}xe(e){this.Ge(e).xe()}Ge(e){let r=this.Be.get(e);return r||(r=new M7,this.Be.set(e,r)),r}st(e){let r=this.qe.get(e);return r||(r=new cs(Gn),this.qe=this.qe.insert(e,r)),r}ze(e){const r=this.Je(e)!==null;return r||Pr("WatchChangeAggregator","Detected inactive target",e),r}Je(e){const r=this.Be.get(e);return r&&r.Se?null:this.Le.ot(e)}je(e){this.Be.set(e,new M7),this.Le.getRemoteKeysForTarget(e).forEach(r=>{this.Ue(e,r,null)})}it(e,r){return this.Le.getRemoteKeysForTarget(e).has(r)}}function L7(){return new Ws(Wr.comparator)}function U7(){return new Ws(Wr.comparator)}const $ve={asc:"ASCENDING",desc:"DESCENDING"},Gve={"<":"LESS_THAN","<=":"LESS_THAN_OR_EQUAL",">":"GREATER_THAN",">=":"GREATER_THAN_OR_EQUAL","==":"EQUAL","!=":"NOT_EQUAL","array-contains":"ARRAY_CONTAINS",in:"IN","not-in":"NOT_IN","array-contains-any":"ARRAY_CONTAINS_ANY"},Kve={and:"AND",or:"OR"};class qve{constructor(e,r){this.databaseId=e,this.useProto3Json=r}}function YT(t,e){return t.useProto3Json||Cw(e)?e:{value:e}}function Ov(t,e){return t.useProto3Json?`${new Date(1e3*e.seconds).toISOString().replace(/\.\d*/,"").replace("Z","")}.${("000000000"+e.nanoseconds).slice(-9)}Z`:{seconds:""+e.seconds,nanos:e.nanoseconds}}function bZ(t,e){return t.useProto3Json?e.toBase64():e.toUint8Array()}function zve(t,e){return Ov(t,e.toTimestamp())}function el(t){return mn(!!t),wn.fromTimestamp(function(r){const n=gA(r);return new Ar(n.seconds,n.nanos)}(t))}function t6(t,e){return JT(t,e).canonicalString()}function JT(t,e){const r=function(a){return new Pa(["projects",a.projectId,"databases",a.database])}(t).child("documents");return e===void 0?r:r.child(e)}function wZ(t){const e=Pa.fromString(t);return mn(BZ(e)),e}function y2(t,e){return t6(t.databaseId,e.path)}function rA(t,e){const r=wZ(e);if(r.get(1)!==t.databaseId.projectId)throw new Lr(ir.INVALID_ARGUMENT,"Tried to deserialize key from different project: "+r.get(1)+" vs "+t.databaseId.projectId);if(r.get(3)!==t.databaseId.database)throw new Lr(ir.INVALID_ARGUMENT,"Tried to deserialize key from different database: "+r.get(3)+" vs "+t.databaseId.database);return new Wr(_Z(r))}function NZ(t,e){return t6(t.databaseId,e)}function CZ(t){const e=wZ(t);return e.length===4?Pa.emptyPath():_Z(e)}function ZT(t){return new Pa(["projects",t.databaseId.projectId,"databases",t.databaseId.database]).canonicalString()}function _Z(t){return mn(t.length>4&&t.get(4)==="documents"),t.popFirst(5)}function Q7(t,e,r){return{name:y2(t,e),fields:r.value.mapValue.fields}}function Wve(t,e,r){const n=rA(t,e.name),a=el(e.updateTime),s=e.createTime?el(e.createTime):wn.min(),o=new _l({mapValue:{fields:e.fields}}),l=Vs.newFoundDocument(n,a,s,o);return r&&l.setHasCommittedMutations(),r?l.setHasCommittedMutations():l}function Xve(t,e){return"found"in e?function(n,a){mn(!!a.found),a.found.name,a.found.updateTime;const s=rA(n,a.found.name),o=el(a.found.updateTime),l=a.found.createTime?el(a.found.createTime):wn.min(),c=new _l({mapValue:{fields:a.found.fields}});return Vs.newFoundDocument(s,o,l,c)}(t,e):"missing"in e?function(n,a){mn(!!a.missing),mn(!!a.readTime);const s=rA(n,a.missing),o=el(a.readTime);return Vs.newNoDocument(s,o)}(t,e):cn()}function Yve(t,e){let r;if("targetChange"in e){e.targetChange;const n=function(u){return u==="NO_CHANGE"?0:u==="ADD"?1:u==="REMOVE"?2:u==="CURRENT"?3:u==="RESET"?4:cn()}(e.targetChange.targetChangeType||"NO_CHANGE"),a=e.targetChange.targetIds||[],s=function(u,d){return u.useProto3Json?(mn(d===void 0||typeof d=="string"),qi.fromBase64String(d||"")):(mn(d===void 0||d instanceof Buffer||d instanceof Uint8Array),qi.fromUint8Array(d||new Uint8Array))}(t,e.targetChange.resumeToken),o=e.targetChange.cause,l=o&&function(u){const d=u.code===void 0?ir.UNKNOWN:xZ(u.code);return new Lr(d,u.message||"")}(o);r=new yZ(n,a,s,l||null)}else if("documentChange"in e){e.documentChange;const n=e.documentChange;n.document,n.document.name,n.document.updateTime;const a=rA(t,n.document.name),s=el(n.document.updateTime),o=n.document.createTime?el(n.document.createTime):wn.min(),l=new _l({mapValue:{fields:n.document.fields}}),c=Vs.newFoundDocument(a,s,o,l),u=n.targetIds||[],d=n.removedTargetIds||[];r=new cE(u,d,c.key,c)}else if("documentDelete"in e){e.documentDelete;const n=e.documentDelete;n.document;const a=rA(t,n.document),s=n.readTime?el(n.readTime):wn.min(),o=Vs.newNoDocument(a,s),l=n.removedTargetIds||[];r=new cE([],l,o.key,o)}else if("documentRemove"in e){e.documentRemove;const n=e.documentRemove;n.document;const a=rA(t,n.document),s=n.removedTargetIds||[];r=new cE([],s,a,null)}else{if(!("filter"in e))return cn();{e.filter;const n=e.filter;n.targetId;const{count:a=0,unchangedNames:s}=n,o=new Uve(a,s),l=n.targetId;r=new vZ(l,o)}}return r}function b2(t,e){let r;if(e instanceof c1)r={update:Q7(t,e.key,e.value)};else if(e instanceof u1)r={delete:y2(t,e.key)};else if(e instanceof FA)r={update:Q7(t,e.key,e.data),updateMask:n1e(e.fieldMask)};else{if(!(e instanceof XD))return cn();r={verify:y2(t,e.key)}}return e.fieldTransforms.length>0&&(r.updateTransforms=e.fieldTransforms.map(n=>function(s,o){const l=o.transform;if(l instanceof x2)return{fieldPath:o.field.canonicalString(),setToServerValue:"REQUEST_TIME"};if(l instanceof sg)return{fieldPath:o.field.canonicalString(),appendMissingElements:{values:l.elements}};if(l instanceof Fv)return{fieldPath:o.field.canonicalString(),removeAllFromArray:{values:l.elements}};if(l instanceof v2)return{fieldPath:o.field.canonicalString(),increment:l.Pe};throw cn()}(0,n))),e.precondition.isNone||(r.currentDocument=function(a,s){return s.updateTime!==void 0?{updateTime:zve(a,s.updateTime)}:s.exists!==void 0?{exists:s.exists}:cn()}(t,e.precondition)),r}function ek(t,e){const r=e.currentDocument?function(s){return s.updateTime!==void 0?$s.updateTime(el(s.updateTime)):s.exists!==void 0?$s.exists(s.exists):$s.none()}(e.currentDocument):$s.none(),n=e.updateTransforms?e.updateTransforms.map(a=>function(o,l){let c=null;if("setToServerValue"in l)mn(l.setToServerValue==="REQUEST_TIME"),c=new x2;else if("appendMissingElements"in l){const d=l.appendMissingElements.values||[];c=new sg(d)}else if("removeAllFromArray"in l){const d=l.removeAllFromArray.values||[];c=new Fv(d)}else"increment"in l?c=new v2(o,l.increment):cn();const u=Hs.fromServerFormat(l.fieldPath);return new AZ(u,c)}(t,a)):[];if(e.update){e.update.name;const a=rA(t,e.update.name),s=new _l({mapValue:{fields:e.update.fields}});if(e.updateMask){const o=function(c){const u=c.fieldPaths||[];return new eu(u.map(d=>Hs.fromServerFormat(d)))}(e.updateMask);return new FA(a,s,o,r,n)}return new c1(a,s,r,n)}if(e.delete){const a=rA(t,e.delete);return new u1(a,r)}if(e.verify){const a=rA(t,e.verify);return new XD(a,r)}return cn()}function Jve(t,e){return t&&t.length>0?(mn(e!==void 0),t.map(r=>function(a,s){let o=a.updateTime?el(a.updateTime):el(s);return o.isEqual(wn.min())&&(o=el(s)),new Rve(o,a.transformResults||[])}(r,e))):[]}function EZ(t,e){return{documents:[NZ(t,e.path)]}}function SZ(t,e){const r={structuredQuery:{}},n=e.path;let a;e.collectionGroup!==null?(a=n,r.structuredQuery.from=[{collectionId:e.collectionGroup,allDescendants:!0}]):(a=n.popLast(),r.structuredQuery.from=[{collectionId:n.lastSegment()}]),r.parent=NZ(t,a);const s=function(u){if(u.length!==0)return PZ(es.create(u,"and"))}(e.filters);s&&(r.structuredQuery.where=s);const o=function(u){if(u.length!==0)return u.map(d=>function(A){return{field:Ex(A.field),direction:e1e(A.dir)}}(d))}(e.orderBy);o&&(r.structuredQuery.orderBy=o);const l=YT(t,e.limit);return l!==null&&(r.structuredQuery.limit=l),e.startAt&&(r.structuredQuery.startAt=function(u){return{before:u.inclusive,values:u.position}}(e.startAt)),e.endAt&&(r.structuredQuery.endAt=function(u){return{before:!u.inclusive,values:u.position}}(e.endAt)),{_t:r,parent:a}}function IZ(t){let e=CZ(t.parent);const r=t.structuredQuery,n=r.from?r.from.length:0;let a=null;if(n>0){mn(n===1);const d=r.from[0];d.allDescendants?a=d.collectionId:e=e.child(d.collectionId)}let s=[];r.where&&(s=function(f){const A=jZ(f);return A instanceof es&&zD(A)?A.getFilters():[A]}(r.where));let o=[];r.orderBy&&(o=function(f){return f.map(A=>function(m){return new g2(Sx(m.field),function(x){switch(x){case"ASCENDING":return"asc";case"DESCENDING":return"desc";default:return}}(m.direction))}(A))}(r.orderBy));let l=null;r.limit&&(l=function(f){let A;return A=typeof f=="object"?f.value:f,Cw(A)?null:A}(r.limit));let c=null;r.startAt&&(c=function(f){const A=!!f.before,h=f.values||[];return new Tv(h,A)}(r.startAt));let u=null;return r.endAt&&(u=function(f){const A=!f.before,h=f.values||[];return new Tv(h,A)}(r.endAt)),Cve(e,a,o,s,l,"F",c,u)}function Zve(t,e){const r=function(a){switch(a){case"TargetPurposeListen":return null;case"TargetPurposeExistenceFilterMismatch":return"existence-filter-mismatch";case"TargetPurposeExistenceFilterMismatchBloom":return"existence-filter-mismatch-bloom";case"TargetPurposeLimboResolution":return"limbo-document";default:return cn()}}(e.purpose);return r==null?null:{"goog-listen-tags":r}}function jZ(t){return t.unaryFilter!==void 0?function(r){switch(r.unaryFilter.op){case"IS_NAN":const n=Sx(r.unaryFilter.field);return Aa.create(n,"==",{doubleValue:NaN});case"IS_NULL":const a=Sx(r.unaryFilter.field);return Aa.create(a,"==",{nullValue:"NULL_VALUE"});case"IS_NOT_NAN":const s=Sx(r.unaryFilter.field);return Aa.create(s,"!=",{doubleValue:NaN});case"IS_NOT_NULL":const o=Sx(r.unaryFilter.field);return Aa.create(o,"!=",{nullValue:"NULL_VALUE"});default:return cn()}}(t):t.fieldFilter!==void 0?function(r){return Aa.create(Sx(r.fieldFilter.field),function(a){switch(a){case"EQUAL":return"==";case"NOT_EQUAL":return"!=";case"GREATER_THAN":return">";case"GREATER_THAN_OR_EQUAL":return">=";case"LESS_THAN":return"<";case"LESS_THAN_OR_EQUAL":return"<=";case"ARRAY_CONTAINS":return"array-contains";case"IN":return"in";case"NOT_IN":return"not-in";case"ARRAY_CONTAINS_ANY":return"array-contains-any";default:return cn()}}(r.fieldFilter.op),r.fieldFilter.value)}(t):t.compositeFilter!==void 0?function(r){return es.create(r.compositeFilter.filters.map(n=>jZ(n)),function(a){switch(a){case"AND":return"and";case"OR":return"or";default:return cn()}}(r.compositeFilter.op))}(t):cn()}function e1e(t){return $ve[t]}function t1e(t){return Gve[t]}function r1e(t){return Kve[t]}function Ex(t){return{fieldPath:t.canonicalString()}}function Sx(t){return Hs.fromServerFormat(t.fieldPath)}function PZ(t){return t instanceof Aa?function(r){if(r.op==="=="){if(C7(r.value))return{unaryFilter:{field:Ex(r.field),op:"IS_NAN"}};if(N7(r.value))return{unaryFilter:{field:Ex(r.field),op:"IS_NULL"}}}else if(r.op==="!="){if(C7(r.value))return{unaryFilter:{field:Ex(r.field),op:"IS_NOT_NAN"}};if(N7(r.value))return{unaryFilter:{field:Ex(r.field),op:"IS_NOT_NULL"}}}return{fieldFilter:{field:Ex(r.field),op:t1e(r.op),value:r.value}}}(t):t instanceof es?function(r){const n=r.getFilters().map(a=>PZ(a));return n.length===1?n[0]:{compositeFilter:{op:r1e(r.op),filters:n}}}(t):cn()}function n1e(t){const e=[];return t.fields.forEach(r=>e.push(r.canonicalString())),{fieldPaths:e}}function BZ(t){return t.length>=4&&t.get(0)==="projects"&&t.get(2)==="databases"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class zh{constructor(e,r,n,a,s=wn.min(),o=wn.min(),l=qi.EMPTY_BYTE_STRING,c=null){this.target=e,this.targetId=r,this.purpose=n,this.sequenceNumber=a,this.snapshotVersion=s,this.lastLimboFreeSnapshotVersion=o,this.resumeToken=l,this.expectedCount=c}withSequenceNumber(e){return new zh(this.target,this.targetId,this.purpose,e,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,this.expectedCount)}withResumeToken(e,r){return new zh(this.target,this.targetId,this.purpose,this.sequenceNumber,r,this.lastLimboFreeSnapshotVersion,e,null)}withExpectedCount(e){return new zh(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,e)}withLastLimboFreeSnapshotVersion(e){return new zh(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,e,this.resumeToken,this.expectedCount)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class TZ{constructor(e){this.ct=e}}function a1e(t,e){let r;if(e.document)r=Wve(t.ct,e.document,!!e.hasCommittedMutations);else if(e.noDocument){const n=Wr.fromSegments(e.noDocument.path),a=og(e.noDocument.readTime);r=Vs.newNoDocument(n,a),e.hasCommittedMutations&&r.setHasCommittedMutations()}else{if(!e.unknownDocument)return cn();{const n=Wr.fromSegments(e.unknownDocument.path),a=og(e.unknownDocument.version);r=Vs.newUnknownDocument(n,a)}}return e.readTime&&r.setReadTime(function(a){const s=new Ar(a[0],a[1]);return wn.fromTimestamp(s)}(e.readTime)),r}function V7(t,e){const r=e.key,n={prefixPath:r.getCollectionPath().popLast().toArray(),collectionGroup:r.collectionGroup,documentId:r.path.lastSegment(),readTime:cS(e.readTime),hasCommittedMutations:e.hasCommittedMutations};if(e.isFoundDocument())n.document=function(s,o){return{name:y2(s,o.key),fields:o.data.value.mapValue.fields,updateTime:Ov(s,o.version.toTimestamp()),createTime:Ov(s,o.createTime.toTimestamp())}}(t.ct,e);else if(e.isNoDocument())n.noDocument={path:r.path.toArray(),readTime:ig(e.version)};else{if(!e.isUnknownDocument())return cn();n.unknownDocument={path:r.path.toArray(),version:ig(e.version)}}return n}function cS(t){const e=t.toTimestamp();return[e.seconds,e.nanoseconds]}function ig(t){const e=t.toTimestamp();return{seconds:e.seconds,nanoseconds:e.nanoseconds}}function og(t){const e=new Ar(t.seconds,t.nanoseconds);return wn.fromTimestamp(e)}function Ap(t,e){const r=(e.baseMutations||[]).map(s=>ek(t.ct,s));for(let s=0;s<e.mutations.length-1;++s){const o=e.mutations[s];if(s+1<e.mutations.length&&e.mutations[s+1].transform!==void 0){const l=e.mutations[s+1];o.updateTransforms=l.transform.fieldTransforms,e.mutations.splice(s+1,1),++s}}const n=e.mutations.map(s=>ek(t.ct,s)),a=Ar.fromMillis(e.localWriteTimeMs);return new YD(e.batchId,a,r,n)}function Uy(t){const e=og(t.readTime),r=t.lastLimboFreeSnapshotVersion!==void 0?og(t.lastLimboFreeSnapshotVersion):wn.min();let n;return n=function(s){return s.documents!==void 0}(t.query)?function(s){return mn(s.documents.length===1),Id(Ew(CZ(s.documents[0])))}(t.query):function(s){return Id(IZ(s))}(t.query),new zh(n,t.targetId,"TargetPurposeListen",t.lastListenSequenceNumber,e,r,qi.fromBase64String(t.resumeToken))}function kZ(t,e){const r=ig(e.snapshotVersion),n=ig(e.lastLimboFreeSnapshotVersion);let a;a=iS(e.target)?EZ(t.ct,e.target):SZ(t.ct,e.target)._t;const s=e.resumeToken.toBase64();return{targetId:e.targetId,canonicalId:ag(e.target),readTime:r,resumeToken:s,lastListenSequenceNumber:e.sequenceNumber,lastLimboFreeSnapshotVersion:n,query:a}}function FZ(t){const e=IZ({parent:t.parent,structuredQuery:t.structuredQuery});return t.limitType==="LAST"?lS(e,e.limit,"L"):e}function _3(t,e){return new ZD(e.largestBatchId,ek(t.ct,e.overlayMutation))}function H7(t,e){const r=e.path.lastSegment();return[t,Ic(e.path.popLast()),r]}function $7(t,e,r,n){return{indexId:t,uid:e,sequenceNumber:r,readTime:ig(n.readTime),documentKey:Ic(n.documentKey.path),largestBatchId:n.largestBatchId}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class s1e{getBundleMetadata(e,r){return G7(e).get(r).next(n=>{if(n)return function(s){return{id:s.bundleId,createTime:og(s.createTime),version:s.version}}(n)})}saveBundleMetadata(e,r){return G7(e).put(function(a){return{bundleId:a.id,createTime:ig(el(a.createTime)),version:a.version}}(r))}getNamedQuery(e,r){return K7(e).get(r).next(n=>{if(n)return function(s){return{name:s.name,query:FZ(s.bundledQuery),readTime:og(s.readTime)}}(n)})}saveNamedQuery(e,r){return K7(e).put(function(a){return{name:a.name,readTime:ig(el(a.readTime)),bundledQuery:a.bundledQuery}}(r))}}function G7(t){return ko(t,"bundles")}function K7(t){return ko(t,"namedQueries")}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Sj{constructor(e,r){this.serializer=e,this.userId=r}static lt(e,r){const n=r.uid||"";return new Sj(e,n)}getOverlay(e,r){return ry(e).get(H7(this.userId,r)).next(n=>n?_3(this.serializer,n):null)}getOverlays(e,r){const n=Xf();return Ht.forEach(r,a=>this.getOverlay(e,a).next(s=>{s!==null&&n.set(a,s)})).next(()=>n)}saveOverlays(e,r,n){const a=[];return n.forEach((s,o)=>{const l=new ZD(r,o);a.push(this.ht(e,l))}),Ht.waitFor(a)}removeOverlaysForBatchId(e,r,n){const a=new Set;r.forEach(o=>a.add(Ic(o.getCollectionPath())));const s=[];return a.forEach(o=>{const l=IDBKeyRange.bound([this.userId,o,n],[this.userId,o,n+1],!1,!0);s.push(ry(e).j("collectionPathOverlayIndex",l))}),Ht.waitFor(s)}getOverlaysForCollection(e,r,n){const a=Xf(),s=Ic(r),o=IDBKeyRange.bound([this.userId,s,n],[this.userId,s,Number.POSITIVE_INFINITY],!0);return ry(e).U("collectionPathOverlayIndex",o).next(l=>{for(const c of l){const u=_3(this.serializer,c);a.set(u.getKey(),u)}return a})}getOverlaysForCollectionGroup(e,r,n,a){const s=Xf();let o;const l=IDBKeyRange.bound([this.userId,r,n],[this.userId,r,Number.POSITIVE_INFINITY],!0);return ry(e).J({index:"collectionGroupOverlayIndex",range:l},(c,u,d)=>{const f=_3(this.serializer,u);s.size()<a||f.largestBatchId===o?(s.set(f.getKey(),f),o=f.largestBatchId):d.done()}).next(()=>s)}ht(e,r){return ry(e).put(function(a,s,o){const[l,c,u]=H7(s,o.mutation.key);return{userId:s,collectionPath:c,documentId:u,collectionGroup:o.mutation.key.getCollectionGroup(),largestBatchId:o.largestBatchId,overlayMutation:b2(a.ct,o.mutation)}}(this.serializer,this.userId,r))}}function ry(t){return ko(t,"documentOverlays")}/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class i1e{Pt(e){return ko(e,"globals")}getSessionToken(e){return this.Pt(e).get("sessionToken").next(r=>{const n=r==null?void 0:r.value;return n?qi.fromUint8Array(n):qi.EMPTY_BYTE_STRING})}setSessionToken(e,r){return this.Pt(e).put({name:"sessionToken",value:r.toUint8Array()})}}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class mp{constructor(){}It(e,r){this.Tt(e,r),r.Et()}Tt(e,r){if("nullValue"in e)this.dt(r,5);else if("booleanValue"in e)this.dt(r,10),r.At(e.booleanValue?1:0);else if("integerValue"in e)this.dt(r,15),r.At(Us(e.integerValue));else if("doubleValue"in e){const n=Us(e.doubleValue);isNaN(n)?this.dt(r,13):(this.dt(r,15),f2(n)?r.At(0):r.At(n))}else if("timestampValue"in e){let n=e.timestampValue;this.dt(r,20),typeof n=="string"&&(n=gA(n)),r.Rt(`${n.seconds||""}`),r.At(n.nanos||0)}else if("stringValue"in e)this.Vt(e.stringValue,r),this.ft(r);else if("bytesValue"in e)this.dt(r,30),r.gt(xm(e.bytesValue)),this.ft(r);else if("referenceValue"in e)this.yt(e.referenceValue,r);else if("geoPointValue"in e){const n=e.geoPointValue;this.dt(r,45),r.At(n.latitude||0),r.At(n.longitude||0)}else"mapValue"in e?qJ(e)?this.dt(r,Number.MAX_SAFE_INTEGER):wj(e)?this.wt(e.mapValue,r):(this.St(e.mapValue,r),this.ft(r)):"arrayValue"in e?(this.bt(e.arrayValue,r),this.ft(r)):cn()}Vt(e,r){this.dt(r,25),this.Dt(e,r)}Dt(e,r){r.Rt(e)}St(e,r){const n=e.fields||{};this.dt(r,55);for(const a of Object.keys(n))this.Vt(a,r),this.Tt(n[a],r)}wt(e,r){var n,a;const s=e.fields||{};this.dt(r,53);const o="value",l=((a=(n=s[o].arrayValue)===null||n===void 0?void 0:n.values)===null||a===void 0?void 0:a.length)||0;this.dt(r,15),r.At(Us(l)),this.Vt(o,r),this.Tt(s[o],r)}bt(e,r){const n=e.values||[];this.dt(r,50);for(const a of n)this.Tt(a,r)}yt(e,r){this.dt(r,37),Wr.fromName(e).path.forEach(n=>{this.dt(r,60),this.Dt(n,r)})}dt(e,r){e.At(r)}ft(e){e.At(2)}}mp.vt=new mp;function o1e(t){if(t===0)return 8;let e=0;return!(t>>4)&&(e+=4,t<<=4),!(t>>6)&&(e+=2,t<<=2),!(t>>7)&&(e+=1),e}function q7(t){const e=64-function(n){let a=0;for(let s=0;s<8;++s){const o=o1e(255&n[s]);if(a+=o,o!==8)break}return a}(t);return Math.ceil(e/8)}class l1e{constructor(){this.buffer=new Uint8Array(1024),this.position=0}Ct(e){const r=e[Symbol.iterator]();let n=r.next();for(;!n.done;)this.Ft(n.value),n=r.next();this.Mt()}xt(e){const r=e[Symbol.iterator]();let n=r.next();for(;!n.done;)this.Ot(n.value),n=r.next();this.Nt()}Lt(e){for(const r of e){const n=r.charCodeAt(0);if(n<128)this.Ft(n);else if(n<2048)this.Ft(960|n>>>6),this.Ft(128|63&n);else if(r<"\uD800"||"\uDBFF"<r)this.Ft(480|n>>>12),this.Ft(128|63&n>>>6),this.Ft(128|63&n);else{const a=r.codePointAt(0);this.Ft(240|a>>>18),this.Ft(128|63&a>>>12),this.Ft(128|63&a>>>6),this.Ft(128|63&a)}}this.Mt()}Bt(e){for(const r of e){const n=r.charCodeAt(0);if(n<128)this.Ot(n);else if(n<2048)this.Ot(960|n>>>6),this.Ot(128|63&n);else if(r<"\uD800"||"\uDBFF"<r)this.Ot(480|n>>>12),this.Ot(128|63&n>>>6),this.Ot(128|63&n);else{const a=r.codePointAt(0);this.Ot(240|a>>>18),this.Ot(128|63&a>>>12),this.Ot(128|63&a>>>6),this.Ot(128|63&a)}}this.Nt()}kt(e){const r=this.qt(e),n=q7(r);this.Qt(1+n),this.buffer[this.position++]=255&n;for(let a=r.length-n;a<r.length;++a)this.buffer[this.position++]=255&r[a]}Kt(e){const r=this.qt(e),n=q7(r);this.Qt(1+n),this.buffer[this.position++]=~(255&n);for(let a=r.length-n;a<r.length;++a)this.buffer[this.position++]=~(255&r[a])}$t(){this.Ut(255),this.Ut(255)}Wt(){this.Gt(255),this.Gt(255)}reset(){this.position=0}seed(e){this.Qt(e.length),this.buffer.set(e,this.position),this.position+=e.length}zt(){return this.buffer.slice(0,this.position)}qt(e){const r=function(s){const o=new DataView(new ArrayBuffer(8));return o.setFloat64(0,s,!1),new Uint8Array(o.buffer)}(e),n=(128&r[0])!=0;r[0]^=n?255:128;for(let a=1;a<r.length;++a)r[a]^=n?255:0;return r}Ft(e){const r=255&e;r===0?(this.Ut(0),this.Ut(255)):r===255?(this.Ut(255),this.Ut(0)):this.Ut(r)}Ot(e){const r=255&e;r===0?(this.Gt(0),this.Gt(255)):r===255?(this.Gt(255),this.Gt(0)):this.Gt(e)}Mt(){this.Ut(0),this.Ut(1)}Nt(){this.Gt(0),this.Gt(1)}Ut(e){this.Qt(1),this.buffer[this.position++]=e}Gt(e){this.Qt(1),this.buffer[this.position++]=~e}Qt(e){const r=e+this.position;if(r<=this.buffer.length)return;let n=2*this.buffer.length;n<r&&(n=r);const a=new Uint8Array(n);a.set(this.buffer),this.buffer=a}}class c1e{constructor(e){this.jt=e}gt(e){this.jt.Ct(e)}Rt(e){this.jt.Lt(e)}At(e){this.jt.kt(e)}Et(){this.jt.$t()}}class u1e{constructor(e){this.jt=e}gt(e){this.jt.xt(e)}Rt(e){this.jt.Bt(e)}At(e){this.jt.Kt(e)}Et(){this.jt.Wt()}}class ny{constructor(){this.jt=new l1e,this.Ht=new c1e(this.jt),this.Jt=new u1e(this.jt)}seed(e){this.jt.seed(e)}Yt(e){return e===0?this.Ht:this.Jt}zt(){return this.jt.zt()}reset(){this.jt.reset()}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class pp{constructor(e,r,n,a){this.indexId=e,this.documentKey=r,this.arrayValue=n,this.directionalValue=a}Zt(){const e=this.directionalValue.length,r=e===0||this.directionalValue[e-1]===255?e+1:e,n=new Uint8Array(r);return n.set(this.directionalValue,0),r!==e?n.set([0],this.directionalValue.length):++n[n.length-1],new pp(this.indexId,this.documentKey,this.arrayValue,n)}}function o0(t,e){let r=t.indexId-e.indexId;return r!==0?r:(r=z7(t.arrayValue,e.arrayValue),r!==0?r:(r=z7(t.directionalValue,e.directionalValue),r!==0?r:Wr.comparator(t.documentKey,e.documentKey)))}function z7(t,e){for(let r=0;r<t.length&&r<e.length;++r){const n=t[r]-e[r];if(n!==0)return n}return t.length-e.length}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class W7{constructor(e){this.Xt=new cs((r,n)=>Hs.comparator(r.field,n.field)),this.collectionId=e.collectionGroup!=null?e.collectionGroup:e.path.lastSegment(),this.en=e.orderBy,this.tn=[];for(const r of e.filters){const n=r;n.isInequality()?this.Xt=this.Xt.add(n):this.tn.push(n)}}get nn(){return this.Xt.size>1}rn(e){if(mn(e.collectionGroup===this.collectionId),this.nn)return!1;const r=HT(e);if(r!==void 0&&!this.sn(r))return!1;const n=ip(e);let a=new Set,s=0,o=0;for(;s<n.length&&this.sn(n[s]);++s)a=a.add(n[s].fieldPath.canonicalString());if(s===n.length)return!0;if(this.Xt.size>0){const l=this.Xt.getIterator().getNext();if(!a.has(l.field.canonicalString())){const c=n[s];if(!this.on(l,c)||!this._n(this.en[o++],c))return!1}++s}for(;s<n.length;++s){const l=n[s];if(o>=this.en.length||!this._n(this.en[o++],l))return!1}return!0}an(){if(this.nn)return null;let e=new cs(Hs.comparator);const r=[];for(const n of this.tn)if(!n.field.isKeyField())if(n.op==="array-contains"||n.op==="array-contains-any")r.push(new aE(n.field,2));else{if(e.has(n.field))continue;e=e.add(n.field),r.push(new aE(n.field,0))}for(const n of this.en)n.field.isKeyField()||e.has(n.field)||(e=e.add(n.field),r.push(new aE(n.field,n.dir==="asc"?0:1)));return new sS(sS.UNKNOWN_ID,this.collectionId,r,d2.empty())}sn(e){for(const r of this.tn)if(this.on(r,e))return!0;return!1}on(e,r){if(e===void 0||!e.field.isEqual(r.fieldPath))return!1;const n=e.op==="array-contains"||e.op==="array-contains-any";return r.kind===2===n}_n(e,r){return!!e.field.isEqual(r.fieldPath)&&(r.kind===0&&e.dir==="asc"||r.kind===1&&e.dir==="desc")}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function OZ(t){var e,r;if(mn(t instanceof Aa||t instanceof es),t instanceof Aa){if(t instanceof rZ){const a=((r=(e=t.value.arrayValue)===null||e===void 0?void 0:e.values)===null||r===void 0?void 0:r.map(s=>Aa.create(t.field,"==",s)))||[];return es.create(a,"or")}return t}const n=t.filters.map(a=>OZ(a));return es.create(n,t.op)}function d1e(t){if(t.getFilters().length===0)return[];const e=nk(OZ(t));return mn(DZ(e)),tk(e)||rk(e)?[e]:e.getFilters()}function tk(t){return t instanceof Aa}function rk(t){return t instanceof es&&zD(t)}function DZ(t){return tk(t)||rk(t)||function(r){if(r instanceof es&&qT(r)){for(const n of r.getFilters())if(!tk(n)&&!rk(n))return!1;return!0}return!1}(t)}function nk(t){if(mn(t instanceof Aa||t instanceof es),t instanceof Aa)return t;if(t.filters.length===1)return nk(t.filters[0]);const e=t.filters.map(n=>nk(n));let r=es.create(e,t.op);return r=uS(r),DZ(r)?r:(mn(r instanceof es),mn(kv(r)),mn(r.filters.length>1),r.filters.reduce((n,a)=>r6(n,a)))}function r6(t,e){let r;return mn(t instanceof Aa||t instanceof es),mn(e instanceof Aa||e instanceof es),r=t instanceof Aa?e instanceof Aa?function(a,s){return es.create([a,s],"and")}(t,e):X7(t,e):e instanceof Aa?X7(e,t):function(a,s){if(mn(a.filters.length>0&&s.filters.length>0),kv(a)&&kv(s))return ZJ(a,s.getFilters());const o=qT(a)?a:s,l=qT(a)?s:a,c=o.filters.map(u=>r6(u,l));return es.create(c,"or")}(t,e),uS(r)}function X7(t,e){if(kv(e))return ZJ(e,t.getFilters());{const r=e.filters.map(n=>r6(t,n));return es.create(r,"or")}}function uS(t){if(mn(t instanceof Aa||t instanceof es),t instanceof Aa)return t;const e=t.getFilters();if(e.length===1)return uS(e[0]);if(YJ(t))return t;const r=e.map(a=>uS(a)),n=[];return r.forEach(a=>{a instanceof Aa?n.push(a):a instanceof es&&(a.op===t.op?n.push(...a.filters):n.push(a))}),n.length===1?n[0]:es.create(n,t.op)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class f1e{constructor(){this.un=new n6}addToCollectionParentIndex(e,r){return this.un.add(r),Ht.resolve()}getCollectionParents(e,r){return Ht.resolve(this.un.getEntries(r))}addFieldIndex(e,r){return Ht.resolve()}deleteFieldIndex(e,r){return Ht.resolve()}deleteAllFieldIndexes(e){return Ht.resolve()}createTargetIndexes(e,r){return Ht.resolve()}getDocumentsMatchingTarget(e,r){return Ht.resolve(null)}getIndexType(e,r){return Ht.resolve(0)}getFieldIndexes(e,r){return Ht.resolve([])}getNextCollectionGroupToUpdate(e){return Ht.resolve(null)}getMinOffset(e,r){return Ht.resolve(Qu.min())}getMinOffsetFromCollectionGroup(e,r){return Ht.resolve(Qu.min())}updateCollectionGroup(e,r,n){return Ht.resolve()}updateIndexEntries(e,r){return Ht.resolve()}}class n6{constructor(){this.index={}}add(e){const r=e.lastSegment(),n=e.popLast(),a=this.index[r]||new cs(Pa.comparator),s=!a.has(n);return this.index[r]=a.add(n),s}has(e){const r=e.lastSegment(),n=e.popLast(),a=this.index[r];return a&&a.has(n)}getEntries(e){return(this.index[e]||new cs(Pa.comparator)).toArray()}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const rC=new Uint8Array(0);class h1e{constructor(e,r){this.databaseId=r,this.cn=new n6,this.ln=new Mm(n=>ag(n),(n,a)=>_w(n,a)),this.uid=e.uid||""}addToCollectionParentIndex(e,r){if(!this.cn.has(r)){const n=r.lastSegment(),a=r.popLast();e.addOnCommittedListener(()=>{this.cn.add(r)});const s={collectionId:n,parent:Ic(a)};return Y7(e).put(s)}return Ht.resolve()}getCollectionParents(e,r){const n=[],a=IDBKeyRange.bound([r,""],[DJ(r),""],!1,!0);return Y7(e).U(a).next(s=>{for(const o of s){if(o.collectionId!==r)break;n.push(Wf(o.parent))}return n})}addFieldIndex(e,r){const n=ay(e),a=function(l){return{indexId:l.indexId,collectionGroup:l.collectionGroup,fields:l.fields.map(c=>[c.fieldPath.canonicalString(),c.kind])}}(r);delete a.indexId;const s=n.add(a);if(r.indexState){const o=Zg(e);return s.next(l=>{o.put($7(l,this.uid,r.indexState.sequenceNumber,r.indexState.offset))})}return s.next()}deleteFieldIndex(e,r){const n=ay(e),a=Zg(e),s=Jg(e);return n.delete(r.indexId).next(()=>a.delete(IDBKeyRange.bound([r.indexId],[r.indexId+1],!1,!0))).next(()=>s.delete(IDBKeyRange.bound([r.indexId],[r.indexId+1],!1,!0)))}deleteAllFieldIndexes(e){const r=ay(e),n=Jg(e),a=Zg(e);return r.j().next(()=>n.j()).next(()=>a.j())}createTargetIndexes(e,r){return Ht.forEach(this.hn(r),n=>this.getIndexType(e,n).next(a=>{if(a===0||a===1){const s=new W7(n).an();if(s!=null)return this.addFieldIndex(e,s)}}))}getDocumentsMatchingTarget(e,r){const n=Jg(e);let a=!0;const s=new Map;return Ht.forEach(this.hn(r),o=>this.Pn(e,o).next(l=>{a&&(a=!!l),s.set(o,l)})).next(()=>{if(a){let o=ta();const l=[];return Ht.forEach(s,(c,u)=>{Pr("IndexedDbIndexManager",`Using index ${function(b){return`id=${b.indexId}|cg=${b.collectionGroup}|f=${b.fields.map(w=>`${w.fieldPath}:${w.kind}`).join(",")}`}(c)} to execute ${ag(r)}`);const d=function(b,w){const j=HT(w);if(j===void 0)return null;for(const I of oS(b,j.fieldPath))switch(I.op){case"array-contains-any":return I.value.arrayValue.values||[];case"array-contains":return[I.value]}return null}(u,c),f=function(b,w){const j=new Map;for(const I of ip(w))for(const _ of oS(b,I.fieldPath))switch(_.op){case"==":case"in":j.set(I.fieldPath.canonicalString(),_.value);break;case"not-in":case"!=":return j.set(I.fieldPath.canonicalString(),_.value),Array.from(j.values())}return null}(u,c),A=function(b,w){const j=[];let I=!0;for(const _ of ip(w)){const S=_.kind===0?j7(b,_.fieldPath,b.startAt):P7(b,_.fieldPath,b.startAt);j.push(S.value),I&&(I=S.inclusive)}return new Tv(j,I)}(u,c),h=function(b,w){const j=[];let I=!0;for(const _ of ip(w)){const S=_.kind===0?P7(b,_.fieldPath,b.endAt):j7(b,_.fieldPath,b.endAt);j.push(S.value),I&&(I=S.inclusive)}return new Tv(j,I)}(u,c),m=this.In(c,u,A),p=this.In(c,u,h),x=this.Tn(c,u,f),v=this.En(c.indexId,d,m,A.inclusive,p,h.inclusive,x);return Ht.forEach(v,y=>n.G(y,r.limit).next(b=>{b.forEach(w=>{const j=Wr.fromSegments(w.documentKey);o.has(j)||(o=o.add(j),l.push(j))})}))}).next(()=>l)}return Ht.resolve(null)})}hn(e){let r=this.ln.get(e);return r||(e.filters.length===0?r=[e]:r=d1e(es.create(e.filters,"and")).map(n=>WT(e.path,e.collectionGroup,e.orderBy,n.getFilters(),e.limit,e.startAt,e.endAt)),this.ln.set(e,r),r)}En(e,r,n,a,s,o,l){const c=(r!=null?r.length:1)*Math.max(n.length,s.length),u=c/(r!=null?r.length:1),d=[];for(let f=0;f<c;++f){const A=r?this.dn(r[f/u]):rC,h=this.An(e,A,n[f%u],a),m=this.Rn(e,A,s[f%u],o),p=l.map(x=>this.An(e,A,x,!0));d.push(...this.createRange(h,m,p))}return d}An(e,r,n,a){const s=new pp(e,Wr.empty(),r,n);return a?s:s.Zt()}Rn(e,r,n,a){const s=new pp(e,Wr.empty(),r,n);return a?s.Zt():s}Pn(e,r){const n=new W7(r),a=r.collectionGroup!=null?r.collectionGroup:r.path.lastSegment();return this.getFieldIndexes(e,a).next(s=>{let o=null;for(const l of s)n.rn(l)&&(!o||l.fields.length>o.fields.length)&&(o=l);return o})}getIndexType(e,r){let n=2;const a=this.hn(r);return Ht.forEach(a,s=>this.Pn(e,s).next(o=>{o?n!==0&&o.fields.length<function(c){let u=new cs(Hs.comparator),d=!1;for(const f of c.filters)for(const A of f.getFlattenedFilters())A.field.isKeyField()||(A.op==="array-contains"||A.op==="array-contains-any"?d=!0:u=u.add(A.field));for(const f of c.orderBy)f.field.isKeyField()||(u=u.add(f.field));return u.size+(d?1:0)}(s)&&(n=1):n=0})).next(()=>function(o){return o.limit!==null}(r)&&a.length>1&&n===2?1:n)}Vn(e,r){const n=new ny;for(const a of ip(e)){const s=r.data.field(a.fieldPath);if(s==null)return null;const o=n.Yt(a.kind);mp.vt.It(s,o)}return n.zt()}dn(e){const r=new ny;return mp.vt.It(e,r.Yt(0)),r.zt()}mn(e,r){const n=new ny;return mp.vt.It(m2(this.databaseId,r),n.Yt(function(s){const o=ip(s);return o.length===0?0:o[o.length-1].kind}(e))),n.zt()}Tn(e,r,n){if(n===null)return[];let a=[];a.push(new ny);let s=0;for(const o of ip(e)){const l=n[s++];for(const c of a)if(this.fn(r,o.fieldPath)&&p2(l))a=this.gn(a,o,l);else{const u=c.Yt(o.kind);mp.vt.It(l,u)}}return this.pn(a)}In(e,r,n){return this.Tn(e,r,n.position)}pn(e){const r=[];for(let n=0;n<e.length;++n)r[n]=e[n].zt();return r}gn(e,r,n){const a=[...e],s=[];for(const o of n.arrayValue.values||[])for(const l of a){const c=new ny;c.seed(l.zt()),mp.vt.It(o,c.Yt(r.kind)),s.push(c)}return s}fn(e,r){return!!e.filters.find(n=>n instanceof Aa&&n.field.isEqual(r)&&(n.op==="in"||n.op==="not-in"))}getFieldIndexes(e,r){const n=ay(e),a=Zg(e);return(r?n.U("collectionGroupIndex",IDBKeyRange.bound(r,r)):n.U()).next(s=>{const o=[];return Ht.forEach(s,l=>a.get([l.indexId,this.uid]).next(c=>{o.push(function(d,f){const A=f?new d2(f.sequenceNumber,new Qu(og(f.readTime),new Wr(Wf(f.documentKey)),f.largestBatchId)):d2.empty(),h=d.fields.map(([m,p])=>new aE(Hs.fromServerFormat(m),p));return new sS(d.indexId,d.collectionGroup,h,A)}(l,c))})).next(()=>o)})}getNextCollectionGroupToUpdate(e){return this.getFieldIndexes(e).next(r=>r.length===0?null:(r.sort((n,a)=>{const s=n.indexState.sequenceNumber-a.indexState.sequenceNumber;return s!==0?s:Gn(n.collectionGroup,a.collectionGroup)}),r[0].collectionGroup))}updateCollectionGroup(e,r,n){const a=ay(e),s=Zg(e);return this.yn(e).next(o=>a.U("collectionGroupIndex",IDBKeyRange.bound(r,r)).next(l=>Ht.forEach(l,c=>s.put($7(c.indexId,this.uid,o,n)))))}updateIndexEntries(e,r){const n=new Map;return Ht.forEach(r,(a,s)=>{const o=n.get(a.collectionGroup);return(o?Ht.resolve(o):this.getFieldIndexes(e,a.collectionGroup)).next(l=>(n.set(a.collectionGroup,l),Ht.forEach(l,c=>this.wn(e,a,c).next(u=>{const d=this.Sn(s,c);return u.isEqual(d)?Ht.resolve():this.bn(e,s,c,u,d)}))))})}Dn(e,r,n,a){return Jg(e).put({indexId:a.indexId,uid:this.uid,arrayValue:a.arrayValue,directionalValue:a.directionalValue,orderedDocumentKey:this.mn(n,r.key),documentKey:r.key.path.toArray()})}vn(e,r,n,a){return Jg(e).delete([a.indexId,this.uid,a.arrayValue,a.directionalValue,this.mn(n,r.key),r.key.path.toArray()])}wn(e,r,n){const a=Jg(e);let s=new cs(o0);return a.J({index:"documentKeyIndex",range:IDBKeyRange.only([n.indexId,this.uid,this.mn(n,r)])},(o,l)=>{s=s.add(new pp(n.indexId,r,l.arrayValue,l.directionalValue))}).next(()=>s)}Sn(e,r){let n=new cs(o0);const a=this.Vn(r,e);if(a==null)return n;const s=HT(r);if(s!=null){const o=e.data.field(s.fieldPath);if(p2(o))for(const l of o.arrayValue.values||[])n=n.add(new pp(r.indexId,e.key,this.dn(l),a))}else n=n.add(new pp(r.indexId,e.key,rC,a));return n}bn(e,r,n,a,s){Pr("IndexedDbIndexManager","Updating index entries for document '%s'",r.key);const o=[];return function(c,u,d,f,A){const h=c.getIterator(),m=u.getIterator();let p=Yg(h),x=Yg(m);for(;p||x;){let v=!1,y=!1;if(p&&x){const b=d(p,x);b<0?y=!0:b>0&&(v=!0)}else p!=null?y=!0:v=!0;v?(f(x),x=Yg(m)):y?(A(p),p=Yg(h)):(p=Yg(h),x=Yg(m))}}(a,s,o0,l=>{o.push(this.Dn(e,r,n,l))},l=>{o.push(this.vn(e,r,n,l))}),Ht.waitFor(o)}yn(e){let r=1;return Zg(e).J({index:"sequenceNumberIndex",reverse:!0,range:IDBKeyRange.upperBound([this.uid,Number.MAX_SAFE_INTEGER])},(n,a,s)=>{s.done(),r=a.sequenceNumber+1}).next(()=>r)}createRange(e,r,n){n=n.sort((o,l)=>o0(o,l)).filter((o,l,c)=>!l||o0(o,c[l-1])!==0);const a=[];a.push(e);for(const o of n){const l=o0(o,e),c=o0(o,r);if(l===0)a[0]=e.Zt();else if(l>0&&c<0)a.push(o),a.push(o.Zt());else if(c>0)break}a.push(r);const s=[];for(let o=0;o<a.length;o+=2){if(this.Cn(a[o],a[o+1]))return[];const l=[a[o].indexId,this.uid,a[o].arrayValue,a[o].directionalValue,rC,[]],c=[a[o+1].indexId,this.uid,a[o+1].arrayValue,a[o+1].directionalValue,rC,[]];s.push(IDBKeyRange.bound(l,c))}return s}Cn(e,r){return o0(e,r)>0}getMinOffsetFromCollectionGroup(e,r){return this.getFieldIndexes(e,r).next(J7)}getMinOffset(e,r){return Ht.mapArray(this.hn(r),n=>this.Pn(e,n).next(a=>a||cn())).next(J7)}}function Y7(t){return ko(t,"collectionParents")}function Jg(t){return ko(t,"indexEntries")}function ay(t){return ko(t,"indexConfiguration")}function Zg(t){return ko(t,"indexState")}function J7(t){mn(t.length!==0);let e=t[0].indexState.offset,r=e.largestBatchId;for(let n=1;n<t.length;n++){const a=t[n].indexState.offset;HD(a,e)<0&&(e=a),r<a.largestBatchId&&(r=a.largestBatchId)}return new Qu(e.readTime,e.documentKey,r)}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Z7={didRun:!1,sequenceNumbersCollected:0,targetsRemoved:0,documentsRemoved:0};class Wc{constructor(e,r,n){this.cacheSizeCollectionThreshold=e,this.percentileToCollect=r,this.maximumSequenceNumbersToCollect=n}static withCacheSize(e){return new Wc(e,Wc.DEFAULT_COLLECTION_PERCENTILE,Wc.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function RZ(t,e,r){const n=t.store("mutations"),a=t.store("documentMutations"),s=[],o=IDBKeyRange.only(r.batchId);let l=0;const c=n.J({range:o},(d,f,A)=>(l++,A.delete()));s.push(c.next(()=>{mn(l===1)}));const u=[];for(const d of r.mutations){const f=QJ(e,d.key.path,r.batchId);s.push(a.delete(f)),u.push(d.key)}return Ht.waitFor(s).next(()=>u)}function dS(t){if(!t)return 0;let e;if(t.document)e=t.document;else if(t.unknownDocument)e=t.unknownDocument;else{if(!t.noDocument)throw cn();e=t.noDocument}return JSON.stringify(e).length}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */Wc.DEFAULT_COLLECTION_PERCENTILE=10,Wc.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT=1e3,Wc.DEFAULT=new Wc(41943040,Wc.DEFAULT_COLLECTION_PERCENTILE,Wc.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT),Wc.DISABLED=new Wc(-1,0,0);class Ij{constructor(e,r,n,a){this.userId=e,this.serializer=r,this.indexManager=n,this.referenceDelegate=a,this.Fn={}}static lt(e,r,n,a){mn(e.uid!=="");const s=e.isAuthenticated()?e.uid:"";return new Ij(s,r,n,a)}checkEmpty(e){let r=!0;const n=IDBKeyRange.bound([this.userId,Number.NEGATIVE_INFINITY],[this.userId,Number.POSITIVE_INFINITY]);return l0(e).J({index:"userMutationsIndex",range:n},(a,s,o)=>{r=!1,o.done()}).next(()=>r)}addMutationBatch(e,r,n,a){const s=Ix(e),o=l0(e);return o.add({}).next(l=>{mn(typeof l=="number");const c=new YD(l,r,n,a),u=function(h,m,p){const x=p.baseMutations.map(y=>b2(h.ct,y)),v=p.mutations.map(y=>b2(h.ct,y));return{userId:m,batchId:p.batchId,localWriteTimeMs:p.localWriteTime.toMillis(),baseMutations:x,mutations:v}}(this.serializer,this.userId,c),d=[];let f=new cs((A,h)=>Gn(A.canonicalString(),h.canonicalString()));for(const A of a){const h=QJ(this.userId,A.key.path,l);f=f.add(A.key.path.popLast()),d.push(o.put(u)),d.push(s.put(h,zxe))}return f.forEach(A=>{d.push(this.indexManager.addToCollectionParentIndex(e,A))}),e.addOnCommittedListener(()=>{this.Fn[l]=c.keys()}),Ht.waitFor(d).next(()=>c)})}lookupMutationBatch(e,r){return l0(e).get(r).next(n=>n?(mn(n.userId===this.userId),Ap(this.serializer,n)):null)}Mn(e,r){return this.Fn[r]?Ht.resolve(this.Fn[r]):this.lookupMutationBatch(e,r).next(n=>{if(n){const a=n.keys();return this.Fn[r]=a,a}return null})}getNextMutationBatchAfterBatchId(e,r){const n=r+1,a=IDBKeyRange.lowerBound([this.userId,n]);let s=null;return l0(e).J({index:"userMutationsIndex",range:a},(o,l,c)=>{l.userId===this.userId&&(mn(l.batchId>=n),s=Ap(this.serializer,l)),c.done()}).next(()=>s)}getHighestUnacknowledgedBatchId(e){const r=IDBKeyRange.upperBound([this.userId,Number.POSITIVE_INFINITY]);let n=-1;return l0(e).J({index:"userMutationsIndex",range:r,reverse:!0},(a,s,o)=>{n=s.batchId,o.done()}).next(()=>n)}getAllMutationBatches(e){const r=IDBKeyRange.bound([this.userId,-1],[this.userId,Number.POSITIVE_INFINITY]);return l0(e).U("userMutationsIndex",r).next(n=>n.map(a=>Ap(this.serializer,a)))}getAllMutationBatchesAffectingDocumentKey(e,r){const n=sE(this.userId,r.path),a=IDBKeyRange.lowerBound(n),s=[];return Ix(e).J({range:a},(o,l,c)=>{const[u,d,f]=o,A=Wf(d);if(u===this.userId&&r.path.isEqual(A))return l0(e).get(f).next(h=>{if(!h)throw cn();mn(h.userId===this.userId),s.push(Ap(this.serializer,h))});c.done()}).next(()=>s)}getAllMutationBatchesAffectingDocumentKeys(e,r){let n=new cs(Gn);const a=[];return r.forEach(s=>{const o=sE(this.userId,s.path),l=IDBKeyRange.lowerBound(o),c=Ix(e).J({range:l},(u,d,f)=>{const[A,h,m]=u,p=Wf(h);A===this.userId&&s.path.isEqual(p)?n=n.add(m):f.done()});a.push(c)}),Ht.waitFor(a).next(()=>this.xn(e,n))}getAllMutationBatchesAffectingQuery(e,r){const n=r.path,a=n.length+1,s=sE(this.userId,n),o=IDBKeyRange.lowerBound(s);let l=new cs(Gn);return Ix(e).J({range:o},(c,u,d)=>{const[f,A,h]=c,m=Wf(A);f===this.userId&&n.isPrefixOf(m)?m.length===a&&(l=l.add(h)):d.done()}).next(()=>this.xn(e,l))}xn(e,r){const n=[],a=[];return r.forEach(s=>{a.push(l0(e).get(s).next(o=>{if(o===null)throw cn();mn(o.userId===this.userId),n.push(Ap(this.serializer,o))}))}),Ht.waitFor(a).next(()=>n)}removeMutationBatch(e,r){return RZ(e._e,this.userId,r).next(n=>(e.addOnCommittedListener(()=>{this.On(r.batchId)}),Ht.forEach(n,a=>this.referenceDelegate.markPotentiallyOrphaned(e,a))))}On(e){delete this.Fn[e]}performConsistencyCheck(e){return this.checkEmpty(e).next(r=>{if(!r)return Ht.resolve();const n=IDBKeyRange.lowerBound(function(o){return[o]}(this.userId)),a=[];return Ix(e).J({range:n},(s,o,l)=>{if(s[0]===this.userId){const c=Wf(s[1]);a.push(c)}else l.done()}).next(()=>{mn(a.length===0)})})}containsKey(e,r){return MZ(e,this.userId,r)}Nn(e){return LZ(e).get(this.userId).next(r=>r||{userId:this.userId,lastAcknowledgedBatchId:-1,lastStreamToken:""})}}function MZ(t,e,r){const n=sE(e,r.path),a=n[1],s=IDBKeyRange.lowerBound(n);let o=!1;return Ix(t).J({range:s,H:!0},(l,c,u)=>{const[d,f,A]=l;d===e&&f===a&&(o=!0),u.done()}).next(()=>o)}function l0(t){return ko(t,"mutations")}function Ix(t){return ko(t,"documentMutations")}function LZ(t){return ko(t,"mutationQueues")}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class lg{constructor(e){this.Ln=e}next(){return this.Ln+=2,this.Ln}static Bn(){return new lg(0)}static kn(){return new lg(-1)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class A1e{constructor(e,r){this.referenceDelegate=e,this.serializer=r}allocateTargetId(e){return this.qn(e).next(r=>{const n=new lg(r.highestTargetId);return r.highestTargetId=n.next(),this.Qn(e,r).next(()=>r.highestTargetId)})}getLastRemoteSnapshotVersion(e){return this.qn(e).next(r=>wn.fromTimestamp(new Ar(r.lastRemoteSnapshotVersion.seconds,r.lastRemoteSnapshotVersion.nanoseconds)))}getHighestSequenceNumber(e){return this.qn(e).next(r=>r.highestListenSequenceNumber)}setTargetsMetadata(e,r,n){return this.qn(e).next(a=>(a.highestListenSequenceNumber=r,n&&(a.lastRemoteSnapshotVersion=n.toTimestamp()),r>a.highestListenSequenceNumber&&(a.highestListenSequenceNumber=r),this.Qn(e,a)))}addTargetData(e,r){return this.Kn(e,r).next(()=>this.qn(e).next(n=>(n.targetCount+=1,this.$n(r,n),this.Qn(e,n))))}updateTargetData(e,r){return this.Kn(e,r)}removeTargetData(e,r){return this.removeMatchingKeysForTargetId(e,r.targetId).next(()=>ex(e).delete(r.targetId)).next(()=>this.qn(e)).next(n=>(mn(n.targetCount>0),n.targetCount-=1,this.Qn(e,n)))}removeTargets(e,r,n){let a=0;const s=[];return ex(e).J((o,l)=>{const c=Uy(l);c.sequenceNumber<=r&&n.get(c.targetId)===null&&(a++,s.push(this.removeTargetData(e,c)))}).next(()=>Ht.waitFor(s)).next(()=>a)}forEachTarget(e,r){return ex(e).J((n,a)=>{const s=Uy(a);r(s)})}qn(e){return e9(e).get("targetGlobalKey").next(r=>(mn(r!==null),r))}Qn(e,r){return e9(e).put("targetGlobalKey",r)}Kn(e,r){return ex(e).put(kZ(this.serializer,r))}$n(e,r){let n=!1;return e.targetId>r.highestTargetId&&(r.highestTargetId=e.targetId,n=!0),e.sequenceNumber>r.highestListenSequenceNumber&&(r.highestListenSequenceNumber=e.sequenceNumber,n=!0),n}getTargetCount(e){return this.qn(e).next(r=>r.targetCount)}getTargetData(e,r){const n=ag(r),a=IDBKeyRange.bound([n,Number.NEGATIVE_INFINITY],[n,Number.POSITIVE_INFINITY]);let s=null;return ex(e).J({range:a,index:"queryTargetsIndex"},(o,l,c)=>{const u=Uy(l);_w(r,u.target)&&(s=u,c.done())}).next(()=>s)}addMatchingKeys(e,r,n){const a=[],s=D0(e);return r.forEach(o=>{const l=Ic(o.path);a.push(s.put({targetId:n,path:l})),a.push(this.referenceDelegate.addReference(e,n,o))}),Ht.waitFor(a)}removeMatchingKeys(e,r,n){const a=D0(e);return Ht.forEach(r,s=>{const o=Ic(s.path);return Ht.waitFor([a.delete([n,o]),this.referenceDelegate.removeReference(e,n,s)])})}removeMatchingKeysForTargetId(e,r){const n=D0(e),a=IDBKeyRange.bound([r],[r+1],!1,!0);return n.delete(a)}getMatchingKeysForTargetId(e,r){const n=IDBKeyRange.bound([r],[r+1],!1,!0),a=D0(e);let s=ta();return a.J({range:n,H:!0},(o,l,c)=>{const u=Wf(o[1]),d=new Wr(u);s=s.add(d)}).next(()=>s)}containsKey(e,r){const n=Ic(r.path),a=IDBKeyRange.bound([n],[DJ(n)],!1,!0);let s=0;return D0(e).J({index:"documentTargetsIndex",H:!0,range:a},([o,l],c,u)=>{o!==0&&(s++,u.done())}).next(()=>s>0)}ot(e,r){return ex(e).get(r).next(n=>n?Uy(n):null)}}function ex(t){return ko(t,"targets")}function e9(t){return ko(t,"targetGlobal")}function D0(t){return ko(t,"targetDocuments")}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function t9([t,e],[r,n]){const a=Gn(t,r);return a===0?Gn(e,n):a}class m1e{constructor(e){this.Un=e,this.buffer=new cs(t9),this.Wn=0}Gn(){return++this.Wn}zn(e){const r=[e,this.Gn()];if(this.buffer.size<this.Un)this.buffer=this.buffer.add(r);else{const n=this.buffer.last();t9(r,n)<0&&(this.buffer=this.buffer.delete(n).add(r))}}get maxValue(){return this.buffer.last()[0]}}class p1e{constructor(e,r,n){this.garbageCollector=e,this.asyncQueue=r,this.localStore=n,this.jn=null}start(){this.garbageCollector.params.cacheSizeCollectionThreshold!==-1&&this.Hn(6e4)}stop(){this.jn&&(this.jn.cancel(),this.jn=null)}get started(){return this.jn!==null}Hn(e){Pr("LruGarbageCollector",`Garbage collection scheduled in ${e}ms`),this.jn=this.asyncQueue.enqueueAfterDelay("lru_garbage_collection",e,async()=>{this.jn=null;try{await this.localStore.collectGarbage(this.garbageCollector)}catch(r){Rm(r)?Pr("LruGarbageCollector","Ignoring IndexedDB error during garbage collection: ",r):await Ig(r)}await this.Hn(3e5)})}}class g1e{constructor(e,r){this.Jn=e,this.params=r}calculateTargetCount(e,r){return this.Jn.Yn(e).next(n=>Math.floor(r/100*n))}nthSequenceNumber(e,r){if(r===0)return Ht.resolve(wd.oe);const n=new m1e(r);return this.Jn.forEachTarget(e,a=>n.zn(a.sequenceNumber)).next(()=>this.Jn.Zn(e,a=>n.zn(a))).next(()=>n.maxValue)}removeTargets(e,r,n){return this.Jn.removeTargets(e,r,n)}removeOrphanedDocuments(e,r){return this.Jn.removeOrphanedDocuments(e,r)}collect(e,r){return this.params.cacheSizeCollectionThreshold===-1?(Pr("LruGarbageCollector","Garbage collection skipped; disabled"),Ht.resolve(Z7)):this.getCacheSize(e).next(n=>n<this.params.cacheSizeCollectionThreshold?(Pr("LruGarbageCollector",`Garbage collection skipped; Cache size ${n} is lower than threshold ${this.params.cacheSizeCollectionThreshold}`),Z7):this.Xn(e,r))}getCacheSize(e){return this.Jn.getCacheSize(e)}Xn(e,r){let n,a,s,o,l,c,u;const d=Date.now();return this.calculateTargetCount(e,this.params.percentileToCollect).next(f=>(f>this.params.maximumSequenceNumbersToCollect?(Pr("LruGarbageCollector",`Capping sequence numbers to collect down to the maximum of ${this.params.maximumSequenceNumbersToCollect} from ${f}`),a=this.params.maximumSequenceNumbersToCollect):a=f,o=Date.now(),this.nthSequenceNumber(e,a))).next(f=>(n=f,l=Date.now(),this.removeTargets(e,n,r))).next(f=>(s=f,c=Date.now(),this.removeOrphanedDocuments(e,n))).next(f=>(u=Date.now(),Cx()<=ha.DEBUG&&Pr("LruGarbageCollector",`LRU Garbage Collection
	Counted targets in ${o-d}ms
	Determined least recently used ${a} in `+(l-o)+`ms
	Removed ${s} targets in `+(c-l)+`ms
	Removed ${f} documents in `+(u-c)+`ms
Total Duration: ${u-d}ms`),Ht.resolve({didRun:!0,sequenceNumbersCollected:a,targetsRemoved:s,documentsRemoved:f})))}}function x1e(t,e){return new g1e(t,e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class v1e{constructor(e,r){this.db=e,this.garbageCollector=x1e(this,r)}Yn(e){const r=this.er(e);return this.db.getTargetCache().getTargetCount(e).next(n=>r.next(a=>n+a))}er(e){let r=0;return this.Zn(e,n=>{r++}).next(()=>r)}forEachTarget(e,r){return this.db.getTargetCache().forEachTarget(e,r)}Zn(e,r){return this.tr(e,(n,a)=>r(a))}addReference(e,r,n){return nC(e,n)}removeReference(e,r,n){return nC(e,n)}removeTargets(e,r,n){return this.db.getTargetCache().removeTargets(e,r,n)}markPotentiallyOrphaned(e,r){return nC(e,r)}nr(e,r){return function(a,s){let o=!1;return LZ(a).Y(l=>MZ(a,l,s).next(c=>(c&&(o=!0),Ht.resolve(!c)))).next(()=>o)}(e,r)}removeOrphanedDocuments(e,r){const n=this.db.getRemoteDocumentCache().newChangeBuffer(),a=[];let s=0;return this.tr(e,(o,l)=>{if(l<=r){const c=this.nr(e,o).next(u=>{if(!u)return s++,n.getEntry(e,o).next(()=>(n.removeEntry(o,wn.min()),D0(e).delete(function(f){return[0,Ic(f.path)]}(o))))});a.push(c)}}).next(()=>Ht.waitFor(a)).next(()=>n.apply(e)).next(()=>s)}removeTarget(e,r){const n=r.withSequenceNumber(e.currentSequenceNumber);return this.db.getTargetCache().updateTargetData(e,n)}updateLimboDocument(e,r){return nC(e,r)}tr(e,r){const n=D0(e);let a,s=wd.oe;return n.J({index:"documentTargetsIndex"},([o,l],{path:c,sequenceNumber:u})=>{o===0?(s!==wd.oe&&r(new Wr(Wf(a)),s),s=u,a=c):s=wd.oe}).next(()=>{s!==wd.oe&&r(new Wr(Wf(a)),s)})}getCacheSize(e){return this.db.getRemoteDocumentCache().getSize(e)}}function nC(t,e){return D0(t).put(function(n,a){return{targetId:0,path:Ic(n.path),sequenceNumber:a}}(e,t.currentSequenceNumber))}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class UZ{constructor(){this.changes=new Mm(e=>e.toString(),(e,r)=>e.isEqual(r)),this.changesApplied=!1}addEntry(e){this.assertNotApplied(),this.changes.set(e.key,e)}removeEntry(e,r){this.assertNotApplied(),this.changes.set(e,Vs.newInvalidDocument(e).setReadTime(r))}getEntry(e,r){this.assertNotApplied();const n=this.changes.get(r);return n!==void 0?Ht.resolve(n):this.getFromCache(e,r)}getEntries(e,r){return this.getAllFromCache(e,r)}apply(e){return this.assertNotApplied(),this.changesApplied=!0,this.applyChanges(e)}assertNotApplied(){}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class y1e{constructor(e){this.serializer=e}setIndexManager(e){this.indexManager=e}addEntry(e,r,n){return zm(e).put(n)}removeEntry(e,r,n){return zm(e).delete(function(s,o){const l=s.path.toArray();return[l.slice(0,l.length-2),l[l.length-2],cS(o),l[l.length-1]]}(r,n))}updateMetadata(e,r){return this.getMetadata(e).next(n=>(n.byteSize+=r,this.rr(e,n)))}getEntry(e,r){let n=Vs.newInvalidDocument(r);return zm(e).J({index:"documentKeyIndex",range:IDBKeyRange.only(sy(r))},(a,s)=>{n=this.ir(r,s)}).next(()=>n)}sr(e,r){let n={size:0,document:Vs.newInvalidDocument(r)};return zm(e).J({index:"documentKeyIndex",range:IDBKeyRange.only(sy(r))},(a,s)=>{n={document:this.ir(r,s),size:dS(s)}}).next(()=>n)}getEntries(e,r){let n=Fu();return this._r(e,r,(a,s)=>{const o=this.ir(a,s);n=n.insert(a,o)}).next(()=>n)}ar(e,r){let n=Fu(),a=new Ws(Wr.comparator);return this._r(e,r,(s,o)=>{const l=this.ir(s,o);n=n.insert(s,l),a=a.insert(s,dS(o))}).next(()=>({documents:n,ur:a}))}_r(e,r,n){if(r.isEmpty())return Ht.resolve();let a=new cs(a9);r.forEach(c=>a=a.add(c));const s=IDBKeyRange.bound(sy(a.first()),sy(a.last())),o=a.getIterator();let l=o.getNext();return zm(e).J({index:"documentKeyIndex",range:s},(c,u,d)=>{const f=Wr.fromSegments([...u.prefixPath,u.collectionGroup,u.documentId]);for(;l&&a9(l,f)<0;)n(l,null),l=o.getNext();l&&l.isEqual(f)&&(n(l,u),l=o.hasNext()?o.getNext():null),l?d.$(sy(l)):d.done()}).next(()=>{for(;l;)n(l,null),l=o.hasNext()?o.getNext():null})}getDocumentsMatchingQuery(e,r,n,a,s){const o=r.path,l=[o.popLast().toArray(),o.lastSegment(),cS(n.readTime),n.documentKey.path.isEmpty()?"":n.documentKey.path.lastSegment()],c=[o.popLast().toArray(),o.lastSegment(),[Number.MAX_SAFE_INTEGER,Number.MAX_SAFE_INTEGER],""];return zm(e).U(IDBKeyRange.bound(l,c,!0)).next(u=>{s==null||s.incrementDocumentReadCount(u.length);let d=Fu();for(const f of u){const A=this.ir(Wr.fromSegments(f.prefixPath.concat(f.collectionGroup,f.documentId)),f);A.isFoundDocument()&&(Sw(r,A)||a.has(A.key))&&(d=d.insert(A.key,A))}return d})}getAllFromCollectionGroup(e,r,n,a){let s=Fu();const o=n9(r,n),l=n9(r,Qu.max());return zm(e).J({index:"collectionGroupIndex",range:IDBKeyRange.bound(o,l,!0)},(c,u,d)=>{const f=this.ir(Wr.fromSegments(u.prefixPath.concat(u.collectionGroup,u.documentId)),u);s=s.insert(f.key,f),s.size===a&&d.done()}).next(()=>s)}newChangeBuffer(e){return new b1e(this,!!e&&e.trackRemovals)}getSize(e){return this.getMetadata(e).next(r=>r.byteSize)}getMetadata(e){return r9(e).get("remoteDocumentGlobalKey").next(r=>(mn(!!r),r))}rr(e,r){return r9(e).put("remoteDocumentGlobalKey",r)}ir(e,r){if(r){const n=a1e(this.serializer,r);if(!(n.isNoDocument()&&n.version.isEqual(wn.min())))return n}return Vs.newInvalidDocument(e)}}function QZ(t){return new y1e(t)}class b1e extends UZ{constructor(e,r){super(),this.cr=e,this.trackRemovals=r,this.lr=new Mm(n=>n.toString(),(n,a)=>n.isEqual(a))}applyChanges(e){const r=[];let n=0,a=new cs((s,o)=>Gn(s.canonicalString(),o.canonicalString()));return this.changes.forEach((s,o)=>{const l=this.lr.get(s);if(r.push(this.cr.removeEntry(e,s,l.readTime)),o.isValidDocument()){const c=V7(this.cr.serializer,o);a=a.add(s.path.popLast());const u=dS(c);n+=u-l.size,r.push(this.cr.addEntry(e,s,c))}else if(n-=l.size,this.trackRemovals){const c=V7(this.cr.serializer,o.convertToNoDocument(wn.min()));r.push(this.cr.addEntry(e,s,c))}}),a.forEach(s=>{r.push(this.cr.indexManager.addToCollectionParentIndex(e,s))}),r.push(this.cr.updateMetadata(e,n)),Ht.waitFor(r)}getFromCache(e,r){return this.cr.sr(e,r).next(n=>(this.lr.set(r,{size:n.size,readTime:n.document.readTime}),n.document))}getAllFromCache(e,r){return this.cr.ar(e,r).next(({documents:n,ur:a})=>(a.forEach((s,o)=>{this.lr.set(s,{size:o,readTime:n.get(s).readTime})}),n))}}function r9(t){return ko(t,"remoteDocumentGlobal")}function zm(t){return ko(t,"remoteDocumentsV14")}function sy(t){const e=t.path.toArray();return[e.slice(0,e.length-2),e[e.length-2],e[e.length-1]]}function n9(t,e){const r=e.documentKey.path.toArray();return[t,cS(e.readTime),r.slice(0,r.length-2),r.length>0?r[r.length-1]:""]}function a9(t,e){const r=t.path.toArray(),n=e.path.toArray();let a=0;for(let s=0;s<r.length-2&&s<n.length-2;++s)if(a=Gn(r[s],n[s]),a)return a;return a=Gn(r.length,n.length),a||(a=Gn(r[r.length-2],n[n.length-2]),a||Gn(r[r.length-1],n[n.length-1]))}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class w1e{constructor(e,r){this.overlayedDocument=e,this.mutatedFields=r}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class VZ{constructor(e,r,n,a){this.remoteDocumentCache=e,this.mutationQueue=r,this.documentOverlayCache=n,this.indexManager=a}getDocument(e,r){let n=null;return this.documentOverlayCache.getOverlay(e,r).next(a=>(n=a,this.remoteDocumentCache.getEntry(e,r))).next(a=>(n!==null&&gb(n.mutation,a,eu.empty(),Ar.now()),a))}getDocuments(e,r){return this.remoteDocumentCache.getEntries(e,r).next(n=>this.getLocalViewOfDocuments(e,n,ta()).next(()=>n))}getLocalViewOfDocuments(e,r,n=ta()){const a=Xf();return this.populateOverlays(e,a,r).next(()=>this.computeViews(e,r,a,n).next(s=>{let o=My();return s.forEach((l,c)=>{o=o.insert(l,c.overlayedDocument)}),o}))}getOverlayedDocuments(e,r){const n=Xf();return this.populateOverlays(e,n,r).next(()=>this.computeViews(e,r,n,ta()))}populateOverlays(e,r,n){const a=[];return n.forEach(s=>{r.has(s)||a.push(s)}),this.documentOverlayCache.getOverlays(e,a).next(s=>{s.forEach((o,l)=>{r.set(o,l)})})}computeViews(e,r,n,a){let s=Fu();const o=pb(),l=function(){return pb()}();return r.forEach((c,u)=>{const d=n.get(u.key);a.has(u.key)&&(d===void 0||d.mutation instanceof FA)?s=s.insert(u.key,u):d!==void 0?(o.set(u.key,d.mutation.getFieldMask()),gb(d.mutation,u,d.mutation.getFieldMask(),Ar.now())):o.set(u.key,eu.empty())}),this.recalculateAndSaveOverlays(e,s).next(c=>(c.forEach((u,d)=>o.set(u,d)),r.forEach((u,d)=>{var f;return l.set(u,new w1e(d,(f=o.get(u))!==null&&f!==void 0?f:null))}),l))}recalculateAndSaveOverlays(e,r){const n=pb();let a=new Ws((o,l)=>o-l),s=ta();return this.mutationQueue.getAllMutationBatchesAffectingDocumentKeys(e,r).next(o=>{for(const l of o)l.keys().forEach(c=>{const u=r.get(c);if(u===null)return;let d=n.get(c)||eu.empty();d=l.applyToLocalView(u,d),n.set(c,d);const f=(a.get(l.batchId)||ta()).add(c);a=a.insert(l.batchId,f)})}).next(()=>{const o=[],l=a.getReverseIterator();for(;l.hasNext();){const c=l.getNext(),u=c.key,d=c.value,f=lZ();d.forEach(A=>{if(!s.has(A)){const h=mZ(r.get(A),n.get(A));h!==null&&f.set(A,h),s=s.add(A)}}),o.push(this.documentOverlayCache.saveOverlays(e,u,f))}return Ht.waitFor(o)}).next(()=>n)}recalculateAndSaveOverlaysForDocumentKeys(e,r){return this.remoteDocumentCache.getEntries(e,r).next(n=>this.recalculateAndSaveOverlays(e,n))}getDocumentsMatchingQuery(e,r,n,a){return function(o){return Wr.isDocumentKey(o.path)&&o.collectionGroup===null&&o.filters.length===0}(r)?this.getDocumentsMatchingDocumentQuery(e,r.path):nZ(r)?this.getDocumentsMatchingCollectionGroupQuery(e,r,n,a):this.getDocumentsMatchingCollectionQuery(e,r,n,a)}getNextDocuments(e,r,n,a){return this.remoteDocumentCache.getAllFromCollectionGroup(e,r,n,a).next(s=>{const o=a-s.size>0?this.documentOverlayCache.getOverlaysForCollectionGroup(e,r,n.largestBatchId,a-s.size):Ht.resolve(Xf());let l=-1,c=s;return o.next(u=>Ht.forEach(u,(d,f)=>(l<f.largestBatchId&&(l=f.largestBatchId),s.get(d)?Ht.resolve():this.remoteDocumentCache.getEntry(e,d).next(A=>{c=c.insert(d,A)}))).next(()=>this.populateOverlays(e,u,s)).next(()=>this.computeViews(e,c,u,ta())).next(d=>({batchId:l,changes:oZ(d)})))})}getDocumentsMatchingDocumentQuery(e,r){return this.getDocument(e,new Wr(r)).next(n=>{let a=My();return n.isFoundDocument()&&(a=a.insert(n.key,n)),a})}getDocumentsMatchingCollectionGroupQuery(e,r,n,a){const s=r.collectionGroup;let o=My();return this.indexManager.getCollectionParents(e,s).next(l=>Ht.forEach(l,c=>{const u=function(f,A){return new l1(A,null,f.explicitOrderBy.slice(),f.filters.slice(),f.limit,f.limitType,f.startAt,f.endAt)}(r,c.child(s));return this.getDocumentsMatchingCollectionQuery(e,u,n,a).next(d=>{d.forEach((f,A)=>{o=o.insert(f,A)})})}).next(()=>o))}getDocumentsMatchingCollectionQuery(e,r,n,a){let s;return this.documentOverlayCache.getOverlaysForCollection(e,r.path,n.largestBatchId).next(o=>(s=o,this.remoteDocumentCache.getDocumentsMatchingQuery(e,r,n,s,a))).next(o=>{s.forEach((c,u)=>{const d=u.getKey();o.get(d)===null&&(o=o.insert(d,Vs.newInvalidDocument(d)))});let l=My();return o.forEach((c,u)=>{const d=s.get(c);d!==void 0&&gb(d.mutation,u,eu.empty(),Ar.now()),Sw(r,u)&&(l=l.insert(c,u))}),l})}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class N1e{constructor(e){this.serializer=e,this.hr=new Map,this.Pr=new Map}getBundleMetadata(e,r){return Ht.resolve(this.hr.get(r))}saveBundleMetadata(e,r){return this.hr.set(r.id,function(a){return{id:a.id,version:a.version,createTime:el(a.createTime)}}(r)),Ht.resolve()}getNamedQuery(e,r){return Ht.resolve(this.Pr.get(r))}saveNamedQuery(e,r){return this.Pr.set(r.name,function(a){return{name:a.name,query:FZ(a.bundledQuery),readTime:el(a.readTime)}}(r)),Ht.resolve()}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class C1e{constructor(){this.overlays=new Ws(Wr.comparator),this.Ir=new Map}getOverlay(e,r){return Ht.resolve(this.overlays.get(r))}getOverlays(e,r){const n=Xf();return Ht.forEach(r,a=>this.getOverlay(e,a).next(s=>{s!==null&&n.set(a,s)})).next(()=>n)}saveOverlays(e,r,n){return n.forEach((a,s)=>{this.ht(e,r,s)}),Ht.resolve()}removeOverlaysForBatchId(e,r,n){const a=this.Ir.get(n);return a!==void 0&&(a.forEach(s=>this.overlays=this.overlays.remove(s)),this.Ir.delete(n)),Ht.resolve()}getOverlaysForCollection(e,r,n){const a=Xf(),s=r.length+1,o=new Wr(r.child("")),l=this.overlays.getIteratorFrom(o);for(;l.hasNext();){const c=l.getNext().value,u=c.getKey();if(!r.isPrefixOf(u.path))break;u.path.length===s&&c.largestBatchId>n&&a.set(c.getKey(),c)}return Ht.resolve(a)}getOverlaysForCollectionGroup(e,r,n,a){let s=new Ws((u,d)=>u-d);const o=this.overlays.getIterator();for(;o.hasNext();){const u=o.getNext().value;if(u.getKey().getCollectionGroup()===r&&u.largestBatchId>n){let d=s.get(u.largestBatchId);d===null&&(d=Xf(),s=s.insert(u.largestBatchId,d)),d.set(u.getKey(),u)}}const l=Xf(),c=s.getIterator();for(;c.hasNext()&&(c.getNext().value.forEach((u,d)=>l.set(u,d)),!(l.size()>=a)););return Ht.resolve(l)}ht(e,r,n){const a=this.overlays.get(n.key);if(a!==null){const o=this.Ir.get(a.largestBatchId).delete(n.key);this.Ir.set(a.largestBatchId,o)}this.overlays=this.overlays.insert(n.key,new ZD(r,n));let s=this.Ir.get(r);s===void 0&&(s=ta(),this.Ir.set(r,s)),this.Ir.set(r,s.add(n.key))}}/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class _1e{constructor(){this.sessionToken=qi.EMPTY_BYTE_STRING}getSessionToken(e){return Ht.resolve(this.sessionToken)}setSessionToken(e,r){return this.sessionToken=r,Ht.resolve()}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class a6{constructor(){this.Tr=new cs(Go.Er),this.dr=new cs(Go.Ar)}isEmpty(){return this.Tr.isEmpty()}addReference(e,r){const n=new Go(e,r);this.Tr=this.Tr.add(n),this.dr=this.dr.add(n)}Rr(e,r){e.forEach(n=>this.addReference(n,r))}removeReference(e,r){this.Vr(new Go(e,r))}mr(e,r){e.forEach(n=>this.removeReference(n,r))}gr(e){const r=new Wr(new Pa([])),n=new Go(r,e),a=new Go(r,e+1),s=[];return this.dr.forEachInRange([n,a],o=>{this.Vr(o),s.push(o.key)}),s}pr(){this.Tr.forEach(e=>this.Vr(e))}Vr(e){this.Tr=this.Tr.delete(e),this.dr=this.dr.delete(e)}yr(e){const r=new Wr(new Pa([])),n=new Go(r,e),a=new Go(r,e+1);let s=ta();return this.dr.forEachInRange([n,a],o=>{s=s.add(o.key)}),s}containsKey(e){const r=new Go(e,0),n=this.Tr.firstAfterOrEqual(r);return n!==null&&e.isEqual(n.key)}}class Go{constructor(e,r){this.key=e,this.wr=r}static Er(e,r){return Wr.comparator(e.key,r.key)||Gn(e.wr,r.wr)}static Ar(e,r){return Gn(e.wr,r.wr)||Wr.comparator(e.key,r.key)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class E1e{constructor(e,r){this.indexManager=e,this.referenceDelegate=r,this.mutationQueue=[],this.Sr=1,this.br=new cs(Go.Er)}checkEmpty(e){return Ht.resolve(this.mutationQueue.length===0)}addMutationBatch(e,r,n,a){const s=this.Sr;this.Sr++,this.mutationQueue.length>0&&this.mutationQueue[this.mutationQueue.length-1];const o=new YD(s,r,n,a);this.mutationQueue.push(o);for(const l of a)this.br=this.br.add(new Go(l.key,s)),this.indexManager.addToCollectionParentIndex(e,l.key.path.popLast());return Ht.resolve(o)}lookupMutationBatch(e,r){return Ht.resolve(this.Dr(r))}getNextMutationBatchAfterBatchId(e,r){const n=r+1,a=this.vr(n),s=a<0?0:a;return Ht.resolve(this.mutationQueue.length>s?this.mutationQueue[s]:null)}getHighestUnacknowledgedBatchId(){return Ht.resolve(this.mutationQueue.length===0?-1:this.Sr-1)}getAllMutationBatches(e){return Ht.resolve(this.mutationQueue.slice())}getAllMutationBatchesAffectingDocumentKey(e,r){const n=new Go(r,0),a=new Go(r,Number.POSITIVE_INFINITY),s=[];return this.br.forEachInRange([n,a],o=>{const l=this.Dr(o.wr);s.push(l)}),Ht.resolve(s)}getAllMutationBatchesAffectingDocumentKeys(e,r){let n=new cs(Gn);return r.forEach(a=>{const s=new Go(a,0),o=new Go(a,Number.POSITIVE_INFINITY);this.br.forEachInRange([s,o],l=>{n=n.add(l.wr)})}),Ht.resolve(this.Cr(n))}getAllMutationBatchesAffectingQuery(e,r){const n=r.path,a=n.length+1;let s=n;Wr.isDocumentKey(s)||(s=s.child(""));const o=new Go(new Wr(s),0);let l=new cs(Gn);return this.br.forEachWhile(c=>{const u=c.key.path;return!!n.isPrefixOf(u)&&(u.length===a&&(l=l.add(c.wr)),!0)},o),Ht.resolve(this.Cr(l))}Cr(e){const r=[];return e.forEach(n=>{const a=this.Dr(n);a!==null&&r.push(a)}),r}removeMutationBatch(e,r){mn(this.Fr(r.batchId,"removed")===0),this.mutationQueue.shift();let n=this.br;return Ht.forEach(r.mutations,a=>{const s=new Go(a.key,r.batchId);return n=n.delete(s),this.referenceDelegate.markPotentiallyOrphaned(e,a.key)}).next(()=>{this.br=n})}On(e){}containsKey(e,r){const n=new Go(r,0),a=this.br.firstAfterOrEqual(n);return Ht.resolve(r.isEqual(a&&a.key))}performConsistencyCheck(e){return this.mutationQueue.length,Ht.resolve()}Fr(e,r){return this.vr(e)}vr(e){return this.mutationQueue.length===0?0:e-this.mutationQueue[0].batchId}Dr(e){const r=this.vr(e);return r<0||r>=this.mutationQueue.length?null:this.mutationQueue[r]}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class S1e{constructor(e){this.Mr=e,this.docs=function(){return new Ws(Wr.comparator)}(),this.size=0}setIndexManager(e){this.indexManager=e}addEntry(e,r){const n=r.key,a=this.docs.get(n),s=a?a.size:0,o=this.Mr(r);return this.docs=this.docs.insert(n,{document:r.mutableCopy(),size:o}),this.size+=o-s,this.indexManager.addToCollectionParentIndex(e,n.path.popLast())}removeEntry(e){const r=this.docs.get(e);r&&(this.docs=this.docs.remove(e),this.size-=r.size)}getEntry(e,r){const n=this.docs.get(r);return Ht.resolve(n?n.document.mutableCopy():Vs.newInvalidDocument(r))}getEntries(e,r){let n=Fu();return r.forEach(a=>{const s=this.docs.get(a);n=n.insert(a,s?s.document.mutableCopy():Vs.newInvalidDocument(a))}),Ht.resolve(n)}getDocumentsMatchingQuery(e,r,n,a){let s=Fu();const o=r.path,l=new Wr(o.child("")),c=this.docs.getIteratorFrom(l);for(;c.hasNext();){const{key:u,value:{document:d}}=c.getNext();if(!o.isPrefixOf(u.path))break;u.path.length>o.length+1||HD(RJ(d),n)<=0||(a.has(d.key)||Sw(r,d))&&(s=s.insert(d.key,d.mutableCopy()))}return Ht.resolve(s)}getAllFromCollectionGroup(e,r,n,a){cn()}Or(e,r){return Ht.forEach(this.docs,n=>r(n))}newChangeBuffer(e){return new I1e(this)}getSize(e){return Ht.resolve(this.size)}}class I1e extends UZ{constructor(e){super(),this.cr=e}applyChanges(e){const r=[];return this.changes.forEach((n,a)=>{a.isValidDocument()?r.push(this.cr.addEntry(e,a)):this.cr.removeEntry(n)}),Ht.waitFor(r)}getFromCache(e,r){return this.cr.getEntry(e,r)}getAllFromCache(e,r){return this.cr.getEntries(e,r)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class j1e{constructor(e){this.persistence=e,this.Nr=new Mm(r=>ag(r),_w),this.lastRemoteSnapshotVersion=wn.min(),this.highestTargetId=0,this.Lr=0,this.Br=new a6,this.targetCount=0,this.kr=lg.Bn()}forEachTarget(e,r){return this.Nr.forEach((n,a)=>r(a)),Ht.resolve()}getLastRemoteSnapshotVersion(e){return Ht.resolve(this.lastRemoteSnapshotVersion)}getHighestSequenceNumber(e){return Ht.resolve(this.Lr)}allocateTargetId(e){return this.highestTargetId=this.kr.next(),Ht.resolve(this.highestTargetId)}setTargetsMetadata(e,r,n){return n&&(this.lastRemoteSnapshotVersion=n),r>this.Lr&&(this.Lr=r),Ht.resolve()}Kn(e){this.Nr.set(e.target,e);const r=e.targetId;r>this.highestTargetId&&(this.kr=new lg(r),this.highestTargetId=r),e.sequenceNumber>this.Lr&&(this.Lr=e.sequenceNumber)}addTargetData(e,r){return this.Kn(r),this.targetCount+=1,Ht.resolve()}updateTargetData(e,r){return this.Kn(r),Ht.resolve()}removeTargetData(e,r){return this.Nr.delete(r.target),this.Br.gr(r.targetId),this.targetCount-=1,Ht.resolve()}removeTargets(e,r,n){let a=0;const s=[];return this.Nr.forEach((o,l)=>{l.sequenceNumber<=r&&n.get(l.targetId)===null&&(this.Nr.delete(o),s.push(this.removeMatchingKeysForTargetId(e,l.targetId)),a++)}),Ht.waitFor(s).next(()=>a)}getTargetCount(e){return Ht.resolve(this.targetCount)}getTargetData(e,r){const n=this.Nr.get(r)||null;return Ht.resolve(n)}addMatchingKeys(e,r,n){return this.Br.Rr(r,n),Ht.resolve()}removeMatchingKeys(e,r,n){this.Br.mr(r,n);const a=this.persistence.referenceDelegate,s=[];return a&&r.forEach(o=>{s.push(a.markPotentiallyOrphaned(e,o))}),Ht.waitFor(s)}removeMatchingKeysForTargetId(e,r){return this.Br.gr(r),Ht.resolve()}getMatchingKeysForTargetId(e,r){const n=this.Br.yr(r);return Ht.resolve(n)}containsKey(e,r){return Ht.resolve(this.Br.containsKey(r))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class HZ{constructor(e,r){this.qr={},this.overlays={},this.Qr=new wd(0),this.Kr=!1,this.Kr=!0,this.$r=new _1e,this.referenceDelegate=e(this),this.Ur=new j1e(this),this.indexManager=new f1e,this.remoteDocumentCache=function(a){return new S1e(a)}(n=>this.referenceDelegate.Wr(n)),this.serializer=new TZ(r),this.Gr=new N1e(this.serializer)}start(){return Promise.resolve()}shutdown(){return this.Kr=!1,Promise.resolve()}get started(){return this.Kr}setDatabaseDeletedListener(){}setNetworkEnabled(){}getIndexManager(e){return this.indexManager}getDocumentOverlayCache(e){let r=this.overlays[e.toKey()];return r||(r=new C1e,this.overlays[e.toKey()]=r),r}getMutationQueue(e,r){let n=this.qr[e.toKey()];return n||(n=new E1e(r,this.referenceDelegate),this.qr[e.toKey()]=n),n}getGlobalsCache(){return this.$r}getTargetCache(){return this.Ur}getRemoteDocumentCache(){return this.remoteDocumentCache}getBundleCache(){return this.Gr}runTransaction(e,r,n){Pr("MemoryPersistence","Starting transaction:",e);const a=new P1e(this.Qr.next());return this.referenceDelegate.zr(),n(a).next(s=>this.referenceDelegate.jr(a).next(()=>s)).toPromise().then(s=>(a.raiseOnCommittedEvent(),s))}Hr(e,r){return Ht.or(Object.values(this.qr).map(n=>()=>n.containsKey(e,r)))}}class P1e extends LJ{constructor(e){super(),this.currentSequenceNumber=e}}class jj{constructor(e){this.persistence=e,this.Jr=new a6,this.Yr=null}static Zr(e){return new jj(e)}get Xr(){if(this.Yr)return this.Yr;throw cn()}addReference(e,r,n){return this.Jr.addReference(n,r),this.Xr.delete(n.toString()),Ht.resolve()}removeReference(e,r,n){return this.Jr.removeReference(n,r),this.Xr.add(n.toString()),Ht.resolve()}markPotentiallyOrphaned(e,r){return this.Xr.add(r.toString()),Ht.resolve()}removeTarget(e,r){this.Jr.gr(r.targetId).forEach(a=>this.Xr.add(a.toString()));const n=this.persistence.getTargetCache();return n.getMatchingKeysForTargetId(e,r.targetId).next(a=>{a.forEach(s=>this.Xr.add(s.toString()))}).next(()=>n.removeTargetData(e,r))}zr(){this.Yr=new Set}jr(e){const r=this.persistence.getRemoteDocumentCache().newChangeBuffer();return Ht.forEach(this.Xr,n=>{const a=Wr.fromPath(n);return this.ei(e,a).next(s=>{s||r.removeEntry(a,wn.min())})}).next(()=>(this.Yr=null,r.apply(e)))}updateLimboDocument(e,r){return this.ei(e,r).next(n=>{n?this.Xr.delete(r.toString()):this.Xr.add(r.toString())})}Wr(e){return 0}ei(e,r){return Ht.or([()=>Ht.resolve(this.Jr.containsKey(r)),()=>this.persistence.getTargetCache().containsKey(e,r),()=>this.persistence.Hr(e,r)])}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class B1e{constructor(e){this.serializer=e}O(e,r,n,a){const s=new bj("createOrUpgrade",r);n<1&&a>=1&&(function(c){c.createObjectStore("owner")}(e),function(c){c.createObjectStore("mutationQueues",{keyPath:"userId"}),c.createObjectStore("mutations",{keyPath:"batchId",autoIncrement:!0}).createIndex("userMutationsIndex",x7,{unique:!0}),c.createObjectStore("documentMutations")}(e),s9(e),function(c){c.createObjectStore("remoteDocuments")}(e));let o=Ht.resolve();return n<3&&a>=3&&(n!==0&&(function(c){c.deleteObjectStore("targetDocuments"),c.deleteObjectStore("targets"),c.deleteObjectStore("targetGlobal")}(e),s9(e)),o=o.next(()=>function(c){const u=c.store("targetGlobal"),d={highestTargetId:0,highestListenSequenceNumber:0,lastRemoteSnapshotVersion:wn.min().toTimestamp(),targetCount:0};return u.put("targetGlobalKey",d)}(s))),n<4&&a>=4&&(n!==0&&(o=o.next(()=>function(c,u){return u.store("mutations").U().next(d=>{c.deleteObjectStore("mutations"),c.createObjectStore("mutations",{keyPath:"batchId",autoIncrement:!0}).createIndex("userMutationsIndex",x7,{unique:!0});const f=u.store("mutations"),A=d.map(h=>f.put(h));return Ht.waitFor(A)})}(e,s))),o=o.next(()=>{(function(c){c.createObjectStore("clientMetadata",{keyPath:"clientId"})})(e)})),n<5&&a>=5&&(o=o.next(()=>this.ni(s))),n<6&&a>=6&&(o=o.next(()=>(function(c){c.createObjectStore("remoteDocumentGlobal")}(e),this.ri(s)))),n<7&&a>=7&&(o=o.next(()=>this.ii(s))),n<8&&a>=8&&(o=o.next(()=>this.si(e,s))),n<9&&a>=9&&(o=o.next(()=>{(function(c){c.objectStoreNames.contains("remoteDocumentChanges")&&c.deleteObjectStore("remoteDocumentChanges")})(e)})),n<10&&a>=10&&(o=o.next(()=>this.oi(s))),n<11&&a>=11&&(o=o.next(()=>{(function(c){c.createObjectStore("bundles",{keyPath:"bundleId"})})(e),function(c){c.createObjectStore("namedQueries",{keyPath:"name"})}(e)})),n<12&&a>=12&&(o=o.next(()=>{(function(c){const u=c.createObjectStore("documentOverlays",{keyPath:ive});u.createIndex("collectionPathOverlayIndex",ove,{unique:!1}),u.createIndex("collectionGroupOverlayIndex",lve,{unique:!1})})(e)})),n<13&&a>=13&&(o=o.next(()=>function(c){const u=c.createObjectStore("remoteDocumentsV14",{keyPath:Wxe});u.createIndex("documentKeyIndex",Xxe),u.createIndex("collectionGroupIndex",Yxe)}(e)).next(()=>this._i(e,s)).next(()=>e.deleteObjectStore("remoteDocuments"))),n<14&&a>=14&&(o=o.next(()=>this.ai(e,s))),n<15&&a>=15&&(o=o.next(()=>function(c){c.createObjectStore("indexConfiguration",{keyPath:"indexId",autoIncrement:!0}).createIndex("collectionGroupIndex","collectionGroup",{unique:!1}),c.createObjectStore("indexState",{keyPath:rve}).createIndex("sequenceNumberIndex",nve,{unique:!1}),c.createObjectStore("indexEntries",{keyPath:ave}).createIndex("documentKeyIndex",sve,{unique:!1})}(e))),n<16&&a>=16&&(o=o.next(()=>{r.objectStore("indexState").clear()}).next(()=>{r.objectStore("indexEntries").clear()})),n<17&&a>=17&&(o=o.next(()=>{(function(c){c.createObjectStore("globals",{keyPath:"name"})})(e)})),o}ri(e){let r=0;return e.store("remoteDocuments").J((n,a)=>{r+=dS(a)}).next(()=>{const n={byteSize:r};return e.store("remoteDocumentGlobal").put("remoteDocumentGlobalKey",n)})}ni(e){const r=e.store("mutationQueues"),n=e.store("mutations");return r.U().next(a=>Ht.forEach(a,s=>{const o=IDBKeyRange.bound([s.userId,-1],[s.userId,s.lastAcknowledgedBatchId]);return n.U("userMutationsIndex",o).next(l=>Ht.forEach(l,c=>{mn(c.userId===s.userId);const u=Ap(this.serializer,c);return RZ(e,s.userId,u).next(()=>{})}))}))}ii(e){const r=e.store("targetDocuments"),n=e.store("remoteDocuments");return e.store("targetGlobal").get("targetGlobalKey").next(a=>{const s=[];return n.J((o,l)=>{const c=new Pa(o),u=function(f){return[0,Ic(f)]}(c);s.push(r.get(u).next(d=>d?Ht.resolve():(f=>r.put({targetId:0,path:Ic(f),sequenceNumber:a.highestListenSequenceNumber}))(c)))}).next(()=>Ht.waitFor(s))})}si(e,r){e.createObjectStore("collectionParents",{keyPath:tve});const n=r.store("collectionParents"),a=new n6,s=o=>{if(a.add(o)){const l=o.lastSegment(),c=o.popLast();return n.put({collectionId:l,parent:Ic(c)})}};return r.store("remoteDocuments").J({H:!0},(o,l)=>{const c=new Pa(o);return s(c.popLast())}).next(()=>r.store("documentMutations").J({H:!0},([o,l,c],u)=>{const d=Wf(l);return s(d.popLast())}))}oi(e){const r=e.store("targets");return r.J((n,a)=>{const s=Uy(a),o=kZ(this.serializer,s);return r.put(o)})}_i(e,r){const n=r.store("remoteDocuments"),a=[];return n.J((s,o)=>{const l=r.store("remoteDocumentsV14"),c=function(f){return f.document?new Wr(Pa.fromString(f.document.name).popFirst(5)):f.noDocument?Wr.fromSegments(f.noDocument.path):f.unknownDocument?Wr.fromSegments(f.unknownDocument.path):cn()}(o).path.toArray(),u={prefixPath:c.slice(0,c.length-2),collectionGroup:c[c.length-2],documentId:c[c.length-1],readTime:o.readTime||[0,0],unknownDocument:o.unknownDocument,noDocument:o.noDocument,document:o.document,hasCommittedMutations:!!o.hasCommittedMutations};a.push(l.put(u))}).next(()=>Ht.waitFor(a))}ai(e,r){const n=r.store("mutations"),a=QZ(this.serializer),s=new HZ(jj.Zr,this.serializer.ct);return n.U().next(o=>{const l=new Map;return o.forEach(c=>{var u;let d=(u=l.get(c.userId))!==null&&u!==void 0?u:ta();Ap(this.serializer,c).keys().forEach(f=>d=d.add(f)),l.set(c.userId,d)}),Ht.forEach(l,(c,u)=>{const d=new wl(u),f=Sj.lt(this.serializer,d),A=s.getIndexManager(d),h=Ij.lt(d,this.serializer,A,s.referenceDelegate);return new VZ(a,h,f,A).recalculateAndSaveOverlaysForDocumentKeys(new $T(r,wd.oe),c).next()})})}}function s9(t){t.createObjectStore("targetDocuments",{keyPath:Zxe}).createIndex("documentTargetsIndex",eve,{unique:!0}),t.createObjectStore("targets",{keyPath:"targetId"}).createIndex("queryTargetsIndex",Jxe,{unique:!0}),t.createObjectStore("targetGlobal")}const E3="Failed to obtain exclusive access to the persistence layer. To allow shared access, multi-tab synchronization has to be enabled in all tabs. If you are using `experimentalForceOwningTab:true`, make sure that only one tab has persistence enabled at any given time.";class s6{constructor(e,r,n,a,s,o,l,c,u,d,f=17){if(this.allowTabSynchronization=e,this.persistenceKey=r,this.clientId=n,this.ui=s,this.window=o,this.document=l,this.ci=u,this.li=d,this.hi=f,this.Qr=null,this.Kr=!1,this.isPrimary=!1,this.networkEnabled=!0,this.Pi=null,this.inForeground=!1,this.Ii=null,this.Ti=null,this.Ei=Number.NEGATIVE_INFINITY,this.di=A=>Promise.resolve(),!s6.D())throw new Lr(ir.UNIMPLEMENTED,"This platform is either missing IndexedDB or is known to have an incomplete implementation. Offline persistence has been disabled.");this.referenceDelegate=new v1e(this,a),this.Ai=r+"main",this.serializer=new TZ(c),this.Ri=new lm(this.Ai,this.hi,new B1e(this.serializer)),this.$r=new i1e,this.Ur=new A1e(this.referenceDelegate,this.serializer),this.remoteDocumentCache=QZ(this.serializer),this.Gr=new s1e,this.window&&this.window.localStorage?this.Vi=this.window.localStorage:(this.Vi=null,d===!1&&Cc("IndexedDbPersistence","LocalStorage is unavailable. As a result, persistence may not work reliably. In particular enablePersistence() could fail immediately after refreshing the page."))}start(){return this.mi().then(()=>{if(!this.isPrimary&&!this.allowTabSynchronization)throw new Lr(ir.FAILED_PRECONDITION,E3);return this.fi(),this.gi(),this.pi(),this.runTransaction("getHighestListenSequenceNumber","readonly",e=>this.Ur.getHighestSequenceNumber(e))}).then(e=>{this.Qr=new wd(e,this.ci)}).then(()=>{this.Kr=!0}).catch(e=>(this.Ri&&this.Ri.close(),Promise.reject(e)))}yi(e){return this.di=async r=>{if(this.started)return e(r)},e(this.isPrimary)}setDatabaseDeletedListener(e){this.Ri.L(async r=>{r.newVersion===null&&await e()})}setNetworkEnabled(e){this.networkEnabled!==e&&(this.networkEnabled=e,this.ui.enqueueAndForget(async()=>{this.started&&await this.mi()}))}mi(){return this.runTransaction("updateClientMetadataAndTryBecomePrimary","readwrite",e=>aC(e).put({clientId:this.clientId,updateTimeMs:Date.now(),networkEnabled:this.networkEnabled,inForeground:this.inForeground}).next(()=>{if(this.isPrimary)return this.wi(e).next(r=>{r||(this.isPrimary=!1,this.ui.enqueueRetryable(()=>this.di(!1)))})}).next(()=>this.Si(e)).next(r=>this.isPrimary&&!r?this.bi(e).next(()=>!1):!!r&&this.Di(e).next(()=>!0))).catch(e=>{if(Rm(e))return Pr("IndexedDbPersistence","Failed to extend owner lease: ",e),this.isPrimary;if(!this.allowTabSynchronization)throw e;return Pr("IndexedDbPersistence","Releasing owner lease after error during lease refresh",e),!1}).then(e=>{this.isPrimary!==e&&this.ui.enqueueRetryable(()=>this.di(e)),this.isPrimary=e})}wi(e){return iy(e).get("owner").next(r=>Ht.resolve(this.vi(r)))}Ci(e){return aC(e).delete(this.clientId)}async Fi(){if(this.isPrimary&&!this.Mi(this.Ei,18e5)){this.Ei=Date.now();const e=await this.runTransaction("maybeGarbageCollectMultiClientState","readwrite-primary",r=>{const n=ko(r,"clientMetadata");return n.U().next(a=>{const s=this.xi(a,18e5),o=a.filter(l=>s.indexOf(l)===-1);return Ht.forEach(o,l=>n.delete(l.clientId)).next(()=>o)})}).catch(()=>[]);if(this.Vi)for(const r of e)this.Vi.removeItem(this.Oi(r.clientId))}}pi(){this.Ti=this.ui.enqueueAfterDelay("client_metadata_refresh",4e3,()=>this.mi().then(()=>this.Fi()).then(()=>this.pi()))}vi(e){return!!e&&e.ownerId===this.clientId}Si(e){return this.li?Ht.resolve(!0):iy(e).get("owner").next(r=>{if(r!==null&&this.Mi(r.leaseTimestampMs,5e3)&&!this.Ni(r.ownerId)){if(this.vi(r)&&this.networkEnabled)return!0;if(!this.vi(r)){if(!r.allowTabSynchronization)throw new Lr(ir.FAILED_PRECONDITION,E3);return!1}}return!(!this.networkEnabled||!this.inForeground)||aC(e).U().next(n=>this.xi(n,5e3).find(a=>{if(this.clientId!==a.clientId){const s=!this.networkEnabled&&a.networkEnabled,o=!this.inForeground&&a.inForeground,l=this.networkEnabled===a.networkEnabled;if(s||o&&l)return!0}return!1})===void 0)}).next(r=>(this.isPrimary!==r&&Pr("IndexedDbPersistence",`Client ${r?"is":"is not"} eligible for a primary lease.`),r))}async shutdown(){this.Kr=!1,this.Li(),this.Ti&&(this.Ti.cancel(),this.Ti=null),this.Bi(),this.ki(),await this.Ri.runTransaction("shutdown","readwrite",["owner","clientMetadata"],e=>{const r=new $T(e,wd.oe);return this.bi(r).next(()=>this.Ci(r))}),this.Ri.close(),this.qi()}xi(e,r){return e.filter(n=>this.Mi(n.updateTimeMs,r)&&!this.Ni(n.clientId))}Qi(){return this.runTransaction("getActiveClients","readonly",e=>aC(e).U().next(r=>this.xi(r,18e5).map(n=>n.clientId)))}get started(){return this.Kr}getGlobalsCache(){return this.$r}getMutationQueue(e,r){return Ij.lt(e,this.serializer,r,this.referenceDelegate)}getTargetCache(){return this.Ur}getRemoteDocumentCache(){return this.remoteDocumentCache}getIndexManager(e){return new h1e(e,this.serializer.ct.databaseId)}getDocumentOverlayCache(e){return Sj.lt(this.serializer,e)}getBundleCache(){return this.Gr}runTransaction(e,r,n){Pr("IndexedDbPersistence","Starting transaction:",e);const a=r==="readonly"?"readonly":"readwrite",s=function(c){return c===17?dve:c===16?uve:c===15?GD:c===14?$J:c===13?HJ:c===12?cve:c===11?VJ:void cn()}(this.hi);let o;return this.Ri.runTransaction(e,a,s,l=>(o=new $T(l,this.Qr?this.Qr.next():wd.oe),r==="readwrite-primary"?this.wi(o).next(c=>!!c||this.Si(o)).next(c=>{if(!c)throw Cc(`Failed to obtain primary lease for action '${e}'.`),this.isPrimary=!1,this.ui.enqueueRetryable(()=>this.di(!1)),new Lr(ir.FAILED_PRECONDITION,MJ);return n(o)}).next(c=>this.Di(o).next(()=>c)):this.Ki(o).next(()=>n(o)))).then(l=>(o.raiseOnCommittedEvent(),l))}Ki(e){return iy(e).get("owner").next(r=>{if(r!==null&&this.Mi(r.leaseTimestampMs,5e3)&&!this.Ni(r.ownerId)&&!this.vi(r)&&!(this.li||this.allowTabSynchronization&&r.allowTabSynchronization))throw new Lr(ir.FAILED_PRECONDITION,E3)})}Di(e){const r={ownerId:this.clientId,allowTabSynchronization:this.allowTabSynchronization,leaseTimestampMs:Date.now()};return iy(e).put("owner",r)}static D(){return lm.D()}bi(e){const r=iy(e);return r.get("owner").next(n=>this.vi(n)?(Pr("IndexedDbPersistence","Releasing primary lease."),r.delete("owner")):Ht.resolve())}Mi(e,r){const n=Date.now();return!(e<n-r)&&(!(e>n)||(Cc(`Detected an update time that is in the future: ${e} > ${n}`),!1))}fi(){this.document!==null&&typeof this.document.addEventListener=="function"&&(this.Ii=()=>{this.ui.enqueueAndForget(()=>(this.inForeground=this.document.visibilityState==="visible",this.mi()))},this.document.addEventListener("visibilitychange",this.Ii),this.inForeground=this.document.visibilityState==="visible")}Bi(){this.Ii&&(this.document.removeEventListener("visibilitychange",this.Ii),this.Ii=null)}gi(){var e;typeof((e=this.window)===null||e===void 0?void 0:e.addEventListener)=="function"&&(this.Pi=()=>{this.Li();const r=/(?:Version|Mobile)\/1[456]/;VY()&&(navigator.appVersion.match(r)||navigator.userAgent.match(r))&&this.ui.enterRestrictedMode(!0),this.ui.enqueueAndForget(()=>this.shutdown())},this.window.addEventListener("pagehide",this.Pi))}ki(){this.Pi&&(this.window.removeEventListener("pagehide",this.Pi),this.Pi=null)}Ni(e){var r;try{const n=((r=this.Vi)===null||r===void 0?void 0:r.getItem(this.Oi(e)))!==null;return Pr("IndexedDbPersistence",`Client '${e}' ${n?"is":"is not"} zombied in LocalStorage`),n}catch(n){return Cc("IndexedDbPersistence","Failed to get zombied client id.",n),!1}}Li(){if(this.Vi)try{this.Vi.setItem(this.Oi(this.clientId),String(Date.now()))}catch(e){Cc("Failed to set zombie client id.",e)}}qi(){if(this.Vi)try{this.Vi.removeItem(this.Oi(this.clientId))}catch{}}Oi(e){return`firestore_zombie_${this.persistenceKey}_${e}`}}function iy(t){return ko(t,"owner")}function aC(t){return ko(t,"clientMetadata")}function T1e(t,e){let r=t.projectId;return t.isDefaultDatabase||(r+="."+t.database),"firestore/"+e+"/"+r+"/"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class i6{constructor(e,r,n,a){this.targetId=e,this.fromCache=r,this.$i=n,this.Ui=a}static Wi(e,r){let n=ta(),a=ta();for(const s of r.docChanges)switch(s.type){case 0:n=n.add(s.doc.key);break;case 1:a=a.add(s.doc.key)}return new i6(e,r.fromCache,n,a)}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class k1e{constructor(){this._documentReadCount=0}get documentReadCount(){return this._documentReadCount}incrementDocumentReadCount(e){this._documentReadCount+=e}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class $Z{constructor(){this.Gi=!1,this.zi=!1,this.ji=100,this.Hi=function(){return VY()?8:UJ(Bo())>0?6:4}()}initialize(e,r){this.Ji=e,this.indexManager=r,this.Gi=!0}getDocumentsMatchingQuery(e,r,n,a){const s={result:null};return this.Yi(e,r).next(o=>{s.result=o}).next(()=>{if(!s.result)return this.Zi(e,r,a,n).next(o=>{s.result=o})}).next(()=>{if(s.result)return;const o=new k1e;return this.Xi(e,r,o).next(l=>{if(s.result=l,this.zi)return this.es(e,r,o,l.size)})}).next(()=>s.result)}es(e,r,n,a){return n.documentReadCount<this.ji?(Cx()<=ha.DEBUG&&Pr("QueryEngine","SDK will not create cache indexes for query:",_x(r),"since it only creates cache indexes for collection contains","more than or equal to",this.ji,"documents"),Ht.resolve()):(Cx()<=ha.DEBUG&&Pr("QueryEngine","Query:",_x(r),"scans",n.documentReadCount,"local documents and returns",a,"documents as results."),n.documentReadCount>this.Hi*a?(Cx()<=ha.DEBUG&&Pr("QueryEngine","The SDK decides to create cache indexes for query:",_x(r),"as using cache indexes may help improve performance."),this.indexManager.createTargetIndexes(e,Id(r))):Ht.resolve())}Yi(e,r){if(B7(r))return Ht.resolve(null);let n=Id(r);return this.indexManager.getIndexType(e,n).next(a=>a===0?null:(r.limit!==null&&a===1&&(r=lS(r,null,"F"),n=Id(r)),this.indexManager.getDocumentsMatchingTarget(e,n).next(s=>{const o=ta(...s);return this.Ji.getDocuments(e,o).next(l=>this.indexManager.getMinOffset(e,n).next(c=>{const u=this.ts(r,l);return this.ns(r,u,o,c.readTime)?this.Yi(e,lS(r,null,"F")):this.rs(e,u,r,c)}))})))}Zi(e,r,n,a){return B7(r)||a.isEqual(wn.min())?Ht.resolve(null):this.Ji.getDocuments(e,n).next(s=>{const o=this.ts(r,s);return this.ns(r,o,n,a)?Ht.resolve(null):(Cx()<=ha.DEBUG&&Pr("QueryEngine","Re-using previous result from %s to execute query: %s",a.toString(),_x(r)),this.rs(e,o,r,Qxe(a,-1)).next(l=>l))})}ts(e,r){let n=new cs(sZ(e));return r.forEach((a,s)=>{Sw(e,s)&&(n=n.add(s))}),n}ns(e,r,n,a){if(e.limit===null)return!1;if(n.size!==r.size)return!0;const s=e.limitType==="F"?r.last():r.first();return!!s&&(s.hasPendingWrites||s.version.compareTo(a)>0)}Xi(e,r,n){return Cx()<=ha.DEBUG&&Pr("QueryEngine","Using full collection scan to execute query:",_x(r)),this.Ji.getDocumentsMatchingQuery(e,r,Qu.min(),n)}rs(e,r,n,a){return this.Ji.getDocumentsMatchingQuery(e,n,a).next(s=>(r.forEach(o=>{s=s.insert(o.key,o)}),s))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class F1e{constructor(e,r,n,a){this.persistence=e,this.ss=r,this.serializer=a,this.os=new Ws(Gn),this._s=new Mm(s=>ag(s),_w),this.us=new Map,this.cs=e.getRemoteDocumentCache(),this.Ur=e.getTargetCache(),this.Gr=e.getBundleCache(),this.ls(n)}ls(e){this.documentOverlayCache=this.persistence.getDocumentOverlayCache(e),this.indexManager=this.persistence.getIndexManager(e),this.mutationQueue=this.persistence.getMutationQueue(e,this.indexManager),this.localDocuments=new VZ(this.cs,this.mutationQueue,this.documentOverlayCache,this.indexManager),this.cs.setIndexManager(this.indexManager),this.ss.initialize(this.localDocuments,this.indexManager)}collectGarbage(e){return this.persistence.runTransaction("Collect garbage","readwrite-primary",r=>e.collect(r,this.os))}}function GZ(t,e,r,n){return new F1e(t,e,r,n)}async function KZ(t,e){const r=Ln(t);return await r.persistence.runTransaction("Handle user change","readonly",n=>{let a;return r.mutationQueue.getAllMutationBatches(n).next(s=>(a=s,r.ls(e),r.mutationQueue.getAllMutationBatches(n))).next(s=>{const o=[],l=[];let c=ta();for(const u of a){o.push(u.batchId);for(const d of u.mutations)c=c.add(d.key)}for(const u of s){l.push(u.batchId);for(const d of u.mutations)c=c.add(d.key)}return r.localDocuments.getDocuments(n,c).next(u=>({hs:u,removedBatchIds:o,addedBatchIds:l}))})})}function O1e(t,e){const r=Ln(t);return r.persistence.runTransaction("Acknowledge batch","readwrite-primary",n=>{const a=e.batch.keys(),s=r.cs.newChangeBuffer({trackRemovals:!0});return function(l,c,u,d){const f=u.batch,A=f.keys();let h=Ht.resolve();return A.forEach(m=>{h=h.next(()=>d.getEntry(c,m)).next(p=>{const x=u.docVersions.get(m);mn(x!==null),p.version.compareTo(x)<0&&(f.applyToRemoteDocument(p,u),p.isValidDocument()&&(p.setReadTime(u.commitVersion),d.addEntry(p)))})}),h.next(()=>l.mutationQueue.removeMutationBatch(c,f))}(r,n,e,s).next(()=>s.apply(n)).next(()=>r.mutationQueue.performConsistencyCheck(n)).next(()=>r.documentOverlayCache.removeOverlaysForBatchId(n,a,e.batch.batchId)).next(()=>r.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(n,function(l){let c=ta();for(let u=0;u<l.mutationResults.length;++u)l.mutationResults[u].transformResults.length>0&&(c=c.add(l.batch.mutations[u].key));return c}(e))).next(()=>r.localDocuments.getDocuments(n,a))})}function qZ(t){const e=Ln(t);return e.persistence.runTransaction("Get last remote snapshot version","readonly",r=>e.Ur.getLastRemoteSnapshotVersion(r))}function D1e(t,e){const r=Ln(t),n=e.snapshotVersion;let a=r.os;return r.persistence.runTransaction("Apply remote event","readwrite-primary",s=>{const o=r.cs.newChangeBuffer({trackRemovals:!0});a=r.os;const l=[];e.targetChanges.forEach((d,f)=>{const A=a.get(f);if(!A)return;l.push(r.Ur.removeMatchingKeys(s,d.removedDocuments,f).next(()=>r.Ur.addMatchingKeys(s,d.addedDocuments,f)));let h=A.withSequenceNumber(s.currentSequenceNumber);e.targetMismatches.get(f)!==null?h=h.withResumeToken(qi.EMPTY_BYTE_STRING,wn.min()).withLastLimboFreeSnapshotVersion(wn.min()):d.resumeToken.approximateByteSize()>0&&(h=h.withResumeToken(d.resumeToken,n)),a=a.insert(f,h),function(p,x,v){return p.resumeToken.approximateByteSize()===0||x.snapshotVersion.toMicroseconds()-p.snapshotVersion.toMicroseconds()>=3e8?!0:v.addedDocuments.size+v.modifiedDocuments.size+v.removedDocuments.size>0}(A,h,d)&&l.push(r.Ur.updateTargetData(s,h))});let c=Fu(),u=ta();if(e.documentUpdates.forEach(d=>{e.resolvedLimboDocuments.has(d)&&l.push(r.persistence.referenceDelegate.updateLimboDocument(s,d))}),l.push(R1e(s,o,e.documentUpdates).next(d=>{c=d.Ps,u=d.Is})),!n.isEqual(wn.min())){const d=r.Ur.getLastRemoteSnapshotVersion(s).next(f=>r.Ur.setTargetsMetadata(s,s.currentSequenceNumber,n));l.push(d)}return Ht.waitFor(l).next(()=>o.apply(s)).next(()=>r.localDocuments.getLocalViewOfDocuments(s,c,u)).next(()=>c)}).then(s=>(r.os=a,s))}function R1e(t,e,r){let n=ta(),a=ta();return r.forEach(s=>n=n.add(s)),e.getEntries(t,n).next(s=>{let o=Fu();return r.forEach((l,c)=>{const u=s.get(l);c.isFoundDocument()!==u.isFoundDocument()&&(a=a.add(l)),c.isNoDocument()&&c.version.isEqual(wn.min())?(e.removeEntry(l,c.readTime),o=o.insert(l,c)):!u.isValidDocument()||c.version.compareTo(u.version)>0||c.version.compareTo(u.version)===0&&u.hasPendingWrites?(e.addEntry(c),o=o.insert(l,c)):Pr("LocalStore","Ignoring outdated watch update for ",l,". Current version:",u.version," Watch version:",c.version)}),{Ps:o,Is:a}})}function M1e(t,e){const r=Ln(t);return r.persistence.runTransaction("Get next mutation batch","readonly",n=>(e===void 0&&(e=-1),r.mutationQueue.getNextMutationBatchAfterBatchId(n,e)))}function L1e(t,e){const r=Ln(t);return r.persistence.runTransaction("Allocate target","readwrite",n=>{let a;return r.Ur.getTargetData(n,e).next(s=>s?(a=s,Ht.resolve(a)):r.Ur.allocateTargetId(n).next(o=>(a=new zh(e,o,"TargetPurposeListen",n.currentSequenceNumber),r.Ur.addTargetData(n,a).next(()=>a))))}).then(n=>{const a=r.os.get(n.targetId);return(a===null||n.snapshotVersion.compareTo(a.snapshotVersion)>0)&&(r.os=r.os.insert(n.targetId,n),r._s.set(e,n.targetId)),n})}async function ak(t,e,r){const n=Ln(t),a=n.os.get(e),s=r?"readwrite":"readwrite-primary";try{r||await n.persistence.runTransaction("Release target",s,o=>n.persistence.referenceDelegate.removeTarget(o,a))}catch(o){if(!Rm(o))throw o;Pr("LocalStore",`Failed to update sequence numbers for target ${e}: ${o}`)}n.os=n.os.remove(e),n._s.delete(a.target)}function i9(t,e,r){const n=Ln(t);let a=wn.min(),s=ta();return n.persistence.runTransaction("Execute query","readwrite",o=>function(c,u,d){const f=Ln(c),A=f._s.get(d);return A!==void 0?Ht.resolve(f.os.get(A)):f.Ur.getTargetData(u,d)}(n,o,Id(e)).next(l=>{if(l)return a=l.lastLimboFreeSnapshotVersion,n.Ur.getMatchingKeysForTargetId(o,l.targetId).next(c=>{s=c})}).next(()=>n.ss.getDocumentsMatchingQuery(o,e,r?a:wn.min(),r?s:ta())).next(l=>(U1e(n,Eve(e),l),{documents:l,Ts:s})))}function U1e(t,e,r){let n=t.us.get(e)||wn.min();r.forEach((a,s)=>{s.readTime.compareTo(n)>0&&(n=s.readTime)}),t.us.set(e,n)}class o9{constructor(){this.activeTargetIds=Tve()}fs(e){this.activeTargetIds=this.activeTargetIds.add(e)}gs(e){this.activeTargetIds=this.activeTargetIds.delete(e)}Vs(){const e={activeTargetIds:this.activeTargetIds.toArray(),updateTimeMs:Date.now()};return JSON.stringify(e)}}class zZ{constructor(){this.so=new o9,this.oo={},this.onlineStateHandler=null,this.sequenceNumberHandler=null}addPendingMutation(e){}updateMutationState(e,r,n){}addLocalQueryTarget(e,r=!0){return r&&this.so.fs(e),this.oo[e]||"not-current"}updateQueryState(e,r,n){this.oo[e]=r}removeLocalQueryTarget(e){this.so.gs(e)}isLocalQueryTarget(e){return this.so.activeTargetIds.has(e)}clearQueryState(e){delete this.oo[e]}getAllActiveQueryTargets(){return this.so.activeTargetIds}isActiveQueryTarget(e){return this.so.activeTargetIds.has(e)}start(){return this.so=new o9,Promise.resolve()}handleUserChange(e,r,n){}setOnlineState(e){}shutdown(){}writeSequenceNumber(e){}notifyBundleLoaded(e){}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Q1e{_o(e){}shutdown(){}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class l9{constructor(){this.ao=()=>this.uo(),this.co=()=>this.lo(),this.ho=[],this.Po()}_o(e){this.ho.push(e)}shutdown(){window.removeEventListener("online",this.ao),window.removeEventListener("offline",this.co)}Po(){window.addEventListener("online",this.ao),window.addEventListener("offline",this.co)}uo(){Pr("ConnectivityMonitor","Network connectivity changed: AVAILABLE");for(const e of this.ho)e(0)}lo(){Pr("ConnectivityMonitor","Network connectivity changed: UNAVAILABLE");for(const e of this.ho)e(1)}static D(){return typeof window<"u"&&window.addEventListener!==void 0&&window.removeEventListener!==void 0}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let sC=null;function S3(){return sC===null?sC=function(){return 268435456+Math.round(2147483648*Math.random())}():sC++,"0x"+sC.toString(16)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const V1e={BatchGetDocuments:"batchGet",Commit:"commit",RunQuery:"runQuery",RunAggregationQuery:"runAggregationQuery"};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class H1e{constructor(e){this.Io=e.Io,this.To=e.To}Eo(e){this.Ao=e}Ro(e){this.Vo=e}mo(e){this.fo=e}onMessage(e){this.po=e}close(){this.To()}send(e){this.Io(e)}yo(){this.Ao()}wo(){this.Vo()}So(e){this.fo(e)}bo(e){this.po(e)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Ll="WebChannelConnection";class $1e extends class{constructor(r){this.databaseInfo=r,this.databaseId=r.databaseId;const n=r.ssl?"https":"http",a=encodeURIComponent(this.databaseId.projectId),s=encodeURIComponent(this.databaseId.database);this.Do=n+"://"+r.host,this.vo=`projects/${a}/databases/${s}`,this.Co=this.databaseId.database==="(default)"?`project_id=${a}`:`project_id=${a}&database_id=${s}`}get Fo(){return!1}Mo(r,n,a,s,o){const l=S3(),c=this.xo(r,n.toUriEncodedString());Pr("RestConnection",`Sending RPC '${r}' ${l}:`,c,a);const u={"google-cloud-resource-prefix":this.vo,"x-goog-request-params":this.Co};return this.Oo(u,s,o),this.No(r,c,u,a).then(d=>(Pr("RestConnection",`Received RPC '${r}' ${l}: `,d),d),d=>{throw gm("RestConnection",`RPC '${r}' ${l} failed with error: `,d,"url: ",c,"request:",a),d})}Lo(r,n,a,s,o,l){return this.Mo(r,n,a,s,o)}Oo(r,n,a){r["X-Goog-Api-Client"]=function(){return"gl-js/ fire/"+o1}(),r["Content-Type"]="text/plain",this.databaseInfo.appId&&(r["X-Firebase-GMPID"]=this.databaseInfo.appId),n&&n.headers.forEach((s,o)=>r[o]=s),a&&a.headers.forEach((s,o)=>r[o]=s)}xo(r,n){const a=V1e[r];return`${this.Do}/v1/${n}:${a}`}terminate(){}}{constructor(e){super(e),this.forceLongPolling=e.forceLongPolling,this.autoDetectLongPolling=e.autoDetectLongPolling,this.useFetchStreams=e.useFetchStreams,this.longPollingOptions=e.longPollingOptions}No(e,r,n,a){const s=S3();return new Promise((o,l)=>{const c=new jJ;c.setWithCredentials(!0),c.listenOnce(PJ.COMPLETE,()=>{try{switch(c.getLastErrorCode()){case nE.NO_ERROR:const d=c.getResponseJson();Pr(Ll,`XHR for RPC '${e}' ${s} received:`,JSON.stringify(d)),o(d);break;case nE.TIMEOUT:Pr(Ll,`RPC '${e}' ${s} timed out`),l(new Lr(ir.DEADLINE_EXCEEDED,"Request time out"));break;case nE.HTTP_ERROR:const f=c.getStatus();if(Pr(Ll,`RPC '${e}' ${s} failed with status:`,f,"response text:",c.getResponseText()),f>0){let A=c.getResponseJson();Array.isArray(A)&&(A=A[0]);const h=A==null?void 0:A.error;if(h&&h.status&&h.message){const m=function(x){const v=x.toLowerCase().replace(/_/g,"-");return Object.values(ir).indexOf(v)>=0?v:ir.UNKNOWN}(h.status);l(new Lr(m,h.message))}else l(new Lr(ir.UNKNOWN,"Server responded with status "+c.getStatus()))}else l(new Lr(ir.UNAVAILABLE,"Connection failed."));break;default:cn()}}finally{Pr(Ll,`RPC '${e}' ${s} completed.`)}});const u=JSON.stringify(a);Pr(Ll,`RPC '${e}' ${s} sending request:`,a),c.send(r,"POST",u,n,15)})}Bo(e,r,n){const a=S3(),s=[this.Do,"/","google.firestore.v1.Firestore","/",e,"/channel"],o=kJ(),l=TJ(),c={httpSessionIdParam:"gsessionid",initMessageHeaders:{},messageUrlParams:{database:`projects/${this.databaseId.projectId}/databases/${this.databaseId.database}`},sendRawJson:!0,supportsCrossDomainXhr:!0,internalChannelParams:{forwardChannelRequestTimeoutMs:6e5},forceLongPolling:this.forceLongPolling,detectBufferingProxy:this.autoDetectLongPolling},u=this.longPollingOptions.timeoutSeconds;u!==void 0&&(c.longPollingTimeout=Math.round(1e3*u)),this.useFetchStreams&&(c.useFetchStreams=!0),this.Oo(c.initMessageHeaders,r,n),c.encodeInitMessageHeaders=!0;const d=s.join("");Pr(Ll,`Creating RPC '${e}' stream ${a}: ${d}`,c);const f=o.createWebChannel(d,c);let A=!1,h=!1;const m=new H1e({Io:x=>{h?Pr(Ll,`Not sending because RPC '${e}' stream ${a} is closed:`,x):(A||(Pr(Ll,`Opening RPC '${e}' stream ${a} transport.`),f.open(),A=!0),Pr(Ll,`RPC '${e}' stream ${a} sending:`,x),f.send(x))},To:()=>f.close()}),p=(x,v,y)=>{x.listen(v,b=>{try{y(b)}catch(w){setTimeout(()=>{throw w},0)}})};return p(f,Ry.EventType.OPEN,()=>{h||(Pr(Ll,`RPC '${e}' stream ${a} transport opened.`),m.yo())}),p(f,Ry.EventType.CLOSE,()=>{h||(h=!0,Pr(Ll,`RPC '${e}' stream ${a} transport closed`),m.So())}),p(f,Ry.EventType.ERROR,x=>{h||(h=!0,gm(Ll,`RPC '${e}' stream ${a} transport errored:`,x),m.So(new Lr(ir.UNAVAILABLE,"The operation could not be completed")))}),p(f,Ry.EventType.MESSAGE,x=>{var v;if(!h){const y=x.data[0];mn(!!y);const b=y,w=b.error||((v=b[0])===null||v===void 0?void 0:v.error);if(w){Pr(Ll,`RPC '${e}' stream ${a} received error:`,w);const j=w.status;let I=function(E){const T=Zi[E];if(T!==void 0)return xZ(T)}(j),_=w.message;I===void 0&&(I=ir.INTERNAL,_="Unknown error status: "+j+" with message "+w.message),h=!0,m.So(new Lr(I,_)),f.close()}else Pr(Ll,`RPC '${e}' stream ${a} received:`,y),m.bo(y)}}),p(l,BJ.STAT_EVENT,x=>{x.stat===VT.PROXY?Pr(Ll,`RPC '${e}' stream ${a} detected buffering proxy`):x.stat===VT.NOPROXY&&Pr(Ll,`RPC '${e}' stream ${a} detected no buffering proxy`)}),setTimeout(()=>{m.wo()},0),m}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function G1e(){return typeof window<"u"?window:null}function uE(){return typeof document<"u"?document:null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Pj(t){return new qve(t,!0)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class o6{constructor(e,r,n=1e3,a=1.5,s=6e4){this.ui=e,this.timerId=r,this.ko=n,this.qo=a,this.Qo=s,this.Ko=0,this.$o=null,this.Uo=Date.now(),this.reset()}reset(){this.Ko=0}Wo(){this.Ko=this.Qo}Go(e){this.cancel();const r=Math.floor(this.Ko+this.zo()),n=Math.max(0,Date.now()-this.Uo),a=Math.max(0,r-n);a>0&&Pr("ExponentialBackoff",`Backing off for ${a} ms (base delay: ${this.Ko} ms, delay with jitter: ${r} ms, last attempt: ${n} ms ago)`),this.$o=this.ui.enqueueAfterDelay(this.timerId,a,()=>(this.Uo=Date.now(),e())),this.Ko*=this.qo,this.Ko<this.ko&&(this.Ko=this.ko),this.Ko>this.Qo&&(this.Ko=this.Qo)}jo(){this.$o!==null&&(this.$o.skipDelay(),this.$o=null)}cancel(){this.$o!==null&&(this.$o.cancel(),this.$o=null)}zo(){return(Math.random()-.5)*this.Ko}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class WZ{constructor(e,r,n,a,s,o,l,c){this.ui=e,this.Ho=n,this.Jo=a,this.connection=s,this.authCredentialsProvider=o,this.appCheckCredentialsProvider=l,this.listener=c,this.state=0,this.Yo=0,this.Zo=null,this.Xo=null,this.stream=null,this.e_=0,this.t_=new o6(e,r)}n_(){return this.state===1||this.state===5||this.r_()}r_(){return this.state===2||this.state===3}start(){this.e_=0,this.state!==4?this.auth():this.i_()}async stop(){this.n_()&&await this.close(0)}s_(){this.state=0,this.t_.reset()}o_(){this.r_()&&this.Zo===null&&(this.Zo=this.ui.enqueueAfterDelay(this.Ho,6e4,()=>this.__()))}a_(e){this.u_(),this.stream.send(e)}async __(){if(this.r_())return this.close(0)}u_(){this.Zo&&(this.Zo.cancel(),this.Zo=null)}c_(){this.Xo&&(this.Xo.cancel(),this.Xo=null)}async close(e,r){this.u_(),this.c_(),this.t_.cancel(),this.Yo++,e!==4?this.t_.reset():r&&r.code===ir.RESOURCE_EXHAUSTED?(Cc(r.toString()),Cc("Using maximum backoff delay to prevent overloading the backend."),this.t_.Wo()):r&&r.code===ir.UNAUTHENTICATED&&this.state!==3&&(this.authCredentialsProvider.invalidateToken(),this.appCheckCredentialsProvider.invalidateToken()),this.stream!==null&&(this.l_(),this.stream.close(),this.stream=null),this.state=e,await this.listener.mo(r)}l_(){}auth(){this.state=1;const e=this.h_(this.Yo),r=this.Yo;Promise.all([this.authCredentialsProvider.getToken(),this.appCheckCredentialsProvider.getToken()]).then(([n,a])=>{this.Yo===r&&this.P_(n,a)},n=>{e(()=>{const a=new Lr(ir.UNKNOWN,"Fetching auth token failed: "+n.message);return this.I_(a)})})}P_(e,r){const n=this.h_(this.Yo);this.stream=this.T_(e,r),this.stream.Eo(()=>{n(()=>this.listener.Eo())}),this.stream.Ro(()=>{n(()=>(this.state=2,this.Xo=this.ui.enqueueAfterDelay(this.Jo,1e4,()=>(this.r_()&&(this.state=3),Promise.resolve())),this.listener.Ro()))}),this.stream.mo(a=>{n(()=>this.I_(a))}),this.stream.onMessage(a=>{n(()=>++this.e_==1?this.E_(a):this.onNext(a))})}i_(){this.state=5,this.t_.Go(async()=>{this.state=0,this.start()})}I_(e){return Pr("PersistentStream",`close with error: ${e}`),this.stream=null,this.close(4,e)}h_(e){return r=>{this.ui.enqueueAndForget(()=>this.Yo===e?r():(Pr("PersistentStream","stream callback skipped by getCloseGuardedDispatcher."),Promise.resolve()))}}}class K1e extends WZ{constructor(e,r,n,a,s,o){super(e,"listen_stream_connection_backoff","listen_stream_idle","health_check_timeout",r,n,a,o),this.serializer=s}T_(e,r){return this.connection.Bo("Listen",e,r)}E_(e){return this.onNext(e)}onNext(e){this.t_.reset();const r=Yve(this.serializer,e),n=function(s){if(!("targetChange"in s))return wn.min();const o=s.targetChange;return o.targetIds&&o.targetIds.length?wn.min():o.readTime?el(o.readTime):wn.min()}(e);return this.listener.d_(r,n)}A_(e){const r={};r.database=ZT(this.serializer),r.addTarget=function(s,o){let l;const c=o.target;if(l=iS(c)?{documents:EZ(s,c)}:{query:SZ(s,c)._t},l.targetId=o.targetId,o.resumeToken.approximateByteSize()>0){l.resumeToken=bZ(s,o.resumeToken);const u=YT(s,o.expectedCount);u!==null&&(l.expectedCount=u)}else if(o.snapshotVersion.compareTo(wn.min())>0){l.readTime=Ov(s,o.snapshotVersion.toTimestamp());const u=YT(s,o.expectedCount);u!==null&&(l.expectedCount=u)}return l}(this.serializer,e);const n=Zve(this.serializer,e);n&&(r.labels=n),this.a_(r)}R_(e){const r={};r.database=ZT(this.serializer),r.removeTarget=e,this.a_(r)}}class q1e extends WZ{constructor(e,r,n,a,s,o){super(e,"write_stream_connection_backoff","write_stream_idle","health_check_timeout",r,n,a,o),this.serializer=s}get V_(){return this.e_>0}start(){this.lastStreamToken=void 0,super.start()}l_(){this.V_&&this.m_([])}T_(e,r){return this.connection.Bo("Write",e,r)}E_(e){return mn(!!e.streamToken),this.lastStreamToken=e.streamToken,mn(!e.writeResults||e.writeResults.length===0),this.listener.f_()}onNext(e){mn(!!e.streamToken),this.lastStreamToken=e.streamToken,this.t_.reset();const r=Jve(e.writeResults,e.commitTime),n=el(e.commitTime);return this.listener.g_(n,r)}p_(){const e={};e.database=ZT(this.serializer),this.a_(e)}m_(e){const r={streamToken:this.lastStreamToken,writes:e.map(n=>b2(this.serializer,n))};this.a_(r)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class z1e extends class{}{constructor(e,r,n,a){super(),this.authCredentials=e,this.appCheckCredentials=r,this.connection=n,this.serializer=a,this.y_=!1}w_(){if(this.y_)throw new Lr(ir.FAILED_PRECONDITION,"The client has already been terminated.")}Mo(e,r,n,a){return this.w_(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([s,o])=>this.connection.Mo(e,JT(r,n),a,s,o)).catch(s=>{throw s.name==="FirebaseError"?(s.code===ir.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),s):new Lr(ir.UNKNOWN,s.toString())})}Lo(e,r,n,a,s){return this.w_(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([o,l])=>this.connection.Lo(e,JT(r,n),a,o,l,s)).catch(o=>{throw o.name==="FirebaseError"?(o.code===ir.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),o):new Lr(ir.UNKNOWN,o.toString())})}terminate(){this.y_=!0,this.connection.terminate()}}class W1e{constructor(e,r){this.asyncQueue=e,this.onlineStateHandler=r,this.state="Unknown",this.S_=0,this.b_=null,this.D_=!0}v_(){this.S_===0&&(this.C_("Unknown"),this.b_=this.asyncQueue.enqueueAfterDelay("online_state_timeout",1e4,()=>(this.b_=null,this.F_("Backend didn't respond within 10 seconds."),this.C_("Offline"),Promise.resolve())))}M_(e){this.state==="Online"?this.C_("Unknown"):(this.S_++,this.S_>=1&&(this.x_(),this.F_(`Connection failed 1 times. Most recent error: ${e.toString()}`),this.C_("Offline")))}set(e){this.x_(),this.S_=0,e==="Online"&&(this.D_=!1),this.C_(e)}C_(e){e!==this.state&&(this.state=e,this.onlineStateHandler(e))}F_(e){const r=`Could not reach Cloud Firestore backend. ${e}
This typically indicates that your device does not have a healthy Internet connection at the moment. The client will operate in offline mode until it is able to successfully connect to the backend.`;this.D_?(Cc(r),this.D_=!1):Pr("OnlineStateTracker",r)}x_(){this.b_!==null&&(this.b_.cancel(),this.b_=null)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class X1e{constructor(e,r,n,a,s){this.localStore=e,this.datastore=r,this.asyncQueue=n,this.remoteSyncer={},this.O_=[],this.N_=new Map,this.L_=new Set,this.B_=[],this.k_=s,this.k_._o(o=>{n.enqueueAndForget(async()=>{Pg(this)&&(Pr("RemoteStore","Restarting streams for network reachability change."),await async function(c){const u=Ln(c);u.L_.add(4),await jw(u),u.q_.set("Unknown"),u.L_.delete(4),await Bj(u)}(this))})}),this.q_=new W1e(n,a)}}async function Bj(t){if(Pg(t))for(const e of t.B_)await e(!0)}async function jw(t){for(const e of t.B_)await e(!1)}function XZ(t,e){const r=Ln(t);r.N_.has(e.targetId)||(r.N_.set(e.targetId,e),d6(r)?u6(r):d1(r).r_()&&c6(r,e))}function l6(t,e){const r=Ln(t),n=d1(r);r.N_.delete(e),n.r_()&&YZ(r,e),r.N_.size===0&&(n.r_()?n.o_():Pg(r)&&r.q_.set("Unknown"))}function c6(t,e){if(t.Q_.xe(e.targetId),e.resumeToken.approximateByteSize()>0||e.snapshotVersion.compareTo(wn.min())>0){const r=t.remoteSyncer.getRemoteKeysForTarget(e.targetId).size;e=e.withExpectedCount(r)}d1(t).A_(e)}function YZ(t,e){t.Q_.xe(e),d1(t).R_(e)}function u6(t){t.Q_=new Hve({getRemoteKeysForTarget:e=>t.remoteSyncer.getRemoteKeysForTarget(e),ot:e=>t.N_.get(e)||null,tt:()=>t.datastore.serializer.databaseId}),d1(t).start(),t.q_.v_()}function d6(t){return Pg(t)&&!d1(t).n_()&&t.N_.size>0}function Pg(t){return Ln(t).L_.size===0}function JZ(t){t.Q_=void 0}async function Y1e(t){t.q_.set("Online")}async function J1e(t){t.N_.forEach((e,r)=>{c6(t,e)})}async function Z1e(t,e){JZ(t),d6(t)?(t.q_.M_(e),u6(t)):t.q_.set("Unknown")}async function eye(t,e,r){if(t.q_.set("Online"),e instanceof yZ&&e.state===2&&e.cause)try{await async function(a,s){const o=s.cause;for(const l of s.targetIds)a.N_.has(l)&&(await a.remoteSyncer.rejectListen(l,o),a.N_.delete(l),a.Q_.removeTarget(l))}(t,e)}catch(n){Pr("RemoteStore","Failed to remove targets %s: %s ",e.targetIds.join(","),n),await fS(t,n)}else if(e instanceof cE?t.Q_.Ke(e):e instanceof vZ?t.Q_.He(e):t.Q_.We(e),!r.isEqual(wn.min()))try{const n=await qZ(t.localStore);r.compareTo(n)>=0&&await function(s,o){const l=s.Q_.rt(o);return l.targetChanges.forEach((c,u)=>{if(c.resumeToken.approximateByteSize()>0){const d=s.N_.get(u);d&&s.N_.set(u,d.withResumeToken(c.resumeToken,o))}}),l.targetMismatches.forEach((c,u)=>{const d=s.N_.get(c);if(!d)return;s.N_.set(c,d.withResumeToken(qi.EMPTY_BYTE_STRING,d.snapshotVersion)),YZ(s,c);const f=new zh(d.target,c,u,d.sequenceNumber);c6(s,f)}),s.remoteSyncer.applyRemoteEvent(l)}(t,r)}catch(n){Pr("RemoteStore","Failed to raise snapshot:",n),await fS(t,n)}}async function fS(t,e,r){if(!Rm(e))throw e;t.L_.add(1),await jw(t),t.q_.set("Offline"),r||(r=()=>qZ(t.localStore)),t.asyncQueue.enqueueRetryable(async()=>{Pr("RemoteStore","Retrying IndexedDB access"),await r(),t.L_.delete(1),await Bj(t)})}function ZZ(t,e){return e().catch(r=>fS(t,r,e))}async function Pw(t){const e=Ln(t),r=bm(e);let n=e.O_.length>0?e.O_[e.O_.length-1].batchId:-1;for(;tye(e);)try{const a=await M1e(e.localStore,n);if(a===null){e.O_.length===0&&r.o_();break}n=a.batchId,rye(e,a)}catch(a){await fS(e,a)}eee(e)&&tee(e)}function tye(t){return Pg(t)&&t.O_.length<10}function rye(t,e){t.O_.push(e);const r=bm(t);r.r_()&&r.V_&&r.m_(e.mutations)}function eee(t){return Pg(t)&&!bm(t).n_()&&t.O_.length>0}function tee(t){bm(t).start()}async function nye(t){bm(t).p_()}async function aye(t){const e=bm(t);for(const r of t.O_)e.m_(r.mutations)}async function sye(t,e,r){const n=t.O_.shift(),a=JD.from(n,e,r);await ZZ(t,()=>t.remoteSyncer.applySuccessfulWrite(a)),await Pw(t)}async function iye(t,e){e&&bm(t).V_&&await async function(n,a){if(function(o){return gZ(o)&&o!==ir.ABORTED}(a.code)){const s=n.O_.shift();bm(n).s_(),await ZZ(n,()=>n.remoteSyncer.rejectFailedWrite(s.batchId,a)),await Pw(n)}}(t,e),eee(t)&&tee(t)}async function c9(t,e){const r=Ln(t);r.asyncQueue.verifyOperationInProgress(),Pr("RemoteStore","RemoteStore received new credentials");const n=Pg(r);r.L_.add(3),await jw(r),n&&r.q_.set("Unknown"),await r.remoteSyncer.handleCredentialChange(e),r.L_.delete(3),await Bj(r)}async function oye(t,e){const r=Ln(t);e?(r.L_.delete(2),await Bj(r)):e||(r.L_.add(2),await jw(r),r.q_.set("Unknown"))}function d1(t){return t.K_||(t.K_=function(r,n,a){const s=Ln(r);return s.w_(),new K1e(n,s.connection,s.authCredentials,s.appCheckCredentials,s.serializer,a)}(t.datastore,t.asyncQueue,{Eo:Y1e.bind(null,t),Ro:J1e.bind(null,t),mo:Z1e.bind(null,t),d_:eye.bind(null,t)}),t.B_.push(async e=>{e?(t.K_.s_(),d6(t)?u6(t):t.q_.set("Unknown")):(await t.K_.stop(),JZ(t))})),t.K_}function bm(t){return t.U_||(t.U_=function(r,n,a){const s=Ln(r);return s.w_(),new q1e(n,s.connection,s.authCredentials,s.appCheckCredentials,s.serializer,a)}(t.datastore,t.asyncQueue,{Eo:()=>Promise.resolve(),Ro:nye.bind(null,t),mo:iye.bind(null,t),f_:aye.bind(null,t),g_:sye.bind(null,t)}),t.B_.push(async e=>{e?(t.U_.s_(),await Pw(t)):(await t.U_.stop(),t.O_.length>0&&(Pr("RemoteStore",`Stopping write stream with ${t.O_.length} pending writes`),t.O_=[]))})),t.U_}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class f6{constructor(e,r,n,a,s){this.asyncQueue=e,this.timerId=r,this.targetTimeMs=n,this.op=a,this.removalCallback=s,this.deferred=new pf,this.then=this.deferred.promise.then.bind(this.deferred.promise),this.deferred.promise.catch(o=>{})}get promise(){return this.deferred.promise}static createAndSchedule(e,r,n,a,s){const o=Date.now()+n,l=new f6(e,r,o,a,s);return l.start(n),l}start(e){this.timerHandle=setTimeout(()=>this.handleDelayElapsed(),e)}skipDelay(){return this.handleDelayElapsed()}cancel(e){this.timerHandle!==null&&(this.clearTimeout(),this.deferred.reject(new Lr(ir.CANCELLED,"Operation cancelled"+(e?": "+e:""))))}handleDelayElapsed(){this.asyncQueue.enqueueAndForget(()=>this.timerHandle!==null?(this.clearTimeout(),this.op().then(e=>this.deferred.resolve(e))):Promise.resolve())}clearTimeout(){this.timerHandle!==null&&(this.removalCallback(this),clearTimeout(this.timerHandle),this.timerHandle=null)}}function h6(t,e){if(Cc("AsyncQueue",`${e}: ${t}`),Rm(t))return new Lr(ir.UNAVAILABLE,`${e}: ${t}`);throw t}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class fv{constructor(e){this.comparator=e?(r,n)=>e(r,n)||Wr.comparator(r.key,n.key):(r,n)=>Wr.comparator(r.key,n.key),this.keyedMap=My(),this.sortedSet=new Ws(this.comparator)}static emptySet(e){return new fv(e.comparator)}has(e){return this.keyedMap.get(e)!=null}get(e){return this.keyedMap.get(e)}first(){return this.sortedSet.minKey()}last(){return this.sortedSet.maxKey()}isEmpty(){return this.sortedSet.isEmpty()}indexOf(e){const r=this.keyedMap.get(e);return r?this.sortedSet.indexOf(r):-1}get size(){return this.sortedSet.size}forEach(e){this.sortedSet.inorderTraversal((r,n)=>(e(r),!1))}add(e){const r=this.delete(e.key);return r.copy(r.keyedMap.insert(e.key,e),r.sortedSet.insert(e,null))}delete(e){const r=this.get(e);return r?this.copy(this.keyedMap.remove(e),this.sortedSet.remove(r)):this}isEqual(e){if(!(e instanceof fv)||this.size!==e.size)return!1;const r=this.sortedSet.getIterator(),n=e.sortedSet.getIterator();for(;r.hasNext();){const a=r.getNext().key,s=n.getNext().key;if(!a.isEqual(s))return!1}return!0}toString(){const e=[];return this.forEach(r=>{e.push(r.toString())}),e.length===0?"DocumentSet ()":`DocumentSet (
  `+e.join(`  
`)+`
)`}copy(e,r){const n=new fv;return n.comparator=this.comparator,n.keyedMap=e,n.sortedSet=r,n}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class u9{constructor(){this.W_=new Ws(Wr.comparator)}track(e){const r=e.doc.key,n=this.W_.get(r);n?e.type!==0&&n.type===3?this.W_=this.W_.insert(r,e):e.type===3&&n.type!==1?this.W_=this.W_.insert(r,{type:n.type,doc:e.doc}):e.type===2&&n.type===2?this.W_=this.W_.insert(r,{type:2,doc:e.doc}):e.type===2&&n.type===0?this.W_=this.W_.insert(r,{type:0,doc:e.doc}):e.type===1&&n.type===0?this.W_=this.W_.remove(r):e.type===1&&n.type===2?this.W_=this.W_.insert(r,{type:1,doc:n.doc}):e.type===0&&n.type===1?this.W_=this.W_.insert(r,{type:2,doc:e.doc}):cn():this.W_=this.W_.insert(r,e)}G_(){const e=[];return this.W_.inorderTraversal((r,n)=>{e.push(n)}),e}}class Dv{constructor(e,r,n,a,s,o,l,c,u){this.query=e,this.docs=r,this.oldDocs=n,this.docChanges=a,this.mutatedKeys=s,this.fromCache=o,this.syncStateChanged=l,this.excludesMetadataChanges=c,this.hasCachedResults=u}static fromInitialDocuments(e,r,n,a,s){const o=[];return r.forEach(l=>{o.push({type:0,doc:l})}),new Dv(e,r,fv.emptySet(r),o,n,a,!0,!1,s)}get hasPendingWrites(){return!this.mutatedKeys.isEmpty()}isEqual(e){if(!(this.fromCache===e.fromCache&&this.hasCachedResults===e.hasCachedResults&&this.syncStateChanged===e.syncStateChanged&&this.mutatedKeys.isEqual(e.mutatedKeys)&&Nj(this.query,e.query)&&this.docs.isEqual(e.docs)&&this.oldDocs.isEqual(e.oldDocs)))return!1;const r=this.docChanges,n=e.docChanges;if(r.length!==n.length)return!1;for(let a=0;a<r.length;a++)if(r[a].type!==n[a].type||!r[a].doc.isEqual(n[a].doc))return!1;return!0}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class lye{constructor(){this.z_=void 0,this.j_=[]}H_(){return this.j_.some(e=>e.J_())}}class cye{constructor(){this.queries=d9(),this.onlineState="Unknown",this.Y_=new Set}terminate(){(function(r,n){const a=Ln(r),s=a.queries;a.queries=d9(),s.forEach((o,l)=>{for(const c of l.j_)c.onError(n)})})(this,new Lr(ir.ABORTED,"Firestore shutting down"))}}function d9(){return new Mm(t=>aZ(t),Nj)}async function A6(t,e){const r=Ln(t);let n=3;const a=e.query;let s=r.queries.get(a);s?!s.H_()&&e.J_()&&(n=2):(s=new lye,n=e.J_()?0:1);try{switch(n){case 0:s.z_=await r.onListen(a,!0);break;case 1:s.z_=await r.onListen(a,!1);break;case 2:await r.onFirstRemoteStoreListen(a)}}catch(o){const l=h6(o,`Initialization of query '${_x(e.query)}' failed`);return void e.onError(l)}r.queries.set(a,s),s.j_.push(e),e.Z_(r.onlineState),s.z_&&e.X_(s.z_)&&p6(r)}async function m6(t,e){const r=Ln(t),n=e.query;let a=3;const s=r.queries.get(n);if(s){const o=s.j_.indexOf(e);o>=0&&(s.j_.splice(o,1),s.j_.length===0?a=e.J_()?0:1:!s.H_()&&e.J_()&&(a=2))}switch(a){case 0:return r.queries.delete(n),r.onUnlisten(n,!0);case 1:return r.queries.delete(n),r.onUnlisten(n,!1);case 2:return r.onLastRemoteStoreUnlisten(n);default:return}}function uye(t,e){const r=Ln(t);let n=!1;for(const a of e){const s=a.query,o=r.queries.get(s);if(o){for(const l of o.j_)l.X_(a)&&(n=!0);o.z_=a}}n&&p6(r)}function dye(t,e,r){const n=Ln(t),a=n.queries.get(e);if(a)for(const s of a.j_)s.onError(r);n.queries.delete(e)}function p6(t){t.Y_.forEach(e=>{e.next()})}var sk,f9;(f9=sk||(sk={})).ea="default",f9.Cache="cache";class g6{constructor(e,r,n){this.query=e,this.ta=r,this.na=!1,this.ra=null,this.onlineState="Unknown",this.options=n||{}}X_(e){if(!this.options.includeMetadataChanges){const n=[];for(const a of e.docChanges)a.type!==3&&n.push(a);e=new Dv(e.query,e.docs,e.oldDocs,n,e.mutatedKeys,e.fromCache,e.syncStateChanged,!0,e.hasCachedResults)}let r=!1;return this.na?this.ia(e)&&(this.ta.next(e),r=!0):this.sa(e,this.onlineState)&&(this.oa(e),r=!0),this.ra=e,r}onError(e){this.ta.error(e)}Z_(e){this.onlineState=e;let r=!1;return this.ra&&!this.na&&this.sa(this.ra,e)&&(this.oa(this.ra),r=!0),r}sa(e,r){if(!e.fromCache||!this.J_())return!0;const n=r!=="Offline";return(!this.options._a||!n)&&(!e.docs.isEmpty()||e.hasCachedResults||r==="Offline")}ia(e){if(e.docChanges.length>0)return!0;const r=this.ra&&this.ra.hasPendingWrites!==e.hasPendingWrites;return!(!e.syncStateChanged&&!r)&&this.options.includeMetadataChanges===!0}oa(e){e=Dv.fromInitialDocuments(e.query,e.docs,e.mutatedKeys,e.fromCache,e.hasCachedResults),this.na=!0,this.ta.next(e)}J_(){return this.options.source!==sk.Cache}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ree{constructor(e){this.key=e}}class nee{constructor(e){this.key=e}}class fye{constructor(e,r){this.query=e,this.Ta=r,this.Ea=null,this.hasCachedResults=!1,this.current=!1,this.da=ta(),this.mutatedKeys=ta(),this.Aa=sZ(e),this.Ra=new fv(this.Aa)}get Va(){return this.Ta}ma(e,r){const n=r?r.fa:new u9,a=r?r.Ra:this.Ra;let s=r?r.mutatedKeys:this.mutatedKeys,o=a,l=!1;const c=this.query.limitType==="F"&&a.size===this.query.limit?a.last():null,u=this.query.limitType==="L"&&a.size===this.query.limit?a.first():null;if(e.inorderTraversal((d,f)=>{const A=a.get(d),h=Sw(this.query,f)?f:null,m=!!A&&this.mutatedKeys.has(A.key),p=!!h&&(h.hasLocalMutations||this.mutatedKeys.has(h.key)&&h.hasCommittedMutations);let x=!1;A&&h?A.data.isEqual(h.data)?m!==p&&(n.track({type:3,doc:h}),x=!0):this.ga(A,h)||(n.track({type:2,doc:h}),x=!0,(c&&this.Aa(h,c)>0||u&&this.Aa(h,u)<0)&&(l=!0)):!A&&h?(n.track({type:0,doc:h}),x=!0):A&&!h&&(n.track({type:1,doc:A}),x=!0,(c||u)&&(l=!0)),x&&(h?(o=o.add(h),s=p?s.add(d):s.delete(d)):(o=o.delete(d),s=s.delete(d)))}),this.query.limit!==null)for(;o.size>this.query.limit;){const d=this.query.limitType==="F"?o.last():o.first();o=o.delete(d.key),s=s.delete(d.key),n.track({type:1,doc:d})}return{Ra:o,fa:n,ns:l,mutatedKeys:s}}ga(e,r){return e.hasLocalMutations&&r.hasCommittedMutations&&!r.hasLocalMutations}applyChanges(e,r,n,a){const s=this.Ra;this.Ra=e.Ra,this.mutatedKeys=e.mutatedKeys;const o=e.fa.G_();o.sort((d,f)=>function(h,m){const p=x=>{switch(x){case 0:return 1;case 2:case 3:return 2;case 1:return 0;default:return cn()}};return p(h)-p(m)}(d.type,f.type)||this.Aa(d.doc,f.doc)),this.pa(n),a=a!=null&&a;const l=r&&!a?this.ya():[],c=this.da.size===0&&this.current&&!a?1:0,u=c!==this.Ea;return this.Ea=c,o.length!==0||u?{snapshot:new Dv(this.query,e.Ra,s,o,e.mutatedKeys,c===0,u,!1,!!n&&n.resumeToken.approximateByteSize()>0),wa:l}:{wa:l}}Z_(e){return this.current&&e==="Offline"?(this.current=!1,this.applyChanges({Ra:this.Ra,fa:new u9,mutatedKeys:this.mutatedKeys,ns:!1},!1)):{wa:[]}}Sa(e){return!this.Ta.has(e)&&!!this.Ra.has(e)&&!this.Ra.get(e).hasLocalMutations}pa(e){e&&(e.addedDocuments.forEach(r=>this.Ta=this.Ta.add(r)),e.modifiedDocuments.forEach(r=>{}),e.removedDocuments.forEach(r=>this.Ta=this.Ta.delete(r)),this.current=e.current)}ya(){if(!this.current)return[];const e=this.da;this.da=ta(),this.Ra.forEach(n=>{this.Sa(n.key)&&(this.da=this.da.add(n.key))});const r=[];return e.forEach(n=>{this.da.has(n)||r.push(new nee(n))}),this.da.forEach(n=>{e.has(n)||r.push(new ree(n))}),r}ba(e){this.Ta=e.Ts,this.da=ta();const r=this.ma(e.documents);return this.applyChanges(r,!0)}Da(){return Dv.fromInitialDocuments(this.query,this.Ra,this.mutatedKeys,this.Ea===0,this.hasCachedResults)}}class hye{constructor(e,r,n){this.query=e,this.targetId=r,this.view=n}}class Aye{constructor(e){this.key=e,this.va=!1}}class mye{constructor(e,r,n,a,s,o){this.localStore=e,this.remoteStore=r,this.eventManager=n,this.sharedClientState=a,this.currentUser=s,this.maxConcurrentLimboResolutions=o,this.Ca={},this.Fa=new Mm(l=>aZ(l),Nj),this.Ma=new Map,this.xa=new Set,this.Oa=new Ws(Wr.comparator),this.Na=new Map,this.La=new a6,this.Ba={},this.ka=new Map,this.qa=lg.kn(),this.onlineState="Unknown",this.Qa=void 0}get isPrimaryClient(){return this.Qa===!0}}async function pye(t,e,r=!0){const n=cee(t);let a;const s=n.Fa.get(e);return s?(n.sharedClientState.addLocalQueryTarget(s.targetId),a=s.view.Da()):a=await aee(n,e,r,!0),a}async function gye(t,e){const r=cee(t);await aee(r,e,!0,!1)}async function aee(t,e,r,n){const a=await L1e(t.localStore,Id(e)),s=a.targetId,o=t.sharedClientState.addLocalQueryTarget(s,r);let l;return n&&(l=await xye(t,e,s,o==="current",a.resumeToken)),t.isPrimaryClient&&r&&XZ(t.remoteStore,a),l}async function xye(t,e,r,n,a){t.Ka=(f,A,h)=>async function(p,x,v,y){let b=x.view.ma(v);b.ns&&(b=await i9(p.localStore,x.query,!1).then(({documents:_})=>x.view.ma(_,b)));const w=y&&y.targetChanges.get(x.targetId),j=y&&y.targetMismatches.get(x.targetId)!=null,I=x.view.applyChanges(b,p.isPrimaryClient,w,j);return A9(p,x.targetId,I.wa),I.snapshot}(t,f,A,h);const s=await i9(t.localStore,e,!0),o=new fye(e,s.Ts),l=o.ma(s.documents),c=Iw.createSynthesizedTargetChangeForCurrentChange(r,n&&t.onlineState!=="Offline",a),u=o.applyChanges(l,t.isPrimaryClient,c);A9(t,r,u.wa);const d=new hye(e,r,o);return t.Fa.set(e,d),t.Ma.has(r)?t.Ma.get(r).push(e):t.Ma.set(r,[e]),u.snapshot}async function vye(t,e,r){const n=Ln(t),a=n.Fa.get(e),s=n.Ma.get(a.targetId);if(s.length>1)return n.Ma.set(a.targetId,s.filter(o=>!Nj(o,e))),void n.Fa.delete(e);n.isPrimaryClient?(n.sharedClientState.removeLocalQueryTarget(a.targetId),n.sharedClientState.isActiveQueryTarget(a.targetId)||await ak(n.localStore,a.targetId,!1).then(()=>{n.sharedClientState.clearQueryState(a.targetId),r&&l6(n.remoteStore,a.targetId),ik(n,a.targetId)}).catch(Ig)):(ik(n,a.targetId),await ak(n.localStore,a.targetId,!0))}async function yye(t,e){const r=Ln(t),n=r.Fa.get(e),a=r.Ma.get(n.targetId);r.isPrimaryClient&&a.length===1&&(r.sharedClientState.removeLocalQueryTarget(n.targetId),l6(r.remoteStore,n.targetId))}async function bye(t,e,r){const n=uee(t);try{const a=await function(o,l){const c=Ln(o),u=Ar.now(),d=l.reduce((h,m)=>h.add(m.key),ta());let f,A;return c.persistence.runTransaction("Locally write mutations","readwrite",h=>{let m=Fu(),p=ta();return c.cs.getEntries(h,d).next(x=>{m=x,m.forEach((v,y)=>{y.isValidDocument()||(p=p.add(v))})}).next(()=>c.localDocuments.getOverlayedDocuments(h,m)).next(x=>{f=x;const v=[];for(const y of l){const b=Lve(y,f.get(y.key).overlayedDocument);b!=null&&v.push(new FA(y.key,b,WJ(b.value.mapValue),$s.exists(!0)))}return c.mutationQueue.addMutationBatch(h,u,v,l)}).next(x=>{A=x;const v=x.applyToLocalDocumentSet(f,p);return c.documentOverlayCache.saveOverlays(h,x.batchId,v)})}).then(()=>({batchId:A.batchId,changes:oZ(f)}))}(n.localStore,e);n.sharedClientState.addPendingMutation(a.batchId),function(o,l,c){let u=o.Ba[o.currentUser.toKey()];u||(u=new Ws(Gn)),u=u.insert(l,c),o.Ba[o.currentUser.toKey()]=u}(n,a.batchId,r),await Bw(n,a.changes),await Pw(n.remoteStore)}catch(a){const s=h6(a,"Failed to persist write");r.reject(s)}}async function see(t,e){const r=Ln(t);try{const n=await D1e(r.localStore,e);e.targetChanges.forEach((a,s)=>{const o=r.Na.get(s);o&&(mn(a.addedDocuments.size+a.modifiedDocuments.size+a.removedDocuments.size<=1),a.addedDocuments.size>0?o.va=!0:a.modifiedDocuments.size>0?mn(o.va):a.removedDocuments.size>0&&(mn(o.va),o.va=!1))}),await Bw(r,n,e)}catch(n){await Ig(n)}}function h9(t,e,r){const n=Ln(t);if(n.isPrimaryClient&&r===0||!n.isPrimaryClient&&r===1){const a=[];n.Fa.forEach((s,o)=>{const l=o.view.Z_(e);l.snapshot&&a.push(l.snapshot)}),function(o,l){const c=Ln(o);c.onlineState=l;let u=!1;c.queries.forEach((d,f)=>{for(const A of f.j_)A.Z_(l)&&(u=!0)}),u&&p6(c)}(n.eventManager,e),a.length&&n.Ca.d_(a),n.onlineState=e,n.isPrimaryClient&&n.sharedClientState.setOnlineState(e)}}async function wye(t,e,r){const n=Ln(t);n.sharedClientState.updateQueryState(e,"rejected",r);const a=n.Na.get(e),s=a&&a.key;if(s){let o=new Ws(Wr.comparator);o=o.insert(s,Vs.newNoDocument(s,wn.min()));const l=ta().add(s),c=new Ej(wn.min(),new Map,new Ws(Gn),o,l);await see(n,c),n.Oa=n.Oa.remove(s),n.Na.delete(e),x6(n)}else await ak(n.localStore,e,!1).then(()=>ik(n,e,r)).catch(Ig)}async function Nye(t,e){const r=Ln(t),n=e.batch.batchId;try{const a=await O1e(r.localStore,e);oee(r,n,null),iee(r,n),r.sharedClientState.updateMutationState(n,"acknowledged"),await Bw(r,a)}catch(a){await Ig(a)}}async function Cye(t,e,r){const n=Ln(t);try{const a=await function(o,l){const c=Ln(o);return c.persistence.runTransaction("Reject batch","readwrite-primary",u=>{let d;return c.mutationQueue.lookupMutationBatch(u,l).next(f=>(mn(f!==null),d=f.keys(),c.mutationQueue.removeMutationBatch(u,f))).next(()=>c.mutationQueue.performConsistencyCheck(u)).next(()=>c.documentOverlayCache.removeOverlaysForBatchId(u,d,l)).next(()=>c.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(u,d)).next(()=>c.localDocuments.getDocuments(u,d))})}(n.localStore,e);oee(n,e,r),iee(n,e),n.sharedClientState.updateMutationState(e,"rejected",r),await Bw(n,a)}catch(a){await Ig(a)}}function iee(t,e){(t.ka.get(e)||[]).forEach(r=>{r.resolve()}),t.ka.delete(e)}function oee(t,e,r){const n=Ln(t);let a=n.Ba[n.currentUser.toKey()];if(a){const s=a.get(e);s&&(r?s.reject(r):s.resolve(),a=a.remove(e)),n.Ba[n.currentUser.toKey()]=a}}function ik(t,e,r=null){t.sharedClientState.removeLocalQueryTarget(e);for(const n of t.Ma.get(e))t.Fa.delete(n),r&&t.Ca.$a(n,r);t.Ma.delete(e),t.isPrimaryClient&&t.La.gr(e).forEach(n=>{t.La.containsKey(n)||lee(t,n)})}function lee(t,e){t.xa.delete(e.path.canonicalString());const r=t.Oa.get(e);r!==null&&(l6(t.remoteStore,r),t.Oa=t.Oa.remove(e),t.Na.delete(r),x6(t))}function A9(t,e,r){for(const n of r)n instanceof ree?(t.La.addReference(n.key,e),_ye(t,n)):n instanceof nee?(Pr("SyncEngine","Document no longer in limbo: "+n.key),t.La.removeReference(n.key,e),t.La.containsKey(n.key)||lee(t,n.key)):cn()}function _ye(t,e){const r=e.key,n=r.path.canonicalString();t.Oa.get(r)||t.xa.has(n)||(Pr("SyncEngine","New document in limbo: "+r),t.xa.add(n),x6(t))}function x6(t){for(;t.xa.size>0&&t.Oa.size<t.maxConcurrentLimboResolutions;){const e=t.xa.values().next().value;t.xa.delete(e);const r=new Wr(Pa.fromString(e)),n=t.qa.next();t.Na.set(n,new Aye(r)),t.Oa=t.Oa.insert(r,n),XZ(t.remoteStore,new zh(Id(Ew(r.path)),n,"TargetPurposeLimboResolution",wd.oe))}}async function Bw(t,e,r){const n=Ln(t),a=[],s=[],o=[];n.Fa.isEmpty()||(n.Fa.forEach((l,c)=>{o.push(n.Ka(c,e,r).then(u=>{var d;if((u||r)&&n.isPrimaryClient){const f=u?!u.fromCache:(d=r==null?void 0:r.targetChanges.get(c.targetId))===null||d===void 0?void 0:d.current;n.sharedClientState.updateQueryState(c.targetId,f?"current":"not-current")}if(u){a.push(u);const f=i6.Wi(c.targetId,u);s.push(f)}}))}),await Promise.all(o),n.Ca.d_(a),await async function(c,u){const d=Ln(c);try{await d.persistence.runTransaction("notifyLocalViewChanges","readwrite",f=>Ht.forEach(u,A=>Ht.forEach(A.$i,h=>d.persistence.referenceDelegate.addReference(f,A.targetId,h)).next(()=>Ht.forEach(A.Ui,h=>d.persistence.referenceDelegate.removeReference(f,A.targetId,h)))))}catch(f){if(!Rm(f))throw f;Pr("LocalStore","Failed to update sequence numbers: "+f)}for(const f of u){const A=f.targetId;if(!f.fromCache){const h=d.os.get(A),m=h.snapshotVersion,p=h.withLastLimboFreeSnapshotVersion(m);d.os=d.os.insert(A,p)}}}(n.localStore,s))}async function Eye(t,e){const r=Ln(t);if(!r.currentUser.isEqual(e)){Pr("SyncEngine","User change. New user:",e.toKey());const n=await KZ(r.localStore,e);r.currentUser=e,function(s,o){s.ka.forEach(l=>{l.forEach(c=>{c.reject(new Lr(ir.CANCELLED,o))})}),s.ka.clear()}(r,"'waitForPendingWrites' promise is rejected due to a user change."),r.sharedClientState.handleUserChange(e,n.removedBatchIds,n.addedBatchIds),await Bw(r,n.hs)}}function Sye(t,e){const r=Ln(t),n=r.Na.get(e);if(n&&n.va)return ta().add(n.key);{let a=ta();const s=r.Ma.get(e);if(!s)return a;for(const o of s){const l=r.Fa.get(o);a=a.unionWith(l.view.Va)}return a}}function cee(t){const e=Ln(t);return e.remoteStore.remoteSyncer.applyRemoteEvent=see.bind(null,e),e.remoteStore.remoteSyncer.getRemoteKeysForTarget=Sye.bind(null,e),e.remoteStore.remoteSyncer.rejectListen=wye.bind(null,e),e.Ca.d_=uye.bind(null,e.eventManager),e.Ca.$a=dye.bind(null,e.eventManager),e}function uee(t){const e=Ln(t);return e.remoteStore.remoteSyncer.applySuccessfulWrite=Nye.bind(null,e),e.remoteStore.remoteSyncer.rejectFailedWrite=Cye.bind(null,e),e}class w2{constructor(){this.kind="memory",this.synchronizeTabs=!1}async initialize(e){this.serializer=Pj(e.databaseInfo.databaseId),this.sharedClientState=this.Wa(e),this.persistence=this.Ga(e),await this.persistence.start(),this.localStore=this.za(e),this.gcScheduler=this.ja(e,this.localStore),this.indexBackfillerScheduler=this.Ha(e,this.localStore)}ja(e,r){return null}Ha(e,r){return null}za(e){return GZ(this.persistence,new $Z,e.initialUser,this.serializer)}Ga(e){return new HZ(jj.Zr,this.serializer)}Wa(e){return new zZ}async terminate(){var e,r;(e=this.gcScheduler)===null||e===void 0||e.stop(),(r=this.indexBackfillerScheduler)===null||r===void 0||r.stop(),this.sharedClientState.shutdown(),await this.persistence.shutdown()}}w2.provider={build:()=>new w2};class Iye extends w2{constructor(e,r,n){super(),this.Ja=e,this.cacheSizeBytes=r,this.forceOwnership=n,this.kind="persistent",this.synchronizeTabs=!1}async initialize(e){await super.initialize(e),await this.Ja.initialize(this,e),await uee(this.Ja.syncEngine),await Pw(this.Ja.remoteStore),await this.persistence.yi(()=>(this.gcScheduler&&!this.gcScheduler.started&&this.gcScheduler.start(),this.indexBackfillerScheduler&&!this.indexBackfillerScheduler.started&&this.indexBackfillerScheduler.start(),Promise.resolve()))}za(e){return GZ(this.persistence,new $Z,e.initialUser,this.serializer)}ja(e,r){const n=this.persistence.referenceDelegate.garbageCollector;return new p1e(n,e.asyncQueue,r)}Ha(e,r){const n=new Gxe(r,this.persistence);return new $xe(e.asyncQueue,n)}Ga(e){const r=T1e(e.databaseInfo.databaseId,e.databaseInfo.persistenceKey),n=this.cacheSizeBytes!==void 0?Wc.withCacheSize(this.cacheSizeBytes):Wc.DEFAULT;return new s6(this.synchronizeTabs,r,e.clientId,n,e.asyncQueue,G1e(),uE(),this.serializer,this.sharedClientState,!!this.forceOwnership)}Wa(e){return new zZ}}class hS{async initialize(e,r){this.localStore||(this.localStore=e.localStore,this.sharedClientState=e.sharedClientState,this.datastore=this.createDatastore(r),this.remoteStore=this.createRemoteStore(r),this.eventManager=this.createEventManager(r),this.syncEngine=this.createSyncEngine(r,!e.synchronizeTabs),this.sharedClientState.onlineStateHandler=n=>h9(this.syncEngine,n,1),this.remoteStore.remoteSyncer.handleCredentialChange=Eye.bind(null,this.syncEngine),await oye(this.remoteStore,this.syncEngine.isPrimaryClient))}createEventManager(e){return function(){return new cye}()}createDatastore(e){const r=Pj(e.databaseInfo.databaseId),n=function(s){return new $1e(s)}(e.databaseInfo);return function(s,o,l,c){return new z1e(s,o,l,c)}(e.authCredentials,e.appCheckCredentials,n,r)}createRemoteStore(e){return function(n,a,s,o,l){return new X1e(n,a,s,o,l)}(this.localStore,this.datastore,e.asyncQueue,r=>h9(this.syncEngine,r,0),function(){return l9.D()?new l9:new Q1e}())}createSyncEngine(e,r){return function(a,s,o,l,c,u,d){const f=new mye(a,s,o,l,c,u);return d&&(f.Qa=!0),f}(this.localStore,this.remoteStore,this.eventManager,this.sharedClientState,e.initialUser,e.maxConcurrentLimboResolutions,r)}async terminate(){var e,r;await async function(a){const s=Ln(a);Pr("RemoteStore","RemoteStore shutting down."),s.L_.add(5),await jw(s),s.k_.shutdown(),s.q_.set("Unknown")}(this.remoteStore),(e=this.datastore)===null||e===void 0||e.terminate(),(r=this.eventManager)===null||r===void 0||r.terminate()}}hS.provider={build:()=>new hS};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class v6{constructor(e){this.observer=e,this.muted=!1}next(e){this.muted||this.observer.next&&this.Ya(this.observer.next,e)}error(e){this.muted||(this.observer.error?this.Ya(this.observer.error,e):Cc("Uncaught Error in snapshot listener:",e.toString()))}Za(){this.muted=!0}Ya(e,r){setTimeout(()=>{this.muted||e(r)},0)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class jye{constructor(e){this.datastore=e,this.readVersions=new Map,this.mutations=[],this.committed=!1,this.lastTransactionError=null,this.writtenDocs=new Set}async lookup(e){if(this.ensureCommitNotCalled(),this.mutations.length>0)throw this.lastTransactionError=new Lr(ir.INVALID_ARGUMENT,"Firestore transactions require all reads to be executed before all writes."),this.lastTransactionError;const r=await async function(a,s){const o=Ln(a),l={documents:s.map(f=>y2(o.serializer,f))},c=await o.Lo("BatchGetDocuments",o.serializer.databaseId,Pa.emptyPath(),l,s.length),u=new Map;c.forEach(f=>{const A=Xve(o.serializer,f);u.set(A.key.toString(),A)});const d=[];return s.forEach(f=>{const A=u.get(f.toString());mn(!!A),d.push(A)}),d}(this.datastore,e);return r.forEach(n=>this.recordVersion(n)),r}set(e,r){this.write(r.toMutation(e,this.precondition(e))),this.writtenDocs.add(e.toString())}update(e,r){try{this.write(r.toMutation(e,this.preconditionForUpdate(e)))}catch(n){this.lastTransactionError=n}this.writtenDocs.add(e.toString())}delete(e){this.write(new u1(e,this.precondition(e))),this.writtenDocs.add(e.toString())}async commit(){if(this.ensureCommitNotCalled(),this.lastTransactionError)throw this.lastTransactionError;const e=this.readVersions;this.mutations.forEach(r=>{e.delete(r.key.toString())}),e.forEach((r,n)=>{const a=Wr.fromPath(n);this.mutations.push(new XD(a,this.precondition(a)))}),await async function(n,a){const s=Ln(n),o={writes:a.map(l=>b2(s.serializer,l))};await s.Mo("Commit",s.serializer.databaseId,Pa.emptyPath(),o)}(this.datastore,this.mutations),this.committed=!0}recordVersion(e){let r;if(e.isFoundDocument())r=e.version;else{if(!e.isNoDocument())throw cn();r=wn.min()}const n=this.readVersions.get(e.key.toString());if(n){if(!r.isEqual(n))throw new Lr(ir.ABORTED,"Document version changed between two reads.")}else this.readVersions.set(e.key.toString(),r)}precondition(e){const r=this.readVersions.get(e.toString());return!this.writtenDocs.has(e.toString())&&r?r.isEqual(wn.min())?$s.exists(!1):$s.updateTime(r):$s.none()}preconditionForUpdate(e){const r=this.readVersions.get(e.toString());if(!this.writtenDocs.has(e.toString())&&r){if(r.isEqual(wn.min()))throw new Lr(ir.INVALID_ARGUMENT,"Can't update a document that doesn't exist.");return $s.updateTime(r)}return $s.exists(!0)}write(e){this.ensureCommitNotCalled(),this.mutations.push(e)}ensureCommitNotCalled(){}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Pye{constructor(e,r,n,a,s){this.asyncQueue=e,this.datastore=r,this.options=n,this.updateFunction=a,this.deferred=s,this._u=n.maxAttempts,this.t_=new o6(this.asyncQueue,"transaction_retry")}au(){this._u-=1,this.uu()}uu(){this.t_.Go(async()=>{const e=new jye(this.datastore),r=this.cu(e);r&&r.then(n=>{this.asyncQueue.enqueueAndForget(()=>e.commit().then(()=>{this.deferred.resolve(n)}).catch(a=>{this.lu(a)}))}).catch(n=>{this.lu(n)})})}cu(e){try{const r=this.updateFunction(e);return!Cw(r)&&r.catch&&r.then?r:(this.deferred.reject(Error("Transaction callback must return a Promise")),null)}catch(r){return this.deferred.reject(r),null}}lu(e){this._u>0&&this.hu(e)?(this._u-=1,this.asyncQueue.enqueueAndForget(()=>(this.uu(),Promise.resolve()))):this.deferred.reject(e)}hu(e){if(e.name==="FirebaseError"){const r=e.code;return r==="aborted"||r==="failed-precondition"||r==="already-exists"||!gZ(r)}return!1}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Bye{constructor(e,r,n,a,s){this.authCredentials=e,this.appCheckCredentials=r,this.asyncQueue=n,this.databaseInfo=a,this.user=wl.UNAUTHENTICATED,this.clientId=VD.newId(),this.authCredentialListener=()=>Promise.resolve(),this.appCheckCredentialListener=()=>Promise.resolve(),this._uninitializedComponentsProvider=s,this.authCredentials.start(n,async o=>{Pr("FirestoreClient","Received user=",o.uid),await this.authCredentialListener(o),this.user=o}),this.appCheckCredentials.start(n,o=>(Pr("FirestoreClient","Received new app check token=",o),this.appCheckCredentialListener(o,this.user)))}get configuration(){return{asyncQueue:this.asyncQueue,databaseInfo:this.databaseInfo,clientId:this.clientId,authCredentials:this.authCredentials,appCheckCredentials:this.appCheckCredentials,initialUser:this.user,maxConcurrentLimboResolutions:100}}setCredentialChangeListener(e){this.authCredentialListener=e}setAppCheckTokenChangeListener(e){this.appCheckCredentialListener=e}terminate(){this.asyncQueue.enterRestrictedMode();const e=new pf;return this.asyncQueue.enqueueAndForgetEvenWhileRestricted(async()=>{try{this._onlineComponents&&await this._onlineComponents.terminate(),this._offlineComponents&&await this._offlineComponents.terminate(),this.authCredentials.shutdown(),this.appCheckCredentials.shutdown(),e.resolve()}catch(r){const n=h6(r,"Failed to shutdown persistence");e.reject(n)}}),e.promise}}async function I3(t,e){t.asyncQueue.verifyOperationInProgress(),Pr("FirestoreClient","Initializing OfflineComponentProvider");const r=t.configuration;await e.initialize(r);let n=r.initialUser;t.setCredentialChangeListener(async a=>{n.isEqual(a)||(await KZ(e.localStore,a),n=a)}),e.persistence.setDatabaseDeletedListener(()=>t.terminate()),t._offlineComponents=e}async function m9(t,e){t.asyncQueue.verifyOperationInProgress();const r=await Tye(t);Pr("FirestoreClient","Initializing OnlineComponentProvider"),await e.initialize(r,t.configuration),t.setCredentialChangeListener(n=>c9(e.remoteStore,n)),t.setAppCheckTokenChangeListener((n,a)=>c9(e.remoteStore,a)),t._onlineComponents=e}async function Tye(t){if(!t._offlineComponents)if(t._uninitializedComponentsProvider){Pr("FirestoreClient","Using user provided OfflineComponentProvider");try{await I3(t,t._uninitializedComponentsProvider._offline)}catch(e){const r=e;if(!function(a){return a.name==="FirebaseError"?a.code===ir.FAILED_PRECONDITION||a.code===ir.UNIMPLEMENTED:!(typeof DOMException<"u"&&a instanceof DOMException)||a.code===22||a.code===20||a.code===11}(r))throw r;gm("Error using user provided cache. Falling back to memory cache: "+r),await I3(t,new w2)}}else Pr("FirestoreClient","Using default OfflineComponentProvider"),await I3(t,new w2);return t._offlineComponents}async function y6(t){return t._onlineComponents||(t._uninitializedComponentsProvider?(Pr("FirestoreClient","Using user provided OnlineComponentProvider"),await m9(t,t._uninitializedComponentsProvider._online)):(Pr("FirestoreClient","Using default OnlineComponentProvider"),await m9(t,new hS))),t._onlineComponents}function kye(t){return y6(t).then(e=>e.syncEngine)}function Fye(t){return y6(t).then(e=>e.datastore)}async function AS(t){const e=await y6(t),r=e.eventManager;return r.onListen=pye.bind(null,e.syncEngine),r.onUnlisten=vye.bind(null,e.syncEngine),r.onFirstRemoteStoreListen=gye.bind(null,e.syncEngine),r.onLastRemoteStoreUnlisten=yye.bind(null,e.syncEngine),r}function Oye(t,e,r={}){const n=new pf;return t.asyncQueue.enqueueAndForget(async()=>function(s,o,l,c,u){const d=new v6({next:A=>{d.Za(),o.enqueueAndForget(()=>m6(s,f));const h=A.docs.has(l);!h&&A.fromCache?u.reject(new Lr(ir.UNAVAILABLE,"Failed to get document because the client is offline.")):h&&A.fromCache&&c&&c.source==="server"?u.reject(new Lr(ir.UNAVAILABLE,'Failed to get document from server. (However, this document does exist in the local cache. Run again without setting source to "server" to retrieve the cached document.)')):u.resolve(A)},error:A=>u.reject(A)}),f=new g6(Ew(l.path),d,{includeMetadataChanges:!0,_a:!0});return A6(s,f)}(await AS(t),t.asyncQueue,e,r,n)),n.promise}function Dye(t,e,r={}){const n=new pf;return t.asyncQueue.enqueueAndForget(async()=>function(s,o,l,c,u){const d=new v6({next:A=>{d.Za(),o.enqueueAndForget(()=>m6(s,f)),A.fromCache&&c.source==="server"?u.reject(new Lr(ir.UNAVAILABLE,'Failed to get documents from server. (However, these documents may exist in the local cache. Run again without setting source to "server" to retrieve the cached documents.)')):u.resolve(A)},error:A=>u.reject(A)}),f=new g6(l,d,{includeMetadataChanges:!0,_a:!0});return A6(s,f)}(await AS(t),t.asyncQueue,e,r,n)),n.promise}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function dee(t){const e={};return t.timeoutSeconds!==void 0&&(e.timeoutSeconds=t.timeoutSeconds),e}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const p9=new Map;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function fee(t,e,r){if(!r)throw new Lr(ir.INVALID_ARGUMENT,`Function ${t}() cannot be called with an empty ${e}.`)}function hee(t,e,r,n){if(e===!0&&n===!0)throw new Lr(ir.INVALID_ARGUMENT,`${t} and ${r} cannot be used together.`)}function g9(t){if(!Wr.isDocumentKey(t))throw new Lr(ir.INVALID_ARGUMENT,`Invalid document reference. Document references must have an even number of segments, but ${t} has ${t.length}.`)}function x9(t){if(Wr.isDocumentKey(t))throw new Lr(ir.INVALID_ARGUMENT,`Invalid collection reference. Collection references must have an odd number of segments, but ${t} has ${t.length}.`)}function Tj(t){if(t===void 0)return"undefined";if(t===null)return"null";if(typeof t=="string")return t.length>20&&(t=`${t.substring(0,20)}...`),JSON.stringify(t);if(typeof t=="number"||typeof t=="boolean")return""+t;if(typeof t=="object"){if(t instanceof Array)return"an array";{const e=function(n){return n.constructor?n.constructor.name:null}(t);return e?`a custom ${e} object`:"an object"}}return typeof t=="function"?"a function":cn()}function tl(t,e){if("_delegate"in t&&(t=t._delegate),!(t instanceof e)){if(e.name===t.constructor.name)throw new Lr(ir.INVALID_ARGUMENT,"Type does not match the expected instance. Did you pass a reference from a different Firestore SDK?");{const r=Tj(t);throw new Lr(ir.INVALID_ARGUMENT,`Expected type '${e.name}', but it was: ${r}`)}}return t}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class v9{constructor(e){var r,n;if(e.host===void 0){if(e.ssl!==void 0)throw new Lr(ir.INVALID_ARGUMENT,"Can't provide ssl option if host option is not set");this.host="firestore.googleapis.com",this.ssl=!0}else this.host=e.host,this.ssl=(r=e.ssl)===null||r===void 0||r;if(this.credentials=e.credentials,this.ignoreUndefinedProperties=!!e.ignoreUndefinedProperties,this.localCache=e.localCache,e.cacheSizeBytes===void 0)this.cacheSizeBytes=41943040;else{if(e.cacheSizeBytes!==-1&&e.cacheSizeBytes<1048576)throw new Lr(ir.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");this.cacheSizeBytes=e.cacheSizeBytes}hee("experimentalForceLongPolling",e.experimentalForceLongPolling,"experimentalAutoDetectLongPolling",e.experimentalAutoDetectLongPolling),this.experimentalForceLongPolling=!!e.experimentalForceLongPolling,this.experimentalForceLongPolling?this.experimentalAutoDetectLongPolling=!1:e.experimentalAutoDetectLongPolling===void 0?this.experimentalAutoDetectLongPolling=!0:this.experimentalAutoDetectLongPolling=!!e.experimentalAutoDetectLongPolling,this.experimentalLongPollingOptions=dee((n=e.experimentalLongPollingOptions)!==null&&n!==void 0?n:{}),function(s){if(s.timeoutSeconds!==void 0){if(isNaN(s.timeoutSeconds))throw new Lr(ir.INVALID_ARGUMENT,`invalid long polling timeout: ${s.timeoutSeconds} (must not be NaN)`);if(s.timeoutSeconds<5)throw new Lr(ir.INVALID_ARGUMENT,`invalid long polling timeout: ${s.timeoutSeconds} (minimum allowed value is 5)`);if(s.timeoutSeconds>30)throw new Lr(ir.INVALID_ARGUMENT,`invalid long polling timeout: ${s.timeoutSeconds} (maximum allowed value is 30)`)}}(this.experimentalLongPollingOptions),this.useFetchStreams=!!e.useFetchStreams}isEqual(e){return this.host===e.host&&this.ssl===e.ssl&&this.credentials===e.credentials&&this.cacheSizeBytes===e.cacheSizeBytes&&this.experimentalForceLongPolling===e.experimentalForceLongPolling&&this.experimentalAutoDetectLongPolling===e.experimentalAutoDetectLongPolling&&function(n,a){return n.timeoutSeconds===a.timeoutSeconds}(this.experimentalLongPollingOptions,e.experimentalLongPollingOptions)&&this.ignoreUndefinedProperties===e.ignoreUndefinedProperties&&this.useFetchStreams===e.useFetchStreams}}class kj{constructor(e,r,n,a){this._authCredentials=e,this._appCheckCredentials=r,this._databaseId=n,this._app=a,this.type="firestore-lite",this._persistenceKey="(lite)",this._settings=new v9({}),this._settingsFrozen=!1,this._terminateTask="notTerminated"}get app(){if(!this._app)throw new Lr(ir.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._app}get _initialized(){return this._settingsFrozen}get _terminated(){return this._terminateTask!=="notTerminated"}_setSettings(e){if(this._settingsFrozen)throw new Lr(ir.FAILED_PRECONDITION,"Firestore has already been started and its settings can no longer be changed. You can only modify settings before calling any other methods on a Firestore object.");this._settings=new v9(e),e.credentials!==void 0&&(this._authCredentials=function(n){if(!n)return new OJ;switch(n.type){case"firstParty":return new Dxe(n.sessionIndex||"0",n.iamToken||null,n.authTokenFactory||null);case"provider":return n.client;default:throw new Lr(ir.INVALID_ARGUMENT,"makeAuthCredentialsProvider failed due to invalid credential type")}}(e.credentials))}_getSettings(){return this._settings}_freezeSettings(){return this._settingsFrozen=!0,this._settings}_delete(){return this._terminateTask==="notTerminated"&&(this._terminateTask=this._terminate()),this._terminateTask}async _restart(){this._terminateTask==="notTerminated"?await this._terminate():this._terminateTask="notTerminated"}toJSON(){return{app:this._app,databaseId:this._databaseId,settings:this._settings}}_terminate(){return function(r){const n=p9.get(r);n&&(Pr("ComponentProvider","Removing Datastore"),p9.delete(r),n.terminate())}(this),Promise.resolve()}}function Aee(t,e,r,n={}){var a;const s=(t=tl(t,kj))._getSettings(),o=`${e}:${r}`;if(s.host!=="firestore.googleapis.com"&&s.host!==o&&gm("Host has been set in both settings() and connectFirestoreEmulator(), emulator host will be used."),t._setSettings(Object.assign(Object.assign({},s),{host:o,ssl:!1})),n.mockUserToken){let l,c;if(typeof n.mockUserToken=="string")l=n.mockUserToken,c=wl.MOCK_USER;else{l=J0e(n.mockUserToken,(a=t._app)===null||a===void 0?void 0:a.options.projectId);const u=n.mockUserToken.sub||n.mockUserToken.user_id;if(!u)throw new Lr(ir.INVALID_ARGUMENT,"mockUserToken must contain 'sub' or 'user_id' field!");c=new wl(u)}t._authCredentials=new kxe(new FJ(l,c))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class fh{constructor(e,r,n){this.converter=r,this._query=n,this.type="query",this.firestore=e}withConverter(e){return new fh(this.firestore,e,this._query)}}class rl{constructor(e,r,n){this.converter=r,this._key=n,this.type="document",this.firestore=e}get _path(){return this._key.path}get id(){return this._key.path.lastSegment()}get path(){return this._key.path.canonicalString()}get parent(){return new nA(this.firestore,this.converter,this._key.path.popLast())}withConverter(e){return new rl(this.firestore,e,this._key)}}class nA extends fh{constructor(e,r,n){super(e,r,Ew(n)),this._path=n,this.type="collection"}get id(){return this._query.path.lastSegment()}get path(){return this._query.path.canonicalString()}get parent(){const e=this._path.popLast();return e.isEmpty()?null:new rl(this.firestore,null,new Wr(e))}withConverter(e){return new nA(this.firestore,e,this._path)}}function mt(t,e,...r){if(t=di(t),fee("collection","path",e),t instanceof kj){const n=Pa.fromString(e,...r);return x9(n),new nA(t,null,n)}{if(!(t instanceof rl||t instanceof nA))throw new Lr(ir.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const n=t._path.child(Pa.fromString(e,...r));return x9(n),new nA(t.firestore,null,n)}}function Gt(t,e,...r){if(t=di(t),arguments.length===1&&(e=VD.newId()),fee("doc","path",e),t instanceof kj){const n=Pa.fromString(e,...r);return g9(n),new rl(t,null,new Wr(n))}{if(!(t instanceof rl||t instanceof nA))throw new Lr(ir.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const n=t._path.child(Pa.fromString(e,...r));return g9(n),new rl(t.firestore,t instanceof nA?t.converter:null,new Wr(n))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class y9{constructor(e=Promise.resolve()){this.Pu=[],this.Iu=!1,this.Tu=[],this.Eu=null,this.du=!1,this.Au=!1,this.Ru=[],this.t_=new o6(this,"async_queue_retry"),this.Vu=()=>{const n=uE();n&&Pr("AsyncQueue","Visibility state changed to "+n.visibilityState),this.t_.jo()},this.mu=e;const r=uE();r&&typeof r.addEventListener=="function"&&r.addEventListener("visibilitychange",this.Vu)}get isShuttingDown(){return this.Iu}enqueueAndForget(e){this.enqueue(e)}enqueueAndForgetEvenWhileRestricted(e){this.fu(),this.gu(e)}enterRestrictedMode(e){if(!this.Iu){this.Iu=!0,this.Au=e||!1;const r=uE();r&&typeof r.removeEventListener=="function"&&r.removeEventListener("visibilitychange",this.Vu)}}enqueue(e){if(this.fu(),this.Iu)return new Promise(()=>{});const r=new pf;return this.gu(()=>this.Iu&&this.Au?Promise.resolve():(e().then(r.resolve,r.reject),r.promise)).then(()=>r.promise)}enqueueRetryable(e){this.enqueueAndForget(()=>(this.Pu.push(e),this.pu()))}async pu(){if(this.Pu.length!==0){try{await this.Pu[0](),this.Pu.shift(),this.t_.reset()}catch(e){if(!Rm(e))throw e;Pr("AsyncQueue","Operation failed with retryable error: "+e)}this.Pu.length>0&&this.t_.Go(()=>this.pu())}}gu(e){const r=this.mu.then(()=>(this.du=!0,e().catch(n=>{this.Eu=n,this.du=!1;const a=function(o){let l=o.message||"";return o.stack&&(l=o.stack.includes(o.message)?o.stack:o.message+`
`+o.stack),l}(n);throw Cc("INTERNAL UNHANDLED ERROR: ",a),n}).then(n=>(this.du=!1,n))));return this.mu=r,r}enqueueAfterDelay(e,r,n){this.fu(),this.Ru.indexOf(e)>-1&&(r=0);const a=f6.createAndSchedule(this,e,r,n,s=>this.yu(s));return this.Tu.push(a),a}fu(){this.Eu&&cn()}verifyOperationInProgress(){}async wu(){let e;do e=this.mu,await e;while(e!==this.mu)}Su(e){for(const r of this.Tu)if(r.timerId===e)return!0;return!1}bu(e){return this.wu().then(()=>{this.Tu.sort((r,n)=>r.targetTimeMs-n.targetTimeMs);for(const r of this.Tu)if(r.skipDelay(),e!=="all"&&r.timerId===e)break;return this.wu()})}Du(e){this.Ru.push(e)}yu(e){const r=this.Tu.indexOf(e);this.Tu.splice(r,1)}}function b9(t){return function(r,n){if(typeof r!="object"||r===null)return!1;const a=r;for(const s of n)if(s in a&&typeof a[s]=="function")return!0;return!1}(t,["next","error","complete"])}class Vu extends kj{constructor(e,r,n,a){super(e,r,n,a),this.type="firestore",this._queue=new y9,this._persistenceKey=(a==null?void 0:a.name)||"[DEFAULT]"}async _terminate(){if(this._firestoreClient){const e=this._firestoreClient.terminate();this._queue=new y9(e),this._firestoreClient=void 0,await e}}}function mee(t,e){const r=typeof t=="object"?t:ID(),n=typeof t=="string"?t:"(default)",a=ED(r,"firestore").getImmediate({identifier:n});if(!a._initialized){const s=X0e("firestore");s&&Aee(a,...s)}return a}function Bg(t){if(t._terminated)throw new Lr(ir.FAILED_PRECONDITION,"The client has already been terminated.");return t._firestoreClient||pee(t),t._firestoreClient}function pee(t){var e,r,n;const a=t._freezeSettings(),s=function(l,c,u,d){return new hve(l,c,u,d.host,d.ssl,d.experimentalForceLongPolling,d.experimentalAutoDetectLongPolling,dee(d.experimentalLongPollingOptions),d.useFetchStreams)}(t._databaseId,((e=t._app)===null||e===void 0?void 0:e.options.appId)||"",t._persistenceKey,a);t._componentsProvider||!((r=a.localCache)===null||r===void 0)&&r._offlineComponentProvider&&(!((n=a.localCache)===null||n===void 0)&&n._onlineComponentProvider)&&(t._componentsProvider={_offline:a.localCache._offlineComponentProvider,_online:a.localCache._onlineComponentProvider}),t._firestoreClient=new Bye(t._authCredentials,t._appCheckCredentials,t._queue,s,t._componentsProvider&&function(l){const c=l==null?void 0:l._online.build();return{_offline:l==null?void 0:l._offline.build(c),_online:c}}(t._componentsProvider))}function gee(t,e){gm("enableIndexedDbPersistence() will be deprecated in the future, you can use `FirestoreSettings.cache` instead.");const r=t._freezeSettings();return Rye(t,hS.provider,{build:n=>new Iye(n,r.cacheSizeBytes,void 0)}),Promise.resolve()}function Rye(t,e,r){if((t=tl(t,Vu))._firestoreClient||t._terminated)throw new Lr(ir.FAILED_PRECONDITION,"Firestore has already been started and persistence can no longer be enabled. You can only enable persistence before calling any other methods on a Firestore object.");if(t._componentsProvider||t._getSettings().localCache)throw new Lr(ir.FAILED_PRECONDITION,"SDK cache is already specified.");t._componentsProvider={_online:e,_offline:r},pee(t)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class wm{constructor(e){this._byteString=e}static fromBase64String(e){try{return new wm(qi.fromBase64String(e))}catch(r){throw new Lr(ir.INVALID_ARGUMENT,"Failed to construct data from Base64 string: "+r)}}static fromUint8Array(e){return new wm(qi.fromUint8Array(e))}toBase64(){return this._byteString.toBase64()}toUint8Array(){return this._byteString.toUint8Array()}toString(){return"Bytes(base64: "+this.toBase64()+")"}isEqual(e){return this._byteString.isEqual(e._byteString)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Tg{constructor(...e){for(let r=0;r<e.length;++r)if(e[r].length===0)throw new Lr(ir.INVALID_ARGUMENT,"Invalid field name at argument $(i + 1). Field names must not be empty.");this._internalPath=new Hs(e)}isEqual(e){return this._internalPath.isEqual(e._internalPath)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Tw{constructor(e){this._methodName=e}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Fj{constructor(e,r){if(!isFinite(e)||e<-90||e>90)throw new Lr(ir.INVALID_ARGUMENT,"Latitude must be a number between -90 and 90, but was: "+e);if(!isFinite(r)||r<-180||r>180)throw new Lr(ir.INVALID_ARGUMENT,"Longitude must be a number between -180 and 180, but was: "+r);this._lat=e,this._long=r}get latitude(){return this._lat}get longitude(){return this._long}isEqual(e){return this._lat===e._lat&&this._long===e._long}toJSON(){return{latitude:this._lat,longitude:this._long}}_compareTo(e){return Gn(this._lat,e._lat)||Gn(this._long,e._long)}}/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Oj{constructor(e){this._values=(e||[]).map(r=>r)}toArray(){return this._values.map(e=>e)}isEqual(e){return function(n,a){if(n.length!==a.length)return!1;for(let s=0;s<n.length;++s)if(n[s]!==a[s])return!1;return!0}(this._values,e._values)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Mye=/^__.*__$/;class Lye{constructor(e,r,n){this.data=e,this.fieldMask=r,this.fieldTransforms=n}toMutation(e,r){return this.fieldMask!==null?new FA(e,this.data,this.fieldMask,r,this.fieldTransforms):new c1(e,this.data,r,this.fieldTransforms)}}class xee{constructor(e,r,n){this.data=e,this.fieldMask=r,this.fieldTransforms=n}toMutation(e,r){return new FA(e,this.data,this.fieldMask,r,this.fieldTransforms)}}function vee(t){switch(t){case 0:case 2:case 1:return!0;case 3:case 4:return!1;default:throw cn()}}class Dj{constructor(e,r,n,a,s,o){this.settings=e,this.databaseId=r,this.serializer=n,this.ignoreUndefinedProperties=a,s===void 0&&this.vu(),this.fieldTransforms=s||[],this.fieldMask=o||[]}get path(){return this.settings.path}get Cu(){return this.settings.Cu}Fu(e){return new Dj(Object.assign(Object.assign({},this.settings),e),this.databaseId,this.serializer,this.ignoreUndefinedProperties,this.fieldTransforms,this.fieldMask)}Mu(e){var r;const n=(r=this.path)===null||r===void 0?void 0:r.child(e),a=this.Fu({path:n,xu:!1});return a.Ou(e),a}Nu(e){var r;const n=(r=this.path)===null||r===void 0?void 0:r.child(e),a=this.Fu({path:n,xu:!1});return a.vu(),a}Lu(e){return this.Fu({path:void 0,xu:!0})}Bu(e){return mS(e,this.settings.methodName,this.settings.ku||!1,this.path,this.settings.qu)}contains(e){return this.fieldMask.find(r=>e.isPrefixOf(r))!==void 0||this.fieldTransforms.find(r=>e.isPrefixOf(r.field))!==void 0}vu(){if(this.path)for(let e=0;e<this.path.length;e++)this.Ou(this.path.get(e))}Ou(e){if(e.length===0)throw this.Bu("Document fields must not be empty");if(vee(this.Cu)&&Mye.test(e))throw this.Bu('Document fields cannot begin and end with "__"')}}class Uye{constructor(e,r,n){this.databaseId=e,this.ignoreUndefinedProperties=r,this.serializer=n||Pj(e)}Qu(e,r,n,a=!1){return new Dj({Cu:e,methodName:r,qu:n,path:Hs.emptyPath(),xu:!1,ku:a},this.databaseId,this.serializer,this.ignoreUndefinedProperties)}}function f1(t){const e=t._freezeSettings(),r=Pj(t._databaseId);return new Uye(t._databaseId,!!e.ignoreUndefinedProperties,r)}function Rj(t,e,r,n,a,s={}){const o=t.Qu(s.merge||s.mergeFields?2:0,e,r,a);C6("Data must be an object, but it was:",o,n);const l=yee(n,o);let c,u;if(s.merge)c=new eu(o.fieldMask),u=o.fieldTransforms;else if(s.mergeFields){const d=[];for(const f of s.mergeFields){const A=ok(e,f,r);if(!o.contains(A))throw new Lr(ir.INVALID_ARGUMENT,`Field '${A}' is specified in your field mask but missing from your input data.`);wee(d,A)||d.push(A)}c=new eu(d),u=o.fieldTransforms.filter(f=>c.covers(f.field))}else c=null,u=o.fieldTransforms;return new Lye(new _l(l),c,u)}class Mj extends Tw{_toFieldTransform(e){if(e.Cu!==2)throw e.Cu===1?e.Bu(`${this._methodName}() can only appear at the top level of your update data`):e.Bu(`${this._methodName}() cannot be used with set() unless you pass {merge:true}`);return e.fieldMask.push(e.path),null}isEqual(e){return e instanceof Mj}}function Qye(t,e,r){return new Dj({Cu:3,qu:e.settings.qu,methodName:t._methodName,xu:r},e.databaseId,e.serializer,e.ignoreUndefinedProperties)}class b6 extends Tw{constructor(e,r){super(e),this.Ku=r}_toFieldTransform(e){const r=Qye(this,e,!0),n=this.Ku.map(s=>h1(s,r)),a=new sg(n);return new AZ(e.path,a)}isEqual(e){return e instanceof b6&&i2(this.Ku,e.Ku)}}function w6(t,e,r,n){const a=t.Qu(1,e,r);C6("Data must be an object, but it was:",a,n);const s=[],o=_l.empty();jg(n,(c,u)=>{const d=_6(e,c,r);u=di(u);const f=a.Nu(d);if(u instanceof Mj)s.push(d);else{const A=h1(u,f);A!=null&&(s.push(d),o.set(d,A))}});const l=new eu(s);return new xee(o,l,a.fieldTransforms)}function N6(t,e,r,n,a,s){const o=t.Qu(1,e,r),l=[ok(e,n,r)],c=[a];if(s.length%2!=0)throw new Lr(ir.INVALID_ARGUMENT,`Function ${e}() needs to be called with an even number of arguments that alternate between field names and values.`);for(let A=0;A<s.length;A+=2)l.push(ok(e,s[A])),c.push(s[A+1]);const u=[],d=_l.empty();for(let A=l.length-1;A>=0;--A)if(!wee(u,l[A])){const h=l[A];let m=c[A];m=di(m);const p=o.Nu(h);if(m instanceof Mj)u.push(h);else{const x=h1(m,p);x!=null&&(u.push(h),d.set(h,x))}}const f=new eu(u);return new xee(d,f,o.fieldTransforms)}function Vye(t,e,r,n=!1){return h1(r,t.Qu(n?4:3,e))}function h1(t,e){if(bee(t=di(t)))return C6("Unsupported field value:",e,t),yee(t,e);if(t instanceof Tw)return function(n,a){if(!vee(a.Cu))throw a.Bu(`${n._methodName}() can only be used with update() and set()`);if(!a.path)throw a.Bu(`${n._methodName}() is not currently supported inside arrays`);const s=n._toFieldTransform(a);s&&a.fieldTransforms.push(s)}(t,e),null;if(t===void 0&&e.ignoreUndefinedProperties)return null;if(e.path&&e.fieldMask.push(e.path),t instanceof Array){if(e.settings.xu&&e.Cu!==4)throw e.Bu("Nested arrays are not supported");return function(n,a){const s=[];let o=0;for(const l of n){let c=h1(l,a.Lu(o));c==null&&(c={nullValue:"NULL_VALUE"}),s.push(c),o++}return{arrayValue:{values:s}}}(t,e)}return function(n,a){if((n=di(n))===null)return{nullValue:"NULL_VALUE"};if(typeof n=="number")return kve(a.serializer,n);if(typeof n=="boolean")return{booleanValue:n};if(typeof n=="string")return{stringValue:n};if(n instanceof Date){const s=Ar.fromDate(n);return{timestampValue:Ov(a.serializer,s)}}if(n instanceof Ar){const s=new Ar(n.seconds,1e3*Math.floor(n.nanoseconds/1e3));return{timestampValue:Ov(a.serializer,s)}}if(n instanceof Fj)return{geoPointValue:{latitude:n.latitude,longitude:n.longitude}};if(n instanceof wm)return{bytesValue:bZ(a.serializer,n._byteString)};if(n instanceof rl){const s=a.databaseId,o=n.firestore._databaseId;if(!o.isEqual(s))throw a.Bu(`Document reference is for database ${o.projectId}/${o.database} but should be for database ${s.projectId}/${s.database}`);return{referenceValue:t6(n.firestore._databaseId||a.databaseId,n._key.path)}}if(n instanceof Oj)return function(o,l){return{mapValue:{fields:{__type__:{stringValue:"__vector__"},value:{arrayValue:{values:o.toArray().map(c=>{if(typeof c!="number")throw l.Bu("VectorValues must only contain numeric values.");return WD(l.serializer,c)})}}}}}}(n,a);throw a.Bu(`Unsupported field value: ${Tj(n)}`)}(t,e)}function yee(t,e){const r={};return GJ(t)?e.path&&e.path.length>0&&e.fieldMask.push(e.path):jg(t,(n,a)=>{const s=h1(a,e.Mu(n));s!=null&&(r[n]=s)}),{mapValue:{fields:r}}}function bee(t){return!(typeof t!="object"||t===null||t instanceof Array||t instanceof Date||t instanceof Ar||t instanceof Fj||t instanceof wm||t instanceof rl||t instanceof Tw||t instanceof Oj)}function C6(t,e,r){if(!bee(r)||!function(a){return typeof a=="object"&&a!==null&&(Object.getPrototypeOf(a)===Object.prototype||Object.getPrototypeOf(a)===null)}(r)){const n=Tj(r);throw n==="an object"?e.Bu(t+" a custom object"):e.Bu(t+" "+n)}}function ok(t,e,r){if((e=di(e))instanceof Tg)return e._internalPath;if(typeof e=="string")return _6(t,e);throw mS("Field path arguments must be of type string or ",t,!1,void 0,r)}const Hye=new RegExp("[~\\*/\\[\\]]");function _6(t,e,r){if(e.search(Hye)>=0)throw mS(`Invalid field path (${e}). Paths must not contain '~', '*', '/', '[', or ']'`,t,!1,void 0,r);try{return new Tg(...e.split("."))._internalPath}catch{throw mS(`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`,t,!1,void 0,r)}}function mS(t,e,r,n,a){const s=n&&!n.isEmpty(),o=a!==void 0;let l=`Function ${e}() called with invalid data`;r&&(l+=" (via `toFirestore()`)"),l+=". ";let c="";return(s||o)&&(c+=" (found",s&&(c+=` in field ${n}`),o&&(c+=` in document ${a}`),c+=")"),new Lr(ir.INVALID_ARGUMENT,l+t+c)}function wee(t,e){return t.some(r=>r.isEqual(e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class pS{constructor(e,r,n,a,s){this._firestore=e,this._userDataWriter=r,this._key=n,this._document=a,this._converter=s}get id(){return this._key.path.lastSegment()}get ref(){return new rl(this._firestore,this._converter,this._key)}exists(){return this._document!==null}data(){if(this._document){if(this._converter){const e=new $ye(this._firestore,this._userDataWriter,this._key,this._document,null);return this._converter.fromFirestore(e)}return this._userDataWriter.convertValue(this._document.data.value)}}get(e){if(this._document){const r=this._document.data.field(Lj("DocumentSnapshot.get",e));if(r!==null)return this._userDataWriter.convertValue(r)}}}class $ye extends pS{data(){return super.data()}}function Lj(t,e){return typeof e=="string"?_6(t,e):e instanceof Tg?e._internalPath:e._delegate._internalPath}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Nee(t){if(t.limitType==="L"&&t.explicitOrderBy.length===0)throw new Lr(ir.UNIMPLEMENTED,"limitToLast() queries require specifying at least one orderBy() clause")}class E6{}class Uj extends E6{}function Yt(t,e,...r){let n=[];e instanceof E6&&n.push(e),n=n.concat(r),function(s){const o=s.filter(c=>c instanceof Qj).length,l=s.filter(c=>c instanceof kw).length;if(o>1||o>0&&l>0)throw new Lr(ir.INVALID_ARGUMENT,"InvalidQuery. When using composite filters, you cannot use more than one filter at the top level. Consider nesting the multiple filters within an `and(...)` statement. For example: change `query(query, where(...), or(...))` to `query(query, and(where(...), or(...)))`.")}(n);for(const a of n)t=a._apply(t);return t}class kw extends Uj{constructor(e,r,n){super(),this._field=e,this._op=r,this._value=n,this.type="where"}static _create(e,r,n){return new kw(e,r,n)}_apply(e){const r=this._parse(e);return Cee(e._query,r),new fh(e.firestore,e.converter,XT(e._query,r))}_parse(e){const r=f1(e.firestore);return function(s,o,l,c,u,d,f){let A;if(u.isKeyField()){if(d==="array-contains"||d==="array-contains-any")throw new Lr(ir.INVALID_ARGUMENT,`Invalid Query. You can't perform '${d}' queries on documentId().`);if(d==="in"||d==="not-in"){N9(f,d);const h=[];for(const m of f)h.push(w9(c,s,m));A={arrayValue:{values:h}}}else A=w9(c,s,f)}else d!=="in"&&d!=="not-in"&&d!=="array-contains-any"||N9(f,d),A=Vye(l,o,f,d==="in"||d==="not-in");return Aa.create(u,d,A)}(e._query,"where",r,e.firestore._databaseId,this._field,this._op,this._value)}}function cr(t,e,r){const n=e,a=Lj("where",t);return kw._create(a,n,r)}class Qj extends E6{constructor(e,r){super(),this.type=e,this._queryConstraints=r}static _create(e,r){return new Qj(e,r)}_parse(e){const r=this._queryConstraints.map(n=>n._parse(e)).filter(n=>n.getFilters().length>0);return r.length===1?r[0]:es.create(r,this._getOperator())}_apply(e){const r=this._parse(e);return r.getFilters().length===0?e:(function(a,s){let o=a;const l=s.getFlattenedFilters();for(const c of l)Cee(o,c),o=XT(o,c)}(e._query,r),new fh(e.firestore,e.converter,XT(e._query,r)))}_getQueryConstraints(){return this._queryConstraints}_getOperator(){return this.type==="and"?"and":"or"}}class Vj extends Uj{constructor(e,r){super(),this._field=e,this._direction=r,this.type="orderBy"}static _create(e,r){return new Vj(e,r)}_apply(e){const r=function(a,s,o){if(a.startAt!==null)throw new Lr(ir.INVALID_ARGUMENT,"Invalid query. You must not call startAt() or startAfter() before calling orderBy().");if(a.endAt!==null)throw new Lr(ir.INVALID_ARGUMENT,"Invalid query. You must not call endAt() or endBefore() before calling orderBy().");return new g2(s,o)}(e._query,this._field,this._direction);return new fh(e.firestore,e.converter,function(a,s){const o=a.explicitOrderBy.concat([s]);return new l1(a.path,a.collectionGroup,o,a.filters.slice(),a.limit,a.limitType,a.startAt,a.endAt)}(e._query,r))}}function In(t,e="asc"){const r=e,n=Lj("orderBy",t);return Vj._create(n,r)}class Hj extends Uj{constructor(e,r,n){super(),this.type=e,this._limit=r,this._limitType=n}static _create(e,r,n){return new Hj(e,r,n)}_apply(e){return new fh(e.firestore,e.converter,lS(e._query,this._limit,this._limitType))}}function gS(t){return Hj._create("limit",t,"F")}function w9(t,e,r){if(typeof(r=di(r))=="string"){if(r==="")throw new Lr(ir.INVALID_ARGUMENT,"Invalid query. When querying with documentId(), you must provide a valid document ID, but it was an empty string.");if(!nZ(e)&&r.indexOf("/")!==-1)throw new Lr(ir.INVALID_ARGUMENT,`Invalid query. When querying a collection by documentId(), you must provide a plain document ID, but '${r}' contains a '/' character.`);const n=e.path.child(Pa.fromString(r));if(!Wr.isDocumentKey(n))throw new Lr(ir.INVALID_ARGUMENT,`Invalid query. When querying a collection group by documentId(), the value provided must result in a valid document path, but '${n}' is not because it has an odd number of segments (${n.length}).`);return m2(t,new Wr(n))}if(r instanceof rl)return m2(t,r._key);throw new Lr(ir.INVALID_ARGUMENT,`Invalid query. When querying with documentId(), you must provide a valid string or a DocumentReference, but it was: ${Tj(r)}.`)}function N9(t,e){if(!Array.isArray(t)||t.length===0)throw new Lr(ir.INVALID_ARGUMENT,`Invalid Query. A non-empty array is required for '${e.toString()}' filters.`)}function Cee(t,e){const r=function(a,s){for(const o of a)for(const l of o.getFlattenedFilters())if(s.indexOf(l.op)>=0)return l.op;return null}(t.filters,function(a){switch(a){case"!=":return["!=","not-in"];case"array-contains-any":case"in":return["not-in"];case"not-in":return["array-contains-any","in","not-in","!="];default:return[]}}(e.op));if(r!==null)throw r===e.op?new Lr(ir.INVALID_ARGUMENT,`Invalid query. You cannot use more than one '${e.op.toString()}' filter.`):new Lr(ir.INVALID_ARGUMENT,`Invalid query. You cannot use '${e.op.toString()}' filters with '${r.toString()}' filters.`)}class S6{convertValue(e,r="none"){switch(ng(e)){case 0:return null;case 1:return e.booleanValue;case 2:return Us(e.integerValue||e.doubleValue);case 3:return this.convertTimestamp(e.timestampValue);case 4:return this.convertServerTimestamp(e,r);case 5:return e.stringValue;case 6:return this.convertBytes(xm(e.bytesValue));case 7:return this.convertReference(e.referenceValue);case 8:return this.convertGeoPoint(e.geoPointValue);case 9:return this.convertArray(e.arrayValue,r);case 11:return this.convertObject(e.mapValue,r);case 10:return this.convertVectorValue(e.mapValue);default:throw cn()}}convertObject(e,r){return this.convertObjectMap(e.fields,r)}convertObjectMap(e,r="none"){const n={};return jg(e,(a,s)=>{n[a]=this.convertValue(s,r)}),n}convertVectorValue(e){var r,n,a;const s=(a=(n=(r=e.fields)===null||r===void 0?void 0:r.value.arrayValue)===null||n===void 0?void 0:n.values)===null||a===void 0?void 0:a.map(o=>Us(o.doubleValue));return new Oj(s)}convertGeoPoint(e){return new Fj(Us(e.latitude),Us(e.longitude))}convertArray(e,r){return(e.values||[]).map(n=>this.convertValue(n,r))}convertServerTimestamp(e,r){switch(r){case"previous":const n=qD(e);return n==null?null:this.convertValue(n,r);case"estimate":return this.convertTimestamp(h2(e));default:return null}}convertTimestamp(e){const r=gA(e);return new Ar(r.seconds,r.nanos)}convertDocumentKey(e,r){const n=Pa.fromString(e);mn(BZ(n));const a=new vm(n.get(1),n.get(3)),s=new Wr(n.popFirst(5));return a.isEqual(r)||Cc(`Document ${s} contains a document reference within a different database (${a.projectId}/${a.database}) which is not supported. It will be treated as a reference in the current database (${r.projectId}/${r.database}) instead.`),s}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function $j(t,e,r){let n;return n=t?r&&(r.merge||r.mergeFields)?t.toFirestore(e,r):t.toFirestore(e):e,n}class Gye extends S6{constructor(e){super(),this.firestore=e}convertBytes(e){return new wm(e)}convertReference(e){const r=this.convertDocumentKey(e,this.firestore._databaseId);return new rl(this.firestore,null,r)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class wp{constructor(e,r){this.hasPendingWrites=e,this.fromCache=r}isEqual(e){return this.hasPendingWrites===e.hasPendingWrites&&this.fromCache===e.fromCache}}class Gj extends pS{constructor(e,r,n,a,s,o){super(e,r,n,a,o),this._firestore=e,this._firestoreImpl=e,this.metadata=s}exists(){return super.exists()}data(e={}){if(this._document){if(this._converter){const r=new xb(this._firestore,this._userDataWriter,this._key,this._document,this.metadata,null);return this._converter.fromFirestore(r,e)}return this._userDataWriter.convertValue(this._document.data.value,e.serverTimestamps)}}get(e,r={}){if(this._document){const n=this._document.data.field(Lj("DocumentSnapshot.get",e));if(n!==null)return this._userDataWriter.convertValue(n,r.serverTimestamps)}}}class xb extends Gj{data(e={}){return super.data(e)}}class I6{constructor(e,r,n,a){this._firestore=e,this._userDataWriter=r,this._snapshot=a,this.metadata=new wp(a.hasPendingWrites,a.fromCache),this.query=n}get docs(){const e=[];return this.forEach(r=>e.push(r)),e}get size(){return this._snapshot.docs.size}get empty(){return this.size===0}forEach(e,r){this._snapshot.docs.forEach(n=>{e.call(r,new xb(this._firestore,this._userDataWriter,n.key,n,new wp(this._snapshot.mutatedKeys.has(n.key),this._snapshot.fromCache),this.query.converter))})}docChanges(e={}){const r=!!e.includeMetadataChanges;if(r&&this._snapshot.excludesMetadataChanges)throw new Lr(ir.INVALID_ARGUMENT,"To include metadata changes with your document changes, you must also pass { includeMetadataChanges:true } to onSnapshot().");return this._cachedChanges&&this._cachedChangesIncludeMetadataChanges===r||(this._cachedChanges=function(a,s){if(a._snapshot.oldDocs.isEmpty()){let o=0;return a._snapshot.docChanges.map(l=>{const c=new xb(a._firestore,a._userDataWriter,l.doc.key,l.doc,new wp(a._snapshot.mutatedKeys.has(l.doc.key),a._snapshot.fromCache),a.query.converter);return l.doc,{type:"added",doc:c,oldIndex:-1,newIndex:o++}})}{let o=a._snapshot.oldDocs;return a._snapshot.docChanges.filter(l=>s||l.type!==3).map(l=>{const c=new xb(a._firestore,a._userDataWriter,l.doc.key,l.doc,new wp(a._snapshot.mutatedKeys.has(l.doc.key),a._snapshot.fromCache),a.query.converter);let u=-1,d=-1;return l.type!==0&&(u=o.indexOf(l.doc.key),o=o.delete(l.doc.key)),l.type!==1&&(o=o.add(l.doc),d=o.indexOf(l.doc.key)),{type:Kye(l.type),doc:c,oldIndex:u,newIndex:d}})}}(this,r),this._cachedChangesIncludeMetadataChanges=r),this._cachedChanges}}function Kye(t){switch(t){case 0:return"added";case 2:case 3:return"modified";case 1:return"removed";default:return cn()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function zs(t){t=tl(t,rl);const e=tl(t.firestore,Vu);return Oye(Bg(e),t._key).then(r=>Eee(e,t,r))}class Kj extends S6{constructor(e){super(),this.firestore=e}convertBytes(e){return new wm(e)}convertReference(e){const r=this.convertDocumentKey(e,this.firestore._databaseId);return new rl(this.firestore,null,r)}}function kt(t){t=tl(t,fh);const e=tl(t.firestore,Vu),r=Bg(e),n=new Kj(e);return Nee(t._query),Dye(r,t._query).then(a=>new I6(e,n,t,a))}function _ee(t,e,r){t=tl(t,rl);const n=tl(t.firestore,Vu),a=$j(t.converter,e,r);return A1(n,[Rj(f1(n),"setDoc",t._key,a,t.converter!==null,r).toMutation(t._key,$s.none())])}function kn(t,e,r,...n){t=tl(t,rl);const a=tl(t.firestore,Vu),s=f1(a);let o;return o=typeof(e=di(e))=="string"||e instanceof Tg?N6(s,"updateDoc",t._key,e,r,n):w6(s,"updateDoc",t._key,e),A1(a,[o.toMutation(t._key,$s.exists(!0))])}function Kn(t){return A1(tl(t.firestore,Vu),[new u1(t._key,$s.none())])}function Jn(t,e){const r=tl(t.firestore,Vu),n=Gt(t),a=$j(t.converter,e);return A1(r,[Rj(f1(t.firestore),"addDoc",n._key,a,t.converter!==null,{}).toMutation(n._key,$s.exists(!1))]).then(()=>n)}function jd(t,...e){var r,n,a;t=di(t);let s={includeMetadataChanges:!1,source:"default"},o=0;typeof e[o]!="object"||b9(e[o])||(s=e[o],o++);const l={includeMetadataChanges:s.includeMetadataChanges,source:s.source};if(b9(e[o])){const f=e[o];e[o]=(r=f.next)===null||r===void 0?void 0:r.bind(f),e[o+1]=(n=f.error)===null||n===void 0?void 0:n.bind(f),e[o+2]=(a=f.complete)===null||a===void 0?void 0:a.bind(f)}let c,u,d;if(t instanceof rl)u=tl(t.firestore,Vu),d=Ew(t._key.path),c={next:f=>{e[o]&&e[o](Eee(u,t,f))},error:e[o+1],complete:e[o+2]};else{const f=tl(t,fh);u=tl(f.firestore,Vu),d=f._query;const A=new Kj(u);c={next:h=>{e[o]&&e[o](new I6(u,A,f,h))},error:e[o+1],complete:e[o+2]},Nee(t._query)}return function(A,h,m,p){const x=new v6(p),v=new g6(h,x,m);return A.asyncQueue.enqueueAndForget(async()=>A6(await AS(A),v)),()=>{x.Za(),A.asyncQueue.enqueueAndForget(async()=>m6(await AS(A),v))}}(Bg(u),d,l,c)}function A1(t,e){return function(n,a){const s=new pf;return n.asyncQueue.enqueueAndForget(async()=>bye(await kye(n),a,s)),s.promise}(Bg(t),e)}function Eee(t,e,r){const n=r.docs.get(e._key),a=new Kj(t);return new Gj(t,a,e._key,n,new wp(r.hasPendingWrites,r.fromCache),e.converter)}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const qye={maxAttempts:5};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class See{constructor(e,r){this._firestore=e,this._commitHandler=r,this._mutations=[],this._committed=!1,this._dataReader=f1(e)}set(e,r,n){this._verifyNotCommitted();const a=R0(e,this._firestore),s=$j(a.converter,r,n),o=Rj(this._dataReader,"WriteBatch.set",a._key,s,a.converter!==null,n);return this._mutations.push(o.toMutation(a._key,$s.none())),this}update(e,r,n,...a){this._verifyNotCommitted();const s=R0(e,this._firestore);let o;return o=typeof(r=di(r))=="string"||r instanceof Tg?N6(this._dataReader,"WriteBatch.update",s._key,r,n,a):w6(this._dataReader,"WriteBatch.update",s._key,r),this._mutations.push(o.toMutation(s._key,$s.exists(!0))),this}delete(e){this._verifyNotCommitted();const r=R0(e,this._firestore);return this._mutations=this._mutations.concat(new u1(r._key,$s.none())),this}commit(){return this._verifyNotCommitted(),this._committed=!0,this._mutations.length>0?this._commitHandler(this._mutations):Promise.resolve()}_verifyNotCommitted(){if(this._committed)throw new Lr(ir.FAILED_PRECONDITION,"A write batch can no longer be used after commit() has been called.")}}function R0(t,e){if((t=di(t)).firestore!==e)throw new Lr(ir.INVALID_ARGUMENT,"Provided document reference is from a different Firestore instance.");return t}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Iee extends class{constructor(r,n){this._firestore=r,this._transaction=n,this._dataReader=f1(r)}get(r){const n=R0(r,this._firestore),a=new Gye(this._firestore);return this._transaction.lookup([n._key]).then(s=>{if(!s||s.length!==1)return cn();const o=s[0];if(o.isFoundDocument())return new pS(this._firestore,a,o.key,o,n.converter);if(o.isNoDocument())return new pS(this._firestore,a,n._key,null,n.converter);throw cn()})}set(r,n,a){const s=R0(r,this._firestore),o=$j(s.converter,n,a),l=Rj(this._dataReader,"Transaction.set",s._key,o,s.converter!==null,a);return this._transaction.set(s._key,l),this}update(r,n,a,...s){const o=R0(r,this._firestore);let l;return l=typeof(n=di(n))=="string"||n instanceof Tg?N6(this._dataReader,"Transaction.update",o._key,n,a,s):w6(this._dataReader,"Transaction.update",o._key,n),this._transaction.update(o._key,l),this}delete(r){const n=R0(r,this._firestore);return this._transaction.delete(n._key),this}}{constructor(e,r){super(e,r),this._firestore=e}get(e){const r=R0(e,this._firestore),n=new Kj(this._firestore);return super.get(e).then(a=>new Gj(this._firestore,n,r._key,a._document,new wp(!1,!1),r.converter))}}function Gs(t,e,r){t=tl(t,Vu);const n=Object.assign(Object.assign({},qye),r);return function(s){if(s.maxAttempts<1)throw new Lr(ir.INVALID_ARGUMENT,"Max attempts must be at least 1")}(n),function(s,o,l){const c=new pf;return s.asyncQueue.enqueueAndForget(async()=>{const u=await Fye(s);new Pye(s.asyncQueue,u,l,o,c).au()}),c.promise}(Bg(t),a=>e(new Iee(t,a)),n)}function jee(...t){return new b6("arrayUnion",t)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function tu(t){return Bg(t=tl(t,Vu)),new See(t,e=>A1(t,e))}(function(e,r=!0){(function(a){o1=a})(s1),jv(new Zp("firestore",(n,{instanceIdentifier:a,options:s})=>{const o=n.getProvider("app").getImmediate(),l=new Vu(new Fxe(n.getProvider("auth-internal")),new Mxe(n.getProvider("app-check-internal")),function(u,d){if(!Object.prototype.hasOwnProperty.apply(u.options,["projectId"]))throw new Lr(ir.INVALID_ARGUMENT,'"projectId" not provided in firebase.initializeApp.');return new vm(u.options.projectId,d)}(o,a),o);return s=Object.assign({useFetchStreams:r},s),l._setSettings(s),l},"PUBLIC").setMultipleInstances(!0)),om(m7,"4.7.3",e),om(m7,"4.7.3","esm2017")})();const zye=Object.freeze(Object.defineProperty({__proto__:null,AbstractUserDataWriter:S6,Bytes:wm,CollectionReference:nA,DocumentReference:rl,DocumentSnapshot:Gj,FieldPath:Tg,FieldValue:Tw,Firestore:Vu,FirestoreError:Lr,GeoPoint:Fj,Query:fh,QueryCompositeFilterConstraint:Qj,QueryConstraint:Uj,QueryDocumentSnapshot:xb,QueryFieldFilterConstraint:kw,QueryLimitConstraint:Hj,QueryOrderByConstraint:Vj,QuerySnapshot:I6,SnapshotMetadata:wp,Timestamp:Ar,Transaction:Iee,VectorValue:Oj,WriteBatch:See,_AutoId:VD,_ByteString:qi,_DatabaseId:vm,_DocumentKey:Wr,_EmptyAuthCredentialsProvider:OJ,_FieldPath:Hs,_cast:tl,_logWarn:gm,_validateIsNotUsedTogether:hee,addDoc:Jn,arrayUnion:jee,collection:mt,connectFirestoreEmulator:Aee,deleteDoc:Kn,doc:Gt,enableIndexedDbPersistence:gee,ensureFirestoreConfigured:Bg,executeWrite:A1,getDoc:zs,getDocs:kt,getFirestore:mee,limit:gS,onSnapshot:jd,orderBy:In,query:Yt,runTransaction:Gs,setDoc:_ee,updateDoc:kn,where:cr,writeBatch:tu},Symbol.toStringTag,{value:"Module"})),Wye={apiKey:"AIzaSyA_ZzeP_DAoXeRuallrOaJ4xFaxjnuhw-8",authDomain:"posys-103de.firebaseapp.com",projectId:"posys-103de",storageBucket:"posys-103de.firebasestorage.app",messagingSenderId:"401054148688",appId:"1:401054148688:web:1c2aea9e8b40958b514955",measurementId:"G-Q2GWQXMFLX"},Pee=SD(Wye),Se=mee(Pee),_c=QT(Pee),Xye=(async()=>{try{return await eE(_c,RD),console.info(" Auth persistence: browserLocalPersistence enabled"),"local"}catch(t){console.warn(" browserLocalPersistence failed:",(t==null?void 0:t.code)||t)}try{return await eE(_c,_J),console.info(" Auth persistence: indexedDBLocalPersistence enabled"),"indexeddb"}catch(t){console.warn(" indexedDBLocalPersistence failed:",(t==null?void 0:t.code)||t)}try{return await eE(_c,MD),console.info(" Auth persistence: browserSessionPersistence enabled (session only)"),"session"}catch(t){console.warn(" browserSessionPersistence failed:",(t==null?void 0:t.code)||t)}return console.warn(" No se pudo establecer ninguna persistencia para Auth."),"none"})();gee(Se).catch(t=>{t.code==="failed-precondition"?console.warn(" Ya hay otra pestaa usando persistencia."):t.code==="unimplemented"?console.warn(" El navegador no soporta persistencia offline."):console.error(" Error en persistencia offline:",t)});function Yye(){const[t,e]=g.useState(""),[r,n]=g.useState(""),[a,s]=g.useState(!1),[o,l]=g.useState(""),[c,u]=g.useState(!1),d=pw();g.useEffect(()=>{let h=!0;const m=xj(_c,async p=>{if(!(!p||!h))try{const x=await zs(Gt(Se,"users",p.uid));if(!x.exists())return;const v=x.data(),y=Array.isArray(v.roles)?v.roles:v.role?[v.role]:[],b=y[0]||"",w=v.name||"";localStorage.setItem("user_email",p.email||""),w&&localStorage.setItem("user_name",w),localStorage.setItem("roles",JSON.stringify(y)),y.length===1?f(b):d("/admin",{replace:!0})}catch{}});return()=>{h=!1,m()}},[d]);const f=h=>{if(Array.isArray(h)){if(h.length!==1)return localStorage.setItem("role",h[0]||""),d("/admin");h=h[0]||""}const m=String(h||"");if(localStorage.setItem("role",m),En(m,"admin"))return d("/admin");if(En(m,"vendedor_pollo"))return d("/admin/salesV2");if(En(m,"vendedor_ropa"))return d("/admin/salesClothes");if(En(m,"vendedor_dulces"))return d("/admin/salesCandies");if(En(m,"supervisor_pollo")||En(m,"contador"))return d("/admin/batches")},A=async h=>{if(h.preventDefault(),l(""),!t.trim()){l("Ingresa el correo.");return}if(r.length<6){l("La contrasea debe tener al menos 6 caracteres.");return}try{u(!0),console.info&&console.info("[Login] attempting signIn",{email:t}),await eE(_c,RD);const m=await vge(_c,t,r);console.info&&console.info("[Login] signInWithEmailAndPassword success",{uid:m.user.uid,email:m.user.email});const p=m.user.uid;localStorage.setItem("POSYS_LOGIN_AT",String(Date.now()));const x=await zs(Gt(Se,"users",p));if(console.info&&console.info("[Login] firestore users doc snap: exists=",x.exists()),!x.exists()){console.warn&&console.warn("[Login] user doc missing for uid",p),l("Tu usuario no tiene perfil en la base de datos.");return}const v=x.data();console.info&&console.info("[Login] user profile:",v);const y=Array.isArray(v.roles)?v.roles:v.role?[v.role]:[],b=y[0]||"",w=v.name||"",j=["admin","vendedor_pollo","vendedor_ropa","vendedor_dulces","supervisor_pollo","contador"];if(!y.some(I=>j.includes(I))){l("Rol no vlido. Consulta al administrador.");return}localStorage.setItem("user_email",m.user.email||""),w&&localStorage.setItem("user_name",w),localStorage.setItem("roles",JSON.stringify(y)),y.length===1?f(b):d("/admin")}catch(m){console.error&&console.error("[Login] sign-in error:",m);const p=String((m==null?void 0:m.code)||"");l(p==="auth/invalid-credential"||p==="auth/wrong-password"?"Credenciales incorrectas. ("+p+")":p==="auth/user-not-found"?"Usuario no encontrado. ("+p+")":p==="auth/too-many-requests"?"Demasiados intentos. Intenta ms tarde. ("+p+")":((m==null?void 0:m.message)||"Error al iniciar sesin.")+(p?` (${p})`:""))}finally{u(!1)}};return i.jsx("div",{className:"min-h-screen grid place-items-center ",children:i.jsxs("form",{onSubmit:A,className:"w-[92%] max-w-md bg-white p-6 rounded-2xl shadow-2xl",children:[i.jsx("h2",{className:"text-2xl font-bold text-center mb-4",children:"Iniciar Sesin"}),i.jsx("label",{className:"block text-sm font-semibold",children:"Correo electrnico"}),i.jsx("input",{type:"email",className:"w-full border rounded-2xl px-3 py-2 mb-3 shadow-2xl",value:t,onChange:h=>e(h.target.value),autoComplete:"username"}),i.jsx("label",{className:"block text-sm font-semibold",children:"Contrasea"}),i.jsxs("div",{className:"flex gap-2 mb-2",children:[i.jsx("input",{type:a?"text":"password",className:"flex-1 border rounded-2xl px-3 py-2 shadow-2xl",value:r,onChange:h=>n(h.target.value),minLength:6,autoComplete:"current-password"}),i.jsx("button",{type:"button",className:"px-3 py-2 rounded-2xl shadow-2xl bg-gray-200 hover:bg-gray-300",onClick:()=>s(h=>!h),children:a?"Ocultar":"Mostrar"})]}),i.jsx("div",{className:"text-xs text-gray-600 mb-3",children:"Mnimo 6 caracteres (requisito de Firebase)."}),i.jsx("button",{className:"w-full bg-blue-600 text-white px-4 py-2 rounded-2xl shadow-2xl hover:bg-blue-700 disabled:opacity-60",disabled:c,children:c?"Entrando...":"Entrar"}),o&&i.jsx("p",{className:`mt-3 text-sm ${o.startsWith("Error")||o.includes("no vlido")?"text-red-600":"text-gray-700"}`,children:o})]})})}function qn({children:t,allowedRoles:e}){const[r,n]=g.useState(!0),[a,s]=g.useState(!1);return g.useEffect(()=>{const o=xj(_c,async l=>{if(l){const c=Gt(Se,"users",l.uid),u=await zs(c);if(u.exists()){const d=u.data(),f=Array.isArray(d.roles)?d.roles:d.role?[d.role]:[];try{typeof window<"u"&&window.location&&(window.location.hostname==="localhost"||window.location.hostname==="127.0.0.1")?console.info&&console.info("[PrivateRoute] uid:",l.uid,"roleFromDoc:",role,"allowedRoles:",e):console.debug&&console.debug("[PrivateRoute] uid:",l.uid,"roleFromDoc:",role,"allowedRoles:",e)}catch{}let A=!1;for(const h of e)if(En(f,h)){A=!0;break}s(A)}else try{typeof window<"u"&&window.location&&(window.location.hostname==="localhost"||window.location.hostname==="127.0.0.1")?console.info&&console.info("[PrivateRoute] no user doc for uid:",l.uid):console.debug&&console.debug("[PrivateRoute] no user doc for uid:",l.uid)}catch{}}n(!1)});return()=>o()},[e]),r?i.jsx("div",{className:"p-4",children:"Cargando..."}):a?t:i.jsx(Oh,{to:"/"})}const Jye={admin:{},supervisor_pollo:{bills:{view:!0,edit:!1},expenses:{view:!0,edit:!1},customersPollo:{view:!0,edit:!1},transactionsPollo:{view:!0,edit:!1},batches:{view:!0,edit:!1}},contador:{salesV2:{view:!0,edit:!0},customersPollo:{view:!0,edit:!0},batches:{view:!0,edit:!0},transactionsPollo:{view:!0,edit:!1},bills:{view:!0,edit:!1},expenses:{view:!0,edit:!0},financialDashboard:{view:!0,edit:!1},polloCashAudits:{view:!0,edit:!0}},vendedor_pollo:{salesV2:{view:!0,edit:!0},transactionsPollo:{view:!0,edit:!1},bills:{view:!0,edit:!1},customersPollo:{view:!0,edit:!0}},vendedor_dulces:{salesCandies:{view:!0,edit:!0},productsVendorsCandies:{view:!0,edit:!1},productsPricesCandies:{view:!0,edit:!1},transactionCandies:{view:!0,edit:!1},cierreVentasCandies:{view:!0,edit:!1},customersCandies:{view:!0,edit:!0}},vendedor_ropa:{}};function Bee(t){return t?Array.isArray(t)?t.filter(Boolean):[t].filter(Boolean):[]}function aa(t,e,r="view"){const n=Bee(t);return n.some(a=>a==="admin")?!0:n.some(a=>{var s,o;return!!((o=(s=Jye[a])==null?void 0:s[e])!=null&&o[r])})}const Zye={admin:{},supervisor_pollo:{bills:{cerrarVentas:!1},batches:{create:!1,update:!1,delete:!1,export:!1}},contador:{batches:{create:!0,update:!1,delete:!1,export:!0},bills:{cerrarVentas:!1}},vendedor_pollo:{salesV2:{create:!0,update:!0},customersPollo:{update:!0},bills:{cerrarVentas:!0}},vendedor_dulces:{salesCandies:{create:!0,update:!0},productsVendorsCandies:{create:!0,update:!1,delete:!1},customersCandies:{update:!0},productsPricesCandies:{price_edit:!1}},vendedor_ropa:{}};function ebe(t,e,r){const n=Bee(t);return n.some(a=>a==="admin")?!0:aa(t,e,"view")?n.some(a=>{var o;const s=(o=Zye[a])==null?void 0:o[e];return!!(s!=null&&s[r])}):!1}function tbe({role:t,roles:e}){const r="/admin",n=({isActive:ie})=>`block rounded px-3 py-2 text-sm ${ie?"bg-blue-600 text-white":"text-gray-700 hover:bg-gray-100"}`,a=pw(),[s,o]=g.useState(!1),[l,c]=g.useState(!1),[u,d]=g.useState(!1),[f,A]=g.useState(!1),[h,m]=g.useState(!1),[p,x]=g.useState(!1),[v,y]=g.useState(!1),[b,w]=g.useState(!1),[j,I]=g.useState(!1),[_,S]=g.useState(!1),[E,T]=g.useState(!1),[k,B]=g.useState(!1),[D,X]=g.useState(!1),[me,pe]=g.useState(!1),[he,ve]=g.useState(!1),[ae,Pe]=g.useState(!1),[ke,O]=g.useState(!1),[G,z]=g.useState(!1),U=async()=>{z(!0)},Y=async()=>{try{await DD(_c)}catch(ie){console.error("signOut error:",ie)}finally{try{localStorage.removeItem("user_name"),localStorage.removeItem("user_email"),localStorage.removeItem("roles"),localStorage.removeItem("role")}catch{}z(!1),a("/")}},ee=({open:ie,onClick:J,children:Oe})=>i.jsxs("button",{type:"button",onClick:J,className:"w-full flex items-center justify-between px-3 py-2 text-left text-sm font-semibold rounded hover:bg-gray-100",children:[i.jsx("span",{children:Oe}),i.jsx("span",{className:"text-xs",children:ie?"":""})]}),M=({open:ie,onClick:J,title:Oe})=>i.jsxs("button",{type:"button",onClick:J,className:"ml-2 w-[calc(100%-0.5rem)] flex items-center justify-between px-3 py-2 text-left text-sm rounded hover:bg-gray-100",children:[i.jsx("span",{className:"text-blue-500 font-medium ",children:Oe}),i.jsx("span",{className:"text-xs",children:ie?"":""})]}),H=e&&e.length?e:t,te=En(H,"admin");En(H,"vendedor_pollo");const Ce=En(H,"vendedor_ropa");En(H,"vendedor_dulces"),En(H,"supervisor_pollo")||En(H,"contador"),En(H,"contador");const V=aa(H,"salesV2","view")||aa(H,"customersPollo","view")||aa(H,"transactionsPollo","view")||aa(H,"bills","view")||aa(H,"expenses","view")||aa(H,"batches","view"),We=aa(H,"salesCandies","view")||aa(H,"productsVendorsCandies","view")||aa(H,"customersCandies","view")||aa(H,"productsPricesCandies","view")||aa(H,"transactionCandies","view")||aa(H,"cierreVentasCandies","view");return i.jsxs("div",{className:"min-h-screen flex",children:[i.jsxs("aside",{className:`${s?"w-15 bg-gray-50 border-r p-3 transition-all duration-300 flex flex-col items-center":"w-55"} bg-[#f1f3f7] border-r p-3 transition-all duration-300 flex flex-col`,children:[i.jsx("button",{onClick:()=>o(!s),className:"mb-2 p-2 rounded-2xl shadow-2xl bg-gray-300 hover:bg-gray-400","aria-label":s?"Expandir men":"Colapsar men",children:s?i.jsx("span",{title:"Expandir men",children:"Menu "}):i.jsx("span",{title:"Colapsar men",children:"Cerrar "})}),!s&&i.jsxs(i.Fragment,{children:[i.jsxs("nav",{className:"space-y-1",children:[te&&i.jsxs(i.Fragment,{children:[i.jsxs("div",{className:"border rounded mb-1 rounded-2xl shadow-2xl bg-white",children:[i.jsx(ee,{open:l,onClick:()=>c(ie=>!ie),children:"Pollos Bea"}),l&&i.jsxs("div",{className:"pb-2",children:[i.jsx(M,{open:p,onClick:()=>x(ie=>!ie),title:"Operaciones"}),p&&i.jsxs("div",{className:"ml-4 mt-1 space-y-1",children:[i.jsx(bn,{to:`${r}/salesV2`,className:n,children:"Vender"}),i.jsx(bn,{to:`${r}/customersPollo`,className:n,children:"Saldo Pendientes"}),i.jsx(bn,{to:`${r}/transactionsPollo`,className:n,children:"Transacciones"}),i.jsx(bn,{to:`${r}/bills`,className:n,children:"Cierre Ventas"})]}),i.jsx(M,{open:u,onClick:()=>d(ie=>!ie),title:"Inventarios"}),u&&i.jsxs("div",{className:"ml-4 mt-1 space-y-1",children:[i.jsx(bn,{to:`${r}/batches`,className:n,children:"Inventario Pollo"}),i.jsx(bn,{to:`${r}/paidBatches`,className:n,children:"Inventarios Pagados"})]}),i.jsx(M,{open:f,onClick:()=>A(ie=>!ie),title:"Finanzas"}),f&&i.jsxs("div",{className:"ml-4 mt-1 space-y-1",children:[i.jsx(bn,{to:`${r}/financialDashboard`,className:n,children:"Dashboard"}),i.jsx(bn,{to:`${r}/billing`,className:n,children:"Facturacion"}),i.jsx(bn,{to:`${r}/expenses`,className:n,children:"Gastos"}),i.jsx(bn,{to:`${r}/polloCashAudits`,className:n,children:"Arqueos Caja"}),i.jsx(bn,{to:`${r}/salesV2`,className:n,children:"Venta"}),i.jsx(bn,{to:`${r}/bills`,className:n,children:"Cierre Ventas"}),i.jsx(bn,{to:`${r}/billhistoric`,className:n,children:"Historial de Cierres"})]}),i.jsx(M,{open:h,onClick:()=>m(ie=>!ie),title:"Productos"}),h&&i.jsx("div",{className:"ml-4 mt-1 space-y-1",children:i.jsx(bn,{to:`${r}/products`,className:n,children:"Productos"})})]})]}),i.jsxs("div",{className:"border rounded mb-1 rounded-2xl shadow-2xl bg-white",children:[i.jsx(ee,{open:v,onClick:()=>y(ie=>!ie),children:"Gonper"}),v&&i.jsxs("div",{className:"pb-2",children:[i.jsx(M,{open:b,onClick:()=>w(ie=>!ie),title:"Inventarios"}),b&&i.jsx("div",{className:"ml-4 mt-1 space-y-1",children:i.jsx(bn,{to:`${r}/notebooksInventory`,className:n,children:"Productos y Precios"})})]})]}),i.jsxs("div",{className:"border rounded mb-1 rounded-2xl shadow-2xl bg-white",children:[i.jsx(ee,{open:D,onClick:()=>X(ie=>!ie),children:"CandyShop"}),D&&i.jsxs("div",{className:"pb-2",children:[i.jsx(M,{open:he,onClick:()=>ve(ie=>!ie),title:"Vendedores"}),he&&i.jsx("div",{className:"ml-4 mt-1 space-y-1",children:i.jsx(bn,{to:`${r}/salesCandies`,className:n,children:"Venta"})}),he&&i.jsx("div",{className:"ml-4 mt-1 space-y-1",children:i.jsx(bn,{to:`${r}/productsVendorsCandies`,className:n,children:"Sub ordenes"})}),he&&i.jsx("div",{className:"ml-4 mt-1 space-y-1",children:i.jsx(bn,{to:`${r}/productsPricesCandies`,className:n,children:"Precios Venta"})}),i.jsx(M,{open:me,onClick:()=>pe(ie=>!ie),title:"Inventario"}),me&&i.jsx("div",{className:"ml-4 mt-1 space-y-1",children:i.jsx(bn,{to:`${r}/mainordersCandies`,className:n,children:"Ordenes Maestras"})}),me&&i.jsx("div",{className:"ml-4 mt-1 space-y-1",children:i.jsx(bn,{to:`${r}/inventoryMainOrderCandies`,className:n,children:"Lista de Ordenes"})}),me&&i.jsx("div",{className:"ml-4 mt-1 space-y-1",children:i.jsx(bn,{to:`${r}/inventoryCandies`,className:n,children:"Lista Productos"})}),me&&i.jsx("div",{className:"ml-4 mt-1 space-y-1",children:i.jsx(bn,{to:`${r}/productsCandies`,className:n,children:"Productos"})}),i.jsx(M,{open:ae,onClick:()=>Pe(ie=>!ie),title:"Finanzas"}),ae&&i.jsx("div",{className:"ml-4 mt-1 space-y-1",children:i.jsx(bn,{to:`${r}/datacenter`,className:n,children:"Data Center"})}),ae&&i.jsx("div",{className:"ml-4 mt-1 space-y-1",children:i.jsx(bn,{to:`${r}/cashDeliveries`,className:n,children:"Entregas Cash"})}),ae&&i.jsx("div",{className:"ml-4 mt-1 space-y-1",children:i.jsx(bn,{to:`${r}/transactionCandies`,className:n,children:"Transacciones"})}),ae&&i.jsx("div",{className:"ml-4 mt-1 space-y-1",children:i.jsx(bn,{to:`${r}/cierreVentasCandies`,className:n,children:"Cierres"})}),ae&&i.jsx("div",{className:"ml-4 mt-1 space-y-1",children:i.jsx(bn,{to:`${r}/reporteCierresCandies`,className:n,children:"Reporte Cierres"})}),ae&&i.jsx("div",{className:"ml-4 mt-1 space-y-1",children:i.jsx(bn,{to:`${r}/billingsCandies`,className:n,children:"Facturas"})}),ae&&i.jsx("div",{className:"ml-4 mt-1 space-y-1",children:i.jsx(bn,{to:`${r}/consolidatedVendors`,className:n,children:"Consolidado Vendedores"})}),ae&&i.jsx("div",{className:"ml-4 mt-1 space-y-1",children:i.jsx(bn,{to:`${r}/dashboardCandies`,className:n,children:"Dashboard"})}),ae&&i.jsx("div",{className:"ml-4 mt-1 space-y-1",children:i.jsx(bn,{to:`${r}/customersCandies`,className:n,children:"Clientes"})}),ae&&i.jsx("div",{className:"ml-4 mt-1 space-y-1",children:i.jsx(bn,{to:`${r}/vendorsCandies`,className:n,children:"Vendedores"})}),ae&&i.jsx("div",{className:"ml-4 mt-1 space-y-1",children:i.jsx(bn,{to:`${r}/expensesCandies`,className:n,children:"Gastos"})})]})]}),i.jsxs("div",{className:"border rounded mb-1 rounded-2xl shadow-2xl bg-white",children:[i.jsx(ee,{open:ke,onClick:()=>O(ie=>!ie),children:"Operaciones Otras"}),ke&&i.jsxs("div",{className:"pb-2 ml-4 mt-1 space-y-1",children:[i.jsx(bn,{to:`${r}/users`,className:n,children:"Usuarios"}),i.jsx(bn,{to:`${r}/fix`,className:n,children:"Fix de lotes"}),i.jsx(bn,{to:`${r}/transactionclose`,className:n,children:"Liquidaciones"})]})]})]}),!te&&V&&i.jsxs("div",{className:"border rounded mb-1 rounded-2xl shadow-2xl bg-white",children:[i.jsx(ee,{open:l,onClick:()=>c(ie=>!ie),children:"Pollos Bea"}),l&&i.jsxs("div",{className:"pb-2 ml-4 mt-1 space-y-1",children:[aa(H,"salesV2")&&i.jsx(bn,{to:`${r}/salesV2`,className:n,children:"Vender"}),aa(H,"financialDashboard")&&i.jsx(bn,{to:`${r}/financialDashboard`,className:n,children:"Dashboard"}),aa(H,"batches")&&i.jsx(bn,{to:`${r}/batches`,className:n,children:"Inventario Pollo"}),aa(H,"bills")&&i.jsx(bn,{to:`${r}/bills`,className:n,children:"Cierre Ventas"}),aa(H,"transactionsPollo")&&i.jsx(bn,{to:`${r}/transactionsPollo`,className:n,children:"Transacciones"}),aa(H,"expenses")&&i.jsx(bn,{to:`${r}/expenses`,className:n,children:"Gastos"}),En(H,"contador")&&i.jsx(bn,{to:`${r}/polloCashAudits`,className:n,children:"Arqueos Caja"}),aa(H,"customersPollo")&&i.jsx(bn,{to:`${r}/customersPollo`,className:n,children:"Saldos Pendientes"})]})]}),!te&&We&&i.jsxs("div",{className:"border rounded",children:[i.jsx("div",{className:"pb-2 ml-4 mt-1 space-y-1",children:aa(H,"salesCandies")&&i.jsx(bn,{to:`${r}/salesCandies`,className:n,children:"Venta"})}),i.jsx("div",{className:"pb-2 ml-4 mt-1 space-y-1",children:aa(H,"transactionCandies")&&i.jsx(bn,{to:`${r}/transactionCandies`,className:n,children:"Ventas del dia"})}),i.jsx("div",{className:"pb-2 ml-4 mt-1 space-y-1",children:aa(H,"cierreVentasCandies")&&i.jsx(bn,{to:`${r}/cierreVentasCandies`,className:n,children:"Cierre de Ventas"})}),i.jsx("div",{className:"ml-4 mt-1 space-y-1",children:aa(H,"productsVendorsCandies")&&i.jsx(bn,{to:`${r}/productsVendorsCandies`,className:n,children:"Pedidos"})}),i.jsx("div",{className:"ml-4 mt-1 space-y-1",children:aa(H,"customersCandies")&&i.jsx(bn,{to:`${r}/customersCandies`,className:n,children:"Clientes"})}),i.jsx("div",{className:"ml-4 mt-1 space-y-1",children:aa(H,"productsPricesCandies")&&i.jsx(bn,{to:`${r}/productsPricesCandies`,className:n,children:"Precios Venta"})})]}),Ce&&i.jsxs("div",{className:"border rounded",children:[i.jsx(ee,{open:v,onClick:()=>y(ie=>!ie),children:"Operaciones Ropa"}),v&&i.jsxs("div",{className:"pb-2",children:[i.jsx(M,{open:E,onClick:()=>T(ie=>!ie),title:"Ventas"}),E&&i.jsxs("div",{className:"ml-4 mt-1 space-y-1",children:[i.jsx(bn,{to:`${r}/salesClothes`,className:n,children:"Venta Ropa"}),i.jsx(bn,{to:`${r}/TransactionsReportClothes`,className:n,children:"Transacciones"})]}),i.jsx(M,{open:j,onClick:()=>I(ie=>!ie),title:"Productos"}),j&&i.jsx("div",{className:"ml-4 mt-1 space-y-1",children:i.jsx(bn,{to:`${r}/productsClothes`,className:n,children:"Agregar Productos"})}),i.jsx(M,{open:_,onClick:()=>S(ie=>!ie),title:"Clientes"}),_&&i.jsx("div",{className:"ml-4 mt-1 space-y-1",children:i.jsx(bn,{to:`${r}/CustomersClothes`,className:n,children:"Listado de Clientes"})})]})]})]}),i.jsx("button",{onClick:U,className:"mt-4 bg-red-500 text-white px-3 py-2 rounded-2xl shadow-2xl hover:bg-red-600",children:"Cerrar sesin"}),i.jsx("div",{className:"mt-2 text-[20px] text-gray-700",children:typeof window<"u"&&(localStorage.getItem("user_name")||localStorage.getItem("user_email"))}),G&&i.jsxs("div",{className:"fixed inset-0 z-[120] flex items-center justify-center",children:[i.jsx("div",{className:"absolute inset-0 bg-black/20",onClick:()=>z(!1)}),i.jsxs("div",{className:"bg-white p-4 rounded-xl shadow-lg z-[130] w-[90%] max-w-sm",children:[i.jsx("div",{className:"font-semibold mb-3",children:"Ests seguro de cerrar sesin?"}),i.jsxs("div",{className:"flex gap-2 justify-end",children:[i.jsx("button",{onClick:()=>z(!1),className:"px-3 py-2 rounded bg-gray-200",children:"No"}),i.jsx("button",{onClick:Y,className:"px-3 py-2 rounded bg-red-500 text-white",children:"SI"})]})]})]})]})]}),i.jsx("main",{className:"flex-1 p-6",children:i.jsx(jY,{})})]})}function oy(...t){return t.filter(Boolean).join(" ")}function rbe({role:t,roles:e}){const r=pw(),n=PA(),a="/admin",s=e&&e.length?e:t,o=En(s,"admin"),l=En(s,"vendedor_pollo"),c=En(s,"vendedor_dulces"),u=En(s,"supervisor_pollo")||En(s,"contador"),d=En(s,"contador"),f=aa(s,"salesV2","view")||aa(s,"batches","view")||aa(s,"bills","view")||aa(s,"transactionsPollo","view")||aa(s,"customersPollo","view"),A=aa(s,"salesCandies","view")||aa(s,"productsVendorsCandies","view")||aa(s,"customersCandies","view")||aa(s,"productsPricesCandies","view")||aa(s,"transactionCandies","view")||aa(s,"cierreVentasCandies","view"),h=f&&A,[m,p]=g.useState(()=>{try{const T=typeof window<"u"?localStorage.getItem("rubro"):null;if(T==="POLLO"||T==="DULCES")return T}catch{}return f?"POLLO":A?"DULCES":"POLLO"}),[x,v]=g.useState(!1),[y,b]=g.useState(!1),w=g.useMemo(()=>{let T=[];if(o||h){if(m==="POLLO")if(o)T=[{key:"venta",label:"Vender",to:`${a}/salesV2`},{key:"clientes",label:"Saldos pendientes",to:`${a}/customersPollo`},{key:"dash",label:"Dashboard",to:`${a}/financialDashboard`},{key:"cierre",label:"Cierre Ventas",to:`${a}/bills`},{key:"trxs",label:"Transacciones",to:`${a}/transactionsPollo`},{key:"inv",label:"Inventario",to:`${a}/batches`},{key:"invPag",label:"Factura",to:`${a}/paidBatches`},{key:"gastos",label:"Gastos",to:`${a}/expenses`},{key:"arqueos",label:"Arqueos Caja",to:`${a}/polloCashAudits`}];else if(u){const D=[{key:"venta",label:"Vender",to:`${a}/salesV2`},{key:"clientes",label:"Saldos pendientes",to:`${a}/customersPollo`},{key:"dash",label:"Dashboard",to:`${a}/financialDashboard`},{key:"inv",label:"Inventario",to:`${a}/batches`},{key:"trxs",label:"Transacciones",to:`${a}/transactionsPollo`},{key:"cierre",label:"Cierre Ventas",to:`${a}/bills`}];En(s,"contador")&&(T=D)}else l?T=[{key:"venta",label:"Vender",to:`${a}/salesV2`},{key:"clientes",label:"Saldos Pendientes",to:`${a}/customersPollo`},{key:"cierre",label:"Cierre Ventas",to:`${a}/bills`},{key:"trxs",label:"Transacciones",to:`${a}/transactionsPollo`}]:d?T=[{key:"venta",label:"Vender",to:`${a}/salesV2`},{key:"clientes",label:"Saldos Pendientes",to:`${a}/customersPollo`},{key:"dash",label:"Dashboard",to:`${a}/financialDashboard`},{key:"cierre",label:"Cierre Ventas",to:`${a}/bills`},{key:"trxs",label:"Transacciones",to:`${a}/transactionsPollo`}]:T=[{key:"home",label:"Inicio",to:`${a}`}];m==="DULCES"&&(o?T=[{key:"dc",label:"Data Center Reporte",to:`${a}/datacenter`},{key:"maes",label:"Inventario Maestro",to:`${a}/mainordersCandies`},{key:"ord",label:"Inventario Vendedor",to:`${a}/productsVendorsCandies`},{key:"cli",label:"Saldos Pendientes",to:`${a}/customersCandies`},{key:"trx",label:"Ventas del dia",to:`${a}/transactionCandies`},{key:"cier",label:"Cierre de ventas",to:`${a}/cierreVentasCandies`},{key:"cash",label:"Entregas Efectivo ",to:`${a}/cashDeliveries`},{key:"items",label:"Productos",to:`${a}/productsCandies`},{key:"precios",label:"Precio Ventas",to:`${a}/productsPricesCandies`},{key:"gonper",label:"Productos Gonper",to:`${a}/notebooksInventory`}]:c?T=[{key:"venta",label:"Vender",to:`${a}/salesCandies`},{key:"precios",label:"Precios",to:`${a}/productsPricesCandies`},{key:"ped",label:"Inventario",to:`${a}/productsVendorsCandies`},{key:"cli",label:"Saldos Pendientes",to:`${a}/customersCandies`},{key:"trx",label:"Ventas",to:`${a}/transactionCandies`},{key:"cier",label:"Cierre",to:`${a}/cierreVentasCandies`}]:T=[{key:"home",label:"Inicio",to:`${a}`}])}else if(u){const D=[{key:"venta",label:"Venta",to:`${a}/salesV2`},{key:"dash",label:"Dashboard",to:`${a}/financialDashboard`},{key:"inv",label:"Inventario",to:`${a}/batches`},{key:"clientes",label:"Saldos Pendientes",to:`${a}/customersPollo`},{key:"trxs",label:"Transacciones",to:`${a}/transactionsPollo`},{key:"cierre",label:"Cierre",to:`${a}/bills`}];En(s,"contador")?T=[...D,{key:"arqueos",label:"Arqueos Caja",to:`${a}/polloCashAudits`}]:T=D}else l?T=[{key:"venta",label:"Venta",to:`${a}/salesV2`},{key:"cierre",label:"Cierre",to:`${a}/bills`},{key:"trxs",label:"Transacciones",to:`${a}/transactionsPollo`}]:c?T=[{key:"venta",label:"Vender",to:`${a}/salesCandies`},{key:"precios",label:"Precios",to:`${a}/productsPricesCandies`},{key:"ped",label:"Inventario",to:`${a}/productsVendorsCandies`},{key:"cli",label:"Saldos Pendientes",to:`${a}/customersCandies`},{key:"trx",label:"Ventas",to:`${a}/transactionCandies`},{key:"cier",label:"Cierre",to:`${a}/cierreVentasCandies`}]:T=[{key:"home",label:"Inicio",to:`${a}`}];const k=new Set(["bills","customersPollo","transactionsPollo","batches","salesV2","financialDashboard","polloCashAudits","salesCandies","productsVendorsCandies","productsPricesCandies","transactionCandies","cierreVentasCandies","customersCandies"]);return T.filter(D=>{const me=D.to.replace(`${a}/`,"");return k.has(me)?aa(s,me,"view"):!0})},[a,m,o,h,u,l,c,d,s]);g.useEffect(()=>{if((o||h)&&w.length){try{localStorage.setItem("rubro",m)}catch{}r(w[0].to,{replace:!0})}},[m]),g.useEffect(()=>{x&&v(!1)},[n.pathname]),g.useEffect(()=>{const T=k=>{k.key==="Escape"&&v(!1)};return x&&window.addEventListener("keydown",T),()=>window.removeEventListener("keydown",T)},[x]);const j=async()=>{b(!0)},I=async()=>{try{await DD(_c)}catch(T){console.error("signOut error:",T)}finally{try{localStorage.removeItem("user_name"),localStorage.removeItem("user_email"),localStorage.removeItem("roles"),localStorage.removeItem("role")}catch{}b(!1),v(!1),r("/")}},_=({isActive:T})=>oy("flex-1 text-center text-[11px] py-1.5 rounded-lg","leading-none select-none",T?"bg-blue-600 text-white":"text-gray-700 hover:bg-gray-100"),S=w.length<=2,E=({isActive:T})=>oy("w-full flex items-center justify-between px-4 py-3 rounded-xl border",T?"bg-blue-600 text-white border-blue-600":"bg-white text-gray-800 border-gray-200 hover:bg-gray-50");return i.jsxs("div",{className:"min-h-screen bg-[#f1f3f7] flex flex-col",children:[i.jsx("header",{className:"sticky top-0 z-50 bg-white border-b shadow-sm",children:i.jsxs("div",{className:"px-3 py-3 flex items-center gap-2",children:[o||h?i.jsxs("div",{className:"flex gap-2",children:[i.jsx("button",{type:"button",onClick:()=>p("POLLO"),className:oy("px-3 py-2 rounded-2xl text-sm font-semibold",m==="POLLO"?"bg-blue-600 text-white":"bg-gray-100 text-gray-700"),children:"Carniceria"}),i.jsx("button",{type:"button",onClick:()=>p("DULCES"),className:oy("px-3 py-2 rounded-2xl text-sm font-semibold",m==="DULCES"?"bg-blue-600 text-white":"bg-gray-100 text-gray-700"),children:"Mr. Candy"})]}):i.jsx("div",{className:"text-sm font-semibold text-gray-800",children:l?"Pollos Bea":c?"CandyShop":"Posys"}),i.jsx("div",{className:"ml-auto flex items-center gap-2",children:i.jsx("button",{type:"button",onClick:()=>v(!0),className:"px-3 py-2 rounded-2xl bg-gray-100 text-gray-800 text-sm font-bold shadow hover:bg-gray-200","aria-label":"Abrir men",title:"Men",children:""})})]})}),x&&i.jsxs("div",{className:"fixed inset-0 z-[80]",children:[i.jsx("button",{type:"button",className:"absolute inset-0 bg-black/40",onClick:()=>v(!1),"aria-label":"Cerrar men"}),i.jsxs("aside",{className:"absolute right-0 top-0 h-full w-[86%] max-w-sm bg-white shadow-2xl border-l flex flex-col",children:[i.jsxs("div",{className:"p-4 border-b",children:[i.jsxs("div",{className:"flex items-center justify-between",children:[i.jsx("div",{className:"font-bold text-gray-900",children:"Men"}),i.jsx("button",{type:"button",onClick:()=>v(!1),className:"px-3 py-2 rounded-xl bg-gray-100 hover:bg-gray-200",children:""})]}),i.jsx("div",{className:"mt-2 text-[20px] text-gray-600",children:typeof window<"u"&&(localStorage.getItem("user_name")||localStorage.getItem("user_email"))})]}),i.jsx("div",{className:"p-3 flex-1 overflow-y-auto space-y-2",children:w.map(T=>i.jsxs(bn,{to:T.to,className:E,children:[i.jsx("span",{className:"font-semibold",children:T.label}),i.jsx("span",{className:"text-sm opacity-80",children:""})]},T.key))}),i.jsxs("div",{className:"p-3 border-t space-y-2 pb-[calc(12px+env(safe-area-inset-bottom))]",children:[i.jsx("button",{onClick:j,className:"w-full px-4 py-3 rounded-xl bg-red-500 text-white font-semibold shadow hover:bg-red-600",children:"Cerrar sesin"}),y&&i.jsxs("div",{className:"fixed inset-0 z-[120] flex items-center justify-center",children:[i.jsx("div",{className:"absolute inset-0 bg-black/20",onClick:()=>b(!1)}),i.jsxs("div",{className:"bg-white p-4 rounded-xl shadow-lg z-[130] w-[90%] max-w-sm",children:[i.jsx("div",{className:"font-semibold mb-3",children:"Ests seguro de cerrar sesin?"}),i.jsxs("div",{className:"flex gap-2 justify-end",children:[i.jsx("button",{onClick:()=>b(!1),className:"px-3 py-2 rounded bg-gray-200",children:"No"}),i.jsx("button",{onClick:I,className:"px-3 py-2 rounded bg-red-500 text-white",children:"SI"})]})]})]})]})]})]}),i.jsx("main",{className:oy("flex-1 overflow-y-auto px-3 pt-3",S?"pb-[calc(92px+env(safe-area-inset-bottom))]":"pb-[calc(16px+env(safe-area-inset-bottom))]"),children:i.jsx(jY,{})}),S&&i.jsx("nav",{className:"fixed bottom-0 left-0 right-0 z-50 bg-white border-t shadow-md pb-[env(safe-area-inset-bottom)]",children:i.jsx("div",{className:"max-w-3xl mx-auto px-2 py-1.5 flex gap-1.5",children:w.map(T=>i.jsx(bn,{to:T.to,className:_,children:T.label},T.key))})})]})}const Tee=6048e5,nbe=864e5,abe=6e4,sbe=36e5,ibe=1e3,C9=Symbol.for("constructDateFrom");function lo(t,e){return typeof t=="function"?t(e):t&&typeof t=="object"&&C9 in t?t[C9](e):t instanceof Date?new t.constructor(e):new Date(e)}function fi(t,e){return lo(e||t,t)}function j6(t,e,r){const n=fi(t,r==null?void 0:r.in);return isNaN(e)?lo((r==null?void 0:r.in)||t,NaN):(e&&n.setDate(n.getDate()+e),n)}function obe(t,e,r){const n=fi(t,r==null?void 0:r.in);if(isNaN(e))return lo(t,NaN);const a=n.getDate(),s=lo(t,n.getTime());s.setMonth(n.getMonth()+e+1,0);const o=s.getDate();return a>=o?s:(n.setFullYear(s.getFullYear(),s.getMonth(),a),n)}let lbe={};function m1(){return lbe}function Nm(t,e){var l,c,u,d;const r=m1(),n=(e==null?void 0:e.weekStartsOn)??((c=(l=e==null?void 0:e.locale)==null?void 0:l.options)==null?void 0:c.weekStartsOn)??r.weekStartsOn??((d=(u=r.locale)==null?void 0:u.options)==null?void 0:d.weekStartsOn)??0,a=fi(t,e==null?void 0:e.in),s=a.getDay(),o=(s<n?7:0)+s-n;return a.setDate(a.getDate()-o),a.setHours(0,0,0,0),a}function Rv(t,e){return Nm(t,{...e,weekStartsOn:1})}function kee(t,e){const r=fi(t,e==null?void 0:e.in),n=r.getFullYear(),a=lo(r,0);a.setFullYear(n+1,0,4),a.setHours(0,0,0,0);const s=Rv(a),o=lo(r,0);o.setFullYear(n,0,4),o.setHours(0,0,0,0);const l=Rv(o);return r.getTime()>=s.getTime()?n+1:r.getTime()>=l.getTime()?n:n-1}function xS(t){const e=fi(t),r=new Date(Date.UTC(e.getFullYear(),e.getMonth(),e.getDate(),e.getHours(),e.getMinutes(),e.getSeconds(),e.getMilliseconds()));return r.setUTCFullYear(e.getFullYear()),+t-+r}function cbe(t,...e){const r=lo.bind(null,e.find(n=>typeof n=="object"));return e.map(r)}function _9(t,e){const r=fi(t,e==null?void 0:e.in);return r.setHours(0,0,0,0),r}function ube(t,e,r){const[n,a]=cbe(r==null?void 0:r.in,t,e),s=_9(n),o=_9(a),l=+s-xS(s),c=+o-xS(o);return Math.round((l-c)/nbe)}function dbe(t,e){const r=kee(t,e),n=lo(t,0);return n.setFullYear(r,0,4),n.setHours(0,0,0,0),Rv(n)}function fbe(t){return t instanceof Date||typeof t=="object"&&Object.prototype.toString.call(t)==="[object Date]"}function P6(t){return!(!fbe(t)&&typeof t!="number"||isNaN(+fi(t)))}function Ld(t,e){const r=fi(t,e==null?void 0:e.in),n=r.getMonth();return r.setFullYear(r.getFullYear(),n+1,0),r.setHours(23,59,59,999),r}function Ud(t,e){const r=fi(t,e==null?void 0:e.in);return r.setDate(1),r.setHours(0,0,0,0),r}function hbe(t,e){const r=fi(t,e==null?void 0:e.in);return r.setFullYear(r.getFullYear(),0,1),r.setHours(0,0,0,0),r}const Abe={lessThanXSeconds:{one:"less than a second",other:"less than {{count}} seconds"},xSeconds:{one:"1 second",other:"{{count}} seconds"},halfAMinute:"half a minute",lessThanXMinutes:{one:"less than a minute",other:"less than {{count}} minutes"},xMinutes:{one:"1 minute",other:"{{count}} minutes"},aboutXHours:{one:"about 1 hour",other:"about {{count}} hours"},xHours:{one:"1 hour",other:"{{count}} hours"},xDays:{one:"1 day",other:"{{count}} days"},aboutXWeeks:{one:"about 1 week",other:"about {{count}} weeks"},xWeeks:{one:"1 week",other:"{{count}} weeks"},aboutXMonths:{one:"about 1 month",other:"about {{count}} months"},xMonths:{one:"1 month",other:"{{count}} months"},aboutXYears:{one:"about 1 year",other:"about {{count}} years"},xYears:{one:"1 year",other:"{{count}} years"},overXYears:{one:"over 1 year",other:"over {{count}} years"},almostXYears:{one:"almost 1 year",other:"almost {{count}} years"}},mbe=(t,e,r)=>{let n;const a=Abe[t];return typeof a=="string"?n=a:e===1?n=a.one:n=a.other.replace("{{count}}",e.toString()),r!=null&&r.addSuffix?r.comparison&&r.comparison>0?"in "+n:n+" ago":n};function j3(t){return(e={})=>{const r=e.width?String(e.width):t.defaultWidth;return t.formats[r]||t.formats[t.defaultWidth]}}const pbe={full:"EEEE, MMMM do, y",long:"MMMM do, y",medium:"MMM d, y",short:"MM/dd/yyyy"},gbe={full:"h:mm:ss a zzzz",long:"h:mm:ss a z",medium:"h:mm:ss a",short:"h:mm a"},xbe={full:"{{date}} 'at' {{time}}",long:"{{date}} 'at' {{time}}",medium:"{{date}}, {{time}}",short:"{{date}}, {{time}}"},vbe={date:j3({formats:pbe,defaultWidth:"full"}),time:j3({formats:gbe,defaultWidth:"full"}),dateTime:j3({formats:xbe,defaultWidth:"full"})},ybe={lastWeek:"'last' eeee 'at' p",yesterday:"'yesterday at' p",today:"'today at' p",tomorrow:"'tomorrow at' p",nextWeek:"eeee 'at' p",other:"P"},bbe=(t,e,r,n)=>ybe[t];function ly(t){return(e,r)=>{const n=r!=null&&r.context?String(r.context):"standalone";let a;if(n==="formatting"&&t.formattingValues){const o=t.defaultFormattingWidth||t.defaultWidth,l=r!=null&&r.width?String(r.width):o;a=t.formattingValues[l]||t.formattingValues[o]}else{const o=t.defaultWidth,l=r!=null&&r.width?String(r.width):t.defaultWidth;a=t.values[l]||t.values[o]}const s=t.argumentCallback?t.argumentCallback(e):e;return a[s]}}const wbe={narrow:["B","A"],abbreviated:["BC","AD"],wide:["Before Christ","Anno Domini"]},Nbe={narrow:["1","2","3","4"],abbreviated:["Q1","Q2","Q3","Q4"],wide:["1st quarter","2nd quarter","3rd quarter","4th quarter"]},Cbe={narrow:["J","F","M","A","M","J","J","A","S","O","N","D"],abbreviated:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],wide:["January","February","March","April","May","June","July","August","September","October","November","December"]},_be={narrow:["S","M","T","W","T","F","S"],short:["Su","Mo","Tu","We","Th","Fr","Sa"],abbreviated:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],wide:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"]},Ebe={narrow:{am:"a",pm:"p",midnight:"mi",noon:"n",morning:"morning",afternoon:"afternoon",evening:"evening",night:"night"},abbreviated:{am:"AM",pm:"PM",midnight:"midnight",noon:"noon",morning:"morning",afternoon:"afternoon",evening:"evening",night:"night"},wide:{am:"a.m.",pm:"p.m.",midnight:"midnight",noon:"noon",morning:"morning",afternoon:"afternoon",evening:"evening",night:"night"}},Sbe={narrow:{am:"a",pm:"p",midnight:"mi",noon:"n",morning:"in the morning",afternoon:"in the afternoon",evening:"in the evening",night:"at night"},abbreviated:{am:"AM",pm:"PM",midnight:"midnight",noon:"noon",morning:"in the morning",afternoon:"in the afternoon",evening:"in the evening",night:"at night"},wide:{am:"a.m.",pm:"p.m.",midnight:"midnight",noon:"noon",morning:"in the morning",afternoon:"in the afternoon",evening:"in the evening",night:"at night"}},Ibe=(t,e)=>{const r=Number(t),n=r%100;if(n>20||n<10)switch(n%10){case 1:return r+"st";case 2:return r+"nd";case 3:return r+"rd"}return r+"th"},jbe={ordinalNumber:Ibe,era:ly({values:wbe,defaultWidth:"wide"}),quarter:ly({values:Nbe,defaultWidth:"wide",argumentCallback:t=>t-1}),month:ly({values:Cbe,defaultWidth:"wide"}),day:ly({values:_be,defaultWidth:"wide"}),dayPeriod:ly({values:Ebe,defaultWidth:"wide",formattingValues:Sbe,defaultFormattingWidth:"wide"})};function cy(t){return(e,r={})=>{const n=r.width,a=n&&t.matchPatterns[n]||t.matchPatterns[t.defaultMatchWidth],s=e.match(a);if(!s)return null;const o=s[0],l=n&&t.parsePatterns[n]||t.parsePatterns[t.defaultParseWidth],c=Array.isArray(l)?Bbe(l,f=>f.test(o)):Pbe(l,f=>f.test(o));let u;u=t.valueCallback?t.valueCallback(c):c,u=r.valueCallback?r.valueCallback(u):u;const d=e.slice(o.length);return{value:u,rest:d}}}function Pbe(t,e){for(const r in t)if(Object.prototype.hasOwnProperty.call(t,r)&&e(t[r]))return r}function Bbe(t,e){for(let r=0;r<t.length;r++)if(e(t[r]))return r}function Tbe(t){return(e,r={})=>{const n=e.match(t.matchPattern);if(!n)return null;const a=n[0],s=e.match(t.parsePattern);if(!s)return null;let o=t.valueCallback?t.valueCallback(s[0]):s[0];o=r.valueCallback?r.valueCallback(o):o;const l=e.slice(a.length);return{value:o,rest:l}}}const kbe=/^(\d+)(th|st|nd|rd)?/i,Fbe=/\d+/i,Obe={narrow:/^(b|a)/i,abbreviated:/^(b\.?\s?c\.?|b\.?\s?c\.?\s?e\.?|a\.?\s?d\.?|c\.?\s?e\.?)/i,wide:/^(before christ|before common era|anno domini|common era)/i},Dbe={any:[/^b/i,/^(a|c)/i]},Rbe={narrow:/^[1234]/i,abbreviated:/^q[1234]/i,wide:/^[1234](th|st|nd|rd)? quarter/i},Mbe={any:[/1/i,/2/i,/3/i,/4/i]},Lbe={narrow:/^[jfmasond]/i,abbreviated:/^(jan|feb|mar|apr|may|jun|jul|aug|sep|oct|nov|dec)/i,wide:/^(january|february|march|april|may|june|july|august|september|october|november|december)/i},Ube={narrow:[/^j/i,/^f/i,/^m/i,/^a/i,/^m/i,/^j/i,/^j/i,/^a/i,/^s/i,/^o/i,/^n/i,/^d/i],any:[/^ja/i,/^f/i,/^mar/i,/^ap/i,/^may/i,/^jun/i,/^jul/i,/^au/i,/^s/i,/^o/i,/^n/i,/^d/i]},Qbe={narrow:/^[smtwf]/i,short:/^(su|mo|tu|we|th|fr|sa)/i,abbreviated:/^(sun|mon|tue|wed|thu|fri|sat)/i,wide:/^(sunday|monday|tuesday|wednesday|thursday|friday|saturday)/i},Vbe={narrow:[/^s/i,/^m/i,/^t/i,/^w/i,/^t/i,/^f/i,/^s/i],any:[/^su/i,/^m/i,/^tu/i,/^w/i,/^th/i,/^f/i,/^sa/i]},Hbe={narrow:/^(a|p|mi|n|(in the|at) (morning|afternoon|evening|night))/i,any:/^([ap]\.?\s?m\.?|midnight|noon|(in the|at) (morning|afternoon|evening|night))/i},$be={any:{am:/^a/i,pm:/^p/i,midnight:/^mi/i,noon:/^no/i,morning:/morning/i,afternoon:/afternoon/i,evening:/evening/i,night:/night/i}},Gbe={ordinalNumber:Tbe({matchPattern:kbe,parsePattern:Fbe,valueCallback:t=>parseInt(t,10)}),era:cy({matchPatterns:Obe,defaultMatchWidth:"wide",parsePatterns:Dbe,defaultParseWidth:"any"}),quarter:cy({matchPatterns:Rbe,defaultMatchWidth:"wide",parsePatterns:Mbe,defaultParseWidth:"any",valueCallback:t=>t+1}),month:cy({matchPatterns:Lbe,defaultMatchWidth:"wide",parsePatterns:Ube,defaultParseWidth:"any"}),day:cy({matchPatterns:Qbe,defaultMatchWidth:"wide",parsePatterns:Vbe,defaultParseWidth:"any"}),dayPeriod:cy({matchPatterns:Hbe,defaultMatchWidth:"any",parsePatterns:$be,defaultParseWidth:"any"})},Fee={code:"en-US",formatDistance:mbe,formatLong:vbe,formatRelative:bbe,localize:jbe,match:Gbe,options:{weekStartsOn:0,firstWeekContainsDate:1}};function Kbe(t,e){const r=fi(t,e==null?void 0:e.in);return ube(r,hbe(r))+1}function Oee(t,e){const r=fi(t,e==null?void 0:e.in),n=+Rv(r)-+dbe(r);return Math.round(n/Tee)+1}function B6(t,e){var d,f,A,h;const r=fi(t,e==null?void 0:e.in),n=r.getFullYear(),a=m1(),s=(e==null?void 0:e.firstWeekContainsDate)??((f=(d=e==null?void 0:e.locale)==null?void 0:d.options)==null?void 0:f.firstWeekContainsDate)??a.firstWeekContainsDate??((h=(A=a.locale)==null?void 0:A.options)==null?void 0:h.firstWeekContainsDate)??1,o=lo((e==null?void 0:e.in)||t,0);o.setFullYear(n+1,0,s),o.setHours(0,0,0,0);const l=Nm(o,e),c=lo((e==null?void 0:e.in)||t,0);c.setFullYear(n,0,s),c.setHours(0,0,0,0);const u=Nm(c,e);return+r>=+l?n+1:+r>=+u?n:n-1}function qbe(t,e){var l,c,u,d;const r=m1(),n=(e==null?void 0:e.firstWeekContainsDate)??((c=(l=e==null?void 0:e.locale)==null?void 0:l.options)==null?void 0:c.firstWeekContainsDate)??r.firstWeekContainsDate??((d=(u=r.locale)==null?void 0:u.options)==null?void 0:d.firstWeekContainsDate)??1,a=B6(t,e),s=lo((e==null?void 0:e.in)||t,0);return s.setFullYear(a,0,n),s.setHours(0,0,0,0),Nm(s,e)}function Dee(t,e){const r=fi(t,e==null?void 0:e.in),n=+Nm(r,e)-+qbe(r,e);return Math.round(n/Tee)+1}function Xa(t,e){const r=t<0?"-":"",n=Math.abs(t).toString().padStart(e,"0");return r+n}const c0={y(t,e){const r=t.getFullYear(),n=r>0?r:1-r;return Xa(e==="yy"?n%100:n,e.length)},M(t,e){const r=t.getMonth();return e==="M"?String(r+1):Xa(r+1,2)},d(t,e){return Xa(t.getDate(),e.length)},a(t,e){const r=t.getHours()/12>=1?"pm":"am";switch(e){case"a":case"aa":return r.toUpperCase();case"aaa":return r;case"aaaaa":return r[0];case"aaaa":default:return r==="am"?"a.m.":"p.m."}},h(t,e){return Xa(t.getHours()%12||12,e.length)},H(t,e){return Xa(t.getHours(),e.length)},m(t,e){return Xa(t.getMinutes(),e.length)},s(t,e){return Xa(t.getSeconds(),e.length)},S(t,e){const r=e.length,n=t.getMilliseconds(),a=Math.trunc(n*Math.pow(10,r-3));return Xa(a,e.length)}},tx={midnight:"midnight",noon:"noon",morning:"morning",afternoon:"afternoon",evening:"evening",night:"night"},E9={G:function(t,e,r){const n=t.getFullYear()>0?1:0;switch(e){case"G":case"GG":case"GGG":return r.era(n,{width:"abbreviated"});case"GGGGG":return r.era(n,{width:"narrow"});case"GGGG":default:return r.era(n,{width:"wide"})}},y:function(t,e,r){if(e==="yo"){const n=t.getFullYear(),a=n>0?n:1-n;return r.ordinalNumber(a,{unit:"year"})}return c0.y(t,e)},Y:function(t,e,r,n){const a=B6(t,n),s=a>0?a:1-a;if(e==="YY"){const o=s%100;return Xa(o,2)}return e==="Yo"?r.ordinalNumber(s,{unit:"year"}):Xa(s,e.length)},R:function(t,e){const r=kee(t);return Xa(r,e.length)},u:function(t,e){const r=t.getFullYear();return Xa(r,e.length)},Q:function(t,e,r){const n=Math.ceil((t.getMonth()+1)/3);switch(e){case"Q":return String(n);case"QQ":return Xa(n,2);case"Qo":return r.ordinalNumber(n,{unit:"quarter"});case"QQQ":return r.quarter(n,{width:"abbreviated",context:"formatting"});case"QQQQQ":return r.quarter(n,{width:"narrow",context:"formatting"});case"QQQQ":default:return r.quarter(n,{width:"wide",context:"formatting"})}},q:function(t,e,r){const n=Math.ceil((t.getMonth()+1)/3);switch(e){case"q":return String(n);case"qq":return Xa(n,2);case"qo":return r.ordinalNumber(n,{unit:"quarter"});case"qqq":return r.quarter(n,{width:"abbreviated",context:"standalone"});case"qqqqq":return r.quarter(n,{width:"narrow",context:"standalone"});case"qqqq":default:return r.quarter(n,{width:"wide",context:"standalone"})}},M:function(t,e,r){const n=t.getMonth();switch(e){case"M":case"MM":return c0.M(t,e);case"Mo":return r.ordinalNumber(n+1,{unit:"month"});case"MMM":return r.month(n,{width:"abbreviated",context:"formatting"});case"MMMMM":return r.month(n,{width:"narrow",context:"formatting"});case"MMMM":default:return r.month(n,{width:"wide",context:"formatting"})}},L:function(t,e,r){const n=t.getMonth();switch(e){case"L":return String(n+1);case"LL":return Xa(n+1,2);case"Lo":return r.ordinalNumber(n+1,{unit:"month"});case"LLL":return r.month(n,{width:"abbreviated",context:"standalone"});case"LLLLL":return r.month(n,{width:"narrow",context:"standalone"});case"LLLL":default:return r.month(n,{width:"wide",context:"standalone"})}},w:function(t,e,r,n){const a=Dee(t,n);return e==="wo"?r.ordinalNumber(a,{unit:"week"}):Xa(a,e.length)},I:function(t,e,r){const n=Oee(t);return e==="Io"?r.ordinalNumber(n,{unit:"week"}):Xa(n,e.length)},d:function(t,e,r){return e==="do"?r.ordinalNumber(t.getDate(),{unit:"date"}):c0.d(t,e)},D:function(t,e,r){const n=Kbe(t);return e==="Do"?r.ordinalNumber(n,{unit:"dayOfYear"}):Xa(n,e.length)},E:function(t,e,r){const n=t.getDay();switch(e){case"E":case"EE":case"EEE":return r.day(n,{width:"abbreviated",context:"formatting"});case"EEEEE":return r.day(n,{width:"narrow",context:"formatting"});case"EEEEEE":return r.day(n,{width:"short",context:"formatting"});case"EEEE":default:return r.day(n,{width:"wide",context:"formatting"})}},e:function(t,e,r,n){const a=t.getDay(),s=(a-n.weekStartsOn+8)%7||7;switch(e){case"e":return String(s);case"ee":return Xa(s,2);case"eo":return r.ordinalNumber(s,{unit:"day"});case"eee":return r.day(a,{width:"abbreviated",context:"formatting"});case"eeeee":return r.day(a,{width:"narrow",context:"formatting"});case"eeeeee":return r.day(a,{width:"short",context:"formatting"});case"eeee":default:return r.day(a,{width:"wide",context:"formatting"})}},c:function(t,e,r,n){const a=t.getDay(),s=(a-n.weekStartsOn+8)%7||7;switch(e){case"c":return String(s);case"cc":return Xa(s,e.length);case"co":return r.ordinalNumber(s,{unit:"day"});case"ccc":return r.day(a,{width:"abbreviated",context:"standalone"});case"ccccc":return r.day(a,{width:"narrow",context:"standalone"});case"cccccc":return r.day(a,{width:"short",context:"standalone"});case"cccc":default:return r.day(a,{width:"wide",context:"standalone"})}},i:function(t,e,r){const n=t.getDay(),a=n===0?7:n;switch(e){case"i":return String(a);case"ii":return Xa(a,e.length);case"io":return r.ordinalNumber(a,{unit:"day"});case"iii":return r.day(n,{width:"abbreviated",context:"formatting"});case"iiiii":return r.day(n,{width:"narrow",context:"formatting"});case"iiiiii":return r.day(n,{width:"short",context:"formatting"});case"iiii":default:return r.day(n,{width:"wide",context:"formatting"})}},a:function(t,e,r){const a=t.getHours()/12>=1?"pm":"am";switch(e){case"a":case"aa":return r.dayPeriod(a,{width:"abbreviated",context:"formatting"});case"aaa":return r.dayPeriod(a,{width:"abbreviated",context:"formatting"}).toLowerCase();case"aaaaa":return r.dayPeriod(a,{width:"narrow",context:"formatting"});case"aaaa":default:return r.dayPeriod(a,{width:"wide",context:"formatting"})}},b:function(t,e,r){const n=t.getHours();let a;switch(n===12?a=tx.noon:n===0?a=tx.midnight:a=n/12>=1?"pm":"am",e){case"b":case"bb":return r.dayPeriod(a,{width:"abbreviated",context:"formatting"});case"bbb":return r.dayPeriod(a,{width:"abbreviated",context:"formatting"}).toLowerCase();case"bbbbb":return r.dayPeriod(a,{width:"narrow",context:"formatting"});case"bbbb":default:return r.dayPeriod(a,{width:"wide",context:"formatting"})}},B:function(t,e,r){const n=t.getHours();let a;switch(n>=17?a=tx.evening:n>=12?a=tx.afternoon:n>=4?a=tx.morning:a=tx.night,e){case"B":case"BB":case"BBB":return r.dayPeriod(a,{width:"abbreviated",context:"formatting"});case"BBBBB":return r.dayPeriod(a,{width:"narrow",context:"formatting"});case"BBBB":default:return r.dayPeriod(a,{width:"wide",context:"formatting"})}},h:function(t,e,r){if(e==="ho"){let n=t.getHours()%12;return n===0&&(n=12),r.ordinalNumber(n,{unit:"hour"})}return c0.h(t,e)},H:function(t,e,r){return e==="Ho"?r.ordinalNumber(t.getHours(),{unit:"hour"}):c0.H(t,e)},K:function(t,e,r){const n=t.getHours()%12;return e==="Ko"?r.ordinalNumber(n,{unit:"hour"}):Xa(n,e.length)},k:function(t,e,r){let n=t.getHours();return n===0&&(n=24),e==="ko"?r.ordinalNumber(n,{unit:"hour"}):Xa(n,e.length)},m:function(t,e,r){return e==="mo"?r.ordinalNumber(t.getMinutes(),{unit:"minute"}):c0.m(t,e)},s:function(t,e,r){return e==="so"?r.ordinalNumber(t.getSeconds(),{unit:"second"}):c0.s(t,e)},S:function(t,e){return c0.S(t,e)},X:function(t,e,r){const n=t.getTimezoneOffset();if(n===0)return"Z";switch(e){case"X":return I9(n);case"XXXX":case"XX":return op(n);case"XXXXX":case"XXX":default:return op(n,":")}},x:function(t,e,r){const n=t.getTimezoneOffset();switch(e){case"x":return I9(n);case"xxxx":case"xx":return op(n);case"xxxxx":case"xxx":default:return op(n,":")}},O:function(t,e,r){const n=t.getTimezoneOffset();switch(e){case"O":case"OO":case"OOO":return"GMT"+S9(n,":");case"OOOO":default:return"GMT"+op(n,":")}},z:function(t,e,r){const n=t.getTimezoneOffset();switch(e){case"z":case"zz":case"zzz":return"GMT"+S9(n,":");case"zzzz":default:return"GMT"+op(n,":")}},t:function(t,e,r){const n=Math.trunc(+t/1e3);return Xa(n,e.length)},T:function(t,e,r){return Xa(+t,e.length)}};function S9(t,e=""){const r=t>0?"-":"+",n=Math.abs(t),a=Math.trunc(n/60),s=n%60;return s===0?r+String(a):r+String(a)+e+Xa(s,2)}function I9(t,e){return t%60===0?(t>0?"-":"+")+Xa(Math.abs(t)/60,2):op(t,e)}function op(t,e=""){const r=t>0?"-":"+",n=Math.abs(t),a=Xa(Math.trunc(n/60),2),s=Xa(n%60,2);return r+a+e+s}const j9=(t,e)=>{switch(t){case"P":return e.date({width:"short"});case"PP":return e.date({width:"medium"});case"PPP":return e.date({width:"long"});case"PPPP":default:return e.date({width:"full"})}},Ree=(t,e)=>{switch(t){case"p":return e.time({width:"short"});case"pp":return e.time({width:"medium"});case"ppp":return e.time({width:"long"});case"pppp":default:return e.time({width:"full"})}},zbe=(t,e)=>{const r=t.match(/(P+)(p+)?/)||[],n=r[1],a=r[2];if(!a)return j9(t,e);let s;switch(n){case"P":s=e.dateTime({width:"short"});break;case"PP":s=e.dateTime({width:"medium"});break;case"PPP":s=e.dateTime({width:"long"});break;case"PPPP":default:s=e.dateTime({width:"full"});break}return s.replace("{{date}}",j9(n,e)).replace("{{time}}",Ree(a,e))},lk={p:Ree,P:zbe},Wbe=/^D+$/,Xbe=/^Y+$/,Ybe=["D","DD","YY","YYYY"];function Mee(t){return Wbe.test(t)}function Lee(t){return Xbe.test(t)}function ck(t,e,r){const n=Jbe(t,e,r);if(console.warn(n),Ybe.includes(t))throw new RangeError(n)}function Jbe(t,e,r){const n=t[0]==="Y"?"years":"days of the month";return`Use \`${t.toLowerCase()}\` instead of \`${t}\` (in \`${e}\`) for formatting ${n} to the input \`${r}\`; see: https://github.com/date-fns/date-fns/blob/master/docs/unicodeTokens.md`}const Zbe=/[yYQqMLwIdDecihHKkms]o|(\w)\1*|''|'(''|[^'])+('|$)|./g,e2e=/P+p+|P+|p+|''|'(''|[^'])+('|$)|./g,t2e=/^'([^]*?)'?$/,r2e=/''/g,n2e=/[a-zA-Z]/;function Rr(t,e,r){var d,f,A,h;const n=m1(),a=n.locale??Fee,s=n.firstWeekContainsDate??((f=(d=n.locale)==null?void 0:d.options)==null?void 0:f.firstWeekContainsDate)??1,o=n.weekStartsOn??((h=(A=n.locale)==null?void 0:A.options)==null?void 0:h.weekStartsOn)??0,l=fi(t,r==null?void 0:r.in);if(!P6(l))throw new RangeError("Invalid time value");let c=e.match(e2e).map(m=>{const p=m[0];if(p==="p"||p==="P"){const x=lk[p];return x(m,a.formatLong)}return m}).join("").match(Zbe).map(m=>{if(m==="''")return{isToken:!1,value:"'"};const p=m[0];if(p==="'")return{isToken:!1,value:a2e(m)};if(E9[p])return{isToken:!0,value:m};if(p.match(n2e))throw new RangeError("Format string contains an unescaped latin alphabet character `"+p+"`");return{isToken:!1,value:m}});a.localize.preprocessor&&(c=a.localize.preprocessor(l,c));const u={firstWeekContainsDate:s,weekStartsOn:o,locale:a};return c.map(m=>{if(!m.isToken)return m.value;const p=m.value;(Lee(p)||Mee(p))&&ck(p,e,String(t));const x=E9[p[0]];return x(l,p,a.localize,u)}).join("")}function a2e(t){const e=t.match(t2e);return e?e[1].replace(r2e,"'"):t}function s2e(){return Object.assign({},m1())}function i2e(t,e){const r=fi(t,e==null?void 0:e.in).getDay();return r===0?7:r}function o2e(t,e){const r=l2e(e)?new e(0):lo(e,0);return r.setFullYear(t.getFullYear(),t.getMonth(),t.getDate()),r.setHours(t.getHours(),t.getMinutes(),t.getSeconds(),t.getMilliseconds()),r}function l2e(t){var e;return typeof t=="function"&&((e=t.prototype)==null?void 0:e.constructor)===t}const c2e=10;class Uee{constructor(){Cr(this,"subPriority",0)}validate(e,r){return!0}}class u2e extends Uee{constructor(e,r,n,a,s){super(),this.value=e,this.validateValue=r,this.setValue=n,this.priority=a,s&&(this.subPriority=s)}validate(e,r){return this.validateValue(e,this.value,r)}set(e,r,n){return this.setValue(e,r,this.value,n)}}class d2e extends Uee{constructor(r,n){super();Cr(this,"priority",c2e);Cr(this,"subPriority",-1);this.context=r||(a=>lo(n,a))}set(r,n){return n.timestampIsSet?r:lo(r,o2e(r,this.context))}}let Ra=class{run(e,r,n,a){const s=this.parse(e,r,n,a);return s?{setter:new u2e(s.value,this.validate,this.set,this.priority,this.subPriority),rest:s.rest}:null}validate(e,r,n){return!0}};class f2e extends Ra{constructor(){super(...arguments);Cr(this,"priority",140);Cr(this,"incompatibleTokens",["R","u","t","T"])}parse(r,n,a){switch(n){case"G":case"GG":case"GGG":return a.era(r,{width:"abbreviated"})||a.era(r,{width:"narrow"});case"GGGGG":return a.era(r,{width:"narrow"});case"GGGG":default:return a.era(r,{width:"wide"})||a.era(r,{width:"abbreviated"})||a.era(r,{width:"narrow"})}}set(r,n,a){return n.era=a,r.setFullYear(a,0,1),r.setHours(0,0,0,0),r}}const $i={month:/^(1[0-2]|0?\d)/,date:/^(3[0-1]|[0-2]?\d)/,dayOfYear:/^(36[0-6]|3[0-5]\d|[0-2]?\d?\d)/,week:/^(5[0-3]|[0-4]?\d)/,hour23h:/^(2[0-3]|[0-1]?\d)/,hour24h:/^(2[0-4]|[0-1]?\d)/,hour11h:/^(1[0-1]|0?\d)/,hour12h:/^(1[0-2]|0?\d)/,minute:/^[0-5]?\d/,second:/^[0-5]?\d/,singleDigit:/^\d/,twoDigits:/^\d{1,2}/,threeDigits:/^\d{1,3}/,fourDigits:/^\d{1,4}/,anyDigitsSigned:/^-?\d+/,singleDigitSigned:/^-?\d/,twoDigitsSigned:/^-?\d{1,2}/,threeDigitsSigned:/^-?\d{1,3}/,fourDigitsSigned:/^-?\d{1,4}/},Kf={basicOptionalMinutes:/^([+-])(\d{2})(\d{2})?|Z/,basic:/^([+-])(\d{2})(\d{2})|Z/,basicOptionalSeconds:/^([+-])(\d{2})(\d{2})((\d{2}))?|Z/,extended:/^([+-])(\d{2}):(\d{2})|Z/,extendedOptionalSeconds:/^([+-])(\d{2}):(\d{2})(:(\d{2}))?|Z/};function Gi(t,e){return t&&{value:e(t.value),rest:t.rest}}function ii(t,e){const r=e.match(t);return r?{value:parseInt(r[0],10),rest:e.slice(r[0].length)}:null}function qf(t,e){const r=e.match(t);if(!r)return null;if(r[0]==="Z")return{value:0,rest:e.slice(1)};const n=r[1]==="+"?1:-1,a=r[2]?parseInt(r[2],10):0,s=r[3]?parseInt(r[3],10):0,o=r[5]?parseInt(r[5],10):0;return{value:n*(a*sbe+s*abe+o*ibe),rest:e.slice(r[0].length)}}function Qee(t){return ii($i.anyDigitsSigned,t)}function Si(t,e){switch(t){case 1:return ii($i.singleDigit,e);case 2:return ii($i.twoDigits,e);case 3:return ii($i.threeDigits,e);case 4:return ii($i.fourDigits,e);default:return ii(new RegExp("^\\d{1,"+t+"}"),e)}}function vS(t,e){switch(t){case 1:return ii($i.singleDigitSigned,e);case 2:return ii($i.twoDigitsSigned,e);case 3:return ii($i.threeDigitsSigned,e);case 4:return ii($i.fourDigitsSigned,e);default:return ii(new RegExp("^-?\\d{1,"+t+"}"),e)}}function T6(t){switch(t){case"morning":return 4;case"evening":return 17;case"pm":case"noon":case"afternoon":return 12;case"am":case"midnight":case"night":default:return 0}}function Vee(t,e){const r=e>0,n=r?e:1-e;let a;if(n<=50)a=t||100;else{const s=n+50,o=Math.trunc(s/100)*100,l=t>=s%100;a=t+o-(l?100:0)}return r?a:1-a}function Hee(t){return t%400===0||t%4===0&&t%100!==0}class h2e extends Ra{constructor(){super(...arguments);Cr(this,"priority",130);Cr(this,"incompatibleTokens",["Y","R","u","w","I","i","e","c","t","T"])}parse(r,n,a){const s=o=>({year:o,isTwoDigitYear:n==="yy"});switch(n){case"y":return Gi(Si(4,r),s);case"yo":return Gi(a.ordinalNumber(r,{unit:"year"}),s);default:return Gi(Si(n.length,r),s)}}validate(r,n){return n.isTwoDigitYear||n.year>0}set(r,n,a){const s=r.getFullYear();if(a.isTwoDigitYear){const l=Vee(a.year,s);return r.setFullYear(l,0,1),r.setHours(0,0,0,0),r}const o=!("era"in n)||n.era===1?a.year:1-a.year;return r.setFullYear(o,0,1),r.setHours(0,0,0,0),r}}class A2e extends Ra{constructor(){super(...arguments);Cr(this,"priority",130);Cr(this,"incompatibleTokens",["y","R","u","Q","q","M","L","I","d","D","i","t","T"])}parse(r,n,a){const s=o=>({year:o,isTwoDigitYear:n==="YY"});switch(n){case"Y":return Gi(Si(4,r),s);case"Yo":return Gi(a.ordinalNumber(r,{unit:"year"}),s);default:return Gi(Si(n.length,r),s)}}validate(r,n){return n.isTwoDigitYear||n.year>0}set(r,n,a,s){const o=B6(r,s);if(a.isTwoDigitYear){const c=Vee(a.year,o);return r.setFullYear(c,0,s.firstWeekContainsDate),r.setHours(0,0,0,0),Nm(r,s)}const l=!("era"in n)||n.era===1?a.year:1-a.year;return r.setFullYear(l,0,s.firstWeekContainsDate),r.setHours(0,0,0,0),Nm(r,s)}}class m2e extends Ra{constructor(){super(...arguments);Cr(this,"priority",130);Cr(this,"incompatibleTokens",["G","y","Y","u","Q","q","M","L","w","d","D","e","c","t","T"])}parse(r,n){return vS(n==="R"?4:n.length,r)}set(r,n,a){const s=lo(r,0);return s.setFullYear(a,0,4),s.setHours(0,0,0,0),Rv(s)}}class p2e extends Ra{constructor(){super(...arguments);Cr(this,"priority",130);Cr(this,"incompatibleTokens",["G","y","Y","R","w","I","i","e","c","t","T"])}parse(r,n){return vS(n==="u"?4:n.length,r)}set(r,n,a){return r.setFullYear(a,0,1),r.setHours(0,0,0,0),r}}class g2e extends Ra{constructor(){super(...arguments);Cr(this,"priority",120);Cr(this,"incompatibleTokens",["Y","R","q","M","L","w","I","d","D","i","e","c","t","T"])}parse(r,n,a){switch(n){case"Q":case"QQ":return Si(n.length,r);case"Qo":return a.ordinalNumber(r,{unit:"quarter"});case"QQQ":return a.quarter(r,{width:"abbreviated",context:"formatting"})||a.quarter(r,{width:"narrow",context:"formatting"});case"QQQQQ":return a.quarter(r,{width:"narrow",context:"formatting"});case"QQQQ":default:return a.quarter(r,{width:"wide",context:"formatting"})||a.quarter(r,{width:"abbreviated",context:"formatting"})||a.quarter(r,{width:"narrow",context:"formatting"})}}validate(r,n){return n>=1&&n<=4}set(r,n,a){return r.setMonth((a-1)*3,1),r.setHours(0,0,0,0),r}}class x2e extends Ra{constructor(){super(...arguments);Cr(this,"priority",120);Cr(this,"incompatibleTokens",["Y","R","Q","M","L","w","I","d","D","i","e","c","t","T"])}parse(r,n,a){switch(n){case"q":case"qq":return Si(n.length,r);case"qo":return a.ordinalNumber(r,{unit:"quarter"});case"qqq":return a.quarter(r,{width:"abbreviated",context:"standalone"})||a.quarter(r,{width:"narrow",context:"standalone"});case"qqqqq":return a.quarter(r,{width:"narrow",context:"standalone"});case"qqqq":default:return a.quarter(r,{width:"wide",context:"standalone"})||a.quarter(r,{width:"abbreviated",context:"standalone"})||a.quarter(r,{width:"narrow",context:"standalone"})}}validate(r,n){return n>=1&&n<=4}set(r,n,a){return r.setMonth((a-1)*3,1),r.setHours(0,0,0,0),r}}class v2e extends Ra{constructor(){super(...arguments);Cr(this,"incompatibleTokens",["Y","R","q","Q","L","w","I","D","i","e","c","t","T"]);Cr(this,"priority",110)}parse(r,n,a){const s=o=>o-1;switch(n){case"M":return Gi(ii($i.month,r),s);case"MM":return Gi(Si(2,r),s);case"Mo":return Gi(a.ordinalNumber(r,{unit:"month"}),s);case"MMM":return a.month(r,{width:"abbreviated",context:"formatting"})||a.month(r,{width:"narrow",context:"formatting"});case"MMMMM":return a.month(r,{width:"narrow",context:"formatting"});case"MMMM":default:return a.month(r,{width:"wide",context:"formatting"})||a.month(r,{width:"abbreviated",context:"formatting"})||a.month(r,{width:"narrow",context:"formatting"})}}validate(r,n){return n>=0&&n<=11}set(r,n,a){return r.setMonth(a,1),r.setHours(0,0,0,0),r}}class y2e extends Ra{constructor(){super(...arguments);Cr(this,"priority",110);Cr(this,"incompatibleTokens",["Y","R","q","Q","M","w","I","D","i","e","c","t","T"])}parse(r,n,a){const s=o=>o-1;switch(n){case"L":return Gi(ii($i.month,r),s);case"LL":return Gi(Si(2,r),s);case"Lo":return Gi(a.ordinalNumber(r,{unit:"month"}),s);case"LLL":return a.month(r,{width:"abbreviated",context:"standalone"})||a.month(r,{width:"narrow",context:"standalone"});case"LLLLL":return a.month(r,{width:"narrow",context:"standalone"});case"LLLL":default:return a.month(r,{width:"wide",context:"standalone"})||a.month(r,{width:"abbreviated",context:"standalone"})||a.month(r,{width:"narrow",context:"standalone"})}}validate(r,n){return n>=0&&n<=11}set(r,n,a){return r.setMonth(a,1),r.setHours(0,0,0,0),r}}function b2e(t,e,r){const n=fi(t,r==null?void 0:r.in),a=Dee(n,r)-e;return n.setDate(n.getDate()-a*7),fi(n,r==null?void 0:r.in)}class w2e extends Ra{constructor(){super(...arguments);Cr(this,"priority",100);Cr(this,"incompatibleTokens",["y","R","u","q","Q","M","L","I","d","D","i","t","T"])}parse(r,n,a){switch(n){case"w":return ii($i.week,r);case"wo":return a.ordinalNumber(r,{unit:"week"});default:return Si(n.length,r)}}validate(r,n){return n>=1&&n<=53}set(r,n,a,s){return Nm(b2e(r,a,s),s)}}function N2e(t,e,r){const n=fi(t,r==null?void 0:r.in),a=Oee(n,r)-e;return n.setDate(n.getDate()-a*7),n}class C2e extends Ra{constructor(){super(...arguments);Cr(this,"priority",100);Cr(this,"incompatibleTokens",["y","Y","u","q","Q","M","L","w","d","D","e","c","t","T"])}parse(r,n,a){switch(n){case"I":return ii($i.week,r);case"Io":return a.ordinalNumber(r,{unit:"week"});default:return Si(n.length,r)}}validate(r,n){return n>=1&&n<=53}set(r,n,a){return Rv(N2e(r,a))}}const _2e=[31,28,31,30,31,30,31,31,30,31,30,31],E2e=[31,29,31,30,31,30,31,31,30,31,30,31];class S2e extends Ra{constructor(){super(...arguments);Cr(this,"priority",90);Cr(this,"subPriority",1);Cr(this,"incompatibleTokens",["Y","R","q","Q","w","I","D","i","e","c","t","T"])}parse(r,n,a){switch(n){case"d":return ii($i.date,r);case"do":return a.ordinalNumber(r,{unit:"date"});default:return Si(n.length,r)}}validate(r,n){const a=r.getFullYear(),s=Hee(a),o=r.getMonth();return s?n>=1&&n<=E2e[o]:n>=1&&n<=_2e[o]}set(r,n,a){return r.setDate(a),r.setHours(0,0,0,0),r}}class I2e extends Ra{constructor(){super(...arguments);Cr(this,"priority",90);Cr(this,"subpriority",1);Cr(this,"incompatibleTokens",["Y","R","q","Q","M","L","w","I","d","E","i","e","c","t","T"])}parse(r,n,a){switch(n){case"D":case"DD":return ii($i.dayOfYear,r);case"Do":return a.ordinalNumber(r,{unit:"date"});default:return Si(n.length,r)}}validate(r,n){const a=r.getFullYear();return Hee(a)?n>=1&&n<=366:n>=1&&n<=365}set(r,n,a){return r.setMonth(0,a),r.setHours(0,0,0,0),r}}function k6(t,e,r){var f,A,h,m;const n=m1(),a=(r==null?void 0:r.weekStartsOn)??((A=(f=r==null?void 0:r.locale)==null?void 0:f.options)==null?void 0:A.weekStartsOn)??n.weekStartsOn??((m=(h=n.locale)==null?void 0:h.options)==null?void 0:m.weekStartsOn)??0,s=fi(t,r==null?void 0:r.in),o=s.getDay(),c=(e%7+7)%7,u=7-a,d=e<0||e>6?e-(o+u)%7:(c+u)%7-(o+u)%7;return j6(s,d,r)}class j2e extends Ra{constructor(){super(...arguments);Cr(this,"priority",90);Cr(this,"incompatibleTokens",["D","i","e","c","t","T"])}parse(r,n,a){switch(n){case"E":case"EE":case"EEE":return a.day(r,{width:"abbreviated",context:"formatting"})||a.day(r,{width:"short",context:"formatting"})||a.day(r,{width:"narrow",context:"formatting"});case"EEEEE":return a.day(r,{width:"narrow",context:"formatting"});case"EEEEEE":return a.day(r,{width:"short",context:"formatting"})||a.day(r,{width:"narrow",context:"formatting"});case"EEEE":default:return a.day(r,{width:"wide",context:"formatting"})||a.day(r,{width:"abbreviated",context:"formatting"})||a.day(r,{width:"short",context:"formatting"})||a.day(r,{width:"narrow",context:"formatting"})}}validate(r,n){return n>=0&&n<=6}set(r,n,a,s){return r=k6(r,a,s),r.setHours(0,0,0,0),r}}class P2e extends Ra{constructor(){super(...arguments);Cr(this,"priority",90);Cr(this,"incompatibleTokens",["y","R","u","q","Q","M","L","I","d","D","E","i","c","t","T"])}parse(r,n,a,s){const o=l=>{const c=Math.floor((l-1)/7)*7;return(l+s.weekStartsOn+6)%7+c};switch(n){case"e":case"ee":return Gi(Si(n.length,r),o);case"eo":return Gi(a.ordinalNumber(r,{unit:"day"}),o);case"eee":return a.day(r,{width:"abbreviated",context:"formatting"})||a.day(r,{width:"short",context:"formatting"})||a.day(r,{width:"narrow",context:"formatting"});case"eeeee":return a.day(r,{width:"narrow",context:"formatting"});case"eeeeee":return a.day(r,{width:"short",context:"formatting"})||a.day(r,{width:"narrow",context:"formatting"});case"eeee":default:return a.day(r,{width:"wide",context:"formatting"})||a.day(r,{width:"abbreviated",context:"formatting"})||a.day(r,{width:"short",context:"formatting"})||a.day(r,{width:"narrow",context:"formatting"})}}validate(r,n){return n>=0&&n<=6}set(r,n,a,s){return r=k6(r,a,s),r.setHours(0,0,0,0),r}}class B2e extends Ra{constructor(){super(...arguments);Cr(this,"priority",90);Cr(this,"incompatibleTokens",["y","R","u","q","Q","M","L","I","d","D","E","i","e","t","T"])}parse(r,n,a,s){const o=l=>{const c=Math.floor((l-1)/7)*7;return(l+s.weekStartsOn+6)%7+c};switch(n){case"c":case"cc":return Gi(Si(n.length,r),o);case"co":return Gi(a.ordinalNumber(r,{unit:"day"}),o);case"ccc":return a.day(r,{width:"abbreviated",context:"standalone"})||a.day(r,{width:"short",context:"standalone"})||a.day(r,{width:"narrow",context:"standalone"});case"ccccc":return a.day(r,{width:"narrow",context:"standalone"});case"cccccc":return a.day(r,{width:"short",context:"standalone"})||a.day(r,{width:"narrow",context:"standalone"});case"cccc":default:return a.day(r,{width:"wide",context:"standalone"})||a.day(r,{width:"abbreviated",context:"standalone"})||a.day(r,{width:"short",context:"standalone"})||a.day(r,{width:"narrow",context:"standalone"})}}validate(r,n){return n>=0&&n<=6}set(r,n,a,s){return r=k6(r,a,s),r.setHours(0,0,0,0),r}}function T2e(t,e,r){const n=fi(t,r==null?void 0:r.in),a=i2e(n,r),s=e-a;return j6(n,s,r)}class k2e extends Ra{constructor(){super(...arguments);Cr(this,"priority",90);Cr(this,"incompatibleTokens",["y","Y","u","q","Q","M","L","w","d","D","E","e","c","t","T"])}parse(r,n,a){const s=o=>o===0?7:o;switch(n){case"i":case"ii":return Si(n.length,r);case"io":return a.ordinalNumber(r,{unit:"day"});case"iii":return Gi(a.day(r,{width:"abbreviated",context:"formatting"})||a.day(r,{width:"short",context:"formatting"})||a.day(r,{width:"narrow",context:"formatting"}),s);case"iiiii":return Gi(a.day(r,{width:"narrow",context:"formatting"}),s);case"iiiiii":return Gi(a.day(r,{width:"short",context:"formatting"})||a.day(r,{width:"narrow",context:"formatting"}),s);case"iiii":default:return Gi(a.day(r,{width:"wide",context:"formatting"})||a.day(r,{width:"abbreviated",context:"formatting"})||a.day(r,{width:"short",context:"formatting"})||a.day(r,{width:"narrow",context:"formatting"}),s)}}validate(r,n){return n>=1&&n<=7}set(r,n,a){return r=T2e(r,a),r.setHours(0,0,0,0),r}}class F2e extends Ra{constructor(){super(...arguments);Cr(this,"priority",80);Cr(this,"incompatibleTokens",["b","B","H","k","t","T"])}parse(r,n,a){switch(n){case"a":case"aa":case"aaa":return a.dayPeriod(r,{width:"abbreviated",context:"formatting"})||a.dayPeriod(r,{width:"narrow",context:"formatting"});case"aaaaa":return a.dayPeriod(r,{width:"narrow",context:"formatting"});case"aaaa":default:return a.dayPeriod(r,{width:"wide",context:"formatting"})||a.dayPeriod(r,{width:"abbreviated",context:"formatting"})||a.dayPeriod(r,{width:"narrow",context:"formatting"})}}set(r,n,a){return r.setHours(T6(a),0,0,0),r}}class O2e extends Ra{constructor(){super(...arguments);Cr(this,"priority",80);Cr(this,"incompatibleTokens",["a","B","H","k","t","T"])}parse(r,n,a){switch(n){case"b":case"bb":case"bbb":return a.dayPeriod(r,{width:"abbreviated",context:"formatting"})||a.dayPeriod(r,{width:"narrow",context:"formatting"});case"bbbbb":return a.dayPeriod(r,{width:"narrow",context:"formatting"});case"bbbb":default:return a.dayPeriod(r,{width:"wide",context:"formatting"})||a.dayPeriod(r,{width:"abbreviated",context:"formatting"})||a.dayPeriod(r,{width:"narrow",context:"formatting"})}}set(r,n,a){return r.setHours(T6(a),0,0,0),r}}class D2e extends Ra{constructor(){super(...arguments);Cr(this,"priority",80);Cr(this,"incompatibleTokens",["a","b","t","T"])}parse(r,n,a){switch(n){case"B":case"BB":case"BBB":return a.dayPeriod(r,{width:"abbreviated",context:"formatting"})||a.dayPeriod(r,{width:"narrow",context:"formatting"});case"BBBBB":return a.dayPeriod(r,{width:"narrow",context:"formatting"});case"BBBB":default:return a.dayPeriod(r,{width:"wide",context:"formatting"})||a.dayPeriod(r,{width:"abbreviated",context:"formatting"})||a.dayPeriod(r,{width:"narrow",context:"formatting"})}}set(r,n,a){return r.setHours(T6(a),0,0,0),r}}class R2e extends Ra{constructor(){super(...arguments);Cr(this,"priority",70);Cr(this,"incompatibleTokens",["H","K","k","t","T"])}parse(r,n,a){switch(n){case"h":return ii($i.hour12h,r);case"ho":return a.ordinalNumber(r,{unit:"hour"});default:return Si(n.length,r)}}validate(r,n){return n>=1&&n<=12}set(r,n,a){const s=r.getHours()>=12;return s&&a<12?r.setHours(a+12,0,0,0):!s&&a===12?r.setHours(0,0,0,0):r.setHours(a,0,0,0),r}}class M2e extends Ra{constructor(){super(...arguments);Cr(this,"priority",70);Cr(this,"incompatibleTokens",["a","b","h","K","k","t","T"])}parse(r,n,a){switch(n){case"H":return ii($i.hour23h,r);case"Ho":return a.ordinalNumber(r,{unit:"hour"});default:return Si(n.length,r)}}validate(r,n){return n>=0&&n<=23}set(r,n,a){return r.setHours(a,0,0,0),r}}class L2e extends Ra{constructor(){super(...arguments);Cr(this,"priority",70);Cr(this,"incompatibleTokens",["h","H","k","t","T"])}parse(r,n,a){switch(n){case"K":return ii($i.hour11h,r);case"Ko":return a.ordinalNumber(r,{unit:"hour"});default:return Si(n.length,r)}}validate(r,n){return n>=0&&n<=11}set(r,n,a){return r.getHours()>=12&&a<12?r.setHours(a+12,0,0,0):r.setHours(a,0,0,0),r}}class U2e extends Ra{constructor(){super(...arguments);Cr(this,"priority",70);Cr(this,"incompatibleTokens",["a","b","h","H","K","t","T"])}parse(r,n,a){switch(n){case"k":return ii($i.hour24h,r);case"ko":return a.ordinalNumber(r,{unit:"hour"});default:return Si(n.length,r)}}validate(r,n){return n>=1&&n<=24}set(r,n,a){const s=a<=24?a%24:a;return r.setHours(s,0,0,0),r}}class Q2e extends Ra{constructor(){super(...arguments);Cr(this,"priority",60);Cr(this,"incompatibleTokens",["t","T"])}parse(r,n,a){switch(n){case"m":return ii($i.minute,r);case"mo":return a.ordinalNumber(r,{unit:"minute"});default:return Si(n.length,r)}}validate(r,n){return n>=0&&n<=59}set(r,n,a){return r.setMinutes(a,0,0),r}}class V2e extends Ra{constructor(){super(...arguments);Cr(this,"priority",50);Cr(this,"incompatibleTokens",["t","T"])}parse(r,n,a){switch(n){case"s":return ii($i.second,r);case"so":return a.ordinalNumber(r,{unit:"second"});default:return Si(n.length,r)}}validate(r,n){return n>=0&&n<=59}set(r,n,a){return r.setSeconds(a,0),r}}class H2e extends Ra{constructor(){super(...arguments);Cr(this,"priority",30);Cr(this,"incompatibleTokens",["t","T"])}parse(r,n){const a=s=>Math.trunc(s*Math.pow(10,-n.length+3));return Gi(Si(n.length,r),a)}set(r,n,a){return r.setMilliseconds(a),r}}class $2e extends Ra{constructor(){super(...arguments);Cr(this,"priority",10);Cr(this,"incompatibleTokens",["t","T","x"])}parse(r,n){switch(n){case"X":return qf(Kf.basicOptionalMinutes,r);case"XX":return qf(Kf.basic,r);case"XXXX":return qf(Kf.basicOptionalSeconds,r);case"XXXXX":return qf(Kf.extendedOptionalSeconds,r);case"XXX":default:return qf(Kf.extended,r)}}set(r,n,a){return n.timestampIsSet?r:lo(r,r.getTime()-xS(r)-a)}}class G2e extends Ra{constructor(){super(...arguments);Cr(this,"priority",10);Cr(this,"incompatibleTokens",["t","T","X"])}parse(r,n){switch(n){case"x":return qf(Kf.basicOptionalMinutes,r);case"xx":return qf(Kf.basic,r);case"xxxx":return qf(Kf.basicOptionalSeconds,r);case"xxxxx":return qf(Kf.extendedOptionalSeconds,r);case"xxx":default:return qf(Kf.extended,r)}}set(r,n,a){return n.timestampIsSet?r:lo(r,r.getTime()-xS(r)-a)}}class K2e extends Ra{constructor(){super(...arguments);Cr(this,"priority",40);Cr(this,"incompatibleTokens","*")}parse(r){return Qee(r)}set(r,n,a){return[lo(r,a*1e3),{timestampIsSet:!0}]}}class q2e extends Ra{constructor(){super(...arguments);Cr(this,"priority",20);Cr(this,"incompatibleTokens","*")}parse(r){return Qee(r)}set(r,n,a){return[lo(r,a),{timestampIsSet:!0}]}}const z2e={G:new f2e,y:new h2e,Y:new A2e,R:new m2e,u:new p2e,Q:new g2e,q:new x2e,M:new v2e,L:new y2e,w:new w2e,I:new C2e,d:new S2e,D:new I2e,E:new j2e,e:new P2e,c:new B2e,i:new k2e,a:new F2e,b:new O2e,B:new D2e,h:new R2e,H:new M2e,K:new L2e,k:new U2e,m:new Q2e,s:new V2e,S:new H2e,X:new $2e,x:new G2e,t:new K2e,T:new q2e},W2e=/[yYQqMLwIdDecihHKkms]o|(\w)\1*|''|'(''|[^'])+('|$)|./g,X2e=/P+p+|P+|p+|''|'(''|[^'])+('|$)|./g,Y2e=/^'([^]*?)'?$/,J2e=/''/g,Z2e=/\S/,ewe=/[a-zA-Z]/;function yS(t,e,r,n){var x,v,y,b;const a=()=>lo(r,NaN),s=s2e(),o=s.locale??Fee,l=s.firstWeekContainsDate??((v=(x=s.locale)==null?void 0:x.options)==null?void 0:v.firstWeekContainsDate)??1,c=s.weekStartsOn??((b=(y=s.locale)==null?void 0:y.options)==null?void 0:b.weekStartsOn)??0;if(!e)return t?a():fi(r,n==null?void 0:n.in);const u={firstWeekContainsDate:l,weekStartsOn:c,locale:o},d=[new d2e(n==null?void 0:n.in,r)],f=e.match(X2e).map(w=>{const j=w[0];if(j in lk){const I=lk[j];return I(w,o.formatLong)}return w}).join("").match(W2e),A=[];for(let w of f){Lee(w)&&ck(w,e,t),Mee(w)&&ck(w,e,t);const j=w[0],I=z2e[j];if(I){const{incompatibleTokens:_}=I;if(Array.isArray(_)){const E=A.find(T=>_.includes(T.token)||T.token===j);if(E)throw new RangeError(`The format string mustn't contain \`${E.fullToken}\` and \`${w}\` at the same time`)}else if(I.incompatibleTokens==="*"&&A.length>0)throw new RangeError(`The format string mustn't contain \`${w}\` and any other token at the same time`);A.push({token:j,fullToken:w});const S=I.run(t,w,o.match,u);if(!S)return a();d.push(S.setter),t=S.rest}else{if(j.match(ewe))throw new RangeError("Format string contains an unescaped latin alphabet character `"+j+"`");if(w==="''"?w="'":j==="'"&&(w=twe(w)),t.indexOf(w)===0)t=t.slice(w.length);else return a()}}if(t.length>0&&Z2e.test(t))return a();const h=d.map(w=>w.priority).sort((w,j)=>j-w).filter((w,j,I)=>I.indexOf(w)===j).map(w=>d.filter(j=>j.priority===w).sort((j,I)=>I.subPriority-j.subPriority)).map(w=>w[0]);let m=fi(r,n==null?void 0:n.in);if(isNaN(+m))return a();const p={};for(const w of h){if(!w.validate(m,u))return a();const j=w.set(m,p,u);Array.isArray(j)?(m=j[0],Object.assign(p,j[1])):m=j}return m}function twe(t){return t.match(Y2e)[1].replace(J2e,"'")}function $ee(t,e,r){return j6(t,-14,r)}function rwe(t,e,r){return obe(t,-1,r)}/*!
 * html2canvas 1.4.1 <https://html2canvas.hertzen.com>
 * Copyright (c) 2022 Niklas von Hertzen <https://hertzen.com>
 * Released under MIT License
 *//*! *****************************************************************************
Copyright (c) Microsoft Corporation.

Permission to use, copy, modify, and/or distribute this software for any
purpose with or without fee is hereby granted.

THE SOFTWARE IS PROVIDED "AS IS" AND THE AUTHOR DISCLAIMS ALL WARRANTIES WITH
REGARD TO THIS SOFTWARE INCLUDING ALL IMPLIED WARRANTIES OF MERCHANTABILITY
AND FITNESS. IN NO EVENT SHALL THE AUTHOR BE LIABLE FOR ANY SPECIAL, DIRECT,
INDIRECT, OR CONSEQUENTIAL DAMAGES OR ANY DAMAGES WHATSOEVER RESULTING FROM
LOSS OF USE, DATA OR PROFITS, WHETHER IN AN ACTION OF CONTRACT, NEGLIGENCE OR
OTHER TORTIOUS ACTION, ARISING OUT OF OR IN CONNECTION WITH THE USE OR
PERFORMANCE OF THIS SOFTWARE.
***************************************************************************** */var uk=function(t,e){return uk=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,n){r.__proto__=n}||function(r,n){for(var a in n)Object.prototype.hasOwnProperty.call(n,a)&&(r[a]=n[a])},uk(t,e)};function Sf(t,e){if(typeof e!="function"&&e!==null)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");uk(t,e);function r(){this.constructor=t}t.prototype=e===null?Object.create(e):(r.prototype=e.prototype,new r)}var dk=function(){return dk=Object.assign||function(e){for(var r,n=1,a=arguments.length;n<a;n++){r=arguments[n];for(var s in r)Object.prototype.hasOwnProperty.call(r,s)&&(e[s]=r[s])}return e},dk.apply(this,arguments)};function xc(t,e,r,n){function a(s){return s instanceof r?s:new r(function(o){o(s)})}return new(r||(r=Promise))(function(s,o){function l(d){try{u(n.next(d))}catch(f){o(f)}}function c(d){try{u(n.throw(d))}catch(f){o(f)}}function u(d){d.done?s(d.value):a(d.value).then(l,c)}u((n=n.apply(t,[])).next())})}function Wl(t,e){var r={label:0,sent:function(){if(s[0]&1)throw s[1];return s[1]},trys:[],ops:[]},n,a,s,o;return o={next:l(0),throw:l(1),return:l(2)},typeof Symbol=="function"&&(o[Symbol.iterator]=function(){return this}),o;function l(u){return function(d){return c([u,d])}}function c(u){if(n)throw new TypeError("Generator is already executing.");for(;r;)try{if(n=1,a&&(s=u[0]&2?a.return:u[0]?a.throw||((s=a.return)&&s.call(a),0):a.next)&&!(s=s.call(a,u[1])).done)return s;switch(a=0,s&&(u=[u[0]&2,s.value]),u[0]){case 0:case 1:s=u;break;case 4:return r.label++,{value:u[1],done:!1};case 5:r.label++,a=u[1],u=[0];continue;case 7:u=r.ops.pop(),r.trys.pop();continue;default:if(s=r.trys,!(s=s.length>0&&s[s.length-1])&&(u[0]===6||u[0]===2)){r=0;continue}if(u[0]===3&&(!s||u[1]>s[0]&&u[1]<s[3])){r.label=u[1];break}if(u[0]===6&&r.label<s[1]){r.label=s[1],s=u;break}if(s&&r.label<s[2]){r.label=s[2],r.ops.push(u);break}s[2]&&r.ops.pop(),r.trys.pop();continue}u=e.call(t,r)}catch(d){u=[6,d],a=0}finally{n=s=0}if(u[0]&5)throw u[1];return{value:u[0]?u[1]:void 0,done:!0}}}function iC(t,e,r){if(arguments.length===2)for(var n=0,a=e.length,s;n<a;n++)(s||!(n in e))&&(s||(s=Array.prototype.slice.call(e,0,n)),s[n]=e[n]);return t.concat(s||e)}var xA=function(){function t(e,r,n,a){this.left=e,this.top=r,this.width=n,this.height=a}return t.prototype.add=function(e,r,n,a){return new t(this.left+e,this.top+r,this.width+n,this.height+a)},t.fromClientRect=function(e,r){return new t(r.left+e.windowBounds.left,r.top+e.windowBounds.top,r.width,r.height)},t.fromDOMRectList=function(e,r){var n=Array.from(r).find(function(a){return a.width!==0});return n?new t(n.left+e.windowBounds.left,n.top+e.windowBounds.top,n.width,n.height):t.EMPTY},t.EMPTY=new t(0,0,0,0),t}(),qj=function(t,e){return xA.fromClientRect(t,e.getBoundingClientRect())},nwe=function(t){var e=t.body,r=t.documentElement;if(!e||!r)throw new Error("Unable to get document size");var n=Math.max(Math.max(e.scrollWidth,r.scrollWidth),Math.max(e.offsetWidth,r.offsetWidth),Math.max(e.clientWidth,r.clientWidth)),a=Math.max(Math.max(e.scrollHeight,r.scrollHeight),Math.max(e.offsetHeight,r.offsetHeight),Math.max(e.clientHeight,r.clientHeight));return new xA(0,0,n,a)},zj=function(t){for(var e=[],r=0,n=t.length;r<n;){var a=t.charCodeAt(r++);if(a>=55296&&a<=56319&&r<n){var s=t.charCodeAt(r++);(s&64512)===56320?e.push(((a&1023)<<10)+(s&1023)+65536):(e.push(a),r--)}else e.push(a)}return e},Mi=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];if(String.fromCodePoint)return String.fromCodePoint.apply(String,t);var r=t.length;if(!r)return"";for(var n=[],a=-1,s="";++a<r;){var o=t[a];o<=65535?n.push(o):(o-=65536,n.push((o>>10)+55296,o%1024+56320)),(a+1===r||n.length>16384)&&(s+=String.fromCharCode.apply(String,n),n.length=0)}return s},P9="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",awe=typeof Uint8Array>"u"?[]:new Uint8Array(256);for(var oC=0;oC<P9.length;oC++)awe[P9.charCodeAt(oC)]=oC;var B9="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",Qy=typeof Uint8Array>"u"?[]:new Uint8Array(256);for(var lC=0;lC<B9.length;lC++)Qy[B9.charCodeAt(lC)]=lC;var swe=function(t){var e=t.length*.75,r=t.length,n,a=0,s,o,l,c;t[t.length-1]==="="&&(e--,t[t.length-2]==="="&&e--);var u=typeof ArrayBuffer<"u"&&typeof Uint8Array<"u"&&typeof Uint8Array.prototype.slice<"u"?new ArrayBuffer(e):new Array(e),d=Array.isArray(u)?u:new Uint8Array(u);for(n=0;n<r;n+=4)s=Qy[t.charCodeAt(n)],o=Qy[t.charCodeAt(n+1)],l=Qy[t.charCodeAt(n+2)],c=Qy[t.charCodeAt(n+3)],d[a++]=s<<2|o>>4,d[a++]=(o&15)<<4|l>>2,d[a++]=(l&3)<<6|c&63;return u},iwe=function(t){for(var e=t.length,r=[],n=0;n<e;n+=2)r.push(t[n+1]<<8|t[n]);return r},owe=function(t){for(var e=t.length,r=[],n=0;n<e;n+=4)r.push(t[n+3]<<24|t[n+2]<<16|t[n+1]<<8|t[n]);return r},kp=5,F6=11,P3=2,lwe=F6-kp,Gee=65536>>kp,cwe=1<<kp,B3=cwe-1,uwe=1024>>kp,dwe=Gee+uwe,fwe=dwe,hwe=32,Awe=fwe+hwe,mwe=65536>>F6,pwe=1<<lwe,gwe=pwe-1,T9=function(t,e,r){return t.slice?t.slice(e,r):new Uint16Array(Array.prototype.slice.call(t,e,r))},xwe=function(t,e,r){return t.slice?t.slice(e,r):new Uint32Array(Array.prototype.slice.call(t,e,r))},vwe=function(t,e){var r=swe(t),n=Array.isArray(r)?owe(r):new Uint32Array(r),a=Array.isArray(r)?iwe(r):new Uint16Array(r),s=24,o=T9(a,s/2,n[4]/2),l=n[5]===2?T9(a,(s+n[4])/2):xwe(n,Math.ceil((s+n[4])/4));return new ywe(n[0],n[1],n[2],n[3],o,l)},ywe=function(){function t(e,r,n,a,s,o){this.initialValue=e,this.errorValue=r,this.highStart=n,this.highValueIndex=a,this.index=s,this.data=o}return t.prototype.get=function(e){var r;if(e>=0){if(e<55296||e>56319&&e<=65535)return r=this.index[e>>kp],r=(r<<P3)+(e&B3),this.data[r];if(e<=65535)return r=this.index[Gee+(e-55296>>kp)],r=(r<<P3)+(e&B3),this.data[r];if(e<this.highStart)return r=Awe-mwe+(e>>F6),r=this.index[r],r+=e>>kp&gwe,r=this.index[r],r=(r<<P3)+(e&B3),this.data[r];if(e<=1114111)return this.data[this.highValueIndex]}return this.errorValue},t}(),k9="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",bwe=typeof Uint8Array>"u"?[]:new Uint8Array(256);for(var cC=0;cC<k9.length;cC++)bwe[k9.charCodeAt(cC)]=cC;var wwe="KwAAAAAAAAAACA4AUD0AADAgAAACAAAAAAAIABAAGABAAEgAUABYAGAAaABgAGgAYgBqAF8AZwBgAGgAcQB5AHUAfQCFAI0AlQCdAKIAqgCyALoAYABoAGAAaABgAGgAwgDKAGAAaADGAM4A0wDbAOEA6QDxAPkAAQEJAQ8BFwF1AH0AHAEkASwBNAE6AUIBQQFJAVEBWQFhAWgBcAF4ATAAgAGGAY4BlQGXAZ8BpwGvAbUBvQHFAc0B0wHbAeMB6wHxAfkBAQIJAvEBEQIZAiECKQIxAjgCQAJGAk4CVgJeAmQCbAJ0AnwCgQKJApECmQKgAqgCsAK4ArwCxAIwAMwC0wLbAjAA4wLrAvMC+AIAAwcDDwMwABcDHQMlAy0DNQN1AD0DQQNJA0kDSQNRA1EDVwNZA1kDdQB1AGEDdQBpA20DdQN1AHsDdQCBA4kDkQN1AHUAmQOhA3UAdQB1AHUAdQB1AHUAdQB1AHUAdQB1AHUAdQB1AHUAdQB1AKYDrgN1AHUAtgO+A8YDzgPWAxcD3gPjA+sD8wN1AHUA+wMDBAkEdQANBBUEHQQlBCoEFwMyBDgEYABABBcDSARQBFgEYARoBDAAcAQzAXgEgASIBJAEdQCXBHUAnwSnBK4EtgS6BMIEyAR1AHUAdQB1AHUAdQCVANAEYABgAGAAYABgAGAAYABgANgEYADcBOQEYADsBPQE/AQEBQwFFAUcBSQFLAU0BWQEPAVEBUsFUwVbBWAAYgVgAGoFcgV6BYIFigWRBWAAmQWfBaYFYABgAGAAYABgAKoFYACxBbAFuQW6BcEFwQXHBcEFwQXPBdMF2wXjBeoF8gX6BQIGCgYSBhoGIgYqBjIGOgZgAD4GRgZMBmAAUwZaBmAAYABgAGAAYABgAGAAYABgAGAAYABgAGIGYABpBnAGYABgAGAAYABgAGAAYABgAGAAYAB4Bn8GhQZgAGAAYAB1AHcDFQSLBmAAYABgAJMGdQA9A3UAmwajBqsGqwaVALMGuwbDBjAAywbSBtIG1QbSBtIG0gbSBtIG0gbdBuMG6wbzBvsGAwcLBxMHAwcbByMHJwcsBywHMQcsB9IGOAdAB0gHTgfSBkgHVgfSBtIG0gbSBtIG0gbSBtIG0gbSBiwHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAdgAGAALAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAdbB2MHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsB2kH0gZwB64EdQB1AHUAdQB1AHUAdQB1AHUHfQdgAIUHjQd1AHUAlQedB2AAYAClB6sHYACzB7YHvgfGB3UAzgfWBzMB3gfmB1EB7gf1B/0HlQENAQUIDQh1ABUIHQglCBcDLQg1CD0IRQhNCEEDUwh1AHUAdQBbCGMIZAhlCGYIZwhoCGkIYwhkCGUIZghnCGgIaQhjCGQIZQhmCGcIaAhpCGMIZAhlCGYIZwhoCGkIYwhkCGUIZghnCGgIaQhjCGQIZQhmCGcIaAhpCGMIZAhlCGYIZwhoCGkIYwhkCGUIZghnCGgIaQhjCGQIZQhmCGcIaAhpCGMIZAhlCGYIZwhoCGkIYwhkCGUIZghnCGgIaQhjCGQIZQhmCGcIaAhpCGMIZAhlCGYIZwhoCGkIYwhkCGUIZghnCGgIaQhjCGQIZQhmCGcIaAhpCGMIZAhlCGYIZwhoCGkIYwhkCGUIZghnCGgIaQhjCGQIZQhmCGcIaAhpCGMIZAhlCGYIZwhoCGkIYwhkCGUIZghnCGgIaQhjCGQIZQhmCGcIaAhpCGMIZAhlCGYIZwhoCGkIYwhkCGUIZghnCGgIaQhjCGQIZQhmCGcIaAhpCGMIZAhlCGYIZwhoCGkIYwhkCGUIZghnCGgIaQhjCGQIZQhmCGcIaAhpCGMIZAhlCGYIZwhoCGkIYwhkCGUIZghnCGgIaQhjCGQIZQhmCGcIaAhpCGMIZAhlCGYIZwhoCGkIYwhkCGUIZghnCGgIaQhjCGQIZQhmCGcIaAhpCGMIZAhlCGYIZwhoCGkIYwhkCGUIZghnCGgIaQhjCGQIZQhmCGcIaAhpCGMIZAhlCGYIZwhoCGkIYwhkCGUIZghnCGgIaQhjCGQIZQhmCGcIaAhpCGMIZAhlCGYIZwhoCGkIYwhkCGUIZghnCGgIaQhjCGQIZQhmCGcIaAhpCGMIZAhlCGYIZwhoCGkIYwhkCGUIZghnCGgIaQhjCGQIZQhmCGcIaAhpCGMIZAhlCGYIZwhoCGkIYwhkCGUIZghnCGgIaQhjCGQIZQhmCGcIaAhpCGMIZAhlCGYIZwhoCGkIYwhkCGUIZghnCGgIcAh3CHoIMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwAIIIggiCCIIIggiCCIIIggiCCIIIggiCCIIIggiCCIIIggiCCIIIggiCCIIIggiCCIIIggiCCIIIggiCCIIIgggwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAALAcsBywHLAcsBywHLAcsBywHLAcsB4oILAcsB44I0gaWCJ4Ipgh1AHUAqgiyCHUAdQB1AHUAdQB1AHUAdQB1AHUAtwh8AXUAvwh1AMUIyQjRCNkI4AjoCHUAdQB1AO4I9gj+CAYJDgkTCS0HGwkjCYIIggiCCIIIggiCCIIIggiCCIIIggiCCIIIggiCCIIIggiCCIIIggiCCIIIggiCCIIIggiCCIIIggiCCIIIggiAAIAAAAFAAYABgAGIAXwBgAHEAdQBFAJUAogCyAKAAYABgAEIA4ABGANMA4QDxAMEBDwE1AFwBLAE6AQEBUQF4QkhCmEKoQrhCgAHIQsAB0MLAAcABwAHAAeDC6ABoAHDCwMMAAcABwAHAAdDDGMMAAcAB6MM4wwjDWMNow3jDaABoAGgAaABoAGgAaABoAGgAaABoAGgAaABoAGgAaABoAGgAaABoAEjDqABWw6bDqABpg6gAaABoAHcDvwOPA+gAaABfA/8DvwO/A78DvwO/A78DvwO/A78DvwO/A78DvwO/A78DvwO/A78DvwO/A78DvwO/A78DvwO/A78DpcPAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcAB9cPKwkyCToJMAB1AHUAdQBCCUoJTQl1AFUJXAljCWcJawkwADAAMAAwAHMJdQB2CX4JdQCECYoJjgmWCXUAngkwAGAAYABxAHUApgn3A64JtAl1ALkJdQDACTAAMAAwADAAdQB1AHUAdQB1AHUAdQB1AHUAowYNBMUIMAAwADAAMADICcsJ0wnZCRUE4QkwAOkJ8An4CTAAMAB1AAAKvwh1AAgKDwoXCh8KdQAwACcKLgp1ADYKqAmICT4KRgowADAAdQB1AE4KMAB1AFYKdQBeCnUAZQowADAAMAAwADAAMAAwADAAMAAVBHUAbQowADAAdQC5CXUKMAAwAHwBxAijBogEMgF9CoQKiASMCpQKmgqIBKIKqgquCogEDQG2Cr4KxgrLCjAAMADTCtsKCgHjCusK8Qr5CgELMAAwADAAMAB1AIsECQsRC3UANAEZCzAAMAAwADAAMAB1ACELKQswAHUANAExCzkLdQBBC0kLMABRC1kLMAAwADAAMAAwADAAdQBhCzAAMAAwAGAAYABpC3ELdwt/CzAAMACHC4sLkwubC58Lpwt1AK4Ltgt1APsDMAAwADAAMAAwADAAMAAwAL4LwwvLC9IL1wvdCzAAMADlC+kL8Qv5C/8LSQswADAAMAAwADAAMAAwADAAMAAHDDAAMAAwADAAMAAODBYMHgx1AHUAdQB1AHUAdQB1AHUAdQB1AHUAdQB1AHUAdQB1AHUAdQB1AHUAdQB1AHUAdQB1AHUAdQB1ACYMMAAwADAAdQB1AHUALgx1AHUAdQB1AHUAdQA2DDAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwAHUAdQB1AHUAdQB1AHUAdQB1AHUAdQB1AHUAdQB1AHUAdQB1AD4MdQBGDHUAdQB1AHUAdQB1AEkMdQB1AHUAdQB1AFAMMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwAHUAdQB1AHUAdQB1AHUAdQB1AHUAdQB1AHUAdQBYDHUAdQB1AF8MMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAB1AHUAdQB1AHUAdQB1AHUAdQB1AHUAdQB1AHUAdQB1AHUA+wMVBGcMMAAwAHwBbwx1AHcMfwyHDI8MMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAYABgAJcMMAAwADAAdQB1AJ8MlQClDDAAMACtDCwHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsB7UMLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHdQB1AHUAdQB1AHUAdQB1AHUAdQB1AHUAdQB1AA0EMAC9DDAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAsBywHLAcsBywHLAcsBywHLQcwAMEMyAwsBywHLAcsBywHLAcsBywHLAcsBywHzAwwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwAHUAdQB1ANQM2QzhDDAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMABgAGAAYABgAGAAYABgAOkMYADxDGAA+AwADQYNYABhCWAAYAAODTAAMAAwADAAFg1gAGAAHg37AzAAMAAwADAAYABgACYNYAAsDTQNPA1gAEMNPg1LDWAAYABgAGAAYABgAGAAYABgAGAAUg1aDYsGVglhDV0NcQBnDW0NdQ15DWAAYABgAGAAYABgAGAAYABgAGAAYABgAGAAYABgAGAAlQCBDZUAiA2PDZcNMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAnw2nDTAAMAAwADAAMAAwAHUArw23DTAAMAAwADAAMAAwADAAMAAwADAAMAB1AL8NMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAB1AHUAdQB1AHUAdQDHDTAAYABgAM8NMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAA1w11ANwNMAAwAD0B5A0wADAAMAAwADAAMADsDfQN/A0EDgwOFA4wABsOMAAwADAAMAAwADAAMAAwANIG0gbSBtIG0gbSBtIG0gYjDigOwQUuDsEFMw7SBjoO0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIGQg5KDlIOVg7SBtIGXg5lDm0OdQ7SBtIGfQ6EDooOjQ6UDtIGmg6hDtIG0gaoDqwO0ga0DrwO0gZgAGAAYADEDmAAYAAkBtIGzA5gANIOYADaDokO0gbSBt8O5w7SBu8O0gb1DvwO0gZgAGAAxA7SBtIG0gbSBtIGYABgAGAAYAAED2AAsAUMD9IG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIGFA8sBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAccD9IGLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHJA8sBywHLAcsBywHLAccDywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywPLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAc0D9IG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIGLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAccD9IG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIGFA8sBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHPA/SBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gYUD0QPlQCVAJUAMAAwADAAMACVAJUAlQCVAJUAlQCVAEwPMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAA//8EAAQABAAEAAQABAAEAAQABAANAAMAAQABAAIABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQACgATABcAHgAbABoAHgAXABYAEgAeABsAGAAPABgAHABLAEsASwBLAEsASwBLAEsASwBLABgAGAAeAB4AHgATAB4AUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQABYAGwASAB4AHgAeAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAWAA0AEQAeAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArAAQABAAEAAQABAAFAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAJABYAGgAbABsAGwAeAB0AHQAeAE8AFwAeAA0AHgAeABoAGwBPAE8ADgBQAB0AHQAdAE8ATwAXAE8ATwBPABYAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAB0AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAdAFAAUABQAFAAUABQAFAAUAAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAFAAHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAeAB4AHgAeAFAATwBAAE8ATwBPAEAATwBQAFAATwBQAB4AHgAeAB4AHgAeAB0AHQAdAB0AHgAdAB4ADgBQAFAAUABQAFAAHgAeAB4AHgAeAB4AHgBQAB4AUAAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4ABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAJAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAkACQAJAAkACQAJAAkABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAeAB4AHgAeAFAAHgAeAB4AKwArAFAAUABQAFAAGABQACsAKwArACsAHgAeAFAAHgBQAFAAUAArAFAAKwAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AKwAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4ABAAEAAQABAAEAAQABAAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArACsAUAAeAB4AHgAeAB4AHgBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAYAA0AKwArAB4AHgAbACsABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQADQAEAB4ABAAEAB4ABAAEABMABAArACsAKwArACsAKwArACsAVgBWAFYAVgBWAFYAVgBWAFYAVgBWAFYAVgBWAFYAVgBWAFYAVgBWAFYAVgBWAFYAVgBWAFYAKwArACsAKwBWAFYAVgBWAB4AHgArACsAKwArACsAKwArACsAKwArACsAHgAeAB4AHgAeAB4AHgAeAB4AGgAaABoAGAAYAB4AHgAEAAQABAAEAAQABAAEAAQABAAEAAQAEwAEACsAEwATAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABABLAEsASwBLAEsASwBLAEsASwBLABoAGQAZAB4AUABQAAQAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQABMAUAAEAAQABAAEAAQABAAEAB4AHgAEAAQABAAEAAQABABQAFAABAAEAB4ABAAEAAQABABQAFAASwBLAEsASwBLAEsASwBLAEsASwBQAFAAUAAeAB4AUAAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AKwAeAFAABABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAABAAEAAQABAAEAAQABAAEAAQABAAEAFAAKwArACsAKwArACsAKwArACsAKwArACsAKwArAEsASwBLAEsASwBLAEsASwBLAEsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAABAAEAAQABAAEAAQABAAEAAQAUABQAB4AHgAYABMAUAArACsABAAbABsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAEAAQABAAEAFAABAAEAAQABAAEAFAABAAEAAQAUAAEAAQABAAEAAQAKwArAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAEAAQABAArACsAHgArAFAAUABQAFAAUABQAFAAUABQAFAAUAArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArAFAAUABQAFAAUABQAFAAUABQAFAAKwArACsAKwArACsAKwArACsAKwArAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAB4ABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAAQABAAEAFAABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQAUAAEAAQABAAEAAQABAAEAFAAUABQAFAAUABQAFAAUABQAFAABAAEAA0ADQBLAEsASwBLAEsASwBLAEsASwBLAB4AUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAEAAQABAArAFAAUABQAFAAUABQAFAAUAArACsAUABQACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwBQAFAAUABQAFAAUABQACsAUAArACsAKwBQAFAAUABQACsAKwAEAFAABAAEAAQABAAEAAQABAArACsABAAEACsAKwAEAAQABABQACsAKwArACsAKwArACsAKwAEACsAKwArACsAUABQACsAUABQAFAABAAEACsAKwBLAEsASwBLAEsASwBLAEsASwBLAFAAUAAaABoAUABQAFAAUABQAEwAHgAbAFAAHgAEACsAKwAEAAQABAArAFAAUABQAFAAUABQACsAKwArACsAUABQACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwBQAFAAUABQAFAAUABQACsAUABQACsAUABQACsAUABQACsAKwAEACsABAAEAAQABAAEACsAKwArACsABAAEACsAKwAEAAQABAArACsAKwAEACsAKwArACsAKwArACsAUABQAFAAUAArAFAAKwArACsAKwArACsAKwBLAEsASwBLAEsASwBLAEsASwBLAAQABABQAFAAUAAEAB4AKwArACsAKwArACsAKwArACsAKwAEAAQABAArAFAAUABQAFAAUABQAFAAUABQACsAUABQAFAAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwBQAFAAUABQAFAAUABQACsAUABQACsAUABQAFAAUABQACsAKwAEAFAABAAEAAQABAAEAAQABAAEACsABAAEAAQAKwAEAAQABAArACsAUAArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwBQAFAABAAEACsAKwBLAEsASwBLAEsASwBLAEsASwBLAB4AGwArACsAKwArACsAKwArAFAABAAEAAQABAAEAAQAKwAEAAQABAArAFAAUABQAFAAUABQAFAAUAArACsAUABQACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAAQABAAEAAQABAArACsABAAEACsAKwAEAAQABAArACsAKwArACsAKwArAAQABAAEACsAKwArACsAUABQACsAUABQAFAABAAEACsAKwBLAEsASwBLAEsASwBLAEsASwBLAB4AUABQAFAAUABQAFAAUAArACsAKwArACsAKwArACsAKwArAAQAUAArAFAAUABQAFAAUABQACsAKwArAFAAUABQACsAUABQAFAAUAArACsAKwBQAFAAKwBQACsAUABQACsAKwArAFAAUAArACsAKwBQAFAAUAArACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUAArACsAKwArAAQABAAEAAQABAArACsAKwAEAAQABAArAAQABAAEAAQAKwArAFAAKwArACsAKwArACsABAArACsAKwArACsAKwArACsAKwArAEsASwBLAEsASwBLAEsASwBLAEsAUABQAFAAHgAeAB4AHgAeAB4AGwAeACsAKwArACsAKwAEAAQABAAEAAQAUABQAFAAUABQAFAAUABQACsAUABQAFAAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwArACsAUAAEAAQABAAEAAQABAAEACsABAAEAAQAKwAEAAQABAAEACsAKwArACsAKwArACsABAAEACsAUABQAFAAKwArACsAKwArAFAAUAAEAAQAKwArAEsASwBLAEsASwBLAEsASwBLAEsAKwArACsAKwArACsAKwAOAFAAUABQAFAAUABQAFAAHgBQAAQABAAEAA4AUABQAFAAUABQAFAAUABQACsAUABQAFAAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArAFAAUABQAFAAUABQAFAAUABQAFAAKwBQAFAAUABQAFAAKwArAAQAUAAEAAQABAAEAAQABAAEACsABAAEAAQAKwAEAAQABAAEACsAKwArACsAKwArACsABAAEACsAKwArACsAKwArACsAUAArAFAAUAAEAAQAKwArAEsASwBLAEsASwBLAEsASwBLAEsAKwBQAFAAKwArACsAKwArACsAKwArACsAKwArACsAKwAEAAQABAAEAFAAUABQAFAAUABQAFAAUABQACsAUABQAFAAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAABAAEAFAABAAEAAQABAAEAAQABAArAAQABAAEACsABAAEAAQABABQAB4AKwArACsAKwBQAFAAUAAEAFAAUABQAFAAUABQAFAAUABQAFAABAAEACsAKwBLAEsASwBLAEsASwBLAEsASwBLAFAAUABQAFAAUABQAFAAUABQABoAUABQAFAAUABQAFAAKwAEAAQABAArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArAFAAUABQAFAAUABQAFAAUABQACsAUAArACsAUABQAFAAUABQAFAAUAArACsAKwAEACsAKwArACsABAAEAAQABAAEAAQAKwAEACsABAAEAAQABAAEAAQABAAEACsAKwArACsAKwArAEsASwBLAEsASwBLAEsASwBLAEsAKwArAAQABAAeACsAKwArACsAKwArACsAKwArACsAKwArAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXAAqAFwAXAAqACoAKgAqACoAKgAqACsAKwArACsAGwBcAFwAXABcAFwAXABcACoAKgAqACoAKgAqACoAKgAeAEsASwBLAEsASwBLAEsASwBLAEsADQANACsAKwArACsAKwBcAFwAKwBcACsAXABcAFwAXABcACsAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcACsAXAArAFwAXABcAFwAXABcAFwAXABcAFwAKgBcAFwAKgAqACoAKgAqACoAKgAqACoAXAArACsAXABcAFwAXABcACsAXAArACoAKgAqACoAKgAqACsAKwBLAEsASwBLAEsASwBLAEsASwBLACsAKwBcAFwAXABcAFAADgAOAA4ADgAeAA4ADgAJAA4ADgANAAkAEwATABMAEwATAAkAHgATAB4AHgAeAAQABAAeAB4AHgAeAB4AHgBLAEsASwBLAEsASwBLAEsASwBLAFAAUABQAFAAUABQAFAAUABQAFAADQAEAB4ABAAeAAQAFgARABYAEQAEAAQAUABQAFAAUABQAFAAUABQACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwArACsAKwAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQADQAEAAQABAAEAAQADQAEAAQAUABQAFAAUABQAAQABAAEAAQABAAEAAQABAAEAAQABAArAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAArAA0ADQAeAB4AHgAeAB4AHgAEAB4AHgAeAB4AHgAeACsAHgAeAA4ADgANAA4AHgAeAB4AHgAeAAkACQArACsAKwArACsAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcACoAKgAqACoAKgAqACoAKgAqACoAKgAqACoAKgAqACoAKgAqACoAKgBcAEsASwBLAEsASwBLAEsASwBLAEsADQANAB4AHgAeAB4AXABcAFwAXABcAFwAKgAqACoAKgBcAFwAXABcACoAKgAqAFwAKgAqACoAXABcACoAKgAqACoAKgAqACoAXABcAFwAKgAqACoAKgBcAFwAXABcAFwAXABcAFwAXABcAFwAXABcACoAKgAqACoAKgAqACoAKgAqACoAKgAqAFwAKgBLAEsASwBLAEsASwBLAEsASwBLACoAKgAqACoAKgAqAFAAUABQAFAAUABQACsAUAArACsAKwArACsAUAArACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAHgBQAFAAUABQAFgAWABYAFgAWABYAFgAWABYAFgAWABYAFgAWABYAFgAWABYAFgAWABYAFgAWABYAFgAWABYAFgAWABYAFgAWABZAFkAWQBZAFkAWQBZAFkAWQBZAFkAWQBZAFkAWQBZAFkAWQBZAFkAWQBZAFkAWQBZAFkAWQBZAFkAWQBZAFkAWgBaAFoAWgBaAFoAWgBaAFoAWgBaAFoAWgBaAFoAWgBaAFoAWgBaAFoAWgBaAFoAWgBaAFoAWgBaAFoAWgBaAFAAUABQAFAAUABQAFAAUABQACsAUABQAFAAUAArACsAUABQAFAAUABQAFAAUAArAFAAKwBQAFAAUABQACsAKwBQAFAAUABQAFAAUABQAFAAUAArAFAAUABQAFAAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArAFAAUABQAFAAKwArAFAAUABQAFAAUABQAFAAKwBQACsAUABQAFAAUAArACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwBQAFAAUABQACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArACsABAAEAAQAHgANAB4AHgAeAB4AHgAeAB4AUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAHgAeAB4AHgAeAB4AHgAeAB4AHgArACsAKwArACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAKwBQAFAAUABQAFAAUAArACsADQBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAHgAeAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAANAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAWABEAKwArACsAUABQAFAAUABQAFAAUABQAFAAUABQAA0ADQANAFAAUABQAFAAUABQAFAAUABQAFAAUAArACsAKwArACsAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwBQAFAAUABQAAQABAAEACsAKwArACsAKwArACsAKwArACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAEAAQABAANAA0AKwArACsAKwArACsAKwArACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAABAAEACsAKwArACsAKwArACsAKwArACsAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwBQAFAAUAArAAQABAArACsAKwArACsAKwArACsAKwArACsAKwBcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAKgAqACoAKgAqACoAKgAqACoAKgAqACoAKgAqACoAKgAqACoAKgAqAA0ADQAVAFwADQAeAA0AGwBcACoAKwArAEsASwBLAEsASwBLAEsASwBLAEsAKwArACsAKwArACsAUABQAFAAUABQAFAAUABQAFAAUAArACsAKwArACsAKwAeAB4AEwATAA0ADQAOAB4AEwATAB4ABAAEAAQACQArAEsASwBLAEsASwBLAEsASwBLAEsAKwArACsAKwArACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArACsAKwArACsAKwArAFAAUABQAFAAUAAEAAQAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAAQAUAArACsAKwArACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArACsAKwArACsAKwArACsAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwAEAAQABAAEAAQABAAEAAQABAAEAAQABAArACsAKwArAAQABAAEAAQABAAEAAQABAAEAAQABAAEACsAKwArACsAHgArACsAKwATABMASwBLAEsASwBLAEsASwBLAEsASwBcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXAArACsAXABcAFwAXABcACsAKwArACsAKwArACsAKwArACsAKwBcAFwAXABcAFwAXABcAFwAXABcAFwAXAArACsAKwArAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcACsAKwArACsAKwArAEsASwBLAEsASwBLAEsASwBLAEsAXAArACsAKwAqACoAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAAQABAAEAAQABAArACsAHgAeAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcACoAKgAqACoAKgAqACoAKgAqACoAKwAqACoAKgAqACoAKgAqACoAKgAqACoAKgAqACoAKgAqACoAKgAqACoAKgAqACoAKgAqACoAKgAqACoAKwArAAQASwBLAEsASwBLAEsASwBLAEsASwArACsAKwArACsAKwBLAEsASwBLAEsASwBLAEsASwBLACsAKwArACsAKwArACoAKgAqACoAKgAqACoAXAAqACoAKgAqACoAKgArACsABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsABAAEAAQABAAEAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAAQABAAEAAQABABQAFAAUABQAFAAUABQACsAKwArACsASwBLAEsASwBLAEsASwBLAEsASwANAA0AHgANAA0ADQANAB4AHgAeAB4AHgAeAB4AHgAeAB4ABAAEAAQABAAEAAQABAAEAAQAHgAeAB4AHgAeAB4AHgAeAB4AKwArACsABAAEAAQAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAABAAEAAQABAAEAAQABAAEAAQABAAEAAQABABQAFAASwBLAEsASwBLAEsASwBLAEsASwBQAFAAUABQAFAAUABQAFAABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEACsAKwArACsAKwArACsAKwAeAB4AHgAeAFAAUABQAFAABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEACsAKwArAA0ADQANAA0ADQBLAEsASwBLAEsASwBLAEsASwBLACsAKwArAFAAUABQAEsASwBLAEsASwBLAEsASwBLAEsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAA0ADQBQAFAAUABQAFAAUABQAFAAUAArACsAKwArACsAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAKwBQAFAAUAAeAB4AHgAeAB4AHgAeAB4AKwArACsAKwArACsAKwArAAQABAAEAB4ABAAEAAQABAAEAAQABAAEAAQABAAEAAQABABQAFAAUABQAAQAUABQAFAAUABQAFAABABQAFAABAAEAAQAUAArACsAKwArACsABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEACsABAAEAAQABAAEAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AKwArAFAAUABQAFAAUABQACsAKwBQAFAAUABQAFAAUABQAFAAKwBQACsAUAArAFAAKwAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeACsAKwAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgArAB4AHgAeAB4AHgAeAB4AHgBQAB4AHgAeAFAAUABQACsAHgAeAB4AHgAeAB4AHgAeAB4AHgBQAFAAUABQACsAKwAeAB4AHgAeAB4AHgArAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AKwArAFAAUABQACsAHgAeAB4AHgAeAB4AHgAOAB4AKwANAA0ADQANAA0ADQANAAkADQANAA0ACAAEAAsABAAEAA0ACQANAA0ADAAdAB0AHgAXABcAFgAXABcAFwAWABcAHQAdAB4AHgAUABQAFAANAAEAAQAEAAQABAAEAAQACQAaABoAGgAaABoAGgAaABoAHgAXABcAHQAVABUAHgAeAB4AHgAeAB4AGAAWABEAFQAVABUAHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4ADQAeAA0ADQANAA0AHgANAA0ADQAHAB4AHgAeAB4AKwAEAAQABAAEAAQABAAEAAQABAAEAFAAUAArACsATwBQAFAAUABQAFAAHgAeAB4AFgARAE8AUABPAE8ATwBPAFAAUABQAFAAUAAeAB4AHgAWABEAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAKwArABsAGwAbABsAGwAbABsAGgAbABsAGwAbABsAGwAbABsAGwAbABsAGwAbABsAGgAbABsAGwAbABoAGwAbABoAGwAbABsAGwAbABsAGwAbABsAGwAbABsAGwAbABsAGwAbAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQAHgAeAFAAGgAeAB0AHgBQAB4AGgAeAB4AHgAeAB4AHgAeAB4AHgBPAB4AUAAbAB4AHgBQAFAAUABQAFAAHgAeAB4AHQAdAB4AUAAeAFAAHgBQAB4AUABPAFAAUAAeAB4AHgAeAB4AHgAeAFAAUABQAFAAUAAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAFAAHgBQAFAAUABQAE8ATwBQAFAAUABQAFAATwBQAFAATwBQAE8ATwBPAE8ATwBPAE8ATwBPAE8ATwBPAFAAUABQAFAATwBPAE8ATwBPAE8ATwBPAE8ATwBQAFAAUABQAFAAUABQAFAAUAAeAB4AUABQAFAAUABPAB4AHgArACsAKwArAB0AHQAdAB0AHQAdAB0AHQAdAB0AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB0AHgAdAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAdAB4AHQAdAB4AHgAeAB0AHQAeAB4AHQAeAB4AHgAdAB4AHQAbABsAHgAdAB4AHgAeAB4AHQAeAB4AHQAdAB0AHQAeAB4AHQAeAB0AHgAdAB0AHQAdAB0AHQAeAB0AHgAeAB4AHgAeAB0AHQAdAB0AHgAeAB4AHgAdAB0AHgAeAB4AHgAeAB4AHgAeAB4AHgAdAB4AHgAeAB0AHgAeAB4AHgAeAB0AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAdAB0AHgAeAB0AHQAdAB0AHgAeAB0AHQAeAB4AHQAdAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB0AHQAeAB4AHQAdAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHQAeAB4AHgAdAB4AHgAeAB4AHgAeAB4AHQAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB0AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AFAAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeABYAEQAWABEAHgAeAB4AHgAeAB4AHQAeAB4AHgAeAB4AHgAeACUAJQAeAB4AHgAeAB4AHgAeAB4AHgAWABEAHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AJQAlACUAJQAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArAE8ATwBPAE8ATwBPAE8ATwBPAE8ATwBPAE8ATwBPAE8ATwBPAE8ATwBPAE8ATwBPAE8ATwBPAE8ATwBPAE8ATwAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAE8ATwBPAE8ATwBPAE8ATwBPAE8ATwBPAE8ATwBPAE8ATwBPAE8ATwBPAFAAHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHgAeAB4AHgAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAeAB4AHQAdAB0AHQAeAB4AHgAeAB4AHgAeAB4AHgAeAB0AHQAeAB0AHQAdAB0AHQAdAB0AHgAeAB4AHgAeAB4AHgAeAB0AHQAeAB4AHQAdAB4AHgAeAB4AHQAdAB4AHgAeAB4AHQAdAB0AHgAeAB0AHgAeAB0AHQAdAB0AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAdAB0AHQAdAB4AHgAeAB4AHgAeAB4AHgAeAB0AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAlACUAJQAlAB4AHQAdAB4AHgAdAB4AHgAeAB4AHQAdAB4AHgAeAB4AJQAlAB0AHQAlAB4AJQAlACUAIAAlACUAHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAlACUAJQAeAB4AHgAeAB0AHgAdAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAdAB0AHgAdAB0AHQAeAB0AJQAdAB0AHgAdAB0AHgAdAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeACUAHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHQAdAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAlACUAJQAlACUAJQAlACUAJQAlACUAJQAdAB0AHQAdACUAHgAlACUAJQAdACUAJQAdAB0AHQAlACUAHQAdACUAHQAdACUAJQAlAB4AHQAeAB4AHgAeAB0AHQAlAB0AHQAdAB0AHQAdACUAJQAlACUAJQAdACUAJQAgACUAHQAdACUAJQAlACUAJQAlACUAJQAeAB4AHgAlACUAIAAgACAAIAAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB0AHgAeAB4AFwAXABcAFwAXABcAHgATABMAJQAeAB4AHgAWABEAFgARABYAEQAWABEAFgARABYAEQAWABEATwBPAE8ATwBPAE8ATwBPAE8ATwBPAE8ATwBPAE8ATwBPAE8ATwBPAE8ATwAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeABYAEQAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAWABEAFgARABYAEQAWABEAFgARAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AFgARABYAEQAWABEAFgARABYAEQAWABEAFgARABYAEQAWABEAFgARABYAEQAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAWABEAFgARAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AFgARAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAdAB0AHQAdAB0AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgArACsAHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AKwAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AUABQAFAAUAAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAEAAQABAAeAB4AKwArACsAKwArABMADQANAA0AUAATAA0AUABQAFAAUABQAFAAUABQACsAKwArACsAKwArACsAUAANACsAKwArACsAKwArACsAKwArACsAKwArACsAKwAEAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArACsAKwArACsAKwArACsAKwBQAFAAUABQAFAAUABQACsAUABQAFAAUABQAFAAUAArAFAAUABQAFAAUABQAFAAKwBQAFAAUABQAFAAUABQACsAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXAA0ADQANAA0ADQANAA0ADQAeAA0AFgANAB4AHgAXABcAHgAeABcAFwAWABEAFgARABYAEQAWABEADQANAA0ADQATAFAADQANAB4ADQANAB4AHgAeAB4AHgAMAAwADQANAA0AHgANAA0AFgANAA0ADQANAA0ADQANAA0AHgANAB4ADQANAB4AHgAeACsAKwArACsAKwArACsAKwArACsAKwArACsAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACsAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAKwArACsAKwArACsAKwArACsAKwArACsAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwAlACUAJQAlACUAJQAlACUAJQAlACUAJQArACsAKwArAA0AEQARACUAJQBHAFcAVwAWABEAFgARABYAEQAWABEAFgARACUAJQAWABEAFgARABYAEQAWABEAFQAWABEAEQAlAFcAVwBXAFcAVwBXAFcAVwBXAAQABAAEAAQABAAEACUAVwBXAFcAVwA2ACUAJQBXAFcAVwBHAEcAJQAlACUAKwBRAFcAUQBXAFEAVwBRAFcAUQBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFEAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBRAFcAUQBXAFEAVwBXAFcAVwBXAFcAUQBXAFcAVwBXAFcAVwBRAFEAKwArAAQABAAVABUARwBHAFcAFQBRAFcAUQBXAFEAVwBRAFcAUQBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFEAVwBRAFcAUQBXAFcAVwBXAFcAVwBRAFcAVwBXAFcAVwBXAFEAUQBXAFcAVwBXABUAUQBHAEcAVwArACsAKwArACsAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAKwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAKwAlACUAVwBXAFcAVwAlACUAJQAlACUAJQAlACUAJQAlACsAKwArACsAKwArACsAKwArACsAKwArAFEAUQBRAFEAUQBRAFEAUQBRAFEAUQBRAFEAUQBRAFEAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQArAFcAVwBXAFcAVwBXAFcAVwBXAFcAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQBPAE8ATwBPAE8ATwBPAE8AJQBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXACUAJQAlAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAEcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAKwArACsAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQArACsAKwArACsAKwArACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAADQATAA0AUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABLAEsASwBLAEsASwBLAEsASwBLAFAAUAArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAFAABAAEAAQABAAeAAQABAAEAAQABAAEAAQABAAEAAQAHgBQAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AUABQAAQABABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAAQABAAeAA0ADQANAA0ADQArACsAKwArACsAKwArACsAHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAFAAUABQAFAAUABQAFAAUABQAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AUAAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgBQAB4AHgAeAB4AHgAeAFAAHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgArACsAHgAeAB4AHgAeAB4AHgAeAB4AKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwAeAB4AUABQAFAAUABQAFAAUABQAFAAUABQAAQAUABQAFAABABQAFAAUABQAAQAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAAQABAAEAAQABAAeAB4AHgAeAAQAKwArACsAUABQAFAAUABQAFAAHgAeABoAHgArACsAKwArACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAADgAOABMAEwArACsAKwArACsAKwArACsABAAEAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAAQABAAEAAQABAAEACsAKwArACsAKwArACsAKwANAA0ASwBLAEsASwBLAEsASwBLAEsASwArACsAKwArACsAKwAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABABQAFAAUABQAFAAUAAeAB4AHgBQAA4AUABQAAQAUABQAFAAUABQAFAABAAEAAQABAAEAAQABAAEAA0ADQBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQAKwArACsAKwArACsAKwArACsAKwArAB4AWABYAFgAWABYAFgAWABYAFgAWABYAFgAWABYAFgAWABYAFgAWABYAFgAWABYAFgAWABYAFgAWABYACsAKwArAAQAHgAeAB4AHgAeAB4ADQANAA0AHgAeAB4AHgArAFAASwBLAEsASwBLAEsASwBLAEsASwArACsAKwArAB4AHgBcAFwAXABcAFwAKgBcAFwAXABcAFwAXABcAFwAXABcAEsASwBLAEsASwBLAEsASwBLAEsAXABcAFwAXABcACsAUABQAFAAUABQAFAAUABQAFAABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEACsAKwArACsAKwArACsAKwArAFAAUABQAAQAUABQAFAAUABQAFAAUABQAAQABAArACsASwBLAEsASwBLAEsASwBLAEsASwArACsAHgANAA0ADQBcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAKgAqACoAXAAqACoAKgBcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXAAqAFwAKgAqACoAXABcACoAKgBcAFwAXABcAFwAKgAqAFwAKgBcACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArAFwAXABcACoAKgBQAFAAUABQAFAAUABQAFAAUABQAFAABAAEAAQABAAEAA0ADQBQAFAAUAAEAAQAKwArACsAKwArACsAKwArACsAKwBQAFAAUABQAFAAUAArACsAUABQAFAAUABQAFAAKwArAFAAUABQAFAAUABQACsAKwArACsAKwArACsAKwArAFAAUABQAFAAUABQAFAAKwBQAFAAUABQAFAAUABQACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAHgAeACsAKwArACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAEAAQABAAEAAQABAAEAAQADQAEAAQAKwArAEsASwBLAEsASwBLAEsASwBLAEsAKwArACsAKwArACsAVABVAFUAVQBVAFUAVQBVAFUAVQBVAFUAVQBVAFUAVQBVAFUAVQBVAFUAVQBVAFUAVQBVAFUAVQBUAFUAVQBVAFUAVQBVAFUAVQBVAFUAVQBVAFUAVQBVAFUAVQBVAFUAVQBVAFUAVQBVAFUAVQBVACsAKwArACsAKwArACsAKwArACsAKwArAFkAWQBZAFkAWQBZAFkAWQBZAFkAWQBZAFkAWQBZAFkAWQBZAFkAKwArACsAKwBaAFoAWgBaAFoAWgBaAFoAWgBaAFoAWgBaAFoAWgBaAFoAWgBaAFoAWgBaAFoAWgBaAFoAWgBaAFoAKwArACsAKwAGAAYABgAGAAYABgAGAAYABgAGAAYABgAGAAYABgAGAAYABgAGAAYABgAGAAYABgAGAAYABgAGAAYABgAGAAYAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXACUAJQBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAJQAlACUAJQAlACUAUABQAFAAUABQAFAAUAArACsAKwArACsAKwArACsAKwArACsAKwBQAFAAUABQAFAAKwArACsAKwArAFYABABWAFYAVgBWAFYAVgBWAFYAVgBWAB4AVgBWAFYAVgBWAFYAVgBWAFYAVgBWAFYAVgArAFYAVgBWAFYAVgArAFYAKwBWAFYAKwBWAFYAKwBWAFYAVgBWAFYAVgBWAFYAVgBWAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAEQAWAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUAAaAB4AKwArAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQAGAARABEAGAAYABMAEwAWABEAFAArACsAKwArACsAKwAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEACUAJQAlACUAJQAWABEAFgARABYAEQAWABEAFgARABYAEQAlACUAFgARACUAJQAlACUAJQAlACUAEQAlABEAKwAVABUAEwATACUAFgARABYAEQAWABEAJQAlACUAJQAlACUAJQAlACsAJQAbABoAJQArACsAKwArAFAAUABQAFAAUAArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwArAAcAKwATACUAJQAbABoAJQAlABYAEQAlACUAEQAlABEAJQBXAFcAVwBXAFcAVwBXAFcAVwBXABUAFQAlACUAJQATACUAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXABYAJQARACUAJQAlAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwAWACUAEQAlABYAEQARABYAEQARABUAVwBRAFEAUQBRAFEAUQBRAFEAUQBRAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAEcARwArACsAVwBXAFcAVwBXAFcAKwArAFcAVwBXAFcAVwBXACsAKwBXAFcAVwBXAFcAVwArACsAVwBXAFcAKwArACsAGgAbACUAJQAlABsAGwArAB4AHgAeAB4AHgAeAB4AKwArACsAKwArACsAKwArACsAKwAEAAQABAAQAB0AKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwBQAFAAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArACsAKwArACsADQANAA0AKwArACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAKwArAB4AHgAeAB4AHgAeAB4AHgAeAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgBQAFAAHgAeAB4AKwAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAAQAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwAEAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAKwArACsAKwArACsAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwArACsAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAABAAEAAQABAAEACsAKwArACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArAA0AUABQAFAAUAArACsAKwArAFAAUABQAFAAUABQAFAAUAANAFAAUABQAFAAUAArACsAKwArACsAKwArACsAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwArACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAKwArACsAKwArACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAKwArACsAKwArACsAKwArACsAKwAeACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAUABQAFAAUABQAFAAKwArAFAAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArAFAAUAArACsAKwBQACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwANAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAeAB4AUABQAFAAUABQAFAAUAArACsAKwArACsAKwArAFAAUABQAFAAUABQAFAAUABQACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArAFAAUAArACsAKwArACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAKwArAA0AUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAKwArACsAKwAeAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAKwArACsAUABQAFAAUABQAAQABAAEACsABAAEACsAKwArACsAKwAEAAQABAAEAFAAUABQAFAAKwBQAFAAUAArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwArAAQABAAEACsAKwArACsABABQAFAAUABQAFAAUABQAFAAUAArACsAKwArACsAKwArAA0ADQANAA0ADQANAA0ADQAeACsAKwArACsAKwArACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAeAFAAUABQAFAAUABQAFAAUAAeAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAAQABAArACsAKwArAFAAUABQAFAAUAANAA0ADQANAA0ADQAUACsAKwArACsAKwArACsAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwArACsADQANAA0ADQANAA0ADQBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArACsAKwArACsAKwArAB4AHgAeAB4AKwArACsAKwArACsAKwArACsAKwArACsAUABQAFAAUABQAFAAUAArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArAFAAUABQAFAAUABQAFAAUABQACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAKwArACsAKwArACsAKwArACsAKwArACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArACsAKwArACsAKwArAFAAUABQAFAAUABQAAQABAAEAAQAKwArACsAKwArACsAKwArAEsASwBLAEsASwBLAEsASwBLAEsAKwArACsAKwArACsAUABQAFAAUABQAFAAUABQAFAAUAArAAQABAANACsAKwBQAFAAKwArACsAKwArACsAKwArACsAKwArACsAKwArAFAAUABQAFAAUABQAAQABAAEAAQABAAEAAQABAAEAAQABABQAFAAUABQAB4AHgAeAB4AHgArACsAKwArACsAKwAEAAQABAAEAAQABAAEAA0ADQAeAB4AHgAeAB4AKwArACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAEsASwBLAEsASwBLAEsASwBLAEsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsABABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAAQABAAEAAQABAAEAAQABAAEAAQABAAeAB4AHgANAA0ADQANACsAKwArACsAKwArACsAKwArACsAKwAeACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwArACsAKwArACsAKwBLAEsASwBLAEsASwBLAEsASwBLACsAKwArACsAKwArAFAAUABQAFAAUABQAFAABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEACsASwBLAEsASwBLAEsASwBLAEsASwANAA0ADQANAFAABAAEAFAAKwArACsAKwArACsAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAABAAeAA4AUAArACsAKwArACsAKwArACsAKwAEAFAAUABQAFAADQANAB4ADQAEAAQABAAEAB4ABAAEAEsASwBLAEsASwBLAEsASwBLAEsAUAAOAFAADQANAA0AKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwArACsAKwArACsAKwArACsAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAEAAQABAAEAAQABAAEAAQABAAEAAQABAANAA0AHgANAA0AHgAEACsAUABQAFAAUABQAFAAUAArAFAAKwBQAFAAUABQACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwBQAFAAUABQAFAAUABQAFAAUABQAA0AKwArACsAKwArACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAEAAQABAAEAAQABAAEAAQABAAEAAQAKwArACsAKwArAEsASwBLAEsASwBLAEsASwBLAEsAKwArACsAKwArACsABAAEAAQABAArAFAAUABQAFAAUABQAFAAUAArACsAUABQACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwBQAFAAUABQAFAAUABQACsAUABQACsAUABQAFAAUABQACsABAAEAFAABAAEAAQABAAEAAQABAArACsABAAEACsAKwAEAAQABAArACsAUAArACsAKwArACsAKwAEACsAKwArACsAKwBQAFAAUABQAFAABAAEACsAKwAEAAQABAAEAAQABAAEACsAKwArAAQABAAEAAQABAArACsAKwArACsAKwArACsAKwArACsABAAEAAQABAAEAAQABABQAFAAUABQAA0ADQANAA0AHgBLAEsASwBLAEsASwBLAEsASwBLAA0ADQArAB4ABABQAFAAUAArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwAEAAQABAAEAFAAUAAeAFAAKwArACsAKwArACsAKwArAEsASwBLAEsASwBLAEsASwBLAEsAKwArACsAKwArACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAABAAEAAQABAAEAAQABAArACsABAAEAAQABAAEAAQABAAEAAQADgANAA0AEwATAB4AHgAeAA0ADQANAA0ADQANAA0ADQANAA0ADQANAA0ADQANAFAAUABQAFAABAAEACsAKwAEAA0ADQAeAFAAKwArACsAKwArACsAKwArACsAKwArAEsASwBLAEsASwBLAEsASwBLAEsAKwArACsAKwArACsADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAFAAKwArACsAKwArACsAKwBLAEsASwBLAEsASwBLAEsASwBLACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAKwArACoAKgAqACoAKgAqACoAKgAqACoAKgAqACoAKgAqACsAKwArACsASwBLAEsASwBLAEsASwBLAEsASwBcAFwADQANAA0AKgBQAFAAUABQAFAAUABQAFAAUABQAFAAUAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAeACsAKwArACsASwBLAEsASwBLAEsASwBLAEsASwBQAFAAUABQAFAAUABQAFAAUAArACsAKwArACsAKwArACsAKwArACsAKwBQAFAAUABQAFAAUABQAFAAKwArAFAAKwArAFAAUABQAFAAUABQAFAAUAArAFAAUAArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAABAAEAAQABAAEAAQAKwAEAAQAKwArAAQABAAEAAQAUAAEAFAABAAEAA0ADQANACsAKwArACsAKwArACsAKwArAEsASwBLAEsASwBLAEsASwBLAEsAKwArACsAKwArACsAUABQAFAAUABQAFAAUABQACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAABAAEAAQABAAEAAQABAArACsABAAEAAQABAAEAAQABABQAA4AUAAEACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArAFAABAAEAAQABAAEAAQABAAEAAQABABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAEAAQABAAEAAQABAAEAFAABAAEAAQABAAOAB4ADQANAA0ADQAOAB4ABAArACsAKwArACsAKwArACsAUAAEAAQABAAEAAQABAAEAAQABAAEAAQAUABQAFAAUABQAFAAUABQAFAAUAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAA0ADQANAFAADgAOAA4ADQANACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwBQAFAAUABQAFAAUABQAFAAUAArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAABAAEAAQABAAEAAQABAAEACsABAAEAAQABAAEAAQABAAEAFAADQANAA0ADQANACsAKwArACsAKwArACsAKwArACsASwBLAEsASwBLAEsASwBLAEsASwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArACsAKwAOABMAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwArAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAArAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAArACsAKwArACsAKwArACsAKwBQAFAAUABQAFAAUABQACsAUABQACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAEAAQABAAEAAQABAArACsAKwAEACsABAAEACsABAAEAAQABAAEAAQABABQAAQAKwArACsAKwArACsAKwArAEsASwBLAEsASwBLAEsASwBLAEsAKwArACsAKwArACsAUABQAFAAUABQAFAAKwBQAFAAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAEAAQABAAEAAQAKwAEAAQAKwAEAAQABAAEAAQAUAArACsAKwArACsAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAABAAEAAQABAAeAB4AKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwBQACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAB4AHgAeAB4AHgAeAB4AHgAaABoAGgAaAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgArACsAKwArACsAKwArACsAKwArACsAKwArAA0AUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAKwArACsAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsADQANAA0ADQANACsAKwArACsAKwArACsAKwArACsAKwBQAFAAUABQACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAASABIAEgAQwBDAEMAUABQAFAAUABDAFAAUABQAEgAQwBIAEMAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAASABDAEMAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwAJAAkACQAJAAkACQAJABYAEQArACsAKwArACsAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABIAEMAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArAEsASwBLAEsASwBLAEsASwBLAEsAKwArACsAKwANAA0AKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwArAAQABAAEAAQABAANACsAKwArACsAKwArACsAKwArACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAEAAQABAAEAAQABAAEAA0ADQANAB4AHgAeAB4AHgAeAFAAUABQAFAADQAeACsAKwArACsAKwArACsAKwArACsASwBLAEsASwBLAEsASwBLAEsASwArAFAAUABQAFAAUABQAFAAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArACsAKwArACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAANAA0AHgAeACsAKwArACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAKwArACsAKwAEAFAABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQAKwArACsAKwArACsAKwAEAAQABAAEAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAARwBHABUARwAJACsAKwArACsAKwArACsAKwArACsAKwAEAAQAKwArACsAKwArACsAKwArACsAKwArACsAKwArAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXACsAKwArACsAKwArACsAKwBXAFcAVwBXAFcAVwBXAFcAVwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAUQBRAFEAKwArACsAKwArACsAKwArACsAKwArACsAKwBRAFEAUQBRACsAKwArACsAKwArACsAKwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXACsAKwArACsAUABQAFAAUABQAFAAUABQAFAAUABQACsAKwArACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAKwArACsAKwArACsAUABQAFAAUABQAFAAUABQAFAAUAArACsAHgAEAAQADQAEAAQABAAEACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgArACsAKwArACsAKwArACsAKwArAB4AHgAeAB4AHgAeAB4AKwArAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAAQABAAEAAQABAAeAB4AHgAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAB4AHgAEAAQABAAEAAQABAAEAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4ABAAEAAQABAAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4ABAAEAAQAHgArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAKwArACsAKwArACsAKwArACsAKwArAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgArACsAKwArACsAKwArACsAKwAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgArAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AKwBQAFAAKwArAFAAKwArAFAAUAArACsAUABQAFAAUAArAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeACsAUAArAFAAUABQAFAAUABQAFAAKwAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AKwBQAFAAUABQACsAKwBQAFAAUABQAFAAUABQAFAAKwBQAFAAUABQAFAAUABQACsAHgAeAFAAUABQAFAAUAArAFAAKwArACsAUABQAFAAUABQAFAAUAArAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAHgBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgBQAFAAUABQAFAAUABQAFAAUABQAFAAHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAB4AHgAeAB4AHgAeAB4AHgAeACsAKwBLAEsASwBLAEsASwBLAEsASwBLAEsASwBLAEsASwBLAEsASwBLAEsASwBLAEsASwBLAEsASwBLAEsASwBLAEsASwBLAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAeAB4AHgAeAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAeAB4AHgAeAB4AHgAeAB4ABAAeAB4AHgAeAB4AHgAeAB4AHgAeAAQAHgAeAA0ADQANAA0AHgArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwAEAAQABAAEAAQAKwAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArAAQABAAEAAQABAAEAAQAKwAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQAKwArAAQABAAEAAQABAAEAAQAKwAEAAQAKwAEAAQABAAEAAQAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArACsAKwAEAAQABAAEAAQABAAEAFAAUABQAFAAUABQAFAAKwArAEsASwBLAEsASwBLAEsASwBLAEsAKwArACsAKwBQAB4AKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUAAEAAQABAAEAEsASwBLAEsASwBLAEsASwBLAEsAKwArACsAKwArABsAUABQAFAAUABQACsAKwBQAFAAUABQAFAAUABQAFAAUAAEAAQABAAEAAQABAAEACsAKwArACsAKwArACsAKwArAB4AHgAeAB4ABAAEAAQABAAEAAQABABQACsAKwArACsASwBLAEsASwBLAEsASwBLAEsASwArACsAKwArABYAFgArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAGgBQAFAAUAAaAFAAUABQAFAAKwArACsAKwArACsAKwArACsAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAeAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAKwBQAFAAUABQACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwBQAFAAKwBQACsAKwBQACsAUABQAFAAUABQAFAAUABQAFAAUAArAFAAUABQAFAAKwBQACsAUAArACsAKwArACsAKwBQACsAKwArACsAUAArAFAAKwBQACsAUABQAFAAKwBQAFAAKwBQACsAKwBQACsAUAArAFAAKwBQACsAUAArAFAAUAArAFAAKwArAFAAUABQAFAAKwBQAFAAUABQAFAAUABQACsAUABQAFAAUAArAFAAUABQAFAAKwBQACsAUABQAFAAUABQAFAAUABQAFAAUAArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArACsAKwArACsAUABQAFAAKwBQAFAAUABQAFAAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwAeAB4AKwArACsAKwArACsAKwArACsAKwArACsAKwArAE8ATwBPAE8ATwBPAE8ATwBPAE8ATwBPAE8AJQAlACUAHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHgAeAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB4AHgAeACUAJQAlAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQApACkAKQApACkAKQApACkAKQApACkAKQApACkAKQApACkAKQApACkAKQApACkAKQApACkAJQAlACUAJQAlACAAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAeAB4AJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlAB4AHgAlACUAJQAlACUAHgAlACUAJQAlACUAIAAgACAAJQAlACAAJQAlACAAIAAgACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACEAIQAhACEAIQAlACUAIAAgACUAJQAgACAAIAAgACAAIAAgACAAIAAgACAAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAJQAlACUAIAAlACUAJQAlACAAIAAgACUAIAAgACAAJQAlACUAJQAlACUAJQAgACUAIAAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAHgAlAB4AJQAeACUAJQAlACUAJQAgACUAJQAlACUAHgAlAB4AHgAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlAB4AHgAeAB4AHgAeAB4AJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAeAB4AHgAeAB4AHgAeAB4AHgAeACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACAAIAAlACUAJQAlACAAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACAAJQAlACUAJQAgACAAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAHgAeAB4AHgAeAB4AHgAeACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAeAB4AHgAeAB4AHgAlACUAJQAlACUAJQAlACAAIAAgACUAJQAlACAAIAAgACAAIAAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeABcAFwAXABUAFQAVAB4AHgAeAB4AJQAlACUAIAAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACAAIAAgACUAJQAlACUAJQAlACUAJQAlACAAJQAlACUAJQAlACUAJQAlACUAJQAlACAAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AJQAlACUAJQAlACUAJQAlACUAJQAlACUAHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AJQAlACUAJQAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeACUAJQAlACUAJQAlACUAJQAeAB4AHgAeAB4AHgAeAB4AHgAeACUAJQAlACUAJQAlAB4AHgAeAB4AHgAeAB4AHgAlACUAJQAlACUAJQAlACUAHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAgACUAJQAgACUAJQAlACUAJQAlACUAJQAgACAAIAAgACAAIAAgACAAJQAlACUAJQAlACUAIAAlACUAJQAlACUAJQAlACUAJQAgACAAIAAgACAAIAAgACAAIAAgACUAJQAgACAAIAAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAgACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACAAIAAlACAAIAAlACAAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAgACAAIAAlACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAJQAlAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AKwAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArAEsASwBLAEsASwBLAEsASwBLAEsAKwArACsAKwArACsAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAKwArAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXACUAJQBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwAlACUAJQAlACUAJQAlACUAJQAlACUAVwBXACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAKwAEACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArAA==",F9=50,Nwe=1,Kee=2,qee=3,Cwe=4,_we=5,O9=7,zee=8,D9=9,$0=10,fk=11,R9=12,hk=13,Ewe=14,Vy=15,Ak=16,uC=17,uy=18,Swe=19,M9=20,mk=21,dy=22,T3=23,rx=24,_u=25,Hy=26,$y=27,nx=28,Iwe=29,gp=30,jwe=31,dC=32,fC=33,pk=34,gk=35,xk=36,N2=37,vk=38,dE=39,fE=40,k3=41,Wee=42,Pwe=43,Bwe=[9001,65288],Xee="!",fa="",hC="",yk=vwe(wwe),Ch=[gp,xk],bk=[Nwe,Kee,qee,_we],Yee=[$0,zee],L9=[$y,Hy],Twe=bk.concat(Yee),U9=[vk,dE,fE,pk,gk],kwe=[Vy,hk],Fwe=function(t,e){e===void 0&&(e="strict");var r=[],n=[],a=[];return t.forEach(function(s,o){var l=yk.get(s);if(l>F9?(a.push(!0),l-=F9):a.push(!1),["normal","auto","loose"].indexOf(e)!==-1&&[8208,8211,12316,12448].indexOf(s)!==-1)return n.push(o),r.push(Ak);if(l===Cwe||l===fk){if(o===0)return n.push(o),r.push(gp);var c=r[o-1];return Twe.indexOf(c)===-1?(n.push(n[o-1]),r.push(c)):(n.push(o),r.push(gp))}if(n.push(o),l===jwe)return r.push(e==="strict"?mk:N2);if(l===Wee||l===Iwe)return r.push(gp);if(l===Pwe)return s>=131072&&s<=196605||s>=196608&&s<=262141?r.push(N2):r.push(gp);r.push(l)}),[n,r,a]},F3=function(t,e,r,n){var a=n[r];if(Array.isArray(t)?t.indexOf(a)!==-1:t===a)for(var s=r;s<=n.length;){s++;var o=n[s];if(o===e)return!0;if(o!==$0)break}if(a===$0)for(var s=r;s>0;){s--;var l=n[s];if(Array.isArray(t)?t.indexOf(l)!==-1:t===l)for(var c=r;c<=n.length;){c++;var o=n[c];if(o===e)return!0;if(o!==$0)break}if(l!==$0)break}return!1},Q9=function(t,e){for(var r=t;r>=0;){var n=e[r];if(n===$0)r--;else return n}return 0},Owe=function(t,e,r,n,a){if(r[n]===0)return fa;var s=n-1;if(Array.isArray(a)&&a[s]===!0)return fa;var o=s-1,l=s+1,c=e[s],u=o>=0?e[o]:0,d=e[l];if(c===Kee&&d===qee)return fa;if(bk.indexOf(c)!==-1)return Xee;if(bk.indexOf(d)!==-1||Yee.indexOf(d)!==-1)return fa;if(Q9(s,e)===zee)return hC;if(yk.get(t[s])===fk||(c===dC||c===fC)&&yk.get(t[l])===fk||c===O9||d===O9||c===D9||[$0,hk,Vy].indexOf(c)===-1&&d===D9||[uC,uy,Swe,rx,nx].indexOf(d)!==-1||Q9(s,e)===dy||F3(T3,dy,s,e)||F3([uC,uy],mk,s,e)||F3(R9,R9,s,e))return fa;if(c===$0)return hC;if(c===T3||d===T3)return fa;if(d===Ak||c===Ak)return hC;if([hk,Vy,mk].indexOf(d)!==-1||c===Ewe||u===xk&&kwe.indexOf(c)!==-1||c===nx&&d===xk||d===M9||Ch.indexOf(d)!==-1&&c===_u||Ch.indexOf(c)!==-1&&d===_u||c===$y&&[N2,dC,fC].indexOf(d)!==-1||[N2,dC,fC].indexOf(c)!==-1&&d===Hy||Ch.indexOf(c)!==-1&&L9.indexOf(d)!==-1||L9.indexOf(c)!==-1&&Ch.indexOf(d)!==-1||[$y,Hy].indexOf(c)!==-1&&(d===_u||[dy,Vy].indexOf(d)!==-1&&e[l+1]===_u)||[dy,Vy].indexOf(c)!==-1&&d===_u||c===_u&&[_u,nx,rx].indexOf(d)!==-1)return fa;if([_u,nx,rx,uC,uy].indexOf(d)!==-1)for(var f=s;f>=0;){var A=e[f];if(A===_u)return fa;if([nx,rx].indexOf(A)!==-1)f--;else break}if([$y,Hy].indexOf(d)!==-1)for(var f=[uC,uy].indexOf(c)!==-1?o:s;f>=0;){var A=e[f];if(A===_u)return fa;if([nx,rx].indexOf(A)!==-1)f--;else break}if(vk===c&&[vk,dE,pk,gk].indexOf(d)!==-1||[dE,pk].indexOf(c)!==-1&&[dE,fE].indexOf(d)!==-1||[fE,gk].indexOf(c)!==-1&&d===fE||U9.indexOf(c)!==-1&&[M9,Hy].indexOf(d)!==-1||U9.indexOf(d)!==-1&&c===$y||Ch.indexOf(c)!==-1&&Ch.indexOf(d)!==-1||c===rx&&Ch.indexOf(d)!==-1||Ch.concat(_u).indexOf(c)!==-1&&d===dy&&Bwe.indexOf(t[l])===-1||Ch.concat(_u).indexOf(d)!==-1&&c===uy)return fa;if(c===k3&&d===k3){for(var h=r[s],m=1;h>0&&(h--,e[h]===k3);)m++;if(m%2!==0)return fa}return c===dC&&d===fC?fa:hC},Dwe=function(t,e){e||(e={lineBreak:"normal",wordBreak:"normal"});var r=Fwe(t,e.lineBreak),n=r[0],a=r[1],s=r[2];(e.wordBreak==="break-all"||e.wordBreak==="break-word")&&(a=a.map(function(l){return[_u,gp,Wee].indexOf(l)!==-1?N2:l}));var o=e.wordBreak==="keep-all"?s.map(function(l,c){return l&&t[c]>=19968&&t[c]<=40959}):void 0;return[n,a,o]},Rwe=function(){function t(e,r,n,a){this.codePoints=e,this.required=r===Xee,this.start=n,this.end=a}return t.prototype.slice=function(){return Mi.apply(void 0,this.codePoints.slice(this.start,this.end))},t}(),Mwe=function(t,e){var r=zj(t),n=Dwe(r,e),a=n[0],s=n[1],o=n[2],l=r.length,c=0,u=0;return{next:function(){if(u>=l)return{done:!0,value:null};for(var d=fa;u<l&&(d=Owe(r,s,a,++u,o))===fa;);if(d!==fa||u===l){var f=new Rwe(r,d,c,u);return c=u,{value:f,done:!1}}return{done:!0,value:null}}}},Lwe=1,Uwe=2,Fw=4,V9=8,bS=10,H9=47,vb=92,Qwe=9,Vwe=32,AC=34,fy=61,Hwe=35,$we=36,Gwe=37,mC=39,pC=40,hy=41,Kwe=95,Xc=45,qwe=33,zwe=60,Wwe=62,Xwe=64,Ywe=91,Jwe=93,Zwe=61,eNe=123,gC=63,tNe=125,$9=124,rNe=126,nNe=128,G9=65533,O3=42,Np=43,aNe=44,sNe=58,iNe=59,C2=46,oNe=0,lNe=8,cNe=11,uNe=14,dNe=31,fNe=127,Df=-1,Jee=48,Zee=97,ete=101,hNe=102,ANe=117,mNe=122,tte=65,rte=69,nte=70,pNe=85,gNe=90,Jl=function(t){return t>=Jee&&t<=57},xNe=function(t){return t>=55296&&t<=57343},ax=function(t){return Jl(t)||t>=tte&&t<=nte||t>=Zee&&t<=hNe},vNe=function(t){return t>=Zee&&t<=mNe},yNe=function(t){return t>=tte&&t<=gNe},bNe=function(t){return vNe(t)||yNe(t)},wNe=function(t){return t>=nNe},xC=function(t){return t===bS||t===Qwe||t===Vwe},wS=function(t){return bNe(t)||wNe(t)||t===Kwe},K9=function(t){return wS(t)||Jl(t)||t===Xc},NNe=function(t){return t>=oNe&&t<=lNe||t===cNe||t>=uNe&&t<=dNe||t===fNe},E0=function(t,e){return t!==vb?!1:e!==bS},vC=function(t,e,r){return t===Xc?wS(e)||E0(e,r):wS(t)?!0:!!(t===vb&&E0(t,e))},D3=function(t,e,r){return t===Np||t===Xc?Jl(e)?!0:e===C2&&Jl(r):Jl(t===C2?e:t)},CNe=function(t){var e=0,r=1;(t[e]===Np||t[e]===Xc)&&(t[e]===Xc&&(r=-1),e++);for(var n=[];Jl(t[e]);)n.push(t[e++]);var a=n.length?parseInt(Mi.apply(void 0,n),10):0;t[e]===C2&&e++;for(var s=[];Jl(t[e]);)s.push(t[e++]);var o=s.length,l=o?parseInt(Mi.apply(void 0,s),10):0;(t[e]===rte||t[e]===ete)&&e++;var c=1;(t[e]===Np||t[e]===Xc)&&(t[e]===Xc&&(c=-1),e++);for(var u=[];Jl(t[e]);)u.push(t[e++]);var d=u.length?parseInt(Mi.apply(void 0,u),10):0;return r*(a+l*Math.pow(10,-o))*Math.pow(10,c*d)},_Ne={type:2},ENe={type:3},SNe={type:4},INe={type:13},jNe={type:8},PNe={type:21},BNe={type:9},TNe={type:10},kNe={type:11},FNe={type:12},ONe={type:14},yC={type:23},DNe={type:1},RNe={type:25},MNe={type:24},LNe={type:26},UNe={type:27},QNe={type:28},VNe={type:29},HNe={type:31},wk={type:32},ate=function(){function t(){this._value=[]}return t.prototype.write=function(e){this._value=this._value.concat(zj(e))},t.prototype.read=function(){for(var e=[],r=this.consumeToken();r!==wk;)e.push(r),r=this.consumeToken();return e},t.prototype.consumeToken=function(){var e=this.consumeCodePoint();switch(e){case AC:return this.consumeStringToken(AC);case Hwe:var r=this.peekCodePoint(0),n=this.peekCodePoint(1),a=this.peekCodePoint(2);if(K9(r)||E0(n,a)){var s=vC(r,n,a)?Uwe:Lwe,o=this.consumeName();return{type:5,value:o,flags:s}}break;case $we:if(this.peekCodePoint(0)===fy)return this.consumeCodePoint(),INe;break;case mC:return this.consumeStringToken(mC);case pC:return _Ne;case hy:return ENe;case O3:if(this.peekCodePoint(0)===fy)return this.consumeCodePoint(),ONe;break;case Np:if(D3(e,this.peekCodePoint(0),this.peekCodePoint(1)))return this.reconsumeCodePoint(e),this.consumeNumericToken();break;case aNe:return SNe;case Xc:var l=e,c=this.peekCodePoint(0),u=this.peekCodePoint(1);if(D3(l,c,u))return this.reconsumeCodePoint(e),this.consumeNumericToken();if(vC(l,c,u))return this.reconsumeCodePoint(e),this.consumeIdentLikeToken();if(c===Xc&&u===Wwe)return this.consumeCodePoint(),this.consumeCodePoint(),MNe;break;case C2:if(D3(e,this.peekCodePoint(0),this.peekCodePoint(1)))return this.reconsumeCodePoint(e),this.consumeNumericToken();break;case H9:if(this.peekCodePoint(0)===O3)for(this.consumeCodePoint();;){var d=this.consumeCodePoint();if(d===O3&&(d=this.consumeCodePoint(),d===H9))return this.consumeToken();if(d===Df)return this.consumeToken()}break;case sNe:return LNe;case iNe:return UNe;case zwe:if(this.peekCodePoint(0)===qwe&&this.peekCodePoint(1)===Xc&&this.peekCodePoint(2)===Xc)return this.consumeCodePoint(),this.consumeCodePoint(),RNe;break;case Xwe:var f=this.peekCodePoint(0),A=this.peekCodePoint(1),h=this.peekCodePoint(2);if(vC(f,A,h)){var o=this.consumeName();return{type:7,value:o}}break;case Ywe:return QNe;case vb:if(E0(e,this.peekCodePoint(0)))return this.reconsumeCodePoint(e),this.consumeIdentLikeToken();break;case Jwe:return VNe;case Zwe:if(this.peekCodePoint(0)===fy)return this.consumeCodePoint(),jNe;break;case eNe:return kNe;case tNe:return FNe;case ANe:case pNe:var m=this.peekCodePoint(0),p=this.peekCodePoint(1);return m===Np&&(ax(p)||p===gC)&&(this.consumeCodePoint(),this.consumeUnicodeRangeToken()),this.reconsumeCodePoint(e),this.consumeIdentLikeToken();case $9:if(this.peekCodePoint(0)===fy)return this.consumeCodePoint(),BNe;if(this.peekCodePoint(0)===$9)return this.consumeCodePoint(),PNe;break;case rNe:if(this.peekCodePoint(0)===fy)return this.consumeCodePoint(),TNe;break;case Df:return wk}return xC(e)?(this.consumeWhiteSpace(),HNe):Jl(e)?(this.reconsumeCodePoint(e),this.consumeNumericToken()):wS(e)?(this.reconsumeCodePoint(e),this.consumeIdentLikeToken()):{type:6,value:Mi(e)}},t.prototype.consumeCodePoint=function(){var e=this._value.shift();return typeof e>"u"?-1:e},t.prototype.reconsumeCodePoint=function(e){this._value.unshift(e)},t.prototype.peekCodePoint=function(e){return e>=this._value.length?-1:this._value[e]},t.prototype.consumeUnicodeRangeToken=function(){for(var e=[],r=this.consumeCodePoint();ax(r)&&e.length<6;)e.push(r),r=this.consumeCodePoint();for(var n=!1;r===gC&&e.length<6;)e.push(r),r=this.consumeCodePoint(),n=!0;if(n){var a=parseInt(Mi.apply(void 0,e.map(function(c){return c===gC?Jee:c})),16),s=parseInt(Mi.apply(void 0,e.map(function(c){return c===gC?nte:c})),16);return{type:30,start:a,end:s}}var o=parseInt(Mi.apply(void 0,e),16);if(this.peekCodePoint(0)===Xc&&ax(this.peekCodePoint(1))){this.consumeCodePoint(),r=this.consumeCodePoint();for(var l=[];ax(r)&&l.length<6;)l.push(r),r=this.consumeCodePoint();var s=parseInt(Mi.apply(void 0,l),16);return{type:30,start:o,end:s}}else return{type:30,start:o,end:o}},t.prototype.consumeIdentLikeToken=function(){var e=this.consumeName();return e.toLowerCase()==="url"&&this.peekCodePoint(0)===pC?(this.consumeCodePoint(),this.consumeUrlToken()):this.peekCodePoint(0)===pC?(this.consumeCodePoint(),{type:19,value:e}):{type:20,value:e}},t.prototype.consumeUrlToken=function(){var e=[];if(this.consumeWhiteSpace(),this.peekCodePoint(0)===Df)return{type:22,value:""};var r=this.peekCodePoint(0);if(r===mC||r===AC){var n=this.consumeStringToken(this.consumeCodePoint());return n.type===0&&(this.consumeWhiteSpace(),this.peekCodePoint(0)===Df||this.peekCodePoint(0)===hy)?(this.consumeCodePoint(),{type:22,value:n.value}):(this.consumeBadUrlRemnants(),yC)}for(;;){var a=this.consumeCodePoint();if(a===Df||a===hy)return{type:22,value:Mi.apply(void 0,e)};if(xC(a))return this.consumeWhiteSpace(),this.peekCodePoint(0)===Df||this.peekCodePoint(0)===hy?(this.consumeCodePoint(),{type:22,value:Mi.apply(void 0,e)}):(this.consumeBadUrlRemnants(),yC);if(a===AC||a===mC||a===pC||NNe(a))return this.consumeBadUrlRemnants(),yC;if(a===vb)if(E0(a,this.peekCodePoint(0)))e.push(this.consumeEscapedCodePoint());else return this.consumeBadUrlRemnants(),yC;else e.push(a)}},t.prototype.consumeWhiteSpace=function(){for(;xC(this.peekCodePoint(0));)this.consumeCodePoint()},t.prototype.consumeBadUrlRemnants=function(){for(;;){var e=this.consumeCodePoint();if(e===hy||e===Df)return;E0(e,this.peekCodePoint(0))&&this.consumeEscapedCodePoint()}},t.prototype.consumeStringSlice=function(e){for(var r=5e4,n="";e>0;){var a=Math.min(r,e);n+=Mi.apply(void 0,this._value.splice(0,a)),e-=a}return this._value.shift(),n},t.prototype.consumeStringToken=function(e){var r="",n=0;do{var a=this._value[n];if(a===Df||a===void 0||a===e)return r+=this.consumeStringSlice(n),{type:0,value:r};if(a===bS)return this._value.splice(0,n),DNe;if(a===vb){var s=this._value[n+1];s!==Df&&s!==void 0&&(s===bS?(r+=this.consumeStringSlice(n),n=-1,this._value.shift()):E0(a,s)&&(r+=this.consumeStringSlice(n),r+=Mi(this.consumeEscapedCodePoint()),n=-1))}n++}while(!0)},t.prototype.consumeNumber=function(){var e=[],r=Fw,n=this.peekCodePoint(0);for((n===Np||n===Xc)&&e.push(this.consumeCodePoint());Jl(this.peekCodePoint(0));)e.push(this.consumeCodePoint());n=this.peekCodePoint(0);var a=this.peekCodePoint(1);if(n===C2&&Jl(a))for(e.push(this.consumeCodePoint(),this.consumeCodePoint()),r=V9;Jl(this.peekCodePoint(0));)e.push(this.consumeCodePoint());n=this.peekCodePoint(0),a=this.peekCodePoint(1);var s=this.peekCodePoint(2);if((n===rte||n===ete)&&((a===Np||a===Xc)&&Jl(s)||Jl(a)))for(e.push(this.consumeCodePoint(),this.consumeCodePoint()),r=V9;Jl(this.peekCodePoint(0));)e.push(this.consumeCodePoint());return[CNe(e),r]},t.prototype.consumeNumericToken=function(){var e=this.consumeNumber(),r=e[0],n=e[1],a=this.peekCodePoint(0),s=this.peekCodePoint(1),o=this.peekCodePoint(2);if(vC(a,s,o)){var l=this.consumeName();return{type:15,number:r,flags:n,unit:l}}return a===Gwe?(this.consumeCodePoint(),{type:16,number:r,flags:n}):{type:17,number:r,flags:n}},t.prototype.consumeEscapedCodePoint=function(){var e=this.consumeCodePoint();if(ax(e)){for(var r=Mi(e);ax(this.peekCodePoint(0))&&r.length<6;)r+=Mi(this.consumeCodePoint());xC(this.peekCodePoint(0))&&this.consumeCodePoint();var n=parseInt(r,16);return n===0||xNe(n)||n>1114111?G9:n}return e===Df?G9:e},t.prototype.consumeName=function(){for(var e="";;){var r=this.consumeCodePoint();if(K9(r))e+=Mi(r);else if(E0(r,this.peekCodePoint(0)))e+=Mi(this.consumeEscapedCodePoint());else return this.reconsumeCodePoint(r),e}},t}(),ste=function(){function t(e){this._tokens=e}return t.create=function(e){var r=new ate;return r.write(e),new t(r.read())},t.parseValue=function(e){return t.create(e).parseComponentValue()},t.parseValues=function(e){return t.create(e).parseComponentValues()},t.prototype.parseComponentValue=function(){for(var e=this.consumeToken();e.type===31;)e=this.consumeToken();if(e.type===32)throw new SyntaxError("Error parsing CSS component value, unexpected EOF");this.reconsumeToken(e);var r=this.consumeComponentValue();do e=this.consumeToken();while(e.type===31);if(e.type===32)return r;throw new SyntaxError("Error parsing CSS component value, multiple values found when expecting only one")},t.prototype.parseComponentValues=function(){for(var e=[];;){var r=this.consumeComponentValue();if(r.type===32)return e;e.push(r),e.push()}},t.prototype.consumeComponentValue=function(){var e=this.consumeToken();switch(e.type){case 11:case 28:case 2:return this.consumeSimpleBlock(e.type);case 19:return this.consumeFunction(e)}return e},t.prototype.consumeSimpleBlock=function(e){for(var r={type:e,values:[]},n=this.consumeToken();;){if(n.type===32||GNe(n,e))return r;this.reconsumeToken(n),r.values.push(this.consumeComponentValue()),n=this.consumeToken()}},t.prototype.consumeFunction=function(e){for(var r={name:e.value,values:[],type:18};;){var n=this.consumeToken();if(n.type===32||n.type===3)return r;this.reconsumeToken(n),r.values.push(this.consumeComponentValue())}},t.prototype.consumeToken=function(){var e=this._tokens.shift();return typeof e>"u"?wk:e},t.prototype.reconsumeToken=function(e){this._tokens.unshift(e)},t}(),Ow=function(t){return t.type===15},p1=function(t){return t.type===17},os=function(t){return t.type===20},$Ne=function(t){return t.type===0},Nk=function(t,e){return os(t)&&t.value===e},ite=function(t){return t.type!==31},Mv=function(t){return t.type!==31&&t.type!==4},hh=function(t){var e=[],r=[];return t.forEach(function(n){if(n.type===4){if(r.length===0)throw new Error("Error parsing function args, zero tokens for arg");e.push(r),r=[];return}n.type!==31&&r.push(n)}),r.length&&e.push(r),e},GNe=function(t,e){return e===11&&t.type===12||e===28&&t.type===29?!0:e===2&&t.type===3},Cm=function(t){return t.type===17||t.type===15},no=function(t){return t.type===16||Cm(t)},ote=function(t){return t.length>1?[t[0],t[1]]:[t[0]]},Sl={type:17,number:0,flags:Fw},O6={type:16,number:50,flags:Fw},G0={type:16,number:100,flags:Fw},Gy=function(t,e,r){var n=t[0],a=t[1];return[ys(n,e),ys(typeof a<"u"?a:n,r)]},ys=function(t,e){if(t.type===16)return t.number/100*e;if(Ow(t))switch(t.unit){case"rem":case"em":return 16*t.number;case"px":default:return t.number}return t.number},lte="deg",cte="grad",ute="rad",dte="turn",Wj={name:"angle",parse:function(t,e){if(e.type===15)switch(e.unit){case lte:return Math.PI*e.number/180;case cte:return Math.PI/200*e.number;case ute:return e.number;case dte:return Math.PI*2*e.number}throw new Error("Unsupported angle type")}},fte=function(t){return t.type===15&&(t.unit===lte||t.unit===cte||t.unit===ute||t.unit===dte)},hte=function(t){var e=t.filter(os).map(function(r){return r.value}).join(" ");switch(e){case"to bottom right":case"to right bottom":case"left top":case"top left":return[Sl,Sl];case"to top":case"bottom":return Nd(0);case"to bottom left":case"to left bottom":case"right top":case"top right":return[Sl,G0];case"to right":case"left":return Nd(90);case"to top left":case"to left top":case"right bottom":case"bottom right":return[G0,G0];case"to bottom":case"top":return Nd(180);case"to top right":case"to right top":case"left bottom":case"bottom left":return[G0,Sl];case"to left":case"right":return Nd(270)}return 0},Nd=function(t){return Math.PI*t/180},cm={name:"color",parse:function(t,e){if(e.type===18){var r=KNe[e.name];if(typeof r>"u")throw new Error('Attempting to parse an unsupported color function "'+e.name+'"');return r(t,e.values)}if(e.type===5){if(e.value.length===3){var n=e.value.substring(0,1),a=e.value.substring(1,2),s=e.value.substring(2,3);return K0(parseInt(n+n,16),parseInt(a+a,16),parseInt(s+s,16),1)}if(e.value.length===4){var n=e.value.substring(0,1),a=e.value.substring(1,2),s=e.value.substring(2,3),o=e.value.substring(3,4);return K0(parseInt(n+n,16),parseInt(a+a,16),parseInt(s+s,16),parseInt(o+o,16)/255)}if(e.value.length===6){var n=e.value.substring(0,2),a=e.value.substring(2,4),s=e.value.substring(4,6);return K0(parseInt(n,16),parseInt(a,16),parseInt(s,16),1)}if(e.value.length===8){var n=e.value.substring(0,2),a=e.value.substring(2,4),s=e.value.substring(4,6),o=e.value.substring(6,8);return K0(parseInt(n,16),parseInt(a,16),parseInt(s,16),parseInt(o,16)/255)}}if(e.type===20){var l=aA[e.value.toUpperCase()];if(typeof l<"u")return l}return aA.TRANSPARENT}},um=function(t){return(255&t)===0},Uo=function(t){var e=255&t,r=255&t>>8,n=255&t>>16,a=255&t>>24;return e<255?"rgba("+a+","+n+","+r+","+e/255+")":"rgb("+a+","+n+","+r+")"},K0=function(t,e,r,n){return(t<<24|e<<16|r<<8|Math.round(n*255)<<0)>>>0},q9=function(t,e){if(t.type===17)return t.number;if(t.type===16){var r=e===3?1:255;return e===3?t.number/100*r:Math.round(t.number/100*r)}return 0},z9=function(t,e){var r=e.filter(Mv);if(r.length===3){var n=r.map(q9),a=n[0],s=n[1],o=n[2];return K0(a,s,o,1)}if(r.length===4){var l=r.map(q9),a=l[0],s=l[1],o=l[2],c=l[3];return K0(a,s,o,c)}return 0};function R3(t,e,r){return r<0&&(r+=1),r>=1&&(r-=1),r<1/6?(e-t)*r*6+t:r<1/2?e:r<2/3?(e-t)*6*(2/3-r)+t:t}var W9=function(t,e){var r=e.filter(Mv),n=r[0],a=r[1],s=r[2],o=r[3],l=(n.type===17?Nd(n.number):Wj.parse(t,n))/(Math.PI*2),c=no(a)?a.number/100:0,u=no(s)?s.number/100:0,d=typeof o<"u"&&no(o)?ys(o,1):1;if(c===0)return K0(u*255,u*255,u*255,1);var f=u<=.5?u*(c+1):u+c-u*c,A=u*2-f,h=R3(A,f,l+1/3),m=R3(A,f,l),p=R3(A,f,l-1/3);return K0(h*255,m*255,p*255,d)},KNe={hsl:W9,hsla:W9,rgb:z9,rgba:z9},yb=function(t,e){return cm.parse(t,ste.create(e).parseComponentValue())},aA={ALICEBLUE:4042850303,ANTIQUEWHITE:4209760255,AQUA:16777215,AQUAMARINE:2147472639,AZURE:4043309055,BEIGE:4126530815,BISQUE:4293182719,BLACK:255,BLANCHEDALMOND:4293643775,BLUE:65535,BLUEVIOLET:2318131967,BROWN:2771004159,BURLYWOOD:3736635391,CADETBLUE:1604231423,CHARTREUSE:2147418367,CHOCOLATE:3530104575,CORAL:4286533887,CORNFLOWERBLUE:1687547391,CORNSILK:4294499583,CRIMSON:3692313855,CYAN:16777215,DARKBLUE:35839,DARKCYAN:9145343,DARKGOLDENROD:3095837695,DARKGRAY:2846468607,DARKGREEN:6553855,DARKGREY:2846468607,DARKKHAKI:3182914559,DARKMAGENTA:2332068863,DARKOLIVEGREEN:1433087999,DARKORANGE:4287365375,DARKORCHID:2570243327,DARKRED:2332033279,DARKSALMON:3918953215,DARKSEAGREEN:2411499519,DARKSLATEBLUE:1211993087,DARKSLATEGRAY:793726975,DARKSLATEGREY:793726975,DARKTURQUOISE:13554175,DARKVIOLET:2483082239,DEEPPINK:4279538687,DEEPSKYBLUE:12582911,DIMGRAY:1768516095,DIMGREY:1768516095,DODGERBLUE:512819199,FIREBRICK:2988581631,FLORALWHITE:4294635775,FORESTGREEN:579543807,FUCHSIA:4278255615,GAINSBORO:3705462015,GHOSTWHITE:4177068031,GOLD:4292280575,GOLDENROD:3668254975,GRAY:2155905279,GREEN:8388863,GREENYELLOW:2919182335,GREY:2155905279,HONEYDEW:4043305215,HOTPINK:4285117695,INDIANRED:3445382399,INDIGO:1258324735,IVORY:4294963455,KHAKI:4041641215,LAVENDER:3873897215,LAVENDERBLUSH:4293981695,LAWNGREEN:2096890111,LEMONCHIFFON:4294626815,LIGHTBLUE:2916673279,LIGHTCORAL:4034953471,LIGHTCYAN:3774873599,LIGHTGOLDENRODYELLOW:4210742015,LIGHTGRAY:3553874943,LIGHTGREEN:2431553791,LIGHTGREY:3553874943,LIGHTPINK:4290167295,LIGHTSALMON:4288707327,LIGHTSEAGREEN:548580095,LIGHTSKYBLUE:2278488831,LIGHTSLATEGRAY:2005441023,LIGHTSLATEGREY:2005441023,LIGHTSTEELBLUE:2965692159,LIGHTYELLOW:4294959359,LIME:16711935,LIMEGREEN:852308735,LINEN:4210091775,MAGENTA:4278255615,MAROON:2147483903,MEDIUMAQUAMARINE:1724754687,MEDIUMBLUE:52735,MEDIUMORCHID:3126187007,MEDIUMPURPLE:2473647103,MEDIUMSEAGREEN:1018393087,MEDIUMSLATEBLUE:2070474495,MEDIUMSPRINGGREEN:16423679,MEDIUMTURQUOISE:1221709055,MEDIUMVIOLETRED:3340076543,MIDNIGHTBLUE:421097727,MINTCREAM:4127193855,MISTYROSE:4293190143,MOCCASIN:4293178879,NAVAJOWHITE:4292783615,NAVY:33023,OLDLACE:4260751103,OLIVE:2155872511,OLIVEDRAB:1804477439,ORANGE:4289003775,ORANGERED:4282712319,ORCHID:3664828159,PALEGOLDENROD:4008225535,PALEGREEN:2566625535,PALETURQUOISE:2951671551,PALEVIOLETRED:3681588223,PAPAYAWHIP:4293907967,PEACHPUFF:4292524543,PERU:3448061951,PINK:4290825215,PLUM:3718307327,POWDERBLUE:2967529215,PURPLE:2147516671,REBECCAPURPLE:1714657791,RED:4278190335,ROSYBROWN:3163525119,ROYALBLUE:1097458175,SADDLEBROWN:2336560127,SALMON:4202722047,SANDYBROWN:4104413439,SEAGREEN:780883967,SEASHELL:4294307583,SIENNA:2689740287,SILVER:3233857791,SKYBLUE:2278484991,SLATEBLUE:1784335871,SLATEGRAY:1887473919,SLATEGREY:1887473919,SNOW:4294638335,SPRINGGREEN:16744447,STEELBLUE:1182971135,TAN:3535047935,TEAL:8421631,THISTLE:3636451583,TOMATO:4284696575,TRANSPARENT:0,TURQUOISE:1088475391,VIOLET:4001558271,WHEAT:4125012991,WHITE:4294967295,WHITESMOKE:4126537215,YELLOW:4294902015,YELLOWGREEN:2597139199},qNe={name:"background-clip",initialValue:"border-box",prefix:!1,type:1,parse:function(t,e){return e.map(function(r){if(os(r))switch(r.value){case"padding-box":return 1;case"content-box":return 2}return 0})}},zNe={name:"background-color",initialValue:"transparent",prefix:!1,type:3,format:"color"},Xj=function(t,e){var r=cm.parse(t,e[0]),n=e[1];return n&&no(n)?{color:r,stop:n}:{color:r,stop:null}},X9=function(t,e){var r=t[0],n=t[t.length-1];r.stop===null&&(r.stop=Sl),n.stop===null&&(n.stop=G0);for(var a=[],s=0,o=0;o<t.length;o++){var l=t[o].stop;if(l!==null){var c=ys(l,e);c>s?a.push(c):a.push(s),s=c}else a.push(null)}for(var u=null,o=0;o<a.length;o++){var d=a[o];if(d===null)u===null&&(u=o);else if(u!==null){for(var f=o-u,A=a[u-1],h=(d-A)/(f+1),m=1;m<=f;m++)a[u+m-1]=h*m;u=null}}return t.map(function(p,x){var v=p.color;return{color:v,stop:Math.max(Math.min(1,a[x]/e),0)}})},WNe=function(t,e,r){var n=e/2,a=r/2,s=ys(t[0],e)-n,o=a-ys(t[1],r);return(Math.atan2(o,s)+Math.PI*2)%(Math.PI*2)},XNe=function(t,e,r){var n=typeof t=="number"?t:WNe(t,e,r),a=Math.abs(e*Math.sin(n))+Math.abs(r*Math.cos(n)),s=e/2,o=r/2,l=a/2,c=Math.sin(n-Math.PI/2)*l,u=Math.cos(n-Math.PI/2)*l;return[a,s-u,s+u,o-c,o+c]},tf=function(t,e){return Math.sqrt(t*t+e*e)},Y9=function(t,e,r,n,a){var s=[[0,0],[0,e],[t,0],[t,e]];return s.reduce(function(o,l){var c=l[0],u=l[1],d=tf(r-c,n-u);return(a?d<o.optimumDistance:d>o.optimumDistance)?{optimumCorner:l,optimumDistance:d}:o},{optimumDistance:a?1/0:-1/0,optimumCorner:null}).optimumCorner},YNe=function(t,e,r,n,a){var s=0,o=0;switch(t.size){case 0:t.shape===0?s=o=Math.min(Math.abs(e),Math.abs(e-n),Math.abs(r),Math.abs(r-a)):t.shape===1&&(s=Math.min(Math.abs(e),Math.abs(e-n)),o=Math.min(Math.abs(r),Math.abs(r-a)));break;case 2:if(t.shape===0)s=o=Math.min(tf(e,r),tf(e,r-a),tf(e-n,r),tf(e-n,r-a));else if(t.shape===1){var l=Math.min(Math.abs(r),Math.abs(r-a))/Math.min(Math.abs(e),Math.abs(e-n)),c=Y9(n,a,e,r,!0),u=c[0],d=c[1];s=tf(u-e,(d-r)/l),o=l*s}break;case 1:t.shape===0?s=o=Math.max(Math.abs(e),Math.abs(e-n),Math.abs(r),Math.abs(r-a)):t.shape===1&&(s=Math.max(Math.abs(e),Math.abs(e-n)),o=Math.max(Math.abs(r),Math.abs(r-a)));break;case 3:if(t.shape===0)s=o=Math.max(tf(e,r),tf(e,r-a),tf(e-n,r),tf(e-n,r-a));else if(t.shape===1){var l=Math.max(Math.abs(r),Math.abs(r-a))/Math.max(Math.abs(e),Math.abs(e-n)),f=Y9(n,a,e,r,!1),u=f[0],d=f[1];s=tf(u-e,(d-r)/l),o=l*s}break}return Array.isArray(t.size)&&(s=ys(t.size[0],n),o=t.size.length===2?ys(t.size[1],a):s),[s,o]},JNe=function(t,e){var r=Nd(180),n=[];return hh(e).forEach(function(a,s){if(s===0){var o=a[0];if(o.type===20&&o.value==="to"){r=hte(a);return}else if(fte(o)){r=Wj.parse(t,o);return}}var l=Xj(t,a);n.push(l)}),{angle:r,stops:n,type:1}},bC=function(t,e){var r=Nd(180),n=[];return hh(e).forEach(function(a,s){if(s===0){var o=a[0];if(o.type===20&&["top","left","right","bottom"].indexOf(o.value)!==-1){r=hte(a);return}else if(fte(o)){r=(Wj.parse(t,o)+Nd(270))%Nd(360);return}}var l=Xj(t,a);n.push(l)}),{angle:r,stops:n,type:1}},ZNe=function(t,e){var r=Nd(180),n=[],a=1,s=0,o=3,l=[];return hh(e).forEach(function(c,u){var d=c[0];if(u===0){if(os(d)&&d.value==="linear"){a=1;return}else if(os(d)&&d.value==="radial"){a=2;return}}if(d.type===18){if(d.name==="from"){var f=cm.parse(t,d.values[0]);n.push({stop:Sl,color:f})}else if(d.name==="to"){var f=cm.parse(t,d.values[0]);n.push({stop:G0,color:f})}else if(d.name==="color-stop"){var A=d.values.filter(Mv);if(A.length===2){var f=cm.parse(t,A[1]),h=A[0];p1(h)&&n.push({stop:{type:16,number:h.number*100,flags:h.flags},color:f})}}}}),a===1?{angle:(r+Nd(180))%Nd(360),stops:n,type:a}:{size:o,shape:s,stops:n,position:l,type:a}},Ate="closest-side",mte="farthest-side",pte="closest-corner",gte="farthest-corner",xte="circle",vte="ellipse",yte="cover",bte="contain",eCe=function(t,e){var r=0,n=3,a=[],s=[];return hh(e).forEach(function(o,l){var c=!0;if(l===0){var u=!1;c=o.reduce(function(f,A){if(u)if(os(A))switch(A.value){case"center":return s.push(O6),f;case"top":case"left":return s.push(Sl),f;case"right":case"bottom":return s.push(G0),f}else(no(A)||Cm(A))&&s.push(A);else if(os(A))switch(A.value){case xte:return r=0,!1;case vte:return r=1,!1;case"at":return u=!0,!1;case Ate:return n=0,!1;case yte:case mte:return n=1,!1;case bte:case pte:return n=2,!1;case gte:return n=3,!1}else if(Cm(A)||no(A))return Array.isArray(n)||(n=[]),n.push(A),!1;return f},c)}if(c){var d=Xj(t,o);a.push(d)}}),{size:n,shape:r,stops:a,position:s,type:2}},wC=function(t,e){var r=0,n=3,a=[],s=[];return hh(e).forEach(function(o,l){var c=!0;if(l===0?c=o.reduce(function(d,f){if(os(f))switch(f.value){case"center":return s.push(O6),!1;case"top":case"left":return s.push(Sl),!1;case"right":case"bottom":return s.push(G0),!1}else if(no(f)||Cm(f))return s.push(f),!1;return d},c):l===1&&(c=o.reduce(function(d,f){if(os(f))switch(f.value){case xte:return r=0,!1;case vte:return r=1,!1;case bte:case Ate:return n=0,!1;case mte:return n=1,!1;case pte:return n=2,!1;case yte:case gte:return n=3,!1}else if(Cm(f)||no(f))return Array.isArray(n)||(n=[]),n.push(f),!1;return d},c)),c){var u=Xj(t,o);a.push(u)}}),{size:n,shape:r,stops:a,position:s,type:2}},tCe=function(t){return t.type===1},rCe=function(t){return t.type===2},D6={name:"image",parse:function(t,e){if(e.type===22){var r={url:e.value,type:0};return t.cache.addImage(e.value),r}if(e.type===18){var n=wte[e.name];if(typeof n>"u")throw new Error('Attempting to parse an unsupported image function "'+e.name+'"');return n(t,e.values)}throw new Error("Unsupported image type "+e.type)}};function nCe(t){return!(t.type===20&&t.value==="none")&&(t.type!==18||!!wte[t.name])}var wte={"linear-gradient":JNe,"-moz-linear-gradient":bC,"-ms-linear-gradient":bC,"-o-linear-gradient":bC,"-webkit-linear-gradient":bC,"radial-gradient":eCe,"-moz-radial-gradient":wC,"-ms-radial-gradient":wC,"-o-radial-gradient":wC,"-webkit-radial-gradient":wC,"-webkit-gradient":ZNe},aCe={name:"background-image",initialValue:"none",type:1,prefix:!1,parse:function(t,e){if(e.length===0)return[];var r=e[0];return r.type===20&&r.value==="none"?[]:e.filter(function(n){return Mv(n)&&nCe(n)}).map(function(n){return D6.parse(t,n)})}},sCe={name:"background-origin",initialValue:"border-box",prefix:!1,type:1,parse:function(t,e){return e.map(function(r){if(os(r))switch(r.value){case"padding-box":return 1;case"content-box":return 2}return 0})}},iCe={name:"background-position",initialValue:"0% 0%",type:1,prefix:!1,parse:function(t,e){return hh(e).map(function(r){return r.filter(no)}).map(ote)}},oCe={name:"background-repeat",initialValue:"repeat",prefix:!1,type:1,parse:function(t,e){return hh(e).map(function(r){return r.filter(os).map(function(n){return n.value}).join(" ")}).map(lCe)}},lCe=function(t){switch(t){case"no-repeat":return 1;case"repeat-x":case"repeat no-repeat":return 2;case"repeat-y":case"no-repeat repeat":return 3;case"repeat":default:return 0}},hv;(function(t){t.AUTO="auto",t.CONTAIN="contain",t.COVER="cover"})(hv||(hv={}));var cCe={name:"background-size",initialValue:"0",prefix:!1,type:1,parse:function(t,e){return hh(e).map(function(r){return r.filter(uCe)})}},uCe=function(t){return os(t)||no(t)},Yj=function(t){return{name:"border-"+t+"-color",initialValue:"transparent",prefix:!1,type:3,format:"color"}},dCe=Yj("top"),fCe=Yj("right"),hCe=Yj("bottom"),ACe=Yj("left"),Jj=function(t){return{name:"border-radius-"+t,initialValue:"0 0",prefix:!1,type:1,parse:function(e,r){return ote(r.filter(no))}}},mCe=Jj("top-left"),pCe=Jj("top-right"),gCe=Jj("bottom-right"),xCe=Jj("bottom-left"),Zj=function(t){return{name:"border-"+t+"-style",initialValue:"solid",prefix:!1,type:2,parse:function(e,r){switch(r){case"none":return 0;case"dashed":return 2;case"dotted":return 3;case"double":return 4}return 1}}},vCe=Zj("top"),yCe=Zj("right"),bCe=Zj("bottom"),wCe=Zj("left"),eP=function(t){return{name:"border-"+t+"-width",initialValue:"0",type:0,prefix:!1,parse:function(e,r){return Ow(r)?r.number:0}}},NCe=eP("top"),CCe=eP("right"),_Ce=eP("bottom"),ECe=eP("left"),SCe={name:"color",initialValue:"transparent",prefix:!1,type:3,format:"color"},ICe={name:"direction",initialValue:"ltr",prefix:!1,type:2,parse:function(t,e){switch(e){case"rtl":return 1;case"ltr":default:return 0}}},jCe={name:"display",initialValue:"inline-block",prefix:!1,type:1,parse:function(t,e){return e.filter(os).reduce(function(r,n){return r|PCe(n.value)},0)}},PCe=function(t){switch(t){case"block":case"-webkit-box":return 2;case"inline":return 4;case"run-in":return 8;case"flow":return 16;case"flow-root":return 32;case"table":return 64;case"flex":case"-webkit-flex":return 128;case"grid":case"-ms-grid":return 256;case"ruby":return 512;case"subgrid":return 1024;case"list-item":return 2048;case"table-row-group":return 4096;case"table-header-group":return 8192;case"table-footer-group":return 16384;case"table-row":return 32768;case"table-cell":return 65536;case"table-column-group":return 131072;case"table-column":return 262144;case"table-caption":return 524288;case"ruby-base":return 1048576;case"ruby-text":return 2097152;case"ruby-base-container":return 4194304;case"ruby-text-container":return 8388608;case"contents":return 16777216;case"inline-block":return 33554432;case"inline-list-item":return 67108864;case"inline-table":return 134217728;case"inline-flex":return 268435456;case"inline-grid":return 536870912}return 0},BCe={name:"float",initialValue:"none",prefix:!1,type:2,parse:function(t,e){switch(e){case"left":return 1;case"right":return 2;case"inline-start":return 3;case"inline-end":return 4}return 0}},TCe={name:"letter-spacing",initialValue:"0",prefix:!1,type:0,parse:function(t,e){return e.type===20&&e.value==="normal"?0:e.type===17||e.type===15?e.number:0}},NS;(function(t){t.NORMAL="normal",t.STRICT="strict"})(NS||(NS={}));var kCe={name:"line-break",initialValue:"normal",prefix:!1,type:2,parse:function(t,e){switch(e){case"strict":return NS.STRICT;case"normal":default:return NS.NORMAL}}},FCe={name:"line-height",initialValue:"normal",prefix:!1,type:4},J9=function(t,e){return os(t)&&t.value==="normal"?1.2*e:t.type===17?e*t.number:no(t)?ys(t,e):e},OCe={name:"list-style-image",initialValue:"none",type:0,prefix:!1,parse:function(t,e){return e.type===20&&e.value==="none"?null:D6.parse(t,e)}},DCe={name:"list-style-position",initialValue:"outside",prefix:!1,type:2,parse:function(t,e){switch(e){case"inside":return 0;case"outside":default:return 1}}},Ck={name:"list-style-type",initialValue:"none",prefix:!1,type:2,parse:function(t,e){switch(e){case"disc":return 0;case"circle":return 1;case"square":return 2;case"decimal":return 3;case"cjk-decimal":return 4;case"decimal-leading-zero":return 5;case"lower-roman":return 6;case"upper-roman":return 7;case"lower-greek":return 8;case"lower-alpha":return 9;case"upper-alpha":return 10;case"arabic-indic":return 11;case"armenian":return 12;case"bengali":return 13;case"cambodian":return 14;case"cjk-earthly-branch":return 15;case"cjk-heavenly-stem":return 16;case"cjk-ideographic":return 17;case"devanagari":return 18;case"ethiopic-numeric":return 19;case"georgian":return 20;case"gujarati":return 21;case"gurmukhi":return 22;case"hebrew":return 22;case"hiragana":return 23;case"hiragana-iroha":return 24;case"japanese-formal":return 25;case"japanese-informal":return 26;case"kannada":return 27;case"katakana":return 28;case"katakana-iroha":return 29;case"khmer":return 30;case"korean-hangul-formal":return 31;case"korean-hanja-formal":return 32;case"korean-hanja-informal":return 33;case"lao":return 34;case"lower-armenian":return 35;case"malayalam":return 36;case"mongolian":return 37;case"myanmar":return 38;case"oriya":return 39;case"persian":return 40;case"simp-chinese-formal":return 41;case"simp-chinese-informal":return 42;case"tamil":return 43;case"telugu":return 44;case"thai":return 45;case"tibetan":return 46;case"trad-chinese-formal":return 47;case"trad-chinese-informal":return 48;case"upper-armenian":return 49;case"disclosure-open":return 50;case"disclosure-closed":return 51;case"none":default:return-1}}},tP=function(t){return{name:"margin-"+t,initialValue:"0",prefix:!1,type:4}},RCe=tP("top"),MCe=tP("right"),LCe=tP("bottom"),UCe=tP("left"),QCe={name:"overflow",initialValue:"visible",prefix:!1,type:1,parse:function(t,e){return e.filter(os).map(function(r){switch(r.value){case"hidden":return 1;case"scroll":return 2;case"clip":return 3;case"auto":return 4;case"visible":default:return 0}})}},VCe={name:"overflow-wrap",initialValue:"normal",prefix:!1,type:2,parse:function(t,e){switch(e){case"break-word":return"break-word";case"normal":default:return"normal"}}},rP=function(t){return{name:"padding-"+t,initialValue:"0",prefix:!1,type:3,format:"length-percentage"}},HCe=rP("top"),$Ce=rP("right"),GCe=rP("bottom"),KCe=rP("left"),qCe={name:"text-align",initialValue:"left",prefix:!1,type:2,parse:function(t,e){switch(e){case"right":return 2;case"center":case"justify":return 1;case"left":default:return 0}}},zCe={name:"position",initialValue:"static",prefix:!1,type:2,parse:function(t,e){switch(e){case"relative":return 1;case"absolute":return 2;case"fixed":return 3;case"sticky":return 4}return 0}},WCe={name:"text-shadow",initialValue:"none",type:1,prefix:!1,parse:function(t,e){return e.length===1&&Nk(e[0],"none")?[]:hh(e).map(function(r){for(var n={color:aA.TRANSPARENT,offsetX:Sl,offsetY:Sl,blur:Sl},a=0,s=0;s<r.length;s++){var o=r[s];Cm(o)?(a===0?n.offsetX=o:a===1?n.offsetY=o:n.blur=o,a++):n.color=cm.parse(t,o)}return n})}},XCe={name:"text-transform",initialValue:"none",prefix:!1,type:2,parse:function(t,e){switch(e){case"uppercase":return 2;case"lowercase":return 1;case"capitalize":return 3}return 0}},YCe={name:"transform",initialValue:"none",prefix:!0,type:0,parse:function(t,e){if(e.type===20&&e.value==="none")return null;if(e.type===18){var r=e_e[e.name];if(typeof r>"u")throw new Error('Attempting to parse an unsupported transform function "'+e.name+'"');return r(e.values)}return null}},JCe=function(t){var e=t.filter(function(r){return r.type===17}).map(function(r){return r.number});return e.length===6?e:null},ZCe=function(t){var e=t.filter(function(c){return c.type===17}).map(function(c){return c.number}),r=e[0],n=e[1];e[2],e[3];var a=e[4],s=e[5];e[6],e[7],e[8],e[9],e[10],e[11];var o=e[12],l=e[13];return e[14],e[15],e.length===16?[r,n,a,s,o,l]:null},e_e={matrix:JCe,matrix3d:ZCe},Z9={type:16,number:50,flags:Fw},t_e=[Z9,Z9],r_e={name:"transform-origin",initialValue:"50% 50%",prefix:!0,type:1,parse:function(t,e){var r=e.filter(no);return r.length!==2?t_e:[r[0],r[1]]}},n_e={name:"visible",initialValue:"none",prefix:!1,type:2,parse:function(t,e){switch(e){case"hidden":return 1;case"collapse":return 2;case"visible":default:return 0}}},bb;(function(t){t.NORMAL="normal",t.BREAK_ALL="break-all",t.KEEP_ALL="keep-all"})(bb||(bb={}));var a_e={name:"word-break",initialValue:"normal",prefix:!1,type:2,parse:function(t,e){switch(e){case"break-all":return bb.BREAK_ALL;case"keep-all":return bb.KEEP_ALL;case"normal":default:return bb.NORMAL}}},s_e={name:"z-index",initialValue:"auto",prefix:!1,type:0,parse:function(t,e){if(e.type===20)return{auto:!0,order:0};if(p1(e))return{auto:!1,order:e.number};throw new Error("Invalid z-index number parsed")}},Nte={name:"time",parse:function(t,e){if(e.type===15)switch(e.unit.toLowerCase()){case"s":return 1e3*e.number;case"ms":return e.number}throw new Error("Unsupported time type")}},i_e={name:"opacity",initialValue:"1",type:0,prefix:!1,parse:function(t,e){return p1(e)?e.number:1}},o_e={name:"text-decoration-color",initialValue:"transparent",prefix:!1,type:3,format:"color"},l_e={name:"text-decoration-line",initialValue:"none",prefix:!1,type:1,parse:function(t,e){return e.filter(os).map(function(r){switch(r.value){case"underline":return 1;case"overline":return 2;case"line-through":return 3;case"none":return 4}return 0}).filter(function(r){return r!==0})}},c_e={name:"font-family",initialValue:"",prefix:!1,type:1,parse:function(t,e){var r=[],n=[];return e.forEach(function(a){switch(a.type){case 20:case 0:r.push(a.value);break;case 17:r.push(a.number.toString());break;case 4:n.push(r.join(" ")),r.length=0;break}}),r.length&&n.push(r.join(" ")),n.map(function(a){return a.indexOf(" ")===-1?a:"'"+a+"'"})}},u_e={name:"font-size",initialValue:"0",prefix:!1,type:3,format:"length"},d_e={name:"font-weight",initialValue:"normal",type:0,prefix:!1,parse:function(t,e){if(p1(e))return e.number;if(os(e))switch(e.value){case"bold":return 700;case"normal":default:return 400}return 400}},f_e={name:"font-variant",initialValue:"none",type:1,prefix:!1,parse:function(t,e){return e.filter(os).map(function(r){return r.value})}},h_e={name:"font-style",initialValue:"normal",prefix:!1,type:2,parse:function(t,e){switch(e){case"oblique":return"oblique";case"italic":return"italic";case"normal":default:return"normal"}}},_o=function(t,e){return(t&e)!==0},A_e={name:"content",initialValue:"none",type:1,prefix:!1,parse:function(t,e){if(e.length===0)return[];var r=e[0];return r.type===20&&r.value==="none"?[]:e}},m_e={name:"counter-increment",initialValue:"none",prefix:!0,type:1,parse:function(t,e){if(e.length===0)return null;var r=e[0];if(r.type===20&&r.value==="none")return null;for(var n=[],a=e.filter(ite),s=0;s<a.length;s++){var o=a[s],l=a[s+1];if(o.type===20){var c=l&&p1(l)?l.number:1;n.push({counter:o.value,increment:c})}}return n}},p_e={name:"counter-reset",initialValue:"none",prefix:!0,type:1,parse:function(t,e){if(e.length===0)return[];for(var r=[],n=e.filter(ite),a=0;a<n.length;a++){var s=n[a],o=n[a+1];if(os(s)&&s.value!=="none"){var l=o&&p1(o)?o.number:0;r.push({counter:s.value,reset:l})}}return r}},g_e={name:"duration",initialValue:"0s",prefix:!1,type:1,parse:function(t,e){return e.filter(Ow).map(function(r){return Nte.parse(t,r)})}},x_e={name:"quotes",initialValue:"none",prefix:!0,type:1,parse:function(t,e){if(e.length===0)return null;var r=e[0];if(r.type===20&&r.value==="none")return null;var n=[],a=e.filter($Ne);if(a.length%2!==0)return null;for(var s=0;s<a.length;s+=2){var o=a[s].value,l=a[s+1].value;n.push({open:o,close:l})}return n}},eQ=function(t,e,r){if(!t)return"";var n=t[Math.min(e,t.length-1)];return n?r?n.open:n.close:""},v_e={name:"box-shadow",initialValue:"none",type:1,prefix:!1,parse:function(t,e){return e.length===1&&Nk(e[0],"none")?[]:hh(e).map(function(r){for(var n={color:255,offsetX:Sl,offsetY:Sl,blur:Sl,spread:Sl,inset:!1},a=0,s=0;s<r.length;s++){var o=r[s];Nk(o,"inset")?n.inset=!0:Cm(o)?(a===0?n.offsetX=o:a===1?n.offsetY=o:a===2?n.blur=o:n.spread=o,a++):n.color=cm.parse(t,o)}return n})}},y_e={name:"paint-order",initialValue:"normal",prefix:!1,type:1,parse:function(t,e){var r=[0,1,2],n=[];return e.filter(os).forEach(function(a){switch(a.value){case"stroke":n.push(1);break;case"fill":n.push(0);break;case"markers":n.push(2);break}}),r.forEach(function(a){n.indexOf(a)===-1&&n.push(a)}),n}},b_e={name:"-webkit-text-stroke-color",initialValue:"currentcolor",prefix:!1,type:3,format:"color"},w_e={name:"-webkit-text-stroke-width",initialValue:"0",type:0,prefix:!1,parse:function(t,e){return Ow(e)?e.number:0}},N_e=function(){function t(e,r){var n,a;this.animationDuration=tn(e,g_e,r.animationDuration),this.backgroundClip=tn(e,qNe,r.backgroundClip),this.backgroundColor=tn(e,zNe,r.backgroundColor),this.backgroundImage=tn(e,aCe,r.backgroundImage),this.backgroundOrigin=tn(e,sCe,r.backgroundOrigin),this.backgroundPosition=tn(e,iCe,r.backgroundPosition),this.backgroundRepeat=tn(e,oCe,r.backgroundRepeat),this.backgroundSize=tn(e,cCe,r.backgroundSize),this.borderTopColor=tn(e,dCe,r.borderTopColor),this.borderRightColor=tn(e,fCe,r.borderRightColor),this.borderBottomColor=tn(e,hCe,r.borderBottomColor),this.borderLeftColor=tn(e,ACe,r.borderLeftColor),this.borderTopLeftRadius=tn(e,mCe,r.borderTopLeftRadius),this.borderTopRightRadius=tn(e,pCe,r.borderTopRightRadius),this.borderBottomRightRadius=tn(e,gCe,r.borderBottomRightRadius),this.borderBottomLeftRadius=tn(e,xCe,r.borderBottomLeftRadius),this.borderTopStyle=tn(e,vCe,r.borderTopStyle),this.borderRightStyle=tn(e,yCe,r.borderRightStyle),this.borderBottomStyle=tn(e,bCe,r.borderBottomStyle),this.borderLeftStyle=tn(e,wCe,r.borderLeftStyle),this.borderTopWidth=tn(e,NCe,r.borderTopWidth),this.borderRightWidth=tn(e,CCe,r.borderRightWidth),this.borderBottomWidth=tn(e,_Ce,r.borderBottomWidth),this.borderLeftWidth=tn(e,ECe,r.borderLeftWidth),this.boxShadow=tn(e,v_e,r.boxShadow),this.color=tn(e,SCe,r.color),this.direction=tn(e,ICe,r.direction),this.display=tn(e,jCe,r.display),this.float=tn(e,BCe,r.cssFloat),this.fontFamily=tn(e,c_e,r.fontFamily),this.fontSize=tn(e,u_e,r.fontSize),this.fontStyle=tn(e,h_e,r.fontStyle),this.fontVariant=tn(e,f_e,r.fontVariant),this.fontWeight=tn(e,d_e,r.fontWeight),this.letterSpacing=tn(e,TCe,r.letterSpacing),this.lineBreak=tn(e,kCe,r.lineBreak),this.lineHeight=tn(e,FCe,r.lineHeight),this.listStyleImage=tn(e,OCe,r.listStyleImage),this.listStylePosition=tn(e,DCe,r.listStylePosition),this.listStyleType=tn(e,Ck,r.listStyleType),this.marginTop=tn(e,RCe,r.marginTop),this.marginRight=tn(e,MCe,r.marginRight),this.marginBottom=tn(e,LCe,r.marginBottom),this.marginLeft=tn(e,UCe,r.marginLeft),this.opacity=tn(e,i_e,r.opacity);var s=tn(e,QCe,r.overflow);this.overflowX=s[0],this.overflowY=s[s.length>1?1:0],this.overflowWrap=tn(e,VCe,r.overflowWrap),this.paddingTop=tn(e,HCe,r.paddingTop),this.paddingRight=tn(e,$Ce,r.paddingRight),this.paddingBottom=tn(e,GCe,r.paddingBottom),this.paddingLeft=tn(e,KCe,r.paddingLeft),this.paintOrder=tn(e,y_e,r.paintOrder),this.position=tn(e,zCe,r.position),this.textAlign=tn(e,qCe,r.textAlign),this.textDecorationColor=tn(e,o_e,(n=r.textDecorationColor)!==null&&n!==void 0?n:r.color),this.textDecorationLine=tn(e,l_e,(a=r.textDecorationLine)!==null&&a!==void 0?a:r.textDecoration),this.textShadow=tn(e,WCe,r.textShadow),this.textTransform=tn(e,XCe,r.textTransform),this.transform=tn(e,YCe,r.transform),this.transformOrigin=tn(e,r_e,r.transformOrigin),this.visibility=tn(e,n_e,r.visibility),this.webkitTextStrokeColor=tn(e,b_e,r.webkitTextStrokeColor),this.webkitTextStrokeWidth=tn(e,w_e,r.webkitTextStrokeWidth),this.wordBreak=tn(e,a_e,r.wordBreak),this.zIndex=tn(e,s_e,r.zIndex)}return t.prototype.isVisible=function(){return this.display>0&&this.opacity>0&&this.visibility===0},t.prototype.isTransparent=function(){return um(this.backgroundColor)},t.prototype.isTransformed=function(){return this.transform!==null},t.prototype.isPositioned=function(){return this.position!==0},t.prototype.isPositionedWithZIndex=function(){return this.isPositioned()&&!this.zIndex.auto},t.prototype.isFloating=function(){return this.float!==0},t.prototype.isInlineLevel=function(){return _o(this.display,4)||_o(this.display,33554432)||_o(this.display,268435456)||_o(this.display,536870912)||_o(this.display,67108864)||_o(this.display,134217728)},t}(),C_e=function(){function t(e,r){this.content=tn(e,A_e,r.content),this.quotes=tn(e,x_e,r.quotes)}return t}(),tQ=function(){function t(e,r){this.counterIncrement=tn(e,m_e,r.counterIncrement),this.counterReset=tn(e,p_e,r.counterReset)}return t}(),tn=function(t,e,r){var n=new ate,a=r!==null&&typeof r<"u"?r.toString():e.initialValue;n.write(a);var s=new ste(n.read());switch(e.type){case 2:var o=s.parseComponentValue();return e.parse(t,os(o)?o.value:e.initialValue);case 0:return e.parse(t,s.parseComponentValue());case 1:return e.parse(t,s.parseComponentValues());case 4:return s.parseComponentValue();case 3:switch(e.format){case"angle":return Wj.parse(t,s.parseComponentValue());case"color":return cm.parse(t,s.parseComponentValue());case"image":return D6.parse(t,s.parseComponentValue());case"length":var l=s.parseComponentValue();return Cm(l)?l:Sl;case"length-percentage":var c=s.parseComponentValue();return no(c)?c:Sl;case"time":return Nte.parse(t,s.parseComponentValue())}break}},__e="data-html2canvas-debug",E_e=function(t){var e=t.getAttribute(__e);switch(e){case"all":return 1;case"clone":return 2;case"parse":return 3;case"render":return 4;default:return 0}},_k=function(t,e){var r=E_e(t);return r===1||e===r},Ah=function(){function t(e,r){if(this.context=e,this.textNodes=[],this.elements=[],this.flags=0,_k(r,3))debugger;this.styles=new N_e(e,window.getComputedStyle(r,null)),Ik(r)&&(this.styles.animationDuration.some(function(n){return n>0})&&(r.style.animationDuration="0s"),this.styles.transform!==null&&(r.style.transform="none")),this.bounds=qj(this.context,r),_k(r,4)&&(this.flags|=16)}return t}(),S_e="AAAAAAAAAAAAEA4AGBkAAFAaAAACAAAAAAAIABAAGAAwADgACAAQAAgAEAAIABAACAAQAAgAEAAIABAACAAQAAgAEAAIABAAQABIAEQATAAIABAACAAQAAgAEAAIABAAVABcAAgAEAAIABAACAAQAGAAaABwAHgAgACIAI4AlgAIABAAmwCjAKgAsAC2AL4AvQDFAMoA0gBPAVYBWgEIAAgACACMANoAYgFkAWwBdAF8AX0BhQGNAZUBlgGeAaMBlQGWAasBswF8AbsBwwF0AcsBYwHTAQgA2wG/AOMBdAF8AekB8QF0AfkB+wHiAHQBfAEIAAMC5gQIAAsCEgIIAAgAFgIeAggAIgIpAggAMQI5AkACygEIAAgASAJQAlgCYAIIAAgACAAKBQoFCgUTBRMFGQUrBSsFCAAIAAgACAAIAAgACAAIAAgACABdAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACABoAmgCrwGvAQgAbgJ2AggAHgEIAAgACADnAXsCCAAIAAgAgwIIAAgACAAIAAgACACKAggAkQKZAggAPADJAAgAoQKkAqwCsgK6AsICCADJAggA0AIIAAgACAAIANYC3gIIAAgACAAIAAgACABAAOYCCAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAkASoB+QIEAAgACAA8AEMCCABCBQgACABJBVAFCAAIAAgACAAIAAgACAAIAAgACABTBVoFCAAIAFoFCABfBWUFCAAIAAgACAAIAAgAbQUIAAgACAAIAAgACABzBXsFfQWFBYoFigWKBZEFigWKBYoFmAWfBaYFrgWxBbkFCAAIAAgACAAIAAgACAAIAAgACAAIAMEFCAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAMgFCADQBQgACAAIAAgACAAIAAgACAAIAAgACAAIAO4CCAAIAAgAiQAIAAgACABAAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAD0AggACAD8AggACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIANYFCAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAMDvwAIAAgAJAIIAAgACAAIAAgACAAIAAgACwMTAwgACAB9BOsEGwMjAwgAKwMyAwsFYgE3A/MEPwMIAEUDTQNRAwgAWQOsAGEDCAAIAAgACAAIAAgACABpAzQFNQU2BTcFOAU5BToFNAU1BTYFNwU4BTkFOgU0BTUFNgU3BTgFOQU6BTQFNQU2BTcFOAU5BToFNAU1BTYFNwU4BTkFOgU0BTUFNgU3BTgFOQU6BTQFNQU2BTcFOAU5BToFNAU1BTYFNwU4BTkFOgU0BTUFNgU3BTgFOQU6BTQFNQU2BTcFOAU5BToFNAU1BTYFNwU4BTkFOgU0BTUFNgU3BTgFOQU6BTQFNQU2BTcFOAU5BToFNAU1BTYFNwU4BTkFOgU0BTUFNgU3BTgFOQU6BTQFNQU2BTcFOAU5BToFNAU1BTYFNwU4BTkFOgU0BTUFNgU3BTgFOQU6BTQFNQU2BTcFOAU5BToFNAU1BTYFNwU4BTkFOgU0BTUFNgU3BTgFOQU6BTQFNQU2BTcFOAU5BToFNAU1BTYFNwU4BTkFOgU0BTUFNgU3BTgFOQU6BTQFNQU2BTcFOAU5BToFNAU1BTYFNwU4BTkFOgU0BTUFNgU3BTgFOQU6BTQFNQU2BTcFOAU5BToFNAU1BTYFNwU4BTkFOgU0BTUFNgU3BTgFOQU6BTQFNQU2BTcFOAU5BToFNAU1BTYFNwU4BTkFOgU0BTUFNgU3BTgFOQU6BTQFNQU2BTcFOAU5BToFNAU1BTYFNwU4BTkFOgU0BTUFNgU3BTgFOQU6BTQFNQU2BTcFOAU5BToFNAU1BTYFNwU4BTkFOgU0BTUFNgU3BTgFOQU6BTQFNQU2BTcFOAU5BToFNAU1BTYFNwU4BTkFOgU0BTUFNgU3BTgFOQU6BTQFNQU2BTcFOAU5BToFNAU1BTYFNwU4BTkFOgU0BTUFNgU3BTgFOQU6BTQFNQU2BTcFOAU5BToFNAU1BTYFNwU4BTkFOgU0BTUFNgU3BTgFOQU6BTQFNQU2BTcFOAU5BToFNAU1BTYFNwU4BTkFIQUoBSwFCAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACABtAwgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACABMAEwACAAIAAgACAAIABgACAAIAAgACAC/AAgACAAyAQgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACACAAIAAwAAgACAAIAAgACAAIAAgACAAIAAAARABIAAgACAAIABQASAAIAAgAIABwAEAAjgCIABsAqAC2AL0AigDQAtwC+IJIQqVAZUBWQqVAZUBlQGVAZUBlQGrC5UBlQGVAZUBlQGVAZUBlQGVAXsKlQGVAbAK6wsrDGUMpQzlDJUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAfAKAAuZA64AtwCJALoC6ADwAAgAuACgA/oEpgO6AqsD+AAIAAgAswMIAAgACAAIAIkAuwP5AfsBwwPLAwgACAAIAAgACADRA9kDCAAIAOED6QMIAAgACAAIAAgACADuA/YDCAAIAP4DyQAIAAgABgQIAAgAXQAOBAgACAAIAAgACAAIABMECAAIAAgACAAIAAgACAD8AAQBCAAIAAgAGgQiBCoECAExBAgAEAEIAAgACAAIAAgACAAIAAgACAAIAAgACAA4BAgACABABEYECAAIAAgATAQYAQgAVAQIAAgACAAIAAgACAAIAAgACAAIAFoECAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgAOQEIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAB+BAcACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAEABhgSMBAgACAAIAAgAlAQIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAwAEAAQABAADAAMAAwADAAQABAAEAAQABAAEAAQABHATAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgAdQMIAAgACAAIAAgACAAIAMkACAAIAAgAfQMIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACACFA4kDCAAIAAgACAAIAOcBCAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAIcDCAAIAAgACAAIAAgACAAIAAgACAAIAJEDCAAIAAgACADFAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACABgBAgAZgQIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgAbAQCBXIECAAIAHkECAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACABAAJwEQACjBKoEsgQIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAC6BMIECAAIAAgACAAIAAgACABmBAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgAxwQIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAGYECAAIAAgAzgQIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgAigWKBYoFigWKBYoFigWKBd0FXwUIAOIF6gXxBYoF3gT5BQAGCAaKBYoFigWKBYoFigWKBYoFigWKBYoFigXWBIoFigWKBYoFigWKBYoFigWKBYsFEAaKBYoFigWKBYoFigWKBRQGCACKBYoFigWKBQgACAAIANEECAAIABgGigUgBggAJgYIAC4GMwaKBYoF0wQ3Bj4GigWKBYoFigWKBYoFigWKBYoFigWKBYoFigUIAAgACAAIAAgACAAIAAgAigWKBYoFigWKBYoFigWKBYoFigWKBYoFigWKBYoFigWKBYoFigWKBYoFigWKBYoFigWKBYoFigWKBYoFigWLBf///////wQABAAEAAQABAAEAAQABAAEAAQAAwAEAAQAAgAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAAAAAAAAAAAAAAAAAAAAAAAAAOAAAAAAAAAAQADgAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAFAAUABQAFAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAAAAUAAAAFAAUAAAAFAAUAAAAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABAAEAAQABAAEAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAFAAUABQAFAAUABQAFAAUABQAAAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAFAAUABQAFAAUAAQAAAAUABQAFAAUABQAFAAAAAAAFAAUAAAAFAAUABQAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAEAAAAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAUABQAFAAUABQAFAAUABQAFAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAUABQAFAAUABQAFAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAFAAAAAAAFAAUAAQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABwAFAAUABQAFAAAABwAHAAcAAAAHAAcABwAFAAEAAAAAAAAAAAAAAAAAAAAAAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAHAAcABwAFAAUABQAFAAcABwAFAAUAAAAAAAEAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAHAAAAAQABAAAAAAAAAAAAAAAFAAUABQAFAAAABwAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAHAAcABwAHAAcAAAAHAAcAAAAAAAUABQAHAAUAAQAHAAEABwAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAFAAUABQAFAAUABwABAAUABQAFAAUAAAAAAAAAAAAAAAEAAQABAAEAAQABAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABwAFAAUAAAAAAAAAAAAAAAAABQAFAAUABQAFAAUAAQAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAFAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAQABQANAAQABAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAQABAAEAAQABAAEAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAOAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABAAEAAQABAAEAAQABAAEAAQABAAEAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAEAAQABAAEAAQABAAEAAQABAAAAAAAAAAAAAAAAAAAAAAABQAHAAUABQAFAAAAAAAAAAcABQAFAAUABQAFAAQABAAEAAQABAAEAAQABAAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAFAAUAAAAFAAUABQAFAAUAAAAFAAUABQAAAAUABQAFAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAUABQAAAAAAAAAAAAUABQAFAAcAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAHAAUAAAAHAAcABwAFAAUABQAFAAUABQAFAAUABwAHAAcABwAFAAcABwAAAAUABQAFAAUABQAFAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABwAHAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAAAAUABwAHAAUABQAFAAUAAAAAAAcABwAAAAAABwAHAAUAAAAAAAAAAAAAAAAAAAAAAAAABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAAAAAABQAFAAcAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAAABwAHAAcABQAFAAAAAAAAAAAABQAFAAAAAAAFAAUABQAAAAAAAAAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAAAAAAAAAFAAAAAAAAAAAAAAAAAAAAAAAAAAAABwAFAAUABQAFAAUAAAAFAAUABwAAAAcABwAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAUABQAFAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUAAAAFAAUABwAFAAUABQAFAAAAAAAHAAcAAAAAAAcABwAFAAAAAAAAAAAAAAAAAAAABQAFAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAcABwAAAAAAAAAHAAcABwAAAAcABwAHAAUAAAAAAAAAAAAAAAAAAAAAAAAABQAAAAAAAAAAAAAAAAAAAAAABQAHAAcABwAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABwAHAAcABwAAAAUABQAFAAAABQAFAAUABQAAAAAAAAAAAAAAAAAAAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAAAAcABQAHAAcABQAHAAcAAAAFAAcABwAAAAcABwAFAAUAAAAAAAAAAAAAAAAAAAAFAAUAAAAAAAAAAAAAAAAAAAAAAAAABQAFAAcABwAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAAAAUABwAAAAAAAAAAAAAAAAAAAAAAAAAAAAUAAAAAAAAAAAAFAAcABwAFAAUABQAAAAUAAAAHAAcABwAHAAcABwAHAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUAAAAHAAUABQAFAAUABQAFAAUAAAAAAAAAAAAAAAAAAAAAAAUABQAFAAUABQAFAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAAABwAFAAUABQAFAAUABQAFAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAFAAUABQAFAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAAAAUAAAAFAAAAAAAAAAAABwAHAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABwAFAAUABQAFAAUAAAAFAAUAAAAAAAAAAAAAAAUABQAFAAUABQAFAAUABQAFAAUABQAAAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAFAAUABwAFAAUABQAFAAUABQAAAAUABQAHAAcABQAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAHAAcABQAFAAAAAAAAAAAABQAFAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAUABQAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAAAAcABQAFAAAAAAAAAAAAAAAAAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAFAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAHAAUABQAFAAUABQAFAAUABwAHAAcABwAHAAcABwAHAAUABwAHAAUABQAFAAUABQAFAAUABQAFAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAFAAUABwAHAAcABwAFAAUABwAHAAcAAAAAAAAAAAAHAAcABQAHAAcABwAHAAcABwAFAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAFAAcABwAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAcABQAHAAUABQAFAAUABQAFAAUAAAAFAAAABQAAAAAABQAFAAUABQAFAAUABQAFAAcABwAHAAcABwAHAAUABQAFAAUABQAFAAUABQAFAAUAAAAAAAUABQAFAAUABQAHAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAFAAUABQAFAAUABwAFAAcABwAHAAcABwAFAAcABwAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAUABQAFAAUABQAFAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAUABwAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAHAAUABQAFAAUABwAHAAUABQAHAAUABQAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAcABQAFAAcABwAHAAUABwAFAAUABQAHAAcAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABwAHAAcABwAHAAcABwAHAAUABQAFAAUABQAFAAUABQAHAAcABQAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAFAAUAAAAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAcABQAFAAUABQAFAAUABQAAAAAAAAAAAAUAAAAAAAAAAAAAAAAABQAAAAAABwAFAAUAAAAAAAAAAAAAAAAABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAAABQAFAAUABQAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAFAAUABQAFAAUADgAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAOAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAFAAUAAAAFAAUABQAFAAUABQAFAAUABQAFAAAAAAAAAAAABQAAAAAAAAAFAAAAAAAAAAAABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABwAHAAUABQAHAAAAAAAAAAAABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAcABwAHAAcABQAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUAAAAAAAAAAAAAAAAABQAFAAUABQAFAAUABQAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAFAAUABQAFAAUABQAFAAUABQAHAAcAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAcABwAFAAUABQAFAAcABwAFAAUABwAHAAAAAAAAAAAAAAAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAFAAUABQAFAAcABwAFAAUABwAHAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAAAAAAAAAAAAAAAAAAAAAAFAAcAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUAAAAFAAUABQAAAAAABQAFAAAAAAAAAAAAAAAFAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAcABQAFAAcABwAAAAAAAAAAAAAABwAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAcABwAFAAcABwAFAAcABwAAAAcABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAFAAUABQAAAAAAAAAAAAAAAAAFAAUABQAAAAUABQAAAAAAAAAAAAAABQAFAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAUABQAAAAAAAAAAAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAcABQAHAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAUABQAFAAUABwAFAAUABQAFAAUABQAFAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABwAHAAcABQAFAAUABQAFAAUABQAFAAUABwAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAHAAcABwAFAAUABQAHAAcABQAHAAUABQAAAAAAAAAAAAAAAAAFAAAABwAHAAcABQAFAAUABQAFAAUABQAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABwAHAAcABwAAAAAABwAHAAAAAAAHAAcABwAAAAAAAAAAAAAAAAAAAAAAAAAFAAAAAAAAAAAAAAAAAAAAAAAAAAAABwAHAAAAAAAFAAUABQAFAAUABQAFAAAAAAAAAAUABQAFAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAHAAcABwAFAAUABQAFAAUABQAFAAUABwAHAAUABQAFAAcABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAHAAcABQAFAAUABQAFAAUABwAFAAcABwAFAAcABQAFAAcABQAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAHAAcABQAFAAUABQAAAAAABwAHAAcABwAFAAUABwAFAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAcABwAHAAUABQAFAAUABQAFAAUABQAHAAcABQAHAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABwAFAAcABwAFAAUABQAFAAUABQAHAAUAAAAAAAAAAAAAAAAAAAAAAAcABwAFAAUABQAFAAcABQAFAAUABQAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAHAAcABwAFAAUABQAFAAUABQAFAAUABQAHAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAHAAcABwAFAAUABQAFAAAAAAAFAAUABwAHAAcABwAFAAAAAAAAAAcAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAUABQAFAAUABQAFAAUABQAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUAAAAAAAAAAAAAAAAAAAAAAAAABQAFAAUABQAFAAUABwAHAAUABQAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAcABQAFAAUABQAFAAUABQAAAAUABQAFAAUABQAFAAcABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAAAHAAUABQAFAAUABQAFAAUABwAFAAUABwAFAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAFAAUABQAFAAUAAAAAAAAABQAAAAUABQAAAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAHAAcABwAHAAcAAAAFAAUAAAAHAAcABQAHAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAUABwAHAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAUABQAFAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAUABQAFAAUABQAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAAAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAAAAAAAAAAAAAAAAAAABQAFAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAcABwAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAAAAUABQAFAAAAAAAFAAUABQAFAAUABQAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAFAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAFAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAAAAAAAAAAABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAAAAAAAAAAAAAAAAAAAAAAFAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAFAAUABQAAAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAFAAUABQAFAAUABQAAAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAAAAAABQAFAAUABQAFAAUABQAAAAUABQAAAAUABQAFAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAUABQAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAFAAUABQAFAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAFAAUABQAFAAUADgAOAA4ADgAOAA4ADwAPAA8ADwAPAA8ADwAPAA8ADwAPAA8ADwAPAA8ADwAPAA8ADwAPAA8ADwAPAA8ADwAPAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAcABwAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABwAHAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAAAAAAAAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAKAAoACgAKAAoACgAKAAoACgAKAAoACgAKAAoACgAKAAoACgAKAAoACgAKAAoACgAMAAwADAAMAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkAAAAAAAAAAAAKAAoACgAKAAoACgAKAAoACgAKAAoACgAKAAoACgAKAAoACgAKAAoACgAKAAoACgAKAAoACgAKAAoACgAKAAoACgAAAAAAAAAAAAsADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwACwAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAAAAAADgAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA4AAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAOAA4ADgAOAA4ADgAAAAAAAAAAAAAAAAAAAAAAAAAAAAAADgAOAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA4ADgAAAAAAAAAAAAAAAAAAAAAADgAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAADgAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAADgAOAA4ADgAOAA4ADgAOAA4ADgAOAAAAAAAAAAAADgAOAA4AAAAAAAAAAAAAAAAAAAAOAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAADgAOAAAAAAAAAAAAAAAAAAAAAAAAAAAADgAAAAAAAAAAAAAAAAAAAAAAAAAOAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAADgAOAA4ADgAAAA4ADgAOAA4ADgAOAAAADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4AAAAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAAAAAAAAAAAAAAAAAAAAAAAAAAAADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4AAAAAAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAAAA4AAAAOAAAAAAAAAAAAAAAAAA4AAAAAAAAAAAAAAAAADgAAAAAAAAAAAAAAAAAAAAAAAAAAAA4ADgAAAAAAAAAAAAAAAAAAAAAAAAAAAAAADgAAAAAADgAAAAAAAAAAAA4AAAAOAAAAAAAAAAAADgAOAA4AAAAOAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAOAA4ADgAOAA4AAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAOAA4ADgAAAAAAAAAAAAAAAAAAAAAAAAAOAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAOAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAOAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAOAA4AAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA4ADgAOAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAADgAOAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAADgAAAAAAAAAAAA4AAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAOAAAADgAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAOAA4ADgAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA4ADgAOAA4ADgAOAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA4ADgAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAADgAAAAAADgAOAA4ADgAOAA4ADgAOAA4ADgAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAAAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAAAAAAAAAAAAAAAAAAAAAAAAAAAADgAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA4AAAAAAA4ADgAOAA4ADgAOAA4ADgAOAAAADgAOAA4ADgAAAAAAAAAAAAAAAAAAAAAAAAAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4AAAAAAAAAAAAAAAAADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAOAA4ADgAOAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAADgAOAA4ADgAOAA4ADgAOAAAAAAAAAAAAAAAAAAAAAAAAAAAADgAOAA4ADgAOAA4AAAAAAAAAAAAAAAAAAAAAAA4ADgAOAA4ADgAOAA4ADgAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4AAAAOAA4ADgAOAA4ADgAAAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4AAAAAAAAAAAA=",rQ="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",Ky=typeof Uint8Array>"u"?[]:new Uint8Array(256);for(var NC=0;NC<rQ.length;NC++)Ky[rQ.charCodeAt(NC)]=NC;var I_e=function(t){var e=t.length*.75,r=t.length,n,a=0,s,o,l,c;t[t.length-1]==="="&&(e--,t[t.length-2]==="="&&e--);var u=typeof ArrayBuffer<"u"&&typeof Uint8Array<"u"&&typeof Uint8Array.prototype.slice<"u"?new ArrayBuffer(e):new Array(e),d=Array.isArray(u)?u:new Uint8Array(u);for(n=0;n<r;n+=4)s=Ky[t.charCodeAt(n)],o=Ky[t.charCodeAt(n+1)],l=Ky[t.charCodeAt(n+2)],c=Ky[t.charCodeAt(n+3)],d[a++]=s<<2|o>>4,d[a++]=(o&15)<<4|l>>2,d[a++]=(l&3)<<6|c&63;return u},j_e=function(t){for(var e=t.length,r=[],n=0;n<e;n+=2)r.push(t[n+1]<<8|t[n]);return r},P_e=function(t){for(var e=t.length,r=[],n=0;n<e;n+=4)r.push(t[n+3]<<24|t[n+2]<<16|t[n+1]<<8|t[n]);return r},Fp=5,R6=11,M3=2,B_e=R6-Fp,Cte=65536>>Fp,T_e=1<<Fp,L3=T_e-1,k_e=1024>>Fp,F_e=Cte+k_e,O_e=F_e,D_e=32,R_e=O_e+D_e,M_e=65536>>R6,L_e=1<<B_e,U_e=L_e-1,nQ=function(t,e,r){return t.slice?t.slice(e,r):new Uint16Array(Array.prototype.slice.call(t,e,r))},Q_e=function(t,e,r){return t.slice?t.slice(e,r):new Uint32Array(Array.prototype.slice.call(t,e,r))},V_e=function(t,e){var r=I_e(t),n=Array.isArray(r)?P_e(r):new Uint32Array(r),a=Array.isArray(r)?j_e(r):new Uint16Array(r),s=24,o=nQ(a,s/2,n[4]/2),l=n[5]===2?nQ(a,(s+n[4])/2):Q_e(n,Math.ceil((s+n[4])/4));return new H_e(n[0],n[1],n[2],n[3],o,l)},H_e=function(){function t(e,r,n,a,s,o){this.initialValue=e,this.errorValue=r,this.highStart=n,this.highValueIndex=a,this.index=s,this.data=o}return t.prototype.get=function(e){var r;if(e>=0){if(e<55296||e>56319&&e<=65535)return r=this.index[e>>Fp],r=(r<<M3)+(e&L3),this.data[r];if(e<=65535)return r=this.index[Cte+(e-55296>>Fp)],r=(r<<M3)+(e&L3),this.data[r];if(e<this.highStart)return r=R_e-M_e+(e>>R6),r=this.index[r],r+=e>>Fp&U_e,r=this.index[r],r=(r<<M3)+(e&L3),this.data[r];if(e<=1114111)return this.data[this.highValueIndex]}return this.errorValue},t}(),aQ="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",$_e=typeof Uint8Array>"u"?[]:new Uint8Array(256);for(var CC=0;CC<aQ.length;CC++)$_e[aQ.charCodeAt(CC)]=CC;var G_e=1,U3=2,Q3=3,sQ=4,iQ=5,K_e=7,oQ=8,V3=9,H3=10,lQ=11,cQ=12,uQ=13,dQ=14,$3=15,q_e=function(t){for(var e=[],r=0,n=t.length;r<n;){var a=t.charCodeAt(r++);if(a>=55296&&a<=56319&&r<n){var s=t.charCodeAt(r++);(s&64512)===56320?e.push(((a&1023)<<10)+(s&1023)+65536):(e.push(a),r--)}else e.push(a)}return e},z_e=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];if(String.fromCodePoint)return String.fromCodePoint.apply(String,t);var r=t.length;if(!r)return"";for(var n=[],a=-1,s="";++a<r;){var o=t[a];o<=65535?n.push(o):(o-=65536,n.push((o>>10)+55296,o%1024+56320)),(a+1===r||n.length>16384)&&(s+=String.fromCharCode.apply(String,n),n.length=0)}return s},W_e=V_e(S_e),md="",G3="",X_e=function(t){return W_e.get(t)},Y_e=function(t,e,r){var n=r-2,a=e[n],s=e[r-1],o=e[r];if(s===U3&&o===Q3)return md;if(s===U3||s===Q3||s===sQ||o===U3||o===Q3||o===sQ)return G3;if(s===oQ&&[oQ,V3,lQ,cQ].indexOf(o)!==-1||(s===lQ||s===V3)&&(o===V3||o===H3)||(s===cQ||s===H3)&&o===H3||o===uQ||o===iQ||o===K_e||s===G_e)return md;if(s===uQ&&o===dQ){for(;a===iQ;)a=e[--n];if(a===dQ)return md}if(s===$3&&o===$3){for(var l=0;a===$3;)l++,a=e[--n];if(l%2===0)return md}return G3},J_e=function(t){var e=q_e(t),r=e.length,n=0,a=0,s=e.map(X_e);return{next:function(){if(n>=r)return{done:!0,value:null};for(var o=md;n<r&&(o=Y_e(e,s,++n))===md;);if(o!==md||n===r){var l=z_e.apply(null,e.slice(a,n));return a=n,{value:l,done:!1}}return{done:!0,value:null}}}},Z_e=function(t){for(var e=J_e(t),r=[],n;!(n=e.next()).done;)n.value&&r.push(n.value.slice());return r},eEe=function(t){var e=123;if(t.createRange){var r=t.createRange();if(r.getBoundingClientRect){var n=t.createElement("boundtest");n.style.height=e+"px",n.style.display="block",t.body.appendChild(n),r.selectNode(n);var a=r.getBoundingClientRect(),s=Math.round(a.height);if(t.body.removeChild(n),s===e)return!0}}return!1},tEe=function(t){var e=t.createElement("boundtest");e.style.width="50px",e.style.display="block",e.style.fontSize="12px",e.style.letterSpacing="0px",e.style.wordSpacing="0px",t.body.appendChild(e);var r=t.createRange();e.innerHTML=typeof"".repeat=="function"?"&#128104;".repeat(10):"";var n=e.firstChild,a=zj(n.data).map(function(c){return Mi(c)}),s=0,o={},l=a.every(function(c,u){r.setStart(n,s),r.setEnd(n,s+c.length);var d=r.getBoundingClientRect();s+=c.length;var f=d.x>o.x||d.y>o.y;return o=d,u===0?!0:f});return t.body.removeChild(e),l},rEe=function(){return typeof new Image().crossOrigin<"u"},nEe=function(){return typeof new XMLHttpRequest().responseType=="string"},aEe=function(t){var e=new Image,r=t.createElement("canvas"),n=r.getContext("2d");if(!n)return!1;e.src="data:image/svg+xml,<svg xmlns='http://www.w3.org/2000/svg'></svg>";try{n.drawImage(e,0,0),r.toDataURL()}catch{return!1}return!0},fQ=function(t){return t[0]===0&&t[1]===255&&t[2]===0&&t[3]===255},sEe=function(t){var e=t.createElement("canvas"),r=100;e.width=r,e.height=r;var n=e.getContext("2d");if(!n)return Promise.reject(!1);n.fillStyle="rgb(0, 255, 0)",n.fillRect(0,0,r,r);var a=new Image,s=e.toDataURL();a.src=s;var o=Ek(r,r,0,0,a);return n.fillStyle="red",n.fillRect(0,0,r,r),hQ(o).then(function(l){n.drawImage(l,0,0);var c=n.getImageData(0,0,r,r).data;n.fillStyle="red",n.fillRect(0,0,r,r);var u=t.createElement("div");return u.style.backgroundImage="url("+s+")",u.style.height=r+"px",fQ(c)?hQ(Ek(r,r,0,0,u)):Promise.reject(!1)}).then(function(l){return n.drawImage(l,0,0),fQ(n.getImageData(0,0,r,r).data)}).catch(function(){return!1})},Ek=function(t,e,r,n,a){var s="http://www.w3.org/2000/svg",o=document.createElementNS(s,"svg"),l=document.createElementNS(s,"foreignObject");return o.setAttributeNS(null,"width",t.toString()),o.setAttributeNS(null,"height",e.toString()),l.setAttributeNS(null,"width","100%"),l.setAttributeNS(null,"height","100%"),l.setAttributeNS(null,"x",r.toString()),l.setAttributeNS(null,"y",n.toString()),l.setAttributeNS(null,"externalResourcesRequired","true"),o.appendChild(l),l.appendChild(a),o},hQ=function(t){return new Promise(function(e,r){var n=new Image;n.onload=function(){return e(n)},n.onerror=r,n.src="data:image/svg+xml;charset=utf-8,"+encodeURIComponent(new XMLSerializer().serializeToString(t))})},bl={get SUPPORT_RANGE_BOUNDS(){var t=eEe(document);return Object.defineProperty(bl,"SUPPORT_RANGE_BOUNDS",{value:t}),t},get SUPPORT_WORD_BREAKING(){var t=bl.SUPPORT_RANGE_BOUNDS&&tEe(document);return Object.defineProperty(bl,"SUPPORT_WORD_BREAKING",{value:t}),t},get SUPPORT_SVG_DRAWING(){var t=aEe(document);return Object.defineProperty(bl,"SUPPORT_SVG_DRAWING",{value:t}),t},get SUPPORT_FOREIGNOBJECT_DRAWING(){var t=typeof Array.from=="function"&&typeof window.fetch=="function"?sEe(document):Promise.resolve(!1);return Object.defineProperty(bl,"SUPPORT_FOREIGNOBJECT_DRAWING",{value:t}),t},get SUPPORT_CORS_IMAGES(){var t=rEe();return Object.defineProperty(bl,"SUPPORT_CORS_IMAGES",{value:t}),t},get SUPPORT_RESPONSE_TYPE(){var t=nEe();return Object.defineProperty(bl,"SUPPORT_RESPONSE_TYPE",{value:t}),t},get SUPPORT_CORS_XHR(){var t="withCredentials"in new XMLHttpRequest;return Object.defineProperty(bl,"SUPPORT_CORS_XHR",{value:t}),t},get SUPPORT_NATIVE_TEXT_SEGMENTATION(){var t=!!(typeof Intl<"u"&&Intl.Segmenter);return Object.defineProperty(bl,"SUPPORT_NATIVE_TEXT_SEGMENTATION",{value:t}),t}},wb=function(){function t(e,r){this.text=e,this.bounds=r}return t}(),iEe=function(t,e,r,n){var a=cEe(e,r),s=[],o=0;return a.forEach(function(l){if(r.textDecorationLine.length||l.trim().length>0)if(bl.SUPPORT_RANGE_BOUNDS){var c=AQ(n,o,l.length).getClientRects();if(c.length>1){var u=M6(l),d=0;u.forEach(function(A){s.push(new wb(A,xA.fromDOMRectList(t,AQ(n,d+o,A.length).getClientRects()))),d+=A.length})}else s.push(new wb(l,xA.fromDOMRectList(t,c)))}else{var f=n.splitText(l.length);s.push(new wb(l,oEe(t,n))),n=f}else bl.SUPPORT_RANGE_BOUNDS||(n=n.splitText(l.length));o+=l.length}),s},oEe=function(t,e){var r=e.ownerDocument;if(r){var n=r.createElement("html2canvaswrapper");n.appendChild(e.cloneNode(!0));var a=e.parentNode;if(a){a.replaceChild(n,e);var s=qj(t,n);return n.firstChild&&a.replaceChild(n.firstChild,n),s}}return xA.EMPTY},AQ=function(t,e,r){var n=t.ownerDocument;if(!n)throw new Error("Node has no owner document");var a=n.createRange();return a.setStart(t,e),a.setEnd(t,e+r),a},M6=function(t){if(bl.SUPPORT_NATIVE_TEXT_SEGMENTATION){var e=new Intl.Segmenter(void 0,{granularity:"grapheme"});return Array.from(e.segment(t)).map(function(r){return r.segment})}return Z_e(t)},lEe=function(t,e){if(bl.SUPPORT_NATIVE_TEXT_SEGMENTATION){var r=new Intl.Segmenter(void 0,{granularity:"word"});return Array.from(r.segment(t)).map(function(n){return n.segment})}return dEe(t,e)},cEe=function(t,e){return e.letterSpacing!==0?M6(t):lEe(t,e)},uEe=[32,160,4961,65792,65793,4153,4241],dEe=function(t,e){for(var r=Mwe(t,{lineBreak:e.lineBreak,wordBreak:e.overflowWrap==="break-word"?"break-word":e.wordBreak}),n=[],a,s=function(){if(a.value){var o=a.value.slice(),l=zj(o),c="";l.forEach(function(u){uEe.indexOf(u)===-1?c+=Mi(u):(c.length&&n.push(c),n.push(Mi(u)),c="")}),c.length&&n.push(c)}};!(a=r.next()).done;)s();return n},fEe=function(){function t(e,r,n){this.text=hEe(r.data,n.textTransform),this.textBounds=iEe(e,this.text,n,r)}return t}(),hEe=function(t,e){switch(e){case 1:return t.toLowerCase();case 3:return t.replace(AEe,mEe);case 2:return t.toUpperCase();default:return t}},AEe=/(^|\s|:|-|\(|\))([a-z])/g,mEe=function(t,e,r){return t.length>0?e+r.toUpperCase():t},_te=function(t){Sf(e,t);function e(r,n){var a=t.call(this,r,n)||this;return a.src=n.currentSrc||n.src,a.intrinsicWidth=n.naturalWidth,a.intrinsicHeight=n.naturalHeight,a.context.cache.addImage(a.src),a}return e}(Ah),Ete=function(t){Sf(e,t);function e(r,n){var a=t.call(this,r,n)||this;return a.canvas=n,a.intrinsicWidth=n.width,a.intrinsicHeight=n.height,a}return e}(Ah),Ste=function(t){Sf(e,t);function e(r,n){var a=t.call(this,r,n)||this,s=new XMLSerializer,o=qj(r,n);return n.setAttribute("width",o.width+"px"),n.setAttribute("height",o.height+"px"),a.svg="data:image/svg+xml,"+encodeURIComponent(s.serializeToString(n)),a.intrinsicWidth=n.width.baseVal.value,a.intrinsicHeight=n.height.baseVal.value,a.context.cache.addImage(a.svg),a}return e}(Ah),Ite=function(t){Sf(e,t);function e(r,n){var a=t.call(this,r,n)||this;return a.value=n.value,a}return e}(Ah),Sk=function(t){Sf(e,t);function e(r,n){var a=t.call(this,r,n)||this;return a.start=n.start,a.reversed=typeof n.reversed=="boolean"&&n.reversed===!0,a}return e}(Ah),pEe=[{type:15,flags:0,unit:"px",number:3}],gEe=[{type:16,flags:0,number:50}],xEe=function(t){return t.width>t.height?new xA(t.left+(t.width-t.height)/2,t.top,t.height,t.height):t.width<t.height?new xA(t.left,t.top+(t.height-t.width)/2,t.width,t.width):t},vEe=function(t){var e=t.type===yEe?new Array(t.value.length+1).join(""):t.value;return e.length===0?t.placeholder||"":e},CS="checkbox",_S="radio",yEe="password",mQ=707406591,L6=function(t){Sf(e,t);function e(r,n){var a=t.call(this,r,n)||this;switch(a.type=n.type.toLowerCase(),a.checked=n.checked,a.value=vEe(n),(a.type===CS||a.type===_S)&&(a.styles.backgroundColor=3739148031,a.styles.borderTopColor=a.styles.borderRightColor=a.styles.borderBottomColor=a.styles.borderLeftColor=2779096575,a.styles.borderTopWidth=a.styles.borderRightWidth=a.styles.borderBottomWidth=a.styles.borderLeftWidth=1,a.styles.borderTopStyle=a.styles.borderRightStyle=a.styles.borderBottomStyle=a.styles.borderLeftStyle=1,a.styles.backgroundClip=[0],a.styles.backgroundOrigin=[0],a.bounds=xEe(a.bounds)),a.type){case CS:a.styles.borderTopRightRadius=a.styles.borderTopLeftRadius=a.styles.borderBottomRightRadius=a.styles.borderBottomLeftRadius=pEe;break;case _S:a.styles.borderTopRightRadius=a.styles.borderTopLeftRadius=a.styles.borderBottomRightRadius=a.styles.borderBottomLeftRadius=gEe;break}return a}return e}(Ah),jte=function(t){Sf(e,t);function e(r,n){var a=t.call(this,r,n)||this,s=n.options[n.selectedIndex||0];return a.value=s&&s.text||"",a}return e}(Ah),Pte=function(t){Sf(e,t);function e(r,n){var a=t.call(this,r,n)||this;return a.value=n.value,a}return e}(Ah),Bte=function(t){Sf(e,t);function e(r,n){var a=t.call(this,r,n)||this;a.src=n.src,a.width=parseInt(n.width,10)||0,a.height=parseInt(n.height,10)||0,a.backgroundColor=a.styles.backgroundColor;try{if(n.contentWindow&&n.contentWindow.document&&n.contentWindow.document.documentElement){a.tree=kte(r,n.contentWindow.document.documentElement);var s=n.contentWindow.document.documentElement?yb(r,getComputedStyle(n.contentWindow.document.documentElement).backgroundColor):aA.TRANSPARENT,o=n.contentWindow.document.body?yb(r,getComputedStyle(n.contentWindow.document.body).backgroundColor):aA.TRANSPARENT;a.backgroundColor=um(s)?um(o)?a.styles.backgroundColor:o:s}}catch{}return a}return e}(Ah),bEe=["OL","UL","MENU"],hE=function(t,e,r,n){for(var a=e.firstChild,s=void 0;a;a=s)if(s=a.nextSibling,Fte(a)&&a.data.trim().length>0)r.textNodes.push(new fEe(t,a,r.styles));else if(zx(a))if(Mte(a)&&a.assignedNodes)a.assignedNodes().forEach(function(l){return hE(t,l,r,n)});else{var o=Tte(t,a);o.styles.isVisible()&&(wEe(a,o,n)?o.flags|=4:NEe(o.styles)&&(o.flags|=2),bEe.indexOf(a.tagName)!==-1&&(o.flags|=8),r.elements.push(o),a.slot,a.shadowRoot?hE(t,a.shadowRoot,o,n):!ES(a)&&!Ote(a)&&!SS(a)&&hE(t,a,o,n))}},Tte=function(t,e){return jk(e)?new _te(t,e):Dte(e)?new Ete(t,e):Ote(e)?new Ste(t,e):CEe(e)?new Ite(t,e):_Ee(e)?new Sk(t,e):EEe(e)?new L6(t,e):SS(e)?new jte(t,e):ES(e)?new Pte(t,e):Rte(e)?new Bte(t,e):new Ah(t,e)},kte=function(t,e){var r=Tte(t,e);return r.flags|=4,hE(t,e,r,r),r},wEe=function(t,e,r){return e.styles.isPositionedWithZIndex()||e.styles.opacity<1||e.styles.isTransformed()||U6(t)&&r.styles.isTransparent()},NEe=function(t){return t.isPositioned()||t.isFloating()},Fte=function(t){return t.nodeType===Node.TEXT_NODE},zx=function(t){return t.nodeType===Node.ELEMENT_NODE},Ik=function(t){return zx(t)&&typeof t.style<"u"&&!AE(t)},AE=function(t){return typeof t.className=="object"},CEe=function(t){return t.tagName==="LI"},_Ee=function(t){return t.tagName==="OL"},EEe=function(t){return t.tagName==="INPUT"},SEe=function(t){return t.tagName==="HTML"},Ote=function(t){return t.tagName==="svg"},U6=function(t){return t.tagName==="BODY"},Dte=function(t){return t.tagName==="CANVAS"},pQ=function(t){return t.tagName==="VIDEO"},jk=function(t){return t.tagName==="IMG"},Rte=function(t){return t.tagName==="IFRAME"},gQ=function(t){return t.tagName==="STYLE"},IEe=function(t){return t.tagName==="SCRIPT"},ES=function(t){return t.tagName==="TEXTAREA"},SS=function(t){return t.tagName==="SELECT"},Mte=function(t){return t.tagName==="SLOT"},xQ=function(t){return t.tagName.indexOf("-")>0},jEe=function(){function t(){this.counters={}}return t.prototype.getCounterValue=function(e){var r=this.counters[e];return r&&r.length?r[r.length-1]:1},t.prototype.getCounterValues=function(e){var r=this.counters[e];return r||[]},t.prototype.pop=function(e){var r=this;e.forEach(function(n){return r.counters[n].pop()})},t.prototype.parse=function(e){var r=this,n=e.counterIncrement,a=e.counterReset,s=!0;n!==null&&n.forEach(function(l){var c=r.counters[l.counter];c&&l.increment!==0&&(s=!1,c.length||c.push(1),c[Math.max(0,c.length-1)]+=l.increment)});var o=[];return s&&a.forEach(function(l){var c=r.counters[l.counter];o.push(l.counter),c||(c=r.counters[l.counter]=[]),c.push(l.reset)}),o},t}(),vQ={integers:[1e3,900,500,400,100,90,50,40,10,9,5,4,1],values:["M","CM","D","CD","C","XC","L","XL","X","IX","V","IV","I"]},yQ={integers:[9e3,8e3,7e3,6e3,5e3,4e3,3e3,2e3,1e3,900,800,700,600,500,400,300,200,100,90,80,70,60,50,40,30,20,10,9,8,7,6,5,4,3,2,1],values:["","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","",""]},PEe={integers:[1e4,9e3,8e3,7e3,6e3,5e3,4e3,3e3,2e3,1e3,400,300,200,100,90,80,70,60,50,40,30,20,19,18,17,16,15,10,9,8,7,6,5,4,3,2,1],values:["","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","",""]},BEe={integers:[1e4,9e3,8e3,7e3,6e3,5e3,4e3,3e3,2e3,1e3,900,800,700,600,500,400,300,200,100,90,80,70,60,50,40,30,20,10,9,8,7,6,5,4,3,2,1],values:["","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","",""]},sx=function(t,e,r,n,a,s){return t<e||t>r?_2(t,a,s.length>0):n.integers.reduce(function(o,l,c){for(;t>=l;)t-=l,o+=n.values[c];return o},"")+s},Lte=function(t,e,r,n){var a="";do r||t--,a=n(t)+a,t/=e;while(t*e>=e);return a},ki=function(t,e,r,n,a){var s=r-e+1;return(t<0?"-":"")+(Lte(Math.abs(t),s,n,function(o){return Mi(Math.floor(o%s)+e)})+a)},Wm=function(t,e,r){r===void 0&&(r=". ");var n=e.length;return Lte(Math.abs(t),n,!1,function(a){return e[Math.floor(a%n)]})+r},jx=1,w0=2,N0=4,qy=8,_h=function(t,e,r,n,a,s){if(t<-9999||t>9999)return _2(t,4,a.length>0);var o=Math.abs(t),l=a;if(o===0)return e[0]+l;for(var c=0;o>0&&c<=4;c++){var u=o%10;u===0&&_o(s,jx)&&l!==""?l=e[u]+l:u>1||u===1&&c===0||u===1&&c===1&&_o(s,w0)||u===1&&c===1&&_o(s,N0)&&t>100||u===1&&c>1&&_o(s,qy)?l=e[u]+(c>0?r[c-1]:"")+l:u===1&&c>0&&(l=r[c-1]+l),o=Math.floor(o/10)}return(t<0?n:"")+l},bQ="",wQ="",NQ="",K3="",_2=function(t,e,r){var n=r?". ":"",a=r?"":"",s=r?", ":"",o=r?" ":"";switch(e){case 0:return""+o;case 1:return""+o;case 2:return""+o;case 5:var l=ki(t,48,57,!0,n);return l.length<4?"0"+l:l;case 4:return Wm(t,"",a);case 6:return sx(t,1,3999,vQ,3,n).toLowerCase();case 7:return sx(t,1,3999,vQ,3,n);case 8:return ki(t,945,969,!1,n);case 9:return ki(t,97,122,!1,n);case 10:return ki(t,65,90,!1,n);case 11:return ki(t,1632,1641,!0,n);case 12:case 49:return sx(t,1,9999,yQ,3,n);case 35:return sx(t,1,9999,yQ,3,n).toLowerCase();case 13:return ki(t,2534,2543,!0,n);case 14:case 30:return ki(t,6112,6121,!0,n);case 15:return Wm(t,"",a);case 16:return Wm(t,"",a);case 17:case 48:return _h(t,"",bQ,"",a,w0|N0|qy);case 47:return _h(t,"",wQ,"",a,jx|w0|N0|qy);case 42:return _h(t,"",bQ,"",a,w0|N0|qy);case 41:return _h(t,"",wQ,"",a,jx|w0|N0|qy);case 26:return _h(t,"","",NQ,a,0);case 25:return _h(t,"","",NQ,a,jx|w0|N0);case 31:return _h(t,"","",K3,s,jx|w0|N0);case 33:return _h(t,"","",K3,s,0);case 32:return _h(t,"","",K3,s,jx|w0|N0);case 18:return ki(t,2406,2415,!0,n);case 20:return sx(t,1,19999,BEe,3,n);case 21:return ki(t,2790,2799,!0,n);case 22:return ki(t,2662,2671,!0,n);case 22:return sx(t,1,10999,PEe,3,n);case 23:return Wm(t,"");case 24:return Wm(t,"");case 27:return ki(t,3302,3311,!0,n);case 28:return Wm(t,"",a);case 29:return Wm(t,"",a);case 34:return ki(t,3792,3801,!0,n);case 37:return ki(t,6160,6169,!0,n);case 38:return ki(t,4160,4169,!0,n);case 39:return ki(t,2918,2927,!0,n);case 40:return ki(t,1776,1785,!0,n);case 43:return ki(t,3046,3055,!0,n);case 44:return ki(t,3174,3183,!0,n);case 45:return ki(t,3664,3673,!0,n);case 46:return ki(t,3872,3881,!0,n);case 3:default:return ki(t,48,57,!0,n)}},Ute="data-html2canvas-ignore",CQ=function(){function t(e,r,n){if(this.context=e,this.options=n,this.scrolledElements=[],this.referenceElement=r,this.counters=new jEe,this.quoteDepth=0,!r.ownerDocument)throw new Error("Cloned element does not have an owner document");this.documentElement=this.cloneNode(r.ownerDocument.documentElement,!1)}return t.prototype.toIFrame=function(e,r){var n=this,a=TEe(e,r);if(!a.contentWindow)return Promise.reject("Unable to find iframe window");var s=e.defaultView.pageXOffset,o=e.defaultView.pageYOffset,l=a.contentWindow,c=l.document,u=OEe(a).then(function(){return xc(n,void 0,void 0,function(){var d,f;return Wl(this,function(A){switch(A.label){case 0:return this.scrolledElements.forEach(LEe),l&&(l.scrollTo(r.left,r.top),/(iPad|iPhone|iPod)/g.test(navigator.userAgent)&&(l.scrollY!==r.top||l.scrollX!==r.left)&&(this.context.logger.warn("Unable to restore scroll position for cloned document"),this.context.windowBounds=this.context.windowBounds.add(l.scrollX-r.left,l.scrollY-r.top,0,0))),d=this.options.onclone,f=this.clonedReferenceElement,typeof f>"u"?[2,Promise.reject("Error finding the "+this.referenceElement.nodeName+" in the cloned document")]:c.fonts&&c.fonts.ready?[4,c.fonts.ready]:[3,2];case 1:A.sent(),A.label=2;case 2:return/(AppleWebKit)/g.test(navigator.userAgent)?[4,FEe(c)]:[3,4];case 3:A.sent(),A.label=4;case 4:return typeof d=="function"?[2,Promise.resolve().then(function(){return d(c,f)}).then(function(){return a})]:[2,a]}})})});return c.open(),c.write(REe(document.doctype)+"<html></html>"),MEe(this.referenceElement.ownerDocument,s,o),c.replaceChild(c.adoptNode(this.documentElement),c.documentElement),c.close(),u},t.prototype.createElementClone=function(e){if(_k(e,2))debugger;if(Dte(e))return this.createCanvasClone(e);if(pQ(e))return this.createVideoClone(e);if(gQ(e))return this.createStyleClone(e);var r=e.cloneNode(!1);return jk(r)&&(jk(e)&&e.currentSrc&&e.currentSrc!==e.src&&(r.src=e.currentSrc,r.srcset=""),r.loading==="lazy"&&(r.loading="eager")),xQ(r)?this.createCustomElementClone(r):r},t.prototype.createCustomElementClone=function(e){var r=document.createElement("html2canvascustomelement");return q3(e.style,r),r},t.prototype.createStyleClone=function(e){try{var r=e.sheet;if(r&&r.cssRules){var n=[].slice.call(r.cssRules,0).reduce(function(s,o){return o&&typeof o.cssText=="string"?s+o.cssText:s},""),a=e.cloneNode(!1);return a.textContent=n,a}}catch(s){if(this.context.logger.error("Unable to access cssRules property",s),s.name!=="SecurityError")throw s}return e.cloneNode(!1)},t.prototype.createCanvasClone=function(e){var r;if(this.options.inlineImages&&e.ownerDocument){var n=e.ownerDocument.createElement("img");try{return n.src=e.toDataURL(),n}catch{this.context.logger.info("Unable to inline canvas contents, canvas is tainted",e)}}var a=e.cloneNode(!1);try{a.width=e.width,a.height=e.height;var s=e.getContext("2d"),o=a.getContext("2d");if(o)if(!this.options.allowTaint&&s)o.putImageData(s.getImageData(0,0,e.width,e.height),0,0);else{var l=(r=e.getContext("webgl2"))!==null&&r!==void 0?r:e.getContext("webgl");if(l){var c=l.getContextAttributes();(c==null?void 0:c.preserveDrawingBuffer)===!1&&this.context.logger.warn("Unable to clone WebGL context as it has preserveDrawingBuffer=false",e)}o.drawImage(e,0,0)}return a}catch{this.context.logger.info("Unable to clone canvas as it is tainted",e)}return a},t.prototype.createVideoClone=function(e){var r=e.ownerDocument.createElement("canvas");r.width=e.offsetWidth,r.height=e.offsetHeight;var n=r.getContext("2d");try{return n&&(n.drawImage(e,0,0,r.width,r.height),this.options.allowTaint||n.getImageData(0,0,r.width,r.height)),r}catch{this.context.logger.info("Unable to clone video as it is tainted",e)}var a=e.ownerDocument.createElement("canvas");return a.width=e.offsetWidth,a.height=e.offsetHeight,a},t.prototype.appendChildNode=function(e,r,n){(!zx(r)||!IEe(r)&&!r.hasAttribute(Ute)&&(typeof this.options.ignoreElements!="function"||!this.options.ignoreElements(r)))&&(!this.options.copyStyles||!zx(r)||!gQ(r))&&e.appendChild(this.cloneNode(r,n))},t.prototype.cloneChildNodes=function(e,r,n){for(var a=this,s=e.shadowRoot?e.shadowRoot.firstChild:e.firstChild;s;s=s.nextSibling)if(zx(s)&&Mte(s)&&typeof s.assignedNodes=="function"){var o=s.assignedNodes();o.length&&o.forEach(function(l){return a.appendChildNode(r,l,n)})}else this.appendChildNode(r,s,n)},t.prototype.cloneNode=function(e,r){if(Fte(e))return document.createTextNode(e.data);if(!e.ownerDocument)return e.cloneNode(!1);var n=e.ownerDocument.defaultView;if(n&&zx(e)&&(Ik(e)||AE(e))){var a=this.createElementClone(e);a.style.transitionProperty="none";var s=n.getComputedStyle(e),o=n.getComputedStyle(e,":before"),l=n.getComputedStyle(e,":after");this.referenceElement===e&&Ik(a)&&(this.clonedReferenceElement=a),U6(a)&&VEe(a);var c=this.counters.parse(new tQ(this.context,s)),u=this.resolvePseudoContent(e,a,o,Nb.BEFORE);xQ(e)&&(r=!0),pQ(e)||this.cloneChildNodes(e,a,r),u&&a.insertBefore(u,a.firstChild);var d=this.resolvePseudoContent(e,a,l,Nb.AFTER);return d&&a.appendChild(d),this.counters.pop(c),(s&&(this.options.copyStyles||AE(e))&&!Rte(e)||r)&&q3(s,a),(e.scrollTop!==0||e.scrollLeft!==0)&&this.scrolledElements.push([a,e.scrollLeft,e.scrollTop]),(ES(e)||SS(e))&&(ES(a)||SS(a))&&(a.value=e.value),a}return e.cloneNode(!1)},t.prototype.resolvePseudoContent=function(e,r,n,a){var s=this;if(n){var o=n.content,l=r.ownerDocument;if(!(!l||!o||o==="none"||o==="-moz-alt-content"||n.display==="none")){this.counters.parse(new tQ(this.context,n));var c=new C_e(this.context,n),u=l.createElement("html2canvaspseudoelement");q3(n,u),c.content.forEach(function(f){if(f.type===0)u.appendChild(l.createTextNode(f.value));else if(f.type===22){var A=l.createElement("img");A.src=f.value,A.style.opacity="1",u.appendChild(A)}else if(f.type===18){if(f.name==="attr"){var h=f.values.filter(os);h.length&&u.appendChild(l.createTextNode(e.getAttribute(h[0].value)||""))}else if(f.name==="counter"){var m=f.values.filter(Mv),p=m[0],x=m[1];if(p&&os(p)){var v=s.counters.getCounterValue(p.value),y=x&&os(x)?Ck.parse(s.context,x.value):3;u.appendChild(l.createTextNode(_2(v,y,!1)))}}else if(f.name==="counters"){var b=f.values.filter(Mv),p=b[0],w=b[1],x=b[2];if(p&&os(p)){var j=s.counters.getCounterValues(p.value),I=x&&os(x)?Ck.parse(s.context,x.value):3,_=w&&w.type===0?w.value:"",S=j.map(function(k){return _2(k,I,!1)}).join(_);u.appendChild(l.createTextNode(S))}}}else if(f.type===20)switch(f.value){case"open-quote":u.appendChild(l.createTextNode(eQ(c.quotes,s.quoteDepth++,!0)));break;case"close-quote":u.appendChild(l.createTextNode(eQ(c.quotes,--s.quoteDepth,!1)));break;default:u.appendChild(l.createTextNode(f.value))}}),u.className=Pk+" "+Bk;var d=a===Nb.BEFORE?" "+Pk:" "+Bk;return AE(r)?r.className.baseValue+=d:r.className+=d,u}}},t.destroy=function(e){return e.parentNode?(e.parentNode.removeChild(e),!0):!1},t}(),Nb;(function(t){t[t.BEFORE=0]="BEFORE",t[t.AFTER=1]="AFTER"})(Nb||(Nb={}));var TEe=function(t,e){var r=t.createElement("iframe");return r.className="html2canvas-container",r.style.visibility="hidden",r.style.position="fixed",r.style.left="-10000px",r.style.top="0px",r.style.border="0",r.width=e.width.toString(),r.height=e.height.toString(),r.scrolling="no",r.setAttribute(Ute,"true"),t.body.appendChild(r),r},kEe=function(t){return new Promise(function(e){if(t.complete){e();return}if(!t.src){e();return}t.onload=e,t.onerror=e})},FEe=function(t){return Promise.all([].slice.call(t.images,0).map(kEe))},OEe=function(t){return new Promise(function(e,r){var n=t.contentWindow;if(!n)return r("No window assigned for iframe");var a=n.document;n.onload=t.onload=function(){n.onload=t.onload=null;var s=setInterval(function(){a.body.childNodes.length>0&&a.readyState==="complete"&&(clearInterval(s),e(t))},50)}})},DEe=["all","d","content"],q3=function(t,e){for(var r=t.length-1;r>=0;r--){var n=t.item(r);DEe.indexOf(n)===-1&&e.style.setProperty(n,t.getPropertyValue(n))}return e},REe=function(t){var e="";return t&&(e+="<!DOCTYPE ",t.name&&(e+=t.name),t.internalSubset&&(e+=t.internalSubset),t.publicId&&(e+='"'+t.publicId+'"'),t.systemId&&(e+='"'+t.systemId+'"'),e+=">"),e},MEe=function(t,e,r){t&&t.defaultView&&(e!==t.defaultView.pageXOffset||r!==t.defaultView.pageYOffset)&&t.defaultView.scrollTo(e,r)},LEe=function(t){var e=t[0],r=t[1],n=t[2];e.scrollLeft=r,e.scrollTop=n},UEe=":before",QEe=":after",Pk="___html2canvas___pseudoelement_before",Bk="___html2canvas___pseudoelement_after",_Q=`{
    content: "" !important;
    display: none !important;
}`,VEe=function(t){HEe(t,"."+Pk+UEe+_Q+`
         .`+Bk+QEe+_Q)},HEe=function(t,e){var r=t.ownerDocument;if(r){var n=r.createElement("style");n.textContent=e,t.appendChild(n)}},Qte=function(){function t(){}return t.getOrigin=function(e){var r=t._link;return r?(r.href=e,r.href=r.href,r.protocol+r.hostname+r.port):"about:blank"},t.isSameOrigin=function(e){return t.getOrigin(e)===t._origin},t.setContext=function(e){t._link=e.document.createElement("a"),t._origin=t.getOrigin(e.location.href)},t._origin="about:blank",t}(),$Ee=function(){function t(e,r){this.context=e,this._options=r,this._cache={}}return t.prototype.addImage=function(e){var r=Promise.resolve();return this.has(e)||(W3(e)||zEe(e))&&(this._cache[e]=this.loadImage(e)).catch(function(){}),r},t.prototype.match=function(e){return this._cache[e]},t.prototype.loadImage=function(e){return xc(this,void 0,void 0,function(){var r,n,a,s,o=this;return Wl(this,function(l){switch(l.label){case 0:return r=Qte.isSameOrigin(e),n=!z3(e)&&this._options.useCORS===!0&&bl.SUPPORT_CORS_IMAGES&&!r,a=!z3(e)&&!r&&!W3(e)&&typeof this._options.proxy=="string"&&bl.SUPPORT_CORS_XHR&&!n,!r&&this._options.allowTaint===!1&&!z3(e)&&!W3(e)&&!a&&!n?[2]:(s=e,a?[4,this.proxy(s)]:[3,2]);case 1:s=l.sent(),l.label=2;case 2:return this.context.logger.debug("Added image "+e.substring(0,256)),[4,new Promise(function(c,u){var d=new Image;d.onload=function(){return c(d)},d.onerror=u,(WEe(s)||n)&&(d.crossOrigin="anonymous"),d.src=s,d.complete===!0&&setTimeout(function(){return c(d)},500),o._options.imageTimeout>0&&setTimeout(function(){return u("Timed out ("+o._options.imageTimeout+"ms) loading image")},o._options.imageTimeout)})];case 3:return[2,l.sent()]}})})},t.prototype.has=function(e){return typeof this._cache[e]<"u"},t.prototype.keys=function(){return Promise.resolve(Object.keys(this._cache))},t.prototype.proxy=function(e){var r=this,n=this._options.proxy;if(!n)throw new Error("No proxy defined");var a=e.substring(0,256);return new Promise(function(s,o){var l=bl.SUPPORT_RESPONSE_TYPE?"blob":"text",c=new XMLHttpRequest;c.onload=function(){if(c.status===200)if(l==="text")s(c.response);else{var f=new FileReader;f.addEventListener("load",function(){return s(f.result)},!1),f.addEventListener("error",function(A){return o(A)},!1),f.readAsDataURL(c.response)}else o("Failed to proxy resource "+a+" with status code "+c.status)},c.onerror=o;var u=n.indexOf("?")>-1?"&":"?";if(c.open("GET",""+n+u+"url="+encodeURIComponent(e)+"&responseType="+l),l!=="text"&&c instanceof XMLHttpRequest&&(c.responseType=l),r._options.imageTimeout){var d=r._options.imageTimeout;c.timeout=d,c.ontimeout=function(){return o("Timed out ("+d+"ms) proxying "+a)}}c.send()})},t}(),GEe=/^data:image\/svg\+xml/i,KEe=/^data:image\/.*;base64,/i,qEe=/^data:image\/.*/i,zEe=function(t){return bl.SUPPORT_SVG_DRAWING||!XEe(t)},z3=function(t){return qEe.test(t)},WEe=function(t){return KEe.test(t)},W3=function(t){return t.substr(0,4)==="blob"},XEe=function(t){return t.substr(-3).toLowerCase()==="svg"||GEe.test(t)},Jr=function(){function t(e,r){this.type=0,this.x=e,this.y=r}return t.prototype.add=function(e,r){return new t(this.x+e,this.y+r)},t}(),ix=function(t,e,r){return new Jr(t.x+(e.x-t.x)*r,t.y+(e.y-t.y)*r)},_C=function(){function t(e,r,n,a){this.type=1,this.start=e,this.startControl=r,this.endControl=n,this.end=a}return t.prototype.subdivide=function(e,r){var n=ix(this.start,this.startControl,e),a=ix(this.startControl,this.endControl,e),s=ix(this.endControl,this.end,e),o=ix(n,a,e),l=ix(a,s,e),c=ix(o,l,e);return r?new t(this.start,n,o,c):new t(c,l,s,this.end)},t.prototype.add=function(e,r){return new t(this.start.add(e,r),this.startControl.add(e,r),this.endControl.add(e,r),this.end.add(e,r))},t.prototype.reverse=function(){return new t(this.end,this.endControl,this.startControl,this.start)},t}(),yd=function(t){return t.type===1},YEe=function(){function t(e){var r=e.styles,n=e.bounds,a=Gy(r.borderTopLeftRadius,n.width,n.height),s=a[0],o=a[1],l=Gy(r.borderTopRightRadius,n.width,n.height),c=l[0],u=l[1],d=Gy(r.borderBottomRightRadius,n.width,n.height),f=d[0],A=d[1],h=Gy(r.borderBottomLeftRadius,n.width,n.height),m=h[0],p=h[1],x=[];x.push((s+c)/n.width),x.push((m+f)/n.width),x.push((o+p)/n.height),x.push((u+A)/n.height);var v=Math.max.apply(Math,x);v>1&&(s/=v,o/=v,c/=v,u/=v,f/=v,A/=v,m/=v,p/=v);var y=n.width-c,b=n.height-A,w=n.width-f,j=n.height-p,I=r.borderTopWidth,_=r.borderRightWidth,S=r.borderBottomWidth,E=r.borderLeftWidth,T=ys(r.paddingTop,e.bounds.width),k=ys(r.paddingRight,e.bounds.width),B=ys(r.paddingBottom,e.bounds.width),D=ys(r.paddingLeft,e.bounds.width);this.topLeftBorderDoubleOuterBox=s>0||o>0?Ds(n.left+E/3,n.top+I/3,s-E/3,o-I/3,Ua.TOP_LEFT):new Jr(n.left+E/3,n.top+I/3),this.topRightBorderDoubleOuterBox=s>0||o>0?Ds(n.left+y,n.top+I/3,c-_/3,u-I/3,Ua.TOP_RIGHT):new Jr(n.left+n.width-_/3,n.top+I/3),this.bottomRightBorderDoubleOuterBox=f>0||A>0?Ds(n.left+w,n.top+b,f-_/3,A-S/3,Ua.BOTTOM_RIGHT):new Jr(n.left+n.width-_/3,n.top+n.height-S/3),this.bottomLeftBorderDoubleOuterBox=m>0||p>0?Ds(n.left+E/3,n.top+j,m-E/3,p-S/3,Ua.BOTTOM_LEFT):new Jr(n.left+E/3,n.top+n.height-S/3),this.topLeftBorderDoubleInnerBox=s>0||o>0?Ds(n.left+E*2/3,n.top+I*2/3,s-E*2/3,o-I*2/3,Ua.TOP_LEFT):new Jr(n.left+E*2/3,n.top+I*2/3),this.topRightBorderDoubleInnerBox=s>0||o>0?Ds(n.left+y,n.top+I*2/3,c-_*2/3,u-I*2/3,Ua.TOP_RIGHT):new Jr(n.left+n.width-_*2/3,n.top+I*2/3),this.bottomRightBorderDoubleInnerBox=f>0||A>0?Ds(n.left+w,n.top+b,f-_*2/3,A-S*2/3,Ua.BOTTOM_RIGHT):new Jr(n.left+n.width-_*2/3,n.top+n.height-S*2/3),this.bottomLeftBorderDoubleInnerBox=m>0||p>0?Ds(n.left+E*2/3,n.top+j,m-E*2/3,p-S*2/3,Ua.BOTTOM_LEFT):new Jr(n.left+E*2/3,n.top+n.height-S*2/3),this.topLeftBorderStroke=s>0||o>0?Ds(n.left+E/2,n.top+I/2,s-E/2,o-I/2,Ua.TOP_LEFT):new Jr(n.left+E/2,n.top+I/2),this.topRightBorderStroke=s>0||o>0?Ds(n.left+y,n.top+I/2,c-_/2,u-I/2,Ua.TOP_RIGHT):new Jr(n.left+n.width-_/2,n.top+I/2),this.bottomRightBorderStroke=f>0||A>0?Ds(n.left+w,n.top+b,f-_/2,A-S/2,Ua.BOTTOM_RIGHT):new Jr(n.left+n.width-_/2,n.top+n.height-S/2),this.bottomLeftBorderStroke=m>0||p>0?Ds(n.left+E/2,n.top+j,m-E/2,p-S/2,Ua.BOTTOM_LEFT):new Jr(n.left+E/2,n.top+n.height-S/2),this.topLeftBorderBox=s>0||o>0?Ds(n.left,n.top,s,o,Ua.TOP_LEFT):new Jr(n.left,n.top),this.topRightBorderBox=c>0||u>0?Ds(n.left+y,n.top,c,u,Ua.TOP_RIGHT):new Jr(n.left+n.width,n.top),this.bottomRightBorderBox=f>0||A>0?Ds(n.left+w,n.top+b,f,A,Ua.BOTTOM_RIGHT):new Jr(n.left+n.width,n.top+n.height),this.bottomLeftBorderBox=m>0||p>0?Ds(n.left,n.top+j,m,p,Ua.BOTTOM_LEFT):new Jr(n.left,n.top+n.height),this.topLeftPaddingBox=s>0||o>0?Ds(n.left+E,n.top+I,Math.max(0,s-E),Math.max(0,o-I),Ua.TOP_LEFT):new Jr(n.left+E,n.top+I),this.topRightPaddingBox=c>0||u>0?Ds(n.left+Math.min(y,n.width-_),n.top+I,y>n.width+_?0:Math.max(0,c-_),Math.max(0,u-I),Ua.TOP_RIGHT):new Jr(n.left+n.width-_,n.top+I),this.bottomRightPaddingBox=f>0||A>0?Ds(n.left+Math.min(w,n.width-E),n.top+Math.min(b,n.height-S),Math.max(0,f-_),Math.max(0,A-S),Ua.BOTTOM_RIGHT):new Jr(n.left+n.width-_,n.top+n.height-S),this.bottomLeftPaddingBox=m>0||p>0?Ds(n.left+E,n.top+Math.min(j,n.height-S),Math.max(0,m-E),Math.max(0,p-S),Ua.BOTTOM_LEFT):new Jr(n.left+E,n.top+n.height-S),this.topLeftContentBox=s>0||o>0?Ds(n.left+E+D,n.top+I+T,Math.max(0,s-(E+D)),Math.max(0,o-(I+T)),Ua.TOP_LEFT):new Jr(n.left+E+D,n.top+I+T),this.topRightContentBox=c>0||u>0?Ds(n.left+Math.min(y,n.width+E+D),n.top+I+T,y>n.width+E+D?0:c-E+D,u-(I+T),Ua.TOP_RIGHT):new Jr(n.left+n.width-(_+k),n.top+I+T),this.bottomRightContentBox=f>0||A>0?Ds(n.left+Math.min(w,n.width-(E+D)),n.top+Math.min(b,n.height+I+T),Math.max(0,f-(_+k)),A-(S+B),Ua.BOTTOM_RIGHT):new Jr(n.left+n.width-(_+k),n.top+n.height-(S+B)),this.bottomLeftContentBox=m>0||p>0?Ds(n.left+E+D,n.top+j,Math.max(0,m-(E+D)),p-(S+B),Ua.BOTTOM_LEFT):new Jr(n.left+E+D,n.top+n.height-(S+B))}return t}(),Ua;(function(t){t[t.TOP_LEFT=0]="TOP_LEFT",t[t.TOP_RIGHT=1]="TOP_RIGHT",t[t.BOTTOM_RIGHT=2]="BOTTOM_RIGHT",t[t.BOTTOM_LEFT=3]="BOTTOM_LEFT"})(Ua||(Ua={}));var Ds=function(t,e,r,n,a){var s=4*((Math.sqrt(2)-1)/3),o=r*s,l=n*s,c=t+r,u=e+n;switch(a){case Ua.TOP_LEFT:return new _C(new Jr(t,u),new Jr(t,u-l),new Jr(c-o,e),new Jr(c,e));case Ua.TOP_RIGHT:return new _C(new Jr(t,e),new Jr(t+o,e),new Jr(c,u-l),new Jr(c,u));case Ua.BOTTOM_RIGHT:return new _C(new Jr(c,e),new Jr(c,e+l),new Jr(t+o,u),new Jr(t,u));case Ua.BOTTOM_LEFT:default:return new _C(new Jr(c,u),new Jr(c-o,u),new Jr(t,e+l),new Jr(t,e))}},IS=function(t){return[t.topLeftBorderBox,t.topRightBorderBox,t.bottomRightBorderBox,t.bottomLeftBorderBox]},JEe=function(t){return[t.topLeftContentBox,t.topRightContentBox,t.bottomRightContentBox,t.bottomLeftContentBox]},jS=function(t){return[t.topLeftPaddingBox,t.topRightPaddingBox,t.bottomRightPaddingBox,t.bottomLeftPaddingBox]},ZEe=function(){function t(e,r,n){this.offsetX=e,this.offsetY=r,this.matrix=n,this.type=0,this.target=6}return t}(),EC=function(){function t(e,r){this.path=e,this.target=r,this.type=1}return t}(),eSe=function(){function t(e){this.opacity=e,this.type=2,this.target=6}return t}(),tSe=function(t){return t.type===0},Vte=function(t){return t.type===1},rSe=function(t){return t.type===2},EQ=function(t,e){return t.length===e.length?t.some(function(r,n){return r===e[n]}):!1},nSe=function(t,e,r,n,a){return t.map(function(s,o){switch(o){case 0:return s.add(e,r);case 1:return s.add(e+n,r);case 2:return s.add(e+n,r+a);case 3:return s.add(e,r+a)}return s})},Hte=function(){function t(e){this.element=e,this.inlineLevel=[],this.nonInlineLevel=[],this.negativeZIndex=[],this.zeroOrAutoZIndexOrTransformedOrOpacity=[],this.positiveZIndex=[],this.nonPositionedFloats=[],this.nonPositionedInlineLevel=[]}return t}(),$te=function(){function t(e,r){if(this.container=e,this.parent=r,this.effects=[],this.curves=new YEe(this.container),this.container.styles.opacity<1&&this.effects.push(new eSe(this.container.styles.opacity)),this.container.styles.transform!==null){var n=this.container.bounds.left+this.container.styles.transformOrigin[0].number,a=this.container.bounds.top+this.container.styles.transformOrigin[1].number,s=this.container.styles.transform;this.effects.push(new ZEe(n,a,s))}if(this.container.styles.overflowX!==0){var o=IS(this.curves),l=jS(this.curves);EQ(o,l)?this.effects.push(new EC(o,6)):(this.effects.push(new EC(o,2)),this.effects.push(new EC(l,4)))}}return t.prototype.getEffects=function(e){for(var r=[2,3].indexOf(this.container.styles.position)===-1,n=this.parent,a=this.effects.slice(0);n;){var s=n.effects.filter(function(c){return!Vte(c)});if(r||n.container.styles.position!==0||!n.parent){if(a.unshift.apply(a,s),r=[2,3].indexOf(n.container.styles.position)===-1,n.container.styles.overflowX!==0){var o=IS(n.curves),l=jS(n.curves);EQ(o,l)||a.unshift(new EC(l,6))}}else a.unshift.apply(a,s);n=n.parent}return a.filter(function(c){return _o(c.target,e)})},t}(),Tk=function(t,e,r,n){t.container.elements.forEach(function(a){var s=_o(a.flags,4),o=_o(a.flags,2),l=new $te(a,t);_o(a.styles.display,2048)&&n.push(l);var c=_o(a.flags,8)?[]:n;if(s||o){var u=s||a.styles.isPositioned()?r:e,d=new Hte(l);if(a.styles.isPositioned()||a.styles.opacity<1||a.styles.isTransformed()){var f=a.styles.zIndex.order;if(f<0){var A=0;u.negativeZIndex.some(function(m,p){return f>m.element.container.styles.zIndex.order?(A=p,!1):A>0}),u.negativeZIndex.splice(A,0,d)}else if(f>0){var h=0;u.positiveZIndex.some(function(m,p){return f>=m.element.container.styles.zIndex.order?(h=p+1,!1):h>0}),u.positiveZIndex.splice(h,0,d)}else u.zeroOrAutoZIndexOrTransformedOrOpacity.push(d)}else a.styles.isFloating()?u.nonPositionedFloats.push(d):u.nonPositionedInlineLevel.push(d);Tk(l,d,s?d:r,c)}else a.styles.isInlineLevel()?e.inlineLevel.push(l):e.nonInlineLevel.push(l),Tk(l,e,r,c);_o(a.flags,8)&&Gte(a,c)})},Gte=function(t,e){for(var r=t instanceof Sk?t.start:1,n=t instanceof Sk?t.reversed:!1,a=0;a<e.length;a++){var s=e[a];s.container instanceof Ite&&typeof s.container.value=="number"&&s.container.value!==0&&(r=s.container.value),s.listValue=_2(r,s.container.styles.listStyleType,!0),r+=n?-1:1}},aSe=function(t){var e=new $te(t,null),r=new Hte(e),n=[];return Tk(e,r,r,n),Gte(e.container,n),r},SQ=function(t,e){switch(e){case 0:return Cd(t.topLeftBorderBox,t.topLeftPaddingBox,t.topRightBorderBox,t.topRightPaddingBox);case 1:return Cd(t.topRightBorderBox,t.topRightPaddingBox,t.bottomRightBorderBox,t.bottomRightPaddingBox);case 2:return Cd(t.bottomRightBorderBox,t.bottomRightPaddingBox,t.bottomLeftBorderBox,t.bottomLeftPaddingBox);case 3:default:return Cd(t.bottomLeftBorderBox,t.bottomLeftPaddingBox,t.topLeftBorderBox,t.topLeftPaddingBox)}},sSe=function(t,e){switch(e){case 0:return Cd(t.topLeftBorderBox,t.topLeftBorderDoubleOuterBox,t.topRightBorderBox,t.topRightBorderDoubleOuterBox);case 1:return Cd(t.topRightBorderBox,t.topRightBorderDoubleOuterBox,t.bottomRightBorderBox,t.bottomRightBorderDoubleOuterBox);case 2:return Cd(t.bottomRightBorderBox,t.bottomRightBorderDoubleOuterBox,t.bottomLeftBorderBox,t.bottomLeftBorderDoubleOuterBox);case 3:default:return Cd(t.bottomLeftBorderBox,t.bottomLeftBorderDoubleOuterBox,t.topLeftBorderBox,t.topLeftBorderDoubleOuterBox)}},iSe=function(t,e){switch(e){case 0:return Cd(t.topLeftBorderDoubleInnerBox,t.topLeftPaddingBox,t.topRightBorderDoubleInnerBox,t.topRightPaddingBox);case 1:return Cd(t.topRightBorderDoubleInnerBox,t.topRightPaddingBox,t.bottomRightBorderDoubleInnerBox,t.bottomRightPaddingBox);case 2:return Cd(t.bottomRightBorderDoubleInnerBox,t.bottomRightPaddingBox,t.bottomLeftBorderDoubleInnerBox,t.bottomLeftPaddingBox);case 3:default:return Cd(t.bottomLeftBorderDoubleInnerBox,t.bottomLeftPaddingBox,t.topLeftBorderDoubleInnerBox,t.topLeftPaddingBox)}},oSe=function(t,e){switch(e){case 0:return SC(t.topLeftBorderStroke,t.topRightBorderStroke);case 1:return SC(t.topRightBorderStroke,t.bottomRightBorderStroke);case 2:return SC(t.bottomRightBorderStroke,t.bottomLeftBorderStroke);case 3:default:return SC(t.bottomLeftBorderStroke,t.topLeftBorderStroke)}},SC=function(t,e){var r=[];return yd(t)?r.push(t.subdivide(.5,!1)):r.push(t),yd(e)?r.push(e.subdivide(.5,!0)):r.push(e),r},Cd=function(t,e,r,n){var a=[];return yd(t)?a.push(t.subdivide(.5,!1)):a.push(t),yd(r)?a.push(r.subdivide(.5,!0)):a.push(r),yd(n)?a.push(n.subdivide(.5,!0).reverse()):a.push(n),yd(e)?a.push(e.subdivide(.5,!1).reverse()):a.push(e),a},Kte=function(t){var e=t.bounds,r=t.styles;return e.add(r.borderLeftWidth,r.borderTopWidth,-(r.borderRightWidth+r.borderLeftWidth),-(r.borderTopWidth+r.borderBottomWidth))},PS=function(t){var e=t.styles,r=t.bounds,n=ys(e.paddingLeft,r.width),a=ys(e.paddingRight,r.width),s=ys(e.paddingTop,r.width),o=ys(e.paddingBottom,r.width);return r.add(n+e.borderLeftWidth,s+e.borderTopWidth,-(e.borderRightWidth+e.borderLeftWidth+n+a),-(e.borderTopWidth+e.borderBottomWidth+s+o))},lSe=function(t,e){return t===0?e.bounds:t===2?PS(e):Kte(e)},cSe=function(t,e){return t===0?e.bounds:t===2?PS(e):Kte(e)},X3=function(t,e,r){var n=lSe(Px(t.styles.backgroundOrigin,e),t),a=cSe(Px(t.styles.backgroundClip,e),t),s=uSe(Px(t.styles.backgroundSize,e),r,n),o=s[0],l=s[1],c=Gy(Px(t.styles.backgroundPosition,e),n.width-o,n.height-l),u=dSe(Px(t.styles.backgroundRepeat,e),c,s,n,a),d=Math.round(n.left+c[0]),f=Math.round(n.top+c[1]);return[u,d,f,o,l]},ox=function(t){return os(t)&&t.value===hv.AUTO},IC=function(t){return typeof t=="number"},uSe=function(t,e,r){var n=e[0],a=e[1],s=e[2],o=t[0],l=t[1];if(!o)return[0,0];if(no(o)&&l&&no(l))return[ys(o,r.width),ys(l,r.height)];var c=IC(s);if(os(o)&&(o.value===hv.CONTAIN||o.value===hv.COVER)){if(IC(s)){var u=r.width/r.height;return u<s!=(o.value===hv.COVER)?[r.width,r.width/s]:[r.height*s,r.height]}return[r.width,r.height]}var d=IC(n),f=IC(a),A=d||f;if(ox(o)&&(!l||ox(l))){if(d&&f)return[n,a];if(!c&&!A)return[r.width,r.height];if(A&&c){var h=d?n:a*s,m=f?a:n/s;return[h,m]}var p=d?n:r.width,x=f?a:r.height;return[p,x]}if(c){var v=0,y=0;return no(o)?v=ys(o,r.width):no(l)&&(y=ys(l,r.height)),ox(o)?v=y*s:(!l||ox(l))&&(y=v/s),[v,y]}var b=null,w=null;if(no(o)?b=ys(o,r.width):l&&no(l)&&(w=ys(l,r.height)),b!==null&&(!l||ox(l))&&(w=d&&f?b/n*a:r.height),w!==null&&ox(o)&&(b=d&&f?w/a*n:r.width),b!==null&&w!==null)return[b,w];throw new Error("Unable to calculate background-size for element")},Px=function(t,e){var r=t[e];return typeof r>"u"?t[0]:r},dSe=function(t,e,r,n,a){var s=e[0],o=e[1],l=r[0],c=r[1];switch(t){case 2:return[new Jr(Math.round(n.left),Math.round(n.top+o)),new Jr(Math.round(n.left+n.width),Math.round(n.top+o)),new Jr(Math.round(n.left+n.width),Math.round(c+n.top+o)),new Jr(Math.round(n.left),Math.round(c+n.top+o))];case 3:return[new Jr(Math.round(n.left+s),Math.round(n.top)),new Jr(Math.round(n.left+s+l),Math.round(n.top)),new Jr(Math.round(n.left+s+l),Math.round(n.height+n.top)),new Jr(Math.round(n.left+s),Math.round(n.height+n.top))];case 1:return[new Jr(Math.round(n.left+s),Math.round(n.top+o)),new Jr(Math.round(n.left+s+l),Math.round(n.top+o)),new Jr(Math.round(n.left+s+l),Math.round(n.top+o+c)),new Jr(Math.round(n.left+s),Math.round(n.top+o+c))];default:return[new Jr(Math.round(a.left),Math.round(a.top)),new Jr(Math.round(a.left+a.width),Math.round(a.top)),new Jr(Math.round(a.left+a.width),Math.round(a.height+a.top)),new Jr(Math.round(a.left),Math.round(a.height+a.top))]}},fSe="data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7",IQ="Hidden Text",hSe=function(){function t(e){this._data={},this._document=e}return t.prototype.parseMetrics=function(e,r){var n=this._document.createElement("div"),a=this._document.createElement("img"),s=this._document.createElement("span"),o=this._document.body;n.style.visibility="hidden",n.style.fontFamily=e,n.style.fontSize=r,n.style.margin="0",n.style.padding="0",n.style.whiteSpace="nowrap",o.appendChild(n),a.src=fSe,a.width=1,a.height=1,a.style.margin="0",a.style.padding="0",a.style.verticalAlign="baseline",s.style.fontFamily=e,s.style.fontSize=r,s.style.margin="0",s.style.padding="0",s.appendChild(this._document.createTextNode(IQ)),n.appendChild(s),n.appendChild(a);var l=a.offsetTop-s.offsetTop+2;n.removeChild(s),n.appendChild(this._document.createTextNode(IQ)),n.style.lineHeight="normal",a.style.verticalAlign="super";var c=a.offsetTop-n.offsetTop+2;return o.removeChild(n),{baseline:l,middle:c}},t.prototype.getMetrics=function(e,r){var n=e+" "+r;return typeof this._data[n]>"u"&&(this._data[n]=this.parseMetrics(e,r)),this._data[n]},t}(),qte=function(){function t(e,r){this.context=e,this.options=r}return t}(),ASe=1e4,mSe=function(t){Sf(e,t);function e(r,n){var a=t.call(this,r,n)||this;return a._activeEffects=[],a.canvas=n.canvas?n.canvas:document.createElement("canvas"),a.ctx=a.canvas.getContext("2d"),n.canvas||(a.canvas.width=Math.floor(n.width*n.scale),a.canvas.height=Math.floor(n.height*n.scale),a.canvas.style.width=n.width+"px",a.canvas.style.height=n.height+"px"),a.fontMetrics=new hSe(document),a.ctx.scale(a.options.scale,a.options.scale),a.ctx.translate(-n.x,-n.y),a.ctx.textBaseline="bottom",a._activeEffects=[],a.context.logger.debug("Canvas renderer initialized ("+n.width+"x"+n.height+") with scale "+n.scale),a}return e.prototype.applyEffects=function(r){for(var n=this;this._activeEffects.length;)this.popEffect();r.forEach(function(a){return n.applyEffect(a)})},e.prototype.applyEffect=function(r){this.ctx.save(),rSe(r)&&(this.ctx.globalAlpha=r.opacity),tSe(r)&&(this.ctx.translate(r.offsetX,r.offsetY),this.ctx.transform(r.matrix[0],r.matrix[1],r.matrix[2],r.matrix[3],r.matrix[4],r.matrix[5]),this.ctx.translate(-r.offsetX,-r.offsetY)),Vte(r)&&(this.path(r.path),this.ctx.clip()),this._activeEffects.push(r)},e.prototype.popEffect=function(){this._activeEffects.pop(),this.ctx.restore()},e.prototype.renderStack=function(r){return xc(this,void 0,void 0,function(){var n;return Wl(this,function(a){switch(a.label){case 0:return n=r.element.container.styles,n.isVisible()?[4,this.renderStackContent(r)]:[3,2];case 1:a.sent(),a.label=2;case 2:return[2]}})})},e.prototype.renderNode=function(r){return xc(this,void 0,void 0,function(){return Wl(this,function(n){switch(n.label){case 0:if(_o(r.container.flags,16))debugger;return r.container.styles.isVisible()?[4,this.renderNodeBackgroundAndBorders(r)]:[3,3];case 1:return n.sent(),[4,this.renderNodeContent(r)];case 2:n.sent(),n.label=3;case 3:return[2]}})})},e.prototype.renderTextWithLetterSpacing=function(r,n,a){var s=this;if(n===0)this.ctx.fillText(r.text,r.bounds.left,r.bounds.top+a);else{var o=M6(r.text);o.reduce(function(l,c){return s.ctx.fillText(c,l,r.bounds.top+a),l+s.ctx.measureText(c).width},r.bounds.left)}},e.prototype.createFontStyle=function(r){var n=r.fontVariant.filter(function(o){return o==="normal"||o==="small-caps"}).join(""),a=ySe(r.fontFamily).join(", "),s=Ow(r.fontSize)?""+r.fontSize.number+r.fontSize.unit:r.fontSize.number+"px";return[[r.fontStyle,n,r.fontWeight,s,a].join(" "),a,s]},e.prototype.renderTextNode=function(r,n){return xc(this,void 0,void 0,function(){var a,s,o,l,c,u,d,f,A=this;return Wl(this,function(h){return a=this.createFontStyle(n),s=a[0],o=a[1],l=a[2],this.ctx.font=s,this.ctx.direction=n.direction===1?"rtl":"ltr",this.ctx.textAlign="left",this.ctx.textBaseline="alphabetic",c=this.fontMetrics.getMetrics(o,l),u=c.baseline,d=c.middle,f=n.paintOrder,r.textBounds.forEach(function(m){f.forEach(function(p){switch(p){case 0:A.ctx.fillStyle=Uo(n.color),A.renderTextWithLetterSpacing(m,n.letterSpacing,u);var x=n.textShadow;x.length&&m.text.trim().length&&(x.slice(0).reverse().forEach(function(v){A.ctx.shadowColor=Uo(v.color),A.ctx.shadowOffsetX=v.offsetX.number*A.options.scale,A.ctx.shadowOffsetY=v.offsetY.number*A.options.scale,A.ctx.shadowBlur=v.blur.number,A.renderTextWithLetterSpacing(m,n.letterSpacing,u)}),A.ctx.shadowColor="",A.ctx.shadowOffsetX=0,A.ctx.shadowOffsetY=0,A.ctx.shadowBlur=0),n.textDecorationLine.length&&(A.ctx.fillStyle=Uo(n.textDecorationColor||n.color),n.textDecorationLine.forEach(function(v){switch(v){case 1:A.ctx.fillRect(m.bounds.left,Math.round(m.bounds.top+u),m.bounds.width,1);break;case 2:A.ctx.fillRect(m.bounds.left,Math.round(m.bounds.top),m.bounds.width,1);break;case 3:A.ctx.fillRect(m.bounds.left,Math.ceil(m.bounds.top+d),m.bounds.width,1);break}}));break;case 1:n.webkitTextStrokeWidth&&m.text.trim().length&&(A.ctx.strokeStyle=Uo(n.webkitTextStrokeColor),A.ctx.lineWidth=n.webkitTextStrokeWidth,A.ctx.lineJoin=window.chrome?"miter":"round",A.ctx.strokeText(m.text,m.bounds.left,m.bounds.top+u)),A.ctx.strokeStyle="",A.ctx.lineWidth=0,A.ctx.lineJoin="miter";break}})}),[2]})})},e.prototype.renderReplacedElement=function(r,n,a){if(a&&r.intrinsicWidth>0&&r.intrinsicHeight>0){var s=PS(r),o=jS(n);this.path(o),this.ctx.save(),this.ctx.clip(),this.ctx.drawImage(a,0,0,r.intrinsicWidth,r.intrinsicHeight,s.left,s.top,s.width,s.height),this.ctx.restore()}},e.prototype.renderNodeContent=function(r){return xc(this,void 0,void 0,function(){var n,a,s,o,l,c,y,y,u,d,f,A,w,h,m,j,p,x,v,y,b,w,j;return Wl(this,function(I){switch(I.label){case 0:this.applyEffects(r.getEffects(4)),n=r.container,a=r.curves,s=n.styles,o=0,l=n.textNodes,I.label=1;case 1:return o<l.length?(c=l[o],[4,this.renderTextNode(c,s)]):[3,4];case 2:I.sent(),I.label=3;case 3:return o++,[3,1];case 4:if(!(n instanceof _te))return[3,8];I.label=5;case 5:return I.trys.push([5,7,,8]),[4,this.context.cache.match(n.src)];case 6:return y=I.sent(),this.renderReplacedElement(n,a,y),[3,8];case 7:return I.sent(),this.context.logger.error("Error loading image "+n.src),[3,8];case 8:if(n instanceof Ete&&this.renderReplacedElement(n,a,n.canvas),!(n instanceof Ste))return[3,12];I.label=9;case 9:return I.trys.push([9,11,,12]),[4,this.context.cache.match(n.svg)];case 10:return y=I.sent(),this.renderReplacedElement(n,a,y),[3,12];case 11:return I.sent(),this.context.logger.error("Error loading svg "+n.svg.substring(0,255)),[3,12];case 12:return n instanceof Bte&&n.tree?(u=new e(this.context,{scale:this.options.scale,backgroundColor:n.backgroundColor,x:0,y:0,width:n.width,height:n.height}),[4,u.render(n.tree)]):[3,14];case 13:d=I.sent(),n.width&&n.height&&this.ctx.drawImage(d,0,0,n.width,n.height,n.bounds.left,n.bounds.top,n.bounds.width,n.bounds.height),I.label=14;case 14:if(n instanceof L6&&(f=Math.min(n.bounds.width,n.bounds.height),n.type===CS?n.checked&&(this.ctx.save(),this.path([new Jr(n.bounds.left+f*.39363,n.bounds.top+f*.79),new Jr(n.bounds.left+f*.16,n.bounds.top+f*.5549),new Jr(n.bounds.left+f*.27347,n.bounds.top+f*.44071),new Jr(n.bounds.left+f*.39694,n.bounds.top+f*.5649),new Jr(n.bounds.left+f*.72983,n.bounds.top+f*.23),new Jr(n.bounds.left+f*.84,n.bounds.top+f*.34085),new Jr(n.bounds.left+f*.39363,n.bounds.top+f*.79)]),this.ctx.fillStyle=Uo(mQ),this.ctx.fill(),this.ctx.restore()):n.type===_S&&n.checked&&(this.ctx.save(),this.ctx.beginPath(),this.ctx.arc(n.bounds.left+f/2,n.bounds.top+f/2,f/4,0,Math.PI*2,!0),this.ctx.fillStyle=Uo(mQ),this.ctx.fill(),this.ctx.restore())),pSe(n)&&n.value.length){switch(A=this.createFontStyle(s),w=A[0],h=A[1],m=this.fontMetrics.getMetrics(w,h).baseline,this.ctx.font=w,this.ctx.fillStyle=Uo(s.color),this.ctx.textBaseline="alphabetic",this.ctx.textAlign=xSe(n.styles.textAlign),j=PS(n),p=0,n.styles.textAlign){case 1:p+=j.width/2;break;case 2:p+=j.width;break}x=j.add(p,0,0,-j.height/2+1),this.ctx.save(),this.path([new Jr(j.left,j.top),new Jr(j.left+j.width,j.top),new Jr(j.left+j.width,j.top+j.height),new Jr(j.left,j.top+j.height)]),this.ctx.clip(),this.renderTextWithLetterSpacing(new wb(n.value,x),s.letterSpacing,m),this.ctx.restore(),this.ctx.textBaseline="alphabetic",this.ctx.textAlign="left"}if(!_o(n.styles.display,2048))return[3,20];if(n.styles.listStyleImage===null)return[3,19];if(v=n.styles.listStyleImage,v.type!==0)return[3,18];y=void 0,b=v.url,I.label=15;case 15:return I.trys.push([15,17,,18]),[4,this.context.cache.match(b)];case 16:return y=I.sent(),this.ctx.drawImage(y,n.bounds.left-(y.width+10),n.bounds.top),[3,18];case 17:return I.sent(),this.context.logger.error("Error loading list-style-image "+b),[3,18];case 18:return[3,20];case 19:r.listValue&&n.styles.listStyleType!==-1&&(w=this.createFontStyle(s)[0],this.ctx.font=w,this.ctx.fillStyle=Uo(s.color),this.ctx.textBaseline="middle",this.ctx.textAlign="right",j=new xA(n.bounds.left,n.bounds.top+ys(n.styles.paddingTop,n.bounds.width),n.bounds.width,J9(s.lineHeight,s.fontSize.number)/2+1),this.renderTextWithLetterSpacing(new wb(r.listValue,j),s.letterSpacing,J9(s.lineHeight,s.fontSize.number)/2+2),this.ctx.textBaseline="bottom",this.ctx.textAlign="left"),I.label=20;case 20:return[2]}})})},e.prototype.renderStackContent=function(r){return xc(this,void 0,void 0,function(){var n,a,v,s,o,v,l,c,v,u,d,v,f,A,v,h,m,v,p,x,v;return Wl(this,function(y){switch(y.label){case 0:if(_o(r.element.container.flags,16))debugger;return[4,this.renderNodeBackgroundAndBorders(r.element)];case 1:y.sent(),n=0,a=r.negativeZIndex,y.label=2;case 2:return n<a.length?(v=a[n],[4,this.renderStack(v)]):[3,5];case 3:y.sent(),y.label=4;case 4:return n++,[3,2];case 5:return[4,this.renderNodeContent(r.element)];case 6:y.sent(),s=0,o=r.nonInlineLevel,y.label=7;case 7:return s<o.length?(v=o[s],[4,this.renderNode(v)]):[3,10];case 8:y.sent(),y.label=9;case 9:return s++,[3,7];case 10:l=0,c=r.nonPositionedFloats,y.label=11;case 11:return l<c.length?(v=c[l],[4,this.renderStack(v)]):[3,14];case 12:y.sent(),y.label=13;case 13:return l++,[3,11];case 14:u=0,d=r.nonPositionedInlineLevel,y.label=15;case 15:return u<d.length?(v=d[u],[4,this.renderStack(v)]):[3,18];case 16:y.sent(),y.label=17;case 17:return u++,[3,15];case 18:f=0,A=r.inlineLevel,y.label=19;case 19:return f<A.length?(v=A[f],[4,this.renderNode(v)]):[3,22];case 20:y.sent(),y.label=21;case 21:return f++,[3,19];case 22:h=0,m=r.zeroOrAutoZIndexOrTransformedOrOpacity,y.label=23;case 23:return h<m.length?(v=m[h],[4,this.renderStack(v)]):[3,26];case 24:y.sent(),y.label=25;case 25:return h++,[3,23];case 26:p=0,x=r.positiveZIndex,y.label=27;case 27:return p<x.length?(v=x[p],[4,this.renderStack(v)]):[3,30];case 28:y.sent(),y.label=29;case 29:return p++,[3,27];case 30:return[2]}})})},e.prototype.mask=function(r){this.ctx.beginPath(),this.ctx.moveTo(0,0),this.ctx.lineTo(this.canvas.width,0),this.ctx.lineTo(this.canvas.width,this.canvas.height),this.ctx.lineTo(0,this.canvas.height),this.ctx.lineTo(0,0),this.formatPath(r.slice(0).reverse()),this.ctx.closePath()},e.prototype.path=function(r){this.ctx.beginPath(),this.formatPath(r),this.ctx.closePath()},e.prototype.formatPath=function(r){var n=this;r.forEach(function(a,s){var o=yd(a)?a.start:a;s===0?n.ctx.moveTo(o.x,o.y):n.ctx.lineTo(o.x,o.y),yd(a)&&n.ctx.bezierCurveTo(a.startControl.x,a.startControl.y,a.endControl.x,a.endControl.y,a.end.x,a.end.y)})},e.prototype.renderRepeat=function(r,n,a,s){this.path(r),this.ctx.fillStyle=n,this.ctx.translate(a,s),this.ctx.fill(),this.ctx.translate(-a,-s)},e.prototype.resizeImage=function(r,n,a){var s;if(r.width===n&&r.height===a)return r;var o=(s=this.canvas.ownerDocument)!==null&&s!==void 0?s:document,l=o.createElement("canvas");l.width=Math.max(1,n),l.height=Math.max(1,a);var c=l.getContext("2d");return c.drawImage(r,0,0,r.width,r.height,0,0,n,a),l},e.prototype.renderBackgroundImage=function(r){return xc(this,void 0,void 0,function(){var n,a,s,o,l,c;return Wl(this,function(u){switch(u.label){case 0:n=r.styles.backgroundImage.length-1,a=function(d){var f,A,h,T,pe,he,D,X,S,m,T,pe,he,D,X,p,x,v,y,b,w,j,I,_,S,E,T,k,B,D,X,me,pe,he,ve,ae,Pe,ke,O,G,z,U;return Wl(this,function(Y){switch(Y.label){case 0:if(d.type!==0)return[3,5];f=void 0,A=d.url,Y.label=1;case 1:return Y.trys.push([1,3,,4]),[4,s.context.cache.match(A)];case 2:return f=Y.sent(),[3,4];case 3:return Y.sent(),s.context.logger.error("Error loading background-image "+A),[3,4];case 4:return f&&(h=X3(r,n,[f.width,f.height,f.width/f.height]),T=h[0],pe=h[1],he=h[2],D=h[3],X=h[4],S=s.ctx.createPattern(s.resizeImage(f,D,X),"repeat"),s.renderRepeat(T,S,pe,he)),[3,6];case 5:tCe(d)?(m=X3(r,n,[null,null,null]),T=m[0],pe=m[1],he=m[2],D=m[3],X=m[4],p=XNe(d.angle,D,X),x=p[0],v=p[1],y=p[2],b=p[3],w=p[4],j=document.createElement("canvas"),j.width=D,j.height=X,I=j.getContext("2d"),_=I.createLinearGradient(v,b,y,w),X9(d.stops,x).forEach(function(ee){return _.addColorStop(ee.stop,Uo(ee.color))}),I.fillStyle=_,I.fillRect(0,0,D,X),D>0&&X>0&&(S=s.ctx.createPattern(j,"repeat"),s.renderRepeat(T,S,pe,he))):rCe(d)&&(E=X3(r,n,[null,null,null]),T=E[0],k=E[1],B=E[2],D=E[3],X=E[4],me=d.position.length===0?[O6]:d.position,pe=ys(me[0],D),he=ys(me[me.length-1],X),ve=YNe(d,pe,he,D,X),ae=ve[0],Pe=ve[1],ae>0&&Pe>0&&(ke=s.ctx.createRadialGradient(k+pe,B+he,0,k+pe,B+he,ae),X9(d.stops,ae*2).forEach(function(ee){return ke.addColorStop(ee.stop,Uo(ee.color))}),s.path(T),s.ctx.fillStyle=ke,ae!==Pe?(O=r.bounds.left+.5*r.bounds.width,G=r.bounds.top+.5*r.bounds.height,z=Pe/ae,U=1/z,s.ctx.save(),s.ctx.translate(O,G),s.ctx.transform(1,0,0,z,0,0),s.ctx.translate(-O,-G),s.ctx.fillRect(k,U*(B-G)+G,D,X*U),s.ctx.restore()):s.ctx.fill())),Y.label=6;case 6:return n--,[2]}})},s=this,o=0,l=r.styles.backgroundImage.slice(0).reverse(),u.label=1;case 1:return o<l.length?(c=l[o],[5,a(c)]):[3,4];case 2:u.sent(),u.label=3;case 3:return o++,[3,1];case 4:return[2]}})})},e.prototype.renderSolidBorder=function(r,n,a){return xc(this,void 0,void 0,function(){return Wl(this,function(s){return this.path(SQ(a,n)),this.ctx.fillStyle=Uo(r),this.ctx.fill(),[2]})})},e.prototype.renderDoubleBorder=function(r,n,a,s){return xc(this,void 0,void 0,function(){var o,l;return Wl(this,function(c){switch(c.label){case 0:return n<3?[4,this.renderSolidBorder(r,a,s)]:[3,2];case 1:return c.sent(),[2];case 2:return o=sSe(s,a),this.path(o),this.ctx.fillStyle=Uo(r),this.ctx.fill(),l=iSe(s,a),this.path(l),this.ctx.fill(),[2]}})})},e.prototype.renderNodeBackgroundAndBorders=function(r){return xc(this,void 0,void 0,function(){var n,a,s,o,l,c,u,d,f=this;return Wl(this,function(A){switch(A.label){case 0:return this.applyEffects(r.getEffects(2)),n=r.container.styles,a=!um(n.backgroundColor)||n.backgroundImage.length,s=[{style:n.borderTopStyle,color:n.borderTopColor,width:n.borderTopWidth},{style:n.borderRightStyle,color:n.borderRightColor,width:n.borderRightWidth},{style:n.borderBottomStyle,color:n.borderBottomColor,width:n.borderBottomWidth},{style:n.borderLeftStyle,color:n.borderLeftColor,width:n.borderLeftWidth}],o=gSe(Px(n.backgroundClip,0),r.curves),a||n.boxShadow.length?(this.ctx.save(),this.path(o),this.ctx.clip(),um(n.backgroundColor)||(this.ctx.fillStyle=Uo(n.backgroundColor),this.ctx.fill()),[4,this.renderBackgroundImage(r.container)]):[3,2];case 1:A.sent(),this.ctx.restore(),n.boxShadow.slice(0).reverse().forEach(function(h){f.ctx.save();var m=IS(r.curves),p=h.inset?0:ASe,x=nSe(m,-p+(h.inset?1:-1)*h.spread.number,(h.inset?1:-1)*h.spread.number,h.spread.number*(h.inset?-2:2),h.spread.number*(h.inset?-2:2));h.inset?(f.path(m),f.ctx.clip(),f.mask(x)):(f.mask(m),f.ctx.clip(),f.path(x)),f.ctx.shadowOffsetX=h.offsetX.number+p,f.ctx.shadowOffsetY=h.offsetY.number,f.ctx.shadowColor=Uo(h.color),f.ctx.shadowBlur=h.blur.number,f.ctx.fillStyle=h.inset?Uo(h.color):"rgba(0,0,0,1)",f.ctx.fill(),f.ctx.restore()}),A.label=2;case 2:l=0,c=0,u=s,A.label=3;case 3:return c<u.length?(d=u[c],d.style!==0&&!um(d.color)&&d.width>0?d.style!==2?[3,5]:[4,this.renderDashedDottedBorder(d.color,d.width,l,r.curves,2)]:[3,11]):[3,13];case 4:return A.sent(),[3,11];case 5:return d.style!==3?[3,7]:[4,this.renderDashedDottedBorder(d.color,d.width,l,r.curves,3)];case 6:return A.sent(),[3,11];case 7:return d.style!==4?[3,9]:[4,this.renderDoubleBorder(d.color,d.width,l,r.curves)];case 8:return A.sent(),[3,11];case 9:return[4,this.renderSolidBorder(d.color,l,r.curves)];case 10:A.sent(),A.label=11;case 11:l++,A.label=12;case 12:return c++,[3,3];case 13:return[2]}})})},e.prototype.renderDashedDottedBorder=function(r,n,a,s,o){return xc(this,void 0,void 0,function(){var l,c,u,d,f,A,h,m,p,x,v,y,b,w,j,I,j,I;return Wl(this,function(_){return this.ctx.save(),l=oSe(s,a),c=SQ(s,a),o===2&&(this.path(c),this.ctx.clip()),yd(c[0])?(u=c[0].start.x,d=c[0].start.y):(u=c[0].x,d=c[0].y),yd(c[1])?(f=c[1].end.x,A=c[1].end.y):(f=c[1].x,A=c[1].y),a===0||a===2?h=Math.abs(u-f):h=Math.abs(d-A),this.ctx.beginPath(),o===3?this.formatPath(l):this.formatPath(c.slice(0,2)),m=n<3?n*3:n*2,p=n<3?n*2:n,o===3&&(m=n,p=n),x=!0,h<=m*2?x=!1:h<=m*2+p?(v=h/(2*m+p),m*=v,p*=v):(y=Math.floor((h+p)/(m+p)),b=(h-y*m)/(y-1),w=(h-(y+1)*m)/y,p=w<=0||Math.abs(p-b)<Math.abs(p-w)?b:w),x&&(o===3?this.ctx.setLineDash([0,m+p]):this.ctx.setLineDash([m,p])),o===3?(this.ctx.lineCap="round",this.ctx.lineWidth=n):this.ctx.lineWidth=n*2+1.1,this.ctx.strokeStyle=Uo(r),this.ctx.stroke(),this.ctx.setLineDash([]),o===2&&(yd(c[0])&&(j=c[3],I=c[0],this.ctx.beginPath(),this.formatPath([new Jr(j.end.x,j.end.y),new Jr(I.start.x,I.start.y)]),this.ctx.stroke()),yd(c[1])&&(j=c[1],I=c[2],this.ctx.beginPath(),this.formatPath([new Jr(j.end.x,j.end.y),new Jr(I.start.x,I.start.y)]),this.ctx.stroke())),this.ctx.restore(),[2]})})},e.prototype.render=function(r){return xc(this,void 0,void 0,function(){var n;return Wl(this,function(a){switch(a.label){case 0:return this.options.backgroundColor&&(this.ctx.fillStyle=Uo(this.options.backgroundColor),this.ctx.fillRect(this.options.x,this.options.y,this.options.width,this.options.height)),n=aSe(r),[4,this.renderStack(n)];case 1:return a.sent(),this.applyEffects([]),[2,this.canvas]}})})},e}(qte),pSe=function(t){return t instanceof Pte||t instanceof jte?!0:t instanceof L6&&t.type!==_S&&t.type!==CS},gSe=function(t,e){switch(t){case 0:return IS(e);case 2:return JEe(e);case 1:default:return jS(e)}},xSe=function(t){switch(t){case 1:return"center";case 2:return"right";case 0:default:return"left"}},vSe=["-apple-system","system-ui"],ySe=function(t){return/iPhone OS 15_(0|1)/.test(window.navigator.userAgent)?t.filter(function(e){return vSe.indexOf(e)===-1}):t},bSe=function(t){Sf(e,t);function e(r,n){var a=t.call(this,r,n)||this;return a.canvas=n.canvas?n.canvas:document.createElement("canvas"),a.ctx=a.canvas.getContext("2d"),a.options=n,a.canvas.width=Math.floor(n.width*n.scale),a.canvas.height=Math.floor(n.height*n.scale),a.canvas.style.width=n.width+"px",a.canvas.style.height=n.height+"px",a.ctx.scale(a.options.scale,a.options.scale),a.ctx.translate(-n.x,-n.y),a.context.logger.debug("EXPERIMENTAL ForeignObject renderer initialized ("+n.width+"x"+n.height+" at "+n.x+","+n.y+") with scale "+n.scale),a}return e.prototype.render=function(r){return xc(this,void 0,void 0,function(){var n,a;return Wl(this,function(s){switch(s.label){case 0:return n=Ek(this.options.width*this.options.scale,this.options.height*this.options.scale,this.options.scale,this.options.scale,r),[4,wSe(n)];case 1:return a=s.sent(),this.options.backgroundColor&&(this.ctx.fillStyle=Uo(this.options.backgroundColor),this.ctx.fillRect(0,0,this.options.width*this.options.scale,this.options.height*this.options.scale)),this.ctx.drawImage(a,-this.options.x*this.options.scale,-this.options.y*this.options.scale),[2,this.canvas]}})})},e}(qte),wSe=function(t){return new Promise(function(e,r){var n=new Image;n.onload=function(){e(n)},n.onerror=r,n.src="data:image/svg+xml;charset=utf-8,"+encodeURIComponent(new XMLSerializer().serializeToString(t))})},NSe=function(){function t(e){var r=e.id,n=e.enabled;this.id=r,this.enabled=n,this.start=Date.now()}return t.prototype.debug=function(){for(var e=[],r=0;r<arguments.length;r++)e[r]=arguments[r];this.enabled&&(typeof window<"u"&&window.console&&typeof console.debug=="function"?console.debug.apply(console,iC([this.id,this.getTime()+"ms"],e)):this.info.apply(this,e))},t.prototype.getTime=function(){return Date.now()-this.start},t.prototype.info=function(){for(var e=[],r=0;r<arguments.length;r++)e[r]=arguments[r];this.enabled&&typeof window<"u"&&window.console&&typeof console.info=="function"&&console.info.apply(console,iC([this.id,this.getTime()+"ms"],e))},t.prototype.warn=function(){for(var e=[],r=0;r<arguments.length;r++)e[r]=arguments[r];this.enabled&&(typeof window<"u"&&window.console&&typeof console.warn=="function"?console.warn.apply(console,iC([this.id,this.getTime()+"ms"],e)):this.info.apply(this,e))},t.prototype.error=function(){for(var e=[],r=0;r<arguments.length;r++)e[r]=arguments[r];this.enabled&&(typeof window<"u"&&window.console&&typeof console.error=="function"?console.error.apply(console,iC([this.id,this.getTime()+"ms"],e)):this.info.apply(this,e))},t.instances={},t}(),CSe=function(){function t(e,r){var n;this.windowBounds=r,this.instanceName="#"+t.instanceCount++,this.logger=new NSe({id:this.instanceName,enabled:e.logging}),this.cache=(n=e.cache)!==null&&n!==void 0?n:new $Ee(this,e)}return t.instanceCount=1,t}(),kg=function(t,e){return e===void 0&&(e={}),_Se(t,e)};typeof window<"u"&&Qte.setContext(window);var _Se=function(t,e){return xc(void 0,void 0,void 0,function(){var r,n,a,s,o,l,c,u,d,f,A,h,m,p,x,v,y,b,w,j,_,I,_,S,E,T,k,B,D,X,me,pe,he,ve,ae,Pe,ke,O,G,z;return Wl(this,function(U){switch(U.label){case 0:if(!t||typeof t!="object")return[2,Promise.reject("Invalid element provided as first argument")];if(r=t.ownerDocument,!r)throw new Error("Element is not attached to a Document");if(n=r.defaultView,!n)throw new Error("Document is not attached to a Window");return a={allowTaint:(S=e.allowTaint)!==null&&S!==void 0?S:!1,imageTimeout:(E=e.imageTimeout)!==null&&E!==void 0?E:15e3,proxy:e.proxy,useCORS:(T=e.useCORS)!==null&&T!==void 0?T:!1},s=dk({logging:(k=e.logging)!==null&&k!==void 0?k:!0,cache:e.cache},a),o={windowWidth:(B=e.windowWidth)!==null&&B!==void 0?B:n.innerWidth,windowHeight:(D=e.windowHeight)!==null&&D!==void 0?D:n.innerHeight,scrollX:(X=e.scrollX)!==null&&X!==void 0?X:n.pageXOffset,scrollY:(me=e.scrollY)!==null&&me!==void 0?me:n.pageYOffset},l=new xA(o.scrollX,o.scrollY,o.windowWidth,o.windowHeight),c=new CSe(s,l),u=(pe=e.foreignObjectRendering)!==null&&pe!==void 0?pe:!1,d={allowTaint:(he=e.allowTaint)!==null&&he!==void 0?he:!1,onclone:e.onclone,ignoreElements:e.ignoreElements,inlineImages:u,copyStyles:u},c.logger.debug("Starting document clone with size "+l.width+"x"+l.height+" scrolled to "+-l.left+","+-l.top),f=new CQ(c,t,d),A=f.clonedReferenceElement,A?[4,f.toIFrame(r,l)]:[2,Promise.reject("Unable to find element in cloned iframe")];case 1:return h=U.sent(),m=U6(A)||SEe(A)?nwe(A.ownerDocument):qj(c,A),p=m.width,x=m.height,v=m.left,y=m.top,b=ESe(c,A,e.backgroundColor),w={canvas:e.canvas,backgroundColor:b,scale:(ae=(ve=e.scale)!==null&&ve!==void 0?ve:n.devicePixelRatio)!==null&&ae!==void 0?ae:1,x:((Pe=e.x)!==null&&Pe!==void 0?Pe:0)+v,y:((ke=e.y)!==null&&ke!==void 0?ke:0)+y,width:(O=e.width)!==null&&O!==void 0?O:Math.ceil(p),height:(G=e.height)!==null&&G!==void 0?G:Math.ceil(x)},u?(c.logger.debug("Document cloned, using foreign object rendering"),_=new bSe(c,w),[4,_.render(A)]):[3,3];case 2:return j=U.sent(),[3,5];case 3:return c.logger.debug("Document cloned, element located at "+v+","+y+" with size "+p+"x"+x+" using computed rendering"),c.logger.debug("Starting DOM parsing"),I=kte(c,A),b===I.styles.backgroundColor&&(I.styles.backgroundColor=aA.TRANSPARENT),c.logger.debug("Starting renderer for element at "+w.x+","+w.y+" with size "+w.width+"x"+w.height),_=new mSe(c,w),[4,_.render(I)];case 4:j=U.sent(),U.label=5;case 5:return(!((z=e.removeContainer)!==null&&z!==void 0)||z)&&(CQ.destroy(h)||c.logger.error("Cannot detach cloned iframe as it is not in the DOM anymore")),c.logger.debug("Finished rendering"),[2,j]}})})},ESe=function(t,e,r){var n=e.ownerDocument,a=n.documentElement?yb(t,getComputedStyle(n.documentElement).backgroundColor):aA.TRANSPARENT,s=n.body?yb(t,getComputedStyle(n.body).backgroundColor):aA.TRANSPARENT,o=typeof r=="string"?yb(t,r):r===null?aA.TRANSPARENT:4294967295;return e===n.documentElement?um(a)?um(s)?o:s:a:o};const Q6=Object.freeze(Object.defineProperty({__proto__:null,default:kg},Symbol.toStringTag,{value:"Module"})),SSe="modulepreload",ISe=function(t){return"/"+t},jQ={},sA=function(e,r,n){let a=Promise.resolve();if(r&&r.length>0){document.getElementsByTagName("link");const o=document.querySelector("meta[property=csp-nonce]"),l=(o==null?void 0:o.nonce)||(o==null?void 0:o.getAttribute("nonce"));a=Promise.allSettled(r.map(c=>{if(c=ISe(c),c in jQ)return;jQ[c]=!0;const u=c.endsWith(".css"),d=u?'[rel="stylesheet"]':"";if(document.querySelector(`link[href="${c}"]${d}`))return;const f=document.createElement("link");if(f.rel=u?"stylesheet":SSe,u||(f.as="script"),f.crossOrigin="",f.href=c,l&&f.setAttribute("nonce",l),document.head.appendChild(f),u)return new Promise((A,h)=>{f.addEventListener("load",A),f.addEventListener("error",()=>h(new Error(`Unable to preload CSS for ${c}`)))})}))}function s(o){const l=new Event("vite:preloadError",{cancelable:!0});if(l.payload=o,window.dispatchEvent(l),!l.defaultPrevented)throw o}return a.then(o=>{for(const l of o||[])l.status==="rejected"&&s(l.reason);return e().catch(s)})};function Za(t){"@babel/helpers - typeof";return Za=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Za(t)}var Nf=Uint8Array,Ou=Uint16Array,V6=Int32Array,H6=new Nf([0,0,0,0,0,0,0,0,1,1,1,1,2,2,2,2,3,3,3,3,4,4,4,4,5,5,5,5,0,0,0,0]),$6=new Nf([0,0,0,0,1,1,2,2,3,3,4,4,5,5,6,6,7,7,8,8,9,9,10,10,11,11,12,12,13,13,0,0]),PQ=new Nf([16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15]),zte=function(t,e){for(var r=new Ou(31),n=0;n<31;++n)r[n]=e+=1<<t[n-1];for(var a=new V6(r[30]),n=1;n<30;++n)for(var s=r[n];s<r[n+1];++s)a[s]=s-r[n]<<5|n;return{b:r,r:a}},Wte=zte(H6,2),jSe=Wte.b,kk=Wte.r;jSe[28]=258,kk[258]=28;var PSe=zte($6,0),BQ=PSe.r,Fk=new Ou(32768);for(var Bs=0;Bs<32768;++Bs){var u0=(Bs&43690)>>1|(Bs&21845)<<1;u0=(u0&52428)>>2|(u0&13107)<<2,u0=(u0&61680)>>4|(u0&3855)<<4,Fk[Bs]=((u0&65280)>>8|(u0&255)<<8)>>1}var Cb=function(t,e,r){for(var n=t.length,a=0,s=new Ou(e);a<n;++a)t[a]&&++s[t[a]-1];var o=new Ou(e);for(a=1;a<e;++a)o[a]=o[a-1]+s[a-1]<<1;var l;if(r){l=new Ou(1<<e);var c=15-e;for(a=0;a<n;++a)if(t[a])for(var u=a<<4|t[a],d=e-t[a],f=o[t[a]-1]++<<d,A=f|(1<<d)-1;f<=A;++f)l[Fk[f]>>c]=u}else for(l=new Ou(n),a=0;a<n;++a)t[a]&&(l[a]=Fk[o[t[a]-1]++]>>15-t[a]);return l},cg=new Nf(288);for(var Bs=0;Bs<144;++Bs)cg[Bs]=8;for(var Bs=144;Bs<256;++Bs)cg[Bs]=9;for(var Bs=256;Bs<280;++Bs)cg[Bs]=7;for(var Bs=280;Bs<288;++Bs)cg[Bs]=8;var BS=new Nf(32);for(var Bs=0;Bs<32;++Bs)BS[Bs]=5;var BSe=Cb(cg,9,0),TSe=Cb(BS,5,0),Xte=function(t){return(t+7)/8|0},kSe=function(t,e,r){return(r==null||r>t.length)&&(r=t.length),new Nf(t.subarray(e,r))},Eh=function(t,e,r){r<<=e&7;var n=e/8|0;t[n]|=r,t[n+1]|=r>>8},Ay=function(t,e,r){r<<=e&7;var n=e/8|0;t[n]|=r,t[n+1]|=r>>8,t[n+2]|=r>>16},Y3=function(t,e){for(var r=[],n=0;n<t.length;++n)t[n]&&r.push({s:n,f:t[n]});var a=r.length,s=r.slice();if(!a)return{t:Jte,l:0};if(a==1){var o=new Nf(r[0].s+1);return o[r[0].s]=1,{t:o,l:1}}r.sort(function(j,I){return j.f-I.f}),r.push({s:-1,f:25001});var l=r[0],c=r[1],u=0,d=1,f=2;for(r[0]={s:-1,f:l.f+c.f,l,r:c};d!=a-1;)l=r[r[u].f<r[f].f?u++:f++],c=r[u!=d&&r[u].f<r[f].f?u++:f++],r[d++]={s:-1,f:l.f+c.f,l,r:c};for(var A=s[0].s,n=1;n<a;++n)s[n].s>A&&(A=s[n].s);var h=new Ou(A+1),m=Ok(r[d-1],h,0);if(m>e){var n=0,p=0,x=m-e,v=1<<x;for(s.sort(function(I,_){return h[_.s]-h[I.s]||I.f-_.f});n<a;++n){var y=s[n].s;if(h[y]>e)p+=v-(1<<m-h[y]),h[y]=e;else break}for(p>>=x;p>0;){var b=s[n].s;h[b]<e?p-=1<<e-h[b]++-1:++n}for(;n>=0&&p;--n){var w=s[n].s;h[w]==e&&(--h[w],++p)}m=e}return{t:new Nf(h),l:m}},Ok=function(t,e,r){return t.s==-1?Math.max(Ok(t.l,e,r+1),Ok(t.r,e,r+1)):e[t.s]=r},TQ=function(t){for(var e=t.length;e&&!t[--e];);for(var r=new Ou(++e),n=0,a=t[0],s=1,o=function(c){r[n++]=c},l=1;l<=e;++l)if(t[l]==a&&l!=e)++s;else{if(!a&&s>2){for(;s>138;s-=138)o(32754);s>2&&(o(s>10?s-11<<5|28690:s-3<<5|12305),s=0)}else if(s>3){for(o(a),--s;s>6;s-=6)o(8304);s>2&&(o(s-3<<5|8208),s=0)}for(;s--;)o(a);s=1,a=t[l]}return{c:r.subarray(0,n),n:e}},my=function(t,e){for(var r=0,n=0;n<e.length;++n)r+=t[n]*e[n];return r},Yte=function(t,e,r){var n=r.length,a=Xte(e+2);t[a]=n&255,t[a+1]=n>>8,t[a+2]=t[a]^255,t[a+3]=t[a+1]^255;for(var s=0;s<n;++s)t[a+s+4]=r[s];return(a+4+n)*8},kQ=function(t,e,r,n,a,s,o,l,c,u,d){Eh(e,d++,r),++a[256];for(var f=Y3(a,15),A=f.t,h=f.l,m=Y3(s,15),p=m.t,x=m.l,v=TQ(A),y=v.c,b=v.n,w=TQ(p),j=w.c,I=w.n,_=new Ou(19),S=0;S<y.length;++S)++_[y[S]&31];for(var S=0;S<j.length;++S)++_[j[S]&31];for(var E=Y3(_,7),T=E.t,k=E.l,B=19;B>4&&!T[PQ[B-1]];--B);var D=u+5<<3,X=my(a,cg)+my(s,BS)+o,me=my(a,A)+my(s,p)+o+14+3*B+my(_,T)+2*_[16]+3*_[17]+7*_[18];if(c>=0&&D<=X&&D<=me)return Yte(e,d,t.subarray(c,c+u));var pe,he,ve,ae;if(Eh(e,d,1+(me<X)),d+=2,me<X){pe=Cb(A,h,0),he=A,ve=Cb(p,x,0),ae=p;var Pe=Cb(T,k,0);Eh(e,d,b-257),Eh(e,d+5,I-1),Eh(e,d+10,B-4),d+=14;for(var S=0;S<B;++S)Eh(e,d+3*S,T[PQ[S]]);d+=3*B;for(var ke=[y,j],O=0;O<2;++O)for(var G=ke[O],S=0;S<G.length;++S){var z=G[S]&31;Eh(e,d,Pe[z]),d+=T[z],z>15&&(Eh(e,d,G[S]>>5&127),d+=G[S]>>12)}}else pe=BSe,he=cg,ve=TSe,ae=BS;for(var S=0;S<l;++S){var U=n[S];if(U>255){var z=U>>18&31;Ay(e,d,pe[z+257]),d+=he[z+257],z>7&&(Eh(e,d,U>>23&31),d+=H6[z]);var Y=U&31;Ay(e,d,ve[Y]),d+=ae[Y],Y>3&&(Ay(e,d,U>>5&8191),d+=$6[Y])}else Ay(e,d,pe[U]),d+=he[U]}return Ay(e,d,pe[256]),d+he[256]},FSe=new V6([65540,131080,131088,131104,262176,1048704,1048832,2114560,2117632]),Jte=new Nf(0),OSe=function(t,e,r,n,a,s){var o=s.z||t.length,l=new Nf(n+o+5*(1+Math.ceil(o/7e3))+a),c=l.subarray(n,l.length-a),u=s.l,d=(s.r||0)&7;if(e){d&&(c[0]=s.r>>3);for(var f=FSe[e-1],A=f>>13,h=f&8191,m=(1<<r)-1,p=s.p||new Ou(32768),x=s.h||new Ou(m+1),v=Math.ceil(r/3),y=2*v,b=function(ie){return(t[ie]^t[ie+1]<<v^t[ie+2]<<y)&m},w=new V6(25e3),j=new Ou(288),I=new Ou(32),_=0,S=0,E=s.i||0,T=0,k=s.w||0,B=0;E+2<o;++E){var D=b(E),X=E&32767,me=x[D];if(p[X]=me,x[D]=X,k<=E){var pe=o-E;if((_>7e3||T>24576)&&(pe>423||!u)){d=kQ(t,c,0,w,j,I,S,T,B,E-B,d),T=_=S=0,B=E;for(var he=0;he<286;++he)j[he]=0;for(var he=0;he<30;++he)I[he]=0}var ve=2,ae=0,Pe=h,ke=X-me&32767;if(pe>2&&D==b(E-ke))for(var O=Math.min(A,pe)-1,G=Math.min(32767,E),z=Math.min(258,pe);ke<=G&&--Pe&&X!=me;){if(t[E+ve]==t[E+ve-ke]){for(var U=0;U<z&&t[E+U]==t[E+U-ke];++U);if(U>ve){if(ve=U,ae=ke,U>O)break;for(var Y=Math.min(ke,U-2),ee=0,he=0;he<Y;++he){var M=E-ke+he&32767,H=p[M],te=M-H&32767;te>ee&&(ee=te,me=M)}}}X=me,me=p[X],ke+=X-me&32767}if(ae){w[T++]=268435456|kk[ve]<<18|BQ[ae];var Ce=kk[ve]&31,V=BQ[ae]&31;S+=H6[Ce]+$6[V],++j[257+Ce],++I[V],k=E+ve,++_}else w[T++]=t[E],++j[t[E]]}}for(E=Math.max(E,k);E<o;++E)w[T++]=t[E],++j[t[E]];d=kQ(t,c,u,w,j,I,S,T,B,E-B,d),u||(s.r=d&7|c[d/8|0]<<3,d-=7,s.h=x,s.p=p,s.i=E,s.w=k)}else{for(var E=s.w||0;E<o+u;E+=65535){var We=E+65535;We>=o&&(c[d/8|0]=u,We=o),d=Yte(c,d+1,t.subarray(E,We))}s.i=o}return kSe(l,0,n+Xte(d)+a)},Zte=function(){var t=1,e=0;return{p:function(r){for(var n=t,a=e,s=r.length|0,o=0;o!=s;){for(var l=Math.min(o+2655,s);o<l;++o)a+=n+=r[o];n=(n&65535)+15*(n>>16),a=(a&65535)+15*(a>>16)}t=n,e=a},d:function(){return t%=65521,e%=65521,(t&255)<<24|(t&65280)<<8|(e&255)<<8|e>>8}}},DSe=function(t,e,r,n,a){if(!a&&(a={l:1},e.dictionary)){var s=e.dictionary.subarray(-32768),o=new Nf(s.length+t.length);o.set(s),o.set(t,s.length),t=o,a.w=s.length}return OSe(t,e.level==null?6:e.level,e.mem==null?a.l?Math.ceil(Math.max(8,Math.min(13,Math.log(t.length)))*1.5):20:12+e.mem,r,n,a)},ere=function(t,e,r){for(;r;++e)t[e]=r,r>>>=8},RSe=function(t,e){var r=e.level,n=r==0?0:r<6?1:r==9?3:2;if(t[0]=120,t[1]=n<<6|(e.dictionary&&32),t[1]|=31-(t[0]<<8|t[1])%31,e.dictionary){var a=Zte();a.p(e.dictionary),ere(t,2,a.d())}};function Dk(t,e){e||(e={});var r=Zte();r.p(t);var n=DSe(t,e,e.dictionary?6:2,4);return RSe(n,e),ere(n,n.length-4,r.d()),n}var MSe=typeof TextDecoder<"u"&&new TextDecoder,LSe=0;try{MSe.decode(Jte,{stream:!0}),LSe=1}catch{}function USe(t){if(Array.isArray(t))return t}function QSe(t,e){var r=t==null?null:typeof Symbol<"u"&&t[Symbol.iterator]||t["@@iterator"];if(r!=null){var n,a,s,o,l=[],c=!0,u=!1;try{if(s=(r=r.call(t)).next,e!==0)for(;!(c=(n=s.call(r)).done)&&(l.push(n.value),l.length!==e);c=!0);}catch(d){u=!0,a=d}finally{try{if(!c&&r.return!=null&&(o=r.return(),Object(o)!==o))return}finally{if(u)throw a}}return l}}function FQ(t,e){(e==null||e>t.length)&&(e=t.length);for(var r=0,n=Array(e);r<e;r++)n[r]=t[r];return n}function VSe(t,e){if(t){if(typeof t=="string")return FQ(t,e);var r={}.toString.call(t).slice(8,-1);return r==="Object"&&t.constructor&&(r=t.constructor.name),r==="Map"||r==="Set"?Array.from(t):r==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?FQ(t,e):void 0}}function HSe(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function OQ(t,e){return USe(t)||QSe(t,e)||VSe(t,e)||HSe()}function DQ(t,e="utf8"){return new TextDecoder(e).decode(t)}const $Se=new TextEncoder;function GSe(t){return $Se.encode(t)}const KSe=1024*8,qSe=(()=>{const t=new Uint8Array(4),e=new Uint32Array(t.buffer);return!((e[0]=1)&t[0])})(),J3={int8:globalThis.Int8Array,uint8:globalThis.Uint8Array,int16:globalThis.Int16Array,uint16:globalThis.Uint16Array,int32:globalThis.Int32Array,uint32:globalThis.Uint32Array,uint64:globalThis.BigUint64Array,int64:globalThis.BigInt64Array,float32:globalThis.Float32Array,float64:globalThis.Float64Array};class G6{constructor(e=KSe,r={}){Cr(this,"buffer");Cr(this,"byteLength");Cr(this,"byteOffset");Cr(this,"length");Cr(this,"offset");Cr(this,"lastWrittenByte");Cr(this,"littleEndian");Cr(this,"_data");Cr(this,"_mark");Cr(this,"_marks");let n=!1;typeof e=="number"?e=new ArrayBuffer(e):(n=!0,this.lastWrittenByte=e.byteLength);const a=r.offset?r.offset>>>0:0,s=e.byteLength-a;let o=a;(ArrayBuffer.isView(e)||e instanceof G6)&&(e.byteLength!==e.buffer.byteLength&&(o=e.byteOffset+a),e=e.buffer),n?this.lastWrittenByte=s:this.lastWrittenByte=0,this.buffer=e,this.length=s,this.byteLength=s,this.byteOffset=o,this.offset=0,this.littleEndian=!0,this._data=new DataView(this.buffer,o,s),this._mark=0,this._marks=[]}available(e=1){return this.offset+e<=this.length}isLittleEndian(){return this.littleEndian}setLittleEndian(){return this.littleEndian=!0,this}isBigEndian(){return!this.littleEndian}setBigEndian(){return this.littleEndian=!1,this}skip(e=1){return this.offset+=e,this}back(e=1){return this.offset-=e,this}seek(e){return this.offset=e,this}mark(){return this._mark=this.offset,this}reset(){return this.offset=this._mark,this}pushMark(){return this._marks.push(this.offset),this}popMark(){const e=this._marks.pop();if(e===void 0)throw new Error("Mark stack empty");return this.seek(e),this}rewind(){return this.offset=0,this}ensureAvailable(e=1){if(!this.available(e)){const n=(this.offset+e)*2,a=new Uint8Array(n);a.set(new Uint8Array(this.buffer)),this.buffer=a.buffer,this.length=n,this.byteLength=n,this._data=new DataView(this.buffer)}return this}readBoolean(){return this.readUint8()!==0}readInt8(){return this._data.getInt8(this.offset++)}readUint8(){return this._data.getUint8(this.offset++)}readByte(){return this.readUint8()}readBytes(e=1){return this.readArray(e,"uint8")}readArray(e,r){const n=J3[r].BYTES_PER_ELEMENT*e,a=this.byteOffset+this.offset,s=this.buffer.slice(a,a+n);if(this.littleEndian===qSe&&r!=="uint8"&&r!=="int8"){const l=new Uint8Array(this.buffer.slice(a,a+n));l.reverse();const c=new J3[r](l.buffer);return this.offset+=n,c.reverse(),c}const o=new J3[r](s);return this.offset+=n,o}readInt16(){const e=this._data.getInt16(this.offset,this.littleEndian);return this.offset+=2,e}readUint16(){const e=this._data.getUint16(this.offset,this.littleEndian);return this.offset+=2,e}readInt32(){const e=this._data.getInt32(this.offset,this.littleEndian);return this.offset+=4,e}readUint32(){const e=this._data.getUint32(this.offset,this.littleEndian);return this.offset+=4,e}readFloat32(){const e=this._data.getFloat32(this.offset,this.littleEndian);return this.offset+=4,e}readFloat64(){const e=this._data.getFloat64(this.offset,this.littleEndian);return this.offset+=8,e}readBigInt64(){const e=this._data.getBigInt64(this.offset,this.littleEndian);return this.offset+=8,e}readBigUint64(){const e=this._data.getBigUint64(this.offset,this.littleEndian);return this.offset+=8,e}readChar(){return String.fromCharCode(this.readInt8())}readChars(e=1){let r="";for(let n=0;n<e;n++)r+=this.readChar();return r}readUtf8(e=1){return DQ(this.readBytes(e))}decodeText(e=1,r="utf8"){return DQ(this.readBytes(e),r)}writeBoolean(e){return this.writeUint8(e?255:0),this}writeInt8(e){return this.ensureAvailable(1),this._data.setInt8(this.offset++,e),this._updateLastWrittenByte(),this}writeUint8(e){return this.ensureAvailable(1),this._data.setUint8(this.offset++,e),this._updateLastWrittenByte(),this}writeByte(e){return this.writeUint8(e)}writeBytes(e){this.ensureAvailable(e.length);for(let r=0;r<e.length;r++)this._data.setUint8(this.offset++,e[r]);return this._updateLastWrittenByte(),this}writeInt16(e){return this.ensureAvailable(2),this._data.setInt16(this.offset,e,this.littleEndian),this.offset+=2,this._updateLastWrittenByte(),this}writeUint16(e){return this.ensureAvailable(2),this._data.setUint16(this.offset,e,this.littleEndian),this.offset+=2,this._updateLastWrittenByte(),this}writeInt32(e){return this.ensureAvailable(4),this._data.setInt32(this.offset,e,this.littleEndian),this.offset+=4,this._updateLastWrittenByte(),this}writeUint32(e){return this.ensureAvailable(4),this._data.setUint32(this.offset,e,this.littleEndian),this.offset+=4,this._updateLastWrittenByte(),this}writeFloat32(e){return this.ensureAvailable(4),this._data.setFloat32(this.offset,e,this.littleEndian),this.offset+=4,this._updateLastWrittenByte(),this}writeFloat64(e){return this.ensureAvailable(8),this._data.setFloat64(this.offset,e,this.littleEndian),this.offset+=8,this._updateLastWrittenByte(),this}writeBigInt64(e){return this.ensureAvailable(8),this._data.setBigInt64(this.offset,e,this.littleEndian),this.offset+=8,this._updateLastWrittenByte(),this}writeBigUint64(e){return this.ensureAvailable(8),this._data.setBigUint64(this.offset,e,this.littleEndian),this.offset+=8,this._updateLastWrittenByte(),this}writeChar(e){return this.writeUint8(e.charCodeAt(0))}writeChars(e){for(let r=0;r<e.length;r++)this.writeUint8(e.charCodeAt(r));return this}writeUtf8(e){return this.writeBytes(GSe(e))}toArray(){return new Uint8Array(this.buffer,this.byteOffset,this.lastWrittenByte)}getWrittenByteLength(){return this.lastWrittenByte-this.byteOffset}_updateLastWrittenByte(){this.offset>this.lastWrittenByte&&(this.lastWrittenByte=this.offset)}}function g1(t){let e=t.length;for(;--e>=0;)t[e]=0}const zSe=3,WSe=258,tre=29,XSe=256,YSe=XSe+1+tre,rre=30,JSe=512,ZSe=new Array((YSe+2)*2);g1(ZSe);const eIe=new Array(rre*2);g1(eIe);const tIe=new Array(JSe);g1(tIe);const rIe=new Array(WSe-zSe+1);g1(rIe);const nIe=new Array(tre);g1(nIe);const aIe=new Array(rre);g1(aIe);const sIe=(t,e,r,n)=>{let a=t&65535|0,s=t>>>16&65535|0,o=0;for(;r!==0;){o=r>2e3?2e3:r,r-=o;do a=a+e[n++]|0,s=s+a|0;while(--o);a%=65521,s%=65521}return a|s<<16|0};var Rk=sIe;const iIe=()=>{let t,e=[];for(var r=0;r<256;r++){t=r;for(var n=0;n<8;n++)t=t&1?3988292384^t>>>1:t>>>1;e[r]=t}return e},oIe=new Uint32Array(iIe()),lIe=(t,e,r,n)=>{const a=oIe,s=n+r;t^=-1;for(let o=n;o<s;o++)t=t>>>8^a[(t^e[o])&255];return t^-1};var Rf=lIe,Mk={2:"need dictionary",1:"stream end",0:"","-1":"file error","-2":"stream error","-3":"data error","-4":"insufficient memory","-5":"buffer error","-6":"incompatible version"},nre={Z_NO_FLUSH:0,Z_FINISH:4,Z_BLOCK:5,Z_TREES:6,Z_OK:0,Z_STREAM_END:1,Z_NEED_DICT:2,Z_STREAM_ERROR:-2,Z_DATA_ERROR:-3,Z_MEM_ERROR:-4,Z_BUF_ERROR:-5,Z_DEFLATED:8};const cIe=(t,e)=>Object.prototype.hasOwnProperty.call(t,e);var uIe=function(t){const e=Array.prototype.slice.call(arguments,1);for(;e.length;){const r=e.shift();if(r){if(typeof r!="object")throw new TypeError(r+"must be non-object");for(const n in r)cIe(r,n)&&(t[n]=r[n])}}return t},dIe=t=>{let e=0;for(let n=0,a=t.length;n<a;n++)e+=t[n].length;const r=new Uint8Array(e);for(let n=0,a=0,s=t.length;n<s;n++){let o=t[n];r.set(o,a),a+=o.length}return r},are={assign:uIe,flattenChunks:dIe};let sre=!0;try{String.fromCharCode.apply(null,new Uint8Array(1))}catch{sre=!1}const E2=new Uint8Array(256);for(let t=0;t<256;t++)E2[t]=t>=252?6:t>=248?5:t>=240?4:t>=224?3:t>=192?2:1;E2[254]=E2[254]=1;var fIe=t=>{if(typeof TextEncoder=="function"&&TextEncoder.prototype.encode)return new TextEncoder().encode(t);let e,r,n,a,s,o=t.length,l=0;for(a=0;a<o;a++)r=t.charCodeAt(a),(r&64512)===55296&&a+1<o&&(n=t.charCodeAt(a+1),(n&64512)===56320&&(r=65536+(r-55296<<10)+(n-56320),a++)),l+=r<128?1:r<2048?2:r<65536?3:4;for(e=new Uint8Array(l),s=0,a=0;s<l;a++)r=t.charCodeAt(a),(r&64512)===55296&&a+1<o&&(n=t.charCodeAt(a+1),(n&64512)===56320&&(r=65536+(r-55296<<10)+(n-56320),a++)),r<128?e[s++]=r:r<2048?(e[s++]=192|r>>>6,e[s++]=128|r&63):r<65536?(e[s++]=224|r>>>12,e[s++]=128|r>>>6&63,e[s++]=128|r&63):(e[s++]=240|r>>>18,e[s++]=128|r>>>12&63,e[s++]=128|r>>>6&63,e[s++]=128|r&63);return e};const hIe=(t,e)=>{if(e<65534&&t.subarray&&sre)return String.fromCharCode.apply(null,t.length===e?t:t.subarray(0,e));let r="";for(let n=0;n<e;n++)r+=String.fromCharCode(t[n]);return r};var AIe=(t,e)=>{const r=e||t.length;if(typeof TextDecoder=="function"&&TextDecoder.prototype.decode)return new TextDecoder().decode(t.subarray(0,e));let n,a;const s=new Array(r*2);for(a=0,n=0;n<r;){let o=t[n++];if(o<128){s[a++]=o;continue}let l=E2[o];if(l>4){s[a++]=65533,n+=l-1;continue}for(o&=l===2?31:l===3?15:7;l>1&&n<r;)o=o<<6|t[n++]&63,l--;if(l>1){s[a++]=65533;continue}o<65536?s[a++]=o:(o-=65536,s[a++]=55296|o>>10&1023,s[a++]=56320|o&1023)}return hIe(s,a)},mIe=(t,e)=>{e=e||t.length,e>t.length&&(e=t.length);let r=e-1;for(;r>=0&&(t[r]&192)===128;)r--;return r<0||r===0?e:r+E2[t[r]]>e?r:e},Lk={string2buf:fIe,buf2string:AIe,utf8border:mIe};function pIe(){this.input=null,this.next_in=0,this.avail_in=0,this.total_in=0,this.output=null,this.next_out=0,this.avail_out=0,this.total_out=0,this.msg="",this.state=null,this.data_type=2,this.adler=0}var gIe=pIe;const jC=16209,xIe=16191;var vIe=function(e,r){let n,a,s,o,l,c,u,d,f,A,h,m,p,x,v,y,b,w,j,I,_,S,E,T;const k=e.state;n=e.next_in,E=e.input,a=n+(e.avail_in-5),s=e.next_out,T=e.output,o=s-(r-e.avail_out),l=s+(e.avail_out-257),c=k.dmax,u=k.wsize,d=k.whave,f=k.wnext,A=k.window,h=k.hold,m=k.bits,p=k.lencode,x=k.distcode,v=(1<<k.lenbits)-1,y=(1<<k.distbits)-1;e:do{m<15&&(h+=E[n++]<<m,m+=8,h+=E[n++]<<m,m+=8),b=p[h&v];t:for(;;){if(w=b>>>24,h>>>=w,m-=w,w=b>>>16&255,w===0)T[s++]=b&65535;else if(w&16){j=b&65535,w&=15,w&&(m<w&&(h+=E[n++]<<m,m+=8),j+=h&(1<<w)-1,h>>>=w,m-=w),m<15&&(h+=E[n++]<<m,m+=8,h+=E[n++]<<m,m+=8),b=x[h&y];r:for(;;){if(w=b>>>24,h>>>=w,m-=w,w=b>>>16&255,w&16){if(I=b&65535,w&=15,m<w&&(h+=E[n++]<<m,m+=8,m<w&&(h+=E[n++]<<m,m+=8)),I+=h&(1<<w)-1,I>c){e.msg="invalid distance too far back",k.mode=jC;break e}if(h>>>=w,m-=w,w=s-o,I>w){if(w=I-w,w>d&&k.sane){e.msg="invalid distance too far back",k.mode=jC;break e}if(_=0,S=A,f===0){if(_+=u-w,w<j){j-=w;do T[s++]=A[_++];while(--w);_=s-I,S=T}}else if(f<w){if(_+=u+f-w,w-=f,w<j){j-=w;do T[s++]=A[_++];while(--w);if(_=0,f<j){w=f,j-=w;do T[s++]=A[_++];while(--w);_=s-I,S=T}}}else if(_+=f-w,w<j){j-=w;do T[s++]=A[_++];while(--w);_=s-I,S=T}for(;j>2;)T[s++]=S[_++],T[s++]=S[_++],T[s++]=S[_++],j-=3;j&&(T[s++]=S[_++],j>1&&(T[s++]=S[_++]))}else{_=s-I;do T[s++]=T[_++],T[s++]=T[_++],T[s++]=T[_++],j-=3;while(j>2);j&&(T[s++]=T[_++],j>1&&(T[s++]=T[_++]))}}else if(w&64){e.msg="invalid distance code",k.mode=jC;break e}else{b=x[(b&65535)+(h&(1<<w)-1)];continue r}break}}else if(w&64)if(w&32){k.mode=xIe;break e}else{e.msg="invalid literal/length code",k.mode=jC;break e}else{b=p[(b&65535)+(h&(1<<w)-1)];continue t}break}}while(n<a&&s<l);j=m>>3,n-=j,m-=j<<3,h&=(1<<m)-1,e.next_in=n,e.next_out=s,e.avail_in=n<a?5+(a-n):5-(n-a),e.avail_out=s<l?257+(l-s):257-(s-l),k.hold=h,k.bits=m};const lx=15,RQ=852,MQ=592,LQ=0,Z3=1,UQ=2,yIe=new Uint16Array([3,4,5,6,7,8,9,10,11,13,15,17,19,23,27,31,35,43,51,59,67,83,99,115,131,163,195,227,258,0,0]),bIe=new Uint8Array([16,16,16,16,16,16,16,16,17,17,17,17,18,18,18,18,19,19,19,19,20,20,20,20,21,21,21,21,16,72,78]),wIe=new Uint16Array([1,2,3,4,5,7,9,13,17,25,33,49,65,97,129,193,257,385,513,769,1025,1537,2049,3073,4097,6145,8193,12289,16385,24577,0,0]),NIe=new Uint8Array([16,16,16,16,17,17,18,18,19,19,20,20,21,21,22,22,23,23,24,24,25,25,26,26,27,27,28,28,29,29,64,64]),CIe=(t,e,r,n,a,s,o,l)=>{const c=l.bits;let u=0,d=0,f=0,A=0,h=0,m=0,p=0,x=0,v=0,y=0,b,w,j,I,_,S=null,E;const T=new Uint16Array(lx+1),k=new Uint16Array(lx+1);let B=null,D,X,me;for(u=0;u<=lx;u++)T[u]=0;for(d=0;d<n;d++)T[e[r+d]]++;for(h=c,A=lx;A>=1&&T[A]===0;A--);if(h>A&&(h=A),A===0)return a[s++]=1<<24|64<<16|0,a[s++]=1<<24|64<<16|0,l.bits=1,0;for(f=1;f<A&&T[f]===0;f++);for(h<f&&(h=f),x=1,u=1;u<=lx;u++)if(x<<=1,x-=T[u],x<0)return-1;if(x>0&&(t===LQ||A!==1))return-1;for(k[1]=0,u=1;u<lx;u++)k[u+1]=k[u]+T[u];for(d=0;d<n;d++)e[r+d]!==0&&(o[k[e[r+d]]++]=d);if(t===LQ?(S=B=o,E=20):t===Z3?(S=yIe,B=bIe,E=257):(S=wIe,B=NIe,E=0),y=0,d=0,u=f,_=s,m=h,p=0,j=-1,v=1<<h,I=v-1,t===Z3&&v>RQ||t===UQ&&v>MQ)return 1;for(;;){D=u-p,o[d]+1<E?(X=0,me=o[d]):o[d]>=E?(X=B[o[d]-E],me=S[o[d]-E]):(X=96,me=0),b=1<<u-p,w=1<<m,f=w;do w-=b,a[_+(y>>p)+w]=D<<24|X<<16|me|0;while(w!==0);for(b=1<<u-1;y&b;)b>>=1;if(b!==0?(y&=b-1,y+=b):y=0,d++,--T[u]===0){if(u===A)break;u=e[r+o[d]]}if(u>h&&(y&I)!==j){for(p===0&&(p=h),_+=f,m=u-p,x=1<<m;m+p<A&&(x-=T[m+p],!(x<=0));)m++,x<<=1;if(v+=1<<m,t===Z3&&v>RQ||t===UQ&&v>MQ)return 1;j=y&I,a[j]=h<<24|m<<16|_-s|0}}return y!==0&&(a[_+y]=u-p<<24|64<<16|0),l.bits=h,0};var _b=CIe;const _Ie=0,ire=1,ore=2,{Z_FINISH:QQ,Z_BLOCK:EIe,Z_TREES:PC,Z_OK:ug,Z_STREAM_END:SIe,Z_NEED_DICT:IIe,Z_STREAM_ERROR:Fd,Z_DATA_ERROR:lre,Z_MEM_ERROR:cre,Z_BUF_ERROR:jIe,Z_DEFLATED:VQ}=nre,nP=16180,HQ=16181,$Q=16182,GQ=16183,KQ=16184,qQ=16185,zQ=16186,WQ=16187,XQ=16188,YQ=16189,TS=16190,Sh=16191,e5=16192,JQ=16193,t5=16194,ZQ=16195,eV=16196,tV=16197,rV=16198,BC=16199,TC=16200,nV=16201,aV=16202,sV=16203,iV=16204,oV=16205,r5=16206,lV=16207,cV=16208,Rs=16209,ure=16210,dre=16211,PIe=852,BIe=592,TIe=15,kIe=TIe,uV=t=>(t>>>24&255)+(t>>>8&65280)+((t&65280)<<8)+((t&255)<<24);function FIe(){this.strm=null,this.mode=0,this.last=!1,this.wrap=0,this.havedict=!1,this.flags=0,this.dmax=0,this.check=0,this.total=0,this.head=null,this.wbits=0,this.wsize=0,this.whave=0,this.wnext=0,this.window=null,this.hold=0,this.bits=0,this.length=0,this.offset=0,this.extra=0,this.lencode=null,this.distcode=null,this.lenbits=0,this.distbits=0,this.ncode=0,this.nlen=0,this.ndist=0,this.have=0,this.next=null,this.lens=new Uint16Array(320),this.work=new Uint16Array(288),this.lendyn=null,this.distdyn=null,this.sane=0,this.back=0,this.was=0}const Fg=t=>{if(!t)return 1;const e=t.state;return!e||e.strm!==t||e.mode<nP||e.mode>dre?1:0},fre=t=>{if(Fg(t))return Fd;const e=t.state;return t.total_in=t.total_out=e.total=0,t.msg="",e.wrap&&(t.adler=e.wrap&1),e.mode=nP,e.last=0,e.havedict=0,e.flags=-1,e.dmax=32768,e.head=null,e.hold=0,e.bits=0,e.lencode=e.lendyn=new Int32Array(PIe),e.distcode=e.distdyn=new Int32Array(BIe),e.sane=1,e.back=-1,ug},hre=t=>{if(Fg(t))return Fd;const e=t.state;return e.wsize=0,e.whave=0,e.wnext=0,fre(t)},Are=(t,e)=>{let r;if(Fg(t))return Fd;const n=t.state;return e<0?(r=0,e=-e):(r=(e>>4)+5,e<48&&(e&=15)),e&&(e<8||e>15)?Fd:(n.window!==null&&n.wbits!==e&&(n.window=null),n.wrap=r,n.wbits=e,hre(t))},mre=(t,e)=>{if(!t)return Fd;const r=new FIe;t.state=r,r.strm=t,r.window=null,r.mode=nP;const n=Are(t,e);return n!==ug&&(t.state=null),n},OIe=t=>mre(t,kIe);let dV=!0,n5,a5;const DIe=t=>{if(dV){n5=new Int32Array(512),a5=new Int32Array(32);let e=0;for(;e<144;)t.lens[e++]=8;for(;e<256;)t.lens[e++]=9;for(;e<280;)t.lens[e++]=7;for(;e<288;)t.lens[e++]=8;for(_b(ire,t.lens,0,288,n5,0,t.work,{bits:9}),e=0;e<32;)t.lens[e++]=5;_b(ore,t.lens,0,32,a5,0,t.work,{bits:5}),dV=!1}t.lencode=n5,t.lenbits=9,t.distcode=a5,t.distbits=5},pre=(t,e,r,n)=>{let a;const s=t.state;return s.window===null&&(s.wsize=1<<s.wbits,s.wnext=0,s.whave=0,s.window=new Uint8Array(s.wsize)),n>=s.wsize?(s.window.set(e.subarray(r-s.wsize,r),0),s.wnext=0,s.whave=s.wsize):(a=s.wsize-s.wnext,a>n&&(a=n),s.window.set(e.subarray(r-n,r-n+a),s.wnext),n-=a,n?(s.window.set(e.subarray(r-n,r),0),s.wnext=n,s.whave=s.wsize):(s.wnext+=a,s.wnext===s.wsize&&(s.wnext=0),s.whave<s.wsize&&(s.whave+=a))),0},RIe=(t,e)=>{let r,n,a,s,o,l,c,u,d,f,A,h,m,p,x=0,v,y,b,w,j,I,_,S;const E=new Uint8Array(4);let T,k;const B=new Uint8Array([16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15]);if(Fg(t)||!t.output||!t.input&&t.avail_in!==0)return Fd;r=t.state,r.mode===Sh&&(r.mode=e5),o=t.next_out,a=t.output,c=t.avail_out,s=t.next_in,n=t.input,l=t.avail_in,u=r.hold,d=r.bits,f=l,A=c,S=ug;e:for(;;)switch(r.mode){case nP:if(r.wrap===0){r.mode=e5;break}for(;d<16;){if(l===0)break e;l--,u+=n[s++]<<d,d+=8}if(r.wrap&2&&u===35615){r.wbits===0&&(r.wbits=15),r.check=0,E[0]=u&255,E[1]=u>>>8&255,r.check=Rf(r.check,E,2,0),u=0,d=0,r.mode=HQ;break}if(r.head&&(r.head.done=!1),!(r.wrap&1)||(((u&255)<<8)+(u>>8))%31){t.msg="incorrect header check",r.mode=Rs;break}if((u&15)!==VQ){t.msg="unknown compression method",r.mode=Rs;break}if(u>>>=4,d-=4,_=(u&15)+8,r.wbits===0&&(r.wbits=_),_>15||_>r.wbits){t.msg="invalid window size",r.mode=Rs;break}r.dmax=1<<r.wbits,r.flags=0,t.adler=r.check=1,r.mode=u&512?YQ:Sh,u=0,d=0;break;case HQ:for(;d<16;){if(l===0)break e;l--,u+=n[s++]<<d,d+=8}if(r.flags=u,(r.flags&255)!==VQ){t.msg="unknown compression method",r.mode=Rs;break}if(r.flags&57344){t.msg="unknown header flags set",r.mode=Rs;break}r.head&&(r.head.text=u>>8&1),r.flags&512&&r.wrap&4&&(E[0]=u&255,E[1]=u>>>8&255,r.check=Rf(r.check,E,2,0)),u=0,d=0,r.mode=$Q;case $Q:for(;d<32;){if(l===0)break e;l--,u+=n[s++]<<d,d+=8}r.head&&(r.head.time=u),r.flags&512&&r.wrap&4&&(E[0]=u&255,E[1]=u>>>8&255,E[2]=u>>>16&255,E[3]=u>>>24&255,r.check=Rf(r.check,E,4,0)),u=0,d=0,r.mode=GQ;case GQ:for(;d<16;){if(l===0)break e;l--,u+=n[s++]<<d,d+=8}r.head&&(r.head.xflags=u&255,r.head.os=u>>8),r.flags&512&&r.wrap&4&&(E[0]=u&255,E[1]=u>>>8&255,r.check=Rf(r.check,E,2,0)),u=0,d=0,r.mode=KQ;case KQ:if(r.flags&1024){for(;d<16;){if(l===0)break e;l--,u+=n[s++]<<d,d+=8}r.length=u,r.head&&(r.head.extra_len=u),r.flags&512&&r.wrap&4&&(E[0]=u&255,E[1]=u>>>8&255,r.check=Rf(r.check,E,2,0)),u=0,d=0}else r.head&&(r.head.extra=null);r.mode=qQ;case qQ:if(r.flags&1024&&(h=r.length,h>l&&(h=l),h&&(r.head&&(_=r.head.extra_len-r.length,r.head.extra||(r.head.extra=new Uint8Array(r.head.extra_len)),r.head.extra.set(n.subarray(s,s+h),_)),r.flags&512&&r.wrap&4&&(r.check=Rf(r.check,n,h,s)),l-=h,s+=h,r.length-=h),r.length))break e;r.length=0,r.mode=zQ;case zQ:if(r.flags&2048){if(l===0)break e;h=0;do _=n[s+h++],r.head&&_&&r.length<65536&&(r.head.name+=String.fromCharCode(_));while(_&&h<l);if(r.flags&512&&r.wrap&4&&(r.check=Rf(r.check,n,h,s)),l-=h,s+=h,_)break e}else r.head&&(r.head.name=null);r.length=0,r.mode=WQ;case WQ:if(r.flags&4096){if(l===0)break e;h=0;do _=n[s+h++],r.head&&_&&r.length<65536&&(r.head.comment+=String.fromCharCode(_));while(_&&h<l);if(r.flags&512&&r.wrap&4&&(r.check=Rf(r.check,n,h,s)),l-=h,s+=h,_)break e}else r.head&&(r.head.comment=null);r.mode=XQ;case XQ:if(r.flags&512){for(;d<16;){if(l===0)break e;l--,u+=n[s++]<<d,d+=8}if(r.wrap&4&&u!==(r.check&65535)){t.msg="header crc mismatch",r.mode=Rs;break}u=0,d=0}r.head&&(r.head.hcrc=r.flags>>9&1,r.head.done=!0),t.adler=r.check=0,r.mode=Sh;break;case YQ:for(;d<32;){if(l===0)break e;l--,u+=n[s++]<<d,d+=8}t.adler=r.check=uV(u),u=0,d=0,r.mode=TS;case TS:if(r.havedict===0)return t.next_out=o,t.avail_out=c,t.next_in=s,t.avail_in=l,r.hold=u,r.bits=d,IIe;t.adler=r.check=1,r.mode=Sh;case Sh:if(e===EIe||e===PC)break e;case e5:if(r.last){u>>>=d&7,d-=d&7,r.mode=r5;break}for(;d<3;){if(l===0)break e;l--,u+=n[s++]<<d,d+=8}switch(r.last=u&1,u>>>=1,d-=1,u&3){case 0:r.mode=JQ;break;case 1:if(DIe(r),r.mode=BC,e===PC){u>>>=2,d-=2;break e}break;case 2:r.mode=eV;break;case 3:t.msg="invalid block type",r.mode=Rs}u>>>=2,d-=2;break;case JQ:for(u>>>=d&7,d-=d&7;d<32;){if(l===0)break e;l--,u+=n[s++]<<d,d+=8}if((u&65535)!==(u>>>16^65535)){t.msg="invalid stored block lengths",r.mode=Rs;break}if(r.length=u&65535,u=0,d=0,r.mode=t5,e===PC)break e;case t5:r.mode=ZQ;case ZQ:if(h=r.length,h){if(h>l&&(h=l),h>c&&(h=c),h===0)break e;a.set(n.subarray(s,s+h),o),l-=h,s+=h,c-=h,o+=h,r.length-=h;break}r.mode=Sh;break;case eV:for(;d<14;){if(l===0)break e;l--,u+=n[s++]<<d,d+=8}if(r.nlen=(u&31)+257,u>>>=5,d-=5,r.ndist=(u&31)+1,u>>>=5,d-=5,r.ncode=(u&15)+4,u>>>=4,d-=4,r.nlen>286||r.ndist>30){t.msg="too many length or distance symbols",r.mode=Rs;break}r.have=0,r.mode=tV;case tV:for(;r.have<r.ncode;){for(;d<3;){if(l===0)break e;l--,u+=n[s++]<<d,d+=8}r.lens[B[r.have++]]=u&7,u>>>=3,d-=3}for(;r.have<19;)r.lens[B[r.have++]]=0;if(r.lencode=r.lendyn,r.lenbits=7,T={bits:r.lenbits},S=_b(_Ie,r.lens,0,19,r.lencode,0,r.work,T),r.lenbits=T.bits,S){t.msg="invalid code lengths set",r.mode=Rs;break}r.have=0,r.mode=rV;case rV:for(;r.have<r.nlen+r.ndist;){for(;x=r.lencode[u&(1<<r.lenbits)-1],v=x>>>24,y=x>>>16&255,b=x&65535,!(v<=d);){if(l===0)break e;l--,u+=n[s++]<<d,d+=8}if(b<16)u>>>=v,d-=v,r.lens[r.have++]=b;else{if(b===16){for(k=v+2;d<k;){if(l===0)break e;l--,u+=n[s++]<<d,d+=8}if(u>>>=v,d-=v,r.have===0){t.msg="invalid bit length repeat",r.mode=Rs;break}_=r.lens[r.have-1],h=3+(u&3),u>>>=2,d-=2}else if(b===17){for(k=v+3;d<k;){if(l===0)break e;l--,u+=n[s++]<<d,d+=8}u>>>=v,d-=v,_=0,h=3+(u&7),u>>>=3,d-=3}else{for(k=v+7;d<k;){if(l===0)break e;l--,u+=n[s++]<<d,d+=8}u>>>=v,d-=v,_=0,h=11+(u&127),u>>>=7,d-=7}if(r.have+h>r.nlen+r.ndist){t.msg="invalid bit length repeat",r.mode=Rs;break}for(;h--;)r.lens[r.have++]=_}}if(r.mode===Rs)break;if(r.lens[256]===0){t.msg="invalid code -- missing end-of-block",r.mode=Rs;break}if(r.lenbits=9,T={bits:r.lenbits},S=_b(ire,r.lens,0,r.nlen,r.lencode,0,r.work,T),r.lenbits=T.bits,S){t.msg="invalid literal/lengths set",r.mode=Rs;break}if(r.distbits=6,r.distcode=r.distdyn,T={bits:r.distbits},S=_b(ore,r.lens,r.nlen,r.ndist,r.distcode,0,r.work,T),r.distbits=T.bits,S){t.msg="invalid distances set",r.mode=Rs;break}if(r.mode=BC,e===PC)break e;case BC:r.mode=TC;case TC:if(l>=6&&c>=258){t.next_out=o,t.avail_out=c,t.next_in=s,t.avail_in=l,r.hold=u,r.bits=d,vIe(t,A),o=t.next_out,a=t.output,c=t.avail_out,s=t.next_in,n=t.input,l=t.avail_in,u=r.hold,d=r.bits,r.mode===Sh&&(r.back=-1);break}for(r.back=0;x=r.lencode[u&(1<<r.lenbits)-1],v=x>>>24,y=x>>>16&255,b=x&65535,!(v<=d);){if(l===0)break e;l--,u+=n[s++]<<d,d+=8}if(y&&!(y&240)){for(w=v,j=y,I=b;x=r.lencode[I+((u&(1<<w+j)-1)>>w)],v=x>>>24,y=x>>>16&255,b=x&65535,!(w+v<=d);){if(l===0)break e;l--,u+=n[s++]<<d,d+=8}u>>>=w,d-=w,r.back+=w}if(u>>>=v,d-=v,r.back+=v,r.length=b,y===0){r.mode=oV;break}if(y&32){r.back=-1,r.mode=Sh;break}if(y&64){t.msg="invalid literal/length code",r.mode=Rs;break}r.extra=y&15,r.mode=nV;case nV:if(r.extra){for(k=r.extra;d<k;){if(l===0)break e;l--,u+=n[s++]<<d,d+=8}r.length+=u&(1<<r.extra)-1,u>>>=r.extra,d-=r.extra,r.back+=r.extra}r.was=r.length,r.mode=aV;case aV:for(;x=r.distcode[u&(1<<r.distbits)-1],v=x>>>24,y=x>>>16&255,b=x&65535,!(v<=d);){if(l===0)break e;l--,u+=n[s++]<<d,d+=8}if(!(y&240)){for(w=v,j=y,I=b;x=r.distcode[I+((u&(1<<w+j)-1)>>w)],v=x>>>24,y=x>>>16&255,b=x&65535,!(w+v<=d);){if(l===0)break e;l--,u+=n[s++]<<d,d+=8}u>>>=w,d-=w,r.back+=w}if(u>>>=v,d-=v,r.back+=v,y&64){t.msg="invalid distance code",r.mode=Rs;break}r.offset=b,r.extra=y&15,r.mode=sV;case sV:if(r.extra){for(k=r.extra;d<k;){if(l===0)break e;l--,u+=n[s++]<<d,d+=8}r.offset+=u&(1<<r.extra)-1,u>>>=r.extra,d-=r.extra,r.back+=r.extra}if(r.offset>r.dmax){t.msg="invalid distance too far back",r.mode=Rs;break}r.mode=iV;case iV:if(c===0)break e;if(h=A-c,r.offset>h){if(h=r.offset-h,h>r.whave&&r.sane){t.msg="invalid distance too far back",r.mode=Rs;break}h>r.wnext?(h-=r.wnext,m=r.wsize-h):m=r.wnext-h,h>r.length&&(h=r.length),p=r.window}else p=a,m=o-r.offset,h=r.length;h>c&&(h=c),c-=h,r.length-=h;do a[o++]=p[m++];while(--h);r.length===0&&(r.mode=TC);break;case oV:if(c===0)break e;a[o++]=r.length,c--,r.mode=TC;break;case r5:if(r.wrap){for(;d<32;){if(l===0)break e;l--,u|=n[s++]<<d,d+=8}if(A-=c,t.total_out+=A,r.total+=A,r.wrap&4&&A&&(t.adler=r.check=r.flags?Rf(r.check,a,A,o-A):Rk(r.check,a,A,o-A)),A=c,r.wrap&4&&(r.flags?u:uV(u))!==r.check){t.msg="incorrect data check",r.mode=Rs;break}u=0,d=0}r.mode=lV;case lV:if(r.wrap&&r.flags){for(;d<32;){if(l===0)break e;l--,u+=n[s++]<<d,d+=8}if(r.wrap&4&&u!==(r.total&4294967295)){t.msg="incorrect length check",r.mode=Rs;break}u=0,d=0}r.mode=cV;case cV:S=SIe;break e;case Rs:S=lre;break e;case ure:return cre;case dre:default:return Fd}return t.next_out=o,t.avail_out=c,t.next_in=s,t.avail_in=l,r.hold=u,r.bits=d,(r.wsize||A!==t.avail_out&&r.mode<Rs&&(r.mode<r5||e!==QQ))&&pre(t,t.output,t.next_out,A-t.avail_out),f-=t.avail_in,A-=t.avail_out,t.total_in+=f,t.total_out+=A,r.total+=A,r.wrap&4&&A&&(t.adler=r.check=r.flags?Rf(r.check,a,A,t.next_out-A):Rk(r.check,a,A,t.next_out-A)),t.data_type=r.bits+(r.last?64:0)+(r.mode===Sh?128:0)+(r.mode===BC||r.mode===t5?256:0),(f===0&&A===0||e===QQ)&&S===ug&&(S=jIe),S},MIe=t=>{if(Fg(t))return Fd;let e=t.state;return e.window&&(e.window=null),t.state=null,ug},LIe=(t,e)=>{if(Fg(t))return Fd;const r=t.state;return r.wrap&2?(r.head=e,e.done=!1,ug):Fd},UIe=(t,e)=>{const r=e.length;let n,a,s;return Fg(t)||(n=t.state,n.wrap!==0&&n.mode!==TS)?Fd:n.mode===TS&&(a=1,a=Rk(a,e,r,0),a!==n.check)?lre:(s=pre(t,e,r,r),s?(n.mode=ure,cre):(n.havedict=1,ug))};var QIe=hre,VIe=Are,HIe=fre,$Ie=OIe,GIe=mre,KIe=RIe,qIe=MIe,zIe=LIe,WIe=UIe,XIe="pako inflate (from Nodeca project)",Lh={inflateReset:QIe,inflateReset2:VIe,inflateResetKeep:HIe,inflateInit:$Ie,inflateInit2:GIe,inflate:KIe,inflateEnd:qIe,inflateGetHeader:zIe,inflateSetDictionary:WIe,inflateInfo:XIe};function YIe(){this.text=0,this.time=0,this.xflags=0,this.os=0,this.extra=null,this.extra_len=0,this.name="",this.comment="",this.hcrc=0,this.done=!1}var JIe=YIe;const gre=Object.prototype.toString,{Z_NO_FLUSH:ZIe,Z_FINISH:eje,Z_OK:S2,Z_STREAM_END:s5,Z_NEED_DICT:i5,Z_STREAM_ERROR:tje,Z_DATA_ERROR:fV,Z_MEM_ERROR:rje}=nre;function Dw(t){this.options=are.assign({chunkSize:1024*64,windowBits:15,to:""},t||{});const e=this.options;e.raw&&e.windowBits>=0&&e.windowBits<16&&(e.windowBits=-e.windowBits,e.windowBits===0&&(e.windowBits=-15)),e.windowBits>=0&&e.windowBits<16&&!(t&&t.windowBits)&&(e.windowBits+=32),e.windowBits>15&&e.windowBits<48&&(e.windowBits&15||(e.windowBits|=15)),this.err=0,this.msg="",this.ended=!1,this.chunks=[],this.strm=new gIe,this.strm.avail_out=0;let r=Lh.inflateInit2(this.strm,e.windowBits);if(r!==S2)throw new Error(Mk[r]);if(this.header=new JIe,Lh.inflateGetHeader(this.strm,this.header),e.dictionary&&(typeof e.dictionary=="string"?e.dictionary=Lk.string2buf(e.dictionary):gre.call(e.dictionary)==="[object ArrayBuffer]"&&(e.dictionary=new Uint8Array(e.dictionary)),e.raw&&(r=Lh.inflateSetDictionary(this.strm,e.dictionary),r!==S2)))throw new Error(Mk[r])}Dw.prototype.push=function(t,e){const r=this.strm,n=this.options.chunkSize,a=this.options.dictionary;let s,o,l;if(this.ended)return!1;for(e===~~e?o=e:o=e===!0?eje:ZIe,gre.call(t)==="[object ArrayBuffer]"?r.input=new Uint8Array(t):r.input=t,r.next_in=0,r.avail_in=r.input.length;;){for(r.avail_out===0&&(r.output=new Uint8Array(n),r.next_out=0,r.avail_out=n),s=Lh.inflate(r,o),s===i5&&a&&(s=Lh.inflateSetDictionary(r,a),s===S2?s=Lh.inflate(r,o):s===fV&&(s=i5));r.avail_in>0&&s===s5&&r.state.wrap>0&&t[r.next_in]!==0;)Lh.inflateReset(r),s=Lh.inflate(r,o);switch(s){case tje:case fV:case i5:case rje:return this.onEnd(s),this.ended=!0,!1}if(l=r.avail_out,r.next_out&&(r.avail_out===0||s===s5))if(this.options.to==="string"){let c=Lk.utf8border(r.output,r.next_out),u=r.next_out-c,d=Lk.buf2string(r.output,c);r.next_out=u,r.avail_out=n-u,u&&r.output.set(r.output.subarray(c,c+u),0),this.onData(d)}else this.onData(r.output.length===r.next_out?r.output:r.output.subarray(0,r.next_out));if(!(s===S2&&l===0)){if(s===s5)return s=Lh.inflateEnd(this.strm),this.onEnd(s),this.ended=!0,!0;if(r.avail_in===0)break}}return!0};Dw.prototype.onData=function(t){this.chunks.push(t)};Dw.prototype.onEnd=function(t){t===S2&&(this.options.to==="string"?this.result=this.chunks.join(""):this.result=are.flattenChunks(this.chunks)),this.chunks=[],this.err=t,this.msg=this.strm.msg};function nje(t,e){const r=new Dw(e);if(r.push(t),r.err)throw r.msg||Mk[r.err];return r.result}var aje=Dw,sje=nje,ije={Inflate:aje,inflate:sje};const{Inflate:oje,inflate:lje}=ije;var hV=oje,cje=lje;const xre=[];for(let t=0;t<256;t++){let e=t;for(let r=0;r<8;r++)e&1?e=3988292384^e>>>1:e=e>>>1;xre[t]=e}const AV=4294967295;function uje(t,e,r){let n=t;for(let a=0;a<r;a++)n=xre[(n^e[a])&255]^n>>>8;return n}function dje(t,e){return(uje(AV,t,e)^AV)>>>0}function mV(t,e,r){const n=t.readUint32(),a=dje(new Uint8Array(t.buffer,t.byteOffset+t.offset-e-4,e),e);if(a!==n)throw new Error(`CRC mismatch for chunk ${r}. Expected ${n}, found ${a}`)}function vre(t,e,r){for(let n=0;n<r;n++)e[n]=t[n]}function yre(t,e,r,n){let a=0;for(;a<n;a++)e[a]=t[a];for(;a<r;a++)e[a]=t[a]+e[a-n]&255}function bre(t,e,r,n){let a=0;if(r.length===0)for(;a<n;a++)e[a]=t[a];else for(;a<n;a++)e[a]=t[a]+r[a]&255}function wre(t,e,r,n,a){let s=0;if(r.length===0){for(;s<a;s++)e[s]=t[s];for(;s<n;s++)e[s]=t[s]+(e[s-a]>>1)&255}else{for(;s<a;s++)e[s]=t[s]+(r[s]>>1)&255;for(;s<n;s++)e[s]=t[s]+(e[s-a]+r[s]>>1)&255}}function Nre(t,e,r,n,a){let s=0;if(r.length===0){for(;s<a;s++)e[s]=t[s];for(;s<n;s++)e[s]=t[s]+e[s-a]&255}else{for(;s<a;s++)e[s]=t[s]+r[s]&255;for(;s<n;s++)e[s]=t[s]+fje(e[s-a],r[s],r[s-a])&255}}function fje(t,e,r){const n=t+e-r,a=Math.abs(n-t),s=Math.abs(n-e),o=Math.abs(n-r);return a<=s&&a<=o?t:s<=o?e:r}function hje(t,e,r,n,a,s){switch(t){case 0:vre(e,r,a);break;case 1:yre(e,r,a,s);break;case 2:bre(e,r,n,a);break;case 3:wre(e,r,n,a,s);break;case 4:Nre(e,r,n,a,s);break;default:throw new Error(`Unsupported filter: ${t}`)}}const Aje=new Uint16Array([255]),mje=new Uint8Array(Aje.buffer),pje=mje[0]===255;function gje(t){const{data:e,width:r,height:n,channels:a,depth:s}=t,o=[{x:0,y:0,xStep:8,yStep:8},{x:4,y:0,xStep:8,yStep:8},{x:0,y:4,xStep:4,yStep:8},{x:2,y:0,xStep:4,yStep:4},{x:0,y:2,xStep:2,yStep:4},{x:1,y:0,xStep:2,yStep:2},{x:0,y:1,xStep:1,yStep:2}],l=Math.ceil(s/8)*a,c=new Uint8Array(n*r*l);let u=0;for(let d=0;d<7;d++){const f=o[d],A=Math.ceil((r-f.x)/f.xStep),h=Math.ceil((n-f.y)/f.yStep);if(A<=0||h<=0)continue;const m=A*l,p=new Uint8Array(m);for(let x=0;x<h;x++){const v=e[u++],y=e.subarray(u,u+m);u+=m;const b=new Uint8Array(m);hje(v,y,b,p,m,l),p.set(b);for(let w=0;w<A;w++){const j=f.x+w*f.xStep,I=f.y+x*f.yStep;if(!(j>=r||I>=n))for(let _=0;_<l;_++)c[(I*r+j)*l+_]=b[w*l+_]}}}if(s===16){const d=new Uint16Array(c.buffer);if(pje)for(let f=0;f<d.length;f++)d[f]=xje(d[f]);return d}else return c}function xje(t){return(t&255)<<8|t>>8&255}const vje=new Uint16Array([255]),yje=new Uint8Array(vje.buffer),bje=yje[0]===255,wje=new Uint8Array(0);function pV(t){const{data:e,width:r,height:n,channels:a,depth:s}=t,o=Math.ceil(s/8)*a,l=Math.ceil(s/8*a*r),c=new Uint8Array(n*l);let u=wje,d=0,f,A;for(let h=0;h<n;h++){switch(f=e.subarray(d+1,d+1+l),A=c.subarray(h*l,(h+1)*l),e[d]){case 0:vre(f,A,l);break;case 1:yre(f,A,l,o);break;case 2:bre(f,A,u,l);break;case 3:wre(f,A,u,l,o);break;case 4:Nre(f,A,u,l,o);break;default:throw new Error(`Unsupported filter: ${e[d]}`)}u=A,d+=l+1}if(s===16){const h=new Uint16Array(c.buffer);if(bje)for(let m=0;m<h.length;m++)h[m]=Nje(h[m]);return h}else return c}function Nje(t){return(t&255)<<8|t>>8&255}const mE=Uint8Array.of(137,80,78,71,13,10,26,10);function gV(t){if(!Cje(t.readBytes(mE.length)))throw new Error("wrong PNG signature")}function Cje(t){if(t.length<mE.length)return!1;for(let e=0;e<mE.length;e++)if(t[e]!==mE[e])return!1;return!0}const _je="tEXt",Eje=0,Cre=new TextDecoder("latin1");function Sje(t){if(jje(t),t.length===0||t.length>79)throw new Error("keyword length must be between 1 and 79")}const Ije=/^[\u0000-\u00FF]*$/;function jje(t){if(!Ije.test(t))throw new Error("invalid latin1 text")}function Pje(t,e,r){const n=_re(e);t[n]=Bje(e,r-n.length-1)}function _re(t){for(t.mark();t.readByte()!==Eje;);const e=t.offset;t.reset();const r=Cre.decode(t.readBytes(e-t.offset-1));return t.skip(1),Sje(r),r}function Bje(t,e){return Cre.decode(t.readBytes(e))}const wu={UNKNOWN:-1,GREYSCALE:0,TRUECOLOUR:2,INDEXED_COLOUR:3,GREYSCALE_ALPHA:4,TRUECOLOUR_ALPHA:6},o5={UNKNOWN:-1,DEFLATE:0},xV={UNKNOWN:-1,ADAPTIVE:0},l5={UNKNOWN:-1,NO_INTERLACE:0,ADAM7:1},kC={NONE:0,BACKGROUND:1,PREVIOUS:2},c5={SOURCE:0,OVER:1};class Tje extends G6{constructor(r,n={}){super(r);Cr(this,"_checkCrc");Cr(this,"_inflator");Cr(this,"_png");Cr(this,"_apng");Cr(this,"_end");Cr(this,"_hasPalette");Cr(this,"_palette");Cr(this,"_hasTransparency");Cr(this,"_transparency");Cr(this,"_compressionMethod");Cr(this,"_filterMethod");Cr(this,"_interlaceMethod");Cr(this,"_colorType");Cr(this,"_isAnimated");Cr(this,"_numberOfFrames");Cr(this,"_numberOfPlays");Cr(this,"_frames");Cr(this,"_writingDataChunks");const{checkCrc:a=!1}=n;this._checkCrc=a,this._inflator=new hV,this._png={width:-1,height:-1,channels:-1,data:new Uint8Array(0),depth:1,text:{}},this._apng={width:-1,height:-1,channels:-1,depth:1,numberOfFrames:1,numberOfPlays:0,text:{},frames:[]},this._end=!1,this._hasPalette=!1,this._palette=[],this._hasTransparency=!1,this._transparency=new Uint16Array(0),this._compressionMethod=o5.UNKNOWN,this._filterMethod=xV.UNKNOWN,this._interlaceMethod=l5.UNKNOWN,this._colorType=wu.UNKNOWN,this._isAnimated=!1,this._numberOfFrames=1,this._numberOfPlays=0,this._frames=[],this._writingDataChunks=!1,this.setBigEndian()}decode(){for(gV(this);!this._end;){const r=this.readUint32(),n=this.readChars(4);this.decodeChunk(r,n)}return this.decodeImage(),this._png}decodeApng(){for(gV(this);!this._end;){const r=this.readUint32(),n=this.readChars(4);this.decodeApngChunk(r,n)}return this.decodeApngImage(),this._apng}decodeChunk(r,n){const a=this.offset;switch(n){case"IHDR":this.decodeIHDR();break;case"PLTE":this.decodePLTE(r);break;case"IDAT":this.decodeIDAT(r);break;case"IEND":this._end=!0;break;case"tRNS":this.decodetRNS(r);break;case"iCCP":this.decodeiCCP(r);break;case _je:Pje(this._png.text,this,r);break;case"pHYs":this.decodepHYs();break;default:this.skip(r);break}if(this.offset-a!==r)throw new Error(`Length mismatch while decoding chunk ${n}`);this._checkCrc?mV(this,r+4,n):this.skip(4)}decodeApngChunk(r,n){const a=this.offset;switch(n!=="fdAT"&&n!=="IDAT"&&this._writingDataChunks&&this.pushDataToFrame(),n){case"acTL":this.decodeACTL();break;case"fcTL":this.decodeFCTL();break;case"fdAT":this.decodeFDAT(r);break;default:this.decodeChunk(r,n),this.offset=a+r;break}if(this.offset-a!==r)throw new Error(`Length mismatch while decoding chunk ${n}`);this._checkCrc?mV(this,r+4,n):this.skip(4)}decodeIHDR(){const r=this._png;r.width=this.readUint32(),r.height=this.readUint32(),r.depth=kje(this.readUint8());const n=this.readUint8();this._colorType=n;let a;switch(n){case wu.GREYSCALE:a=1;break;case wu.TRUECOLOUR:a=3;break;case wu.INDEXED_COLOUR:a=1;break;case wu.GREYSCALE_ALPHA:a=2;break;case wu.TRUECOLOUR_ALPHA:a=4;break;case wu.UNKNOWN:default:throw new Error(`Unknown color type: ${n}`)}if(this._png.channels=a,this._compressionMethod=this.readUint8(),this._compressionMethod!==o5.DEFLATE)throw new Error(`Unsupported compression method: ${this._compressionMethod}`);this._filterMethod=this.readUint8(),this._interlaceMethod=this.readUint8()}decodeACTL(){this._numberOfFrames=this.readUint32(),this._numberOfPlays=this.readUint32(),this._isAnimated=!0}decodeFCTL(){const r={sequenceNumber:this.readUint32(),width:this.readUint32(),height:this.readUint32(),xOffset:this.readUint32(),yOffset:this.readUint32(),delayNumber:this.readUint16(),delayDenominator:this.readUint16(),disposeOp:this.readUint8(),blendOp:this.readUint8(),data:new Uint8Array(0)};this._frames.push(r)}decodePLTE(r){if(r%3!==0)throw new RangeError(`PLTE field length must be a multiple of 3. Got ${r}`);const n=r/3;this._hasPalette=!0;const a=[];this._palette=a;for(let s=0;s<n;s++)a.push([this.readUint8(),this.readUint8(),this.readUint8()])}decodeIDAT(r){this._writingDataChunks=!0;const n=r,a=this.offset+this.byteOffset;if(this._inflator.push(new Uint8Array(this.buffer,a,n)),this._inflator.err)throw new Error(`Error while decompressing the data: ${this._inflator.err}`);this.skip(r)}decodeFDAT(r){this._writingDataChunks=!0;let n=r,a=this.offset+this.byteOffset;if(a+=4,n-=4,this._inflator.push(new Uint8Array(this.buffer,a,n)),this._inflator.err)throw new Error(`Error while decompressing the data: ${this._inflator.err}`);this.skip(r)}decodetRNS(r){switch(this._colorType){case wu.GREYSCALE:case wu.TRUECOLOUR:{if(r%2!==0)throw new RangeError(`tRNS chunk length must be a multiple of 2. Got ${r}`);if(r/2>this._png.width*this._png.height)throw new Error(`tRNS chunk contains more alpha values than there are pixels (${r/2} vs ${this._png.width*this._png.height})`);this._hasTransparency=!0,this._transparency=new Uint16Array(r/2);for(let n=0;n<r/2;n++)this._transparency[n]=this.readUint16();break}case wu.INDEXED_COLOUR:{if(r>this._palette.length)throw new Error(`tRNS chunk contains more alpha values than there are palette colors (${r} vs ${this._palette.length})`);let n=0;for(;n<r;n++){const a=this.readByte();this._palette[n].push(a)}for(;n<this._palette.length;n++)this._palette[n].push(255);break}case wu.UNKNOWN:case wu.GREYSCALE_ALPHA:case wu.TRUECOLOUR_ALPHA:default:throw new Error(`tRNS chunk is not supported for color type ${this._colorType}`)}}decodeiCCP(r){const n=_re(this),a=this.readUint8();if(a!==o5.DEFLATE)throw new Error(`Unsupported iCCP compression method: ${a}`);const s=this.readBytes(r-n.length-2);this._png.iccEmbeddedProfile={name:n,profile:cje(s)}}decodepHYs(){const r=this.readUint32(),n=this.readUint32(),a=this.readByte();this._png.resolution={x:r,y:n,unit:a}}decodeApngImage(){this._apng.width=this._png.width,this._apng.height=this._png.height,this._apng.channels=this._png.channels,this._apng.depth=this._png.depth,this._apng.numberOfFrames=this._numberOfFrames,this._apng.numberOfPlays=this._numberOfPlays,this._apng.text=this._png.text,this._apng.resolution=this._png.resolution;for(let r=0;r<this._numberOfFrames;r++){const n={sequenceNumber:this._frames[r].sequenceNumber,delayNumber:this._frames[r].delayNumber,delayDenominator:this._frames[r].delayDenominator,data:this._apng.depth===8?new Uint8Array(this._apng.width*this._apng.height*this._apng.channels):new Uint16Array(this._apng.width*this._apng.height*this._apng.channels)},a=this._frames.at(r);if(a){if(a.data=pV({data:a.data,width:a.width,height:a.height,channels:this._apng.channels,depth:this._apng.depth}),this._hasPalette&&(this._apng.palette=this._palette),this._hasTransparency&&(this._apng.transparency=this._transparency),r===0||a.xOffset===0&&a.yOffset===0&&a.width===this._png.width&&a.height===this._png.height)n.data=a.data;else{const s=this._apng.frames.at(r-1);this.disposeFrame(a,s,n),this.addFrameDataToCanvas(n,a)}this._apng.frames.push(n)}}return this._apng}disposeFrame(r,n,a){switch(r.disposeOp){case kC.NONE:break;case kC.BACKGROUND:for(let s=0;s<this._png.height;s++)for(let o=0;o<this._png.width;o++){const l=(s*r.width+o)*this._png.channels;for(let c=0;c<this._png.channels;c++)a.data[l+c]=0}break;case kC.PREVIOUS:a.data.set(n.data);break;default:throw new Error("Unknown disposeOp")}}addFrameDataToCanvas(r,n){const a=1<<this._png.depth,s=(o,l)=>{const c=((o+n.yOffset)*this._png.width+n.xOffset+l)*this._png.channels,u=(o*n.width+l)*this._png.channels;return{index:c,frameIndex:u}};switch(n.blendOp){case c5.SOURCE:for(let o=0;o<n.height;o++)for(let l=0;l<n.width;l++){const{index:c,frameIndex:u}=s(o,l);for(let d=0;d<this._png.channels;d++)r.data[c+d]=n.data[u+d]}break;case c5.OVER:for(let o=0;o<n.height;o++)for(let l=0;l<n.width;l++){const{index:c,frameIndex:u}=s(o,l);for(let d=0;d<this._png.channels;d++){const f=n.data[u+this._png.channels-1]/a,A=d%(this._png.channels-1)===0?1:n.data[u+d],h=Math.floor(f*A+(1-f)*r.data[c+d]);r.data[c+d]+=h}}break;default:throw new Error("Unknown blendOp")}}decodeImage(){var n;if(this._inflator.err)throw new Error(`Error while decompressing the data: ${this._inflator.err}`);const r=this._isAnimated?((n=this._frames)==null?void 0:n.at(0)).data:this._inflator.result;if(this._filterMethod!==xV.ADAPTIVE)throw new Error(`Filter method ${this._filterMethod} not supported`);if(this._interlaceMethod===l5.NO_INTERLACE)this._png.data=pV({data:r,width:this._png.width,height:this._png.height,channels:this._png.channels,depth:this._png.depth});else if(this._interlaceMethod===l5.ADAM7)this._png.data=gje({data:r,width:this._png.width,height:this._png.height,channels:this._png.channels,depth:this._png.depth});else throw new Error(`Interlace method ${this._interlaceMethod} not supported`);this._hasPalette&&(this._png.palette=this._palette),this._hasTransparency&&(this._png.transparency=this._transparency)}pushDataToFrame(){const r=this._inflator.result,n=this._frames.at(-1);n?n.data=r:this._frames.push({sequenceNumber:0,width:this._png.width,height:this._png.height,xOffset:0,yOffset:0,delayNumber:0,delayDenominator:0,disposeOp:kC.NONE,blendOp:c5.SOURCE,data:r}),this._inflator=new hV,this._writingDataChunks=!1}}function kje(t){if(t!==1&&t!==2&&t!==4&&t!==8&&t!==16)throw new Error(`invalid bit depth: ${t}`);return t}var vV;(function(t){t[t.UNKNOWN=0]="UNKNOWN",t[t.METRE=1]="METRE"})(vV||(vV={}));function Fje(t,e){return new Tje(t,e).decode()}var Mn=function(){return typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:this}();function u5(){Mn.console&&typeof Mn.console.log=="function"&&Mn.console.log.apply(Mn.console,arguments)}var hs={log:u5,warn:function(t){Mn.console&&(typeof Mn.console.warn=="function"?Mn.console.warn.apply(Mn.console,arguments):u5.call(null,arguments))},error:function(t){Mn.console&&(typeof Mn.console.error=="function"?Mn.console.error.apply(Mn.console,arguments):u5(t))}};function d5(t,e,r){var n=new XMLHttpRequest;n.open("GET",t),n.responseType="blob",n.onload=function(){lp(n.response,e,r)},n.onerror=function(){hs.error("could not download file")},n.send()}function yV(t){var e=new XMLHttpRequest;e.open("HEAD",t,!1);try{e.send()}catch{}return e.status>=200&&e.status<=299}function FC(t){try{t.dispatchEvent(new MouseEvent("click"))}catch{var e=document.createEvent("MouseEvents");e.initMouseEvent("click",!0,!0,window,0,0,0,80,20,!1,!1,!1,!1,0,null),t.dispatchEvent(e)}}var lp=Mn.saveAs||((typeof window>"u"?"undefined":Za(window))!=="object"||window!==Mn?function(){}:typeof HTMLAnchorElement<"u"&&"download"in HTMLAnchorElement.prototype?function(t,e,r){var n=Mn.URL||Mn.webkitURL,a=document.createElement("a");e=e||t.name||"download",a.download=e,a.rel="noopener",typeof t=="string"?(a.href=t,a.origin!==location.origin?yV(a.href)?d5(t,e,r):FC(a,a.target="_blank"):FC(a)):(a.href=n.createObjectURL(t),setTimeout(function(){n.revokeObjectURL(a.href)},4e4),setTimeout(function(){FC(a)},0))}:"msSaveOrOpenBlob"in navigator?function(t,e,r){if(e=e||t.name||"download",typeof t=="string")if(yV(t))d5(t,e,r);else{var n=document.createElement("a");n.href=t,n.target="_blank",setTimeout(function(){FC(n)})}else navigator.msSaveOrOpenBlob(function(a,s){return s===void 0?s={autoBom:!1}:Za(s)!=="object"&&(hs.warn("Deprecated: Expected third argument to be a object"),s={autoBom:!s}),s.autoBom&&/^\s*(?:text\/\S*|application\/xml|\S*\/\S*\+xml)\s*;.*charset\s*=\s*utf-8/i.test(a.type)?new Blob(["\uFEFF",a],{type:a.type}):a}(t,r),e)}:function(t,e,r,n){if((n=n||open("","_blank"))&&(n.document.title=n.document.body.innerText="downloading..."),typeof t=="string")return d5(t,e,r);var a=t.type==="application/octet-stream",s=/constructor/i.test(Mn.HTMLElement)||Mn.safari,o=/CriOS\/[\d]+/.test(navigator.userAgent);if((o||a&&s)&&(typeof FileReader>"u"?"undefined":Za(FileReader))==="object"){var l=new FileReader;l.onloadend=function(){var d=l.result;d=o?d:d.replace(/^data:[^;]*;/,"data:attachment/file;"),n?n.location.href=d:location=d,n=null},l.readAsDataURL(t)}else{var c=Mn.URL||Mn.webkitURL,u=c.createObjectURL(t);n?n.location=u:location.href=u,n=null,setTimeout(function(){c.revokeObjectURL(u)},4e4)}});/**
 * A class to parse color values
 * @author Stoyan Stefanov <sstoo@gmail.com>
 * {@link   http://www.phpied.com/rgb-color-parser-in-javascript/}
 * @license Use it if you like it
 */function Ere(t){var e;t=t||"",this.ok=!1,t.charAt(0)=="#"&&(t=t.substr(1,6)),t={aliceblue:"f0f8ff",antiquewhite:"faebd7",aqua:"00ffff",aquamarine:"7fffd4",azure:"f0ffff",beige:"f5f5dc",bisque:"ffe4c4",black:"000000",blanchedalmond:"ffebcd",blue:"0000ff",blueviolet:"8a2be2",brown:"a52a2a",burlywood:"deb887",cadetblue:"5f9ea0",chartreuse:"7fff00",chocolate:"d2691e",coral:"ff7f50",cornflowerblue:"6495ed",cornsilk:"fff8dc",crimson:"dc143c",cyan:"00ffff",darkblue:"00008b",darkcyan:"008b8b",darkgoldenrod:"b8860b",darkgray:"a9a9a9",darkgreen:"006400",darkkhaki:"bdb76b",darkmagenta:"8b008b",darkolivegreen:"556b2f",darkorange:"ff8c00",darkorchid:"9932cc",darkred:"8b0000",darksalmon:"e9967a",darkseagreen:"8fbc8f",darkslateblue:"483d8b",darkslategray:"2f4f4f",darkturquoise:"00ced1",darkviolet:"9400d3",deeppink:"ff1493",deepskyblue:"00bfff",dimgray:"696969",dodgerblue:"1e90ff",feldspar:"d19275",firebrick:"b22222",floralwhite:"fffaf0",forestgreen:"228b22",fuchsia:"ff00ff",gainsboro:"dcdcdc",ghostwhite:"f8f8ff",gold:"ffd700",goldenrod:"daa520",gray:"808080",green:"008000",greenyellow:"adff2f",honeydew:"f0fff0",hotpink:"ff69b4",indianred:"cd5c5c",indigo:"4b0082",ivory:"fffff0",khaki:"f0e68c",lavender:"e6e6fa",lavenderblush:"fff0f5",lawngreen:"7cfc00",lemonchiffon:"fffacd",lightblue:"add8e6",lightcoral:"f08080",lightcyan:"e0ffff",lightgoldenrodyellow:"fafad2",lightgrey:"d3d3d3",lightgreen:"90ee90",lightpink:"ffb6c1",lightsalmon:"ffa07a",lightseagreen:"20b2aa",lightskyblue:"87cefa",lightslateblue:"8470ff",lightslategray:"778899",lightsteelblue:"b0c4de",lightyellow:"ffffe0",lime:"00ff00",limegreen:"32cd32",linen:"faf0e6",magenta:"ff00ff",maroon:"800000",mediumaquamarine:"66cdaa",mediumblue:"0000cd",mediumorchid:"ba55d3",mediumpurple:"9370d8",mediumseagreen:"3cb371",mediumslateblue:"7b68ee",mediumspringgreen:"00fa9a",mediumturquoise:"48d1cc",mediumvioletred:"c71585",midnightblue:"191970",mintcream:"f5fffa",mistyrose:"ffe4e1",moccasin:"ffe4b5",navajowhite:"ffdead",navy:"000080",oldlace:"fdf5e6",olive:"808000",olivedrab:"6b8e23",orange:"ffa500",orangered:"ff4500",orchid:"da70d6",palegoldenrod:"eee8aa",palegreen:"98fb98",paleturquoise:"afeeee",palevioletred:"d87093",papayawhip:"ffefd5",peachpuff:"ffdab9",peru:"cd853f",pink:"ffc0cb",plum:"dda0dd",powderblue:"b0e0e6",purple:"800080",red:"ff0000",rosybrown:"bc8f8f",royalblue:"4169e1",saddlebrown:"8b4513",salmon:"fa8072",sandybrown:"f4a460",seagreen:"2e8b57",seashell:"fff5ee",sienna:"a0522d",silver:"c0c0c0",skyblue:"87ceeb",slateblue:"6a5acd",slategray:"708090",snow:"fffafa",springgreen:"00ff7f",steelblue:"4682b4",tan:"d2b48c",teal:"008080",thistle:"d8bfd8",tomato:"ff6347",turquoise:"40e0d0",violet:"ee82ee",violetred:"d02090",wheat:"f5deb3",white:"ffffff",whitesmoke:"f5f5f5",yellow:"ffff00",yellowgreen:"9acd32"}[t=(t=t.replace(/ /g,"")).toLowerCase()]||t;for(var r=[{re:/^rgb\((\d{1,3}),\s*(\d{1,3}),\s*(\d{1,3})\)$/,example:["rgb(123, 234, 45)","rgb(255,234,245)"],process:function(l){return[parseInt(l[1]),parseInt(l[2]),parseInt(l[3])]}},{re:/^(\w{2})(\w{2})(\w{2})$/,example:["#00ff00","336699"],process:function(l){return[parseInt(l[1],16),parseInt(l[2],16),parseInt(l[3],16)]}},{re:/^(\w{1})(\w{1})(\w{1})$/,example:["#fb0","f0f"],process:function(l){return[parseInt(l[1]+l[1],16),parseInt(l[2]+l[2],16),parseInt(l[3]+l[3],16)]}}],n=0;n<r.length;n++){var a=r[n].re,s=r[n].process,o=a.exec(t);o&&(e=s(o),this.r=e[0],this.g=e[1],this.b=e[2],this.ok=!0)}this.r=this.r<0||isNaN(this.r)?0:this.r>255?255:this.r,this.g=this.g<0||isNaN(this.g)?0:this.g>255?255:this.g,this.b=this.b<0||isNaN(this.b)?0:this.b>255?255:this.b,this.toRGB=function(){return"rgb("+this.r+", "+this.g+", "+this.b+")"},this.toHex=function(){var l=this.r.toString(16),c=this.g.toString(16),u=this.b.toString(16);return l.length==1&&(l="0"+l),c.length==1&&(c="0"+c),u.length==1&&(u="0"+u),"#"+l+c+u}}var pE=Mn.atob.bind(Mn),bV=Mn.btoa.bind(Mn);/**
 * @license
 * Joseph Myers does not specify a particular license for his work.
 *
 * Author: Joseph Myers
 * Accessed from: http://www.myersdaily.org/joseph/javascript/md5.js
 *
 * Modified by: Owen Leong
 */function f5(t,e){var r=t[0],n=t[1],a=t[2],s=t[3];r=Ul(r,n,a,s,e[0],7,-680876936),s=Ul(s,r,n,a,e[1],12,-389564586),a=Ul(a,s,r,n,e[2],17,606105819),n=Ul(n,a,s,r,e[3],22,-1044525330),r=Ul(r,n,a,s,e[4],7,-176418897),s=Ul(s,r,n,a,e[5],12,1200080426),a=Ul(a,s,r,n,e[6],17,-1473231341),n=Ul(n,a,s,r,e[7],22,-45705983),r=Ul(r,n,a,s,e[8],7,1770035416),s=Ul(s,r,n,a,e[9],12,-1958414417),a=Ul(a,s,r,n,e[10],17,-42063),n=Ul(n,a,s,r,e[11],22,-1990404162),r=Ul(r,n,a,s,e[12],7,1804603682),s=Ul(s,r,n,a,e[13],12,-40341101),a=Ul(a,s,r,n,e[14],17,-1502002290),r=Ql(r,n=Ul(n,a,s,r,e[15],22,1236535329),a,s,e[1],5,-165796510),s=Ql(s,r,n,a,e[6],9,-1069501632),a=Ql(a,s,r,n,e[11],14,643717713),n=Ql(n,a,s,r,e[0],20,-373897302),r=Ql(r,n,a,s,e[5],5,-701558691),s=Ql(s,r,n,a,e[10],9,38016083),a=Ql(a,s,r,n,e[15],14,-660478335),n=Ql(n,a,s,r,e[4],20,-405537848),r=Ql(r,n,a,s,e[9],5,568446438),s=Ql(s,r,n,a,e[14],9,-1019803690),a=Ql(a,s,r,n,e[3],14,-187363961),n=Ql(n,a,s,r,e[8],20,1163531501),r=Ql(r,n,a,s,e[13],5,-1444681467),s=Ql(s,r,n,a,e[2],9,-51403784),a=Ql(a,s,r,n,e[7],14,1735328473),r=Vl(r,n=Ql(n,a,s,r,e[12],20,-1926607734),a,s,e[5],4,-378558),s=Vl(s,r,n,a,e[8],11,-2022574463),a=Vl(a,s,r,n,e[11],16,1839030562),n=Vl(n,a,s,r,e[14],23,-35309556),r=Vl(r,n,a,s,e[1],4,-1530992060),s=Vl(s,r,n,a,e[4],11,1272893353),a=Vl(a,s,r,n,e[7],16,-155497632),n=Vl(n,a,s,r,e[10],23,-1094730640),r=Vl(r,n,a,s,e[13],4,681279174),s=Vl(s,r,n,a,e[0],11,-358537222),a=Vl(a,s,r,n,e[3],16,-722521979),n=Vl(n,a,s,r,e[6],23,76029189),r=Vl(r,n,a,s,e[9],4,-640364487),s=Vl(s,r,n,a,e[12],11,-421815835),a=Vl(a,s,r,n,e[15],16,530742520),r=Hl(r,n=Vl(n,a,s,r,e[2],23,-995338651),a,s,e[0],6,-198630844),s=Hl(s,r,n,a,e[7],10,1126891415),a=Hl(a,s,r,n,e[14],15,-1416354905),n=Hl(n,a,s,r,e[5],21,-57434055),r=Hl(r,n,a,s,e[12],6,1700485571),s=Hl(s,r,n,a,e[3],10,-1894986606),a=Hl(a,s,r,n,e[10],15,-1051523),n=Hl(n,a,s,r,e[1],21,-2054922799),r=Hl(r,n,a,s,e[8],6,1873313359),s=Hl(s,r,n,a,e[15],10,-30611744),a=Hl(a,s,r,n,e[6],15,-1560198380),n=Hl(n,a,s,r,e[13],21,1309151649),r=Hl(r,n,a,s,e[4],6,-145523070),s=Hl(s,r,n,a,e[11],10,-1120210379),a=Hl(a,s,r,n,e[2],15,718787259),n=Hl(n,a,s,r,e[9],21,-343485551),t[0]=q0(r,t[0]),t[1]=q0(n,t[1]),t[2]=q0(a,t[2]),t[3]=q0(s,t[3])}function aP(t,e,r,n,a,s){return e=q0(q0(e,t),q0(n,s)),q0(e<<a|e>>>32-a,r)}function Ul(t,e,r,n,a,s,o){return aP(e&r|~e&n,t,e,a,s,o)}function Ql(t,e,r,n,a,s,o){return aP(e&n|r&~n,t,e,a,s,o)}function Vl(t,e,r,n,a,s,o){return aP(e^r^n,t,e,a,s,o)}function Hl(t,e,r,n,a,s,o){return aP(r^(e|~n),t,e,a,s,o)}function Sre(t){var e,r=t.length,n=[1732584193,-271733879,-1732584194,271733878];for(e=64;e<=t.length;e+=64)f5(n,Oje(t.substring(e-64,e)));t=t.substring(e-64);var a=[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0];for(e=0;e<t.length;e++)a[e>>2]|=t.charCodeAt(e)<<(e%4<<3);if(a[e>>2]|=128<<(e%4<<3),e>55)for(f5(n,a),e=0;e<16;e++)a[e]=0;return a[14]=8*r,f5(n,a),n}function Oje(t){var e,r=[];for(e=0;e<64;e+=4)r[e>>2]=t.charCodeAt(e)+(t.charCodeAt(e+1)<<8)+(t.charCodeAt(e+2)<<16)+(t.charCodeAt(e+3)<<24);return r}var wV="0123456789abcdef".split("");function Dje(t){for(var e="",r=0;r<4;r++)e+=wV[t>>8*r+4&15]+wV[t>>8*r&15];return e}function Rje(t){return String.fromCharCode(255&t,(65280&t)>>8,(16711680&t)>>16,(4278190080&t)>>24)}function Uk(t){return Sre(t).map(Rje).join("")}var Mje=function(t){for(var e=0;e<t.length;e++)t[e]=Dje(t[e]);return t.join("")}(Sre("hello"))!="5d41402abc4b2a76b9719d911017c592";function q0(t,e){if(Mje){var r=(65535&t)+(65535&e);return(t>>16)+(e>>16)+(r>>16)<<16|65535&r}return t+e&4294967295}/**
 * @license
 * FPDF is released under a permissive license: there is no usage restriction.
 * You may embed it freely in your application (commercial or not), with or
 * without modifications.
 *
 * Reference: http://www.fpdf.org/en/script/script37.php
 */function Qk(t,e){var r,n,a,s;if(t!==r){for(var o=(a=t,s=1+(256/t.length|0),new Array(s+1).join(a)),l=[],c=0;c<256;c++)l[c]=c;var u=0;for(c=0;c<256;c++){var d=l[c];u=(u+d+o.charCodeAt(c))%256,l[c]=l[u],l[u]=d}r=t,n=l}else l=n;var f=e.length,A=0,h=0,m="";for(c=0;c<f;c++)h=(h+(d=l[A=(A+1)%256]))%256,l[A]=l[h],l[h]=d,o=l[(l[A]+l[h])%256],m+=String.fromCharCode(e.charCodeAt(c)^o);return m}/**
 * @license
 * Licensed under the MIT License.
 * http://opensource.org/licenses/mit-license
 * Author: Owen Leong (@owenl131)
 * Date: 15 Oct 2020
 * References:
 * https://www.cs.cmu.edu/~dst/Adobe/Gallery/anon21jul01-pdf-encryption.txt
 * https://github.com/foliojs/pdfkit/blob/master/lib/security.js
 * http://www.fpdf.org/en/script/script37.php
 */var NV={print:4,modify:8,copy:16,"annot-forms":32};function Bx(t,e,r,n){this.v=1,this.r=2;var a=192;t.forEach(function(l){if(NV.perm!==void 0)throw new Error("Invalid permission: "+l);a+=NV[l]}),this.padding="(N^NuAd\0NV\b..\0h>/\fdSiz";var s=(e+this.padding).substr(0,32),o=(r+this.padding).substr(0,32);this.O=this.processOwnerPassword(s,o),this.P=-(1+(255^a)),this.encryptionKey=Uk(s+this.O+this.lsbFirstWord(this.P)+this.hexToBytes(n)).substr(0,5),this.U=Qk(this.encryptionKey,this.padding)}function Tx(t){if(/[^\u0000-\u00ff]/.test(t))throw new Error("Invalid PDF Name Object: "+t+", Only accept ASCII characters.");for(var e="",r=t.length,n=0;n<r;n++){var a=t.charCodeAt(n);e+=a<33||a===35||a===37||a===40||a===41||a===47||a===60||a===62||a===91||a===93||a===123||a===125||a>126?"#"+("0"+a.toString(16)).slice(-2):t[n]}return e}function CV(t){if(Za(t)!=="object")throw new Error("Invalid Context passed to initialize PubSub (jsPDF-module)");var e={};this.subscribe=function(r,n,a){if(a=a||!1,typeof r!="string"||typeof n!="function"||typeof a!="boolean")throw new Error("Invalid arguments passed to PubSub.subscribe (jsPDF-module)");e.hasOwnProperty(r)||(e[r]={});var s=Math.random().toString(35);return e[r][s]=[n,!!a],s},this.unsubscribe=function(r){for(var n in e)if(e[n][r])return delete e[n][r],Object.keys(e[n]).length===0&&delete e[n],!0;return!1},this.publish=function(r){if(e.hasOwnProperty(r)){var n=Array.prototype.slice.call(arguments,1),a=[];for(var s in e[r]){var o=e[r][s];try{o[0].apply(t,n)}catch(l){Mn.console&&hs.error("jsPDF PubSub Error",l.message,l)}o[1]&&a.push(s)}a.length&&a.forEach(this.unsubscribe)}},this.getTopics=function(){return e}}function I2(t){if(!(this instanceof I2))return new I2(t);var e="opacity,stroke-opacity".split(",");for(var r in t)t.hasOwnProperty(r)&&e.indexOf(r)>=0&&(this[r]=t[r]);this.id="",this.objectNumber=-1}function Ire(t,e){this.gState=t,this.matrix=e,this.id="",this.objectNumber=-1}function M0(t,e,r,n,a){if(!(this instanceof M0))return new M0(t,e,r,n,a);this.type=t==="axial"?2:3,this.coords=e,this.colors=r,Ire.call(this,n,a)}function Cp(t,e,r,n,a){if(!(this instanceof Cp))return new Cp(t,e,r,n,a);this.boundingBox=t,this.xStep=e,this.yStep=r,this.stream="",this.cloneIndex=0,Ire.call(this,n,a)}function rn(t){var e,r=typeof arguments[0]=="string"?arguments[0]:"p",n=arguments[1],a=arguments[2],s=arguments[3],o=[],l=1,c=16,u="S",d=null;Za(t=t||{})==="object"&&(r=t.orientation,n=t.unit||n,a=t.format||a,s=t.compress||t.compressPdf||s,(d=t.encryption||null)!==null&&(d.userPassword=d.userPassword||"",d.ownerPassword=d.ownerPassword||"",d.userPermissions=d.userPermissions||[]),l=typeof t.userUnit=="number"?Math.abs(t.userUnit):1,t.precision!==void 0&&(e=t.precision),t.floatPrecision!==void 0&&(c=t.floatPrecision),u=t.defaultPathOperation||"S"),o=t.filters||(s===!0?["FlateEncode"]:o),n=n||"mm",r=(""+(r||"P")).toLowerCase();var f=t.putOnlyUsedFonts||!1,A={},h={internal:{},__private__:{}};h.__private__.PubSub=CV;var m="1.3",p=h.__private__.getPdfVersion=function(){return m};h.__private__.setPdfVersion=function(Q){m=Q};var x={a0:[2383.94,3370.39],a1:[1683.78,2383.94],a2:[1190.55,1683.78],a3:[841.89,1190.55],a4:[595.28,841.89],a5:[419.53,595.28],a6:[297.64,419.53],a7:[209.76,297.64],a8:[147.4,209.76],a9:[104.88,147.4],a10:[73.7,104.88],b0:[2834.65,4008.19],b1:[2004.09,2834.65],b2:[1417.32,2004.09],b3:[1000.63,1417.32],b4:[708.66,1000.63],b5:[498.9,708.66],b6:[354.33,498.9],b7:[249.45,354.33],b8:[175.75,249.45],b9:[124.72,175.75],b10:[87.87,124.72],c0:[2599.37,3676.54],c1:[1836.85,2599.37],c2:[1298.27,1836.85],c3:[918.43,1298.27],c4:[649.13,918.43],c5:[459.21,649.13],c6:[323.15,459.21],c7:[229.61,323.15],c8:[161.57,229.61],c9:[113.39,161.57],c10:[79.37,113.39],dl:[311.81,623.62],letter:[612,792],"government-letter":[576,756],legal:[612,1008],"junior-legal":[576,360],ledger:[1224,792],tabloid:[792,1224],"credit-card":[153,243]};h.__private__.getPageFormats=function(){return x};var v=h.__private__.getPageFormat=function(Q){return x[Q]};a=a||"a4";var y="compat",b="advanced",w=y;function j(){this.saveGraphicsState(),J(new Ee(ge,0,0,-ge,0,co()*ge).toString()+" cm"),this.setFontSize(this.getFontSize()/ge),u="n",w=b}function I(){this.restoreGraphicsState(),u="S",w=y}var _=h.__private__.combineFontStyleAndFontWeight=function(Q,Ie){if(Q=="bold"&&Ie=="normal"||Q=="bold"&&Ie==400||Q=="normal"&&Ie=="italic"||Q=="bold"&&Ie=="italic")throw new Error("Invalid Combination of fontweight and fontstyle");return Ie&&(Q=Ie==400||Ie==="normal"?Q==="italic"?"italic":"normal":Ie!=700&&Ie!=="bold"||Q!=="normal"?(Ie==700?"bold":Ie)+""+Q:"bold"),Q};h.advancedAPI=function(Q){var Ie=w===y;return Ie&&j.call(this),typeof Q!="function"||(Q(this),Ie&&I.call(this)),this},h.compatAPI=function(Q){var Ie=w===b;return Ie&&I.call(this),typeof Q!="function"||(Q(this),Ie&&j.call(this)),this},h.isAdvancedAPI=function(){return w===b};var S,E=function(Q){if(w!==b)throw new Error(Q+" is only available in 'advanced' API mode. You need to call advancedAPI() first.")},T=h.roundToPrecision=h.__private__.roundToPrecision=function(Q,Ie){var st=e||Ie;if(isNaN(Q)||isNaN(st))throw new Error("Invalid argument passed to jsPDF.roundToPrecision");return Q.toFixed(st).replace(/0+$/,"")};S=h.hpf=h.__private__.hpf=typeof c=="number"?function(Q){if(isNaN(Q))throw new Error("Invalid argument passed to jsPDF.hpf");return T(Q,c)}:c==="smart"?function(Q){if(isNaN(Q))throw new Error("Invalid argument passed to jsPDF.hpf");return T(Q,Q>-1&&Q<1?16:5)}:function(Q){if(isNaN(Q))throw new Error("Invalid argument passed to jsPDF.hpf");return T(Q,16)};var k=h.f2=h.__private__.f2=function(Q){if(isNaN(Q))throw new Error("Invalid argument passed to jsPDF.f2");return T(Q,2)},B=h.__private__.f3=function(Q){if(isNaN(Q))throw new Error("Invalid argument passed to jsPDF.f3");return T(Q,3)},D=h.scale=h.__private__.scale=function(Q){if(isNaN(Q))throw new Error("Invalid argument passed to jsPDF.scale");return w===y?Q*ge:w===b?Q:void 0},X=function(Q){return D(function(Ie){return w===y?co()-Ie:w===b?Ie:void 0}(Q))};h.__private__.setPrecision=h.setPrecision=function(Q){typeof parseInt(Q,10)=="number"&&(e=parseInt(Q,10))};var me,pe="00000000000000000000000000000000",he=h.__private__.getFileId=function(){return pe},ve=h.__private__.setFileId=function(Q){return pe=Q!==void 0&&/^[a-fA-F0-9]{32}$/.test(Q)?Q.toUpperCase():pe.split("").map(function(){return"ABCDEF0123456789".charAt(Math.floor(16*Math.random()))}).join(""),d!==null&&(Jt=new Bx(d.userPermissions,d.userPassword,d.ownerPassword,pe)),pe};h.setFileId=function(Q){return ve(Q),this},h.getFileId=function(){return he()};var ae=h.__private__.convertDateToPDFDate=function(Q){var Ie=Q.getTimezoneOffset(),st=Ie<0?"+":"-",gt=Math.floor(Math.abs(Ie/60)),Pt=Math.abs(Ie%60),lr=[st,z(gt),"'",z(Pt),"'"].join("");return["D:",Q.getFullYear(),z(Q.getMonth()+1),z(Q.getDate()),z(Q.getHours()),z(Q.getMinutes()),z(Q.getSeconds()),lr].join("")},Pe=h.__private__.convertPDFDateToDate=function(Q){var Ie=parseInt(Q.substr(2,4),10),st=parseInt(Q.substr(6,2),10)-1,gt=parseInt(Q.substr(8,2),10),Pt=parseInt(Q.substr(10,2),10),lr=parseInt(Q.substr(12,2),10),vr=parseInt(Q.substr(14,2),10);return new Date(Ie,st,gt,Pt,lr,vr,0)},ke=h.__private__.setCreationDate=function(Q){var Ie;if(Q===void 0&&(Q=new Date),Q instanceof Date)Ie=ae(Q);else{if(!/^D:(20[0-2][0-9]|203[0-7]|19[7-9][0-9])(0[0-9]|1[0-2])([0-2][0-9]|3[0-1])(0[0-9]|1[0-9]|2[0-3])(0[0-9]|[1-5][0-9])(0[0-9]|[1-5][0-9])(\+0[0-9]|\+1[0-4]|-0[0-9]|-1[0-1])'(0[0-9]|[1-5][0-9])'?$/.test(Q))throw new Error("Invalid argument passed to jsPDF.setCreationDate");Ie=Q}return me=Ie},O=h.__private__.getCreationDate=function(Q){var Ie=me;return Q==="jsDate"&&(Ie=Pe(me)),Ie};h.setCreationDate=function(Q){return ke(Q),this},h.getCreationDate=function(Q){return O(Q)};var G,z=h.__private__.padd2=function(Q){return("0"+parseInt(Q)).slice(-2)},U=h.__private__.padd2Hex=function(Q){return("00"+(Q=Q.toString())).substr(Q.length)},Y=0,ee=[],M=[],H=0,te=[],Ce=[],V=!1,We=M;h.__private__.setCustomOutputDestination=function(Q){V=!0,We=Q};var ie=function(Q){V||(We=Q)};h.__private__.resetCustomOutputDestination=function(){V=!1,We=M};var J=h.__private__.out=function(Q){return Q=Q.toString(),H+=Q.length+1,We.push(Q),We},Oe=h.__private__.write=function(Q){return J(arguments.length===1?Q.toString():Array.prototype.join.call(arguments," "))},fe=h.__private__.getArrayBuffer=function(Q){for(var Ie=Q.length,st=new ArrayBuffer(Ie),gt=new Uint8Array(st);Ie--;)gt[Ie]=Q.charCodeAt(Ie);return st},_e=[["Helvetica","helvetica","normal","WinAnsiEncoding"],["Helvetica-Bold","helvetica","bold","WinAnsiEncoding"],["Helvetica-Oblique","helvetica","italic","WinAnsiEncoding"],["Helvetica-BoldOblique","helvetica","bolditalic","WinAnsiEncoding"],["Courier","courier","normal","WinAnsiEncoding"],["Courier-Bold","courier","bold","WinAnsiEncoding"],["Courier-Oblique","courier","italic","WinAnsiEncoding"],["Courier-BoldOblique","courier","bolditalic","WinAnsiEncoding"],["Times-Roman","times","normal","WinAnsiEncoding"],["Times-Bold","times","bold","WinAnsiEncoding"],["Times-Italic","times","italic","WinAnsiEncoding"],["Times-BoldItalic","times","bolditalic","WinAnsiEncoding"],["ZapfDingbats","zapfdingbats","normal",null],["Symbol","symbol","normal",null]];h.__private__.getStandardFonts=function(){return _e};var Ue=t.fontSize||16;h.__private__.setFontSize=h.setFontSize=function(Q){return Ue=w===b?Q/ge:Q,this};var Ye,At=h.__private__.getFontSize=h.getFontSize=function(){return w===y?Ue:Ue*ge},yt=t.R2L||!1;h.__private__.setR2L=h.setR2L=function(Q){return yt=Q,this},h.__private__.getR2L=h.getR2L=function(){return yt};var bt,Nt=h.__private__.setZoomMode=function(Q){if(/^(?:\d+\.\d*|\d*\.\d+|\d+)%$/.test(Q))Ye=Q;else if(isNaN(Q)){if([void 0,null,"fullwidth","fullheight","fullpage","original"].indexOf(Q)===-1)throw new Error('zoom must be Integer (e.g. 2), a percentage Value (e.g. 300%) or fullwidth, fullheight, fullpage, original. "'+Q+'" is not recognized.');Ye=Q}else Ye=parseInt(Q,10)};h.__private__.getZoomMode=function(){return Ye};var jt,St=h.__private__.setPageMode=function(Q){if([void 0,null,"UseNone","UseOutlines","UseThumbs","FullScreen"].indexOf(Q)==-1)throw new Error('Page mode must be one of UseNone, UseOutlines, UseThumbs, or FullScreen. "'+Q+'" is not recognized.');bt=Q};h.__private__.getPageMode=function(){return bt};var Ve=h.__private__.setLayoutMode=function(Q){if([void 0,null,"continuous","single","twoleft","tworight","two"].indexOf(Q)==-1)throw new Error('Layout mode must be one of continuous, single, twoleft, tworight. "'+Q+'" is not recognized.');jt=Q};h.__private__.getLayoutMode=function(){return jt},h.__private__.setDisplayMode=h.setDisplayMode=function(Q,Ie,st){return Nt(Q),Ve(Ie),St(st),this};var Te={title:"",subject:"",author:"",keywords:"",creator:""};h.__private__.getDocumentProperty=function(Q){if(Object.keys(Te).indexOf(Q)===-1)throw new Error("Invalid argument passed to jsPDF.getDocumentProperty");return Te[Q]},h.__private__.getDocumentProperties=function(){return Te},h.__private__.setDocumentProperties=h.setProperties=h.setDocumentProperties=function(Q){for(var Ie in Te)Te.hasOwnProperty(Ie)&&Q[Ie]&&(Te[Ie]=Q[Ie]);return this},h.__private__.setDocumentProperty=function(Q,Ie){if(Object.keys(Te).indexOf(Q)===-1)throw new Error("Invalid arguments passed to jsPDF.setDocumentProperty");return Te[Q]=Ie};var qe,ge,q,se,ye,ue={},Le={},ct=[],ht={},xe={},Ae={},Re={},lt=null,Ne=0,De=[],xt=new CV(h),_t=t.hotfixes||[],Et={},Mt={},nt=[],Ee=function Q(Ie,st,gt,Pt,lr,vr){if(!(this instanceof Q))return new Q(Ie,st,gt,Pt,lr,vr);isNaN(Ie)&&(Ie=1),isNaN(st)&&(st=0),isNaN(gt)&&(gt=0),isNaN(Pt)&&(Pt=1),isNaN(lr)&&(lr=0),isNaN(vr)&&(vr=0),this._matrix=[Ie,st,gt,Pt,lr,vr]};Object.defineProperty(Ee.prototype,"sx",{get:function(){return this._matrix[0]},set:function(Q){this._matrix[0]=Q}}),Object.defineProperty(Ee.prototype,"shy",{get:function(){return this._matrix[1]},set:function(Q){this._matrix[1]=Q}}),Object.defineProperty(Ee.prototype,"shx",{get:function(){return this._matrix[2]},set:function(Q){this._matrix[2]=Q}}),Object.defineProperty(Ee.prototype,"sy",{get:function(){return this._matrix[3]},set:function(Q){this._matrix[3]=Q}}),Object.defineProperty(Ee.prototype,"tx",{get:function(){return this._matrix[4]},set:function(Q){this._matrix[4]=Q}}),Object.defineProperty(Ee.prototype,"ty",{get:function(){return this._matrix[5]},set:function(Q){this._matrix[5]=Q}}),Object.defineProperty(Ee.prototype,"a",{get:function(){return this._matrix[0]},set:function(Q){this._matrix[0]=Q}}),Object.defineProperty(Ee.prototype,"b",{get:function(){return this._matrix[1]},set:function(Q){this._matrix[1]=Q}}),Object.defineProperty(Ee.prototype,"c",{get:function(){return this._matrix[2]},set:function(Q){this._matrix[2]=Q}}),Object.defineProperty(Ee.prototype,"d",{get:function(){return this._matrix[3]},set:function(Q){this._matrix[3]=Q}}),Object.defineProperty(Ee.prototype,"e",{get:function(){return this._matrix[4]},set:function(Q){this._matrix[4]=Q}}),Object.defineProperty(Ee.prototype,"f",{get:function(){return this._matrix[5]},set:function(Q){this._matrix[5]=Q}}),Object.defineProperty(Ee.prototype,"rotation",{get:function(){return Math.atan2(this.shx,this.sx)}}),Object.defineProperty(Ee.prototype,"scaleX",{get:function(){return this.decompose().scale.sx}}),Object.defineProperty(Ee.prototype,"scaleY",{get:function(){return this.decompose().scale.sy}}),Object.defineProperty(Ee.prototype,"isIdentity",{get:function(){return this.sx===1&&this.shy===0&&this.shx===0&&this.sy===1&&this.tx===0&&this.ty===0}}),Ee.prototype.join=function(Q){return[this.sx,this.shy,this.shx,this.sy,this.tx,this.ty].map(S).join(Q)},Ee.prototype.multiply=function(Q){var Ie=Q.sx*this.sx+Q.shy*this.shx,st=Q.sx*this.shy+Q.shy*this.sy,gt=Q.shx*this.sx+Q.sy*this.shx,Pt=Q.shx*this.shy+Q.sy*this.sy,lr=Q.tx*this.sx+Q.ty*this.shx+this.tx,vr=Q.tx*this.shy+Q.ty*this.sy+this.ty;return new Ee(Ie,st,gt,Pt,lr,vr)},Ee.prototype.decompose=function(){var Q=this.sx,Ie=this.shy,st=this.shx,gt=this.sy,Pt=this.tx,lr=this.ty,vr=Math.sqrt(Q*Q+Ie*Ie),nn=(Q/=vr)*st+(Ie/=vr)*gt;st-=Q*nn,gt-=Ie*nn;var dn=Math.sqrt(st*st+gt*gt);return nn/=dn,Q*(gt/=dn)<Ie*(st/=dn)&&(Q=-Q,Ie=-Ie,nn=-nn,vr=-vr),{scale:new Ee(vr,0,0,dn,0,0),translate:new Ee(1,0,0,1,Pt,lr),rotate:new Ee(Q,Ie,-Ie,Q,0,0),skew:new Ee(1,0,nn,1,0,0)}},Ee.prototype.toString=function(Q){return this.join(" ")},Ee.prototype.inversed=function(){var Q=this.sx,Ie=this.shy,st=this.shx,gt=this.sy,Pt=this.tx,lr=this.ty,vr=1/(Q*gt-Ie*st),nn=gt*vr,dn=-Ie*vr,Bn=-st*vr,Vn=Q*vr;return new Ee(nn,dn,Bn,Vn,-nn*Pt-Bn*lr,-dn*Pt-Vn*lr)},Ee.prototype.applyToPoint=function(Q){var Ie=Q.x*this.sx+Q.y*this.shx+this.tx,st=Q.x*this.shy+Q.y*this.sy+this.ty;return new Fl(Ie,st)},Ee.prototype.applyToRectangle=function(Q){var Ie=this.applyToPoint(Q),st=this.applyToPoint(new Fl(Q.x+Q.w,Q.y+Q.h));return new Yi(Ie.x,Ie.y,st.x-Ie.x,st.y-Ie.y)},Ee.prototype.clone=function(){var Q=this.sx,Ie=this.shy,st=this.shx,gt=this.sy,Pt=this.tx,lr=this.ty;return new Ee(Q,Ie,st,gt,Pt,lr)},h.Matrix=Ee;var we=h.matrixMult=function(Q,Ie){return Ie.multiply(Q)},oe=new Ee(1,0,0,1,0,0);h.unitMatrix=h.identityMatrix=oe;var Fe=function(Q,Ie){if(!xe[Q]){var st=(Ie instanceof M0?"Sh":"P")+(Object.keys(ht).length+1).toString(10);Ie.id=st,xe[Q]=st,ht[st]=Ie,xt.publish("addPattern",Ie)}};h.ShadingPattern=M0,h.TilingPattern=Cp,h.addShadingPattern=function(Q,Ie){return E("addShadingPattern()"),Fe(Q,Ie),this},h.beginTilingPattern=function(Q){E("beginTilingPattern()"),Rc(Q.boundingBox[0],Q.boundingBox[1],Q.boundingBox[2]-Q.boundingBox[0],Q.boundingBox[3]-Q.boundingBox[1],Q.matrix)},h.endTilingPattern=function(Q,Ie){E("endTilingPattern()"),Ie.stream=Ce[G].join(`
`),Fe(Q,Ie),xt.publish("endTilingPattern",Ie),nt.pop().restore()};var ce,Me=h.__private__.newObject=function(){var Q=Ke();return P(Q,!0),Q},Ke=h.__private__.newObjectDeferred=function(){return Y++,ee[Y]=function(){return H},Y},P=function(Q,Ie){return Ie=typeof Ie=="boolean"&&Ie,ee[Q]=H,Ie&&J(Q+" 0 obj"),Q},R=h.__private__.newAdditionalObject=function(){var Q={objId:Ke(),content:""};return te.push(Q),Q},L=Ke(),K=Ke(),re=h.__private__.decodeColorString=function(Q){var Ie=Q.split(" ");if(Ie.length!==2||Ie[1]!=="g"&&Ie[1]!=="G")Ie.length!==5||Ie[4]!=="k"&&Ie[4]!=="K"||(Ie=[(1-Ie[0])*(1-Ie[3]),(1-Ie[1])*(1-Ie[3]),(1-Ie[2])*(1-Ie[3]),"r"]);else{var st=parseFloat(Ie[0]);Ie=[st,st,st,"r"]}for(var gt="#",Pt=0;Pt<3;Pt++)gt+=("0"+Math.floor(255*parseFloat(Ie[Pt])).toString(16)).slice(-2);return gt},de=h.__private__.encodeColorString=function(Q){var Ie;typeof Q=="string"&&(Q={ch1:Q});var st=Q.ch1,gt=Q.ch2,Pt=Q.ch3,lr=Q.ch4,vr=Q.pdfColorType==="draw"?["G","RG","K"]:["g","rg","k"];if(typeof st=="string"&&st.charAt(0)!=="#"){var nn=new Ere(st);if(nn.ok)st=nn.toHex();else if(!/^\d*\.?\d*$/.test(st))throw new Error('Invalid color "'+st+'" passed to jsPDF.encodeColorString.')}if(typeof st=="string"&&/^#[0-9A-Fa-f]{3}$/.test(st)&&(st="#"+st[1]+st[1]+st[2]+st[2]+st[3]+st[3]),typeof st=="string"&&/^#[0-9A-Fa-f]{6}$/.test(st)){var dn=parseInt(st.substr(1),16);st=dn>>16&255,gt=dn>>8&255,Pt=255&dn}if(gt===void 0||lr===void 0&&st===gt&&gt===Pt)Ie=typeof st=="string"?st+" "+vr[0]:Q.precision===2?k(st/255)+" "+vr[0]:B(st/255)+" "+vr[0];else if(lr===void 0||Za(lr)==="object"){if(lr&&!isNaN(lr.a)&&lr.a===0)return["1.","1.","1.",vr[1]].join(" ");Ie=typeof st=="string"?[st,gt,Pt,vr[1]].join(" "):Q.precision===2?[k(st/255),k(gt/255),k(Pt/255),vr[1]].join(" "):[B(st/255),B(gt/255),B(Pt/255),vr[1]].join(" ")}else Ie=typeof st=="string"?[st,gt,Pt,lr,vr[2]].join(" "):Q.precision===2?[k(st),k(gt),k(Pt),k(lr),vr[2]].join(" "):[B(st),B(gt),B(Pt),B(lr),vr[2]].join(" ");return Ie},Ge=h.__private__.getFilters=function(){return o},rt=h.__private__.putStream=function(Q){var Ie=(Q=Q||{}).data||"",st=Q.filters||Ge(),gt=Q.alreadyAppliedFilters||[],Pt=Q.addLength1||!1,lr=Ie.length,vr=Q.objectId,nn=function(mi){return mi};if(d!==null&&vr===void 0)throw new Error("ObjectId must be passed to putStream for file encryption");d!==null&&(nn=Jt.encryptor(vr,0));var dn={};st===!0&&(st=["FlateEncode"]);var Bn=Q.additionalKeyValues||[],Vn=(dn=rn.API.processDataByFilters!==void 0?rn.API.processDataByFilters(Ie,st):{data:Ie,reverseChain:[]}).reverseChain+(Array.isArray(gt)?gt.join(" "):gt.toString());if(dn.data.length!==0&&(Bn.push({key:"Length",value:dn.data.length}),Pt===!0&&Bn.push({key:"Length1",value:lr})),Vn.length!=0)if(Vn.split("/").length-1==1)Bn.push({key:"Filter",value:Vn});else{Bn.push({key:"Filter",value:"["+Vn+"]"});for(var da=0;da<Bn.length;da+=1)if(Bn[da].key==="DecodeParms"){for(var ka=[],Ys=0;Ys<dn.reverseChain.split("/").length-1;Ys+=1)ka.push("null");ka.push(Bn[da].value),Bn[da].value="["+ka.join(" ")+"]"}}J("<<");for(var Va=0;Va<Bn.length;Va++)J("/"+Bn[Va].key+" "+Bn[Va].value);J(">>"),dn.data.length!==0&&(J("stream"),J(nn(dn.data)),J("endstream"))},ft=h.__private__.putPage=function(Q){var Ie=Q.number,st=Q.data,gt=Q.objId,Pt=Q.contentsObjId;P(gt,!0),J("<</Type /Page"),J("/Parent "+Q.rootDictionaryObjId+" 0 R"),J("/Resources "+Q.resourceDictionaryObjId+" 0 R"),J("/MediaBox ["+parseFloat(S(Q.mediaBox.bottomLeftX))+" "+parseFloat(S(Q.mediaBox.bottomLeftY))+" "+S(Q.mediaBox.topRightX)+" "+S(Q.mediaBox.topRightY)+"]"),Q.cropBox!==null&&J("/CropBox ["+S(Q.cropBox.bottomLeftX)+" "+S(Q.cropBox.bottomLeftY)+" "+S(Q.cropBox.topRightX)+" "+S(Q.cropBox.topRightY)+"]"),Q.bleedBox!==null&&J("/BleedBox ["+S(Q.bleedBox.bottomLeftX)+" "+S(Q.bleedBox.bottomLeftY)+" "+S(Q.bleedBox.topRightX)+" "+S(Q.bleedBox.topRightY)+"]"),Q.trimBox!==null&&J("/TrimBox ["+S(Q.trimBox.bottomLeftX)+" "+S(Q.trimBox.bottomLeftY)+" "+S(Q.trimBox.topRightX)+" "+S(Q.trimBox.topRightY)+"]"),Q.artBox!==null&&J("/ArtBox ["+S(Q.artBox.bottomLeftX)+" "+S(Q.artBox.bottomLeftY)+" "+S(Q.artBox.topRightX)+" "+S(Q.artBox.topRightY)+"]"),typeof Q.userUnit=="number"&&Q.userUnit!==1&&J("/UserUnit "+Q.userUnit),xt.publish("putPage",{objId:gt,pageContext:De[Ie],pageNumber:Ie,page:st}),J("/Contents "+Pt+" 0 R"),J(">>"),J("endobj");var lr=st.join(`
`);return w===b&&(lr+=`
Q`),P(Pt,!0),rt({data:lr,filters:Ge(),objectId:Pt}),J("endobj"),gt},et=h.__private__.putPages=function(){var Q,Ie,st=[];for(Q=1;Q<=Ne;Q++)De[Q].objId=Ke(),De[Q].contentsObjId=Ke();for(Q=1;Q<=Ne;Q++)st.push(ft({number:Q,data:Ce[Q],objId:De[Q].objId,contentsObjId:De[Q].contentsObjId,mediaBox:De[Q].mediaBox,cropBox:De[Q].cropBox,bleedBox:De[Q].bleedBox,trimBox:De[Q].trimBox,artBox:De[Q].artBox,userUnit:De[Q].userUnit,rootDictionaryObjId:L,resourceDictionaryObjId:K}));P(L,!0),J("<</Type /Pages");var gt="/Kids [";for(Ie=0;Ie<Ne;Ie++)gt+=st[Ie]+" 0 R ";J(gt+"]"),J("/Count "+Ne),J(">>"),J("endobj"),xt.publish("postPutPages")},ut=function(Q){xt.publish("putFont",{font:Q,out:J,newObject:Me,putStream:rt}),Q.isAlreadyPutted!==!0&&(Q.objectNumber=Me(),J("<<"),J("/Type /Font"),J("/BaseFont /"+Tx(Q.postScriptName)),J("/Subtype /Type1"),typeof Q.encoding=="string"&&J("/Encoding /"+Q.encoding),J("/FirstChar 32"),J("/LastChar 255"),J(">>"),J("endobj"))},Ot=function(Q){Q.objectNumber=Me();var Ie=[];Ie.push({key:"Type",value:"/XObject"}),Ie.push({key:"Subtype",value:"/Form"}),Ie.push({key:"BBox",value:"["+[S(Q.x),S(Q.y),S(Q.x+Q.width),S(Q.y+Q.height)].join(" ")+"]"}),Ie.push({key:"Matrix",value:"["+Q.matrix.toString()+"]"});var st=Q.pages[1].join(`
`);rt({data:st,additionalKeyValues:Ie,objectId:Q.objectNumber}),J("endobj")},zt=function(Q,Ie){Ie||(Ie=21);var st=Me(),gt=function(vr,nn){var dn,Bn=[],Vn=1/(nn-1);for(dn=0;dn<1;dn+=Vn)Bn.push(dn);if(Bn.push(1),vr[0].offset!=0){var da={offset:0,color:vr[0].color};vr.unshift(da)}if(vr[vr.length-1].offset!=1){var ka={offset:1,color:vr[vr.length-1].color};vr.push(ka)}for(var Ys="",Va=0,mi=0;mi<Bn.length;mi++){for(dn=Bn[mi];dn>vr[Va+1].offset;)Va++;var Js=vr[Va].offset,pi=(dn-Js)/(vr[Va+1].offset-Js),Zs=vr[Va].color,Lc=vr[Va+1].color;Ys+=U(Math.round((1-pi)*Zs[0]+pi*Lc[0]).toString(16))+U(Math.round((1-pi)*Zs[1]+pi*Lc[1]).toString(16))+U(Math.round((1-pi)*Zs[2]+pi*Lc[2]).toString(16))}return Ys.trim()}(Q.colors,Ie),Pt=[];Pt.push({key:"FunctionType",value:"0"}),Pt.push({key:"Domain",value:"[0.0 1.0]"}),Pt.push({key:"Size",value:"["+Ie+"]"}),Pt.push({key:"BitsPerSample",value:"8"}),Pt.push({key:"Range",value:"[0.0 1.0 0.0 1.0 0.0 1.0]"}),Pt.push({key:"Decode",value:"[0.0 1.0 0.0 1.0 0.0 1.0]"}),rt({data:gt,additionalKeyValues:Pt,alreadyAppliedFilters:["/ASCIIHexDecode"],objectId:st}),J("endobj"),Q.objectNumber=Me(),J("<< /ShadingType "+Q.type),J("/ColorSpace /DeviceRGB");var lr="/Coords ["+S(parseFloat(Q.coords[0]))+" "+S(parseFloat(Q.coords[1]))+" ";Q.type===2?lr+=S(parseFloat(Q.coords[2]))+" "+S(parseFloat(Q.coords[3])):lr+=S(parseFloat(Q.coords[2]))+" "+S(parseFloat(Q.coords[3]))+" "+S(parseFloat(Q.coords[4]))+" "+S(parseFloat(Q.coords[5])),J(lr+="]"),Q.matrix&&J("/Matrix ["+Q.matrix.toString()+"]"),J("/Function "+st+" 0 R"),J("/Extend [true true]"),J(">>"),J("endobj")},Bt=function(Q,Ie){var st=Ke(),gt=Me();Ie.push({resourcesOid:st,objectOid:gt}),Q.objectNumber=gt;var Pt=[];Pt.push({key:"Type",value:"/Pattern"}),Pt.push({key:"PatternType",value:"1"}),Pt.push({key:"PaintType",value:"1"}),Pt.push({key:"TilingType",value:"1"}),Pt.push({key:"BBox",value:"["+Q.boundingBox.map(S).join(" ")+"]"}),Pt.push({key:"XStep",value:S(Q.xStep)}),Pt.push({key:"YStep",value:S(Q.yStep)}),Pt.push({key:"Resources",value:st+" 0 R"}),Q.matrix&&Pt.push({key:"Matrix",value:"["+Q.matrix.toString()+"]"}),rt({data:Q.stream,additionalKeyValues:Pt,objectId:Q.objectNumber}),J("endobj")},Lt=function(Q){for(var Ie in Q.objectNumber=Me(),J("<<"),Q)switch(Ie){case"opacity":J("/ca "+k(Q[Ie]));break;case"stroke-opacity":J("/CA "+k(Q[Ie]))}J(">>"),J("endobj")},Be=function(Q){P(Q.resourcesOid,!0),J("<<"),J("/ProcSet [/PDF /Text /ImageB /ImageC /ImageI]"),function(){for(var Ie in J("/Font <<"),ue)ue.hasOwnProperty(Ie)&&(f===!1||f===!0&&A.hasOwnProperty(Ie))&&J("/"+Ie+" "+ue[Ie].objectNumber+" 0 R");J(">>")}(),function(){if(Object.keys(ht).length>0){for(var Ie in J("/Shading <<"),ht)ht.hasOwnProperty(Ie)&&ht[Ie]instanceof M0&&ht[Ie].objectNumber>=0&&J("/"+Ie+" "+ht[Ie].objectNumber+" 0 R");xt.publish("putShadingPatternDict"),J(">>")}}(),function(Ie){if(Object.keys(ht).length>0){for(var st in J("/Pattern <<"),ht)ht.hasOwnProperty(st)&&ht[st]instanceof h.TilingPattern&&ht[st].objectNumber>=0&&ht[st].objectNumber<Ie&&J("/"+st+" "+ht[st].objectNumber+" 0 R");xt.publish("putTilingPatternDict"),J(">>")}}(Q.objectOid),function(){if(Object.keys(Ae).length>0){var Ie;for(Ie in J("/ExtGState <<"),Ae)Ae.hasOwnProperty(Ie)&&Ae[Ie].objectNumber>=0&&J("/"+Ie+" "+Ae[Ie].objectNumber+" 0 R");xt.publish("putGStateDict"),J(">>")}}(),function(){for(var Ie in J("/XObject <<"),Et)Et.hasOwnProperty(Ie)&&Et[Ie].objectNumber>=0&&J("/"+Ie+" "+Et[Ie].objectNumber+" 0 R");xt.publish("putXobjectDict"),J(">>")}(),J(">>"),J("endobj")},vt=function(Q){Le[Q.fontName]=Le[Q.fontName]||{},Le[Q.fontName][Q.fontStyle]=Q.id},hr=function(Q,Ie,st,gt,Pt){var lr={id:"F"+(Object.keys(ue).length+1).toString(10),postScriptName:Q,fontName:Ie,fontStyle:st,encoding:gt,isStandardFont:Pt||!1,metadata:{}};return xt.publish("addFont",{font:lr,instance:this}),ue[lr.id]=lr,vt(lr),lr.id},xr=h.__private__.pdfEscape=h.pdfEscape=function(Q,Ie){return function(st,gt){var Pt,lr,vr,nn,dn,Bn,Vn,da,ka;if(vr=(gt=gt||{}).sourceEncoding||"Unicode",dn=gt.outputEncoding,(gt.autoencode||dn)&&ue[qe].metadata&&ue[qe].metadata[vr]&&ue[qe].metadata[vr].encoding&&(nn=ue[qe].metadata[vr].encoding,!dn&&ue[qe].encoding&&(dn=ue[qe].encoding),!dn&&nn.codePages&&(dn=nn.codePages[0]),typeof dn=="string"&&(dn=nn[dn]),dn)){for(Vn=!1,Bn=[],Pt=0,lr=st.length;Pt<lr;Pt++)(da=dn[st.charCodeAt(Pt)])?Bn.push(String.fromCharCode(da)):Bn.push(st[Pt]),Bn[Pt].charCodeAt(0)>>8&&(Vn=!0);st=Bn.join("")}for(Pt=st.length;Vn===void 0&&Pt!==0;)st.charCodeAt(Pt-1)>>8&&(Vn=!0),Pt--;if(!Vn)return st;for(Bn=gt.noBOM?[]:[254,255],Pt=0,lr=st.length;Pt<lr;Pt++){if((ka=(da=st.charCodeAt(Pt))>>8)>>8)throw new Error("Character at position "+Pt+" of string '"+st+"' exceeds 16bits. Cannot be encoded into UCS-2 BE");Bn.push(ka),Bn.push(da-(ka<<8))}return String.fromCharCode.apply(void 0,Bn)}(Q,Ie).replace(/\\/g,"\\\\").replace(/\(/g,"\\(").replace(/\)/g,"\\)")},Nr=h.__private__.beginPage=function(Q){Ce[++Ne]=[],De[Ne]={objId:0,contentsObjId:0,userUnit:Number(l),artBox:null,bleedBox:null,cropBox:null,trimBox:null,mediaBox:{bottomLeftX:0,bottomLeftY:0,topRightX:Number(Q[0]),topRightY:Number(Q[1])}},Zr(Ne),ie(Ce[G])},gr=function(Q,Ie){var st,gt,Pt;switch(r=Ie||r,typeof Q=="string"&&(st=v(Q.toLowerCase()),Array.isArray(st)&&(gt=st[0],Pt=st[1])),Array.isArray(Q)&&(gt=Q[0]*ge,Pt=Q[1]*ge),isNaN(gt)&&(gt=a[0],Pt=a[1]),(gt>14400||Pt>14400)&&(hs.warn("A page in a PDF can not be wider or taller than 14400 userUnit. jsPDF limits the width/height to 14400"),gt=Math.min(14400,gt),Pt=Math.min(14400,Pt)),a=[gt,Pt],r.substr(0,1)){case"l":Pt>gt&&(a=[Pt,gt]);break;case"p":gt>Pt&&(a=[Pt,gt])}Nr(a),Tt(zr),J(yn),xa!==0&&J(xa+" J"),Qn!==0&&J(Qn+" j"),xt.publish("addPage",{pageNumber:Ne})},_r=function(Q){Q>0&&Q<=Ne&&(Ce.splice(Q,1),De.splice(Q,1),Ne--,G>Ne&&(G=Ne),this.setPage(G))},Zr=function(Q){Q>0&&Q<=Ne&&(G=Q)},Nn=h.__private__.getNumberOfPages=h.getNumberOfPages=function(){return Ce.length-1},en=function(Q,Ie,st){var gt,Pt=void 0;return st=st||{},Q=Q!==void 0?Q:ue[qe].fontName,Ie=Ie!==void 0?Ie:ue[qe].fontStyle,gt=Q.toLowerCase(),Le[gt]!==void 0&&Le[gt][Ie]!==void 0?Pt=Le[gt][Ie]:Le[Q]!==void 0&&Le[Q][Ie]!==void 0?Pt=Le[Q][Ie]:st.disableWarning===!1&&hs.warn("Unable to look up font label for font '"+Q+"', '"+Ie+"'. Refer to getFontList() for available fonts."),Pt||st.noFallback||(Pt=Le.times[Ie])==null&&(Pt=Le.times.normal),Pt},Qr=h.__private__.putInfo=function(){var Q=Me(),Ie=function(gt){return gt};for(var st in d!==null&&(Ie=Jt.encryptor(Q,0)),J("<<"),J("/Producer ("+xr(Ie("jsPDF "+rn.version))+")"),Te)Te.hasOwnProperty(st)&&Te[st]&&J("/"+st.substr(0,1).toUpperCase()+st.substr(1)+" ("+xr(Ie(Te[st]))+")");J("/CreationDate ("+xr(Ie(me))+")"),J(">>"),J("endobj")},wr=h.__private__.putCatalog=function(Q){var Ie=(Q=Q||{}).rootDictionaryObjId||L;switch(Me(),J("<<"),J("/Type /Catalog"),J("/Pages "+Ie+" 0 R"),Ye||(Ye="fullwidth"),Ye){case"fullwidth":J("/OpenAction [3 0 R /FitH null]");break;case"fullheight":J("/OpenAction [3 0 R /FitV null]");break;case"fullpage":J("/OpenAction [3 0 R /Fit]");break;case"original":J("/OpenAction [3 0 R /XYZ null null 1]");break;default:var st=""+Ye;st.substr(st.length-1)==="%"&&(Ye=parseInt(Ye)/100),typeof Ye=="number"&&J("/OpenAction [3 0 R /XYZ null null "+k(Ye)+"]")}switch(jt||(jt="continuous"),jt){case"continuous":J("/PageLayout /OneColumn");break;case"single":J("/PageLayout /SinglePage");break;case"two":case"twoleft":J("/PageLayout /TwoColumnLeft");break;case"tworight":J("/PageLayout /TwoColumnRight")}bt&&J("/PageMode /"+bt),xt.publish("putCatalog"),J(">>"),J("endobj")},Or=h.__private__.putTrailer=function(){J("trailer"),J("<<"),J("/Size "+(Y+1)),J("/Root "+Y+" 0 R"),J("/Info "+(Y-1)+" 0 R"),d!==null&&J("/Encrypt "+Jt.oid+" 0 R"),J("/ID [ <"+pe+"> <"+pe+"> ]"),J(">>")},$r=h.__private__.putHeader=function(){J("%PDF-"+m),J("%")},mr=h.__private__.putXRef=function(){var Q="0000000000";J("xref"),J("0 "+(Y+1)),J("0000000000 65535 f ");for(var Ie=1;Ie<=Y;Ie++)typeof ee[Ie]=="function"?J((Q+ee[Ie]()).slice(-10)+" 00000 n "):ee[Ie]!==void 0?J((Q+ee[Ie]).slice(-10)+" 00000 n "):J("0000000000 00000 n ")},Kr=h.__private__.buildDocument=function(){var Q;Y=0,H=0,M=[],ee=[],te=[],L=Ke(),K=Ke(),ie(M),xt.publish("buildDocument"),$r(),et(),function(){xt.publish("putAdditionalObjects");for(var st=0;st<te.length;st++){var gt=te[st];P(gt.objId,!0),J(gt.content),J("endobj")}xt.publish("postPutAdditionalObjects")}(),Q=[],function(){for(var st in ue)ue.hasOwnProperty(st)&&(f===!1||f===!0&&A.hasOwnProperty(st))&&ut(ue[st])}(),function(){var st;for(st in Ae)Ae.hasOwnProperty(st)&&Lt(Ae[st])}(),function(){for(var st in Et)Et.hasOwnProperty(st)&&Ot(Et[st])}(),function(st){var gt;for(gt in ht)ht.hasOwnProperty(gt)&&(ht[gt]instanceof M0?zt(ht[gt]):ht[gt]instanceof Cp&&Bt(ht[gt],st))}(Q),xt.publish("putResources"),Q.forEach(Be),Be({resourcesOid:K,objectOid:Number.MAX_SAFE_INTEGER}),xt.publish("postPutResources"),d!==null&&(Jt.oid=Me(),J("<<"),J("/Filter /Standard"),J("/V "+Jt.v),J("/R "+Jt.r),J("/U <"+Jt.toHexString(Jt.U)+">"),J("/O <"+Jt.toHexString(Jt.O)+">"),J("/P "+Jt.P),J(">>"),J("endobj")),Qr(),wr();var Ie=H;return mr(),Or(),J("startxref"),J(""+Ie),J("%%EOF"),ie(Ce[G]),M.join(`
`)},or=h.__private__.getBlob=function(Q){return new Blob([fe(Q)],{type:"application/pdf"})},dt=h.output=h.__private__.output=(ce=function(Q,Ie){switch(typeof(Ie=Ie||{})=="string"?Ie={filename:Ie}:Ie.filename=Ie.filename||"generated.pdf",Q){case void 0:return Kr();case"save":h.save(Ie.filename);break;case"arraybuffer":return fe(Kr());case"blob":return or(Kr());case"bloburi":case"bloburl":if(Mn.URL!==void 0&&typeof Mn.URL.createObjectURL=="function")return Mn.URL&&Mn.URL.createObjectURL(or(Kr()))||void 0;hs.warn("bloburl is not supported by your system, because URL.createObjectURL is not supported by your browser.");break;case"datauristring":case"dataurlstring":var st="",gt=Kr();try{st=bV(gt)}catch{st=bV(unescape(encodeURIComponent(gt)))}return"data:application/pdf;filename="+Ie.filename+";base64,"+st;case"pdfobjectnewwindow":if(Object.prototype.toString.call(Mn)==="[object Window]"){var Pt="https://cdnjs.cloudflare.com/ajax/libs/pdfobject/2.1.1/pdfobject.min.js",lr=' integrity="sha512-4ze/a9/4jqu+tX9dfOqJYSvyYd5M6qum/3HpCLr+/Jqf0whc37VUbkpNGHR7/8pSnCFw47T1fmIpwBV7UySh3g==" crossorigin="anonymous"';Ie.pdfObjectUrl&&(Pt=Ie.pdfObjectUrl,lr="");var vr='<html><style>html, body { padding: 0; margin: 0; } iframe { width: 100%; height: 100%; border: 0;}  </style><body><script src="'+Pt+'"'+lr+'><\/script><script >PDFObject.embed("'+this.output("dataurlstring")+'", '+JSON.stringify(Ie)+");<\/script></body></html>",nn=Mn.open();return nn!==null&&nn.document.write(vr),nn}throw new Error("The option pdfobjectnewwindow just works in a browser-environment.");case"pdfjsnewwindow":if(Object.prototype.toString.call(Mn)==="[object Window]"){var dn='<html><style>html, body { padding: 0; margin: 0; } iframe { width: 100%; height: 100%; border: 0;}  </style><body><iframe id="pdfViewer" src="'+(Ie.pdfJsUrl||"examples/PDF.js/web/viewer.html")+"?file=&downloadName="+Ie.filename+'" width="500px" height="400px" /></body></html>',Bn=Mn.open();if(Bn!==null){Bn.document.write(dn);var Vn=this;Bn.document.documentElement.querySelector("#pdfViewer").onload=function(){Bn.document.title=Ie.filename,Bn.document.documentElement.querySelector("#pdfViewer").contentWindow.PDFViewerApplication.open(Vn.output("bloburl"))}}return Bn}throw new Error("The option pdfjsnewwindow just works in a browser-environment.");case"dataurlnewwindow":if(Object.prototype.toString.call(Mn)!=="[object Window]")throw new Error("The option dataurlnewwindow just works in a browser-environment.");var da='<html><style>html, body { padding: 0; margin: 0; } iframe { width: 100%; height: 100%; border: 0;}  </style><body><iframe src="'+this.output("datauristring",Ie)+'"></iframe></body></html>',ka=Mn.open();if(ka!==null&&(ka.document.write(da),ka.document.title=Ie.filename),ka||typeof safari>"u")return ka;break;case"datauri":case"dataurl":return Mn.document.location.href=this.output("datauristring",Ie);default:return null}},ce.foo=function(){try{return ce.apply(this,arguments)}catch(st){var Q=st.stack||"";~Q.indexOf(" at ")&&(Q=Q.split(" at ")[1]);var Ie="Error in function "+Q.split(`
`)[0].split("<")[0]+": "+st.message;if(!Mn.console)throw new Error(Ie);Mn.console.error(Ie,st),Mn.alert&&alert(Ie)}},ce.foo.bar=ce,ce.foo),er=function(Q){return Array.isArray(_t)===!0&&_t.indexOf(Q)>-1};switch(n){case"pt":ge=1;break;case"mm":ge=72/25.4;break;case"cm":ge=72/2.54;break;case"in":ge=72;break;case"px":ge=er("px_scaling")==1?.75:96/72;break;case"pc":case"em":ge=12;break;case"ex":ge=6;break;default:if(typeof n!="number")throw new Error("Invalid unit: "+n);ge=n}var Jt=null;ke(),ve();var ar=h.__private__.getPageInfo=h.getPageInfo=function(Q){if(isNaN(Q)||Q%1!=0)throw new Error("Invalid argument passed to jsPDF.getPageInfo");return{objId:De[Q].objId,pageNumber:Q,pageContext:De[Q]}},tr=h.__private__.getPageInfoByObjId=function(Q){if(isNaN(Q)||Q%1!=0)throw new Error("Invalid argument passed to jsPDF.getPageInfoByObjId");for(var Ie in De)if(De[Ie].objId===Q)break;return ar(Ie)},fr=h.__private__.getCurrentPageInfo=h.getCurrentPageInfo=function(){return{objId:De[G].objId,pageNumber:G,pageContext:De[G]}};h.addPage=function(){return gr.apply(this,arguments),this},h.setPage=function(){return Zr.apply(this,arguments),ie.call(this,Ce[G]),this},h.insertPage=function(Q){return this.addPage(),this.movePage(G,Q),this},h.movePage=function(Q,Ie){var st,gt;if(Q>Ie){st=Ce[Q],gt=De[Q];for(var Pt=Q;Pt>Ie;Pt--)Ce[Pt]=Ce[Pt-1],De[Pt]=De[Pt-1];Ce[Ie]=st,De[Ie]=gt,this.setPage(Ie)}else if(Q<Ie){st=Ce[Q],gt=De[Q];for(var lr=Q;lr<Ie;lr++)Ce[lr]=Ce[lr+1],De[lr]=De[lr+1];Ce[Ie]=st,De[Ie]=gt,this.setPage(Ie)}return this},h.deletePage=function(){return _r.apply(this,arguments),this},h.__private__.text=h.text=function(Q,Ie,st,gt,Pt){var lr,vr,nn,dn,Bn,Vn,da,ka,Ys,Va=(gt=gt||{}).scope||this;if(typeof Q=="number"&&typeof Ie=="number"&&(typeof st=="string"||Array.isArray(st))){var mi=st;st=Ie,Ie=Q,Q=mi}if(arguments[3]instanceof Ee==0?(nn=arguments[4],dn=arguments[5],Za(da=arguments[3])==="object"&&da!==null||(typeof nn=="string"&&(dn=nn,nn=null),typeof da=="string"&&(dn=da,da=null),typeof da=="number"&&(nn=da,da=null),gt={flags:da,angle:nn,align:dn})):(E("The transform parameter of text() with a Matrix value"),Ys=Pt),isNaN(Ie)||isNaN(st)||Q==null)throw new Error("Invalid arguments passed to jsPDF.text");if(Q.length===0)return Va;var Js,pi="",Zs=typeof gt.lineHeightFactor=="number"?gt.lineHeightFactor:Yr,Lc=Va.internal.scaleFactor;function Wu(Ma){return Ma=Ma.split("	").join(Array(gt.TabLen||9).join(" ")),xr(Ma,da)}function Xu(Ma){for(var us,Pi=Ma.concat(),uo=[],yh=Pi.length;yh--;)typeof(us=Pi.shift())=="string"?uo.push(us):Array.isArray(Ma)&&(us.length===1||us[1]===void 0&&us[2]===void 0)?uo.push(us[0]):uo.push([us[0],us[1],us[2]]);return uo}function C(Ma,us){var Pi;if(typeof Ma=="string")Pi=us(Ma)[0];else if(Array.isArray(Ma)){for(var uo,yh,U1=Ma.concat(),zg=[],xN=U1.length;xN--;)typeof(uo=U1.shift())=="string"?zg.push(us(uo)[0]):Array.isArray(uo)&&typeof uo[0]=="string"&&(yh=us(uo[0],uo[1],uo[2]),zg.push([yh[0],yh[1],yh[2]]));Pi=zg}return Pi}var Z=!1,be=!0;if(typeof Q=="string")Z=!0;else if(Array.isArray(Q)){var Xe=Q.concat();vr=[];for(var Ft,qt=Xe.length;qt--;)(typeof(Ft=Xe.shift())!="string"||Array.isArray(Ft)&&typeof Ft[0]!="string")&&(be=!1);Z=be}if(Z===!1)throw new Error('Type of text must be string or Array. "'+Q+'" is not recognized.');typeof Q=="string"&&(Q=Q.match(/[\r?\n]/)?Q.split(/\r\n|\r|\n/g):[Q]);var Fr=Ue/Va.internal.scaleFactor,ma=Fr*(Zs-1);switch(gt.baseline){case"bottom":st-=ma;break;case"top":st+=Fr-ma;break;case"hanging":st+=Fr-2*ma;break;case"middle":st+=Fr/2-ma}if((Vn=gt.maxWidth||0)>0&&(typeof Q=="string"?Q=Va.splitTextToSize(Q,Vn):Object.prototype.toString.call(Q)==="[object Array]"&&(Q=Q.reduce(function(Ma,us){return Ma.concat(Va.splitTextToSize(us,Vn))},[]))),lr={text:Q,x:Ie,y:st,options:gt,mutex:{pdfEscape:xr,activeFontKey:qe,fonts:ue,activeFontSize:Ue}},xt.publish("preProcessText",lr),Q=lr.text,nn=(gt=lr.options).angle,Ys instanceof Ee==0&&nn&&typeof nn=="number"){nn*=Math.PI/180,gt.rotationDirection===0&&(nn=-nn),w===b&&(nn=-nn);var ei=Math.cos(nn),ra=Math.sin(nn);Ys=new Ee(ei,ra,-ra,ei,0,0)}else nn&&nn instanceof Ee&&(Ys=nn);w!==b||Ys||(Ys=oe),(Bn=gt.charSpace||Xi)!==void 0&&(pi+=S(D(Bn))+` Tc
`,this.setCharSpace(this.getCharSpace()||0)),(ka=gt.horizontalScale)!==void 0&&(pi+=S(100*ka)+` Tz
`),gt.lang;var Sa=-1,gs=gt.renderingMode!==void 0?gt.renderingMode:gt.stroke,hu=Va.internal.getCurrentPageInfo().pageContext;switch(gs){case 0:case!1:case"fill":Sa=0;break;case 1:case!0:case"stroke":Sa=1;break;case 2:case"fillThenStroke":Sa=2;break;case 3:case"invisible":Sa=3;break;case 4:case"fillAndAddForClipping":Sa=4;break;case 5:case"strokeAndAddPathForClipping":Sa=5;break;case 6:case"fillThenStrokeAndAddToPathForClipping":Sa=6;break;case 7:case"addToPathForClipping":Sa=7}var Ol=hu.usedRenderingMode!==void 0?hu.usedRenderingMode:-1;Sa!==-1?pi+=Sa+` Tr
`:Ol!==-1&&(pi+=`0 Tr
`),Sa!==-1&&(hu.usedRenderingMode=Sa),dn=gt.align||"left";var ol,$d=Ue*Zs,k1=Va.internal.pageSize.getWidth(),F1=ue[qe];Bn=gt.charSpace||Xi,Vn=gt.maxWidth||0,da=Object.assign({autoencode:!0,noBOM:!0},gt.flags);var KA=[],$m=function(Ma){return Va.getStringUnitWidth(Ma,{font:F1,charSpace:Bn,fontSize:Ue,doKerning:!1})*Ue/Lc};if(Object.prototype.toString.call(Q)==="[object Array]"){var Au;vr=Xu(Q),dn!=="left"&&(ol=vr.map($m));var mu,qA=0;if(dn==="right"){Ie-=ol[0],Q=[],qt=vr.length;for(var vh=0;vh<qt;vh++)vh===0?(mu=pr(Ie),Au=jr(st)):(mu=D(qA-ol[vh]),Au=-$d),Q.push([vr[vh],mu,Au]),qA=ol[vh]}else if(dn==="center"){Ie-=ol[0]/2,Q=[],qt=vr.length;for(var zA=0;zA<qt;zA++)zA===0?(mu=pr(Ie),Au=jr(st)):(mu=D((qA-ol[zA])/2),Au=-$d),Q.push([vr[zA],mu,Au]),qA=ol[zA]}else if(dn==="left"){Q=[],qt=vr.length;for(var O1=0;O1<qt;O1++)Q.push(vr[O1])}else if(dn==="justify"&&F1.encoding==="Identity-H"){Q=[],qt=vr.length,Vn=Vn!==0?Vn:k1;for(var qg=0,ji=0;ji<qt;ji++)if(Au=ji===0?jr(st):-$d,mu=ji===0?pr(Ie):qg,ji<qt-1){var gN=D((Vn-ol[ji])/(vr[ji].split(" ").length-1)),Tf=vr[ji].split(" ");Q.push([Tf[0]+" ",mu,Au]),qg=0;for(var kf=1;kf<Tf.length;kf++){var D1=($m(Tf[kf-1]+" "+Tf[kf])-$m(Tf[kf]))*Lc+gN;kf==Tf.length-1?Q.push([Tf[kf],D1,0]):Q.push([Tf[kf]+" ",D1,0]),qg-=D1}}else Q.push([vr[ji],mu,Au]);Q.push(["",qg,0])}else{if(dn!=="justify")throw new Error('Unrecognized alignment option, use "left", "center", "right" or "justify".');for(Q=[],qt=vr.length,Vn=Vn!==0?Vn:k1,ji=0;ji<qt;ji++){Au=ji===0?jr(st):-$d,mu=ji===0?pr(Ie):0;var R1=vr[ji].split(" ").length-1,M1=R1>0?(Vn-ol[ji])/R1:0;ji<qt-1?KA.push(S(D(M1))):KA.push(0),Q.push([vr[ji],mu,Au])}}}(typeof gt.R2L=="boolean"?gt.R2L:yt)===!0&&(Q=C(Q,function(Ma,us,Pi){return[Ma.split("").reverse().join(""),us,Pi]})),lr={text:Q,x:Ie,y:st,options:gt,mutex:{pdfEscape:xr,activeFontKey:qe,fonts:ue,activeFontSize:Ue}},xt.publish("postProcessText",lr),Q=lr.text,Js=lr.mutex.isHex||!1;var L1=ue[qe].encoding;L1!=="WinAnsiEncoding"&&L1!=="StandardEncoding"||(Q=C(Q,function(Ma,us,Pi){return[Wu(Ma),us,Pi]})),vr=Xu(Q),Q=[];for(var WA,XA,YA,Gm=Array.isArray(vr[0])?1:0,JA="",Km=function(Ma,us,Pi){var uo="";return Pi instanceof Ee?(Pi=typeof gt.angle=="number"?we(Pi,new Ee(1,0,0,1,Ma,us)):we(new Ee(1,0,0,1,Ma,us),Pi),w===b&&(Pi=we(new Ee(1,0,0,-1,0,0),Pi)),uo=Pi.join(" ")+` Tm
`):uo=S(Ma)+" "+S(us)+` Td
`,uo},Yu=0;Yu<vr.length;Yu++){switch(JA="",Gm){case 1:YA=(Js?"<":"(")+vr[Yu][0]+(Js?">":")"),WA=parseFloat(vr[Yu][1]),XA=parseFloat(vr[Yu][2]);break;case 0:YA=(Js?"<":"(")+vr[Yu]+(Js?">":")"),WA=pr(Ie),XA=jr(st)}KA!==void 0&&KA[Yu]!==void 0&&(JA=KA[Yu]+` Tw
`),Yu===0?Q.push(JA+Km(WA,XA,Ys)+YA):Gm===0?Q.push(JA+YA):Gm===1&&Q.push(JA+Km(WA,XA,Ys)+YA)}Q=Gm===0?Q.join(` Tj
T* `):Q.join(` Tj
`),Q+=` Tj
`;var Ff=`BT
/`;return Ff+=qe+" "+Ue+` Tf
`,Ff+=S(Ue*Zs)+` TL
`,Ff+=ga+`
`,Ff+=pi,Ff+=Q,J(Ff+="ET"),A[qe]=!0,Va};var ne=h.__private__.clip=h.clip=function(Q){return J(Q==="evenodd"?"W*":"W"),this};h.clipEvenOdd=function(){return ne("evenodd")},h.__private__.discardPath=h.discardPath=function(){return J("n"),this};var He=h.__private__.isValidStyle=function(Q){var Ie=!1;return[void 0,null,"S","D","F","DF","FD","f","f*","B","B*","n"].indexOf(Q)!==-1&&(Ie=!0),Ie};h.__private__.setDefaultPathOperation=h.setDefaultPathOperation=function(Q){return He(Q)&&(u=Q),this};var tt=h.__private__.getStyle=h.getStyle=function(Q){var Ie=u;switch(Q){case"D":case"S":Ie="S";break;case"F":Ie="f";break;case"FD":case"DF":Ie="B";break;case"f":case"f*":case"B":case"B*":Ie=Q}return Ie},Je=h.close=function(){return J("h"),this};h.stroke=function(){return J("S"),this},h.fill=function(Q){return pt("f",Q),this},h.fillEvenOdd=function(Q){return pt("f*",Q),this},h.fillStroke=function(Q){return pt("B",Q),this},h.fillStrokeEvenOdd=function(Q){return pt("B*",Q),this};var pt=function(Q,Ie){Za(Ie)==="object"?Xt(Ie,Q):J(Q)},wt=function(Q){Q===null||w===b&&Q===void 0||(Q=tt(Q),J(Q))};function Wt(Q,Ie,st,gt,Pt){var lr=new Cp(Ie||this.boundingBox,st||this.xStep,gt||this.yStep,this.gState,Pt||this.matrix);lr.stream=this.stream;var vr=Q+"$$"+this.cloneIndex+++"$$";return Fe(vr,lr),lr}var Xt=function(Q,Ie){var st=xe[Q.key],gt=ht[st];if(gt instanceof M0)J("q"),J(Rt(Ie)),gt.gState&&h.setGState(gt.gState),J(Q.matrix.toString()+" cm"),J("/"+st+" sh"),J("Q");else if(gt instanceof Cp){var Pt=new Ee(1,0,0,-1,0,co());Q.matrix&&(Pt=Pt.multiply(Q.matrix||oe),st=Wt.call(gt,Q.key,Q.boundingBox,Q.xStep,Q.yStep,Pt).id),J("q"),J("/Pattern cs"),J("/"+st+" scn"),gt.gState&&h.setGState(gt.gState),J(Ie),J("Q")}},Rt=function(Q){switch(Q){case"f":case"F":case"n":return"W n";case"f*":return"W* n";case"B":case"S":return"W S";case"B*":return"W* S"}},$t=h.moveTo=function(Q,Ie){return J(S(D(Q))+" "+S(X(Ie))+" m"),this},kr=h.lineTo=function(Q,Ie){return J(S(D(Q))+" "+S(X(Ie))+" l"),this},Zt=h.curveTo=function(Q,Ie,st,gt,Pt,lr){return J([S(D(Q)),S(X(Ie)),S(D(st)),S(X(gt)),S(D(Pt)),S(X(lr)),"c"].join(" ")),this};h.__private__.line=h.line=function(Q,Ie,st,gt,Pt){if(isNaN(Q)||isNaN(Ie)||isNaN(st)||isNaN(gt)||!He(Pt))throw new Error("Invalid arguments passed to jsPDF.line");return w===y?this.lines([[st-Q,gt-Ie]],Q,Ie,[1,1],Pt||"S"):this.lines([[st-Q,gt-Ie]],Q,Ie,[1,1]).stroke()},h.__private__.lines=h.lines=function(Q,Ie,st,gt,Pt,lr){var vr,nn,dn,Bn,Vn,da,ka,Ys,Va,mi,Js,pi;if(typeof Q=="number"&&(pi=st,st=Ie,Ie=Q,Q=pi),gt=gt||[1,1],lr=lr||!1,isNaN(Ie)||isNaN(st)||!Array.isArray(Q)||!Array.isArray(gt)||!He(Pt)||typeof lr!="boolean")throw new Error("Invalid arguments passed to jsPDF.lines");for($t(Ie,st),vr=gt[0],nn=gt[1],Bn=Q.length,mi=Ie,Js=st,dn=0;dn<Bn;dn++)(Vn=Q[dn]).length===2?(mi=Vn[0]*vr+mi,Js=Vn[1]*nn+Js,kr(mi,Js)):(da=Vn[0]*vr+mi,ka=Vn[1]*nn+Js,Ys=Vn[2]*vr+mi,Va=Vn[3]*nn+Js,mi=Vn[4]*vr+mi,Js=Vn[5]*nn+Js,Zt(da,ka,Ys,Va,mi,Js));return lr&&Je(),wt(Pt),this},h.path=function(Q){for(var Ie=0;Ie<Q.length;Ie++){var st=Q[Ie],gt=st.c;switch(st.op){case"m":$t(gt[0],gt[1]);break;case"l":kr(gt[0],gt[1]);break;case"c":Zt.apply(this,gt);break;case"h":Je()}}return this},h.__private__.rect=h.rect=function(Q,Ie,st,gt,Pt){if(isNaN(Q)||isNaN(Ie)||isNaN(st)||isNaN(gt)||!He(Pt))throw new Error("Invalid arguments passed to jsPDF.rect");return w===y&&(gt=-gt),J([S(D(Q)),S(X(Ie)),S(D(st)),S(D(gt)),"re"].join(" ")),wt(Pt),this},h.__private__.triangle=h.triangle=function(Q,Ie,st,gt,Pt,lr,vr){if(isNaN(Q)||isNaN(Ie)||isNaN(st)||isNaN(gt)||isNaN(Pt)||isNaN(lr)||!He(vr))throw new Error("Invalid arguments passed to jsPDF.triangle");return this.lines([[st-Q,gt-Ie],[Pt-st,lr-gt],[Q-Pt,Ie-lr]],Q,Ie,[1,1],vr,!0),this},h.__private__.roundedRect=h.roundedRect=function(Q,Ie,st,gt,Pt,lr,vr){if(isNaN(Q)||isNaN(Ie)||isNaN(st)||isNaN(gt)||isNaN(Pt)||isNaN(lr)||!He(vr))throw new Error("Invalid arguments passed to jsPDF.roundedRect");var nn=4/3*(Math.SQRT2-1);return Pt=Math.min(Pt,.5*st),lr=Math.min(lr,.5*gt),this.lines([[st-2*Pt,0],[Pt*nn,0,Pt,lr-lr*nn,Pt,lr],[0,gt-2*lr],[0,lr*nn,-Pt*nn,lr,-Pt,lr],[2*Pt-st,0],[-Pt*nn,0,-Pt,-lr*nn,-Pt,-lr],[0,2*lr-gt],[0,-lr*nn,Pt*nn,-lr,Pt,-lr]],Q+Pt,Ie,[1,1],vr,!0),this},h.__private__.ellipse=h.ellipse=function(Q,Ie,st,gt,Pt){if(isNaN(Q)||isNaN(Ie)||isNaN(st)||isNaN(gt)||!He(Pt))throw new Error("Invalid arguments passed to jsPDF.ellipse");var lr=4/3*(Math.SQRT2-1)*st,vr=4/3*(Math.SQRT2-1)*gt;return $t(Q+st,Ie),Zt(Q+st,Ie-vr,Q+lr,Ie-gt,Q,Ie-gt),Zt(Q-lr,Ie-gt,Q-st,Ie-vr,Q-st,Ie),Zt(Q-st,Ie+vr,Q-lr,Ie+gt,Q,Ie+gt),Zt(Q+lr,Ie+gt,Q+st,Ie+vr,Q+st,Ie),wt(Pt),this},h.__private__.circle=h.circle=function(Q,Ie,st,gt){if(isNaN(Q)||isNaN(Ie)||isNaN(st)||!He(gt))throw new Error("Invalid arguments passed to jsPDF.circle");return this.ellipse(Q,Ie,st,st,gt)},h.setFont=function(Q,Ie,st){return st&&(Ie=_(Ie,st)),qe=en(Q,Ie,{disableWarning:!1}),this};var Dr=h.__private__.getFont=h.getFont=function(){return ue[en.apply(h,arguments)]};h.__private__.getFontList=h.getFontList=function(){var Q,Ie,st={};for(Q in Le)if(Le.hasOwnProperty(Q))for(Ie in st[Q]=[],Le[Q])Le[Q].hasOwnProperty(Ie)&&st[Q].push(Ie);return st},h.addFont=function(Q,Ie,st,gt,Pt){var lr=["StandardEncoding","MacRomanEncoding","Identity-H","WinAnsiEncoding"];return arguments[3]&&lr.indexOf(arguments[3])!==-1?Pt=arguments[3]:arguments[3]&&lr.indexOf(arguments[3])==-1&&(st=_(st,gt)),hr.call(this,Q,Ie,st,Pt=Pt||"Identity-H")};var Yr,zr=t.lineWidth||.200025,Er=h.__private__.getLineWidth=h.getLineWidth=function(){return zr},Tt=h.__private__.setLineWidth=h.setLineWidth=function(Q){return zr=Q,J(S(D(Q))+" w"),this};h.__private__.setLineDash=rn.API.setLineDash=rn.API.setLineDashPattern=function(Q,Ie){if(Q=Q||[],Ie=Ie||0,isNaN(Ie)||!Array.isArray(Q))throw new Error("Invalid arguments passed to jsPDF.setLineDash");return Q=Q.map(function(st){return S(D(st))}).join(" "),Ie=S(D(Ie)),J("["+Q+"] "+Ie+" d"),this};var pn=h.__private__.getLineHeight=h.getLineHeight=function(){return Ue*Yr};h.__private__.getLineHeight=h.getLineHeight=function(){return Ue*Yr};var un=h.__private__.setLineHeightFactor=h.setLineHeightFactor=function(Q){return typeof(Q=Q||1.15)=="number"&&(Yr=Q),this},Ir=h.__private__.getLineHeightFactor=h.getLineHeightFactor=function(){return Yr};un(t.lineHeight);var pr=h.__private__.getHorizontalCoordinate=function(Q){return D(Q)},jr=h.__private__.getVerticalCoordinate=function(Q){return w===b?Q:De[G].mediaBox.topRightY-De[G].mediaBox.bottomLeftY-D(Q)},Fn=h.__private__.getHorizontalCoordinateString=h.getHorizontalCoordinateString=function(Q){return S(pr(Q))},Sn=h.__private__.getVerticalCoordinateString=h.getVerticalCoordinateString=function(Q){return S(jr(Q))},yn=t.strokeColor||"0 G";h.__private__.getStrokeColor=h.getDrawColor=function(){return re(yn)},h.__private__.setStrokeColor=h.setDrawColor=function(Q,Ie,st,gt){return yn=de({ch1:Q,ch2:Ie,ch3:st,ch4:gt,pdfColorType:"draw",precision:2}),J(yn),this};var ua=t.fillColor||"0 g";h.__private__.getFillColor=h.getFillColor=function(){return re(ua)},h.__private__.setFillColor=h.setFillColor=function(Q,Ie,st,gt){return ua=de({ch1:Q,ch2:Ie,ch3:st,ch4:gt,pdfColorType:"fill",precision:2}),J(ua),this};var ga=t.textColor||"0 g",Wi=h.__private__.getTextColor=h.getTextColor=function(){return re(ga)};h.__private__.setTextColor=h.setTextColor=function(Q,Ie,st,gt){return ga=de({ch1:Q,ch2:Ie,ch3:st,ch4:gt,pdfColorType:"text",precision:3}),this};var Xi=t.charSpace,kl=h.__private__.getCharSpace=h.getCharSpace=function(){return parseFloat(Xi||0)};h.__private__.setCharSpace=h.setCharSpace=function(Q){if(isNaN(Q))throw new Error("Invalid argument passed to jsPDF.setCharSpace");return Xi=Q,this};var xa=0;h.CapJoinStyles={0:0,butt:0,but:0,miter:0,1:1,round:1,rounded:1,circle:1,2:2,projecting:2,project:2,square:2,bevel:2},h.__private__.setLineCap=h.setLineCap=function(Q){var Ie=h.CapJoinStyles[Q];if(Ie===void 0)throw new Error("Line cap style of '"+Q+"' is not recognized. See or extend .CapJoinStyles property for valid styles");return xa=Ie,J(Ie+" J"),this};var Qn=0;h.__private__.setLineJoin=h.setLineJoin=function(Q){var Ie=h.CapJoinStyles[Q];if(Ie===void 0)throw new Error("Line join style of '"+Q+"' is not recognized. See or extend .CapJoinStyles property for valid styles");return Qn=Ie,J(Ie+" j"),this},h.__private__.setLineMiterLimit=h.__private__.setMiterLimit=h.setLineMiterLimit=h.setMiterLimit=function(Q){if(Q=Q||0,isNaN(Q))throw new Error("Invalid argument passed to jsPDF.setLineMiterLimit");return J(S(D(Q))+" M"),this},h.GState=I2,h.setGState=function(Q){(Q=typeof Q=="string"?Ae[Re[Q]]:du(null,Q)).equals(lt)||(J("/"+Q.id+" gs"),lt=Q)};var du=function(Q,Ie){if(!Q||!Re[Q]){var st=!1;for(var gt in Ae)if(Ae.hasOwnProperty(gt)&&Ae[gt].equals(Ie)){st=!0;break}if(st)Ie=Ae[gt];else{var Pt="GS"+(Object.keys(Ae).length+1).toString(10);Ae[Pt]=Ie,Ie.id=Pt}return Q&&(Re[Q]=Ie.id),xt.publish("addGState",Ie),Ie}};h.addGState=function(Q,Ie){return du(Q,Ie),this},h.saveGraphicsState=function(){return J("q"),ct.push({key:qe,size:Ue,color:ga}),this},h.restoreGraphicsState=function(){J("Q");var Q=ct.pop();return qe=Q.key,Ue=Q.size,ga=Q.color,lt=null,this},h.setCurrentTransformationMatrix=function(Q){return J(Q.toString()+" cm"),this},h.comment=function(Q){return J("#"+Q),this};var Fl=function(Q,Ie){var st=Q||0;Object.defineProperty(this,"x",{enumerable:!0,get:function(){return st},set:function(lr){isNaN(lr)||(st=parseFloat(lr))}});var gt=Ie||0;Object.defineProperty(this,"y",{enumerable:!0,get:function(){return gt},set:function(lr){isNaN(lr)||(gt=parseFloat(lr))}});var Pt="pt";return Object.defineProperty(this,"type",{enumerable:!0,get:function(){return Pt},set:function(lr){Pt=lr.toString()}}),this},Yi=function(Q,Ie,st,gt){Fl.call(this,Q,Ie),this.type="rect";var Pt=st||0;Object.defineProperty(this,"w",{enumerable:!0,get:function(){return Pt},set:function(vr){isNaN(vr)||(Pt=parseFloat(vr))}});var lr=gt||0;return Object.defineProperty(this,"h",{enumerable:!0,get:function(){return lr},set:function(vr){isNaN(vr)||(lr=parseFloat(vr))}}),this},Dc=function(){this.page=Ne,this.currentPage=G,this.pages=Ce.slice(0),this.pagesContext=De.slice(0),this.x=q,this.y=se,this.matrix=ye,this.width=sl(G),this.height=GA(G),this.outputDestination=We,this.id="",this.objectNumber=-1};Dc.prototype.restore=function(){Ne=this.page,G=this.currentPage,De=this.pagesContext,Ce=this.pages,q=this.x,se=this.y,ye=this.matrix,fu(G,this.width),il(G,this.height),We=this.outputDestination};var Rc=function(Q,Ie,st,gt,Pt){nt.push(new Dc),Ne=G=0,Ce=[],q=Q,se=Ie,ye=Pt,Nr([st,gt])};for(var uc in h.beginFormObject=function(Q,Ie,st,gt,Pt){return Rc(Q,Ie,st,gt,Pt),this},h.endFormObject=function(Q){return function(Ie){if(Mt[Ie])nt.pop().restore();else{var st=new Dc,gt="Xo"+(Object.keys(Et).length+1).toString(10);st.id=gt,Mt[Ie]=gt,Et[gt]=st,xt.publish("addFormObject",st),nt.pop().restore()}}(Q),this},h.doFormObject=function(Q,Ie){var st=Et[Mt[Q]];return J("q"),J(Ie.toString()+" cm"),J("/"+st.id+" Do"),J("Q"),this},h.getFormObject=function(Q){var Ie=Et[Mt[Q]];return{x:Ie.x,y:Ie.y,width:Ie.width,height:Ie.height,matrix:Ie.matrix}},h.save=function(Q,Ie){return Q=Q||"generated.pdf",(Ie=Ie||{}).returnPromise=Ie.returnPromise||!1,Ie.returnPromise===!1?(lp(or(Kr()),Q),typeof lp.unload=="function"&&Mn.setTimeout&&setTimeout(lp.unload,911),this):new Promise(function(st,gt){try{var Pt=lp(or(Kr()),Q);typeof lp.unload=="function"&&Mn.setTimeout&&setTimeout(lp.unload,911),st(Pt)}catch(lr){gt(lr.message)}})},rn.API)rn.API.hasOwnProperty(uc)&&(uc==="events"&&rn.API.events.length?function(Q,Ie){var st,gt,Pt;for(Pt=Ie.length-1;Pt!==-1;Pt--)st=Ie[Pt][0],gt=Ie[Pt][1],Q.subscribe.apply(Q,[st].concat(typeof gt=="function"?[gt]:gt))}(xt,rn.API.events):h[uc]=rn.API[uc]);function sl(Q){return De[Q].mediaBox.topRightX-De[Q].mediaBox.bottomLeftX}function fu(Q,Ie){De[Q].mediaBox.topRightX=Ie+De[Q].mediaBox.bottomLeftX}function GA(Q){return De[Q].mediaBox.topRightY-De[Q].mediaBox.bottomLeftY}function il(Q,Ie){De[Q].mediaBox.topRightY=Ie+De[Q].mediaBox.bottomLeftY}var Mc=h.getPageWidth=function(Q){return sl(Q=Q||G)/ge},Bf=h.setPageWidth=function(Q,Ie){fu(Q,Ie*ge)},co=h.getPageHeight=function(Q){return GA(Q=Q||G)/ge},zu=h.setPageHeight=function(Q,Ie){il(Q,Ie*ge)};return h.internal={pdfEscape:xr,getStyle:tt,getFont:Dr,getFontSize:At,getCharSpace:kl,getTextColor:Wi,getLineHeight:pn,getLineHeightFactor:Ir,getLineWidth:Er,write:Oe,getHorizontalCoordinate:pr,getVerticalCoordinate:jr,getCoordinateString:Fn,getVerticalCoordinateString:Sn,collections:{},newObject:Me,newAdditionalObject:R,newObjectDeferred:Ke,newObjectDeferredBegin:P,getFilters:Ge,putStream:rt,events:xt,scaleFactor:ge,pageSize:{getWidth:function(){return Mc(G)},setWidth:function(Q){Bf(G,Q)},getHeight:function(){return co(G)},setHeight:function(Q){zu(G,Q)}},encryptionOptions:d,encryption:Jt,getEncryptor:function(Q){return d!==null?Jt.encryptor(Q,0):function(Ie){return Ie}},output:dt,getNumberOfPages:Nn,get pages(){return Ce},out:J,f2:k,f3:B,getPageInfo:ar,getPageInfoByObjId:tr,getCurrentPageInfo:fr,getPDFVersion:p,Point:Fl,Rectangle:Yi,Matrix:Ee,hasHotfix:er},Object.defineProperty(h.internal.pageSize,"width",{get:function(){return Mc(G)},set:function(Q){Bf(G,Q)},enumerable:!0,configurable:!0}),Object.defineProperty(h.internal.pageSize,"height",{get:function(){return co(G)},set:function(Q){zu(G,Q)},enumerable:!0,configurable:!0}),(function(Q){for(var Ie=0,st=_e.length;Ie<st;Ie++){var gt=hr.call(this,Q[Ie][0],Q[Ie][1],Q[Ie][2],_e[Ie][3],!0);f===!1&&(A[gt]=!0);var Pt=Q[Ie][0].split("-");vt({id:gt,fontName:Pt[0],fontStyle:Pt[1]||""})}xt.publish("addFonts",{fonts:ue,dictionary:Le})}).call(h,_e),qe="F1",gr(a,r),xt.publish("initialized"),h}Bx.prototype.lsbFirstWord=function(t){return String.fromCharCode(255&t,t>>8&255,t>>16&255,t>>24&255)},Bx.prototype.toHexString=function(t){return t.split("").map(function(e){return("0"+(255&e.charCodeAt(0)).toString(16)).slice(-2)}).join("")},Bx.prototype.hexToBytes=function(t){for(var e=[],r=0;r<t.length;r+=2)e.push(String.fromCharCode(parseInt(t.substr(r,2),16)));return e.join("")},Bx.prototype.processOwnerPassword=function(t,e){return Qk(Uk(e).substr(0,5),t)},Bx.prototype.encryptor=function(t,e){var r=Uk(this.encryptionKey+String.fromCharCode(255&t,t>>8&255,t>>16&255,255&e,e>>8&255)).substr(0,10);return function(n){return Qk(r,n)}},I2.prototype.equals=function(t){var e,r="id,objectNumber,equals";if(!t||Za(t)!==Za(this))return!1;var n=0;for(e in this)if(!(r.indexOf(e)>=0)){if(this.hasOwnProperty(e)&&!t.hasOwnProperty(e)||this[e]!==t[e])return!1;n++}for(e in t)t.hasOwnProperty(e)&&r.indexOf(e)<0&&n--;return n===0},rn.API={events:[]},rn.version="3.0.4";var bi=rn.API,K6=1,Og=function(t){return t.replace(/\\/g,"\\\\").replace(/\(/g,"\\(").replace(/\)/g,"\\)")},cx=function(t){return t.replace(/\\\\/g,"\\").replace(/\\\(/g,"(").replace(/\\\)/g,")")},Hn=function(t){return t.toFixed(2)},d0=function(t){return t.toFixed(5)};bi.__acroform__={};var lu=function(t,e){t.prototype=Object.create(e.prototype),t.prototype.constructor=t},_V=function(t){return t*K6},Qf=function(t){var e=new Pre,r=ln.internal.getHeight(t)||0,n=ln.internal.getWidth(t)||0;return e.BBox=[0,0,Number(Hn(n)),Number(Hn(r))],e},Lje=bi.__acroform__.setBit=function(t,e){if(t=t||0,e=e||0,isNaN(t)||isNaN(e))throw new Error("Invalid arguments passed to jsPDF.API.__acroform__.setBit");return t|1<<e},Uje=bi.__acroform__.clearBit=function(t,e){if(t=t||0,e=e||0,isNaN(t)||isNaN(e))throw new Error("Invalid arguments passed to jsPDF.API.__acroform__.clearBit");return t&~(1<<e)},Qje=bi.__acroform__.getBit=function(t,e){if(isNaN(t)||isNaN(e))throw new Error("Invalid arguments passed to jsPDF.API.__acroform__.getBit");return t&1<<e?1:0},Qi=bi.__acroform__.getBitForPdf=function(t,e){if(isNaN(t)||isNaN(e))throw new Error("Invalid arguments passed to jsPDF.API.__acroform__.getBitForPdf");return Qje(t,e-1)},Vi=bi.__acroform__.setBitForPdf=function(t,e){if(isNaN(t)||isNaN(e))throw new Error("Invalid arguments passed to jsPDF.API.__acroform__.setBitForPdf");return Lje(t,e-1)},Hi=bi.__acroform__.clearBitForPdf=function(t,e){if(isNaN(t)||isNaN(e))throw new Error("Invalid arguments passed to jsPDF.API.__acroform__.clearBitForPdf");return Uje(t,e-1)},Vje=bi.__acroform__.calculateCoordinates=function(t,e){var r=e.internal.getHorizontalCoordinate,n=e.internal.getVerticalCoordinate,a=t[0],s=t[1],o=t[2],l=t[3],c={};return c.lowerLeft_X=r(a)||0,c.lowerLeft_Y=n(s+l)||0,c.upperRight_X=r(a+o)||0,c.upperRight_Y=n(s)||0,[Number(Hn(c.lowerLeft_X)),Number(Hn(c.lowerLeft_Y)),Number(Hn(c.upperRight_X)),Number(Hn(c.upperRight_Y))]},Hje=function(t){if(t.appearanceStreamContent)return t.appearanceStreamContent;if(t.V||t.DV){var e=[],r=t._V||t.DV,n=Vk(t,r),a=t.scope.internal.getFont(t.fontName,t.fontStyle).id;e.push("/Tx BMC"),e.push("q"),e.push("BT"),e.push(t.scope.__private__.encodeColorString(t.color)),e.push("/"+a+" "+Hn(n.fontSize)+" Tf"),e.push("1 0 0 1 0 0 Tm"),e.push(n.text),e.push("ET"),e.push("Q"),e.push("EMC");var s=Qf(t);return s.scope=t.scope,s.stream=e.join(`
`),s}},Vk=function(t,e){var r=t.fontSize===0?t.maxFontSize:t.fontSize,n={text:"",fontSize:""},a=(e=(e=e.substr(0,1)=="("?e.substr(1):e).substr(e.length-1)==")"?e.substr(0,e.length-1):e).split(" ");a=t.multiline?a.map(function(k){return k.split(`
`)}):a.map(function(k){return[k]});var s=r,o=ln.internal.getHeight(t)||0;o=o<0?-o:o;var l=ln.internal.getWidth(t)||0;l=l<0?-l:l;var c=function(k,B,D){if(k+1<a.length){var X=B+" "+a[k+1][0];return OC(X,t,D).width<=l-4}return!1};s++;e:for(;s>0;){e="",s--;var u,d,f=OC("3",t,s).height,A=t.multiline?o-s:(o-f)/2,h=A+=2,m=0,p=0,x=0;if(s<=0){e=`(...) Tj
`,e+="% Width of Text: "+OC(e,t,s=12).width+", FieldWidth:"+l+`
`;break}for(var v="",y=0,b=0;b<a.length;b++)if(a.hasOwnProperty(b)){var w=!1;if(a[b].length!==1&&x!==a[b].length-1){if((f+2)*(y+2)+2>o)continue e;v+=a[b][x],w=!0,p=b,b--}else{v=(v+=a[b][x]+" ").substr(v.length-1)==" "?v.substr(0,v.length-1):v;var j=parseInt(b),I=c(j,v,s),_=b>=a.length-1;if(I&&!_){v+=" ",x=0;continue}if(I||_){if(_)p=j;else if(t.multiline&&(f+2)*(y+2)+2>o)continue e}else{if(!t.multiline||(f+2)*(y+2)+2>o)continue e;p=j}}for(var S="",E=m;E<=p;E++){var T=a[E];if(t.multiline){if(E===p){S+=T[x]+" ",x=(x+1)%T.length;continue}if(E===m){S+=T[T.length-1]+" ";continue}}S+=T[0]+" "}switch(S=S.substr(S.length-1)==" "?S.substr(0,S.length-1):S,d=OC(S,t,s).width,t.textAlign){case"right":u=l-d-2;break;case"center":u=(l-d)/2;break;default:u=2}e+=Hn(u)+" "+Hn(h)+` Td
`,e+="("+Og(S)+`) Tj
`,e+=-Hn(u)+` 0 Td
`,h=-(s+2),d=0,m=w?p:p+1,y++,v=""}break}return n.text=e,n.fontSize=s,n},OC=function(t,e,r){var n=e.scope.internal.getFont(e.fontName,e.fontStyle),a=e.scope.getStringUnitWidth(t,{font:n,fontSize:parseFloat(r),charSpace:0})*parseFloat(r);return{height:e.scope.getStringUnitWidth("3",{font:n,fontSize:parseFloat(r),charSpace:0})*parseFloat(r)*1.5,width:a}},$je={fields:[],xForms:[],acroFormDictionaryRoot:null,printedOut:!1,internal:null,isInitialized:!1},Gje=function(t,e){var r={type:"reference",object:t};e.internal.getPageInfo(t.page).pageContext.annotations.find(function(n){return n.type===r.type&&n.object===r.object})===void 0&&e.internal.getPageInfo(t.page).pageContext.annotations.push(r)},Kje=function(t,e){if(e.scope=t,t.internal!==void 0&&(t.internal.acroformPlugin===void 0||t.internal.acroformPlugin.isInitialized===!1)){if(If.FieldNum=0,t.internal.acroformPlugin=JSON.parse(JSON.stringify($je)),t.internal.acroformPlugin.acroFormDictionaryRoot)throw new Error("Exception while creating AcroformDictionary");K6=t.internal.scaleFactor,t.internal.acroformPlugin.acroFormDictionaryRoot=new Bre,t.internal.acroformPlugin.acroFormDictionaryRoot.scope=t,t.internal.acroformPlugin.acroFormDictionaryRoot._eventID=t.internal.events.subscribe("postPutResources",function(){(function(r){r.internal.events.unsubscribe(r.internal.acroformPlugin.acroFormDictionaryRoot._eventID),delete r.internal.acroformPlugin.acroFormDictionaryRoot._eventID,r.internal.acroformPlugin.printedOut=!0})(t)}),t.internal.events.subscribe("buildDocument",function(){(function(r){r.internal.acroformPlugin.acroFormDictionaryRoot.objId=void 0;var n=r.internal.acroformPlugin.acroFormDictionaryRoot.Fields;for(var a in n)if(n.hasOwnProperty(a)){var s=n[a];s.objId=void 0,s.hasAnnotation&&Gje(s,r)}})(t)}),t.internal.events.subscribe("putCatalog",function(){(function(r){if(r.internal.acroformPlugin.acroFormDictionaryRoot===void 0)throw new Error("putCatalogCallback: Root missing.");r.internal.write("/AcroForm "+r.internal.acroformPlugin.acroFormDictionaryRoot.objId+" 0 R")})(t)}),t.internal.events.subscribe("postPutPages",function(r){(function(n,a){var s=!n;for(var o in n||(a.internal.newObjectDeferredBegin(a.internal.acroformPlugin.acroFormDictionaryRoot.objId,!0),a.internal.acroformPlugin.acroFormDictionaryRoot.putStream()),n=n||a.internal.acroformPlugin.acroFormDictionaryRoot.Kids)if(n.hasOwnProperty(o)){var l=n[o],c=[],u=l.Rect;if(l.Rect&&(l.Rect=Vje(l.Rect,a)),a.internal.newObjectDeferredBegin(l.objId,!0),l.DA=ln.createDefaultAppearanceStream(l),Za(l)==="object"&&typeof l.getKeyValueListForStream=="function"&&(c=l.getKeyValueListForStream()),l.Rect=u,l.hasAppearanceStream&&!l.appearanceStreamContent){var d=Hje(l);c.push({key:"AP",value:"<</N "+d+">>"}),a.internal.acroformPlugin.xForms.push(d)}if(l.appearanceStreamContent){var f="";for(var A in l.appearanceStreamContent)if(l.appearanceStreamContent.hasOwnProperty(A)){var h=l.appearanceStreamContent[A];if(f+="/"+A+" ",f+="<<",Object.keys(h).length>=1||Array.isArray(h)){for(var o in h)if(h.hasOwnProperty(o)){var m=h[o];typeof m=="function"&&(m=m.call(a,l)),f+="/"+o+" "+m+" ",a.internal.acroformPlugin.xForms.indexOf(m)>=0||a.internal.acroformPlugin.xForms.push(m)}}else typeof(m=h)=="function"&&(m=m.call(a,l)),f+="/"+o+" "+m,a.internal.acroformPlugin.xForms.indexOf(m)>=0||a.internal.acroformPlugin.xForms.push(m);f+=">>"}c.push({key:"AP",value:`<<
`+f+">>"})}a.internal.putStream({additionalKeyValues:c,objectId:l.objId}),a.internal.out("endobj")}s&&function(p,x){for(var v in p)if(p.hasOwnProperty(v)){var y=v,b=p[v];x.internal.newObjectDeferredBegin(b.objId,!0),Za(b)==="object"&&typeof b.putStream=="function"&&b.putStream(),delete p[y]}}(a.internal.acroformPlugin.xForms,a)})(r,t)}),t.internal.acroformPlugin.isInitialized=!0}},jre=bi.__acroform__.arrayToPdfArray=function(t,e,r){var n=function(o){return o};if(Array.isArray(t)){for(var a="[",s=0;s<t.length;s++)switch(s!==0&&(a+=" "),Za(t[s])){case"boolean":case"number":case"object":a+=t[s].toString();break;case"string":t[s].substr(0,1)!=="/"?(e!==void 0&&r&&(n=r.internal.getEncryptor(e)),a+="("+Og(n(t[s].toString()))+")"):a+=t[s].toString()}return a+"]"}throw new Error("Invalid argument passed to jsPDF.__acroform__.arrayToPdfArray")},h5=function(t,e,r){var n=function(a){return a};return e!==void 0&&r&&(n=r.internal.getEncryptor(e)),(t=t||"").toString(),"("+Og(n(t))+")"},Yf=function(){this._objId=void 0,this._scope=void 0,Object.defineProperty(this,"objId",{get:function(){if(this._objId===void 0){if(this.scope===void 0)return;this._objId=this.scope.internal.newObjectDeferred()}return this._objId},set:function(t){this._objId=t}}),Object.defineProperty(this,"scope",{value:this._scope,writable:!0})};Yf.prototype.toString=function(){return this.objId+" 0 R"},Yf.prototype.putStream=function(){var t=this.getKeyValueListForStream();this.scope.internal.putStream({data:this.stream,additionalKeyValues:t,objectId:this.objId}),this.scope.internal.out("endobj")},Yf.prototype.getKeyValueListForStream=function(){var t=[],e=Object.getOwnPropertyNames(this).filter(function(s){return s!="content"&&s!="appearanceStreamContent"&&s!="scope"&&s!="objId"&&s.substring(0,1)!="_"});for(var r in e)if(Object.getOwnPropertyDescriptor(this,e[r]).configurable===!1){var n=e[r],a=this[n];a&&(Array.isArray(a)?t.push({key:n,value:jre(a,this.objId,this.scope)}):a instanceof Yf?(a.scope=this.scope,t.push({key:n,value:a.objId+" 0 R"})):typeof a!="function"&&t.push({key:n,value:a}))}return t};var Pre=function(){Yf.call(this),Object.defineProperty(this,"Type",{value:"/XObject",configurable:!1,writable:!0}),Object.defineProperty(this,"Subtype",{value:"/Form",configurable:!1,writable:!0}),Object.defineProperty(this,"FormType",{value:1,configurable:!1,writable:!0});var t,e=[];Object.defineProperty(this,"BBox",{configurable:!1,get:function(){return e},set:function(r){e=r}}),Object.defineProperty(this,"Resources",{value:"2 0 R",configurable:!1,writable:!0}),Object.defineProperty(this,"stream",{enumerable:!1,configurable:!0,set:function(r){t=r.trim()},get:function(){return t||null}})};lu(Pre,Yf);var Bre=function(){Yf.call(this);var t,e=[];Object.defineProperty(this,"Kids",{enumerable:!1,configurable:!0,get:function(){return e.length>0?e:void 0}}),Object.defineProperty(this,"Fields",{enumerable:!1,configurable:!1,get:function(){return e}}),Object.defineProperty(this,"DA",{enumerable:!1,configurable:!1,get:function(){if(t){var r=function(n){return n};return this.scope&&(r=this.scope.internal.getEncryptor(this.objId)),"("+Og(r(t))+")"}},set:function(r){t=r}})};lu(Bre,Yf);var If=function t(){Yf.call(this);var e=4;Object.defineProperty(this,"F",{enumerable:!1,configurable:!1,get:function(){return e},set:function(v){if(isNaN(v))throw new Error('Invalid value "'+v+'" for attribute F supplied.');e=v}}),Object.defineProperty(this,"showWhenPrinted",{enumerable:!0,configurable:!0,get:function(){return!!Qi(e,3)},set:function(v){v?this.F=Vi(e,3):this.F=Hi(e,3)}});var r=0;Object.defineProperty(this,"Ff",{enumerable:!1,configurable:!1,get:function(){return r},set:function(v){if(isNaN(v))throw new Error('Invalid value "'+v+'" for attribute Ff supplied.');r=v}});var n=[];Object.defineProperty(this,"Rect",{enumerable:!1,configurable:!1,get:function(){if(n.length!==0)return n},set:function(v){n=v!==void 0?v:[]}}),Object.defineProperty(this,"x",{enumerable:!0,configurable:!0,get:function(){return!n||isNaN(n[0])?0:n[0]},set:function(v){n[0]=v}}),Object.defineProperty(this,"y",{enumerable:!0,configurable:!0,get:function(){return!n||isNaN(n[1])?0:n[1]},set:function(v){n[1]=v}}),Object.defineProperty(this,"width",{enumerable:!0,configurable:!0,get:function(){return!n||isNaN(n[2])?0:n[2]},set:function(v){n[2]=v}}),Object.defineProperty(this,"height",{enumerable:!0,configurable:!0,get:function(){return!n||isNaN(n[3])?0:n[3]},set:function(v){n[3]=v}});var a="";Object.defineProperty(this,"FT",{enumerable:!0,configurable:!1,get:function(){return a},set:function(v){switch(v){case"/Btn":case"/Tx":case"/Ch":case"/Sig":a=v;break;default:throw new Error('Invalid value "'+v+'" for attribute FT supplied.')}}});var s=null;Object.defineProperty(this,"T",{enumerable:!0,configurable:!1,get:function(){if(!s||s.length<1){if(this instanceof kS)return;s="FieldObject"+t.FieldNum++}var v=function(y){return y};return this.scope&&(v=this.scope.internal.getEncryptor(this.objId)),"("+Og(v(s))+")"},set:function(v){s=v.toString()}}),Object.defineProperty(this,"fieldName",{configurable:!0,enumerable:!0,get:function(){return s},set:function(v){s=v}});var o="helvetica";Object.defineProperty(this,"fontName",{enumerable:!0,configurable:!0,get:function(){return o},set:function(v){o=v}});var l="normal";Object.defineProperty(this,"fontStyle",{enumerable:!0,configurable:!0,get:function(){return l},set:function(v){l=v}});var c=0;Object.defineProperty(this,"fontSize",{enumerable:!0,configurable:!0,get:function(){return c},set:function(v){c=v}});var u=void 0;Object.defineProperty(this,"maxFontSize",{enumerable:!0,configurable:!0,get:function(){return u===void 0?50/K6:u},set:function(v){u=v}});var d="black";Object.defineProperty(this,"color",{enumerable:!0,configurable:!0,get:function(){return d},set:function(v){d=v}});var f="/F1 0 Tf 0 g";Object.defineProperty(this,"DA",{enumerable:!0,configurable:!1,get:function(){if(!(!f||this instanceof kS||this instanceof dm))return h5(f,this.objId,this.scope)},set:function(v){v=v.toString(),f=v}});var A=null;Object.defineProperty(this,"DV",{enumerable:!1,configurable:!1,get:function(){if(A)return this instanceof bo==0?h5(A,this.objId,this.scope):A},set:function(v){v=v.toString(),A=this instanceof bo==0?v.substr(0,1)==="("?cx(v.substr(1,v.length-2)):cx(v):v}}),Object.defineProperty(this,"defaultValue",{enumerable:!0,configurable:!0,get:function(){return this instanceof bo==1?cx(A.substr(1,A.length-1)):A},set:function(v){v=v.toString(),A=this instanceof bo==1?"/"+v:v}});var h=null;Object.defineProperty(this,"_V",{enumerable:!1,configurable:!1,get:function(){if(h)return h},set:function(v){this.V=v}}),Object.defineProperty(this,"V",{enumerable:!1,configurable:!1,get:function(){if(h)return this instanceof bo==0?h5(h,this.objId,this.scope):h},set:function(v){v=v.toString(),h=this instanceof bo==0?v.substr(0,1)==="("?cx(v.substr(1,v.length-2)):cx(v):v}}),Object.defineProperty(this,"value",{enumerable:!0,configurable:!0,get:function(){return this instanceof bo==1?cx(h.substr(1,h.length-1)):h},set:function(v){v=v.toString(),h=this instanceof bo==1?"/"+v:v}}),Object.defineProperty(this,"hasAnnotation",{enumerable:!0,configurable:!0,get:function(){return this.Rect}}),Object.defineProperty(this,"Type",{enumerable:!0,configurable:!1,get:function(){return this.hasAnnotation?"/Annot":null}}),Object.defineProperty(this,"Subtype",{enumerable:!0,configurable:!1,get:function(){return this.hasAnnotation?"/Widget":null}});var m,p=!1;Object.defineProperty(this,"hasAppearanceStream",{enumerable:!0,configurable:!0,get:function(){return p},set:function(v){v=!!v,p=v}}),Object.defineProperty(this,"page",{enumerable:!0,configurable:!0,get:function(){if(m)return m},set:function(v){m=v}}),Object.defineProperty(this,"readOnly",{enumerable:!0,configurable:!0,get:function(){return!!Qi(this.Ff,1)},set:function(v){v?this.Ff=Vi(this.Ff,1):this.Ff=Hi(this.Ff,1)}}),Object.defineProperty(this,"required",{enumerable:!0,configurable:!0,get:function(){return!!Qi(this.Ff,2)},set:function(v){v?this.Ff=Vi(this.Ff,2):this.Ff=Hi(this.Ff,2)}}),Object.defineProperty(this,"noExport",{enumerable:!0,configurable:!0,get:function(){return!!Qi(this.Ff,3)},set:function(v){v?this.Ff=Vi(this.Ff,3):this.Ff=Hi(this.Ff,3)}});var x=null;Object.defineProperty(this,"Q",{enumerable:!0,configurable:!1,get:function(){if(x!==null)return x},set:function(v){if([0,1,2].indexOf(v)===-1)throw new Error('Invalid value "'+v+'" for attribute Q supplied.');x=v}}),Object.defineProperty(this,"textAlign",{get:function(){var v;switch(x){case 0:default:v="left";break;case 1:v="center";break;case 2:v="right"}return v},configurable:!0,enumerable:!0,set:function(v){switch(v){case"right":case 2:x=2;break;case"center":case 1:x=1;break;default:x=0}}})};lu(If,Yf);var Op=function(){If.call(this),this.FT="/Ch",this.V="()",this.fontName="zapfdingbats";var t=0;Object.defineProperty(this,"TI",{enumerable:!0,configurable:!1,get:function(){return t},set:function(r){t=r}}),Object.defineProperty(this,"topIndex",{enumerable:!0,configurable:!0,get:function(){return t},set:function(r){t=r}});var e=[];Object.defineProperty(this,"Opt",{enumerable:!0,configurable:!1,get:function(){return jre(e,this.objId,this.scope)},set:function(r){var n,a;a=[],typeof(n=r)=="string"&&(a=function(s,o,l){l||(l=1);for(var c,u=[];c=o.exec(s);)u.push(c[l]);return u}(n,/\((.*?)\)/g)),e=a}}),this.getOptions=function(){return e},this.setOptions=function(r){e=r,this.sort&&e.sort()},this.addOption=function(r){r=(r=r||"").toString(),e.push(r),this.sort&&e.sort()},this.removeOption=function(r,n){for(n=n||!1,r=(r=r||"").toString();e.indexOf(r)!==-1&&(e.splice(e.indexOf(r),1),n!==!1););},Object.defineProperty(this,"combo",{enumerable:!0,configurable:!0,get:function(){return!!Qi(this.Ff,18)},set:function(r){r?this.Ff=Vi(this.Ff,18):this.Ff=Hi(this.Ff,18)}}),Object.defineProperty(this,"edit",{enumerable:!0,configurable:!0,get:function(){return!!Qi(this.Ff,19)},set:function(r){this.combo===!0&&(r?this.Ff=Vi(this.Ff,19):this.Ff=Hi(this.Ff,19))}}),Object.defineProperty(this,"sort",{enumerable:!0,configurable:!0,get:function(){return!!Qi(this.Ff,20)},set:function(r){r?(this.Ff=Vi(this.Ff,20),e.sort()):this.Ff=Hi(this.Ff,20)}}),Object.defineProperty(this,"multiSelect",{enumerable:!0,configurable:!0,get:function(){return!!Qi(this.Ff,22)},set:function(r){r?this.Ff=Vi(this.Ff,22):this.Ff=Hi(this.Ff,22)}}),Object.defineProperty(this,"doNotSpellCheck",{enumerable:!0,configurable:!0,get:function(){return!!Qi(this.Ff,23)},set:function(r){r?this.Ff=Vi(this.Ff,23):this.Ff=Hi(this.Ff,23)}}),Object.defineProperty(this,"commitOnSelChange",{enumerable:!0,configurable:!0,get:function(){return!!Qi(this.Ff,27)},set:function(r){r?this.Ff=Vi(this.Ff,27):this.Ff=Hi(this.Ff,27)}}),this.hasAppearanceStream=!1};lu(Op,If);var Dp=function(){Op.call(this),this.fontName="helvetica",this.combo=!1};lu(Dp,Op);var Rp=function(){Dp.call(this),this.combo=!0};lu(Rp,Dp);var Eb=function(){Rp.call(this),this.edit=!0};lu(Eb,Rp);var bo=function(){If.call(this),this.FT="/Btn",Object.defineProperty(this,"noToggleToOff",{enumerable:!0,configurable:!0,get:function(){return!!Qi(this.Ff,15)},set:function(r){r?this.Ff=Vi(this.Ff,15):this.Ff=Hi(this.Ff,15)}}),Object.defineProperty(this,"radio",{enumerable:!0,configurable:!0,get:function(){return!!Qi(this.Ff,16)},set:function(r){r?this.Ff=Vi(this.Ff,16):this.Ff=Hi(this.Ff,16)}}),Object.defineProperty(this,"pushButton",{enumerable:!0,configurable:!0,get:function(){return!!Qi(this.Ff,17)},set:function(r){r?this.Ff=Vi(this.Ff,17):this.Ff=Hi(this.Ff,17)}}),Object.defineProperty(this,"radioIsUnison",{enumerable:!0,configurable:!0,get:function(){return!!Qi(this.Ff,26)},set:function(r){r?this.Ff=Vi(this.Ff,26):this.Ff=Hi(this.Ff,26)}});var t,e={};Object.defineProperty(this,"MK",{enumerable:!1,configurable:!1,get:function(){var r=function(s){return s};if(this.scope&&(r=this.scope.internal.getEncryptor(this.objId)),Object.keys(e).length!==0){var n,a=[];for(n in a.push("<<"),e)a.push("/"+n+" ("+Og(r(e[n]))+")");return a.push(">>"),a.join(`
`)}},set:function(r){Za(r)==="object"&&(e=r)}}),Object.defineProperty(this,"caption",{enumerable:!0,configurable:!0,get:function(){return e.CA||""},set:function(r){typeof r=="string"&&(e.CA=r)}}),Object.defineProperty(this,"AS",{enumerable:!1,configurable:!1,get:function(){return t},set:function(r){t=r}}),Object.defineProperty(this,"appearanceState",{enumerable:!0,configurable:!0,get:function(){return t.substr(1,t.length-1)},set:function(r){t="/"+r}})};lu(bo,If);var Sb=function(){bo.call(this),this.pushButton=!0};lu(Sb,bo);var Mp=function(){bo.call(this),this.radio=!0,this.pushButton=!1;var t=[];Object.defineProperty(this,"Kids",{enumerable:!0,configurable:!1,get:function(){return t},set:function(e){t=e!==void 0?e:[]}})};lu(Mp,bo);var kS=function(){var t,e;If.call(this),Object.defineProperty(this,"Parent",{enumerable:!1,configurable:!1,get:function(){return t},set:function(a){t=a}}),Object.defineProperty(this,"optionName",{enumerable:!1,configurable:!0,get:function(){return e},set:function(a){e=a}});var r,n={};Object.defineProperty(this,"MK",{enumerable:!1,configurable:!1,get:function(){var a=function(l){return l};this.scope&&(a=this.scope.internal.getEncryptor(this.objId));var s,o=[];for(s in o.push("<<"),n)o.push("/"+s+" ("+Og(a(n[s]))+")");return o.push(">>"),o.join(`
`)},set:function(a){Za(a)==="object"&&(n=a)}}),Object.defineProperty(this,"caption",{enumerable:!0,configurable:!0,get:function(){return n.CA||""},set:function(a){typeof a=="string"&&(n.CA=a)}}),Object.defineProperty(this,"AS",{enumerable:!1,configurable:!1,get:function(){return r},set:function(a){r=a}}),Object.defineProperty(this,"appearanceState",{enumerable:!0,configurable:!0,get:function(){return r.substr(1,r.length-1)},set:function(a){r="/"+a}}),this.caption="l",this.appearanceState="Off",this._AppearanceType=ln.RadioButton.Circle,this.appearanceStreamContent=this._AppearanceType.createAppearanceStream(this.optionName)};lu(kS,If),Mp.prototype.setAppearance=function(t){if(!("createAppearanceStream"in t)||!("getCA"in t))throw new Error("Couldn't assign Appearance to RadioButton. Appearance was Invalid!");for(var e in this.Kids)if(this.Kids.hasOwnProperty(e)){var r=this.Kids[e];r.appearanceStreamContent=t.createAppearanceStream(r.optionName),r.caption=t.getCA()}},Mp.prototype.createOption=function(t){var e=new kS;return e.Parent=this,e.optionName=t,this.Kids.push(e),qje.call(this.scope,e),e};var Ib=function(){bo.call(this),this.fontName="zapfdingbats",this.caption="3",this.appearanceState="On",this.value="On",this.textAlign="center",this.appearanceStreamContent=ln.CheckBox.createAppearanceStream()};lu(Ib,bo);var dm=function(){If.call(this),this.FT="/Tx",Object.defineProperty(this,"multiline",{enumerable:!0,configurable:!0,get:function(){return!!Qi(this.Ff,13)},set:function(e){e?this.Ff=Vi(this.Ff,13):this.Ff=Hi(this.Ff,13)}}),Object.defineProperty(this,"fileSelect",{enumerable:!0,configurable:!0,get:function(){return!!Qi(this.Ff,21)},set:function(e){e?this.Ff=Vi(this.Ff,21):this.Ff=Hi(this.Ff,21)}}),Object.defineProperty(this,"doNotSpellCheck",{enumerable:!0,configurable:!0,get:function(){return!!Qi(this.Ff,23)},set:function(e){e?this.Ff=Vi(this.Ff,23):this.Ff=Hi(this.Ff,23)}}),Object.defineProperty(this,"doNotScroll",{enumerable:!0,configurable:!0,get:function(){return!!Qi(this.Ff,24)},set:function(e){e?this.Ff=Vi(this.Ff,24):this.Ff=Hi(this.Ff,24)}}),Object.defineProperty(this,"comb",{enumerable:!0,configurable:!0,get:function(){return!!Qi(this.Ff,25)},set:function(e){e?this.Ff=Vi(this.Ff,25):this.Ff=Hi(this.Ff,25)}}),Object.defineProperty(this,"richText",{enumerable:!0,configurable:!0,get:function(){return!!Qi(this.Ff,26)},set:function(e){e?this.Ff=Vi(this.Ff,26):this.Ff=Hi(this.Ff,26)}});var t=null;Object.defineProperty(this,"MaxLen",{enumerable:!0,configurable:!1,get:function(){return t},set:function(e){t=e}}),Object.defineProperty(this,"maxLength",{enumerable:!0,configurable:!0,get:function(){return t},set:function(e){Number.isInteger(e)&&(t=e)}}),Object.defineProperty(this,"hasAppearanceStream",{enumerable:!0,configurable:!0,get:function(){return this.V||this.DV}})};lu(dm,If);var jb=function(){dm.call(this),Object.defineProperty(this,"password",{enumerable:!0,configurable:!0,get:function(){return!!Qi(this.Ff,14)},set:function(t){t?this.Ff=Vi(this.Ff,14):this.Ff=Hi(this.Ff,14)}}),this.password=!0};lu(jb,dm);var ln={CheckBox:{createAppearanceStream:function(){return{N:{On:ln.CheckBox.YesNormal},D:{On:ln.CheckBox.YesPushDown,Off:ln.CheckBox.OffPushDown}}},YesPushDown:function(t){var e=Qf(t);e.scope=t.scope;var r=[],n=t.scope.internal.getFont(t.fontName,t.fontStyle).id,a=t.scope.__private__.encodeColorString(t.color),s=Vk(t,t.caption);return r.push("0.749023 g"),r.push("0 0 "+Hn(ln.internal.getWidth(t))+" "+Hn(ln.internal.getHeight(t))+" re"),r.push("f"),r.push("BMC"),r.push("q"),r.push("0 0 1 rg"),r.push("/"+n+" "+Hn(s.fontSize)+" Tf "+a),r.push("BT"),r.push(s.text),r.push("ET"),r.push("Q"),r.push("EMC"),e.stream=r.join(`
`),e},YesNormal:function(t){var e=Qf(t);e.scope=t.scope;var r=t.scope.internal.getFont(t.fontName,t.fontStyle).id,n=t.scope.__private__.encodeColorString(t.color),a=[],s=ln.internal.getHeight(t),o=ln.internal.getWidth(t),l=Vk(t,t.caption);return a.push("1 g"),a.push("0 0 "+Hn(o)+" "+Hn(s)+" re"),a.push("f"),a.push("q"),a.push("0 0 1 rg"),a.push("0 0 "+Hn(o-1)+" "+Hn(s-1)+" re"),a.push("W"),a.push("n"),a.push("0 g"),a.push("BT"),a.push("/"+r+" "+Hn(l.fontSize)+" Tf "+n),a.push(l.text),a.push("ET"),a.push("Q"),e.stream=a.join(`
`),e},OffPushDown:function(t){var e=Qf(t);e.scope=t.scope;var r=[];return r.push("0.749023 g"),r.push("0 0 "+Hn(ln.internal.getWidth(t))+" "+Hn(ln.internal.getHeight(t))+" re"),r.push("f"),e.stream=r.join(`
`),e}},RadioButton:{Circle:{createAppearanceStream:function(t){var e={D:{Off:ln.RadioButton.Circle.OffPushDown},N:{}};return e.N[t]=ln.RadioButton.Circle.YesNormal,e.D[t]=ln.RadioButton.Circle.YesPushDown,e},getCA:function(){return"l"},YesNormal:function(t){var e=Qf(t);e.scope=t.scope;var r=[],n=ln.internal.getWidth(t)<=ln.internal.getHeight(t)?ln.internal.getWidth(t)/4:ln.internal.getHeight(t)/4;n=Number((.9*n).toFixed(5));var a=ln.internal.Bezier_C,s=Number((n*a).toFixed(5));return r.push("q"),r.push("1 0 0 1 "+d0(ln.internal.getWidth(t)/2)+" "+d0(ln.internal.getHeight(t)/2)+" cm"),r.push(n+" 0 m"),r.push(n+" "+s+" "+s+" "+n+" 0 "+n+" c"),r.push("-"+s+" "+n+" -"+n+" "+s+" -"+n+" 0 c"),r.push("-"+n+" -"+s+" -"+s+" -"+n+" 0 -"+n+" c"),r.push(s+" -"+n+" "+n+" -"+s+" "+n+" 0 c"),r.push("f"),r.push("Q"),e.stream=r.join(`
`),e},YesPushDown:function(t){var e=Qf(t);e.scope=t.scope;var r=[],n=ln.internal.getWidth(t)<=ln.internal.getHeight(t)?ln.internal.getWidth(t)/4:ln.internal.getHeight(t)/4;n=Number((.9*n).toFixed(5));var a=Number((2*n).toFixed(5)),s=Number((a*ln.internal.Bezier_C).toFixed(5)),o=Number((n*ln.internal.Bezier_C).toFixed(5));return r.push("0.749023 g"),r.push("q"),r.push("1 0 0 1 "+d0(ln.internal.getWidth(t)/2)+" "+d0(ln.internal.getHeight(t)/2)+" cm"),r.push(a+" 0 m"),r.push(a+" "+s+" "+s+" "+a+" 0 "+a+" c"),r.push("-"+s+" "+a+" -"+a+" "+s+" -"+a+" 0 c"),r.push("-"+a+" -"+s+" -"+s+" -"+a+" 0 -"+a+" c"),r.push(s+" -"+a+" "+a+" -"+s+" "+a+" 0 c"),r.push("f"),r.push("Q"),r.push("0 g"),r.push("q"),r.push("1 0 0 1 "+d0(ln.internal.getWidth(t)/2)+" "+d0(ln.internal.getHeight(t)/2)+" cm"),r.push(n+" 0 m"),r.push(n+" "+o+" "+o+" "+n+" 0 "+n+" c"),r.push("-"+o+" "+n+" -"+n+" "+o+" -"+n+" 0 c"),r.push("-"+n+" -"+o+" -"+o+" -"+n+" 0 -"+n+" c"),r.push(o+" -"+n+" "+n+" -"+o+" "+n+" 0 c"),r.push("f"),r.push("Q"),e.stream=r.join(`
`),e},OffPushDown:function(t){var e=Qf(t);e.scope=t.scope;var r=[],n=ln.internal.getWidth(t)<=ln.internal.getHeight(t)?ln.internal.getWidth(t)/4:ln.internal.getHeight(t)/4;n=Number((.9*n).toFixed(5));var a=Number((2*n).toFixed(5)),s=Number((a*ln.internal.Bezier_C).toFixed(5));return r.push("0.749023 g"),r.push("q"),r.push("1 0 0 1 "+d0(ln.internal.getWidth(t)/2)+" "+d0(ln.internal.getHeight(t)/2)+" cm"),r.push(a+" 0 m"),r.push(a+" "+s+" "+s+" "+a+" 0 "+a+" c"),r.push("-"+s+" "+a+" -"+a+" "+s+" -"+a+" 0 c"),r.push("-"+a+" -"+s+" -"+s+" -"+a+" 0 -"+a+" c"),r.push(s+" -"+a+" "+a+" -"+s+" "+a+" 0 c"),r.push("f"),r.push("Q"),e.stream=r.join(`
`),e}},Cross:{createAppearanceStream:function(t){var e={D:{Off:ln.RadioButton.Cross.OffPushDown},N:{}};return e.N[t]=ln.RadioButton.Cross.YesNormal,e.D[t]=ln.RadioButton.Cross.YesPushDown,e},getCA:function(){return"8"},YesNormal:function(t){var e=Qf(t);e.scope=t.scope;var r=[],n=ln.internal.calculateCross(t);return r.push("q"),r.push("1 1 "+Hn(ln.internal.getWidth(t)-2)+" "+Hn(ln.internal.getHeight(t)-2)+" re"),r.push("W"),r.push("n"),r.push(Hn(n.x1.x)+" "+Hn(n.x1.y)+" m"),r.push(Hn(n.x2.x)+" "+Hn(n.x2.y)+" l"),r.push(Hn(n.x4.x)+" "+Hn(n.x4.y)+" m"),r.push(Hn(n.x3.x)+" "+Hn(n.x3.y)+" l"),r.push("s"),r.push("Q"),e.stream=r.join(`
`),e},YesPushDown:function(t){var e=Qf(t);e.scope=t.scope;var r=ln.internal.calculateCross(t),n=[];return n.push("0.749023 g"),n.push("0 0 "+Hn(ln.internal.getWidth(t))+" "+Hn(ln.internal.getHeight(t))+" re"),n.push("f"),n.push("q"),n.push("1 1 "+Hn(ln.internal.getWidth(t)-2)+" "+Hn(ln.internal.getHeight(t)-2)+" re"),n.push("W"),n.push("n"),n.push(Hn(r.x1.x)+" "+Hn(r.x1.y)+" m"),n.push(Hn(r.x2.x)+" "+Hn(r.x2.y)+" l"),n.push(Hn(r.x4.x)+" "+Hn(r.x4.y)+" m"),n.push(Hn(r.x3.x)+" "+Hn(r.x3.y)+" l"),n.push("s"),n.push("Q"),e.stream=n.join(`
`),e},OffPushDown:function(t){var e=Qf(t);e.scope=t.scope;var r=[];return r.push("0.749023 g"),r.push("0 0 "+Hn(ln.internal.getWidth(t))+" "+Hn(ln.internal.getHeight(t))+" re"),r.push("f"),e.stream=r.join(`
`),e}}},createDefaultAppearanceStream:function(t){var e=t.scope.internal.getFont(t.fontName,t.fontStyle).id,r=t.scope.__private__.encodeColorString(t.color);return"/"+e+" "+t.fontSize+" Tf "+r}};ln.internal={Bezier_C:.551915024494,calculateCross:function(t){var e=ln.internal.getWidth(t),r=ln.internal.getHeight(t),n=Math.min(e,r);return{x1:{x:(e-n)/2,y:(r-n)/2+n},x2:{x:(e-n)/2+n,y:(r-n)/2},x3:{x:(e-n)/2,y:(r-n)/2},x4:{x:(e-n)/2+n,y:(r-n)/2+n}}}},ln.internal.getWidth=function(t){var e=0;return Za(t)==="object"&&(e=_V(t.Rect[2])),e},ln.internal.getHeight=function(t){var e=0;return Za(t)==="object"&&(e=_V(t.Rect[3])),e};var qje=bi.addField=function(t){if(Kje(this,t),!(t instanceof If))throw new Error("Invalid argument passed to jsPDF.addField.");var e;return(e=t).scope.internal.acroformPlugin.printedOut&&(e.scope.internal.acroformPlugin.printedOut=!1,e.scope.internal.acroformPlugin.acroFormDictionaryRoot=null),e.scope.internal.acroformPlugin.acroFormDictionaryRoot.Fields.push(e),t.page=t.scope.internal.getCurrentPageInfo().pageNumber,this};bi.AcroFormChoiceField=Op,bi.AcroFormListBox=Dp,bi.AcroFormComboBox=Rp,bi.AcroFormEditBox=Eb,bi.AcroFormButton=bo,bi.AcroFormPushButton=Sb,bi.AcroFormRadioButton=Mp,bi.AcroFormCheckBox=Ib,bi.AcroFormTextField=dm,bi.AcroFormPasswordField=jb,bi.AcroFormAppearance=ln,bi.AcroForm={ChoiceField:Op,ListBox:Dp,ComboBox:Rp,EditBox:Eb,Button:bo,PushButton:Sb,RadioButton:Mp,CheckBox:Ib,TextField:dm,PasswordField:jb,Appearance:ln},rn.AcroForm={ChoiceField:Op,ListBox:Dp,ComboBox:Rp,EditBox:Eb,Button:bo,PushButton:Sb,RadioButton:Mp,CheckBox:Ib,TextField:dm,PasswordField:jb,Appearance:ln};var zje=rn.AcroForm;function Tre(t){return t.reduce(function(e,r,n){return e[r]=n,e},{})}(function(t){var e="addImage_";t.__addimage__={};var r="UNKNOWN",n={PNG:[[137,80,78,71]],TIFF:[[77,77,0,42],[73,73,42,0]],JPEG:[[255,216,255,224,void 0,void 0,74,70,73,70,0],[255,216,255,225,void 0,void 0,69,120,105,102,0,0],[255,216,255,219],[255,216,255,238]],JPEG2000:[[0,0,0,12,106,80,32,32]],GIF87a:[[71,73,70,56,55,97]],GIF89a:[[71,73,70,56,57,97]],WEBP:[[82,73,70,70,void 0,void 0,void 0,void 0,87,69,66,80]],BMP:[[66,77],[66,65],[67,73],[67,80],[73,67],[80,84]]},a=t.__addimage__.getImageFileTypeByImageData=function(k,B){var D,X,me,pe,he,ve=r;if((B=B||r)==="RGBA"||k.data!==void 0&&k.data instanceof Uint8ClampedArray&&"height"in k&&"width"in k)return"RGBA";if(I(k))for(he in n)for(me=n[he],D=0;D<me.length;D+=1){for(pe=!0,X=0;X<me[D].length;X+=1)if(me[D][X]!==void 0&&me[D][X]!==k[X]){pe=!1;break}if(pe===!0){ve=he;break}}else for(he in n)for(me=n[he],D=0;D<me.length;D+=1){for(pe=!0,X=0;X<me[D].length;X+=1)if(me[D][X]!==void 0&&me[D][X]!==k.charCodeAt(X)){pe=!1;break}if(pe===!0){ve=he;break}}return ve===r&&B!==r&&(ve=B),ve},s=function k(B){for(var D=this.internal.write,X=this.internal.putStream,me=(0,this.internal.getFilters)();me.indexOf("FlateEncode")!==-1;)me.splice(me.indexOf("FlateEncode"),1);B.objectId=this.internal.newObject();var pe=[];if(pe.push({key:"Type",value:"/XObject"}),pe.push({key:"Subtype",value:"/Image"}),pe.push({key:"Width",value:B.width}),pe.push({key:"Height",value:B.height}),B.colorSpace===v.INDEXED?pe.push({key:"ColorSpace",value:"[/Indexed /DeviceRGB "+(B.palette.length/3-1)+" "+("sMask"in B&&B.sMask!==void 0?B.objectId+2:B.objectId+1)+" 0 R]"}):(pe.push({key:"ColorSpace",value:"/"+B.colorSpace}),B.colorSpace===v.DEVICE_CMYK&&pe.push({key:"Decode",value:"[1 0 1 0 1 0 1 0]"})),pe.push({key:"BitsPerComponent",value:B.bitsPerComponent}),"decodeParameters"in B&&B.decodeParameters!==void 0&&pe.push({key:"DecodeParms",value:"<<"+B.decodeParameters+">>"}),"transparency"in B&&Array.isArray(B.transparency)&&B.transparency.length>0){for(var he="",ve=0,ae=B.transparency.length;ve<ae;ve++)he+=B.transparency[ve]+" "+B.transparency[ve]+" ";pe.push({key:"Mask",value:"["+he+"]"})}B.sMask!==void 0&&pe.push({key:"SMask",value:B.objectId+1+" 0 R"});var Pe=B.filter!==void 0?["/"+B.filter]:void 0;if(X({data:B.data,additionalKeyValues:pe,alreadyAppliedFilters:Pe,objectId:B.objectId}),D("endobj"),"sMask"in B&&B.sMask!==void 0){var ke,O=(ke=B.sMaskBitsPerComponent)!==null&&ke!==void 0?ke:B.bitsPerComponent,G={width:B.width,height:B.height,colorSpace:"DeviceGray",bitsPerComponent:O,data:B.sMask};"filter"in B&&(G.decodeParameters="/Predictor ".concat(B.predictor," /Colors 1 /BitsPerComponent ").concat(O," /Columns ").concat(B.width),G.filter=B.filter),k.call(this,G)}if(B.colorSpace===v.INDEXED){var z=this.internal.newObject();X({data:S(new Uint8Array(B.palette)),objectId:z}),D("endobj")}},o=function(){var k=this.internal.collections[e+"images"];for(var B in k)s.call(this,k[B])},l=function(){var k,B=this.internal.collections[e+"images"],D=this.internal.write;for(var X in B)D("/I"+(k=B[X]).index,k.objectId,"0","R")},c=function(){this.internal.collections[e+"images"]||(this.internal.collections[e+"images"]={},this.internal.events.subscribe("putResources",o),this.internal.events.subscribe("putXobjectDict",l))},u=function(){var k=this.internal.collections[e+"images"];return c.call(this),k},d=function(){return Object.keys(this.internal.collections[e+"images"]).length},f=function(k){return typeof t["process"+k.toUpperCase()]=="function"},A=function(k){return Za(k)==="object"&&k.nodeType===1},h=function(k,B){if(k.nodeName==="IMG"&&k.hasAttribute("src")){var D=""+k.getAttribute("src");if(D.indexOf("data:image/")===0)return pE(unescape(D).split("base64,").pop());var X=t.loadFile(D,!0);if(X!==void 0)return X}if(k.nodeName==="CANVAS"){if(k.width===0||k.height===0)throw new Error("Given canvas must have data. Canvas width: "+k.width+", height: "+k.height);var me;switch(B){case"PNG":me="image/png";break;case"WEBP":me="image/webp";break;default:me="image/jpeg"}return pE(k.toDataURL(me,1).split("base64,").pop())}},m=function(k){var B=this.internal.collections[e+"images"];if(B){for(var D in B)if(k===B[D].alias)return B[D]}},p=function(k,B,D){return k||B||(k=-96,B=-96),k<0&&(k=-1*D.width*72/k/this.internal.scaleFactor),B<0&&(B=-1*D.height*72/B/this.internal.scaleFactor),k===0&&(k=B*D.width/D.height),B===0&&(B=k*D.height/D.width),[k,B]},x=function(k,B,D,X,me,pe){var he=p.call(this,D,X,me),ve=this.internal.getCoordinateString,ae=this.internal.getVerticalCoordinateString,Pe=u.call(this);if(D=he[0],X=he[1],Pe[me.index]=me,pe){pe*=Math.PI/180;var ke=Math.cos(pe),O=Math.sin(pe),G=function(U){return U.toFixed(4)},z=[G(ke),G(O),G(-1*O),G(ke),0,0,"cm"]}this.internal.write("q"),pe?(this.internal.write([1,"0","0",1,ve(k),ae(B+X),"cm"].join(" ")),this.internal.write(z.join(" ")),this.internal.write([ve(D),"0","0",ve(X),"0","0","cm"].join(" "))):this.internal.write([ve(D),"0","0",ve(X),ve(k),ae(B+X),"cm"].join(" ")),this.isAdvancedAPI()&&this.internal.write([1,0,0,-1,0,0,"cm"].join(" ")),this.internal.write("/I"+me.index+" Do"),this.internal.write("Q")},v=t.color_spaces={DEVICE_RGB:"DeviceRGB",DEVICE_GRAY:"DeviceGray",DEVICE_CMYK:"DeviceCMYK",CAL_GREY:"CalGray",CAL_RGB:"CalRGB",LAB:"Lab",ICC_BASED:"ICCBased",INDEXED:"Indexed",PATTERN:"Pattern",SEPARATION:"Separation",DEVICE_N:"DeviceN"};t.decode={DCT_DECODE:"DCTDecode",FLATE_DECODE:"FlateDecode",LZW_DECODE:"LZWDecode",JPX_DECODE:"JPXDecode",JBIG2_DECODE:"JBIG2Decode",ASCII85_DECODE:"ASCII85Decode",ASCII_HEX_DECODE:"ASCIIHexDecode",RUN_LENGTH_DECODE:"RunLengthDecode",CCITT_FAX_DECODE:"CCITTFaxDecode"};var y=t.image_compression={NONE:"NONE",FAST:"FAST",MEDIUM:"MEDIUM",SLOW:"SLOW"},b=t.__addimage__.sHashCode=function(k){var B,D,X=0;if(typeof k=="string")for(D=k.length,B=0;B<D;B++)X=(X<<5)-X+k.charCodeAt(B),X|=0;else if(I(k))for(D=k.byteLength/2,B=0;B<D;B++)X=(X<<5)-X+k[B],X|=0;return X},w=t.__addimage__.validateStringAsBase64=function(k){(k=k||"").toString().trim();var B=!0;return k.length===0&&(B=!1),k.length%4!=0&&(B=!1),/^[A-Za-z0-9+/]+$/.test(k.substr(0,k.length-2))===!1&&(B=!1),/^[A-Za-z0-9/][A-Za-z0-9+/]|[A-Za-z0-9+/]=|==$/.test(k.substr(-2))===!1&&(B=!1),B},j=t.__addimage__.extractImageFromDataUrl=function(k){if(k==null||!(k=k.trim()).startsWith("data:"))return null;var B=k.indexOf(",");return B<0?null:k.substring(0,B).trim().endsWith("base64")?k.substring(B+1):null};t.__addimage__.isArrayBuffer=function(k){return k instanceof ArrayBuffer};var I=t.__addimage__.isArrayBufferView=function(k){return k instanceof Int8Array||k instanceof Uint8Array||k instanceof Uint8ClampedArray||k instanceof Int16Array||k instanceof Uint16Array||k instanceof Int32Array||k instanceof Uint32Array||k instanceof Float32Array||k instanceof Float64Array},_=t.__addimage__.binaryStringToUint8Array=function(k){for(var B=k.length,D=new Uint8Array(B),X=0;X<B;X++)D[X]=k.charCodeAt(X);return D},S=t.__addimage__.arrayBufferToBinaryString=function(k){for(var B="",D=I(k)?k:new Uint8Array(k),X=0;X<D.length;X+=8192)B+=String.fromCharCode.apply(null,D.subarray(X,X+8192));return B};t.addImage=function(){var k,B,D,X,me,pe,he,ve,ae;if(typeof arguments[1]=="number"?(B=r,D=arguments[1],X=arguments[2],me=arguments[3],pe=arguments[4],he=arguments[5],ve=arguments[6],ae=arguments[7]):(B=arguments[1],D=arguments[2],X=arguments[3],me=arguments[4],pe=arguments[5],he=arguments[6],ve=arguments[7],ae=arguments[8]),Za(k=arguments[0])==="object"&&!A(k)&&"imageData"in k){var Pe=k;k=Pe.imageData,B=Pe.format||B||r,D=Pe.x||D||0,X=Pe.y||X||0,me=Pe.w||Pe.width||me,pe=Pe.h||Pe.height||pe,he=Pe.alias||he,ve=Pe.compression||ve,ae=Pe.rotation||Pe.angle||ae}var ke=this.internal.getFilters();if(ve===void 0&&ke.indexOf("FlateEncode")!==-1&&(ve="SLOW"),isNaN(D)||isNaN(X))throw new Error("Invalid coordinates passed to jsPDF.addImage");c.call(this);var O=E.call(this,k,B,he,ve);return x.call(this,D,X,me,pe,O,ae),this};var E=function(k,B,D,X){var me,pe,he;if(typeof k=="string"&&a(k)===r){k=unescape(k);var ve=T(k,!1);(ve!==""||(ve=t.loadFile(k,!0))!==void 0)&&(k=ve)}if(A(k)&&(k=h(k,B)),B=a(k,B),!f(B))throw new Error("addImage does not support files of type '"+B+"', please ensure that a plugin for '"+B+"' support is added.");if(((he=D)==null||he.length===0)&&(D=function(ae){return typeof ae=="string"||I(ae)?b(ae):I(ae.data)?b(ae.data):null}(k)),(me=m.call(this,D))||(k instanceof Uint8Array||B==="RGBA"||(pe=k,k=_(k)),me=this["process"+B.toUpperCase()](k,d.call(this),D,function(ae){return ae&&typeof ae=="string"&&(ae=ae.toUpperCase()),ae in t.image_compression?ae:y.NONE}(X),pe)),!me)throw new Error("An unknown error occurred whilst processing the image.");return me},T=t.__addimage__.convertBase64ToBinaryString=function(k,B){B=typeof B!="boolean"||B;var D,X="";if(typeof k=="string"){var me;D=(me=j(k))!==null&&me!==void 0?me:k;try{X=pE(D)}catch(pe){if(B)throw w(D)?new Error("atob-Error in jsPDF.convertBase64ToBinaryString "+pe.message):new Error("Supplied Data is not a valid base64-String jsPDF.convertBase64ToBinaryString ")}}return X};t.getImageProperties=function(k){var B,D,X="";if(A(k)&&(k=h(k)),typeof k=="string"&&a(k)===r&&((X=T(k,!1))===""&&(X=t.loadFile(k)||""),k=X),D=a(k),!f(D))throw new Error("addImage does not support files of type '"+D+"', please ensure that a plugin for '"+D+"' support is added.");if(k instanceof Uint8Array||(k=_(k)),!(B=this["process"+D.toUpperCase()](k)))throw new Error("An unknown error occurred whilst processing the image");return B.fileType=D,B}})(rn.API),function(t){var e=function(r){if(r!==void 0&&r!="")return!0};rn.API.events.push(["addPage",function(r){this.internal.getPageInfo(r.pageNumber).pageContext.annotations=[]}]),t.events.push(["putPage",function(r){for(var n,a,s,o=this.internal.getCoordinateString,l=this.internal.getVerticalCoordinateString,c=this.internal.getPageInfoByObjId(r.objId),u=r.pageContext.annotations,d=!1,f=0;f<u.length&&!d;f++)switch((n=u[f]).type){case"link":(e(n.options.url)||e(n.options.pageNumber))&&(d=!0);break;case"reference":case"text":case"freetext":d=!0}if(d!=0){this.internal.write("/Annots [");for(var A=0;A<u.length;A++){n=u[A];var h=this.internal.pdfEscape,m=this.internal.getEncryptor(r.objId);switch(n.type){case"reference":this.internal.write(" "+n.object.objId+" 0 R ");break;case"text":var p=this.internal.newAdditionalObject(),x=this.internal.newAdditionalObject(),v=this.internal.getEncryptor(p.objId),y=n.title||"Note";s="<</Type /Annot /Subtype /Text "+(a="/Rect ["+o(n.bounds.x)+" "+l(n.bounds.y+n.bounds.h)+" "+o(n.bounds.x+n.bounds.w)+" "+l(n.bounds.y)+"] ")+"/Contents ("+h(v(n.contents))+")",s+=" /Popup "+x.objId+" 0 R",s+=" /P "+c.objId+" 0 R",s+=" /T ("+h(v(y))+") >>",p.content=s;var b=p.objId+" 0 R";s="<</Type /Annot /Subtype /Popup "+(a="/Rect ["+o(n.bounds.x+30)+" "+l(n.bounds.y+n.bounds.h)+" "+o(n.bounds.x+n.bounds.w+30)+" "+l(n.bounds.y)+"] ")+" /Parent "+b,n.open&&(s+=" /Open true"),s+=" >>",x.content=s,this.internal.write(p.objId,"0 R",x.objId,"0 R");break;case"freetext":a="/Rect ["+o(n.bounds.x)+" "+l(n.bounds.y)+" "+o(n.bounds.x+n.bounds.w)+" "+l(n.bounds.y+n.bounds.h)+"] ";var w=n.color||"#000000";s="<</Type /Annot /Subtype /FreeText "+a+"/Contents ("+h(m(n.contents))+")",s+=" /DS(font: Helvetica,sans-serif 12.0pt; text-align:left; color:#"+w+")",s+=" /Border [0 0 0]",s+=" >>",this.internal.write(s);break;case"link":if(n.options.name){var j=this.annotations._nameMap[n.options.name];n.options.pageNumber=j.page,n.options.top=j.y}else n.options.top||(n.options.top=0);if(a="/Rect ["+n.finalBounds.x+" "+n.finalBounds.y+" "+n.finalBounds.w+" "+n.finalBounds.h+"] ",s="",n.options.url)s="<</Type /Annot /Subtype /Link "+a+"/Border [0 0 0] /A <</S /URI /URI ("+h(m(n.options.url))+") >>";else if(n.options.pageNumber)switch(s="<</Type /Annot /Subtype /Link "+a+"/Border [0 0 0] /Dest ["+this.internal.getPageInfo(n.options.pageNumber).objId+" 0 R",n.options.magFactor=n.options.magFactor||"XYZ",n.options.magFactor){case"Fit":s+=" /Fit]";break;case"FitH":s+=" /FitH "+n.options.top+"]";break;case"FitV":n.options.left=n.options.left||0,s+=" /FitV "+n.options.left+"]";break;default:var I=l(n.options.top);n.options.left=n.options.left||0,n.options.zoom===void 0&&(n.options.zoom=0),s+=" /XYZ "+n.options.left+" "+I+" "+n.options.zoom+"]"}s!=""&&(s+=" >>",this.internal.write(s))}}this.internal.write("]")}}]),t.createAnnotation=function(r){var n=this.internal.getCurrentPageInfo();switch(r.type){case"link":this.link(r.bounds.x,r.bounds.y,r.bounds.w,r.bounds.h,r);break;case"text":case"freetext":n.pageContext.annotations.push(r)}},t.link=function(r,n,a,s,o){var l=this.internal.getCurrentPageInfo(),c=this.internal.getCoordinateString,u=this.internal.getVerticalCoordinateString;l.pageContext.annotations.push({finalBounds:{x:c(r),y:u(n),w:c(r+a),h:u(n+s)},options:o,type:"link"})},t.textWithLink=function(r,n,a,s){var o,l,c=this.getTextWidth(r),u=this.internal.getLineHeight()/this.internal.scaleFactor;if(s.maxWidth!==void 0){l=s.maxWidth;var d=this.splitTextToSize(r,l).length;o=Math.ceil(u*d)}else l=c,o=u;return this.text(r,n,a,s),a+=.2*u,s.align==="center"&&(n-=c/2),s.align==="right"&&(n-=c),this.link(n,a-u,l,o,s),c},t.getTextWidth=function(r){var n=this.internal.getFontSize();return this.getStringUnitWidth(r)*n/this.internal.scaleFactor}}(rn.API),function(t){var e={1569:[65152],1570:[65153,65154],1571:[65155,65156],1572:[65157,65158],1573:[65159,65160],1574:[65161,65162,65163,65164],1575:[65165,65166],1576:[65167,65168,65169,65170],1577:[65171,65172],1578:[65173,65174,65175,65176],1579:[65177,65178,65179,65180],1580:[65181,65182,65183,65184],1581:[65185,65186,65187,65188],1582:[65189,65190,65191,65192],1583:[65193,65194],1584:[65195,65196],1585:[65197,65198],1586:[65199,65200],1587:[65201,65202,65203,65204],1588:[65205,65206,65207,65208],1589:[65209,65210,65211,65212],1590:[65213,65214,65215,65216],1591:[65217,65218,65219,65220],1592:[65221,65222,65223,65224],1593:[65225,65226,65227,65228],1594:[65229,65230,65231,65232],1601:[65233,65234,65235,65236],1602:[65237,65238,65239,65240],1603:[65241,65242,65243,65244],1604:[65245,65246,65247,65248],1605:[65249,65250,65251,65252],1606:[65253,65254,65255,65256],1607:[65257,65258,65259,65260],1608:[65261,65262],1609:[65263,65264,64488,64489],1610:[65265,65266,65267,65268],1649:[64336,64337],1655:[64477],1657:[64358,64359,64360,64361],1658:[64350,64351,64352,64353],1659:[64338,64339,64340,64341],1662:[64342,64343,64344,64345],1663:[64354,64355,64356,64357],1664:[64346,64347,64348,64349],1667:[64374,64375,64376,64377],1668:[64370,64371,64372,64373],1670:[64378,64379,64380,64381],1671:[64382,64383,64384,64385],1672:[64392,64393],1676:[64388,64389],1677:[64386,64387],1678:[64390,64391],1681:[64396,64397],1688:[64394,64395],1700:[64362,64363,64364,64365],1702:[64366,64367,64368,64369],1705:[64398,64399,64400,64401],1709:[64467,64468,64469,64470],1711:[64402,64403,64404,64405],1713:[64410,64411,64412,64413],1715:[64406,64407,64408,64409],1722:[64414,64415],1723:[64416,64417,64418,64419],1726:[64426,64427,64428,64429],1728:[64420,64421],1729:[64422,64423,64424,64425],1733:[64480,64481],1734:[64473,64474],1735:[64471,64472],1736:[64475,64476],1737:[64482,64483],1739:[64478,64479],1740:[64508,64509,64510,64511],1744:[64484,64485,64486,64487],1746:[64430,64431],1747:[64432,64433]},r={65247:{65154:65269,65156:65271,65160:65273,65166:65275},65248:{65154:65270,65156:65272,65160:65274,65166:65276},65165:{65247:{65248:{65258:65010}}},1617:{1612:64606,1613:64607,1614:64608,1615:64609,1616:64610}},n={1612:64606,1613:64607,1614:64608,1615:64609,1616:64610},a=[1570,1571,1573,1575];t.__arabicParser__={};var s=t.__arabicParser__.isInArabicSubstitutionA=function(p){return e[p.charCodeAt(0)]!==void 0},o=t.__arabicParser__.isArabicLetter=function(p){return typeof p=="string"&&/^[\u0600-\u06FF\u0750-\u077F\u08A0-\u08FF\uFB50-\uFDFF\uFE70-\uFEFF]+$/.test(p)},l=t.__arabicParser__.isArabicEndLetter=function(p){return o(p)&&s(p)&&e[p.charCodeAt(0)].length<=2},c=t.__arabicParser__.isArabicAlfLetter=function(p){return o(p)&&a.indexOf(p.charCodeAt(0))>=0};t.__arabicParser__.arabicLetterHasIsolatedForm=function(p){return o(p)&&s(p)&&e[p.charCodeAt(0)].length>=1};var u=t.__arabicParser__.arabicLetterHasFinalForm=function(p){return o(p)&&s(p)&&e[p.charCodeAt(0)].length>=2};t.__arabicParser__.arabicLetterHasInitialForm=function(p){return o(p)&&s(p)&&e[p.charCodeAt(0)].length>=3};var d=t.__arabicParser__.arabicLetterHasMedialForm=function(p){return o(p)&&s(p)&&e[p.charCodeAt(0)].length==4},f=t.__arabicParser__.resolveLigatures=function(p){var x=0,v=r,y="",b=0;for(x=0;x<p.length;x+=1)v[p.charCodeAt(x)]!==void 0?(b++,typeof(v=v[p.charCodeAt(x)])=="number"&&(y+=String.fromCharCode(v),v=r,b=0),x===p.length-1&&(v=r,y+=p.charAt(x-(b-1)),x-=b-1,b=0)):(v=r,y+=p.charAt(x-b),x-=b,b=0);return y};t.__arabicParser__.isArabicDiacritic=function(p){return p!==void 0&&n[p.charCodeAt(0)]!==void 0};var A=t.__arabicParser__.getCorrectForm=function(p,x,v){return o(p)?s(p)===!1?-1:!u(p)||!o(x)&&!o(v)||!o(v)&&l(x)||l(p)&&!o(x)||l(p)&&c(x)||l(p)&&l(x)?0:d(p)&&o(x)&&!l(x)&&o(v)&&u(v)?3:l(p)||!o(v)?1:2:-1},h=function(p){var x=0,v=0,y=0,b="",w="",j="",I=(p=p||"").split("\\s+"),_=[];for(x=0;x<I.length;x+=1){for(_.push(""),v=0;v<I[x].length;v+=1)b=I[x][v],w=I[x][v-1],j=I[x][v+1],o(b)?(y=A(b,w,j),_[x]+=y!==-1?String.fromCharCode(e[b.charCodeAt(0)][y]):b):_[x]+=b;_[x]=f(_[x])}return _.join(" ")},m=t.__arabicParser__.processArabic=t.processArabic=function(){var p,x=typeof arguments[0]=="string"?arguments[0]:arguments[0].text,v=[];if(Array.isArray(x)){var y=0;for(v=[],y=0;y<x.length;y+=1)Array.isArray(x[y])?v.push([h(x[y][0]),x[y][1],x[y][2]]):v.push([h(x[y])]);p=v}else p=h(x);return typeof arguments[0]=="string"?p:(arguments[0].text=p,arguments[0])};t.events.push(["preProcessText",m])}(rn.API),rn.API.autoPrint=function(t){var e;return(t=t||{}).variant=t.variant||"non-conform",t.variant==="javascript"?this.addJS("print({});"):(this.internal.events.subscribe("postPutResources",function(){e=this.internal.newObject(),this.internal.out("<<"),this.internal.out("/S /Named"),this.internal.out("/Type /Action"),this.internal.out("/N /Print"),this.internal.out(">>"),this.internal.out("endobj")}),this.internal.events.subscribe("putCatalog",function(){this.internal.out("/OpenAction "+e+" 0 R")})),this},function(t){var e=function(){var r=void 0;Object.defineProperty(this,"pdf",{get:function(){return r},set:function(l){r=l}});var n=150;Object.defineProperty(this,"width",{get:function(){return n},set:function(l){n=isNaN(l)||Number.isInteger(l)===!1||l<0?150:l,this.getContext("2d").pageWrapXEnabled&&(this.getContext("2d").pageWrapX=n+1)}});var a=300;Object.defineProperty(this,"height",{get:function(){return a},set:function(l){a=isNaN(l)||Number.isInteger(l)===!1||l<0?300:l,this.getContext("2d").pageWrapYEnabled&&(this.getContext("2d").pageWrapY=a+1)}});var s=[];Object.defineProperty(this,"childNodes",{get:function(){return s},set:function(l){s=l}});var o={};Object.defineProperty(this,"style",{get:function(){return o},set:function(l){o=l}}),Object.defineProperty(this,"parentNode",{})};e.prototype.getContext=function(r,n){var a;if((r=r||"2d")!=="2d")return null;for(a in n)this.pdf.context2d.hasOwnProperty(a)&&(this.pdf.context2d[a]=n[a]);return this.pdf.context2d._canvas=this,this.pdf.context2d},e.prototype.toDataURL=function(){throw new Error("toDataURL is not implemented.")},t.events.push(["initialized",function(){this.canvas=new e,this.canvas.pdf=this}])}(rn.API),function(t){var e={left:0,top:0,bottom:0,right:0},r=!1,n=function(){this.internal.__cell__===void 0&&(this.internal.__cell__={},this.internal.__cell__.padding=3,this.internal.__cell__.headerFunction=void 0,this.internal.__cell__.margins=Object.assign({},e),this.internal.__cell__.margins.width=this.getPageWidth(),a.call(this))},a=function(){this.internal.__cell__.lastCell=new s,this.internal.__cell__.pages=1},s=function(){var c=arguments[0];Object.defineProperty(this,"x",{enumerable:!0,get:function(){return c},set:function(p){c=p}});var u=arguments[1];Object.defineProperty(this,"y",{enumerable:!0,get:function(){return u},set:function(p){u=p}});var d=arguments[2];Object.defineProperty(this,"width",{enumerable:!0,get:function(){return d},set:function(p){d=p}});var f=arguments[3];Object.defineProperty(this,"height",{enumerable:!0,get:function(){return f},set:function(p){f=p}});var A=arguments[4];Object.defineProperty(this,"text",{enumerable:!0,get:function(){return A},set:function(p){A=p}});var h=arguments[5];Object.defineProperty(this,"lineNumber",{enumerable:!0,get:function(){return h},set:function(p){h=p}});var m=arguments[6];return Object.defineProperty(this,"align",{enumerable:!0,get:function(){return m},set:function(p){m=p}}),this};s.prototype.clone=function(){return new s(this.x,this.y,this.width,this.height,this.text,this.lineNumber,this.align)},s.prototype.toArray=function(){return[this.x,this.y,this.width,this.height,this.text,this.lineNumber,this.align]},t.setHeaderFunction=function(c){return n.call(this),this.internal.__cell__.headerFunction=typeof c=="function"?c:void 0,this},t.getTextDimensions=function(c,u){n.call(this);var d=(u=u||{}).fontSize||this.getFontSize(),f=u.font||this.getFont(),A=u.scaleFactor||this.internal.scaleFactor,h=0,m=0,p=0,x=this;if(!Array.isArray(c)&&typeof c!="string"){if(typeof c!="number")throw new Error("getTextDimensions expects text-parameter to be of type String or type Number or an Array of Strings.");c=String(c)}var v=u.maxWidth;v>0?typeof c=="string"?c=this.splitTextToSize(c,v):Object.prototype.toString.call(c)==="[object Array]"&&(c=c.reduce(function(b,w){return b.concat(x.splitTextToSize(w,v))},[])):c=Array.isArray(c)?c:[c];for(var y=0;y<c.length;y++)h<(p=this.getStringUnitWidth(c[y],{font:f})*d)&&(h=p);return h!==0&&(m=c.length),{w:h/=A,h:Math.max((m*d*this.getLineHeightFactor()-d*(this.getLineHeightFactor()-1))/A,0)}},t.cellAddPage=function(){n.call(this),this.addPage();var c=this.internal.__cell__.margins||e;return this.internal.__cell__.lastCell=new s(c.left,c.top,void 0,void 0),this.internal.__cell__.pages+=1,this};var o=t.cell=function(){var c;c=arguments[0]instanceof s?arguments[0]:new s(arguments[0],arguments[1],arguments[2],arguments[3],arguments[4],arguments[5],arguments[6]),n.call(this);var u=this.internal.__cell__.lastCell,d=this.internal.__cell__.padding,f=this.internal.__cell__.margins||e,A=this.internal.__cell__.tableHeaderRow,h=this.internal.__cell__.printHeaders;return u.lineNumber!==void 0&&(u.lineNumber===c.lineNumber?(c.x=(u.x||0)+(u.width||0),c.y=u.y||0):u.y+u.height+c.height+f.bottom>this.getPageHeight()?(this.cellAddPage(),c.y=f.top,h&&A&&(this.printHeaderRow(c.lineNumber,!0),c.y+=A[0].height)):c.y=u.y+u.height||c.y),c.text[0]!==void 0&&(this.rect(c.x,c.y,c.width,c.height,r===!0?"FD":void 0),c.align==="right"?this.text(c.text,c.x+c.width-d,c.y+d,{align:"right",baseline:"top"}):c.align==="center"?this.text(c.text,c.x+c.width/2,c.y+d,{align:"center",baseline:"top",maxWidth:c.width-d-d}):this.text(c.text,c.x+d,c.y+d,{align:"left",baseline:"top",maxWidth:c.width-d-d})),this.internal.__cell__.lastCell=c,this};t.table=function(c,u,d,f,A){if(n.call(this),!d)throw new Error("No data for PDF table.");var h,m,p,x,v=[],y=[],b=[],w={},j={},I=[],_=[],S=(A=A||{}).autoSize||!1,E=A.printHeaders!==!1,T=A.css&&A.css["font-size"]!==void 0?16*A.css["font-size"]:A.fontSize||12,k=A.margins||Object.assign({width:this.getPageWidth()},e),B=typeof A.padding=="number"?A.padding:3,D=A.headerBackgroundColor||"#c8c8c8",X=A.headerTextColor||"#000";if(a.call(this),this.internal.__cell__.printHeaders=E,this.internal.__cell__.margins=k,this.internal.__cell__.table_font_size=T,this.internal.__cell__.padding=B,this.internal.__cell__.headerBackgroundColor=D,this.internal.__cell__.headerTextColor=X,this.setFontSize(T),f==null)y=v=Object.keys(d[0]),b=v.map(function(){return"left"});else if(Array.isArray(f)&&Za(f[0])==="object")for(v=f.map(function(Pe){return Pe.name}),y=f.map(function(Pe){return Pe.prompt||Pe.name||""}),b=f.map(function(Pe){return Pe.align||"left"}),h=0;h<f.length;h+=1)j[f[h].name]=.7499990551181103*f[h].width;else Array.isArray(f)&&typeof f[0]=="string"&&(y=v=f,b=v.map(function(){return"left"}));if(S||Array.isArray(f)&&typeof f[0]=="string")for(h=0;h<v.length;h+=1){for(w[x=v[h]]=d.map(function(Pe){return Pe[x]}),this.setFont(void 0,"bold"),I.push(this.getTextDimensions(y[h],{fontSize:this.internal.__cell__.table_font_size,scaleFactor:this.internal.scaleFactor}).w),m=w[x],this.setFont(void 0,"normal"),p=0;p<m.length;p+=1)I.push(this.getTextDimensions(m[p],{fontSize:this.internal.__cell__.table_font_size,scaleFactor:this.internal.scaleFactor}).w);j[x]=Math.max.apply(null,I)+B+B,I=[]}if(E){var me={};for(h=0;h<v.length;h+=1)me[v[h]]={},me[v[h]].text=y[h],me[v[h]].align=b[h];var pe=l.call(this,me,j);_=v.map(function(Pe){return new s(c,u,j[Pe],pe,me[Pe].text,void 0,me[Pe].align)}),this.setTableHeaderRow(_),this.printHeaderRow(1,!1)}var he=f.reduce(function(Pe,ke){return Pe[ke.name]=ke.align,Pe},{});for(h=0;h<d.length;h+=1){"rowStart"in A&&A.rowStart instanceof Function&&A.rowStart({row:h,data:d[h]},this);var ve=l.call(this,d[h],j);for(p=0;p<v.length;p+=1){var ae=d[h][v[p]];"cellStart"in A&&A.cellStart instanceof Function&&A.cellStart({row:h,col:p,data:ae},this),o.call(this,new s(c,u,j[v[p]],ve,ae,h+2,he[v[p]]))}}return this.internal.__cell__.table_x=c,this.internal.__cell__.table_y=u,this};var l=function(c,u){var d=this.internal.__cell__.padding,f=this.internal.__cell__.table_font_size,A=this.internal.scaleFactor;return Object.keys(c).map(function(h){var m=c[h];return this.splitTextToSize(m.hasOwnProperty("text")?m.text:m,u[h]-d-d)},this).map(function(h){return this.getLineHeightFactor()*h.length*f/A+d+d},this).reduce(function(h,m){return Math.max(h,m)},0)};t.setTableHeaderRow=function(c){n.call(this),this.internal.__cell__.tableHeaderRow=c},t.printHeaderRow=function(c,u){if(n.call(this),!this.internal.__cell__.tableHeaderRow)throw new Error("Property tableHeaderRow does not exist.");var d;if(r=!0,typeof this.internal.__cell__.headerFunction=="function"){var f=this.internal.__cell__.headerFunction(this,this.internal.__cell__.pages);this.internal.__cell__.lastCell=new s(f[0],f[1],f[2],f[3],void 0,-1)}this.setFont(void 0,"bold");for(var A=[],h=0;h<this.internal.__cell__.tableHeaderRow.length;h+=1){d=this.internal.__cell__.tableHeaderRow[h].clone(),u&&(d.y=this.internal.__cell__.margins.top||0,A.push(d)),d.lineNumber=c;var m=this.getTextColor();this.setTextColor(this.internal.__cell__.headerTextColor),this.setFillColor(this.internal.__cell__.headerBackgroundColor),o.call(this,d),this.setTextColor(m)}A.length>0&&this.setTableHeaderRow(A),this.setFont(void 0,"normal"),r=!1}}(rn.API);var kre={italic:["italic","oblique","normal"],oblique:["oblique","italic","normal"],normal:["normal","oblique","italic"]},Fre=["ultra-condensed","extra-condensed","condensed","semi-condensed","normal","semi-expanded","expanded","extra-expanded","ultra-expanded"],Hk=Tre(Fre),Ore=[100,200,300,400,500,600,700,800,900],Wje=Tre(Ore);function A5(t){var e=t.family.replace(/"|'/g,"").toLowerCase(),r=function(s){return kre[s=s||"normal"]?s:"normal"}(t.style),n=function(s){return s?typeof s=="number"?s>=100&&s<=900&&s%100==0?s:400:/^\d00$/.test(s)?parseInt(s):s==="bold"?700:400:400}(t.weight),a=function(s){return typeof Hk[s=s||"normal"]=="number"?s:"normal"}(t.stretch);return{family:e,style:r,weight:n,stretch:a,src:t.src||[],ref:t.ref||{name:e,style:[a,r,n].join(" ")}}}function EV(t,e,r,n){var a;for(a=r;a>=0&&a<e.length;a+=n)if(t[e[a]])return t[e[a]];for(a=r;a>=0&&a<e.length;a-=n)if(t[e[a]])return t[e[a]]}var Xje={"sans-serif":"helvetica",fixed:"courier",monospace:"courier",terminal:"courier",cursive:"times",fantasy:"times",serif:"times"},SV={caption:"times",icon:"times",menu:"times","message-box":"times","small-caption":"times","status-bar":"times"};function IV(t){return[t.stretch,t.style,t.weight,t.family].join(" ")}function jV(t){return t.trimLeft()}function Yje(t,e){for(var r=0;r<t.length;){if(t.charAt(r)===e)return[t.substring(0,r),t.substring(r+1)];r+=1}return null}function Jje(t){var e=t.match(/^(-[a-z_]|[a-z_])[a-z0-9_-]*/i);return e===null?null:[e[0],t.substring(e[0].length)]}var DC,PV,BV,ux,RC,TV,kV,FV,m5=["times"];function OV(t,e,r,n,a){var s=4,o=RV;switch(a){case rn.API.image_compression.FAST:s=1,o=DV;break;case rn.API.image_compression.MEDIUM:s=6,o=MV;break;case rn.API.image_compression.SLOW:s=9,o=LV}t=function(c,u,d,f){for(var A,h=c.length/u,m=new Uint8Array(c.length+h),p=[Zje,DV,RV,MV,LV],x=0;x<h;x+=1){var v=x*u,y=c.subarray(v,v+u);if(f)m.set(f(y,d,A),v+x);else{for(var b=p.length,w=[],j=0;j<b;j+=1)w[j]=p[j](y,d,A);var I=tPe(w.concat());m.set(w[I],v+x)}A=y}return m}(t,e,Math.ceil(r*n/8),o);var l=Dk(t,{level:s});return rn.API.__addimage__.arrayBufferToBinaryString(l)}function Zje(t){var e=Array.apply([],t);return e.unshift(0),e}function DV(t,e){var r=t.length,n=[];n[0]=1;for(var a=0;a<r;a+=1){var s=t[a-e]||0;n[a+1]=t[a]-s+256&255}return n}function RV(t,e,r){var n=t.length,a=[];a[0]=2;for(var s=0;s<n;s+=1){var o=r&&r[s]||0;a[s+1]=t[s]-o+256&255}return a}function MV(t,e,r){var n=t.length,a=[];a[0]=3;for(var s=0;s<n;s+=1){var o=t[s-e]||0,l=r&&r[s]||0;a[s+1]=t[s]+256-(o+l>>>1)&255}return a}function LV(t,e,r){var n=t.length,a=[];a[0]=4;for(var s=0;s<n;s+=1){var o=ePe(t[s-e]||0,r&&r[s]||0,r&&r[s-e]||0);a[s+1]=t[s]-o+256&255}return a}function ePe(t,e,r){if(t===e&&e===r)return t;var n=Math.abs(e-r),a=Math.abs(t-r),s=Math.abs(t+e-r-r);return n<=a&&n<=s?t:a<=s?e:r}function tPe(t){var e=t.map(function(r){return r.reduce(function(n,a){return n+Math.abs(a)},0)});return e.indexOf(Math.min.apply(null,e))}function p5(t,e,r){var n=e*r,a=Math.floor(n/8),s=16-(n-8*a+r),o=(1<<r)-1;return Dre(t,a)>>s&o}function UV(t,e,r,n){var a=r*n,s=Math.floor(a/8),o=16-(a-8*s+n),l=(1<<n)-1,c=(e&l)<<o;(function(u,d,f){if(d+1<u.byteLength)u.setUint16(d,f,!1);else{var A=f>>8&255;u.setUint8(d,A)}})(t,s,Dre(t,s)&~(l<<o)&65535|c)}function Dre(t,e){return e+1<t.byteLength?t.getUint16(e,!1):t.getUint8(e)<<8}function rPe(t){var e=0;if(t[e++]!==71||t[e++]!==73||t[e++]!==70||t[e++]!==56||(t[e++]+1&253)!=56||t[e++]!==97)throw new Error("Invalid GIF 87a/89a header.");var r=t[e++]|t[e++]<<8,n=t[e++]|t[e++]<<8,a=t[e++],s=a>>7,o=1<<1+(7&a);t[e++],t[e++];var l=null,c=null;s&&(l=e,c=o,e+=3*o);var u=!0,d=[],f=0,A=null,h=0,m=null;for(this.width=r,this.height=n;u&&e<t.length;)switch(t[e++]){case 33:switch(t[e++]){case 255:if(t[e]!==11||t[e+1]==78&&t[e+2]==69&&t[e+3]==84&&t[e+4]==83&&t[e+5]==67&&t[e+6]==65&&t[e+7]==80&&t[e+8]==69&&t[e+9]==50&&t[e+10]==46&&t[e+11]==48&&t[e+12]==3&&t[e+13]==1&&t[e+16]==0)e+=14,m=t[e++]|t[e++]<<8,e++;else for(e+=12;;){if(!((k=t[e++])>=0))throw Error("Invalid block size");if(k===0)break;e+=k}break;case 249:if(t[e++]!==4||t[e+4]!==0)throw new Error("Invalid graphics extension block.");var p=t[e++];f=t[e++]|t[e++]<<8,A=t[e++],1&p||(A=null),h=p>>2&7,e++;break;case 254:for(;;){if(!((k=t[e++])>=0))throw Error("Invalid block size");if(k===0)break;e+=k}break;default:throw new Error("Unknown graphic control label: 0x"+t[e-1].toString(16))}break;case 44:var x=t[e++]|t[e++]<<8,v=t[e++]|t[e++]<<8,y=t[e++]|t[e++]<<8,b=t[e++]|t[e++]<<8,w=t[e++],j=w>>6&1,I=1<<1+(7&w),_=l,S=c,E=!1;w>>7&&(E=!0,_=e,S=I,e+=3*I);var T=e;for(e++;;){var k;if(!((k=t[e++])>=0))throw Error("Invalid block size");if(k===0)break;e+=k}d.push({x,y:v,width:y,height:b,has_local_palette:E,palette_offset:_,palette_size:S,data_offset:T,data_length:e-T,transparent_index:A,interlaced:!!j,delay:f,disposal:h});break;case 59:u=!1;break;default:throw new Error("Unknown gif block: 0x"+t[e-1].toString(16))}this.numFrames=function(){return d.length},this.loopCount=function(){return m},this.frameInfo=function(B){if(B<0||B>=d.length)throw new Error("Frame index out of range.");return d[B]},this.decodeAndBlitFrameBGRA=function(B,D){var X=this.frameInfo(B),me=X.width*X.height,pe=new Uint8Array(me);QV(t,X.data_offset,pe,me);var he=X.palette_offset,ve=X.transparent_index;ve===null&&(ve=256);var ae=X.width,Pe=r-ae,ke=ae,O=4*(X.y*r+X.x),G=4*((X.y+X.height)*r+X.x),z=O,U=4*Pe;X.interlaced===!0&&(U+=4*r*7);for(var Y=8,ee=0,M=pe.length;ee<M;++ee){var H=pe[ee];if(ke===0&&(ke=ae,(z+=U)>=G&&(U=4*Pe+4*r*(Y-1),z=O+(ae+Pe)*(Y<<1),Y>>=1)),H===ve)z+=4;else{var te=t[he+3*H],Ce=t[he+3*H+1],V=t[he+3*H+2];D[z++]=V,D[z++]=Ce,D[z++]=te,D[z++]=255}--ke}},this.decodeAndBlitFrameRGBA=function(B,D){var X=this.frameInfo(B),me=X.width*X.height,pe=new Uint8Array(me);QV(t,X.data_offset,pe,me);var he=X.palette_offset,ve=X.transparent_index;ve===null&&(ve=256);var ae=X.width,Pe=r-ae,ke=ae,O=4*(X.y*r+X.x),G=4*((X.y+X.height)*r+X.x),z=O,U=4*Pe;X.interlaced===!0&&(U+=4*r*7);for(var Y=8,ee=0,M=pe.length;ee<M;++ee){var H=pe[ee];if(ke===0&&(ke=ae,(z+=U)>=G&&(U=4*Pe+4*r*(Y-1),z=O+(ae+Pe)*(Y<<1),Y>>=1)),H===ve)z+=4;else{var te=t[he+3*H],Ce=t[he+3*H+1],V=t[he+3*H+2];D[z++]=te,D[z++]=Ce,D[z++]=V,D[z++]=255}--ke}}}function QV(t,e,r,n){for(var a=t[e++],s=1<<a,o=s+1,l=o+1,c=a+1,u=(1<<c)-1,d=0,f=0,A=0,h=t[e++],m=new Int32Array(4096),p=null;;){for(;d<16&&h!==0;)f|=t[e++]<<d,d+=8,h===1?h=t[e++]:--h;if(d<c)break;var x=f&u;if(f>>=c,d-=c,x!==s){if(x===o)break;for(var v=x<l?x:p,y=0,b=v;b>s;)b=m[b]>>8,++y;var w=b;if(A+y+(v!==x?1:0)>n)return void hs.log("Warning, gif stream longer than expected.");r[A++]=w;var j=A+=y;for(v!==x&&(r[A++]=w),b=v;y--;)b=m[b],r[--j]=255&b,b>>=8;p!==null&&l<4096&&(m[l++]=p<<8|w,l>=u+1&&c<12&&(++c,u=u<<1|1)),p=x}else l=o+1,u=(1<<(c=a+1))-1,p=null}return A!==n&&hs.log("Warning, gif stream shorter than expected."),r}/**
 * @license
  Copyright (c) 2008, Adobe Systems Incorporated
  All rights reserved.

  Redistribution and use in source and binary forms, with or without 
  modification, are permitted provided that the following conditions are
  met:

  * Redistributions of source code must retain the above copyright notice, 
    this list of conditions and the following disclaimer.
  
  * Redistributions in binary form must reproduce the above copyright
    notice, this list of conditions and the following disclaimer in the 
    documentation and/or other materials provided with the distribution.
  
  * Neither the name of Adobe Systems Incorporated nor the names of its 
    contributors may be used to endorse or promote products derived from 
    this software without specific prior written permission.

  THIS SOFTWARE IS PROVIDED BY THE COPYRIGHT HOLDERS AND CONTRIBUTORS "AS
  IS" AND ANY EXPRESS OR IMPLIED WARRANTIES, INCLUDING, BUT NOT LIMITED TO,
  THE IMPLIED WARRANTIES OF MERCHANTABILITY AND FITNESS FOR A PARTICULAR
  PURPOSE ARE DISCLAIMED. IN NO EVENT SHALL THE COPYRIGHT OWNER OR 
  CONTRIBUTORS BE LIABLE FOR ANY DIRECT, INDIRECT, INCIDENTAL, SPECIAL,
  EXEMPLARY, OR CONSEQUENTIAL DAMAGES (INCLUDING, BUT NOT LIMITED TO,
  PROCUREMENT OF SUBSTITUTE GOODS OR SERVICES; LOSS OF USE, DATA, OR
  PROFITS; OR BUSINESS INTERRUPTION) HOWEVER CAUSED AND ON ANY THEORY OF
  LIABILITY, WHETHER IN CONTRACT, STRICT LIABILITY, OR TORT (INCLUDING
  NEGLIGENCE OR OTHERWISE) ARISING IN ANY WAY OUT OF THE USE OF THIS
  SOFTWARE, EVEN IF ADVISED OF THE POSSIBILITY OF SUCH DAMAGE.
*/function g5(t){var e,r,n,a,s,o=Math.floor,l=new Array(64),c=new Array(64),u=new Array(64),d=new Array(64),f=new Array(65535),A=new Array(65535),h=new Array(64),m=new Array(64),p=[],x=0,v=7,y=new Array(64),b=new Array(64),w=new Array(64),j=new Array(256),I=new Array(2048),_=[0,1,5,6,14,15,27,28,2,4,7,13,16,26,29,42,3,8,12,17,25,30,41,43,9,11,18,24,31,40,44,53,10,19,23,32,39,45,52,54,20,22,33,38,46,51,55,60,21,34,37,47,50,56,59,61,35,36,48,49,57,58,62,63],S=[0,0,1,5,1,1,1,1,1,1,0,0,0,0,0,0,0],E=[0,1,2,3,4,5,6,7,8,9,10,11],T=[0,0,2,1,3,3,2,4,3,5,5,4,4,0,0,1,125],k=[1,2,3,0,4,17,5,18,33,49,65,6,19,81,97,7,34,113,20,50,129,145,161,8,35,66,177,193,21,82,209,240,36,51,98,114,130,9,10,22,23,24,25,26,37,38,39,40,41,42,52,53,54,55,56,57,58,67,68,69,70,71,72,73,74,83,84,85,86,87,88,89,90,99,100,101,102,103,104,105,106,115,116,117,118,119,120,121,122,131,132,133,134,135,136,137,138,146,147,148,149,150,151,152,153,154,162,163,164,165,166,167,168,169,170,178,179,180,181,182,183,184,185,186,194,195,196,197,198,199,200,201,202,210,211,212,213,214,215,216,217,218,225,226,227,228,229,230,231,232,233,234,241,242,243,244,245,246,247,248,249,250],B=[0,0,3,1,1,1,1,1,1,1,1,1,0,0,0,0,0],D=[0,1,2,3,4,5,6,7,8,9,10,11],X=[0,0,2,1,2,4,4,3,4,7,5,4,4,0,1,2,119],me=[0,1,2,3,17,4,5,33,49,6,18,65,81,7,97,113,19,34,50,129,8,20,66,145,161,177,193,9,35,51,82,240,21,98,114,209,10,22,36,52,225,37,241,23,24,25,26,38,39,40,41,42,53,54,55,56,57,58,67,68,69,70,71,72,73,74,83,84,85,86,87,88,89,90,99,100,101,102,103,104,105,106,115,116,117,118,119,120,121,122,130,131,132,133,134,135,136,137,138,146,147,148,149,150,151,152,153,154,162,163,164,165,166,167,168,169,170,178,179,180,181,182,183,184,185,186,194,195,196,197,198,199,200,201,202,210,211,212,213,214,215,216,217,218,226,227,228,229,230,231,232,233,234,242,243,244,245,246,247,248,249,250];function pe(O,G){for(var z=0,U=0,Y=new Array,ee=1;ee<=16;ee++){for(var M=1;M<=O[ee];M++)Y[G[U]]=[],Y[G[U]][0]=z,Y[G[U]][1]=ee,U++,z++;z*=2}return Y}function he(O){for(var G=O[0],z=O[1]-1;z>=0;)G&1<<z&&(x|=1<<v),z--,--v<0&&(x==255?(ve(255),ve(0)):ve(x),v=7,x=0)}function ve(O){p.push(O)}function ae(O){ve(O>>8&255),ve(255&O)}function Pe(O,G,z,U,Y){for(var ee,M=Y[0],H=Y[240],te=function(Ue,Ye){var At,yt,bt,Nt,jt,St,Ve,Te,qe,ge,q=0;for(qe=0;qe<8;++qe){At=Ue[q],yt=Ue[q+1],bt=Ue[q+2],Nt=Ue[q+3],jt=Ue[q+4],St=Ue[q+5],Ve=Ue[q+6];var se=At+(Te=Ue[q+7]),ye=At-Te,ue=yt+Ve,Le=yt-Ve,ct=bt+St,ht=bt-St,xe=Nt+jt,Ae=Nt-jt,Re=se+xe,lt=se-xe,Ne=ue+ct,De=ue-ct;Ue[q]=Re+Ne,Ue[q+4]=Re-Ne;var xt=.707106781*(De+lt);Ue[q+2]=lt+xt,Ue[q+6]=lt-xt;var _t=.382683433*((Re=Ae+ht)-(De=Le+ye)),Et=.5411961*Re+_t,Mt=1.306562965*De+_t,nt=.707106781*(Ne=ht+Le),Ee=ye+nt,we=ye-nt;Ue[q+5]=we+Et,Ue[q+3]=we-Et,Ue[q+1]=Ee+Mt,Ue[q+7]=Ee-Mt,q+=8}for(q=0,qe=0;qe<8;++qe){At=Ue[q],yt=Ue[q+8],bt=Ue[q+16],Nt=Ue[q+24],jt=Ue[q+32],St=Ue[q+40],Ve=Ue[q+48];var oe=At+(Te=Ue[q+56]),Fe=At-Te,ce=yt+Ve,Me=yt-Ve,Ke=bt+St,P=bt-St,R=Nt+jt,L=Nt-jt,K=oe+R,re=oe-R,de=ce+Ke,Ge=ce-Ke;Ue[q]=K+de,Ue[q+32]=K-de;var rt=.707106781*(Ge+re);Ue[q+16]=re+rt,Ue[q+48]=re-rt;var ft=.382683433*((K=L+P)-(Ge=Me+Fe)),et=.5411961*K+ft,ut=1.306562965*Ge+ft,Ot=.707106781*(de=P+Me),zt=Fe+Ot,Bt=Fe-Ot;Ue[q+40]=Bt+et,Ue[q+24]=Bt-et,Ue[q+8]=zt+ut,Ue[q+56]=zt-ut,q++}for(qe=0;qe<64;++qe)ge=Ue[qe]*Ye[qe],h[qe]=ge>0?ge+.5|0:ge-.5|0;return h}(O,G),Ce=0;Ce<64;++Ce)m[_[Ce]]=te[Ce];var V=m[0]-z;z=m[0],V==0?he(U[0]):(he(U[A[ee=32767+V]]),he(f[ee]));for(var We=63;We>0&&m[We]==0;)We--;if(We==0)return he(M),z;for(var ie,J=1;J<=We;){for(var Oe=J;m[J]==0&&J<=We;)++J;var fe=J-Oe;if(fe>=16){ie=fe>>4;for(var _e=1;_e<=ie;++_e)he(H);fe&=15}ee=32767+m[J],he(Y[(fe<<4)+A[ee]]),he(f[ee]),J++}return We!=63&&he(M),z}function ke(O){O=Math.min(Math.max(O,1),100),s!=O&&(function(G){for(var z=[16,11,10,16,24,40,51,61,12,12,14,19,26,58,60,55,14,13,16,24,40,57,69,56,14,17,22,29,51,87,80,62,18,22,37,56,68,109,103,77,24,35,55,64,81,104,113,92,49,64,78,87,103,121,120,101,72,92,95,98,112,100,103,99],U=0;U<64;U++){var Y=o((z[U]*G+50)/100);Y=Math.min(Math.max(Y,1),255),l[_[U]]=Y}for(var ee=[17,18,24,47,99,99,99,99,18,21,26,66,99,99,99,99,24,26,56,99,99,99,99,99,47,66,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99],M=0;M<64;M++){var H=o((ee[M]*G+50)/100);H=Math.min(Math.max(H,1),255),c[_[M]]=H}for(var te=[1,1.387039845,1.306562965,1.175875602,1,.785694958,.5411961,.275899379],Ce=0,V=0;V<8;V++)for(var We=0;We<8;We++)u[Ce]=1/(l[_[Ce]]*te[V]*te[We]*8),d[Ce]=1/(c[_[Ce]]*te[V]*te[We]*8),Ce++}(O<50?Math.floor(5e3/O):Math.floor(200-2*O)),s=O)}this.encode=function(O,G){G&&ke(G),p=new Array,x=0,v=7,ae(65496),ae(65504),ae(16),ve(74),ve(70),ve(73),ve(70),ve(0),ve(1),ve(1),ve(0),ae(1),ae(1),ve(0),ve(0),function(){ae(65499),ae(132),ve(0);for(var yt=0;yt<64;yt++)ve(l[yt]);ve(1);for(var bt=0;bt<64;bt++)ve(c[bt])}(),function(yt,bt){ae(65472),ae(17),ve(8),ae(bt),ae(yt),ve(3),ve(1),ve(17),ve(0),ve(2),ve(17),ve(1),ve(3),ve(17),ve(1)}(O.width,O.height),function(){ae(65476),ae(418),ve(0);for(var yt=0;yt<16;yt++)ve(S[yt+1]);for(var bt=0;bt<=11;bt++)ve(E[bt]);ve(16);for(var Nt=0;Nt<16;Nt++)ve(T[Nt+1]);for(var jt=0;jt<=161;jt++)ve(k[jt]);ve(1);for(var St=0;St<16;St++)ve(B[St+1]);for(var Ve=0;Ve<=11;Ve++)ve(D[Ve]);ve(17);for(var Te=0;Te<16;Te++)ve(X[Te+1]);for(var qe=0;qe<=161;qe++)ve(me[qe])}(),ae(65498),ae(12),ve(3),ve(1),ve(0),ve(2),ve(17),ve(3),ve(17),ve(0),ve(63),ve(0);var z=0,U=0,Y=0;x=0,v=7,this.encode.displayName="_encode_";for(var ee,M,H,te,Ce,V,We,ie,J,Oe=O.data,fe=O.width,_e=O.height,Ue=4*fe,Ye=0;Ye<_e;){for(ee=0;ee<Ue;){for(Ce=Ue*Ye+ee,We=-1,ie=0,J=0;J<64;J++)V=Ce+(ie=J>>3)*Ue+(We=4*(7&J)),Ye+ie>=_e&&(V-=Ue*(Ye+1+ie-_e)),ee+We>=Ue&&(V-=ee+We-Ue+4),M=Oe[V++],H=Oe[V++],te=Oe[V++],y[J]=(I[M]+I[H+256|0]+I[te+512|0]>>16)-128,b[J]=(I[M+768|0]+I[H+1024|0]+I[te+1280|0]>>16)-128,w[J]=(I[M+1280|0]+I[H+1536|0]+I[te+1792|0]>>16)-128;z=Pe(y,u,z,e,n),U=Pe(b,d,U,r,a),Y=Pe(w,d,Y,r,a),ee+=32}Ye+=8}if(v>=0){var At=[];At[1]=v+1,At[0]=(1<<v+1)-1,he(At)}return ae(65497),new Uint8Array(p)},t=t||50,function(){for(var O=String.fromCharCode,G=0;G<256;G++)j[G]=O(G)}(),e=pe(S,E),r=pe(B,D),n=pe(T,k),a=pe(X,me),function(){for(var O=1,G=2,z=1;z<=15;z++){for(var U=O;U<G;U++)A[32767+U]=z,f[32767+U]=[],f[32767+U][1]=z,f[32767+U][0]=U;for(var Y=-(G-1);Y<=-O;Y++)A[32767+Y]=z,f[32767+Y]=[],f[32767+Y][1]=z,f[32767+Y][0]=G-1+Y;O<<=1,G<<=1}}(),function(){for(var O=0;O<256;O++)I[O]=19595*O,I[O+256|0]=38470*O,I[O+512|0]=7471*O+32768,I[O+768|0]=-11059*O,I[O+1024|0]=-21709*O,I[O+1280|0]=32768*O+8421375,I[O+1536|0]=-27439*O,I[O+1792|0]=-5329*O}(),ke(t)}/**
 * @license
 * Copyright (c) 2017 Aras Abbasi
 *
 * Licensed under the MIT License.
 * http://opensource.org/licenses/mit-license
 */function Wd(t,e){if(this.pos=0,this.buffer=t,this.datav=new DataView(t.buffer),this.is_with_alpha=!!e,this.bottom_up=!0,this.flag=String.fromCharCode(this.buffer[0])+String.fromCharCode(this.buffer[1]),this.pos+=2,["BM","BA","CI","CP","IC","PT"].indexOf(this.flag)===-1)throw new Error("Invalid BMP File");this.parseHeader(),this.parseBGR()}function VV(t){function e(E){if(!E)throw Error("assert :P")}function r(E,T,k){for(var B=0;4>B;B++)if(E[T+B]!=k.charCodeAt(B))return!0;return!1}function n(E,T,k,B,D){for(var X=0;X<D;X++)E[T+X]=k[B+X]}function a(E,T,k,B){for(var D=0;D<B;D++)E[T+D]=k}function s(E){return new Int32Array(E)}function o(E,T){for(var k=[],B=0;B<E;B++)k.push(new T);return k}function l(E,T){var k=[];return function B(D,X,me){for(var pe=me[X],he=0;he<pe&&(D.push(me.length>X+1?[]:new T),!(me.length<X+1));he++)B(D[he],X+1,me)}(k,0,E),k}var c=function(){var E=this;function T(N,F){for(var W=1<<F-1>>>0;N&W;)W>>>=1;return W?(N&W-1)+W:N}function k(N,F,W,le,je){e(!(le%W));do N[F+(le-=W)]=je;while(0<le)}function B(N,F,W,le,je){if(e(2328>=je),512>=je)var Qe=s(512);else if((Qe=s(je))==null)return 0;return function($e,ze,Ze,it,Ct,Vt){var ot,It,Dt=ze,sr=1<<Ze,Qt=s(16),ur=s(16);for(e(Ct!=0),e(it!=null),e($e!=null),e(0<Ze),It=0;It<Ct;++It){if(15<it[It])return 0;++Qt[it[It]]}if(Qt[0]==Ct)return 0;for(ur[1]=0,ot=1;15>ot;++ot){if(Qt[ot]>1<<ot)return 0;ur[ot+1]=ur[ot]+Qt[ot]}for(It=0;It<Ct;++It)ot=it[It],0<it[It]&&(Vt[ur[ot]++]=It);if(ur[15]==1)return(it=new D).g=0,it.value=Vt[0],k($e,Dt,1,sr,it),sr;var dr,Sr=-1,br=sr-1,xn=0,on=1,Wn=1,hn=1<<Ze;for(It=0,ot=1,Ct=2;ot<=Ze;++ot,Ct<<=1){if(on+=Wn<<=1,0>(Wn-=Qt[ot]))return 0;for(;0<Qt[ot];--Qt[ot])(it=new D).g=ot,it.value=Vt[It++],k($e,Dt+xn,Ct,hn,it),xn=T(xn,ot)}for(ot=Ze+1,Ct=2;15>=ot;++ot,Ct<<=1){if(on+=Wn<<=1,0>(Wn-=Qt[ot]))return 0;for(;0<Qt[ot];--Qt[ot]){if(it=new D,(xn&br)!=Sr){for(Dt+=hn,dr=1<<(Sr=ot)-Ze;15>Sr&&!(0>=(dr-=Qt[Sr]));)++Sr,dr<<=1;sr+=hn=1<<(dr=Sr-Ze),$e[ze+(Sr=xn&br)].g=dr+Ze,$e[ze+Sr].value=Dt-ze-Sr}it.g=ot-Ze,it.value=Vt[It++],k($e,Dt+(xn>>Ze),Ct,hn,it),xn=T(xn,ot)}}return on!=2*ur[15]-1?0:sr}(N,F,W,le,je,Qe)}function D(){this.value=this.g=0}function X(){this.value=this.g=0}function me(){this.G=o(5,D),this.H=s(5),this.jc=this.Qb=this.qb=this.nd=0,this.pd=o($m,X)}function pe(N,F,W,le){e(N!=null),e(F!=null),e(2147483648>le),N.Ca=254,N.I=0,N.b=-8,N.Ka=0,N.oa=F,N.pa=W,N.Jd=F,N.Yc=W+le,N.Zc=4<=le?W+le-4+1:W,M(N)}function he(N,F){for(var W=0;0<F--;)W|=te(N,128)<<F;return W}function ve(N,F){var W=he(N,F);return H(N)?-W:W}function ae(N,F,W,le){var je,Qe=0;for(e(N!=null),e(F!=null),e(4294967288>le),N.Sb=le,N.Ra=0,N.u=0,N.h=0,4<le&&(le=4),je=0;je<le;++je)Qe+=F[W+je]<<8*je;N.Ra=Qe,N.bb=le,N.oa=F,N.pa=W}function Pe(N){for(;8<=N.u&&N.bb<N.Sb;)N.Ra>>>=8,N.Ra+=N.oa[N.pa+N.bb]<<qA-8>>>0,++N.bb,N.u-=8;U(N)&&(N.h=1,N.u=0)}function ke(N,F){if(e(0<=F),!N.h&&F<=mu){var W=z(N)&Au[F];return N.u+=F,Pe(N),W}return N.h=1,N.u=0}function O(){this.b=this.Ca=this.I=0,this.oa=[],this.pa=0,this.Jd=[],this.Yc=0,this.Zc=[],this.Ka=0}function G(){this.Ra=0,this.oa=[],this.h=this.u=this.bb=this.Sb=this.pa=0}function z(N){return N.Ra>>>(N.u&qA-1)>>>0}function U(N){return e(N.bb<=N.Sb),N.h||N.bb==N.Sb&&N.u>qA}function Y(N,F){N.u=F,N.h=U(N)}function ee(N){N.u>=vh&&(e(N.u>=vh),Pe(N))}function M(N){e(N!=null&&N.oa!=null),N.pa<N.Zc?(N.I=(N.oa[N.pa++]|N.I<<8)>>>0,N.b+=8):(e(N!=null&&N.oa!=null),N.pa<N.Yc?(N.b+=8,N.I=N.oa[N.pa++]|N.I<<8):N.Ka?N.b=0:(N.I<<=8,N.b+=8,N.Ka=1))}function H(N){return he(N,1)}function te(N,F){var W=N.Ca;0>N.b&&M(N);var le=N.b,je=W*F>>>8,Qe=(N.I>>>le>je)+0;for(Qe?(W-=je,N.I-=je+1<<le>>>0):W=je+1,le=W,je=0;256<=le;)je+=8,le>>=8;return le=7^je+zA[le],N.b-=le,N.Ca=(W<<le)-1,Qe}function Ce(N,F,W){N[F+0]=W>>24&255,N[F+1]=W>>16&255,N[F+2]=W>>8&255,N[F+3]=255&W}function V(N,F){return N[F+0]|N[F+1]<<8}function We(N,F){return V(N,F)|N[F+2]<<16}function ie(N,F){return V(N,F)|V(N,F+2)<<16}function J(N,F){var W=1<<F;return e(N!=null),e(0<F),N.X=s(W),N.X==null?0:(N.Mb=32-F,N.Xa=F,1)}function Oe(N,F){e(N!=null),e(F!=null),e(N.Xa==F.Xa),n(F.X,0,N.X,0,1<<F.Xa)}function fe(){this.X=[],this.Xa=this.Mb=0}function _e(N,F,W,le){e(W!=null),e(le!=null);var je=W[0],Qe=le[0];return je==0&&(je=(N*Qe+F/2)/F),Qe==0&&(Qe=(F*je+N/2)/N),0>=je||0>=Qe?0:(W[0]=je,le[0]=Qe,1)}function Ue(N,F){return N+(1<<F)-1>>>F}function Ye(N,F){return((4278255360&N)+(4278255360&F)>>>0&4278255360)+((16711935&N)+(16711935&F)>>>0&16711935)>>>0}function At(N,F){E[F]=function(W,le,je,Qe,$e,ze,Ze){var it;for(it=0;it<$e;++it){var Ct=E[N](ze[Ze+it-1],je,Qe+it);ze[Ze+it]=Ye(W[le+it],Ct)}}}function yt(){this.ud=this.hd=this.jd=0}function bt(N,F){return((4278124286&(N^F))>>>1)+(N&F)>>>0}function Nt(N){return 0<=N&&256>N?N:0>N?0:255<N?255:void 0}function jt(N,F){return Nt(N+(N-F+.5>>1))}function St(N,F,W){return Math.abs(F-W)-Math.abs(N-W)}function Ve(N,F,W,le,je,Qe,$e){for(le=Qe[$e-1],W=0;W<je;++W)Qe[$e+W]=le=Ye(N[F+W],le)}function Te(N,F,W,le,je){var Qe;for(Qe=0;Qe<W;++Qe){var $e=N[F+Qe],ze=$e>>8&255,Ze=16711935&(Ze=(Ze=16711935&$e)+((ze<<16)+ze));le[je+Qe]=(4278255360&$e)+Ze>>>0}}function qe(N,F){F.jd=255&N,F.hd=N>>8&255,F.ud=N>>16&255}function ge(N,F,W,le,je,Qe){var $e;for($e=0;$e<le;++$e){var ze=F[W+$e],Ze=ze>>>8,it=ze,Ct=255&(Ct=(Ct=ze>>>16)+((N.jd<<24>>24)*(Ze<<24>>24)>>>5));it=255&(it=(it+=(N.hd<<24>>24)*(Ze<<24>>24)>>>5)+((N.ud<<24>>24)*(Ct<<24>>24)>>>5)),je[Qe+$e]=(4278255360&ze)+(Ct<<16)+it}}function q(N,F,W,le,je){E[F]=function(Qe,$e,ze,Ze,it,Ct,Vt,ot,It){for(Ze=Vt;Ze<ot;++Ze)for(Vt=0;Vt<It;++Vt)it[Ct++]=je(ze[le(Qe[$e++])])},E[N]=function(Qe,$e,ze,Ze,it,Ct,Vt){var ot=8>>Qe.b,It=Qe.Ea,Dt=Qe.K[0],sr=Qe.w;if(8>ot)for(Qe=(1<<Qe.b)-1,sr=(1<<ot)-1;$e<ze;++$e){var Qt,ur=0;for(Qt=0;Qt<It;++Qt)Qt&Qe||(ur=le(Ze[it++])),Ct[Vt++]=je(Dt[ur&sr]),ur>>=ot}else E["VP8LMapColor"+W](Ze,it,Dt,sr,Ct,Vt,$e,ze,It)}}function se(N,F,W,le,je){for(W=F+W;F<W;){var Qe=N[F++];le[je++]=Qe>>16&255,le[je++]=Qe>>8&255,le[je++]=255&Qe}}function ye(N,F,W,le,je){for(W=F+W;F<W;){var Qe=N[F++];le[je++]=Qe>>16&255,le[je++]=Qe>>8&255,le[je++]=255&Qe,le[je++]=Qe>>24&255}}function ue(N,F,W,le,je){for(W=F+W;F<W;){var Qe=($e=N[F++])>>16&240|$e>>12&15,$e=240&$e|$e>>28&15;le[je++]=Qe,le[je++]=$e}}function Le(N,F,W,le,je){for(W=F+W;F<W;){var Qe=($e=N[F++])>>16&248|$e>>13&7,$e=$e>>5&224|$e>>3&31;le[je++]=Qe,le[je++]=$e}}function ct(N,F,W,le,je){for(W=F+W;F<W;){var Qe=N[F++];le[je++]=255&Qe,le[je++]=Qe>>8&255,le[je++]=Qe>>16&255}}function ht(N,F,W,le,je,Qe){if(Qe==0)for(W=F+W;F<W;)Ce(le,((Qe=N[F++])[0]>>24|Qe[1]>>8&65280|Qe[2]<<8&16711680|Qe[3]<<24)>>>0),je+=32;else n(le,je,N,F,W)}function xe(N,F){E[F][0]=E[N+"0"],E[F][1]=E[N+"1"],E[F][2]=E[N+"2"],E[F][3]=E[N+"3"],E[F][4]=E[N+"4"],E[F][5]=E[N+"5"],E[F][6]=E[N+"6"],E[F][7]=E[N+"7"],E[F][8]=E[N+"8"],E[F][9]=E[N+"9"],E[F][10]=E[N+"10"],E[F][11]=E[N+"11"],E[F][12]=E[N+"12"],E[F][13]=E[N+"13"],E[F][14]=E[N+"0"],E[F][15]=E[N+"0"]}function Ae(N){return N==P4||N==B4||N==CN||N==T4}function Re(){this.eb=[],this.size=this.A=this.fb=0}function lt(){this.y=[],this.f=[],this.ea=[],this.F=[],this.Tc=this.Ed=this.Cd=this.Fd=this.lb=this.Db=this.Ab=this.fa=this.J=this.W=this.N=this.O=0}function Ne(){this.Rd=this.height=this.width=this.S=0,this.f={},this.f.RGBA=new Re,this.f.kb=new lt,this.sd=null}function De(){this.width=[0],this.height=[0],this.Pd=[0],this.Qd=[0],this.format=[0]}function xt(){this.Id=this.fd=this.Md=this.hb=this.ib=this.da=this.bd=this.cd=this.j=this.v=this.Da=this.Sd=this.ob=0}function _t(N){return alert("todo:WebPSamplerProcessPlane"),N.T}function Et(N,F){var W=N.T,le=F.ba.f.RGBA,je=le.eb,Qe=le.fb+N.ka*le.A,$e=Zu[F.ba.S],ze=N.y,Ze=N.O,it=N.f,Ct=N.N,Vt=N.ea,ot=N.W,It=F.cc,Dt=F.dc,sr=F.Mc,Qt=F.Nc,ur=N.ka,dr=N.ka+N.T,Sr=N.U,br=Sr+1>>1;for(ur==0?$e(ze,Ze,null,null,it,Ct,Vt,ot,it,Ct,Vt,ot,je,Qe,null,null,Sr):($e(F.ec,F.fc,ze,Ze,It,Dt,sr,Qt,it,Ct,Vt,ot,je,Qe-le.A,je,Qe,Sr),++W);ur+2<dr;ur+=2)It=it,Dt=Ct,sr=Vt,Qt=ot,Ct+=N.Rc,ot+=N.Rc,Qe+=2*le.A,$e(ze,(Ze+=2*N.fa)-N.fa,ze,Ze,It,Dt,sr,Qt,it,Ct,Vt,ot,je,Qe-le.A,je,Qe,Sr);return Ze+=N.fa,N.j+dr<N.o?(n(F.ec,F.fc,ze,Ze,Sr),n(F.cc,F.dc,it,Ct,br),n(F.Mc,F.Nc,Vt,ot,br),W--):1&dr||$e(ze,Ze,null,null,it,Ct,Vt,ot,it,Ct,Vt,ot,je,Qe+le.A,null,null,Sr),W}function Mt(N,F,W){var le=N.F,je=[N.J];if(le!=null){var Qe=N.U,$e=F.ba.S,ze=$e==NN||$e==CN;F=F.ba.f.RGBA;var Ze=[0],it=N.ka;Ze[0]=N.T,N.Kb&&(it==0?--Ze[0]:(--it,je[0]-=N.width),N.j+N.ka+N.T==N.o&&(Ze[0]=N.o-N.j-it));var Ct=F.eb;it=F.fb+it*F.A,N=W8(le,je[0],N.width,Qe,Ze,Ct,it+(ze?0:3),F.A),e(W==Ze),N&&Ae($e)&&Q1(Ct,it,ze,Qe,Ze,F.A)}return 0}function nt(N){var F=N.ma,W=F.ba.S,le=11>W,je=W==bN||W==wN||W==NN||W==j4||W==12||Ae(W);if(F.memory=null,F.Ib=null,F.Jb=null,F.Nd=null,!k1(F.Oa,N,je?11:12))return 0;if(je&&Ae(W)&&Xu(),N.da)alert("todo:use_scaling");else{if(le){if(F.Ib=_t,N.Kb){if(W=N.U+1>>1,F.memory=s(N.U+2*W),F.memory==null)return 0;F.ec=F.memory,F.fc=0,F.cc=F.ec,F.dc=F.fc+N.U,F.Mc=F.cc,F.Nc=F.dc+W,F.Ib=Et,Xu()}}else alert("todo:EmitYUV");je&&(F.Jb=Mt,le&&Lc())}if(le&&!dL){for(N=0;256>N;++N)Ede[N]=89858*(N-128)+EN>>_N,jde[N]=-22014*(N-128)+EN,Ide[N]=-45773*(N-128),Sde[N]=113618*(N-128)+EN>>_N;for(N=H1;N<O4;++N)F=76283*(N-16)+EN>>_N,Pde[N-H1]=Qr(F,255),Bde[N-H1]=Qr(F+8>>4,15);dL=1}return 1}function Ee(N){var F=N.ma,W=N.U,le=N.T;return e(!(1&N.ka)),0>=W||0>=le?0:(W=F.Ib(N,F),F.Jb!=null&&F.Jb(N,F,W),F.Dc+=W,1)}function we(N){N.ma.memory=null}function oe(N,F,W,le){return ke(N,8)!=47?0:(F[0]=ke(N,14)+1,W[0]=ke(N,14)+1,le[0]=ke(N,1),ke(N,3)!=0?0:!N.h)}function Fe(N,F){if(4>N)return N+1;var W=N-2>>1;return(2+(1&N)<<W)+ke(F,W)+1}function ce(N,F){return 120<F?F-120:1<=(W=((W=fde[F-1])>>4)*N+(8-(15&W)))?W:1;var W}function Me(N,F,W){var le=z(W),je=N[F+=255&le].g-8;return 0<je&&(Y(W,W.u+8),le=z(W),F+=N[F].value,F+=le&(1<<je)-1),Y(W,W.u+N[F].g),N[F].value}function Ke(N,F,W){return W.g+=N.g,W.value+=N.value<<F>>>0,e(8>=W.g),N.g}function P(N,F,W){var le=N.xc;return e((F=le==0?0:N.vc[N.md*(W>>le)+(F>>le)])<N.Wb),N.Ya[F]}function R(N,F,W,le){var je=N.ab,Qe=N.c*F,$e=N.C;F=$e+F;var ze=W,Ze=le;for(le=N.Ta,W=N.Ua;0<je--;){var it=N.gc[je],Ct=$e,Vt=F,ot=ze,It=Ze,Dt=(Ze=le,ze=W,it.Ea);switch(e(Ct<Vt),e(Vt<=it.nc),it.hc){case 2:ji(ot,It,(Vt-Ct)*Dt,Ze,ze);break;case 0:var sr=Ct,Qt=Vt,ur=Ze,dr=ze,Sr=(hn=it).Ea;sr==0&&(O1(ot,It,null,null,1,ur,dr),Ve(ot,It+1,0,0,Sr-1,ur,dr+1),It+=Sr,dr+=Sr,++sr);for(var br=1<<hn.b,xn=br-1,on=Ue(Sr,hn.b),Wn=hn.K,hn=hn.w+(sr>>hn.b)*on;sr<Qt;){var pa=Wn,fo=hn,Xn=1;for(qg(ot,It,ur,dr-Sr,1,ur,dr);Xn<Sr;){var An=(Xn&~xn)+br;An>Sr&&(An=Sr),(0,R1[pa[fo++]>>8&15])(ot,It+ +Xn,ur,dr+Xn-Sr,An-Xn,ur,dr+Xn),Xn=An}It+=Sr,dr+=Sr,++sr&xn||(hn+=on)}Vt!=it.nc&&n(Ze,ze-Dt,Ze,ze+(Vt-Ct-1)*Dt,Dt);break;case 1:for(Dt=ot,Qt=It,Sr=(ot=it.Ea)-(dr=ot&~(ur=(It=1<<it.b)-1)),sr=Ue(ot,it.b),br=it.K,it=it.w+(Ct>>it.b)*sr;Ct<Vt;){for(xn=br,on=it,Wn=new yt,hn=Qt+dr,pa=Qt+ot;Qt<hn;)qe(xn[on++],Wn),M1(Wn,Dt,Qt,It,Ze,ze),Qt+=It,ze+=It;Qt<pa&&(qe(xn[on++],Wn),M1(Wn,Dt,Qt,Sr,Ze,ze),Qt+=Sr,ze+=Sr),++Ct&ur||(it+=sr)}break;case 3:if(ot==Ze&&It==ze&&0<it.b){for(Qt=Ze,ot=Dt=ze+(Vt-Ct)*Dt-(dr=(Vt-Ct)*Ue(it.Ea,it.b)),It=Ze,ur=ze,sr=[],dr=(Sr=dr)-1;0<=dr;--dr)sr[dr]=It[ur+dr];for(dr=Sr-1;0<=dr;--dr)Qt[ot+dr]=sr[dr];gN(it,Ct,Vt,Ze,Dt,Ze,ze)}else gN(it,Ct,Vt,ot,It,Ze,ze)}ze=le,Ze=W}Ze!=W&&n(le,W,ze,Ze,Qe)}function L(N,F){var W=N.V,le=N.Ba+N.c*N.C,je=F-N.C;if(e(F<=N.l.o),e(16>=je),0<je){var Qe=N.l,$e=N.Ta,ze=N.Ua,Ze=Qe.width;if(R(N,je,W,le),je=ze=[ze],e((W=N.C)<(le=F)),e(Qe.v<Qe.va),le>Qe.o&&(le=Qe.o),W<Qe.j){var it=Qe.j-W;W=Qe.j,je[0]+=it*Ze}if(W>=le?W=0:(je[0]+=4*Qe.v,Qe.ka=W-Qe.j,Qe.U=Qe.va-Qe.v,Qe.T=le-W,W=1),W){if(ze=ze[0],11>(W=N.ca).S){var Ct=W.f.RGBA,Vt=(le=W.S,je=Qe.U,Qe=Qe.T,it=Ct.eb,Ct.A),ot=Qe;for(Ct=Ct.fb+N.Ma*Ct.A;0<ot--;){var It=$e,Dt=ze,sr=je,Qt=it,ur=Ct;switch(le){case yN:L1(It,Dt,sr,Qt,ur);break;case bN:WA(It,Dt,sr,Qt,ur);break;case P4:WA(It,Dt,sr,Qt,ur),Q1(Qt,ur,0,sr,1,0);break;case rL:Gm(It,Dt,sr,Qt,ur);break;case wN:ht(It,Dt,sr,Qt,ur,1);break;case B4:ht(It,Dt,sr,Qt,ur,1),Q1(Qt,ur,0,sr,1,0);break;case NN:ht(It,Dt,sr,Qt,ur,0);break;case CN:ht(It,Dt,sr,Qt,ur,0),Q1(Qt,ur,1,sr,1,0);break;case j4:XA(It,Dt,sr,Qt,ur);break;case T4:XA(It,Dt,sr,Qt,ur),z8(Qt,ur,sr,1,0);break;case nL:YA(It,Dt,sr,Qt,ur);break;default:e(0)}ze+=Ze,Ct+=Vt}N.Ma+=Qe}else alert("todo:EmitRescaledRowsYUVA");e(N.Ma<=W.height)}}N.C=F,e(N.C<=N.i)}function K(N){var F;if(0<N.ua)return 0;for(F=0;F<N.Wb;++F){var W=N.Ya[F].G,le=N.Ya[F].H;if(0<W[1][le[1]+0].g||0<W[2][le[2]+0].g||0<W[3][le[3]+0].g)return 0}return 1}function re(N,F,W,le,je,Qe){if(N.Z!=0){var $e=N.qd,ze=N.rd;for(e(e0[N.Z]!=null);F<W;++F)e0[N.Z]($e,ze,le,je,le,je,Qe),$e=le,ze=je,je+=Qe;N.qd=$e,N.rd=ze}}function de(N,F){var W=N.l.ma,le=W.Z==0||W.Z==1?N.l.j:N.C;if(le=N.C<le?le:N.C,e(F<=N.l.o),F>le){var je=N.l.width,Qe=W.ca,$e=W.tb+je*le,ze=N.V,Ze=N.Ba+N.c*le,it=N.gc;e(N.ab==1),e(it[0].hc==3),kf(it[0],le,F,ze,Ze,Qe,$e),re(W,le,F,Qe,$e,je)}N.C=N.Ma=F}function Ge(N,F,W,le,je,Qe,$e){var ze=N.$/le,Ze=N.$%le,it=N.m,Ct=N.s,Vt=W+N.$,ot=Vt;je=W+le*je;var It=W+le*Qe,Dt=280+Ct.ua,sr=N.Pb?ze:16777216,Qt=0<Ct.ua?Ct.Wa:null,ur=Ct.wc,dr=Vt<It?P(Ct,Ze,ze):null;e(N.C<Qe),e(It<=je);var Sr=!1;e:for(;;){for(;Sr||Vt<It;){var br=0;if(ze>=sr){var xn=Vt-W;e((sr=N).Pb),sr.wd=sr.m,sr.xd=xn,0<sr.s.ua&&Oe(sr.s.Wa,sr.s.vb),sr=ze+Ade}if(Ze&ur||(dr=P(Ct,Ze,ze)),e(dr!=null),dr.Qb&&(F[Vt]=dr.qb,Sr=!0),!Sr)if(ee(it),dr.jc){br=it,xn=F;var on=Vt,Wn=dr.pd[z(br)&$m-1];e(dr.jc),256>Wn.g?(Y(br,br.u+Wn.g),xn[on]=Wn.value,br=0):(Y(br,br.u+Wn.g-256),e(256<=Wn.value),br=Wn.value),br==0&&(Sr=!0)}else br=Me(dr.G[0],dr.H[0],it);if(it.h)break;if(Sr||256>br){if(!Sr)if(dr.nd)F[Vt]=(dr.qb|br<<8)>>>0;else{if(ee(it),Sr=Me(dr.G[1],dr.H[1],it),ee(it),xn=Me(dr.G[2],dr.H[2],it),on=Me(dr.G[3],dr.H[3],it),it.h)break;F[Vt]=(on<<24|Sr<<16|br<<8|xn)>>>0}if(Sr=!1,++Vt,++Ze>=le&&(Ze=0,++ze,$e!=null&&ze<=Qe&&!(ze%16)&&$e(N,ze),Qt!=null))for(;ot<Vt;)br=F[ot++],Qt.X[(506832829*br&4294967295)>>>Qt.Mb]=br}else if(280>br){if(br=Fe(br-256,it),xn=Me(dr.G[4],dr.H[4],it),ee(it),xn=ce(le,xn=Fe(xn,it)),it.h)break;if(Vt-W<xn||je-Vt<br)break e;for(on=0;on<br;++on)F[Vt+on]=F[Vt+on-xn];for(Vt+=br,Ze+=br;Ze>=le;)Ze-=le,++ze,$e!=null&&ze<=Qe&&!(ze%16)&&$e(N,ze);if(e(Vt<=je),Ze&ur&&(dr=P(Ct,Ze,ze)),Qt!=null)for(;ot<Vt;)br=F[ot++],Qt.X[(506832829*br&4294967295)>>>Qt.Mb]=br}else{if(!(br<Dt))break e;for(Sr=br-280,e(Qt!=null);ot<Vt;)br=F[ot++],Qt.X[(506832829*br&4294967295)>>>Qt.Mb]=br;br=Vt,e(!(Sr>>>(xn=Qt).Xa)),F[br]=xn.X[Sr],Sr=!0}Sr||e(it.h==U(it))}if(N.Pb&&it.h&&Vt<je)e(N.m.h),N.a=5,N.m=N.wd,N.$=N.xd,0<N.s.ua&&Oe(N.s.vb,N.s.Wa);else{if(it.h)break e;$e!=null&&$e(N,ze>Qe?Qe:ze),N.a=0,N.$=Vt-W}return 1}return N.a=3,0}function rt(N){e(N!=null),N.vc=null,N.yc=null,N.Ya=null;var F=N.Wa;F!=null&&(F.X=null),N.vb=null,e(N!=null)}function ft(){var N=new Bn;return N==null?null:(N.a=0,N.xb=iL,xe("Predictor","VP8LPredictors"),xe("Predictor","VP8LPredictors_C"),xe("PredictorAdd","VP8LPredictorsAdd"),xe("PredictorAdd","VP8LPredictorsAdd_C"),ji=Te,M1=ge,L1=se,WA=ye,XA=ue,YA=Le,Gm=ct,E.VP8LMapColor32b=Tf,E.VP8LMapColor8b=D1,N)}function et(N,F,W,le,je){var Qe=1,$e=[N],ze=[F],Ze=le.m,it=le.s,Ct=null,Vt=0;e:for(;;){if(W)for(;Qe&&ke(Ze,1);){var ot=$e,It=ze,Dt=le,sr=1,Qt=Dt.m,ur=Dt.gc[Dt.ab],dr=ke(Qt,2);if(Dt.Oc&1<<dr)Qe=0;else{switch(Dt.Oc|=1<<dr,ur.hc=dr,ur.Ea=ot[0],ur.nc=It[0],ur.K=[null],++Dt.ab,e(4>=Dt.ab),dr){case 0:case 1:ur.b=ke(Qt,3)+2,sr=et(Ue(ur.Ea,ur.b),Ue(ur.nc,ur.b),0,Dt,ur.K),ur.K=ur.K[0];break;case 3:var Sr,br=ke(Qt,8)+1,xn=16<br?0:4<br?1:2<br?2:3;if(ot[0]=Ue(ur.Ea,xn),ur.b=xn,Sr=sr=et(br,1,0,Dt,ur.K)){var on,Wn=br,hn=ur,pa=1<<(8>>hn.b),fo=s(pa);if(fo==null)Sr=0;else{var Xn=hn.K[0],An=hn.w;for(fo[0]=hn.K[0][0],on=1;on<1*Wn;++on)fo[on]=Ye(Xn[An+on],fo[on-1]);for(;on<4*pa;++on)fo[on]=0;hn.K[0]=null,hn.K[0]=fo,Sr=1}}sr=Sr;break;case 2:break;default:e(0)}Qe=sr}}if($e=$e[0],ze=ze[0],Qe&&ke(Ze,1)&&!(Qe=1<=(Vt=ke(Ze,4))&&11>=Vt)){le.a=3;break e}var qr;if(qr=Qe)t:{var Bi,$n,va,_s=le,ll=$e,dc=ze,gi=Vt,Dl=W,fc=_s.m,ho=_s.s,wa=[null],Ha=1,xi=0,$a=hde[gi];r:for(;;){if(Dl&&ke(fc,1)){var cl=ke(fc,3)+2,Kd=Ue(ll,cl),Ti=Ue(dc,cl),Uc=Kd*Ti;if(!et(Kd,Ti,0,_s,wa))break r;for(wa=wa[0],ho.xc=cl,Bi=0;Bi<Uc;++Bi){var ds=wa[Bi]>>8&65535;wa[Bi]=ds,ds>=Ha&&(Ha=ds+1)}}if(fc.h)break r;for($n=0;5>$n;++$n){var Ao=aL[$n];!$n&&0<gi&&(Ao+=1<<gi),xi<Ao&&(xi=Ao)}var gu=o(Ha*$a,D),hc=Ha,xu=o(hc,me);if(xu==null)var vu=null;else e(65536>=hc),vu=xu;var Qc=s(xi);if(vu==null||Qc==null||gu==null){_s.a=1;break r}var yu=gu;for(Bi=va=0;Bi<Ha;++Bi){var xs=vu[Bi],bu=xs.G,qd=xs.H,qm=0,wh=1,ul=0;for($n=0;5>$n;++$n){Ao=aL[$n],bu[$n]=yu,qd[$n]=va,!$n&&0<gi&&(Ao+=1<<gi);a:{var IN,D4=Ao,jN=_s,$1=Qc,Fde=yu,Ode=va,R4=0,t0=jN.m,Dde=ke(t0,1);if(a($1,0,0,D4),Dde){var Rde=ke(t0,1)+1,Mde=ke(t0,1),AL=ke(t0,Mde==0?1:8);$1[AL]=1,Rde==2&&($1[AL=ke(t0,8)]=1);var PN=1}else{var mL=s(19),pL=ke(t0,4)+4;if(19<pL){jN.a=3;var BN=0;break a}for(IN=0;IN<pL;++IN)mL[dde[IN]]=ke(t0,3);var M4=void 0,G1=void 0,gL=jN,Lde=mL,TN=D4,xL=$1,L4=0,r0=gL.m,vL=8,yL=o(128,D);n:for(;B(yL,0,7,Lde,19);){if(ke(r0,1)){var Ude=2+2*ke(r0,3);if((M4=2+ke(r0,Ude))>TN)break n}else M4=TN;for(G1=0;G1<TN&&M4--;){ee(r0);var bL=yL[0+(127&z(r0))];Y(r0,r0.u+bL.g);var Wg=bL.value;if(16>Wg)xL[G1++]=Wg,Wg!=0&&(vL=Wg);else{var Qde=Wg==16,wL=Wg-16,Vde=cde[wL],NL=ke(r0,lde[wL])+Vde;if(G1+NL>TN)break n;for(var Hde=Qde?vL:0;0<NL--;)xL[G1++]=Hde}}L4=1;break n}L4||(gL.a=3),PN=L4}(PN=PN&&!t0.h)&&(R4=B(Fde,Ode,8,$1,D4)),PN&&R4!=0?BN=R4:(jN.a=3,BN=0)}if(BN==0)break r;if(wh&&ude[$n]==1&&(wh=yu[va].g==0),qm+=yu[va].g,va+=BN,3>=$n){var K1,U4=Qc[0];for(K1=1;K1<Ao;++K1)Qc[K1]>U4&&(U4=Qc[K1]);ul+=U4}}if(xs.nd=wh,xs.Qb=0,wh&&(xs.qb=(bu[3][qd[3]+0].value<<24|bu[1][qd[1]+0].value<<16|bu[2][qd[2]+0].value)>>>0,qm==0&&256>bu[0][qd[0]+0].value&&(xs.Qb=1,xs.qb+=bu[0][qd[0]+0].value<<8)),xs.jc=!xs.Qb&&6>ul,xs.jc){var kN,Nh=xs;for(kN=0;kN<$m;++kN){var n0=kN,a0=Nh.pd[n0],FN=Nh.G[0][Nh.H[0]+n0];256<=FN.value?(a0.g=FN.g+256,a0.value=FN.value):(a0.g=0,a0.value=0,n0>>=Ke(FN,8,a0),n0>>=Ke(Nh.G[1][Nh.H[1]+n0],16,a0),n0>>=Ke(Nh.G[2][Nh.H[2]+n0],0,a0),Ke(Nh.G[3][Nh.H[3]+n0],24,a0))}}}ho.vc=wa,ho.Wb=Ha,ho.Ya=vu,ho.yc=gu,qr=1;break t}qr=0}if(!(Qe=qr)){le.a=3;break e}if(0<Vt){if(it.ua=1<<Vt,!J(it.Wa,Vt)){le.a=1,Qe=0;break e}}else it.ua=0;var Q4=le,CL=$e,$de=ze,V4=Q4.s,H4=V4.xc;if(Q4.c=CL,Q4.i=$de,V4.md=Ue(CL,H4),V4.wc=H4==0?-1:(1<<H4)-1,W){le.xb=bde;break e}if((Ct=s($e*ze))==null){le.a=1,Qe=0;break e}Qe=(Qe=Ge(le,Ct,0,$e,ze,ze,null))&&!Ze.h;break e}return Qe?(je!=null?je[0]=Ct:(e(Ct==null),e(W)),le.$=0,W||rt(it)):rt(it),Qe}function ut(N,F){var W=N.c*N.i,le=W+F+16*F;return e(N.c<=F),N.V=s(le),N.V==null?(N.Ta=null,N.Ua=0,N.a=1,0):(N.Ta=N.V,N.Ua=N.Ba+W+F,1)}function Ot(N,F){var W=N.C,le=F-W,je=N.V,Qe=N.Ba+N.c*W;for(e(F<=N.l.o);0<le;){var $e=16<le?16:le,ze=N.l.ma,Ze=N.l.width,it=Ze*$e,Ct=ze.ca,Vt=ze.tb+Ze*W,ot=N.Ta,It=N.Ua;R(N,$e,je,Qe),X8(ot,It,Ct,Vt,it),re(ze,W,W+$e,Ct,Vt,Ze),le-=$e,je+=$e*N.c,W+=$e}e(W==F),N.C=N.Ma=F}function zt(){this.ub=this.yd=this.td=this.Rb=0}function Bt(){this.Kd=this.Ld=this.Ud=this.Td=this.i=this.c=0}function Lt(){this.Fb=this.Bb=this.Cb=0,this.Zb=s(4),this.Lb=s(4)}function Be(){this.Yb=function(){var N=[];return function F(W,le,je){for(var Qe=je[le],$e=0;$e<Qe&&(W.push(je.length>le+1?[]:0),!(je.length<le+1));$e++)F(W[$e],le+1,je)}(N,0,[3,11]),N}()}function vt(){this.jb=s(3),this.Wc=l([4,8],Be),this.Xc=l([4,17],Be)}function hr(){this.Pc=this.wb=this.Tb=this.zd=0,this.vd=new s(4),this.od=new s(4)}function xr(){this.ld=this.La=this.dd=this.tc=0}function Nr(){this.Na=this.la=0}function gr(){this.Sc=[0,0],this.Eb=[0,0],this.Qc=[0,0],this.ia=this.lc=0}function _r(){this.ad=s(384),this.Za=0,this.Ob=s(16),this.$b=this.Ad=this.ia=this.Gc=this.Hc=this.Dd=0}function Zr(){this.uc=this.M=this.Nb=0,this.wa=Array(new xr),this.Y=0,this.ya=Array(new _r),this.aa=0,this.l=new wr}function Nn(){this.y=s(16),this.f=s(8),this.ea=s(8)}function en(){this.cb=this.a=0,this.sc="",this.m=new O,this.Od=new zt,this.Kc=new Bt,this.ed=new hr,this.Qa=new Lt,this.Ic=this.$c=this.Aa=0,this.D=new Zr,this.Xb=this.Va=this.Hb=this.zb=this.yb=this.Ub=this.za=0,this.Jc=o(8,O),this.ia=0,this.pb=o(4,gr),this.Pa=new vt,this.Bd=this.kc=0,this.Ac=[],this.Bc=0,this.zc=[0,0,0,0],this.Gd=Array(new Nn),this.Hd=0,this.rb=Array(new Nr),this.sb=0,this.wa=Array(new xr),this.Y=0,this.oc=[],this.pc=0,this.sa=[],this.ta=0,this.qa=[],this.ra=0,this.Ha=[],this.B=this.R=this.Ia=0,this.Ec=[],this.M=this.ja=this.Vb=this.Fc=0,this.ya=Array(new _r),this.L=this.aa=0,this.gd=l([4,2],xr),this.ga=null,this.Fa=[],this.Cc=this.qc=this.P=0,this.Gb=[],this.Uc=0,this.mb=[],this.nb=0,this.rc=[],this.Ga=this.Vc=0}function Qr(N,F){return 0>N?0:N>F?F:N}function wr(){this.T=this.U=this.ka=this.height=this.width=0,this.y=[],this.f=[],this.ea=[],this.Rc=this.fa=this.W=this.N=this.O=0,this.ma="void",this.put="VP8IoPutHook",this.ac="VP8IoSetupHook",this.bc="VP8IoTeardownHook",this.ha=this.Kb=0,this.data=[],this.hb=this.ib=this.da=this.o=this.j=this.va=this.v=this.Da=this.ob=this.w=0,this.F=[],this.J=0}function Or(){var N=new en;return N!=null&&(N.a=0,N.sc="OK",N.cb=0,N.Xb=0,V1||(V1=or)),N}function $r(N,F,W){return N.a==0&&(N.a=F,N.sc=W,N.cb=0),0}function mr(N,F,W){return 3<=W&&N[F+0]==157&&N[F+1]==1&&N[F+2]==42}function Kr(N,F){if(N==null)return 0;if(N.a=0,N.sc="OK",F==null)return $r(N,2,"null VP8Io passed to VP8GetHeaders()");var W=F.data,le=F.w,je=F.ha;if(4>je)return $r(N,7,"Truncated header.");var Qe=W[le+0]|W[le+1]<<8|W[le+2]<<16,$e=N.Od;if($e.Rb=!(1&Qe),$e.td=Qe>>1&7,$e.yd=Qe>>4&1,$e.ub=Qe>>5,3<$e.td)return $r(N,3,"Incorrect keyframe parameters.");if(!$e.yd)return $r(N,4,"Frame not displayable.");le+=3,je-=3;var ze=N.Kc;if($e.Rb){if(7>je)return $r(N,7,"cannot parse picture header");if(!mr(W,le,je))return $r(N,3,"Bad code word");ze.c=16383&(W[le+4]<<8|W[le+3]),ze.Td=W[le+4]>>6,ze.i=16383&(W[le+6]<<8|W[le+5]),ze.Ud=W[le+6]>>6,le+=7,je-=7,N.za=ze.c+15>>4,N.Ub=ze.i+15>>4,F.width=ze.c,F.height=ze.i,F.Da=0,F.j=0,F.v=0,F.va=F.width,F.o=F.height,F.da=0,F.ib=F.width,F.hb=F.height,F.U=F.width,F.T=F.height,a((Qe=N.Pa).jb,0,255,Qe.jb.length),e((Qe=N.Qa)!=null),Qe.Cb=0,Qe.Bb=0,Qe.Fb=1,a(Qe.Zb,0,0,Qe.Zb.length),a(Qe.Lb,0,0,Qe.Lb)}if($e.ub>je)return $r(N,7,"bad partition length");pe(Qe=N.m,W,le,$e.ub),le+=$e.ub,je-=$e.ub,$e.Rb&&(ze.Ld=H(Qe),ze.Kd=H(Qe)),ze=N.Qa;var Ze,it=N.Pa;if(e(Qe!=null),e(ze!=null),ze.Cb=H(Qe),ze.Cb){if(ze.Bb=H(Qe),H(Qe)){for(ze.Fb=H(Qe),Ze=0;4>Ze;++Ze)ze.Zb[Ze]=H(Qe)?ve(Qe,7):0;for(Ze=0;4>Ze;++Ze)ze.Lb[Ze]=H(Qe)?ve(Qe,6):0}if(ze.Bb)for(Ze=0;3>Ze;++Ze)it.jb[Ze]=H(Qe)?he(Qe,8):255}else ze.Bb=0;if(Qe.Ka)return $r(N,3,"cannot parse segment header");if((ze=N.ed).zd=H(Qe),ze.Tb=he(Qe,6),ze.wb=he(Qe,3),ze.Pc=H(Qe),ze.Pc&&H(Qe)){for(it=0;4>it;++it)H(Qe)&&(ze.vd[it]=ve(Qe,6));for(it=0;4>it;++it)H(Qe)&&(ze.od[it]=ve(Qe,6))}if(N.L=ze.Tb==0?0:ze.zd?1:2,Qe.Ka)return $r(N,3,"cannot parse filter header");var Ct=je;if(je=Ze=le,le=Ze+Ct,ze=Ct,N.Xb=(1<<he(N.m,2))-1,Ct<3*(it=N.Xb))W=7;else{for(Ze+=3*it,ze-=3*it,Ct=0;Ct<it;++Ct){var Vt=W[je+0]|W[je+1]<<8|W[je+2]<<16;Vt>ze&&(Vt=ze),pe(N.Jc[+Ct],W,Ze,Vt),Ze+=Vt,ze-=Vt,je+=3}pe(N.Jc[+it],W,Ze,ze),W=Ze<le?0:5}if(W!=0)return $r(N,W,"cannot parse partitions");for(W=he(Ze=N.m,7),je=H(Ze)?ve(Ze,4):0,le=H(Ze)?ve(Ze,4):0,ze=H(Ze)?ve(Ze,4):0,it=H(Ze)?ve(Ze,4):0,Ze=H(Ze)?ve(Ze,4):0,Ct=N.Qa,Vt=0;4>Vt;++Vt){if(Ct.Cb){var ot=Ct.Zb[Vt];Ct.Fb||(ot+=W)}else{if(0<Vt){N.pb[Vt]=N.pb[0];continue}ot=W}var It=N.pb[Vt];It.Sc[0]=k4[Qr(ot+je,127)],It.Sc[1]=F4[Qr(ot+0,127)],It.Eb[0]=2*k4[Qr(ot+le,127)],It.Eb[1]=101581*F4[Qr(ot+ze,127)]>>16,8>It.Eb[1]&&(It.Eb[1]=8),It.Qc[0]=k4[Qr(ot+it,117)],It.Qc[1]=F4[Qr(ot+Ze,127)],It.lc=ot+Ze}if(!$e.Rb)return $r(N,4,"Not a key frame.");for(H(Qe),$e=N.Pa,W=0;4>W;++W){for(je=0;8>je;++je)for(le=0;3>le;++le)for(ze=0;11>ze;++ze)it=te(Qe,vde[W][je][le][ze])?he(Qe,8):gde[W][je][le][ze],$e.Wc[W][je].Yb[le][ze]=it;for(je=0;17>je;++je)$e.Xc[W][je]=$e.Wc[W][yde[je]]}return N.kc=H(Qe),N.kc&&(N.Bd=he(Qe,8)),N.cb=1}function or(N,F,W,le,je,Qe,$e){var ze=F[je].Yb[W];for(W=0;16>je;++je){if(!te(N,ze[W+0]))return je;for(;!te(N,ze[W+1]);)if(ze=F[++je].Yb[0],W=0,je==16)return 16;var Ze=F[je+1].Yb;if(te(N,ze[W+2])){var it=N,Ct=0;if(te(it,(ot=ze)[(Vt=W)+3]))if(te(it,ot[Vt+6])){for(ze=0,Vt=2*(Ct=te(it,ot[Vt+8]))+(ot=te(it,ot[Vt+9+Ct])),Ct=0,ot=mde[Vt];ot[ze];++ze)Ct+=Ct+te(it,ot[ze]);Ct+=3+(8<<Vt)}else te(it,ot[Vt+7])?(Ct=7+2*te(it,165),Ct+=te(it,145)):Ct=5+te(it,159);else Ct=te(it,ot[Vt+4])?3+te(it,ot[Vt+5]):2;ze=Ze[2]}else Ct=1,ze=Ze[1];Ze=$e+pde[je],0>(it=N).b&&M(it);var Vt,ot=it.b,It=(Vt=it.Ca>>1)-(it.I>>ot)>>31;--it.b,it.Ca+=It,it.Ca|=1,it.I-=(Vt+1&It)<<ot,Qe[Ze]=((Ct^It)-It)*le[(0<je)+0]}return 16}function dt(N){var F=N.rb[N.sb-1];F.la=0,F.Na=0,a(N.zc,0,0,N.zc.length),N.ja=0}function er(N,F,W,le,je){je=N[F+W+32*le]+(je>>3),N[F+W+32*le]=-256&je?0>je?0:255:je}function Jt(N,F,W,le,je,Qe){er(N,F,0,W,le+je),er(N,F,1,W,le+Qe),er(N,F,2,W,le-Qe),er(N,F,3,W,le-je)}function ar(N){return(20091*N>>16)+N}function tr(N,F,W,le){var je,Qe=0,$e=s(16);for(je=0;4>je;++je){var ze=N[F+0]+N[F+8],Ze=N[F+0]-N[F+8],it=(35468*N[F+4]>>16)-ar(N[F+12]),Ct=ar(N[F+4])+(35468*N[F+12]>>16);$e[Qe+0]=ze+Ct,$e[Qe+1]=Ze+it,$e[Qe+2]=Ze-it,$e[Qe+3]=ze-Ct,Qe+=4,F++}for(je=Qe=0;4>je;++je)ze=(N=$e[Qe+0]+4)+$e[Qe+8],Ze=N-$e[Qe+8],it=(35468*$e[Qe+4]>>16)-ar($e[Qe+12]),er(W,le,0,0,ze+(Ct=ar($e[Qe+4])+(35468*$e[Qe+12]>>16))),er(W,le,1,0,Ze+it),er(W,le,2,0,Ze-it),er(W,le,3,0,ze-Ct),Qe++,le+=32}function fr(N,F,W,le){var je=N[F+0]+4,Qe=35468*N[F+4]>>16,$e=ar(N[F+4]),ze=35468*N[F+1]>>16;Jt(W,le,0,je+$e,N=ar(N[F+1]),ze),Jt(W,le,1,je+Qe,N,ze),Jt(W,le,2,je-Qe,N,ze),Jt(W,le,3,je-$e,N,ze)}function ne(N,F,W,le,je){tr(N,F,W,le),je&&tr(N,F+16,W,le+4)}function He(N,F,W,le){Km(N,F+0,W,le,1),Km(N,F+32,W,le+128,1)}function tt(N,F,W,le){var je;for(N=N[F+0]+4,je=0;4>je;++je)for(F=0;4>F;++F)er(W,le,F,je,N)}function Je(N,F,W,le){N[F+0]&&Ma(N,F+0,W,le),N[F+16]&&Ma(N,F+16,W,le+4),N[F+32]&&Ma(N,F+32,W,le+128),N[F+48]&&Ma(N,F+48,W,le+128+4)}function pt(N,F,W,le){var je,Qe=s(16);for(je=0;4>je;++je){var $e=N[F+0+je]+N[F+12+je],ze=N[F+4+je]+N[F+8+je],Ze=N[F+4+je]-N[F+8+je],it=N[F+0+je]-N[F+12+je];Qe[0+je]=$e+ze,Qe[8+je]=$e-ze,Qe[4+je]=it+Ze,Qe[12+je]=it-Ze}for(je=0;4>je;++je)$e=(N=Qe[0+4*je]+3)+Qe[3+4*je],ze=Qe[1+4*je]+Qe[2+4*je],Ze=Qe[1+4*je]-Qe[2+4*je],it=N-Qe[3+4*je],W[le+0]=$e+ze>>3,W[le+16]=it+Ze>>3,W[le+32]=$e-ze>>3,W[le+48]=it-Ze>>3,le+=64}function wt(N,F,W){var le,je=F-32,Qe=pu,$e=255-N[je-1];for(le=0;le<W;++le){var ze,Ze=Qe,it=$e+N[F-1];for(ze=0;ze<W;++ze)N[F+ze]=Ze[it+N[je+ze]];F+=32}}function Wt(N,F){wt(N,F,4)}function Xt(N,F){wt(N,F,8)}function Rt(N,F){wt(N,F,16)}function $t(N,F){var W;for(W=0;16>W;++W)n(N,F+32*W,N,F-32,16)}function kr(N,F){var W;for(W=16;0<W;--W)a(N,F,N[F-1],16),F+=32}function Zt(N,F,W){var le;for(le=0;16>le;++le)a(F,W+32*le,N,16)}function Dr(N,F){var W,le=16;for(W=0;16>W;++W)le+=N[F-1+32*W]+N[F+W-32];Zt(le>>5,N,F)}function Yr(N,F){var W,le=8;for(W=0;16>W;++W)le+=N[F-1+32*W];Zt(le>>4,N,F)}function zr(N,F){var W,le=8;for(W=0;16>W;++W)le+=N[F+W-32];Zt(le>>4,N,F)}function Er(N,F){Zt(128,N,F)}function Tt(N,F,W){return N+2*F+W+2>>2}function pn(N,F){var W,le=F-32;for(le=new Uint8Array([Tt(N[le-1],N[le+0],N[le+1]),Tt(N[le+0],N[le+1],N[le+2]),Tt(N[le+1],N[le+2],N[le+3]),Tt(N[le+2],N[le+3],N[le+4])]),W=0;4>W;++W)n(N,F+32*W,le,0,le.length)}function un(N,F){var W=N[F-1],le=N[F-1+32],je=N[F-1+64],Qe=N[F-1+96];Ce(N,F+0,16843009*Tt(N[F-1-32],W,le)),Ce(N,F+32,16843009*Tt(W,le,je)),Ce(N,F+64,16843009*Tt(le,je,Qe)),Ce(N,F+96,16843009*Tt(je,Qe,Qe))}function Ir(N,F){var W,le=4;for(W=0;4>W;++W)le+=N[F+W-32]+N[F-1+32*W];for(le>>=3,W=0;4>W;++W)a(N,F+32*W,le,4)}function pr(N,F){var W=N[F-1+0],le=N[F-1+32],je=N[F-1+64],Qe=N[F-1-32],$e=N[F+0-32],ze=N[F+1-32],Ze=N[F+2-32],it=N[F+3-32];N[F+0+96]=Tt(le,je,N[F-1+96]),N[F+1+96]=N[F+0+64]=Tt(W,le,je),N[F+2+96]=N[F+1+64]=N[F+0+32]=Tt(Qe,W,le),N[F+3+96]=N[F+2+64]=N[F+1+32]=N[F+0+0]=Tt($e,Qe,W),N[F+3+64]=N[F+2+32]=N[F+1+0]=Tt(ze,$e,Qe),N[F+3+32]=N[F+2+0]=Tt(Ze,ze,$e),N[F+3+0]=Tt(it,Ze,ze)}function jr(N,F){var W=N[F+1-32],le=N[F+2-32],je=N[F+3-32],Qe=N[F+4-32],$e=N[F+5-32],ze=N[F+6-32],Ze=N[F+7-32];N[F+0+0]=Tt(N[F+0-32],W,le),N[F+1+0]=N[F+0+32]=Tt(W,le,je),N[F+2+0]=N[F+1+32]=N[F+0+64]=Tt(le,je,Qe),N[F+3+0]=N[F+2+32]=N[F+1+64]=N[F+0+96]=Tt(je,Qe,$e),N[F+3+32]=N[F+2+64]=N[F+1+96]=Tt(Qe,$e,ze),N[F+3+64]=N[F+2+96]=Tt($e,ze,Ze),N[F+3+96]=Tt(ze,Ze,Ze)}function Fn(N,F){var W=N[F-1+0],le=N[F-1+32],je=N[F-1+64],Qe=N[F-1-32],$e=N[F+0-32],ze=N[F+1-32],Ze=N[F+2-32],it=N[F+3-32];N[F+0+0]=N[F+1+64]=Qe+$e+1>>1,N[F+1+0]=N[F+2+64]=$e+ze+1>>1,N[F+2+0]=N[F+3+64]=ze+Ze+1>>1,N[F+3+0]=Ze+it+1>>1,N[F+0+96]=Tt(je,le,W),N[F+0+64]=Tt(le,W,Qe),N[F+0+32]=N[F+1+96]=Tt(W,Qe,$e),N[F+1+32]=N[F+2+96]=Tt(Qe,$e,ze),N[F+2+32]=N[F+3+96]=Tt($e,ze,Ze),N[F+3+32]=Tt(ze,Ze,it)}function Sn(N,F){var W=N[F+0-32],le=N[F+1-32],je=N[F+2-32],Qe=N[F+3-32],$e=N[F+4-32],ze=N[F+5-32],Ze=N[F+6-32],it=N[F+7-32];N[F+0+0]=W+le+1>>1,N[F+1+0]=N[F+0+64]=le+je+1>>1,N[F+2+0]=N[F+1+64]=je+Qe+1>>1,N[F+3+0]=N[F+2+64]=Qe+$e+1>>1,N[F+0+32]=Tt(W,le,je),N[F+1+32]=N[F+0+96]=Tt(le,je,Qe),N[F+2+32]=N[F+1+96]=Tt(je,Qe,$e),N[F+3+32]=N[F+2+96]=Tt(Qe,$e,ze),N[F+3+64]=Tt($e,ze,Ze),N[F+3+96]=Tt(ze,Ze,it)}function yn(N,F){var W=N[F-1+0],le=N[F-1+32],je=N[F-1+64],Qe=N[F-1+96];N[F+0+0]=W+le+1>>1,N[F+2+0]=N[F+0+32]=le+je+1>>1,N[F+2+32]=N[F+0+64]=je+Qe+1>>1,N[F+1+0]=Tt(W,le,je),N[F+3+0]=N[F+1+32]=Tt(le,je,Qe),N[F+3+32]=N[F+1+64]=Tt(je,Qe,Qe),N[F+3+64]=N[F+2+64]=N[F+0+96]=N[F+1+96]=N[F+2+96]=N[F+3+96]=Qe}function ua(N,F){var W=N[F-1+0],le=N[F-1+32],je=N[F-1+64],Qe=N[F-1+96],$e=N[F-1-32],ze=N[F+0-32],Ze=N[F+1-32],it=N[F+2-32];N[F+0+0]=N[F+2+32]=W+$e+1>>1,N[F+0+32]=N[F+2+64]=le+W+1>>1,N[F+0+64]=N[F+2+96]=je+le+1>>1,N[F+0+96]=Qe+je+1>>1,N[F+3+0]=Tt(ze,Ze,it),N[F+2+0]=Tt($e,ze,Ze),N[F+1+0]=N[F+3+32]=Tt(W,$e,ze),N[F+1+32]=N[F+3+64]=Tt(le,W,$e),N[F+1+64]=N[F+3+96]=Tt(je,le,W),N[F+1+96]=Tt(Qe,je,le)}function ga(N,F){var W;for(W=0;8>W;++W)n(N,F+32*W,N,F-32,8)}function Wi(N,F){var W;for(W=0;8>W;++W)a(N,F,N[F-1],8),F+=32}function Xi(N,F,W){var le;for(le=0;8>le;++le)a(F,W+32*le,N,8)}function kl(N,F){var W,le=8;for(W=0;8>W;++W)le+=N[F+W-32]+N[F-1+32*W];Xi(le>>4,N,F)}function xa(N,F){var W,le=4;for(W=0;8>W;++W)le+=N[F+W-32];Xi(le>>3,N,F)}function Qn(N,F){var W,le=4;for(W=0;8>W;++W)le+=N[F-1+32*W];Xi(le>>3,N,F)}function du(N,F){Xi(128,N,F)}function Fl(N,F,W){var le=N[F-W],je=N[F+0],Qe=3*(je-le)+I4[1020+N[F-2*W]-N[F+W]],$e=vN[112+(Qe+4>>3)];N[F-W]=pu[255+le+vN[112+(Qe+3>>3)]],N[F+0]=pu[255+je-$e]}function Yi(N,F,W,le){var je=N[F+0],Qe=N[F+W];return Ju[255+N[F-2*W]-N[F-W]]>le||Ju[255+Qe-je]>le}function Dc(N,F,W,le){return 4*Ju[255+N[F-W]-N[F+0]]+Ju[255+N[F-2*W]-N[F+W]]<=le}function Rc(N,F,W,le,je){var Qe=N[F-3*W],$e=N[F-2*W],ze=N[F-W],Ze=N[F+0],it=N[F+W],Ct=N[F+2*W],Vt=N[F+3*W];return 4*Ju[255+ze-Ze]+Ju[255+$e-it]>le?0:Ju[255+N[F-4*W]-Qe]<=je&&Ju[255+Qe-$e]<=je&&Ju[255+$e-ze]<=je&&Ju[255+Vt-Ct]<=je&&Ju[255+Ct-it]<=je&&Ju[255+it-Ze]<=je}function uc(N,F,W,le){var je=2*le+1;for(le=0;16>le;++le)Dc(N,F+le,W,je)&&Fl(N,F+le,W)}function sl(N,F,W,le){var je=2*le+1;for(le=0;16>le;++le)Dc(N,F+le*W,1,je)&&Fl(N,F+le*W,1)}function fu(N,F,W,le){var je;for(je=3;0<je;--je)uc(N,F+=4*W,W,le)}function GA(N,F,W,le){var je;for(je=3;0<je;--je)sl(N,F+=4,W,le)}function il(N,F,W,le,je,Qe,$e,ze){for(Qe=2*Qe+1;0<je--;){if(Rc(N,F,W,Qe,$e))if(Yi(N,F,W,ze))Fl(N,F,W);else{var Ze=N,it=F,Ct=W,Vt=Ze[it-2*Ct],ot=Ze[it-Ct],It=Ze[it+0],Dt=Ze[it+Ct],sr=Ze[it+2*Ct],Qt=27*(dr=I4[1020+3*(It-ot)+I4[1020+Vt-Dt]])+63>>7,ur=18*dr+63>>7,dr=9*dr+63>>7;Ze[it-3*Ct]=pu[255+Ze[it-3*Ct]+dr],Ze[it-2*Ct]=pu[255+Vt+ur],Ze[it-Ct]=pu[255+ot+Qt],Ze[it+0]=pu[255+It-Qt],Ze[it+Ct]=pu[255+Dt-ur],Ze[it+2*Ct]=pu[255+sr-dr]}F+=le}}function Mc(N,F,W,le,je,Qe,$e,ze){for(Qe=2*Qe+1;0<je--;){if(Rc(N,F,W,Qe,$e))if(Yi(N,F,W,ze))Fl(N,F,W);else{var Ze=N,it=F,Ct=W,Vt=Ze[it-Ct],ot=Ze[it+0],It=Ze[it+Ct],Dt=vN[112+(4+(sr=3*(ot-Vt))>>3)],sr=vN[112+(sr+3>>3)],Qt=Dt+1>>1;Ze[it-2*Ct]=pu[255+Ze[it-2*Ct]+Qt],Ze[it-Ct]=pu[255+Vt+sr],Ze[it+0]=pu[255+ot-Dt],Ze[it+Ct]=pu[255+It-Qt]}F+=le}}function Bf(N,F,W,le,je,Qe){il(N,F,W,1,16,le,je,Qe)}function co(N,F,W,le,je,Qe){il(N,F,1,W,16,le,je,Qe)}function zu(N,F,W,le,je,Qe){var $e;for($e=3;0<$e;--$e)Mc(N,F+=4*W,W,1,16,le,je,Qe)}function Q(N,F,W,le,je,Qe){var $e;for($e=3;0<$e;--$e)Mc(N,F+=4,1,W,16,le,je,Qe)}function Ie(N,F,W,le,je,Qe,$e,ze){il(N,F,je,1,8,Qe,$e,ze),il(W,le,je,1,8,Qe,$e,ze)}function st(N,F,W,le,je,Qe,$e,ze){il(N,F,1,je,8,Qe,$e,ze),il(W,le,1,je,8,Qe,$e,ze)}function gt(N,F,W,le,je,Qe,$e,ze){Mc(N,F+4*je,je,1,8,Qe,$e,ze),Mc(W,le+4*je,je,1,8,Qe,$e,ze)}function Pt(N,F,W,le,je,Qe,$e,ze){Mc(N,F+4,1,je,8,Qe,$e,ze),Mc(W,le+4,1,je,8,Qe,$e,ze)}function lr(){this.ba=new Ne,this.ec=[],this.cc=[],this.Mc=[],this.Dc=this.Nc=this.dc=this.fc=0,this.Oa=new xt,this.memory=0,this.Ib="OutputFunc",this.Jb="OutputAlphaFunc",this.Nd="OutputRowFunc"}function vr(){this.data=[],this.offset=this.kd=this.ha=this.w=0,this.na=[],this.xa=this.gb=this.Ja=this.Sa=this.P=0}function nn(){this.nc=this.Ea=this.b=this.hc=0,this.K=[],this.w=0}function dn(){this.ua=0,this.Wa=new fe,this.vb=new fe,this.md=this.xc=this.wc=0,this.vc=[],this.Wb=0,this.Ya=new me,this.yc=new D}function Bn(){this.xb=this.a=0,this.l=new wr,this.ca=new Ne,this.V=[],this.Ba=0,this.Ta=[],this.Ua=0,this.m=new G,this.Pb=0,this.wd=new G,this.Ma=this.$=this.C=this.i=this.c=this.xd=0,this.s=new dn,this.ab=0,this.gc=o(4,nn),this.Oc=0}function Vn(){this.Lc=this.Z=this.$a=this.i=this.c=0,this.l=new wr,this.ic=0,this.ca=[],this.tb=0,this.qd=null,this.rd=0}function da(N,F,W,le,je,Qe,$e){for(N=N==null?0:N[F+0],F=0;F<$e;++F)je[Qe+F]=N+W[le+F]&255,N=je[Qe+F]}function ka(N,F,W,le,je,Qe,$e){var ze;if(N==null)da(null,null,W,le,je,Qe,$e);else for(ze=0;ze<$e;++ze)je[Qe+ze]=N[F+ze]+W[le+ze]&255}function Ys(N,F,W,le,je,Qe,$e){if(N==null)da(null,null,W,le,je,Qe,$e);else{var ze,Ze=N[F+0],it=Ze,Ct=Ze;for(ze=0;ze<$e;++ze)it=Ct+(Ze=N[F+ze])-it,Ct=W[le+ze]+(-256&it?0>it?0:255:it)&255,it=Ze,je[Qe+ze]=Ct}}function Va(N,F,W,le){var je=F.width,Qe=F.o;if(e(N!=null&&F!=null),0>W||0>=le||W+le>Qe)return null;if(!N.Cc){if(N.ga==null){var $e;if(N.ga=new Vn,($e=N.ga==null)||($e=F.width*F.o,e(N.Gb.length==0),N.Gb=s($e),N.Uc=0,N.Gb==null?$e=0:(N.mb=N.Gb,N.nb=N.Uc,N.rc=null,$e=1),$e=!$e),!$e){$e=N.ga;var ze=N.Fa,Ze=N.P,it=N.qc,Ct=N.mb,Vt=N.nb,ot=Ze+1,It=it-1,Dt=$e.l;if(e(ze!=null&&Ct!=null&&F!=null),e0[0]=null,e0[1]=da,e0[2]=ka,e0[3]=Ys,$e.ca=Ct,$e.tb=Vt,$e.c=F.width,$e.i=F.height,e(0<$e.c&&0<$e.i),1>=it)F=0;else if($e.$a=3&ze[Ze+0],$e.Z=ze[Ze+0]>>2&3,$e.Lc=ze[Ze+0]>>4&3,Ze=ze[Ze+0]>>6&3,0>$e.$a||1<$e.$a||4<=$e.Z||1<$e.Lc||Ze)F=0;else if(Dt.put=Ee,Dt.ac=nt,Dt.bc=we,Dt.ma=$e,Dt.width=F.width,Dt.height=F.height,Dt.Da=F.Da,Dt.v=F.v,Dt.va=F.va,Dt.j=F.j,Dt.o=F.o,$e.$a)e:{e($e.$a==1),F=ft();t:for(;;){if(F==null){F=0;break e}if(e($e!=null),$e.mc=F,F.c=$e.c,F.i=$e.i,F.l=$e.l,F.l.ma=$e,F.l.width=$e.c,F.l.height=$e.i,F.a=0,ae(F.m,ze,ot,It),!et($e.c,$e.i,1,F,null)||(F.ab==1&&F.gc[0].hc==3&&K(F.s)?($e.ic=1,ze=F.c*F.i,F.Ta=null,F.Ua=0,F.V=s(ze),F.Ba=0,F.V==null?(F.a=1,F=0):F=1):($e.ic=0,F=ut(F,$e.c)),!F))break t;F=1;break e}$e.mc=null,F=0}else F=It>=$e.c*$e.i;$e=!F}if($e)return null;N.ga.Lc!=1?N.Ga=0:le=Qe-W}e(N.ga!=null),e(W+le<=Qe);e:{if(F=(ze=N.ga).c,Qe=ze.l.o,ze.$a==0){if(ot=N.rc,It=N.Vc,Dt=N.Fa,Ze=N.P+1+W*F,it=N.mb,Ct=N.nb+W*F,e(Ze<=N.P+N.qc),ze.Z!=0)for(e(e0[ze.Z]!=null),$e=0;$e<le;++$e)e0[ze.Z](ot,It,Dt,Ze,it,Ct,F),ot=it,It=Ct,Ct+=F,Ze+=F;else for($e=0;$e<le;++$e)n(it,Ct,Dt,Ze,F),ot=it,It=Ct,Ct+=F,Ze+=F;N.rc=ot,N.Vc=It}else{if(e(ze.mc!=null),F=W+le,e(($e=ze.mc)!=null),e(F<=$e.i),$e.C>=F)F=1;else if(ze.ic||Lc(),ze.ic){ze=$e.V,ot=$e.Ba,It=$e.c;var sr=$e.i,Qt=(Dt=1,Ze=$e.$/It,it=$e.$%It,Ct=$e.m,Vt=$e.s,$e.$),ur=It*sr,dr=It*F,Sr=Vt.wc,br=Qt<dr?P(Vt,it,Ze):null;e(Qt<=ur),e(F<=sr),e(K(Vt));t:for(;;){for(;!Ct.h&&Qt<dr;){if(it&Sr||(br=P(Vt,it,Ze)),e(br!=null),ee(Ct),256>(sr=Me(br.G[0],br.H[0],Ct)))ze[ot+Qt]=sr,++Qt,++it>=It&&(it=0,++Ze<=F&&!(Ze%16)&&de($e,Ze));else{if(!(280>sr)){Dt=0;break t}sr=Fe(sr-256,Ct);var xn,on=Me(br.G[4],br.H[4],Ct);if(ee(Ct),!(Qt>=(on=ce(It,on=Fe(on,Ct)))&&ur-Qt>=sr)){Dt=0;break t}for(xn=0;xn<sr;++xn)ze[ot+Qt+xn]=ze[ot+Qt+xn-on];for(Qt+=sr,it+=sr;it>=It;)it-=It,++Ze<=F&&!(Ze%16)&&de($e,Ze);Qt<dr&&it&Sr&&(br=P(Vt,it,Ze))}e(Ct.h==U(Ct))}de($e,Ze>F?F:Ze);break t}!Dt||Ct.h&&Qt<ur?(Dt=0,$e.a=Ct.h?5:3):$e.$=Qt,F=Dt}else F=Ge($e,$e.V,$e.Ba,$e.c,$e.i,F,Ot);if(!F){le=0;break e}}W+le>=Qe&&(N.Cc=1),le=1}if(!le)return null;if(N.Cc&&((le=N.ga)!=null&&(le.mc=null),N.ga=null,0<N.Ga))return alert("todo:WebPDequantizeLevels"),null}return N.nb+W*je}function mi(N,F,W,le,je,Qe){for(;0<je--;){var $e,ze=N,Ze=F+(W?1:0),it=N,Ct=F+(W?0:3);for($e=0;$e<le;++$e){var Vt=it[Ct+4*$e];Vt!=255&&(Vt*=32897,ze[Ze+4*$e+0]=ze[Ze+4*$e+0]*Vt>>23,ze[Ze+4*$e+1]=ze[Ze+4*$e+1]*Vt>>23,ze[Ze+4*$e+2]=ze[Ze+4*$e+2]*Vt>>23)}F+=Qe}}function Js(N,F,W,le,je){for(;0<le--;){var Qe;for(Qe=0;Qe<W;++Qe){var $e=N[F+2*Qe+0],ze=15&(it=N[F+2*Qe+1]),Ze=4369*ze,it=(240&it|it>>4)*Ze>>16;N[F+2*Qe+0]=(240&$e|$e>>4)*Ze>>16&240|(15&$e|$e<<4)*Ze>>16>>4&15,N[F+2*Qe+1]=240&it|ze}F+=je}}function pi(N,F,W,le,je,Qe,$e,ze){var Ze,it,Ct=255;for(it=0;it<je;++it){for(Ze=0;Ze<le;++Ze){var Vt=N[F+Ze];Qe[$e+4*Ze]=Vt,Ct&=Vt}F+=W,$e+=ze}return Ct!=255}function Zs(N,F,W,le,je){var Qe;for(Qe=0;Qe<je;++Qe)W[le+Qe]=N[F+Qe]>>8}function Lc(){Q1=mi,z8=Js,W8=pi,X8=Zs}function Wu(N,F,W){E[N]=function(le,je,Qe,$e,ze,Ze,it,Ct,Vt,ot,It,Dt,sr,Qt,ur,dr,Sr){var br,xn=Sr-1>>1,on=ze[Ze+0]|it[Ct+0]<<16,Wn=Vt[ot+0]|It[Dt+0]<<16;e(le!=null);var hn=3*on+Wn+131074>>2;for(F(le[je+0],255&hn,hn>>16,sr,Qt),Qe!=null&&(hn=3*Wn+on+131074>>2,F(Qe[$e+0],255&hn,hn>>16,ur,dr)),br=1;br<=xn;++br){var pa=ze[Ze+br]|it[Ct+br]<<16,fo=Vt[ot+br]|It[Dt+br]<<16,Xn=on+pa+Wn+fo+524296,An=Xn+2*(pa+Wn)>>3;hn=An+on>>1,on=(Xn=Xn+2*(on+fo)>>3)+pa>>1,F(le[je+2*br-1],255&hn,hn>>16,sr,Qt+(2*br-1)*W),F(le[je+2*br-0],255&on,on>>16,sr,Qt+(2*br-0)*W),Qe!=null&&(hn=Xn+Wn>>1,on=An+fo>>1,F(Qe[$e+2*br-1],255&hn,hn>>16,ur,dr+(2*br-1)*W),F(Qe[$e+2*br+0],255&on,on>>16,ur,dr+(2*br+0)*W)),on=pa,Wn=fo}1&Sr||(hn=3*on+Wn+131074>>2,F(le[je+Sr-1],255&hn,hn>>16,sr,Qt+(Sr-1)*W),Qe!=null&&(hn=3*Wn+on+131074>>2,F(Qe[$e+Sr-1],255&hn,hn>>16,ur,dr+(Sr-1)*W)))}}function Xu(){Zu[yN]=wde,Zu[bN]=oL,Zu[rL]=Nde,Zu[wN]=lL,Zu[NN]=cL,Zu[j4]=uL,Zu[nL]=Cde,Zu[P4]=oL,Zu[B4]=lL,Zu[CN]=cL,Zu[T4]=uL}function C(N){return N&-16384?0>N?0:255:N>>_de}function Z(N,F){return C((19077*N>>8)+(26149*F>>8)-14234)}function be(N,F,W){return C((19077*N>>8)-(6419*F>>8)-(13320*W>>8)+8708)}function Xe(N,F){return C((19077*N>>8)+(33050*F>>8)-17685)}function Ft(N,F,W,le,je){le[je+0]=Z(N,W),le[je+1]=be(N,F,W),le[je+2]=Xe(N,F)}function qt(N,F,W,le,je){le[je+0]=Xe(N,F),le[je+1]=be(N,F,W),le[je+2]=Z(N,W)}function Fr(N,F,W,le,je){var Qe=be(N,F,W);F=Qe<<3&224|Xe(N,F)>>3,le[je+0]=248&Z(N,W)|Qe>>5,le[je+1]=F}function ma(N,F,W,le,je){var Qe=240&Xe(N,F)|15;le[je+0]=240&Z(N,W)|be(N,F,W)>>4,le[je+1]=Qe}function ei(N,F,W,le,je){le[je+0]=255,Ft(N,F,W,le,je+1)}function ra(N,F,W,le,je){qt(N,F,W,le,je),le[je+3]=255}function Sa(N,F,W,le,je){Ft(N,F,W,le,je),le[je+3]=255}function gs(N,F,W){E[N]=function(le,je,Qe,$e,ze,Ze,it,Ct,Vt){for(var ot=Ct+(-2&Vt)*W;Ct!=ot;)F(le[je+0],Qe[$e+0],ze[Ze+0],it,Ct),F(le[je+1],Qe[$e+0],ze[Ze+0],it,Ct+W),je+=2,++$e,++Ze,Ct+=2*W;1&Vt&&F(le[je+0],Qe[$e+0],ze[Ze+0],it,Ct)}}function hu(N,F,W){return W==0?N==0?F==0?6:5:F==0?4:0:W}function Ol(N,F,W,le,je){switch(N>>>30){case 3:Km(F,W,le,je,0);break;case 2:Yu(F,W,le,je);break;case 1:Ma(F,W,le,je)}}function ol(N,F){var W,le,je=F.M,Qe=F.Nb,$e=N.oc,ze=N.pc+40,Ze=N.oc,it=N.pc+584,Ct=N.oc,Vt=N.pc+600;for(W=0;16>W;++W)$e[ze+32*W-1]=129;for(W=0;8>W;++W)Ze[it+32*W-1]=129,Ct[Vt+32*W-1]=129;for(0<je?$e[ze-1-32]=Ze[it-1-32]=Ct[Vt-1-32]=129:(a($e,ze-32-1,127,21),a(Ze,it-32-1,127,9),a(Ct,Vt-32-1,127,9)),le=0;le<N.za;++le){var ot=F.ya[F.aa+le];if(0<le){for(W=-1;16>W;++W)n($e,ze+32*W-4,$e,ze+32*W+12,4);for(W=-1;8>W;++W)n(Ze,it+32*W-4,Ze,it+32*W+4,4),n(Ct,Vt+32*W-4,Ct,Vt+32*W+4,4)}var It=N.Gd,Dt=N.Hd+le,sr=ot.ad,Qt=ot.Hc;if(0<je&&(n($e,ze-32,It[Dt].y,0,16),n(Ze,it-32,It[Dt].f,0,8),n(Ct,Vt-32,It[Dt].ea,0,8)),ot.Za){var ur=$e,dr=ze-32+16;for(0<je&&(le>=N.za-1?a(ur,dr,It[Dt].y[15],4):n(ur,dr,It[Dt+1].y,0,4)),W=0;4>W;W++)ur[dr+128+W]=ur[dr+256+W]=ur[dr+384+W]=ur[dr+0+W];for(W=0;16>W;++W,Qt<<=2)ur=$e,dr=ze+fL[W],Gd[ot.Ob[W]](ur,dr),Ol(Qt,sr,16*+W,ur,dr)}else if(ur=hu(le,je,ot.Ob[0]),ZA[ur]($e,ze),Qt!=0)for(W=0;16>W;++W,Qt<<=2)Ol(Qt,sr,16*+W,$e,ze+fL[W]);for(W=ot.Gc,ur=hu(le,je,ot.Dd),bh[ur](Ze,it),bh[ur](Ct,Vt),Qt=sr,ur=Ze,dr=it,255&(ot=0|W)&&(170&ot?Ff(Qt,256,ur,dr):us(Qt,256,ur,dr)),ot=Ct,Qt=Vt,255&(W>>=8)&&(170&W?Ff(sr,320,ot,Qt):us(sr,320,ot,Qt)),je<N.Ub-1&&(n(It[Dt].y,0,$e,ze+480,16),n(It[Dt].f,0,Ze,it+224,8),n(It[Dt].ea,0,Ct,Vt+224,8)),W=8*Qe*N.B,It=N.sa,Dt=N.ta+16*le+16*Qe*N.R,sr=N.qa,ot=N.ra+8*le+W,Qt=N.Ha,ur=N.Ia+8*le+W,W=0;16>W;++W)n(It,Dt+W*N.R,$e,ze+32*W,16);for(W=0;8>W;++W)n(sr,ot+W*N.B,Ze,it+32*W,8),n(Qt,ur+W*N.B,Ct,Vt+32*W,8)}}function $d(N,F,W,le,je,Qe,$e,ze,Ze){var it=[0],Ct=[0],Vt=0,ot=Ze!=null?Ze.kd:0,It=Ze??new vr;if(N==null||12>W)return 7;It.data=N,It.w=F,It.ha=W,F=[F],W=[W],It.gb=[It.gb];e:{var Dt=F,sr=W,Qt=It.gb;if(e(N!=null),e(sr!=null),e(Qt!=null),Qt[0]=0,12<=sr[0]&&!r(N,Dt[0],"RIFF")){if(r(N,Dt[0]+8,"WEBP")){Qt=3;break e}var ur=ie(N,Dt[0]+4);if(12>ur||4294967286<ur){Qt=3;break e}if(ot&&ur>sr[0]-8){Qt=7;break e}Qt[0]=ur,Dt[0]+=12,sr[0]-=12}Qt=0}if(Qt!=0)return Qt;for(ur=0<It.gb[0],W=W[0];;){e:{var dr=N;sr=F,Qt=W;var Sr=it,br=Ct,xn=Dt=[0];if((hn=Vt=[Vt])[0]=0,8>Qt[0])Qt=7;else{if(!r(dr,sr[0],"VP8X")){if(ie(dr,sr[0]+4)!=10){Qt=3;break e}if(18>Qt[0]){Qt=7;break e}var on=ie(dr,sr[0]+8),Wn=1+We(dr,sr[0]+12);if(2147483648<=Wn*(dr=1+We(dr,sr[0]+15))){Qt=3;break e}xn!=null&&(xn[0]=on),Sr!=null&&(Sr[0]=Wn),br!=null&&(br[0]=dr),sr[0]+=18,Qt[0]-=18,hn[0]=1}Qt=0}}if(Vt=Vt[0],Dt=Dt[0],Qt!=0)return Qt;if(sr=!!(2&Dt),!ur&&Vt)return 3;if(Qe!=null&&(Qe[0]=!!(16&Dt)),$e!=null&&($e[0]=sr),ze!=null&&(ze[0]=0),$e=it[0],Dt=Ct[0],Vt&&sr&&Ze==null){Qt=0;break}if(4>W){Qt=7;break}if(ur&&Vt||!ur&&!Vt&&!r(N,F[0],"ALPH")){W=[W],It.na=[It.na],It.P=[It.P],It.Sa=[It.Sa];e:{on=N,Qt=F,ur=W;var hn=It.gb;Sr=It.na,br=It.P,xn=It.Sa,Wn=22,e(on!=null),e(ur!=null),dr=Qt[0];var pa=ur[0];for(e(Sr!=null),e(xn!=null),Sr[0]=null,br[0]=null,xn[0]=0;;){if(Qt[0]=dr,ur[0]=pa,8>pa){Qt=7;break e}var fo=ie(on,dr+4);if(4294967286<fo){Qt=3;break e}var Xn=8+fo+1&-2;if(Wn+=Xn,0<hn&&Wn>hn){Qt=3;break e}if(!r(on,dr,"VP8 ")||!r(on,dr,"VP8L")){Qt=0;break e}if(pa[0]<Xn){Qt=7;break e}r(on,dr,"ALPH")||(Sr[0]=on,br[0]=dr+8,xn[0]=fo),dr+=Xn,pa-=Xn}}if(W=W[0],It.na=It.na[0],It.P=It.P[0],It.Sa=It.Sa[0],Qt!=0)break}W=[W],It.Ja=[It.Ja],It.xa=[It.xa];e:if(hn=N,Qt=F,ur=W,Sr=It.gb[0],br=It.Ja,xn=It.xa,on=Qt[0],dr=!r(hn,on,"VP8 "),Wn=!r(hn,on,"VP8L"),e(hn!=null),e(ur!=null),e(br!=null),e(xn!=null),8>ur[0])Qt=7;else{if(dr||Wn){if(hn=ie(hn,on+4),12<=Sr&&hn>Sr-12){Qt=3;break e}if(ot&&hn>ur[0]-8){Qt=7;break e}br[0]=hn,Qt[0]+=8,ur[0]-=8,xn[0]=Wn}else xn[0]=5<=ur[0]&&hn[on+0]==47&&!(hn[on+4]>>5),br[0]=ur[0];Qt=0}if(W=W[0],It.Ja=It.Ja[0],It.xa=It.xa[0],F=F[0],Qt!=0)break;if(4294967286<It.Ja)return 3;if(ze==null||sr||(ze[0]=It.xa?2:1),$e=[$e],Dt=[Dt],It.xa){if(5>W){Qt=7;break}ze=$e,ot=Dt,sr=Qe,N==null||5>W?N=0:5<=W&&N[F+0]==47&&!(N[F+4]>>5)?(ur=[0],hn=[0],Sr=[0],ae(br=new G,N,F,W),oe(br,ur,hn,Sr)?(ze!=null&&(ze[0]=ur[0]),ot!=null&&(ot[0]=hn[0]),sr!=null&&(sr[0]=Sr[0]),N=1):N=0):N=0}else{if(10>W){Qt=7;break}ze=Dt,N==null||10>W||!mr(N,F+3,W-3)?N=0:(ot=N[F+0]|N[F+1]<<8|N[F+2]<<16,sr=16383&(N[F+7]<<8|N[F+6]),N=16383&(N[F+9]<<8|N[F+8]),1&ot||3<(ot>>1&7)||!(ot>>4&1)||ot>>5>=It.Ja||!sr||!N?N=0:($e&&($e[0]=sr),ze&&(ze[0]=N),N=1))}if(!N||($e=$e[0],Dt=Dt[0],Vt&&(it[0]!=$e||Ct[0]!=Dt)))return 3;Ze!=null&&(Ze[0]=It,Ze.offset=F-Ze.w,e(4294967286>F-Ze.w),e(Ze.offset==Ze.ha-W));break}return Qt==0||Qt==7&&Vt&&Ze==null?(Qe!=null&&(Qe[0]|=It.na!=null&&0<It.na.length),le!=null&&(le[0]=$e),je!=null&&(je[0]=Dt),0):Qt}function k1(N,F,W){var le=F.width,je=F.height,Qe=0,$e=0,ze=le,Ze=je;if(F.Da=N!=null&&0<N.Da,F.Da&&(ze=N.cd,Ze=N.bd,Qe=N.v,$e=N.j,11>W||(Qe&=-2,$e&=-2),0>Qe||0>$e||0>=ze||0>=Ze||Qe+ze>le||$e+Ze>je))return 0;if(F.v=Qe,F.j=$e,F.va=Qe+ze,F.o=$e+Ze,F.U=ze,F.T=Ze,F.da=N!=null&&0<N.da,F.da){if(!_e(ze,Ze,W=[N.ib],Qe=[N.hb]))return 0;F.ib=W[0],F.hb=Qe[0]}return F.ob=N!=null&&N.ob,F.Kb=N==null||!N.Sd,F.da&&(F.ob=F.ib<3*le/4&&F.hb<3*je/4,F.Kb=0),1}function F1(N){if(N==null)return 2;if(11>N.S){var F=N.f.RGBA;F.fb+=(N.height-1)*F.A,F.A=-F.A}else F=N.f.kb,N=N.height,F.O+=(N-1)*F.fa,F.fa=-F.fa,F.N+=(N-1>>1)*F.Ab,F.Ab=-F.Ab,F.W+=(N-1>>1)*F.Db,F.Db=-F.Db,F.F!=null&&(F.J+=(N-1)*F.lb,F.lb=-F.lb);return 0}function KA(N,F,W,le){if(le==null||0>=N||0>=F)return 2;if(W!=null){if(W.Da){var je=W.cd,Qe=W.bd,$e=-2&W.v,ze=-2&W.j;if(0>$e||0>ze||0>=je||0>=Qe||$e+je>N||ze+Qe>F)return 2;N=je,F=Qe}if(W.da){if(!_e(N,F,je=[W.ib],Qe=[W.hb]))return 2;N=je[0],F=Qe[0]}}le.width=N,le.height=F;e:{var Ze=le.width,it=le.height;if(N=le.S,0>=Ze||0>=it||!(N>=yN&&13>N))N=2;else{if(0>=le.Rd&&le.sd==null){$e=Qe=je=F=0;var Ct=(ze=Ze*hL[N])*it;if(11>N||(Qe=(it+1)/2*(F=(Ze+1)/2),N==12&&($e=(je=Ze)*it)),(it=s(Ct+2*Qe+$e))==null){N=1;break e}le.sd=it,11>N?((Ze=le.f.RGBA).eb=it,Ze.fb=0,Ze.A=ze,Ze.size=Ct):((Ze=le.f.kb).y=it,Ze.O=0,Ze.fa=ze,Ze.Fd=Ct,Ze.f=it,Ze.N=0+Ct,Ze.Ab=F,Ze.Cd=Qe,Ze.ea=it,Ze.W=0+Ct+Qe,Ze.Db=F,Ze.Ed=Qe,N==12&&(Ze.F=it,Ze.J=0+Ct+2*Qe),Ze.Tc=$e,Ze.lb=je)}if(F=1,je=le.S,Qe=le.width,$e=le.height,je>=yN&&13>je)if(11>je)N=le.f.RGBA,F&=(ze=Math.abs(N.A))*($e-1)+Qe<=N.size,F&=ze>=Qe*hL[je],F&=N.eb!=null;else{N=le.f.kb,ze=(Qe+1)/2,Ct=($e+1)/2,Ze=Math.abs(N.fa),it=Math.abs(N.Ab);var Vt=Math.abs(N.Db),ot=Math.abs(N.lb),It=ot*($e-1)+Qe;F&=Ze*($e-1)+Qe<=N.Fd,F&=it*(Ct-1)+ze<=N.Cd,F=(F&=Vt*(Ct-1)+ze<=N.Ed)&Ze>=Qe&it>=ze&Vt>=ze,F&=N.y!=null,F&=N.f!=null,F&=N.ea!=null,je==12&&(F&=ot>=Qe,F&=It<=N.Tc,F&=N.F!=null)}else F=0;N=F?0:2}}return N!=0||W!=null&&W.fd&&(N=F1(le)),N}var $m=64,Au=[0,1,3,7,15,31,63,127,255,511,1023,2047,4095,8191,16383,32767,65535,131071,262143,524287,1048575,2097151,4194303,8388607,16777215],mu=24,qA=32,vh=8,zA=[0,0,1,1,2,2,2,2,3,3,3,3,3,3,3,3,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7];At("Predictor0","PredictorAdd0"),E.Predictor0=function(){return 4278190080},E.Predictor1=function(N){return N},E.Predictor2=function(N,F,W){return F[W+0]},E.Predictor3=function(N,F,W){return F[W+1]},E.Predictor4=function(N,F,W){return F[W-1]},E.Predictor5=function(N,F,W){return bt(bt(N,F[W+1]),F[W+0])},E.Predictor6=function(N,F,W){return bt(N,F[W-1])},E.Predictor7=function(N,F,W){return bt(N,F[W+0])},E.Predictor8=function(N,F,W){return bt(F[W-1],F[W+0])},E.Predictor9=function(N,F,W){return bt(F[W+0],F[W+1])},E.Predictor10=function(N,F,W){return bt(bt(N,F[W-1]),bt(F[W+0],F[W+1]))},E.Predictor11=function(N,F,W){var le=F[W+0];return 0>=St(le>>24&255,N>>24&255,(F=F[W-1])>>24&255)+St(le>>16&255,N>>16&255,F>>16&255)+St(le>>8&255,N>>8&255,F>>8&255)+St(255&le,255&N,255&F)?le:N},E.Predictor12=function(N,F,W){var le=F[W+0];return(Nt((N>>24&255)+(le>>24&255)-((F=F[W-1])>>24&255))<<24|Nt((N>>16&255)+(le>>16&255)-(F>>16&255))<<16|Nt((N>>8&255)+(le>>8&255)-(F>>8&255))<<8|Nt((255&N)+(255&le)-(255&F)))>>>0},E.Predictor13=function(N,F,W){var le=F[W-1];return(jt((N=bt(N,F[W+0]))>>24&255,le>>24&255)<<24|jt(N>>16&255,le>>16&255)<<16|jt(N>>8&255,le>>8&255)<<8|jt(255&N,255&le))>>>0};var O1=E.PredictorAdd0;E.PredictorAdd1=Ve,At("Predictor2","PredictorAdd2"),At("Predictor3","PredictorAdd3"),At("Predictor4","PredictorAdd4"),At("Predictor5","PredictorAdd5"),At("Predictor6","PredictorAdd6"),At("Predictor7","PredictorAdd7"),At("Predictor8","PredictorAdd8"),At("Predictor9","PredictorAdd9"),At("Predictor10","PredictorAdd10"),At("Predictor11","PredictorAdd11"),At("Predictor12","PredictorAdd12"),At("Predictor13","PredictorAdd13");var qg=E.PredictorAdd2;q("ColorIndexInverseTransform","MapARGB","32b",function(N){return N>>8&255},function(N){return N}),q("VP8LColorIndexInverseTransformAlpha","MapAlpha","8b",function(N){return N},function(N){return N>>8&255});var ji,gN=E.ColorIndexInverseTransform,Tf=E.MapARGB,kf=E.VP8LColorIndexInverseTransformAlpha,D1=E.MapAlpha,R1=E.VP8LPredictorsAdd=[];R1.length=16,(E.VP8LPredictors=[]).length=16,(E.VP8LPredictorsAdd_C=[]).length=16,(E.VP8LPredictors_C=[]).length=16;var M1,L1,WA,XA,YA,Gm,JA,Km,Yu,Ff,Ma,us,Pi,uo,yh,U1,zg,xN,V8,H8,$8,G8,K8,q8,Q1,z8,W8,X8,Y8=s(511),J8=s(2041),Z8=s(225),eL=s(767),tL=0,I4=J8,vN=Z8,pu=eL,Ju=Y8,yN=0,bN=1,rL=2,wN=3,NN=4,j4=5,nL=6,P4=7,B4=8,CN=9,T4=10,lde=[2,3,7],cde=[3,3,11],aL=[280,256,256,256,40],ude=[0,1,1,1,0],dde=[17,18,0,1,2,3,4,5,16,6,7,8,9,10,11,12,13,14,15],fde=[24,7,23,25,40,6,39,41,22,26,38,42,56,5,55,57,21,27,54,58,37,43,72,4,71,73,20,28,53,59,70,74,36,44,88,69,75,52,60,3,87,89,19,29,86,90,35,45,68,76,85,91,51,61,104,2,103,105,18,30,102,106,34,46,84,92,67,77,101,107,50,62,120,1,119,121,83,93,17,31,100,108,66,78,118,122,33,47,117,123,49,63,99,109,82,94,0,116,124,65,79,16,32,98,110,48,115,125,81,95,64,114,126,97,111,80,113,127,96,112],hde=[2954,2956,2958,2962,2970,2986,3018,3082,3212,3468,3980,5004],Ade=8,k4=[4,5,6,7,8,9,10,10,11,12,13,14,15,16,17,17,18,19,20,20,21,21,22,22,23,23,24,25,25,26,27,28,29,30,31,32,33,34,35,36,37,37,38,39,40,41,42,43,44,45,46,46,47,48,49,50,51,52,53,54,55,56,57,58,59,60,61,62,63,64,65,66,67,68,69,70,71,72,73,74,75,76,76,77,78,79,80,81,82,83,84,85,86,87,88,89,91,93,95,96,98,100,101,102,104,106,108,110,112,114,116,118,122,124,126,128,130,132,134,136,138,140,143,145,148,151,154,157],F4=[4,5,6,7,8,9,10,11,12,13,14,15,16,17,18,19,20,21,22,23,24,25,26,27,28,29,30,31,32,33,34,35,36,37,38,39,40,41,42,43,44,45,46,47,48,49,50,51,52,53,54,55,56,57,58,60,62,64,66,68,70,72,74,76,78,80,82,84,86,88,90,92,94,96,98,100,102,104,106,108,110,112,114,116,119,122,125,128,131,134,137,140,143,146,149,152,155,158,161,164,167,170,173,177,181,185,189,193,197,201,205,209,213,217,221,225,229,234,239,245,249,254,259,264,269,274,279,284],V1=null,mde=[[173,148,140,0],[176,155,140,135,0],[180,157,141,134,130,0],[254,254,243,230,196,177,153,140,133,130,129,0]],pde=[0,1,4,8,5,2,3,6,9,12,13,10,7,11,14,15],sL=[-0,1,-1,2,-2,3,4,6,-3,5,-4,-5,-6,7,-7,8,-8,-9],gde=[[[[128,128,128,128,128,128,128,128,128,128,128],[128,128,128,128,128,128,128,128,128,128,128],[128,128,128,128,128,128,128,128,128,128,128]],[[253,136,254,255,228,219,128,128,128,128,128],[189,129,242,255,227,213,255,219,128,128,128],[106,126,227,252,214,209,255,255,128,128,128]],[[1,98,248,255,236,226,255,255,128,128,128],[181,133,238,254,221,234,255,154,128,128,128],[78,134,202,247,198,180,255,219,128,128,128]],[[1,185,249,255,243,255,128,128,128,128,128],[184,150,247,255,236,224,128,128,128,128,128],[77,110,216,255,236,230,128,128,128,128,128]],[[1,101,251,255,241,255,128,128,128,128,128],[170,139,241,252,236,209,255,255,128,128,128],[37,116,196,243,228,255,255,255,128,128,128]],[[1,204,254,255,245,255,128,128,128,128,128],[207,160,250,255,238,128,128,128,128,128,128],[102,103,231,255,211,171,128,128,128,128,128]],[[1,152,252,255,240,255,128,128,128,128,128],[177,135,243,255,234,225,128,128,128,128,128],[80,129,211,255,194,224,128,128,128,128,128]],[[1,1,255,128,128,128,128,128,128,128,128],[246,1,255,128,128,128,128,128,128,128,128],[255,128,128,128,128,128,128,128,128,128,128]]],[[[198,35,237,223,193,187,162,160,145,155,62],[131,45,198,221,172,176,220,157,252,221,1],[68,47,146,208,149,167,221,162,255,223,128]],[[1,149,241,255,221,224,255,255,128,128,128],[184,141,234,253,222,220,255,199,128,128,128],[81,99,181,242,176,190,249,202,255,255,128]],[[1,129,232,253,214,197,242,196,255,255,128],[99,121,210,250,201,198,255,202,128,128,128],[23,91,163,242,170,187,247,210,255,255,128]],[[1,200,246,255,234,255,128,128,128,128,128],[109,178,241,255,231,245,255,255,128,128,128],[44,130,201,253,205,192,255,255,128,128,128]],[[1,132,239,251,219,209,255,165,128,128,128],[94,136,225,251,218,190,255,255,128,128,128],[22,100,174,245,186,161,255,199,128,128,128]],[[1,182,249,255,232,235,128,128,128,128,128],[124,143,241,255,227,234,128,128,128,128,128],[35,77,181,251,193,211,255,205,128,128,128]],[[1,157,247,255,236,231,255,255,128,128,128],[121,141,235,255,225,227,255,255,128,128,128],[45,99,188,251,195,217,255,224,128,128,128]],[[1,1,251,255,213,255,128,128,128,128,128],[203,1,248,255,255,128,128,128,128,128,128],[137,1,177,255,224,255,128,128,128,128,128]]],[[[253,9,248,251,207,208,255,192,128,128,128],[175,13,224,243,193,185,249,198,255,255,128],[73,17,171,221,161,179,236,167,255,234,128]],[[1,95,247,253,212,183,255,255,128,128,128],[239,90,244,250,211,209,255,255,128,128,128],[155,77,195,248,188,195,255,255,128,128,128]],[[1,24,239,251,218,219,255,205,128,128,128],[201,51,219,255,196,186,128,128,128,128,128],[69,46,190,239,201,218,255,228,128,128,128]],[[1,191,251,255,255,128,128,128,128,128,128],[223,165,249,255,213,255,128,128,128,128,128],[141,124,248,255,255,128,128,128,128,128,128]],[[1,16,248,255,255,128,128,128,128,128,128],[190,36,230,255,236,255,128,128,128,128,128],[149,1,255,128,128,128,128,128,128,128,128]],[[1,226,255,128,128,128,128,128,128,128,128],[247,192,255,128,128,128,128,128,128,128,128],[240,128,255,128,128,128,128,128,128,128,128]],[[1,134,252,255,255,128,128,128,128,128,128],[213,62,250,255,255,128,128,128,128,128,128],[55,93,255,128,128,128,128,128,128,128,128]],[[128,128,128,128,128,128,128,128,128,128,128],[128,128,128,128,128,128,128,128,128,128,128],[128,128,128,128,128,128,128,128,128,128,128]]],[[[202,24,213,235,186,191,220,160,240,175,255],[126,38,182,232,169,184,228,174,255,187,128],[61,46,138,219,151,178,240,170,255,216,128]],[[1,112,230,250,199,191,247,159,255,255,128],[166,109,228,252,211,215,255,174,128,128,128],[39,77,162,232,172,180,245,178,255,255,128]],[[1,52,220,246,198,199,249,220,255,255,128],[124,74,191,243,183,193,250,221,255,255,128],[24,71,130,219,154,170,243,182,255,255,128]],[[1,182,225,249,219,240,255,224,128,128,128],[149,150,226,252,216,205,255,171,128,128,128],[28,108,170,242,183,194,254,223,255,255,128]],[[1,81,230,252,204,203,255,192,128,128,128],[123,102,209,247,188,196,255,233,128,128,128],[20,95,153,243,164,173,255,203,128,128,128]],[[1,222,248,255,216,213,128,128,128,128,128],[168,175,246,252,235,205,255,255,128,128,128],[47,116,215,255,211,212,255,255,128,128,128]],[[1,121,236,253,212,214,255,255,128,128,128],[141,84,213,252,201,202,255,219,128,128,128],[42,80,160,240,162,185,255,205,128,128,128]],[[1,1,255,128,128,128,128,128,128,128,128],[244,1,255,128,128,128,128,128,128,128,128],[238,1,255,128,128,128,128,128,128,128,128]]]],xde=[[[231,120,48,89,115,113,120,152,112],[152,179,64,126,170,118,46,70,95],[175,69,143,80,85,82,72,155,103],[56,58,10,171,218,189,17,13,152],[114,26,17,163,44,195,21,10,173],[121,24,80,195,26,62,44,64,85],[144,71,10,38,171,213,144,34,26],[170,46,55,19,136,160,33,206,71],[63,20,8,114,114,208,12,9,226],[81,40,11,96,182,84,29,16,36]],[[134,183,89,137,98,101,106,165,148],[72,187,100,130,157,111,32,75,80],[66,102,167,99,74,62,40,234,128],[41,53,9,178,241,141,26,8,107],[74,43,26,146,73,166,49,23,157],[65,38,105,160,51,52,31,115,128],[104,79,12,27,217,255,87,17,7],[87,68,71,44,114,51,15,186,23],[47,41,14,110,182,183,21,17,194],[66,45,25,102,197,189,23,18,22]],[[88,88,147,150,42,46,45,196,205],[43,97,183,117,85,38,35,179,61],[39,53,200,87,26,21,43,232,171],[56,34,51,104,114,102,29,93,77],[39,28,85,171,58,165,90,98,64],[34,22,116,206,23,34,43,166,73],[107,54,32,26,51,1,81,43,31],[68,25,106,22,64,171,36,225,114],[34,19,21,102,132,188,16,76,124],[62,18,78,95,85,57,50,48,51]],[[193,101,35,159,215,111,89,46,111],[60,148,31,172,219,228,21,18,111],[112,113,77,85,179,255,38,120,114],[40,42,1,196,245,209,10,25,109],[88,43,29,140,166,213,37,43,154],[61,63,30,155,67,45,68,1,209],[100,80,8,43,154,1,51,26,71],[142,78,78,16,255,128,34,197,171],[41,40,5,102,211,183,4,1,221],[51,50,17,168,209,192,23,25,82]],[[138,31,36,171,27,166,38,44,229],[67,87,58,169,82,115,26,59,179],[63,59,90,180,59,166,93,73,154],[40,40,21,116,143,209,34,39,175],[47,15,16,183,34,223,49,45,183],[46,17,33,183,6,98,15,32,183],[57,46,22,24,128,1,54,17,37],[65,32,73,115,28,128,23,128,205],[40,3,9,115,51,192,18,6,223],[87,37,9,115,59,77,64,21,47]],[[104,55,44,218,9,54,53,130,226],[64,90,70,205,40,41,23,26,57],[54,57,112,184,5,41,38,166,213],[30,34,26,133,152,116,10,32,134],[39,19,53,221,26,114,32,73,255],[31,9,65,234,2,15,1,118,73],[75,32,12,51,192,255,160,43,51],[88,31,35,67,102,85,55,186,85],[56,21,23,111,59,205,45,37,192],[55,38,70,124,73,102,1,34,98]],[[125,98,42,88,104,85,117,175,82],[95,84,53,89,128,100,113,101,45],[75,79,123,47,51,128,81,171,1],[57,17,5,71,102,57,53,41,49],[38,33,13,121,57,73,26,1,85],[41,10,67,138,77,110,90,47,114],[115,21,2,10,102,255,166,23,6],[101,29,16,10,85,128,101,196,26],[57,18,10,102,102,213,34,20,43],[117,20,15,36,163,128,68,1,26]],[[102,61,71,37,34,53,31,243,192],[69,60,71,38,73,119,28,222,37],[68,45,128,34,1,47,11,245,171],[62,17,19,70,146,85,55,62,70],[37,43,37,154,100,163,85,160,1],[63,9,92,136,28,64,32,201,85],[75,15,9,9,64,255,184,119,16],[86,6,28,5,64,255,25,248,1],[56,8,17,132,137,255,55,116,128],[58,15,20,82,135,57,26,121,40]],[[164,50,31,137,154,133,25,35,218],[51,103,44,131,131,123,31,6,158],[86,40,64,135,148,224,45,183,128],[22,26,17,131,240,154,14,1,209],[45,16,21,91,64,222,7,1,197],[56,21,39,155,60,138,23,102,213],[83,12,13,54,192,255,68,47,28],[85,26,85,85,128,128,32,146,171],[18,11,7,63,144,171,4,4,246],[35,27,10,146,174,171,12,26,128]],[[190,80,35,99,180,80,126,54,45],[85,126,47,87,176,51,41,20,32],[101,75,128,139,118,146,116,128,85],[56,41,15,176,236,85,37,9,62],[71,30,17,119,118,255,17,18,138],[101,38,60,138,55,70,43,26,142],[146,36,19,30,171,255,97,27,20],[138,45,61,62,219,1,81,188,64],[32,41,20,117,151,142,20,21,163],[112,19,12,61,195,128,48,4,24]]],vde=[[[[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[176,246,255,255,255,255,255,255,255,255,255],[223,241,252,255,255,255,255,255,255,255,255],[249,253,253,255,255,255,255,255,255,255,255]],[[255,244,252,255,255,255,255,255,255,255,255],[234,254,254,255,255,255,255,255,255,255,255],[253,255,255,255,255,255,255,255,255,255,255]],[[255,246,254,255,255,255,255,255,255,255,255],[239,253,254,255,255,255,255,255,255,255,255],[254,255,254,255,255,255,255,255,255,255,255]],[[255,248,254,255,255,255,255,255,255,255,255],[251,255,254,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[255,253,254,255,255,255,255,255,255,255,255],[251,254,254,255,255,255,255,255,255,255,255],[254,255,254,255,255,255,255,255,255,255,255]],[[255,254,253,255,254,255,255,255,255,255,255],[250,255,254,255,254,255,255,255,255,255,255],[254,255,255,255,255,255,255,255,255,255,255]],[[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]]],[[[217,255,255,255,255,255,255,255,255,255,255],[225,252,241,253,255,255,254,255,255,255,255],[234,250,241,250,253,255,253,254,255,255,255]],[[255,254,255,255,255,255,255,255,255,255,255],[223,254,254,255,255,255,255,255,255,255,255],[238,253,254,254,255,255,255,255,255,255,255]],[[255,248,254,255,255,255,255,255,255,255,255],[249,254,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[255,253,255,255,255,255,255,255,255,255,255],[247,254,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[255,253,254,255,255,255,255,255,255,255,255],[252,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[255,254,254,255,255,255,255,255,255,255,255],[253,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[255,254,253,255,255,255,255,255,255,255,255],[250,255,255,255,255,255,255,255,255,255,255],[254,255,255,255,255,255,255,255,255,255,255]],[[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]]],[[[186,251,250,255,255,255,255,255,255,255,255],[234,251,244,254,255,255,255,255,255,255,255],[251,251,243,253,254,255,254,255,255,255,255]],[[255,253,254,255,255,255,255,255,255,255,255],[236,253,254,255,255,255,255,255,255,255,255],[251,253,253,254,254,255,255,255,255,255,255]],[[255,254,254,255,255,255,255,255,255,255,255],[254,254,254,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[255,254,255,255,255,255,255,255,255,255,255],[254,254,255,255,255,255,255,255,255,255,255],[254,255,255,255,255,255,255,255,255,255,255]],[[255,255,255,255,255,255,255,255,255,255,255],[254,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]]],[[[248,255,255,255,255,255,255,255,255,255,255],[250,254,252,254,255,255,255,255,255,255,255],[248,254,249,253,255,255,255,255,255,255,255]],[[255,253,253,255,255,255,255,255,255,255,255],[246,253,253,255,255,255,255,255,255,255,255],[252,254,251,254,254,255,255,255,255,255,255]],[[255,254,252,255,255,255,255,255,255,255,255],[248,254,253,255,255,255,255,255,255,255,255],[253,255,254,254,255,255,255,255,255,255,255]],[[255,251,254,255,255,255,255,255,255,255,255],[245,251,254,255,255,255,255,255,255,255,255],[253,253,254,255,255,255,255,255,255,255,255]],[[255,251,253,255,255,255,255,255,255,255,255],[252,253,254,255,255,255,255,255,255,255,255],[255,254,255,255,255,255,255,255,255,255,255]],[[255,252,255,255,255,255,255,255,255,255,255],[249,255,254,255,255,255,255,255,255,255,255],[255,255,254,255,255,255,255,255,255,255,255]],[[255,255,253,255,255,255,255,255,255,255,255],[250,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[255,255,255,255,255,255,255,255,255,255,255],[254,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]]]],yde=[0,1,2,3,6,4,5,6,6,6,6,6,6,6,6,7,0],ZA=[],Gd=[],bh=[],bde=1,iL=2,e0=[],Zu=[];Wu("UpsampleRgbLinePair",Ft,3),Wu("UpsampleBgrLinePair",qt,3),Wu("UpsampleRgbaLinePair",Sa,4),Wu("UpsampleBgraLinePair",ra,4),Wu("UpsampleArgbLinePair",ei,4),Wu("UpsampleRgba4444LinePair",ma,2),Wu("UpsampleRgb565LinePair",Fr,2);var wde=E.UpsampleRgbLinePair,Nde=E.UpsampleBgrLinePair,oL=E.UpsampleRgbaLinePair,lL=E.UpsampleBgraLinePair,cL=E.UpsampleArgbLinePair,uL=E.UpsampleRgba4444LinePair,Cde=E.UpsampleRgb565LinePair,_N=16,EN=1<<_N-1,H1=-227,O4=482,_de=6,dL=0,Ede=s(256),Sde=s(256),Ide=s(256),jde=s(256),Pde=s(O4-H1),Bde=s(O4-H1);gs("YuvToRgbRow",Ft,3),gs("YuvToBgrRow",qt,3),gs("YuvToRgbaRow",Sa,4),gs("YuvToBgraRow",ra,4),gs("YuvToArgbRow",ei,4),gs("YuvToRgba4444Row",ma,2),gs("YuvToRgb565Row",Fr,2);var fL=[0,4,8,12,128,132,136,140,256,260,264,268,384,388,392,396],SN=[0,2,8],Tde=[8,7,6,4,4,2,2,2,1,1,1,1],kde=1;this.WebPDecodeRGBA=function(N,F,W,le,je){var Qe=bN,$e=new lr,ze=new Ne;$e.ba=ze,ze.S=Qe,ze.width=[ze.width],ze.height=[ze.height];var Ze=ze.width,it=ze.height,Ct=new De;if(Ct==null||N==null)var Vt=2;else e(Ct!=null),Vt=$d(N,F,W,Ct.width,Ct.height,Ct.Pd,Ct.Qd,Ct.format,null);if(Vt!=0?Ze=0:(Ze!=null&&(Ze[0]=Ct.width[0]),it!=null&&(it[0]=Ct.height[0]),Ze=1),Ze){ze.width=ze.width[0],ze.height=ze.height[0],le!=null&&(le[0]=ze.width),je!=null&&(je[0]=ze.height);e:{if(le=new wr,(je=new vr).data=N,je.w=F,je.ha=W,je.kd=1,F=[0],e(je!=null),((N=$d(je.data,je.w,je.ha,null,null,null,F,null,je))==0||N==7)&&F[0]&&(N=4),(F=N)==0){if(e($e!=null),le.data=je.data,le.w=je.w+je.offset,le.ha=je.ha-je.offset,le.put=Ee,le.ac=nt,le.bc=we,le.ma=$e,je.xa){if((N=ft())==null){$e=1;break e}if(function(ot,It){var Dt=[0],sr=[0],Qt=[0];t:for(;;){if(ot==null)return 0;if(It==null)return ot.a=2,0;if(ot.l=It,ot.a=0,ae(ot.m,It.data,It.w,It.ha),!oe(ot.m,Dt,sr,Qt)){ot.a=3;break t}if(ot.xb=iL,It.width=Dt[0],It.height=sr[0],!et(Dt[0],sr[0],1,ot,null))break t;return 1}return e(ot.a!=0),0}(N,le)){if(le=(F=KA(le.width,le.height,$e.Oa,$e.ba))==0){t:{le=N;r:for(;;){if(le==null){le=0;break t}if(e(le.s.yc!=null),e(le.s.Ya!=null),e(0<le.s.Wb),e((W=le.l)!=null),e((je=W.ma)!=null),le.xb!=0){if(le.ca=je.ba,le.tb=je.tb,e(le.ca!=null),!k1(je.Oa,W,wN)){le.a=2;break r}if(!ut(le,W.width)||W.da)break r;if((W.da||Ae(le.ca.S))&&Lc(),11>le.ca.S||(alert("todo:WebPInitConvertARGBToYUV"),le.ca.f.kb.F!=null&&Lc()),le.Pb&&0<le.s.ua&&le.s.vb.X==null&&!J(le.s.vb,le.s.Wa.Xa)){le.a=1;break r}le.xb=0}if(!Ge(le,le.V,le.Ba,le.c,le.i,W.o,L))break r;je.Dc=le.Ma,le=1;break t}e(le.a!=0),le=0}le=!le}le&&(F=N.a)}else F=N.a}else{if((N=new Or)==null){$e=1;break e}if(N.Fa=je.na,N.P=je.P,N.qc=je.Sa,Kr(N,le)){if((F=KA(le.width,le.height,$e.Oa,$e.ba))==0){if(N.Aa=0,W=$e.Oa,e((je=N)!=null),W!=null){if(0<(Ze=0>(Ze=W.Md)?0:100<Ze?255:255*Ze/100)){for(it=Ct=0;4>it;++it)12>(Vt=je.pb[it]).lc&&(Vt.ia=Ze*Tde[0>Vt.lc?0:Vt.lc]>>3),Ct|=Vt.ia;Ct&&(alert("todo:VP8InitRandom"),je.ia=1)}je.Ga=W.Id,100<je.Ga?je.Ga=100:0>je.Ga&&(je.Ga=0)}(function(ot,It){if(ot==null)return 0;if(It==null)return $r(ot,2,"NULL VP8Io parameter in VP8Decode().");if(!ot.cb&&!Kr(ot,It))return 0;if(e(ot.cb),It.ac==null||It.ac(It)){It.ob&&(ot.L=0);var Dt=SN[ot.L];if(ot.L==2?(ot.yb=0,ot.zb=0):(ot.yb=It.v-Dt>>4,ot.zb=It.j-Dt>>4,0>ot.yb&&(ot.yb=0),0>ot.zb&&(ot.zb=0)),ot.Va=It.o+15+Dt>>4,ot.Hb=It.va+15+Dt>>4,ot.Hb>ot.za&&(ot.Hb=ot.za),ot.Va>ot.Ub&&(ot.Va=ot.Ub),0<ot.L){var sr=ot.ed;for(Dt=0;4>Dt;++Dt){var Qt;if(ot.Qa.Cb){var ur=ot.Qa.Lb[Dt];ot.Qa.Fb||(ur+=sr.Tb)}else ur=sr.Tb;for(Qt=0;1>=Qt;++Qt){var dr=ot.gd[Dt][Qt],Sr=ur;if(sr.Pc&&(Sr+=sr.vd[0],Qt&&(Sr+=sr.od[0])),0<(Sr=0>Sr?0:63<Sr?63:Sr)){var br=Sr;0<sr.wb&&(br=4<sr.wb?br>>2:br>>1)>9-sr.wb&&(br=9-sr.wb),1>br&&(br=1),dr.dd=br,dr.tc=2*Sr+br,dr.ld=40<=Sr?2:15<=Sr?1:0}else dr.tc=0;dr.La=Qt}}}Dt=0}else $r(ot,6,"Frame setup failed"),Dt=ot.a;if(Dt=Dt==0){if(Dt){ot.$c=0,0<ot.Aa||(ot.Ic=kde);t:{Dt=ot.Ic,sr=4*(br=ot.za);var xn=32*br,on=br+1,Wn=0<ot.L?br*(0<ot.Aa?2:1):0,hn=(ot.Aa==2?2:1)*br;if((dr=sr+832+(Qt=3*(16*Dt+SN[ot.L])/2*xn)+(ur=ot.Fa!=null&&0<ot.Fa.length?ot.Kc.c*ot.Kc.i:0))!=dr)Dt=0;else{if(dr>ot.Vb){if(ot.Vb=0,ot.Ec=s(dr),ot.Fc=0,ot.Ec==null){Dt=$r(ot,1,"no memory during frame initialization.");break t}ot.Vb=dr}dr=ot.Ec,Sr=ot.Fc,ot.Ac=dr,ot.Bc=Sr,Sr+=sr,ot.Gd=o(xn,Nn),ot.Hd=0,ot.rb=o(on+1,Nr),ot.sb=1,ot.wa=Wn?o(Wn,xr):null,ot.Y=0,ot.D.Nb=0,ot.D.wa=ot.wa,ot.D.Y=ot.Y,0<ot.Aa&&(ot.D.Y+=br),e(!0),ot.oc=dr,ot.pc=Sr,Sr+=832,ot.ya=o(hn,_r),ot.aa=0,ot.D.ya=ot.ya,ot.D.aa=ot.aa,ot.Aa==2&&(ot.D.aa+=br),ot.R=16*br,ot.B=8*br,br=(xn=SN[ot.L])*ot.R,xn=xn/2*ot.B,ot.sa=dr,ot.ta=Sr+br,ot.qa=ot.sa,ot.ra=ot.ta+16*Dt*ot.R+xn,ot.Ha=ot.qa,ot.Ia=ot.ra+8*Dt*ot.B+xn,ot.$c=0,Sr+=Qt,ot.mb=ur?dr:null,ot.nb=ur?Sr:null,e(Sr+ur<=ot.Fc+ot.Vb),dt(ot),a(ot.Ac,ot.Bc,0,sr),Dt=1}}if(Dt){if(It.ka=0,It.y=ot.sa,It.O=ot.ta,It.f=ot.qa,It.N=ot.ra,It.ea=ot.Ha,It.Vd=ot.Ia,It.fa=ot.R,It.Rc=ot.B,It.F=null,It.J=0,!tL){for(Dt=-255;255>=Dt;++Dt)Y8[255+Dt]=0>Dt?-Dt:Dt;for(Dt=-1020;1020>=Dt;++Dt)J8[1020+Dt]=-128>Dt?-128:127<Dt?127:Dt;for(Dt=-112;112>=Dt;++Dt)Z8[112+Dt]=-16>Dt?-16:15<Dt?15:Dt;for(Dt=-255;510>=Dt;++Dt)eL[255+Dt]=0>Dt?0:255<Dt?255:Dt;tL=1}JA=pt,Km=ne,Ff=He,Ma=tt,us=Je,Yu=fr,Pi=Bf,uo=co,yh=Ie,U1=st,zg=zu,xN=Q,V8=gt,H8=Pt,$8=uc,G8=sl,K8=fu,q8=GA,Gd[0]=Ir,Gd[1]=Wt,Gd[2]=pn,Gd[3]=un,Gd[4]=pr,Gd[5]=Fn,Gd[6]=jr,Gd[7]=Sn,Gd[8]=ua,Gd[9]=yn,ZA[0]=Dr,ZA[1]=Rt,ZA[2]=$t,ZA[3]=kr,ZA[4]=Yr,ZA[5]=zr,ZA[6]=Er,bh[0]=kl,bh[1]=Xt,bh[2]=ga,bh[3]=Wi,bh[4]=Qn,bh[5]=xa,bh[6]=du,Dt=1}else Dt=0}Dt&&(Dt=function(pa,fo){for(pa.M=0;pa.M<pa.Va;++pa.M){var Xn,An=pa.Jc[pa.M&pa.Xb],qr=pa.m,Bi=pa;for(Xn=0;Xn<Bi.za;++Xn){var $n=qr,va=Bi,_s=va.Ac,ll=va.Bc+4*Xn,dc=va.zc,gi=va.ya[va.aa+Xn];if(va.Qa.Bb?gi.$b=te($n,va.Pa.jb[0])?2+te($n,va.Pa.jb[2]):te($n,va.Pa.jb[1]):gi.$b=0,va.kc&&(gi.Ad=te($n,va.Bd)),gi.Za=!te($n,145)+0,gi.Za){var Dl=gi.Ob,fc=0;for(va=0;4>va;++va){var ho,wa=dc[0+va];for(ho=0;4>ho;++ho){wa=xde[_s[ll+ho]][wa];for(var Ha=sL[te($n,wa[0])];0<Ha;)Ha=sL[2*Ha+te($n,wa[Ha])];wa=-Ha,_s[ll+ho]=wa}n(Dl,fc,_s,ll,4),fc+=4,dc[0+va]=wa}}else wa=te($n,156)?te($n,128)?1:3:te($n,163)?2:0,gi.Ob[0]=wa,a(_s,ll,wa,4),a(dc,0,wa,4);gi.Dd=te($n,142)?te($n,114)?te($n,183)?1:3:2:0}if(Bi.m.Ka)return $r(pa,7,"Premature end-of-partition0 encountered.");for(;pa.ja<pa.za;++pa.ja){if(Bi=An,$n=(qr=pa).rb[qr.sb-1],_s=qr.rb[qr.sb+qr.ja],Xn=qr.ya[qr.aa+qr.ja],ll=qr.kc?Xn.Ad:0)$n.la=_s.la=0,Xn.Za||($n.Na=_s.Na=0),Xn.Hc=0,Xn.Gc=0,Xn.ia=0;else{var xi,$a;if($n=_s,_s=Bi,ll=qr.Pa.Xc,dc=qr.ya[qr.aa+qr.ja],gi=qr.pb[dc.$b],va=dc.ad,Dl=0,fc=qr.rb[qr.sb-1],wa=ho=0,a(va,Dl,0,384),dc.Za)var cl=0,Kd=ll[3];else{Ha=s(16);var Ti=$n.Na+fc.Na;if(Ti=V1(_s,ll[1],Ti,gi.Eb,0,Ha,0),$n.Na=fc.Na=(0<Ti)+0,1<Ti)JA(Ha,0,va,Dl);else{var Uc=Ha[0]+3>>3;for(Ha=0;256>Ha;Ha+=16)va[Dl+Ha]=Uc}cl=1,Kd=ll[0]}var ds=15&$n.la,Ao=15&fc.la;for(Ha=0;4>Ha;++Ha){var gu=1&Ao;for(Uc=$a=0;4>Uc;++Uc)ds=ds>>1|(gu=(Ti=V1(_s,Kd,Ti=gu+(1&ds),gi.Sc,cl,va,Dl))>cl)<<7,$a=$a<<2|(3<Ti?3:1<Ti?2:va[Dl+0]!=0),Dl+=16;ds>>=4,Ao=Ao>>1|gu<<7,ho=(ho<<8|$a)>>>0}for(Kd=ds,cl=Ao>>4,xi=0;4>xi;xi+=2){for($a=0,ds=$n.la>>4+xi,Ao=fc.la>>4+xi,Ha=0;2>Ha;++Ha){for(gu=1&Ao,Uc=0;2>Uc;++Uc)Ti=gu+(1&ds),ds=ds>>1|(gu=0<(Ti=V1(_s,ll[2],Ti,gi.Qc,0,va,Dl)))<<3,$a=$a<<2|(3<Ti?3:1<Ti?2:va[Dl+0]!=0),Dl+=16;ds>>=2,Ao=Ao>>1|gu<<5}wa|=$a<<4*xi,Kd|=ds<<4<<xi,cl|=(240&Ao)<<xi}$n.la=Kd,fc.la=cl,dc.Hc=ho,dc.Gc=wa,dc.ia=43690&wa?0:gi.ia,ll=!(ho|wa)}if(0<qr.L&&(qr.wa[qr.Y+qr.ja]=qr.gd[Xn.$b][Xn.Za],qr.wa[qr.Y+qr.ja].La|=!ll),Bi.Ka)return $r(pa,7,"Premature end-of-file encountered.")}if(dt(pa),qr=fo,Bi=1,Xn=(An=pa).D,$n=0<An.L&&An.M>=An.zb&&An.M<=An.Va,An.Aa==0)t:{if(Xn.M=An.M,Xn.uc=$n,ol(An,Xn),Bi=1,Xn=($a=An.D).Nb,$n=(wa=SN[An.L])*An.R,_s=wa/2*An.B,Ha=16*Xn*An.R,Uc=8*Xn*An.B,ll=An.sa,dc=An.ta-$n+Ha,gi=An.qa,va=An.ra-_s+Uc,Dl=An.Ha,fc=An.Ia-_s+Uc,Ao=(ds=$a.M)==0,ho=ds>=An.Va-1,An.Aa==2&&ol(An,$a),$a.uc)for(gu=(Ti=An).D.M,e(Ti.D.uc),$a=Ti.yb;$a<Ti.Hb;++$a){cl=$a,Kd=gu;var hc=(xu=(ul=Ti).D).Nb;xi=ul.R;var xu=xu.wa[xu.Y+cl],vu=ul.sa,Qc=ul.ta+16*hc*xi+16*cl,yu=xu.dd,xs=xu.tc;if(xs!=0)if(e(3<=xs),ul.L==1)0<cl&&G8(vu,Qc,xi,xs+4),xu.La&&q8(vu,Qc,xi,xs),0<Kd&&$8(vu,Qc,xi,xs+4),xu.La&&K8(vu,Qc,xi,xs);else{var bu=ul.B,qd=ul.qa,qm=ul.ra+8*hc*bu+8*cl,wh=ul.Ha,ul=ul.Ia+8*hc*bu+8*cl;hc=xu.ld,0<cl&&(uo(vu,Qc,xi,xs+4,yu,hc),U1(qd,qm,wh,ul,bu,xs+4,yu,hc)),xu.La&&(xN(vu,Qc,xi,xs,yu,hc),H8(qd,qm,wh,ul,bu,xs,yu,hc)),0<Kd&&(Pi(vu,Qc,xi,xs+4,yu,hc),yh(qd,qm,wh,ul,bu,xs+4,yu,hc)),xu.La&&(zg(vu,Qc,xi,xs,yu,hc),V8(qd,qm,wh,ul,bu,xs,yu,hc))}}if(An.ia&&alert("todo:DitherRow"),qr.put!=null){if($a=16*ds,ds=16*(ds+1),Ao?(qr.y=An.sa,qr.O=An.ta+Ha,qr.f=An.qa,qr.N=An.ra+Uc,qr.ea=An.Ha,qr.W=An.Ia+Uc):($a-=wa,qr.y=ll,qr.O=dc,qr.f=gi,qr.N=va,qr.ea=Dl,qr.W=fc),ho||(ds-=wa),ds>qr.o&&(ds=qr.o),qr.F=null,qr.J=null,An.Fa!=null&&0<An.Fa.length&&$a<ds&&(qr.J=Va(An,qr,$a,ds-$a),qr.F=An.mb,qr.F==null&&qr.F.length==0)){Bi=$r(An,3,"Could not decode alpha data.");break t}$a<qr.j&&(wa=qr.j-$a,$a=qr.j,e(!(1&wa)),qr.O+=An.R*wa,qr.N+=An.B*(wa>>1),qr.W+=An.B*(wa>>1),qr.F!=null&&(qr.J+=qr.width*wa)),$a<ds&&(qr.O+=qr.v,qr.N+=qr.v>>1,qr.W+=qr.v>>1,qr.F!=null&&(qr.J+=qr.v),qr.ka=$a-qr.j,qr.U=qr.va-qr.v,qr.T=ds-$a,Bi=qr.put(qr))}Xn+1!=An.Ic||ho||(n(An.sa,An.ta-$n,ll,dc+16*An.R,$n),n(An.qa,An.ra-_s,gi,va+8*An.B,_s),n(An.Ha,An.Ia-_s,Dl,fc+8*An.B,_s))}if(!Bi)return $r(pa,6,"Output aborted.")}return 1}(ot,It)),It.bc!=null&&It.bc(It),Dt&=1}return Dt?(ot.cb=0,Dt):0})(N,le)||(F=N.a)}}else F=N.a}F==0&&$e.Oa!=null&&$e.Oa.fd&&(F=F1($e.ba))}$e=F}Qe=$e!=0?null:11>Qe?ze.f.RGBA.eb:ze.f.kb.y}else Qe=null;return Qe};var hL=[3,4,3,4,4,2,2,4,4,4,2,1,1]};function u(E,T){for(var k="",B=0;B<4;B++)k+=String.fromCharCode(E[T++]);return k}function d(E,T){return E[T+0]|E[T+1]<<8}function f(E,T){return(E[T+0]|E[T+1]<<8|E[T+2]<<16)>>>0}function A(E,T){return(E[T+0]|E[T+1]<<8|E[T+2]<<16|E[T+3]<<24)>>>0}new c;var h=[0],m=[0],p=[],x=new c,v=t,y=function(E,T){var k={},B=0,D=!1,X=0,me=0;if(k.frames=[],!function(O,G){for(var z=0;z<4;z++)if(O[G+z]!="RIFF".charCodeAt(z))return!0;return!1}(E,T)){for(A(E,T+=4),T+=8;T<E.length;){var pe=u(E,T),he=A(E,T+=4);T+=4;var ve=he+(1&he);switch(pe){case"VP8 ":case"VP8L":k.frames[B]===void 0&&(k.frames[B]={}),(ke=k.frames[B]).src_off=D?me:T-8,ke.src_size=X+he+8,B++,D&&(D=!1,X=0,me=0);break;case"VP8X":(ke=k.header={}).feature_flags=E[T];var ae=T+4;ke.canvas_width=1+f(E,ae),ae+=3,ke.canvas_height=1+f(E,ae),ae+=3;break;case"ALPH":D=!0,X=ve+8,me=T-8;break;case"ANIM":(ke=k.header).bgcolor=A(E,T),ae=T+4,ke.loop_count=d(E,ae),ae+=2;break;case"ANMF":var Pe,ke;(ke=k.frames[B]={}).offset_x=2*f(E,T),T+=3,ke.offset_y=2*f(E,T),T+=3,ke.width=1+f(E,T),T+=3,ke.height=1+f(E,T),T+=3,ke.duration=f(E,T),T+=3,Pe=E[T++],ke.dispose=1&Pe,ke.blend=Pe>>1&1}pe!="ANMF"&&(T+=ve)}return k}}(v,0);y.response=v,y.rgbaoutput=!0,y.dataurl=!1;var b=y.header?y.header:null,w=y.frames?y.frames:null;if(b){b.loop_counter=b.loop_count,h=[b.canvas_height],m=[b.canvas_width];for(var j=0;j<w.length&&w[j].blend!=0;j++);}var I=w[0],_=x.WebPDecodeRGBA(v,I.src_off,I.src_size,m,h);I.rgba=_,I.imgwidth=m[0],I.imgheight=h[0];for(var S=0;S<m[0]*h[0]*4;S++)p[S]=_[S];return this.width=m,this.height=h,this.data=p,this}(function(t){var e,r,n,a,s,o,l,c,u,d=function(O){return O=O||{},this.isStrokeTransparent=O.isStrokeTransparent||!1,this.strokeOpacity=O.strokeOpacity||1,this.strokeStyle=O.strokeStyle||"#000000",this.fillStyle=O.fillStyle||"#000000",this.isFillTransparent=O.isFillTransparent||!1,this.fillOpacity=O.fillOpacity||1,this.font=O.font||"10px sans-serif",this.textBaseline=O.textBaseline||"alphabetic",this.textAlign=O.textAlign||"left",this.lineWidth=O.lineWidth||1,this.lineJoin=O.lineJoin||"miter",this.lineCap=O.lineCap||"butt",this.path=O.path||[],this.transform=O.transform!==void 0?O.transform.clone():new c,this.globalCompositeOperation=O.globalCompositeOperation||"normal",this.globalAlpha=O.globalAlpha||1,this.clip_path=O.clip_path||[],this.currentPoint=O.currentPoint||new o,this.miterLimit=O.miterLimit||10,this.lastPoint=O.lastPoint||new o,this.lineDashOffset=O.lineDashOffset||0,this.lineDash=O.lineDash||[],this.margin=O.margin||[0,0,0,0],this.prevPageLastElemOffset=O.prevPageLastElemOffset||0,this.ignoreClearRect=typeof O.ignoreClearRect!="boolean"||O.ignoreClearRect,this};t.events.push(["initialized",function(){this.context2d=new f(this),e=this.internal.f2,r=this.internal.getCoordinateString,n=this.internal.getVerticalCoordinateString,a=this.internal.getHorizontalCoordinate,s=this.internal.getVerticalCoordinate,o=this.internal.Point,l=this.internal.Rectangle,c=this.internal.Matrix,u=new d}]);var f=function(O){Object.defineProperty(this,"canvas",{get:function(){return{parentNode:!1,style:!1}}});var G=O;Object.defineProperty(this,"pdf",{get:function(){return G}});var z=!1;Object.defineProperty(this,"pageWrapXEnabled",{get:function(){return z},set:function(J){z=!!J}});var U=!1;Object.defineProperty(this,"pageWrapYEnabled",{get:function(){return U},set:function(J){U=!!J}});var Y=0;Object.defineProperty(this,"posX",{get:function(){return Y},set:function(J){isNaN(J)||(Y=J)}});var ee=0;Object.defineProperty(this,"posY",{get:function(){return ee},set:function(J){isNaN(J)||(ee=J)}}),Object.defineProperty(this,"margin",{get:function(){return u.margin},set:function(J){var Oe;typeof J=="number"?Oe=[J,J,J,J]:((Oe=new Array(4))[0]=J[0],Oe[1]=J.length>=2?J[1]:Oe[0],Oe[2]=J.length>=3?J[2]:Oe[0],Oe[3]=J.length>=4?J[3]:Oe[1]),u.margin=Oe}});var M=!1;Object.defineProperty(this,"autoPaging",{get:function(){return M},set:function(J){M=J}});var H=0;Object.defineProperty(this,"lastBreak",{get:function(){return H},set:function(J){H=J}});var te=[];Object.defineProperty(this,"pageBreaks",{get:function(){return te},set:function(J){te=J}}),Object.defineProperty(this,"ctx",{get:function(){return u},set:function(J){J instanceof d&&(u=J)}}),Object.defineProperty(this,"path",{get:function(){return u.path},set:function(J){u.path=J}});var Ce=[];Object.defineProperty(this,"ctxStack",{get:function(){return Ce},set:function(J){Ce=J}}),Object.defineProperty(this,"fillStyle",{get:function(){return this.ctx.fillStyle},set:function(J){var Oe;Oe=A(J),this.ctx.fillStyle=Oe.style,this.ctx.isFillTransparent=Oe.a===0,this.ctx.fillOpacity=Oe.a,this.pdf.setFillColor(Oe.r,Oe.g,Oe.b,{a:Oe.a}),this.pdf.setTextColor(Oe.r,Oe.g,Oe.b,{a:Oe.a})}}),Object.defineProperty(this,"strokeStyle",{get:function(){return this.ctx.strokeStyle},set:function(J){var Oe=A(J);this.ctx.strokeStyle=Oe.style,this.ctx.isStrokeTransparent=Oe.a===0,this.ctx.strokeOpacity=Oe.a,Oe.a===0?this.pdf.setDrawColor(255,255,255):(Oe.a,this.pdf.setDrawColor(Oe.r,Oe.g,Oe.b))}}),Object.defineProperty(this,"lineCap",{get:function(){return this.ctx.lineCap},set:function(J){["butt","round","square"].indexOf(J)!==-1&&(this.ctx.lineCap=J,this.pdf.setLineCap(J))}}),Object.defineProperty(this,"lineWidth",{get:function(){return this.ctx.lineWidth},set:function(J){isNaN(J)||(this.ctx.lineWidth=J,this.pdf.setLineWidth(J))}}),Object.defineProperty(this,"lineJoin",{get:function(){return this.ctx.lineJoin},set:function(J){["bevel","round","miter"].indexOf(J)!==-1&&(this.ctx.lineJoin=J,this.pdf.setLineJoin(J))}}),Object.defineProperty(this,"miterLimit",{get:function(){return this.ctx.miterLimit},set:function(J){isNaN(J)||(this.ctx.miterLimit=J,this.pdf.setMiterLimit(J))}}),Object.defineProperty(this,"textBaseline",{get:function(){return this.ctx.textBaseline},set:function(J){this.ctx.textBaseline=J}}),Object.defineProperty(this,"textAlign",{get:function(){return this.ctx.textAlign},set:function(J){["right","end","center","left","start"].indexOf(J)!==-1&&(this.ctx.textAlign=J)}});var V=null,We=null,ie=null;Object.defineProperty(this,"fontFaces",{get:function(){return ie},set:function(J){V=null,We=null,ie=J}}),Object.defineProperty(this,"font",{get:function(){return this.ctx.font},set:function(J){var Oe;if(this.ctx.font=J,(Oe=/^\s*(?=(?:(?:[-a-z]+\s*){0,2}(italic|oblique))?)(?=(?:(?:[-a-z]+\s*){0,2}(small-caps))?)(?=(?:(?:[-a-z]+\s*){0,2}(bold(?:er)?|lighter|[1-9]00))?)(?:(?:normal|\1|\2|\3)\s*){0,3}((?:xx?-)?(?:small|large)|medium|smaller|larger|[.\d]+(?:\%|in|[cem]m|ex|p[ctx]))(?:\s*\/\s*(normal|[.\d]+(?:\%|in|[cem]m|ex|p[ctx])))?\s*([-_,\"\'\sa-z0-9]+?)\s*$/i.exec(J))!==null){var fe=Oe[1];Oe[2];var _e=Oe[3],Ue=Oe[4];Oe[5];var Ye=Oe[6],At=/^([.\d]+)((?:%|in|[cem]m|ex|p[ctx]))$/i.exec(Ue)[2];Ue=Math.floor(At==="px"?parseFloat(Ue)*this.pdf.internal.scaleFactor:At==="em"?parseFloat(Ue)*this.pdf.getFontSize():parseFloat(Ue)*this.pdf.internal.scaleFactor),this.pdf.setFontSize(Ue);var yt=function(q){var se,ye,ue=[],Le=q.trim();if(Le==="")return m5;if(Le in SV)return[SV[Le]];for(;Le!=="";){switch(ye=null,se=(Le=jV(Le)).charAt(0)){case'"':case"'":ye=Yje(Le.substring(1),se);break;default:ye=Jje(Le)}if(ye===null||(ue.push(ye[0]),(Le=jV(ye[1]))!==""&&Le.charAt(0)!==","))return m5;Le=Le.replace(/^,/,"")}return ue}(Ye);if(this.fontFaces){var bt=function(q,se){var ye=q.getFontList(),ue=JSON.stringify(ye);if(V===null||We!==ue){var Le=function(ct){var ht=[];return Object.keys(ct).forEach(function(xe){ct[xe].forEach(function(Ae){var Re=null;switch(Ae){case"bold":Re={family:xe,weight:"bold"};break;case"italic":Re={family:xe,style:"italic"};break;case"bolditalic":Re={family:xe,weight:"bold",style:"italic"};break;case"":case"normal":Re={family:xe}}Re!==null&&(Re.ref={name:xe,style:Ae},ht.push(Re))})}),ht}(ye);V=function(ct){for(var ht={},xe=0;xe<ct.length;++xe){var Ae=A5(ct[xe]),Re=Ae.family,lt=Ae.stretch,Ne=Ae.style,De=Ae.weight;ht[Re]=ht[Re]||{},ht[Re][lt]=ht[Re][lt]||{},ht[Re][lt][Ne]=ht[Re][lt][Ne]||{},ht[Re][lt][Ne][De]=Ae}return ht}(Le.concat(se)),We=ue}return V}(this.pdf,this.fontFaces),Nt=yt.map(function(q){return{family:q,stretch:"normal",weight:_e,style:fe}}),jt=function(q,se,ye){for(var ue=(ye=ye||{}).defaultFontFamily||"times",Le=Object.assign({},Xje,ye.genericFontFamilies||{}),ct=null,ht=null,xe=0;xe<se.length;++xe)if(Le[(ct=A5(se[xe])).family]&&(ct.family=Le[ct.family]),q.hasOwnProperty(ct.family)){ht=q[ct.family];break}if(!(ht=ht||q[ue]))throw new Error("Could not find a font-family for the rule '"+IV(ct)+"' and default family '"+ue+"'.");if(ht=function(Ae,Re){if(Re[Ae])return Re[Ae];var lt=Hk[Ae],Ne=lt<=Hk.normal?-1:1,De=EV(Re,Fre,lt,Ne);if(!De)throw new Error("Could not find a matching font-stretch value for "+Ae);return De}(ct.stretch,ht),ht=function(Ae,Re){if(Re[Ae])return Re[Ae];for(var lt=kre[Ae],Ne=0;Ne<lt.length;++Ne)if(Re[lt[Ne]])return Re[lt[Ne]];throw new Error("Could not find a matching font-style for "+Ae)}(ct.style,ht),!(ht=function(Ae,Re){if(Re[Ae])return Re[Ae];if(Ae===400&&Re[500])return Re[500];if(Ae===500&&Re[400])return Re[400];var lt=Wje[Ae],Ne=EV(Re,Ore,lt,Ae<400?-1:1);if(!Ne)throw new Error("Could not find a matching font-weight for value "+Ae);return Ne}(ct.weight,ht)))throw new Error("Failed to resolve a font for the rule '"+IV(ct)+"'.");return ht}(bt,Nt);this.pdf.setFont(jt.ref.name,jt.ref.style)}else{var St="";(_e==="bold"||parseInt(_e,10)>=700||fe==="bold")&&(St="bold"),fe==="italic"&&(St+="italic"),St.length===0&&(St="normal");for(var Ve="",Te={arial:"Helvetica",Arial:"Helvetica",verdana:"Helvetica",Verdana:"Helvetica",helvetica:"Helvetica",Helvetica:"Helvetica","sans-serif":"Helvetica",fixed:"Courier",monospace:"Courier",terminal:"Courier",cursive:"Times",fantasy:"Times",serif:"Times"},qe=0;qe<yt.length;qe++){if(this.pdf.internal.getFont(yt[qe],St,{noFallback:!0,disableWarning:!0})!==void 0){Ve=yt[qe];break}if(St==="bolditalic"&&this.pdf.internal.getFont(yt[qe],"bold",{noFallback:!0,disableWarning:!0})!==void 0)Ve=yt[qe],St="bold";else if(this.pdf.internal.getFont(yt[qe],"normal",{noFallback:!0,disableWarning:!0})!==void 0){Ve=yt[qe],St="normal";break}}if(Ve===""){for(var ge=0;ge<yt.length;ge++)if(Te[yt[ge]]){Ve=Te[yt[ge]];break}}Ve=Ve===""?"Times":Ve,this.pdf.setFont(Ve,St)}}}}),Object.defineProperty(this,"globalCompositeOperation",{get:function(){return this.ctx.globalCompositeOperation},set:function(J){this.ctx.globalCompositeOperation=J}}),Object.defineProperty(this,"globalAlpha",{get:function(){return this.ctx.globalAlpha},set:function(J){this.ctx.globalAlpha=J}}),Object.defineProperty(this,"lineDashOffset",{get:function(){return this.ctx.lineDashOffset},set:function(J){this.ctx.lineDashOffset=J,ke.call(this)}}),Object.defineProperty(this,"lineDash",{get:function(){return this.ctx.lineDash},set:function(J){this.ctx.lineDash=J,ke.call(this)}}),Object.defineProperty(this,"ignoreClearRect",{get:function(){return this.ctx.ignoreClearRect},set:function(J){this.ctx.ignoreClearRect=!!J}})};f.prototype.setLineDash=function(O){this.lineDash=O},f.prototype.getLineDash=function(){return this.lineDash.length%2?this.lineDash.concat(this.lineDash):this.lineDash.slice()},f.prototype.fill=function(){w.call(this,"fill",!1)},f.prototype.stroke=function(){w.call(this,"stroke",!1)},f.prototype.beginPath=function(){this.path=[{type:"begin"}]},f.prototype.moveTo=function(O,G){if(isNaN(O)||isNaN(G))throw hs.error("jsPDF.context2d.moveTo: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.moveTo");var z=this.ctx.transform.applyToPoint(new o(O,G));this.path.push({type:"mt",x:z.x,y:z.y}),this.ctx.lastPoint=new o(O,G)},f.prototype.closePath=function(){var O=new o(0,0),G=0;for(G=this.path.length-1;G!==-1;G--)if(this.path[G].type==="begin"&&Za(this.path[G+1])==="object"&&typeof this.path[G+1].x=="number"){O=new o(this.path[G+1].x,this.path[G+1].y);break}this.path.push({type:"close"}),this.ctx.lastPoint=new o(O.x,O.y)},f.prototype.lineTo=function(O,G){if(isNaN(O)||isNaN(G))throw hs.error("jsPDF.context2d.lineTo: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.lineTo");var z=this.ctx.transform.applyToPoint(new o(O,G));this.path.push({type:"lt",x:z.x,y:z.y}),this.ctx.lastPoint=new o(z.x,z.y)},f.prototype.clip=function(){this.ctx.clip_path=JSON.parse(JSON.stringify(this.path)),w.call(this,null,!0)},f.prototype.quadraticCurveTo=function(O,G,z,U){if(isNaN(z)||isNaN(U)||isNaN(O)||isNaN(G))throw hs.error("jsPDF.context2d.quadraticCurveTo: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.quadraticCurveTo");var Y=this.ctx.transform.applyToPoint(new o(z,U)),ee=this.ctx.transform.applyToPoint(new o(O,G));this.path.push({type:"qct",x1:ee.x,y1:ee.y,x:Y.x,y:Y.y}),this.ctx.lastPoint=new o(Y.x,Y.y)},f.prototype.bezierCurveTo=function(O,G,z,U,Y,ee){if(isNaN(Y)||isNaN(ee)||isNaN(O)||isNaN(G)||isNaN(z)||isNaN(U))throw hs.error("jsPDF.context2d.bezierCurveTo: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.bezierCurveTo");var M=this.ctx.transform.applyToPoint(new o(Y,ee)),H=this.ctx.transform.applyToPoint(new o(O,G)),te=this.ctx.transform.applyToPoint(new o(z,U));this.path.push({type:"bct",x1:H.x,y1:H.y,x2:te.x,y2:te.y,x:M.x,y:M.y}),this.ctx.lastPoint=new o(M.x,M.y)},f.prototype.arc=function(O,G,z,U,Y,ee){if(isNaN(O)||isNaN(G)||isNaN(z)||isNaN(U)||isNaN(Y))throw hs.error("jsPDF.context2d.arc: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.arc");if(ee=!!ee,!this.ctx.transform.isIdentity){var M=this.ctx.transform.applyToPoint(new o(O,G));O=M.x,G=M.y;var H=this.ctx.transform.applyToPoint(new o(0,z)),te=this.ctx.transform.applyToPoint(new o(0,0));z=Math.sqrt(Math.pow(H.x-te.x,2)+Math.pow(H.y-te.y,2))}Math.abs(Y-U)>=2*Math.PI&&(U=0,Y=2*Math.PI),this.path.push({type:"arc",x:O,y:G,radius:z,startAngle:U,endAngle:Y,counterclockwise:ee})},f.prototype.arcTo=function(O,G,z,U,Y){throw new Error("arcTo not implemented.")},f.prototype.rect=function(O,G,z,U){if(isNaN(O)||isNaN(G)||isNaN(z)||isNaN(U))throw hs.error("jsPDF.context2d.rect: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.rect");this.moveTo(O,G),this.lineTo(O+z,G),this.lineTo(O+z,G+U),this.lineTo(O,G+U),this.lineTo(O,G),this.lineTo(O+z,G),this.lineTo(O,G)},f.prototype.fillRect=function(O,G,z,U){if(isNaN(O)||isNaN(G)||isNaN(z)||isNaN(U))throw hs.error("jsPDF.context2d.fillRect: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.fillRect");if(!h.call(this)){var Y={};this.lineCap!=="butt"&&(Y.lineCap=this.lineCap,this.lineCap="butt"),this.lineJoin!=="miter"&&(Y.lineJoin=this.lineJoin,this.lineJoin="miter"),this.beginPath(),this.rect(O,G,z,U),this.fill(),Y.hasOwnProperty("lineCap")&&(this.lineCap=Y.lineCap),Y.hasOwnProperty("lineJoin")&&(this.lineJoin=Y.lineJoin)}},f.prototype.strokeRect=function(O,G,z,U){if(isNaN(O)||isNaN(G)||isNaN(z)||isNaN(U))throw hs.error("jsPDF.context2d.strokeRect: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.strokeRect");m.call(this)||(this.beginPath(),this.rect(O,G,z,U),this.stroke())},f.prototype.clearRect=function(O,G,z,U){if(isNaN(O)||isNaN(G)||isNaN(z)||isNaN(U))throw hs.error("jsPDF.context2d.clearRect: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.clearRect");this.ignoreClearRect||(this.fillStyle="#ffffff",this.fillRect(O,G,z,U))},f.prototype.save=function(O){O=typeof O!="boolean"||O;for(var G=this.pdf.internal.getCurrentPageInfo().pageNumber,z=0;z<this.pdf.internal.getNumberOfPages();z++)this.pdf.setPage(z+1),this.pdf.internal.out("q");if(this.pdf.setPage(G),O){this.ctx.fontSize=this.pdf.internal.getFontSize();var U=new d(this.ctx);this.ctxStack.push(this.ctx),this.ctx=U}},f.prototype.restore=function(O){O=typeof O!="boolean"||O;for(var G=this.pdf.internal.getCurrentPageInfo().pageNumber,z=0;z<this.pdf.internal.getNumberOfPages();z++)this.pdf.setPage(z+1),this.pdf.internal.out("Q");this.pdf.setPage(G),O&&this.ctxStack.length!==0&&(this.ctx=this.ctxStack.pop(),this.fillStyle=this.ctx.fillStyle,this.strokeStyle=this.ctx.strokeStyle,this.font=this.ctx.font,this.lineCap=this.ctx.lineCap,this.lineWidth=this.ctx.lineWidth,this.lineJoin=this.ctx.lineJoin,this.lineDash=this.ctx.lineDash,this.lineDashOffset=this.ctx.lineDashOffset)},f.prototype.toDataURL=function(){throw new Error("toDataUrl not implemented.")};var A=function(O){var G,z,U,Y;if(O.isCanvasGradient===!0&&(O=O.getColor()),!O)return{r:0,g:0,b:0,a:0,style:O};if(/transparent|rgba\s*\(\s*(\d+)\s*,\s*(\d+)\s*,\s*(\d+)\s*,\s*0+\s*\)/.test(O))G=0,z=0,U=0,Y=0;else{var ee=/rgb\s*\(\s*(\d+)\s*,\s*(\d+)\s*,\s*(\d+)\s*\)/.exec(O);if(ee!==null)G=parseInt(ee[1]),z=parseInt(ee[2]),U=parseInt(ee[3]),Y=1;else if((ee=/rgba\s*\(\s*(\d+)\s*,\s*(\d+)\s*,\s*(\d+)\s*,\s*([\d.]+)\s*\)/.exec(O))!==null)G=parseInt(ee[1]),z=parseInt(ee[2]),U=parseInt(ee[3]),Y=parseFloat(ee[4]);else{if(Y=1,typeof O=="string"&&O.charAt(0)!=="#"){var M=new Ere(O);O=M.ok?M.toHex():"#000000"}O.length===4?(G=O.substring(1,2),G+=G,z=O.substring(2,3),z+=z,U=O.substring(3,4),U+=U):(G=O.substring(1,3),z=O.substring(3,5),U=O.substring(5,7)),G=parseInt(G,16),z=parseInt(z,16),U=parseInt(U,16)}}return{r:G,g:z,b:U,a:Y,style:O}},h=function(){return this.ctx.isFillTransparent||this.globalAlpha==0},m=function(){return!!(this.ctx.isStrokeTransparent||this.globalAlpha==0)};f.prototype.fillText=function(O,G,z,U){if(isNaN(G)||isNaN(z)||typeof O!="string")throw hs.error("jsPDF.context2d.fillText: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.fillText");if(U=isNaN(U)?void 0:U,!h.call(this)){var Y=ve(this.ctx.transform.rotation),ee=this.ctx.transform.scaleX;B.call(this,{text:O,x:G,y:z,scale:ee,angle:Y,align:this.textAlign,maxWidth:U})}},f.prototype.strokeText=function(O,G,z,U){if(isNaN(G)||isNaN(z)||typeof O!="string")throw hs.error("jsPDF.context2d.strokeText: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.strokeText");if(!m.call(this)){U=isNaN(U)?void 0:U;var Y=ve(this.ctx.transform.rotation),ee=this.ctx.transform.scaleX;B.call(this,{text:O,x:G,y:z,scale:ee,renderingMode:"stroke",angle:Y,align:this.textAlign,maxWidth:U})}},f.prototype.measureText=function(O){if(typeof O!="string")throw hs.error("jsPDF.context2d.measureText: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.measureText");var G=this.pdf,z=this.pdf.internal.scaleFactor,U=G.internal.getFontSize(),Y=G.getStringUnitWidth(O)*U/G.internal.scaleFactor;return new function(ee){var M=(ee=ee||{}).width||0;return Object.defineProperty(this,"width",{get:function(){return M}}),this}({width:Y*=Math.round(96*z/72*1e4)/1e4})},f.prototype.scale=function(O,G){if(isNaN(O)||isNaN(G))throw hs.error("jsPDF.context2d.scale: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.scale");var z=new c(O,0,0,G,0,0);this.ctx.transform=this.ctx.transform.multiply(z)},f.prototype.rotate=function(O){if(isNaN(O))throw hs.error("jsPDF.context2d.rotate: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.rotate");var G=new c(Math.cos(O),Math.sin(O),-Math.sin(O),Math.cos(O),0,0);this.ctx.transform=this.ctx.transform.multiply(G)},f.prototype.translate=function(O,G){if(isNaN(O)||isNaN(G))throw hs.error("jsPDF.context2d.translate: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.translate");var z=new c(1,0,0,1,O,G);this.ctx.transform=this.ctx.transform.multiply(z)},f.prototype.transform=function(O,G,z,U,Y,ee){if(isNaN(O)||isNaN(G)||isNaN(z)||isNaN(U)||isNaN(Y)||isNaN(ee))throw hs.error("jsPDF.context2d.transform: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.transform");var M=new c(O,G,z,U,Y,ee);this.ctx.transform=this.ctx.transform.multiply(M)},f.prototype.setTransform=function(O,G,z,U,Y,ee){O=isNaN(O)?1:O,G=isNaN(G)?0:G,z=isNaN(z)?0:z,U=isNaN(U)?1:U,Y=isNaN(Y)?0:Y,ee=isNaN(ee)?0:ee,this.ctx.transform=new c(O,G,z,U,Y,ee)};var p=function(){return this.margin[0]>0||this.margin[1]>0||this.margin[2]>0||this.margin[3]>0};f.prototype.drawImage=function(O,G,z,U,Y,ee,M,H,te){var Ce=this.pdf.getImageProperties(O),V=1,We=1,ie=1,J=1;U!==void 0&&H!==void 0&&(ie=H/U,J=te/Y,V=Ce.width/U*H/U,We=Ce.height/Y*te/Y),ee===void 0&&(ee=G,M=z,G=0,z=0),U!==void 0&&H===void 0&&(H=U,te=Y),U===void 0&&H===void 0&&(H=Ce.width,te=Ce.height);var Oe=this.ctx.transform.decompose(),fe=ve(Oe.rotate.shx),_e=new c,Ue=(_e=(_e=(_e=_e.multiply(Oe.translate)).multiply(Oe.skew)).multiply(Oe.scale)).applyToRectangle(new l(ee-G*ie,M-z*J,U*V,Y*We));if(this.autoPaging){for(var Ye,At=x.call(this,Ue),yt=[],bt=0;bt<At.length;bt+=1)yt.indexOf(At[bt])===-1&&yt.push(At[bt]);b(yt);for(var Nt=yt[0],jt=yt[yt.length-1],St=Nt;St<jt+1;St++){this.pdf.setPage(St);var Ve=this.pdf.internal.pageSize.width-this.margin[3]-this.margin[1],Te=St===1?this.posY+this.margin[0]:this.margin[0],qe=this.pdf.internal.pageSize.height-this.posY-this.margin[0]-this.margin[2],ge=this.pdf.internal.pageSize.height-this.margin[0]-this.margin[2],q=St===1?0:qe+(St-2)*ge;if(this.ctx.clip_path.length!==0){var se=this.path;Ye=JSON.parse(JSON.stringify(this.ctx.clip_path)),this.path=y(Ye,this.posX+this.margin[3],-q+Te+this.ctx.prevPageLastElemOffset),j.call(this,"fill",!0),this.path=se}var ye=JSON.parse(JSON.stringify(Ue));ye=y([ye],this.posX+this.margin[3],-q+Te+this.ctx.prevPageLastElemOffset)[0];var ue=(St>Nt||St<jt)&&p.call(this);ue&&(this.pdf.saveGraphicsState(),this.pdf.rect(this.margin[3],this.margin[0],Ve,ge,null).clip().discardPath()),this.pdf.addImage(O,"JPEG",ye.x,ye.y,ye.w,ye.h,null,null,fe),ue&&this.pdf.restoreGraphicsState()}}else this.pdf.addImage(O,"JPEG",Ue.x,Ue.y,Ue.w,Ue.h,null,null,fe)};var x=function(O,G,z){var U=[];G=G||this.pdf.internal.pageSize.width,z=z||this.pdf.internal.pageSize.height-this.margin[0]-this.margin[2];var Y=this.posY+this.ctx.prevPageLastElemOffset;switch(O.type){default:case"mt":case"lt":U.push(Math.floor((O.y+Y)/z)+1);break;case"arc":U.push(Math.floor((O.y+Y-O.radius)/z)+1),U.push(Math.floor((O.y+Y+O.radius)/z)+1);break;case"qct":var ee=ae(this.ctx.lastPoint.x,this.ctx.lastPoint.y,O.x1,O.y1,O.x,O.y);U.push(Math.floor((ee.y+Y)/z)+1),U.push(Math.floor((ee.y+ee.h+Y)/z)+1);break;case"bct":var M=Pe(this.ctx.lastPoint.x,this.ctx.lastPoint.y,O.x1,O.y1,O.x2,O.y2,O.x,O.y);U.push(Math.floor((M.y+Y)/z)+1),U.push(Math.floor((M.y+M.h+Y)/z)+1);break;case"rect":U.push(Math.floor((O.y+Y)/z)+1),U.push(Math.floor((O.y+O.h+Y)/z)+1)}for(var H=0;H<U.length;H+=1)for(;this.pdf.internal.getNumberOfPages()<U[H];)v.call(this);return U},v=function(){var O=this.fillStyle,G=this.strokeStyle,z=this.font,U=this.lineCap,Y=this.lineWidth,ee=this.lineJoin;this.pdf.addPage(),this.fillStyle=O,this.strokeStyle=G,this.font=z,this.lineCap=U,this.lineWidth=Y,this.lineJoin=ee},y=function(O,G,z){for(var U=0;U<O.length;U++)switch(O[U].type){case"bct":O[U].x2+=G,O[U].y2+=z;case"qct":O[U].x1+=G,O[U].y1+=z;default:O[U].x+=G,O[U].y+=z}return O},b=function(O){return O.sort(function(G,z){return G-z})},w=function(O,G){var z=this.fillStyle,U=this.strokeStyle,Y=this.lineCap,ee=this.lineWidth,M=Math.abs(ee*this.ctx.transform.scaleX),H=this.lineJoin;if(this.autoPaging){for(var te,Ce,V=JSON.parse(JSON.stringify(this.path)),We=JSON.parse(JSON.stringify(this.path)),ie=[],J=0;J<We.length;J++)if(We[J].x!==void 0)for(var Oe=x.call(this,We[J]),fe=0;fe<Oe.length;fe+=1)ie.indexOf(Oe[fe])===-1&&ie.push(Oe[fe]);for(var _e=0;_e<ie.length;_e++)for(;this.pdf.internal.getNumberOfPages()<ie[_e];)v.call(this);b(ie);for(var Ue=ie[0],Ye=ie[ie.length-1],At=Ue;At<Ye+1;At++){this.pdf.setPage(At),this.fillStyle=z,this.strokeStyle=U,this.lineCap=Y,this.lineWidth=M,this.lineJoin=H;var yt=this.pdf.internal.pageSize.width-this.margin[3]-this.margin[1],bt=At===1?this.posY+this.margin[0]:this.margin[0],Nt=this.pdf.internal.pageSize.height-this.posY-this.margin[0]-this.margin[2],jt=this.pdf.internal.pageSize.height-this.margin[0]-this.margin[2],St=At===1?0:Nt+(At-2)*jt;if(this.ctx.clip_path.length!==0){var Ve=this.path;te=JSON.parse(JSON.stringify(this.ctx.clip_path)),this.path=y(te,this.posX+this.margin[3],-St+bt+this.ctx.prevPageLastElemOffset),j.call(this,O,!0),this.path=Ve}if(Ce=JSON.parse(JSON.stringify(V)),this.path=y(Ce,this.posX+this.margin[3],-St+bt+this.ctx.prevPageLastElemOffset),G===!1||At===0){var Te=(At>Ue||At<Ye)&&p.call(this);Te&&(this.pdf.saveGraphicsState(),this.pdf.rect(this.margin[3],this.margin[0],yt,jt,null).clip().discardPath()),j.call(this,O,G),Te&&this.pdf.restoreGraphicsState()}this.lineWidth=ee}this.path=V}else this.lineWidth=M,j.call(this,O,G),this.lineWidth=ee},j=function(O,G){if((O!=="stroke"||G||!m.call(this))&&(O==="stroke"||G||!h.call(this))){for(var z,U,Y=[],ee=this.path,M=0;M<ee.length;M++){var H=ee[M];switch(H.type){case"begin":Y.push({begin:!0});break;case"close":Y.push({close:!0});break;case"mt":Y.push({start:H,deltas:[],abs:[]});break;case"lt":var te=Y.length;if(ee[M-1]&&!isNaN(ee[M-1].x)&&(z=[H.x-ee[M-1].x,H.y-ee[M-1].y],te>0)){for(;te>=0;te--)if(Y[te-1].close!==!0&&Y[te-1].begin!==!0){Y[te-1].deltas.push(z),Y[te-1].abs.push(H);break}}break;case"bct":z=[H.x1-ee[M-1].x,H.y1-ee[M-1].y,H.x2-ee[M-1].x,H.y2-ee[M-1].y,H.x-ee[M-1].x,H.y-ee[M-1].y],Y[Y.length-1].deltas.push(z);break;case"qct":var Ce=ee[M-1].x+2/3*(H.x1-ee[M-1].x),V=ee[M-1].y+2/3*(H.y1-ee[M-1].y),We=H.x+2/3*(H.x1-H.x),ie=H.y+2/3*(H.y1-H.y),J=H.x,Oe=H.y;z=[Ce-ee[M-1].x,V-ee[M-1].y,We-ee[M-1].x,ie-ee[M-1].y,J-ee[M-1].x,Oe-ee[M-1].y],Y[Y.length-1].deltas.push(z);break;case"arc":Y.push({deltas:[],abs:[],arc:!0}),Array.isArray(Y[Y.length-1].abs)&&Y[Y.length-1].abs.push(H)}}U=G?null:O==="stroke"?"stroke":"fill";for(var fe=!1,_e=0;_e<Y.length;_e++)if(Y[_e].arc)for(var Ue=Y[_e].abs,Ye=0;Ye<Ue.length;Ye++){var At=Ue[Ye];At.type==="arc"?S.call(this,At.x,At.y,At.radius,At.startAngle,At.endAngle,At.counterclockwise,void 0,G,!fe):D.call(this,At.x,At.y),fe=!0}else if(Y[_e].close===!0)this.pdf.internal.out("h"),fe=!1;else if(Y[_e].begin!==!0){var yt=Y[_e].start.x,bt=Y[_e].start.y;X.call(this,Y[_e].deltas,yt,bt),fe=!0}U&&E.call(this,U),G&&T.call(this)}},I=function(O){var G=this.pdf.internal.getFontSize()/this.pdf.internal.scaleFactor,z=G*(this.pdf.internal.getLineHeightFactor()-1);switch(this.ctx.textBaseline){case"bottom":return O-z;case"top":return O+G-z;case"hanging":return O+G-2*z;case"middle":return O+G/2-z;default:return O}},_=function(O){return O+this.pdf.internal.getFontSize()/this.pdf.internal.scaleFactor*(this.pdf.internal.getLineHeightFactor()-1)};f.prototype.createLinearGradient=function(){var O=function(){};return O.colorStops=[],O.addColorStop=function(G,z){this.colorStops.push([G,z])},O.getColor=function(){return this.colorStops.length===0?"#000000":this.colorStops[0][1]},O.isCanvasGradient=!0,O},f.prototype.createPattern=function(){return this.createLinearGradient()},f.prototype.createRadialGradient=function(){return this.createLinearGradient()};var S=function(O,G,z,U,Y,ee,M,H,te){for(var Ce=pe.call(this,z,U,Y,ee),V=0;V<Ce.length;V++){var We=Ce[V];V===0&&(te?k.call(this,We.x1+O,We.y1+G):D.call(this,We.x1+O,We.y1+G)),me.call(this,O,G,We.x2,We.y2,We.x3,We.y3,We.x4,We.y4)}H?T.call(this):E.call(this,M)},E=function(O){switch(O){case"stroke":this.pdf.internal.out("S");break;case"fill":this.pdf.internal.out("f")}},T=function(){this.pdf.clip(),this.pdf.discardPath()},k=function(O,G){this.pdf.internal.out(r(O)+" "+n(G)+" m")},B=function(O){var G;switch(O.align){case"right":case"end":G="right";break;case"center":G="center";break;default:G="left"}var z,U,Y,ee=this.pdf.getTextDimensions(O.text),M=I.call(this,O.y),H=_.call(this,M)-ee.h,te=this.ctx.transform.applyToPoint(new o(O.x,M));if(this.autoPaging){var Ce=this.ctx.transform.decompose(),V=new c;V=(V=(V=V.multiply(Ce.translate)).multiply(Ce.skew)).multiply(Ce.scale);for(var We=this.ctx.transform.applyToRectangle(new l(O.x,M,ee.w,ee.h)),ie=V.applyToRectangle(new l(O.x,H,ee.w,ee.h)),J=x.call(this,ie),Oe=[],fe=0;fe<J.length;fe+=1)Oe.indexOf(J[fe])===-1&&Oe.push(J[fe]);b(Oe);for(var _e=Oe[0],Ue=Oe[Oe.length-1],Ye=_e;Ye<Ue+1;Ye++){this.pdf.setPage(Ye);var At=Ye===1?this.posY+this.margin[0]:this.margin[0],yt=this.pdf.internal.pageSize.height-this.posY-this.margin[0]-this.margin[2],bt=this.pdf.internal.pageSize.height-this.margin[2],Nt=bt-this.margin[0],jt=this.pdf.internal.pageSize.width-this.margin[1],St=jt-this.margin[3],Ve=Ye===1?0:yt+(Ye-2)*Nt;if(this.ctx.clip_path.length!==0){var Te=this.path;z=JSON.parse(JSON.stringify(this.ctx.clip_path)),this.path=y(z,this.posX+this.margin[3],-1*Ve+At),j.call(this,"fill",!0),this.path=Te}var qe=y([JSON.parse(JSON.stringify(ie))],this.posX+this.margin[3],-Ve+At+this.ctx.prevPageLastElemOffset)[0];O.scale>=.01&&(U=this.pdf.internal.getFontSize(),this.pdf.setFontSize(U*O.scale),Y=this.lineWidth,this.lineWidth=Y*O.scale);var ge=this.autoPaging!=="text";if(ge||qe.y+qe.h<=bt){if(ge||qe.y>=At&&qe.x<=jt){var q=ge?O.text:this.pdf.splitTextToSize(O.text,O.maxWidth||jt-qe.x)[0],se=y([JSON.parse(JSON.stringify(We))],this.posX+this.margin[3],-Ve+At+this.ctx.prevPageLastElemOffset)[0],ye=ge&&(Ye>_e||Ye<Ue)&&p.call(this);ye&&(this.pdf.saveGraphicsState(),this.pdf.rect(this.margin[3],this.margin[0],St,Nt,null).clip().discardPath()),this.pdf.text(q,se.x,se.y,{angle:O.angle,align:G,renderingMode:O.renderingMode}),ye&&this.pdf.restoreGraphicsState()}}else qe.y<bt&&(this.ctx.prevPageLastElemOffset+=bt-qe.y);O.scale>=.01&&(this.pdf.setFontSize(U),this.lineWidth=Y)}}else O.scale>=.01&&(U=this.pdf.internal.getFontSize(),this.pdf.setFontSize(U*O.scale),Y=this.lineWidth,this.lineWidth=Y*O.scale),this.pdf.text(O.text,te.x+this.posX,te.y+this.posY,{angle:O.angle,align:G,renderingMode:O.renderingMode,maxWidth:O.maxWidth}),O.scale>=.01&&(this.pdf.setFontSize(U),this.lineWidth=Y)},D=function(O,G,z,U){z=z||0,U=U||0,this.pdf.internal.out(r(O+z)+" "+n(G+U)+" l")},X=function(O,G,z){return this.pdf.lines(O,G,z,null,null)},me=function(O,G,z,U,Y,ee,M,H){this.pdf.internal.out([e(a(z+O)),e(s(U+G)),e(a(Y+O)),e(s(ee+G)),e(a(M+O)),e(s(H+G)),"c"].join(" "))},pe=function(O,G,z,U){for(var Y=2*Math.PI,ee=Math.PI/2;G>z;)G-=Y;var M=Math.abs(z-G);M<Y&&U&&(M=Y-M);for(var H=[],te=U?-1:1,Ce=G;M>1e-5;){var V=Ce+te*Math.min(M,ee);H.push(he.call(this,O,Ce,V)),M-=Math.abs(V-Ce),Ce=V}return H},he=function(O,G,z){var U=(z-G)/2,Y=O*Math.cos(U),ee=O*Math.sin(U),M=Y,H=-ee,te=M*M+H*H,Ce=te+M*Y+H*ee,V=4/3*(Math.sqrt(2*te*Ce)-Ce)/(M*ee-H*Y),We=M-V*H,ie=H+V*M,J=We,Oe=-ie,fe=U+G,_e=Math.cos(fe),Ue=Math.sin(fe);return{x1:O*Math.cos(G),y1:O*Math.sin(G),x2:We*_e-ie*Ue,y2:We*Ue+ie*_e,x3:J*_e-Oe*Ue,y3:J*Ue+Oe*_e,x4:O*Math.cos(z),y4:O*Math.sin(z)}},ve=function(O){return 180*O/Math.PI},ae=function(O,G,z,U,Y,ee){var M=O+.5*(z-O),H=G+.5*(U-G),te=Y+.5*(z-Y),Ce=ee+.5*(U-ee),V=Math.min(O,Y,M,te),We=Math.max(O,Y,M,te),ie=Math.min(G,ee,H,Ce),J=Math.max(G,ee,H,Ce);return new l(V,ie,We-V,J-ie)},Pe=function(O,G,z,U,Y,ee,M,H){var te,Ce,V,We,ie,J,Oe,fe,_e,Ue,Ye,At,yt,bt,Nt=z-O,jt=U-G,St=Y-z,Ve=ee-U,Te=M-Y,qe=H-ee;for(Ce=0;Ce<41;Ce++)_e=(Oe=(V=O+(te=Ce/40)*Nt)+te*((ie=z+te*St)-V))+te*(ie+te*(Y+te*Te-ie)-Oe),Ue=(fe=(We=G+te*jt)+te*((J=U+te*Ve)-We))+te*(J+te*(ee+te*qe-J)-fe),Ce==0?(Ye=_e,At=Ue,yt=_e,bt=Ue):(Ye=Math.min(Ye,_e),At=Math.min(At,Ue),yt=Math.max(yt,_e),bt=Math.max(bt,Ue));return new l(Math.round(Ye),Math.round(At),Math.round(yt-Ye),Math.round(bt-At))},ke=function(){if(this.prevLineDash||this.ctx.lineDash.length||this.ctx.lineDashOffset){var O,G,z=(O=this.ctx.lineDash,G=this.ctx.lineDashOffset,JSON.stringify({lineDash:O,lineDashOffset:G}));this.prevLineDash!==z&&(this.pdf.setLineDash(this.ctx.lineDash,this.ctx.lineDashOffset),this.prevLineDash=z)}}})(rn.API),function(t){var e=function(o){var l,c,u,d,f,A,h,m,p,x;for(c=[],u=0,d=(o+=l="\0\0\0\0".slice(o.length%4||4)).length;d>u;u+=4)(f=(o.charCodeAt(u)<<24)+(o.charCodeAt(u+1)<<16)+(o.charCodeAt(u+2)<<8)+o.charCodeAt(u+3))!==0?(A=(f=((f=((f=((f=(f-(x=f%85))/85)-(p=f%85))/85)-(m=f%85))/85)-(h=f%85))/85)%85,c.push(A+33,h+33,m+33,p+33,x+33)):c.push(122);return function(v,y){for(var b=y;b>0;b--)v.pop()}(c,l.length),String.fromCharCode.apply(String,c)+"~>"},r=function(o){var l,c,u,d,f,A=String,h="length",m=255,p="charCodeAt",x="slice",v="replace";for(o[x](-2),o=o[x](0,-2)[v](/\s/g,"")[v]("z","!!!!!"),u=[],d=0,f=(o+=l="uuuuu"[x](o[h]%5||5))[h];f>d;d+=5)c=52200625*(o[p](d)-33)+614125*(o[p](d+1)-33)+7225*(o[p](d+2)-33)+85*(o[p](d+3)-33)+(o[p](d+4)-33),u.push(m&c>>24,m&c>>16,m&c>>8,m&c);return function(y,b){for(var w=b;w>0;w--)y.pop()}(u,l[h]),A.fromCharCode.apply(A,u)},n=function(o){return o.split("").map(function(l){return("0"+l.charCodeAt().toString(16)).slice(-2)}).join("")+">"},a=function(o){var l=new RegExp(/^([0-9A-Fa-f]{2})+$/);if((o=o.replace(/\s/g,"")).indexOf(">")!==-1&&(o=o.substr(0,o.indexOf(">"))),o.length%2&&(o+="0"),l.test(o)===!1)return"";for(var c="",u=0;u<o.length;u+=2)c+=String.fromCharCode("0x"+(o[u]+o[u+1]));return c},s=function(o){for(var l=new Uint8Array(o.length),c=o.length;c--;)l[c]=o.charCodeAt(c);return(l=Dk(l)).reduce(function(u,d){return u+String.fromCharCode(d)},"")};t.processDataByFilters=function(o,l){var c=0,u=o||"",d=[];for(typeof(l=l||[])=="string"&&(l=[l]),c=0;c<l.length;c+=1)switch(l[c]){case"ASCII85Decode":case"/ASCII85Decode":u=r(u),d.push("/ASCII85Encode");break;case"ASCII85Encode":case"/ASCII85Encode":u=e(u),d.push("/ASCII85Decode");break;case"ASCIIHexDecode":case"/ASCIIHexDecode":u=a(u),d.push("/ASCIIHexEncode");break;case"ASCIIHexEncode":case"/ASCIIHexEncode":u=n(u),d.push("/ASCIIHexDecode");break;case"FlateEncode":case"/FlateEncode":u=s(u),d.push("/FlateDecode");break;default:throw new Error('The filter: "'+l[c]+'" is not implemented')}return{data:u,reverseChain:d.reverse().join(" ")}}}(rn.API),function(t){t.loadFile=function(e,r,n){return function(a,s,o){s=s!==!1,o=typeof o=="function"?o:function(){};var l=void 0;try{l=function(c,u,d){var f=new XMLHttpRequest,A=0,h=function(m){var p=m.length,x=[],v=String.fromCharCode;for(A=0;A<p;A+=1)x.push(v(255&m.charCodeAt(A)));return x.join("")};if(f.open("GET",c,!u),f.overrideMimeType("text/plain; charset=x-user-defined"),u===!1&&(f.onload=function(){f.status===200?d(h(this.responseText)):d(void 0)}),f.send(null),u&&f.status===200)return h(f.responseText)}(a,s,o)}catch{}return l}(e,r,n)},t.loadImageFile=t.loadFile}(rn.API),function(t){function e(){return(Mn.html2canvas?Promise.resolve(Mn.html2canvas):sA(()=>Promise.resolve().then(()=>Q6),[])).catch(function(l){return Promise.reject(new Error("Could not load html2canvas: "+l))}).then(function(l){return l.default?l.default:l})}function r(){return(Mn.DOMPurify?Promise.resolve(Mn.DOMPurify):sA(()=>import("./purify.es-CQJ0hv7W.js"),[])).catch(function(l){return Promise.reject(new Error("Could not load dompurify: "+l))}).then(function(l){return l.default?l.default:l})}var n=function(l){var c=Za(l);return c==="undefined"?"undefined":c==="string"||l instanceof String?"string":c==="number"||l instanceof Number?"number":c==="function"||l instanceof Function?"function":l&&l.constructor===Array?"array":l&&l.nodeType===1?"element":c==="object"?"object":"unknown"},a=function(l,c){var u=document.createElement(l);for(var d in c.className&&(u.className=c.className),c.innerHTML&&c.dompurify&&(u.innerHTML=c.dompurify.sanitize(c.innerHTML)),c.style)u.style[d]=c.style[d];return u},s=function l(c,u){for(var d=c.nodeType===3?document.createTextNode(c.nodeValue):c.cloneNode(!1),f=c.firstChild;f;f=f.nextSibling)u!==!0&&f.nodeType===1&&f.nodeName==="SCRIPT"||d.appendChild(l(f,u));return c.nodeType===1&&(c.nodeName==="CANVAS"?(d.width=c.width,d.height=c.height,d.getContext("2d").drawImage(c,0,0)):c.nodeName!=="TEXTAREA"&&c.nodeName!=="SELECT"||(d.value=c.value),d.addEventListener("load",function(){d.scrollTop=c.scrollTop,d.scrollLeft=c.scrollLeft},!0)),d},o=function l(c){var u=Object.assign(l.convert(Promise.resolve()),JSON.parse(JSON.stringify(l.template))),d=l.convert(Promise.resolve(),u);return(d=d.setProgress(1,l,1,[l])).set(c)};(o.prototype=Object.create(Promise.prototype)).constructor=o,o.convert=function(l,c){return l.__proto__=c||o.prototype,l},o.template={prop:{src:null,container:null,overlay:null,canvas:null,img:null,pdf:null,pageSize:null,callback:function(){}},progress:{val:0,state:null,n:0,stack:[]},opt:{filename:"file.pdf",margin:[0,0,0,0],enableLinks:!0,x:0,y:0,html2canvas:{},jsPDF:{},backgroundColor:"transparent"}},o.prototype.from=function(l,c){return this.then(function(){switch(c=c||function(u){switch(n(u)){case"string":return"string";case"element":return u.nodeName.toLowerCase()==="canvas"?"canvas":"element";default:return"unknown"}}(l),c){case"string":return this.then(r).then(function(u){return this.set({src:a("div",{innerHTML:l,dompurify:u})})});case"element":return this.set({src:l});case"canvas":return this.set({canvas:l});case"img":return this.set({img:l});default:return this.error("Unknown source type.")}})},o.prototype.to=function(l){switch(l){case"container":return this.toContainer();case"canvas":return this.toCanvas();case"img":return this.toImg();case"pdf":return this.toPdf();default:return this.error("Invalid target.")}},o.prototype.toContainer=function(){return this.thenList([function(){return this.prop.src||this.error("Cannot duplicate - no source HTML.")},function(){return this.prop.pageSize||this.setPageSize()}]).then(function(){var l={position:"relative",display:"inline-block",width:(typeof this.opt.width!="number"||isNaN(this.opt.width)||typeof this.opt.windowWidth!="number"||isNaN(this.opt.windowWidth)?Math.max(this.prop.src.clientWidth,this.prop.src.scrollWidth,this.prop.src.offsetWidth):this.opt.windowWidth)+"px",left:0,right:0,top:0,margin:"auto",backgroundColor:this.opt.backgroundColor},c=s(this.prop.src,this.opt.html2canvas.javascriptEnabled);c.tagName==="BODY"&&(l.height=Math.max(document.body.scrollHeight,document.body.offsetHeight,document.documentElement.clientHeight,document.documentElement.scrollHeight,document.documentElement.offsetHeight)+"px"),this.prop.overlay=a("div",{className:"html2pdf__overlay",style:{position:"fixed",overflow:"hidden",zIndex:1e3,left:"-100000px",right:0,bottom:0,top:0}}),this.prop.container=a("div",{className:"html2pdf__container",style:l}),this.prop.container.appendChild(c),this.prop.container.firstChild.appendChild(a("div",{style:{clear:"both",border:"0 none transparent",margin:0,padding:0,height:0}})),this.prop.container.style.float="none",this.prop.overlay.appendChild(this.prop.container),document.body.appendChild(this.prop.overlay),this.prop.container.firstChild.style.position="relative",this.prop.container.height=Math.max(this.prop.container.firstChild.clientHeight,this.prop.container.firstChild.scrollHeight,this.prop.container.firstChild.offsetHeight)+"px"})},o.prototype.toCanvas=function(){var l=[function(){return document.body.contains(this.prop.container)||this.toContainer()}];return this.thenList(l).then(e).then(function(c){var u=Object.assign({},this.opt.html2canvas);return delete u.onrendered,c(this.prop.container,u)}).then(function(c){(this.opt.html2canvas.onrendered||function(){})(c),this.prop.canvas=c,document.body.removeChild(this.prop.overlay)})},o.prototype.toContext2d=function(){var l=[function(){return document.body.contains(this.prop.container)||this.toContainer()}];return this.thenList(l).then(e).then(function(c){var u=this.opt.jsPDF,d=this.opt.fontFaces,f=typeof this.opt.width!="number"||isNaN(this.opt.width)||typeof this.opt.windowWidth!="number"||isNaN(this.opt.windowWidth)?1:this.opt.width/this.opt.windowWidth,A=Object.assign({async:!0,allowTaint:!0,scale:f,scrollX:this.opt.scrollX||0,scrollY:this.opt.scrollY||0,backgroundColor:"#ffffff",imageTimeout:15e3,logging:!0,proxy:null,removeContainer:!0,foreignObjectRendering:!1,useCORS:!1},this.opt.html2canvas);if(delete A.onrendered,u.context2d.autoPaging=this.opt.autoPaging===void 0||this.opt.autoPaging,u.context2d.posX=this.opt.x,u.context2d.posY=this.opt.y,u.context2d.margin=this.opt.margin,u.context2d.fontFaces=d,d)for(var h=0;h<d.length;++h){var m=d[h],p=m.src.find(function(x){return x.format==="truetype"});p&&u.addFont(p.url,m.ref.name,m.ref.style)}return A.windowHeight=A.windowHeight||0,A.windowHeight=A.windowHeight==0?Math.max(this.prop.container.clientHeight,this.prop.container.scrollHeight,this.prop.container.offsetHeight):A.windowHeight,u.context2d.save(!0),c(this.prop.container,A)}).then(function(c){this.opt.jsPDF.context2d.restore(!0),(this.opt.html2canvas.onrendered||function(){})(c),this.prop.canvas=c,document.body.removeChild(this.prop.overlay)})},o.prototype.toImg=function(){return this.thenList([function(){return this.prop.canvas||this.toCanvas()}]).then(function(){var l=this.prop.canvas.toDataURL("image/"+this.opt.image.type,this.opt.image.quality);this.prop.img=document.createElement("img"),this.prop.img.src=l})},o.prototype.toPdf=function(){return this.thenList([function(){return this.toContext2d()}]).then(function(){this.prop.pdf=this.prop.pdf||this.opt.jsPDF})},o.prototype.output=function(l,c,u){return(u=u||"pdf").toLowerCase()==="img"||u.toLowerCase()==="image"?this.outputImg(l,c):this.outputPdf(l,c)},o.prototype.outputPdf=function(l,c){return this.thenList([function(){return this.prop.pdf||this.toPdf()}]).then(function(){return this.prop.pdf.output(l,c)})},o.prototype.outputImg=function(l){return this.thenList([function(){return this.prop.img||this.toImg()}]).then(function(){switch(l){case void 0:case"img":return this.prop.img;case"datauristring":case"dataurlstring":return this.prop.img.src;case"datauri":case"dataurl":return document.location.href=this.prop.img.src;default:throw'Image output type "'+l+'" is not supported.'}})},o.prototype.save=function(l){return this.thenList([function(){return this.prop.pdf||this.toPdf()}]).set(l?{filename:l}:null).then(function(){this.prop.pdf.save(this.opt.filename)})},o.prototype.doCallback=function(){return this.thenList([function(){return this.prop.pdf||this.toPdf()}]).then(function(){this.prop.callback(this.prop.pdf)})},o.prototype.set=function(l){if(n(l)!=="object")return this;var c=Object.keys(l||{}).map(function(u){if(u in o.template.prop)return function(){this.prop[u]=l[u]};switch(u){case"margin":return this.setMargin.bind(this,l.margin);case"jsPDF":return function(){return this.opt.jsPDF=l.jsPDF,this.setPageSize()};case"pageSize":return this.setPageSize.bind(this,l.pageSize);default:return function(){this.opt[u]=l[u]}}},this);return this.then(function(){return this.thenList(c)})},o.prototype.get=function(l,c){return this.then(function(){var u=l in o.template.prop?this.prop[l]:this.opt[l];return c?c(u):u})},o.prototype.setMargin=function(l){return this.then(function(){switch(n(l)){case"number":l=[l,l,l,l];case"array":if(l.length===2&&(l=[l[0],l[1],l[0],l[1]]),l.length===4)break;default:return this.error("Invalid margin array.")}this.opt.margin=l}).then(this.setPageSize)},o.prototype.setPageSize=function(l){function c(u,d){return Math.floor(u*d/72*96)}return this.then(function(){(l=l||rn.getPageSize(this.opt.jsPDF)).hasOwnProperty("inner")||(l.inner={width:l.width-this.opt.margin[1]-this.opt.margin[3],height:l.height-this.opt.margin[0]-this.opt.margin[2]},l.inner.px={width:c(l.inner.width,l.k),height:c(l.inner.height,l.k)},l.inner.ratio=l.inner.height/l.inner.width),this.prop.pageSize=l})},o.prototype.setProgress=function(l,c,u,d){return l!=null&&(this.progress.val=l),c!=null&&(this.progress.state=c),u!=null&&(this.progress.n=u),d!=null&&(this.progress.stack=d),this.progress.ratio=this.progress.val/this.progress.state,this},o.prototype.updateProgress=function(l,c,u,d){return this.setProgress(l?this.progress.val+l:null,c||null,u?this.progress.n+u:null,d?this.progress.stack.concat(d):null)},o.prototype.then=function(l,c){var u=this;return this.thenCore(l,c,function(d,f){return u.updateProgress(null,null,1,[d]),Promise.prototype.then.call(this,function(A){return u.updateProgress(null,d),A}).then(d,f).then(function(A){return u.updateProgress(1),A})})},o.prototype.thenCore=function(l,c,u){u=u||Promise.prototype.then;var d=this;l&&(l=l.bind(d)),c&&(c=c.bind(d));var f=Promise.toString().indexOf("[native code]")!==-1&&Promise.name==="Promise"?d:o.convert(Object.assign({},d),Promise.prototype),A=u.call(f,l,c);return o.convert(A,d.__proto__)},o.prototype.thenExternal=function(l,c){return Promise.prototype.then.call(this,l,c)},o.prototype.thenList=function(l){var c=this;return l.forEach(function(u){c=c.thenCore(u)}),c},o.prototype.catch=function(l){l&&(l=l.bind(this));var c=Promise.prototype.catch.call(this,l);return o.convert(c,this)},o.prototype.catchExternal=function(l){return Promise.prototype.catch.call(this,l)},o.prototype.error=function(l){return this.then(function(){throw new Error(l)})},o.prototype.using=o.prototype.set,o.prototype.saveAs=o.prototype.save,o.prototype.export=o.prototype.output,o.prototype.run=o.prototype.then,rn.getPageSize=function(l,c,u){if(Za(l)==="object"){var d=l;l=d.orientation,c=d.unit||c,u=d.format||u}c=c||"mm",u=u||"a4",l=(""+(l||"P")).toLowerCase();var f,A=(""+u).toLowerCase(),h={a0:[2383.94,3370.39],a1:[1683.78,2383.94],a2:[1190.55,1683.78],a3:[841.89,1190.55],a4:[595.28,841.89],a5:[419.53,595.28],a6:[297.64,419.53],a7:[209.76,297.64],a8:[147.4,209.76],a9:[104.88,147.4],a10:[73.7,104.88],b0:[2834.65,4008.19],b1:[2004.09,2834.65],b2:[1417.32,2004.09],b3:[1000.63,1417.32],b4:[708.66,1000.63],b5:[498.9,708.66],b6:[354.33,498.9],b7:[249.45,354.33],b8:[175.75,249.45],b9:[124.72,175.75],b10:[87.87,124.72],c0:[2599.37,3676.54],c1:[1836.85,2599.37],c2:[1298.27,1836.85],c3:[918.43,1298.27],c4:[649.13,918.43],c5:[459.21,649.13],c6:[323.15,459.21],c7:[229.61,323.15],c8:[161.57,229.61],c9:[113.39,161.57],c10:[79.37,113.39],dl:[311.81,623.62],letter:[612,792],"government-letter":[576,756],legal:[612,1008],"junior-legal":[576,360],ledger:[1224,792],tabloid:[792,1224],"credit-card":[153,243]};switch(c){case"pt":f=1;break;case"mm":f=72/25.4;break;case"cm":f=72/2.54;break;case"in":f=72;break;case"px":f=.75;break;case"pc":case"em":f=12;break;case"ex":f=6;break;default:throw"Invalid unit: "+c}var m,p=0,x=0;if(h.hasOwnProperty(A))p=h[A][1]/f,x=h[A][0]/f;else try{p=u[1],x=u[0]}catch{throw new Error("Invalid format: "+u)}if(l==="p"||l==="portrait")l="p",x>p&&(m=x,x=p,p=m);else{if(l!=="l"&&l!=="landscape")throw"Invalid orientation: "+l;l="l",p>x&&(m=x,x=p,p=m)}return{width:x,height:p,unit:c,k:f,orientation:l}},t.html=function(l,c){(c=c||{}).callback=c.callback||function(){},c.html2canvas=c.html2canvas||{},c.html2canvas.canvas=c.html2canvas.canvas||this.canvas,c.jsPDF=c.jsPDF||this,c.fontFaces=c.fontFaces?c.fontFaces.map(A5):null;var u=new o(c);return c.worker?u:u.from(l).doCallback()}}(rn.API),rn.API.addJS=function(t){return BV=t,this.internal.events.subscribe("postPutResources",function(){DC=this.internal.newObject(),this.internal.out("<<"),this.internal.out("/Names [(EmbeddedJS) "+(DC+1)+" 0 R]"),this.internal.out(">>"),this.internal.out("endobj"),PV=this.internal.newObject(),this.internal.out("<<"),this.internal.out("/S /JavaScript"),this.internal.out("/JS ("+BV+")"),this.internal.out(">>"),this.internal.out("endobj")}),this.internal.events.subscribe("putCatalog",function(){DC!==void 0&&PV!==void 0&&this.internal.out("/Names <</JavaScript "+DC+" 0 R>>")}),this},function(t){var e;t.events.push(["postPutResources",function(){var r=this,n=/^(\d+) 0 obj$/;if(this.outline.root.children.length>0)for(var a=r.outline.render().split(/\r\n/),s=0;s<a.length;s++){var o=a[s],l=n.exec(o);if(l!=null){var c=l[1];r.internal.newObjectDeferredBegin(c,!1)}r.internal.write(o)}if(this.outline.createNamedDestinations){var u=this.internal.pages.length,d=[];for(s=0;s<u;s++){var f=r.internal.newObject();d.push(f);var A=r.internal.getPageInfo(s+1);r.internal.write("<< /D["+A.objId+" 0 R /XYZ null null null]>> endobj")}var h=r.internal.newObject();for(r.internal.write("<< /Names [ "),s=0;s<d.length;s++)r.internal.write("(page_"+(s+1)+")"+d[s]+" 0 R");r.internal.write(" ] >>","endobj"),e=r.internal.newObject(),r.internal.write("<< /Dests "+h+" 0 R"),r.internal.write(">>","endobj")}}]),t.events.push(["putCatalog",function(){var r=this;r.outline.root.children.length>0&&(r.internal.write("/Outlines",this.outline.makeRef(this.outline.root)),this.outline.createNamedDestinations&&r.internal.write("/Names "+e+" 0 R"))}]),t.events.push(["initialized",function(){var r=this;r.outline={createNamedDestinations:!1,root:{children:[]}},r.outline.add=function(n,a,s){var o={title:a,options:s,children:[]};return n==null&&(n=this.root),n.children.push(o),o},r.outline.render=function(){return this.ctx={},this.ctx.val="",this.ctx.pdf=r,this.genIds_r(this.root),this.renderRoot(this.root),this.renderItems(this.root),this.ctx.val},r.outline.genIds_r=function(n){n.id=r.internal.newObjectDeferred();for(var a=0;a<n.children.length;a++)this.genIds_r(n.children[a])},r.outline.renderRoot=function(n){this.objStart(n),this.line("/Type /Outlines"),n.children.length>0&&(this.line("/First "+this.makeRef(n.children[0])),this.line("/Last "+this.makeRef(n.children[n.children.length-1]))),this.line("/Count "+this.count_r({count:0},n)),this.objEnd()},r.outline.renderItems=function(n){for(var a=this.ctx.pdf.internal.getVerticalCoordinateString,s=0;s<n.children.length;s++){var o=n.children[s];this.objStart(o),this.line("/Title "+this.makeString(o.title)),this.line("/Parent "+this.makeRef(n)),s>0&&this.line("/Prev "+this.makeRef(n.children[s-1])),s<n.children.length-1&&this.line("/Next "+this.makeRef(n.children[s+1])),o.children.length>0&&(this.line("/First "+this.makeRef(o.children[0])),this.line("/Last "+this.makeRef(o.children[o.children.length-1])));var l=this.count=this.count_r({count:0},o);if(l>0&&this.line("/Count "+l),o.options&&o.options.pageNumber){var c=r.internal.getPageInfo(o.options.pageNumber);this.line("/Dest ["+c.objId+" 0 R /XYZ 0 "+a(0)+" 0]")}this.objEnd()}for(var u=0;u<n.children.length;u++)this.renderItems(n.children[u])},r.outline.line=function(n){this.ctx.val+=n+`\r
`},r.outline.makeRef=function(n){return n.id+" 0 R"},r.outline.makeString=function(n){return"("+r.internal.pdfEscape(n)+")"},r.outline.objStart=function(n){this.ctx.val+=`\r
`+n.id+` 0 obj\r
<<\r
`},r.outline.objEnd=function(){this.ctx.val+=`>> \r
endobj\r
`},r.outline.count_r=function(n,a){for(var s=0;s<a.children.length;s++)n.count++,this.count_r(n,a.children[s]);return n.count}}])}(rn.API),function(t){var e=[192,193,194,195,196,197,198,199];t.processJPEG=function(r,n,a,s,o,l){var c,u=this.decode.DCT_DECODE,d=null;if(typeof r=="string"||this.__addimage__.isArrayBuffer(r)||this.__addimage__.isArrayBufferView(r)){switch(r=o||r,r=this.__addimage__.isArrayBuffer(r)?new Uint8Array(r):r,c=function(f){for(var A,h=256*f.charCodeAt(4)+f.charCodeAt(5),m=f.length,p={width:0,height:0,numcomponents:1},x=4;x<m;x+=2){if(x+=h,e.indexOf(f.charCodeAt(x+1))!==-1){A=256*f.charCodeAt(x+5)+f.charCodeAt(x+6),p={width:256*f.charCodeAt(x+7)+f.charCodeAt(x+8),height:A,numcomponents:f.charCodeAt(x+9)};break}h=256*f.charCodeAt(x+2)+f.charCodeAt(x+3)}return p}(r=this.__addimage__.isArrayBufferView(r)?this.__addimage__.arrayBufferToBinaryString(r):r),c.numcomponents){case 1:l=this.color_spaces.DEVICE_GRAY;break;case 4:l=this.color_spaces.DEVICE_CMYK;break;case 3:l=this.color_spaces.DEVICE_RGB}d={data:r,width:c.width,height:c.height,colorSpace:l,bitsPerComponent:8,filter:u,index:n,alias:a}}return d}}(rn.API),rn.API.processPNG=function(t,e,r,n){if(this.__addimage__.isArrayBuffer(t)&&(t=new Uint8Array(t)),this.__addimage__.isArrayBufferView(t)){var a,s=Fje(t,{checkCrc:!0}),o=s.width,l=s.height,c=s.channels,u=s.palette,d=s.depth;a=u&&c===1?function(S){for(var E=S.width,T=S.height,k=S.data,B=S.palette,D=S.depth,X=!1,me=[],pe=[],he=void 0,ve=!1,ae=0,Pe=0;Pe<B.length;Pe++){var ke=OQ(B[Pe],4),O=ke[0],G=ke[1],z=ke[2],U=ke[3];me.push(O,G,z),U!=null&&(U===0?(ae++,pe.length<1&&pe.push(Pe)):U<255&&(ve=!0))}if(ve||ae>1){X=!0,pe=void 0;var Y=E*T;he=new Uint8Array(Y);for(var ee=new DataView(k.buffer),M=0;M<Y;M++){var H=p5(ee,M,D),te=OQ(B[H],4)[3];he[M]=te}}else ae===0&&(pe=void 0);return{colorSpace:"Indexed",colorsPerPixel:1,sMaskBitsPerComponent:X?8:void 0,colorBytes:k,alphaBytes:he,needSMask:X,palette:me,mask:pe}}(s):c===2||c===4?function(S){for(var E=S.data,T=S.width,k=S.height,B=S.channels,D=S.depth,X=B===2?"DeviceGray":"DeviceRGB",me=B-1,pe=T*k,he=me,ve=pe*he,ae=1*pe,Pe=Math.ceil(ve*D/8),ke=Math.ceil(ae*D/8),O=new Uint8Array(Pe),G=new Uint8Array(ke),z=new DataView(E.buffer),U=new DataView(O.buffer),Y=new DataView(G.buffer),ee=!1,M=0;M<pe;M++){for(var H=M*B,te=0;te<he;te++)UV(U,p5(z,H+te,D),M*he+te,D);var Ce=p5(z,H+he,D);Ce<(1<<D)-1&&(ee=!0),UV(Y,Ce,1*M,D)}return{colorSpace:X,colorsPerPixel:me,sMaskBitsPerComponent:ee?D:void 0,colorBytes:O,alphaBytes:G,needSMask:ee}}(s):function(S){var E=S.data,T=S.channels===1?"DeviceGray":"DeviceRGB";return{colorSpace:T,colorsPerPixel:T==="DeviceGray"?1:3,colorBytes:E instanceof Uint16Array?function(k){for(var B=k.length,D=new Uint8Array(2*B),X=new DataView(D.buffer,D.byteOffset,D.byteLength),me=0;me<B;me++)X.setUint16(2*me,k[me],!1);return D}(E):E,needSMask:!1}}(s);var f,A,h,m=a,p=m.colorSpace,x=m.colorsPerPixel,v=m.sMaskBitsPerComponent,y=m.colorBytes,b=m.alphaBytes,w=m.needSMask,j=m.palette,I=m.mask,_=null;return n!==rn.API.image_compression.NONE&&typeof Dk=="function"?(_=function(S){var E;switch(S){case rn.API.image_compression.FAST:E=11;break;case rn.API.image_compression.MEDIUM:E=13;break;case rn.API.image_compression.SLOW:E=14;break;default:E=12}return E}(n),f=this.decode.FLATE_DECODE,A="/Predictor ".concat(_," /Colors ").concat(x," /BitsPerComponent ").concat(d," /Columns ").concat(o),t=OV(y,Math.ceil(o*x*d/8),x,d,n),w&&(h=OV(b,Math.ceil(o*v/8),1,v,n))):(f=void 0,A=void 0,t=y,w&&(h=b)),(this.__addimage__.isArrayBuffer(t)||this.__addimage__.isArrayBufferView(t))&&(t=this.__addimage__.arrayBufferToBinaryString(t)),(h&&this.__addimage__.isArrayBuffer(h)||this.__addimage__.isArrayBufferView(h))&&(h=this.__addimage__.arrayBufferToBinaryString(h)),{alias:r,data:t,index:e,filter:f,decodeParameters:A,transparency:I,palette:j,sMask:h,predictor:_,width:o,height:l,bitsPerComponent:d,sMaskBitsPerComponent:v,colorSpace:p}}},function(t){t.processGIF89A=function(e,r,n,a){var s=new rPe(e),o=s.width,l=s.height,c=[];s.decodeAndBlitFrameRGBA(0,c);var u={data:c,width:o,height:l},d=new g5(100).encode(u,100);return t.processJPEG.call(this,d,r,n,a)},t.processGIF87A=t.processGIF89A}(rn.API),Wd.prototype.parseHeader=function(){if(this.fileSize=this.datav.getUint32(this.pos,!0),this.pos+=4,this.reserved=this.datav.getUint32(this.pos,!0),this.pos+=4,this.offset=this.datav.getUint32(this.pos,!0),this.pos+=4,this.headerSize=this.datav.getUint32(this.pos,!0),this.pos+=4,this.width=this.datav.getUint32(this.pos,!0),this.pos+=4,this.height=this.datav.getInt32(this.pos,!0),this.pos+=4,this.planes=this.datav.getUint16(this.pos,!0),this.pos+=2,this.bitPP=this.datav.getUint16(this.pos,!0),this.pos+=2,this.compress=this.datav.getUint32(this.pos,!0),this.pos+=4,this.rawSize=this.datav.getUint32(this.pos,!0),this.pos+=4,this.hr=this.datav.getUint32(this.pos,!0),this.pos+=4,this.vr=this.datav.getUint32(this.pos,!0),this.pos+=4,this.colors=this.datav.getUint32(this.pos,!0),this.pos+=4,this.importantColors=this.datav.getUint32(this.pos,!0),this.pos+=4,this.bitPP===16&&this.is_with_alpha&&(this.bitPP=15),this.bitPP<15){var t=this.colors===0?1<<this.bitPP:this.colors;this.palette=new Array(t);for(var e=0;e<t;e++){var r=this.datav.getUint8(this.pos++,!0),n=this.datav.getUint8(this.pos++,!0),a=this.datav.getUint8(this.pos++,!0),s=this.datav.getUint8(this.pos++,!0);this.palette[e]={red:a,green:n,blue:r,quad:s}}}this.height<0&&(this.height*=-1,this.bottom_up=!1)},Wd.prototype.parseBGR=function(){this.pos=this.offset;try{var t="bit"+this.bitPP,e=this.width*this.height*4;this.data=new Uint8Array(e),this[t]()}catch(r){hs.log("bit decode error:"+r)}},Wd.prototype.bit1=function(){var t,e=Math.ceil(this.width/8),r=e%4;for(t=this.height-1;t>=0;t--){for(var n=this.bottom_up?t:this.height-1-t,a=0;a<e;a++)for(var s=this.datav.getUint8(this.pos++,!0),o=n*this.width*4+8*a*4,l=0;l<8&&8*a+l<this.width;l++){var c=this.palette[s>>7-l&1];this.data[o+4*l]=c.blue,this.data[o+4*l+1]=c.green,this.data[o+4*l+2]=c.red,this.data[o+4*l+3]=255}r!==0&&(this.pos+=4-r)}},Wd.prototype.bit4=function(){for(var t=Math.ceil(this.width/2),e=t%4,r=this.height-1;r>=0;r--){for(var n=this.bottom_up?r:this.height-1-r,a=0;a<t;a++){var s=this.datav.getUint8(this.pos++,!0),o=n*this.width*4+2*a*4,l=s>>4,c=15&s,u=this.palette[l];if(this.data[o]=u.blue,this.data[o+1]=u.green,this.data[o+2]=u.red,this.data[o+3]=255,2*a+1>=this.width)break;u=this.palette[c],this.data[o+4]=u.blue,this.data[o+4+1]=u.green,this.data[o+4+2]=u.red,this.data[o+4+3]=255}e!==0&&(this.pos+=4-e)}},Wd.prototype.bit8=function(){for(var t=this.width%4,e=this.height-1;e>=0;e--){for(var r=this.bottom_up?e:this.height-1-e,n=0;n<this.width;n++){var a=this.datav.getUint8(this.pos++,!0),s=r*this.width*4+4*n;if(a<this.palette.length){var o=this.palette[a];this.data[s]=o.red,this.data[s+1]=o.green,this.data[s+2]=o.blue,this.data[s+3]=255}else this.data[s]=255,this.data[s+1]=255,this.data[s+2]=255,this.data[s+3]=255}t!==0&&(this.pos+=4-t)}},Wd.prototype.bit15=function(){for(var t=this.width%3,e=parseInt("11111",2),r=this.height-1;r>=0;r--){for(var n=this.bottom_up?r:this.height-1-r,a=0;a<this.width;a++){var s=this.datav.getUint16(this.pos,!0);this.pos+=2;var o=(s&e)/e*255|0,l=(s>>5&e)/e*255|0,c=(s>>10&e)/e*255|0,u=s>>15?255:0,d=n*this.width*4+4*a;this.data[d]=c,this.data[d+1]=l,this.data[d+2]=o,this.data[d+3]=u}this.pos+=t}},Wd.prototype.bit16=function(){for(var t=this.width%3,e=parseInt("11111",2),r=parseInt("111111",2),n=this.height-1;n>=0;n--){for(var a=this.bottom_up?n:this.height-1-n,s=0;s<this.width;s++){var o=this.datav.getUint16(this.pos,!0);this.pos+=2;var l=(o&e)/e*255|0,c=(o>>5&r)/r*255|0,u=(o>>11)/e*255|0,d=a*this.width*4+4*s;this.data[d]=u,this.data[d+1]=c,this.data[d+2]=l,this.data[d+3]=255}this.pos+=t}},Wd.prototype.bit24=function(){for(var t=this.height-1;t>=0;t--){for(var e=this.bottom_up?t:this.height-1-t,r=0;r<this.width;r++){var n=this.datav.getUint8(this.pos++,!0),a=this.datav.getUint8(this.pos++,!0),s=this.datav.getUint8(this.pos++,!0),o=e*this.width*4+4*r;this.data[o]=s,this.data[o+1]=a,this.data[o+2]=n,this.data[o+3]=255}this.pos+=this.width%4}},Wd.prototype.bit32=function(){for(var t=this.height-1;t>=0;t--)for(var e=this.bottom_up?t:this.height-1-t,r=0;r<this.width;r++){var n=this.datav.getUint8(this.pos++,!0),a=this.datav.getUint8(this.pos++,!0),s=this.datav.getUint8(this.pos++,!0),o=this.datav.getUint8(this.pos++,!0),l=e*this.width*4+4*r;this.data[l]=s,this.data[l+1]=a,this.data[l+2]=n,this.data[l+3]=o}},Wd.prototype.getData=function(){return this.data},function(t){t.processBMP=function(e,r,n,a){var s=new Wd(e,!1),o=s.width,l=s.height,c={data:s.getData(),width:o,height:l},u=new g5(100).encode(c,100);return t.processJPEG.call(this,u,r,n,a)}}(rn.API),VV.prototype.getData=function(){return this.data},function(t){t.processWEBP=function(e,r,n,a){var s=new VV(e),o=s.width,l=s.height,c={data:s.getData(),width:o,height:l},u=new g5(100).encode(c,100);return t.processJPEG.call(this,u,r,n,a)}}(rn.API),rn.API.processRGBA=function(t,e,r){for(var n=t.data,a=n.length,s=new Uint8Array(a/4*3),o=new Uint8Array(a/4),l=0,c=0,u=0;u<a;u+=4){var d=n[u],f=n[u+1],A=n[u+2],h=n[u+3];s[l++]=d,s[l++]=f,s[l++]=A,o[c++]=h}var m=this.__addimage__.arrayBufferToBinaryString(s);return{alpha:this.__addimage__.arrayBufferToBinaryString(o),data:m,index:e,alias:r,colorSpace:"DeviceRGB",bitsPerComponent:8,width:t.width,height:t.height}},rn.API.setLanguage=function(t){return this.internal.languageSettings===void 0&&(this.internal.languageSettings={},this.internal.languageSettings.isSubscribed=!1),{af:"Afrikaans",sq:"Albanian",ar:"Arabic (Standard)","ar-DZ":"Arabic (Algeria)","ar-BH":"Arabic (Bahrain)","ar-EG":"Arabic (Egypt)","ar-IQ":"Arabic (Iraq)","ar-JO":"Arabic (Jordan)","ar-KW":"Arabic (Kuwait)","ar-LB":"Arabic (Lebanon)","ar-LY":"Arabic (Libya)","ar-MA":"Arabic (Morocco)","ar-OM":"Arabic (Oman)","ar-QA":"Arabic (Qatar)","ar-SA":"Arabic (Saudi Arabia)","ar-SY":"Arabic (Syria)","ar-TN":"Arabic (Tunisia)","ar-AE":"Arabic (U.A.E.)","ar-YE":"Arabic (Yemen)",an:"Aragonese",hy:"Armenian",as:"Assamese",ast:"Asturian",az:"Azerbaijani",eu:"Basque",be:"Belarusian",bn:"Bengali",bs:"Bosnian",br:"Breton",bg:"Bulgarian",my:"Burmese",ca:"Catalan",ch:"Chamorro",ce:"Chechen",zh:"Chinese","zh-HK":"Chinese (Hong Kong)","zh-CN":"Chinese (PRC)","zh-SG":"Chinese (Singapore)","zh-TW":"Chinese (Taiwan)",cv:"Chuvash",co:"Corsican",cr:"Cree",hr:"Croatian",cs:"Czech",da:"Danish",nl:"Dutch (Standard)","nl-BE":"Dutch (Belgian)",en:"English","en-AU":"English (Australia)","en-BZ":"English (Belize)","en-CA":"English (Canada)","en-IE":"English (Ireland)","en-JM":"English (Jamaica)","en-NZ":"English (New Zealand)","en-PH":"English (Philippines)","en-ZA":"English (South Africa)","en-TT":"English (Trinidad & Tobago)","en-GB":"English (United Kingdom)","en-US":"English (United States)","en-ZW":"English (Zimbabwe)",eo:"Esperanto",et:"Estonian",fo:"Faeroese",fj:"Fijian",fi:"Finnish",fr:"French (Standard)","fr-BE":"French (Belgium)","fr-CA":"French (Canada)","fr-FR":"French (France)","fr-LU":"French (Luxembourg)","fr-MC":"French (Monaco)","fr-CH":"French (Switzerland)",fy:"Frisian",fur:"Friulian",gd:"Gaelic (Scots)","gd-IE":"Gaelic (Irish)",gl:"Galacian",ka:"Georgian",de:"German (Standard)","de-AT":"German (Austria)","de-DE":"German (Germany)","de-LI":"German (Liechtenstein)","de-LU":"German (Luxembourg)","de-CH":"German (Switzerland)",el:"Greek",gu:"Gujurati",ht:"Haitian",he:"Hebrew",hi:"Hindi",hu:"Hungarian",is:"Icelandic",id:"Indonesian",iu:"Inuktitut",ga:"Irish",it:"Italian (Standard)","it-CH":"Italian (Switzerland)",ja:"Japanese",kn:"Kannada",ks:"Kashmiri",kk:"Kazakh",km:"Khmer",ky:"Kirghiz",tlh:"Klingon",ko:"Korean","ko-KP":"Korean (North Korea)","ko-KR":"Korean (South Korea)",la:"Latin",lv:"Latvian",lt:"Lithuanian",lb:"Luxembourgish",mk:"North Macedonia",ms:"Malay",ml:"Malayalam",mt:"Maltese",mi:"Maori",mr:"Marathi",mo:"Moldavian",nv:"Navajo",ng:"Ndonga",ne:"Nepali",no:"Norwegian",nb:"Norwegian (Bokmal)",nn:"Norwegian (Nynorsk)",oc:"Occitan",or:"Oriya",om:"Oromo",fa:"Persian","fa-IR":"Persian/Iran",pl:"Polish",pt:"Portuguese","pt-BR":"Portuguese (Brazil)",pa:"Punjabi","pa-IN":"Punjabi (India)","pa-PK":"Punjabi (Pakistan)",qu:"Quechua",rm:"Rhaeto-Romanic",ro:"Romanian","ro-MO":"Romanian (Moldavia)",ru:"Russian","ru-MO":"Russian (Moldavia)",sz:"Sami (Lappish)",sg:"Sango",sa:"Sanskrit",sc:"Sardinian",sd:"Sindhi",si:"Singhalese",sr:"Serbian",sk:"Slovak",sl:"Slovenian",so:"Somani",sb:"Sorbian",es:"Spanish","es-AR":"Spanish (Argentina)","es-BO":"Spanish (Bolivia)","es-CL":"Spanish (Chile)","es-CO":"Spanish (Colombia)","es-CR":"Spanish (Costa Rica)","es-DO":"Spanish (Dominican Republic)","es-EC":"Spanish (Ecuador)","es-SV":"Spanish (El Salvador)","es-GT":"Spanish (Guatemala)","es-HN":"Spanish (Honduras)","es-MX":"Spanish (Mexico)","es-NI":"Spanish (Nicaragua)","es-PA":"Spanish (Panama)","es-PY":"Spanish (Paraguay)","es-PE":"Spanish (Peru)","es-PR":"Spanish (Puerto Rico)","es-ES":"Spanish (Spain)","es-UY":"Spanish (Uruguay)","es-VE":"Spanish (Venezuela)",sx:"Sutu",sw:"Swahili",sv:"Swedish","sv-FI":"Swedish (Finland)","sv-SV":"Swedish (Sweden)",ta:"Tamil",tt:"Tatar",te:"Teluga",th:"Thai",tig:"Tigre",ts:"Tsonga",tn:"Tswana",tr:"Turkish",tk:"Turkmen",uk:"Ukrainian",hsb:"Upper Sorbian",ur:"Urdu",ve:"Venda",vi:"Vietnamese",vo:"Volapuk",wa:"Walloon",cy:"Welsh",xh:"Xhosa",ji:"Yiddish",zu:"Zulu"}[t]!==void 0&&(this.internal.languageSettings.languageCode=t,this.internal.languageSettings.isSubscribed===!1&&(this.internal.events.subscribe("putCatalog",function(){this.internal.write("/Lang ("+this.internal.languageSettings.languageCode+")")}),this.internal.languageSettings.isSubscribed=!0)),this},ux=rn.API,RC=ux.getCharWidthsArray=function(t,e){var r,n,a=(e=e||{}).font||this.internal.getFont(),s=e.fontSize||this.internal.getFontSize(),o=e.charSpace||this.internal.getCharSpace(),l=e.widths?e.widths:a.metadata.Unicode.widths,c=l.fof?l.fof:1,u=e.kerning?e.kerning:a.metadata.Unicode.kerning,d=u.fof?u.fof:1,f=e.doKerning!==!1,A=0,h=t.length,m=0,p=l[0]||c,x=[];for(r=0;r<h;r++)n=t.charCodeAt(r),typeof a.metadata.widthOfString=="function"?x.push((a.metadata.widthOfGlyph(a.metadata.characterToGlyph(n))+o*(1e3/s)||0)/1e3):(A=f&&Za(u[n])==="object"&&!isNaN(parseInt(u[n][m],10))?u[n][m]/d:0,x.push((l[n]||p)/c+A)),m=n;return x},TV=ux.getStringUnitWidth=function(t,e){var r=(e=e||{}).fontSize||this.internal.getFontSize(),n=e.font||this.internal.getFont(),a=e.charSpace||this.internal.getCharSpace();return ux.processArabic&&(t=ux.processArabic(t)),typeof n.metadata.widthOfString=="function"?n.metadata.widthOfString(t,r,a)/r:RC.apply(this,arguments).reduce(function(s,o){return s+o},0)},kV=function(t,e,r,n){for(var a=[],s=0,o=t.length,l=0;s!==o&&l+e[s]<r;)l+=e[s],s++;a.push(t.slice(0,s));var c=s;for(l=0;s!==o;)l+e[s]>n&&(a.push(t.slice(c,s)),l=0,c=s),l+=e[s],s++;return c!==s&&a.push(t.slice(c,s)),a},FV=function(t,e,r){r||(r={});var n,a,s,o,l,c,u,d=[],f=[d],A=r.textIndent||0,h=0,m=0,p=t.split(" "),x=RC.apply(this,[" ",r])[0];if(c=r.lineIndent===-1?p[0].length+2:r.lineIndent||0){var v=Array(c).join(" "),y=[];p.map(function(w){(w=w.split(/\s*\n/)).length>1?y=y.concat(w.map(function(j,I){return(I&&j.length?`
`:"")+j})):y.push(w[0])}),p=y,c=TV.apply(this,[v,r])}for(s=0,o=p.length;s<o;s++){var b=0;if(n=p[s],c&&n[0]==`
`&&(n=n.substr(1),b=1),A+h+(m=(a=RC.apply(this,[n,r])).reduce(function(w,j){return w+j},0))>e||b){if(m>e){for(l=kV.apply(this,[n,a,e-(A+h),e]),d.push(l.shift()),d=[l.pop()];l.length;)f.push([l.shift()]);m=a.slice(n.length-(d[0]?d[0].length:0)).reduce(function(w,j){return w+j},0)}else d=[n];f.push(d),A=m+c,h=x}else d.push(n),A+=h+m,h=x}return u=c?function(w,j){return(j?v:"")+w.join(" ")}:function(w){return w.join(" ")},f.map(u)},ux.splitTextToSize=function(t,e,r){var n,a=(r=r||{}).fontSize||this.internal.getFontSize(),s=(function(d){if(d.widths&&d.kerning)return{widths:d.widths,kerning:d.kerning};var f=this.internal.getFont(d.fontName,d.fontStyle),A="Unicode";return f.metadata[A]?{widths:f.metadata[A].widths||{0:1},kerning:f.metadata[A].kerning||{}}:{font:f.metadata,fontSize:this.internal.getFontSize(),charSpace:this.internal.getCharSpace()}}).call(this,r);n=Array.isArray(t)?t:String(t).split(/\r?\n/);var o=1*this.internal.scaleFactor*e/a;s.textIndent=r.textIndent?1*r.textIndent*this.internal.scaleFactor/a:0,s.lineIndent=r.lineIndent;var l,c,u=[];for(l=0,c=n.length;l<c;l++)u=u.concat(FV.apply(this,[n[l],o,s]));return u},function(t){t.__fontmetrics__=t.__fontmetrics__||{};for(var e="0123456789abcdef",r="klmnopqrstuvwxyz",n={},a={},s=0;s<16;s++)n[r[s]]=e[s],a[e[s]]=r[s];var o=function(A){return"0x"+parseInt(A,10).toString(16)},l=t.__fontmetrics__.compress=function(A){var h,m,p,x,v=["{"];for(var y in A){if(h=A[y],isNaN(parseInt(y,10))?m="'"+y+"'":(y=parseInt(y,10),m=(m=o(y).slice(2)).slice(0,-1)+a[m.slice(-1)]),typeof h=="number")h<0?(p=o(h).slice(3),x="-"):(p=o(h).slice(2),x=""),p=x+p.slice(0,-1)+a[p.slice(-1)];else{if(Za(h)!=="object")throw new Error("Don't know what to do with value type "+Za(h)+".");p=l(h)}v.push(m+p)}return v.push("}"),v.join("")},c=t.__fontmetrics__.uncompress=function(A){if(typeof A!="string")throw new Error("Invalid argument passed to uncompress.");for(var h,m,p,x,v={},y=1,b=v,w=[],j="",I="",_=A.length-1,S=1;S<_;S+=1)(x=A[S])=="'"?h?(p=h.join(""),h=void 0):h=[]:h?h.push(x):x=="{"?(w.push([b,p]),b={},p=void 0):x=="}"?((m=w.pop())[0][m[1]]=b,p=void 0,b=m[0]):x=="-"?y=-1:p===void 0?n.hasOwnProperty(x)?(j+=n[x],p=parseInt(j,16)*y,y=1,j=""):j+=x:n.hasOwnProperty(x)?(I+=n[x],b[p]=parseInt(I,16)*y,y=1,p=void 0,I=""):I+=x;return v},u={codePages:["WinAnsiEncoding"],WinAnsiEncoding:c("{19m8n201n9q201o9r201s9l201t9m201u8m201w9n201x9o201y8o202k8q202l8r202m9p202q8p20aw8k203k8t203t8v203u9v2cq8s212m9t15m8w15n9w2dw9s16k8u16l9u17s9z17x8y17y9y}")},d={Unicode:{Courier:u,"Courier-Bold":u,"Courier-BoldOblique":u,"Courier-Oblique":u,Helvetica:u,"Helvetica-Bold":u,"Helvetica-BoldOblique":u,"Helvetica-Oblique":u,"Times-Roman":u,"Times-Bold":u,"Times-BoldItalic":u,"Times-Italic":u}},f={Unicode:{"Courier-Oblique":c("{'widths'{k3w'fof'6o}'kerning'{'fof'-6o}}"),"Times-BoldItalic":c("{'widths'{k3o2q4ycx2r201n3m201o6o201s2l201t2l201u2l201w3m201x3m201y3m2k1t2l2r202m2n2n3m2o3m2p5n202q6o2r1w2s2l2t2l2u3m2v3t2w1t2x2l2y1t2z1w3k3m3l3m3m3m3n3m3o3m3p3m3q3m3r3m3s3m203t2l203u2l3v2l3w3t3x3t3y3t3z3m4k5n4l4m4m4m4n4m4o4s4p4m4q4m4r4s4s4y4t2r4u3m4v4m4w3x4x5t4y4s4z4s5k3x5l4s5m4m5n3r5o3x5p4s5q4m5r5t5s4m5t3x5u3x5v2l5w1w5x2l5y3t5z3m6k2l6l3m6m3m6n2w6o3m6p2w6q2l6r3m6s3r6t1w6u1w6v3m6w1w6x4y6y3r6z3m7k3m7l3m7m2r7n2r7o1w7p3r7q2w7r4m7s3m7t2w7u2r7v2n7w1q7x2n7y3t202l3mcl4mal2ram3man3mao3map3mar3mas2lat4uau1uav3maw3way4uaz2lbk2sbl3t'fof'6obo2lbp3tbq3mbr1tbs2lbu1ybv3mbz3mck4m202k3mcm4mcn4mco4mcp4mcq5ycr4mcs4mct4mcu4mcv4mcw2r2m3rcy2rcz2rdl4sdm4sdn4sdo4sdp4sdq4sds4sdt4sdu4sdv4sdw4sdz3mek3mel3mem3men3meo3mep3meq4ser2wes2wet2weu2wev2wew1wex1wey1wez1wfl3rfm3mfn3mfo3mfp3mfq3mfr3tfs3mft3rfu3rfv3rfw3rfz2w203k6o212m6o2dw2l2cq2l3t3m3u2l17s3x19m3m}'kerning'{cl{4qu5kt5qt5rs17ss5ts}201s{201ss}201t{cks4lscmscnscoscpscls2wu2yu201ts}201x{2wu2yu}2k{201ts}2w{4qx5kx5ou5qx5rs17su5tu}2x{17su5tu5ou}2y{4qx5kx5ou5qx5rs17ss5ts}'fof'-6ofn{17sw5tw5ou5qw5rs}7t{cksclscmscnscoscps4ls}3u{17su5tu5os5qs}3v{17su5tu5os5qs}7p{17su5tu}ck{4qu5kt5qt5rs17ss5ts}4l{4qu5kt5qt5rs17ss5ts}cm{4qu5kt5qt5rs17ss5ts}cn{4qu5kt5qt5rs17ss5ts}co{4qu5kt5qt5rs17ss5ts}cp{4qu5kt5qt5rs17ss5ts}6l{4qu5ou5qw5rt17su5tu}5q{ckuclucmucnucoucpu4lu}5r{ckuclucmucnucoucpu4lu}7q{cksclscmscnscoscps4ls}6p{4qu5ou5qw5rt17sw5tw}ek{4qu5ou5qw5rt17su5tu}el{4qu5ou5qw5rt17su5tu}em{4qu5ou5qw5rt17su5tu}en{4qu5ou5qw5rt17su5tu}eo{4qu5ou5qw5rt17su5tu}ep{4qu5ou5qw5rt17su5tu}es{17ss5ts5qs4qu}et{4qu5ou5qw5rt17sw5tw}eu{4qu5ou5qw5rt17ss5ts}ev{17ss5ts5qs4qu}6z{17sw5tw5ou5qw5rs}fm{17sw5tw5ou5qw5rs}7n{201ts}fo{17sw5tw5ou5qw5rs}fp{17sw5tw5ou5qw5rs}fq{17sw5tw5ou5qw5rs}7r{cksclscmscnscoscps4ls}fs{17sw5tw5ou5qw5rs}ft{17su5tu}fu{17su5tu}fv{17su5tu}fw{17su5tu}fz{cksclscmscnscoscps4ls}}}"),"Helvetica-Bold":c("{'widths'{k3s2q4scx1w201n3r201o6o201s1w201t1w201u1w201w3m201x3m201y3m2k1w2l2l202m2n2n3r2o3r2p5t202q6o2r1s2s2l2t2l2u2r2v3u2w1w2x2l2y1w2z1w3k3r3l3r3m3r3n3r3o3r3p3r3q3r3r3r3s3r203t2l203u2l3v2l3w3u3x3u3y3u3z3x4k6l4l4s4m4s4n4s4o4s4p4m4q3x4r4y4s4s4t1w4u3r4v4s4w3x4x5n4y4s4z4y5k4m5l4y5m4s5n4m5o3x5p4s5q4m5r5y5s4m5t4m5u3x5v2l5w1w5x2l5y3u5z3r6k2l6l3r6m3x6n3r6o3x6p3r6q2l6r3x6s3x6t1w6u1w6v3r6w1w6x5t6y3x6z3x7k3x7l3x7m2r7n3r7o2l7p3x7q3r7r4y7s3r7t3r7u3m7v2r7w1w7x2r7y3u202l3rcl4sal2lam3ran3rao3rap3rar3ras2lat4tau2pav3raw3uay4taz2lbk2sbl3u'fof'6obo2lbp3xbq3rbr1wbs2lbu2obv3rbz3xck4s202k3rcm4scn4sco4scp4scq6ocr4scs4mct4mcu4mcv4mcw1w2m2zcy1wcz1wdl4sdm4ydn4ydo4ydp4ydq4yds4ydt4sdu4sdv4sdw4sdz3xek3rel3rem3ren3reo3rep3req5ter3res3ret3reu3rev3rew1wex1wey1wez1wfl3xfm3xfn3xfo3xfp3xfq3xfr3ufs3xft3xfu3xfv3xfw3xfz3r203k6o212m6o2dw2l2cq2l3t3r3u2l17s4m19m3r}'kerning'{cl{4qs5ku5ot5qs17sv5tv}201t{2ww4wy2yw}201w{2ks}201x{2ww4wy2yw}2k{201ts201xs}2w{7qs4qu5kw5os5qw5rs17su5tu7tsfzs}2x{5ow5qs}2y{7qs4qu5kw5os5qw5rs17su5tu7tsfzs}'fof'-6o7p{17su5tu5ot}ck{4qs5ku5ot5qs17sv5tv}4l{4qs5ku5ot5qs17sv5tv}cm{4qs5ku5ot5qs17sv5tv}cn{4qs5ku5ot5qs17sv5tv}co{4qs5ku5ot5qs17sv5tv}cp{4qs5ku5ot5qs17sv5tv}6l{17st5tt5os}17s{2kwclvcmvcnvcovcpv4lv4wwckv}5o{2kucltcmtcntcotcpt4lt4wtckt}5q{2ksclscmscnscoscps4ls4wvcks}5r{2ks4ws}5t{2kwclvcmvcnvcovcpv4lv4wwckv}eo{17st5tt5os}fu{17su5tu5ot}6p{17ss5ts}ek{17st5tt5os}el{17st5tt5os}em{17st5tt5os}en{17st5tt5os}6o{201ts}ep{17st5tt5os}es{17ss5ts}et{17ss5ts}eu{17ss5ts}ev{17ss5ts}6z{17su5tu5os5qt}fm{17su5tu5os5qt}fn{17su5tu5os5qt}fo{17su5tu5os5qt}fp{17su5tu5os5qt}fq{17su5tu5os5qt}fs{17su5tu5os5qt}ft{17su5tu5ot}7m{5os}fv{17su5tu5ot}fw{17su5tu5ot}}}"),Courier:c("{'widths'{k3w'fof'6o}'kerning'{'fof'-6o}}"),"Courier-BoldOblique":c("{'widths'{k3w'fof'6o}'kerning'{'fof'-6o}}"),"Times-Bold":c("{'widths'{k3q2q5ncx2r201n3m201o6o201s2l201t2l201u2l201w3m201x3m201y3m2k1t2l2l202m2n2n3m2o3m2p6o202q6o2r1w2s2l2t2l2u3m2v3t2w1t2x2l2y1t2z1w3k3m3l3m3m3m3n3m3o3m3p3m3q3m3r3m3s3m203t2l203u2l3v2l3w3t3x3t3y3t3z3m4k5x4l4s4m4m4n4s4o4s4p4m4q3x4r4y4s4y4t2r4u3m4v4y4w4m4x5y4y4s4z4y5k3x5l4y5m4s5n3r5o4m5p4s5q4s5r6o5s4s5t4s5u4m5v2l5w1w5x2l5y3u5z3m6k2l6l3m6m3r6n2w6o3r6p2w6q2l6r3m6s3r6t1w6u2l6v3r6w1w6x5n6y3r6z3m7k3r7l3r7m2w7n2r7o2l7p3r7q3m7r4s7s3m7t3m7u2w7v2r7w1q7x2r7y3o202l3mcl4sal2lam3man3mao3map3mar3mas2lat4uau1yav3maw3tay4uaz2lbk2sbl3t'fof'6obo2lbp3rbr1tbs2lbu2lbv3mbz3mck4s202k3mcm4scn4sco4scp4scq6ocr4scs4mct4mcu4mcv4mcw2r2m3rcy2rcz2rdl4sdm4ydn4ydo4ydp4ydq4yds4ydt4sdu4sdv4sdw4sdz3rek3mel3mem3men3meo3mep3meq4ser2wes2wet2weu2wev2wew1wex1wey1wez1wfl3rfm3mfn3mfo3mfp3mfq3mfr3tfs3mft3rfu3rfv3rfw3rfz3m203k6o212m6o2dw2l2cq2l3t3m3u2l17s4s19m3m}'kerning'{cl{4qt5ks5ot5qy5rw17sv5tv}201t{cks4lscmscnscoscpscls4wv}2k{201ts}2w{4qu5ku7mu5os5qx5ru17su5tu}2x{17su5tu5ou5qs}2y{4qv5kv7mu5ot5qz5ru17su5tu}'fof'-6o7t{cksclscmscnscoscps4ls}3u{17su5tu5os5qu}3v{17su5tu5os5qu}fu{17su5tu5ou5qu}7p{17su5tu5ou5qu}ck{4qt5ks5ot5qy5rw17sv5tv}4l{4qt5ks5ot5qy5rw17sv5tv}cm{4qt5ks5ot5qy5rw17sv5tv}cn{4qt5ks5ot5qy5rw17sv5tv}co{4qt5ks5ot5qy5rw17sv5tv}cp{4qt5ks5ot5qy5rw17sv5tv}6l{17st5tt5ou5qu}17s{ckuclucmucnucoucpu4lu4wu}5o{ckuclucmucnucoucpu4lu4wu}5q{ckzclzcmzcnzcozcpz4lz4wu}5r{ckxclxcmxcnxcoxcpx4lx4wu}5t{ckuclucmucnucoucpu4lu4wu}7q{ckuclucmucnucoucpu4lu}6p{17sw5tw5ou5qu}ek{17st5tt5qu}el{17st5tt5ou5qu}em{17st5tt5qu}en{17st5tt5qu}eo{17st5tt5qu}ep{17st5tt5ou5qu}es{17ss5ts5qu}et{17sw5tw5ou5qu}eu{17sw5tw5ou5qu}ev{17ss5ts5qu}6z{17sw5tw5ou5qu5rs}fm{17sw5tw5ou5qu5rs}fn{17sw5tw5ou5qu5rs}fo{17sw5tw5ou5qu5rs}fp{17sw5tw5ou5qu5rs}fq{17sw5tw5ou5qu5rs}7r{cktcltcmtcntcotcpt4lt5os}fs{17sw5tw5ou5qu5rs}ft{17su5tu5ou5qu}7m{5os}fv{17su5tu5ou5qu}fw{17su5tu5ou5qu}fz{cksclscmscnscoscps4ls}}}"),Symbol:c("{'widths'{k3uaw4r19m3m2k1t2l2l202m2y2n3m2p5n202q6o3k3m2s2l2t2l2v3r2w1t3m3m2y1t2z1wbk2sbl3r'fof'6o3n3m3o3m3p3m3q3m3r3m3s3m3t3m3u1w3v1w3w3r3x3r3y3r3z2wbp3t3l3m5v2l5x2l5z3m2q4yfr3r7v3k7w1o7x3k}'kerning'{'fof'-6o}}"),Helvetica:c("{'widths'{k3p2q4mcx1w201n3r201o6o201s1q201t1q201u1q201w2l201x2l201y2l2k1w2l1w202m2n2n3r2o3r2p5t202q6o2r1n2s2l2t2l2u2r2v3u2w1w2x2l2y1w2z1w3k3r3l3r3m3r3n3r3o3r3p3r3q3r3r3r3s3r203t2l203u2l3v1w3w3u3x3u3y3u3z3r4k6p4l4m4m4m4n4s4o4s4p4m4q3x4r4y4s4s4t1w4u3m4v4m4w3r4x5n4y4s4z4y5k4m5l4y5m4s5n4m5o3x5p4s5q4m5r5y5s4m5t4m5u3x5v1w5w1w5x1w5y2z5z3r6k2l6l3r6m3r6n3m6o3r6p3r6q1w6r3r6s3r6t1q6u1q6v3m6w1q6x5n6y3r6z3r7k3r7l3r7m2l7n3m7o1w7p3r7q3m7r4s7s3m7t3m7u3m7v2l7w1u7x2l7y3u202l3rcl4mal2lam3ran3rao3rap3rar3ras2lat4tau2pav3raw3uay4taz2lbk2sbl3u'fof'6obo2lbp3rbr1wbs2lbu2obv3rbz3xck4m202k3rcm4mcn4mco4mcp4mcq6ocr4scs4mct4mcu4mcv4mcw1w2m2ncy1wcz1wdl4sdm4ydn4ydo4ydp4ydq4yds4ydt4sdu4sdv4sdw4sdz3xek3rel3rem3ren3reo3rep3req5ter3mes3ret3reu3rev3rew1wex1wey1wez1wfl3rfm3rfn3rfo3rfp3rfq3rfr3ufs3xft3rfu3rfv3rfw3rfz3m203k6o212m6o2dw2l2cq2l3t3r3u1w17s4m19m3r}'kerning'{5q{4wv}cl{4qs5kw5ow5qs17sv5tv}201t{2wu4w1k2yu}201x{2wu4wy2yu}17s{2ktclucmucnu4otcpu4lu4wycoucku}2w{7qs4qz5k1m17sy5ow5qx5rsfsu5ty7tufzu}2x{17sy5ty5oy5qs}2y{7qs4qz5k1m17sy5ow5qx5rsfsu5ty7tufzu}'fof'-6o7p{17sv5tv5ow}ck{4qs5kw5ow5qs17sv5tv}4l{4qs5kw5ow5qs17sv5tv}cm{4qs5kw5ow5qs17sv5tv}cn{4qs5kw5ow5qs17sv5tv}co{4qs5kw5ow5qs17sv5tv}cp{4qs5kw5ow5qs17sv5tv}6l{17sy5ty5ow}do{17st5tt}4z{17st5tt}7s{fst}dm{17st5tt}dn{17st5tt}5o{ckwclwcmwcnwcowcpw4lw4wv}dp{17st5tt}dq{17st5tt}7t{5ow}ds{17st5tt}5t{2ktclucmucnu4otcpu4lu4wycoucku}fu{17sv5tv5ow}6p{17sy5ty5ow5qs}ek{17sy5ty5ow}el{17sy5ty5ow}em{17sy5ty5ow}en{5ty}eo{17sy5ty5ow}ep{17sy5ty5ow}es{17sy5ty5qs}et{17sy5ty5ow5qs}eu{17sy5ty5ow5qs}ev{17sy5ty5ow5qs}6z{17sy5ty5ow5qs}fm{17sy5ty5ow5qs}fn{17sy5ty5ow5qs}fo{17sy5ty5ow5qs}fp{17sy5ty5qs}fq{17sy5ty5ow5qs}7r{5ow}fs{17sy5ty5ow5qs}ft{17sv5tv5ow}7m{5ow}fv{17sv5tv5ow}fw{17sv5tv5ow}}}"),"Helvetica-BoldOblique":c("{'widths'{k3s2q4scx1w201n3r201o6o201s1w201t1w201u1w201w3m201x3m201y3m2k1w2l2l202m2n2n3r2o3r2p5t202q6o2r1s2s2l2t2l2u2r2v3u2w1w2x2l2y1w2z1w3k3r3l3r3m3r3n3r3o3r3p3r3q3r3r3r3s3r203t2l203u2l3v2l3w3u3x3u3y3u3z3x4k6l4l4s4m4s4n4s4o4s4p4m4q3x4r4y4s4s4t1w4u3r4v4s4w3x4x5n4y4s4z4y5k4m5l4y5m4s5n4m5o3x5p4s5q4m5r5y5s4m5t4m5u3x5v2l5w1w5x2l5y3u5z3r6k2l6l3r6m3x6n3r6o3x6p3r6q2l6r3x6s3x6t1w6u1w6v3r6w1w6x5t6y3x6z3x7k3x7l3x7m2r7n3r7o2l7p3x7q3r7r4y7s3r7t3r7u3m7v2r7w1w7x2r7y3u202l3rcl4sal2lam3ran3rao3rap3rar3ras2lat4tau2pav3raw3uay4taz2lbk2sbl3u'fof'6obo2lbp3xbq3rbr1wbs2lbu2obv3rbz3xck4s202k3rcm4scn4sco4scp4scq6ocr4scs4mct4mcu4mcv4mcw1w2m2zcy1wcz1wdl4sdm4ydn4ydo4ydp4ydq4yds4ydt4sdu4sdv4sdw4sdz3xek3rel3rem3ren3reo3rep3req5ter3res3ret3reu3rev3rew1wex1wey1wez1wfl3xfm3xfn3xfo3xfp3xfq3xfr3ufs3xft3xfu3xfv3xfw3xfz3r203k6o212m6o2dw2l2cq2l3t3r3u2l17s4m19m3r}'kerning'{cl{4qs5ku5ot5qs17sv5tv}201t{2ww4wy2yw}201w{2ks}201x{2ww4wy2yw}2k{201ts201xs}2w{7qs4qu5kw5os5qw5rs17su5tu7tsfzs}2x{5ow5qs}2y{7qs4qu5kw5os5qw5rs17su5tu7tsfzs}'fof'-6o7p{17su5tu5ot}ck{4qs5ku5ot5qs17sv5tv}4l{4qs5ku5ot5qs17sv5tv}cm{4qs5ku5ot5qs17sv5tv}cn{4qs5ku5ot5qs17sv5tv}co{4qs5ku5ot5qs17sv5tv}cp{4qs5ku5ot5qs17sv5tv}6l{17st5tt5os}17s{2kwclvcmvcnvcovcpv4lv4wwckv}5o{2kucltcmtcntcotcpt4lt4wtckt}5q{2ksclscmscnscoscps4ls4wvcks}5r{2ks4ws}5t{2kwclvcmvcnvcovcpv4lv4wwckv}eo{17st5tt5os}fu{17su5tu5ot}6p{17ss5ts}ek{17st5tt5os}el{17st5tt5os}em{17st5tt5os}en{17st5tt5os}6o{201ts}ep{17st5tt5os}es{17ss5ts}et{17ss5ts}eu{17ss5ts}ev{17ss5ts}6z{17su5tu5os5qt}fm{17su5tu5os5qt}fn{17su5tu5os5qt}fo{17su5tu5os5qt}fp{17su5tu5os5qt}fq{17su5tu5os5qt}fs{17su5tu5os5qt}ft{17su5tu5ot}7m{5os}fv{17su5tu5ot}fw{17su5tu5ot}}}"),ZapfDingbats:c("{'widths'{k4u2k1w'fof'6o}'kerning'{'fof'-6o}}"),"Courier-Bold":c("{'widths'{k3w'fof'6o}'kerning'{'fof'-6o}}"),"Times-Italic":c("{'widths'{k3n2q4ycx2l201n3m201o5t201s2l201t2l201u2l201w3r201x3r201y3r2k1t2l2l202m2n2n3m2o3m2p5n202q5t2r1p2s2l2t2l2u3m2v4n2w1t2x2l2y1t2z1w3k3m3l3m3m3m3n3m3o3m3p3m3q3m3r3m3s3m203t2l203u2l3v2l3w4n3x4n3y4n3z3m4k5w4l3x4m3x4n4m4o4s4p3x4q3x4r4s4s4s4t2l4u2w4v4m4w3r4x5n4y4m4z4s5k3x5l4s5m3x5n3m5o3r5p4s5q3x5r5n5s3x5t3r5u3r5v2r5w1w5x2r5y2u5z3m6k2l6l3m6m3m6n2w6o3m6p2w6q1w6r3m6s3m6t1w6u1w6v2w6w1w6x4s6y3m6z3m7k3m7l3m7m2r7n2r7o1w7p3m7q2w7r4m7s2w7t2w7u2r7v2s7w1v7x2s7y3q202l3mcl3xal2ram3man3mao3map3mar3mas2lat4wau1vav3maw4nay4waz2lbk2sbl4n'fof'6obo2lbp3mbq3obr1tbs2lbu1zbv3mbz3mck3x202k3mcm3xcn3xco3xcp3xcq5tcr4mcs3xct3xcu3xcv3xcw2l2m2ucy2lcz2ldl4mdm4sdn4sdo4sdp4sdq4sds4sdt4sdu4sdv4sdw4sdz3mek3mel3mem3men3meo3mep3meq4mer2wes2wet2weu2wev2wew1wex1wey1wez1wfl3mfm3mfn3mfo3mfp3mfq3mfr4nfs3mft3mfu3mfv3mfw3mfz2w203k6o212m6m2dw2l2cq2l3t3m3u2l17s3r19m3m}'kerning'{cl{5kt4qw}201s{201sw}201t{201tw2wy2yy6q-t}201x{2wy2yy}2k{201tw}2w{7qs4qy7rs5ky7mw5os5qx5ru17su5tu}2x{17ss5ts5os}2y{7qs4qy7rs5ky7mw5os5qx5ru17su5tu}'fof'-6o6t{17ss5ts5qs}7t{5os}3v{5qs}7p{17su5tu5qs}ck{5kt4qw}4l{5kt4qw}cm{5kt4qw}cn{5kt4qw}co{5kt4qw}cp{5kt4qw}6l{4qs5ks5ou5qw5ru17su5tu}17s{2ks}5q{ckvclvcmvcnvcovcpv4lv}5r{ckuclucmucnucoucpu4lu}5t{2ks}6p{4qs5ks5ou5qw5ru17su5tu}ek{4qs5ks5ou5qw5ru17su5tu}el{4qs5ks5ou5qw5ru17su5tu}em{4qs5ks5ou5qw5ru17su5tu}en{4qs5ks5ou5qw5ru17su5tu}eo{4qs5ks5ou5qw5ru17su5tu}ep{4qs5ks5ou5qw5ru17su5tu}es{5ks5qs4qs}et{4qs5ks5ou5qw5ru17su5tu}eu{4qs5ks5qw5ru17su5tu}ev{5ks5qs4qs}ex{17ss5ts5qs}6z{4qv5ks5ou5qw5ru17su5tu}fm{4qv5ks5ou5qw5ru17su5tu}fn{4qv5ks5ou5qw5ru17su5tu}fo{4qv5ks5ou5qw5ru17su5tu}fp{4qv5ks5ou5qw5ru17su5tu}fq{4qv5ks5ou5qw5ru17su5tu}7r{5os}fs{4qv5ks5ou5qw5ru17su5tu}ft{17su5tu5qs}fu{17su5tu5qs}fv{17su5tu5qs}fw{17su5tu5qs}}}"),"Times-Roman":c("{'widths'{k3n2q4ycx2l201n3m201o6o201s2l201t2l201u2l201w2w201x2w201y2w2k1t2l2l202m2n2n3m2o3m2p5n202q6o2r1m2s2l2t2l2u3m2v3s2w1t2x2l2y1t2z1w3k3m3l3m3m3m3n3m3o3m3p3m3q3m3r3m3s3m203t2l203u2l3v1w3w3s3x3s3y3s3z2w4k5w4l4s4m4m4n4m4o4s4p3x4q3r4r4s4s4s4t2l4u2r4v4s4w3x4x5t4y4s4z4s5k3r5l4s5m4m5n3r5o3x5p4s5q4s5r5y5s4s5t4s5u3x5v2l5w1w5x2l5y2z5z3m6k2l6l2w6m3m6n2w6o3m6p2w6q2l6r3m6s3m6t1w6u1w6v3m6w1w6x4y6y3m6z3m7k3m7l3m7m2l7n2r7o1w7p3m7q3m7r4s7s3m7t3m7u2w7v3k7w1o7x3k7y3q202l3mcl4sal2lam3man3mao3map3mar3mas2lat4wau1vav3maw3say4waz2lbk2sbl3s'fof'6obo2lbp3mbq2xbr1tbs2lbu1zbv3mbz2wck4s202k3mcm4scn4sco4scp4scq5tcr4mcs3xct3xcu3xcv3xcw2l2m2tcy2lcz2ldl4sdm4sdn4sdo4sdp4sdq4sds4sdt4sdu4sdv4sdw4sdz3mek2wel2wem2wen2weo2wep2weq4mer2wes2wet2weu2wev2wew1wex1wey1wez1wfl3mfm3mfn3mfo3mfp3mfq3mfr3sfs3mft3mfu3mfv3mfw3mfz3m203k6o212m6m2dw2l2cq2l3t3m3u1w17s4s19m3m}'kerning'{cl{4qs5ku17sw5ou5qy5rw201ss5tw201ws}201s{201ss}201t{ckw4lwcmwcnwcowcpwclw4wu201ts}2k{201ts}2w{4qs5kw5os5qx5ru17sx5tx}2x{17sw5tw5ou5qu}2y{4qs5kw5os5qx5ru17sx5tx}'fof'-6o7t{ckuclucmucnucoucpu4lu5os5rs}3u{17su5tu5qs}3v{17su5tu5qs}7p{17sw5tw5qs}ck{4qs5ku17sw5ou5qy5rw201ss5tw201ws}4l{4qs5ku17sw5ou5qy5rw201ss5tw201ws}cm{4qs5ku17sw5ou5qy5rw201ss5tw201ws}cn{4qs5ku17sw5ou5qy5rw201ss5tw201ws}co{4qs5ku17sw5ou5qy5rw201ss5tw201ws}cp{4qs5ku17sw5ou5qy5rw201ss5tw201ws}6l{17su5tu5os5qw5rs}17s{2ktclvcmvcnvcovcpv4lv4wuckv}5o{ckwclwcmwcnwcowcpw4lw4wu}5q{ckyclycmycnycoycpy4ly4wu5ms}5r{cktcltcmtcntcotcpt4lt4ws}5t{2ktclvcmvcnvcovcpv4lv4wuckv}7q{cksclscmscnscoscps4ls}6p{17su5tu5qw5rs}ek{5qs5rs}el{17su5tu5os5qw5rs}em{17su5tu5os5qs5rs}en{17su5qs5rs}eo{5qs5rs}ep{17su5tu5os5qw5rs}es{5qs}et{17su5tu5qw5rs}eu{17su5tu5qs5rs}ev{5qs}6z{17sv5tv5os5qx5rs}fm{5os5qt5rs}fn{17sv5tv5os5qx5rs}fo{17sv5tv5os5qx5rs}fp{5os5qt5rs}fq{5os5qt5rs}7r{ckuclucmucnucoucpu4lu5os}fs{17sv5tv5os5qx5rs}ft{17ss5ts5qs}fu{17sw5tw5qs}fv{17sw5tw5qs}fw{17ss5ts5qs}fz{ckuclucmucnucoucpu4lu5os5rs}}}"),"Helvetica-Oblique":c("{'widths'{k3p2q4mcx1w201n3r201o6o201s1q201t1q201u1q201w2l201x2l201y2l2k1w2l1w202m2n2n3r2o3r2p5t202q6o2r1n2s2l2t2l2u2r2v3u2w1w2x2l2y1w2z1w3k3r3l3r3m3r3n3r3o3r3p3r3q3r3r3r3s3r203t2l203u2l3v1w3w3u3x3u3y3u3z3r4k6p4l4m4m4m4n4s4o4s4p4m4q3x4r4y4s4s4t1w4u3m4v4m4w3r4x5n4y4s4z4y5k4m5l4y5m4s5n4m5o3x5p4s5q4m5r5y5s4m5t4m5u3x5v1w5w1w5x1w5y2z5z3r6k2l6l3r6m3r6n3m6o3r6p3r6q1w6r3r6s3r6t1q6u1q6v3m6w1q6x5n6y3r6z3r7k3r7l3r7m2l7n3m7o1w7p3r7q3m7r4s7s3m7t3m7u3m7v2l7w1u7x2l7y3u202l3rcl4mal2lam3ran3rao3rap3rar3ras2lat4tau2pav3raw3uay4taz2lbk2sbl3u'fof'6obo2lbp3rbr1wbs2lbu2obv3rbz3xck4m202k3rcm4mcn4mco4mcp4mcq6ocr4scs4mct4mcu4mcv4mcw1w2m2ncy1wcz1wdl4sdm4ydn4ydo4ydp4ydq4yds4ydt4sdu4sdv4sdw4sdz3xek3rel3rem3ren3reo3rep3req5ter3mes3ret3reu3rev3rew1wex1wey1wez1wfl3rfm3rfn3rfo3rfp3rfq3rfr3ufs3xft3rfu3rfv3rfw3rfz3m203k6o212m6o2dw2l2cq2l3t3r3u1w17s4m19m3r}'kerning'{5q{4wv}cl{4qs5kw5ow5qs17sv5tv}201t{2wu4w1k2yu}201x{2wu4wy2yu}17s{2ktclucmucnu4otcpu4lu4wycoucku}2w{7qs4qz5k1m17sy5ow5qx5rsfsu5ty7tufzu}2x{17sy5ty5oy5qs}2y{7qs4qz5k1m17sy5ow5qx5rsfsu5ty7tufzu}'fof'-6o7p{17sv5tv5ow}ck{4qs5kw5ow5qs17sv5tv}4l{4qs5kw5ow5qs17sv5tv}cm{4qs5kw5ow5qs17sv5tv}cn{4qs5kw5ow5qs17sv5tv}co{4qs5kw5ow5qs17sv5tv}cp{4qs5kw5ow5qs17sv5tv}6l{17sy5ty5ow}do{17st5tt}4z{17st5tt}7s{fst}dm{17st5tt}dn{17st5tt}5o{ckwclwcmwcnwcowcpw4lw4wv}dp{17st5tt}dq{17st5tt}7t{5ow}ds{17st5tt}5t{2ktclucmucnu4otcpu4lu4wycoucku}fu{17sv5tv5ow}6p{17sy5ty5ow5qs}ek{17sy5ty5ow}el{17sy5ty5ow}em{17sy5ty5ow}en{5ty}eo{17sy5ty5ow}ep{17sy5ty5ow}es{17sy5ty5qs}et{17sy5ty5ow5qs}eu{17sy5ty5ow5qs}ev{17sy5ty5ow5qs}6z{17sy5ty5ow5qs}fm{17sy5ty5ow5qs}fn{17sy5ty5ow5qs}fo{17sy5ty5ow5qs}fp{17sy5ty5qs}fq{17sy5ty5ow5qs}7r{5ow}fs{17sy5ty5ow5qs}ft{17sv5tv5ow}7m{5ow}fv{17sv5tv5ow}fw{17sv5tv5ow}}}")}};t.events.push(["addFont",function(A){var h=A.font,m=f.Unicode[h.postScriptName];m&&(h.metadata.Unicode={},h.metadata.Unicode.widths=m.widths,h.metadata.Unicode.kerning=m.kerning);var p=d.Unicode[h.postScriptName];p&&(h.metadata.Unicode.encoding=p,h.encoding=p.codePages[0])}])}(rn.API),function(t){var e=function(r){for(var n=r.length,a=new Uint8Array(n),s=0;s<n;s++)a[s]=r.charCodeAt(s);return a};t.API.events.push(["addFont",function(r){var n=void 0,a=r.font,s=r.instance;if(!a.isStandardFont){if(s===void 0)throw new Error("Font does not exist in vFS, import fonts or remove declaration doc.addFont('"+a.postScriptName+"').");if(typeof(n=s.existsFileInVFS(a.postScriptName)===!1?s.loadFile(a.postScriptName):s.getFileFromVFS(a.postScriptName))!="string")throw new Error("Font is not stored as string-data in vFS, import fonts or remove declaration doc.addFont('"+a.postScriptName+"').");(function(o,l){l=/^\x00\x01\x00\x00/.test(l)?e(l):e(pE(l)),o.metadata=t.API.TTFFont.open(l),o.metadata.Unicode=o.metadata.Unicode||{encoding:{},kerning:{},widths:[]},o.metadata.glyIdsUsed=[0]})(a,n)}}])}(rn),rn.API.addSvgAsImage=function(t,e,r,n,a,s,o,l){if(isNaN(e)||isNaN(r))throw hs.error("jsPDF.addSvgAsImage: Invalid coordinates",arguments),new Error("Invalid coordinates passed to jsPDF.addSvgAsImage");if(isNaN(n)||isNaN(a))throw hs.error("jsPDF.addSvgAsImage: Invalid measurements",arguments),new Error("Invalid measurements (width and/or height) passed to jsPDF.addSvgAsImage");var c=document.createElement("canvas");c.width=n,c.height=a;var u=c.getContext("2d");u.fillStyle="#fff",u.fillRect(0,0,c.width,c.height);var d={ignoreMouse:!0,ignoreAnimation:!0,ignoreDimensions:!0},f=this;return(Mn.canvg?Promise.resolve(Mn.canvg):sA(()=>import("./index.es-DsGnWl9y.js"),[])).catch(function(A){return Promise.reject(new Error("Could not load canvg: "+A))}).then(function(A){return A.default?A.default:A}).then(function(A){return A.fromString(u,t,d)},function(){return Promise.reject(new Error("Could not load canvg."))}).then(function(A){return A.render(d)}).then(function(){f.addImage(c.toDataURL("image/jpeg",1),e,r,n,a,o,l)})},rn.API.putTotalPages=function(t){var e,r=0;parseInt(this.internal.getFont().id.substr(1),10)<15?(e=new RegExp(t,"g"),r=this.internal.getNumberOfPages()):(e=new RegExp(this.pdfEscape16(t,this.internal.getFont()),"g"),r=this.pdfEscape16(this.internal.getNumberOfPages()+"",this.internal.getFont()));for(var n=1;n<=this.internal.getNumberOfPages();n++)for(var a=0;a<this.internal.pages[n].length;a++)this.internal.pages[n][a]=this.internal.pages[n][a].replace(e,r);return this},rn.API.viewerPreferences=function(t,e){var r;t=t||{},e=e||!1;var n,a,s,o={HideToolbar:{defaultValue:!1,value:!1,type:"boolean",explicitSet:!1,valueSet:[!0,!1],pdfVersion:1.3},HideMenubar:{defaultValue:!1,value:!1,type:"boolean",explicitSet:!1,valueSet:[!0,!1],pdfVersion:1.3},HideWindowUI:{defaultValue:!1,value:!1,type:"boolean",explicitSet:!1,valueSet:[!0,!1],pdfVersion:1.3},FitWindow:{defaultValue:!1,value:!1,type:"boolean",explicitSet:!1,valueSet:[!0,!1],pdfVersion:1.3},CenterWindow:{defaultValue:!1,value:!1,type:"boolean",explicitSet:!1,valueSet:[!0,!1],pdfVersion:1.3},DisplayDocTitle:{defaultValue:!1,value:!1,type:"boolean",explicitSet:!1,valueSet:[!0,!1],pdfVersion:1.4},NonFullScreenPageMode:{defaultValue:"UseNone",value:"UseNone",type:"name",explicitSet:!1,valueSet:["UseNone","UseOutlines","UseThumbs","UseOC"],pdfVersion:1.3},Direction:{defaultValue:"L2R",value:"L2R",type:"name",explicitSet:!1,valueSet:["L2R","R2L"],pdfVersion:1.3},ViewArea:{defaultValue:"CropBox",value:"CropBox",type:"name",explicitSet:!1,valueSet:["MediaBox","CropBox","TrimBox","BleedBox","ArtBox"],pdfVersion:1.4},ViewClip:{defaultValue:"CropBox",value:"CropBox",type:"name",explicitSet:!1,valueSet:["MediaBox","CropBox","TrimBox","BleedBox","ArtBox"],pdfVersion:1.4},PrintArea:{defaultValue:"CropBox",value:"CropBox",type:"name",explicitSet:!1,valueSet:["MediaBox","CropBox","TrimBox","BleedBox","ArtBox"],pdfVersion:1.4},PrintClip:{defaultValue:"CropBox",value:"CropBox",type:"name",explicitSet:!1,valueSet:["MediaBox","CropBox","TrimBox","BleedBox","ArtBox"],pdfVersion:1.4},PrintScaling:{defaultValue:"AppDefault",value:"AppDefault",type:"name",explicitSet:!1,valueSet:["AppDefault","None"],pdfVersion:1.6},Duplex:{defaultValue:"",value:"none",type:"name",explicitSet:!1,valueSet:["Simplex","DuplexFlipShortEdge","DuplexFlipLongEdge","none"],pdfVersion:1.7},PickTrayByPDFSize:{defaultValue:!1,value:!1,type:"boolean",explicitSet:!1,valueSet:[!0,!1],pdfVersion:1.7},PrintPageRange:{defaultValue:"",value:"",type:"array",explicitSet:!1,valueSet:null,pdfVersion:1.7},NumCopies:{defaultValue:1,value:1,type:"integer",explicitSet:!1,valueSet:null,pdfVersion:1.7}},l=Object.keys(o),c=[],u=0,d=0,f=0;function A(m,p){var x,v=!1;for(x=0;x<m.length;x+=1)m[x]===p&&(v=!0);return v}if(this.internal.viewerpreferences===void 0&&(this.internal.viewerpreferences={},this.internal.viewerpreferences.configuration=JSON.parse(JSON.stringify(o)),this.internal.viewerpreferences.isSubscribed=!1),r=this.internal.viewerpreferences.configuration,t==="reset"||e===!0){var h=l.length;for(f=0;f<h;f+=1)r[l[f]].value=r[l[f]].defaultValue,r[l[f]].explicitSet=!1}if(Za(t)==="object"){for(a in t)if(s=t[a],A(l,a)&&s!==void 0){if(r[a].type==="boolean"&&typeof s=="boolean")r[a].value=s;else if(r[a].type==="name"&&A(r[a].valueSet,s))r[a].value=s;else if(r[a].type==="integer"&&Number.isInteger(s))r[a].value=s;else if(r[a].type==="array"){for(u=0;u<s.length;u+=1)if(n=!0,s[u].length===1&&typeof s[u][0]=="number")c.push(String(s[u]-1));else if(s[u].length>1){for(d=0;d<s[u].length;d+=1)typeof s[u][d]!="number"&&(n=!1);n===!0&&c.push([s[u][0]-1,s[u][1]-1].join(" "))}r[a].value="["+c.join(" ")+"]"}else r[a].value=r[a].defaultValue;r[a].explicitSet=!0}}return this.internal.viewerpreferences.isSubscribed===!1&&(this.internal.events.subscribe("putCatalog",function(){var m,p=[];for(m in r)r[m].explicitSet===!0&&(r[m].type==="name"?p.push("/"+m+" /"+r[m].value):p.push("/"+m+" "+r[m].value));p.length!==0&&this.internal.write(`/ViewerPreferences
<<
`+p.join(`
`)+`
>>`)}),this.internal.viewerpreferences.isSubscribed=!0),this.internal.viewerpreferences.configuration=r,this},function(t){var e=function(){var n='<rdf:RDF xmlns:rdf="http://www.w3.org/1999/02/22-rdf-syntax-ns#"><rdf:Description rdf:about="" xmlns:jspdf="'+this.internal.__metadata__.namespaceuri+'"><jspdf:metadata>',a=unescape(encodeURIComponent('<x:xmpmeta xmlns:x="adobe:ns:meta/">')),s=unescape(encodeURIComponent(n)),o=unescape(encodeURIComponent(this.internal.__metadata__.metadata)),l=unescape(encodeURIComponent("</jspdf:metadata></rdf:Description></rdf:RDF>")),c=unescape(encodeURIComponent("</x:xmpmeta>")),u=s.length+o.length+l.length+a.length+c.length;this.internal.__metadata__.metadata_object_number=this.internal.newObject(),this.internal.write("<< /Type /Metadata /Subtype /XML /Length "+u+" >>"),this.internal.write("stream"),this.internal.write(a+s+o+l+c),this.internal.write("endstream"),this.internal.write("endobj")},r=function(){this.internal.__metadata__.metadata_object_number&&this.internal.write("/Metadata "+this.internal.__metadata__.metadata_object_number+" 0 R")};t.addMetadata=function(n,a){return this.internal.__metadata__===void 0&&(this.internal.__metadata__={metadata:n,namespaceuri:a||"http://jspdf.default.namespaceuri/"},this.internal.events.subscribe("putCatalog",r),this.internal.events.subscribe("postPutResources",e)),this}}(rn.API),function(t){var e=t.API,r=e.pdfEscape16=function(s,o){for(var l,c=o.metadata.Unicode.widths,u=["","0","00","000","0000"],d=[""],f=0,A=s.length;f<A;++f){if(l=o.metadata.characterToGlyph(s.charCodeAt(f)),o.metadata.glyIdsUsed.push(l),o.metadata.toUnicode[l]=s.charCodeAt(f),c.indexOf(l)==-1&&(c.push(l),c.push([parseInt(o.metadata.widthOfGlyph(l),10)])),l=="0")return d.join("");l=l.toString(16),d.push(u[4-l.length],l)}return d.join("")},n=function(s){var o,l,c,u,d,f,A;for(d=`/CIDInit /ProcSet findresource begin
12 dict begin
begincmap
/CIDSystemInfo <<
  /Registry (Adobe)
  /Ordering (UCS)
  /Supplement 0
>> def
/CMapName /Adobe-Identity-UCS def
/CMapType 2 def
1 begincodespacerange
<0000><ffff>
endcodespacerange`,c=[],f=0,A=(l=Object.keys(s).sort(function(h,m){return h-m})).length;f<A;f++)o=l[f],c.length>=100&&(d+=`
`+c.length+` beginbfchar
`+c.join(`
`)+`
endbfchar`,c=[]),s[o]!==void 0&&s[o]!==null&&typeof s[o].toString=="function"&&(u=("0000"+s[o].toString(16)).slice(-4),o=("0000"+(+o).toString(16)).slice(-4),c.push("<"+o+"><"+u+">"));return c.length&&(d+=`
`+c.length+` beginbfchar
`+c.join(`
`)+`
endbfchar
`),d+`endcmap
CMapName currentdict /CMap defineresource pop
end
end`};e.events.push(["putFont",function(s){(function(o){var l=o.font,c=o.out,u=o.newObject,d=o.putStream;if(l.metadata instanceof t.API.TTFFont&&l.encoding==="Identity-H"){for(var f=l.metadata.Unicode.widths,A=l.metadata.subset.encode(l.metadata.glyIdsUsed,1),h="",m=0;m<A.length;m++)h+=String.fromCharCode(A[m]);var p=u();d({data:h,addLength1:!0,objectId:p}),c("endobj");var x=u();d({data:n(l.metadata.toUnicode),addLength1:!0,objectId:x}),c("endobj");var v=u();c("<<"),c("/Type /FontDescriptor"),c("/FontName /"+Tx(l.fontName)),c("/FontFile2 "+p+" 0 R"),c("/FontBBox "+t.API.PDFObject.convert(l.metadata.bbox)),c("/Flags "+l.metadata.flags),c("/StemV "+l.metadata.stemV),c("/ItalicAngle "+l.metadata.italicAngle),c("/Ascent "+l.metadata.ascender),c("/Descent "+l.metadata.decender),c("/CapHeight "+l.metadata.capHeight),c(">>"),c("endobj");var y=u();c("<<"),c("/Type /Font"),c("/BaseFont /"+Tx(l.fontName)),c("/FontDescriptor "+v+" 0 R"),c("/W "+t.API.PDFObject.convert(f)),c("/CIDToGIDMap /Identity"),c("/DW 1000"),c("/Subtype /CIDFontType2"),c("/CIDSystemInfo"),c("<<"),c("/Supplement 0"),c("/Registry (Adobe)"),c("/Ordering ("+l.encoding+")"),c(">>"),c(">>"),c("endobj"),l.objectNumber=u(),c("<<"),c("/Type /Font"),c("/Subtype /Type0"),c("/ToUnicode "+x+" 0 R"),c("/BaseFont /"+Tx(l.fontName)),c("/Encoding /"+l.encoding),c("/DescendantFonts ["+y+" 0 R]"),c(">>"),c("endobj"),l.isAlreadyPutted=!0}})(s)}]),e.events.push(["putFont",function(s){(function(o){var l=o.font,c=o.out,u=o.newObject,d=o.putStream;if(l.metadata instanceof t.API.TTFFont&&l.encoding==="WinAnsiEncoding"){for(var f=l.metadata.rawData,A="",h=0;h<f.length;h++)A+=String.fromCharCode(f[h]);var m=u();d({data:A,addLength1:!0,objectId:m}),c("endobj");var p=u();d({data:n(l.metadata.toUnicode),addLength1:!0,objectId:p}),c("endobj");var x=u();c("<<"),c("/Descent "+l.metadata.decender),c("/CapHeight "+l.metadata.capHeight),c("/StemV "+l.metadata.stemV),c("/Type /FontDescriptor"),c("/FontFile2 "+m+" 0 R"),c("/Flags 96"),c("/FontBBox "+t.API.PDFObject.convert(l.metadata.bbox)),c("/FontName /"+Tx(l.fontName)),c("/ItalicAngle "+l.metadata.italicAngle),c("/Ascent "+l.metadata.ascender),c(">>"),c("endobj"),l.objectNumber=u();for(var v=0;v<l.metadata.hmtx.widths.length;v++)l.metadata.hmtx.widths[v]=parseInt(l.metadata.hmtx.widths[v]*(1e3/l.metadata.head.unitsPerEm));c("<</Subtype/TrueType/Type/Font/ToUnicode "+p+" 0 R/BaseFont/"+Tx(l.fontName)+"/FontDescriptor "+x+" 0 R/Encoding/"+l.encoding+" /FirstChar 29 /LastChar 255 /Widths "+t.API.PDFObject.convert(l.metadata.hmtx.widths)+">>"),c("endobj"),l.isAlreadyPutted=!0}})(s)}]);var a=function(s){var o,l=s.text||"",c=s.x,u=s.y,d=s.options||{},f=s.mutex||{},A=f.pdfEscape,h=f.activeFontKey,m=f.fonts,p=h,x="",v=0,y="",b=m[p].encoding;if(m[p].encoding!=="Identity-H")return{text:l,x:c,y:u,options:d,mutex:f};for(y=l,p=h,Array.isArray(l)&&(y=l[0]),v=0;v<y.length;v+=1)m[p].metadata.hasOwnProperty("cmap")&&(o=m[p].metadata.cmap.unicode.codeMap[y[v].charCodeAt(0)]),o||y[v].charCodeAt(0)<256&&m[p].metadata.hasOwnProperty("Unicode")?x+=y[v]:x+="";var w="";return parseInt(p.slice(1))<14||b==="WinAnsiEncoding"?w=A(x,p).split("").map(function(j){return j.charCodeAt(0).toString(16)}).join(""):b==="Identity-H"&&(w=r(x,m[p])),f.isHex=!0,{text:w,x:c,y:u,options:d,mutex:f}};e.events.push(["postProcessText",function(s){var o=s.text||"",l=[],c={text:o,x:s.x,y:s.y,options:s.options,mutex:s.mutex};if(Array.isArray(o)){var u=0;for(u=0;u<o.length;u+=1)Array.isArray(o[u])&&o[u].length===3?l.push([a(Object.assign({},c,{text:o[u][0]})).text,o[u][1],o[u][2]]):l.push(a(Object.assign({},c,{text:o[u]})).text);s.text=l}else s.text=a(Object.assign({},c,{text:o})).text}])}(rn),function(t){var e=function(){return this.internal.vFS===void 0&&(this.internal.vFS={}),!0};t.existsFileInVFS=function(r){return e.call(this),this.internal.vFS[r]!==void 0},t.addFileToVFS=function(r,n){return e.call(this),this.internal.vFS[r]=n,this},t.getFileFromVFS=function(r){return e.call(this),this.internal.vFS[r]!==void 0?this.internal.vFS[r]:null}}(rn.API),function(t){t.__bidiEngine__=t.prototype.__bidiEngine__=function(n){var a,s,o,l,c,u,d,f=e,A=[[0,3,0,1,0,0,0],[0,3,0,1,2,2,0],[0,3,0,17,2,0,1],[0,3,5,5,4,1,0],[0,3,21,21,4,0,1],[0,3,5,5,4,2,0]],h=[[2,0,1,1,0,1,0],[2,0,1,1,0,2,0],[2,0,2,1,3,2,0],[2,0,2,33,3,1,1]],m={L:0,R:1,EN:2,AN:3,N:4,B:5,S:6},p={0:0,5:1,6:2,7:3,32:4,251:5,254:6,255:7},x=["(",")","(","<",">","<","[","]","[","{","}","{","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","",""],v=new RegExp(/^([1-4|9]|1[0-9]|2[0-9]|3[0168]|4[04589]|5[012]|7[78]|159|16[0-9]|17[0-2]|21[569]|22[03489]|250)$/),y=!1,b=0;this.__bidiEngine__={};var w=function(k){var B=k.charCodeAt(),D=B>>8,X=p[D];return X!==void 0?f[256*X+(255&B)]:D===252||D===253?"AL":v.test(D)?"L":D===8?"R":"N"},j=function(k){for(var B,D=0;D<k.length;D++){if((B=w(k.charAt(D)))==="L")return!1;if(B==="R")return!0}return!1},I=function(k,B,D,X){var me,pe,he,ve,ae=B[X];switch(ae){case"L":case"R":case"LRE":case"RLE":case"LRO":case"RLO":case"PDF":y=!1;break;case"N":case"AN":break;case"EN":y&&(ae="AN");break;case"AL":y=!0,ae="R";break;case"WS":case"BN":ae="N";break;case"CS":X<1||X+1>=B.length||(me=D[X-1])!=="EN"&&me!=="AN"||(pe=B[X+1])!=="EN"&&pe!=="AN"?ae="N":y&&(pe="AN"),ae=pe===me?pe:"N";break;case"ES":ae=(me=X>0?D[X-1]:"B")==="EN"&&X+1<B.length&&B[X+1]==="EN"?"EN":"N";break;case"ET":if(X>0&&D[X-1]==="EN"){ae="EN";break}if(y){ae="N";break}for(he=X+1,ve=B.length;he<ve&&B[he]==="ET";)he++;ae=he<ve&&B[he]==="EN"?"EN":"N";break;case"NSM":if(o&&!l){for(ve=B.length,he=X+1;he<ve&&B[he]==="NSM";)he++;if(he<ve){var Pe=k[X],ke=Pe>=1425&&Pe<=2303||Pe===64286;if(me=B[he],ke&&(me==="R"||me==="AL")){ae="R";break}}}ae=X<1||(me=B[X-1])==="B"?"N":D[X-1];break;case"B":y=!1,a=!0,ae=b;break;case"S":s=!0,ae="N"}return ae},_=function(k,B,D){var X=k.split("");return D&&S(X,D,{hiLevel:b}),X.reverse(),B&&B.reverse(),X.join("")},S=function(k,B,D){var X,me,pe,he,ve,ae=-1,Pe=k.length,ke=0,O=[],G=b?h:A,z=[];for(y=!1,a=!1,s=!1,me=0;me<Pe;me++)z[me]=w(k[me]);for(pe=0;pe<Pe;pe++){if(ve=ke,O[pe]=I(k,z,O,pe),X=240&(ke=G[ve][m[O[pe]]]),ke&=15,B[pe]=he=G[ke][5],X>0)if(X===16){for(me=ae;me<pe;me++)B[me]=1;ae=-1}else ae=-1;if(G[ke][6])ae===-1&&(ae=pe);else if(ae>-1){for(me=ae;me<pe;me++)B[me]=he;ae=-1}z[pe]==="B"&&(B[pe]=0),D.hiLevel|=he}s&&function(U,Y,ee){for(var M=0;M<ee;M++)if(U[M]==="S"){Y[M]=b;for(var H=M-1;H>=0&&U[H]==="WS";H--)Y[H]=b}}(z,B,Pe)},E=function(k,B,D,X,me){if(!(me.hiLevel<k)){if(k===1&&b===1&&!a)return B.reverse(),void(D&&D.reverse());for(var pe,he,ve,ae,Pe=B.length,ke=0;ke<Pe;){if(X[ke]>=k){for(ve=ke+1;ve<Pe&&X[ve]>=k;)ve++;for(ae=ke,he=ve-1;ae<he;ae++,he--)pe=B[ae],B[ae]=B[he],B[he]=pe,D&&(pe=D[ae],D[ae]=D[he],D[he]=pe);ke=ve}ke++}}},T=function(k,B,D){var X=k.split(""),me={hiLevel:b};return D||(D=[]),S(X,D,me),function(pe,he,ve){if(ve.hiLevel!==0&&d)for(var ae,Pe=0;Pe<pe.length;Pe++)he[Pe]===1&&(ae=x.indexOf(pe[Pe]))>=0&&(pe[Pe]=x[ae+1])}(X,D,me),E(2,X,B,D,me),E(1,X,B,D,me),X.join("")};return this.__bidiEngine__.doBidiReorder=function(k,B,D){if(function(me,pe){if(pe)for(var he=0;he<me.length;he++)pe[he]=he;l===void 0&&(l=j(me)),u===void 0&&(u=j(me))}(k,B),o||!c||u)if(o&&c&&l^u)b=l?1:0,k=_(k,B,D);else if(!o&&c&&u)b=l?1:0,k=T(k,B,D),k=_(k,B);else if(!o||l||c||u){if(o&&!c&&l^u)k=_(k,B),l?(b=0,k=T(k,B,D)):(b=1,k=T(k,B,D),k=_(k,B));else if(o&&l&&!c&&u)b=1,k=T(k,B,D),k=_(k,B);else if(!o&&!c&&l^u){var X=d;l?(b=1,k=T(k,B,D),b=0,d=!1,k=T(k,B,D),d=X):(b=0,k=T(k,B,D),k=_(k,B),b=1,d=!1,k=T(k,B,D),d=X,k=_(k,B))}}else b=0,k=T(k,B,D);else b=l?1:0,k=T(k,B,D);return k},this.__bidiEngine__.setOptions=function(k){k&&(o=k.isInputVisual,c=k.isOutputVisual,l=k.isInputRtl,u=k.isOutputRtl,d=k.isSymmetricSwapping)},this.__bidiEngine__.setOptions(n),this.__bidiEngine__};var e=["BN","BN","BN","BN","BN","BN","BN","BN","BN","S","B","S","WS","B","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","B","B","B","S","WS","N","N","ET","ET","ET","N","N","N","N","N","ES","CS","ES","CS","CS","EN","EN","EN","EN","EN","EN","EN","EN","EN","EN","CS","N","N","N","N","N","N","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","N","N","N","N","N","N","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","N","N","N","N","BN","BN","BN","BN","BN","BN","B","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","CS","N","ET","ET","ET","ET","N","N","N","N","L","N","N","BN","N","N","ET","ET","EN","EN","N","L","N","N","N","EN","L","N","N","N","N","N","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","N","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","N","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","N","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","N","N","L","L","L","L","L","L","L","N","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","N","L","N","N","N","N","N","ET","N","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","R","NSM","R","NSM","NSM","R","NSM","NSM","R","NSM","N","N","N","N","N","N","N","N","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","N","N","N","N","N","R","R","R","R","R","N","N","N","N","N","N","N","N","N","N","N","AN","AN","AN","AN","AN","AN","N","N","AL","ET","ET","AL","CS","AL","N","N","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","AL","AL","N","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","AN","AN","AN","AN","AN","AN","AN","AN","AN","AN","ET","AN","AN","AL","AL","AL","NSM","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","NSM","NSM","NSM","NSM","NSM","NSM","NSM","AN","N","NSM","NSM","NSM","NSM","NSM","NSM","AL","AL","NSM","NSM","N","NSM","NSM","NSM","NSM","AL","AL","EN","EN","EN","EN","EN","EN","EN","EN","EN","EN","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","N","AL","AL","NSM","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","N","N","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","AL","N","N","N","N","N","N","N","N","N","N","N","N","N","N","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","R","R","N","N","N","N","R","N","N","N","N","N","WS","WS","WS","WS","WS","WS","WS","WS","WS","WS","WS","BN","BN","BN","L","R","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","WS","B","LRE","RLE","PDF","LRO","RLO","CS","ET","ET","ET","ET","ET","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","CS","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","WS","BN","BN","BN","BN","BN","N","LRI","RLI","FSI","PDI","BN","BN","BN","BN","BN","BN","EN","L","N","N","EN","EN","EN","EN","EN","EN","ES","ES","N","N","N","L","EN","EN","EN","EN","EN","EN","EN","EN","EN","EN","ES","ES","N","N","N","N","L","L","L","L","L","L","L","L","L","L","L","L","L","N","N","N","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","L","L","L","L","L","L","L","N","N","N","N","N","N","N","N","N","N","N","N","L","L","L","L","L","N","N","N","N","N","R","NSM","R","R","R","R","R","R","R","R","R","R","ES","R","R","R","R","R","R","R","R","R","R","R","R","R","N","R","R","R","R","R","N","R","N","R","R","N","R","R","N","R","R","R","R","R","R","R","R","R","R","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","CS","N","CS","N","N","CS","N","N","N","N","N","N","N","N","N","ET","N","N","ES","ES","N","N","N","N","N","ET","ET","N","N","N","N","N","AL","AL","AL","AL","AL","N","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","N","N","BN","N","N","N","ET","ET","ET","N","N","N","N","N","ES","CS","ES","CS","CS","EN","EN","EN","EN","EN","EN","EN","EN","EN","EN","CS","N","N","N","N","N","N","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","N","N","N","N","N","N","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","N","N","N","N","N","N","N","N","N","N","N","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","N","N","N","L","L","L","L","L","L","N","N","L","L","L","L","L","L","N","N","L","L","L","L","L","L","N","N","L","L","L","N","N","N","ET","ET","N","N","N","ET","ET","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N"],r=new t.__bidiEngine__({isInputVisual:!0});t.API.events.push(["postProcessText",function(n){var a=n.text;n.x,n.y;var s=n.options||{};n.mutex,s.lang;var o=[];if(s.isInputVisual=typeof s.isInputVisual!="boolean"||s.isInputVisual,r.setOptions(s),Object.prototype.toString.call(a)==="[object Array]"){var l=0;for(o=[],l=0;l<a.length;l+=1)Object.prototype.toString.call(a[l])==="[object Array]"?o.push([r.doBidiReorder(a[l][0]),a[l][1],a[l][2]]):o.push([r.doBidiReorder(a[l])]);n.text=o}else n.text=r.doBidiReorder(a);r.setOptions({isInputVisual:!0})}])}(rn),rn.API.TTFFont=function(){function t(e){var r;if(this.rawData=e,r=this.contents=new _m(e),this.contents.pos=4,r.readString(4)==="ttcf")throw new Error("TTCF not supported.");r.pos=0,this.parse(),this.subset=new gPe(this),this.registerTTF()}return t.open=function(e){return new t(e)},t.prototype.parse=function(){return this.directory=new nPe(this.contents),this.head=new sPe(this),this.name=new uPe(this),this.cmap=new Rre(this),this.toUnicode={},this.hhea=new iPe(this),this.maxp=new dPe(this),this.hmtx=new fPe(this),this.post=new lPe(this),this.os2=new oPe(this),this.loca=new pPe(this),this.glyf=new hPe(this),this.ascender=this.os2.exists&&this.os2.ascender||this.hhea.ascender,this.decender=this.os2.exists&&this.os2.decender||this.hhea.decender,this.lineGap=this.os2.exists&&this.os2.lineGap||this.hhea.lineGap,this.bbox=[this.head.xMin,this.head.yMin,this.head.xMax,this.head.yMax]},t.prototype.registerTTF=function(){var e,r,n,a,s;if(this.scaleFactor=1e3/this.head.unitsPerEm,this.bbox=(function(){var o,l,c,u;for(u=[],o=0,l=(c=this.bbox).length;o<l;o++)e=c[o],u.push(Math.round(e*this.scaleFactor));return u}).call(this),this.stemV=0,this.post.exists?(n=255&(a=this.post.italic_angle),32768&(r=a>>16)&&(r=-(1+(65535^r))),this.italicAngle=+(r+"."+n)):this.italicAngle=0,this.ascender=Math.round(this.ascender*this.scaleFactor),this.decender=Math.round(this.decender*this.scaleFactor),this.lineGap=Math.round(this.lineGap*this.scaleFactor),this.capHeight=this.os2.exists&&this.os2.capHeight||this.ascender,this.xHeight=this.os2.exists&&this.os2.xHeight||0,this.familyClass=(this.os2.exists&&this.os2.familyClass||0)>>8,this.isSerif=(s=this.familyClass)===1||s===2||s===3||s===4||s===5||s===7,this.isScript=this.familyClass===10,this.flags=0,this.post.isFixedPitch&&(this.flags|=1),this.isSerif&&(this.flags|=2),this.isScript&&(this.flags|=8),this.italicAngle!==0&&(this.flags|=64),this.flags|=32,!this.cmap.unicode)throw new Error("No unicode cmap for font")},t.prototype.characterToGlyph=function(e){var r;return((r=this.cmap.unicode)!=null?r.codeMap[e]:void 0)||0},t.prototype.widthOfGlyph=function(e){var r;return r=1e3/this.head.unitsPerEm,this.hmtx.forGlyph(e).advance*r},t.prototype.widthOfString=function(e,r,n){var a,s,o,l;for(o=0,s=0,l=(e=""+e).length;0<=l?s<l:s>l;s=0<=l?++s:--s)a=e.charCodeAt(s),o+=this.widthOfGlyph(this.characterToGlyph(a))+n*(1e3/r)||0;return o*(r/1e3)},t.prototype.lineHeight=function(e,r){var n;return r==null&&(r=!1),n=r?this.lineGap:0,(this.ascender+n-this.decender)/1e3*e},t}();var jf,_m=function(){function t(e){this.data=e??[],this.pos=0,this.length=this.data.length}return t.prototype.readByte=function(){return this.data[this.pos++]},t.prototype.writeByte=function(e){return this.data[this.pos++]=e},t.prototype.readUInt32=function(){return 16777216*this.readByte()+(this.readByte()<<16)+(this.readByte()<<8)+this.readByte()},t.prototype.writeUInt32=function(e){return this.writeByte(e>>>24&255),this.writeByte(e>>16&255),this.writeByte(e>>8&255),this.writeByte(255&e)},t.prototype.readInt32=function(){var e;return(e=this.readUInt32())>=2147483648?e-4294967296:e},t.prototype.writeInt32=function(e){return e<0&&(e+=4294967296),this.writeUInt32(e)},t.prototype.readUInt16=function(){return this.readByte()<<8|this.readByte()},t.prototype.writeUInt16=function(e){return this.writeByte(e>>8&255),this.writeByte(255&e)},t.prototype.readInt16=function(){var e;return(e=this.readUInt16())>=32768?e-65536:e},t.prototype.writeInt16=function(e){return e<0&&(e+=65536),this.writeUInt16(e)},t.prototype.readString=function(e){var r,n;for(n=[],r=0;0<=e?r<e:r>e;r=0<=e?++r:--r)n[r]=String.fromCharCode(this.readByte());return n.join("")},t.prototype.writeString=function(e){var r,n,a;for(a=[],r=0,n=e.length;0<=n?r<n:r>n;r=0<=n?++r:--r)a.push(this.writeByte(e.charCodeAt(r)));return a},t.prototype.readShort=function(){return this.readInt16()},t.prototype.writeShort=function(e){return this.writeInt16(e)},t.prototype.readLongLong=function(){var e,r,n,a,s,o,l,c;return e=this.readByte(),r=this.readByte(),n=this.readByte(),a=this.readByte(),s=this.readByte(),o=this.readByte(),l=this.readByte(),c=this.readByte(),128&e?-1*(72057594037927940*(255^e)+281474976710656*(255^r)+1099511627776*(255^n)+4294967296*(255^a)+16777216*(255^s)+65536*(255^o)+256*(255^l)+(255^c)+1):72057594037927940*e+281474976710656*r+1099511627776*n+4294967296*a+16777216*s+65536*o+256*l+c},t.prototype.writeLongLong=function(e){var r,n;return r=Math.floor(e/4294967296),n=4294967295&e,this.writeByte(r>>24&255),this.writeByte(r>>16&255),this.writeByte(r>>8&255),this.writeByte(255&r),this.writeByte(n>>24&255),this.writeByte(n>>16&255),this.writeByte(n>>8&255),this.writeByte(255&n)},t.prototype.readInt=function(){return this.readInt32()},t.prototype.writeInt=function(e){return this.writeInt32(e)},t.prototype.read=function(e){var r,n;for(r=[],n=0;0<=e?n<e:n>e;n=0<=e?++n:--n)r.push(this.readByte());return r},t.prototype.write=function(e){var r,n,a,s;for(s=[],n=0,a=e.length;n<a;n++)r=e[n],s.push(this.writeByte(r));return s},t}(),nPe=function(){var t;function e(r){var n,a,s;for(this.scalarType=r.readInt(),this.tableCount=r.readShort(),this.searchRange=r.readShort(),this.entrySelector=r.readShort(),this.rangeShift=r.readShort(),this.tables={},a=0,s=this.tableCount;0<=s?a<s:a>s;a=0<=s?++a:--a)n={tag:r.readString(4),checksum:r.readInt(),offset:r.readInt(),length:r.readInt()},this.tables[n.tag]=n}return e.prototype.encode=function(r){var n,a,s,o,l,c,u,d,f,A,h,m,p;for(p in h=Object.keys(r).length,c=Math.log(2),f=16*Math.floor(Math.log(h)/c),o=Math.floor(f/c),d=16*h-f,(a=new _m).writeInt(this.scalarType),a.writeShort(h),a.writeShort(f),a.writeShort(o),a.writeShort(d),s=16*h,u=a.pos+s,l=null,m=[],r)for(A=r[p],a.writeString(p),a.writeInt(t(A)),a.writeInt(u),a.writeInt(A.length),m=m.concat(A),p==="head"&&(l=u),u+=A.length;u%4;)m.push(0),u++;return a.write(m),n=2981146554-t(a.data),a.pos=l+8,a.writeUInt32(n),a.data},t=function(r){var n,a,s,o;for(r=Mre.call(r);r.length%4;)r.push(0);for(s=new _m(r),a=0,n=0,o=r.length;n<o;n=n+=4)a+=s.readUInt32();return 4294967295&a},e}(),aPe={}.hasOwnProperty,mh=function(t,e){for(var r in e)aPe.call(e,r)&&(t[r]=e[r]);function n(){this.constructor=t}return n.prototype=e.prototype,t.prototype=new n,t.__super__=e.prototype,t};jf=function(){function t(e){var r;this.file=e,r=this.file.directory.tables[this.tag],this.exists=!!r,r&&(this.offset=r.offset,this.length=r.length,this.parse(this.file.contents))}return t.prototype.parse=function(){},t.prototype.encode=function(){},t.prototype.raw=function(){return this.exists?(this.file.contents.pos=this.offset,this.file.contents.read(this.length)):null},t}();var sPe=function(){function t(){return t.__super__.constructor.apply(this,arguments)}return mh(t,jf),t.prototype.tag="head",t.prototype.parse=function(e){return e.pos=this.offset,this.version=e.readInt(),this.revision=e.readInt(),this.checkSumAdjustment=e.readInt(),this.magicNumber=e.readInt(),this.flags=e.readShort(),this.unitsPerEm=e.readShort(),this.created=e.readLongLong(),this.modified=e.readLongLong(),this.xMin=e.readShort(),this.yMin=e.readShort(),this.xMax=e.readShort(),this.yMax=e.readShort(),this.macStyle=e.readShort(),this.lowestRecPPEM=e.readShort(),this.fontDirectionHint=e.readShort(),this.indexToLocFormat=e.readShort(),this.glyphDataFormat=e.readShort()},t.prototype.encode=function(e){var r;return(r=new _m).writeInt(this.version),r.writeInt(this.revision),r.writeInt(this.checkSumAdjustment),r.writeInt(this.magicNumber),r.writeShort(this.flags),r.writeShort(this.unitsPerEm),r.writeLongLong(this.created),r.writeLongLong(this.modified),r.writeShort(this.xMin),r.writeShort(this.yMin),r.writeShort(this.xMax),r.writeShort(this.yMax),r.writeShort(this.macStyle),r.writeShort(this.lowestRecPPEM),r.writeShort(this.fontDirectionHint),r.writeShort(e),r.writeShort(this.glyphDataFormat),r.data},t}(),HV=function(){function t(e,r){var n,a,s,o,l,c,u,d,f,A,h,m,p,x,v,y,b;switch(this.platformID=e.readUInt16(),this.encodingID=e.readShort(),this.offset=r+e.readInt(),f=e.pos,e.pos=this.offset,this.format=e.readUInt16(),this.length=e.readUInt16(),this.language=e.readUInt16(),this.isUnicode=this.platformID===3&&this.encodingID===1&&this.format===4||this.platformID===0&&this.format===4,this.codeMap={},this.format){case 0:for(c=0;c<256;++c)this.codeMap[c]=e.readByte();break;case 4:for(h=e.readUInt16(),A=h/2,e.pos+=6,s=function(){var w,j;for(j=[],c=w=0;0<=A?w<A:w>A;c=0<=A?++w:--w)j.push(e.readUInt16());return j}(),e.pos+=2,p=function(){var w,j;for(j=[],c=w=0;0<=A?w<A:w>A;c=0<=A?++w:--w)j.push(e.readUInt16());return j}(),u=function(){var w,j;for(j=[],c=w=0;0<=A?w<A:w>A;c=0<=A?++w:--w)j.push(e.readUInt16());return j}(),d=function(){var w,j;for(j=[],c=w=0;0<=A?w<A:w>A;c=0<=A?++w:--w)j.push(e.readUInt16());return j}(),a=(this.length-e.pos+this.offset)/2,l=function(){var w,j;for(j=[],c=w=0;0<=a?w<a:w>a;c=0<=a?++w:--w)j.push(e.readUInt16());return j}(),c=v=0,b=s.length;v<b;c=++v)for(x=s[c],n=y=m=p[c];m<=x?y<=x:y>=x;n=m<=x?++y:--y)d[c]===0?o=n+u[c]:(o=l[d[c]/2+(n-m)-(A-c)]||0)!==0&&(o+=u[c]),this.codeMap[n]=65535&o}e.pos=f}return t.encode=function(e,r){var n,a,s,o,l,c,u,d,f,A,h,m,p,x,v,y,b,w,j,I,_,S,E,T,k,B,D,X,me,pe,he,ve,ae,Pe,ke,O,G,z,U,Y,ee,M,H,te,Ce,V;switch(X=new _m,o=Object.keys(e).sort(function(We,ie){return We-ie}),r){case"macroman":for(p=0,x=function(){var We=[];for(m=0;m<256;++m)We.push(0);return We}(),y={0:0},s={},me=0,ae=o.length;me<ae;me++)y[H=e[a=o[me]]]==null&&(y[H]=++p),s[a]={old:e[a],new:y[e[a]]},x[a]=y[e[a]];return X.writeUInt16(1),X.writeUInt16(0),X.writeUInt32(12),X.writeUInt16(0),X.writeUInt16(262),X.writeUInt16(0),X.write(x),{charMap:s,subtable:X.data,maxGlyphID:p+1};case"unicode":for(B=[],f=[],b=0,y={},n={},v=u=null,pe=0,Pe=o.length;pe<Pe;pe++)y[j=e[a=o[pe]]]==null&&(y[j]=++b),n[a]={old:j,new:y[j]},l=y[j]-a,v!=null&&l===u||(v&&f.push(v),B.push(a),u=l),v=a;for(v&&f.push(v),f.push(65535),B.push(65535),T=2*(E=B.length),S=2*Math.pow(Math.log(E)/Math.LN2,2),A=Math.log(S/2)/Math.LN2,_=2*E-S,c=[],I=[],h=[],m=he=0,ke=B.length;he<ke;m=++he){if(k=B[m],d=f[m],k===65535){c.push(0),I.push(0);break}if(k-(D=n[k].new)>=32768)for(c.push(0),I.push(2*(h.length+E-m)),a=ve=k;k<=d?ve<=d:ve>=d;a=k<=d?++ve:--ve)h.push(n[a].new);else c.push(D-k),I.push(0)}for(X.writeUInt16(3),X.writeUInt16(1),X.writeUInt32(12),X.writeUInt16(4),X.writeUInt16(16+8*E+2*h.length),X.writeUInt16(0),X.writeUInt16(T),X.writeUInt16(S),X.writeUInt16(A),X.writeUInt16(_),ee=0,O=f.length;ee<O;ee++)a=f[ee],X.writeUInt16(a);for(X.writeUInt16(0),M=0,G=B.length;M<G;M++)a=B[M],X.writeUInt16(a);for(te=0,z=c.length;te<z;te++)l=c[te],X.writeUInt16(l);for(Ce=0,U=I.length;Ce<U;Ce++)w=I[Ce],X.writeUInt16(w);for(V=0,Y=h.length;V<Y;V++)p=h[V],X.writeUInt16(p);return{charMap:n,subtable:X.data,maxGlyphID:b+1}}},t}(),Rre=function(){function t(){return t.__super__.constructor.apply(this,arguments)}return mh(t,jf),t.prototype.tag="cmap",t.prototype.parse=function(e){var r,n,a;for(e.pos=this.offset,this.version=e.readUInt16(),a=e.readUInt16(),this.tables=[],this.unicode=null,n=0;0<=a?n<a:n>a;n=0<=a?++n:--n)r=new HV(e,this.offset),this.tables.push(r),r.isUnicode&&this.unicode==null&&(this.unicode=r);return!0},t.encode=function(e,r){var n,a;return r==null&&(r="macroman"),n=HV.encode(e,r),(a=new _m).writeUInt16(0),a.writeUInt16(1),n.table=a.data.concat(n.subtable),n},t}(),iPe=function(){function t(){return t.__super__.constructor.apply(this,arguments)}return mh(t,jf),t.prototype.tag="hhea",t.prototype.parse=function(e){return e.pos=this.offset,this.version=e.readInt(),this.ascender=e.readShort(),this.decender=e.readShort(),this.lineGap=e.readShort(),this.advanceWidthMax=e.readShort(),this.minLeftSideBearing=e.readShort(),this.minRightSideBearing=e.readShort(),this.xMaxExtent=e.readShort(),this.caretSlopeRise=e.readShort(),this.caretSlopeRun=e.readShort(),this.caretOffset=e.readShort(),e.pos+=8,this.metricDataFormat=e.readShort(),this.numberOfMetrics=e.readUInt16()},t}(),oPe=function(){function t(){return t.__super__.constructor.apply(this,arguments)}return mh(t,jf),t.prototype.tag="OS/2",t.prototype.parse=function(e){if(e.pos=this.offset,this.version=e.readUInt16(),this.averageCharWidth=e.readShort(),this.weightClass=e.readUInt16(),this.widthClass=e.readUInt16(),this.type=e.readShort(),this.ySubscriptXSize=e.readShort(),this.ySubscriptYSize=e.readShort(),this.ySubscriptXOffset=e.readShort(),this.ySubscriptYOffset=e.readShort(),this.ySuperscriptXSize=e.readShort(),this.ySuperscriptYSize=e.readShort(),this.ySuperscriptXOffset=e.readShort(),this.ySuperscriptYOffset=e.readShort(),this.yStrikeoutSize=e.readShort(),this.yStrikeoutPosition=e.readShort(),this.familyClass=e.readShort(),this.panose=function(){var r,n;for(n=[],r=0;r<10;++r)n.push(e.readByte());return n}(),this.charRange=function(){var r,n;for(n=[],r=0;r<4;++r)n.push(e.readInt());return n}(),this.vendorID=e.readString(4),this.selection=e.readShort(),this.firstCharIndex=e.readShort(),this.lastCharIndex=e.readShort(),this.version>0&&(this.ascent=e.readShort(),this.descent=e.readShort(),this.lineGap=e.readShort(),this.winAscent=e.readShort(),this.winDescent=e.readShort(),this.codePageRange=function(){var r,n;for(n=[],r=0;r<2;r=++r)n.push(e.readInt());return n}(),this.version>1))return this.xHeight=e.readShort(),this.capHeight=e.readShort(),this.defaultChar=e.readShort(),this.breakChar=e.readShort(),this.maxContext=e.readShort()},t}(),lPe=function(){function t(){return t.__super__.constructor.apply(this,arguments)}return mh(t,jf),t.prototype.tag="post",t.prototype.parse=function(e){var r,n,a;switch(e.pos=this.offset,this.format=e.readInt(),this.italicAngle=e.readInt(),this.underlinePosition=e.readShort(),this.underlineThickness=e.readShort(),this.isFixedPitch=e.readInt(),this.minMemType42=e.readInt(),this.maxMemType42=e.readInt(),this.minMemType1=e.readInt(),this.maxMemType1=e.readInt(),this.format){case 65536:case 196608:break;case 131072:var s;for(n=e.readUInt16(),this.glyphNameIndex=[],s=0;0<=n?s<n:s>n;s=0<=n?++s:--s)this.glyphNameIndex.push(e.readUInt16());for(this.names=[],a=[];e.pos<this.offset+this.length;)r=e.readByte(),a.push(this.names.push(e.readString(r)));return a;case 151552:return n=e.readUInt16(),this.offsets=e.read(n);case 262144:return this.map=(function(){var o,l,c;for(c=[],s=o=0,l=this.file.maxp.numGlyphs;0<=l?o<l:o>l;s=0<=l?++o:--o)c.push(e.readUInt32());return c}).call(this)}},t}(),cPe=function(t,e){this.raw=t,this.length=t.length,this.platformID=e.platformID,this.encodingID=e.encodingID,this.languageID=e.languageID},uPe=function(){function t(){return t.__super__.constructor.apply(this,arguments)}return mh(t,jf),t.prototype.tag="name",t.prototype.parse=function(e){var r,n,a,s,o,l,c,u,d,f,A;for(e.pos=this.offset,e.readShort(),r=e.readShort(),l=e.readShort(),n=[],s=0;0<=r?s<r:s>r;s=0<=r?++s:--s)n.push({platformID:e.readShort(),encodingID:e.readShort(),languageID:e.readShort(),nameID:e.readShort(),length:e.readShort(),offset:this.offset+l+e.readShort()});for(c={},s=d=0,f=n.length;d<f;s=++d)a=n[s],e.pos=a.offset,u=e.readString(a.length),o=new cPe(u,a),c[A=a.nameID]==null&&(c[A]=[]),c[a.nameID].push(o);this.strings=c,this.copyright=c[0],this.fontFamily=c[1],this.fontSubfamily=c[2],this.uniqueSubfamily=c[3],this.fontName=c[4],this.version=c[5];try{this.postscriptName=c[6][0].raw.replace(/[\x00-\x19\x80-\xff]/g,"")}catch{this.postscriptName=c[4][0].raw.replace(/[\x00-\x19\x80-\xff]/g,"")}return this.trademark=c[7],this.manufacturer=c[8],this.designer=c[9],this.description=c[10],this.vendorUrl=c[11],this.designerUrl=c[12],this.license=c[13],this.licenseUrl=c[14],this.preferredFamily=c[15],this.preferredSubfamily=c[17],this.compatibleFull=c[18],this.sampleText=c[19]},t}(),dPe=function(){function t(){return t.__super__.constructor.apply(this,arguments)}return mh(t,jf),t.prototype.tag="maxp",t.prototype.parse=function(e){return e.pos=this.offset,this.version=e.readInt(),this.numGlyphs=e.readUInt16(),this.maxPoints=e.readUInt16(),this.maxContours=e.readUInt16(),this.maxCompositePoints=e.readUInt16(),this.maxComponentContours=e.readUInt16(),this.maxZones=e.readUInt16(),this.maxTwilightPoints=e.readUInt16(),this.maxStorage=e.readUInt16(),this.maxFunctionDefs=e.readUInt16(),this.maxInstructionDefs=e.readUInt16(),this.maxStackElements=e.readUInt16(),this.maxSizeOfInstructions=e.readUInt16(),this.maxComponentElements=e.readUInt16(),this.maxComponentDepth=e.readUInt16()},t}(),fPe=function(){function t(){return t.__super__.constructor.apply(this,arguments)}return mh(t,jf),t.prototype.tag="hmtx",t.prototype.parse=function(e){var r,n,a,s,o,l,c;for(e.pos=this.offset,this.metrics=[],r=0,l=this.file.hhea.numberOfMetrics;0<=l?r<l:r>l;r=0<=l?++r:--r)this.metrics.push({advance:e.readUInt16(),lsb:e.readInt16()});for(a=this.file.maxp.numGlyphs-this.file.hhea.numberOfMetrics,this.leftSideBearings=function(){var u,d;for(d=[],r=u=0;0<=a?u<a:u>a;r=0<=a?++u:--u)d.push(e.readInt16());return d}(),this.widths=(function(){var u,d,f,A;for(A=[],u=0,d=(f=this.metrics).length;u<d;u++)s=f[u],A.push(s.advance);return A}).call(this),n=this.widths[this.widths.length-1],c=[],r=o=0;0<=a?o<a:o>a;r=0<=a?++o:--o)c.push(this.widths.push(n));return c},t.prototype.forGlyph=function(e){return e in this.metrics?this.metrics[e]:{advance:this.metrics[this.metrics.length-1].advance,lsb:this.leftSideBearings[e-this.metrics.length]}},t}(),Mre=[].slice,hPe=function(){function t(){return t.__super__.constructor.apply(this,arguments)}return mh(t,jf),t.prototype.tag="glyf",t.prototype.parse=function(){return this.cache={}},t.prototype.glyphFor=function(e){var r,n,a,s,o,l,c,u,d,f;return e in this.cache?this.cache[e]:(s=this.file.loca,r=this.file.contents,n=s.indexOf(e),(a=s.lengthOf(e))===0?this.cache[e]=null:(r.pos=this.offset+n,o=(l=new _m(r.read(a))).readShort(),u=l.readShort(),f=l.readShort(),c=l.readShort(),d=l.readShort(),this.cache[e]=o===-1?new mPe(l,u,f,c,d):new APe(l,o,u,f,c,d),this.cache[e]))},t.prototype.encode=function(e,r,n){var a,s,o,l,c;for(o=[],s=[],l=0,c=r.length;l<c;l++)a=e[r[l]],s.push(o.length),a&&(o=o.concat(a.encode(n)));return s.push(o.length),{table:o,offsets:s}},t}(),APe=function(){function t(e,r,n,a,s,o){this.raw=e,this.numberOfContours=r,this.xMin=n,this.yMin=a,this.xMax=s,this.yMax=o,this.compound=!1}return t.prototype.encode=function(){return this.raw.data},t}(),mPe=function(){function t(e,r,n,a,s){var o,l;for(this.raw=e,this.xMin=r,this.yMin=n,this.xMax=a,this.yMax=s,this.compound=!0,this.glyphIDs=[],this.glyphOffsets=[],o=this.raw;l=o.readShort(),this.glyphOffsets.push(o.pos),this.glyphIDs.push(o.readUInt16()),32&l;)o.pos+=1&l?4:2,128&l?o.pos+=8:64&l?o.pos+=4:8&l&&(o.pos+=2)}return t.prototype.encode=function(){var e,r,n;for(r=new _m(Mre.call(this.raw.data)),e=0,n=this.glyphIDs.length;e<n;++e)r.pos=this.glyphOffsets[e];return r.data},t}(),pPe=function(){function t(){return t.__super__.constructor.apply(this,arguments)}return mh(t,jf),t.prototype.tag="loca",t.prototype.parse=function(e){var r,n;return e.pos=this.offset,r=this.file.head.indexToLocFormat,this.offsets=r===0?(function(){var a,s;for(s=[],n=0,a=this.length;n<a;n+=2)s.push(2*e.readUInt16());return s}).call(this):(function(){var a,s;for(s=[],n=0,a=this.length;n<a;n+=4)s.push(e.readUInt32());return s}).call(this)},t.prototype.indexOf=function(e){return this.offsets[e]},t.prototype.lengthOf=function(e){return this.offsets[e+1]-this.offsets[e]},t.prototype.encode=function(e,r){for(var n=new Uint32Array(this.offsets.length),a=0,s=0,o=0;o<n.length;++o)if(n[o]=a,s<r.length&&r[s]==o){++s,n[o]=a;var l=this.offsets[o],c=this.offsets[o+1]-l;c>0&&(a+=c)}for(var u=new Array(4*n.length),d=0;d<n.length;++d)u[4*d+3]=255&n[d],u[4*d+2]=(65280&n[d])>>8,u[4*d+1]=(16711680&n[d])>>16,u[4*d]=(4278190080&n[d])>>24;return u},t}(),gPe=function(){function t(e){this.font=e,this.subset={},this.unicodes={},this.next=33}return t.prototype.generateCmap=function(){var e,r,n,a,s;for(r in a=this.font.cmap.tables[0].codeMap,e={},s=this.subset)n=s[r],e[r]=a[n];return e},t.prototype.glyphsFor=function(e){var r,n,a,s,o,l,c;for(a={},o=0,l=e.length;o<l;o++)a[s=e[o]]=this.font.glyf.glyphFor(s);for(s in r=[],a)(n=a[s])!=null&&n.compound&&r.push.apply(r,n.glyphIDs);if(r.length>0)for(s in c=this.glyphsFor(r))n=c[s],a[s]=n;return a},t.prototype.encode=function(e,r){var n,a,s,o,l,c,u,d,f,A,h,m,p,x,v;for(a in n=Rre.encode(this.generateCmap(),"unicode"),o=this.glyphsFor(e),h={0:0},v=n.charMap)h[(c=v[a]).old]=c.new;for(m in A=n.maxGlyphID,o)m in h||(h[m]=A++);return d=function(y){var b,w;for(b in w={},y)w[y[b]]=b;return w}(h),f=Object.keys(d).sort(function(y,b){return y-b}),p=function(){var y,b,w;for(w=[],y=0,b=f.length;y<b;y++)l=f[y],w.push(d[l]);return w}(),s=this.font.glyf.encode(o,p,h),u=this.font.loca.encode(s.offsets,p),x={cmap:this.font.cmap.raw(),glyf:s.table,loca:u,hmtx:this.font.hmtx.raw(),hhea:this.font.hhea.raw(),maxp:this.font.maxp.raw(),post:this.font.post.raw(),name:this.font.name.raw(),head:this.font.head.encode(r)},this.font.os2.exists&&(x["OS/2"]=this.font.os2.raw()),this.font.directory.encode(x)},t}();rn.API.PDFObject=function(){var t;function e(){}return t=function(r,n){return(Array(n+1).join("0")+r).slice(-n)},e.convert=function(r){var n,a,s,o;if(Array.isArray(r))return"["+function(){var l,c,u;for(u=[],l=0,c=r.length;l<c;l++)n=r[l],u.push(e.convert(n));return u}().join(" ")+"]";if(typeof r=="string")return"/"+r;if(r!=null&&r.isString)return"("+r+")";if(r instanceof Date)return"(D:"+t(r.getUTCFullYear(),4)+t(r.getUTCMonth(),2)+t(r.getUTCDate(),2)+t(r.getUTCHours(),2)+t(r.getUTCMinutes(),2)+t(r.getUTCSeconds(),2)+"Z)";if({}.toString.call(r)==="[object Object]"){for(a in s=["<<"],r)o=r[a],s.push("/"+a+" "+e.convert(o));return s.push(">>"),s.join(`
`)}return""+r},e}();const $k=Object.freeze(Object.defineProperty({__proto__:null,AcroForm:zje,AcroFormAppearance:ln,AcroFormButton:bo,AcroFormCheckBox:Ib,AcroFormChoiceField:Op,AcroFormComboBox:Rp,AcroFormEditBox:Eb,AcroFormListBox:Dp,AcroFormPasswordField:jb,AcroFormPushButton:Sb,AcroFormRadioButton:Mp,AcroFormTextField:dm,GState:I2,ShadingPattern:M0,TilingPattern:Cp,default:rn,jsPDF:rn},Symbol.toStringTag,{value:"Module"}));async function $V(t){const e={...t,remaining:t.quantity,status:"PENDIENTE",createdAt:Ar.now()};return Jn(mt(Se,"inventory_batches"),e)}async function Lre(t,e){await kn(Gt(Se,"inventory_batches",t),{status:"PAGADO",paidAmount:null,paidAt:Ar.now()})}async function xPe(t,e){const r=Yt(mt(Se,"batch_allocations"),cr("saleDate",">=",t),cr("saleDate","<=",e)),n=await kt(r),a={};return n.forEach(s=>{const o=s.data(),l=o.batchId;a[l]||(a[l]={batchId:o.batchId,batchDate:o.batchDate,productName:o.productName,quantity:0,amountCharged:0}),a[l].quantity+=Number(o.quantity||0),a[l].amountCharged+=Number(o.amountCharged||0)}),Object.values(a)}async function Ure(t){const e=Gt(Se,"salesV2",t),r=await zs(e);if(!r.exists())throw new Error("La venta no existe.");const n=r.data(),a=[];if(Array.isArray(n.items)){for(const l of n.items)if(Array.isArray(l==null?void 0:l.allocations))for(const c of l.allocations){const u=String((c==null?void 0:c.batchId)||"").trim(),d=Number((c==null?void 0:c.qty)||0);u&&d&&a.push({batchId:u,qty:d})}}if(Array.isArray(n.allocations))for(const l of n.allocations){const c=String((l==null?void 0:l.batchId)||"").trim(),u=Number((l==null?void 0:l.qty)||0);c&&u&&a.push({batchId:c,qty:u})}if(a.length===0)return await Gs(Se,async l=>{l.delete(e)}),{restored:0};const s=new Map;for(const l of a)s.set(l.batchId,Number((s.get(l.batchId)||0)+l.qty));let o=0;return await Gs(Se,async l=>{const c=Array.from(s.entries()),u=c.map(([f])=>Gt(Se,"inventory_batches",f)),d=await Promise.all(u.map(f=>l.get(f)));c.forEach(([f,A],h)=>{const m=d[h];if(!m.exists())return;const p=m.data(),x=Number((p==null?void 0:p.remaining)??0),v=Number((x+Number(A||0)).toFixed(3));l.update(u[h],{remaining:v}),o+=Number(A||0)}),l.delete(e)}),{restored:o}}var Qre={color:void 0,size:void 0,className:void 0,style:void 0,attr:void 0},GV=Wo.createContext&&Wo.createContext(Qre),vPe=["attr","size","title"];function yPe(t,e){if(t==null)return{};var r=bPe(t,e),n,a;if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(t);for(a=0;a<s.length;a++)n=s[a],!(e.indexOf(n)>=0)&&Object.prototype.propertyIsEnumerable.call(t,n)&&(r[n]=t[n])}return r}function bPe(t,e){if(t==null)return{};var r={};for(var n in t)if(Object.prototype.hasOwnProperty.call(t,n)){if(e.indexOf(n)>=0)continue;r[n]=t[n]}return r}function FS(){return FS=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var r=arguments[e];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(t[n]=r[n])}return t},FS.apply(this,arguments)}function KV(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter(function(a){return Object.getOwnPropertyDescriptor(t,a).enumerable})),r.push.apply(r,n)}return r}function OS(t){for(var e=1;e<arguments.length;e++){var r=arguments[e]!=null?arguments[e]:{};e%2?KV(Object(r),!0).forEach(function(n){wPe(t,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):KV(Object(r)).forEach(function(n){Object.defineProperty(t,n,Object.getOwnPropertyDescriptor(r,n))})}return t}function wPe(t,e,r){return e=NPe(e),e in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}function NPe(t){var e=CPe(t,"string");return typeof e=="symbol"?e:e+""}function CPe(t,e){if(typeof t!="object"||!t)return t;var r=t[Symbol.toPrimitive];if(r!==void 0){var n=r.call(t,e);if(typeof n!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}function Vre(t){return t&&t.map((e,r)=>Wo.createElement(e.tag,OS({key:r},e.attr),Vre(e.child)))}function _Pe(t){return e=>Wo.createElement(EPe,FS({attr:OS({},t.attr)},e),Vre(t.child))}function EPe(t){var e=r=>{var{attr:n,size:a,title:s}=t,o=yPe(t,vPe),l=a||r.size||"1em",c;return r.className&&(c=r.className),t.className&&(c=(c?c+" ":"")+t.className),Wo.createElement("svg",FS({stroke:"currentColor",fill:"currentColor",strokeWidth:"0"},r.attr,n,o,{className:c,style:OS(OS({color:t.color||r.color},r.style),t.style),height:l,width:l,xmlns:"http://www.w3.org/2000/svg"}),s&&Wo.createElement("title",null,s),t.children)};return GV!==void 0?Wo.createElement(GV.Consumer,null,r=>e(r)):e(Qre)}function SPe(t){return _Pe({attr:{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"},child:[{tag:"polyline",attr:{points:"23 4 23 10 17 10"},child:[]},{tag:"polyline",attr:{points:"1 20 1 14 7 14"},child:[]},{tag:"path",attr:{d:"M3.51 9a9 9 0 0 1 14.85-3.36L23 10M1 14l4.64 4.36A9 9 0 0 0 20.49 15"},child:[]}]})(t)}function Fc({onClick:t,loading:e,className:r=""}){return i.jsxs("button",{onClick:t,disabled:e,className:`flex items-center gap-2 px-3 py-1.5 rounded-2xl  border 
        bg-white hover:bg-gray-100 text-sm font-medium shadow-2xl
        disabled:opacity-50 disabled:cursor-not-allowed ${r}`,title:"Refrescar datos",children:[i.jsx(SPe,{className:`w-4 h-4 ${e?"animate-spin text-blue-500":""}`}),e?"Actualizando...":"Refrescar"]})}function Oc(){const[t,e]=g.useState(0),r=g.useCallback(()=>e(n=>n+1),[]);return{refreshKey:t,refresh:r}}const hl=t=>Math.round((Number(t)||0)*100)/100,Ih=t=>Math.round((Number(t)||0)*1e3)/1e3,ed=t=>Number(t??0).toFixed(2),jh=t=>Number(t??0).toFixed(3),qV=(t,e)=>{var o;const r=t.date?String(t.date):"",n=(o=t.timestamp)!=null&&o.toDate?Rr(t.timestamp.toDate(),"yyyy-MM-dd"):"";let a=r||n;if(r&&n){const l=new Date(r+"T00:00:00").getTime(),c=new Date(n+"T00:00:00").getTime(),u=Math.abs(l-c)/(1e3*60*60*24);isFinite(u)&&u>30&&(a=n)}if(!a)return[];const s=t.type??"CONTADO";return Array.isArray(t.items)&&t.items.length>0?t.items.map((l,c)=>{const u=Number((l==null?void 0:l.qty)??0),d=Number((l==null?void 0:l.lineFinal)??0)||Math.max(0,Number((l==null?void 0:l.unitPrice)||0)*u-Number((l==null?void 0:l.discount)||0));return{id:`${e}#${c}`,productName:String((l==null?void 0:l.productName)??"(sin nombre)"),quantity:u,amount:hl(d),amountSuggested:Number(t.amountSuggested??0),date:a,userEmail:t.userEmail??t.vendor??"(sin usuario)",clientName:t.clientName??"",amountReceived:Number(t.amountReceived??0),change:String(t.change??"0"),status:t.status??"FLOTANTE",type:s,measurement:String((l==null?void 0:l.measurement)??t.measurement??""),allocations:Array.isArray(l==null?void 0:l.allocations)?l.allocations:t.allocations,avgUnitCost:Number((l==null?void 0:l.avgUnitCost)??t.avgUnitCost??0),cogsAmount:Number((l==null?void 0:l.cogsAmount)??0)}}):[{id:e,productName:t.productName??"(sin nombre)",quantity:Number(t.quantity??0),amount:Number(t.amount??t.amountCharged??0),amountSuggested:Number(t.amountSuggested??0),date:a,userEmail:t.userEmail??t.vendor??"(sin usuario)",clientName:t.clientName??"",amountReceived:Number(t.amountReceived??0),change:String(t.change??"0"),status:t.status??"FLOTANTE",type:s,measurement:String(t.measurement??""),allocations:t.allocations,avgUnitCost:t.avgUnitCost,cogsAmount:t.cogsAmount}]};function IPe({role:t,roles:e}){const[r,n]=g.useState([]),[a,s]=g.useState([]),[o,l]=g.useState(null),[c,u]=g.useState(!0),[d,f]=g.useState(""),[A,h]=g.useState("ALL"),[m,p]=g.useState("ALL"),[x,v]=g.useState({}),[y,b]=g.useState(null),[w,j]=g.useState(0),[I,_]=g.useState(0),[S,E]=g.useState(""),[T,k]=g.useState(0),[B,D]=g.useState("0"),X=Rr(new Date,"yyyy-MM-dd"),[me,pe]=g.useState(X),[he,ve]=g.useState(X),[ae,Pe]=g.useState(!1),[ke,O]=g.useState(!1),[G,z]=g.useState(!1),[U,Y]=g.useState(""),ee=g.useRef(null),{refreshKey:M,refresh:H}=Oc(),te=e&&e.length?e:t,Ce=ebe(te,"bills","cerrarVentas"),V=En(te,"admin"),We=({title:Ne,open:De,onToggle:xt,right:_t})=>i.jsxs("button",{type:"button",onClick:xt,className:"w-full flex items-center justify-between gap-3 px-4 py-3 rounded-xl border bg-gray-50 hover:bg-gray-100 active:bg-gray-200",children:[i.jsxs("div",{className:"flex items-center gap-2 min-w-0",children:[i.jsx("span",{className:"font-semibold truncate",children:Ne}),_t?i.jsx("span",{className:"text-xs text-gray-600",children:_t}):null]}),i.jsx("div",{className:"shrink-0 text-lg font-bold leading-none",children:De?"":"+"})]});g.useEffect(()=>{if(!me||!he)return;u(!0);const Ne=Yt(mt(Se,"salesV2"),cr("date",">=",me),cr("date","<=",he)),De=jd(Ne,xt=>{const _t=[];xt.forEach(Et=>{const Mt=qV(Et.data(),Et.id);_t.push(...Mt)}),n(_t),u(!1)},xt=>{console.error("Error cargando ventas por periodo:",xt),n([]),u(!1)});return()=>De()},[me,he,M]),g.useEffect(()=>{if(!me||!he)return;const Ne=Yt(mt(Se,"salesV2"),cr("status","==","FLOTANTE"),cr("date",">=",me),cr("date","<=",he)),De=jd(Ne,xt=>{const _t=[];xt.forEach(Et=>{const Mt=qV(Et.data(),Et.id);_t.push(...Mt)}),s(_t)});return()=>De()},[me,he,M]),g.useEffect(()=>{(async()=>{try{const Ne=await kt(mt(Se,"users")),De={};Ne.forEach(xt=>{const _t=xt.data(),Et=String(_t.email||"").trim().toLowerCase(),Mt=String(_t.name||"").trim();Et&&(De[Et]=Mt||_t.email||"")}),v(De)}catch(Ne){console.error("Error cargando usuarios:",Ne),v({})}})()},[]);const ie=Ne=>{const De=String(Ne||"").trim().toLowerCase();return x[De]||Ne||""};g.useEffect(()=>{(async()=>{const De=Yt(mt(Se,"daily_closures"),cr("date","==",X)),xt=await kt(De);if(xt.empty)l(null);else{const _t=xt.docs[0];l({id:_t.id,..._t.data()})}})()},[X,M]);const J=Wo.useMemo(()=>{let Ne=[];if(A==="FLOTANTE"){const xt=[...r,...a],_t=new Map;for(const Et of xt)Et.status==="FLOTANTE"&&_t.set(Et.id,Et);Ne=Array.from(_t.values())}else if(A==="ALL"){const xt=[...r,...a],_t=new Map;for(const Et of xt)_t.set(Et.id,Et);Ne=Array.from(_t.values())}else Ne=r.filter(xt=>xt.status==="PROCESADA");m!=="ALL"&&(Ne=Ne.filter(xt=>xt.type===m));const De=U.trim().toLowerCase();if(De){const xt=Et=>String(Et||"").toLowerCase().normalize("NFD").replace(/[\u0300-\u036f]/g,""),_t=xt(De);Ne=Ne.filter(Et=>xt(Et.productName).includes(_t))}return Ne},[A,r,a,U,m]),Oe=hl(J.reduce((Ne,De)=>Ne+(De.amount||0),0)),fe=hl(J.reduce((Ne,De)=>Ne+Number(De.cogsAmount??0),0)),_e=Ne=>String(Ne||"").trim().toLowerCase()!=="lb",Ue=J.filter(Ne=>Ne.type==="CONTADO"),Ye=J.filter(Ne=>Ne.type==="CREDITO"),At=Ih(Ue.filter(Ne=>_e(Ne.measurement)).reduce((Ne,De)=>Ne+(De.quantity||0),0)),yt=Ih(Ue.filter(Ne=>!_e(Ne.measurement)).reduce((Ne,De)=>Ne+(De.quantity||0),0)),bt=Ih(Ye.filter(Ne=>_e(Ne.measurement)).reduce((Ne,De)=>Ne+(De.quantity||0),0)),Nt=Ih(Ye.filter(Ne=>!_e(Ne.measurement)).reduce((Ne,De)=>Ne+(De.quantity||0),0)),jt=hl(Ue.reduce((Ne,De)=>Ne+(De.amount||0),0)),St=hl(Ye.reduce((Ne,De)=>Ne+(De.amount||0),0)),Ve=hl(Ue.reduce((Ne,De)=>Ne+Number(De.cogsAmount??0),0)),Te=hl(Ye.reduce((Ne,De)=>Ne+Number(De.cogsAmount??0),0)),qe=hl(jt-Ve),ge=hl(St-Te),q=Ih(At+bt),se=Ih(yt+Nt),ye=hl(jt+St),ue={};J.forEach(Ne=>{const De=Ne.productName||"(sin nombre)";ue[De]||(ue[De]={totalQuantity:0,totalAmount:0}),ue[De].totalQuantity=Ih(ue[De].totalQuantity+(Ne.quantity||0)),ue[De].totalAmount=hl(ue[De].totalAmount+(Ne.amount||0))});const Le=Object.entries(ue).map(([Ne,De])=>({productName:Ne,totalQuantity:De.totalQuantity,totalAmount:De.totalAmount})),ct=async()=>{try{const Ne=J.filter(Ee=>Ee.status==="FLOTANTE"),De=Ne.length>0?Ne:r.filter(Ee=>Ee.status!=="PROCESADA");if(De.length===0){f("No hay ventas para procesar.");return}const xt={totalCharged:hl(De.reduce((Ee,we)=>Ee+(we.amount||0),0)),totalSuggested:hl(De.reduce((Ee,we)=>Ee+(we.amountSuggested||0),0)),totalUnits:Ih(De.reduce((Ee,we)=>Ee+(we.quantity||0),0)),totalCOGS:hl(De.reduce((Ee,we)=>Ee+Number(we.cogsAmount??0),0))},_t=hl(xt.totalCharged-xt.totalSuggested),Et=hl(xt.totalCharged-xt.totalCOGS),Mt=await Jn(mt(Se,"daily_closures"),{date:X,createdAt:Ar.now(),periodStart:me,periodEnd:he,totalCharged:xt.totalCharged,totalSuggested:xt.totalSuggested,totalDifference:_t,totalUnits:xt.totalUnits,totalCOGS:xt.totalCOGS,grossProfit:Et,products:De.map(Ee=>({productName:Ee.productName,quantity:Ee.quantity,amount:Ee.amount})),salesV2:De.map(Ee=>({id:Ee.id,productName:Ee.productName,quantity:Ee.quantity,amount:Ee.amount,amountSuggested:Ee.amountSuggested,userEmail:Ee.userEmail,clientName:Ee.clientName,amountReceived:Ee.amountReceived,change:Ee.change,status:Ee.status,cogsAmount:Ee.cogsAmount??0,avgUnitCost:Ee.avgUnitCost??null,allocations:Ee.allocations??[],date:Ee.date})),productSummary:Object.entries(De.reduce((Ee,we)=>{const oe=we.productName||"(sin nombre)";return Ee[oe]||(Ee[oe]={totalQuantity:0,totalAmount:0}),Ee[oe].totalQuantity=Ih(Ee[oe].totalQuantity+(we.quantity||0)),Ee[oe].totalAmount=hl(Ee[oe].totalAmount+(we.amount||0)),Ee},{})).map(([Ee,we])=>({productName:Ee,totalQuantity:we.totalQuantity,totalAmount:we.totalAmount}))}),nt=tu(Se);De.forEach(Ee=>{nt.update(Gt(Se,"salesV2",Ee.id.split("#")[0]),{status:"PROCESADA",closureId:Mt.id,closureDate:X,date:Ee.date})}),await nt.commit(),f(` Cierre guardado. Ventas procesadas: ${De.length}.`)}catch(Ne){console.error(Ne),f(" Error al guardar el cierre.")}},ht=async Ne=>{if(!V){f(" No tienes permisos para revertir esta venta.");return}if(window.confirm("Revertir esta venta? Esta accin no se puede deshacer."))try{await kn(Gt(Se,"salesV2",Ne.split("#")[0]),{status:"FLOTANTE",closureId:null,closureDate:null}),f(" Venta revertida a FLOTANTE.")}catch(De){console.error(De),f(" No se pudo revertir la venta.")}},xe=Ne=>{if(!V){f(" No tienes permisos para editar esta venta.");return}b(Ne),j(Ne.quantity),_(Ne.amount),E(Ne.clientName),k(Ne.amountReceived),D(Ne.change)},Ae=async()=>{if(!V){f(" No tienes permisos para guardar cambios.");return}if(y)try{await kn(Gt(Se,"salesV2",y.id.split("#")[0]),{quantity:w,amount:I,amountCharged:I,clientName:S,amountReceived:T,change:B}),b(null),f(" Venta actualizada.")}catch(Ne){console.error(Ne),f(" No se pudo actualizar la venta.")}},Re=async Ne=>{if(!V){f(" No tienes permisos para eliminar esta venta.");return}if(window.confirm("Eliminar esta venta? Se restaurar el stock en los lotes asignados."))try{const{restored:De}=await Ure(Ne.split("#")[0]);f(` Venta eliminada. Stock restaurado: ${Number(De).toFixed(2)}.`)}catch(De){console.error(De),f(" No se pudo eliminar la venta.")}},lt=async()=>{if(ee.current){ee.current.classList.add("force-pdf-colors"),ee.current.classList.add("pdf-print-mode");try{const De=(await kg(ee.current,{backgroundColor:"#ffffff"})).toDataURL("image/png"),xt=new rn;xt.addImage(De,"PNG",10,10,190,0),xt.save(`cierre_${X}.pdf`)}finally{ee.current.classList.remove("pdf-print-mode"),ee.current.classList.remove("force-pdf-colors")}}};return i.jsxs("div",{className:"max-w-7xl mx-auto bg-white p-6 rounded-2xl shadow-2xl",children:[i.jsx("style",{children:`
        .pdf-print-mode .pdf-desktop { display: block !important; }
        .pdf-print-mode .pdf-mobile  { display: none !important; }
      `}),i.jsxs("div",{className:"flex items-start justify-between gap-3 mb-4",children:[i.jsxs("h2",{className:"text-2xl font-bold",children:["Cierre de Ventas - ",me,"  ",he]}),i.jsx("div",{className:"flex items-center gap-2",children:i.jsx(Fc,{onClick:H})})]}),i.jsxs("div",{className:"mb-4",children:[i.jsx(We,{title:"Filtros",open:ae,onToggle:()=>Pe(Ne=>!Ne),right:i.jsxs("span",{className:"ml-1",children:[me,"  ",he,A!=="ALL"?`  ${A}`:"",m!=="ALL"?`  ${m==="CREDITO"?"Crdito":"Cash"}`:"",U.trim()?`  "${U.trim()}"`:""]})}),ae&&i.jsx("div",{className:"mt-3 border rounded-xl p-3 bg-white",children:i.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-5 gap-3",children:[i.jsxs("div",{className:"flex flex-col gap-1",children:[i.jsx("label",{className:"text-xs text-gray-600",children:"Periodo desde"}),i.jsx("input",{type:"date",className:"border rounded px-2 py-2 w-full",value:me,onChange:Ne=>pe(Ne.target.value)})]}),i.jsxs("div",{className:"flex flex-col gap-1",children:[i.jsx("label",{className:"text-xs text-gray-600",children:"Hasta"}),i.jsx("input",{type:"date",className:"border rounded px-2 py-2 w-full",value:he,onChange:Ne=>ve(Ne.target.value)})]}),i.jsxs("div",{className:"flex flex-col gap-1",children:[i.jsx("label",{className:"text-xs text-gray-600",children:"Estado"}),i.jsxs("select",{className:"border rounded px-2 py-2 w-full",value:A,onChange:Ne=>h(Ne.target.value),children:[i.jsx("option",{value:"ALL",children:"Todas"}),i.jsx("option",{value:"FLOTANTE",children:"Venta Flotante"}),i.jsx("option",{value:"PROCESADA",children:"Venta Procesada"})]})]}),i.jsxs("div",{className:"flex flex-col gap-1",children:[i.jsx("label",{className:"text-xs text-gray-600",children:"Tipo Operacin"}),i.jsxs("select",{className:"border rounded px-2 py-2 w-full",value:m,onChange:Ne=>p(Ne.target.value),children:[i.jsx("option",{value:"ALL",children:"Todos"}),i.jsx("option",{value:"CREDITO",children:"Crdito"}),i.jsx("option",{value:"CONTADO",children:"Cash"})]})]}),i.jsxs("div",{className:"flex flex-col gap-1",children:[i.jsx("label",{className:"text-xs text-gray-600",children:"Producto"}),i.jsx("input",{type:"text",className:"border rounded px-2 py-2 w-full",placeholder:"Buscar por producto...",value:U,onChange:Ne=>Y(Ne.target.value)})]})]})})]}),c?i.jsx("p",{children:"Cargando ventas..."}):i.jsxs("div",{ref:ee,children:[i.jsx("div",{className:"pdf-desktop hidden md:block",children:i.jsxs("table",{className:"min-w-full border text-sm mb-4 shadow-2xl",children:[i.jsx("thead",{className:"bg-gray-100",children:i.jsxs("tr",{children:[i.jsx("th",{className:"border p-2",children:"Estado"}),i.jsx("th",{className:"border p-2",children:"Tipo"}),i.jsx("th",{className:"border p-2",children:"Producto"}),i.jsx("th",{className:"border p-2",children:"Libras - Unidad"}),i.jsx("th",{className:"border p-2",children:"Monto"}),i.jsx("th",{className:"border p-2",children:"Fecha venta"}),i.jsx("th",{className:"border p-2",children:"Vendedor"}),i.jsx("th",{className:"border p-2",children:"Acciones"})]})}),i.jsxs("tbody",{children:[J.map(Ne=>i.jsxs("tr",{className:"text-center",children:[i.jsx("td",{className:"border p-1",children:i.jsx("span",{className:`px-2 py-0.5 rounded text-xs ${Ne.status==="PROCESADA"?"bg-green-100 text-green-700":"bg-yellow-100 text-yellow-700"}`,children:Ne.status})}),i.jsx("td",{className:"border p-1",children:Ne.type==="CREDITO"?"Crdito":"Cash"}),i.jsx("td",{className:"border p-1",children:Ne.productName}),i.jsx("td",{className:"border p-1",children:jh(Ne.quantity)}),i.jsxs("td",{className:"border p-1",children:["C$",ed(Ne.amount)]}),i.jsx("td",{className:"border p-1",children:Ne.date}),i.jsx("td",{className:"border p-1",children:ie(Ne.userEmail)}),i.jsx("td",{className:"border p-1",children:Ne.status==="FLOTANTE"?i.jsx("div",{className:"flex gap-2 justify-center",children:V?i.jsxs(i.Fragment,{children:[i.jsx("button",{onClick:()=>xe(Ne),className:"text-xs bg-indigo-600 text-white px-2 py-1 rounded hover:bg-indigo-700",children:"Editar"}),i.jsx("button",{onClick:()=>Re(Ne.id),className:"text-xs bg-red-600 text-white px-2 py-1 rounded hover:bg-red-700",children:"Eliminar"})]}):i.jsx("span",{className:"text-gray-400 text-xs",children:""})}):Ne.status==="PROCESADA"?i.jsx("div",{className:"flex gap-2 justify-center",children:V?i.jsx("button",{onClick:()=>ht(Ne.id),className:"text-xs bg-red-600 text-white px-2 py-1 rounded hover:bg-red-700",children:"Revertir"}):i.jsx("span",{className:"text-gray-400 text-xs",children:""})}):i.jsx("span",{className:"text-gray-400 text-xs",children:"No options"})})]},Ne.id)),J.length===0&&i.jsx("tr",{children:i.jsx("td",{colSpan:8,className:"p-3 text-center text-gray-500",children:"Sin ventas para mostrar."})})]})]})}),i.jsxs("div",{className:"pdf-mobile md:hidden mb-4",children:[i.jsx(We,{title:"Ventas",open:ke,onToggle:()=>O(Ne=>!Ne),right:i.jsxs("span",{className:"ml-1",children:[J.length,"  C$",ed(Oe)]})}),ke&&i.jsxs("div",{className:"mt-3 space-y-3",children:[J.map(Ne=>i.jsxs("details",{className:"border rounded-xl bg-white shadow-sm",children:[i.jsxs("summary",{className:"px-4 py-3 flex justify-between items-center cursor-pointer",children:[i.jsxs("div",{className:"min-w-0",children:[i.jsx("div",{className:"font-semibold truncate",children:Ne.productName}),i.jsx("div",{className:"text-xs text-gray-500",children:Ne.date})]}),i.jsxs("div",{className:"text-right shrink-0 ml-3",children:[i.jsxs("div",{className:"font-bold",children:["C$",ed(Ne.amount)]}),i.jsx("span",{className:`text-xs px-2 py-0.5 rounded ${Ne.status==="PROCESADA"?"bg-green-100 text-green-700":"bg-yellow-100 text-yellow-700"}`,children:Ne.status})]})]}),i.jsxs("div",{className:"px-4 pb-4 pt-2 text-sm space-y-2",children:[i.jsxs("div",{className:"flex justify-between gap-3",children:[i.jsx("span",{className:"text-gray-600",children:"Cantidad"}),i.jsx("strong",{children:jh(Ne.quantity)})]}),i.jsxs("div",{className:"flex justify-between gap-3",children:[i.jsx("span",{className:"text-gray-600",children:"Tipo"}),i.jsx("strong",{children:Ne.type==="CREDITO"?"Crdito":"Cash"})]}),i.jsxs("div",{className:"flex justify-between gap-3",children:[i.jsx("span",{className:"text-gray-600",children:"Vendedor"}),i.jsx("strong",{className:"text-right break-all",children:ie(Ne.userEmail)})]}),i.jsxs("div",{className:"flex justify-between gap-3",children:[i.jsx("span",{className:"text-gray-600",children:"Cliente"}),i.jsx("strong",{className:"text-right break-all",children:Ne.clientName||""})]}),i.jsx("div",{className:"pt-2",children:Ne.status==="FLOTANTE"?i.jsx("div",{className:"flex gap-2",children:V?i.jsxs(i.Fragment,{children:[i.jsx("button",{onClick:()=>xe(Ne),className:"flex-1 text-xs bg-indigo-600 text-white py-2 rounded hover:bg-indigo-700",children:"Editar"}),i.jsx("button",{onClick:()=>Re(Ne.id),className:"flex-1 text-xs bg-red-600 text-white py-2 rounded hover:bg-red-700",children:"Eliminar"})]}):i.jsx("div",{className:"text-gray-400 text-xs w-full text-center",children:""})}):Ne.status==="PROCESADA"?i.jsx("div",{className:"flex gap-2",children:V?i.jsx("button",{onClick:()=>ht(Ne.id),className:"w-full text-xs bg-red-600 text-white py-2 rounded hover:bg-red-700",children:"Revertir"}):i.jsx("div",{className:"text-gray-400 text-xs w-full text-center",children:""})}):i.jsx("div",{className:"text-gray-400 text-xs w-full text-center",children:"No options"})})]})]},Ne.id)),J.length===0&&i.jsx("div",{className:"text-center text-gray-500 text-sm py-6",children:"Sin ventas para mostrar."})]})]}),i.jsxs("div",{className:"grid grid-cols-2 gap-2 text-sm mb-6",children:[i.jsxs("div",{children:["Total libras Cash: ",i.jsx("strong",{children:jh(yt)})]}),i.jsxs("div",{children:["Total Unidades cash: ",i.jsx("strong",{children:jh(At)})]}),i.jsxs("div",{children:["Total libras credito: ",i.jsx("strong",{children:jh(Nt)})]}),i.jsxs("div",{children:["Total Unidades credito: ",i.jsx("strong",{children:jh(bt)})]}),i.jsxs("div",{children:["Total facturado Cash: ",i.jsxs("strong",{children:["C$",ed(Ve)]})]}),i.jsxs("div",{children:["Total facturado credito:"," ",i.jsxs("strong",{children:["C$",ed(Te)]})]}),i.jsxs("div",{children:["Total venta Cash: ",i.jsxs("strong",{children:["C$",ed(jt)]})]}),i.jsxs("div",{children:["Total venta Credito: ",i.jsxs("strong",{children:["C$",ed(St)]})]}),i.jsxs("div",{children:["Utilidad bruta Cash: ",i.jsxs("strong",{children:["C$",ed(qe)]})]}),i.jsxs("div",{children:["Utilidad bruta credito:"," ",i.jsxs("strong",{children:["C$",ed(ge)]})]}),i.jsxs("div",{children:["Total libras cash y credito: ",i.jsx("strong",{children:jh(se)})]}),i.jsxs("div",{children:["Total unidades cash y credito:"," ",i.jsx("strong",{children:jh(q)})]}),i.jsxs("div",{children:["Total ventas Cash y credito:"," ",i.jsxs("strong",{children:["C$",ed(ye)]})]}),i.jsxs("div",{children:["Total facturado a precio compra:"," ",i.jsxs("strong",{children:["C$",ed(fe)]})]})]}),i.jsxs("div",{className:"mt-4",children:[i.jsx(We,{title:"Consolidado por producto",open:G,onToggle:()=>z(Ne=>!Ne),right:i.jsx("span",{className:"ml-1",children:Le.length})}),G&&i.jsx("div",{className:"mt-3",children:i.jsxs("table",{className:"min-w-full border text-sm mb-2 shadow-2xl",children:[i.jsx("thead",{className:"bg-gray-100",children:i.jsxs("tr",{children:[i.jsx("th",{className:"border p-2",children:"Producto"}),i.jsx("th",{className:"border p-2",children:"Total libras/unidades"}),i.jsx("th",{className:"border p-2",children:"Total dinero"})]})}),i.jsxs("tbody",{children:[Le.map(Ne=>i.jsxs("tr",{className:"text-center",children:[i.jsx("td",{className:"border p-1",children:Ne.productName}),i.jsx("td",{className:"border p-1",children:jh(Ne.totalQuantity)}),i.jsxs("td",{className:"border p-1",children:["C$",ed(Ne.totalAmount)]})]},Ne.productName)),Le.length===0&&i.jsx("tr",{children:i.jsx("td",{colSpan:3,className:"p-3 text-center text-gray-500",children:"Sin datos para consolidar."})})]})]})})]})]}),i.jsxs("div",{className:"flex flex-wrap gap-2 mt-4",children:[i.jsx("button",{disabled:!Ce,onClick:ct,className:"bg-blue-600 text-white px-4 py-2 rounded hover:bg-blue-700",children:"Cerrar ventas del da"}),i.jsx("button",{onClick:lt,className:"bg-green-600 text-white px-4 py-2 rounded hover:bg-green-700",children:"Descargar PDF"})]}),d&&i.jsx("p",{className:"mt-2 text-sm",children:d}),y&&i.jsx("div",{className:"fixed inset-0 bg-black/30 flex items-center justify-center p-4",children:i.jsxs("div",{className:"bg-white rounded-xl shadow-xl w-full max-w-md p-4 space-y-3",children:[i.jsx("h4",{className:"font-semibold text-lg",children:"Editar venta"}),i.jsxs("div",{className:"text-sm text-gray-500",children:[y.productName,"  ",ie(y.userEmail)]}),i.jsx("label",{className:"text-sm",children:"Cantidad"}),i.jsx("input",{type:"number",step:"0.01",className:"w-full border rounded px-2 py-1",value:w,onChange:Ne=>j(parseFloat(Ne.target.value||"0"))}),i.jsx("label",{className:"text-sm",children:"Monto cobrado"}),i.jsx("input",{type:"number",step:"0.01",className:"w-full border rounded px-2 py-1",value:I,onChange:Ne=>_(parseFloat(Ne.target.value||"0"))}),i.jsx("label",{className:"text-sm",children:"Cliente"}),i.jsx("input",{type:"text",className:"w-full border rounded px-2 py-1",value:S,onChange:Ne=>E(Ne.target.value)}),i.jsx("label",{className:"text-sm",children:"Paga con"}),i.jsx("input",{type:"number",step:"0.01",className:"w-full border rounded px-2 py-1",value:T,onChange:Ne=>k(parseFloat(Ne.target.value||"0"))}),i.jsx("label",{className:"text-sm",children:"Vuelto"}),i.jsx("input",{type:"text",className:"w-full border rounded px-2 py-1",value:B,onChange:Ne=>D(Ne.target.value)}),i.jsxs("div",{className:"flex gap-2 justify-end pt-2",children:[i.jsx("button",{onClick:()=>b(null),className:"px-3 py-1 border rounded",children:"Cancelar"}),i.jsx("button",{onClick:Ae,className:"px-3 py-1 rounded text-white bg-indigo-600 hover:bg-indigo-700",children:"Guardar cambios"})]})]})})]})}const td=t=>Number(t??0).toFixed(2),dx=t=>Number(t??0).toFixed(3);function jPe(){var y,b,w,j;const t=async I=>{if(!window.confirm(`Eliminar el cierre del ${I.date}?`))return;const _=window.confirm("Tambin quieres reabrir (revertir a FLOTANTE) las ventas vinculadas a este cierre?");try{if(_){const S=await kt(Yt(mt(Se,"salesV2"),cr("closureId","==",I.id)));if(!S.empty){const E=tu(Se);S.forEach(T=>{E.update(Gt(Se,"salesV2",T.id),{status:"FLOTANTE",closureId:null,closureDate:null})}),await E.commit()}}await Kn(Gt(Se,"daily_closures",I.id)),(u==null?void 0:u.id)===I.id&&d(null),await m(),A(` Cierre eliminado${_?" y ventas reabiertas.":"."}`)}catch(S){console.error(S),A(" No se pudo eliminar el cierre.")}},[e,r]=g.useState(Rr($ee(new Date),"yyyy-MM-dd")),[n,a]=g.useState(Rr(new Date,"yyyy-MM-dd")),[s,o]=g.useState(!0),[l,c]=g.useState([]),[u,d]=g.useState(null),[f,A]=g.useState(""),h=g.useRef(null),m=async()=>{try{o(!0);const I=Yt(mt(Se,"daily_closures"),cr("date",">=",e),cr("date","<=",n)),_=await kt(I),S=[];_.forEach(E=>S.push({id:E.id,...E.data()})),S.sort((E,T)=>E.date<T.date?1:E.date>T.date?-1:0),c(S)}catch(I){console.error(I),A(" Error cargando el historial.")}finally{o(!1)}};g.useEffect(()=>{m()},[]);const p=async I=>{I.preventDefault(),m()},x=g.useMemo(()=>{if(!u)return{units:0,sug:0,chg:0,diff:0,cogs:0,profit:0};const I=Number(u.totalUnits??0),_=Number(u.totalSuggested??0),S=Number(u.totalCharged??0),E=Number(u.totalDifference??(isFinite(S-_)?S-_:0)),T=Number(u.totalCOGS??0),k=Number(u.grossProfit??(isFinite(S-T)?S-T:0));return{units:I,sug:_,chg:S,diff:E,cogs:T,profit:k}},[u]),v=async()=>{if(!h.current||!u)return;const I=h.current;I.classList.add("force-pdf-colors");try{const[{default:_},{jsPDF:S}]=await Promise.all([sA(()=>Promise.resolve().then(()=>Q6),void 0),sA(()=>Promise.resolve().then(()=>$k),void 0)]),T=(await _(I,{backgroundColor:"#ffffff",onclone:D=>{const X=D.defaultView;D.body.querySelectorAll("*").forEach(pe=>{const he=X.getComputedStyle(pe);he.color&&(pe.style.color=he.color),he.backgroundColor&&he.backgroundColor!=="rgba(0, 0, 0, 0)"&&(pe.style.backgroundColor=he.backgroundColor),he.borderColor&&(pe.style.borderColor=he.borderColor)})}})).toDataURL("image/png"),{jsPDF:k}=await sA(async()=>{const{jsPDF:D}=await Promise.resolve().then(()=>$k);return{jsPDF:D}},void 0),B=new k;B.addImage(T,"PNG",10,10,190,0),B.save(`cierre_${u.date}.pdf`)}finally{I.classList.remove("force-pdf-colors")}};return i.jsxs("div",{className:"max-w-7xl mx-auto p-6 bg-white rounded-2xl shadow-2xl",children:[i.jsx("h1",{className:"text-2xl font-bold mb-4",children:"Histrico de cierres"}),i.jsxs("form",{onSubmit:p,className:"flex flex-wrap items-end gap-3 mb-4",children:[i.jsxs("div",{children:[i.jsx("label",{className:"block text-sm",children:"Desde"}),i.jsx("input",{type:"date",className:"border rounded px-2 py-1",value:e,onChange:I=>r(I.target.value)})]}),i.jsxs("div",{children:[i.jsx("label",{className:"block text-sm",children:"Hasta"}),i.jsx("input",{type:"date",className:"border rounded px-2 py-1",value:n,onChange:I=>a(I.target.value)})]}),i.jsx("button",{type:"submit",className:"bg-blue-600 text-white px-4 py-2 rounded hover:bg-blue-700",children:"Aplicar"})]}),s?i.jsx("p",{children:"Cargando..."}):l.length===0?i.jsx("p",{className:"text-sm text-gray-500",children:"Sin cierres en el rango seleccionado."}):i.jsxs("table",{className:"min-w-full text-sm mb-6  shadow-lg p-4 bg-white border-gray-100",children:[i.jsx("thead",{className:"bg-gray-100",children:i.jsxs("tr",{children:[i.jsx("th",{className:"border p-2",children:"Fecha"}),i.jsx("th",{className:"border p-2",children:"Total libras/unidades"}),i.jsx("th",{className:"border p-2",children:"Monto de venta"}),i.jsx("th",{className:"border p-2",children:"Monto al costo"}),i.jsx("th",{className:"border p-2",children:"Ganancia sin gastos"}),i.jsx("th",{className:"border p-2",children:"Acciones"})]})}),i.jsx("tbody",{children:l.map(I=>i.jsxs("tr",{className:"text-center",children:[i.jsx("td",{className:"border p-1",children:I.date}),i.jsx("td",{className:"border p-1",children:dx(I.totalUnits)}),i.jsxs("td",{className:"border p-1",children:["C$",td(I.totalCharged)]}),i.jsxs("td",{className:"border p-1",children:["C$",td(I.totalCOGS)]}),i.jsxs("td",{className:"border p-1",children:["C$",td(I.grossProfit??Number(I.totalCharged??0)-Number(I.totalCOGS??0))]}),i.jsx("td",{className:"border p-1",children:i.jsxs("div",{className:"flex items-center gap-2 justify-center",children:[i.jsx("button",{className:"text-xs bg-gray-800 text-white px-2 py-1 rounded hover:bg-black",onClick:()=>d(I),children:"Ver detalle"}),i.jsx("button",{className:"text-xs bg-red-600 text-white px-2 py-1 rounded hover:bg-red-700",onClick:()=>t(I),children:"Eliminar"})]})})]},I.id))})]}),u&&i.jsxs("div",{className:"mt-6 rounded-2xl shadow-lg p-4 bg-white border-solid border-2 border-gray-100",children:[i.jsxs("div",{className:"flex items-center gap-3 mb-2 ",children:[i.jsxs("h2",{className:"text-xl font-semibold",children:["Detalle ",u.date]}),i.jsx("button",{onClick:()=>d(null),className:"text-sm px-2 py-1 border rounded",children:"Cerrar"}),i.jsx("button",{onClick:v,className:"ml-auto bg-green-600 text-white px-3 py-1 rounded-2xl hover:bg-green-700 text-sm",children:"Descargar PDF"})]}),i.jsxs("div",{ref:h,className:"space-y-4",children:[i.jsx("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-2 text-sm",children:i.jsxs("div",{children:["Total Libras/Unidades: ",i.jsx("strong",{children:dx(x.units)})]})}),i.jsxs("div",{className:"grid grid-cols-2 md:grid-cols-3 gap-2 text-sm",children:[i.jsxs("div",{children:["Monto al costo:"," ",i.jsxs("strong",{children:["C$",td(x.cogs)]})]}),i.jsxs("div",{children:["Ganancia sin gastos:"," ",i.jsxs("strong",{children:["C$",td(x.profit)]})]})]}),(y=u.salesV2)!=null&&y.length?i.jsxs(i.Fragment,{children:[i.jsx("h3",{className:"font-semibold",children:"Ventas incluidas en el cierre"}),i.jsxs("table",{className:"min-w-full border text-sm",children:[i.jsx("thead",{className:"bg-gray-100",children:i.jsxs("tr",{children:[i.jsx("th",{className:"border p-2",children:"Producto"}),i.jsx("th",{className:"border p-2",children:"Cantidad"}),i.jsx("th",{className:"border p-2",children:"Monto de ventas"}),i.jsx("th",{className:"border p-2",children:"Monto al costo"}),i.jsx("th",{className:"border p-2",children:"Fecha venta"}),i.jsx("th",{className:"border p-2",children:"Vendedor"})]})}),i.jsx("tbody",{children:u.salesV2.map((I,_)=>i.jsxs("tr",{className:"text-center",children:[i.jsx("td",{className:"border p-1",children:I.productName??"(sin nombre)"}),i.jsx("td",{className:"border p-1",children:dx(I.quantity)}),i.jsxs("td",{className:"border p-1",children:["C$",td(I.amount)]}),i.jsxs("td",{className:"border p-1",children:["C$",td(I.cogsAmount)]}),i.jsx("td",{className:"border p-1",children:I.date??""}),i.jsx("td",{className:"border p-1",children:I.userEmail??""})]},_))})]})]}):(b=u.sales)!=null&&b.length?i.jsxs(i.Fragment,{children:[i.jsx("h3",{className:"font-semibold",children:"Ventas incluidas en el cierre"}),i.jsxs("table",{className:"min-w-full border text-sm",children:[i.jsx("thead",{className:"bg-gray-100",children:i.jsxs("tr",{children:[i.jsx("th",{className:"border p-2",children:"Producto"}),i.jsx("th",{className:"border p-2",children:"Cantidad"}),i.jsx("th",{className:"border p-2",children:"Monto"}),i.jsx("th",{className:"border p-2",children:"Vendedor"}),i.jsx("th",{className:"border p-2",children:"Cliente"}),i.jsx("th",{className:"border p-2",children:"Paga con"}),i.jsx("th",{className:"border p-2",children:"Vuelto"})]})}),i.jsx("tbody",{children:u.sales.map((I,_)=>i.jsxs("tr",{className:"text-center",children:[i.jsx("td",{className:"border p-1",children:I.productName??"(sin nombre)"}),i.jsx("td",{className:"border p-1",children:dx(I.quantity)}),i.jsxs("td",{className:"border p-1",children:["C$",td(I.amount)]}),i.jsx("td",{className:"border p-1",children:I.userEmail??""}),i.jsx("td",{className:"border p-1",children:I.clientName??""}),i.jsxs("td",{className:"border p-1",children:["C$",td(I.amountReceived)]}),i.jsx("td",{className:"border p-1",children:typeof I.change=="number"?td(I.change):I.change??"0"})]},_))})]})]}):(w=u.products)!=null&&w.length?i.jsxs(i.Fragment,{children:[i.jsx("h3",{className:"font-semibold",children:"Productos en el cierre"}),i.jsxs("table",{className:"min-w-full border text-sm",children:[i.jsx("thead",{className:"bg-gray-100",children:i.jsxs("tr",{children:[i.jsx("th",{className:"border p-2",children:"Producto"}),i.jsx("th",{className:"border p-2",children:"Cantidad"}),i.jsx("th",{className:"border p-2",children:"Monto"})]})}),i.jsx("tbody",{children:u.products.map((I,_)=>i.jsxs("tr",{className:"text-center",children:[i.jsx("td",{className:"border p-1",children:I.productName}),i.jsx("td",{className:"border p-1",children:dx(I.quantity)}),i.jsxs("td",{className:"border p-1",children:["C$",td(I.amount)]})]},_))})]})]}):i.jsx("p",{className:"text-sm text-gray-500",children:"Sin detalle de ventas en este cierre."}),(j=u.productSummary)!=null&&j.length?i.jsxs(i.Fragment,{children:[i.jsx("h3",{className:"font-semibold",children:"Consolidado por producto"}),i.jsxs("table",{className:"min-w-full border text-sm",children:[i.jsx("thead",{className:"bg-gray-100",children:i.jsxs("tr",{children:[i.jsx("th",{className:"border p-2",children:"Producto"}),i.jsx("th",{className:"border p-2",children:"Total libras/unidades"}),i.jsx("th",{className:"border p-2",children:"Total dinero"})]})}),i.jsx("tbody",{children:u.productSummary.map((I,_)=>i.jsxs("tr",{className:"text-center",children:[i.jsx("td",{className:"border p-1",children:I.productName}),i.jsx("td",{className:"border p-1",children:dx(I.totalQuantity)}),i.jsxs("td",{className:"border p-1",children:["C$",td(I.totalAmount)]})]},_))})]})]}):null]})]}),f&&i.jsx("p",{className:"mt-3 text-sm",children:f})]})}function PPe(){const[t,e]=g.useState(""),[r,n]=g.useState(""),[a,s]=g.useState(""),[o,l]=g.useState(!1),[c,u]=g.useState(["vendedor_pollo"]),[d,f]=g.useState(""),[A,h]=g.useState(""),[m,p]=g.useState([]),[x,v]=g.useState(!0),[y,b]=g.useState(null),[w,j]=g.useState(["vendedor_pollo"]),[I,_]=g.useState(""),[S,E]=g.useState(""),[T,k]=g.useState(!1),[B,D]=g.useState([]),X=U=>!U||U==="vendedor"?"vendedor_pollo":U==="admin"||U==="supervisor_pollo"||U==="contador"||U==="vendedor_pollo"||U==="vendedor_ropa"||U==="vendedor_dulces"?U:"vendedor_pollo",me=U=>U?Array.isArray(U)?U.map(Y=>X(String(Y))):[X(String(U))]:["vendedor_pollo"],pe=async()=>{v(!0);const U=await kt(mt(Se,"users")),Y=[];U.forEach(ee=>{const M=ee.data();Y.push({id:ee.id,email:M.email??"",name:M.name??"",roles:me(M.roles??M.role),sellerCandyId:M.sellerCandyId??""})}),p(Y),v(!1)},he=async()=>{try{const U=await kt(mt(Se,"sellers_candies")),Y=[];U.forEach(ee=>{const M=ee.data();Y.push({id:ee.id,name:M.name??"(sin nombre)",branchLabel:M.branch??"",commissionPercent:Number(M.commissionPercent??0)})}),D(Y)}catch(U){console.error("Error cargando sellers_candies:",U)}};g.useEffect(()=>{pe(),he()},[]);const ve=()=>{e(""),n(""),s(""),u(["vendedor_pollo"]),h("")},ae=async U=>{if(U.preventDefault(),f(""),y){if(a&&a.length>0&&a.length<6){f(" La contrasea debe tener al menos 6 caracteres.");return}}else if(a.length<6){f(" La contrasea debe tener al menos 6 caracteres.");return}if(!t.trim()){f(" El nombre es obligatorio.");return}try{if(y){const V=Gt(Se,"users",y),We=w.length?w:["vendedor_pollo"],ie=We.includes("vendedor_dulces")&&(I||A)||"";if(await kn(V,{email:r,name:t.trim(),roles:We,role:We[0]||"vendedor_pollo",sellerCandyId:ie}),p(J=>J.map(Oe=>Oe.id===y?{...Oe,email:r,name:t.trim(),roles:We,sellerCandyId:ie}:Oe)),a&&a.length>=6)try{const J=QT(),Oe=S||r;await gge(J,Oe),f(` Usuario actualizado. Se envi correo de restablecimiento a ${Oe}`)}catch(J){console.error("Error sending password reset:",J),f(" Usuario actualizado. No se pudo enviar correo de restablecimiento.")}else f(" Usuario actualizado correctamente.");ke();return}const Y=ID(),ee=SD(Y.options,"Secondary"),M=QT(ee),H=await xge(M,r,a),te=c.length?c:["vendedor_pollo"],Ce=te.includes("vendedor_dulces")&&A||"";await _ee(Gt(mt(Se,"users"),H.user.uid),{email:r,name:t.trim(),roles:te,role:te[0]||"vendedor_pollo",sellerCandyId:Ce}),await DD(M),await upe(ee),p(V=>[{id:H.user.uid,email:r,name:t.trim(),roles:te,sellerCandyId:Ce},...V]),f(" Usuario creado correctamente."),ve(),k(!1)}catch(Y){console.error(Y),f(" Error al crear el usuario: "+Y.message)}},Pe=U=>{b(U.id),e(U.name||""),n(U.email||""),E(U.email||""),j(U.roles&&U.roles.length?U.roles:["vendedor_pollo"]),h(U.sellerCandyId||""),_(U.sellerCandyId||""),s(""),k(!0)},ke=()=>{b(null),j(["vendedor_pollo"]),_(""),E(""),ve(),k(!1)},O=async U=>{confirm("Eliminar este usuario del listado?")&&(await Kn(Gt(Se,"users",U)),p(ee=>ee.filter(M=>M.id!==U)))},G=U=>{const Y=U==="admin"?"admin":U==="supervisor_pollo"?"supervisor_pollo":U==="vendedor_ropa"?"vendedor_ropa":U==="vendedor_dulces"?"vendedor_dulces":"vendedor_pollo",ee=Y==="admin"?"bg-blue-100 text-blue-700":Y==="supervisor_pollo"?"bg-amber-100 text-amber-700":Y==="vendedor_ropa"?"bg-indigo-100 text-indigo-700":Y==="vendedor_dulces"?"bg-pink-100 text-pink-700":"bg-green-100 text-green-700";return i.jsx("span",{className:`px-2 py-0.5 rounded text-xs ${ee}`,children:Y})},z=U=>`${U.name}  ${U.branchLabel||"Sin sucursal"}  ${U.commissionPercent.toFixed(2)}%`;return i.jsxs("div",{className:"max-w-6xl mx-auto",children:[i.jsxs("div",{className:"flex items-center justify-between mb-3",children:[i.jsx("h2",{className:"text-2xl font-bold",children:"Usuarios"}),i.jsx("button",{className:"px-3 py-2 rounded bg-purple-600 text-white hover:bg-purple-700",onClick:()=>k(!0),type:"button",children:"Crear usuario"})]}),i.jsx("div",{className:"bg-white p-2 rounded shadow border overflow-x-auto",children:i.jsxs("table",{className:"min-w-full text-sm",children:[i.jsx("thead",{className:"bg-gray-100",children:i.jsxs("tr",{children:[i.jsx("th",{className:"p-2 border",children:"Nombre"}),i.jsx("th",{className:"p-2 border",children:"Email"}),i.jsx("th",{className:"p-2 border",children:"Rol"}),i.jsx("th",{className:"p-2 border",children:"Acciones"})]})}),i.jsx("tbody",{children:x?i.jsx("tr",{children:i.jsx("td",{colSpan:4,className:"p-4 text-center",children:"Cargando"})}):m.length===0?i.jsx("tr",{children:i.jsx("td",{colSpan:4,className:"p-4 text-center",children:"Sin usuarios"})}):m.map(U=>{const Y=y===U.id,ee=(Y?w:U.roles).includes("vendedor_dulces");return i.jsxs("tr",{className:"text-center",children:[i.jsx("td",{className:"p-2 border",children:U.name||""}),i.jsx("td",{className:"p-2 border",children:U.email}),i.jsx("td",{className:"p-2 border",children:Y?i.jsxs("div",{className:"space-y-2 text-left",children:[["supervisor_pollo","admin","vendedor_pollo","vendedor_ropa","vendedor_dulces"].map(M=>i.jsxs("label",{className:"inline-flex items-center mr-3",children:[i.jsx("input",{type:"checkbox",className:"mr-2",checked:w.includes(M),onChange:()=>j(H=>H.includes(M)?H.filter(te=>te!==M):[...H,M])}),i.jsx("span",{className:"text-sm",children:M})]},M)),w.includes("vendedor_dulces")&&i.jsxs("select",{className:"w-full border p-1 rounded text-xs mt-1",value:I,onChange:M=>_(M.target.value),children:[i.jsx("option",{value:"",children:"Selecciona vendedor de dulces"}),B.map(M=>i.jsx("option",{value:M.id,children:z(M)},M.id))]})]}):i.jsxs(i.Fragment,{children:[i.jsx("div",{className:"flex gap-2 justify-center",children:U.roles.map(M=>i.jsx("span",{children:G(M)},M))}),ee&&U.sellerCandyId&&i.jsx("div",{className:"mt-1 text-[11px] text-gray-500",children:"Vendedor asignado"})]})}),i.jsx("td",{className:"p-2 border space-x-2",children:i.jsxs(i.Fragment,{children:[i.jsx("button",{className:"px-2 py-1 rounded text-white bg-yellow-600 hover:bg-yellow-700",onClick:()=>Pe(U),children:"Editar"}),i.jsx("button",{className:"px-2 py-1 rounded text-white bg-red-600 hover:bg-red-700",onClick:()=>O(U.id),children:"Eliminar"})]})})]},U.id)})})]})}),d&&i.jsx("p",{className:"text-sm mt-2",children:d}),T&&i.jsxs("div",{className:"fixed inset-0 z-[70] flex items-center justify-center",children:[i.jsx("div",{className:"absolute inset-0 bg-black/40",onClick:()=>k(!1)}),i.jsxs("div",{className:"relative bg-white rounded-lg shadow-2xl border w-[96%] max-w-lg max-h-[92vh] overflow-auto p-4",children:[i.jsxs("div",{className:"flex items-center justify-between mb-2",children:[i.jsx("h3",{className:"text-lg font-bold",children:y?"Editar usuario":"Registrar nuevo usuario"}),i.jsx("button",{className:"px-3 py-1 rounded bg-gray-200 hover:bg-gray-300",onClick:ke,type:"button",children:"Cerrar"})]}),i.jsxs("form",{onSubmit:ae,className:"space-y-4",children:[i.jsxs("div",{className:"space-y-1",children:[i.jsx("label",{className:"block text-sm font-semibold text-gray-700",children:"Nombre completo"}),i.jsx("input",{type:"text",className:"w-full border border-gray-300 p-2 rounded focus:ring-2 focus:ring-purple-400",value:t,onChange:U=>e(U.target.value),required:!0})]}),i.jsxs("div",{className:"space-y-1",children:[i.jsx("label",{className:"block text-sm font-semibold text-gray-700",children:"Correo electrnico"}),i.jsx("input",{type:"email",className:"w-full border border-gray-300 p-2 rounded focus:ring-2 focus:ring-purple-400",value:r,onChange:U=>n(U.target.value),required:!0})]}),i.jsxs("div",{className:"space-y-1 relative",children:[i.jsx("label",{className:"block text-sm font-semibold text-gray-700",children:"Contrasea (mnimo 6 caracteres)"}),i.jsx("input",{type:o?"text":"password",minLength:6,className:"w-full border border-gray-300 p-2 rounded focus:ring-2 focus:ring-purple-400 pr-10",value:a,onChange:U=>s(U.target.value),required:!y}),i.jsx("button",{type:"button",className:"absolute right-2 top-8 text-sm text-gray-600 hover:text-gray-800",onClick:()=>l(U=>!U),children:o?"":""})]}),i.jsxs("div",{className:"space-y-1",children:[i.jsx("label",{className:"block text-sm font-semibold text-gray-700",children:"Roles"}),i.jsx("div",{className:"flex flex-wrap gap-2",children:["supervisor_pollo","contador","admin","vendedor_pollo","vendedor_ropa","vendedor_dulces"].map(U=>i.jsxs("label",{className:"inline-flex items-center mr-3",children:[i.jsx("input",{type:"checkbox",className:"mr-2",checked:y?w.includes(U):c.includes(U),onChange:()=>{y?j(Y=>Y.includes(U)?Y.filter(ee=>ee!==U):[...Y,U]):u(Y=>Y.includes(U)?Y.filter(ee=>ee!==U):[...Y,U])}}),i.jsx("span",{className:"text-sm",children:U})]},U))})]}),(y?w.includes("vendedor_dulces"):c.includes("vendedor_dulces"))&&i.jsxs("div",{className:"space-y-1",children:[i.jsx("label",{className:"block text-sm font-semibold text-gray-700",children:"Vendedor (dulces)"}),i.jsxs("select",{className:"w-full border p-2 rounded text-sm",value:A,onChange:U=>h(U.target.value),children:[i.jsx("option",{value:"",children:"Selecciona vendedor de dulces asignado"}),B.map(U=>i.jsx("option",{value:U.id,children:z(U)},U.id))]})]}),i.jsxs("div",{className:"flex justify-end gap-2 pt-2",children:[i.jsx("button",{type:"button",className:"px-4 py-2 rounded bg-gray-200 hover:bg-gray-300",onClick:ke,children:"Cancelar"}),i.jsx("button",{className:"bg-green-600 text-white px-4 py-2 rounded hover:bg-green-700",children:y?"Guardar cambios":"Crear usuario"})]})]}),d&&i.jsx("p",{className:"text-sm mt-2",children:d})]})]})]})}const zV=t=>`C$${(Number(t)||0).toFixed(2)}`;function BPe(){const[t,e]=g.useState(""),[r,n]=g.useState(0),[a,s]=g.useState(0),[o,l]=g.useState(""),[c,u]=g.useState(""),[d,f]=g.useState(""),[A,h]=g.useState([]),[m,p]=g.useState(!0),[x,v]=g.useState(!1),[y,b]=g.useState(null),[w,j]=g.useState(""),[I,_]=g.useState(""),[S,E]=g.useState(""),[T,k]=g.useState(0),[B,D]=g.useState(0),[X,me]=g.useState(!1),pe=async()=>{p(!0);const z=await kt(mt(Se,"products")),U=[];z.forEach(Y=>{const ee=Y.data();U.push({id:Y.id,name:ee.name??"",price:Number(ee.price??0),providerPrice:Number(ee.providerPrice??0),category:ee.category??"",measurement:ee.measurement??"",active:ee.active!==!1})}),h(U),p(!1)};g.useEffect(()=>{pe()},[]);const he=async z=>{if(z.preventDefault(),l(""),!t||r<=0||!d){l(" Completa nombre, precio vlido y unidad de medida");return}try{const U={name:t,price:parseFloat(r.toFixed(2)),providerPrice:parseFloat((a||0).toFixed(2)),category:c,measurement:d,active:!0},Y=await Jn(mt(Se,"products"),U);h(ee=>[{id:Y.id,...U},...ee]),l(" Producto registrado con exito."),e(""),n(0),s(0),f(""),u(""),me(!1)}catch(U){l(" Error: "+U.message)}},ve=z=>{b(z.id),j(z.name),_(z.category),E(z.measurement),k(z.price),D(z.providerPrice||0)},ae=()=>{b(null),j(""),_(""),E(""),k(0)},Pe=async()=>{if(!y)return;const z=Gt(Se,"products",y);await kn(z,{name:w,category:I,measurement:S,price:parseFloat((T||0).toFixed(2)),providerPrice:parseFloat((B||0).toFixed(2))}),h(U=>U.map(Y=>Y.id===y?{...Y,name:w,category:I,measurement:S,price:parseFloat((T||0).toFixed(2)),providerPrice:parseFloat((B||0).toFixed(2))}:Y)),ae()},ke=async z=>{const U=Gt(Se,"products",z.id),Y=z.active===!1;await kn(U,{active:Y}),h(ee=>ee.map(M=>M.id===z.id?{...M,active:Y}:M))},O=async z=>{const U=Yt(mt(Se,"inventory_batches"),cr("productId","==",z),gS(1));if(!(await kt(U)).empty){alert(`No se puede eliminar: hay lotes asociados a este producto.
Sugerencia: desactvalo para ocultarlo.`);return}confirm("Eliminar este producto definitivamente?")&&(await Kn(Gt(Se,"products",z)),h(M=>M.filter(H=>H.id!==z)))},G=x?A:A.filter(z=>z.active!==!1);return i.jsxs("div",{className:"max-w-6xl mx-auto",children:[i.jsxs("div",{className:"flex items-center justify-between mb-4",children:[i.jsx("h2",{className:"text-2xl font-bold",children:"Productos"}),i.jsxs("button",{className:"inline-flex items-center gap-2 bg-green-600 text-white px-3 py-2 rounded hover:bg-green-700",onClick:()=>{l(""),me(!0)},children:[i.jsx("span",{className:"inline-block bg-green-700/40 rounded-full p-1",children:i.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-4 w-4",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:i.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 4v16m8-8H4"})})}),"Nuevo producto"]})]}),X&&i.jsxs("div",{className:"fixed inset-0 z-50 flex items-center justify-center",children:[i.jsx("div",{className:"absolute inset-0 bg-black/50",onClick:()=>me(!1)}),i.jsxs("div",{className:"relative z-10 w-[95%] max-w-lg bg-white rounded-lg shadow-2xl border p-5",children:[i.jsxs("div",{className:"flex items-center justify-between mb-3",children:[i.jsxs("h3",{className:"text-lg font-bold text-green-700 flex items-center gap-2",children:[i.jsx("span",{className:"inline-block bg-green-100 text-green-700 rounded-full p-2",children:i.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-5 w-5",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:i.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 4v16m8-8H4"})})}),"Registrar producto"]}),i.jsx("button",{className:"px-3 py-1 rounded bg-gray-200 hover:bg-gray-300",onClick:()=>me(!1),children:"Cerrar"})]}),i.jsxs("form",{onSubmit:he,className:"space-y-4",children:[i.jsxs("div",{className:"space-y-1",children:[i.jsx("label",{className:"block text-sm font-semibold text-gray-700",children:"Categora"}),i.jsxs("select",{value:c,onChange:z=>u(z.target.value),className:"w-full border border-gray-300 p-2 rounded focus:ring-2 focus:ring-green-400",children:[i.jsx("option",{value:"",children:"Selecciona"}),i.jsx("option",{value:"pollo",children:"Pollo"}),i.jsx("option",{value:"cerdo",children:"Cerdo"}),i.jsx("option",{value:"huevo",children:"Huevos"}),i.jsx("option",{value:"ropa",children:"Ropa"}),i.jsx("option",{value:"otros",children:"Otros"})]})]}),i.jsxs("div",{className:"space-y-1",children:[i.jsx("label",{className:"block text-sm font-semibold text-gray-700",children:"Nombre del producto"}),i.jsx("input",{type:"text",className:"w-full border p-2 rounded",value:t,onChange:z=>e(z.target.value)})]}),i.jsxs("div",{className:"space-y-1",children:[i.jsx("label",{className:"block text-sm font-semibold text-gray-700",children:"Tipo de unidad de medida"}),i.jsxs("select",{value:d,onChange:z=>f(z.target.value),className:"w-full border border-gray-300 p-2 rounded focus:ring-2 focus:ring-green-400",children:[i.jsx("option",{value:"",children:"Selecciona"}),i.jsx("option",{value:"lb",children:"Libra"}),i.jsx("option",{value:"kg",children:"Kilogramo"}),i.jsx("option",{value:"unidad",children:"Unidad"})]})]}),i.jsxs("div",{children:[i.jsx("label",{className:"block text-sm",children:"Precio proveedor (ej: 40.00)"}),i.jsx("input",{type:"number",step:"0.01",className:"w-full border p-2 rounded",value:Number.isNaN(a)?"":a,onChange:z=>s(parseFloat(z.target.value))})]}),i.jsxs("div",{children:[i.jsx("label",{className:"block text-sm",children:"Precio por unidad (ej: 55.50)"}),i.jsx("input",{type:"number",step:"0.01",className:"w-full border p-2 rounded",value:Number.isNaN(r)?"":r,onChange:z=>n(parseFloat(z.target.value)),onFocus:z=>z.target.value==="0"?n(NaN):null})]}),i.jsx("button",{type:"submit",className:"bg-blue-600 text-white px-4 py-2 rounded hover:bg-blue-700 w-full",children:"Agregar producto"}),o&&i.jsx("p",{className:"text-sm mt-2",children:o})]})]})]}),i.jsxs("div",{className:"flex items-center justify-between mt-6 mb-2",children:[i.jsx("h3",{className:"text-lg font-semibold p-2",children:"Productos"}),i.jsxs("label",{className:"flex items-center gap-2 text-sm",children:[i.jsx("input",{type:"checkbox",checked:x,onChange:z=>v(z.target.checked)}),"Mostrar inactivos"]})]}),i.jsx("div",{className:"bg-white p-2 rounded shadow border overflow-x-auto",children:i.jsxs("table",{className:"min-w-full text-sm",children:[i.jsx("thead",{className:"bg-gray-100",children:i.jsxs("tr",{children:[i.jsx("th",{className:"p-2 border",children:"Nombre"}),i.jsx("th",{className:"p-2 border",children:"Categora"}),i.jsx("th",{className:"p-2 border",children:"Unidad"}),i.jsx("th",{className:"p-2 border",children:"Precio proveedor"}),i.jsx("th",{className:"p-2 border",children:"Precio"}),i.jsx("th",{className:"p-2 border",children:"Estado"}),i.jsx("th",{className:"p-2 border",children:"Acciones"})]})}),i.jsx("tbody",{children:m?i.jsx("tr",{children:i.jsx("td",{colSpan:6,className:"p-4 text-center",children:"Cargando"})}):G.length===0?i.jsx("tr",{children:i.jsx("td",{colSpan:6,className:"p-4 text-center",children:"Sin productos"})}):G.map(z=>{const U=y===z.id,Y=z.active!==!1;return i.jsxs("tr",{className:"text-center",children:[i.jsx("td",{className:"p-2 border",children:U?i.jsx("input",{className:"w-full border p-1 rounded",value:w,onChange:ee=>j(ee.target.value)}):z.name}),i.jsx("td",{className:"p-2 border",children:U?i.jsxs("select",{className:"w-full border p-1 rounded",value:I,onChange:ee=>_(ee.target.value),children:[i.jsx("option",{value:"",children:"Selecciona"}),i.jsx("option",{value:"pollo",children:"Pollo"}),i.jsx("option",{value:"cerdo",children:"Cerdo"}),i.jsx("option",{value:"huevo",children:"Huevos"}),i.jsx("option",{value:"ropa",children:"Ropa"}),i.jsx("option",{value:"otros",children:"Otros"})]}):z.category}),i.jsx("td",{className:"p-2 border",children:U?i.jsxs("select",{className:"w-full border p-1 rounded",value:S,onChange:ee=>E(ee.target.value),children:[i.jsx("option",{value:"",children:"Selecciona"}),i.jsx("option",{value:"lb",children:"Libra"}),i.jsx("option",{value:"kg",children:"Kilogramo"}),i.jsx("option",{value:"unidad",children:"Unidad"})]}):z.measurement}),i.jsx("td",{className:"p-2 border",children:U?i.jsx("input",{type:"number",step:"0.01",className:"w-full border p-1 rounded text-right",value:Number.isNaN(B)?"":B,onChange:ee=>D(parseFloat(ee.target.value))}):zV(z.providerPrice||0)}),i.jsx("td",{className:"p-2 border",children:U?i.jsx("input",{type:"number",step:"0.01",className:"w-full border p-1 rounded text-right",value:Number.isNaN(T)?"":T,onChange:ee=>k(parseFloat(ee.target.value))}):zV(z.price)}),i.jsx("td",{className:"p-2 border",children:i.jsx("span",{className:`px-2 py-0.5 rounded text-xs ${Y?"bg-green-100 text-green-700":"bg-gray-200 text-gray-700"}`,children:Y?"Activo":"Inactivo"})}),i.jsx("td",{className:"p-2 border space-x-2",children:U?i.jsxs(i.Fragment,{children:[i.jsx("button",{className:"px-2 py-1 rounded text-white bg-blue-600 hover:bg-blue-700",onClick:Pe,children:"Guardar"}),i.jsx("button",{className:"px-2 py-1 rounded bg-gray-200 hover:bg-gray-300",onClick:ae,children:"Cancelar"})]}):i.jsxs(i.Fragment,{children:[i.jsx("button",{className:"px-2 py-1 rounded text-white bg-yellow-600 hover:bg-yellow-700",onClick:()=>ve(z),children:"Editar"}),i.jsx("button",{className:`px-2 py-1 rounded ${Y?"bg-gray-600 hover:bg-gray-700 text-white":"bg-green-600 hover:bg-green-700 text-white"}`,onClick:()=>ke(z),children:Y?"Desactivar":"Activar"}),i.jsx("button",{className:"px-2 py-1 rounded text-white bg-red-600 hover:bg-red-700",onClick:()=>O(z.id),children:"Eliminar"})]})})]},z.id)})})]})})]})}const Al=[];for(let t=0;t<256;++t)Al.push((t+256).toString(16).slice(1));function TPe(t,e=0){return(Al[t[e+0]]+Al[t[e+1]]+Al[t[e+2]]+Al[t[e+3]]+"-"+Al[t[e+4]]+Al[t[e+5]]+"-"+Al[t[e+6]]+Al[t[e+7]]+"-"+Al[t[e+8]]+Al[t[e+9]]+"-"+Al[t[e+10]]+Al[t[e+11]]+Al[t[e+12]]+Al[t[e+13]]+Al[t[e+14]]+Al[t[e+15]]).toLowerCase()}let x5;const kPe=new Uint8Array(16);function FPe(){if(!x5){if(typeof crypto>"u"||!crypto.getRandomValues)throw new Error("crypto.getRandomValues() not supported. See https://github.com/uuidjs/uuid#getrandomvalues-not-supported");x5=crypto.getRandomValues.bind(crypto)}return x5(kPe)}const OPe=typeof crypto<"u"&&crypto.randomUUID&&crypto.randomUUID.bind(crypto),WV={randomUUID:OPe};function DPe(t,e,r){var a;if(WV.randomUUID&&!t)return WV.randomUUID();t=t||{};const n=t.random??((a=t.rng)==null?void 0:a.call(t))??FPe();if(n.length<16)throw new Error("Random bytes length must be >= 16");return n[6]=n[6]&15|64,n[8]=n[8]&63|128,TPe(n)}async function RPe(t,e,r,n=!1){if(r<=0)return{allocations:[],avgUnitCost:0,cogsAmount:0};const a=mt(t,"inventory_batches"),s=Yt(a,cr("productName","==",e)),c=(await kt(s)).docs.map(u=>({id:u.id,data:u.data()})).sort((u,d)=>{var p,x;const f=u.data.date??"",A=d.data.date??"";if(f!==A)return f<A?-1:1;const h=((p=u.data.createdAt)==null?void 0:p.seconds)??0,m=((x=d.data.createdAt)==null?void 0:x.seconds)??0;return h-m}).map(u=>Gt(t,"inventory_batches",u.id));return Gs(t,async u=>{let d=Number(r);const f=[],A=await Promise.all(c.map(x=>u.get(x)));for(let x=0;x<c.length&&d>0;x++){const v=c[x],y=A[x];if(!y.exists())continue;const b=y.data(),w=Number(b.quantity??0),j=Number(b.remaining??w??0),I=Number(b.purchasePrice??0);if(j<=0)continue;const _=Math.min(j,d),S=Number((j-_).toFixed(3));u.update(v,{remaining:S}),f.push({batchId:v.id,qty:_,unitCost:I,lineCost:Number((_*I).toFixed(2))}),d=Number((d-_).toFixed(3))}if(d>0&&!n)throw new Error(`Stock insuficiente para "${e}". Faltan ${d} unidades.`);const h=Number(f.reduce((x,v)=>x+v.lineCost,0).toFixed(2)),m=f.reduce((x,v)=>x+v.qty,0),p=m>0?Number((h/m).toFixed(4)):0;return{allocations:f,avgUnitCost:p,cogsAmount:h}})}const Hre=3,MPe=.5*10**-Hre;function As(t){const e=Number(t??0);return Number(e.toFixed(Hre))}function v5(t,e){return As((t??0)+(e??0))}function MC(t,e){return As(t)+MPe>=As(e)}async function LPe(t,e){const r=await kt(mt(Se,"inventory_batches")),n=t.trim().toLowerCase();let a=0;for(const s of r.docs){const o=s.data();(o.productName||"").trim().toLowerCase()===n&&o.productId!==e&&(await kn(Gt(Se,"inventory_batches",s.id),{productId:e}),a++)}return a}const f0=t=>`C$ ${(Number(t)||0).toFixed(2)}`;function XV({user:t,role:e,roles:r}){r&&r.length;const[n,a]=g.useState([]),[s,o]=g.useState([]),[l,c]=g.useState(""),[u,d]=g.useState(Rr(new Date,"yyyy-MM-dd")),[f,A]=g.useState(""),[h,m]=g.useState(""),[p,x]=g.useState([]),[v,y]=g.useState(0),[b,w]=g.useState(0),[j,I]=g.useState("0"),[_,S]=g.useState(""),[E,T]=g.useState(!1),[k,B]=g.useState({}),D=Ve=>Math.round(Ve*100)/100,X=Ve=>As(Ve).toFixed(3),[me,pe]=g.useState("CONTADO"),[he,ve]=g.useState([]),[ae,Pe]=g.useState(""),[ke,O]=g.useState(0),G=Ve=>{pe(Ve),Ve==="CREDITO"?(A(""),w(0),I("0.00")):(Pe(""),O(0))},z=Ve=>{const Te=Number(Ve.specialPrice||0);return Te>0?Te:Number(Ve.price||0)},U=async Ve=>{if(!Ve)return 0;const Te=Yt(mt(Se,"inventory_batches"),cr("productId","==",Ve)),qe=await kt(Te);let ge=0;return qe.forEach(q=>{const se=q.data();ge=v5(ge,Number(se.remaining||0))}),As(ge)},Y=async Ve=>{if(!Ve)return 0;const Te=await kt(mt(Se,"inventory_batches"));let qe=0;return Te.forEach(ge=>{const q=ge.data();(q.productName||"").trim().toLowerCase()===Ve.trim().toLowerCase()&&(qe=v5(qe,Number(q.remaining||0)))}),As(qe)};g.useEffect(()=>{(async()=>{const Ve=await kt(mt(Se,"products")),Te=[];Ve.forEach(qe=>{const ge=qe.data();(ge==null?void 0:ge.active)!==!1&&Te.push({id:qe.id,productName:ge.name??ge.productName??"(sin nombre)",price:Number(ge.price??0),measurement:ge.measurement??"(sin unidad)",category:ge.category??"(sin categora)"})}),a(Te)})()},[]),g.useEffect(()=>{(async()=>{const Ve=await kt(mt(Se,"inventory_batches")),Te={};Ve.forEach(qe=>{const ge=qe.data(),q=ge.productId,se=Number(ge.remaining||0);q&&(Te[q]=v5(Te[q]||0,se))}),Object.keys(Te).forEach(qe=>Te[qe]=As(Te[qe])),B(Te)})()},[]),g.useEffect(()=>{(async()=>{const Ve=await kt(mt(Se,"users")),Te=[];Ve.forEach(qe=>{const ge=qe.data();Te.push({id:qe.id,email:ge.email??"(sin email)",role:ge.role??"USER"})}),o(Te)})()},[]);const ee=async()=>{if(!l)return;const Ve=n.find(qe=>qe.id===l);if(!Ve)return;if(p.some(qe=>qe.productId===Ve.id)){c("");return}const Te=await U(Ve.id);x(qe=>[...qe,{productId:Ve.id,productName:Ve.productName,measurement:Ve.measurement,price:Number(Ve.price||0),specialPrice:0,stock:Te,qty:0,qtyInput:"",specialPriceInput:"",discount:0,discountInput:""}]),c("")},M=async Ve=>{if(!Ve)return;const Te=n.find(ge=>ge.id===Ve);if(!Te||p.some(ge=>ge.productId===Te.id))return;const qe=await U(Te.id);x(ge=>[...ge,{productId:Te.id,productName:Te.productName,measurement:Te.measurement,price:Number(Te.price||0),specialPrice:0,stock:qe,qty:0,qtyInput:"",specialPriceInput:"",discount:0,discountInput:""}]),c("")},H=Ve=>{x(Te=>Te.filter(qe=>qe.productId!==Ve))},te=Ve=>{const Te=String(Ve||"").replace(",",".");if(Te==="")return"";const qe=Te.split(".");return qe.length===1?Te:`${qe[0]}.${qe.slice(1).join("")}`},Ce=async(Ve,Te)=>{x(qe=>qe.map(ge=>{if(ge.productId!==Ve)return ge;const q=(ge.measurement||"").toLowerCase()!=="lb",se=te(Te);if(se.trim()==="")return{...ge,qty:0,qtyInput:""};if(!q&&se===".")return{...ge,qty:0,qtyInput:"0."};const ye=Number(se),ue=Number.isFinite(ye)?ye:0;let Le=q?Math.max(0,Math.round(ue)):As(ue);const ct=q?Math.max(0,Math.floor(Number(ge.stock||0))):As(Number(ge.stock||0));if(Le>ct){Le=ct,S(` Cantidad limitada a existencias (${ct})`);const xe=q?String(Le):Le===0?"":String(Le);return{...ge,qty:Le,qtyInput:xe}}const ht=q?String(Le):se.endsWith(".")?se:String(Le);return{...ge,qty:Le,qtyInput:ht}}))},V=(Ve,Te)=>{x(qe=>qe.map(ge=>{if(ge.productId!==Ve)return ge;const q=te(Te);if(q.trim()==="")return{...ge,specialPrice:0,specialPriceInput:""};if(q===".")return{...ge,specialPrice:0,specialPriceInput:"0."};const se=Number(q),ye=Number.isFinite(se)?Math.max(0,D(se)):0,ue=q.endsWith(".")?q:String(ye);return{...ge,specialPrice:ye,specialPriceInput:ue}}))},We=(Ve,Te)=>{x(qe=>qe.map(ge=>{if(ge.productId!==Ve)return ge;const q=te(Te);if(q.trim()==="")return{...ge,discount:0,discountInput:""};if(q===".")return{...ge,discount:0,discountInput:"0."};const se=Number(q),ye=Number.isFinite(se)?Math.max(0,Math.floor(se)):0,ue=q.endsWith(".")?q:String(ye);return{...ge,discount:ye,discountInput:ue}}))},ie=g.useMemo(()=>{let Ve=0;for(const Te of p){const qe=z(Te),ge=Number(qe||0)*Number(Te.qty||0),q=Math.max(0,ge-Math.max(0,Number(Te.discount||0)));Ve+=q}return D(Ve)},[p]);g.useEffect(()=>{y(ie)},[ie]),g.useEffect(()=>{const Ve=Number(b)||0,Te=Number(v)||0;I((Ve-Te).toFixed(2))},[b,v]);const J=Ve=>{Ve.key===","&&(Ve.preventDefault(),Ve.target.value+=".")},[Oe,fe]=g.useState(!1);g.useEffect(()=>{var qe;const Ve=window.matchMedia("(max-width: 900px)"),Te=()=>fe(Ve.matches);return Te(),(qe=Ve.addEventListener)==null||qe.call(Ve,"change",Te),()=>{var ge;return(ge=Ve.removeEventListener)==null?void 0:ge.call(Ve,"change",Te)}},[]),g.useEffect(()=>{(async()=>{try{const Ve=await kt(mt(Se,"customers_pollo")),Te=[];Ve.forEach(qe=>{const ge=qe.data();Te.push({id:qe.id,name:ge.name??"",phone:ge.phone??"",status:ge.status??"ACTIVO",creditLimit:Number(ge.creditLimit??0),vendorId:ge.vendorId??"",vendorName:ge.vendorName??"",balance:0})});for(const qe of Te)try{const ge=Yt(mt(Se,"ar_movements_pollo"),cr("customerId","==",qe.id)),q=await kt(ge);let se=0;q.forEach(ue=>{se+=Number(ue.data().amount||0)});const ye=Number(qe.initialDebt||0);qe.balance=se+ye}catch{qe.balance=0}Te.sort((qe,ge)=>(qe.name||"").localeCompare(ge.name||"")),ve(Te)}catch(Ve){console.error("Error cargando customers_pollo:",Ve),ve([])}})()},[]);const _e=g.useMemo(()=>he.find(Ve=>Ve.id===ae)||null,[he,ae]),Ue=Number((_e==null?void 0:_e.balance)||0),Ye=me==="CREDITO"?Math.max(0,Number(Ue||0)+Math.max(0,Number(v||0))):0;g.useEffect(()=>{me==="CREDITO"&&O(Ve=>Math.min(Math.max(0,Number(Ve||0)),Ye))},[me,Ye]),g.useEffect(()=>{me==="CREDITO"&&(w(Number(ke||0)),I("0.00"))},[me,ke]);const At=me==="CREDITO"?Ue+Math.max(0,Number(v||0))-Math.max(0,Number(ke||0)):0,yt=async()=>{if(p.length===0)return"Agrega al menos un producto.";for(const Ve of p){if(!Ve.qty||Ve.qty<=0)return`Cantidad invlida para "${Ve.productName}".`;const Te=await U(Ve.productId);if(!MC(Te,Ve.qty)){const qe=await Y(Ve.productName);if(MC(qe,0)&&!MC(Te,0)){const ge=await LPe(Ve.productName,Ve.productId),q=await U(Ve.productId);if(!MC(q,Ve.qty))return`Stock insuficiente tras corregir ${ge} lote(s) para "${Ve.productName}".`}else return`Stock insuficiente para "${Ve.productName}". Disponible: ${Te}`}}return null},bt=async Ve=>{var qe,ge;Ve.preventDefault(),S("");const Te=await yt();if(Te){S(" "+Te);return}try{T(!0);const q=[];if(me==="CONTADO"){if(!f.trim())return"Ingresa el nombre del cliente (contado)."}else{if(!ae)return"Selecciona un cliente (crdito).";if(ke<0)return"El pago inicial no puede ser negativo.";if(ke>v)return"El pago inicial no puede superar el total.";if((_e==null?void 0:_e.status)==="BLOQUEADO")return"El cliente est BLOQUEADO. No se puede fiar."}for(const xe of p){const Ae=xe.qty,{allocations:Re,avgUnitCost:lt,cogsAmount:Ne}=await RPe(Se,xe.productName,Ae,!1),De=z(xe),xt=Number(De||0)*Number(Ae||0),_t=Math.max(0,Number(xe.discount||0)),Et=Math.max(0,xt-_t);q.push({productId:xe.productId,productName:xe.productName,measurement:xe.measurement,unitPrice:Number(De||0),regularPrice:Number(xe.price||0),specialPrice:Number(xe.specialPrice||0)>0?Number(xe.specialPrice):null,qty:Ae,discount:_t,lineTotal:D(xt),lineFinal:D(Et),allocations:Re,avgUnitCost:lt,cogsAmount:Ne})}const se=q.reduce((xe,Ae)=>xe+Ae.lineFinal,0),ye=q.reduce((xe,Ae)=>xe+Number(Ae.qty||0),0),ue=Number(me==="CREDITO"?ke||0:b||0),Le=me==="CREDITO"?"0.00":j,ct={id:DPe(),quantity:ye,amount:se,amountCharged:se,timestamp:Ar.now(),date:u,userEmail:(t==null?void 0:t.email)??((qe=s[0])==null?void 0:qe.email)??"sin usuario",vendor:e??((ge=s[0])==null?void 0:ge.role)??"sin usuario",status:"FLOTANTE",items:q,itemsTotal:se,type:me,amountReceived:ue,change:Le,customerId:me==="CREDITO"?ae:"",customerName:me==="CREDITO"?(_e==null?void 0:_e.name)||"":f.trim(),clientName:me==="CONTADO"?f.trim():""};if(me==="CONTADO"){if(!f.trim()){S(" Ingresa el nombre del cliente (contado).");return}}else{if(!ae){S(" Selecciona un cliente (crdito).");return}if(ke<0){S(" El pago inicial no puede ser negativo.");return}if(ke>v){S(" El pago inicial no puede superar el total.");return}if((_e==null?void 0:_e.status)==="BLOQUEADO"){S(" El cliente est BLOQUEADO. No se puede fiar.");return}const xe=Number((_e==null?void 0:_e.creditLimit)||0);if(xe>0&&At>xe){S(` Supera el lmite de crdito (C$ ${xe.toFixed(2)}).`);return}}const ht=await Jn(mt(Se,"salesV2"),ct);if(me==="CREDITO"&&ae){const xe={customerId:ae,date:u,createdAt:Ar.now(),ref:{saleId:ht.id}};await Jn(mt(Se,"ar_movements_pollo"),{...xe,type:"CARGO",amount:Number(se)||0}),Number(ke)>0&&await Jn(mt(Se,"ar_movements_pollo"),{...xe,type:"ABONO",amount:-Number(ke)}),ve(Ae=>Ae.map(Re=>Re.id===ae?{...Re,balance:Number(Re.balance||0)+Number(se||0)-Number(ke||0)}:Re))}S(" Venta registrada y asignada a inventario (FIFO)."),x([]),c(""),y(0),w(0),I("0"),A(""),d(Rr(new Date,"yyyy-MM-dd")),Pe(""),O(0),pe("CONTADO")}catch(q){console.error(q),S(` ${(q==null?void 0:q.message)||"Error al registrar la venta."}`)}finally{T(!1)}},Nt=g.useMemo(()=>new Set(p.map(Ve=>Ve.productId)),[p]),jt=g.useMemo(()=>n.filter(Ve=>(k[Ve.id]||0)>0),[n,k]),St=g.useMemo(()=>{const Ve=String(h||"").trim().toLowerCase();return Ve?jt.filter(Te=>`${Te.productName||""}`.toLowerCase().includes(Ve)):jt},[jt,h]);return Oe?i.jsx("div",{className:"w-full max-w-lg mx-auto p-3",children:i.jsxs("div",{className:"bg-white rounded-2xl shadow p-3 space-y-3",children:[i.jsxs("div",{className:"flex items-center justify-between",children:[i.jsx("h2",{className:"font-bold text-lg text-blue-700",children:"Registrar venta (Pollo)"}),i.jsx("input",{type:"date",className:"text-sm text-gray-700 border rounded px-2 py-1",value:u,onChange:Ve=>d(Ve.target.value),"aria-label":"Fecha de la venta"})]}),i.jsxs("div",{className:"space-y-2",children:[i.jsx("label",{className:"text-sm font-semibold",children:"Tipo de cliente"}),i.jsxs("select",{className:"w-full border rounded px-2 py-2",value:me,onChange:Ve=>G(Ve.target.value),children:[i.jsx("option",{value:"CONTADO",children:"Contado"}),i.jsx("option",{value:"CREDITO",children:"Crdito"})]})]}),me==="CONTADO"?i.jsxs("div",{className:"space-y-2",children:[i.jsx("label",{className:"text-sm font-semibold",children:"Cliente (Contado)"}),i.jsx("input",{className:"w-full border rounded px-2 py-2",value:f,onChange:Ve=>A(Ve.target.value),placeholder:"Ej: Cliente Mostrador"})]}):i.jsxs("div",{className:"space-y-2",children:[i.jsx("label",{className:"text-sm font-semibold",children:"Cliente (Crdito)"}),i.jsxs("select",{className:"w-full border rounded px-2 py-2",value:ae,onChange:Ve=>Pe(Ve.target.value),children:[i.jsx("option",{value:"",children:"Selecciona un cliente"}),he.map(Ve=>i.jsxs("option",{value:Ve.status==="ACTIVO"?Ve.id:"",disabled:Ve.status==="BLOQUEADO",children:[Ve.name,"  Saldo: ",f0(Ve.balance||0)]},Ve.id))]}),i.jsxs("div",{className:"grid grid-cols-2 gap-2",children:[i.jsxs("div",{className:"p-2 rounded bg-gray-50 border",children:[i.jsx("div",{className:"text-xs text-gray-600",children:"Saldo actual"}),i.jsx("div",{className:"text-base font-semibold",children:f0(Ue)})]}),i.jsxs("div",{className:"p-2 rounded bg-gray-50 border",children:[i.jsx("div",{className:"text-xs text-gray-600",children:"Saldo proyectado"}),i.jsx("div",{className:"text-base font-semibold",children:f0(At)})]})]}),i.jsxs("div",{children:[i.jsx("label",{className:"text-sm font-semibold",children:"Pago inicial"}),i.jsx("input",{className:"w-full border rounded px-2 py-2",type:"number",step:"0.01",inputMode:"decimal",max:Ye,value:ke===0?"":ke,onChange:Ve=>{const Te=Math.max(0,Number(Ve.target.value||0)),qe=Math.min(Te,Ye);O(qe)},placeholder:"0.00"}),i.jsxs("div",{className:"text-xs text-gray-500 mt-1",children:["Mximo: ",f0(Ye)]})]})]}),i.jsxs("div",{className:"space-y-2",children:[i.jsx("label",{className:"text-sm font-semibold",children:"Producto"}),i.jsx("input",{className:"w-full border rounded px-2 py-2 mb-2",placeholder:"Buscar producto por nombre...",value:h,onChange:Ve=>m(Ve.target.value)}),i.jsx("div",{className:"flex gap-2",children:i.jsxs("select",{className:"flex-1 border rounded px-1 py-2 text-sm",value:l,onChange:async Ve=>{const Te=Ve.target.value;c(Te),await M(Te)},children:[i.jsx("option",{value:"",disabled:!0,children:"Selecciona un producto"}),St.map(Ve=>i.jsxs("option",{value:Ve.id,disabled:Nt.has(Ve.id),children:[Ve.productName," | C$ ",Ve.price," | Disp:"," ",X(k[Ve.id]||0)]},Ve.id))]})})]}),i.jsxs("div",{className:"space-y-2",children:[i.jsx("div",{className:"text-sm font-semibold",children:"Items"}),p.length===0?i.jsx("div",{className:"text-gray-500",children:"Agrega productos al carrito."}):i.jsx("div",{className:"space-y-2",children:p.map(Ve=>{const Te=z(Ve),qe=Number(Te||0)*Number(Ve.qty||0),ge=Math.max(0,qe-Math.max(0,Number(Ve.discount||0))),q=(Ve.measurement||"").toLowerCase()!=="lb";return i.jsxs("div",{className:"border rounded p-2",children:[i.jsxs("div",{className:"flex justify-between items-center",children:[i.jsx("div",{className:"font-semibold",children:Ve.productName}),i.jsxs("div",{className:"text-sm",children:["C$ ",D(Te).toFixed(2)]})]}),i.jsxs("div",{className:"mt-2 grid grid-cols-3 gap-2 items-center",children:[i.jsx("input",{className:"border rounded px-2 py-1 text-right",inputMode:q?"numeric":"decimal",step:q?1:.01,value:Ve.qtyInput??(Ve.qty===0?"":Ve.qty),onKeyDown:J,onChange:se=>Ce(Ve.productId,se.target.value),placeholder:q?"Unid":"Libras",title:q?"Unidades":"Libras"}),i.jsx("input",{className:"border rounded px-1 py-1 text-right",inputMode:"numeric",value:Ve.discountInput??(Ve.discount===0?"":Ve.discount),onChange:se=>We(Ve.productId,se.target.value),placeholder:"Descuento",title:"Descuento (C$)"}),i.jsx("input",{className:"border rounded px-2 py-1 text-right",inputMode:"decimal",value:Ve.specialPriceInput??(Ve.specialPrice===0?"":Ve.specialPrice),onChange:se=>V(Ve.productId,se.target.value),placeholder:"Sugerido",title:"Precio sugerido (opcional)"})]}),i.jsxs("div",{className:"mt-2 flex items-center justify-between",children:[i.jsxs("div",{className:"text-sm text-gray-600",children:["Exist:"," ",As(Number(Ve.stock)-Number(Ve.qty||0)).toFixed(3)]}),i.jsxs("div",{className:"font-semibold",children:["C$ ",D(ge).toFixed(2)]})]}),i.jsx("div",{className:"mt-2 text-right",children:i.jsx("button",{type:"button",className:"px-2 py-1 rounded bg-red-100 text-red-600",onClick:()=>H(Ve.productId),children:"Quitar"})})]},Ve.productId)})})]}),i.jsxs("div",{className:"space-y-2",children:[i.jsx("div",{className:"text-sm font-semibold",children:"Monto total"}),i.jsxs("div",{className:"text-xl font-bold",children:["C$ ",v.toFixed(2)]})]}),me==="CONTADO"&&i.jsxs("div",{className:"grid grid-cols-2 gap-2",children:[i.jsx("input",{className:"border rounded px-2 py-2",inputMode:"decimal",value:b===0?"":b,onChange:Ve=>w(Number(Ve.target.value||0)),placeholder:"Monto recibido"}),i.jsxs("div",{className:"border rounded px-2 py-2 bg-gray-100",children:["Cambio: C$ ",j]})]}),i.jsx("button",{onClick:bt,disabled:p.length===0||E,className:"w-full bg-blue-600 text-white px-4 py-2 rounded",children:E?"Guardando...":"Guardar venta"}),_&&i.jsx("div",{className:`text-sm ${_.startsWith("")?"text-green-600":_.startsWith("")?"text-yellow-600":"text-red-600"}`,children:_})]})}):i.jsxs("div",{className:"relative",children:[i.jsxs("form",{onSubmit:bt,className:`w-full mx-auto bg-white rounded-2xl shadow-2xl
                 p-4 sm:p-6 md:p-8
                 max-w-5xl space-y-4`,children:[i.jsx("div",{className:"flex items-center justify-between",children:i.jsx("h2",{className:"text-xl sm:text-2xl font-bold text-blue-700 whitespace-nowrap",children:"Registrar venta (Pollo)"})}),i.jsxs("div",{className:"space-y-1",children:[i.jsx("label",{className:"block text-sm font-semibold text-gray-700",children:"Producto | Precio por Libra/Unidad"}),i.jsxs("div",{className:"flex gap-2",children:[i.jsxs("select",{className:"flex-1 border border-gray-300 p-2 rounded-2xl shadow-2xl focus:ring-2 focus:ring-blue-400",value:l,onChange:Ve=>c(Ve.target.value),children:[i.jsx("option",{value:"",disabled:!0,children:"Selecciona un producto"}),jt.map(Ve=>i.jsxs("option",{value:Ve.id,disabled:Nt.has(Ve.id),title:Nt.has(Ve.id)?"Ya est en la lista":`Disponible: ${X(k[Ve.id]||0)}`,children:[Ve.productName,"  ",Ve.measurement,"  C$ ",Ve.price," (disp:"," ",X(k[Ve.id]||0),")"]},Ve.id))]}),i.jsx("button",{type:"button",onClick:ee,disabled:!l||Nt.has(l),className:"px-3 py-2 rounded-2xl shadow-2xl bg-blue-600 text-white hover:bg-blue-700 disabled:opacity-50",children:"Agregar"})]})]}),i.jsxs("div",{className:"grid md:grid-cols-2 gap-3",children:[i.jsxs("div",{className:"space-y-1",children:[i.jsx("label",{className:"block text-sm font-semibold text-gray-700",children:"Fecha de la venta"}),i.jsx("input",{type:"date",className:"w-full border border-gray-300 p-2 rounded-2xl shadow-2xl focus:ring-2 focus:ring-blue-400",value:u,onChange:Ve=>d(Ve.target.value)})]}),i.jsxs("div",{className:"space-y-1",children:[i.jsx("label",{className:"block text-sm font-semibold text-gray-700",children:"Tipo de cliente"}),i.jsxs("select",{className:"w-full border border-gray-300 p-2 rounded-2xl shadow-2xl",value:me,onChange:Ve=>G(Ve.target.value),children:[i.jsx("option",{value:"CONTADO",children:"Contado"}),i.jsx("option",{value:"CREDITO",children:"Crdito"})]})]}),me==="CONTADO"?i.jsxs("div",{className:"md:col-span-2 space-y-1",children:[i.jsx("label",{className:"block text-sm font-semibold text-gray-700",children:"Cliente (Contado)"}),i.jsx("input",{className:"w-full border border-gray-300 p-2 rounded-2xl shadow-2xl",value:f,onChange:Ve=>A(Ve.target.value),placeholder:"Ej: Cliente Mostrador"})]}):i.jsxs("div",{className:"md:col-span-2 space-y-2",children:[i.jsx("label",{className:"block text-sm font-semibold text-gray-700",children:"Cliente (Crdito)"}),i.jsxs("select",{className:"w-full border border-gray-300 p-2 rounded-2xl shadow-2xl",value:ae,onChange:Ve=>Pe(Ve.target.value),children:[i.jsx("option",{value:"",children:"Selecciona un cliente"}),he.map(Ve=>i.jsxs("option",{value:Ve.status==="ACTIVO"?Ve.id:"",disabled:Ve.status==="BLOQUEADO",children:[Ve.name,"  Saldo: ",f0(Ve.balance||0)]},Ve.id))]}),i.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-3",children:[i.jsxs("div",{className:"p-2 rounded bg-gray-50 border",children:[i.jsx("div",{className:"text-xs text-gray-600",children:"Saldo actual"}),i.jsx("div",{className:"text-lg font-semibold",children:f0(Ue)})]}),i.jsxs("div",{children:[i.jsx("label",{className:"block text-sm font-semibold text-gray-700",children:"Pago inicial"}),i.jsxs("div",{className:"text-xs text-gray-500 mt-1",children:["Mximo: ",f0(Ye)]}),i.jsx("input",{type:"number",step:"0.01",inputMode:"decimal",max:Ye,className:"w-full border border-gray-300 p-2 rounded-2xl shadow-2xl",value:ke===0?"":ke,onChange:Ve=>{const Te=Math.max(0,Number(Ve.target.value||0)),qe=Math.min(Te,Ye);O(qe)},placeholder:"0.00"})]}),i.jsxs("div",{className:"p-2 rounded bg-gray-50 border",children:[i.jsx("div",{className:"text-xs text-gray-600",children:"Saldo proyectado"}),i.jsx("div",{className:"text-lg font-semibold",children:f0(At)})]})]})]})]}),i.jsx("div",{className:"rounded border overflow-x-auto shadow-2xl",children:i.jsxs("table",{className:"min-w-full text-sm r",children:[i.jsx("thead",{className:"bg-gray-100",children:i.jsxs("tr",{className:"text-center",children:[i.jsx("th",{className:"p-2 border whitespace-nowrap",children:"Producto"}),i.jsx("th",{className:"p-2 border whitespace-nowrap",children:"Precio"}),i.jsx("th",{className:"p-2 border whitespace-nowrap",children:"Precio especial"}),i.jsx("th",{className:"p-2 border whitespace-nowrap",children:"Existencias"}),i.jsx("th",{className:"p-2 border whitespace-nowrap",children:"Cantidad"}),i.jsx("th",{className:"p-2 border whitespace-nowrap",children:"Descuento"}),i.jsx("th",{className:"p-2 border whitespace-nowrap",children:"Monto"}),i.jsx("th",{className:"p-2 border",children:""})]})}),i.jsx("tbody",{children:p.length===0?i.jsx("tr",{children:i.jsx("td",{colSpan:8,className:"p-4 text-center text-gray-500",children:"Agrega productos al carrito."})}):p.map(Ve=>{const Te=z(Ve),qe=Number(Te||0)*Number(Ve.qty||0),ge=Math.max(0,qe-Math.max(0,Number(Ve.discount||0))),q=(Ve.measurement||"").toLowerCase()!=="lb",se=As(Number(Ve.stock)-Number(Ve.qty||0));return i.jsxs("tr",{className:"text-center",children:[i.jsxs("td",{className:"p-2 border whitespace-nowrap",children:[Ve.productName,"  ",Ve.measurement]}),i.jsxs("td",{className:"p-2 border whitespace-nowrap",children:["C$ ",D(Ve.price).toFixed(2)]}),i.jsxs("td",{className:"p-2 border",children:[i.jsx("input",{type:"number",step:"0.01",inputMode:"decimal",className:"w-28 border p-1 rounded text-right",value:Ve.specialPrice===0?"":Ve.specialPrice,onKeyDown:J,onChange:ye=>V(Ve.productId,ye.target.value),placeholder:"",title:"Precio especial (si se deja vaco, se usa el precio normal)"}),i.jsxs("div",{className:"text-[11px] text-gray-500 mt-1",children:["Aplicado: C$ ",D(Te).toFixed(2)]})]}),i.jsx("td",{className:"p-2 border whitespace-nowrap",children:se.toFixed(3)}),i.jsx("td",{className:"p-2 border",children:i.jsx("input",{type:"number",step:q?1:.01,inputMode:q?"numeric":"decimal",className:"w-28 border p-1 rounded text-right",value:Ve.qtyInput??(Ve.qty===0?"":Ve.qty),onKeyDown:J,onChange:ye=>Ce(Ve.productId,ye.target.value),placeholder:"0",title:"Cantidad"})}),i.jsx("td",{className:"p-2 border",children:i.jsx("input",{type:"number",step:1,min:0,className:"w-24 border p-1 rounded text-right",value:Ve.discount===0?"":Ve.discount,onChange:ye=>We(Ve.productId,ye.target.value),inputMode:"numeric",placeholder:"0",title:"Descuento (entero C$)"})}),i.jsxs("td",{className:"p-2 border whitespace-nowrap",children:["C$ ",D(ge).toFixed(2)]}),i.jsx("td",{className:"p-2 border",children:i.jsx("button",{type:"button",className:"px-2 py-1 rounded bg-red-100 text-red-600 hover:bg-red-200",onClick:()=>H(Ve.productId),title:"Quitar",children:""})})]},Ve.productId)})})]})}),i.jsxs("div",{className:"space-y-1 ",children:[i.jsx("label",{className:"block text-sm font-semibold text-gray-700 ",children:" Monto total"}),i.jsx("input",{type:"text",className:"w-full border border-gray-300 p-2 rounded-2xl shadow-2xl bg-gray-100",value:`C$ ${v.toFixed(2)}`,readOnly:!0,title:"Suma de (precio aplicado  cantidad  descuento) de cada producto."})]}),me==="CONTADO"&&i.jsx(i.Fragment,{children:i.jsxs("div",{className:"grid grid-cols-2 gap-x-3",children:[i.jsxs("div",{className:"space-y-1",children:[i.jsx("label",{className:"block text-sm font-semibold text-gray-700",children:"Monto recibido"}),i.jsx("input",{type:"number",step:"0.01",inputMode:"decimal",className:"w-full border border-gray-300 p-2 rounded-2xl shadow-2xl",value:b===0?"":b,onChange:Ve=>w(Number(Ve.target.value||0))})]}),i.jsxs("div",{className:"space-y-1",children:[i.jsx("label",{className:"block text-sm font-semibold text-gray-700",children:"Cambio"}),i.jsx("input",{type:"text",className:"w-full border border-gray-300 p-2 rounded-2xl shadow-2xl bg-gray-100",value:`C$ ${j}`,readOnly:!0})]})]})}),i.jsx("button",{type:"submit",className:"w-full bg-blue-600 text-white px-4 py-3 sm:py-2 rounded-2xl shadow-2xl font-semibold shadow hover:bg-blue-700 transition disabled:opacity-50",disabled:p.length===0||E,children:E?"Guardando...":"Guardar venta"}),_&&i.jsx("p",{className:`text-sm mt-2 ${_.startsWith("")?"text-green-600":_.startsWith("")?"text-yellow-600":"text-red-600"}`,children:_})]}),E&&i.jsx("div",{className:"fixed inset-0 bg-black/40 z-[60] flex items-center justify-center",children:i.jsx("div",{className:"bg-white rounded-lg shadow-xl border px-6 py-5",children:i.jsxs("div",{className:"flex items-center gap-3",children:[i.jsxs("svg",{className:"animate-spin h-5 w-5",viewBox:"0 0 24 24",fill:"none",children:[i.jsx("circle",{className:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor",strokeWidth:"4"}),i.jsx("path",{className:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8v4a4 4 0 00-4 4H4z"})]}),i.jsx("span",{className:"font-semibold",children:"Guardando venta"})]})})})]})}function $re(t,e,r,n,a){n=n||{};var s=1.15,o=a.internal.scaleFactor,l=a.internal.getFontSize()/o,c=a.getLineHeightFactor?a.getLineHeightFactor():s,u=l*c,d=/\r\n|\r|\n/g,f="",A=1;if((n.valign==="middle"||n.valign==="bottom"||n.halign==="center"||n.halign==="right")&&(f=typeof t=="string"?t.split(d):t,A=f.length||1),r+=l*(2-s),n.valign==="middle"?r-=A/2*u:n.valign==="bottom"&&(r-=A*u),n.halign==="center"||n.halign==="right"){var h=l;if(n.halign==="center"&&(h*=.5),f&&A>=1){for(var m=0;m<f.length;m++)a.text(f[m],e-a.getStringUnitWidth(f[m])*h,r),r+=u;return a}e-=a.getStringUnitWidth(t)*h}return n.halign==="justify"?a.text(t,e,r,{maxWidth:n.maxWidth||100,align:"justify"}):a.text(t,e,r),a}var YV={},Av=function(){function t(e){this.jsPDFDocument=e,this.userStyles={textColor:e.getTextColor?this.jsPDFDocument.getTextColor():0,fontSize:e.internal.getFontSize(),fontStyle:e.internal.getFont().fontStyle,font:e.internal.getFont().fontName,lineWidth:e.getLineWidth?this.jsPDFDocument.getLineWidth():0,lineColor:e.getDrawColor?this.jsPDFDocument.getDrawColor():0}}return t.setDefaults=function(e,r){r===void 0&&(r=null),r?r.__autoTableDocumentDefaults=e:YV=e},t.unifyColor=function(e){return Array.isArray(e)?e:typeof e=="number"?[e,e,e]:typeof e=="string"?[e]:null},t.prototype.applyStyles=function(e,r){var n,a,s;r===void 0&&(r=!1),e.fontStyle&&this.jsPDFDocument.setFontStyle&&this.jsPDFDocument.setFontStyle(e.fontStyle);var o=this.jsPDFDocument.internal.getFont(),l=o.fontStyle,c=o.fontName;if(e.font&&(c=e.font),e.fontStyle){l=e.fontStyle;var u=this.getFontList()[c];u&&u.indexOf(l)===-1&&this.jsPDFDocument.setFontStyle&&(this.jsPDFDocument.setFontStyle(u[0]),l=u[0])}if(this.jsPDFDocument.setFont(c,l),e.fontSize&&this.jsPDFDocument.setFontSize(e.fontSize),!r){var d=t.unifyColor(e.fillColor);d&&(n=this.jsPDFDocument).setFillColor.apply(n,d),d=t.unifyColor(e.textColor),d&&(a=this.jsPDFDocument).setTextColor.apply(a,d),d=t.unifyColor(e.lineColor),d&&(s=this.jsPDFDocument).setDrawColor.apply(s,d),typeof e.lineWidth=="number"&&this.jsPDFDocument.setLineWidth(e.lineWidth)}},t.prototype.splitTextToSize=function(e,r,n){return this.jsPDFDocument.splitTextToSize(e,r,n)},t.prototype.rect=function(e,r,n,a,s){return this.jsPDFDocument.rect(e,r,n,a,s)},t.prototype.getLastAutoTable=function(){return this.jsPDFDocument.lastAutoTable||null},t.prototype.getTextWidth=function(e){return this.jsPDFDocument.getTextWidth(e)},t.prototype.getDocument=function(){return this.jsPDFDocument},t.prototype.setPage=function(e){this.jsPDFDocument.setPage(e)},t.prototype.addPage=function(){return this.jsPDFDocument.addPage()},t.prototype.getFontList=function(){return this.jsPDFDocument.getFontList()},t.prototype.getGlobalOptions=function(){return YV||{}},t.prototype.getDocumentOptions=function(){return this.jsPDFDocument.__autoTableDocumentDefaults||{}},t.prototype.pageSize=function(){var e=this.jsPDFDocument.internal.pageSize;return e.width==null&&(e={width:e.getWidth(),height:e.getHeight()}),e},t.prototype.scaleFactor=function(){return this.jsPDFDocument.internal.scaleFactor},t.prototype.getLineHeightFactor=function(){var e=this.jsPDFDocument;return e.getLineHeightFactor?e.getLineHeightFactor():1.15},t.prototype.getLineHeight=function(e){return e/this.scaleFactor()*this.getLineHeightFactor()},t.prototype.pageNumber=function(){var e=this.jsPDFDocument.internal.getCurrentPageInfo();return e?e.pageNumber:this.jsPDFDocument.internal.getNumberOfPages()},t}(),Gk=function(t,e){return Gk=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,n){r.__proto__=n}||function(r,n){for(var a in n)Object.prototype.hasOwnProperty.call(n,a)&&(r[a]=n[a])},Gk(t,e)};function Gre(t,e){if(typeof e!="function"&&e!==null)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");Gk(t,e);function r(){this.constructor=t}t.prototype=e===null?Object.create(e):(r.prototype=e.prototype,new r)}var Kre=function(t){Gre(e,t);function e(r){var n=t.call(this)||this;return n._element=r,n}return e}(Array);function UPe(t){return{font:"helvetica",fontStyle:"normal",overflow:"linebreak",fillColor:!1,textColor:20,halign:"left",valign:"top",fontSize:10,cellPadding:5/t,lineColor:200,lineWidth:0,cellWidth:"auto",minCellHeight:0,minCellWidth:0}}function QPe(t){var e={striped:{table:{fillColor:255,textColor:80,fontStyle:"normal"},head:{textColor:255,fillColor:[41,128,185],fontStyle:"bold"},body:{},foot:{textColor:255,fillColor:[41,128,185],fontStyle:"bold"},alternateRow:{fillColor:245}},grid:{table:{fillColor:255,textColor:80,fontStyle:"normal",lineWidth:.1},head:{textColor:255,fillColor:[26,188,156],fontStyle:"bold",lineWidth:0},body:{},foot:{textColor:255,fillColor:[26,188,156],fontStyle:"bold",lineWidth:0},alternateRow:{}},plain:{head:{fontStyle:"bold"},foot:{fontStyle:"bold"}}};return e[t]}function DS(t,e,r){r.applyStyles(e,!0);var n=Array.isArray(t)?t:[t],a=n.map(function(s){return r.getTextWidth(s)}).reduce(function(s,o){return Math.max(s,o)},0);return a}function qre(t,e,r,n){var a=e.settings.tableLineWidth,s=e.settings.tableLineColor;t.applyStyles({lineWidth:a,lineColor:s});var o=zre(a,!1);o&&t.rect(r.x,r.y,e.getWidth(t.pageSize().width),n.y-r.y,o)}function zre(t,e){var r=t>0,n=e||e===0;return r&&n?"DF":r?"S":n?"F":null}function sP(t,e){var r,n,a,s;if(t=t||e,Array.isArray(t)){if(t.length>=4)return{top:t[0],right:t[1],bottom:t[2],left:t[3]};if(t.length===3)return{top:t[0],right:t[1],bottom:t[2],left:t[1]};if(t.length===2)return{top:t[0],right:t[1],bottom:t[0],left:t[1]};t.length===1?t=t[0]:t=e}return typeof t=="object"?(typeof t.vertical=="number"&&(t.top=t.vertical,t.bottom=t.vertical),typeof t.horizontal=="number"&&(t.right=t.horizontal,t.left=t.horizontal),{left:(r=t.left)!==null&&r!==void 0?r:e,top:(n=t.top)!==null&&n!==void 0?n:e,right:(a=t.right)!==null&&a!==void 0?a:e,bottom:(s=t.bottom)!==null&&s!==void 0?s:e}):(typeof t!="number"&&(t=e),{top:t,right:t,bottom:t,left:t})}function Wre(t,e){var r=sP(e.settings.margin,0);return t.pageSize().width-(r.left+r.right)}function VPe(t,e,r,n,a){var s={},o=1.3333333333333333,l=y5(e,function(b){return a.getComputedStyle(b).backgroundColor});l!=null&&(s.fillColor=l);var c=y5(e,function(b){return a.getComputedStyle(b).color});c!=null&&(s.textColor=c);var u=$Pe(n,r);u&&(s.cellPadding=u);var d="borderTopColor",f=o*r,A=n.borderTopWidth;if(n.borderBottomWidth===A&&n.borderRightWidth===A&&n.borderLeftWidth===A){var h=(parseFloat(A)||0)/f;h&&(s.lineWidth=h)}else s.lineWidth={top:(parseFloat(n.borderTopWidth)||0)/f,right:(parseFloat(n.borderRightWidth)||0)/f,bottom:(parseFloat(n.borderBottomWidth)||0)/f,left:(parseFloat(n.borderLeftWidth)||0)/f},s.lineWidth.top||(s.lineWidth.right?d="borderRightColor":s.lineWidth.bottom?d="borderBottomColor":s.lineWidth.left&&(d="borderLeftColor"));var m=y5(e,function(b){return a.getComputedStyle(b)[d]});m!=null&&(s.lineColor=m);var p=["left","right","center","justify"];p.indexOf(n.textAlign)!==-1&&(s.halign=n.textAlign),p=["middle","bottom","top"],p.indexOf(n.verticalAlign)!==-1&&(s.valign=n.verticalAlign);var x=parseInt(n.fontSize||"");isNaN(x)||(s.fontSize=x/o);var v=HPe(n);v&&(s.fontStyle=v);var y=(n.fontFamily||"").toLowerCase();return t.indexOf(y)!==-1&&(s.font=y),s}function HPe(t){var e="";return(t.fontWeight==="bold"||t.fontWeight==="bolder"||parseInt(t.fontWeight)>=700)&&(e="bold"),(t.fontStyle==="italic"||t.fontStyle==="oblique")&&(e+="italic"),e}function y5(t,e){var r=Xre(t,e);if(!r)return null;var n=r.match(/^rgba?\((\d+),\s*(\d+),\s*(\d+)(?:,\s*(\d*\.?\d*))?\)$/);if(!n||!Array.isArray(n))return null;var a=[parseInt(n[1]),parseInt(n[2]),parseInt(n[3])],s=parseInt(n[4]);return s===0||isNaN(a[0])||isNaN(a[1])||isNaN(a[2])?null:a}function Xre(t,e){var r=e(t);return r==="rgba(0, 0, 0, 0)"||r==="transparent"||r==="initial"||r==="inherit"?t.parentElement==null?null:Xre(t.parentElement,e):r}function $Pe(t,e){var r=[t.paddingTop,t.paddingRight,t.paddingBottom,t.paddingLeft],n=96/(72/e),a=(parseInt(t.lineHeight)-parseInt(t.fontSize))/e/2,s=r.map(function(l){return parseInt(l||"0")/n}),o=sP(s,0);return a>o.top&&(o.top=a),a>o.bottom&&(o.bottom=a),o}function Yre(t,e,r,n,a){var s,o;n===void 0&&(n=!1),a===void 0&&(a=!1);var l;typeof e=="string"?l=r.document.querySelector(e):l=e;var c=Object.keys(t.getFontList()),u=t.scaleFactor(),d=[],f=[],A=[];if(!l)return console.error("Html table could not be found with input: ",e),{head:d,body:f,foot:A};for(var h=0;h<l.rows.length;h++){var m=l.rows[h],p=(o=(s=m==null?void 0:m.parentElement)===null||s===void 0?void 0:s.tagName)===null||o===void 0?void 0:o.toLowerCase(),x=GPe(c,u,r,m,n,a);x&&(p==="thead"?d.push(x):p==="tfoot"?A.push(x):f.push(x))}return{head:d,body:f,foot:A}}function GPe(t,e,r,n,a,s){for(var o=new Kre(n),l=0;l<n.cells.length;l++){var c=n.cells[l],u=r.getComputedStyle(c);if(a||u.display!=="none"){var d=void 0;s&&(d=VPe(t,c,e,u,r)),o.push({rowSpan:c.rowSpan,colSpan:c.colSpan,styles:d,_element:c,content:KPe(c)})}}var f=r.getComputedStyle(n);if(o.length>0&&(a||f.display!=="none"))return o}function KPe(t){var e=t.cloneNode(!0);return e.innerHTML=e.innerHTML.replace(/\n/g,"").replace(/ +/g," "),e.innerHTML=e.innerHTML.split(/<br.*?>/).map(function(r){return r.trim()}).join(`
`),e.innerText||e.textContent||""}function qPe(t,e,r){for(var n=0,a=[t,e,r];n<a.length;n++){var s=a[n];s&&typeof s!="object"&&console.error("The options parameter should be of type object, is: "+typeof s),s.startY&&typeof s.startY!="number"&&(console.error("Invalid value for startY option",s.startY),delete s.startY)}}function Wh(t,e,r,n,a){if(t==null)throw new TypeError("Cannot convert undefined or null to object");for(var s=Object(t),o=1;o<arguments.length;o++){var l=arguments[o];if(l!=null)for(var c in l)Object.prototype.hasOwnProperty.call(l,c)&&(s[c]=l[c])}return s}function Jre(t,e){var r=new Av(t),n=r.getDocumentOptions(),a=r.getGlobalOptions();qPe(a,n,e);var s=Wh({},a,n,e),o;typeof window<"u"&&(o=window);var l=zPe(a,n,e),c=WPe(a,n,e),u=XPe(r,s),d=JPe(r,s,o);return{id:e.tableId,content:d,hooks:c,styles:l,settings:u}}function zPe(t,e,r){for(var n={styles:{},headStyles:{},bodyStyles:{},footStyles:{},alternateRowStyles:{},columnStyles:{}},a=function(c){if(c==="columnStyles"){var u=t[c],d=e[c],f=r[c];n.columnStyles=Wh({},u,d,f)}else{var A=[t,e,r],h=A.map(function(m){return m[c]||{}});n[c]=Wh({},h[0],h[1],h[2])}},s=0,o=Object.keys(n);s<o.length;s++){var l=o[s];a(l)}return n}function WPe(t,e,r){for(var n=[t,e,r],a={didParseCell:[],willDrawCell:[],didDrawCell:[],willDrawPage:[],didDrawPage:[]},s=0,o=n;s<o.length;s++){var l=o[s];l.didParseCell&&a.didParseCell.push(l.didParseCell),l.willDrawCell&&a.willDrawCell.push(l.willDrawCell),l.didDrawCell&&a.didDrawCell.push(l.didDrawCell),l.willDrawPage&&a.willDrawPage.push(l.willDrawPage),l.didDrawPage&&a.didDrawPage.push(l.didDrawPage)}return a}function XPe(t,e){var r,n,a,s,o,l,c,u,d,f,A,h,m=sP(e.margin,40/t.scaleFactor()),p=(r=YPe(t,e.startY))!==null&&r!==void 0?r:m.top,x;e.showFoot===!0?x="everyPage":e.showFoot===!1?x="never":x=(n=e.showFoot)!==null&&n!==void 0?n:"everyPage";var v;e.showHead===!0?v="everyPage":e.showHead===!1?v="never":v=(a=e.showHead)!==null&&a!==void 0?a:"everyPage";var y=(s=e.useCss)!==null&&s!==void 0?s:!1,b=e.theme||(y?"plain":"striped"),w=!!e.horizontalPageBreak,j=(o=e.horizontalPageBreakRepeat)!==null&&o!==void 0?o:null;return{includeHiddenHtml:(l=e.includeHiddenHtml)!==null&&l!==void 0?l:!1,useCss:y,theme:b,startY:p,margin:m,pageBreak:(c=e.pageBreak)!==null&&c!==void 0?c:"auto",rowPageBreak:(u=e.rowPageBreak)!==null&&u!==void 0?u:"auto",tableWidth:(d=e.tableWidth)!==null&&d!==void 0?d:"auto",showHead:v,showFoot:x,tableLineWidth:(f=e.tableLineWidth)!==null&&f!==void 0?f:0,tableLineColor:(A=e.tableLineColor)!==null&&A!==void 0?A:200,horizontalPageBreak:w,horizontalPageBreakRepeat:j,horizontalPageBreakBehaviour:(h=e.horizontalPageBreakBehaviour)!==null&&h!==void 0?h:"afterAllRows"}}function YPe(t,e){var r=t.getLastAutoTable(),n=t.scaleFactor(),a=t.pageNumber(),s=!1;if(r&&r.startPageNumber){var o=r.startPageNumber+r.pageNumber-1;s=o===a}return typeof e=="number"?e:(e==null||e===!1)&&s&&(r==null?void 0:r.finalY)!=null?r.finalY+20/n:null}function JPe(t,e,r){var n=e.head||[],a=e.body||[],s=e.foot||[];if(e.html){var o=e.includeHiddenHtml;if(r){var l=Yre(t,e.html,r,o,e.useCss)||{};n=l.head||n,a=l.body||n,s=l.foot||n}else console.error("Cannot parse html in non browser environment")}var c=e.columns||ZPe(n,a,s);return{columns:c,head:n,body:a,foot:s}}function ZPe(t,e,r){var n=t[0]||e[0]||r[0]||[],a=[];return Object.keys(n).filter(function(s){return s!=="_element"}).forEach(function(s){var o=1,l;Array.isArray(n)?l=n[parseInt(s)]:l=n[s],typeof l=="object"&&!Array.isArray(l)&&(o=(l==null?void 0:l.colSpan)||1);for(var c=0;c<o;c++){var u=void 0;Array.isArray(n)?u=a.length:u=s+(c>0?"_".concat(c):"");var d={dataKey:u};a.push(d)}}),a}var Kk=function(){function t(e,r,n){this.table=r,this.pageNumber=r.pageNumber,this.settings=r.settings,this.cursor=n,this.doc=e.getDocument()}return t}(),e4e=function(t){Gre(e,t);function e(r,n,a,s,o,l){var c=t.call(this,r,n,l)||this;return c.cell=a,c.row=s,c.column=o,c.section=s.section,c}return e}(Kk),t4e=function(){function t(e,r){this.pageNumber=1,this.id=e.id,this.settings=e.settings,this.styles=e.styles,this.hooks=e.hooks,this.columns=r.columns,this.head=r.head,this.body=r.body,this.foot=r.foot}return t.prototype.getHeadHeight=function(e){return this.head.reduce(function(r,n){return r+n.getMaxCellHeight(e)},0)},t.prototype.getFootHeight=function(e){return this.foot.reduce(function(r,n){return r+n.getMaxCellHeight(e)},0)},t.prototype.allRows=function(){return this.head.concat(this.body).concat(this.foot)},t.prototype.callCellHooks=function(e,r,n,a,s,o){for(var l=0,c=r;l<c.length;l++){var u=c[l],d=new e4e(e,this,n,a,s,o),f=u(d)===!1;if(n.text=Array.isArray(n.text)?n.text:[n.text],f)return!1}return!0},t.prototype.callEndPageHooks=function(e,r){e.applyStyles(e.userStyles);for(var n=0,a=this.hooks.didDrawPage;n<a.length;n++){var s=a[n];s(new Kk(e,this,r))}},t.prototype.callWillDrawPageHooks=function(e,r){for(var n=0,a=this.hooks.willDrawPage;n<a.length;n++){var s=a[n];s(new Kk(e,this,r))}},t.prototype.getWidth=function(e){if(typeof this.settings.tableWidth=="number")return this.settings.tableWidth;if(this.settings.tableWidth==="wrap"){var r=this.columns.reduce(function(a,s){return a+s.wrappedWidth},0);return r}else{var n=this.settings.margin;return e-n.left-n.right}},t}(),Zre=function(){function t(e,r,n,a,s){s===void 0&&(s=!1),this.height=0,this.raw=e,e instanceof Kre&&(this.raw=e._element,this.element=e._element),this.index=r,this.section=n,this.cells=a,this.spansMultiplePages=s}return t.prototype.getMaxCellHeight=function(e){var r=this;return e.reduce(function(n,a){var s;return Math.max(n,((s=r.cells[a.index])===null||s===void 0?void 0:s.height)||0)},0)},t.prototype.hasRowSpan=function(e){var r=this;return e.filter(function(n){var a=r.cells[n.index];return a?a.rowSpan>1:!1}).length>0},t.prototype.canEntireRowFit=function(e,r){return this.getMaxCellHeight(r)<=e},t.prototype.getMinimumRowHeight=function(e,r){var n=this;return e.reduce(function(a,s){var o=n.cells[s.index];if(!o)return 0;var l=r.getLineHeight(o.styles.fontSize),c=o.padding("vertical"),u=c+l;return u>a?u:a},0)},t}(),ene=function(){function t(e,r,n){var a;this.contentHeight=0,this.contentWidth=0,this.wrappedWidth=0,this.minReadableWidth=0,this.minWidth=0,this.width=0,this.height=0,this.x=0,this.y=0,this.styles=r,this.section=n,this.raw=e;var s=e;e!=null&&typeof e=="object"&&!Array.isArray(e)?(this.rowSpan=e.rowSpan||1,this.colSpan=e.colSpan||1,s=(a=e.content)!==null&&a!==void 0?a:e,e._element&&(this.raw=e._element)):(this.rowSpan=1,this.colSpan=1);var o=s!=null?""+s:"",l=/\r\n|\r|\n/g;this.text=o.split(l)}return t.prototype.getTextPos=function(){var e;if(this.styles.valign==="top")e=this.y+this.padding("top");else if(this.styles.valign==="bottom")e=this.y+this.height-this.padding("bottom");else{var r=this.height-this.padding("vertical");e=this.y+r/2+this.padding("top")}var n;if(this.styles.halign==="right")n=this.x+this.width-this.padding("right");else if(this.styles.halign==="center"){var a=this.width-this.padding("horizontal");n=this.x+a/2+this.padding("left")}else n=this.x+this.padding("left");return{x:n,y:e}},t.prototype.getContentHeight=function(e,r){r===void 0&&(r=1.15);var n=Array.isArray(this.text)?this.text.length:1,a=this.styles.fontSize/e*r,s=n*a+this.padding("vertical");return Math.max(s,this.styles.minCellHeight)},t.prototype.padding=function(e){var r=sP(this.styles.cellPadding,0);return e==="vertical"?r.top+r.bottom:e==="horizontal"?r.left+r.right:r[e]},t}(),r4e=function(){function t(e,r,n){this.wrappedWidth=0,this.minReadableWidth=0,this.minWidth=0,this.width=0,this.dataKey=e,this.raw=r,this.index=n}return t.prototype.getMaxCustomCellWidth=function(e){for(var r=0,n=0,a=e.allRows();n<a.length;n++){var s=a[n],o=s.cells[this.index];o&&typeof o.styles.cellWidth=="number"&&(r=Math.max(r,o.styles.cellWidth))}return r},t}();function n4e(t,e){a4e(t,e);var r=[],n=0;e.columns.forEach(function(s){var o=s.getMaxCustomCellWidth(e);o?s.width=o:(s.width=s.wrappedWidth,r.push(s)),n+=s.width});var a=e.getWidth(t.pageSize().width)-n;a&&(a=qk(r,a,function(s){return Math.max(s.minReadableWidth,s.minWidth)})),a&&(a=qk(r,a,function(s){return s.minWidth})),a=Math.abs(a),!e.settings.horizontalPageBreak&&a>.1/t.scaleFactor()&&(a=a<1?a:Math.round(a),console.warn("Of the table content, ".concat(a," units width could not fit page"))),i4e(e),o4e(e,t),s4e(e)}function a4e(t,e){var r=t.scaleFactor(),n=e.settings.horizontalPageBreak,a=Wre(t,e);e.allRows().forEach(function(s){for(var o=0,l=e.columns;o<l.length;o++){var c=l[o],u=s.cells[c.index];if(u){var d=e.hooks.didParseCell;e.callCellHooks(t,d,u,s,c,null);var f=u.padding("horizontal");u.contentWidth=DS(u.text,u.styles,t)+f;var A=DS(u.text.join(" ").split(/[^\S\u00A0]+/),u.styles,t);if(u.minReadableWidth=A+u.padding("horizontal"),typeof u.styles.cellWidth=="number")u.minWidth=u.styles.cellWidth,u.wrappedWidth=u.styles.cellWidth;else if(u.styles.cellWidth==="wrap"||n===!0)u.contentWidth>a?(u.minWidth=a,u.wrappedWidth=a):(u.minWidth=u.contentWidth,u.wrappedWidth=u.contentWidth);else{var h=10/r;u.minWidth=u.styles.minCellWidth||h,u.wrappedWidth=u.contentWidth,u.minWidth>u.wrappedWidth&&(u.wrappedWidth=u.minWidth)}}}}),e.allRows().forEach(function(s){for(var o=0,l=e.columns;o<l.length;o++){var c=l[o],u=s.cells[c.index];if(u&&u.colSpan===1)c.wrappedWidth=Math.max(c.wrappedWidth,u.wrappedWidth),c.minWidth=Math.max(c.minWidth,u.minWidth),c.minReadableWidth=Math.max(c.minReadableWidth,u.minReadableWidth);else{var d=e.styles.columnStyles[c.dataKey]||e.styles.columnStyles[c.index]||{},f=d.cellWidth||d.minCellWidth;f&&typeof f=="number"&&(c.minWidth=f,c.wrappedWidth=f)}u&&(u.colSpan>1&&!c.minWidth&&(c.minWidth=u.minWidth),u.colSpan>1&&!c.wrappedWidth&&(c.wrappedWidth=u.minWidth))}})}function qk(t,e,r){for(var n=e,a=t.reduce(function(h,m){return h+m.wrappedWidth},0),s=0;s<t.length;s++){var o=t[s],l=o.wrappedWidth/a,c=n*l,u=o.width+c,d=r(o),f=u<d?d:u;e-=f-o.width,o.width=f}if(e=Math.round(e*1e10)/1e10,e){var A=t.filter(function(h){return e<0?h.width>r(h):!0});A.length&&(e=qk(A,e,r))}return e}function s4e(t){for(var e={},r=1,n=t.allRows(),a=0;a<n.length;a++)for(var s=n[a],o=0,l=t.columns;o<l.length;o++){var c=l[o],u=e[c.index];if(r>1)r--,delete s.cells[c.index];else if(u)u.cell.height+=s.height,r=u.cell.colSpan,delete s.cells[c.index],u.left--,u.left<=1&&delete e[c.index];else{var d=s.cells[c.index];if(!d)continue;if(d.height=s.height,d.rowSpan>1){var f=n.length-a,A=d.rowSpan>f?f:d.rowSpan;e[c.index]={cell:d,left:A,row:s}}}}}function i4e(t){for(var e=t.allRows(),r=0;r<e.length;r++)for(var n=e[r],a=null,s=0,o=0,l=0;l<t.columns.length;l++){var c=t.columns[l];if(o-=1,o>1&&t.columns[l+1])s+=c.width,delete n.cells[c.index];else if(a){var u=a;delete n.cells[c.index],a=null,u.width=c.width+s}else{var u=n.cells[c.index];if(!u)continue;if(o=u.colSpan,s=0,u.colSpan>1){a=u,s+=c.width;continue}u.width=c.width+s}}}function o4e(t,e){for(var r={count:0,height:0},n=0,a=t.allRows();n<a.length;n++){for(var s=a[n],o=0,l=t.columns;o<l.length;o++){var c=l[o],u=s.cells[c.index];if(u){e.applyStyles(u.styles,!0);var d=u.width-u.padding("horizontal");if(u.styles.overflow==="linebreak")u.text=e.splitTextToSize(u.text,d+1/e.scaleFactor(),{fontSize:u.styles.fontSize});else if(u.styles.overflow==="ellipsize")u.text=JV(u.text,d,u.styles,e,"...");else if(u.styles.overflow==="hidden")u.text=JV(u.text,d,u.styles,e,"");else if(typeof u.styles.overflow=="function"){var f=u.styles.overflow(u.text,d);typeof f=="string"?u.text=[f]:u.text=f}u.contentHeight=u.getContentHeight(e.scaleFactor(),e.getLineHeightFactor());var A=u.contentHeight/u.rowSpan;u.rowSpan>1&&r.count*r.height<A*u.rowSpan?r={height:A,count:u.rowSpan}:r&&r.count>0&&r.height>A&&(A=r.height),A>s.height&&(s.height=A)}}r.count--}}function JV(t,e,r,n,a){return t.map(function(s){return l4e(s,e,r,n,a)})}function l4e(t,e,r,n,a){var s=1e4*n.scaleFactor();if(e=Math.ceil(e*s)/s,e>=DS(t,r,n))return t;for(;e<DS(t+a,r,n)&&!(t.length<=1);)t=t.substring(0,t.length-1);return t.trim()+a}function tne(t,e){var r=new Av(t),n=c4e(e,r.scaleFactor()),a=new t4e(e,n);return n4e(r,a),r.applyStyles(r.userStyles),a}function c4e(t,e){var r=t.content,n=d4e(r.columns);if(r.head.length===0){var a=ZV(n,"head");a&&r.head.push(a)}if(r.foot.length===0){var a=ZV(n,"foot");a&&r.foot.push(a)}var s=t.settings.theme,o=t.styles;return{columns:n,head:b5("head",r.head,n,o,s,e),body:b5("body",r.body,n,o,s,e),foot:b5("foot",r.foot,n,o,s,e)}}function b5(t,e,r,n,a,s){var o={},l=e.map(function(c,u){for(var d=0,f={},A=0,h=0,m=0,p=r;m<p.length;m++){var x=p[m];if(o[x.index]==null||o[x.index].left===0)if(h===0){var v=void 0;Array.isArray(c)?v=c[x.index-A-d]:v=c[x.dataKey];var y={};typeof v=="object"&&!Array.isArray(v)&&(y=(v==null?void 0:v.styles)||{});var b=f4e(t,x,u,a,n,s,y),w=new ene(v,b,t);f[x.dataKey]=w,f[x.index]=w,h=w.colSpan-1,o[x.index]={left:w.rowSpan-1,times:h}}else h--,A++;else o[x.index].left--,h=o[x.index].times,d++}return new Zre(c,u,t,f)});return l}function ZV(t,e){var r={};return t.forEach(function(n){if(n.raw!=null){var a=u4e(e,n.raw);a!=null&&(r[n.dataKey]=a)}}),Object.keys(r).length>0?r:null}function u4e(t,e){if(t==="head"){if(typeof e=="object")return e.header||null;if(typeof e=="string"||typeof e=="number")return e}else if(t==="foot"&&typeof e=="object")return e.footer;return null}function d4e(t){return t.map(function(e,r){var n,a;return typeof e=="object"?a=(n=e.dataKey)!==null&&n!==void 0?n:r:a=r,new r4e(a,e,r)})}function f4e(t,e,r,n,a,s,o){var l=QPe(n),c;t==="head"?c=a.headStyles:t==="body"?c=a.bodyStyles:t==="foot"&&(c=a.footStyles);var u=Wh({},l.table,l[t],a.styles,c),d=a.columnStyles[e.dataKey]||a.columnStyles[e.index]||{},f=t==="body"?d:{},A=t==="body"&&r%2===0?Wh({},l.alternateRow,a.alternateRowStyles):{},h=UPe(s),m=Wh({},h,u,A,f);return Wh(m,o)}function h4e(t,e,r){var n;r===void 0&&(r={});var a=Wre(t,e),s=new Map,o=[],l=[],c=[];Array.isArray(e.settings.horizontalPageBreakRepeat)?c=e.settings.horizontalPageBreakRepeat:(typeof e.settings.horizontalPageBreakRepeat=="string"||typeof e.settings.horizontalPageBreakRepeat=="number")&&(c=[e.settings.horizontalPageBreakRepeat]),c.forEach(function(A){var h=e.columns.find(function(m){return m.dataKey===A||m.index===A});h&&!s.has(h.index)&&(s.set(h.index,!0),o.push(h.index),l.push(e.columns[h.index]),a-=h.wrappedWidth)});for(var u=!0,d=(n=r==null?void 0:r.start)!==null&&n!==void 0?n:0;d<e.columns.length;){if(s.has(d)){d++;continue}var f=e.columns[d].wrappedWidth;if(u||a>=f)u=!1,o.push(d),l.push(e.columns[d]),a-=f;else break;d++}return{colIndexes:o,columns:l,lastIndex:d-1}}function A4e(t,e){for(var r=[],n=0;n<e.columns.length;n++){var a=h4e(t,e,{start:n});a.columns.length&&(r.push(a),n=a.lastIndex)}return r}function rne(t,e){var r=e.settings,n=r.startY,a=r.margin,s={x:a.left,y:n},o=e.getHeadHeight(e.columns)+e.getFootHeight(e.columns),l=n+a.bottom+o;if(r.pageBreak==="avoid"){var c=e.body,u=c.reduce(function(A,h){return A+h.height},0);l+=u}var d=new Av(t);(r.pageBreak==="always"||r.startY!=null&&l>d.pageSize().height)&&(ane(d),s.y=a.top),e.callWillDrawPageHooks(d,s);var f=Wh({},s);e.startPageNumber=d.pageNumber(),r.horizontalPageBreak?m4e(d,e,f,s):(d.applyStyles(d.userStyles),(r.showHead==="firstPage"||r.showHead==="everyPage")&&e.head.forEach(function(A){return vA(d,e,A,s,e.columns)}),d.applyStyles(d.userStyles),e.body.forEach(function(A,h){var m=h===e.body.length-1;RS(d,e,A,m,f,s,e.columns)}),d.applyStyles(d.userStyles),(r.showFoot==="lastPage"||r.showFoot==="everyPage")&&e.foot.forEach(function(A){return vA(d,e,A,s,e.columns)})),qre(d,e,f,s),e.callEndPageHooks(d,s),e.finalY=s.y,t.lastAutoTable=e,d.applyStyles(d.userStyles)}function m4e(t,e,r,n){var a=A4e(t,e),s=e.settings;if(s.horizontalPageBreakBehaviour==="afterAllRows")a.forEach(function(u,d){t.applyStyles(t.userStyles),d>0?Pb(t,e,r,n,u.columns,!0):eH(t,e,n,u.columns),p4e(t,e,r,n,u.columns),w5(t,e,n,u.columns)});else for(var o=-1,l=a[0],c=function(){var u=o;if(l){t.applyStyles(t.userStyles);var d=l.columns;o>=0?Pb(t,e,r,n,d,!0):eH(t,e,n,d),u=tH(t,e,o+1,n,d),w5(t,e,n,d)}var f=u-o;a.slice(1).forEach(function(A){t.applyStyles(t.userStyles),Pb(t,e,r,n,A.columns,!0),tH(t,e,o+1,n,A.columns,f),w5(t,e,n,A.columns)}),o=u};o<e.body.length-1;)c()}function eH(t,e,r,n){var a=e.settings;t.applyStyles(t.userStyles),(a.showHead==="firstPage"||a.showHead==="everyPage")&&e.head.forEach(function(s){return vA(t,e,s,r,n)})}function p4e(t,e,r,n,a){t.applyStyles(t.userStyles),e.body.forEach(function(s,o){var l=o===e.body.length-1;RS(t,e,s,l,r,n,a)})}function tH(t,e,r,n,a,s){t.applyStyles(t.userStyles),s=s??e.body.length;var o=Math.min(r+s,e.body.length),l=-1;return e.body.slice(r,o).forEach(function(c,u){var d=r+u===e.body.length-1,f=nne(t,e,d,n);c.canEntireRowFit(f,a)&&(vA(t,e,c,n,a),l=r+u)}),l}function w5(t,e,r,n){var a=e.settings;t.applyStyles(t.userStyles),(a.showFoot==="lastPage"||a.showFoot==="everyPage")&&e.foot.forEach(function(s){return vA(t,e,s,r,n)})}function g4e(t,e,r){var n=r.getLineHeight(t.styles.fontSize),a=t.padding("vertical"),s=Math.floor((e-a)/n);return Math.max(0,s)}function x4e(t,e,r,n){var a={};t.spansMultiplePages=!0,t.height=0;for(var s=0,o=0,l=r.columns;o<l.length;o++){var c=l[o],u=t.cells[c.index];if(u){Array.isArray(u.text)||(u.text=[u.text]);var d=new ene(u.raw,u.styles,u.section);d=Wh(d,u),d.text=[];var f=g4e(u,e,n);u.text.length>f&&(d.text=u.text.splice(f,u.text.length));var A=n.scaleFactor(),h=n.getLineHeightFactor();u.contentHeight=u.getContentHeight(A,h),u.contentHeight>=e&&(u.contentHeight=e,d.styles.minCellHeight-=e),u.contentHeight>t.height&&(t.height=u.contentHeight),d.contentHeight=d.getContentHeight(A,h),d.contentHeight>s&&(s=d.contentHeight),a[c.index]=d}}var m=new Zre(t.raw,-1,t.section,a,!0);m.height=s;for(var p=0,x=r.columns;p<x.length;p++){var c=x[p],d=m.cells[c.index];d&&(d.height=m.height);var u=t.cells[c.index];u&&(u.height=t.height)}return m}function v4e(t,e,r,n){var a=t.pageSize().height,s=n.settings.margin,o=s.top+s.bottom,l=a-o;e.section==="body"&&(l-=n.getHeadHeight(n.columns)+n.getFootHeight(n.columns));var c=e.getMinimumRowHeight(n.columns,t),u=c<r;if(c>l)return console.error("Will not be able to print row ".concat(e.index," correctly since it's minimum height is larger than page height")),!0;if(!u)return!1;var d=e.hasRowSpan(n.columns),f=e.getMaxCellHeight(n.columns)>l;return f?(d&&console.error("The content of row ".concat(e.index," will not be drawn correctly since drawing rows with a height larger than the page height and has cells with rowspans is not supported.")),!0):!(d||n.settings.rowPageBreak==="avoid")}function RS(t,e,r,n,a,s,o){var l=nne(t,e,n,s);if(r.canEntireRowFit(l,o))vA(t,e,r,s,o);else if(v4e(t,r,l,e)){var c=x4e(r,l,e,t);vA(t,e,r,s,o),Pb(t,e,a,s,o),RS(t,e,c,n,a,s,o)}else Pb(t,e,a,s,o),RS(t,e,r,n,a,s,o)}function vA(t,e,r,n,a){n.x=e.settings.margin.left;for(var s=0,o=a;s<o.length;s++){var l=o[s],c=r.cells[l.index];if(!c){n.x+=l.width;continue}t.applyStyles(c.styles),c.x=n.x,c.y=n.y;var u=e.callCellHooks(t,e.hooks.willDrawCell,c,r,l,n);if(u===!1){n.x+=l.width;continue}y4e(t,c,n);var d=c.getTextPos();$re(c.text,d.x,d.y,{halign:c.styles.halign,valign:c.styles.valign,maxWidth:Math.ceil(c.width-c.padding("left")-c.padding("right"))},t.getDocument()),e.callCellHooks(t,e.hooks.didDrawCell,c,r,l,n),n.x+=l.width}n.y+=r.height}function y4e(t,e,r){var n=e.styles;if(t.getDocument().setFillColor(t.getDocument().getFillColor()),typeof n.lineWidth=="number"){var a=zre(n.lineWidth,n.fillColor);a&&t.rect(e.x,r.y,e.width,e.height,a)}else typeof n.lineWidth=="object"&&(n.fillColor&&t.rect(e.x,r.y,e.width,e.height,"F"),b4e(t,e,r,n.lineWidth))}function b4e(t,e,r,n){var a,s,o,l;n.top&&(a=r.x,s=r.y,o=r.x+e.width,l=r.y,n.right&&(o+=.5*n.right),n.left&&(a-=.5*n.left),c(n.top,a,s,o,l)),n.bottom&&(a=r.x,s=r.y+e.height,o=r.x+e.width,l=r.y+e.height,n.right&&(o+=.5*n.right),n.left&&(a-=.5*n.left),c(n.bottom,a,s,o,l)),n.left&&(a=r.x,s=r.y,o=r.x,l=r.y+e.height,n.top&&(s-=.5*n.top),n.bottom&&(l+=.5*n.bottom),c(n.left,a,s,o,l)),n.right&&(a=r.x+e.width,s=r.y,o=r.x+e.width,l=r.y+e.height,n.top&&(s-=.5*n.top),n.bottom&&(l+=.5*n.bottom),c(n.right,a,s,o,l));function c(u,d,f,A,h){t.getDocument().setLineWidth(u),t.getDocument().line(d,f,A,h,"S")}}function nne(t,e,r,n){var a=e.settings.margin.bottom,s=e.settings.showFoot;return(s==="everyPage"||s==="lastPage"&&r)&&(a+=e.getFootHeight(e.columns)),t.pageSize().height-n.y-a}function Pb(t,e,r,n,a,s){a===void 0&&(a=[]),s===void 0&&(s=!1),t.applyStyles(t.userStyles),e.settings.showFoot==="everyPage"&&!s&&e.foot.forEach(function(l){return vA(t,e,l,n,a)}),e.callEndPageHooks(t,n);var o=e.settings.margin;qre(t,e,r,n),ane(t),e.pageNumber++,n.x=o.left,n.y=o.top,r.y=o.top,e.callWillDrawPageHooks(t,n),e.settings.showHead==="everyPage"&&(e.head.forEach(function(l){return vA(t,e,l,n,a)}),t.applyStyles(t.userStyles))}function ane(t){var e=t.pageNumber();t.setPage(e+1);var r=t.pageNumber();return r===e?(t.addPage(),!0):!1}function w4e(t){t.API.autoTable=function(){for(var e=[],r=0;r<arguments.length;r++)e[r]=arguments[r];var n=e[0],a=Jre(this,n),s=tne(this,a);return rne(this,s),this},t.API.lastAutoTable=!1,t.API.autoTableText=function(e,r,n,a){$re(e,r,n,a,this)},t.API.autoTableSetDefaults=function(e){return Av.setDefaults(e,this),this},t.autoTableSetDefaults=function(e,r){Av.setDefaults(e,r)},t.API.autoTableHtmlToJson=function(e,r){var n;if(r===void 0&&(r=!1),typeof window>"u")return console.error("Cannot run autoTableHtmlToJson in non browser environment"),null;var a=new Av(this),s=Yre(a,e,window,r,!1),o=s.head,l=s.body,c=((n=o[0])===null||n===void 0?void 0:n.map(function(u){return u.content}))||[];return{columns:c,rows:l,data:l}}}var N5;function L0(t,e){var r=Jre(t,e),n=tne(t,r);rne(t,n)}try{if(typeof window<"u"&&window){var rH=window,nH=rH.jsPDF||((N5=rH.jspdf)===null||N5===void 0?void 0:N5.jsPDF);nH&&w4e(nH)}}catch(t){console.error("Could not apply autoTable plugin",t)}const Ga=t=>`C$ ${(Number(t)||0).toFixed(2)}`;function C5(t="LOT"){return`${t}-${Date.now()}-${Math.random().toString(16).slice(2)}`}function N4e({role:t="",roles:e,sellerCandyId:r="",currentUserEmail:n}){const[a,s]=g.useState([]),[o,l]=g.useState([]),[c,u]=g.useState(!0),[d,f]=g.useState(""),{refreshKey:A,refresh:h}=Oc(),m=e&&e.length?e:t,p=En(m,"admin"),x=p||En(m,"contador"),[v,y]=g.useState(Rr(Ud(new Date),"yyyy-MM-dd")),[b,w]=g.useState(Rr(Ld(new Date),"yyyy-MM-dd")),[j,I]=g.useState(""),[_,S]=g.useState(!1),[E,T]=g.useState(""),[k,B]=g.useState(Rr(new Date,"yyyy-MM-dd")),[D,X]=g.useState("lb"),[me,pe]=g.useState(""),[he,ve]=g.useState(0),[ae,Pe]=g.useState(NaN),[ke,O]=g.useState(0),[G,z]=g.useState([]),[U,Y]=g.useState(null),[ee,M]=g.useState([]),[H,te]=g.useState(!1),[Ce,V]=g.useState(null),[We,ie]=g.useState(!1),[J,Oe]=g.useState(null),[fe,_e]=g.useState(null),Ue=we=>_e(oe=>oe===we?null:we),[Ye,At]=g.useState(!1),yt=()=>At(we=>!we),[bt,Nt]=g.useState("all"),[jt,St]=g.useState({}),Ve=we=>St(oe=>({...oe,[we]:!(oe[we]??!1)})),Te=(we,oe)=>{const Fe=[];return we>0&&Fe.push(`${we.toFixed(3)} lb`),oe>0&&Fe.push(`${oe.toFixed(3)} un`),Fe.length===0?"0":Fe.join("  ")},qe=we=>{const oe=(we||"").toLowerCase();return/(^|\s)(lb|lbs|libra|libras)(\s|$)/.test(oe)||oe==="lb"};g.useEffect(()=>{(async()=>{u(!0),f("");const we=await kt(mt(Se,"products")),oe=[];we.forEach(Ke=>{const P=Ke.data();P.active===!0&&oe.push({id:Ke.id,name:P.name??P.productName??"(sin nombre)",category:P.category??"(sin categora)",measurement:P.measurement??"lb",price:Number(P.price??0),providerPrice:Object.prototype.hasOwnProperty.call(P,"providerPrice")?Number(P.providerPrice):void 0})}),s(oe);const Fe=Yt(mt(Se,"inventory_batches"),In("date","desc")),ce=await kt(Fe),Me=[];ce.forEach(Ke=>{const P=Ke.data(),R=As(Number(P.quantity||0)),L=Number(P.purchasePrice||0),K=Number(P.salePrice||0),re=Number((R*L).toFixed(2)),de=Number((R*K).toFixed(2));Me.push({id:Ke.id,productId:P.productId,productName:P.productName,category:P.category,unit:P.unit,quantity:R,remaining:As(Number(P.remaining||0)),purchasePrice:L,salePrice:K,invoiceTotal:P.invoiceTotal!=null?Number(P.invoiceTotal):re,expectedTotal:P.expectedTotal!=null?Number(P.expectedTotal):de,date:P.date,createdAt:P.createdAt,status:P.status,notes:P.notes,paidAmount:Number(P.paidAmount||0),paidAt:P.paidAt,batchGroupId:P.batchGroupId,orderName:P.orderName})}),l(Me),u(!1)})()},[A]);const ge=g.useMemo(()=>o.filter(we=>!(v&&we.date<v||b&&we.date>b||j&&we.productId!==j)),[o,v,b,j]),q=g.useMemo(()=>{if(!j)return"Todos";const we=a.find(oe=>oe.id===j);return we?`${we.name}  ${we.category}`:"Filtro activo"},[j,a]),se=g.useMemo(()=>{const we=ge.reduce((L,K)=>L+Number(K.invoiceTotal||0),0),oe=ge.reduce((L,K)=>L+Number(K.expectedTotal||0),0);let Fe=0,ce=0,Me=0,Ke=0;for(const L of ge)qe(L.unit)?(Fe+=L.quantity,ce+=L.remaining):(Me+=L.quantity,Ke+=L.remaining);const P=ge.reduce((L,K)=>L+K.quantity,0),R=ge.reduce((L,K)=>L+K.remaining,0);return{lbsIng:Fe,lbsRem:ce,udsIng:Me,udsRem:Ke,qty:P,rem:R,totalFacturado:we,totalEsperado:oe}},[ge]),ye=g.useMemo(()=>{var Fe,ce;const we=new Map;for(const Me of ge){const Ke=Me.batchGroupId&&String(Me.batchGroupId).trim()||Me.id;we.has(Ke)||we.set(Ke,[]),we.get(Ke).push(Me)}const oe=[];for(const[Me,Ke]of we.entries()){const P=[...Ke].sort((Bt,Lt)=>{var hr,xr;const Be=((hr=Bt.createdAt)==null?void 0:hr.seconds)??0;return(((xr=Lt.createdAt)==null?void 0:xr.seconds)??0)-Be}),R=((Fe=P[0])==null?void 0:Fe.date)||"",L=String(((ce=P[0])==null?void 0:ce.orderName)||"").trim()||`Pedido ${R||""}`.trim()||"Pedido",K=new Set(P.map(Bt=>String(Bt.category||"").trim()).filter(Boolean)),re=K.size===1?Array.from(K)[0].toUpperCase():"MIXTO",de=P.some(Bt=>Bt.status==="PENDIENTE")?"PENDIENTE":"PAGADO",Ge=As(P.reduce((Bt,Lt)=>Bt+(qe(Lt.unit)?Number(Lt.quantity||0):0),0)),rt=As(P.reduce((Bt,Lt)=>Bt+(qe(Lt.unit)?Number(Lt.remaining||0):0),0)),ft=As(P.reduce((Bt,Lt)=>Bt+(qe(Lt.unit)?0:Number(Lt.quantity||0)),0)),et=As(P.reduce((Bt,Lt)=>Bt+(qe(Lt.unit)?0:Number(Lt.remaining||0)),0)),ut=Number(P.reduce((Bt,Lt)=>Bt+Number(Lt.invoiceTotal||0),0).toFixed(2)),Ot=Number(P.reduce((Bt,Lt)=>Bt+Number(Lt.expectedTotal||0),0).toFixed(2)),zt=Number((Ot-ut).toFixed(2));oe.push({groupId:Me,orderName:L,date:R,typeLabel:re,status:de,lbsIn:Ge,lbsRem:rt,udsIn:ft,udsRem:et,totalFacturado:ut,totalEsperado:Ot,utilidadBruta:zt,items:P})}return oe.sort((Me,Ke)=>Me.date===Ke.date?Me.groupId<Ke.groupId?1:-1:Me.date<Ke.date?1:-1),oe},[ge]),ue=g.useMemo(()=>bt==="all"?ye:ye.filter(we=>{const oe=we.lbsRem>0||we.udsRem>0;return bt==="with"?oe:!oe}),[ye,bt]),Le=g.useMemo(()=>{const we=new Map;return ue.forEach(oe=>{const Fe=oe.typeLabel||"MIXTO";we.has(Fe)||we.set(Fe,[]),we.get(Fe).push(oe)}),Array.from(we.entries()).map(([oe,Fe])=>({type:oe,items:Fe}))},[ue]),ct=g.useMemo(()=>{const we=String(D||"").toLowerCase().trim();return a.filter(Fe=>String(Fe.measurement||"").toLowerCase().trim()===we).sort((Fe,ce)=>Fe.name.localeCompare(ce.name,"es"))},[a,D]);g.useEffect(()=>{const we=G.find(Fe=>Fe.productId===me);if(we){ve(Number(we.quantity||0)),Pe(Number(we.purchasePrice||0)),O(Number(we.salePrice||0));return}const oe=a.find(Fe=>Fe.id===me);oe?(ve(0),O(Number(oe.price||0)),oe.providerPrice!=null&&Number.isFinite(Number(oe.providerPrice))?Pe(Number(oe.providerPrice)):Pe(NaN)):(ve(0),O(0),Pe(NaN))},[me,a,A,G]);const ht=()=>{f("");const we=a.find(R=>R.id===me);if(!we)return f("Selecciona un producto.");if(he<=0||!Number.isFinite(ae)||ae<=0)return f("Completa libras a ingresar y precio proveedor.");const oe=As(he),Fe=we.measurement,ce=Number((oe*Number(ae||0)).toFixed(2)),Me=Number((oe*Number(ke||0)).toFixed(2)),Ke=Number((Me-ce).toFixed(2)),P=G.findIndex(R=>R.productId===we.id);P>=0?z(R=>R.map((L,K)=>K!==P?L:{...L,quantity:oe,remaining:oe,purchasePrice:Number(ae||0),salePrice:Number(ke||0),invoiceTotal:ce,expectedTotal:Me,utilidadBruta:Ke})):z(R=>[...R,{tempId:C5("IT"),productId:we.id,productName:we.name,category:we.category,unit:Fe,quantity:oe,remaining:oe,purchasePrice:Number(ae||0),salePrice:Number(ke||0),invoiceTotal:ce,expectedTotal:Me,utilidadBruta:Ke}]),pe(""),ve(0),Pe(NaN),O(0)},xe=we=>{z(oe=>oe.filter(Fe=>Fe.tempId!==we))},Ae=(we,oe,Fe)=>{z(ce=>ce.map(Me=>{if(Me.tempId!==we)return Me;const Ke={...Me};return oe==="quantity"&&(Ke.quantity=As(Math.max(0,Fe)),U||(Ke.remaining=Ke.quantity)),oe==="purchasePrice"&&(Ke.purchasePrice=Math.max(0,Number(Fe||0))),oe==="salePrice"&&(Ke.salePrice=Math.max(0,Number(Fe||0))),Ke.invoiceTotal=Number((Ke.quantity*Ke.purchasePrice).toFixed(2)),Ke.expectedTotal=Number((Ke.quantity*Ke.salePrice).toFixed(2)),Ke.utilidadBruta=Number((Ke.expectedTotal-Ke.invoiceTotal).toFixed(2)),Ke}))},Re=g.useMemo(()=>{const we=As(G.reduce((Ke,P)=>Ke+(qe(P.unit)?Number(P.quantity||0):0),0)),oe=As(G.reduce((Ke,P)=>Ke+(qe(P.unit)?Number(P.remaining||0):0),0)),Fe=Number(G.reduce((Ke,P)=>Ke+Number(P.invoiceTotal||0),0).toFixed(2)),ce=Number(G.reduce((Ke,P)=>Ke+Number(P.expectedTotal||0),0).toFixed(2)),Me=Number((ce-Fe).toFixed(2));return{lbsIn:we,lbsRem:oe,totalFacturado:Fe,totalEsperado:ce,utilidadBruta:Me}},[G]),lt=()=>{Y(null),M([]),T(""),B(Rr(new Date,"yyyy-MM-dd")),X("lb"),pe(""),ve(0),Pe(NaN),O(0),z([])},Ne=async()=>{if(f(""),!G.length)return f("Agrega al menos un producto al pedido.");const we=k||Rr(new Date,"yyyy-MM-dd"),oe=String(E||"").trim()||`Pedido ${we}`,Fe=U||C5("BATCH");try{if(!U){for(const P of G)await $V({productId:P.productId,productName:P.productName,category:P.category,unit:P.unit,quantity:As(P.quantity),purchasePrice:Number(P.purchasePrice||0),salePrice:Number(P.salePrice||0),invoiceTotal:Number(P.invoiceTotal||0),expectedTotal:Number(P.expectedTotal||0),date:we,notes:"",batchGroupId:Fe,orderName:oe});f(" Pedido creado"),S(!1),lt(),h();return}const ce=ee,Me=new Map;for(const P of ce)Me.set(P.productId,P);const Ke=new Set(G.map(P=>P.productId));for(const P of G){const R=Me.get(P.productId),L=As(P.quantity);if(R){const K=As(R.quantity-R.remaining),re=Math.max(0,As(L-K));await kn(Gt(Se,"inventory_batches",R.id),{date:we,orderName:oe,batchGroupId:Fe,quantity:L,purchasePrice:Number(P.purchasePrice||0),salePrice:Number(P.salePrice||0),invoiceTotal:Number(P.invoiceTotal||0),expectedTotal:Number(P.expectedTotal||0),remaining:re})}else await $V({productId:P.productId,productName:P.productName,category:P.category,unit:P.unit,quantity:L,purchasePrice:Number(P.purchasePrice||0),salePrice:Number(P.salePrice||0),invoiceTotal:Number(P.invoiceTotal||0),expectedTotal:Number(P.expectedTotal||0),date:we,notes:"",batchGroupId:Fe,orderName:oe})}for(const P of ce)Ke.has(P.productId)||await Kn(Gt(Se,"inventory_batches",P.id));f(" Pedido actualizado"),S(!1),lt(),h()}catch(ce){console.error(ce),f(" Error al guardar pedido")}},De=we=>{V(we),te(!0)},xt=we=>{Y(we.groupId),M(we.items),T(we.orderName),B(we.date||Rr(new Date,"yyyy-MM-dd"));const oe=we.items.map(Fe=>{const ce=Number(Fe.invoiceTotal||0),Me=Number(Fe.expectedTotal||0);return{tempId:C5("IT"),productId:Fe.productId,productName:Fe.productName,category:Fe.category,unit:Fe.unit,quantity:As(Fe.quantity),remaining:As(Fe.remaining),purchasePrice:Number(Fe.purchasePrice||0),salePrice:Number(Fe.salePrice||0),invoiceTotal:ce,expectedTotal:Me,utilidadBruta:Number((Me-ce).toFixed(2))}});z(oe),S(!0)},_t=async we=>{if(confirm(`Eliminar el pedido "${we.orderName}" del ${we.date}?`))try{for(const Fe of we.items)await Kn(Gt(Se,"inventory_batches",Fe.id));f(" Pedido eliminado"),h()}catch(Fe){console.error(Fe),f(" Error al eliminar pedido")}},Et=we=>{Oe(we),ie(!0)},Mt=async()=>{if(J)try{for(const we of J.items){if(we.status!=="PENDIENTE")continue;await Lre(we.id),await kn(Gt(Se,"inventory_batches",we.id),{remaining:0});const oe={date:we.date,productName:we.productName,quantity:we.quantity,amount:Number((we.expectedTotal??we.salePrice*we.quantity).toFixed(2)),allocations:[{batchId:we.id,qty:we.quantity,unitCost:we.purchasePrice,lineCost:Number((we.purchasePrice*we.quantity).toFixed(2))}],avgUnitCost:we.purchasePrice,measurement:we.unit,createdAt:Ar.now(),autoGeneratedFromInventory:!0};await Jn(mt(Se,"salesV2"),oe)}f(" Pedido pagado y reflejado como venta"),h()}catch(we){console.error(we),f(" Error al pagar pedido")}finally{ie(!1),Oe(null)}},nt=()=>{ie(!1),Oe(null)},Ee=()=>{const we=new rn({unit:"pt",format:"a4",orientation:"landscape"}),oe="Inventario de Pollo",Fe=`Rango: ${v||"(sin inicio)"} a ${b||"(sin fin)"}`,ce=`Producto: ${q}`,Me=R=>Number(R||0).toFixed(3);let Ke=40;we.setFontSize(16),we.text(oe,40,Ke),Ke+=16,we.setFontSize(10),we.text(Fe,40,Ke),Ke+=12,we.text(ce,40,Ke),Ke+=14;const P=()=>{var R;Ke=(R=we.lastAutoTable)!=null&&R.finalY?we.lastAutoTable.finalY+18:Ke+18};L0(we,{startY:Ke,head:[["KPI","Valor"]],body:[["Libras ingresadas",Me(se.lbsIng)],["Libras restantes",Me(se.lbsRem)],["Unidades ingresadas",Me(se.udsIng)],["Unidades restantes",Me(se.udsRem)],["Total esperado",Ga(se.totalEsperado)],["Total facturado",Ga(se.totalFacturado)],["Ganancia sin gastos",Ga(se.totalEsperado-se.totalFacturado)],["Cantidad de lotes",ge.length.toString()]],styles:{fontSize:9},headStyles:{fillColor:[245,245,245],textColor:[0,0,0]}}),P(),L0(we,{startY:Ke,head:[["Fecha","Pedido","Tipo","Lb In","Lb Rem","Ud In","Ud Rem","Facturado","Esperado","Utilidad","Estado"]],body:ye.map(R=>[R.date,R.orderName,R.typeLabel,Me(R.lbsIn),Me(R.lbsRem),Me(R.udsIn),Me(R.udsRem),Ga(R.totalFacturado),Ga(R.totalEsperado),Ga(R.utilidadBruta),R.status]),styles:{fontSize:8},headStyles:{fillColor:[245,245,245],textColor:[0,0,0]}}),P(),ye.forEach(R=>{we.setFontSize(11),we.text(`Pedido: ${R.orderName} (${R.date})  ${R.typeLabel}`,40,Ke),Ke+=12,L0(we,{startY:Ke,head:[["Producto","Unidad","Ingresado","Restante","Precio compra","Precio venta","Total facturado","Total esperado","Utilidad","Estado"]],body:R.items.map(L=>[L.productName,(L.unit||"").toUpperCase(),Me(L.quantity),Me(L.remaining),Ga(L.purchasePrice),Ga(L.salePrice),Ga(L.invoiceTotal||L.purchasePrice*L.quantity),Ga(L.expectedTotal||L.salePrice*L.quantity),Ga((L.expectedTotal||L.salePrice*L.quantity)-(L.invoiceTotal||L.purchasePrice*L.quantity)),L.status]),styles:{fontSize:8},headStyles:{fillColor:[230,230,230],textColor:[0,0,0]}}),P()}),we.save(`inventario_pollo_${v||"sin_desde"}_a_${b||"sin_hasta"}.pdf`)};return i.jsxs("div",{className:"max-w-6xl mx-auto",children:[i.jsxs("div",{className:"flex flex-wrap items-center justify-between gap-2 mb-3",children:[i.jsx("h2",{className:"text-2xl font-bold",children:"Inventario"}),i.jsxs("div",{className:"flex items-center gap-2",children:[i.jsx("button",{className:"px-3 py-2 rounded-2xl bg-gray-900 text-white hover:bg-black",type:"button",onClick:Ee,disabled:c,children:"Exportar PDF"}),x&&i.jsx("button",{className:"px-3 py-2 rounded-2xl bg-blue-600 text-white hover:bg-blue-700",type:"button",onClick:()=>{lt(),S(!0)},children:"Crear Lote"})]})]}),i.jsxs("div",{className:"bg-white p-3 rounded shadow-2xl border mb-4 flex flex-wrap items-end gap-3 text-sm",children:[i.jsxs("div",{className:"flex flex-col",children:[i.jsx("label",{className:"font-semibold",children:"Desde"}),i.jsx("input",{type:"date",className:"border rounded px-2 py-1",value:v,onChange:we=>y(we.target.value)})]}),i.jsxs("div",{className:"flex flex-col",children:[i.jsx("label",{className:"font-semibold",children:"Hasta"}),i.jsx("input",{type:"date",className:"border rounded px-2 py-1",value:b,onChange:we=>w(we.target.value)})]}),i.jsxs("div",{className:"flex flex-col min-w-[240px]",children:[i.jsx("label",{className:"font-semibold",children:"Producto"}),i.jsxs("select",{className:"border rounded px-2 py-1",value:j,onChange:we=>I(we.target.value),children:[i.jsx("option",{value:"",children:"Todos"}),a.map(we=>i.jsxs("option",{value:we.id,children:[we.name,"  ",we.category]},we.id))]})]}),i.jsx("button",{className:"px-3 rounded-2xl shadow-2xl py-1 bg-gray-200 hover:bg-gray-300",onClick:()=>{y(""),w(""),I("")},children:"Quitar filtro"}),i.jsx("div",{className:"ml-auto",children:i.jsx(Fc,{onClick:()=>h(),loading:c})})]}),i.jsxs("div",{className:"bg-gray-50 p-3 rounded-2xl shadow-2xl border mb-3 text-base",children:[i.jsxs("div",{className:"flex items-center justify-between cursor-pointer",onClick:yt,role:"button","aria-expanded":Ye,children:[i.jsxs("div",{className:"flex gap-6 items-center",children:[i.jsxs("div",{children:[i.jsx("span",{className:"font-semibold",children:"Libras ingresadas:"})," ",se.lbsIng.toFixed(3)]}),i.jsxs("div",{children:[i.jsx("span",{className:"font-semibold",children:"Libras restantes:"})," ",se.lbsRem.toFixed(3)]})]}),i.jsx("div",{className:"text-sm text-gray-500",children:Ye?"Cerrar":"Ver ms"})]}),Ye&&i.jsx("div",{className:"mt-3",children:i.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-3 gap-y-2 gap-x-8",children:[i.jsxs("div",{children:[i.jsx("span",{className:"font-semibold",children:"Libras ingresadas:"})," ",se.lbsIng.toFixed(3)]}),i.jsxs("div",{children:[i.jsx("span",{className:"font-semibold",children:"Libras restantes:"})," ",se.lbsRem.toFixed(3)]}),i.jsxs("div",{children:[i.jsx("span",{className:"font-semibold",children:"Unidades ingresadas:"})," ",se.udsIng.toFixed(3)]}),i.jsxs("div",{children:[i.jsx("span",{className:"font-semibold",children:"Unidades restantes:"})," ",se.udsRem.toFixed(3)]}),i.jsxs("div",{children:[i.jsx("span",{className:"font-semibold",children:"Total esperado en ventas:"})," ","C$ ",se.totalEsperado.toFixed(2)]}),i.jsxs("div",{children:[i.jsx("span",{className:"font-semibold",children:"Total facturado:"})," C$"," ",se.totalFacturado.toFixed(2)]}),i.jsxs("div",{children:[i.jsx("span",{className:"font-semibold",children:"Ganancia sin gastos:"})," C$"," ",(se.totalEsperado-se.totalFacturado).toFixed(2)]}),i.jsxs("div",{children:[i.jsx("span",{className:"font-semibold",children:"Cantidad de Lotes (por filtro):"})," ",ge.length.toLocaleString()]})]})})]}),i.jsxs("div",{className:"md:hidden space-y-3",children:[i.jsx("div",{className:"flex gap-2",children:[{key:"all",label:"Todos"},{key:"with",label:"Con disponibilidad"},{key:"without",label:"Sin disponibilidad"}].map(we=>{const oe=bt===we.key;return i.jsx("button",{type:"button",onClick:()=>Nt(we.key),className:`flex-1 px-3 py-2 rounded-xl text-sm font-semibold shadow ${oe?"bg-blue-600 text-white":"bg-gray-100 text-gray-700"}`,children:we.label},we.key)})}),c?i.jsx("div",{className:"bg-white border rounded-2xl p-4 shadow",children:"Cargando"}):ue.length===0?i.jsx("div",{className:"bg-white border rounded-2xl p-4 shadow text-center",children:bt==="with"?"Sin lotes con disponibilidad.":bt==="without"?"Sin lotes sin disponibilidad.":"Sin lotes"}):Le.map(({type:we,items:oe})=>{const Fe=jt[we]??!1;return i.jsxs("div",{className:"bg-white border rounded-2xl",children:[i.jsxs("button",{type:"button",onClick:()=>Ve(we),className:"w-full px-4 py-3 flex items-center justify-between text-left",children:[i.jsxs("div",{children:[i.jsx("div",{className:"font-semibold",children:we}),i.jsxs("div",{className:"text-xs text-gray-500",children:[oe.length," ",oe.length===1?"lote":"lotes"]})]}),i.jsx("span",{className:"text-xs text-gray-500",children:Fe?"Cerrar":"Ver"})]}),Fe&&i.jsx("div",{className:"space-y-3 px-2 pb-4",children:oe.map(ce=>{const Me=fe===ce.groupId,Ke=ce.lbsRem>0||ce.udsRem>0;return i.jsxs("div",{className:"bg-gray-50 border rounded-2xl",children:[i.jsxs("div",{className:"p-4 flex items-start justify-between gap-3 cursor-pointer",onClick:()=>Ue(ce.groupId),children:[i.jsxs("div",{className:"min-w-0",children:[i.jsxs("div",{className:"font-semibold text-lg",children:[ce.date,i.jsxs("div",{className:"text-sm text-gray-500",children:["Producto: ",ce.typeLabel]})]}),i.jsxs("div",{className:"text-xs text-gray-500 truncate",children:["Nombre: ",ce.orderName]})]}),i.jsx("div",{className:"flex items-center gap-3",children:i.jsx("span",{className:`px-2 py-1 rounded text-xs shrink-0 ${ce.status==="PAGADO"?"bg-green-100 text-green-700":"bg-yellow-100 text-yellow-700"}`,children:ce.status})})]}),i.jsxs("div",{className:"pb-4 p-4 flex items-start justify-between gap-1 cursor-pointer",children:[i.jsxs("div",{className:"px-2 py-1 rounded text-xs shrink-0 bg-green-100 font-semibold text-gray-700",children:["Ingresado: ",Te(ce.lbsIn,ce.udsIn)]}),i.jsxs("span",{className:`px-2 py-1 rounded text-xs shrink-0 ${Ke?"bg-green-100 font-semibold text-gray-700":"bg-red-100 font-semibold text-red-700"}`,children:["Disponible: ",Te(ce.lbsRem,ce.udsRem)]})]}),Me&&i.jsxs("div",{className:"p-4 pt-0",children:[i.jsxs("div",{className:"grid grid-cols-2 gap-2 mt-3 text-sm",children:[i.jsxs("div",{className:"bg-white rounded-xl p-2",children:[i.jsx("div",{className:"text-[11px] text-gray-500",children:"Tipo"}),i.jsx("div",{className:"font-semibold",children:ce.typeLabel})]}),i.jsxs("div",{className:"bg-white rounded-xl p-2",children:[i.jsx("div",{className:"text-[11px] text-gray-500",children:"Utilidad bruta"}),i.jsx("div",{className:"font-semibold",children:Ga(ce.utilidadBruta)})]}),i.jsxs("div",{className:"bg-white rounded-xl p-2",children:[i.jsx("div",{className:"text-[11px] text-gray-500",children:"Lbs ingresadas"}),i.jsx("div",{className:"font-semibold",children:ce.lbsIn.toFixed(3)})]}),i.jsxs("div",{className:"bg-white rounded-xl p-2",children:[i.jsx("div",{className:"text-[11px] text-gray-500",children:"Lbs restantes"}),i.jsx("div",{className:"font-semibold",children:ce.lbsRem.toFixed(3)})]}),i.jsxs("div",{className:"bg-white rounded-xl p-2 col-span-2",children:[i.jsxs("div",{className:"flex justify-between text-[11px] text-gray-500",children:[i.jsx("span",{children:"Total facturado"}),i.jsx("span",{children:"Total esperado"})]}),i.jsxs("div",{className:"flex justify-between font-semibold",children:[i.jsx("span",{children:Ga(ce.totalFacturado)}),i.jsx("span",{children:Ga(ce.totalEsperado)})]})]}),ce.items.length>0&&i.jsxs("div",{className:"bg-gray-50 rounded-xl p-2 col-span-2 border border-gray-100",children:[i.jsx("div",{className:"text-[11px] text-gray-500 mb-2",children:"Productos asociados"}),i.jsx("div",{className:"space-y-1",children:ce.items.map(P=>i.jsxs("div",{className:"flex items-center text-xs justify-between gap-2",children:[i.jsx("div",{className:"font-semibold text-gray-800 truncate",children:P.productName}),i.jsxs("div",{className:"text-gray-600 text-right",children:[i.jsxs("div",{children:["Ingresado:"," ",P.quantity.toFixed(3)]}),i.jsxs("div",{children:["Restante:"," ",P.remaining.toFixed(3)]})]})]},P.id))})]})]}),i.jsxs("div",{className:"mt-3 flex gap-2",children:[i.jsx("button",{className:"flex-1 px-3 py-2 rounded-xl bg-gray-100 hover:bg-gray-200 text-sm",onClick:()=>De(ce),children:"Ver detalle"}),p?i.jsxs(i.Fragment,{children:[ce.status==="PENDIENTE"&&i.jsx("button",{className:"px-3 py-2 rounded-xl bg-green-600 hover:bg-green-700 text-white text-sm",onClick:()=>Et(ce),children:"Pagar"}),i.jsx("button",{className:"px-3 py-2 rounded-xl bg-yellow-600 hover:bg-yellow-700 text-white text-sm",onClick:()=>xt(ce),children:"Editar"}),i.jsx("button",{className:"px-3 py-2 rounded-xl bg-red-600 hover:bg-red-700 text-white text-sm",onClick:()=>_t(ce),children:"Borrar"})]}):null]})]})]},ce.groupId)})})]},we)})]}),i.jsx("div",{className:"hidden md:block bg-white p-2 rounded shadow border w-full overflow-x-auto",children:i.jsxs("table",{className:"min-w-[1100px] w-full text-sm shadow-2xl",children:[i.jsx("thead",{className:"bg-gray-100",children:i.jsxs("tr",{className:"whitespace-nowrap",children:[i.jsx("th",{className:"p-2 border",children:"Fecha"}),i.jsx("th",{className:"p-2 border",children:"Tipo"}),i.jsx("th",{className:"p-2 border",children:"Libras ingresadas"}),i.jsx("th",{className:"p-2 border",children:"Libras restantes"}),i.jsx("th",{className:"p-2 border",children:"Unidades ingresadas"}),i.jsx("th",{className:"p-2 border",children:"Unidades restantes"}),i.jsx("th",{className:"p-2 border",children:"Total Facturado"}),i.jsx("th",{className:"p-2 border",children:"Total esperado"}),i.jsx("th",{className:"p-2 border",children:"Utilidad bruta"}),i.jsx("th",{className:"p-2 border",children:"Estado"}),i.jsx("th",{className:"p-2 border",children:"Acciones"})]})}),i.jsx("tbody",{children:c?i.jsx("tr",{children:i.jsx("td",{colSpan:11,className:"p-4 text-center",children:"Cargando"})}):ye.length===0?i.jsx("tr",{children:i.jsx("td",{colSpan:11,className:"p-4 text-center",children:"Sin lotes"})}):ye.map(we=>i.jsxs("tr",{className:"text-center whitespace-nowrap",children:[i.jsxs("td",{className:"p-2 border",children:[i.jsx("button",{className:"underline text-blue-700 hover:text-blue-900",onClick:()=>De(we),title:we.orderName,children:we.date}),i.jsx("div",{className:"text-[11px] text-gray-500",children:we.orderName})]}),i.jsx("td",{className:"p-2 border",children:we.typeLabel}),i.jsx("td",{className:"p-2 border",children:we.lbsIn.toFixed(3)}),i.jsx("td",{className:"p-2 border",children:we.lbsRem.toFixed(3)}),i.jsx("td",{className:"p-2 border",children:we.udsIn.toFixed(3)}),i.jsx("td",{className:"p-2 border",children:we.udsRem.toFixed(3)}),i.jsx("td",{className:"p-2 border",children:Ga(we.totalFacturado)}),i.jsx("td",{className:"p-2 border",children:Ga(we.totalEsperado)}),i.jsx("td",{className:"p-2 border",children:Ga(we.utilidadBruta)}),i.jsx("td",{className:"p-2 border",children:i.jsx("span",{className:`px-2 py-0.5 rounded text-xs ${we.status==="PAGADO"?"bg-green-100 text-green-700":"bg-yellow-100 text-yellow-700"}`,children:we.status})}),i.jsx("td",{className:"p-2 border",children:p?i.jsxs("div",{className:"flex gap-2 justify-center",children:[we.status==="PENDIENTE"&&i.jsx("button",{onClick:()=>Et(we),className:"px-2 py-1 rounded text-white bg-green-600 hover:bg-green-700",children:"Pagar"}),i.jsx("button",{className:"px-2 py-1 rounded text-white bg-yellow-600 hover:bg-yellow-700",onClick:()=>xt(we),children:"Editar"}),i.jsx("button",{className:"px-2 py-1 rounded text-white bg-red-600 hover:bg-red-700",onClick:()=>_t(we),children:"Borrar"})]}):i.jsx("span",{className:"text-xs text-gray-500",children:"Solo vista"})})]},we.groupId))})]})}),d&&i.jsx("p",{className:"mt-2 text-sm",children:d}),_&&Mu.createPortal(i.jsxs("div",{className:"fixed inset-0 z-[70] flex items-center justify-center",children:[i.jsx("div",{className:"absolute inset-0 bg-black/40",onClick:()=>S(!1)}),i.jsxs("div",{className:"relative bg-white rounded-lg shadow-2xl border w-[96%] max-w-6xl max-h-[92vh] overflow-auto p-4",children:[i.jsxs("div",{className:"flex items-center justify-between mb-2",children:[i.jsx("h3",{className:"text-lg font-bold",children:U?"Editar pedido":"Crear pedido"}),i.jsx("button",{className:"px-3 py-1 rounded bg-gray-200 hover:bg-gray-300",onClick:()=>S(!1),type:"button",children:"Cerrar"})]}),i.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4 mb-4",children:[i.jsxs("div",{className:"md:col-span-2",children:[i.jsx("label",{className:"block text-sm font-semibold",children:"Nombre de pedido"}),i.jsx("input",{className:"w-full border p-2 rounded",value:E,onChange:we=>T(we.target.value),placeholder:"Ej: Pedido Pollo - Semana 1"})]}),i.jsxs("div",{children:[i.jsx("label",{className:"block text-sm font-semibold",children:"Fecha de lote"}),i.jsx("input",{type:"date",className:"w-full border p-2 rounded",value:k,onChange:we=>B(we.target.value)})]})]}),i.jsxs("div",{className:"border rounded p-3 bg-gray-50 mb-4",children:[i.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-6 gap-3 items-end",children:[i.jsxs("div",{children:[i.jsx("label",{className:"block text-sm font-semibold",children:"Unidad"}),i.jsxs("select",{className:"w-full border p-2 rounded",value:D,onChange:we=>{X(we.target.value),pe(""),ve(0),Pe(NaN),O(0)},children:[i.jsx("option",{value:"lb",children:"lb"}),i.jsx("option",{value:"unidad",children:"unidad"}),i.jsx("option",{value:"kg",children:"kg"})]})]}),i.jsxs("div",{className:"md:col-span-2",children:[i.jsx("label",{className:"block text-sm font-semibold",children:"Producto (solo activos)"}),i.jsxs("select",{className:"w-full border p-2 rounded",value:me,onChange:we=>pe(we.target.value),children:[i.jsx("option",{value:"",children:"Selecciona un producto"}),ct.map(we=>i.jsxs("option",{value:we.id,children:[we.name,"  ",we.category,"  ",we.measurement]},we.id))]})]}),i.jsxs("div",{children:[i.jsx("label",{className:"block text-sm font-semibold",children:"Libras a ingresar"}),i.jsx("input",{type:"number",step:"0.01",inputMode:"decimal",className:"w-full border p-2 rounded",value:he===0?"":he,onChange:we=>{const oe=we.target.value.replace(",","."),Fe=parseFloat(oe),ce=Number.isFinite(Fe)?parseFloat(Fe.toFixed(3)):0;ve(Math.max(0,ce));const Me=G.find(Ke=>Ke.productId===me);Me&&Ae(Me.tempId,"quantity",ce)},disabled:!me})]}),i.jsxs("div",{children:[i.jsx("label",{className:"block text-sm font-semibold",children:"Precio proveedor"}),i.jsx("input",{type:"number",step:"0.01",inputMode:"decimal",className:"w-full border p-2 rounded",value:Number.isNaN(ae)?"":ae,onChange:we=>{const oe=we.target.value.replace(",",".");if(oe==="")return Pe(NaN);const Fe=parseFloat(oe),ce=Number.isFinite(Fe)?parseFloat(Fe.toFixed(2)):NaN;Pe(Number.isFinite(ce)?Math.max(0,ce):NaN);const Me=G.find(Ke=>Ke.productId===me);Me&&Number.isFinite(ce)&&Ae(Me.tempId,"purchasePrice",ce)},disabled:!me})]}),i.jsxs("div",{children:[i.jsx("label",{className:"block text-sm font-semibold",children:"Precio venta (editable)"}),i.jsx("input",{type:"number",step:"0.01",inputMode:"decimal",className:"w-full border p-2 rounded",value:ke===0?"":ke,onChange:we=>{const oe=we.target.value.replace(",","."),Fe=parseFloat(oe),ce=Number.isFinite(Fe)?parseFloat(Fe.toFixed(2)):0;O(Math.max(0,ce));const Me=G.find(Ke=>Ke.productId===me);Me&&Ae(Me.tempId,"salePrice",ce)},disabled:!me})]})]}),i.jsx("div",{className:"flex justify-end mt-3",children:i.jsx("button",{type:"button",onClick:ht,className:"px-3 py-2 rounded bg-blue-600 text-white hover:bg-blue-700",children:"Agregar producto al pedido"})})]}),i.jsx("div",{className:"bg-white rounded border overflow-x-auto",children:i.jsxs("table",{className:"min-w-[1200px] text-xs md:text-sm",children:[i.jsx("thead",{className:"bg-gray-100",children:i.jsxs("tr",{className:"whitespace-nowrap",children:[i.jsx("th",{className:"p-2 border",children:"Producto"}),i.jsx("th",{className:"p-2 border",children:"Libras ingresadas"}),i.jsx("th",{className:"p-2 border",children:"Libras restantes"}),i.jsx("th",{className:"p-2 border",children:"Precio proveedor"}),i.jsx("th",{className:"p-2 border",children:"Precio venta"}),i.jsx("th",{className:"p-2 border",children:"Total facturado"}),i.jsx("th",{className:"p-2 border",children:"Total esperado"}),i.jsx("th",{className:"p-2 border",children:"Utilidad bruta"}),i.jsx("th",{className:"p-2 border",children:"Acciones"})]})}),i.jsx("tbody",{children:G.length===0?i.jsx("tr",{children:i.jsx("td",{colSpan:9,className:"p-4 text-center text-gray-500",children:"No hay productos agregados."})}):G.map(we=>i.jsxs("tr",{className:"text-center whitespace-nowrap",children:[i.jsxs("td",{className:"p-2 border text-left",children:[we.productName,i.jsxs("div",{className:"text-[11px] text-gray-500",children:[we.category,"  ",we.unit]})]}),i.jsx("td",{className:"p-2 border",children:i.jsx("input",{type:"number",step:"0.01",inputMode:"decimal",className:"w-28 border p-1 rounded text-right",value:we.quantity,onChange:oe=>{const Fe=oe.target.value.replace(",","."),ce=parseFloat(Fe),Me=Number.isFinite(ce)?parseFloat(ce.toFixed(3)):0;Ae(we.tempId,"quantity",Me)}})}),i.jsx("td",{className:"p-2 border",children:Number(we.remaining||0).toFixed(3)}),i.jsx("td",{className:"p-2 border",children:i.jsx("input",{type:"number",step:"0.01",inputMode:"decimal",className:"w-28 border p-1 rounded text-right",value:we.purchasePrice,onChange:oe=>{const Fe=oe.target.value.replace(",","."),ce=parseFloat(Fe),Me=Number.isFinite(ce)?parseFloat(ce.toFixed(2)):0;Ae(we.tempId,"purchasePrice",Me)}})}),i.jsx("td",{className:"p-2 border",children:i.jsx("input",{type:"number",step:"0.01",inputMode:"decimal",className:"w-28 border p-1 rounded text-right",value:we.salePrice,onChange:oe=>{const Fe=oe.target.value.replace(",","."),ce=parseFloat(Fe),Me=Number.isFinite(ce)?parseFloat(ce.toFixed(2)):0;Ae(we.tempId,"salePrice",Me)}})}),i.jsx("td",{className:"p-2 border",children:Ga(we.invoiceTotal)}),i.jsx("td",{className:"p-2 border",children:Ga(we.expectedTotal)}),i.jsx("td",{className:"p-2 border",children:Ga(we.utilidadBruta)}),i.jsx("td",{className:"p-2 border",children:i.jsx("button",{type:"button",className:"px-2 py-1 rounded bg-red-600 text-white hover:bg-red-700 text-xs",onClick:()=>xe(we.tempId),children:"Quitar"})})]},we.tempId))})]})}),i.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-3 mt-4",children:[i.jsxs("div",{className:"p-3 border rounded bg-gray-50",children:[i.jsx("div",{className:"text-xs text-gray-600",children:"Libras ingresadas"}),i.jsx("div",{className:"text-lg font-semibold",children:Re.lbsIn.toFixed(3)}),i.jsx("div",{className:"text-xs text-gray-600 mt-2",children:"Libras restantes"}),i.jsx("div",{className:"text-lg font-semibold",children:Re.lbsRem.toFixed(3)})]}),i.jsxs("div",{className:"p-3 border rounded bg-gray-50",children:[i.jsx("div",{className:"text-xs text-gray-600",children:"Total facturado"}),i.jsx("div",{className:"text-lg font-semibold",children:Ga(Re.totalFacturado)}),i.jsx("div",{className:"text-xs text-gray-600 mt-2",children:"Total esperado"}),i.jsx("div",{className:"text-lg font-semibold",children:Ga(Re.totalEsperado)}),i.jsx("div",{className:"text-xs text-gray-600 mt-2",children:"Utilidad bruta"}),i.jsx("div",{className:"text-lg font-semibold",children:Ga(Re.utilidadBruta)})]})]}),i.jsxs("div",{className:"flex justify-end gap-2 mt-4",children:[i.jsx("button",{type:"button",className:"px-4 py-2 rounded bg-gray-200 hover:bg-gray-300",onClick:()=>S(!1),children:"Cancelar"}),i.jsx("button",{type:"button",className:"bg-blue-600 text-white px-4 py-2 rounded hover:bg-blue-700",onClick:Ne,disabled:G.length===0,children:U?"Editar pedido":"Crear pedido"})]})]})]}),document.body),H&&Ce&&Mu.createPortal(i.jsxs("div",{className:"fixed inset-0 z-[75] flex items-center justify-center",children:[i.jsx("div",{className:"absolute inset-0 bg-black/40",onClick:()=>{te(!1),V(null)}}),i.jsxs("div",{className:"relative bg-white rounded-lg shadow-2xl border w-[96%] max-w-6xl max-h-[92vh] overflow-auto p-4",children:[i.jsxs("div",{className:"flex items-center justify-between mb-2",children:[i.jsxs("div",{children:[i.jsx("h3",{className:"text-lg font-bold",children:"Detalle del pedido"}),i.jsxs("div",{className:"text-sm text-gray-600",children:[i.jsx("strong",{children:Ce.orderName})," "," ",Ce.date]})]}),i.jsx("button",{className:"px-3 py-1 rounded bg-gray-200 hover:bg-gray-300",onClick:()=>{te(!1),V(null)},type:"button",children:"Cerrar"})]}),i.jsx("div",{className:"bg-white rounded border overflow-x-auto",children:i.jsxs("table",{className:"min-w-[1100px] text-xs md:text-sm",children:[i.jsx("thead",{className:"bg-gray-100",children:i.jsxs("tr",{className:"whitespace-nowrap",children:[i.jsx("th",{className:"p-2 border",children:"Producto"}),i.jsx("th",{className:"p-2 border",children:"Unidad"}),i.jsx("th",{className:"p-2 border",children:"Ingresado"}),i.jsx("th",{className:"p-2 border",children:"Restantes"}),i.jsx("th",{className:"p-2 border",children:"Precio Compra"}),i.jsx("th",{className:"p-2 border",children:"Precio Venta"}),i.jsx("th",{className:"p-2 border",children:"Total factura"}),i.jsx("th",{className:"p-2 border",children:"Total esperado"}),i.jsx("th",{className:"p-2 border",children:"Utilidad"}),i.jsx("th",{className:"p-2 border",children:"Estado"})]})}),i.jsx("tbody",{children:Ce.items.map(we=>{const oe=Number(we.invoiceTotal||0),Fe=Number(we.expectedTotal||0);return i.jsxs("tr",{className:"text-center whitespace-nowrap",children:[i.jsx("td",{className:"p-2 border text-left",children:we.productName}),i.jsx("td",{className:"p-2 border",children:(we.unit||"").toUpperCase()}),i.jsx("td",{className:"p-2 border",children:we.quantity.toFixed(3)}),i.jsx("td",{className:"p-2 border",children:we.remaining.toFixed(3)}),i.jsx("td",{className:"p-2 border",children:Ga(we.purchasePrice)}),i.jsx("td",{className:"p-2 border",children:Ga(we.salePrice)}),i.jsx("td",{className:"p-2 border",children:Ga(oe)}),i.jsx("td",{className:"p-2 border",children:Ga(Fe)}),i.jsx("td",{className:"p-2 border",children:Ga(Fe-oe)}),i.jsx("td",{className:"p-2 border",children:we.status})]},we.id)})})]})}),i.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-3 mt-4",children:[i.jsxs("div",{className:"p-3 border rounded bg-gray-50",children:[i.jsx("div",{className:"text-xs text-gray-600",children:"Libras ingresadas"}),i.jsx("div",{className:"text-lg font-semibold",children:Ce.lbsIn.toFixed(3)})]}),i.jsxs("div",{className:"p-3 border rounded bg-gray-50",children:[i.jsx("div",{className:"text-xs text-gray-600",children:"Libras restantes"}),i.jsx("div",{className:"text-lg font-semibold",children:Ce.lbsRem.toFixed(3)})]}),i.jsxs("div",{className:"p-3 border rounded bg-gray-50",children:[i.jsx("div",{className:"text-xs text-gray-600",children:"Utilidad bruta"}),i.jsx("div",{className:"text-lg font-semibold",children:Ga(Ce.utilidadBruta)})]})]})]})]}),document.body),We&&J&&Mu.createPortal(i.jsxs("div",{className:"fixed inset-0 z-[80] flex items-center justify-center",children:[i.jsx("div",{className:"absolute inset-0 bg-black/50",onClick:nt}),i.jsxs("div",{className:"relative bg-white rounded-xl shadow-2xl border w-[90%] max-w-md p-6",children:[i.jsx("h3",{className:"text-lg font-bold mb-3 text-center",children:"Confirmar pago de inventario"}),i.jsxs("p",{className:"text-sm text-gray-700 mb-5 text-center",children:["Seguro que quieres pagar este pedido?",i.jsx("br",{}),i.jsx("strong",{children:J.orderName})," "," ",J.date,i.jsx("br",{}),"Ya no habrn libras disponibles al pagar este inventario."]}),i.jsxs("div",{className:"flex justify-center gap-4",children:[i.jsx("button",{onClick:Mt,className:"px-4 py-2 rounded-lg bg-green-600 text-white hover:bg-green-700",children:"Confirmar"}),i.jsx("button",{onClick:nt,className:"px-4 py-2 rounded-lg bg-gray-300 hover:bg-gray-400",children:"Cancelar"})]})]})]}),document.body)]})}const Ph=t=>`C$${(Number(t)||0).toFixed(2)}`;function C4e(){const t=rwe(new Date),[e,r]=g.useState(Rr(t,"yyyy-MM")),[n,a]=g.useState([]),[s,o]=g.useState(!1),[l,c]=g.useState(""),u=g.useRef(null),d=g.useMemo(()=>{const[x,v]=e.split("-").map(w=>parseInt(w,10)),y=Rr(Ud(new Date(x,v-1,1)),"yyyy-MM-dd"),b=Rr(Ld(new Date(x,v-1,1)),"yyyy-MM-dd");return{from:y,to:b}},[e]),f=async()=>{o(!0);try{const x=await xPe(d.from,d.to),v=[];for(const y of x){const b=Gt(Se,"inventory_batches",y.batchId),w=await zs(b);if(!w.exists())continue;const j=w.data();v.push({batchId:y.batchId,batchDate:y.batchDate,productName:y.productName,soldQty:Number(y.quantity||0),soldAmount:Number(y.amountCharged||0),status:j.status??"PENDIENTE",purchasePrice:Number(j.purchasePrice||0),salePrice:Number(j.salePrice||0),supplier:j.supplier})}a(v)}catch(x){console.error(x),c(" Error al cargar liquidaciones")}finally{o(!1)}};g.useEffect(()=>{f()},[e]);const A=async x=>{confirm("Marcar este lote como PAGADO?")&&(await Lre(x),a(y=>y.map(b=>b.batchId===x?{...b,status:"PAGADO"}:b)))},h=g.useMemo(()=>{const x=n.reduce((w,j)=>w+j.soldQty,0),v=n.reduce((w,j)=>w+j.soldAmount,0),y=n.reduce((w,j)=>w+j.soldQty*j.purchasePrice,0),b=v-y;return{q:x,amt:v,cogs:y,profit:b}},[n]),m=g.useMemo(()=>{const x=new Map;for(const v of n){const y=v.productName||"(sin nombre)";x.has(y)||x.set(y,{productName:y,qty:0,revenue:0,cogs:0,profit:0});const b=x.get(y);b.qty+=v.soldQty,b.revenue+=v.soldAmount;const w=v.soldQty*v.purchasePrice;b.cogs+=w,b.profit=b.revenue-b.cogs}return Array.from(x.values()).sort((v,y)=>v.productName.localeCompare(y.productName))},[n]),p=async()=>{if(!u.current)return;const x=u.current;x.classList.add("force-pdf-colors");try{const[{default:v},{jsPDF:y}]=await Promise.all([sA(()=>Promise.resolve().then(()=>Q6),void 0),sA(()=>Promise.resolve().then(()=>$k),void 0)]),w=(await v(x,{backgroundColor:"#ffffff",scale:2})).toDataURL("image/png"),j=new y("p","mm","a4"),I=190,_=j.getImageProperties(w),S=I,E=_.height*S/_.width;j.addImage(w,"PNG",10,10,S,E),j.save(`liquidaciones_${e}.pdf`)}catch(v){console.error(v),alert("No se pudo generar el PDF")}finally{x.classList.remove("force-pdf-colors")}};return i.jsxs("div",{className:"max-w-6xl mx-auto",children:[i.jsxs("div",{className:"flex items-center justify-between gap-3 mb-3",children:[i.jsx("h2",{className:"text-2xl font-bold",children:"Liquidaciones por lote"}),i.jsx("button",{onClick:p,className:"bg-green-600 text-white px-3 py-1 rounded hover:bg-green-700",children:"Descargar PDF"})]}),i.jsxs("div",{className:"bg-white p-3 rounded shadow border mb-4 flex flex-wrap items-center gap-3",children:[i.jsx("label",{className:"text-sm font-semibold",children:"Mes:"}),i.jsx("input",{type:"month",className:"border rounded px-2 py-1",value:e,onChange:x=>r(x.target.value)}),i.jsx("button",{onClick:f,className:"bg-gray-800 text-white px-3 py-1 rounded",children:"Aplicar"})]}),i.jsxs("div",{ref:u,children:[i.jsx("div",{className:"bg-white p-3 rounded shadow border mb-3 text-sm",children:i.jsxs("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-2",children:[i.jsxs("div",{children:[i.jsx("span",{className:"font-semibold",children:"Total vendido (cantidad):"})," ",h.q]}),i.jsxs("div",{children:[i.jsx("span",{className:"font-semibold",children:"Monto vendido:"})," ",Ph(h.amt)]}),i.jsxs("div",{children:[i.jsx("span",{className:"font-semibold",children:"Costo (COGS):"})," ",Ph(h.cogs)]}),i.jsxs("div",{children:[i.jsx("span",{className:"font-semibold",children:"Utilidad:"})," ",Ph(h.profit)]})]})}),i.jsx("div",{className:"bg-white p-2 rounded shadow border overflow-x-auto mb-6",children:i.jsxs("table",{className:"min-w-full text-sm",children:[i.jsx("thead",{className:"bg-gray-100",children:i.jsxs("tr",{children:[i.jsx("th",{className:"p-2 border",children:"Lote (fecha)"}),i.jsx("th",{className:"p-2 border",children:"Producto"}),i.jsx("th",{className:"p-2 border",children:"Proveedor"}),i.jsx("th",{className:"p-2 border",children:"Vendido"}),i.jsx("th",{className:"p-2 border",children:"Monto vendido"}),i.jsx("th",{className:"p-2 border",children:"COGS"}),i.jsx("th",{className:"p-2 border",children:"Utilidad"}),i.jsx("th",{className:"p-2 border",children:"Estado"}),i.jsx("th",{className:"p-2 border",children:"Acciones"})]})}),i.jsx("tbody",{children:s?i.jsx("tr",{children:i.jsx("td",{colSpan:9,className:"p-4 text-center",children:"Cargando"})}):n.length===0?i.jsx("tr",{children:i.jsx("td",{colSpan:9,className:"p-4 text-center",children:"Sin datos"})}):n.map(x=>{const v=x.soldQty*x.purchasePrice,y=x.soldAmount-v;return i.jsxs("tr",{className:"text-center",children:[i.jsx("td",{className:"p-2 border",children:x.batchDate}),i.jsx("td",{className:"p-2 border",children:x.productName}),i.jsx("td",{className:"p-2 border",children:x.supplier||"-"}),i.jsx("td",{className:"p-2 border",children:x.soldQty}),i.jsx("td",{className:"p-2 border",children:Ph(x.soldAmount)}),i.jsx("td",{className:"p-2 border",children:Ph(v)}),i.jsx("td",{className:`p-2 border ${y>=0?"text-green-700":"text-red-700"}`,children:Ph(y)}),i.jsx("td",{className:"p-2 border",children:i.jsx("span",{className:`px-2 py-0.5 rounded text-xs ${x.status==="PAGADO"?"bg-green-100 text-green-700":"bg-yellow-100 text-yellow-700"}`,children:x.status})}),i.jsx("td",{className:"p-2 border",children:x.status==="PENDIENTE"&&i.jsx("button",{onClick:()=>A(x.batchId),className:"px-2 py-1 rounded text-white bg-green-600 hover:bg-green-700",children:"Marcar pagado"})})]},x.batchId)})})]})}),i.jsx("h3",{className:"font-semibold mb-2",children:"Utilidad por producto"}),i.jsx("div",{className:"bg-white p-2 rounded shadow border overflow-x-auto",children:i.jsxs("table",{className:"min-w-full text-sm",children:[i.jsx("thead",{className:"bg-gray-100",children:i.jsxs("tr",{children:[i.jsx("th",{className:"p-2 border",children:"Producto"}),i.jsx("th",{className:"p-2 border",children:"Cantidad vendida"}),i.jsx("th",{className:"p-2 border",children:"Ingreso"}),i.jsx("th",{className:"p-2 border",children:"COGS"}),i.jsx("th",{className:"p-2 border",children:"Utilidad"})]})}),i.jsx("tbody",{children:m.length===0?i.jsx("tr",{children:i.jsx("td",{colSpan:5,className:"p-4 text-center",children:"Sin datos"})}):m.map(x=>i.jsxs("tr",{className:"text-center",children:[i.jsx("td",{className:"p-2 border",children:x.productName}),i.jsx("td",{className:"p-2 border",children:x.qty}),i.jsx("td",{className:"p-2 border",children:Ph(x.revenue)}),i.jsx("td",{className:"p-2 border",children:Ph(x.cogs)}),i.jsx("td",{className:`p-2 border ${x.profit>=0?"text-green-700":"text-red-700"}`,children:Ph(x.profit)})]},x.productName))})]})})]}),l&&i.jsx("p",{className:"mt-2 text-sm",children:l})]})}const Xr=t=>`C$${Number(t??0).toFixed(2)}`,_4e=()=>Rr(new Date,"yyyy-MM-dd"),oa=t=>Number(t||0).toFixed(3);function E4e(){const[t,e]=g.useState(()=>{const ce=new Date,Me=new Date(ce.getFullYear(),ce.getMonth(),1);return Rr(Me,"yyyy-MM-dd")}),[r,n]=g.useState(_4e()),[a,s]=g.useState(!0),[o,l]=g.useState([]),[c,u]=g.useState([]),[d,f]=g.useState([]),[A,h]=g.useState(!1),[m,p]=g.useState(null),[x,v]=g.useState(0),[y,b]=g.useState(0),[w,j]=g.useState(0),[I,_]=g.useState(0),[S,E]=g.useState({}),[T,k]=g.useState({}),{refreshKey:B,refresh:D}=Oc(),[X,me]=g.useState({}),[pe,he]=g.useState({}),[ve,ae]=g.useState(!1),Pe=()=>ae(ce=>!ce),[ke,O]=g.useState(!1),G=()=>O(ce=>!ce),[z,U]=g.useState(!1),[Y,ee]=g.useState(!1),[M,H]=g.useState(!1),[te,Ce]=g.useState(!1),[V,We]=g.useState(!1),[ie,J]=g.useState(!1),Oe=()=>U(ce=>!ce),fe=()=>ee(ce=>!ce),_e=()=>H(ce=>!ce),Ue=()=>Ce(ce=>!ce),Ye=()=>We(ce=>!ce),At=()=>J(ce=>!ce),[yt,bt]=g.useState("");g.useEffect(()=>{(async()=>{s(!0);const Me=Yt(mt(Se,"salesV2"),cr("date",">=",t),cr("date","<=",r)),Ke=await kt(Me),P=[];Ke.forEach(re=>{const de=re.data(),Ge=de.date??"";if(Array.isArray(de.items)&&de.items.length>0){de.items.forEach((rt,ft)=>{const et=String(rt.productName??"(sin nombre)"),ut=Number(rt.qty??0),Ot=Number(rt.lineFinal??0)||Math.max(0,Number(rt.unitPrice||0)*ut-Number(rt.discount||0));P.push({id:`${re.id}#${ft}`,date:Ge,productName:et,quantity:ut,amount:Ot,allocations:Array.isArray(rt.allocations)?rt.allocations:de.allocations,avgUnitCost:Number(rt.avgUnitCost??de.avgUnitCost??0),measurement:rt.measurement??de.measurement??"",type:de.type??"CONTADO"})});return}P.push({id:re.id,date:Ge,productName:de.productName??"(sin nombre)",quantity:Number(de.quantity??0),amount:Number(de.amount??de.amountCharged??0),allocations:Array.isArray(de.allocations)?de.allocations:[],avgUnitCost:Number(de.avgUnitCost??0),measurement:de.measurement??"",type:de.type??"CONTADO"})}),l(P);const R=Yt(mt(Se,"expenses"),cr("date",">=",t),cr("date","<=",r)),L=await kt(R),K=[];L.forEach(re=>{const de=re.data();K.push({id:re.id,date:de.date??"",category:de.category??"(sin categora)",description:de.description??"",amount:Number(de.amount??0),status:de.status??"PAGADO",createdAt:de.createdAt})}),u(K),s(!1)})()},[t,r,B]),g.useMemo(()=>{const ce=o.reduce((L,K)=>L+(K.amount||0),0);let Me=0;o.forEach(L=>{var K;(K=L.allocations)!=null&&K.length?Me+=L.allocations.reduce((re,de)=>re+Number(de.lineCost||0),0):L.avgUnitCost&&L.quantity&&(Me+=Number(L.avgUnitCost)*Number(L.quantity))});const Ke=ce-Me,P=c.reduce((L,K)=>L+(K.amount||0),0),R=Ke-P;return{revenue:ce,cogsReal:Me,grossProfit:Ke,expensesSum:P,netProfit:R}},[o,c]);const Nt=g.useMemo(()=>yt?o.filter(ce=>(ce.productName||"")===yt):o,[o,yt]),jt=g.useMemo(()=>{const ce=Nt.reduce((L,K)=>L+(K.amount||0),0);let Me=0;Nt.forEach(L=>{var K;(K=L.allocations)!=null&&K.length?Me+=L.allocations.reduce((re,de)=>re+Number(de.lineCost||0),0):L.avgUnitCost&&L.quantity&&(Me+=Number(L.avgUnitCost)*Number(L.quantity))});const Ke=ce-Me,P=c.reduce((L,K)=>L+(K.amount||0),0),R=Ke-P;return{revenue:ce,cogsReal:Me,grossProfit:Ke,expensesSum:P,netProfit:R}},[Nt,c]),St=g.useMemo(()=>{const ce=Nt.filter(K=>K.type==="CONTADO"),Me=ce.reduce((K,re)=>K+(re.amount||0),0);let Ke=0;ce.forEach(K=>{var re;(re=K.allocations)!=null&&re.length?Ke+=K.allocations.reduce((de,Ge)=>de+Number(Ge.lineCost||0),0):K.avgUnitCost&&K.quantity&&(Ke+=Number(K.avgUnitCost)*Number(K.quantity))});const P=Me-Ke,R=c.reduce((K,re)=>K+(re.amount||0),0),L=P-R;return{revenue:Me,cogsReal:Ke,grossProfit:P,expensesSum:R,netProfit:L}},[Nt,c]),Ve=g.useMemo(()=>{const ce=Nt.filter(R=>R.type==="CREDITO"),Me=ce.reduce((R,L)=>R+(L.amount||0),0);let Ke=0;ce.forEach(R=>{var L;(L=R.allocations)!=null&&L.length?Ke+=R.allocations.reduce((K,re)=>K+Number(re.lineCost||0),0):R.avgUnitCost&&R.quantity&&(Ke+=Number(R.avgUnitCost)*Number(R.quantity))});const P=Me-Ke;return{revenue:Me,cogsReal:Ke,grossProfit:P}},[Nt]),Te=ce=>String(ce??"").toLowerCase().trim(),qe=ce=>Number(ce.qty??ce.quantity??0),ge=ce=>["lb","lbs","libra","libras"].includes(Te(ce)),q=ce=>["unidad","unidades","ud","uds","pieza","piezas"].includes(Te(ce)),se=ce=>ce?typeof ce=="string"?ce:ce!=null&&ce.toDate?Rr(ce.toDate(),"yyyy-MM-dd"):"":"";g.useEffect(()=>{(async()=>{h(!0);try{const Me=await kt(mt(Se,"customers_pollo")),Ke={};Me.forEach(wr=>{const Or=wr.data();Ke[wr.id]=String(Or.name??"(sin nombre)")});const P=await kt(mt(Se,"ar_movements_pollo")),R={},L={},K={},re={},de={},Ge=new Set,rt={},ft={},et={},ut={};let Ot=0,zt=0;const Bt=wr=>{var Or;return wr!=null&&wr.date?String(wr.date):(Or=wr==null?void 0:wr.createdAt)!=null&&Or.toDate?Rr(wr.createdAt.toDate(),"yyyy-MM-dd"):""};P.forEach(wr=>{var Jt,ar,tr;const Or=wr.data(),$r=String(Or.customerId??"").trim();if(!$r)return;const mr=Number(Or.amount??0);R[$r]=(R[$r]||0)+mr;const Kr=String(Or.type??"").toUpperCase(),or=String(Or.debtStatus??Or.creditStatus??Or.cycleStatus??Or.status??"").toUpperCase().trim(),dt=["PAGADA","PAGADO","CERRADA","CERRADO","LIQUIDADA","LIQUIDADO"].includes(or),er=Or.createdAt??null;if(Kr==="ABONO"){Ot+=Math.abs(mr);const fr=Bt(Or);fr&&fr>=t&&fr<=r&&(zt+=Math.abs(mr));const ne=(Jt=Or==null?void 0:Or.ref)!=null&&Jt.saleId?String(Or.ref.saleId):"";ne?(rt[ne]=(rt[ne]||0)+Math.abs(mr),fr&&fr>=t&&fr<=r&&(et[ne]=(et[ne]||0)+Math.abs(mr)),Ge.add(ne)):(ft[$r]=(ft[$r]||0)+Math.abs(mr),fr&&fr>=t&&fr<=r&&(ut[$r]=(ut[$r]||0)+Math.abs(mr)));const He=K[$r],tt=!(He!=null&&He.ts)||(er!=null&&er.toDate&&((ar=He.ts)!=null&&ar.toDate)?er.toDate()>He.ts.toDate():!1);(!He||tt)&&(K[$r]={amount:Math.abs(mr),date:Or.date??"",ts:er})}if(Kr==="CARGO"){const fr=(tr=Or==null?void 0:Or.ref)!=null&&tr.saleId?String(Or.ref.saleId):"";fr&&(re[$r]||(re[$r]=new Set),re[$r].add(fr),dt||(de[$r]||(de[$r]=new Set),de[$r].add(fr)),Ge.add(fr)),dt||(L[$r]=(L[$r]||0)+Math.abs(mr))}});const Lt=new Map;await Promise.all(Array.from(Ge).map(async wr=>{const Or=await zs(Gt(Se,"salesV2",wr));Or.exists()&&Lt.set(wr,Or.data())}));let Be=0,vt=0;const hr=wr=>{const Or=Number(wr.qty??wr.quantity??0);return Number(wr.lineFinal??0)||Math.max(0,Number(wr.unitPrice||0)*Or-Number(wr.discount||0))},xr=wr=>{if(Array.isArray(wr.items)&&wr.items.length>0){let Kr=0,or=0;return wr.items.forEach(dt=>{const er=Number(dt.qty??dt.quantity??0);if(Kr+=hr(dt),Array.isArray(dt.allocations)&&dt.allocations.length>0)or+=dt.allocations.reduce((Jt,ar)=>Jt+Number(ar.lineCost||0),0);else{const Jt=Number(dt.avgUnitCost??wr.avgUnitCost??0);or+=Jt*er}}),{total:Kr,cogs:or}}const Or=Number(wr.quantity??0),$r=Number(wr.amount??wr.amountCharged??0)||0;let mr=0;return Array.isArray(wr.allocations)&&wr.allocations.length>0?mr=wr.allocations.reduce((Kr,or)=>Kr+Number(or.lineCost||0),0):wr.avgUnitCost&&(mr=Number(wr.avgUnitCost)*Or),{total:$r,cogs:mr}},Nr=new Map;Lt.forEach((wr,Or)=>{const{total:$r,cogs:mr}=xr(wr);Nr.set(Or,{total:$r,cogs:mr,grossProfit:$r-mr})});const gr={},_r={},Zr={},Nn={};Object.keys(rt).forEach(wr=>{const Or=Nr.get(wr);if(!(Or!=null&&Or.total))return;const $r=Number(rt[wr]||0);_r[wr]=$r;const mr=Math.min(1,$r/Or.total),Kr=Or.grossProfit*mr;gr[wr]=Kr,Be+=Kr}),Object.keys(et).forEach(wr=>{const Or=Nr.get(wr);if(!(Or!=null&&Or.total))return;const $r=Number(et[wr]||0);Nn[wr]=$r;const mr=Math.min(1,$r/Or.total),Kr=Or.grossProfit*mr;Zr[wr]=Kr,vt+=Kr}),Object.keys(ft).forEach(wr=>{const Or=re[wr];if(!Or||Or.size===0)return;let $r=0,mr=0,Kr=0,or=0;Or.forEach(tr=>{const fr=Nr.get(tr);fr&&($r+=fr.total,mr+=fr.grossProfit,_r[tr]&&(Kr+=Math.min(fr.total,_r[tr])),or+=gr[tr]||0)});const dt=Math.max(0,$r-Kr),er=Math.max(0,mr-or);if(!dt||!er)return;const Jt=Number(ft[wr]||0),ar=Math.min(1,Jt/dt);Be+=er*ar}),Object.keys(ut).forEach(wr=>{const Or=re[wr];if(!Or||Or.size===0)return;let $r=0,mr=0,Kr=0,or=0;Or.forEach(tr=>{const fr=Nr.get(tr);fr&&($r+=fr.total,mr+=fr.grossProfit,Nn[tr]&&(Kr+=Math.min(fr.total,Nn[tr])),or+=Zr[tr]||0)});const dt=Math.max(0,$r-Kr),er=Math.max(0,mr-or);if(!dt||!er)return;const Jt=Number(ut[wr]||0),ar=Math.min(1,Jt/dt);vt+=er*ar});const en=[];Object.keys(R).forEach(wr=>{const Or=Number(R[wr]||0);if(Or<=0)return;const $r=new Map;let mr=0,Kr=0,or="";(de[wr]||new Set).forEach(ar=>{const tr=Lt.get(ar);if(!tr)return;const fr=String(tr.date??"");fr&&(!or||fr>or)&&(or=fr),(Array.isArray(tr.items)&&tr.items.length>0?tr.items:[{productName:tr.productName,qty:tr.quantity,unitPrice:tr.unitPrice,discount:tr.discount,lineFinal:tr.amount??tr.amountCharged,measurement:tr.measurement}]).forEach(He=>{const tt=String(He.productName??"(sin nombre)"),Je=Number(He.qty??He.quantity??0),pt=String(He.measurement??""),wt=Number(He.lineFinal??0)||Math.max(0,Number(He.unitPrice||0)*Je-Number(He.discount||0));ge(pt)?mr+=Je:Kr+=Je;const Wt=`${tt}||${pt}`,Xt=$r.get(Wt)||{productName:tt,qty:0,amount:0,measurement:pt};Xt.qty+=Je,Xt.amount+=wt,$r.set(Wt,Xt)})});const er=K[wr],Jt=Number(L[wr]||0);en.push({customerId:wr,name:Ke[wr]||"(sin nombre)",balance:Or,globalBalance:Jt>0?Jt:Or,lbs:mr,units:Kr,lastPaymentAmount:Number((er==null?void 0:er.amount)||0),lastSaleDate:or||"",lastPaymentDate:se((er==null?void 0:er.ts)||(er==null?void 0:er.date)),products:Array.from($r.values()).sort((ar,tr)=>ar.productName.localeCompare(tr.productName))})});const Qr=en.filter(wr=>wr.products.length);Qr.sort((wr,Or)=>Or.balance-wr.balance),f(Qr),v(Ot),b(zt),j(Be),_(vt)}catch(Me){console.error("Error cargando saldos pendientes:",Me),f([]),v(0),b(0),_(0)}finally{h(!1)}})()},[B,t,r]),g.useEffect(()=>{(async()=>{try{const Me=await kt(Yt(mt(Se,"inventory_batches"))),Ke=yS(t,"yyyy-MM-dd",new Date),P=yS(r,"yyyy-MM-dd",new Date),R=Rr(Ud(Ke),"yyyy-MM-dd"),L=Rr(Ld(P),"yyyy-MM-dd"),K={};Me.forEach(re=>{var Ot;const de=re.data(),Ge=String(de.productName??"(sin nombre)"),rt=Number(de.quantity??0),ft=Number(de.remaining??0),et=(Ot=de==null?void 0:de.date)!=null&&Ot.toDate?Rr(de.date.toDate(),"yyyy-MM-dd"):String((de==null?void 0:de.date)??(de==null?void 0:de.createdAt)??""),ut=et&&et>=R&&et<=L;K[Ge]||(K[Ge]={incomingQty:0,remainingQty:0}),ut&&(K[Ge].incomingQty+=rt),K[Ge].remainingQty+=ft}),E(K)}catch(Me){console.error("Error cargando inventario:",Me),E({})}})()},[B,t,r]),g.useMemo(()=>o.reduce((ce,Me)=>ge(Me.measurement)?ce+qe(Me):ce,0),[o]),g.useMemo(()=>Nt.reduce((ce,Me)=>ge(Me.measurement)?ce+qe(Me):ce,0),[Nt]);const ye=g.useMemo(()=>Nt.filter(ce=>ce.type==="CONTADO"),[Nt]),ue=g.useMemo(()=>Nt.filter(ce=>ce.type==="CREDITO"),[Nt]),Le=g.useMemo(()=>ye.reduce((ce,Me)=>ce+(Me.amount||0),0),[ye]),ct=g.useMemo(()=>ue.reduce((ce,Me)=>ce+(Me.amount||0),0),[ue]),ht=g.useMemo(()=>d.reduce((ce,Me)=>ce+Number(Me.balance||0),0),[d]),xe=g.useMemo(()=>St.revenue,[St.revenue]),Ae=g.useMemo(()=>Le,[Le]),Re=g.useMemo(()=>Le+y,[Le,y]),lt=g.useMemo(()=>St.grossProfit+I,[St.grossProfit,I]),Ne=g.useMemo(()=>St.netProfit+I,[St.netProfit,I]),De=g.useMemo(()=>ye.reduce((ce,Me)=>ge(Me.measurement)?ce+qe(Me):ce,0),[ye]),xt=g.useMemo(()=>ue.reduce((ce,Me)=>ge(Me.measurement)?ce+qe(Me):ce,0),[ue]);g.useMemo(()=>o.reduce((ce,Me)=>q(Me.measurement)?ce+qe(Me):ce,0),[o]),g.useMemo(()=>Nt.reduce((ce,Me)=>q(Me.measurement)?ce+qe(Me):ce,0),[Nt]);const _t=g.useMemo(()=>ye.reduce((ce,Me)=>q(Me.measurement)?ce+qe(Me):ce,0),[ye]),Et=g.useMemo(()=>ue.reduce((ce,Me)=>q(Me.measurement)?ce+qe(Me):ce,0),[ue]),Mt=g.useMemo(()=>Array.from(new Set(o.map(ce=>ce.productName||"(sin nombre)"))).sort(),[o]),nt=g.useMemo(()=>{var Me;const ce=new Map;for(const Ke of Nt){const P=Ke.productName||"(sin nombre)";ce.has(P)||ce.set(P,{productName:P,units:0,revenue:0,cogs:0,profit:0,firstDate:Ke.date||"",lastDate:Ke.date||""});const R=ce.get(P);R.units+=Number(Ke.quantity||0),R.revenue+=Number(Ke.amount||0),(!R.firstDate||Ke.date<(R.firstDate||Ke.date))&&(R.firstDate=Ke.date),(!R.lastDate||Ke.date>(R.lastDate||Ke.date))&&(R.lastDate=Ke.date);let L=0;(Me=Ke.allocations)!=null&&Me.length?L=Ke.allocations.reduce((K,re)=>K+Number(re.lineCost||0),0):Ke.avgUnitCost&&(L=Number(Ke.avgUnitCost)*Number(Ke.quantity||0)),R.cogs+=L,R.profit=R.revenue-R.cogs}return Array.from(ce.values()).sort((Ke,P)=>Ke.productName.localeCompare(P.productName))},[Nt]),Ee=g.useMemo(()=>[...nt].sort((ce,Me)=>Me.units-ce.units).slice(0,3).map((ce,Me)=>({idx:Me+1,name:ce.productName,units:ce.units})),[nt]),we=ce=>me(Me=>({...Me,[ce]:!Me[ce]})),oe=ce=>he(Me=>({...Me,[ce]:!Me[ce]})),Fe=()=>{const ce=new rn({unit:"pt",format:"a4"}),Me="Dashboard Financiero",Ke=`Rango: ${t} a ${r}`,P=yt?`Producto: ${yt}`:"Producto: Todos";ce.setFontSize(16),ce.text(Me,40,40),ce.setFontSize(10),ce.text(Ke,40,58),ce.text(P,40,72);let R=90;const L=()=>{var re;R=(re=ce.lastAutoTable)!=null&&re.finalY?ce.lastAutoTable.finalY+18:R+18},K=(re,de)=>{de.length&&(ce.setFontSize(11),ce.text(re,40,R),R+=12,L0(ce,{startY:R,head:[["KPI","Valor"]],body:de,styles:{fontSize:9},headStyles:{fillColor:[245,245,245],textColor:[0,0,0]}}),L())};K("KPIs Generales",[["Ventas (rango)",Xr(jt.revenue)],["Costo",Xr(jt.cogsReal)],["Utilidad Bruta",Xr(jt.grossProfit)],["Gastos",Xr(jt.expensesSum)],["Utilidad Neta",Xr(jt.netProfit)]]),K("KPIs Cash",[["Ventas Cash",Xr(xe)],["Costo Cash",Xr(St.cogsReal)],["Utilidad Bruta Cash",Xr(St.grossProfit)]]),K("KPIs Crdito",[["Ventas Crdito",Xr(Ve.revenue)],["Costo Crdito",Xr(Ve.cogsReal)],["Utilidad Bruta Crdito",Xr(Ve.grossProfit)]]),K("Fondos y Utilidades",[["CxC",Xr(ht)],["Recaudacin (Abonos)",Xr(x)],["Recaudacin a la fecha",Xr(y)],["Recolectado Cash + Abonos",Xr(Re)],["Utilidad Neta Crdito (Caja)",Xr(I)],["Utilidad Bruta Cash + Crdito",Xr(lt)],["Gastos",Xr(St.expensesSum)],["Utilidad Neta Cash + Crdito",Xr(Ne)]]),K("KPIs de Volumen y Ventas",[["Ventas Cash",Xr(Ae)],["Ventas Crdito",Xr(ct)],["Libras Cash",oa(De)],["Libras Crdito",oa(xt)],["Libras Cash + Crdito",oa(De+xt)],["Unidades Cash",oa(_t)],["Unidades Crdito",oa(Et)],["Unidades Cash + Crdito",oa(_t+Et)]]),Ee.length>0&&(ce.setFontSize(11),ce.text("Top productos por unidades",40,R),R+=12,L0(ce,{startY:R,head:[["#","Producto","Cantidad"]],body:Ee.map(re=>[String(re.idx),re.name,oa(re.units)]),styles:{fontSize:8},headStyles:{fillColor:[245,245,245],textColor:[0,0,0]}}),L()),L0(ce,{startY:R,head:[["Cliente","Libras","Unidades","Saldo Global","ltimo abono","Saldo pendiente","Fecha ult. abono"]],body:d.map(re=>[re.name,oa(re.lbs),oa(re.units),Xr(re.globalBalance),Xr(re.lastPaymentAmount),Xr(re.balance),re.lastPaymentDate||""]),styles:{fontSize:8},headStyles:{fillColor:[245,245,245],textColor:[0,0,0]},didDrawPage:re=>{re.pageNumber>1&&(ce.setFontSize(10),ce.text(Me,40,30))}}),L(),L0(ce,{startY:R,head:[["Producto","Ingresado","Disponibilidad","Fechas","Cantidad","Venta","Costo","Utilidad"]],body:nt.map(re=>{var de,Ge;return[re.productName,oa(((de=S[re.productName])==null?void 0:de.incomingQty)||0),oa(((Ge=S[re.productName])==null?void 0:Ge.remainingQty)||0),re.firstDate&&re.lastDate?re.firstDate===re.lastDate?re.firstDate:`${re.firstDate}  ${re.lastDate}`:"",oa(re.units),Xr(re.revenue),Xr(re.cogs),Xr(re.profit)]}),styles:{fontSize:8},headStyles:{fillColor:[245,245,245],textColor:[0,0,0]}}),L(),L0(ce,{startY:R,head:[["Fecha","Categora","Descripcin","Monto","Estado"]],body:c.map(re=>[re.date,re.category,re.description||"",Xr(re.amount),re.status||""]),styles:{fontSize:8},headStyles:{fillColor:[245,245,245],textColor:[0,0,0]}}),ce.save(`dashboard_${t}_a_${r}.pdf`)};return i.jsxs("div",{className:"max-w-7xl mx-auto bg-white p-4 sm:p-6 rounded-2xl shadow-2xl",children:[i.jsxs("div",{className:"flex items-center justify-between mb-3 gap-2",children:[i.jsx("h2",{className:"text-xl sm:text-2xl font-bold",children:"Dashboard Financiero"}),i.jsxs("div",{className:"flex items-center gap-2",children:[i.jsx("button",{type:"button",onClick:Fe,className:"px-3 py-2 rounded-lg text-sm bg-gray-900 text-white hover:bg-black",children:"Exportar PDF"}),i.jsx(Fc,{onClick:D,loading:a})]})]}),i.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-2 gap-2 mb-4",children:[i.jsxs("div",{children:[i.jsx("label",{className:"block text-sm text-gray-600 mb-1",children:"Desde"}),i.jsx("input",{type:"date",className:"border rounded px-3 py-2 w-full",value:t,onChange:ce=>e(ce.target.value)})]}),i.jsxs("div",{children:[i.jsx("label",{className:"block text-sm text-gray-600 mb-1",children:"Hasta"}),i.jsx("input",{type:"date",className:"border rounded px-3 py-2 w-full",value:r,onChange:ce=>n(ce.target.value)})]})]}),a?i.jsx("p",{children:"Cargando"}):i.jsxs(i.Fragment,{children:[i.jsxs("div",{className:"mb-3",children:[i.jsxs("button",{type:"button",onClick:Oe,className:"w-full text-left px-3 py-3 flex items-center justify-between border rounded-2xl bg-white",children:[i.jsxs("div",{children:[i.jsx("div",{className:"font-semibold",children:"Kpi Financiero"}),i.jsxs("div",{className:"text-xs text-gray-600",children:["Ventas: ",i.jsx("b",{children:Xr(jt.revenue)}),"  Utilidad Neta:"," ",i.jsx("b",{children:Xr(jt.netProfit)})]})]}),i.jsx("div",{className:"text-gray-500",children:z?"Cerrar":"Ver"})]}),z&&i.jsxs("div",{className:"mt-3",children:[i.jsx("div",{className:"flex gap-2 mb-2 items-center",children:i.jsxs("select",{className:"w-full border rounded px-2 py-2 text-sm",value:yt,onChange:ce=>bt(ce.target.value),children:[i.jsx("option",{value:"",children:"Todos los productos"}),Mt.map(ce=>i.jsx("option",{value:ce,children:ce},ce))]})}),i.jsxs("div",{className:"md:hidden space-y-3",children:[i.jsxs("div",{className:"rounded-3xl bg-white shadow-xl border border-gray-100 p-3 sm:p-4 space-y-3",children:[i.jsxs("button",{type:"button",className:"w-full flex items-center justify-between text-left",onClick:Ue,children:[i.jsxs("div",{children:[i.jsx("h3",{className:"font-semibold text-sm text-gray-800",children:"Ventas cash - Credito"}),i.jsx("span",{className:"text-xs text-gray-500",children:"Resumen"})]}),i.jsx("span",{className:"text-xs text-gray-500",children:te?"Cerrar":"Ver"})]}),te&&i.jsxs(i.Fragment,{children:[i.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-3 gap-3",children:[i.jsx(as,{title:"Ventas",subtitle:"Ventas cash",value:Xr(xe),valueClass:"text-[#1E4D2B]"}),i.jsx(as,{title:"Costo",value:Xr(St.cogsReal)}),i.jsx(as,{title:"Utilidad Bruta Cash",value:Xr(St.grossProfit),positive:!0})]}),i.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-3 gap-3",children:[i.jsx(as,{title:"Ventas Crdito",value:Xr(Ve.revenue)}),i.jsx(as,{title:"Costo",value:Xr(Ve.cogsReal),negative:!0}),i.jsx(as,{title:"Utilidad Bruta Crdito",value:Xr(Ve.grossProfit),positive:!0})]})]})]}),i.jsxs("div",{className:"rounded-3xl bg-white shadow-xl border border-gray-100 p-3 sm:p-4 space-y-3",children:[i.jsxs("button",{type:"button",className:"w-full flex items-center justify-between text-left",onClick:Ye,children:[i.jsxs("div",{children:[i.jsx("h3",{className:"font-semibold text-sm text-gray-800",children:"Fondos"}),i.jsx("span",{className:"text-xs text-gray-500",children:"Liquidez"})]}),i.jsx("span",{className:"text-xs text-gray-500",children:V?"Cerrar":"Ver"})]}),V&&i.jsxs(i.Fragment,{children:[i.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-3 gap-3",children:[i.jsx(as,{title:"CxC",value:Xr(ht)}),i.jsx(as,{title:"Recaudacin Global(Abonos)",value:Xr(x)}),i.jsx(as,{title:"Recaudacin a la fecha",value:Xr(y)}),i.jsx(as,{title:"Recolectado Cash + Abonos",value:Xr(Re),positive:!0})]}),i.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-2 gap-3",children:[i.jsx(as,{title:"Utilidad Neta Crdito (Caja)",value:Xr(I),valueClass:"text-[#BF5700]"}),i.jsx(as,{title:"Utilidad Bruta Cash + Crdito",value:Xr(lt),positive:!0})]}),i.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-2 gap-3",children:[i.jsx(as,{title:"Gastos",value:Xr(St.expensesSum),negative:!0}),i.jsx(as,{title:"Utilidad Neta Cash + Crdito",value:Xr(Ne),positive:!0})]})]})]}),i.jsxs("div",{className:"rounded-3xl bg-white shadow-xl border border-gray-100 p-3 sm:p-4 space-y-3",children:[i.jsxs("button",{type:"button",className:"w-full flex items-center justify-between text-left",onClick:At,children:[i.jsxs("div",{children:[i.jsx("h3",{className:"font-semibold text-sm text-gray-800",children:"Detalles"}),i.jsx("span",{className:"text-xs text-gray-500",children:"Mtricas adicionales"})]}),i.jsx("span",{className:"text-xs text-gray-500",children:ie?"Cerrar":"Ver"})]}),ie&&i.jsxs(i.Fragment,{children:[i.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-2 gap-3 rounded-2xl shadow-lg p-3 sm:p-4 bg-gray-50",children:[i.jsx($l,{title:"Ventas Cash",value:Xr(Ae)}),i.jsx($l,{title:"Ventas Crdito",value:Xr(ct)}),i.jsx($l,{title:"Libras Cash",value:oa(De)}),i.jsx($l,{title:"Libras Crdito",value:oa(xt)}),i.jsx($l,{title:"Unidades Cash",value:oa(_t)}),i.jsx($l,{title:"Unidades Crdito",value:oa(Et)})]}),i.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-3 gap-3 rounded-lg shadow-2xl p-3 sm:p-4 bg-gray-50",children:[i.jsx($l,{title:"Libras Cash + Credito",value:oa(De+xt)}),i.jsx($l,{title:"Unidades Cash + Credito",value:oa(_t+Et)}),i.jsx(aH,{title:"Productos ms vendidos",items:Ee.map(ce=>({key:`${ce.idx}`,label:`${ce.idx}. ${ce.name}`,value:`(${oa(ce.units)})`}))})]})]})]})]}),i.jsxs("div",{className:"hidden md:grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-3 gap-3 mb-3 rounded-2xl shadow-lg p-3 sm:p-4 bg-gray-50",children:[i.jsx(as,{title:"Ventas Cash",value:Xr(xe),positive:!0}),i.jsx(as,{title:"Costo",value:Xr(St.cogsReal),negative:!0}),i.jsx(as,{title:"Utilidad Bruta Cash",value:Xr(St.grossProfit),positive:!0})]}),i.jsxs("div",{className:"hidden md:grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-3 gap-3 mb-3 rounded-2xl shadow-lg p-3 sm:p-4 bg-gray-50",children:[i.jsx(as,{title:"Ventas Crdito",value:Xr(Ve.revenue),positive:!0}),i.jsx(as,{title:"Costo",value:Xr(Ve.cogsReal),negative:!0}),i.jsx(as,{title:"Utilidad Bruta Crdito",value:Xr(Ve.grossProfit),positive:!0})]}),i.jsxs("div",{className:"hidden md:grid grid-cols-1 sm:grid-cols-3 gap-3 mb-3 rounded-2xl shadow-lg p-3 sm:p-4 bg-gray-50",children:[i.jsx(as,{title:"CxC",value:Xr(ht),negative:!0}),i.jsx(as,{title:"Recaudacin Global(Abonos)",value:Xr(x),positive:!0}),i.jsx(as,{title:"Recaudacin a la fecha",value:Xr(y),positive:!0}),i.jsx(as,{title:"Recolectado Cash + Abonos",value:Xr(Re),positive:!0})]}),i.jsxs("div",{className:"hidden md:grid grid-cols-1 sm:grid-cols-4 gap-3 mb-3 rounded-2xl shadow-lg p-3 sm:p-4 bg-gray-50",children:[i.jsx(as,{title:"Utilidad Neta Crdito (Caja)",value:Xr(I),valueClass:"text-[#BF5700]"}),i.jsx(as,{title:"Utilidad Bruta Cash + Crdito",value:Xr(lt),positive:!0}),i.jsx(as,{title:"Gastos",value:Xr(St.expensesSum),negative:!0}),i.jsx(as,{title:"Utilidad Neta Cash + Crdito",value:Xr(Ne),positive:!0})]}),i.jsxs("div",{className:"hidden md:grid grid-cols-1 sm:grid-cols-2 gap-3 mb-3 rounded-2xl shadow-lg p-3 sm:p-4 bg-gray-50",children:[i.jsx($l,{title:"Ventas Cash",value:Xr(Ae)}),i.jsx($l,{title:"Ventas Crdito",value:Xr(ct)}),i.jsx($l,{title:"Libras Cash",value:oa(De)}),i.jsx($l,{title:"Libras Crdito",value:oa(xt)}),i.jsx($l,{title:"Unidades Cash",value:oa(_t)}),i.jsx($l,{title:"Unidades Crdito",value:oa(Et)})]}),i.jsxs("div",{className:"hidden md:grid grid-cols-1 sm:grid-cols-3 gap-3 mb-6 rounded-lg shadow-2xl p-3 sm:p-4 bg-gray-50",children:[i.jsx($l,{title:"Libras Cash + Credito",value:oa(De+xt)}),i.jsx($l,{title:"Unidades Cash + Credito",value:oa(_t+Et)}),i.jsx(aH,{title:"Productos ms vendidos",items:Ee.map(ce=>({key:`${ce.idx}`,label:`${ce.idx}. ${ce.name}`,value:`(${oa(ce.units)})`}))})]})]})]}),i.jsxs("div",{className:"mb-3",children:[i.jsxs("button",{type:"button",onClick:fe,className:"w-full text-left px-3 py-3 flex items-center justify-between border rounded-2xl bg-white",children:[i.jsx("div",{className:"font-semibold",children:"Saldos pendientes"}),i.jsx("div",{className:"text-gray-500",children:Y?"Cerrar":"Ver"})]}),Y&&i.jsx("div",{className:"border rounded-2xl p-3 sm:p-4 bg-gray-50 mt-3",children:A?i.jsx("div",{className:"text-sm text-gray-600",children:"Cargando saldos"}):d.length===0?i.jsx("div",{className:"text-sm text-gray-600",children:"Sin saldos pendientes."}):i.jsx("div",{className:"overflow-x-auto",children:i.jsxs("table",{className:"min-w-full border text-sm",children:[i.jsx("thead",{className:"bg-white",children:i.jsxs("tr",{children:[i.jsx("th",{className:"border p-2",children:"Cliente"}),i.jsx("th",{className:"border p-2",children:"Libras"}),i.jsx("th",{className:"border p-2",children:"Unidades"}),i.jsx("th",{className:"border p-2",children:"Saldo Global"}),i.jsx("th",{className:"border p-2",children:"ltimo abono"}),i.jsx("th",{className:"border p-2",children:"Saldo pendiente"}),i.jsx("th",{className:"border p-2",children:"Fecha ult. abono"}),i.jsx("th",{className:"border p-2",children:"Ver"})]})}),i.jsx("tbody",{children:d.map(ce=>i.jsxs("tr",{className:"text-center",children:[i.jsx("td",{className:"border p-1 text-left",children:ce.name}),i.jsx("td",{className:"border p-1",children:oa(ce.lbs)}),i.jsx("td",{className:"border p-1",children:oa(ce.units)}),i.jsx("td",{className:"border p-1",children:Xr(ce.globalBalance)}),i.jsx("td",{className:"border p-1",children:Xr(ce.lastPaymentAmount)}),i.jsx("td",{className:"border p-1",children:Xr(ce.balance)}),i.jsx("td",{className:"border p-1",children:ce.lastPaymentDate||""}),i.jsx("td",{className:"border p-1",children:i.jsx("button",{type:"button",onClick:()=>p(ce),className:"px-3 py-1 rounded bg-indigo-600 text-white text-xs hover:bg-indigo-700",children:"Ver"})})]},ce.customerId))})]})})})]}),i.jsxs("div",{className:"mb-3",children:[i.jsxs("button",{type:"button",onClick:_e,className:"w-full text-left px-3 py-3 flex items-center justify-between border rounded-2xl bg-white",children:[i.jsx("div",{className:"font-semibold",children:"Ventas y Gastos"}),i.jsx("div",{className:"text-gray-500",children:M?"Cerrar":"Ver"})]}),M&&i.jsxs("div",{className:"mt-3",children:[i.jsx("h3",{className:"font-semibold mb-2",children:"Ventas"}),i.jsx("div",{className:"hidden md:block",children:i.jsxs("table",{className:"min-w-full border text-sm mb-6",children:[i.jsx("thead",{className:"bg-gray-100",children:i.jsxs("tr",{children:[i.jsx("th",{className:"border p-2",children:"Producto"}),i.jsx("th",{className:"border p-2",children:"Ingresado Lb/Un"}),i.jsx("th",{className:"border p-2",children:"Disponibilidad"}),i.jsx("th",{className:"border p-2",children:"Fecha Venta"}),i.jsx("th",{className:"border p-2",children:"Cantidad Lb/Un"}),i.jsx("th",{className:"border p-2",children:"Monto"}),i.jsx("th",{className:"border p-2",children:"Costo"}),i.jsx("th",{className:"border p-2",children:"Utilidad"})]})}),i.jsxs("tbody",{children:[nt.map(ce=>{var Me,Ke;return i.jsxs("tr",{className:"text-center",children:[i.jsx("td",{className:"border p-1",children:ce.productName}),i.jsx("td",{className:"border p-1",children:oa(((Me=S[ce.productName])==null?void 0:Me.incomingQty)||0)}),i.jsx("td",{className:"border p-1",children:oa(((Ke=S[ce.productName])==null?void 0:Ke.remainingQty)||0)}),i.jsx("td",{className:"border p-1",children:ce.firstDate&&ce.lastDate?ce.firstDate===ce.lastDate?ce.firstDate:`${ce.firstDate}  ${ce.lastDate}`:""}),i.jsx("td",{className:"border p-1",children:oa(ce.units)}),i.jsx("td",{className:"border p-1",children:Xr(ce.revenue)}),i.jsx("td",{className:"border p-1",children:Xr(ce.cogs)}),i.jsx("td",{className:`border p-1 ${ce.profit>=0?"text-green-700":"text-red-700"}`,children:Xr(ce.profit)})]},ce.productName)}),nt.length===0&&i.jsx("tr",{children:i.jsx("td",{colSpan:6,className:"p-3 text-center text-gray-500",children:"Sin datos en el rango seleccionado."})})]})]})}),i.jsxs("div",{className:"md:hidden mb-6",children:[i.jsxs("button",{type:"button",onClick:Pe,className:"w-full text-left px-3 py-3 flex items-center justify-between border rounded-2xl bg-white",children:[i.jsxs("div",{children:[i.jsx("div",{className:"font-semibold",children:"Ventas por producto"}),i.jsxs("div",{className:"text-xs text-gray-600",children:[nt.length," productos"]})]}),i.jsx("div",{className:"text-gray-500",children:ve?"Cerrar":"Ver"})]}),ve&&i.jsx("div",{className:"space-y-2 mt-3",children:nt.length===0?i.jsx("div",{className:"border rounded-xl p-3 text-sm text-gray-500 bg-gray-50",children:"Sin datos en el rango seleccionado."}):nt.map(ce=>{var P,R,L,K;const Me=!!X[ce.productName],Ke=ce.firstDate&&ce.lastDate?ce.firstDate===ce.lastDate?ce.firstDate:`${ce.firstDate}  ${ce.lastDate}`:"";return i.jsxs("div",{className:"border rounded-2xl bg-white shadow-sm overflow-hidden",children:[i.jsxs("button",{type:"button",onClick:()=>we(ce.productName),className:"w-full text-left px-3 py-3 flex items-start gap-3",children:[i.jsxs("div",{className:"flex-1 min-w-0",children:[i.jsx("div",{className:"font-semibold truncate",children:ce.productName}),i.jsx("div",{className:"text-xs text-gray-600 mt-1",children:"Libras/Unidades"}),i.jsxs("div",{className:"text-xs text-gray-600 mt-1",children:["Vendidas: ",i.jsx("b",{children:oa(ce.units)}),"  Disponible:"," ",i.jsx("b",{className:((P=S[ce.productName])==null?void 0:P.remainingQty)>0?"text-green-700":"text-red-700",children:oa(((R=S[ce.productName])==null?void 0:R.remainingQty)||0)})]})]}),i.jsx("div",{className:"text-gray-500 text-xs pt-0.10",children:Me?"Cerrar":"Ver"})]}),Me&&i.jsx("div",{className:"px-3 pb-3 text-sm",children:i.jsxs("div",{className:"grid grid-cols-2 gap-2",children:[i.jsx(rd,{label:"Lb/Un Ingresadas",value:oa(((L=S[ce.productName])==null?void 0:L.incomingQty)||0)}),i.jsx(rd,{label:"Lb/Un Disponibles",value:oa(((K=S[ce.productName])==null?void 0:K.remainingQty)||0)}),i.jsx(rd,{label:"Fechas Venta",value:Ke}),i.jsx(rd,{label:"Lb/Un Vendidas",value:oa(ce.units)}),i.jsx(rd,{label:"Facturado al costo",value:Xr(ce.cogs)}),i.jsx(rd,{label:"Monto Venta",value:Xr(ce.revenue)}),i.jsx(rd,{label:"Utilidad bruta",value:Xr(ce.profit),valueClass:ce.profit>=0?"text-green-700 font-semibold":"text-red-700 font-semibold"})]})})]},ce.productName)})})]}),i.jsx("h3",{className:"font-semibold mb-2",children:"Gastos del periodo"}),i.jsx("div",{className:"hidden md:block",children:i.jsxs("table",{className:"min-w-full border text-sm",children:[i.jsx("thead",{className:"bg-gray-100",children:i.jsxs("tr",{children:[i.jsx("th",{className:"border p-2",children:"Fecha"}),i.jsx("th",{className:"border p-2",children:"Categora"}),i.jsx("th",{className:"border p-2",children:"Descripcin"}),i.jsx("th",{className:"border p-2",children:"Monto"}),i.jsx("th",{className:"border p-2",children:"Estado"})]})}),i.jsxs("tbody",{children:[c.map(ce=>i.jsxs("tr",{className:"text-center",children:[i.jsx("td",{className:"border p-1",children:ce.date}),i.jsx("td",{className:"border p-1",children:ce.category}),i.jsx("td",{className:"border p-1",children:ce.description}),i.jsx("td",{className:"border p-1",children:Xr(ce.amount)}),i.jsx("td",{className:"border p-1",children:i.jsx("span",{className:`px-2 py-0.5 rounded text-xs ${ce.status==="PAGADO"?"bg-green-100 text-green-700":"bg-yellow-100 text-yellow-700"}`,children:ce.status})})]},ce.id)),c.length===0&&i.jsx("tr",{children:i.jsx("td",{colSpan:5,className:"p-3 text-center text-gray-500",children:"Sin gastos en el rango seleccionado."})})]})]})}),i.jsxs("div",{className:"md:hidden mb-6",children:[i.jsxs("button",{type:"button",onClick:G,className:"w-full text-left px-3 py-3 flex items-center justify-between border rounded-2xl bg-white",children:[i.jsxs("div",{children:[i.jsx("div",{className:"font-semibold",children:"Gastos del periodo"}),i.jsxs("div",{className:"text-xs text-gray-600",children:[c.length," registros"]})]}),i.jsx("div",{className:"text-gray-500",children:ke?"Cerrar":"Abrir"})]}),ke&&i.jsx("div",{className:"space-y-2 mt-3",children:c.length===0?i.jsx("div",{className:"border rounded-xl p-3 text-sm text-gray-500 bg-gray-50",children:"Sin gastos en el rango seleccionado."}):c.map(ce=>{const Me=!!pe[ce.id],Ke=ce.status==="PAGADO"?"bg-green-100 text-green-700":"bg-yellow-100 text-yellow-700";return i.jsxs("div",{className:"border rounded-2xl bg-white shadow-sm overflow-hidden",children:[i.jsxs("button",{type:"button",onClick:()=>oe(ce.id),className:"w-full text-left px-3 py-3 flex items-start gap-3",children:[i.jsxs("div",{className:"flex-1 min-w-0",children:[i.jsxs("div",{className:"flex items-center gap-2",children:[i.jsx("div",{className:"font-semibold truncate",children:ce.category}),i.jsx("span",{className:`px-2 py-0.5 rounded text-[11px] ${Ke}`,children:ce.status})]}),i.jsxs("div",{className:"text-xs text-gray-600 mt-1",children:[ce.date,"  ",i.jsx("b",{children:Xr(ce.amount)})]})]}),i.jsx("div",{className:"text-gray-500 text-sm pt-0.5",children:Me?"Cerrar":"Ver"})]}),Me&&i.jsx("div",{className:"px-3 pb-3 text-sm",children:i.jsxs("div",{className:"grid grid-cols-1 gap-2",children:[i.jsx(rd,{label:"Fecha",value:ce.date}),i.jsx(rd,{label:"Categora",value:ce.category}),i.jsx(rd,{label:"Descripcin",value:ce.description||""}),i.jsx(rd,{label:"Monto",value:Xr(ce.amount)}),i.jsx(rd,{label:"Estado",value:ce.status||""})]})})]},ce.id)})})]})]})]})]}),m&&i.jsx("div",{className:"fixed inset-0 bg-black/40 flex items-center justify-center p-4 z-50",children:i.jsxs("div",{className:"bg-white rounded-2xl shadow-xl w-full max-w-md p-4",children:[i.jsxs("div",{className:"flex items-center justify-between mb-3",children:[i.jsx("h4",{className:"font-semibold text-lg",children:m.name}),i.jsx("button",{type:"button",onClick:()=>p(null),className:"text-sm text-gray-500 hover:text-gray-700",children:""})]}),i.jsx("div",{className:"overflow-x-auto",children:i.jsxs("table",{className:"min-w-full border text-sm",children:[i.jsx("thead",{className:"bg-gray-100",children:i.jsxs("tr",{children:[i.jsx("th",{className:"border p-2",children:"Producto"}),i.jsx("th",{className:"border p-2",children:"Libras/Unidades"}),i.jsx("th",{className:"border p-2",children:"Monto"}),i.jsx("th",{className:"border p-2",children:"Fecha Venta"})]})}),i.jsx("tbody",{children:m.products.length===0?i.jsx("tr",{children:i.jsx("td",{colSpan:4,className:"border p-2 text-center text-gray-500",children:"Sin productos asociados."})}):m.products.map(ce=>i.jsxs("tr",{children:[i.jsx("td",{className:"border p-1",children:ce.productName}),i.jsx("td",{className:"border p-1 text-center",children:oa(ce.qty)}),i.jsx("td",{className:"border p-1 text-center",children:Xr(ce.amount)}),i.jsx("td",{className:"border p-1 text-center",children:m.lastSaleDate||""})]},`${ce.productName}-${ce.measurement}`))})]})})]})})]})}function as({title:t,value:e,positive:r,negative:n,valueClass:a,subtitle:s}){const o=a||(r?"text-[#568203]":n?"text-[#AB274F]":"");return i.jsxs("div",{className:"border rounded-2xl p-3 bg-white",children:[i.jsx("div",{className:"text-[13px] sm:text-[17px] text-gray-500",children:t}),s?i.jsx("div",{className:"text-[11px] sm:text-[12px] text-gray-400",children:s}):null,i.jsx("div",{className:`text-[26px] sm:text-[30px] font-bold ${o}`,children:e})]})}function $l({title:t,value:e}){return i.jsxs("div",{className:"border rounded-lg p-3 bg-white",children:[i.jsx("div",{className:"text-[13px] sm:text-[17px] text-gray-500",children:t}),i.jsx("div",{className:"text-[18px] sm:text-[20px] font-semibold",children:e})]})}function aH({title:t,items:e}){return i.jsxs("div",{className:"border rounded-lg p-3 bg-white",children:[i.jsx("div",{className:"text-[11px] text-gray-500 mb-1",children:t}),i.jsx("ul",{className:"text-sm leading-snug list-none pl-0 m-0 space-y-0.5",children:e.length===0?i.jsx("li",{className:"text-gray-500",children:""}):e.map(r=>i.jsxs("li",{children:[r.label," ",r.value??""]},r.key))})]})}function rd({label:t,value:e,valueClass:r}){return i.jsxs("div",{className:"border rounded-xl p-2 bg-gray-50",children:[i.jsx("div",{className:"text-[11px] text-gray-600",children:t}),i.jsx("div",{className:`text-sm mt-0.5 ${r||""}`,children:e})]})}const LC=["Energia","Bolsas","Detergentes","Limpieza de Freezer","Delivery","Pago a Personal","Varios"],fx=t=>`C$ ${(Number(t)||0).toFixed(2)}`;function S4e(){const{refreshKey:t,refresh:e}=Oc(),[r,n]=g.useState(Rr(Ud(new Date),"yyyy-MM-dd")),[a,s]=g.useState(Rr(Ld(new Date),"yyyy-MM-dd")),[o,l]=g.useState(Rr(new Date,"yyyy-MM-dd")),[c,u]=g.useState(""),[d,f]=g.useState(""),[A,h]=g.useState(0),[m,p]=g.useState("PENDIENTE"),[x,v]=g.useState(""),[y,b]=g.useState([]),[w,j]=g.useState(!0),[I,_]=g.useState(""),[S,E]=g.useState(null),[T,k]=g.useState(""),[B,D]=g.useState(""),[X,me]=g.useState(""),[pe,he]=g.useState(0),[ve,ae]=g.useState("PENDIENTE"),[Pe,ke]=g.useState(""),[O,G]=g.useState(!1),z=()=>G(fe=>!fe),[U,Y]=g.useState(null),ee=fe=>Y(_e=>_e===fe?null:fe);g.useEffect(()=>{(async()=>{j(!0),_("");try{const fe=Yt(mt(Se,"expenses"),In("date","desc")),_e=await kt(fe),Ue=[];_e.forEach(Ye=>{const At=Ye.data();Ue.push({id:Ye.id,date:At.date||Rr(new Date,"yyyy-MM-dd"),category:At.category||"",description:At.description||"",amount:Number(At.amount||0),status:At.status||"PENDIENTE",notes:At.notes||"",createdAt:At.createdAt??Ar.now()})}),b(Ue)}catch(fe){console.error(fe),_(" Error al cargar gastos")}finally{j(!1)}})()},[t]);const M=g.useMemo(()=>y.filter(fe=>!(r&&fe.date<r||a&&fe.date>a)),[y,r,a]),H=g.useMemo(()=>{const fe=M.reduce((Ye,At)=>Ye+(At.amount||0),0),_e=M.filter(Ye=>Ye.status==="PAGADO").reduce((Ye,At)=>Ye+(At.amount||0),0),Ue=fe-_e;return{total:fe,pagado:_e,pendiente:Ue}},[M]),te=()=>{l(Rr(new Date,"yyyy-MM-dd")),u(""),f(""),h(0),p("PENDIENTE"),v("")},Ce=async fe=>{if(fe.preventDefault(),_(""),!c)return _("Selecciona una categora.");if(!d.trim())return _("Ingresa una descripcin.");if(!A||A<=0)return _("Ingresa un monto vlido.");try{const _e={date:o,category:c,description:d.trim(),amount:Number(Number(A||0).toFixed(2)),status:m,notes:x||"",createdAt:Ar.now()},Ue=await Jn(mt(Se,"expenses"),_e);b(Ye=>[{id:Ue.id,..._e},...Ye]),te(),_(" Gasto registrado")}catch(_e){console.error(_e),_(" Error al guardar gasto")}},V=fe=>{_(""),E(fe.id),k(fe.date),D(fe.category||""),me(fe.description||""),he(Number(fe.amount||0)),ae(fe.status||"PENDIENTE"),ke(fe.notes||"")},We=()=>{E(null),k(""),D(""),me(""),he(0),ae("PENDIENTE"),ke("")},ie=async()=>{if(S){if(!B)return _("Selecciona una categora.");if(!X.trim())return _("Ingresa una descripcin.");if(!pe||pe<=0)return _("Ingresa un monto vlido.");try{const fe={date:T,category:B,description:X.trim(),amount:Number(Number(pe||0).toFixed(2)),status:ve,notes:Pe||""};await kn(Gt(Se,"expenses",S),fe),b(_e=>_e.map(Ue=>Ue.id===S?{...Ue,...fe}:Ue)),We(),_(" Gasto actualizado")}catch(fe){console.error(fe),_(" Error al actualizar gasto")}}},J=async fe=>{if(confirm(`Eliminar el gasto "${fe.description}"?`))try{await Kn(Gt(Se,"expenses",fe.id)),b(Ue=>Ue.filter(Ye=>Ye.id!==fe.id)),_(" Gasto borrado")}catch(Ue){console.error(Ue),_(" Error al borrar gasto")}},Oe=fe=>fe==="PAGADO"?"bg-green-100 text-green-700":"bg-yellow-100 text-yellow-700";return i.jsxs("div",{className:"max-w-6xl mx-auto px-3 sm:px-0",children:[i.jsxs("div",{className:"flex items-center justify-between mb-3",children:[i.jsx("h2",{className:"text-2xl font-bold",children:"Gastos (Pollo)"}),i.jsx(Fc,{onClick:e,loading:w})]}),i.jsxs("div",{className:"bg-white p-3 rounded-2xl shadow-2xl border mb-4 flex flex-col sm:flex-row sm:items-end gap-3 text-sm",children:[i.jsxs("div",{className:"flex gap-3",children:[i.jsxs("div",{className:"flex flex-col",children:[i.jsx("label",{className:"font-semibold",children:"Desde"}),i.jsx("input",{type:"date",className:"border rounded px-2 py-1",value:r,onChange:fe=>n(fe.target.value)})]}),i.jsxs("div",{className:"flex flex-col",children:[i.jsx("label",{className:"font-semibold",children:"Hasta"}),i.jsx("input",{type:"date",className:"border rounded px-2 py-1",value:a,onChange:fe=>s(fe.target.value)})]})]}),i.jsxs("div",{className:"sm:ml-auto text-sm bg-gray-50 border rounded-xl p-3",children:[i.jsx("div",{className:"font-semibold",children:"Totales del rango"}),i.jsxs("div",{children:["Total: ",fx(H.total)]}),i.jsxs("div",{children:["Pagado: ",fx(H.pagado)]}),i.jsxs("div",{children:["Pendiente: ",fx(H.pendiente)]})]})]}),i.jsxs("div",{className:"md:hidden mb-4",children:[i.jsxs("button",{type:"button",onClick:z,className:"w-full text-left px-3 py-3 flex items-center justify-between bg-white border rounded-2xl",children:[i.jsxs("div",{children:[i.jsx("div",{className:"font-semibold",children:"Crear gasto"}),i.jsxs("div",{className:"text-xs text-gray-600",children:["Fecha: ",o,"  Monto: ",A===0?"":fx(A)]})]}),i.jsx("div",{className:"text-gray-500",children:O?"":""})]}),O&&i.jsxs("form",{onSubmit:Ce,className:"mt-3 bg-white p-4 rounded-2xl shadow-2xl border grid grid-cols-1 gap-4",children:[i.jsxs("div",{children:[i.jsx("label",{className:"block text-sm font-semibold",children:"Fecha"}),i.jsx("input",{type:"date",className:"w-full border p-2 rounded",value:o,onChange:fe=>l(fe.target.value)})]}),i.jsxs("div",{children:[i.jsx("label",{className:"block text-sm font-semibold",children:"Categora"}),i.jsxs("select",{className:"w-full border p-2 rounded",value:c,onChange:fe=>u(fe.target.value),children:[i.jsx("option",{value:"",children:"Selecciona"}),LC.map(fe=>i.jsx("option",{value:fe,children:fe},fe))]})]}),i.jsxs("div",{children:[i.jsx("label",{className:"block text-sm font-semibold",children:"Descripcin"}),i.jsx("input",{className:"w-full border p-2 rounded",placeholder:"Detalle del gasto",value:d,onChange:fe=>f(fe.target.value)})]}),i.jsxs("div",{children:[i.jsx("label",{className:"block text-sm font-semibold",children:"Monto"}),i.jsx("input",{type:"number",step:"0.01",inputMode:"decimal",className:"w-full border p-2 rounded text-right",value:A===0?"":A,onChange:fe=>{const _e=String(fe.target.value||"").replace(",","."),Ue=parseFloat(_e);h(Number.isFinite(Ue)?Math.max(0,Ue):0)},placeholder:"0.00"})]}),i.jsxs("div",{children:[i.jsx("label",{className:"block text-sm font-semibold",children:"Estado"}),i.jsxs("select",{className:"w-full border p-2 rounded",value:m,onChange:fe=>p(fe.target.value),children:[i.jsx("option",{value:"PENDIENTE",children:"Pendiente"}),i.jsx("option",{value:"PAGADO",children:"Pagado"})]})]}),i.jsxs("div",{children:[i.jsx("label",{className:"block text-sm font-semibold",children:"Comentario"}),i.jsx("textarea",{className:"w-full border p-2 rounded resize-y min-h-24",value:x,onChange:fe=>v(fe.target.value),maxLength:500,placeholder:"Comentario / nota opcional"}),i.jsxs("div",{className:"text-xs text-gray-500 text-right",children:[x.length,"/500"]})]}),i.jsxs("div",{className:"flex gap-2",children:[i.jsx("button",{className:"bg-blue-600 text-white px-4 py-2 rounded hover:bg-blue-700",children:"Guardar gasto"}),i.jsx("button",{type:"button",className:"bg-gray-200 px-4 py-2 rounded hover:bg-gray-300",onClick:te,children:"Limpiar"})]})]})]}),i.jsx("div",{className:"hidden md:block",children:i.jsxs("form",{onSubmit:Ce,className:"bg-white p-4 rounded-2xl shadow-2xl border mb-6 grid grid-cols-1 md:grid-cols-2 gap-4",children:[i.jsxs("div",{children:[i.jsx("label",{className:"block text-sm font-semibold",children:"Fecha"}),i.jsx("input",{type:"date",className:"w-full border p-2 rounded",value:o,onChange:fe=>l(fe.target.value)})]}),i.jsxs("div",{children:[i.jsx("label",{className:"block text-sm font-semibold",children:"Categora"}),i.jsxs("select",{className:"w-full border p-2 rounded",value:c,onChange:fe=>u(fe.target.value),children:[i.jsx("option",{value:"",children:"Selecciona"}),LC.map(fe=>i.jsx("option",{value:fe,children:fe},fe))]})]}),i.jsxs("div",{className:"md:col-span-2",children:[i.jsx("label",{className:"block text-sm font-semibold",children:"Descripcin"}),i.jsx("input",{className:"w-full border p-2 rounded",placeholder:"Detalle del gasto",value:d,onChange:fe=>f(fe.target.value)})]}),i.jsxs("div",{children:[i.jsx("label",{className:"block text-sm font-semibold",children:"Monto"}),i.jsx("input",{type:"number",step:"0.01",inputMode:"decimal",className:"w-full border p-2 rounded text-right",value:A===0?"":A,onChange:fe=>{const _e=String(fe.target.value||"").replace(",","."),Ue=parseFloat(_e);h(Number.isFinite(Ue)?Math.max(0,Ue):0)},placeholder:"0.00"})]}),i.jsxs("div",{children:[i.jsx("label",{className:"block text-sm font-semibold",children:"Estado"}),i.jsxs("select",{className:"w-full border p-2 rounded",value:m,onChange:fe=>p(fe.target.value),children:[i.jsx("option",{value:"PENDIENTE",children:"Pendiente"}),i.jsx("option",{value:"PAGADO",children:"Pagado"})]})]}),i.jsxs("div",{className:"md:col-span-2",children:[i.jsx("label",{className:"block text-sm font-semibold",children:"Comentario"}),i.jsx("textarea",{className:"w-full border p-2 rounded resize-y min-h-24",value:x,onChange:fe=>v(fe.target.value),maxLength:500,placeholder:"Comentario / nota opcional"}),i.jsxs("div",{className:"text-xs text-gray-500 text-right",children:[x.length,"/500"]})]}),i.jsxs("div",{className:"md:col-span-2 flex gap-2",children:[i.jsx("button",{className:"bg-blue-600 text-white px-4 py-2 rounded hover:bg-blue-700",children:"Guardar gasto"}),i.jsx("button",{type:"button",className:"bg-gray-200 px-4 py-2 rounded hover:bg-gray-300",onClick:te,children:"Limpiar"})]})]})}),i.jsx("div",{className:"block md:hidden space-y-3",children:w?i.jsx("div",{className:"p-4 text-center bg-white rounded-xl border shadow",children:"Cargando"}):M.length===0?i.jsx("div",{className:"p-4 text-center bg-white rounded-xl border shadow",children:"Sin gastos en el rango seleccionado."}):M.map(fe=>{const _e=U===fe.id,Ue=S===fe.id;return i.jsxs("div",{className:"bg-white border rounded-2xl overflow-hidden",children:[i.jsxs("button",{type:"button",className:"w-full text-left px-3 py-3 flex items-start justify-between bg-white",onClick:()=>ee(fe.id),children:[i.jsxs("div",{className:"min-w-0",children:[i.jsx("div",{className:"font-semibold truncate",children:fe.description}),i.jsxs("div",{className:"text-xs text-gray-500",children:[fe.category||"","  ",fe.date]})]}),i.jsxs("div",{className:"text-right",children:[i.jsx("div",{className:"font-bold",children:fx(fe.amount)}),i.jsx("span",{className:`px-2 py-0.5 rounded text-xs ${Oe(fe.status)}`,children:fe.status})]})]}),_e&&i.jsxs("div",{className:"p-3",children:[i.jsx("div",{className:"mt-2 text-xs text-gray-600",children:fe.notes?fe.notes:""}),Ue?i.jsxs("div",{className:"mt-3 grid grid-cols-1 gap-2 text-sm",children:[i.jsx("input",{type:"date",className:"w-full border p-2 rounded",value:T,onChange:Ye=>k(Ye.target.value)}),i.jsxs("select",{className:"w-full border p-2 rounded",value:B,onChange:Ye=>D(Ye.target.value),children:[i.jsx("option",{value:"",children:"Selecciona"}),LC.map(Ye=>i.jsx("option",{value:Ye,children:Ye},Ye))]}),i.jsx("input",{className:"w-full border p-2 rounded",value:X,onChange:Ye=>me(Ye.target.value)}),i.jsx("input",{type:"number",step:"0.01",inputMode:"decimal",className:"w-full border p-2 rounded text-right",value:Number.isNaN(pe)?"":pe,onChange:Ye=>{const At=String(Ye.target.value||"").replace(",","."),yt=parseFloat(At);he(Number.isFinite(yt)?Math.max(0,yt):0)}}),i.jsxs("select",{className:"w-full border p-2 rounded",value:ve,onChange:Ye=>ae(Ye.target.value),children:[i.jsx("option",{value:"PENDIENTE",children:"Pendiente"}),i.jsx("option",{value:"PAGADO",children:"Pagado"})]}),i.jsx("textarea",{className:"w-full border p-2 rounded resize-y min-h-20",value:Pe,onChange:Ye=>ke(Ye.target.value),maxLength:500}),i.jsxs("div",{className:"flex gap-2",children:[i.jsx("button",{type:"button",className:"flex-1 px-3 py-2 rounded text-white bg-blue-600 hover:bg-blue-700",onClick:ie,children:"Guardar"}),i.jsx("button",{type:"button",className:"flex-1 px-3 py-2 rounded bg-gray-200 hover:bg-gray-300",onClick:We,children:"Cancelar"})]})]}):i.jsxs("div",{className:"mt-3 flex gap-2",children:[i.jsx("button",{type:"button",className:"flex-1 px-3 py-2 rounded text-white bg-yellow-600 hover:bg-yellow-700",onClick:()=>V(fe),children:"Editar"}),i.jsx("button",{type:"button",className:"flex-1 px-3 py-2 rounded text-white bg-red-600 hover:bg-red-700",onClick:()=>J(fe),children:"Borrar"})]})]})]},fe.id)})}),i.jsx("div",{className:"hidden md:block bg-white p-2 rounded-2xl shadow-2xl border w-full",children:i.jsxs("table",{className:"min-w-full w-full text-sm",children:[i.jsx("thead",{className:"bg-gray-100",children:i.jsxs("tr",{children:[i.jsx("th",{className:"p-2 border",children:"Fecha"}),i.jsx("th",{className:"p-2 border",children:"Categora"}),i.jsx("th",{className:"p-2 border",children:"Descripcin"}),i.jsx("th",{className:"p-2 border",children:"Monto"}),i.jsx("th",{className:"p-2 border",children:"Estado"}),i.jsx("th",{className:"p-2 border",children:"Comentario"}),i.jsx("th",{className:"p-2 border",children:"Acciones"})]})}),i.jsx("tbody",{children:w?i.jsx("tr",{children:i.jsx("td",{className:"p-4 text-center",colSpan:7,children:"Cargando"})}):M.length===0?i.jsx("tr",{children:i.jsx("td",{className:"p-4 text-center",colSpan:7,children:"Sin gastos en el rango seleccionado."})}):M.map(fe=>{const _e=S===fe.id;return i.jsxs("tr",{className:"text-center",children:[i.jsx("td",{className:"p-2 border",children:_e?i.jsx("input",{type:"date",className:"w-full border p-1 rounded",value:T,onChange:Ue=>k(Ue.target.value)}):fe.date}),i.jsx("td",{className:"p-2 border",children:_e?i.jsxs("select",{className:"w-full border p-1 rounded",value:B,onChange:Ue=>D(Ue.target.value),children:[i.jsx("option",{value:"",children:"Selecciona"}),LC.map(Ue=>i.jsx("option",{value:Ue,children:Ue},Ue))]}):fe.category||""}),i.jsx("td",{className:"p-2 border",children:_e?i.jsx("input",{className:"w-full border p-1 rounded",value:X,onChange:Ue=>me(Ue.target.value)}):i.jsx("span",{title:fe.description,children:fe.description.length>45?fe.description.slice(0,45)+"":fe.description})}),i.jsx("td",{className:"p-2 border",children:_e?i.jsx("input",{type:"number",step:"0.01",inputMode:"decimal",className:"w-full border p-1 rounded text-right",value:Number.isNaN(pe)?"":pe,onChange:Ue=>{const Ye=String(Ue.target.value||"").replace(",","."),At=parseFloat(Ye);he(Number.isFinite(At)?Math.max(0,At):0)}}):fx(fe.amount)}),i.jsx("td",{className:"p-2 border",children:_e?i.jsxs("select",{className:"w-full border p-1 rounded",value:ve,onChange:Ue=>ae(Ue.target.value),children:[i.jsx("option",{value:"PENDIENTE",children:"Pendiente"}),i.jsx("option",{value:"PAGADO",children:"Pagado"})]}):i.jsx("span",{className:`px-2 py-0.5 rounded text-xs ${Oe(fe.status)}`,children:fe.status})}),i.jsx("td",{className:"p-2 border",children:_e?i.jsx("textarea",{className:"w-full border p-1 rounded resize-y min-h-10",value:Pe,onChange:Ue=>ke(Ue.target.value),maxLength:500}):i.jsx("span",{title:fe.notes||"",children:(fe.notes||"").length>45?(fe.notes||"").slice(0,45)+"":fe.notes||""})}),i.jsx("td",{className:"p-2 border",children:i.jsx("div",{className:"flex gap-2 justify-center",children:_e?i.jsxs(i.Fragment,{children:[i.jsx("button",{type:"button",className:"px-2 py-1 rounded text-white bg-blue-600 hover:bg-blue-700",onClick:ie,children:"Guardar"}),i.jsx("button",{type:"button",className:"px-2 py-1 rounded bg-gray-200 hover:bg-gray-300",onClick:We,children:"Cancelar"})]}):i.jsxs(i.Fragment,{children:[i.jsx("button",{type:"button",className:"px-2 py-1 rounded text-white bg-yellow-600 hover:bg-yellow-700",onClick:()=>V(fe),children:"Editar"}),i.jsx("button",{type:"button",className:"px-2 py-1 rounded text-white bg-red-600 hover:bg-red-700",onClick:()=>J(fe),children:"Borrar"})]})})})]},fe.id)})})]})}),I&&i.jsx("p",{className:"mt-2 text-sm",children:I})]})}function MS(t){return(t||"").trim().toLowerCase()}async function sne(){const t=await kt(mt(Se,"products")),e=new Map;return t.forEach(r=>{const n=r.data(),a=MS(n.name??n.productName);a&&e.set(a,r.id)}),e}async function I4e(t=!1){const e=await sne(),r=await kt(mt(Se,"inventory_batches")),n={checked:0,fixed:0,alreadyOk:0,missingName:0,withoutMatch:0,details:[]};for(const a of r.docs){n.checked++;const s=a.data(),o=MS(s.productName);if(!o){n.missingName++,n.details.push({batchId:a.id,productName:s.productName??"",oldProductId:s.productId,status:"missingName"});continue}const l=e.get(o);if(!l){n.withoutMatch++,n.details.push({batchId:a.id,productName:s.productName??"",oldProductId:s.productId,status:"withoutMatch"});continue}if(s.productId===l){n.alreadyOk++,n.details.push({batchId:a.id,productName:s.productName??"",oldProductId:s.productId,newProductId:l,status:"alreadyOk"});continue}t||await kn(Gt(Se,"inventory_batches",a.id),{productId:l}),n.fixed++,n.details.push({batchId:a.id,productName:s.productName??"",oldProductId:s.productId,newProductId:l,status:"fixed"})}return console.group("[fixAllBatchProductIds] Resultado"),console.log("checked:",n.checked),console.log("fixed:",n.fixed),console.log("alreadyOk:",n.alreadyOk),console.log("missingName:",n.missingName),console.log("withoutMatch:",n.withoutMatch),console.groupEnd(),n}async function j4e(t,e=!1){const r=MS(t),a=(await sne()).get(r);if(!a)throw new Error(`No existe un producto activo con nombre "${t}".`);const s=await kt(mt(Se,"inventory_batches"));let o=0;for(const l of s.docs){const c=l.data();MS(c.productName)===r&&c.productId!==a&&(e||await kn(Gt(Se,"inventory_batches",l.id),{productId:a}),o++)}return console.log(`[fixBatchesByProductName] "${t}" fixed: ${o} lote(s)`),o}function P4e(){const[t,e]=g.useState(!1),[r,n]=g.useState(""),a=async()=>{try{e(!0),n("");const c=await I4e(!1);n(` Hecho. Revisados: ${c.checked}, Corregidos: ${c.fixed}, Ok: ${c.alreadyOk}, Sin nombre: ${c.missingName}, Sin match: ${c.withoutMatch}. (Mira consola para detalles)`)}catch(c){n(" Error: "+((c==null?void 0:c.message)||c))}finally{e(!1)}},[s,o]=g.useState(""),l=async()=>{if(!s.trim()){n(" Escribe el nombre del producto.");return}try{e(!0),n("");const c=await j4e(s.trim(),!1);n(` Hecho. Corregidos ${c} lote(s) para "${s}".`)}catch(c){n(" Error: "+((c==null?void 0:c.message)||c))}finally{e(!1)}};return i.jsxs("div",{className:"max-w-xl mx-auto bg-white p-6 rounded shadow border space-y-4",children:[i.jsx("h1",{className:"text-xl font-bold",children:"Herramienta de Migracin de Lotes"}),i.jsxs("p",{className:"text-sm text-gray-600",children:["Corrige los ",i.jsx("code",{children:"inventory_batches.productId"})," basndose en el nombre del producto. salo una sola vez para limpiar datos viejos. Revisa la consola para un log detallado."]}),i.jsx("div",{className:"space-y-2",children:i.jsx("button",{onClick:a,disabled:t,className:"bg-blue-600 text-white px-4 py-2 rounded disabled:opacity-60",children:t?"Corriendo":"Corregir TODOS los lotes"})}),i.jsx("hr",{}),i.jsxs("div",{className:"space-y-2",children:[i.jsx("label",{className:"block text-sm font-medium",children:"Corregir por nombre:"}),i.jsx("input",{className:"border p-2 rounded w-full",placeholder:'Ej: "Pierna Entera"',value:s,onChange:c=>o(c.target.value)}),i.jsx("button",{onClick:l,disabled:t,className:"bg-indigo-600 text-white px-4 py-2 rounded disabled:opacity-60",children:t?"Corriendo":"Corregir lotes de ese producto"})]}),r&&i.jsx("p",{className:"text-sm",children:r})]})}const Nu=t=>`C$${Number(t||0).toFixed(2)}`,hx=t=>Number(t||0).toFixed(3),B4e=t=>(t||"").toLowerCase()==="lb"||/libra/.test((t||"").toLowerCase()),_5=()=>{const t=new Date;return Rr(new Date(t.getFullYear(),t.getMonth(),1),"yyyy-MM-dd")},UC=()=>Rr(new Date,"yyyy-MM-dd");function T4e({paidBatches:t=[],onClose:e,onCreated:r}){const n=Array.isArray(t)?t:[],[a,s]=g.useState(_5()),[o,l]=g.useState(UC()),[c,u]=g.useState(""),d=g.useMemo(()=>{const ge=new Map;return n.forEach(q=>ge.set(q.productId,{id:q.productId,name:q.productName})),Array.from(ge.values()).sort((q,se)=>q.name.localeCompare(se.name))},[n]),f=g.useMemo(()=>n.filter(ge=>!(a&&ge.date<a||o&&ge.date>o||c&&ge.productId!==c)),[n,a,o,c]),[A,h]=g.useState(UC()),[m,p]=g.useState(()=>`FAC-${Date.now().toString().slice(-6)}`),[x,v]=g.useState(""),[y,b]=g.useState([]);g.useEffect(()=>{b(ge=>{const q=ge.filter(se=>f.some(ye=>ye.id===se));return q.length===0&&f.length>0?f.map(se=>se.id):q})},[f]);const[w,j]=g.useState([]),[I,_]=g.useState([]),[S,E]=g.useState(!1),[T,k]=g.useState(_5()),[B,D]=g.useState(UC());g.useEffect(()=>{(async()=>{try{E(!0);const ge=Yt(mt(Se,"expenses"),In("date","desc")),q=await kt(ge),se=[];q.forEach(ye=>{const ue=ye.data();se.push({id:ye.id,date:ue.date,description:ue.description,amount:Number(ue.amount||0)})}),j(se)}catch(ge){console.error(ge)}finally{E(!1)}})()},[]);const X=g.useMemo(()=>w.filter(ge=>!(!ge.date||T&&ge.date<T||B&&ge.date>B)),[w,T,B]),[me,pe]=g.useState([]),[he,ve]=g.useState(!1),[ae,Pe]=g.useState(""),[ke,O]=g.useState("DEBITO"),[G,z]=g.useState(""),U=()=>{const ge=Number(G);!ae.trim()||!isFinite(ge)||ge<=0||(pe(q=>[...q,{id:`${Date.now()}_${q.length+1}`,description:ae.trim(),type:ke,amount:Number(ge.toFixed(2))}]),Pe(""),z(""))},[Y,ee]=g.useState(null),[M,H]=g.useState(""),[te,Ce]=g.useState("DEBITO"),[V,We]=g.useState(""),ie=ge=>{ee(ge.id),H(ge.description),Ce(ge.type),We(ge.amount.toFixed(2))},J=()=>{ee(null),H(""),Ce("DEBITO"),We("")},Oe=()=>{if(!Y)return;const ge=Number(V);!isFinite(ge)||ge<=0||(pe(q=>q.map(se=>se.id===Y?{...se,description:M.trim(),type:te,amount:Number(ge.toFixed(2))}:se)),J())},fe=ge=>{pe(q=>q.filter(se=>se.id!==ge)),Y===ge&&J()},_e=(ge,q)=>{b(se=>q?[...new Set([...se,ge])]:se.filter(ye=>ye!==ge))},Ue=ge=>{b(ge?f.map(q=>q.id):[])},Ye=(ge,q)=>{_(se=>q?[...new Set([...se,ge])]:se.filter(ye=>ye!==ge))},At=g.useMemo(()=>f.filter(ge=>y.includes(ge.id)),[f,y]),yt=g.useMemo(()=>me.filter(ge=>ge.type==="DEBITO").reduce((ge,q)=>ge+q.amount,0),[me]),bt=g.useMemo(()=>me.filter(ge=>ge.type==="CREDITO").reduce((ge,q)=>ge+q.amount,0),[me]),Nt=g.useMemo(()=>{let ge=0,q=0,se=0,ye=0;for(const ct of At){B4e(ct.unit)?ge+=Number(ct.quantity||0):q+=Number(ct.quantity||0);const ht=ct.expectedTotal??Number((Number(ct.quantity||0)*Number(ct.salePrice||0)).toFixed(2)),xe=ct.invoiceTotal!==void 0&&ct.invoiceTotal!==null?Number(ct.invoiceTotal):Number((Number(ct.quantity||0)*Number(ct.purchasePrice||0)).toFixed(2));se+=Number(ht||0),ye+=Number(xe||0)}const ue=X.filter(ct=>I.includes(ct.id)).reduce((ct,ht)=>ct+Number(ht.amount||0),0),Le=se-ue-yt+bt;return{totalLbs:ge,totalUnits:q,totalExpected:Number(se.toFixed(2)),totalInvoiced:Number(ye.toFixed(2)),totalGastos:Number(ue.toFixed(2)),debits:Number(yt.toFixed(2)),credits:Number(bt.toFixed(2)),finalAmount:Number(Le.toFixed(2)),grossProfit:Number((se-ye).toFixed(2))}},[At,X,I,yt,bt]),[jt,St]=g.useState(!1),[Ve,Te]=g.useState(""),qe=async()=>{if(Te(""),At.length===0){Te("Selecciona al menos 1 lote pagado.");return}try{St(!0);const ge={number:m.trim(),date:A,description:x.trim(),status:"PENDIENTE",createdAt:Ar.now(),totalLbs:Number(hx(Nt.totalLbs)),totalUnits:Number(hx(Nt.totalUnits)),totalAmount:Nt.totalExpected,invoiceTotal:Nt.totalInvoiced,totalExpenses:Nt.totalGastos,totalDebits:Nt.debits,totalCredits:Nt.credits,finalAmount:Nt.finalAmount,batches:At.map(q=>{var se;return{id:q.id,productId:q.productId,productName:q.productName,unit:q.unit,quantity:Number(hx(q.quantity)),salePrice:Number(Number(q.salePrice||0).toFixed(2)),purchasePrice:Number(Number(q.purchasePrice||0).toFixed(2)),expectedTotal:Number((Number(q.quantity||0)*Number(q.salePrice||0)).toFixed(2)),invoiceTotal:q.invoiceTotal!==void 0&&q.invoiceTotal!==null?Number(q.invoiceTotal):Number((Number(q.quantity||0)*Number(q.purchasePrice||0)).toFixed(2)),batchDate:q.date,paidAt:(se=q.paidAt)!=null&&se.toDate?Rr(q.paidAt.toDate(),"yyyy-MM-dd"):null}}),expenses:X.filter(q=>I.includes(q.id)).map(q=>({id:q.id,date:q.date||null,description:q.description||"",amount:Number(Number(q.amount||0).toFixed(2))})),adjustments:me.map(q=>({id:q.id,description:q.description,type:q.type,amount:Number(q.amount.toFixed(2))}))};await Jn(mt(Se,"invoices"),ge),Te(" Factura creada."),r()}catch(ge){console.error(ge),Te(` Error al crear factura: ${(ge==null?void 0:ge.message)||"desconocido"}`)}finally{St(!1)}};return i.jsxs("div",{className:"fixed inset-0 z-[9999] bg-black/40 flex items-center justify-center p-3",children:[i.jsxs("div",{className:"bg-white w-full max-w-6xl rounded-xl shadow-xl p-4 md:p-6 max-h-[90vh] overflow-auto relative",children:[i.jsxs("div",{className:"flex items-center gap-3 mb-4",children:[i.jsx("h3",{className:"text-lg font-semibold",children:"Crear factura"}),i.jsx("button",{type:"button",onClick:e,className:"ml-auto px-2 py-1 border rounded hover:bg-gray-50",children:"Cerrar"})]}),i.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-3 mb-4",children:[i.jsxs("div",{children:[i.jsx("label",{className:"block text-sm font-medium",children:"Fecha"}),i.jsx("input",{type:"date",className:"w-full border rounded px-2 py-1",value:A,onChange:ge=>h(ge.target.value)})]}),i.jsxs("div",{children:[i.jsx("label",{className:"block text-sm font-medium",children:"Nmero"}),i.jsx("input",{type:"text",className:"w-full border rounded px-2 py-1",value:m,onChange:ge=>p(ge.target.value),placeholder:"FAC-001"})]}),i.jsxs("div",{className:"md:col-span-1",children:[i.jsx("label",{className:"block text-sm font-medium",children:"Descripcin"}),i.jsx("input",{type:"text",className:"w-full border rounded px-2 py-1",value:x,onChange:ge=>v(ge.target.value),placeholder:"Comentarios de la factura"})]})]}),i.jsx("div",{className:"bg-gray-50 border rounded p-3 mb-3",children:i.jsxs("div",{className:"flex flex-wrap items-end gap-3",children:[i.jsxs("div",{children:[i.jsx("label",{className:"block text-sm font-medium",children:"Desde (lote)"}),i.jsx("input",{type:"date",className:"border rounded px-2 py-1",value:a,onChange:ge=>s(ge.target.value)})]}),i.jsxs("div",{children:[i.jsx("label",{className:"block text-sm font-medium",children:"Hasta (lote)"}),i.jsx("input",{type:"date",className:"border rounded px-2 py-1",value:o,onChange:ge=>l(ge.target.value)})]}),i.jsxs("div",{className:"min-w-[220px]",children:[i.jsx("label",{className:"block text-sm font-medium",children:"Producto"}),i.jsxs("select",{className:"border rounded px-2 py-1 w-full",value:c,onChange:ge=>u(ge.target.value),children:[i.jsx("option",{value:"",children:"Todos"}),d.map(ge=>i.jsx("option",{value:ge.id,children:ge.name},ge.id))]})]}),i.jsx("button",{type:"button",className:"ml-auto px-3 py-1 rounded bg-gray-200 hover:bg-gray-300",onClick:()=>{s(_5()),l(UC()),u("")},children:"Quitar filtro"})]})}),i.jsxs("div",{className:"mb-4",children:[i.jsxs("div",{className:"flex items-center gap-3 mb-2",children:[i.jsx("h4",{className:"font-semibold",children:"Lotes pagados"}),i.jsxs("label",{className:"text-sm flex items-center gap-2",children:[i.jsx("input",{type:"checkbox",checked:f.length>0&&y.length===f.length,onChange:ge=>Ue(ge.target.checked)}),"Seleccionar todos (sobre el filtro)"]})]}),f.length===0?i.jsx("p",{className:"text-sm text-gray-500",children:"No hay lotes pagados disponibles en el filtro actual."}):i.jsx("div",{className:"border rounded max-h-80 overflow-auto",children:i.jsxs("table",{className:"min-w-full text-sm",children:[i.jsx("thead",{className:"bg-gray-100",children:i.jsxs("tr",{children:[i.jsx("th",{className:"p-2 border",children:"Sel"}),i.jsx("th",{className:"p-2 border",children:"Fecha lote"}),i.jsx("th",{className:"p-2 border",children:"Producto"}),i.jsx("th",{className:"p-2 border",children:"Unidad"}),i.jsx("th",{className:"p-2 border",children:"Cantidad"}),i.jsx("th",{className:"p-2 border",children:"Precio venta"}),i.jsx("th",{className:"p-2 border",children:"Total facturado"}),i.jsx("th",{className:"p-2 border",children:"Total esperado"}),i.jsx("th",{className:"p-2 border",children:"Ganancia bruta"}),i.jsx("th",{className:"p-2 border",children:"Fecha pago"})]})}),i.jsx("tbody",{children:f.map(ge=>{var Le;const q=y.includes(ge.id),se=ge.expectedTotal??Number((Number(ge.quantity||0)*Number(ge.salePrice||0)).toFixed(2)),ye=ge.invoiceTotal!==void 0&&ge.invoiceTotal!==null?Number(ge.invoiceTotal):Number((Number(ge.quantity||0)*Number(ge.purchasePrice||0)).toFixed(2)),ue=se-ye;return i.jsxs("tr",{className:"text-center",children:[i.jsx("td",{className:"p-2 border",children:i.jsx("input",{type:"checkbox",checked:q,onChange:ct=>_e(ge.id,ct.target.checked)})}),i.jsx("td",{className:"p-2 border",children:ge.date}),i.jsx("td",{className:"p-2 border",children:ge.productName}),i.jsx("td",{className:"p-2 border",children:(ge.unit||"").toUpperCase()}),i.jsx("td",{className:"p-2 border",children:hx(ge.quantity)}),i.jsx("td",{className:"p-2 border",children:Nu(ge.salePrice)}),i.jsx("td",{className:"p-2 border",children:Nu(ye)}),i.jsx("td",{className:"p-2 border",children:Nu(se)}),i.jsx("td",{className:"p-2 border",children:Nu(ue)}),i.jsx("td",{className:"p-2 border",children:(Le=ge.paidAt)!=null&&Le.toDate?Rr(ge.paidAt.toDate(),"yyyy-MM-dd"):""})]},ge.id)})})]})})]}),i.jsxs("div",{className:"mb-4",children:[i.jsxs("div",{className:"flex items-center gap-3 mb-2",children:[i.jsx("h4",{className:"font-semibold",children:"Gastos a incluir (opcional)"}),S&&i.jsx("span",{className:"text-xs text-gray-500",children:"Cargando"}),i.jsxs("div",{className:"ml-auto flex items-end gap-3",children:[i.jsxs("div",{children:[i.jsx("label",{className:"block text-xs text-gray-600",children:"Desde (gasto)"}),i.jsx("input",{type:"date",className:"border rounded px-2 py-1",value:T,onChange:ge=>k(ge.target.value)})]}),i.jsxs("div",{children:[i.jsx("label",{className:"block text-xs text-gray-600",children:"Hasta (gasto)"}),i.jsx("input",{type:"date",className:"border rounded px-2 py-1",value:B,onChange:ge=>D(ge.target.value)})]})]})]}),X.length===0?i.jsx("p",{className:"text-sm text-gray-500",children:"No hay gastos en el rango seleccionado."}):i.jsx("div",{className:"border rounded max-h-48 overflow-auto",children:i.jsxs("table",{className:"min-w-full text-sm",children:[i.jsx("thead",{className:"bg-gray-100",children:i.jsxs("tr",{children:[i.jsx("th",{className:"p-2 border",children:"Sel"}),i.jsx("th",{className:"p-2 border",children:"Fecha"}),i.jsx("th",{className:"p-2 border",children:"Descripcin"}),i.jsx("th",{className:"p-2 border",children:"Monto"})]})}),i.jsx("tbody",{children:X.map(ge=>{const q=I.includes(ge.id);return i.jsxs("tr",{className:"text-center",children:[i.jsx("td",{className:"p-2 border",children:i.jsx("input",{type:"checkbox",checked:q,onChange:se=>Ye(ge.id,se.target.checked)})}),i.jsx("td",{className:"p-2 border",children:ge.date||""}),i.jsx("td",{className:"p-2 border",children:ge.description||""}),i.jsx("td",{className:"p-2 border",children:Nu(Number(ge.amount||0))})]},ge.id)})})]})})]}),i.jsxs("div",{className:"mb-4",children:[i.jsxs("div",{className:"flex items-center gap-3 mb-2",children:[i.jsx("h4",{className:"font-semibold",children:"Notas Crdito/Dbito (Cargos extras)"}),i.jsx("button",{type:"button",className:"ml-auto px-3 py-1 rounded bg-blue-600 text-white hover:bg-blue-700",onClick:()=>ve(!0),children:"Crear Cargo"})]}),me.length===0?i.jsx("p",{className:"text-sm text-gray-500",children:"Sin cargos agregados."}):i.jsx("div",{className:"border rounded max-h-40 overflow-auto",children:i.jsxs("table",{className:"min-w-full text-sm",children:[i.jsx("thead",{className:"bg-gray-100",children:i.jsxs("tr",{children:[i.jsx("th",{className:"p-2 border",children:"Descripcin"}),i.jsx("th",{className:"p-2 border",children:"Tipo"}),i.jsx("th",{className:"p-2 border",children:"Monto"}),i.jsx("th",{className:"p-2 border",children:"Acciones"})]})}),i.jsx("tbody",{children:me.map(ge=>{const q=Y===ge.id;return i.jsxs("tr",{className:"text-center",children:[i.jsx("td",{className:"p-2 border",children:q?i.jsx("textarea",{className:"w-full border rounded px-2 py-1 min-h-[70px]",value:M,onChange:se=>H(se.target.value)}):i.jsx("span",{title:ge.description,children:ge.description.length>60?`${ge.description.slice(0,60)}`:ge.description})}),i.jsx("td",{className:"p-2 border",children:q?i.jsxs("select",{className:"w-full border rounded px-2 py-1",value:te,onChange:se=>Ce(se.target.value),children:[i.jsx("option",{value:"DEBITO",children:"Dbito"}),i.jsx("option",{value:"CREDITO",children:"Crdito"})]}):i.jsx("span",{className:`px-2 py-0.5 rounded text-xs ${ge.type==="DEBITO"?"bg-red-100 text-red-700":"bg-green-100 text-green-700"}`,children:ge.type})}),i.jsx("td",{className:"p-2 border",children:q?i.jsx("input",{type:"number",step:"0.01",className:"w-full border rounded px-2 py-1 text-right",value:V,onChange:se=>We(se.target.value)}):Nu(ge.amount)}),i.jsx("td",{className:"p-2 border",children:q?i.jsxs("div",{className:"flex gap-2 justify-center",children:[i.jsx("button",{type:"button",className:"px-2 py-1 rounded bg-green-600 text-white hover:bg-green-700 text-xs",onClick:Oe,children:"Guardar"}),i.jsx("button",{type:"button",className:"px-2 py-1 rounded bg-gray-200 hover:bg-gray-300 text-xs",onClick:J,children:"Cancelar"}),i.jsx("button",{type:"button",className:"px-2 py-1 rounded bg-red-600 text-white hover:bg-red-700 text-xs",onClick:()=>fe(ge.id),children:"Eliminar"})]}):i.jsxs("div",{className:"flex gap-2 justify-center",children:[i.jsx("button",{type:"button",className:"px-2 py-1 rounded bg-indigo-600 text-white hover:bg-indigo-700 text-xs",onClick:()=>ie(ge),children:"Editar"}),i.jsx("button",{type:"button",className:"px-2 py-1 rounded bg-red-600 text-white hover:bg-red-700 text-xs",onClick:()=>fe(ge.id),children:"Eliminar"})]})})]},ge.id)})})]})})]}),i.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 text-sm mb-4 justify-between",children:[i.jsxs("div",{className:"space-y-1",children:[i.jsxs("div",{children:["Total libras: ",i.jsx("strong",{children:hx(Nt.totalLbs)})]}),i.jsxs("div",{children:["Total unidades: ",i.jsx("strong",{children:hx(Nt.totalUnits)})]})]}),i.jsxs("div",{className:"space-y-1 text-center",children:[i.jsxs("div",{children:["Total facturado (costo):"," ",i.jsx("strong",{children:Nu(Nt.totalInvoiced)})]}),i.jsxs("div",{children:["Total esperado (ventas):"," ",i.jsx("strong",{children:Nu(Nt.totalExpected)})]}),i.jsxs("div",{children:["Ganancia bruta (esperado  facturado):"," ",i.jsx("strong",{children:Nu(Nt.grossProfit)})]})]}),i.jsxs("div",{className:"space-y-1 text-right",children:[i.jsxs("div",{children:["Gastos: ",i.jsx("strong",{children:Nu(Nt.totalGastos)})]}),i.jsxs("div",{children:["Dbitos: ",i.jsx("strong",{children:Nu(Nt.debits)})]}),i.jsxs("div",{children:["Crditos: ",i.jsx("strong",{children:Nu(Nt.credits)})]})]}),i.jsx("div",{className:"md:col-span-3 mt-3",children:i.jsxs("div",{className:"p-3 bg-blue-50 border border-blue-200 rounded text-center font-semibold text-lg",children:["Monto final (esperado  gastos  dbitos + crditos):"," ",i.jsx("span",{className:"text-blue-700",children:Nu(Nt.finalAmount)})]})})]}),i.jsxs("div",{className:"flex items-center gap-2",children:[i.jsx("button",{type:"button",disabled:jt,onClick:qe,className:"bg-blue-600 text-white px-4 py-2 rounded hover:bg-blue-700 disabled:opacity-60",children:jt?"Creando":"Crear factura"}),i.jsx("button",{type:"button",onClick:e,className:"px-4 py-2 border rounded",children:"Cancelar"}),Ve&&i.jsx("span",{className:"text-sm ml-2",children:Ve})]}),jt&&i.jsxs("div",{className:"absolute inset-0 z-[11000] bg-white/80 backdrop-blur-sm flex flex-col items-center justify-center gap-3",children:[i.jsxs("svg",{className:"animate-spin h-8 w-8 text-blue-600",viewBox:"0 0 24 24",children:[i.jsx("circle",{className:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor",strokeWidth:"4",fill:"none"}),i.jsx("path",{className:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8v4a4 4 0 00-4 4H4z"})]}),i.jsx("div",{className:"text-sm font-medium text-blue-700",children:"Creando factura"})]})]}),he&&i.jsx("div",{className:"fixed inset-0 z-[10000] bg-black/50 flex items-center justify-center p-3",children:i.jsxs("div",{className:"bg-white w-full max-w-lg rounded-xl shadow-xl p-4",children:[i.jsxs("div",{className:"flex items-center mb-3",children:[i.jsx("h4",{className:"font-semibold",children:"Nuevo cargo"}),i.jsx("button",{type:"button",className:"ml-auto px-2 py-1 border rounded hover:bg-gray-50",onClick:()=>ve(!1),children:"Cerrar"})]}),i.jsxs("div",{className:"space-y-3",children:[i.jsxs("div",{children:[i.jsx("label",{className:"block text-sm font-medium mb-1",children:"Descripcin"}),i.jsx("textarea",{className:"w-full border rounded px-2 py-1 min-h-[90px]",value:ae,onChange:ge=>Pe(ge.target.value),placeholder:"Detalle del cargo"})]}),i.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-3",children:[i.jsxs("div",{children:[i.jsx("label",{className:"block text-sm font-medium",children:"Tipo de cargo"}),i.jsxs("select",{className:"w-full border rounded px-2 py-1",value:ke,onChange:ge=>O(ge.target.value),children:[i.jsx("option",{value:"DEBITO",children:"Dbito"}),i.jsx("option",{value:"CREDITO",children:"Crdito"})]})]}),i.jsxs("div",{children:[i.jsx("label",{className:"block text-sm font-medium",children:"Monto"}),i.jsx("input",{type:"number",step:"0.01",className:"w-full border rounded px-2 py-1",value:G,onChange:ge=>z(ge.target.value),placeholder:"0.00"})]})]}),i.jsx("div",{className:"flex justify-end",children:i.jsx("button",{type:"button",className:"px-3 py-1 rounded bg-blue-600 text-white hover:bg-blue-700",onClick:U,children:"Agregar"})})]})]})})]})}const nd=t=>`C$ ${Number(t||0).toFixed(2)}`,Vc=t=>Number(t||0).toFixed(3),k4e=t=>(t||"").toLowerCase()==="lb"||/libra/.test((t||"").toLowerCase());function F4e(){const[t,e]=g.useState([]),[r,n]=g.useState(!0),[a,s]=g.useState(!1),[o,l]=g.useState(null),[c,u]=g.useState(Rr(new Date(new Date().getFullYear(),new Date().getMonth(),1),"yyyy-MM-dd")),[d,f]=g.useState(Rr(new Date,"yyyy-MM-dd")),[A,h]=g.useState(""),[m,p]=g.useState(!1),{refreshKey:x,refresh:v}=Oc(),[y,b]=g.useState(!1),w=()=>b(D=>!D),[j,I]=g.useState(null),_=D=>I(X=>X===D?null:D);g.useEffect(()=>{(async()=>{n(!0);const D=Yt(mt(Se,"inventory_batches"),cr("status","==","PAGADO"),In("date","desc")),X=await kt(D),me=[];X.forEach(pe=>{const he=pe.data(),ve=Number(he.quantity||0),ae=Number(he.remaining||0),Pe=Number(he.purchasePrice||0),ke=Number(he.salePrice||0),O=Number((ve*Pe).toFixed(2)),G=Number((ve*ke).toFixed(2));me.push({id:pe.id,productId:he.productId,productName:he.productName,category:he.category,unit:he.unit,quantity:ve,remaining:ae,purchasePrice:Pe,salePrice:ke,invoiceTotal:he.invoiceTotal!=null?Number(he.invoiceTotal):O,expectedTotal:he.expectedTotal!=null?Number(he.expectedTotal):G,date:he.date,status:he.status,paidAt:he.paidAt})}),e(me),n(!1)})()},[x]);const S=g.useMemo(()=>t.filter(D=>!(c&&D.date<c||d&&D.date>d||A&&D.productId!==A)),[t,c,d,A]),E=g.useMemo(()=>{let D=0,X=0,me=0,pe=0,he=0,ve=0;for(const ae of S)k4e(ae.unit)?(D+=ae.quantity,X+=ae.remaining):(me+=ae.quantity,pe+=ae.remaining),he+=Number(ae.expectedTotal||0),ve+=Number(ae.invoiceTotal||0);return{lbsIng:D,lbsRem:X,udsIng:me,udsRem:pe,totalEsperado:he,totalFact:ve,gross:he-ve}},[S]),T=D=>{l(D),s(!0)},k=async()=>{if(o)try{const D=Gt(Se,"inventory_batches",o.id);await kn(D,{status:"PENDIENTE",remaining:o.quantity});const X=mt(Se,"salesV2"),me=await kt(Yt(X,cr("batchId","==",o.id))),pe=await kt(Yt(X,cr("productName","==",o.productName),cr("date","==",o.date))),he=[...me.docs,...pe.docs];for(const ve of he)await Kn(Gt(Se,"salesV2",ve.id));s(!1),l(null),v()}catch(D){console.error("Error al marcar pendiente:",D)}},B=g.useMemo(()=>{const D=new Map;return t.forEach(X=>D.set(X.productId,{id:X.productId,name:X.productName})),Array.from(D.values()).sort((X,me)=>X.name.localeCompare(me.name))},[t]);return i.jsxs("div",{className:"max-w-7xl mx-auto px-3 sm:px-0",children:[i.jsxs("div",{className:"flex items-center justify-between mb-3",children:[i.jsx("h2",{className:"text-2xl font-bold",children:"Pagados"}),i.jsx(Fc,{onClick:v,loading:r})]}),i.jsxs("div",{className:"bg-white p-3 rounded-2xl shadow-2xl border mb-4 flex flex-col sm:flex-row sm:items-end gap-3 text-sm",children:[i.jsxs("div",{className:"flex flex-wrap gap-3",children:[i.jsxs("div",{className:"flex flex-col",children:[i.jsx("label",{className:"font-semibold",children:"Desde"}),i.jsx("input",{type:"date",className:"border rounded px-2 py-1",value:c,onChange:D=>u(D.target.value)})]}),i.jsxs("div",{className:"flex flex-col",children:[i.jsx("label",{className:"font-semibold",children:"Hasta"}),i.jsx("input",{type:"date",className:"border rounded px-2 py-1",value:d,onChange:D=>f(D.target.value)})]}),i.jsxs("div",{className:"flex flex-col min-w-[240px]",children:[i.jsx("label",{className:"font-semibold",children:"Producto"}),i.jsxs("select",{className:"border rounded px-2 py-1",value:A,onChange:D=>h(D.target.value),children:[i.jsx("option",{value:"",children:"Todos"}),B.map(D=>i.jsx("option",{value:D.id,children:D.name},D.id))]})]}),i.jsx("button",{type:"button",className:"px-3 py-1 rounded-2xl bg-gray-200 hover:bg-gray-300",onClick:()=>{u(""),f(""),h("")},children:"Quitar filtro"})]}),i.jsx("button",{type:"button",className:"sm:ml-auto px-3 py-2 rounded-2xl bg-blue-600 text-white hover:bg-blue-700",onClick:()=>p(!0),children:"Crear factura"})]}),i.jsxs("div",{className:"mb-3",children:[i.jsxs("div",{className:"md:hidden",children:[i.jsxs("button",{type:"button",onClick:w,className:"w-full text-left px-3 py-3 flex items-center justify-between border rounded-2xl bg-white",children:[i.jsxs("div",{children:[i.jsx("div",{className:"font-semibold",children:"Totales"}),i.jsxs("div",{className:"text-xs text-gray-600",children:["Libras: ",i.jsx("b",{children:Vc(E.lbsIng)}),"  Restantes:"," ",i.jsx("b",{children:Vc(E.lbsRem)})]})]}),i.jsx("div",{className:"text-gray-500",children:y?"":""})]}),y&&i.jsx("div",{className:"mt-3 bg-gray-50 p-3 rounded-2xl shadow-2xl border text-base",children:i.jsxs("div",{className:"grid grid-cols-2 gap-y-2 gap-x-8",children:[i.jsxs("div",{children:[i.jsx("span",{className:"font-semibold",children:"Libras ingresadas:"})," ",Vc(E.lbsIng)]}),i.jsxs("div",{children:[i.jsx("span",{className:"font-semibold",children:"Unidades ingresadas:"})," ",Vc(E.udsIng)]}),i.jsxs("div",{children:[i.jsx("span",{className:"font-semibold",children:"Total esperado en ventas:"})," ",nd(E.totalEsperado)]}),i.jsxs("div",{children:[i.jsx("span",{className:"font-semibold",children:"Libras restantes:"})," ",Vc(E.lbsRem)]}),i.jsxs("div",{children:[i.jsx("span",{className:"font-semibold",children:"Unidades restantes:"})," ",Vc(E.udsRem)]}),i.jsxs("div",{children:[i.jsx("span",{className:"font-semibold",children:"Total facturado:"})," ",nd(E.totalFact)]}),i.jsxs("div",{className:"col-span-2",children:[i.jsx("span",{className:"font-semibold",children:"Ganancia sin gastos:"})," ",nd(E.gross)]}),i.jsxs("div",{children:[i.jsx("span",{className:"font-semibold",children:"Cantidad de Lotes:"})," ",S.length.toLocaleString()]})]})})]}),i.jsx("div",{className:"hidden md:block bg-gray-50 p-3 rounded-2xl shadow-2xl border mb-3 text-base",children:i.jsxs("div",{className:"grid grid-cols-2 gap-y-2 gap-x-8",children:[i.jsxs("div",{children:[i.jsx("span",{className:"font-semibold",children:"Libras ingresadas:"})," ",Vc(E.lbsIng)]}),i.jsxs("div",{children:[i.jsx("span",{className:"font-semibold",children:"Unidades ingresadas:"})," ",Vc(E.udsIng)]}),i.jsxs("div",{children:[i.jsx("span",{className:"font-semibold",children:"Total esperado en ventas:"})," ",nd(E.totalEsperado)]}),i.jsxs("div",{children:[i.jsx("span",{className:"font-semibold",children:"Libras restantes:"})," ",Vc(E.lbsRem)]}),i.jsxs("div",{children:[i.jsx("span",{className:"font-semibold",children:"Unidades restantes:"})," ",Vc(E.udsRem)]}),i.jsxs("div",{children:[i.jsx("span",{className:"font-semibold",children:"Total facturado:"})," ",nd(E.totalFact)]}),i.jsxs("div",{className:"col-span-2",children:[i.jsx("span",{className:"font-semibold",children:"Ganancia sin gastos:"})," ",nd(E.gross)]}),i.jsxs("div",{children:[i.jsx("span",{className:"font-semibold",children:"Cantidad de Lotes:"})," ",S.length.toLocaleString()]})]})})]}),i.jsx("div",{className:"block md:hidden space-y-3",children:r?i.jsx("div",{className:"p-4 text-center bg-white rounded-xl border shadow",children:"Cargando"}):S.length===0?i.jsx("div",{className:"p-4 text-center bg-white rounded-xl border shadow",children:"Sin lotes pagados"}):S.map(D=>{var me;const X=j===D.id;return i.jsxs("div",{className:"bg-white border rounded-2xl overflow-hidden",children:[i.jsxs("button",{type:"button",onClick:()=>_(D.id),className:"w-full text-left px-3 py-3 flex items-center justify-between bg-white",children:[i.jsxs("div",{className:"min-w-0",children:[i.jsx("div",{className:"font-semibold truncate",children:D.productName}),i.jsxs("div",{className:"text-xs text-gray-500 truncate",children:[(D.category||"").toUpperCase(),"  ",D.date," "," ",(D.unit||"").toUpperCase()]})]}),i.jsxs("div",{className:"text-right",children:[i.jsx("div",{className:"text-sm font-bold",children:nd(D.expectedTotal||0)}),i.jsx("div",{className:"text-[11px] text-gray-500",children:X?"Detalles":"Esperado"})]})]}),X&&i.jsxs("div",{className:"p-3",children:[i.jsxs("div",{className:"mt-2 grid grid-cols-2 gap-2 text-sm",children:[i.jsxs("div",{className:"bg-gray-50 border rounded-xl p-2",children:[i.jsx("div",{className:"text-xs text-gray-500",children:"Ingresado"}),i.jsx("div",{className:"font-semibold",children:Vc(D.quantity)})]}),i.jsxs("div",{className:"bg-gray-50 border rounded-xl p-2",children:[i.jsx("div",{className:"text-xs text-gray-500",children:"Restantes"}),i.jsx("div",{className:"font-semibold",children:Vc(D.remaining)})]}),i.jsxs("div",{className:"bg-gray-50 border rounded-xl p-2",children:[i.jsx("div",{className:"text-xs text-gray-500",children:"Costo"}),i.jsx("div",{className:"font-semibold",children:nd(D.invoiceTotal||0)})]}),i.jsxs("div",{className:"bg-gray-50 border rounded-xl p-2",children:[i.jsx("div",{className:"text-xs text-gray-500",children:"Fecha pago"}),i.jsx("div",{className:"font-semibold",children:(me=D.paidAt)!=null&&me.toDate?Rr(D.paidAt.toDate(),"yyyy-MM-dd"):""})]})]}),i.jsx("div",{className:"mt-3",children:i.jsx("button",{type:"button",className:"w-full px-3 py-2 rounded-xl text-white bg-yellow-600 hover:bg-yellow-700",onClick:()=>T(D),children:"Marcar PENDIENTE"})})]})]},D.id)})}),i.jsx("div",{className:"hidden md:block bg-white p-2 rounded shadow-2xl border w-full",children:i.jsxs("table",{className:"min-w-full w-full text-sm",children:[i.jsx("thead",{className:"bg-gray-100",children:i.jsxs("tr",{children:[i.jsx("th",{className:"p-2 border",children:"Fecha"}),i.jsx("th",{className:"p-2 border",children:"Tipo"}),i.jsx("th",{className:"p-2 border",children:"Producto"}),i.jsx("th",{className:"p-2 border",children:"Unidad"}),i.jsx("th",{className:"p-2 border",children:"Ingresado"}),i.jsx("th",{className:"p-2 border",children:"Restantes"}),i.jsx("th",{className:"p-2 border",children:"Precio Compra"}),i.jsx("th",{className:"p-2 border",children:"Precio Venta"}),i.jsx("th",{className:"p-2 border",children:"Total factura"}),i.jsx("th",{className:"p-2 border",children:"Total esperado"}),i.jsx("th",{className:"p-2 border",children:"Fecha pago"}),i.jsx("th",{className:"p-2 border",children:"Acciones"})]})}),i.jsx("tbody",{children:r?i.jsx("tr",{children:i.jsx("td",{colSpan:12,className:"p-4 text-center",children:"Cargando"})}):S.length===0?i.jsx("tr",{children:i.jsx("td",{colSpan:12,className:"p-4 text-center",children:"Sin lotes pagados"})}):S.map(D=>{var X;return i.jsxs("tr",{className:"text-center",children:[i.jsx("td",{className:"p-2 border",children:D.date}),i.jsx("td",{className:"p-2 border",children:(D.category||"").toUpperCase()}),i.jsx("td",{className:"p-2 border",children:D.productName}),i.jsx("td",{className:"p-2 border",children:(D.unit||"").toUpperCase()}),i.jsx("td",{className:"p-2 border",children:Vc(D.quantity)}),i.jsx("td",{className:"p-2 border",children:Vc(D.remaining)}),i.jsx("td",{className:"p-2 border",children:nd(D.purchasePrice)}),i.jsx("td",{className:"p-2 border",children:nd(D.salePrice)}),i.jsx("td",{className:"p-2 border",children:nd(D.invoiceTotal||0)}),i.jsx("td",{className:"p-2 border",children:nd(D.expectedTotal||0)}),i.jsx("td",{className:"p-2 border",children:(X=D.paidAt)!=null&&X.toDate?Rr(D.paidAt.toDate(),"yyyy-MM-dd"):""}),i.jsx("td",{className:"p-2 border",children:i.jsx("button",{type:"button",className:"px-2 py-1 rounded text-white bg-yellow-600 hover:bg-yellow-700",onClick:()=>T(D),children:"Marcar PENDIENTE"})})]},D.id)})})]})}),m&&i.jsx(T4e,{paidBatches:t,onClose:()=>p(!1),onCreated:()=>p(!1)}),a&&o&&i.jsx("div",{className:"fixed inset-0 flex items-center justify-center bg-black/50 z-50 p-3",children:i.jsxs("div",{className:"bg-white rounded-2xl shadow-2xl p-6 w-full max-w-md",children:[i.jsx("h3",{className:"text-lg font-semibold mb-3",children:"Confirmar accin"}),i.jsxs("p",{className:"text-gray-700 mb-4",children:["Seguro que quieres marcar pendiente este inventario?",i.jsx("br",{}),"Al hacerlo, las libras se restaurarn y se eliminarn las ventas generadas."]}),i.jsxs("div",{className:"flex justify-end gap-3",children:[i.jsx("button",{type:"button",onClick:()=>s(!1),className:"px-4 py-2 bg-gray-200 hover:bg-gray-300 rounded-xl",children:"Cancelar"}),i.jsx("button",{type:"button",onClick:k,className:"px-4 py-2 bg-yellow-600 text-white hover:bg-yellow-700 rounded-xl",children:"Confirmar"})]})]})})]})}/*! xlsx.js (C) 2013-present SheetJS -- http://sheetjs.com */var LS={};LS.version="0.18.5";var ine=1252,O4e=[874,932,936,949,950,1250,1251,1252,1253,1254,1255,1256,1257,1258,1e4],q6={0:1252,1:65001,2:65001,77:1e4,128:932,129:949,130:1361,134:936,136:950,161:1253,162:1254,163:1258,177:1255,178:1256,186:1257,204:1251,222:874,238:1250,255:1252,69:6969},z6=function(t){O4e.indexOf(t)!=-1&&(ine=q6[0]=t)};function D4e(){z6(1252)}var ff=function(t){z6(t)};function W6(){ff(1200),D4e()}function sH(t){for(var e=[],r=0,n=t.length;r<n;++r)e[r]=t.charCodeAt(r);return e}function R4e(t){for(var e=[],r=0;r<t.length>>1;++r)e[r]=String.fromCharCode(t.charCodeAt(2*r)+(t.charCodeAt(2*r+1)<<8));return e.join("")}function one(t){for(var e=[],r=0;r<t.length>>1;++r)e[r]=String.fromCharCode(t.charCodeAt(2*r+1)+(t.charCodeAt(2*r)<<8));return e.join("")}var zy=function(t){var e=t.charCodeAt(0),r=t.charCodeAt(1);return e==255&&r==254?R4e(t.slice(2)):e==254&&r==255?one(t.slice(2)):e==65279?t.slice(1):t},QC=function(e){return String.fromCharCode(e)},iH=function(e){return String.fromCharCode(e)},j2,z0="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=";function P2(t){for(var e="",r=0,n=0,a=0,s=0,o=0,l=0,c=0,u=0;u<t.length;)r=t.charCodeAt(u++),s=r>>2,n=t.charCodeAt(u++),o=(r&3)<<4|n>>4,a=t.charCodeAt(u++),l=(n&15)<<2|a>>6,c=a&63,isNaN(n)?l=c=64:isNaN(a)&&(c=64),e+=z0.charAt(s)+z0.charAt(o)+z0.charAt(l)+z0.charAt(c);return e}function Hu(t){var e="",r=0,n=0,a=0,s=0,o=0,l=0,c=0;t=t.replace(/[^\w\+\/\=]/g,"");for(var u=0;u<t.length;)s=z0.indexOf(t.charAt(u++)),o=z0.indexOf(t.charAt(u++)),r=s<<2|o>>4,e+=String.fromCharCode(r),l=z0.indexOf(t.charAt(u++)),n=(o&15)<<4|l>>2,l!==64&&(e+=String.fromCharCode(n)),c=z0.indexOf(t.charAt(u++)),a=(l&3)<<6|c,c!==64&&(e+=String.fromCharCode(a));return e}var ea=function(){return typeof Buffer<"u"&&typeof process<"u"&&typeof process.versions<"u"&&!!process.versions.node}(),OA=function(){if(typeof Buffer<"u"){var t=!Buffer.from;if(!t)try{Buffer.from("foo","utf8")}catch{t=!0}return t?function(e,r){return r?new Buffer(e,r):new Buffer(e)}:Buffer.from.bind(Buffer)}return function(){}}();function Em(t){return ea?Buffer.alloc?Buffer.alloc(t):new Buffer(t):typeof Uint8Array<"u"?new Uint8Array(t):new Array(t)}function oH(t){return ea?Buffer.allocUnsafe?Buffer.allocUnsafe(t):new Buffer(t):typeof Uint8Array<"u"?new Uint8Array(t):new Array(t)}var Pu=function(e){return ea?OA(e,"binary"):e.split("").map(function(r){return r.charCodeAt(0)&255})};function iP(t){if(typeof ArrayBuffer>"u")return Pu(t);for(var e=new ArrayBuffer(t.length),r=new Uint8Array(e),n=0;n!=t.length;++n)r[n]=t.charCodeAt(n)&255;return e}function Lm(t){if(Array.isArray(t))return t.map(function(n){return String.fromCharCode(n)}).join("");for(var e=[],r=0;r<t.length;++r)e[r]=String.fromCharCode(t[r]);return e.join("")}function M4e(t){if(typeof Uint8Array>"u")throw new Error("Unsupported");return new Uint8Array(t)}function X6(t){if(typeof ArrayBuffer>"u")throw new Error("Unsupported");if(t instanceof ArrayBuffer)return X6(new Uint8Array(t));for(var e=new Array(t.length),r=0;r<t.length;++r)e[r]=t[r];return e}var Xo=ea?function(t){return Buffer.concat(t.map(function(e){return Buffer.isBuffer(e)?e:OA(e)}))}:function(t){if(typeof Uint8Array<"u"){var e=0,r=0;for(e=0;e<t.length;++e)r+=t[e].length;var n=new Uint8Array(r),a=0;for(e=0,r=0;e<t.length;r+=a,++e)if(a=t[e].length,t[e]instanceof Uint8Array)n.set(t[e],r);else{if(typeof t[e]=="string")throw"wtf";n.set(new Uint8Array(t[e]),r)}return n}return[].concat.apply([],t.map(function(s){return Array.isArray(s)?s:[].slice.call(s)}))};function L4e(t){for(var e=[],r=0,n=t.length+250,a=Em(t.length+255),s=0;s<t.length;++s){var o=t.charCodeAt(s);if(o<128)a[r++]=o;else if(o<2048)a[r++]=192|o>>6&31,a[r++]=128|o&63;else if(o>=55296&&o<57344){o=(o&1023)+64;var l=t.charCodeAt(++s)&1023;a[r++]=240|o>>8&7,a[r++]=128|o>>2&63,a[r++]=128|l>>6&15|(o&3)<<4,a[r++]=128|l&63}else a[r++]=224|o>>12&15,a[r++]=128|o>>6&63,a[r++]=128|o&63;r>n&&(e.push(a.slice(0,r)),r=0,a=Em(65535),n=65530)}return e.push(a.slice(0,r)),Xo(e)}var jc=/\u0000/g,Wy=/[\u0001-\u0006]/g;function mv(t){for(var e="",r=t.length-1;r>=0;)e+=t.charAt(r--);return e}function hf(t,e){var r=""+t;return r.length>=e?r:Ci("0",e-r.length)+r}function Y6(t,e){var r=""+t;return r.length>=e?r:Ci(" ",e-r.length)+r}function US(t,e){var r=""+t;return r.length>=e?r:r+Ci(" ",e-r.length)}function U4e(t,e){var r=""+Math.round(t);return r.length>=e?r:Ci("0",e-r.length)+r}function Q4e(t,e){var r=""+t;return r.length>=e?r:Ci("0",e-r.length)+r}var lH=Math.pow(2,32);function Ax(t,e){if(t>lH||t<-lH)return U4e(t,e);var r=Math.round(t);return Q4e(r,e)}function QS(t,e){return e=e||0,t.length>=7+e&&(t.charCodeAt(e)|32)===103&&(t.charCodeAt(e+1)|32)===101&&(t.charCodeAt(e+2)|32)===110&&(t.charCodeAt(e+3)|32)===101&&(t.charCodeAt(e+4)|32)===114&&(t.charCodeAt(e+5)|32)===97&&(t.charCodeAt(e+6)|32)===108}var cH=[["Sun","Sunday"],["Mon","Monday"],["Tue","Tuesday"],["Wed","Wednesday"],["Thu","Thursday"],["Fri","Friday"],["Sat","Saturday"]],E5=[["J","Jan","January"],["F","Feb","February"],["M","Mar","March"],["A","Apr","April"],["M","May","May"],["J","Jun","June"],["J","Jul","July"],["A","Aug","August"],["S","Sep","September"],["O","Oct","October"],["N","Nov","November"],["D","Dec","December"]];function V4e(t){return t||(t={}),t[0]="General",t[1]="0",t[2]="0.00",t[3]="#,##0",t[4]="#,##0.00",t[9]="0%",t[10]="0.00%",t[11]="0.00E+00",t[12]="# ?/?",t[13]="# ??/??",t[14]="m/d/yy",t[15]="d-mmm-yy",t[16]="d-mmm",t[17]="mmm-yy",t[18]="h:mm AM/PM",t[19]="h:mm:ss AM/PM",t[20]="h:mm",t[21]="h:mm:ss",t[22]="m/d/yy h:mm",t[37]="#,##0 ;(#,##0)",t[38]="#,##0 ;[Red](#,##0)",t[39]="#,##0.00;(#,##0.00)",t[40]="#,##0.00;[Red](#,##0.00)",t[45]="mm:ss",t[46]="[h]:mm:ss",t[47]="mmss.0",t[48]="##0.0E+0",t[49]="@",t[56]='"/ "hh""mm""ss" "',t}var Tn={0:"General",1:"0",2:"0.00",3:"#,##0",4:"#,##0.00",9:"0%",10:"0.00%",11:"0.00E+00",12:"# ?/?",13:"# ??/??",14:"m/d/yy",15:"d-mmm-yy",16:"d-mmm",17:"mmm-yy",18:"h:mm AM/PM",19:"h:mm:ss AM/PM",20:"h:mm",21:"h:mm:ss",22:"m/d/yy h:mm",37:"#,##0 ;(#,##0)",38:"#,##0 ;[Red](#,##0)",39:"#,##0.00;(#,##0.00)",40:"#,##0.00;[Red](#,##0.00)",45:"mm:ss",46:"[h]:mm:ss",47:"mmss.0",48:"##0.0E+0",49:"@",56:'"/ "hh""mm""ss" "'},uH={5:37,6:38,7:39,8:40,23:0,24:0,25:0,26:0,27:14,28:14,29:14,30:14,31:14,50:14,51:14,52:14,53:14,54:14,55:14,56:14,57:14,58:14,59:1,60:2,61:3,62:4,67:9,68:10,69:12,70:13,71:14,72:14,73:15,74:16,75:17,76:20,77:21,78:22,79:45,80:46,81:47,82:0},H4e={5:'"$"#,##0_);\\("$"#,##0\\)',63:'"$"#,##0_);\\("$"#,##0\\)',6:'"$"#,##0_);[Red]\\("$"#,##0\\)',64:'"$"#,##0_);[Red]\\("$"#,##0\\)',7:'"$"#,##0.00_);\\("$"#,##0.00\\)',65:'"$"#,##0.00_);\\("$"#,##0.00\\)',8:'"$"#,##0.00_);[Red]\\("$"#,##0.00\\)',66:'"$"#,##0.00_);[Red]\\("$"#,##0.00\\)',41:'_(* #,##0_);_(* \\(#,##0\\);_(* "-"_);_(@_)',42:'_("$"* #,##0_);_("$"* \\(#,##0\\);_("$"* "-"_);_(@_)',43:'_(* #,##0.00_);_(* \\(#,##0.00\\);_(* "-"??_);_(@_)',44:'_("$"* #,##0.00_);_("$"* \\(#,##0.00\\);_("$"* "-"??_);_(@_)'};function VS(t,e,r){for(var n=t<0?-1:1,a=t*n,s=0,o=1,l=0,c=1,u=0,d=0,f=Math.floor(a);u<e&&(f=Math.floor(a),l=f*o+s,d=f*u+c,!(a-f<5e-8));)a=1/(a-f),s=o,o=l,c=u,u=d;if(d>e&&(u>e?(d=c,l=s):(d=u,l=o)),!r)return[0,n*l,d];var A=Math.floor(n*l/d);return[A,n*l-A*d,d]}function _p(t,e,r){if(t>2958465||t<0)return null;var n=t|0,a=Math.floor(86400*(t-n)),s=0,o=[],l={D:n,T:a,u:86400*(t-n)-a,y:0,m:0,d:0,H:0,M:0,S:0,q:0};if(Math.abs(l.u)<1e-6&&(l.u=0),e&&e.date1904&&(n+=1462),l.u>.9999&&(l.u=0,++a==86400&&(l.T=a=0,++n,++l.D)),n===60)o=r?[1317,10,29]:[1900,2,29],s=3;else if(n===0)o=r?[1317,8,29]:[1900,1,0],s=6;else{n>60&&--n;var c=new Date(1900,0,1);c.setDate(c.getDate()+n-1),o=[c.getFullYear(),c.getMonth()+1,c.getDate()],s=c.getDay(),n<60&&(s=(s+6)%7),r&&(s=W4e(c,o))}return l.y=o[0],l.m=o[1],l.d=o[2],l.S=a%60,a=Math.floor(a/60),l.M=a%60,a=Math.floor(a/60),l.H=a,l.q=s,l}var lne=new Date(1899,11,31,0,0,0),$4e=lne.getTime(),G4e=new Date(1900,2,1,0,0,0);function cne(t,e){var r=t.getTime();return e?r-=1461*24*60*60*1e3:t>=G4e&&(r+=24*60*60*1e3),(r-($4e+(t.getTimezoneOffset()-lne.getTimezoneOffset())*6e4))/(24*60*60*1e3)}function J6(t){return t.indexOf(".")==-1?t:t.replace(/(?:\.0*|(\.\d*[1-9])0+)$/,"$1")}function K4e(t){return t.indexOf("E")==-1?t:t.replace(/(?:\.0*|(\.\d*[1-9])0+)[Ee]/,"$1E").replace(/(E[+-])(\d)$/,"$10$2")}function q4e(t){var e=t<0?12:11,r=J6(t.toFixed(12));return r.length<=e||(r=t.toPrecision(10),r.length<=e)?r:t.toExponential(5)}function z4e(t){var e=J6(t.toFixed(11));return e.length>(t<0?12:11)||e==="0"||e==="-0"?t.toPrecision(6):e}function B2(t){var e=Math.floor(Math.log(Math.abs(t))*Math.LOG10E),r;return e>=-4&&e<=-1?r=t.toPrecision(10+e):Math.abs(e)<=9?r=q4e(t):e===10?r=t.toFixed(10).substr(0,12):r=z4e(t),J6(K4e(r.toUpperCase()))}function dg(t,e){switch(typeof t){case"string":return t;case"boolean":return t?"TRUE":"FALSE";case"number":return(t|0)===t?t.toString(10):B2(t);case"undefined":return"";case"object":if(t==null)return"";if(t instanceof Date)return Od(14,cne(t,e&&e.date1904),e)}throw new Error("unsupported value in General format: "+t)}function W4e(t,e){e[0]-=581;var r=t.getDay();return t<60&&(r=(r+6)%7),r}function X4e(t,e,r,n){var a="",s=0,o=0,l=r.y,c,u=0;switch(t){case 98:l=r.y+543;case 121:switch(e.length){case 1:case 2:c=l%100,u=2;break;default:c=l%1e4,u=4;break}break;case 109:switch(e.length){case 1:case 2:c=r.m,u=e.length;break;case 3:return E5[r.m-1][1];case 5:return E5[r.m-1][0];default:return E5[r.m-1][2]}break;case 100:switch(e.length){case 1:case 2:c=r.d,u=e.length;break;case 3:return cH[r.q][0];default:return cH[r.q][1]}break;case 104:switch(e.length){case 1:case 2:c=1+(r.H+11)%12,u=e.length;break;default:throw"bad hour format: "+e}break;case 72:switch(e.length){case 1:case 2:c=r.H,u=e.length;break;default:throw"bad hour format: "+e}break;case 77:switch(e.length){case 1:case 2:c=r.M,u=e.length;break;default:throw"bad minute format: "+e}break;case 115:if(e!="s"&&e!="ss"&&e!=".0"&&e!=".00"&&e!=".000")throw"bad second format: "+e;return r.u===0&&(e=="s"||e=="ss")?hf(r.S,e.length):(n>=2?o=n===3?1e3:100:o=n===1?10:1,s=Math.round(o*(r.S+r.u)),s>=60*o&&(s=0),e==="s"?s===0?"0":""+s/o:(a=hf(s,2+n),e==="ss"?a.substr(0,2):"."+a.substr(2,e.length-1)));case 90:switch(e){case"[h]":case"[hh]":c=r.D*24+r.H;break;case"[m]":case"[mm]":c=(r.D*24+r.H)*60+r.M;break;case"[s]":case"[ss]":c=((r.D*24+r.H)*60+r.M)*60+Math.round(r.S+r.u);break;default:throw"bad abstime format: "+e}u=e.length===3?1:2;break;case 101:c=l,u=1;break}var d=u>0?hf(c,u):"";return d}function W0(t){var e=3;if(t.length<=e)return t;for(var r=t.length%e,n=t.substr(0,r);r!=t.length;r+=e)n+=(n.length>0?",":"")+t.substr(r,e);return n}var une=/%/g;function Y4e(t,e,r){var n=e.replace(une,""),a=e.length-n.length;return iA(t,n,r*Math.pow(10,2*a))+Ci("%",a)}function J4e(t,e,r){for(var n=e.length-1;e.charCodeAt(n-1)===44;)--n;return iA(t,e.substr(0,n),r/Math.pow(10,3*(e.length-n)))}function dne(t,e){var r,n=t.indexOf("E")-t.indexOf(".")-1;if(t.match(/^#+0.0E\+0$/)){if(e==0)return"0.0E+0";if(e<0)return"-"+dne(t,-e);var a=t.indexOf(".");a===-1&&(a=t.indexOf("E"));var s=Math.floor(Math.log(e)*Math.LOG10E)%a;if(s<0&&(s+=a),r=(e/Math.pow(10,s)).toPrecision(n+1+(a+s)%a),r.indexOf("e")===-1){var o=Math.floor(Math.log(e)*Math.LOG10E);for(r.indexOf(".")===-1?r=r.charAt(0)+"."+r.substr(1)+"E+"+(o-r.length+s):r+="E+"+(o-s);r.substr(0,2)==="0.";)r=r.charAt(0)+r.substr(2,a)+"."+r.substr(2+a),r=r.replace(/^0+([1-9])/,"$1").replace(/^0+\./,"0.");r=r.replace(/\+-/,"-")}r=r.replace(/^([+-]?)(\d*)\.(\d*)[Ee]/,function(l,c,u,d){return c+u+d.substr(0,(a+s)%a)+"."+d.substr(s)+"E"})}else r=e.toExponential(n);return t.match(/E\+00$/)&&r.match(/e[+-]\d$/)&&(r=r.substr(0,r.length-1)+"0"+r.charAt(r.length-1)),t.match(/E\-/)&&r.match(/e\+/)&&(r=r.replace(/e\+/,"e")),r.replace("e","E")}var fne=/# (\?+)( ?)\/( ?)(\d+)/;function Z4e(t,e,r){var n=parseInt(t[4],10),a=Math.round(e*n),s=Math.floor(a/n),o=a-s*n,l=n;return r+(s===0?"":""+s)+" "+(o===0?Ci(" ",t[1].length+1+t[4].length):Y6(o,t[1].length)+t[2]+"/"+t[3]+hf(l,t[4].length))}function e3e(t,e,r){return r+(e===0?"":""+e)+Ci(" ",t[1].length+2+t[4].length)}var hne=/^#*0*\.([0#]+)/,Ane=/\).*[0#]/,mne=/\(###\) ###\\?-####/;function bc(t){for(var e="",r,n=0;n!=t.length;++n)switch(r=t.charCodeAt(n)){case 35:break;case 63:e+=" ";break;case 48:e+="0";break;default:e+=String.fromCharCode(r)}return e}function dH(t,e){var r=Math.pow(10,e);return""+Math.round(t*r)/r}function fH(t,e){var r=t-Math.floor(t),n=Math.pow(10,e);return e<(""+Math.round(r*n)).length?0:Math.round(r*n)}function t3e(t,e){return e<(""+Math.round((t-Math.floor(t))*Math.pow(10,e))).length?1:0}function r3e(t){return t<2147483647&&t>-2147483648?""+(t>=0?t|0:t-1|0):""+Math.floor(t)}function cd(t,e,r){if(t.charCodeAt(0)===40&&!e.match(Ane)){var n=e.replace(/\( */,"").replace(/ \)/,"").replace(/\)/,"");return r>=0?cd("n",n,r):"("+cd("n",n,-r)+")"}if(e.charCodeAt(e.length-1)===44)return J4e(t,e,r);if(e.indexOf("%")!==-1)return Y4e(t,e,r);if(e.indexOf("E")!==-1)return dne(e,r);if(e.charCodeAt(0)===36)return"$"+cd(t,e.substr(e.charAt(1)==" "?2:1),r);var a,s,o,l,c=Math.abs(r),u=r<0?"-":"";if(e.match(/^00+$/))return u+Ax(c,e.length);if(e.match(/^[#?]+$/))return a=Ax(r,0),a==="0"&&(a=""),a.length>e.length?a:bc(e.substr(0,e.length-a.length))+a;if(s=e.match(fne))return Z4e(s,c,u);if(e.match(/^#+0+$/))return u+Ax(c,e.length-e.indexOf("0"));if(s=e.match(hne))return a=dH(r,s[1].length).replace(/^([^\.]+)$/,"$1."+bc(s[1])).replace(/\.$/,"."+bc(s[1])).replace(/\.(\d*)$/,function(m,p){return"."+p+Ci("0",bc(s[1]).length-p.length)}),e.indexOf("0.")!==-1?a:a.replace(/^0\./,".");if(e=e.replace(/^#+([0.])/,"$1"),s=e.match(/^(0*)\.(#*)$/))return u+dH(c,s[2].length).replace(/\.(\d*[1-9])0*$/,".$1").replace(/^(-?\d*)$/,"$1.").replace(/^0\./,s[1].length?"0.":".");if(s=e.match(/^#{1,3},##0(\.?)$/))return u+W0(Ax(c,0));if(s=e.match(/^#,##0\.([#0]*0)$/))return r<0?"-"+cd(t,e,-r):W0(""+(Math.floor(r)+t3e(r,s[1].length)))+"."+hf(fH(r,s[1].length),s[1].length);if(s=e.match(/^#,#*,#0/))return cd(t,e.replace(/^#,#*,/,""),r);if(s=e.match(/^([0#]+)(\\?-([0#]+))+$/))return a=mv(cd(t,e.replace(/[\\-]/g,""),r)),o=0,mv(mv(e.replace(/\\/g,"")).replace(/[0#]/g,function(m){return o<a.length?a.charAt(o++):m==="0"?"0":""}));if(e.match(mne))return a=cd(t,"##########",r),"("+a.substr(0,3)+") "+a.substr(3,3)+"-"+a.substr(6);var d="";if(s=e.match(/^([#0?]+)( ?)\/( ?)([#0?]+)/))return o=Math.min(s[4].length,7),l=VS(c,Math.pow(10,o)-1,!1),a=""+u,d=iA("n",s[1],l[1]),d.charAt(d.length-1)==" "&&(d=d.substr(0,d.length-1)+"0"),a+=d+s[2]+"/"+s[3],d=US(l[2],o),d.length<s[4].length&&(d=bc(s[4].substr(s[4].length-d.length))+d),a+=d,a;if(s=e.match(/^# ([#0?]+)( ?)\/( ?)([#0?]+)/))return o=Math.min(Math.max(s[1].length,s[4].length),7),l=VS(c,Math.pow(10,o)-1,!0),u+(l[0]||(l[1]?"":"0"))+" "+(l[1]?Y6(l[1],o)+s[2]+"/"+s[3]+US(l[2],o):Ci(" ",2*o+1+s[2].length+s[3].length));if(s=e.match(/^[#0?]+$/))return a=Ax(r,0),e.length<=a.length?a:bc(e.substr(0,e.length-a.length))+a;if(s=e.match(/^([#0?]+)\.([#0]+)$/)){a=""+r.toFixed(Math.min(s[2].length,10)).replace(/([^0])0+$/,"$1"),o=a.indexOf(".");var f=e.indexOf(".")-o,A=e.length-a.length-f;return bc(e.substr(0,f)+a+e.substr(e.length-A))}if(s=e.match(/^00,000\.([#0]*0)$/))return o=fH(r,s[1].length),r<0?"-"+cd(t,e,-r):W0(r3e(r)).replace(/^\d,\d{3}$/,"0$&").replace(/^\d*$/,function(m){return"00,"+(m.length<3?hf(0,3-m.length):"")+m})+"."+hf(o,s[1].length);switch(e){case"###,##0.00":return cd(t,"#,##0.00",r);case"###,###":case"##,###":case"#,###":var h=W0(Ax(c,0));return h!=="0"?u+h:"";case"###,###.00":return cd(t,"###,##0.00",r).replace(/^0\./,".");case"#,###.00":return cd(t,"#,##0.00",r).replace(/^0\./,".")}throw new Error("unsupported format |"+e+"|")}function n3e(t,e,r){for(var n=e.length-1;e.charCodeAt(n-1)===44;)--n;return iA(t,e.substr(0,n),r/Math.pow(10,3*(e.length-n)))}function a3e(t,e,r){var n=e.replace(une,""),a=e.length-n.length;return iA(t,n,r*Math.pow(10,2*a))+Ci("%",a)}function pne(t,e){var r,n=t.indexOf("E")-t.indexOf(".")-1;if(t.match(/^#+0.0E\+0$/)){if(e==0)return"0.0E+0";if(e<0)return"-"+pne(t,-e);var a=t.indexOf(".");a===-1&&(a=t.indexOf("E"));var s=Math.floor(Math.log(e)*Math.LOG10E)%a;if(s<0&&(s+=a),r=(e/Math.pow(10,s)).toPrecision(n+1+(a+s)%a),!r.match(/[Ee]/)){var o=Math.floor(Math.log(e)*Math.LOG10E);r.indexOf(".")===-1?r=r.charAt(0)+"."+r.substr(1)+"E+"+(o-r.length+s):r+="E+"+(o-s),r=r.replace(/\+-/,"-")}r=r.replace(/^([+-]?)(\d*)\.(\d*)[Ee]/,function(l,c,u,d){return c+u+d.substr(0,(a+s)%a)+"."+d.substr(s)+"E"})}else r=e.toExponential(n);return t.match(/E\+00$/)&&r.match(/e[+-]\d$/)&&(r=r.substr(0,r.length-1)+"0"+r.charAt(r.length-1)),t.match(/E\-/)&&r.match(/e\+/)&&(r=r.replace(/e\+/,"e")),r.replace("e","E")}function Vf(t,e,r){if(t.charCodeAt(0)===40&&!e.match(Ane)){var n=e.replace(/\( */,"").replace(/ \)/,"").replace(/\)/,"");return r>=0?Vf("n",n,r):"("+Vf("n",n,-r)+")"}if(e.charCodeAt(e.length-1)===44)return n3e(t,e,r);if(e.indexOf("%")!==-1)return a3e(t,e,r);if(e.indexOf("E")!==-1)return pne(e,r);if(e.charCodeAt(0)===36)return"$"+Vf(t,e.substr(e.charAt(1)==" "?2:1),r);var a,s,o,l,c=Math.abs(r),u=r<0?"-":"";if(e.match(/^00+$/))return u+hf(c,e.length);if(e.match(/^[#?]+$/))return a=""+r,r===0&&(a=""),a.length>e.length?a:bc(e.substr(0,e.length-a.length))+a;if(s=e.match(fne))return e3e(s,c,u);if(e.match(/^#+0+$/))return u+hf(c,e.length-e.indexOf("0"));if(s=e.match(hne))return a=(""+r).replace(/^([^\.]+)$/,"$1."+bc(s[1])).replace(/\.$/,"."+bc(s[1])),a=a.replace(/\.(\d*)$/,function(m,p){return"."+p+Ci("0",bc(s[1]).length-p.length)}),e.indexOf("0.")!==-1?a:a.replace(/^0\./,".");if(e=e.replace(/^#+([0.])/,"$1"),s=e.match(/^(0*)\.(#*)$/))return u+(""+c).replace(/\.(\d*[1-9])0*$/,".$1").replace(/^(-?\d*)$/,"$1.").replace(/^0\./,s[1].length?"0.":".");if(s=e.match(/^#{1,3},##0(\.?)$/))return u+W0(""+c);if(s=e.match(/^#,##0\.([#0]*0)$/))return r<0?"-"+Vf(t,e,-r):W0(""+r)+"."+Ci("0",s[1].length);if(s=e.match(/^#,#*,#0/))return Vf(t,e.replace(/^#,#*,/,""),r);if(s=e.match(/^([0#]+)(\\?-([0#]+))+$/))return a=mv(Vf(t,e.replace(/[\\-]/g,""),r)),o=0,mv(mv(e.replace(/\\/g,"")).replace(/[0#]/g,function(m){return o<a.length?a.charAt(o++):m==="0"?"0":""}));if(e.match(mne))return a=Vf(t,"##########",r),"("+a.substr(0,3)+") "+a.substr(3,3)+"-"+a.substr(6);var d="";if(s=e.match(/^([#0?]+)( ?)\/( ?)([#0?]+)/))return o=Math.min(s[4].length,7),l=VS(c,Math.pow(10,o)-1,!1),a=""+u,d=iA("n",s[1],l[1]),d.charAt(d.length-1)==" "&&(d=d.substr(0,d.length-1)+"0"),a+=d+s[2]+"/"+s[3],d=US(l[2],o),d.length<s[4].length&&(d=bc(s[4].substr(s[4].length-d.length))+d),a+=d,a;if(s=e.match(/^# ([#0?]+)( ?)\/( ?)([#0?]+)/))return o=Math.min(Math.max(s[1].length,s[4].length),7),l=VS(c,Math.pow(10,o)-1,!0),u+(l[0]||(l[1]?"":"0"))+" "+(l[1]?Y6(l[1],o)+s[2]+"/"+s[3]+US(l[2],o):Ci(" ",2*o+1+s[2].length+s[3].length));if(s=e.match(/^[#0?]+$/))return a=""+r,e.length<=a.length?a:bc(e.substr(0,e.length-a.length))+a;if(s=e.match(/^([#0]+)\.([#0]+)$/)){a=""+r.toFixed(Math.min(s[2].length,10)).replace(/([^0])0+$/,"$1"),o=a.indexOf(".");var f=e.indexOf(".")-o,A=e.length-a.length-f;return bc(e.substr(0,f)+a+e.substr(e.length-A))}if(s=e.match(/^00,000\.([#0]*0)$/))return r<0?"-"+Vf(t,e,-r):W0(""+r).replace(/^\d,\d{3}$/,"0$&").replace(/^\d*$/,function(m){return"00,"+(m.length<3?hf(0,3-m.length):"")+m})+"."+hf(0,s[1].length);switch(e){case"###,###":case"##,###":case"#,###":var h=W0(""+c);return h!=="0"?u+h:"";default:if(e.match(/\.[0#?]*$/))return Vf(t,e.slice(0,e.lastIndexOf(".")),r)+bc(e.slice(e.lastIndexOf(".")))}throw new Error("unsupported format |"+e+"|")}function iA(t,e,r){return(r|0)===r?Vf(t,e,r):cd(t,e,r)}function s3e(t){for(var e=[],r=!1,n=0,a=0;n<t.length;++n)switch(t.charCodeAt(n)){case 34:r=!r;break;case 95:case 42:case 92:++n;break;case 59:e[e.length]=t.substr(a,n-a),a=n+1}if(e[e.length]=t.substr(a),r===!0)throw new Error("Format |"+t+"| unterminated string ");return e}var gne=/\[[HhMmSs\u0E0A\u0E19\u0E17]*\]/;function x1(t){for(var e=0,r="",n="";e<t.length;)switch(r=t.charAt(e)){case"G":QS(t,e)&&(e+=6),e++;break;case'"':for(;t.charCodeAt(++e)!==34&&e<t.length;);++e;break;case"\\":e+=2;break;case"_":e+=2;break;case"@":++e;break;case"B":case"b":if(t.charAt(e+1)==="1"||t.charAt(e+1)==="2")return!0;case"M":case"D":case"Y":case"H":case"S":case"E":case"m":case"d":case"y":case"h":case"s":case"e":case"g":return!0;case"A":case"a":case"":if(t.substr(e,3).toUpperCase()==="A/P"||t.substr(e,5).toUpperCase()==="AM/PM"||t.substr(e,5).toUpperCase()==="/")return!0;++e;break;case"[":for(n=r;t.charAt(e++)!=="]"&&e<t.length;)n+=t.charAt(e);if(n.match(gne))return!0;break;case".":case"0":case"#":for(;e<t.length&&("0#?.,E+-%".indexOf(r=t.charAt(++e))>-1||r=="\\"&&t.charAt(e+1)=="-"&&"0#".indexOf(t.charAt(e+2))>-1););break;case"?":for(;t.charAt(++e)===r;);break;case"*":++e,(t.charAt(e)==" "||t.charAt(e)=="*")&&++e;break;case"(":case")":++e;break;case"1":case"2":case"3":case"4":case"5":case"6":case"7":case"8":case"9":for(;e<t.length&&"0123456789".indexOf(t.charAt(++e))>-1;);break;case" ":++e;break;default:++e;break}return!1}function i3e(t,e,r,n){for(var a=[],s="",o=0,l="",c="t",u,d,f,A="H";o<t.length;)switch(l=t.charAt(o)){case"G":if(!QS(t,o))throw new Error("unrecognized character "+l+" in "+t);a[a.length]={t:"G",v:"General"},o+=7;break;case'"':for(s="";(f=t.charCodeAt(++o))!==34&&o<t.length;)s+=String.fromCharCode(f);a[a.length]={t:"t",v:s},++o;break;case"\\":var h=t.charAt(++o),m=h==="("||h===")"?h:"t";a[a.length]={t:m,v:h},++o;break;case"_":a[a.length]={t:"t",v:" "},o+=2;break;case"@":a[a.length]={t:"T",v:e},++o;break;case"B":case"b":if(t.charAt(o+1)==="1"||t.charAt(o+1)==="2"){if(u==null&&(u=_p(e,r,t.charAt(o+1)==="2"),u==null))return"";a[a.length]={t:"X",v:t.substr(o,2)},c=l,o+=2;break}case"M":case"D":case"Y":case"H":case"S":case"E":l=l.toLowerCase();case"m":case"d":case"y":case"h":case"s":case"e":case"g":if(e<0||u==null&&(u=_p(e,r),u==null))return"";for(s=l;++o<t.length&&t.charAt(o).toLowerCase()===l;)s+=l;l==="m"&&c.toLowerCase()==="h"&&(l="M"),l==="h"&&(l=A),a[a.length]={t:l,v:s},c=l;break;case"A":case"a":case"":var p={t:l,v:l};if(u==null&&(u=_p(e,r)),t.substr(o,3).toUpperCase()==="A/P"?(u!=null&&(p.v=u.H>=12?"P":"A"),p.t="T",A="h",o+=3):t.substr(o,5).toUpperCase()==="AM/PM"?(u!=null&&(p.v=u.H>=12?"PM":"AM"),p.t="T",o+=5,A="h"):t.substr(o,5).toUpperCase()==="/"?(u!=null&&(p.v=u.H>=12?"":""),p.t="T",o+=5,A="h"):(p.t="t",++o),u==null&&p.t==="T")return"";a[a.length]=p,c=l;break;case"[":for(s=l;t.charAt(o++)!=="]"&&o<t.length;)s+=t.charAt(o);if(s.slice(-1)!=="]")throw'unterminated "[" block: |'+s+"|";if(s.match(gne)){if(u==null&&(u=_p(e,r),u==null))return"";a[a.length]={t:"Z",v:s.toLowerCase()},c=s.charAt(1)}else s.indexOf("$")>-1&&(s=(s.match(/\$([^-\[\]]*)/)||[])[1]||"$",x1(t)||(a[a.length]={t:"t",v:s}));break;case".":if(u!=null){for(s=l;++o<t.length&&(l=t.charAt(o))==="0";)s+=l;a[a.length]={t:"s",v:s};break}case"0":case"#":for(s=l;++o<t.length&&"0#?.,E+-%".indexOf(l=t.charAt(o))>-1;)s+=l;a[a.length]={t:"n",v:s};break;case"?":for(s=l;t.charAt(++o)===l;)s+=l;a[a.length]={t:l,v:s},c=l;break;case"*":++o,(t.charAt(o)==" "||t.charAt(o)=="*")&&++o;break;case"(":case")":a[a.length]={t:n===1?"t":l,v:l},++o;break;case"1":case"2":case"3":case"4":case"5":case"6":case"7":case"8":case"9":for(s=l;o<t.length&&"0123456789".indexOf(t.charAt(++o))>-1;)s+=t.charAt(o);a[a.length]={t:"D",v:s};break;case" ":a[a.length]={t:l,v:l},++o;break;case"$":a[a.length]={t:"t",v:"$"},++o;break;default:if(",$-+/():!^&'~{}<>=acfijklopqrtuvwxzP".indexOf(l)===-1)throw new Error("unrecognized character "+l+" in "+t);a[a.length]={t:"t",v:l},++o;break}var x=0,v=0,y;for(o=a.length-1,c="t";o>=0;--o)switch(a[o].t){case"h":case"H":a[o].t=A,c="h",x<1&&(x=1);break;case"s":(y=a[o].v.match(/\.0+$/))&&(v=Math.max(v,y[0].length-1)),x<3&&(x=3);case"d":case"y":case"M":case"e":c=a[o].t;break;case"m":c==="s"&&(a[o].t="M",x<2&&(x=2));break;case"X":break;case"Z":x<1&&a[o].v.match(/[Hh]/)&&(x=1),x<2&&a[o].v.match(/[Mm]/)&&(x=2),x<3&&a[o].v.match(/[Ss]/)&&(x=3)}switch(x){case 0:break;case 1:u.u>=.5&&(u.u=0,++u.S),u.S>=60&&(u.S=0,++u.M),u.M>=60&&(u.M=0,++u.H);break;case 2:u.u>=.5&&(u.u=0,++u.S),u.S>=60&&(u.S=0,++u.M);break}var b="",w;for(o=0;o<a.length;++o)switch(a[o].t){case"t":case"T":case" ":case"D":break;case"X":a[o].v="",a[o].t=";";break;case"d":case"m":case"y":case"h":case"H":case"M":case"s":case"e":case"b":case"Z":a[o].v=X4e(a[o].t.charCodeAt(0),a[o].v,u,v),a[o].t="t";break;case"n":case"?":for(w=o+1;a[w]!=null&&((l=a[w].t)==="?"||l==="D"||(l===" "||l==="t")&&a[w+1]!=null&&(a[w+1].t==="?"||a[w+1].t==="t"&&a[w+1].v==="/")||a[o].t==="("&&(l===" "||l==="n"||l===")")||l==="t"&&(a[w].v==="/"||a[w].v===" "&&a[w+1]!=null&&a[w+1].t=="?"));)a[o].v+=a[w].v,a[w]={v:"",t:";"},++w;b+=a[o].v,o=w-1;break;case"G":a[o].t="t",a[o].v=dg(e,r);break}var j="",I,_;if(b.length>0){b.charCodeAt(0)==40?(I=e<0&&b.charCodeAt(0)===45?-e:e,_=iA("n",b,I)):(I=e<0&&n>1?-e:e,_=iA("n",b,I),I<0&&a[0]&&a[0].t=="t"&&(_=_.substr(1),a[0].v="-"+a[0].v)),w=_.length-1;var S=a.length;for(o=0;o<a.length;++o)if(a[o]!=null&&a[o].t!="t"&&a[o].v.indexOf(".")>-1){S=o;break}var E=a.length;if(S===a.length&&_.indexOf("E")===-1){for(o=a.length-1;o>=0;--o)a[o]==null||"n?".indexOf(a[o].t)===-1||(w>=a[o].v.length-1?(w-=a[o].v.length,a[o].v=_.substr(w+1,a[o].v.length)):w<0?a[o].v="":(a[o].v=_.substr(0,w+1),w=-1),a[o].t="t",E=o);w>=0&&E<a.length&&(a[E].v=_.substr(0,w+1)+a[E].v)}else if(S!==a.length&&_.indexOf("E")===-1){for(w=_.indexOf(".")-1,o=S;o>=0;--o)if(!(a[o]==null||"n?".indexOf(a[o].t)===-1)){for(d=a[o].v.indexOf(".")>-1&&o===S?a[o].v.indexOf(".")-1:a[o].v.length-1,j=a[o].v.substr(d+1);d>=0;--d)w>=0&&(a[o].v.charAt(d)==="0"||a[o].v.charAt(d)==="#")&&(j=_.charAt(w--)+j);a[o].v=j,a[o].t="t",E=o}for(w>=0&&E<a.length&&(a[E].v=_.substr(0,w+1)+a[E].v),w=_.indexOf(".")+1,o=S;o<a.length;++o)if(!(a[o]==null||"n?(".indexOf(a[o].t)===-1&&o!==S)){for(d=a[o].v.indexOf(".")>-1&&o===S?a[o].v.indexOf(".")+1:0,j=a[o].v.substr(0,d);d<a[o].v.length;++d)w<_.length&&(j+=_.charAt(w++));a[o].v=j,a[o].t="t",E=o}}}for(o=0;o<a.length;++o)a[o]!=null&&"n?".indexOf(a[o].t)>-1&&(I=n>1&&e<0&&o>0&&a[o-1].v==="-"?-e:e,a[o].v=iA(a[o].t,a[o].v,I),a[o].t="t");var T="";for(o=0;o!==a.length;++o)a[o]!=null&&(T+=a[o].v);return T}var hH=/\[(=|>[=]?|<[>=]?)(-?\d+(?:\.\d*)?)\]/;function AH(t,e){if(e==null)return!1;var r=parseFloat(e[2]);switch(e[1]){case"=":if(t==r)return!0;break;case">":if(t>r)return!0;break;case"<":if(t<r)return!0;break;case"<>":if(t!=r)return!0;break;case">=":if(t>=r)return!0;break;case"<=":if(t<=r)return!0;break}return!1}function o3e(t,e){var r=s3e(t),n=r.length,a=r[n-1].indexOf("@");if(n<4&&a>-1&&--n,r.length>4)throw new Error("cannot find right format for |"+r.join("|")+"|");if(typeof e!="number")return[4,r.length===4||a>-1?r[r.length-1]:"@"];switch(r.length){case 1:r=a>-1?["General","General","General",r[0]]:[r[0],r[0],r[0],"@"];break;case 2:r=a>-1?[r[0],r[0],r[0],r[1]]:[r[0],r[1],r[0],"@"];break;case 3:r=a>-1?[r[0],r[1],r[0],r[2]]:[r[0],r[1],r[2],"@"];break}var s=e>0?r[0]:e<0?r[1]:r[2];if(r[0].indexOf("[")===-1&&r[1].indexOf("[")===-1)return[n,s];if(r[0].match(/\[[=<>]/)!=null||r[1].match(/\[[=<>]/)!=null){var o=r[0].match(hH),l=r[1].match(hH);return AH(e,o)?[n,r[0]]:AH(e,l)?[n,r[1]]:[n,r[o!=null&&l!=null?2:1]]}return[n,s]}function Od(t,e,r){r==null&&(r={});var n="";switch(typeof t){case"string":t=="m/d/yy"&&r.dateNF?n=r.dateNF:n=t;break;case"number":t==14&&r.dateNF?n=r.dateNF:n=(r.table!=null?r.table:Tn)[t],n==null&&(n=r.table&&r.table[uH[t]]||Tn[uH[t]]),n==null&&(n=H4e[t]||"General");break}if(QS(n,0))return dg(e,r);e instanceof Date&&(e=cne(e,r.date1904));var a=o3e(n,e);if(QS(a[1]))return dg(e,r);if(e===!0)e="TRUE";else if(e===!1)e="FALSE";else if(e===""||e==null)return"";return i3e(a[1],e,r,a[0])}function oA(t,e){if(typeof e!="number"){e=+e||-1;for(var r=0;r<392;++r){if(Tn[r]==null){e<0&&(e=r);continue}if(Tn[r]==t){e=r;break}}e<0&&(e=391)}return Tn[e]=t,e}function oP(t){for(var e=0;e!=392;++e)t[e]!==void 0&&oA(t[e],e)}function v1(){Tn=V4e()}var l3e={5:'"$"#,##0_);\\("$"#,##0\\)',6:'"$"#,##0_);[Red]\\("$"#,##0\\)',7:'"$"#,##0.00_);\\("$"#,##0.00\\)',8:'"$"#,##0.00_);[Red]\\("$"#,##0.00\\)',23:"General",24:"General",25:"General",26:"General",27:"m/d/yy",28:"m/d/yy",29:"m/d/yy",30:"m/d/yy",31:"m/d/yy",32:"h:mm:ss",33:"h:mm:ss",34:"h:mm:ss",35:"h:mm:ss",36:"m/d/yy",41:'_(* #,##0_);_(* (#,##0);_(* "-"_);_(@_)',42:'_("$"* #,##0_);_("$"* (#,##0);_("$"* "-"_);_(@_)',43:'_(* #,##0.00_);_(* (#,##0.00);_(* "-"??_);_(@_)',44:'_("$"* #,##0.00_);_("$"* (#,##0.00);_("$"* "-"??_);_(@_)',50:"m/d/yy",51:"m/d/yy",52:"m/d/yy",53:"m/d/yy",54:"m/d/yy",55:"m/d/yy",56:"m/d/yy",57:"m/d/yy",58:"m/d/yy",59:"0",60:"0.00",61:"#,##0",62:"#,##0.00",63:'"$"#,##0_);\\("$"#,##0\\)',64:'"$"#,##0_);[Red]\\("$"#,##0\\)',65:'"$"#,##0.00_);\\("$"#,##0.00\\)',66:'"$"#,##0.00_);[Red]\\("$"#,##0.00\\)',67:"0%",68:"0.00%",69:"# ?/?",70:"# ??/??",71:"m/d/yy",72:"m/d/yy",73:"d-mmm-yy",74:"d-mmm",75:"mmm-yy",76:"h:mm",77:"h:mm:ss",78:"m/d/yy h:mm",79:"mm:ss",80:"[h]:mm:ss",81:"mmss.0"},xne=/[dD]+|[mM]+|[yYeE]+|[Hh]+|[Ss]+/g;function c3e(t){var e=typeof t=="number"?Tn[t]:t;return e=e.replace(xne,"(\\d+)"),new RegExp("^"+e+"$")}function u3e(t,e,r){var n=-1,a=-1,s=-1,o=-1,l=-1,c=-1;(e.match(xne)||[]).forEach(function(f,A){var h=parseInt(r[A+1],10);switch(f.toLowerCase().charAt(0)){case"y":n=h;break;case"d":s=h;break;case"h":o=h;break;case"s":c=h;break;case"m":o>=0?l=h:a=h;break}}),c>=0&&l==-1&&a>=0&&(l=a,a=-1);var u=(""+(n>=0?n:new Date().getFullYear())).slice(-4)+"-"+("00"+(a>=1?a:1)).slice(-2)+"-"+("00"+(s>=1?s:1)).slice(-2);u.length==7&&(u="0"+u),u.length==8&&(u="20"+u);var d=("00"+(o>=0?o:0)).slice(-2)+":"+("00"+(l>=0?l:0)).slice(-2)+":"+("00"+(c>=0?c:0)).slice(-2);return o==-1&&l==-1&&c==-1?u:n==-1&&a==-1&&s==-1?d:u+"T"+d}var d3e=function(){var t={};t.version="1.2.0";function e(){for(var _=0,S=new Array(256),E=0;E!=256;++E)_=E,_=_&1?-306674912^_>>>1:_>>>1,_=_&1?-306674912^_>>>1:_>>>1,_=_&1?-306674912^_>>>1:_>>>1,_=_&1?-306674912^_>>>1:_>>>1,_=_&1?-306674912^_>>>1:_>>>1,_=_&1?-306674912^_>>>1:_>>>1,_=_&1?-306674912^_>>>1:_>>>1,_=_&1?-306674912^_>>>1:_>>>1,S[E]=_;return typeof Int32Array<"u"?new Int32Array(S):S}var r=e();function n(_){var S=0,E=0,T=0,k=typeof Int32Array<"u"?new Int32Array(4096):new Array(4096);for(T=0;T!=256;++T)k[T]=_[T];for(T=0;T!=256;++T)for(E=_[T],S=256+T;S<4096;S+=256)E=k[S]=E>>>8^_[E&255];var B=[];for(T=1;T!=16;++T)B[T-1]=typeof Int32Array<"u"?k.subarray(T*256,T*256+256):k.slice(T*256,T*256+256);return B}var a=n(r),s=a[0],o=a[1],l=a[2],c=a[3],u=a[4],d=a[5],f=a[6],A=a[7],h=a[8],m=a[9],p=a[10],x=a[11],v=a[12],y=a[13],b=a[14];function w(_,S){for(var E=S^-1,T=0,k=_.length;T<k;)E=E>>>8^r[(E^_.charCodeAt(T++))&255];return~E}function j(_,S){for(var E=S^-1,T=_.length-15,k=0;k<T;)E=b[_[k++]^E&255]^y[_[k++]^E>>8&255]^v[_[k++]^E>>16&255]^x[_[k++]^E>>>24]^p[_[k++]]^m[_[k++]]^h[_[k++]]^A[_[k++]]^f[_[k++]]^d[_[k++]]^u[_[k++]]^c[_[k++]]^l[_[k++]]^o[_[k++]]^s[_[k++]]^r[_[k++]];for(T+=15;k<T;)E=E>>>8^r[(E^_[k++])&255];return~E}function I(_,S){for(var E=S^-1,T=0,k=_.length,B=0,D=0;T<k;)B=_.charCodeAt(T++),B<128?E=E>>>8^r[(E^B)&255]:B<2048?(E=E>>>8^r[(E^(192|B>>6&31))&255],E=E>>>8^r[(E^(128|B&63))&255]):B>=55296&&B<57344?(B=(B&1023)+64,D=_.charCodeAt(T++)&1023,E=E>>>8^r[(E^(240|B>>8&7))&255],E=E>>>8^r[(E^(128|B>>2&63))&255],E=E>>>8^r[(E^(128|D>>6&15|(B&3)<<4))&255],E=E>>>8^r[(E^(128|D&63))&255]):(E=E>>>8^r[(E^(224|B>>12&15))&255],E=E>>>8^r[(E^(128|B>>6&63))&255],E=E>>>8^r[(E^(128|B&63))&255]);return~E}return t.table=r,t.bstr=w,t.buf=j,t.str=I,t}(),_n=function(){var e={};e.version="1.2.1";function r(P,R){for(var L=P.split("/"),K=R.split("/"),re=0,de=0,Ge=Math.min(L.length,K.length);re<Ge;++re){if(de=L[re].length-K[re].length)return de;if(L[re]!=K[re])return L[re]<K[re]?-1:1}return L.length-K.length}function n(P){if(P.charAt(P.length-1)=="/")return P.slice(0,-1).indexOf("/")===-1?P:n(P.slice(0,-1));var R=P.lastIndexOf("/");return R===-1?P:P.slice(0,R+1)}function a(P){if(P.charAt(P.length-1)=="/")return a(P.slice(0,-1));var R=P.lastIndexOf("/");return R===-1?P:P.slice(R+1)}function s(P,R){typeof R=="string"&&(R=new Date(R));var L=R.getHours();L=L<<6|R.getMinutes(),L=L<<5|R.getSeconds()>>>1,P.write_shift(2,L);var K=R.getFullYear()-1980;K=K<<4|R.getMonth()+1,K=K<<5|R.getDate(),P.write_shift(2,K)}function o(P){var R=P.read_shift(2)&65535,L=P.read_shift(2)&65535,K=new Date,re=L&31;L>>>=5;var de=L&15;L>>>=4,K.setMilliseconds(0),K.setFullYear(L+1980),K.setMonth(de-1),K.setDate(re);var Ge=R&31;R>>>=5;var rt=R&63;return R>>>=6,K.setHours(R),K.setMinutes(rt),K.setSeconds(Ge<<1),K}function l(P){Cl(P,0);for(var R={},L=0;P.l<=P.length-4;){var K=P.read_shift(2),re=P.read_shift(2),de=P.l+re,Ge={};switch(K){case 21589:L=P.read_shift(1),L&1&&(Ge.mtime=P.read_shift(4)),re>5&&(L&2&&(Ge.atime=P.read_shift(4)),L&4&&(Ge.ctime=P.read_shift(4))),Ge.mtime&&(Ge.mt=new Date(Ge.mtime*1e3));break}P.l=de,R[K]=Ge}return R}var c;function u(){return c||(c={})}function d(P,R){if(P[0]==80&&P[1]==75)return Re(P,R);if((P[0]|32)==109&&(P[1]|32)==105)return Ee(P,R);if(P.length<512)throw new Error("CFB file size "+P.length+" < 512");var L=3,K=512,re=0,de=0,Ge=0,rt=0,ft=0,et=[],ut=P.slice(0,512);Cl(ut,0);var Ot=f(ut);switch(L=Ot[0],L){case 3:K=512;break;case 4:K=4096;break;case 0:if(Ot[1]==0)return Re(P,R);default:throw new Error("Major Version: Expected 3 or 4 saw "+L)}K!==512&&(ut=P.slice(0,K),Cl(ut,28));var zt=P.slice(0,K);A(ut,L);var Bt=ut.read_shift(4,"i");if(L===3&&Bt!==0)throw new Error("# Directory Sectors: Expected 0 saw "+Bt);ut.l+=4,Ge=ut.read_shift(4,"i"),ut.l+=4,ut.chk("00100000","Mini Stream Cutoff Size: "),rt=ut.read_shift(4,"i"),re=ut.read_shift(4,"i"),ft=ut.read_shift(4,"i"),de=ut.read_shift(4,"i");for(var Lt=-1,Be=0;Be<109&&(Lt=ut.read_shift(4,"i"),!(Lt<0));++Be)et[Be]=Lt;var vt=h(P,K);x(ft,de,vt,K,et);var hr=y(vt,Ge,et,K);hr[Ge].name="!Directory",re>0&&rt!==D&&(hr[rt].name="!MiniFAT"),hr[et[0]].name="!FAT",hr.fat_addrs=et,hr.ssz=K;var xr={},Nr=[],gr=[],_r=[];b(Ge,hr,vt,Nr,re,xr,gr,rt),m(gr,_r,Nr),Nr.shift();var Zr={FileIndex:gr,FullPaths:_r};return R&&R.raw&&(Zr.raw={header:zt,sectors:vt}),Zr}function f(P){if(P[P.l]==80&&P[P.l+1]==75)return[0,0];P.chk(X,"Header Signature: "),P.l+=16;var R=P.read_shift(2,"u");return[P.read_shift(2,"u"),R]}function A(P,R){var L=9;switch(P.l+=2,L=P.read_shift(2)){case 9:if(R!=3)throw new Error("Sector Shift: Expected 9 saw "+L);break;case 12:if(R!=4)throw new Error("Sector Shift: Expected 12 saw "+L);break;default:throw new Error("Sector Shift: Expected 9 or 12 saw "+L)}P.chk("0600","Mini Sector Shift: "),P.chk("000000000000","Reserved: ")}function h(P,R){for(var L=Math.ceil(P.length/R)-1,K=[],re=1;re<L;++re)K[re-1]=P.slice(re*R,(re+1)*R);return K[L-1]=P.slice(L*R),K}function m(P,R,L){for(var K=0,re=0,de=0,Ge=0,rt=0,ft=L.length,et=[],ut=[];K<ft;++K)et[K]=ut[K]=K,R[K]=L[K];for(;rt<ut.length;++rt)K=ut[rt],re=P[K].L,de=P[K].R,Ge=P[K].C,et[K]===K&&(re!==-1&&et[re]!==re&&(et[K]=et[re]),de!==-1&&et[de]!==de&&(et[K]=et[de])),Ge!==-1&&(et[Ge]=K),re!==-1&&K!=et[K]&&(et[re]=et[K],ut.lastIndexOf(re)<rt&&ut.push(re)),de!==-1&&K!=et[K]&&(et[de]=et[K],ut.lastIndexOf(de)<rt&&ut.push(de));for(K=1;K<ft;++K)et[K]===K&&(de!==-1&&et[de]!==de?et[K]=et[de]:re!==-1&&et[re]!==re&&(et[K]=et[re]));for(K=1;K<ft;++K)if(P[K].type!==0){if(rt=K,rt!=et[rt])do rt=et[rt],R[K]=R[rt]+"/"+R[K];while(rt!==0&&et[rt]!==-1&&rt!=et[rt]);et[K]=-1}for(R[0]+="/",K=1;K<ft;++K)P[K].type!==2&&(R[K]+="/")}function p(P,R,L){for(var K=P.start,re=P.size,de=[],Ge=K;L&&re>0&&Ge>=0;)de.push(R.slice(Ge*B,Ge*B+B)),re-=B,Ge=xp(L,Ge*4);return de.length===0?nr(0):Xo(de).slice(0,P.size)}function x(P,R,L,K,re){var de=D;if(P===D){if(R!==0)throw new Error("DIFAT chain shorter than expected")}else if(P!==-1){var Ge=L[P],rt=(K>>>2)-1;if(!Ge)return;for(var ft=0;ft<rt&&(de=xp(Ge,ft*4))!==D;++ft)re.push(de);x(xp(Ge,K-4),R-1,L,K,re)}}function v(P,R,L,K,re){var de=[],Ge=[];re||(re=[]);var rt=K-1,ft=0,et=0;for(ft=R;ft>=0;){re[ft]=!0,de[de.length]=ft,Ge.push(P[ft]);var ut=L[Math.floor(ft*4/K)];if(et=ft*4&rt,K<4+et)throw new Error("FAT boundary crossed: "+ft+" 4 "+K);if(!P[ut])break;ft=xp(P[ut],et)}return{nodes:de,data:EH([Ge])}}function y(P,R,L,K){var re=P.length,de=[],Ge=[],rt=[],ft=[],et=K-1,ut=0,Ot=0,zt=0,Bt=0;for(ut=0;ut<re;++ut)if(rt=[],zt=ut+R,zt>=re&&(zt-=re),!Ge[zt]){ft=[];var Lt=[];for(Ot=zt;Ot>=0;){Lt[Ot]=!0,Ge[Ot]=!0,rt[rt.length]=Ot,ft.push(P[Ot]);var Be=L[Math.floor(Ot*4/K)];if(Bt=Ot*4&et,K<4+Bt)throw new Error("FAT boundary crossed: "+Ot+" 4 "+K);if(!P[Be]||(Ot=xp(P[Be],Bt),Lt[Ot]))break}de[zt]={nodes:rt,data:EH([ft])}}return de}function b(P,R,L,K,re,de,Ge,rt){for(var ft=0,et=K.length?2:0,ut=R[P].data,Ot=0,zt=0,Bt;Ot<ut.length;Ot+=128){var Lt=ut.slice(Ot,Ot+128);Cl(Lt,64),zt=Lt.read_shift(2),Bt=sR(Lt,0,zt-et),K.push(Bt);var Be={name:Bt,type:Lt.read_shift(1),color:Lt.read_shift(1),L:Lt.read_shift(4,"i"),R:Lt.read_shift(4,"i"),C:Lt.read_shift(4,"i"),clsid:Lt.read_shift(16),state:Lt.read_shift(4,"i"),start:0,size:0},vt=Lt.read_shift(2)+Lt.read_shift(2)+Lt.read_shift(2)+Lt.read_shift(2);vt!==0&&(Be.ct=w(Lt,Lt.l-8));var hr=Lt.read_shift(2)+Lt.read_shift(2)+Lt.read_shift(2)+Lt.read_shift(2);hr!==0&&(Be.mt=w(Lt,Lt.l-8)),Be.start=Lt.read_shift(4,"i"),Be.size=Lt.read_shift(4,"i"),Be.size<0&&Be.start<0&&(Be.size=Be.type=0,Be.start=D,Be.name=""),Be.type===5?(ft=Be.start,re>0&&ft!==D&&(R[ft].name="!StreamData")):Be.size>=4096?(Be.storage="fat",R[Be.start]===void 0&&(R[Be.start]=v(L,Be.start,R.fat_addrs,R.ssz)),R[Be.start].name=Be.name,Be.content=R[Be.start].data.slice(0,Be.size)):(Be.storage="minifat",Be.size<0?Be.size=0:ft!==D&&Be.start!==D&&R[ft]&&(Be.content=p(Be,R[ft].data,(R[rt]||{}).data))),Be.content&&Cl(Be.content,0),de[Bt]=Be,Ge.push(Be)}}function w(P,R){return new Date((ju(P,R+4)/1e7*Math.pow(2,32)+ju(P,R)/1e7-11644473600)*1e3)}function j(P,R){return u(),d(c.readFileSync(P),R)}function I(P,R){var L=R&&R.type;switch(L||ea&&Buffer.isBuffer(P)&&(L="buffer"),L||"base64"){case"file":return j(P,R);case"base64":return d(Pu(Hu(P)),R);case"binary":return d(Pu(P),R)}return d(P,R)}function _(P,R){var L=R||{},K=L.root||"Root Entry";if(P.FullPaths||(P.FullPaths=[]),P.FileIndex||(P.FileIndex=[]),P.FullPaths.length!==P.FileIndex.length)throw new Error("inconsistent CFB structure");P.FullPaths.length===0&&(P.FullPaths[0]=K+"/",P.FileIndex[0]={name:K,type:5}),L.CLSID&&(P.FileIndex[0].clsid=L.CLSID),S(P)}function S(P){var R="Sh33tJ5";if(!_n.find(P,"/"+R)){var L=nr(4);L[0]=55,L[1]=L[3]=50,L[2]=54,P.FileIndex.push({name:R,type:2,content:L,size:4,L:69,R:69,C:69}),P.FullPaths.push(P.FullPaths[0]+R),E(P)}}function E(P,R){_(P);for(var L=!1,K=!1,re=P.FullPaths.length-1;re>=0;--re){var de=P.FileIndex[re];switch(de.type){case 0:K?L=!0:(P.FileIndex.pop(),P.FullPaths.pop());break;case 1:case 2:case 5:K=!0,isNaN(de.R*de.L*de.C)&&(L=!0),de.R>-1&&de.L>-1&&de.R==de.L&&(L=!0);break;default:L=!0;break}}if(!(!L&&!R)){var Ge=new Date(1987,1,19),rt=0,ft=Object.create?Object.create(null):{},et=[];for(re=0;re<P.FullPaths.length;++re)ft[P.FullPaths[re]]=!0,P.FileIndex[re].type!==0&&et.push([P.FullPaths[re],P.FileIndex[re]]);for(re=0;re<et.length;++re){var ut=n(et[re][0]);K=ft[ut],K||(et.push([ut,{name:a(ut).replace("/",""),type:1,clsid:pe,ct:Ge,mt:Ge,content:null}]),ft[ut]=!0)}for(et.sort(function(Bt,Lt){return r(Bt[0],Lt[0])}),P.FullPaths=[],P.FileIndex=[],re=0;re<et.length;++re)P.FullPaths[re]=et[re][0],P.FileIndex[re]=et[re][1];for(re=0;re<et.length;++re){var Ot=P.FileIndex[re],zt=P.FullPaths[re];if(Ot.name=a(zt).replace("/",""),Ot.L=Ot.R=Ot.C=-(Ot.color=1),Ot.size=Ot.content?Ot.content.length:0,Ot.start=0,Ot.clsid=Ot.clsid||pe,re===0)Ot.C=et.length>1?1:-1,Ot.size=0,Ot.type=5;else if(zt.slice(-1)=="/"){for(rt=re+1;rt<et.length&&n(P.FullPaths[rt])!=zt;++rt);for(Ot.C=rt>=et.length?-1:rt,rt=re+1;rt<et.length&&n(P.FullPaths[rt])!=n(zt);++rt);Ot.R=rt>=et.length?-1:rt,Ot.type=1}else n(P.FullPaths[re+1]||"")==n(zt)&&(Ot.R=re+1),Ot.type=2}}}function T(P,R){var L=R||{};if(L.fileType=="mad")return we(P,L);switch(E(P),L.fileType){case"zip":return Ne(P,L)}var K=function(Bt){for(var Lt=0,Be=0,vt=0;vt<Bt.FileIndex.length;++vt){var hr=Bt.FileIndex[vt];if(hr.content){var xr=hr.content.length;xr>0&&(xr<4096?Lt+=xr+63>>6:Be+=xr+511>>9)}}for(var Nr=Bt.FullPaths.length+3>>2,gr=Lt+7>>3,_r=Lt+127>>7,Zr=gr+Be+Nr+_r,Nn=Zr+127>>7,en=Nn<=109?0:Math.ceil((Nn-109)/127);Zr+Nn+en+127>>7>Nn;)en=++Nn<=109?0:Math.ceil((Nn-109)/127);var Qr=[1,en,Nn,_r,Nr,Be,Lt,0];return Bt.FileIndex[0].size=Lt<<6,Qr[7]=(Bt.FileIndex[0].start=Qr[0]+Qr[1]+Qr[2]+Qr[3]+Qr[4]+Qr[5])+(Qr[6]+7>>3),Qr}(P),re=nr(K[7]<<9),de=0,Ge=0;{for(de=0;de<8;++de)re.write_shift(1,me[de]);for(de=0;de<8;++de)re.write_shift(2,0);for(re.write_shift(2,62),re.write_shift(2,3),re.write_shift(2,65534),re.write_shift(2,9),re.write_shift(2,6),de=0;de<3;++de)re.write_shift(2,0);for(re.write_shift(4,0),re.write_shift(4,K[2]),re.write_shift(4,K[0]+K[1]+K[2]+K[3]-1),re.write_shift(4,0),re.write_shift(4,4096),re.write_shift(4,K[3]?K[0]+K[1]+K[2]-1:D),re.write_shift(4,K[3]),re.write_shift(-4,K[1]?K[0]-1:D),re.write_shift(4,K[1]),de=0;de<109;++de)re.write_shift(-4,de<K[2]?K[1]+de:-1)}if(K[1])for(Ge=0;Ge<K[1];++Ge){for(;de<236+Ge*127;++de)re.write_shift(-4,de<K[2]?K[1]+de:-1);re.write_shift(-4,Ge===K[1]-1?D:Ge+1)}var rt=function(Bt){for(Ge+=Bt;de<Ge-1;++de)re.write_shift(-4,de+1);Bt&&(++de,re.write_shift(-4,D))};for(Ge=de=0,Ge+=K[1];de<Ge;++de)re.write_shift(-4,he.DIFSECT);for(Ge+=K[2];de<Ge;++de)re.write_shift(-4,he.FATSECT);rt(K[3]),rt(K[4]);for(var ft=0,et=0,ut=P.FileIndex[0];ft<P.FileIndex.length;++ft)ut=P.FileIndex[ft],ut.content&&(et=ut.content.length,!(et<4096)&&(ut.start=Ge,rt(et+511>>9)));for(rt(K[6]+7>>3);re.l&511;)re.write_shift(-4,he.ENDOFCHAIN);for(Ge=de=0,ft=0;ft<P.FileIndex.length;++ft)ut=P.FileIndex[ft],ut.content&&(et=ut.content.length,!(!et||et>=4096)&&(ut.start=Ge,rt(et+63>>6)));for(;re.l&511;)re.write_shift(-4,he.ENDOFCHAIN);for(de=0;de<K[4]<<2;++de){var Ot=P.FullPaths[de];if(!Ot||Ot.length===0){for(ft=0;ft<17;++ft)re.write_shift(4,0);for(ft=0;ft<3;++ft)re.write_shift(4,-1);for(ft=0;ft<12;++ft)re.write_shift(4,0);continue}ut=P.FileIndex[de],de===0&&(ut.start=ut.size?ut.start-1:D);var zt=de===0&&L.root||ut.name;if(et=2*(zt.length+1),re.write_shift(64,zt,"utf16le"),re.write_shift(2,et),re.write_shift(1,ut.type),re.write_shift(1,ut.color),re.write_shift(-4,ut.L),re.write_shift(-4,ut.R),re.write_shift(-4,ut.C),ut.clsid)re.write_shift(16,ut.clsid,"hex");else for(ft=0;ft<4;++ft)re.write_shift(4,0);re.write_shift(4,ut.state||0),re.write_shift(4,0),re.write_shift(4,0),re.write_shift(4,0),re.write_shift(4,0),re.write_shift(4,ut.start),re.write_shift(4,ut.size),re.write_shift(4,0)}for(de=1;de<P.FileIndex.length;++de)if(ut=P.FileIndex[de],ut.size>=4096)if(re.l=ut.start+1<<9,ea&&Buffer.isBuffer(ut.content))ut.content.copy(re,re.l,0,ut.size),re.l+=ut.size+511&-512;else{for(ft=0;ft<ut.size;++ft)re.write_shift(1,ut.content[ft]);for(;ft&511;++ft)re.write_shift(1,0)}for(de=1;de<P.FileIndex.length;++de)if(ut=P.FileIndex[de],ut.size>0&&ut.size<4096)if(ea&&Buffer.isBuffer(ut.content))ut.content.copy(re,re.l,0,ut.size),re.l+=ut.size+63&-64;else{for(ft=0;ft<ut.size;++ft)re.write_shift(1,ut.content[ft]);for(;ft&63;++ft)re.write_shift(1,0)}if(ea)re.l=re.length;else for(;re.l<re.length;)re.write_shift(1,0);return re}function k(P,R){var L=P.FullPaths.map(function(ft){return ft.toUpperCase()}),K=L.map(function(ft){var et=ft.split("/");return et[et.length-(ft.slice(-1)=="/"?2:1)]}),re=!1;R.charCodeAt(0)===47?(re=!0,R=L[0].slice(0,-1)+R):re=R.indexOf("/")!==-1;var de=R.toUpperCase(),Ge=re===!0?L.indexOf(de):K.indexOf(de);if(Ge!==-1)return P.FileIndex[Ge];var rt=!de.match(Wy);for(de=de.replace(jc,""),rt&&(de=de.replace(Wy,"!")),Ge=0;Ge<L.length;++Ge)if((rt?L[Ge].replace(Wy,"!"):L[Ge]).replace(jc,"")==de||(rt?K[Ge].replace(Wy,"!"):K[Ge]).replace(jc,"")==de)return P.FileIndex[Ge];return null}var B=64,D=-2,X="d0cf11e0a1b11ae1",me=[208,207,17,224,161,177,26,225],pe="00000000000000000000000000000000",he={MAXREGSECT:-6,DIFSECT:-4,FATSECT:-3,ENDOFCHAIN:D,FREESECT:-1,HEADER_SIGNATURE:X,HEADER_MINOR_VERSION:"3e00",MAXREGSID:-6,NOSTREAM:-1,HEADER_CLSID:pe,EntryTypes:["unknown","storage","stream","lockbytes","property","root"]};function ve(P,R,L){u();var K=T(P,L);c.writeFileSync(R,K)}function ae(P){for(var R=new Array(P.length),L=0;L<P.length;++L)R[L]=String.fromCharCode(P[L]);return R.join("")}function Pe(P,R){var L=T(P,R);switch(R&&R.type||"buffer"){case"file":return u(),c.writeFileSync(R.filename,L),L;case"binary":return typeof L=="string"?L:ae(L);case"base64":return P2(typeof L=="string"?L:ae(L));case"buffer":if(ea)return Buffer.isBuffer(L)?L:OA(L);case"array":return typeof L=="string"?Pu(L):L}return L}var ke;function O(P){try{var R=P.InflateRaw,L=new R;if(L._processChunk(new Uint8Array([3,0]),L._finishFlushFlag),L.bytesRead)ke=P;else throw new Error("zlib does not expose bytesRead")}catch(K){console.error("cannot use native zlib: "+(K.message||K))}}function G(P,R){if(!ke)return xe(P,R);var L=ke.InflateRaw,K=new L,re=K._processChunk(P.slice(P.l),K._finishFlushFlag);return P.l+=K.bytesRead,re}function z(P){return ke?ke.deflateRawSync(P):ge(P)}var U=[16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15],Y=[3,4,5,6,7,8,9,10,11,13,15,17,19,23,27,31,35,43,51,59,67,83,99,115,131,163,195,227,258],ee=[1,2,3,4,5,7,9,13,17,25,33,49,65,97,129,193,257,385,513,769,1025,1537,2049,3073,4097,6145,8193,12289,16385,24577];function M(P){var R=(P<<1|P<<11)&139536|(P<<5|P<<15)&558144;return(R>>16|R>>8|R)&255}for(var H=typeof Uint8Array<"u",te=H?new Uint8Array(256):[],Ce=0;Ce<256;++Ce)te[Ce]=M(Ce);function V(P,R){var L=te[P&255];return R<=8?L>>>8-R:(L=L<<8|te[P>>8&255],R<=16?L>>>16-R:(L=L<<8|te[P>>16&255],L>>>24-R))}function We(P,R){var L=R&7,K=R>>>3;return(P[K]|(L<=6?0:P[K+1]<<8))>>>L&3}function ie(P,R){var L=R&7,K=R>>>3;return(P[K]|(L<=5?0:P[K+1]<<8))>>>L&7}function J(P,R){var L=R&7,K=R>>>3;return(P[K]|(L<=4?0:P[K+1]<<8))>>>L&15}function Oe(P,R){var L=R&7,K=R>>>3;return(P[K]|(L<=3?0:P[K+1]<<8))>>>L&31}function fe(P,R){var L=R&7,K=R>>>3;return(P[K]|(L<=1?0:P[K+1]<<8))>>>L&127}function _e(P,R,L){var K=R&7,re=R>>>3,de=(1<<L)-1,Ge=P[re]>>>K;return L<8-K||(Ge|=P[re+1]<<8-K,L<16-K)||(Ge|=P[re+2]<<16-K,L<24-K)||(Ge|=P[re+3]<<24-K),Ge&de}function Ue(P,R,L){var K=R&7,re=R>>>3;return K<=5?P[re]|=(L&7)<<K:(P[re]|=L<<K&255,P[re+1]=(L&7)>>8-K),R+3}function Ye(P,R,L){var K=R&7,re=R>>>3;return L=(L&1)<<K,P[re]|=L,R+1}function At(P,R,L){var K=R&7,re=R>>>3;return L<<=K,P[re]|=L&255,L>>>=8,P[re+1]=L,R+8}function yt(P,R,L){var K=R&7,re=R>>>3;return L<<=K,P[re]|=L&255,L>>>=8,P[re+1]=L&255,P[re+2]=L>>>8,R+16}function bt(P,R){var L=P.length,K=2*L>R?2*L:R+5,re=0;if(L>=R)return P;if(ea){var de=oH(K);if(P.copy)P.copy(de);else for(;re<P.length;++re)de[re]=P[re];return de}else if(H){var Ge=new Uint8Array(K);if(Ge.set)Ge.set(P);else for(;re<L;++re)Ge[re]=P[re];return Ge}return P.length=K,P}function Nt(P){for(var R=new Array(P),L=0;L<P;++L)R[L]=0;return R}function jt(P,R,L){var K=1,re=0,de=0,Ge=0,rt=0,ft=P.length,et=H?new Uint16Array(32):Nt(32);for(de=0;de<32;++de)et[de]=0;for(de=ft;de<L;++de)P[de]=0;ft=P.length;var ut=H?new Uint16Array(ft):Nt(ft);for(de=0;de<ft;++de)et[re=P[de]]++,K<re&&(K=re),ut[de]=0;for(et[0]=0,de=1;de<=K;++de)et[de+16]=rt=rt+et[de-1]<<1;for(de=0;de<ft;++de)rt=P[de],rt!=0&&(ut[de]=et[rt+16]++);var Ot=0;for(de=0;de<ft;++de)if(Ot=P[de],Ot!=0)for(rt=V(ut[de],K)>>K-Ot,Ge=(1<<K+4-Ot)-1;Ge>=0;--Ge)R[rt|Ge<<Ot]=Ot&15|de<<4;return K}var St=H?new Uint16Array(512):Nt(512),Ve=H?new Uint16Array(32):Nt(32);if(!H){for(var Te=0;Te<512;++Te)St[Te]=0;for(Te=0;Te<32;++Te)Ve[Te]=0}(function(){for(var P=[],R=0;R<32;R++)P.push(5);jt(P,Ve,32);var L=[];for(R=0;R<=143;R++)L.push(8);for(;R<=255;R++)L.push(9);for(;R<=279;R++)L.push(7);for(;R<=287;R++)L.push(8);jt(L,St,288)})();var qe=function(){for(var R=H?new Uint8Array(32768):[],L=0,K=0;L<ee.length-1;++L)for(;K<ee[L+1];++K)R[K]=L;for(;K<32768;++K)R[K]=29;var re=H?new Uint8Array(259):[];for(L=0,K=0;L<Y.length-1;++L)for(;K<Y[L+1];++K)re[K]=L;function de(rt,ft){for(var et=0;et<rt.length;){var ut=Math.min(65535,rt.length-et),Ot=et+ut==rt.length;for(ft.write_shift(1,+Ot),ft.write_shift(2,ut),ft.write_shift(2,~ut&65535);ut-- >0;)ft[ft.l++]=rt[et++]}return ft.l}function Ge(rt,ft){for(var et=0,ut=0,Ot=H?new Uint16Array(32768):[];ut<rt.length;){var zt=Math.min(65535,rt.length-ut);if(zt<10){for(et=Ue(ft,et,+(ut+zt==rt.length)),et&7&&(et+=8-(et&7)),ft.l=et/8|0,ft.write_shift(2,zt),ft.write_shift(2,~zt&65535);zt-- >0;)ft[ft.l++]=rt[ut++];et=ft.l*8;continue}et=Ue(ft,et,+(ut+zt==rt.length)+2);for(var Bt=0;zt-- >0;){var Lt=rt[ut];Bt=(Bt<<5^Lt)&32767;var Be=-1,vt=0;if((Be=Ot[Bt])&&(Be|=ut&-32768,Be>ut&&(Be-=32768),Be<ut))for(;rt[Be+vt]==rt[ut+vt]&&vt<250;)++vt;if(vt>2){Lt=re[vt],Lt<=22?et=At(ft,et,te[Lt+1]>>1)-1:(At(ft,et,3),et+=5,At(ft,et,te[Lt-23]>>5),et+=3);var hr=Lt<8?0:Lt-4>>2;hr>0&&(yt(ft,et,vt-Y[Lt]),et+=hr),Lt=R[ut-Be],et=At(ft,et,te[Lt]>>3),et-=3;var xr=Lt<4?0:Lt-2>>1;xr>0&&(yt(ft,et,ut-Be-ee[Lt]),et+=xr);for(var Nr=0;Nr<vt;++Nr)Ot[Bt]=ut&32767,Bt=(Bt<<5^rt[ut])&32767,++ut;zt-=vt-1}else Lt<=143?Lt=Lt+48:et=Ye(ft,et,1),et=At(ft,et,te[Lt]),Ot[Bt]=ut&32767,++ut}et=At(ft,et,0)-1}return ft.l=(et+7)/8|0,ft.l}return function(ft,et){return ft.length<8?de(ft,et):Ge(ft,et)}}();function ge(P){var R=nr(50+Math.floor(P.length*1.1)),L=qe(P,R);return R.slice(0,L)}var q=H?new Uint16Array(32768):Nt(32768),se=H?new Uint16Array(32768):Nt(32768),ye=H?new Uint16Array(128):Nt(128),ue=1,Le=1;function ct(P,R){var L=Oe(P,R)+257;R+=5;var K=Oe(P,R)+1;R+=5;var re=J(P,R)+4;R+=4;for(var de=0,Ge=H?new Uint8Array(19):Nt(19),rt=[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],ft=1,et=H?new Uint8Array(8):Nt(8),ut=H?new Uint8Array(8):Nt(8),Ot=Ge.length,zt=0;zt<re;++zt)Ge[U[zt]]=de=ie(P,R),ft<de&&(ft=de),et[de]++,R+=3;var Bt=0;for(et[0]=0,zt=1;zt<=ft;++zt)ut[zt]=Bt=Bt+et[zt-1]<<1;for(zt=0;zt<Ot;++zt)(Bt=Ge[zt])!=0&&(rt[zt]=ut[Bt]++);var Lt=0;for(zt=0;zt<Ot;++zt)if(Lt=Ge[zt],Lt!=0){Bt=te[rt[zt]]>>8-Lt;for(var Be=(1<<7-Lt)-1;Be>=0;--Be)ye[Bt|Be<<Lt]=Lt&7|zt<<3}var vt=[];for(ft=1;vt.length<L+K;)switch(Bt=ye[fe(P,R)],R+=Bt&7,Bt>>>=3){case 16:for(de=3+We(P,R),R+=2,Bt=vt[vt.length-1];de-- >0;)vt.push(Bt);break;case 17:for(de=3+ie(P,R),R+=3;de-- >0;)vt.push(0);break;case 18:for(de=11+fe(P,R),R+=7;de-- >0;)vt.push(0);break;default:vt.push(Bt),ft<Bt&&(ft=Bt);break}var hr=vt.slice(0,L),xr=vt.slice(L);for(zt=L;zt<286;++zt)hr[zt]=0;for(zt=K;zt<30;++zt)xr[zt]=0;return ue=jt(hr,q,286),Le=jt(xr,se,30),R}function ht(P,R){if(P[0]==3&&!(P[1]&3))return[Em(R),2];for(var L=0,K=0,re=oH(R||1<<18),de=0,Ge=re.length>>>0,rt=0,ft=0;!(K&1);){if(K=ie(P,L),L+=3,K>>>1)K>>1==1?(rt=9,ft=5):(L=ct(P,L),rt=ue,ft=Le);else{L&7&&(L+=8-(L&7));var et=P[L>>>3]|P[(L>>>3)+1]<<8;if(L+=32,et>0)for(!R&&Ge<de+et&&(re=bt(re,de+et),Ge=re.length);et-- >0;)re[de++]=P[L>>>3],L+=8;continue}for(;;){!R&&Ge<de+32767&&(re=bt(re,de+32767),Ge=re.length);var ut=_e(P,L,rt),Ot=K>>>1==1?St[ut]:q[ut];if(L+=Ot&15,Ot>>>=4,!(Ot>>>8&255))re[de++]=Ot;else{if(Ot==256)break;Ot-=257;var zt=Ot<8?0:Ot-4>>2;zt>5&&(zt=0);var Bt=de+Y[Ot];zt>0&&(Bt+=_e(P,L,zt),L+=zt),ut=_e(P,L,ft),Ot=K>>>1==1?Ve[ut]:se[ut],L+=Ot&15,Ot>>>=4;var Lt=Ot<4?0:Ot-2>>1,Be=ee[Ot];for(Lt>0&&(Be+=_e(P,L,Lt),L+=Lt),!R&&Ge<Bt&&(re=bt(re,Bt+100),Ge=re.length);de<Bt;)re[de]=re[de-Be],++de}}}return R?[re,L+7>>>3]:[re.slice(0,de),L+7>>>3]}function xe(P,R){var L=P.slice(P.l||0),K=ht(L,R);return P.l+=K[1],K[0]}function Ae(P,R){if(P)typeof console<"u"&&console.error(R);else throw new Error(R)}function Re(P,R){var L=P;Cl(L,0);var K=[],re=[],de={FileIndex:K,FullPaths:re};_(de,{root:R.root});for(var Ge=L.length-4;(L[Ge]!=80||L[Ge+1]!=75||L[Ge+2]!=5||L[Ge+3]!=6)&&Ge>=0;)--Ge;L.l=Ge+4,L.l+=4;var rt=L.read_shift(2);L.l+=6;var ft=L.read_shift(4);for(L.l=ft,Ge=0;Ge<rt;++Ge){L.l+=20;var et=L.read_shift(4),ut=L.read_shift(4),Ot=L.read_shift(2),zt=L.read_shift(2),Bt=L.read_shift(2);L.l+=8;var Lt=L.read_shift(4),Be=l(L.slice(L.l+Ot,L.l+Ot+zt));L.l+=Ot+zt+Bt;var vt=L.l;L.l=Lt+4,lt(L,et,ut,de,Be),L.l=vt}return de}function lt(P,R,L,K,re){P.l+=2;var de=P.read_shift(2),Ge=P.read_shift(2),rt=o(P);if(de&8257)throw new Error("Unsupported ZIP encryption");for(var ft=P.read_shift(4),et=P.read_shift(4),ut=P.read_shift(4),Ot=P.read_shift(2),zt=P.read_shift(2),Bt="",Lt=0;Lt<Ot;++Lt)Bt+=String.fromCharCode(P[P.l++]);if(zt){var Be=l(P.slice(P.l,P.l+zt));(Be[21589]||{}).mt&&(rt=Be[21589].mt),((re||{})[21589]||{}).mt&&(rt=re[21589].mt)}P.l+=zt;var vt=P.slice(P.l,P.l+et);switch(Ge){case 8:vt=G(P,ut);break;case 0:break;default:throw new Error("Unsupported ZIP Compression method "+Ge)}var hr=!1;de&8&&(ft=P.read_shift(4),ft==134695760&&(ft=P.read_shift(4),hr=!0),et=P.read_shift(4),ut=P.read_shift(4)),et!=R&&Ae(hr,"Bad compressed size: "+R+" != "+et),ut!=L&&Ae(hr,"Bad uncompressed size: "+L+" != "+ut),Fe(K,Bt,vt,{unsafe:!0,mt:rt})}function Ne(P,R){var L=R||{},K=[],re=[],de=nr(1),Ge=L.compression?8:0,rt=0,ft=0,et=0,ut=0,Ot=0,zt=P.FullPaths[0],Bt=zt,Lt=P.FileIndex[0],Be=[],vt=0;for(ft=1;ft<P.FullPaths.length;++ft)if(Bt=P.FullPaths[ft].slice(zt.length),Lt=P.FileIndex[ft],!(!Lt.size||!Lt.content||Bt=="Sh33tJ5")){var hr=ut,xr=nr(Bt.length);for(et=0;et<Bt.length;++et)xr.write_shift(1,Bt.charCodeAt(et)&127);xr=xr.slice(0,xr.l),Be[Ot]=d3e.buf(Lt.content,0);var Nr=Lt.content;Ge==8&&(Nr=z(Nr)),de=nr(30),de.write_shift(4,67324752),de.write_shift(2,20),de.write_shift(2,rt),de.write_shift(2,Ge),Lt.mt?s(de,Lt.mt):de.write_shift(4,0),de.write_shift(-4,Be[Ot]),de.write_shift(4,Nr.length),de.write_shift(4,Lt.content.length),de.write_shift(2,xr.length),de.write_shift(2,0),ut+=de.length,K.push(de),ut+=xr.length,K.push(xr),ut+=Nr.length,K.push(Nr),de=nr(46),de.write_shift(4,33639248),de.write_shift(2,0),de.write_shift(2,20),de.write_shift(2,rt),de.write_shift(2,Ge),de.write_shift(4,0),de.write_shift(-4,Be[Ot]),de.write_shift(4,Nr.length),de.write_shift(4,Lt.content.length),de.write_shift(2,xr.length),de.write_shift(2,0),de.write_shift(2,0),de.write_shift(2,0),de.write_shift(2,0),de.write_shift(4,0),de.write_shift(4,hr),vt+=de.l,re.push(de),vt+=xr.length,re.push(xr),++Ot}return de=nr(22),de.write_shift(4,101010256),de.write_shift(2,0),de.write_shift(2,0),de.write_shift(2,Ot),de.write_shift(2,Ot),de.write_shift(4,vt),de.write_shift(4,ut),de.write_shift(2,0),Xo([Xo(K),Xo(re),de])}var De={htm:"text/html",xml:"text/xml",gif:"image/gif",jpg:"image/jpeg",png:"image/png",mso:"application/x-mso",thmx:"application/vnd.ms-officetheme",sh33tj5:"application/octet-stream"};function xt(P,R){if(P.ctype)return P.ctype;var L=P.name||"",K=L.match(/\.([^\.]+)$/);return K&&De[K[1]]||R&&(K=(L=R).match(/[\.\\]([^\.\\])+$/),K&&De[K[1]])?De[K[1]]:"application/octet-stream"}function _t(P){for(var R=P2(P),L=[],K=0;K<R.length;K+=76)L.push(R.slice(K,K+76));return L.join(`\r
`)+`\r
`}function Et(P){var R=P.replace(/[\x00-\x08\x0B\x0C\x0E-\x1F\x7E-\xFF=]/g,function(et){var ut=et.charCodeAt(0).toString(16).toUpperCase();return"="+(ut.length==1?"0"+ut:ut)});R=R.replace(/ $/mg,"=20").replace(/\t$/mg,"=09"),R.charAt(0)==`
`&&(R="=0D"+R.slice(1)),R=R.replace(/\r(?!\n)/mg,"=0D").replace(/\n\n/mg,`
=0A`).replace(/([^\r\n])\n/mg,"$1=0A");for(var L=[],K=R.split(`\r
`),re=0;re<K.length;++re){var de=K[re];if(de.length==0){L.push("");continue}for(var Ge=0;Ge<de.length;){var rt=76,ft=de.slice(Ge,Ge+rt);ft.charAt(rt-1)=="="?rt--:ft.charAt(rt-2)=="="?rt-=2:ft.charAt(rt-3)=="="&&(rt-=3),ft=de.slice(Ge,Ge+rt),Ge+=rt,Ge<de.length&&(ft+="="),L.push(ft)}}return L.join(`\r
`)}function Mt(P){for(var R=[],L=0;L<P.length;++L){for(var K=P[L];L<=P.length&&K.charAt(K.length-1)=="=";)K=K.slice(0,K.length-1)+P[++L];R.push(K)}for(var re=0;re<R.length;++re)R[re]=R[re].replace(/[=][0-9A-Fa-f]{2}/g,function(de){return String.fromCharCode(parseInt(de.slice(1),16))});return Pu(R.join(`\r
`))}function nt(P,R,L){for(var K="",re="",de="",Ge,rt=0;rt<10;++rt){var ft=R[rt];if(!ft||ft.match(/^\s*$/))break;var et=ft.match(/^(.*?):\s*([^\s].*)$/);if(et)switch(et[1].toLowerCase()){case"content-location":K=et[2].trim();break;case"content-type":de=et[2].trim();break;case"content-transfer-encoding":re=et[2].trim();break}}switch(++rt,re.toLowerCase()){case"base64":Ge=Pu(Hu(R.slice(rt).join("")));break;case"quoted-printable":Ge=Mt(R.slice(rt));break;default:throw new Error("Unsupported Content-Transfer-Encoding "+re)}var ut=Fe(P,K.slice(L.length),Ge,{unsafe:!0});de&&(ut.ctype=de)}function Ee(P,R){if(ae(P.slice(0,13)).toLowerCase()!="mime-version:")throw new Error("Unsupported MAD header");var L=R&&R.root||"",K=(ea&&Buffer.isBuffer(P)?P.toString("binary"):ae(P)).split(`\r
`),re=0,de="";for(re=0;re<K.length;++re)if(de=K[re],!!/^Content-Location:/i.test(de)&&(de=de.slice(de.indexOf("file")),L||(L=de.slice(0,de.lastIndexOf("/")+1)),de.slice(0,L.length)!=L))for(;L.length>0&&(L=L.slice(0,L.length-1),L=L.slice(0,L.lastIndexOf("/")+1),de.slice(0,L.length)!=L););var Ge=(K[1]||"").match(/boundary="(.*?)"/);if(!Ge)throw new Error("MAD cannot find boundary");var rt="--"+(Ge[1]||""),ft=[],et=[],ut={FileIndex:ft,FullPaths:et};_(ut);var Ot,zt=0;for(re=0;re<K.length;++re){var Bt=K[re];Bt!==rt&&Bt!==rt+"--"||(zt++&&nt(ut,K.slice(Ot,re),L),Ot=re)}return ut}function we(P,R){var L=R||{},K=L.boundary||"SheetJS";K="------="+K;for(var re=["MIME-Version: 1.0",'Content-Type: multipart/related; boundary="'+K.slice(2)+'"',"","",""],de=P.FullPaths[0],Ge=de,rt=P.FileIndex[0],ft=1;ft<P.FullPaths.length;++ft)if(Ge=P.FullPaths[ft].slice(de.length),rt=P.FileIndex[ft],!(!rt.size||!rt.content||Ge=="Sh33tJ5")){Ge=Ge.replace(/[\x00-\x08\x0B\x0C\x0E-\x1F\x7E-\xFF]/g,function(vt){return"_x"+vt.charCodeAt(0).toString(16)+"_"}).replace(/[\u0080-\uFFFF]/g,function(vt){return"_u"+vt.charCodeAt(0).toString(16)+"_"});for(var et=rt.content,ut=ea&&Buffer.isBuffer(et)?et.toString("binary"):ae(et),Ot=0,zt=Math.min(1024,ut.length),Bt=0,Lt=0;Lt<=zt;++Lt)(Bt=ut.charCodeAt(Lt))>=32&&Bt<128&&++Ot;var Be=Ot>=zt*4/5;re.push(K),re.push("Content-Location: "+(L.root||"file:///C:/SheetJS/")+Ge),re.push("Content-Transfer-Encoding: "+(Be?"quoted-printable":"base64")),re.push("Content-Type: "+xt(rt,Ge)),re.push(""),re.push(Be?Et(ut):_t(ut))}return re.push(K+`--\r
`),re.join(`\r
`)}function oe(P){var R={};return _(R,P),R}function Fe(P,R,L,K){var re=K&&K.unsafe;re||_(P);var de=!re&&_n.find(P,R);if(!de){var Ge=P.FullPaths[0];R.slice(0,Ge.length)==Ge?Ge=R:(Ge.slice(-1)!="/"&&(Ge+="/"),Ge=(Ge+R).replace("//","/")),de={name:a(R),type:2},P.FileIndex.push(de),P.FullPaths.push(Ge),re||_n.utils.cfb_gc(P)}return de.content=L,de.size=L?L.length:0,K&&(K.CLSID&&(de.clsid=K.CLSID),K.mt&&(de.mt=K.mt),K.ct&&(de.ct=K.ct)),de}function ce(P,R){_(P);var L=_n.find(P,R);if(L){for(var K=0;K<P.FileIndex.length;++K)if(P.FileIndex[K]==L)return P.FileIndex.splice(K,1),P.FullPaths.splice(K,1),!0}return!1}function Me(P,R,L){_(P);var K=_n.find(P,R);if(K){for(var re=0;re<P.FileIndex.length;++re)if(P.FileIndex[re]==K)return P.FileIndex[re].name=a(L),P.FullPaths[re]=L,!0}return!1}function Ke(P){E(P,!0)}return e.find=k,e.read=I,e.parse=d,e.write=Pe,e.writeFile=ve,e.utils={cfb_new:oe,cfb_add:Fe,cfb_del:ce,cfb_mov:Me,cfb_gc:Ke,ReadShift:Bb,CheckField:Une,prep_blob:Cl,bconcat:Xo,use_zlib:O,_deflateRaw:ge,_inflateRaw:xe,consts:he},e}();function f3e(t){return typeof t=="string"?iP(t):Array.isArray(t)?M4e(t):t}function Rw(t,e,r){if(typeof Deno<"u"){if(r&&typeof e=="string")switch(r){case"utf8":e=new TextEncoder(r).encode(e);break;case"binary":e=iP(e);break;default:throw new Error("Unsupported encoding "+r)}return Deno.writeFileSync(t,e)}var n=r=="utf8"?Jf(e):e;if(typeof IE_SaveFile<"u")return IE_SaveFile(n,t);if(typeof Blob<"u"){var a=new Blob([f3e(n)],{type:"application/octet-stream"});if(typeof navigator<"u"&&navigator.msSaveBlob)return navigator.msSaveBlob(a,t);if(typeof saveAs<"u")return saveAs(a,t);if(typeof URL<"u"&&typeof document<"u"&&document.createElement&&URL.createObjectURL){var s=URL.createObjectURL(a);if(typeof chrome=="object"&&typeof(chrome.downloads||{}).download=="function")return URL.revokeObjectURL&&typeof setTimeout<"u"&&setTimeout(function(){URL.revokeObjectURL(s)},6e4),chrome.downloads.download({url:s,filename:t,saveAs:!0});var o=document.createElement("a");if(o.download!=null)return o.download=t,o.href=s,document.body.appendChild(o),o.click(),document.body.removeChild(o),URL.revokeObjectURL&&typeof setTimeout<"u"&&setTimeout(function(){URL.revokeObjectURL(s)},6e4),s}}if(typeof $<"u"&&typeof File<"u"&&typeof Folder<"u")try{var l=File(t);return l.open("w"),l.encoding="binary",Array.isArray(e)&&(e=Lm(e)),l.write(e),l.close(),e}catch(c){if(!c.message||!c.message.match(/onstruct/))throw c}throw new Error("cannot save file "+t)}function h3e(t){if(typeof Deno<"u")return Deno.readFileSync(t);if(typeof $<"u"&&typeof File<"u"&&typeof Folder<"u")try{var e=File(t);e.open("r"),e.encoding="binary";var r=e.read();return e.close(),r}catch(n){if(!n.message||!n.message.match(/onstruct/))throw n}throw new Error("Cannot access file "+t)}function Ii(t){for(var e=Object.keys(t),r=[],n=0;n<e.length;++n)Object.prototype.hasOwnProperty.call(t,e[n])&&r.push(e[n]);return r}function mH(t,e){for(var r=[],n=Ii(t),a=0;a!==n.length;++a)r[t[n[a]][e]]==null&&(r[t[n[a]][e]]=n[a]);return r}function lP(t){for(var e=[],r=Ii(t),n=0;n!==r.length;++n)e[t[r[n]]]=r[n];return e}function cP(t){for(var e=[],r=Ii(t),n=0;n!==r.length;++n)e[t[r[n]]]=parseInt(r[n],10);return e}function A3e(t){for(var e=[],r=Ii(t),n=0;n!==r.length;++n)e[t[r[n]]]==null&&(e[t[r[n]]]=[]),e[t[r[n]]].push(r[n]);return e}var HS=new Date(1899,11,30,0,0,0);function To(t,e){var r=t.getTime(),n=HS.getTime()+(t.getTimezoneOffset()-HS.getTimezoneOffset())*6e4;return(r-n)/(24*60*60*1e3)}var vne=new Date,m3e=HS.getTime()+(vne.getTimezoneOffset()-HS.getTimezoneOffset())*6e4,pH=vne.getTimezoneOffset();function uP(t){var e=new Date;return e.setTime(t*24*60*60*1e3+m3e),e.getTimezoneOffset()!==pH&&e.setTime(e.getTime()+(e.getTimezoneOffset()-pH)*6e4),e}function p3e(t){var e=0,r=0,n=!1,a=t.match(/P([0-9\.]+Y)?([0-9\.]+M)?([0-9\.]+D)?T([0-9\.]+H)?([0-9\.]+M)?([0-9\.]+S)?/);if(!a)throw new Error("|"+t+"| is not an ISO8601 Duration");for(var s=1;s!=a.length;++s)if(a[s]){switch(r=1,s>3&&(n=!0),a[s].slice(a[s].length-1)){case"Y":throw new Error("Unsupported ISO Duration Field: "+a[s].slice(a[s].length-1));case"D":r*=24;case"H":r*=60;case"M":if(n)r*=60;else throw new Error("Unsupported ISO Duration Field: M")}e+=r*parseInt(a[s],10)}return e}var gH=new Date("2017-02-19T19:06:09.000Z"),yne=isNaN(gH.getFullYear())?new Date("2/19/17"):gH,g3e=yne.getFullYear()==2017;function Fs(t,e){var r=new Date(t);if(g3e)return e>0?r.setTime(r.getTime()+r.getTimezoneOffset()*60*1e3):e<0&&r.setTime(r.getTime()-r.getTimezoneOffset()*60*1e3),r;if(t instanceof Date)return t;if(yne.getFullYear()==1917&&!isNaN(r.getFullYear())){var n=r.getFullYear();return t.indexOf(""+n)>-1||r.setFullYear(r.getFullYear()+100),r}var a=t.match(/\d+/g)||["2017","2","19","0","0","0"],s=new Date(+a[0],+a[1]-1,+a[2],+a[3]||0,+a[4]||0,+a[5]||0);return t.indexOf("Z")>-1&&(s=new Date(s.getTime()-s.getTimezoneOffset()*60*1e3)),s}function fg(t,e){if(ea&&Buffer.isBuffer(t)){if(e){if(t[0]==255&&t[1]==254)return Jf(t.slice(2).toString("utf16le"));if(t[1]==254&&t[2]==255)return Jf(one(t.slice(2).toString("binary")))}return t.toString("binary")}if(typeof TextDecoder<"u")try{if(e){if(t[0]==255&&t[1]==254)return Jf(new TextDecoder("utf-16le").decode(t.slice(2)));if(t[0]==254&&t[1]==255)return Jf(new TextDecoder("utf-16be").decode(t.slice(2)))}var r={"":"","":"",:"","":"","":"","":"","":"","":"","":"",:"","":"",:"",:"","":"","":"","":"","":"","":"","":"","":"","":"","":"",:"","":"",:"",:"",:""};return Array.isArray(t)&&(t=new Uint8Array(t)),new TextDecoder("latin1").decode(t).replace(/[]/g,function(s){return r[s]||s})}catch{}for(var n=[],a=0;a!=t.length;++a)n.push(String.fromCharCode(t[a]));return n.join("")}function Os(t){if(typeof JSON<"u"&&!Array.isArray(t))return JSON.parse(JSON.stringify(t));if(typeof t!="object"||t==null)return t;if(t instanceof Date)return new Date(t.getTime());var e={};for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&(e[r]=Os(t[r]));return e}function Ci(t,e){for(var r="";r.length<e;)r+=t;return r}function gf(t){var e=Number(t);if(!isNaN(e))return isFinite(e)?e:NaN;if(!/\d/.test(t))return e;var r=1,n=t.replace(/([\d]),([\d])/g,"$1$2").replace(/[$]/g,"").replace(/[%]/g,function(){return r*=100,""});return!isNaN(e=Number(n))||(n=n.replace(/[(](.*)[)]/,function(a,s){return r=-r,s}),!isNaN(e=Number(n)))?e/r:e}var x3e=["january","february","march","april","may","june","july","august","september","october","november","december"];function Lv(t){var e=new Date(t),r=new Date(NaN),n=e.getYear(),a=e.getMonth(),s=e.getDate();if(isNaN(s))return r;var o=t.toLowerCase();if(o.match(/jan|feb|mar|apr|may|jun|jul|aug|sep|oct|nov|dec/)){if(o=o.replace(/[^a-z]/g,"").replace(/([^a-z]|^)[ap]m?([^a-z]|$)/,""),o.length>3&&x3e.indexOf(o)==-1)return r}else if(o.match(/[a-z]/))return r;return n<0||n>8099?r:(a>0||s>1)&&n!=101?e:t.match(/[^-0-9:,\/\\]/)?r:e}var v3e=function(){var t="abacaba".split(/(:?b)/i).length==5;return function(r,n,a){if(t||typeof n=="string")return r.split(n);for(var s=r.split(n),o=[s[0]],l=1;l<s.length;++l)o.push(a),o.push(s[l]);return o}}();function bne(t){return t?t.content&&t.type?fg(t.content,!0):t.data?zy(t.data):t.asNodeBuffer&&ea?zy(t.asNodeBuffer().toString("binary")):t.asBinary?zy(t.asBinary()):t._data&&t._data.getContent?zy(fg(Array.prototype.slice.call(t._data.getContent(),0))):null:null}function wne(t){if(!t)return null;if(t.data)return sH(t.data);if(t.asNodeBuffer&&ea)return t.asNodeBuffer();if(t._data&&t._data.getContent){var e=t._data.getContent();return typeof e=="string"?sH(e):Array.prototype.slice.call(e)}return t.content&&t.type?t.content:null}function y3e(t){return t&&t.name.slice(-4)===".bin"?wne(t):bne(t)}function pd(t,e){for(var r=t.FullPaths||Ii(t.files),n=e.toLowerCase().replace(/[\/]/g,"\\"),a=n.replace(/\\/g,"/"),s=0;s<r.length;++s){var o=r[s].replace(/^Root Entry[\/]/,"").toLowerCase();if(n==o||a==o)return t.files?t.files[r[s]]:t.FileIndex[s]}return null}function Z6(t,e){var r=pd(t,e);if(r==null)throw new Error("Cannot find file "+e+" in zip");return r}function eo(t,e,r){if(!r)return y3e(Z6(t,e));if(!e)return null;try{return eo(t,e)}catch{return null}}function Bu(t,e,r){if(!r)return bne(Z6(t,e));if(!e)return null;try{return Bu(t,e)}catch{return null}}function b3e(t,e,r){return wne(Z6(t,e))}function xH(t){for(var e=t.FullPaths||Ii(t.files),r=[],n=0;n<e.length;++n)e[n].slice(-1)!="/"&&r.push(e[n].replace(/^Root Entry[\/]/,""));return r.sort()}function Yn(t,e,r){if(t.FullPaths){if(typeof r=="string"){var n;return ea?n=OA(r):n=L4e(r),_n.utils.cfb_add(t,e,n)}_n.utils.cfb_add(t,e,r)}else t.file(e,r)}function eR(){return _n.utils.cfb_new()}function Nne(t,e){switch(e.type){case"base64":return _n.read(t,{type:"base64"});case"binary":return _n.read(t,{type:"binary"});case"buffer":case"array":return _n.read(t,{type:"buffer"})}throw new Error("Unrecognized type "+e.type)}function Xy(t,e){if(t.charAt(0)=="/")return t.slice(1);var r=e.split("/");e.slice(-1)!="/"&&r.pop();for(var n=t.split("/");n.length!==0;){var a=n.shift();a===".."?r.pop():a!=="."&&r.push(a)}return r.join("/")}var zi=`<?xml version="1.0" encoding="UTF-8" standalone="yes"?>\r
`,w3e=/([^"\s?>\/]+)\s*=\s*((?:")([^"]*)(?:")|(?:')([^']*)(?:')|([^'">\s]+))/g,vH=/<[\/\?]?[a-zA-Z0-9:_-]+(?:\s+[^"\s?>\/]+\s*=\s*(?:"[^"]*"|'[^']*'|[^'">\s=]+))*\s*[\/\?]?>/mg,N3e=/<[^>]*>/g,lc=zi.match(vH)?vH:N3e,C3e=/<\w*:/,_3e=/<(\/?)\w+:/;function Dn(t,e,r){for(var n={},a=0,s=0;a!==t.length&&!((s=t.charCodeAt(a))===32||s===10||s===13);++a);if(e||(n[0]=t.slice(0,a)),a===t.length)return n;var o=t.match(w3e),l=0,c="",u=0,d="",f="",A=1;if(o)for(u=0;u!=o.length;++u){for(f=o[u],s=0;s!=f.length&&f.charCodeAt(s)!==61;++s);for(d=f.slice(0,s).trim();f.charCodeAt(s+1)==32;)++s;for(A=(a=f.charCodeAt(s+1))==34||a==39?1:0,c=f.slice(s+1+A,f.length-A),l=0;l!=d.length&&d.charCodeAt(l)!==58;++l);if(l===d.length)d.indexOf("_")>0&&(d=d.slice(0,d.indexOf("_"))),n[d]=c,n[d.toLowerCase()]=c;else{var h=(l===5&&d.slice(0,5)==="xmlns"?"xmlns":"")+d.slice(l+1);if(n[h]&&d.slice(l-3,l)=="ext")continue;n[h]=c,n[h.toLowerCase()]=c}}return n}function ph(t){return t.replace(_3e,"<$1")}var Cne={"&quot;":'"',"&apos;":"'","&gt;":">","&lt;":"<","&amp;":"&"},tR=lP(Cne),_a=function(){var t=/&(?:quot|apos|gt|lt|amp|#x?([\da-fA-F]+));/ig,e=/_x([\da-fA-F]{4})_/ig;return function r(n){var a=n+"",s=a.indexOf("<![CDATA[");if(s==-1)return a.replace(t,function(l,c){return Cne[l]||String.fromCharCode(parseInt(c,l.indexOf("x")>-1?16:10))||l}).replace(e,function(l,c){return String.fromCharCode(parseInt(c,16))});var o=a.indexOf("]]>");return r(a.slice(0,s))+a.slice(s+9,o)+r(a.slice(o+3))}}(),rR=/[&<>'"]/g,E3e=/[\u0000-\u0008\u000b-\u001f]/g;function ts(t){var e=t+"";return e.replace(rR,function(r){return tR[r]}).replace(E3e,function(r){return"_x"+("000"+r.charCodeAt(0).toString(16)).slice(-4)+"_"})}function yH(t){return ts(t).replace(/ /g,"_x0020_")}var _ne=/[\u0000-\u001f]/g;function nR(t){var e=t+"";return e.replace(rR,function(r){return tR[r]}).replace(/\n/g,"<br/>").replace(_ne,function(r){return"&#x"+("000"+r.charCodeAt(0).toString(16)).slice(-4)+";"})}function S3e(t){var e=t+"";return e.replace(rR,function(r){return tR[r]}).replace(_ne,function(r){return"&#x"+r.charCodeAt(0).toString(16).toUpperCase()+";"})}var bH=function(){var t=/&#(\d+);/g;function e(r,n){return String.fromCharCode(parseInt(n,10))}return function(n){return n.replace(t,e)}}();function I3e(t){return t.replace(/(\r\n|[\r\n])/g,"&#10;")}function Ps(t){switch(t){case 1:case!0:case"1":case"true":case"TRUE":return!0;default:return!1}}function S5(t){for(var e="",r=0,n=0,a=0,s=0,o=0,l=0;r<t.length;){if(n=t.charCodeAt(r++),n<128){e+=String.fromCharCode(n);continue}if(a=t.charCodeAt(r++),n>191&&n<224){o=(n&31)<<6,o|=a&63,e+=String.fromCharCode(o);continue}if(s=t.charCodeAt(r++),n<240){e+=String.fromCharCode((n&15)<<12|(a&63)<<6|s&63);continue}o=t.charCodeAt(r++),l=((n&7)<<18|(a&63)<<12|(s&63)<<6|o&63)-65536,e+=String.fromCharCode(55296+(l>>>10&1023)),e+=String.fromCharCode(56320+(l&1023))}return e}function wH(t){var e=Em(2*t.length),r,n,a=1,s=0,o=0,l;for(n=0;n<t.length;n+=a)a=1,(l=t.charCodeAt(n))<128?r=l:l<224?(r=(l&31)*64+(t.charCodeAt(n+1)&63),a=2):l<240?(r=(l&15)*4096+(t.charCodeAt(n+1)&63)*64+(t.charCodeAt(n+2)&63),a=3):(a=4,r=(l&7)*262144+(t.charCodeAt(n+1)&63)*4096+(t.charCodeAt(n+2)&63)*64+(t.charCodeAt(n+3)&63),r-=65536,o=55296+(r>>>10&1023),r=56320+(r&1023)),o!==0&&(e[s++]=o&255,e[s++]=o>>>8,o=0),e[s++]=r%256,e[s++]=r>>>8;return e.slice(0,s).toString("ucs2")}function NH(t){return OA(t,"binary").toString("utf8")}var VC="foo bar baz",ls=ea&&(NH(VC)==S5(VC)&&NH||wH(VC)==S5(VC)&&wH)||S5,Jf=ea?function(t){return OA(t,"utf8").toString("binary")}:function(t){for(var e=[],r=0,n=0,a=0;r<t.length;)switch(n=t.charCodeAt(r++),!0){case n<128:e.push(String.fromCharCode(n));break;case n<2048:e.push(String.fromCharCode(192+(n>>6))),e.push(String.fromCharCode(128+(n&63)));break;case(n>=55296&&n<57344):n-=55296,a=t.charCodeAt(r++)-56320+(n<<10),e.push(String.fromCharCode(240+(a>>18&7))),e.push(String.fromCharCode(144+(a>>12&63))),e.push(String.fromCharCode(128+(a>>6&63))),e.push(String.fromCharCode(128+(a&63)));break;default:e.push(String.fromCharCode(224+(n>>12))),e.push(String.fromCharCode(128+(n>>6&63))),e.push(String.fromCharCode(128+(n&63)))}return e.join("")},T2=function(){var t={};return function(r,n){var a=r+"|"+(n||"");return t[a]?t[a]:t[a]=new RegExp("<(?:\\w+:)?"+r+'(?: xml:space="preserve")?(?:[^>]*)>([\\s\\S]*?)</(?:\\w+:)?'+r+">",n||"")}}(),Ene=function(){var t=[["nbsp"," "],["middot",""],["quot",'"'],["apos","'"],["gt",">"],["lt","<"],["amp","&"]].map(function(e){return[new RegExp("&"+e[0]+";","ig"),e[1]]});return function(r){for(var n=r.replace(/^[\t\n\r ]+/,"").replace(/[\t\n\r ]+$/,"").replace(/>\s+/g,">").replace(/\s+</g,"<").replace(/[\t\n\r ]+/g," ").replace(/<\s*[bB][rR]\s*\/?>/g,`
`).replace(/<[^>]*>/g,""),a=0;a<t.length;++a)n=n.replace(t[a][0],t[a][1]);return n}}(),j3e=function(){var t={};return function(r){return t[r]!==void 0?t[r]:t[r]=new RegExp("<(?:vt:)?"+r+">([\\s\\S]*?)</(?:vt:)?"+r+">","g")}}(),P3e=/<\/?(?:vt:)?variant>/g,B3e=/<(?:vt:)([^>]*)>([\s\S]*)</;function CH(t,e){var r=Dn(t),n=t.match(j3e(r.baseType))||[],a=[];if(n.length!=r.size){if(e.WTF)throw new Error("unexpected vector length "+n.length+" != "+r.size);return a}return n.forEach(function(s){var o=s.replace(P3e,"").match(B3e);o&&a.push({v:ls(o[2]),t:o[1]})}),a}var Sne=/(^\s|\s$|\n)/;function El(t,e){return"<"+t+(e.match(Sne)?' xml:space="preserve"':"")+">"+e+"</"+t+">"}function k2(t){return Ii(t).map(function(e){return" "+e+'="'+t[e]+'"'}).join("")}function Ur(t,e,r){return"<"+t+(r!=null?k2(r):"")+(e!=null?(e.match(Sne)?' xml:space="preserve"':"")+">"+e+"</"+t:"/")+">"}function zk(t,e){try{return t.toISOString().replace(/\.\d*/,"")}catch(r){if(e)throw r}return""}function T3e(t,e){switch(typeof t){case"string":var r=Ur("vt:lpwstr",ts(t));return r=r.replace(/&quot;/g,"_x0022_"),r;case"number":return Ur((t|0)==t?"vt:i4":"vt:r8",ts(String(t)));case"boolean":return Ur("vt:bool",t?"true":"false")}if(t instanceof Date)return Ur("vt:filetime",zk(t));throw new Error("Unable to serialize "+t)}function aR(t){if(ea&&Buffer.isBuffer(t))return t.toString("utf8");if(typeof t=="string")return t;if(typeof Uint8Array<"u"&&t instanceof Uint8Array)return ls(Lm(X6(t)));throw new Error("Bad input format: expected Buffer or string")}var F2=/<(\/?)([^\s?><!\/:]*:|)([^\s?<>:\/]+)(?:[\s?:\/][^>]*)?>/mg,So={CORE_PROPS:"http://schemas.openxmlformats.org/package/2006/metadata/core-properties",CUST_PROPS:"http://schemas.openxmlformats.org/officeDocument/2006/custom-properties",EXT_PROPS:"http://schemas.openxmlformats.org/officeDocument/2006/extended-properties",CT:"http://schemas.openxmlformats.org/package/2006/content-types",RELS:"http://schemas.openxmlformats.org/package/2006/relationships",TCMNT:"http://schemas.microsoft.com/office/spreadsheetml/2018/threadedcomments",dc:"http://purl.org/dc/elements/1.1/",dcterms:"http://purl.org/dc/terms/",dcmitype:"http://purl.org/dc/dcmitype/",r:"http://schemas.openxmlformats.org/officeDocument/2006/relationships",vt:"http://schemas.openxmlformats.org/officeDocument/2006/docPropsVTypes",xsi:"http://www.w3.org/2001/XMLSchema-instance",xsd:"http://www.w3.org/2001/XMLSchema"},Dg=["http://schemas.openxmlformats.org/spreadsheetml/2006/main","http://purl.oclc.org/ooxml/spreadsheetml/main","http://schemas.microsoft.com/office/excel/2006/main","http://schemas.microsoft.com/office/excel/2006/2"],Iu={o:"urn:schemas-microsoft-com:office:office",x:"urn:schemas-microsoft-com:office:excel",ss:"urn:schemas-microsoft-com:office:spreadsheet",dt:"uuid:C2F41010-65B3-11d1-A29F-00AA00C14882",mv:"http://macVmlSchemaUri",v:"urn:schemas-microsoft-com:vml",html:"http://www.w3.org/TR/REC-html40"};function k3e(t,e){for(var r=1-2*(t[e+7]>>>7),n=((t[e+7]&127)<<4)+(t[e+6]>>>4&15),a=t[e+6]&15,s=5;s>=0;--s)a=a*256+t[e+s];return n==2047?a==0?r*(1/0):NaN:(n==0?n=-1022:(n-=1023,a+=Math.pow(2,52)),r*Math.pow(2,n-52)*a)}function F3e(t,e,r){var n=(e<0||1/e==-1/0?1:0)<<7,a=0,s=0,o=n?-e:e;isFinite(o)?o==0?a=s=0:(a=Math.floor(Math.log(o)/Math.LN2),s=o*Math.pow(2,52-a),a<=-1023&&(!isFinite(s)||s<Math.pow(2,52))?a=-1022:(s-=Math.pow(2,52),a+=1023)):(a=2047,s=isNaN(e)?26985:0);for(var l=0;l<=5;++l,s/=256)t[r+l]=s&255;t[r+6]=(a&15)<<4|s&15,t[r+7]=a>>4|n}var _H=function(t){for(var e=[],r=10240,n=0;n<t[0].length;++n)if(t[0][n])for(var a=0,s=t[0][n].length;a<s;a+=r)e.push.apply(e,t[0][n].slice(a,a+r));return e},EH=ea?function(t){return t[0].length>0&&Buffer.isBuffer(t[0][0])?Buffer.concat(t[0].map(function(e){return Buffer.isBuffer(e)?e:OA(e)})):_H(t)}:_H,SH=function(t,e,r){for(var n=[],a=e;a<r;a+=2)n.push(String.fromCharCode(Xh(t,a)));return n.join("").replace(jc,"")},sR=ea?function(t,e,r){return Buffer.isBuffer(t)?t.toString("utf16le",e,r).replace(jc,""):SH(t,e,r)}:SH,IH=function(t,e,r){for(var n=[],a=e;a<e+r;++a)n.push(("0"+t[a].toString(16)).slice(-2));return n.join("")},Ine=ea?function(t,e,r){return Buffer.isBuffer(t)?t.toString("hex",e,e+r):IH(t,e,r)}:IH,jH=function(t,e,r){for(var n=[],a=e;a<r;a++)n.push(String.fromCharCode(kx(t,a)));return n.join("")},Mw=ea?function(e,r,n){return Buffer.isBuffer(e)?e.toString("utf8",r,n):jH(e,r,n)}:jH,jne=function(t,e){var r=ju(t,e);return r>0?Mw(t,e+4,e+4+r-1):""},Pne=jne,Bne=function(t,e){var r=ju(t,e);return r>0?Mw(t,e+4,e+4+r-1):""},Tne=Bne,kne=function(t,e){var r=2*ju(t,e);return r>0?Mw(t,e+4,e+4+r-1):""},Fne=kne,One=function(e,r){var n=ju(e,r);return n>0?sR(e,r+4,r+4+n):""},Dne=One,Rne=function(t,e){var r=ju(t,e);return r>0?Mw(t,e+4,e+4+r):""},Mne=Rne,Lne=function(t,e){return k3e(t,e)},$S=Lne,iR=function(e){return Array.isArray(e)||typeof Uint8Array<"u"&&e instanceof Uint8Array};ea&&(Pne=function(e,r){if(!Buffer.isBuffer(e))return jne(e,r);var n=e.readUInt32LE(r);return n>0?e.toString("utf8",r+4,r+4+n-1):""},Tne=function(e,r){if(!Buffer.isBuffer(e))return Bne(e,r);var n=e.readUInt32LE(r);return n>0?e.toString("utf8",r+4,r+4+n-1):""},Fne=function(e,r){if(!Buffer.isBuffer(e))return kne(e,r);var n=2*e.readUInt32LE(r);return e.toString("utf16le",r+4,r+4+n-1)},Dne=function(e,r){if(!Buffer.isBuffer(e))return One(e,r);var n=e.readUInt32LE(r);return e.toString("utf16le",r+4,r+4+n)},Mne=function(e,r){if(!Buffer.isBuffer(e))return Rne(e,r);var n=e.readUInt32LE(r);return e.toString("utf8",r+4,r+4+n)},$S=function(e,r){return Buffer.isBuffer(e)?e.readDoubleLE(r):Lne(e,r)},iR=function(e){return Buffer.isBuffer(e)||Array.isArray(e)||typeof Uint8Array<"u"&&e instanceof Uint8Array});var kx=function(t,e){return t[e]},Xh=function(t,e){return t[e+1]*256+t[e]},O3e=function(t,e){var r=t[e+1]*256+t[e];return r<32768?r:(65535-r+1)*-1},ju=function(t,e){return t[e+3]*(1<<24)+(t[e+2]<<16)+(t[e+1]<<8)+t[e]},xp=function(t,e){return t[e+3]<<24|t[e+2]<<16|t[e+1]<<8|t[e]},D3e=function(t,e){return t[e]<<24|t[e+1]<<16|t[e+2]<<8|t[e+3]};function Bb(t,e){var r="",n,a,s=[],o,l,c,u;switch(e){case"dbcs":if(u=this.l,ea&&Buffer.isBuffer(this))r=this.slice(this.l,this.l+2*t).toString("utf16le");else for(c=0;c<t;++c)r+=String.fromCharCode(Xh(this,u)),u+=2;t*=2;break;case"utf8":r=Mw(this,this.l,this.l+t);break;case"utf16le":t*=2,r=sR(this,this.l,this.l+t);break;case"wstr":return Bb.call(this,t,"dbcs");case"lpstr-ansi":r=Pne(this,this.l),t=4+ju(this,this.l);break;case"lpstr-cp":r=Tne(this,this.l),t=4+ju(this,this.l);break;case"lpwstr":r=Fne(this,this.l),t=4+2*ju(this,this.l);break;case"lpp4":t=4+ju(this,this.l),r=Dne(this,this.l),t&2&&(t+=2);break;case"8lpp4":t=4+ju(this,this.l),r=Mne(this,this.l),t&3&&(t+=4-(t&3));break;case"cstr":for(t=0,r="";(o=kx(this,this.l+t++))!==0;)s.push(QC(o));r=s.join("");break;case"_wstr":for(t=0,r="";(o=Xh(this,this.l+t))!==0;)s.push(QC(o)),t+=2;t+=2,r=s.join("");break;case"dbcs-cont":for(r="",u=this.l,c=0;c<t;++c){if(this.lens&&this.lens.indexOf(u)!==-1)return o=kx(this,u),this.l=u+1,l=Bb.call(this,t-c,o?"dbcs-cont":"sbcs-cont"),s.join("")+l;s.push(QC(Xh(this,u))),u+=2}r=s.join(""),t*=2;break;case"cpstr":case"sbcs-cont":for(r="",u=this.l,c=0;c!=t;++c){if(this.lens&&this.lens.indexOf(u)!==-1)return o=kx(this,u),this.l=u+1,l=Bb.call(this,t-c,o?"dbcs-cont":"sbcs-cont"),s.join("")+l;s.push(QC(kx(this,u))),u+=1}r=s.join("");break;default:switch(t){case 1:return n=kx(this,this.l),this.l++,n;case 2:return n=(e==="i"?O3e:Xh)(this,this.l),this.l+=2,n;case 4:case-4:return e==="i"||!(this[this.l+3]&128)?(n=(t>0?xp:D3e)(this,this.l),this.l+=4,n):(a=ju(this,this.l),this.l+=4,a);case 8:case-8:if(e==="f")return t==8?a=$S(this,this.l):a=$S([this[this.l+7],this[this.l+6],this[this.l+5],this[this.l+4],this[this.l+3],this[this.l+2],this[this.l+1],this[this.l+0]],0),this.l+=8,a;t=8;case 16:r=Ine(this,this.l,t);break}}return this.l+=t,r}var R3e=function(t,e,r){t[r]=e&255,t[r+1]=e>>>8&255,t[r+2]=e>>>16&255,t[r+3]=e>>>24&255},M3e=function(t,e,r){t[r]=e&255,t[r+1]=e>>8&255,t[r+2]=e>>16&255,t[r+3]=e>>24&255},L3e=function(t,e,r){t[r]=e&255,t[r+1]=e>>>8&255};function U3e(t,e,r){var n=0,a=0;if(r==="dbcs"){for(a=0;a!=e.length;++a)L3e(this,e.charCodeAt(a),this.l+2*a);n=2*e.length}else if(r==="sbcs"){for(e=e.replace(/[^\x00-\x7F]/g,"_"),a=0;a!=e.length;++a)this[this.l+a]=e.charCodeAt(a)&255;n=e.length}else if(r==="hex"){for(;a<t;++a)this[this.l++]=parseInt(e.slice(2*a,2*a+2),16)||0;return this}else if(r==="utf16le"){var s=Math.min(this.l+t,this.length);for(a=0;a<Math.min(e.length,t);++a){var o=e.charCodeAt(a);this[this.l++]=o&255,this[this.l++]=o>>8}for(;this.l<s;)this[this.l++]=0;return this}else switch(t){case 1:n=1,this[this.l]=e&255;break;case 2:n=2,this[this.l]=e&255,e>>>=8,this[this.l+1]=e&255;break;case 3:n=3,this[this.l]=e&255,e>>>=8,this[this.l+1]=e&255,e>>>=8,this[this.l+2]=e&255;break;case 4:n=4,R3e(this,e,this.l);break;case 8:if(n=8,r==="f"){F3e(this,e,this.l);break}case 16:break;case-4:n=4,M3e(this,e,this.l);break}return this.l+=n,this}function Une(t,e){var r=Ine(this,this.l,t.length>>1);if(r!==t)throw new Error(e+"Expected "+t+" saw "+r);this.l+=t.length>>1}function Cl(t,e){t.l=e,t.read_shift=Bb,t.chk=Une,t.write_shift=U3e}function oc(t,e){t.l+=e}function nr(t){var e=Em(t);return Cl(e,0),e}function DA(t,e,r){if(t){var n,a,s;Cl(t,t.l||0);for(var o=t.length,l=0,c=0;t.l<o;){l=t.read_shift(1),l&128&&(l=(l&127)+((t.read_shift(1)&127)<<7));var u=U2[l]||U2[65535];for(n=t.read_shift(1),s=n&127,a=1;a<4&&n&128;++a)s+=((n=t.read_shift(1))&127)<<7*a;c=t.l+s;var d=u.f&&u.f(t,s,r);if(t.l=c,e(d,u,l))return}}}function iu(){var t=[],e=ea?256:2048,r=function(u){var d=nr(u);return Cl(d,0),d},n=r(e),a=function(){n&&(n.length>n.l&&(n=n.slice(0,n.l),n.l=n.length),n.length>0&&t.push(n),n=null)},s=function(u){return n&&u<n.length-n.l?n:(a(),n=r(Math.max(u+1,e)))},o=function(){return a(),Xo(t)},l=function(u){a(),n=u,n.l==null&&(n.l=n.length),s(e)};return{next:s,push:l,end:o,_bufs:t}}function yr(t,e,r,n){var a=+e,s;if(!isNaN(a)){n||(n=U2[a].p||(r||[]).length||0),s=1+(a>=128?1:0)+1,n>=128&&++s,n>=16384&&++s,n>=2097152&&++s;var o=t.next(s);a<=127?o.write_shift(1,a):(o.write_shift(1,(a&127)+128),o.write_shift(1,a>>7));for(var l=0;l!=4;++l)if(n>=128)o.write_shift(1,(n&127)+128),n>>=7;else{o.write_shift(1,n);break}n>0&&iR(r)&&t.push(r)}}function Tb(t,e,r){var n=Os(t);if(e.s?(n.cRel&&(n.c+=e.s.c),n.rRel&&(n.r+=e.s.r)):(n.cRel&&(n.c+=e.c),n.rRel&&(n.r+=e.r)),!r||r.biff<12){for(;n.c>=256;)n.c-=256;for(;n.r>=65536;)n.r-=65536}return n}function PH(t,e,r){var n=Os(t);return n.s=Tb(n.s,e.s,r),n.e=Tb(n.e,e.s,r),n}function kb(t,e){if(t.cRel&&t.c<0)for(t=Os(t);t.c<0;)t.c+=e>8?16384:256;if(t.rRel&&t.r<0)for(t=Os(t);t.r<0;)t.r+=e>8?1048576:e>5?65536:16384;var r=On(t);return!t.cRel&&t.cRel!=null&&(r=H3e(r)),!t.rRel&&t.rRel!=null&&(r=Q3e(r)),r}function I5(t,e){return t.s.r==0&&!t.s.rRel&&t.e.r==(e.biff>=12?1048575:e.biff>=8?65536:16384)&&!t.e.rRel?(t.s.cRel?"":"$")+oi(t.s.c)+":"+(t.e.cRel?"":"$")+oi(t.e.c):t.s.c==0&&!t.s.cRel&&t.e.c==(e.biff>=12?16383:255)&&!t.e.cRel?(t.s.rRel?"":"$")+Ki(t.s.r)+":"+(t.e.rRel?"":"$")+Ki(t.e.r):kb(t.s,e.biff)+":"+kb(t.e,e.biff)}function oR(t){return parseInt(V3e(t),10)-1}function Ki(t){return""+(t+1)}function Q3e(t){return t.replace(/([A-Z]|^)(\d+)$/,"$1$$$2")}function V3e(t){return t.replace(/\$(\d+)$/,"$1")}function lR(t){for(var e=$3e(t),r=0,n=0;n!==e.length;++n)r=26*r+e.charCodeAt(n)-64;return r-1}function oi(t){if(t<0)throw new Error("invalid column "+t);var e="";for(++t;t;t=Math.floor((t-1)/26))e=String.fromCharCode((t-1)%26+65)+e;return e}function H3e(t){return t.replace(/^([A-Z])/,"$$$1")}function $3e(t){return t.replace(/^\$([A-Z])/,"$1")}function G3e(t){return t.replace(/(\$?[A-Z]*)(\$?\d*)/,"$1,$2").split(",")}function li(t){for(var e=0,r=0,n=0;n<t.length;++n){var a=t.charCodeAt(n);a>=48&&a<=57?e=10*e+(a-48):a>=65&&a<=90&&(r=26*r+(a-64))}return{c:r-1,r:e-1}}function On(t){for(var e=t.c+1,r="";e;e=(e-1)/26|0)r=String.fromCharCode((e-1)%26+65)+r;return r+(t.r+1)}function ou(t){var e=t.indexOf(":");return e==-1?{s:li(t),e:li(t)}:{s:li(t.slice(0,e)),e:li(t.slice(e+1))}}function zn(t,e){return typeof e>"u"||typeof e=="number"?zn(t.s,t.e):(typeof t!="string"&&(t=On(t)),typeof e!="string"&&(e=On(e)),t==e?t:t+":"+e)}function Ea(t){var e={s:{c:0,r:0},e:{c:0,r:0}},r=0,n=0,a=0,s=t.length;for(r=0;n<s&&!((a=t.charCodeAt(n)-64)<1||a>26);++n)r=26*r+a;for(e.s.c=--r,r=0;n<s&&!((a=t.charCodeAt(n)-48)<0||a>9);++n)r=10*r+a;if(e.s.r=--r,n===s||a!=10)return e.e.c=e.s.c,e.e.r=e.s.r,e;for(++n,r=0;n!=s&&!((a=t.charCodeAt(n)-64)<1||a>26);++n)r=26*r+a;for(e.e.c=--r,r=0;n!=s&&!((a=t.charCodeAt(n)-48)<0||a>9);++n)r=10*r+a;return e.e.r=--r,e}function BH(t,e){var r=t.t=="d"&&e instanceof Date;if(t.z!=null)try{return t.w=Od(t.z,r?To(e):e)}catch{}try{return t.w=Od((t.XF||{}).numFmtId||(r?14:0),r?To(e):e)}catch{return""+e}}function yA(t,e,r){return t==null||t.t==null||t.t=="z"?"":t.w!==void 0?t.w:(t.t=="d"&&!t.z&&r&&r.dateNF&&(t.z=r.dateNF),t.t=="e"?RA[t.v]||t.v:e==null?BH(t,t.v):BH(t,e))}function Um(t,e){var r=e&&e.sheet?e.sheet:"Sheet1",n={};return n[r]=t,{SheetNames:[r],Sheets:n}}function Qne(t,e,r){var n=r||{},a=t?Array.isArray(t):n.dense,s=t||(a?[]:{}),o=0,l=0;if(s&&n.origin!=null){if(typeof n.origin=="number")o=n.origin;else{var c=typeof n.origin=="string"?li(n.origin):n.origin;o=c.r,l=c.c}s["!ref"]||(s["!ref"]="A1:A1")}var u={s:{c:1e7,r:1e7},e:{c:0,r:0}};if(s["!ref"]){var d=Ea(s["!ref"]);u.s.c=d.s.c,u.s.r=d.s.r,u.e.c=Math.max(u.e.c,d.e.c),u.e.r=Math.max(u.e.r,d.e.r),o==-1&&(u.e.r=o=d.e.r+1)}for(var f=0;f!=e.length;++f)if(e[f]){if(!Array.isArray(e[f]))throw new Error("aoa_to_sheet expects an array of arrays");for(var A=0;A!=e[f].length;++A)if(!(typeof e[f][A]>"u")){var h={v:e[f][A]},m=o+f,p=l+A;if(u.s.r>m&&(u.s.r=m),u.s.c>p&&(u.s.c=p),u.e.r<m&&(u.e.r=m),u.e.c<p&&(u.e.c=p),e[f][A]&&typeof e[f][A]=="object"&&!Array.isArray(e[f][A])&&!(e[f][A]instanceof Date))h=e[f][A];else if(Array.isArray(h.v)&&(h.f=e[f][A][1],h.v=h.v[0]),h.v===null)if(h.f)h.t="n";else if(n.nullError)h.t="e",h.v=0;else if(n.sheetStubs)h.t="z";else continue;else typeof h.v=="number"?h.t="n":typeof h.v=="boolean"?h.t="b":h.v instanceof Date?(h.z=n.dateNF||Tn[14],n.cellDates?(h.t="d",h.w=Od(h.z,To(h.v))):(h.t="n",h.v=To(h.v),h.w=Od(h.z,h.v))):h.t="s";if(a)s[m]||(s[m]=[]),s[m][p]&&s[m][p].z&&(h.z=s[m][p].z),s[m][p]=h;else{var x=On({c:p,r:m});s[x]&&s[x].z&&(h.z=s[x].z),s[x]=h}}}return u.s.c<1e7&&(s["!ref"]=zn(u)),s}function y1(t,e){return Qne(null,t,e)}function K3e(t){return t.read_shift(4,"i")}function xf(t,e){return e||(e=nr(4)),e.write_shift(4,t),e}function ac(t){var e=t.read_shift(4);return e===0?"":t.read_shift(e,"dbcs")}function Yo(t,e){var r=!1;return e==null&&(r=!0,e=nr(4+2*t.length)),e.write_shift(4,t.length),t.length>0&&e.write_shift(0,t,"dbcs"),r?e.slice(0,e.l):e}function q3e(t){return{ich:t.read_shift(2),ifnt:t.read_shift(2)}}function z3e(t,e){return e||(e=nr(4)),e.write_shift(2,0),e.write_shift(2,0),e}function cR(t,e){var r=t.l,n=t.read_shift(1),a=ac(t),s=[],o={t:a,h:a};if(n&1){for(var l=t.read_shift(4),c=0;c!=l;++c)s.push(q3e(t));o.r=s}else o.r=[{ich:0,ifnt:0}];return t.l=r+e,o}function W3e(t,e){var r=!1;return e==null&&(r=!0,e=nr(15+4*t.t.length)),e.write_shift(1,0),Yo(t.t,e),r?e.slice(0,e.l):e}var X3e=cR;function Y3e(t,e){var r=!1;return e==null&&(r=!0,e=nr(23+4*t.t.length)),e.write_shift(1,1),Yo(t.t,e),e.write_shift(4,1),z3e({},e),r?e.slice(0,e.l):e}function Qd(t){var e=t.read_shift(4),r=t.read_shift(2);return r+=t.read_shift(1)<<16,t.l++,{c:e,iStyleRef:r}}function Rg(t,e){return e==null&&(e=nr(8)),e.write_shift(-4,t.c),e.write_shift(3,t.iStyleRef||t.s),e.write_shift(1,0),e}function Mg(t){var e=t.read_shift(2);return e+=t.read_shift(1)<<16,t.l++,{c:-1,iStyleRef:e}}function Lg(t,e){return e==null&&(e=nr(4)),e.write_shift(3,t.iStyleRef||t.s),e.write_shift(1,0),e}var J3e=ac,Vne=Yo;function uR(t){var e=t.read_shift(4);return e===0||e===4294967295?"":t.read_shift(e,"dbcs")}function GS(t,e){var r=!1;return e==null&&(r=!0,e=nr(127)),e.write_shift(4,t.length>0?t.length:4294967295),t.length>0&&e.write_shift(0,t,"dbcs"),r?e.slice(0,e.l):e}var Z3e=ac,Wk=uR,dR=GS;function fR(t){var e=t.slice(t.l,t.l+4),r=e[0]&1,n=e[0]&2;t.l+=4;var a=n===0?$S([0,0,0,0,e[0]&252,e[1],e[2],e[3]],0):xp(e,0)>>2;return r?a/100:a}function Hne(t,e){e==null&&(e=nr(4));var r=0,n=0,a=t*100;if(t==(t|0)&&t>=-536870912&&t<1<<29?n=1:a==(a|0)&&a>=-536870912&&a<1<<29&&(n=1,r=1),n)e.write_shift(-4,((r?a:t)<<2)+(r+2));else throw new Error("unsupported RkNumber "+t)}function $ne(t){var e={s:{},e:{}};return e.s.r=t.read_shift(4),e.e.r=t.read_shift(4),e.s.c=t.read_shift(4),e.e.c=t.read_shift(4),e}function e5e(t,e){return e||(e=nr(16)),e.write_shift(4,t.s.r),e.write_shift(4,t.e.r),e.write_shift(4,t.s.c),e.write_shift(4,t.e.c),e}var Ug=$ne,b1=e5e;function rc(t){if(t.length-t.l<8)throw"XLS Xnum Buffer underflow";return t.read_shift(8,"f")}function hg(t,e){return(e||nr(8)).write_shift(8,t,"f")}function t5e(t){var e={},r=t.read_shift(1),n=r>>>1,a=t.read_shift(1),s=t.read_shift(2,"i"),o=t.read_shift(1),l=t.read_shift(1),c=t.read_shift(1);switch(t.l++,n){case 0:e.auto=1;break;case 1:e.index=a;var u=Lp[a];u&&(e.rgb=D2(u));break;case 2:e.rgb=D2([o,l,c]);break;case 3:e.theme=a;break}return s!=0&&(e.tint=s>0?s/32767:s/32768),e}function KS(t,e){if(e||(e=nr(8)),!t||t.auto)return e.write_shift(4,0),e.write_shift(4,0),e;t.index!=null?(e.write_shift(1,2),e.write_shift(1,t.index)):t.theme!=null?(e.write_shift(1,6),e.write_shift(1,t.theme)):(e.write_shift(1,5),e.write_shift(1,0));var r=t.tint||0;if(r>0?r*=32767:r<0&&(r*=32768),e.write_shift(2,r),!t.rgb||t.theme!=null)e.write_shift(2,0),e.write_shift(1,0),e.write_shift(1,0);else{var n=t.rgb||"FFFFFF";typeof n=="number"&&(n=("000000"+n.toString(16)).slice(-6)),e.write_shift(1,parseInt(n.slice(0,2),16)),e.write_shift(1,parseInt(n.slice(2,4),16)),e.write_shift(1,parseInt(n.slice(4,6),16)),e.write_shift(1,255)}return e}function r5e(t){var e=t.read_shift(1);t.l++;var r={fBold:e&1,fItalic:e&2,fUnderline:e&4,fStrikeout:e&8,fOutline:e&16,fShadow:e&32,fCondense:e&64,fExtend:e&128};return r}function n5e(t,e){e||(e=nr(2));var r=(t.italic?2:0)|(t.strike?8:0)|(t.outline?16:0)|(t.shadow?32:0)|(t.condense?64:0)|(t.extend?128:0);return e.write_shift(1,r),e.write_shift(1,0),e}function Gne(t,e){var r={2:"BITMAP",3:"METAFILEPICT",8:"DIB",14:"ENHMETAFILE"},n=t.read_shift(4);switch(n){case 0:return"";case 4294967295:case 4294967294:return r[t.read_shift(4)]||""}if(n>400)throw new Error("Unsupported Clipboard: "+n.toString(16));return t.l-=4,t.read_shift(0,e==1?"lpstr":"lpwstr")}function a5e(t){return Gne(t,1)}function s5e(t){return Gne(t,2)}var hR=2,zc=3,HC=11,TH=12,qS=19,$C=64,i5e=65,o5e=71,l5e=4108,c5e=4126,Ko=80,Kne=81,u5e=[Ko,Kne],Xk={1:{n:"CodePage",t:hR},2:{n:"Category",t:Ko},3:{n:"PresentationFormat",t:Ko},4:{n:"ByteCount",t:zc},5:{n:"LineCount",t:zc},6:{n:"ParagraphCount",t:zc},7:{n:"SlideCount",t:zc},8:{n:"NoteCount",t:zc},9:{n:"HiddenCount",t:zc},10:{n:"MultimediaClipCount",t:zc},11:{n:"ScaleCrop",t:HC},12:{n:"HeadingPairs",t:l5e},13:{n:"TitlesOfParts",t:c5e},14:{n:"Manager",t:Ko},15:{n:"Company",t:Ko},16:{n:"LinksUpToDate",t:HC},17:{n:"CharacterCount",t:zc},19:{n:"SharedDoc",t:HC},22:{n:"HyperlinksChanged",t:HC},23:{n:"AppVersion",t:zc,p:"version"},24:{n:"DigSig",t:i5e},26:{n:"ContentType",t:Ko},27:{n:"ContentStatus",t:Ko},28:{n:"Language",t:Ko},29:{n:"Version",t:Ko},255:{},2147483648:{n:"Locale",t:qS},2147483651:{n:"Behavior",t:qS},1919054434:{}},Yk={1:{n:"CodePage",t:hR},2:{n:"Title",t:Ko},3:{n:"Subject",t:Ko},4:{n:"Author",t:Ko},5:{n:"Keywords",t:Ko},6:{n:"Comments",t:Ko},7:{n:"Template",t:Ko},8:{n:"LastAuthor",t:Ko},9:{n:"RevNumber",t:Ko},10:{n:"EditTime",t:$C},11:{n:"LastPrinted",t:$C},12:{n:"CreatedDate",t:$C},13:{n:"ModifiedDate",t:$C},14:{n:"PageCount",t:zc},15:{n:"WordCount",t:zc},16:{n:"CharCount",t:zc},17:{n:"Thumbnail",t:o5e},18:{n:"Application",t:Ko},19:{n:"DocSecurity",t:zc},255:{},2147483648:{n:"Locale",t:qS},2147483651:{n:"Behavior",t:qS},1919054434:{}},kH={1:"US",2:"CA",3:"",7:"RU",20:"EG",30:"GR",31:"NL",32:"BE",33:"FR",34:"ES",36:"HU",39:"IT",41:"CH",43:"AT",44:"GB",45:"DK",46:"SE",47:"NO",48:"PL",49:"DE",52:"MX",55:"BR",61:"AU",64:"NZ",66:"TH",81:"JP",82:"KR",84:"VN",86:"CN",90:"TR",105:"JS",213:"DZ",216:"MA",218:"LY",351:"PT",354:"IS",358:"FI",420:"CZ",886:"TW",961:"LB",962:"JO",963:"SY",964:"IQ",965:"KW",966:"SA",971:"AE",972:"IL",974:"QA",981:"IR",65535:"US"},d5e=[null,"solid","mediumGray","darkGray","lightGray","darkHorizontal","darkVertical","darkDown","darkUp","darkGrid","darkTrellis","lightHorizontal","lightVertical","lightDown","lightUp","lightGrid","lightTrellis","gray125","gray0625"];function f5e(t){return t.map(function(e){return[e>>16&255,e>>8&255,e&255]})}var h5e=f5e([0,16777215,16711680,65280,255,16776960,16711935,65535,0,16777215,16711680,65280,255,16776960,16711935,65535,8388608,32768,128,8421376,8388736,32896,12632256,8421504,10066431,10040166,16777164,13434879,6684774,16744576,26316,13421823,128,16711935,16776960,65535,8388736,8388608,32896,255,52479,13434879,13434828,16777113,10079487,16751052,13408767,16764057,3368703,3394764,10079232,16763904,16750848,16737792,6710937,9868950,13158,3381606,13056,3355392,10040064,10040166,3355545,3355443,16777215,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0]),Lp=Os(h5e),RA={0:"#NULL!",7:"#DIV/0!",15:"#VALUE!",23:"#REF!",29:"#NAME?",36:"#NUM!",42:"#N/A",43:"#GETTING_DATA",255:"#WTF?"},qne={"#NULL!":0,"#DIV/0!":7,"#VALUE!":15,"#REF!":23,"#NAME?":29,"#NUM!":36,"#N/A":42,"#GETTING_DATA":43,"#WTF?":255},Jk={"application/vnd.openxmlformats-officedocument.spreadsheetml.sheet.main+xml":"workbooks","application/vnd.ms-excel.sheet.macroEnabled.main+xml":"workbooks","application/vnd.ms-excel.sheet.binary.macroEnabled.main":"workbooks","application/vnd.ms-excel.addin.macroEnabled.main+xml":"workbooks","application/vnd.openxmlformats-officedocument.spreadsheetml.template.main+xml":"workbooks","application/vnd.openxmlformats-officedocument.spreadsheetml.worksheet+xml":"sheets","application/vnd.ms-excel.worksheet":"sheets","application/vnd.ms-excel.binIndexWs":"TODO","application/vnd.openxmlformats-officedocument.spreadsheetml.chartsheet+xml":"charts","application/vnd.ms-excel.chartsheet":"charts","application/vnd.ms-excel.macrosheet+xml":"macros","application/vnd.ms-excel.macrosheet":"macros","application/vnd.ms-excel.intlmacrosheet":"TODO","application/vnd.ms-excel.binIndexMs":"TODO","application/vnd.openxmlformats-officedocument.spreadsheetml.dialogsheet+xml":"dialogs","application/vnd.ms-excel.dialogsheet":"dialogs","application/vnd.openxmlformats-officedocument.spreadsheetml.sharedStrings+xml":"strs","application/vnd.ms-excel.sharedStrings":"strs","application/vnd.openxmlformats-officedocument.spreadsheetml.styles+xml":"styles","application/vnd.ms-excel.styles":"styles","application/vnd.openxmlformats-package.core-properties+xml":"coreprops","application/vnd.openxmlformats-officedocument.custom-properties+xml":"custprops","application/vnd.openxmlformats-officedocument.extended-properties+xml":"extprops","application/vnd.openxmlformats-officedocument.customXmlProperties+xml":"TODO","application/vnd.openxmlformats-officedocument.spreadsheetml.customProperty":"TODO","application/vnd.openxmlformats-officedocument.spreadsheetml.comments+xml":"comments","application/vnd.ms-excel.comments":"comments","application/vnd.ms-excel.threadedcomments+xml":"threadedcomments","application/vnd.ms-excel.person+xml":"people","application/vnd.openxmlformats-officedocument.spreadsheetml.sheetMetadata+xml":"metadata","application/vnd.ms-excel.sheetMetadata":"metadata","application/vnd.ms-excel.pivotTable":"TODO","application/vnd.openxmlformats-officedocument.spreadsheetml.pivotTable+xml":"TODO","application/vnd.openxmlformats-officedocument.drawingml.chart+xml":"TODO","application/vnd.ms-office.chartcolorstyle+xml":"TODO","application/vnd.ms-office.chartstyle+xml":"TODO","application/vnd.ms-office.chartex+xml":"TODO","application/vnd.ms-excel.calcChain":"calcchains","application/vnd.openxmlformats-officedocument.spreadsheetml.calcChain+xml":"calcchains","application/vnd.openxmlformats-officedocument.spreadsheetml.printerSettings":"TODO","application/vnd.ms-office.activeX":"TODO","application/vnd.ms-office.activeX+xml":"TODO","application/vnd.ms-excel.attachedToolbars":"TODO","application/vnd.ms-excel.connections":"TODO","application/vnd.openxmlformats-officedocument.spreadsheetml.connections+xml":"TODO","application/vnd.ms-excel.externalLink":"links","application/vnd.openxmlformats-officedocument.spreadsheetml.externalLink+xml":"links","application/vnd.ms-excel.pivotCacheDefinition":"TODO","application/vnd.ms-excel.pivotCacheRecords":"TODO","application/vnd.openxmlformats-officedocument.spreadsheetml.pivotCacheDefinition+xml":"TODO","application/vnd.openxmlformats-officedocument.spreadsheetml.pivotCacheRecords+xml":"TODO","application/vnd.ms-excel.queryTable":"TODO","application/vnd.openxmlformats-officedocument.spreadsheetml.queryTable+xml":"TODO","application/vnd.ms-excel.userNames":"TODO","application/vnd.ms-excel.revisionHeaders":"TODO","application/vnd.ms-excel.revisionLog":"TODO","application/vnd.openxmlformats-officedocument.spreadsheetml.revisionHeaders+xml":"TODO","application/vnd.openxmlformats-officedocument.spreadsheetml.revisionLog+xml":"TODO","application/vnd.openxmlformats-officedocument.spreadsheetml.userNames+xml":"TODO","application/vnd.ms-excel.tableSingleCells":"TODO","application/vnd.openxmlformats-officedocument.spreadsheetml.tableSingleCells+xml":"TODO","application/vnd.ms-excel.slicer":"TODO","application/vnd.ms-excel.slicerCache":"TODO","application/vnd.ms-excel.slicer+xml":"TODO","application/vnd.ms-excel.slicerCache+xml":"TODO","application/vnd.ms-excel.wsSortMap":"TODO","application/vnd.ms-excel.table":"TODO","application/vnd.openxmlformats-officedocument.spreadsheetml.table+xml":"TODO","application/vnd.openxmlformats-officedocument.theme+xml":"themes","application/vnd.openxmlformats-officedocument.themeOverride+xml":"TODO","application/vnd.ms-excel.Timeline+xml":"TODO","application/vnd.ms-excel.TimelineCache+xml":"TODO","application/vnd.ms-office.vbaProject":"vba","application/vnd.ms-office.vbaProjectSignature":"TODO","application/vnd.ms-office.volatileDependencies":"TODO","application/vnd.openxmlformats-officedocument.spreadsheetml.volatileDependencies+xml":"TODO","application/vnd.ms-excel.controlproperties+xml":"TODO","application/vnd.openxmlformats-officedocument.model+data":"TODO","application/vnd.ms-excel.Survey+xml":"TODO","application/vnd.openxmlformats-officedocument.drawing+xml":"drawings","application/vnd.openxmlformats-officedocument.drawingml.chartshapes+xml":"TODO","application/vnd.openxmlformats-officedocument.drawingml.diagramColors+xml":"TODO","application/vnd.openxmlformats-officedocument.drawingml.diagramData+xml":"TODO","application/vnd.openxmlformats-officedocument.drawingml.diagramLayout+xml":"TODO","application/vnd.openxmlformats-officedocument.drawingml.diagramStyle+xml":"TODO","application/vnd.openxmlformats-officedocument.vmlDrawing":"TODO","application/vnd.openxmlformats-package.relationships+xml":"rels","application/vnd.openxmlformats-officedocument.oleObject":"TODO","image/png":"TODO",sheet:"js"},GC={workbooks:{xlsx:"application/vnd.openxmlformats-officedocument.spreadsheetml.sheet.main+xml",xlsm:"application/vnd.ms-excel.sheet.macroEnabled.main+xml",xlsb:"application/vnd.ms-excel.sheet.binary.macroEnabled.main",xlam:"application/vnd.ms-excel.addin.macroEnabled.main+xml",xltx:"application/vnd.openxmlformats-officedocument.spreadsheetml.template.main+xml"},strs:{xlsx:"application/vnd.openxmlformats-officedocument.spreadsheetml.sharedStrings+xml",xlsb:"application/vnd.ms-excel.sharedStrings"},comments:{xlsx:"application/vnd.openxmlformats-officedocument.spreadsheetml.comments+xml",xlsb:"application/vnd.ms-excel.comments"},sheets:{xlsx:"application/vnd.openxmlformats-officedocument.spreadsheetml.worksheet+xml",xlsb:"application/vnd.ms-excel.worksheet"},charts:{xlsx:"application/vnd.openxmlformats-officedocument.spreadsheetml.chartsheet+xml",xlsb:"application/vnd.ms-excel.chartsheet"},dialogs:{xlsx:"application/vnd.openxmlformats-officedocument.spreadsheetml.dialogsheet+xml",xlsb:"application/vnd.ms-excel.dialogsheet"},macros:{xlsx:"application/vnd.ms-excel.macrosheet+xml",xlsb:"application/vnd.ms-excel.macrosheet"},metadata:{xlsx:"application/vnd.openxmlformats-officedocument.spreadsheetml.sheetMetadata+xml",xlsb:"application/vnd.ms-excel.sheetMetadata"},styles:{xlsx:"application/vnd.openxmlformats-officedocument.spreadsheetml.styles+xml",xlsb:"application/vnd.ms-excel.styles"}};function AR(){return{workbooks:[],sheets:[],charts:[],dialogs:[],macros:[],rels:[],strs:[],comments:[],threadedcomments:[],links:[],coreprops:[],extprops:[],custprops:[],themes:[],styles:[],calcchains:[],vba:[],drawings:[],metadata:[],people:[],TODO:[],xmlns:""}}function A5e(t){var e=AR();if(!t||!t.match)return e;var r={};if((t.match(lc)||[]).forEach(function(n){var a=Dn(n);switch(a[0].replace(C3e,"<")){case"<?xml":break;case"<Types":e.xmlns=a["xmlns"+(a[0].match(/<(\w+):/)||["",""])[1]];break;case"<Default":r[a.Extension]=a.ContentType;break;case"<Override":e[Jk[a.ContentType]]!==void 0&&e[Jk[a.ContentType]].push(a.PartName);break}}),e.xmlns!==So.CT)throw new Error("Unknown Namespace: "+e.xmlns);return e.calcchain=e.calcchains.length>0?e.calcchains[0]:"",e.sst=e.strs.length>0?e.strs[0]:"",e.style=e.styles.length>0?e.styles[0]:"",e.defaults=r,delete e.calcchains,e}function zne(t,e){var r=A3e(Jk),n=[],a;n[n.length]=zi,n[n.length]=Ur("Types",null,{xmlns:So.CT,"xmlns:xsd":So.xsd,"xmlns:xsi":So.xsi}),n=n.concat([["xml","application/xml"],["bin","application/vnd.ms-excel.sheet.binary.macroEnabled.main"],["vml","application/vnd.openxmlformats-officedocument.vmlDrawing"],["data","application/vnd.openxmlformats-officedocument.model+data"],["bmp","image/bmp"],["png","image/png"],["gif","image/gif"],["emf","image/x-emf"],["wmf","image/x-wmf"],["jpg","image/jpeg"],["jpeg","image/jpeg"],["tif","image/tiff"],["tiff","image/tiff"],["pdf","application/pdf"],["rels","application/vnd.openxmlformats-package.relationships+xml"]].map(function(c){return Ur("Default",null,{Extension:c[0],ContentType:c[1]})}));var s=function(c){t[c]&&t[c].length>0&&(a=t[c][0],n[n.length]=Ur("Override",null,{PartName:(a[0]=="/"?"":"/")+a,ContentType:GC[c][e.bookType]||GC[c].xlsx}))},o=function(c){(t[c]||[]).forEach(function(u){n[n.length]=Ur("Override",null,{PartName:(u[0]=="/"?"":"/")+u,ContentType:GC[c][e.bookType]||GC[c].xlsx})})},l=function(c){(t[c]||[]).forEach(function(u){n[n.length]=Ur("Override",null,{PartName:(u[0]=="/"?"":"/")+u,ContentType:r[c][0]})})};return s("workbooks"),o("sheets"),o("charts"),l("themes"),["strs","styles"].forEach(s),["coreprops","extprops","custprops"].forEach(l),l("vba"),l("comments"),l("threadedcomments"),l("drawings"),o("metadata"),l("people"),n.length>2&&(n[n.length]="</Types>",n[1]=n[1].replace("/>",">")),n.join("")}var ia={WB:"http://schemas.openxmlformats.org/officeDocument/2006/relationships/officeDocument",SHEET:"http://sheetjs.openxmlformats.org/officeDocument/2006/relationships/officeDocument",HLINK:"http://schemas.openxmlformats.org/officeDocument/2006/relationships/hyperlink",VML:"http://schemas.openxmlformats.org/officeDocument/2006/relationships/vmlDrawing",XPATH:"http://schemas.openxmlformats.org/officeDocument/2006/relationships/externalLinkPath",XMISS:"http://schemas.microsoft.com/office/2006/relationships/xlExternalLinkPath/xlPathMissing",XLINK:"http://schemas.openxmlformats.org/officeDocument/2006/relationships/externalLink",CXML:"http://schemas.openxmlformats.org/officeDocument/2006/relationships/customXml",CXMLP:"http://schemas.openxmlformats.org/officeDocument/2006/relationships/customXmlProps",CMNT:"http://schemas.openxmlformats.org/officeDocument/2006/relationships/comments",CORE_PROPS:"http://schemas.openxmlformats.org/package/2006/relationships/metadata/core-properties",EXT_PROPS:"http://schemas.openxmlformats.org/officeDocument/2006/relationships/extended-properties",CUST_PROPS:"http://schemas.openxmlformats.org/officeDocument/2006/relationships/custom-properties",SST:"http://schemas.openxmlformats.org/officeDocument/2006/relationships/sharedStrings",STY:"http://schemas.openxmlformats.org/officeDocument/2006/relationships/styles",THEME:"http://schemas.openxmlformats.org/officeDocument/2006/relationships/theme",CHART:"http://schemas.openxmlformats.org/officeDocument/2006/relationships/chart",CHARTEX:"http://schemas.microsoft.com/office/2014/relationships/chartEx",CS:"http://schemas.openxmlformats.org/officeDocument/2006/relationships/chartsheet",WS:["http://schemas.openxmlformats.org/officeDocument/2006/relationships/worksheet","http://purl.oclc.org/ooxml/officeDocument/relationships/worksheet"],DS:"http://schemas.openxmlformats.org/officeDocument/2006/relationships/dialogsheet",MS:"http://schemas.microsoft.com/office/2006/relationships/xlMacrosheet",IMG:"http://schemas.openxmlformats.org/officeDocument/2006/relationships/image",DRAW:"http://schemas.openxmlformats.org/officeDocument/2006/relationships/drawing",XLMETA:"http://schemas.openxmlformats.org/officeDocument/2006/relationships/sheetMetadata",TCMNT:"http://schemas.microsoft.com/office/2017/10/relationships/threadedComment",PEOPLE:"http://schemas.microsoft.com/office/2017/10/relationships/person",VBA:"http://schemas.microsoft.com/office/2006/relationships/vbaProject"};function O2(t){var e=t.lastIndexOf("/");return t.slice(0,e+1)+"_rels/"+t.slice(e+1)+".rels"}function Fb(t,e){var r={"!id":{}};if(!t)return r;e.charAt(0)!=="/"&&(e="/"+e);var n={};return(t.match(lc)||[]).forEach(function(a){var s=Dn(a);if(s[0]==="<Relationship"){var o={};o.Type=s.Type,o.Target=s.Target,o.Id=s.Id,s.TargetMode&&(o.TargetMode=s.TargetMode);var l=s.TargetMode==="External"?s.Target:Xy(s.Target,e);r[l]=o,n[s.Id]=o}}),r["!id"]=n,r}function pv(t){var e=[zi,Ur("Relationships",null,{xmlns:So.RELS})];return Ii(t["!id"]).forEach(function(r){e[e.length]=Ur("Relationship",null,t["!id"][r])}),e.length>2&&(e[e.length]="</Relationships>",e[1]=e[1].replace("/>",">")),e.join("")}function Ya(t,e,r,n,a,s){if(a||(a={}),t["!id"]||(t["!id"]={}),t["!idx"]||(t["!idx"]=1),e<0)for(e=t["!idx"];t["!id"]["rId"+e];++e);if(t["!idx"]=e+1,a.Id="rId"+e,a.Type=n,a.Target=r,[ia.HLINK,ia.XPATH,ia.XMISS].indexOf(a.Type)>-1&&(a.TargetMode="External"),t["!id"][a.Id])throw new Error("Cannot rewrite rId "+e);return t["!id"][a.Id]=a,t[("/"+a.Target).replace("//","/")]=a,e}var m5e="application/vnd.oasis.opendocument.spreadsheet";function p5e(t,e){for(var r=aR(t),n,a;n=F2.exec(r);)switch(n[3]){case"manifest":break;case"file-entry":if(a=Dn(n[0],!1),a.path=="/"&&a.type!==m5e)throw new Error("This OpenDocument is not a spreadsheet");break;case"encryption-data":case"algorithm":case"start-key-generation":case"key-derivation":throw new Error("Unsupported ODS Encryption");default:if(e&&e.WTF)throw n}}function g5e(t){var e=[zi];e.push(`<manifest:manifest xmlns:manifest="urn:oasis:names:tc:opendocument:xmlns:manifest:1.0" manifest:version="1.2">
`),e.push(`  <manifest:file-entry manifest:full-path="/" manifest:version="1.2" manifest:media-type="application/vnd.oasis.opendocument.spreadsheet"/>
`);for(var r=0;r<t.length;++r)e.push('  <manifest:file-entry manifest:full-path="'+t[r][0]+'" manifest:media-type="'+t[r][1]+`"/>
`);return e.push("</manifest:manifest>"),e.join("")}function FH(t,e,r){return['  <rdf:Description rdf:about="'+t+`">
`,'    <rdf:type rdf:resource="http://docs.oasis-open.org/ns/office/1.2/meta/'+(r||"odf")+"#"+e+`"/>
`,`  </rdf:Description>
`].join("")}function x5e(t,e){return['  <rdf:Description rdf:about="'+t+`">
`,'    <ns0:hasPart xmlns:ns0="http://docs.oasis-open.org/ns/office/1.2/meta/pkg#" rdf:resource="'+e+`"/>
`,`  </rdf:Description>
`].join("")}function v5e(t){var e=[zi];e.push(`<rdf:RDF xmlns:rdf="http://www.w3.org/1999/02/22-rdf-syntax-ns#">
`);for(var r=0;r!=t.length;++r)e.push(FH(t[r][0],t[r][1])),e.push(x5e("",t[r][0]));return e.push(FH("","Document","pkg")),e.push("</rdf:RDF>"),e.join("")}function Wne(){return'<office:document-meta xmlns:office="urn:oasis:names:tc:opendocument:xmlns:office:1.0" xmlns:meta="urn:oasis:names:tc:opendocument:xmlns:meta:1.0" xmlns:dc="http://purl.org/dc/elements/1.1/" xmlns:xlink="http://www.w3.org/1999/xlink" office:version="1.2"><office:meta><meta:generator>SheetJS '+LS.version+"</meta:generator></office:meta></office:document-meta>"}var Pd=[["cp:category","Category"],["cp:contentStatus","ContentStatus"],["cp:keywords","Keywords"],["cp:lastModifiedBy","LastAuthor"],["cp:lastPrinted","LastPrinted"],["cp:revision","RevNumber"],["cp:version","Version"],["dc:creator","Author"],["dc:description","Comments"],["dc:identifier","Identifier"],["dc:language","Language"],["dc:subject","Subject"],["dc:title","Title"],["dcterms:created","CreatedDate","date"],["dcterms:modified","ModifiedDate","date"]],y5e=function(){for(var t=new Array(Pd.length),e=0;e<Pd.length;++e){var r=Pd[e],n="(?:"+r[0].slice(0,r[0].indexOf(":"))+":)"+r[0].slice(r[0].indexOf(":")+1);t[e]=new RegExp("<"+n+"[^>]*>([\\s\\S]*?)</"+n+">")}return t}();function Xne(t){var e={};t=ls(t);for(var r=0;r<Pd.length;++r){var n=Pd[r],a=t.match(y5e[r]);a!=null&&a.length>0&&(e[n[1]]=_a(a[1])),n[2]==="date"&&e[n[1]]&&(e[n[1]]=Fs(e[n[1]]))}return e}function j5(t,e,r,n,a){a[t]!=null||e==null||e===""||(a[t]=e,e=ts(e),n[n.length]=r?Ur(t,e,r):El(t,e))}function Yne(t,e){var r=e||{},n=[zi,Ur("cp:coreProperties",null,{"xmlns:cp":So.CORE_PROPS,"xmlns:dc":So.dc,"xmlns:dcterms":So.dcterms,"xmlns:dcmitype":So.dcmitype,"xmlns:xsi":So.xsi})],a={};if(!t&&!r.Props)return n.join("");t&&(t.CreatedDate!=null&&j5("dcterms:created",typeof t.CreatedDate=="string"?t.CreatedDate:zk(t.CreatedDate,r.WTF),{"xsi:type":"dcterms:W3CDTF"},n,a),t.ModifiedDate!=null&&j5("dcterms:modified",typeof t.ModifiedDate=="string"?t.ModifiedDate:zk(t.ModifiedDate,r.WTF),{"xsi:type":"dcterms:W3CDTF"},n,a));for(var s=0;s!=Pd.length;++s){var o=Pd[s],l=r.Props&&r.Props[o[1]]!=null?r.Props[o[1]]:t?t[o[1]]:null;l===!0?l="1":l===!1?l="0":typeof l=="number"&&(l=String(l)),l!=null&&j5(o[0],l,null,n,a)}return n.length>2&&(n[n.length]="</cp:coreProperties>",n[1]=n[1].replace("/>",">")),n.join("")}var Up=[["Application","Application","string"],["AppVersion","AppVersion","string"],["Company","Company","string"],["DocSecurity","DocSecurity","string"],["Manager","Manager","string"],["HyperlinksChanged","HyperlinksChanged","bool"],["SharedDoc","SharedDoc","bool"],["LinksUpToDate","LinksUpToDate","bool"],["ScaleCrop","ScaleCrop","bool"],["HeadingPairs","HeadingPairs","raw"],["TitlesOfParts","TitlesOfParts","raw"]],Jne=["Worksheets","SheetNames","NamedRanges","DefinedNames","Chartsheets","ChartNames"];function Zne(t,e,r,n){var a=[];if(typeof t=="string")a=CH(t,n);else for(var s=0;s<t.length;++s)a=a.concat(t[s].map(function(d){return{v:d}}));var o=typeof e=="string"?CH(e,n).map(function(d){return d.v}):e,l=0,c=0;if(o.length>0)for(var u=0;u!==a.length;u+=2){switch(c=+a[u+1].v,a[u].v){case"Worksheets":case"":case"":case" ":case"":case" ":case"Arbeitsbltter":case"alma Sayfalar":case"Feuilles de calcul":case"Fogli di lavoro":case"Folhas de clculo":case"Planilhas":case"Regneark":case"Hojas de clculo":case"Werkbladen":r.Worksheets=c,r.SheetNames=o.slice(l,l+c);break;case"Named Ranges":case"Rangos con nombre":case"":case"Benannte Bereiche":case"Navngivne omrder":r.NamedRanges=c,r.DefinedNames=o.slice(l,l+c);break;case"Charts":case"Diagramme":r.Chartsheets=c,r.ChartNames=o.slice(l,l+c);break}l+=c}}function b5e(t,e,r){var n={};return e||(e={}),t=ls(t),Up.forEach(function(a){var s=(t.match(T2(a[0]))||[])[1];switch(a[2]){case"string":s&&(e[a[1]]=_a(s));break;case"bool":e[a[1]]=s==="true";break;case"raw":var o=t.match(new RegExp("<"+a[0]+"[^>]*>([\\s\\S]*?)</"+a[0]+">"));o&&o.length>0&&(n[a[1]]=o[1]);break}}),n.HeadingPairs&&n.TitlesOfParts&&Zne(n.HeadingPairs,n.TitlesOfParts,e,r),e}function eae(t){var e=[],r=Ur;return t||(t={}),t.Application="SheetJS",e[e.length]=zi,e[e.length]=Ur("Properties",null,{xmlns:So.EXT_PROPS,"xmlns:vt":So.vt}),Up.forEach(function(n){if(t[n[1]]!==void 0){var a;switch(n[2]){case"string":a=ts(String(t[n[1]]));break;case"bool":a=t[n[1]]?"true":"false";break}a!==void 0&&(e[e.length]=r(n[0],a))}}),e[e.length]=r("HeadingPairs",r("vt:vector",r("vt:variant","<vt:lpstr>Worksheets</vt:lpstr>")+r("vt:variant",r("vt:i4",String(t.Worksheets))),{size:2,baseType:"variant"})),e[e.length]=r("TitlesOfParts",r("vt:vector",t.SheetNames.map(function(n){return"<vt:lpstr>"+ts(n)+"</vt:lpstr>"}).join(""),{size:t.Worksheets,baseType:"lpstr"})),e.length>2&&(e[e.length]="</Properties>",e[1]=e[1].replace("/>",">")),e.join("")}var w5e=/<[^>]+>[^<]*/g;function N5e(t,e){var r={},n="",a=t.match(w5e);if(a)for(var s=0;s!=a.length;++s){var o=a[s],l=Dn(o);switch(l[0]){case"<?xml":break;case"<Properties":break;case"<property":n=_a(l.name);break;case"</property>":n=null;break;default:if(o.indexOf("<vt:")===0){var c=o.split(">"),u=c[0].slice(4),d=c[1];switch(u){case"lpstr":case"bstr":case"lpwstr":r[n]=_a(d);break;case"bool":r[n]=Ps(d);break;case"i1":case"i2":case"i4":case"i8":case"int":case"uint":r[n]=parseInt(d,10);break;case"r4":case"r8":case"decimal":r[n]=parseFloat(d);break;case"filetime":case"date":r[n]=Fs(d);break;case"cy":case"error":r[n]=_a(d);break;default:if(u.slice(-1)=="/")break;e.WTF&&typeof console<"u"&&console.warn("Unexpected",o,u,c)}}else if(o.slice(0,2)!=="</"){if(e.WTF)throw new Error(o)}}}return r}function tae(t){var e=[zi,Ur("Properties",null,{xmlns:So.CUST_PROPS,"xmlns:vt":So.vt})];if(!t)return e.join("");var r=1;return Ii(t).forEach(function(a){++r,e[e.length]=Ur("property",T3e(t[a]),{fmtid:"{D5CDD505-2E9C-101B-9397-08002B2CF9AE}",pid:r,name:ts(a)})}),e.length>2&&(e[e.length]="</Properties>",e[1]=e[1].replace("/>",">")),e.join("")}var Zk={Title:"Title",Subject:"Subject",Author:"Author",Keywords:"Keywords",Comments:"Description",LastAuthor:"LastAuthor",RevNumber:"Revision",Application:"AppName",LastPrinted:"LastPrinted",CreatedDate:"Created",ModifiedDate:"LastSaved",Category:"Category",Manager:"Manager",Company:"Company",AppVersion:"Version",ContentStatus:"ContentStatus",Identifier:"Identifier",Language:"Language"},P5;function C5e(t,e,r){P5||(P5=lP(Zk)),e=P5[e]||e,t[e]=r}function _5e(t,e){var r=[];return Ii(Zk).map(function(n){for(var a=0;a<Pd.length;++a)if(Pd[a][1]==n)return Pd[a];for(a=0;a<Up.length;++a)if(Up[a][1]==n)return Up[a];throw n}).forEach(function(n){if(t[n[1]]!=null){var a=e&&e.Props&&e.Props[n[1]]!=null?e.Props[n[1]]:t[n[1]];switch(n[2]){case"date":a=new Date(a).toISOString().replace(/\.\d*Z/,"Z");break}typeof a=="number"?a=String(a):a===!0||a===!1?a=a?"1":"0":a instanceof Date&&(a=new Date(a).toISOString().replace(/\.\d*Z/,"")),r.push(El(Zk[n[1]]||n[1],a))}}),Ur("DocumentProperties",r.join(""),{xmlns:Iu.o})}function E5e(t,e){var r=["Worksheets","SheetNames"],n="CustomDocumentProperties",a=[];return t&&Ii(t).forEach(function(s){if(Object.prototype.hasOwnProperty.call(t,s)){for(var o=0;o<Pd.length;++o)if(s==Pd[o][1])return;for(o=0;o<Up.length;++o)if(s==Up[o][1])return;for(o=0;o<r.length;++o)if(s==r[o])return;var l=t[s],c="string";typeof l=="number"?(c="float",l=String(l)):l===!0||l===!1?(c="boolean",l=l?"1":"0"):l=String(l),a.push(Ur(yH(s),l,{"dt:dt":c}))}}),e&&Ii(e).forEach(function(s){if(Object.prototype.hasOwnProperty.call(e,s)&&!(t&&Object.prototype.hasOwnProperty.call(t,s))){var o=e[s],l="string";typeof o=="number"?(l="float",o=String(o)):o===!0||o===!1?(l="boolean",o=o?"1":"0"):o instanceof Date?(l="dateTime.tz",o=o.toISOString()):o=String(o),a.push(Ur(yH(s),o,{"dt:dt":l}))}}),"<"+n+' xmlns="'+Iu.o+'">'+a.join("")+"</"+n+">"}function mR(t){var e=t.read_shift(4),r=t.read_shift(4);return new Date((r/1e7*Math.pow(2,32)+e/1e7-11644473600)*1e3).toISOString().replace(/\.000/,"")}function S5e(t){var e=typeof t=="string"?new Date(Date.parse(t)):t,r=e.getTime()/1e3+11644473600,n=r%Math.pow(2,32),a=(r-n)/Math.pow(2,32);n*=1e7,a*=1e7;var s=n/Math.pow(2,32)|0;s>0&&(n=n%Math.pow(2,32),a+=s);var o=nr(8);return o.write_shift(4,n),o.write_shift(4,a),o}function rae(t,e,r){var n=t.l,a=t.read_shift(0,"lpstr-cp");if(r)for(;t.l-n&3;)++t.l;return a}function nae(t,e,r){var n=t.read_shift(0,"lpwstr");return n}function aae(t,e,r){return e===31?nae(t):rae(t,e,r)}function eF(t,e,r){return aae(t,e,r===!1?0:4)}function I5e(t,e){if(!e)throw new Error("VtUnalignedString must have positive length");return aae(t,e,0)}function j5e(t){for(var e=t.read_shift(4),r=[],n=0;n!=e;++n){var a=t.l;r[n]=t.read_shift(0,"lpwstr").replace(jc,""),t.l-a&2&&(t.l+=2)}return r}function P5e(t){for(var e=t.read_shift(4),r=[],n=0;n!=e;++n)r[n]=t.read_shift(0,"lpstr-cp").replace(jc,"");return r}function B5e(t){var e=t.l,r=zS(t,Kne);t[t.l]==0&&t[t.l+1]==0&&t.l-e&2&&(t.l+=2);var n=zS(t,zc);return[r,n]}function T5e(t){for(var e=t.read_shift(4),r=[],n=0;n<e/2;++n)r.push(B5e(t));return r}function OH(t,e){for(var r=t.read_shift(4),n={},a=0;a!=r;++a){var s=t.read_shift(4),o=t.read_shift(4);n[s]=t.read_shift(o,e===1200?"utf16le":"utf8").replace(jc,"").replace(Wy,"!"),e===1200&&o%2&&(t.l+=2)}return t.l&3&&(t.l=t.l>>3<<2),n}function sae(t){var e=t.read_shift(4),r=t.slice(t.l,t.l+e);return t.l+=e,(e&3)>0&&(t.l+=4-(e&3)&3),r}function k5e(t){var e={};return e.Size=t.read_shift(4),t.l+=e.Size+3-(e.Size-1)%4,e}function zS(t,e,r){var n=t.read_shift(2),a,s=r||{};if(t.l+=2,e!==TH&&n!==e&&u5e.indexOf(e)===-1&&!((e&65534)==4126&&(n&65534)==4126))throw new Error("Expected type "+e+" saw "+n);switch(e===TH?n:e){case 2:return a=t.read_shift(2,"i"),s.raw||(t.l+=2),a;case 3:return a=t.read_shift(4,"i"),a;case 11:return t.read_shift(4)!==0;case 19:return a=t.read_shift(4),a;case 30:return rae(t,n,4).replace(jc,"");case 31:return nae(t);case 64:return mR(t);case 65:return sae(t);case 71:return k5e(t);case 80:return eF(t,n,!s.raw).replace(jc,"");case 81:return I5e(t,n).replace(jc,"");case 4108:return T5e(t);case 4126:case 4127:return n==4127?j5e(t):P5e(t);default:throw new Error("TypedPropertyValue unrecognized type "+e+" "+n)}}function DH(t,e){var r=nr(4),n=nr(4);switch(r.write_shift(4,t==80?31:t),t){case 3:n.write_shift(-4,e);break;case 5:n=nr(8),n.write_shift(8,e,"f");break;case 11:n.write_shift(4,e?1:0);break;case 64:n=S5e(e);break;case 31:case 80:for(n=nr(4+2*(e.length+1)+(e.length%2?0:2)),n.write_shift(4,e.length+1),n.write_shift(0,e,"dbcs");n.l!=n.length;)n.write_shift(1,0);break;default:throw new Error("TypedPropertyValue unrecognized type "+t+" "+e)}return Xo([r,n])}function RH(t,e){var r=t.l,n=t.read_shift(4),a=t.read_shift(4),s=[],o=0,l=0,c=-1,u={};for(o=0;o!=a;++o){var d=t.read_shift(4),f=t.read_shift(4);s[o]=[d,f+r]}s.sort(function(y,b){return y[1]-b[1]});var A={};for(o=0;o!=a;++o){if(t.l!==s[o][1]){var h=!0;if(o>0&&e)switch(e[s[o-1][0]].t){case 2:t.l+2===s[o][1]&&(t.l+=2,h=!1);break;case 80:t.l<=s[o][1]&&(t.l=s[o][1],h=!1);break;case 4108:t.l<=s[o][1]&&(t.l=s[o][1],h=!1);break}if((!e||o==0)&&t.l<=s[o][1]&&(h=!1,t.l=s[o][1]),h)throw new Error("Read Error: Expected address "+s[o][1]+" at "+t.l+" :"+o)}if(e){var m=e[s[o][0]];if(A[m.n]=zS(t,m.t,{raw:!0}),m.p==="version"&&(A[m.n]=String(A[m.n]>>16)+"."+("0000"+String(A[m.n]&65535)).slice(-4)),m.n=="CodePage")switch(A[m.n]){case 0:A[m.n]=1252;case 874:case 932:case 936:case 949:case 950:case 1250:case 1251:case 1253:case 1254:case 1255:case 1256:case 1257:case 1258:case 1e4:case 1200:case 1201:case 1252:case 65e3:case-536:case 65001:case-535:ff(l=A[m.n]>>>0&65535);break;default:throw new Error("Unsupported CodePage: "+A[m.n])}}else if(s[o][0]===1){if(l=A.CodePage=zS(t,hR),ff(l),c!==-1){var p=t.l;t.l=s[c][1],u=OH(t,l),t.l=p}}else if(s[o][0]===0){if(l===0){c=o,t.l=s[o+1][1];continue}u=OH(t,l)}else{var x=u[s[o][0]],v;switch(t[t.l]){case 65:t.l+=4,v=sae(t);break;case 30:t.l+=4,v=eF(t,t[t.l-4]).replace(/\u0000+$/,"");break;case 31:t.l+=4,v=eF(t,t[t.l-4]).replace(/\u0000+$/,"");break;case 3:t.l+=4,v=t.read_shift(4,"i");break;case 19:t.l+=4,v=t.read_shift(4);break;case 5:t.l+=4,v=t.read_shift(8,"f");break;case 11:t.l+=4,v=Di(t,4);break;case 64:t.l+=4,v=Fs(mR(t));break;default:throw new Error("unparsed value: "+t[t.l])}A[x]=v}}return t.l=r+n,A}var iae=["CodePage","Thumbnail","_PID_LINKBASE","_PID_HLINKS","SystemIdentifier","FMTID"];function F5e(t){switch(typeof t){case"boolean":return 11;case"number":return(t|0)==t?3:5;case"string":return 31;case"object":if(t instanceof Date)return 64;break}return-1}function MH(t,e,r){var n=nr(8),a=[],s=[],o=8,l=0,c=nr(8),u=nr(8);if(c.write_shift(4,2),c.write_shift(4,1200),u.write_shift(4,1),s.push(c),a.push(u),o+=8+c.length,!e){u=nr(8),u.write_shift(4,0),a.unshift(u);var d=[nr(4)];for(d[0].write_shift(4,t.length),l=0;l<t.length;++l){var f=t[l][0];for(c=nr(8+2*(f.length+1)+(f.length%2?0:2)),c.write_shift(4,l+2),c.write_shift(4,f.length+1),c.write_shift(0,f,"dbcs");c.l!=c.length;)c.write_shift(1,0);d.push(c)}c=Xo(d),s.unshift(c),o+=8+c.length}for(l=0;l<t.length;++l)if(!(e&&!e[t[l][0]])&&!(iae.indexOf(t[l][0])>-1||Jne.indexOf(t[l][0])>-1)&&t[l][1]!=null){var A=t[l][1],h=0;if(e){h=+e[t[l][0]];var m=r[h];if(m.p=="version"&&typeof A=="string"){var p=A.split(".");A=(+p[0]<<16)+(+p[1]||0)}c=DH(m.t,A)}else{var x=F5e(A);x==-1&&(x=31,A=String(A)),c=DH(x,A)}s.push(c),u=nr(8),u.write_shift(4,e?h:2+l),a.push(u),o+=8+c.length}var v=8*(s.length+1);for(l=0;l<s.length;++l)a[l].write_shift(4,v),v+=s[l].length;return n.write_shift(4,o),n.write_shift(4,s.length),Xo([n].concat(a).concat(s))}function LH(t,e,r){var n=t.content;if(!n)return{};Cl(n,0);var a,s,o,l,c=0;n.chk("feff","Byte Order: "),n.read_shift(2);var u=n.read_shift(4),d=n.read_shift(16);if(d!==_n.utils.consts.HEADER_CLSID&&d!==r)throw new Error("Bad PropertySet CLSID "+d);if(a=n.read_shift(4),a!==1&&a!==2)throw new Error("Unrecognized #Sets: "+a);if(s=n.read_shift(16),l=n.read_shift(4),a===1&&l!==n.l)throw new Error("Length mismatch: "+l+" !== "+n.l);a===2&&(o=n.read_shift(16),c=n.read_shift(4));var f=RH(n,e),A={SystemIdentifier:u};for(var h in f)A[h]=f[h];if(A.FMTID=s,a===1)return A;if(c-n.l==2&&(n.l+=2),n.l!==c)throw new Error("Length mismatch 2: "+n.l+" !== "+c);var m;try{m=RH(n,null)}catch{}for(h in m)A[h]=m[h];return A.FMTID=[s,o],A}function UH(t,e,r,n,a,s){var o=nr(a?68:48),l=[o];o.write_shift(2,65534),o.write_shift(2,0),o.write_shift(4,842412599),o.write_shift(16,_n.utils.consts.HEADER_CLSID,"hex"),o.write_shift(4,a?2:1),o.write_shift(16,e,"hex"),o.write_shift(4,a?68:48);var c=MH(t,r,n);if(l.push(c),a){var u=MH(a,null,null);o.write_shift(16,s,"hex"),o.write_shift(4,68+c.length),l.push(u)}return Xo(l)}function h0(t,e){return t.read_shift(e),null}function O5e(t,e){e||(e=nr(t));for(var r=0;r<t;++r)e.write_shift(1,0);return e}function D5e(t,e,r){for(var n=[],a=t.l+e;t.l<a;)n.push(r(t,a-t.l));if(a!==t.l)throw new Error("Slurp error");return n}function Di(t,e){return t.read_shift(e)===1}function wc(t,e){return e||(e=nr(2)),e.write_shift(2,+!!t),e}function to(t){return t.read_shift(2,"u")}function gd(t,e){return e||(e=nr(2)),e.write_shift(2,t),e}function oae(t,e){return D5e(t,e,to)}function R5e(t){var e=t.read_shift(1),r=t.read_shift(1);return r===1?e:e===1}function lae(t,e,r){return r||(r=nr(2)),r.write_shift(1,e=="e"?+t:+!!t),r.write_shift(1,e=="e"?1:0),r}function Lw(t,e,r){var n=t.read_shift(r&&r.biff>=12?2:1),a="sbcs-cont";if(r&&r.biff>=8,!r||r.biff==8){var s=t.read_shift(1);s&&(a="dbcs-cont")}else r.biff==12&&(a="wstr");r.biff>=2&&r.biff<=5&&(a="cpstr");var o=n?t.read_shift(n,a):"";return o}function M5e(t){var e=t.read_shift(2),r=t.read_shift(1),n=r&4,a=r&8,s=1+(r&1),o=0,l,c={};a&&(o=t.read_shift(2)),n&&(l=t.read_shift(4));var u=s==2?"dbcs-cont":"sbcs-cont",d=e===0?"":t.read_shift(e,u);return a&&(t.l+=4*o),n&&(t.l+=l),c.t=d,a||(c.raw="<t>"+c.t+"</t>",c.r=c.t),c}function L5e(t){var e=t.t||"",r=nr(3);r.write_shift(2,e.length),r.write_shift(1,1);var n=nr(2*e.length);n.write_shift(2*e.length,e,"utf16le");var a=[r,n];return Xo(a)}function Ag(t,e,r){var n;if(r){if(r.biff>=2&&r.biff<=5)return t.read_shift(e,"cpstr");if(r.biff>=12)return t.read_shift(e,"dbcs-cont")}var a=t.read_shift(1);return a===0?n=t.read_shift(e,"sbcs-cont"):n=t.read_shift(e,"dbcs-cont"),n}function Uw(t,e,r){var n=t.read_shift(r&&r.biff==2?1:2);return n===0?(t.l++,""):Ag(t,n,r)}function Qg(t,e,r){if(r.biff>5)return Uw(t,e,r);var n=t.read_shift(1);return n===0?(t.l++,""):t.read_shift(n,r.biff<=4||!t.lens?"cpstr":"sbcs-cont")}function cae(t,e,r){return r||(r=nr(3+2*t.length)),r.write_shift(2,t.length),r.write_shift(1,1),r.write_shift(31,t,"utf16le"),r}function U5e(t){var e=t.read_shift(1);t.l++;var r=t.read_shift(2);return t.l+=2,[e,r]}function Q5e(t){var e=t.read_shift(4),r=t.l,n=!1;e>24&&(t.l+=e-24,t.read_shift(16)==="795881f43b1d7f48af2c825dc4852763"&&(n=!0),t.l=r);var a=t.read_shift((n?e-24:e)>>1,"utf16le").replace(jc,"");return n&&(t.l+=24),a}function V5e(t){for(var e=t.read_shift(2),r="";e-- >0;)r+="../";var n=t.read_shift(0,"lpstr-ansi");if(t.l+=2,t.read_shift(2)!=57005)throw new Error("Bad FileMoniker");var a=t.read_shift(4);if(a===0)return r+n.replace(/\\/g,"/");var s=t.read_shift(4);if(t.read_shift(2)!=3)throw new Error("Bad FileMoniker");var o=t.read_shift(s>>1,"utf16le").replace(jc,"");return r+o}function H5e(t,e){var r=t.read_shift(16);switch(r){case"e0c9ea79f9bace118c8200aa004ba90b":return Q5e(t);case"0303000000000000c000000000000046":return V5e(t);default:throw new Error("Unsupported Moniker "+r)}}function KC(t){var e=t.read_shift(4),r=e>0?t.read_shift(e,"utf16le").replace(jc,""):"";return r}function QH(t,e){e||(e=nr(6+t.length*2)),e.write_shift(4,1+t.length);for(var r=0;r<t.length;++r)e.write_shift(2,t.charCodeAt(r));return e.write_shift(2,0),e}function $5e(t,e){var r=t.l+e,n=t.read_shift(4);if(n!==2)throw new Error("Unrecognized streamVersion: "+n);var a=t.read_shift(2);t.l+=2;var s,o,l,c,u="",d,f;a&16&&(s=KC(t,r-t.l)),a&128&&(o=KC(t,r-t.l)),(a&257)===257&&(l=KC(t,r-t.l)),(a&257)===1&&(c=H5e(t,r-t.l)),a&8&&(u=KC(t,r-t.l)),a&32&&(d=t.read_shift(16)),a&64&&(f=mR(t)),t.l=r;var A=o||l||c||"";A&&u&&(A+="#"+u),A||(A="#"+u),a&2&&A.charAt(0)=="/"&&A.charAt(1)!="/"&&(A="file://"+A);var h={Target:A};return d&&(h.guid=d),f&&(h.time=f),s&&(h.Tooltip=s),h}function G5e(t){var e=nr(512),r=0,n=t.Target;n.slice(0,7)=="file://"&&(n=n.slice(7));var a=n.indexOf("#"),s=a>-1?31:23;switch(n.charAt(0)){case"#":s=28;break;case".":s&=-3;break}e.write_shift(4,2),e.write_shift(4,s);var o=[8,6815827,6619237,4849780,83];for(r=0;r<o.length;++r)e.write_shift(4,o[r]);if(s==28)n=n.slice(1),QH(n,e);else if(s&2){for(o="e0 c9 ea 79 f9 ba ce 11 8c 82 00 aa 00 4b a9 0b".split(" "),r=0;r<o.length;++r)e.write_shift(1,parseInt(o[r],16));var l=a>-1?n.slice(0,a):n;for(e.write_shift(4,2*(l.length+1)),r=0;r<l.length;++r)e.write_shift(2,l.charCodeAt(r));e.write_shift(2,0),s&8&&QH(a>-1?n.slice(a+1):"",e)}else{for(o="03 03 00 00 00 00 00 00 c0 00 00 00 00 00 00 46".split(" "),r=0;r<o.length;++r)e.write_shift(1,parseInt(o[r],16));for(var c=0;n.slice(c*3,c*3+3)=="../"||n.slice(c*3,c*3+3)=="..\\";)++c;for(e.write_shift(2,c),e.write_shift(4,n.length-3*c+1),r=0;r<n.length-3*c;++r)e.write_shift(1,n.charCodeAt(r+3*c)&255);for(e.write_shift(1,0),e.write_shift(2,65535),e.write_shift(2,57005),r=0;r<6;++r)e.write_shift(4,0)}return e.slice(0,e.l)}function uae(t){var e=t.read_shift(1),r=t.read_shift(1),n=t.read_shift(1),a=t.read_shift(1);return[e,r,n,a]}function dae(t,e){var r=uae(t);return r[3]=0,r}function gh(t){var e=t.read_shift(2),r=t.read_shift(2),n=t.read_shift(2);return{r:e,c:r,ixfe:n}}function mg(t,e,r,n){return n||(n=nr(6)),n.write_shift(2,t),n.write_shift(2,e),n.write_shift(2,r||0),n}function K5e(t){var e=t.read_shift(2),r=t.read_shift(2);return t.l+=8,{type:e,flags:r}}function q5e(t,e,r){return e===0?"":Qg(t,e,r)}function z5e(t,e,r){var n=r.biff>8?4:2,a=t.read_shift(n),s=t.read_shift(n,"i"),o=t.read_shift(n,"i");return[a,s,o]}function fae(t){var e=t.read_shift(2),r=fR(t);return[e,r]}function W5e(t,e,r){t.l+=4,e-=4;var n=t.l+e,a=Lw(t,e,r),s=t.read_shift(2);if(n-=t.l,s!==n)throw new Error("Malformed AddinUdf: padding = "+n+" != "+s);return t.l+=s,a}function dP(t){var e=t.read_shift(2),r=t.read_shift(2),n=t.read_shift(2),a=t.read_shift(2);return{s:{c:n,r:e},e:{c:a,r}}}function hae(t,e){return e||(e=nr(8)),e.write_shift(2,t.s.r),e.write_shift(2,t.e.r),e.write_shift(2,t.s.c),e.write_shift(2,t.e.c),e}function Aae(t){var e=t.read_shift(2),r=t.read_shift(2),n=t.read_shift(1),a=t.read_shift(1);return{s:{c:n,r:e},e:{c:a,r}}}var X5e=Aae;function mae(t){t.l+=4;var e=t.read_shift(2),r=t.read_shift(2),n=t.read_shift(2);return t.l+=12,[r,e,n]}function Y5e(t){var e={};return t.l+=4,t.l+=16,e.fSharedNote=t.read_shift(2),t.l+=4,e}function J5e(t){var e={};return t.l+=4,t.cf=t.read_shift(2),e}function Gl(t){t.l+=2,t.l+=t.read_shift(2)}var Z5e={0:Gl,4:Gl,5:Gl,6:Gl,7:J5e,8:Gl,9:Gl,10:Gl,11:Gl,12:Gl,13:Y5e,14:Gl,15:Gl,16:Gl,17:Gl,18:Gl,19:Gl,20:Gl,21:mae};function eBe(t,e){for(var r=t.l+e,n=[];t.l<r;){var a=t.read_shift(2);t.l-=2;try{n.push(Z5e[a](t,r-t.l))}catch{return t.l=r,n}}return t.l!=r&&(t.l=r),n}function qC(t,e){var r={BIFFVer:0,dt:0};switch(r.BIFFVer=t.read_shift(2),e-=2,e>=2&&(r.dt=t.read_shift(2),t.l-=2),r.BIFFVer){case 1536:case 1280:case 1024:case 768:case 512:case 2:case 7:break;default:if(e>6)throw new Error("Unexpected BIFF Ver "+r.BIFFVer)}return t.read_shift(e),r}function pR(t,e,r){var n=1536,a=16;switch(r.bookType){case"biff8":break;case"biff5":n=1280,a=8;break;case"biff4":n=4,a=6;break;case"biff3":n=3,a=6;break;case"biff2":n=2,a=4;break;case"xla":break;default:throw new Error("unsupported BIFF version")}var s=nr(a);return s.write_shift(2,n),s.write_shift(2,e),a>4&&s.write_shift(2,29282),a>6&&s.write_shift(2,1997),a>8&&(s.write_shift(2,49161),s.write_shift(2,1),s.write_shift(2,1798),s.write_shift(2,0)),s}function tBe(t,e){return e===0||t.read_shift(2),1200}function rBe(t,e,r){if(r.enc)return t.l+=e,"";var n=t.l,a=Qg(t,0,r);return t.read_shift(e+n-t.l),a}function nBe(t,e){var r=!e||e.biff==8,n=nr(r?112:54);for(n.write_shift(e.biff==8?2:1,7),r&&n.write_shift(1,0),n.write_shift(4,859007059),n.write_shift(4,5458548|(r?0:536870912));n.l<n.length;)n.write_shift(1,r?0:32);return n}function aBe(t,e,r){var n=r&&r.biff==8||e==2?t.read_shift(2):(t.l+=e,0);return{fDialog:n&16,fBelow:n&64,fRight:n&128}}function sBe(t,e,r){var n=t.read_shift(4),a=t.read_shift(1)&3,s=t.read_shift(1);switch(s){case 0:s="Worksheet";break;case 1:s="Macrosheet";break;case 2:s="Chartsheet";break;case 6:s="VBAModule";break}var o=Lw(t,0,r);return o.length===0&&(o="Sheet1"),{pos:n,hs:a,dt:s,name:o}}function iBe(t,e){var r=!e||e.biff>=8?2:1,n=nr(8+r*t.name.length);n.write_shift(4,t.pos),n.write_shift(1,t.hs||0),n.write_shift(1,t.dt),n.write_shift(1,t.name.length),e.biff>=8&&n.write_shift(1,1),n.write_shift(r*t.name.length,t.name,e.biff<8?"sbcs":"utf16le");var a=n.slice(0,n.l);return a.l=n.l,a}function oBe(t,e){for(var r=t.l+e,n=t.read_shift(4),a=t.read_shift(4),s=[],o=0;o!=a&&t.l<r;++o)s.push(M5e(t));return s.Count=n,s.Unique=a,s}function lBe(t,e){var r=nr(8);r.write_shift(4,t.Count),r.write_shift(4,t.Unique);for(var n=[],a=0;a<t.length;++a)n[a]=L5e(t[a]);var s=Xo([r].concat(n));return s.parts=[r.length].concat(n.map(function(o){return o.length})),s}function cBe(t,e){var r={};return r.dsst=t.read_shift(2),t.l+=e-2,r}function uBe(t){var e={};e.r=t.read_shift(2),e.c=t.read_shift(2),e.cnt=t.read_shift(2)-e.c;var r=t.read_shift(2);t.l+=4;var n=t.read_shift(1);return t.l+=3,n&7&&(e.level=n&7),n&32&&(e.hidden=!0),n&64&&(e.hpt=r/20),e}function dBe(t){var e=K5e(t);if(e.type!=2211)throw new Error("Invalid Future Record "+e.type);var r=t.read_shift(4);return r!==0}function fBe(t){return t.read_shift(2),t.read_shift(4)}function VH(t,e,r){var n=0;r&&r.biff==2||(n=t.read_shift(2));var a=t.read_shift(2);r&&r.biff==2&&(n=1-(a>>15),a&=32767);var s={Unsynced:n&1,DyZero:(n&2)>>1,ExAsc:(n&4)>>2,ExDsc:(n&8)>>3};return[s,a]}function hBe(t){var e=t.read_shift(2),r=t.read_shift(2),n=t.read_shift(2),a=t.read_shift(2),s=t.read_shift(2),o=t.read_shift(2),l=t.read_shift(2),c=t.read_shift(2),u=t.read_shift(2);return{Pos:[e,r],Dim:[n,a],Flags:s,CurTab:o,FirstTab:l,Selected:c,TabRatio:u}}function ABe(){var t=nr(18);return t.write_shift(2,0),t.write_shift(2,0),t.write_shift(2,29280),t.write_shift(2,17600),t.write_shift(2,56),t.write_shift(2,0),t.write_shift(2,0),t.write_shift(2,1),t.write_shift(2,500),t}function mBe(t,e,r){if(r&&r.biff>=2&&r.biff<5)return{};var n=t.read_shift(2);return{RTL:n&64}}function pBe(t){var e=nr(18),r=1718;return t&&t.RTL&&(r|=64),e.write_shift(2,r),e.write_shift(4,0),e.write_shift(4,64),e.write_shift(4,0),e.write_shift(4,0),e}function gBe(){}function xBe(t,e,r){var n={dyHeight:t.read_shift(2),fl:t.read_shift(2)};switch(r&&r.biff||8){case 2:break;case 3:case 4:t.l+=2;break;default:t.l+=10;break}return n.name=Lw(t,0,r),n}function vBe(t,e){var r=t.name||"Arial",n=e&&e.biff==5,a=n?15+r.length:16+2*r.length,s=nr(a);return s.write_shift(2,t.sz*20),s.write_shift(4,0),s.write_shift(2,400),s.write_shift(4,0),s.write_shift(2,0),s.write_shift(1,r.length),n||s.write_shift(1,1),s.write_shift((n?1:2)*r.length,r,n?"sbcs":"utf16le"),s}function yBe(t){var e=gh(t);return e.isst=t.read_shift(4),e}function bBe(t,e,r,n){var a=nr(10);return mg(t,e,n,a),a.write_shift(4,r),a}function wBe(t,e,r){r.biffguess&&r.biff==2&&(r.biff=5);var n=t.l+e,a=gh(t);r.biff==2&&t.l++;var s=Uw(t,n-t.l,r);return a.val=s,a}function NBe(t,e,r,n,a){var s=!a||a.biff==8,o=nr(8+ +s+(1+s)*r.length);return mg(t,e,n,o),o.write_shift(2,r.length),s&&o.write_shift(1,1),o.write_shift((1+s)*r.length,r,s?"utf16le":"sbcs"),o}function CBe(t,e,r){var n=t.read_shift(2),a=Qg(t,0,r);return[n,a]}function _Be(t,e,r,n){var a=r&&r.biff==5;n||(n=nr(a?3+e.length:5+2*e.length)),n.write_shift(2,t),n.write_shift(a?1:2,e.length),a||n.write_shift(1,1),n.write_shift((a?1:2)*e.length,e,a?"sbcs":"utf16le");var s=n.length>n.l?n.slice(0,n.l):n;return s.l==null&&(s.l=s.length),s}var EBe=Qg;function HH(t,e,r){var n=t.l+e,a=r.biff==8||!r.biff?4:2,s=t.read_shift(a),o=t.read_shift(a),l=t.read_shift(2),c=t.read_shift(2);return t.l=n,{s:{r:s,c:l},e:{r:o,c}}}function SBe(t,e){var r=e.biff==8||!e.biff?4:2,n=nr(2*r+6);return n.write_shift(r,t.s.r),n.write_shift(r,t.e.r+1),n.write_shift(2,t.s.c),n.write_shift(2,t.e.c+1),n.write_shift(2,0),n}function IBe(t){var e=t.read_shift(2),r=t.read_shift(2),n=fae(t);return{r:e,c:r,ixfe:n[0],rknum:n[1]}}function jBe(t,e){for(var r=t.l+e-2,n=t.read_shift(2),a=t.read_shift(2),s=[];t.l<r;)s.push(fae(t));if(t.l!==r)throw new Error("MulRK read error");var o=t.read_shift(2);if(s.length!=o-a+1)throw new Error("MulRK length mismatch");return{r:n,c:a,C:o,rkrec:s}}function PBe(t,e){for(var r=t.l+e-2,n=t.read_shift(2),a=t.read_shift(2),s=[];t.l<r;)s.push(t.read_shift(2));if(t.l!==r)throw new Error("MulBlank read error");var o=t.read_shift(2);if(s.length!=o-a+1)throw new Error("MulBlank length mismatch");return{r:n,c:a,C:o,ixfe:s}}function BBe(t,e,r,n){var a={},s=t.read_shift(4),o=t.read_shift(4),l=t.read_shift(4),c=t.read_shift(2);return a.patternType=d5e[l>>26],n.cellStyles&&(a.alc=s&7,a.fWrap=s>>3&1,a.alcV=s>>4&7,a.fJustLast=s>>7&1,a.trot=s>>8&255,a.cIndent=s>>16&15,a.fShrinkToFit=s>>20&1,a.iReadOrder=s>>22&2,a.fAtrNum=s>>26&1,a.fAtrFnt=s>>27&1,a.fAtrAlc=s>>28&1,a.fAtrBdr=s>>29&1,a.fAtrPat=s>>30&1,a.fAtrProt=s>>31&1,a.dgLeft=o&15,a.dgRight=o>>4&15,a.dgTop=o>>8&15,a.dgBottom=o>>12&15,a.icvLeft=o>>16&127,a.icvRight=o>>23&127,a.grbitDiag=o>>30&3,a.icvTop=l&127,a.icvBottom=l>>7&127,a.icvDiag=l>>14&127,a.dgDiag=l>>21&15,a.icvFore=c&127,a.icvBack=c>>7&127,a.fsxButton=c>>14&1),a}function TBe(t,e,r){var n={};return n.ifnt=t.read_shift(2),n.numFmtId=t.read_shift(2),n.flags=t.read_shift(2),n.fStyle=n.flags>>2&1,e-=6,n.data=BBe(t,e,n.fStyle,r),n}function $H(t,e,r,n){var a=r&&r.biff==5;n||(n=nr(a?16:20)),n.write_shift(2,0),t.style?(n.write_shift(2,t.numFmtId||0),n.write_shift(2,65524)):(n.write_shift(2,t.numFmtId||0),n.write_shift(2,e<<4));var s=0;return t.numFmtId>0&&a&&(s|=1024),n.write_shift(4,s),n.write_shift(4,0),a||n.write_shift(4,0),n.write_shift(2,0),n}function kBe(t){t.l+=4;var e=[t.read_shift(2),t.read_shift(2)];if(e[0]!==0&&e[0]--,e[1]!==0&&e[1]--,e[0]>7||e[1]>7)throw new Error("Bad Gutters: "+e.join("|"));return e}function FBe(t){var e=nr(8);return e.write_shift(4,0),e.write_shift(2,0),e.write_shift(2,0),e}function GH(t,e,r){var n=gh(t);(r.biff==2||e==9)&&++t.l;var a=R5e(t);return n.val=a,n.t=a===!0||a===!1?"b":"e",n}function OBe(t,e,r,n,a,s){var o=nr(8);return mg(t,e,n,o),lae(r,s,o),o}function DBe(t,e,r){r.biffguess&&r.biff==2&&(r.biff=5);var n=gh(t),a=rc(t);return n.val=a,n}function RBe(t,e,r,n){var a=nr(14);return mg(t,e,n,a),hg(r,a),a}var KH=q5e;function MBe(t,e,r){var n=t.l+e,a=t.read_shift(2),s=t.read_shift(2);if(r.sbcch=s,s==1025||s==14849)return[s,a];if(s<1||s>255)throw new Error("Unexpected SupBook type: "+s);for(var o=Ag(t,s),l=[];n>t.l;)l.push(Uw(t));return[s,a,o,l]}function qH(t,e,r){var n=t.read_shift(2),a,s={fBuiltIn:n&1,fWantAdvise:n>>>1&1,fWantPict:n>>>2&1,fOle:n>>>3&1,fOleLink:n>>>4&1,cf:n>>>5&1023,fIcon:n>>>15&1};return r.sbcch===14849&&(a=W5e(t,e-2,r)),s.body=a||t.read_shift(e-2),typeof a=="string"&&(s.Name=a),s}var LBe=["_xlnm.Consolidate_Area","_xlnm.Auto_Open","_xlnm.Auto_Close","_xlnm.Extract","_xlnm.Database","_xlnm.Criteria","_xlnm.Print_Area","_xlnm.Print_Titles","_xlnm.Recorder","_xlnm.Data_Form","_xlnm.Auto_Activate","_xlnm.Auto_Deactivate","_xlnm.Sheet_Title","_xlnm._FilterDatabase"];function zH(t,e,r){var n=t.l+e,a=t.read_shift(2),s=t.read_shift(1),o=t.read_shift(1),l=t.read_shift(r&&r.biff==2?1:2),c=0;(!r||r.biff>=5)&&(r.biff!=5&&(t.l+=2),c=t.read_shift(2),r.biff==5&&(t.l+=2),t.l+=4);var u=Ag(t,o,r);a&32&&(u=LBe[u.charCodeAt(0)]);var d=n-t.l;r&&r.biff==2&&--d;var f=n==t.l||l===0||!(d>0)?[]:eDe(t,d,r,l);return{chKey:s,Name:u,itab:c,rgce:f}}function pae(t,e,r){if(r.biff<8)return UBe(t,e,r);for(var n=[],a=t.l+e,s=t.read_shift(r.biff>8?4:2);s--!==0;)n.push(z5e(t,r.biff>8?12:6,r));if(t.l!=a)throw new Error("Bad ExternSheet: "+t.l+" != "+a);return n}function UBe(t,e,r){t[t.l+1]==3&&t[t.l]++;var n=Lw(t,e,r);return n.charCodeAt(0)==3?n.slice(1):n}function QBe(t,e,r){if(r.biff<8){t.l+=e;return}var n=t.read_shift(2),a=t.read_shift(2),s=Ag(t,n,r),o=Ag(t,a,r);return[s,o]}function VBe(t,e,r){var n=Aae(t);t.l++;var a=t.read_shift(1);return e-=8,[tDe(t,e,r),a,n]}function WH(t,e,r){var n=X5e(t);switch(r.biff){case 2:t.l++,e-=7;break;case 3:case 4:t.l+=2,e-=8;break;default:t.l+=6,e-=12}return[n,JOe(t,e,r)]}function HBe(t){var e=t.read_shift(4)!==0,r=t.read_shift(4)!==0,n=t.read_shift(4);return[e,r,n]}function $Be(t,e,r){if(!(r.biff<8)){var n=t.read_shift(2),a=t.read_shift(2),s=t.read_shift(2),o=t.read_shift(2),l=Qg(t,0,r);return r.biff<8&&t.read_shift(1),[{r:n,c:a},l,o,s]}}function GBe(t,e,r){return $Be(t,e,r)}function KBe(t,e){for(var r=[],n=t.read_shift(2);n--;)r.push(dP(t));return r}function qBe(t){var e=nr(2+t.length*8);e.write_shift(2,t.length);for(var r=0;r<t.length;++r)hae(t[r],e);return e}function zBe(t,e,r){if(r&&r.biff<8)return XBe(t,e,r);var n=mae(t),a=eBe(t,e-22,n[1]);return{cmo:n,ft:a}}var WBe={8:function(t,e){var r=t.l+e;t.l+=10;var n=t.read_shift(2);t.l+=4,t.l+=2,t.l+=2,t.l+=2,t.l+=4;var a=t.read_shift(1);return t.l+=a,t.l=r,{fmt:n}}};function XBe(t,e,r){t.l+=4;var n=t.read_shift(2),a=t.read_shift(2),s=t.read_shift(2);t.l+=2,t.l+=2,t.l+=2,t.l+=2,t.l+=2,t.l+=2,t.l+=2,t.l+=2,t.l+=2,t.l+=6,e-=36;var o=[];return o.push((WBe[n]||oc)(t,e,r)),{cmo:[a,n,s],ft:o}}function YBe(t,e,r){var n=t.l,a="";try{t.l+=4;var s=(r.lastobj||{cmo:[0,0]}).cmo[1],o;[0,5,7,11,12,14].indexOf(s)==-1?t.l+=6:o=U5e(t,6,r);var l=t.read_shift(2);t.read_shift(2),to(t,2);var c=t.read_shift(2);t.l+=c;for(var u=1;u<t.lens.length-1;++u){if(t.l-n!=t.lens[u])throw new Error("TxO: bad continue record");var d=t[t.l],f=Ag(t,t.lens[u+1]-t.lens[u]-1);if(a+=f,a.length>=(d?l:2*l))break}if(a.length!==l&&a.length!==l*2)throw new Error("cchText: "+l+" != "+a.length);return t.l=n+e,{t:a}}catch{return t.l=n+e,{t:a}}}function JBe(t,e){var r=dP(t);t.l+=16;var n=$5e(t,e-24);return[r,n]}function ZBe(t){var e=nr(24),r=li(t[0]);e.write_shift(2,r.r),e.write_shift(2,r.r),e.write_shift(2,r.c),e.write_shift(2,r.c);for(var n="d0 c9 ea 79 f9 ba ce 11 8c 82 00 aa 00 4b a9 0b".split(" "),a=0;a<16;++a)e.write_shift(1,parseInt(n[a],16));return Xo([e,G5e(t[1])])}function eTe(t,e){t.read_shift(2);var r=dP(t),n=t.read_shift((e-10)/2,"dbcs-cont");return n=n.replace(jc,""),[r,n]}function tTe(t){var e=t[1].Tooltip,r=nr(10+2*(e.length+1));r.write_shift(2,2048);var n=li(t[0]);r.write_shift(2,n.r),r.write_shift(2,n.r),r.write_shift(2,n.c),r.write_shift(2,n.c);for(var a=0;a<e.length;++a)r.write_shift(2,e.charCodeAt(a));return r.write_shift(2,0),r}function rTe(t){var e=[0,0],r;return r=t.read_shift(2),e[0]=kH[r]||r,r=t.read_shift(2),e[1]=kH[r]||r,e}function nTe(t){return t||(t=nr(4)),t.write_shift(2,1),t.write_shift(2,1),t}function aTe(t){for(var e=t.read_shift(2),r=[];e-- >0;)r.push(dae(t));return r}function sTe(t){for(var e=t.read_shift(2),r=[];e-- >0;)r.push(dae(t));return r}function iTe(t){t.l+=2;var e={cxfs:0,crc:0};return e.cxfs=t.read_shift(2),e.crc=t.read_shift(4),e}function gae(t,e,r){if(!r.cellStyles)return oc(t,e);var n=r&&r.biff>=12?4:2,a=t.read_shift(n),s=t.read_shift(n),o=t.read_shift(n),l=t.read_shift(n),c=t.read_shift(2);n==2&&(t.l+=2);var u={s:a,e:s,w:o,ixfe:l,flags:c};return(r.biff>=5||!r.biff)&&(u.level=c>>8&7),u}function oTe(t,e){var r=nr(12);r.write_shift(2,e),r.write_shift(2,e),r.write_shift(2,t.width*256),r.write_shift(2,0);var n=0;return t.hidden&&(n|=1),r.write_shift(1,n),n=t.level||0,r.write_shift(1,n),r.write_shift(2,0),r}function lTe(t,e){var r={};return e<32||(t.l+=16,r.header=rc(t),r.footer=rc(t),t.l+=2),r}function cTe(t,e,r){var n={area:!1};if(r.biff!=5)return t.l+=e,n;var a=t.read_shift(1);return t.l+=3,a&16&&(n.area=!0),n}function uTe(t){for(var e=nr(2*t),r=0;r<t;++r)e.write_shift(2,r+1);return e}var dTe=gh,fTe=oae,hTe=Uw;function ATe(t){var e=t.read_shift(2),r=t.read_shift(2),n=t.read_shift(4),a={fmt:e,env:r,len:n,data:t.slice(t.l,t.l+n)};return t.l+=n,a}function mTe(t,e,r){r.biffguess&&r.biff==5&&(r.biff=2);var n=gh(t);++t.l;var a=Qg(t,e-7,r);return n.t="str",n.val=a,n}function pTe(t){var e=gh(t);++t.l;var r=rc(t);return e.t="n",e.val=r,e}function gTe(t,e,r){var n=nr(15);return $w(n,t,e),n.write_shift(8,r,"f"),n}function xTe(t){var e=gh(t);++t.l;var r=t.read_shift(2);return e.t="n",e.val=r,e}function vTe(t,e,r){var n=nr(9);return $w(n,t,e),n.write_shift(2,r),n}function yTe(t){var e=t.read_shift(1);return e===0?(t.l++,""):t.read_shift(e,"sbcs-cont")}function bTe(t,e){t.l+=6,t.l+=2,t.l+=1,t.l+=3,t.l+=1,t.l+=e-13}function wTe(t,e,r){var n=t.l+e,a=gh(t),s=t.read_shift(2),o=Ag(t,s,r);return t.l=n,a.t="str",a.val=o,a}var NTe=[2,3,48,49,131,139,140,245],tF=function(){var t={1:437,2:850,3:1252,4:1e4,100:852,101:866,102:865,103:861,104:895,105:620,106:737,107:857,120:950,121:949,122:936,123:932,124:874,125:1255,126:1256,150:10007,151:10029,152:10006,200:1250,201:1251,202:1254,203:1253,0:20127,8:865,9:437,10:850,11:437,13:437,14:850,15:437,16:850,17:437,18:850,19:932,20:850,21:437,22:850,23:865,24:437,25:437,26:850,27:437,28:863,29:850,31:852,34:852,35:852,36:860,37:850,38:866,55:850,64:852,77:936,78:949,79:950,80:874,87:1252,88:1252,89:1252,108:863,134:737,135:852,136:857,204:1257,255:16969},e=lP({1:437,2:850,3:1252,4:1e4,100:852,101:866,102:865,103:861,104:895,105:620,106:737,107:857,120:950,121:949,122:936,123:932,124:874,125:1255,126:1256,150:10007,151:10029,152:10006,200:1250,201:1251,202:1254,203:1253,0:20127});function r(l,c){var u=[],d=Em(1);switch(c.type){case"base64":d=Pu(Hu(l));break;case"binary":d=Pu(l);break;case"buffer":case"array":d=l;break}Cl(d,0);var f=d.read_shift(1),A=!!(f&136),h=!1,m=!1;switch(f){case 2:break;case 3:break;case 48:h=!0,A=!0;break;case 49:h=!0,A=!0;break;case 131:break;case 139:break;case 140:m=!0;break;case 245:break;default:throw new Error("DBF Unsupported Version: "+f.toString(16))}var p=0,x=521;f==2&&(p=d.read_shift(2)),d.l+=3,f!=2&&(p=d.read_shift(4)),p>1048576&&(p=1e6),f!=2&&(x=d.read_shift(2));var v=d.read_shift(2),y=c.codepage||1252;f!=2&&(d.l+=16,d.read_shift(1),d[d.l]!==0&&(y=t[d[d.l]]),d.l+=1,d.l+=2),m&&(d.l+=36);for(var b=[],w={},j=Math.min(d.length,f==2?521:x-10-(h?264:0)),I=m?32:11;d.l<j&&d[d.l]!=13;)switch(w={},w.name=j2.utils.decode(y,d.slice(d.l,d.l+I)).replace(/[\u0000\r\n].*$/g,""),d.l+=I,w.type=String.fromCharCode(d.read_shift(1)),f!=2&&!m&&(w.offset=d.read_shift(4)),w.len=d.read_shift(1),f==2&&(w.offset=d.read_shift(2)),w.dec=d.read_shift(1),w.name.length&&b.push(w),f!=2&&(d.l+=m?13:14),w.type){case"B":(!h||w.len!=8)&&c.WTF&&console.log("Skipping "+w.name+":"+w.type);break;case"G":case"P":c.WTF&&console.log("Skipping "+w.name+":"+w.type);break;case"+":case"0":case"@":case"C":case"D":case"F":case"I":case"L":case"M":case"N":case"O":case"T":case"Y":break;default:throw new Error("Unknown Field Type: "+w.type)}if(d[d.l]!==13&&(d.l=x-1),d.read_shift(1)!==13)throw new Error("DBF Terminator not found "+d.l+" "+d[d.l]);d.l=x;var _=0,S=0;for(u[0]=[],S=0;S!=b.length;++S)u[0][S]=b[S].name;for(;p-- >0;){if(d[d.l]===42){d.l+=v;continue}for(++d.l,u[++_]=[],S=0,S=0;S!=b.length;++S){var E=d.slice(d.l,d.l+b[S].len);d.l+=b[S].len,Cl(E,0);var T=j2.utils.decode(y,E);switch(b[S].type){case"C":T.trim().length&&(u[_][S]=T.replace(/\s+$/,""));break;case"D":T.length===8?u[_][S]=new Date(+T.slice(0,4),+T.slice(4,6)-1,+T.slice(6,8)):u[_][S]=T;break;case"F":u[_][S]=parseFloat(T.trim());break;case"+":case"I":u[_][S]=m?E.read_shift(-4,"i")^2147483648:E.read_shift(4,"i");break;case"L":switch(T.trim().toUpperCase()){case"Y":case"T":u[_][S]=!0;break;case"N":case"F":u[_][S]=!1;break;case"":case"?":break;default:throw new Error("DBF Unrecognized L:|"+T+"|")}break;case"M":if(!A)throw new Error("DBF Unexpected MEMO for type "+f.toString(16));u[_][S]="##MEMO##"+(m?parseInt(T.trim(),10):E.read_shift(4));break;case"N":T=T.replace(/\u0000/g,"").trim(),T&&T!="."&&(u[_][S]=+T||0);break;case"@":u[_][S]=new Date(E.read_shift(-8,"f")-621356832e5);break;case"T":u[_][S]=new Date((E.read_shift(4)-2440588)*864e5+E.read_shift(4));break;case"Y":u[_][S]=E.read_shift(4,"i")/1e4+E.read_shift(4,"i")/1e4*Math.pow(2,32);break;case"O":u[_][S]=-E.read_shift(-8,"f");break;case"B":if(h&&b[S].len==8){u[_][S]=E.read_shift(8,"f");break}case"G":case"P":E.l+=b[S].len;break;case"0":if(b[S].name==="_NullFlags")break;default:throw new Error("DBF Unsupported data type "+b[S].type)}}}if(f!=2&&d.l<d.length&&d[d.l++]!=26)throw new Error("DBF EOF Marker missing "+(d.l-1)+" of "+d.length+" "+d[d.l-1].toString(16));return c&&c.sheetRows&&(u=u.slice(0,c.sheetRows)),c.DBF=b,u}function n(l,c){var u=c||{};u.dateNF||(u.dateNF="yyyymmdd");var d=y1(r(l,u),u);return d["!cols"]=u.DBF.map(function(f){return{wch:f.len,DBF:f}}),delete u.DBF,d}function a(l,c){try{return Um(n(l,c),c)}catch(u){if(c&&c.WTF)throw u}return{SheetNames:[],Sheets:{}}}var s={B:8,C:250,L:1,D:8,"?":0,"":0};function o(l,c){var u=c||{};if(+u.codepage>=0&&ff(+u.codepage),u.type=="string")throw new Error("Cannot write DBF to JS string");var d=iu(),f=YS(l,{header:1,raw:!0,cellDates:!0}),A=f[0],h=f.slice(1),m=l["!cols"]||[],p=0,x=0,v=0,y=1;for(p=0;p<A.length;++p){if(((m[p]||{}).DBF||{}).name){A[p]=m[p].DBF.name,++v;continue}if(A[p]!=null){if(++v,typeof A[p]=="number"&&(A[p]=A[p].toString(10)),typeof A[p]!="string")throw new Error("DBF Invalid column name "+A[p]+" |"+typeof A[p]+"|");if(A.indexOf(A[p])!==p){for(x=0;x<1024;++x)if(A.indexOf(A[p]+"_"+x)==-1){A[p]+="_"+x;break}}}}var b=Ea(l["!ref"]),w=[],j=[],I=[];for(p=0;p<=b.e.c-b.s.c;++p){var _="",S="",E=0,T=[];for(x=0;x<h.length;++x)h[x][p]!=null&&T.push(h[x][p]);if(T.length==0||A[p]==null){w[p]="?";continue}for(x=0;x<T.length;++x){switch(typeof T[x]){case"number":S="B";break;case"string":S="C";break;case"boolean":S="L";break;case"object":S=T[x]instanceof Date?"D":"C";break;default:S="C"}E=Math.max(E,String(T[x]).length),_=_&&_!=S?"C":S}E>250&&(E=250),S=((m[p]||{}).DBF||{}).type,S=="C"&&m[p].DBF.len>E&&(E=m[p].DBF.len),_=="B"&&S=="N"&&(_="N",I[p]=m[p].DBF.dec,E=m[p].DBF.len),j[p]=_=="C"||S=="N"?E:s[_]||0,y+=j[p],w[p]=_}var k=d.next(32);for(k.write_shift(4,318902576),k.write_shift(4,h.length),k.write_shift(2,296+32*v),k.write_shift(2,y),p=0;p<4;++p)k.write_shift(4,0);for(k.write_shift(4,0|(+e[ine]||3)<<8),p=0,x=0;p<A.length;++p)if(A[p]!=null){var B=d.next(32),D=(A[p].slice(-10)+"\0\0\0\0\0\0\0\0\0\0\0").slice(0,11);B.write_shift(1,D,"sbcs"),B.write_shift(1,w[p]=="?"?"C":w[p],"sbcs"),B.write_shift(4,x),B.write_shift(1,j[p]||s[w[p]]||0),B.write_shift(1,I[p]||0),B.write_shift(1,2),B.write_shift(4,0),B.write_shift(1,0),B.write_shift(4,0),B.write_shift(4,0),x+=j[p]||s[w[p]]||0}var X=d.next(264);for(X.write_shift(4,13),p=0;p<65;++p)X.write_shift(4,0);for(p=0;p<h.length;++p){var me=d.next(y);for(me.write_shift(1,0),x=0;x<A.length;++x)if(A[x]!=null)switch(w[x]){case"L":me.write_shift(1,h[p][x]==null?63:h[p][x]?84:70);break;case"B":me.write_shift(8,h[p][x]||0,"f");break;case"N":var pe="0";for(typeof h[p][x]=="number"&&(pe=h[p][x].toFixed(I[x]||0)),v=0;v<j[x]-pe.length;++v)me.write_shift(1,32);me.write_shift(1,pe,"sbcs");break;case"D":h[p][x]?(me.write_shift(4,("0000"+h[p][x].getFullYear()).slice(-4),"sbcs"),me.write_shift(2,("00"+(h[p][x].getMonth()+1)).slice(-2),"sbcs"),me.write_shift(2,("00"+h[p][x].getDate()).slice(-2),"sbcs")):me.write_shift(8,"00000000","sbcs");break;case"C":var he=String(h[p][x]!=null?h[p][x]:"").slice(0,j[x]);for(me.write_shift(1,he,"sbcs"),v=0;v<j[x]-he.length;++v)me.write_shift(1,32);break}}return d.next(1).write_shift(1,26),d.end()}return{to_workbook:a,to_sheet:n,from_sheet:o}}(),xae=function(){var t={AA:"",BA:"",CA:"",DA:195,HA:"",JA:197,AE:"",BE:"",CE:"",HE:"",AI:"",BI:"",CI:"",HI:"",AO:"",BO:"",CO:"",DO:213,HO:"",AU:"",BU:"",CU:"",HU:"",Aa:"",Ba:"",Ca:"",Da:227,Ha:"",Ja:229,Ae:"",Be:"",Ce:"",He:"",Ai:"",Bi:"",Ci:"",Hi:"",Ao:"",Bo:"",Co:"",Do:245,Ho:"",Au:"",Bu:"",Cu:"",Hu:"",KC:"",Kc:"",q:"",z:"",a:"",j:"",DN:209,Dn:241,Hy:255,S:169,c:170,R:174,"B ":180,0:176,1:177,2:178,3:179,5:181,6:182,7:183,Q:185,k:186,b:208,i:216,l:222,s:240,y:248,"!":161,'"':162,"#":163,"(":164,"%":165,"'":167,"H ":168,"+":171,";":187,"<":188,"=":189,">":190,"?":191,"{":223},e=new RegExp("\x1BN("+Ii(t).join("|").replace(/\|\|\|/,"|\\||").replace(/([?()+])/g,"\\$1")+"|\\|)","gm"),r=function(A,h){var m=t[h];return typeof m=="number"?iH(m):m},n=function(A,h,m){var p=h.charCodeAt(0)-32<<4|m.charCodeAt(0)-48;return p==59?A:iH(p)};t["|"]=254;function a(A,h){switch(h.type){case"base64":return s(Hu(A),h);case"binary":return s(A,h);case"buffer":return s(ea&&Buffer.isBuffer(A)?A.toString("binary"):Lm(A),h);case"array":return s(fg(A),h)}throw new Error("Unrecognized type "+h.type)}function s(A,h){var m=A.split(/[\n\r]+/),p=-1,x=-1,v=0,y=0,b=[],w=[],j=null,I={},_=[],S=[],E=[],T=0,k;for(+h.codepage>=0&&ff(+h.codepage);v!==m.length;++v){T=0;var B=m[v].trim().replace(/\x1B([\x20-\x2F])([\x30-\x3F])/g,n).replace(e,r),D=B.replace(/;;/g,"\0").split(";").map(function(U){return U.replace(/\u0000/g,";")}),X=D[0],me;if(B.length>0)switch(X){case"ID":break;case"E":break;case"B":break;case"O":break;case"W":break;case"P":D[1].charAt(0)=="P"&&w.push(B.slice(3).replace(/;;/g,";"));break;case"C":var pe=!1,he=!1,ve=!1,ae=!1,Pe=-1,ke=-1;for(y=1;y<D.length;++y)switch(D[y].charAt(0)){case"A":break;case"X":x=parseInt(D[y].slice(1))-1,he=!0;break;case"Y":for(p=parseInt(D[y].slice(1))-1,he||(x=0),k=b.length;k<=p;++k)b[k]=[];break;case"K":me=D[y].slice(1),me.charAt(0)==='"'?me=me.slice(1,me.length-1):me==="TRUE"?me=!0:me==="FALSE"?me=!1:isNaN(gf(me))?isNaN(Lv(me).getDate())||(me=Fs(me)):(me=gf(me),j!==null&&x1(j)&&(me=uP(me))),pe=!0;break;case"E":ae=!0;var O=gv(D[y].slice(1),{r:p,c:x});b[p][x]=[b[p][x],O];break;case"S":ve=!0,b[p][x]=[b[p][x],"S5S"];break;case"G":break;case"R":Pe=parseInt(D[y].slice(1))-1;break;case"C":ke=parseInt(D[y].slice(1))-1;break;default:if(h&&h.WTF)throw new Error("SYLK bad record "+B)}if(pe&&(b[p][x]&&b[p][x].length==2?b[p][x][0]=me:b[p][x]=me,j=null),ve){if(ae)throw new Error("SYLK shared formula cannot have own formula");var G=Pe>-1&&b[Pe][ke];if(!G||!G[1])throw new Error("SYLK shared formula cannot find base");b[p][x][1]=Dae(G[1],{r:p-Pe,c:x-ke})}break;case"F":var z=0;for(y=1;y<D.length;++y)switch(D[y].charAt(0)){case"X":x=parseInt(D[y].slice(1))-1,++z;break;case"Y":for(p=parseInt(D[y].slice(1))-1,k=b.length;k<=p;++k)b[k]=[];break;case"M":T=parseInt(D[y].slice(1))/20;break;case"F":break;case"G":break;case"P":j=w[parseInt(D[y].slice(1))];break;case"S":break;case"D":break;case"N":break;case"W":for(E=D[y].slice(1).split(" "),k=parseInt(E[0],10);k<=parseInt(E[1],10);++k)T=parseInt(E[2],10),S[k-1]=T===0?{hidden:!0}:{wch:T},Sm(S[k-1]);break;case"C":x=parseInt(D[y].slice(1))-1,S[x]||(S[x]={});break;case"R":p=parseInt(D[y].slice(1))-1,_[p]||(_[p]={}),T>0?(_[p].hpt=T,_[p].hpx=Qv(T)):T===0&&(_[p].hidden=!0);break;default:if(h&&h.WTF)throw new Error("SYLK bad record "+B)}z<1&&(j=null);break;default:if(h&&h.WTF)throw new Error("SYLK bad record "+B)}}return _.length>0&&(I["!rows"]=_),S.length>0&&(I["!cols"]=S),h&&h.sheetRows&&(b=b.slice(0,h.sheetRows)),[b,I]}function o(A,h){var m=a(A,h),p=m[0],x=m[1],v=y1(p,h);return Ii(x).forEach(function(y){v[y]=x[y]}),v}function l(A,h){return Um(o(A,h),h)}function c(A,h,m,p){var x="C;Y"+(m+1)+";X"+(p+1)+";K";switch(A.t){case"n":x+=A.v||0,A.f&&!A.F&&(x+=";E"+wR(A.f,{r:m,c:p}));break;case"b":x+=A.v?"TRUE":"FALSE";break;case"e":x+=A.w||A.v;break;case"d":x+='"'+(A.w||A.v)+'"';break;case"s":x+='"'+A.v.replace(/"/g,"").replace(/;/g,";;")+'"';break}return x}function u(A,h){h.forEach(function(m,p){var x="F;W"+(p+1)+" "+(p+1)+" ";m.hidden?x+="0":(typeof m.width=="number"&&!m.wpx&&(m.wpx=R2(m.width)),typeof m.wpx=="number"&&!m.wch&&(m.wch=M2(m.wpx)),typeof m.wch=="number"&&(x+=Math.round(m.wch))),x.charAt(x.length-1)!=" "&&A.push(x)})}function d(A,h){h.forEach(function(m,p){var x="F;";m.hidden?x+="M0;":m.hpt?x+="M"+20*m.hpt+";":m.hpx&&(x+="M"+20*L2(m.hpx)+";"),x.length>2&&A.push(x+"R"+(p+1))})}function f(A,h){var m=["ID;PWXL;N;E"],p=[],x=Ea(A["!ref"]),v,y=Array.isArray(A),b=`\r
`;m.push("P;PGeneral"),m.push("F;P0;DG0G8;M255"),A["!cols"]&&u(m,A["!cols"]),A["!rows"]&&d(m,A["!rows"]),m.push("B;Y"+(x.e.r-x.s.r+1)+";X"+(x.e.c-x.s.c+1)+";D"+[x.s.c,x.s.r,x.e.c,x.e.r].join(" "));for(var w=x.s.r;w<=x.e.r;++w)for(var j=x.s.c;j<=x.e.c;++j){var I=On({r:w,c:j});v=y?(A[w]||[])[j]:A[I],!(!v||v.v==null&&(!v.f||v.F))&&p.push(c(v,A,w,j))}return m.join(b)+b+p.join(b)+b+"E"+b}return{to_workbook:l,to_sheet:o,from_sheet:f}}(),vae=function(){function t(s,o){switch(o.type){case"base64":return e(Hu(s),o);case"binary":return e(s,o);case"buffer":return e(ea&&Buffer.isBuffer(s)?s.toString("binary"):Lm(s),o);case"array":return e(fg(s),o)}throw new Error("Unrecognized type "+o.type)}function e(s,o){for(var l=s.split(`
`),c=-1,u=-1,d=0,f=[];d!==l.length;++d){if(l[d].trim()==="BOT"){f[++c]=[],u=0;continue}if(!(c<0)){var A=l[d].trim().split(","),h=A[0],m=A[1];++d;for(var p=l[d]||"";(p.match(/["]/g)||[]).length&1&&d<l.length-1;)p+=`
`+l[++d];switch(p=p.trim(),+h){case-1:if(p==="BOT"){f[++c]=[],u=0;continue}else if(p!=="EOD")throw new Error("Unrecognized DIF special command "+p);break;case 0:p==="TRUE"?f[c][u]=!0:p==="FALSE"?f[c][u]=!1:isNaN(gf(m))?isNaN(Lv(m).getDate())?f[c][u]=m:f[c][u]=Fs(m):f[c][u]=gf(m),++u;break;case 1:p=p.slice(1,p.length-1),p=p.replace(/""/g,'"'),p&&p.match(/^=".*"$/)&&(p=p.slice(2,-1)),f[c][u++]=p!==""?p:null;break}if(p==="EOD")break}}return o&&o.sheetRows&&(f=f.slice(0,o.sheetRows)),f}function r(s,o){return y1(t(s,o),o)}function n(s,o){return Um(r(s,o),o)}var a=function(){var s=function(c,u,d,f,A){c.push(u),c.push(d+","+f),c.push('"'+A.replace(/"/g,'""')+'"')},o=function(c,u,d,f){c.push(u+","+d),c.push(u==1?'"'+f.replace(/"/g,'""')+'"':f)};return function(c){var u=[],d=Ea(c["!ref"]),f,A=Array.isArray(c);s(u,"TABLE",0,1,"sheetjs"),s(u,"VECTORS",0,d.e.r-d.s.r+1,""),s(u,"TUPLES",0,d.e.c-d.s.c+1,""),s(u,"DATA",0,0,"");for(var h=d.s.r;h<=d.e.r;++h){o(u,-1,0,"BOT");for(var m=d.s.c;m<=d.e.c;++m){var p=On({r:h,c:m});if(f=A?(c[h]||[])[m]:c[p],!f){o(u,1,0,"");continue}switch(f.t){case"n":var x=f.w;!x&&f.v!=null&&(x=f.v),x==null?f.f&&!f.F?o(u,1,0,"="+f.f):o(u,1,0,""):o(u,0,x,"V");break;case"b":o(u,0,f.v?1:0,f.v?"TRUE":"FALSE");break;case"s":o(u,1,0,isNaN(f.v)?f.v:'="'+f.v+'"');break;case"d":f.w||(f.w=Od(f.z||Tn[14],To(Fs(f.v)))),o(u,0,f.w,"V");break;default:o(u,1,0,"")}}}o(u,-1,0,"EOD");var v=`\r
`,y=u.join(v);return y}}();return{to_workbook:n,to_sheet:r,from_sheet:a}}(),yae=function(){function t(f){return f.replace(/\\b/g,"\\").replace(/\\c/g,":").replace(/\\n/g,`
`)}function e(f){return f.replace(/\\/g,"\\b").replace(/:/g,"\\c").replace(/\n/g,"\\n")}function r(f,A){for(var h=f.split(`
`),m=-1,p=-1,x=0,v=[];x!==h.length;++x){var y=h[x].trim().split(":");if(y[0]==="cell"){var b=li(y[1]);if(v.length<=b.r)for(m=v.length;m<=b.r;++m)v[m]||(v[m]=[]);switch(m=b.r,p=b.c,y[2]){case"t":v[m][p]=t(y[3]);break;case"v":v[m][p]=+y[3];break;case"vtf":var w=y[y.length-1];case"vtc":switch(y[3]){case"nl":v[m][p]=!!+y[4];break;default:v[m][p]=+y[4];break}y[2]=="vtf"&&(v[m][p]=[v[m][p],w])}}}return A&&A.sheetRows&&(v=v.slice(0,A.sheetRows)),v}function n(f,A){return y1(r(f,A),A)}function a(f,A){return Um(n(f,A),A)}var s=["socialcalc:version:1.5","MIME-Version: 1.0","Content-Type: multipart/mixed; boundary=SocialCalcSpreadsheetControlSave"].join(`
`),o=["--SocialCalcSpreadsheetControlSave","Content-type: text/plain; charset=UTF-8"].join(`
`)+`
`,l=["# SocialCalc Spreadsheet Control Save","part:sheet"].join(`
`),c="--SocialCalcSpreadsheetControlSave--";function u(f){if(!f||!f["!ref"])return"";for(var A=[],h=[],m,p="",x=ou(f["!ref"]),v=Array.isArray(f),y=x.s.r;y<=x.e.r;++y)for(var b=x.s.c;b<=x.e.c;++b)if(p=On({r:y,c:b}),m=v?(f[y]||[])[b]:f[p],!(!m||m.v==null||m.t==="z")){switch(h=["cell",p,"t"],m.t){case"s":case"str":h.push(e(m.v));break;case"n":m.f?(h[2]="vtf",h[3]="n",h[4]=m.v,h[5]=e(m.f)):(h[2]="v",h[3]=m.v);break;case"b":h[2]="vt"+(m.f?"f":"c"),h[3]="nl",h[4]=m.v?"1":"0",h[5]=e(m.f||(m.v?"TRUE":"FALSE"));break;case"d":var w=To(Fs(m.v));h[2]="vtc",h[3]="nd",h[4]=""+w,h[5]=m.w||Od(m.z||Tn[14],w);break;case"e":continue}A.push(h.join(":"))}return A.push("sheet:c:"+(x.e.c-x.s.c+1)+":r:"+(x.e.r-x.s.r+1)+":tvf:1"),A.push("valueformat:1:text-wiki"),A.join(`
`)}function d(f){return[s,o,l,o,u(f),c].join(`
`)}return{to_workbook:a,to_sheet:n,from_sheet:d}}(),Uv=function(){function t(d,f,A,h,m){m.raw?f[A][h]=d:d===""||(d==="TRUE"?f[A][h]=!0:d==="FALSE"?f[A][h]=!1:isNaN(gf(d))?isNaN(Lv(d).getDate())?f[A][h]=d:f[A][h]=Fs(d):f[A][h]=gf(d))}function e(d,f){var A=f||{},h=[];if(!d||d.length===0)return h;for(var m=d.split(/[\r\n]/),p=m.length-1;p>=0&&m[p].length===0;)--p;for(var x=10,v=0,y=0;y<=p;++y)v=m[y].indexOf(" "),v==-1?v=m[y].length:v++,x=Math.max(x,v);for(y=0;y<=p;++y){h[y]=[];var b=0;for(t(m[y].slice(0,x).trim(),h,y,b,A),b=1;b<=(m[y].length-x)/10+1;++b)t(m[y].slice(x+(b-1)*10,x+b*10).trim(),h,y,b,A)}return A.sheetRows&&(h=h.slice(0,A.sheetRows)),h}var r={44:",",9:"	",59:";",124:"|"},n={44:3,9:2,59:1,124:0};function a(d){for(var f={},A=!1,h=0,m=0;h<d.length;++h)(m=d.charCodeAt(h))==34?A=!A:!A&&m in r&&(f[m]=(f[m]||0)+1);m=[];for(h in f)Object.prototype.hasOwnProperty.call(f,h)&&m.push([f[h],h]);if(!m.length){f=n;for(h in f)Object.prototype.hasOwnProperty.call(f,h)&&m.push([f[h],h])}return m.sort(function(p,x){return p[0]-x[0]||n[p[1]]-n[x[1]]}),r[m.pop()[1]]||44}function s(d,f){var A=f||{},h="",m=A.dense?[]:{},p={s:{c:0,r:0},e:{c:0,r:0}};d.slice(0,4)=="sep="?d.charCodeAt(5)==13&&d.charCodeAt(6)==10?(h=d.charAt(4),d=d.slice(7)):d.charCodeAt(5)==13||d.charCodeAt(5)==10?(h=d.charAt(4),d=d.slice(6)):h=a(d.slice(0,1024)):A&&A.FS?h=A.FS:h=a(d.slice(0,1024));var x=0,v=0,y=0,b=0,w=0,j=h.charCodeAt(0),I=!1,_=0,S=d.charCodeAt(0);d=d.replace(/\r\n/mg,`
`);var E=A.dateNF!=null?c3e(A.dateNF):null;function T(){var k=d.slice(b,w),B={};if(k.charAt(0)=='"'&&k.charAt(k.length-1)=='"'&&(k=k.slice(1,-1).replace(/""/g,'"')),k.length===0)B.t="z";else if(A.raw)B.t="s",B.v=k;else if(k.trim().length===0)B.t="s",B.v=k;else if(k.charCodeAt(0)==61)k.charCodeAt(1)==34&&k.charCodeAt(k.length-1)==34?(B.t="s",B.v=k.slice(2,-1).replace(/""/g,'"')):MFe(k)?(B.t="n",B.f=k.slice(1)):(B.t="s",B.v=k);else if(k=="TRUE")B.t="b",B.v=!0;else if(k=="FALSE")B.t="b",B.v=!1;else if(!isNaN(y=gf(k)))B.t="n",A.cellText!==!1&&(B.w=k),B.v=y;else if(!isNaN(Lv(k).getDate())||E&&k.match(E)){B.z=A.dateNF||Tn[14];var D=0;E&&k.match(E)&&(k=u3e(k,A.dateNF,k.match(E)||[]),D=1),A.cellDates?(B.t="d",B.v=Fs(k,D)):(B.t="n",B.v=To(Fs(k,D))),A.cellText!==!1&&(B.w=Od(B.z,B.v instanceof Date?To(B.v):B.v)),A.cellNF||delete B.z}else B.t="s",B.v=k;if(B.t=="z"||(A.dense?(m[x]||(m[x]=[]),m[x][v]=B):m[On({c:v,r:x})]=B),b=w+1,S=d.charCodeAt(b),p.e.c<v&&(p.e.c=v),p.e.r<x&&(p.e.r=x),_==j)++v;else if(v=0,++x,A.sheetRows&&A.sheetRows<=x)return!0}e:for(;w<d.length;++w)switch(_=d.charCodeAt(w)){case 34:S===34&&(I=!I);break;case j:case 10:case 13:if(!I&&T())break e;break}return w-b>0&&T(),m["!ref"]=zn(p),m}function o(d,f){return!(f&&f.PRN)||f.FS||d.slice(0,4)=="sep="||d.indexOf("	")>=0||d.indexOf(",")>=0||d.indexOf(";")>=0?s(d,f):y1(e(d,f),f)}function l(d,f){var A="",h=f.type=="string"?[0,0,0,0]:PR(d,f);switch(f.type){case"base64":A=Hu(d);break;case"binary":A=d;break;case"buffer":f.codepage==65001?A=d.toString("utf8"):f.codepage&&typeof j2<"u"||(A=ea&&Buffer.isBuffer(d)?d.toString("binary"):Lm(d));break;case"array":A=fg(d);break;case"string":A=d;break;default:throw new Error("Unrecognized type "+f.type)}return h[0]==239&&h[1]==187&&h[2]==191?A=ls(A.slice(3)):f.type!="string"&&f.type!="buffer"&&f.codepage==65001?A=ls(A):f.type=="binary"&&typeof j2<"u",A.slice(0,19)=="socialcalc:version:"?yae.to_sheet(f.type=="string"?A:ls(A),f):o(A,f)}function c(d,f){return Um(l(d,f),f)}function u(d){for(var f=[],A=Ea(d["!ref"]),h,m=Array.isArray(d),p=A.s.r;p<=A.e.r;++p){for(var x=[],v=A.s.c;v<=A.e.c;++v){var y=On({r:p,c:v});if(h=m?(d[p]||[])[v]:d[y],!h||h.v==null){x.push("          ");continue}for(var b=(h.w||(yA(h),h.w)||"").slice(0,10);b.length<10;)b+=" ";x.push(b+(v===0?" ":""))}f.push(x.join(""))}return f.join(`
`)}return{to_workbook:c,to_sheet:l,from_sheet:u}}();function CTe(t,e){var r=e||{},n=!!r.WTF;r.WTF=!0;try{var a=xae.to_workbook(t,r);return r.WTF=n,a}catch(s){if(r.WTF=n,!s.message.match(/SYLK bad record ID/)&&n)throw s;return Uv.to_workbook(t,e)}}var Qp=function(){function t(O,G,z){if(O){Cl(O,O.l||0);for(var U=z.Enum||Pe;O.l<O.length;){var Y=O.read_shift(2),ee=U[Y]||U[65535],M=O.read_shift(2),H=O.l+M,te=ee.f&&ee.f(O,M,z);if(O.l=H,G(te,ee,Y))return}}}function e(O,G){switch(G.type){case"base64":return r(Pu(Hu(O)),G);case"binary":return r(Pu(O),G);case"buffer":case"array":return r(O,G)}throw"Unsupported type "+G.type}function r(O,G){if(!O)return O;var z=G||{},U=z.dense?[]:{},Y="Sheet1",ee="",M=0,H={},te=[],Ce=[],V={s:{r:0,c:0},e:{r:0,c:0}},We=z.sheetRows||0;if(O[2]==0&&(O[3]==8||O[3]==9)&&O.length>=16&&O[14]==5&&O[15]===108)throw new Error("Unsupported Works 3 for Mac file");if(O[2]==2)z.Enum=Pe,t(O,function(fe,_e,Ue){switch(Ue){case 0:z.vers=fe,fe>=4096&&(z.qpro=!0);break;case 6:V=fe;break;case 204:fe&&(ee=fe);break;case 222:ee=fe;break;case 15:case 51:z.qpro||(fe[1].v=fe[1].v.slice(1));case 13:case 14:case 16:Ue==14&&(fe[2]&112)==112&&(fe[2]&15)>1&&(fe[2]&15)<15&&(fe[1].z=z.dateNF||Tn[14],z.cellDates&&(fe[1].t="d",fe[1].v=uP(fe[1].v))),z.qpro&&fe[3]>M&&(U["!ref"]=zn(V),H[Y]=U,te.push(Y),U=z.dense?[]:{},V={s:{r:0,c:0},e:{r:0,c:0}},M=fe[3],Y=ee||"Sheet"+(M+1),ee="");var Ye=z.dense?(U[fe[0].r]||[])[fe[0].c]:U[On(fe[0])];if(Ye){Ye.t=fe[1].t,Ye.v=fe[1].v,fe[1].z!=null&&(Ye.z=fe[1].z),fe[1].f!=null&&(Ye.f=fe[1].f);break}z.dense?(U[fe[0].r]||(U[fe[0].r]=[]),U[fe[0].r][fe[0].c]=fe[1]):U[On(fe[0])]=fe[1];break}},z);else if(O[2]==26||O[2]==14)z.Enum=ke,O[2]==14&&(z.qpro=!0,O.l=0),t(O,function(fe,_e,Ue){switch(Ue){case 204:Y=fe;break;case 22:fe[1].v=fe[1].v.slice(1);case 23:case 24:case 25:case 37:case 39:case 40:if(fe[3]>M&&(U["!ref"]=zn(V),H[Y]=U,te.push(Y),U=z.dense?[]:{},V={s:{r:0,c:0},e:{r:0,c:0}},M=fe[3],Y="Sheet"+(M+1)),We>0&&fe[0].r>=We)break;z.dense?(U[fe[0].r]||(U[fe[0].r]=[]),U[fe[0].r][fe[0].c]=fe[1]):U[On(fe[0])]=fe[1],V.e.c<fe[0].c&&(V.e.c=fe[0].c),V.e.r<fe[0].r&&(V.e.r=fe[0].r);break;case 27:fe[14e3]&&(Ce[fe[14e3][0]]=fe[14e3][1]);break;case 1537:Ce[fe[0]]=fe[1],fe[0]==M&&(Y=fe[1]);break}},z);else throw new Error("Unrecognized LOTUS BOF "+O[2]);if(U["!ref"]=zn(V),H[ee||Y]=U,te.push(ee||Y),!Ce.length)return{SheetNames:te,Sheets:H};for(var ie={},J=[],Oe=0;Oe<Ce.length;++Oe)H[te[Oe]]?(J.push(Ce[Oe]||te[Oe]),ie[Ce[Oe]]=H[Ce[Oe]]||H[te[Oe]]):(J.push(Ce[Oe]),ie[Ce[Oe]]={"!ref":"A1"});return{SheetNames:J,Sheets:ie}}function n(O,G){var z=G||{};if(+z.codepage>=0&&ff(+z.codepage),z.type=="string")throw new Error("Cannot write WK1 to JS string");var U=iu(),Y=Ea(O["!ref"]),ee=Array.isArray(O),M=[];Vr(U,0,s(1030)),Vr(U,6,c(Y));for(var H=Math.min(Y.e.r,8191),te=Y.s.r;te<=H;++te)for(var Ce=Ki(te),V=Y.s.c;V<=Y.e.c;++V){te===Y.s.r&&(M[V]=oi(V));var We=M[V]+Ce,ie=ee?(O[te]||[])[V]:O[We];if(!(!ie||ie.t=="z"))if(ie.t=="n")(ie.v|0)==ie.v&&ie.v>=-32768&&ie.v<=32767?Vr(U,13,h(te,V,ie.v)):Vr(U,14,p(te,V,ie.v));else{var J=yA(ie);Vr(U,15,f(te,V,J.slice(0,239)))}}return Vr(U,1),U.end()}function a(O,G){var z=G||{};if(+z.codepage>=0&&ff(+z.codepage),z.type=="string")throw new Error("Cannot write WK3 to JS string");var U=iu();Vr(U,0,o(O));for(var Y=0,ee=0;Y<O.SheetNames.length;++Y)(O.Sheets[O.SheetNames[Y]]||{})["!ref"]&&Vr(U,27,ae(O.SheetNames[Y],ee++));var M=0;for(Y=0;Y<O.SheetNames.length;++Y){var H=O.Sheets[O.SheetNames[Y]];if(!(!H||!H["!ref"])){for(var te=Ea(H["!ref"]),Ce=Array.isArray(H),V=[],We=Math.min(te.e.r,8191),ie=te.s.r;ie<=We;++ie)for(var J=Ki(ie),Oe=te.s.c;Oe<=te.e.c;++Oe){ie===te.s.r&&(V[Oe]=oi(Oe));var fe=V[Oe]+J,_e=Ce?(H[ie]||[])[Oe]:H[fe];if(!(!_e||_e.t=="z"))if(_e.t=="n")Vr(U,23,T(ie,Oe,M,_e.v));else{var Ue=yA(_e);Vr(U,22,_(ie,Oe,M,Ue.slice(0,239)))}}++M}}return Vr(U,1),U.end()}function s(O){var G=nr(2);return G.write_shift(2,O),G}function o(O){var G=nr(26);G.write_shift(2,4096),G.write_shift(2,4),G.write_shift(4,0);for(var z=0,U=0,Y=0,ee=0;ee<O.SheetNames.length;++ee){var M=O.SheetNames[ee],H=O.Sheets[M];if(!(!H||!H["!ref"])){++Y;var te=ou(H["!ref"]);z<te.e.r&&(z=te.e.r),U<te.e.c&&(U=te.e.c)}}return z>8191&&(z=8191),G.write_shift(2,z),G.write_shift(1,Y),G.write_shift(1,U),G.write_shift(2,0),G.write_shift(2,0),G.write_shift(1,1),G.write_shift(1,2),G.write_shift(4,0),G.write_shift(4,0),G}function l(O,G,z){var U={s:{c:0,r:0},e:{c:0,r:0}};return G==8&&z.qpro?(U.s.c=O.read_shift(1),O.l++,U.s.r=O.read_shift(2),U.e.c=O.read_shift(1),O.l++,U.e.r=O.read_shift(2),U):(U.s.c=O.read_shift(2),U.s.r=O.read_shift(2),G==12&&z.qpro&&(O.l+=2),U.e.c=O.read_shift(2),U.e.r=O.read_shift(2),G==12&&z.qpro&&(O.l+=2),U.s.c==65535&&(U.s.c=U.e.c=U.s.r=U.e.r=0),U)}function c(O){var G=nr(8);return G.write_shift(2,O.s.c),G.write_shift(2,O.s.r),G.write_shift(2,O.e.c),G.write_shift(2,O.e.r),G}function u(O,G,z){var U=[{c:0,r:0},{t:"n",v:0},0,0];return z.qpro&&z.vers!=20768?(U[0].c=O.read_shift(1),U[3]=O.read_shift(1),U[0].r=O.read_shift(2),O.l+=2):(U[2]=O.read_shift(1),U[0].c=O.read_shift(2),U[0].r=O.read_shift(2)),U}function d(O,G,z){var U=O.l+G,Y=u(O,G,z);if(Y[1].t="s",z.vers==20768){O.l++;var ee=O.read_shift(1);return Y[1].v=O.read_shift(ee,"utf8"),Y}return z.qpro&&O.l++,Y[1].v=O.read_shift(U-O.l,"cstr"),Y}function f(O,G,z){var U=nr(7+z.length);U.write_shift(1,255),U.write_shift(2,G),U.write_shift(2,O),U.write_shift(1,39);for(var Y=0;Y<U.length;++Y){var ee=z.charCodeAt(Y);U.write_shift(1,ee>=128?95:ee)}return U.write_shift(1,0),U}function A(O,G,z){var U=u(O,G,z);return U[1].v=O.read_shift(2,"i"),U}function h(O,G,z){var U=nr(7);return U.write_shift(1,255),U.write_shift(2,G),U.write_shift(2,O),U.write_shift(2,z,"i"),U}function m(O,G,z){var U=u(O,G,z);return U[1].v=O.read_shift(8,"f"),U}function p(O,G,z){var U=nr(13);return U.write_shift(1,255),U.write_shift(2,G),U.write_shift(2,O),U.write_shift(8,z,"f"),U}function x(O,G,z){var U=O.l+G,Y=u(O,G,z);if(Y[1].v=O.read_shift(8,"f"),z.qpro)O.l=U;else{var ee=O.read_shift(2);w(O.slice(O.l,O.l+ee),Y),O.l+=ee}return Y}function v(O,G,z){var U=G&32768;return G&=-32769,G=(U?O:0)+(G>=8192?G-16384:G),(U?"":"$")+(z?oi(G):Ki(G))}var y={51:["FALSE",0],52:["TRUE",0],70:["LEN",1],80:["SUM",69],81:["AVERAGEA",69],82:["COUNTA",69],83:["MINA",69],84:["MAXA",69],111:["T",1]},b=["","","","","","","","","","+","-","*","/","^","=","<>","<=",">=","<",">","","","","","&","","","","","","",""];function w(O,G){Cl(O,0);for(var z=[],U=0,Y="",ee="",M="",H="";O.l<O.length;){var te=O[O.l++];switch(te){case 0:z.push(O.read_shift(8,"f"));break;case 1:ee=v(G[0].c,O.read_shift(2),!0),Y=v(G[0].r,O.read_shift(2),!1),z.push(ee+Y);break;case 2:{var Ce=v(G[0].c,O.read_shift(2),!0),V=v(G[0].r,O.read_shift(2),!1);ee=v(G[0].c,O.read_shift(2),!0),Y=v(G[0].r,O.read_shift(2),!1),z.push(Ce+V+":"+ee+Y)}break;case 3:if(O.l<O.length){console.error("WK1 premature formula end");return}break;case 4:z.push("("+z.pop()+")");break;case 5:z.push(O.read_shift(2));break;case 6:{for(var We="";te=O[O.l++];)We+=String.fromCharCode(te);z.push('"'+We.replace(/"/g,'""')+'"')}break;case 8:z.push("-"+z.pop());break;case 23:z.push("+"+z.pop());break;case 22:z.push("NOT("+z.pop()+")");break;case 20:case 21:H=z.pop(),M=z.pop(),z.push(["AND","OR"][te-20]+"("+M+","+H+")");break;default:if(te<32&&b[te])H=z.pop(),M=z.pop(),z.push(M+b[te]+H);else if(y[te]){if(U=y[te][1],U==69&&(U=O[O.l++]),U>z.length){console.error("WK1 bad formula parse 0x"+te.toString(16)+":|"+z.join("|")+"|");return}var ie=z.slice(-U);z.length-=U,z.push(y[te][0]+"("+ie.join(",")+")")}else return te<=7?console.error("WK1 invalid opcode "+te.toString(16)):te<=24?console.error("WK1 unsupported op "+te.toString(16)):te<=30?console.error("WK1 invalid opcode "+te.toString(16)):te<=115?console.error("WK1 unsupported function opcode "+te.toString(16)):console.error("WK1 unrecognized opcode "+te.toString(16))}}z.length==1?G[1].f=""+z[0]:console.error("WK1 bad formula parse |"+z.join("|")+"|")}function j(O){var G=[{c:0,r:0},{t:"n",v:0},0];return G[0].r=O.read_shift(2),G[3]=O[O.l++],G[0].c=O[O.l++],G}function I(O,G){var z=j(O);return z[1].t="s",z[1].v=O.read_shift(G-4,"cstr"),z}function _(O,G,z,U){var Y=nr(6+U.length);Y.write_shift(2,O),Y.write_shift(1,z),Y.write_shift(1,G),Y.write_shift(1,39);for(var ee=0;ee<U.length;++ee){var M=U.charCodeAt(ee);Y.write_shift(1,M>=128?95:M)}return Y.write_shift(1,0),Y}function S(O,G){var z=j(O);z[1].v=O.read_shift(2);var U=z[1].v>>1;if(z[1].v&1)switch(U&7){case 0:U=(U>>3)*5e3;break;case 1:U=(U>>3)*500;break;case 2:U=(U>>3)/20;break;case 3:U=(U>>3)/200;break;case 4:U=(U>>3)/2e3;break;case 5:U=(U>>3)/2e4;break;case 6:U=(U>>3)/16;break;case 7:U=(U>>3)/64;break}return z[1].v=U,z}function E(O,G){var z=j(O),U=O.read_shift(4),Y=O.read_shift(4),ee=O.read_shift(2);if(ee==65535)return U===0&&Y===3221225472?(z[1].t="e",z[1].v=15):U===0&&Y===3489660928?(z[1].t="e",z[1].v=42):z[1].v=0,z;var M=ee&32768;return ee=(ee&32767)-16446,z[1].v=(1-M*2)*(Y*Math.pow(2,ee+32)+U*Math.pow(2,ee)),z}function T(O,G,z,U){var Y=nr(14);if(Y.write_shift(2,O),Y.write_shift(1,z),Y.write_shift(1,G),U==0)return Y.write_shift(4,0),Y.write_shift(4,0),Y.write_shift(2,65535),Y;var ee=0,M=0,H=0,te=0;return U<0&&(ee=1,U=-U),M=Math.log2(U)|0,U/=Math.pow(2,M-31),te=U>>>0,te&2147483648||(U/=2,++M,te=U>>>0),U-=te,te|=2147483648,te>>>=0,U*=Math.pow(2,32),H=U>>>0,Y.write_shift(4,H),Y.write_shift(4,te),M+=16383+(ee?32768:0),Y.write_shift(2,M),Y}function k(O,G){var z=E(O);return O.l+=G-14,z}function B(O,G){var z=j(O),U=O.read_shift(4);return z[1].v=U>>6,z}function D(O,G){var z=j(O),U=O.read_shift(8,"f");return z[1].v=U,z}function X(O,G){var z=D(O);return O.l+=G-10,z}function me(O,G){return O[O.l+G-1]==0?O.read_shift(G,"cstr"):""}function pe(O,G){var z=O[O.l++];z>G-1&&(z=G-1);for(var U="";U.length<z;)U+=String.fromCharCode(O[O.l++]);return U}function he(O,G,z){if(!(!z.qpro||G<21)){var U=O.read_shift(1);O.l+=17,O.l+=1,O.l+=2;var Y=O.read_shift(G-21,"cstr");return[U,Y]}}function ve(O,G){for(var z={},U=O.l+G;O.l<U;){var Y=O.read_shift(2);if(Y==14e3){for(z[Y]=[0,""],z[Y][0]=O.read_shift(2);O[O.l];)z[Y][1]+=String.fromCharCode(O[O.l]),O.l++;O.l++}}return z}function ae(O,G){var z=nr(5+O.length);z.write_shift(2,14e3),z.write_shift(2,G);for(var U=0;U<O.length;++U){var Y=O.charCodeAt(U);z[z.l++]=Y>127?95:Y}return z[z.l++]=0,z}var Pe={0:{n:"BOF",f:to},1:{n:"EOF"},2:{n:"CALCMODE"},3:{n:"CALCORDER"},4:{n:"SPLIT"},5:{n:"SYNC"},6:{n:"RANGE",f:l},7:{n:"WINDOW1"},8:{n:"COLW1"},9:{n:"WINTWO"},10:{n:"COLW2"},11:{n:"NAME"},12:{n:"BLANK"},13:{n:"INTEGER",f:A},14:{n:"NUMBER",f:m},15:{n:"LABEL",f:d},16:{n:"FORMULA",f:x},24:{n:"TABLE"},25:{n:"ORANGE"},26:{n:"PRANGE"},27:{n:"SRANGE"},28:{n:"FRANGE"},29:{n:"KRANGE1"},32:{n:"HRANGE"},35:{n:"KRANGE2"},36:{n:"PROTEC"},37:{n:"FOOTER"},38:{n:"HEADER"},39:{n:"SETUP"},40:{n:"MARGINS"},41:{n:"LABELFMT"},42:{n:"TITLES"},43:{n:"SHEETJS"},45:{n:"GRAPH"},46:{n:"NGRAPH"},47:{n:"CALCCOUNT"},48:{n:"UNFORMATTED"},49:{n:"CURSORW12"},50:{n:"WINDOW"},51:{n:"STRING",f:d},55:{n:"PASSWORD"},56:{n:"LOCKED"},60:{n:"QUERY"},61:{n:"QUERYNAME"},62:{n:"PRINT"},63:{n:"PRINTNAME"},64:{n:"GRAPH2"},65:{n:"GRAPHNAME"},66:{n:"ZOOM"},67:{n:"SYMSPLIT"},68:{n:"NSROWS"},69:{n:"NSCOLS"},70:{n:"RULER"},71:{n:"NNAME"},72:{n:"ACOMM"},73:{n:"AMACRO"},74:{n:"PARSE"},102:{n:"PRANGES??"},103:{n:"RRANGES??"},104:{n:"FNAME??"},105:{n:"MRANGES??"},204:{n:"SHEETNAMECS",f:me},222:{n:"SHEETNAMELP",f:pe},65535:{n:""}},ke={0:{n:"BOF"},1:{n:"EOF"},2:{n:"PASSWORD"},3:{n:"CALCSET"},4:{n:"WINDOWSET"},5:{n:"SHEETCELLPTR"},6:{n:"SHEETLAYOUT"},7:{n:"COLUMNWIDTH"},8:{n:"HIDDENCOLUMN"},9:{n:"USERRANGE"},10:{n:"SYSTEMRANGE"},11:{n:"ZEROFORCE"},12:{n:"SORTKEYDIR"},13:{n:"FILESEAL"},14:{n:"DATAFILLNUMS"},15:{n:"PRINTMAIN"},16:{n:"PRINTSTRING"},17:{n:"GRAPHMAIN"},18:{n:"GRAPHSTRING"},19:{n:"??"},20:{n:"ERRCELL"},21:{n:"NACELL"},22:{n:"LABEL16",f:I},23:{n:"NUMBER17",f:E},24:{n:"NUMBER18",f:S},25:{n:"FORMULA19",f:k},26:{n:"FORMULA1A"},27:{n:"XFORMAT",f:ve},28:{n:"DTLABELMISC"},29:{n:"DTLABELCELL"},30:{n:"GRAPHWINDOW"},31:{n:"CPA"},32:{n:"LPLAUTO"},33:{n:"QUERY"},34:{n:"HIDDENSHEET"},35:{n:"??"},37:{n:"NUMBER25",f:B},38:{n:"??"},39:{n:"NUMBER27",f:D},40:{n:"FORMULA28",f:X},142:{n:"??"},147:{n:"??"},150:{n:"??"},151:{n:"??"},152:{n:"??"},153:{n:"??"},154:{n:"??"},155:{n:"??"},156:{n:"??"},163:{n:"??"},174:{n:"??"},175:{n:"??"},176:{n:"??"},177:{n:"??"},184:{n:"??"},185:{n:"??"},186:{n:"??"},187:{n:"??"},188:{n:"??"},195:{n:"??"},201:{n:"??"},204:{n:"SHEETNAMECS",f:me},205:{n:"??"},206:{n:"??"},207:{n:"??"},208:{n:"??"},256:{n:"??"},259:{n:"??"},260:{n:"??"},261:{n:"??"},262:{n:"??"},263:{n:"??"},265:{n:"??"},266:{n:"??"},267:{n:"??"},268:{n:"??"},270:{n:"??"},271:{n:"??"},384:{n:"??"},389:{n:"??"},390:{n:"??"},393:{n:"??"},396:{n:"??"},512:{n:"??"},514:{n:"??"},513:{n:"??"},516:{n:"??"},517:{n:"??"},640:{n:"??"},641:{n:"??"},642:{n:"??"},643:{n:"??"},644:{n:"??"},645:{n:"??"},646:{n:"??"},647:{n:"??"},648:{n:"??"},658:{n:"??"},659:{n:"??"},660:{n:"??"},661:{n:"??"},662:{n:"??"},665:{n:"??"},666:{n:"??"},768:{n:"??"},772:{n:"??"},1537:{n:"SHEETINFOQP",f:he},1600:{n:"??"},1602:{n:"??"},1793:{n:"??"},1794:{n:"??"},1795:{n:"??"},1796:{n:"??"},1920:{n:"??"},2048:{n:"??"},2049:{n:"??"},2052:{n:"??"},2688:{n:"??"},10998:{n:"??"},12849:{n:"??"},28233:{n:"??"},28484:{n:"??"},65535:{n:""}};return{sheet_to_wk1:n,book_to_wk3:a,to_workbook:e}}();function _Te(t){var e={},r=t.match(lc),n=0,a=!1;if(r)for(;n!=r.length;++n){var s=Dn(r[n]);switch(s[0].replace(/\w*:/g,"")){case"<condense":break;case"<extend":break;case"<shadow":if(!s.val)break;case"<shadow>":case"<shadow/>":e.shadow=1;break;case"</shadow>":break;case"<charset":if(s.val=="1")break;e.cp=q6[parseInt(s.val,10)];break;case"<outline":if(!s.val)break;case"<outline>":case"<outline/>":e.outline=1;break;case"</outline>":break;case"<rFont":e.name=s.val;break;case"<sz":e.sz=s.val;break;case"<strike":if(!s.val)break;case"<strike>":case"<strike/>":e.strike=1;break;case"</strike>":break;case"<u":if(!s.val)break;switch(s.val){case"double":e.uval="double";break;case"singleAccounting":e.uval="single-accounting";break;case"doubleAccounting":e.uval="double-accounting";break}case"<u>":case"<u/>":e.u=1;break;case"</u>":break;case"<b":if(s.val=="0")break;case"<b>":case"<b/>":e.b=1;break;case"</b>":break;case"<i":if(s.val=="0")break;case"<i>":case"<i/>":e.i=1;break;case"</i>":break;case"<color":s.rgb&&(e.color=s.rgb.slice(2,8));break;case"<color>":case"<color/>":case"</color>":break;case"<family":e.family=s.val;break;case"<family>":case"<family/>":case"</family>":break;case"<vertAlign":e.valign=s.val;break;case"<vertAlign>":case"<vertAlign/>":case"</vertAlign>":break;case"<scheme":break;case"<scheme>":case"<scheme/>":case"</scheme>":break;case"<extLst":case"<extLst>":case"</extLst>":break;case"<ext":a=!0;break;case"</ext>":a=!1;break;default:if(s[0].charCodeAt(1)!==47&&!a)throw new Error("Unrecognized rich format "+s[0])}}return e}var ETe=function(){var t=T2("t"),e=T2("rPr");function r(s){var o=s.match(t);if(!o)return{t:"s",v:""};var l={t:"s",v:_a(o[1])},c=s.match(e);return c&&(l.s=_Te(c[1])),l}var n=/<(?:\w+:)?r>/g,a=/<\/(?:\w+:)?r>/;return function(o){return o.replace(n,"").split(a).map(r).filter(function(l){return l.v})}}(),STe=function(){var e=/(\r\n|\n)/g;function r(a,s,o){var l=[];a.u&&l.push("text-decoration: underline;"),a.uval&&l.push("text-underline-style:"+a.uval+";"),a.sz&&l.push("font-size:"+a.sz+"pt;"),a.outline&&l.push("text-effect: outline;"),a.shadow&&l.push("text-shadow: auto;"),s.push('<span style="'+l.join("")+'">'),a.b&&(s.push("<b>"),o.push("</b>")),a.i&&(s.push("<i>"),o.push("</i>")),a.strike&&(s.push("<s>"),o.push("</s>"));var c=a.valign||"";return c=="superscript"||c=="super"?c="sup":c=="subscript"&&(c="sub"),c!=""&&(s.push("<"+c+">"),o.push("</"+c+">")),o.push("</span>"),a}function n(a){var s=[[],a.v,[]];return a.v?(a.s&&r(a.s,s[0],s[2]),s[0].join("")+s[1].replace(e,"<br/>")+s[2].join("")):""}return function(s){return s.map(n).join("")}}(),ITe=/<(?:\w+:)?t[^>]*>([^<]*)<\/(?:\w+:)?t>/g,jTe=/<(?:\w+:)?r>/,PTe=/<(?:\w+:)?rPh.*?>([\s\S]*?)<\/(?:\w+:)?rPh>/g;function gR(t,e){var r=e?e.cellHTML:!0,n={};return t?(t.match(/^\s*<(?:\w+:)?t[^>]*>/)?(n.t=_a(ls(t.slice(t.indexOf(">")+1).split(/<\/(?:\w+:)?t>/)[0]||"")),n.r=ls(t),r&&(n.h=nR(n.t))):t.match(jTe)&&(n.r=ls(t),n.t=_a(ls((t.replace(PTe,"").match(ITe)||[]).join("").replace(lc,""))),r&&(n.h=STe(ETe(n.r)))),n):{t:""}}var BTe=/<(?:\w+:)?sst([^>]*)>([\s\S]*)<\/(?:\w+:)?sst>/,TTe=/<(?:\w+:)?(?:si|sstItem)>/g,kTe=/<\/(?:\w+:)?(?:si|sstItem)>/;function FTe(t,e){var r=[],n="";if(!t)return r;var a=t.match(BTe);if(a){n=a[2].replace(TTe,"").split(kTe);for(var s=0;s!=n.length;++s){var o=gR(n[s].trim(),e);o!=null&&(r[r.length]=o)}a=Dn(a[1]),r.Count=a.count,r.Unique=a.uniqueCount}return r}var OTe=/^\s|\s$|[\t\n\r]/;function bae(t,e){if(!e.bookSST)return"";var r=[zi];r[r.length]=Ur("sst",null,{xmlns:Dg[0],count:t.Count,uniqueCount:t.Unique});for(var n=0;n!=t.length;++n)if(t[n]!=null){var a=t[n],s="<si>";a.r?s+=a.r:(s+="<t",a.t||(a.t=""),a.t.match(OTe)&&(s+=' xml:space="preserve"'),s+=">"+ts(a.t)+"</t>"),s+="</si>",r[r.length]=s}return r.length>2&&(r[r.length]="</sst>",r[1]=r[1].replace("/>",">")),r.join("")}function DTe(t){return[t.read_shift(4),t.read_shift(4)]}function RTe(t,e){var r=[],n=!1;return DA(t,function(s,o,l){switch(l){case 159:r.Count=s[0],r.Unique=s[1];break;case 19:r.push(s);break;case 160:return!0;case 35:n=!0;break;case 36:n=!1;break;default:if(o.T,!n||e.WTF)throw new Error("Unexpected record 0x"+l.toString(16))}}),r}function MTe(t,e){return e||(e=nr(8)),e.write_shift(4,t.Count),e.write_shift(4,t.Unique),e}var LTe=W3e;function UTe(t){var e=iu();yr(e,159,MTe(t));for(var r=0;r<t.length;++r)yr(e,19,LTe(t[r]));return yr(e,160),e.end()}function wae(t){for(var e=[],r=t.split(""),n=0;n<r.length;++n)e[n]=r[n].charCodeAt(0);return e}function lA(t,e){var r={};return r.Major=t.read_shift(2),r.Minor=t.read_shift(2),e>=4&&(t.l+=e-4),r}function QTe(t){var e={};return e.id=t.read_shift(0,"lpp4"),e.R=lA(t,4),e.U=lA(t,4),e.W=lA(t,4),e}function VTe(t){for(var e=t.read_shift(4),r=t.l+e-4,n={},a=t.read_shift(4),s=[];a-- >0;)s.push({t:t.read_shift(4),v:t.read_shift(0,"lpp4")});if(n.name=t.read_shift(0,"lpp4"),n.comps=s,t.l!=r)throw new Error("Bad DataSpaceMapEntry: "+t.l+" != "+r);return n}function HTe(t){var e=[];t.l+=4;for(var r=t.read_shift(4);r-- >0;)e.push(VTe(t));return e}function $Te(t){var e=[];t.l+=4;for(var r=t.read_shift(4);r-- >0;)e.push(t.read_shift(0,"lpp4"));return e}function GTe(t){var e={};return t.read_shift(4),t.l+=4,e.id=t.read_shift(0,"lpp4"),e.name=t.read_shift(0,"lpp4"),e.R=lA(t,4),e.U=lA(t,4),e.W=lA(t,4),e}function KTe(t){var e=GTe(t);if(e.ename=t.read_shift(0,"8lpp4"),e.blksz=t.read_shift(4),e.cmode=t.read_shift(4),t.read_shift(4)!=4)throw new Error("Bad !Primary record");return e}function Nae(t,e){var r=t.l+e,n={};n.Flags=t.read_shift(4)&63,t.l+=4,n.AlgID=t.read_shift(4);var a=!1;switch(n.AlgID){case 26126:case 26127:case 26128:a=n.Flags==36;break;case 26625:a=n.Flags==4;break;case 0:a=n.Flags==16||n.Flags==4||n.Flags==36;break;default:throw"Unrecognized encryption algorithm: "+n.AlgID}if(!a)throw new Error("Encryption Flags/AlgID mismatch");return n.AlgIDHash=t.read_shift(4),n.KeySize=t.read_shift(4),n.ProviderType=t.read_shift(4),t.l+=8,n.CSPName=t.read_shift(r-t.l>>1,"utf16le"),t.l=r,n}function Cae(t,e){var r={},n=t.l+e;return t.l+=4,r.Salt=t.slice(t.l,t.l+16),t.l+=16,r.Verifier=t.slice(t.l,t.l+16),t.l+=16,t.read_shift(4),r.VerifierHash=t.slice(t.l,n),t.l=n,r}function qTe(t){var e=lA(t);switch(e.Minor){case 2:return[e.Minor,zTe(t)];case 3:return[e.Minor,WTe()];case 4:return[e.Minor,XTe(t)]}throw new Error("ECMA-376 Encrypted file unrecognized Version: "+e.Minor)}function zTe(t){var e=t.read_shift(4);if((e&63)!=36)throw new Error("EncryptionInfo mismatch");var r=t.read_shift(4),n=Nae(t,r),a=Cae(t,t.length-t.l);return{t:"Std",h:n,v:a}}function WTe(){throw new Error("File is password-protected: ECMA-376 Extensible")}function XTe(t){var e=["saltSize","blockSize","keyBits","hashSize","cipherAlgorithm","cipherChaining","hashAlgorithm","saltValue"];t.l+=4;var r=t.read_shift(t.length-t.l,"utf8"),n={};return r.replace(lc,function(s){var o=Dn(s);switch(ph(o[0])){case"<?xml":break;case"<encryption":case"</encryption>":break;case"<keyData":e.forEach(function(l){n[l]=o[l]});break;case"<dataIntegrity":n.encryptedHmacKey=o.encryptedHmacKey,n.encryptedHmacValue=o.encryptedHmacValue;break;case"<keyEncryptors>":case"<keyEncryptors":n.encs=[];break;case"</keyEncryptors>":break;case"<keyEncryptor":n.uri=o.uri;break;case"</keyEncryptor>":break;case"<encryptedKey":n.encs.push(o);break;default:throw o[0]}}),n}function YTe(t,e){var r={},n=r.EncryptionVersionInfo=lA(t,4);if(e-=4,n.Minor!=2)throw new Error("unrecognized minor version code: "+n.Minor);if(n.Major>4||n.Major<2)throw new Error("unrecognized major version code: "+n.Major);r.Flags=t.read_shift(4),e-=4;var a=t.read_shift(4);return e-=4,r.EncryptionHeader=Nae(t,a),e-=a,r.EncryptionVerifier=Cae(t,e),r}function JTe(t){var e={},r=e.EncryptionVersionInfo=lA(t,4);if(r.Major!=1||r.Minor!=1)throw"unrecognized version code "+r.Major+" : "+r.Minor;return e.Salt=t.read_shift(16),e.EncryptedVerifier=t.read_shift(16),e.EncryptedVerifierHash=t.read_shift(16),e}function xR(t){var e=0,r,n=wae(t),a=n.length+1,s,o,l,c,u;for(r=Em(a),r[0]=n.length,s=1;s!=a;++s)r[s]=n[s-1];for(s=a-1;s>=0;--s)o=r[s],l=e&16384?1:0,c=e<<1&32767,u=l|c,e=u^o;return e^52811}var _ae=function(){var t=[187,255,255,186,255,255,185,128,0,190,15,0,191,15,0],e=[57840,7439,52380,33984,4364,3600,61902,12606,6258,57657,54287,34041,10252,43370,20163],r=[44796,19929,39858,10053,20106,40212,10761,31585,63170,64933,60267,50935,40399,11199,17763,35526,1453,2906,5812,11624,23248,885,1770,3540,7080,14160,28320,56640,55369,41139,20807,41614,21821,43642,17621,28485,56970,44341,19019,38038,14605,29210,60195,50791,40175,10751,21502,43004,24537,18387,36774,3949,7898,15796,31592,63184,47201,24803,49606,37805,14203,28406,56812,17824,35648,1697,3394,6788,13576,27152,43601,17539,35078,557,1114,2228,4456,30388,60776,51953,34243,7079,14158,28316,14128,28256,56512,43425,17251,34502,7597,13105,26210,52420,35241,883,1766,3532,4129,8258,16516,33032,4657,9314,18628],n=function(o){return(o/2|o*128)&255},a=function(o,l){return n(o^l)},s=function(o){for(var l=e[o.length-1],c=104,u=o.length-1;u>=0;--u)for(var d=o[u],f=0;f!=7;++f)d&64&&(l^=r[c]),d*=2,--c;return l};return function(o){for(var l=wae(o),c=s(l),u=l.length,d=Em(16),f=0;f!=16;++f)d[f]=0;var A,h,m;for((u&1)===1&&(A=c>>8,d[u]=a(t[0],A),--u,A=c&255,h=l[l.length-1],d[u]=a(h,A));u>0;)--u,A=c>>8,d[u]=a(l[u],A),--u,A=c&255,d[u]=a(l[u],A);for(u=15,m=15-l.length;m>0;)A=c>>8,d[u]=a(t[m],A),--u,--m,A=c&255,d[u]=a(l[u],A),--u,--m;return d}}(),ZTe=function(t,e,r,n,a){a||(a=e),n||(n=_ae(t));var s,o;for(s=0;s!=e.length;++s)o=e[s],o^=n[r],o=(o>>5|o<<3)&255,a[s]=o,++r;return[a,r,n]},eke=function(t){var e=0,r=_ae(t);return function(n){var a=ZTe("",n,e,r);return e=a[1],a[0]}};function tke(t,e,r,n){var a={key:to(t),verificationBytes:to(t)};return r.password&&(a.verifier=xR(r.password)),n.valid=a.verificationBytes===a.verifier,n.valid&&(n.insitu=eke(r.password)),a}function rke(t,e,r){var n=r||{};return n.Info=t.read_shift(2),t.l-=2,n.Info===1?n.Data=JTe(t):n.Data=YTe(t,e),n}function nke(t,e,r){var n={Type:r.biff>=8?t.read_shift(2):0};return n.Type?rke(t,e-2,n):tke(t,r.biff>=8?e:e-2,r,n),n}var Eae=function(){function t(a,s){switch(s.type){case"base64":return e(Hu(a),s);case"binary":return e(a,s);case"buffer":return e(ea&&Buffer.isBuffer(a)?a.toString("binary"):Lm(a),s);case"array":return e(fg(a),s)}throw new Error("Unrecognized type "+s.type)}function e(a,s){var o=s||{},l=o.dense?[]:{},c=a.match(/\\trowd.*?\\row\b/g);if(!c.length)throw new Error("RTF missing table");var u={s:{c:0,r:0},e:{c:0,r:c.length-1}};return c.forEach(function(d,f){Array.isArray(l)&&(l[f]=[]);for(var A=/\\\w+\b/g,h=0,m,p=-1;m=A.exec(d);){switch(m[0]){case"\\cell":var x=d.slice(h,A.lastIndex-m[0].length);if(x[0]==" "&&(x=x.slice(1)),++p,x.length){var v={v:x,t:"s"};Array.isArray(l)?l[f][p]=v:l[On({r:f,c:p})]=v}break}h=A.lastIndex}p>u.e.c&&(u.e.c=p)}),l["!ref"]=zn(u),l}function r(a,s){return Um(t(a,s),s)}function n(a){for(var s=["{\\rtf1\\ansi"],o=Ea(a["!ref"]),l,c=Array.isArray(a),u=o.s.r;u<=o.e.r;++u){s.push("\\trowd\\trautofit1");for(var d=o.s.c;d<=o.e.c;++d)s.push("\\cellx"+(d+1));for(s.push("\\pard\\intbl"),d=o.s.c;d<=o.e.c;++d){var f=On({r:u,c:d});l=c?(a[u]||[])[d]:a[f],!(!l||l.v==null&&(!l.f||l.F))&&(s.push(" "+(l.w||(yA(l),l.w))),s.push("\\cell"))}s.push("\\pard\\intbl\\row")}return s.join("")+"}"}return{to_workbook:r,to_sheet:t,from_sheet:n}}();function ake(t){var e=t.slice(t[0]==="#"?1:0).slice(0,6);return[parseInt(e.slice(0,2),16),parseInt(e.slice(2,4),16),parseInt(e.slice(4,6),16)]}function D2(t){for(var e=0,r=1;e!=3;++e)r=r*256+(t[e]>255?255:t[e]<0?0:t[e]);return r.toString(16).toUpperCase().slice(1)}function ske(t){var e=t[0]/255,r=t[1]/255,n=t[2]/255,a=Math.max(e,r,n),s=Math.min(e,r,n),o=a-s;if(o===0)return[0,0,e];var l=0,c=0,u=a+s;switch(c=o/(u>1?2-u:u),a){case e:l=((r-n)/o+6)%6;break;case r:l=(n-e)/o+2;break;case n:l=(e-r)/o+4;break}return[l/6,c,u/2]}function ike(t){var e=t[0],r=t[1],n=t[2],a=r*2*(n<.5?n:1-n),s=n-a/2,o=[s,s,s],l=6*e,c;if(r!==0)switch(l|0){case 0:case 6:c=a*l,o[0]+=a,o[1]+=c;break;case 1:c=a*(2-l),o[0]+=c,o[1]+=a;break;case 2:c=a*(l-2),o[1]+=a,o[2]+=c;break;case 3:c=a*(4-l),o[1]+=c,o[2]+=a;break;case 4:c=a*(l-4),o[2]+=a,o[0]+=c;break;case 5:c=a*(6-l),o[2]+=c,o[0]+=a;break}for(var u=0;u!=3;++u)o[u]=Math.round(o[u]*255);return o}function WS(t,e){if(e===0)return t;var r=ske(ake(t));return e<0?r[2]=r[2]*(1+e):r[2]=1-(1-r[2])*(1-e),D2(ike(r))}var Sae=6,oke=15,lke=1,tc=Sae;function R2(t){return Math.floor((t+Math.round(128/tc)/256)*tc)}function M2(t){return Math.floor((t-5)/tc*100+.5)/100}function XS(t){return Math.round((t*tc+5)/tc*256)/256}function B5(t){return XS(M2(R2(t)))}function vR(t){var e=Math.abs(t-B5(t)),r=tc;if(e>.005)for(tc=lke;tc<oke;++tc)Math.abs(t-B5(t))<=e&&(e=Math.abs(t-B5(t)),r=tc);tc=r}function Sm(t){t.width?(t.wpx=R2(t.width),t.wch=M2(t.wpx),t.MDW=tc):t.wpx?(t.wch=M2(t.wpx),t.width=XS(t.wch),t.MDW=tc):typeof t.wch=="number"&&(t.width=XS(t.wch),t.wpx=R2(t.width),t.MDW=tc),t.customWidth&&delete t.customWidth}var cke=96,Iae=cke;function L2(t){return t*96/Iae}function Qv(t){return t*Iae/96}var uke={None:"none",Solid:"solid",Gray50:"mediumGray",Gray75:"darkGray",Gray25:"lightGray",HorzStripe:"darkHorizontal",VertStripe:"darkVertical",ReverseDiagStripe:"darkDown",DiagStripe:"darkUp",DiagCross:"darkGrid",ThickDiagCross:"darkTrellis",ThinHorzStripe:"lightHorizontal",ThinVertStripe:"lightVertical",ThinReverseDiagStripe:"lightDown",ThinHorzCross:"lightGrid"};function dke(t,e,r,n){e.Borders=[];var a={},s=!1;(t[0].match(lc)||[]).forEach(function(o){var l=Dn(o);switch(ph(l[0])){case"<borders":case"<borders>":case"</borders>":break;case"<border":case"<border>":case"<border/>":a={},l.diagonalUp&&(a.diagonalUp=Ps(l.diagonalUp)),l.diagonalDown&&(a.diagonalDown=Ps(l.diagonalDown)),e.Borders.push(a);break;case"</border>":break;case"<left/>":break;case"<left":case"<left>":break;case"</left>":break;case"<right/>":break;case"<right":case"<right>":break;case"</right>":break;case"<top/>":break;case"<top":case"<top>":break;case"</top>":break;case"<bottom/>":break;case"<bottom":case"<bottom>":break;case"</bottom>":break;case"<diagonal":case"<diagonal>":case"<diagonal/>":break;case"</diagonal>":break;case"<horizontal":case"<horizontal>":case"<horizontal/>":break;case"</horizontal>":break;case"<vertical":case"<vertical>":case"<vertical/>":break;case"</vertical>":break;case"<start":case"<start>":case"<start/>":break;case"</start>":break;case"<end":case"<end>":case"<end/>":break;case"</end>":break;case"<color":case"<color>":break;case"<color/>":case"</color>":break;case"<extLst":case"<extLst>":case"</extLst>":break;case"<ext":s=!0;break;case"</ext>":s=!1;break;default:if(n&&n.WTF&&!s)throw new Error("unrecognized "+l[0]+" in borders")}})}function fke(t,e,r,n){e.Fills=[];var a={},s=!1;(t[0].match(lc)||[]).forEach(function(o){var l=Dn(o);switch(ph(l[0])){case"<fills":case"<fills>":case"</fills>":break;case"<fill>":case"<fill":case"<fill/>":a={},e.Fills.push(a);break;case"</fill>":break;case"<gradientFill>":break;case"<gradientFill":case"</gradientFill>":e.Fills.push(a),a={};break;case"<patternFill":case"<patternFill>":l.patternType&&(a.patternType=l.patternType);break;case"<patternFill/>":case"</patternFill>":break;case"<bgColor":a.bgColor||(a.bgColor={}),l.indexed&&(a.bgColor.indexed=parseInt(l.indexed,10)),l.theme&&(a.bgColor.theme=parseInt(l.theme,10)),l.tint&&(a.bgColor.tint=parseFloat(l.tint)),l.rgb&&(a.bgColor.rgb=l.rgb.slice(-6));break;case"<bgColor/>":case"</bgColor>":break;case"<fgColor":a.fgColor||(a.fgColor={}),l.theme&&(a.fgColor.theme=parseInt(l.theme,10)),l.tint&&(a.fgColor.tint=parseFloat(l.tint)),l.rgb!=null&&(a.fgColor.rgb=l.rgb.slice(-6));break;case"<fgColor/>":case"</fgColor>":break;case"<stop":case"<stop/>":break;case"</stop>":break;case"<color":case"<color/>":break;case"</color>":break;case"<extLst":case"<extLst>":case"</extLst>":break;case"<ext":s=!0;break;case"</ext>":s=!1;break;default:if(n&&n.WTF&&!s)throw new Error("unrecognized "+l[0]+" in fills")}})}function hke(t,e,r,n){e.Fonts=[];var a={},s=!1;(t[0].match(lc)||[]).forEach(function(o){var l=Dn(o);switch(ph(l[0])){case"<fonts":case"<fonts>":case"</fonts>":break;case"<font":case"<font>":break;case"</font>":case"<font/>":e.Fonts.push(a),a={};break;case"<name":l.val&&(a.name=ls(l.val));break;case"<name/>":case"</name>":break;case"<b":a.bold=l.val?Ps(l.val):1;break;case"<b/>":a.bold=1;break;case"<i":a.italic=l.val?Ps(l.val):1;break;case"<i/>":a.italic=1;break;case"<u":switch(l.val){case"none":a.underline=0;break;case"single":a.underline=1;break;case"double":a.underline=2;break;case"singleAccounting":a.underline=33;break;case"doubleAccounting":a.underline=34;break}break;case"<u/>":a.underline=1;break;case"<strike":a.strike=l.val?Ps(l.val):1;break;case"<strike/>":a.strike=1;break;case"<outline":a.outline=l.val?Ps(l.val):1;break;case"<outline/>":a.outline=1;break;case"<shadow":a.shadow=l.val?Ps(l.val):1;break;case"<shadow/>":a.shadow=1;break;case"<condense":a.condense=l.val?Ps(l.val):1;break;case"<condense/>":a.condense=1;break;case"<extend":a.extend=l.val?Ps(l.val):1;break;case"<extend/>":a.extend=1;break;case"<sz":l.val&&(a.sz=+l.val);break;case"<sz/>":case"</sz>":break;case"<vertAlign":l.val&&(a.vertAlign=l.val);break;case"<vertAlign/>":case"</vertAlign>":break;case"<family":l.val&&(a.family=parseInt(l.val,10));break;case"<family/>":case"</family>":break;case"<scheme":l.val&&(a.scheme=l.val);break;case"<scheme/>":case"</scheme>":break;case"<charset":if(l.val=="1")break;l.codepage=q6[parseInt(l.val,10)];break;case"<color":if(a.color||(a.color={}),l.auto&&(a.color.auto=Ps(l.auto)),l.rgb)a.color.rgb=l.rgb.slice(-6);else if(l.indexed){a.color.index=parseInt(l.indexed,10);var c=Lp[a.color.index];a.color.index==81&&(c=Lp[1]),c||(c=Lp[1]),a.color.rgb=c[0].toString(16)+c[1].toString(16)+c[2].toString(16)}else l.theme&&(a.color.theme=parseInt(l.theme,10),l.tint&&(a.color.tint=parseFloat(l.tint)),l.theme&&r.themeElements&&r.themeElements.clrScheme&&(a.color.rgb=WS(r.themeElements.clrScheme[a.color.theme].rgb,a.color.tint||0)));break;case"<color/>":case"</color>":break;case"<AlternateContent":s=!0;break;case"</AlternateContent>":s=!1;break;case"<extLst":case"<extLst>":case"</extLst>":break;case"<ext":s=!0;break;case"</ext>":s=!1;break;default:if(n&&n.WTF&&!s)throw new Error("unrecognized "+l[0]+" in fonts")}})}function Ake(t,e,r){e.NumberFmt=[];for(var n=Ii(Tn),a=0;a<n.length;++a)e.NumberFmt[n[a]]=Tn[n[a]];var s=t[0].match(lc);if(s)for(a=0;a<s.length;++a){var o=Dn(s[a]);switch(ph(o[0])){case"<numFmts":case"</numFmts>":case"<numFmts/>":case"<numFmts>":break;case"<numFmt":{var l=_a(ls(o.formatCode)),c=parseInt(o.numFmtId,10);if(e.NumberFmt[c]=l,c>0){if(c>392){for(c=392;c>60&&e.NumberFmt[c]!=null;--c);e.NumberFmt[c]=l}oA(l,c)}}break;case"</numFmt>":break;default:if(r.WTF)throw new Error("unrecognized "+o[0]+" in numFmts")}}}function mke(t){var e=["<numFmts>"];return[[5,8],[23,26],[41,44],[50,392]].forEach(function(r){for(var n=r[0];n<=r[1];++n)t[n]!=null&&(e[e.length]=Ur("numFmt",null,{numFmtId:n,formatCode:ts(t[n])}))}),e.length===1?"":(e[e.length]="</numFmts>",e[0]=Ur("numFmts",null,{count:e.length-2}).replace("/>",">"),e.join(""))}var zC=["numFmtId","fillId","fontId","borderId","xfId"],WC=["applyAlignment","applyBorder","applyFill","applyFont","applyNumberFormat","applyProtection","pivotButton","quotePrefix"];function pke(t,e,r){e.CellXf=[];var n,a=!1;(t[0].match(lc)||[]).forEach(function(s){var o=Dn(s),l=0;switch(ph(o[0])){case"<cellXfs":case"<cellXfs>":case"<cellXfs/>":case"</cellXfs>":break;case"<xf":case"<xf/>":for(n=o,delete n[0],l=0;l<zC.length;++l)n[zC[l]]&&(n[zC[l]]=parseInt(n[zC[l]],10));for(l=0;l<WC.length;++l)n[WC[l]]&&(n[WC[l]]=Ps(n[WC[l]]));if(e.NumberFmt&&n.numFmtId>392){for(l=392;l>60;--l)if(e.NumberFmt[n.numFmtId]==e.NumberFmt[l]){n.numFmtId=l;break}}e.CellXf.push(n);break;case"</xf>":break;case"<alignment":case"<alignment/>":var c={};o.vertical&&(c.vertical=o.vertical),o.horizontal&&(c.horizontal=o.horizontal),o.textRotation!=null&&(c.textRotation=o.textRotation),o.indent&&(c.indent=o.indent),o.wrapText&&(c.wrapText=Ps(o.wrapText)),n.alignment=c;break;case"</alignment>":break;case"<protection":break;case"</protection>":case"<protection/>":break;case"<AlternateContent":a=!0;break;case"</AlternateContent>":a=!1;break;case"<extLst":case"<extLst>":case"</extLst>":break;case"<ext":a=!0;break;case"</ext>":a=!1;break;default:if(r&&r.WTF&&!a)throw new Error("unrecognized "+o[0]+" in cellXfs")}})}function gke(t){var e=[];return e[e.length]=Ur("cellXfs",null),t.forEach(function(r){e[e.length]=Ur("xf",null,r)}),e[e.length]="</cellXfs>",e.length===2?"":(e[0]=Ur("cellXfs",null,{count:e.length-2}).replace("/>",">"),e.join(""))}var xke=function(){var e=/<(?:\w+:)?numFmts([^>]*)>[\S\s]*?<\/(?:\w+:)?numFmts>/,r=/<(?:\w+:)?cellXfs([^>]*)>[\S\s]*?<\/(?:\w+:)?cellXfs>/,n=/<(?:\w+:)?fills([^>]*)>[\S\s]*?<\/(?:\w+:)?fills>/,a=/<(?:\w+:)?fonts([^>]*)>[\S\s]*?<\/(?:\w+:)?fonts>/,s=/<(?:\w+:)?borders([^>]*)>[\S\s]*?<\/(?:\w+:)?borders>/;return function(l,c,u){var d={};if(!l)return d;l=l.replace(/<!--([\s\S]*?)-->/mg,"").replace(/<!DOCTYPE[^\[]*\[[^\]]*\]>/gm,"");var f;return(f=l.match(e))&&Ake(f,d,u),(f=l.match(a))&&hke(f,d,c,u),(f=l.match(n))&&fke(f,d,c,u),(f=l.match(s))&&dke(f,d,c,u),(f=l.match(r))&&pke(f,d,u),d}}();function jae(t,e){var r=[zi,Ur("styleSheet",null,{xmlns:Dg[0],"xmlns:vt":So.vt})],n;return t.SSF&&(n=mke(t.SSF))!=null&&(r[r.length]=n),r[r.length]='<fonts count="1"><font><sz val="12"/><color theme="1"/><name val="Calibri"/><family val="2"/><scheme val="minor"/></font></fonts>',r[r.length]='<fills count="2"><fill><patternFill patternType="none"/></fill><fill><patternFill patternType="gray125"/></fill></fills>',r[r.length]='<borders count="1"><border><left/><right/><top/><bottom/><diagonal/></border></borders>',r[r.length]='<cellStyleXfs count="1"><xf numFmtId="0" fontId="0" fillId="0" borderId="0"/></cellStyleXfs>',(n=gke(e.cellXfs))&&(r[r.length]=n),r[r.length]='<cellStyles count="1"><cellStyle name="Normal" xfId="0" builtinId="0"/></cellStyles>',r[r.length]='<dxfs count="0"/>',r[r.length]='<tableStyles count="0" defaultTableStyle="TableStyleMedium9" defaultPivotStyle="PivotStyleMedium4"/>',r.length>2&&(r[r.length]="</styleSheet>",r[1]=r[1].replace("/>",">")),r.join("")}function vke(t,e){var r=t.read_shift(2),n=ac(t);return[r,n]}function yke(t,e,r){r||(r=nr(6+4*e.length)),r.write_shift(2,t),Yo(e,r);var n=r.length>r.l?r.slice(0,r.l):r;return r.l==null&&(r.l=r.length),n}function bke(t,e,r){var n={};n.sz=t.read_shift(2)/20;var a=r5e(t);a.fItalic&&(n.italic=1),a.fCondense&&(n.condense=1),a.fExtend&&(n.extend=1),a.fShadow&&(n.shadow=1),a.fOutline&&(n.outline=1),a.fStrikeout&&(n.strike=1);var s=t.read_shift(2);switch(s===700&&(n.bold=1),t.read_shift(2)){case 1:n.vertAlign="superscript";break;case 2:n.vertAlign="subscript";break}var o=t.read_shift(1);o!=0&&(n.underline=o);var l=t.read_shift(1);l>0&&(n.family=l);var c=t.read_shift(1);switch(c>0&&(n.charset=c),t.l++,n.color=t5e(t),t.read_shift(1)){case 1:n.scheme="major";break;case 2:n.scheme="minor";break}return n.name=ac(t),n}function wke(t,e){e||(e=nr(25+4*32)),e.write_shift(2,t.sz*20),n5e(t,e),e.write_shift(2,t.bold?700:400);var r=0;t.vertAlign=="superscript"?r=1:t.vertAlign=="subscript"&&(r=2),e.write_shift(2,r),e.write_shift(1,t.underline||0),e.write_shift(1,t.family||0),e.write_shift(1,t.charset||0),e.write_shift(1,0),KS(t.color,e);var n=0;return n=2,e.write_shift(1,n),Yo(t.name,e),e.length>e.l?e.slice(0,e.l):e}var Nke=["none","solid","mediumGray","darkGray","lightGray","darkHorizontal","darkVertical","darkDown","darkUp","darkGrid","darkTrellis","lightHorizontal","lightVertical","lightDown","lightUp","lightGrid","lightTrellis","gray125","gray0625"],T5,Cke=oc;function XH(t,e){e||(e=nr(4*3+8*7+16*1)),T5||(T5=lP(Nke));var r=T5[t.patternType];r==null&&(r=40),e.write_shift(4,r);var n=0;if(r!=40)for(KS({auto:1},e),KS({auto:1},e);n<12;++n)e.write_shift(4,0);else{for(;n<4;++n)e.write_shift(4,0);for(;n<12;++n)e.write_shift(4,0)}return e.length>e.l?e.slice(0,e.l):e}function _ke(t,e){var r=t.l+e,n=t.read_shift(2),a=t.read_shift(2);return t.l=r,{ixfe:n,numFmtId:a}}function Pae(t,e,r){r||(r=nr(16)),r.write_shift(2,e||0),r.write_shift(2,t.numFmtId||0),r.write_shift(2,0),r.write_shift(2,0),r.write_shift(2,0),r.write_shift(1,0),r.write_shift(1,0);var n=0;return r.write_shift(1,n),r.write_shift(1,0),r.write_shift(1,0),r.write_shift(1,0),r}function py(t,e){return e||(e=nr(10)),e.write_shift(1,0),e.write_shift(1,0),e.write_shift(4,0),e.write_shift(4,0),e}var Eke=oc;function Ske(t,e){return e||(e=nr(51)),e.write_shift(1,0),py(null,e),py(null,e),py(null,e),py(null,e),py(null,e),e.length>e.l?e.slice(0,e.l):e}function Ike(t,e){return e||(e=nr(12+4*10)),e.write_shift(4,t.xfId),e.write_shift(2,1),e.write_shift(1,0),e.write_shift(1,0),GS(t.name||"",e),e.length>e.l?e.slice(0,e.l):e}function jke(t,e,r){var n=nr(2052);return n.write_shift(4,t),GS(e,n),GS(r,n),n.length>n.l?n.slice(0,n.l):n}function Pke(t,e,r){var n={};n.NumberFmt=[];for(var a in Tn)n.NumberFmt[a]=Tn[a];n.CellXf=[],n.Fonts=[];var s=[],o=!1;return DA(t,function(c,u,d){switch(d){case 44:n.NumberFmt[c[0]]=c[1],oA(c[1],c[0]);break;case 43:n.Fonts.push(c),c.color.theme!=null&&e&&e.themeElements&&e.themeElements.clrScheme&&(c.color.rgb=WS(e.themeElements.clrScheme[c.color.theme].rgb,c.color.tint||0));break;case 1025:break;case 45:break;case 46:break;case 47:s[s.length-1]==617&&n.CellXf.push(c);break;case 48:case 507:case 572:case 475:break;case 1171:case 2102:case 1130:case 512:case 2095:case 3072:break;case 35:o=!0;break;case 36:o=!1;break;case 37:s.push(d),o=!0;break;case 38:s.pop(),o=!1;break;default:if(u.T>0)s.push(d);else if(u.T<0)s.pop();else if(!o||r.WTF&&s[s.length-1]!=37)throw new Error("Unexpected record 0x"+d.toString(16))}}),n}function Bke(t,e){if(e){var r=0;[[5,8],[23,26],[41,44],[50,392]].forEach(function(n){for(var a=n[0];a<=n[1];++a)e[a]!=null&&++r}),r!=0&&(yr(t,615,xf(r)),[[5,8],[23,26],[41,44],[50,392]].forEach(function(n){for(var a=n[0];a<=n[1];++a)e[a]!=null&&yr(t,44,yke(a,e[a]))}),yr(t,616))}}function Tke(t){var e=1;yr(t,611,xf(e)),yr(t,43,wke({sz:12,color:{theme:1},name:"Calibri",family:2})),yr(t,612)}function kke(t){var e=2;yr(t,603,xf(e)),yr(t,45,XH({patternType:"none"})),yr(t,45,XH({patternType:"gray125"})),yr(t,604)}function Fke(t){var e=1;yr(t,613,xf(e)),yr(t,46,Ske()),yr(t,614)}function Oke(t){var e=1;yr(t,626,xf(e)),yr(t,47,Pae({numFmtId:0},65535)),yr(t,627)}function Dke(t,e){yr(t,617,xf(e.length)),e.forEach(function(r){yr(t,47,Pae(r,0))}),yr(t,618)}function Rke(t){var e=1;yr(t,619,xf(e)),yr(t,48,Ike({xfId:0,name:"Normal"})),yr(t,620)}function Mke(t){var e=0;yr(t,505,xf(e)),yr(t,506)}function Lke(t){var e=0;yr(t,508,jke(e,"TableStyleMedium9","PivotStyleMedium4")),yr(t,509)}function Uke(t,e){var r=iu();return yr(r,278),Bke(r,t.SSF),Tke(r),kke(r),Fke(r),Oke(r),Dke(r,e.cellXfs),Rke(r),Mke(r),Lke(r),yr(r,279),r.end()}var Qke=["</a:lt1>","</a:dk1>","</a:lt2>","</a:dk2>","</a:accent1>","</a:accent2>","</a:accent3>","</a:accent4>","</a:accent5>","</a:accent6>","</a:hlink>","</a:folHlink>"];function Vke(t,e,r){e.themeElements.clrScheme=[];var n={};(t[0].match(lc)||[]).forEach(function(a){var s=Dn(a);switch(s[0]){case"<a:clrScheme":case"</a:clrScheme>":break;case"<a:srgbClr":n.rgb=s.val;break;case"<a:sysClr":n.rgb=s.lastClr;break;case"<a:dk1>":case"</a:dk1>":case"<a:lt1>":case"</a:lt1>":case"<a:dk2>":case"</a:dk2>":case"<a:lt2>":case"</a:lt2>":case"<a:accent1>":case"</a:accent1>":case"<a:accent2>":case"</a:accent2>":case"<a:accent3>":case"</a:accent3>":case"<a:accent4>":case"</a:accent4>":case"<a:accent5>":case"</a:accent5>":case"<a:accent6>":case"</a:accent6>":case"<a:hlink>":case"</a:hlink>":case"<a:folHlink>":case"</a:folHlink>":s[0].charAt(1)==="/"?(e.themeElements.clrScheme[Qke.indexOf(s[0])]=n,n={}):n.name=s[0].slice(3,s[0].length-1);break;default:if(r&&r.WTF)throw new Error("Unrecognized "+s[0]+" in clrScheme")}})}function Hke(){}function $ke(){}var Gke=/<a:clrScheme([^>]*)>[\s\S]*<\/a:clrScheme>/,Kke=/<a:fontScheme([^>]*)>[\s\S]*<\/a:fontScheme>/,qke=/<a:fmtScheme([^>]*)>[\s\S]*<\/a:fmtScheme>/;function zke(t,e,r){e.themeElements={};var n;[["clrScheme",Gke,Vke],["fontScheme",Kke,Hke],["fmtScheme",qke,$ke]].forEach(function(a){if(!(n=t.match(a[1])))throw new Error(a[0]+" not found in themeElements");a[2](n,e,r)})}var Wke=/<a:themeElements([^>]*)>[\s\S]*<\/a:themeElements>/;function Bae(t,e){(!t||t.length===0)&&(t=yR());var r,n={};if(!(r=t.match(Wke)))throw new Error("themeElements not found in theme");return zke(r[0],n,e),n.raw=t,n}function yR(t,e){if(e&&e.themeXLSX)return e.themeXLSX;if(t&&typeof t.raw=="string")return t.raw;var r=[zi];return r[r.length]='<a:theme xmlns:a="http://schemas.openxmlformats.org/drawingml/2006/main" name="Office Theme">',r[r.length]="<a:themeElements>",r[r.length]='<a:clrScheme name="Office">',r[r.length]='<a:dk1><a:sysClr val="windowText" lastClr="000000"/></a:dk1>',r[r.length]='<a:lt1><a:sysClr val="window" lastClr="FFFFFF"/></a:lt1>',r[r.length]='<a:dk2><a:srgbClr val="1F497D"/></a:dk2>',r[r.length]='<a:lt2><a:srgbClr val="EEECE1"/></a:lt2>',r[r.length]='<a:accent1><a:srgbClr val="4F81BD"/></a:accent1>',r[r.length]='<a:accent2><a:srgbClr val="C0504D"/></a:accent2>',r[r.length]='<a:accent3><a:srgbClr val="9BBB59"/></a:accent3>',r[r.length]='<a:accent4><a:srgbClr val="8064A2"/></a:accent4>',r[r.length]='<a:accent5><a:srgbClr val="4BACC6"/></a:accent5>',r[r.length]='<a:accent6><a:srgbClr val="F79646"/></a:accent6>',r[r.length]='<a:hlink><a:srgbClr val="0000FF"/></a:hlink>',r[r.length]='<a:folHlink><a:srgbClr val="800080"/></a:folHlink>',r[r.length]="</a:clrScheme>",r[r.length]='<a:fontScheme name="Office">',r[r.length]="<a:majorFont>",r[r.length]='<a:latin typeface="Cambria"/>',r[r.length]='<a:ea typeface=""/>',r[r.length]='<a:cs typeface=""/>',r[r.length]='<a:font script="Jpan" typeface=" "/>',r[r.length]='<a:font script="Hang" typeface=" "/>',r[r.length]='<a:font script="Hans" typeface=""/>',r[r.length]='<a:font script="Hant" typeface=""/>',r[r.length]='<a:font script="Arab" typeface="Times New Roman"/>',r[r.length]='<a:font script="Hebr" typeface="Times New Roman"/>',r[r.length]='<a:font script="Thai" typeface="Tahoma"/>',r[r.length]='<a:font script="Ethi" typeface="Nyala"/>',r[r.length]='<a:font script="Beng" typeface="Vrinda"/>',r[r.length]='<a:font script="Gujr" typeface="Shruti"/>',r[r.length]='<a:font script="Khmr" typeface="MoolBoran"/>',r[r.length]='<a:font script="Knda" typeface="Tunga"/>',r[r.length]='<a:font script="Guru" typeface="Raavi"/>',r[r.length]='<a:font script="Cans" typeface="Euphemia"/>',r[r.length]='<a:font script="Cher" typeface="Plantagenet Cherokee"/>',r[r.length]='<a:font script="Yiii" typeface="Microsoft Yi Baiti"/>',r[r.length]='<a:font script="Tibt" typeface="Microsoft Himalaya"/>',r[r.length]='<a:font script="Thaa" typeface="MV Boli"/>',r[r.length]='<a:font script="Deva" typeface="Mangal"/>',r[r.length]='<a:font script="Telu" typeface="Gautami"/>',r[r.length]='<a:font script="Taml" typeface="Latha"/>',r[r.length]='<a:font script="Syrc" typeface="Estrangelo Edessa"/>',r[r.length]='<a:font script="Orya" typeface="Kalinga"/>',r[r.length]='<a:font script="Mlym" typeface="Kartika"/>',r[r.length]='<a:font script="Laoo" typeface="DokChampa"/>',r[r.length]='<a:font script="Sinh" typeface="Iskoola Pota"/>',r[r.length]='<a:font script="Mong" typeface="Mongolian Baiti"/>',r[r.length]='<a:font script="Viet" typeface="Times New Roman"/>',r[r.length]='<a:font script="Uigh" typeface="Microsoft Uighur"/>',r[r.length]='<a:font script="Geor" typeface="Sylfaen"/>',r[r.length]="</a:majorFont>",r[r.length]="<a:minorFont>",r[r.length]='<a:latin typeface="Calibri"/>',r[r.length]='<a:ea typeface=""/>',r[r.length]='<a:cs typeface=""/>',r[r.length]='<a:font script="Jpan" typeface=" "/>',r[r.length]='<a:font script="Hang" typeface=" "/>',r[r.length]='<a:font script="Hans" typeface=""/>',r[r.length]='<a:font script="Hant" typeface=""/>',r[r.length]='<a:font script="Arab" typeface="Arial"/>',r[r.length]='<a:font script="Hebr" typeface="Arial"/>',r[r.length]='<a:font script="Thai" typeface="Tahoma"/>',r[r.length]='<a:font script="Ethi" typeface="Nyala"/>',r[r.length]='<a:font script="Beng" typeface="Vrinda"/>',r[r.length]='<a:font script="Gujr" typeface="Shruti"/>',r[r.length]='<a:font script="Khmr" typeface="DaunPenh"/>',r[r.length]='<a:font script="Knda" typeface="Tunga"/>',r[r.length]='<a:font script="Guru" typeface="Raavi"/>',r[r.length]='<a:font script="Cans" typeface="Euphemia"/>',r[r.length]='<a:font script="Cher" typeface="Plantagenet Cherokee"/>',r[r.length]='<a:font script="Yiii" typeface="Microsoft Yi Baiti"/>',r[r.length]='<a:font script="Tibt" typeface="Microsoft Himalaya"/>',r[r.length]='<a:font script="Thaa" typeface="MV Boli"/>',r[r.length]='<a:font script="Deva" typeface="Mangal"/>',r[r.length]='<a:font script="Telu" typeface="Gautami"/>',r[r.length]='<a:font script="Taml" typeface="Latha"/>',r[r.length]='<a:font script="Syrc" typeface="Estrangelo Edessa"/>',r[r.length]='<a:font script="Orya" typeface="Kalinga"/>',r[r.length]='<a:font script="Mlym" typeface="Kartika"/>',r[r.length]='<a:font script="Laoo" typeface="DokChampa"/>',r[r.length]='<a:font script="Sinh" typeface="Iskoola Pota"/>',r[r.length]='<a:font script="Mong" typeface="Mongolian Baiti"/>',r[r.length]='<a:font script="Viet" typeface="Arial"/>',r[r.length]='<a:font script="Uigh" typeface="Microsoft Uighur"/>',r[r.length]='<a:font script="Geor" typeface="Sylfaen"/>',r[r.length]="</a:minorFont>",r[r.length]="</a:fontScheme>",r[r.length]='<a:fmtScheme name="Office">',r[r.length]="<a:fillStyleLst>",r[r.length]='<a:solidFill><a:schemeClr val="phClr"/></a:solidFill>',r[r.length]='<a:gradFill rotWithShape="1">',r[r.length]="<a:gsLst>",r[r.length]='<a:gs pos="0"><a:schemeClr val="phClr"><a:tint val="50000"/><a:satMod val="300000"/></a:schemeClr></a:gs>',r[r.length]='<a:gs pos="35000"><a:schemeClr val="phClr"><a:tint val="37000"/><a:satMod val="300000"/></a:schemeClr></a:gs>',r[r.length]='<a:gs pos="100000"><a:schemeClr val="phClr"><a:tint val="15000"/><a:satMod val="350000"/></a:schemeClr></a:gs>',r[r.length]="</a:gsLst>",r[r.length]='<a:lin ang="16200000" scaled="1"/>',r[r.length]="</a:gradFill>",r[r.length]='<a:gradFill rotWithShape="1">',r[r.length]="<a:gsLst>",r[r.length]='<a:gs pos="0"><a:schemeClr val="phClr"><a:tint val="100000"/><a:shade val="100000"/><a:satMod val="130000"/></a:schemeClr></a:gs>',r[r.length]='<a:gs pos="100000"><a:schemeClr val="phClr"><a:tint val="50000"/><a:shade val="100000"/><a:satMod val="350000"/></a:schemeClr></a:gs>',r[r.length]="</a:gsLst>",r[r.length]='<a:lin ang="16200000" scaled="0"/>',r[r.length]="</a:gradFill>",r[r.length]="</a:fillStyleLst>",r[r.length]="<a:lnStyleLst>",r[r.length]='<a:ln w="9525" cap="flat" cmpd="sng" algn="ctr"><a:solidFill><a:schemeClr val="phClr"><a:shade val="95000"/><a:satMod val="105000"/></a:schemeClr></a:solidFill><a:prstDash val="solid"/></a:ln>',r[r.length]='<a:ln w="25400" cap="flat" cmpd="sng" algn="ctr"><a:solidFill><a:schemeClr val="phClr"/></a:solidFill><a:prstDash val="solid"/></a:ln>',r[r.length]='<a:ln w="38100" cap="flat" cmpd="sng" algn="ctr"><a:solidFill><a:schemeClr val="phClr"/></a:solidFill><a:prstDash val="solid"/></a:ln>',r[r.length]="</a:lnStyleLst>",r[r.length]="<a:effectStyleLst>",r[r.length]="<a:effectStyle>",r[r.length]="<a:effectLst>",r[r.length]='<a:outerShdw blurRad="40000" dist="20000" dir="5400000" rotWithShape="0"><a:srgbClr val="000000"><a:alpha val="38000"/></a:srgbClr></a:outerShdw>',r[r.length]="</a:effectLst>",r[r.length]="</a:effectStyle>",r[r.length]="<a:effectStyle>",r[r.length]="<a:effectLst>",r[r.length]='<a:outerShdw blurRad="40000" dist="23000" dir="5400000" rotWithShape="0"><a:srgbClr val="000000"><a:alpha val="35000"/></a:srgbClr></a:outerShdw>',r[r.length]="</a:effectLst>",r[r.length]="</a:effectStyle>",r[r.length]="<a:effectStyle>",r[r.length]="<a:effectLst>",r[r.length]='<a:outerShdw blurRad="40000" dist="23000" dir="5400000" rotWithShape="0"><a:srgbClr val="000000"><a:alpha val="35000"/></a:srgbClr></a:outerShdw>',r[r.length]="</a:effectLst>",r[r.length]='<a:scene3d><a:camera prst="orthographicFront"><a:rot lat="0" lon="0" rev="0"/></a:camera><a:lightRig rig="threePt" dir="t"><a:rot lat="0" lon="0" rev="1200000"/></a:lightRig></a:scene3d>',r[r.length]='<a:sp3d><a:bevelT w="63500" h="25400"/></a:sp3d>',r[r.length]="</a:effectStyle>",r[r.length]="</a:effectStyleLst>",r[r.length]="<a:bgFillStyleLst>",r[r.length]='<a:solidFill><a:schemeClr val="phClr"/></a:solidFill>',r[r.length]='<a:gradFill rotWithShape="1">',r[r.length]="<a:gsLst>",r[r.length]='<a:gs pos="0"><a:schemeClr val="phClr"><a:tint val="40000"/><a:satMod val="350000"/></a:schemeClr></a:gs>',r[r.length]='<a:gs pos="40000"><a:schemeClr val="phClr"><a:tint val="45000"/><a:shade val="99000"/><a:satMod val="350000"/></a:schemeClr></a:gs>',r[r.length]='<a:gs pos="100000"><a:schemeClr val="phClr"><a:shade val="20000"/><a:satMod val="255000"/></a:schemeClr></a:gs>',r[r.length]="</a:gsLst>",r[r.length]='<a:path path="circle"><a:fillToRect l="50000" t="-80000" r="50000" b="180000"/></a:path>',r[r.length]="</a:gradFill>",r[r.length]='<a:gradFill rotWithShape="1">',r[r.length]="<a:gsLst>",r[r.length]='<a:gs pos="0"><a:schemeClr val="phClr"><a:tint val="80000"/><a:satMod val="300000"/></a:schemeClr></a:gs>',r[r.length]='<a:gs pos="100000"><a:schemeClr val="phClr"><a:shade val="30000"/><a:satMod val="200000"/></a:schemeClr></a:gs>',r[r.length]="</a:gsLst>",r[r.length]='<a:path path="circle"><a:fillToRect l="50000" t="50000" r="50000" b="50000"/></a:path>',r[r.length]="</a:gradFill>",r[r.length]="</a:bgFillStyleLst>",r[r.length]="</a:fmtScheme>",r[r.length]="</a:themeElements>",r[r.length]="<a:objectDefaults>",r[r.length]="<a:spDef>",r[r.length]='<a:spPr/><a:bodyPr/><a:lstStyle/><a:style><a:lnRef idx="1"><a:schemeClr val="accent1"/></a:lnRef><a:fillRef idx="3"><a:schemeClr val="accent1"/></a:fillRef><a:effectRef idx="2"><a:schemeClr val="accent1"/></a:effectRef><a:fontRef idx="minor"><a:schemeClr val="lt1"/></a:fontRef></a:style>',r[r.length]="</a:spDef>",r[r.length]="<a:lnDef>",r[r.length]='<a:spPr/><a:bodyPr/><a:lstStyle/><a:style><a:lnRef idx="2"><a:schemeClr val="accent1"/></a:lnRef><a:fillRef idx="0"><a:schemeClr val="accent1"/></a:fillRef><a:effectRef idx="1"><a:schemeClr val="accent1"/></a:effectRef><a:fontRef idx="minor"><a:schemeClr val="tx1"/></a:fontRef></a:style>',r[r.length]="</a:lnDef>",r[r.length]="</a:objectDefaults>",r[r.length]="<a:extraClrSchemeLst/>",r[r.length]="</a:theme>",r.join("")}function Xke(t,e,r){var n=t.l+e,a=t.read_shift(4);if(a!==124226){if(!r.cellStyles){t.l=n;return}var s=t.slice(t.l);t.l=n;var o;try{o=Nne(s,{type:"array"})}catch{return}var l=Bu(o,"theme/theme/theme1.xml",!0);if(l)return Bae(l,r)}}function Yke(t){return t.read_shift(4)}function Jke(t){var e={};switch(e.xclrType=t.read_shift(2),e.nTintShade=t.read_shift(2),e.xclrType){case 0:t.l+=4;break;case 1:e.xclrValue=Zke(t,4);break;case 2:e.xclrValue=uae(t);break;case 3:e.xclrValue=Yke(t);break;case 4:t.l+=4;break}return t.l+=8,e}function Zke(t,e){return oc(t,e)}function eFe(t,e){return oc(t,e)}function tFe(t){var e=t.read_shift(2),r=t.read_shift(2)-4,n=[e];switch(e){case 4:case 5:case 7:case 8:case 9:case 10:case 11:case 13:n[1]=Jke(t);break;case 6:n[1]=eFe(t,r);break;case 14:case 15:n[1]=t.read_shift(r===1?1:2);break;default:throw new Error("Unrecognized ExtProp type: "+e+" "+r)}return n}function rFe(t,e){var r=t.l+e;t.l+=2;var n=t.read_shift(2);t.l+=2;for(var a=t.read_shift(2),s=[];a-- >0;)s.push(tFe(t,r-t.l));return{ixfe:n,ext:s}}function nFe(t,e){e.forEach(function(r){switch(r[0]){}})}function aFe(t,e){return{flags:t.read_shift(4),version:t.read_shift(4),name:ac(t)}}function sFe(t){var e=nr(12+2*t.name.length);return e.write_shift(4,t.flags),e.write_shift(4,t.version),Yo(t.name,e),e.slice(0,e.l)}function iFe(t){for(var e=[],r=t.read_shift(4);r-- >0;)e.push([t.read_shift(4),t.read_shift(4)]);return e}function oFe(t){var e=nr(4+8*t.length);e.write_shift(4,t.length);for(var r=0;r<t.length;++r)e.write_shift(4,t[r][0]),e.write_shift(4,t[r][1]);return e}function lFe(t,e){var r=nr(8+2*e.length);return r.write_shift(4,t),Yo(e,r),r.slice(0,r.l)}function cFe(t){return t.l+=4,t.read_shift(4)!=0}function uFe(t,e){var r=nr(8);return r.write_shift(4,t),r.write_shift(4,1),r}function dFe(t,e,r){var n={Types:[],Cell:[],Value:[]},a=r||{},s=[],o=!1,l=2;return DA(t,function(c,u,d){switch(d){case 335:n.Types.push({name:c.name});break;case 51:c.forEach(function(f){l==1?n.Cell.push({type:n.Types[f[0]-1].name,index:f[1]}):l==0&&n.Value.push({type:n.Types[f[0]-1].name,index:f[1]})});break;case 337:l=c?1:0;break;case 338:l=2;break;case 35:s.push(d),o=!0;break;case 36:s.pop(),o=!1;break;default:if(!u.T){if(!o||a.WTF&&s[s.length-1]!=35)throw new Error("Unexpected record 0x"+d.toString(16))}}}),n}function fFe(){var t=iu();return yr(t,332),yr(t,334,xf(1)),yr(t,335,sFe({name:"XLDAPR",version:12e4,flags:3496657072})),yr(t,336),yr(t,339,lFe(1,"XLDAPR")),yr(t,52),yr(t,35,xf(514)),yr(t,4096,xf(0)),yr(t,4097,gd(1)),yr(t,36),yr(t,53),yr(t,340),yr(t,337,uFe(1)),yr(t,51,oFe([[1,0]])),yr(t,338),yr(t,333),t.end()}function hFe(t,e,r){var n={Types:[],Cell:[],Value:[]};if(!t)return n;var a=!1,s=2,o;return t.replace(lc,function(l){var c=Dn(l);switch(ph(c[0])){case"<?xml":break;case"<metadata":case"</metadata>":break;case"<metadataTypes":case"</metadataTypes>":break;case"<metadataType":n.Types.push({name:c.name});break;case"</metadataType>":break;case"<futureMetadata":for(var u=0;u<n.Types.length;++u)n.Types[u].name==c.name&&(o=n.Types[u]);break;case"</futureMetadata>":break;case"<bk>":break;case"</bk>":break;case"<rc":s==1?n.Cell.push({type:n.Types[c.t-1].name,index:+c.v}):s==0&&n.Value.push({type:n.Types[c.t-1].name,index:+c.v});break;case"</rc>":break;case"<cellMetadata":s=1;break;case"</cellMetadata>":s=2;break;case"<valueMetadata":s=0;break;case"</valueMetadata>":s=2;break;case"<extLst":case"<extLst>":case"</extLst>":case"<extLst/>":break;case"<ext":a=!0;break;case"</ext>":a=!1;break;case"<rvb":if(!o)break;o.offsets||(o.offsets=[]),o.offsets.push(+c.i);break;default:if(!a&&r.WTF)throw new Error("unrecognized "+c[0]+" in metadata")}return l}),n}function Tae(){var t=[zi];return t.push(`<metadata xmlns="http://schemas.openxmlformats.org/spreadsheetml/2006/main" xmlns:xlrd="http://schemas.microsoft.com/office/spreadsheetml/2017/richdata" xmlns:xda="http://schemas.microsoft.com/office/spreadsheetml/2017/dynamicarray">
  <metadataTypes count="1">
    <metadataType name="XLDAPR" minSupportedVersion="120000" copy="1" pasteAll="1" pasteValues="1" merge="1" splitFirst="1" rowColShift="1" clearFormats="1" clearComments="1" assign="1" coerce="1" cellMeta="1"/>
  </metadataTypes>
  <futureMetadata name="XLDAPR" count="1">
    <bk>
      <extLst>
        <ext uri="{bdbb8cdc-fa1e-496e-a857-3c3f30c029c3}">
          <xda:dynamicArrayProperties fDynamic="1" fCollapsed="0"/>
        </ext>
      </extLst>
    </bk>
  </futureMetadata>
  <cellMetadata count="1">
    <bk>
      <rc t="1" v="0"/>
    </bk>
  </cellMetadata>
</metadata>`),t.join("")}function AFe(t){var e=[];if(!t)return e;var r=1;return(t.match(lc)||[]).forEach(function(n){var a=Dn(n);switch(a[0]){case"<?xml":break;case"<calcChain":case"<calcChain>":case"</calcChain>":break;case"<c":delete a[0],a.i?r=a.i:a.i=r,e.push(a);break}}),e}function mFe(t){var e={};e.i=t.read_shift(4);var r={};r.r=t.read_shift(4),r.c=t.read_shift(4),e.r=On(r);var n=t.read_shift(1);return n&2&&(e.l="1"),n&8&&(e.a="1"),e}function pFe(t,e,r){var n=[];return DA(t,function(s,o,l){switch(l){case 63:n.push(s);break;default:if(!o.T)throw new Error("Unexpected record 0x"+l.toString(16))}}),n}function gFe(t,e,r,n){if(!t)return t;var a=n||{},s=!1;DA(t,function(l,c,u){switch(u){case 359:case 363:case 364:case 366:case 367:case 368:case 369:case 370:case 371:case 472:case 577:case 578:case 579:case 580:case 581:case 582:case 583:case 584:case 585:case 586:case 587:break;case 35:s=!0;break;case 36:s=!1;break;default:if(!c.T){if(!s||a.WTF)throw new Error("Unexpected record 0x"+u.toString(16))}}},a)}function xFe(t,e){if(!t)return"??";var r=(t.match(/<c:chart [^>]*r:id="([^"]*)"/)||["",""])[1];return e["!id"][r].Target}var Wx=1024;function kae(t,e){for(var r=[21600,21600],n=["m0,0l0",r[1],r[0],r[1],r[0],"0xe"].join(","),a=[Ur("xml",null,{"xmlns:v":Iu.v,"xmlns:o":Iu.o,"xmlns:x":Iu.x,"xmlns:mv":Iu.mv}).replace(/\/>/,">"),Ur("o:shapelayout",Ur("o:idmap",null,{"v:ext":"edit",data:t}),{"v:ext":"edit"}),Ur("v:shapetype",[Ur("v:stroke",null,{joinstyle:"miter"}),Ur("v:path",null,{gradientshapeok:"t","o:connecttype":"rect"})].join(""),{id:"_x0000_t202","o:spt":202,coordsize:r.join(","),path:n})];Wx<t*1e3;)Wx+=1e3;return e.forEach(function(s){var o=li(s[0]),l={color2:"#BEFF82",type:"gradient"};l.type=="gradient"&&(l.angle="-180");var c=l.type=="gradient"?Ur("o:fill",null,{type:"gradientUnscaled","v:ext":"view"}):null,u=Ur("v:fill",c,l),d={on:"t",obscured:"t"};++Wx,a=a.concat(["<v:shape"+k2({id:"_x0000_s"+Wx,type:"#_x0000_t202",style:"position:absolute; margin-left:80pt;margin-top:5pt;width:104pt;height:64pt;z-index:10"+(s[1].hidden?";visibility:hidden":""),fillcolor:"#ECFAD4",strokecolor:"#edeaa1"})+">",u,Ur("v:shadow",null,d),Ur("v:path",null,{"o:connecttype":"none"}),'<v:textbox><div style="text-align:left"></div></v:textbox>','<x:ClientData ObjectType="Note">',"<x:MoveWithCells/>","<x:SizeWithCells/>",El("x:Anchor",[o.c+1,0,o.r+1,0,o.c+3,20,o.r+5,20].join(",")),El("x:AutoFill","False"),El("x:Row",String(o.r)),El("x:Column",String(o.c)),s[1].hidden?"":"<x:Visible/>","</x:ClientData>","</v:shape>"])}),a.push("</xml>"),a.join("")}function YH(t,e,r,n){var a=Array.isArray(t),s;e.forEach(function(o){var l=li(o.ref);if(a?(t[l.r]||(t[l.r]=[]),s=t[l.r][l.c]):s=t[o.ref],!s){s={t:"z"},a?t[l.r][l.c]=s:t[o.ref]=s;var c=Ea(t["!ref"]||"BDWGO1000001:A1");c.s.r>l.r&&(c.s.r=l.r),c.e.r<l.r&&(c.e.r=l.r),c.s.c>l.c&&(c.s.c=l.c),c.e.c<l.c&&(c.e.c=l.c);var u=zn(c);u!==t["!ref"]&&(t["!ref"]=u)}s.c||(s.c=[]);var d={a:o.author,t:o.t,r:o.r,T:r};o.h&&(d.h=o.h);for(var f=s.c.length-1;f>=0;--f){if(!r&&s.c[f].T)return;r&&!s.c[f].T&&s.c.splice(f,1)}if(r&&n){for(f=0;f<n.length;++f)if(d.a==n[f].id){d.a=n[f].name||d.a;break}}s.c.push(d)})}function vFe(t,e){if(t.match(/<(?:\w+:)?comments *\/>/))return[];var r=[],n=[],a=t.match(/<(?:\w+:)?authors>([\s\S]*)<\/(?:\w+:)?authors>/);a&&a[1]&&a[1].split(/<\/\w*:?author>/).forEach(function(o){if(!(o===""||o.trim()==="")){var l=o.match(/<(?:\w+:)?author[^>]*>(.*)/);l&&r.push(l[1])}});var s=t.match(/<(?:\w+:)?commentList>([\s\S]*)<\/(?:\w+:)?commentList>/);return s&&s[1]&&s[1].split(/<\/\w*:?comment>/).forEach(function(o){if(!(o===""||o.trim()==="")){var l=o.match(/<(?:\w+:)?comment[^>]*>/);if(l){var c=Dn(l[0]),u={author:c.authorId&&r[c.authorId]||"sheetjsghost",ref:c.ref,guid:c.guid},d=li(c.ref);if(!(e.sheetRows&&e.sheetRows<=d.r)){var f=o.match(/<(?:\w+:)?text>([\s\S]*)<\/(?:\w+:)?text>/),A=!!f&&!!f[1]&&gR(f[1])||{r:"",t:"",h:""};u.r=A.r,A.r=="<t></t>"&&(A.t=A.h=""),u.t=(A.t||"").replace(/\r\n/g,`
`).replace(/\r/g,`
`),e.cellHTML&&(u.h=A.h),n.push(u)}}}}),n}function Fae(t){var e=[zi,Ur("comments",null,{xmlns:Dg[0]})],r=[];return e.push("<authors>"),t.forEach(function(n){n[1].forEach(function(a){var s=ts(a.a);r.indexOf(s)==-1&&(r.push(s),e.push("<author>"+s+"</author>")),a.T&&a.ID&&r.indexOf("tc="+a.ID)==-1&&(r.push("tc="+a.ID),e.push("<author>tc="+a.ID+"</author>"))})}),r.length==0&&(r.push("SheetJ5"),e.push("<author>SheetJ5</author>")),e.push("</authors>"),e.push("<commentList>"),t.forEach(function(n){var a=0,s=[];if(n[1][0]&&n[1][0].T&&n[1][0].ID?a=r.indexOf("tc="+n[1][0].ID):n[1].forEach(function(c){c.a&&(a=r.indexOf(ts(c.a))),s.push(c.t||"")}),e.push('<comment ref="'+n[0]+'" authorId="'+a+'"><text>'),s.length<=1)e.push(El("t",ts(s[0]||"")));else{for(var o=`Comment:
    `+s[0]+`
`,l=1;l<s.length;++l)o+=`Reply:
    `+s[l]+`
`;e.push(El("t",ts(o)))}e.push("</text></comment>")}),e.push("</commentList>"),e.length>2&&(e[e.length]="</comments>",e[1]=e[1].replace("/>",">")),e.join("")}function yFe(t,e){var r=[],n=!1,a={},s=0;return t.replace(lc,function(l,c){var u=Dn(l);switch(ph(u[0])){case"<?xml":break;case"<ThreadedComments":break;case"</ThreadedComments>":break;case"<threadedComment":a={author:u.personId,guid:u.id,ref:u.ref,T:1};break;case"</threadedComment>":a.t!=null&&r.push(a);break;case"<text>":case"<text":s=c+l.length;break;case"</text>":a.t=t.slice(s,c).replace(/\r\n/g,`
`).replace(/\r/g,`
`);break;case"<mentions":case"<mentions>":n=!0;break;case"</mentions>":n=!1;break;case"<extLst":case"<extLst>":case"</extLst>":case"<extLst/>":break;case"<ext":n=!0;break;case"</ext>":n=!1;break;default:if(!n&&e.WTF)throw new Error("unrecognized "+u[0]+" in threaded comments")}return l}),r}function bFe(t,e,r){var n=[zi,Ur("ThreadedComments",null,{xmlns:So.TCMNT}).replace(/[\/]>/,">")];return t.forEach(function(a){var s="";(a[1]||[]).forEach(function(o,l){if(!o.T){delete o.ID;return}o.a&&e.indexOf(o.a)==-1&&e.push(o.a);var c={ref:a[0],id:"{54EE7951-7262-4200-6969-"+("000000000000"+r.tcid++).slice(-12)+"}"};l==0?s=c.id:c.parentId=s,o.ID=c.id,o.a&&(c.personId="{54EE7950-7262-4200-6969-"+("000000000000"+e.indexOf(o.a)).slice(-12)+"}"),n.push(Ur("threadedComment",El("text",o.t||""),c))})}),n.push("</ThreadedComments>"),n.join("")}function wFe(t,e){var r=[],n=!1;return t.replace(lc,function(s){var o=Dn(s);switch(ph(o[0])){case"<?xml":break;case"<personList":break;case"</personList>":break;case"<person":r.push({name:o.displayname,id:o.id});break;case"</person>":break;case"<extLst":case"<extLst>":case"</extLst>":case"<extLst/>":break;case"<ext":n=!0;break;case"</ext>":n=!1;break;default:if(!n&&e.WTF)throw new Error("unrecognized "+o[0]+" in threaded comments")}return s}),r}function NFe(t){var e=[zi,Ur("personList",null,{xmlns:So.TCMNT,"xmlns:x":Dg[0]}).replace(/[\/]>/,">")];return t.forEach(function(r,n){e.push(Ur("person",null,{displayName:r,id:"{54EE7950-7262-4200-6969-"+("000000000000"+n).slice(-12)+"}",userId:r,providerId:"None"}))}),e.push("</personList>"),e.join("")}function CFe(t){var e={};e.iauthor=t.read_shift(4);var r=Ug(t);return e.rfx=r.s,e.ref=On(r.s),t.l+=16,e}function _Fe(t,e){return e==null&&(e=nr(36)),e.write_shift(4,t[1].iauthor),b1(t[0],e),e.write_shift(4,0),e.write_shift(4,0),e.write_shift(4,0),e.write_shift(4,0),e}var EFe=ac;function SFe(t){return Yo(t.slice(0,54))}function IFe(t,e){var r=[],n=[],a={},s=!1;return DA(t,function(l,c,u){switch(u){case 632:n.push(l);break;case 635:a=l;break;case 637:a.t=l.t,a.h=l.h,a.r=l.r;break;case 636:if(a.author=n[a.iauthor],delete a.iauthor,e.sheetRows&&a.rfx&&e.sheetRows<=a.rfx.r)break;a.t||(a.t=""),delete a.rfx,r.push(a);break;case 3072:break;case 35:s=!0;break;case 36:s=!1;break;case 37:break;case 38:break;default:if(!c.T){if(!s||e.WTF)throw new Error("Unexpected record 0x"+u.toString(16))}}}),r}function jFe(t){var e=iu(),r=[];return yr(e,628),yr(e,630),t.forEach(function(n){n[1].forEach(function(a){r.indexOf(a.a)>-1||(r.push(a.a.slice(0,54)),yr(e,632,SFe(a.a)))})}),yr(e,631),yr(e,633),t.forEach(function(n){n[1].forEach(function(a){a.iauthor=r.indexOf(a.a);var s={s:li(n[0]),e:li(n[0])};yr(e,635,_Fe([s,a])),a.t&&a.t.length>0&&yr(e,637,Y3e(a)),yr(e,636),delete a.iauthor})}),yr(e,634),yr(e,629),e.end()}var PFe="application/vnd.ms-office.vbaProject";function BFe(t){var e=_n.utils.cfb_new({root:"R"});return t.FullPaths.forEach(function(r,n){if(!(r.slice(-1)==="/"||!r.match(/_VBA_PROJECT_CUR/))){var a=r.replace(/^[^\/]*/,"R").replace(/\/_VBA_PROJECT_CUR\u0000*/,"");_n.utils.cfb_add(e,a,t.FileIndex[n].content)}}),_n.write(e)}function TFe(t,e){e.FullPaths.forEach(function(r,n){if(n!=0){var a=r.replace(/[^\/]*[\/]/,"/_VBA_PROJECT_CUR/");a.slice(-1)!=="/"&&_n.utils.cfb_add(t,a,e.FileIndex[n].content)}})}var Oae=["xlsb","xlsm","xlam","biff8","xla"];function kFe(){return{"!type":"dialog"}}function FFe(){return{"!type":"dialog"}}function OFe(){return{"!type":"macro"}}function DFe(){return{"!type":"macro"}}var gv=function(){var t=/(^|[^A-Za-z_])R(\[?-?\d+\]|[1-9]\d*|)C(\[?-?\d+\]|[1-9]\d*|)(?![A-Za-z0-9_])/g,e={r:0,c:0};function r(n,a,s,o){var l=!1,c=!1;s.length==0?c=!0:s.charAt(0)=="["&&(c=!0,s=s.slice(1,-1)),o.length==0?l=!0:o.charAt(0)=="["&&(l=!0,o=o.slice(1,-1));var u=s.length>0?parseInt(s,10)|0:0,d=o.length>0?parseInt(o,10)|0:0;return l?d+=e.c:--d,c?u+=e.r:--u,a+(l?"":"$")+oi(d)+(c?"":"$")+Ki(u)}return function(a,s){return e=s,a.replace(t,r)}}(),bR=/(^|[^._A-Z0-9])([$]?)([A-Z]{1,2}|[A-W][A-Z]{2}|X[A-E][A-Z]|XF[A-D])([$]?)(10[0-3]\d{4}|104[0-7]\d{3}|1048[0-4]\d{2}|10485[0-6]\d|104857[0-6]|[1-9]\d{0,5})(?![_.\(A-Za-z0-9])/g,wR=function(){return function(e,r){return e.replace(bR,function(n,a,s,o,l,c){var u=lR(o)-(s?0:r.c),d=oR(c)-(l?0:r.r),f=d==0?"":l?d+1:"["+d+"]",A=u==0?"":s?u+1:"["+u+"]";return a+"R"+f+"C"+A})}}();function Dae(t,e){return t.replace(bR,function(r,n,a,s,o,l){return n+(a=="$"?a+s:oi(lR(s)+e.c))+(o=="$"?o+l:Ki(oR(l)+e.r))})}function RFe(t,e,r){var n=ou(e),a=n.s,s=li(r),o={r:s.r-a.r,c:s.c-a.c};return Dae(t,o)}function MFe(t){return t.length!=1}function JH(t){return t.replace(/_xlfn\./g,"")}function Ji(t){t.l+=1}function Im(t,e){var r=t.read_shift(2);return[r&16383,r>>14&1,r>>15&1]}function Rae(t,e,r){var n=2;if(r){if(r.biff>=2&&r.biff<=5)return Mae(t);r.biff==12&&(n=4)}var a=t.read_shift(n),s=t.read_shift(n),o=Im(t),l=Im(t);return{s:{r:a,c:o[0],cRel:o[1],rRel:o[2]},e:{r:s,c:l[0],cRel:l[1],rRel:l[2]}}}function Mae(t){var e=Im(t),r=Im(t),n=t.read_shift(1),a=t.read_shift(1);return{s:{r:e[0],c:n,cRel:e[1],rRel:e[2]},e:{r:r[0],c:a,cRel:r[1],rRel:r[2]}}}function LFe(t,e,r){if(r.biff<8)return Mae(t);var n=t.read_shift(r.biff==12?4:2),a=t.read_shift(r.biff==12?4:2),s=Im(t),o=Im(t);return{s:{r:n,c:s[0],cRel:s[1],rRel:s[2]},e:{r:a,c:o[0],cRel:o[1],rRel:o[2]}}}function Lae(t,e,r){if(r&&r.biff>=2&&r.biff<=5)return UFe(t);var n=t.read_shift(r&&r.biff==12?4:2),a=Im(t);return{r:n,c:a[0],cRel:a[1],rRel:a[2]}}function UFe(t){var e=Im(t),r=t.read_shift(1);return{r:e[0],c:r,cRel:e[1],rRel:e[2]}}function QFe(t){var e=t.read_shift(2),r=t.read_shift(2);return{r:e,c:r&255,fQuoted:!!(r&16384),cRel:r>>15,rRel:r>>15}}function VFe(t,e,r){var n=r&&r.biff?r.biff:8;if(n>=2&&n<=5)return HFe(t);var a=t.read_shift(n>=12?4:2),s=t.read_shift(2),o=(s&16384)>>14,l=(s&32768)>>15;if(s&=16383,l==1)for(;a>524287;)a-=1048576;if(o==1)for(;s>8191;)s=s-16384;return{r:a,c:s,cRel:o,rRel:l}}function HFe(t){var e=t.read_shift(2),r=t.read_shift(1),n=(e&32768)>>15,a=(e&16384)>>14;return e&=16383,n==1&&e>=8192&&(e=e-16384),a==1&&r>=128&&(r=r-256),{r:e,c:r,cRel:a,rRel:n}}function $Fe(t,e,r){var n=(t[t.l++]&96)>>5,a=Rae(t,r.biff>=2&&r.biff<=5?6:8,r);return[n,a]}function GFe(t,e,r){var n=(t[t.l++]&96)>>5,a=t.read_shift(2,"i"),s=8;if(r)switch(r.biff){case 5:t.l+=12,s=6;break;case 12:s=12;break}var o=Rae(t,s,r);return[n,a,o]}function KFe(t,e,r){var n=(t[t.l++]&96)>>5;return t.l+=r&&r.biff>8?12:r.biff<8?6:8,[n]}function qFe(t,e,r){var n=(t[t.l++]&96)>>5,a=t.read_shift(2),s=8;if(r)switch(r.biff){case 5:t.l+=12,s=6;break;case 12:s=12;break}return t.l+=s,[n,a]}function zFe(t,e,r){var n=(t[t.l++]&96)>>5,a=LFe(t,e-1,r);return[n,a]}function WFe(t,e,r){var n=(t[t.l++]&96)>>5;return t.l+=r.biff==2?6:r.biff==12?14:7,[n]}function ZH(t){var e=t[t.l+1]&1,r=1;return t.l+=4,[e,r]}function XFe(t,e,r){t.l+=2;for(var n=t.read_shift(r&&r.biff==2?1:2),a=[],s=0;s<=n;++s)a.push(t.read_shift(r&&r.biff==2?1:2));return a}function YFe(t,e,r){var n=t[t.l+1]&255?1:0;return t.l+=2,[n,t.read_shift(r&&r.biff==2?1:2)]}function JFe(t,e,r){var n=t[t.l+1]&255?1:0;return t.l+=2,[n,t.read_shift(r&&r.biff==2?1:2)]}function ZFe(t){var e=t[t.l+1]&255?1:0;return t.l+=2,[e,t.read_shift(2)]}function eOe(t,e,r){var n=t[t.l+1]&255?1:0;return t.l+=r&&r.biff==2?3:4,[n]}function Uae(t){var e=t.read_shift(1),r=t.read_shift(1);return[e,r]}function tOe(t){return t.read_shift(2),Uae(t)}function rOe(t){return t.read_shift(2),Uae(t)}function nOe(t,e,r){var n=(t[t.l]&96)>>5;t.l+=1;var a=Lae(t,0,r);return[n,a]}function aOe(t,e,r){var n=(t[t.l]&96)>>5;t.l+=1;var a=VFe(t,0,r);return[n,a]}function sOe(t,e,r){var n=(t[t.l]&96)>>5;t.l+=1;var a=t.read_shift(2);r&&r.biff==5&&(t.l+=12);var s=Lae(t,0,r);return[n,a,s]}function iOe(t,e,r){var n=(t[t.l]&96)>>5;t.l+=1;var a=t.read_shift(r&&r.biff<=3?1:2);return[cDe[a],Hae[a],n]}function oOe(t,e,r){var n=t[t.l++],a=t.read_shift(1),s=r&&r.biff<=3?[n==88?-1:0,t.read_shift(1)]:lOe(t);return[a,(s[0]===0?Hae:lDe)[s[1]]]}function lOe(t){return[t[t.l+1]>>7,t.read_shift(2)&32767]}function cOe(t,e,r){t.l+=r&&r.biff==2?3:4}function uOe(t,e,r){if(t.l++,r&&r.biff==12)return[t.read_shift(4,"i"),0];var n=t.read_shift(2),a=t.read_shift(r&&r.biff==2?1:2);return[n,a]}function dOe(t){return t.l++,RA[t.read_shift(1)]}function fOe(t){return t.l++,t.read_shift(2)}function hOe(t){return t.l++,t.read_shift(1)!==0}function AOe(t){return t.l++,rc(t)}function mOe(t,e,r){return t.l++,Lw(t,e-1,r)}function pOe(t,e){var r=[t.read_shift(1)];if(e==12)switch(r[0]){case 2:r[0]=4;break;case 4:r[0]=16;break;case 0:r[0]=1;break;case 1:r[0]=2;break}switch(r[0]){case 4:r[1]=Di(t,1)?"TRUE":"FALSE",e!=12&&(t.l+=7);break;case 37:case 16:r[1]=RA[t[t.l]],t.l+=e==12?4:8;break;case 0:t.l+=8;break;case 1:r[1]=rc(t);break;case 2:r[1]=Qg(t,0,{biff:e>0&&e<8?2:e});break;default:throw new Error("Bad SerAr: "+r[0])}return r}function gOe(t,e,r){for(var n=t.read_shift(r.biff==12?4:2),a=[],s=0;s!=n;++s)a.push((r.biff==12?Ug:dP)(t));return a}function xOe(t,e,r){var n=0,a=0;r.biff==12?(n=t.read_shift(4),a=t.read_shift(4)):(a=1+t.read_shift(1),n=1+t.read_shift(2)),r.biff>=2&&r.biff<8&&(--n,--a==0&&(a=256));for(var s=0,o=[];s!=n&&(o[s]=[]);++s)for(var l=0;l!=a;++l)o[s][l]=pOe(t,r.biff);return o}function vOe(t,e,r){var n=t.read_shift(1)>>>5&3,a=!r||r.biff>=8?4:2,s=t.read_shift(a);switch(r.biff){case 2:t.l+=5;break;case 3:case 4:t.l+=8;break;case 5:t.l+=12;break}return[n,0,s]}function yOe(t,e,r){if(r.biff==5)return bOe(t);var n=t.read_shift(1)>>>5&3,a=t.read_shift(2),s=t.read_shift(4);return[n,a,s]}function bOe(t){var e=t.read_shift(1)>>>5&3,r=t.read_shift(2,"i");t.l+=8;var n=t.read_shift(2);return t.l+=12,[e,r,n]}function wOe(t,e,r){var n=t.read_shift(1)>>>5&3;t.l+=r&&r.biff==2?3:4;var a=t.read_shift(r&&r.biff==2?1:2);return[n,a]}function NOe(t,e,r){var n=t.read_shift(1)>>>5&3,a=t.read_shift(r&&r.biff==2?1:2);return[n,a]}function COe(t,e,r){var n=t.read_shift(1)>>>5&3;return t.l+=4,r.biff<8&&t.l--,r.biff==12&&(t.l+=2),[n]}function _Oe(t,e,r){var n=(t[t.l++]&96)>>5,a=t.read_shift(2),s=4;if(r)switch(r.biff){case 5:s=15;break;case 12:s=6;break}return t.l+=s,[n,a]}var EOe=oc,SOe=oc,IOe=oc;function Qw(t,e,r){return t.l+=2,[QFe(t)]}function NR(t){return t.l+=6,[]}var jOe=Qw,POe=NR,BOe=NR,TOe=Qw;function Qae(t){return t.l+=2,[to(t),t.read_shift(2)&1]}var kOe=Qw,FOe=Qae,OOe=NR,DOe=Qw,ROe=Qw,MOe=["Data","All","Headers","??","?Data2","??","?DataHeaders","??","Totals","??","??","??","?DataTotals","??","??","??","?Current"];function LOe(t){t.l+=2;var e=t.read_shift(2),r=t.read_shift(2),n=t.read_shift(4),a=t.read_shift(2),s=t.read_shift(2),o=MOe[r>>2&31];return{ixti:e,coltype:r&3,rt:o,idx:n,c:a,C:s}}function UOe(t){return t.l+=2,[t.read_shift(4)]}function QOe(t,e,r){return t.l+=5,t.l+=2,t.l+=r.biff==2?1:4,["PTGSHEET"]}function VOe(t,e,r){return t.l+=r.biff==2?4:5,["PTGENDSHEET"]}function HOe(t){var e=t.read_shift(1)>>>5&3,r=t.read_shift(2);return[e,r]}function $Oe(t){var e=t.read_shift(1)>>>5&3,r=t.read_shift(2);return[e,r]}function GOe(t){return t.l+=4,[0,0]}var e$={1:{n:"PtgExp",f:uOe},2:{n:"PtgTbl",f:IOe},3:{n:"PtgAdd",f:Ji},4:{n:"PtgSub",f:Ji},5:{n:"PtgMul",f:Ji},6:{n:"PtgDiv",f:Ji},7:{n:"PtgPower",f:Ji},8:{n:"PtgConcat",f:Ji},9:{n:"PtgLt",f:Ji},10:{n:"PtgLe",f:Ji},11:{n:"PtgEq",f:Ji},12:{n:"PtgGe",f:Ji},13:{n:"PtgGt",f:Ji},14:{n:"PtgNe",f:Ji},15:{n:"PtgIsect",f:Ji},16:{n:"PtgUnion",f:Ji},17:{n:"PtgRange",f:Ji},18:{n:"PtgUplus",f:Ji},19:{n:"PtgUminus",f:Ji},20:{n:"PtgPercent",f:Ji},21:{n:"PtgParen",f:Ji},22:{n:"PtgMissArg",f:Ji},23:{n:"PtgStr",f:mOe},26:{n:"PtgSheet",f:QOe},27:{n:"PtgEndSheet",f:VOe},28:{n:"PtgErr",f:dOe},29:{n:"PtgBool",f:hOe},30:{n:"PtgInt",f:fOe},31:{n:"PtgNum",f:AOe},32:{n:"PtgArray",f:WFe},33:{n:"PtgFunc",f:iOe},34:{n:"PtgFuncVar",f:oOe},35:{n:"PtgName",f:vOe},36:{n:"PtgRef",f:nOe},37:{n:"PtgArea",f:$Fe},38:{n:"PtgMemArea",f:wOe},39:{n:"PtgMemErr",f:EOe},40:{n:"PtgMemNoMem",f:SOe},41:{n:"PtgMemFunc",f:NOe},42:{n:"PtgRefErr",f:COe},43:{n:"PtgAreaErr",f:KFe},44:{n:"PtgRefN",f:aOe},45:{n:"PtgAreaN",f:zFe},46:{n:"PtgMemAreaN",f:HOe},47:{n:"PtgMemNoMemN",f:$Oe},57:{n:"PtgNameX",f:yOe},58:{n:"PtgRef3d",f:sOe},59:{n:"PtgArea3d",f:GFe},60:{n:"PtgRefErr3d",f:_Oe},61:{n:"PtgAreaErr3d",f:qFe},255:{}},KOe={64:32,96:32,65:33,97:33,66:34,98:34,67:35,99:35,68:36,100:36,69:37,101:37,70:38,102:38,71:39,103:39,72:40,104:40,73:41,105:41,74:42,106:42,75:43,107:43,76:44,108:44,77:45,109:45,78:46,110:46,79:47,111:47,88:34,120:34,89:57,121:57,90:58,122:58,91:59,123:59,92:60,124:60,93:61,125:61},qOe={1:{n:"PtgElfLel",f:Qae},2:{n:"PtgElfRw",f:DOe},3:{n:"PtgElfCol",f:jOe},6:{n:"PtgElfRwV",f:ROe},7:{n:"PtgElfColV",f:TOe},10:{n:"PtgElfRadical",f:kOe},11:{n:"PtgElfRadicalS",f:OOe},13:{n:"PtgElfColS",f:POe},15:{n:"PtgElfColSV",f:BOe},16:{n:"PtgElfRadicalLel",f:FOe},25:{n:"PtgList",f:LOe},29:{n:"PtgSxName",f:UOe},255:{}},zOe={0:{n:"PtgAttrNoop",f:GOe},1:{n:"PtgAttrSemi",f:eOe},2:{n:"PtgAttrIf",f:JFe},4:{n:"PtgAttrChoose",f:XFe},8:{n:"PtgAttrGoto",f:YFe},16:{n:"PtgAttrSum",f:cOe},32:{n:"PtgAttrBaxcel",f:ZH},33:{n:"PtgAttrBaxcel",f:ZH},64:{n:"PtgAttrSpace",f:tOe},65:{n:"PtgAttrSpaceSemi",f:rOe},128:{n:"PtgAttrIfError",f:ZFe},255:{}};function Vw(t,e,r,n){if(n.biff<8)return oc(t,e);for(var a=t.l+e,s=[],o=0;o!==r.length;++o)switch(r[o][0]){case"PtgArray":r[o][1]=xOe(t,0,n),s.push(r[o][1]);break;case"PtgMemArea":r[o][2]=gOe(t,r[o][1],n),s.push(r[o][2]);break;case"PtgExp":n&&n.biff==12&&(r[o][1][1]=t.read_shift(4),s.push(r[o][1]));break;case"PtgList":case"PtgElfRadicalS":case"PtgElfColS":case"PtgElfColSV":throw"Unsupported "+r[o][0]}return e=a-t.l,e!==0&&s.push(oc(t,e)),s}function Hw(t,e,r){for(var n=t.l+e,a,s,o=[];n!=t.l;)e=n-t.l,s=t[t.l],a=e$[s]||e$[KOe[s]],(s===24||s===25)&&(a=(s===24?qOe:zOe)[t[t.l+1]]),!a||!a.f?oc(t,e):o.push([a.n,a.f(t,e,r)]);return o}function WOe(t){for(var e=[],r=0;r<t.length;++r){for(var n=t[r],a=[],s=0;s<n.length;++s){var o=n[s];if(o)switch(o[0]){case 2:a.push('"'+o[1].replace(/"/g,'""')+'"');break;default:a.push(o[1])}else a.push("")}e.push(a.join(","))}return e.join(";")}var XOe={PtgAdd:"+",PtgConcat:"&",PtgDiv:"/",PtgEq:"=",PtgGe:">=",PtgGt:">",PtgLe:"<=",PtgLt:"<",PtgMul:"*",PtgNe:"<>",PtgPower:"^",PtgSub:"-"};function YOe(t,e){if(!t&&!(e&&e.biff<=5&&e.biff>=2))throw new Error("empty sheet name");return/[^\w\u4E00-\u9FFF\u3040-\u30FF]/.test(t)?"'"+t+"'":t}function Vae(t,e,r){if(!t)return"SH33TJSERR0";if(r.biff>8&&(!t.XTI||!t.XTI[e]))return t.SheetNames[e];if(!t.XTI)return"SH33TJSERR6";var n=t.XTI[e];if(r.biff<8)return e>1e4&&(e-=65536),e<0&&(e=-e),e==0?"":t.XTI[e-1];if(!n)return"SH33TJSERR1";var a="";if(r.biff>8)switch(t[n[0]][0]){case 357:return a=n[1]==-1?"#REF":t.SheetNames[n[1]],n[1]==n[2]?a:a+":"+t.SheetNames[n[2]];case 358:return r.SID!=null?t.SheetNames[r.SID]:"SH33TJSSAME"+t[n[0]][0];case 355:default:return"SH33TJSSRC"+t[n[0]][0]}switch(t[n[0]][0][0]){case 1025:return a=n[1]==-1?"#REF":t.SheetNames[n[1]]||"SH33TJSERR3",n[1]==n[2]?a:a+":"+t.SheetNames[n[2]];case 14849:return t[n[0]].slice(1).map(function(s){return s.Name}).join(";;");default:return t[n[0]][0][3]?(a=n[1]==-1?"#REF":t[n[0]][0][3][n[1]]||"SH33TJSERR4",n[1]==n[2]?a:a+":"+t[n[0]][0][3][n[2]]):"SH33TJSERR2"}}function t$(t,e,r){var n=Vae(t,e,r);return n=="#REF"?n:YOe(n,r)}function Zl(t,e,r,n,a){var s=a&&a.biff||8,o={s:{c:0,r:0}},l=[],c,u,d,f=0,A=0,h,m="";if(!t[0]||!t[0][0])return"";for(var p=-1,x="",v=0,y=t[0].length;v<y;++v){var b=t[0][v];switch(b[0]){case"PtgUminus":l.push("-"+l.pop());break;case"PtgUplus":l.push("+"+l.pop());break;case"PtgPercent":l.push(l.pop()+"%");break;case"PtgAdd":case"PtgConcat":case"PtgDiv":case"PtgEq":case"PtgGe":case"PtgGt":case"PtgLe":case"PtgLt":case"PtgMul":case"PtgNe":case"PtgPower":case"PtgSub":if(c=l.pop(),u=l.pop(),p>=0){switch(t[0][p][1][0]){case 0:x=Ci(" ",t[0][p][1][1]);break;case 1:x=Ci("\r",t[0][p][1][1]);break;default:if(x="",a.WTF)throw new Error("Unexpected PtgAttrSpaceType "+t[0][p][1][0])}u=u+x,p=-1}l.push(u+XOe[b[0]]+c);break;case"PtgIsect":c=l.pop(),u=l.pop(),l.push(u+" "+c);break;case"PtgUnion":c=l.pop(),u=l.pop(),l.push(u+","+c);break;case"PtgRange":c=l.pop(),u=l.pop(),l.push(u+":"+c);break;case"PtgAttrChoose":break;case"PtgAttrGoto":break;case"PtgAttrIf":break;case"PtgAttrIfError":break;case"PtgRef":d=Tb(b[1][1],o,a),l.push(kb(d,s));break;case"PtgRefN":d=r?Tb(b[1][1],r,a):b[1][1],l.push(kb(d,s));break;case"PtgRef3d":f=b[1][1],d=Tb(b[1][2],o,a),m=t$(n,f,a),l.push(m+"!"+kb(d,s));break;case"PtgFunc":case"PtgFuncVar":var w=b[1][0],j=b[1][1];w||(w=0),w&=127;var I=w==0?[]:l.slice(-w);l.length-=w,j==="User"&&(j=I.shift()),l.push(j+"("+I.join(",")+")");break;case"PtgBool":l.push(b[1]?"TRUE":"FALSE");break;case"PtgInt":l.push(b[1]);break;case"PtgNum":l.push(String(b[1]));break;case"PtgStr":l.push('"'+b[1].replace(/"/g,'""')+'"');break;case"PtgErr":l.push(b[1]);break;case"PtgAreaN":h=PH(b[1][1],r?{s:r}:o,a),l.push(I5(h,a));break;case"PtgArea":h=PH(b[1][1],o,a),l.push(I5(h,a));break;case"PtgArea3d":f=b[1][1],h=b[1][2],m=t$(n,f,a),l.push(m+"!"+I5(h,a));break;case"PtgAttrSum":l.push("SUM("+l.pop()+")");break;case"PtgAttrBaxcel":case"PtgAttrSemi":break;case"PtgName":A=b[1][2];var _=(n.names||[])[A-1]||(n[0]||[])[A],S=_?_.Name:"SH33TJSNAME"+String(A);S&&S.slice(0,6)=="_xlfn."&&!a.xlfn&&(S=S.slice(6)),l.push(S);break;case"PtgNameX":var E=b[1][1];A=b[1][2];var T;if(a.biff<=5)E<0&&(E=-E),n[E]&&(T=n[E][A]);else{var k="";if(((n[E]||[])[0]||[])[0]==14849||(((n[E]||[])[0]||[])[0]==1025?n[E][A]&&n[E][A].itab>0&&(k=n.SheetNames[n[E][A].itab-1]+"!"):k=n.SheetNames[A-1]+"!"),n[E]&&n[E][A])k+=n[E][A].Name;else if(n[0]&&n[0][A])k+=n[0][A].Name;else{var B=(Vae(n,E,a)||"").split(";;");B[A-1]?k=B[A-1]:k+="SH33TJSERRX"}l.push(k);break}T||(T={Name:"SH33TJSERRY"}),l.push(T.Name);break;case"PtgParen":var D="(",X=")";if(p>=0){switch(x="",t[0][p][1][0]){case 2:D=Ci(" ",t[0][p][1][1])+D;break;case 3:D=Ci("\r",t[0][p][1][1])+D;break;case 4:X=Ci(" ",t[0][p][1][1])+X;break;case 5:X=Ci("\r",t[0][p][1][1])+X;break;default:if(a.WTF)throw new Error("Unexpected PtgAttrSpaceType "+t[0][p][1][0])}p=-1}l.push(D+l.pop()+X);break;case"PtgRefErr":l.push("#REF!");break;case"PtgRefErr3d":l.push("#REF!");break;case"PtgExp":d={c:b[1][1],r:b[1][0]};var me={c:r.c,r:r.r};if(n.sharedf[On(d)]){var pe=n.sharedf[On(d)];l.push(Zl(pe,o,me,n,a))}else{var he=!1;for(c=0;c!=n.arrayf.length;++c)if(u=n.arrayf[c],!(d.c<u[0].s.c||d.c>u[0].e.c)&&!(d.r<u[0].s.r||d.r>u[0].e.r)){l.push(Zl(u[1],o,me,n,a)),he=!0;break}he||l.push(b[1])}break;case"PtgArray":l.push("{"+WOe(b[1])+"}");break;case"PtgMemArea":break;case"PtgAttrSpace":case"PtgAttrSpaceSemi":p=v;break;case"PtgTbl":break;case"PtgMemErr":break;case"PtgMissArg":l.push("");break;case"PtgAreaErr":l.push("#REF!");break;case"PtgAreaErr3d":l.push("#REF!");break;case"PtgList":l.push("Table"+b[1].idx+"[#"+b[1].rt+"]");break;case"PtgMemAreaN":case"PtgMemNoMemN":case"PtgAttrNoop":case"PtgSheet":case"PtgEndSheet":break;case"PtgMemFunc":break;case"PtgMemNoMem":break;case"PtgElfCol":case"PtgElfColS":case"PtgElfColSV":case"PtgElfColV":case"PtgElfLel":case"PtgElfRadical":case"PtgElfRadicalLel":case"PtgElfRadicalS":case"PtgElfRw":case"PtgElfRwV":throw new Error("Unsupported ELFs");case"PtgSxName":throw new Error("Unrecognized Formula Token: "+String(b));default:throw new Error("Unrecognized Formula Token: "+String(b))}var ve=["PtgAttrSpace","PtgAttrSpaceSemi","PtgAttrGoto"];if(a.biff!=3&&p>=0&&ve.indexOf(t[0][v][0])==-1){b=t[0][p];var ae=!0;switch(b[1][0]){case 4:ae=!1;case 0:x=Ci(" ",b[1][1]);break;case 5:ae=!1;case 1:x=Ci("\r",b[1][1]);break;default:if(x="",a.WTF)throw new Error("Unexpected PtgAttrSpaceType "+b[1][0])}l.push((ae?x:"")+l.pop()+(ae?"":x)),p=-1}}if(l.length>1&&a.WTF)throw new Error("bad formula stack");return l[0]}function JOe(t,e,r){var n=t.l+e,a=r.biff==2?1:2,s,o=t.read_shift(a);if(o==65535)return[[],oc(t,e-2)];var l=Hw(t,o,r);return e!==o+a&&(s=Vw(t,e-o-a,l,r)),t.l=n,[l,s]}function ZOe(t,e,r){var n=t.l+e,a=r.biff==2?1:2,s,o=t.read_shift(a);if(o==65535)return[[],oc(t,e-2)];var l=Hw(t,o,r);return e!==o+a&&(s=Vw(t,e-o-a,l,r)),t.l=n,[l,s]}function eDe(t,e,r,n){var a=t.l+e,s=Hw(t,n,r),o;return a!==t.l&&(o=Vw(t,a-t.l,s,r)),[s,o]}function tDe(t,e,r){var n=t.l+e,a,s=t.read_shift(2),o=Hw(t,s,r);return s==65535?[[],oc(t,e-2)]:(e!==s+2&&(a=Vw(t,n-s-2,o,r)),[o,a])}function rDe(t){var e;if(Xh(t,t.l+6)!==65535)return[rc(t),"n"];switch(t[t.l]){case 0:return t.l+=8,["String","s"];case 1:return e=t[t.l+2]===1,t.l+=8,[e,"b"];case 2:return e=t[t.l+2],t.l+=8,[e,"e"];case 3:return t.l+=8,["","s"]}return[]}function nDe(t){if(t==null){var e=nr(8);return e.write_shift(1,3),e.write_shift(1,0),e.write_shift(2,0),e.write_shift(2,0),e.write_shift(2,65535),e}else if(typeof t=="number")return hg(t);return hg(0)}function k5(t,e,r){var n=t.l+e,a=gh(t);r.biff==2&&++t.l;var s=rDe(t),o=t.read_shift(1);r.biff!=2&&(t.read_shift(1),r.biff>=5&&t.read_shift(4));var l=ZOe(t,n-t.l,r);return{cell:a,val:s[0],formula:l,shared:o>>3&1,tt:s[1]}}function aDe(t,e,r,n,a){var s=mg(e,r,a),o=nDe(t.v),l=nr(6),c=33;l.write_shift(2,c),l.write_shift(4,0);for(var u=nr(t.bf.length),d=0;d<t.bf.length;++d)u[d]=t.bf[d];var f=Xo([s,o,l,u]);return f}function fP(t,e,r){var n=t.read_shift(4),a=Hw(t,n,r),s=t.read_shift(4),o=s>0?Vw(t,s,a,r):null;return[a,o]}var sDe=fP,hP=fP,iDe=fP,oDe=fP,lDe={0:"BEEP",1:"OPEN",2:"OPEN.LINKS",3:"CLOSE.ALL",4:"SAVE",5:"SAVE.AS",6:"FILE.DELETE",7:"PAGE.SETUP",8:"PRINT",9:"PRINTER.SETUP",10:"QUIT",11:"NEW.WINDOW",12:"ARRANGE.ALL",13:"WINDOW.SIZE",14:"WINDOW.MOVE",15:"FULL",16:"CLOSE",17:"RUN",22:"SET.PRINT.AREA",23:"SET.PRINT.TITLES",24:"SET.PAGE.BREAK",25:"REMOVE.PAGE.BREAK",26:"FONT",27:"DISPLAY",28:"PROTECT.DOCUMENT",29:"PRECISION",30:"A1.R1C1",31:"CALCULATE.NOW",32:"CALCULATION",34:"DATA.FIND",35:"EXTRACT",36:"DATA.DELETE",37:"SET.DATABASE",38:"SET.CRITERIA",39:"SORT",40:"DATA.SERIES",41:"TABLE",42:"FORMAT.NUMBER",43:"ALIGNMENT",44:"STYLE",45:"BORDER",46:"CELL.PROTECTION",47:"COLUMN.WIDTH",48:"UNDO",49:"CUT",50:"COPY",51:"PASTE",52:"CLEAR",53:"PASTE.SPECIAL",54:"EDIT.DELETE",55:"INSERT",56:"FILL.RIGHT",57:"FILL.DOWN",61:"DEFINE.NAME",62:"CREATE.NAMES",63:"FORMULA.GOTO",64:"FORMULA.FIND",65:"SELECT.LAST.CELL",66:"SHOW.ACTIVE.CELL",67:"GALLERY.AREA",68:"GALLERY.BAR",69:"GALLERY.COLUMN",70:"GALLERY.LINE",71:"GALLERY.PIE",72:"GALLERY.SCATTER",73:"COMBINATION",74:"PREFERRED",75:"ADD.OVERLAY",76:"GRIDLINES",77:"SET.PREFERRED",78:"AXES",79:"LEGEND",80:"ATTACH.TEXT",81:"ADD.ARROW",82:"SELECT.CHART",83:"SELECT.PLOT.AREA",84:"PATTERNS",85:"MAIN.CHART",86:"OVERLAY",87:"SCALE",88:"FORMAT.LEGEND",89:"FORMAT.TEXT",90:"EDIT.REPEAT",91:"PARSE",92:"JUSTIFY",93:"HIDE",94:"UNHIDE",95:"WORKSPACE",96:"FORMULA",97:"FORMULA.FILL",98:"FORMULA.ARRAY",99:"DATA.FIND.NEXT",100:"DATA.FIND.PREV",101:"FORMULA.FIND.NEXT",102:"FORMULA.FIND.PREV",103:"ACTIVATE",104:"ACTIVATE.NEXT",105:"ACTIVATE.PREV",106:"UNLOCKED.NEXT",107:"UNLOCKED.PREV",108:"COPY.PICTURE",109:"SELECT",110:"DELETE.NAME",111:"DELETE.FORMAT",112:"VLINE",113:"HLINE",114:"VPAGE",115:"HPAGE",116:"VSCROLL",117:"HSCROLL",118:"ALERT",119:"NEW",120:"CANCEL.COPY",121:"SHOW.CLIPBOARD",122:"MESSAGE",124:"PASTE.LINK",125:"APP.ACTIVATE",126:"DELETE.ARROW",127:"ROW.HEIGHT",128:"FORMAT.MOVE",129:"FORMAT.SIZE",130:"FORMULA.REPLACE",131:"SEND.KEYS",132:"SELECT.SPECIAL",133:"APPLY.NAMES",134:"REPLACE.FONT",135:"FREEZE.PANES",136:"SHOW.INFO",137:"SPLIT",138:"ON.WINDOW",139:"ON.DATA",140:"DISABLE.INPUT",142:"OUTLINE",143:"LIST.NAMES",144:"FILE.CLOSE",145:"SAVE.WORKBOOK",146:"DATA.FORM",147:"COPY.CHART",148:"ON.TIME",149:"WAIT",150:"FORMAT.FONT",151:"FILL.UP",152:"FILL.LEFT",153:"DELETE.OVERLAY",155:"SHORT.MENUS",159:"SET.UPDATE.STATUS",161:"COLOR.PALETTE",162:"DELETE.STYLE",163:"WINDOW.RESTORE",164:"WINDOW.MAXIMIZE",166:"CHANGE.LINK",167:"CALCULATE.DOCUMENT",168:"ON.KEY",169:"APP.RESTORE",170:"APP.MOVE",171:"APP.SIZE",172:"APP.MINIMIZE",173:"APP.MAXIMIZE",174:"BRING.TO.FRONT",175:"SEND.TO.BACK",185:"MAIN.CHART.TYPE",186:"OVERLAY.CHART.TYPE",187:"SELECT.END",188:"OPEN.MAIL",189:"SEND.MAIL",190:"STANDARD.FONT",191:"CONSOLIDATE",192:"SORT.SPECIAL",193:"GALLERY.3D.AREA",194:"GALLERY.3D.COLUMN",195:"GALLERY.3D.LINE",196:"GALLERY.3D.PIE",197:"VIEW.3D",198:"GOAL.SEEK",199:"WORKGROUP",200:"FILL.GROUP",201:"UPDATE.LINK",202:"PROMOTE",203:"DEMOTE",204:"SHOW.DETAIL",206:"UNGROUP",207:"OBJECT.PROPERTIES",208:"SAVE.NEW.OBJECT",209:"SHARE",210:"SHARE.NAME",211:"DUPLICATE",212:"APPLY.STYLE",213:"ASSIGN.TO.OBJECT",214:"OBJECT.PROTECTION",215:"HIDE.OBJECT",216:"SET.EXTRACT",217:"CREATE.PUBLISHER",218:"SUBSCRIBE.TO",219:"ATTRIBUTES",220:"SHOW.TOOLBAR",222:"PRINT.PREVIEW",223:"EDIT.COLOR",224:"SHOW.LEVELS",225:"FORMAT.MAIN",226:"FORMAT.OVERLAY",227:"ON.RECALC",228:"EDIT.SERIES",229:"DEFINE.STYLE",240:"LINE.PRINT",243:"ENTER.DATA",249:"GALLERY.RADAR",250:"MERGE.STYLES",251:"EDITION.OPTIONS",252:"PASTE.PICTURE",253:"PASTE.PICTURE.LINK",254:"SPELLING",256:"ZOOM",259:"INSERT.OBJECT",260:"WINDOW.MINIMIZE",265:"SOUND.NOTE",266:"SOUND.PLAY",267:"FORMAT.SHAPE",268:"EXTEND.POLYGON",269:"FORMAT.AUTO",272:"GALLERY.3D.BAR",273:"GALLERY.3D.SURFACE",274:"FILL.AUTO",276:"CUSTOMIZE.TOOLBAR",277:"ADD.TOOL",278:"EDIT.OBJECT",279:"ON.DOUBLECLICK",280:"ON.ENTRY",281:"WORKBOOK.ADD",282:"WORKBOOK.MOVE",283:"WORKBOOK.COPY",284:"WORKBOOK.OPTIONS",285:"SAVE.WORKSPACE",288:"CHART.WIZARD",289:"DELETE.TOOL",290:"MOVE.TOOL",291:"WORKBOOK.SELECT",292:"WORKBOOK.ACTIVATE",293:"ASSIGN.TO.TOOL",295:"COPY.TOOL",296:"RESET.TOOL",297:"CONSTRAIN.NUMERIC",298:"PASTE.TOOL",302:"WORKBOOK.NEW",305:"SCENARIO.CELLS",306:"SCENARIO.DELETE",307:"SCENARIO.ADD",308:"SCENARIO.EDIT",309:"SCENARIO.SHOW",310:"SCENARIO.SHOW.NEXT",311:"SCENARIO.SUMMARY",312:"PIVOT.TABLE.WIZARD",313:"PIVOT.FIELD.PROPERTIES",314:"PIVOT.FIELD",315:"PIVOT.ITEM",316:"PIVOT.ADD.FIELDS",318:"OPTIONS.CALCULATION",319:"OPTIONS.EDIT",320:"OPTIONS.VIEW",321:"ADDIN.MANAGER",322:"MENU.EDITOR",323:"ATTACH.TOOLBARS",324:"VBAActivate",325:"OPTIONS.CHART",328:"VBA.INSERT.FILE",330:"VBA.PROCEDURE.DEFINITION",336:"ROUTING.SLIP",338:"ROUTE.DOCUMENT",339:"MAIL.LOGON",342:"INSERT.PICTURE",343:"EDIT.TOOL",344:"GALLERY.DOUGHNUT",350:"CHART.TREND",352:"PIVOT.ITEM.PROPERTIES",354:"WORKBOOK.INSERT",355:"OPTIONS.TRANSITION",356:"OPTIONS.GENERAL",370:"FILTER.ADVANCED",373:"MAIL.ADD.MAILER",374:"MAIL.DELETE.MAILER",375:"MAIL.REPLY",376:"MAIL.REPLY.ALL",377:"MAIL.FORWARD",378:"MAIL.NEXT.LETTER",379:"DATA.LABEL",380:"INSERT.TITLE",381:"FONT.PROPERTIES",382:"MACRO.OPTIONS",383:"WORKBOOK.HIDE",384:"WORKBOOK.UNHIDE",385:"WORKBOOK.DELETE",386:"WORKBOOK.NAME",388:"GALLERY.CUSTOM",390:"ADD.CHART.AUTOFORMAT",391:"DELETE.CHART.AUTOFORMAT",392:"CHART.ADD.DATA",393:"AUTO.OUTLINE",394:"TAB.ORDER",395:"SHOW.DIALOG",396:"SELECT.ALL",397:"UNGROUP.SHEETS",398:"SUBTOTAL.CREATE",399:"SUBTOTAL.REMOVE",400:"RENAME.OBJECT",412:"WORKBOOK.SCROLL",413:"WORKBOOK.NEXT",414:"WORKBOOK.PREV",415:"WORKBOOK.TAB.SPLIT",416:"FULL.SCREEN",417:"WORKBOOK.PROTECT",420:"SCROLLBAR.PROPERTIES",421:"PIVOT.SHOW.PAGES",422:"TEXT.TO.COLUMNS",423:"FORMAT.CHARTTYPE",424:"LINK.FORMAT",425:"TRACER.DISPLAY",430:"TRACER.NAVIGATE",431:"TRACER.CLEAR",432:"TRACER.ERROR",433:"PIVOT.FIELD.GROUP",434:"PIVOT.FIELD.UNGROUP",435:"CHECKBOX.PROPERTIES",436:"LABEL.PROPERTIES",437:"LISTBOX.PROPERTIES",438:"EDITBOX.PROPERTIES",439:"PIVOT.REFRESH",440:"LINK.COMBO",441:"OPEN.TEXT",442:"HIDE.DIALOG",443:"SET.DIALOG.FOCUS",444:"ENABLE.OBJECT",445:"PUSHBUTTON.PROPERTIES",446:"SET.DIALOG.DEFAULT",447:"FILTER",448:"FILTER.SHOW.ALL",449:"CLEAR.OUTLINE",450:"FUNCTION.WIZARD",451:"ADD.LIST.ITEM",452:"SET.LIST.ITEM",453:"REMOVE.LIST.ITEM",454:"SELECT.LIST.ITEM",455:"SET.CONTROL.VALUE",456:"SAVE.COPY.AS",458:"OPTIONS.LISTS.ADD",459:"OPTIONS.LISTS.DELETE",460:"SERIES.AXES",461:"SERIES.X",462:"SERIES.Y",463:"ERRORBAR.X",464:"ERRORBAR.Y",465:"FORMAT.CHART",466:"SERIES.ORDER",467:"MAIL.LOGOFF",468:"CLEAR.ROUTING.SLIP",469:"APP.ACTIVATE.MICROSOFT",470:"MAIL.EDIT.MAILER",471:"ON.SHEET",472:"STANDARD.WIDTH",473:"SCENARIO.MERGE",474:"SUMMARY.INFO",475:"FIND.FILE",476:"ACTIVE.CELL.FONT",477:"ENABLE.TIPWIZARD",478:"VBA.MAKE.ADDIN",480:"INSERTDATATABLE",481:"WORKGROUP.OPTIONS",482:"MAIL.SEND.MAILER",485:"AUTOCORRECT",489:"POST.DOCUMENT",491:"PICKLIST",493:"VIEW.SHOW",494:"VIEW.DEFINE",495:"VIEW.DELETE",509:"SHEET.BACKGROUND",510:"INSERT.MAP.OBJECT",511:"OPTIONS.MENONO",517:"MSOCHECKS",518:"NORMAL",519:"LAYOUT",520:"RM.PRINT.AREA",521:"CLEAR.PRINT.AREA",522:"ADD.PRINT.AREA",523:"MOVE.BRK",545:"HIDECURR.NOTE",546:"HIDEALL.NOTES",547:"DELETE.NOTE",548:"TRAVERSE.NOTES",549:"ACTIVATE.NOTES",620:"PROTECT.REVISIONS",621:"UNPROTECT.REVISIONS",647:"OPTIONS.ME",653:"WEB.PUBLISH",667:"NEWWEBQUERY",673:"PIVOT.TABLE.CHART",753:"OPTIONS.SAVE",755:"OPTIONS.SPELL",808:"HIDEALL.INKANNOTS"},Hae={0:"COUNT",1:"IF",2:"ISNA",3:"ISERROR",4:"SUM",5:"AVERAGE",6:"MIN",7:"MAX",8:"ROW",9:"COLUMN",10:"NA",11:"NPV",12:"STDEV",13:"DOLLAR",14:"FIXED",15:"SIN",16:"COS",17:"TAN",18:"ATAN",19:"PI",20:"SQRT",21:"EXP",22:"LN",23:"LOG10",24:"ABS",25:"INT",26:"SIGN",27:"ROUND",28:"LOOKUP",29:"INDEX",30:"REPT",31:"MID",32:"LEN",33:"VALUE",34:"TRUE",35:"FALSE",36:"AND",37:"OR",38:"NOT",39:"MOD",40:"DCOUNT",41:"DSUM",42:"DAVERAGE",43:"DMIN",44:"DMAX",45:"DSTDEV",46:"VAR",47:"DVAR",48:"TEXT",49:"LINEST",50:"TREND",51:"LOGEST",52:"GROWTH",53:"GOTO",54:"HALT",55:"RETURN",56:"PV",57:"FV",58:"NPER",59:"PMT",60:"RATE",61:"MIRR",62:"IRR",63:"RAND",64:"MATCH",65:"DATE",66:"TIME",67:"DAY",68:"MONTH",69:"YEAR",70:"WEEKDAY",71:"HOUR",72:"MINUTE",73:"SECOND",74:"NOW",75:"AREAS",76:"ROWS",77:"COLUMNS",78:"OFFSET",79:"ABSREF",80:"RELREF",81:"ARGUMENT",82:"SEARCH",83:"TRANSPOSE",84:"ERROR",85:"STEP",86:"TYPE",87:"ECHO",88:"SET.NAME",89:"CALLER",90:"DEREF",91:"WINDOWS",92:"SERIES",93:"DOCUMENTS",94:"ACTIVE.CELL",95:"SELECTION",96:"RESULT",97:"ATAN2",98:"ASIN",99:"ACOS",100:"CHOOSE",101:"HLOOKUP",102:"VLOOKUP",103:"LINKS",104:"INPUT",105:"ISREF",106:"GET.FORMULA",107:"GET.NAME",108:"SET.VALUE",109:"LOG",110:"EXEC",111:"CHAR",112:"LOWER",113:"UPPER",114:"PROPER",115:"LEFT",116:"RIGHT",117:"EXACT",118:"TRIM",119:"REPLACE",120:"SUBSTITUTE",121:"CODE",122:"NAMES",123:"DIRECTORY",124:"FIND",125:"CELL",126:"ISERR",127:"ISTEXT",128:"ISNUMBER",129:"ISBLANK",130:"T",131:"N",132:"FOPEN",133:"FCLOSE",134:"FSIZE",135:"FREADLN",136:"FREAD",137:"FWRITELN",138:"FWRITE",139:"FPOS",140:"DATEVALUE",141:"TIMEVALUE",142:"SLN",143:"SYD",144:"DDB",145:"GET.DEF",146:"REFTEXT",147:"TEXTREF",148:"INDIRECT",149:"REGISTER",150:"CALL",151:"ADD.BAR",152:"ADD.MENU",153:"ADD.COMMAND",154:"ENABLE.COMMAND",155:"CHECK.COMMAND",156:"RENAME.COMMAND",157:"SHOW.BAR",158:"DELETE.MENU",159:"DELETE.COMMAND",160:"GET.CHART.ITEM",161:"DIALOG.BOX",162:"CLEAN",163:"MDETERM",164:"MINVERSE",165:"MMULT",166:"FILES",167:"IPMT",168:"PPMT",169:"COUNTA",170:"CANCEL.KEY",171:"FOR",172:"WHILE",173:"BREAK",174:"NEXT",175:"INITIATE",176:"REQUEST",177:"POKE",178:"EXECUTE",179:"TERMINATE",180:"RESTART",181:"HELP",182:"GET.BAR",183:"PRODUCT",184:"FACT",185:"GET.CELL",186:"GET.WORKSPACE",187:"GET.WINDOW",188:"GET.DOCUMENT",189:"DPRODUCT",190:"ISNONTEXT",191:"GET.NOTE",192:"NOTE",193:"STDEVP",194:"VARP",195:"DSTDEVP",196:"DVARP",197:"TRUNC",198:"ISLOGICAL",199:"DCOUNTA",200:"DELETE.BAR",201:"UNREGISTER",204:"USDOLLAR",205:"FINDB",206:"SEARCHB",207:"REPLACEB",208:"LEFTB",209:"RIGHTB",210:"MIDB",211:"LENB",212:"ROUNDUP",213:"ROUNDDOWN",214:"ASC",215:"DBCS",216:"RANK",219:"ADDRESS",220:"DAYS360",221:"TODAY",222:"VDB",223:"ELSE",224:"ELSE.IF",225:"END.IF",226:"FOR.CELL",227:"MEDIAN",228:"SUMPRODUCT",229:"SINH",230:"COSH",231:"TANH",232:"ASINH",233:"ACOSH",234:"ATANH",235:"DGET",236:"CREATE.OBJECT",237:"VOLATILE",238:"LAST.ERROR",239:"CUSTOM.UNDO",240:"CUSTOM.REPEAT",241:"FORMULA.CONVERT",242:"GET.LINK.INFO",243:"TEXT.BOX",244:"INFO",245:"GROUP",246:"GET.OBJECT",247:"DB",248:"PAUSE",251:"RESUME",252:"FREQUENCY",253:"ADD.TOOLBAR",254:"DELETE.TOOLBAR",255:"User",256:"RESET.TOOLBAR",257:"EVALUATE",258:"GET.TOOLBAR",259:"GET.TOOL",260:"SPELLING.CHECK",261:"ERROR.TYPE",262:"APP.TITLE",263:"WINDOW.TITLE",264:"SAVE.TOOLBAR",265:"ENABLE.TOOL",266:"PRESS.TOOL",267:"REGISTER.ID",268:"GET.WORKBOOK",269:"AVEDEV",270:"BETADIST",271:"GAMMALN",272:"BETAINV",273:"BINOMDIST",274:"CHIDIST",275:"CHIINV",276:"COMBIN",277:"CONFIDENCE",278:"CRITBINOM",279:"EVEN",280:"EXPONDIST",281:"FDIST",282:"FINV",283:"FISHER",284:"FISHERINV",285:"FLOOR",286:"GAMMADIST",287:"GAMMAINV",288:"CEILING",289:"HYPGEOMDIST",290:"LOGNORMDIST",291:"LOGINV",292:"NEGBINOMDIST",293:"NORMDIST",294:"NORMSDIST",295:"NORMINV",296:"NORMSINV",297:"STANDARDIZE",298:"ODD",299:"PERMUT",300:"POISSON",301:"TDIST",302:"WEIBULL",303:"SUMXMY2",304:"SUMX2MY2",305:"SUMX2PY2",306:"CHITEST",307:"CORREL",308:"COVAR",309:"FORECAST",310:"FTEST",311:"INTERCEPT",312:"PEARSON",313:"RSQ",314:"STEYX",315:"SLOPE",316:"TTEST",317:"PROB",318:"DEVSQ",319:"GEOMEAN",320:"HARMEAN",321:"SUMSQ",322:"KURT",323:"SKEW",324:"ZTEST",325:"LARGE",326:"SMALL",327:"QUARTILE",328:"PERCENTILE",329:"PERCENTRANK",330:"MODE",331:"TRIMMEAN",332:"TINV",334:"MOVIE.COMMAND",335:"GET.MOVIE",336:"CONCATENATE",337:"POWER",338:"PIVOT.ADD.DATA",339:"GET.PIVOT.TABLE",340:"GET.PIVOT.FIELD",341:"GET.PIVOT.ITEM",342:"RADIANS",343:"DEGREES",344:"SUBTOTAL",345:"SUMIF",346:"COUNTIF",347:"COUNTBLANK",348:"SCENARIO.GET",349:"OPTIONS.LISTS.GET",350:"ISPMT",351:"DATEDIF",352:"DATESTRING",353:"NUMBERSTRING",354:"ROMAN",355:"OPEN.DIALOG",356:"SAVE.DIALOG",357:"VIEW.GET",358:"GETPIVOTDATA",359:"HYPERLINK",360:"PHONETIC",361:"AVERAGEA",362:"MAXA",363:"MINA",364:"STDEVPA",365:"VARPA",366:"STDEVA",367:"VARA",368:"BAHTTEXT",369:"THAIDAYOFWEEK",370:"THAIDIGIT",371:"THAIMONTHOFYEAR",372:"THAINUMSOUND",373:"THAINUMSTRING",374:"THAISTRINGLENGTH",375:"ISTHAIDIGIT",376:"ROUNDBAHTDOWN",377:"ROUNDBAHTUP",378:"THAIYEAR",379:"RTD",380:"CUBEVALUE",381:"CUBEMEMBER",382:"CUBEMEMBERPROPERTY",383:"CUBERANKEDMEMBER",384:"HEX2BIN",385:"HEX2DEC",386:"HEX2OCT",387:"DEC2BIN",388:"DEC2HEX",389:"DEC2OCT",390:"OCT2BIN",391:"OCT2HEX",392:"OCT2DEC",393:"BIN2DEC",394:"BIN2OCT",395:"BIN2HEX",396:"IMSUB",397:"IMDIV",398:"IMPOWER",399:"IMABS",400:"IMSQRT",401:"IMLN",402:"IMLOG2",403:"IMLOG10",404:"IMSIN",405:"IMCOS",406:"IMEXP",407:"IMARGUMENT",408:"IMCONJUGATE",409:"IMAGINARY",410:"IMREAL",411:"COMPLEX",412:"IMSUM",413:"IMPRODUCT",414:"SERIESSUM",415:"FACTDOUBLE",416:"SQRTPI",417:"QUOTIENT",418:"DELTA",419:"GESTEP",420:"ISEVEN",421:"ISODD",422:"MROUND",423:"ERF",424:"ERFC",425:"BESSELJ",426:"BESSELK",427:"BESSELY",428:"BESSELI",429:"XIRR",430:"XNPV",431:"PRICEMAT",432:"YIELDMAT",433:"INTRATE",434:"RECEIVED",435:"DISC",436:"PRICEDISC",437:"YIELDDISC",438:"TBILLEQ",439:"TBILLPRICE",440:"TBILLYIELD",441:"PRICE",442:"YIELD",443:"DOLLARDE",444:"DOLLARFR",445:"NOMINAL",446:"EFFECT",447:"CUMPRINC",448:"CUMIPMT",449:"EDATE",450:"EOMONTH",451:"YEARFRAC",452:"COUPDAYBS",453:"COUPDAYS",454:"COUPDAYSNC",455:"COUPNCD",456:"COUPNUM",457:"COUPPCD",458:"DURATION",459:"MDURATION",460:"ODDLPRICE",461:"ODDLYIELD",462:"ODDFPRICE",463:"ODDFYIELD",464:"RANDBETWEEN",465:"WEEKNUM",466:"AMORDEGRC",467:"AMORLINC",468:"CONVERT",724:"SHEETJS",469:"ACCRINT",470:"ACCRINTM",471:"WORKDAY",472:"NETWORKDAYS",473:"GCD",474:"MULTINOMIAL",475:"LCM",476:"FVSCHEDULE",477:"CUBEKPIMEMBER",478:"CUBESET",479:"CUBESETCOUNT",480:"IFERROR",481:"COUNTIFS",482:"SUMIFS",483:"AVERAGEIF",484:"AVERAGEIFS"},cDe={2:1,3:1,10:0,15:1,16:1,17:1,18:1,19:0,20:1,21:1,22:1,23:1,24:1,25:1,26:1,27:2,30:2,31:3,32:1,33:1,34:0,35:0,38:1,39:2,40:3,41:3,42:3,43:3,44:3,45:3,47:3,48:2,53:1,61:3,63:0,65:3,66:3,67:1,68:1,69:1,70:1,71:1,72:1,73:1,74:0,75:1,76:1,77:1,79:2,80:2,83:1,85:0,86:1,89:0,90:1,94:0,95:0,97:2,98:1,99:1,101:3,102:3,105:1,106:1,108:2,111:1,112:1,113:1,114:1,117:2,118:1,119:4,121:1,126:1,127:1,128:1,129:1,130:1,131:1,133:1,134:1,135:1,136:2,137:2,138:2,140:1,141:1,142:3,143:4,144:4,161:1,162:1,163:1,164:1,165:2,172:1,175:2,176:2,177:3,178:2,179:1,184:1,186:1,189:3,190:1,195:3,196:3,197:1,198:1,199:3,201:1,207:4,210:3,211:1,212:2,213:2,214:1,215:1,225:0,229:1,230:1,231:1,232:1,233:1,234:1,235:3,244:1,247:4,252:2,257:1,261:1,271:1,273:4,274:2,275:2,276:2,277:3,278:3,279:1,280:3,281:3,282:3,283:1,284:1,285:2,286:4,287:3,288:2,289:4,290:3,291:3,292:3,293:4,294:1,295:3,296:1,297:3,298:1,299:2,300:3,301:3,302:4,303:2,304:2,305:2,306:2,307:2,308:2,309:3,310:2,311:2,312:2,313:2,314:2,315:2,316:4,325:2,326:2,327:2,328:2,331:2,332:2,337:2,342:1,343:1,346:2,347:1,350:4,351:3,352:1,353:2,360:1,368:1,369:1,370:1,371:1,372:1,373:1,374:1,375:1,376:1,377:1,378:1,382:3,385:1,392:1,393:1,396:2,397:2,398:2,399:1,400:1,401:1,402:1,403:1,404:1,405:1,406:1,407:1,408:1,409:1,410:1,414:4,415:1,416:1,417:2,420:1,421:1,422:2,424:1,425:2,426:2,427:2,428:2,430:3,438:3,439:3,440:3,443:2,444:2,445:2,446:2,447:6,448:6,449:2,450:2,464:2,468:3,476:2,479:1,480:2,65535:0};function r$(t){return t.slice(0,3)=="of:"&&(t=t.slice(3)),t.charCodeAt(0)==61&&(t=t.slice(1),t.charCodeAt(0)==61&&(t=t.slice(1))),t=t.replace(/COM\.MICROSOFT\./g,""),t=t.replace(/\[((?:\.[A-Z]+[0-9]+)(?::\.[A-Z]+[0-9]+)?)\]/g,function(e,r){return r.replace(/\./g,"")}),t=t.replace(/\[.(#[A-Z]*[?!])\]/g,"$1"),t.replace(/[;~]/g,",").replace(/\|/g,";")}function uDe(t){var e="of:="+t.replace(bR,"$1[.$2$3$4$5]").replace(/\]:\[/g,":");return e.replace(/;/g,"|").replace(/,/g,";")}function F5(t){var e=t.split(":"),r=e[0].split(".")[0];return[r,e[0].split(".")[1]+(e.length>1?":"+(e[1].split(".")[1]||e[1].split(".")[0]):"")]}function dDe(t){return t.replace(/\./,"!")}var Ob={},xv={},Db=typeof Map<"u";function CR(t,e,r){var n=0,a=t.length;if(r){if(Db?r.has(e):Object.prototype.hasOwnProperty.call(r,e)){for(var s=Db?r.get(e):r[e];n<s.length;++n)if(t[s[n]].t===e)return t.Count++,s[n]}}else for(;n<a;++n)if(t[n].t===e)return t.Count++,n;return t[a]={t:e},t.Count++,t.Unique++,r&&(Db?(r.has(e)||r.set(e,[]),r.get(e).push(a)):(Object.prototype.hasOwnProperty.call(r,e)||(r[e]=[]),r[e].push(a))),a}function AP(t,e){var r={min:t+1,max:t+1},n=-1;return e.MDW&&(tc=e.MDW),e.width!=null?r.customWidth=1:e.wpx!=null?n=M2(e.wpx):e.wch!=null&&(n=e.wch),n>-1?(r.width=XS(n),r.customWidth=1):e.width!=null&&(r.width=e.width),e.hidden&&(r.hidden=!0),e.level!=null&&(r.outlineLevel=r.level=e.level),r}function Vp(t,e){if(t){var r=[.7,.7,.75,.75,.3,.3];e=="xlml"&&(r=[1,1,1,1,.5,.5]),t.left==null&&(t.left=r[0]),t.right==null&&(t.right=r[1]),t.top==null&&(t.top=r[2]),t.bottom==null&&(t.bottom=r[3]),t.header==null&&(t.header=r[4]),t.footer==null&&(t.footer=r[5])}}function Qm(t,e,r){var n=r.revssf[e.z!=null?e.z:"General"],a=60,s=t.length;if(n==null&&r.ssf){for(;a<392;++a)if(r.ssf[a]==null){oA(e.z,a),r.ssf[a]=e.z,r.revssf[e.z]=n=a;break}}for(a=0;a!=s;++a)if(t[a].numFmtId===n)return a;return t[s]={numFmtId:n,fontId:0,fillId:0,borderId:0,xfId:0,applyNumberFormat:1},s}function $ae(t,e,r,n,a,s){try{n.cellNF&&(t.z=Tn[e])}catch(l){if(n.WTF)throw l}if(!(t.t==="z"&&!n.cellStyles)){if(t.t==="d"&&typeof t.v=="string"&&(t.v=Fs(t.v)),(!n||n.cellText!==!1)&&t.t!=="z")try{if(Tn[e]==null&&oA(l3e[e]||"General",e),t.t==="e")t.w=t.w||RA[t.v];else if(e===0)if(t.t==="n")(t.v|0)===t.v?t.w=t.v.toString(10):t.w=B2(t.v);else if(t.t==="d"){var o=To(t.v);(o|0)===o?t.w=o.toString(10):t.w=B2(o)}else{if(t.v===void 0)return"";t.w=dg(t.v,xv)}else t.t==="d"?t.w=Od(e,To(t.v),xv):t.w=Od(e,t.v,xv)}catch(l){if(n.WTF)throw l}if(n.cellStyles&&r!=null)try{t.s=s.Fills[r],t.s.fgColor&&t.s.fgColor.theme&&!t.s.fgColor.rgb&&(t.s.fgColor.rgb=WS(a.themeElements.clrScheme[t.s.fgColor.theme].rgb,t.s.fgColor.tint||0),n.WTF&&(t.s.fgColor.raw_rgb=a.themeElements.clrScheme[t.s.fgColor.theme].rgb)),t.s.bgColor&&t.s.bgColor.theme&&(t.s.bgColor.rgb=WS(a.themeElements.clrScheme[t.s.bgColor.theme].rgb,t.s.bgColor.tint||0),n.WTF&&(t.s.bgColor.raw_rgb=a.themeElements.clrScheme[t.s.bgColor.theme].rgb))}catch(l){if(n.WTF&&s.Fills)throw l}}}function fDe(t,e,r){if(t&&t["!ref"]){var n=Ea(t["!ref"]);if(n.e.c<n.s.c||n.e.r<n.s.r)throw new Error("Bad range ("+r+"): "+t["!ref"])}}function hDe(t,e){var r=Ea(e);r.s.r<=r.e.r&&r.s.c<=r.e.c&&r.s.r>=0&&r.s.c>=0&&(t["!ref"]=zn(r))}var ADe=/<(?:\w:)?mergeCell ref="[A-Z0-9:]+"\s*[\/]?>/g,mDe=/<(?:\w+:)?sheetData[^>]*>([\s\S]*)<\/(?:\w+:)?sheetData>/,pDe=/<(?:\w:)?hyperlink [^>]*>/mg,gDe=/"(\w*:\w*)"/,xDe=/<(?:\w:)?col\b[^>]*[\/]?>/g,vDe=/<(?:\w:)?autoFilter[^>]*([\/]|>([\s\S]*)<\/(?:\w:)?autoFilter)>/g,yDe=/<(?:\w:)?pageMargins[^>]*\/>/g,Gae=/<(?:\w:)?sheetPr\b(?:[^>a-z][^>]*)?\/>/,bDe=/<(?:\w:)?sheetPr[^>]*(?:[\/]|>([\s\S]*)<\/(?:\w:)?sheetPr)>/,wDe=/<(?:\w:)?sheetViews[^>]*(?:[\/]|>([\s\S]*)<\/(?:\w:)?sheetViews)>/;function NDe(t,e,r,n,a,s,o){if(!t)return t;n||(n={"!id":{}});var l=e.dense?[]:{},c={s:{r:2e6,c:2e6},e:{r:0,c:0}},u="",d="",f=t.match(mDe);f?(u=t.slice(0,f.index),d=t.slice(f.index+f[0].length)):u=d=t;var A=u.match(Gae);A?_R(A[0],l,a,r):(A=u.match(bDe))&&_De(A[0],A[1]||"",l,a,r);var h=(u.match(/<(?:\w*:)?dimension/)||{index:-1}).index;if(h>0){var m=u.slice(h,h+50).match(gDe);m&&hDe(l,m[1])}var p=u.match(wDe);p&&p[1]&&MDe(p[1],a);var x=[];if(e.cellStyles){var v=u.match(xDe);v&&kDe(x,v)}f&&QDe(f[1],l,e,c,s,o);var y=d.match(vDe);y&&(l["!autofilter"]=ODe(y[0]));var b=[],w=d.match(ADe);if(w)for(h=0;h!=w.length;++h)b[h]=Ea(w[h].slice(w[h].indexOf('"')+1));var j=d.match(pDe);j&&PDe(l,j,n);var I=d.match(yDe);if(I&&(l["!margins"]=BDe(Dn(I[0]))),!l["!ref"]&&c.e.c>=c.s.c&&c.e.r>=c.s.r&&(l["!ref"]=zn(c)),e.sheetRows>0&&l["!ref"]){var _=Ea(l["!ref"]);e.sheetRows<=+_.e.r&&(_.e.r=e.sheetRows-1,_.e.r>c.e.r&&(_.e.r=c.e.r),_.e.r<_.s.r&&(_.s.r=_.e.r),_.e.c>c.e.c&&(_.e.c=c.e.c),_.e.c<_.s.c&&(_.s.c=_.e.c),l["!fullref"]=l["!ref"],l["!ref"]=zn(_))}return x.length>0&&(l["!cols"]=x),b.length>0&&(l["!merges"]=b),l}function CDe(t){if(t.length===0)return"";for(var e='<mergeCells count="'+t.length+'">',r=0;r!=t.length;++r)e+='<mergeCell ref="'+zn(t[r])+'"/>';return e+"</mergeCells>"}function _R(t,e,r,n){var a=Dn(t);r.Sheets[n]||(r.Sheets[n]={}),a.codeName&&(r.Sheets[n].CodeName=_a(ls(a.codeName)))}function _De(t,e,r,n,a){_R(t.slice(0,t.indexOf(">")),r,n,a)}function EDe(t,e,r,n,a){var s=!1,o={},l=null;if(n.bookType!=="xlsx"&&e.vbaraw){var c=e.SheetNames[r];try{e.Workbook&&(c=e.Workbook.Sheets[r].CodeName||c)}catch{}s=!0,o.codeName=Jf(ts(c))}if(t&&t["!outline"]){var u={summaryBelow:1,summaryRight:1};t["!outline"].above&&(u.summaryBelow=0),t["!outline"].left&&(u.summaryRight=0),l=(l||"")+Ur("outlinePr",null,u)}!s&&!l||(a[a.length]=Ur("sheetPr",l,o))}var SDe=["objects","scenarios","selectLockedCells","selectUnlockedCells"],IDe=["formatColumns","formatRows","formatCells","insertColumns","insertRows","insertHyperlinks","deleteColumns","deleteRows","sort","autoFilter","pivotTables"];function jDe(t){var e={sheet:1};return SDe.forEach(function(r){t[r]!=null&&t[r]&&(e[r]="1")}),IDe.forEach(function(r){t[r]!=null&&!t[r]&&(e[r]="0")}),t.password&&(e.password=xR(t.password).toString(16).toUpperCase()),Ur("sheetProtection",null,e)}function PDe(t,e,r){for(var n=Array.isArray(t),a=0;a!=e.length;++a){var s=Dn(ls(e[a]),!0);if(!s.ref)return;var o=((r||{})["!id"]||[])[s.id];o?(s.Target=o.Target,s.location&&(s.Target+="#"+_a(s.location))):(s.Target="#"+_a(s.location),o={Target:s.Target,TargetMode:"Internal"}),s.Rel=o,s.tooltip&&(s.Tooltip=s.tooltip,delete s.tooltip);for(var l=Ea(s.ref),c=l.s.r;c<=l.e.r;++c)for(var u=l.s.c;u<=l.e.c;++u){var d=On({c:u,r:c});n?(t[c]||(t[c]=[]),t[c][u]||(t[c][u]={t:"z",v:void 0}),t[c][u].l=s):(t[d]||(t[d]={t:"z",v:void 0}),t[d].l=s)}}}function BDe(t){var e={};return["left","right","top","bottom","header","footer"].forEach(function(r){t[r]&&(e[r]=parseFloat(t[r]))}),e}function TDe(t){return Vp(t),Ur("pageMargins",null,t)}function kDe(t,e){for(var r=!1,n=0;n!=e.length;++n){var a=Dn(e[n],!0);a.hidden&&(a.hidden=Ps(a.hidden));var s=parseInt(a.min,10)-1,o=parseInt(a.max,10)-1;for(a.outlineLevel&&(a.level=+a.outlineLevel||0),delete a.min,delete a.max,a.width=+a.width,!r&&a.width&&(r=!0,vR(a.width)),Sm(a);s<=o;)t[s++]=Os(a)}}function FDe(t,e){for(var r=["<cols>"],n,a=0;a!=e.length;++a)(n=e[a])&&(r[r.length]=Ur("col",null,AP(a,n)));return r[r.length]="</cols>",r.join("")}function ODe(t){var e={ref:(t.match(/ref="([^"]*)"/)||[])[1]};return e}function DDe(t,e,r,n){var a=typeof t.ref=="string"?t.ref:zn(t.ref);r.Workbook||(r.Workbook={Sheets:[]}),r.Workbook.Names||(r.Workbook.Names=[]);var s=r.Workbook.Names,o=ou(a);o.s.r==o.e.r&&(o.e.r=ou(e["!ref"]).e.r,a=zn(o));for(var l=0;l<s.length;++l){var c=s[l];if(c.Name=="_xlnm._FilterDatabase"&&c.Sheet==n){c.Ref="'"+r.SheetNames[n]+"'!"+a;break}}return l==s.length&&s.push({Name:"_xlnm._FilterDatabase",Sheet:n,Ref:"'"+r.SheetNames[n]+"'!"+a}),Ur("autoFilter",null,{ref:a})}var RDe=/<(?:\w:)?sheetView(?:[^>a-z][^>]*)?\/?>/;function MDe(t,e){e.Views||(e.Views=[{}]),(t.match(RDe)||[]).forEach(function(r,n){var a=Dn(r);e.Views[n]||(e.Views[n]={}),+a.zoomScale&&(e.Views[n].zoom=+a.zoomScale),Ps(a.rightToLeft)&&(e.Views[n].RTL=!0)})}function LDe(t,e,r,n){var a={workbookViewId:"0"};return(((n||{}).Workbook||{}).Views||[])[0]&&(a.rightToLeft=n.Workbook.Views[0].RTL?"1":"0"),Ur("sheetViews",Ur("sheetView",null,a),{})}function UDe(t,e,r,n){if(t.c&&r["!comments"].push([e,t.c]),t.v===void 0&&typeof t.f!="string"||t.t==="z"&&!t.f)return"";var a="",s=t.t,o=t.v;if(t.t!=="z")switch(t.t){case"b":a=t.v?"1":"0";break;case"n":a=""+t.v;break;case"e":a=RA[t.v];break;case"d":n&&n.cellDates?a=Fs(t.v,-1).toISOString():(t=Os(t),t.t="n",a=""+(t.v=To(Fs(t.v)))),typeof t.z>"u"&&(t.z=Tn[14]);break;default:a=t.v;break}var l=El("v",ts(a)),c={r:e},u=Qm(n.cellXfs,t,n);switch(u!==0&&(c.s=u),t.t){case"n":break;case"d":c.t="d";break;case"b":c.t="b";break;case"e":c.t="e";break;case"z":break;default:if(t.v==null){delete t.t;break}if(t.v.length>32767)throw new Error("Text length must not exceed 32767 characters");if(n&&n.bookSST){l=El("v",""+CR(n.Strings,t.v,n.revStrings)),c.t="s";break}c.t="str";break}if(t.t!=s&&(t.t=s,t.v=o),typeof t.f=="string"&&t.f){var d=t.F&&t.F.slice(0,e.length)==e?{t:"array",ref:t.F}:null;l=Ur("f",ts(t.f),d)+(t.v!=null?l:"")}return t.l&&r["!links"].push([e,t.l]),t.D&&(c.cm=1),Ur("c",l,c)}var QDe=function(){var t=/<(?:\w+:)?c[ \/>]/,e=/<\/(?:\w+:)?row>/,r=/r=["']([^"']*)["']/,n=/<(?:\w+:)?is>([\S\s]*?)<\/(?:\w+:)?is>/,a=/ref=["']([^"']*)["']/,s=T2("v"),o=T2("f");return function(c,u,d,f,A,h){for(var m=0,p="",x=[],v=[],y=0,b=0,w=0,j="",I,_,S=0,E=0,T,k,B=0,D=0,X=Array.isArray(h.CellXf),me,pe=[],he=[],ve=Array.isArray(u),ae=[],Pe={},ke=!1,O=!!d.sheetStubs,G=c.split(e),z=0,U=G.length;z!=U;++z){p=G[z].trim();var Y=p.length;if(Y!==0){var ee=0;e:for(m=0;m<Y;++m)switch(p[m]){case">":if(p[m-1]!="/"){++m;break e}if(d&&d.cellStyles){if(_=Dn(p.slice(ee,m),!0),S=_.r!=null?parseInt(_.r,10):S+1,E=-1,d.sheetRows&&d.sheetRows<S)continue;Pe={},ke=!1,_.ht&&(ke=!0,Pe.hpt=parseFloat(_.ht),Pe.hpx=Qv(Pe.hpt)),_.hidden=="1"&&(ke=!0,Pe.hidden=!0),_.outlineLevel!=null&&(ke=!0,Pe.level=+_.outlineLevel),ke&&(ae[S-1]=Pe)}break;case"<":ee=m;break}if(ee>=m)break;if(_=Dn(p.slice(ee,m),!0),S=_.r!=null?parseInt(_.r,10):S+1,E=-1,!(d.sheetRows&&d.sheetRows<S)){f.s.r>S-1&&(f.s.r=S-1),f.e.r<S-1&&(f.e.r=S-1),d&&d.cellStyles&&(Pe={},ke=!1,_.ht&&(ke=!0,Pe.hpt=parseFloat(_.ht),Pe.hpx=Qv(Pe.hpt)),_.hidden=="1"&&(ke=!0,Pe.hidden=!0),_.outlineLevel!=null&&(ke=!0,Pe.level=+_.outlineLevel),ke&&(ae[S-1]=Pe)),x=p.slice(m).split(t);for(var M=0;M!=x.length&&x[M].trim().charAt(0)=="<";++M);for(x=x.slice(M),m=0;m!=x.length;++m)if(p=x[m].trim(),p.length!==0){if(v=p.match(r),y=m,b=0,w=0,p="<c "+(p.slice(0,1)=="<"?">":"")+p,v!=null&&v.length===2){for(y=0,j=v[1],b=0;b!=j.length&&!((w=j.charCodeAt(b)-64)<1||w>26);++b)y=26*y+w;--y,E=y}else++E;for(b=0;b!=p.length&&p.charCodeAt(b)!==62;++b);if(++b,_=Dn(p.slice(0,b),!0),_.r||(_.r=On({r:S-1,c:E})),j=p.slice(b),I={t:""},(v=j.match(s))!=null&&v[1]!==""&&(I.v=_a(v[1])),d.cellFormula){if((v=j.match(o))!=null&&v[1]!==""){if(I.f=_a(ls(v[1])).replace(/\r\n/g,`
`),d.xlfn||(I.f=JH(I.f)),v[0].indexOf('t="array"')>-1)I.F=(j.match(a)||[])[1],I.F.indexOf(":")>-1&&pe.push([Ea(I.F),I.F]);else if(v[0].indexOf('t="shared"')>-1){k=Dn(v[0]);var H=_a(ls(v[1]));d.xlfn||(H=JH(H)),he[parseInt(k.si,10)]=[k,H,_.r]}}else(v=j.match(/<f[^>]*\/>/))&&(k=Dn(v[0]),he[k.si]&&(I.f=RFe(he[k.si][1],he[k.si][2],_.r)));var te=li(_.r);for(b=0;b<pe.length;++b)te.r>=pe[b][0].s.r&&te.r<=pe[b][0].e.r&&te.c>=pe[b][0].s.c&&te.c<=pe[b][0].e.c&&(I.F=pe[b][1])}if(_.t==null&&I.v===void 0)if(I.f||I.F)I.v=0,I.t="n";else if(O)I.t="z";else continue;else I.t=_.t||"n";switch(f.s.c>E&&(f.s.c=E),f.e.c<E&&(f.e.c=E),I.t){case"n":if(I.v==""||I.v==null){if(!O)continue;I.t="z"}else I.v=parseFloat(I.v);break;case"s":if(typeof I.v>"u"){if(!O)continue;I.t="z"}else T=Ob[parseInt(I.v,10)],I.v=T.t,I.r=T.r,d.cellHTML&&(I.h=T.h);break;case"str":I.t="s",I.v=I.v!=null?ls(I.v):"",d.cellHTML&&(I.h=nR(I.v));break;case"inlineStr":v=j.match(n),I.t="s",v!=null&&(T=gR(v[1]))?(I.v=T.t,d.cellHTML&&(I.h=T.h)):I.v="";break;case"b":I.v=Ps(I.v);break;case"d":d.cellDates?I.v=Fs(I.v,1):(I.v=To(Fs(I.v,1)),I.t="n");break;case"e":(!d||d.cellText!==!1)&&(I.w=I.v),I.v=qne[I.v];break}if(B=D=0,me=null,X&&_.s!==void 0&&(me=h.CellXf[_.s],me!=null&&(me.numFmtId!=null&&(B=me.numFmtId),d.cellStyles&&me.fillId!=null&&(D=me.fillId))),$ae(I,B,D,d,A,h),d.cellDates&&X&&I.t=="n"&&x1(Tn[B])&&(I.t="d",I.v=uP(I.v)),_.cm&&d.xlmeta){var Ce=(d.xlmeta.Cell||[])[+_.cm-1];Ce&&Ce.type=="XLDAPR"&&(I.D=!0)}if(ve){var V=li(_.r);u[V.r]||(u[V.r]=[]),u[V.r][V.c]=I}else u[_.r]=I}}}}ae.length>0&&(u["!rows"]=ae)}}();function VDe(t,e,r,n){var a=[],s=[],o=Ea(t["!ref"]),l="",c,u="",d=[],f=0,A=0,h=t["!rows"],m=Array.isArray(t),p={r:u},x,v=-1;for(A=o.s.c;A<=o.e.c;++A)d[A]=oi(A);for(f=o.s.r;f<=o.e.r;++f){for(s=[],u=Ki(f),A=o.s.c;A<=o.e.c;++A){c=d[A]+u;var y=m?(t[f]||[])[A]:t[c];y!==void 0&&(l=UDe(y,c,t,e))!=null&&s.push(l)}(s.length>0||h&&h[f])&&(p={r:u},h&&h[f]&&(x=h[f],x.hidden&&(p.hidden=1),v=-1,x.hpx?v=L2(x.hpx):x.hpt&&(v=x.hpt),v>-1&&(p.ht=v,p.customHeight=1),x.level&&(p.outlineLevel=x.level)),a[a.length]=Ur("row",s.join(""),p))}if(h)for(;f<h.length;++f)h&&h[f]&&(p={r:f+1},x=h[f],x.hidden&&(p.hidden=1),v=-1,x.hpx?v=L2(x.hpx):x.hpt&&(v=x.hpt),v>-1&&(p.ht=v,p.customHeight=1),x.level&&(p.outlineLevel=x.level),a[a.length]=Ur("row","",p));return a.join("")}function Kae(t,e,r,n){var a=[zi,Ur("worksheet",null,{xmlns:Dg[0],"xmlns:r":So.r})],s=r.SheetNames[t],o=0,l="",c=r.Sheets[s];c==null&&(c={});var u=c["!ref"]||"A1",d=Ea(u);if(d.e.c>16383||d.e.r>1048575){if(e.WTF)throw new Error("Range "+u+" exceeds format limit A1:XFD1048576");d.e.c=Math.min(d.e.c,16383),d.e.r=Math.min(d.e.c,1048575),u=zn(d)}n||(n={}),c["!comments"]=[];var f=[];EDe(c,r,t,e,a),a[a.length]=Ur("dimension",null,{ref:u}),a[a.length]=LDe(c,e,t,r),e.sheetFormat&&(a[a.length]=Ur("sheetFormatPr",null,{defaultRowHeight:e.sheetFormat.defaultRowHeight||"16",baseColWidth:e.sheetFormat.baseColWidth||"10",outlineLevelRow:e.sheetFormat.outlineLevelRow||"7"})),c["!cols"]!=null&&c["!cols"].length>0&&(a[a.length]=FDe(c,c["!cols"])),a[o=a.length]="<sheetData/>",c["!links"]=[],c["!ref"]!=null&&(l=VDe(c,e),l.length>0&&(a[a.length]=l)),a.length>o+1&&(a[a.length]="</sheetData>",a[o]=a[o].replace("/>",">")),c["!protect"]&&(a[a.length]=jDe(c["!protect"])),c["!autofilter"]!=null&&(a[a.length]=DDe(c["!autofilter"],c,r,t)),c["!merges"]!=null&&c["!merges"].length>0&&(a[a.length]=CDe(c["!merges"]));var A=-1,h,m=-1;return c["!links"].length>0&&(a[a.length]="<hyperlinks>",c["!links"].forEach(function(p){p[1].Target&&(h={ref:p[0]},p[1].Target.charAt(0)!="#"&&(m=Ya(n,-1,ts(p[1].Target).replace(/#.*$/,""),ia.HLINK),h["r:id"]="rId"+m),(A=p[1].Target.indexOf("#"))>-1&&(h.location=ts(p[1].Target.slice(A+1))),p[1].Tooltip&&(h.tooltip=ts(p[1].Tooltip)),a[a.length]=Ur("hyperlink",null,h))}),a[a.length]="</hyperlinks>"),delete c["!links"],c["!margins"]!=null&&(a[a.length]=TDe(c["!margins"])),(!e||e.ignoreEC||e.ignoreEC==null)&&(a[a.length]=El("ignoredErrors",Ur("ignoredError",null,{numberStoredAsText:1,sqref:u}))),f.length>0&&(m=Ya(n,-1,"../drawings/drawing"+(t+1)+".xml",ia.DRAW),a[a.length]=Ur("drawing",null,{"r:id":"rId"+m}),c["!drawing"]=f),c["!comments"].length>0&&(m=Ya(n,-1,"../drawings/vmlDrawing"+(t+1)+".vml",ia.VML),a[a.length]=Ur("legacyDrawing",null,{"r:id":"rId"+m}),c["!legacy"]=m),a.length>1&&(a[a.length]="</worksheet>",a[1]=a[1].replace("/>",">")),a.join("")}function HDe(t,e){var r={},n=t.l+e;r.r=t.read_shift(4),t.l+=4;var a=t.read_shift(2);t.l+=1;var s=t.read_shift(1);return t.l=n,s&7&&(r.level=s&7),s&16&&(r.hidden=!0),s&32&&(r.hpt=a/20),r}function $De(t,e,r){var n=nr(145),a=(r["!rows"]||[])[t]||{};n.write_shift(4,t),n.write_shift(4,0);var s=320;a.hpx?s=L2(a.hpx)*20:a.hpt&&(s=a.hpt*20),n.write_shift(2,s),n.write_shift(1,0);var o=0;a.level&&(o|=a.level),a.hidden&&(o|=16),(a.hpx||a.hpt)&&(o|=32),n.write_shift(1,o),n.write_shift(1,0);var l=0,c=n.l;n.l+=4;for(var u={r:t,c:0},d=0;d<16;++d)if(!(e.s.c>d+1<<10||e.e.c<d<<10)){for(var f=-1,A=-1,h=d<<10;h<d+1<<10;++h){u.c=h;var m=Array.isArray(r)?(r[u.r]||[])[u.c]:r[On(u)];m&&(f<0&&(f=h),A=h)}f<0||(++l,n.write_shift(4,f),n.write_shift(4,A))}var p=n.l;return n.l=c,n.write_shift(4,l),n.l=p,n.length>n.l?n.slice(0,n.l):n}function GDe(t,e,r,n){var a=$De(n,r,e);(a.length>17||(e["!rows"]||[])[n])&&yr(t,0,a)}var KDe=Ug,qDe=b1;function zDe(){}function WDe(t,e){var r={},n=t[t.l];return++t.l,r.above=!(n&64),r.left=!(n&128),t.l+=18,r.name=J3e(t),r}function XDe(t,e,r){r==null&&(r=nr(84+4*t.length));var n=192;e&&(e.above&&(n&=-65),e.left&&(n&=-129)),r.write_shift(1,n);for(var a=1;a<3;++a)r.write_shift(1,0);return KS({auto:1},r),r.write_shift(-4,-1),r.write_shift(-4,-1),Vne(t,r),r.slice(0,r.l)}function YDe(t){var e=Qd(t);return[e]}function JDe(t,e,r){return r==null&&(r=nr(8)),Rg(e,r)}function ZDe(t){var e=Mg(t);return[e]}function e6e(t,e,r){return r==null&&(r=nr(4)),Lg(e,r)}function t6e(t){var e=Qd(t),r=t.read_shift(1);return[e,r,"b"]}function r6e(t,e,r){return r==null&&(r=nr(9)),Rg(e,r),r.write_shift(1,t.v?1:0),r}function n6e(t){var e=Mg(t),r=t.read_shift(1);return[e,r,"b"]}function a6e(t,e,r){return r==null&&(r=nr(5)),Lg(e,r),r.write_shift(1,t.v?1:0),r}function s6e(t){var e=Qd(t),r=t.read_shift(1);return[e,r,"e"]}function i6e(t,e,r){return r==null&&(r=nr(9)),Rg(e,r),r.write_shift(1,t.v),r}function o6e(t){var e=Mg(t),r=t.read_shift(1);return[e,r,"e"]}function l6e(t,e,r){return r==null&&(r=nr(8)),Lg(e,r),r.write_shift(1,t.v),r.write_shift(2,0),r.write_shift(1,0),r}function c6e(t){var e=Qd(t),r=t.read_shift(4);return[e,r,"s"]}function u6e(t,e,r){return r==null&&(r=nr(12)),Rg(e,r),r.write_shift(4,e.v),r}function d6e(t){var e=Mg(t),r=t.read_shift(4);return[e,r,"s"]}function f6e(t,e,r){return r==null&&(r=nr(8)),Lg(e,r),r.write_shift(4,e.v),r}function h6e(t){var e=Qd(t),r=rc(t);return[e,r,"n"]}function A6e(t,e,r){return r==null&&(r=nr(16)),Rg(e,r),hg(t.v,r),r}function qae(t){var e=Mg(t),r=rc(t);return[e,r,"n"]}function m6e(t,e,r){return r==null&&(r=nr(12)),Lg(e,r),hg(t.v,r),r}function p6e(t){var e=Qd(t),r=fR(t);return[e,r,"n"]}function g6e(t,e,r){return r==null&&(r=nr(12)),Rg(e,r),Hne(t.v,r),r}function x6e(t){var e=Mg(t),r=fR(t);return[e,r,"n"]}function v6e(t,e,r){return r==null&&(r=nr(8)),Lg(e,r),Hne(t.v,r),r}function y6e(t){var e=Qd(t),r=cR(t);return[e,r,"is"]}function b6e(t){var e=Qd(t),r=ac(t);return[e,r,"str"]}function w6e(t,e,r){return r==null&&(r=nr(12+4*t.v.length)),Rg(e,r),Yo(t.v,r),r.length>r.l?r.slice(0,r.l):r}function N6e(t){var e=Mg(t),r=ac(t);return[e,r,"str"]}function C6e(t,e,r){return r==null&&(r=nr(8+4*t.v.length)),Lg(e,r),Yo(t.v,r),r.length>r.l?r.slice(0,r.l):r}function _6e(t,e,r){var n=t.l+e,a=Qd(t);a.r=r["!row"];var s=t.read_shift(1),o=[a,s,"b"];if(r.cellFormula){t.l+=2;var l=hP(t,n-t.l,r);o[3]=Zl(l,null,a,r.supbooks,r)}else t.l=n;return o}function E6e(t,e,r){var n=t.l+e,a=Qd(t);a.r=r["!row"];var s=t.read_shift(1),o=[a,s,"e"];if(r.cellFormula){t.l+=2;var l=hP(t,n-t.l,r);o[3]=Zl(l,null,a,r.supbooks,r)}else t.l=n;return o}function S6e(t,e,r){var n=t.l+e,a=Qd(t);a.r=r["!row"];var s=rc(t),o=[a,s,"n"];if(r.cellFormula){t.l+=2;var l=hP(t,n-t.l,r);o[3]=Zl(l,null,a,r.supbooks,r)}else t.l=n;return o}function I6e(t,e,r){var n=t.l+e,a=Qd(t);a.r=r["!row"];var s=ac(t),o=[a,s,"str"];if(r.cellFormula){t.l+=2;var l=hP(t,n-t.l,r);o[3]=Zl(l,null,a,r.supbooks,r)}else t.l=n;return o}var j6e=Ug,P6e=b1;function B6e(t,e){return e==null&&(e=nr(4)),e.write_shift(4,t),e}function T6e(t,e){var r=t.l+e,n=Ug(t),a=uR(t),s=ac(t),o=ac(t),l=ac(t);t.l=r;var c={rfx:n,relId:a,loc:s,display:l};return o&&(c.Tooltip=o),c}function k6e(t,e){var r=nr(50+4*(t[1].Target.length+(t[1].Tooltip||"").length));b1({s:li(t[0]),e:li(t[0])},r),dR("rId"+e,r);var n=t[1].Target.indexOf("#"),a=n==-1?"":t[1].Target.slice(n+1);return Yo(a||"",r),Yo(t[1].Tooltip||"",r),Yo("",r),r.slice(0,r.l)}function F6e(){}function O6e(t,e,r){var n=t.l+e,a=$ne(t),s=t.read_shift(1),o=[a];if(o[2]=s,r.cellFormula){var l=sDe(t,n-t.l,r);o[1]=l}else t.l=n;return o}function D6e(t,e,r){var n=t.l+e,a=Ug(t),s=[a];if(r.cellFormula){var o=oDe(t,n-t.l,r);s[1]=o,t.l=n}else t.l=n;return s}function R6e(t,e,r){r==null&&(r=nr(18));var n=AP(t,e);r.write_shift(-4,t),r.write_shift(-4,t),r.write_shift(4,(n.width||10)*256),r.write_shift(4,0);var a=0;return e.hidden&&(a|=1),typeof n.width=="number"&&(a|=2),e.level&&(a|=e.level<<8),r.write_shift(2,a),r}var zae=["left","right","top","bottom","header","footer"];function M6e(t){var e={};return zae.forEach(function(r){e[r]=rc(t)}),e}function L6e(t,e){return e==null&&(e=nr(6*8)),Vp(t),zae.forEach(function(r){hg(t[r],e)}),e}function U6e(t){var e=t.read_shift(2);return t.l+=28,{RTL:e&32}}function Q6e(t,e,r){r==null&&(r=nr(30));var n=924;return(((e||{}).Views||[])[0]||{}).RTL&&(n|=32),r.write_shift(2,n),r.write_shift(4,0),r.write_shift(4,0),r.write_shift(4,0),r.write_shift(1,0),r.write_shift(1,0),r.write_shift(2,0),r.write_shift(2,100),r.write_shift(2,0),r.write_shift(2,0),r.write_shift(2,0),r.write_shift(4,0),r}function V6e(t){var e=nr(24);return e.write_shift(4,4),e.write_shift(4,1),b1(t,e),e}function H6e(t,e){return e==null&&(e=nr(16*4+2)),e.write_shift(2,t.password?xR(t.password):0),e.write_shift(4,1),[["objects",!1],["scenarios",!1],["formatCells",!0],["formatColumns",!0],["formatRows",!0],["insertColumns",!0],["insertRows",!0],["insertHyperlinks",!0],["deleteColumns",!0],["deleteRows",!0],["selectLockedCells",!1],["sort",!0],["autoFilter",!0],["pivotTables",!0],["selectUnlockedCells",!1]].forEach(function(r){r[1]?e.write_shift(4,t[r[0]]!=null&&!t[r[0]]?1:0):e.write_shift(4,t[r[0]]!=null&&t[r[0]]?0:1)}),e}function $6e(){}function G6e(){}function K6e(t,e,r,n,a,s,o){if(!t)return t;var l=e||{};n||(n={"!id":{}});var c=l.dense?[]:{},u,d={s:{r:2e6,c:2e6},e:{r:0,c:0}},f=!1,A=!1,h,m,p,x,v,y,b,w,j,I=[];l.biff=12,l["!row"]=0;var _=0,S=!1,E=[],T={},k=l.supbooks||a.supbooks||[[]];if(k.sharedf=T,k.arrayf=E,k.SheetNames=a.SheetNames||a.Sheets.map(function(ve){return ve.name}),!l.supbooks&&(l.supbooks=k,a.Names))for(var B=0;B<a.Names.length;++B)k[0][B+1]=a.Names[B];var D=[],X=[],me=!1;U2[16]={n:"BrtShortReal",f:qae};var pe;if(DA(t,function(ae,Pe,ke){if(!A)switch(ke){case 148:u=ae;break;case 0:h=ae,l.sheetRows&&l.sheetRows<=h.r&&(A=!0),w=Ki(x=h.r),l["!row"]=h.r,(ae.hidden||ae.hpt||ae.level!=null)&&(ae.hpt&&(ae.hpx=Qv(ae.hpt)),X[ae.r]=ae);break;case 2:case 3:case 4:case 5:case 6:case 7:case 8:case 9:case 10:case 11:case 13:case 14:case 15:case 16:case 17:case 18:case 62:switch(m={t:ae[2]},ae[2]){case"n":m.v=ae[1];break;case"s":b=Ob[ae[1]],m.v=b.t,m.r=b.r;break;case"b":m.v=!!ae[1];break;case"e":m.v=ae[1],l.cellText!==!1&&(m.w=RA[m.v]);break;case"str":m.t="s",m.v=ae[1];break;case"is":m.t="s",m.v=ae[1].t;break}if((p=o.CellXf[ae[0].iStyleRef])&&$ae(m,p.numFmtId,null,l,s,o),v=ae[0].c==-1?v+1:ae[0].c,l.dense?(c[x]||(c[x]=[]),c[x][v]=m):c[oi(v)+w]=m,l.cellFormula){for(S=!1,_=0;_<E.length;++_){var O=E[_];h.r>=O[0].s.r&&h.r<=O[0].e.r&&v>=O[0].s.c&&v<=O[0].e.c&&(m.F=zn(O[0]),S=!0)}!S&&ae.length>3&&(m.f=ae[3])}if(d.s.r>h.r&&(d.s.r=h.r),d.s.c>v&&(d.s.c=v),d.e.r<h.r&&(d.e.r=h.r),d.e.c<v&&(d.e.c=v),l.cellDates&&p&&m.t=="n"&&x1(Tn[p.numFmtId])){var G=_p(m.v);G&&(m.t="d",m.v=new Date(G.y,G.m-1,G.d,G.H,G.M,G.S,G.u))}pe&&(pe.type=="XLDAPR"&&(m.D=!0),pe=void 0);break;case 1:case 12:if(!l.sheetStubs||f)break;m={t:"z",v:void 0},v=ae[0].c==-1?v+1:ae[0].c,l.dense?(c[x]||(c[x]=[]),c[x][v]=m):c[oi(v)+w]=m,d.s.r>h.r&&(d.s.r=h.r),d.s.c>v&&(d.s.c=v),d.e.r<h.r&&(d.e.r=h.r),d.e.c<v&&(d.e.c=v),pe&&(pe.type=="XLDAPR"&&(m.D=!0),pe=void 0);break;case 176:I.push(ae);break;case 49:pe=((l.xlmeta||{}).Cell||[])[ae-1];break;case 494:var z=n["!id"][ae.relId];for(z?(ae.Target=z.Target,ae.loc&&(ae.Target+="#"+ae.loc),ae.Rel=z):ae.relId==""&&(ae.Target="#"+ae.loc),x=ae.rfx.s.r;x<=ae.rfx.e.r;++x)for(v=ae.rfx.s.c;v<=ae.rfx.e.c;++v)l.dense?(c[x]||(c[x]=[]),c[x][v]||(c[x][v]={t:"z",v:void 0}),c[x][v].l=ae):(y=On({c:v,r:x}),c[y]||(c[y]={t:"z",v:void 0}),c[y].l=ae);break;case 426:if(!l.cellFormula)break;E.push(ae),j=l.dense?c[x][v]:c[oi(v)+w],j.f=Zl(ae[1],d,{r:h.r,c:v},k,l),j.F=zn(ae[0]);break;case 427:if(!l.cellFormula)break;T[On(ae[0].s)]=ae[1],j=l.dense?c[x][v]:c[oi(v)+w],j.f=Zl(ae[1],d,{r:h.r,c:v},k,l);break;case 60:if(!l.cellStyles)break;for(;ae.e>=ae.s;)D[ae.e--]={width:ae.w/256,hidden:!!(ae.flags&1),level:ae.level},me||(me=!0,vR(ae.w/256)),Sm(D[ae.e+1]);break;case 161:c["!autofilter"]={ref:zn(ae)};break;case 476:c["!margins"]=ae;break;case 147:a.Sheets[r]||(a.Sheets[r]={}),ae.name&&(a.Sheets[r].CodeName=ae.name),(ae.above||ae.left)&&(c["!outline"]={above:ae.above,left:ae.left});break;case 137:a.Views||(a.Views=[{}]),a.Views[0]||(a.Views[0]={}),ae.RTL&&(a.Views[0].RTL=!0);break;case 485:break;case 64:case 1053:break;case 151:break;case 152:case 175:case 644:case 625:case 562:case 396:case 1112:case 1146:case 471:case 1050:case 649:case 1105:case 589:case 607:case 564:case 1055:case 168:case 174:case 1180:case 499:case 507:case 550:case 171:case 167:case 1177:case 169:case 1181:case 551:case 552:case 661:case 639:case 478:case 537:case 477:case 536:case 1103:case 680:case 1104:case 1024:case 663:case 535:case 678:case 504:case 1043:case 428:case 170:case 3072:case 50:case 2070:case 1045:break;case 35:f=!0;break;case 36:f=!1;break;case 37:f=!0;break;case 38:f=!1;break;default:if(!Pe.T){if(!f||l.WTF)throw new Error("Unexpected record 0x"+ke.toString(16))}}},l),delete l.supbooks,delete l["!row"],!c["!ref"]&&(d.s.r<2e6||u&&(u.e.r>0||u.e.c>0||u.s.r>0||u.s.c>0))&&(c["!ref"]=zn(u||d)),l.sheetRows&&c["!ref"]){var he=Ea(c["!ref"]);l.sheetRows<=+he.e.r&&(he.e.r=l.sheetRows-1,he.e.r>d.e.r&&(he.e.r=d.e.r),he.e.r<he.s.r&&(he.s.r=he.e.r),he.e.c>d.e.c&&(he.e.c=d.e.c),he.e.c<he.s.c&&(he.s.c=he.e.c),c["!fullref"]=c["!ref"],c["!ref"]=zn(he))}return I.length>0&&(c["!merges"]=I),D.length>0&&(c["!cols"]=D),X.length>0&&(c["!rows"]=X),c}function q6e(t,e,r,n,a,s,o){if(e.v===void 0)return!1;var l="";switch(e.t){case"b":l=e.v?"1":"0";break;case"d":e=Os(e),e.z=e.z||Tn[14],e.v=To(Fs(e.v)),e.t="n";break;case"n":case"e":l=""+e.v;break;default:l=e.v;break}var c={r,c:n};switch(c.s=Qm(a.cellXfs,e,a),e.l&&s["!links"].push([On(c),e.l]),e.c&&s["!comments"].push([On(c),e.c]),e.t){case"s":case"str":return a.bookSST?(l=CR(a.Strings,e.v,a.revStrings),c.t="s",c.v=l,o?yr(t,18,f6e(e,c)):yr(t,7,u6e(e,c))):(c.t="str",o?yr(t,17,C6e(e,c)):yr(t,6,w6e(e,c))),!0;case"n":return e.v==(e.v|0)&&e.v>-1e3&&e.v<1e3?o?yr(t,13,v6e(e,c)):yr(t,2,g6e(e,c)):o?yr(t,16,m6e(e,c)):yr(t,5,A6e(e,c)),!0;case"b":return c.t="b",o?yr(t,15,a6e(e,c)):yr(t,4,r6e(e,c)),!0;case"e":return c.t="e",o?yr(t,14,l6e(e,c)):yr(t,3,i6e(e,c)),!0}return o?yr(t,12,e6e(e,c)):yr(t,1,JDe(e,c)),!0}function z6e(t,e,r,n){var a=Ea(e["!ref"]||"A1"),s,o="",l=[];yr(t,145);var c=Array.isArray(e),u=a.e.r;e["!rows"]&&(u=Math.max(a.e.r,e["!rows"].length-1));for(var d=a.s.r;d<=u;++d){o=Ki(d),GDe(t,e,a,d);var f=!1;if(d<=a.e.r)for(var A=a.s.c;A<=a.e.c;++A){d===a.s.r&&(l[A]=oi(A)),s=l[A]+o;var h=c?(e[d]||[])[A]:e[s];if(!h){f=!1;continue}f=q6e(t,h,d,A,n,e,f)}}yr(t,146)}function W6e(t,e){!e||!e["!merges"]||(yr(t,177,B6e(e["!merges"].length)),e["!merges"].forEach(function(r){yr(t,176,P6e(r))}),yr(t,178))}function X6e(t,e){!e||!e["!cols"]||(yr(t,390),e["!cols"].forEach(function(r,n){r&&yr(t,60,R6e(n,r))}),yr(t,391))}function Y6e(t,e){!e||!e["!ref"]||(yr(t,648),yr(t,649,V6e(Ea(e["!ref"]))),yr(t,650))}function J6e(t,e,r){e["!links"].forEach(function(n){if(n[1].Target){var a=Ya(r,-1,n[1].Target.replace(/#.*$/,""),ia.HLINK);yr(t,494,k6e(n,a))}}),delete e["!links"]}function Z6e(t,e,r,n){if(e["!comments"].length>0){var a=Ya(n,-1,"../drawings/vmlDrawing"+(r+1)+".vml",ia.VML);yr(t,551,dR("rId"+a)),e["!legacy"]=a}}function eRe(t,e,r,n){if(e["!autofilter"]){var a=e["!autofilter"],s=typeof a.ref=="string"?a.ref:zn(a.ref);r.Workbook||(r.Workbook={Sheets:[]}),r.Workbook.Names||(r.Workbook.Names=[]);var o=r.Workbook.Names,l=ou(s);l.s.r==l.e.r&&(l.e.r=ou(e["!ref"]).e.r,s=zn(l));for(var c=0;c<o.length;++c){var u=o[c];if(u.Name=="_xlnm._FilterDatabase"&&u.Sheet==n){u.Ref="'"+r.SheetNames[n]+"'!"+s;break}}c==o.length&&o.push({Name:"_xlnm._FilterDatabase",Sheet:n,Ref:"'"+r.SheetNames[n]+"'!"+s}),yr(t,161,b1(Ea(s))),yr(t,162)}}function tRe(t,e,r){yr(t,133),yr(t,137,Q6e(e,r)),yr(t,138),yr(t,134)}function rRe(t,e){e["!protect"]&&yr(t,535,H6e(e["!protect"]))}function nRe(t,e,r,n){var a=iu(),s=r.SheetNames[t],o=r.Sheets[s]||{},l=s;try{r&&r.Workbook&&(l=r.Workbook.Sheets[t].CodeName||l)}catch{}var c=Ea(o["!ref"]||"A1");if(c.e.c>16383||c.e.r>1048575){if(e.WTF)throw new Error("Range "+(o["!ref"]||"A1")+" exceeds format limit A1:XFD1048576");c.e.c=Math.min(c.e.c,16383),c.e.r=Math.min(c.e.c,1048575)}return o["!links"]=[],o["!comments"]=[],yr(a,129),(r.vbaraw||o["!outline"])&&yr(a,147,XDe(l,o["!outline"])),yr(a,148,qDe(c)),tRe(a,o,r.Workbook),X6e(a,o),z6e(a,o,t,e),rRe(a,o),eRe(a,o,r,t),W6e(a,o),J6e(a,o,n),o["!margins"]&&yr(a,476,L6e(o["!margins"])),(!e||e.ignoreEC||e.ignoreEC==null)&&Y6e(a,o),Z6e(a,o,t,n),yr(a,130),a.end()}function aRe(t){var e=[],r=t.match(/^<c:numCache>/),n;(t.match(/<c:pt idx="(\d*)">(.*?)<\/c:pt>/mg)||[]).forEach(function(s){var o=s.match(/<c:pt idx="(\d*?)"><c:v>(.*)<\/c:v><\/c:pt>/);o&&(e[+o[1]]=r?+o[2]:o[2])});var a=_a((t.match(/<c:formatCode>([\s\S]*?)<\/c:formatCode>/)||["","General"])[1]);return(t.match(/<c:f>(.*?)<\/c:f>/mg)||[]).forEach(function(s){n=s.replace(/<.*?>/g,"")}),[e,a,n]}function sRe(t,e,r,n,a,s){var o=s||{"!type":"chart"};if(!t)return s;var l=0,c=0,u="A",d={s:{r:2e6,c:2e6},e:{r:0,c:0}};return(t.match(/<c:numCache>[\s\S]*?<\/c:numCache>/gm)||[]).forEach(function(f){var A=aRe(f);d.s.r=d.s.c=0,d.e.c=l,u=oi(l),A[0].forEach(function(h,m){o[u+Ki(m)]={t:"n",v:h,z:A[1]},c=m}),d.e.r<c&&(d.e.r=c),++l}),l>0&&(o["!ref"]=zn(d)),o}function iRe(t,e,r,n,a){if(!t)return t;n||(n={"!id":{}});var s={"!type":"chart","!drawel":null,"!rel":""},o,l=t.match(Gae);return l&&_R(l[0],s,a,r),(o=t.match(/drawing r:id="(.*?)"/))&&(s["!rel"]=o[1]),n["!id"][s["!rel"]]&&(s["!drawel"]=n["!id"][s["!rel"]]),s}function oRe(t,e){t.l+=10;var r=ac(t);return{name:r}}function lRe(t,e,r,n,a){if(!t)return t;n||(n={"!id":{}});var s={"!type":"chart","!drawel":null,"!rel":""},o=!1;return DA(t,function(c,u,d){switch(d){case 550:s["!rel"]=c;break;case 651:a.Sheets[r]||(a.Sheets[r]={}),c.name&&(a.Sheets[r].CodeName=c.name);break;case 562:case 652:case 669:case 679:case 551:case 552:case 476:case 3072:break;case 35:o=!0;break;case 36:o=!1;break;case 37:break;case 38:break;default:if(!(u.T>0)){if(!(u.T<0)){if(!o||e.WTF)throw new Error("Unexpected record 0x"+d.toString(16))}}}},e),n["!id"][s["!rel"]]&&(s["!drawel"]=n["!id"][s["!rel"]]),s}var ER=[["allowRefreshQuery",!1,"bool"],["autoCompressPictures",!0,"bool"],["backupFile",!1,"bool"],["checkCompatibility",!1,"bool"],["CodeName",""],["date1904",!1,"bool"],["defaultThemeVersion",0,"int"],["filterPrivacy",!1,"bool"],["hidePivotFieldList",!1,"bool"],["promptedSolutions",!1,"bool"],["publishItems",!1,"bool"],["refreshAllConnections",!1,"bool"],["saveExternalLinkValues",!0,"bool"],["showBorderUnselectedTables",!0,"bool"],["showInkAnnotation",!0,"bool"],["showObjects","all"],["showPivotChartFilter",!1,"bool"],["updateLinks","userSet"]],cRe=[["activeTab",0,"int"],["autoFilterDateGrouping",!0,"bool"],["firstSheet",0,"int"],["minimized",!1,"bool"],["showHorizontalScroll",!0,"bool"],["showSheetTabs",!0,"bool"],["showVerticalScroll",!0,"bool"],["tabRatio",600,"int"],["visibility","visible"]],uRe=[],dRe=[["calcCompleted","true"],["calcMode","auto"],["calcOnSave","true"],["concurrentCalc","true"],["fullCalcOnLoad","false"],["fullPrecision","true"],["iterate","false"],["iterateCount","100"],["iterateDelta","0.001"],["refMode","A1"]];function n$(t,e){for(var r=0;r!=t.length;++r)for(var n=t[r],a=0;a!=e.length;++a){var s=e[a];if(n[s[0]]==null)n[s[0]]=s[1];else switch(s[2]){case"bool":typeof n[s[0]]=="string"&&(n[s[0]]=Ps(n[s[0]]));break;case"int":typeof n[s[0]]=="string"&&(n[s[0]]=parseInt(n[s[0]],10));break}}}function a$(t,e){for(var r=0;r!=e.length;++r){var n=e[r];if(t[n[0]]==null)t[n[0]]=n[1];else switch(n[2]){case"bool":typeof t[n[0]]=="string"&&(t[n[0]]=Ps(t[n[0]]));break;case"int":typeof t[n[0]]=="string"&&(t[n[0]]=parseInt(t[n[0]],10));break}}}function Wae(t){a$(t.WBProps,ER),a$(t.CalcPr,dRe),n$(t.WBView,cRe),n$(t.Sheets,uRe),xv.date1904=Ps(t.WBProps.date1904)}function fRe(t){return!t.Workbook||!t.Workbook.WBProps?"false":Ps(t.Workbook.WBProps.date1904)?"true":"false"}var hRe="][*?/\\".split("");function Xae(t,e){if(t.length>31)throw new Error("Sheet names cannot exceed 31 chars");var r=!0;return hRe.forEach(function(n){if(t.indexOf(n)!=-1)throw new Error("Sheet name cannot contain : \\ / ? * [ ]")}),r}function ARe(t,e,r){t.forEach(function(n,a){Xae(n);for(var s=0;s<a;++s)if(n==t[s])throw new Error("Duplicate Sheet Name: "+n);if(r){var o=e&&e[a]&&e[a].CodeName||n;if(o.charCodeAt(0)==95&&o.length>22)throw new Error("Bad Code Name: Worksheet"+o)}})}function mRe(t){if(!t||!t.SheetNames||!t.Sheets)throw new Error("Invalid Workbook");if(!t.SheetNames.length)throw new Error("Workbook is empty");var e=t.Workbook&&t.Workbook.Sheets||[];ARe(t.SheetNames,e,!!t.vbaraw);for(var r=0;r<t.SheetNames.length;++r)fDe(t.Sheets[t.SheetNames[r]],t.SheetNames[r],r)}var pRe=/<\w+:workbook/;function gRe(t,e){if(!t)throw new Error("Could not find file");var r={AppVersion:{},WBProps:{},WBView:[],Sheets:[],CalcPr:{},Names:[],xmlns:""},n=!1,a="xmlns",s={},o=0;if(t.replace(lc,function(c,u){var d=Dn(c);switch(ph(d[0])){case"<?xml":break;case"<workbook":c.match(pRe)&&(a="xmlns"+c.match(/<(\w+):/)[1]),r.xmlns=d[a];break;case"</workbook>":break;case"<fileVersion":delete d[0],r.AppVersion=d;break;case"<fileVersion/>":case"</fileVersion>":break;case"<fileSharing":break;case"<fileSharing/>":break;case"<workbookPr":case"<workbookPr/>":ER.forEach(function(f){if(d[f[0]]!=null)switch(f[2]){case"bool":r.WBProps[f[0]]=Ps(d[f[0]]);break;case"int":r.WBProps[f[0]]=parseInt(d[f[0]],10);break;default:r.WBProps[f[0]]=d[f[0]]}}),d.codeName&&(r.WBProps.CodeName=ls(d.codeName));break;case"</workbookPr>":break;case"<workbookProtection":break;case"<workbookProtection/>":break;case"<bookViews":case"<bookViews>":case"</bookViews>":break;case"<workbookView":case"<workbookView/>":delete d[0],r.WBView.push(d);break;case"</workbookView>":break;case"<sheets":case"<sheets>":case"</sheets>":break;case"<sheet":switch(d.state){case"hidden":d.Hidden=1;break;case"veryHidden":d.Hidden=2;break;default:d.Hidden=0}delete d.state,d.name=_a(ls(d.name)),delete d[0],r.Sheets.push(d);break;case"</sheet>":break;case"<functionGroups":case"<functionGroups/>":break;case"<functionGroup":break;case"<externalReferences":case"</externalReferences>":case"<externalReferences>":break;case"<externalReference":break;case"<definedNames/>":break;case"<definedNames>":case"<definedNames":n=!0;break;case"</definedNames>":n=!1;break;case"<definedName":s={},s.Name=ls(d.name),d.comment&&(s.Comment=d.comment),d.localSheetId&&(s.Sheet=+d.localSheetId),Ps(d.hidden||"0")&&(s.Hidden=!0),o=u+c.length;break;case"</definedName>":s.Ref=_a(ls(t.slice(o,u))),r.Names.push(s);break;case"<definedName/>":break;case"<calcPr":delete d[0],r.CalcPr=d;break;case"<calcPr/>":delete d[0],r.CalcPr=d;break;case"</calcPr>":break;case"<oleSize":break;case"<customWorkbookViews>":case"</customWorkbookViews>":case"<customWorkbookViews":break;case"<customWorkbookView":case"</customWorkbookView>":break;case"<pivotCaches>":case"</pivotCaches>":case"<pivotCaches":break;case"<pivotCache":break;case"<smartTagPr":case"<smartTagPr/>":break;case"<smartTagTypes":case"<smartTagTypes>":case"</smartTagTypes>":break;case"<smartTagType":break;case"<webPublishing":case"<webPublishing/>":break;case"<fileRecoveryPr":case"<fileRecoveryPr/>":break;case"<webPublishObjects>":case"<webPublishObjects":case"</webPublishObjects>":break;case"<webPublishObject":break;case"<extLst":case"<extLst>":case"</extLst>":case"<extLst/>":break;case"<ext":n=!0;break;case"</ext>":n=!1;break;case"<ArchID":break;case"<AlternateContent":case"<AlternateContent>":n=!0;break;case"</AlternateContent>":n=!1;break;case"<revisionPtr":break;default:if(!n&&e.WTF)throw new Error("unrecognized "+d[0]+" in workbook")}return c}),Dg.indexOf(r.xmlns)===-1)throw new Error("Unknown Namespace: "+r.xmlns);return Wae(r),r}function Yae(t){var e=[zi];e[e.length]=Ur("workbook",null,{xmlns:Dg[0],"xmlns:r":So.r});var r=t.Workbook&&(t.Workbook.Names||[]).length>0,n={codeName:"ThisWorkbook"};t.Workbook&&t.Workbook.WBProps&&(ER.forEach(function(l){t.Workbook.WBProps[l[0]]!=null&&t.Workbook.WBProps[l[0]]!=l[1]&&(n[l[0]]=t.Workbook.WBProps[l[0]])}),t.Workbook.WBProps.CodeName&&(n.codeName=t.Workbook.WBProps.CodeName,delete n.CodeName)),e[e.length]=Ur("workbookPr",null,n);var a=t.Workbook&&t.Workbook.Sheets||[],s=0;if(a&&a[0]&&a[0].Hidden){for(e[e.length]="<bookViews>",s=0;s!=t.SheetNames.length&&!(!a[s]||!a[s].Hidden);++s);s==t.SheetNames.length&&(s=0),e[e.length]='<workbookView firstSheet="'+s+'" activeTab="'+s+'"/>',e[e.length]="</bookViews>"}for(e[e.length]="<sheets>",s=0;s!=t.SheetNames.length;++s){var o={name:ts(t.SheetNames[s].slice(0,31))};if(o.sheetId=""+(s+1),o["r:id"]="rId"+(s+1),a[s])switch(a[s].Hidden){case 1:o.state="hidden";break;case 2:o.state="veryHidden";break}e[e.length]=Ur("sheet",null,o)}return e[e.length]="</sheets>",r&&(e[e.length]="<definedNames>",t.Workbook&&t.Workbook.Names&&t.Workbook.Names.forEach(function(l){var c={name:l.Name};l.Comment&&(c.comment=l.Comment),l.Sheet!=null&&(c.localSheetId=""+l.Sheet),l.Hidden&&(c.hidden="1"),l.Ref&&(e[e.length]=Ur("definedName",ts(l.Ref),c))}),e[e.length]="</definedNames>"),e.length>2&&(e[e.length]="</workbook>",e[1]=e[1].replace("/>",">")),e.join("")}function xRe(t,e){var r={};return r.Hidden=t.read_shift(4),r.iTabID=t.read_shift(4),r.strRelID=Wk(t),r.name=ac(t),r}function vRe(t,e){return e||(e=nr(127)),e.write_shift(4,t.Hidden),e.write_shift(4,t.iTabID),dR(t.strRelID,e),Yo(t.name.slice(0,31),e),e.length>e.l?e.slice(0,e.l):e}function yRe(t,e){var r={},n=t.read_shift(4);r.defaultThemeVersion=t.read_shift(4);var a=e>8?ac(t):"";return a.length>0&&(r.CodeName=a),r.autoCompressPictures=!!(n&65536),r.backupFile=!!(n&64),r.checkCompatibility=!!(n&4096),r.date1904=!!(n&1),r.filterPrivacy=!!(n&8),r.hidePivotFieldList=!!(n&1024),r.promptedSolutions=!!(n&16),r.publishItems=!!(n&2048),r.refreshAllConnections=!!(n&262144),r.saveExternalLinkValues=!!(n&128),r.showBorderUnselectedTables=!!(n&4),r.showInkAnnotation=!!(n&32),r.showObjects=["all","placeholders","none"][n>>13&3],r.showPivotChartFilter=!!(n&32768),r.updateLinks=["userSet","never","always"][n>>8&3],r}function bRe(t,e){e||(e=nr(72));var r=0;return t&&t.filterPrivacy&&(r|=8),e.write_shift(4,r),e.write_shift(4,0),Vne(t&&t.CodeName||"ThisWorkbook",e),e.slice(0,e.l)}function wRe(t,e){var r={};return t.read_shift(4),r.ArchID=t.read_shift(4),t.l+=e-8,r}function NRe(t,e,r){var n=t.l+e;t.l+=4,t.l+=1;var a=t.read_shift(4),s=Z3e(t),o=iDe(t,0,r),l=uR(t);t.l=n;var c={Name:s,Ptg:o};return a<268435455&&(c.Sheet=a),l&&(c.Comment=l),c}function CRe(t,e){var r={AppVersion:{},WBProps:{},WBView:[],Sheets:[],CalcPr:{},xmlns:""},n=[],a=!1;e||(e={}),e.biff=12;var s=[],o=[[]];return o.SheetNames=[],o.XTI=[],U2[16]={n:"BrtFRTArchID$",f:wRe},DA(t,function(c,u,d){switch(d){case 156:o.SheetNames.push(c.name),r.Sheets.push(c);break;case 153:r.WBProps=c;break;case 39:c.Sheet!=null&&(e.SID=c.Sheet),c.Ref=Zl(c.Ptg,null,null,o,e),delete e.SID,delete c.Ptg,s.push(c);break;case 1036:break;case 357:case 358:case 355:case 667:o[0].length?o.push([d,c]):o[0]=[d,c],o[o.length-1].XTI=[];break;case 362:o.length===0&&(o[0]=[],o[0].XTI=[]),o[o.length-1].XTI=o[o.length-1].XTI.concat(c),o.XTI=o.XTI.concat(c);break;case 361:break;case 2071:case 158:case 143:case 664:case 353:break;case 3072:case 3073:case 534:case 677:case 157:case 610:case 2050:case 155:case 548:case 676:case 128:case 665:case 2128:case 2125:case 549:case 2053:case 596:case 2076:case 2075:case 2082:case 397:case 154:case 1117:case 553:case 2091:break;case 35:n.push(d),a=!0;break;case 36:n.pop(),a=!1;break;case 37:n.push(d),a=!0;break;case 38:n.pop(),a=!1;break;case 16:break;default:if(!u.T){if(!a||e.WTF&&n[n.length-1]!=37&&n[n.length-1]!=35)throw new Error("Unexpected record 0x"+d.toString(16))}}},e),Wae(r),r.Names=s,r.supbooks=o,r}function _Re(t,e){yr(t,143);for(var r=0;r!=e.SheetNames.length;++r){var n=e.Workbook&&e.Workbook.Sheets&&e.Workbook.Sheets[r]&&e.Workbook.Sheets[r].Hidden||0,a={Hidden:n,iTabID:r+1,strRelID:"rId"+(r+1),name:e.SheetNames[r]};yr(t,156,vRe(a))}yr(t,144)}function ERe(t,e){e||(e=nr(127));for(var r=0;r!=4;++r)e.write_shift(4,0);return Yo("SheetJS",e),Yo(LS.version,e),Yo(LS.version,e),Yo("7262",e),e.length>e.l?e.slice(0,e.l):e}function SRe(t,e){e||(e=nr(29)),e.write_shift(-4,0),e.write_shift(-4,460),e.write_shift(4,28800),e.write_shift(4,17600),e.write_shift(4,500),e.write_shift(4,t),e.write_shift(4,t);var r=120;return e.write_shift(1,r),e.length>e.l?e.slice(0,e.l):e}function IRe(t,e){if(!(!e.Workbook||!e.Workbook.Sheets)){for(var r=e.Workbook.Sheets,n=0,a=-1,s=-1;n<r.length;++n)!r[n]||!r[n].Hidden&&a==-1?a=n:r[n].Hidden==1&&s==-1&&(s=n);s>a||(yr(t,135),yr(t,158,SRe(a)),yr(t,136))}}function jRe(t,e){var r=iu();return yr(r,131),yr(r,128,ERe()),yr(r,153,bRe(t.Workbook&&t.Workbook.WBProps||null)),IRe(r,t),_Re(r,t),yr(r,132),r.end()}function PRe(t,e,r){return e.slice(-4)===".bin"?CRe(t,r):gRe(t,r)}function BRe(t,e,r,n,a,s,o,l){return e.slice(-4)===".bin"?K6e(t,n,r,a,s,o,l):NDe(t,n,r,a,s,o,l)}function TRe(t,e,r,n,a,s,o,l){return e.slice(-4)===".bin"?lRe(t,n,r,a,s):iRe(t,n,r,a,s)}function kRe(t,e,r,n,a,s,o,l){return e.slice(-4)===".bin"?OFe():DFe()}function FRe(t,e,r,n,a,s,o,l){return e.slice(-4)===".bin"?kFe():FFe()}function ORe(t,e,r,n){return e.slice(-4)===".bin"?Pke(t,r,n):xke(t,r,n)}function DRe(t,e,r){return Bae(t,r)}function RRe(t,e,r){return e.slice(-4)===".bin"?RTe(t,r):FTe(t,r)}function MRe(t,e,r){return e.slice(-4)===".bin"?IFe(t,r):vFe(t,r)}function LRe(t,e,r){return e.slice(-4)===".bin"?pFe(t):AFe(t)}function URe(t,e,r,n){return r.slice(-4)===".bin"?gFe(t,e,r,n):void 0}function QRe(t,e,r){return e.slice(-4)===".bin"?dFe(t,e,r):hFe(t,e,r)}function VRe(t,e,r){return(e.slice(-4)===".bin"?jRe:Yae)(t)}function HRe(t,e,r,n,a){return(e.slice(-4)===".bin"?nRe:Kae)(t,r,n,a)}function $Re(t,e,r){return(e.slice(-4)===".bin"?Uke:jae)(t,r)}function GRe(t,e,r){return(e.slice(-4)===".bin"?UTe:bae)(t,r)}function KRe(t,e,r){return(e.slice(-4)===".bin"?jFe:Fae)(t)}function qRe(t){return(t.slice(-4)===".bin"?fFe:Tae)()}var Jae=/([\w:]+)=((?:")([^"]*)(?:")|(?:')([^']*)(?:'))/g,Zae=/([\w:]+)=((?:")(?:[^"]*)(?:")|(?:')(?:[^']*)(?:'))/;function Xd(t,e){var r=t.split(/\s+/),n=[];if(n[0]=r[0],r.length===1)return n;var a=t.match(Jae),s,o,l,c;if(a)for(c=0;c!=a.length;++c)s=a[c].match(Zae),(o=s[1].indexOf(":"))===-1?n[s[1]]=s[2].slice(1,s[2].length-1):(s[1].slice(0,6)==="xmlns:"?l="xmlns"+s[1].slice(6):l=s[1].slice(o+1),n[l]=s[2].slice(1,s[2].length-1));return n}function zRe(t){var e=t.split(/\s+/),r={};if(e.length===1)return r;var n=t.match(Jae),a,s,o,l;if(n)for(l=0;l!=n.length;++l)a=n[l].match(Zae),(s=a[1].indexOf(":"))===-1?r[a[1]]=a[2].slice(1,a[2].length-1):(a[1].slice(0,6)==="xmlns:"?o="xmlns"+a[1].slice(6):o=a[1].slice(s+1),r[o]=a[2].slice(1,a[2].length-1));return r}var Rb;function WRe(t,e){var r=Rb[t]||_a(t);return r==="General"?dg(e):Od(r,e)}function XRe(t,e,r,n){var a=n;switch((r[0].match(/dt:dt="([\w.]+)"/)||["",""])[1]){case"boolean":a=Ps(n);break;case"i2":case"int":a=parseInt(n,10);break;case"r4":case"float":a=parseFloat(n);break;case"date":case"dateTime.tz":a=Fs(n);break;case"i8":case"string":case"fixed":case"uuid":case"bin.base64":break;default:throw new Error("bad custprop:"+r[0])}t[_a(e)]=a}function YRe(t,e,r){if(t.t!=="z"){if(!r||r.cellText!==!1)try{t.t==="e"?t.w=t.w||RA[t.v]:e==="General"?t.t==="n"?(t.v|0)===t.v?t.w=t.v.toString(10):t.w=B2(t.v):t.w=dg(t.v):t.w=WRe(e||"General",t.v)}catch(s){if(r.WTF)throw s}try{var n=Rb[e]||e||"General";if(r.cellNF&&(t.z=n),r.cellDates&&t.t=="n"&&x1(n)){var a=_p(t.v);a&&(t.t="d",t.v=new Date(a.y,a.m-1,a.d,a.H,a.M,a.S,a.u))}}catch(s){if(r.WTF)throw s}}}function JRe(t,e,r){if(r.cellStyles&&e.Interior){var n=e.Interior;n.Pattern&&(n.patternType=uke[n.Pattern]||n.Pattern)}t[e.ID]=e}function ZRe(t,e,r,n,a,s,o,l,c,u){var d="General",f=n.StyleID,A={};u=u||{};var h=[],m=0;for(f===void 0&&l&&(f=l.StyleID),f===void 0&&o&&(f=o.StyleID);s[f]!==void 0&&(s[f].nf&&(d=s[f].nf),s[f].Interior&&h.push(s[f].Interior),!!s[f].Parent);)f=s[f].Parent;switch(r.Type){case"Boolean":n.t="b",n.v=Ps(t);break;case"String":n.t="s",n.r=bH(_a(t)),n.v=t.indexOf("<")>-1?_a(e||t).replace(/<.*?>/g,""):n.r;break;case"DateTime":t.slice(-1)!="Z"&&(t+="Z"),n.v=(Fs(t)-new Date(Date.UTC(1899,11,30)))/(24*60*60*1e3),n.v!==n.v?n.v=_a(t):n.v<60&&(n.v=n.v-1),(!d||d=="General")&&(d="yyyy-mm-dd");case"Number":n.v===void 0&&(n.v=+t),n.t||(n.t="n");break;case"Error":n.t="e",n.v=qne[t],u.cellText!==!1&&(n.w=t);break;default:t==""&&e==""?n.t="z":(n.t="s",n.v=bH(e||t));break}if(YRe(n,d,u),u.cellFormula!==!1)if(n.Formula){var p=_a(n.Formula);p.charCodeAt(0)==61&&(p=p.slice(1)),n.f=gv(p,a),delete n.Formula,n.ArrayRange=="RC"?n.F=gv("RC:RC",a):n.ArrayRange&&(n.F=gv(n.ArrayRange,a),c.push([Ea(n.F),n.F]))}else for(m=0;m<c.length;++m)a.r>=c[m][0].s.r&&a.r<=c[m][0].e.r&&a.c>=c[m][0].s.c&&a.c<=c[m][0].e.c&&(n.F=c[m][1]);u.cellStyles&&(h.forEach(function(x){!A.patternType&&x.patternType&&(A.patternType=x.patternType)}),n.s=A),n.StyleID!==void 0&&(n.ixfe=n.StyleID)}function eMe(t){t.t=t.v||"",t.t=t.t.replace(/\r\n/g,`
`).replace(/\r/g,`
`),t.v=t.w=t.ixfe=void 0}function O5(t,e){var r=e||{};v1();var n=zy(aR(t));(r.type=="binary"||r.type=="array"||r.type=="base64")&&(n=ls(n));var a=n.slice(0,1024).toLowerCase(),s=!1;if(a=a.replace(/".*?"/g,""),(a.indexOf(">")&1023)>Math.min(a.indexOf(",")&1023,a.indexOf(";")&1023)){var o=Os(r);return o.type="string",Uv.to_workbook(n,o)}if(a.indexOf("<?xml")==-1&&["html","table","head","meta","script","style","div"].forEach(function(_e){a.indexOf("<"+_e)>=0&&(s=!0)}),s)return LMe(n,r);Rb={"General Number":"General","General Date":Tn[22],"Long Date":"dddd, mmmm dd, yyyy","Medium Date":Tn[15],"Short Date":Tn[14],"Long Time":Tn[19],"Medium Time":Tn[18],"Short Time":Tn[20],Currency:'"$"#,##0.00_);[Red]\\("$"#,##0.00\\)',Fixed:Tn[2],Standard:Tn[4],Percent:Tn[10],Scientific:Tn[11],"Yes/No":'"Yes";"Yes";"No";@',"True/False":'"True";"True";"False";@',"On/Off":'"Yes";"Yes";"No";@'};var l,c=[],u,d={},f=[],A=r.dense?[]:{},h="",m={},p={},x=Xd('<Data ss:Type="String">'),v=0,y=0,b=0,w={s:{r:2e6,c:2e6},e:{r:0,c:0}},j={},I={},_="",S=0,E=[],T={},k={},B=0,D=[],X=[],me={},pe=[],he,ve=!1,ae=[],Pe=[],ke={},O=0,G=0,z={Sheets:[],WBProps:{date1904:!1}},U={};F2.lastIndex=0,n=n.replace(/<!--([\s\S]*?)-->/mg,"");for(var Y="";l=F2.exec(n);)switch(l[3]=(Y=l[3]).toLowerCase()){case"data":if(Y=="data"){if(l[1]==="/"){if((u=c.pop())[0]!==l[3])throw new Error("Bad state: "+u.join("|"))}else l[0].charAt(l[0].length-2)!=="/"&&c.push([l[3],!0]);break}if(c[c.length-1][1])break;l[1]==="/"?ZRe(n.slice(v,l.index),_,x,c[c.length-1][0]=="comment"?me:m,{c:y,r:b},j,pe[y],p,ae,r):(_="",x=Xd(l[0]),v=l.index+l[0].length);break;case"cell":if(l[1]==="/")if(X.length>0&&(m.c=X),(!r.sheetRows||r.sheetRows>b)&&m.v!==void 0&&(r.dense?(A[b]||(A[b]=[]),A[b][y]=m):A[oi(y)+Ki(b)]=m),m.HRef&&(m.l={Target:_a(m.HRef)},m.HRefScreenTip&&(m.l.Tooltip=m.HRefScreenTip),delete m.HRef,delete m.HRefScreenTip),(m.MergeAcross||m.MergeDown)&&(O=y+(parseInt(m.MergeAcross,10)|0),G=b+(parseInt(m.MergeDown,10)|0),E.push({s:{c:y,r:b},e:{c:O,r:G}})),!r.sheetStubs)m.MergeAcross?y=O+1:++y;else if(m.MergeAcross||m.MergeDown){for(var ee=y;ee<=O;++ee)for(var M=b;M<=G;++M)(ee>y||M>b)&&(r.dense?(A[M]||(A[M]=[]),A[M][ee]={t:"z"}):A[oi(ee)+Ki(M)]={t:"z"});y=O+1}else++y;else m=zRe(l[0]),m.Index&&(y=+m.Index-1),y<w.s.c&&(w.s.c=y),y>w.e.c&&(w.e.c=y),l[0].slice(-2)==="/>"&&++y,X=[];break;case"row":l[1]==="/"||l[0].slice(-2)==="/>"?(b<w.s.r&&(w.s.r=b),b>w.e.r&&(w.e.r=b),l[0].slice(-2)==="/>"&&(p=Xd(l[0]),p.Index&&(b=+p.Index-1)),y=0,++b):(p=Xd(l[0]),p.Index&&(b=+p.Index-1),ke={},(p.AutoFitHeight=="0"||p.Height)&&(ke.hpx=parseInt(p.Height,10),ke.hpt=L2(ke.hpx),Pe[b]=ke),p.Hidden=="1"&&(ke.hidden=!0,Pe[b]=ke));break;case"worksheet":if(l[1]==="/"){if((u=c.pop())[0]!==l[3])throw new Error("Bad state: "+u.join("|"));f.push(h),w.s.r<=w.e.r&&w.s.c<=w.e.c&&(A["!ref"]=zn(w),r.sheetRows&&r.sheetRows<=w.e.r&&(A["!fullref"]=A["!ref"],w.e.r=r.sheetRows-1,A["!ref"]=zn(w))),E.length&&(A["!merges"]=E),pe.length>0&&(A["!cols"]=pe),Pe.length>0&&(A["!rows"]=Pe),d[h]=A}else w={s:{r:2e6,c:2e6},e:{r:0,c:0}},b=y=0,c.push([l[3],!1]),u=Xd(l[0]),h=_a(u.Name),A=r.dense?[]:{},E=[],ae=[],Pe=[],U={name:h,Hidden:0},z.Sheets.push(U);break;case"table":if(l[1]==="/"){if((u=c.pop())[0]!==l[3])throw new Error("Bad state: "+u.join("|"))}else{if(l[0].slice(-2)=="/>")break;c.push([l[3],!1]),pe=[],ve=!1}break;case"style":l[1]==="/"?JRe(j,I,r):I=Xd(l[0]);break;case"numberformat":I.nf=_a(Xd(l[0]).Format||"General"),Rb[I.nf]&&(I.nf=Rb[I.nf]);for(var H=0;H!=392&&Tn[H]!=I.nf;++H);if(H==392){for(H=57;H!=392;++H)if(Tn[H]==null){oA(I.nf,H);break}}break;case"column":if(c[c.length-1][0]!=="table")break;if(he=Xd(l[0]),he.Hidden&&(he.hidden=!0,delete he.Hidden),he.Width&&(he.wpx=parseInt(he.Width,10)),!ve&&he.wpx>10){ve=!0,tc=Sae;for(var te=0;te<pe.length;++te)pe[te]&&Sm(pe[te])}ve&&Sm(he),pe[he.Index-1||pe.length]=he;for(var Ce=0;Ce<+he.Span;++Ce)pe[pe.length]=Os(he);break;case"namedrange":if(l[1]==="/")break;z.Names||(z.Names=[]);var V=Dn(l[0]),We={Name:V.Name,Ref:gv(V.RefersTo.slice(1),{r:0,c:0})};z.Sheets.length>0&&(We.Sheet=z.Sheets.length-1),z.Names.push(We);break;case"namedcell":break;case"b":break;case"i":break;case"u":break;case"s":break;case"em":break;case"h2":break;case"h3":break;case"sub":break;case"sup":break;case"span":break;case"alignment":break;case"borders":break;case"border":break;case"font":if(l[0].slice(-2)==="/>")break;l[1]==="/"?_+=n.slice(S,l.index):S=l.index+l[0].length;break;case"interior":if(!r.cellStyles)break;I.Interior=Xd(l[0]);break;case"protection":break;case"author":case"title":case"description":case"created":case"keywords":case"subject":case"category":case"company":case"lastauthor":case"lastsaved":case"lastprinted":case"version":case"revision":case"totaltime":case"hyperlinkbase":case"manager":case"contentstatus":case"identifier":case"language":case"appname":if(l[0].slice(-2)==="/>")break;l[1]==="/"?C5e(T,Y,n.slice(B,l.index)):B=l.index+l[0].length;break;case"paragraphs":break;case"styles":case"workbook":if(l[1]==="/"){if((u=c.pop())[0]!==l[3])throw new Error("Bad state: "+u.join("|"))}else c.push([l[3],!1]);break;case"comment":if(l[1]==="/"){if((u=c.pop())[0]!==l[3])throw new Error("Bad state: "+u.join("|"));eMe(me),X.push(me)}else c.push([l[3],!1]),u=Xd(l[0]),me={a:u.Author};break;case"autofilter":if(l[1]==="/"){if((u=c.pop())[0]!==l[3])throw new Error("Bad state: "+u.join("|"))}else if(l[0].charAt(l[0].length-2)!=="/"){var ie=Xd(l[0]);A["!autofilter"]={ref:gv(ie.Range).replace(/\$/g,"")},c.push([l[3],!0])}break;case"name":break;case"datavalidation":if(l[1]==="/"){if((u=c.pop())[0]!==l[3])throw new Error("Bad state: "+u.join("|"))}else l[0].charAt(l[0].length-2)!=="/"&&c.push([l[3],!0]);break;case"pixelsperinch":break;case"componentoptions":case"documentproperties":case"customdocumentproperties":case"officedocumentsettings":case"pivottable":case"pivotcache":case"names":case"mapinfo":case"pagebreaks":case"querytable":case"sorting":case"schema":case"conditionalformatting":case"smarttagtype":case"smarttags":case"excelworkbook":case"workbookoptions":case"worksheetoptions":if(l[1]==="/"){if((u=c.pop())[0]!==l[3])throw new Error("Bad state: "+u.join("|"))}else l[0].charAt(l[0].length-2)!=="/"&&c.push([l[3],!0]);break;case"null":break;default:if(c.length==0&&l[3]=="document"||c.length==0&&l[3]=="uof")return c$(n,r);var J=!0;switch(c[c.length-1][0]){case"officedocumentsettings":switch(l[3]){case"allowpng":break;case"removepersonalinformation":break;case"downloadcomponents":break;case"locationofcomponents":break;case"colors":break;case"color":break;case"index":break;case"rgb":break;case"targetscreensize":break;case"readonlyrecommended":break;default:J=!1}break;case"componentoptions":switch(l[3]){case"toolbar":break;case"hideofficelogo":break;case"spreadsheetautofit":break;case"label":break;case"caption":break;case"maxheight":break;case"maxwidth":break;case"nextsheetnumber":break;default:J=!1}break;case"excelworkbook":switch(l[3]){case"date1904":z.WBProps.date1904=!0;break;case"windowheight":break;case"windowwidth":break;case"windowtopx":break;case"windowtopy":break;case"tabratio":break;case"protectstructure":break;case"protectwindow":break;case"protectwindows":break;case"activesheet":break;case"displayinknotes":break;case"firstvisiblesheet":break;case"supbook":break;case"sheetname":break;case"sheetindex":break;case"sheetindexfirst":break;case"sheetindexlast":break;case"dll":break;case"acceptlabelsinformulas":break;case"donotsavelinkvalues":break;case"iteration":break;case"maxiterations":break;case"maxchange":break;case"path":break;case"xct":break;case"count":break;case"selectedsheets":break;case"calculation":break;case"uncalced":break;case"startupprompt":break;case"crn":break;case"externname":break;case"formula":break;case"colfirst":break;case"collast":break;case"wantadvise":break;case"boolean":break;case"error":break;case"text":break;case"ole":break;case"noautorecover":break;case"publishobjects":break;case"donotcalculatebeforesave":break;case"number":break;case"refmoder1c1":break;case"embedsavesmarttags":break;default:J=!1}break;case"workbookoptions":switch(l[3]){case"owcversion":break;case"height":break;case"width":break;default:J=!1}break;case"worksheetoptions":switch(l[3]){case"visible":if(l[0].slice(-2)!=="/>")if(l[1]==="/")switch(n.slice(B,l.index)){case"SheetHidden":U.Hidden=1;break;case"SheetVeryHidden":U.Hidden=2;break}else B=l.index+l[0].length;break;case"header":A["!margins"]||Vp(A["!margins"]={},"xlml"),isNaN(+Dn(l[0]).Margin)||(A["!margins"].header=+Dn(l[0]).Margin);break;case"footer":A["!margins"]||Vp(A["!margins"]={},"xlml"),isNaN(+Dn(l[0]).Margin)||(A["!margins"].footer=+Dn(l[0]).Margin);break;case"pagemargins":var Oe=Dn(l[0]);A["!margins"]||Vp(A["!margins"]={},"xlml"),isNaN(+Oe.Top)||(A["!margins"].top=+Oe.Top),isNaN(+Oe.Left)||(A["!margins"].left=+Oe.Left),isNaN(+Oe.Right)||(A["!margins"].right=+Oe.Right),isNaN(+Oe.Bottom)||(A["!margins"].bottom=+Oe.Bottom);break;case"displayrighttoleft":z.Views||(z.Views=[]),z.Views[0]||(z.Views[0]={}),z.Views[0].RTL=!0;break;case"freezepanes":break;case"frozennosplit":break;case"splithorizontal":case"splitvertical":break;case"donotdisplaygridlines":break;case"activerow":break;case"activecol":break;case"toprowbottompane":break;case"leftcolumnrightpane":break;case"unsynced":break;case"print":break;case"printerrors":break;case"panes":break;case"scale":break;case"pane":break;case"number":break;case"layout":break;case"pagesetup":break;case"selected":break;case"protectobjects":break;case"enableselection":break;case"protectscenarios":break;case"validprinterinfo":break;case"horizontalresolution":break;case"verticalresolution":break;case"numberofcopies":break;case"activepane":break;case"toprowvisible":break;case"leftcolumnvisible":break;case"fittopage":break;case"rangeselection":break;case"papersizeindex":break;case"pagelayoutzoom":break;case"pagebreakzoom":break;case"filteron":break;case"fitwidth":break;case"fitheight":break;case"commentslayout":break;case"zoom":break;case"lefttoright":break;case"gridlines":break;case"allowsort":break;case"allowfilter":break;case"allowinsertrows":break;case"allowdeleterows":break;case"allowinsertcols":break;case"allowdeletecols":break;case"allowinserthyperlinks":break;case"allowformatcells":break;case"allowsizecols":break;case"allowsizerows":break;case"nosummaryrowsbelowdetail":A["!outline"]||(A["!outline"]={}),A["!outline"].above=!0;break;case"tabcolorindex":break;case"donotdisplayheadings":break;case"showpagelayoutzoom":break;case"nosummarycolumnsrightdetail":A["!outline"]||(A["!outline"]={}),A["!outline"].left=!0;break;case"blackandwhite":break;case"donotdisplayzeros":break;case"displaypagebreak":break;case"rowcolheadings":break;case"donotdisplayoutline":break;case"noorientation":break;case"allowusepivottables":break;case"zeroheight":break;case"viewablerange":break;case"selection":break;case"protectcontents":break;default:J=!1}break;case"pivottable":case"pivotcache":switch(l[3]){case"immediateitemsondrop":break;case"showpagemultipleitemlabel":break;case"compactrowindent":break;case"location":break;case"pivotfield":break;case"orientation":break;case"layoutform":break;case"layoutsubtotallocation":break;case"layoutcompactrow":break;case"position":break;case"pivotitem":break;case"datatype":break;case"datafield":break;case"sourcename":break;case"parentfield":break;case"ptlineitems":break;case"ptlineitem":break;case"countofsameitems":break;case"item":break;case"itemtype":break;case"ptsource":break;case"cacheindex":break;case"consolidationreference":break;case"filename":break;case"reference":break;case"nocolumngrand":break;case"norowgrand":break;case"blanklineafteritems":break;case"hidden":break;case"subtotal":break;case"basefield":break;case"mapchilditems":break;case"function":break;case"refreshonfileopen":break;case"printsettitles":break;case"mergelabels":break;case"defaultversion":break;case"refreshname":break;case"refreshdate":break;case"refreshdatecopy":break;case"versionlastrefresh":break;case"versionlastupdate":break;case"versionupdateablemin":break;case"versionrefreshablemin":break;case"calculation":break;default:J=!1}break;case"pagebreaks":switch(l[3]){case"colbreaks":break;case"colbreak":break;case"rowbreaks":break;case"rowbreak":break;case"colstart":break;case"colend":break;case"rowend":break;default:J=!1}break;case"autofilter":switch(l[3]){case"autofiltercolumn":break;case"autofiltercondition":break;case"autofilterand":break;case"autofilteror":break;default:J=!1}break;case"querytable":switch(l[3]){case"id":break;case"autoformatfont":break;case"autoformatpattern":break;case"querysource":break;case"querytype":break;case"enableredirections":break;case"refreshedinxl9":break;case"urlstring":break;case"htmltables":break;case"connection":break;case"commandtext":break;case"refreshinfo":break;case"notitles":break;case"nextid":break;case"columninfo":break;case"overwritecells":break;case"donotpromptforfile":break;case"textwizardsettings":break;case"source":break;case"number":break;case"decimal":break;case"thousandseparator":break;case"trailingminusnumbers":break;case"formatsettings":break;case"fieldtype":break;case"delimiters":break;case"tab":break;case"comma":break;case"autoformatname":break;case"versionlastedit":break;case"versionlastrefresh":break;default:J=!1}break;case"datavalidation":switch(l[3]){case"range":break;case"type":break;case"min":break;case"max":break;case"sort":break;case"descending":break;case"order":break;case"casesensitive":break;case"value":break;case"errorstyle":break;case"errormessage":break;case"errortitle":break;case"inputmessage":break;case"inputtitle":break;case"combohide":break;case"inputhide":break;case"condition":break;case"qualifier":break;case"useblank":break;case"value1":break;case"value2":break;case"format":break;case"cellrangelist":break;default:J=!1}break;case"sorting":case"conditionalformatting":switch(l[3]){case"range":break;case"type":break;case"min":break;case"max":break;case"sort":break;case"descending":break;case"order":break;case"casesensitive":break;case"value":break;case"errorstyle":break;case"errormessage":break;case"errortitle":break;case"cellrangelist":break;case"inputmessage":break;case"inputtitle":break;case"combohide":break;case"inputhide":break;case"condition":break;case"qualifier":break;case"useblank":break;case"value1":break;case"value2":break;case"format":break;default:J=!1}break;case"mapinfo":case"schema":case"data":switch(l[3]){case"map":break;case"entry":break;case"range":break;case"xpath":break;case"field":break;case"xsdtype":break;case"filteron":break;case"aggregate":break;case"elementtype":break;case"attributetype":break;case"schema":case"element":case"complextype":case"datatype":case"all":case"attribute":case"extends":break;case"row":break;default:J=!1}break;case"smarttags":break;default:J=!1;break}if(J||l[3].match(/!\[CDATA/))break;if(!c[c.length-1][1])throw"Unrecognized tag: "+l[3]+"|"+c.join("|");if(c[c.length-1][0]==="customdocumentproperties"){if(l[0].slice(-2)==="/>")break;l[1]==="/"?XRe(k,Y,D,n.slice(B,l.index)):(D=l,B=l.index+l[0].length);break}if(r.WTF)throw"Unrecognized tag: "+l[3]+"|"+c.join("|")}var fe={};return!r.bookSheets&&!r.bookProps&&(fe.Sheets=d),fe.SheetNames=f,fe.Workbook=z,fe.SSF=Os(Tn),fe.Props=T,fe.Custprops=k,fe}function rF(t,e){switch(IR(e=e||{}),e.type||"base64"){case"base64":return O5(Hu(t),e);case"binary":case"buffer":case"file":return O5(t,e);case"array":return O5(Lm(t),e)}}function tMe(t,e){var r=[];return t.Props&&r.push(_5e(t.Props,e)),t.Custprops&&r.push(E5e(t.Props,t.Custprops)),r.join("")}function rMe(){return""}function nMe(t,e){var r=['<Style ss:ID="Default" ss:Name="Normal"><NumberFormat/></Style>'];return e.cellXfs.forEach(function(n,a){var s=[];s.push(Ur("NumberFormat",null,{"ss:Format":ts(Tn[n.numFmtId])}));var o={"ss:ID":"s"+(21+a)};r.push(Ur("Style",s.join(""),o))}),Ur("Styles",r.join(""))}function ese(t){return Ur("NamedRange",null,{"ss:Name":t.Name,"ss:RefersTo":"="+wR(t.Ref,{r:0,c:0})})}function aMe(t){if(!((t||{}).Workbook||{}).Names)return"";for(var e=t.Workbook.Names,r=[],n=0;n<e.length;++n){var a=e[n];a.Sheet==null&&(a.Name.match(/^_xlfn\./)||r.push(ese(a)))}return Ur("Names",r.join(""))}function sMe(t,e,r,n){if(!t||!((n||{}).Workbook||{}).Names)return"";for(var a=n.Workbook.Names,s=[],o=0;o<a.length;++o){var l=a[o];l.Sheet==r&&(l.Name.match(/^_xlfn\./)||s.push(ese(l)))}return s.join("")}function iMe(t,e,r,n){if(!t)return"";var a=[];if(t["!margins"]&&(a.push("<PageSetup>"),t["!margins"].header&&a.push(Ur("Header",null,{"x:Margin":t["!margins"].header})),t["!margins"].footer&&a.push(Ur("Footer",null,{"x:Margin":t["!margins"].footer})),a.push(Ur("PageMargins",null,{"x:Bottom":t["!margins"].bottom||"0.75","x:Left":t["!margins"].left||"0.7","x:Right":t["!margins"].right||"0.7","x:Top":t["!margins"].top||"0.75"})),a.push("</PageSetup>")),n&&n.Workbook&&n.Workbook.Sheets&&n.Workbook.Sheets[r])if(n.Workbook.Sheets[r].Hidden)a.push(Ur("Visible",n.Workbook.Sheets[r].Hidden==1?"SheetHidden":"SheetVeryHidden",{}));else{for(var s=0;s<r&&!(n.Workbook.Sheets[s]&&!n.Workbook.Sheets[s].Hidden);++s);s==r&&a.push("<Selected/>")}return((((n||{}).Workbook||{}).Views||[])[0]||{}).RTL&&a.push("<DisplayRightToLeft/>"),t["!protect"]&&(a.push(El("ProtectContents","True")),t["!protect"].objects&&a.push(El("ProtectObjects","True")),t["!protect"].scenarios&&a.push(El("ProtectScenarios","True")),t["!protect"].selectLockedCells!=null&&!t["!protect"].selectLockedCells?a.push(El("EnableSelection","NoSelection")):t["!protect"].selectUnlockedCells!=null&&!t["!protect"].selectUnlockedCells&&a.push(El("EnableSelection","UnlockedCells")),[["formatCells","AllowFormatCells"],["formatColumns","AllowSizeCols"],["formatRows","AllowSizeRows"],["insertColumns","AllowInsertCols"],["insertRows","AllowInsertRows"],["insertHyperlinks","AllowInsertHyperlinks"],["deleteColumns","AllowDeleteCols"],["deleteRows","AllowDeleteRows"],["sort","AllowSort"],["autoFilter","AllowFilter"],["pivotTables","AllowUsePivotTables"]].forEach(function(o){t["!protect"][o[0]]&&a.push("<"+o[1]+"/>")})),a.length==0?"":Ur("WorksheetOptions",a.join(""),{xmlns:Iu.x})}function oMe(t){return t.map(function(e){var r=I3e(e.t||""),n=Ur("ss:Data",r,{xmlns:"http://www.w3.org/TR/REC-html40"});return Ur("Comment",n,{"ss:Author":e.a})}).join("")}function lMe(t,e,r,n,a,s,o){if(!t||t.v==null&&t.f==null)return"";var l={};if(t.f&&(l["ss:Formula"]="="+ts(wR(t.f,o))),t.F&&t.F.slice(0,e.length)==e){var c=li(t.F.slice(e.length+1));l["ss:ArrayRange"]="RC:R"+(c.r==o.r?"":"["+(c.r-o.r)+"]")+"C"+(c.c==o.c?"":"["+(c.c-o.c)+"]")}if(t.l&&t.l.Target&&(l["ss:HRef"]=ts(t.l.Target),t.l.Tooltip&&(l["x:HRefScreenTip"]=ts(t.l.Tooltip))),r["!merges"])for(var u=r["!merges"],d=0;d!=u.length;++d)u[d].s.c!=o.c||u[d].s.r!=o.r||(u[d].e.c>u[d].s.c&&(l["ss:MergeAcross"]=u[d].e.c-u[d].s.c),u[d].e.r>u[d].s.r&&(l["ss:MergeDown"]=u[d].e.r-u[d].s.r));var f="",A="";switch(t.t){case"z":if(!n.sheetStubs)return"";break;case"n":f="Number",A=String(t.v);break;case"b":f="Boolean",A=t.v?"1":"0";break;case"e":f="Error",A=RA[t.v];break;case"d":f="DateTime",A=new Date(t.v).toISOString(),t.z==null&&(t.z=t.z||Tn[14]);break;case"s":f="String",A=S3e(t.v||"");break}var h=Qm(n.cellXfs,t,n);l["ss:StyleID"]="s"+(21+h),l["ss:Index"]=o.c+1;var m=t.v!=null?A:"",p=t.t=="z"?"":'<Data ss:Type="'+f+'">'+m+"</Data>";return(t.c||[]).length>0&&(p+=oMe(t.c)),Ur("Cell",p,l)}function cMe(t,e){var r='<Row ss:Index="'+(t+1)+'"';return e&&(e.hpt&&!e.hpx&&(e.hpx=Qv(e.hpt)),e.hpx&&(r+=' ss:AutoFitHeight="0" ss:Height="'+e.hpx+'"'),e.hidden&&(r+=' ss:Hidden="1"')),r+">"}function uMe(t,e,r,n){if(!t["!ref"])return"";var a=Ea(t["!ref"]),s=t["!merges"]||[],o=0,l=[];t["!cols"]&&t["!cols"].forEach(function(x,v){Sm(x);var y=!!x.width,b=AP(v,x),w={"ss:Index":v+1};y&&(w["ss:Width"]=R2(b.width)),x.hidden&&(w["ss:Hidden"]="1"),l.push(Ur("Column",null,w))});for(var c=Array.isArray(t),u=a.s.r;u<=a.e.r;++u){for(var d=[cMe(u,(t["!rows"]||[])[u])],f=a.s.c;f<=a.e.c;++f){var A=!1;for(o=0;o!=s.length;++o)if(!(s[o].s.c>f)&&!(s[o].s.r>u)&&!(s[o].e.c<f)&&!(s[o].e.r<u)){(s[o].s.c!=f||s[o].s.r!=u)&&(A=!0);break}if(!A){var h={r:u,c:f},m=On(h),p=c?(t[u]||[])[f]:t[m];d.push(lMe(p,m,t,e,r,n,h))}}d.push("</Row>"),d.length>2&&l.push(d.join(""))}return l.join("")}function dMe(t,e,r){var n=[],a=r.SheetNames[t],s=r.Sheets[a],o=s?sMe(s,e,t,r):"";return o.length>0&&n.push("<Names>"+o+"</Names>"),o=s?uMe(s,e,t,r):"",o.length>0&&n.push("<Table>"+o+"</Table>"),n.push(iMe(s,e,t,r)),n.join("")}function fMe(t,e){e||(e={}),t.SSF||(t.SSF=Os(Tn)),t.SSF&&(v1(),oP(t.SSF),e.revssf=cP(t.SSF),e.revssf[t.SSF[65535]]=0,e.ssf=t.SSF,e.cellXfs=[],Qm(e.cellXfs,{},{revssf:{General:0}}));var r=[];r.push(tMe(t,e)),r.push(rMe()),r.push(""),r.push("");for(var n=0;n<t.SheetNames.length;++n)r.push(Ur("Worksheet",dMe(n,e,t),{"ss:Name":ts(t.SheetNames[n])}));return r[2]=nMe(t,e),r[3]=aMe(t),zi+Ur("Workbook",r.join(""),{xmlns:Iu.ss,"xmlns:o":Iu.o,"xmlns:x":Iu.x,"xmlns:ss":Iu.ss,"xmlns:dt":Iu.dt,"xmlns:html":Iu.html})}function hMe(t){var e={},r=t.content;if(r.l=28,e.AnsiUserType=r.read_shift(0,"lpstr-ansi"),e.AnsiClipboardFormat=a5e(r),r.length-r.l<=4)return e;var n=r.read_shift(4);if(n==0||n>40||(r.l-=4,e.Reserved1=r.read_shift(0,"lpstr-ansi"),r.length-r.l<=4)||(n=r.read_shift(4),n!==1907505652)||(e.UnicodeClipboardFormat=s5e(r),n=r.read_shift(4),n==0||n>40))return e;r.l-=4,e.Reserved2=r.read_shift(0,"lpwstr")}var AMe=[60,1084,2066,2165,2175];function mMe(t,e,r,n,a){var s=n,o=[],l=r.slice(r.l,r.l+s);if(a&&a.enc&&a.enc.insitu&&l.length>0)switch(t){case 9:case 521:case 1033:case 2057:case 47:case 405:case 225:case 406:case 312:case 404:case 10:break;case 133:break;default:a.enc.insitu(l)}o.push(l),r.l+=s;for(var c=Xh(r,r.l),u=nF[c],d=0;u!=null&&AMe.indexOf(c)>-1;)s=Xh(r,r.l+2),d=r.l+4,c==2066?d+=4:(c==2165||c==2175)&&(d+=12),l=r.slice(d,r.l+4+s),o.push(l),r.l+=4+s,u=nF[c=Xh(r,r.l)];var f=Xo(o);Cl(f,0);var A=0;f.lens=[];for(var h=0;h<o.length;++h)f.lens.push(A),A+=o[h].length;if(f.length<n)throw"XLS Record 0x"+t.toString(16)+" Truncated: "+f.length+" < "+n;return e.f(f,f.length,a)}function Mf(t,e,r){if(t.t!=="z"&&t.XF){var n=0;try{n=t.z||t.XF.numFmtId||0,e.cellNF&&(t.z=Tn[n])}catch(s){if(e.WTF)throw s}if(!e||e.cellText!==!1)try{t.t==="e"?t.w=t.w||RA[t.v]:n===0||n=="General"?t.t==="n"?(t.v|0)===t.v?t.w=t.v.toString(10):t.w=B2(t.v):t.w=dg(t.v):t.w=Od(n,t.v,{date1904:!!r,dateNF:e&&e.dateNF})}catch(s){if(e.WTF)throw s}if(e.cellDates&&n&&t.t=="n"&&x1(Tn[n]||String(n))){var a=_p(t.v);a&&(t.t="d",t.v=new Date(a.y,a.m-1,a.d,a.H,a.M,a.S,a.u))}}}function XC(t,e,r){return{v:t,ixfe:e,t:r}}function pMe(t,e){var r={opts:{}},n={},a=e.dense?[]:{},s={},o={},l=null,c=[],u="",d={},f,A="",h,m,p,x,v={},y=[],b,w,j=[],I=[],_={Sheets:[],WBProps:{date1904:!1},Views:[{}]},S={},E=function(ge){return ge<8?Lp[ge]:ge<64&&I[ge-8]||Lp[ge]},T=function(ge,q,se){var ye=q.XF.data;if(!(!ye||!ye.patternType||!se||!se.cellStyles)){q.s={},q.s.patternType=ye.patternType;var ue;(ue=D2(E(ye.icvFore)))&&(q.s.fgColor={rgb:ue}),(ue=D2(E(ye.icvBack)))&&(q.s.bgColor={rgb:ue})}},k=function(ge,q,se){if(!(ke>1)&&!(se.sheetRows&&ge.r>=se.sheetRows)){if(se.cellStyles&&q.XF&&q.XF.data&&T(ge,q,se),delete q.ixfe,delete q.XF,f=ge,A=On(ge),(!o||!o.s||!o.e)&&(o={s:{r:0,c:0},e:{r:0,c:0}}),ge.r<o.s.r&&(o.s.r=ge.r),ge.c<o.s.c&&(o.s.c=ge.c),ge.r+1>o.e.r&&(o.e.r=ge.r+1),ge.c+1>o.e.c&&(o.e.c=ge.c+1),se.cellFormula&&q.f){for(var ye=0;ye<y.length;++ye)if(!(y[ye][0].s.c>ge.c||y[ye][0].s.r>ge.r)&&!(y[ye][0].e.c<ge.c||y[ye][0].e.r<ge.r)){q.F=zn(y[ye][0]),(y[ye][0].s.c!=ge.c||y[ye][0].s.r!=ge.r)&&delete q.f,q.f&&(q.f=""+Zl(y[ye][1],o,ge,ae,B));break}}se.dense?(a[ge.r]||(a[ge.r]=[]),a[ge.r][ge.c]=q):a[A]=q}},B={enc:!1,sbcch:0,snames:[],sharedf:v,arrayf:y,rrtabid:[],lastuser:"",biff:8,codepage:0,winlocked:0,cellStyles:!!e&&!!e.cellStyles,WTF:!!e&&!!e.wtf};e.password&&(B.password=e.password);var D,X=[],me=[],pe=[],he=[],ve=!1,ae=[];ae.SheetNames=B.snames,ae.sharedf=B.sharedf,ae.arrayf=B.arrayf,ae.names=[],ae.XTI=[];var Pe=0,ke=0,O=0,G=[],z=[],U;B.codepage=1200,ff(1200);for(var Y=!1;t.l<t.length-1;){var ee=t.l,M=t.read_shift(2);if(M===0&&Pe===10)break;var H=t.l===t.length?0:t.read_shift(2),te=nF[M];if(te&&te.f){if(e.bookSheets&&Pe===133&&M!==133)break;if(Pe=M,te.r===2||te.r==12){var Ce=t.read_shift(2);if(H-=2,!B.enc&&Ce!==M&&((Ce&255)<<8|Ce>>8)!==M)throw new Error("rt mismatch: "+Ce+"!="+M);te.r==12&&(t.l+=10,H-=10)}var V={};if(M===10?V=te.f(t,H,B):V=mMe(M,te,t,H,B),ke==0&&[9,521,1033,2057].indexOf(Pe)===-1)continue;switch(M){case 34:r.opts.Date1904=_.WBProps.date1904=V;break;case 134:r.opts.WriteProtect=!0;break;case 47:if(B.enc||(t.l=0),B.enc=V,!e.password)throw new Error("File is password-protected");if(V.valid==null)throw new Error("Encryption scheme unsupported");if(!V.valid)throw new Error("Password is incorrect");break;case 92:B.lastuser=V;break;case 66:var We=Number(V);switch(We){case 21010:We=1200;break;case 32768:We=1e4;break;case 32769:We=1252;break}ff(B.codepage=We),Y=!0;break;case 317:B.rrtabid=V;break;case 25:B.winlocked=V;break;case 439:r.opts.RefreshAll=V;break;case 12:r.opts.CalcCount=V;break;case 16:r.opts.CalcDelta=V;break;case 17:r.opts.CalcIter=V;break;case 13:r.opts.CalcMode=V;break;case 14:r.opts.CalcPrecision=V;break;case 95:r.opts.CalcSaveRecalc=V;break;case 15:B.CalcRefMode=V;break;case 2211:r.opts.FullCalc=V;break;case 129:V.fDialog&&(a["!type"]="dialog"),V.fBelow||((a["!outline"]||(a["!outline"]={})).above=!0),V.fRight||((a["!outline"]||(a["!outline"]={})).left=!0);break;case 224:j.push(V);break;case 430:ae.push([V]),ae[ae.length-1].XTI=[];break;case 35:case 547:ae[ae.length-1].push(V);break;case 24:case 536:U={Name:V.Name,Ref:Zl(V.rgce,o,null,ae,B)},V.itab>0&&(U.Sheet=V.itab-1),ae.names.push(U),ae[0]||(ae[0]=[],ae[0].XTI=[]),ae[ae.length-1].push(V),V.Name=="_xlnm._FilterDatabase"&&V.itab>0&&V.rgce&&V.rgce[0]&&V.rgce[0][0]&&V.rgce[0][0][0]=="PtgArea3d"&&(z[V.itab-1]={ref:zn(V.rgce[0][0][1][2])});break;case 22:B.ExternCount=V;break;case 23:ae.length==0&&(ae[0]=[],ae[0].XTI=[]),ae[ae.length-1].XTI=ae[ae.length-1].XTI.concat(V),ae.XTI=ae.XTI.concat(V);break;case 2196:if(B.biff<8)break;U!=null&&(U.Comment=V[1]);break;case 18:a["!protect"]=V;break;case 19:V!==0&&B.WTF&&console.error("Password verifier: "+V);break;case 133:s[V.pos]=V,B.snames.push(V.name);break;case 10:{if(--ke)break;if(o.e){if(o.e.r>0&&o.e.c>0){if(o.e.r--,o.e.c--,a["!ref"]=zn(o),e.sheetRows&&e.sheetRows<=o.e.r){var ie=o.e.r;o.e.r=e.sheetRows-1,a["!fullref"]=a["!ref"],a["!ref"]=zn(o),o.e.r=ie}o.e.r++,o.e.c++}X.length>0&&(a["!merges"]=X),me.length>0&&(a["!objects"]=me),pe.length>0&&(a["!cols"]=pe),he.length>0&&(a["!rows"]=he),_.Sheets.push(S)}u===""?d=a:n[u]=a,a=e.dense?[]:{}}break;case 9:case 521:case 1033:case 2057:{if(B.biff===8&&(B.biff={9:2,521:3,1033:4}[M]||{512:2,768:3,1024:4,1280:5,1536:8,2:2,7:2}[V.BIFFVer]||8),B.biffguess=V.BIFFVer==0,V.BIFFVer==0&&V.dt==4096&&(B.biff=5,Y=!0,ff(B.codepage=28591)),B.biff==8&&V.BIFFVer==0&&V.dt==16&&(B.biff=2),ke++)break;if(a=e.dense?[]:{},B.biff<8&&!Y&&(Y=!0,ff(B.codepage=e.codepage||1252)),B.biff<5||V.BIFFVer==0&&V.dt==4096){u===""&&(u="Sheet1"),o={s:{r:0,c:0},e:{r:0,c:0}};var J={pos:t.l-H,name:u};s[J.pos]=J,B.snames.push(u)}else u=(s[ee]||{name:""}).name;V.dt==32&&(a["!type"]="chart"),V.dt==64&&(a["!type"]="macro"),X=[],me=[],B.arrayf=y=[],pe=[],he=[],ve=!1,S={Hidden:(s[ee]||{hs:0}).hs,name:u}}break;case 515:case 3:case 2:a["!type"]=="chart"&&(e.dense?(a[V.r]||[])[V.c]:a[On({c:V.c,r:V.r})])&&++V.c,b={ixfe:V.ixfe,XF:j[V.ixfe]||{},v:V.val,t:"n"},O>0&&(b.z=G[b.ixfe>>8&63]),Mf(b,e,r.opts.Date1904),k({c:V.c,r:V.r},b,e);break;case 5:case 517:b={ixfe:V.ixfe,XF:j[V.ixfe],v:V.val,t:V.t},O>0&&(b.z=G[b.ixfe>>8&63]),Mf(b,e,r.opts.Date1904),k({c:V.c,r:V.r},b,e);break;case 638:b={ixfe:V.ixfe,XF:j[V.ixfe],v:V.rknum,t:"n"},O>0&&(b.z=G[b.ixfe>>8&63]),Mf(b,e,r.opts.Date1904),k({c:V.c,r:V.r},b,e);break;case 189:for(var Oe=V.c;Oe<=V.C;++Oe){var fe=V.rkrec[Oe-V.c][0];b={ixfe:fe,XF:j[fe],v:V.rkrec[Oe-V.c][1],t:"n"},O>0&&(b.z=G[b.ixfe>>8&63]),Mf(b,e,r.opts.Date1904),k({c:Oe,r:V.r},b,e)}break;case 6:case 518:case 1030:{if(V.val=="String"){l=V;break}if(b=XC(V.val,V.cell.ixfe,V.tt),b.XF=j[b.ixfe],e.cellFormula){var _e=V.formula;if(_e&&_e[0]&&_e[0][0]&&_e[0][0][0]=="PtgExp"){var Ue=_e[0][0][1][0],Ye=_e[0][0][1][1],At=On({r:Ue,c:Ye});v[At]?b.f=""+Zl(V.formula,o,V.cell,ae,B):b.F=((e.dense?(a[Ue]||[])[Ye]:a[At])||{}).F}else b.f=""+Zl(V.formula,o,V.cell,ae,B)}O>0&&(b.z=G[b.ixfe>>8&63]),Mf(b,e,r.opts.Date1904),k(V.cell,b,e),l=V}break;case 7:case 519:if(l)l.val=V,b=XC(V,l.cell.ixfe,"s"),b.XF=j[b.ixfe],e.cellFormula&&(b.f=""+Zl(l.formula,o,l.cell,ae,B)),O>0&&(b.z=G[b.ixfe>>8&63]),Mf(b,e,r.opts.Date1904),k(l.cell,b,e),l=null;else throw new Error("String record expects Formula");break;case 33:case 545:{y.push(V);var yt=On(V[0].s);if(h=e.dense?(a[V[0].s.r]||[])[V[0].s.c]:a[yt],e.cellFormula&&h){if(!l||!yt||!h)break;h.f=""+Zl(V[1],o,V[0],ae,B),h.F=zn(V[0])}}break;case 1212:{if(!e.cellFormula)break;if(A){if(!l)break;v[On(l.cell)]=V[0],h=e.dense?(a[l.cell.r]||[])[l.cell.c]:a[On(l.cell)],(h||{}).f=""+Zl(V[0],o,f,ae,B)}}break;case 253:b=XC(c[V.isst].t,V.ixfe,"s"),c[V.isst].h&&(b.h=c[V.isst].h),b.XF=j[b.ixfe],O>0&&(b.z=G[b.ixfe>>8&63]),Mf(b,e,r.opts.Date1904),k({c:V.c,r:V.r},b,e);break;case 513:e.sheetStubs&&(b={ixfe:V.ixfe,XF:j[V.ixfe],t:"z"},O>0&&(b.z=G[b.ixfe>>8&63]),Mf(b,e,r.opts.Date1904),k({c:V.c,r:V.r},b,e));break;case 190:if(e.sheetStubs)for(var bt=V.c;bt<=V.C;++bt){var Nt=V.ixfe[bt-V.c];b={ixfe:Nt,XF:j[Nt],t:"z"},O>0&&(b.z=G[b.ixfe>>8&63]),Mf(b,e,r.opts.Date1904),k({c:bt,r:V.r},b,e)}break;case 214:case 516:case 4:b=XC(V.val,V.ixfe,"s"),b.XF=j[b.ixfe],O>0&&(b.z=G[b.ixfe>>8&63]),Mf(b,e,r.opts.Date1904),k({c:V.c,r:V.r},b,e);break;case 0:case 512:ke===1&&(o=V);break;case 252:c=V;break;case 1054:if(B.biff==4){G[O++]=V[1];for(var jt=0;jt<O+163&&Tn[jt]!=V[1];++jt);jt>=163&&oA(V[1],O+163)}else oA(V[1],V[0]);break;case 30:{G[O++]=V;for(var St=0;St<O+163&&Tn[St]!=V;++St);St>=163&&oA(V,O+163)}break;case 229:X=X.concat(V);break;case 93:me[V.cmo[0]]=B.lastobj=V;break;case 438:B.lastobj.TxO=V;break;case 127:B.lastobj.ImData=V;break;case 440:for(x=V[0].s.r;x<=V[0].e.r;++x)for(p=V[0].s.c;p<=V[0].e.c;++p)h=e.dense?(a[x]||[])[p]:a[On({c:p,r:x})],h&&(h.l=V[1]);break;case 2048:for(x=V[0].s.r;x<=V[0].e.r;++x)for(p=V[0].s.c;p<=V[0].e.c;++p)h=e.dense?(a[x]||[])[p]:a[On({c:p,r:x})],h&&h.l&&(h.l.Tooltip=V[1]);break;case 28:{if(B.biff<=5&&B.biff>=2)break;h=e.dense?(a[V[0].r]||[])[V[0].c]:a[On(V[0])];var Ve=me[V[2]];h||(e.dense?(a[V[0].r]||(a[V[0].r]=[]),h=a[V[0].r][V[0].c]={t:"z"}):h=a[On(V[0])]={t:"z"},o.e.r=Math.max(o.e.r,V[0].r),o.s.r=Math.min(o.s.r,V[0].r),o.e.c=Math.max(o.e.c,V[0].c),o.s.c=Math.min(o.s.c,V[0].c)),h.c||(h.c=[]),m={a:V[1],t:Ve.TxO.t},h.c.push(m)}break;case 2173:nFe(j[V.ixfe],V.ext);break;case 125:{if(!B.cellStyles)break;for(;V.e>=V.s;)pe[V.e--]={width:V.w/256,level:V.level||0,hidden:!!(V.flags&1)},ve||(ve=!0,vR(V.w/256)),Sm(pe[V.e+1])}break;case 520:{var Te={};V.level!=null&&(he[V.r]=Te,Te.level=V.level),V.hidden&&(he[V.r]=Te,Te.hidden=!0),V.hpt&&(he[V.r]=Te,Te.hpt=V.hpt,Te.hpx=Qv(V.hpt))}break;case 38:case 39:case 40:case 41:a["!margins"]||Vp(a["!margins"]={}),a["!margins"][{38:"left",39:"right",40:"top",41:"bottom"}[M]]=V;break;case 161:a["!margins"]||Vp(a["!margins"]={}),a["!margins"].header=V.header,a["!margins"].footer=V.footer;break;case 574:V.RTL&&(_.Views[0].RTL=!0);break;case 146:I=V;break;case 2198:D=V;break;case 140:w=V;break;case 442:u?S.CodeName=V||S.name:_.WBProps.CodeName=V||"ThisWorkbook";break}}else te||console.error("Missing Info for XLS Record 0x"+M.toString(16)),t.l+=H}return r.SheetNames=Ii(s).sort(function(qe,ge){return Number(qe)-Number(ge)}).map(function(qe){return s[qe].name}),e.bookSheets||(r.Sheets=n),!r.SheetNames.length&&d["!ref"]?(r.SheetNames.push("Sheet1"),r.Sheets&&(r.Sheets.Sheet1=d)):r.Preamble=d,r.Sheets&&z.forEach(function(qe,ge){r.Sheets[r.SheetNames[ge]]["!autofilter"]=qe}),r.Strings=c,r.SSF=Os(Tn),B.enc&&(r.Encryption=B.enc),D&&(r.Themes=D),r.Metadata={},w!==void 0&&(r.Metadata.Country=w),ae.names.length>0&&(_.Names=ae.names),r.Workbook=_,r}var Mb={SI:"e0859ff2f94f6810ab9108002b27b3d9",DSI:"02d5cdd59c2e1b10939708002b2cf9ae",UDI:"05d5cdd59c2e1b10939708002b2cf9ae"};function gMe(t,e,r){var n=_n.find(t,"/!DocumentSummaryInformation");if(n&&n.size>0)try{var a=LH(n,Xk,Mb.DSI);for(var s in a)e[s]=a[s]}catch(u){if(r.WTF)throw u}var o=_n.find(t,"/!SummaryInformation");if(o&&o.size>0)try{var l=LH(o,Yk,Mb.SI);for(var c in l)e[c]==null&&(e[c]=l[c])}catch(u){if(r.WTF)throw u}e.HeadingPairs&&e.TitlesOfParts&&(Zne(e.HeadingPairs,e.TitlesOfParts,e,r),delete e.HeadingPairs,delete e.TitlesOfParts)}function xMe(t,e){var r=[],n=[],a=[],s=0,o,l=mH(Xk,"n"),c=mH(Yk,"n");if(t.Props)for(o=Ii(t.Props),s=0;s<o.length;++s)(Object.prototype.hasOwnProperty.call(l,o[s])?r:Object.prototype.hasOwnProperty.call(c,o[s])?n:a).push([o[s],t.Props[o[s]]]);if(t.Custprops)for(o=Ii(t.Custprops),s=0;s<o.length;++s)Object.prototype.hasOwnProperty.call(t.Props||{},o[s])||(Object.prototype.hasOwnProperty.call(l,o[s])?r:Object.prototype.hasOwnProperty.call(c,o[s])?n:a).push([o[s],t.Custprops[o[s]]]);var u=[];for(s=0;s<a.length;++s)iae.indexOf(a[s][0])>-1||Jne.indexOf(a[s][0])>-1||a[s][1]!=null&&u.push(a[s]);n.length&&_n.utils.cfb_add(e,"/SummaryInformation",UH(n,Mb.SI,c,Yk)),(r.length||u.length)&&_n.utils.cfb_add(e,"/DocumentSummaryInformation",UH(r,Mb.DSI,l,Xk,u.length?u:null,Mb.UDI))}function tse(t,e){e||(e={}),IR(e),W6(),e.codepage&&z6(e.codepage);var r,n;if(t.FullPaths){if(_n.find(t,"/encryption"))throw new Error("File is password-protected");r=_n.find(t,"!CompObj"),n=_n.find(t,"/Workbook")||_n.find(t,"/Book")}else{switch(e.type){case"base64":t=Pu(Hu(t));break;case"binary":t=Pu(t);break;case"buffer":break;case"array":Array.isArray(t)||(t=Array.prototype.slice.call(t));break}Cl(t,0),n={content:t}}var a,s;if(r&&hMe(r),e.bookProps&&!e.bookSheets)a={};else{var o=ea?"buffer":"array";if(n&&n.content)a=pMe(n.content,e);else if((s=_n.find(t,"PerfectOffice_MAIN"))&&s.content)a=Qp.to_workbook(s.content,(e.type=o,e));else if((s=_n.find(t,"NativeContent_MAIN"))&&s.content)a=Qp.to_workbook(s.content,(e.type=o,e));else throw(s=_n.find(t,"MN0"))&&s.content?new Error("Unsupported Works 4 for Mac file"):new Error("Cannot find Workbook stream");e.bookVBA&&t.FullPaths&&_n.find(t,"/_VBA_PROJECT_CUR/VBA/dir")&&(a.vbaraw=BFe(t))}var l={};return t.FullPaths&&gMe(t,l,e),a.Props=a.Custprops=l,e.bookFiles&&(a.cfb=t),a}function vMe(t,e){var r=e||{},n=_n.utils.cfb_new({root:"R"}),a="/Workbook";switch(r.bookType||"xls"){case"xls":r.bookType="biff8";case"xla":r.bookType||(r.bookType="xla");case"biff8":a="/Workbook",r.biff=8;break;case"biff5":a="/Book",r.biff=5;break;default:throw new Error("invalid type "+r.bookType+" for XLS CFB")}return _n.utils.cfb_add(n,a,rse(t,r)),r.biff==8&&(t.Props||t.Custprops)&&xMe(t,n),r.biff==8&&t.vbaraw&&TFe(n,_n.read(t.vbaraw,{type:typeof t.vbaraw=="string"?"binary":"buffer"})),n}var U2={0:{f:HDe},1:{f:YDe},2:{f:p6e},3:{f:s6e},4:{f:t6e},5:{f:h6e},6:{f:b6e},7:{f:c6e},8:{f:I6e},9:{f:S6e},10:{f:_6e},11:{f:E6e},12:{f:ZDe},13:{f:x6e},14:{f:o6e},15:{f:n6e},16:{f:qae},17:{f:N6e},18:{f:d6e},19:{f:cR},20:{},21:{},22:{},23:{},24:{},25:{},26:{},27:{},28:{},29:{},30:{},31:{},32:{},33:{},34:{},35:{T:1},36:{T:-1},37:{T:1},38:{T:-1},39:{f:NRe},40:{},42:{},43:{f:bke},44:{f:vke},45:{f:Cke},46:{f:Eke},47:{f:_ke},48:{},49:{f:K3e},50:{},51:{f:iFe},52:{T:1},53:{T:-1},54:{T:1},55:{T:-1},56:{T:1},57:{T:-1},58:{},59:{},60:{f:gae},62:{f:y6e},63:{f:mFe},64:{f:$6e},65:{},66:{},67:{},68:{},69:{},70:{},128:{},129:{T:1},130:{T:-1},131:{T:1,f:oc,p:0},132:{T:-1},133:{T:1},134:{T:-1},135:{T:1},136:{T:-1},137:{T:1,f:U6e},138:{T:-1},139:{T:1},140:{T:-1},141:{T:1},142:{T:-1},143:{T:1},144:{T:-1},145:{T:1},146:{T:-1},147:{f:WDe},148:{f:KDe,p:16},151:{f:F6e},152:{},153:{f:yRe},154:{},155:{},156:{f:xRe},157:{},158:{},159:{T:1,f:DTe},160:{T:-1},161:{T:1,f:Ug},162:{T:-1},163:{T:1},164:{T:-1},165:{T:1},166:{T:-1},167:{},168:{},169:{},170:{},171:{},172:{T:1},173:{T:-1},174:{},175:{},176:{f:j6e},177:{T:1},178:{T:-1},179:{T:1},180:{T:-1},181:{T:1},182:{T:-1},183:{T:1},184:{T:-1},185:{T:1},186:{T:-1},187:{T:1},188:{T:-1},189:{T:1},190:{T:-1},191:{T:1},192:{T:-1},193:{T:1},194:{T:-1},195:{T:1},196:{T:-1},197:{T:1},198:{T:-1},199:{T:1},200:{T:-1},201:{T:1},202:{T:-1},203:{T:1},204:{T:-1},205:{T:1},206:{T:-1},207:{T:1},208:{T:-1},209:{T:1},210:{T:-1},211:{T:1},212:{T:-1},213:{T:1},214:{T:-1},215:{T:1},216:{T:-1},217:{T:1},218:{T:-1},219:{T:1},220:{T:-1},221:{T:1},222:{T:-1},223:{T:1},224:{T:-1},225:{T:1},226:{T:-1},227:{T:1},228:{T:-1},229:{T:1},230:{T:-1},231:{T:1},232:{T:-1},233:{T:1},234:{T:-1},235:{T:1},236:{T:-1},237:{T:1},238:{T:-1},239:{T:1},240:{T:-1},241:{T:1},242:{T:-1},243:{T:1},244:{T:-1},245:{T:1},246:{T:-1},247:{T:1},248:{T:-1},249:{T:1},250:{T:-1},251:{T:1},252:{T:-1},253:{T:1},254:{T:-1},255:{T:1},256:{T:-1},257:{T:1},258:{T:-1},259:{T:1},260:{T:-1},261:{T:1},262:{T:-1},263:{T:1},264:{T:-1},265:{T:1},266:{T:-1},267:{T:1},268:{T:-1},269:{T:1},270:{T:-1},271:{T:1},272:{T:-1},273:{T:1},274:{T:-1},275:{T:1},276:{T:-1},277:{},278:{T:1},279:{T:-1},280:{T:1},281:{T:-1},282:{T:1},283:{T:1},284:{T:-1},285:{T:1},286:{T:-1},287:{T:1},288:{T:-1},289:{T:1},290:{T:-1},291:{T:1},292:{T:-1},293:{T:1},294:{T:-1},295:{T:1},296:{T:-1},297:{T:1},298:{T:-1},299:{T:1},300:{T:-1},301:{T:1},302:{T:-1},303:{T:1},304:{T:-1},305:{T:1},306:{T:-1},307:{T:1},308:{T:-1},309:{T:1},310:{T:-1},311:{T:1},312:{T:-1},313:{T:-1},314:{T:1},315:{T:-1},316:{T:1},317:{T:-1},318:{T:1},319:{T:-1},320:{T:1},321:{T:-1},322:{T:1},323:{T:-1},324:{T:1},325:{T:-1},326:{T:1},327:{T:-1},328:{T:1},329:{T:-1},330:{T:1},331:{T:-1},332:{T:1},333:{T:-1},334:{T:1},335:{f:aFe},336:{T:-1},337:{f:cFe,T:1},338:{T:-1},339:{T:1},340:{T:-1},341:{T:1},342:{T:-1},343:{T:1},344:{T:-1},345:{T:1},346:{T:-1},347:{T:1},348:{T:-1},349:{T:1},350:{T:-1},351:{},352:{},353:{T:1},354:{T:-1},355:{f:Wk},357:{},358:{},359:{},360:{T:1},361:{},362:{f:pae},363:{},364:{},366:{},367:{},368:{},369:{},370:{},371:{},372:{T:1},373:{T:-1},374:{T:1},375:{T:-1},376:{T:1},377:{T:-1},378:{T:1},379:{T:-1},380:{T:1},381:{T:-1},382:{T:1},383:{T:-1},384:{T:1},385:{T:-1},386:{T:1},387:{T:-1},388:{T:1},389:{T:-1},390:{T:1},391:{T:-1},392:{T:1},393:{T:-1},394:{T:1},395:{T:-1},396:{},397:{},398:{},399:{},400:{},401:{T:1},403:{},404:{},405:{},406:{},407:{},408:{},409:{},410:{},411:{},412:{},413:{},414:{},415:{},416:{},417:{},418:{},419:{},420:{},421:{},422:{T:1},423:{T:1},424:{T:-1},425:{T:-1},426:{f:O6e},427:{f:D6e},428:{},429:{T:1},430:{T:-1},431:{T:1},432:{T:-1},433:{T:1},434:{T:-1},435:{T:1},436:{T:-1},437:{T:1},438:{T:-1},439:{T:1},440:{T:-1},441:{T:1},442:{T:-1},443:{T:1},444:{T:-1},445:{T:1},446:{T:-1},447:{T:1},448:{T:-1},449:{T:1},450:{T:-1},451:{T:1},452:{T:-1},453:{T:1},454:{T:-1},455:{T:1},456:{T:-1},457:{T:1},458:{T:-1},459:{T:1},460:{T:-1},461:{T:1},462:{T:-1},463:{T:1},464:{T:-1},465:{T:1},466:{T:-1},467:{T:1},468:{T:-1},469:{T:1},470:{T:-1},471:{},472:{},473:{T:1},474:{T:-1},475:{},476:{f:M6e},477:{},478:{},479:{T:1},480:{T:-1},481:{T:1},482:{T:-1},483:{T:1},484:{T:-1},485:{f:zDe},486:{T:1},487:{T:-1},488:{T:1},489:{T:-1},490:{T:1},491:{T:-1},492:{T:1},493:{T:-1},494:{f:T6e},495:{T:1},496:{T:-1},497:{T:1},498:{T:-1},499:{},500:{T:1},501:{T:-1},502:{T:1},503:{T:-1},504:{},505:{T:1},506:{T:-1},507:{},508:{T:1},509:{T:-1},510:{T:1},511:{T:-1},512:{},513:{},514:{T:1},515:{T:-1},516:{T:1},517:{T:-1},518:{T:1},519:{T:-1},520:{T:1},521:{T:-1},522:{},523:{},524:{},525:{},526:{},527:{},528:{T:1},529:{T:-1},530:{T:1},531:{T:-1},532:{T:1},533:{T:-1},534:{},535:{},536:{},537:{},538:{T:1},539:{T:-1},540:{T:1},541:{T:-1},542:{T:1},548:{},549:{},550:{f:Wk},551:{},552:{},553:{},554:{T:1},555:{T:-1},556:{T:1},557:{T:-1},558:{T:1},559:{T:-1},560:{T:1},561:{T:-1},562:{},564:{},565:{T:1},566:{T:-1},569:{T:1},570:{T:-1},572:{},573:{T:1},574:{T:-1},577:{},578:{},579:{},580:{},581:{},582:{},583:{},584:{},585:{},586:{},587:{},588:{T:-1},589:{},590:{T:1},591:{T:-1},592:{T:1},593:{T:-1},594:{T:1},595:{T:-1},596:{},597:{T:1},598:{T:-1},599:{T:1},600:{T:-1},601:{T:1},602:{T:-1},603:{T:1},604:{T:-1},605:{T:1},606:{T:-1},607:{},608:{T:1},609:{T:-1},610:{},611:{T:1},612:{T:-1},613:{T:1},614:{T:-1},615:{T:1},616:{T:-1},617:{T:1},618:{T:-1},619:{T:1},620:{T:-1},625:{},626:{T:1},627:{T:-1},628:{T:1},629:{T:-1},630:{T:1},631:{T:-1},632:{f:EFe},633:{T:1},634:{T:-1},635:{T:1,f:CFe},636:{T:-1},637:{f:X3e},638:{T:1},639:{},640:{T:-1},641:{T:1},642:{T:-1},643:{T:1},644:{},645:{T:-1},646:{T:1},648:{T:1},649:{},650:{T:-1},651:{f:oRe},652:{},653:{T:1},654:{T:-1},655:{T:1},656:{T:-1},657:{T:1},658:{T:-1},659:{},660:{T:1},661:{},662:{T:-1},663:{},664:{T:1},665:{},666:{T:-1},667:{},668:{},669:{},671:{T:1},672:{T:-1},673:{T:1},674:{T:-1},675:{},676:{},677:{},678:{},679:{},680:{},681:{},1024:{},1025:{},1026:{T:1},1027:{T:-1},1028:{T:1},1029:{T:-1},1030:{},1031:{T:1},1032:{T:-1},1033:{T:1},1034:{T:-1},1035:{},1036:{},1037:{},1038:{T:1},1039:{T:-1},1040:{},1041:{T:1},1042:{T:-1},1043:{},1044:{},1045:{},1046:{T:1},1047:{T:-1},1048:{T:1},1049:{T:-1},1050:{},1051:{T:1},1052:{T:1},1053:{f:G6e},1054:{T:1},1055:{},1056:{T:1},1057:{T:-1},1058:{T:1},1059:{T:-1},1061:{},1062:{T:1},1063:{T:-1},1064:{T:1},1065:{T:-1},1066:{T:1},1067:{T:-1},1068:{T:1},1069:{T:-1},1070:{T:1},1071:{T:-1},1072:{T:1},1073:{T:-1},1075:{T:1},1076:{T:-1},1077:{T:1},1078:{T:-1},1079:{T:1},1080:{T:-1},1081:{T:1},1082:{T:-1},1083:{T:1},1084:{T:-1},1085:{},1086:{T:1},1087:{T:-1},1088:{T:1},1089:{T:-1},1090:{T:1},1091:{T:-1},1092:{T:1},1093:{T:-1},1094:{T:1},1095:{T:-1},1096:{},1097:{T:1},1098:{},1099:{T:-1},1100:{T:1},1101:{T:-1},1102:{},1103:{},1104:{},1105:{},1111:{},1112:{},1113:{T:1},1114:{T:-1},1115:{T:1},1116:{T:-1},1117:{},1118:{T:1},1119:{T:-1},1120:{T:1},1121:{T:-1},1122:{T:1},1123:{T:-1},1124:{T:1},1125:{T:-1},1126:{},1128:{T:1},1129:{T:-1},1130:{},1131:{T:1},1132:{T:-1},1133:{T:1},1134:{T:-1},1135:{T:1},1136:{T:-1},1137:{T:1},1138:{T:-1},1139:{T:1},1140:{T:-1},1141:{},1142:{T:1},1143:{T:-1},1144:{T:1},1145:{T:-1},1146:{},1147:{T:1},1148:{T:-1},1149:{T:1},1150:{T:-1},1152:{T:1},1153:{T:-1},1154:{T:-1},1155:{T:-1},1156:{T:-1},1157:{T:1},1158:{T:-1},1159:{T:1},1160:{T:-1},1161:{T:1},1162:{T:-1},1163:{T:1},1164:{T:-1},1165:{T:1},1166:{T:-1},1167:{T:1},1168:{T:-1},1169:{T:1},1170:{T:-1},1171:{},1172:{T:1},1173:{T:-1},1177:{},1178:{T:1},1180:{},1181:{},1182:{},2048:{T:1},2049:{T:-1},2050:{},2051:{T:1},2052:{T:-1},2053:{},2054:{},2055:{T:1},2056:{T:-1},2057:{T:1},2058:{T:-1},2060:{},2067:{},2068:{T:1},2069:{T:-1},2070:{},2071:{},2072:{T:1},2073:{T:-1},2075:{},2076:{},2077:{T:1},2078:{T:-1},2079:{},2080:{T:1},2081:{T:-1},2082:{},2083:{T:1},2084:{T:-1},2085:{T:1},2086:{T:-1},2087:{T:1},2088:{T:-1},2089:{T:1},2090:{T:-1},2091:{},2092:{},2093:{T:1},2094:{T:-1},2095:{},2096:{T:1},2097:{T:-1},2098:{T:1},2099:{T:-1},2100:{T:1},2101:{T:-1},2102:{},2103:{T:1},2104:{T:-1},2105:{},2106:{T:1},2107:{T:-1},2108:{},2109:{T:1},2110:{T:-1},2111:{T:1},2112:{T:-1},2113:{T:1},2114:{T:-1},2115:{},2116:{},2117:{},2118:{T:1},2119:{T:-1},2120:{},2121:{T:1},2122:{T:-1},2123:{T:1},2124:{T:-1},2125:{},2126:{T:1},2127:{T:-1},2128:{},2129:{T:1},2130:{T:-1},2131:{T:1},2132:{T:-1},2133:{T:1},2134:{},2135:{},2136:{},2137:{T:1},2138:{T:-1},2139:{T:1},2140:{T:-1},2141:{},3072:{},3073:{},4096:{T:1},4097:{T:-1},5002:{T:1},5003:{T:-1},5081:{T:1},5082:{T:-1},5083:{},5084:{T:1},5085:{T:-1},5086:{T:1},5087:{T:-1},5088:{},5089:{},5090:{},5092:{T:1},5093:{T:-1},5094:{},5095:{T:1},5096:{T:-1},5097:{},5099:{},65535:{n:""}},nF={6:{f:k5},10:{f:h0},12:{f:to},13:{f:to},14:{f:Di},15:{f:Di},16:{f:rc},17:{f:Di},18:{f:Di},19:{f:to},20:{f:KH},21:{f:KH},23:{f:pae},24:{f:zH},25:{f:Di},26:{},27:{},28:{f:GBe},29:{},34:{f:Di},35:{f:qH},38:{f:rc},39:{f:rc},40:{f:rc},41:{f:rc},42:{f:Di},43:{f:Di},47:{f:nke},49:{f:xBe},51:{f:to},60:{},61:{f:hBe},64:{f:Di},65:{f:gBe},66:{f:to},77:{},80:{},81:{},82:{},85:{f:to},89:{},90:{},91:{},92:{f:rBe},93:{f:zBe},94:{},95:{f:Di},96:{},97:{},99:{f:Di},125:{f:gae},128:{f:kBe},129:{f:aBe},130:{f:to},131:{f:Di},132:{f:Di},133:{f:sBe},134:{},140:{f:rTe},141:{f:to},144:{},146:{f:sTe},151:{},152:{},153:{},154:{},155:{},156:{f:to},157:{},158:{},160:{f:fTe},161:{f:lTe},174:{},175:{},176:{},177:{},178:{},180:{},181:{},182:{},184:{},185:{},189:{f:jBe},190:{f:PBe},193:{f:h0},197:{},198:{},199:{},200:{},201:{},202:{f:Di},203:{},204:{},205:{},206:{},207:{},208:{},209:{},210:{},211:{},213:{},215:{},216:{},217:{},218:{f:to},220:{},221:{f:Di},222:{},224:{f:TBe},225:{f:tBe},226:{f:h0},227:{},229:{f:KBe},233:{},235:{},236:{},237:{},239:{},240:{},241:{},242:{},244:{},245:{},246:{},247:{},248:{},249:{},251:{},252:{f:oBe},253:{f:yBe},255:{f:cBe},256:{},259:{},290:{},311:{},312:{},315:{},317:{f:oae},318:{},319:{},320:{},330:{},331:{},333:{},334:{},335:{},336:{},337:{},338:{},339:{},340:{},351:{},352:{f:Di},353:{f:h0},401:{},402:{},403:{},404:{},405:{},406:{},407:{},408:{},425:{},426:{},427:{},428:{},429:{},430:{f:MBe},431:{f:Di},432:{},433:{},434:{},437:{},438:{f:YBe},439:{f:Di},440:{f:JBe},441:{},442:{f:Uw},443:{},444:{f:to},445:{},446:{},448:{f:h0},449:{f:fBe,r:2},450:{f:h0},512:{f:HH},513:{f:dTe},515:{f:DBe},516:{f:wBe},517:{f:GH},519:{f:hTe},520:{f:uBe},523:{},545:{f:WH},549:{f:VH},566:{},574:{f:mBe},638:{f:IBe},659:{},1048:{},1054:{f:CBe},1084:{},1212:{f:VBe},2048:{f:eTe},2049:{},2050:{},2051:{},2052:{},2053:{},2054:{},2055:{},2056:{},2057:{f:qC},2058:{},2059:{},2060:{},2061:{},2062:{},2063:{},2064:{},2066:{},2067:{},2128:{},2129:{},2130:{},2131:{},2132:{},2133:{},2134:{},2135:{},2136:{},2137:{},2138:{},2146:{},2147:{r:12},2148:{},2149:{},2150:{},2151:{f:h0},2152:{},2154:{},2155:{},2156:{},2161:{},2162:{},2164:{},2165:{},2166:{},2167:{},2168:{},2169:{},2170:{},2171:{},2172:{f:iTe,r:12},2173:{f:rFe,r:12},2174:{},2175:{},2180:{},2181:{},2182:{},2183:{},2184:{},2185:{},2186:{},2187:{},2188:{f:Di,r:12},2189:{},2190:{r:12},2191:{},2192:{},2194:{},2195:{},2196:{f:QBe,r:12},2197:{},2198:{f:Xke,r:12},2199:{},2200:{},2201:{},2202:{f:HBe,r:12},2203:{f:h0},2204:{},2205:{},2206:{},2207:{},2211:{f:dBe},2212:{},2213:{},2214:{},2215:{},4097:{},4098:{},4099:{},4102:{},4103:{},4105:{},4106:{},4107:{},4108:{},4109:{},4116:{},4117:{},4118:{},4119:{},4120:{},4121:{},4122:{},4123:{},4124:{},4125:{},4126:{},4127:{},4128:{},4129:{},4130:{},4132:{},4133:{},4134:{f:to},4135:{},4146:{},4147:{},4148:{},4149:{},4154:{},4156:{},4157:{},4158:{},4159:{},4160:{},4161:{},4163:{},4164:{f:cTe},4165:{},4166:{},4168:{},4170:{},4171:{},4174:{},4175:{},4176:{},4177:{},4187:{},4188:{f:aTe},4189:{},4191:{},4192:{},4193:{},4194:{},4195:{},4196:{},4197:{},4198:{},4199:{},4200:{},0:{f:HH},1:{},2:{f:xTe},3:{f:pTe},4:{f:mTe},5:{f:GH},7:{f:yTe},8:{},9:{f:qC},11:{},22:{f:to},30:{f:EBe},31:{},32:{},33:{f:WH},36:{},37:{f:VH},50:{f:bTe},62:{},52:{},67:{},68:{f:to},69:{},86:{},126:{},127:{f:ATe},135:{},136:{},137:{},145:{},148:{},149:{},150:{},169:{},171:{},188:{},191:{},192:{},194:{},195:{},214:{f:wTe},223:{},234:{},354:{},421:{},518:{f:k5},521:{f:qC},536:{f:zH},547:{f:qH},561:{},579:{},1030:{f:k5},1033:{f:qC},1091:{},2157:{},2163:{},2177:{},2240:{},2241:{},2242:{},2243:{},2244:{},2245:{},2246:{},2247:{},2248:{},2249:{},2250:{},2251:{},2262:{r:12},29282:{}};function Vr(t,e,r,n){var a=e;if(!isNaN(a)){var s=n||(r||[]).length||0,o=t.next(4);o.write_shift(2,a),o.write_shift(2,s),s>0&&iR(r)&&t.push(r)}}function yMe(t,e,r,n){var a=(r||[]).length||0;if(a<=8224)return Vr(t,e,r,a);var s=e;if(!isNaN(s)){for(var o=r.parts||[],l=0,c=0,u=0;u+(o[l]||8224)<=8224;)u+=o[l]||8224,l++;var d=t.next(4);for(d.write_shift(2,s),d.write_shift(2,u),t.push(r.slice(c,c+u)),c+=u;c<a;){for(d=t.next(4),d.write_shift(2,60),u=0;u+(o[l]||8224)<=8224;)u+=o[l]||8224,l++;d.write_shift(2,u),t.push(r.slice(c,c+u)),c+=u}}}function $w(t,e,r){return t||(t=nr(7)),t.write_shift(2,e),t.write_shift(2,r),t.write_shift(2,0),t.write_shift(1,0),t}function bMe(t,e,r,n){var a=nr(9);return $w(a,t,e),lae(r,n||"b",a),a}function wMe(t,e,r){var n=nr(8+2*r.length);return $w(n,t,e),n.write_shift(1,r.length),n.write_shift(r.length,r,"sbcs"),n.l<n.length?n.slice(0,n.l):n}function NMe(t,e,r,n){if(e.v!=null)switch(e.t){case"d":case"n":var a=e.t=="d"?To(Fs(e.v)):e.v;a==(a|0)&&a>=0&&a<65536?Vr(t,2,vTe(r,n,a)):Vr(t,3,gTe(r,n,a));return;case"b":case"e":Vr(t,5,bMe(r,n,e.v,e.t));return;case"s":case"str":Vr(t,4,wMe(r,n,(e.v||"").slice(0,255)));return}Vr(t,1,$w(null,r,n))}function CMe(t,e,r,n){var a=Array.isArray(e),s=Ea(e["!ref"]||"A1"),o,l="",c=[];if(s.e.c>255||s.e.r>16383){if(n.WTF)throw new Error("Range "+(e["!ref"]||"A1")+" exceeds format limit A1:IV16384");s.e.c=Math.min(s.e.c,255),s.e.r=Math.min(s.e.c,16383),o=zn(s)}for(var u=s.s.r;u<=s.e.r;++u){l=Ki(u);for(var d=s.s.c;d<=s.e.c;++d){u===s.s.r&&(c[d]=oi(d)),o=c[d]+l;var f=a?(e[u]||[])[d]:e[o];f&&NMe(t,f,u,d)}}}function _Me(t,e){for(var r=e||{},n=iu(),a=0,s=0;s<t.SheetNames.length;++s)t.SheetNames[s]==r.sheet&&(a=s);if(a==0&&r.sheet&&t.SheetNames[0]!=r.sheet)throw new Error("Sheet not found: "+r.sheet);return Vr(n,r.biff==4?1033:r.biff==3?521:9,pR(t,16,r)),CMe(n,t.Sheets[t.SheetNames[a]],a,r),Vr(n,10),n.end()}function EMe(t,e,r){Vr(t,49,vBe({sz:12,name:"Arial"},r))}function SMe(t,e,r){e&&[[5,8],[23,26],[41,44],[50,392]].forEach(function(n){for(var a=n[0];a<=n[1];++a)e[a]!=null&&Vr(t,1054,_Be(a,e[a],r))})}function IMe(t,e){var r=nr(19);r.write_shift(4,2151),r.write_shift(4,0),r.write_shift(4,0),r.write_shift(2,3),r.write_shift(1,1),r.write_shift(4,0),Vr(t,2151,r),r=nr(39),r.write_shift(4,2152),r.write_shift(4,0),r.write_shift(4,0),r.write_shift(2,3),r.write_shift(1,0),r.write_shift(4,0),r.write_shift(2,1),r.write_shift(4,4),r.write_shift(2,0),hae(Ea(e["!ref"]||"A1"),r),r.write_shift(4,4),Vr(t,2152,r)}function jMe(t,e){for(var r=0;r<16;++r)Vr(t,224,$H({numFmtId:0,style:!0},0,e));e.cellXfs.forEach(function(n){Vr(t,224,$H(n,0,e))})}function PMe(t,e){for(var r=0;r<e["!links"].length;++r){var n=e["!links"][r];Vr(t,440,ZBe(n)),n[1].Tooltip&&Vr(t,2048,tTe(n))}delete e["!links"]}function BMe(t,e){if(e){var r=0;e.forEach(function(n,a){++r<=256&&n&&Vr(t,125,oTe(AP(a,n),a))})}}function TMe(t,e,r,n,a){var s=16+Qm(a.cellXfs,e,a);if(e.v==null&&!e.bf){Vr(t,513,mg(r,n,s));return}if(e.bf)Vr(t,6,aDe(e,r,n,a,s));else switch(e.t){case"d":case"n":var o=e.t=="d"?To(Fs(e.v)):e.v;Vr(t,515,RBe(r,n,o,s));break;case"b":case"e":Vr(t,517,OBe(r,n,e.v,s,a,e.t));break;case"s":case"str":if(a.bookSST){var l=CR(a.Strings,e.v,a.revStrings);Vr(t,253,bBe(r,n,l,s))}else Vr(t,516,NBe(r,n,(e.v||"").slice(0,255),s,a));break;default:Vr(t,513,mg(r,n,s))}}function kMe(t,e,r){var n=iu(),a=r.SheetNames[t],s=r.Sheets[a]||{},o=(r||{}).Workbook||{},l=(o.Sheets||[])[t]||{},c=Array.isArray(s),u=e.biff==8,d,f="",A=[],h=Ea(s["!ref"]||"A1"),m=u?65536:16384;if(h.e.c>255||h.e.r>=m){if(e.WTF)throw new Error("Range "+(s["!ref"]||"A1")+" exceeds format limit A1:IV16384");h.e.c=Math.min(h.e.c,255),h.e.r=Math.min(h.e.c,m-1)}Vr(n,2057,pR(r,16,e)),Vr(n,13,gd(1)),Vr(n,12,gd(100)),Vr(n,15,wc(!0)),Vr(n,17,wc(!1)),Vr(n,16,hg(.001)),Vr(n,95,wc(!0)),Vr(n,42,wc(!1)),Vr(n,43,wc(!1)),Vr(n,130,gd(1)),Vr(n,128,FBe()),Vr(n,131,wc(!1)),Vr(n,132,wc(!1)),u&&BMe(n,s["!cols"]),Vr(n,512,SBe(h,e)),u&&(s["!links"]=[]);for(var p=h.s.r;p<=h.e.r;++p){f=Ki(p);for(var x=h.s.c;x<=h.e.c;++x){p===h.s.r&&(A[x]=oi(x)),d=A[x]+f;var v=c?(s[p]||[])[x]:s[d];v&&(TMe(n,v,p,x,e),u&&v.l&&s["!links"].push([d,v.l]))}}var y=l.CodeName||l.name||a;return u&&Vr(n,574,pBe((o.Views||[])[0])),u&&(s["!merges"]||[]).length&&Vr(n,229,qBe(s["!merges"])),u&&PMe(n,s),Vr(n,442,cae(y)),u&&IMe(n,s),Vr(n,10),n.end()}function FMe(t,e,r){var n=iu(),a=(t||{}).Workbook||{},s=a.Sheets||[],o=a.WBProps||{},l=r.biff==8,c=r.biff==5;if(Vr(n,2057,pR(t,5,r)),r.bookType=="xla"&&Vr(n,135),Vr(n,225,l?gd(1200):null),Vr(n,193,O5e(2)),c&&Vr(n,191),c&&Vr(n,192),Vr(n,226),Vr(n,92,nBe("SheetJS",r)),Vr(n,66,gd(l?1200:1252)),l&&Vr(n,353,gd(0)),l&&Vr(n,448),Vr(n,317,uTe(t.SheetNames.length)),l&&t.vbaraw&&Vr(n,211),l&&t.vbaraw){var u=o.CodeName||"ThisWorkbook";Vr(n,442,cae(u))}Vr(n,156,gd(17)),Vr(n,25,wc(!1)),Vr(n,18,wc(!1)),Vr(n,19,gd(0)),l&&Vr(n,431,wc(!1)),l&&Vr(n,444,gd(0)),Vr(n,61,ABe()),Vr(n,64,wc(!1)),Vr(n,141,gd(0)),Vr(n,34,wc(fRe(t)=="true")),Vr(n,14,wc(!0)),l&&Vr(n,439,wc(!1)),Vr(n,218,gd(0)),EMe(n,t,r),SMe(n,t.SSF,r),jMe(n,r),l&&Vr(n,352,wc(!1));var d=n.end(),f=iu();l&&Vr(f,140,nTe()),l&&r.Strings&&yMe(f,252,lBe(r.Strings)),Vr(f,10);var A=f.end(),h=iu(),m=0,p=0;for(p=0;p<t.SheetNames.length;++p)m+=(l?12:11)+(l?2:1)*t.SheetNames[p].length;var x=d.length+m+A.length;for(p=0;p<t.SheetNames.length;++p){var v=s[p]||{};Vr(h,133,iBe({pos:x,hs:v.Hidden||0,dt:0,name:t.SheetNames[p]},r)),x+=e[p].length}var y=h.end();if(m!=y.length)throw new Error("BS8 "+m+" != "+y.length);var b=[];return d.length&&b.push(d),y.length&&b.push(y),A.length&&b.push(A),Xo(b)}function OMe(t,e){var r=e||{},n=[];t&&!t.SSF&&(t.SSF=Os(Tn)),t&&t.SSF&&(v1(),oP(t.SSF),r.revssf=cP(t.SSF),r.revssf[t.SSF[65535]]=0,r.ssf=t.SSF),r.Strings=[],r.Strings.Count=0,r.Strings.Unique=0,jR(r),r.cellXfs=[],Qm(r.cellXfs,{},{revssf:{General:0}}),t.Props||(t.Props={});for(var a=0;a<t.SheetNames.length;++a)n[n.length]=kMe(a,r,t);return n.unshift(FMe(t,n,r)),Xo(n)}function rse(t,e){for(var r=0;r<=t.SheetNames.length;++r){var n=t.Sheets[t.SheetNames[r]];if(!(!n||!n["!ref"])){var a=ou(n["!ref"]);a.e.c>255&&typeof console<"u"&&console.error&&console.error("Worksheet '"+t.SheetNames[r]+"' extends beyond column IV (255).  Data may be lost.")}}var s=e||{};switch(s.biff||2){case 8:case 5:return OMe(t,e);case 4:case 3:case 2:return _Me(t,e)}throw new Error("invalid type "+s.bookType+" for BIFF")}function s$(t,e){var r=e||{},n=r.dense?[]:{};t=t.replace(/<!--.*?-->/g,"");var a=t.match(/<table/i);if(!a)throw new Error("Invalid HTML: could not find <table>");var s=t.match(/<\/table/i),o=a.index,l=s&&s.index||t.length,c=v3e(t.slice(o,l),/(:?<tr[^>]*>)/i,"<tr>"),u=-1,d=0,f=0,A=0,h={s:{r:1e7,c:1e7},e:{r:0,c:0}},m=[];for(o=0;o<c.length;++o){var p=c[o].trim(),x=p.slice(0,3).toLowerCase();if(x=="<tr"){if(++u,r.sheetRows&&r.sheetRows<=u){--u;break}d=0;continue}if(!(x!="<td"&&x!="<th")){var v=p.split(/<\/t[dh]>/i);for(l=0;l<v.length;++l){var y=v[l].trim();if(y.match(/<t[dh]/i)){for(var b=y,w=0;b.charAt(0)=="<"&&(w=b.indexOf(">"))>-1;)b=b.slice(w+1);for(var j=0;j<m.length;++j){var I=m[j];I.s.c==d&&I.s.r<u&&u<=I.e.r&&(d=I.e.c+1,j=-1)}var _=Dn(y.slice(0,y.indexOf(">")));A=_.colspan?+_.colspan:1,((f=+_.rowspan)>1||A>1)&&m.push({s:{r:u,c:d},e:{r:u+(f||1)-1,c:d+A-1}});var S=_.t||_["data-t"]||"";if(!b.length){d+=A;continue}if(b=Ene(b),h.s.r>u&&(h.s.r=u),h.e.r<u&&(h.e.r=u),h.s.c>d&&(h.s.c=d),h.e.c<d&&(h.e.c=d),!b.length){d+=A;continue}var E={t:"s",v:b};r.raw||!b.trim().length||S=="s"||(b==="TRUE"?E={t:"b",v:!0}:b==="FALSE"?E={t:"b",v:!1}:isNaN(gf(b))?isNaN(Lv(b).getDate())||(E={t:"d",v:Fs(b)},r.cellDates||(E={t:"n",v:To(E.v)}),E.z=r.dateNF||Tn[14]):E={t:"n",v:gf(b)}),r.dense?(n[u]||(n[u]=[]),n[u][d]=E):n[On({r:u,c:d})]=E,d+=A}}}}return n["!ref"]=zn(h),m.length&&(n["!merges"]=m),n}function DMe(t,e,r,n){for(var a=t["!merges"]||[],s=[],o=e.s.c;o<=e.e.c;++o){for(var l=0,c=0,u=0;u<a.length;++u)if(!(a[u].s.r>r||a[u].s.c>o)&&!(a[u].e.r<r||a[u].e.c<o)){if(a[u].s.r<r||a[u].s.c<o){l=-1;break}l=a[u].e.r-a[u].s.r+1,c=a[u].e.c-a[u].s.c+1;break}if(!(l<0)){var d=On({r,c:o}),f=n.dense?(t[r]||[])[o]:t[d],A=f&&f.v!=null&&(f.h||nR(f.w||(yA(f),f.w)||""))||"",h={};l>1&&(h.rowspan=l),c>1&&(h.colspan=c),n.editable?A='<span contenteditable="true">'+A+"</span>":f&&(h["data-t"]=f&&f.t||"z",f.v!=null&&(h["data-v"]=f.v),f.z!=null&&(h["data-z"]=f.z),f.l&&(f.l.Target||"#").charAt(0)!="#"&&(A='<a href="'+f.l.Target+'">'+A+"</a>")),h.id=(n.id||"sjs")+"-"+d,s.push(Ur("td",A,h))}}var m="<tr>";return m+s.join("")+"</tr>"}var RMe='<html><head><meta charset="utf-8"/><title>SheetJS Table Export</title></head><body>',MMe="</body></html>";function LMe(t,e){var r=t.match(/<table[\s\S]*?>[\s\S]*?<\/table>/gi);if(!r||r.length==0)throw new Error("Invalid HTML: could not find <table>");if(r.length==1)return Um(s$(r[0],e),e);var n=TR();return r.forEach(function(a,s){kR(n,s$(a,e),"Sheet"+(s+1))}),n}function UMe(t,e,r){var n=[];return n.join("")+"<table"+(r&&r.id?' id="'+r.id+'"':"")+">"}function nse(t,e){var r=e||{},n=r.header!=null?r.header:RMe,a=r.footer!=null?r.footer:MMe,s=[n],o=ou(t["!ref"]);r.dense=Array.isArray(t),s.push(UMe(t,o,r));for(var l=o.s.r;l<=o.e.r;++l)s.push(DMe(t,o,l,r));return s.push("</table>"+a),s.join("")}function ase(t,e,r){var n=r||{},a=0,s=0;if(n.origin!=null)if(typeof n.origin=="number")a=n.origin;else{var o=typeof n.origin=="string"?li(n.origin):n.origin;a=o.r,s=o.c}var l=e.getElementsByTagName("tr"),c=Math.min(n.sheetRows||1e7,l.length),u={s:{r:0,c:0},e:{r:a,c:s}};if(t["!ref"]){var d=ou(t["!ref"]);u.s.r=Math.min(u.s.r,d.s.r),u.s.c=Math.min(u.s.c,d.s.c),u.e.r=Math.max(u.e.r,d.e.r),u.e.c=Math.max(u.e.c,d.e.c),a==-1&&(u.e.r=a=d.e.r+1)}var f=[],A=0,h=t["!rows"]||(t["!rows"]=[]),m=0,p=0,x=0,v=0,y=0,b=0;for(t["!cols"]||(t["!cols"]=[]);m<l.length&&p<c;++m){var w=l[m];if(i$(w)){if(n.display)continue;h[p]={hidden:!0}}var j=w.children;for(x=v=0;x<j.length;++x){var I=j[x];if(!(n.display&&i$(I))){var _=I.hasAttribute("data-v")?I.getAttribute("data-v"):I.hasAttribute("v")?I.getAttribute("v"):Ene(I.innerHTML),S=I.getAttribute("data-z")||I.getAttribute("z");for(A=0;A<f.length;++A){var E=f[A];E.s.c==v+s&&E.s.r<p+a&&p+a<=E.e.r&&(v=E.e.c+1-s,A=-1)}b=+I.getAttribute("colspan")||1,((y=+I.getAttribute("rowspan")||1)>1||b>1)&&f.push({s:{r:p+a,c:v+s},e:{r:p+a+(y||1)-1,c:v+s+(b||1)-1}});var T={t:"s",v:_},k=I.getAttribute("data-t")||I.getAttribute("t")||"";_!=null&&(_.length==0?T.t=k||"z":n.raw||_.trim().length==0||k=="s"||(_==="TRUE"?T={t:"b",v:!0}:_==="FALSE"?T={t:"b",v:!1}:isNaN(gf(_))?isNaN(Lv(_).getDate())||(T={t:"d",v:Fs(_)},n.cellDates||(T={t:"n",v:To(T.v)}),T.z=n.dateNF||Tn[14]):T={t:"n",v:gf(_)})),T.z===void 0&&S!=null&&(T.z=S);var B="",D=I.getElementsByTagName("A");if(D&&D.length)for(var X=0;X<D.length&&!(D[X].hasAttribute("href")&&(B=D[X].getAttribute("href"),B.charAt(0)!="#"));++X);B&&B.charAt(0)!="#"&&(T.l={Target:B}),n.dense?(t[p+a]||(t[p+a]=[]),t[p+a][v+s]=T):t[On({c:v+s,r:p+a})]=T,u.e.c<v+s&&(u.e.c=v+s),v+=b}}++p}return f.length&&(t["!merges"]=(t["!merges"]||[]).concat(f)),u.e.r=Math.max(u.e.r,p-1+a),t["!ref"]=zn(u),p>=c&&(t["!fullref"]=zn((u.e.r=l.length-m+p-1+a,u))),t}function sse(t,e){var r=e||{},n=r.dense?[]:{};return ase(n,t,e)}function QMe(t,e){return Um(sse(t,e),e)}function i$(t){var e="",r=VMe(t);return r&&(e=r(t).getPropertyValue("display")),e||(e=t.style&&t.style.display),e==="none"}function VMe(t){return t.ownerDocument.defaultView&&typeof t.ownerDocument.defaultView.getComputedStyle=="function"?t.ownerDocument.defaultView.getComputedStyle:typeof getComputedStyle=="function"?getComputedStyle:null}function HMe(t){var e=t.replace(/[\t\r\n]/g," ").trim().replace(/ +/g," ").replace(/<text:s\/>/g," ").replace(/<text:s text:c="(\d+)"\/>/g,function(n,a){return Array(parseInt(a,10)+1).join(" ")}).replace(/<text:tab[^>]*\/>/g,"	").replace(/<text:line-break\/>/g,`
`),r=_a(e.replace(/<[^>]*>/g,""));return[r]}var o$={day:["d","dd"],month:["m","mm"],year:["y","yy"],hours:["h","hh"],minutes:["m","mm"],seconds:["s","ss"],"am-pm":["A/P","AM/PM"],"day-of-week":["ddd","dddd"],era:["e","ee"],quarter:["\\Qm",'m\\"th quarter"']};function ise(t,e){var r=e||{},n=aR(t),a=[],s,o,l={name:""},c="",u=0,d,f,A={},h=[],m=r.dense?[]:{},p,x,v={value:""},y="",b=0,w=[],j=-1,I=-1,_={s:{r:1e6,c:1e7},e:{r:0,c:0}},S=0,E={},T=[],k={},B=0,D=0,X=[],me=1,pe=1,he=[],ve={Names:[]},ae={},Pe=["",""],ke=[],O={},G="",z=0,U=!1,Y=!1,ee=0;for(F2.lastIndex=0,n=n.replace(/<!--([\s\S]*?)-->/mg,"").replace(/<!DOCTYPE[^\[]*\[[^\]]*\]>/gm,"");p=F2.exec(n);)switch(p[3]=p[3].replace(/_.*$/,"")){case"table":case"":p[1]==="/"?(_.e.c>=_.s.c&&_.e.r>=_.s.r?m["!ref"]=zn(_):m["!ref"]="A1:A1",r.sheetRows>0&&r.sheetRows<=_.e.r&&(m["!fullref"]=m["!ref"],_.e.r=r.sheetRows-1,m["!ref"]=zn(_)),T.length&&(m["!merges"]=T),X.length&&(m["!rows"]=X),d.name=d.||d.name,typeof JSON<"u"&&JSON.stringify(d),h.push(d.name),A[d.name]=m,Y=!1):p[0].charAt(p[0].length-2)!=="/"&&(d=Dn(p[0],!1),j=I=-1,_.s.r=_.s.c=1e7,_.e.r=_.e.c=0,m=r.dense?[]:{},T=[],X=[],Y=!0);break;case"table-row-group":p[1]==="/"?--S:++S;break;case"table-row":case"":if(p[1]==="/"){j+=me,me=1;break}if(f=Dn(p[0],!1),f.?j=f.-1:j==-1&&(j=0),me=+f["number-rows-repeated"]||1,me<10)for(ee=0;ee<me;++ee)S>0&&(X[j+ee]={level:S});I=-1;break;case"covered-table-cell":p[1]!=="/"&&++I,r.sheetStubs&&(r.dense?(m[j]||(m[j]=[]),m[j][I]={t:"z"}):m[On({r:j,c:I})]={t:"z"}),y="",w=[];break;case"table-cell":case"":if(p[0].charAt(p[0].length-2)==="/")++I,v=Dn(p[0],!1),pe=parseInt(v["number-columns-repeated"]||"1",10),x={t:"z",v:null},v.formula&&r.cellFormula!=!1&&(x.f=r$(_a(v.formula))),(v.||v["value-type"])=="string"&&(x.t="s",x.v=_a(v["string-value"]||""),r.dense?(m[j]||(m[j]=[]),m[j][I]=x):m[On({r:j,c:I})]=x),I+=pe-1;else if(p[1]!=="/"){++I,y="",b=0,w=[],pe=1;var M=me?j+me-1:j;if(I>_.e.c&&(_.e.c=I),I<_.s.c&&(_.s.c=I),j<_.s.r&&(_.s.r=j),M>_.e.r&&(_.e.r=M),v=Dn(p[0],!1),ke=[],O={},x={t:v.||v["value-type"],v:null},r.cellFormula)if(v.formula&&(v.formula=_a(v.formula)),v["number-matrix-columns-spanned"]&&v["number-matrix-rows-spanned"]&&(B=parseInt(v["number-matrix-rows-spanned"],10)||0,D=parseInt(v["number-matrix-columns-spanned"],10)||0,k={s:{r:j,c:I},e:{r:j+B-1,c:I+D-1}},x.F=zn(k),he.push([k,x.F])),v.formula)x.f=r$(v.formula);else for(ee=0;ee<he.length;++ee)j>=he[ee][0].s.r&&j<=he[ee][0].e.r&&I>=he[ee][0].s.c&&I<=he[ee][0].e.c&&(x.F=he[ee][1]);switch((v["number-columns-spanned"]||v["number-rows-spanned"])&&(B=parseInt(v["number-rows-spanned"],10)||0,D=parseInt(v["number-columns-spanned"],10)||0,k={s:{r:j,c:I},e:{r:j+B-1,c:I+D-1}},T.push(k)),v["number-columns-repeated"]&&(pe=parseInt(v["number-columns-repeated"],10)),x.t){case"boolean":x.t="b",x.v=Ps(v["boolean-value"]);break;case"float":x.t="n",x.v=parseFloat(v.value);break;case"percentage":x.t="n",x.v=parseFloat(v.value);break;case"currency":x.t="n",x.v=parseFloat(v.value);break;case"date":x.t="d",x.v=Fs(v["date-value"]),r.cellDates||(x.t="n",x.v=To(x.v)),x.z="m/d/yy";break;case"time":x.t="n",x.v=p3e(v["time-value"])/86400,r.cellDates&&(x.t="d",x.v=uP(x.v)),x.z="HH:MM:SS";break;case"number":x.t="n",x.v=parseFloat(v.);break;default:if(x.t==="string"||x.t==="text"||!x.t)x.t="s",v["string-value"]!=null&&(y=_a(v["string-value"]),w=[]);else throw new Error("Unsupported value type "+x.t)}}else{if(U=!1,x.t==="s"&&(x.v=y||"",w.length&&(x.R=w),U=b==0),ae.Target&&(x.l=ae),ke.length>0&&(x.c=ke,ke=[]),y&&r.cellText!==!1&&(x.w=y),U&&(x.t="z",delete x.v),(!U||r.sheetStubs)&&!(r.sheetRows&&r.sheetRows<=j))for(var H=0;H<me;++H){if(pe=parseInt(v["number-columns-repeated"]||"1",10),r.dense)for(m[j+H]||(m[j+H]=[]),m[j+H][I]=H==0?x:Os(x);--pe>0;)m[j+H][I+pe]=Os(x);else for(m[On({r:j+H,c:I})]=x;--pe>0;)m[On({r:j+H,c:I+pe})]=Os(x);_.e.c<=I&&(_.e.c=I)}pe=parseInt(v["number-columns-repeated"]||"1",10),I+=pe-1,pe=0,x={},y="",w=[]}ae={};break;case"document":case"document-content":case"":case"spreadsheet":case"":case"scripts":case"styles":case"font-face-decls":case"master-styles":if(p[1]==="/"){if((s=a.pop())[0]!==p[3])throw"Bad state: "+s}else p[0].charAt(p[0].length-2)!=="/"&&a.push([p[3],!0]);break;case"annotation":if(p[1]==="/"){if((s=a.pop())[0]!==p[3])throw"Bad state: "+s;O.t=y,w.length&&(O.R=w),O.a=G,ke.push(O)}else p[0].charAt(p[0].length-2)!=="/"&&a.push([p[3],!1]);G="",z=0,y="",b=0,w=[];break;case"creator":p[1]==="/"?G=n.slice(z,p.index):z=p.index+p[0].length;break;case"meta":case"":case"settings":case"config-item-set":case"config-item-map-indexed":case"config-item-map-entry":case"config-item-map-named":case"shapes":case"frame":case"text-box":case"image":case"data-pilot-tables":case"list-style":case"form":case"dde-links":case"event-listeners":case"chart":if(p[1]==="/"){if((s=a.pop())[0]!==p[3])throw"Bad state: "+s}else p[0].charAt(p[0].length-2)!=="/"&&a.push([p[3],!1]);y="",b=0,w=[];break;case"scientific-number":break;case"currency-symbol":break;case"currency-style":break;case"number-style":case"percentage-style":case"date-style":case"time-style":if(p[1]==="/"){if(E[l.name]=c,(s=a.pop())[0]!==p[3])throw"Bad state: "+s}else p[0].charAt(p[0].length-2)!=="/"&&(c="",l=Dn(p[0],!1),a.push([p[3],!0]));break;case"script":break;case"libraries":break;case"automatic-styles":break;case"default-style":case"page-layout":break;case"style":break;case"map":break;case"font-face":break;case"paragraph-properties":break;case"table-properties":break;case"table-column-properties":break;case"table-row-properties":break;case"table-cell-properties":break;case"number":switch(a[a.length-1][0]){case"time-style":case"date-style":o=Dn(p[0],!1),c+=o$[p[3]][o.style==="long"?1:0];break}break;case"fraction":break;case"day":case"month":case"year":case"era":case"day-of-week":case"week-of-year":case"quarter":case"hours":case"minutes":case"seconds":case"am-pm":switch(a[a.length-1][0]){case"time-style":case"date-style":o=Dn(p[0],!1),c+=o$[p[3]][o.style==="long"?1:0];break}break;case"boolean-style":break;case"boolean":break;case"text-style":break;case"text":if(p[0].slice(-2)==="/>")break;if(p[1]==="/")switch(a[a.length-1][0]){case"number-style":case"date-style":case"time-style":c+=n.slice(u,p.index);break}else u=p.index+p[0].length;break;case"named-range":o=Dn(p[0],!1),Pe=F5(o["cell-range-address"]);var te={Name:o.name,Ref:Pe[0]+"!"+Pe[1]};Y&&(te.Sheet=h.length),ve.Names.push(te);break;case"text-content":break;case"text-properties":break;case"embedded-text":break;case"body":case"":break;case"forms":break;case"table-column":break;case"table-header-rows":break;case"table-rows":break;case"table-column-group":break;case"table-header-columns":break;case"table-columns":break;case"null-date":break;case"graphic-properties":break;case"calculation-settings":break;case"named-expressions":break;case"label-range":break;case"label-ranges":break;case"named-expression":break;case"sort":break;case"sort-by":break;case"sort-groups":break;case"tab":break;case"line-break":break;case"span":break;case"p":case"":if(["master-styles"].indexOf(a[a.length-1][0])>-1)break;if(p[1]==="/"&&(!v||!v["string-value"])){var Ce=HMe(n.slice(b,p.index));y=(y.length>0?y+`
`:"")+Ce[0]}else Dn(p[0],!1),b=p.index+p[0].length;break;case"s":break;case"database-range":if(p[1]==="/")break;try{Pe=F5(Dn(p[0])["target-range-address"]),A[Pe[0]]["!autofilter"]={ref:Pe[1]}}catch{}break;case"date":break;case"object":break;case"title":case"":break;case"desc":break;case"binary-data":break;case"table-source":break;case"scenario":break;case"iteration":break;case"content-validations":break;case"content-validation":break;case"help-message":break;case"error-message":break;case"database-ranges":break;case"filter":break;case"filter-and":break;case"filter-or":break;case"filter-condition":break;case"list-level-style-bullet":break;case"list-level-style-number":break;case"list-level-properties":break;case"sender-firstname":case"sender-lastname":case"sender-initials":case"sender-title":case"sender-position":case"sender-email":case"sender-phone-private":case"sender-fax":case"sender-company":case"sender-phone-work":case"sender-street":case"sender-city":case"sender-postal-code":case"sender-country":case"sender-state-or-province":case"author-name":case"author-initials":case"chapter":case"file-name":case"template-name":case"sheet-name":break;case"event-listener":break;case"initial-creator":case"creation-date":case"print-date":case"generator":case"document-statistic":case"user-defined":case"editing-duration":case"editing-cycles":break;case"config-item":break;case"page-number":break;case"page-count":break;case"time":break;case"cell-range-source":break;case"detective":break;case"operation":break;case"highlighted-range":break;case"data-pilot-table":case"source-cell-range":case"source-service":case"data-pilot-field":case"data-pilot-level":case"data-pilot-subtotals":case"data-pilot-subtotal":case"data-pilot-members":case"data-pilot-member":case"data-pilot-display-info":case"data-pilot-sort-info":case"data-pilot-layout-info":case"data-pilot-field-reference":case"data-pilot-groups":case"data-pilot-group":case"data-pilot-group-member":break;case"rect":break;case"dde-connection-decls":case"dde-connection-decl":case"dde-link":case"dde-source":break;case"properties":break;case"property":break;case"a":if(p[1]!=="/"){if(ae=Dn(p[0],!1),!ae.href)break;ae.Target=_a(ae.href),delete ae.href,ae.Target.charAt(0)=="#"&&ae.Target.indexOf(".")>-1?(Pe=F5(ae.Target.slice(1)),ae.Target="#"+Pe[0]+"!"+Pe[1]):ae.Target.match(/^\.\.[\\\/]/)&&(ae.Target=ae.Target.slice(3))}break;case"table-protection":break;case"data-pilot-grand-total":break;case"office-document-common-attrs":break;default:switch(p[2]){case"dc:":case"calcext:":case"loext:":case"ooo:":case"chartooo:":case"draw:":case"style:":case"chart:":case"form:":case"uof:":case":":case":":break;default:if(r.WTF)throw new Error(p)}}var V={Sheets:A,SheetNames:h,Workbook:ve};return r.bookSheets&&delete V.Sheets,V}function l$(t,e){e=e||{},pd(t,"META-INF/manifest.xml")&&p5e(eo(t,"META-INF/manifest.xml"),e);var r=Bu(t,"content.xml");if(!r)throw new Error("Missing content.xml in ODS / UOF file");var n=ise(ls(r),e);return pd(t,"meta.xml")&&(n.Props=Xne(eo(t,"meta.xml"))),n}function c$(t,e){return ise(t,e)}var $Me=function(){var t=["<office:master-styles>",'<style:master-page style:name="mp1" style:page-layout-name="mp1">',"<style:header/>",'<style:header-left style:display="false"/>',"<style:footer/>",'<style:footer-left style:display="false"/>',"</style:master-page>","</office:master-styles>"].join(""),e="<office:document-styles "+k2({"xmlns:office":"urn:oasis:names:tc:opendocument:xmlns:office:1.0","xmlns:table":"urn:oasis:names:tc:opendocument:xmlns:table:1.0","xmlns:style":"urn:oasis:names:tc:opendocument:xmlns:style:1.0","xmlns:text":"urn:oasis:names:tc:opendocument:xmlns:text:1.0","xmlns:draw":"urn:oasis:names:tc:opendocument:xmlns:drawing:1.0","xmlns:fo":"urn:oasis:names:tc:opendocument:xmlns:xsl-fo-compatible:1.0","xmlns:xlink":"http://www.w3.org/1999/xlink","xmlns:dc":"http://purl.org/dc/elements/1.1/","xmlns:number":"urn:oasis:names:tc:opendocument:xmlns:datastyle:1.0","xmlns:svg":"urn:oasis:names:tc:opendocument:xmlns:svg-compatible:1.0","xmlns:of":"urn:oasis:names:tc:opendocument:xmlns:of:1.2","office:version":"1.2"})+">"+t+"</office:document-styles>";return function(){return zi+e}}(),u$=function(){var t=function(s){return ts(s).replace(/  +/g,function(o){return'<text:s text:c="'+o.length+'"/>'}).replace(/\t/g,"<text:tab/>").replace(/\n/g,"</text:p><text:p>").replace(/^ /,"<text:s/>").replace(/ $/,"<text:s/>")},e=`          <table:table-cell />
`,r=`          <table:covered-table-cell/>
`,n=function(s,o,l){var c=[];c.push('      <table:table table:name="'+ts(o.SheetNames[l])+`" table:style-name="ta1">
`);var u=0,d=0,f=ou(s["!ref"]||"A1"),A=s["!merges"]||[],h=0,m=Array.isArray(s);if(s["!cols"])for(d=0;d<=f.e.c;++d)c.push("        <table:table-column"+(s["!cols"][d]?' table:style-name="co'+s["!cols"][d].ods+'"':"")+`></table:table-column>
`);var p="",x=s["!rows"]||[];for(u=0;u<f.s.r;++u)p=x[u]?' table:style-name="ro'+x[u].ods+'"':"",c.push("        <table:table-row"+p+`></table:table-row>
`);for(;u<=f.e.r;++u){for(p=x[u]?' table:style-name="ro'+x[u].ods+'"':"",c.push("        <table:table-row"+p+`>
`),d=0;d<f.s.c;++d)c.push(e);for(;d<=f.e.c;++d){var v=!1,y={},b="";for(h=0;h!=A.length;++h)if(!(A[h].s.c>d)&&!(A[h].s.r>u)&&!(A[h].e.c<d)&&!(A[h].e.r<u)){(A[h].s.c!=d||A[h].s.r!=u)&&(v=!0),y["table:number-columns-spanned"]=A[h].e.c-A[h].s.c+1,y["table:number-rows-spanned"]=A[h].e.r-A[h].s.r+1;break}if(v){c.push(r);continue}var w=On({r:u,c:d}),j=m?(s[u]||[])[d]:s[w];if(j&&j.f&&(y["table:formula"]=ts(uDe(j.f)),j.F&&j.F.slice(0,w.length)==w)){var I=ou(j.F);y["table:number-matrix-columns-spanned"]=I.e.c-I.s.c+1,y["table:number-matrix-rows-spanned"]=I.e.r-I.s.r+1}if(!j){c.push(e);continue}switch(j.t){case"b":b=j.v?"TRUE":"FALSE",y["office:value-type"]="boolean",y["office:boolean-value"]=j.v?"true":"false";break;case"n":b=j.w||String(j.v||0),y["office:value-type"]="float",y["office:value"]=j.v||0;break;case"s":case"str":b=j.v==null?"":j.v,y["office:value-type"]="string";break;case"d":b=j.w||Fs(j.v).toISOString(),y["office:value-type"]="date",y["office:date-value"]=Fs(j.v).toISOString(),y["table:style-name"]="ce1";break;default:c.push(e);continue}var _=t(b);if(j.l&&j.l.Target){var S=j.l.Target;S=S.charAt(0)=="#"?"#"+dDe(S.slice(1)):S,S.charAt(0)!="#"&&!S.match(/^\w+:/)&&(S="../"+S),_=Ur("text:a",_,{"xlink:href":S.replace(/&/g,"&amp;")})}c.push("          "+Ur("table:table-cell",Ur("text:p",_,{}),y)+`
`)}c.push(`        </table:table-row>
`)}return c.push(`      </table:table>
`),c.join("")},a=function(s,o){s.push(` <office:automatic-styles>
`),s.push(`  <number:date-style style:name="N37" number:automatic-order="true">
`),s.push(`   <number:month number:style="long"/>
`),s.push(`   <number:text>/</number:text>
`),s.push(`   <number:day number:style="long"/>
`),s.push(`   <number:text>/</number:text>
`),s.push(`   <number:year/>
`),s.push(`  </number:date-style>
`);var l=0;o.SheetNames.map(function(u){return o.Sheets[u]}).forEach(function(u){if(u&&u["!cols"]){for(var d=0;d<u["!cols"].length;++d)if(u["!cols"][d]){var f=u["!cols"][d];if(f.width==null&&f.wpx==null&&f.wch==null)continue;Sm(f),f.ods=l;var A=u["!cols"][d].wpx+"px";s.push('  <style:style style:name="co'+l+`" style:family="table-column">
`),s.push('   <style:table-column-properties fo:break-before="auto" style:column-width="'+A+`"/>
`),s.push(`  </style:style>
`),++l}}});var c=0;o.SheetNames.map(function(u){return o.Sheets[u]}).forEach(function(u){if(u&&u["!rows"]){for(var d=0;d<u["!rows"].length;++d)if(u["!rows"][d]){u["!rows"][d].ods=c;var f=u["!rows"][d].hpx+"px";s.push('  <style:style style:name="ro'+c+`" style:family="table-row">
`),s.push('   <style:table-row-properties fo:break-before="auto" style:row-height="'+f+`"/>
`),s.push(`  </style:style>
`),++c}}}),s.push(`  <style:style style:name="ta1" style:family="table" style:master-page-name="mp1">
`),s.push(`   <style:table-properties table:display="true" style:writing-mode="lr-tb"/>
`),s.push(`  </style:style>
`),s.push(`  <style:style style:name="ce1" style:family="table-cell" style:parent-style-name="Default" style:data-style-name="N37"/>
`),s.push(` </office:automatic-styles>
`)};return function(o,l){var c=[zi],u=k2({"xmlns:office":"urn:oasis:names:tc:opendocument:xmlns:office:1.0","xmlns:table":"urn:oasis:names:tc:opendocument:xmlns:table:1.0","xmlns:style":"urn:oasis:names:tc:opendocument:xmlns:style:1.0","xmlns:text":"urn:oasis:names:tc:opendocument:xmlns:text:1.0","xmlns:draw":"urn:oasis:names:tc:opendocument:xmlns:drawing:1.0","xmlns:fo":"urn:oasis:names:tc:opendocument:xmlns:xsl-fo-compatible:1.0","xmlns:xlink":"http://www.w3.org/1999/xlink","xmlns:dc":"http://purl.org/dc/elements/1.1/","xmlns:meta":"urn:oasis:names:tc:opendocument:xmlns:meta:1.0","xmlns:number":"urn:oasis:names:tc:opendocument:xmlns:datastyle:1.0","xmlns:presentation":"urn:oasis:names:tc:opendocument:xmlns:presentation:1.0","xmlns:svg":"urn:oasis:names:tc:opendocument:xmlns:svg-compatible:1.0","xmlns:chart":"urn:oasis:names:tc:opendocument:xmlns:chart:1.0","xmlns:dr3d":"urn:oasis:names:tc:opendocument:xmlns:dr3d:1.0","xmlns:math":"http://www.w3.org/1998/Math/MathML","xmlns:form":"urn:oasis:names:tc:opendocument:xmlns:form:1.0","xmlns:script":"urn:oasis:names:tc:opendocument:xmlns:script:1.0","xmlns:ooo":"http://openoffice.org/2004/office","xmlns:ooow":"http://openoffice.org/2004/writer","xmlns:oooc":"http://openoffice.org/2004/calc","xmlns:dom":"http://www.w3.org/2001/xml-events","xmlns:xforms":"http://www.w3.org/2002/xforms","xmlns:xsd":"http://www.w3.org/2001/XMLSchema","xmlns:xsi":"http://www.w3.org/2001/XMLSchema-instance","xmlns:sheet":"urn:oasis:names:tc:opendocument:sh33tjs:1.0","xmlns:rpt":"http://openoffice.org/2005/report","xmlns:of":"urn:oasis:names:tc:opendocument:xmlns:of:1.2","xmlns:xhtml":"http://www.w3.org/1999/xhtml","xmlns:grddl":"http://www.w3.org/2003/g/data-view#","xmlns:tableooo":"http://openoffice.org/2009/table","xmlns:drawooo":"http://openoffice.org/2010/draw","xmlns:calcext":"urn:org:documentfoundation:names:experimental:calc:xmlns:calcext:1.0","xmlns:loext":"urn:org:documentfoundation:names:experimental:office:xmlns:loext:1.0","xmlns:field":"urn:openoffice:names:experimental:ooo-ms-interop:xmlns:field:1.0","xmlns:formx":"urn:openoffice:names:experimental:ooxml-odf-interop:xmlns:form:1.0","xmlns:css3t":"http://www.w3.org/TR/css3-text/","office:version":"1.2"}),d=k2({"xmlns:config":"urn:oasis:names:tc:opendocument:xmlns:config:1.0","office:mimetype":"application/vnd.oasis.opendocument.spreadsheet"});l.bookType=="fods"?(c.push("<office:document"+u+d+`>
`),c.push(Wne().replace(/office:document-meta/g,"office:meta"))):c.push("<office:document-content"+u+`>
`),a(c,o),c.push(`  <office:body>
`),c.push(`    <office:spreadsheet>
`);for(var f=0;f!=o.SheetNames.length;++f)c.push(n(o.Sheets[o.SheetNames[f]],o,f));return c.push(`    </office:spreadsheet>
`),c.push(`  </office:body>
`),l.bookType=="fods"?c.push("</office:document>"):c.push("</office:document-content>"),c.join("")}}();function ose(t,e){if(e.bookType=="fods")return u$(t,e);var r=eR(),n="",a=[],s=[];return n="mimetype",Yn(r,n,"application/vnd.oasis.opendocument.spreadsheet"),n="content.xml",Yn(r,n,u$(t,e)),a.push([n,"text/xml"]),s.push([n,"ContentFile"]),n="styles.xml",Yn(r,n,$Me(t,e)),a.push([n,"text/xml"]),s.push([n,"StylesFile"]),n="meta.xml",Yn(r,n,zi+Wne()),a.push([n,"text/xml"]),s.push([n,"MetadataFile"]),n="manifest.rdf",Yn(r,n,v5e(s)),a.push([n,"application/rdf+xml"]),n="META-INF/manifest.xml",Yn(r,n,g5e(a)),r}/*! sheetjs (C) 2013-present SheetJS -- http://sheetjs.com */function pg(t){return new DataView(t.buffer,t.byteOffset,t.byteLength)}function aF(t){return typeof TextDecoder<"u"?new TextDecoder().decode(t):ls(Lm(t))}function GMe(t){return typeof TextEncoder<"u"?new TextEncoder().encode(t):Pu(Jf(t))}function KMe(t,e){e:for(var r=0;r<=t.length-e.length;++r){for(var n=0;n<e.length;++n)if(t[r+n]!=e[n])continue e;return!0}return!1}function jm(t){var e=t.reduce(function(a,s){return a+s.length},0),r=new Uint8Array(e),n=0;return t.forEach(function(a){r.set(a,n),n+=a.length}),r}function d$(t){return t-=t>>1&1431655765,t=(t&858993459)+(t>>2&858993459),(t+(t>>4)&252645135)*16843009>>>24}function qMe(t,e){for(var r=(t[e+15]&127)<<7|t[e+14]>>1,n=t[e+14]&1,a=e+13;a>=e;--a)n=n*256+t[a];return(t[e+15]&128?-n:n)*Math.pow(10,r-6176)}function zMe(t,e,r){var n=Math.floor(r==0?0:Math.LOG10E*Math.log(Math.abs(r)))+6176-20,a=r/Math.pow(10,n-6176);t[e+15]|=n>>7,t[e+14]|=(n&127)<<1;for(var s=0;a>=1;++s,a/=256)t[e+s]=a&255;t[e+15]|=r>=0?0:128}function Q2(t,e){var r=e?e[0]:0,n=t[r]&127;e:if(t[r++]>=128&&(n|=(t[r]&127)<<7,t[r++]<128||(n|=(t[r]&127)<<14,t[r++]<128)||(n|=(t[r]&127)<<21,t[r++]<128)||(n+=(t[r]&127)*Math.pow(2,28),++r,t[r++]<128)||(n+=(t[r]&127)*Math.pow(2,35),++r,t[r++]<128)||(n+=(t[r]&127)*Math.pow(2,42),++r,t[r++]<128)))break e;return e&&(e[0]=r),n}function za(t){var e=new Uint8Array(7);e[0]=t&127;var r=1;e:if(t>127){if(e[r-1]|=128,e[r]=t>>7&127,++r,t<=16383||(e[r-1]|=128,e[r]=t>>14&127,++r,t<=2097151)||(e[r-1]|=128,e[r]=t>>21&127,++r,t<=268435455)||(e[r-1]|=128,e[r]=t/256>>>21&127,++r,t<=34359738367)||(e[r-1]|=128,e[r]=t/65536>>>21&127,++r,t<=4398046511103))break e;e[r-1]|=128,e[r]=t/16777216>>>21&127,++r}return e.slice(0,r)}function Ei(t){var e=0,r=t[e]&127;e:if(t[e++]>=128){if(r|=(t[e]&127)<<7,t[e++]<128||(r|=(t[e]&127)<<14,t[e++]<128)||(r|=(t[e]&127)<<21,t[e++]<128))break e;r|=(t[e]&127)<<28}return r}function Ia(t){for(var e=[],r=[0];r[0]<t.length;){var n=r[0],a=Q2(t,r),s=a&7;a=Math.floor(a/8);var o=0,l;if(a==0)break;switch(s){case 0:{for(var c=r[0];t[r[0]++]>=128;);l=t.slice(c,r[0])}break;case 5:o=4,l=t.slice(r[0],r[0]+o),r[0]+=o;break;case 1:o=8,l=t.slice(r[0],r[0]+o),r[0]+=o;break;case 2:o=Q2(t,r),l=t.slice(r[0],r[0]+o),r[0]+=o;break;case 3:case 4:default:throw new Error("PB Type ".concat(s," for Field ").concat(a," at offset ").concat(n))}var u={data:l,type:s};e[a]==null?e[a]=[u]:e[a].push(u)}return e}function ml(t){var e=[];return t.forEach(function(r,n){r.forEach(function(a){a.data&&(e.push(za(n*8+a.type)),a.type==2&&e.push(za(a.data.length)),e.push(a.data))})}),jm(e)}function SR(t,e){return(t==null?void 0:t.map(function(r){return e(r.data)}))||[]}function ud(t){for(var e,r=[],n=[0];n[0]<t.length;){var a=Q2(t,n),s=Ia(t.slice(n[0],n[0]+a));n[0]+=a;var o={id:Ei(s[1][0].data),messages:[]};s[2].forEach(function(l){var c=Ia(l.data),u=Ei(c[3][0].data);o.messages.push({meta:c,data:t.slice(n[0],n[0]+u)}),n[0]+=u}),(e=s[3])!=null&&e[0]&&(o.merge=Ei(s[3][0].data)>>>0>0),r.push(o)}return r}function mx(t){var e=[];return t.forEach(function(r){var n=[];n[1]=[{data:za(r.id),type:0}],n[2]=[],r.merge!=null&&(n[3]=[{data:za(+!!r.merge),type:0}]);var a=[];r.messages.forEach(function(o){a.push(o.data),o.meta[3]=[{type:0,data:za(o.data.length)}],n[2].push({data:ml(o.meta),type:2})});var s=ml(n);e.push(za(s.length)),e.push(s),a.forEach(function(o){return e.push(o)})}),jm(e)}function WMe(t,e){if(t!=0)throw new Error("Unexpected Snappy chunk type ".concat(t));for(var r=[0],n=Q2(e,r),a=[];r[0]<e.length;){var s=e[r[0]]&3;if(s==0){var o=e[r[0]++]>>2;if(o<60)++o;else{var l=o-59;o=e[r[0]],l>1&&(o|=e[r[0]+1]<<8),l>2&&(o|=e[r[0]+2]<<16),l>3&&(o|=e[r[0]+3]<<24),o>>>=0,o++,r[0]+=l}a.push(e.slice(r[0],r[0]+o)),r[0]+=o;continue}else{var c=0,u=0;if(s==1?(u=(e[r[0]]>>2&7)+4,c=(e[r[0]++]&224)<<3,c|=e[r[0]++]):(u=(e[r[0]++]>>2)+1,s==2?(c=e[r[0]]|e[r[0]+1]<<8,r[0]+=2):(c=(e[r[0]]|e[r[0]+1]<<8|e[r[0]+2]<<16|e[r[0]+3]<<24)>>>0,r[0]+=4)),a=[jm(a)],c==0)throw new Error("Invalid offset 0");if(c>a[0].length)throw new Error("Invalid offset beyond length");if(u>=c)for(a.push(a[0].slice(-c)),u-=c;u>=a[a.length-1].length;)a.push(a[a.length-1]),u-=a[a.length-1].length;a.push(a[0].slice(-c,-c+u))}}var d=jm(a);if(d.length!=n)throw new Error("Unexpected length: ".concat(d.length," != ").concat(n));return d}function dd(t){for(var e=[],r=0;r<t.length;){var n=t[r++],a=t[r]|t[r+1]<<8|t[r+2]<<16;r+=3,e.push(WMe(n,t.slice(r,r+a))),r+=a}if(r!==t.length)throw new Error("data is not a valid framed stream!");return jm(e)}function px(t){for(var e=[],r=0;r<t.length;){var n=Math.min(t.length-r,268435455),a=new Uint8Array(4);e.push(a);var s=za(n),o=s.length;e.push(s),n<=60?(o++,e.push(new Uint8Array([n-1<<2]))):n<=256?(o+=2,e.push(new Uint8Array([240,n-1&255]))):n<=65536?(o+=3,e.push(new Uint8Array([244,n-1&255,n-1>>8&255]))):n<=16777216?(o+=4,e.push(new Uint8Array([248,n-1&255,n-1>>8&255,n-1>>16&255]))):n<=4294967296&&(o+=5,e.push(new Uint8Array([252,n-1&255,n-1>>8&255,n-1>>16&255,n-1>>>24&255]))),e.push(t.slice(r,r+n)),o+=n,a[0]=0,a[1]=o&255,a[2]=o>>8&255,a[3]=o>>16&255,r+=n}return jm(e)}function XMe(t,e,r,n){var a=pg(t),s=a.getUint32(4,!0),o=(n>1?12:8)+d$(s&(n>1?3470:398))*4,l=-1,c=-1,u=NaN,d=new Date(2001,0,1);s&512&&(l=a.getUint32(o,!0),o+=4),o+=d$(s&(n>1?12288:4096))*4,s&16&&(c=a.getUint32(o,!0),o+=4),s&32&&(u=a.getFloat64(o,!0),o+=8),s&64&&(d.setTime(d.getTime()+a.getFloat64(o,!0)*1e3),o+=8);var f;switch(t[2]){case 0:break;case 2:f={t:"n",v:u};break;case 3:f={t:"s",v:e[c]};break;case 5:f={t:"d",v:d};break;case 6:f={t:"b",v:u>0};break;case 7:f={t:"n",v:u/86400};break;case 8:f={t:"e",v:0};break;case 9:if(l>-1)f={t:"s",v:r[l]};else if(c>-1)f={t:"s",v:e[c]};else if(!isNaN(u))f={t:"n",v:u};else throw new Error("Unsupported cell type ".concat(t.slice(0,4)));break;default:throw new Error("Unsupported cell type ".concat(t.slice(0,4)))}return f}function YMe(t,e,r){var n=pg(t),a=n.getUint32(8,!0),s=12,o=-1,l=-1,c=NaN,u=NaN,d=new Date(2001,0,1);a&1&&(c=qMe(t,s),s+=16),a&2&&(u=n.getFloat64(s,!0),s+=8),a&4&&(d.setTime(d.getTime()+n.getFloat64(s,!0)*1e3),s+=8),a&8&&(l=n.getUint32(s,!0),s+=4),a&16&&(o=n.getUint32(s,!0),s+=4);var f;switch(t[1]){case 0:break;case 2:f={t:"n",v:c};break;case 3:f={t:"s",v:e[l]};break;case 5:f={t:"d",v:d};break;case 6:f={t:"b",v:u>0};break;case 7:f={t:"n",v:u/86400};break;case 8:f={t:"e",v:0};break;case 9:if(o>-1)f={t:"s",v:r[o]};else throw new Error("Unsupported cell type ".concat(t[1]," : ").concat(a&31," : ").concat(t.slice(0,4)));break;case 10:f={t:"n",v:c};break;default:throw new Error("Unsupported cell type ".concat(t[1]," : ").concat(a&31," : ").concat(t.slice(0,4)))}return f}function D5(t,e){var r=new Uint8Array(32),n=pg(r),a=12,s=0;switch(r[0]=5,t.t){case"n":r[1]=2,zMe(r,a,t.v),s|=1,a+=16;break;case"b":r[1]=6,n.setFloat64(a,t.v?1:0,!0),s|=2,a+=8;break;case"s":if(e.indexOf(t.v)==-1)throw new Error("Value ".concat(t.v," missing from SST!"));r[1]=3,n.setUint32(a,e.indexOf(t.v),!0),s|=8,a+=4;break;default:throw"unsupported cell type "+t.t}return n.setUint32(8,s,!0),r.slice(0,a)}function R5(t,e){var r=new Uint8Array(32),n=pg(r),a=12,s=0;switch(r[0]=3,t.t){case"n":r[2]=2,n.setFloat64(a,t.v,!0),s|=32,a+=8;break;case"b":r[2]=6,n.setFloat64(a,t.v?1:0,!0),s|=32,a+=8;break;case"s":if(e.indexOf(t.v)==-1)throw new Error("Value ".concat(t.v," missing from SST!"));r[2]=3,n.setUint32(a,e.indexOf(t.v),!0),s|=16,a+=4;break;default:throw"unsupported cell type "+t.t}return n.setUint32(4,s,!0),r.slice(0,a)}function JMe(t,e,r){switch(t[0]){case 0:case 1:case 2:case 3:return XMe(t,e,r,t[0]);case 5:return YMe(t,e,r);default:throw new Error("Unsupported payload version ".concat(t[0]))}}function Yl(t){var e=Ia(t);return Q2(e[1][0].data)}function f$(t,e){var r=Ia(e.data),n=Ei(r[1][0].data),a=r[3],s=[];return(a||[]).forEach(function(o){var l=Ia(o.data),c=Ei(l[1][0].data)>>>0;switch(n){case 1:s[c]=aF(l[3][0].data);break;case 8:{var u=t[Yl(l[9][0].data)][0],d=Ia(u.data),f=t[Yl(d[1][0].data)][0],A=Ei(f.meta[1][0].data);if(A!=2001)throw new Error("2000 unexpected reference to ".concat(A));var h=Ia(f.data);s[c]=h[3].map(function(m){return aF(m.data)}).join("")}break}}),s}function ZMe(t,e){var r,n,a,s,o,l,c,u,d,f,A,h,m,p,x=Ia(t),v=Ei(x[1][0].data)>>>0,y=Ei(x[2][0].data)>>>0,b=((n=(r=x[8])==null?void 0:r[0])==null?void 0:n.data)&&Ei(x[8][0].data)>0||!1,w,j;if((s=(a=x[7])==null?void 0:a[0])!=null&&s.data&&e!=0)w=(l=(o=x[7])==null?void 0:o[0])==null?void 0:l.data,j=(u=(c=x[6])==null?void 0:c[0])==null?void 0:u.data;else if((f=(d=x[4])==null?void 0:d[0])!=null&&f.data&&e!=1)w=(h=(A=x[4])==null?void 0:A[0])==null?void 0:h.data,j=(p=(m=x[3])==null?void 0:m[0])==null?void 0:p.data;else throw"NUMBERS Tile missing ".concat(e," cell storage");for(var I=b?4:1,_=pg(w),S=[],E=0;E<w.length/2;++E){var T=_.getUint16(E*2,!0);T<65535&&S.push([E,T])}if(S.length!=y)throw"Expected ".concat(y," cells, found ").concat(S.length);var k=[];for(E=0;E<S.length-1;++E)k[S[E][0]]=j.subarray(S[E][1]*I,S[E+1][1]*I);return S.length>=1&&(k[S[S.length-1][0]]=j.subarray(S[S.length-1][1]*I)),{R:v,cells:k}}function e8e(t,e){var r,n=Ia(e.data),a=(r=n==null?void 0:n[7])!=null&&r[0]?Ei(n[7][0].data)>>>0>0?1:0:-1,s=SR(n[5],function(o){return ZMe(o,a)});return{nrows:Ei(n[4][0].data)>>>0,data:s.reduce(function(o,l){return o[l.R]||(o[l.R]=[]),l.cells.forEach(function(c,u){if(o[l.R][u])throw new Error("Duplicate cell r=".concat(l.R," c=").concat(u));o[l.R][u]=c}),o},[])}}function t8e(t,e,r){var n,a=Ia(e.data),s={s:{r:0,c:0},e:{r:0,c:0}};if(s.e.r=(Ei(a[6][0].data)>>>0)-1,s.e.r<0)throw new Error("Invalid row varint ".concat(a[6][0].data));if(s.e.c=(Ei(a[7][0].data)>>>0)-1,s.e.c<0)throw new Error("Invalid col varint ".concat(a[7][0].data));r["!ref"]=zn(s);var o=Ia(a[4][0].data),l=f$(t,t[Yl(o[4][0].data)][0]),c=(n=o[17])!=null&&n[0]?f$(t,t[Yl(o[17][0].data)][0]):[],u=Ia(o[3][0].data),d=0;u[1].forEach(function(f){var A=Ia(f.data),h=t[Yl(A[2][0].data)][0],m=Ei(h.meta[1][0].data);if(m!=6002)throw new Error("6001 unexpected reference to ".concat(m));var p=e8e(t,h);p.data.forEach(function(x,v){x.forEach(function(y,b){var w=On({r:d+v,c:b}),j=JMe(y,l,c);j&&(r[w]=j)})}),d+=p.nrows})}function r8e(t,e){var r=Ia(e.data),n={"!ref":"A1"},a=t[Yl(r[2][0].data)],s=Ei(a[0].meta[1][0].data);if(s!=6001)throw new Error("6000 unexpected reference to ".concat(s));return t8e(t,a[0],n),n}function n8e(t,e){var r,n=Ia(e.data),a={name:(r=n[1])!=null&&r[0]?aF(n[1][0].data):"",sheets:[]},s=SR(n[2],Yl);return s.forEach(function(o){t[o].forEach(function(l){var c=Ei(l.meta[1][0].data);c==6e3&&a.sheets.push(r8e(t,l))})}),a}function a8e(t,e){var r=TR(),n=Ia(e.data),a=SR(n[1],Yl);if(a.forEach(function(s){t[s].forEach(function(o){var l=Ei(o.meta[1][0].data);if(l==2){var c=n8e(t,o);c.sheets.forEach(function(u,d){kR(r,u,d==0?c.name:c.name+"_"+d,!0)})}})}),r.SheetNames.length==0)throw new Error("Empty NUMBERS file");return r}function M5(t){var e,r,n,a,s={},o=[];if(t.FullPaths.forEach(function(c){if(c.match(/\.iwpv2/))throw new Error("Unsupported password protection")}),t.FileIndex.forEach(function(c){if(c.name.match(/\.iwa$/)){var u;try{u=dd(c.content)}catch(f){return console.log("?? "+c.content.length+" "+(f.message||f))}var d;try{d=ud(u)}catch(f){return console.log("## "+(f.message||f))}d.forEach(function(f){s[f.id]=f.messages,o.push(f.id)})}}),!o.length)throw new Error("File has no messages");var l=((a=(n=(r=(e=s==null?void 0:s[1])==null?void 0:e[0])==null?void 0:r.meta)==null?void 0:n[1])==null?void 0:a[0].data)&&Ei(s[1][0].meta[1][0].data)==1&&s[1][0];if(l||o.forEach(function(c){s[c].forEach(function(u){var d=Ei(u.meta[1][0].data)>>>0;if(d==1)if(!l)l=u;else throw new Error("Document has multiple roots")})}),!l)throw new Error("Cannot find Document root");return a8e(s,l)}function s8e(t,e,r){var n,a,s,o;if(!((n=t[6])!=null&&n[0])||!((a=t[7])!=null&&a[0]))throw"Mutation only works on post-BNC storages!";var l=((o=(s=t[8])==null?void 0:s[0])==null?void 0:o.data)&&Ei(t[8][0].data)>0||!1;if(l)throw"Math only works with normal offsets";for(var c=0,u=pg(t[7][0].data),d=0,f=[],A=pg(t[4][0].data),h=0,m=[],p=0;p<e.length;++p){if(e[p]==null){u.setUint16(p*2,65535,!0),A.setUint16(p*2,65535);continue}u.setUint16(p*2,d,!0),A.setUint16(p*2,h,!0);var x,v;switch(typeof e[p]){case"string":x=D5({t:"s",v:e[p]},r),v=R5({t:"s",v:e[p]},r);break;case"number":x=D5({t:"n",v:e[p]},r),v=R5({t:"n",v:e[p]},r);break;case"boolean":x=D5({t:"b",v:e[p]},r),v=R5({t:"b",v:e[p]},r);break;default:throw new Error("Unsupported value "+e[p])}f.push(x),d+=x.length,m.push(v),h+=v.length,++c}for(t[2][0].data=za(c);p<t[7][0].data.length/2;++p)u.setUint16(p*2,65535,!0),A.setUint16(p*2,65535,!0);return t[6][0].data=jm(f),t[3][0].data=jm(m),c}function i8e(t,e){if(!e||!e.numbers)throw new Error("Must pass a `numbers` option -- check the README");var r=t.Sheets[t.SheetNames[0]];t.SheetNames.length>1&&console.error("The Numbers writer currently writes only the first table");var n=ou(r["!ref"]);n.s.r=n.s.c=0;var a=!1;n.e.c>9&&(a=!0,n.e.c=9),n.e.r>49&&(a=!0,n.e.r=49),a&&console.error("The Numbers writer is currently limited to ".concat(zn(n)));var s=YS(r,{range:n,header:1}),o=["~Sh33tJ5~"];s.forEach(function(G){return G.forEach(function(z){typeof z=="string"&&o.push(z)})});var l={},c=[],u=_n.read(e.numbers,{type:"base64"});u.FileIndex.map(function(G,z){return[G,u.FullPaths[z]]}).forEach(function(G){var z=G[0],U=G[1];if(z.type==2&&z.name.match(/\.iwa/)){var Y=z.content,ee=dd(Y),M=ud(ee);M.forEach(function(H){c.push(H.id),l[H.id]={deps:[],location:U,type:Ei(H.messages[0].meta[1][0].data)}})}}),c.sort(function(G,z){return G-z});var d=c.filter(function(G){return G>1}).map(function(G){return[G,za(G)]});u.FileIndex.map(function(G,z){return[G,u.FullPaths[z]]}).forEach(function(G){var z=G[0];if(G[1],!!z.name.match(/\.iwa/)){var U=ud(dd(z.content));U.forEach(function(Y){Y.messages.forEach(function(ee){d.forEach(function(M){Y.messages.some(function(H){return Ei(H.meta[1][0].data)!=11006&&KMe(H.data,M[1])})&&l[M[0]].deps.push(Y.id)})})})}});for(var f=_n.find(u,l[1].location),A=ud(dd(f.content)),h,m=0;m<A.length;++m){var p=A[m];p.id==1&&(h=p)}var x=Yl(Ia(h.messages[0].data)[1][0].data);for(f=_n.find(u,l[x].location),A=ud(dd(f.content)),m=0;m<A.length;++m)p=A[m],p.id==x&&(h=p);for(x=Yl(Ia(h.messages[0].data)[2][0].data),f=_n.find(u,l[x].location),A=ud(dd(f.content)),m=0;m<A.length;++m)p=A[m],p.id==x&&(h=p);for(x=Yl(Ia(h.messages[0].data)[2][0].data),f=_n.find(u,l[x].location),A=ud(dd(f.content)),m=0;m<A.length;++m)p=A[m],p.id==x&&(h=p);var v=Ia(h.messages[0].data);{v[6][0].data=za(n.e.r+1),v[7][0].data=za(n.e.c+1);var y=Yl(v[46][0].data),b=_n.find(u,l[y].location),w=ud(dd(b.content));{for(var j=0;j<w.length&&w[j].id!=y;++j);if(w[j].id!=y)throw"Bad ColumnRowUIDMapArchive";var I=Ia(w[j].messages[0].data);I[1]=[],I[2]=[],I[3]=[];for(var _=0;_<=n.e.c;++_){var S=[];S[1]=S[2]=[{type:0,data:za(_+420690)}],I[1].push({type:2,data:ml(S)}),I[2].push({type:0,data:za(_)}),I[3].push({type:0,data:za(_)})}I[4]=[],I[5]=[],I[6]=[];for(var E=0;E<=n.e.r;++E)S=[],S[1]=S[2]=[{type:0,data:za(E+726270)}],I[4].push({type:2,data:ml(S)}),I[5].push({type:0,data:za(E)}),I[6].push({type:0,data:za(E)});w[j].messages[0].data=ml(I)}b.content=px(mx(w)),b.size=b.content.length,delete v[46];var T=Ia(v[4][0].data);{T[7][0].data=za(n.e.r+1);var k=Ia(T[1][0].data),B=Yl(k[2][0].data);b=_n.find(u,l[B].location),w=ud(dd(b.content));{if(w[0].id!=B)throw"Bad HeaderStorageBucket";var D=Ia(w[0].messages[0].data);for(E=0;E<s.length;++E){var X=Ia(D[2][0].data);X[1][0].data=za(E),X[4][0].data=za(s[E].length),D[2][E]={type:D[2][0].type,data:ml(X)}}w[0].messages[0].data=ml(D)}b.content=px(mx(w)),b.size=b.content.length;var me=Yl(T[2][0].data);b=_n.find(u,l[me].location),w=ud(dd(b.content));{if(w[0].id!=me)throw"Bad HeaderStorageBucket";for(D=Ia(w[0].messages[0].data),_=0;_<=n.e.c;++_)X=Ia(D[2][0].data),X[1][0].data=za(_),X[4][0].data=za(n.e.r+1),D[2][_]={type:D[2][0].type,data:ml(X)};w[0].messages[0].data=ml(D)}b.content=px(mx(w)),b.size=b.content.length;var pe=Yl(T[4][0].data);(function(){for(var G=_n.find(u,l[pe].location),z=ud(dd(G.content)),U,Y=0;Y<z.length;++Y){var ee=z[Y];ee.id==pe&&(U=ee)}var M=Ia(U.messages[0].data);{M[3]=[];var H=[];o.forEach(function(V,We){H[1]=[{type:0,data:za(We)}],H[2]=[{type:0,data:za(1)}],H[3]=[{type:2,data:GMe(V)}],M[3].push({type:2,data:ml(H)})})}U.messages[0].data=ml(M);var te=mx(z),Ce=px(te);G.content=Ce,G.size=G.content.length})();var he=Ia(T[3][0].data);{var ve=he[1][0];delete he[2];var ae=Ia(ve.data);{var Pe=Yl(ae[2][0].data);(function(){for(var G=_n.find(u,l[Pe].location),z=ud(dd(G.content)),U,Y=0;Y<z.length;++Y){var ee=z[Y];ee.id==Pe&&(U=ee)}var M=Ia(U.messages[0].data);{delete M[6],delete he[7];var H=new Uint8Array(M[5][0].data);M[5]=[];for(var te=0,Ce=0;Ce<=n.e.r;++Ce){var V=Ia(H);te+=s8e(V,s[Ce],o),V[1][0].data=za(Ce),M[5].push({data:ml(V),type:2})}M[1]=[{type:0,data:za(n.e.c+1)}],M[2]=[{type:0,data:za(n.e.r+1)}],M[3]=[{type:0,data:za(te)}],M[4]=[{type:0,data:za(n.e.r+1)}]}U.messages[0].data=ml(M);var We=mx(z),ie=px(We);G.content=ie,G.size=G.content.length})()}ve.data=ml(ae)}T[3][0].data=ml(he)}v[4][0].data=ml(T)}h.messages[0].data=ml(v);var ke=mx(A),O=px(ke);return f.content=O,f.size=f.content.length,u}function lse(t){return function(r){for(var n=0;n!=t.length;++n){var a=t[n];r[a[0]]===void 0&&(r[a[0]]=a[1]),a[2]==="n"&&(r[a[0]]=Number(r[a[0]]))}}}function IR(t){lse([["cellNF",!1],["cellHTML",!0],["cellFormula",!0],["cellStyles",!1],["cellText",!0],["cellDates",!1],["sheetStubs",!1],["sheetRows",0,"n"],["bookDeps",!1],["bookSheets",!1],["bookProps",!1],["bookFiles",!1],["bookVBA",!1],["password",""],["WTF",!1]])(t)}function jR(t){lse([["cellDates",!1],["bookSST",!1],["bookType","xlsx"],["compression",!1],["WTF",!1]])(t)}function o8e(t){return ia.WS.indexOf(t)>-1?"sheet":t==ia.CS?"chart":t==ia.DS?"dialog":t==ia.MS?"macro":t&&t.length?t:"sheet"}function l8e(t,e){if(!t)return 0;try{t=e.map(function(n){return n.id||(n.id=n.strRelID),[n.name,t["!id"][n.id].Target,o8e(t["!id"][n.id].Type)]})}catch{return null}return!t||t.length===0?null:t}function c8e(t,e,r,n,a,s,o,l,c,u,d,f){try{s[n]=Fb(Bu(t,r,!0),e);var A=eo(t,e),h;switch(l){case"sheet":h=BRe(A,e,a,c,s[n],u,d,f);break;case"chart":if(h=TRe(A,e,a,c,s[n],u,d,f),!h||!h["!drawel"])break;var m=Xy(h["!drawel"].Target,e),p=O2(m),x=xFe(Bu(t,m,!0),Fb(Bu(t,p,!0),m)),v=Xy(x,m),y=O2(v);h=sRe(Bu(t,v,!0),v,c,Fb(Bu(t,y,!0),v),u,h);break;case"macro":h=kRe(A,e,a,c,s[n],u,d,f);break;case"dialog":h=FRe(A,e,a,c,s[n],u,d,f);break;default:throw new Error("Unrecognized sheet type "+l)}o[n]=h;var b=[];s&&s[n]&&Ii(s[n]).forEach(function(w){var j="";if(s[n][w].Type==ia.CMNT){j=Xy(s[n][w].Target,e);var I=MRe(eo(t,j,!0),j,c);if(!I||!I.length)return;YH(h,I,!1)}s[n][w].Type==ia.TCMNT&&(j=Xy(s[n][w].Target,e),b=b.concat(yFe(eo(t,j,!0),c)))}),b&&b.length&&YH(h,b,!0,c.people||[])}catch(w){if(c.WTF)throw w}}function ad(t){return t.charAt(0)=="/"?t.slice(1):t}function u8e(t,e){if(v1(),e=e||{},IR(e),pd(t,"META-INF/manifest.xml")||pd(t,"objectdata.xml"))return l$(t,e);if(pd(t,"Index/Document.iwa")){if(typeof Uint8Array>"u")throw new Error("NUMBERS file parsing requires Uint8Array support");if(typeof M5<"u"){if(t.FileIndex)return M5(t);var r=_n.utils.cfb_new();return xH(t).forEach(function(X){Yn(r,X,b3e(t,X))}),M5(r)}throw new Error("Unsupported NUMBERS file")}if(!pd(t,"[Content_Types].xml"))throw pd(t,"index.xml.gz")?new Error("Unsupported NUMBERS 08 file"):pd(t,"index.xml")?new Error("Unsupported NUMBERS 09 file"):new Error("Unsupported ZIP file");var n=xH(t),a=A5e(Bu(t,"[Content_Types].xml")),s=!1,o,l;if(a.workbooks.length===0&&(l="xl/workbook.xml",eo(t,l,!0)&&a.workbooks.push(l)),a.workbooks.length===0){if(l="xl/workbook.bin",!eo(t,l,!0))throw new Error("Could not find workbook");a.workbooks.push(l),s=!0}a.workbooks[0].slice(-3)=="bin"&&(s=!0);var c={},u={};if(!e.bookSheets&&!e.bookProps){if(Ob=[],a.sst)try{Ob=RRe(eo(t,ad(a.sst)),a.sst,e)}catch(X){if(e.WTF)throw X}e.cellStyles&&a.themes.length&&(c=DRe(Bu(t,a.themes[0].replace(/^\//,""),!0)||"",a.themes[0],e)),a.style&&(u=ORe(eo(t,ad(a.style)),a.style,c,e))}a.links.map(function(X){try{var me=Fb(Bu(t,O2(ad(X))),X);return URe(eo(t,ad(X)),me,X,e)}catch{}});var d=PRe(eo(t,ad(a.workbooks[0])),a.workbooks[0],e),f={},A="";a.coreprops.length&&(A=eo(t,ad(a.coreprops[0]),!0),A&&(f=Xne(A)),a.extprops.length!==0&&(A=eo(t,ad(a.extprops[0]),!0),A&&b5e(A,f,e)));var h={};(!e.bookSheets||e.bookProps)&&a.custprops.length!==0&&(A=Bu(t,ad(a.custprops[0]),!0),A&&(h=N5e(A,e)));var m={};if((e.bookSheets||e.bookProps)&&(d.Sheets?o=d.Sheets.map(function(me){return me.name}):f.Worksheets&&f.SheetNames.length>0&&(o=f.SheetNames),e.bookProps&&(m.Props=f,m.Custprops=h),e.bookSheets&&typeof o<"u"&&(m.SheetNames=o),e.bookSheets?m.SheetNames:e.bookProps))return m;o={};var p={};e.bookDeps&&a.calcchain&&(p=LRe(eo(t,ad(a.calcchain)),a.calcchain));var x=0,v={},y,b;{var w=d.Sheets;f.Worksheets=w.length,f.SheetNames=[];for(var j=0;j!=w.length;++j)f.SheetNames[j]=w[j].name}var I=s?"bin":"xml",_=a.workbooks[0].lastIndexOf("/"),S=(a.workbooks[0].slice(0,_+1)+"_rels/"+a.workbooks[0].slice(_+1)+".rels").replace(/^\//,"");pd(t,S)||(S="xl/_rels/workbook."+I+".rels");var E=Fb(Bu(t,S,!0),S.replace(/_rels.*/,"s5s"));(a.metadata||[]).length>=1&&(e.xlmeta=QRe(eo(t,ad(a.metadata[0])),a.metadata[0],e)),(a.people||[]).length>=1&&(e.people=wFe(eo(t,ad(a.people[0])),e)),E&&(E=l8e(E,d.Sheets));var T=eo(t,"xl/worksheets/sheet.xml",!0)?1:0;e:for(x=0;x!=f.Worksheets;++x){var k="sheet";if(E&&E[x]?(y="xl/"+E[x][1].replace(/[\/]?xl\//,""),pd(t,y)||(y=E[x][1]),pd(t,y)||(y=S.replace(/_rels\/.*$/,"")+E[x][1]),k=E[x][2]):(y="xl/worksheets/sheet"+(x+1-T)+"."+I,y=y.replace(/sheet0\./,"sheet.")),b=y.replace(/^(.*)(\/)([^\/]*)$/,"$1/_rels/$3.rels"),e&&e.sheets!=null)switch(typeof e.sheets){case"number":if(x!=e.sheets)continue e;break;case"string":if(f.SheetNames[x].toLowerCase()!=e.sheets.toLowerCase())continue e;break;default:if(Array.isArray&&Array.isArray(e.sheets)){for(var B=!1,D=0;D!=e.sheets.length;++D)typeof e.sheets[D]=="number"&&e.sheets[D]==x&&(B=1),typeof e.sheets[D]=="string"&&e.sheets[D].toLowerCase()==f.SheetNames[x].toLowerCase()&&(B=1);if(!B)continue e}}c8e(t,y,b,f.SheetNames[x],x,v,o,k,e,d,c,u)}return m={Directory:a,Workbook:d,Props:f,Custprops:h,Deps:p,Sheets:o,SheetNames:f.SheetNames,Strings:Ob,Styles:u,Themes:c,SSF:Os(Tn)},e&&e.bookFiles&&(t.files?(m.keys=n,m.files=t.files):(m.keys=[],m.files={},t.FullPaths.forEach(function(X,me){X=X.replace(/^Root Entry[\/]/,""),m.keys.push(X),m.files[X]=t.FileIndex[me]}))),e&&e.bookVBA&&(a.vba.length>0?m.vbaraw=eo(t,ad(a.vba[0]),!0):a.defaults&&a.defaults.bin===PFe&&(m.vbaraw=eo(t,"xl/vbaProject.bin",!0))),m}function d8e(t,e){var r=e||{},n="Workbook",a=_n.find(t,n);try{if(n="/!DataSpaces/Version",a=_n.find(t,n),!a||!a.content)throw new Error("ECMA-376 Encrypted file missing "+n);if(QTe(a.content),n="/!DataSpaces/DataSpaceMap",a=_n.find(t,n),!a||!a.content)throw new Error("ECMA-376 Encrypted file missing "+n);var s=HTe(a.content);if(s.length!==1||s[0].comps.length!==1||s[0].comps[0].t!==0||s[0].name!=="StrongEncryptionDataSpace"||s[0].comps[0].v!=="EncryptedPackage")throw new Error("ECMA-376 Encrypted file bad "+n);if(n="/!DataSpaces/DataSpaceInfo/StrongEncryptionDataSpace",a=_n.find(t,n),!a||!a.content)throw new Error("ECMA-376 Encrypted file missing "+n);var o=$Te(a.content);if(o.length!=1||o[0]!="StrongEncryptionTransform")throw new Error("ECMA-376 Encrypted file bad "+n);if(n="/!DataSpaces/TransformInfo/StrongEncryptionTransform/!Primary",a=_n.find(t,n),!a||!a.content)throw new Error("ECMA-376 Encrypted file missing "+n);KTe(a.content)}catch{}if(n="/EncryptionInfo",a=_n.find(t,n),!a||!a.content)throw new Error("ECMA-376 Encrypted file missing "+n);var l=qTe(a.content);if(n="/EncryptedPackage",a=_n.find(t,n),!a||!a.content)throw new Error("ECMA-376 Encrypted file missing "+n);if(l[0]==4&&typeof decrypt_agile<"u")return decrypt_agile(l[1],a.content,r.password||"",r);if(l[0]==2&&typeof decrypt_std76<"u")return decrypt_std76(l[1],a.content,r.password||"",r);throw new Error("File is password-protected")}function f8e(t,e){return e.bookType=="ods"?ose(t,e):e.bookType=="numbers"?i8e(t,e):e.bookType=="xlsb"?h8e(t,e):A8e(t,e)}function h8e(t,e){Wx=1024,t&&!t.SSF&&(t.SSF=Os(Tn)),t&&t.SSF&&(v1(),oP(t.SSF),e.revssf=cP(t.SSF),e.revssf[t.SSF[65535]]=0,e.ssf=t.SSF),e.rels={},e.wbrels={},e.Strings=[],e.Strings.Count=0,e.Strings.Unique=0,Db?e.revStrings=new Map:(e.revStrings={},e.revStrings.foo=[],delete e.revStrings.foo);var r=e.bookType=="xlsb"?"bin":"xml",n=Oae.indexOf(e.bookType)>-1,a=AR();jR(e=e||{});var s=eR(),o="",l=0;if(e.cellXfs=[],Qm(e.cellXfs,{},{revssf:{General:0}}),t.Props||(t.Props={}),o="docProps/core.xml",Yn(s,o,Yne(t.Props,e)),a.coreprops.push(o),Ya(e.rels,2,o,ia.CORE_PROPS),o="docProps/app.xml",!(t.Props&&t.Props.SheetNames))if(!t.Workbook||!t.Workbook.Sheets)t.Props.SheetNames=t.SheetNames;else{for(var c=[],u=0;u<t.SheetNames.length;++u)(t.Workbook.Sheets[u]||{}).Hidden!=2&&c.push(t.SheetNames[u]);t.Props.SheetNames=c}for(t.Props.Worksheets=t.Props.SheetNames.length,Yn(s,o,eae(t.Props)),a.extprops.push(o),Ya(e.rels,3,o,ia.EXT_PROPS),t.Custprops!==t.Props&&Ii(t.Custprops||{}).length>0&&(o="docProps/custom.xml",Yn(s,o,tae(t.Custprops)),a.custprops.push(o),Ya(e.rels,4,o,ia.CUST_PROPS)),l=1;l<=t.SheetNames.length;++l){var d={"!id":{}},f=t.Sheets[t.SheetNames[l-1]],A=(f||{})["!type"]||"sheet";switch(A){case"chart":default:o="xl/worksheets/sheet"+l+"."+r,Yn(s,o,HRe(l-1,o,e,t,d)),a.sheets.push(o),Ya(e.wbrels,-1,"worksheets/sheet"+l+"."+r,ia.WS[0])}if(f){var h=f["!comments"],m=!1,p="";h&&h.length>0&&(p="xl/comments"+l+"."+r,Yn(s,p,KRe(h,p)),a.comments.push(p),Ya(d,-1,"../comments"+l+"."+r,ia.CMNT),m=!0),f["!legacy"]&&m&&Yn(s,"xl/drawings/vmlDrawing"+l+".vml",kae(l,f["!comments"])),delete f["!comments"],delete f["!legacy"]}d["!id"].rId1&&Yn(s,O2(o),pv(d))}return e.Strings!=null&&e.Strings.length>0&&(o="xl/sharedStrings."+r,Yn(s,o,GRe(e.Strings,o,e)),a.strs.push(o),Ya(e.wbrels,-1,"sharedStrings."+r,ia.SST)),o="xl/workbook."+r,Yn(s,o,VRe(t,o)),a.workbooks.push(o),Ya(e.rels,1,o,ia.WB),o="xl/theme/theme1.xml",Yn(s,o,yR(t.Themes,e)),a.themes.push(o),Ya(e.wbrels,-1,"theme/theme1.xml",ia.THEME),o="xl/styles."+r,Yn(s,o,$Re(t,o,e)),a.styles.push(o),Ya(e.wbrels,-1,"styles."+r,ia.STY),t.vbaraw&&n&&(o="xl/vbaProject.bin",Yn(s,o,t.vbaraw),a.vba.push(o),Ya(e.wbrels,-1,"vbaProject.bin",ia.VBA)),o="xl/metadata."+r,Yn(s,o,qRe(o)),a.metadata.push(o),Ya(e.wbrels,-1,"metadata."+r,ia.XLMETA),Yn(s,"[Content_Types].xml",zne(a,e)),Yn(s,"_rels/.rels",pv(e.rels)),Yn(s,"xl/_rels/workbook."+r+".rels",pv(e.wbrels)),delete e.revssf,delete e.ssf,s}function A8e(t,e){Wx=1024,t&&!t.SSF&&(t.SSF=Os(Tn)),t&&t.SSF&&(v1(),oP(t.SSF),e.revssf=cP(t.SSF),e.revssf[t.SSF[65535]]=0,e.ssf=t.SSF),e.rels={},e.wbrels={},e.Strings=[],e.Strings.Count=0,e.Strings.Unique=0,Db?e.revStrings=new Map:(e.revStrings={},e.revStrings.foo=[],delete e.revStrings.foo);var r="xml",n=Oae.indexOf(e.bookType)>-1,a=AR();jR(e=e||{});var s=eR(),o="",l=0;if(e.cellXfs=[],Qm(e.cellXfs,{},{revssf:{General:0}}),t.Props||(t.Props={}),o="docProps/core.xml",Yn(s,o,Yne(t.Props,e)),a.coreprops.push(o),Ya(e.rels,2,o,ia.CORE_PROPS),o="docProps/app.xml",!(t.Props&&t.Props.SheetNames))if(!t.Workbook||!t.Workbook.Sheets)t.Props.SheetNames=t.SheetNames;else{for(var c=[],u=0;u<t.SheetNames.length;++u)(t.Workbook.Sheets[u]||{}).Hidden!=2&&c.push(t.SheetNames[u]);t.Props.SheetNames=c}t.Props.Worksheets=t.Props.SheetNames.length,Yn(s,o,eae(t.Props)),a.extprops.push(o),Ya(e.rels,3,o,ia.EXT_PROPS),t.Custprops!==t.Props&&Ii(t.Custprops||{}).length>0&&(o="docProps/custom.xml",Yn(s,o,tae(t.Custprops)),a.custprops.push(o),Ya(e.rels,4,o,ia.CUST_PROPS));var d=["SheetJ5"];for(e.tcid=0,l=1;l<=t.SheetNames.length;++l){var f={"!id":{}},A=t.Sheets[t.SheetNames[l-1]],h=(A||{})["!type"]||"sheet";switch(h){case"chart":default:o="xl/worksheets/sheet"+l+"."+r,Yn(s,o,Kae(l-1,e,t,f)),a.sheets.push(o),Ya(e.wbrels,-1,"worksheets/sheet"+l+"."+r,ia.WS[0])}if(A){var m=A["!comments"],p=!1,x="";if(m&&m.length>0){var v=!1;m.forEach(function(y){y[1].forEach(function(b){b.T==!0&&(v=!0)})}),v&&(x="xl/threadedComments/threadedComment"+l+"."+r,Yn(s,x,bFe(m,d,e)),a.threadedcomments.push(x),Ya(f,-1,"../threadedComments/threadedComment"+l+"."+r,ia.TCMNT)),x="xl/comments"+l+"."+r,Yn(s,x,Fae(m)),a.comments.push(x),Ya(f,-1,"../comments"+l+"."+r,ia.CMNT),p=!0}A["!legacy"]&&p&&Yn(s,"xl/drawings/vmlDrawing"+l+".vml",kae(l,A["!comments"])),delete A["!comments"],delete A["!legacy"]}f["!id"].rId1&&Yn(s,O2(o),pv(f))}return e.Strings!=null&&e.Strings.length>0&&(o="xl/sharedStrings."+r,Yn(s,o,bae(e.Strings,e)),a.strs.push(o),Ya(e.wbrels,-1,"sharedStrings."+r,ia.SST)),o="xl/workbook."+r,Yn(s,o,Yae(t)),a.workbooks.push(o),Ya(e.rels,1,o,ia.WB),o="xl/theme/theme1.xml",Yn(s,o,yR(t.Themes,e)),a.themes.push(o),Ya(e.wbrels,-1,"theme/theme1.xml",ia.THEME),o="xl/styles."+r,Yn(s,o,jae(t,e)),a.styles.push(o),Ya(e.wbrels,-1,"styles."+r,ia.STY),t.vbaraw&&n&&(o="xl/vbaProject.bin",Yn(s,o,t.vbaraw),a.vba.push(o),Ya(e.wbrels,-1,"vbaProject.bin",ia.VBA)),o="xl/metadata."+r,Yn(s,o,Tae()),a.metadata.push(o),Ya(e.wbrels,-1,"metadata."+r,ia.XLMETA),d.length>1&&(o="xl/persons/person.xml",Yn(s,o,NFe(d)),a.people.push(o),Ya(e.wbrels,-1,"persons/person.xml",ia.PEOPLE)),Yn(s,"[Content_Types].xml",zne(a,e)),Yn(s,"_rels/.rels",pv(e.rels)),Yn(s,"xl/_rels/workbook."+r+".rels",pv(e.wbrels)),delete e.revssf,delete e.ssf,s}function PR(t,e){var r="";switch((e||{}).type||"base64"){case"buffer":return[t[0],t[1],t[2],t[3],t[4],t[5],t[6],t[7]];case"base64":r=Hu(t.slice(0,12));break;case"binary":r=t;break;case"array":return[t[0],t[1],t[2],t[3],t[4],t[5],t[6],t[7]];default:throw new Error("Unrecognized type "+(e&&e.type||"undefined"))}return[r.charCodeAt(0),r.charCodeAt(1),r.charCodeAt(2),r.charCodeAt(3),r.charCodeAt(4),r.charCodeAt(5),r.charCodeAt(6),r.charCodeAt(7)]}function m8e(t,e){return _n.find(t,"EncryptedPackage")?d8e(t,e):tse(t,e)}function p8e(t,e){var r,n=t,a=e||{};return a.type||(a.type=ea&&Buffer.isBuffer(t)?"buffer":"base64"),r=Nne(n,a),u8e(r,a)}function cse(t,e){var r=0;e:for(;r<t.length;)switch(t.charCodeAt(r)){case 10:case 13:case 32:++r;break;case 60:return rF(t.slice(r),e);default:break e}return Uv.to_workbook(t,e)}function g8e(t,e){var r="",n=PR(t,e);switch(e.type){case"base64":r=Hu(t);break;case"binary":r=t;break;case"buffer":r=t.toString("binary");break;case"array":r=fg(t);break;default:throw new Error("Unrecognized type "+e.type)}return n[0]==239&&n[1]==187&&n[2]==191&&(r=ls(r)),e.type="binary",cse(r,e)}function x8e(t,e){var r=t;return e.type=="base64"&&(r=Hu(r)),r=j2.utils.decode(1200,r.slice(2),"str"),e.type="binary",cse(r,e)}function v8e(t){return t.match(/[^\x00-\x7F]/)?Jf(t):t}function L5(t,e,r,n){return n?(r.type="string",Uv.to_workbook(t,r)):Uv.to_workbook(e,r)}function Vv(t,e){W6();var r=e||{};if(typeof ArrayBuffer<"u"&&t instanceof ArrayBuffer)return Vv(new Uint8Array(t),(r=Os(r),r.type="array",r));typeof Uint8Array<"u"&&t instanceof Uint8Array&&!r.type&&(r.type=typeof Deno<"u"?"buffer":"array");var n=t,a=[0,0,0,0],s=!1;if(r.cellStyles&&(r.cellNF=!0,r.sheetStubs=!0),xv={},r.dateNF&&(xv.dateNF=r.dateNF),r.type||(r.type=ea&&Buffer.isBuffer(t)?"buffer":"base64"),r.type=="file"&&(r.type=ea?"buffer":"binary",n=h3e(t),typeof Uint8Array<"u"&&!ea&&(r.type="array")),r.type=="string"&&(s=!0,r.type="binary",r.codepage=65001,n=v8e(t)),r.type=="array"&&typeof Uint8Array<"u"&&t instanceof Uint8Array&&typeof ArrayBuffer<"u"){var o=new ArrayBuffer(3),l=new Uint8Array(o);if(l.foo="bar",!l.foo)return r=Os(r),r.type="array",Vv(X6(n),r)}switch((a=PR(n,r))[0]){case 208:if(a[1]===207&&a[2]===17&&a[3]===224&&a[4]===161&&a[5]===177&&a[6]===26&&a[7]===225)return m8e(_n.read(n,r),r);break;case 9:if(a[1]<=8)return tse(n,r);break;case 60:return rF(n,r);case 73:if(a[1]===73&&a[2]===42&&a[3]===0)throw new Error("TIFF Image File is not a spreadsheet");if(a[1]===68)return CTe(n,r);break;case 84:if(a[1]===65&&a[2]===66&&a[3]===76)return vae.to_workbook(n,r);break;case 80:return a[1]===75&&a[2]<9&&a[3]<9?p8e(n,r):L5(t,n,r,s);case 239:return a[3]===60?rF(n,r):L5(t,n,r,s);case 255:if(a[1]===254)return x8e(n,r);if(a[1]===0&&a[2]===2&&a[3]===0)return Qp.to_workbook(n,r);break;case 0:if(a[1]===0&&(a[2]>=2&&a[3]===0||a[2]===0&&(a[3]===8||a[3]===9)))return Qp.to_workbook(n,r);break;case 3:case 131:case 139:case 140:return tF.to_workbook(n,r);case 123:if(a[1]===92&&a[2]===114&&a[3]===116)return Eae.to_workbook(n,r);break;case 10:case 13:case 32:return g8e(n,r);case 137:if(a[1]===80&&a[2]===78&&a[3]===71)throw new Error("PNG Image File is not a spreadsheet");break}return NTe.indexOf(a[0])>-1&&a[2]<=12&&a[3]<=31?tF.to_workbook(n,r):L5(t,n,r,s)}function use(t,e){switch(e.type){case"base64":case"binary":break;case"buffer":case"array":e.type="";break;case"file":return Rw(e.file,_n.write(t,{type:ea?"buffer":""}));case"string":throw new Error("'string' output type invalid for '"+e.bookType+"' files");default:throw new Error("Unrecognized type "+e.type)}return _n.write(t,e)}function y8e(t,e){var r=Os(e||{}),n=f8e(t,r);return b8e(n,r)}function b8e(t,e){var r={},n=ea?"nodebuffer":typeof Uint8Array<"u"?"array":"string";if(e.compression&&(r.compression="DEFLATE"),e.password)r.type=n;else switch(e.type){case"base64":r.type="base64";break;case"binary":r.type="string";break;case"string":throw new Error("'string' output type invalid for '"+e.bookType+"' files");case"buffer":case"file":r.type=n;break;default:throw new Error("Unrecognized type "+e.type)}var a=t.FullPaths?_n.write(t,{fileType:"zip",type:{nodebuffer:"buffer",string:"binary"}[r.type]||r.type,compression:!!e.compression}):t.generate(r);if(typeof Deno<"u"&&typeof a=="string"){if(e.type=="binary"||e.type=="base64")return a;a=new Uint8Array(iP(a))}return e.password&&typeof encrypt_agile<"u"?use(encrypt_agile(a,e.password),e):e.type==="file"?Rw(e.file,a):e.type=="string"?ls(a):a}function w8e(t,e){var r=e||{},n=vMe(t,r);return use(n,r)}function Hf(t,e,r){r||(r="");var n=r+t;switch(e.type){case"base64":return P2(Jf(n));case"binary":return Jf(n);case"string":return t;case"file":return Rw(e.file,n,"utf8");case"buffer":return ea?OA(n,"utf8"):typeof TextEncoder<"u"?new TextEncoder().encode(n):Hf(n,{type:"binary"}).split("").map(function(a){return a.charCodeAt(0)})}throw new Error("Unrecognized type "+e.type)}function N8e(t,e){switch(e.type){case"base64":return P2(t);case"binary":return t;case"string":return t;case"file":return Rw(e.file,t,"binary");case"buffer":return ea?OA(t,"binary"):t.split("").map(function(r){return r.charCodeAt(0)})}throw new Error("Unrecognized type "+e.type)}function YC(t,e){switch(e.type){case"string":case"base64":case"binary":for(var r="",n=0;n<t.length;++n)r+=String.fromCharCode(t[n]);return e.type=="base64"?P2(r):e.type=="string"?ls(r):r;case"file":return Rw(e.file,t);case"buffer":return t;default:throw new Error("Unrecognized type "+e.type)}}function mP(t,e){W6(),mRe(t);var r=Os(e||{});if(r.cellStyles&&(r.cellNF=!0,r.sheetStubs=!0),r.type=="array"){r.type="binary";var n=mP(t,r);return r.type="array",iP(n)}var a=0;if(r.sheet&&(typeof r.sheet=="number"?a=r.sheet:a=t.SheetNames.indexOf(r.sheet),!t.SheetNames[a]))throw new Error("Sheet not found: "+r.sheet+" : "+typeof r.sheet);switch(r.bookType||"xlsb"){case"xml":case"xlml":return Hf(fMe(t,r),r);case"slk":case"sylk":return Hf(xae.from_sheet(t.Sheets[t.SheetNames[a]],r),r);case"htm":case"html":return Hf(nse(t.Sheets[t.SheetNames[a]],r),r);case"txt":return N8e(dse(t.Sheets[t.SheetNames[a]],r),r);case"csv":return Hf(BR(t.Sheets[t.SheetNames[a]],r),r,"\uFEFF");case"dif":return Hf(vae.from_sheet(t.Sheets[t.SheetNames[a]],r),r);case"dbf":return YC(tF.from_sheet(t.Sheets[t.SheetNames[a]],r),r);case"prn":return Hf(Uv.from_sheet(t.Sheets[t.SheetNames[a]],r),r);case"rtf":return Hf(Eae.from_sheet(t.Sheets[t.SheetNames[a]],r),r);case"eth":return Hf(yae.from_sheet(t.Sheets[t.SheetNames[a]],r),r);case"fods":return Hf(ose(t,r),r);case"wk1":return YC(Qp.sheet_to_wk1(t.Sheets[t.SheetNames[a]],r),r);case"wk3":return YC(Qp.book_to_wk3(t,r),r);case"biff2":r.biff||(r.biff=2);case"biff3":r.biff||(r.biff=3);case"biff4":return r.biff||(r.biff=4),YC(rse(t,r),r);case"biff5":r.biff||(r.biff=5);case"biff8":case"xla":case"xls":return r.biff||(r.biff=8),w8e(t,r);case"xlsx":case"xlsm":case"xlam":case"xlsb":case"numbers":case"ods":return y8e(t,r);default:throw new Error("Unrecognized bookType |"+r.bookType+"|")}}function C8e(t){if(!t.bookType){var e={xls:"biff8",htm:"html",slk:"sylk",socialcalc:"eth",Sh33tJS:"WTF"},r=t.file.slice(t.file.lastIndexOf(".")).toLowerCase();r.match(/^\.[a-z]+$/)&&(t.bookType=r.slice(1)),t.bookType=e[t.bookType]||t.bookType}}function V2(t,e,r){var n={};return n.type="file",n.file=e,C8e(n),mP(t,n)}function _8e(t,e,r,n,a,s,o,l){var c=Ki(r),u=l.defval,d=l.raw||!Object.prototype.hasOwnProperty.call(l,"raw"),f=!0,A=a===1?[]:{};if(a!==1)if(Object.defineProperty)try{Object.defineProperty(A,"__rowNum__",{value:r,enumerable:!1})}catch{A.__rowNum__=r}else A.__rowNum__=r;if(!o||t[r])for(var h=e.s.c;h<=e.e.c;++h){var m=o?t[r][h]:t[n[h]+c];if(m===void 0||m.t===void 0){if(u===void 0)continue;s[h]!=null&&(A[s[h]]=u);continue}var p=m.v;switch(m.t){case"z":if(p==null)break;continue;case"e":p=p==0?null:void 0;break;case"s":case"d":case"b":case"n":break;default:throw new Error("unrecognized type "+m.t)}if(s[h]!=null){if(p==null)if(m.t=="e"&&p===null)A[s[h]]=null;else if(u!==void 0)A[s[h]]=u;else if(d&&p===null)A[s[h]]=null;else continue;else A[s[h]]=d&&(m.t!=="n"||m.t==="n"&&l.rawNumbers!==!1)?p:yA(m,p,l);p!=null&&(f=!1)}}return{row:A,isempty:f}}function YS(t,e){if(t==null||t["!ref"]==null)return[];var r={t:"n",v:0},n=0,a=1,s=[],o=0,l="",c={s:{r:0,c:0},e:{r:0,c:0}},u=e||{},d=u.range!=null?u.range:t["!ref"];switch(u.header===1?n=1:u.header==="A"?n=2:Array.isArray(u.header)?n=3:u.header==null&&(n=0),typeof d){case"string":c=Ea(d);break;case"number":c=Ea(t["!ref"]),c.s.r=d;break;default:c=d}n>0&&(a=0);var f=Ki(c.s.r),A=[],h=[],m=0,p=0,x=Array.isArray(t),v=c.s.r,y=0,b={};x&&!t[v]&&(t[v]=[]);var w=u.skipHidden&&t["!cols"]||[],j=u.skipHidden&&t["!rows"]||[];for(y=c.s.c;y<=c.e.c;++y)if(!(w[y]||{}).hidden)switch(A[y]=oi(y),r=x?t[v][y]:t[A[y]+f],n){case 1:s[y]=y-c.s.c;break;case 2:s[y]=A[y];break;case 3:s[y]=u.header[y-c.s.c];break;default:if(r==null&&(r={w:"__EMPTY",t:"s"}),l=o=yA(r,null,u),p=b[o]||0,!p)b[o]=1;else{do l=o+"_"+p++;while(b[l]);b[o]=p,b[l]=1}s[y]=l}for(v=c.s.r+a;v<=c.e.r;++v)if(!(j[v]||{}).hidden){var I=_8e(t,c,v,A,n,s,x,u);(I.isempty===!1||(n===1?u.blankrows!==!1:u.blankrows))&&(h[m++]=I.row)}return h.length=m,h}var h$=/"/g;function E8e(t,e,r,n,a,s,o,l){for(var c=!0,u=[],d="",f=Ki(r),A=e.s.c;A<=e.e.c;++A)if(n[A]){var h=l.dense?(t[r]||[])[A]:t[n[A]+f];if(h==null)d="";else if(h.v!=null){c=!1,d=""+(l.rawNumbers&&h.t=="n"?h.v:yA(h,null,l));for(var m=0,p=0;m!==d.length;++m)if((p=d.charCodeAt(m))===a||p===s||p===34||l.forceQuotes){d='"'+d.replace(h$,'""')+'"';break}d=="ID"&&(d='"ID"')}else h.f!=null&&!h.F?(c=!1,d="="+h.f,d.indexOf(",")>=0&&(d='"'+d.replace(h$,'""')+'"')):d="";u.push(d)}return l.blankrows===!1&&c?null:u.join(o)}function BR(t,e){var r=[],n=e??{};if(t==null||t["!ref"]==null)return"";var a=Ea(t["!ref"]),s=n.FS!==void 0?n.FS:",",o=s.charCodeAt(0),l=n.RS!==void 0?n.RS:`
`,c=l.charCodeAt(0),u=new RegExp((s=="|"?"\\|":s)+"+$"),d="",f=[];n.dense=Array.isArray(t);for(var A=n.skipHidden&&t["!cols"]||[],h=n.skipHidden&&t["!rows"]||[],m=a.s.c;m<=a.e.c;++m)(A[m]||{}).hidden||(f[m]=oi(m));for(var p=0,x=a.s.r;x<=a.e.r;++x)(h[x]||{}).hidden||(d=E8e(t,a,x,f,o,c,s,n),d!=null&&(n.strip&&(d=d.replace(u,"")),(d||n.blankrows!==!1)&&r.push((p++?l:"")+d)));return delete n.dense,r.join("")}function dse(t,e){e||(e={}),e.FS="	",e.RS=`
`;var r=BR(t,e);return r}function S8e(t){var e="",r,n="";if(t==null||t["!ref"]==null)return[];var a=Ea(t["!ref"]),s="",o=[],l,c=[],u=Array.isArray(t);for(l=a.s.c;l<=a.e.c;++l)o[l]=oi(l);for(var d=a.s.r;d<=a.e.r;++d)for(s=Ki(d),l=a.s.c;l<=a.e.c;++l)if(e=o[l]+s,r=u?(t[d]||[])[l]:t[e],n="",r!==void 0){if(r.F!=null){if(e=r.F,!r.f)continue;n=r.f,e.indexOf(":")==-1&&(e=e+":"+e)}if(r.f!=null)n=r.f;else{if(r.t=="z")continue;if(r.t=="n"&&r.v!=null)n=""+r.v;else if(r.t=="b")n=r.v?"TRUE":"FALSE";else if(r.w!==void 0)n="'"+r.w;else{if(r.v===void 0)continue;r.t=="s"?n="'"+r.v:n=""+r.v}}c[c.length]=e+"="+n}return c}function fse(t,e,r){var n=r||{},a=+!n.skipHeader,s=t||{},o=0,l=0;if(s&&n.origin!=null)if(typeof n.origin=="number")o=n.origin;else{var c=typeof n.origin=="string"?li(n.origin):n.origin;o=c.r,l=c.c}var u,d={s:{c:0,r:0},e:{c:l,r:o+e.length-1+a}};if(s["!ref"]){var f=Ea(s["!ref"]);d.e.c=Math.max(d.e.c,f.e.c),d.e.r=Math.max(d.e.r,f.e.r),o==-1&&(o=f.e.r+1,d.e.r=o+e.length-1+a)}else o==-1&&(o=0,d.e.r=e.length-1+a);var A=n.header||[],h=0;e.forEach(function(p,x){Ii(p).forEach(function(v){(h=A.indexOf(v))==-1&&(A[h=A.length]=v);var y=p[v],b="z",w="",j=On({c:l+h,r:o+x+a});u=H2(s,j),y&&typeof y=="object"&&!(y instanceof Date)?s[j]=y:(typeof y=="number"?b="n":typeof y=="boolean"?b="b":typeof y=="string"?b="s":y instanceof Date?(b="d",n.cellDates||(b="n",y=To(y)),w=n.dateNF||Tn[14]):y===null&&n.nullError&&(b="e",y=0),u?(u.t=b,u.v=y,delete u.w,delete u.R,w&&(u.z=w)):s[j]=u={t:b,v:y},w&&(u.z=w))})}),d.e.c=Math.max(d.e.c,l+A.length-1);var m=Ki(o);if(a)for(h=0;h<A.length;++h)s[oi(h+l)+m]={t:"s",v:A[h]};return s["!ref"]=zn(d),s}function I8e(t,e){return fse(null,t,e)}function H2(t,e,r){if(typeof e=="string"){if(Array.isArray(t)){var n=li(e);return t[n.r]||(t[n.r]=[]),t[n.r][n.c]||(t[n.r][n.c]={t:"z"})}return t[e]||(t[e]={t:"z"})}return typeof e!="number"?H2(t,On(e)):H2(t,On({r:e,c:r||0}))}function j8e(t,e){if(typeof e=="number"){if(e>=0&&t.SheetNames.length>e)return e;throw new Error("Cannot find sheet # "+e)}else if(typeof e=="string"){var r=t.SheetNames.indexOf(e);if(r>-1)return r;throw new Error("Cannot find sheet name |"+e+"|")}else throw new Error("Cannot find sheet |"+e+"|")}function TR(){return{SheetNames:[],Sheets:{}}}function kR(t,e,r,n){var a=1;if(!r)for(;a<=65535&&t.SheetNames.indexOf(r="Sheet"+a)!=-1;++a,r=void 0);if(!r||t.SheetNames.length>=65535)throw new Error("Too many worksheets");if(n&&t.SheetNames.indexOf(r)>=0){var s=r.match(/(^.*?)(\d+)$/);a=s&&+s[2]||0;var o=s&&s[1]||r;for(++a;a<=65535&&t.SheetNames.indexOf(r=o+a)!=-1;++a);}if(Xae(r),t.SheetNames.indexOf(r)>=0)throw new Error("Worksheet with name |"+r+"| already exists!");return t.SheetNames.push(r),t.Sheets[r]=e,r}function P8e(t,e,r){t.Workbook||(t.Workbook={}),t.Workbook.Sheets||(t.Workbook.Sheets=[]);var n=j8e(t,e);switch(t.Workbook.Sheets[n]||(t.Workbook.Sheets[n]={}),r){case 0:case 1:case 2:break;default:throw new Error("Bad sheet visibility setting "+r)}t.Workbook.Sheets[n].Hidden=r}function B8e(t,e){return t.z=e,t}function hse(t,e,r){return e?(t.l={Target:e},r&&(t.l.Tooltip=r)):delete t.l,t}function T8e(t,e,r){return hse(t,"#"+e,r)}function k8e(t,e,r){t.c||(t.c=[]),t.c.push({t:e,a:r||"SheetJS"})}function F8e(t,e,r,n){for(var a=typeof e!="string"?e:Ea(e),s=typeof e=="string"?e:zn(e),o=a.s.r;o<=a.e.r;++o)for(var l=a.s.c;l<=a.e.c;++l){var c=H2(t,o,l);c.t="n",c.F=s,delete c.v,o==a.s.r&&l==a.s.c&&(c.f=r,n&&(c.D=!0))}return t}var Qa={encode_col:oi,encode_row:Ki,encode_cell:On,encode_range:zn,decode_col:lR,decode_row:oR,split_cell:G3e,decode_cell:li,decode_range:ou,format_cell:yA,sheet_add_aoa:Qne,sheet_add_json:fse,sheet_add_dom:ase,aoa_to_sheet:y1,json_to_sheet:I8e,table_to_sheet:sse,table_to_book:QMe,sheet_to_csv:BR,sheet_to_txt:dse,sheet_to_json:YS,sheet_to_html:nse,sheet_to_formulae:S8e,sheet_to_row_object_array:YS,sheet_get_cell:H2,book_new:TR,book_append_sheet:kR,book_set_sheet_visibility:P8e,cell_set_number_format:B8e,cell_set_hyperlink:hse,cell_set_internal_link:T8e,cell_add_comment:k8e,sheet_set_array_formula:F8e,consts:{SHEET_VISIBLE:0,SHEET_HIDDEN:1,SHEET_VERY_HIDDEN:2}};const pP="pollo_cash_audits";async function O8e(t){return(await Jn(mt(Se,pP),{...t,createdAt:t.createdAt??Ar.now()})).id}async function D8e(t){const e=mt(Se,pP),r=(()=>{if(t!=null&&t.createdFrom&&(t!=null&&t.createdTo)){const s=Ar.fromDate(t.createdFrom),o=Ar.fromDate(t.createdTo);return Yt(e,cr("createdAt",">=",s),cr("createdAt","<=",o),In("createdAt","desc"))}return Yt(e,In("createdAt","desc"))})();return(await kt(r)).docs.map(s=>{const o=s.data();return{id:s.id,createdAt:o.createdAt,createdByUid:o.createdByUid||"",createdByName:o.createdByName||"",contadorUid:o.contadorUid||"",contadorName:o.contadorName||"",entregadoPor:o.entregadoPor||"",recibidoPor:o.recibidoPor||"",rangeFrom:o.rangeFrom||"",rangeTo:o.rangeTo||"",ventasCash:Number(o.ventasCash||0),abonos:Number(o.abonos||0),ingresosExtra:Number(o.ingresosExtra||0),debitos:Number(o.debitos||0),subTotal:Number(o.subTotal||0),totalEntregado:Number(o.totalEntregado||0),comment:o.comment||""}})}async function R8e(t){await Kn(Gt(Se,pP,t))}async function M8e(t,e){await kn(Gt(Se,pP,t),e)}const vi=t=>`C$ ${(Number(t)||0).toFixed(2)}`,JC=t=>Number(t||0).toFixed(3),Oi=t=>{const e=Number(String(t??"").replace(/,/g,"."));return isNaN(e)?0:Math.round(e*100)/100},JS=t=>{const e=t.getFullYear(),r=String(t.getMonth()+1).padStart(2,"0"),n=String(t.getDate()).padStart(2,"0");return`${e}-${r}-${n}`},Xm=()=>{const t=new Date,e=t.getFullYear(),r=String(t.getMonth()+1).padStart(2,"0"),n=String(t.getDate()).padStart(2,"0");return`${e}-${r}-${n}`},L8e=()=>{const t=new Date;return JS(new Date(t.getFullYear(),t.getMonth(),1))},U8e=()=>{const t=new Date;return JS(new Date(t.getFullYear(),t.getMonth()+1,0))},Q8e=t=>new Date(t.getFullYear(),t.getMonth(),t.getDate(),0,0,0),V8e=t=>new Date(t.getFullYear(),t.getMonth(),t.getDate(),23,59,59),Ase=t=>String(t??"").toLowerCase().trim(),ZC=t=>Number(t.qty??t.quantity??0),A$=t=>["lb","lbs","libra","libras"].includes(Ase(t)),m$=t=>["unidad","unidades","ud","uds","pieza","piezas"].includes(Ase(t));function H8e(){const[t,e]=g.useState(!1),[r,n]=g.useState(!1),[a,s]=g.useState(!1),[o,l]=g.useState(!1),[c,u]=g.useState(null),[d,f]=g.useState(!1),[A,h]=g.useState([]),[m,p]=g.useState(""),[x,v]=g.useState(""),[y,b]=g.useState(""),[w,j]=g.useState(""),[I,_]=g.useState(Xm()),[S,E]=g.useState(Xm()),[T,k]=g.useState(0),[B,D]=g.useState(0),[X,me]=g.useState(0),[pe,he]=g.useState(0),[ve,ae]=g.useState(""),[Pe,ke]=g.useState([]),[O,G]=g.useState(0),[z,U]=g.useState(!1),Y=g.useMemo(()=>Oi(T+B+X),[T,B,X]),ee=g.useMemo(()=>Oi(Y-pe),[Y,pe]),[M,H]=g.useState([]),[te,Ce]=g.useState(!1),[V,We]=g.useState(L8e()),[ie,J]=g.useState(U8e()),[Oe,fe]=g.useState([]),[_e,Ue]=g.useState(0),[Ye,At]=g.useState(!1);async function yt(){var xe;const ue=(await kt(Yt(mt(Se,"users")))).docs.map(Ae=>{const Re=Ae.data();return{uid:Ae.id,name:Re.displayName||Re.name||Re.email||Ae.id,role:Re.role,roles:Re.roles}}).filter(Ae=>Ae.role==="contador"||Array.isArray(Ae.roles)&&Ae.roles.includes("contador"));h(ue);const Le=((xe=_c.currentUser)==null?void 0:xe.uid)||"",ht=ue.find(Ae=>Ae.uid===Le)||ue[0];ht&&(p(ht.uid),v(ht.name))}async function bt(){Ce(!0);try{const se=V&&ie?{createdFrom:Q8e(new Date(V)),createdTo:V8e(new Date(ie))}:void 0,ye=await D8e(se);H(ye)}finally{Ce(!1)}}g.useEffect(()=>{yt(),bt()},[]),g.useEffect(()=>{bt()},[V,ie]),g.useEffect(()=>{(async()=>{if(!(!V||!ie)){At(!0);try{const ye=Yt(mt(Se,"salesV2"),cr("date",">=",V),cr("date","<=",ie)),ue=await kt(ye),Le=[];ue.forEach(Ae=>{const Re=Ae.data(),lt=Re.date??"";if(Array.isArray(Re.items)&&Re.items.length>0){Re.items.forEach((Ne,De)=>{const xt=String(Ne.productName??"(sin nombre)"),_t=Number(Ne.qty??0),Et=Number(Ne.lineFinal??0)||Math.max(0,Number(Ne.unitPrice||0)*_t-Number(Ne.discount||0));Le.push({id:`${Ae.id}#${De}`,date:lt,productName:xt,quantity:_t,amount:Et,measurement:Ne.measurement??Re.measurement??"",type:Re.type??"CONTADO"})});return}Le.push({id:Ae.id,date:lt,productName:Re.productName??"(sin nombre)",quantity:Number(Re.quantity??0),amount:Number(Re.amount??Re.amountCharged??0),measurement:Re.measurement??"",type:Re.type??"CONTADO"})}),fe(Le);const ct=await kt(mt(Se,"ar_movements_pollo"));let ht=0;const xe=Ae=>{var Re;return Ae!=null&&Ae.date?String(Ae.date):(Re=Ae==null?void 0:Ae.createdAt)!=null&&Re.toDate?JS(Ae.createdAt.toDate()):""};ct.forEach(Ae=>{const Re=Ae.data();if(String(Re.type??"").toUpperCase()!=="ABONO")return;const Ne=Math.abs(Number(Re.amount??0)),De=xe(Re);De&&De>=V&&De<=ie&&(ht+=Ne)}),Ue(ht)}catch(ye){console.error("Error cargando KPIs del periodo:",ye),fe([]),Ue(0)}finally{At(!1)}}})()},[V,ie]),g.useEffect(()=>{(async()=>{if(!(!I||!S)){U(!0);try{const ye=Yt(mt(Se,"salesV2"),cr("date",">=",I),cr("date","<=",S)),ue=await kt(ye),Le=[];ue.forEach(Ae=>{const Re=Ae.data(),lt=Re.date??"";if(Array.isArray(Re.items)&&Re.items.length>0){Re.items.forEach((Ne,De)=>{const xt=String(Ne.productName??"(sin nombre)"),_t=Number(Ne.qty??0),Et=Number(Ne.lineFinal??0)||Math.max(0,Number(Ne.unitPrice||0)*_t-Number(Ne.discount||0));Le.push({id:`${Ae.id}#${De}`,date:lt,productName:xt,quantity:_t,amount:Et,measurement:Ne.measurement??Re.measurement??"",type:Re.type??"CONTADO"})});return}Le.push({id:Ae.id,date:lt,productName:Re.productName??"(sin nombre)",quantity:Number(Re.quantity??0),amount:Number(Re.amount??Re.amountCharged??0),measurement:Re.measurement??"",type:Re.type??"CONTADO"})}),ke(Le);const ct=await kt(mt(Se,"ar_movements_pollo"));let ht=0;const xe=Ae=>{var Re;return Ae!=null&&Ae.date?String(Ae.date):(Re=Ae==null?void 0:Ae.createdAt)!=null&&Re.toDate?JS(Ae.createdAt.toDate()):""};ct.forEach(Ae=>{const Re=Ae.data();if(String(Re.type??"").toUpperCase()!=="ABONO")return;const Ne=Math.abs(Number(Re.amount??0)),De=xe(Re);De&&De>=I&&De<=S&&(ht+=Ne)}),G(ht)}catch(ye){console.error("Error cargando KPI de modal:",ye),ke([]),G(0)}finally{U(!1)}}})()},[I,S]);const Nt=g.useMemo(()=>{const se=M.reduce((Le,ct)=>Le+(Number(ct.totalEntregado)||0),0),ye=M.reduce((Le,ct)=>Le+(Number(ct.debitos)||0),0),ue=M.reduce((Le,ct)=>Le+(Number(ct.subTotal)||0),0);return{sumTotal:Oi(se),sumDeb:Oi(ye),sumSub:Oi(ue)}},[M]),jt=g.useMemo(()=>{const se=Oe.filter(Re=>Re.type==="CONTADO"),ye=Oe.filter(Re=>Re.type==="CREDITO"),ue=se.reduce((Re,lt)=>Re+(lt.amount||0),0),Le=ue+_e,ct=se.reduce((Re,lt)=>A$(lt.measurement)?Re+ZC(lt):Re,0),ht=se.reduce((Re,lt)=>m$(lt.measurement)?Re+ZC(lt):Re,0),xe=ye.reduce((Re,lt)=>A$(lt.measurement)?Re+ZC(lt):Re,0),Ae=ye.reduce((Re,lt)=>m$(lt.measurement)?Re+ZC(lt):Re,0);return{ventasCash:Oi(ue),recaudado:Oi(Le),lbsCash:JC(ct),unitsCash:JC(ht),lbsCredit:JC(xe),unitsCredit:JC(Ae)}},[Oe,_e]),St=g.useMemo(()=>{const ue=Pe.filter(Le=>Le.type==="CONTADO").reduce((Le,ct)=>Le+(ct.amount||0),0)+O;return{recaudado:Oi(ue)}},[Pe,O]);function Ve(){b(""),j(""),_(Xm()),E(Xm()),k(0),D(0),me(0),he(0),ae(""),s(!1),l(!1),u(null)}function Te(se){u(se.id),e(!0),s(!0),l(!0),p(se.contadorUid||""),v(se.contadorName||""),b(se.recibidoPor||""),j(se.entregadoPor||""),_(se.rangeFrom||Xm()),E(se.rangeTo||Xm()),k(Number(se.ventasCash||0)),D(Number(se.abonos||0)),me(Number(se.ingresosExtra||0)),he(Number(se.debitos||0)),ae(se.comment||"")}async function qe(){var se,ye,ue;if(!m)return alert("Seleccione Contador.");if(!y.trim())return alert("Recibido por es obligatorio.");if(!I||!S)return alert("Seleccione el rango arqueado.");if(new Date(I)>new Date(S))return alert("Rango invlido: Desde no puede ser mayor que Hasta.");n(!0);try{if(c)await M8e(c,{contadorUid:m,contadorName:x,recibidoPor:y.trim(),entregadoPor:w.trim(),rangeFrom:I,rangeTo:S,ventasCash:Oi(T),abonos:Oi(B),ingresosExtra:Oi(X),debitos:Oi(pe),subTotal:Oi(Y),totalEntregado:Oi(ee),comment:ve.trim()});else{const Le=((se=_c.currentUser)==null?void 0:se.uid)||"",ct=((ye=_c.currentUser)==null?void 0:ye.displayName)||((ue=_c.currentUser)==null?void 0:ue.email)||Le;await O8e({createdAt:Ar.now(),createdByUid:Le,createdByName:ct,contadorUid:m,contadorName:x,recibidoPor:y.trim(),entregadoPor:w.trim(),rangeFrom:I,rangeTo:S,ventasCash:Oi(T),abonos:Oi(B),ingresosExtra:Oi(X),debitos:Oi(pe),subTotal:Oi(Y),totalEntregado:Oi(ee),comment:ve.trim()})}e(!1),Ve(),await bt()}finally{n(!1)}}async function ge(se){var ue;if(window.confirm(`Eliminar el arqueo creado el ${(ue=se.createdAt)!=null&&ue.toDate?se.createdAt.toDate().toLocaleString():""}?`)){n(!0);try{await R8e(se.id),await bt()}finally{n(!1)}}}function q(){const se=M.map(Le=>{var ct;return{"Fecha de creacin":(ct=Le.createdAt)!=null&&ct.toDate?Le.createdAt.toDate().toLocaleString():"","Rango arqueado":`${Le.rangeFrom} a ${Le.rangeTo}`,"Arqueado por (Contador)":Le.contadorName,"Recibido por":Le.recibidoPor,"Entregado por":Le.entregadoPor,"Ventas cash":Le.ventasCash,Abonos:Le.abonos,"Ingresos extra":Le.ingresosExtra,"Sub total":Le.subTotal,Dbitos:Le.debitos,"Monto entregado":Le.totalEntregado,Comentario:Le.comment||""}}),ye=Qa.json_to_sheet(se),ue=Qa.book_new();Qa.book_append_sheet(ue,ye,"Arqueos"),V2(ue,`arqueos_pollo_${Xm()}.xlsx`)}return i.jsxs("div",{className:"p-3 md:p-6",children:[i.jsxs("div",{className:"flex items-start justify-between gap-3 flex-wrap",children:[i.jsxs("div",{children:[i.jsx("h1",{className:"text-lg md:text-xl font-semibold",children:"Arqueo fsico y entregas (Pollo)"}),i.jsx("p",{className:"text-xs text-gray-500",children:"Registro de arqueos, dbitos por gasto/reabastecimiento y monto entregado."})]}),i.jsxs("div",{className:"flex gap-2",children:[i.jsx("button",{onClick:()=>{Ve(),e(!0)},className:"px-3 py-2 rounded bg-blue-600 text-white text-sm hover:bg-blue-700",children:"+ Nuevo arqueo"}),i.jsx("button",{onClick:q,className:"px-3 py-2 rounded bg-emerald-600 text-white text-sm hover:bg-emerald-700",children:"Exportar Excel"})]})]}),i.jsxs("div",{className:"mt-4 grid grid-cols-1 md:grid-cols-3 gap-3",children:[i.jsxs("div",{className:"bg-white rounded shadow p-3",children:[i.jsx("div",{className:"text-xs text-gray-500 mb-2",children:"Filtro por fecha (creacin)"}),i.jsxs("div",{className:"grid grid-cols-2 gap-2",children:[i.jsxs("div",{children:[i.jsx("label",{className:"text-xs text-gray-600",children:"Desde"}),i.jsx("input",{type:"date",value:V,onChange:se=>We(se.target.value),className:"w-full border rounded px-2 py-2 text-sm"})]}),i.jsxs("div",{children:[i.jsx("label",{className:"text-xs text-gray-600",children:"Hasta"}),i.jsx("input",{type:"date",value:ie,onChange:se=>J(se.target.value),className:"w-full border rounded px-2 py-2 text-sm"})]})]}),i.jsx("button",{onClick:()=>{We(""),J("")},className:"mt-2 text-xs text-blue-600 hover:underline",children:"Limpiar filtro"})]}),i.jsxs("div",{className:"bg-white rounded shadow p-3 hidden md:block",children:[i.jsx("div",{className:"text-xs text-gray-500",children:"KPI: Monto entregado"}),i.jsx("div",{className:"text-xl font-semibold",children:vi(Nt.sumTotal)}),i.jsx("div",{className:"text-xs text-gray-400",children:"Suma de Total (Sub total - Dbitos)"})]}),i.jsxs("div",{className:"bg-white rounded shadow p-3 hidden md:block",children:[i.jsxs("div",{className:"flex justify-between gap-3",children:[i.jsxs("div",{children:[i.jsx("div",{className:"text-xs text-gray-500",children:"KPI: Dbitos"}),i.jsx("div",{className:"text-lg font-semibold",children:vi(Nt.sumDeb)})]}),i.jsxs("div",{children:[i.jsx("div",{className:"text-xs text-gray-500",children:"KPI: Sub totales"}),i.jsx("div",{className:"text-lg font-semibold",children:vi(Nt.sumSub)})]})]}),i.jsx("div",{className:"text-xs text-gray-400 mt-1",children:"Sumas del listado filtrado"})]})]}),i.jsxs("div",{className:"mt-3 hidden md:grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-3 xl:grid-cols-6 gap-3",children:[i.jsxs("div",{className:"bg-white rounded shadow p-3",children:[i.jsx("div",{className:"text-xs text-gray-500",children:"Ventas cash (perodo)"}),i.jsx("div",{className:"text-lg font-semibold",children:vi(jt.ventasCash)}),Ye&&i.jsx("div",{className:"text-[11px] text-gray-400",children:"Actualizando"})]}),i.jsxs("div",{className:"bg-white rounded shadow p-3",children:[i.jsx("div",{className:"text-xs text-gray-500",children:"Recaudado (perodo)"}),i.jsx("div",{className:"text-lg font-semibold",children:vi(jt.recaudado)}),i.jsx("div",{className:"text-[11px] text-gray-400",children:"Cash + abonos"})]}),i.jsxs("div",{className:"bg-white rounded shadow p-3",children:[i.jsx("div",{className:"text-xs text-gray-500",children:"Libras cash"}),i.jsx("div",{className:"text-lg font-semibold",children:jt.lbsCash})]}),i.jsxs("div",{className:"bg-white rounded shadow p-3",children:[i.jsx("div",{className:"text-xs text-gray-500",children:"Unidades cash"}),i.jsx("div",{className:"text-lg font-semibold",children:jt.unitsCash})]}),i.jsxs("div",{className:"bg-white rounded shadow p-3",children:[i.jsx("div",{className:"text-xs text-gray-500",children:"Libras crdito"}),i.jsx("div",{className:"text-lg font-semibold",children:jt.lbsCredit})]}),i.jsxs("div",{className:"bg-white rounded shadow p-3",children:[i.jsx("div",{className:"text-xs text-gray-500",children:"Unidades crdito"}),i.jsx("div",{className:"text-lg font-semibold",children:jt.unitsCredit})]})]}),i.jsx("div",{className:"mt-3 md:hidden",children:i.jsx(U5,{title:"KPIs",open:d,onToggle:()=>f(se=>!se),children:i.jsxs("div",{className:"grid grid-cols-1 gap-3",children:[i.jsxs("div",{className:"bg-white rounded border p-3",children:[i.jsx("div",{className:"text-xs text-gray-500",children:"KPI: Monto entregado"}),i.jsx("div",{className:"text-lg font-semibold",children:vi(Nt.sumTotal)}),i.jsx("div",{className:"text-xs text-gray-400",children:"Suma de Total (Sub total - Dbitos)"})]}),i.jsxs("div",{className:"bg-white rounded border p-3",children:[i.jsxs("div",{className:"flex justify-between gap-3",children:[i.jsxs("div",{children:[i.jsx("div",{className:"text-xs text-gray-500",children:"KPI: Dbitos"}),i.jsx("div",{className:"text-lg font-semibold",children:vi(Nt.sumDeb)})]}),i.jsxs("div",{children:[i.jsx("div",{className:"text-xs text-gray-500",children:"KPI: Sub totales"}),i.jsx("div",{className:"text-lg font-semibold",children:vi(Nt.sumSub)})]})]}),i.jsx("div",{className:"text-xs text-gray-400 mt-1",children:"Sumas del listado filtrado"})]}),i.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-2 gap-3",children:[i.jsxs("div",{className:"bg-white rounded border p-3",children:[i.jsx("div",{className:"text-xs text-gray-500",children:"Ventas cash (perodo)"}),i.jsx("div",{className:"text-lg font-semibold",children:vi(jt.ventasCash)}),Ye&&i.jsx("div",{className:"text-[11px] text-gray-400",children:"Actualizando"})]}),i.jsxs("div",{className:"bg-white rounded border p-3",children:[i.jsx("div",{className:"text-xs text-gray-500",children:"Recaudado (perodo)"}),i.jsx("div",{className:"text-lg font-semibold",children:vi(jt.recaudado)}),i.jsx("div",{className:"text-[11px] text-gray-400",children:"Cash + abonos"})]}),i.jsxs("div",{className:"bg-white rounded border p-3",children:[i.jsx("div",{className:"text-xs text-gray-500",children:"Libras cash"}),i.jsx("div",{className:"text-lg font-semibold",children:jt.lbsCash})]}),i.jsxs("div",{className:"bg-white rounded border p-3",children:[i.jsx("div",{className:"text-xs text-gray-500",children:"Unidades cash"}),i.jsx("div",{className:"text-lg font-semibold",children:jt.unitsCash})]}),i.jsxs("div",{className:"bg-white rounded border p-3",children:[i.jsx("div",{className:"text-xs text-gray-500",children:"Libras crdito"}),i.jsx("div",{className:"text-lg font-semibold",children:jt.lbsCredit})]}),i.jsxs("div",{className:"bg-white rounded border p-3",children:[i.jsx("div",{className:"text-xs text-gray-500",children:"Unidades crdito"}),i.jsx("div",{className:"text-lg font-semibold",children:jt.unitsCredit})]})]})]})})}),i.jsx("div",{className:"mt-4 block md:hidden space-y-3",children:te?i.jsx("div",{className:"p-4 text-center bg-white rounded-xl border shadow",children:"Cargando"}):M.length===0?i.jsx("div",{className:"p-4 text-center bg-white rounded-xl border shadow",children:"No hay arqueos en este rango."}):M.map(se=>{var ye;return i.jsxs("div",{className:"bg-white border rounded-2xl p-3 shadow-sm",children:[i.jsxs("div",{className:"flex items-start justify-between gap-3",children:[i.jsxs("div",{className:"min-w-0",children:[i.jsx("div",{className:"text-[11px] text-gray-500",children:"Fecha de creacin"}),i.jsx("div",{className:"font-semibold text-sm",children:(ye=se.createdAt)!=null&&ye.toDate?se.createdAt.toDate().toLocaleString():""}),i.jsx("div",{className:"text-[11px] text-gray-500 mt-1",children:"Rango arqueado"}),i.jsxs("div",{className:"text-sm",children:[se.rangeFrom," a ",se.rangeTo]})]}),i.jsxs("div",{className:"text-right",children:[i.jsx("div",{className:"text-[11px] text-gray-500",children:"Monto entregado"}),i.jsx("div",{className:"font-semibold",children:vi(se.totalEntregado)})]})]}),i.jsxs("div",{className:"mt-3 grid grid-cols-2 gap-2 text-xs text-gray-600",children:[i.jsxs("div",{children:[i.jsx("span",{className:"text-gray-500",children:"Contador:"})," ",se.contadorName]}),i.jsxs("div",{children:[i.jsx("span",{className:"text-gray-500",children:"Recibido:"})," ",se.recibidoPor]}),i.jsxs("div",{children:[i.jsx("span",{className:"text-gray-500",children:"Sub total:"})," ",vi(se.subTotal)]}),i.jsxs("div",{children:[i.jsx("span",{className:"text-gray-500",children:"Dbitos:"})," ",vi(se.debitos)]})]}),i.jsxs("div",{className:"mt-3 flex justify-end",children:[i.jsx("button",{type:"button",onClick:()=>Te(se),className:"text-xs px-3 py-1.5 rounded border text-gray-700 hover:bg-gray-50",disabled:r,children:"Editar"}),i.jsx("button",{type:"button",onClick:()=>ge(se),className:"ml-2 text-xs px-3 py-1.5 rounded bg-red-600 text-white hover:bg-red-700 disabled:opacity-60",disabled:r,children:"Eliminar"})]})]},se.id)})}),i.jsxs("div",{className:"mt-4 bg-white rounded shadow overflow-hidden hidden md:block",children:[i.jsxs("div",{className:"p-3 border-b flex items-center justify-between",children:[i.jsx("div",{className:"text-sm font-semibold",children:"Arqueos guardados"}),i.jsx("div",{className:"text-xs text-gray-500",children:te?"Cargando...":`${M.length} registro(s)`})]}),i.jsx("div",{className:"overflow-x-auto",children:i.jsxs("table",{className:"min-w-[900px] w-full text-sm",children:[i.jsx("thead",{className:"bg-gray-50 text-gray-600",children:i.jsxs("tr",{children:[i.jsx("th",{className:"text-left px-3 py-2",children:"Fecha de creacin"}),i.jsx("th",{className:"text-left px-3 py-2",children:"Rango arqueado"}),i.jsx("th",{className:"text-left px-3 py-2",children:"Arqueado por"}),i.jsx("th",{className:"text-left px-3 py-2",children:"Recibido por"}),i.jsx("th",{className:"text-right px-3 py-2",children:"Sub total"}),i.jsx("th",{className:"text-right px-3 py-2",children:"Dbitos"}),i.jsx("th",{className:"text-right px-3 py-2",children:"Monto entregado"}),i.jsx("th",{className:"text-right px-3 py-2",children:"Acciones"})]})}),i.jsxs("tbody",{children:[!te&&M.length===0&&i.jsx("tr",{children:i.jsx("td",{colSpan:8,className:"px-3 py-6 text-center text-gray-500",children:"No hay arqueos en este rango."})}),M.map(se=>{var ye;return i.jsxs("tr",{className:"border-t",children:[i.jsx("td",{className:"px-3 py-2",children:(ye=se.createdAt)!=null&&ye.toDate?se.createdAt.toDate().toLocaleString():""}),i.jsxs("td",{className:"px-3 py-2",children:[se.rangeFrom," a ",se.rangeTo]}),i.jsx("td",{className:"px-3 py-2",children:se.contadorName}),i.jsx("td",{className:"px-3 py-2",children:se.recibidoPor}),i.jsx("td",{className:"px-3 py-2 text-right font-medium",children:vi(se.subTotal)}),i.jsx("td",{className:"px-3 py-2 text-right",children:vi(se.debitos)}),i.jsx("td",{className:"px-3 py-2 text-right font-semibold",children:vi(se.totalEntregado)}),i.jsxs("td",{className:"px-3 py-2 text-right",children:[i.jsx("button",{type:"button",onClick:()=>Te(se),className:"text-xs px-3 py-1.5 rounded border text-gray-700 hover:bg-gray-50",disabled:r,children:"Editar"}),i.jsx("button",{type:"button",onClick:()=>ge(se),className:"ml-2 text-xs px-3 py-1.5 rounded bg-red-600 text-white hover:bg-red-700 disabled:opacity-60",disabled:r,children:"Eliminar"})]})]},se.id)})]})]})})]}),t&&i.jsx("div",{className:"fixed inset-0 bg-black/40 flex items-center justify-center z-50 p-3",children:i.jsxs("div",{className:"bg-white w-full max-w-3xl rounded shadow-lg overflow-hidden",children:[i.jsxs("div",{className:"p-3 border-b flex items-center justify-between",children:[i.jsx("div",{className:"font-semibold",children:c?"Editar arqueo":"Nuevo arqueo"}),i.jsx("button",{onClick:()=>{e(!1),Ve()},className:"text-sm px-2 py-1 rounded hover:bg-gray-100",children:""})]}),i.jsxs("div",{className:"p-3 md:p-4 space-y-3 text-sm",children:[i.jsxs("div",{className:"md:hidden space-y-3",children:[i.jsx(U5,{title:"Datos colaboradores",open:a,onToggle:()=>s(se=>!se),children:i.jsxs("div",{className:"grid grid-cols-1 gap-3",children:[i.jsxs("div",{children:[i.jsx("label",{className:"text-xs text-gray-600",children:"Contador"}),i.jsxs("select",{value:m,onChange:se=>{const ye=se.target.value,ue=A.find(Le=>Le.uid===ye);p(ye),v((ue==null?void 0:ue.name)||"")},className:"w-full border rounded px-2 py-2",children:[A.length===0&&i.jsx("option",{value:"",children:"(No hay contadores)"}),A.map(se=>i.jsx("option",{value:se.uid,children:se.name},se.uid))]}),i.jsx("div",{className:"text-[11px] text-gray-400 mt-1",children:"Por default se selecciona el contador logueado si aplica."})]}),i.jsxs("div",{children:[i.jsx("label",{className:"text-xs text-gray-600",children:"Recibido por (obligatorio)"}),i.jsx("input",{value:y,onChange:se=>b(se.target.value),className:"w-full border rounded px-2 py-2",placeholder:"Nombre de quien recibe el dinero"})]}),i.jsxs("div",{children:[i.jsx("label",{className:"text-xs text-gray-600",children:"Entregado por"}),i.jsx("input",{value:w,onChange:se=>j(se.target.value),className:"w-full border rounded px-2 py-2",placeholder:"Nombre de quien entrega el dinero"})]}),i.jsxs("div",{children:[i.jsx("label",{className:"text-xs text-gray-600",children:"Rango cierre ventas"}),i.jsxs("div",{className:"grid grid-cols-2 gap-2",children:[i.jsx("input",{type:"date",value:I,onChange:se=>_(se.target.value),className:"w-full border rounded px-2 py-2"}),i.jsx("input",{type:"date",value:S,onChange:se=>E(se.target.value),className:"w-full border rounded px-2 py-2"})]})]})]})}),i.jsxs(U5,{title:"Inputs y KPIs",open:o,onToggle:()=>l(se=>!se),children:[i.jsxs("div",{className:"bg-blue-50 border border-blue-200 rounded p-3 mb-3",children:[i.jsx("div",{className:"text-xs text-blue-700",children:"Recaudado en el rango (Ventas cash + abonos)"}),i.jsx("div",{className:"text-lg font-semibold text-blue-900",children:vi(St.recaudado)}),z&&i.jsx("div",{className:"text-[11px] text-blue-600",children:"Actualizando"})]}),i.jsxs("div",{className:"grid grid-cols-1 gap-3",children:[i.jsx(A0,{label:"Ventas cash",value:T,onChange:k}),i.jsx(A0,{label:"Abonos",value:B,onChange:D}),i.jsx(A0,{label:"Ingresos extra oficiales",value:X,onChange:me}),i.jsx(A0,{label:"Dbitos (gasto o reabastecimiento)",value:pe,onChange:he})]}),i.jsxs("div",{className:"mt-3 grid grid-cols-1 gap-3",children:[i.jsx(e_,{title:"Sub total (ventas + abonos + ingresos)",value:vi(Y)}),i.jsx(e_,{title:"Total (sub total - dbitos)",value:vi(ee)})]})]})]}),i.jsxs("div",{className:"hidden md:block space-y-3",children:[i.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-3",children:[i.jsxs("div",{children:[i.jsx("label",{className:"text-xs text-gray-600",children:"Contador"}),i.jsxs("select",{value:m,onChange:se=>{const ye=se.target.value,ue=A.find(Le=>Le.uid===ye);p(ye),v((ue==null?void 0:ue.name)||"")},className:"w-full border rounded px-2 py-2",children:[A.length===0&&i.jsx("option",{value:"",children:"(No hay contadores)"}),A.map(se=>i.jsx("option",{value:se.uid,children:se.name},se.uid))]}),i.jsx("div",{className:"text-[11px] text-gray-400 mt-1",children:"Por default se selecciona el contador logueado si aplica."})]}),i.jsxs("div",{children:[i.jsx("label",{className:"text-xs text-gray-600",children:"Recibido por (obligatorio)"}),i.jsx("input",{value:y,onChange:se=>b(se.target.value),className:"w-full border rounded px-2 py-2",placeholder:"Nombre de quien recibe el dinero"})]}),i.jsxs("div",{children:[i.jsx("label",{className:"text-xs text-gray-600",children:"Entregado por"}),i.jsx("input",{value:w,onChange:se=>j(se.target.value),className:"w-full border rounded px-2 py-2",placeholder:"Nombre de quien entrega el dinero"})]}),i.jsxs("div",{children:[i.jsx("label",{className:"text-xs text-gray-600",children:"Rango cierre ventas"}),i.jsxs("div",{className:"grid grid-cols-2 gap-2",children:[i.jsx("input",{type:"date",value:I,onChange:se=>_(se.target.value),className:"w-full border rounded px-2 py-2"}),i.jsx("input",{type:"date",value:S,onChange:se=>E(se.target.value),className:"w-full border rounded px-2 py-2"})]})]})]}),i.jsxs("div",{className:"bg-blue-50 border border-blue-200 rounded p-3",children:[i.jsx("div",{className:"text-xs text-blue-700",children:"Recaudado en el rango (Ventas cash + abonos)"}),i.jsx("div",{className:"text-lg font-semibold text-blue-900",children:vi(St.recaudado)}),z&&i.jsx("div",{className:"text-[11px] text-blue-600",children:"Actualizando"})]}),i.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-3",children:[i.jsx(A0,{label:"Ventas cash",value:T,onChange:k}),i.jsx(A0,{label:"Abonos",value:B,onChange:D}),i.jsx(A0,{label:"Ingresos extra oficiales",value:X,onChange:me}),i.jsx(A0,{label:"Dbitos (gasto o reabastecimiento)",value:pe,onChange:he})]}),i.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-3",children:[i.jsx(e_,{title:"Sub total (ventas + abonos + ingresos)",value:vi(Y)}),i.jsx(e_,{title:"Total (sub total - dbitos)",value:vi(ee)})]})]}),i.jsxs("div",{children:[i.jsx("label",{className:"text-xs text-gray-600",children:"Comentario / Nota"}),i.jsx("textarea",{value:ve,onChange:se=>ae(se.target.value),className:"w-full border rounded px-2 py-2 min-h-[90px]",placeholder:"Opcional..."})]})]}),i.jsxs("div",{className:"p-3 border-t flex items-center justify-end gap-2",children:[i.jsx("button",{onClick:()=>{e(!1),Ve()},className:"px-3 py-2 rounded border text-sm hover:bg-gray-50",disabled:r,children:"Cancelar"}),i.jsx("button",{onClick:qe,className:"px-3 py-2 rounded bg-blue-600 text-white text-sm hover:bg-blue-700 disabled:opacity-60",disabled:r,children:r?"Guardando...":c?"Guardar cambios":"Guardar arqueo"})]})]})})]})}function e_({title:t,value:e}){return i.jsxs("div",{className:"bg-gray-50 border rounded p-3",children:[i.jsx("div",{className:"text-xs text-gray-500",children:t}),i.jsx("div",{className:"text-lg font-semibold",children:e})]})}function A0({label:t,value:e,onChange:r}){return i.jsxs("div",{children:[i.jsx("label",{className:"text-xs text-gray-600",children:t}),i.jsx("input",{inputMode:"decimal",value:String(e),onChange:n=>r(Oi(n.target.value)),className:"w-full border rounded px-2 py-2",placeholder:"0.00"})]})}function U5({title:t,open:e,onToggle:r,children:n}){return i.jsxs("div",{className:"bg-white border rounded-2xl shadow-sm overflow-hidden",children:[i.jsxs("div",{className:"px-3 py-2 flex items-center justify-between",children:[i.jsx("div",{className:"font-semibold text-sm",children:t}),i.jsx("button",{type:"button",onClick:r,className:"text-xs px-3 py-1.5 rounded border hover:bg-gray-50",children:e?"Cerrar":"Ver"})]}),e&&i.jsx("div",{className:"px-3 pb-3 pt-1",children:n})]})}const Mo=t=>`C$ ${(Number(t)||0).toFixed(2)}`,$8e=["","HOMBRE","MUJER","NINO","NINA","UNISEX"];function t_(t){return(t||"").trim().toUpperCase().replace(/\s+/g,"-").replace(/[^A-Z0-9-]/g,"")}function G8e(t){switch((t||"").toUpperCase()){case"HOMBRE":return"HOM";case"MUJER":return"MUJ";case"NINO":return"NIN";case"NINA":return"NIA";case"UNISEX":return"UNI";default:return"GEN"}}function K8e(t){const e="ROP",r=t_(t.subcat).slice(0,3)||"GEN",n=G8e(t.gender),a=t_(t.color).slice(0,3)||"COL",s=t_(t.size)||"TLL",o=t_(t.brand).slice(0,4)||"BRD",l=Date.now().toString(36).toUpperCase().slice(-4);return`${e}-${r}-${n}-${a}-${s}-${o}-${l}`}const gy=/^[A-Za-z0-9._-]{0,32}$/;function q8e(){const[t,e]=g.useState([]),[r,n]=g.useState([]),[a,s]=g.useState(!0),[o,l]=g.useState(""),[c,u]=g.useState(Rr(Ud(new Date),"yyyy-MM-dd")),[d,f]=g.useState(Rr(Ld(new Date),"yyyy-MM-dd")),[A,h]=g.useState(""),[m,p]=g.useState(""),[x,v]=g.useState(Rr(new Date,"yyyy-MM-dd")),[y,b]=g.useState(0),[w,j]=g.useState(0),[I,_]=g.useState(0),[S,E]=g.useState(0),[T,k]=g.useState(0),[B,D]=g.useState(""),[X,me]=g.useState(""),[pe,he]=g.useState(""),[ve,ae]=g.useState(""),[Pe,ke]=g.useState(""),[O,G]=g.useState(""),[z,U]=g.useState(""),[Y,ee]=g.useState(!1),[M,H]=g.useState(""),[te,Ce]=g.useState("Camisa"),[V,We]=g.useState(null),[ie,J]=g.useState(""),[Oe,fe]=g.useState(0),[_e,Ue]=g.useState(0),[Ye,At]=g.useState(0),[yt,bt]=g.useState(0),[Nt,jt]=g.useState(0),[St,Ve]=g.useState(""),[Te,qe]=g.useState(""),[ge,q]=g.useState(""),[se,ye]=g.useState(""),[ue,Le]=g.useState(""),[ct,ht]=g.useState(""),[xe,Ae]=g.useState(""),[Re,lt]=g.useState(null),[Ne,De]=g.useState({x:0,y:0}),[xt,_t]=g.useState(!1);g.useEffect(()=>{const R=()=>lt(null),L=K=>K.key==="Escape"&&lt(null);return document.addEventListener("click",R),document.addEventListener("keydown",L),()=>{document.removeEventListener("click",R),document.removeEventListener("keydown",L)}},[]);const Et=(R,L,K=192,re=160)=>{let Ge=R;R+K+8>window.innerWidth&&(Ge=R-K),Ge=Math.max(8,Math.min(Ge,window.innerWidth-K-8));let rt=L;return L+re+8>window.innerHeight&&(rt=window.innerHeight-re-8),rt=Math.max(8,Math.min(rt,window.innerHeight-re-8)),{x:Ge,y:rt}},Mt=(R,L)=>{R.stopPropagation();const K=R.currentTarget.getBoundingClientRect(),re=K.right,de=K.bottom,Ge=Et(re,de);De(Ge),lt(rt=>rt===L?null:L)};g.useEffect(()=>{const R=()=>lt(null),L=K=>{K.key==="Escape"&&lt(null)};return document.addEventListener("click",R),document.addEventListener("keydown",L),()=>{document.removeEventListener("click",R),document.removeEventListener("keydown",L)}},[]),g.useEffect(()=>{if(!Re)return;const R=()=>lt(null);return window.addEventListener("scroll",R,!0),window.addEventListener("resize",R),()=>{window.removeEventListener("scroll",R,!0),window.removeEventListener("resize",R)}},[Re]),g.useEffect(()=>{(async()=>{const R=await kt(mt(Se,"products_clothes")),L=[];R.forEach(Ge=>{const rt=Ge.data();L.push({id:Ge.id,name:rt.name??"(sin nombre)",category:rt.category??"(sin categora)",measurement:rt.measurement??"unidad",price:Number(rt.price??0),sku:rt.sku||"",size:rt.size||"",color:rt.color||"",gender:rt.gender||"",brand:rt.brand||""})}),e(L);const K=Yt(mt(Se,"inventory_clothes_batches"),In("date","desc")),re=await kt(K),de=[];re.forEach(Ge=>{const rt=Ge.data();de.push({id:Ge.id,productId:rt.productId,productName:rt.productName,category:rt.category,unit:rt.unit,quantity:Number(rt.quantity||0),remaining:Number(rt.remaining??rt.quantity??0),purchasePrice:Number(rt.purchasePrice||0),salePrice:Number(rt.salePrice||0),invoiceTotal:Number(rt.invoiceTotal??Number(rt.quantity||0)*Number(rt.purchasePrice||0)),expectedTotal:Number(rt.expectedTotal??Number(rt.quantity||0)*Number(rt.salePrice||0)),date:rt.date,createdAt:rt.createdAt,status:rt.status,notes:rt.notes||"",sku:rt.sku||"",size:rt.size||"",color:rt.color||"",gender:rt.gender||"",brand:rt.brand||"",clientCode:rt.clientCode||""})}),n(de),s(!1)})()},[]),g.useEffect(()=>{const R=t.find(L=>L.id===m);R&&(_(Number(R.price||0)),R.sku&&me(R.sku),R.size&&he(L=>L||R.size),R.color&&ae(L=>L||R.color),R.gender&&ke(L=>L||R.gender),R.brand&&G(L=>L||R.brand))},[m,t]),g.useEffect(()=>{E(Math.floor(y*w*100)/100)},[y,w]),g.useEffect(()=>{k(Math.floor(y*I*100)/100)},[y,I]),g.useEffect(()=>{const R=t.find(re=>re.id===m);if(R!=null&&R.sku){me(R.sku);return}const L=Y&&te?te:(R==null?void 0:R.category)||"";if(!L&&!Pe&&!ve&&!pe&&!O){me("");return}const K=K8e({subcat:L,gender:Pe||"",color:ve||"",size:pe||"",brand:O||""});me(K)},[Y,te,m,Pe,ve,pe,O,t]);const nt=g.useMemo(()=>r.filter(R=>!(c&&R.date<c||d&&R.date>d||A&&R.productId!==A)),[r,c,d,A]),Ee=g.useMemo(()=>{const R=nt.reduce((de,Ge)=>de+(Ge.invoiceTotal||0),0),L=nt.reduce((de,Ge)=>de+(Ge.expectedTotal||0),0),K=nt.reduce((de,Ge)=>de+Ge.quantity,0),re=nt.reduce((de,Ge)=>de+Ge.remaining,0);return{udsIng:K,udsRem:re,totalFacturado:R,totalEsperado:L}},[nt]),we=async R=>{R.preventDefault(),l("");const L=!!m&&!Y,K=t.find(rt=>rt.id===m),re=L?(K==null?void 0:K.name)||"":M||"",de=L?(K==null?void 0:K.category)||"":te||"General",Ge=L&&(K==null?void 0:K.measurement)||"unidad";if(!re||y<=0||w<=0){l("Completa nombre/cantidad/costo.");return}if(z&&!gy.test(z)){l("Cdigo del cliente invlido (solo A-Z, 0-9, . _ - , mx 32).");return}try{const rt=await Jn(mt(Se,"inventory_clothes_batches"),{productId:L?K.id:"",productName:re,category:de,unit:Ge,quantity:y,remaining:y,purchasePrice:w,salePrice:I,invoiceTotal:S,expectedTotal:T,date:x,createdAt:Ar.now(),status:"PENDIENTE",notes:B||"",sku:X||"",size:pe||"",color:ve||"",gender:Pe||"",brand:O||"",clientCode:z||""});n(ft=>[{id:rt.id,productId:L?K.id:"",productName:re,category:de,unit:Ge,quantity:y,remaining:y,purchasePrice:w,salePrice:I,invoiceTotal:S,expectedTotal:T,date:x,createdAt:Ar.now(),status:"PENDIENTE",notes:B||"",sku:X||"",size:pe||"",color:ve||"",gender:Pe||"",brand:O||"",clientCode:z||""},...ft]),l(" Lote de ropa creado"),p(""),v(Rr(new Date,"yyyy-MM-dd")),b(0),j(0),_(0),E(0),k(0),D(""),me(""),he(""),ae(""),ke(""),G(""),U(""),ee(!1),H(""),Ce("Camisa")}catch(rt){console.error(rt),l(" Error al crear lote")}},oe=async R=>{confirm(`Marcar PAGADO el lote del ${R.date} (${R.productName})?`)&&(await kn(Gt(Se,"inventory_clothes_batches",R.id),{status:"PAGADO"}),n(K=>K.map(re=>re.id===R.id?{...re,status:"PAGADO"}:re)))},Fe=R=>{We(R.id),J(R.date),fe(R.quantity),Ue(R.purchasePrice),At(R.salePrice),bt(Number((R.quantity*R.purchasePrice).toFixed(2))),jt(Number((R.quantity*R.salePrice).toFixed(2))),Ve(R.notes||""),qe(R.sku||""),q(R.size||""),ye(R.color||""),Le(R.gender||""),ht(R.brand||""),Ae(R.clientCode||"")},ce=()=>{We(null),J(""),fe(0),Ue(0),At(0),bt(0),jt(0),Ve(""),qe(""),q(""),ye(""),Le(""),ht(""),Ae("")};g.useEffect(()=>{V&&bt(Math.floor(Oe*_e*100)/100)},[V,Oe,_e]),g.useEffect(()=>{V&&jt(Math.floor(Oe*Ye*100)/100)},[V,Oe,Ye]);const Me=async()=>{if(!V)return;const R=r.find(de=>de.id===V);if(!R)return;const L=Math.max(0,R.quantity-R.remaining),K=Math.max(0,Oe-L);if(xe&&!gy.test(xe)){l("Cdigo del cliente invlido (solo A-Z, 0-9, . _ - , mx 32).");return}const re=Gt(Se,"inventory_clothes_batches",V);await kn(re,{date:ie,quantity:Oe,purchasePrice:_e,salePrice:Ye,invoiceTotal:yt,expectedTotal:Nt,notes:St,remaining:K,sku:Te,size:ge,color:se,gender:ue||"",brand:ct||"",clientCode:xe||""}),n(de=>de.map(Ge=>Ge.id===V?{...Ge,date:ie,quantity:Oe,purchasePrice:_e,salePrice:Ye,invoiceTotal:yt,expectedTotal:Nt,notes:St,remaining:K,sku:Te,size:ge,color:se,gender:ue||"",brand:ct||"",clientCode:xe||""}:Ge)),ce(),l(" Lote actualizado")},Ke=async R=>{confirm(`Eliminar el lote del ${R.date} (${R.productName})?`)&&(await Kn(Gt(Se,"inventory_clothes_batches",R.id)),n(K=>K.filter(re=>re.id!==R.id)),l(" Lote eliminado"))},P=()=>{const R=(c?`Desde ${c}`:"Desde inicio")+"  "+(d?`Hasta ${d}`:"Hasta hoy"),L=Ge=>(Ge||"").replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;"),K=nt.map(Ge=>`
      <tr>
        <td>${Ge.date}</td>
        <td>${(Ge.category||"").toUpperCase()}</td>
        <td>${L(Ge.productName)}</td>
        <td>${L(Ge.sku||"")}</td>
        <td>${L(Ge.size||"")}</td>
        <td>${L(Ge.color||"")}</td>
        <td>${L(Ge.clientCode||"")}</td>
        <td>${L(Ge.gender||"")}</td>
        <td>${(Ge.unit||"").toUpperCase()}</td>
        <td style="text-align:right">${Ge.quantity.toFixed(0)}</td>
        <td style="text-align:right">${Ge.remaining.toFixed(0)}</td>
        <td style="text-align:right">${Mo(Ge.purchasePrice)}</td>
        <td style="text-align:right">${Mo(Ge.salePrice)}</td>
        <td style="text-align:right">${Mo(Ge.invoiceTotal||0)}</td>
        <td style="text-align:right">${Mo(Ge.expectedTotal||0)}</td>
        <td>${L((Ge.notes||"").slice(0,120))}</td>
        <td>${Ge.status}</td>
      </tr>`).join(""),re=`
<!doctype html>
<html>
<head>
  <meta charset="utf-8" />
  <title>Inventario de Ropa por Lotes</title>
  <style>
    * { font-family: Arial, sans-serif; }
    h1 { margin: 0 0 4px; }
    .muted { color: #555; font-size: 12px; margin-bottom: 12px; }
    table { width: 100%; border-collapse: collapse; font-size: 11px; }
    th, td { border: 1px solid #ddd; padding: 6px; }
    th { background: #f5f5f5; text-align: left; }
    .totals { margin: 10px 0 16px; font-size: 12px; display: grid; grid-template-columns: repeat(2, max-content); column-gap: 32px; row-gap: 6px; align-items: center; }
    @media print { @page { size: A4 landscape; margin: 12mm; } button { display: none; } }
  </style>
</head>
<body>
  <button onclick="window.print()">Imprimir</button>
  <h1>Inventario de Ropa por Lotes</h1>
  <div class="muted">${R}</div>
  <div class="totals">
    <span><strong>Unidades ingresadas:</strong> ${Ee.udsIng.toFixed(0)}</span>
    <span><strong>Unidades restantes:</strong> ${Ee.udsRem.toFixed(0)}</span>
    <span><strong>Total esperado a ganar:</strong> ${Mo(Ee.totalEsperado)}</span>
    <span><strong>Total facturado:</strong> ${Mo(Ee.totalFacturado)}</span>
    <span><strong>Ganancia sin gastos:</strong> ${Mo(Number((Ee.totalEsperado-Ee.totalFacturado).toFixed(2)))}</span>
  </div>
  <table>
    <thead>
      <tr>
        <th>Fecha</th>
        <th>Subcat.</th>
        <th>Producto</th>
        <th>SKU</th>
        <th>Talla</th>
        <th>Color</th>
        <th>Cdigo Cliente</th>
        <th>Gnero</th>
        <th>Unidad</th>
        <th>Ingresado</th>
        <th>Restantes</th>
        <th>Precio Compra</th>
        <th>Precio Venta</th>
        <th>Total factura</th>
        <th>Total esperado</th>
        <th>Comentario</th>
        <th>Estado</th>
      </tr>
    </thead>
    <tbody>${K||'<tr><td colspan="17" style="text-align:center">Sin lotes</td></tr>'}</tbody>
  </table>
</body>
</html>`,de=window.open("","_blank");de&&(de.document.open(),de.document.write(re),de.document.close())};return i.jsxs("div",{className:"max-w-6xl mx-auto",children:[i.jsxs("div",{className:"flex items-center justify-between mb-3",children:[i.jsx("h2",{className:"text-2xl font-bold",children:"Inventario de Ropa"}),i.jsx("button",{className:"px-3 py-2 rounded bg-blue-600 text-white hover:bg-blue-700",onClick:()=>_t(!0),type:"button",children:"Crear Inventario"})]}),i.jsxs("div",{className:"bg-white p-3 rounded shadow border mb-4 flex flex-wrap items-end gap-3 text-sm",children:[i.jsxs("div",{className:"flex flex-col",children:[i.jsx("label",{className:"font-semibold",children:"Desde"}),i.jsx("input",{type:"date",className:"border rounded px-2 py-1",value:c,onChange:R=>u(R.target.value)})]}),i.jsxs("div",{className:"flex flex-col",children:[i.jsx("label",{className:"font-semibold",children:"Hasta"}),i.jsx("input",{type:"date",className:"border rounded px-2 py-1",value:d,onChange:R=>f(R.target.value)})]}),i.jsxs("div",{className:"flex flex-col min-w-[240px]",children:[i.jsx("label",{className:"font-semibold",children:"Producto"}),i.jsxs("select",{className:"border rounded px-2 py-1",value:A,onChange:R=>h(R.target.value),children:[i.jsx("option",{value:"",children:"Todos"}),t.map(R=>i.jsxs("option",{value:R.id,children:[R.name,"  ",R.category]},R.id))]})]}),i.jsx("button",{className:"px-3 py-1 rounded bg-gray-200 hover:bg-gray-300",onClick:()=>{u(""),f(""),h("")},children:"Quitar filtro"}),i.jsx("button",{className:"px-3 py-1 rounded bg-blue-600 text-white hover:bg-blue-700",onClick:P,children:"Imprimir PDF"})]}),i.jsx("div",{className:"bg-gray-50 p-3 rounded shadow border mb-3 text-base",children:i.jsxs("div",{className:"grid grid-cols-3 gap-y-2 gap-x-8",children:[i.jsxs("div",{children:[i.jsx("span",{className:"font-semibold",children:"Unidades ingresadas:"})," ",Ee.udsIng.toFixed(0)]}),i.jsxs("div",{children:[i.jsx("span",{className:"font-semibold",children:"Unidades restantes:"})," ",Ee.udsRem.toFixed(0)]}),i.jsxs("div",{children:[i.jsx("span",{className:"font-semibold",children:"Total esperado en ventas:"})," ",Mo(Ee.totalEsperado)]}),i.jsxs("div",{children:[i.jsx("span",{className:"font-semibold",children:"Total facturado:"})," ",Mo(Ee.totalFacturado)]}),i.jsxs("div",{children:[i.jsx("span",{className:"font-semibold",children:"Ganancia sin gastos:"})," ",Mo(Number((Ee.totalEsperado-Ee.totalFacturado).toFixed(2)))]})]})}),i.jsx("div",{className:"bg-white rounded shadow border",children:i.jsx("div",{className:"w-full overflow-x-auto",children:i.jsxs("table",{className:"min-w-full text-xs md:text-sm",children:[i.jsx("thead",{className:"bg-gray-100 sticky top-0 z-10",children:i.jsxs("tr",{children:[i.jsx("th",{className:"p-2 md:p-3 border text-left",children:"Fecha"}),i.jsx("th",{className:"p-2 md:p-3 border text-left hidden sm:table-cell",children:"Subcat."}),i.jsx("th",{className:"p-2 md:p-3 border text-left",children:"Producto"}),i.jsx("th",{className:"p-2 md:p-3 border text-left hidden lg:table-cell",children:"SKU"}),i.jsx("th",{className:"p-2 md:p-3 border text-left hidden md:table-cell",children:"Talla"}),i.jsx("th",{className:"p-2 md:p-3 border text-left hidden md:table-cell",children:"Color"}),i.jsx("th",{className:"p-2 md:p-3 border text-left hidden xl:table-cell",children:"Cdigo Cliente"}),i.jsx("th",{className:"p-2 md:p-3 border text-left hidden lg:table-cell",children:"Gnero"}),i.jsx("th",{className:"p-2 md:p-3 border text-left hidden lg:table-cell",children:"Unidad"}),i.jsx("th",{className:"p-2 md:p-3 border text-right tabular-nums",children:"Ingresado"}),i.jsx("th",{className:"p-2 md:p-3 border text-right tabular-nums",children:"Restantes"}),i.jsx("th",{className:"p-2 md:p-3 border text-right tabular-nums hidden md:table-cell",children:"Precio Compra"}),i.jsx("th",{className:"p-2 md:p-3 border text-right tabular-nums hidden md:table-cell",children:"Precio Venta"}),i.jsx("th",{className:"p-2 md:p-3 border text-right tabular-nums hidden lg:table-cell",children:"Total factura"}),i.jsx("th",{className:"p-2 md:p-3 border text-right tabular-nums hidden lg:table-cell",children:"Total esperado"}),i.jsx("th",{className:"p-2 md:p-3 border text-left hidden xl:table-cell",children:"Comentario"}),i.jsx("th",{className:"p-2 md:p-3 border text-left",children:"Estado"}),i.jsx("th",{className:"p-2 md:p-3 border text-center",children:"Acciones"})]})}),i.jsx("tbody",{className:"whitespace-nowrap",children:a?i.jsx("tr",{children:i.jsx("td",{colSpan:17,className:"p-4 text-center",children:"Cargando"})}):nt.length===0?i.jsx("tr",{children:i.jsx("td",{colSpan:17,className:"p-4 text-center",children:"Sin lotes"})}):nt.map(R=>{const L=V===R.id;return i.jsxs("tr",{className:"text-left",children:[i.jsx("td",{className:"p-2 md:p-3 border align-top",children:L?i.jsx("input",{type:"date",className:"w-full border p-1 rounded",value:ie,onChange:K=>J(K.target.value)}):R.date}),i.jsx("td",{className:"p-2 md:p-3 border align-top hidden sm:table-cell",children:(R.category||"").toUpperCase()}),i.jsx("td",{className:"p-2 md:p-3 border align-top max-w-[220px] md:max-w-[320px]",children:i.jsx("span",{className:"block truncate",title:R.productName,children:R.productName})}),i.jsx("td",{className:"p-2 md:p-3 border align-top hidden lg:table-cell max-w-[220px]",children:L?i.jsx("input",{className:"w-full border p-1 rounded",value:Te,onChange:K=>qe(K.target.value)}):i.jsx("span",{className:"block truncate",title:R.sku||"",children:R.sku||""})}),i.jsx("td",{className:"p-2 md:p-3 border align-top hidden md:table-cell",children:L?i.jsx("input",{className:"w-full border p-1 rounded",value:ge,onChange:K=>q(K.target.value)}):R.size||""}),i.jsx("td",{className:"p-2 md:p-3 border align-top hidden md:table-cell",children:L?i.jsx("input",{className:"w-full border p-1 rounded",value:se,onChange:K=>ye(K.target.value)}):R.color||""}),i.jsx("td",{className:"p-2 md:p-3 border align-top hidden xl:table-cell max-w-[200px]",children:L?i.jsx("input",{className:"w-full border p-1 rounded",value:xe,onChange:K=>{const re=K.target.value;gy.test(re)&&Ae(re)},placeholder:"Ej: LOTE-SHEIN-SEP-01",title:"AZ 09 . _ - (mx 32)"}):i.jsx("span",{className:"block truncate",title:R.clientCode||"",children:R.clientCode||""})}),i.jsx("td",{className:"p-2 md:p-3 border align-top hidden lg:table-cell",children:L?i.jsx("select",{className:"w-full border p-1 rounded",value:ue,onChange:K=>Le(K.target.value),children:$8e.map(K=>i.jsx("option",{value:K,children:K||""},K))}):R.gender||""}),i.jsx("td",{className:"p-2 md:p-3 border align-top hidden lg:table-cell",children:(R.unit||"").toUpperCase()}),i.jsx("td",{className:"p-2 md:p-3 border align-top text-right tabular-nums",children:L?i.jsx("input",{type:"number",step:"1",inputMode:"numeric",className:"w-20 border p-1 rounded text-right",value:Number.isNaN(Oe)?"":Oe,onChange:K=>fe(Math.max(0,parseInt(K.target.value||"0",10)))}):R.quantity.toFixed(0)}),i.jsx("td",{className:"p-2 md:p-3 border align-top text-right tabular-nums",children:L?R.remaining:R.remaining.toFixed(0)}),i.jsx("td",{className:"p-2 md:p-3 border align-top text-right tabular-nums hidden md:table-cell",children:L?i.jsx("input",{type:"number",step:"0.01",inputMode:"decimal",className:"w-24 border p-1 rounded text-right",value:Number.isNaN(_e)?"":_e,onChange:K=>Ue(Math.max(0,parseFloat(K.target.value||"0")))}):Mo(R.purchasePrice)}),i.jsx("td",{className:"p-2 md:p-3 border align-top text-right tabular-nums hidden md:table-cell",children:L?i.jsx("input",{type:"number",step:"0.01",inputMode:"decimal",className:"w-24 border p-1 rounded text-right",value:Number.isNaN(Ye)?"":Ye,onChange:K=>At(Math.max(0,parseFloat(K.target.value||"0")))}):Mo(R.salePrice)}),i.jsx("td",{className:"p-2 md:p-3 border align-top text-right tabular-nums hidden lg:table-cell",children:Mo(L?yt:R.invoiceTotal||0)}),i.jsx("td",{className:"p-2 md:p-3 border align-top text-right tabular-nums hidden lg:table-cell",children:Mo(L?Nt:R.expectedTotal||0)}),i.jsx("td",{className:"p-2 md:p-3 border align-top hidden xl:table-cell max-w-[280px]",children:L?i.jsx("textarea",{className:"w-full border p-1 rounded resize-y min-h-12",value:St,onChange:K=>Ve(K.target.value),maxLength:500}):i.jsx("span",{className:"block truncate",title:R.notes||"",children:R.notes||""})}),i.jsx("td",{className:"p-2 md:p-3 border align-top",children:i.jsx("span",{className:`px-2 py-0.5 rounded text-[10px] md:text-xs ${R.status==="PAGADO"?"bg-green-100 text-green-700":"bg-yellow-100 text-yellow-700"}`,children:R.status})}),i.jsx("td",{className:"p-2 md:p-3 border align-top",children:L?i.jsxs("div",{className:"flex gap-2 justify-center",children:[i.jsx("button",{className:"px-2 py-1 rounded text-white bg-blue-600 hover:bg-blue-700",onClick:Me,children:"Guardar"}),i.jsx("button",{className:"px-2 py-1 rounded bg-gray-200 hover:bg-gray-300",onClick:ce,children:"Cancelar"})]}):i.jsx("button",{type:"button",className:"inline-flex items-center justify-center w-8 h-8 rounded border border-gray-200 hover:bg-gray-100",title:"Acciones",onClick:K=>Mt(K,R.id),children:i.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-4 w-4",viewBox:"0 0 24 24",fill:"currentColor",children:[i.jsx("circle",{cx:"12",cy:"5",r:"1.6"}),i.jsx("circle",{cx:"12",cy:"12",r:"1.6"}),i.jsx("circle",{cx:"12",cy:"19",r:"1.6"})]})})})]},R.id)})})]})})}),Re&&Mu.createPortal(i.jsxs(i.Fragment,{children:[i.jsx("div",{onClick:()=>lt(null),className:"fixed inset-0 z-[60]"}),i.jsx("div",{className:"fixed z-[61] w-44 rounded-md border border-gray-200 bg-white shadow-xl",style:{left:Ne.x,top:Ne.y},onClick:R=>R.stopPropagation(),role:"menu","aria-orientation":"vertical",children:i.jsxs("div",{className:"py-1 text-sm",children:[(()=>{const R=nt.find(L=>L.id===Re);return(R==null?void 0:R.status)==="PENDIENTE"?i.jsx("button",{className:"w-full text-left px-3 py-2 hover:bg-green-50",onClick:()=>{lt(null),oe(R)},children:" Pagar"}):null})(),i.jsx("button",{className:"w-full text-left px-3 py-2 hover:bg-yellow-50",onClick:()=>{const R=nt.find(L=>L.id===Re);R&&(lt(null),Fe(R))},children:" Editar"}),i.jsx("button",{className:"w-full text-left px-3 py-2 hover:bg-red-50 text-red-600",onClick:()=>{const R=nt.find(L=>L.id===Re);R&&(lt(null),Ke(R))},children:" Borrar"})]})})]}),document.body),xt&&Mu.createPortal(i.jsxs("div",{className:"fixed inset-0 z-[70] flex items-center justify-center",children:[i.jsx("div",{className:"absolute inset-0 bg-black/40",onClick:()=>_t(!1)}),i.jsxs("div",{className:"relative bg-white rounded-lg shadow-2xl border w-[96%] max-w-4xl max-h-[92vh] overflow-auto p-4",children:[i.jsxs("div",{className:"flex items-center justify-between mb-2",children:[i.jsx("h3",{className:"text-lg font-bold",children:"Crear Inventario (Lote)"}),i.jsx("button",{className:"px-3 py-1 rounded bg-gray-200 hover:bg-gray-300",onClick:()=>_t(!1),type:"button",children:"Cerrar"})]}),i.jsxs("form",{onSubmit:we,className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[i.jsxs("div",{className:"md:col-span-2",children:[i.jsx("label",{className:"block text-sm font-semibold",children:"Producto de ropa"}),i.jsxs("select",{className:"w-full border p-2 rounded",value:m,onChange:R=>p(R.target.value),children:[i.jsx("option",{value:"",children:"(Opcional) Selecciona un producto"}),t.map(R=>i.jsxs("option",{value:R.id,children:[R.name,"  ",R.category,"  ",R.sku?`SKU: ${R.sku}`:""]},R.id))]})]}),i.jsxs("div",{children:[i.jsx("label",{className:"block text-sm font-semibold",children:"Fecha del lote"}),i.jsx("input",{type:"date",className:"w-full border p-2 rounded",value:x,onChange:R=>v(R.target.value)})]}),i.jsxs("div",{children:[i.jsx("label",{className:"block text-sm font-semibold",children:"Cantidad (pzas)"}),i.jsx("input",{type:"number",step:"1",inputMode:"numeric",className:"w-full border p-2 rounded",value:y===0?"":y,onChange:R=>b(Math.max(0,parseInt(R.target.value||"0",10))),placeholder:""})]}),i.jsxs("div",{children:[i.jsx("label",{className:"block text-sm font-semibold",children:"Precio de compra (pza)"}),i.jsx("input",{type:"number",step:"0.01",inputMode:"decimal",className:"w-full border p-2 rounded",value:w===0?"":w,onChange:R=>j(Math.max(0,parseFloat(R.target.value||"0")))})]}),i.jsxs("div",{children:[i.jsx("label",{className:"block text-sm font-semibold",children:"Precio de venta (pza)"}),i.jsx("input",{type:"number",step:"0.01",inputMode:"decimal",className:"w-full border p-2 rounded",value:I===0?"":I,onChange:R=>_(Math.max(0,parseFloat(R.target.value||"0")))})]}),i.jsxs("div",{children:[i.jsx("label",{className:"block text-sm font-semibold",children:"SKU (auto)"}),i.jsx("input",{className:"w-full border p-2 rounded bg-gray-100",value:X,readOnly:!0,placeholder:"Se genera automticamente o se carga del producto",title:"Si el producto tiene SKU, se usa tal cual; si no, se genera por subcat/gnero/talla/color/marca."})]}),i.jsxs("div",{children:[i.jsx("label",{className:"block text-sm font-semibold",children:"Talla"}),i.jsx("input",{className:"w-full border p-2 rounded bg-gray-100",value:pe,readOnly:!0,onChange:R=>he(R.target.value),placeholder:"XS/S/M/L/XL/10/12"})]}),i.jsxs("div",{children:[i.jsx("label",{className:"block text-sm font-semibold",children:"Color"}),i.jsx("input",{className:"w-full border p-2 rounded bg-gray-100",value:ve,readOnly:!0,onChange:R=>ae(R.target.value),placeholder:"Negro, Azul, Rojo"})]}),i.jsxs("div",{children:[i.jsx("label",{className:"block text-sm font-semibold",children:"Color"}),i.jsx("input",{className:"w-full border p-2 rounded bg-gray-100",value:Pe,readOnly:!0,onChange:R=>ke(R.target.value),placeholder:"Masculino, Femenino, Otro"})]}),i.jsxs("div",{children:[i.jsx("label",{className:"block text-sm font-semibold",children:"Marca / Origen (opcional)"}),i.jsx("input",{className:"w-full border p-2 rounded bg-gray-100",value:O,onChange:R=>G(R.target.value),placeholder:"Shein, Usado, Otro"})]}),i.jsxs("div",{children:[i.jsx("label",{className:"block text-sm font-semibold",children:"Cdigo del cliente (opcional)"}),i.jsx("input",{className:"w-full border p-2 rounded",placeholder:"Ej: LOTE-SHEIN-SEP-01",value:z,onChange:R=>{const L=R.target.value;gy.test(L)&&U(L)},title:"Solo letras, nmeros, punto, guion y guion_bajo (mx 32)"}),!gy.test(z)&&z.length>0&&i.jsx("div",{className:"text-xs text-red-600 mt-1",children:"Formato invlido"})]}),i.jsxs("div",{className:"md:col-span-2",children:[i.jsx("label",{className:"block text-sm font-semibold",children:"Comentario"}),i.jsx("textarea",{className:"w-full border p-2 rounded resize-y min-h-24",value:B,onChange:R=>D(R.target.value),maxLength:500,placeholder:"Ej: Camisita veranera, tela delgada, tirantes"}),i.jsxs("div",{className:"text-xs text-gray-500 text-right",children:[B.length,"/500"]})]}),i.jsxs("div",{children:[i.jsx("label",{className:"block text-sm font-semibold",children:"Total factura (auto)"}),i.jsx("input",{type:"text",className:"w-full border p-2 rounded bg-gray-100",value:Mo(S),readOnly:!0})]}),i.jsxs("div",{children:[i.jsx("label",{className:"block text-sm font-semibold",children:"Total esperado (auto)"}),i.jsx("input",{type:"text",className:"w-full border p-2 rounded bg-gray-100",value:Mo(T),readOnly:!0})]}),i.jsxs("div",{className:"md:col-span-2 flex justify-end gap-2",children:[i.jsx("button",{type:"button",className:"px-4 py-2 rounded bg-gray-200 hover:bg-gray-300",onClick:()=>_t(!1),children:"Cancelar"}),i.jsx("button",{className:"bg-blue-600 text-white px-4 py-2 rounded hover:bg-blue-700",children:"Guardar lote"})]})]})]})]}),document.body),o&&i.jsx("p",{className:"mt-2 text-sm",children:o})]})}const z8e=["Camisa","Blusa","Vestido","Jean","Pantaln","Short","Falda","Conjunto","Abrigo","Suter","Accesorio"],W8e=["Negro","Blanco","Azul","Rojo","Verde","Gris","Beige","Rosa","Amarillo","Marrn","Morado","Naranja"],X8e=["XS","S","M","L","XL","2XL"],Y8e=["2","4","6","8","10","12","14"],J8e=["26","28","30","32","34","36","38"],Z8e=["Shein","Usado","Otro"],eLe=["","HOMBRE","MUJER","NINO","NINA","UNISEX"];function r_(t){return(t||"").trim().toUpperCase().replace(/\s+/g,"-").replace(/[^A-Z0-9-]/g,"")}function tLe(t){switch((t||"").toUpperCase()){case"HOMBRE":return"HOM";case"MUJER":return"MUJ";case"NINO":return"NIN";case"NINA":return"NIA";case"UNISEX":return"UNI";default:return"GEN"}}function rLe(t){const e="ROP",r=r_(t.subcat).slice(0,3)||"GEN",n=tLe(t.gender),a=r_(t.color).slice(0,3)||"COL",s=r_(t.size)||"TLL",o=r_(t.brand).slice(0,4)||"BRD";return`${e}-${r}-${n}-${a}-${s}-${o}`}const nLe=/^[A-Za-z0-9._-]{0,32}$/;function aLe(){const[t,e]=g.useState(""),[r,n]=g.useState("Camisa"),[a,s]=g.useState(""),[o,l]=g.useState(""),[c,u]=g.useState("Shein"),[d,f]=g.useState(""),[A,h]=g.useState(""),[m,p]=g.useState(""),[x,v]=g.useState(""),[y,b]=g.useState(""),[w,j]=g.useState("0"),[I,_]=g.useState(""),[S,E]=g.useState(""),T=g.useMemo(()=>{const U=Number(w||0),Y=Number(y||0);return Math.floor(U*Y*100)/100},[w,y]),[k,B]=g.useState([]),[D,X]=g.useState(!0),[me,pe]=g.useState(""),{refreshKey:he,refresh:ve}=Oc(),[ae,Pe]=g.useState(!1),ke=g.useMemo(()=>r.toLowerCase()==="jean"?J8e:d==="NINO"||d==="NINA"?Y8e:X8e,[r,d]);g.useEffect(()=>{p(rLe({subcat:r,gender:d,color:o,size:a,brand:c}))},[r,d,o,a,c]),g.useEffect(()=>{(async()=>{X(!0);const U=Yt(mt(Se,"products_clothes"),In("createdAt","desc")),Y=await kt(U),ee=[];Y.forEach(M=>{const H=M.data();ee.push({id:M.id,name:H.name??"(sin nombre)",category:H.category??"",measurement:H.measurement??"unidad",sku:H.sku??"",size:H.size||"",color:H.color||"",brand:H.brand||"",gender:H.gender||"",clientCode:H.clientCode||"",notes:H.notes||"",createdAt:H.createdAt??Ar.now()})}),B(ee),X(!1)})()},[he]);const O=()=>{e(""),n("Camisa"),s(""),l(""),u("Shein"),f(""),h(""),v(""),b(""),j("0"),_(""),E("")},G=async U=>{if(U.preventDefault(),pe(""),!t.trim()){pe("Ingresa el nombre del producto.");return}if(A&&!nLe.test(A)){pe("Cdigo del cliente invlido");return}const Y=Number(w||0),ee=Number(y||0);if(Y<0){pe("La cantidad de piezas debe ser 0 o mayor.");return}if(ee<0){pe("El precio de venta no puede ser negativo.");return}try{const M=await Jn(mt(Se,"products_clothes"),{name:t.trim(),category:r,measurement:"unidad",sku:m,size:a||"",color:o||"",brand:c||"",gender:d||"",clientCode:A||"",notes:x||"",createdAt:Ar.now(),price:ee||0});if(B(H=>[{id:M.id,name:t.trim(),category:r,measurement:"unidad",sku:m,size:a||"",color:o||"",brand:c||"",gender:d||"",clientCode:A||"",notes:x||"",createdAt:Ar.now()},...H]),Y>0){const H=new Date().toISOString().slice(0,10),te=I||H;await Jn(mt(Se,"inventory_clothes_batches"),{productId:M.id,productName:t.trim(),category:r,unit:"unidad",quantity:Y,remaining:Y,purchasePrice:0,salePrice:ee||0,invoiceTotal:0,expectedTotal:T||0,date:te,createdAt:Ar.now(),status:"PENDIENTE",notes:S||"",sku:m||"",size:a||"",color:o||"",gender:d||"",brand:c||"",clientCode:A||""})}pe(Y>0?" Producto creado y lote de inventario registrado":" Producto de ropa creado"),O()}catch(M){console.error(M),pe(" Error al crear producto")}},z=async U=>{confirm(`Eliminar el producto "${U.name}"?`)&&(await Kn(Gt(Se,"products_clothes",U.id)),B(ee=>ee.filter(M=>M.id!==U.id)))};return i.jsxs("div",{className:"max-w-6xl mx-auto",children:[i.jsxs("div",{className:"flex items-center justify-between mb-3",children:[i.jsx("h2",{className:"text-2xl font-bold",children:"Productos de Ropa"}),i.jsxs("div",{className:"flex gap-2",children:[i.jsx(Fc,{onClick:ve,loading:D}),i.jsxs("button",{className:"inline-flex items-center gap-2 bg-green-600 text-white px-3 py-2 rounded hover:bg-green-700",onClick:()=>{Pe(!0)},children:[i.jsx("span",{className:"inline-block bg-green-700/40 rounded-full p-1",children:i.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-4 w-4",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:i.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 4v16m8-8H4"})})}),"Nuevo producto"]})]})]}),ae&&i.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-40 flex items-center justify-center z-50",children:i.jsxs("div",{className:"bg-white p-6 rounded shadow-lg w-full max-w-2xl max-h-[90vh] overflow-y-auto",children:[i.jsx("h3",{className:"text-xl font-bold mb-4",children:"Nuevo producto de ropa"}),i.jsxs("form",{onSubmit:G,className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[i.jsxs("div",{children:[i.jsx("label",{className:"block text-sm font-semibold",children:"Nombre"}),i.jsx("input",{className:"w-full border p-2 rounded",value:t,onChange:U=>e(U.target.value),placeholder:"Ej: Blusa floral"})]}),i.jsxs("div",{children:[i.jsx("label",{className:"block text-sm font-semibold",children:"Subcategora"}),i.jsx("select",{className:"w-full border p-2 rounded",value:r,onChange:U=>n(U.target.value),children:z8e.map(U=>i.jsx("option",{value:U,children:U},U))})]}),i.jsxs("div",{children:[i.jsx("label",{className:"block text-sm font-semibold",children:"Gnero"}),i.jsx("select",{className:"w-full border p-2 rounded",value:d,onChange:U=>f(U.target.value),children:eLe.map(U=>i.jsx("option",{value:U,children:U||""},U))})]}),i.jsxs("div",{children:[i.jsx("label",{className:"block text-sm font-semibold",children:"Talla"}),i.jsxs("select",{className:"w-full border p-2 rounded",value:a,onChange:U=>s(U.target.value),children:[i.jsx("option",{value:"",children:""}),ke.map(U=>i.jsx("option",{value:U,children:U},U))]})]}),i.jsxs("div",{children:[i.jsx("label",{className:"block text-sm font-semibold",children:"Color"}),i.jsxs("select",{className:"w-full border p-2 rounded",value:o,onChange:U=>l(U.target.value),children:[i.jsx("option",{value:"",children:""}),W8e.map(U=>i.jsx("option",{value:U,children:U},U))]})]}),i.jsxs("div",{children:[i.jsx("label",{className:"block text-sm font-semibold",children:"Marca"}),i.jsx("select",{className:"w-full border p-2 rounded",value:c,onChange:U=>u(U.target.value),children:Z8e.map(U=>i.jsx("option",{value:U,children:U},U))})]}),i.jsxs("div",{children:[i.jsx("label",{className:"block text-sm font-semibold",children:"SKU (auto)"}),i.jsx("input",{className:"w-full border p-2 rounded bg-gray-100",value:m,readOnly:!0})]}),i.jsxs("div",{children:[i.jsx("label",{className:"block text-sm font-semibold",children:"Cdigo cliente"}),i.jsx("input",{className:"w-full border p-2 rounded",value:A,onChange:U=>h(U.target.value)})]}),i.jsxs("div",{children:[i.jsx("label",{className:"block text-sm font-semibold",children:"Precio de venta (pza)"}),i.jsx("input",{className:"w-full border p-2 rounded",type:"number",step:"0.01",min:0,value:y,onChange:U=>b(U.target.value),placeholder:"0.00"})]}),i.jsxs("div",{children:[i.jsx("label",{className:"block text-sm font-semibold",children:"Cantidad de piezas (crea lote si > 0)"}),i.jsx("input",{className:"w-full border p-2 rounded",type:"number",min:0,value:w,onChange:U=>j(U.target.value),placeholder:"0"})]}),i.jsxs("div",{children:[i.jsx("label",{className:"block text-sm font-semibold",children:"Fecha de lote"}),i.jsx("input",{className:"w-full border p-2 rounded",type:"date",value:I,onChange:U=>_(U.target.value)})]}),i.jsxs("div",{className:"md:col-span-2 flex items-center justify-between border-t pt-3 mt-2 text-sm",children:[i.jsxs("div",{children:[i.jsx("span",{className:"font-semibold",children:"Medicin:"})," unidad"]}),i.jsxs("div",{children:[i.jsx("span",{className:"font-semibold",children:"Total esperado (auto): "}),isNaN(T)?"":T.toFixed(2)]})]}),i.jsxs("div",{className:"md:col-span-2 flex justify-end gap-2 mt-2",children:[i.jsx("button",{type:"button",onClick:O,className:"px-3 py-1 rounded bg-gray-200 hover:bg-gray-300",children:"Limpiar"}),i.jsx("button",{type:"button",onClick:()=>Pe(!1),className:"px-3 py-1 rounded bg-gray-200 hover:bg-gray-300",children:"Cancelar"}),i.jsx("button",{type:"submit",className:"px-3 py-1 rounded bg-blue-600 text-white hover:bg-blue-700",children:"Guardar"})]})]})]})}),i.jsx("div",{className:"bg-white p-2 rounded shadow border w-full",children:i.jsxs("table",{className:"min-w-full text-sm",children:[i.jsx("thead",{className:"bg-gray-100",children:i.jsxs("tr",{children:[i.jsx("th",{className:"p-2 border",children:"Fecha"}),i.jsx("th",{className:"p-2 border",children:"Subcat."}),i.jsx("th",{className:"p-2 border",children:"Nombre"}),i.jsx("th",{className:"p-2 border",children:"SKU"}),i.jsx("th",{className:"p-2 border",children:"Talla"}),i.jsx("th",{className:"p-2 border",children:"Color"}),i.jsx("th",{className:"p-2 border",children:"Marca"}),i.jsx("th",{className:"p-2 border",children:"Gnero"}),i.jsx("th",{className:"p-2 border",children:"Cdigo Cliente"}),i.jsx("th",{className:"p-2 border",children:"Comentario"}),i.jsx("th",{className:"p-2 border",children:"Acciones"})]})}),i.jsx("tbody",{children:D?i.jsx("tr",{children:i.jsx("td",{colSpan:11,className:"p-4 text-center",children:"Cargando"})}):k.length===0?i.jsx("tr",{children:i.jsx("td",{colSpan:11,className:"p-4 text-center",children:"Sin productos"})}):k.map(U=>{var Y;return i.jsxs("tr",{className:"text-center",children:[i.jsx("td",{className:"p-2 border",children:(Y=U.createdAt)!=null&&Y.toDate?U.createdAt.toDate().toISOString().slice(0,10):""}),i.jsx("td",{className:"p-2 border",children:U.category}),i.jsx("td",{className:"p-2 border",children:U.name}),i.jsx("td",{className:"p-2 border",children:U.sku}),i.jsx("td",{className:"p-2 border",children:U.size||""}),i.jsx("td",{className:"p-2 border",children:U.color||""}),i.jsx("td",{className:"p-2 border",children:U.brand||""}),i.jsx("td",{className:"p-2 border",children:U.gender||""}),i.jsx("td",{className:"p-2 border",children:U.clientCode||""}),i.jsx("td",{className:"p-2 border",children:U.notes||""}),i.jsx("td",{className:"p-2 border",children:i.jsx("button",{className:"px-2 py-1 rounded bg-red-600 text-white hover:bg-red-700",onClick:()=>z(U),children:"Borrar"})})]},U.id)})})]})}),me&&i.jsx("p",{className:"mt-2 text-sm",children:me})]})}async function sLe(t){const{productId:e,quantity:r,saleDate:n,saleId:a}=t,s=Math.max(0,Math.floor(Number(r||0)));if(!e||s<=0)throw new Error("Parmetros invlidos para allocateSaleFIFOClothes");const o=Yt(mt(Se,"inventory_clothes_batches"),cr("productId","==",e)),u=(await kt(o)).docs.map(f=>({id:f.id,data:f.data()})).sort((f,A)=>{var v,y;const h=String(f.data.date||""),m=String(A.data.date||"");if(h!==m)return h<m?-1:1;const p=((v=f.data.createdAt)==null?void 0:v.seconds)??0,x=((y=A.data.createdAt)==null?void 0:y.seconds)??0;return p-x}).map(f=>Gt(Se,"inventory_clothes_batches",f.id)),d=[];return await Gs(Se,async f=>{const A=await Promise.all(u.map(m=>f.get(m)));let h=s;for(let m=0;m<u.length&&h>0;m++){const p=u[m],x=A[m];if(!x.exists())continue;const v=x.data(),y=Math.max(0,Math.floor(Number(v.quantity||0))),b=Number.isFinite(Number(v.remaining))?Math.max(0,Math.floor(Number(v.remaining||0))):y;if(b<=0)continue;const w=Math.min(b,h),j=Math.max(0,b-w);f.update(p,{remaining:j}),d.push({batchId:p.id,qty:w,batchDate:String(v.date||""),productName:String(v.productName||"")}),h-=w}if(h>0)throw new Error(`Inventario insuficiente. Faltan ${h} unidades.`);if(a)for(const m of d)await Jn(mt(Se,"batch_clothes_allocations"),{saleId:a,saleDate:n,productId:e,productName:m.productName??"",batchId:m.batchId,batchDate:m.batchDate??"",quantity:m.qty,createdAt:Ar.now()})}),{allocations:d}}async function sF(t){const e=Gt(Se,"sales_clothes",t),r=await zs(e);if(!r.exists())throw new Error("La venta no existe.");const n=r.data(),a=[];if(Array.isArray(n.items)&&n.items.length>0){const l={};if(n.allocationsByItem&&typeof n.allocationsByItem=="object")for(const c of Object.keys(n.allocationsByItem)){const u=n.allocationsByItem[c],d=String((u==null?void 0:u.productId)||c||"");if(!d)continue;const f=Array.isArray(u==null?void 0:u.allocations)?u.allocations:[];l[d]=f.map(A=>({batchId:String(A.batchId),qty:Math.max(0,Math.floor(Number(A.qty||A.quantity||0)))}))}if(Array.isArray(n.allocationsByItem))for(const c of n.allocationsByItem){const u=String((c==null?void 0:c.productId)||"");if(!u)continue;const d=Array.isArray(c==null?void 0:c.allocations)?c.allocations:[];l[u]=d.map(f=>({batchId:String(f.batchId),qty:Math.max(0,Math.floor(Number(f.qty||f.quantity||0)))}))}for(const c of n.items){const u=String((c==null?void 0:c.productId)||"");if(!u)continue;const d=Math.max(0,Math.floor(Number((c==null?void 0:c.qty)||(c==null?void 0:c.quantity)||0))),f=Array.isArray(c==null?void 0:c.allocations)?c.allocations.map(A=>({batchId:String(A.batchId),qty:Math.max(0,Math.floor(Number(A.qty||A.quantity||0)))})):l[u]||[];a.push({productId:u,productName:String((c==null?void 0:c.productName)||""),qty:d,allocations:f.length?f:void 0})}}else{const l=n.item||{},c=String(l.productId||n.productId||""),u=Math.max(0,Math.floor(Number(l.qty??n.quantity??0))),d=Array.isArray(n.allocations)?n.allocations.map(f=>({batchId:String(f.batchId),qty:Math.max(0,Math.floor(Number(f.qty||f.quantity||0)))})):[];c&&u>0&&a.push({productId:c,productName:String(l.productName||n.productName||""),qty:u,allocations:d.length?d:void 0})}return a.length===0?(await Gs(Se,async l=>{l.delete(e)}),{restored:0}):a.every(l=>Array.isArray(l.allocations)&&l.allocations.length>0)?(await Gs(Se,async c=>{const u=[];for(const f of a)for(const A of f.allocations||[])u.push({ref:Gt(Se,"inventory_clothes_batches",A.batchId),addBack:Math.max(0,Math.floor(Number(A.qty||0)))});const d=await Promise.all(u.map(f=>c.get(f.ref)));for(let f=0;f<u.length;f++){const A=d[f];if(!A.exists())continue;const h=A.data(),m=Math.max(0,Math.floor(Number(h.remaining||0)));c.update(u[f].ref,{remaining:m+u[f].addBack})}c.delete(e)}),{restored:a.reduce((c,u)=>c+(u.allocations||[]).reduce((d,f)=>d+f.qty,0),0)}):(await Gs(Se,async l=>{const c={};for(const h of a){if(!h.productId||h.qty<=0)continue;const m=Yt(mt(Se,"inventory_clothes_batches"),cr("productId","==",h.productId)),x=(await kt(m)).docs.map(v=>{const y=v.data(),b=Math.max(0,Math.floor(Number(y.quantity||0))),w=Number.isFinite(Number(y.remaining))?Math.max(0,Math.floor(Number(y.remaining||0))):b;return{id:v.id,date:String(y.date||""),quantity:b,remaining:w}}).sort((v,y)=>v.date.localeCompare(y.date));c[h.productId]=x}const u=[];for(const h of a){if(!h.productId||h.qty<=0)continue;if(Array.isArray(h.allocations)&&h.allocations.length>0){for(const x of h.allocations)u.push({id:x.batchId,addBack:Math.max(0,Math.floor(Number(x.qty||0)))});continue}const m=c[h.productId]||[];let p=h.qty;for(const x of m){if(p<=0)break;const v=Math.max(0,x.quantity-x.remaining);if(v<=0)continue;const y=Math.min(v,p);u.push({id:x.id,addBack:y}),p-=y}for(const x of m){if(p<=0)break;const v=Math.min(p,h.qty);u.push({id:x.id,addBack:v}),p-=v}}const d={};for(const h of u)d[h.id]=(d[h.id]||0)+Math.max(0,Math.floor(Number(h.addBack||0)));const f=Object.keys(d).map(h=>Gt(Se,"inventory_clothes_batches",h)),A=await Promise.all(f.map(h=>l.get(h)));for(let h=0;h<f.length;h++){const m=A[h];if(!m.exists())continue;const p=m.data(),x=Math.max(0,Math.floor(Number(p.remaining||0))),v=Math.max(0,Math.floor(Number(d[f[h].id]||0)));l.update(f[h],{remaining:x+v})}l.delete(e)}),{restored:a.reduce((l,c)=>l+c.qty,0)})}const p$=["Altagracia","Taguizapa","El paso","Calaysa","Urbaite","Las Pilas"],Bh=t=>`C$ ${(Number(t)||0).toFixed(2)}`;function n_(t){const e="+505 ";if(!t.startsWith(e)){const n=t.replace(/\D/g,"");return e+n.slice(0,8)}const r=t.slice(e.length).replace(/\D/g,"");return e+r.slice(0,8)}async function g$(t){const e=Yt(mt(Se,"ar_movements"),cr("ref.saleId","==",t)),r=await kt(e);await Promise.all(r.docs.map(n=>Kn(Gt(Se,"ar_movements",n.id))))}function iLe(){const[t,e]=g.useState(!1),[r,n]=g.useState(!1),[a,s]=g.useState(null),[o,l]=g.useState([]),c=async Ee=>{e(!0),n(!0),s(Ee),l([]);try{const oe=(await kt(Yt(mt(Se,"sales_clothes"),cr("__name__","==",Ee)))).docs[0],Fe=oe==null?void 0:oe.data(),Me=(Array.isArray(Fe==null?void 0:Fe.items)?Fe.items:Fe!=null&&Fe.item?[Fe.item]:[]).map(Ke=>({productName:String(Ke.productName||""),qty:Number(Ke.qty||0),unitPrice:Number(Ke.unitPrice||0),discount:Number(Ke.discount||0),total:Number(Ke.total||0)}));l(Me)}catch(we){console.error(we)}finally{n(!1)}},[u,d]=g.useState(""),[f,A]=g.useState("+505 "),[h,m]=g.useState(""),[p,x]=g.useState(""),[v,y]=g.useState("ACTIVO"),[b,w]=g.useState(0),[j,I]=g.useState([]),[_,S]=g.useState(!0),[E,T]=g.useState(""),[k,B]=g.useState(null),[D,X]=g.useState(""),[me,pe]=g.useState("+505 "),[he,ve]=g.useState(""),[ae,Pe]=g.useState(""),[ke,O]=g.useState("ACTIVO"),[G,z]=g.useState(0),[U,Y]=g.useState(!1),[ee,M]=g.useState(null),[H,te]=g.useState(!1),[Ce,V]=g.useState([]),[We,ie]=g.useState({saldoActual:0,totalAbonado:0,totalCargos:0}),[J,Oe]=g.useState(!1),[fe,_e]=g.useState(0),[Ue,Ye]=g.useState(new Date().toISOString().slice(0,10)),[At,yt]=g.useState(""),[bt,Nt]=g.useState(!1),[jt,St]=g.useState(null),[Ve,Te]=g.useState(""),[qe,ge]=g.useState(0),[q,se]=g.useState(""),[ye,ue]=g.useState(!1);g.useEffect(()=>{(async()=>{const Ee=Yt(mt(Se,"customers_clothes"),In("createdAt","desc")),we=await kt(Ee),oe=[];we.forEach(Fe=>{const ce=Fe.data();oe.push({id:Fe.id,name:ce.name??"",phone:ce.phone??"+505 ",place:ce.place??"",notes:ce.notes??"",status:ce.status??"ACTIVO",creditLimit:Number(ce.creditLimit??0),createdAt:ce.createdAt??Ar.now(),balance:0})});for(const Fe of oe)try{const ce=Yt(mt(Se,"ar_movements"),cr("customerId","==",Fe.id)),Me=await kt(ce);let Ke=0;Me.forEach(P=>Ke+=Number(P.data().amount||0)),Fe.balance=Ke}catch{Fe.balance=0}I(oe),S(!1)})()},[]);const Le=()=>{d(""),A("+505 "),m(""),x(""),y("ACTIVO"),w(0)},ct=async Ee=>{if(Ee.preventDefault(),T(""),!u.trim()){T("Ingresa el nombre.");return}const we=n_(f);if(we.length<6){T("Telfono incompleto.");return}try{const oe=await Jn(mt(Se,"customers_clothes"),{name:u.trim(),phone:we,place:h||"",notes:p||"",status:v,creditLimit:Number(b||0),createdAt:Ar.now()});I(Fe=>[{id:oe.id,name:u.trim(),phone:we,place:h||"",notes:p||"",status:v,creditLimit:Number(b||0),createdAt:Ar.now(),balance:0},...Fe]),Le(),ue(!1),T(" Cliente creado")}catch(oe){console.error(oe),T(" Error al crear cliente")}},ht=Ee=>{B(Ee.id),X(Ee.name),pe(Ee.phone||"+505 "),ve(Ee.place||""),Pe(Ee.notes||""),O(Ee.status||"ACTIVO"),z(Number(Ee.creditLimit||0))},xe=()=>{B(null),X(""),pe("+505 "),ve(""),Pe(""),O("ACTIVO"),z(0)},Ae=async()=>{if(!k)return;const Ee=n_(me);if(!D.trim()){T("Ingresa el nombre.");return}try{await kn(Gt(Se,"customers_clothes",k),{name:D.trim(),phone:Ee,place:he||"",notes:ae||"",status:ke,creditLimit:Number(G||0)}),I(we=>we.map(oe=>oe.id===k?{...oe,name:D.trim(),phone:Ee,place:he||"",notes:ae||"",status:ke,creditLimit:Number(G||0)}:oe)),xe(),T(" Cliente actualizado")}catch(we){console.error(we),T(" Error al actualizar")}},Re=async Ee=>{if(confirm(`Eliminar al cliente "${Ee.name}"?
Se devolvern al inventario todas las prendas de sus compras y se borrarn sus movimientos.`))try{S(!0);const oe=Yt(mt(Se,"sales_clothes"),cr("customerId","==",Ee.id)),Fe=await kt(oe);for(const Ke of Fe.docs){const P=Ke.id;try{await sF(P)}catch(R){console.warn("restoreSaleAndDeleteClothes error",R);try{await Kn(Gt(Se,"sales_clothes",P))}catch{}}await g$(P)}const ce=Yt(mt(Se,"ar_movements"),cr("customerId","==",Ee.id)),Me=await kt(ce);await Promise.all(Me.docs.map(Ke=>Kn(Gt(Se,"ar_movements",Ke.id)))),await Kn(Gt(Se,"customers_clothes",Ee.id)),I(Ke=>Ke.filter(P=>P.id!==Ee.id)),T(" Cliente eliminado y prendas devueltas al inventario")}catch(oe){console.error(oe),T(" No se pudo eliminar el cliente.")}finally{S(!1)}},lt=async Ee=>{M(Ee),V([]),ie({saldoActual:0,totalAbonado:0,totalCargos:0}),Y(!0),Oe(!1),_e(0),Ye(new Date().toISOString().slice(0,10)),yt(""),St(null),te(!0);try{const we=Yt(mt(Se,"ar_movements"),cr("customerId","==",Ee.id)),oe=await kt(we),Fe=[];oe.forEach(ce=>{var Ke,P;const Me=ce.data();Fe.push({id:ce.id,date:Me.date??((P=(Ke=Me.createdAt)==null?void 0:Ke.toDate)!=null&&P.call(Ke)?Me.createdAt.toDate().toISOString().slice(0,10):""),type:Me.type??"CARGO",amount:Number(Me.amount||0),ref:Me.ref||{},comment:Me.comment||"",createdAt:Me.createdAt})}),Fe.sort((ce,Me)=>{var R,L;if(ce.date!==Me.date)return ce.date.localeCompare(Me.date);const Ke=((R=ce.createdAt)==null?void 0:R.seconds)||0,P=((L=Me.createdAt)==null?void 0:L.seconds)||0;return Ke-P}),V(Fe),Ne(Fe)}catch(we){console.error(we),T(" No se pudo cargar el estado de cuenta")}finally{te(!1)}},Ne=Ee=>{const we=Ee.reduce((ce,Me)=>ce+(Number(Me.amount)||0),0),oe=Ee.filter(ce=>Number(ce.amount)<0).reduce((ce,Me)=>ce+Math.abs(Number(Me.amount)||0),0),Fe=Ee.filter(ce=>Number(ce.amount)>0).reduce((ce,Me)=>ce+Number(Me.amount)||0,0);ie({saldoActual:we,totalAbonado:oe,totalCargos:Fe})},De=async()=>{if(!ee)return;T("");const Ee=Number(fe||0);if(!(Ee>0)){T("Ingresa un monto de abono mayor a 0.");return}const we=parseFloat(Ee.toFixed(2));if(!Ue){T("Selecciona la fecha del abono.");return}try{Nt(!0);const oe={customerId:ee.id,type:"ABONO",amount:-we,date:Ue,comment:At||"",createdAt:Ar.now()},ce={id:(await Jn(mt(Se,"ar_movements"),oe)).id,date:Ue,type:"ABONO",amount:-we,comment:At||"",createdAt:Ar.now()},Me=[...Ce,ce].sort((Ke,P)=>{var K,re;if(Ke.date!==P.date)return Ke.date.localeCompare(P.date);const R=((K=Ke.createdAt)==null?void 0:K.seconds)||0,L=((re=P.createdAt)==null?void 0:re.seconds)||0;return R-L});V(Me),Ne(Me),I(Ke=>Ke.map(P=>P.id===ee.id?{...P,balance:(P.balance||0)-we}:P)),M(Ke=>Ke&&{...Ke,balance:(Ke.balance||0)-we}),_e(0),yt(""),Ye(new Date().toISOString().slice(0,10)),Oe(!1),T(" Abono registrado")}catch(oe){console.error(oe),T(" Error al registrar el abono")}finally{Nt(!1)}},xt=Ee=>{St(Ee.id),Te(Ee.date||new Date().toISOString().slice(0,10)),ge(Math.abs(Number(Ee.amount||0))),se(Ee.comment||"")},_t=()=>{St(null),Te(""),ge(0),se("")},Et=async()=>{if(!jt)return;const Ee=Ce.findIndex(ce=>ce.id===jt);if(Ee===-1)return;const we=Ce[Ee],oe=Number(qe||0);if(!(oe>0)){T("El monto debe ser mayor a 0.");return}const Fe=we.type==="ABONO"?-parseFloat(oe.toFixed(2)):+parseFloat(oe.toFixed(2));try{await kn(Gt(Se,"ar_movements",jt),{date:Ve,amount:Fe,comment:q||""});const ce=[...Ce];ce[Ee]={...we,date:Ve,amount:Fe,comment:q||""},ce.sort((Ke,P)=>{var K,re;if(Ke.date!==P.date)return Ke.date.localeCompare(P.date);const R=((K=Ke.createdAt)==null?void 0:K.seconds)||0,L=((re=P.createdAt)==null?void 0:re.seconds)||0;return R-L}),V(ce),Ne(ce);const Me=ce.reduce((Ke,P)=>Ke+(Number(P.amount)||0),0);I(Ke=>Ke.map(P=>P.id===(ee==null?void 0:ee.id)?{...P,balance:Me}:P)),M(Ke=>Ke&&{...Ke,balance:Me}),_t(),T(" Movimiento actualizado")}catch(ce){console.error(ce),T(" Error al actualizar movimiento")}},Mt=async Ee=>{var oe,Fe;if(confirm(`Eliminar este movimiento (${Ee.type==="ABONO"?"Abono":"Compra"}) del ${Ee.date}?${Ee.type==="CARGO"&&((oe=Ee.ref)!=null&&oe.saleId)?`
Se devolvern al inventario las prendas de esa venta.`:""}`))try{if(S(!0),Ee.type==="CARGO"&&((Fe=Ee.ref)!=null&&Fe.saleId)){try{await sF(Ee.ref.saleId)}catch(Ke){console.warn("restoreSaleAndDeleteClothes error",Ke),S(!1),T(" No se pudo devolver inventario de la venta.");return}await g$(Ee.ref.saleId)}else await Kn(Gt(Se,"ar_movements",Ee.id));const ce=Ce.filter(Ke=>{var P,R;return Ee.type==="CARGO"&&((P=Ee.ref)!=null&&P.saleId)?((R=Ke.ref)==null?void 0:R.saleId)!==Ee.ref.saleId:Ke.id!==Ee.id});V(ce),Ne(ce);const Me=ce.reduce((Ke,P)=>Ke+(Number(P.amount)||0),0);I(Ke=>Ke.map(P=>P.id===(ee==null?void 0:ee.id)?{...P,balance:Me}:P)),M(Ke=>Ke&&{...Ke,balance:Me}),T(" Movimiento eliminado")}catch(ce){console.error(ce),T(" Error al eliminar movimiento")}finally{S(!1)}},nt=g.useMemo(()=>[...j].sort((Ee,we)=>{var oe,Fe;return Ee.status!==we.status?Ee.status==="BLOQUEADO"?1:-1:(((oe=we.createdAt)==null?void 0:oe.seconds)||0)-(((Fe=Ee.createdAt)==null?void 0:Fe.seconds)||0)}),[j]);return i.jsxs("div",{className:"max-w-6xl mx-auto",children:[i.jsxs("div",{className:"flex items-center justify-between mb-3",children:[i.jsx("h2",{className:"text-2xl font-bold",children:"Clientes (Ropa)"}),i.jsx("button",{className:"px-3 py-2 rounded bg-blue-600 text-white hover:bg-blue-700",onClick:()=>ue(!0),type:"button",children:"Crear Cliente"})]}),i.jsx("div",{className:"bg-white p-2 rounded shadow border w-full",children:i.jsxs("table",{className:"min-w-full w-full text-sm",children:[i.jsx("thead",{className:"bg-gray-100",children:i.jsxs("tr",{children:[i.jsx("th",{className:"p-2 border",children:"Fecha"}),i.jsx("th",{className:"p-2 border",children:"Nombre"}),i.jsx("th",{className:"p-2 border",children:"Telfono"}),i.jsx("th",{className:"p-2 border",children:"Lugar"}),i.jsx("th",{className:"p-2 border",children:"Estado"}),i.jsx("th",{className:"p-2 border",children:"Lmite"}),i.jsx("th",{className:"p-2 border",children:"Saldo"}),i.jsx("th",{className:"p-2 border",children:"Comentario"}),i.jsx("th",{className:"p-2 border",children:"Acciones"})]})}),i.jsx("tbody",{children:_?i.jsx("tr",{children:i.jsx("td",{className:"p-4 text-center",colSpan:9,children:"Cargando"})}):nt.length===0?i.jsx("tr",{children:i.jsx("td",{className:"p-4 text-center",colSpan:9,children:"Sin clientes"})}):nt.map(Ee=>{var oe;const we=k===Ee.id;return i.jsxs("tr",{className:"text-center",children:[i.jsx("td",{className:"p-2 border",children:(oe=Ee.createdAt)!=null&&oe.toDate?Ee.createdAt.toDate().toISOString().slice(0,10):""}),i.jsx("td",{className:"p-2 border",children:we?i.jsx("input",{className:"w-full border p-1 rounded",value:D,onChange:Fe=>X(Fe.target.value)}):Ee.name}),i.jsx("td",{className:"p-2 border",children:we?i.jsx("input",{className:"w-full border p-1 rounded",value:me,onChange:Fe=>pe(n_(Fe.target.value))}):Ee.phone}),i.jsx("td",{className:"p-2 border",children:we?i.jsxs("select",{className:"w-full border p-1 rounded",value:he,onChange:Fe=>ve(Fe.target.value),children:[i.jsx("option",{value:"",children:""}),p$.map(Fe=>i.jsx("option",{value:Fe,children:Fe},Fe))]}):Ee.place||""}),i.jsx("td",{className:"p-2 border",children:we?i.jsxs("select",{className:"w-full border p-1 rounded",value:ke,onChange:Fe=>O(Fe.target.value),children:[i.jsx("option",{value:"ACTIVO",children:"ACTIVO"}),i.jsx("option",{value:"BLOQUEADO",children:"BLOQUEADO"})]}):i.jsx("span",{className:`px-2 py-0.5 rounded text-xs ${Ee.status==="ACTIVO"?"bg-green-100 text-green-700":"bg-red-100 text-red-700"}`,children:Ee.status})}),i.jsx("td",{className:"p-2 border",children:we?i.jsx("input",{type:"number",step:"0.01",inputMode:"decimal",className:"w-full border p-1 rounded text-right",value:Number.isNaN(G)?"":G,onChange:Fe=>z(Math.max(0,Number(Fe.target.value||0)))}):Bh(Ee.creditLimit||0)}),i.jsx("td",{className:"p-2 border font-semibold",children:Bh(Ee.balance||0)}),i.jsx("td",{className:"p-2 border",children:we?i.jsx("textarea",{className:"w-full border p-1 rounded resize-y min-h-12",value:ae,onChange:Fe=>Pe(Fe.target.value),maxLength:500}):i.jsx("span",{title:Ee.notes||"",children:(Ee.notes||"").length>40?(Ee.notes||"").slice(0,40)+"":Ee.notes||""})}),i.jsx("td",{className:"p-2 border",children:i.jsx("div",{className:"flex gap-2 justify-center",children:we?i.jsxs(i.Fragment,{children:[i.jsx("button",{className:"px-2 py-1 rounded text-white bg-blue-600 hover:bg-blue-700",onClick:Ae,children:"Guardar"}),i.jsx("button",{className:"px-2 py-1 rounded bg-gray-200 hover:bg-gray-300",onClick:xe,children:"Cancelar"})]}):i.jsxs(i.Fragment,{children:[i.jsx("button",{className:"px-2 py-1 rounded text-white bg-yellow-600 hover:bg-yellow-700",onClick:()=>ht(Ee),children:"Editar"}),i.jsx("button",{className:"px-2 py-1 rounded text-white bg-red-600 hover:bg-red-700",onClick:()=>Re(Ee),children:"Borrar"}),i.jsx("button",{className:"px-2 py-1 rounded text-white bg-indigo-600 hover:bg-indigo-700",onClick:()=>lt(Ee),title:"Ver compras y abonos",children:"Estado de cuenta"})]})})})]},Ee.id)})})]})}),E&&i.jsx("p",{className:"mt-2 text-sm",children:E}),ye&&Mu.createPortal(i.jsxs("div",{className:"fixed inset-0 z-[70] flex items-center justify-center",children:[i.jsx("div",{className:"absolute inset-0 bg-black/40",onClick:()=>ue(!1)}),i.jsxs("div",{className:"relative bg-white rounded-lg shadow-2xl border w-[96%] max-w-3xl max-h-[92vh] overflow-auto p-4",children:[i.jsxs("div",{className:"flex items-center justify-between mb-2",children:[i.jsx("h3",{className:"text-lg font-bold",children:"Crear Cliente"}),i.jsx("button",{className:"px-3 py-1 rounded bg-gray-200 hover:bg-gray-300",onClick:()=>ue(!1),type:"button",children:"Cerrar"})]}),i.jsxs("form",{onSubmit:ct,className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[i.jsxs("div",{children:[i.jsx("label",{className:"block text-sm font-semibold",children:"Nombre"}),i.jsx("input",{className:"w-full border p-2 rounded",placeholder:"Ej: Mara Lpez",value:u,onChange:Ee=>d(Ee.target.value)})]}),i.jsxs("div",{children:[i.jsx("label",{className:"block text-sm font-semibold",children:"Telfono"}),i.jsx("input",{className:"w-full border p-2 rounded",value:f,onChange:Ee=>A(n_(Ee.target.value)),placeholder:"+505 88888888",inputMode:"numeric"})]}),i.jsxs("div",{children:[i.jsx("label",{className:"block text-sm font-semibold",children:"Lugar"}),i.jsxs("select",{className:"w-full border p-2 rounded",value:h,onChange:Ee=>m(Ee.target.value),children:[i.jsx("option",{value:"",children:""}),p$.map(Ee=>i.jsx("option",{value:Ee,children:Ee},Ee))]})]}),i.jsxs("div",{children:[i.jsx("label",{className:"block text-sm font-semibold",children:"Estado"}),i.jsxs("select",{className:"w-full border p-2 rounded",value:v,onChange:Ee=>y(Ee.target.value),children:[i.jsx("option",{value:"ACTIVO",children:"ACTIVO"}),i.jsx("option",{value:"BLOQUEADO",children:"BLOQUEADO"})]})]}),i.jsxs("div",{children:[i.jsx("label",{className:"block text-sm font-semibold",children:"Lmite de crdito (opcional)"}),i.jsx("input",{type:"number",step:"0.01",inputMode:"decimal",className:"w-full border p-2 rounded",value:b===0?"":b,onChange:Ee=>w(Math.max(0,Number(Ee.target.value||0))),placeholder:"Ej: 2000"})]}),i.jsxs("div",{className:"md:col-span-2",children:[i.jsx("label",{className:"block text-sm font-semibold",children:"Comentario"}),i.jsx("textarea",{className:"w-full border p-2 rounded resize-y min-h-24",value:p,onChange:Ee=>x(Ee.target.value),maxLength:500,placeholder:"Notas del cliente"}),i.jsxs("div",{className:"text-xs text-gray-500 text-right",children:[p.length,"/500"]})]}),i.jsxs("div",{className:"md:col-span-2 flex justify-end gap-2",children:[i.jsx("button",{type:"button",className:"px-4 py-2 rounded bg-gray-200 hover:bg-gray-300",onClick:()=>ue(!1),children:"Cancelar"}),i.jsx("button",{className:"bg-blue-600 text-white px-4 py-2 rounded hover:bg-blue-700",children:"Guardar cliente"})]})]})]})]}),document.body),U&&i.jsx("div",{className:"fixed inset-0 bg-black/40 flex items-center justify-center z-50",children:i.jsxs("div",{className:"bg-white rounded-lg shadow-xl border w-[95%] max-w-5xl p-4",children:[i.jsxs("div",{className:"flex items-center justify-between mb-2",children:[i.jsxs("h3",{className:"text-lg font-bold",children:["Estado de cuenta  ",(ee==null?void 0:ee.name)||""]}),i.jsxs("div",{className:"flex gap-2",children:[i.jsx("button",{className:"px-3 py-1 rounded bg-green-600 text-white hover:bg-green-700",onClick:()=>{_e(0),Ye(new Date().toISOString().slice(0,10)),yt(""),Oe(!0)},children:"Abonar"}),i.jsx("button",{className:"px-3 py-1 rounded bg-gray-200 hover:bg-gray-300",onClick:()=>Y(!1),children:"Cerrar"})]})]}),i.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-3 mb-3",children:[i.jsxs("div",{className:"p-3 border rounded bg-gray-50",children:[i.jsx("div",{className:"text-xs text-gray-600",children:"Saldo actual"}),i.jsx("div",{className:"text-xl font-semibold",children:Bh(We.saldoActual)})]}),i.jsxs("div",{className:"p-3 border rounded bg-gray-50",children:[i.jsx("div",{className:"text-xs text-gray-600",children:"Total abonado"}),i.jsx("div",{className:"text-xl font-semibold",children:Bh(We.totalAbonado)})]}),i.jsxs("div",{className:"p-3 border rounded bg-gray-50",children:[i.jsx("div",{className:"text-xs text-gray-600",children:"Saldo restante"}),i.jsx("div",{className:"text-xl font-semibold",children:Bh(We.saldoActual)})]})]}),i.jsx("div",{className:"bg-white rounded border overflow-x-auto",children:i.jsxs("table",{className:"min-w-full text-sm",children:[i.jsx("thead",{className:"bg-gray-100",children:i.jsxs("tr",{children:[i.jsx("th",{className:"p-2 border",children:"Fecha"}),i.jsx("th",{className:"p-2 border",children:"Tipo"}),i.jsx("th",{className:"p-2 border",children:"Referencia"}),i.jsx("th",{className:"p-2 border",children:"Comentario"}),i.jsx("th",{className:"p-2 border",children:"Monto"}),i.jsx("th",{className:"p-2 border",children:"Acciones"})]})}),i.jsx("tbody",{children:H?i.jsx("tr",{children:i.jsx("td",{colSpan:6,className:"p-4 text-center",children:"Cargando"})}):Ce.length===0?i.jsx("tr",{children:i.jsx("td",{colSpan:6,className:"p-4 text-center",children:"Sin movimientos"})}):Ce.map(Ee=>{var oe,Fe;const we=jt===Ee.id;return i.jsxs("tr",{className:"text-center",children:[i.jsx("td",{className:"p-2 border",children:we?i.jsx("input",{type:"date",className:"w-full border p-1 rounded",value:Ve,onChange:ce=>Te(ce.target.value)}):Ee.date||""}),i.jsx("td",{className:"p-2 border",children:Ee.amount>=0?(oe=Ee.ref)!=null&&oe.saleId?i.jsx("button",{type:"button",className:"px-2 py-0.5 rounded text-xs bg-yellow-100 text-yellow-700 underline",title:"Ver piezas de esta compra",onClick:()=>c(Ee.ref.saleId),children:"COMPRA (CARGO)"}):i.jsx("span",{className:"px-2 py-0.5 rounded text-xs bg-yellow-100 text-yellow-700",children:"COMPRA (CARGO)"}):i.jsx("span",{className:"px-2 py-0.5 rounded text-xs bg-green-100 text-green-700",children:"ABONO"})}),i.jsx("td",{className:"p-2 border",children:(Fe=Ee.ref)!=null&&Fe.saleId?`Venta #${Ee.ref.saleId}`:""}),i.jsx("td",{className:"p-2 border",children:we?i.jsx("input",{className:"w-full border p-1 rounded",value:q,onChange:ce=>se(ce.target.value),placeholder:"Comentario"}):i.jsx("span",{title:Ee.comment||"",children:(Ee.comment||"").length>40?(Ee.comment||"").slice(0,40)+"":Ee.comment||""})}),i.jsx("td",{className:"p-2 border font-semibold",children:we?i.jsx("input",{type:"number",step:"0.01",inputMode:"decimal",className:"w-full border p-1 rounded text-right",value:Number.isNaN(qe)?"":qe,onChange:ce=>{const Me=Number(ce.target.value||0),Ke=Number.isFinite(Me)?Math.max(0,parseFloat(Me.toFixed(2))):0;ge(Ke)},placeholder:"0.00",title:Ee.type==="ABONO"?"Se guardar como negativo":"Se guardar como positivo"}):Bh(Ee.amount)}),i.jsx("td",{className:"p-2 border",children:we?i.jsxs("div",{className:"flex gap-2 justify-center",children:[i.jsx("button",{className:"px-2 py-1 rounded text-white bg-blue-600 hover:bg-blue-700",onClick:Et,children:"Guardar"}),i.jsx("button",{className:"px-2 py-1 rounded bg-gray-200 hover:bg-gray-300",onClick:_t,children:"Cancelar"})]}):i.jsxs("div",{className:"flex gap-2 justify-center",children:[i.jsx("button",{className:"px-2 py-1 rounded text-white bg-yellow-600 hover:bg-yellow-700",onClick:()=>xt(Ee),children:"Editar"}),i.jsx("button",{className:"px-2 py-1 rounded text-white bg-red-600 hover:bg-red-700",onClick:()=>Mt(Ee),children:"Borrar"})]})})]},Ee.id)})})]})})]})}),J&&i.jsx("div",{className:"fixed inset-0 bg-black/50 flex items-center justify-center z-[60]",children:i.jsxs("div",{className:"bg-white rounded-lg shadow-2xl border w-[95%] max-w-md p-4",children:[i.jsxs("h3",{className:"text-lg font-bold",children:["Registrar abono  ",(ee==null?void 0:ee.name)||""]}),i.jsxs("div",{className:"grid grid-cols-1 gap-3",children:[i.jsxs("div",{children:[i.jsx("label",{className:"block text-sm font-semibold",children:"Fecha"}),i.jsx("input",{type:"date",className:"w-full border p-2 rounded",value:Ue,onChange:Ee=>Ye(Ee.target.value)})]}),i.jsxs("div",{children:[i.jsx("label",{className:"block text-sm font-semibold",children:"Monto del abono"}),i.jsx("input",{type:"number",step:"0.01",inputMode:"decimal",className:"w-full border p-2 rounded",value:fe===0?"":fe,onChange:Ee=>{const we=Number(Ee.target.value||0),oe=Number.isFinite(we)?Math.max(0,parseFloat(we.toFixed(2))):0;_e(oe)},placeholder:"0.00"}),i.jsx("div",{className:"text-xs text-gray-500 mt-1",children:"Se guarda con 2 decimales (se registrar como ABONO negativo)."})]}),i.jsxs("div",{children:[i.jsx("label",{className:"block text-sm font-semibold",children:"Comentario (opcional)"}),i.jsx("textarea",{className:"w-full border p-2 rounded resize-y min-h-20",value:At,onChange:Ee=>yt(Ee.target.value),maxLength:250,placeholder:"Ej: Abono en efectivo"}),i.jsxs("div",{className:"text-xs text-gray-500 text-right",children:[At.length,"/250"]})]})]}),i.jsxs("div",{className:"mt-4 flex justify-end gap-2",children:[i.jsx("button",{className:"px-3 py-2 rounded bg-gray-200 hover:bg-gray-300",onClick:()=>Oe(!1),disabled:bt,children:"Cancelar"}),i.jsx("button",{className:"px-3 py-2 rounded bg-green-600 text-white hover:bg-green-700 disabled:opacity-60",onClick:De,disabled:bt,children:bt?"Guardando...":"Guardar abono"})]})]})}),t&&i.jsx("div",{className:"fixed inset-0 bg-black/40 flex items-center justify-center z-[65]",children:i.jsxs("div",{className:"bg-white rounded-lg shadow-xl border w-[95%] max-w-3xl p-4",children:[i.jsxs("div",{className:"flex items-center justify-between mb-2",children:[i.jsxs("h3",{className:"text-lg font-bold",children:["Piezas vendidas"," ",a?` #${a}`:""]}),i.jsx("button",{className:"px-3 py-1 rounded bg-gray-200 hover:bg-gray-300",onClick:()=>e(!1),children:"Cerrar"})]}),i.jsx("div",{className:"bg-white rounded border overflow-x-auto",children:i.jsxs("table",{className:"min-w-full text-sm",children:[i.jsx("thead",{className:"bg-gray-100",children:i.jsxs("tr",{children:[i.jsx("th",{className:"p-2 border",children:"Producto"}),i.jsx("th",{className:"p-2 border text-right",children:"Cantidad"}),i.jsx("th",{className:"p-2 border text-right",children:"Precio"}),i.jsx("th",{className:"p-2 border text-right",children:"Descuento"}),i.jsx("th",{className:"p-2 border text-right",children:"Monto"})]})}),i.jsx("tbody",{children:r?i.jsx("tr",{children:i.jsx("td",{colSpan:5,className:"p-4 text-center",children:"Cargando"})}):o.length===0?i.jsx("tr",{children:i.jsx("td",{colSpan:5,className:"p-4 text-center",children:"Sin tems en esta venta."})}):o.map((Ee,we)=>i.jsxs("tr",{className:"text-center",children:[i.jsx("td",{className:"p-2 border text-left",children:Ee.productName}),i.jsx("td",{className:"p-2 border text-right",children:Ee.qty}),i.jsx("td",{className:"p-2 border text-right",children:Bh(Ee.unitPrice)}),i.jsx("td",{className:"p-2 border text-right",children:Bh(Ee.discount||0)}),i.jsx("td",{className:"p-2 border text-right",children:Bh(Ee.total)})]},we))})]})})]})})]})}const gx=t=>`C$ ${(Number(t)||0).toFixed(2)}`,oLe=["Altagracia","Taguizapa","El paso","Calaysa","Urbaite","Las Pilas"];async function lLe(t){if(!t)return 0;const e=Yt(mt(Se,"inventory_clothes_batches"),cr("productId","==",t)),r=await kt(e);let n="0000-00-00",a=-1,s=0;return r.forEach(o=>{const l=o.data(),c=String(l.date||"0000-00-00"),u=Number(l.salePrice||0),d=l.createdAt,f=((d==null?void 0:d.seconds)??0)*1e3+((d==null?void 0:d.nanoseconds)??0)/1e6;c>n?(n=c,a=f,s=u):c===n&&f>a&&(a=f,s=u)}),Number(s||0)}async function x$(t){if(!t)return 0;const e=Yt(mt(Se,"inventory_clothes_batches"),cr("productId","==",t)),r=await kt(e);let n=0;return r.forEach(a=>n+=Number(a.data().remaining||0)),n}function v$(t){const e="+505 ";if(!t.startsWith(e)){const n=t.replace(/\D/g,"");return e+n.slice(0,8)}const r=t.slice(e.length).replace(/\D/g,"");return e+r.slice(0,8)}function cLe({role:t="",roles:e}={role:""}){const r=e&&e.length?e:t;En(r,"admin"),En(r,"vendedor_ropa");const[n,a]=g.useState([]),[s,o]=g.useState([]),[l,c]=g.useState({}),[u,d]=g.useState("CONTADO"),[f,A]=g.useState(""),[h,m]=g.useState(""),[p,x]=g.useState(new Date().toISOString().slice(0,10)),[v,y]=g.useState(""),[b,w]=g.useState([]),j=g.useMemo(()=>b.reduce((fe,_e)=>fe+(_e.qty||0),0),[b]),I=g.useMemo(()=>{const fe=b.reduce((_e,Ue)=>{const Ye=Math.max(0,(Number(Ue.unitPrice)||0)*(Ue.qty||0)-(Number(Ue.discount)||0));return _e+Ye},0);return Math.floor(fe*100)/100},[b]),[_,S]=g.useState(0),[E,T]=g.useState(""),[k,B]=g.useState(!1),[D,X]=g.useState(!1),[me,pe]=g.useState(""),[he,ve]=g.useState("+505 "),[ae,Pe]=g.useState(""),[ke,O]=g.useState(""),[G,z]=g.useState("ACTIVO"),[U,Y]=g.useState(0),ee=()=>{pe(""),ve("+505 "),Pe(""),O(""),z("ACTIVO"),Y(0)};g.useEffect(()=>{(async()=>{const fe=Yt(mt(Se,"customers_clothes"),In("createdAt","desc")),_e=await kt(fe),Ue=[];_e.forEach(St=>{const Ve=St.data();Ue.push({id:St.id,name:Ve.name??"",phone:Ve.phone??"+505 ",place:Ve.place??"",status:Ve.status??"ACTIVO",creditLimit:Number(Ve.creditLimit??0),balance:0})});for(const St of Ue)try{const Ve=Yt(mt(Se,"ar_movements"),cr("customerId","==",St.id)),Te=await kt(Ve);let qe=0;Te.forEach(ge=>qe+=Number(ge.data().amount||0)),St.balance=qe}catch{St.balance=0}a(Ue);const Ye=Yt(mt(Se,"products_clothes"),In("createdAt","desc")),At=await kt(Ye),yt=[];At.forEach(St=>{const Ve=St.data();yt.push({id:St.id,name:Ve.name??"(sin nombre)",sku:Ve.sku??""})}),o(yt);const bt=Yt(mt(Se,"inventory_clothes_batches"),cr("remaining",">",0)),Nt=await kt(bt),jt={};Nt.forEach(St=>{const Ve=St.data(),Te=Ve.productId||"",qe=Number(Ve.remaining||0);Te&&(jt[Te]=(jt[Te]||0)+qe)}),c(jt)})()},[]);const M=g.useMemo(()=>n.find(fe=>fe.id===f),[n,f]),H=(M==null?void 0:M.balance)||0,te=u==="CREDITO"?H+Math.max(0,Number(I||0))-Math.max(0,Number(_||0)):0,Ce=async fe=>{if(!fe)return;if(b.some(yt=>yt.productId===fe)){y("");return}const _e=s.find(yt=>yt.id===fe);if(!_e){y("");return}let Ue=await lLe(fe);Ue||(Ue=Number((_e==null?void 0:_e.price)||0));const Ye=await x$(fe),At={productId:fe,productName:_e.name||"",sku:_e.sku||"",unitPrice:Number(Ue)||0,available:Number(Ye)||0,qty:0,discount:0};w(yt=>[...yt,At]),y("")},V=(fe,_e)=>{w(Ue=>Ue.map(Ye=>{if(Ye.productId!==fe)return Ye;if(_e==="")return{...Ye,qty:0};const At=Math.max(0,Math.floor(Number(_e)));return{...Ye,qty:At}}))},We=(fe,_e)=>{w(Ue=>Ue.map(Ye=>{if(Ye.productId!==fe)return Ye;if(_e==="")return{...Ye,discount:0};const At=Math.max(0,Math.floor(Number(_e)));return{...Ye,discount:At}}))},ie=fe=>w(_e=>_e.filter(Ue=>Ue.productId!==fe)),J=async()=>{if(!p)return"Selecciona la fecha.";if(b.length===0)return"Agrega al menos un producto.";const fe=b.filter(_e=>(_e.qty||0)>0);if(fe.length===0)return"Debes ingresar cantidades (> 0) en al menos un producto.";if(!(I>0))return"El total debe ser mayor a cero.";if(u==="CONTADO"){if(!h.trim())return"Ingresa el nombre del cliente (contado)."}else{if(!f)return"Selecciona un cliente (crdito).";if(_<0)return"El pago inicial no puede ser negativo.";if(_>I)return"El pago inicial no puede superar el total.";if((M==null?void 0:M.status)==="BLOQUEADO")return"El cliente est BLOQUEADO. No se puede facturar a crdito."}for(const _e of fe){const Ue=await x$(_e.productId);if(_e.qty>Ue)return`Inventario insuficiente para "${_e.productName}". Disponible: ${Ue} unidades.`;const Ye=(Number(_e.unitPrice)||0)*(_e.qty||0),At=Number(_e.discount)||0;if(!Number.isInteger(At)||At<0)return`El descuento en "${_e.productName}" debe ser entero y  0.`;if(At>Ye)return`El descuento en "${_e.productName}" no puede exceder C$ ${Ye.toFixed(2)}.`}return null},Oe=async fe=>{fe.preventDefault(),T("");const _e=await J();if(_e){T(" "+_e);return}try{B(!0);const Ue=b.filter(bt=>(bt.qty||0)>0).map(bt=>{const Nt=(Number(bt.unitPrice)||0)*(bt.qty||0),jt=Math.max(0,Math.floor(Number(bt.discount)||0)),St=Math.max(0,Nt-jt);return{productId:bt.productId,productName:bt.productName,sku:bt.sku||"",qty:bt.qty,unitPrice:Number(bt.unitPrice)||0,discount:jt,total:Math.floor(St*100)/100}}),Ye={type:u,date:p,createdAt:Ar.now(),itemsTotal:Number(I)||0,total:Number(I)||0,quantity:Number(j)||0,items:Ue};u==="CONTADO"?Ye.customerName=h.trim():(Ye.customerId=f,Ye.downPayment=Number(_)||0);const At=await Jn(mt(Se,"sales_clothes"),Ye);if(u==="CREDITO"&&f){const bt={customerId:f,date:p,createdAt:Ar.now(),ref:{saleId:At.id}};await Jn(mt(Se,"ar_movements"),{...bt,type:"CARGO",amount:Number(I)||0}),Number(_)>0&&await Jn(mt(Se,"ar_movements"),{...bt,type:"ABONO",amount:-Number(_)})}const yt={};for(const bt of Ue)if(bt.qty>0){const{allocations:Nt}=await sLe({productId:bt.productId,quantity:bt.qty,saleDate:p,saleId:At.id});yt[bt.productId]={productId:bt.productId,allocations:Nt}}await kn(Gt(Se,"sales_clothes",At.id),{allocationsByItem:yt}),d("CONTADO"),A(""),m(""),x(new Date().toISOString().slice(0,10)),w([]),S(0),u==="CREDITO"&&f&&a(bt=>bt.map(Nt=>Nt.id===f?{...Nt,balance:(Nt.balance||0)+(Number(I)||0)-(Number(_)||0)}:Nt)),T(" Venta registrada"),(async()=>{const bt=Yt(mt(Se,"inventory_clothes_batches"),cr("remaining",">",0)),Nt=await kt(bt),jt={};Nt.forEach(St=>{const Ve=St.data(),Te=Ve.productId||"",qe=Number(Ve.remaining||0);Te&&(jt[Te]=(jt[Te]||0)+qe)}),c(jt)})()}catch(Ue){console.error(Ue),T(" Error al guardar la venta")}finally{B(!1)}};return i.jsxs("div",{className:"max-w-6xl mx-auto",children:[i.jsx("h2",{className:"text-2xl font-bold mb-3",children:"Ventas (Ropa)"}),i.jsxs("form",{onSubmit:Oe,className:"bg-white p-4 rounded shadow border mb-6 grid grid-cols-1 md:grid-cols-2 gap-4",children:[i.jsxs("div",{children:[i.jsx("label",{className:"block text-sm font-semibold",children:"Tipo de cliente"}),i.jsxs("select",{className:"w-full border p-2 rounded",value:u,onChange:fe=>d(fe.target.value),children:[i.jsx("option",{value:"CONTADO",children:"Contado"}),i.jsx("option",{value:"CREDITO",children:"Crdito"})]})]}),u==="CONTADO"?i.jsxs("div",{children:[i.jsx("label",{className:"block text-sm font-semibold",children:"Nombre del cliente (contado)"}),i.jsx("input",{className:"w-full border p-2 rounded",placeholder:"Ej: Cliente Mostrador",value:h,onChange:fe=>m(fe.target.value)})]}):i.jsxs("div",{className:"md:col-span-2",children:[i.jsx("label",{className:"block text-sm font-semibold",children:"Cliente (crdito)"}),i.jsxs("div",{className:"flex gap-2",children:[i.jsxs("select",{className:"flex-1 border p-2 rounded",value:f,onChange:fe=>A(fe.target.value),children:[i.jsx("option",{value:"",children:"Selecciona un cliente"}),n.map(fe=>i.jsxs("option",{value:fe.status==="ACTIVO"?fe.id:"",disabled:fe.status==="BLOQUEADO",children:[fe.name," | ",fe.phone," | Saldo: ",gx(fe.balance||0)]},fe.id))]}),i.jsx("button",{type:"button",className:"px-20 py-2 rounded bg-green-600 text-white hover:bg-green-700",onClick:()=>X(!0),children:"Crear Cliente"})]}),i.jsxs("div",{className:"mt-2 grid grid-cols-1 md:grid-cols-3 gap-3",children:[i.jsxs("div",{className:"p-2 rounded bg-gray-50 border",children:[i.jsx("div",{className:"text-xs text-gray-600",children:"Saldo actual"}),i.jsx("div",{className:"text-lg font-semibold",children:gx(H)})]}),i.jsxs("div",{children:[i.jsx("label",{className:"block text-sm font-semibold",children:"Pago inicial (opcional)"}),i.jsx("input",{type:"number",step:"0.01",inputMode:"decimal",className:"w-full border p-2 rounded",value:_===0?"":_,onChange:fe=>S(Math.max(0,Number(fe.target.value||0))),placeholder:"0.00"})]}),i.jsxs("div",{className:"p-2 rounded bg-gray-50 border",children:[i.jsx("div",{className:"text-xs text-gray-600",children:"Saldo proyectado"}),i.jsx("div",{className:"text-lg font-semibold",children:gx(te)})]})]})]}),i.jsxs("div",{children:[i.jsx("label",{className:"block text-sm font-semibold",children:"Fecha de venta"}),i.jsx("input",{type:"date",className:"w-full border p-2 rounded",value:p,onChange:fe=>x(fe.target.value)})]}),i.jsxs("div",{className:"md:col-span-2",children:[i.jsx("label",{className:"block text-sm font-semibold",children:"Producto"}),i.jsxs("select",{className:"w-full border p-2 rounded",value:v,onChange:async fe=>{const _e=fe.target.value;y(_e),await Ce(_e)},children:[i.jsx("option",{value:"",children:"Selecciona un producto"}),s.map(fe=>{const _e=b.some(At=>At.productId===fe.id),Ue=l[fe.id]||0,Ye=_e||Ue<=0;return i.jsxs("option",{value:Ye?"":fe.id,disabled:Ye,children:[fe.name," ",fe.sku?` ${fe.sku}`:""," ",Ue>0?`(disp: ${Ue})`:"(sin stock)",_e?" (seleccionado)":""]},fe.id)})]}),i.jsx("div",{className:"text-xs text-gray-500 mt-1",children:"Productos sin existencias se muestran en gris y no se pueden seleccionar."})]}),i.jsxs("div",{className:"md:col-span-2",children:[i.jsxs("div",{className:"border rounded overflow-hidden",children:[i.jsxs("div",{className:"grid grid-cols-12 bg-gray-50 px-3 py-2 text-xs font-semibold border-b",children:[i.jsx("div",{className:"col-span-4",children:"Producto"}),i.jsx("div",{className:"col-span-2 text-right",children:"Precio"}),i.jsx("div",{className:"col-span-2 text-right",children:"Existencias"}),i.jsx("div",{className:"col-span-1 text-right",children:"Cantidad"}),i.jsx("div",{className:"col-span-1 text-right",children:"Descuento"}),i.jsx("div",{className:"col-span-1 text-right",children:"Monto"}),i.jsx("div",{className:"col-span-1 text-center",children:"Quitar"})]}),b.length===0?i.jsx("div",{className:"px-3 py-4 text-sm text-gray-500",children:"No hay productos agregados."}):b.map(fe=>{const _e=Math.max(0,(fe.available||0)-(fe.qty||0)),Ue=(Number(fe.unitPrice)||0)*(fe.qty||0),Ye=Math.max(0,Ue-(Number(fe.discount)||0));return i.jsxs("div",{className:"grid grid-cols-12 items-center px-3 py-2 border-b text-sm gap-x-2",children:[i.jsx("div",{className:"col-span-4",children:i.jsxs("div",{className:"font-medium",children:[fe.productName,fe.sku?`  ${fe.sku}`:""]})}),i.jsx("div",{className:"col-span-2 text-right",children:gx(fe.unitPrice)}),i.jsx("div",{className:"col-span-2 text-right",children:_e}),i.jsx("div",{className:"col-span-1",children:i.jsx("input",{type:"number",step:"0",min:0,className:"w-full border p-1 rounded text-right",value:Number.isNaN(fe.qty)||fe.qty===0?"":fe.qty,onChange:At=>V(fe.productId,At.target.value),inputMode:"numeric",placeholder:"0",title:"Cantidad de piezas"})}),i.jsx("div",{className:"col-span-1",children:i.jsx("input",{type:"number",step:"1",min:0,className:"w-full border p-1 rounded text-right",value:Number.isNaN(fe.discount)||fe.discount===0?"":fe.discount,onChange:At=>We(fe.productId,At.target.value),inputMode:"numeric",placeholder:"0",title:"Descuento entero (C$)"})}),i.jsx("div",{className:"col-span-1 text-right",children:gx(Ye)}),i.jsx("div",{className:"col-span-1 text-center",children:i.jsx("button",{type:"button",className:"px-2 py-1 rounded bg-red-100 hover:bg-red-200",onClick:()=>ie(fe.productId),title:"Quitar producto",children:""})})]},fe.productId)})]}),b.length>0&&i.jsxs("div",{className:"flex justify-end gap-6 mt-3 text-sm",children:[i.jsxs("div",{children:[i.jsx("span",{className:"text-gray-600",children:"Piezas totales: "}),i.jsx("span",{className:"font-semibold",children:j})]}),i.jsxs("div",{children:[i.jsx("span",{className:"text-gray-600",children:"Total: "}),i.jsx("span",{className:"font-semibold",children:gx(I)})]})]})]}),i.jsx("div",{className:"md:col-span-2",children:i.jsx("button",{className:"bg-blue-600 text-white px-4 py-2 rounded hover:bg-blue-700 disabled:opacity-60",disabled:k,children:k?"Guardando...":"Registrar venta"})})]}),E&&i.jsx("p",{className:"mt-2 text-sm",children:E}),D&&i.jsx("div",{className:"fixed inset-0 bg-black/40 flex items-center justify-center z-50",children:i.jsxs("div",{className:"bg-white rounded-lg shadow-xl border w-[95%] max-w-xl p-4",children:[i.jsx("h3",{className:"text-lg font-bold mb-3",children:"Nuevo cliente"}),i.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-3",children:[i.jsxs("div",{children:[i.jsx("label",{className:"block text-sm font-semibold",children:"Nombre"}),i.jsx("input",{className:"w-full border p-2 rounded",value:me,onChange:fe=>pe(fe.target.value)})]}),i.jsxs("div",{children:[i.jsx("label",{className:"block text-sm font-semibold",children:"Telfono"}),i.jsx("input",{className:"w-full border p-2 rounded",value:he,onChange:fe=>ve(v$(fe.target.value)),placeholder:"+505 88888888",inputMode:"numeric"})]}),i.jsxs("div",{children:[i.jsx("label",{className:"block text-sm font-semibold",children:"Lugar"}),i.jsxs("select",{className:"w-full border p-2 rounded",value:ae,onChange:fe=>Pe(fe.target.value),children:[i.jsx("option",{value:"",children:""}),oLe.map(fe=>i.jsx("option",{value:fe,children:fe},fe))]})]}),i.jsxs("div",{children:[i.jsx("label",{className:"block text-sm font-semibold",children:"Estado"}),i.jsxs("select",{className:"w-full border p-2 rounded",value:G,onChange:fe=>z(fe.target.value),children:[i.jsx("option",{value:"ACTIVO",children:"ACTIVO"}),i.jsx("option",{value:"BLOQUEADO",children:"BLOQUEADO"})]})]}),i.jsxs("div",{children:[i.jsx("label",{className:"block text-sm font-semibold",children:"Lmite de crdito (opcional)"}),i.jsx("input",{type:"number",step:"0.01",inputMode:"decimal",className:"w-full border p-2 rounded",value:U===0?"":U,onChange:fe=>Y(Math.max(0,Number(fe.target.value||0))),placeholder:"Ej: 2000"})]}),i.jsxs("div",{className:"md:col-span-2",children:[i.jsx("label",{className:"block text-sm font-semibold",children:"Comentario"}),i.jsx("textarea",{className:"w-full border p-2 rounded resize-y min-h-20",value:ke,onChange:fe=>O(fe.target.value),maxLength:500})]})]}),i.jsxs("div",{className:"mt-4 flex justify-end gap-2",children:[i.jsx("button",{className:"px-3 py-2 rounded bg-gray-200 hover:bg-gray-300",onClick:()=>{ee(),X(!1)},children:"Cancelar"}),i.jsx("button",{className:"px-3 py-2 rounded bg-green-600 text-white hover:bg-green-700",onClick:async()=>{if(T(""),!me.trim()){T("Ingresa el nombre del nuevo cliente.");return}const fe=v$(he);try{const _e=await Jn(mt(Se,"customers_clothes"),{name:me.trim(),phone:fe,place:ae||"",notes:ke||"",status:G,creditLimit:Number(U||0),createdAt:Ar.now()}),Ue={id:_e.id,name:me.trim(),phone:fe,place:ae||"",status:G,creditLimit:Number(U||0),balance:0};a(Ye=>[Ue,...Ye]),A(_e.id),ee(),X(!1),T(" Cliente creado")}catch(_e){console.error(_e),T(" Error al crear cliente")}},children:"Guardar cliente"})]})]})}),k&&i.jsx("div",{className:"fixed inset-0 z-[70] bg-black/40 flex items-center justify-center",children:i.jsxs("div",{className:"bg-white rounded-lg shadow-xl border px-4 py-3 flex items-center gap-3",children:[i.jsxs("svg",{className:"h-5 w-5 animate-spin",viewBox:"0 0 24 24",fill:"none",children:[i.jsx("circle",{className:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor",strokeWidth:"4"}),i.jsx("path",{className:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8v4a4 4 0 00-4 4H4z"})]}),i.jsx("span",{className:"font-medium",children:"Guardando venta"})]})})]})}const mo=t=>`C$ ${(Number(t)||0).toFixed(2)}`;function gE(t){var r;const e=t==null?void 0:t.date;return e||((r=t==null?void 0:t.createdAt)!=null&&r.toDate?Rr(t.createdAt.toDate(),"yyyy-MM-dd"):"")}function uLe(t,e){const r=gE(t);if(!r)return null;if(Array.isArray(t.items))return{id:e,date:r,type:t.type||"CONTADO",total:Number(t.total??t.itemsTotal??0),items:t.items.map(o=>({productId:String(o.productId||""),productName:String(o.productName||""),sku:o.sku||"",qty:Number(o.qty||0),unitPrice:Number(o.unitPrice??(Number(o.total||0)/Math.max(1,Number(o.qty||0))||0)),discount:Number(o.discount||0)})),customerId:t.customerId||void 0,customerName:t.customerName||void 0};const n=t.item||{},a=Number(t.quantity??n.qty??0),s=Number(t.total??t.itemsTotal??n.total??0);return{id:e,date:r,type:t.type||"CONTADO",total:Number(t.total??t.itemsTotal??s??0),items:[{productId:String(n.productId||t.productId||""),productName:String(n.productName||t.productName||""),sku:n.sku||t.sku||"",qty:a,unitPrice:Number(n.unitPrice??(s&&a?s/a:0)),discount:Number(n.discount||0)}],customerId:t.customerId||void 0,customerName:t.customerName||void 0}}function dLe(t,e,r,n){const a={};for(const l of t)a[l.productId]||(a[l.productId]={productName:l.productName,lots:[]}),a[l.productId].lots.push({date:l.date,qtyLeft:Number(l.quantity||0),cost:Number(l.purchasePrice||0)});for(const l of Object.keys(a))a[l].lots.sort((c,u)=>c.date.localeCompare(u.date));const s=[...e].sort((l,c)=>l.date.localeCompare(c.date));let o=0;for(const l of s)for(const c of l.items||[]){const u=a[c.productId];if(!u)continue;let d=Number(c.qty||0);if(!(d<=0))for(const f of u.lots){if(d<=0)break;if(f.qtyLeft<=0)continue;const A=Math.min(f.qtyLeft,d);l.date>=r&&l.date<=n&&(o+=A*f.cost),f.qtyLeft-=A,d-=A}}return o}function fLe(){const{refreshKey:t,refresh:e}=Oc(),[r,n]=g.useState(Rr(Ud(new Date),"yyyy-MM-dd")),[a,s]=g.useState(Rr(Ld(new Date),"yyyy-MM-dd")),[o,l]=g.useState([]),[c,u]=g.useState([]),[d,f]=g.useState([]),[A,h]=g.useState([]),[m,p]=g.useState([]),[x,v]=g.useState([]),[y,b]=g.useState(!0),[w,j]=g.useState(""),[I,_]=g.useState(!1),[S,E]=g.useState(null),[T,k]=g.useState([]),[B,D]=g.useState(!1),[X,me]=g.useState({totalBruto:0,totalDescuento:0,totalFiado:0,saldoActual:0,abonadoPeriodo:0});g.useEffect(()=>{(async()=>{b(!0),j("");try{const O=await kt(mt(Se,"sales_clothes")),G=[],z=[];O.forEach(ie=>{const J=ie.data(),Oe=uLe(J,ie.id);Oe&&(Oe.date<=a&&G.push(Oe),Oe.date>=r&&Oe.date<=a&&z.push(Oe))}),u(G),l(z);const U=await kt(mt(Se,"inventory_clothes_batches")),Y=[];U.forEach(ie=>{const J=ie.data(),Oe=gE(J);!Oe||Oe>a||Y.push({id:ie.id,productId:J.productId,productName:J.productName||"",date:Oe,quantity:Number(J.quantity||0),remaining:Number(J.remaining||0),purchasePrice:Number(J.purchasePrice||0)})}),f(Y);const ee=await kt(mt(Se,"expenses_clothes")),M=[];ee.forEach(ie=>{const J=ie.data(),Oe=gE(J);Oe&&Oe>=r&&Oe<=a&&M.push({id:ie.id,date:Oe,category:J.category||"",description:J.description||"",amount:Number(J.amount||0),status:J.status||""})}),h(M);const H=await kt(mt(Se,"ar_movements")),te=[],Ce={};H.forEach(ie=>{const J=ie.data(),Oe=gE(J);if(!Oe)return;const fe=J.customerId,_e=Number(J.amount||0);fe&&(Ce[fe]=(Ce[fe]||0)+_e),J.type==="ABONO"&&Oe>=r&&Oe<=a&&te.push({id:ie.id,customerId:fe,type:"ABONO",amount:_e,date:Oe})}),p(te);const V=await kt(mt(Se,"customers_clothes")),We=[];V.forEach(ie=>{const J=ie.data();We.push({id:ie.id,name:J.name||"",balance:Ce[ie.id]||0})}),v(We)}catch(O){console.error(O),j(" Error cargando datos del dashboard.")}finally{b(!1)}})()},[r,a,t]);const pe=g.useMemo(()=>{try{return dLe(d,c,r,a)}catch(O){return console.error(O),0}},[d,c,r,a]),he=g.useMemo(()=>{const O=o.reduce((Ce,V)=>Ce+(V.total||0),0),G=A.reduce((Ce,V)=>Ce+(V.amount||0),0),z=O-pe,U=z-G,Y=m.reduce((Ce,V)=>Ce+Math.abs(V.amount||0),0),ee=x.filter(Ce=>(Ce.balance||0)>0),M=ee.reduce((Ce,V)=>Ce+(V.balance||0),0);let H=0,te=0;for(const Ce of o){const V=(Ce.items||[]).reduce((We,ie)=>We+(Number(ie.qty)||0),0);Ce.type==="CONTADO"?H+=V:te+=V}return{ventasTotales:O,costoMercaderia:pe,gastosPeriodo:G,gananciaAntes:z,gananciaDespues:U,abonosRecibidos:Y,saldosPendientes:M,clientesConSaldo:ee.length,prendasCash:H,prendasCredito:te}},[o,A,m,x,pe]),ve=g.useMemo(()=>{const O={};for(const G of o){if(G.type!=="CREDITO"||!G.customerId)continue;const z=(G.items||[]).reduce((U,Y)=>U+(Number(Y.qty)||0),0);O[G.customerId]=(O[G.customerId]||0)+z}return x.filter(G=>(G.balance||0)>0).map(G=>({customerId:G.id,name:G.name,prendasCredito:O[G.id]||0,saldo:G.balance||0})).sort((G,z)=>z.saldo-G.saldo)},[x,o]),ae=g.useMemo(()=>{const O={};return x.forEach(G=>O[G.id]=G.name),O},[x]),Pe=g.useMemo(()=>[...o].sort((O,G)=>G.date.localeCompare(O.date)).map(O=>{var U;const G=(O.items||[]).reduce((Y,ee)=>Y+(Number(ee.qty)||0),0);let z="Cash";return O.type==="CREDITO"&&O.customerId?z=ae[O.customerId]||"":O.type==="CONTADO"&&(z=((U=O.customerName)==null?void 0:U.trim())||"Cash"),{id:O.id,date:O.date,type:O.type==="CREDITO"?"Crdito":"Cash",customer:z,piezas:G,total:Number(O.total||0)}}),[o,ae]),ke=async O=>{_(!0),E({id:O.customerId,name:O.name}),k([]),D(!0),me({totalBruto:0,totalDescuento:0,totalFiado:0,saldoActual:0,abonadoPeriodo:0});try{const G=[];let z=0,U=0,Y=0;for(const te of o)if(!(te.type!=="CREDITO"||te.customerId!==O.customerId))for(const Ce of te.items||[]){const V=Number(Ce.qty||0),We=Number(Ce.unitPrice||0),ie=V*We,J=Math.max(0,Number(Ce.discount||0)),Oe=Math.max(0,ie-J);G.push({saleId:te.id,date:te.date,productName:Ce.productName,sku:Ce.sku||"",qty:V,unitPrice:We,lineTotal:ie,discount:J,lineFinal:Oe}),z+=ie,U+=J,Y+=Oe}let ee=0;for(const te of m)te.customerId===O.customerId&&(ee+=Math.abs(te.amount||0));const M=x.find(te=>te.id===O.customerId),H=(M==null?void 0:M.balance)||0;k(G),me({totalBruto:z,totalDescuento:U,totalFiado:Y,saldoActual:H,abonadoPeriodo:ee})}catch(G){console.error(G),j(" No se pudo cargar el detalle del cliente.")}finally{D(!1)}};return i.jsxs("div",{className:"max-w-6xl mx-auto",children:[i.jsxs("div",{className:"flex items-center justify-between mb-3",children:[i.jsx("h2",{className:"text-2xl font-bold",children:"Finanzas (Ropa)"}),i.jsx(Fc,{onClick:e,loading:y})]}),i.jsxs("div",{className:"bg-white p-3 rounded shadow border mb-4 flex flex-wrap items-end gap-3 text-sm",children:[i.jsxs("div",{className:"flex flex-col",children:[i.jsx("label",{className:"font-semibold",children:"Desde"}),i.jsx("input",{type:"date",className:"border rounded px-2 py-1",value:r,onChange:O=>n(O.target.value)})]}),i.jsxs("div",{className:"flex flex-col",children:[i.jsx("label",{className:"font-semibold",children:"Hasta"}),i.jsx("input",{type:"date",className:"border rounded px-2 py-1",value:a,onChange:O=>s(O.target.value)})]})]}),i.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 xl:grid-cols-4 gap-3 mb-4",children:[i.jsxs("div",{className:"p-3 border rounded bg-gray-50",children:[i.jsx("div",{className:"text-xs text-gray-600",children:"Ventas Totales"}),i.jsx("div",{className:"text-xl font-semibold",children:mo(he.ventasTotales)}),i.jsx("div",{className:"text-[11px] text-gray-500 mt-1",children:"Cash + Crdito del periodo."})]}),i.jsxs("div",{className:"p-3 border rounded bg-gray-50",children:[i.jsx("div",{className:"text-xs text-gray-600",children:"Costo de Mercadera (FIFO)"}),i.jsx("div",{className:"text-xl font-semibold",children:mo(he.costoMercaderia)})]}),i.jsxs("div",{className:"p-3 border rounded bg-gray-50",children:[i.jsx("div",{className:"text-xs text-gray-600",children:"Ganancia antes de Gastos"}),i.jsx("div",{className:"text-xl font-semibold text-green-600",children:mo(he.gananciaAntes)})]}),i.jsxs("div",{className:"p-3 border rounded bg-gray-50",children:[i.jsx("div",{className:"text-xs text-gray-600",children:"Gastos del Negocio"}),i.jsx("div",{className:"text-xl font-semibold",children:mo(he.gastosPeriodo)})]}),i.jsxs("div",{className:"p-3 border rounded bg-gray-50",children:[i.jsx("div",{className:"text-xs text-gray-600",children:"Ganancia despus de Gastos"}),i.jsx("div",{className:"text-xl font-semibold text-green-600",children:mo(he.gananciaDespues)})]}),i.jsxs("div",{className:"p-3 border rounded bg-gray-50",children:[i.jsx("div",{className:"text-xs text-gray-600",children:"Abonos Recibidos"}),i.jsx("div",{className:"text-xl font-semibold",children:mo(he.abonosRecibidos)})]}),i.jsxs("div",{className:"p-3 border rounded bg-gray-50",children:[i.jsx("div",{className:"text-xs text-gray-600",children:"Saldos Pendientes"}),i.jsx("div",{className:"text-xl font-semibold",children:mo(he.saldosPendientes)}),i.jsx("div",{className:"text-[11px] text-gray-500 mt-1",children:"A la fecha."})]}),i.jsxs("div",{className:"p-3 border rounded bg-gray-50",children:[i.jsx("div",{className:"text-xs text-gray-600",children:"Clientes con Saldo"}),i.jsx("div",{className:"text-xl font-semibold",children:he.clientesConSaldo})]}),i.jsxs("div",{className:"p-3 border rounded bg-gray-50",children:[i.jsx("div",{className:"text-xs text-gray-600",children:"Prendas Cash"}),i.jsx("div",{className:"text-xl font-semibold",children:he.prendasCash})]}),i.jsxs("div",{className:"p-3 border rounded bg-gray-50",children:[i.jsx("div",{className:"text-xs text-gray-600",children:"Prendas Crdito (vendidas)"}),i.jsx("div",{className:"text-xl font-semibold",children:he.prendasCredito})]})]}),i.jsx("h3",{className:"text-lg font-semibold mb-2",children:"Consolidado por cliente"}),i.jsx("div",{className:"bg-white p-2 rounded shadow border w-full mb-6",children:i.jsxs("table",{className:"min-w-full w-full text-sm",children:[i.jsx("thead",{className:"bg-gray-100",children:i.jsxs("tr",{children:[i.jsx("th",{className:"p-2 border",children:"Cliente"}),i.jsx("th",{className:"p-2 border",children:"Prendas Crdito (periodo)"}),i.jsx("th",{className:"p-2 border",children:"Saldo actual"})]})}),i.jsx("tbody",{children:y?i.jsx("tr",{children:i.jsx("td",{className:"p-4 text-center",colSpan:3,children:"Cargando"})}):ve.length===0?i.jsx("tr",{children:i.jsx("td",{className:"p-4 text-center",colSpan:3,children:"Sin clientes con saldo"})}):ve.map(O=>i.jsxs("tr",{className:"text-center",children:[i.jsx("td",{className:"p-2 border",children:O.name}),i.jsx("td",{className:"p-2 border",children:i.jsx("button",{className:"underline text-blue-600 hover:text-blue-800",onClick:()=>ke({customerId:O.customerId,name:O.name}),title:"Ver piezas fiadas del periodo",children:O.prendasCredito})}),i.jsx("td",{className:"p-2 border font-semibold",children:mo(O.saldo)})]},O.customerId))})]})}),i.jsx("h3",{className:"text-lg font-semibold mb-2",children:"Transacciones del periodo"}),i.jsx("div",{className:"bg-white p-2 rounded shadow border w-full mb-6",children:i.jsxs("table",{className:"min-w-full w-full text-sm",children:[i.jsx("thead",{className:"bg-gray-100",children:i.jsxs("tr",{children:[i.jsx("th",{className:"p-2 border",children:"Fecha"}),i.jsx("th",{className:"p-2 border",children:"Cliente"}),i.jsx("th",{className:"p-2 border",children:"Tipo"}),i.jsx("th",{className:"p-2 border",children:"Piezas"}),i.jsx("th",{className:"p-2 border",children:"Monto"})]})}),i.jsx("tbody",{children:y?i.jsx("tr",{children:i.jsx("td",{className:"p-4 text-center",colSpan:5,children:"Cargando"})}):Pe.length===0?i.jsx("tr",{children:i.jsx("td",{className:"p-4 text-center",colSpan:5,children:"Sin transacciones en el rango seleccionado."})}):Pe.map(O=>i.jsxs("tr",{className:"text-center",children:[i.jsx("td",{className:"p-2 border",children:O.date}),i.jsx("td",{className:"p-2 border",children:O.customer}),i.jsx("td",{className:"p-2 border",children:O.type}),i.jsx("td",{className:"p-2 border",children:O.piezas}),i.jsx("td",{className:"p-2 border",children:mo(O.total)})]},O.id))})]})}),i.jsx("h3",{className:"text-lg font-semibold mb-2",children:"Gastos del periodo"}),i.jsx("div",{className:"bg-white p-2 rounded shadow border w-full",children:i.jsxs("table",{className:"min-w-full w-full text-sm",children:[i.jsx("thead",{className:"bg-gray-100",children:i.jsxs("tr",{children:[i.jsx("th",{className:"p-2 border",children:"Fecha"}),i.jsx("th",{className:"p-2 border",children:"Categora"}),i.jsx("th",{className:"p-2 border",children:"Descripcin"}),i.jsx("th",{className:"p-2 border",children:"Monto"}),i.jsx("th",{className:"p-2 border",children:"Estado"})]})}),i.jsx("tbody",{children:y?i.jsx("tr",{children:i.jsx("td",{className:"p-4 text-center",colSpan:5,children:"Cargando"})}):A.length===0?i.jsx("tr",{children:i.jsx("td",{className:"p-4 text-center",colSpan:5,children:"Sin gastos en el rango seleccionado."})}):A.sort((O,G)=>O.date.localeCompare(G.date)).map(O=>i.jsxs("tr",{className:"text-center",children:[i.jsx("td",{className:"p-2 border",children:O.date}),i.jsx("td",{className:"p-2 border",children:O.category||""}),i.jsx("td",{className:"p-2 border",children:O.description?i.jsx("span",{title:O.description,children:O.description.length>40?O.description.slice(0,40)+"":O.description}):""}),i.jsx("td",{className:"p-2 border",children:mo(O.amount)}),i.jsx("td",{className:"p-2 border",children:O.status||""})]},O.id))})]})}),w&&i.jsx("p",{className:"mt-2 text-sm",children:w}),I&&i.jsx("div",{className:"fixed inset-0 bg-black/40 flex items-center justify-center z-50",children:i.jsxs("div",{className:"bg-white rounded-lg shadow-xl border w-[95%] max-w-5xl p-4",children:[i.jsxs("div",{className:"flex items-center justify-between mb-2",children:[i.jsxs("h3",{className:"text-lg font-bold",children:["Detalle del cliente  ",(S==null?void 0:S.name)||""]}),i.jsx("button",{className:"px-3 py-1 rounded bg-gray-200 hover:bg-gray-300",onClick:()=>_(!1),children:"Cerrar"})]}),i.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 xl:grid-cols-5 gap-3 mb-3",children:[i.jsxs("div",{className:"p-3 border rounded bg-gray-50",children:[i.jsx("div",{className:"text-xs text-gray-600",children:"Total Bruto (periodo)"}),i.jsx("div",{className:"text-xl font-semibold",children:mo(X.totalBruto)})]}),i.jsxs("div",{className:"p-3 border rounded bg-gray-50",children:[i.jsx("div",{className:"text-xs text-gray-600",children:"Descuento (periodo)"}),i.jsx("div",{className:"text-xl font-semibold",children:mo(X.totalDescuento)})]}),i.jsxs("div",{className:"p-3 border rounded bg-gray-50",children:[i.jsx("div",{className:"text-xs text-gray-600",children:"Monto Total Fiado (periodo)"}),i.jsx("div",{className:"text-xl font-semibold",children:mo(X.totalFiado)})]}),i.jsxs("div",{className:"p-3 border rounded bg-gray-50",children:[i.jsx("div",{className:"text-xs text-gray-600",children:"Saldo actual"}),i.jsx("div",{className:"text-xl font-semibold",children:mo(X.saldoActual)})]}),i.jsxs("div",{className:"p-3 border rounded bg-gray-50",children:[i.jsx("div",{className:"text-xs text-gray-600",children:"Abonado (periodo)"}),i.jsx("div",{className:"text-xl font-semibold",children:mo(X.abonadoPeriodo)})]})]}),i.jsx("div",{className:"bg-white rounded border overflow-x-auto",children:i.jsxs("table",{className:"min-w-full text-sm",children:[i.jsx("thead",{className:"bg-gray-100",children:i.jsxs("tr",{children:[i.jsx("th",{className:"p-2 border",children:"Fecha compra"}),i.jsx("th",{className:"p-2 border",children:"Pieza"}),i.jsx("th",{className:"p-2 border",children:"SKU"}),i.jsx("th",{className:"p-2 border",children:"Cant."}),i.jsx("th",{className:"p-2 border",children:"P. Unit"}),i.jsx("th",{className:"p-2 border",children:"Monto"})," ",i.jsx("th",{className:"p-2 border",children:"Descuento"})," ",i.jsx("th",{className:"p-2 border",children:"Monto final"})," "]})}),i.jsx("tbody",{children:B?i.jsx("tr",{children:i.jsx("td",{colSpan:8,className:"p-4 text-center",children:"Cargando"})}):T.length===0?i.jsx("tr",{children:i.jsx("td",{colSpan:8,className:"p-4 text-center",children:"Sin piezas fiadas en el periodo."})}):T.sort((O,G)=>O.date.localeCompare(G.date)).map((O,G)=>i.jsxs("tr",{className:"text-center",children:[i.jsx("td",{className:"p-2 border",children:O.date}),i.jsx("td",{className:"p-2 border",children:O.productName}),i.jsx("td",{className:"p-2 border",children:O.sku||""}),i.jsx("td",{className:"p-2 border",children:O.qty}),i.jsx("td",{className:"p-2 border",children:mo(O.unitPrice)}),i.jsx("td",{className:"p-2 border",children:mo(O.lineTotal)}),i.jsx("td",{className:"p-2 border",children:mo(O.discount)}),i.jsx("td",{className:"p-2 border",children:mo(O.lineFinal)})]},`${O.saleId}-${G}`))})]})})]})})]})}const y$=["Energia","Bolsas","Detergentes","Limpieza de Freezer","Delivery","Pago a Personal"],a_=t=>`C$ ${(Number(t)||0).toFixed(2)}`;function hLe(){const[t,e]=g.useState(Rr(Ud(new Date),"yyyy-MM-dd")),[r,n]=g.useState(Rr(Ld(new Date),"yyyy-MM-dd")),[a,s]=g.useState(Rr(new Date,"yyyy-MM-dd")),[o,l]=g.useState(""),[c,u]=g.useState(""),[d,f]=g.useState(0),[A,h]=g.useState("PENDIENTE"),[m,p]=g.useState(""),[x,v]=g.useState([]),[y,b]=g.useState(!0),[w,j]=g.useState(""),[I,_]=g.useState(null),[S,E]=g.useState(""),[T,k]=g.useState(""),[B,D]=g.useState(""),[X,me]=g.useState(0),[pe,he]=g.useState("PENDIENTE"),[ve,ae]=g.useState("");g.useEffect(()=>{(async()=>{b(!0);try{const M=Yt(mt(Se,"expenses_clothes"),In("date","desc")),H=await kt(M),te=[];H.forEach(Ce=>{const V=Ce.data();te.push({id:Ce.id,date:V.date||Rr(new Date,"yyyy-MM-dd"),category:V.category||"",description:V.description||"",amount:Number(V.amount||0),status:V.status||"PENDIENTE",notes:V.notes||"",createdAt:V.createdAt??Ar.now()})}),v(te)}catch(M){console.error(M),j(" Error al cargar gastos")}finally{b(!1)}})()},[]);const Pe=g.useMemo(()=>x.filter(M=>!(t&&M.date<t||r&&M.date>r)),[x,t,r]),ke=g.useMemo(()=>{const M=Pe.reduce((Ce,V)=>Ce+(V.amount||0),0),H=Pe.filter(Ce=>Ce.status==="PAGADO").reduce((Ce,V)=>Ce+(V.amount||0),0),te=M-H;return{total:M,pagado:H,pendiente:te}},[Pe]),O=()=>{s(Rr(new Date,"yyyy-MM-dd")),l(""),u(""),f(0),h("PENDIENTE"),p("")},G=async M=>{if(M.preventDefault(),j(""),!o){j("Selecciona una categora.");return}if(!c.trim()){j("Ingresa una descripcin.");return}if(!d||d<=0){j("Ingresa un monto vlido.");return}try{const H=await Jn(mt(Se,"expenses_clothes"),{date:a,category:o,description:c.trim(),amount:Number(d.toFixed(2)),status:A,notes:m||"",createdAt:Ar.now()});v(te=>[{id:H.id,date:a,category:o,description:c.trim(),amount:Number(d.toFixed(2)),status:A,notes:m||"",createdAt:Ar.now()},...te]),O(),j(" Gasto registrado")}catch(H){console.error(H),j(" Error al guardar gasto")}},z=M=>{_(M.id),E(M.date),k(M.category||""),D(M.description||""),me(Number(M.amount||0)),he(M.status||"PENDIENTE"),ae(M.notes||"")},U=()=>{_(null),E(""),k(""),D(""),me(0),he("PENDIENTE"),ae("")},Y=async()=>{if(I){if(!T){j("Selecciona una categora.");return}if(!B.trim()){j("Ingresa una descripcin.");return}if(!X||X<=0){j("Ingresa un monto vlido.");return}try{await kn(Gt(Se,"expenses_clothes",I),{date:S,category:T,description:B.trim(),amount:Number(X.toFixed(2)),status:pe,notes:ve||""}),v(M=>M.map(H=>H.id===I?{...H,date:S,category:T,description:B.trim(),amount:Number(X.toFixed(2)),status:pe,notes:ve||""}:H)),U(),j(" Gasto actualizado")}catch(M){console.error(M),j(" Error al actualizar gasto")}}},ee=async M=>{confirm(`Eliminar el gasto "${M.description}"?`)&&(await Kn(Gt(Se,"expenses_clothes",M.id)),v(te=>te.filter(Ce=>Ce.id!==M.id)),j(" Gasto borrado"))};return i.jsxs("div",{className:"max-w-6xl mx-auto",children:[i.jsx("h2",{className:"text-2xl font-bold mb-3",children:"Gastos (Ropa)"}),i.jsxs("div",{className:"bg-white p-3 rounded shadow border mb-4 flex flex-wrap items-end gap-3 text-sm",children:[i.jsxs("div",{className:"flex flex-col",children:[i.jsx("label",{className:"font-semibold",children:"Desde"}),i.jsx("input",{type:"date",className:"border rounded px-2 py-1",value:t,onChange:M=>e(M.target.value)})]}),i.jsxs("div",{className:"flex flex-col",children:[i.jsx("label",{className:"font-semibold",children:"Hasta"}),i.jsx("input",{type:"date",className:"border rounded px-2 py-1",value:r,onChange:M=>n(M.target.value)})]}),i.jsxs("div",{className:"ml-auto text-sm",children:[i.jsx("div",{className:"font-semibold",children:"Totales del rango"}),i.jsxs("div",{children:["Total: ",a_(ke.total)]}),i.jsxs("div",{children:["Pagado: ",a_(ke.pagado)]}),i.jsxs("div",{children:["Pendiente: ",a_(ke.pendiente)]})]})]}),i.jsxs("form",{onSubmit:G,className:"bg-white p-4 rounded shadow border mb-6 grid grid-cols-1 md:grid-cols-2 gap-4",children:[i.jsxs("div",{children:[i.jsx("label",{className:"block text-sm font-semibold",children:"Fecha"}),i.jsx("input",{type:"date",className:"w-full border p-2 rounded",value:a,onChange:M=>s(M.target.value)})]}),i.jsxs("div",{children:[i.jsx("label",{className:"block text-sm font-semibold",children:"Categora"}),i.jsxs("select",{className:"w-full border p-2 rounded",value:o,onChange:M=>l(M.target.value),children:[i.jsx("option",{value:"",children:"Selecciona"}),y$.map(M=>i.jsx("option",{value:M,children:M},M))]})]}),i.jsxs("div",{className:"md:col-span-2",children:[i.jsx("label",{className:"block text-sm font-semibold",children:"Descripcin"}),i.jsx("input",{className:"w-full border p-2 rounded",placeholder:"Detalle del gasto",value:c,onChange:M=>u(M.target.value)})]}),i.jsxs("div",{children:[i.jsx("label",{className:"block text-sm font-semibold",children:"Monto"}),i.jsx("input",{type:"number",step:"0.01",inputMode:"decimal",className:"w-full border p-2 rounded text-right",value:d===0?"":d,onChange:M=>f(Math.max(0,Number(M.target.value||0))),placeholder:"0.00"})]}),i.jsxs("div",{children:[i.jsx("label",{className:"block text-sm font-semibold",children:"Estado"}),i.jsxs("select",{className:"w-full border p-2 rounded",value:A,onChange:M=>h(M.target.value),children:[i.jsx("option",{value:"PENDIENTE",children:"Pendiente"}),i.jsx("option",{value:"PAGADO",children:"Pagado"})]})]}),i.jsxs("div",{className:"md:col-span-2",children:[i.jsx("label",{className:"block text-sm font-semibold",children:"Comentario"}),i.jsx("textarea",{className:"w-full border p-2 rounded resize-y min-h-24",value:m,onChange:M=>p(M.target.value),maxLength:500,placeholder:"Comentario / nota opcional"}),i.jsxs("div",{className:"text-xs text-gray-500 text-right",children:[m.length,"/500"]})]}),i.jsx("div",{className:"md:col-span-2",children:i.jsx("button",{className:"bg-blue-600 text-white px-4 py-2 rounded hover:bg-blue-700",children:"Guardar gasto"})})]}),i.jsx("div",{className:"bg-white p-2 rounded shadow border w-full",children:i.jsxs("table",{className:"min-w-full w-full text-sm",children:[i.jsx("thead",{className:"bg-gray-100",children:i.jsxs("tr",{children:[i.jsx("th",{className:"p-2 border",children:"Fecha"}),i.jsx("th",{className:"p-2 border",children:"Categora"}),i.jsx("th",{className:"p-2 border",children:"Descripcin"}),i.jsx("th",{className:"p-2 border",children:"Monto"}),i.jsx("th",{className:"p-2 border",children:"Estado"}),i.jsx("th",{className:"p-2 border",children:"Comentario"}),i.jsx("th",{className:"p-2 border",children:"Acciones"})]})}),i.jsx("tbody",{children:y?i.jsx("tr",{children:i.jsx("td",{className:"p-4 text-center",colSpan:7,children:"Cargando"})}):Pe.length===0?i.jsx("tr",{children:i.jsx("td",{className:"p-4 text-center",colSpan:7,children:"Sin gastos en el rango seleccionado."})}):Pe.slice().sort((M,H)=>M.date.localeCompare(H.date)).map(M=>{const H=I===M.id;return i.jsxs("tr",{className:"text-center",children:[i.jsx("td",{className:"p-2 border",children:H?i.jsx("input",{type:"date",className:"w-full border p-1 rounded",value:S,onChange:te=>E(te.target.value)}):M.date}),i.jsx("td",{className:"p-2 border",children:H?i.jsxs("select",{className:"w-full border p-1 rounded",value:T,onChange:te=>k(te.target.value),children:[i.jsx("option",{value:"",children:"Selecciona"}),y$.map(te=>i.jsx("option",{value:te,children:te},te))]}):M.category||""}),i.jsx("td",{className:"p-2 border",children:H?i.jsx("input",{className:"w-full border p-1 rounded",value:B,onChange:te=>D(te.target.value)}):i.jsx("span",{title:M.description,children:M.description.length>40?M.description.slice(0,40)+"":M.description})}),i.jsx("td",{className:"p-2 border",children:H?i.jsx("input",{type:"number",step:"0.01",inputMode:"decimal",className:"w-full border p-1 rounded text-right",value:Number.isNaN(X)?"":X,onChange:te=>me(Math.max(0,Number(te.target.value||0)))}):a_(M.amount)}),i.jsx("td",{className:"p-2 border",children:H?i.jsxs("select",{className:"w-full border p-1 rounded",value:pe,onChange:te=>he(te.target.value),children:[i.jsx("option",{value:"PENDIENTE",children:"Pendiente"}),i.jsx("option",{value:"PAGADO",children:"Pagado"})]}):i.jsx("span",{className:`px-2 py-0.5 rounded text-xs ${M.status==="PAGADO"?"bg-green-100 text-green-700":"bg-yellow-100 text-yellow-700"}`,children:M.status})}),i.jsx("td",{className:"p-2 border",children:H?i.jsx("textarea",{className:"w-full border p-1 rounded resize-y min-h-10",value:ve,onChange:te=>ae(te.target.value),maxLength:500}):i.jsx("span",{title:M.notes||"",children:(M.notes||"").length>40?(M.notes||"").slice(0,40)+"":M.notes||""})}),i.jsx("td",{className:"p-2 border",children:i.jsx("div",{className:"flex gap-2 justify-center",children:H?i.jsxs(i.Fragment,{children:[i.jsx("button",{className:"px-2 py-1 rounded text-white bg-blue-600 hover:bg-blue-700",onClick:Y,children:"Guardar"}),i.jsx("button",{className:"px-2 py-1 rounded bg-gray-200 hover:bg-gray-300",onClick:U,children:"Cancelar"})]}):i.jsxs(i.Fragment,{children:[i.jsx("button",{className:"px-2 py-1 rounded text-white bg-yellow-600 hover:bg-yellow-700",onClick:()=>z(M),children:"Editar"}),i.jsx("button",{className:"px-2 py-1 rounded text-white bg-red-600 hover:bg-red-700",onClick:()=>ee(M),children:"Borrar"})]})})})]},M.id)})})]})}),w&&i.jsx("p",{className:"mt-2 text-sm",children:w})]})}const Yd=t=>`C$ ${(Number(t)||0).toFixed(2)}`;function ALe(t){var e;return t!=null&&t.date?t.date:(e=t==null?void 0:t.createdAt)!=null&&e.toDate?Rr(t.createdAt.toDate(),"yyyy-MM-dd"):""}function mLe(t,e){const r=ALe(t);if(!r)return null;const n=t.item||{},a=Number((n==null?void 0:n.qty)??t.quantity??0)||0,s=Number((n==null?void 0:n.total)??t.total??0)||0,o=Number((n==null?void 0:n.unitPrice)??(a>0?s/a:0))||0;return{id:e,date:r,type:t.type||"CONTADO",total:Number(t.total||0),quantity:Number(t.quantity||a||0),customerId:t.customerId||void 0,customerName:t.customerName||void 0,downPayment:Number(t.downPayment||0),item:{productId:String((n==null?void 0:n.productId)||t.productId||""),productName:String((n==null?void 0:n.productName)||t.productName||""),sku:(n==null?void 0:n.sku)||t.sku||"",qty:a,unitPrice:o,total:a*o}}}async function pLe(t,e){if(e<=0)return;const r=Yt(mt(Se,"inventory_clothes_batches"),cr("productId","==",t)),n=await kt(r),a=[];n.forEach(o=>{const l=o.data();a.push({id:o.id,productId:l.productId,date:l.date||"",quantity:Number(l.quantity||0),remaining:Number(l.remaining||0)})}),a.sort((o,l)=>o.date.localeCompare(l.date));let s=e;for(const o of a){if(s<=0)break;if(o.remaining<=0)continue;const l=Math.min(o.remaining,s);s-=l,await kn(Gt(Se,"inventory_clothes_batches",o.id),{remaining:Math.max(0,Number((o.remaining-l).toFixed(0)))})}s>0&&console.warn("consumeFIFO: falt inventario",s)}async function gLe(t,e){if(e<=0)return;const r=Yt(mt(Se,"inventory_clothes_batches"),cr("productId","==",t)),n=await kt(r),a=[];n.forEach(o=>{const l=o.data();a.push({id:o.id,productId:l.productId,date:l.date||"",quantity:Number(l.quantity||0),remaining:Number(l.remaining||0)})}),a.sort((o,l)=>o.date.localeCompare(l.date));let s=e;for(const o of a){if(s<=0)break;const l=Math.max(0,o.quantity-o.remaining);if(l<=0)continue;const c=Math.min(l,s);s-=c,await kn(Gt(Se,"inventory_clothes_batches",o.id),{remaining:Number((o.remaining+c).toFixed(0))})}s>0&&console.warn("restoreFIFO: no se devolvi todo",s)}async function mse(t){const e=Yt(mt(Se,"ar_movements"),cr("ref.saleId","==",t)),r=await kt(e);await Promise.all(r.docs.map(n=>Kn(Gt(Se,"ar_movements",n.id))))}async function xLe(t,e,r){if(await mse(t.id),t.type!=="CREDITO"||!t.customerId)return;const n={customerId:t.customerId,date:t.date,createdAt:Ar.now(),ref:{saleId:t.id}},{addDoc:a}=await sA(async()=>{const{addDoc:o}=await Promise.resolve().then(()=>zye);return{addDoc:o}},void 0);await a(mt(Se,"ar_movements"),{...n,type:"CARGO",amount:Number(e)||0});const s=Math.max(0,Number(r??t.downPayment??0));s>0&&await a(mt(Se,"ar_movements"),{...n,type:"ABONO",amount:-s})}function vLe(){const[t,e]=g.useState(!1),[r,n]=g.useState(!1),[a,s]=g.useState(null),[o,l]=g.useState([]),c=async ie=>{e(!0),n(!0),s(ie),l([]);try{const Oe=(await kt(Yt(mt(Se,"sales_clothes"),cr("__name__","==",ie)))).docs[0],fe=Oe==null?void 0:Oe.data(),Ue=(Array.isArray(fe==null?void 0:fe.items)?fe.items:fe!=null&&fe.item?[fe.item]:[]).map(Ye=>({productName:String(Ye.productName||""),qty:Number(Ye.qty||0),unitPrice:Number(Ye.unitPrice||0),discount:Number(Ye.discount||0),total:Number(Ye.total||0)}));l(Ue)}catch(J){console.error(J)}finally{n(!1)}},[u,d]=g.useState(Rr(new Date,"yyyy-MM-01")),[f,A]=g.useState(Rr(new Date,"yyyy-MM-dd")),[h,m]=g.useState([]),[p,x]=g.useState([]),[v,y]=g.useState(!0),[b,w]=g.useState(""),[j,I]=g.useState(""),[_,S]=g.useState(""),[E,T]=g.useState(null),[k,B]=g.useState(!1),[D,X]=g.useState(null),[me,pe]=g.useState(0),he=15,[ve,ae]=g.useState(1),Pe=g.useMemo(()=>{const ie={};return h.forEach(J=>ie[J.id]=J.name),ie},[h]);g.useEffect(()=>{(async()=>{y(!0),w("");try{const ie=await kt(mt(Se,"customers_clothes")),J=[];ie.forEach(_e=>J.push({id:_e.id,name:_e.data().name||""})),m(J);const Oe=await kt(Yt(mt(Se,"sales_clothes"),In("createdAt","desc"))),fe=[];Oe.forEach(_e=>{const Ue=mLe(_e.data(),_e.id);Ue&&Ue.date>=u&&Ue.date<=f&&fe.push(Ue)}),x(fe.sort((_e,Ue)=>Ue.date.localeCompare(_e.date))),ae(1)}catch(ie){console.error(ie),w(" Error cargando transacciones.")}finally{y(!1)}})()},[u,f]);const ke=g.useMemo(()=>p.filter(ie=>!(j&&ie.customerId!==j||_&&ie.type!==_)),[p,j,_]),O=g.useMemo(()=>{let ie=0,J=0,Oe=0,fe=0;for(const _e of ke)_e.type==="CONTADO"?(ie+=_e.item.qty,Oe+=_e.total):(J+=_e.item.qty,fe+=_e.total);return{piezasCash:ie,piezasCredito:J,montoCash:Oe,montoCredito:fe}},[ke]),G=Math.max(1,Math.ceil(ke.length/he)),z=g.useMemo(()=>{const ie=(ve-1)*he;return ke.slice(ie,ie+he)},[ke,ve]),U=ie=>{T(null),X(ie),pe(ie.item.qty||0),B(!0)},Y=async ie=>{if(T(null),!!window.confirm("Eliminar esta venta? Esta accin no se puede deshacer."))try{y(!0),await sF(ie.id),await mse(ie.id),x(J=>J.filter(Oe=>Oe.id!==ie.id)),w(" Venta eliminada")}catch(J){console.error(J),w(" No se pudo eliminar la venta.")}finally{y(!1)}},ee=async()=>{if(!D)return;const ie=Number(D.item.qty||0),J=Math.max(1,Math.floor(Number(me)||0));if(J===ie){B(!1);return}const Oe=Number(D.item.unitPrice||0),fe=Number((Oe*J).toFixed(2));try{y(!0);const _e=J-ie;_e>0?await pLe(D.item.productId,_e):_e<0&&await gLe(D.item.productId,-_e);const Ue=Gt(Se,"sales_clothes",D.id);await kn(Ue,{quantity:J,total:fe,itemsTotal:fe,"item.qty":J,"item.total":fe,updatedAt:Ar.now()});const Ye=Math.min(Number(D.downPayment||0),fe);await xLe(D,fe,Ye),x(At=>At.map(yt=>yt.id===D.id?{...yt,quantity:J,total:fe,item:{...yt.item,qty:J,total:fe},downPayment:Ye}:yt)),w(" Venta actualizada"),B(!1)}catch(_e){console.error(_e),w(" No se pudo actualizar la venta.")}finally{y(!1)}},M=()=>{const ie=`Reporte de transacciones (Ropa)  ${u} a ${f}`,J=Ue=>(Ue||"").replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;"),Oe=ke.map(Ue=>{const Ye=Ue.customerName||(Ue.customerId?Pe[Ue.customerId]:"")||"Nombre cliente";return`<tr>
          <td>${Ue.date}</td>
          <td>${J(Ye)}</td>
          <td>${Ue.type==="CREDITO"?"Crdito":"Cash"}</td>
          <td style="text-align:right">${Ue.item.qty}</td>
          <td style="text-align:right">${Yd(Ue.total)}</td>
        </tr>`}).join(""),fe=`<!doctype html><html><head><meta charset="utf-8" />
    <title>${J(ie)}</title>
    <style>
      *{font-family:Arial, sans-serif} h1{margin:0 0 8px}
      .muted{color:#555;font-size:12px;margin-bottom:12px}
      .kpis{display:grid;grid-template-columns:repeat(2,max-content);gap:8px 28px;margin:10px 0 14px}
      table{width:100%;border-collapse:collapse;font-size:12px}
      th,td{border:1px solid #ddd;padding:6px}
      th{background:#f5f5f5;text-align:left}
      @media print{@page{size:A4;margin:12mm}}
    </style></head><body>
      <h1>${J(ie)}</h1>
      <div class="kpis">
        <div><b>Piezas Cash:</b> ${O.piezasCash}</div>
        <div><b>Piezas Crdito:</b> ${O.piezasCredito}</div>
        <div><b>Monto Cash:</b> ${Yd(O.montoCash)}</div>
        <div><b>Monto Crdito:</b> ${Yd(O.montoCredito)}</div>
      </div>
      <table><thead><tr>
        <th>Fecha</th><th>Cliente</th><th>Tipo</th><th>Piezas</th><th>Monto</th>
      </tr></thead><tbody>
      ${Oe||'<tr><td colspan="5" style="text-align:center">Sin transacciones</td></tr>'}
      </tbody></table>
      <script>window.print()<\/script>
    </body></html>`,_e=window.open("","_blank");_e&&(_e.document.open(),_e.document.write(fe),_e.document.close())},H=()=>ae(1),te=()=>ae(ie=>Math.max(1,ie-1)),Ce=()=>ae(ie=>Math.min(G,ie+1)),V=()=>ae(G),We=()=>{const ie=[];if(G<=7)for(let Oe=1;Oe<=G;Oe++)ie.push(Oe);else{const Oe=Math.max(1,ve-2),fe=Math.min(G,ve+2);ie.push(1),Oe>2&&ie.push(-1);for(let _e=Oe;_e<=fe;_e++)_e!==1&&_e!==G&&ie.push(_e);fe<G-1&&ie.push(-2),ie.push(G)}return i.jsxs("div",{className:"flex items-center gap-1 justify-between mt-3",children:[i.jsxs("div",{className:"flex items-center gap-1",children:[i.jsx("button",{className:"px-2 py-1 border rounded disabled:opacity-50",onClick:H,disabled:ve===1,children:" Primero"}),i.jsx("button",{className:"px-2 py-1 border rounded disabled:opacity-50",onClick:te,disabled:ve===1,children:" Anterior"}),ie.map((Oe,fe)=>typeof Oe=="number"?i.jsx("button",{className:`px-3 py-1 border rounded ${Oe===ve?"bg-blue-600 text-white":""}`,onClick:()=>ae(Oe),children:Oe},fe):i.jsx("span",{className:"px-2",children:""},fe)),i.jsx("button",{className:"px-2 py-1 border rounded disabled:opacity-50",onClick:Ce,disabled:ve===G,children:"Siguiente "}),i.jsx("button",{className:"px-2 py-1 border rounded disabled:opacity-50",onClick:V,disabled:ve===G,children:"ltimo "})]}),i.jsxs("div",{className:"text-sm text-gray-600",children:["Pgina ",ve," de ",G,"  ",ke.length," transaccin(es)"]})]})};return i.jsxs("div",{className:"max-w-6xl mx-auto",children:[i.jsx("h2",{className:"text-2xl font-bold mb-3",children:"Reporte de transacciones (Ropa)"}),i.jsxs("div",{className:"bg-white p-3 rounded shadow border mb-4 flex flex-wrap gap-3 items-end text-sm",children:[i.jsxs("div",{children:[i.jsx("label",{className:"block font-semibold",children:"Desde"}),i.jsx("input",{type:"date",className:"border rounded px-2 py-1",value:u,onChange:ie=>{d(ie.target.value),ae(1)}})]}),i.jsxs("div",{children:[i.jsx("label",{className:"block font-semibold",children:"Hasta"}),i.jsx("input",{type:"date",className:"border rounded px-2 py-1",value:f,onChange:ie=>{A(ie.target.value),ae(1)}})]}),i.jsxs("div",{children:[i.jsx("label",{className:"block font-semibold",children:"Cliente (crdito)"}),i.jsxs("select",{className:"border rounded px-2 py-1 min-w-[220px]",value:j,onChange:ie=>{I(ie.target.value),ae(1)},children:[i.jsx("option",{value:"",children:"Todos"}),h.map(ie=>i.jsx("option",{value:ie.id,children:ie.name},ie.id))]})]}),i.jsxs("div",{children:[i.jsx("label",{className:"block font-semibold",children:"Tipo"}),i.jsxs("select",{className:"border rounded px-2 py-1",value:_,onChange:ie=>{S(ie.target.value),ae(1)},children:[i.jsx("option",{value:"",children:"Todos"}),i.jsx("option",{value:"CONTADO",children:"Cash"}),i.jsx("option",{value:"CREDITO",children:"Crdito"})]})]}),i.jsx("button",{className:"ml-auto px-3 py-2 rounded bg-blue-600 text-white hover:bg-blue-700",onClick:M,children:"Exportar PDF"})]}),i.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-3 mb-4",children:[i.jsxs("div",{className:"p-3 border rounded bg-gray-50",children:[i.jsx("div",{className:"text-xs text-gray-600",children:"Piezas Cash"}),i.jsx("div",{className:"text-xl font-semibold",children:O.piezasCash})]}),i.jsxs("div",{className:"p-3 border rounded bg-gray-50",children:[i.jsx("div",{className:"text-xs text-gray-600",children:"Piezas Crdito"}),i.jsx("div",{className:"text-xl font-semibold",children:O.piezasCredito})]}),i.jsxs("div",{className:"p-3 border rounded bg-gray-50",children:[i.jsx("div",{className:"text-xs text-gray-600",children:"Monto Cash"}),i.jsx("div",{className:"text-xl font-semibold",children:Yd(O.montoCash)})]}),i.jsxs("div",{className:"p-3 border rounded bg-gray-50",children:[i.jsx("div",{className:"text-xs text-gray-600",children:"Monto Crdito"}),i.jsx("div",{className:"text-xl font-semibold",children:Yd(O.montoCredito)})]})]}),i.jsxs("div",{className:"bg-white p-2 rounded shadow border w-full",children:[i.jsxs("table",{className:"min-w-full w-full text-sm",children:[i.jsx("thead",{className:"bg-gray-100",children:i.jsxs("tr",{children:[i.jsx("th",{className:"p-2 border",children:"Fecha"}),i.jsx("th",{className:"p-2 border",children:"Cliente"}),i.jsx("th",{className:"p-2 border",children:"Tipo"}),i.jsx("th",{className:"p-2 border",children:"Piezas"}),i.jsx("th",{className:"p-2 border",children:"Monto"}),i.jsx("th",{className:"p-2 border",children:"Acciones"})]})}),i.jsx("tbody",{children:v?i.jsx("tr",{children:i.jsx("td",{className:"p-4 text-center",colSpan:6,children:"Cargando"})}):z.length===0?i.jsx("tr",{children:i.jsx("td",{className:"p-4 text-center",colSpan:6,children:"Sin transacciones en el rango."})}):z.map(ie=>{const J=ie.customerName||(ie.customerId?Pe[ie.customerId]:"")||"Nombre cliente";return i.jsxs("tr",{className:"text-center",children:[i.jsx("td",{className:"p-2 border",children:ie.date}),i.jsx("td",{className:"p-2 border",children:J}),i.jsx("td",{className:"p-2 border",children:ie.type==="CREDITO"?"Crdito":"Cash"}),i.jsx("td",{className:"p-2 border",children:i.jsx("button",{type:"button",className:"underline text-blue-600 hover:text-blue-800",title:"Ver piezas de esta transaccin",onClick:()=>c(ie.id),children:ie.item.qty})}),i.jsx("td",{className:"p-2 border",children:Yd(ie.total)}),i.jsxs("td",{className:"p-2 border relative",children:[i.jsx("button",{className:"px-2 py-1 rounded border hover:bg-gray-50",onClick:()=>T(Oe=>Oe===ie.id?null:ie.id),title:"Acciones",children:""}),E===ie.id&&i.jsxs("div",{className:"absolute right-2 mt-1 w-28 bg-white border rounded shadow z-10 text-left",children:[i.jsx("button",{className:"block w-full text-left px-3 py-2 hover:bg-gray-100",onClick:()=>U(ie),children:"Editar"}),i.jsx("button",{className:"block w-full text-left px-3 py-2 hover:bg-gray-100 text-red-600",onClick:()=>Y(ie),children:"Eliminar"})]})]})]},ie.id)})})]}),We()]}),b&&i.jsx("p",{className:"mt-2 text-sm",children:b}),k&&D&&i.jsx("div",{className:"fixed inset-0 bg-black/40 flex items-center justify-center z-50",children:i.jsxs("div",{className:"bg-white rounded-lg shadow-xl border w-[95%] max-w-md p-4",children:[i.jsx("h3",{className:"text-lg font-bold mb-2",children:"Editar venta"}),i.jsxs("div",{className:"space-y-2",children:[i.jsxs("div",{children:[i.jsx("div",{className:"text-xs text-gray-600",children:"Producto"}),i.jsxs("div",{className:"font-semibold",children:[D.item.productName," ",D.item.sku?` ${D.item.sku}`:""]})]}),i.jsxs("div",{children:[i.jsx("label",{className:"block text-sm font-semibold",children:"Cantidad (piezas)"}),i.jsx("input",{type:"number",step:"1",min:1,className:"w-full border p-2 rounded",value:me,onChange:ie=>pe(Math.max(1,Math.floor(Number(ie.target.value||0))))})]}),i.jsxs("div",{className:"grid grid-cols-2 gap-3",children:[i.jsxs("div",{className:"p-2 rounded bg-gray-50 border",children:[i.jsx("div",{className:"text-xs text-gray-600",children:"P. Unit"}),i.jsx("div",{className:"text-lg font-semibold",children:Yd(D.item.unitPrice)})]}),i.jsxs("div",{className:"p-2 rounded bg-gray-50 border",children:[i.jsx("div",{className:"text-xs text-gray-600",children:"Nuevo total"}),i.jsx("div",{className:"text-lg font-semibold",children:Yd(Number(D.item.unitPrice)*Number(me||0))})]})]})]}),i.jsxs("div",{className:"mt-4 flex justify-end gap-2",children:[i.jsx("button",{className:"px-3 py-2 rounded bg-gray-200 hover:bg-gray-300",onClick:()=>{B(!1),X(null)},children:"Cancelar"}),i.jsx("button",{className:"px-3 py-2 rounded bg-blue-600 text-white hover:bg-blue-700",onClick:ee,children:"Guardar cambios"})]})]})}),t&&i.jsx("div",{className:"fixed inset-0 bg-black/40 flex items-center justify-center z-[60]",children:i.jsxs("div",{className:"bg-white rounded-lg shadow-xl border w-[95%] max-w-3xl p-4",children:[i.jsxs("div",{className:"flex items-center justify-between mb-2",children:[i.jsxs("h3",{className:"text-lg font-bold",children:["Piezas vendidas"," ",a?` #${a}`:""]}),i.jsx("button",{className:"px-3 py-1 rounded bg-gray-200 hover:bg-gray-300",onClick:()=>e(!1),children:"Cerrar"})]}),i.jsx("div",{className:"bg-white rounded border overflow-x-auto",children:i.jsxs("table",{className:"min-w-full text-sm",children:[i.jsx("thead",{className:"bg-gray-100",children:i.jsxs("tr",{children:[i.jsx("th",{className:"p-2 border",children:"Producto"}),i.jsx("th",{className:"p-2 border text-right",children:"Cantidad"}),i.jsx("th",{className:"p-2 border text-right",children:"Precio"}),i.jsx("th",{className:"p-2 border text-right",children:"Descuento"}),i.jsx("th",{className:"p-2 border text-right",children:"Monto"})]})}),i.jsx("tbody",{children:r?i.jsx("tr",{children:i.jsx("td",{colSpan:5,className:"p-4 text-center",children:"Cargando"})}):o.length===0?i.jsx("tr",{children:i.jsx("td",{colSpan:5,className:"p-4 text-center",children:"Sin tems en esta venta."})}):o.map((ie,J)=>i.jsxs("tr",{className:"text-center",children:[i.jsx("td",{className:"p-2 border text-left",children:ie.productName}),i.jsx("td",{className:"p-2 border text-right",children:ie.qty}),i.jsx("td",{className:"p-2 border text-right",children:Yd(ie.unitPrice)}),i.jsx("td",{className:"p-2 border text-right",children:Yd(ie.discount||0)}),i.jsx("td",{className:"p-2 border text-right",children:Yd(ie.total)})]},J))})]})})]})})]})}const b$=["Altagracia","Taguizapa","El paso","Calaysa","Urbaite","Las Pilas"],Hc=t=>`C$ ${(Number(t)||0).toFixed(2)}`,m0=t=>Math.round((Number(t)||0)*100)/100,yLe=new Set(["PAGADA","PAGADO","CERRADA","CERRADO","LIQUIDADA","LIQUIDADO"]),xy=t=>{const e=String(t||"").trim().toUpperCase();return yLe.has(e)?"PAGADA":"PENDIENTE"};function s_(t){const e="+505 ";if(!t.startsWith(e)){const n=t.replace(/\D/g,"");return e+n.slice(0,8)}const r=t.slice(e.length).replace(/\D/g,"");return e+r.slice(0,8)}async function w$(t){const e=Yt(mt(Se,"ar_movements_pollo"),cr("ref.saleId","==",t)),r=await kt(e);await Promise.all(r.docs.map(n=>Kn(Gt(Se,"ar_movements_pollo",n.id))))}function bLe({role:t="",roles:e,sellerPolloId:r="",currentUserEmail:n}){const a=e&&e.length?e:t,s=String(r||"").trim(),o=En(a,"vendedor_pollo"),l=En(a,"admin"),[c,u]=g.useState([]),[d,f]=g.useState(!1),[A,h]=g.useState(""),[m,p]=g.useState(""),[x,v]=g.useState(""),[y,b]=g.useState(""),[w,j]=g.useState(!1),[I,_]=g.useState(!1),[S,E]=g.useState(null),[T,k]=g.useState([]),B=async ne=>{var He;j(!0),_(!0),E(ne),k([]);try{const tt=await zs(Gt(Se,"salesV2",ne));let Je=null;if(tt.exists()?Je=tt.data():Je=(He=(await kt(Yt(mt(Se,"salesV2"),cr("name","==",ne)))).docs[0])==null?void 0:He.data(),!Je){k([]);return}let pt=[];if(Array.isArray(Je.items)&&Je.items.length>0)pt=Je.items;else if(Je.items&&typeof Je.items=="object")try{pt=Object.values(Je.items)}catch{pt=[]}else Je.item?pt=[Je.item]:Array.isArray(Je.products)&&Je.products.length>0?pt=Je.products:Array.isArray(Je.lines)&&Je.lines.length>0?pt=Je.lines:Array.isArray(Je.detalles)&&Je.detalles.length>0?pt=Je.detalles:(Je.productName||Je.product)&&(pt=[{productName:Je.productName||Je.product||"",qty:Je.qty??Je.quantity??Je.lbs??0,unitPrice:Je.unitPrice??Je.price??0,discount:Je.discount??0,total:Je.total??Je.amount??0}]);const wt=Zt=>{if(Zt==null)return NaN;if(typeof Zt=="number")return Zt;let Dr=String(Zt).trim();if(!Dr)return NaN;if(Dr=Dr.replace(/[^0-9.,-]/g,""),!Dr)return NaN;Dr.indexOf(".")>-1&&Dr.indexOf(",")>-1?Dr=Dr.replace(/,/g,""):Dr.indexOf(",")>-1&&Dr.indexOf(".")===-1&&(Dr=Dr.replace(/,/g,"."));const Yr=Number(Dr);return Number.isNaN(Yr)?NaN:Yr},Wt=new Set;for(const Zt of pt)if(Array.isArray(Zt==null?void 0:Zt.allocations))for(const Dr of Zt.allocations){const Yr=String((Dr==null?void 0:Dr.batchId)||"").trim();Yr&&Wt.add(Yr)}else if(Zt!=null&&Zt.allocations&&typeof Zt.allocations=="object")try{for(const Dr of Object.values(Zt.allocations)){const Yr=String((Dr==null?void 0:Dr.batchId)||"").trim();Yr&&Wt.add(Yr)}}catch{}if(Array.isArray(Je==null?void 0:Je.allocations))for(const Zt of Je.allocations){const Dr=String((Zt==null?void 0:Zt.batchId)||"").trim();Dr&&Wt.add(Dr)}const Xt={};Wt.size>0&&await Promise.all(Array.from(Wt).map(async Zt=>{try{const Dr=await zs(Gt(Se,"inventory_batches",Zt));if(Dr.exists()){const Yr=Dr.data();Xt[Zt]=Number(Yr.salePrice??Yr.sale_price??Yr.price??0)}}catch{}}));const Rt=new Set;for(const Zt of pt){const Dr=String(Zt.productId||"").trim();Dr&&Rt.add(Dr)}const $t={};Rt.size>0&&await Promise.all(Array.from(Rt).map(async Zt=>{try{const Dr=await zs(Gt(Se,"products",Zt));if(Dr.exists()){const Yr=Dr.data();$t[Zt]=Number(Yr.salePrice??Yr.price??0)}}catch{}}));const kr=pt.map(Zt=>{const Dr=String(Zt.productName||Zt.product||Zt.name||"(sin nombre)"),Yr=Number(Zt.qty??Zt.quantity??Zt.lbs??Zt.weight??0)||0,zr=wt(Zt.total??Zt.lineFinal??Zt.amount??Zt.monto??Zt.line_total)||0;let Er=0;const Tt=[Zt.unitPrice,Zt.unitPricePackage,Zt.salePrice,Zt.sale_price,Zt.price,Zt.unit_price,Zt.pricePerUnit,Zt.price_per_unit];for(const Ir of Tt){const pr=wt(Ir);if(!Number.isNaN(pr)&&pr!==0){Er=pr;break}}if(!Er){const Ir=(Je==null?void 0:Je.salePrice)??(Je==null?void 0:Je.sale_price)??(Je==null?void 0:Je.unitPrice)??(Je==null?void 0:Je.unit_price)??(Je==null?void 0:Je.price)??(Je==null?void 0:Je.pricePerUnit),pr=wt(Ir);!Number.isNaN(pr)&&pr!==0&&(Er=pr)}if(!Er){const Ir=Array.isArray(Zt.allocations)?Zt.allocations[0]:Zt.allocations&&typeof Zt.allocations=="object"?Object.values(Zt.allocations)[0]:null,pr=Ir?String(Ir.batchId||"").trim():"";pr&&Xt[pr]&&(Er=Xt[pr]||0)}!Er&&Zt.productId&&(Er=$t[String(Zt.productId)]||0),(!Er||Er===0)&&zr>0&&Yr>0&&(Er=zr/Yr);const pn=wt(Zt.discount??Zt.desc??0)||0;let un=zr;return(!un||un===0)&&(un=Number(Er*Yr||0)),un=Number(un)||0,{productName:Dr,qty:Yr,unitPrice:Er,discount:pn,total:un}});k(kr)}catch(tt){console.error(tt)}finally{_(!1)}},[D,X]=g.useState(""),[me,pe]=g.useState("+505 "),[he,ve]=g.useState(""),[ae,Pe]=g.useState(""),[ke,O]=g.useState("ACTIVO"),[G,z]=g.useState(0),[U,Y]=g.useState(""),[ee,M]=g.useState(0),[H,te]=g.useState([]),[Ce,V]=g.useState(!0),[We,ie]=g.useState(""),[J,Oe]=g.useState(null),[fe,_e]=g.useState(""),[Ue,Ye]=g.useState("+505 "),[At,yt]=g.useState(""),[bt,Nt]=g.useState(""),[jt,St]=g.useState("ACTIVO"),[Ve,Te]=g.useState(0),[qe,ge]=g.useState(""),[q,se]=g.useState(!1),[ye,ue]=g.useState(null),[Le,ct]=g.useState(!1),[ht,xe]=g.useState([]),[Ae,Re]=g.useState({saldoActual:0,totalAbonado:0,totalCargos:0,saldoRestante:0}),[lt,Ne]=g.useState(!1),[De,xt]=g.useState(0),[_t,Et]=g.useState(new Date().toISOString().slice(0,10)),[Mt,nt]=g.useState(""),[Ee,we]=g.useState(!1),[oe,Fe]=g.useState(null),[ce,Me]=g.useState(""),[Ke,P]=g.useState(0),[R,L]=g.useState(""),[K,re]=g.useState(null),[de,Ge]=g.useState(!1),[rt,ft]=g.useState(null),[et,ut]=g.useState(!1),[Ot,zt]=g.useState(!1),[Bt,Lt]=g.useState(null);g.useEffect(()=>{(async()=>{try{if(V(!0),o&&!s){te([]),ie(" Este usuario no tiene vendedor asociado (sellerPolloId vaco).");return}const ne=await kt(mt(Se,"sellers_candies")),He=[];ne.forEach(wt=>{const Wt=wt.data();He.push({id:wt.id,name:String(Wt.name||"")})}),u(He);const tt=o?Yt(mt(Se,"customers_pollo"),cr("vendorId","==",s),In("createdAt","desc")):Yt(mt(Se,"customers_pollo"),In("createdAt","desc")),Je=await kt(tt),pt=[];Je.forEach(wt=>{const Wt=wt.data();pt.push({id:wt.id,name:Wt.name??"",phone:Wt.phone??"+505 ",place:Wt.place??"",notes:Wt.notes??"",status:Wt.status??"ACTIVO",creditLimit:Number(Wt.creditLimit??0),createdAt:Wt.createdAt??Ar.now(),balance:0,vendorId:Wt.vendorId||"",vendorName:Wt.vendorName||"",initialDebt:Number(Wt.initialDebt||0),lastAbonoDate:"",lastAbonoAmount:0})});for(const wt of pt)try{const Wt=Yt(mt(Se,"ar_movements_pollo"),cr("customerId","==",wt.id)),Xt=await kt(Wt);let Rt=0,$t=null,kr=!1;Xt.forEach(zr=>{var pn,un,Ir;const Er=zr.data(),Tt=Number(Er.amount||0);if(Rt+=Tt,Tt>0&&xy(Er.debtStatus??Er.creditStatus??Er.cycleStatus??Er.status)==="PENDIENTE"&&(kr=!0),Tt<0){const pr=Er.date??((un=(pn=Er.createdAt)==null?void 0:pn.toDate)!=null&&un.call(pn)?Er.createdAt.toDate().toISOString().slice(0,10):""),jr=(Ir=Er.createdAt)!=null&&Ir.seconds?Number(Er.createdAt.seconds):0;(!$t||jr>=$t.ts)&&($t={date:pr,amount:Math.abs(Tt),ts:jr})}});const Zt=Number(wt.initialDebt||0),Dr=m0(Zt+Rt);wt.balance=Dr,(kr||Dr>0)&&$t?(wt.lastAbonoDate=$t.date,wt.lastAbonoAmount=$t.amount):(wt.lastAbonoDate="",wt.lastAbonoAmount=0)}catch{wt.balance=Number(wt.initialDebt||0),wt.lastAbonoDate="",wt.lastAbonoAmount=0}te(pt)}catch(ne){console.error(ne),ie(" Error cargando clientes.")}finally{V(!1)}})()},[o,s]);const Be=()=>{X(""),pe("+505 "),ve(""),Pe(""),O("ACTIVO"),z(0),Y(""),M(0)},vt=async ne=>{var pt;if(ne.preventDefault(),ie(""),!D.trim()){ie("Ingresa el nombre.");return}const He=s_(me);if(He.length<6){ie("Telfono incompleto.");return}const tt=o?s:String(U||""),Je=tt&&((pt=c.find(wt=>wt.id===tt))==null?void 0:pt.name)||"";try{const wt=Number(ee||0),Wt=await Jn(mt(Se,"customers_pollo"),{name:D.trim(),phone:He,place:he||"",notes:ae||"",status:ke,creditLimit:Number(G||0),vendorId:tt,vendorName:Je,initialDebt:wt,createdAt:Ar.now()});te(Xt=>[{id:Wt.id,name:D.trim(),phone:He,place:he||"",notes:ae||"",status:ke,creditLimit:Number(G||0),vendorId:tt,vendorName:Je,initialDebt:wt,createdAt:Ar.now(),balance:wt,lastAbonoDate:"",lastAbonoAmount:0},...Xt]),Be(),Ge(!1),ie(" Cliente creado")}catch(wt){console.error(wt),ie(" Error al crear cliente")}},hr=ne=>{if(o){ie(" No permitido: vendedores no editan clientes desde el listado.");return}Oe(ne.id),_e(ne.name),Ye(ne.phone||"+505 "),yt(ne.place||""),Nt(ne.notes||""),St(ne.status||"ACTIVO"),Te(Number(ne.creditLimit||0)),ge(String(ne.vendorId||""))},xr=()=>{Oe(null),_e(""),Ye("+505 "),yt(""),Nt(""),St("ACTIVO"),Te(0),ge("")},Nr=async()=>{var Wt;if(o){ie(" No permitido.");return}if(!J)return;const ne=s_(Ue);if(!fe.trim()){ie("Ingresa el nombre.");return}const He=H.find(Xt=>Xt.id===J),tt=String((He==null?void 0:He.vendorId)||""),Je=o?s:String(qe||"");if(o&&tt&&tt!==s){ie(" Este cliente pertenece a otro vendedor.");return}if(l&&tt&&Je&&tt!==Je){ie(" Este cliente ya est asociado a otro vendedor. Primero desasocia (deja vendedor en ) y guarda; luego lo puedes asignar.");return}const pt=o?s:String(qe||""),wt=pt&&((Wt=c.find(Xt=>Xt.id===pt))==null?void 0:Wt.name)||"";try{await kn(Gt(Se,"customers_pollo",J),{name:fe.trim(),phone:ne,place:At||"",notes:bt||"",status:jt,creditLimit:Number(Ve||0),vendorId:pt,vendorName:wt}),te(Xt=>Xt.map(Rt=>Rt.id===J?{...Rt,name:fe.trim(),phone:ne,place:At||"",notes:bt||"",status:jt,creditLimit:Number(Ve||0),vendorId:pt,vendorName:wt}:Rt)),xr(),ie(" Cliente actualizado")}catch(Xt){console.error(Xt),ie(" Error al actualizar")}},gr=async ne=>{if(confirm(`Eliminar al cliente "${ne.name}"?
Se borrarn todas sus ventas y movimientos.`))try{V(!0);const tt=Yt(mt(Se,"salesV2"),cr("customerId","==",ne.id)),Je=await kt(tt);for(const Wt of Je.docs){const Xt=Wt.id;try{await Kn(Gt(Se,"salesV2",Xt))}catch(Rt){console.warn("delete sale error",Rt)}await w$(Xt)}const pt=Yt(mt(Se,"ar_movements_pollo"),cr("customerId","==",ne.id)),wt=await kt(pt);await Promise.all(wt.docs.map(Wt=>Kn(Gt(Se,"ar_movements_pollo",Wt.id)))),await Kn(Gt(Se,"customers_pollo",ne.id)),te(Wt=>Wt.filter(Xt=>Xt.id!==ne.id)),ie(" Cliente eliminado y registros borrados")}catch(tt){console.error(tt),ie(" No se pudo eliminar el cliente.")}finally{V(!1)}},_r=(ne,He)=>{const tt=ne.reduce((Wt,Xt)=>Wt+(Number(Xt.amount)||0),0),Je=ne.filter(Wt=>Number(Wt.amount)<0).reduce((Wt,Xt)=>Wt+Math.abs(Number(Xt.amount)||0),0),pt=ne.filter(Wt=>Number(Wt.amount)>0).reduce((Wt,Xt)=>Wt+(Number(Xt.amount)||0),0),wt=Number(He||0)+tt;Re({saldoActual:wt,totalAbonado:Je,totalCargos:Number(He||0)+pt,saldoRestante:wt})},Zr=async ne=>{ue(ne),xe([]),Re({saldoActual:0,totalAbonado:0,totalCargos:0,saldoRestante:0}),se(!0),ut(!1),zt(!1),Lt(null),Ne(!1),xt(0),Et(new Date().toISOString().slice(0,10)),nt(""),Fe(null),ct(!0);try{const He=Yt(mt(Se,"ar_movements_pollo"),cr("customerId","==",ne.id)),tt=await kt(He),Je=[];tt.forEach(pt=>{var Rt,$t;const wt=pt.data(),Wt=wt.date??(($t=(Rt=wt.createdAt)==null?void 0:Rt.toDate)!=null&&$t.call(Rt)?wt.createdAt.toDate().toISOString().slice(0,10):""),Xt=Number(wt.amount||0);Je.push({id:pt.id,date:Wt,type:wt.type??(Xt<0?"ABONO":"CARGO"),amount:Xt,ref:wt.ref||{},comment:wt.comment||"",createdAt:wt.createdAt,debtStatus:xy(wt.debtStatus??wt.creditStatus??wt.cycleStatus??wt.status)})}),Je.sort((pt,wt)=>{var Rt,$t;if(pt.date!==wt.date)return pt.date.localeCompare(wt.date);const Wt=((Rt=pt.createdAt)==null?void 0:Rt.seconds)||0,Xt=(($t=wt.createdAt)==null?void 0:$t.seconds)||0;return Wt-Xt}),xe(Je),_r(Je,Number(ne.initialDebt||0))}catch(He){console.error(He),ie(" No se pudo cargar el estado de cuenta")}finally{ct(!1)}},Nn=(ne,He)=>m0(He||0)>0?!0:ne.some(tt=>tt.type==="CARGO"&&xy(tt.debtStatus)==="PENDIENTE"),en=ne=>{const He=ne.filter(tt=>Number(tt.amount)<0).map(tt=>{var Je;return{date:tt.date,amount:Math.abs(Number(tt.amount||0)),ts:((Je=tt.createdAt)==null?void 0:Je.seconds)||0}}).sort((tt,Je)=>(tt.ts||0)-(Je.ts||0));return He.length?He[He.length-1]:null},Qr=async()=>{if(!ye)return;ie("");const ne=Number(De||0);if(!(ne>0)){ie("Ingresa un monto de abono mayor a 0.");return}const He=parseFloat(ne.toFixed(2));if(!_t){ie("Selecciona la fecha del abono.");return}try{we(!0);const tt={customerId:ye.id,type:"ABONO",amount:-He,date:_t,comment:Mt||"",createdAt:Ar.now()},pt={id:(await Jn(mt(Se,"ar_movements_pollo"),tt)).id,date:_t,type:"ABONO",amount:-He,comment:Mt||"",createdAt:Ar.now()},wt=[...ht,pt].sort(($t,kr)=>{var Yr,zr;if($t.date!==kr.date)return $t.date.localeCompare(kr.date);const Zt=((Yr=$t.createdAt)==null?void 0:Yr.seconds)||0,Dr=((zr=kr.createdAt)==null?void 0:zr.seconds)||0;return Zt-Dr});xe(wt),_r(wt,Number(ye.initialDebt||0));const Wt=wt.reduce(($t,kr)=>$t+(Number(kr.amount)||0),0),Xt=m0(Number(ye.initialDebt||0)+Wt),Rt=Nn(wt,Xt);te($t=>$t.map(kr=>{if(kr.id!==ye.id)return kr;const Zt=m0((kr.balance||0)-He);return{...kr,balance:Zt,lastAbonoDate:Rt?_t:"",lastAbonoAmount:Rt?He:0}})),ue($t=>$t&&{...$t,balance:m0(($t.balance||0)-He),lastAbonoDate:Rt?_t:"",lastAbonoAmount:Rt?He:0}),xt(0),nt(""),Et(new Date().toISOString().slice(0,10)),Ne(!1),ie(" Abono registrado")}catch(tt){console.error(tt),ie(" Error al registrar el abono")}finally{we(!1)}},wr=ne=>{Fe(ne.id),Me(ne.date||new Date().toISOString().slice(0,10)),P(Math.abs(Number(ne.amount||0))),L(ne.comment||"")},Or=()=>{Fe(null),Me(""),P(0),L("")},$r=async()=>{if(!oe||!ye)return;const ne=ht.findIndex(pt=>pt.id===oe);if(ne===-1)return;const He=ht[ne],tt=Number(Ke||0);if(!(tt>0)){ie("El monto debe ser mayor a 0.");return}const Je=He.type==="ABONO"?-parseFloat(tt.toFixed(2)):+parseFloat(tt.toFixed(2));try{await kn(Gt(Se,"ar_movements_pollo",oe),{date:ce,amount:Je,comment:R||""});const pt=[...ht];pt[ne]={...He,date:ce,amount:Je,comment:R||""},pt.sort(($t,kr)=>{var Yr,zr;if($t.date!==kr.date)return $t.date.localeCompare(kr.date);const Zt=((Yr=$t.createdAt)==null?void 0:Yr.seconds)||0,Dr=((zr=kr.createdAt)==null?void 0:zr.seconds)||0;return Zt-Dr}),xe(pt),_r(pt,Number(ye.initialDebt||0));const wt=pt.reduce(($t,kr)=>$t+(Number(kr.amount)||0),0),Wt=m0(Number(ye.initialDebt||0)+wt),Xt=Nn(pt,Wt),Rt=Xt?en(pt):null;te($t=>$t.map(kr=>kr.id===ye.id?{...kr,balance:Wt,lastAbonoDate:Xt&&Rt?Rt.date:"",lastAbonoAmount:Xt&&Rt?Rt.amount:0}:kr)),ue($t=>$t&&{...$t,balance:Wt,lastAbonoDate:Xt&&Rt?Rt.date:"",lastAbonoAmount:Xt&&Rt?Rt.amount:0}),Or(),ie(" Movimiento actualizado")}catch(pt){console.error(pt),ie(" Error al actualizar movimiento")}},mr=async ne=>{var tt,Je;if(confirm(`Eliminar este movimiento (${ne.type==="ABONO"?"Abono":"Compra"}) del ${ne.date}?${ne.type==="CARGO"&&((tt=ne.ref)!=null&&tt.saleId)?`
Se borrarn los registros de esa venta.`:""}`)&&ye)try{if(V(!0),ne.type==="CARGO"&&((Je=ne.ref)!=null&&Je.saleId)){try{await Kn(Gt(Se,"salesV2",ne.ref.saleId))}catch($t){console.warn("delete sale error",$t),V(!1),ie(" No se pudo borrar la venta asociada.");return}await w$(ne.ref.saleId)}else await Kn(Gt(Se,"ar_movements_pollo",ne.id));const pt=ht.filter($t=>{var kr,Zt;return ne.type==="CARGO"&&((kr=ne.ref)!=null&&kr.saleId)?((Zt=$t.ref)==null?void 0:Zt.saleId)!==ne.ref.saleId:$t.id!==ne.id});xe(pt),_r(pt,Number(ye.initialDebt||0));const wt=pt.reduce(($t,kr)=>$t+(Number(kr.amount)||0),0),Wt=m0(Number(ye.initialDebt||0)+wt),Xt=Nn(pt,Wt),Rt=Xt?en(pt):null;te($t=>$t.map(kr=>kr.id===ye.id?{...kr,balance:Wt,lastAbonoDate:Xt&&Rt?Rt.date:"",lastAbonoAmount:Xt&&Rt?Rt.amount:0}:kr)),ue($t=>$t&&{...$t,balance:Wt,lastAbonoDate:Xt&&Rt?Rt.date:"",lastAbonoAmount:Xt&&Rt?Rt.amount:0}),Lt(null),ie(" Movimiento eliminado")}catch(pt){console.error(pt),ie(" Error al eliminar movimiento")}finally{V(!1)}},Kr=async ne=>{if(ne.type!=="CARGO")return;const He=xy(ne.debtStatus)==="PAGADA"?"PENDIENTE":"PAGADA";try{re(ne.id),await kn(Gt(Se,"ar_movements_pollo",ne.id),{debtStatus:He});const tt=ht.map(Je=>Je.id===ne.id?{...Je,debtStatus:He}:Je);if(xe(tt),ye){_r(tt,Number(ye.initialDebt||0));const Je=tt.reduce((Xt,Rt)=>Xt+(Number(Rt.amount)||0),0),pt=m0(Number(ye.initialDebt||0)+Je),wt=Nn(tt,pt),Wt=wt?en(tt):null;te(Xt=>Xt.map(Rt=>Rt.id===ye.id?{...Rt,balance:pt,lastAbonoDate:wt&&Wt?Wt.date:"",lastAbonoAmount:wt&&Wt?Wt.amount:0}:Rt)),ue(Xt=>Xt&&{...Xt,balance:pt,lastAbonoDate:wt&&Wt?Wt.date:"",lastAbonoAmount:wt&&Wt?Wt.amount:0})}ie(He==="PAGADA"?" Compra marcada como pagada":" Compra marcada como pendiente")}catch(tt){console.error(tt),ie(" No se pudo actualizar el estado de la compra")}finally{re(null)}},or=g.useMemo(()=>[...H].sort((ne,He)=>{var tt,Je;return ne.status!==He.status?ne.status==="BLOQUEADO"?1:-1:(((tt=He.createdAt)==null?void 0:tt.seconds)||0)-(((Je=ne.createdAt)==null?void 0:Je.seconds)||0)}),[H]),dt=ne=>ne==="ACTIVO"?"bg-green-100 text-green-700":"bg-red-100 text-red-700",er=g.useMemo(()=>{const ne=A.trim().toLowerCase(),He=x.trim()===""?null:Number(x),tt=y.trim()===""?null:Number(y);return or.filter(Je=>{const pt=!ne||String(Je.name||"").toLowerCase().includes(ne),wt=!m||Je.status===m,Wt=Number(Je.balance||0),Xt=He===null||!Number.isNaN(He)&&Wt>=He,Rt=tt===null||!Number.isNaN(tt)&&Wt<=tt;return pt&&wt&&Xt&&Rt})},[or,A,m,x,y]),Jt=g.useMemo(()=>er.reduce((ne,He)=>ne+Number(He.balance||0),0),[er]),ar=g.useMemo(()=>er.filter(ne=>ne.status==="ACTIVO").length,[er]),tr=er.length,fr=()=>{h(""),p(""),v(""),b("")};return i.jsxs("div",{className:"max-w-6xl mx-auto",children:[i.jsxs("div",{className:"flex items-center justify-between mb-3",children:[i.jsx("h2",{className:"text-2xl font-bold",children:"Clientes (Pollo)"}),i.jsx("button",{className:"px-3 py-2 rounded bg-blue-600 text-white hover:bg-blue-700",onClick:()=>{Ge(!0),o&&Y(s)},type:"button",children:"Crear Cliente"})]}),i.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-3 mb-4",children:[i.jsxs("div",{className:"p-4 border rounded-lg bg-white shadow-sm",children:[i.jsx("div",{className:"text-xs uppercase tracking-wide text-gray-600",children:"Saldo pendiente"}),i.jsx("div",{className:"text-2xl font-semibold",children:Hc(Jt)}),i.jsx("p",{className:"text-[11px] text-gray-500 mt-1",children:"Calculado sobre los clientes filtrados"})]}),i.jsxs("div",{className:"p-4 border rounded-lg bg-white shadow-sm",children:[i.jsx("div",{className:"text-xs uppercase tracking-wide text-gray-600",children:"Clientes activos"}),i.jsx("div",{className:"text-2xl font-semibold",children:ar}),i.jsxs("p",{className:"text-[11px] text-gray-500 mt-1",children:["De un total de ",tr]})]})]}),i.jsxs("div",{className:"bg-white border rounded shadow-sm p-4 mb-4",children:[i.jsxs("div",{className:"flex flex-col gap-3 md:flex-row md:items-end",children:[i.jsxs("div",{className:"flex-1",children:[i.jsx("label",{className:"block text-sm font-semibold",children:"Filtrar cliente"}),i.jsx("input",{className:"w-full border rounded px-3 py-2",placeholder:"Nombre, telfono o nota",value:A,onChange:ne=>h(ne.target.value)})]}),i.jsxs("div",{className:"flex gap-2",children:[i.jsx("button",{type:"button",className:"px-3 py-2 rounded border bg-gray-50 hover:bg-gray-100",onClick:()=>f(ne=>!ne),children:d?"Ocultar filtros":"Ms filtros"}),i.jsx("button",{type:"button",className:"px-3 py-2 rounded border bg-white hover:bg-gray-50",onClick:fr,children:"Limpiar"})]})]}),d&&i.jsxs("div",{className:"mt-4 grid grid-cols-1 md:grid-cols-3 gap-3",children:[i.jsxs("div",{children:[i.jsx("label",{className:"block text-sm font-semibold",children:"Estado"}),i.jsxs("select",{className:"w-full border rounded px-3 py-2",value:m,onChange:ne=>p(ne.target.value),children:[i.jsx("option",{value:"",children:"Todos"}),i.jsx("option",{value:"ACTIVO",children:"Activo"}),i.jsx("option",{value:"BLOQUEADO",children:"Bloqueado"})]})]}),i.jsxs("div",{children:[i.jsx("label",{className:"block text-sm font-semibold",children:"Saldo mnimo"}),i.jsx("input",{type:"number",step:"0.01",inputMode:"decimal",className:"w-full border rounded px-3 py-2",value:x,onChange:ne=>v(ne.target.value),placeholder:"0.00"})]}),i.jsxs("div",{children:[i.jsx("label",{className:"block text-sm font-semibold",children:"Saldo mximo"}),i.jsx("input",{type:"number",step:"0.01",inputMode:"decimal",className:"w-full border rounded px-3 py-2",value:y,onChange:ne=>b(ne.target.value),placeholder:"0.00"})]})]})]}),i.jsxs("div",{className:"bg-white p-2 rounded shadow border w-full",children:[i.jsx("div",{className:"hidden md:block",children:i.jsxs("table",{className:"min-w-full w-full text-sm",children:[i.jsx("thead",{className:"bg-gray-100",children:i.jsxs("tr",{children:[i.jsx("th",{className:"p-2 border",children:"Fecha"}),i.jsx("th",{className:"p-2 border",children:"Nombre"}),i.jsx("th",{className:"p-2 border",children:"Telfono"}),i.jsx("th",{className:"p-2 border",children:"Vendedor"}),i.jsx("th",{className:"p-2 border",children:"Lugar"}),i.jsx("th",{className:"p-2 border",children:"Estado"}),i.jsx("th",{className:"p-2 border",children:"Lmite"}),i.jsx("th",{className:"p-2 border",children:"Saldo"}),i.jsx("th",{className:"p-2 border",children:"Comentario"}),i.jsx("th",{className:"p-2 border",children:"Acciones"})]})}),i.jsx("tbody",{children:Ce?i.jsx("tr",{children:i.jsx("td",{className:"p-4 text-center",colSpan:10,children:"Cargando"})}):er.length===0?i.jsx("tr",{children:i.jsx("td",{className:"p-4 text-center",colSpan:10,children:"Sin clientes"})}):er.map(ne=>{var tt;const He=J===ne.id;return i.jsxs("tr",{className:"text-center",children:[i.jsx("td",{className:"p-2 border",children:(tt=ne.createdAt)!=null&&tt.toDate?ne.createdAt.toDate().toISOString().slice(0,10):""}),i.jsx("td",{className:"p-2 border text-left",children:He?i.jsx("input",{className:"w-full border p-1 rounded",value:fe,onChange:Je=>_e(Je.target.value)}):i.jsx("div",{className:"font-medium",children:ne.name})}),i.jsx("td",{className:"p-2 border",children:He?i.jsx("input",{className:"w-full border p-1 rounded",value:Ue,onChange:Je=>Ye(s_(Je.target.value))}):ne.phone}),i.jsx("td",{className:"p-2 border",children:He?i.jsxs("select",{className:"w-full border p-1 rounded text-xs",value:o?s:qe,onChange:Je=>ge(Je.target.value),disabled:o,title:"Vendedor asociado",children:[i.jsx("option",{value:"",children:" Sin vendedor "}),c.map(Je=>i.jsx("option",{value:Je.id,children:Je.name},Je.id))]}):ne.vendorName||""}),i.jsx("td",{className:"p-2 border",children:He?i.jsxs("select",{className:"w-full border p-1 rounded",value:At,onChange:Je=>yt(Je.target.value),children:[i.jsx("option",{value:"",children:""}),b$.map(Je=>i.jsx("option",{value:Je,children:Je},Je))]}):ne.place||""}),i.jsx("td",{className:"p-2 border",children:He?i.jsxs("select",{className:"w-full border p-1 rounded",value:jt,onChange:Je=>St(Je.target.value),children:[i.jsx("option",{value:"ACTIVO",children:"ACTIVO"}),i.jsx("option",{value:"BLOQUEADO",children:"BLOQUEADO"})]}):i.jsx("span",{className:`px-2 py-0.5 rounded text-xs ${dt(ne.status)}`,children:ne.status})}),i.jsx("td",{className:"p-2 border",children:He?i.jsx("input",{type:"number",step:"0.01",inputMode:"decimal",className:"w-full border p-1 rounded text-right",value:Number.isNaN(Ve)?"":Ve,onChange:Je=>Te(Math.max(0,Number(Je.target.value||0)))}):Hc(ne.creditLimit||0)}),i.jsx("td",{className:"p-2 border font-semibold",children:Hc(ne.balance||0)}),i.jsx("td",{className:"p-2 border",children:He?i.jsx("textarea",{className:"w-full border p-1 rounded resize-y min-h-12",value:bt,onChange:Je=>Nt(Je.target.value),maxLength:500}):i.jsx("span",{title:ne.notes||"",children:(ne.notes||"").length>40?(ne.notes||"").slice(0,40)+"":ne.notes||""})}),i.jsx("td",{className:"p-2 border",children:i.jsx("div",{className:"flex gap-2 justify-center",children:He?i.jsxs(i.Fragment,{children:[i.jsx("button",{className:"px-2 py-1 rounded text-white bg-blue-600 hover:bg-blue-700",onClick:Nr,children:"Guardar"}),i.jsx("button",{className:"px-2 py-1 rounded bg-gray-200 hover:bg-gray-300",onClick:xr,children:"Cancelar"})]}):i.jsxs(i.Fragment,{children:[i.jsx("button",{className:"px-2 py-1 rounded text-white bg-yellow-600 hover:bg-yellow-700",onClick:()=>hr(ne),children:"Editar"}),i.jsx("button",{className:"px-2 py-1 rounded text-white bg-red-600 hover:bg-red-700 disabled:opacity-50",onClick:()=>gr(ne),disabled:!l,title:l?"Borrar":"Solo admin",children:"Borrar"}),i.jsx("button",{className:"px-2 py-1 rounded text-white bg-indigo-600 hover:bg-indigo-700",onClick:()=>Zr(ne),children:"Estado de cuenta"})]})})})]},ne.id)})})]})}),i.jsx("div",{className:"md:hidden space-y-2",children:Ce?i.jsx("div",{className:"p-4 text-center text-sm text-gray-600",children:"Cargando"}):er.length===0?i.jsx("div",{className:"p-4 text-center text-sm text-gray-600",children:"Sin clientes"}):er.map(ne=>i.jsxs("div",{className:"border rounded-lg bg-white p-3 shadow-sm",children:[i.jsxs("div",{className:"flex items-start justify-between gap-2",children:[i.jsxs("div",{children:[i.jsx("div",{className:"font-semibold text-base",children:ne.name}),i.jsx("div",{className:"text-xs text-gray-600",children:ne.phone||""}),i.jsxs("div",{className:"text-xs text-gray-600",children:["Vendedor:"," ",i.jsx("span",{className:"font-medium",children:ne.vendorName||""})]})]}),i.jsx("span",{className:`px-2 py-0.5 rounded text-xs ${dt(ne.status)}`,children:ne.status})]}),i.jsxs("div",{className:"mt-2 grid grid-cols-2 gap-2 text-sm",children:[i.jsxs("div",{className:"border rounded p-2 bg-gray-50",children:[i.jsx("div",{className:"text-[11px] text-gray-600",children:"Saldo"}),i.jsx("div",{className:"font-semibold",children:Hc(ne.balance||0)})]}),i.jsxs("div",{className:"border rounded p-2 bg-gray-50",children:[i.jsx("div",{className:"text-[11px] text-gray-600",children:"Lmite"}),i.jsx("div",{className:"font-semibold",children:Hc(ne.creditLimit||0)})]})]}),i.jsxs("div",{className:"mt-2 text-xs text-gray-600",children:["ltimo abono:"," ",i.jsx("span",{className:"font-medium",children:ne.lastAbonoDate?`${ne.lastAbonoDate} (${Hc(ne.lastAbonoAmount||0)})`:""})]}),ne.notes?i.jsxs("div",{className:"mt-2 text-xs text-gray-700",children:[i.jsx("span",{className:"font-semibold",children:"Nota:"})," ",(ne.notes||"").length>80?(ne.notes||"").slice(0,80)+"":ne.notes]}):null,i.jsxs("div",{className:"mt-3 flex gap-2 flex-wrap",children:[i.jsx("button",{type:"button",className:"px-3 py-2 rounded bg-indigo-600 text-white text-sm",onClick:()=>Zr(ne),children:"Estado de cuenta"}),i.jsx("button",{type:"button",className:"px-3 py-2 rounded bg-yellow-600 text-white text-sm",onClick:()=>hr(ne),disabled:o,title:o?"Vendedor no edita":"Editar",children:"Editar"}),i.jsx("button",{type:"button",className:"px-3 py-2 rounded bg-red-600 text-white text-sm disabled:opacity-50",onClick:()=>gr(ne),disabled:!l,title:l?"Borrar":"Solo admin",children:"Borrar"})]})]},ne.id))})]}),We&&i.jsx("p",{className:"mt-2 text-sm",children:We}),de&&Mu.createPortal(i.jsxs("div",{className:"fixed inset-0 z-[70] flex items-center justify-center",children:[i.jsx("div",{className:"absolute inset-0 bg-black/40",onClick:()=>Ge(!1)}),i.jsxs("div",{className:"relative bg-white rounded-lg shadow-2xl border w-[96%] max-w-3xl max-h-[92vh] overflow-auto p-4",children:[i.jsxs("div",{className:"flex items-center justify-between mb-2",children:[i.jsx("h3",{className:"text-lg font-bold",children:"Crear Cliente"}),i.jsx("button",{className:"px-3 py-1 rounded bg-gray-200 hover:bg-gray-300",onClick:()=>Ge(!1),type:"button",children:"Cerrar"})]}),i.jsxs("form",{onSubmit:vt,className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[i.jsxs("div",{children:[i.jsx("label",{className:"block text-sm font-semibold",children:"Nombre"}),i.jsx("input",{className:"w-full border p-2 rounded",placeholder:"Ej: Mara Lpez",value:D,onChange:ne=>X(ne.target.value)})]}),i.jsxs("div",{children:[i.jsx("label",{className:"block text-sm font-semibold",children:"Telfono"}),i.jsx("input",{className:"w-full border p-2 rounded",value:me,onChange:ne=>pe(s_(ne.target.value)),placeholder:"+505 88888888",inputMode:"numeric"})]}),i.jsxs("div",{children:[i.jsx("label",{className:"block text-sm font-semibold",children:"Lugar"}),i.jsxs("select",{className:"w-full border p-2 rounded",value:he,onChange:ne=>ve(ne.target.value),children:[i.jsx("option",{value:"",children:""}),b$.map(ne=>i.jsx("option",{value:ne,children:ne},ne))]})]}),i.jsxs("div",{children:[i.jsx("label",{className:"block text-sm font-semibold",children:"Estado"}),i.jsxs("select",{className:"w-full border p-2 rounded",value:ke,onChange:ne=>O(ne.target.value),children:[i.jsx("option",{value:"ACTIVO",children:"ACTIVO"}),i.jsx("option",{value:"BLOQUEADO",children:"BLOQUEADO"})]})]}),i.jsxs("div",{children:[i.jsx("label",{className:"block text-sm font-semibold",children:"Vendedor asociado"}),i.jsxs("select",{className:"w-full border p-2 rounded",value:o?s:U,onChange:ne=>Y(ne.target.value),disabled:o,children:[i.jsx("option",{value:"",children:" Sin vendedor "}),c.map(ne=>i.jsx("option",{value:ne.id,children:ne.name},ne.id))]})]}),i.jsxs("div",{children:[i.jsx("label",{className:"block text-sm font-semibold",children:"Deuda inicial"}),i.jsx("input",{type:"number",step:"0.01",inputMode:"decimal",className:"w-full border p-2 rounded",value:ee===0?"":ee,onChange:ne=>M(Math.max(0,Number(ne.target.value||0))),placeholder:"Ej: 1500"}),i.jsx("div",{className:"text-xs text-gray-500 mt-1",children:"Este valor cuenta como saldo desde el inicio."})]}),i.jsxs("div",{children:[i.jsx("label",{className:"block text-sm font-semibold",children:"Lmite de crdito (opcional)"}),i.jsx("input",{type:"number",step:"0.01",inputMode:"decimal",className:"w-full border p-2 rounded",value:G===0?"":G,onChange:ne=>z(Math.max(0,Number(ne.target.value||0))),placeholder:"Ej: 2000"})]}),i.jsxs("div",{className:"md:col-span-2",children:[i.jsx("label",{className:"block text-sm font-semibold",children:"Comentario"}),i.jsx("textarea",{className:"w-full border p-2 rounded resize-y min-h-24",value:ae,onChange:ne=>Pe(ne.target.value),maxLength:500,placeholder:"Notas del cliente"}),i.jsxs("div",{className:"text-xs text-gray-500 text-right",children:[ae.length,"/500"]})]}),i.jsxs("div",{className:"md:col-span-2 flex justify-end gap-2",children:[i.jsx("button",{type:"button",className:"px-4 py-2 rounded bg-gray-200 hover:bg-gray-300",onClick:()=>Ge(!1),children:"Cancelar"}),i.jsx("button",{className:"bg-blue-600 text-white px-4 py-2 rounded hover:bg-blue-700",children:"Guardar cliente"})]})]})]})]}),document.body),q&&Mu.createPortal(i.jsxs("div",{className:"fixed inset-0 z-[50]",style:{zIndex:50},children:[i.jsx("div",{className:"absolute inset-0 bg-black/40",onClick:()=>se(!1)}),i.jsx("div",{className:"absolute inset-0 flex items-center justify-center p-4",children:i.jsxs("div",{className:"bg-white rounded-lg shadow-xl border w-full max-w-5xl max-h-[92vh] overflow-auto p-4",children:[i.jsxs("div",{className:"flex items-center justify-between mb-3 gap-3",children:[i.jsxs("h3",{className:"text-lg font-bold",children:["Estado de cuenta  ",(ye==null?void 0:ye.name)||""]}),i.jsxs("div",{className:"flex gap-2 shrink-0",children:[i.jsx("button",{type:"button",className:"px-3 py-1 rounded bg-green-600 text-white hover:bg-green-700",onClick:()=>{xt(0),Et(new Date().toISOString().slice(0,10)),nt(""),Ne(!0)},children:"Abonar"}),i.jsx("button",{type:"button",className:"px-3 py-1 rounded bg-gray-200 hover:bg-gray-300",onClick:()=>se(!1),children:"Cerrar"})]})]}),i.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-3 mb-3",children:[i.jsxs("div",{className:"p-3 border rounded bg-gray-50",children:[i.jsx("div",{className:"text-xs text-gray-600",children:"Deuda inicial"}),i.jsx("div",{className:"text-xl font-semibold",children:Hc(Number((ye==null?void 0:ye.initialDebt)||0))})]}),i.jsxs("div",{className:"p-3 border rounded bg-gray-50",children:[i.jsx("div",{className:"text-xs text-gray-600",children:"Saldo actual"}),i.jsx("div",{className:"text-xl font-semibold",children:Hc(Ae.saldoActual)})]}),i.jsxs("div",{className:"p-3 border rounded bg-gray-50",children:[i.jsx("div",{className:"text-xs text-gray-600",children:"Total abonado"}),i.jsx("div",{className:"text-xl font-semibold",children:Hc(Ae.totalAbonado)})]}),i.jsxs("div",{className:"p-3 border rounded bg-gray-50",children:[i.jsx("div",{className:"text-xs text-gray-600",children:"Saldo restante"}),i.jsx("div",{className:"text-xl font-semibold",children:Hc(Ae.saldoRestante)})]})]}),i.jsx("div",{className:"bg-white rounded border overflow-x-auto",children:i.jsxs("table",{className:"min-w-full text-sm",children:[i.jsx("thead",{className:"bg-gray-100",children:i.jsxs("tr",{children:[i.jsx("th",{className:"p-2 border",children:"Fecha"}),i.jsx("th",{className:"p-2 border",children:"Tipo"}),i.jsx("th",{className:"p-2 border",children:"Estado compra"}),i.jsx("th",{className:"p-2 border",children:"Comentario"}),i.jsx("th",{className:"p-2 border",children:"Monto"}),i.jsx("th",{className:"p-2 border",children:"Acciones"})]})}),i.jsx("tbody",{children:Le?i.jsx("tr",{children:i.jsx("td",{colSpan:6,className:"p-4 text-center",children:"Cargando"})}):ht.length===0?i.jsx("tr",{children:i.jsx("td",{colSpan:6,className:"p-4 text-center",children:"Sin movimientos"})}):ht.map(ne=>{var Je;const He=oe===ne.id,tt=xy(ne.debtStatus);return i.jsxs("tr",{className:"text-center",children:[i.jsx("td",{className:"p-2 border",children:He?i.jsx("input",{type:"date",className:"w-full border p-1 rounded",value:ce,onChange:pt=>Me(pt.target.value)}):ne.date||""}),i.jsx("td",{className:"p-2 border",children:ne.amount>=0?(Je=ne.ref)!=null&&Je.saleId?i.jsx("button",{type:"button",className:"px-2 py-0.5 rounded text-xs bg-yellow-100 text-yellow-700 underline",onClick:()=>B(ne.ref.saleId),children:"COMPRA (Ver detalle)"}):i.jsx("span",{className:"px-2 py-0.5 rounded text-xs bg-yellow-100 text-yellow-700",children:"COMPRA (Ver detalle)"}):i.jsx("span",{className:"px-2 py-0.5 rounded text-xs bg-green-100 text-green-700",children:"ABONO"})}),i.jsx("td",{className:"p-2 border",children:ne.type==="CARGO"?i.jsx("span",{className:`px-2 py-0.5 rounded text-xs ${tt==="PAGADA"?"bg-green-100 text-green-700":"bg-orange-100 text-orange-700"}`,children:tt==="PAGADA"?"Pagada":"Pendiente"}):""}),i.jsx("td",{className:"p-2 border",children:He?i.jsx("input",{className:"w-full border p-1 rounded",value:R,onChange:pt=>L(pt.target.value)}):i.jsx("span",{title:ne.comment||"",children:(ne.comment||"").length>40?(ne.comment||"").slice(0,40)+"":ne.comment||""})}),i.jsx("td",{className:"p-2 border font-semibold",children:He?i.jsx("input",{type:"number",step:"0.01",inputMode:"decimal",className:"w-full border p-1 rounded text-right",value:Number.isNaN(Ke)?"":Ke,onChange:pt=>P(Number(pt.target.value||0))}):Hc(ne.amount)}),i.jsx("td",{className:"p-2 border",children:He?i.jsxs("div",{className:"flex gap-2 justify-center",children:[i.jsx("button",{type:"button",className:"px-2 py-1 rounded text-white bg-blue-600 hover:bg-blue-700",onClick:$r,children:"Guardar"}),i.jsx("button",{type:"button",className:"px-2 py-1 rounded bg-gray-200 hover:bg-gray-300",onClick:Or,children:"Cancelar"})]}):i.jsxs("div",{className:"flex gap-2 justify-center",children:[i.jsx("button",{type:"button",className:"px-2 py-1 rounded text-white bg-yellow-600 hover:bg-yellow-700",onClick:()=>wr(ne),children:"Editar"}),ne.type==="CARGO"&&i.jsx("button",{type:"button",className:`px-2 py-1 rounded text-white ${tt==="PAGADA"?"bg-gray-600 hover:bg-gray-700":"bg-emerald-600 hover:bg-emerald-700"} disabled:opacity-50`,onClick:()=>Kr(ne),disabled:K===ne.id,children:tt==="PAGADA"?"Marcar pendiente":"Marcar pagada"}),i.jsx("button",{type:"button",className:"px-2 py-1 rounded text-white bg-red-600 hover:bg-red-700",onClick:()=>mr(ne),children:"Borrar"})]})})]},ne.id)})})]})})]})}),w&&i.jsx("div",{className:"fixed inset-0 bg-black/40 flex items-center justify-center z-[60]",style:{zIndex:60},children:i.jsxs("div",{className:"bg-white rounded-lg shadow-xl border w-[95%] max-w-3xl p-4",children:[i.jsxs("div",{className:"flex items-center justify-between mb-2",children:[i.jsxs("h3",{className:"text-lg font-bold",children:["Productos vendidos"," "]}),i.jsx("button",{className:"px-3 py-1 rounded bg-gray-200 hover:bg-gray-300",onClick:()=>j(!1),children:"Cerrar"})]}),i.jsx("div",{className:"bg-white rounded border overflow-x-auto",children:i.jsxs("table",{className:"min-w-full text-sm",children:[i.jsx("thead",{className:"bg-gray-100",children:i.jsxs("tr",{children:[i.jsx("th",{className:"p-2 border",children:"Producto"}),i.jsx("th",{className:"p-2 border text-right",children:"Cantidad"}),i.jsx("th",{className:"p-2 border text-right",children:"Precio"}),i.jsx("th",{className:"p-2 border text-right",children:"Descuento"}),i.jsx("th",{className:"p-2 border text-right",children:"Monto"})]})}),i.jsx("tbody",{children:I?i.jsx("tr",{children:i.jsx("td",{colSpan:5,className:"p-4 text-center",children:"Cargando"})}):T.length===0?i.jsx("tr",{children:i.jsx("td",{colSpan:5,className:"p-4 text-center",children:"Sin tems en esta venta."})}):T.map((ne,He)=>i.jsxs("tr",{className:"text-center",children:[i.jsx("td",{className:"p-2 border text-left",children:ne.productName}),i.jsx("td",{className:"p-2 border text-right",children:ne.qty}),i.jsx("td",{className:"p-2 border text-right",children:Hc(ne.unitPrice)}),i.jsx("td",{className:"p-2 border text-right",children:Hc(ne.discount||0)}),i.jsx("td",{className:"p-2 border text-right",children:Hc(ne.total)})]},He))})]})})]})})]}),document.body),lt&&i.jsx("div",{className:"fixed inset-0 bg-black/50 flex items-center justify-center z-[90]",children:i.jsxs("div",{className:"bg-white rounded-lg shadow-2xl border w-[95%] max-w-md p-4",children:[i.jsxs("h3",{className:"text-lg font-bold",children:["Registrar abono  ",(ye==null?void 0:ye.name)||""]}),i.jsxs("div",{className:"grid grid-cols-1 gap-3",children:[i.jsxs("div",{children:[i.jsx("label",{className:"block text-sm font-semibold",children:"Fecha"}),i.jsx("input",{type:"date",className:"w-full border p-2 rounded",value:_t,onChange:ne=>Et(ne.target.value)})]}),i.jsxs("div",{children:[i.jsx("label",{className:"block text-sm font-semibold",children:"Monto"}),i.jsx("input",{type:"number",step:"0.01",inputMode:"decimal",className:"w-full border p-2 rounded",value:De===0?"":De,onChange:ne=>{const He=Number(ne.target.value||0),tt=Number.isFinite(He)?Math.max(0,parseFloat(He.toFixed(2))):0;xt(tt)},placeholder:"0.00"}),i.jsx("div",{className:"text-xs text-gray-500 mt-1",children:"Se registrar como ABONO (negativo) con 2 decimales."})]}),i.jsxs("div",{children:[i.jsx("label",{className:"block text-sm font-semibold",children:"Comentario (opcional)"}),i.jsx("textarea",{className:"w-full border p-2 rounded resize-y min-h-20",value:Mt,onChange:ne=>nt(ne.target.value),maxLength:250,placeholder:"Ej: Abono en efectivo"}),i.jsxs("div",{className:"text-xs text-gray-500 text-right",children:[Mt.length,"/250"]})]})]}),i.jsxs("div",{className:"mt-4 flex justify-end gap-2",children:[i.jsx("button",{className:"px-3 py-2 rounded bg-gray-200 hover:bg-gray-300",onClick:()=>Ne(!1),disabled:Ee,children:"Cancelar"}),i.jsx("button",{className:"px-3 py-2 rounded bg-green-600 text-white hover:bg-green-700 disabled:opacity-60",onClick:Qr,disabled:Ee,children:Ee?"Guardando...":"Guardar abono"})]})]})})]})}function wLe(t,e){var r=Object.setPrototypeOf;r?r(t,e):t.__proto__=e}function NLe(t,e){e===void 0&&(e=t.constructor);var r=Error.captureStackTrace;r&&r(t,e)}var CLe=function(){var t=function(r,n){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(a,s){a.__proto__=s}||function(a,s){for(var o in s)Object.prototype.hasOwnProperty.call(s,o)&&(a[o]=s[o])},t(r,n)};return function(e,r){if(typeof r!="function"&&r!==null)throw new TypeError("Class extends value "+String(r)+" is not a constructor or null");t(e,r);function n(){this.constructor=e}e.prototype=r===null?Object.create(r):(n.prototype=r.prototype,new n)}}(),_Le=function(t){CLe(e,t);function e(r,n){var a=this.constructor,s=t.call(this,r,n)||this;return Object.defineProperty(s,"name",{value:a.name,enumerable:!1,configurable:!0}),wLe(s,a.prototype),NLe(s),s}return e}(Error),ELe=function(){var t=function(e,r){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,a){n.__proto__=a}||function(n,a){for(var s in a)a.hasOwnProperty(s)&&(n[s]=a[s])},t(e,r)};return function(e,r){t(e,r);function n(){this.constructor=e}e.prototype=r===null?Object.create(r):(n.prototype=r.prototype,new n)}}(),cu=function(t){ELe(e,t);function e(r){r===void 0&&(r=void 0);var n=t.call(this,r)||this;return n.message=r,n}return e.prototype.getKind=function(){var r=this.constructor;return r.kind},e.kind="Exception",e}(_Le),SLe=function(){var t=function(e,r){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,a){n.__proto__=a}||function(n,a){for(var s in a)a.hasOwnProperty(s)&&(n[s]=a[s])},t(e,r)};return function(e,r){t(e,r);function n(){this.constructor=e}e.prototype=r===null?Object.create(r):(n.prototype=r.prototype,new n)}}(),Li=function(t){SLe(e,t);function e(){return t!==null&&t.apply(this,arguments)||this}return e.kind="ArgumentException",e}(cu),ILe=function(){var t=function(e,r){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,a){n.__proto__=a}||function(n,a){for(var s in a)a.hasOwnProperty(s)&&(n[s]=a[s])},t(e,r)};return function(e,r){t(e,r);function n(){this.constructor=e}e.prototype=r===null?Object.create(r):(n.prototype=r.prototype,new n)}}(),Pn=function(t){ILe(e,t);function e(){return t!==null&&t.apply(this,arguments)||this}return e.kind="IllegalArgumentException",e}(cu),pse=function(){function t(e){if(this.binarizer=e,e===null)throw new Pn("Binarizer must be non-null.")}return t.prototype.getWidth=function(){return this.binarizer.getWidth()},t.prototype.getHeight=function(){return this.binarizer.getHeight()},t.prototype.getBlackRow=function(e,r){return this.binarizer.getBlackRow(e,r)},t.prototype.getBlackMatrix=function(){return(this.matrix===null||this.matrix===void 0)&&(this.matrix=this.binarizer.getBlackMatrix()),this.matrix},t.prototype.isCropSupported=function(){return this.binarizer.getLuminanceSource().isCropSupported()},t.prototype.crop=function(e,r,n,a){var s=this.binarizer.getLuminanceSource().crop(e,r,n,a);return new t(this.binarizer.createBinarizer(s))},t.prototype.isRotateSupported=function(){return this.binarizer.getLuminanceSource().isRotateSupported()},t.prototype.rotateCounterClockwise=function(){var e=this.binarizer.getLuminanceSource().rotateCounterClockwise();return new t(this.binarizer.createBinarizer(e))},t.prototype.rotateCounterClockwise45=function(){var e=this.binarizer.getLuminanceSource().rotateCounterClockwise45();return new t(this.binarizer.createBinarizer(e))},t.prototype.toString=function(){try{return this.getBlackMatrix().toString()}catch{return""}},t}(),jLe=function(){var t=function(e,r){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,a){n.__proto__=a}||function(n,a){for(var s in a)a.hasOwnProperty(s)&&(n[s]=a[s])},t(e,r)};return function(e,r){t(e,r);function n(){this.constructor=e}e.prototype=r===null?Object.create(r):(n.prototype=r.prototype,new n)}}(),so=function(t){jLe(e,t);function e(){return t!==null&&t.apply(this,arguments)||this}return e.getChecksumInstance=function(){return new e},e.kind="ChecksumException",e}(cu),PLe=function(){function t(e){this.source=e}return t.prototype.getLuminanceSource=function(){return this.source},t.prototype.getWidth=function(){return this.source.getWidth()},t.prototype.getHeight=function(){return this.source.getHeight()},t}(),ws=function(){function t(){}return t.arraycopy=function(e,r,n,a,s){for(;s--;)n[a++]=e[r++]},t.currentTimeMillis=function(){return Date.now()},t}(),BLe=function(){var t=function(e,r){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,a){n.__proto__=a}||function(n,a){for(var s in a)a.hasOwnProperty(s)&&(n[s]=a[s])},t(e,r)};return function(e,r){t(e,r);function n(){this.constructor=e}e.prototype=r===null?Object.create(r):(n.prototype=r.prototype,new n)}}(),FR=function(t){BLe(e,t);function e(){return t!==null&&t.apply(this,arguments)||this}return e.kind="IndexOutOfBoundsException",e}(cu),TLe=function(){var t=function(e,r){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,a){n.__proto__=a}||function(n,a){for(var s in a)a.hasOwnProperty(s)&&(n[s]=a[s])},t(e,r)};return function(e,r){t(e,r);function n(){this.constructor=e}e.prototype=r===null?Object.create(r):(n.prototype=r.prototype,new n)}}(),N$=function(t){TLe(e,t);function e(r,n){r===void 0&&(r=void 0),n===void 0&&(n=void 0);var a=t.call(this,n)||this;return a.index=r,a.message=n,a}return e.kind="ArrayIndexOutOfBoundsException",e}(FR),kLe=function(t){var e=typeof Symbol=="function"&&Symbol.iterator,r=e&&t[e],n=0;if(r)return r.call(t);if(t&&typeof t.length=="number")return{next:function(){return t&&n>=t.length&&(t=void 0),{value:t&&t[n++],done:!t}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")},Io=function(){function t(){}return t.fill=function(e,r){for(var n=0,a=e.length;n<a;n++)e[n]=r},t.fillWithin=function(e,r,n,a){t.rangeCheck(e.length,r,n);for(var s=r;s<n;s++)e[s]=a},t.rangeCheck=function(e,r,n){if(r>n)throw new Pn("fromIndex("+r+") > toIndex("+n+")");if(r<0)throw new N$(r);if(n>e)throw new N$(n)},t.asList=function(){for(var e=[],r=0;r<arguments.length;r++)e[r]=arguments[r];return e},t.create=function(e,r,n){var a=Array.from({length:e});return a.map(function(s){return Array.from({length:r}).fill(n)})},t.createInt32Array=function(e,r,n){var a=Array.from({length:e});return a.map(function(s){return Int32Array.from({length:r}).fill(n)})},t.equals=function(e,r){if(!e||!r||!e.length||!r.length||e.length!==r.length)return!1;for(var n=0,a=e.length;n<a;n++)if(e[n]!==r[n])return!1;return!0},t.hashCode=function(e){var r,n;if(e===null)return 0;var a=1;try{for(var s=kLe(e),o=s.next();!o.done;o=s.next()){var l=o.value;a=31*a+l}}catch(c){r={error:c}}finally{try{o&&!o.done&&(n=s.return)&&n.call(s)}finally{if(r)throw r.error}}return a},t.fillUint8Array=function(e,r){for(var n=0;n!==e.length;n++)e[n]=r},t.copyOf=function(e,r){return e.slice(0,r)},t.copyOfUint8Array=function(e,r){if(e.length<=r){var n=new Uint8Array(r);return n.set(e),n}return e.slice(0,r)},t.copyOfRange=function(e,r,n){var a=n-r,s=new Int32Array(a);return ws.arraycopy(e,r,s,0,a),s},t.binarySearch=function(e,r,n){n===void 0&&(n=t.numberComparator);for(var a=0,s=e.length-1;a<=s;){var o=s+a>>1,l=n(r,e[o]);if(l>0)a=o+1;else if(l<0)s=o-1;else return o}return-a-1},t.numberComparator=function(e,r){return e-r},t}(),sa=function(){function t(){}return t.numberOfTrailingZeros=function(e){var r;if(e===0)return 32;var n=31;return r=e<<16,r!==0&&(n-=16,e=r),r=e<<8,r!==0&&(n-=8,e=r),r=e<<4,r!==0&&(n-=4,e=r),r=e<<2,r!==0&&(n-=2,e=r),n-(e<<1>>>31)},t.numberOfLeadingZeros=function(e){if(e===0)return 32;var r=1;return e>>>16||(r+=16,e<<=16),e>>>24||(r+=8,e<<=8),e>>>28||(r+=4,e<<=4),e>>>30||(r+=2,e<<=2),r-=e>>>31,r},t.toHexString=function(e){return e.toString(16)},t.toBinaryString=function(e){return String(parseInt(String(e),2))},t.bitCount=function(e){return e=e-(e>>>1&1431655765),e=(e&858993459)+(e>>>2&858993459),e=e+(e>>>4)&252645135,e=e+(e>>>8),e=e+(e>>>16),e&63},t.truncDivision=function(e,r){return Math.trunc(e/r)},t.parseInt=function(e,r){return r===void 0&&(r=void 0),parseInt(e,r)},t.MIN_VALUE_32_BITS=-2147483648,t.MAX_VALUE=Number.MAX_SAFE_INTEGER,t}(),Jo=function(){function t(e,r){e===void 0?(this.size=0,this.bits=new Int32Array(1)):(this.size=e,r==null?this.bits=t.makeArray(e):this.bits=r)}return t.prototype.getSize=function(){return this.size},t.prototype.getSizeInBytes=function(){return Math.floor((this.size+7)/8)},t.prototype.ensureCapacity=function(e){if(e>this.bits.length*32){var r=t.makeArray(e);ws.arraycopy(this.bits,0,r,0,this.bits.length),this.bits=r}},t.prototype.get=function(e){return(this.bits[Math.floor(e/32)]&1<<(e&31))!==0},t.prototype.set=function(e){this.bits[Math.floor(e/32)]|=1<<(e&31)},t.prototype.flip=function(e){this.bits[Math.floor(e/32)]^=1<<(e&31)},t.prototype.getNextSet=function(e){var r=this.size;if(e>=r)return r;var n=this.bits,a=Math.floor(e/32),s=n[a];s&=~((1<<(e&31))-1);for(var o=n.length;s===0;){if(++a===o)return r;s=n[a]}var l=a*32+sa.numberOfTrailingZeros(s);return l>r?r:l},t.prototype.getNextUnset=function(e){var r=this.size;if(e>=r)return r;var n=this.bits,a=Math.floor(e/32),s=~n[a];s&=~((1<<(e&31))-1);for(var o=n.length;s===0;){if(++a===o)return r;s=~n[a]}var l=a*32+sa.numberOfTrailingZeros(s);return l>r?r:l},t.prototype.setBulk=function(e,r){this.bits[Math.floor(e/32)]=r},t.prototype.setRange=function(e,r){if(r<e||e<0||r>this.size)throw new Pn;if(r!==e){r--;for(var n=Math.floor(e/32),a=Math.floor(r/32),s=this.bits,o=n;o<=a;o++){var l=o>n?0:e&31,c=o<a?31:r&31,u=(2<<c)-(1<<l);s[o]|=u}}},t.prototype.clear=function(){for(var e=this.bits.length,r=this.bits,n=0;n<e;n++)r[n]=0},t.prototype.isRange=function(e,r,n){if(r<e||e<0||r>this.size)throw new Pn;if(r===e)return!0;r--;for(var a=Math.floor(e/32),s=Math.floor(r/32),o=this.bits,l=a;l<=s;l++){var c=l>a?0:e&31,u=l<s?31:r&31,d=(2<<u)-(1<<c)&4294967295;if((o[l]&d)!==(n?d:0))return!1}return!0},t.prototype.appendBit=function(e){this.ensureCapacity(this.size+1),e&&(this.bits[Math.floor(this.size/32)]|=1<<(this.size&31)),this.size++},t.prototype.appendBits=function(e,r){if(r<0||r>32)throw new Pn("Num bits must be between 0 and 32");this.ensureCapacity(this.size+r);for(var n=r;n>0;n--)this.appendBit((e>>n-1&1)===1)},t.prototype.appendBitArray=function(e){var r=e.size;this.ensureCapacity(this.size+r);for(var n=0;n<r;n++)this.appendBit(e.get(n))},t.prototype.xor=function(e){if(this.size!==e.size)throw new Pn("Sizes don't match");for(var r=this.bits,n=0,a=r.length;n<a;n++)r[n]^=e.bits[n]},t.prototype.toBytes=function(e,r,n,a){for(var s=0;s<a;s++){for(var o=0,l=0;l<8;l++)this.get(e)&&(o|=1<<7-l),e++;r[n+s]=o}},t.prototype.getBitArray=function(){return this.bits},t.prototype.reverse=function(){for(var e=new Int32Array(this.bits.length),r=Math.floor((this.size-1)/32),n=r+1,a=this.bits,s=0;s<n;s++){var o=a[s];o=o>>1&1431655765|(o&1431655765)<<1,o=o>>2&858993459|(o&858993459)<<2,o=o>>4&252645135|(o&252645135)<<4,o=o>>8&16711935|(o&16711935)<<8,o=o>>16&65535|(o&65535)<<16,e[r-s]=o}if(this.size!==n*32){for(var l=n*32-this.size,c=e[0]>>>l,s=1;s<n;s++){var u=e[s];c|=u<<32-l,e[s-1]=c,c=u>>>l}e[n-1]=c}this.bits=e},t.makeArray=function(e){return new Int32Array(Math.floor((e+31)/32))},t.prototype.equals=function(e){if(!(e instanceof t))return!1;var r=e;return this.size===r.size&&Io.equals(this.bits,r.bits)},t.prototype.hashCode=function(){return 31*this.size+Io.hashCode(this.bits)},t.prototype.toString=function(){for(var e="",r=0,n=this.size;r<n;r++)r&7||(e+=" "),e+=this.get(r)?"X":".";return e},t.prototype.clone=function(){return new t(this.size,this.bits.slice())},t.prototype.toArray=function(){for(var e=[],r=0,n=this.size;r<n;r++)e.push(this.get(r));return e},t}(),iF;(function(t){t[t.OTHER=0]="OTHER",t[t.PURE_BARCODE=1]="PURE_BARCODE",t[t.POSSIBLE_FORMATS=2]="POSSIBLE_FORMATS",t[t.TRY_HARDER=3]="TRY_HARDER",t[t.CHARACTER_SET=4]="CHARACTER_SET",t[t.ALLOWED_LENGTHS=5]="ALLOWED_LENGTHS",t[t.ASSUME_CODE_39_CHECK_DIGIT=6]="ASSUME_CODE_39_CHECK_DIGIT",t[t.ENABLE_CODE_39_EXTENDED_MODE=7]="ENABLE_CODE_39_EXTENDED_MODE",t[t.ASSUME_GS1=8]="ASSUME_GS1",t[t.RETURN_CODABAR_START_END=9]="RETURN_CODABAR_START_END",t[t.NEED_RESULT_POINT_CALLBACK=10]="NEED_RESULT_POINT_CALLBACK",t[t.ALLOWED_EAN_EXTENSIONS=11]="ALLOWED_EAN_EXTENSIONS"})(iF||(iF={}));const Ns=iF;var FLe=function(){var t=function(e,r){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,a){n.__proto__=a}||function(n,a){for(var s in a)a.hasOwnProperty(s)&&(n[s]=a[s])},t(e,r)};return function(e,r){t(e,r);function n(){this.constructor=e}e.prototype=r===null?Object.create(r):(n.prototype=r.prototype,new n)}}(),Hr=function(t){FLe(e,t);function e(){return t!==null&&t.apply(this,arguments)||this}return e.getFormatInstance=function(){return new e},e.kind="FormatException",e}(cu),OLe=function(t){var e=typeof Symbol=="function"&&Symbol.iterator,r=e&&t[e],n=0;if(r)return r.call(t);if(t&&typeof t.length=="number")return{next:function(){return t&&n>=t.length&&(t=void 0),{value:t&&t[n++],done:!t}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")},qa;(function(t){t[t.Cp437=0]="Cp437",t[t.ISO8859_1=1]="ISO8859_1",t[t.ISO8859_2=2]="ISO8859_2",t[t.ISO8859_3=3]="ISO8859_3",t[t.ISO8859_4=4]="ISO8859_4",t[t.ISO8859_5=5]="ISO8859_5",t[t.ISO8859_6=6]="ISO8859_6",t[t.ISO8859_7=7]="ISO8859_7",t[t.ISO8859_8=8]="ISO8859_8",t[t.ISO8859_9=9]="ISO8859_9",t[t.ISO8859_10=10]="ISO8859_10",t[t.ISO8859_11=11]="ISO8859_11",t[t.ISO8859_13=12]="ISO8859_13",t[t.ISO8859_14=13]="ISO8859_14",t[t.ISO8859_15=14]="ISO8859_15",t[t.ISO8859_16=15]="ISO8859_16",t[t.SJIS=16]="SJIS",t[t.Cp1250=17]="Cp1250",t[t.Cp1251=18]="Cp1251",t[t.Cp1252=19]="Cp1252",t[t.Cp1256=20]="Cp1256",t[t.UnicodeBigUnmarked=21]="UnicodeBigUnmarked",t[t.UTF8=22]="UTF8",t[t.ASCII=23]="ASCII",t[t.Big5=24]="Big5",t[t.GB18030=25]="GB18030",t[t.EUC_KR=26]="EUC_KR"})(qa||(qa={}));var Eo=function(){function t(e,r,n){for(var a,s,o=[],l=3;l<arguments.length;l++)o[l-3]=arguments[l];this.valueIdentifier=e,this.name=n,typeof r=="number"?this.values=Int32Array.from([r]):this.values=r,this.otherEncodingNames=o,t.VALUE_IDENTIFIER_TO_ECI.set(e,this),t.NAME_TO_ECI.set(n,this);for(var c=this.values,u=0,d=c.length;u!==d;u++){var f=c[u];t.VALUES_TO_ECI.set(f,this)}try{for(var A=OLe(o),h=A.next();!h.done;h=A.next()){var m=h.value;t.NAME_TO_ECI.set(m,this)}}catch(p){a={error:p}}finally{try{h&&!h.done&&(s=A.return)&&s.call(A)}finally{if(a)throw a.error}}}return t.prototype.getValueIdentifier=function(){return this.valueIdentifier},t.prototype.getName=function(){return this.name},t.prototype.getValue=function(){return this.values[0]},t.getCharacterSetECIByValue=function(e){if(e<0||e>=900)throw new Hr("incorect value");var r=t.VALUES_TO_ECI.get(e);if(r===void 0)throw new Hr("incorect value");return r},t.getCharacterSetECIByName=function(e){var r=t.NAME_TO_ECI.get(e);if(r===void 0)throw new Hr("incorect value");return r},t.prototype.equals=function(e){if(!(e instanceof t))return!1;var r=e;return this.getName()===r.getName()},t.VALUE_IDENTIFIER_TO_ECI=new Map,t.VALUES_TO_ECI=new Map,t.NAME_TO_ECI=new Map,t.Cp437=new t(qa.Cp437,Int32Array.from([0,2]),"Cp437"),t.ISO8859_1=new t(qa.ISO8859_1,Int32Array.from([1,3]),"ISO-8859-1","ISO88591","ISO8859_1"),t.ISO8859_2=new t(qa.ISO8859_2,4,"ISO-8859-2","ISO88592","ISO8859_2"),t.ISO8859_3=new t(qa.ISO8859_3,5,"ISO-8859-3","ISO88593","ISO8859_3"),t.ISO8859_4=new t(qa.ISO8859_4,6,"ISO-8859-4","ISO88594","ISO8859_4"),t.ISO8859_5=new t(qa.ISO8859_5,7,"ISO-8859-5","ISO88595","ISO8859_5"),t.ISO8859_6=new t(qa.ISO8859_6,8,"ISO-8859-6","ISO88596","ISO8859_6"),t.ISO8859_7=new t(qa.ISO8859_7,9,"ISO-8859-7","ISO88597","ISO8859_7"),t.ISO8859_8=new t(qa.ISO8859_8,10,"ISO-8859-8","ISO88598","ISO8859_8"),t.ISO8859_9=new t(qa.ISO8859_9,11,"ISO-8859-9","ISO88599","ISO8859_9"),t.ISO8859_10=new t(qa.ISO8859_10,12,"ISO-8859-10","ISO885910","ISO8859_10"),t.ISO8859_11=new t(qa.ISO8859_11,13,"ISO-8859-11","ISO885911","ISO8859_11"),t.ISO8859_13=new t(qa.ISO8859_13,15,"ISO-8859-13","ISO885913","ISO8859_13"),t.ISO8859_14=new t(qa.ISO8859_14,16,"ISO-8859-14","ISO885914","ISO8859_14"),t.ISO8859_15=new t(qa.ISO8859_15,17,"ISO-8859-15","ISO885915","ISO8859_15"),t.ISO8859_16=new t(qa.ISO8859_16,18,"ISO-8859-16","ISO885916","ISO8859_16"),t.SJIS=new t(qa.SJIS,20,"SJIS","Shift_JIS"),t.Cp1250=new t(qa.Cp1250,21,"Cp1250","windows-1250"),t.Cp1251=new t(qa.Cp1251,22,"Cp1251","windows-1251"),t.Cp1252=new t(qa.Cp1252,23,"Cp1252","windows-1252"),t.Cp1256=new t(qa.Cp1256,24,"Cp1256","windows-1256"),t.UnicodeBigUnmarked=new t(qa.UnicodeBigUnmarked,25,"UnicodeBigUnmarked","UTF-16BE","UnicodeBig"),t.UTF8=new t(qa.UTF8,26,"UTF8","UTF-8"),t.ASCII=new t(qa.ASCII,Int32Array.from([27,170]),"ASCII","US-ASCII"),t.Big5=new t(qa.Big5,28,"Big5"),t.GB18030=new t(qa.GB18030,29,"GB18030","GB2312","EUC_CN","GBK"),t.EUC_KR=new t(qa.EUC_KR,30,"EUC_KR","EUC-KR"),t}(),DLe=function(){var t=function(e,r){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,a){n.__proto__=a}||function(n,a){for(var s in a)a.hasOwnProperty(s)&&(n[s]=a[s])},t(e,r)};return function(e,r){t(e,r);function n(){this.constructor=e}e.prototype=r===null?Object.create(r):(n.prototype=r.prototype,new n)}}(),xE=function(t){DLe(e,t);function e(){return t!==null&&t.apply(this,arguments)||this}return e.kind="UnsupportedOperationException",e}(cu),Bd=function(){function t(){}return t.decode=function(e,r){var n=this.encodingName(r);return this.customDecoder?this.customDecoder(e,n):typeof TextDecoder>"u"||this.shouldDecodeOnFallback(n)?this.decodeFallback(e,n):new TextDecoder(n).decode(e)},t.shouldDecodeOnFallback=function(e){return!t.isBrowser()&&e==="ISO-8859-1"},t.encode=function(e,r){var n=this.encodingName(r);return this.customEncoder?this.customEncoder(e,n):typeof TextEncoder>"u"?this.encodeFallback(e):new TextEncoder().encode(e)},t.isBrowser=function(){return typeof window<"u"&&{}.toString.call(window)==="[object Window]"},t.encodingName=function(e){return typeof e=="string"?e:e.getName()},t.encodingCharacterSet=function(e){return e instanceof Eo?e:Eo.getCharacterSetECIByName(e)},t.decodeFallback=function(e,r){var n=this.encodingCharacterSet(r);if(t.isDecodeFallbackSupported(n)){for(var a="",s=0,o=e.length;s<o;s++){var l=e[s].toString(16);l.length<2&&(l="0"+l),a+="%"+l}return decodeURIComponent(a)}if(n.equals(Eo.UnicodeBigUnmarked))return String.fromCharCode.apply(null,new Uint16Array(e.buffer));throw new xE("Encoding "+this.encodingName(r)+" not supported by fallback.")},t.isDecodeFallbackSupported=function(e){return e.equals(Eo.UTF8)||e.equals(Eo.ISO8859_1)||e.equals(Eo.ASCII)},t.encodeFallback=function(e){for(var r=btoa(unescape(encodeURIComponent(e))),n=r.split(""),a=[],s=0;s<n.length;s++)a.push(n[s].charCodeAt(0));return new Uint8Array(a)},t}(),ba=function(){function t(){}return t.castAsNonUtf8Char=function(e,r){r===void 0&&(r=null);var n=r?r.getName():this.ISO88591;return Bd.decode(new Uint8Array([e]),n)},t.guessEncoding=function(e,r){if(r!=null&&r.get(Ns.CHARACTER_SET)!==void 0)return r.get(Ns.CHARACTER_SET).toString();for(var n=e.length,a=!0,s=!0,o=!0,l=0,c=0,u=0,d=0,f=0,A=0,h=0,m=0,p=0,x=0,v=0,y=e.length>3&&e[0]===239&&e[1]===187&&e[2]===191,b=0;b<n&&(a||s||o);b++){var w=e[b]&255;o&&(l>0?w&128?l--:o=!1:w&128&&(w&64?(l++,w&32?(l++,w&16?(l++,w&8?o=!1:d++):u++):c++):o=!1)),a&&(w>127&&w<160?a=!1:w>159&&(w<192||w===215||w===247)&&v++),s&&(f>0?w<64||w===127||w>252?s=!1:f--:w===128||w===160||w>239?s=!1:w>160&&w<224?(A++,m=0,h++,h>p&&(p=h)):w>127?(f++,h=0,m++,m>x&&(x=m)):(h=0,m=0))}return o&&l>0&&(o=!1),s&&f>0&&(s=!1),o&&(y||c+u+d>0)?t.UTF8:s&&(t.ASSUME_SHIFT_JIS||p>=3||x>=3)?t.SHIFT_JIS:a&&s?p===2&&A===2||v*10>=n?t.SHIFT_JIS:t.ISO88591:a?t.ISO88591:s?t.SHIFT_JIS:o?t.UTF8:t.PLATFORM_DEFAULT_ENCODING},t.format=function(e){for(var r=[],n=1;n<arguments.length;n++)r[n-1]=arguments[n];var a=-1;function s(l,c,u,d,f,A){if(l==="%%")return"%";if(r[++a]!==void 0){l=d?parseInt(d.substr(1)):void 0;var h=f?parseInt(f.substr(1)):void 0,m;switch(A){case"s":m=r[a];break;case"c":m=r[a][0];break;case"f":m=parseFloat(r[a]).toFixed(l);break;case"p":m=parseFloat(r[a]).toPrecision(l);break;case"e":m=parseFloat(r[a]).toExponential(l);break;case"x":m=parseInt(r[a]).toString(h||16);break;case"d":m=parseFloat(parseInt(r[a],h||10).toPrecision(l)).toFixed(0);break}m=typeof m=="object"?JSON.stringify(m):(+m).toString(h);for(var p=parseInt(u),x=u&&u[0]+""=="0"?"0":" ";m.length<p;)m=c!==void 0?m+x:x+m;return m}}var o=/%(-)?(0?[0-9]+)?([.][0-9]+)?([#][0-9]+)?([scfpexd%])/g;return e.replace(o,s)},t.getBytes=function(e,r){return Bd.encode(e,r)},t.getCharCode=function(e,r){return r===void 0&&(r=0),e.charCodeAt(r)},t.getCharAt=function(e){return String.fromCharCode(e)},t.SHIFT_JIS=Eo.SJIS.getName(),t.GB2312="GB2312",t.ISO88591=Eo.ISO8859_1.getName(),t.EUC_JP="EUC_JP",t.UTF8=Eo.UTF8.getName(),t.PLATFORM_DEFAULT_ENCODING=t.UTF8,t.ASSUME_SHIFT_JIS=!1,t}(),Zn=function(){function t(e){e===void 0&&(e=""),this.value=e}return t.prototype.enableDecoding=function(e){return this.encoding=e,this},t.prototype.append=function(e){return typeof e=="string"?this.value+=e.toString():this.encoding?this.value+=ba.castAsNonUtf8Char(e,this.encoding):this.value+=String.fromCharCode(e),this},t.prototype.appendChars=function(e,r,n){for(var a=r;r<r+n;a++)this.append(e[a]);return this},t.prototype.length=function(){return this.value.length},t.prototype.charAt=function(e){return this.value.charAt(e)},t.prototype.deleteCharAt=function(e){this.value=this.value.substr(0,e)+this.value.substring(e+1)},t.prototype.setCharAt=function(e,r){this.value=this.value.substr(0,e)+r+this.value.substr(e+1)},t.prototype.substring=function(e,r){return this.value.substring(e,r)},t.prototype.setLengthToZero=function(){this.value=""},t.prototype.toString=function(){return this.value},t.prototype.insert=function(e,r){this.value=this.value.substring(0,e)+r+this.value.substring(e)},t}(),oh=function(){function t(e,r,n,a){if(this.width=e,this.height=r,this.rowSize=n,this.bits=a,r==null&&(r=e),this.height=r,e<1||r<1)throw new Pn("Both dimensions must be greater than 0");n==null&&(n=Math.floor((e+31)/32)),this.rowSize=n,a==null&&(this.bits=new Int32Array(this.rowSize*this.height))}return t.parseFromBooleanArray=function(e){for(var r=e.length,n=e[0].length,a=new t(n,r),s=0;s<r;s++)for(var o=e[s],l=0;l<n;l++)o[l]&&a.set(l,s);return a},t.parseFromString=function(e,r,n){if(e===null)throw new Pn("stringRepresentation cannot be null");for(var a=new Array(e.length),s=0,o=0,l=-1,c=0,u=0;u<e.length;)if(e.charAt(u)===`
`||e.charAt(u)==="\r"){if(s>o){if(l===-1)l=s-o;else if(s-o!==l)throw new Pn("row lengths do not match");o=s,c++}u++}else if(e.substring(u,u+r.length)===r)u+=r.length,a[s]=!0,s++;else if(e.substring(u,u+n.length)===n)u+=n.length,a[s]=!1,s++;else throw new Pn("illegal character encountered: "+e.substring(u));if(s>o){if(l===-1)l=s-o;else if(s-o!==l)throw new Pn("row lengths do not match");c++}for(var d=new t(l,c),f=0;f<s;f++)a[f]&&d.set(Math.floor(f%l),Math.floor(f/l));return d},t.prototype.get=function(e,r){var n=r*this.rowSize+Math.floor(e/32);return(this.bits[n]>>>(e&31)&1)!==0},t.prototype.set=function(e,r){var n=r*this.rowSize+Math.floor(e/32);this.bits[n]|=1<<(e&31)&4294967295},t.prototype.unset=function(e,r){var n=r*this.rowSize+Math.floor(e/32);this.bits[n]&=~(1<<(e&31)&4294967295)},t.prototype.flip=function(e,r){var n=r*this.rowSize+Math.floor(e/32);this.bits[n]^=1<<(e&31)&4294967295},t.prototype.xor=function(e){if(this.width!==e.getWidth()||this.height!==e.getHeight()||this.rowSize!==e.getRowSize())throw new Pn("input matrix dimensions do not match");for(var r=new Jo(Math.floor(this.width/32)+1),n=this.rowSize,a=this.bits,s=0,o=this.height;s<o;s++)for(var l=s*n,c=e.getRow(s,r).getBitArray(),u=0;u<n;u++)a[l+u]^=c[u]},t.prototype.clear=function(){for(var e=this.bits,r=e.length,n=0;n<r;n++)e[n]=0},t.prototype.setRegion=function(e,r,n,a){if(r<0||e<0)throw new Pn("Left and top must be nonnegative");if(a<1||n<1)throw new Pn("Height and width must be at least 1");var s=e+n,o=r+a;if(o>this.height||s>this.width)throw new Pn("The region must fit inside the matrix");for(var l=this.rowSize,c=this.bits,u=r;u<o;u++)for(var d=u*l,f=e;f<s;f++)c[d+Math.floor(f/32)]|=1<<(f&31)&4294967295},t.prototype.getRow=function(e,r){r==null||r.getSize()<this.width?r=new Jo(this.width):r.clear();for(var n=this.rowSize,a=this.bits,s=e*n,o=0;o<n;o++)r.setBulk(o*32,a[s+o]);return r},t.prototype.setRow=function(e,r){ws.arraycopy(r.getBitArray(),0,this.bits,e*this.rowSize,this.rowSize)},t.prototype.rotate180=function(){for(var e=this.getWidth(),r=this.getHeight(),n=new Jo(e),a=new Jo(e),s=0,o=Math.floor((r+1)/2);s<o;s++)n=this.getRow(s,n),a=this.getRow(r-1-s,a),n.reverse(),a.reverse(),this.setRow(s,a),this.setRow(r-1-s,n)},t.prototype.getEnclosingRectangle=function(){for(var e=this.width,r=this.height,n=this.rowSize,a=this.bits,s=e,o=r,l=-1,c=-1,u=0;u<r;u++)for(var d=0;d<n;d++){var f=a[u*n+d];if(f!==0){if(u<o&&(o=u),u>c&&(c=u),d*32<s){for(var A=0;!(f<<31-A&4294967295);)A++;d*32+A<s&&(s=d*32+A)}if(d*32+31>l){for(var A=31;!(f>>>A);)A--;d*32+A>l&&(l=d*32+A)}}}return l<s||c<o?null:Int32Array.from([s,o,l-s+1,c-o+1])},t.prototype.getTopLeftOnBit=function(){for(var e=this.rowSize,r=this.bits,n=0;n<r.length&&r[n]===0;)n++;if(n===r.length)return null;for(var a=n/e,s=n%e*32,o=r[n],l=0;!(o<<31-l&4294967295);)l++;return s+=l,Int32Array.from([s,a])},t.prototype.getBottomRightOnBit=function(){for(var e=this.rowSize,r=this.bits,n=r.length-1;n>=0&&r[n]===0;)n--;if(n<0)return null;for(var a=Math.floor(n/e),s=Math.floor(n%e)*32,o=r[n],l=31;!(o>>>l);)l--;return s+=l,Int32Array.from([s,a])},t.prototype.getWidth=function(){return this.width},t.prototype.getHeight=function(){return this.height},t.prototype.getRowSize=function(){return this.rowSize},t.prototype.equals=function(e){if(!(e instanceof t))return!1;var r=e;return this.width===r.width&&this.height===r.height&&this.rowSize===r.rowSize&&Io.equals(this.bits,r.bits)},t.prototype.hashCode=function(){var e=this.width;return e=31*e+this.width,e=31*e+this.height,e=31*e+this.rowSize,e=31*e+Io.hashCode(this.bits),e},t.prototype.toString=function(e,r,n){return e===void 0&&(e="X "),r===void 0&&(r="  "),n===void 0&&(n=`
`),this.buildToString(e,r,n)},t.prototype.buildToString=function(e,r,n){for(var a=new Zn,s=0,o=this.height;s<o;s++){for(var l=0,c=this.width;l<c;l++)a.append(this.get(l,s)?e:r);a.append(n)}return a.toString()},t.prototype.clone=function(){return new t(this.width,this.height,this.rowSize,this.bits.slice())},t}(),RLe=function(){var t=function(e,r){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,a){n.__proto__=a}||function(n,a){for(var s in a)a.hasOwnProperty(s)&&(n[s]=a[s])},t(e,r)};return function(e,r){t(e,r);function n(){this.constructor=e}e.prototype=r===null?Object.create(r):(n.prototype=r.prototype,new n)}}(),rr=function(t){RLe(e,t);function e(){return t!==null&&t.apply(this,arguments)||this}return e.getNotFoundInstance=function(){return new e},e.kind="NotFoundException",e}(cu),MLe=function(){var t=function(e,r){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,a){n.__proto__=a}||function(n,a){for(var s in a)a.hasOwnProperty(s)&&(n[s]=a[s])},t(e,r)};return function(e,r){t(e,r);function n(){this.constructor=e}e.prototype=r===null?Object.create(r):(n.prototype=r.prototype,new n)}}(),LLe=function(t){MLe(e,t);function e(r){var n=t.call(this,r)||this;return n.luminances=e.EMPTY,n.buckets=new Int32Array(e.LUMINANCE_BUCKETS),n}return e.prototype.getBlackRow=function(r,n){var a=this.getLuminanceSource(),s=a.getWidth();n==null||n.getSize()<s?n=new Jo(s):n.clear(),this.initArrays(s);for(var o=a.getRow(r,this.luminances),l=this.buckets,c=0;c<s;c++)l[(o[c]&255)>>e.LUMINANCE_SHIFT]++;var u=e.estimateBlackPoint(l);if(s<3)for(var c=0;c<s;c++)(o[c]&255)<u&&n.set(c);else for(var d=o[0]&255,f=o[1]&255,c=1;c<s-1;c++){var A=o[c+1]&255;(f*4-d-A)/2<u&&n.set(c),d=f,f=A}return n},e.prototype.getBlackMatrix=function(){var r=this.getLuminanceSource(),n=r.getWidth(),a=r.getHeight(),s=new oh(n,a);this.initArrays(n);for(var o=this.buckets,l=1;l<5;l++)for(var c=Math.floor(a*l/5),u=r.getRow(c,this.luminances),d=Math.floor(n*4/5),f=Math.floor(n/5);f<d;f++){var A=u[f]&255;o[A>>e.LUMINANCE_SHIFT]++}for(var h=e.estimateBlackPoint(o),m=r.getMatrix(),l=0;l<a;l++)for(var p=l*n,f=0;f<n;f++){var A=m[p+f]&255;A<h&&s.set(f,l)}return s},e.prototype.createBinarizer=function(r){return new e(r)},e.prototype.initArrays=function(r){this.luminances.length<r&&(this.luminances=new Uint8ClampedArray(r));for(var n=this.buckets,a=0;a<e.LUMINANCE_BUCKETS;a++)n[a]=0},e.estimateBlackPoint=function(r){for(var n=r.length,a=0,s=0,o=0,l=0;l<n;l++)r[l]>o&&(s=l,o=r[l]),r[l]>a&&(a=r[l]);for(var c=0,u=0,l=0;l<n;l++){var d=l-s,f=r[l]*d*d;f>u&&(c=l,u=f)}if(s>c){var A=s;s=c,c=A}if(c-s<=n/16)throw new rr;for(var h=c-1,m=-1,l=c-1;l>s;l--){var p=l-s,f=p*p*(c-l)*(a-r[l]);f>m&&(h=l,m=f)}return h<<e.LUMINANCE_SHIFT},e.LUMINANCE_BITS=5,e.LUMINANCE_SHIFT=8-e.LUMINANCE_BITS,e.LUMINANCE_BUCKETS=1<<e.LUMINANCE_BITS,e.EMPTY=Uint8ClampedArray.from([0]),e}(PLe),ULe=function(){var t=function(e,r){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,a){n.__proto__=a}||function(n,a){for(var s in a)a.hasOwnProperty(s)&&(n[s]=a[s])},t(e,r)};return function(e,r){t(e,r);function n(){this.constructor=e}e.prototype=r===null?Object.create(r):(n.prototype=r.prototype,new n)}}(),gse=function(t){ULe(e,t);function e(r){var n=t.call(this,r)||this;return n.matrix=null,n}return e.prototype.getBlackMatrix=function(){if(this.matrix!==null)return this.matrix;var r=this.getLuminanceSource(),n=r.getWidth(),a=r.getHeight();if(n>=e.MINIMUM_DIMENSION&&a>=e.MINIMUM_DIMENSION){var s=r.getMatrix(),o=n>>e.BLOCK_SIZE_POWER;n&e.BLOCK_SIZE_MASK&&o++;var l=a>>e.BLOCK_SIZE_POWER;a&e.BLOCK_SIZE_MASK&&l++;var c=e.calculateBlackPoints(s,o,l,n,a),u=new oh(n,a);e.calculateThresholdForBlock(s,o,l,n,a,c,u),this.matrix=u}else this.matrix=t.prototype.getBlackMatrix.call(this);return this.matrix},e.prototype.createBinarizer=function(r){return new e(r)},e.calculateThresholdForBlock=function(r,n,a,s,o,l,c){for(var u=o-e.BLOCK_SIZE,d=s-e.BLOCK_SIZE,f=0;f<a;f++){var A=f<<e.BLOCK_SIZE_POWER;A>u&&(A=u);for(var h=e.cap(f,2,a-3),m=0;m<n;m++){var p=m<<e.BLOCK_SIZE_POWER;p>d&&(p=d);for(var x=e.cap(m,2,n-3),v=0,y=-2;y<=2;y++){var b=l[h+y];v+=b[x-2]+b[x-1]+b[x]+b[x+1]+b[x+2]}var w=v/25;e.thresholdBlock(r,p,A,w,s,c)}}},e.cap=function(r,n,a){return r<n?n:r>a?a:r},e.thresholdBlock=function(r,n,a,s,o,l){for(var c=0,u=a*o+n;c<e.BLOCK_SIZE;c++,u+=o)for(var d=0;d<e.BLOCK_SIZE;d++)(r[u+d]&255)<=s&&l.set(n+d,a+c)},e.calculateBlackPoints=function(r,n,a,s,o){for(var l=o-e.BLOCK_SIZE,c=s-e.BLOCK_SIZE,u=new Array(a),d=0;d<a;d++){u[d]=new Int32Array(n);var f=d<<e.BLOCK_SIZE_POWER;f>l&&(f=l);for(var A=0;A<n;A++){var h=A<<e.BLOCK_SIZE_POWER;h>c&&(h=c);for(var m=0,p=255,x=0,v=0,y=f*s+h;v<e.BLOCK_SIZE;v++,y+=s){for(var b=0;b<e.BLOCK_SIZE;b++){var w=r[y+b]&255;m+=w,w<p&&(p=w),w>x&&(x=w)}if(x-p>e.MIN_DYNAMIC_RANGE)for(v++,y+=s;v<e.BLOCK_SIZE;v++,y+=s)for(var b=0;b<e.BLOCK_SIZE;b++)m+=r[y+b]&255}var j=m>>e.BLOCK_SIZE_POWER*2;if(x-p<=e.MIN_DYNAMIC_RANGE&&(j=p/2,d>0&&A>0)){var I=(u[d-1][A]+2*u[d][A-1]+u[d-1][A-1])/4;p<I&&(j=I)}u[d][A]=j}}return u},e.BLOCK_SIZE_POWER=3,e.BLOCK_SIZE=1<<e.BLOCK_SIZE_POWER,e.BLOCK_SIZE_MASK=e.BLOCK_SIZE-1,e.MINIMUM_DIMENSION=e.BLOCK_SIZE*5,e.MIN_DYNAMIC_RANGE=24,e}(LLe),Gw=function(){function t(e,r){this.width=e,this.height=r}return t.prototype.getWidth=function(){return this.width},t.prototype.getHeight=function(){return this.height},t.prototype.isCropSupported=function(){return!1},t.prototype.crop=function(e,r,n,a){throw new xE("This luminance source does not support cropping.")},t.prototype.isRotateSupported=function(){return!1},t.prototype.rotateCounterClockwise=function(){throw new xE("This luminance source does not support rotation by 90 degrees.")},t.prototype.rotateCounterClockwise45=function(){throw new xE("This luminance source does not support rotation by 45 degrees.")},t.prototype.toString=function(){for(var e=new Uint8ClampedArray(this.width),r=new Zn,n=0;n<this.height;n++){for(var a=this.getRow(n,e),s=0;s<this.width;s++){var o=a[s]&255,l=void 0;o<64?l="#":o<128?l="+":o<192?l=".":l=" ",r.append(l)}r.append(`
`)}return r.toString()},t}(),QLe=function(){var t=function(e,r){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,a){n.__proto__=a}||function(n,a){for(var s in a)a.hasOwnProperty(s)&&(n[s]=a[s])},t(e,r)};return function(e,r){t(e,r);function n(){this.constructor=e}e.prototype=r===null?Object.create(r):(n.prototype=r.prototype,new n)}}(),gP=function(t){QLe(e,t);function e(r){var n=t.call(this,r.getWidth(),r.getHeight())||this;return n.delegate=r,n}return e.prototype.getRow=function(r,n){for(var a=this.delegate.getRow(r,n),s=this.getWidth(),o=0;o<s;o++)a[o]=255-(a[o]&255);return a},e.prototype.getMatrix=function(){for(var r=this.delegate.getMatrix(),n=this.getWidth()*this.getHeight(),a=new Uint8ClampedArray(n),s=0;s<n;s++)a[s]=255-(r[s]&255);return a},e.prototype.isCropSupported=function(){return this.delegate.isCropSupported()},e.prototype.crop=function(r,n,a,s){return new e(this.delegate.crop(r,n,a,s))},e.prototype.isRotateSupported=function(){return this.delegate.isRotateSupported()},e.prototype.invert=function(){return this.delegate},e.prototype.rotateCounterClockwise=function(){return new e(this.delegate.rotateCounterClockwise())},e.prototype.rotateCounterClockwise45=function(){return new e(this.delegate.rotateCounterClockwise45())},e}(Gw),VLe=function(){var t=function(e,r){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,a){n.__proto__=a}||function(n,a){for(var s in a)a.hasOwnProperty(s)&&(n[s]=a[s])},t(e,r)};return function(e,r){t(e,r);function n(){this.constructor=e}e.prototype=r===null?Object.create(r):(n.prototype=r.prototype,new n)}}(),HLe=function(t){VLe(e,t);function e(r,n){n===void 0&&(n=!1);var a=t.call(this,r.width,r.height)||this;return a.canvas=r,a.tempCanvasElement=null,a.buffer=e.makeBufferFromCanvasImageData(r,n),a}return e.makeBufferFromCanvasImageData=function(r,n){n===void 0&&(n=!1);var a=r.getContext("2d").getImageData(0,0,r.width,r.height);return e.toGrayscaleBuffer(a.data,r.width,r.height,n)},e.toGrayscaleBuffer=function(r,n,a,s){s===void 0&&(s=!1);var o=new Uint8ClampedArray(n*a);if(e.FRAME_INDEX=!e.FRAME_INDEX,e.FRAME_INDEX||!s)for(var l=0,c=0,u=r.length;l<u;l+=4,c++){var d=void 0,f=r[l+3];if(f===0)d=255;else{var A=r[l],h=r[l+1],m=r[l+2];d=306*A+601*h+117*m+512>>10}o[c]=d}else for(var l=0,c=0,p=r.length;l<p;l+=4,c++){var d=void 0,f=r[l+3];if(f===0)d=255;else{var A=r[l],h=r[l+1],m=r[l+2];d=306*A+601*h+117*m+512>>10}o[c]=255-d}return o},e.prototype.getRow=function(r,n){if(r<0||r>=this.getHeight())throw new Pn("Requested row is outside the image: "+r);var a=this.getWidth(),s=r*a;return n===null?n=this.buffer.slice(s,s+a):(n.length<a&&(n=new Uint8ClampedArray(a)),n.set(this.buffer.slice(s,s+a))),n},e.prototype.getMatrix=function(){return this.buffer},e.prototype.isCropSupported=function(){return!0},e.prototype.crop=function(r,n,a,s){return t.prototype.crop.call(this,r,n,a,s),this},e.prototype.isRotateSupported=function(){return!0},e.prototype.rotateCounterClockwise=function(){return this.rotate(-90),this},e.prototype.rotateCounterClockwise45=function(){return this.rotate(-45),this},e.prototype.getTempCanvasElement=function(){if(this.tempCanvasElement===null){var r=this.canvas.ownerDocument.createElement("canvas");r.width=this.canvas.width,r.height=this.canvas.height,this.tempCanvasElement=r}return this.tempCanvasElement},e.prototype.rotate=function(r){var n=this.getTempCanvasElement(),a=n.getContext("2d"),s=r*e.DEGREE_TO_RADIANS,o=this.canvas.width,l=this.canvas.height,c=Math.ceil(Math.abs(Math.cos(s))*o+Math.abs(Math.sin(s))*l),u=Math.ceil(Math.abs(Math.sin(s))*o+Math.abs(Math.cos(s))*l);return n.width=c,n.height=u,a.translate(c/2,u/2),a.rotate(s),a.drawImage(this.canvas,o/-2,l/-2),this.buffer=e.makeBufferFromCanvasImageData(n),this},e.prototype.invert=function(){return new gP(this)},e.DEGREE_TO_RADIANS=Math.PI/180,e.FRAME_INDEX=!0,e}(Gw),$Le=function(){function t(e,r,n){this.deviceId=e,this.label=r,this.kind="videoinput",this.groupId=n||void 0}return t.prototype.toJSON=function(){return{kind:this.kind,groupId:this.groupId,deviceId:this.deviceId,label:this.label}},t}(),Ac=function(t,e,r,n){function a(s){return s instanceof r?s:new r(function(o){o(s)})}return new(r||(r=Promise))(function(s,o){function l(d){try{u(n.next(d))}catch(f){o(f)}}function c(d){try{u(n.throw(d))}catch(f){o(f)}}function u(d){d.done?s(d.value):a(d.value).then(l,c)}u((n=n.apply(t,e||[])).next())})},mc=function(t,e){var r={label:0,sent:function(){if(s[0]&1)throw s[1];return s[1]},trys:[],ops:[]},n,a,s,o;return o={next:l(0),throw:l(1),return:l(2)},typeof Symbol=="function"&&(o[Symbol.iterator]=function(){return this}),o;function l(u){return function(d){return c([u,d])}}function c(u){if(n)throw new TypeError("Generator is already executing.");for(;r;)try{if(n=1,a&&(s=u[0]&2?a.return:u[0]?a.throw||((s=a.return)&&s.call(a),0):a.next)&&!(s=s.call(a,u[1])).done)return s;switch(a=0,s&&(u=[u[0]&2,s.value]),u[0]){case 0:case 1:s=u;break;case 4:return r.label++,{value:u[1],done:!1};case 5:r.label++,a=u[1],u=[0];continue;case 7:u=r.ops.pop(),r.trys.pop();continue;default:if(s=r.trys,!(s=s.length>0&&s[s.length-1])&&(u[0]===6||u[0]===2)){r=0;continue}if(u[0]===3&&(!s||u[1]>s[0]&&u[1]<s[3])){r.label=u[1];break}if(u[0]===6&&r.label<s[1]){r.label=s[1],s=u;break}if(s&&r.label<s[2]){r.label=s[2],r.ops.push(u);break}s[2]&&r.ops.pop(),r.trys.pop();continue}u=e.call(t,r)}catch(d){u=[6,d],a=0}finally{n=s=0}if(u[0]&5)throw u[1];return{value:u[0]?u[1]:void 0,done:!0}}},GLe=function(t){var e=typeof Symbol=="function"&&Symbol.iterator,r=e&&t[e],n=0;if(r)return r.call(t);if(t&&typeof t.length=="number")return{next:function(){return t&&n>=t.length&&(t=void 0),{value:t&&t[n++],done:!t}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")},w1=function(){function t(e,r,n){r===void 0&&(r=500),this.reader=e,this.timeBetweenScansMillis=r,this._hints=n,this._stopContinuousDecode=!1,this._stopAsyncDecode=!1,this._timeBetweenDecodingAttempts=0}return Object.defineProperty(t.prototype,"hasNavigator",{get:function(){return typeof navigator<"u"},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"isMediaDevicesSuported",{get:function(){return this.hasNavigator&&!!navigator.mediaDevices},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"canEnumerateDevices",{get:function(){return!!(this.isMediaDevicesSuported&&navigator.mediaDevices.enumerateDevices)},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"timeBetweenDecodingAttempts",{get:function(){return this._timeBetweenDecodingAttempts},set:function(e){this._timeBetweenDecodingAttempts=e<0?0:e},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"hints",{get:function(){return this._hints},set:function(e){this._hints=e||null},enumerable:!1,configurable:!0}),t.prototype.listVideoInputDevices=function(){return Ac(this,void 0,void 0,function(){var e,r,n,a,s,o,l,c,u,d,f,A;return mc(this,function(h){switch(h.label){case 0:if(!this.hasNavigator)throw new Error("Can't enumerate devices, navigator is not present.");if(!this.canEnumerateDevices)throw new Error("Can't enumerate devices, method not supported.");return[4,navigator.mediaDevices.enumerateDevices()];case 1:e=h.sent(),r=[];try{for(n=GLe(e),a=n.next();!a.done;a=n.next())s=a.value,o=s.kind==="video"?"videoinput":s.kind,o==="videoinput"&&(l=s.deviceId||s.id,c=s.label||"Video device "+(r.length+1),u=s.groupId,d={deviceId:l,label:c,kind:o,groupId:u},r.push(d))}catch(m){f={error:m}}finally{try{a&&!a.done&&(A=n.return)&&A.call(n)}finally{if(f)throw f.error}}return[2,r]}})})},t.prototype.getVideoInputDevices=function(){return Ac(this,void 0,void 0,function(){var e;return mc(this,function(r){switch(r.label){case 0:return[4,this.listVideoInputDevices()];case 1:return e=r.sent(),[2,e.map(function(n){return new $Le(n.deviceId,n.label)})]}})})},t.prototype.findDeviceById=function(e){return Ac(this,void 0,void 0,function(){var r;return mc(this,function(n){switch(n.label){case 0:return[4,this.listVideoInputDevices()];case 1:return r=n.sent(),r?[2,r.find(function(a){return a.deviceId===e})]:[2,null]}})})},t.prototype.decodeFromInputVideoDevice=function(e,r){return Ac(this,void 0,void 0,function(){return mc(this,function(n){switch(n.label){case 0:return[4,this.decodeOnceFromVideoDevice(e,r)];case 1:return[2,n.sent()]}})})},t.prototype.decodeOnceFromVideoDevice=function(e,r){return Ac(this,void 0,void 0,function(){var n,a;return mc(this,function(s){switch(s.label){case 0:return this.reset(),e?n={deviceId:{exact:e}}:n={facingMode:"environment"},a={video:n},[4,this.decodeOnceFromConstraints(a,r)];case 1:return[2,s.sent()]}})})},t.prototype.decodeOnceFromConstraints=function(e,r){return Ac(this,void 0,void 0,function(){var n;return mc(this,function(a){switch(a.label){case 0:return[4,navigator.mediaDevices.getUserMedia(e)];case 1:return n=a.sent(),[4,this.decodeOnceFromStream(n,r)];case 2:return[2,a.sent()]}})})},t.prototype.decodeOnceFromStream=function(e,r){return Ac(this,void 0,void 0,function(){var n,a;return mc(this,function(s){switch(s.label){case 0:return this.reset(),[4,this.attachStreamToVideo(e,r)];case 1:return n=s.sent(),[4,this.decodeOnce(n)];case 2:return a=s.sent(),[2,a]}})})},t.prototype.decodeFromInputVideoDeviceContinuously=function(e,r,n){return Ac(this,void 0,void 0,function(){return mc(this,function(a){switch(a.label){case 0:return[4,this.decodeFromVideoDevice(e,r,n)];case 1:return[2,a.sent()]}})})},t.prototype.decodeFromVideoDevice=function(e,r,n){return Ac(this,void 0,void 0,function(){var a,s;return mc(this,function(o){switch(o.label){case 0:return e?a={deviceId:{exact:e}}:a={facingMode:"environment"},s={video:a},[4,this.decodeFromConstraints(s,r,n)];case 1:return[2,o.sent()]}})})},t.prototype.decodeFromConstraints=function(e,r,n){return Ac(this,void 0,void 0,function(){var a;return mc(this,function(s){switch(s.label){case 0:return[4,navigator.mediaDevices.getUserMedia(e)];case 1:return a=s.sent(),[4,this.decodeFromStream(a,r,n)];case 2:return[2,s.sent()]}})})},t.prototype.decodeFromStream=function(e,r,n){return Ac(this,void 0,void 0,function(){var a;return mc(this,function(s){switch(s.label){case 0:return this.reset(),[4,this.attachStreamToVideo(e,r)];case 1:return a=s.sent(),[4,this.decodeContinuously(a,n)];case 2:return[2,s.sent()]}})})},t.prototype.stopAsyncDecode=function(){this._stopAsyncDecode=!0},t.prototype.stopContinuousDecode=function(){this._stopContinuousDecode=!0},t.prototype.attachStreamToVideo=function(e,r){return Ac(this,void 0,void 0,function(){var n;return mc(this,function(a){switch(a.label){case 0:return n=this.prepareVideoElement(r),this.addVideoSource(n,e),this.videoElement=n,this.stream=e,[4,this.playVideoOnLoadAsync(n)];case 1:return a.sent(),[2,n]}})})},t.prototype.playVideoOnLoadAsync=function(e){var r=this;return new Promise(function(n,a){return r.playVideoOnLoad(e,function(){return n()})})},t.prototype.playVideoOnLoad=function(e,r){var n=this;this.videoEndedListener=function(){return n.stopStreams()},this.videoCanPlayListener=function(){return n.tryPlayVideo(e)},e.addEventListener("ended",this.videoEndedListener),e.addEventListener("canplay",this.videoCanPlayListener),e.addEventListener("playing",r),this.tryPlayVideo(e)},t.prototype.isVideoPlaying=function(e){return e.currentTime>0&&!e.paused&&!e.ended&&e.readyState>2},t.prototype.tryPlayVideo=function(e){return Ac(this,void 0,void 0,function(){return mc(this,function(r){switch(r.label){case 0:if(this.isVideoPlaying(e))return console.warn("Trying to play video that is already playing."),[2];r.label=1;case 1:return r.trys.push([1,3,,4]),[4,e.play()];case 2:return r.sent(),[3,4];case 3:return r.sent(),console.warn("It was not possible to play the video."),[3,4];case 4:return[2]}})})},t.prototype.getMediaElement=function(e,r){var n=document.getElementById(e);if(!n)throw new Li("element with id '"+e+"' not found");if(n.nodeName.toLowerCase()!==r.toLowerCase())throw new Li("element with id '"+e+"' must be an "+r+" element");return n},t.prototype.decodeFromImage=function(e,r){if(!e&&!r)throw new Li("either imageElement with a src set or an url must be provided");return r&&!e?this.decodeFromImageUrl(r):this.decodeFromImageElement(e)},t.prototype.decodeFromVideo=function(e,r){if(!e&&!r)throw new Li("Either an element with a src set or an URL must be provided");return r&&!e?this.decodeFromVideoUrl(r):this.decodeFromVideoElement(e)},t.prototype.decodeFromVideoContinuously=function(e,r,n){if(e===void 0&&r===void 0)throw new Li("Either an element with a src set or an URL must be provided");return r&&!e?this.decodeFromVideoUrlContinuously(r,n):this.decodeFromVideoElementContinuously(e,n)},t.prototype.decodeFromImageElement=function(e){if(!e)throw new Li("An image element must be provided.");this.reset();var r=this.prepareImageElement(e);this.imageElement=r;var n;return this.isImageLoaded(r)?n=this.decodeOnce(r,!1,!0):n=this._decodeOnLoadImage(r),n},t.prototype.decodeFromVideoElement=function(e){var r=this._decodeFromVideoElementSetup(e);return this._decodeOnLoadVideo(r)},t.prototype.decodeFromVideoElementContinuously=function(e,r){var n=this._decodeFromVideoElementSetup(e);return this._decodeOnLoadVideoContinuously(n,r)},t.prototype._decodeFromVideoElementSetup=function(e){if(!e)throw new Li("A video element must be provided.");this.reset();var r=this.prepareVideoElement(e);return this.videoElement=r,r},t.prototype.decodeFromImageUrl=function(e){if(!e)throw new Li("An URL must be provided.");this.reset();var r=this.prepareImageElement();this.imageElement=r;var n=this._decodeOnLoadImage(r);return r.src=e,n},t.prototype.decodeFromVideoUrl=function(e){if(!e)throw new Li("An URL must be provided.");this.reset();var r=this.prepareVideoElement(),n=this.decodeFromVideoElement(r);return r.src=e,n},t.prototype.decodeFromVideoUrlContinuously=function(e,r){if(!e)throw new Li("An URL must be provided.");this.reset();var n=this.prepareVideoElement(),a=this.decodeFromVideoElementContinuously(n,r);return n.src=e,a},t.prototype._decodeOnLoadImage=function(e){var r=this;return new Promise(function(n,a){r.imageLoadedListener=function(){return r.decodeOnce(e,!1,!0).then(n,a)},e.addEventListener("load",r.imageLoadedListener)})},t.prototype._decodeOnLoadVideo=function(e){return Ac(this,void 0,void 0,function(){return mc(this,function(r){switch(r.label){case 0:return[4,this.playVideoOnLoadAsync(e)];case 1:return r.sent(),[4,this.decodeOnce(e)];case 2:return[2,r.sent()]}})})},t.prototype._decodeOnLoadVideoContinuously=function(e,r){return Ac(this,void 0,void 0,function(){return mc(this,function(n){switch(n.label){case 0:return[4,this.playVideoOnLoadAsync(e)];case 1:return n.sent(),this.decodeContinuously(e,r),[2]}})})},t.prototype.isImageLoaded=function(e){return!(!e.complete||e.naturalWidth===0)},t.prototype.prepareImageElement=function(e){var r;return typeof e>"u"&&(r=document.createElement("img"),r.width=200,r.height=200),typeof e=="string"&&(r=this.getMediaElement(e,"img")),e instanceof HTMLImageElement&&(r=e),r},t.prototype.prepareVideoElement=function(e){var r;return!e&&typeof document<"u"&&(r=document.createElement("video"),r.width=200,r.height=200),typeof e=="string"&&(r=this.getMediaElement(e,"video")),e instanceof HTMLVideoElement&&(r=e),r.setAttribute("autoplay","true"),r.setAttribute("muted","true"),r.setAttribute("playsinline","true"),r},t.prototype.decodeOnce=function(e,r,n){var a=this;r===void 0&&(r=!0),n===void 0&&(n=!0),this._stopAsyncDecode=!1;var s=function(o,l){if(a._stopAsyncDecode){l(new rr("Video stream has ended before any code could be detected.")),a._stopAsyncDecode=void 0;return}try{var c=a.decode(e);o(c)}catch(A){var u=r&&A instanceof rr,d=A instanceof so||A instanceof Hr,f=d&&n;if(u||f)return setTimeout(s,a._timeBetweenDecodingAttempts,o,l);l(A)}};return new Promise(function(o,l){return s(o,l)})},t.prototype.decodeContinuously=function(e,r){var n=this;this._stopContinuousDecode=!1;var a=function(){if(n._stopContinuousDecode){n._stopContinuousDecode=void 0;return}try{var s=n.decode(e);r(s,null),setTimeout(a,n.timeBetweenScansMillis)}catch(c){r(null,c);var o=c instanceof so||c instanceof Hr,l=c instanceof rr;(o||l)&&setTimeout(a,n._timeBetweenDecodingAttempts)}};a()},t.prototype.decode=function(e){var r=this.createBinaryBitmap(e);return this.decodeBitmap(r)},t.prototype.createBinaryBitmap=function(e){this.getCaptureCanvasContext(e);var r=!1;e instanceof HTMLVideoElement?(this.drawFrameOnCanvas(e),r=!0):this.drawImageOnCanvas(e);var n=this.getCaptureCanvas(e),a=new HLe(n,r),s=new gse(a);return new pse(s)},t.prototype.getCaptureCanvasContext=function(e){if(!this.captureCanvasContext){var r=this.getCaptureCanvas(e),n=void 0;try{n=r.getContext("2d",{willReadFrequently:!0})}catch{n=r.getContext("2d")}this.captureCanvasContext=n}return this.captureCanvasContext},t.prototype.getCaptureCanvas=function(e){if(!this.captureCanvas){var r=this.createCaptureCanvas(e);this.captureCanvas=r}return this.captureCanvas},t.prototype.drawFrameOnCanvas=function(e,r,n){r===void 0&&(r={sx:0,sy:0,sWidth:e.videoWidth,sHeight:e.videoHeight,dx:0,dy:0,dWidth:e.videoWidth,dHeight:e.videoHeight}),n===void 0&&(n=this.captureCanvasContext),n.drawImage(e,r.sx,r.sy,r.sWidth,r.sHeight,r.dx,r.dy,r.dWidth,r.dHeight)},t.prototype.drawImageOnCanvas=function(e,r,n){r===void 0&&(r={sx:0,sy:0,sWidth:e.naturalWidth,sHeight:e.naturalHeight,dx:0,dy:0,dWidth:e.naturalWidth,dHeight:e.naturalHeight}),n===void 0&&(n=this.captureCanvasContext),n.drawImage(e,r.sx,r.sy,r.sWidth,r.sHeight,r.dx,r.dy,r.dWidth,r.dHeight)},t.prototype.decodeBitmap=function(e){return this.reader.decode(e,this._hints)},t.prototype.createCaptureCanvas=function(e){if(typeof document>"u")return this._destroyCaptureCanvas(),null;var r=document.createElement("canvas"),n,a;return typeof e<"u"&&(e instanceof HTMLVideoElement?(n=e.videoWidth,a=e.videoHeight):e instanceof HTMLImageElement&&(n=e.naturalWidth||e.width,a=e.naturalHeight||e.height)),r.style.width=n+"px",r.style.height=a+"px",r.width=n,r.height=a,r},t.prototype.stopStreams=function(){this.stream&&(this.stream.getVideoTracks().forEach(function(e){return e.stop()}),this.stream=void 0),this._stopAsyncDecode===!1&&this.stopAsyncDecode(),this._stopContinuousDecode===!1&&this.stopContinuousDecode()},t.prototype.reset=function(){this.stopStreams(),this._destroyVideoElement(),this._destroyImageElement(),this._destroyCaptureCanvas()},t.prototype._destroyVideoElement=function(){this.videoElement&&(typeof this.videoEndedListener<"u"&&this.videoElement.removeEventListener("ended",this.videoEndedListener),typeof this.videoPlayingEventListener<"u"&&this.videoElement.removeEventListener("playing",this.videoPlayingEventListener),typeof this.videoCanPlayListener<"u"&&this.videoElement.removeEventListener("loadedmetadata",this.videoCanPlayListener),this.cleanVideoSource(this.videoElement),this.videoElement=void 0)},t.prototype._destroyImageElement=function(){this.imageElement&&(this.imageLoadedListener!==void 0&&this.imageElement.removeEventListener("load",this.imageLoadedListener),this.imageElement.src=void 0,this.imageElement.removeAttribute("src"),this.imageElement=void 0)},t.prototype._destroyCaptureCanvas=function(){this.captureCanvasContext=void 0,this.captureCanvas=void 0},t.prototype.addVideoSource=function(e,r){try{e.srcObject=r}catch{e.src=URL.createObjectURL(r)}},t.prototype.cleanVideoSource=function(e){try{e.srcObject=null}catch{e.src=""}this.videoElement.removeAttribute("src")},t}(),cc=function(){function t(e,r,n,a,s,o){n===void 0&&(n=r==null?0:8*r.length),o===void 0&&(o=ws.currentTimeMillis()),this.text=e,this.rawBytes=r,this.numBits=n,this.resultPoints=a,this.format=s,this.timestamp=o,this.text=e,this.rawBytes=r,n==null?this.numBits=r==null?0:8*r.length:this.numBits=n,this.resultPoints=a,this.format=s,this.resultMetadata=null,o==null?this.timestamp=ws.currentTimeMillis():this.timestamp=o}return t.prototype.getText=function(){return this.text},t.prototype.getRawBytes=function(){return this.rawBytes},t.prototype.getNumBits=function(){return this.numBits},t.prototype.getResultPoints=function(){return this.resultPoints},t.prototype.getBarcodeFormat=function(){return this.format},t.prototype.getResultMetadata=function(){return this.resultMetadata},t.prototype.putMetadata=function(e,r){this.resultMetadata===null&&(this.resultMetadata=new Map),this.resultMetadata.set(e,r)},t.prototype.putAllMetadata=function(e){e!==null&&(this.resultMetadata===null?this.resultMetadata=e:this.resultMetadata=new Map(e))},t.prototype.addResultPoints=function(e){var r=this.resultPoints;if(r===null)this.resultPoints=e;else if(e!==null&&e.length>0){var n=new Array(r.length+e.length);ws.arraycopy(r,0,n,0,r.length),ws.arraycopy(e,0,n,r.length,e.length),this.resultPoints=n}},t.prototype.getTimestamp=function(){return this.timestamp},t.prototype.toString=function(){return this.text},t}(),oF;(function(t){t[t.AZTEC=0]="AZTEC",t[t.CODABAR=1]="CODABAR",t[t.CODE_39=2]="CODE_39",t[t.CODE_93=3]="CODE_93",t[t.CODE_128=4]="CODE_128",t[t.DATA_MATRIX=5]="DATA_MATRIX",t[t.EAN_8=6]="EAN_8",t[t.EAN_13=7]="EAN_13",t[t.ITF=8]="ITF",t[t.MAXICODE=9]="MAXICODE",t[t.PDF_417=10]="PDF_417",t[t.QR_CODE=11]="QR_CODE",t[t.RSS_14=12]="RSS_14",t[t.RSS_EXPANDED=13]="RSS_EXPANDED",t[t.UPC_A=14]="UPC_A",t[t.UPC_E=15]="UPC_E",t[t.UPC_EAN_EXTENSION=16]="UPC_EAN_EXTENSION"})(oF||(oF={}));const jn=oF;var lF;(function(t){t[t.OTHER=0]="OTHER",t[t.ORIENTATION=1]="ORIENTATION",t[t.BYTE_SEGMENTS=2]="BYTE_SEGMENTS",t[t.ERROR_CORRECTION_LEVEL=3]="ERROR_CORRECTION_LEVEL",t[t.ISSUE_NUMBER=4]="ISSUE_NUMBER",t[t.SUGGESTED_PRICE=5]="SUGGESTED_PRICE",t[t.POSSIBLE_COUNTRY=6]="POSSIBLE_COUNTRY",t[t.UPC_EAN_EXTENSION=7]="UPC_EAN_EXTENSION",t[t.PDF417_EXTRA_METADATA=8]="PDF417_EXTRA_METADATA",t[t.STRUCTURED_APPEND_SEQUENCE=9]="STRUCTURED_APPEND_SEQUENCE",t[t.STRUCTURED_APPEND_PARITY=10]="STRUCTURED_APPEND_PARITY"})(lF||(lF={}));const Il=lF;var xP=function(){function t(e,r,n,a,s,o){s===void 0&&(s=-1),o===void 0&&(o=-1),this.rawBytes=e,this.text=r,this.byteSegments=n,this.ecLevel=a,this.structuredAppendSequenceNumber=s,this.structuredAppendParity=o,this.numBits=e==null?0:8*e.length}return t.prototype.getRawBytes=function(){return this.rawBytes},t.prototype.getNumBits=function(){return this.numBits},t.prototype.setNumBits=function(e){this.numBits=e},t.prototype.getText=function(){return this.text},t.prototype.getByteSegments=function(){return this.byteSegments},t.prototype.getECLevel=function(){return this.ecLevel},t.prototype.getErrorsCorrected=function(){return this.errorsCorrected},t.prototype.setErrorsCorrected=function(e){this.errorsCorrected=e},t.prototype.getErasures=function(){return this.erasures},t.prototype.setErasures=function(e){this.erasures=e},t.prototype.getOther=function(){return this.other},t.prototype.setOther=function(e){this.other=e},t.prototype.hasStructuredAppend=function(){return this.structuredAppendParity>=0&&this.structuredAppendSequenceNumber>=0},t.prototype.getStructuredAppendParity=function(){return this.structuredAppendParity},t.prototype.getStructuredAppendSequenceNumber=function(){return this.structuredAppendSequenceNumber},t}(),Yy=function(){function t(){}return t.prototype.exp=function(e){return this.expTable[e]},t.prototype.log=function(e){if(e===0)throw new Pn;return this.logTable[e]},t.addOrSubtract=function(e,r){return e^r},t}(),fm=function(){function t(e,r){if(r.length===0)throw new Pn;this.field=e;var n=r.length;if(n>1&&r[0]===0){for(var a=1;a<n&&r[a]===0;)a++;a===n?this.coefficients=Int32Array.from([0]):(this.coefficients=new Int32Array(n-a),ws.arraycopy(r,a,this.coefficients,0,this.coefficients.length))}else this.coefficients=r}return t.prototype.getCoefficients=function(){return this.coefficients},t.prototype.getDegree=function(){return this.coefficients.length-1},t.prototype.isZero=function(){return this.coefficients[0]===0},t.prototype.getCoefficient=function(e){return this.coefficients[this.coefficients.length-1-e]},t.prototype.evaluateAt=function(e){if(e===0)return this.getCoefficient(0);var r=this.coefficients,n;if(e===1){n=0;for(var a=0,s=r.length;a!==s;a++){var o=r[a];n=Yy.addOrSubtract(n,o)}return n}n=r[0];for(var l=r.length,c=this.field,a=1;a<l;a++)n=Yy.addOrSubtract(c.multiply(e,n),r[a]);return n},t.prototype.addOrSubtract=function(e){if(!this.field.equals(e.field))throw new Pn("GenericGFPolys do not have same GenericGF field");if(this.isZero())return e;if(e.isZero())return this;var r=this.coefficients,n=e.coefficients;if(r.length>n.length){var a=r;r=n,n=a}var s=new Int32Array(n.length),o=n.length-r.length;ws.arraycopy(n,0,s,0,o);for(var l=o;l<n.length;l++)s[l]=Yy.addOrSubtract(r[l-o],n[l]);return new t(this.field,s)},t.prototype.multiply=function(e){if(!this.field.equals(e.field))throw new Pn("GenericGFPolys do not have same GenericGF field");if(this.isZero()||e.isZero())return this.field.getZero();for(var r=this.coefficients,n=r.length,a=e.coefficients,s=a.length,o=new Int32Array(n+s-1),l=this.field,c=0;c<n;c++)for(var u=r[c],d=0;d<s;d++)o[c+d]=Yy.addOrSubtract(o[c+d],l.multiply(u,a[d]));return new t(l,o)},t.prototype.multiplyScalar=function(e){if(e===0)return this.field.getZero();if(e===1)return this;for(var r=this.coefficients.length,n=this.field,a=new Int32Array(r),s=this.coefficients,o=0;o<r;o++)a[o]=n.multiply(s[o],e);return new t(n,a)},t.prototype.multiplyByMonomial=function(e,r){if(e<0)throw new Pn;if(r===0)return this.field.getZero();for(var n=this.coefficients,a=n.length,s=new Int32Array(a+e),o=this.field,l=0;l<a;l++)s[l]=o.multiply(n[l],r);return new t(o,s)},t.prototype.divide=function(e){if(!this.field.equals(e.field))throw new Pn("GenericGFPolys do not have same GenericGF field");if(e.isZero())throw new Pn("Divide by 0");for(var r=this.field,n=r.getZero(),a=this,s=e.getCoefficient(e.getDegree()),o=r.inverse(s);a.getDegree()>=e.getDegree()&&!a.isZero();){var l=a.getDegree()-e.getDegree(),c=r.multiply(a.getCoefficient(a.getDegree()),o),u=e.multiplyByMonomial(l,c),d=r.buildMonomial(l,c);n=n.addOrSubtract(d),a=a.addOrSubtract(u)}return[n,a]},t.prototype.toString=function(){for(var e="",r=this.getDegree();r>=0;r--){var n=this.getCoefficient(r);if(n!==0){if(n<0?(e+=" - ",n=-n):e.length>0&&(e+=" + "),r===0||n!==1){var a=this.field.log(n);a===0?e+="1":a===1?e+="a":(e+="a^",e+=a)}r!==0&&(r===1?e+="x":(e+="x^",e+=r))}}return e},t}(),KLe=function(){var t=function(e,r){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,a){n.__proto__=a}||function(n,a){for(var s in a)a.hasOwnProperty(s)&&(n[s]=a[s])},t(e,r)};return function(e,r){t(e,r);function n(){this.constructor=e}e.prototype=r===null?Object.create(r):(n.prototype=r.prototype,new n)}}(),xse=function(t){KLe(e,t);function e(){return t!==null&&t.apply(this,arguments)||this}return e.kind="ArithmeticException",e}(cu),qLe=function(){var t=function(e,r){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,a){n.__proto__=a}||function(n,a){for(var s in a)a.hasOwnProperty(s)&&(n[s]=a[s])},t(e,r)};return function(e,r){t(e,r);function n(){this.constructor=e}e.prototype=r===null?Object.create(r):(n.prototype=r.prototype,new n)}}(),Jc=function(t){qLe(e,t);function e(r,n,a){var s=t.call(this)||this;s.primitive=r,s.size=n,s.generatorBase=a;for(var o=new Int32Array(n),l=1,c=0;c<n;c++)o[c]=l,l*=2,l>=n&&(l^=r,l&=n-1);s.expTable=o;for(var u=new Int32Array(n),c=0;c<n-1;c++)u[o[c]]=c;return s.logTable=u,s.zero=new fm(s,Int32Array.from([0])),s.one=new fm(s,Int32Array.from([1])),s}return e.prototype.getZero=function(){return this.zero},e.prototype.getOne=function(){return this.one},e.prototype.buildMonomial=function(r,n){if(r<0)throw new Pn;if(n===0)return this.zero;var a=new Int32Array(r+1);return a[0]=n,new fm(this,a)},e.prototype.inverse=function(r){if(r===0)throw new xse;return this.expTable[this.size-this.logTable[r]-1]},e.prototype.multiply=function(r,n){return r===0||n===0?0:this.expTable[(this.logTable[r]+this.logTable[n])%(this.size-1)]},e.prototype.getSize=function(){return this.size},e.prototype.getGeneratorBase=function(){return this.generatorBase},e.prototype.toString=function(){return"GF(0x"+sa.toHexString(this.primitive)+","+this.size+")"},e.prototype.equals=function(r){return r===this},e.AZTEC_DATA_12=new e(4201,4096,1),e.AZTEC_DATA_10=new e(1033,1024,1),e.AZTEC_DATA_6=new e(67,64,1),e.AZTEC_PARAM=new e(19,16,1),e.QR_CODE_FIELD_256=new e(285,256,0),e.DATA_MATRIX_FIELD_256=new e(301,256,1),e.AZTEC_DATA_8=e.DATA_MATRIX_FIELD_256,e.MAXICODE_FIELD_64=e.AZTEC_DATA_6,e}(Yy),zLe=function(){var t=function(e,r){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,a){n.__proto__=a}||function(n,a){for(var s in a)a.hasOwnProperty(s)&&(n[s]=a[s])},t(e,r)};return function(e,r){t(e,r);function n(){this.constructor=e}e.prototype=r===null?Object.create(r):(n.prototype=r.prototype,new n)}}(),i_=function(t){zLe(e,t);function e(){return t!==null&&t.apply(this,arguments)||this}return e.kind="ReedSolomonException",e}(cu),WLe=function(){var t=function(e,r){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,a){n.__proto__=a}||function(n,a){for(var s in a)a.hasOwnProperty(s)&&(n[s]=a[s])},t(e,r)};return function(e,r){t(e,r);function n(){this.constructor=e}e.prototype=r===null?Object.create(r):(n.prototype=r.prototype,new n)}}(),Kw=function(t){WLe(e,t);function e(){return t!==null&&t.apply(this,arguments)||this}return e.kind="IllegalStateException",e}(cu),vP=function(){function t(e){this.field=e}return t.prototype.decode=function(e,r){for(var n=this.field,a=new fm(n,e),s=new Int32Array(r),o=!0,l=0;l<r;l++){var c=a.evaluateAt(n.exp(l+n.getGeneratorBase()));s[s.length-1-l]=c,c!==0&&(o=!1)}if(!o)for(var u=new fm(n,s),d=this.runEuclideanAlgorithm(n.buildMonomial(r,1),u,r),f=d[0],A=d[1],h=this.findErrorLocations(f),m=this.findErrorMagnitudes(A,h),l=0;l<h.length;l++){var p=e.length-1-n.log(h[l]);if(p<0)throw new i_("Bad error location");e[p]=Jc.addOrSubtract(e[p],m[l])}},t.prototype.runEuclideanAlgorithm=function(e,r,n){if(e.getDegree()<r.getDegree()){var a=e;e=r,r=a}for(var s=this.field,o=e,l=r,c=s.getZero(),u=s.getOne();l.getDegree()>=(n/2|0);){var d=o,f=c;if(o=l,c=u,o.isZero())throw new i_("r_{i-1} was zero");l=d;for(var A=s.getZero(),h=o.getCoefficient(o.getDegree()),m=s.inverse(h);l.getDegree()>=o.getDegree()&&!l.isZero();){var p=l.getDegree()-o.getDegree(),x=s.multiply(l.getCoefficient(l.getDegree()),m);A=A.addOrSubtract(s.buildMonomial(p,x)),l=l.addOrSubtract(o.multiplyByMonomial(p,x))}if(u=A.multiply(c).addOrSubtract(f),l.getDegree()>=o.getDegree())throw new Kw("Division algorithm failed to reduce polynomial?")}var v=u.getCoefficient(0);if(v===0)throw new i_("sigmaTilde(0) was zero");var y=s.inverse(v),b=u.multiplyScalar(y),w=l.multiplyScalar(y);return[b,w]},t.prototype.findErrorLocations=function(e){var r=e.getDegree();if(r===1)return Int32Array.from([e.getCoefficient(1)]);for(var n=new Int32Array(r),a=0,s=this.field,o=1;o<s.getSize()&&a<r;o++)e.evaluateAt(o)===0&&(n[a]=s.inverse(o),a++);if(a!==r)throw new i_("Error locator degree does not match number of roots");return n},t.prototype.findErrorMagnitudes=function(e,r){for(var n=r.length,a=new Int32Array(n),s=this.field,o=0;o<n;o++){for(var l=s.inverse(r[o]),c=1,u=0;u<n;u++)if(o!==u){var d=s.multiply(r[u],l),f=d&1?d&-2:d|1;c=s.multiply(c,f)}a[o]=s.multiply(e.evaluateAt(l),s.inverse(c)),s.getGeneratorBase()!==0&&(a[o]=s.multiply(a[o],l))}return a},t}(),pl;(function(t){t[t.UPPER=0]="UPPER",t[t.LOWER=1]="LOWER",t[t.MIXED=2]="MIXED",t[t.DIGIT=3]="DIGIT",t[t.PUNCT=4]="PUNCT",t[t.BINARY=5]="BINARY"})(pl||(pl={}));var C$=function(){function t(){}return t.prototype.decode=function(e){this.ddata=e;var r=e.getBits(),n=this.extractBits(r),a=this.correctBits(n),s=t.convertBoolArrayToByteArray(a),o=t.getEncodedData(a),l=new xP(s,o,null,null);return l.setNumBits(a.length),l},t.highLevelDecode=function(e){return this.getEncodedData(e)},t.getEncodedData=function(e){for(var r=e.length,n=pl.UPPER,a=pl.UPPER,s="",o=0;o<r;)if(a===pl.BINARY){if(r-o<5)break;var l=t.readCode(e,o,5);if(o+=5,l===0){if(r-o<11)break;l=t.readCode(e,o,11)+31,o+=11}for(var c=0;c<l;c++){if(r-o<8){o=r;break}var u=t.readCode(e,o,8);s+=ba.castAsNonUtf8Char(u),o+=8}a=n}else{var d=a===pl.DIGIT?4:5;if(r-o<d)break;var u=t.readCode(e,o,d);o+=d;var f=t.getCharacter(a,u);f.startsWith("CTRL_")?(n=a,a=t.getTable(f.charAt(5)),f.charAt(6)==="L"&&(n=a)):(s+=f,a=n)}return s},t.getTable=function(e){switch(e){case"L":return pl.LOWER;case"P":return pl.PUNCT;case"M":return pl.MIXED;case"D":return pl.DIGIT;case"B":return pl.BINARY;case"U":default:return pl.UPPER}},t.getCharacter=function(e,r){switch(e){case pl.UPPER:return t.UPPER_TABLE[r];case pl.LOWER:return t.LOWER_TABLE[r];case pl.MIXED:return t.MIXED_TABLE[r];case pl.PUNCT:return t.PUNCT_TABLE[r];case pl.DIGIT:return t.DIGIT_TABLE[r];default:throw new Kw("Bad table")}},t.prototype.correctBits=function(e){var r,n;this.ddata.getNbLayers()<=2?(n=6,r=Jc.AZTEC_DATA_6):this.ddata.getNbLayers()<=8?(n=8,r=Jc.AZTEC_DATA_8):this.ddata.getNbLayers()<=22?(n=10,r=Jc.AZTEC_DATA_10):(n=12,r=Jc.AZTEC_DATA_12);var a=this.ddata.getNbDatablocks(),s=e.length/n;if(s<a)throw new Hr;for(var o=e.length%n,l=new Int32Array(s),c=0;c<s;c++,o+=n)l[c]=t.readCode(e,o,n);try{var u=new vP(r);u.decode(l,s-a)}catch(x){throw new Hr(x)}for(var d=(1<<n)-1,f=0,c=0;c<a;c++){var A=l[c];if(A===0||A===d)throw new Hr;(A===1||A===d-1)&&f++}for(var h=new Array(a*n-f),m=0,c=0;c<a;c++){var A=l[c];if(A===1||A===d-1)h.fill(A>1,m,m+n-1),m+=n-1;else for(var p=n-1;p>=0;--p)h[m++]=(A&1<<p)!==0}return h},t.prototype.extractBits=function(e){var r=this.ddata.isCompact(),n=this.ddata.getNbLayers(),a=(r?11:14)+n*4,s=new Int32Array(a),o=new Array(this.totalBitsInLayer(n,r));if(r)for(var l=0;l<s.length;l++)s[l]=l;else for(var c=a+1+2*sa.truncDivision(sa.truncDivision(a,2)-1,15),u=a/2,d=sa.truncDivision(c,2),l=0;l<u;l++){var f=l+sa.truncDivision(l,15);s[u-l-1]=d-f-1,s[u+l]=d+f+1}for(var l=0,A=0;l<n;l++){for(var h=(n-l)*4+(r?9:12),m=l*2,p=a-1-m,x=0;x<h;x++)for(var v=x*2,y=0;y<2;y++)o[A+v+y]=e.get(s[m+y],s[m+x]),o[A+2*h+v+y]=e.get(s[m+x],s[p-y]),o[A+4*h+v+y]=e.get(s[p-y],s[p-x]),o[A+6*h+v+y]=e.get(s[p-x],s[m+y]);A+=h*8}return o},t.readCode=function(e,r,n){for(var a=0,s=r;s<r+n;s++)a<<=1,e[s]&&(a|=1);return a},t.readByte=function(e,r){var n=e.length-r;return n>=8?t.readCode(e,r,8):t.readCode(e,r,n)<<8-n},t.convertBoolArrayToByteArray=function(e){for(var r=new Uint8Array((e.length+7)/8),n=0;n<r.length;n++)r[n]=t.readByte(e,8*n);return r},t.prototype.totalBitsInLayer=function(e,r){return((r?88:112)+16*e)*e},t.UPPER_TABLE=["CTRL_PS"," ","A","B","C","D","E","F","G","H","I","J","K","L","M","N","O","P","Q","R","S","T","U","V","W","X","Y","Z","CTRL_LL","CTRL_ML","CTRL_DL","CTRL_BS"],t.LOWER_TABLE=["CTRL_PS"," ","a","b","c","d","e","f","g","h","i","j","k","l","m","n","o","p","q","r","s","t","u","v","w","x","y","z","CTRL_US","CTRL_ML","CTRL_DL","CTRL_BS"],t.MIXED_TABLE=["CTRL_PS"," ","","","","","","","\x07","\b","	",`
`,"\v","\f","\r","\x1B","","","","","@","\\","^","_","`","|","~","","CTRL_LL","CTRL_UL","CTRL_PL","CTRL_BS"],t.PUNCT_TABLE=["","\r",`\r
`,". ",", ",": ","!",'"',"#","$","%","&","'","(",")","*","+",",","-",".","/",":",";","<","=",">","?","[","]","{","}","CTRL_UL"],t.DIGIT_TABLE=["CTRL_PS"," ","0","1","2","3","4","5","6","7","8","9",",",".","CTRL_UL","CTRL_US"],t}(),ja=function(){function t(){}return t.round=function(e){return isNaN(e)?0:e<=Number.MIN_SAFE_INTEGER?Number.MIN_SAFE_INTEGER:e>=Number.MAX_SAFE_INTEGER?Number.MAX_SAFE_INTEGER:e+(e<0?-.5:.5)|0},t.distance=function(e,r,n,a){var s=e-n,o=r-a;return Math.sqrt(s*s+o*o)},t.sum=function(e){for(var r=0,n=0,a=e.length;n!==a;n++){var s=e[n];r+=s}return r},t}(),cF=function(){function t(){}return t.floatToIntBits=function(e){return e},t.MAX_VALUE=Number.MAX_SAFE_INTEGER,t}(),fn=function(){function t(e,r){this.x=e,this.y=r}return t.prototype.getX=function(){return this.x},t.prototype.getY=function(){return this.y},t.prototype.equals=function(e){if(e instanceof t){var r=e;return this.x===r.x&&this.y===r.y}return!1},t.prototype.hashCode=function(){return 31*cF.floatToIntBits(this.x)+cF.floatToIntBits(this.y)},t.prototype.toString=function(){return"("+this.x+","+this.y+")"},t.orderBestPatterns=function(e){var r=this.distance(e[0],e[1]),n=this.distance(e[1],e[2]),a=this.distance(e[0],e[2]),s,o,l;if(n>=r&&n>=a?(o=e[0],s=e[1],l=e[2]):a>=n&&a>=r?(o=e[1],s=e[0],l=e[2]):(o=e[2],s=e[0],l=e[1]),this.crossProductZ(s,o,l)<0){var c=s;s=l,l=c}e[0]=s,e[1]=o,e[2]=l},t.distance=function(e,r){return ja.distance(e.x,e.y,r.x,r.y)},t.crossProductZ=function(e,r,n){var a=r.x,s=r.y;return(n.x-a)*(e.y-s)-(n.y-s)*(e.x-a)},t}(),OR=function(){function t(e,r){this.bits=e,this.points=r}return t.prototype.getBits=function(){return this.bits},t.prototype.getPoints=function(){return this.points},t}(),XLe=function(){var t=function(e,r){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,a){n.__proto__=a}||function(n,a){for(var s in a)a.hasOwnProperty(s)&&(n[s]=a[s])},t(e,r)};return function(e,r){t(e,r);function n(){this.constructor=e}e.prototype=r===null?Object.create(r):(n.prototype=r.prototype,new n)}}(),YLe=function(t){XLe(e,t);function e(r,n,a,s,o){var l=t.call(this,r,n)||this;return l.compact=a,l.nbDatablocks=s,l.nbLayers=o,l}return e.prototype.getNbLayers=function(){return this.nbLayers},e.prototype.getNbDatablocks=function(){return this.nbDatablocks},e.prototype.isCompact=function(){return this.compact},e}(OR),uF=function(){function t(e,r,n,a){this.image=e,this.height=e.getHeight(),this.width=e.getWidth(),r==null&&(r=t.INIT_SIZE),n==null&&(n=e.getWidth()/2|0),a==null&&(a=e.getHeight()/2|0);var s=r/2|0;if(this.leftInit=n-s,this.rightInit=n+s,this.upInit=a-s,this.downInit=a+s,this.upInit<0||this.leftInit<0||this.downInit>=this.height||this.rightInit>=this.width)throw new rr}return t.prototype.detect=function(){for(var e=this.leftInit,r=this.rightInit,n=this.upInit,a=this.downInit,s=!1,o=!0,l=!1,c=!1,u=!1,d=!1,f=!1,A=this.width,h=this.height;o;){o=!1;for(var m=!0;(m||!c)&&r<A;)m=this.containsBlackPoint(n,a,r,!1),m?(r++,o=!0,c=!0):c||r++;if(r>=A){s=!0;break}for(var p=!0;(p||!u)&&a<h;)p=this.containsBlackPoint(e,r,a,!0),p?(a++,o=!0,u=!0):u||a++;if(a>=h){s=!0;break}for(var x=!0;(x||!d)&&e>=0;)x=this.containsBlackPoint(n,a,e,!1),x?(e--,o=!0,d=!0):d||e--;if(e<0){s=!0;break}for(var v=!0;(v||!f)&&n>=0;)v=this.containsBlackPoint(e,r,n,!0),v?(n--,o=!0,f=!0):f||n--;if(n<0){s=!0;break}o&&(l=!0)}if(!s&&l){for(var y=r-e,b=null,w=1;b===null&&w<y;w++)b=this.getBlackPointOnSegment(e,a-w,e+w,a);if(b==null)throw new rr;for(var j=null,w=1;j===null&&w<y;w++)j=this.getBlackPointOnSegment(e,n+w,e+w,n);if(j==null)throw new rr;for(var I=null,w=1;I===null&&w<y;w++)I=this.getBlackPointOnSegment(r,n+w,r-w,n);if(I==null)throw new rr;for(var _=null,w=1;_===null&&w<y;w++)_=this.getBlackPointOnSegment(r,a-w,r-w,a);if(_==null)throw new rr;return this.centerEdges(_,b,I,j)}else throw new rr},t.prototype.getBlackPointOnSegment=function(e,r,n,a){for(var s=ja.round(ja.distance(e,r,n,a)),o=(n-e)/s,l=(a-r)/s,c=this.image,u=0;u<s;u++){var d=ja.round(e+u*o),f=ja.round(r+u*l);if(c.get(d,f))return new fn(d,f)}return null},t.prototype.centerEdges=function(e,r,n,a){var s=e.getX(),o=e.getY(),l=r.getX(),c=r.getY(),u=n.getX(),d=n.getY(),f=a.getX(),A=a.getY(),h=t.CORR;return s<this.width/2?[new fn(f-h,A+h),new fn(l+h,c+h),new fn(u-h,d-h),new fn(s+h,o-h)]:[new fn(f+h,A+h),new fn(l+h,c-h),new fn(u-h,d+h),new fn(s-h,o-h)]},t.prototype.containsBlackPoint=function(e,r,n,a){var s=this.image;if(a){for(var o=e;o<=r;o++)if(s.get(o,n))return!0}else for(var l=e;l<=r;l++)if(s.get(n,l))return!0;return!1},t.INIT_SIZE=10,t.CORR=1,t}(),_$=function(){function t(){}return t.checkAndNudgePoints=function(e,r){for(var n=e.getWidth(),a=e.getHeight(),s=!0,o=0;o<r.length&&s;o+=2){var l=Math.floor(r[o]),c=Math.floor(r[o+1]);if(l<-1||l>n||c<-1||c>a)throw new rr;s=!1,l===-1?(r[o]=0,s=!0):l===n&&(r[o]=n-1,s=!0),c===-1?(r[o+1]=0,s=!0):c===a&&(r[o+1]=a-1,s=!0)}s=!0;for(var o=r.length-2;o>=0&&s;o-=2){var l=Math.floor(r[o]),c=Math.floor(r[o+1]);if(l<-1||l>n||c<-1||c>a)throw new rr;s=!1,l===-1?(r[o]=0,s=!0):l===n&&(r[o]=n-1,s=!0),c===-1?(r[o+1]=0,s=!0):c===a&&(r[o+1]=a-1,s=!0)}},t}(),vse=function(){function t(e,r,n,a,s,o,l,c,u){this.a11=e,this.a21=r,this.a31=n,this.a12=a,this.a22=s,this.a32=o,this.a13=l,this.a23=c,this.a33=u}return t.quadrilateralToQuadrilateral=function(e,r,n,a,s,o,l,c,u,d,f,A,h,m,p,x){var v=t.quadrilateralToSquare(e,r,n,a,s,o,l,c),y=t.squareToQuadrilateral(u,d,f,A,h,m,p,x);return y.times(v)},t.prototype.transformPoints=function(e){for(var r=e.length,n=this.a11,a=this.a12,s=this.a13,o=this.a21,l=this.a22,c=this.a23,u=this.a31,d=this.a32,f=this.a33,A=0;A<r;A+=2){var h=e[A],m=e[A+1],p=s*h+c*m+f;e[A]=(n*h+o*m+u)/p,e[A+1]=(a*h+l*m+d)/p}},t.prototype.transformPointsWithValues=function(e,r){for(var n=this.a11,a=this.a12,s=this.a13,o=this.a21,l=this.a22,c=this.a23,u=this.a31,d=this.a32,f=this.a33,A=e.length,h=0;h<A;h++){var m=e[h],p=r[h],x=s*m+c*p+f;e[h]=(n*m+o*p+u)/x,r[h]=(a*m+l*p+d)/x}},t.squareToQuadrilateral=function(e,r,n,a,s,o,l,c){var u=e-n+s-l,d=r-a+o-c;if(u===0&&d===0)return new t(n-e,s-n,e,a-r,o-a,r,0,0,1);var f=n-s,A=l-s,h=a-o,m=c-o,p=f*m-A*h,x=(u*m-A*d)/p,v=(f*d-u*h)/p;return new t(n-e+x*n,l-e+v*l,e,a-r+x*a,c-r+v*c,r,x,v,1)},t.quadrilateralToSquare=function(e,r,n,a,s,o,l,c){return t.squareToQuadrilateral(e,r,n,a,s,o,l,c).buildAdjoint()},t.prototype.buildAdjoint=function(){return new t(this.a22*this.a33-this.a23*this.a32,this.a23*this.a31-this.a21*this.a33,this.a21*this.a32-this.a22*this.a31,this.a13*this.a32-this.a12*this.a33,this.a11*this.a33-this.a13*this.a31,this.a12*this.a31-this.a11*this.a32,this.a12*this.a23-this.a13*this.a22,this.a13*this.a21-this.a11*this.a23,this.a11*this.a22-this.a12*this.a21)},t.prototype.times=function(e){return new t(this.a11*e.a11+this.a21*e.a12+this.a31*e.a13,this.a11*e.a21+this.a21*e.a22+this.a31*e.a23,this.a11*e.a31+this.a21*e.a32+this.a31*e.a33,this.a12*e.a11+this.a22*e.a12+this.a32*e.a13,this.a12*e.a21+this.a22*e.a22+this.a32*e.a23,this.a12*e.a31+this.a22*e.a32+this.a32*e.a33,this.a13*e.a11+this.a23*e.a12+this.a33*e.a13,this.a13*e.a21+this.a23*e.a22+this.a33*e.a23,this.a13*e.a31+this.a23*e.a32+this.a33*e.a33)},t}(),JLe=function(){var t=function(e,r){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,a){n.__proto__=a}||function(n,a){for(var s in a)a.hasOwnProperty(s)&&(n[s]=a[s])},t(e,r)};return function(e,r){t(e,r);function n(){this.constructor=e}e.prototype=r===null?Object.create(r):(n.prototype=r.prototype,new n)}}(),ZLe=function(t){JLe(e,t);function e(){return t!==null&&t.apply(this,arguments)||this}return e.prototype.sampleGrid=function(r,n,a,s,o,l,c,u,d,f,A,h,m,p,x,v,y,b,w){var j=vse.quadrilateralToQuadrilateral(s,o,l,c,u,d,f,A,h,m,p,x,v,y,b,w);return this.sampleGridWithTransform(r,n,a,j)},e.prototype.sampleGridWithTransform=function(r,n,a,s){if(n<=0||a<=0)throw new rr;for(var o=new oh(n,a),l=new Float32Array(2*n),c=0;c<a;c++){for(var u=l.length,d=c+.5,f=0;f<u;f+=2)l[f]=f/2+.5,l[f+1]=d;s.transformPoints(l),_$.checkAndNudgePoints(r,l);try{for(var f=0;f<u;f+=2)r.get(Math.floor(l[f]),Math.floor(l[f+1]))&&o.set(f/2,c)}catch{throw new rr}}return o},e}(_$),DR=function(){function t(){}return t.setGridSampler=function(e){t.gridSampler=e},t.getInstance=function(){return t.gridSampler},t.gridSampler=new ZLe,t}(),$c=function(){function t(e,r){this.x=e,this.y=r}return t.prototype.toResultPoint=function(){return new fn(this.getX(),this.getY())},t.prototype.getX=function(){return this.x},t.prototype.getY=function(){return this.y},t}(),eUe=function(){function t(e){this.EXPECTED_CORNER_BITS=new Int32Array([3808,476,2107,1799]),this.image=e}return t.prototype.detect=function(){return this.detectMirror(!1)},t.prototype.detectMirror=function(e){var r=this.getMatrixCenter(),n=this.getBullsEyeCorners(r);if(e){var a=n[0];n[0]=n[2],n[2]=a}this.extractParameters(n);var s=this.sampleGrid(this.image,n[this.shift%4],n[(this.shift+1)%4],n[(this.shift+2)%4],n[(this.shift+3)%4]),o=this.getMatrixCornerPoints(n);return new YLe(s,o,this.compact,this.nbDataBlocks,this.nbLayers)},t.prototype.extractParameters=function(e){if(!this.isValidPoint(e[0])||!this.isValidPoint(e[1])||!this.isValidPoint(e[2])||!this.isValidPoint(e[3]))throw new rr;var r=2*this.nbCenterLayers,n=new Int32Array([this.sampleLine(e[0],e[1],r),this.sampleLine(e[1],e[2],r),this.sampleLine(e[2],e[3],r),this.sampleLine(e[3],e[0],r)]);this.shift=this.getRotation(n,r);for(var a=0,s=0;s<4;s++){var o=n[(this.shift+s)%4];this.compact?(a<<=7,a+=o>>1&127):(a<<=10,a+=(o>>2&992)+(o>>1&31))}var l=this.getCorrectedParameterData(a,this.compact);this.compact?(this.nbLayers=(l>>6)+1,this.nbDataBlocks=(l&63)+1):(this.nbLayers=(l>>11)+1,this.nbDataBlocks=(l&2047)+1)},t.prototype.getRotation=function(e,r){var n=0;e.forEach(function(s,o,l){var c=(s>>r-2<<1)+(s&1);n=(n<<3)+c}),n=((n&1)<<11)+(n>>1);for(var a=0;a<4;a++)if(sa.bitCount(n^this.EXPECTED_CORNER_BITS[a])<=2)return a;throw new rr},t.prototype.getCorrectedParameterData=function(e,r){var n,a;r?(n=7,a=2):(n=10,a=4);for(var s=n-a,o=new Int32Array(n),l=n-1;l>=0;--l)o[l]=e&15,e>>=4;try{var c=new vP(Jc.AZTEC_PARAM);c.decode(o,s)}catch{throw new rr}for(var u=0,l=0;l<a;l++)u=(u<<4)+o[l];return u},t.prototype.getBullsEyeCorners=function(e){var r=e,n=e,a=e,s=e,o=!0;for(this.nbCenterLayers=1;this.nbCenterLayers<9;this.nbCenterLayers++){var l=this.getFirstDifferent(r,o,1,-1),c=this.getFirstDifferent(n,o,1,1),u=this.getFirstDifferent(a,o,-1,1),d=this.getFirstDifferent(s,o,-1,-1);if(this.nbCenterLayers>2){var f=this.distancePoint(d,l)*this.nbCenterLayers/(this.distancePoint(s,r)*(this.nbCenterLayers+2));if(f<.75||f>1.25||!this.isWhiteOrBlackRectangle(l,c,u,d))break}r=l,n=c,a=u,s=d,o=!o}if(this.nbCenterLayers!==5&&this.nbCenterLayers!==7)throw new rr;this.compact=this.nbCenterLayers===5;var A=new fn(r.getX()+.5,r.getY()-.5),h=new fn(n.getX()+.5,n.getY()+.5),m=new fn(a.getX()-.5,a.getY()+.5),p=new fn(s.getX()-.5,s.getY()-.5);return this.expandSquare([A,h,m,p],2*this.nbCenterLayers-3,2*this.nbCenterLayers)},t.prototype.getMatrixCenter=function(){var e,r,n,a;try{var s=new uF(this.image).detect();e=s[0],r=s[1],n=s[2],a=s[3]}catch{var o=this.image.getWidth()/2,l=this.image.getHeight()/2;e=this.getFirstDifferent(new $c(o+7,l-7),!1,1,-1).toResultPoint(),r=this.getFirstDifferent(new $c(o+7,l+7),!1,1,1).toResultPoint(),n=this.getFirstDifferent(new $c(o-7,l+7),!1,-1,1).toResultPoint(),a=this.getFirstDifferent(new $c(o-7,l-7),!1,-1,-1).toResultPoint()}var c=ja.round((e.getX()+a.getX()+r.getX()+n.getX())/4),u=ja.round((e.getY()+a.getY()+r.getY()+n.getY())/4);try{var s=new uF(this.image,15,c,u).detect();e=s[0],r=s[1],n=s[2],a=s[3]}catch{e=this.getFirstDifferent(new $c(c+7,u-7),!1,1,-1).toResultPoint(),r=this.getFirstDifferent(new $c(c+7,u+7),!1,1,1).toResultPoint(),n=this.getFirstDifferent(new $c(c-7,u+7),!1,-1,1).toResultPoint(),a=this.getFirstDifferent(new $c(c-7,u-7),!1,-1,-1).toResultPoint()}return c=ja.round((e.getX()+a.getX()+r.getX()+n.getX())/4),u=ja.round((e.getY()+a.getY()+r.getY()+n.getY())/4),new $c(c,u)},t.prototype.getMatrixCornerPoints=function(e){return this.expandSquare(e,2*this.nbCenterLayers,this.getDimension())},t.prototype.sampleGrid=function(e,r,n,a,s){var o=DR.getInstance(),l=this.getDimension(),c=l/2-this.nbCenterLayers,u=l/2+this.nbCenterLayers;return o.sampleGrid(e,l,l,c,c,u,c,u,u,c,u,r.getX(),r.getY(),n.getX(),n.getY(),a.getX(),a.getY(),s.getX(),s.getY())},t.prototype.sampleLine=function(e,r,n){for(var a=0,s=this.distanceResultPoint(e,r),o=s/n,l=e.getX(),c=e.getY(),u=o*(r.getX()-e.getX())/s,d=o*(r.getY()-e.getY())/s,f=0;f<n;f++)this.image.get(ja.round(l+f*u),ja.round(c+f*d))&&(a|=1<<n-f-1);return a},t.prototype.isWhiteOrBlackRectangle=function(e,r,n,a){var s=3;e=new $c(e.getX()-s,e.getY()+s),r=new $c(r.getX()-s,r.getY()-s),n=new $c(n.getX()+s,n.getY()-s),a=new $c(a.getX()+s,a.getY()+s);var o=this.getColor(a,e);if(o===0)return!1;var l=this.getColor(e,r);return l!==o||(l=this.getColor(r,n),l!==o)?!1:(l=this.getColor(n,a),l===o)},t.prototype.getColor=function(e,r){for(var n=this.distancePoint(e,r),a=(r.getX()-e.getX())/n,s=(r.getY()-e.getY())/n,o=0,l=e.getX(),c=e.getY(),u=this.image.get(e.getX(),e.getY()),d=Math.ceil(n),f=0;f<d;f++)l+=a,c+=s,this.image.get(ja.round(l),ja.round(c))!==u&&o++;var A=o/n;return A>.1&&A<.9?0:A<=.1===u?1:-1},t.prototype.getFirstDifferent=function(e,r,n,a){for(var s=e.getX()+n,o=e.getY()+a;this.isValid(s,o)&&this.image.get(s,o)===r;)s+=n,o+=a;for(s-=n,o-=a;this.isValid(s,o)&&this.image.get(s,o)===r;)s+=n;for(s-=n;this.isValid(s,o)&&this.image.get(s,o)===r;)o+=a;return o-=a,new $c(s,o)},t.prototype.expandSquare=function(e,r,n){var a=n/(2*r),s=e[0].getX()-e[2].getX(),o=e[0].getY()-e[2].getY(),l=(e[0].getX()+e[2].getX())/2,c=(e[0].getY()+e[2].getY())/2,u=new fn(l+a*s,c+a*o),d=new fn(l-a*s,c-a*o);s=e[1].getX()-e[3].getX(),o=e[1].getY()-e[3].getY(),l=(e[1].getX()+e[3].getX())/2,c=(e[1].getY()+e[3].getY())/2;var f=new fn(l+a*s,c+a*o),A=new fn(l-a*s,c-a*o),h=[u,f,d,A];return h},t.prototype.isValid=function(e,r){return e>=0&&e<this.image.getWidth()&&r>0&&r<this.image.getHeight()},t.prototype.isValidPoint=function(e){var r=ja.round(e.getX()),n=ja.round(e.getY());return this.isValid(r,n)},t.prototype.distancePoint=function(e,r){return ja.distance(e.getX(),e.getY(),r.getX(),r.getY())},t.prototype.distanceResultPoint=function(e,r){return ja.distance(e.getX(),e.getY(),r.getX(),r.getY())},t.prototype.getDimension=function(){return this.compact?4*this.nbLayers+11:this.nbLayers<=4?4*this.nbLayers+15:4*this.nbLayers+2*(sa.truncDivision(this.nbLayers-4,8)+1)+15},t}(),ZS=function(){function t(){}return t.prototype.decode=function(e,r){r===void 0&&(r=null);var n=null,a=new eUe(e.getBlackMatrix()),s=null,o=null;try{var l=a.detectMirror(!1);s=l.getPoints(),this.reportFoundResultPoints(r,s),o=new C$().decode(l)}catch(f){n=f}if(o==null)try{var l=a.detectMirror(!0);s=l.getPoints(),this.reportFoundResultPoints(r,s),o=new C$().decode(l)}catch(f){throw n??f}var c=new cc(o.getText(),o.getRawBytes(),o.getNumBits(),s,jn.AZTEC,ws.currentTimeMillis()),u=o.getByteSegments();u!=null&&c.putMetadata(Il.BYTE_SEGMENTS,u);var d=o.getECLevel();return d!=null&&c.putMetadata(Il.ERROR_CORRECTION_LEVEL,d),c},t.prototype.reportFoundResultPoints=function(e,r){if(e!=null){var n=e.get(Ns.NEED_RESULT_POINT_CALLBACK);n!=null&&r.forEach(function(a,s,o){n.foundPossibleResultPoint(a)})}},t.prototype.reset=function(){},t}(),tUe=function(){var t=function(e,r){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,a){n.__proto__=a}||function(n,a){for(var s in a)a.hasOwnProperty(s)&&(n[s]=a[s])},t(e,r)};return function(e,r){t(e,r);function n(){this.constructor=e}e.prototype=r===null?Object.create(r):(n.prototype=r.prototype,new n)}}();(function(t){tUe(e,t);function e(r){return r===void 0&&(r=500),t.call(this,new ZS,r)||this}return e})(w1);var Po=function(){function t(){}return t.prototype.decode=function(e,r){try{return this.doDecode(e,r)}catch{var n=r&&r.get(Ns.TRY_HARDER)===!0;if(n&&e.isRotateSupported()){var a=e.rotateCounterClockwise(),s=this.doDecode(a,r),o=s.getResultMetadata(),l=270;o!==null&&o.get(Il.ORIENTATION)===!0&&(l=l+o.get(Il.ORIENTATION)%360),s.putMetadata(Il.ORIENTATION,l);var c=s.getResultPoints();if(c!==null)for(var u=a.getHeight(),d=0;d<c.length;d++)c[d]=new fn(u-c[d].getY()-1,c[d].getX());return s}else throw new rr}},t.prototype.reset=function(){},t.prototype.doDecode=function(e,r){var n=e.getWidth(),a=e.getHeight(),s=new Jo(n),o=r&&r.get(Ns.TRY_HARDER)===!0,l=Math.max(1,a>>(o?8:5)),c;o?c=a:c=15;for(var u=Math.trunc(a/2),d=0;d<c;d++){var f=Math.trunc((d+1)/2),A=(d&1)===0,h=u+l*(A?f:-f);if(h<0||h>=a)break;try{s=e.getBlackRow(h,s)}catch{continue}for(var m=function(y){if(y===1&&(s.reverse(),r&&r.get(Ns.NEED_RESULT_POINT_CALLBACK)===!0)){var b=new Map;r.forEach(function(I,_){return b.set(_,I)}),b.delete(Ns.NEED_RESULT_POINT_CALLBACK),r=b}try{var w=p.decodeRow(h,s,r);if(y===1){w.putMetadata(Il.ORIENTATION,180);var j=w.getResultPoints();j!==null&&(j[0]=new fn(n-j[0].getX()-1,j[0].getY()),j[1]=new fn(n-j[1].getX()-1,j[1].getY()))}return{value:w}}catch{}},p=this,x=0;x<2;x++){var v=m(x);if(typeof v=="object")return v.value}}throw new rr},t.recordPattern=function(e,r,n){for(var a=n.length,s=0;s<a;s++)n[s]=0;var o=e.getSize();if(r>=o)throw new rr;for(var l=!e.get(r),c=0,u=r;u<o;){if(e.get(u)!==l)n[c]++;else{if(++c===a)break;n[c]=1,l=!l}u++}if(!(c===a||c===a-1&&u===o))throw new rr},t.recordPatternInReverse=function(e,r,n){for(var a=n.length,s=e.get(r);r>0&&a>=0;)e.get(--r)!==s&&(a--,s=!s);if(a>=0)throw new rr;t.recordPattern(e,r+1,n)},t.patternMatchVariance=function(e,r,n){for(var a=e.length,s=0,o=0,l=0;l<a;l++)s+=e[l],o+=r[l];if(s<o)return Number.POSITIVE_INFINITY;var c=s/o;n*=c;for(var u=0,d=0;d<a;d++){var f=e[d],A=r[d]*c,h=f>A?f-A:A-f;if(h>n)return Number.POSITIVE_INFINITY;u+=h}return u/s},t}(),rUe=function(){var t=function(e,r){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,a){n.__proto__=a}||function(n,a){for(var s in a)a.hasOwnProperty(s)&&(n[s]=a[s])},t(e,r)};return function(e,r){t(e,r);function n(){this.constructor=e}e.prototype=r===null?Object.create(r):(n.prototype=r.prototype,new n)}}(),E$=function(t){rUe(e,t);function e(){return t!==null&&t.apply(this,arguments)||this}return e.findStartPattern=function(r){for(var n=r.getSize(),a=r.getNextSet(0),s=0,o=Int32Array.from([0,0,0,0,0,0]),l=a,c=!1,u=6,d=a;d<n;d++)if(r.get(d)!==c)o[s]++;else{if(s===u-1){for(var f=e.MAX_AVG_VARIANCE,A=-1,h=e.CODE_START_A;h<=e.CODE_START_C;h++){var m=Po.patternMatchVariance(o,e.CODE_PATTERNS[h],e.MAX_INDIVIDUAL_VARIANCE);m<f&&(f=m,A=h)}if(A>=0&&r.isRange(Math.max(0,l-(d-l)/2),l,!1))return Int32Array.from([l,d,A]);l+=o[0]+o[1],o=o.slice(2,o.length),o[s-1]=0,o[s]=0,s--}else s++;o[s]=1,c=!c}throw new rr},e.decodeCode=function(r,n,a){Po.recordPattern(r,a,n);for(var s=e.MAX_AVG_VARIANCE,o=-1,l=0;l<e.CODE_PATTERNS.length;l++){var c=e.CODE_PATTERNS[l],u=this.patternMatchVariance(n,c,e.MAX_INDIVIDUAL_VARIANCE);u<s&&(s=u,o=l)}if(o>=0)return o;throw new rr},e.prototype.decodeRow=function(r,n,a){var s=a&&a.get(Ns.ASSUME_GS1)===!0,o=e.findStartPattern(n),l=o[2],c=0,u=new Uint8Array(20);u[c++]=l;var d;switch(l){case e.CODE_START_A:d=e.CODE_CODE_A;break;case e.CODE_START_B:d=e.CODE_CODE_B;break;case e.CODE_START_C:d=e.CODE_CODE_C;break;default:throw new Hr}for(var f=!1,A=!1,h="",m=o[0],p=o[1],x=Int32Array.from([0,0,0,0,0,0]),v=0,y=0,b=l,w=0,j=!0,I=!1,_=!1;!f;){var S=A;switch(A=!1,v=y,y=e.decodeCode(n,x,p),u[c++]=y,y!==e.CODE_STOP&&(j=!0),y!==e.CODE_STOP&&(w++,b+=w*y),m=p,p+=x.reduce(function(he,ve){return he+ve},0),y){case e.CODE_START_A:case e.CODE_START_B:case e.CODE_START_C:throw new Hr}switch(d){case e.CODE_CODE_A:if(y<64)_===I?h+=String.fromCharCode(32+y):h+=String.fromCharCode(32+y+128),_=!1;else if(y<96)_===I?h+=String.fromCharCode(y-64):h+=String.fromCharCode(y+64),_=!1;else switch(y!==e.CODE_STOP&&(j=!1),y){case e.CODE_FNC_1:s&&(h.length===0?h+="]C1":h+="");break;case e.CODE_FNC_2:case e.CODE_FNC_3:break;case e.CODE_FNC_4_A:!I&&_?(I=!0,_=!1):I&&_?(I=!1,_=!1):_=!0;break;case e.CODE_SHIFT:A=!0,d=e.CODE_CODE_B;break;case e.CODE_CODE_B:d=e.CODE_CODE_B;break;case e.CODE_CODE_C:d=e.CODE_CODE_C;break;case e.CODE_STOP:f=!0;break}break;case e.CODE_CODE_B:if(y<96)_===I?h+=String.fromCharCode(32+y):h+=String.fromCharCode(32+y+128),_=!1;else switch(y!==e.CODE_STOP&&(j=!1),y){case e.CODE_FNC_1:s&&(h.length===0?h+="]C1":h+="");break;case e.CODE_FNC_2:case e.CODE_FNC_3:break;case e.CODE_FNC_4_B:!I&&_?(I=!0,_=!1):I&&_?(I=!1,_=!1):_=!0;break;case e.CODE_SHIFT:A=!0,d=e.CODE_CODE_A;break;case e.CODE_CODE_A:d=e.CODE_CODE_A;break;case e.CODE_CODE_C:d=e.CODE_CODE_C;break;case e.CODE_STOP:f=!0;break}break;case e.CODE_CODE_C:if(y<100)y<10&&(h+="0"),h+=y;else switch(y!==e.CODE_STOP&&(j=!1),y){case e.CODE_FNC_1:s&&(h.length===0?h+="]C1":h+="");break;case e.CODE_CODE_A:d=e.CODE_CODE_A;break;case e.CODE_CODE_B:d=e.CODE_CODE_B;break;case e.CODE_STOP:f=!0;break}break}S&&(d=d===e.CODE_CODE_A?e.CODE_CODE_B:e.CODE_CODE_A)}var E=p-m;if(p=n.getNextUnset(p),!n.isRange(p,Math.min(n.getSize(),p+(p-m)/2),!1))throw new rr;if(b-=w*v,b%103!==v)throw new so;var T=h.length;if(T===0)throw new rr;T>0&&j&&(d===e.CODE_CODE_C?h=h.substring(0,T-2):h=h.substring(0,T-1));for(var k=(o[1]+o[0])/2,B=m+E/2,D=u.length,X=new Uint8Array(D),me=0;me<D;me++)X[me]=u[me];var pe=[new fn(k,r),new fn(B,r)];return new cc(h,X,0,pe,jn.CODE_128,new Date().getTime())},e.CODE_PATTERNS=[Int32Array.from([2,1,2,2,2,2]),Int32Array.from([2,2,2,1,2,2]),Int32Array.from([2,2,2,2,2,1]),Int32Array.from([1,2,1,2,2,3]),Int32Array.from([1,2,1,3,2,2]),Int32Array.from([1,3,1,2,2,2]),Int32Array.from([1,2,2,2,1,3]),Int32Array.from([1,2,2,3,1,2]),Int32Array.from([1,3,2,2,1,2]),Int32Array.from([2,2,1,2,1,3]),Int32Array.from([2,2,1,3,1,2]),Int32Array.from([2,3,1,2,1,2]),Int32Array.from([1,1,2,2,3,2]),Int32Array.from([1,2,2,1,3,2]),Int32Array.from([1,2,2,2,3,1]),Int32Array.from([1,1,3,2,2,2]),Int32Array.from([1,2,3,1,2,2]),Int32Array.from([1,2,3,2,2,1]),Int32Array.from([2,2,3,2,1,1]),Int32Array.from([2,2,1,1,3,2]),Int32Array.from([2,2,1,2,3,1]),Int32Array.from([2,1,3,2,1,2]),Int32Array.from([2,2,3,1,1,2]),Int32Array.from([3,1,2,1,3,1]),Int32Array.from([3,1,1,2,2,2]),Int32Array.from([3,2,1,1,2,2]),Int32Array.from([3,2,1,2,2,1]),Int32Array.from([3,1,2,2,1,2]),Int32Array.from([3,2,2,1,1,2]),Int32Array.from([3,2,2,2,1,1]),Int32Array.from([2,1,2,1,2,3]),Int32Array.from([2,1,2,3,2,1]),Int32Array.from([2,3,2,1,2,1]),Int32Array.from([1,1,1,3,2,3]),Int32Array.from([1,3,1,1,2,3]),Int32Array.from([1,3,1,3,2,1]),Int32Array.from([1,1,2,3,1,3]),Int32Array.from([1,3,2,1,1,3]),Int32Array.from([1,3,2,3,1,1]),Int32Array.from([2,1,1,3,1,3]),Int32Array.from([2,3,1,1,1,3]),Int32Array.from([2,3,1,3,1,1]),Int32Array.from([1,1,2,1,3,3]),Int32Array.from([1,1,2,3,3,1]),Int32Array.from([1,3,2,1,3,1]),Int32Array.from([1,1,3,1,2,3]),Int32Array.from([1,1,3,3,2,1]),Int32Array.from([1,3,3,1,2,1]),Int32Array.from([3,1,3,1,2,1]),Int32Array.from([2,1,1,3,3,1]),Int32Array.from([2,3,1,1,3,1]),Int32Array.from([2,1,3,1,1,3]),Int32Array.from([2,1,3,3,1,1]),Int32Array.from([2,1,3,1,3,1]),Int32Array.from([3,1,1,1,2,3]),Int32Array.from([3,1,1,3,2,1]),Int32Array.from([3,3,1,1,2,1]),Int32Array.from([3,1,2,1,1,3]),Int32Array.from([3,1,2,3,1,1]),Int32Array.from([3,3,2,1,1,1]),Int32Array.from([3,1,4,1,1,1]),Int32Array.from([2,2,1,4,1,1]),Int32Array.from([4,3,1,1,1,1]),Int32Array.from([1,1,1,2,2,4]),Int32Array.from([1,1,1,4,2,2]),Int32Array.from([1,2,1,1,2,4]),Int32Array.from([1,2,1,4,2,1]),Int32Array.from([1,4,1,1,2,2]),Int32Array.from([1,4,1,2,2,1]),Int32Array.from([1,1,2,2,1,4]),Int32Array.from([1,1,2,4,1,2]),Int32Array.from([1,2,2,1,1,4]),Int32Array.from([1,2,2,4,1,1]),Int32Array.from([1,4,2,1,1,2]),Int32Array.from([1,4,2,2,1,1]),Int32Array.from([2,4,1,2,1,1]),Int32Array.from([2,2,1,1,1,4]),Int32Array.from([4,1,3,1,1,1]),Int32Array.from([2,4,1,1,1,2]),Int32Array.from([1,3,4,1,1,1]),Int32Array.from([1,1,1,2,4,2]),Int32Array.from([1,2,1,1,4,2]),Int32Array.from([1,2,1,2,4,1]),Int32Array.from([1,1,4,2,1,2]),Int32Array.from([1,2,4,1,1,2]),Int32Array.from([1,2,4,2,1,1]),Int32Array.from([4,1,1,2,1,2]),Int32Array.from([4,2,1,1,1,2]),Int32Array.from([4,2,1,2,1,1]),Int32Array.from([2,1,2,1,4,1]),Int32Array.from([2,1,4,1,2,1]),Int32Array.from([4,1,2,1,2,1]),Int32Array.from([1,1,1,1,4,3]),Int32Array.from([1,1,1,3,4,1]),Int32Array.from([1,3,1,1,4,1]),Int32Array.from([1,1,4,1,1,3]),Int32Array.from([1,1,4,3,1,1]),Int32Array.from([4,1,1,1,1,3]),Int32Array.from([4,1,1,3,1,1]),Int32Array.from([1,1,3,1,4,1]),Int32Array.from([1,1,4,1,3,1]),Int32Array.from([3,1,1,1,4,1]),Int32Array.from([4,1,1,1,3,1]),Int32Array.from([2,1,1,4,1,2]),Int32Array.from([2,1,1,2,1,4]),Int32Array.from([2,1,1,2,3,2]),Int32Array.from([2,3,3,1,1,1,2])],e.MAX_AVG_VARIANCE=.25,e.MAX_INDIVIDUAL_VARIANCE=.7,e.CODE_SHIFT=98,e.CODE_CODE_C=99,e.CODE_CODE_B=100,e.CODE_CODE_A=101,e.CODE_FNC_1=102,e.CODE_FNC_2=97,e.CODE_FNC_3=96,e.CODE_FNC_4_A=101,e.CODE_FNC_4_B=100,e.CODE_START_A=103,e.CODE_START_B=104,e.CODE_START_C=105,e.CODE_STOP=106,e}(Po),nUe=function(){var t=function(e,r){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,a){n.__proto__=a}||function(n,a){for(var s in a)a.hasOwnProperty(s)&&(n[s]=a[s])},t(e,r)};return function(e,r){t(e,r);function n(){this.constructor=e}e.prototype=r===null?Object.create(r):(n.prototype=r.prototype,new n)}}(),Q5=function(t){var e=typeof Symbol=="function"&&Symbol.iterator,r=e&&t[e],n=0;if(r)return r.call(t);if(t&&typeof t.length=="number")return{next:function(){return t&&n>=t.length&&(t=void 0),{value:t&&t[n++],done:!t}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")},S$=function(t){nUe(e,t);function e(r,n){r===void 0&&(r=!1),n===void 0&&(n=!1);var a=t.call(this)||this;return a.usingCheckDigit=r,a.extendedMode=n,a.decodeRowResult="",a.counters=new Int32Array(9),a}return e.prototype.decodeRow=function(r,n,a){var s,o,l,c,u=this.counters;u.fill(0),this.decodeRowResult="";var d=e.findAsteriskPattern(n,u),f=n.getNextSet(d[1]),A=n.getSize(),h,m;do{e.recordPattern(n,f,u);var p=e.toNarrowWidePattern(u);if(p<0)throw new rr;h=e.patternToChar(p),this.decodeRowResult+=h,m=f;try{for(var x=(s=void 0,Q5(u)),v=x.next();!v.done;v=x.next()){var y=v.value;f+=y}}catch(D){s={error:D}}finally{try{v&&!v.done&&(o=x.return)&&o.call(x)}finally{if(s)throw s.error}}f=n.getNextSet(f)}while(h!=="*");this.decodeRowResult=this.decodeRowResult.substring(0,this.decodeRowResult.length-1);var b=0;try{for(var w=Q5(u),j=w.next();!j.done;j=w.next()){var y=j.value;b+=y}}catch(D){l={error:D}}finally{try{j&&!j.done&&(c=w.return)&&c.call(w)}finally{if(l)throw l.error}}var I=f-m-b;if(f!==A&&I*2<b)throw new rr;if(this.usingCheckDigit){for(var _=this.decodeRowResult.length-1,S=0,E=0;E<_;E++)S+=e.ALPHABET_STRING.indexOf(this.decodeRowResult.charAt(E));if(this.decodeRowResult.charAt(_)!==e.ALPHABET_STRING.charAt(S%43))throw new so;this.decodeRowResult=this.decodeRowResult.substring(0,_)}if(this.decodeRowResult.length===0)throw new rr;var T;this.extendedMode?T=e.decodeExtended(this.decodeRowResult):T=this.decodeRowResult;var k=(d[1]+d[0])/2,B=m+b/2;return new cc(T,null,0,[new fn(k,r),new fn(B,r)],jn.CODE_39,new Date().getTime())},e.findAsteriskPattern=function(r,n){for(var a=r.getSize(),s=r.getNextSet(0),o=0,l=s,c=!1,u=n.length,d=s;d<a;d++)if(r.get(d)!==c)n[o]++;else{if(o===u-1){if(this.toNarrowWidePattern(n)===e.ASTERISK_ENCODING&&r.isRange(Math.max(0,l-Math.floor((d-l)/2)),l,!1))return[l,d];l+=n[0]+n[1],n.copyWithin(0,2,2+o-1),n[o-1]=0,n[o]=0,o--}else o++;n[o]=1,c=!c}throw new rr},e.toNarrowWidePattern=function(r){var n,a,s=r.length,o=0,l;do{var c=2147483647;try{for(var u=(n=void 0,Q5(r)),d=u.next();!d.done;d=u.next()){var f=d.value;f<c&&f>o&&(c=f)}}catch(p){n={error:p}}finally{try{d&&!d.done&&(a=u.return)&&a.call(u)}finally{if(n)throw n.error}}o=c,l=0;for(var A=0,h=0,m=0;m<s;m++){var f=r[m];f>o&&(h|=1<<s-1-m,l++,A+=f)}if(l===3){for(var m=0;m<s&&l>0;m++){var f=r[m];if(f>o&&(l--,f*2>=A))return-1}return h}}while(l>3);return-1},e.patternToChar=function(r){for(var n=0;n<e.CHARACTER_ENCODINGS.length;n++)if(e.CHARACTER_ENCODINGS[n]===r)return e.ALPHABET_STRING.charAt(n);if(r===e.ASTERISK_ENCODING)return"*";throw new rr},e.decodeExtended=function(r){for(var n=r.length,a="",s=0;s<n;s++){var o=r.charAt(s);if(o==="+"||o==="$"||o==="%"||o==="/"){var l=r.charAt(s+1),c="\0";switch(o){case"+":if(l>="A"&&l<="Z")c=String.fromCharCode(l.charCodeAt(0)+32);else throw new Hr;break;case"$":if(l>="A"&&l<="Z")c=String.fromCharCode(l.charCodeAt(0)-64);else throw new Hr;break;case"%":if(l>="A"&&l<="E")c=String.fromCharCode(l.charCodeAt(0)-38);else if(l>="F"&&l<="J")c=String.fromCharCode(l.charCodeAt(0)-11);else if(l>="K"&&l<="O")c=String.fromCharCode(l.charCodeAt(0)+16);else if(l>="P"&&l<="T")c=String.fromCharCode(l.charCodeAt(0)+43);else if(l==="U")c="\0";else if(l==="V")c="@";else if(l==="W")c="`";else if(l==="X"||l==="Y"||l==="Z")c="";else throw new Hr;break;case"/":if(l>="A"&&l<="O")c=String.fromCharCode(l.charCodeAt(0)-32);else if(l==="Z")c=":";else throw new Hr;break}a+=c,s++}else a+=o}return a},e.ALPHABET_STRING="0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZ-. $/+%",e.CHARACTER_ENCODINGS=[52,289,97,352,49,304,112,37,292,100,265,73,328,25,280,88,13,268,76,28,259,67,322,19,274,82,7,262,70,22,385,193,448,145,400,208,133,388,196,168,162,138,42],e.ASTERISK_ENCODING=148,e}(Po),aUe=function(){var t=function(e,r){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,a){n.__proto__=a}||function(n,a){for(var s in a)a.hasOwnProperty(s)&&(n[s]=a[s])},t(e,r)};return function(e,r){t(e,r);function n(){this.constructor=e}e.prototype=r===null?Object.create(r):(n.prototype=r.prototype,new n)}}(),V5=function(t){var e=typeof Symbol=="function"&&Symbol.iterator,r=e&&t[e],n=0;if(r)return r.call(t);if(t&&typeof t.length=="number")return{next:function(){return t&&n>=t.length&&(t=void 0),{value:t&&t[n++],done:!t}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")},I$=function(t){aUe(e,t);function e(){var r=t.call(this)||this;return r.decodeRowResult="",r.counters=new Int32Array(6),r}return e.prototype.decodeRow=function(r,n,a){var s,o,l,c,u=this.findAsteriskPattern(n),d=n.getNextSet(u[1]),f=n.getSize(),A=this.counters;A.fill(0),this.decodeRowResult="";var h,m;do{e.recordPattern(n,d,A);var p=this.toPattern(A);if(p<0)throw new rr;h=this.patternToChar(p),this.decodeRowResult+=h,m=d;try{for(var x=(s=void 0,V5(A)),v=x.next();!v.done;v=x.next()){var y=v.value;d+=y}}catch(E){s={error:E}}finally{try{v&&!v.done&&(o=x.return)&&o.call(x)}finally{if(s)throw s.error}}d=n.getNextSet(d)}while(h!=="*");this.decodeRowResult=this.decodeRowResult.substring(0,this.decodeRowResult.length-1);var b=0;try{for(var w=V5(A),j=w.next();!j.done;j=w.next()){var y=j.value;b+=y}}catch(E){l={error:E}}finally{try{j&&!j.done&&(c=w.return)&&c.call(w)}finally{if(l)throw l.error}}if(d===f||!n.get(d))throw new rr;if(this.decodeRowResult.length<2)throw new rr;this.checkChecksums(this.decodeRowResult),this.decodeRowResult=this.decodeRowResult.substring(0,this.decodeRowResult.length-2);var I=this.decodeExtended(this.decodeRowResult),_=(u[1]+u[0])/2,S=m+b/2;return new cc(I,null,0,[new fn(_,r),new fn(S,r)],jn.CODE_93,new Date().getTime())},e.prototype.findAsteriskPattern=function(r){var n=r.getSize(),a=r.getNextSet(0);this.counters.fill(0);for(var s=this.counters,o=a,l=!1,c=s.length,u=0,d=a;d<n;d++)if(r.get(d)!==l)s[u]++;else{if(u===c-1){if(this.toPattern(s)===e.ASTERISK_ENCODING)return new Int32Array([o,d]);o+=s[0]+s[1],s.copyWithin(0,2,2+u-1),s[u-1]=0,s[u]=0,u--}else u++;s[u]=1,l=!l}throw new rr},e.prototype.toPattern=function(r){var n,a,s=0;try{for(var o=V5(r),l=o.next();!l.done;l=o.next()){var c=l.value;s+=c}}catch(m){n={error:m}}finally{try{l&&!l.done&&(a=o.return)&&a.call(o)}finally{if(n)throw n.error}}for(var u=0,d=r.length,f=0;f<d;f++){var A=Math.round(r[f]*9/s);if(A<1||A>4)return-1;if(f&1)u<<=A;else for(var h=0;h<A;h++)u=u<<1|1}return u},e.prototype.patternToChar=function(r){for(var n=0;n<e.CHARACTER_ENCODINGS.length;n++)if(e.CHARACTER_ENCODINGS[n]===r)return e.ALPHABET_STRING.charAt(n);throw new rr},e.prototype.decodeExtended=function(r){for(var n=r.length,a="",s=0;s<n;s++){var o=r.charAt(s);if(o>="a"&&o<="d"){if(s>=n-1)throw new Hr;var l=r.charAt(s+1),c="\0";switch(o){case"d":if(l>="A"&&l<="Z")c=String.fromCharCode(l.charCodeAt(0)+32);else throw new Hr;break;case"a":if(l>="A"&&l<="Z")c=String.fromCharCode(l.charCodeAt(0)-64);else throw new Hr;break;case"b":if(l>="A"&&l<="E")c=String.fromCharCode(l.charCodeAt(0)-38);else if(l>="F"&&l<="J")c=String.fromCharCode(l.charCodeAt(0)-11);else if(l>="K"&&l<="O")c=String.fromCharCode(l.charCodeAt(0)+16);else if(l>="P"&&l<="T")c=String.fromCharCode(l.charCodeAt(0)+43);else if(l==="U")c="\0";else if(l==="V")c="@";else if(l==="W")c="`";else if(l>="X"&&l<="Z")c="";else throw new Hr;break;case"c":if(l>="A"&&l<="O")c=String.fromCharCode(l.charCodeAt(0)-32);else if(l==="Z")c=":";else throw new Hr;break}a+=c,s++}else a+=o}return a},e.prototype.checkChecksums=function(r){var n=r.length;this.checkOneChecksum(r,n-2,20),this.checkOneChecksum(r,n-1,15)},e.prototype.checkOneChecksum=function(r,n,a){for(var s=1,o=0,l=n-1;l>=0;l--)o+=s*e.ALPHABET_STRING.indexOf(r.charAt(l)),++s>a&&(s=1);if(r.charAt(n)!==e.ALPHABET_STRING[o%47])throw new so},e.ALPHABET_STRING="0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZ-. $/+%abcd*",e.CHARACTER_ENCODINGS=[276,328,324,322,296,292,290,336,274,266,424,420,418,404,402,394,360,356,354,308,282,344,332,326,300,278,436,434,428,422,406,410,364,358,310,314,302,468,466,458,366,374,430,294,474,470,306,350],e.ASTERISK_ENCODING=e.CHARACTER_ENCODINGS[47],e}(Po),sUe=function(){var t=function(e,r){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,a){n.__proto__=a}||function(n,a){for(var s in a)a.hasOwnProperty(s)&&(n[s]=a[s])},t(e,r)};return function(e,r){t(e,r);function n(){this.constructor=e}e.prototype=r===null?Object.create(r):(n.prototype=r.prototype,new n)}}(),iUe=function(t){var e=typeof Symbol=="function"&&Symbol.iterator,r=e&&t[e],n=0;if(r)return r.call(t);if(t&&typeof t.length=="number")return{next:function(){return t&&n>=t.length&&(t=void 0),{value:t&&t[n++],done:!t}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")},j$=function(t){sUe(e,t);function e(){var r=t!==null&&t.apply(this,arguments)||this;return r.narrowLineWidth=-1,r}return e.prototype.decodeRow=function(r,n,a){var s,o,l=this.decodeStart(n),c=this.decodeEnd(n),u=new Zn;e.decodeMiddle(n,l[1],c[0],u);var d=u.toString(),f=null;a!=null&&(f=a.get(Ns.ALLOWED_LENGTHS)),f==null&&(f=e.DEFAULT_ALLOWED_LENGTHS);var A=d.length,h=!1,m=0;try{for(var p=iUe(f),x=p.next();!x.done;x=p.next()){var v=x.value;if(A===v){h=!0;break}v>m&&(m=v)}}catch(w){s={error:w}}finally{try{x&&!x.done&&(o=p.return)&&o.call(p)}finally{if(s)throw s.error}}if(!h&&A>m&&(h=!0),!h)throw new Hr;var y=[new fn(l[1],r),new fn(c[0],r)],b=new cc(d,null,0,y,jn.ITF,new Date().getTime());return b},e.decodeMiddle=function(r,n,a,s){var o=new Int32Array(10),l=new Int32Array(5),c=new Int32Array(5);for(o.fill(0),l.fill(0),c.fill(0);n<a;){Po.recordPattern(r,n,o);for(var u=0;u<5;u++){var d=2*u;l[u]=o[d],c[u]=o[d+1]}var f=e.decodeDigit(l);s.append(f.toString()),f=this.decodeDigit(c),s.append(f.toString()),o.forEach(function(A){n+=A})}},e.prototype.decodeStart=function(r){var n=e.skipWhiteSpace(r),a=e.findGuardPattern(r,n,e.START_PATTERN);return this.narrowLineWidth=(a[1]-a[0])/4,this.validateQuietZone(r,a[0]),a},e.prototype.validateQuietZone=function(r,n){var a=this.narrowLineWidth*10;a=a<n?a:n;for(var s=n-1;a>0&&s>=0&&!r.get(s);s--)a--;if(a!==0)throw new rr},e.skipWhiteSpace=function(r){var n=r.getSize(),a=r.getNextSet(0);if(a===n)throw new rr;return a},e.prototype.decodeEnd=function(r){r.reverse();try{var n=e.skipWhiteSpace(r),a=void 0;try{a=e.findGuardPattern(r,n,e.END_PATTERN_REVERSED[0])}catch(o){o instanceof rr&&(a=e.findGuardPattern(r,n,e.END_PATTERN_REVERSED[1]))}this.validateQuietZone(r,a[0]);var s=a[0];return a[0]=r.getSize()-a[1],a[1]=r.getSize()-s,a}finally{r.reverse()}},e.findGuardPattern=function(r,n,a){var s=a.length,o=new Int32Array(s),l=r.getSize(),c=!1,u=0,d=n;o.fill(0);for(var f=n;f<l;f++)if(r.get(f)!==c)o[u]++;else{if(u===s-1){if(Po.patternMatchVariance(o,a,e.MAX_INDIVIDUAL_VARIANCE)<e.MAX_AVG_VARIANCE)return[d,f];d+=o[0]+o[1],ws.arraycopy(o,2,o,0,u-1),o[u-1]=0,o[u]=0,u--}else u++;o[u]=1,c=!c}throw new rr},e.decodeDigit=function(r){for(var n=e.MAX_AVG_VARIANCE,a=-1,s=e.PATTERNS.length,o=0;o<s;o++){var l=e.PATTERNS[o],c=Po.patternMatchVariance(r,l,e.MAX_INDIVIDUAL_VARIANCE);c<n?(n=c,a=o):c===n&&(a=-1)}if(a>=0)return a%10;throw new rr},e.PATTERNS=[Int32Array.from([1,1,2,2,1]),Int32Array.from([2,1,1,1,2]),Int32Array.from([1,2,1,1,2]),Int32Array.from([2,2,1,1,1]),Int32Array.from([1,1,2,1,2]),Int32Array.from([2,1,2,1,1]),Int32Array.from([1,2,2,1,1]),Int32Array.from([1,1,1,2,2]),Int32Array.from([2,1,1,2,1]),Int32Array.from([1,2,1,2,1]),Int32Array.from([1,1,3,3,1]),Int32Array.from([3,1,1,1,3]),Int32Array.from([1,3,1,1,3]),Int32Array.from([3,3,1,1,1]),Int32Array.from([1,1,3,1,3]),Int32Array.from([3,1,3,1,1]),Int32Array.from([1,3,3,1,1]),Int32Array.from([1,1,1,3,3]),Int32Array.from([3,1,1,3,1]),Int32Array.from([1,3,1,3,1])],e.MAX_AVG_VARIANCE=.38,e.MAX_INDIVIDUAL_VARIANCE=.5,e.DEFAULT_ALLOWED_LENGTHS=[6,8,10,12,14],e.START_PATTERN=Int32Array.from([1,1,1,1]),e.END_PATTERN_REVERSED=[Int32Array.from([1,1,2]),Int32Array.from([1,1,3])],e}(Po),oUe=function(){var t=function(e,r){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,a){n.__proto__=a}||function(n,a){for(var s in a)a.hasOwnProperty(s)&&(n[s]=a[s])},t(e,r)};return function(e,r){t(e,r);function n(){this.constructor=e}e.prototype=r===null?Object.create(r):(n.prototype=r.prototype,new n)}}(),Hv=function(t){oUe(e,t);function e(){var r=t!==null&&t.apply(this,arguments)||this;return r.decodeRowStringBuffer="",r}return e.findStartGuardPattern=function(r){for(var n=!1,a,s=0,o=Int32Array.from([0,0,0]);!n;){o=Int32Array.from([0,0,0]),a=e.findGuardPattern(r,s,!1,this.START_END_PATTERN,o);var l=a[0];s=a[1];var c=l-(s-l);c>=0&&(n=r.isRange(c,l,!1))}return a},e.checkChecksum=function(r){return e.checkStandardUPCEANChecksum(r)},e.checkStandardUPCEANChecksum=function(r){var n=r.length;if(n===0)return!1;var a=parseInt(r.charAt(n-1),10);return e.getStandardUPCEANChecksum(r.substring(0,n-1))===a},e.getStandardUPCEANChecksum=function(r){for(var n=r.length,a=0,s=n-1;s>=0;s-=2){var o=r.charAt(s).charCodeAt(0)-48;if(o<0||o>9)throw new Hr;a+=o}a*=3;for(var s=n-2;s>=0;s-=2){var o=r.charAt(s).charCodeAt(0)-48;if(o<0||o>9)throw new Hr;a+=o}return(1e3-a)%10},e.decodeEnd=function(r,n){return e.findGuardPattern(r,n,!1,e.START_END_PATTERN,new Int32Array(e.START_END_PATTERN.length).fill(0))},e.findGuardPatternWithoutCounters=function(r,n,a,s){return this.findGuardPattern(r,n,a,s,new Int32Array(s.length))},e.findGuardPattern=function(r,n,a,s,o){var l=r.getSize();n=a?r.getNextUnset(n):r.getNextSet(n);for(var c=0,u=n,d=s.length,f=a,A=n;A<l;A++)if(r.get(A)!==f)o[c]++;else{if(c===d-1){if(Po.patternMatchVariance(o,s,e.MAX_INDIVIDUAL_VARIANCE)<e.MAX_AVG_VARIANCE)return Int32Array.from([u,A]);u+=o[0]+o[1];for(var h=o.slice(2,o.length),m=0;m<c-1;m++)o[m]=h[m];o[c-1]=0,o[c]=0,c--}else c++;o[c]=1,f=!f}throw new rr},e.decodeDigit=function(r,n,a,s){this.recordPattern(r,a,n);for(var o=this.MAX_AVG_VARIANCE,l=-1,c=s.length,u=0;u<c;u++){var d=s[u],f=Po.patternMatchVariance(n,d,e.MAX_INDIVIDUAL_VARIANCE);f<o&&(o=f,l=u)}if(l>=0)return l;throw new rr},e.MAX_AVG_VARIANCE=.48,e.MAX_INDIVIDUAL_VARIANCE=.7,e.START_END_PATTERN=Int32Array.from([1,1,1]),e.MIDDLE_PATTERN=Int32Array.from([1,1,1,1,1]),e.END_PATTERN=Int32Array.from([1,1,1,1,1,1]),e.L_PATTERNS=[Int32Array.from([3,2,1,1]),Int32Array.from([2,2,2,1]),Int32Array.from([2,1,2,2]),Int32Array.from([1,4,1,1]),Int32Array.from([1,1,3,2]),Int32Array.from([1,2,3,1]),Int32Array.from([1,1,1,4]),Int32Array.from([1,3,1,2]),Int32Array.from([1,2,1,3]),Int32Array.from([3,1,1,2])],e}(Po),lUe=function(t){var e=typeof Symbol=="function"&&Symbol.iterator,r=e&&t[e],n=0;if(r)return r.call(t);if(t&&typeof t.length=="number")return{next:function(){return t&&n>=t.length&&(t=void 0),{value:t&&t[n++],done:!t}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")},cUe=function(){function t(){this.CHECK_DIGIT_ENCODINGS=[24,20,18,17,12,6,3,10,9,5],this.decodeMiddleCounters=Int32Array.from([0,0,0,0]),this.decodeRowStringBuffer=""}return t.prototype.decodeRow=function(e,r,n){var a=this.decodeRowStringBuffer,s=this.decodeMiddle(r,n,a),o=a.toString(),l=t.parseExtensionString(o),c=[new fn((n[0]+n[1])/2,e),new fn(s,e)],u=new cc(o,null,0,c,jn.UPC_EAN_EXTENSION,new Date().getTime());return l!=null&&u.putAllMetadata(l),u},t.prototype.decodeMiddle=function(e,r,n){var a,s,o=this.decodeMiddleCounters;o[0]=0,o[1]=0,o[2]=0,o[3]=0;for(var l=e.getSize(),c=r[1],u=0,d=0;d<5&&c<l;d++){var f=Hv.decodeDigit(e,o,c,Hv.L_AND_G_PATTERNS);n+=String.fromCharCode(48+f%10);try{for(var A=(a=void 0,lUe(o)),h=A.next();!h.done;h=A.next()){var m=h.value;c+=m}}catch(x){a={error:x}}finally{try{h&&!h.done&&(s=A.return)&&s.call(A)}finally{if(a)throw a.error}}f>=10&&(u|=1<<4-d),d!==4&&(c=e.getNextSet(c),c=e.getNextUnset(c))}if(n.length!==5)throw new rr;var p=this.determineCheckDigit(u);if(t.extensionChecksum(n.toString())!==p)throw new rr;return c},t.extensionChecksum=function(e){for(var r=e.length,n=0,a=r-2;a>=0;a-=2)n+=e.charAt(a).charCodeAt(0)-48;n*=3;for(var a=r-1;a>=0;a-=2)n+=e.charAt(a).charCodeAt(0)-48;return n*=3,n%10},t.prototype.determineCheckDigit=function(e){for(var r=0;r<10;r++)if(e===this.CHECK_DIGIT_ENCODINGS[r])return r;throw new rr},t.parseExtensionString=function(e){if(e.length!==5)return null;var r=t.parseExtension5String(e);return r==null?null:new Map([[Il.SUGGESTED_PRICE,r]])},t.parseExtension5String=function(e){var r;switch(e.charAt(0)){case"0":r="";break;case"5":r="$";break;case"9":switch(e){case"90000":return null;case"99991":return"0.00";case"99990":return"Used"}r="";break;default:r="";break}var n=parseInt(e.substring(1)),a=(n/100).toString(),s=n%100,o=s<10?"0"+s:s.toString();return r+a+"."+o},t}(),uUe=function(t){var e=typeof Symbol=="function"&&Symbol.iterator,r=e&&t[e],n=0;if(r)return r.call(t);if(t&&typeof t.length=="number")return{next:function(){return t&&n>=t.length&&(t=void 0),{value:t&&t[n++],done:!t}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")},dUe=function(){function t(){this.decodeMiddleCounters=Int32Array.from([0,0,0,0]),this.decodeRowStringBuffer=""}return t.prototype.decodeRow=function(e,r,n){var a=this.decodeRowStringBuffer,s=this.decodeMiddle(r,n,a),o=a.toString(),l=t.parseExtensionString(o),c=[new fn((n[0]+n[1])/2,e),new fn(s,e)],u=new cc(o,null,0,c,jn.UPC_EAN_EXTENSION,new Date().getTime());return l!=null&&u.putAllMetadata(l),u},t.prototype.decodeMiddle=function(e,r,n){var a,s,o=this.decodeMiddleCounters;o[0]=0,o[1]=0,o[2]=0,o[3]=0;for(var l=e.getSize(),c=r[1],u=0,d=0;d<2&&c<l;d++){var f=Hv.decodeDigit(e,o,c,Hv.L_AND_G_PATTERNS);n+=String.fromCharCode(48+f%10);try{for(var A=(a=void 0,uUe(o)),h=A.next();!h.done;h=A.next()){var m=h.value;c+=m}}catch(p){a={error:p}}finally{try{h&&!h.done&&(s=A.return)&&s.call(A)}finally{if(a)throw a.error}}f>=10&&(u|=1<<1-d),d!==1&&(c=e.getNextSet(c),c=e.getNextUnset(c))}if(n.length!==2)throw new rr;if(parseInt(n.toString())%4!==u)throw new rr;return c},t.parseExtensionString=function(e){return e.length!==2?null:new Map([[Il.ISSUE_NUMBER,parseInt(e)]])},t}(),fUe=function(){function t(){}return t.decodeRow=function(e,r,n){var a=Hv.findGuardPattern(r,n,!1,this.EXTENSION_START_PATTERN,new Int32Array(this.EXTENSION_START_PATTERN.length).fill(0));try{var s=new cUe;return s.decodeRow(e,r,a)}catch{var o=new dUe;return o.decodeRow(e,r,a)}},t.EXTENSION_START_PATTERN=Int32Array.from([1,1,2]),t}(),hUe=function(){var t=function(e,r){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,a){n.__proto__=a}||function(n,a){for(var s in a)a.hasOwnProperty(s)&&(n[s]=a[s])},t(e,r)};return function(e,r){t(e,r);function n(){this.constructor=e}e.prototype=r===null?Object.create(r):(n.prototype=r.prototype,new n)}}(),wo=function(t){hUe(e,t);function e(){var r=t.call(this)||this;r.decodeRowStringBuffer="",e.L_AND_G_PATTERNS=e.L_PATTERNS.map(function(l){return Int32Array.from(l)});for(var n=10;n<20;n++){for(var a=e.L_PATTERNS[n-10],s=new Int32Array(a.length),o=0;o<a.length;o++)s[o]=a[a.length-o-1];e.L_AND_G_PATTERNS[n]=s}return r}return e.prototype.decodeRow=function(r,n,a){var s=e.findStartGuardPattern(n),o=a==null?null:a.get(Ns.NEED_RESULT_POINT_CALLBACK);if(o!=null){var l=new fn((s[0]+s[1])/2,r);o.foundPossibleResultPoint(l)}var c=this.decodeMiddle(n,s,this.decodeRowStringBuffer),u=c.rowOffset,d=c.resultString;if(o!=null){var f=new fn(u,r);o.foundPossibleResultPoint(f)}var A=e.decodeEnd(n,u);if(o!=null){var h=new fn((A[0]+A[1])/2,r);o.foundPossibleResultPoint(h)}var m=A[1],p=m+(m-A[0]);if(p>=n.getSize()||!n.isRange(m,p,!1))throw new rr;var x=d.toString();if(x.length<8)throw new Hr;if(!e.checkChecksum(x))throw new so;var v=(s[1]+s[0])/2,y=(A[1]+A[0])/2,b=this.getBarcodeFormat(),w=[new fn(v,r),new fn(y,r)],j=new cc(x,null,0,w,b,new Date().getTime()),I=0;try{var _=fUe.decodeRow(r,n,A[1]);j.putMetadata(Il.UPC_EAN_EXTENSION,_.getText()),j.putAllMetadata(_.getResultMetadata()),j.addResultPoints(_.getResultPoints()),I=_.getText().length}catch{}var S=a==null?null:a.get(Ns.ALLOWED_EAN_EXTENSIONS);if(S!=null){var E=!1;for(var T in S)if(I.toString()===T){E=!0;break}if(!E)throw new rr}return b===jn.EAN_13||jn.UPC_A,j},e.checkChecksum=function(r){return e.checkStandardUPCEANChecksum(r)},e.checkStandardUPCEANChecksum=function(r){var n=r.length;if(n===0)return!1;var a=parseInt(r.charAt(n-1),10);return e.getStandardUPCEANChecksum(r.substring(0,n-1))===a},e.getStandardUPCEANChecksum=function(r){for(var n=r.length,a=0,s=n-1;s>=0;s-=2){var o=r.charAt(s).charCodeAt(0)-48;if(o<0||o>9)throw new Hr;a+=o}a*=3;for(var s=n-2;s>=0;s-=2){var o=r.charAt(s).charCodeAt(0)-48;if(o<0||o>9)throw new Hr;a+=o}return(1e3-a)%10},e.decodeEnd=function(r,n){return e.findGuardPattern(r,n,!1,e.START_END_PATTERN,new Int32Array(e.START_END_PATTERN.length).fill(0))},e}(Hv),AUe=function(){var t=function(e,r){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,a){n.__proto__=a}||function(n,a){for(var s in a)a.hasOwnProperty(s)&&(n[s]=a[s])},t(e,r)};return function(e,r){t(e,r);function n(){this.constructor=e}e.prototype=r===null?Object.create(r):(n.prototype=r.prototype,new n)}}(),P$=function(t){var e=typeof Symbol=="function"&&Symbol.iterator,r=e&&t[e],n=0;if(r)return r.call(t);if(t&&typeof t.length=="number")return{next:function(){return t&&n>=t.length&&(t=void 0),{value:t&&t[n++],done:!t}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")},dF=function(t){AUe(e,t);function e(){var r=t.call(this)||this;return r.decodeMiddleCounters=Int32Array.from([0,0,0,0]),r}return e.prototype.decodeMiddle=function(r,n,a){var s,o,l,c,u=this.decodeMiddleCounters;u[0]=0,u[1]=0,u[2]=0,u[3]=0;for(var d=r.getSize(),f=n[1],A=0,h=0;h<6&&f<d;h++){var m=wo.decodeDigit(r,u,f,wo.L_AND_G_PATTERNS);a+=String.fromCharCode(48+m%10);try{for(var p=(s=void 0,P$(u)),x=p.next();!x.done;x=p.next()){var v=x.value;f+=v}}catch(j){s={error:j}}finally{try{x&&!x.done&&(o=p.return)&&o.call(p)}finally{if(s)throw s.error}}m>=10&&(A|=1<<5-h)}a=e.determineFirstDigit(a,A);var y=wo.findGuardPattern(r,f,!0,wo.MIDDLE_PATTERN,new Int32Array(wo.MIDDLE_PATTERN.length).fill(0));f=y[1];for(var h=0;h<6&&f<d;h++){var m=wo.decodeDigit(r,u,f,wo.L_PATTERNS);a+=String.fromCharCode(48+m);try{for(var b=(l=void 0,P$(u)),w=b.next();!w.done;w=b.next()){var v=w.value;f+=v}}catch(_){l={error:_}}finally{try{w&&!w.done&&(c=b.return)&&c.call(b)}finally{if(l)throw l.error}}}return{rowOffset:f,resultString:a}},e.prototype.getBarcodeFormat=function(){return jn.EAN_13},e.determineFirstDigit=function(r,n){for(var a=0;a<10;a++)if(n===this.FIRST_DIGIT_ENCODINGS[a])return r=String.fromCharCode(48+a)+r,r;throw new rr},e.FIRST_DIGIT_ENCODINGS=[0,11,13,14,19,25,28,21,22,26],e}(wo),mUe=function(){var t=function(e,r){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,a){n.__proto__=a}||function(n,a){for(var s in a)a.hasOwnProperty(s)&&(n[s]=a[s])},t(e,r)};return function(e,r){t(e,r);function n(){this.constructor=e}e.prototype=r===null?Object.create(r):(n.prototype=r.prototype,new n)}}(),B$=function(t){var e=typeof Symbol=="function"&&Symbol.iterator,r=e&&t[e],n=0;if(r)return r.call(t);if(t&&typeof t.length=="number")return{next:function(){return t&&n>=t.length&&(t=void 0),{value:t&&t[n++],done:!t}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")},T$=function(t){mUe(e,t);function e(){var r=t.call(this)||this;return r.decodeMiddleCounters=Int32Array.from([0,0,0,0]),r}return e.prototype.decodeMiddle=function(r,n,a){var s,o,l,c,u=this.decodeMiddleCounters;u[0]=0,u[1]=0,u[2]=0,u[3]=0;for(var d=r.getSize(),f=n[1],A=0;A<4&&f<d;A++){var h=wo.decodeDigit(r,u,f,wo.L_PATTERNS);a+=String.fromCharCode(48+h);try{for(var m=(s=void 0,B$(u)),p=m.next();!p.done;p=m.next()){var x=p.value;f+=x}}catch(w){s={error:w}}finally{try{p&&!p.done&&(o=m.return)&&o.call(m)}finally{if(s)throw s.error}}}var v=wo.findGuardPattern(r,f,!0,wo.MIDDLE_PATTERN,new Int32Array(wo.MIDDLE_PATTERN.length).fill(0));f=v[1];for(var A=0;A<4&&f<d;A++){var h=wo.decodeDigit(r,u,f,wo.L_PATTERNS);a+=String.fromCharCode(48+h);try{for(var y=(l=void 0,B$(u)),b=y.next();!b.done;b=y.next()){var x=b.value;f+=x}}catch(I){l={error:I}}finally{try{b&&!b.done&&(c=y.return)&&c.call(y)}finally{if(l)throw l.error}}}return{rowOffset:f,resultString:a}},e.prototype.getBarcodeFormat=function(){return jn.EAN_8},e}(wo),pUe=function(){var t=function(e,r){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,a){n.__proto__=a}||function(n,a){for(var s in a)a.hasOwnProperty(s)&&(n[s]=a[s])},t(e,r)};return function(e,r){t(e,r);function n(){this.constructor=e}e.prototype=r===null?Object.create(r):(n.prototype=r.prototype,new n)}}(),k$=function(t){pUe(e,t);function e(){var r=t!==null&&t.apply(this,arguments)||this;return r.ean13Reader=new dF,r}return e.prototype.getBarcodeFormat=function(){return jn.UPC_A},e.prototype.decode=function(r,n){return this.maybeReturnResult(this.ean13Reader.decode(r))},e.prototype.decodeRow=function(r,n,a){return this.maybeReturnResult(this.ean13Reader.decodeRow(r,n,a))},e.prototype.decodeMiddle=function(r,n,a){return this.ean13Reader.decodeMiddle(r,n,a)},e.prototype.maybeReturnResult=function(r){var n=r.getText();if(n.charAt(0)==="0"){var a=new cc(n.substring(1),null,null,r.getResultPoints(),jn.UPC_A);return r.getResultMetadata()!=null&&a.putAllMetadata(r.getResultMetadata()),a}else throw new rr},e.prototype.reset=function(){this.ean13Reader.reset()},e}(wo),gUe=function(){var t=function(e,r){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,a){n.__proto__=a}||function(n,a){for(var s in a)a.hasOwnProperty(s)&&(n[s]=a[s])},t(e,r)};return function(e,r){t(e,r);function n(){this.constructor=e}e.prototype=r===null?Object.create(r):(n.prototype=r.prototype,new n)}}(),xUe=function(t){var e=typeof Symbol=="function"&&Symbol.iterator,r=e&&t[e],n=0;if(r)return r.call(t);if(t&&typeof t.length=="number")return{next:function(){return t&&n>=t.length&&(t=void 0),{value:t&&t[n++],done:!t}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")},F$=function(t){gUe(e,t);function e(){var r=t.call(this)||this;return r.decodeMiddleCounters=new Int32Array(4),r}return e.prototype.decodeMiddle=function(r,n,a){var s,o,l=this.decodeMiddleCounters.map(function(x){return x});l[0]=0,l[1]=0,l[2]=0,l[3]=0;for(var c=r.getSize(),u=n[1],d=0,f=0;f<6&&u<c;f++){var A=e.decodeDigit(r,l,u,e.L_AND_G_PATTERNS);a+=String.fromCharCode(48+A%10);try{for(var h=(s=void 0,xUe(l)),m=h.next();!m.done;m=h.next()){var p=m.value;u+=p}}catch(x){s={error:x}}finally{try{m&&!m.done&&(o=h.return)&&o.call(h)}finally{if(s)throw s.error}}A>=10&&(d|=1<<5-f)}return e.determineNumSysAndCheckDigit(new Zn(a),d),u},e.prototype.decodeEnd=function(r,n){return e.findGuardPatternWithoutCounters(r,n,!0,e.MIDDLE_END_PATTERN)},e.prototype.checkChecksum=function(r){return wo.checkChecksum(e.convertUPCEtoUPCA(r))},e.determineNumSysAndCheckDigit=function(r,n){for(var a=0;a<=1;a++)for(var s=0;s<10;s++)if(n===this.NUMSYS_AND_CHECK_DIGIT_PATTERNS[a][s]){r.insert(0,"0"+a),r.append("0"+s);return}throw rr.getNotFoundInstance()},e.prototype.getBarcodeFormat=function(){return jn.UPC_E},e.convertUPCEtoUPCA=function(r){var n=r.slice(1,7).split("").map(function(o){return o.charCodeAt(0)}),a=new Zn;a.append(r.charAt(0));var s=n[5];switch(s){case 0:case 1:case 2:a.appendChars(n,0,2),a.append(s),a.append("0000"),a.appendChars(n,2,3);break;case 3:a.appendChars(n,0,3),a.append("00000"),a.appendChars(n,3,2);break;case 4:a.appendChars(n,0,4),a.append("00000"),a.append(n[4]);break;default:a.appendChars(n,0,5),a.append("0000"),a.append(s);break}return r.length>=8&&a.append(r.charAt(7)),a.toString()},e.MIDDLE_END_PATTERN=Int32Array.from([1,1,1,1,1,1]),e.NUMSYS_AND_CHECK_DIGIT_PATTERNS=[Int32Array.from([56,52,50,49,44,38,35,42,41,37]),Int32Array.from([7,11,13,14,19,25,28,21,22,1])],e}(wo),vUe=function(){var t=function(e,r){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,a){n.__proto__=a}||function(n,a){for(var s in a)a.hasOwnProperty(s)&&(n[s]=a[s])},t(e,r)};return function(e,r){t(e,r);function n(){this.constructor=e}e.prototype=r===null?Object.create(r):(n.prototype=r.prototype,new n)}}(),O$=function(t){var e=typeof Symbol=="function"&&Symbol.iterator,r=e&&t[e],n=0;if(r)return r.call(t);if(t&&typeof t.length=="number")return{next:function(){return t&&n>=t.length&&(t=void 0),{value:t&&t[n++],done:!t}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")},H5=function(t){vUe(e,t);function e(r){var n=t.call(this)||this,a=r==null?null:r.get(Ns.POSSIBLE_FORMATS),s=[];return a!=null&&(a.indexOf(jn.EAN_13)>-1&&s.push(new dF),a.indexOf(jn.UPC_A)>-1&&s.push(new k$),a.indexOf(jn.EAN_8)>-1&&s.push(new T$),a.indexOf(jn.UPC_E)>-1&&s.push(new F$)),s.length===0&&(s.push(new dF),s.push(new k$),s.push(new T$),s.push(new F$)),n.readers=s,n}return e.prototype.decodeRow=function(r,n,a){var s,o;try{for(var l=O$(this.readers),c=l.next();!c.done;c=l.next()){var u=c.value;try{var d=u.decodeRow(r,n,a),f=d.getBarcodeFormat()===jn.EAN_13&&d.getText().charAt(0)==="0",A=a==null?null:a.get(Ns.POSSIBLE_FORMATS),h=A==null||A.includes(jn.UPC_A);if(f&&h){var m=d.getRawBytes(),p=new cc(d.getText().substring(1),m,m?m.length:null,d.getResultPoints(),jn.UPC_A);return p.putAllMetadata(d.getResultMetadata()),p}return d}catch{}}}catch(x){s={error:x}}finally{try{c&&!c.done&&(o=l.return)&&o.call(l)}finally{if(s)throw s.error}}throw new rr},e.prototype.reset=function(){var r,n;try{for(var a=O$(this.readers),s=a.next();!s.done;s=a.next()){var o=s.value;o.reset()}}catch(l){r={error:l}}finally{try{s&&!s.done&&(n=a.return)&&n.call(a)}finally{if(r)throw r.error}}},e}(Po),yUe=function(){var t=function(e,r){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,a){n.__proto__=a}||function(n,a){for(var s in a)a.hasOwnProperty(s)&&(n[s]=a[s])},t(e,r)};return function(e,r){t(e,r);function n(){this.constructor=e}e.prototype=r===null?Object.create(r):(n.prototype=r.prototype,new n)}}(),bUe=function(t){yUe(e,t);function e(){var r=t!==null&&t.apply(this,arguments)||this;return r.CODA_BAR_CHAR_SET={nnnnnww:"0",nnnnwwn:"1",nnnwnnw:"2",wwnnnnn:"3",nnwnnwn:"4",wnnnnwn:"5",nwnnnnw:"6",nwnnwnn:"7",nwwnnnn:"8",wnnwnnn:"9",nnnwwnn:"-",nnwwnnn:"$",wnnnwnw:":",wnwnnnw:"/",wnwnwnn:".",nnwwwww:"+",nnwwnwn:"A",nwnwnnw:"B",nnnwnww:"C",nnnwwwn:"D"},r}return e.prototype.decodeRow=function(r,n,a){var s=this.getValidRowData(n);if(!s)throw new rr;var o=this.codaBarDecodeRow(s.row);if(!o)throw new rr;return new cc(o,null,0,[new fn(s.left,r),new fn(s.right,r)],jn.CODABAR,new Date().getTime())},e.prototype.getValidRowData=function(r){var n=r.toArray(),a=n.indexOf(!0);if(a===-1)return null;var s=n.lastIndexOf(!0);if(s<=a)return null;n=n.slice(a,s+1);for(var o=[],l=n[0],c=1,u=1;u<n.length;u++)n[u]===l?c++:(l=n[u],o.push(c),c=1);return o.push(c),o.length<23&&(o.length+1)%8!==0?null:{row:o,left:a,right:s}},e.prototype.codaBarDecodeRow=function(r){for(var n=[],a=Math.ceil(r.reduce(function(c,u){return(c+u)/2},0));r.length>0;){var s=r.splice(0,8).splice(0,7),o=s.map(function(c){return c<a?"n":"w"}).join("");if(this.CODA_BAR_CHAR_SET[o]===void 0)return null;n.push(this.CODA_BAR_CHAR_SET[o])}var l=n.join("");return this.validCodaBarString(l)?l:null},e.prototype.validCodaBarString=function(r){var n=/^[A-D].{1,}[A-D]$/;return n.test(r)},e}(Po),wUe=function(){var t=function(e,r){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,a){n.__proto__=a}||function(n,a){for(var s in a)a.hasOwnProperty(s)&&(n[s]=a[s])},t(e,r)};return function(e,r){t(e,r);function n(){this.constructor=e}e.prototype=r===null?Object.create(r):(n.prototype=r.prototype,new n)}}(),NUe=function(t){var e=typeof Symbol=="function"&&Symbol.iterator,r=e&&t[e],n=0;if(r)return r.call(t);if(t&&typeof t.length=="number")return{next:function(){return t&&n>=t.length&&(t=void 0),{value:t&&t[n++],done:!t}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")},cp=function(t){wUe(e,t);function e(){var r=t.call(this)||this;return r.decodeFinderCounters=new Int32Array(4),r.dataCharacterCounters=new Int32Array(8),r.oddRoundingErrors=new Array(4),r.evenRoundingErrors=new Array(4),r.oddCounts=new Array(r.dataCharacterCounters.length/2),r.evenCounts=new Array(r.dataCharacterCounters.length/2),r}return e.prototype.getDecodeFinderCounters=function(){return this.decodeFinderCounters},e.prototype.getDataCharacterCounters=function(){return this.dataCharacterCounters},e.prototype.getOddRoundingErrors=function(){return this.oddRoundingErrors},e.prototype.getEvenRoundingErrors=function(){return this.evenRoundingErrors},e.prototype.getOddCounts=function(){return this.oddCounts},e.prototype.getEvenCounts=function(){return this.evenCounts},e.prototype.parseFinderValue=function(r,n){for(var a=0;a<n.length;a++)if(Po.patternMatchVariance(r,n[a],e.MAX_INDIVIDUAL_VARIANCE)<e.MAX_AVG_VARIANCE)return a;throw new rr},e.count=function(r){return ja.sum(new Int32Array(r))},e.increment=function(r,n){for(var a=0,s=n[0],o=1;o<r.length;o++)n[o]>s&&(s=n[o],a=o);r[a]++},e.decrement=function(r,n){for(var a=0,s=n[0],o=1;o<r.length;o++)n[o]<s&&(s=n[o],a=o);r[a]--},e.isFinderPattern=function(r){var n,a,s=r[0]+r[1],o=s+r[2]+r[3],l=s/o;if(l>=e.MIN_FINDER_PATTERN_RATIO&&l<=e.MAX_FINDER_PATTERN_RATIO){var c=Number.MAX_SAFE_INTEGER,u=Number.MIN_SAFE_INTEGER;try{for(var d=NUe(r),f=d.next();!f.done;f=d.next()){var A=f.value;A>u&&(u=A),A<c&&(c=A)}}catch(h){n={error:h}}finally{try{f&&!f.done&&(a=d.return)&&a.call(d)}finally{if(n)throw n.error}}return u<10*c}return!1},e.MAX_AVG_VARIANCE=.2,e.MAX_INDIVIDUAL_VARIANCE=.45,e.MIN_FINDER_PATTERN_RATIO=9.5/12,e.MAX_FINDER_PATTERN_RATIO=12.5/14,e}(Po),eI=function(){function t(e,r){this.value=e,this.checksumPortion=r}return t.prototype.getValue=function(){return this.value},t.prototype.getChecksumPortion=function(){return this.checksumPortion},t.prototype.toString=function(){return this.value+"("+this.checksumPortion+")"},t.prototype.equals=function(e){if(!(e instanceof t))return!1;var r=e;return this.value===r.value&&this.checksumPortion===r.checksumPortion},t.prototype.hashCode=function(){return this.value^this.checksumPortion},t}(),yse=function(){function t(e,r,n,a,s){this.value=e,this.startEnd=r,this.value=e,this.startEnd=r,this.resultPoints=new Array,this.resultPoints.push(new fn(n,s)),this.resultPoints.push(new fn(a,s))}return t.prototype.getValue=function(){return this.value},t.prototype.getStartEnd=function(){return this.startEnd},t.prototype.getResultPoints=function(){return this.resultPoints},t.prototype.equals=function(e){if(!(e instanceof t))return!1;var r=e;return this.value===r.value},t.prototype.hashCode=function(){return this.value},t}(),CUe=function(t){var e=typeof Symbol=="function"&&Symbol.iterator,r=e&&t[e],n=0;if(r)return r.call(t);if(t&&typeof t.length=="number")return{next:function(){return t&&n>=t.length&&(t=void 0),{value:t&&t[n++],done:!t}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")},Xx=function(){function t(){}return t.getRSSvalue=function(e,r,n){var a,s,o=0;try{for(var l=CUe(e),c=l.next();!c.done;c=l.next()){var u=c.value;o+=u}}catch(y){a={error:y}}finally{try{c&&!c.done&&(s=l.return)&&s.call(l)}finally{if(a)throw a.error}}for(var d=0,f=0,A=e.length,h=0;h<A-1;h++){var m=void 0;for(m=1,f|=1<<h;m<e[h];m++,f&=~(1<<h)){var p=t.combins(o-m-1,A-h-2);if(n&&f===0&&o-m-(A-h-1)>=A-h-1&&(p-=t.combins(o-m-(A-h),A-h-2)),A-h-1>1){for(var x=0,v=o-m-(A-h-2);v>r;v--)x+=t.combins(o-m-v-1,A-h-3);p-=x*(A-1-h)}else o-m>r&&p--;d+=p}o-=m}return d},t.combins=function(e,r){var n,a;e-r>r?(a=r,n=e-r):(a=e-r,n=r);for(var s=1,o=1,l=e;l>n;l--)s*=l,o<=a&&(s/=o,o++);for(;o<=a;)s/=o,o++;return s},t}(),_Ue=function(){function t(){}return t.buildBitArray=function(e){var r=e.length*2-1;e[e.length-1].getRightChar()==null&&(r-=1);for(var n=12*r,a=new Jo(n),s=0,o=e[0],l=o.getRightChar().getValue(),c=11;c>=0;--c)l&1<<c&&a.set(s),s++;for(var c=1;c<e.length;++c){for(var u=e[c],d=u.getLeftChar().getValue(),f=11;f>=0;--f)d&1<<f&&a.set(s),s++;if(u.getRightChar()!==null)for(var A=u.getRightChar().getValue(),f=11;f>=0;--f)A&1<<f&&a.set(s),s++}return a},t}(),Ym=function(){function t(e,r){r?this.decodedInformation=null:(this.finished=e,this.decodedInformation=r)}return t.prototype.getDecodedInformation=function(){return this.decodedInformation},t.prototype.isFinished=function(){return this.finished},t}(),RR=function(){function t(e){this.newPosition=e}return t.prototype.getNewPosition=function(){return this.newPosition},t}(),EUe=function(){var t=function(e,r){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,a){n.__proto__=a}||function(n,a){for(var s in a)a.hasOwnProperty(s)&&(n[s]=a[s])},t(e,r)};return function(e,r){t(e,r);function n(){this.constructor=e}e.prototype=r===null?Object.create(r):(n.prototype=r.prototype,new n)}}(),Jd=function(t){EUe(e,t);function e(r,n){var a=t.call(this,r)||this;return a.value=n,a}return e.prototype.getValue=function(){return this.value},e.prototype.isFNC1=function(){return this.value===e.FNC1},e.FNC1="$",e}(RR),SUe=function(){var t=function(e,r){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,a){n.__proto__=a}||function(n,a){for(var s in a)a.hasOwnProperty(s)&&(n[s]=a[s])},t(e,r)};return function(e,r){t(e,r);function n(){this.constructor=e}e.prototype=r===null?Object.create(r):(n.prototype=r.prototype,new n)}}(),Jm=function(t){SUe(e,t);function e(r,n,a){var s=t.call(this,r)||this;return a?(s.remaining=!0,s.remainingValue=s.remainingValue):(s.remaining=!1,s.remainingValue=0),s.newString=n,s}return e.prototype.getNewString=function(){return this.newString},e.prototype.isRemaining=function(){return this.remaining},e.prototype.getRemainingValue=function(){return this.remainingValue},e}(RR),IUe=function(){var t=function(e,r){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,a){n.__proto__=a}||function(n,a){for(var s in a)a.hasOwnProperty(s)&&(n[s]=a[s])},t(e,r)};return function(e,r){t(e,r);function n(){this.constructor=e}e.prototype=r===null?Object.create(r):(n.prototype=r.prototype,new n)}}(),xx=function(t){IUe(e,t);function e(r,n,a){var s=t.call(this,r)||this;if(n<0||n>10||a<0||a>10)throw new Hr;return s.firstDigit=n,s.secondDigit=a,s}return e.prototype.getFirstDigit=function(){return this.firstDigit},e.prototype.getSecondDigit=function(){return this.secondDigit},e.prototype.getValue=function(){return this.firstDigit*10+this.secondDigit},e.prototype.isFirstDigitFNC1=function(){return this.firstDigit===e.FNC1},e.prototype.isSecondDigitFNC1=function(){return this.secondDigit===e.FNC1},e.prototype.isAnyFNC1=function(){return this.firstDigit===e.FNC1||this.secondDigit===e.FNC1},e.FNC1=10,e}(RR),o_=function(t){var e=typeof Symbol=="function"&&Symbol.iterator,r=e&&t[e],n=0;if(r)return r.call(t);if(t&&typeof t.length=="number")return{next:function(){return t&&n>=t.length&&(t=void 0),{value:t&&t[n++],done:!t}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")},jUe=function(){function t(){}return t.parseFieldsInGeneralPurpose=function(e){var r,n,a,s,o,l,c,u;if(!e)return null;if(e.length<2)throw new rr;var d=e.substring(0,2);try{for(var f=o_(t.TWO_DIGIT_DATA_LENGTH),A=f.next();!A.done;A=f.next()){var h=A.value;if(h[0]===d)return h[1]===t.VARIABLE_LENGTH?t.processVariableAI(2,h[2],e):t.processFixedAI(2,h[1],e)}}catch(I){r={error:I}}finally{try{A&&!A.done&&(n=f.return)&&n.call(f)}finally{if(r)throw r.error}}if(e.length<3)throw new rr;var m=e.substring(0,3);try{for(var p=o_(t.THREE_DIGIT_DATA_LENGTH),x=p.next();!x.done;x=p.next()){var h=x.value;if(h[0]===m)return h[1]===t.VARIABLE_LENGTH?t.processVariableAI(3,h[2],e):t.processFixedAI(3,h[1],e)}}catch(I){a={error:I}}finally{try{x&&!x.done&&(s=p.return)&&s.call(p)}finally{if(a)throw a.error}}try{for(var v=o_(t.THREE_DIGIT_PLUS_DIGIT_DATA_LENGTH),y=v.next();!y.done;y=v.next()){var h=y.value;if(h[0]===m)return h[1]===t.VARIABLE_LENGTH?t.processVariableAI(4,h[2],e):t.processFixedAI(4,h[1],e)}}catch(I){o={error:I}}finally{try{y&&!y.done&&(l=v.return)&&l.call(v)}finally{if(o)throw o.error}}if(e.length<4)throw new rr;var b=e.substring(0,4);try{for(var w=o_(t.FOUR_DIGIT_DATA_LENGTH),j=w.next();!j.done;j=w.next()){var h=j.value;if(h[0]===b)return h[1]===t.VARIABLE_LENGTH?t.processVariableAI(4,h[2],e):t.processFixedAI(4,h[1],e)}}catch(I){c={error:I}}finally{try{j&&!j.done&&(u=w.return)&&u.call(w)}finally{if(c)throw c.error}}throw new rr},t.processFixedAI=function(e,r,n){if(n.length<e)throw new rr;var a=n.substring(0,e);if(n.length<e+r)throw new rr;var s=n.substring(e,e+r),o=n.substring(e+r),l="("+a+")"+s,c=t.parseFieldsInGeneralPurpose(o);return c==null?l:l+c},t.processVariableAI=function(e,r,n){var a=n.substring(0,e),s;n.length<e+r?s=n.length:s=e+r;var o=n.substring(e,s),l=n.substring(s),c="("+a+")"+o,u=t.parseFieldsInGeneralPurpose(l);return u==null?c:c+u},t.VARIABLE_LENGTH=[],t.TWO_DIGIT_DATA_LENGTH=[["00",18],["01",14],["02",14],["10",t.VARIABLE_LENGTH,20],["11",6],["12",6],["13",6],["15",6],["17",6],["20",2],["21",t.VARIABLE_LENGTH,20],["22",t.VARIABLE_LENGTH,29],["30",t.VARIABLE_LENGTH,8],["37",t.VARIABLE_LENGTH,8],["90",t.VARIABLE_LENGTH,30],["91",t.VARIABLE_LENGTH,30],["92",t.VARIABLE_LENGTH,30],["93",t.VARIABLE_LENGTH,30],["94",t.VARIABLE_LENGTH,30],["95",t.VARIABLE_LENGTH,30],["96",t.VARIABLE_LENGTH,30],["97",t.VARIABLE_LENGTH,3],["98",t.VARIABLE_LENGTH,30],["99",t.VARIABLE_LENGTH,30]],t.THREE_DIGIT_DATA_LENGTH=[["240",t.VARIABLE_LENGTH,30],["241",t.VARIABLE_LENGTH,30],["242",t.VARIABLE_LENGTH,6],["250",t.VARIABLE_LENGTH,30],["251",t.VARIABLE_LENGTH,30],["253",t.VARIABLE_LENGTH,17],["254",t.VARIABLE_LENGTH,20],["400",t.VARIABLE_LENGTH,30],["401",t.VARIABLE_LENGTH,30],["402",17],["403",t.VARIABLE_LENGTH,30],["410",13],["411",13],["412",13],["413",13],["414",13],["420",t.VARIABLE_LENGTH,20],["421",t.VARIABLE_LENGTH,15],["422",3],["423",t.VARIABLE_LENGTH,15],["424",3],["425",3],["426",3]],t.THREE_DIGIT_PLUS_DIGIT_DATA_LENGTH=[["310",6],["311",6],["312",6],["313",6],["314",6],["315",6],["316",6],["320",6],["321",6],["322",6],["323",6],["324",6],["325",6],["326",6],["327",6],["328",6],["329",6],["330",6],["331",6],["332",6],["333",6],["334",6],["335",6],["336",6],["340",6],["341",6],["342",6],["343",6],["344",6],["345",6],["346",6],["347",6],["348",6],["349",6],["350",6],["351",6],["352",6],["353",6],["354",6],["355",6],["356",6],["357",6],["360",6],["361",6],["362",6],["363",6],["364",6],["365",6],["366",6],["367",6],["368",6],["369",6],["390",t.VARIABLE_LENGTH,15],["391",t.VARIABLE_LENGTH,18],["392",t.VARIABLE_LENGTH,15],["393",t.VARIABLE_LENGTH,18],["703",t.VARIABLE_LENGTH,30]],t.FOUR_DIGIT_DATA_LENGTH=[["7001",13],["7002",t.VARIABLE_LENGTH,30],["7003",10],["8001",14],["8002",t.VARIABLE_LENGTH,20],["8003",t.VARIABLE_LENGTH,30],["8004",t.VARIABLE_LENGTH,30],["8005",6],["8006",18],["8007",t.VARIABLE_LENGTH,30],["8008",t.VARIABLE_LENGTH,12],["8018",18],["8020",t.VARIABLE_LENGTH,25],["8100",6],["8101",10],["8102",2],["8110",t.VARIABLE_LENGTH,70],["8200",t.VARIABLE_LENGTH,70]],t}(),vE=function(){function t(e){this.buffer=new Zn,this.information=e}return t.prototype.decodeAllCodes=function(e,r){var n=r,a=null;do{var s=this.decodeGeneralPurposeField(n,a),o=jUe.parseFieldsInGeneralPurpose(s.getNewString());if(o!=null&&e.append(o),s.isRemaining()?a=""+s.getRemainingValue():a=null,n===s.getNewPosition())break;n=s.getNewPosition()}while(!0);return e.toString()},t.prototype.isStillNumeric=function(e){if(e+7>this.information.getSize())return e+4<=this.information.getSize();for(var r=e;r<e+3;++r)if(this.information.get(r))return!0;return this.information.get(e+3)},t.prototype.decodeNumeric=function(e){if(e+7>this.information.getSize()){var r=this.extractNumericValueFromBitArray(e,4);return r===0?new xx(this.information.getSize(),xx.FNC1,xx.FNC1):new xx(this.information.getSize(),r-1,xx.FNC1)}var n=this.extractNumericValueFromBitArray(e,7),a=(n-8)/11,s=(n-8)%11;return new xx(e+7,a,s)},t.prototype.extractNumericValueFromBitArray=function(e,r){return t.extractNumericValueFromBitArray(this.information,e,r)},t.extractNumericValueFromBitArray=function(e,r,n){for(var a=0,s=0;s<n;++s)e.get(r+s)&&(a|=1<<n-s-1);return a},t.prototype.decodeGeneralPurposeField=function(e,r){this.buffer.setLengthToZero(),r!=null&&this.buffer.append(r),this.current.setPosition(e);var n=this.parseBlocks();return n!=null&&n.isRemaining()?new Jm(this.current.getPosition(),this.buffer.toString(),n.getRemainingValue()):new Jm(this.current.getPosition(),this.buffer.toString())},t.prototype.parseBlocks=function(){var e,r;do{var n=this.current.getPosition();this.current.isAlpha()?(r=this.parseAlphaBlock(),e=r.isFinished()):this.current.isIsoIec646()?(r=this.parseIsoIec646Block(),e=r.isFinished()):(r=this.parseNumericBlock(),e=r.isFinished());var a=n!==this.current.getPosition();if(!a&&!e)break}while(!e);return r.getDecodedInformation()},t.prototype.parseNumericBlock=function(){for(;this.isStillNumeric(this.current.getPosition());){var e=this.decodeNumeric(this.current.getPosition());if(this.current.setPosition(e.getNewPosition()),e.isFirstDigitFNC1()){var r=void 0;return e.isSecondDigitFNC1()?r=new Jm(this.current.getPosition(),this.buffer.toString()):r=new Jm(this.current.getPosition(),this.buffer.toString(),e.getSecondDigit()),new Ym(!0,r)}if(this.buffer.append(e.getFirstDigit()),e.isSecondDigitFNC1()){var r=new Jm(this.current.getPosition(),this.buffer.toString());return new Ym(!0,r)}this.buffer.append(e.getSecondDigit())}return this.isNumericToAlphaNumericLatch(this.current.getPosition())&&(this.current.setAlpha(),this.current.incrementPosition(4)),new Ym(!1)},t.prototype.parseIsoIec646Block=function(){for(;this.isStillIsoIec646(this.current.getPosition());){var e=this.decodeIsoIec646(this.current.getPosition());if(this.current.setPosition(e.getNewPosition()),e.isFNC1()){var r=new Jm(this.current.getPosition(),this.buffer.toString());return new Ym(!0,r)}this.buffer.append(e.getValue())}return this.isAlphaOr646ToNumericLatch(this.current.getPosition())?(this.current.incrementPosition(3),this.current.setNumeric()):this.isAlphaTo646ToAlphaLatch(this.current.getPosition())&&(this.current.getPosition()+5<this.information.getSize()?this.current.incrementPosition(5):this.current.setPosition(this.information.getSize()),this.current.setAlpha()),new Ym(!1)},t.prototype.parseAlphaBlock=function(){for(;this.isStillAlpha(this.current.getPosition());){var e=this.decodeAlphanumeric(this.current.getPosition());if(this.current.setPosition(e.getNewPosition()),e.isFNC1()){var r=new Jm(this.current.getPosition(),this.buffer.toString());return new Ym(!0,r)}this.buffer.append(e.getValue())}return this.isAlphaOr646ToNumericLatch(this.current.getPosition())?(this.current.incrementPosition(3),this.current.setNumeric()):this.isAlphaTo646ToAlphaLatch(this.current.getPosition())&&(this.current.getPosition()+5<this.information.getSize()?this.current.incrementPosition(5):this.current.setPosition(this.information.getSize()),this.current.setIsoIec646()),new Ym(!1)},t.prototype.isStillIsoIec646=function(e){if(e+5>this.information.getSize())return!1;var r=this.extractNumericValueFromBitArray(e,5);if(r>=5&&r<16)return!0;if(e+7>this.information.getSize())return!1;var n=this.extractNumericValueFromBitArray(e,7);if(n>=64&&n<116)return!0;if(e+8>this.information.getSize())return!1;var a=this.extractNumericValueFromBitArray(e,8);return a>=232&&a<253},t.prototype.decodeIsoIec646=function(e){var r=this.extractNumericValueFromBitArray(e,5);if(r===15)return new Jd(e+5,Jd.FNC1);if(r>=5&&r<15)return new Jd(e+5,"0"+(r-5));var n=this.extractNumericValueFromBitArray(e,7);if(n>=64&&n<90)return new Jd(e+7,""+(n+1));if(n>=90&&n<116)return new Jd(e+7,""+(n+7));var a=this.extractNumericValueFromBitArray(e,8),s;switch(a){case 232:s="!";break;case 233:s='"';break;case 234:s="%";break;case 235:s="&";break;case 236:s="'";break;case 237:s="(";break;case 238:s=")";break;case 239:s="*";break;case 240:s="+";break;case 241:s=",";break;case 242:s="-";break;case 243:s=".";break;case 244:s="/";break;case 245:s=":";break;case 246:s=";";break;case 247:s="<";break;case 248:s="=";break;case 249:s=">";break;case 250:s="?";break;case 251:s="_";break;case 252:s=" ";break;default:throw new Hr}return new Jd(e+8,s)},t.prototype.isStillAlpha=function(e){if(e+5>this.information.getSize())return!1;var r=this.extractNumericValueFromBitArray(e,5);if(r>=5&&r<16)return!0;if(e+6>this.information.getSize())return!1;var n=this.extractNumericValueFromBitArray(e,6);return n>=16&&n<63},t.prototype.decodeAlphanumeric=function(e){var r=this.extractNumericValueFromBitArray(e,5);if(r===15)return new Jd(e+5,Jd.FNC1);if(r>=5&&r<15)return new Jd(e+5,"0"+(r-5));var n=this.extractNumericValueFromBitArray(e,6);if(n>=32&&n<58)return new Jd(e+6,""+(n+33));var a;switch(n){case 58:a="*";break;case 59:a=",";break;case 60:a="-";break;case 61:a=".";break;case 62:a="/";break;default:throw new Kw("Decoding invalid alphanumeric value: "+n)}return new Jd(e+6,a)},t.prototype.isAlphaTo646ToAlphaLatch=function(e){if(e+1>this.information.getSize())return!1;for(var r=0;r<5&&r+e<this.information.getSize();++r)if(r===2){if(!this.information.get(e+2))return!1}else if(this.information.get(e+r))return!1;return!0},t.prototype.isAlphaOr646ToNumericLatch=function(e){if(e+3>this.information.getSize())return!1;for(var r=e;r<e+3;++r)if(this.information.get(r))return!1;return!0},t.prototype.isNumericToAlphaNumericLatch=function(e){if(e+1>this.information.getSize())return!1;for(var r=0;r<4&&r+e<this.information.getSize();++r)if(this.information.get(e+r))return!1;return!0},t}(),bse=function(){function t(e){this.information=e,this.generalDecoder=new vE(e)}return t.prototype.getInformation=function(){return this.information},t.prototype.getGeneralDecoder=function(){return this.generalDecoder},t}(),PUe=function(){var t=function(e,r){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,a){n.__proto__=a}||function(n,a){for(var s in a)a.hasOwnProperty(s)&&(n[s]=a[s])},t(e,r)};return function(e,r){t(e,r);function n(){this.constructor=e}e.prototype=r===null?Object.create(r):(n.prototype=r.prototype,new n)}}(),of=function(t){PUe(e,t);function e(r){return t.call(this,r)||this}return e.prototype.encodeCompressedGtin=function(r,n){r.append("(01)");var a=r.length();r.append("9"),this.encodeCompressedGtinWithoutAI(r,n,a)},e.prototype.encodeCompressedGtinWithoutAI=function(r,n,a){for(var s=0;s<4;++s){var o=this.getGeneralDecoder().extractNumericValueFromBitArray(n+10*s,10);o/100===0&&r.append("0"),o/10===0&&r.append("0"),r.append(o)}e.appendCheckDigit(r,a)},e.appendCheckDigit=function(r,n){for(var a=0,s=0;s<13;s++){var o=r.charAt(s+n).charCodeAt(0)-48;a+=s&1?o:3*o}a=10-a%10,a===10&&(a=0),r.append(a)},e.GTIN_SIZE=40,e}(bse),BUe=function(){var t=function(e,r){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,a){n.__proto__=a}||function(n,a){for(var s in a)a.hasOwnProperty(s)&&(n[s]=a[s])},t(e,r)};return function(e,r){t(e,r);function n(){this.constructor=e}e.prototype=r===null?Object.create(r):(n.prototype=r.prototype,new n)}}(),TUe=function(t){BUe(e,t);function e(r){return t.call(this,r)||this}return e.prototype.parseInformation=function(){var r=new Zn;r.append("(01)");var n=r.length(),a=this.getGeneralDecoder().extractNumericValueFromBitArray(e.HEADER_SIZE,4);return r.append(a),this.encodeCompressedGtinWithoutAI(r,e.HEADER_SIZE+4,n),this.getGeneralDecoder().decodeAllCodes(r,e.HEADER_SIZE+44)},e.HEADER_SIZE=4,e}(of),kUe=function(){var t=function(e,r){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,a){n.__proto__=a}||function(n,a){for(var s in a)a.hasOwnProperty(s)&&(n[s]=a[s])},t(e,r)};return function(e,r){t(e,r);function n(){this.constructor=e}e.prototype=r===null?Object.create(r):(n.prototype=r.prototype,new n)}}(),FUe=function(t){kUe(e,t);function e(r){return t.call(this,r)||this}return e.prototype.parseInformation=function(){var r=new Zn;return this.getGeneralDecoder().decodeAllCodes(r,e.HEADER_SIZE)},e.HEADER_SIZE=5,e}(bse),OUe=function(){var t=function(e,r){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,a){n.__proto__=a}||function(n,a){for(var s in a)a.hasOwnProperty(s)&&(n[s]=a[s])},t(e,r)};return function(e,r){t(e,r);function n(){this.constructor=e}e.prototype=r===null?Object.create(r):(n.prototype=r.prototype,new n)}}(),yE=function(t){OUe(e,t);function e(r){return t.call(this,r)||this}return e.prototype.encodeCompressedWeight=function(r,n,a){var s=this.getGeneralDecoder().extractNumericValueFromBitArray(n,a);this.addWeightCode(r,s);for(var o=this.checkWeight(s),l=1e5,c=0;c<5;++c)o/l===0&&r.append("0"),l/=10;r.append(o)},e}(of),DUe=function(){var t=function(e,r){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,a){n.__proto__=a}||function(n,a){for(var s in a)a.hasOwnProperty(s)&&(n[s]=a[s])},t(e,r)};return function(e,r){t(e,r);function n(){this.constructor=e}e.prototype=r===null?Object.create(r):(n.prototype=r.prototype,new n)}}(),wse=function(t){DUe(e,t);function e(r){return t.call(this,r)||this}return e.prototype.parseInformation=function(){if(this.getInformation().getSize()!==e.HEADER_SIZE+yE.GTIN_SIZE+e.WEIGHT_SIZE)throw new rr;var r=new Zn;return this.encodeCompressedGtin(r,e.HEADER_SIZE),this.encodeCompressedWeight(r,e.HEADER_SIZE+yE.GTIN_SIZE,e.WEIGHT_SIZE),r.toString()},e.HEADER_SIZE=5,e.WEIGHT_SIZE=15,e}(yE),RUe=function(){var t=function(e,r){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,a){n.__proto__=a}||function(n,a){for(var s in a)a.hasOwnProperty(s)&&(n[s]=a[s])},t(e,r)};return function(e,r){t(e,r);function n(){this.constructor=e}e.prototype=r===null?Object.create(r):(n.prototype=r.prototype,new n)}}(),MUe=function(t){RUe(e,t);function e(r){return t.call(this,r)||this}return e.prototype.addWeightCode=function(r,n){r.append("(3103)")},e.prototype.checkWeight=function(r){return r},e}(wse),LUe=function(){var t=function(e,r){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,a){n.__proto__=a}||function(n,a){for(var s in a)a.hasOwnProperty(s)&&(n[s]=a[s])},t(e,r)};return function(e,r){t(e,r);function n(){this.constructor=e}e.prototype=r===null?Object.create(r):(n.prototype=r.prototype,new n)}}(),UUe=function(t){LUe(e,t);function e(r){return t.call(this,r)||this}return e.prototype.addWeightCode=function(r,n){n<1e4?r.append("(3202)"):r.append("(3203)")},e.prototype.checkWeight=function(r){return r<1e4?r:r-1e4},e}(wse),QUe=function(){var t=function(e,r){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,a){n.__proto__=a}||function(n,a){for(var s in a)a.hasOwnProperty(s)&&(n[s]=a[s])},t(e,r)};return function(e,r){t(e,r);function n(){this.constructor=e}e.prototype=r===null?Object.create(r):(n.prototype=r.prototype,new n)}}(),VUe=function(t){QUe(e,t);function e(r){return t.call(this,r)||this}return e.prototype.parseInformation=function(){if(this.getInformation().getSize()<e.HEADER_SIZE+of.GTIN_SIZE)throw new rr;var r=new Zn;this.encodeCompressedGtin(r,e.HEADER_SIZE);var n=this.getGeneralDecoder().extractNumericValueFromBitArray(e.HEADER_SIZE+of.GTIN_SIZE,e.LAST_DIGIT_SIZE);r.append("(392"),r.append(n),r.append(")");var a=this.getGeneralDecoder().decodeGeneralPurposeField(e.HEADER_SIZE+of.GTIN_SIZE+e.LAST_DIGIT_SIZE,null);return r.append(a.getNewString()),r.toString()},e.HEADER_SIZE=8,e.LAST_DIGIT_SIZE=2,e}(of),HUe=function(){var t=function(e,r){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,a){n.__proto__=a}||function(n,a){for(var s in a)a.hasOwnProperty(s)&&(n[s]=a[s])},t(e,r)};return function(e,r){t(e,r);function n(){this.constructor=e}e.prototype=r===null?Object.create(r):(n.prototype=r.prototype,new n)}}(),$Ue=function(t){HUe(e,t);function e(r){return t.call(this,r)||this}return e.prototype.parseInformation=function(){if(this.getInformation().getSize()<e.HEADER_SIZE+of.GTIN_SIZE)throw new rr;var r=new Zn;this.encodeCompressedGtin(r,e.HEADER_SIZE);var n=this.getGeneralDecoder().extractNumericValueFromBitArray(e.HEADER_SIZE+of.GTIN_SIZE,e.LAST_DIGIT_SIZE);r.append("(393"),r.append(n),r.append(")");var a=this.getGeneralDecoder().extractNumericValueFromBitArray(e.HEADER_SIZE+of.GTIN_SIZE+e.LAST_DIGIT_SIZE,e.FIRST_THREE_DIGITS_SIZE);a/100===0&&r.append("0"),a/10===0&&r.append("0"),r.append(a);var s=this.getGeneralDecoder().decodeGeneralPurposeField(e.HEADER_SIZE+of.GTIN_SIZE+e.LAST_DIGIT_SIZE+e.FIRST_THREE_DIGITS_SIZE,null);return r.append(s.getNewString()),r.toString()},e.HEADER_SIZE=8,e.LAST_DIGIT_SIZE=2,e.FIRST_THREE_DIGITS_SIZE=10,e}(of),GUe=function(){var t=function(e,r){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,a){n.__proto__=a}||function(n,a){for(var s in a)a.hasOwnProperty(s)&&(n[s]=a[s])},t(e,r)};return function(e,r){t(e,r);function n(){this.constructor=e}e.prototype=r===null?Object.create(r):(n.prototype=r.prototype,new n)}}(),p0=function(t){GUe(e,t);function e(r,n,a){var s=t.call(this,r)||this;return s.dateCode=a,s.firstAIdigits=n,s}return e.prototype.parseInformation=function(){if(this.getInformation().getSize()!==e.HEADER_SIZE+e.GTIN_SIZE+e.WEIGHT_SIZE+e.DATE_SIZE)throw new rr;var r=new Zn;return this.encodeCompressedGtin(r,e.HEADER_SIZE),this.encodeCompressedWeight(r,e.HEADER_SIZE+e.GTIN_SIZE,e.WEIGHT_SIZE),this.encodeCompressedDate(r,e.HEADER_SIZE+e.GTIN_SIZE+e.WEIGHT_SIZE),r.toString()},e.prototype.encodeCompressedDate=function(r,n){var a=this.getGeneralDecoder().extractNumericValueFromBitArray(n,e.DATE_SIZE);if(a!==38400){r.append("("),r.append(this.dateCode),r.append(")");var s=a%32;a/=32;var o=a%12+1;a/=12;var l=a;l/10===0&&r.append("0"),r.append(l),o/10===0&&r.append("0"),r.append(o),s/10===0&&r.append("0"),r.append(s)}},e.prototype.addWeightCode=function(r,n){r.append("("),r.append(this.firstAIdigits),r.append(n/1e5),r.append(")")},e.prototype.checkWeight=function(r){return r%1e5},e.HEADER_SIZE=8,e.WEIGHT_SIZE=20,e.DATE_SIZE=16,e}(yE);function KUe(t){try{if(t.get(1))return new TUe(t);if(!t.get(2))return new FUe(t);var e=vE.extractNumericValueFromBitArray(t,1,4);switch(e){case 4:return new MUe(t);case 5:return new UUe(t)}var r=vE.extractNumericValueFromBitArray(t,1,5);switch(r){case 12:return new VUe(t);case 13:return new $Ue(t)}var n=vE.extractNumericValueFromBitArray(t,1,7);switch(n){case 56:return new p0(t,"310","11");case 57:return new p0(t,"320","11");case 58:return new p0(t,"310","13");case 59:return new p0(t,"320","13");case 60:return new p0(t,"310","15");case 61:return new p0(t,"320","15");case 62:return new p0(t,"310","17");case 63:return new p0(t,"320","17")}}catch(a){throw console.log(a),new Kw("unknown decoder: "+t)}}var D$=function(){function t(e,r,n,a){this.leftchar=e,this.rightchar=r,this.finderpattern=n,this.maybeLast=a}return t.prototype.mayBeLast=function(){return this.maybeLast},t.prototype.getLeftChar=function(){return this.leftchar},t.prototype.getRightChar=function(){return this.rightchar},t.prototype.getFinderPattern=function(){return this.finderpattern},t.prototype.mustBeLast=function(){return this.rightchar==null},t.prototype.toString=function(){return"[ "+this.leftchar+", "+this.rightchar+" : "+(this.finderpattern==null?"null":this.finderpattern.getValue())+" ]"},t.equals=function(e,r){return e instanceof t?t.equalsOrNull(e.leftchar,r.leftchar)&&t.equalsOrNull(e.rightchar,r.rightchar)&&t.equalsOrNull(e.finderpattern,r.finderpattern):!1},t.equalsOrNull=function(e,r){return e===null?r===null:t.equals(e,r)},t.prototype.hashCode=function(){var e=this.leftchar.getValue()^this.rightchar.getValue()^this.finderpattern.getValue();return e},t}(),qUe=function(){function t(e,r,n){this.pairs=e,this.rowNumber=r,this.wasReversed=n}return t.prototype.getPairs=function(){return this.pairs},t.prototype.getRowNumber=function(){return this.rowNumber},t.prototype.isReversed=function(){return this.wasReversed},t.prototype.isEquivalent=function(e){return this.checkEqualitity(this,e)},t.prototype.toString=function(){return"{ "+this.pairs+" }"},t.prototype.equals=function(e,r){return e instanceof t?this.checkEqualitity(e,r)&&e.wasReversed===r.wasReversed:!1},t.prototype.checkEqualitity=function(e,r){if(!(!e||!r)){var n;return e.forEach(function(a,s){r.forEach(function(o){a.getLeftChar().getValue()===o.getLeftChar().getValue()&&a.getRightChar().getValue()===o.getRightChar().getValue()&&a.getFinderPatter().getValue()===o.getFinderPatter().getValue()&&(n=!0)})}),n}},t}(),zUe=function(){var t=function(e,r){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,a){n.__proto__=a}||function(n,a){for(var s in a)a.hasOwnProperty(s)&&(n[s]=a[s])},t(e,r)};return function(e,r){t(e,r);function n(){this.constructor=e}e.prototype=r===null?Object.create(r):(n.prototype=r.prototype,new n)}}(),g0=function(t){var e=typeof Symbol=="function"&&Symbol.iterator,r=e&&t[e],n=0;if(r)return r.call(t);if(t&&typeof t.length=="number")return{next:function(){return t&&n>=t.length&&(t=void 0),{value:t&&t[n++],done:!t}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")},WUe=function(t){zUe(e,t);function e(){var r=t!==null&&t.apply(this,arguments)||this;return r.pairs=new Array(e.MAX_PAIRS),r.rows=new Array,r.startEnd=[2],r}return e.prototype.decodeRow=function(r,n,a){this.pairs.length=0,this.startFromEven=!1;try{return e.constructResult(this.decodeRow2pairs(r,n))}catch{}return this.pairs.length=0,this.startFromEven=!0,e.constructResult(this.decodeRow2pairs(r,n))},e.prototype.reset=function(){this.pairs.length=0,this.rows.length=0},e.prototype.decodeRow2pairs=function(r,n){for(var a=!1;!a;)try{this.pairs.push(this.retrieveNextPair(n,this.pairs,r))}catch(l){if(l instanceof rr){if(!this.pairs.length)throw new rr;a=!0}}if(this.checkChecksum())return this.pairs;var s;if(this.rows.length?s=!0:s=!1,this.storeRow(r,!1),s){var o=this.checkRowsBoolean(!1);if(o!=null||(o=this.checkRowsBoolean(!0),o!=null))return o}throw new rr},e.prototype.checkRowsBoolean=function(r){if(this.rows.length>25)return this.rows.length=0,null;this.pairs.length=0,r&&(this.rows=this.rows.reverse());var n=null;try{n=this.checkRows(new Array,0)}catch(a){console.log(a)}return r&&(this.rows=this.rows.reverse()),n},e.prototype.checkRows=function(r,n){for(var a,s,o=n;o<this.rows.length;o++){var l=this.rows[o];this.pairs.length=0;try{for(var c=(a=void 0,g0(r)),u=c.next();!u.done;u=c.next()){var d=u.value;this.pairs.push(d.getPairs())}}catch(A){a={error:A}}finally{try{u&&!u.done&&(s=c.return)&&s.call(c)}finally{if(a)throw a.error}}if(this.pairs.push(l.getPairs()),!!e.isValidSequence(this.pairs)){if(this.checkChecksum())return this.pairs;var f=new Array(r);f.push(l);try{return this.checkRows(f,o+1)}catch(A){console.log(A)}}}throw new rr},e.isValidSequence=function(r){var n,a;try{for(var s=g0(e.FINDER_PATTERN_SEQUENCES),o=s.next();!o.done;o=s.next()){var l=o.value;if(!(r.length>l.length)){for(var c=!0,u=0;u<r.length;u++)if(r[u].getFinderPattern().getValue()!==l[u]){c=!1;break}if(c)return!0}}}catch(d){n={error:d}}finally{try{o&&!o.done&&(a=s.return)&&a.call(s)}finally{if(n)throw n.error}}return!1},e.prototype.storeRow=function(r,n){for(var a=0,s=!1,o=!1;a<this.rows.length;){var l=this.rows[a];if(l.getRowNumber()>r){o=l.isEquivalent(this.pairs);break}s=l.isEquivalent(this.pairs),a++}o||s||e.isPartialRow(this.pairs,this.rows)||(this.rows.push(a,new qUe(this.pairs,r,n)),this.removePartialRows(this.pairs,this.rows))},e.prototype.removePartialRows=function(r,n){var a,s,o,l,c,u;try{for(var d=g0(n),f=d.next();!f.done;f=d.next()){var A=f.value;if(A.getPairs().length!==r.length){var h=!0;try{for(var m=(o=void 0,g0(A.getPairs())),p=m.next();!p.done;p=m.next()){var x=p.value,v=!1;try{for(var y=(c=void 0,g0(r)),b=y.next();!b.done;b=y.next()){var w=b.value;if(D$.equals(x,w)){v=!0;break}}}catch(j){c={error:j}}finally{try{b&&!b.done&&(u=y.return)&&u.call(y)}finally{if(c)throw c.error}}v||(h=!1)}}catch(j){o={error:j}}finally{try{p&&!p.done&&(l=m.return)&&l.call(m)}finally{if(o)throw o.error}}}}}catch(j){a={error:j}}finally{try{f&&!f.done&&(s=d.return)&&s.call(d)}finally{if(a)throw a.error}}},e.isPartialRow=function(r,n){var a,s,o,l,c,u;try{for(var d=g0(n),f=d.next();!f.done;f=d.next()){var A=f.value,h=!0;try{for(var m=(o=void 0,g0(r)),p=m.next();!p.done;p=m.next()){var x=p.value,v=!1;try{for(var y=(c=void 0,g0(A.getPairs())),b=y.next();!b.done;b=y.next()){var w=b.value;if(x.equals(w)){v=!0;break}}}catch(j){c={error:j}}finally{try{b&&!b.done&&(u=y.return)&&u.call(y)}finally{if(c)throw c.error}}if(!v){h=!1;break}}}catch(j){o={error:j}}finally{try{p&&!p.done&&(l=m.return)&&l.call(m)}finally{if(o)throw o.error}}if(h)return!0}}catch(j){a={error:j}}finally{try{f&&!f.done&&(s=d.return)&&s.call(d)}finally{if(a)throw a.error}}return!1},e.prototype.getRows=function(){return this.rows},e.constructResult=function(r){var n=_Ue.buildBitArray(r),a=KUe(n),s=a.parseInformation(),o=r[0].getFinderPattern().getResultPoints(),l=r[r.length-1].getFinderPattern().getResultPoints(),c=[o[0],o[1],l[0],l[1]];return new cc(s,null,null,c,jn.RSS_EXPANDED,null)},e.prototype.checkChecksum=function(){var r=this.pairs.get(0),n=r.getLeftChar(),a=r.getRightChar();if(a===null)return!1;for(var s=a.getChecksumPortion(),o=2,l=1;l<this.pairs.size();++l){var c=this.pairs.get(l);s+=c.getLeftChar().getChecksumPortion(),o++;var u=c.getRightChar();u!=null&&(s+=u.getChecksumPortion(),o++)}s%=211;var d=211*(o-4)+s;return d===n.getValue()},e.getNextSecondBar=function(r,n){var a;return r.get(n)?(a=r.getNextUnset(n),a=r.getNextSet(a)):(a=r.getNextSet(n),a=r.getNextUnset(a)),a},e.prototype.retrieveNextPair=function(r,n,a){var s=n.length%2===0;this.startFromEven&&(s=!s);var o,l=!0,c=-1;do this.findNextPair(r,n,c),o=this.parseFoundFinderPattern(r,a,s),o===null?c=e.getNextSecondBar(r,this.startEnd[0]):l=!1;while(l);var u=this.decodeDataCharacter(r,o,s,!0);if(!this.isEmptyPair(n)&&n[n.length-1].mustBeLast())throw new rr;var d;try{d=this.decodeDataCharacter(r,o,s,!1)}catch(f){d=null,console.log(f)}return new D$(u,d,o,!0)},e.prototype.isEmptyPair=function(r){return r.length===0},e.prototype.findNextPair=function(r,n,a){var s=this.getDecodeFinderCounters();s[0]=0,s[1]=0,s[2]=0,s[3]=0;var o=r.getSize(),l;if(a>=0)l=a;else if(this.isEmptyPair(n))l=0;else{var c=n[n.length-1];l=c.getFinderPattern().getStartEnd()[1]}var u=n.length%2!==0;this.startFromEven&&(u=!u);for(var d=!1;l<o&&(d=!r.get(l),!!d);)l++;for(var f=0,A=l,h=l;h<o;h++)if(r.get(h)!==d)s[f]++;else{if(f===3){if(u&&e.reverseCounters(s),e.isFinderPattern(s)){this.startEnd[0]=A,this.startEnd[1]=h;return}u&&e.reverseCounters(s),A+=s[0]+s[1],s[0]=s[2],s[1]=s[3],s[2]=0,s[3]=0,f--}else f++;s[f]=1,d=!d}throw new rr},e.reverseCounters=function(r){for(var n=r.length,a=0;a<n/2;++a){var s=r[a];r[a]=r[n-a-1],r[n-a-1]=s}},e.prototype.parseFoundFinderPattern=function(r,n,a){var s,o,l;if(a){for(var c=this.startEnd[0]-1;c>=0&&!r.get(c);)c--;c++,s=this.startEnd[0]-c,o=c,l=this.startEnd[1]}else o=this.startEnd[0],l=r.getNextUnset(this.startEnd[1]+1),s=l-this.startEnd[1];var u=this.getDecodeFinderCounters();ws.arraycopy(u,0,u,1,u.length-1),u[0]=s;var d;try{d=this.parseFinderValue(u,e.FINDER_PATTERNS)}catch{return null}return new yse(d,[o,l],o,l,n)},e.prototype.decodeDataCharacter=function(r,n,a,s){for(var o=this.getDataCharacterCounters(),l=0;l<o.length;l++)o[l]=0;if(s)e.recordPatternInReverse(r,n.getStartEnd()[0],o);else{e.recordPattern(r,n.getStartEnd()[1],o);for(var c=0,u=o.length-1;c<u;c++,u--){var d=o[c];o[c]=o[u],o[u]=d}}var f=17,A=ja.sum(new Int32Array(o))/f,h=(n.getStartEnd()[1]-n.getStartEnd()[0])/15;if(Math.abs(A-h)/h>.3)throw new rr;for(var m=this.getOddCounts(),p=this.getEvenCounts(),x=this.getOddRoundingErrors(),v=this.getEvenRoundingErrors(),c=0;c<o.length;c++){var y=1*o[c]/A,b=y+.5;if(b<1){if(y<.3)throw new rr;b=1}else if(b>8){if(y>8.7)throw new rr;b=8}var w=c/2;c&1?(p[w]=b,v[w]=y-b):(m[w]=b,x[w]=y-b)}this.adjustOddEvenCounts(f);for(var j=4*n.getValue()+(a?0:2)+(s?0:1)-1,I=0,_=0,c=m.length-1;c>=0;c--){if(e.isNotA1left(n,a,s)){var S=e.WEIGHTS[j][2*c];_+=m[c]*S}I+=m[c]}for(var E=0,c=p.length-1;c>=0;c--)if(e.isNotA1left(n,a,s)){var S=e.WEIGHTS[j][2*c+1];E+=p[c]*S}var T=_+E;if(I&1||I>13||I<4)throw new rr;var k=(13-I)/2,B=e.SYMBOL_WIDEST[k],D=9-B,X=Xx.getRSSvalue(m,B,!0),me=Xx.getRSSvalue(p,D,!1),pe=e.EVEN_TOTAL_SUBSET[k],he=e.GSUM[k],ve=X*pe+me+he;return new eI(ve,T)},e.isNotA1left=function(r,n,a){return!(r.getValue()===0&&n&&a)},e.prototype.adjustOddEvenCounts=function(r){var n=ja.sum(new Int32Array(this.getOddCounts())),a=ja.sum(new Int32Array(this.getEvenCounts())),s=!1,o=!1;n>13?o=!0:n<4&&(s=!0);var l=!1,c=!1;a>13?c=!0:a<4&&(l=!0);var u=n+a-r,d=(n&1)===1,f=(a&1)===0;if(u===1)if(d){if(f)throw new rr;o=!0}else{if(!f)throw new rr;c=!0}else if(u===-1)if(d){if(f)throw new rr;s=!0}else{if(!f)throw new rr;l=!0}else if(u===0){if(d){if(!f)throw new rr;n<a?(s=!0,c=!0):(o=!0,l=!0)}else if(f)throw new rr}else throw new rr;if(s){if(o)throw new rr;e.increment(this.getOddCounts(),this.getOddRoundingErrors())}if(o&&e.decrement(this.getOddCounts(),this.getOddRoundingErrors()),l){if(c)throw new rr;e.increment(this.getEvenCounts(),this.getOddRoundingErrors())}c&&e.decrement(this.getEvenCounts(),this.getEvenRoundingErrors())},e.SYMBOL_WIDEST=[7,5,4,3,1],e.EVEN_TOTAL_SUBSET=[4,20,52,104,204],e.GSUM=[0,348,1388,2948,3988],e.FINDER_PATTERNS=[Int32Array.from([1,8,4,1]),Int32Array.from([3,6,4,1]),Int32Array.from([3,4,6,1]),Int32Array.from([3,2,8,1]),Int32Array.from([2,6,5,1]),Int32Array.from([2,2,9,1])],e.WEIGHTS=[[1,3,9,27,81,32,96,77],[20,60,180,118,143,7,21,63],[189,145,13,39,117,140,209,205],[193,157,49,147,19,57,171,91],[62,186,136,197,169,85,44,132],[185,133,188,142,4,12,36,108],[113,128,173,97,80,29,87,50],[150,28,84,41,123,158,52,156],[46,138,203,187,139,206,196,166],[76,17,51,153,37,111,122,155],[43,129,176,106,107,110,119,146],[16,48,144,10,30,90,59,177],[109,116,137,200,178,112,125,164],[70,210,208,202,184,130,179,115],[134,191,151,31,93,68,204,190],[148,22,66,198,172,94,71,2],[6,18,54,162,64,192,154,40],[120,149,25,75,14,42,126,167],[79,26,78,23,69,207,199,175],[103,98,83,38,114,131,182,124],[161,61,183,127,170,88,53,159],[55,165,73,8,24,72,5,15],[45,135,194,160,58,174,100,89]],e.FINDER_PAT_A=0,e.FINDER_PAT_B=1,e.FINDER_PAT_C=2,e.FINDER_PAT_D=3,e.FINDER_PAT_E=4,e.FINDER_PAT_F=5,e.FINDER_PATTERN_SEQUENCES=[[e.FINDER_PAT_A,e.FINDER_PAT_A],[e.FINDER_PAT_A,e.FINDER_PAT_B,e.FINDER_PAT_B],[e.FINDER_PAT_A,e.FINDER_PAT_C,e.FINDER_PAT_B,e.FINDER_PAT_D],[e.FINDER_PAT_A,e.FINDER_PAT_E,e.FINDER_PAT_B,e.FINDER_PAT_D,e.FINDER_PAT_C],[e.FINDER_PAT_A,e.FINDER_PAT_E,e.FINDER_PAT_B,e.FINDER_PAT_D,e.FINDER_PAT_D,e.FINDER_PAT_F],[e.FINDER_PAT_A,e.FINDER_PAT_E,e.FINDER_PAT_B,e.FINDER_PAT_D,e.FINDER_PAT_E,e.FINDER_PAT_F,e.FINDER_PAT_F],[e.FINDER_PAT_A,e.FINDER_PAT_A,e.FINDER_PAT_B,e.FINDER_PAT_B,e.FINDER_PAT_C,e.FINDER_PAT_C,e.FINDER_PAT_D,e.FINDER_PAT_D],[e.FINDER_PAT_A,e.FINDER_PAT_A,e.FINDER_PAT_B,e.FINDER_PAT_B,e.FINDER_PAT_C,e.FINDER_PAT_C,e.FINDER_PAT_D,e.FINDER_PAT_E,e.FINDER_PAT_E],[e.FINDER_PAT_A,e.FINDER_PAT_A,e.FINDER_PAT_B,e.FINDER_PAT_B,e.FINDER_PAT_C,e.FINDER_PAT_C,e.FINDER_PAT_D,e.FINDER_PAT_E,e.FINDER_PAT_F,e.FINDER_PAT_F],[e.FINDER_PAT_A,e.FINDER_PAT_A,e.FINDER_PAT_B,e.FINDER_PAT_B,e.FINDER_PAT_C,e.FINDER_PAT_D,e.FINDER_PAT_D,e.FINDER_PAT_E,e.FINDER_PAT_E,e.FINDER_PAT_F,e.FINDER_PAT_F]],e.MAX_PAIRS=11,e}(cp),XUe=function(){var t=function(e,r){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,a){n.__proto__=a}||function(n,a){for(var s in a)a.hasOwnProperty(s)&&(n[s]=a[s])},t(e,r)};return function(e,r){t(e,r);function n(){this.constructor=e}e.prototype=r===null?Object.create(r):(n.prototype=r.prototype,new n)}}(),YUe=function(t){XUe(e,t);function e(r,n,a){var s=t.call(this,r,n)||this;return s.count=0,s.finderPattern=a,s}return e.prototype.getFinderPattern=function(){return this.finderPattern},e.prototype.getCount=function(){return this.count},e.prototype.incrementCount=function(){this.count++},e}(eI),JUe=function(){var t=function(e,r){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,a){n.__proto__=a}||function(n,a){for(var s in a)a.hasOwnProperty(s)&&(n[s]=a[s])},t(e,r)};return function(e,r){t(e,r);function n(){this.constructor=e}e.prototype=r===null?Object.create(r):(n.prototype=r.prototype,new n)}}(),$5=function(t){var e=typeof Symbol=="function"&&Symbol.iterator,r=e&&t[e],n=0;if(r)return r.call(t);if(t&&typeof t.length=="number")return{next:function(){return t&&n>=t.length&&(t=void 0),{value:t&&t[n++],done:!t}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")},R$=function(t){JUe(e,t);function e(){var r=t!==null&&t.apply(this,arguments)||this;return r.possibleLeftPairs=[],r.possibleRightPairs=[],r}return e.prototype.decodeRow=function(r,n,a){var s,o,l,c,u=this.decodePair(n,!1,r,a);e.addOrTally(this.possibleLeftPairs,u),n.reverse();var d=this.decodePair(n,!0,r,a);e.addOrTally(this.possibleRightPairs,d),n.reverse();try{for(var f=$5(this.possibleLeftPairs),A=f.next();!A.done;A=f.next()){var h=A.value;if(h.getCount()>1)try{for(var m=(l=void 0,$5(this.possibleRightPairs)),p=m.next();!p.done;p=m.next()){var x=p.value;if(x.getCount()>1&&e.checkChecksum(h,x))return e.constructResult(h,x)}}catch(v){l={error:v}}finally{try{p&&!p.done&&(c=m.return)&&c.call(m)}finally{if(l)throw l.error}}}}catch(v){s={error:v}}finally{try{A&&!A.done&&(o=f.return)&&o.call(f)}finally{if(s)throw s.error}}throw new rr},e.addOrTally=function(r,n){var a,s;if(n!=null){var o=!1;try{for(var l=$5(r),c=l.next();!c.done;c=l.next()){var u=c.value;if(u.getValue()===n.getValue()){u.incrementCount(),o=!0;break}}}catch(d){a={error:d}}finally{try{c&&!c.done&&(s=l.return)&&s.call(l)}finally{if(a)throw a.error}}o||r.push(n)}},e.prototype.reset=function(){this.possibleLeftPairs.length=0,this.possibleRightPairs.length=0},e.constructResult=function(r,n){for(var a=4537077*r.getValue()+n.getValue(),s=new String(a).toString(),o=new Zn,l=13-s.length;l>0;l--)o.append("0");o.append(s);for(var c=0,l=0;l<13;l++){var u=o.charAt(l).charCodeAt(0)-48;c+=l&1?u:3*u}c=10-c%10,c===10&&(c=0),o.append(c.toString());var d=r.getFinderPattern().getResultPoints(),f=n.getFinderPattern().getResultPoints();return new cc(o.toString(),null,0,[d[0],d[1],f[0],f[1]],jn.RSS_14,new Date().getTime())},e.checkChecksum=function(r,n){var a=(r.getChecksumPortion()+16*n.getChecksumPortion())%79,s=9*r.getFinderPattern().getValue()+n.getFinderPattern().getValue();return s>72&&s--,s>8&&s--,a===s},e.prototype.decodePair=function(r,n,a,s){try{var o=this.findFinderPattern(r,n),l=this.parseFoundFinderPattern(r,a,n,o),c=s==null?null:s.get(Ns.NEED_RESULT_POINT_CALLBACK);if(c!=null){var u=(o[0]+o[1])/2;n&&(u=r.getSize()-1-u),c.foundPossibleResultPoint(new fn(u,a))}var d=this.decodeDataCharacter(r,l,!0),f=this.decodeDataCharacter(r,l,!1);return new YUe(1597*d.getValue()+f.getValue(),d.getChecksumPortion()+4*f.getChecksumPortion(),l)}catch{return null}},e.prototype.decodeDataCharacter=function(r,n,a){for(var s=this.getDataCharacterCounters(),o=0;o<s.length;o++)s[o]=0;if(a)Po.recordPatternInReverse(r,n.getStartEnd()[0],s);else{Po.recordPattern(r,n.getStartEnd()[1]+1,s);for(var l=0,c=s.length-1;l<c;l++,c--){var u=s[l];s[l]=s[c],s[c]=u}}for(var d=a?16:15,f=ja.sum(new Int32Array(s))/d,A=this.getOddCounts(),h=this.getEvenCounts(),m=this.getOddRoundingErrors(),p=this.getEvenRoundingErrors(),l=0;l<s.length;l++){var x=s[l]/f,v=Math.floor(x+.5);v<1?v=1:v>8&&(v=8);var y=Math.floor(l/2);l&1?(h[y]=v,p[y]=x-v):(A[y]=v,m[y]=x-v)}this.adjustOddEvenCounts(a,d);for(var b=0,w=0,l=A.length-1;l>=0;l--)w*=9,w+=A[l],b+=A[l];for(var j=0,I=0,l=h.length-1;l>=0;l--)j*=9,j+=h[l],I+=h[l];var _=w+3*j;if(a){if(b&1||b>12||b<4)throw new rr;var S=(12-b)/2,E=e.OUTSIDE_ODD_WIDEST[S],T=9-E,k=Xx.getRSSvalue(A,E,!1),B=Xx.getRSSvalue(h,T,!0),D=e.OUTSIDE_EVEN_TOTAL_SUBSET[S],X=e.OUTSIDE_GSUM[S];return new eI(k*D+B+X,_)}else{if(I&1||I>10||I<4)throw new rr;var S=(10-I)/2,E=e.INSIDE_ODD_WIDEST[S],T=9-E,k=Xx.getRSSvalue(A,E,!0),B=Xx.getRSSvalue(h,T,!1),me=e.INSIDE_ODD_TOTAL_SUBSET[S],X=e.INSIDE_GSUM[S];return new eI(B*me+k+X,_)}},e.prototype.findFinderPattern=function(r,n){var a=this.getDecodeFinderCounters();a[0]=0,a[1]=0,a[2]=0,a[3]=0;for(var s=r.getSize(),o=!1,l=0;l<s&&(o=!r.get(l),n!==o);)l++;for(var c=0,u=l,d=l;d<s;d++)if(r.get(d)!==o)a[c]++;else{if(c===3){if(cp.isFinderPattern(a))return[u,d];u+=a[0]+a[1],a[0]=a[2],a[1]=a[3],a[2]=0,a[3]=0,c--}else c++;a[c]=1,o=!o}throw new rr},e.prototype.parseFoundFinderPattern=function(r,n,a,s){for(var o=r.get(s[0]),l=s[0]-1;l>=0&&o!==r.get(l);)l--;l++;var c=s[0]-l,u=this.getDecodeFinderCounters(),d=new Int32Array(u.length);ws.arraycopy(u,0,d,1,u.length-1),d[0]=c;var f=this.parseFinderValue(d,e.FINDER_PATTERNS),A=l,h=s[1];return a&&(A=r.getSize()-1-A,h=r.getSize()-1-h),new yse(f,[l,s[1]],A,h,n)},e.prototype.adjustOddEvenCounts=function(r,n){var a=ja.sum(new Int32Array(this.getOddCounts())),s=ja.sum(new Int32Array(this.getEvenCounts())),o=!1,l=!1,c=!1,u=!1;r?(a>12?l=!0:a<4&&(o=!0),s>12?u=!0:s<4&&(c=!0)):(a>11?l=!0:a<5&&(o=!0),s>10?u=!0:s<4&&(c=!0));var d=a+s-n,f=(a&1)===(r?1:0),A=(s&1)===1;if(d===1)if(f){if(A)throw new rr;l=!0}else{if(!A)throw new rr;u=!0}else if(d===-1)if(f){if(A)throw new rr;o=!0}else{if(!A)throw new rr;c=!0}else if(d===0){if(f){if(!A)throw new rr;a<s?(o=!0,u=!0):(l=!0,c=!0)}else if(A)throw new rr}else throw new rr;if(o){if(l)throw new rr;cp.increment(this.getOddCounts(),this.getOddRoundingErrors())}if(l&&cp.decrement(this.getOddCounts(),this.getOddRoundingErrors()),c){if(u)throw new rr;cp.increment(this.getEvenCounts(),this.getOddRoundingErrors())}u&&cp.decrement(this.getEvenCounts(),this.getEvenRoundingErrors())},e.OUTSIDE_EVEN_TOTAL_SUBSET=[1,10,34,70,126],e.INSIDE_ODD_TOTAL_SUBSET=[4,20,48,81],e.OUTSIDE_GSUM=[0,161,961,2015,2715],e.INSIDE_GSUM=[0,336,1036,1516],e.OUTSIDE_ODD_WIDEST=[8,6,4,3,1],e.INSIDE_ODD_WIDEST=[2,4,6,8],e.FINDER_PATTERNS=[Int32Array.from([3,8,2,1]),Int32Array.from([3,5,5,1]),Int32Array.from([3,3,7,1]),Int32Array.from([3,1,9,1]),Int32Array.from([2,7,4,1]),Int32Array.from([2,5,6,1]),Int32Array.from([2,3,8,1]),Int32Array.from([1,5,7,1]),Int32Array.from([1,3,9,1])],e}(cp),ZUe=function(){var t=function(e,r){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,a){n.__proto__=a}||function(n,a){for(var s in a)a.hasOwnProperty(s)&&(n[s]=a[s])},t(e,r)};return function(e,r){t(e,r);function n(){this.constructor=e}e.prototype=r===null?Object.create(r):(n.prototype=r.prototype,new n)}}(),Yx=function(t){ZUe(e,t);function e(r){var n=t.call(this)||this;n.readers=[];var a=r?r.get(Ns.POSSIBLE_FORMATS):null,s=r&&r.get(Ns.ASSUME_CODE_39_CHECK_DIGIT)!==void 0,o=r&&r.get(Ns.ENABLE_CODE_39_EXTENDED_MODE)!==void 0;return a&&((a.includes(jn.EAN_13)||a.includes(jn.UPC_A)||a.includes(jn.EAN_8)||a.includes(jn.UPC_E))&&n.readers.push(new H5(r)),a.includes(jn.CODE_39)&&n.readers.push(new S$(s,o)),a.includes(jn.CODE_93)&&n.readers.push(new I$),a.includes(jn.CODE_128)&&n.readers.push(new E$),a.includes(jn.ITF)&&n.readers.push(new j$),a.includes(jn.CODABAR)&&n.readers.push(new bUe),a.includes(jn.RSS_14)&&n.readers.push(new R$),a.includes(jn.RSS_EXPANDED)&&(console.warn("RSS Expanded reader IS NOT ready for production yet! use at your own risk."),n.readers.push(new WUe))),n.readers.length===0&&(n.readers.push(new H5(r)),n.readers.push(new S$),n.readers.push(new I$),n.readers.push(new H5(r)),n.readers.push(new E$),n.readers.push(new j$),n.readers.push(new R$)),n}return e.prototype.decodeRow=function(r,n,a){for(var s=0;s<this.readers.length;s++)try{return this.readers[s].decodeRow(r,n,a)}catch{}throw new rr},e.prototype.reset=function(){this.readers.forEach(function(r){return r.reset()})},e}(Po),e7e=function(){var t=function(e,r){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,a){n.__proto__=a}||function(n,a){for(var s in a)a.hasOwnProperty(s)&&(n[s]=a[s])},t(e,r)};return function(e,r){t(e,r);function n(){this.constructor=e}e.prototype=r===null?Object.create(r):(n.prototype=r.prototype,new n)}}();(function(t){e7e(e,t);function e(r,n){return r===void 0&&(r=500),t.call(this,new Yx(n),r,n)||this}return e})(w1);var M$=function(t){var e=typeof Symbol=="function"&&Symbol.iterator,r=e&&t[e],n=0;if(r)return r.call(t);if(t&&typeof t.length=="number")return{next:function(){return t&&n>=t.length&&(t=void 0),{value:t&&t[n++],done:!t}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")},La=function(){function t(e,r,n){this.ecCodewords=e,this.ecBlocks=[r],n&&this.ecBlocks.push(n)}return t.prototype.getECCodewords=function(){return this.ecCodewords},t.prototype.getECBlocks=function(){return this.ecBlocks},t}(),Fa=function(){function t(e,r){this.count=e,this.dataCodewords=r}return t.prototype.getCount=function(){return this.count},t.prototype.getDataCodewords=function(){return this.dataCodewords},t}(),t7e=function(){function t(e,r,n,a,s,o){var l,c;this.versionNumber=e,this.symbolSizeRows=r,this.symbolSizeColumns=n,this.dataRegionSizeRows=a,this.dataRegionSizeColumns=s,this.ecBlocks=o;var u=0,d=o.getECCodewords(),f=o.getECBlocks();try{for(var A=M$(f),h=A.next();!h.done;h=A.next()){var m=h.value;u+=m.getCount()*(m.getDataCodewords()+d)}}catch(p){l={error:p}}finally{try{h&&!h.done&&(c=A.return)&&c.call(A)}finally{if(l)throw l.error}}this.totalCodewords=u}return t.prototype.getVersionNumber=function(){return this.versionNumber},t.prototype.getSymbolSizeRows=function(){return this.symbolSizeRows},t.prototype.getSymbolSizeColumns=function(){return this.symbolSizeColumns},t.prototype.getDataRegionSizeRows=function(){return this.dataRegionSizeRows},t.prototype.getDataRegionSizeColumns=function(){return this.dataRegionSizeColumns},t.prototype.getTotalCodewords=function(){return this.totalCodewords},t.prototype.getECBlocks=function(){return this.ecBlocks},t.getVersionForDimensions=function(e,r){var n,a;if(e&1||r&1)throw new Hr;try{for(var s=M$(t.VERSIONS),o=s.next();!o.done;o=s.next()){var l=o.value;if(l.symbolSizeRows===e&&l.symbolSizeColumns===r)return l}}catch(c){n={error:c}}finally{try{o&&!o.done&&(a=s.return)&&a.call(s)}finally{if(n)throw n.error}}throw new Hr},t.prototype.toString=function(){return""+this.versionNumber},t.buildVersions=function(){return[new t(1,10,10,8,8,new La(5,new Fa(1,3))),new t(2,12,12,10,10,new La(7,new Fa(1,5))),new t(3,14,14,12,12,new La(10,new Fa(1,8))),new t(4,16,16,14,14,new La(12,new Fa(1,12))),new t(5,18,18,16,16,new La(14,new Fa(1,18))),new t(6,20,20,18,18,new La(18,new Fa(1,22))),new t(7,22,22,20,20,new La(20,new Fa(1,30))),new t(8,24,24,22,22,new La(24,new Fa(1,36))),new t(9,26,26,24,24,new La(28,new Fa(1,44))),new t(10,32,32,14,14,new La(36,new Fa(1,62))),new t(11,36,36,16,16,new La(42,new Fa(1,86))),new t(12,40,40,18,18,new La(48,new Fa(1,114))),new t(13,44,44,20,20,new La(56,new Fa(1,144))),new t(14,48,48,22,22,new La(68,new Fa(1,174))),new t(15,52,52,24,24,new La(42,new Fa(2,102))),new t(16,64,64,14,14,new La(56,new Fa(2,140))),new t(17,72,72,16,16,new La(36,new Fa(4,92))),new t(18,80,80,18,18,new La(48,new Fa(4,114))),new t(19,88,88,20,20,new La(56,new Fa(4,144))),new t(20,96,96,22,22,new La(68,new Fa(4,174))),new t(21,104,104,24,24,new La(56,new Fa(6,136))),new t(22,120,120,18,18,new La(68,new Fa(6,175))),new t(23,132,132,20,20,new La(62,new Fa(8,163))),new t(24,144,144,22,22,new La(62,new Fa(8,156),new Fa(2,155))),new t(25,8,18,6,16,new La(7,new Fa(1,5))),new t(26,8,32,6,14,new La(11,new Fa(1,10))),new t(27,12,26,10,24,new La(14,new Fa(1,16))),new t(28,12,36,10,16,new La(18,new Fa(1,22))),new t(29,16,36,14,16,new La(24,new Fa(1,32))),new t(30,16,48,14,22,new La(28,new Fa(1,49)))]},t.VERSIONS=t.buildVersions(),t}(),r7e=function(){function t(e){var r=e.getHeight();if(r<8||r>144||r&1)throw new Hr;this.version=t.readVersion(e),this.mappingBitMatrix=this.extractDataRegion(e),this.readMappingMatrix=new oh(this.mappingBitMatrix.getWidth(),this.mappingBitMatrix.getHeight())}return t.prototype.getVersion=function(){return this.version},t.readVersion=function(e){var r=e.getHeight(),n=e.getWidth();return t7e.getVersionForDimensions(r,n)},t.prototype.readCodewords=function(){var e=new Int8Array(this.version.getTotalCodewords()),r=0,n=4,a=0,s=this.mappingBitMatrix.getHeight(),o=this.mappingBitMatrix.getWidth(),l=!1,c=!1,u=!1,d=!1;do if(n===s&&a===0&&!l)e[r++]=this.readCorner1(s,o)&255,n-=2,a+=2,l=!0;else if(n===s-2&&a===0&&o&3&&!c)e[r++]=this.readCorner2(s,o)&255,n-=2,a+=2,c=!0;else if(n===s+4&&a===2&&!(o&7)&&!u)e[r++]=this.readCorner3(s,o)&255,n-=2,a+=2,u=!0;else if(n===s-2&&a===0&&(o&7)===4&&!d)e[r++]=this.readCorner4(s,o)&255,n-=2,a+=2,d=!0;else{do n<s&&a>=0&&!this.readMappingMatrix.get(a,n)&&(e[r++]=this.readUtah(n,a,s,o)&255),n-=2,a+=2;while(n>=0&&a<o);n+=1,a+=3;do n>=0&&a<o&&!this.readMappingMatrix.get(a,n)&&(e[r++]=this.readUtah(n,a,s,o)&255),n+=2,a-=2;while(n<s&&a>=0);n+=3,a+=1}while(n<s||a<o);if(r!==this.version.getTotalCodewords())throw new Hr;return e},t.prototype.readModule=function(e,r,n,a){return e<0&&(e+=n,r+=4-(n+4&7)),r<0&&(r+=a,e+=4-(a+4&7)),this.readMappingMatrix.set(r,e),this.mappingBitMatrix.get(r,e)},t.prototype.readUtah=function(e,r,n,a){var s=0;return this.readModule(e-2,r-2,n,a)&&(s|=1),s<<=1,this.readModule(e-2,r-1,n,a)&&(s|=1),s<<=1,this.readModule(e-1,r-2,n,a)&&(s|=1),s<<=1,this.readModule(e-1,r-1,n,a)&&(s|=1),s<<=1,this.readModule(e-1,r,n,a)&&(s|=1),s<<=1,this.readModule(e,r-2,n,a)&&(s|=1),s<<=1,this.readModule(e,r-1,n,a)&&(s|=1),s<<=1,this.readModule(e,r,n,a)&&(s|=1),s},t.prototype.readCorner1=function(e,r){var n=0;return this.readModule(e-1,0,e,r)&&(n|=1),n<<=1,this.readModule(e-1,1,e,r)&&(n|=1),n<<=1,this.readModule(e-1,2,e,r)&&(n|=1),n<<=1,this.readModule(0,r-2,e,r)&&(n|=1),n<<=1,this.readModule(0,r-1,e,r)&&(n|=1),n<<=1,this.readModule(1,r-1,e,r)&&(n|=1),n<<=1,this.readModule(2,r-1,e,r)&&(n|=1),n<<=1,this.readModule(3,r-1,e,r)&&(n|=1),n},t.prototype.readCorner2=function(e,r){var n=0;return this.readModule(e-3,0,e,r)&&(n|=1),n<<=1,this.readModule(e-2,0,e,r)&&(n|=1),n<<=1,this.readModule(e-1,0,e,r)&&(n|=1),n<<=1,this.readModule(0,r-4,e,r)&&(n|=1),n<<=1,this.readModule(0,r-3,e,r)&&(n|=1),n<<=1,this.readModule(0,r-2,e,r)&&(n|=1),n<<=1,this.readModule(0,r-1,e,r)&&(n|=1),n<<=1,this.readModule(1,r-1,e,r)&&(n|=1),n},t.prototype.readCorner3=function(e,r){var n=0;return this.readModule(e-1,0,e,r)&&(n|=1),n<<=1,this.readModule(e-1,r-1,e,r)&&(n|=1),n<<=1,this.readModule(0,r-3,e,r)&&(n|=1),n<<=1,this.readModule(0,r-2,e,r)&&(n|=1),n<<=1,this.readModule(0,r-1,e,r)&&(n|=1),n<<=1,this.readModule(1,r-3,e,r)&&(n|=1),n<<=1,this.readModule(1,r-2,e,r)&&(n|=1),n<<=1,this.readModule(1,r-1,e,r)&&(n|=1),n},t.prototype.readCorner4=function(e,r){var n=0;return this.readModule(e-3,0,e,r)&&(n|=1),n<<=1,this.readModule(e-2,0,e,r)&&(n|=1),n<<=1,this.readModule(e-1,0,e,r)&&(n|=1),n<<=1,this.readModule(0,r-2,e,r)&&(n|=1),n<<=1,this.readModule(0,r-1,e,r)&&(n|=1),n<<=1,this.readModule(1,r-1,e,r)&&(n|=1),n<<=1,this.readModule(2,r-1,e,r)&&(n|=1),n<<=1,this.readModule(3,r-1,e,r)&&(n|=1),n},t.prototype.extractDataRegion=function(e){var r=this.version.getSymbolSizeRows(),n=this.version.getSymbolSizeColumns();if(e.getHeight()!==r)throw new Pn("Dimension of bitMatrix must match the version size");for(var a=this.version.getDataRegionSizeRows(),s=this.version.getDataRegionSizeColumns(),o=r/a|0,l=n/s|0,c=o*a,u=l*s,d=new oh(u,c),f=0;f<o;++f)for(var A=f*a,h=0;h<l;++h)for(var m=h*s,p=0;p<a;++p)for(var x=f*(a+2)+1+p,v=A+p,y=0;y<s;++y){var b=h*(s+2)+1+y;if(e.get(b,x)){var w=m+y;d.set(w,v)}}return d},t}(),L$=function(t){var e=typeof Symbol=="function"&&Symbol.iterator,r=e&&t[e],n=0;if(r)return r.call(t);if(t&&typeof t.length=="number")return{next:function(){return t&&n>=t.length&&(t=void 0),{value:t&&t[n++],done:!t}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")},n7e=function(){function t(e,r){this.numDataCodewords=e,this.codewords=r}return t.getDataBlocks=function(e,r){var n,a,s,o,l=r.getECBlocks(),c=0,u=l.getECBlocks();try{for(var d=L$(u),f=d.next();!f.done;f=d.next()){var A=f.value;c+=A.getCount()}}catch(X){n={error:X}}finally{try{f&&!f.done&&(a=d.return)&&a.call(d)}finally{if(n)throw n.error}}var h=new Array(c),m=0;try{for(var p=L$(u),x=p.next();!x.done;x=p.next())for(var A=x.value,v=0;v<A.getCount();v++){var y=A.getDataCodewords(),b=l.getECCodewords()+y;h[m++]=new t(y,new Uint8Array(b))}}catch(X){s={error:X}}finally{try{x&&!x.done&&(o=p.return)&&o.call(p)}finally{if(s)throw s.error}}for(var w=h[0].codewords.length,j=w-l.getECCodewords(),I=j-1,_=0,v=0;v<I;v++)for(var S=0;S<m;S++)h[S].codewords[v]=e[_++];for(var E=r.getVersionNumber()===24,T=E?8:m,S=0;S<T;S++)h[S].codewords[j-1]=e[_++];for(var k=h[0].codewords.length,v=j;v<k;v++)for(var S=0;S<m;S++){var B=E?(S+8)%m:S,D=E&&B>7?v-1:v;h[B].codewords[D]=e[_++]}if(_!==e.length)throw new Pn;return h},t.prototype.getNumDataCodewords=function(){return this.numDataCodewords},t.prototype.getCodewords=function(){return this.codewords},t}(),Nse=function(){function t(e){this.bytes=e,this.byteOffset=0,this.bitOffset=0}return t.prototype.getBitOffset=function(){return this.bitOffset},t.prototype.getByteOffset=function(){return this.byteOffset},t.prototype.readBits=function(e){if(e<1||e>32||e>this.available())throw new Pn(""+e);var r=0,n=this.bitOffset,a=this.byteOffset,s=this.bytes;if(n>0){var o=8-n,l=e<o?e:o,c=o-l,u=255>>8-l<<c;r=(s[a]&u)>>c,e-=l,n+=l,n===8&&(n=0,a++)}if(e>0){for(;e>=8;)r=r<<8|s[a]&255,a++,e-=8;if(e>0){var c=8-e,u=255>>c<<c;r=r<<e|(s[a]&u)>>c,n+=e}}return this.bitOffset=n,this.byteOffset=a,r},t.prototype.available=function(){return 8*(this.bytes.length-this.byteOffset)-this.bitOffset},t}(),go;(function(t){t[t.PAD_ENCODE=0]="PAD_ENCODE",t[t.ASCII_ENCODE=1]="ASCII_ENCODE",t[t.C40_ENCODE=2]="C40_ENCODE",t[t.TEXT_ENCODE=3]="TEXT_ENCODE",t[t.ANSIX12_ENCODE=4]="ANSIX12_ENCODE",t[t.EDIFACT_ENCODE=5]="EDIFACT_ENCODE",t[t.BASE256_ENCODE=6]="BASE256_ENCODE"})(go||(go={}));var a7e=function(){function t(){}return t.decode=function(e){var r=new Nse(e),n=new Zn,a=new Zn,s=new Array,o=go.ASCII_ENCODE;do if(o===go.ASCII_ENCODE)o=this.decodeAsciiSegment(r,n,a);else{switch(o){case go.C40_ENCODE:this.decodeC40Segment(r,n);break;case go.TEXT_ENCODE:this.decodeTextSegment(r,n);break;case go.ANSIX12_ENCODE:this.decodeAnsiX12Segment(r,n);break;case go.EDIFACT_ENCODE:this.decodeEdifactSegment(r,n);break;case go.BASE256_ENCODE:this.decodeBase256Segment(r,n,s);break;default:throw new Hr}o=go.ASCII_ENCODE}while(o!==go.PAD_ENCODE&&r.available()>0);return a.length()>0&&n.append(a.toString()),new xP(e,n.toString(),s.length===0?null:s,null)},t.decodeAsciiSegment=function(e,r,n){var a=!1;do{var s=e.readBits(8);if(s===0)throw new Hr;if(s<=128)return a&&(s+=128),r.append(String.fromCharCode(s-1)),go.ASCII_ENCODE;if(s===129)return go.PAD_ENCODE;if(s<=229){var o=s-130;o<10&&r.append("0"),r.append(""+o)}else switch(s){case 230:return go.C40_ENCODE;case 231:return go.BASE256_ENCODE;case 232:r.append("");break;case 233:case 234:break;case 235:a=!0;break;case 236:r.append("[)>05"),n.insert(0,"");break;case 237:r.append("[)>06"),n.insert(0,"");break;case 238:return go.ANSIX12_ENCODE;case 239:return go.TEXT_ENCODE;case 240:return go.EDIFACT_ENCODE;case 241:break;default:if(s!==254||e.available()!==0)throw new Hr;break}}while(e.available()>0);return go.ASCII_ENCODE},t.decodeC40Segment=function(e,r){var n=!1,a=[],s=0;do{if(e.available()===8)return;var o=e.readBits(8);if(o===254)return;this.parseTwoBytes(o,e.readBits(8),a);for(var l=0;l<3;l++){var c=a[l];switch(s){case 0:if(c<3)s=c+1;else if(c<this.C40_BASIC_SET_CHARS.length){var u=this.C40_BASIC_SET_CHARS[c];n?(r.append(String.fromCharCode(u.charCodeAt(0)+128)),n=!1):r.append(u)}else throw new Hr;break;case 1:n?(r.append(String.fromCharCode(c+128)),n=!1):r.append(String.fromCharCode(c)),s=0;break;case 2:if(c<this.C40_SHIFT2_SET_CHARS.length){var u=this.C40_SHIFT2_SET_CHARS[c];n?(r.append(String.fromCharCode(u.charCodeAt(0)+128)),n=!1):r.append(u)}else switch(c){case 27:r.append("");break;case 30:n=!0;break;default:throw new Hr}s=0;break;case 3:n?(r.append(String.fromCharCode(c+224)),n=!1):r.append(String.fromCharCode(c+96)),s=0;break;default:throw new Hr}}}while(e.available()>0)},t.decodeTextSegment=function(e,r){var n=!1,a=[],s=0;do{if(e.available()===8)return;var o=e.readBits(8);if(o===254)return;this.parseTwoBytes(o,e.readBits(8),a);for(var l=0;l<3;l++){var c=a[l];switch(s){case 0:if(c<3)s=c+1;else if(c<this.TEXT_BASIC_SET_CHARS.length){var u=this.TEXT_BASIC_SET_CHARS[c];n?(r.append(String.fromCharCode(u.charCodeAt(0)+128)),n=!1):r.append(u)}else throw new Hr;break;case 1:n?(r.append(String.fromCharCode(c+128)),n=!1):r.append(String.fromCharCode(c)),s=0;break;case 2:if(c<this.TEXT_SHIFT2_SET_CHARS.length){var u=this.TEXT_SHIFT2_SET_CHARS[c];n?(r.append(String.fromCharCode(u.charCodeAt(0)+128)),n=!1):r.append(u)}else switch(c){case 27:r.append("");break;case 30:n=!0;break;default:throw new Hr}s=0;break;case 3:if(c<this.TEXT_SHIFT3_SET_CHARS.length){var u=this.TEXT_SHIFT3_SET_CHARS[c];n?(r.append(String.fromCharCode(u.charCodeAt(0)+128)),n=!1):r.append(u),s=0}else throw new Hr;break;default:throw new Hr}}}while(e.available()>0)},t.decodeAnsiX12Segment=function(e,r){var n=[];do{if(e.available()===8)return;var a=e.readBits(8);if(a===254)return;this.parseTwoBytes(a,e.readBits(8),n);for(var s=0;s<3;s++){var o=n[s];switch(o){case 0:r.append("\r");break;case 1:r.append("*");break;case 2:r.append(">");break;case 3:r.append(" ");break;default:if(o<14)r.append(String.fromCharCode(o+44));else if(o<40)r.append(String.fromCharCode(o+51));else throw new Hr;break}}}while(e.available()>0)},t.parseTwoBytes=function(e,r,n){var a=(e<<8)+r-1,s=Math.floor(a/1600);n[0]=s,a-=s*1600,s=Math.floor(a/40),n[1]=s,n[2]=a-s*40},t.decodeEdifactSegment=function(e,r){do{if(e.available()<=16)return;for(var n=0;n<4;n++){var a=e.readBits(6);if(a===31){var s=8-e.getBitOffset();s!==8&&e.readBits(s);return}a&32||(a|=64),r.append(String.fromCharCode(a))}}while(e.available()>0)},t.decodeBase256Segment=function(e,r,n){var a=1+e.getByteOffset(),s=this.unrandomize255State(e.readBits(8),a++),o;if(s===0?o=e.available()/8|0:s<250?o=s:o=250*(s-249)+this.unrandomize255State(e.readBits(8),a++),o<0)throw new Hr;for(var l=new Uint8Array(o),c=0;c<o;c++){if(e.available()<8)throw new Hr;l[c]=this.unrandomize255State(e.readBits(8),a++)}n.push(l);try{r.append(Bd.decode(l,ba.ISO88591))}catch(u){throw new Kw("Platform does not support required encoding: "+u.message)}},t.unrandomize255State=function(e,r){var n=149*r%255+1,a=e-n;return a>=0?a:a+256},t.C40_BASIC_SET_CHARS=["*","*","*"," ","0","1","2","3","4","5","6","7","8","9","A","B","C","D","E","F","G","H","I","J","K","L","M","N","O","P","Q","R","S","T","U","V","W","X","Y","Z"],t.C40_SHIFT2_SET_CHARS=["!",'"',"#","$","%","&","'","(",")","*","+",",","-",".","/",":",";","<","=",">","?","@","[","\\","]","^","_"],t.TEXT_BASIC_SET_CHARS=["*","*","*"," ","0","1","2","3","4","5","6","7","8","9","a","b","c","d","e","f","g","h","i","j","k","l","m","n","o","p","q","r","s","t","u","v","w","x","y","z"],t.TEXT_SHIFT2_SET_CHARS=t.C40_SHIFT2_SET_CHARS,t.TEXT_SHIFT3_SET_CHARS=["`","A","B","C","D","E","F","G","H","I","J","K","L","M","N","O","P","Q","R","S","T","U","V","W","X","Y","Z","{","|","}","~",""],t}(),s7e=function(t){var e=typeof Symbol=="function"&&Symbol.iterator,r=e&&t[e],n=0;if(r)return r.call(t);if(t&&typeof t.length=="number")return{next:function(){return t&&n>=t.length&&(t=void 0),{value:t&&t[n++],done:!t}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")},i7e=function(){function t(){this.rsDecoder=new vP(Jc.DATA_MATRIX_FIELD_256)}return t.prototype.decode=function(e){var r,n,a=new r7e(e),s=a.getVersion(),o=a.readCodewords(),l=n7e.getDataBlocks(o,s),c=0;try{for(var u=s7e(l),d=u.next();!d.done;d=u.next()){var f=d.value;c+=f.getNumDataCodewords()}}catch(b){r={error:b}}finally{try{d&&!d.done&&(n=u.return)&&n.call(u)}finally{if(r)throw r.error}}for(var A=new Uint8Array(c),h=l.length,m=0;m<h;m++){var p=l[m],x=p.getCodewords(),v=p.getNumDataCodewords();this.correctErrors(x,v);for(var y=0;y<v;y++)A[y*h+m]=x[y]}return a7e.decode(A)},t.prototype.correctErrors=function(e,r){var n=new Int32Array(e);try{this.rsDecoder.decode(n,e.length-r)}catch{throw new so}for(var a=0;a<r;a++)e[a]=n[a]},t}(),o7e=function(){function t(e){this.image=e,this.rectangleDetector=new uF(this.image)}return t.prototype.detect=function(){var e=this.rectangleDetector.detect(),r=this.detectSolid1(e);if(r=this.detectSolid2(r),r[3]=this.correctTopRight(r),!r[3])throw new rr;r=this.shiftToModuleCenter(r);var n=r[0],a=r[1],s=r[2],o=r[3],l=this.transitionsBetween(n,o)+1,c=this.transitionsBetween(s,o)+1;(l&1)===1&&(l+=1),(c&1)===1&&(c+=1),4*l<7*c&&4*c<7*l&&(l=c=Math.max(l,c));var u=t.sampleGrid(this.image,n,a,s,o,l,c);return new OR(u,[n,a,s,o])},t.shiftPoint=function(e,r,n){var a=(r.getX()-e.getX())/(n+1),s=(r.getY()-e.getY())/(n+1);return new fn(e.getX()+a,e.getY()+s)},t.moveAway=function(e,r,n){var a=e.getX(),s=e.getY();return a<r?a-=1:a+=1,s<n?s-=1:s+=1,new fn(a,s)},t.prototype.detectSolid1=function(e){var r=e[0],n=e[1],a=e[3],s=e[2],o=this.transitionsBetween(r,n),l=this.transitionsBetween(n,a),c=this.transitionsBetween(a,s),u=this.transitionsBetween(s,r),d=o,f=[s,r,n,a];return d>l&&(d=l,f[0]=r,f[1]=n,f[2]=a,f[3]=s),d>c&&(d=c,f[0]=n,f[1]=a,f[2]=s,f[3]=r),d>u&&(f[0]=a,f[1]=s,f[2]=r,f[3]=n),f},t.prototype.detectSolid2=function(e){var r=e[0],n=e[1],a=e[2],s=e[3],o=this.transitionsBetween(r,s),l=t.shiftPoint(n,a,(o+1)*4),c=t.shiftPoint(a,n,(o+1)*4),u=this.transitionsBetween(l,r),d=this.transitionsBetween(c,s);return u<d?(e[0]=r,e[1]=n,e[2]=a,e[3]=s):(e[0]=n,e[1]=a,e[2]=s,e[3]=r),e},t.prototype.correctTopRight=function(e){var r=e[0],n=e[1],a=e[2],s=e[3],o=this.transitionsBetween(r,s),l=this.transitionsBetween(n,s),c=t.shiftPoint(r,n,(l+1)*4),u=t.shiftPoint(a,n,(o+1)*4);o=this.transitionsBetween(c,s),l=this.transitionsBetween(u,s);var d=new fn(s.getX()+(a.getX()-n.getX())/(o+1),s.getY()+(a.getY()-n.getY())/(o+1)),f=new fn(s.getX()+(r.getX()-n.getX())/(l+1),s.getY()+(r.getY()-n.getY())/(l+1));if(!this.isValid(d))return this.isValid(f)?f:null;if(!this.isValid(f))return d;var A=this.transitionsBetween(c,d)+this.transitionsBetween(u,d),h=this.transitionsBetween(c,f)+this.transitionsBetween(u,f);return A>h?d:f},t.prototype.shiftToModuleCenter=function(e){var r=e[0],n=e[1],a=e[2],s=e[3],o=this.transitionsBetween(r,s)+1,l=this.transitionsBetween(a,s)+1,c=t.shiftPoint(r,n,l*4),u=t.shiftPoint(a,n,o*4);o=this.transitionsBetween(c,s)+1,l=this.transitionsBetween(u,s)+1,(o&1)===1&&(o+=1),(l&1)===1&&(l+=1);var d=(r.getX()+n.getX()+a.getX()+s.getX())/4,f=(r.getY()+n.getY()+a.getY()+s.getY())/4;r=t.moveAway(r,d,f),n=t.moveAway(n,d,f),a=t.moveAway(a,d,f),s=t.moveAway(s,d,f);var A,h;return c=t.shiftPoint(r,n,l*4),c=t.shiftPoint(c,s,o*4),A=t.shiftPoint(n,r,l*4),A=t.shiftPoint(A,a,o*4),u=t.shiftPoint(a,s,l*4),u=t.shiftPoint(u,n,o*4),h=t.shiftPoint(s,a,l*4),h=t.shiftPoint(h,r,o*4),[c,A,u,h]},t.prototype.isValid=function(e){return e.getX()>=0&&e.getX()<this.image.getWidth()&&e.getY()>0&&e.getY()<this.image.getHeight()},t.sampleGrid=function(e,r,n,a,s,o,l){var c=DR.getInstance();return c.sampleGrid(e,o,l,.5,.5,o-.5,.5,o-.5,l-.5,.5,l-.5,r.getX(),r.getY(),s.getX(),s.getY(),a.getX(),a.getY(),n.getX(),n.getY())},t.prototype.transitionsBetween=function(e,r){var n=Math.trunc(e.getX()),a=Math.trunc(e.getY()),s=Math.trunc(r.getX()),o=Math.trunc(r.getY()),l=Math.abs(o-a)>Math.abs(s-n);if(l){var c=n;n=a,a=c,c=s,s=o,o=c}for(var u=Math.abs(s-n),d=Math.abs(o-a),f=-u/2,A=a<o?1:-1,h=n<s?1:-1,m=0,p=this.image.get(l?a:n,l?n:a),x=n,v=a;x!==s;x+=h){var y=this.image.get(l?v:x,l?x:v);if(y!==p&&(m++,p=y),f+=d,f>0){if(v===o)break;v+=A,f-=u}}return m},t}(),tI=function(){function t(){this.decoder=new i7e}return t.prototype.decode=function(e,r){r===void 0&&(r=null);var n,a;if(r!=null&&r.has(Ns.PURE_BARCODE)){var s=t.extractPureBits(e.getBlackMatrix());n=this.decoder.decode(s),a=t.NO_POINTS}else{var o=new o7e(e.getBlackMatrix()).detect();n=this.decoder.decode(o.getBits()),a=o.getPoints()}var l=n.getRawBytes(),c=new cc(n.getText(),l,8*l.length,a,jn.DATA_MATRIX,ws.currentTimeMillis()),u=n.getByteSegments();u!=null&&c.putMetadata(Il.BYTE_SEGMENTS,u);var d=n.getECLevel();return d!=null&&c.putMetadata(Il.ERROR_CORRECTION_LEVEL,d),c},t.prototype.reset=function(){},t.extractPureBits=function(e){var r=e.getTopLeftOnBit(),n=e.getBottomRightOnBit();if(r==null||n==null)throw new rr;var a=this.moduleSize(r,e),s=r[1],o=n[1],l=r[0],c=n[0],u=(c-l+1)/a,d=(o-s+1)/a;if(u<=0||d<=0)throw new rr;var f=a/2;s+=f,l+=f;for(var A=new oh(u,d),h=0;h<d;h++)for(var m=s+h*a,p=0;p<u;p++)e.get(l+p*a,m)&&A.set(p,h);return A},t.moduleSize=function(e,r){for(var n=r.getWidth(),a=e[0],s=e[1];a<n&&r.get(a,s);)a++;if(a===n)throw new rr;var o=a-e[0];if(o===0)throw new rr;return o},t.NO_POINTS=[],t}(),l7e=function(){var t=function(e,r){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,a){n.__proto__=a}||function(n,a){for(var s in a)a.hasOwnProperty(s)&&(n[s]=a[s])},t(e,r)};return function(e,r){t(e,r);function n(){this.constructor=e}e.prototype=r===null?Object.create(r):(n.prototype=r.prototype,new n)}}();(function(t){l7e(e,t);function e(r){return r===void 0&&(r=500),t.call(this,new tI,r)||this}return e})(w1);var Jx;(function(t){t[t.L=0]="L",t[t.M=1]="M",t[t.Q=2]="Q",t[t.H=3]="H"})(Jx||(Jx={}));var c7e=function(){function t(e,r,n){this.value=e,this.stringValue=r,this.bits=n,t.FOR_BITS.set(n,this),t.FOR_VALUE.set(e,this)}return t.prototype.getValue=function(){return this.value},t.prototype.getBits=function(){return this.bits},t.fromString=function(e){switch(e){case"L":return t.L;case"M":return t.M;case"Q":return t.Q;case"H":return t.H;default:throw new Li(e+"not available")}},t.prototype.toString=function(){return this.stringValue},t.prototype.equals=function(e){if(!(e instanceof t))return!1;var r=e;return this.value===r.value},t.forBits=function(e){if(e<0||e>=t.FOR_BITS.size)throw new Pn;return t.FOR_BITS.get(e)},t.FOR_BITS=new Map,t.FOR_VALUE=new Map,t.L=new t(Jx.L,"L",1),t.M=new t(Jx.M,"M",0),t.Q=new t(Jx.Q,"Q",3),t.H=new t(Jx.H,"H",2),t}(),u7e=function(t){var e=typeof Symbol=="function"&&Symbol.iterator,r=e&&t[e],n=0;if(r)return r.call(t);if(t&&typeof t.length=="number")return{next:function(){return t&&n>=t.length&&(t=void 0),{value:t&&t[n++],done:!t}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")},Cse=function(){function t(e){this.errorCorrectionLevel=c7e.forBits(e>>3&3),this.dataMask=e&7}return t.numBitsDiffering=function(e,r){return sa.bitCount(e^r)},t.decodeFormatInformation=function(e,r){var n=t.doDecodeFormatInformation(e,r);return n!==null?n:t.doDecodeFormatInformation(e^t.FORMAT_INFO_MASK_QR,r^t.FORMAT_INFO_MASK_QR)},t.doDecodeFormatInformation=function(e,r){var n,a,s=Number.MAX_SAFE_INTEGER,o=0;try{for(var l=u7e(t.FORMAT_INFO_DECODE_LOOKUP),c=l.next();!c.done;c=l.next()){var u=c.value,d=u[0];if(d===e||d===r)return new t(u[1]);var f=t.numBitsDiffering(e,d);f<s&&(o=u[1],s=f),e!==r&&(f=t.numBitsDiffering(r,d),f<s&&(o=u[1],s=f))}}catch(A){n={error:A}}finally{try{c&&!c.done&&(a=l.return)&&a.call(l)}finally{if(n)throw n.error}}return s<=3?new t(o):null},t.prototype.getErrorCorrectionLevel=function(){return this.errorCorrectionLevel},t.prototype.getDataMask=function(){return this.dataMask},t.prototype.hashCode=function(){return this.errorCorrectionLevel.getBits()<<3|this.dataMask},t.prototype.equals=function(e){if(!(e instanceof t))return!1;var r=e;return this.errorCorrectionLevel===r.errorCorrectionLevel&&this.dataMask===r.dataMask},t.FORMAT_INFO_MASK_QR=21522,t.FORMAT_INFO_DECODE_LOOKUP=[Int32Array.from([21522,0]),Int32Array.from([20773,1]),Int32Array.from([24188,2]),Int32Array.from([23371,3]),Int32Array.from([17913,4]),Int32Array.from([16590,5]),Int32Array.from([20375,6]),Int32Array.from([19104,7]),Int32Array.from([30660,8]),Int32Array.from([29427,9]),Int32Array.from([32170,10]),Int32Array.from([30877,11]),Int32Array.from([26159,12]),Int32Array.from([25368,13]),Int32Array.from([27713,14]),Int32Array.from([26998,15]),Int32Array.from([5769,16]),Int32Array.from([5054,17]),Int32Array.from([7399,18]),Int32Array.from([6608,19]),Int32Array.from([1890,20]),Int32Array.from([597,21]),Int32Array.from([3340,22]),Int32Array.from([2107,23]),Int32Array.from([13663,24]),Int32Array.from([12392,25]),Int32Array.from([16177,26]),Int32Array.from([14854,27]),Int32Array.from([9396,28]),Int32Array.from([8579,29]),Int32Array.from([11994,30]),Int32Array.from([11245,31])],t}(),d7e=function(t){var e=typeof Symbol=="function"&&Symbol.iterator,r=e&&t[e],n=0;if(r)return r.call(t);if(t&&typeof t.length=="number")return{next:function(){return t&&n>=t.length&&(t=void 0),{value:t&&t[n++],done:!t}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")},Ut=function(){function t(e){for(var r=[],n=1;n<arguments.length;n++)r[n-1]=arguments[n];this.ecCodewordsPerBlock=e,this.ecBlocks=r}return t.prototype.getECCodewordsPerBlock=function(){return this.ecCodewordsPerBlock},t.prototype.getNumBlocks=function(){var e,r,n=0,a=this.ecBlocks;try{for(var s=d7e(a),o=s.next();!o.done;o=s.next()){var l=o.value;n+=l.getCount()}}catch(c){e={error:c}}finally{try{o&&!o.done&&(r=s.return)&&r.call(s)}finally{if(e)throw e.error}}return n},t.prototype.getTotalECCodewords=function(){return this.ecCodewordsPerBlock*this.getNumBlocks()},t.prototype.getECBlocks=function(){return this.ecBlocks},t}(),at=function(){function t(e,r){this.count=e,this.dataCodewords=r}return t.prototype.getCount=function(){return this.count},t.prototype.getDataCodewords=function(){return this.dataCodewords},t}(),f7e=function(t){var e=typeof Symbol=="function"&&Symbol.iterator,r=e&&t[e],n=0;if(r)return r.call(t);if(t&&typeof t.length=="number")return{next:function(){return t&&n>=t.length&&(t=void 0),{value:t&&t[n++],done:!t}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")},Hp=function(){function t(e,r){for(var n,a,s=[],o=2;o<arguments.length;o++)s[o-2]=arguments[o];this.versionNumber=e,this.alignmentPatternCenters=r,this.ecBlocks=s;var l=0,c=s[0].getECCodewordsPerBlock(),u=s[0].getECBlocks();try{for(var d=f7e(u),f=d.next();!f.done;f=d.next()){var A=f.value;l+=A.getCount()*(A.getDataCodewords()+c)}}catch(h){n={error:h}}finally{try{f&&!f.done&&(a=d.return)&&a.call(d)}finally{if(n)throw n.error}}this.totalCodewords=l}return t.prototype.getVersionNumber=function(){return this.versionNumber},t.prototype.getAlignmentPatternCenters=function(){return this.alignmentPatternCenters},t.prototype.getTotalCodewords=function(){return this.totalCodewords},t.prototype.getDimensionForVersion=function(){return 17+4*this.versionNumber},t.prototype.getECBlocksForLevel=function(e){return this.ecBlocks[e.getValue()]},t.getProvisionalVersionForDimension=function(e){if(e%4!==1)throw new Hr;try{return this.getVersionForNumber((e-17)/4)}catch{throw new Hr}},t.getVersionForNumber=function(e){if(e<1||e>40)throw new Pn;return t.VERSIONS[e-1]},t.decodeVersionInformation=function(e){for(var r=Number.MAX_SAFE_INTEGER,n=0,a=0;a<t.VERSION_DECODE_INFO.length;a++){var s=t.VERSION_DECODE_INFO[a];if(s===e)return t.getVersionForNumber(a+7);var o=Cse.numBitsDiffering(e,s);o<r&&(n=a+7,r=o)}return r<=3?t.getVersionForNumber(n):null},t.prototype.buildFunctionPattern=function(){var e=this.getDimensionForVersion(),r=new oh(e);r.setRegion(0,0,9,9),r.setRegion(e-8,0,8,9),r.setRegion(0,e-8,9,8);for(var n=this.alignmentPatternCenters.length,a=0;a<n;a++)for(var s=this.alignmentPatternCenters[a]-2,o=0;o<n;o++)a===0&&(o===0||o===n-1)||a===n-1&&o===0||r.setRegion(this.alignmentPatternCenters[o]-2,s,5,5);return r.setRegion(6,9,1,e-17),r.setRegion(9,6,e-17,1),this.versionNumber>6&&(r.setRegion(e-11,0,3,6),r.setRegion(0,e-11,6,3)),r},t.prototype.toString=function(){return""+this.versionNumber},t.VERSION_DECODE_INFO=Int32Array.from([31892,34236,39577,42195,48118,51042,55367,58893,63784,68472,70749,76311,79154,84390,87683,92361,96236,102084,102881,110507,110734,117786,119615,126325,127568,133589,136944,141498,145311,150283,152622,158308,161089,167017]),t.VERSIONS=[new t(1,new Int32Array(0),new Ut(7,new at(1,19)),new Ut(10,new at(1,16)),new Ut(13,new at(1,13)),new Ut(17,new at(1,9))),new t(2,Int32Array.from([6,18]),new Ut(10,new at(1,34)),new Ut(16,new at(1,28)),new Ut(22,new at(1,22)),new Ut(28,new at(1,16))),new t(3,Int32Array.from([6,22]),new Ut(15,new at(1,55)),new Ut(26,new at(1,44)),new Ut(18,new at(2,17)),new Ut(22,new at(2,13))),new t(4,Int32Array.from([6,26]),new Ut(20,new at(1,80)),new Ut(18,new at(2,32)),new Ut(26,new at(2,24)),new Ut(16,new at(4,9))),new t(5,Int32Array.from([6,30]),new Ut(26,new at(1,108)),new Ut(24,new at(2,43)),new Ut(18,new at(2,15),new at(2,16)),new Ut(22,new at(2,11),new at(2,12))),new t(6,Int32Array.from([6,34]),new Ut(18,new at(2,68)),new Ut(16,new at(4,27)),new Ut(24,new at(4,19)),new Ut(28,new at(4,15))),new t(7,Int32Array.from([6,22,38]),new Ut(20,new at(2,78)),new Ut(18,new at(4,31)),new Ut(18,new at(2,14),new at(4,15)),new Ut(26,new at(4,13),new at(1,14))),new t(8,Int32Array.from([6,24,42]),new Ut(24,new at(2,97)),new Ut(22,new at(2,38),new at(2,39)),new Ut(22,new at(4,18),new at(2,19)),new Ut(26,new at(4,14),new at(2,15))),new t(9,Int32Array.from([6,26,46]),new Ut(30,new at(2,116)),new Ut(22,new at(3,36),new at(2,37)),new Ut(20,new at(4,16),new at(4,17)),new Ut(24,new at(4,12),new at(4,13))),new t(10,Int32Array.from([6,28,50]),new Ut(18,new at(2,68),new at(2,69)),new Ut(26,new at(4,43),new at(1,44)),new Ut(24,new at(6,19),new at(2,20)),new Ut(28,new at(6,15),new at(2,16))),new t(11,Int32Array.from([6,30,54]),new Ut(20,new at(4,81)),new Ut(30,new at(1,50),new at(4,51)),new Ut(28,new at(4,22),new at(4,23)),new Ut(24,new at(3,12),new at(8,13))),new t(12,Int32Array.from([6,32,58]),new Ut(24,new at(2,92),new at(2,93)),new Ut(22,new at(6,36),new at(2,37)),new Ut(26,new at(4,20),new at(6,21)),new Ut(28,new at(7,14),new at(4,15))),new t(13,Int32Array.from([6,34,62]),new Ut(26,new at(4,107)),new Ut(22,new at(8,37),new at(1,38)),new Ut(24,new at(8,20),new at(4,21)),new Ut(22,new at(12,11),new at(4,12))),new t(14,Int32Array.from([6,26,46,66]),new Ut(30,new at(3,115),new at(1,116)),new Ut(24,new at(4,40),new at(5,41)),new Ut(20,new at(11,16),new at(5,17)),new Ut(24,new at(11,12),new at(5,13))),new t(15,Int32Array.from([6,26,48,70]),new Ut(22,new at(5,87),new at(1,88)),new Ut(24,new at(5,41),new at(5,42)),new Ut(30,new at(5,24),new at(7,25)),new Ut(24,new at(11,12),new at(7,13))),new t(16,Int32Array.from([6,26,50,74]),new Ut(24,new at(5,98),new at(1,99)),new Ut(28,new at(7,45),new at(3,46)),new Ut(24,new at(15,19),new at(2,20)),new Ut(30,new at(3,15),new at(13,16))),new t(17,Int32Array.from([6,30,54,78]),new Ut(28,new at(1,107),new at(5,108)),new Ut(28,new at(10,46),new at(1,47)),new Ut(28,new at(1,22),new at(15,23)),new Ut(28,new at(2,14),new at(17,15))),new t(18,Int32Array.from([6,30,56,82]),new Ut(30,new at(5,120),new at(1,121)),new Ut(26,new at(9,43),new at(4,44)),new Ut(28,new at(17,22),new at(1,23)),new Ut(28,new at(2,14),new at(19,15))),new t(19,Int32Array.from([6,30,58,86]),new Ut(28,new at(3,113),new at(4,114)),new Ut(26,new at(3,44),new at(11,45)),new Ut(26,new at(17,21),new at(4,22)),new Ut(26,new at(9,13),new at(16,14))),new t(20,Int32Array.from([6,34,62,90]),new Ut(28,new at(3,107),new at(5,108)),new Ut(26,new at(3,41),new at(13,42)),new Ut(30,new at(15,24),new at(5,25)),new Ut(28,new at(15,15),new at(10,16))),new t(21,Int32Array.from([6,28,50,72,94]),new Ut(28,new at(4,116),new at(4,117)),new Ut(26,new at(17,42)),new Ut(28,new at(17,22),new at(6,23)),new Ut(30,new at(19,16),new at(6,17))),new t(22,Int32Array.from([6,26,50,74,98]),new Ut(28,new at(2,111),new at(7,112)),new Ut(28,new at(17,46)),new Ut(30,new at(7,24),new at(16,25)),new Ut(24,new at(34,13))),new t(23,Int32Array.from([6,30,54,78,102]),new Ut(30,new at(4,121),new at(5,122)),new Ut(28,new at(4,47),new at(14,48)),new Ut(30,new at(11,24),new at(14,25)),new Ut(30,new at(16,15),new at(14,16))),new t(24,Int32Array.from([6,28,54,80,106]),new Ut(30,new at(6,117),new at(4,118)),new Ut(28,new at(6,45),new at(14,46)),new Ut(30,new at(11,24),new at(16,25)),new Ut(30,new at(30,16),new at(2,17))),new t(25,Int32Array.from([6,32,58,84,110]),new Ut(26,new at(8,106),new at(4,107)),new Ut(28,new at(8,47),new at(13,48)),new Ut(30,new at(7,24),new at(22,25)),new Ut(30,new at(22,15),new at(13,16))),new t(26,Int32Array.from([6,30,58,86,114]),new Ut(28,new at(10,114),new at(2,115)),new Ut(28,new at(19,46),new at(4,47)),new Ut(28,new at(28,22),new at(6,23)),new Ut(30,new at(33,16),new at(4,17))),new t(27,Int32Array.from([6,34,62,90,118]),new Ut(30,new at(8,122),new at(4,123)),new Ut(28,new at(22,45),new at(3,46)),new Ut(30,new at(8,23),new at(26,24)),new Ut(30,new at(12,15),new at(28,16))),new t(28,Int32Array.from([6,26,50,74,98,122]),new Ut(30,new at(3,117),new at(10,118)),new Ut(28,new at(3,45),new at(23,46)),new Ut(30,new at(4,24),new at(31,25)),new Ut(30,new at(11,15),new at(31,16))),new t(29,Int32Array.from([6,30,54,78,102,126]),new Ut(30,new at(7,116),new at(7,117)),new Ut(28,new at(21,45),new at(7,46)),new Ut(30,new at(1,23),new at(37,24)),new Ut(30,new at(19,15),new at(26,16))),new t(30,Int32Array.from([6,26,52,78,104,130]),new Ut(30,new at(5,115),new at(10,116)),new Ut(28,new at(19,47),new at(10,48)),new Ut(30,new at(15,24),new at(25,25)),new Ut(30,new at(23,15),new at(25,16))),new t(31,Int32Array.from([6,30,56,82,108,134]),new Ut(30,new at(13,115),new at(3,116)),new Ut(28,new at(2,46),new at(29,47)),new Ut(30,new at(42,24),new at(1,25)),new Ut(30,new at(23,15),new at(28,16))),new t(32,Int32Array.from([6,34,60,86,112,138]),new Ut(30,new at(17,115)),new Ut(28,new at(10,46),new at(23,47)),new Ut(30,new at(10,24),new at(35,25)),new Ut(30,new at(19,15),new at(35,16))),new t(33,Int32Array.from([6,30,58,86,114,142]),new Ut(30,new at(17,115),new at(1,116)),new Ut(28,new at(14,46),new at(21,47)),new Ut(30,new at(29,24),new at(19,25)),new Ut(30,new at(11,15),new at(46,16))),new t(34,Int32Array.from([6,34,62,90,118,146]),new Ut(30,new at(13,115),new at(6,116)),new Ut(28,new at(14,46),new at(23,47)),new Ut(30,new at(44,24),new at(7,25)),new Ut(30,new at(59,16),new at(1,17))),new t(35,Int32Array.from([6,30,54,78,102,126,150]),new Ut(30,new at(12,121),new at(7,122)),new Ut(28,new at(12,47),new at(26,48)),new Ut(30,new at(39,24),new at(14,25)),new Ut(30,new at(22,15),new at(41,16))),new t(36,Int32Array.from([6,24,50,76,102,128,154]),new Ut(30,new at(6,121),new at(14,122)),new Ut(28,new at(6,47),new at(34,48)),new Ut(30,new at(46,24),new at(10,25)),new Ut(30,new at(2,15),new at(64,16))),new t(37,Int32Array.from([6,28,54,80,106,132,158]),new Ut(30,new at(17,122),new at(4,123)),new Ut(28,new at(29,46),new at(14,47)),new Ut(30,new at(49,24),new at(10,25)),new Ut(30,new at(24,15),new at(46,16))),new t(38,Int32Array.from([6,32,58,84,110,136,162]),new Ut(30,new at(4,122),new at(18,123)),new Ut(28,new at(13,46),new at(32,47)),new Ut(30,new at(48,24),new at(14,25)),new Ut(30,new at(42,15),new at(32,16))),new t(39,Int32Array.from([6,26,54,82,110,138,166]),new Ut(30,new at(20,117),new at(4,118)),new Ut(28,new at(40,47),new at(7,48)),new Ut(30,new at(43,24),new at(22,25)),new Ut(30,new at(10,15),new at(67,16))),new t(40,Int32Array.from([6,30,58,86,114,142,170]),new Ut(30,new at(19,118),new at(6,119)),new Ut(28,new at(18,47),new at(31,48)),new Ut(30,new at(34,24),new at(34,25)),new Ut(30,new at(20,15),new at(61,16)))],t}(),Qo;(function(t){t[t.DATA_MASK_000=0]="DATA_MASK_000",t[t.DATA_MASK_001=1]="DATA_MASK_001",t[t.DATA_MASK_010=2]="DATA_MASK_010",t[t.DATA_MASK_011=3]="DATA_MASK_011",t[t.DATA_MASK_100=4]="DATA_MASK_100",t[t.DATA_MASK_101=5]="DATA_MASK_101",t[t.DATA_MASK_110=6]="DATA_MASK_110",t[t.DATA_MASK_111=7]="DATA_MASK_111"})(Qo||(Qo={}));var U$=function(){function t(e,r){this.value=e,this.isMasked=r}return t.prototype.unmaskBitMatrix=function(e,r){for(var n=0;n<r;n++)for(var a=0;a<r;a++)this.isMasked(n,a)&&e.flip(a,n)},t.values=new Map([[Qo.DATA_MASK_000,new t(Qo.DATA_MASK_000,function(e,r){return(e+r&1)===0})],[Qo.DATA_MASK_001,new t(Qo.DATA_MASK_001,function(e,r){return(e&1)===0})],[Qo.DATA_MASK_010,new t(Qo.DATA_MASK_010,function(e,r){return r%3===0})],[Qo.DATA_MASK_011,new t(Qo.DATA_MASK_011,function(e,r){return(e+r)%3===0})],[Qo.DATA_MASK_100,new t(Qo.DATA_MASK_100,function(e,r){return(Math.floor(e/2)+Math.floor(r/3)&1)===0})],[Qo.DATA_MASK_101,new t(Qo.DATA_MASK_101,function(e,r){return e*r%6===0})],[Qo.DATA_MASK_110,new t(Qo.DATA_MASK_110,function(e,r){return e*r%6<3})],[Qo.DATA_MASK_111,new t(Qo.DATA_MASK_111,function(e,r){return(e+r+e*r%3&1)===0})]]),t}(),h7e=function(){function t(e){var r=e.getHeight();if(r<21||(r&3)!==1)throw new Hr;this.bitMatrix=e}return t.prototype.readFormatInformation=function(){if(this.parsedFormatInfo!==null&&this.parsedFormatInfo!==void 0)return this.parsedFormatInfo;for(var e=0,r=0;r<6;r++)e=this.copyBit(r,8,e);e=this.copyBit(7,8,e),e=this.copyBit(8,8,e),e=this.copyBit(8,7,e);for(var n=5;n>=0;n--)e=this.copyBit(8,n,e);for(var a=this.bitMatrix.getHeight(),s=0,o=a-7,n=a-1;n>=o;n--)s=this.copyBit(8,n,s);for(var r=a-8;r<a;r++)s=this.copyBit(r,8,s);if(this.parsedFormatInfo=Cse.decodeFormatInformation(e,s),this.parsedFormatInfo!==null)return this.parsedFormatInfo;throw new Hr},t.prototype.readVersion=function(){if(this.parsedVersion!==null&&this.parsedVersion!==void 0)return this.parsedVersion;var e=this.bitMatrix.getHeight(),r=Math.floor((e-17)/4);if(r<=6)return Hp.getVersionForNumber(r);for(var n=0,a=e-11,s=5;s>=0;s--)for(var o=e-9;o>=a;o--)n=this.copyBit(o,s,n);var l=Hp.decodeVersionInformation(n);if(l!==null&&l.getDimensionForVersion()===e)return this.parsedVersion=l,l;n=0;for(var o=5;o>=0;o--)for(var s=e-9;s>=a;s--)n=this.copyBit(o,s,n);if(l=Hp.decodeVersionInformation(n),l!==null&&l.getDimensionForVersion()===e)return this.parsedVersion=l,l;throw new Hr},t.prototype.copyBit=function(e,r,n){var a=this.isMirror?this.bitMatrix.get(r,e):this.bitMatrix.get(e,r);return a?n<<1|1:n<<1},t.prototype.readCodewords=function(){var e=this.readFormatInformation(),r=this.readVersion(),n=U$.values.get(e.getDataMask()),a=this.bitMatrix.getHeight();n.unmaskBitMatrix(this.bitMatrix,a);for(var s=r.buildFunctionPattern(),o=!0,l=new Uint8Array(r.getTotalCodewords()),c=0,u=0,d=0,f=a-1;f>0;f-=2){f===6&&f--;for(var A=0;A<a;A++)for(var h=o?a-1-A:A,m=0;m<2;m++)s.get(f-m,h)||(d++,u<<=1,this.bitMatrix.get(f-m,h)&&(u|=1),d===8&&(l[c++]=u,d=0,u=0));o=!o}if(c!==r.getTotalCodewords())throw new Hr;return l},t.prototype.remask=function(){if(this.parsedFormatInfo!==null){var e=U$.values.get(this.parsedFormatInfo.getDataMask()),r=this.bitMatrix.getHeight();e.unmaskBitMatrix(this.bitMatrix,r)}},t.prototype.setMirror=function(e){this.parsedVersion=null,this.parsedFormatInfo=null,this.isMirror=e},t.prototype.mirror=function(){for(var e=this.bitMatrix,r=0,n=e.getWidth();r<n;r++)for(var a=r+1,s=e.getHeight();a<s;a++)e.get(r,a)!==e.get(a,r)&&(e.flip(a,r),e.flip(r,a))},t}(),Q$=function(t){var e=typeof Symbol=="function"&&Symbol.iterator,r=e&&t[e],n=0;if(r)return r.call(t);if(t&&typeof t.length=="number")return{next:function(){return t&&n>=t.length&&(t=void 0),{value:t&&t[n++],done:!t}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")},A7e=function(){function t(e,r){this.numDataCodewords=e,this.codewords=r}return t.getDataBlocks=function(e,r,n){var a,s,o,l;if(e.length!==r.getTotalCodewords())throw new Pn;var c=r.getECBlocksForLevel(n),u=0,d=c.getECBlocks();try{for(var f=Q$(d),A=f.next();!A.done;A=f.next()){var h=A.value;u+=h.getCount()}}catch(D){a={error:D}}finally{try{A&&!A.done&&(s=f.return)&&s.call(f)}finally{if(a)throw a.error}}var m=new Array(u),p=0;try{for(var x=Q$(d),v=x.next();!v.done;v=x.next())for(var h=v.value,y=0;y<h.getCount();y++){var b=h.getDataCodewords(),w=c.getECCodewordsPerBlock()+b;m[p++]=new t(b,new Uint8Array(w))}}catch(D){o={error:D}}finally{try{v&&!v.done&&(l=x.return)&&l.call(x)}finally{if(o)throw o.error}}for(var j=m[0].codewords.length,I=m.length-1;I>=0;){var _=m[I].codewords.length;if(_===j)break;I--}I++;for(var S=j-c.getECCodewordsPerBlock(),E=0,y=0;y<S;y++)for(var T=0;T<p;T++)m[T].codewords[y]=e[E++];for(var T=I;T<p;T++)m[T].codewords[S]=e[E++];for(var k=m[0].codewords.length,y=S;y<k;y++)for(var T=0;T<p;T++){var B=T<I?y:y+1;m[T].codewords[B]=e[E++]}return m},t.prototype.getNumDataCodewords=function(){return this.numDataCodewords},t.prototype.getCodewords=function(){return this.codewords},t}(),hd;(function(t){t[t.TERMINATOR=0]="TERMINATOR",t[t.NUMERIC=1]="NUMERIC",t[t.ALPHANUMERIC=2]="ALPHANUMERIC",t[t.STRUCTURED_APPEND=3]="STRUCTURED_APPEND",t[t.BYTE=4]="BYTE",t[t.ECI=5]="ECI",t[t.KANJI=6]="KANJI",t[t.FNC1_FIRST_POSITION=7]="FNC1_FIRST_POSITION",t[t.FNC1_SECOND_POSITION=8]="FNC1_SECOND_POSITION",t[t.HANZI=9]="HANZI"})(hd||(hd={}));var Is=function(){function t(e,r,n,a){this.value=e,this.stringValue=r,this.characterCountBitsForVersions=n,this.bits=a,t.FOR_BITS.set(a,this),t.FOR_VALUE.set(e,this)}return t.forBits=function(e){var r=t.FOR_BITS.get(e);if(r===void 0)throw new Pn;return r},t.prototype.getCharacterCountBits=function(e){var r=e.getVersionNumber(),n;return r<=9?n=0:r<=26?n=1:n=2,this.characterCountBitsForVersions[n]},t.prototype.getValue=function(){return this.value},t.prototype.getBits=function(){return this.bits},t.prototype.equals=function(e){if(!(e instanceof t))return!1;var r=e;return this.value===r.value},t.prototype.toString=function(){return this.stringValue},t.FOR_BITS=new Map,t.FOR_VALUE=new Map,t.TERMINATOR=new t(hd.TERMINATOR,"TERMINATOR",Int32Array.from([0,0,0]),0),t.NUMERIC=new t(hd.NUMERIC,"NUMERIC",Int32Array.from([10,12,14]),1),t.ALPHANUMERIC=new t(hd.ALPHANUMERIC,"ALPHANUMERIC",Int32Array.from([9,11,13]),2),t.STRUCTURED_APPEND=new t(hd.STRUCTURED_APPEND,"STRUCTURED_APPEND",Int32Array.from([0,0,0]),3),t.BYTE=new t(hd.BYTE,"BYTE",Int32Array.from([8,16,16]),4),t.ECI=new t(hd.ECI,"ECI",Int32Array.from([0,0,0]),7),t.KANJI=new t(hd.KANJI,"KANJI",Int32Array.from([8,10,12]),8),t.FNC1_FIRST_POSITION=new t(hd.FNC1_FIRST_POSITION,"FNC1_FIRST_POSITION",Int32Array.from([0,0,0]),5),t.FNC1_SECOND_POSITION=new t(hd.FNC1_SECOND_POSITION,"FNC1_SECOND_POSITION",Int32Array.from([0,0,0]),9),t.HANZI=new t(hd.HANZI,"HANZI",Int32Array.from([8,10,12]),13),t}(),m7e=function(){function t(){}return t.decode=function(e,r,n,a){var s=new Nse(e),o=new Zn,l=new Array,c=-1,u=-1;try{var d=null,f=!1,A=void 0;do{if(s.available()<4)A=Is.TERMINATOR;else{var h=s.readBits(4);A=Is.forBits(h)}switch(A){case Is.TERMINATOR:break;case Is.FNC1_FIRST_POSITION:case Is.FNC1_SECOND_POSITION:f=!0;break;case Is.STRUCTURED_APPEND:if(s.available()<16)throw new Hr;c=s.readBits(8),u=s.readBits(8);break;case Is.ECI:var m=t.parseECIValue(s);if(d=Eo.getCharacterSetECIByValue(m),d===null)throw new Hr;break;case Is.HANZI:var p=s.readBits(4),x=s.readBits(A.getCharacterCountBits(r));p===t.GB2312_SUBSET&&t.decodeHanziSegment(s,o,x);break;default:var v=s.readBits(A.getCharacterCountBits(r));switch(A){case Is.NUMERIC:t.decodeNumericSegment(s,o,v);break;case Is.ALPHANUMERIC:t.decodeAlphanumericSegment(s,o,v,f);break;case Is.BYTE:t.decodeByteSegment(s,o,v,d,l,a);break;case Is.KANJI:t.decodeKanjiSegment(s,o,v);break;default:throw new Hr}break}}while(A!==Is.TERMINATOR)}catch{throw new Hr}return new xP(e,o.toString(),l.length===0?null:l,n===null?null:n.toString(),c,u)},t.decodeHanziSegment=function(e,r,n){if(n*13>e.available())throw new Hr;for(var a=new Uint8Array(2*n),s=0;n>0;){var o=e.readBits(13),l=o/96<<8&4294967295|o%96;l<959?l+=41377:l+=42657,a[s]=l>>8&255,a[s+1]=l&255,s+=2,n--}try{r.append(Bd.decode(a,ba.GB2312))}catch(c){throw new Hr(c)}},t.decodeKanjiSegment=function(e,r,n){if(n*13>e.available())throw new Hr;for(var a=new Uint8Array(2*n),s=0;n>0;){var o=e.readBits(13),l=o/192<<8&4294967295|o%192;l<7936?l+=33088:l+=49472,a[s]=l>>8,a[s+1]=l,s+=2,n--}try{r.append(Bd.decode(a,ba.SHIFT_JIS))}catch(c){throw new Hr(c)}},t.decodeByteSegment=function(e,r,n,a,s,o){if(8*n>e.available())throw new Hr;for(var l=new Uint8Array(n),c=0;c<n;c++)l[c]=e.readBits(8);var u;a===null?u=ba.guessEncoding(l,o):u=a.getName();try{r.append(Bd.decode(l,u))}catch(d){throw new Hr(d)}s.push(l)},t.toAlphaNumericChar=function(e){if(e>=t.ALPHANUMERIC_CHARS.length)throw new Hr;return t.ALPHANUMERIC_CHARS[e]},t.decodeAlphanumericSegment=function(e,r,n,a){for(var s=r.length();n>1;){if(e.available()<11)throw new Hr;var o=e.readBits(11);r.append(t.toAlphaNumericChar(Math.floor(o/45))),r.append(t.toAlphaNumericChar(o%45)),n-=2}if(n===1){if(e.available()<6)throw new Hr;r.append(t.toAlphaNumericChar(e.readBits(6)))}if(a)for(var l=s;l<r.length();l++)r.charAt(l)==="%"&&(l<r.length()-1&&r.charAt(l+1)==="%"?r.deleteCharAt(l+1):r.setCharAt(l,""))},t.decodeNumericSegment=function(e,r,n){for(;n>=3;){if(e.available()<10)throw new Hr;var a=e.readBits(10);if(a>=1e3)throw new Hr;r.append(t.toAlphaNumericChar(Math.floor(a/100))),r.append(t.toAlphaNumericChar(Math.floor(a/10)%10)),r.append(t.toAlphaNumericChar(a%10)),n-=3}if(n===2){if(e.available()<7)throw new Hr;var s=e.readBits(7);if(s>=100)throw new Hr;r.append(t.toAlphaNumericChar(Math.floor(s/10))),r.append(t.toAlphaNumericChar(s%10))}else if(n===1){if(e.available()<4)throw new Hr;var o=e.readBits(4);if(o>=10)throw new Hr;r.append(t.toAlphaNumericChar(o))}},t.parseECIValue=function(e){var r=e.readBits(8);if(!(r&128))return r&127;if((r&192)===128){var n=e.readBits(8);return(r&63)<<8&4294967295|n}if((r&224)===192){var a=e.readBits(16);return(r&31)<<16&4294967295|a}throw new Hr},t.ALPHANUMERIC_CHARS="0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZ $%*+-./:",t.GB2312_SUBSET=1,t}(),_se=function(){function t(e){this.mirrored=e}return t.prototype.isMirrored=function(){return this.mirrored},t.prototype.applyMirroredCorrection=function(e){if(!(!this.mirrored||e===null||e.length<3)){var r=e[0];e[0]=e[2],e[2]=r}},t}(),V$=function(t){var e=typeof Symbol=="function"&&Symbol.iterator,r=e&&t[e],n=0;if(r)return r.call(t);if(t&&typeof t.length=="number")return{next:function(){return t&&n>=t.length&&(t=void 0),{value:t&&t[n++],done:!t}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")},p7e=function(){function t(){this.rsDecoder=new vP(Jc.QR_CODE_FIELD_256)}return t.prototype.decodeBooleanArray=function(e,r){return this.decodeBitMatrix(oh.parseFromBooleanArray(e),r)},t.prototype.decodeBitMatrix=function(e,r){var n=new h7e(e),a=null;try{return this.decodeBitMatrixParser(n,r)}catch(o){a=o}try{n.remask(),n.setMirror(!0),n.readVersion(),n.readFormatInformation(),n.mirror();var s=this.decodeBitMatrixParser(n,r);return s.setOther(new _se(!0)),s}catch(o){throw a!==null?a:o}},t.prototype.decodeBitMatrixParser=function(e,r){var n,a,s,o,l=e.readVersion(),c=e.readFormatInformation().getErrorCorrectionLevel(),u=e.readCodewords(),d=A7e.getDataBlocks(u,l,c),f=0;try{for(var A=V$(d),h=A.next();!h.done;h=A.next()){var m=h.value;f+=m.getNumDataCodewords()}}catch(I){n={error:I}}finally{try{h&&!h.done&&(a=A.return)&&a.call(A)}finally{if(n)throw n.error}}var p=new Uint8Array(f),x=0;try{for(var v=V$(d),y=v.next();!y.done;y=v.next()){var m=y.value,b=m.getCodewords(),w=m.getNumDataCodewords();this.correctErrors(b,w);for(var j=0;j<w;j++)p[x++]=b[j]}}catch(I){s={error:I}}finally{try{y&&!y.done&&(o=v.return)&&o.call(v)}finally{if(s)throw s.error}}return m7e.decode(p,l,c,r)},t.prototype.correctErrors=function(e,r){var n=new Int32Array(e);try{this.rsDecoder.decode(n,e.length-r)}catch{throw new so}for(var a=0;a<r;a++)e[a]=n[a]},t}(),g7e=function(){var t=function(e,r){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,a){n.__proto__=a}||function(n,a){for(var s in a)a.hasOwnProperty(s)&&(n[s]=a[s])},t(e,r)};return function(e,r){t(e,r);function n(){this.constructor=e}e.prototype=r===null?Object.create(r):(n.prototype=r.prototype,new n)}}(),x7e=function(t){g7e(e,t);function e(r,n,a){var s=t.call(this,r,n)||this;return s.estimatedModuleSize=a,s}return e.prototype.aboutEquals=function(r,n,a){if(Math.abs(n-this.getY())<=r&&Math.abs(a-this.getX())<=r){var s=Math.abs(r-this.estimatedModuleSize);return s<=1||s<=this.estimatedModuleSize}return!1},e.prototype.combineEstimate=function(r,n,a){var s=(this.getX()+n)/2,o=(this.getY()+r)/2,l=(this.estimatedModuleSize+a)/2;return new e(s,o,l)},e}(fn),v7e=function(t){var e=typeof Symbol=="function"&&Symbol.iterator,r=e&&t[e],n=0;if(r)return r.call(t);if(t&&typeof t.length=="number")return{next:function(){return t&&n>=t.length&&(t=void 0),{value:t&&t[n++],done:!t}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")},y7e=function(){function t(e,r,n,a,s,o,l){this.image=e,this.startX=r,this.startY=n,this.width=a,this.height=s,this.moduleSize=o,this.resultPointCallback=l,this.possibleCenters=[],this.crossCheckStateCount=new Int32Array(3)}return t.prototype.find=function(){for(var e=this.startX,r=this.height,n=this.width,a=e+n,s=this.startY+r/2,o=new Int32Array(3),l=this.image,c=0;c<r;c++){var u=s+(c&1?-Math.floor((c+1)/2):Math.floor((c+1)/2));o[0]=0,o[1]=0,o[2]=0;for(var d=e;d<a&&!l.get(d,u);)d++;for(var f=0;d<a;){if(l.get(d,u))if(f===1)o[1]++;else if(f===2){if(this.foundPatternCross(o)){var A=this.handlePossibleCenter(o,u,d);if(A!==null)return A}o[0]=o[2],o[1]=1,o[2]=0,f=1}else o[++f]++;else f===1&&f++,o[f]++;d++}if(this.foundPatternCross(o)){var A=this.handlePossibleCenter(o,u,a);if(A!==null)return A}}if(this.possibleCenters.length!==0)return this.possibleCenters[0];throw new rr},t.centerFromEnd=function(e,r){return r-e[2]-e[1]/2},t.prototype.foundPatternCross=function(e){for(var r=this.moduleSize,n=r/2,a=0;a<3;a++)if(Math.abs(r-e[a])>=n)return!1;return!0},t.prototype.crossCheckVertical=function(e,r,n,a){var s=this.image,o=s.getHeight(),l=this.crossCheckStateCount;l[0]=0,l[1]=0,l[2]=0;for(var c=e;c>=0&&s.get(r,c)&&l[1]<=n;)l[1]++,c--;if(c<0||l[1]>n)return NaN;for(;c>=0&&!s.get(r,c)&&l[0]<=n;)l[0]++,c--;if(l[0]>n)return NaN;for(c=e+1;c<o&&s.get(r,c)&&l[1]<=n;)l[1]++,c++;if(c===o||l[1]>n)return NaN;for(;c<o&&!s.get(r,c)&&l[2]<=n;)l[2]++,c++;if(l[2]>n)return NaN;var u=l[0]+l[1]+l[2];return 5*Math.abs(u-a)>=2*a?NaN:this.foundPatternCross(l)?t.centerFromEnd(l,c):NaN},t.prototype.handlePossibleCenter=function(e,r,n){var a,s,o=e[0]+e[1]+e[2],l=t.centerFromEnd(e,n),c=this.crossCheckVertical(r,l,2*e[1],o);if(!isNaN(c)){var u=(e[0]+e[1]+e[2])/3;try{for(var d=v7e(this.possibleCenters),f=d.next();!f.done;f=d.next()){var A=f.value;if(A.aboutEquals(u,c,l))return A.combineEstimate(c,l,u)}}catch(m){a={error:m}}finally{try{f&&!f.done&&(s=d.return)&&s.call(d)}finally{if(a)throw a.error}}var h=new x7e(l,c,u);this.possibleCenters.push(h),this.resultPointCallback!==null&&this.resultPointCallback!==void 0&&this.resultPointCallback.foundPossibleResultPoint(h)}return null},t}(),b7e=function(){var t=function(e,r){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,a){n.__proto__=a}||function(n,a){for(var s in a)a.hasOwnProperty(s)&&(n[s]=a[s])},t(e,r)};return function(e,r){t(e,r);function n(){this.constructor=e}e.prototype=r===null?Object.create(r):(n.prototype=r.prototype,new n)}}(),w7e=function(t){b7e(e,t);function e(r,n,a,s){var o=t.call(this,r,n)||this;return o.estimatedModuleSize=a,o.count=s,s===void 0&&(o.count=1),o}return e.prototype.getEstimatedModuleSize=function(){return this.estimatedModuleSize},e.prototype.getCount=function(){return this.count},e.prototype.aboutEquals=function(r,n,a){if(Math.abs(n-this.getY())<=r&&Math.abs(a-this.getX())<=r){var s=Math.abs(r-this.estimatedModuleSize);return s<=1||s<=this.estimatedModuleSize}return!1},e.prototype.combineEstimate=function(r,n,a){var s=this.count+1,o=(this.count*this.getX()+n)/s,l=(this.count*this.getY()+r)/s,c=(this.count*this.estimatedModuleSize+a)/s;return new e(o,l,c,s)},e}(fn),N7e=function(){function t(e){this.bottomLeft=e[0],this.topLeft=e[1],this.topRight=e[2]}return t.prototype.getBottomLeft=function(){return this.bottomLeft},t.prototype.getTopLeft=function(){return this.topLeft},t.prototype.getTopRight=function(){return this.topRight},t}(),vy=function(t){var e=typeof Symbol=="function"&&Symbol.iterator,r=e&&t[e],n=0;if(r)return r.call(t);if(t&&typeof t.length=="number")return{next:function(){return t&&n>=t.length&&(t=void 0),{value:t&&t[n++],done:!t}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")},C7e=function(){function t(e,r){this.image=e,this.resultPointCallback=r,this.possibleCenters=[],this.crossCheckStateCount=new Int32Array(5),this.resultPointCallback=r}return t.prototype.getImage=function(){return this.image},t.prototype.getPossibleCenters=function(){return this.possibleCenters},t.prototype.find=function(e){var r=e!=null&&e.get(Ns.TRY_HARDER)!==void 0,n=e!=null&&e.get(Ns.PURE_BARCODE)!==void 0,a=this.image,s=a.getHeight(),o=a.getWidth(),l=Math.floor(3*s/(4*t.MAX_MODULES));(l<t.MIN_SKIP||r)&&(l=t.MIN_SKIP);for(var c=!1,u=new Int32Array(5),d=l-1;d<s&&!c;d+=l){u[0]=0,u[1]=0,u[2]=0,u[3]=0,u[4]=0;for(var f=0,A=0;A<o;A++)if(a.get(A,d))(f&1)===1&&f++,u[f]++;else if(f&1)u[f]++;else if(f===4)if(t.foundPatternCross(u)){var h=this.handlePossibleCenter(u,d,A,n);if(h===!0)if(l=2,this.hasSkipped===!0)c=this.haveMultiplyConfirmedCenters();else{var m=this.findRowSkip();m>u[2]&&(d+=m-u[2]-l,A=o-1)}else{u[0]=u[2],u[1]=u[3],u[2]=u[4],u[3]=1,u[4]=0,f=3;continue}f=0,u[0]=0,u[1]=0,u[2]=0,u[3]=0,u[4]=0}else u[0]=u[2],u[1]=u[3],u[2]=u[4],u[3]=1,u[4]=0,f=3;else u[++f]++;if(t.foundPatternCross(u)){var h=this.handlePossibleCenter(u,d,o,n);h===!0&&(l=u[0],this.hasSkipped&&(c=this.haveMultiplyConfirmedCenters()))}}var p=this.selectBestPatterns();return fn.orderBestPatterns(p),new N7e(p)},t.centerFromEnd=function(e,r){return r-e[4]-e[3]-e[2]/2},t.foundPatternCross=function(e){for(var r=0,n=0;n<5;n++){var a=e[n];if(a===0)return!1;r+=a}if(r<7)return!1;var s=r/7,o=s/2;return Math.abs(s-e[0])<o&&Math.abs(s-e[1])<o&&Math.abs(3*s-e[2])<3*o&&Math.abs(s-e[3])<o&&Math.abs(s-e[4])<o},t.prototype.getCrossCheckStateCount=function(){var e=this.crossCheckStateCount;return e[0]=0,e[1]=0,e[2]=0,e[3]=0,e[4]=0,e},t.prototype.crossCheckDiagonal=function(e,r,n,a){for(var s=this.getCrossCheckStateCount(),o=0,l=this.image;e>=o&&r>=o&&l.get(r-o,e-o);)s[2]++,o++;if(e<o||r<o)return!1;for(;e>=o&&r>=o&&!l.get(r-o,e-o)&&s[1]<=n;)s[1]++,o++;if(e<o||r<o||s[1]>n)return!1;for(;e>=o&&r>=o&&l.get(r-o,e-o)&&s[0]<=n;)s[0]++,o++;if(s[0]>n)return!1;var c=l.getHeight(),u=l.getWidth();for(o=1;e+o<c&&r+o<u&&l.get(r+o,e+o);)s[2]++,o++;if(e+o>=c||r+o>=u)return!1;for(;e+o<c&&r+o<u&&!l.get(r+o,e+o)&&s[3]<n;)s[3]++,o++;if(e+o>=c||r+o>=u||s[3]>=n)return!1;for(;e+o<c&&r+o<u&&l.get(r+o,e+o)&&s[4]<n;)s[4]++,o++;if(s[4]>=n)return!1;var d=s[0]+s[1]+s[2]+s[3]+s[4];return Math.abs(d-a)<2*a&&t.foundPatternCross(s)},t.prototype.crossCheckVertical=function(e,r,n,a){for(var s=this.image,o=s.getHeight(),l=this.getCrossCheckStateCount(),c=e;c>=0&&s.get(r,c);)l[2]++,c--;if(c<0)return NaN;for(;c>=0&&!s.get(r,c)&&l[1]<=n;)l[1]++,c--;if(c<0||l[1]>n)return NaN;for(;c>=0&&s.get(r,c)&&l[0]<=n;)l[0]++,c--;if(l[0]>n)return NaN;for(c=e+1;c<o&&s.get(r,c);)l[2]++,c++;if(c===o)return NaN;for(;c<o&&!s.get(r,c)&&l[3]<n;)l[3]++,c++;if(c===o||l[3]>=n)return NaN;for(;c<o&&s.get(r,c)&&l[4]<n;)l[4]++,c++;if(l[4]>=n)return NaN;var u=l[0]+l[1]+l[2]+l[3]+l[4];return 5*Math.abs(u-a)>=2*a?NaN:t.foundPatternCross(l)?t.centerFromEnd(l,c):NaN},t.prototype.crossCheckHorizontal=function(e,r,n,a){for(var s=this.image,o=s.getWidth(),l=this.getCrossCheckStateCount(),c=e;c>=0&&s.get(c,r);)l[2]++,c--;if(c<0)return NaN;for(;c>=0&&!s.get(c,r)&&l[1]<=n;)l[1]++,c--;if(c<0||l[1]>n)return NaN;for(;c>=0&&s.get(c,r)&&l[0]<=n;)l[0]++,c--;if(l[0]>n)return NaN;for(c=e+1;c<o&&s.get(c,r);)l[2]++,c++;if(c===o)return NaN;for(;c<o&&!s.get(c,r)&&l[3]<n;)l[3]++,c++;if(c===o||l[3]>=n)return NaN;for(;c<o&&s.get(c,r)&&l[4]<n;)l[4]++,c++;if(l[4]>=n)return NaN;var u=l[0]+l[1]+l[2]+l[3]+l[4];return 5*Math.abs(u-a)>=a?NaN:t.foundPatternCross(l)?t.centerFromEnd(l,c):NaN},t.prototype.handlePossibleCenter=function(e,r,n,a){var s=e[0]+e[1]+e[2]+e[3]+e[4],o=t.centerFromEnd(e,n),l=this.crossCheckVertical(r,Math.floor(o),e[2],s);if(!isNaN(l)&&(o=this.crossCheckHorizontal(Math.floor(o),Math.floor(l),e[2],s),!isNaN(o)&&(!a||this.crossCheckDiagonal(Math.floor(l),Math.floor(o),e[2],s)))){for(var c=s/7,u=!1,d=this.possibleCenters,f=0,A=d.length;f<A;f++){var h=d[f];if(h.aboutEquals(c,l,o)){d[f]=h.combineEstimate(l,o,c),u=!0;break}}if(!u){var m=new w7e(o,l,c);d.push(m),this.resultPointCallback!==null&&this.resultPointCallback!==void 0&&this.resultPointCallback.foundPossibleResultPoint(m)}return!0}return!1},t.prototype.findRowSkip=function(){var e,r,n=this.possibleCenters.length;if(n<=1)return 0;var a=null;try{for(var s=vy(this.possibleCenters),o=s.next();!o.done;o=s.next()){var l=o.value;if(l.getCount()>=t.CENTER_QUORUM)if(a==null)a=l;else return this.hasSkipped=!0,Math.floor((Math.abs(a.getX()-l.getX())-Math.abs(a.getY()-l.getY()))/2)}}catch(c){e={error:c}}finally{try{o&&!o.done&&(r=s.return)&&r.call(s)}finally{if(e)throw e.error}}return 0},t.prototype.haveMultiplyConfirmedCenters=function(){var e,r,n,a,s=0,o=0,l=this.possibleCenters.length;try{for(var c=vy(this.possibleCenters),u=c.next();!u.done;u=c.next()){var d=u.value;d.getCount()>=t.CENTER_QUORUM&&(s++,o+=d.getEstimatedModuleSize())}}catch(p){e={error:p}}finally{try{u&&!u.done&&(r=c.return)&&r.call(c)}finally{if(e)throw e.error}}if(s<3)return!1;var f=o/l,A=0;try{for(var h=vy(this.possibleCenters),m=h.next();!m.done;m=h.next()){var d=m.value;A+=Math.abs(d.getEstimatedModuleSize()-f)}}catch(p){n={error:p}}finally{try{m&&!m.done&&(a=h.return)&&a.call(h)}finally{if(n)throw n.error}}return A<=.05*o},t.prototype.selectBestPatterns=function(){var e,r,n,a,s=this.possibleCenters.length;if(s<3)throw new rr;var o=this.possibleCenters,l;if(s>3){var c=0,u=0;try{for(var d=vy(this.possibleCenters),f=d.next();!f.done;f=d.next()){var A=f.value,h=A.getEstimatedModuleSize();c+=h,u+=h*h}}catch(j){e={error:j}}finally{try{f&&!f.done&&(r=d.return)&&r.call(d)}finally{if(e)throw e.error}}l=c/s;var m=Math.sqrt(u/s-l*l);o.sort(function(j,I){var _=Math.abs(I.getEstimatedModuleSize()-l),S=Math.abs(j.getEstimatedModuleSize()-l);return _<S?-1:_>S?1:0});for(var p=Math.max(.2*l,m),x=0;x<o.length&&o.length>3;x++){var v=o[x];Math.abs(v.getEstimatedModuleSize()-l)>p&&(o.splice(x,1),x--)}}if(o.length>3){var c=0;try{for(var y=vy(o),b=y.next();!b.done;b=y.next()){var w=b.value;c+=w.getEstimatedModuleSize()}}catch(I){n={error:I}}finally{try{b&&!b.done&&(a=y.return)&&a.call(y)}finally{if(n)throw n.error}}l=c/o.length,o.sort(function(I,_){if(_.getCount()===I.getCount()){var S=Math.abs(_.getEstimatedModuleSize()-l),E=Math.abs(I.getEstimatedModuleSize()-l);return S<E?1:S>E?-1:0}else return _.getCount()-I.getCount()}),o.splice(3)}return[o[0],o[1],o[2]]},t.CENTER_QUORUM=2,t.MIN_SKIP=3,t.MAX_MODULES=57,t}(),_7e=function(){function t(e){this.image=e}return t.prototype.getImage=function(){return this.image},t.prototype.getResultPointCallback=function(){return this.resultPointCallback},t.prototype.detect=function(e){this.resultPointCallback=e==null?null:e.get(Ns.NEED_RESULT_POINT_CALLBACK);var r=new C7e(this.image,this.resultPointCallback),n=r.find(e);return this.processFinderPatternInfo(n)},t.prototype.processFinderPatternInfo=function(e){var r=e.getTopLeft(),n=e.getTopRight(),a=e.getBottomLeft(),s=this.calculateModuleSize(r,n,a);if(s<1)throw new rr("No pattern found in proccess finder.");var o=t.computeDimension(r,n,a,s),l=Hp.getProvisionalVersionForDimension(o),c=l.getDimensionForVersion()-7,u=null;if(l.getAlignmentPatternCenters().length>0)for(var d=n.getX()-r.getX()+a.getX(),f=n.getY()-r.getY()+a.getY(),A=1-3/c,h=Math.floor(r.getX()+A*(d-r.getX())),m=Math.floor(r.getY()+A*(f-r.getY())),p=4;p<=16;p<<=1)try{u=this.findAlignmentInRegion(s,h,m,p);break}catch(b){if(!(b instanceof rr))throw b}var x=t.createTransform(r,n,a,u,o),v=t.sampleGrid(this.image,x,o),y;return u===null?y=[a,r,n]:y=[a,r,n,u],new OR(v,y)},t.createTransform=function(e,r,n,a,s){var o=s-3.5,l,c,u,d;return a!==null?(l=a.getX(),c=a.getY(),u=o-3,d=u):(l=r.getX()-e.getX()+n.getX(),c=r.getY()-e.getY()+n.getY(),u=o,d=o),vse.quadrilateralToQuadrilateral(3.5,3.5,o,3.5,u,d,3.5,o,e.getX(),e.getY(),r.getX(),r.getY(),l,c,n.getX(),n.getY())},t.sampleGrid=function(e,r,n){var a=DR.getInstance();return a.sampleGridWithTransform(e,n,n,r)},t.computeDimension=function(e,r,n,a){var s=ja.round(fn.distance(e,r)/a),o=ja.round(fn.distance(e,n)/a),l=Math.floor((s+o)/2)+7;switch(l&3){case 0:l++;break;case 2:l--;break;case 3:throw new rr("Dimensions could be not found.")}return l},t.prototype.calculateModuleSize=function(e,r,n){return(this.calculateModuleSizeOneWay(e,r)+this.calculateModuleSizeOneWay(e,n))/2},t.prototype.calculateModuleSizeOneWay=function(e,r){var n=this.sizeOfBlackWhiteBlackRunBothWays(Math.floor(e.getX()),Math.floor(e.getY()),Math.floor(r.getX()),Math.floor(r.getY())),a=this.sizeOfBlackWhiteBlackRunBothWays(Math.floor(r.getX()),Math.floor(r.getY()),Math.floor(e.getX()),Math.floor(e.getY()));return isNaN(n)?a/7:isNaN(a)?n/7:(n+a)/14},t.prototype.sizeOfBlackWhiteBlackRunBothWays=function(e,r,n,a){var s=this.sizeOfBlackWhiteBlackRun(e,r,n,a),o=1,l=e-(n-e);l<0?(o=e/(e-l),l=0):l>=this.image.getWidth()&&(o=(this.image.getWidth()-1-e)/(l-e),l=this.image.getWidth()-1);var c=Math.floor(r-(a-r)*o);return o=1,c<0?(o=r/(r-c),c=0):c>=this.image.getHeight()&&(o=(this.image.getHeight()-1-r)/(c-r),c=this.image.getHeight()-1),l=Math.floor(e+(l-e)*o),s+=this.sizeOfBlackWhiteBlackRun(e,r,l,c),s-1},t.prototype.sizeOfBlackWhiteBlackRun=function(e,r,n,a){var s=Math.abs(a-r)>Math.abs(n-e);if(s){var o=e;e=r,r=o,o=n,n=a,a=o}for(var l=Math.abs(n-e),c=Math.abs(a-r),u=-l/2,d=e<n?1:-1,f=r<a?1:-1,A=0,h=n+d,m=e,p=r;m!==h;m+=d){var x=s?p:m,v=s?m:p;if(A===1===this.image.get(x,v)){if(A===2)return ja.distance(m,p,e,r);A++}if(u+=c,u>0){if(p===a)break;p+=f,u-=l}}return A===2?ja.distance(n+d,a,e,r):NaN},t.prototype.findAlignmentInRegion=function(e,r,n,a){var s=Math.floor(a*e),o=Math.max(0,r-s),l=Math.min(this.image.getWidth()-1,r+s);if(l-o<e*3)throw new rr("Alignment top exceeds estimated module size.");var c=Math.max(0,n-s),u=Math.min(this.image.getHeight()-1,n+s);if(u-c<e*3)throw new rr("Alignment bottom exceeds estimated module size.");var d=new y7e(this.image,o,c,l-o,u-c,e,this.resultPointCallback);return d.find()},t}(),rI=function(){function t(){this.decoder=new p7e}return t.prototype.getDecoder=function(){return this.decoder},t.prototype.decode=function(e,r){var n,a;if(r!=null&&r.get(Ns.PURE_BARCODE)!==void 0){var s=t.extractPureBits(e.getBlackMatrix());n=this.decoder.decodeBitMatrix(s,r),a=t.NO_POINTS}else{var o=new _7e(e.getBlackMatrix()).detect(r);n=this.decoder.decodeBitMatrix(o.getBits(),r),a=o.getPoints()}n.getOther()instanceof _se&&n.getOther().applyMirroredCorrection(a);var l=new cc(n.getText(),n.getRawBytes(),void 0,a,jn.QR_CODE,void 0),c=n.getByteSegments();c!==null&&l.putMetadata(Il.BYTE_SEGMENTS,c);var u=n.getECLevel();return u!==null&&l.putMetadata(Il.ERROR_CORRECTION_LEVEL,u),n.hasStructuredAppend()&&(l.putMetadata(Il.STRUCTURED_APPEND_SEQUENCE,n.getStructuredAppendSequenceNumber()),l.putMetadata(Il.STRUCTURED_APPEND_PARITY,n.getStructuredAppendParity())),l},t.prototype.reset=function(){},t.extractPureBits=function(e){var r=e.getTopLeftOnBit(),n=e.getBottomRightOnBit();if(r===null||n===null)throw new rr;var a=this.moduleSize(r,e),s=r[1],o=n[1],l=r[0],c=n[0];if(l>=c||s>=o)throw new rr;if(o-s!==c-l&&(c=l+(o-s),c>=e.getWidth()))throw new rr;var u=Math.round((c-l+1)/a),d=Math.round((o-s+1)/a);if(u<=0||d<=0)throw new rr;if(d!==u)throw new rr;var f=Math.floor(a/2);s+=f,l+=f;var A=l+Math.floor((u-1)*a)-c;if(A>0){if(A>f)throw new rr;l-=A}var h=s+Math.floor((d-1)*a)-o;if(h>0){if(h>f)throw new rr;s-=h}for(var m=new oh(u,d),p=0;p<d;p++)for(var x=s+Math.floor(p*a),v=0;v<u;v++)e.get(l+Math.floor(v*a),x)&&m.set(v,p);return m},t.moduleSize=function(e,r){for(var n=r.getHeight(),a=r.getWidth(),s=e[0],o=e[1],l=!0,c=0;s<a&&o<n;){if(l!==r.get(s,o)){if(++c===5)break;l=!l}s++,o++}if(s===a||o===n)throw new rr;return(s-e[0])/7},t.NO_POINTS=new Array,t}(),E7e=function(t){var e=typeof Symbol=="function"&&Symbol.iterator,r=e&&t[e],n=0;if(r)return r.call(t);if(t&&typeof t.length=="number")return{next:function(){return t&&n>=t.length&&(t=void 0),{value:t&&t[n++],done:!t}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")},Na=function(){function t(){}return t.prototype.PDF417Common=function(){},t.getBitCountSum=function(e){return ja.sum(e)},t.toIntArray=function(e){var r,n;if(e==null||!e.length)return t.EMPTY_INT_ARRAY;var a=new Int32Array(e.length),s=0;try{for(var o=E7e(e),l=o.next();!l.done;l=o.next()){var c=l.value;a[s++]=c}}catch(u){r={error:u}}finally{try{l&&!l.done&&(n=o.return)&&n.call(o)}finally{if(r)throw r.error}}return a},t.getCodeword=function(e){var r=Io.binarySearch(t.SYMBOL_TABLE,e&262143);return r<0?-1:(t.CODEWORD_TABLE[r]-1)%t.NUMBER_OF_CODEWORDS},t.NUMBER_OF_CODEWORDS=929,t.MAX_CODEWORDS_IN_BARCODE=t.NUMBER_OF_CODEWORDS-1,t.MIN_ROWS_IN_BARCODE=3,t.MAX_ROWS_IN_BARCODE=90,t.MODULES_IN_CODEWORD=17,t.MODULES_IN_STOP_PATTERN=18,t.BARS_IN_MODULE=8,t.EMPTY_INT_ARRAY=new Int32Array([]),t.SYMBOL_TABLE=Int32Array.from([66142,66170,66206,66236,66290,66292,66350,66382,66396,66454,66470,66476,66594,66600,66614,66626,66628,66632,66640,66654,66662,66668,66682,66690,66718,66720,66748,66758,66776,66798,66802,66804,66820,66824,66832,66846,66848,66876,66880,66936,66950,66956,66968,66992,67006,67022,67036,67042,67044,67048,67062,67118,67150,67164,67214,67228,67256,67294,67322,67350,67366,67372,67398,67404,67416,67438,67474,67476,67490,67492,67496,67510,67618,67624,67650,67656,67664,67678,67686,67692,67706,67714,67716,67728,67742,67744,67772,67782,67788,67800,67822,67826,67828,67842,67848,67870,67872,67900,67904,67960,67974,67992,68016,68030,68046,68060,68066,68068,68072,68086,68104,68112,68126,68128,68156,68160,68216,68336,68358,68364,68376,68400,68414,68448,68476,68494,68508,68536,68546,68548,68552,68560,68574,68582,68588,68654,68686,68700,68706,68708,68712,68726,68750,68764,68792,68802,68804,68808,68816,68830,68838,68844,68858,68878,68892,68920,68976,68990,68994,68996,69e3,69008,69022,69024,69052,69062,69068,69080,69102,69106,69108,69142,69158,69164,69190,69208,69230,69254,69260,69272,69296,69310,69326,69340,69386,69394,69396,69410,69416,69430,69442,69444,69448,69456,69470,69478,69484,69554,69556,69666,69672,69698,69704,69712,69726,69754,69762,69764,69776,69790,69792,69820,69830,69836,69848,69870,69874,69876,69890,69918,69920,69948,69952,70008,70022,70040,70064,70078,70094,70108,70114,70116,70120,70134,70152,70174,70176,70264,70384,70412,70448,70462,70496,70524,70542,70556,70584,70594,70600,70608,70622,70630,70636,70664,70672,70686,70688,70716,70720,70776,70896,71136,71180,71192,71216,71230,71264,71292,71360,71416,71452,71480,71536,71550,71554,71556,71560,71568,71582,71584,71612,71622,71628,71640,71662,71726,71732,71758,71772,71778,71780,71784,71798,71822,71836,71864,71874,71880,71888,71902,71910,71916,71930,71950,71964,71992,72048,72062,72066,72068,72080,72094,72096,72124,72134,72140,72152,72174,72178,72180,72206,72220,72248,72304,72318,72416,72444,72456,72464,72478,72480,72508,72512,72568,72588,72600,72624,72638,72654,72668,72674,72676,72680,72694,72726,72742,72748,72774,72780,72792,72814,72838,72856,72880,72894,72910,72924,72930,72932,72936,72950,72966,72972,72984,73008,73022,73056,73084,73102,73116,73144,73156,73160,73168,73182,73190,73196,73210,73226,73234,73236,73250,73252,73256,73270,73282,73284,73296,73310,73318,73324,73346,73348,73352,73360,73374,73376,73404,73414,73420,73432,73454,73498,73518,73522,73524,73550,73564,73570,73572,73576,73590,73800,73822,73858,73860,73872,73886,73888,73916,73944,73970,73972,73992,74014,74016,74044,74048,74104,74118,74136,74160,74174,74210,74212,74216,74230,74244,74256,74270,74272,74360,74480,74502,74508,74544,74558,74592,74620,74638,74652,74680,74690,74696,74704,74726,74732,74782,74784,74812,74992,75232,75288,75326,75360,75388,75456,75512,75576,75632,75646,75650,75652,75664,75678,75680,75708,75718,75724,75736,75758,75808,75836,75840,75896,76016,76256,76736,76824,76848,76862,76896,76924,76992,77048,77296,77340,77368,77424,77438,77536,77564,77572,77576,77584,77600,77628,77632,77688,77702,77708,77720,77744,77758,77774,77788,77870,77902,77916,77922,77928,77966,77980,78008,78018,78024,78032,78046,78060,78074,78094,78136,78192,78206,78210,78212,78224,78238,78240,78268,78278,78284,78296,78322,78324,78350,78364,78448,78462,78560,78588,78600,78622,78624,78652,78656,78712,78726,78744,78768,78782,78798,78812,78818,78820,78824,78838,78862,78876,78904,78960,78974,79072,79100,79296,79352,79368,79376,79390,79392,79420,79424,79480,79600,79628,79640,79664,79678,79712,79740,79772,79800,79810,79812,79816,79824,79838,79846,79852,79894,79910,79916,79942,79948,79960,79982,79988,80006,80024,80048,80062,80078,80092,80098,80100,80104,80134,80140,80176,80190,80224,80252,80270,80284,80312,80328,80336,80350,80358,80364,80378,80390,80396,80408,80432,80446,80480,80508,80576,80632,80654,80668,80696,80752,80766,80776,80784,80798,80800,80828,80844,80856,80878,80882,80884,80914,80916,80930,80932,80936,80950,80962,80968,80976,80990,80998,81004,81026,81028,81040,81054,81056,81084,81094,81100,81112,81134,81154,81156,81160,81168,81182,81184,81212,81216,81272,81286,81292,81304,81328,81342,81358,81372,81380,81384,81398,81434,81454,81458,81460,81486,81500,81506,81508,81512,81526,81550,81564,81592,81602,81604,81608,81616,81630,81638,81644,81702,81708,81722,81734,81740,81752,81774,81778,81780,82050,82078,82080,82108,82180,82184,82192,82206,82208,82236,82240,82296,82316,82328,82352,82366,82402,82404,82408,82440,82448,82462,82464,82492,82496,82552,82672,82694,82700,82712,82736,82750,82784,82812,82830,82882,82884,82888,82896,82918,82924,82952,82960,82974,82976,83004,83008,83064,83184,83424,83468,83480,83504,83518,83552,83580,83648,83704,83740,83768,83824,83838,83842,83844,83848,83856,83872,83900,83910,83916,83928,83950,83984,84e3,84028,84032,84088,84208,84448,84928,85040,85054,85088,85116,85184,85240,85488,85560,85616,85630,85728,85756,85764,85768,85776,85790,85792,85820,85824,85880,85894,85900,85912,85936,85966,85980,86048,86080,86136,86256,86496,86976,88160,88188,88256,88312,88560,89056,89200,89214,89312,89340,89536,89592,89608,89616,89632,89664,89720,89840,89868,89880,89904,89952,89980,89998,90012,90040,90190,90204,90254,90268,90296,90306,90308,90312,90334,90382,90396,90424,90480,90494,90500,90504,90512,90526,90528,90556,90566,90572,90584,90610,90612,90638,90652,90680,90736,90750,90848,90876,90884,90888,90896,90910,90912,90940,90944,91e3,91014,91020,91032,91056,91070,91086,91100,91106,91108,91112,91126,91150,91164,91192,91248,91262,91360,91388,91584,91640,91664,91678,91680,91708,91712,91768,91888,91928,91952,91966,92e3,92028,92046,92060,92088,92098,92100,92104,92112,92126,92134,92140,92188,92216,92272,92384,92412,92608,92664,93168,93200,93214,93216,93244,93248,93304,93424,93664,93720,93744,93758,93792,93820,93888,93944,93980,94008,94064,94078,94084,94088,94096,94110,94112,94140,94150,94156,94168,94246,94252,94278,94284,94296,94318,94342,94348,94360,94384,94398,94414,94428,94440,94470,94476,94488,94512,94526,94560,94588,94606,94620,94648,94658,94660,94664,94672,94686,94694,94700,94714,94726,94732,94744,94768,94782,94816,94844,94912,94968,94990,95004,95032,95088,95102,95112,95120,95134,95136,95164,95180,95192,95214,95218,95220,95244,95256,95280,95294,95328,95356,95424,95480,95728,95758,95772,95800,95856,95870,95968,95996,96008,96016,96030,96032,96060,96064,96120,96152,96176,96190,96220,96226,96228,96232,96290,96292,96296,96310,96322,96324,96328,96336,96350,96358,96364,96386,96388,96392,96400,96414,96416,96444,96454,96460,96472,96494,96498,96500,96514,96516,96520,96528,96542,96544,96572,96576,96632,96646,96652,96664,96688,96702,96718,96732,96738,96740,96744,96758,96772,96776,96784,96798,96800,96828,96832,96888,97008,97030,97036,97048,97072,97086,97120,97148,97166,97180,97208,97220,97224,97232,97246,97254,97260,97326,97330,97332,97358,97372,97378,97380,97384,97398,97422,97436,97464,97474,97476,97480,97488,97502,97510,97516,97550,97564,97592,97648,97666,97668,97672,97680,97694,97696,97724,97734,97740,97752,97774,97830,97836,97850,97862,97868,97880,97902,97906,97908,97926,97932,97944,97968,97998,98012,98018,98020,98024,98038,98618,98674,98676,98838,98854,98874,98892,98904,98926,98930,98932,98968,99006,99042,99044,99048,99062,99166,99194,99246,99286,99350,99366,99372,99386,99398,99416,99438,99442,99444,99462,99504,99518,99534,99548,99554,99556,99560,99574,99590,99596,99608,99632,99646,99680,99708,99726,99740,99768,99778,99780,99784,99792,99806,99814,99820,99834,99858,99860,99874,99880,99894,99906,99920,99934,99962,99970,99972,99976,99984,99998,1e5,100028,100038,100044,100056,100078,100082,100084,100142,100174,100188,100246,100262,100268,100306,100308,100390,100396,100410,100422,100428,100440,100462,100466,100468,100486,100504,100528,100542,100558,100572,100578,100580,100584,100598,100620,100656,100670,100704,100732,100750,100792,100802,100808,100816,100830,100838,100844,100858,100888,100912,100926,100960,100988,101056,101112,101148,101176,101232,101246,101250,101252,101256,101264,101278,101280,101308,101318,101324,101336,101358,101362,101364,101410,101412,101416,101430,101442,101448,101456,101470,101478,101498,101506,101508,101520,101534,101536,101564,101580,101618,101620,101636,101640,101648,101662,101664,101692,101696,101752,101766,101784,101838,101858,101860,101864,101934,101938,101940,101966,101980,101986,101988,101992,102030,102044,102072,102082,102084,102088,102096,102138,102166,102182,102188,102214,102220,102232,102254,102282,102290,102292,102306,102308,102312,102326,102444,102458,102470,102476,102488,102514,102516,102534,102552,102576,102590,102606,102620,102626,102632,102646,102662,102668,102704,102718,102752,102780,102798,102812,102840,102850,102856,102864,102878,102886,102892,102906,102936,102974,103008,103036,103104,103160,103224,103280,103294,103298,103300,103312,103326,103328,103356,103366,103372,103384,103406,103410,103412,103472,103486,103520,103548,103616,103672,103920,103992,104048,104062,104160,104188,104194,104196,104200,104208,104224,104252,104256,104312,104326,104332,104344,104368,104382,104398,104412,104418,104420,104424,104482,104484,104514,104520,104528,104542,104550,104570,104578,104580,104592,104606,104608,104636,104652,104690,104692,104706,104712,104734,104736,104764,104768,104824,104838,104856,104910,104930,104932,104936,104968,104976,104990,104992,105020,105024,105080,105200,105240,105278,105312,105372,105410,105412,105416,105424,105446,105518,105524,105550,105564,105570,105572,105576,105614,105628,105656,105666,105672,105680,105702,105722,105742,105756,105784,105840,105854,105858,105860,105864,105872,105888,105932,105970,105972,106006,106022,106028,106054,106060,106072,106100,106118,106124,106136,106160,106174,106190,106210,106212,106216,106250,106258,106260,106274,106276,106280,106306,106308,106312,106320,106334,106348,106394,106414,106418,106420,106566,106572,106610,106612,106630,106636,106648,106672,106686,106722,106724,106728,106742,106758,106764,106776,106800,106814,106848,106876,106894,106908,106936,106946,106948,106952,106960,106974,106982,106988,107032,107056,107070,107104,107132,107200,107256,107292,107320,107376,107390,107394,107396,107400,107408,107422,107424,107452,107462,107468,107480,107502,107506,107508,107544,107568,107582,107616,107644,107712,107768,108016,108060,108088,108144,108158,108256,108284,108290,108292,108296,108304,108318,108320,108348,108352,108408,108422,108428,108440,108464,108478,108494,108508,108514,108516,108520,108592,108640,108668,108736,108792,109040,109536,109680,109694,109792,109820,110016,110072,110084,110088,110096,110112,110140,110144,110200,110320,110342,110348,110360,110384,110398,110432,110460,110478,110492,110520,110532,110536,110544,110558,110658,110686,110714,110722,110724,110728,110736,110750,110752,110780,110796,110834,110836,110850,110852,110856,110864,110878,110880,110908,110912,110968,110982,111e3,111054,111074,111076,111080,111108,111112,111120,111134,111136,111164,111168,111224,111344,111372,111422,111456,111516,111554,111556,111560,111568,111590,111632,111646,111648,111676,111680,111736,111856,112096,112152,112224,112252,112320,112440,112514,112516,112520,112528,112542,112544,112588,112686,112718,112732,112782,112796,112824,112834,112836,112840,112848,112870,112890,112910,112924,112952,113008,113022,113026,113028,113032,113040,113054,113056,113100,113138,113140,113166,113180,113208,113264,113278,113376,113404,113416,113424,113440,113468,113472,113560,113614,113634,113636,113640,113686,113702,113708,113734,113740,113752,113778,113780,113798,113804,113816,113840,113854,113870,113890,113892,113896,113926,113932,113944,113968,113982,114016,114044,114076,114114,114116,114120,114128,114150,114170,114194,114196,114210,114212,114216,114242,114244,114248,114256,114270,114278,114306,114308,114312,114320,114334,114336,114364,114380,114420,114458,114478,114482,114484,114510,114524,114530,114532,114536,114842,114866,114868,114970,114994,114996,115042,115044,115048,115062,115130,115226,115250,115252,115278,115292,115298,115300,115304,115318,115342,115394,115396,115400,115408,115422,115430,115436,115450,115478,115494,115514,115526,115532,115570,115572,115738,115758,115762,115764,115790,115804,115810,115812,115816,115830,115854,115868,115896,115906,115912,115920,115934,115942,115948,115962,115996,116024,116080,116094,116098,116100,116104,116112,116126,116128,116156,116166,116172,116184,116206,116210,116212,116246,116262,116268,116282,116294,116300,116312,116334,116338,116340,116358,116364,116376,116400,116414,116430,116444,116450,116452,116456,116498,116500,116514,116520,116534,116546,116548,116552,116560,116574,116582,116588,116602,116654,116694,116714,116762,116782,116786,116788,116814,116828,116834,116836,116840,116854,116878,116892,116920,116930,116936,116944,116958,116966,116972,116986,117006,117048,117104,117118,117122,117124,117136,117150,117152,117180,117190,117196,117208,117230,117234,117236,117304,117360,117374,117472,117500,117506,117508,117512,117520,117536,117564,117568,117624,117638,117644,117656,117680,117694,117710,117724,117730,117732,117736,117750,117782,117798,117804,117818,117830,117848,117874,117876,117894,117936,117950,117966,117986,117988,117992,118022,118028,118040,118064,118078,118112,118140,118172,118210,118212,118216,118224,118238,118246,118266,118306,118312,118338,118352,118366,118374,118394,118402,118404,118408,118416,118430,118432,118460,118476,118514,118516,118574,118578,118580,118606,118620,118626,118628,118632,118678,118694,118700,118730,118738,118740,118830,118834,118836,118862,118876,118882,118884,118888,118902,118926,118940,118968,118978,118980,118984,118992,119006,119014,119020,119034,119068,119096,119152,119166,119170,119172,119176,119184,119198,119200,119228,119238,119244,119256,119278,119282,119284,119324,119352,119408,119422,119520,119548,119554,119556,119560,119568,119582,119584,119612,119616,119672,119686,119692,119704,119728,119742,119758,119772,119778,119780,119784,119798,119920,119934,120032,120060,120256,120312,120324,120328,120336,120352,120384,120440,120560,120582,120588,120600,120624,120638,120672,120700,120718,120732,120760,120770,120772,120776,120784,120798,120806,120812,120870,120876,120890,120902,120908,120920,120946,120948,120966,120972,120984,121008,121022,121038,121058,121060,121064,121078,121100,121112,121136,121150,121184,121212,121244,121282,121284,121288,121296,121318,121338,121356,121368,121392,121406,121440,121468,121536,121592,121656,121730,121732,121736,121744,121758,121760,121804,121842,121844,121890,121922,121924,121928,121936,121950,121958,121978,121986,121988,121992,122e3,122014,122016,122044,122060,122098,122100,122116,122120,122128,122142,122144,122172,122176,122232,122246,122264,122318,122338,122340,122344,122414,122418,122420,122446,122460,122466,122468,122472,122510,122524,122552,122562,122564,122568,122576,122598,122618,122646,122662,122668,122694,122700,122712,122738,122740,122762,122770,122772,122786,122788,122792,123018,123026,123028,123042,123044,123048,123062,123098,123146,123154,123156,123170,123172,123176,123190,123202,123204,123208,123216,123238,123244,123258,123290,123314,123316,123402,123410,123412,123426,123428,123432,123446,123458,123464,123472,123486,123494,123500,123514,123522,123524,123528,123536,123552,123580,123590,123596,123608,123630,123634,123636,123674,123698,123700,123740,123746,123748,123752,123834,123914,123922,123924,123938,123944,123958,123970,123976,123984,123998,124006,124012,124026,124034,124036,124048,124062,124064,124092,124102,124108,124120,124142,124146,124148,124162,124164,124168,124176,124190,124192,124220,124224,124280,124294,124300,124312,124336,124350,124366,124380,124386,124388,124392,124406,124442,124462,124466,124468,124494,124508,124514,124520,124558,124572,124600,124610,124612,124616,124624,124646,124666,124694,124710,124716,124730,124742,124748,124760,124786,124788,124818,124820,124834,124836,124840,124854,124946,124948,124962,124964,124968,124982,124994,124996,125e3,125008,125022,125030,125036,125050,125058,125060,125064,125072,125086,125088,125116,125126,125132,125144,125166,125170,125172,125186,125188,125192,125200,125216,125244,125248,125304,125318,125324,125336,125360,125374,125390,125404,125410,125412,125416,125430,125444,125448,125456,125472,125504,125560,125680,125702,125708,125720,125744,125758,125792,125820,125838,125852,125880,125890,125892,125896,125904,125918,125926,125932,125978,125998,126002,126004,126030,126044,126050,126052,126056,126094,126108,126136,126146,126148,126152,126160,126182,126202,126222,126236,126264,126320,126334,126338,126340,126344,126352,126366,126368,126412,126450,126452,126486,126502,126508,126522,126534,126540,126552,126574,126578,126580,126598,126604,126616,126640,126654,126670,126684,126690,126692,126696,126738,126754,126756,126760,126774,126786,126788,126792,126800,126814,126822,126828,126842,126894,126898,126900,126934,127126,127142,127148,127162,127178,127186,127188,127254,127270,127276,127290,127302,127308,127320,127342,127346,127348,127370,127378,127380,127394,127396,127400,127450,127510,127526,127532,127546,127558,127576,127598,127602,127604,127622,127628,127640,127664,127678,127694,127708,127714,127716,127720,127734,127754,127762,127764,127778,127784,127810,127812,127816,127824,127838,127846,127866,127898,127918,127922,127924,128022,128038,128044,128058,128070,128076,128088,128110,128114,128116,128134,128140,128152,128176,128190,128206,128220,128226,128228,128232,128246,128262,128268,128280,128304,128318,128352,128380,128398,128412,128440,128450,128452,128456,128464,128478,128486,128492,128506,128522,128530,128532,128546,128548,128552,128566,128578,128580,128584,128592,128606,128614,128634,128642,128644,128648,128656,128670,128672,128700,128716,128754,128756,128794,128814,128818,128820,128846,128860,128866,128868,128872,128886,128918,128934,128940,128954,128978,128980,129178,129198,129202,129204,129238,129258,129306,129326,129330,129332,129358,129372,129378,129380,129384,129398,129430,129446,129452,129466,129482,129490,129492,129562,129582,129586,129588,129614,129628,129634,129636,129640,129654,129678,129692,129720,129730,129732,129736,129744,129758,129766,129772,129814,129830,129836,129850,129862,129868,129880,129902,129906,129908,129930,129938,129940,129954,129956,129960,129974,130010]),t.CODEWORD_TABLE=Int32Array.from([2627,1819,2622,2621,1813,1812,2729,2724,2723,2779,2774,2773,902,896,908,868,865,861,859,2511,873,871,1780,835,2493,825,2491,842,837,844,1764,1762,811,810,809,2483,807,2482,806,2480,815,814,813,812,2484,817,816,1745,1744,1742,1746,2655,2637,2635,2626,2625,2623,2628,1820,2752,2739,2737,2728,2727,2725,2730,2785,2783,2778,2777,2775,2780,787,781,747,739,736,2413,754,752,1719,692,689,681,2371,678,2369,700,697,694,703,1688,1686,642,638,2343,631,2341,627,2338,651,646,643,2345,654,652,1652,1650,1647,1654,601,599,2322,596,2321,594,2319,2317,611,610,608,606,2324,603,2323,615,614,612,1617,1616,1614,1612,616,1619,1618,2575,2538,2536,905,901,898,909,2509,2507,2504,870,867,864,860,2512,875,872,1781,2490,2489,2487,2485,1748,836,834,832,830,2494,827,2492,843,841,839,845,1765,1763,2701,2676,2674,2653,2648,2656,2634,2633,2631,2629,1821,2638,2636,2770,2763,2761,2750,2745,2753,2736,2735,2733,2731,1848,2740,2738,2786,2784,591,588,576,569,566,2296,1590,537,534,526,2276,522,2274,545,542,539,548,1572,1570,481,2245,466,2242,462,2239,492,485,482,2249,496,494,1534,1531,1528,1538,413,2196,406,2191,2188,425,419,2202,415,2199,432,430,427,1472,1467,1464,433,1476,1474,368,367,2160,365,2159,362,2157,2155,2152,378,377,375,2166,372,2165,369,2162,383,381,379,2168,1419,1418,1416,1414,385,1411,384,1423,1422,1420,1424,2461,802,2441,2439,790,786,783,794,2409,2406,2403,750,742,738,2414,756,753,1720,2367,2365,2362,2359,1663,693,691,684,2373,680,2370,702,699,696,704,1690,1687,2337,2336,2334,2332,1624,2329,1622,640,637,2344,634,2342,630,2340,650,648,645,2346,655,653,1653,1651,1649,1655,2612,2597,2595,2571,2568,2565,2576,2534,2529,2526,1787,2540,2537,907,904,900,910,2503,2502,2500,2498,1768,2495,1767,2510,2508,2506,869,866,863,2513,876,874,1782,2720,2713,2711,2697,2694,2691,2702,2672,2670,2664,1828,2678,2675,2647,2646,2644,2642,1823,2639,1822,2654,2652,2650,2657,2771,1855,2765,2762,1850,1849,2751,2749,2747,2754,353,2148,344,342,336,2142,332,2140,345,1375,1373,306,2130,299,2128,295,2125,319,314,311,2132,1354,1352,1349,1356,262,257,2101,253,2096,2093,274,273,267,2107,263,2104,280,278,275,1316,1311,1308,1320,1318,2052,202,2050,2044,2040,219,2063,212,2060,208,2055,224,221,2066,1260,1258,1252,231,1248,229,1266,1264,1261,1268,155,1998,153,1996,1994,1991,1988,165,164,2007,162,2006,159,2003,2e3,172,171,169,2012,166,2010,1186,1184,1182,1179,175,1176,173,1192,1191,1189,1187,176,1194,1193,2313,2307,2305,592,589,2294,2292,2289,578,572,568,2297,580,1591,2272,2267,2264,1547,538,536,529,2278,525,2275,547,544,541,1574,1571,2237,2235,2229,1493,2225,1489,478,2247,470,2244,465,2241,493,488,484,2250,498,495,1536,1533,1530,1539,2187,2186,2184,2182,1432,2179,1430,2176,1427,414,412,2197,409,2195,405,2193,2190,426,424,421,2203,418,2201,431,429,1473,1471,1469,1466,434,1477,1475,2478,2472,2470,2459,2457,2454,2462,803,2437,2432,2429,1726,2443,2440,792,789,785,2401,2399,2393,1702,2389,1699,2411,2408,2405,745,741,2415,758,755,1721,2358,2357,2355,2353,1661,2350,1660,2347,1657,2368,2366,2364,2361,1666,690,687,2374,683,2372,701,698,705,1691,1689,2619,2617,2610,2608,2605,2613,2593,2588,2585,1803,2599,2596,2563,2561,2555,1797,2551,1795,2573,2570,2567,2577,2525,2524,2522,2520,1786,2517,1785,2514,1783,2535,2533,2531,2528,1788,2541,2539,906,903,911,2721,1844,2715,2712,1838,1836,2699,2696,2693,2703,1827,1826,1824,2673,2671,2669,2666,1829,2679,2677,1858,1857,2772,1854,1853,1851,1856,2766,2764,143,1987,139,1986,135,133,131,1984,128,1983,125,1981,138,137,136,1985,1133,1132,1130,112,110,1974,107,1973,104,1971,1969,122,121,119,117,1977,114,1976,124,1115,1114,1112,1110,1117,1116,84,83,1953,81,1952,78,1950,1948,1945,94,93,91,1959,88,1958,85,1955,99,97,95,1961,1086,1085,1083,1081,1078,100,1090,1089,1087,1091,49,47,1917,44,1915,1913,1910,1907,59,1926,56,1925,53,1922,1919,66,64,1931,61,1929,1042,1040,1038,71,1035,70,1032,68,1048,1047,1045,1043,1050,1049,12,10,1869,1867,1864,1861,21,1880,19,1877,1874,1871,28,1888,25,1886,22,1883,982,980,977,974,32,30,991,989,987,984,34,995,994,992,2151,2150,2147,2146,2144,356,355,354,2149,2139,2138,2136,2134,1359,343,341,338,2143,335,2141,348,347,346,1376,1374,2124,2123,2121,2119,1326,2116,1324,310,308,305,2131,302,2129,298,2127,320,318,316,313,2133,322,321,1355,1353,1351,1357,2092,2091,2089,2087,1276,2084,1274,2081,1271,259,2102,256,2100,252,2098,2095,272,269,2108,266,2106,281,279,277,1317,1315,1313,1310,282,1321,1319,2039,2037,2035,2032,1203,2029,1200,1197,207,2053,205,2051,201,2049,2046,2043,220,218,2064,215,2062,211,2059,228,226,223,2069,1259,1257,1254,232,1251,230,1267,1265,1263,2316,2315,2312,2311,2309,2314,2304,2303,2301,2299,1593,2308,2306,590,2288,2287,2285,2283,1578,2280,1577,2295,2293,2291,579,577,574,571,2298,582,581,1592,2263,2262,2260,2258,1545,2255,1544,2252,1541,2273,2271,2269,2266,1550,535,532,2279,528,2277,546,543,549,1575,1573,2224,2222,2220,1486,2217,1485,2214,1482,1479,2238,2236,2234,2231,1496,2228,1492,480,477,2248,473,2246,469,2243,490,487,2251,497,1537,1535,1532,2477,2476,2474,2479,2469,2468,2466,2464,1730,2473,2471,2453,2452,2450,2448,1729,2445,1728,2460,2458,2456,2463,805,804,2428,2427,2425,2423,1725,2420,1724,2417,1722,2438,2436,2434,2431,1727,2444,2442,793,791,788,795,2388,2386,2384,1697,2381,1696,2378,1694,1692,2402,2400,2398,2395,1703,2392,1701,2412,2410,2407,751,748,744,2416,759,757,1807,2620,2618,1806,1805,2611,2609,2607,2614,1802,1801,1799,2594,2592,2590,2587,1804,2600,2598,1794,1793,1791,1789,2564,2562,2560,2557,1798,2554,1796,2574,2572,2569,2578,1847,1846,2722,1843,1842,1840,1845,2716,2714,1835,1834,1832,1830,1839,1837,2700,2698,2695,2704,1817,1811,1810,897,862,1777,829,826,838,1760,1758,808,2481,1741,1740,1738,1743,2624,1818,2726,2776,782,740,737,1715,686,679,695,1682,1680,639,628,2339,647,644,1645,1643,1640,1648,602,600,597,595,2320,593,2318,609,607,604,1611,1610,1608,1606,613,1615,1613,2328,926,924,892,886,899,857,850,2505,1778,824,823,821,819,2488,818,2486,833,831,828,840,1761,1759,2649,2632,2630,2746,2734,2732,2782,2781,570,567,1587,531,527,523,540,1566,1564,476,467,463,2240,486,483,1524,1521,1518,1529,411,403,2192,399,2189,423,416,1462,1457,1454,428,1468,1465,2210,366,363,2158,360,2156,357,2153,376,373,370,2163,1410,1409,1407,1405,382,1402,380,1417,1415,1412,1421,2175,2174,777,774,771,784,732,725,722,2404,743,1716,676,674,668,2363,665,2360,685,1684,1681,626,624,622,2335,620,2333,617,2330,641,635,649,1646,1644,1642,2566,928,925,2530,2527,894,891,888,2501,2499,2496,858,856,854,851,1779,2692,2668,2665,2645,2643,2640,2651,2768,2759,2757,2744,2743,2741,2748,352,1382,340,337,333,1371,1369,307,300,296,2126,315,312,1347,1342,1350,261,258,250,2097,246,2094,271,268,264,1306,1301,1298,276,1312,1309,2115,203,2048,195,2045,191,2041,213,209,2056,1246,1244,1238,225,1234,222,1256,1253,1249,1262,2080,2079,154,1997,150,1995,147,1992,1989,163,160,2004,156,2001,1175,1174,1172,1170,1167,170,1164,167,1185,1183,1180,1177,174,1190,1188,2025,2024,2022,587,586,564,559,556,2290,573,1588,520,518,512,2268,508,2265,530,1568,1565,461,457,2233,450,2230,446,2226,479,471,489,1526,1523,1520,397,395,2185,392,2183,389,2180,2177,410,2194,402,422,1463,1461,1459,1456,1470,2455,799,2433,2430,779,776,773,2397,2394,2390,734,728,724,746,1717,2356,2354,2351,2348,1658,677,675,673,670,667,688,1685,1683,2606,2589,2586,2559,2556,2552,927,2523,2521,2518,2515,1784,2532,895,893,890,2718,2709,2707,2689,2687,2684,2663,2662,2660,2658,1825,2667,2769,1852,2760,2758,142,141,1139,1138,134,132,129,126,1982,1129,1128,1126,1131,113,111,108,105,1972,101,1970,120,118,115,1109,1108,1106,1104,123,1113,1111,82,79,1951,75,1949,72,1946,92,89,86,1956,1077,1076,1074,1072,98,1069,96,1084,1082,1079,1088,1968,1967,48,45,1916,42,1914,39,1911,1908,60,57,54,1923,50,1920,1031,1030,1028,1026,67,1023,65,1020,62,1041,1039,1036,1033,69,1046,1044,1944,1943,1941,11,9,1868,7,1865,1862,1859,20,1878,16,1875,13,1872,970,968,966,963,29,960,26,23,983,981,978,975,33,971,31,990,988,985,1906,1904,1902,993,351,2145,1383,331,330,328,326,2137,323,2135,339,1372,1370,294,293,291,289,2122,286,2120,283,2117,309,303,317,1348,1346,1344,245,244,242,2090,239,2088,236,2085,2082,260,2099,249,270,1307,1305,1303,1300,1314,189,2038,186,2036,183,2033,2030,2026,206,198,2047,194,216,1247,1245,1243,1240,227,1237,1255,2310,2302,2300,2286,2284,2281,565,563,561,558,575,1589,2261,2259,2256,2253,1542,521,519,517,514,2270,511,533,1569,1567,2223,2221,2218,2215,1483,2211,1480,459,456,453,2232,449,474,491,1527,1525,1522,2475,2467,2465,2451,2449,2446,801,800,2426,2424,2421,2418,1723,2435,780,778,775,2387,2385,2382,2379,1695,2375,1693,2396,735,733,730,727,749,1718,2616,2615,2604,2603,2601,2584,2583,2581,2579,1800,2591,2550,2549,2547,2545,1792,2542,1790,2558,929,2719,1841,2710,2708,1833,1831,2690,2688,2686,1815,1809,1808,1774,1756,1754,1737,1736,1734,1739,1816,1711,1676,1674,633,629,1638,1636,1633,1641,598,1605,1604,1602,1600,605,1609,1607,2327,887,853,1775,822,820,1757,1755,1584,524,1560,1558,468,464,1514,1511,1508,1519,408,404,400,1452,1447,1444,417,1458,1455,2208,364,361,358,2154,1401,1400,1398,1396,374,1393,371,1408,1406,1403,1413,2173,2172,772,726,723,1712,672,669,666,682,1678,1675,625,623,621,618,2331,636,632,1639,1637,1635,920,918,884,880,889,849,848,847,846,2497,855,852,1776,2641,2742,2787,1380,334,1367,1365,301,297,1340,1338,1335,1343,255,251,247,1296,1291,1288,265,1302,1299,2113,204,196,192,2042,1232,1230,1224,214,1220,210,1242,1239,1235,1250,2077,2075,151,148,1993,144,1990,1163,1162,1160,1158,1155,161,1152,157,1173,1171,1168,1165,168,1181,1178,2021,2020,2018,2023,585,560,557,1585,516,509,1562,1559,458,447,2227,472,1516,1513,1510,398,396,393,390,2181,386,2178,407,1453,1451,1449,1446,420,1460,2209,769,764,720,712,2391,729,1713,664,663,661,659,2352,656,2349,671,1679,1677,2553,922,919,2519,2516,885,883,881,2685,2661,2659,2767,2756,2755,140,1137,1136,130,127,1125,1124,1122,1127,109,106,102,1103,1102,1100,1098,116,1107,1105,1980,80,76,73,1947,1068,1067,1065,1063,90,1060,87,1075,1073,1070,1080,1966,1965,46,43,40,1912,36,1909,1019,1018,1016,1014,58,1011,55,1008,51,1029,1027,1024,1021,63,1037,1034,1940,1939,1937,1942,8,1866,4,1863,1,1860,956,954,952,949,946,17,14,969,967,964,961,27,957,24,979,976,972,1901,1900,1898,1896,986,1905,1903,350,349,1381,329,327,324,1368,1366,292,290,287,284,2118,304,1341,1339,1337,1345,243,240,237,2086,233,2083,254,1297,1295,1293,1290,1304,2114,190,187,184,2034,180,2031,177,2027,199,1233,1231,1229,1226,217,1223,1241,2078,2076,584,555,554,552,550,2282,562,1586,507,506,504,502,2257,499,2254,515,1563,1561,445,443,441,2219,438,2216,435,2212,460,454,475,1517,1515,1512,2447,798,797,2422,2419,770,768,766,2383,2380,2376,721,719,717,714,731,1714,2602,2582,2580,2548,2546,2543,923,921,2717,2706,2705,2683,2682,2680,1771,1752,1750,1733,1732,1731,1735,1814,1707,1670,1668,1631,1629,1626,1634,1599,1598,1596,1594,1603,1601,2326,1772,1753,1751,1581,1554,1552,1504,1501,1498,1509,1442,1437,1434,401,1448,1445,2206,1392,1391,1389,1387,1384,359,1399,1397,1394,1404,2171,2170,1708,1672,1669,619,1632,1630,1628,1773,1378,1363,1361,1333,1328,1336,1286,1281,1278,248,1292,1289,2111,1218,1216,1210,197,1206,193,1228,1225,1221,1236,2073,2071,1151,1150,1148,1146,152,1143,149,1140,145,1161,1159,1156,1153,158,1169,1166,2017,2016,2014,2019,1582,510,1556,1553,452,448,1506,1500,394,391,387,1443,1441,1439,1436,1450,2207,765,716,713,1709,662,660,657,1673,1671,916,914,879,878,877,882,1135,1134,1121,1120,1118,1123,1097,1096,1094,1092,103,1101,1099,1979,1059,1058,1056,1054,77,1051,74,1066,1064,1061,1071,1964,1963,1007,1006,1004,1002,999,41,996,37,1017,1015,1012,1009,52,1025,1022,1936,1935,1933,1938,942,940,938,935,932,5,2,955,953,950,947,18,943,15,965,962,958,1895,1894,1892,1890,973,1899,1897,1379,325,1364,1362,288,285,1334,1332,1330,241,238,234,1287,1285,1283,1280,1294,2112,188,185,181,178,2028,1219,1217,1215,1212,200,1209,1227,2074,2072,583,553,551,1583,505,503,500,513,1557,1555,444,442,439,436,2213,455,451,1507,1505,1502,796,763,762,760,767,711,710,708,706,2377,718,715,1710,2544,917,915,2681,1627,1597,1595,2325,1769,1749,1747,1499,1438,1435,2204,1390,1388,1385,1395,2169,2167,1704,1665,1662,1625,1623,1620,1770,1329,1282,1279,2109,1214,1207,1222,2068,2065,1149,1147,1144,1141,146,1157,1154,2013,2011,2008,2015,1579,1549,1546,1495,1487,1433,1431,1428,1425,388,1440,2205,1705,658,1667,1664,1119,1095,1093,1978,1057,1055,1052,1062,1962,1960,1005,1003,1e3,997,38,1013,1010,1932,1930,1927,1934,941,939,936,933,6,930,3,951,948,944,1889,1887,1884,1881,959,1893,1891,35,1377,1360,1358,1327,1325,1322,1331,1277,1275,1272,1269,235,1284,2110,1205,1204,1201,1198,182,1195,179,1213,2070,2067,1580,501,1551,1548,440,437,1497,1494,1490,1503,761,709,707,1706,913,912,2198,1386,2164,2161,1621,1766,2103,1208,2058,2054,1145,1142,2005,2002,1999,2009,1488,1429,1426,2200,1698,1659,1656,1975,1053,1957,1954,1001,998,1924,1921,1918,1928,937,934,931,1879,1876,1873,1870,945,1885,1882,1323,1273,1270,2105,1202,1199,1196,1211,2061,2057,1576,1543,1540,1484,1481,1478,1491,1700]),t}(),S7e=function(){function t(e,r){this.bits=e,this.points=r}return t.prototype.getBits=function(){return this.bits},t.prototype.getPoints=function(){return this.points},t}(),I7e=function(t){var e=typeof Symbol=="function"&&Symbol.iterator,r=e&&t[e],n=0;if(r)return r.call(t);if(t&&typeof t.length=="number")return{next:function(){return t&&n>=t.length&&(t=void 0),{value:t&&t[n++],done:!t}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")},j7e=function(){function t(){}return t.detectMultiple=function(e,r,n){var a=e.getBlackMatrix(),s=t.detect(n,a);return s.length||(a=a.clone(),a.rotate180(),s=t.detect(n,a)),new S7e(a,s)},t.detect=function(e,r){for(var n,a,s=new Array,o=0,l=0,c=!1;o<r.getHeight();){var u=t.findVertices(r,o,l);if(u[0]==null&&u[3]==null){if(!c)break;c=!1,l=0;try{for(var d=(n=void 0,I7e(s)),f=d.next();!f.done;f=d.next()){var A=f.value;A[1]!=null&&(o=Math.trunc(Math.max(o,A[1].getY()))),A[3]!=null&&(o=Math.max(o,Math.trunc(A[3].getY())))}}catch(h){n={error:h}}finally{try{f&&!f.done&&(a=d.return)&&a.call(d)}finally{if(n)throw n.error}}o+=t.ROW_STEP;continue}if(c=!0,s.push(u),!e)break;u[2]!=null?(l=Math.trunc(u[2].getX()),o=Math.trunc(u[2].getY())):(l=Math.trunc(u[4].getX()),o=Math.trunc(u[4].getY()))}return s},t.findVertices=function(e,r,n){var a=e.getHeight(),s=e.getWidth(),o=new Array(8);return t.copyToResult(o,t.findRowsWithPattern(e,a,s,r,n,t.START_PATTERN),t.INDEXES_START_PATTERN),o[4]!=null&&(n=Math.trunc(o[4].getX()),r=Math.trunc(o[4].getY())),t.copyToResult(o,t.findRowsWithPattern(e,a,s,r,n,t.STOP_PATTERN),t.INDEXES_STOP_PATTERN),o},t.copyToResult=function(e,r,n){for(var a=0;a<n.length;a++)e[n[a]]=r[a]},t.findRowsWithPattern=function(e,r,n,a,s,o){for(var l=new Array(4),c=!1,u=new Int32Array(o.length);a<r;a+=t.ROW_STEP){var d=t.findGuardPattern(e,s,a,n,!1,o,u);if(d!=null){for(;a>0;){var f=t.findGuardPattern(e,s,--a,n,!1,o,u);if(f!=null)d=f;else{a++;break}}l[0]=new fn(d[0],a),l[1]=new fn(d[1],a),c=!0;break}}var A=a+1;if(c){for(var h=0,f=Int32Array.from([Math.trunc(l[0].getX()),Math.trunc(l[1].getX())]);A<r;A++){var d=t.findGuardPattern(e,f[0],A,n,!1,o,u);if(d!=null&&Math.abs(f[0]-d[0])<t.MAX_PATTERN_DRIFT&&Math.abs(f[1]-d[1])<t.MAX_PATTERN_DRIFT)f=d,h=0;else{if(h>t.SKIPPED_ROW_COUNT_MAX)break;h++}}A-=h+1,l[2]=new fn(f[0],A),l[3]=new fn(f[1],A)}return A-a<t.BARCODE_MIN_HEIGHT&&Io.fill(l,null),l},t.findGuardPattern=function(e,r,n,a,s,o,l){Io.fillWithin(l,0,l.length,0);for(var c=r,u=0;e.get(c,n)&&c>0&&u++<t.MAX_PIXEL_DRIFT;)c--;for(var d=c,f=0,A=o.length,h=s;d<a;d++){var m=e.get(d,n);if(m!==h)l[f]++;else{if(f===A-1){if(t.patternMatchVariance(l,o,t.MAX_INDIVIDUAL_VARIANCE)<t.MAX_AVG_VARIANCE)return new Int32Array([c,d]);c+=l[0]+l[1],ws.arraycopy(l,2,l,0,f-1),l[f-1]=0,l[f]=0,f--}else f++;l[f]=1,h=!h}}return f===A-1&&t.patternMatchVariance(l,o,t.MAX_INDIVIDUAL_VARIANCE)<t.MAX_AVG_VARIANCE?new Int32Array([c,d-1]):null},t.patternMatchVariance=function(e,r,n){for(var a=e.length,s=0,o=0,l=0;l<a;l++)s+=e[l],o+=r[l];if(s<o)return 1/0;var c=s/o;n*=c;for(var u=0,d=0;d<a;d++){var f=e[d],A=r[d]*c,h=f>A?f-A:A-f;if(h>n)return 1/0;u+=h}return u/s},t.INDEXES_START_PATTERN=Int32Array.from([0,4,1,5]),t.INDEXES_STOP_PATTERN=Int32Array.from([6,2,7,3]),t.MAX_AVG_VARIANCE=.42,t.MAX_INDIVIDUAL_VARIANCE=.8,t.START_PATTERN=Int32Array.from([8,1,1,1,1,1,1,3]),t.STOP_PATTERN=Int32Array.from([7,1,1,3,1,1,1,2,1]),t.MAX_PIXEL_DRIFT=3,t.MAX_PATTERN_DRIFT=5,t.SKIPPED_ROW_COUNT_MAX=25,t.ROW_STEP=5,t.BARCODE_MIN_HEIGHT=10,t}(),P7e=function(t){var e=typeof Symbol=="function"&&Symbol.iterator,r=e&&t[e],n=0;if(r)return r.call(t);if(t&&typeof t.length=="number")return{next:function(){return t&&n>=t.length&&(t=void 0),{value:t&&t[n++],done:!t}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")},Ep=function(){function t(e,r){if(r.length===0)throw new Pn;this.field=e;var n=r.length;if(n>1&&r[0]===0){for(var a=1;a<n&&r[a]===0;)a++;a===n?this.coefficients=new Int32Array([0]):(this.coefficients=new Int32Array(n-a),ws.arraycopy(r,a,this.coefficients,0,this.coefficients.length))}else this.coefficients=r}return t.prototype.getCoefficients=function(){return this.coefficients},t.prototype.getDegree=function(){return this.coefficients.length-1},t.prototype.isZero=function(){return this.coefficients[0]===0},t.prototype.getCoefficient=function(e){return this.coefficients[this.coefficients.length-1-e]},t.prototype.evaluateAt=function(e){var r,n;if(e===0)return this.getCoefficient(0);if(e===1){var a=0;try{for(var s=P7e(this.coefficients),o=s.next();!o.done;o=s.next()){var l=o.value;a=this.field.add(a,l)}}catch(f){r={error:f}}finally{try{o&&!o.done&&(n=s.return)&&n.call(s)}finally{if(r)throw r.error}}return a}for(var c=this.coefficients[0],u=this.coefficients.length,d=1;d<u;d++)c=this.field.add(this.field.multiply(e,c),this.coefficients[d]);return c},t.prototype.add=function(e){if(!this.field.equals(e.field))throw new Pn("ModulusPolys do not have same ModulusGF field");if(this.isZero())return e;if(e.isZero())return this;var r=this.coefficients,n=e.coefficients;if(r.length>n.length){var a=r;r=n,n=a}var s=new Int32Array(n.length),o=n.length-r.length;ws.arraycopy(n,0,s,0,o);for(var l=o;l<n.length;l++)s[l]=this.field.add(r[l-o],n[l]);return new t(this.field,s)},t.prototype.subtract=function(e){if(!this.field.equals(e.field))throw new Pn("ModulusPolys do not have same ModulusGF field");return e.isZero()?this:this.add(e.negative())},t.prototype.multiply=function(e){return e instanceof t?this.multiplyOther(e):this.multiplyScalar(e)},t.prototype.multiplyOther=function(e){if(!this.field.equals(e.field))throw new Pn("ModulusPolys do not have same ModulusGF field");if(this.isZero()||e.isZero())return new t(this.field,new Int32Array([0]));for(var r=this.coefficients,n=r.length,a=e.coefficients,s=a.length,o=new Int32Array(n+s-1),l=0;l<n;l++)for(var c=r[l],u=0;u<s;u++)o[l+u]=this.field.add(o[l+u],this.field.multiply(c,a[u]));return new t(this.field,o)},t.prototype.negative=function(){for(var e=this.coefficients.length,r=new Int32Array(e),n=0;n<e;n++)r[n]=this.field.subtract(0,this.coefficients[n]);return new t(this.field,r)},t.prototype.multiplyScalar=function(e){if(e===0)return new t(this.field,new Int32Array([0]));if(e===1)return this;for(var r=this.coefficients.length,n=new Int32Array(r),a=0;a<r;a++)n[a]=this.field.multiply(this.coefficients[a],e);return new t(this.field,n)},t.prototype.multiplyByMonomial=function(e,r){if(e<0)throw new Pn;if(r===0)return new t(this.field,new Int32Array([0]));for(var n=this.coefficients.length,a=new Int32Array(n+e),s=0;s<n;s++)a[s]=this.field.multiply(this.coefficients[s],r);return new t(this.field,a)},t.prototype.toString=function(){for(var e=new Zn,r=this.getDegree();r>=0;r--){var n=this.getCoefficient(r);n!==0&&(n<0?(e.append(" - "),n=-n):e.length()>0&&e.append(" + "),(r===0||n!==1)&&e.append(n),r!==0&&(r===1?e.append("x"):(e.append("x^"),e.append(r))))}return e.toString()},t}(),B7e=function(){function t(){}return t.prototype.add=function(e,r){return(e+r)%this.modulus},t.prototype.subtract=function(e,r){return(this.modulus+e-r)%this.modulus},t.prototype.exp=function(e){return this.expTable[e]},t.prototype.log=function(e){if(e===0)throw new Pn;return this.logTable[e]},t.prototype.inverse=function(e){if(e===0)throw new xse;return this.expTable[this.modulus-this.logTable[e]-1]},t.prototype.multiply=function(e,r){return e===0||r===0?0:this.expTable[(this.logTable[e]+this.logTable[r])%(this.modulus-1)]},t.prototype.getSize=function(){return this.modulus},t.prototype.equals=function(e){return e===this},t}(),T7e=function(){var t=function(e,r){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,a){n.__proto__=a}||function(n,a){for(var s in a)a.hasOwnProperty(s)&&(n[s]=a[s])},t(e,r)};return function(e,r){t(e,r);function n(){this.constructor=e}e.prototype=r===null?Object.create(r):(n.prototype=r.prototype,new n)}}(),k7e=function(t){T7e(e,t);function e(r,n){var a=t.call(this)||this;a.modulus=r,a.expTable=new Int32Array(r),a.logTable=new Int32Array(r);for(var s=1,o=0;o<r;o++)a.expTable[o]=s,s=s*n%r;for(var o=0;o<r-1;o++)a.logTable[a.expTable[o]]=o;return a.zero=new Ep(a,new Int32Array([0])),a.one=new Ep(a,new Int32Array([1])),a}return e.prototype.getZero=function(){return this.zero},e.prototype.getOne=function(){return this.one},e.prototype.buildMonomial=function(r,n){if(r<0)throw new Pn;if(n===0)return this.zero;var a=new Int32Array(r+1);return a[0]=n,new Ep(this,a)},e.PDF417_GF=new e(Na.NUMBER_OF_CODEWORDS,3),e}(B7e),F7e=function(t){var e=typeof Symbol=="function"&&Symbol.iterator,r=e&&t[e],n=0;if(r)return r.call(t);if(t&&typeof t.length=="number")return{next:function(){return t&&n>=t.length&&(t=void 0),{value:t&&t[n++],done:!t}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")},O7e=function(){function t(){this.field=k7e.PDF417_GF}return t.prototype.decode=function(e,r,n){for(var a,s,o=new Ep(this.field,e),l=new Int32Array(r),c=!1,u=r;u>0;u--){var d=o.evaluateAt(this.field.exp(u));l[r-u]=d,d!==0&&(c=!0)}if(!c)return 0;var f=this.field.getOne();if(n!=null)try{for(var A=F7e(n),h=A.next();!h.done;h=A.next()){var m=h.value,p=this.field.exp(e.length-1-m),x=new Ep(this.field,new Int32Array([this.field.subtract(0,p),1]));f=f.multiply(x)}}catch(S){a={error:S}}finally{try{h&&!h.done&&(s=A.return)&&s.call(A)}finally{if(a)throw a.error}}for(var v=new Ep(this.field,l),y=this.runEuclideanAlgorithm(this.field.buildMonomial(r,1),v,r),b=y[0],w=y[1],j=this.findErrorLocations(b),I=this.findErrorMagnitudes(w,b,j),u=0;u<j.length;u++){var _=e.length-1-this.field.log(j[u]);if(_<0)throw so.getChecksumInstance();e[_]=this.field.subtract(e[_],I[u])}return j.length},t.prototype.runEuclideanAlgorithm=function(e,r,n){if(e.getDegree()<r.getDegree()){var a=e;e=r,r=a}for(var s=e,o=r,l=this.field.getZero(),c=this.field.getOne();o.getDegree()>=Math.round(n/2);){var u=s,d=l;if(s=o,l=c,s.isZero())throw so.getChecksumInstance();o=u;for(var f=this.field.getZero(),A=s.getCoefficient(s.getDegree()),h=this.field.inverse(A);o.getDegree()>=s.getDegree()&&!o.isZero();){var m=o.getDegree()-s.getDegree(),p=this.field.multiply(o.getCoefficient(o.getDegree()),h);f=f.add(this.field.buildMonomial(m,p)),o=o.subtract(s.multiplyByMonomial(m,p))}c=f.multiply(l).subtract(d).negative()}var x=c.getCoefficient(0);if(x===0)throw so.getChecksumInstance();var v=this.field.inverse(x),y=c.multiply(v),b=o.multiply(v);return[y,b]},t.prototype.findErrorLocations=function(e){for(var r=e.getDegree(),n=new Int32Array(r),a=0,s=1;s<this.field.getSize()&&a<r;s++)e.evaluateAt(s)===0&&(n[a]=this.field.inverse(s),a++);if(a!==r)throw so.getChecksumInstance();return n},t.prototype.findErrorMagnitudes=function(e,r,n){for(var a=r.getDegree(),s=new Int32Array(a),o=1;o<=a;o++)s[a-o]=this.field.multiply(o,r.getCoefficient(o));for(var l=new Ep(this.field,s),c=n.length,u=new Int32Array(c),o=0;o<c;o++){var d=this.field.inverse(n[o]),f=this.field.subtract(0,e.evaluateAt(d)),A=this.field.inverse(l.evaluateAt(d));u[o]=this.field.multiply(f,A)}return u},t}(),fF=function(){function t(e,r,n,a,s){e instanceof t?this.constructor_2(e):this.constructor_1(e,r,n,a,s)}return t.prototype.constructor_1=function(e,r,n,a,s){var o=r==null||n==null,l=a==null||s==null;if(o&&l)throw new rr;o?(r=new fn(0,a.getY()),n=new fn(0,s.getY())):l&&(a=new fn(e.getWidth()-1,r.getY()),s=new fn(e.getWidth()-1,n.getY())),this.image=e,this.topLeft=r,this.bottomLeft=n,this.topRight=a,this.bottomRight=s,this.minX=Math.trunc(Math.min(r.getX(),n.getX())),this.maxX=Math.trunc(Math.max(a.getX(),s.getX())),this.minY=Math.trunc(Math.min(r.getY(),a.getY())),this.maxY=Math.trunc(Math.max(n.getY(),s.getY()))},t.prototype.constructor_2=function(e){this.image=e.image,this.topLeft=e.getTopLeft(),this.bottomLeft=e.getBottomLeft(),this.topRight=e.getTopRight(),this.bottomRight=e.getBottomRight(),this.minX=e.getMinX(),this.maxX=e.getMaxX(),this.minY=e.getMinY(),this.maxY=e.getMaxY()},t.merge=function(e,r){return e==null?r:r==null?e:new t(e.image,e.topLeft,e.bottomLeft,r.topRight,r.bottomRight)},t.prototype.addMissingRows=function(e,r,n){var a=this.topLeft,s=this.bottomLeft,o=this.topRight,l=this.bottomRight;if(e>0){var c=n?this.topLeft:this.topRight,u=Math.trunc(c.getY()-e);u<0&&(u=0);var d=new fn(c.getX(),u);n?a=d:o=d}if(r>0){var f=n?this.bottomLeft:this.bottomRight,A=Math.trunc(f.getY()+r);A>=this.image.getHeight()&&(A=this.image.getHeight()-1);var h=new fn(f.getX(),A);n?s=h:l=h}return new t(this.image,a,s,o,l)},t.prototype.getMinX=function(){return this.minX},t.prototype.getMaxX=function(){return this.maxX},t.prototype.getMinY=function(){return this.minY},t.prototype.getMaxY=function(){return this.maxY},t.prototype.getTopLeft=function(){return this.topLeft},t.prototype.getTopRight=function(){return this.topRight},t.prototype.getBottomLeft=function(){return this.bottomLeft},t.prototype.getBottomRight=function(){return this.bottomRight},t}(),D7e=function(){function t(e,r,n,a){this.columnCount=e,this.errorCorrectionLevel=a,this.rowCountUpperPart=r,this.rowCountLowerPart=n,this.rowCount=r+n}return t.prototype.getColumnCount=function(){return this.columnCount},t.prototype.getErrorCorrectionLevel=function(){return this.errorCorrectionLevel},t.prototype.getRowCount=function(){return this.rowCount},t.prototype.getRowCountUpperPart=function(){return this.rowCountUpperPart},t.prototype.getRowCountLowerPart=function(){return this.rowCountLowerPart},t}(),MR=function(){function t(){this.buffer=""}return t.form=function(e,r){var n=-1;function a(o,l,c,u,d,f){if(o==="%%")return"%";if(r[++n]!==void 0){o=u?parseInt(u.substr(1)):void 0;var A=d?parseInt(d.substr(1)):void 0,h;switch(f){case"s":h=r[n];break;case"c":h=r[n][0];break;case"f":h=parseFloat(r[n]).toFixed(o);break;case"p":h=parseFloat(r[n]).toPrecision(o);break;case"e":h=parseFloat(r[n]).toExponential(o);break;case"x":h=parseInt(r[n]).toString(A||16);break;case"d":h=parseFloat(parseInt(r[n],A||10).toPrecision(o)).toFixed(0);break}h=typeof h=="object"?JSON.stringify(h):(+h).toString(A);for(var m=parseInt(c),p=c&&c[0]+""=="0"?"0":" ";h.length<m;)h=l!==void 0?h+p:p+h;return h}}var s=/%(-)?(0?[0-9]+)?([.][0-9]+)?([#][0-9]+)?([scfpexd%])/g;return e.replace(s,a)},t.prototype.format=function(e){for(var r=[],n=1;n<arguments.length;n++)r[n-1]=arguments[n];this.buffer+=t.form(e,r)},t.prototype.toString=function(){return this.buffer},t}(),R7e=function(t){var e=typeof Symbol=="function"&&Symbol.iterator,r=e&&t[e],n=0;if(r)return r.call(t);if(t&&typeof t.length=="number")return{next:function(){return t&&n>=t.length&&(t=void 0),{value:t&&t[n++],done:!t}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")},Ese=function(){function t(e){this.boundingBox=new fF(e),this.codewords=new Array(e.getMaxY()-e.getMinY()+1)}return t.prototype.getCodewordNearby=function(e){var r=this.getCodeword(e);if(r!=null)return r;for(var n=1;n<t.MAX_NEARBY_DISTANCE;n++){var a=this.imageRowToCodewordIndex(e)-n;if(a>=0&&(r=this.codewords[a],r!=null)||(a=this.imageRowToCodewordIndex(e)+n,a<this.codewords.length&&(r=this.codewords[a],r!=null)))return r}return null},t.prototype.imageRowToCodewordIndex=function(e){return e-this.boundingBox.getMinY()},t.prototype.setCodeword=function(e,r){this.codewords[this.imageRowToCodewordIndex(e)]=r},t.prototype.getCodeword=function(e){return this.codewords[this.imageRowToCodewordIndex(e)]},t.prototype.getBoundingBox=function(){return this.boundingBox},t.prototype.getCodewords=function(){return this.codewords},t.prototype.toString=function(){var e,r,n=new MR,a=0;try{for(var s=R7e(this.codewords),o=s.next();!o.done;o=s.next()){var l=o.value;if(l==null){n.format("%3d:    |   %n",a++);continue}n.format("%3d: %3d|%3d%n",a++,l.getRowNumber(),l.getValue())}}catch(c){e={error:c}}finally{try{o&&!o.done&&(r=s.return)&&r.call(s)}finally{if(e)throw e.error}}return n.toString()},t.MAX_NEARBY_DISTANCE=5,t}(),M7e=function(t){var e=typeof Symbol=="function"&&Symbol.iterator,r=e&&t[e],n=0;if(r)return r.call(t);if(t&&typeof t.length=="number")return{next:function(){return t&&n>=t.length&&(t=void 0),{value:t&&t[n++],done:!t}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")},L7e=function(t,e){var r=typeof Symbol=="function"&&t[Symbol.iterator];if(!r)return t;var n=r.call(t),a,s=[],o;try{for(;(e===void 0||e-- >0)&&!(a=n.next()).done;)s.push(a.value)}catch(l){o={error:l}}finally{try{a&&!a.done&&(r=n.return)&&r.call(n)}finally{if(o)throw o.error}}return s},Jy=function(){function t(){this.values=new Map}return t.prototype.setValue=function(e){e=Math.trunc(e);var r=this.values.get(e);r==null&&(r=0),r++,this.values.set(e,r)},t.prototype.getValue=function(){var e,r,n=-1,a=new Array,s=function(f,A){var h={getKey:function(){return f},getValue:function(){return A}};h.getValue()>n?(n=h.getValue(),a=[],a.push(h.getKey())):h.getValue()===n&&a.push(h.getKey())};try{for(var o=M7e(this.values.entries()),l=o.next();!l.done;l=o.next()){var c=L7e(l.value,2),u=c[0],d=c[1];s(u,d)}}catch(f){e={error:f}}finally{try{l&&!l.done&&(r=o.return)&&r.call(o)}finally{if(e)throw e.error}}return Na.toIntArray(a)},t.prototype.getConfidence=function(e){return this.values.get(e)},t}(),U7e=function(){var t=function(e,r){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,a){n.__proto__=a}||function(n,a){for(var s in a)a.hasOwnProperty(s)&&(n[s]=a[s])},t(e,r)};return function(e,r){t(e,r);function n(){this.constructor=e}e.prototype=r===null?Object.create(r):(n.prototype=r.prototype,new n)}}(),G5=function(t){var e=typeof Symbol=="function"&&Symbol.iterator,r=e&&t[e],n=0;if(r)return r.call(t);if(t&&typeof t.length=="number")return{next:function(){return t&&n>=t.length&&(t=void 0),{value:t&&t[n++],done:!t}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")},H$=function(t){U7e(e,t);function e(r,n){var a=t.call(this,r)||this;return a._isLeft=n,a}return e.prototype.setRowNumbers=function(){var r,n;try{for(var a=G5(this.getCodewords()),s=a.next();!s.done;s=a.next()){var o=s.value;o!=null&&o.setRowNumberAsRowIndicatorColumn()}}catch(l){r={error:l}}finally{try{s&&!s.done&&(n=a.return)&&n.call(a)}finally{if(r)throw r.error}}},e.prototype.adjustCompleteIndicatorColumnRowNumbers=function(r){var n=this.getCodewords();this.setRowNumbers(),this.removeIncorrectCodewords(n,r);for(var a=this.getBoundingBox(),s=this._isLeft?a.getTopLeft():a.getTopRight(),o=this._isLeft?a.getBottomLeft():a.getBottomRight(),l=this.imageRowToCodewordIndex(Math.trunc(s.getY())),c=this.imageRowToCodewordIndex(Math.trunc(o.getY())),u=-1,d=1,f=0,A=l;A<c;A++)if(n[A]!=null){var h=n[A],m=h.getRowNumber()-u;if(m===0)f++;else if(m===1)d=Math.max(d,f),f=1,u=h.getRowNumber();else if(m<0||h.getRowNumber()>=r.getRowCount()||m>A)n[A]=null;else{var p=void 0;d>2?p=(d-2)*m:p=m;for(var x=p>=A,v=1;v<=p&&!x;v++)x=n[A-v]!=null;x?n[A]=null:(u=h.getRowNumber(),f=1)}}},e.prototype.getRowHeights=function(){var r,n,a=this.getBarcodeMetadata();if(a==null)return null;this.adjustIncompleteIndicatorColumnRowNumbers(a);var s=new Int32Array(a.getRowCount());try{for(var o=G5(this.getCodewords()),l=o.next();!l.done;l=o.next()){var c=l.value;if(c!=null){var u=c.getRowNumber();if(u>=s.length)continue;s[u]++}}}catch(d){r={error:d}}finally{try{l&&!l.done&&(n=o.return)&&n.call(o)}finally{if(r)throw r.error}}return s},e.prototype.adjustIncompleteIndicatorColumnRowNumbers=function(r){for(var n=this.getBoundingBox(),a=this._isLeft?n.getTopLeft():n.getTopRight(),s=this._isLeft?n.getBottomLeft():n.getBottomRight(),o=this.imageRowToCodewordIndex(Math.trunc(a.getY())),l=this.imageRowToCodewordIndex(Math.trunc(s.getY())),c=this.getCodewords(),u=-1,d=o;d<l;d++)if(c[d]!=null){var f=c[d];f.setRowNumberAsRowIndicatorColumn();var A=f.getRowNumber()-u;A===0||(A===1?u=f.getRowNumber():f.getRowNumber()>=r.getRowCount()?c[d]=null:u=f.getRowNumber())}},e.prototype.getBarcodeMetadata=function(){var r,n,a=this.getCodewords(),s=new Jy,o=new Jy,l=new Jy,c=new Jy;try{for(var u=G5(a),d=u.next();!d.done;d=u.next()){var f=d.value;if(f!=null){f.setRowNumberAsRowIndicatorColumn();var A=f.getValue()%30,h=f.getRowNumber();switch(this._isLeft||(h+=2),h%3){case 0:o.setValue(A*3+1);break;case 1:c.setValue(A/3),l.setValue(A%3);break;case 2:s.setValue(A+1);break}}}}catch(p){r={error:p}}finally{try{d&&!d.done&&(n=u.return)&&n.call(u)}finally{if(r)throw r.error}}if(s.getValue().length===0||o.getValue().length===0||l.getValue().length===0||c.getValue().length===0||s.getValue()[0]<1||o.getValue()[0]+l.getValue()[0]<Na.MIN_ROWS_IN_BARCODE||o.getValue()[0]+l.getValue()[0]>Na.MAX_ROWS_IN_BARCODE)return null;var m=new D7e(s.getValue()[0],o.getValue()[0],l.getValue()[0],c.getValue()[0]);return this.removeIncorrectCodewords(a,m),m},e.prototype.removeIncorrectCodewords=function(r,n){for(var a=0;a<r.length;a++){var s=r[a];if(r[a]!=null){var o=s.getValue()%30,l=s.getRowNumber();if(l>n.getRowCount()){r[a]=null;continue}switch(this._isLeft||(l+=2),l%3){case 0:o*3+1!==n.getRowCountUpperPart()&&(r[a]=null);break;case 1:(Math.trunc(o/3)!==n.getErrorCorrectionLevel()||o%3!==n.getRowCountLowerPart())&&(r[a]=null);break;case 2:o+1!==n.getColumnCount()&&(r[a]=null);break}}}},e.prototype.isLeft=function(){return this._isLeft},e.prototype.toString=function(){return"IsLeft: "+this._isLeft+`
`+t.prototype.toString.call(this)},e}(Ese),Q7e=function(t){var e=typeof Symbol=="function"&&Symbol.iterator,r=e&&t[e],n=0;if(r)return r.call(t);if(t&&typeof t.length=="number")return{next:function(){return t&&n>=t.length&&(t=void 0),{value:t&&t[n++],done:!t}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")},V7e=function(){function t(e,r){this.ADJUST_ROW_NUMBER_SKIP=2,this.barcodeMetadata=e,this.barcodeColumnCount=e.getColumnCount(),this.boundingBox=r,this.detectionResultColumns=new Array(this.barcodeColumnCount+2)}return t.prototype.getDetectionResultColumns=function(){this.adjustIndicatorColumnRowNumbers(this.detectionResultColumns[0]),this.adjustIndicatorColumnRowNumbers(this.detectionResultColumns[this.barcodeColumnCount+1]);var e=Na.MAX_CODEWORDS_IN_BARCODE,r;do r=e,e=this.adjustRowNumbersAndGetCount();while(e>0&&e<r);return this.detectionResultColumns},t.prototype.adjustIndicatorColumnRowNumbers=function(e){e!=null&&e.adjustCompleteIndicatorColumnRowNumbers(this.barcodeMetadata)},t.prototype.adjustRowNumbersAndGetCount=function(){var e=this.adjustRowNumbersByRow();if(e===0)return 0;for(var r=1;r<this.barcodeColumnCount+1;r++)for(var n=this.detectionResultColumns[r].getCodewords(),a=0;a<n.length;a++)n[a]!=null&&(n[a].hasValidRowNumber()||this.adjustRowNumbers(r,a,n));return e},t.prototype.adjustRowNumbersByRow=function(){this.adjustRowNumbersFromBothRI();var e=this.adjustRowNumbersFromLRI();return e+this.adjustRowNumbersFromRRI()},t.prototype.adjustRowNumbersFromBothRI=function(){if(!(this.detectionResultColumns[0]==null||this.detectionResultColumns[this.barcodeColumnCount+1]==null)){for(var e=this.detectionResultColumns[0].getCodewords(),r=this.detectionResultColumns[this.barcodeColumnCount+1].getCodewords(),n=0;n<e.length;n++)if(e[n]!=null&&r[n]!=null&&e[n].getRowNumber()===r[n].getRowNumber())for(var a=1;a<=this.barcodeColumnCount;a++){var s=this.detectionResultColumns[a].getCodewords()[n];s!=null&&(s.setRowNumber(e[n].getRowNumber()),s.hasValidRowNumber()||(this.detectionResultColumns[a].getCodewords()[n]=null))}}},t.prototype.adjustRowNumbersFromRRI=function(){if(this.detectionResultColumns[this.barcodeColumnCount+1]==null)return 0;for(var e=0,r=this.detectionResultColumns[this.barcodeColumnCount+1].getCodewords(),n=0;n<r.length;n++)if(r[n]!=null)for(var a=r[n].getRowNumber(),s=0,o=this.barcodeColumnCount+1;o>0&&s<this.ADJUST_ROW_NUMBER_SKIP;o--){var l=this.detectionResultColumns[o].getCodewords()[n];l!=null&&(s=t.adjustRowNumberIfValid(a,s,l),l.hasValidRowNumber()||e++)}return e},t.prototype.adjustRowNumbersFromLRI=function(){if(this.detectionResultColumns[0]==null)return 0;for(var e=0,r=this.detectionResultColumns[0].getCodewords(),n=0;n<r.length;n++)if(r[n]!=null)for(var a=r[n].getRowNumber(),s=0,o=1;o<this.barcodeColumnCount+1&&s<this.ADJUST_ROW_NUMBER_SKIP;o++){var l=this.detectionResultColumns[o].getCodewords()[n];l!=null&&(s=t.adjustRowNumberIfValid(a,s,l),l.hasValidRowNumber()||e++)}return e},t.adjustRowNumberIfValid=function(e,r,n){return n==null||n.hasValidRowNumber()||(n.isValidRowNumber(e)?(n.setRowNumber(e),r=0):++r),r},t.prototype.adjustRowNumbers=function(e,r,n){var a,s;if(this.detectionResultColumns[e-1]!=null){var o=n[r],l=this.detectionResultColumns[e-1].getCodewords(),c=l;this.detectionResultColumns[e+1]!=null&&(c=this.detectionResultColumns[e+1].getCodewords());var u=new Array(14);u[2]=l[r],u[3]=c[r],r>0&&(u[0]=n[r-1],u[4]=l[r-1],u[5]=c[r-1]),r>1&&(u[8]=n[r-2],u[10]=l[r-2],u[11]=c[r-2]),r<n.length-1&&(u[1]=n[r+1],u[6]=l[r+1],u[7]=c[r+1]),r<n.length-2&&(u[9]=n[r+2],u[12]=l[r+2],u[13]=c[r+2]);try{for(var d=Q7e(u),f=d.next();!f.done;f=d.next()){var A=f.value;if(t.adjustRowNumber(o,A))return}}catch(h){a={error:h}}finally{try{f&&!f.done&&(s=d.return)&&s.call(d)}finally{if(a)throw a.error}}}},t.adjustRowNumber=function(e,r){return r==null?!1:r.hasValidRowNumber()&&r.getBucket()===e.getBucket()?(e.setRowNumber(r.getRowNumber()),!0):!1},t.prototype.getBarcodeColumnCount=function(){return this.barcodeColumnCount},t.prototype.getBarcodeRowCount=function(){return this.barcodeMetadata.getRowCount()},t.prototype.getBarcodeECLevel=function(){return this.barcodeMetadata.getErrorCorrectionLevel()},t.prototype.setBoundingBox=function(e){this.boundingBox=e},t.prototype.getBoundingBox=function(){return this.boundingBox},t.prototype.setDetectionResultColumn=function(e,r){this.detectionResultColumns[e]=r},t.prototype.getDetectionResultColumn=function(e){return this.detectionResultColumns[e]},t.prototype.toString=function(){var e=this.detectionResultColumns[0];e==null&&(e=this.detectionResultColumns[this.barcodeColumnCount+1]);for(var r=new MR,n=0;n<e.getCodewords().length;n++){r.format("CW %3d:",n);for(var a=0;a<this.barcodeColumnCount+2;a++){if(this.detectionResultColumns[a]==null){r.format("    |   ");continue}var s=this.detectionResultColumns[a].getCodewords()[n];if(s==null){r.format("    |   ");continue}r.format(" %3d|%3d",s.getRowNumber(),s.getValue())}r.format("%n")}return r.toString()},t}(),H7e=function(){function t(e,r,n,a){this.rowNumber=t.BARCODE_ROW_UNKNOWN,this.startX=Math.trunc(e),this.endX=Math.trunc(r),this.bucket=Math.trunc(n),this.value=Math.trunc(a)}return t.prototype.hasValidRowNumber=function(){return this.isValidRowNumber(this.rowNumber)},t.prototype.isValidRowNumber=function(e){return e!==t.BARCODE_ROW_UNKNOWN&&this.bucket===e%3*3},t.prototype.setRowNumberAsRowIndicatorColumn=function(){this.rowNumber=Math.trunc(Math.trunc(this.value/30)*3+Math.trunc(this.bucket/3))},t.prototype.getWidth=function(){return this.endX-this.startX},t.prototype.getStartX=function(){return this.startX},t.prototype.getEndX=function(){return this.endX},t.prototype.getBucket=function(){return this.bucket},t.prototype.getValue=function(){return this.value},t.prototype.getRowNumber=function(){return this.rowNumber},t.prototype.setRowNumber=function(e){this.rowNumber=e},t.prototype.toString=function(){return this.rowNumber+"|"+this.value},t.BARCODE_ROW_UNKNOWN=-1,t}(),$7e=function(){function t(){}return t.initialize=function(){for(var e=0;e<Na.SYMBOL_TABLE.length;e++)for(var r=Na.SYMBOL_TABLE[e],n=r&1,a=0;a<Na.BARS_IN_MODULE;a++){for(var s=0;(r&1)===n;)s+=1,r>>=1;n=r&1,t.RATIOS_TABLE[e]||(t.RATIOS_TABLE[e]=new Array(Na.BARS_IN_MODULE)),t.RATIOS_TABLE[e][Na.BARS_IN_MODULE-a-1]=Math.fround(s/Na.MODULES_IN_CODEWORD)}this.bSymbolTableReady=!0},t.getDecodedValue=function(e){var r=t.getDecodedCodewordValue(t.sampleBitCounts(e));return r!==-1?r:t.getClosestDecodedValue(e)},t.sampleBitCounts=function(e){for(var r=ja.sum(e),n=new Int32Array(Na.BARS_IN_MODULE),a=0,s=0,o=0;o<Na.MODULES_IN_CODEWORD;o++){var l=r/(2*Na.MODULES_IN_CODEWORD)+o*r/Na.MODULES_IN_CODEWORD;s+e[a]<=l&&(s+=e[a],a++),n[a]++}return n},t.getDecodedCodewordValue=function(e){var r=t.getBitValue(e);return Na.getCodeword(r)===-1?-1:r},t.getBitValue=function(e){for(var r=0,n=0;n<e.length;n++)for(var a=0;a<e[n];a++)r=r<<1|(n%2===0?1:0);return Math.trunc(r)},t.getClosestDecodedValue=function(e){var r=ja.sum(e),n=new Array(Na.BARS_IN_MODULE);if(r>1)for(var a=0;a<n.length;a++)n[a]=Math.fround(e[a]/r);var s=cF.MAX_VALUE,o=-1;this.bSymbolTableReady||t.initialize();for(var l=0;l<t.RATIOS_TABLE.length;l++){for(var c=0,u=t.RATIOS_TABLE[l],d=0;d<Na.BARS_IN_MODULE;d++){var f=Math.fround(u[d]-n[d]);if(c+=Math.fround(f*f),c>=s)break}c<s&&(s=c,o=Na.SYMBOL_TABLE[l])}return o},t.bSymbolTableReady=!1,t.RATIOS_TABLE=new Array(Na.SYMBOL_TABLE.length).map(function(e){return new Array(Na.BARS_IN_MODULE)}),t}(),G7e=function(){function t(){this.segmentCount=-1,this.fileSize=-1,this.timestamp=-1,this.checksum=-1}return t.prototype.getSegmentIndex=function(){return this.segmentIndex},t.prototype.setSegmentIndex=function(e){this.segmentIndex=e},t.prototype.getFileId=function(){return this.fileId},t.prototype.setFileId=function(e){this.fileId=e},t.prototype.getOptionalData=function(){return this.optionalData},t.prototype.setOptionalData=function(e){this.optionalData=e},t.prototype.isLastSegment=function(){return this.lastSegment},t.prototype.setLastSegment=function(e){this.lastSegment=e},t.prototype.getSegmentCount=function(){return this.segmentCount},t.prototype.setSegmentCount=function(e){this.segmentCount=e},t.prototype.getSender=function(){return this.sender||null},t.prototype.setSender=function(e){this.sender=e},t.prototype.getAddressee=function(){return this.addressee||null},t.prototype.setAddressee=function(e){this.addressee=e},t.prototype.getFileName=function(){return this.fileName},t.prototype.setFileName=function(e){this.fileName=e},t.prototype.getFileSize=function(){return this.fileSize},t.prototype.setFileSize=function(e){this.fileSize=e},t.prototype.getChecksum=function(){return this.checksum},t.prototype.setChecksum=function(e){this.checksum=e},t.prototype.getTimestamp=function(){return this.timestamp},t.prototype.setTimestamp=function(e){this.timestamp=e},t}(),$$=function(){function t(){}return t.parseLong=function(e,r){return r===void 0&&(r=void 0),parseInt(e,r)},t}(),K7e=function(){var t=function(e,r){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,a){n.__proto__=a}||function(n,a){for(var s in a)a.hasOwnProperty(s)&&(n[s]=a[s])},t(e,r)};return function(e,r){t(e,r);function n(){this.constructor=e}e.prototype=r===null?Object.create(r):(n.prototype=r.prototype,new n)}}(),q7e=function(t){K7e(e,t);function e(){return t!==null&&t.apply(this,arguments)||this}return e.kind="NullPointerException",e}(cu),z7e=function(){function t(){}return t.prototype.writeBytes=function(e){this.writeBytesOffset(e,0,e.length)},t.prototype.writeBytesOffset=function(e,r,n){if(e==null)throw new q7e;if(r<0||r>e.length||n<0||r+n>e.length||r+n<0)throw new FR;if(n===0)return;for(var a=0;a<n;a++)this.write(e[r+a])},t.prototype.flush=function(){},t.prototype.close=function(){},t}(),W7e=function(){var t=function(e,r){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,a){n.__proto__=a}||function(n,a){for(var s in a)a.hasOwnProperty(s)&&(n[s]=a[s])},t(e,r)};return function(e,r){t(e,r);function n(){this.constructor=e}e.prototype=r===null?Object.create(r):(n.prototype=r.prototype,new n)}}(),X7e=function(t){W7e(e,t);function e(){return t!==null&&t.apply(this,arguments)||this}return e}(cu),Y7e=function(){var t=function(e,r){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,a){n.__proto__=a}||function(n,a){for(var s in a)a.hasOwnProperty(s)&&(n[s]=a[s])},t(e,r)};return function(e,r){t(e,r);function n(){this.constructor=e}e.prototype=r===null?Object.create(r):(n.prototype=r.prototype,new n)}}(),J7e=function(t){Y7e(e,t);function e(r){r===void 0&&(r=32);var n=t.call(this)||this;if(n.count=0,r<0)throw new Pn("Negative initial size: "+r);return n.buf=new Uint8Array(r),n}return e.prototype.ensureCapacity=function(r){r-this.buf.length>0&&this.grow(r)},e.prototype.grow=function(r){var n=this.buf.length,a=n<<1;if(a-r<0&&(a=r),a<0){if(r<0)throw new X7e;a=sa.MAX_VALUE}this.buf=Io.copyOfUint8Array(this.buf,a)},e.prototype.write=function(r){this.ensureCapacity(this.count+1),this.buf[this.count]=r,this.count+=1},e.prototype.writeBytesOffset=function(r,n,a){if(n<0||n>r.length||a<0||n+a-r.length>0)throw new FR;this.ensureCapacity(this.count+a),ws.arraycopy(r,n,this.buf,this.count,a),this.count+=a},e.prototype.writeTo=function(r){r.writeBytesOffset(this.buf,0,this.count)},e.prototype.reset=function(){this.count=0},e.prototype.toByteArray=function(){return Io.copyOfUint8Array(this.buf,this.count)},e.prototype.size=function(){return this.count},e.prototype.toString=function(r){return r?typeof r=="string"?this.toString_string(r):this.toString_number(r):this.toString_void()},e.prototype.toString_void=function(){return new String(this.buf).toString()},e.prototype.toString_string=function(r){return new String(this.buf).toString()},e.prototype.toString_number=function(r){return new String(this.buf).toString()},e.prototype.close=function(){},e}(z7e),ss;(function(t){t[t.ALPHA=0]="ALPHA",t[t.LOWER=1]="LOWER",t[t.MIXED=2]="MIXED",t[t.PUNCT=3]="PUNCT",t[t.ALPHA_SHIFT=4]="ALPHA_SHIFT",t[t.PUNCT_SHIFT=5]="PUNCT_SHIFT"})(ss||(ss={}));function Sse(){if(typeof window<"u")return window.BigInt||null;if(typeof global<"u")return global.BigInt||null;if(typeof self<"u")return self.BigInt||null;throw new Error("Can't search globals for BigInt!")}var l_;function S0(t){if(typeof l_>"u"&&(l_=Sse()),l_===null)throw new Error("BigInt is not supported!");return l_(t)}function Z7e(){var t=[];t[0]=S0(1);var e=S0(900);t[1]=e;for(var r=2;r<16;r++)t[r]=t[r-1]*e;return t}var e9e=function(){function t(){}return t.decode=function(e,r){var n=new Zn(""),a=Eo.ISO8859_1;n.enableDecoding(a);for(var s=1,o=e[s++],l=new G7e;s<e[0];){switch(o){case t.TEXT_COMPACTION_MODE_LATCH:s=t.textCompaction(e,s,n);break;case t.BYTE_COMPACTION_MODE_LATCH:case t.BYTE_COMPACTION_MODE_LATCH_6:s=t.byteCompaction(o,e,a,s,n);break;case t.MODE_SHIFT_TO_BYTE_COMPACTION_MODE:n.append(e[s++]);break;case t.NUMERIC_COMPACTION_MODE_LATCH:s=t.numericCompaction(e,s,n);break;case t.ECI_CHARSET:Eo.getCharacterSetECIByValue(e[s++]);break;case t.ECI_GENERAL_PURPOSE:s+=2;break;case t.ECI_USER_DEFINED:s++;break;case t.BEGIN_MACRO_PDF417_CONTROL_BLOCK:s=t.decodeMacroBlock(e,s,l);break;case t.BEGIN_MACRO_PDF417_OPTIONAL_FIELD:case t.MACRO_PDF417_TERMINATOR:throw new Hr;default:s--,s=t.textCompaction(e,s,n);break}if(s<e.length)o=e[s++];else throw Hr.getFormatInstance()}if(n.length()===0)throw Hr.getFormatInstance();var c=new xP(null,n.toString(),null,r);return c.setOther(l),c},t.decodeMacroBlock=function(e,r,n){if(r+t.NUMBER_OF_SEQUENCE_CODEWORDS>e[0])throw Hr.getFormatInstance();for(var a=new Int32Array(t.NUMBER_OF_SEQUENCE_CODEWORDS),s=0;s<t.NUMBER_OF_SEQUENCE_CODEWORDS;s++,r++)a[s]=e[r];n.setSegmentIndex(sa.parseInt(t.decodeBase900toBase10(a,t.NUMBER_OF_SEQUENCE_CODEWORDS)));var o=new Zn;r=t.textCompaction(e,r,o),n.setFileId(o.toString());var l=-1;for(e[r]===t.BEGIN_MACRO_PDF417_OPTIONAL_FIELD&&(l=r+1);r<e[0];)switch(e[r]){case t.BEGIN_MACRO_PDF417_OPTIONAL_FIELD:switch(r++,e[r]){case t.MACRO_PDF417_OPTIONAL_FIELD_FILE_NAME:var c=new Zn;r=t.textCompaction(e,r+1,c),n.setFileName(c.toString());break;case t.MACRO_PDF417_OPTIONAL_FIELD_SENDER:var u=new Zn;r=t.textCompaction(e,r+1,u),n.setSender(u.toString());break;case t.MACRO_PDF417_OPTIONAL_FIELD_ADDRESSEE:var d=new Zn;r=t.textCompaction(e,r+1,d),n.setAddressee(d.toString());break;case t.MACRO_PDF417_OPTIONAL_FIELD_SEGMENT_COUNT:var f=new Zn;r=t.numericCompaction(e,r+1,f),n.setSegmentCount(sa.parseInt(f.toString()));break;case t.MACRO_PDF417_OPTIONAL_FIELD_TIME_STAMP:var A=new Zn;r=t.numericCompaction(e,r+1,A),n.setTimestamp($$.parseLong(A.toString()));break;case t.MACRO_PDF417_OPTIONAL_FIELD_CHECKSUM:var h=new Zn;r=t.numericCompaction(e,r+1,h),n.setChecksum(sa.parseInt(h.toString()));break;case t.MACRO_PDF417_OPTIONAL_FIELD_FILE_SIZE:var m=new Zn;r=t.numericCompaction(e,r+1,m),n.setFileSize($$.parseLong(m.toString()));break;default:throw Hr.getFormatInstance()}break;case t.MACRO_PDF417_TERMINATOR:r++,n.setLastSegment(!0);break;default:throw Hr.getFormatInstance()}if(l!==-1){var p=r-l;n.isLastSegment()&&p--,n.setOptionalData(Io.copyOfRange(e,l,l+p))}return r},t.textCompaction=function(e,r,n){for(var a=new Int32Array((e[0]-r)*2),s=new Int32Array((e[0]-r)*2),o=0,l=!1;r<e[0]&&!l;){var c=e[r++];if(c<t.TEXT_COMPACTION_MODE_LATCH)a[o]=c/30,a[o+1]=c%30,o+=2;else switch(c){case t.TEXT_COMPACTION_MODE_LATCH:a[o++]=t.TEXT_COMPACTION_MODE_LATCH;break;case t.BYTE_COMPACTION_MODE_LATCH:case t.BYTE_COMPACTION_MODE_LATCH_6:case t.NUMERIC_COMPACTION_MODE_LATCH:case t.BEGIN_MACRO_PDF417_CONTROL_BLOCK:case t.BEGIN_MACRO_PDF417_OPTIONAL_FIELD:case t.MACRO_PDF417_TERMINATOR:r--,l=!0;break;case t.MODE_SHIFT_TO_BYTE_COMPACTION_MODE:a[o]=t.MODE_SHIFT_TO_BYTE_COMPACTION_MODE,c=e[r++],s[o]=c,o++;break}}return t.decodeTextCompaction(a,s,o,n),r},t.decodeTextCompaction=function(e,r,n,a){for(var s=ss.ALPHA,o=ss.ALPHA,l=0;l<n;){var c=e[l],u="";switch(s){case ss.ALPHA:if(c<26)u=String.fromCharCode(65+c);else switch(c){case 26:u=" ";break;case t.LL:s=ss.LOWER;break;case t.ML:s=ss.MIXED;break;case t.PS:o=s,s=ss.PUNCT_SHIFT;break;case t.MODE_SHIFT_TO_BYTE_COMPACTION_MODE:a.append(r[l]);break;case t.TEXT_COMPACTION_MODE_LATCH:s=ss.ALPHA;break}break;case ss.LOWER:if(c<26)u=String.fromCharCode(97+c);else switch(c){case 26:u=" ";break;case t.AS:o=s,s=ss.ALPHA_SHIFT;break;case t.ML:s=ss.MIXED;break;case t.PS:o=s,s=ss.PUNCT_SHIFT;break;case t.MODE_SHIFT_TO_BYTE_COMPACTION_MODE:a.append(r[l]);break;case t.TEXT_COMPACTION_MODE_LATCH:s=ss.ALPHA;break}break;case ss.MIXED:if(c<t.PL)u=t.MIXED_CHARS[c];else switch(c){case t.PL:s=ss.PUNCT;break;case 26:u=" ";break;case t.LL:s=ss.LOWER;break;case t.AL:s=ss.ALPHA;break;case t.PS:o=s,s=ss.PUNCT_SHIFT;break;case t.MODE_SHIFT_TO_BYTE_COMPACTION_MODE:a.append(r[l]);break;case t.TEXT_COMPACTION_MODE_LATCH:s=ss.ALPHA;break}break;case ss.PUNCT:if(c<t.PAL)u=t.PUNCT_CHARS[c];else switch(c){case t.PAL:s=ss.ALPHA;break;case t.MODE_SHIFT_TO_BYTE_COMPACTION_MODE:a.append(r[l]);break;case t.TEXT_COMPACTION_MODE_LATCH:s=ss.ALPHA;break}break;case ss.ALPHA_SHIFT:if(s=o,c<26)u=String.fromCharCode(65+c);else switch(c){case 26:u=" ";break;case t.TEXT_COMPACTION_MODE_LATCH:s=ss.ALPHA;break}break;case ss.PUNCT_SHIFT:if(s=o,c<t.PAL)u=t.PUNCT_CHARS[c];else switch(c){case t.PAL:s=ss.ALPHA;break;case t.MODE_SHIFT_TO_BYTE_COMPACTION_MODE:a.append(r[l]);break;case t.TEXT_COMPACTION_MODE_LATCH:s=ss.ALPHA;break}break}u!==""&&a.append(u),l++}},t.byteCompaction=function(e,r,n,a,s){var o=new J7e,l=0,c=0,u=!1;switch(e){case t.BYTE_COMPACTION_MODE_LATCH:for(var d=new Int32Array(6),f=r[a++];a<r[0]&&!u;)switch(d[l++]=f,c=900*c+f,f=r[a++],f){case t.TEXT_COMPACTION_MODE_LATCH:case t.BYTE_COMPACTION_MODE_LATCH:case t.NUMERIC_COMPACTION_MODE_LATCH:case t.BYTE_COMPACTION_MODE_LATCH_6:case t.BEGIN_MACRO_PDF417_CONTROL_BLOCK:case t.BEGIN_MACRO_PDF417_OPTIONAL_FIELD:case t.MACRO_PDF417_TERMINATOR:a--,u=!0;break;default:if(l%5===0&&l>0){for(var A=0;A<6;++A)o.write(Number(S0(c)>>S0(8*(5-A))));c=0,l=0}break}a===r[0]&&f<t.TEXT_COMPACTION_MODE_LATCH&&(d[l++]=f);for(var h=0;h<l;h++)o.write(d[h]);break;case t.BYTE_COMPACTION_MODE_LATCH_6:for(;a<r[0]&&!u;){var m=r[a++];if(m<t.TEXT_COMPACTION_MODE_LATCH)l++,c=900*c+m;else switch(m){case t.TEXT_COMPACTION_MODE_LATCH:case t.BYTE_COMPACTION_MODE_LATCH:case t.NUMERIC_COMPACTION_MODE_LATCH:case t.BYTE_COMPACTION_MODE_LATCH_6:case t.BEGIN_MACRO_PDF417_CONTROL_BLOCK:case t.BEGIN_MACRO_PDF417_OPTIONAL_FIELD:case t.MACRO_PDF417_TERMINATOR:a--,u=!0;break}if(l%5===0&&l>0){for(var A=0;A<6;++A)o.write(Number(S0(c)>>S0(8*(5-A))));c=0,l=0}}break}return s.append(Bd.decode(o.toByteArray(),n)),a},t.numericCompaction=function(e,r,n){for(var a=0,s=!1,o=new Int32Array(t.MAX_NUMERIC_CODEWORDS);r<e[0]&&!s;){var l=e[r++];if(r===e[0]&&(s=!0),l<t.TEXT_COMPACTION_MODE_LATCH)o[a]=l,a++;else switch(l){case t.TEXT_COMPACTION_MODE_LATCH:case t.BYTE_COMPACTION_MODE_LATCH:case t.BYTE_COMPACTION_MODE_LATCH_6:case t.BEGIN_MACRO_PDF417_CONTROL_BLOCK:case t.BEGIN_MACRO_PDF417_OPTIONAL_FIELD:case t.MACRO_PDF417_TERMINATOR:r--,s=!0;break}(a%t.MAX_NUMERIC_CODEWORDS===0||l===t.NUMERIC_COMPACTION_MODE_LATCH||s)&&a>0&&(n.append(t.decodeBase900toBase10(o,a)),a=0)}return r},t.decodeBase900toBase10=function(e,r){for(var n=S0(0),a=0;a<r;a++)n+=t.EXP900[r-a-1]*S0(e[a]);var s=n.toString();if(s.charAt(0)!=="1")throw new Hr;return s.substring(1)},t.TEXT_COMPACTION_MODE_LATCH=900,t.BYTE_COMPACTION_MODE_LATCH=901,t.NUMERIC_COMPACTION_MODE_LATCH=902,t.BYTE_COMPACTION_MODE_LATCH_6=924,t.ECI_USER_DEFINED=925,t.ECI_GENERAL_PURPOSE=926,t.ECI_CHARSET=927,t.BEGIN_MACRO_PDF417_CONTROL_BLOCK=928,t.BEGIN_MACRO_PDF417_OPTIONAL_FIELD=923,t.MACRO_PDF417_TERMINATOR=922,t.MODE_SHIFT_TO_BYTE_COMPACTION_MODE=913,t.MAX_NUMERIC_CODEWORDS=15,t.MACRO_PDF417_OPTIONAL_FIELD_FILE_NAME=0,t.MACRO_PDF417_OPTIONAL_FIELD_SEGMENT_COUNT=1,t.MACRO_PDF417_OPTIONAL_FIELD_TIME_STAMP=2,t.MACRO_PDF417_OPTIONAL_FIELD_SENDER=3,t.MACRO_PDF417_OPTIONAL_FIELD_ADDRESSEE=4,t.MACRO_PDF417_OPTIONAL_FIELD_FILE_SIZE=5,t.MACRO_PDF417_OPTIONAL_FIELD_CHECKSUM=6,t.PL=25,t.LL=27,t.AS=27,t.ML=28,t.AL=28,t.PS=29,t.PAL=29,t.PUNCT_CHARS=`;<>@[\\]_\`~!\r	,:
-.$/"|*()?{}'`,t.MIXED_CHARS="0123456789&\r	,:#-.$/+%*=^",t.EXP900=Sse()?Z7e():[],t.NUMBER_OF_SEQUENCE_CODEWORDS=2,t}(),yy=function(t){var e=typeof Symbol=="function"&&Symbol.iterator,r=e&&t[e],n=0;if(r)return r.call(t);if(t&&typeof t.length=="number")return{next:function(){return t&&n>=t.length&&(t=void 0),{value:t&&t[n++],done:!t}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")},t9e=function(){function t(){}return t.decode=function(e,r,n,a,s,o,l){for(var c=new fF(e,r,n,a,s),u=null,d=null,f,A=!0;;A=!1){if(r!=null&&(u=t.getRowIndicatorColumn(e,c,r,!0,o,l)),a!=null&&(d=t.getRowIndicatorColumn(e,c,a,!1,o,l)),f=t.merge(u,d),f==null)throw rr.getNotFoundInstance();var h=f.getBoundingBox();if(A&&h!=null&&(h.getMinY()<c.getMinY()||h.getMaxY()>c.getMaxY()))c=h;else break}f.setBoundingBox(c);var m=f.getBarcodeColumnCount()+1;f.setDetectionResultColumn(0,u),f.setDetectionResultColumn(m,d);for(var p=u!=null,x=1;x<=m;x++){var v=p?x:m-x;if(f.getDetectionResultColumn(v)===void 0){var y=void 0;v===0||v===m?y=new H$(c,v===0):y=new Ese(c),f.setDetectionResultColumn(v,y);for(var b=-1,w=b,j=c.getMinY();j<=c.getMaxY();j++){if(b=t.getStartColumn(f,v,j,p),b<0||b>c.getMaxX()){if(w===-1)continue;b=w}var I=t.detectCodeword(e,c.getMinX(),c.getMaxX(),p,b,j,o,l);I!=null&&(y.setCodeword(j,I),w=b,o=Math.min(o,I.getWidth()),l=Math.max(l,I.getWidth()))}}}return t.createDecoderResult(f)},t.merge=function(e,r){if(e==null&&r==null)return null;var n=t.getBarcodeMetadata(e,r);if(n==null)return null;var a=fF.merge(t.adjustBoundingBox(e),t.adjustBoundingBox(r));return new V7e(n,a)},t.adjustBoundingBox=function(e){var r,n;if(e==null)return null;var a=e.getRowHeights();if(a==null)return null;var s=t.getMax(a),o=0;try{for(var l=yy(a),c=l.next();!c.done;c=l.next()){var u=c.value;if(o+=s-u,u>0)break}}catch(h){r={error:h}}finally{try{c&&!c.done&&(n=l.return)&&n.call(l)}finally{if(r)throw r.error}}for(var d=e.getCodewords(),f=0;o>0&&d[f]==null;f++)o--;for(var A=0,f=a.length-1;f>=0&&(A+=s-a[f],!(a[f]>0));f--);for(var f=d.length-1;A>0&&d[f]==null;f--)A--;return e.getBoundingBox().addMissingRows(o,A,e.isLeft())},t.getMax=function(e){var r,n,a=-1;try{for(var s=yy(e),o=s.next();!o.done;o=s.next()){var l=o.value;a=Math.max(a,l)}}catch(c){r={error:c}}finally{try{o&&!o.done&&(n=s.return)&&n.call(s)}finally{if(r)throw r.error}}return a},t.getBarcodeMetadata=function(e,r){var n;if(e==null||(n=e.getBarcodeMetadata())==null)return r==null?null:r.getBarcodeMetadata();var a;return r==null||(a=r.getBarcodeMetadata())==null?n:n.getColumnCount()!==a.getColumnCount()&&n.getErrorCorrectionLevel()!==a.getErrorCorrectionLevel()&&n.getRowCount()!==a.getRowCount()?null:n},t.getRowIndicatorColumn=function(e,r,n,a,s,o){for(var l=new H$(r,a),c=0;c<2;c++)for(var u=c===0?1:-1,d=Math.trunc(Math.trunc(n.getX())),f=Math.trunc(Math.trunc(n.getY()));f<=r.getMaxY()&&f>=r.getMinY();f+=u){var A=t.detectCodeword(e,0,e.getWidth(),a,d,f,s,o);A!=null&&(l.setCodeword(f,A),a?d=A.getStartX():d=A.getEndX())}return l},t.adjustCodewordCount=function(e,r){var n=r[0][1],a=n.getValue(),s=e.getBarcodeColumnCount()*e.getBarcodeRowCount()-t.getNumberOfECCodeWords(e.getBarcodeECLevel());if(a.length===0){if(s<1||s>Na.MAX_CODEWORDS_IN_BARCODE)throw rr.getNotFoundInstance();n.setValue(s)}else a[0]!==s&&n.setValue(s)},t.createDecoderResult=function(e){var r=t.createBarcodeMatrix(e);t.adjustCodewordCount(e,r);for(var n=new Array,a=new Int32Array(e.getBarcodeRowCount()*e.getBarcodeColumnCount()),s=[],o=new Array,l=0;l<e.getBarcodeRowCount();l++)for(var c=0;c<e.getBarcodeColumnCount();c++){var u=r[l][c+1].getValue(),d=l*e.getBarcodeColumnCount()+c;u.length===0?n.push(d):u.length===1?a[d]=u[0]:(o.push(d),s.push(u))}for(var f=new Array(s.length),A=0;A<f.length;A++)f[A]=s[A];return t.createDecoderResultFromAmbiguousValues(e.getBarcodeECLevel(),a,Na.toIntArray(n),Na.toIntArray(o),f)},t.createDecoderResultFromAmbiguousValues=function(e,r,n,a,s){for(var o=new Int32Array(a.length),l=100;l-- >0;){for(var c=0;c<o.length;c++)r[a[c]]=s[c][o[c]];try{return t.decodeCodewords(r,e,n)}catch(d){var u=d instanceof so;if(!u)throw d}if(o.length===0)throw so.getChecksumInstance();for(var c=0;c<o.length;c++)if(o[c]<s[c].length-1){o[c]++;break}else if(o[c]=0,c===o.length-1)throw so.getChecksumInstance()}throw so.getChecksumInstance()},t.createBarcodeMatrix=function(e){for(var r,n,a,s,o=Array.from({length:e.getBarcodeRowCount()},function(){return new Array(e.getBarcodeColumnCount()+2)}),l=0;l<o.length;l++)for(var c=0;c<o[l].length;c++)o[l][c]=new Jy;var u=0;try{for(var d=yy(e.getDetectionResultColumns()),f=d.next();!f.done;f=d.next()){var A=f.value;if(A!=null)try{for(var h=(a=void 0,yy(A.getCodewords())),m=h.next();!m.done;m=h.next()){var p=m.value;if(p!=null){var x=p.getRowNumber();if(x>=0){if(x>=o.length)continue;o[x][u].setValue(p.getValue())}}}}catch(v){a={error:v}}finally{try{m&&!m.done&&(s=h.return)&&s.call(h)}finally{if(a)throw a.error}}u++}}catch(v){r={error:v}}finally{try{f&&!f.done&&(n=d.return)&&n.call(d)}finally{if(r)throw r.error}}return o},t.isValidBarcodeColumn=function(e,r){return r>=0&&r<=e.getBarcodeColumnCount()+1},t.getStartColumn=function(e,r,n,a){var s,o,l=a?1:-1,c=null;if(t.isValidBarcodeColumn(e,r-l)&&(c=e.getDetectionResultColumn(r-l).getCodeword(n)),c!=null)return a?c.getEndX():c.getStartX();if(c=e.getDetectionResultColumn(r).getCodewordNearby(n),c!=null)return a?c.getStartX():c.getEndX();if(t.isValidBarcodeColumn(e,r-l)&&(c=e.getDetectionResultColumn(r-l).getCodewordNearby(n)),c!=null)return a?c.getEndX():c.getStartX();for(var u=0;t.isValidBarcodeColumn(e,r-l);){r-=l;try{for(var d=(s=void 0,yy(e.getDetectionResultColumn(r).getCodewords())),f=d.next();!f.done;f=d.next()){var A=f.value;if(A!=null)return(a?A.getEndX():A.getStartX())+l*u*(A.getEndX()-A.getStartX())}}catch(h){s={error:h}}finally{try{f&&!f.done&&(o=d.return)&&o.call(d)}finally{if(s)throw s.error}}u++}return a?e.getBoundingBox().getMinX():e.getBoundingBox().getMaxX()},t.detectCodeword=function(e,r,n,a,s,o,l,c){s=t.adjustCodewordStartColumn(e,r,n,a,s,o);var u=t.getModuleBitCount(e,r,n,a,s,o);if(u==null)return null;var d,f=ja.sum(u);if(a)d=s+f;else{for(var A=0;A<u.length/2;A++){var h=u[A];u[A]=u[u.length-1-A],u[u.length-1-A]=h}d=s,s=d-f}if(!t.checkCodewordSkew(f,l,c))return null;var m=$7e.getDecodedValue(u),p=Na.getCodeword(m);return p===-1?null:new H7e(s,d,t.getCodewordBucketNumber(m),p)},t.getModuleBitCount=function(e,r,n,a,s,o){for(var l=s,c=new Int32Array(8),u=0,d=a?1:-1,f=a;(a?l<n:l>=r)&&u<c.length;)e.get(l,o)===f?(c[u]++,l+=d):(u++,f=!f);return u===c.length||l===(a?n:r)&&u===c.length-1?c:null},t.getNumberOfECCodeWords=function(e){return 2<<e},t.adjustCodewordStartColumn=function(e,r,n,a,s,o){for(var l=s,c=a?-1:1,u=0;u<2;u++){for(;(a?l>=r:l<n)&&a===e.get(l,o);){if(Math.abs(s-l)>t.CODEWORD_SKEW_SIZE)return s;l+=c}c=-c,a=!a}return l},t.checkCodewordSkew=function(e,r,n){return r-t.CODEWORD_SKEW_SIZE<=e&&e<=n+t.CODEWORD_SKEW_SIZE},t.decodeCodewords=function(e,r,n){if(e.length===0)throw Hr.getFormatInstance();var a=1<<r+1,s=t.correctErrors(e,n,a);t.verifyCodewordCount(e,a);var o=e9e.decode(e,""+r);return o.setErrorsCorrected(s),o.setErasures(n.length),o},t.correctErrors=function(e,r,n){if(r!=null&&r.length>n/2+t.MAX_ERRORS||n<0||n>t.MAX_EC_CODEWORDS)throw so.getChecksumInstance();return t.errorCorrection.decode(e,n,r)},t.verifyCodewordCount=function(e,r){if(e.length<4)throw Hr.getFormatInstance();var n=e[0];if(n>e.length)throw Hr.getFormatInstance();if(n===0)if(r<e.length)e[0]=e.length-r;else throw Hr.getFormatInstance()},t.getBitCountForCodeword=function(e){for(var r=new Int32Array(8),n=0,a=r.length-1;!((e&1)!==n&&(n=e&1,a--,a<0));)r[a]++,e>>=1;return r},t.getCodewordBucketNumber=function(e){return e instanceof Int32Array?this.getCodewordBucketNumber_Int32Array(e):this.getCodewordBucketNumber_number(e)},t.getCodewordBucketNumber_number=function(e){return t.getCodewordBucketNumber(t.getBitCountForCodeword(e))},t.getCodewordBucketNumber_Int32Array=function(e){return(e[0]-e[2]+e[4]-e[6]+9)%9},t.toString=function(e){for(var r=new MR,n=0;n<e.length;n++){r.format("Row %2d: ",n);for(var a=0;a<e[n].length;a++){var s=e[n][a];s.getValue().length===0?r.format("        ",null):r.format("%4d(%2d)",s.getValue()[0],s.getConfidence(s.getValue()[0]))}r.format("%n")}return r.toString()},t.CODEWORD_SKEW_SIZE=2,t.MAX_ERRORS=3,t.MAX_EC_CODEWORDS=512,t.errorCorrection=new O7e,t}(),r9e=function(t){var e=typeof Symbol=="function"&&Symbol.iterator,r=e&&t[e],n=0;if(r)return r.call(t);if(t&&typeof t.length=="number")return{next:function(){return t&&n>=t.length&&(t=void 0),{value:t&&t[n++],done:!t}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")},nI=function(){function t(){}return t.prototype.decode=function(e,r){r===void 0&&(r=null);var n=t.decode(e,r,!1);if(n==null||n.length===0||n[0]==null)throw rr.getNotFoundInstance();return n[0]},t.prototype.decodeMultiple=function(e,r){r===void 0&&(r=null);try{return t.decode(e,r,!0)}catch(n){throw n instanceof Hr||n instanceof so?rr.getNotFoundInstance():n}},t.decode=function(e,r,n){var a,s,o=new Array,l=j7e.detectMultiple(e,r,n);try{for(var c=r9e(l.getPoints()),u=c.next();!u.done;u=c.next()){var d=u.value,f=t9e.decode(l.getBits(),d[4],d[5],d[6],d[7],t.getMinCodewordWidth(d),t.getMaxCodewordWidth(d)),A=new cc(f.getText(),f.getRawBytes(),void 0,d,jn.PDF_417);A.putMetadata(Il.ERROR_CORRECTION_LEVEL,f.getECLevel());var h=f.getOther();h!=null&&A.putMetadata(Il.PDF417_EXTRA_METADATA,h),o.push(A)}}catch(m){a={error:m}}finally{try{u&&!u.done&&(s=c.return)&&s.call(c)}finally{if(a)throw a.error}}return o.map(function(m){return m})},t.getMaxWidth=function(e,r){return e==null||r==null?0:Math.trunc(Math.abs(e.getX()-r.getX()))},t.getMinWidth=function(e,r){return e==null||r==null?sa.MAX_VALUE:Math.trunc(Math.abs(e.getX()-r.getX()))},t.getMaxCodewordWidth=function(e){return Math.floor(Math.max(Math.max(t.getMaxWidth(e[0],e[4]),t.getMaxWidth(e[6],e[2])*Na.MODULES_IN_CODEWORD/Na.MODULES_IN_STOP_PATTERN),Math.max(t.getMaxWidth(e[1],e[5]),t.getMaxWidth(e[7],e[3])*Na.MODULES_IN_CODEWORD/Na.MODULES_IN_STOP_PATTERN)))},t.getMinCodewordWidth=function(e){return Math.floor(Math.min(Math.min(t.getMinWidth(e[0],e[4]),t.getMinWidth(e[6],e[2])*Na.MODULES_IN_CODEWORD/Na.MODULES_IN_STOP_PATTERN),Math.min(t.getMinWidth(e[1],e[5]),t.getMinWidth(e[7],e[3])*Na.MODULES_IN_CODEWORD/Na.MODULES_IN_STOP_PATTERN)))},t.prototype.reset=function(){},t}(),n9e=function(){var t=function(e,r){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,a){n.__proto__=a}||function(n,a){for(var s in a)a.hasOwnProperty(s)&&(n[s]=a[s])},t(e,r)};return function(e,r){t(e,r);function n(){this.constructor=e}e.prototype=r===null?Object.create(r):(n.prototype=r.prototype,new n)}}(),G$=function(t){n9e(e,t);function e(){return t!==null&&t.apply(this,arguments)||this}return e.kind="ReaderException",e}(cu),K$=function(t){var e=typeof Symbol=="function"&&Symbol.iterator,r=e&&t[e],n=0;if(r)return r.call(t);if(t&&typeof t.length=="number")return{next:function(){return t&&n>=t.length&&(t=void 0),{value:t&&t[n++],done:!t}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")},Ise=function(){function t(){}return t.prototype.decode=function(e,r){return this.setHints(r),this.decodeInternal(e)},t.prototype.decodeWithState=function(e){return(this.readers===null||this.readers===void 0)&&this.setHints(null),this.decodeInternal(e)},t.prototype.setHints=function(e){this.hints=e;var r=e!=null&&e.get(Ns.TRY_HARDER)!==void 0,n=e==null?null:e.get(Ns.POSSIBLE_FORMATS),a=new Array;if(n!=null){var s=n.some(function(o){return o===jn.UPC_A||o===jn.UPC_E||o===jn.EAN_13||o===jn.EAN_8||o===jn.CODABAR||o===jn.CODE_39||o===jn.CODE_93||o===jn.CODE_128||o===jn.ITF||o===jn.RSS_14||o===jn.RSS_EXPANDED});s&&!r&&a.push(new Yx(e)),n.includes(jn.QR_CODE)&&a.push(new rI),n.includes(jn.DATA_MATRIX)&&a.push(new tI),n.includes(jn.AZTEC)&&a.push(new ZS),n.includes(jn.PDF_417)&&a.push(new nI),s&&r&&a.push(new Yx(e))}a.length===0&&(r||a.push(new Yx(e)),a.push(new rI),a.push(new tI),a.push(new ZS),a.push(new nI),r&&a.push(new Yx(e))),this.readers=a},t.prototype.reset=function(){var e,r;if(this.readers!==null)try{for(var n=K$(this.readers),a=n.next();!a.done;a=n.next()){var s=a.value;s.reset()}}catch(o){e={error:o}}finally{try{a&&!a.done&&(r=n.return)&&r.call(n)}finally{if(e)throw e.error}}},t.prototype.decodeInternal=function(e){var r,n;if(this.readers===null)throw new G$("No readers where selected, nothing can be read.");try{for(var a=K$(this.readers),s=a.next();!s.done;s=a.next()){var o=s.value;try{return o.decode(e,this.hints)}catch(l){if(l instanceof G$)continue}}}catch(l){r={error:l}}finally{try{s&&!s.done&&(n=a.return)&&n.call(a)}finally{if(r)throw r.error}}throw new rr("No MultiFormat Readers were able to detect the code.")},t}(),a9e=function(){var t=function(e,r){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,a){n.__proto__=a}||function(n,a){for(var s in a)a.hasOwnProperty(s)&&(n[s]=a[s])},t(e,r)};return function(e,r){t(e,r);function n(){this.constructor=e}e.prototype=r===null?Object.create(r):(n.prototype=r.prototype,new n)}}();(function(t){a9e(e,t);function e(r,n){r===void 0&&(r=null),n===void 0&&(n=500);var a=this,s=new Ise;return s.setHints(r),a=t.call(this,s,n)||this,a}return e.prototype.decodeBitmap=function(r){return this.reader.decodeWithState(r)},e})(w1);var s9e=function(){var t=function(e,r){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,a){n.__proto__=a}||function(n,a){for(var s in a)a.hasOwnProperty(s)&&(n[s]=a[s])},t(e,r)};return function(e,r){t(e,r);function n(){this.constructor=e}e.prototype=r===null?Object.create(r):(n.prototype=r.prototype,new n)}}();(function(t){s9e(e,t);function e(r){return r===void 0&&(r=500),t.call(this,new nI,r)||this}return e})(w1);var i9e=function(){var t=function(e,r){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,a){n.__proto__=a}||function(n,a){for(var s in a)a.hasOwnProperty(s)&&(n[s]=a[s])},t(e,r)};return function(e,r){t(e,r);function n(){this.constructor=e}e.prototype=r===null?Object.create(r):(n.prototype=r.prototype,new n)}}();(function(t){i9e(e,t);function e(r){return r===void 0&&(r=500),t.call(this,new rI,r)||this}return e})(w1);var hF;(function(t){t[t.ERROR_CORRECTION=0]="ERROR_CORRECTION",t[t.CHARACTER_SET=1]="CHARACTER_SET",t[t.DATA_MATRIX_SHAPE=2]="DATA_MATRIX_SHAPE",t[t.DATA_MATRIX_COMPACT=3]="DATA_MATRIX_COMPACT",t[t.MIN_SIZE=4]="MIN_SIZE",t[t.MAX_SIZE=5]="MAX_SIZE",t[t.MARGIN=6]="MARGIN",t[t.PDF417_COMPACT=7]="PDF417_COMPACT",t[t.PDF417_COMPACTION=8]="PDF417_COMPACTION",t[t.PDF417_DIMENSIONS=9]="PDF417_DIMENSIONS",t[t.AZTEC_LAYERS=10]="AZTEC_LAYERS",t[t.QR_VERSION=11]="QR_VERSION",t[t.GS1_FORMAT=12]="GS1_FORMAT",t[t.FORCE_C40=13]="FORCE_C40"})(hF||(hF={}));const c_=hF;var jse=function(){function t(e){this.field=e,this.cachedGenerators=[],this.cachedGenerators.push(new fm(e,Int32Array.from([1])))}return t.prototype.buildGenerator=function(e){var r=this.cachedGenerators;if(e>=r.length)for(var n=r[r.length-1],a=this.field,s=r.length;s<=e;s++){var o=n.multiply(new fm(a,Int32Array.from([1,a.exp(s-1+a.getGeneratorBase())])));r.push(o),n=o}return r[e]},t.prototype.encode=function(e,r){if(r===0)throw new Pn("No error correction bytes");var n=e.length-r;if(n<=0)throw new Pn("No data bytes provided");var a=this.buildGenerator(r),s=new Int32Array(n);ws.arraycopy(e,0,s,0,n);var o=new fm(this.field,s);o=o.multiplyByMonomial(r,1);for(var l=o.divide(a)[1],c=l.getCoefficients(),u=r-c.length,d=0;d<u;d++)e[n+d]=0;ws.arraycopy(c,0,e,n+u,c.length)},t}(),Zy=function(){function t(){}return t.applyMaskPenaltyRule1=function(e){return t.applyMaskPenaltyRule1Internal(e,!0)+t.applyMaskPenaltyRule1Internal(e,!1)},t.applyMaskPenaltyRule2=function(e){for(var r=0,n=e.getArray(),a=e.getWidth(),s=e.getHeight(),o=0;o<s-1;o++)for(var l=n[o],c=0;c<a-1;c++){var u=l[c];u===l[c+1]&&u===n[o+1][c]&&u===n[o+1][c+1]&&r++}return t.N2*r},t.applyMaskPenaltyRule3=function(e){for(var r=0,n=e.getArray(),a=e.getWidth(),s=e.getHeight(),o=0;o<s;o++)for(var l=0;l<a;l++){var c=n[o];l+6<a&&c[l]===1&&c[l+1]===0&&c[l+2]===1&&c[l+3]===1&&c[l+4]===1&&c[l+5]===0&&c[l+6]===1&&(t.isWhiteHorizontal(c,l-4,l)||t.isWhiteHorizontal(c,l+7,l+11))&&r++,o+6<s&&n[o][l]===1&&n[o+1][l]===0&&n[o+2][l]===1&&n[o+3][l]===1&&n[o+4][l]===1&&n[o+5][l]===0&&n[o+6][l]===1&&(t.isWhiteVertical(n,l,o-4,o)||t.isWhiteVertical(n,l,o+7,o+11))&&r++}return r*t.N3},t.isWhiteHorizontal=function(e,r,n){r=Math.max(r,0),n=Math.min(n,e.length);for(var a=r;a<n;a++)if(e[a]===1)return!1;return!0},t.isWhiteVertical=function(e,r,n,a){n=Math.max(n,0),a=Math.min(a,e.length);for(var s=n;s<a;s++)if(e[s][r]===1)return!1;return!0},t.applyMaskPenaltyRule4=function(e){for(var r=0,n=e.getArray(),a=e.getWidth(),s=e.getHeight(),o=0;o<s;o++)for(var l=n[o],c=0;c<a;c++)l[c]===1&&r++;var u=e.getHeight()*e.getWidth(),d=Math.floor(Math.abs(r*2-u)*10/u);return d*t.N4},t.getDataMaskBit=function(e,r,n){var a,s;switch(e){case 0:a=n+r&1;break;case 1:a=n&1;break;case 2:a=r%3;break;case 3:a=(n+r)%3;break;case 4:a=Math.floor(n/2)+Math.floor(r/3)&1;break;case 5:s=n*r,a=(s&1)+s%3;break;case 6:s=n*r,a=(s&1)+s%3&1;break;case 7:s=n*r,a=s%3+(n+r&1)&1;break;default:throw new Pn("Invalid mask pattern: "+e)}return a===0},t.applyMaskPenaltyRule1Internal=function(e,r){for(var n=0,a=r?e.getHeight():e.getWidth(),s=r?e.getWidth():e.getHeight(),o=e.getArray(),l=0;l<a;l++){for(var c=0,u=-1,d=0;d<s;d++){var f=r?o[l][d]:o[d][l];f===u?c++:(c>=5&&(n+=t.N1+(c-5)),c=1,u=f)}c>=5&&(n+=t.N1+(c-5))}return n},t.N1=3,t.N2=3,t.N3=40,t.N4=10,t}(),o9e=function(t){var e=typeof Symbol=="function"&&Symbol.iterator,r=e&&t[e],n=0;if(r)return r.call(t);if(t&&typeof t.length=="number")return{next:function(){return t&&n>=t.length&&(t=void 0),{value:t&&t[n++],done:!t}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")},l9e=function(){function t(e,r){this.width=e,this.height=r;for(var n=new Array(r),a=0;a!==r;a++)n[a]=new Uint8Array(e);this.bytes=n}return t.prototype.getHeight=function(){return this.height},t.prototype.getWidth=function(){return this.width},t.prototype.get=function(e,r){return this.bytes[r][e]},t.prototype.getArray=function(){return this.bytes},t.prototype.setNumber=function(e,r,n){this.bytes[r][e]=n},t.prototype.setBoolean=function(e,r,n){this.bytes[r][e]=n?1:0},t.prototype.clear=function(e){var r,n;try{for(var a=o9e(this.bytes),s=a.next();!s.done;s=a.next()){var o=s.value;Io.fill(o,e)}}catch(l){r={error:l}}finally{try{s&&!s.done&&(n=a.return)&&n.call(a)}finally{if(r)throw r.error}}},t.prototype.equals=function(e){if(!(e instanceof t))return!1;var r=e;if(this.width!==r.width||this.height!==r.height)return!1;for(var n=0,a=this.height;n<a;++n)for(var s=this.bytes[n],o=r.bytes[n],l=0,c=this.width;l<c;++l)if(s[l]!==o[l])return!1;return!0},t.prototype.toString=function(){for(var e=new Zn,r=0,n=this.height;r<n;++r){for(var a=this.bytes[r],s=0,o=this.width;s<o;++s)switch(a[s]){case 0:e.append(" 0");break;case 1:e.append(" 1");break;default:e.append("  ");break}e.append(`
`)}return e.toString()},t}(),AF=function(){function t(){this.maskPattern=-1}return t.prototype.getMode=function(){return this.mode},t.prototype.getECLevel=function(){return this.ecLevel},t.prototype.getVersion=function(){return this.version},t.prototype.getMaskPattern=function(){return this.maskPattern},t.prototype.getMatrix=function(){return this.matrix},t.prototype.toString=function(){var e=new Zn;return e.append(`<<
`),e.append(" mode: "),e.append(this.mode?this.mode.toString():"null"),e.append(`
 ecLevel: `),e.append(this.ecLevel?this.ecLevel.toString():"null"),e.append(`
 version: `),e.append(this.version?this.version.toString():"null"),e.append(`
 maskPattern: `),e.append(this.maskPattern.toString()),this.matrix?(e.append(`
 matrix:
`),e.append(this.matrix.toString())):e.append(`
 matrix: null
`),e.append(`>>
`),e.toString()},t.prototype.setMode=function(e){this.mode=e},t.prototype.setECLevel=function(e){this.ecLevel=e},t.prototype.setVersion=function(e){this.version=e},t.prototype.setMaskPattern=function(e){this.maskPattern=e},t.prototype.setMatrix=function(e){this.matrix=e},t.isValidMaskPattern=function(e){return e>=0&&e<t.NUM_MASK_PATTERNS},t.NUM_MASK_PATTERNS=8,t}(),c9e=function(){var t=function(e,r){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,a){n.__proto__=a}||function(n,a){for(var s in a)a.hasOwnProperty(s)&&(n[s]=a[s])},t(e,r)};return function(e,r){t(e,r);function n(){this.constructor=e}e.prototype=r===null?Object.create(r):(n.prototype=r.prototype,new n)}}(),Ss=function(t){c9e(e,t);function e(){return t!==null&&t.apply(this,arguments)||this}return e.kind="WriterException",e}(cu),q$=function(){function t(){}return t.clearMatrix=function(e){e.clear(255)},t.buildMatrix=function(e,r,n,a,s){t.clearMatrix(s),t.embedBasicPatterns(n,s),t.embedTypeInfo(r,a,s),t.maybeEmbedVersionInfo(n,s),t.embedDataBits(e,a,s)},t.embedBasicPatterns=function(e,r){t.embedPositionDetectionPatternsAndSeparators(r),t.embedDarkDotAtLeftBottomCorner(r),t.maybeEmbedPositionAdjustmentPatterns(e,r),t.embedTimingPatterns(r)},t.embedTypeInfo=function(e,r,n){var a=new Jo;t.makeTypeInfoBits(e,r,a);for(var s=0,o=a.getSize();s<o;++s){var l=a.get(a.getSize()-1-s),c=t.TYPE_INFO_COORDINATES[s],u=c[0],d=c[1];if(n.setBoolean(u,d,l),s<8){var f=n.getWidth()-s-1,A=8;n.setBoolean(f,A,l)}else{var f=8,A=n.getHeight()-7+(s-8);n.setBoolean(f,A,l)}}},t.maybeEmbedVersionInfo=function(e,r){if(!(e.getVersionNumber()<7)){var n=new Jo;t.makeVersionInfoBits(e,n);for(var a=6*3-1,s=0;s<6;++s)for(var o=0;o<3;++o){var l=n.get(a);a--,r.setBoolean(s,r.getHeight()-11+o,l),r.setBoolean(r.getHeight()-11+o,s,l)}}},t.embedDataBits=function(e,r,n){for(var a=0,s=-1,o=n.getWidth()-1,l=n.getHeight()-1;o>0;){for(o===6&&(o-=1);l>=0&&l<n.getHeight();){for(var c=0;c<2;++c){var u=o-c;if(t.isEmpty(n.get(u,l))){var d=void 0;a<e.getSize()?(d=e.get(a),++a):d=!1,r!==255&&Zy.getDataMaskBit(r,u,l)&&(d=!d),n.setBoolean(u,l,d)}}l+=s}s=-s,l+=s,o-=2}if(a!==e.getSize())throw new Ss("Not all bits consumed: "+a+"/"+e.getSize())},t.findMSBSet=function(e){return 32-sa.numberOfLeadingZeros(e)},t.calculateBCHCode=function(e,r){if(r===0)throw new Pn("0 polynomial");var n=t.findMSBSet(r);for(e<<=n-1;t.findMSBSet(e)>=n;)e^=r<<t.findMSBSet(e)-n;return e},t.makeTypeInfoBits=function(e,r,n){if(!AF.isValidMaskPattern(r))throw new Ss("Invalid mask pattern");var a=e.getBits()<<3|r;n.appendBits(a,5);var s=t.calculateBCHCode(a,t.TYPE_INFO_POLY);n.appendBits(s,10);var o=new Jo;if(o.appendBits(t.TYPE_INFO_MASK_PATTERN,15),n.xor(o),n.getSize()!==15)throw new Ss("should not happen but we got: "+n.getSize())},t.makeVersionInfoBits=function(e,r){r.appendBits(e.getVersionNumber(),6);var n=t.calculateBCHCode(e.getVersionNumber(),t.VERSION_INFO_POLY);if(r.appendBits(n,12),r.getSize()!==18)throw new Ss("should not happen but we got: "+r.getSize())},t.isEmpty=function(e){return e===255},t.embedTimingPatterns=function(e){for(var r=8;r<e.getWidth()-8;++r){var n=(r+1)%2;t.isEmpty(e.get(r,6))&&e.setNumber(r,6,n),t.isEmpty(e.get(6,r))&&e.setNumber(6,r,n)}},t.embedDarkDotAtLeftBottomCorner=function(e){if(e.get(8,e.getHeight()-8)===0)throw new Ss;e.setNumber(8,e.getHeight()-8,1)},t.embedHorizontalSeparationPattern=function(e,r,n){for(var a=0;a<8;++a){if(!t.isEmpty(n.get(e+a,r)))throw new Ss;n.setNumber(e+a,r,0)}},t.embedVerticalSeparationPattern=function(e,r,n){for(var a=0;a<7;++a){if(!t.isEmpty(n.get(e,r+a)))throw new Ss;n.setNumber(e,r+a,0)}},t.embedPositionAdjustmentPattern=function(e,r,n){for(var a=0;a<5;++a)for(var s=t.POSITION_ADJUSTMENT_PATTERN[a],o=0;o<5;++o)n.setNumber(e+o,r+a,s[o])},t.embedPositionDetectionPattern=function(e,r,n){for(var a=0;a<7;++a)for(var s=t.POSITION_DETECTION_PATTERN[a],o=0;o<7;++o)n.setNumber(e+o,r+a,s[o])},t.embedPositionDetectionPatternsAndSeparators=function(e){var r=t.POSITION_DETECTION_PATTERN[0].length;t.embedPositionDetectionPattern(0,0,e),t.embedPositionDetectionPattern(e.getWidth()-r,0,e),t.embedPositionDetectionPattern(0,e.getWidth()-r,e);var n=8;t.embedHorizontalSeparationPattern(0,n-1,e),t.embedHorizontalSeparationPattern(e.getWidth()-n,n-1,e),t.embedHorizontalSeparationPattern(0,e.getWidth()-n,e);var a=7;t.embedVerticalSeparationPattern(a,0,e),t.embedVerticalSeparationPattern(e.getHeight()-a-1,0,e),t.embedVerticalSeparationPattern(a,e.getHeight()-a,e)},t.maybeEmbedPositionAdjustmentPatterns=function(e,r){if(!(e.getVersionNumber()<2))for(var n=e.getVersionNumber()-1,a=t.POSITION_ADJUSTMENT_PATTERN_COORDINATE_TABLE[n],s=0,o=a.length;s!==o;s++){var l=a[s];if(l>=0)for(var c=0;c!==o;c++){var u=a[c];u>=0&&t.isEmpty(r.get(u,l))&&t.embedPositionAdjustmentPattern(u-2,l-2,r)}}},t.POSITION_DETECTION_PATTERN=Array.from([Int32Array.from([1,1,1,1,1,1,1]),Int32Array.from([1,0,0,0,0,0,1]),Int32Array.from([1,0,1,1,1,0,1]),Int32Array.from([1,0,1,1,1,0,1]),Int32Array.from([1,0,1,1,1,0,1]),Int32Array.from([1,0,0,0,0,0,1]),Int32Array.from([1,1,1,1,1,1,1])]),t.POSITION_ADJUSTMENT_PATTERN=Array.from([Int32Array.from([1,1,1,1,1]),Int32Array.from([1,0,0,0,1]),Int32Array.from([1,0,1,0,1]),Int32Array.from([1,0,0,0,1]),Int32Array.from([1,1,1,1,1])]),t.POSITION_ADJUSTMENT_PATTERN_COORDINATE_TABLE=Array.from([Int32Array.from([-1,-1,-1,-1,-1,-1,-1]),Int32Array.from([6,18,-1,-1,-1,-1,-1]),Int32Array.from([6,22,-1,-1,-1,-1,-1]),Int32Array.from([6,26,-1,-1,-1,-1,-1]),Int32Array.from([6,30,-1,-1,-1,-1,-1]),Int32Array.from([6,34,-1,-1,-1,-1,-1]),Int32Array.from([6,22,38,-1,-1,-1,-1]),Int32Array.from([6,24,42,-1,-1,-1,-1]),Int32Array.from([6,26,46,-1,-1,-1,-1]),Int32Array.from([6,28,50,-1,-1,-1,-1]),Int32Array.from([6,30,54,-1,-1,-1,-1]),Int32Array.from([6,32,58,-1,-1,-1,-1]),Int32Array.from([6,34,62,-1,-1,-1,-1]),Int32Array.from([6,26,46,66,-1,-1,-1]),Int32Array.from([6,26,48,70,-1,-1,-1]),Int32Array.from([6,26,50,74,-1,-1,-1]),Int32Array.from([6,30,54,78,-1,-1,-1]),Int32Array.from([6,30,56,82,-1,-1,-1]),Int32Array.from([6,30,58,86,-1,-1,-1]),Int32Array.from([6,34,62,90,-1,-1,-1]),Int32Array.from([6,28,50,72,94,-1,-1]),Int32Array.from([6,26,50,74,98,-1,-1]),Int32Array.from([6,30,54,78,102,-1,-1]),Int32Array.from([6,28,54,80,106,-1,-1]),Int32Array.from([6,32,58,84,110,-1,-1]),Int32Array.from([6,30,58,86,114,-1,-1]),Int32Array.from([6,34,62,90,118,-1,-1]),Int32Array.from([6,26,50,74,98,122,-1]),Int32Array.from([6,30,54,78,102,126,-1]),Int32Array.from([6,26,52,78,104,130,-1]),Int32Array.from([6,30,56,82,108,134,-1]),Int32Array.from([6,34,60,86,112,138,-1]),Int32Array.from([6,30,58,86,114,142,-1]),Int32Array.from([6,34,62,90,118,146,-1]),Int32Array.from([6,30,54,78,102,126,150]),Int32Array.from([6,24,50,76,102,128,154]),Int32Array.from([6,28,54,80,106,132,158]),Int32Array.from([6,32,58,84,110,136,162]),Int32Array.from([6,26,54,82,110,138,166]),Int32Array.from([6,30,58,86,114,142,170])]),t.TYPE_INFO_COORDINATES=Array.from([Int32Array.from([8,0]),Int32Array.from([8,1]),Int32Array.from([8,2]),Int32Array.from([8,3]),Int32Array.from([8,4]),Int32Array.from([8,5]),Int32Array.from([8,7]),Int32Array.from([8,8]),Int32Array.from([7,8]),Int32Array.from([5,8]),Int32Array.from([4,8]),Int32Array.from([3,8]),Int32Array.from([2,8]),Int32Array.from([1,8]),Int32Array.from([0,8])]),t.VERSION_INFO_POLY=7973,t.TYPE_INFO_POLY=1335,t.TYPE_INFO_MASK_PATTERN=21522,t}(),u9e=function(){function t(e,r){this.dataBytes=e,this.errorCorrectionBytes=r}return t.prototype.getDataBytes=function(){return this.dataBytes},t.prototype.getErrorCorrectionBytes=function(){return this.errorCorrectionBytes},t}(),z$=function(t){var e=typeof Symbol=="function"&&Symbol.iterator,r=e&&t[e],n=0;if(r)return r.call(t);if(t&&typeof t.length=="number")return{next:function(){return t&&n>=t.length&&(t=void 0),{value:t&&t[n++],done:!t}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")};(function(){function t(){}return t.calculateMaskPenalty=function(e){return Zy.applyMaskPenaltyRule1(e)+Zy.applyMaskPenaltyRule2(e)+Zy.applyMaskPenaltyRule3(e)+Zy.applyMaskPenaltyRule4(e)},t.encode=function(e,r,n){n===void 0&&(n=null);var a=t.DEFAULT_BYTE_MODE_ENCODING,s=n!==null&&n.get(c_.CHARACTER_SET)!==void 0;s&&(a=n.get(c_.CHARACTER_SET).toString());var o=this.chooseMode(e,a),l=new Jo;if(o===Is.BYTE&&(s||t.DEFAULT_BYTE_MODE_ENCODING!==a)){var c=Eo.getCharacterSetECIByName(a);c!==void 0&&this.appendECI(c,l)}this.appendModeInfo(o,l);var u=new Jo;this.appendBytes(e,o,u,a);var d;if(n!==null&&n.get(c_.QR_VERSION)!==void 0){var f=Number.parseInt(n.get(c_.QR_VERSION).toString(),10);d=Hp.getVersionForNumber(f);var A=this.calculateBitsNeeded(o,l,u,d);if(!this.willFit(A,d,r))throw new Ss("Data too big for requested version")}else d=this.recommendVersion(r,o,l,u);var h=new Jo;h.appendBitArray(l);var m=o===Is.BYTE?u.getSizeInBytes():e.length;this.appendLengthInfo(m,d,o,h),h.appendBitArray(u);var p=d.getECBlocksForLevel(r),x=d.getTotalCodewords()-p.getTotalECCodewords();this.terminateBits(x,h);var v=this.interleaveWithECBytes(h,d.getTotalCodewords(),x,p.getNumBlocks()),y=new AF;y.setECLevel(r),y.setMode(o),y.setVersion(d);var b=d.getDimensionForVersion(),w=new l9e(b,b),j=this.chooseMaskPattern(v,r,d,w);return y.setMaskPattern(j),q$.buildMatrix(v,r,d,j,w),y.setMatrix(w),y},t.recommendVersion=function(e,r,n,a){var s=this.calculateBitsNeeded(r,n,a,Hp.getVersionForNumber(1)),o=this.chooseVersion(s,e),l=this.calculateBitsNeeded(r,n,a,o);return this.chooseVersion(l,e)},t.calculateBitsNeeded=function(e,r,n,a){return r.getSize()+e.getCharacterCountBits(a)+n.getSize()},t.getAlphanumericCode=function(e){return e<t.ALPHANUMERIC_TABLE.length?t.ALPHANUMERIC_TABLE[e]:-1},t.chooseMode=function(e,r){if(r===void 0&&(r=null),Eo.SJIS.getName()===r&&this.isOnlyDoubleByteKanji(e))return Is.KANJI;for(var n=!1,a=!1,s=0,o=e.length;s<o;++s){var l=e.charAt(s);if(t.isDigit(l))n=!0;else if(this.getAlphanumericCode(l.charCodeAt(0))!==-1)a=!0;else return Is.BYTE}return a?Is.ALPHANUMERIC:n?Is.NUMERIC:Is.BYTE},t.isOnlyDoubleByteKanji=function(e){var r;try{r=Bd.encode(e,Eo.SJIS)}catch{return!1}var n=r.length;if(n%2!==0)return!1;for(var a=0;a<n;a+=2){var s=r[a]&255;if((s<129||s>159)&&(s<224||s>235))return!1}return!0},t.chooseMaskPattern=function(e,r,n,a){for(var s=Number.MAX_SAFE_INTEGER,o=-1,l=0;l<AF.NUM_MASK_PATTERNS;l++){q$.buildMatrix(e,r,n,l,a);var c=this.calculateMaskPenalty(a);c<s&&(s=c,o=l)}return o},t.chooseVersion=function(e,r){for(var n=1;n<=40;n++){var a=Hp.getVersionForNumber(n);if(t.willFit(e,a,r))return a}throw new Ss("Data too big")},t.willFit=function(e,r,n){var a=r.getTotalCodewords(),s=r.getECBlocksForLevel(n),o=s.getTotalECCodewords(),l=a-o,c=(e+7)/8;return l>=c},t.terminateBits=function(e,r){var n=e*8;if(r.getSize()>n)throw new Ss("data bits cannot fit in the QR Code"+r.getSize()+" > "+n);for(var a=0;a<4&&r.getSize()<n;++a)r.appendBit(!1);var s=r.getSize()&7;if(s>0)for(var a=s;a<8;a++)r.appendBit(!1);for(var o=e-r.getSizeInBytes(),a=0;a<o;++a)r.appendBits(a&1?17:236,8);if(r.getSize()!==n)throw new Ss("Bits size does not equal capacity")},t.getNumDataBytesAndNumECBytesForBlockID=function(e,r,n,a,s,o){if(a>=n)throw new Ss("Block ID too large");var l=e%n,c=n-l,u=Math.floor(e/n),d=u+1,f=Math.floor(r/n),A=f+1,h=u-f,m=d-A;if(h!==m)throw new Ss("EC bytes mismatch");if(n!==c+l)throw new Ss("RS blocks mismatch");if(e!==(f+h)*c+(A+m)*l)throw new Ss("Total bytes mismatch");a<c?(s[0]=f,o[0]=h):(s[0]=A,o[0]=m)},t.interleaveWithECBytes=function(e,r,n,a){var s,o,l,c;if(e.getSizeInBytes()!==n)throw new Ss("Number of bits and data bytes does not match");for(var u=0,d=0,f=0,A=new Array,h=0;h<a;++h){var m=new Int32Array(1),p=new Int32Array(1);t.getNumDataBytesAndNumECBytesForBlockID(r,n,a,h,m,p);var x=m[0],v=new Uint8Array(x);e.toBytes(8*u,v,0,x);var y=t.generateECBytes(v,p[0]);A.push(new u9e(v,y)),d=Math.max(d,x),f=Math.max(f,y.length),u+=m[0]}if(n!==u)throw new Ss("Data bytes does not match offset");for(var b=new Jo,h=0;h<d;++h)try{for(var w=(s=void 0,z$(A)),j=w.next();!j.done;j=w.next()){var I=j.value,v=I.getDataBytes();h<v.length&&b.appendBits(v[h],8)}}catch(T){s={error:T}}finally{try{j&&!j.done&&(o=w.return)&&o.call(w)}finally{if(s)throw s.error}}for(var h=0;h<f;++h)try{for(var _=(l=void 0,z$(A)),S=_.next();!S.done;S=_.next()){var I=S.value,y=I.getErrorCorrectionBytes();h<y.length&&b.appendBits(y[h],8)}}catch(T){l={error:T}}finally{try{S&&!S.done&&(c=_.return)&&c.call(_)}finally{if(l)throw l.error}}if(r!==b.getSizeInBytes())throw new Ss("Interleaving error: "+r+" and "+b.getSizeInBytes()+" differ.");return b},t.generateECBytes=function(e,r){for(var n=e.length,a=new Int32Array(n+r),s=0;s<n;s++)a[s]=e[s]&255;new jse(Jc.QR_CODE_FIELD_256).encode(a,r);for(var o=new Uint8Array(r),s=0;s<r;s++)o[s]=a[n+s];return o},t.appendModeInfo=function(e,r){r.appendBits(e.getBits(),4)},t.appendLengthInfo=function(e,r,n,a){var s=n.getCharacterCountBits(r);if(e>=1<<s)throw new Ss(e+" is bigger than "+((1<<s)-1));a.appendBits(e,s)},t.appendBytes=function(e,r,n,a){switch(r){case Is.NUMERIC:t.appendNumericBytes(e,n);break;case Is.ALPHANUMERIC:t.appendAlphanumericBytes(e,n);break;case Is.BYTE:t.append8BitBytes(e,n,a);break;case Is.KANJI:t.appendKanjiBytes(e,n);break;default:throw new Ss("Invalid mode: "+r)}},t.getDigit=function(e){return e.charCodeAt(0)-48},t.isDigit=function(e){var r=t.getDigit(e);return r>=0&&r<=9},t.appendNumericBytes=function(e,r){for(var n=e.length,a=0;a<n;){var s=t.getDigit(e.charAt(a));if(a+2<n){var o=t.getDigit(e.charAt(a+1)),l=t.getDigit(e.charAt(a+2));r.appendBits(s*100+o*10+l,10),a+=3}else if(a+1<n){var o=t.getDigit(e.charAt(a+1));r.appendBits(s*10+o,7),a+=2}else r.appendBits(s,4),a++}},t.appendAlphanumericBytes=function(e,r){for(var n=e.length,a=0;a<n;){var s=t.getAlphanumericCode(e.charCodeAt(a));if(s===-1)throw new Ss;if(a+1<n){var o=t.getAlphanumericCode(e.charCodeAt(a+1));if(o===-1)throw new Ss;r.appendBits(s*45+o,11),a+=2}else r.appendBits(s,6),a++}},t.append8BitBytes=function(e,r,n){var a;try{a=Bd.encode(e,n)}catch(c){throw new Ss(c)}for(var s=0,o=a.length;s!==o;s++){var l=a[s];r.appendBits(l,8)}},t.appendKanjiBytes=function(e,r){var n;try{n=Bd.encode(e,Eo.SJIS)}catch(f){throw new Ss(f)}for(var a=n.length,s=0;s<a;s+=2){var o=n[s]&255,l=n[s+1]&255,c=o<<8&4294967295|l,u=-1;if(c>=33088&&c<=40956?u=c-33088:c>=57408&&c<=60351&&(u=c-49472),u===-1)throw new Ss("Invalid byte sequence");var d=(u>>8)*192+(u&255);r.appendBits(d,13)}},t.appendECI=function(e,r){r.appendBits(Is.ECI.getBits(),4),r.appendBits(e.getValue(),8)},t.ALPHANUMERIC_TABLE=Int32Array.from([-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,36,-1,-1,-1,37,38,-1,-1,-1,-1,39,40,-1,41,42,43,0,1,2,3,4,5,6,7,8,9,44,-1,-1,-1,-1,-1,-1,10,11,12,13,14,15,16,17,18,19,20,21,22,23,24,25,26,27,28,29,30,31,32,33,34,35,-1,-1,-1,-1,-1]),t.DEFAULT_BYTE_MODE_ENCODING=Eo.UTF8.getName(),t})();var d9e=function(){var t=function(e,r){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,a){n.__proto__=a}||function(n,a){for(var s in a)a.hasOwnProperty(s)&&(n[s]=a[s])},t(e,r)};return function(e,r){t(e,r);function n(){this.constructor=e}e.prototype=r===null?Object.create(r):(n.prototype=r.prototype,new n)}}();(function(t){d9e(e,t);function e(r,n,a,s,o,l,c,u){var d=t.call(this,l,c)||this;if(d.yuvData=r,d.dataWidth=n,d.dataHeight=a,d.left=s,d.top=o,s+l>n||o+c>a)throw new Pn("Crop rectangle does not fit within image data.");return u&&d.reverseHorizontal(l,c),d}return e.prototype.getRow=function(r,n){if(r<0||r>=this.getHeight())throw new Pn("Requested row is outside the image: "+r);var a=this.getWidth();(n==null||n.length<a)&&(n=new Uint8ClampedArray(a));var s=(r+this.top)*this.dataWidth+this.left;return ws.arraycopy(this.yuvData,s,n,0,a),n},e.prototype.getMatrix=function(){var r=this.getWidth(),n=this.getHeight();if(r===this.dataWidth&&n===this.dataHeight)return this.yuvData;var a=r*n,s=new Uint8ClampedArray(a),o=this.top*this.dataWidth+this.left;if(r===this.dataWidth)return ws.arraycopy(this.yuvData,o,s,0,a),s;for(var l=0;l<n;l++){var c=l*r;ws.arraycopy(this.yuvData,o,s,c,r),o+=this.dataWidth}return s},e.prototype.isCropSupported=function(){return!0},e.prototype.crop=function(r,n,a,s){return new e(this.yuvData,this.dataWidth,this.dataHeight,this.left+r,this.top+n,a,s,!1)},e.prototype.renderThumbnail=function(){for(var r=this.getWidth()/e.THUMBNAIL_SCALE_FACTOR,n=this.getHeight()/e.THUMBNAIL_SCALE_FACTOR,a=new Int32Array(r*n),s=this.yuvData,o=this.top*this.dataWidth+this.left,l=0;l<n;l++){for(var c=l*r,u=0;u<r;u++){var d=s[o+u*e.THUMBNAIL_SCALE_FACTOR]&255;a[c+u]=4278190080|d*65793}o+=this.dataWidth*e.THUMBNAIL_SCALE_FACTOR}return a},e.prototype.getThumbnailWidth=function(){return this.getWidth()/e.THUMBNAIL_SCALE_FACTOR},e.prototype.getThumbnailHeight=function(){return this.getHeight()/e.THUMBNAIL_SCALE_FACTOR},e.prototype.reverseHorizontal=function(r,n){for(var a=this.yuvData,s=0,o=this.top*this.dataWidth+this.left;s<n;s++,o+=this.dataWidth)for(var l=o+r/2,c=o,u=o+r-1;c<l;c++,u--){var d=a[c];a[c]=a[u],a[u]=d}},e.prototype.invert=function(){return new gP(this)},e.THUMBNAIL_SCALE_FACTOR=2,e})(Gw);var f9e=function(){var t=function(e,r){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,a){n.__proto__=a}||function(n,a){for(var s in a)a.hasOwnProperty(s)&&(n[s]=a[s])},t(e,r)};return function(e,r){t(e,r);function n(){this.constructor=e}e.prototype=r===null?Object.create(r):(n.prototype=r.prototype,new n)}}();(function(t){f9e(e,t);function e(r,n,a,s,o,l,c){var u=t.call(this,n,a)||this;if(u.dataWidth=s,u.dataHeight=o,u.left=l,u.top=c,r.BYTES_PER_ELEMENT===4){for(var d=n*a,f=new Uint8ClampedArray(d),A=0;A<d;A++){var h=r[A],m=h>>16&255,p=h>>7&510,x=h&255;f[A]=(m+p+x)/4&255}u.luminances=f}else u.luminances=r;if(s===void 0&&(u.dataWidth=n),o===void 0&&(u.dataHeight=a),l===void 0&&(u.left=0),c===void 0&&(u.top=0),u.left+n>u.dataWidth||u.top+a>u.dataHeight)throw new Pn("Crop rectangle does not fit within image data.");return u}return e.prototype.getRow=function(r,n){if(r<0||r>=this.getHeight())throw new Pn("Requested row is outside the image: "+r);var a=this.getWidth();(n==null||n.length<a)&&(n=new Uint8ClampedArray(a));var s=(r+this.top)*this.dataWidth+this.left;return ws.arraycopy(this.luminances,s,n,0,a),n},e.prototype.getMatrix=function(){var r=this.getWidth(),n=this.getHeight();if(r===this.dataWidth&&n===this.dataHeight)return this.luminances;var a=r*n,s=new Uint8ClampedArray(a),o=this.top*this.dataWidth+this.left;if(r===this.dataWidth)return ws.arraycopy(this.luminances,o,s,0,a),s;for(var l=0;l<n;l++){var c=l*r;ws.arraycopy(this.luminances,o,s,c,r),o+=this.dataWidth}return s},e.prototype.isCropSupported=function(){return!0},e.prototype.crop=function(r,n,a,s){return new e(this.luminances,a,s,this.dataWidth,this.dataHeight,this.left+r,this.top+n)},e.prototype.invert=function(){return new gP(this)},e})(Gw);var h9e=function(){var t=function(e,r){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,a){n.__proto__=a}||function(n,a){for(var s in a)a.hasOwnProperty(s)&&(n[s]=a[s])},t(e,r)};return function(e,r){t(e,r);function n(){this.constructor=e}e.prototype=r===null?Object.create(r):(n.prototype=r.prototype,new n)}}(),A9e=function(t){h9e(e,t);function e(){return t!==null&&t.apply(this,arguments)||this}return e.forName=function(r){return this.getCharacterSetECIByName(r)},e}(Eo),m9e=function(){function t(){}return t.ISO_8859_1=Eo.ISO8859_1,t}(),mF,p9e=301,g9e=function(t,e){for(var r=1,n=0;n<255;n++)e[n]=r,t[r]=n,r*=2,r>=256&&(r^=p9e);return{LOG:t,ALOG:e}};mF=g9e([],[]),mF.LOG;mF.ALOG;var W$;(function(t){t[t.FORCE_NONE=0]="FORCE_NONE",t[t.FORCE_SQUARE=1]="FORCE_SQUARE",t[t.FORCE_RECTANGLE=2]="FORCE_RECTANGLE"})(W$||(W$={}));var X$=129,Pse=230,x9e=231,v9e=235,y9e=236,b9e=237,w9e=238,N9e=239,C9e=240,K5=254,_9e=254,Y$="[)>05",J$="[)>06",Z$="",Wa=0,gl=1,gc=2,xo=3,$o=4,zl=5,E9e=function(){function t(){}return t.prototype.getEncodingMode=function(){return Wa},t.prototype.encode=function(e){var r=lf.determineConsecutiveDigitCount(e.getMessage(),e.pos);if(r>=2)e.writeCodeword(this.encodeASCIIDigits(e.getMessage().charCodeAt(e.pos),e.getMessage().charCodeAt(e.pos+1))),e.pos+=2;else{var n=e.getCurrentChar(),a=lf.lookAheadTest(e.getMessage(),e.pos,this.getEncodingMode());if(a!==this.getEncodingMode())switch(a){case zl:e.writeCodeword(x9e),e.signalEncoderChange(zl);return;case gl:e.writeCodeword(Pse),e.signalEncoderChange(gl);return;case xo:e.writeCodeword(w9e),e.signalEncoderChange(xo);break;case gc:e.writeCodeword(N9e),e.signalEncoderChange(gc);break;case $o:e.writeCodeword(C9e),e.signalEncoderChange($o);break;default:throw new Error("Illegal mode: "+a)}else lf.isExtendedASCII(n)?(e.writeCodeword(v9e),e.writeCodeword(n-128+1),e.pos++):(e.writeCodeword(n+1),e.pos++)}},t.prototype.encodeASCIIDigits=function(e,r){if(lf.isDigit(e)&&lf.isDigit(r)){var n=(e-48)*10+(r-48);return n+130}throw new Error("not digits: "+e+r)},t}(),S9e=function(){function t(){}return t.prototype.getEncodingMode=function(){return zl},t.prototype.encode=function(e){var r=new Zn;for(r.append(0);e.hasMoreCharacters();){var n=e.getCurrentChar();r.append(n),e.pos++;var a=lf.lookAheadTest(e.getMessage(),e.pos,this.getEncodingMode());if(a!==this.getEncodingMode()){e.signalEncoderChange(Wa);break}}var s=r.length()-1,o=1,l=e.getCodewordCount()+s+o;e.updateSymbolInfo(l);var c=e.getSymbolInfo().getDataCapacity()-l>0;if(e.hasMoreCharacters()||c)if(s<=249)r.setCharAt(0,ba.getCharAt(s));else if(s<=1555)r.setCharAt(0,ba.getCharAt(Math.floor(s/250)+249)),r.insert(1,ba.getCharAt(s%250));else throw new Error("Message length not in valid ranges: "+s);for(var u=0,n=r.length();u<n;u++)e.writeCodeword(this.randomize255State(r.charAt(u).charCodeAt(0),e.getCodewordCount()+1))},t.prototype.randomize255State=function(e,r){var n=149*r%255+1,a=e+n;return a<=255?a:a-256},t}(),LR=function(){function t(){}return t.prototype.getEncodingMode=function(){return gl},t.prototype.encodeMaximal=function(e){for(var r=new Zn,n=0,a=e.pos,s=0;e.hasMoreCharacters();){var o=e.getCurrentChar();e.pos++,n=this.encodeChar(o,r),r.length()%3===0&&(a=e.pos,s=r.length())}if(s!==r.length()){var l=Math.floor(r.length()/3*2),c=Math.floor(e.getCodewordCount()+l+1);e.updateSymbolInfo(c);var u=e.getSymbolInfo().getDataCapacity()-c,d=Math.floor(r.length()%3);(d===2&&u!==2||d===1&&(n>3||u!==1))&&(e.pos=a)}r.length()>0&&e.writeCodeword(Pse),this.handleEOD(e,r)},t.prototype.encode=function(e){for(var r=new Zn;e.hasMoreCharacters();){var n=e.getCurrentChar();e.pos++;var a=this.encodeChar(n,r),s=Math.floor(r.length()/3)*2,o=e.getCodewordCount()+s;e.updateSymbolInfo(o);var l=e.getSymbolInfo().getDataCapacity()-o;if(!e.hasMoreCharacters()){var c=new Zn;for(r.length()%3===2&&l!==2&&(a=this.backtrackOneCharacter(e,r,c,a));r.length()%3===1&&(a>3||l!==1);)a=this.backtrackOneCharacter(e,r,c,a);break}var u=r.length();if(u%3===0){var d=lf.lookAheadTest(e.getMessage(),e.pos,this.getEncodingMode());if(d!==this.getEncodingMode()){e.signalEncoderChange(Wa);break}}}this.handleEOD(e,r)},t.prototype.backtrackOneCharacter=function(e,r,n,a){var s=r.length(),o=r.toString().substring(0,s-a);r.setLengthToZero(),r.append(o),e.pos--;var l=e.getCurrentChar();return a=this.encodeChar(l,n),e.resetSymbolInfo(),a},t.prototype.writeNextTriplet=function(e,r){e.writeCodewords(this.encodeToCodewords(r.toString()));var n=r.toString().substring(3);r.setLengthToZero(),r.append(n)},t.prototype.handleEOD=function(e,r){var n=Math.floor(r.length()/3*2),a=r.length()%3,s=e.getCodewordCount()+n;e.updateSymbolInfo(s);var o=e.getSymbolInfo().getDataCapacity()-s;if(a===2){for(r.append("\0");r.length()>=3;)this.writeNextTriplet(e,r);e.hasMoreCharacters()&&e.writeCodeword(K5)}else if(o===1&&a===1){for(;r.length()>=3;)this.writeNextTriplet(e,r);e.hasMoreCharacters()&&e.writeCodeword(K5),e.pos--}else if(a===0){for(;r.length()>=3;)this.writeNextTriplet(e,r);(o>0||e.hasMoreCharacters())&&e.writeCodeword(K5)}else throw new Error("Unexpected case. Please report!");e.signalEncoderChange(Wa)},t.prototype.encodeChar=function(e,r){if(e===32)return r.append(3),1;if(e>=48&&e<=57)return r.append(e-48+4),1;if(e>=65&&e<=90)return r.append(e-65+14),1;if(e<32)return r.append(0),r.append(e),2;if(e<=47)return r.append(1),r.append(e-33),2;if(e<=64)return r.append(1),r.append(e-58+15),2;if(e<=95)return r.append(1),r.append(e-91+22),2;if(e<=127)return r.append(2),r.append(e-96),2;r.append("1");var n=2;return n+=this.encodeChar(e-128,r),n},t.prototype.encodeToCodewords=function(e){var r=1600*e.charCodeAt(0)+40*e.charCodeAt(1)+e.charCodeAt(2)+1,n=r/256,a=r%256,s=new Zn;return s.append(n),s.append(a),s.toString()},t}(),I9e=function(){function t(){}return t.prototype.getEncodingMode=function(){return $o},t.prototype.encode=function(e){for(var r=new Zn;e.hasMoreCharacters();){var n=e.getCurrentChar();this.encodeChar(n,r),e.pos++;var a=r.length();if(a>=4){e.writeCodewords(this.encodeToCodewords(r.toString()));var s=r.toString().substring(4);r.setLengthToZero(),r.append(s);var o=lf.lookAheadTest(e.getMessage(),e.pos,this.getEncodingMode());if(o!==this.getEncodingMode()){e.signalEncoderChange(Wa);break}}}r.append(ba.getCharAt(31)),this.handleEOD(e,r)},t.prototype.handleEOD=function(e,r){try{var n=r.length();if(n===0)return;if(n===1){e.updateSymbolInfo();var a=e.getSymbolInfo().getDataCapacity()-e.getCodewordCount(),s=e.getRemainingCharacters();if(s>a&&(e.updateSymbolInfo(e.getCodewordCount()+1),a=e.getSymbolInfo().getDataCapacity()-e.getCodewordCount()),s<=a&&a<=2)return}if(n>4)throw new Error("Count must not exceed 4");var o=n-1,l=this.encodeToCodewords(r.toString()),c=!e.hasMoreCharacters(),u=c&&o<=2;if(o<=2){e.updateSymbolInfo(e.getCodewordCount()+o);var a=e.getSymbolInfo().getDataCapacity()-e.getCodewordCount();a>=3&&(u=!1,e.updateSymbolInfo(e.getCodewordCount()+l.length))}u?(e.resetSymbolInfo(),e.pos-=o):e.writeCodewords(l)}finally{e.signalEncoderChange(Wa)}},t.prototype.encodeChar=function(e,r){e>=32&&e<=63?r.append(e):e>=64&&e<=94?r.append(ba.getCharAt(e-64)):lf.illegalCharacter(ba.getCharAt(e))},t.prototype.encodeToCodewords=function(e){var r=e.length;if(r===0)throw new Error("StringBuilder must not be empty");var n=e.charAt(0).charCodeAt(0),a=r>=2?e.charAt(1).charCodeAt(0):0,s=r>=3?e.charAt(2).charCodeAt(0):0,o=r>=4?e.charAt(3).charCodeAt(0):0,l=(n<<18)+(a<<12)+(s<<6)+o,c=l>>16&255,u=l>>8&255,d=l&255,f=new Zn;return f.append(c),r>=2&&f.append(u),r>=3&&f.append(d),f.toString()},t}(),j9e=function(){var t=function(e,r){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,a){n.__proto__=a}||function(n,a){for(var s in a)a.hasOwnProperty(s)&&(n[s]=a[s])},t(e,r)};return function(e,r){t(e,r);function n(){this.constructor=e}e.prototype=r===null?Object.create(r):(n.prototype=r.prototype,new n)}}(),P9e=function(t){var e=typeof Symbol=="function"&&Symbol.iterator,r=e&&t[e],n=0;if(r)return r.call(t);if(t&&typeof t.length=="number")return{next:function(){return t&&n>=t.length&&(t=void 0),{value:t&&t[n++],done:!t}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")},Da=function(){function t(e,r,n,a,s,o,l,c){l===void 0&&(l=0),c===void 0&&(c=0),this.rectangular=e,this.dataCapacity=r,this.errorCodewords=n,this.matrixWidth=a,this.matrixHeight=s,this.dataRegions=o,this.rsBlockData=l,this.rsBlockError=c}return t.lookup=function(e,r,n,a,s){var o,l;r===void 0&&(r=0),n===void 0&&(n=null),a===void 0&&(a=null),s===void 0&&(s=!0);try{for(var c=P9e(T9e),u=c.next();!u.done;u=c.next()){var d=u.value;if(!(r===1&&d.rectangular)&&!(r===2&&!d.rectangular)&&!(n!=null&&(d.getSymbolWidth()<n.getWidth()||d.getSymbolHeight()<n.getHeight()))&&!(a!=null&&(d.getSymbolWidth()>a.getWidth()||d.getSymbolHeight()>a.getHeight()))&&e<=d.dataCapacity)return d}}catch(f){o={error:f}}finally{try{u&&!u.done&&(l=c.return)&&l.call(c)}finally{if(o)throw o.error}}if(s)throw new Error("Can't find a symbol arrangement that matches the message. Data codewords: "+e);return null},t.prototype.getHorizontalDataRegions=function(){switch(this.dataRegions){case 1:return 1;case 2:case 4:return 2;case 16:return 4;case 36:return 6;default:throw new Error("Cannot handle this number of data regions")}},t.prototype.getVerticalDataRegions=function(){switch(this.dataRegions){case 1:case 2:return 1;case 4:return 2;case 16:return 4;case 36:return 6;default:throw new Error("Cannot handle this number of data regions")}},t.prototype.getSymbolDataWidth=function(){return this.getHorizontalDataRegions()*this.matrixWidth},t.prototype.getSymbolDataHeight=function(){return this.getVerticalDataRegions()*this.matrixHeight},t.prototype.getSymbolWidth=function(){return this.getSymbolDataWidth()+this.getHorizontalDataRegions()*2},t.prototype.getSymbolHeight=function(){return this.getSymbolDataHeight()+this.getVerticalDataRegions()*2},t.prototype.getCodewordCount=function(){return this.dataCapacity+this.errorCodewords},t.prototype.getInterleavedBlockCount=function(){return this.rsBlockData?this.dataCapacity/this.rsBlockData:1},t.prototype.getDataCapacity=function(){return this.dataCapacity},t.prototype.getErrorCodewords=function(){return this.errorCodewords},t.prototype.getDataLengthForInterleavedBlock=function(e){return this.rsBlockData},t.prototype.getErrorLengthForInterleavedBlock=function(e){return this.rsBlockError},t}(),B9e=function(t){j9e(e,t);function e(){return t.call(this,!1,1558,620,22,22,36,-1,62)||this}return e.prototype.getInterleavedBlockCount=function(){return 10},e.prototype.getDataLengthForInterleavedBlock=function(r){return r<=8?156:155},e}(Da),T9e=[new Da(!1,3,5,8,8,1),new Da(!1,5,7,10,10,1),new Da(!0,5,7,16,6,1),new Da(!1,8,10,12,12,1),new Da(!0,10,11,14,6,2),new Da(!1,12,12,14,14,1),new Da(!0,16,14,24,10,1),new Da(!1,18,14,16,16,1),new Da(!1,22,18,18,18,1),new Da(!0,22,18,16,10,2),new Da(!1,30,20,20,20,1),new Da(!0,32,24,16,14,2),new Da(!1,36,24,22,22,1),new Da(!1,44,28,24,24,1),new Da(!0,49,28,22,14,2),new Da(!1,62,36,14,14,4),new Da(!1,86,42,16,16,4),new Da(!1,114,48,18,18,4),new Da(!1,144,56,20,20,4),new Da(!1,174,68,22,22,4),new Da(!1,204,84,24,24,4,102,42),new Da(!1,280,112,14,14,16,140,56),new Da(!1,368,144,16,16,16,92,36),new Da(!1,456,192,18,18,16,114,48),new Da(!1,576,224,20,20,16,144,56),new Da(!1,696,272,22,22,16,174,68),new Da(!1,816,336,24,24,16,136,56),new Da(!1,1050,408,18,18,36,175,68),new Da(!1,1304,496,20,20,36,163,62),new B9e],k9e=function(){function t(e){this.msg=e,this.pos=0,this.skipAtEnd=0;for(var r=e.split("").map(function(l){return l.charCodeAt(0)}),n=new Zn,a=0,s=r.length;a<s;a++){var o=String.fromCharCode(r[a]&255);if(o==="?"&&e.charAt(a)!=="?")throw new Error("Message contains characters outside ISO-8859-1 encoding.");n.append(o)}this.msg=n.toString(),this.shape=0,this.codewords=new Zn,this.newEncoding=-1}return t.prototype.setSymbolShape=function(e){this.shape=e},t.prototype.setSizeConstraints=function(e,r){this.minSize=e,this.maxSize=r},t.prototype.getMessage=function(){return this.msg},t.prototype.setSkipAtEnd=function(e){this.skipAtEnd=e},t.prototype.getCurrentChar=function(){return this.msg.charCodeAt(this.pos)},t.prototype.getCurrent=function(){return this.msg.charCodeAt(this.pos)},t.prototype.getCodewords=function(){return this.codewords},t.prototype.writeCodewords=function(e){this.codewords.append(e)},t.prototype.writeCodeword=function(e){this.codewords.append(e)},t.prototype.getCodewordCount=function(){return this.codewords.length()},t.prototype.getNewEncoding=function(){return this.newEncoding},t.prototype.signalEncoderChange=function(e){this.newEncoding=e},t.prototype.resetEncoderSignal=function(){this.newEncoding=-1},t.prototype.hasMoreCharacters=function(){return this.pos<this.getTotalMessageCharCount()},t.prototype.getTotalMessageCharCount=function(){return this.msg.length-this.skipAtEnd},t.prototype.getRemainingCharacters=function(){return this.getTotalMessageCharCount()-this.pos},t.prototype.getSymbolInfo=function(){return this.symbolInfo},t.prototype.updateSymbolInfo=function(e){e===void 0&&(e=this.getCodewordCount()),(this.symbolInfo==null||e>this.symbolInfo.getDataCapacity())&&(this.symbolInfo=Da.lookup(e,this.shape,this.minSize,this.maxSize,!0))},t.prototype.resetSymbolInfo=function(){this.symbolInfo=null},t}(),F9e=function(){var t=function(e,r){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,a){n.__proto__=a}||function(n,a){for(var s in a)a.hasOwnProperty(s)&&(n[s]=a[s])},t(e,r)};return function(e,r){t(e,r);function n(){this.constructor=e}e.prototype=r===null?Object.create(r):(n.prototype=r.prototype,new n)}}(),O9e=function(t){F9e(e,t);function e(){return t!==null&&t.apply(this,arguments)||this}return e.prototype.getEncodingMode=function(){return xo},e.prototype.encode=function(r){for(var n=new Zn;r.hasMoreCharacters();){var a=r.getCurrentChar();r.pos++,this.encodeChar(a,n);var s=n.length();if(s%3===0){this.writeNextTriplet(r,n);var o=lf.lookAheadTest(r.getMessage(),r.pos,this.getEncodingMode());if(o!==this.getEncodingMode()){r.signalEncoderChange(Wa);break}}}this.handleEOD(r,n)},e.prototype.encodeChar=function(r,n){switch(r){case 13:n.append(0);break;case 42:n.append(1);break;case 62:n.append(2);break;case 32:n.append(3);break;default:r>=48&&r<=57?n.append(r-48+4):r>=65&&r<=90?n.append(r-65+14):lf.illegalCharacter(ba.getCharAt(r));break}return 1},e.prototype.handleEOD=function(r,n){r.updateSymbolInfo();var a=r.getSymbolInfo().getDataCapacity()-r.getCodewordCount(),s=n.length();r.pos-=s,(r.getRemainingCharacters()>1||a>1||r.getRemainingCharacters()!==a)&&r.writeCodeword(_9e),r.getNewEncoding()<0&&r.signalEncoderChange(Wa)},e}(LR),D9e=function(){var t=function(e,r){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,a){n.__proto__=a}||function(n,a){for(var s in a)a.hasOwnProperty(s)&&(n[s]=a[s])},t(e,r)};return function(e,r){t(e,r);function n(){this.constructor=e}e.prototype=r===null?Object.create(r):(n.prototype=r.prototype,new n)}}(),R9e=function(t){D9e(e,t);function e(){return t!==null&&t.apply(this,arguments)||this}return e.prototype.getEncodingMode=function(){return gc},e.prototype.encodeChar=function(r,n){if(r===32)return n.append(3),1;if(r>=48&&r<=57)return n.append(r-48+4),1;if(r>=97&&r<=122)return n.append(r-97+14),1;if(r<32)return n.append(0),n.append(r),2;if(r<=47)return n.append(1),n.append(r-33),2;if(r<=64)return n.append(1),n.append(r-58+15),2;if(r>=91&&r<=95)return n.append(1),n.append(r-91+22),2;if(r===96)return n.append(2),n.append(0),2;if(r<=90)return n.append(2),n.append(r-65+1),2;if(r<=127)return n.append(2),n.append(r-123+27),2;n.append("1");var a=2;return a+=this.encodeChar(r-128,n),a},e}(LR),lf=function(){function t(){}return t.randomize253State=function(e){var r=149*e%253+1,n=X$+r;return n<=254?n:n-254},t.encodeHighLevel=function(e,r,n,a,s){r===void 0&&(r=0),n===void 0&&(n=null),a===void 0&&(a=null),s===void 0&&(s=!1);var o=new LR,l=[new E9e,o,new R9e,new O9e,new I9e,new S9e],c=new k9e(e);c.setSymbolShape(r),c.setSizeConstraints(n,a),e.startsWith(Y$)&&e.endsWith(Z$)?(c.writeCodeword(y9e),c.setSkipAtEnd(2),c.pos+=Y$.length):e.startsWith(J$)&&e.endsWith(Z$)&&(c.writeCodeword(b9e),c.setSkipAtEnd(2),c.pos+=J$.length);var u=Wa;for(s&&(o.encodeMaximal(c),u=c.getNewEncoding(),c.resetEncoderSignal());c.hasMoreCharacters();)l[u].encode(c),c.getNewEncoding()>=0&&(u=c.getNewEncoding(),c.resetEncoderSignal());var d=c.getCodewordCount();c.updateSymbolInfo();var f=c.getSymbolInfo().getDataCapacity();d<f&&u!==Wa&&u!==zl&&u!==$o&&c.writeCodeword("");var A=c.getCodewords();for(A.length()<f&&A.append(X$);A.length()<f;)A.append(this.randomize253State(A.length()+1));return c.getCodewords().toString()},t.lookAheadTest=function(e,r,n){var a=this.lookAheadTestIntern(e,r,n);if(n===xo&&a===xo){for(var s=Math.min(r+3,e.length),o=r;o<s;o++)if(!this.isNativeX12(e.charCodeAt(o)))return Wa}else if(n===$o&&a===$o){for(var s=Math.min(r+4,e.length),o=r;o<s;o++)if(!this.isNativeEDIFACT(e.charCodeAt(o)))return Wa}return a},t.lookAheadTestIntern=function(e,r,n){if(r>=e.length)return n;var a;n===Wa?a=[0,1,1,1,1,1.25]:(a=[1,2,2,2,2,2.25],a[n]=0);for(var s=0,o=new Uint8Array(6),l=[];;){if(r+s===e.length){Io.fill(o,0),Io.fill(l,0);var c=this.findMinimums(a,l,sa.MAX_VALUE,o),u=this.getMinimumCount(o);if(l[Wa]===c)return Wa;if(u===1){if(o[zl]>0)return zl;if(o[$o]>0)return $o;if(o[gc]>0)return gc;if(o[xo]>0)return xo}return gl}var d=e.charCodeAt(r+s);if(s++,this.isDigit(d)?a[Wa]+=.5:this.isExtendedASCII(d)?(a[Wa]=Math.ceil(a[Wa]),a[Wa]+=2):(a[Wa]=Math.ceil(a[Wa]),a[Wa]++),this.isNativeC40(d)?a[gl]+=2/3:this.isExtendedASCII(d)?a[gl]+=8/3:a[gl]+=4/3,this.isNativeText(d)?a[gc]+=2/3:this.isExtendedASCII(d)?a[gc]+=8/3:a[gc]+=4/3,this.isNativeX12(d)?a[xo]+=2/3:this.isExtendedASCII(d)?a[xo]+=13/3:a[xo]+=10/3,this.isNativeEDIFACT(d)?a[$o]+=3/4:this.isExtendedASCII(d)?a[$o]+=17/4:a[$o]+=13/4,this.isSpecialB256(d)?a[zl]+=4:a[zl]++,s>=4){if(Io.fill(o,0),Io.fill(l,0),this.findMinimums(a,l,sa.MAX_VALUE,o),l[Wa]<this.min(l[zl],l[gl],l[gc],l[xo],l[$o]))return Wa;if(l[zl]<l[Wa]||l[zl]+1<this.min(l[gl],l[gc],l[xo],l[$o]))return zl;if(l[$o]+1<this.min(l[zl],l[gl],l[gc],l[xo],l[Wa]))return $o;if(l[gc]+1<this.min(l[zl],l[gl],l[$o],l[xo],l[Wa]))return gc;if(l[xo]+1<this.min(l[zl],l[gl],l[$o],l[gc],l[Wa]))return xo;if(l[gl]+1<this.min(l[Wa],l[zl],l[$o],l[gc])){if(l[gl]<l[xo])return gl;if(l[gl]===l[xo]){for(var f=r+s+1;f<e.length;){var A=e.charCodeAt(f);if(this.isX12TermSep(A))return xo;if(!this.isNativeX12(A))break;f++}return gl}}}}},t.min=function(e,r,n,a,s){var o=Math.min(e,Math.min(r,Math.min(n,a)));return s===void 0?o:Math.min(o,s)},t.findMinimums=function(e,r,n,a){for(var s=0;s<6;s++){var o=r[s]=Math.ceil(e[s]);n>o&&(n=o,Io.fill(a,0)),n===o&&(a[s]=a[s]+1)}return n},t.getMinimumCount=function(e){for(var r=0,n=0;n<6;n++)r+=e[n];return r||0},t.isDigit=function(e){return e>=48&&e<=57},t.isExtendedASCII=function(e){return e>=128&&e<=255},t.isNativeC40=function(e){return e===32||e>=48&&e<=57||e>=65&&e<=90},t.isNativeText=function(e){return e===32||e>=48&&e<=57||e>=97&&e<=122},t.isNativeX12=function(e){return this.isX12TermSep(e)||e===32||e>=48&&e<=57||e>=65&&e<=90},t.isX12TermSep=function(e){return e===13||e===42||e===62},t.isNativeEDIFACT=function(e){return e>=32&&e<=94},t.isSpecialB256=function(e){return!1},t.determineConsecutiveDigitCount=function(e,r){r===void 0&&(r=0);for(var n=e.length,a=r;a<n&&this.isDigit(e.charCodeAt(a));)a++;return a-r},t.illegalCharacter=function(e){var r=sa.toHexString(e.charCodeAt(0));throw r="0000".substring(0,4-r.length)+r,new Error("Illegal character: "+e+" (0x"+r+")")},t}(),q5=function(t){var e=typeof Symbol=="function"&&Symbol.iterator,r=e&&t[e],n=0;if(r)return r.call(t);if(t&&typeof t.length=="number")return{next:function(){return t&&n>=t.length&&(t=void 0),{value:t&&t[n++],done:!t}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")},eG=function(){function t(e){this.charset=e,this.name=e.name}return t.prototype.canEncode=function(e){try{return Bd.encode(e,this.charset)!=null}catch{return!1}},t}(),M9e=function(){function t(e,r,n){var a,s,o,l,c,u;this.ENCODERS=["IBM437","ISO-8859-2","ISO-8859-3","ISO-8859-4","ISO-8859-5","ISO-8859-6","ISO-8859-7","ISO-8859-8","ISO-8859-9","ISO-8859-10","ISO-8859-11","ISO-8859-13","ISO-8859-14","ISO-8859-15","ISO-8859-16","windows-1250","windows-1251","windows-1252","windows-1256","Shift_JIS"].map(function(E){return new eG(A9e.forName(E))}),this.encoders=[];var d=[];d.push(new eG(m9e.ISO_8859_1));for(var f=r!=null&&r.name.startsWith("UTF"),A=0;A<e.length;A++){var h=!1;try{for(var m=(a=void 0,q5(d)),p=m.next();!p.done;p=m.next()){var x=p.value,v=e.charAt(A),y=v.charCodeAt(0);if(y===n||x.canEncode(v)){h=!0;break}}}catch(E){a={error:E}}finally{try{p&&!p.done&&(s=m.return)&&s.call(m)}finally{if(a)throw a.error}}if(!h)try{for(var b=(o=void 0,q5(this.ENCODERS)),w=b.next();!w.done;w=b.next()){var x=w.value;if(x.canEncode(e.charAt(A))){d.push(x),h=!0;break}}}catch(E){o={error:E}}finally{try{w&&!w.done&&(l=b.return)&&l.call(b)}finally{if(o)throw o.error}}h||(f=!0)}if(d.length===1&&!f)this.encoders=[d[0]];else{this.encoders=[];var j=0;try{for(var I=q5(d),_=I.next();!_.done;_=I.next()){var x=_.value;this.encoders[j++]=x}}catch(E){c={error:E}}finally{try{_&&!_.done&&(u=I.return)&&u.call(I)}finally{if(c)throw c.error}}}var S=-1;if(r!=null){for(var A=0;A<this.encoders.length;A++)if(this.encoders[A]!=null&&r.name===this.encoders[A].name){S=A;break}}this.priorityEncoderIndex=S}return t.prototype.length=function(){return this.encoders.length},t.prototype.getCharsetName=function(e){if(!(e<this.length()))throw new Error("index must be less than length");return this.encoders[e].name},t.prototype.getCharset=function(e){if(!(e<this.length()))throw new Error("index must be less than length");return this.encoders[e].charset},t.prototype.getECIValue=function(e){return this.encoders[e].charset.getValueIdentifier()},t.prototype.getPriorityEncoderIndex=function(){return this.priorityEncoderIndex},t.prototype.canEncode=function(e,r){if(!(r<this.length()))throw new Error("index must be less than length");return!0},t.prototype.encode=function(e,r){if(!(r<this.length()))throw new Error("index must be less than length");return Bd.encode(ba.getCharAt(e),this.encoders[r].name)},t}(),L9e=3,U9e=function(){function t(e,r,n){this.fnc1=n;var a=new M9e(e,r,n);if(a.length()===1)for(var s=0;s<this.bytes.length;s++){var o=e.charAt(s).charCodeAt(0);this.bytes[s]=o===n?1e3:o}else this.bytes=this.encodeMinimally(e,a,n)}return t.prototype.getFNC1Character=function(){return this.fnc1},t.prototype.length=function(){return this.bytes.length},t.prototype.haveNCharacters=function(e,r){if(e+r-1>=this.bytes.length)return!1;for(var n=0;n<r;n++)if(this.isECI(e+n))return!1;return!0},t.prototype.charAt=function(e){if(e<0||e>=this.length())throw new Error(""+e);if(this.isECI(e))throw new Error("value at "+e+" is not a character but an ECI");return this.isFNC1(e)?this.fnc1:this.bytes[e]},t.prototype.subSequence=function(e,r){if(e<0||e>r||r>this.length())throw new Error(""+e);for(var n=new Zn,a=e;a<r;a++){if(this.isECI(a))throw new Error("value at "+a+" is not a character but an ECI");n.append(this.charAt(a))}return n.toString()},t.prototype.isECI=function(e){if(e<0||e>=this.length())throw new Error(""+e);return this.bytes[e]>255&&this.bytes[e]<=999},t.prototype.isFNC1=function(e){if(e<0||e>=this.length())throw new Error(""+e);return this.bytes[e]===1e3},t.prototype.getECIValue=function(e){if(e<0||e>=this.length())throw new Error(""+e);if(!this.isECI(e))throw new Error("value at "+e+" is not an ECI but a character");return this.bytes[e]-256},t.prototype.addEdge=function(e,r,n){(e[r][n.encoderIndex]==null||e[r][n.encoderIndex].cachedTotalSize>n.cachedTotalSize)&&(e[r][n.encoderIndex]=n)},t.prototype.addEdges=function(e,r,n,a,s,o){var l=e.charAt(a).charCodeAt(0),c=0,u=r.length();r.getPriorityEncoderIndex()>=0&&(l===o||r.canEncode(l,r.getPriorityEncoderIndex()))&&(c=r.getPriorityEncoderIndex(),u=c+1);for(var d=c;d<u;d++)(l===o||r.canEncode(l,d))&&this.addEdge(n,a+1,new tG(l,r,d,s,o))},t.prototype.encodeMinimally=function(e,r,n){var a=e.length,s=new tG[a+1][r.length()];this.addEdges(e,r,s,0,null,n);for(var o=1;o<=a;o++){for(var l=0;l<r.length();l++)s[o][l]!=null&&o<a&&this.addEdges(e,r,s,o,s[o][l],n);for(var l=0;l<r.length();l++)s[o-1][l]=null}for(var c=-1,u=sa.MAX_VALUE,l=0;l<r.length();l++)if(s[a][l]!=null){var d=s[a][l];d.cachedTotalSize<u&&(u=d.cachedTotalSize,c=l)}if(c<0)throw new Error('Failed to encode "'+e+'"');for(var f=[],A=s[a][c];A!=null;){if(A.isFNC1())f.unshift(1e3);else for(var h=r.encode(A.c,A.encoderIndex),o=h.length-1;o>=0;o--)f.unshift(h[o]&255);var m=A.previous===null?0:A.previous.encoderIndex;m!==A.encoderIndex&&f.unshift(256+r.getECIValue(A.encoderIndex)),A=A.previous}for(var p=[],o=0;o<p.length;o++)p[o]=f[o];return p},t}(),tG=function(){function t(e,r,n,a,s){this.c=e,this.encoderSet=r,this.encoderIndex=n,this.previous=a,this.fnc1=s,this.c=e===s?1e3:e;var o=this.isFNC1()?1:r.encode(e,n).length,l=a===null?0:a.encoderIndex;l!==n&&(o+=L9e),a!=null&&(o+=a.cachedTotalSize),this.cachedTotalSize=o}return t.prototype.isFNC1=function(){return this.c===1e3},t}(),Q9e=function(){var t=function(e,r){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,a){n.__proto__=a}||function(n,a){for(var s in a)a.hasOwnProperty(s)&&(n[s]=a[s])},t(e,r)};return function(e,r){t(e,r);function n(){this.constructor=e}e.prototype=r===null?Object.create(r):(n.prototype=r.prototype,new n)}}();var rG;(function(t){t[t.ASCII=0]="ASCII",t[t.C40=1]="C40",t[t.TEXT=2]="TEXT",t[t.X12=3]="X12",t[t.EDF=4]="EDF",t[t.B256=5]="B256"})(rG||(rG={}));(function(t){Q9e(e,t);function e(r,n,a,s,o){var l=t.call(this,r,n,a)||this;return l.shape=s,l.macroId=o,l}return e.prototype.getMacroId=function(){return this.macroId},e.prototype.getShapeHint=function(){return this.shape},e})(U9e);var V9e=function(){function t(){}return t.prototype.isCompact=function(){return this.compact},t.prototype.setCompact=function(e){this.compact=e},t.prototype.getSize=function(){return this.size},t.prototype.setSize=function(e){this.size=e},t.prototype.getLayers=function(){return this.layers},t.prototype.setLayers=function(e){this.layers=e},t.prototype.getCodeWords=function(){return this.codeWords},t.prototype.setCodeWords=function(e){this.codeWords=e},t.prototype.getMatrix=function(){return this.matrix},t.prototype.setMatrix=function(e){this.matrix=e},t}(),nG=function(){function t(){}return t.singletonList=function(e){return[e]},t.min=function(e,r){return e.sort(r)[0]},t}(),H9e=function(){function t(e){this.previous=e}return t.prototype.getPrevious=function(){return this.previous},t}(),$9e=function(){var t=function(e,r){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,a){n.__proto__=a}||function(n,a){for(var s in a)a.hasOwnProperty(s)&&(n[s]=a[s])},t(e,r)};return function(e,r){t(e,r);function n(){this.constructor=e}e.prototype=r===null?Object.create(r):(n.prototype=r.prototype,new n)}}(),UR=function(t){$9e(e,t);function e(r,n,a){var s=t.call(this,r)||this;return s.value=n,s.bitCount=a,s}return e.prototype.appendTo=function(r,n){r.appendBits(this.value,this.bitCount)},e.prototype.add=function(r,n){return new e(this,r,n)},e.prototype.addBinaryShift=function(r,n){return console.warn("addBinaryShift on SimpleToken, this simply returns a copy of this token"),new e(this,r,n)},e.prototype.toString=function(){var r=this.value&(1<<this.bitCount)-1;return r|=1<<this.bitCount,"<"+sa.toBinaryString(r|1<<this.bitCount).substring(1)+">"},e}(H9e),G9e=function(){var t=function(e,r){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,a){n.__proto__=a}||function(n,a){for(var s in a)a.hasOwnProperty(s)&&(n[s]=a[s])},t(e,r)};return function(e,r){t(e,r);function n(){this.constructor=e}e.prototype=r===null?Object.create(r):(n.prototype=r.prototype,new n)}}(),K9e=function(t){G9e(e,t);function e(r,n,a){var s=t.call(this,r,0,0)||this;return s.binaryShiftStart=n,s.binaryShiftByteCount=a,s}return e.prototype.appendTo=function(r,n){for(var a=0;a<this.binaryShiftByteCount;a++)(a===0||a===31&&this.binaryShiftByteCount<=62)&&(r.appendBits(31,5),this.binaryShiftByteCount>62?r.appendBits(this.binaryShiftByteCount-31,16):a===0?r.appendBits(Math.min(this.binaryShiftByteCount,31),5):r.appendBits(this.binaryShiftByteCount-31,5)),r.appendBits(n[this.binaryShiftStart+a],8)},e.prototype.addBinaryShift=function(r,n){return new e(this,r,n)},e.prototype.toString=function(){return"<"+this.binaryShiftStart+"::"+(this.binaryShiftStart+this.binaryShiftByteCount-1)+">"},e}(UR);function q9e(t,e,r){return new K9e(t,e,r)}function by(t,e,r){return new UR(t,e,r)}var z9e=["UPPER","LOWER","DIGIT","MIXED","PUNCT"],hm=0,aI=1,_d=2,Bse=3,Zf=4,W9e=new UR(null,0,0),z5=[Int32Array.from([0,(5<<16)+28,(5<<16)+30,(5<<16)+29,656318]),Int32Array.from([(9<<16)+480+14,0,(5<<16)+30,(5<<16)+29,656318]),Int32Array.from([(4<<16)+14,(9<<16)+448+28,0,(9<<16)+448+29,932798]),Int32Array.from([(5<<16)+29,(5<<16)+28,656318,0,(5<<16)+30]),Int32Array.from([(5<<16)+31,656380,656382,656381,0])],X9e=function(t){var e=typeof Symbol=="function"&&Symbol.iterator,r=e&&t[e],n=0;if(r)return r.call(t);if(t&&typeof t.length=="number")return{next:function(){return t&&n>=t.length&&(t=void 0),{value:t&&t[n++],done:!t}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")};function Y9e(t){var e,r;try{for(var n=X9e(t),a=n.next();!a.done;a=n.next()){var s=a.value;Io.fill(s,-1)}}catch(o){e={error:o}}finally{try{a&&!a.done&&(r=n.return)&&r.call(n)}finally{if(e)throw e.error}}return t[hm][Zf]=0,t[aI][Zf]=0,t[aI][hm]=28,t[Bse][Zf]=0,t[_d][Zf]=0,t[_d][hm]=15,t}var Tse=Y9e(Io.createInt32Array(6,6)),J9e=function(t){var e=typeof Symbol=="function"&&Symbol.iterator,r=e&&t[e],n=0;if(r)return r.call(t);if(t&&typeof t.length=="number")return{next:function(){return t&&n>=t.length&&(t=void 0),{value:t&&t[n++],done:!t}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")},Z9e=function(){function t(e,r,n,a){this.token=e,this.mode=r,this.binaryShiftByteCount=n,this.bitCount=a}return t.prototype.getMode=function(){return this.mode},t.prototype.getToken=function(){return this.token},t.prototype.getBinaryShiftByteCount=function(){return this.binaryShiftByteCount},t.prototype.getBitCount=function(){return this.bitCount},t.prototype.latchAndAppend=function(e,r){var n=this.bitCount,a=this.token;if(e!==this.mode){var s=z5[this.mode][e];a=by(a,s&65535,s>>16),n+=s>>16}var o=e===_d?4:5;return a=by(a,r,o),new t(a,e,0,n+o)},t.prototype.shiftAndAppend=function(e,r){var n=this.token,a=this.mode===_d?4:5;return n=by(n,Tse[this.mode][e],a),n=by(n,r,5),new t(n,this.mode,0,this.bitCount+a+5)},t.prototype.addBinaryShiftChar=function(e){var r=this.token,n=this.mode,a=this.bitCount;if(this.mode===Zf||this.mode===_d){var s=z5[n][hm];r=by(r,s&65535,s>>16),a+=s>>16,n=hm}var o=this.binaryShiftByteCount===0||this.binaryShiftByteCount===31?18:this.binaryShiftByteCount===62?9:8,l=new t(r,n,this.binaryShiftByteCount+1,a+o);return l.binaryShiftByteCount===2078&&(l=l.endBinaryShift(e+1)),l},t.prototype.endBinaryShift=function(e){if(this.binaryShiftByteCount===0)return this;var r=this.token;return r=q9e(r,e-this.binaryShiftByteCount,this.binaryShiftByteCount),new t(r,this.mode,0,this.bitCount)},t.prototype.isBetterThanOrEqualTo=function(e){var r=this.bitCount+(z5[this.mode][e.mode]>>16);return this.binaryShiftByteCount<e.binaryShiftByteCount?r+=t.calculateBinaryShiftCost(e)-t.calculateBinaryShiftCost(this):this.binaryShiftByteCount>e.binaryShiftByteCount&&e.binaryShiftByteCount>0&&(r+=10),r<=e.bitCount},t.prototype.toBitArray=function(e){for(var r,n,a=[],s=this.endBinaryShift(e.length).token;s!==null;s=s.getPrevious())a.unshift(s);var o=new Jo;try{for(var l=J9e(a),c=l.next();!c.done;c=l.next()){var u=c.value;u.appendTo(o,e)}}catch(d){r={error:d}}finally{try{c&&!c.done&&(n=l.return)&&n.call(l)}finally{if(r)throw r.error}}return o},t.prototype.toString=function(){return ba.format("%s bits=%d bytes=%d",z9e[this.mode],this.bitCount,this.binaryShiftByteCount)},t.calculateBinaryShiftCost=function(e){return e.binaryShiftByteCount>62?21:e.binaryShiftByteCount>31?20:e.binaryShiftByteCount>0?10:0},t.INITIAL_STATE=new t(W9e,hm,0,0),t}();function eQe(t){var e=ba.getCharCode(" "),r=ba.getCharCode("."),n=ba.getCharCode(",");t[hm][e]=1;for(var a=ba.getCharCode("Z"),s=ba.getCharCode("A"),o=s;o<=a;o++)t[hm][o]=o-s+2;t[aI][e]=1;for(var l=ba.getCharCode("z"),c=ba.getCharCode("a"),o=c;o<=l;o++)t[aI][o]=o-c+2;t[_d][e]=1;for(var u=ba.getCharCode("9"),d=ba.getCharCode("0"),o=d;o<=u;o++)t[_d][o]=o-d+2;t[_d][n]=12,t[_d][r]=13;for(var f=["\0"," ","","","","","","","\x07","\b","	",`
`,"\v","\f","\r","\x1B","","","","","@","\\","^","_","`","|","~",""],A=0;A<f.length;A++)t[Bse][ba.getCharCode(f[A])]=A;for(var h=["\0","\r","\0","\0","\0","\0","!","'","#","$","%","&","'","(",")","*","+",",","-",".","/",":",";","<","=",">","?","[","]","{","}"],A=0;A<h.length;A++)ba.getCharCode(h[A])>0&&(t[Zf][ba.getCharCode(h[A])]=A);return t}var W5=eQe(Io.createInt32Array(5,256)),u_=function(t){var e=typeof Symbol=="function"&&Symbol.iterator,r=e&&t[e],n=0;if(r)return r.call(t);if(t&&typeof t.length=="number")return{next:function(){return t&&n>=t.length&&(t=void 0),{value:t&&t[n++],done:!t}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")},tQe=function(){function t(e){this.text=e}return t.prototype.encode=function(){for(var e=ba.getCharCode(" "),r=ba.getCharCode(`
`),n=nG.singletonList(Z9e.INITIAL_STATE),a=0;a<this.text.length;a++){var s=void 0,o=a+1<this.text.length?this.text[a+1]:0;switch(this.text[a]){case ba.getCharCode("\r"):s=o===r?2:0;break;case ba.getCharCode("."):s=o===e?3:0;break;case ba.getCharCode(","):s=o===e?4:0;break;case ba.getCharCode(":"):s=o===e?5:0;break;default:s=0}s>0?(n=t.updateStateListForPair(n,a,s),a++):n=this.updateStateListForChar(n,a)}var l=nG.min(n,function(c,u){return c.getBitCount()-u.getBitCount()});return l.toBitArray(this.text)},t.prototype.updateStateListForChar=function(e,r){var n,a,s=[];try{for(var o=u_(e),l=o.next();!l.done;l=o.next()){var c=l.value;this.updateStateForChar(c,r,s)}}catch(u){n={error:u}}finally{try{l&&!l.done&&(a=o.return)&&a.call(o)}finally{if(n)throw n.error}}return t.simplifyStates(s)},t.prototype.updateStateForChar=function(e,r,n){for(var a=this.text[r]&255,s=W5[e.getMode()][a]>0,o=null,l=0;l<=Zf;l++){var c=W5[l][a];if(c>0){if(o==null&&(o=e.endBinaryShift(r)),!s||l===e.getMode()||l===_d){var u=o.latchAndAppend(l,c);n.push(u)}if(!s&&Tse[e.getMode()][l]>=0){var d=o.shiftAndAppend(l,c);n.push(d)}}}if(e.getBinaryShiftByteCount()>0||W5[e.getMode()][a]===0){var f=e.addBinaryShiftChar(r);n.push(f)}},t.updateStateListForPair=function(e,r,n){var a,s,o=[];try{for(var l=u_(e),c=l.next();!c.done;c=l.next()){var u=c.value;this.updateStateForPair(u,r,n,o)}}catch(d){a={error:d}}finally{try{c&&!c.done&&(s=l.return)&&s.call(l)}finally{if(a)throw a.error}}return this.simplifyStates(o)},t.updateStateForPair=function(e,r,n,a){var s=e.endBinaryShift(r);if(a.push(s.latchAndAppend(Zf,n)),e.getMode()!==Zf&&a.push(s.shiftAndAppend(Zf,n)),n===3||n===4){var o=s.latchAndAppend(_d,16-n).latchAndAppend(_d,1);a.push(o)}if(e.getBinaryShiftByteCount()>0){var l=e.addBinaryShiftChar(r).addBinaryShiftChar(r+1);a.push(l)}},t.simplifyStates=function(e){var r,n,a,s,o=[];try{for(var l=u_(e),c=l.next();!c.done;c=l.next()){var u=c.value,d=!0,f=function(x){if(x.isBetterThanOrEqualTo(u))return d=!1,"break";u.isBetterThanOrEqualTo(x)&&(o=o.filter(function(v){return v!==x}))};try{for(var A=(a=void 0,u_(o)),h=A.next();!h.done;h=A.next()){var m=h.value,p=f(m);if(p==="break")break}}catch(x){a={error:x}}finally{try{h&&!h.done&&(s=A.return)&&s.call(A)}finally{if(a)throw a.error}}d&&o.push(u)}}catch(x){r={error:x}}finally{try{c&&!c.done&&(n=l.return)&&n.call(l)}finally{if(r)throw r.error}}return o},t}(),rQe=function(t){var e=typeof Symbol=="function"&&Symbol.iterator,r=e&&t[e],n=0;if(r)return r.call(t);if(t&&typeof t.length=="number")return{next:function(){return t&&n>=t.length&&(t=void 0),{value:t&&t[n++],done:!t}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")};(function(){function t(){}return t.encodeBytes=function(e){return t.encode(e,t.DEFAULT_EC_PERCENT,t.DEFAULT_AZTEC_LAYERS)},t.encode=function(e,r,n){var a=new tQe(e).encode(),s=sa.truncDivision(a.getSize()*r,100)+11,o=a.getSize()+s,l,c,u,d,f;if(n!==t.DEFAULT_AZTEC_LAYERS){if(l=n<0,c=Math.abs(n),c>(l?t.MAX_NB_BITS_COMPACT:t.MAX_NB_BITS))throw new Pn(ba.format("Illegal value %s for layers",n));u=t.totalBitsInLayer(c,l),d=t.WORD_SIZE[c];var A=u-u%d;if(f=t.stuffBits(a,d),f.getSize()+s>A)throw new Pn("Data to large for user specified layer");if(l&&f.getSize()>d*64)throw new Pn("Data to large for user specified layer")}else{d=0,f=null;for(var h=0;;h++){if(h>t.MAX_NB_BITS)throw new Pn("Data too large for an Aztec code");if(l=h<=3,c=l?h+1:h,u=t.totalBitsInLayer(c,l),!(o>u)){(f==null||d!==t.WORD_SIZE[c])&&(d=t.WORD_SIZE[c],f=t.stuffBits(a,d));var A=u-u%d;if(!(l&&f.getSize()>d*64)&&f.getSize()+s<=A)break}}}var m=t.generateCheckWords(f,u,d),p=f.getSize()/d,x=t.generateModeMessage(l,c,p),v=(l?11:14)+c*4,y=new Int32Array(v),b;if(l){b=v;for(var h=0;h<y.length;h++)y[h]=h}else{b=v+1+2*sa.truncDivision(sa.truncDivision(v,2)-1,15);for(var w=sa.truncDivision(v,2),j=sa.truncDivision(b,2),h=0;h<w;h++){var I=h+sa.truncDivision(h,15);y[w-h-1]=j-I-1,y[w+h]=j+I+1}}for(var _=new oh(b),h=0,S=0;h<c;h++){for(var E=(c-h)*4+(l?9:12),T=0;T<E;T++)for(var k=T*2,B=0;B<2;B++)m.get(S+k+B)&&_.set(y[h*2+B],y[h*2+T]),m.get(S+E*2+k+B)&&_.set(y[h*2+T],y[v-1-h*2-B]),m.get(S+E*4+k+B)&&_.set(y[v-1-h*2-B],y[v-1-h*2-T]),m.get(S+E*6+k+B)&&_.set(y[v-1-h*2-T],y[h*2+B]);S+=E*8}if(t.drawModeMessage(_,l,b,x),l)t.drawBullsEye(_,sa.truncDivision(b,2),5);else{t.drawBullsEye(_,sa.truncDivision(b,2),7);for(var h=0,T=0;h<sa.truncDivision(v,2)-1;h+=15,T+=16)for(var B=sa.truncDivision(b,2)&1;B<b;B+=2)_.set(sa.truncDivision(b,2)-T,B),_.set(sa.truncDivision(b,2)+T,B),_.set(B,sa.truncDivision(b,2)-T),_.set(B,sa.truncDivision(b,2)+T)}var D=new V9e;return D.setCompact(l),D.setSize(b),D.setLayers(c),D.setCodeWords(p),D.setMatrix(_),D},t.drawBullsEye=function(e,r,n){for(var a=0;a<n;a+=2)for(var s=r-a;s<=r+a;s++)e.set(s,r-a),e.set(s,r+a),e.set(r-a,s),e.set(r+a,s);e.set(r-n,r-n),e.set(r-n+1,r-n),e.set(r-n,r-n+1),e.set(r+n,r-n),e.set(r+n,r-n+1),e.set(r+n,r+n-1)},t.generateModeMessage=function(e,r,n){var a=new Jo;return e?(a.appendBits(r-1,2),a.appendBits(n-1,6),a=t.generateCheckWords(a,28,4)):(a.appendBits(r-1,5),a.appendBits(n-1,11),a=t.generateCheckWords(a,40,4)),a},t.drawModeMessage=function(e,r,n,a){var s=sa.truncDivision(n,2);if(r)for(var o=0;o<7;o++){var l=s-3+o;a.get(o)&&e.set(l,s-5),a.get(o+7)&&e.set(s+5,l),a.get(20-o)&&e.set(l,s+5),a.get(27-o)&&e.set(s-5,l)}else for(var o=0;o<10;o++){var l=s-5+o+sa.truncDivision(o,5);a.get(o)&&e.set(l,s-7),a.get(o+10)&&e.set(s+7,l),a.get(29-o)&&e.set(l,s+7),a.get(39-o)&&e.set(s-7,l)}},t.generateCheckWords=function(e,r,n){var a,s,o=e.getSize()/n,l=new jse(t.getGF(n)),c=sa.truncDivision(r,n),u=t.bitsToWords(e,n,c);l.encode(u,c-o);var d=r%n,f=new Jo;f.appendBits(0,d);try{for(var A=rQe(Array.from(u)),h=A.next();!h.done;h=A.next()){var m=h.value;f.appendBits(m,n)}}catch(p){a={error:p}}finally{try{h&&!h.done&&(s=A.return)&&s.call(A)}finally{if(a)throw a.error}}return f},t.bitsToWords=function(e,r,n){var a=new Int32Array(n),s,o;for(s=0,o=e.getSize()/r;s<o;s++){for(var l=0,c=0;c<r;c++)l|=e.get(s*r+c)?1<<r-c-1:0;a[s]=l}return a},t.getGF=function(e){switch(e){case 4:return Jc.AZTEC_PARAM;case 6:return Jc.AZTEC_DATA_6;case 8:return Jc.AZTEC_DATA_8;case 10:return Jc.AZTEC_DATA_10;case 12:return Jc.AZTEC_DATA_12;default:throw new Pn("Unsupported word size "+e)}},t.stuffBits=function(e,r){for(var n=new Jo,a=e.getSize(),s=(1<<r)-2,o=0;o<a;o+=r){for(var l=0,c=0;c<r;c++)(o+c>=a||e.get(o+c))&&(l|=1<<r-1-c);(l&s)===s?(n.appendBits(l&s,r),o--):l&s?n.appendBits(l,r):(n.appendBits(l|1,r),o--)}return n},t.totalBitsInLayer=function(e,r){return((r?88:112)+16*e)*e},t.DEFAULT_EC_PERCENT=33,t.DEFAULT_AZTEC_LAYERS=0,t.MAX_NB_BITS=32,t.MAX_NB_BITS_COMPACT=4,t.WORD_SIZE=Int32Array.from([4,6,6,8,8,8,8,8,8,10,10,10,10,10,10,10,10,10,10,10,10,10,10,12,12,12,12,12,12,12,12,12,12]),t})();var nQe=function(){var t=function(e,r){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,a){n.__proto__=a}||function(n,a){for(var s in a)Object.prototype.hasOwnProperty.call(a,s)&&(n[s]=a[s])},t(e,r)};return function(e,r){if(typeof r!="function"&&r!==null)throw new TypeError("Class extends value "+String(r)+" is not a constructor or null");t(e,r);function n(){this.constructor=e}e.prototype=r===null?Object.create(r):(n.prototype=r.prototype,new n)}}(),aQe=function(t){nQe(e,t);function e(r){var n=t.call(this,r.width,r.height)||this;return n.canvas=r,n.tempCanvasElement=null,n.buffer=e.makeBufferFromCanvasImageData(r),n}return e.makeBufferFromCanvasImageData=function(r){var n;try{n=r.getContext("2d",{willReadFrequently:!0})}catch{n=r.getContext("2d")}if(!n)throw new Error("Couldn't get canvas context.");var a=n.getImageData(0,0,r.width,r.height);return e.toGrayscaleBuffer(a.data,r.width,r.height)},e.toGrayscaleBuffer=function(r,n,a){for(var s=new Uint8ClampedArray(n*a),o=0,l=0,c=r.length;o<c;o+=4,l++){var u=void 0,d=r[o+3];if(d===0)u=255;else{var f=r[o],A=r[o+1],h=r[o+2];u=306*f+601*A+117*h+512>>10}s[l]=u}return s},e.prototype.getRow=function(r,n){if(r<0||r>=this.getHeight())throw new Pn("Requested row is outside the image: "+r);var a=this.getWidth(),s=r*a;return n===null?n=this.buffer.slice(s,s+a):(n.length<a&&(n=new Uint8ClampedArray(a)),n.set(this.buffer.slice(s,s+a))),n},e.prototype.getMatrix=function(){return this.buffer},e.prototype.isCropSupported=function(){return!0},e.prototype.crop=function(r,n,a,s){return t.prototype.crop.call(this,r,n,a,s),this},e.prototype.isRotateSupported=function(){return!0},e.prototype.rotateCounterClockwise=function(){return this.rotate(-90),this},e.prototype.rotateCounterClockwise45=function(){return this.rotate(-45),this},e.prototype.invert=function(){return new gP(this)},e.prototype.getTempCanvasElement=function(){if(this.tempCanvasElement===null){var r=this.canvas.ownerDocument.createElement("canvas");r.width=this.canvas.width,r.height=this.canvas.height,this.tempCanvasElement=r}return this.tempCanvasElement},e.prototype.rotate=function(r){var n=this.getTempCanvasElement();if(!n)throw new Error("Could not create a Canvas element.");var a=r*e.DEGREE_TO_RADIANS,s=this.canvas.width,o=this.canvas.height,l=Math.ceil(Math.abs(Math.cos(a))*s+Math.abs(Math.sin(a))*o),c=Math.ceil(Math.abs(Math.sin(a))*s+Math.abs(Math.cos(a))*o);n.width=l,n.height=c;var u=n.getContext("2d");if(!u)throw new Error("Could not create a Canvas Context element.");return u.translate(l/2,c/2),u.rotate(a),u.drawImage(this.canvas,s/-2,o/-2),this.buffer=e.makeBufferFromCanvasImageData(n),this},e.DEGREE_TO_RADIANS=Math.PI/180,e}(Gw);function kse(){return typeof navigator<"u"}function sQe(){return kse()&&!!navigator.mediaDevices}function iQe(){return!!(sQe()&&navigator.mediaDevices.enumerateDevices)}var Zx=function(){return Zx=Object.assign||function(t){for(var e,r=1,n=arguments.length;r<n;r++){e=arguments[r];for(var a in e)Object.prototype.hasOwnProperty.call(e,a)&&(t[a]=e[a])}return t},Zx.apply(this,arguments)},ti=function(t,e,r,n){function a(s){return s instanceof r?s:new r(function(o){o(s)})}return new(r||(r=Promise))(function(s,o){function l(d){try{u(n.next(d))}catch(f){o(f)}}function c(d){try{u(n.throw(d))}catch(f){o(f)}}function u(d){d.done?s(d.value):a(d.value).then(l,c)}u((n=n.apply(t,e||[])).next())})},ri=function(t,e){var r={label:0,sent:function(){if(s[0]&1)throw s[1];return s[1]},trys:[],ops:[]},n,a,s,o;return o={next:l(0),throw:l(1),return:l(2)},typeof Symbol=="function"&&(o[Symbol.iterator]=function(){return this}),o;function l(u){return function(d){return c([u,d])}}function c(u){if(n)throw new TypeError("Generator is already executing.");for(;r;)try{if(n=1,a&&(s=u[0]&2?a.return:u[0]?a.throw||((s=a.return)&&s.call(a),0):a.next)&&!(s=s.call(a,u[1])).done)return s;switch(a=0,s&&(u=[u[0]&2,s.value]),u[0]){case 0:case 1:s=u;break;case 4:return r.label++,{value:u[1],done:!1};case 5:r.label++,a=u[1],u=[0];continue;case 7:u=r.ops.pop(),r.trys.pop();continue;default:if(s=r.trys,!(s=s.length>0&&s[s.length-1])&&(u[0]===6||u[0]===2)){r=0;continue}if(u[0]===3&&(!s||u[1]>s[0]&&u[1]<s[3])){r.label=u[1];break}if(u[0]===6&&r.label<s[1]){r.label=s[1],s=u;break}if(s&&r.label<s[2]){r.label=s[2],r.ops.push(u);break}s[2]&&r.ops.pop(),r.trys.pop();continue}u=e.call(t,r)}catch(d){u=[6,d],a=0}finally{n=s=0}if(u[0]&5)throw u[1];return{value:u[0]?u[1]:void 0,done:!0}}},X5=function(t){var e=typeof Symbol=="function"&&Symbol.iterator,r=e&&t[e],n=0;if(r)return r.call(t);if(t&&typeof t.length=="number")return{next:function(){return t&&n>=t.length&&(t=void 0),{value:t&&t[n++],done:!t}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")},oQe={delayBetweenScanAttempts:500,delayBetweenScanSuccess:500,tryPlayVideoTimeout:5e3},N1=function(){function t(e,r,n){r===void 0&&(r=new Map),n===void 0&&(n={}),this.reader=e,this.hints=r,this.options=Zx(Zx({},oQe),n)}return Object.defineProperty(t.prototype,"possibleFormats",{set:function(e){this.hints.set(Ns.POSSIBLE_FORMATS,e)},enumerable:!1,configurable:!0}),t.addVideoSource=function(e,r){try{e.srcObject=r}catch{console.error("got interrupted by new loading request")}},t.mediaStreamSetTorch=function(e,r){return ti(this,void 0,void 0,function(){return ri(this,function(n){switch(n.label){case 0:return[4,e.applyConstraints({advanced:[{fillLightMode:r?"flash":"off",torch:!!r}]})];case 1:return n.sent(),[2]}})})},t.mediaStreamIsTorchCompatible=function(e){var r,n,a=e.getVideoTracks();try{for(var s=X5(a),o=s.next();!o.done;o=s.next()){var l=o.value;if(t.mediaStreamIsTorchCompatibleTrack(l))return!0}}catch(c){r={error:c}}finally{try{o&&!o.done&&(n=s.return)&&n.call(s)}finally{if(r)throw r.error}}return!1},t.mediaStreamIsTorchCompatibleTrack=function(e){try{var r=e.getCapabilities();return"torch"in r}catch(n){return console.error(n),console.warn("Your browser may be not fully compatible with WebRTC and/or ImageCapture specs. Torch will not be available."),!1}},t.isVideoPlaying=function(e){return e.currentTime>0&&!e.paused&&e.readyState>2},t.getMediaElement=function(e,r){var n=document.getElementById(e);if(!n)throw new Li("element with id '".concat(e,"' not found"));if(n.nodeName.toLowerCase()!==r.toLowerCase())throw new Li("element with id '".concat(e,"' must be an ").concat(r," element"));return n},t.createVideoElement=function(e){if(e instanceof HTMLVideoElement)return e;if(typeof e=="string")return t.getMediaElement(e,"video");if(!e&&typeof document<"u"){var r=document.createElement("video");return r.width=200,r.height=200,r}throw new Error("Couldn't get videoElement from videoSource!")},t.prepareImageElement=function(e){if(e instanceof HTMLImageElement)return e;if(typeof e=="string")return t.getMediaElement(e,"img");if(typeof e>"u"){var r=document.createElement("img");return r.width=200,r.height=200,r}throw new Error("Couldn't get imageElement from imageSource!")},t.prepareVideoElement=function(e){var r=t.createVideoElement(e);return r.setAttribute("autoplay","true"),r.setAttribute("muted","true"),r.setAttribute("playsinline","true"),r},t.isImageLoaded=function(e){return!(!e.complete||e.naturalWidth===0)},t.createBinaryBitmapFromCanvas=function(e){var r=new aQe(e),n=new gse(r);return new pse(n)},t.drawImageOnCanvas=function(e,r){e.drawImage(r,0,0)},t.getMediaElementDimensions=function(e){if(e instanceof HTMLVideoElement)return{height:e.videoHeight,width:e.videoWidth};if(e instanceof HTMLImageElement)return{height:e.naturalHeight||e.height,width:e.naturalWidth||e.width};throw new Error("Couldn't find the Source's dimensions!")},t.createCaptureCanvas=function(e){if(!e)throw new Li("Cannot create a capture canvas without a media element.");if(typeof document>"u")throw new Error(`The page "Document" is undefined, make sure you're running in a browser.`);var r=document.createElement("canvas"),n=t.getMediaElementDimensions(e),a=n.width,s=n.height;return r.style.width=a+"px",r.style.height=s+"px",r.width=a,r.height=s,r},t.tryPlayVideo=function(e){return ti(this,void 0,void 0,function(){var r;return ri(this,function(n){switch(n.label){case 0:if(e!=null&&e.ended)return console.error("Trying to play video that has ended."),[2,!1];if(t.isVideoPlaying(e))return console.warn("Trying to play video that is already playing."),[2,!0];n.label=1;case 1:return n.trys.push([1,3,,4]),[4,e.play()];case 2:return n.sent(),[2,!0];case 3:return r=n.sent(),console.warn("It was not possible to play the video.",r),[2,!1];case 4:return[2]}})})},t.createCanvasFromMediaElement=function(e){var r=t.createCaptureCanvas(e),n=r.getContext("2d");if(!n)throw new Error("Couldn't find Canvas 2D Context.");return t.drawImageOnCanvas(n,e),r},t.createBinaryBitmapFromMediaElem=function(e){var r=t.createCanvasFromMediaElement(e);return t.createBinaryBitmapFromCanvas(r)},t.destroyImageElement=function(e){e.src="",e.removeAttribute("src"),e=void 0},t.listVideoInputDevices=function(){return ti(this,void 0,void 0,function(){var e,r,n,a,s,o,l,c,u,d,f,A;return ri(this,function(h){switch(h.label){case 0:if(!kse())throw new Error("Can't enumerate devices, navigator is not present.");if(!iQe())throw new Error("Can't enumerate devices, method not supported.");return[4,navigator.mediaDevices.enumerateDevices()];case 1:e=h.sent(),r=[];try{for(n=X5(e),a=n.next();!a.done;a=n.next())s=a.value,o=s.kind==="video"?"videoinput":s.kind,o==="videoinput"&&(l=s.deviceId||s.id,c=s.label||"Video device ".concat(r.length+1),u=s.groupId,d={deviceId:l,label:c,kind:o,groupId:u},r.push(d))}catch(m){f={error:m}}finally{try{a&&!a.done&&(A=n.return)&&A.call(n)}finally{if(f)throw f.error}}return[2,r]}})})},t.findDeviceById=function(e){return ti(this,void 0,void 0,function(){var r;return ri(this,function(n){switch(n.label){case 0:return[4,t.listVideoInputDevices()];case 1:return r=n.sent(),r?[2,r.find(function(a){return a.deviceId===e})]:[2]}})})},t.cleanVideoSource=function(e){if(e){try{e.srcObject=null}catch{e.src=""}e&&e.removeAttribute("src")}},t.releaseAllStreams=function(){t.streamTracker.length!==0&&t.streamTracker.forEach(function(e){e.getTracks().forEach(function(r){return r.stop()})}),t.streamTracker=[]},t.playVideoOnLoadAsync=function(e,r){return ti(this,void 0,void 0,function(){var n;return ri(this,function(a){switch(a.label){case 0:return[4,t.tryPlayVideo(e)];case 1:return n=a.sent(),n?[2,!0]:[2,new Promise(function(s,o){var l=setTimeout(function(){t.isVideoPlaying(e)||(o(!1),e.removeEventListener("canplay",c))},r),c=function(){t.tryPlayVideo(e).then(function(u){clearTimeout(l),e.removeEventListener("canplay",c),s(u)})};e.addEventListener("canplay",c)})]}})})},t.attachStreamToVideo=function(e,r,n){return n===void 0&&(n=5e3),ti(this,void 0,void 0,function(){var a;return ri(this,function(s){switch(s.label){case 0:return a=t.prepareVideoElement(r),t.addVideoSource(a,e),[4,t.playVideoOnLoadAsync(a,n)];case 1:return s.sent(),[2,a]}})})},t._waitImageLoad=function(e){return new Promise(function(r,n){var a=1e4,s=setTimeout(function(){t.isImageLoaded(e)||(e.removeEventListener("load",o),n())},a),o=function(){clearTimeout(s),e.removeEventListener("load",o),r()};e.addEventListener("load",o)})},t.checkCallbackFnOrThrow=function(e){if(!e)throw new Li("`callbackFn` is a required parameter, you cannot capture results without it.")},t.disposeMediaStream=function(e){e.getVideoTracks().forEach(function(r){return r.stop()}),e=void 0},t.prototype.decode=function(e){var r=t.createCanvasFromMediaElement(e);return this.decodeFromCanvas(r)},t.prototype.decodeBitmap=function(e){return this.reader.decode(e,this.hints)},t.prototype.decodeFromCanvas=function(e){var r=t.createBinaryBitmapFromCanvas(e);return this.decodeBitmap(r)},t.prototype.decodeFromImageElement=function(e){return ti(this,void 0,void 0,function(){var r;return ri(this,function(n){switch(n.label){case 0:if(!e)throw new Li("An image element must be provided.");return r=t.prepareImageElement(e),[4,this._decodeOnLoadImage(r)];case 1:return[2,n.sent()]}})})},t.prototype.decodeFromImageUrl=function(e){return ti(this,void 0,void 0,function(){var r;return ri(this,function(n){switch(n.label){case 0:if(!e)throw new Li("An URL must be provided.");r=t.prepareImageElement(),r.src=e,n.label=1;case 1:return n.trys.push([1,,3,4]),[4,this.decodeFromImageElement(r)];case 2:return[2,n.sent()];case 3:return t.destroyImageElement(r),[7];case 4:return[2]}})})},t.prototype.decodeFromConstraints=function(e,r,n){return ti(this,void 0,void 0,function(){var a,s;return ri(this,function(o){switch(o.label){case 0:return t.checkCallbackFnOrThrow(n),[4,this.getUserMedia(e)];case 1:a=o.sent(),o.label=2;case 2:return o.trys.push([2,4,,5]),[4,this.decodeFromStream(a,r,n)];case 3:return[2,o.sent()];case 4:throw s=o.sent(),t.disposeMediaStream(a),s;case 5:return[2]}})})},t.prototype.decodeFromStream=function(e,r,n){return ti(this,void 0,void 0,function(){var a,s,o,l,c,u,d,f,A,h=this;return ri(this,function(m){switch(m.label){case 0:return t.checkCallbackFnOrThrow(n),a=this.options.tryPlayVideoTimeout,[4,t.attachStreamToVideo(e,r,a)];case 1:return s=m.sent(),o=function(){t.disposeMediaStream(e),t.cleanVideoSource(s)},l=this.scan(s,n,o),c=e.getVideoTracks(),u=Zx(Zx({},l),{stop:function(){l.stop()},streamVideoConstraintsApply:function(p,x){return ti(this,void 0,void 0,function(){var v,y,b,w,j,I,_;return ri(this,function(S){switch(S.label){case 0:v=x?c.filter(x):c,S.label=1;case 1:S.trys.push([1,6,7,8]),y=X5(v),b=y.next(),S.label=2;case 2:return b.done?[3,5]:(w=b.value,[4,w.applyConstraints(p)]);case 3:S.sent(),S.label=4;case 4:return b=y.next(),[3,2];case 5:return[3,8];case 6:return j=S.sent(),I={error:j},[3,8];case 7:try{b&&!b.done&&(_=y.return)&&_.call(y)}finally{if(I)throw I.error}return[7];case 8:return[2]}})})},streamVideoConstraintsGet:function(p){return c.find(p).getConstraints()},streamVideoSettingsGet:function(p){return c.find(p).getSettings()},streamVideoCapabilitiesGet:function(p){return c.find(p).getCapabilities()}}),d=t.mediaStreamIsTorchCompatible(e),d&&(f=c==null?void 0:c.find(function(p){return t.mediaStreamIsTorchCompatibleTrack(p)}),A=function(p){return ti(h,void 0,void 0,function(){return ri(this,function(x){switch(x.label){case 0:return[4,t.mediaStreamSetTorch(f,p)];case 1:return x.sent(),[2]}})})},u.switchTorch=A,u.stop=function(){return ti(h,void 0,void 0,function(){return ri(this,function(p){switch(p.label){case 0:return l.stop(),[4,A(!1)];case 1:return p.sent(),[2]}})})}),[2,u]}})})},t.prototype.decodeFromVideoDevice=function(e,r,n){return ti(this,void 0,void 0,function(){var a,s;return ri(this,function(o){switch(o.label){case 0:return t.checkCallbackFnOrThrow(n),e?a={deviceId:{exact:e}}:a={facingMode:"environment"},s={video:a},[4,this.decodeFromConstraints(s,r,n)];case 1:return[2,o.sent()]}})})},t.prototype.decodeFromVideoElement=function(e,r){return ti(this,void 0,void 0,function(){var n,a;return ri(this,function(s){switch(s.label){case 0:if(t.checkCallbackFnOrThrow(r),!e)throw new Li("A video element must be provided.");return n=t.prepareVideoElement(e),a=this.options.tryPlayVideoTimeout,[4,t.playVideoOnLoadAsync(n,a)];case 1:return s.sent(),[2,this.scan(n,r)]}})})},t.prototype.decodeFromVideoUrl=function(e,r){return ti(this,void 0,void 0,function(){var n,a,s,o;return ri(this,function(l){switch(l.label){case 0:if(t.checkCallbackFnOrThrow(r),!e)throw new Li("An URL must be provided.");return n=t.prepareVideoElement(),n.src=e,a=function(){t.cleanVideoSource(n)},s=this.options.tryPlayVideoTimeout,[4,t.playVideoOnLoadAsync(n,s)];case 1:return l.sent(),o=this.scan(n,r,a),[2,o]}})})},t.prototype.decodeOnceFromConstraints=function(e,r){return ti(this,void 0,void 0,function(){var n;return ri(this,function(a){switch(a.label){case 0:return[4,this.getUserMedia(e)];case 1:return n=a.sent(),[4,this.decodeOnceFromStream(n,r)];case 2:return[2,a.sent()]}})})},t.prototype.decodeOnceFromStream=function(e,r){return ti(this,void 0,void 0,function(){var n,a,s;return ri(this,function(o){switch(o.label){case 0:return n=!!r,[4,t.attachStreamToVideo(e,r)];case 1:a=o.sent(),o.label=2;case 2:return o.trys.push([2,,4,5]),[4,this.scanOneResult(a)];case 3:return s=o.sent(),[2,s];case 4:return n||t.cleanVideoSource(a),[7];case 5:return[2]}})})},t.prototype.decodeOnceFromVideoDevice=function(e,r){return ti(this,void 0,void 0,function(){var n,a;return ri(this,function(s){switch(s.label){case 0:return e?n={deviceId:{exact:e}}:n={facingMode:"environment"},a={video:n},[4,this.decodeOnceFromConstraints(a,r)];case 1:return[2,s.sent()]}})})},t.prototype.decodeOnceFromVideoElement=function(e){return ti(this,void 0,void 0,function(){var r,n;return ri(this,function(a){switch(a.label){case 0:if(!e)throw new Li("A video element must be provided.");return r=t.prepareVideoElement(e),n=this.options.tryPlayVideoTimeout,[4,t.playVideoOnLoadAsync(r,n)];case 1:return a.sent(),[4,this.scanOneResult(r)];case 2:return[2,a.sent()]}})})},t.prototype.decodeOnceFromVideoUrl=function(e){return ti(this,void 0,void 0,function(){var r,n;return ri(this,function(a){switch(a.label){case 0:if(!e)throw new Li("An URL must be provided.");r=t.prepareVideoElement(),r.src=e,n=this.decodeOnceFromVideoElement(r),a.label=1;case 1:return a.trys.push([1,,3,4]),[4,n];case 2:return[2,a.sent()];case 3:return t.cleanVideoSource(r),[7];case 4:return[2]}})})},t.prototype.scanOneResult=function(e,r,n,a){var s=this;return r===void 0&&(r=!0),n===void 0&&(n=!0),a===void 0&&(a=!0),new Promise(function(o,l){s.scan(e,function(c,u,d){if(c){o(c),d.stop();return}if(u){if(u instanceof rr&&r||u instanceof so&&n||u instanceof Hr&&a)return;d.stop(),l(u)}})})},t.prototype.scan=function(e,r,n){var a=this;t.checkCallbackFnOrThrow(r);var s=t.createCaptureCanvas(e),o;try{o=s.getContext("2d",{willReadFrequently:!0})}catch{o=s.getContext("2d")}if(!o)throw new Error("Couldn't create canvas for visual element scan.");var l=function(){o=void 0,s=void 0},c=!1,u,d=function(){c=!0,clearTimeout(u),l(),n&&n()},f={stop:d},A=function(){if(!c)try{t.drawImageOnCanvas(o,e);var h=a.decodeFromCanvas(s);r(h,void 0,f),u=setTimeout(A,a.options.delayBetweenScanSuccess)}catch(v){r(void 0,v,f);var m=v instanceof so,p=v instanceof Hr,x=v instanceof rr;if(m||p||x){u=setTimeout(A,a.options.delayBetweenScanAttempts);return}l(),n&&n(v)}};return A(),f},t.prototype._decodeOnLoadImage=function(e){return ti(this,void 0,void 0,function(){var r;return ri(this,function(n){switch(n.label){case 0:return r=t.isImageLoaded(e),r?[3,2]:[4,t._waitImageLoad(e)];case 1:n.sent(),n.label=2;case 2:return[2,this.decode(e)]}})})},t.prototype.getUserMedia=function(e){return ti(this,void 0,void 0,function(){var r;return ri(this,function(n){switch(n.label){case 0:return[4,navigator.mediaDevices.getUserMedia(e)];case 1:return r=n.sent(),t.streamTracker.push(r),[2,r]}})})},t.streamTracker=[],t}(),lQe=function(){var t=function(e,r){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,a){n.__proto__=a}||function(n,a){for(var s in a)Object.prototype.hasOwnProperty.call(a,s)&&(n[s]=a[s])},t(e,r)};return function(e,r){if(typeof r!="function"&&r!==null)throw new TypeError("Class extends value "+String(r)+" is not a constructor or null");t(e,r);function n(){this.constructor=e}e.prototype=r===null?Object.create(r):(n.prototype=r.prototype,new n)}}();(function(t){lQe(e,t);function e(r,n){return t.call(this,new ZS,r,n)||this}return e})(N1);var cQe=function(){var t=function(e,r){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,a){n.__proto__=a}||function(n,a){for(var s in a)Object.prototype.hasOwnProperty.call(a,s)&&(n[s]=a[s])},t(e,r)};return function(e,r){if(typeof r!="function"&&r!==null)throw new TypeError("Class extends value "+String(r)+" is not a constructor or null");t(e,r);function n(){this.constructor=e}e.prototype=r===null?Object.create(r):(n.prototype=r.prototype,new n)}}();(function(t){cQe(e,t);function e(r,n){return t.call(this,new Yx(r),r,n)||this}return e})(N1);var uQe=function(){var t=function(e,r){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,a){n.__proto__=a}||function(n,a){for(var s in a)Object.prototype.hasOwnProperty.call(a,s)&&(n[s]=a[s])},t(e,r)};return function(e,r){if(typeof r!="function"&&r!==null)throw new TypeError("Class extends value "+String(r)+" is not a constructor or null");t(e,r);function n(){this.constructor=e}e.prototype=r===null?Object.create(r):(n.prototype=r.prototype,new n)}}();(function(t){uQe(e,t);function e(r,n){return t.call(this,new tI,r,n)||this}return e})(N1);var dQe=function(){var t=function(e,r){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,a){n.__proto__=a}||function(n,a){for(var s in a)Object.prototype.hasOwnProperty.call(a,s)&&(n[s]=a[s])},t(e,r)};return function(e,r){if(typeof r!="function"&&r!==null)throw new TypeError("Class extends value "+String(r)+" is not a constructor or null");t(e,r);function n(){this.constructor=e}e.prototype=r===null?Object.create(r):(n.prototype=r.prototype,new n)}}(),$2=function(t){dQe(e,t);function e(r,n){var a=this,s=new Ise;return s.setHints(r),a=t.call(this,s,r,n)||this,a.reader=s,a}return Object.defineProperty(e.prototype,"possibleFormats",{set:function(r){this.hints.set(Ns.POSSIBLE_FORMATS,r),this.reader.setHints(this.hints)},enumerable:!1,configurable:!0}),e.prototype.decodeBitmap=function(r){return this.reader.decodeWithState(r)},e.prototype.setHints=function(r){this.hints=r,this.reader.setHints(this.hints)},e}(N1),fQe=function(){var t=function(e,r){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,a){n.__proto__=a}||function(n,a){for(var s in a)Object.prototype.hasOwnProperty.call(a,s)&&(n[s]=a[s])},t(e,r)};return function(e,r){if(typeof r!="function"&&r!==null)throw new TypeError("Class extends value "+String(r)+" is not a constructor or null");t(e,r);function n(){this.constructor=e}e.prototype=r===null?Object.create(r):(n.prototype=r.prototype,new n)}}();(function(t){fQe(e,t);function e(r,n){return t.call(this,new nI,r,n)||this}return e})(N1);var hQe=function(){var t=function(e,r){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,a){n.__proto__=a}||function(n,a){for(var s in a)Object.prototype.hasOwnProperty.call(a,s)&&(n[s]=a[s])},t(e,r)};return function(e,r){if(typeof r!="function"&&r!==null)throw new TypeError("Class extends value "+String(r)+" is not a constructor or null");t(e,r);function n(){this.constructor=e}e.prototype=r===null?Object.create(r):(n.prototype=r.prototype,new n)}}();(function(t){hQe(e,t);function e(r,n){return t.call(this,new rI,r,n)||this}return e})(N1);const Y5=t=>`C$ ${(Number(t)||0).toFixed(2)}`;function is(t){return String(t??"").trim().replace(/\s+/g," ").toLowerCase()}function Dh(t,e=0){const r=Number(String(t??"").replace(",","."));return Number.isFinite(r)?r:e}function x0(t,e=1){const r=Math.floor(Dh(t,e));return r>0?r:e}function AQe(t){return Object.values(t||{}).every(r=>is(r)==="")}function Zm(t,e){const r=Object.keys(t||{}),n=new Map;r.forEach(a=>n.set(is(a),a));for(const a of e){const s=n.get(is(a));if(s!=null)return t[s]}}function mQe({open:t,code:e,onClose:r}){return t?i.jsx("div",{className:"fixed inset-0 bg-black/40 flex items-center justify-center z-50 p-3",children:i.jsxs("div",{className:"bg-white w-full max-w-sm rounded-2xl shadow-lg border p-4",children:[i.jsxs("div",{className:"flex items-center justify-between mb-2",children:[i.jsx("div",{className:"font-bold text-lg",children:"Cdigo de barras"}),i.jsx("button",{className:"px-3 py-1 rounded bg-gray-200 hover:bg-gray-300",onClick:r,type:"button",children:"Cerrar"})]}),i.jsxs("div",{className:"bg-gray-50 border rounded-xl p-3",children:[i.jsx("div",{className:"text-xs text-gray-600 mb-1",children:"Valor"}),i.jsx("div",{className:"text-xl font-mono font-semibold break-all",children:e})]}),i.jsx("div",{className:"mt-3 flex gap-2 justify-end",children:i.jsx("button",{className:"px-3 py-2 rounded bg-indigo-600 text-white hover:bg-indigo-700",type:"button",onClick:()=>{var n;try{(n=navigator.clipboard)==null||n.writeText(e)}catch{}},children:"Copiar"})})]})}):null}function pQe({open:t,onClose:e,onDetected:r}){const n=g.useRef(null),a=g.useRef(null),[s,o]=g.useState(""),l=g.useRef("");return g.useEffect(()=>{if(!t)return;let c=!1;const u=new $2,d=()=>{var A,h,m;try{(A=a.current)==null||A.stop()}catch{}a.current=null;try{const p=(h=n.current)==null?void 0:h.srcObject;(m=p==null?void 0:p.getTracks)==null||m.call(p).forEach(x=>x.stop())}catch{}try{n.current&&(n.current.srcObject=null)}catch{}};return(async()=>{o("");try{if(!n.current)return;try{(await navigator.mediaDevices.getUserMedia({video:{facingMode:{ideal:"environment"}},audio:!1})).getTracks().forEach(m=>m.stop())}catch{}const A=await u.decodeFromConstraints({video:{facingMode:{ideal:"environment"},width:{ideal:1280},height:{ideal:720}},audio:!1},n.current,h=>{if(!c&&h){const m=String(h.getText()||"").trim().replace(/\s+/g,"");if(!m||m===l.current)return;l.current=m,d(),r(m),e()}});a.current=A}catch(A){const h=String((A==null?void 0:A.message)||""),m=String((A==null?void 0:A.name)||"");h.toLowerCase().includes("permission")||m==="NotAllowedError"?o("Permiso de cmara denegado."):m==="NotFoundError"||h.toLowerCase().includes("notfound")?o("No se encontr cmara en este dispositivo."):h.toLowerCase().includes("secure")||h.toLowerCase().includes("https")?o("La cmara requiere HTTPS (sitio seguro)."):o(h||"No se pudo iniciar el escner.")}})(),()=>{c=!0,d()}},[t,e,r]),t?i.jsx("div",{className:"fixed inset-0 bg-black/70 z-50 p-3 flex items-center justify-center",children:i.jsxs("div",{className:"bg-white w-full max-w-md rounded-2xl shadow-lg border overflow-hidden",children:[i.jsxs("div",{className:"flex items-center justify-between p-3 border-b",children:[i.jsx("div",{className:"font-bold",children:"Escanear cdigo"}),i.jsx("button",{className:"px-3 py-1 rounded bg-gray-200 hover:bg-gray-300",onClick:e,type:"button",children:"Cerrar"})]}),i.jsxs("div",{className:"p-3",children:[i.jsxs("div",{className:"relative w-full aspect-[3/4] bg-black rounded-xl overflow-hidden",children:[i.jsx("video",{ref:n,className:"w-full h-full object-cover",muted:!0,playsInline:!0,autoPlay:!0}),i.jsx("div",{className:"absolute inset-0 pointer-events-none",children:i.jsx("div",{className:"absolute left-1/2 top-1/2 -translate-x-1/2 -translate-y-1/2 w-[85%] h-40 border-2 border-white/70 rounded-xl"})})]}),s&&i.jsx("div",{className:"mt-3 text-sm text-red-600 bg-red-50 border border-red-200 rounded p-2",children:s}),i.jsx("div",{className:"mt-2 text-xs text-gray-600",children:"Apunt al cdigo de barras y mantenelo estable."})]})]})}):null}function gQe(){const{refreshKey:t,refresh:e}=Oc(),[r,n]=g.useState(!0),[a,s]=g.useState(""),[o,l]=g.useState([]),[c,u]=g.useState(""),[d,f]=g.useState(""),[A,h]=g.useState(0),[m,p]=g.useState(1),[x,v]=g.useState(""),[y,b]=g.useState(""),[w,j]=g.useState(null),[I,_]=g.useState(""),[S,E]=g.useState(""),[T,k]=g.useState(0),[B,D]=g.useState(1),[X,me]=g.useState(""),[pe,he]=g.useState(""),[ve,ae]=g.useState(""),[Pe,ke]=g.useState(""),[O,G]=g.useState(""),[z,U]=g.useState(!1),[Y,ee]=g.useState(""),[M,H]=g.useState(!1),[te,Ce]=g.useState("create"),[V,We]=g.useState(!1),[ie,J]=g.useState(""),[Oe,fe]=g.useState([]),[_e,Ue]=g.useState([]),[Ye,At]=g.useState(!1),[yt,bt]=g.useState(!1);g.useEffect(()=>{var we;const nt=window.matchMedia("(max-width: 900px)"),Ee=()=>bt(nt.matches);return Ee(),(we=nt.addEventListener)==null||we.call(nt,"change",Ee),()=>{var oe;return(oe=nt.removeEventListener)==null?void 0:oe.call(nt,"change",Ee)}},[]);const[Nt,jt]=g.useState(!0),[St,Ve]=g.useState(!0);g.useEffect(()=>{yt?(jt(!1),Ve(!1)):(jt(!0),Ve(!0))},[yt]);const[Te,qe]=g.useState(null),ge=g.useRef(!1),q=g.useRef(null);g.useEffect(()=>{n(!0),s("");const nt=mt(Se,"products_candies"),Ee=Yt(nt,In("name","asc")),we=jd(Ee,oe=>{const Fe=[],ce={};oe.forEach(P=>{const R=P.data(),L=String(R.barcode||"").trim()||void 0;L&&(ce[P.id]=L),Fe.push({id:P.id,name:R.name||"",category:R.category||"",providerPrice:Number(R.providerPrice||0),unitsPerPackage:Number(R.unitsPerPackage||1),barcode:L,packaging:String(R.packaging||R.empaque||"").trim()||void 0,createdAt:R.createdAt})});const Me=se.current||{};let Ke=!1;for(const P of Object.keys(ce))if((ce[P]||"")!==(Me[P]||"")){Ke=!0;break}l(Fe),se.current=ce,n(!1),!ye.current&&Ke&&(s(" Catlogo actualizado."),setTimeout(()=>s(""),3e3)),ye.current=!1},oe=>{console.error(oe),s(" Error sincronizando catlogo de dulces."),n(!1)});return()=>we()},[t]);const se=g.useRef({}),ye=g.useRef(!0),ue=g.useMemo(()=>{const nt=is(ve),Ee=String(Pe||"").trim(),we=String(O||"").trim().toLowerCase();return we?o.filter(oe=>String(oe.packaging||"").trim().toLowerCase()===we):!nt&&!Ee?o:o.filter(oe=>{const Fe=`${oe.category} ${oe.name}`.toLowerCase(),ce=nt?Fe.includes(nt):!0,Me=String(oe.barcode||""),Ke=Ee?Me.includes(Ee):!0;return ce&&Ke})},[o,ve,Pe,O]),Le=g.useMemo(()=>{const nt=new Set;return o.forEach(Ee=>{const we=String(Ee.category||"").trim();we&&nt.add(we)}),Array.from(nt).sort((Ee,we)=>Ee.localeCompare(we,"es"))},[o]),ct=()=>{u(""),f(""),h(0),p(1),v(""),b("")},ht=async nt=>{if(nt.preventDefault(),ge.current||r)return;s("");const Ee=String(c||"").trim(),we=String(d||"").trim(),oe=Math.max(0,Dh(A,0)),Fe=x0(m,1),ce=String(x||"").trim();if(!Ee)return s(" La categora es requerida.");if(!we)return s(" El nombre del producto es requerido.");if(oe<=0)return s(" El precio proveedor debe ser > 0.");if(Fe<=0)return s(" Und x paquete debe ser > 0.");const Me=`${is(Ee)}::${is(we)}`,Ke=Date.now();if(q.current&&q.current.key===Me&&Ke-q.current.ts<4e3){s(" Ya se est creando este producto.");return}if(o.some(R=>is(R.category)===is(Ee)&&is(R.name)===is(we)))return s(" Ya existe un producto con esa categora y nombre.");if(ce&&o.some(L=>String(L.barcode||"")===ce))return s(" Ya existe un producto con ese cdigo de barras.");ge.current=!0,q.current={key:Me,ts:Ke};try{if(n(!0),!(await kt(Yt(mt(Se,"products_candies"),cr("category","==",Ee),cr("name","==",we),gS(1)))).empty){s(" Ya existe un producto con esa categora y nombre.");return}if(ce&&!(await kt(Yt(mt(Se,"products_candies"),cr("barcode","==",ce),gS(1)))).empty){s(" Ya existe un producto con ese cdigo de barras.");return}const L={category:Ee,name:we,providerPrice:oe,unitsPerPackage:Fe,createdAt:Ar.now()};ce&&(L.barcode=ce);const K=String(y||"").trim();K&&(L.packaging=K),await Jn(mt(Se,"products_candies"),L),s(" Producto creado."),ct()}catch(R){console.error(R),s(" Error creando producto.")}finally{n(!1),ge.current=!1}},xe=nt=>{j(nt.id),_(nt.category),E(nt.name),k(nt.providerPrice),D(nt.unitsPerPackage||1),me(String(nt.barcode||"")),he(String(nt.packaging||"")),s("")},Ae=()=>{j(null),_(""),E(""),k(0),D(1),me(""),he("")},Re=async()=>{if(!w)return;s("");const nt=String(I||"").trim(),Ee=String(S||"").trim(),we=Math.max(0,Dh(T,0)),oe=x0(B,1),Fe=String(X||"").trim(),ce=String(pe||"").trim();if(!nt)return s(" La categora es requerida.");if(!Ee)return s(" El nombre del producto es requerido.");if(we<=0)return s(" El precio proveedor debe ser > 0.");if(oe<=0)return s(" Und x paquete debe ser > 0.");if(o.some(Ke=>Ke.id!==w&&is(Ke.category)===is(nt)&&is(Ke.name)===is(Ee)))return s(" Ya existe otro producto con esa categora y nombre.");if(Fe&&o.some(P=>P.id!==w&&String(P.barcode||"")===Fe))return s(" Ya existe otro producto con ese cdigo de barras.");try{n(!0);const Ke={category:nt,name:Ee,providerPrice:we,unitsPerPackage:oe,updatedAt:Ar.now()};Ke.barcode=Fe||"",Ke.packaging=ce||"",await kn(Gt(Se,"products_candies",w),Ke),l(P=>P.map(R=>R.id===w?{...R,category:nt,name:Ee,providerPrice:we,unitsPerPackage:oe,barcode:Fe||void 0,packaging:ce||void 0}:R).sort((R,L)=>R.name.localeCompare(L.name,"es"))),yt&&s(" Producto guardado."),Ae()}catch(Ke){console.error(Ke),s(" Error actualizando producto.")}finally{n(!1)}},lt=async nt=>{if(confirm(`Eliminar "${nt.name}" (${nt.category}) del catlogo?`))try{n(!0),await Kn(Gt(Se,"products_candies",nt.id)),l(we=>we.filter(oe=>oe.id!==nt.id)),s(" Producto eliminado.")}catch(we){console.error(we),s(" Error eliminando producto.")}finally{n(!1)}},Ne=()=>{const nt=[{Id:"",Categoria:"Gomitas",Producto:"Gomita Fresa",PrecioProveedor:120,UnidadesPorPaquete:24,Empaque:"Tarro",Codigo:"7445074183182"}],Ee=Qa.json_to_sheet(nt),we=Qa.book_new();Qa.book_append_sheet(we,Ee,"Productos");const oe=mP(we,{type:"array",bookType:"xlsx"}),Fe=new Blob([oe],{type:"application/vnd.openxmlformats-officedocument.spreadsheetml.sheet"}),ce=URL.createObjectURL(Fe),Me=document.createElement("a");Me.href=ce,Me.download="template_productos_dulces.xlsx",document.body.appendChild(Me),Me.click(),Me.remove(),URL.revokeObjectURL(ce)},De=nt=>{const Ee=[],we=[];nt.forEach((Fe,ce)=>{if(!Fe||typeof Fe!="object"||AQe(Fe))return;const Me=String(Zm(Fe,["Id","ID","productId","docId"])??"").trim(),Ke=String(Zm(Fe,["Categoria","Categora","Category","cat","category"])??"").trim(),P=String(Zm(Fe,["Producto","Product","Nombre","Name","producto","name"])??"").trim(),R=Zm(Fe,["PrecioProveedor","Precio Prov","Precio Prov.","ProviderPrice","Precio","Costo","providerPrice"]),L=Zm(Fe,["UnidadesPorPaquete","Und x Paquete","UnitsPerPackage","UPP","unitsPerPackage"]),K=Zm(Fe,["Codigo","Cdigo","Barcode","barcode","EAN","UPC","Code"]),re=String(K??"").trim(),de=Zm(Fe,["Empaque","Packaging","PackagingType","Pack","Formato"]),Ge=String(de??"").trim(),rt=Math.max(0,Dh(R,0)),ft=x0(L,1),et=ce+2;Ke||we.push(`Fila ${et}: falta Categoria.`),P||we.push(`Fila ${et}: falta Producto/Nombre.`),rt<=0&&we.push(`Fila ${et}: PrecioProveedor debe ser > 0.`),ft<=0&&we.push(`Fila ${et}: UnidadesPorPaquete debe ser > 0.`),Ke&&P&&rt>0&&ft>0&&Ee.push({id:Me||void 0,category:Ke,name:P,providerPrice:rt,unitsPerPackage:ft,barcode:re||void 0,packaging:Ge||void 0,_raw:Fe})});const oe=new Map;for(const Fe of Ee){const ce=Fe.id?`id::${Fe.id}`:`${is(Fe.category)}::${is(Fe.name)}`;oe.set(ce,Fe)}return{rows:Array.from(oe.values()),errors:we}},xt=async nt=>{if(s(""),Ue([]),fe([]),J((nt==null?void 0:nt.name)||""),!nt)return;const Ee=nt.name.toLowerCase(),we=Ee.endsWith(".xlsx")||Ee.endsWith(".xls"),oe=Ee.endsWith(".csv");if(!we&&!oe){Ue(["Solo se permiten archivos .xlsx, .xls o .csv"]);return}try{At(!0);const Fe=new FileReader,ce=await new Promise((re,de)=>{Fe.onerror=()=>de(new Error("No se pudo leer el archivo.")),Fe.onload=()=>re(Fe.result),Fe.readAsArrayBuffer(nt)}),Me=Vv(new Uint8Array(ce),{type:"array"}),Ke=Me.SheetNames[0],P=Me.Sheets[Ke],R=Qa.sheet_to_json(P,{defval:""}),{rows:L,errors:K}=De(R);fe(L),Ue(K),L.length===0&&K.length===0&&Ue(["No se encontraron filas vlidas para importar."])}catch(Fe){console.error(Fe),Ue(["Error leyendo el archivo. Revis que no est corrupto."])}finally{At(!1)}},_t=(nt,Ee)=>{fe(we=>{const oe=[...we],Fe=oe[nt];return Fe?(oe[nt]={...Fe,...Ee},oe):we})},Et=async()=>{if(s(""),_e.length>0){s(" Correg los errores antes de importar.");return}if(Oe.length===0){s(" No hay filas para importar.");return}try{At(!0);const nt={},Ee={},we={};o.forEach(Me=>{nt[Me.id]=Me,Ee[`${is(Me.category)}::${is(Me.name)}`]=Me;const Ke=String(Me.barcode||"").trim();Ke&&(we[Ke]=Me)});const oe=tu(Se);let Fe=0,ce=0;for(const Me of Oe){const Ke=String(Me.category||"").trim(),P=String(Me.name||"").trim(),R=Math.max(0,Dh(Me.providerPrice,0)),L=x0(Me.unitsPerPackage,1),K=String(Me.barcode||"").trim();if(!Ke||!P||R<=0||L<=0)continue;let re;if(Me.id&&nt[Me.id])re=nt[Me.id];else{const de=`${is(Ke)}::${is(P)}`;re=Ee[de]}if(!re&&K&&we[K]&&(re=we[K]),re){const de={category:Ke,name:P,providerPrice:R,unitsPerPackage:L,updatedAt:Ar.now()};Me.barcode!=null&&(de.barcode=K||""),Me.packaging!=null&&(de.packaging=String(Me.packaging||"")||""),oe.update(Gt(Se,"products_candies",re.id),de),ce+=1}else{const de=Gt(mt(Se,"products_candies")),Ge={category:Ke,name:P,providerPrice:R,unitsPerPackage:L,createdAt:Ar.now()};K&&(Ge.barcode=K),Me.packaging&&(Ge.packaging=Me.packaging),oe.set(de,Ge),Fe+=1}}await oe.commit(),s(` Importacin lista. Creados: ${Fe}, Actualizados: ${ce}`),We(!1),fe([]),Ue([]),J(""),e()}catch(nt){console.error(nt),s(" Error importando productos a Firestore.")}finally{At(!1)}},Mt=g.useMemo(()=>{const nt=new Set(o.map(ce=>ce.id)),Ee=new Set(o.map(ce=>`${is(ce.category)}::${is(ce.name)}`)),we=new Set(o.map(ce=>String(ce.barcode||"").trim()).filter(Boolean));let oe=0,Fe=0;for(const ce of Oe){if(ce.id&&nt.has(ce.id)){oe+=1;continue}const Me=`${is(ce.category)}::${is(ce.name)}`;if(Ee.has(Me)){oe+=1;continue}const Ke=String(ce.barcode||"").trim();if(Ke&&we.has(Ke)){oe+=1;continue}Fe+=1}return{willCreate:Fe,willUpdate:oe,total:Oe.length}},[Oe,o]);return i.jsxs("div",{className:"max-w-7xl mx-auto",children:[i.jsxs("div",{className:"flex items-center justify-between mb-3",children:[i.jsx("h2",{className:"text-2xl font-bold",children:"Catalogo"}),i.jsx("div",{className:"flex gap-2",children:i.jsxs("div",{className:"flex gap-2",children:[i.jsx(Fc,{onClick:e,loading:r||Ye}),!yt&&i.jsx("button",{type:"button",className:"px-3 py-2 rounded bg-white border shadow-sm",onClick:()=>{We(!0),fe([]),Ue([]),J("")},children:"Importar"})]})})]}),yt&&i.jsxs("div",{className:"flex flex-col gap-2 mb-3",children:[i.jsx("button",{type:"button",className:"w-full px-3 py-2 rounded bg-gray-900 text-white",onClick:()=>jt(nt=>!nt),children:Nt?"Ocultar creacin":"Crear producto"}),i.jsx("button",{type:"button",className:"w-full px-3 py-2 rounded bg-white border shadow-sm",onClick:()=>{We(!0),fe([]),Ue([]),J("")},children:"Importar"}),i.jsx("button",{type:"button",className:"w-full px-3 py-2 rounded bg-gray-200",onClick:()=>Ve(nt=>!nt),children:St?"Ocultar filtros":"Mostrar filtros"}),St&&i.jsxs("div",{className:"bg-white p-3 rounded shadow-sm border",children:[i.jsx("label",{className:"block font-semibold",children:"Empaque"}),i.jsxs("select",{className:"w-full border rounded px-2 py-1",value:O,onChange:nt=>G(nt.target.value),children:[i.jsx("option",{value:"",children:"Todos"}),i.jsx("option",{value:"Tarro",children:"Tarro"}),i.jsx("option",{value:"Bolsa",children:"Bolsa"}),i.jsx("option",{value:"Ristra",children:"Ristra"}),i.jsx("option",{value:"Caja",children:"Caja"}),i.jsx("option",{value:"Vaso",children:"Vaso"}),i.jsx("option",{value:"Pana",children:"Pana"})]})]})]}),Nt&&i.jsxs("form",{onSubmit:ht,className:"bg-white p-3 rounded shadow border mb-4 grid grid-cols-1 md:grid-cols-6 gap-3 items-end text-sm",children:[i.jsxs("div",{children:[i.jsx("label",{className:"block font-semibold",children:"Categora"}),i.jsx("input",{className:"w-full border rounded px-2 py-1",value:c,onChange:nt=>u(nt.target.value),placeholder:"Ej: Gomitas"})]}),i.jsxs("div",{className:"md:col-span-2",children:[i.jsx("label",{className:"block font-semibold",children:"Producto"}),i.jsx("input",{className:"w-full border rounded px-2 py-1",value:d,onChange:nt=>f(nt.target.value),placeholder:"Ej: Gomita Fresa"})]}),i.jsxs("div",{children:[i.jsx("label",{className:"block font-semibold",children:"Empaque"}),i.jsxs("select",{className:"w-full border rounded px-2 py-1",value:y,onChange:nt=>b(nt.target.value),children:[i.jsx("option",{value:"",children:"Seleccionar"}),i.jsx("option",{value:"Tarro",children:"Tarro"}),i.jsx("option",{value:"Bolsa",children:"Bolsa"}),i.jsx("option",{value:"Ristra",children:"Ristra"}),i.jsx("option",{value:"Caja",children:"Caja"}),i.jsx("option",{value:"Vaso",children:"Vaso"}),i.jsx("option",{value:"Pana",children:"Pana"})]})]}),i.jsxs("div",{children:[i.jsx("label",{className:"block font-semibold",children:"Precio proveedor (paq)"}),i.jsx("input",{type:"number",step:"0.01",inputMode:"decimal",className:"w-full border rounded px-2 py-1 text-right",value:Number.isNaN(A)?"":A,onChange:nt=>h(Math.max(0,Dh(nt.target.value,0)))})]}),i.jsxs("div",{children:[i.jsx("label",{className:"block font-semibold",children:"Und x paquete"}),i.jsx("input",{type:"number",min:1,className:"w-full border rounded px-2 py-1 text-right",value:m,onChange:nt=>p(x0(nt.target.value,1))})]}),i.jsxs("div",{children:[i.jsx("label",{className:"block font-semibold",children:"Cdigo (opcional)"}),i.jsxs("div",{className:"flex gap-2",children:[i.jsx("input",{className:"w-full border rounded px-2 py-1",value:x,onChange:nt=>v(nt.target.value),placeholder:"EAN/UPC"}),i.jsx("button",{type:"button",className:"px-3 py-2 rounded bg-gray-800 text-white hover:bg-black whitespace-nowrap",onClick:()=>{Ce("create"),H(!0)},children:"Escanear"})]})]}),i.jsxs("div",{className:"md:col-span-6 flex justify-end gap-2",children:[i.jsx("button",{type:"button",className:"px-3 py-2 rounded bg-gray-200 hover:bg-gray-300",onClick:ct,children:"Limpiar"}),i.jsx("button",{type:"submit",className:"px-3 py-2 rounded bg-green-600 text-white hover:bg-green-700",disabled:r,children:"Crear producto"})]})]}),St&&i.jsxs("div",{className:"bg-white p-3 rounded shadow border mb-3 flex flex-col md:flex-row gap-3 items-center text-sm",children:[i.jsxs("div",{className:"w-full md:w-1/2",children:[i.jsx("label",{className:"block font-semibold",children:"Buscar"}),i.jsx("input",{className:"w-full border rounded px-2 py-1",value:ve,onChange:nt=>ae(nt.target.value),placeholder:"Buscar por categora o producto"}),i.jsxs("div",{className:"mt-2",children:[i.jsx("label",{className:"block font-semibold",children:"Empaque"}),i.jsxs("select",{className:"w-full border rounded px-2 py-1",value:O,onChange:nt=>G(nt.target.value),children:[i.jsx("option",{value:"",children:"Todos"}),i.jsx("option",{value:"Tarro",children:"Tarro"}),i.jsx("option",{value:"Bolsa",children:"Bolsa"}),i.jsx("option",{value:"Ristra",children:"Ristra"}),i.jsx("option",{value:"Caja",children:"Caja"}),i.jsx("option",{value:"Vaso",children:"Vaso"}),i.jsx("option",{value:"Pana",children:"Pana"})]})]})]}),i.jsxs("div",{className:"w-full md:w-1/2",children:[i.jsx("label",{className:"block font-semibold",children:"Buscar por cdigo"}),i.jsx("input",{className:"w-full border rounded px-2 py-1",value:Pe,onChange:nt=>ke(nt.target.value),placeholder:"Ej: 7445074183182"}),i.jsx("div",{className:"mt-2 md:mt-0",children:i.jsx("button",{type:"button",className:"w-full md:w-auto px-3 py-2 rounded bg-gray-800 text-white",onClick:()=>{Ce("search"),H(!0),Ve(!0)},children:"Escanear producto"})}),i.jsx("div",{className:"mt-2 md:mt-0",children:i.jsx("button",{type:"button",className:"w-full md:w-auto px-3 py-2 rounded bg-gray-200 hover:bg-gray-300",onClick:()=>{ae(""),ke("")},children:"Limpiar filtros"})})]}),i.jsxs("div",{className:"w-full md:w-auto text-right",children:[i.jsx("div",{className:"text-xs text-gray-600",children:"Productos en catlogo"}),i.jsx("div",{className:"text-lg font-semibold",children:ue.length})]})]}),yt?i.jsx("div",{className:"space-y-2",children:r?i.jsx("div",{className:"bg-white border rounded p-4 text-center",children:"Cargando"}):ue.length===0?i.jsx("div",{className:"bg-white border rounded p-4 text-center",children:"Sin productos."}):ue.map(nt=>{const Ee=w===nt.id,we=Te===nt.id,oe=!!String(nt.barcode||"").trim();return i.jsxs("div",{className:"bg-white border rounded-2xl shadow-sm overflow-hidden",children:[i.jsxs("button",{type:"button",className:"w-full px-3 py-3 flex items-center justify-between text-left",onClick:()=>qe(Fe=>Fe===nt.id?null:nt.id),children:[i.jsxs("div",{className:"min-w-0",children:[i.jsx("div",{className:"font-bold truncate",children:nt.name}),i.jsx("div",{className:"text-xs text-gray-600 truncate",children:nt.category})]}),i.jsxs("div",{className:"text-right",children:[i.jsx("div",{className:"text-xs text-gray-600",children:"Precio proveedor"}),i.jsx("div",{className:"font-bold tabular-nums",children:Y5(nt.providerPrice)})]})]}),we&&i.jsx("div",{className:"px-3 pb-3 border-t",children:i.jsxs("div",{className:"pt-3 space-y-2 text-sm",children:[i.jsxs("div",{className:"grid grid-cols-2 gap-2",children:[i.jsxs("div",{children:[i.jsx("div",{className:"text-xs text-gray-600",children:"Categora"}),Ee?i.jsx("input",{className:"w-full border rounded px-2 py-1",value:I,onChange:Fe=>_(Fe.target.value)}):i.jsx("div",{className:"font-semibold",children:nt.category})]}),i.jsxs("div",{children:[i.jsx("div",{className:"text-xs text-gray-600",children:"Und x paquete"}),Ee?i.jsx("input",{type:"number",min:1,className:"w-full border rounded px-2 py-1 text-right",value:B,onChange:Fe=>D(x0(Fe.target.value,1))}):i.jsx("div",{className:"font-semibold text-right tabular-nums",children:nt.unitsPerPackage})]}),i.jsxs("div",{className:"col-span-2",children:[i.jsx("div",{className:"text-xs text-gray-600",children:"Empaque"}),Ee?i.jsxs("select",{className:"w-full border rounded px-2 py-1",value:pe,onChange:Fe=>he(Fe.target.value),children:[i.jsx("option",{value:"",children:"Seleccionar"}),i.jsx("option",{value:"Tarro",children:"Tarro"}),i.jsx("option",{value:"Bolsa",children:"Bolsa"}),i.jsx("option",{value:"Ristra",children:"Ristra"}),i.jsx("option",{value:"Caja",children:"Caja"}),i.jsx("option",{value:"Vaso",children:"Vaso"}),i.jsx("option",{value:"Pana",children:"Pana"})]}):i.jsx("div",{className:"font-semibold",children:nt.packaging||""})]}),i.jsxs("div",{children:[i.jsx("div",{className:"text-xs text-gray-600",children:"Precio proveedor"}),Ee?i.jsx("input",{type:"number",step:"0.01",inputMode:"decimal",className:"w-full border rounded px-2 py-1 text-right",value:Number.isNaN(T)?"":T,onChange:Fe=>k(Math.max(0,Dh(Fe.target.value,0)))}):i.jsx("div",{className:"font-semibold tabular-nums",children:Y5(nt.providerPrice)})]}),i.jsxs("div",{children:[i.jsx("div",{className:"text-xs text-gray-600",children:"Cdigo"}),Ee?i.jsxs("div",{className:"flex gap-2",children:[i.jsx("input",{className:"flex-1 border rounded px-2 py-1",value:X,onChange:Fe=>me(Fe.target.value),placeholder:"EAN/UPC"}),i.jsx("button",{type:"button",className:"px-3 py-2 rounded bg-gray-800 text-white",onClick:()=>{Ce("edit"),H(!0)},children:"Escanear"})]}):oe?i.jsx("button",{type:"button",className:"px-2 py-1 rounded bg-green-100 text-green-700 hover:bg-green-200",onClick:()=>{ee(String(nt.barcode||"").trim()),U(!0)},children:"Ver cdigo"}):i.jsx("div",{className:"text-gray-600",children:"No"})]})]}),i.jsx("div",{className:"pt-2 flex gap-2",children:Ee?i.jsxs(i.Fragment,{children:[i.jsx("button",{className:"flex-1 px-3 py-2 rounded bg-blue-600 text-white",onClick:Re,type:"button",children:"Guardar"}),i.jsx("button",{className:"flex-1 px-3 py-2 rounded bg-gray-800 text-white",onClick:()=>{Ce("edit"),H(!0)},type:"button",children:"Escanear"}),i.jsx("button",{className:"flex-1 px-3 py-2 rounded bg-gray-200",onClick:Ae,type:"button",children:"Cancelar"})]}):i.jsxs(i.Fragment,{children:[i.jsx("button",{className:"flex-1 px-3 py-2 rounded bg-yellow-400",onClick:()=>xe(nt),type:"button",children:"Editar"}),i.jsx("button",{className:"flex-1 px-3 py-2 rounded bg-red-600 text-white",onClick:()=>lt(nt),type:"button",children:"Borrar"})]})})]})})]},nt.id)})}):i.jsx("div",{className:"bg-white rounded shadow border w-full overflow-x-auto",children:i.jsxs("table",{className:"min-w-[1050px] w-full text-xs md:text-sm",children:[i.jsx("thead",{className:"bg-gray-100",children:i.jsxs("tr",{className:"whitespace-nowrap",children:[i.jsx("th",{className:"p-2 border text-left",children:"Categora"}),i.jsx("th",{className:"p-2 border text-left",children:"Producto"}),i.jsx("th",{className:"p-2 border text-left",children:"Empaque"}),i.jsx("th",{className:"p-2 border text-right",children:"Precio proveedor"}),i.jsx("th",{className:"p-2 border text-right",children:"Und x paquete"}),i.jsx("th",{className:"p-2 border text-center",children:"Cdigo"}),i.jsx("th",{className:"p-2 border text-center",children:"Acciones"})]})}),i.jsx("tbody",{children:r?i.jsx("tr",{children:i.jsx("td",{className:"p-4 text-center",colSpan:7,children:"Cargando"})}):ue.length===0?i.jsx("tr",{children:i.jsx("td",{className:"p-4 text-center",colSpan:7,children:"Sin productos."})}):ue.map(nt=>{const Ee=w===nt.id,we=!!String(nt.barcode||"").trim();return i.jsxs("tr",{className:"align-top",children:[i.jsx("td",{className:"p-2 border",children:Ee?i.jsx("input",{className:"w-full border rounded px-2 py-1",value:I,onChange:oe=>_(oe.target.value)}):nt.category}),i.jsx("td",{className:"p-2 border",children:Ee?i.jsx("input",{className:"w-full border rounded px-2 py-1",value:S,onChange:oe=>E(oe.target.value)}):nt.name}),i.jsx("td",{className:"p-2 border",children:Ee?i.jsxs("select",{className:"w-full border rounded px-2 py-1",value:pe,onChange:oe=>he(oe.target.value),children:[i.jsx("option",{value:"",children:""}),i.jsx("option",{value:"Tarro",children:"Tarro"}),i.jsx("option",{value:"Bolsa",children:"Bolsa"}),i.jsx("option",{value:"Ristra",children:"Ristra"}),i.jsx("option",{value:"Caja",children:"Caja"}),i.jsx("option",{value:"Vaso",children:"Vaso"}),i.jsx("option",{value:"Pana",children:"Pana"})]}):nt.packaging||""}),i.jsx("td",{className:"p-2 border text-right tabular-nums",children:Ee?i.jsx("input",{type:"number",step:"0.01",inputMode:"decimal",className:"w-28 border rounded px-2 py-1 text-right",value:Number.isNaN(T)?"":T,onChange:oe=>k(Math.max(0,Dh(oe.target.value,0)))}):Y5(nt.providerPrice)}),i.jsx("td",{className:"p-2 border text-right tabular-nums",children:Ee?i.jsx("input",{type:"number",min:1,className:"w-24 border rounded px-2 py-1 text-right",value:B,onChange:oe=>D(x0(oe.target.value,1))}):nt.unitsPerPackage}),i.jsx("td",{className:"p-2 border text-center",children:Ee?i.jsxs("div",{className:"flex gap-2 justify-center",children:[i.jsx("input",{className:"w-44 border rounded px-2 py-1",value:X,onChange:oe=>me(oe.target.value),placeholder:"EAN/UPC"}),i.jsx("button",{type:"button",className:"px-2 py-1 rounded bg-gray-800 text-white hover:bg-black",onClick:()=>{Ce("edit"),H(!0)},children:"Escanear"})]}):we?i.jsx("button",{type:"button",className:"px-2 py-1 rounded bg-green-100 text-green-700 hover:bg-green-200",onClick:()=>{ee(String(nt.barcode||"").trim()),U(!0)},children:"S"}):i.jsx("span",{className:"px-2 py-1 rounded bg-gray-100 text-gray-600",children:"No"})}),i.jsx("td",{className:"p-2 border",children:Ee?i.jsxs("div",{className:"flex gap-2 justify-center",children:[i.jsx("button",{className:"px-2 py-1 rounded bg-blue-600 text-white hover:bg-blue-700",onClick:Re,type:"button",children:"Guardar"}),i.jsx("button",{className:"px-2 py-1 rounded bg-gray-200 hover:bg-gray-300",onClick:Ae,type:"button",children:"Cancelar"})]}):i.jsxs("div",{className:"flex gap-2 justify-center flex-wrap",children:[i.jsx("button",{className:"px-2 py-1 rounded bg-yellow-400 hover:bg-yellow-500",onClick:()=>xe(nt),type:"button",children:"Editar"}),i.jsx("button",{className:"px-2 py-1 rounded bg-red-600 text-white hover:bg-red-700",onClick:()=>lt(nt),type:"button",children:"Borrar"})]})})]},nt.id)})})]})}),a?yt&&a===" Producto guardado."?i.jsxs("div",{className:"mt-2 flex items-center gap-3",children:[i.jsx("div",{className:"flex-1 text-sm",children:a}),i.jsx("button",{className:"px-3 py-1 rounded bg-blue-600 text-white",onClick:()=>{s(""),Ae(),H(!1)},children:"Aceptar"})]}):i.jsx("p",{className:"mt-2 text-sm",children:a}):null,i.jsx(mQe,{open:z,code:Y,onClose:()=>U(!1)}),i.jsx(pQe,{open:M,onClose:()=>H(!1),onDetected:async nt=>{const Ee=String(nt||"").trim();if(Ee){if(te==="edit"&&w){if(o.some(oe=>oe.id!==w&&String(oe.barcode||"")===Ee)){s(" Ya existe otro producto con ese cdigo de barras."),me(Ee),H(!1);return}try{await kn(Gt(Se,"products_candies",w),{barcode:Ee}),l(oe=>oe.map(Fe=>Fe.id===w?{...Fe,barcode:Ee}:Fe)),me(Ee),yt&&s(" Producto guardado.")}catch(oe){console.error(oe),s(" Error guardando cdigo de barras.")}finally{H(!1)}return}if(te==="search"){ke(Ee),H(!1);return}te==="create"?v(nt):me(nt)}}}),V&&i.jsx("div",{className:"fixed inset-0 bg-black/40 flex items-center justify-center z-50",children:i.jsxs("div",{className:"bg-white w-full max-w-6xl max-h-[90vh] overflow-y-auto rounded shadow-lg p-5 text-sm",children:[i.jsxs("div",{className:"flex items-center justify-between mb-3",children:[i.jsx("h3",{className:"text-xl font-bold",children:"Importar productos (.xlsx / .csv)"}),i.jsx("button",{className:"px-3 py-1 rounded bg-gray-200 hover:bg-gray-300",onClick:()=>We(!1),children:"Cerrar"})]}),i.jsxs("div",{className:"bg-gray-50 border rounded p-3 mb-3",children:[i.jsxs("div",{className:"flex flex-col md:flex-row gap-3 md:items-end md:justify-between",children:[i.jsxs("div",{children:[i.jsx("div",{className:"font-semibold",children:"1) Sub tu archivo"}),i.jsx("div",{className:"text-xs text-gray-600",children:"Columnas esperadas (flexible): Id (opcional), Categoria, Producto/Nombre, PrecioProveedor, UnidadesPorPaquete, Empaque (opcional), Codigo (opcional)."})]}),i.jsx("button",{className:"px-3 py-2 rounded bg-gray-200 hover:bg-gray-300",onClick:Ne,type:"button",children:"Descargar template .xlsx"})]}),i.jsxs("div",{className:"mt-3 flex flex-col md:flex-row gap-3 md:items-center",children:[i.jsx("input",{type:"file",accept:".xlsx,.xls,.csv",onChange:nt=>{var Ee;return xt(((Ee=nt.target.files)==null?void 0:Ee[0])||null)}}),ie&&i.jsxs("span",{className:"text-xs text-gray-600",children:["Archivo: ",i.jsx("b",{children:ie})]}),Ye&&i.jsx("span",{className:"text-xs",children:"Procesando"})]})]}),_e.length>0&&i.jsxs("div",{className:"bg-red-50 border border-red-200 rounded p-3 mb-3",children:[i.jsx("div",{className:"font-semibold text-red-700 mb-2",children:"Errores encontrados"}),i.jsx("ul",{className:"list-disc pl-5 text-red-700 text-xs space-y-1",children:_e.slice(0,50).map((nt,Ee)=>i.jsx("li",{children:nt},Ee))})]}),i.jsxs("div",{className:"bg-white border rounded p-3",children:[i.jsxs("div",{className:"flex flex-wrap gap-4 items-center justify-between mb-2",children:[i.jsxs("div",{children:[i.jsx("div",{className:"font-semibold",children:"2) Previsualizacin (editable)"}),i.jsxs("div",{className:"text-xs text-gray-600",children:["Se importarn ",Mt.total," filas (Crear:"," ",Mt.willCreate," / Actualizar:"," ",Mt.willUpdate,")"]})]}),i.jsx("button",{className:"px-3 py-2 rounded bg-indigo-600 text-white hover:bg-indigo-700 disabled:opacity-50",onClick:Et,disabled:Ye||Oe.length===0||_e.length>0,type:"button",children:"Importar a Firestore"})]}),i.jsxs("div",{className:"overflow-x-auto border rounded",children:[i.jsxs("table",{className:"min-w-[1250px] w-full text-xs",children:[i.jsx("thead",{className:"bg-gray-100",children:i.jsxs("tr",{className:"whitespace-nowrap",children:[i.jsx("th",{className:"p-2 border text-left",children:"Id (opcional)"}),i.jsx("th",{className:"p-2 border text-left",children:"Categora"}),i.jsx("th",{className:"p-2 border text-left",children:"Producto"}),i.jsx("th",{className:"p-2 border text-right",children:"Precio proveedor"}),i.jsx("th",{className:"p-2 border text-right",children:"Und x paquete"}),i.jsx("th",{className:"p-2 border text-left",children:"Empaque (opcional)"}),i.jsx("th",{className:"p-2 border text-left",children:"Codigo (opcional)"}),i.jsx("th",{className:"p-2 border text-center",children:"Accin"})]})}),i.jsx("tbody",{children:Oe.length===0?i.jsx("tr",{children:i.jsx("td",{colSpan:8,className:"p-4 text-center text-gray-500",children:"Sub un archivo para ver la previsualizacin."})}):Oe.slice(0,300).map((nt,Ee)=>{const we=nt.id?o.some(Me=>Me.id===nt.id):!1,oe=o.some(Me=>`${is(Me.category)}::${is(Me.name)}`==`${is(nt.category)}::${is(nt.name)}`),Fe=nt.barcode?o.some(Me=>String(Me.barcode||"")===nt.barcode):!1,ce=we||oe||Fe;return i.jsxs("tr",{className:"whitespace-nowrap",children:[i.jsx("td",{className:"p-2 border",children:i.jsx("input",{className:"w-56 border rounded px-2 py-1",value:nt.id||"",onChange:Me=>_t(Ee,{id:Me.target.value.trim()||void 0}),placeholder:"docId (si quers update exacto)"})}),i.jsx("td",{className:"p-2 border",children:i.jsx("input",{className:"w-56 border rounded px-2 py-1",value:nt.category,onChange:Me=>_t(Ee,{category:Me.target.value}),list:"categories-list"})}),i.jsx("td",{className:"p-2 border",children:i.jsx("input",{className:"w-72 border rounded px-2 py-1",value:nt.name,onChange:Me=>_t(Ee,{name:Me.target.value})})}),i.jsx("td",{className:"p-2 border text-right tabular-nums",children:i.jsx("input",{type:"number",step:"0.01",inputMode:"decimal",className:"w-28 border rounded px-2 py-1 text-right",value:Number.isNaN(nt.providerPrice)?"":nt.providerPrice,onChange:Me=>_t(Ee,{providerPrice:Math.max(0,Dh(Me.target.value,0))})})}),i.jsx("td",{className:"p-2 border text-right tabular-nums",children:i.jsx("input",{type:"number",min:1,className:"w-24 border rounded px-2 py-1 text-right",value:nt.unitsPerPackage,onChange:Me=>_t(Ee,{unitsPerPackage:x0(Me.target.value,1)})})}),i.jsx("td",{className:"p-2 border",children:i.jsx("input",{className:"w-56 border rounded px-2 py-1",value:nt.packaging||"",onChange:Me=>_t(Ee,{packaging:Me.target.value.trim()||void 0}),placeholder:"Tarro, Bolsa..."})}),i.jsx("td",{className:"p-2 border",children:i.jsx("input",{className:"w-56 border rounded px-2 py-1",value:nt.barcode||"",onChange:Me=>_t(Ee,{barcode:Me.target.value.trim()||void 0}),placeholder:"EAN/UPC (opcional)"})}),i.jsx("td",{className:"p-2 border text-center",children:i.jsx("span",{className:`px-2 py-0.5 rounded text-[10px] ${ce?"bg-yellow-100 text-yellow-700":"bg-green-100 text-green-700"}`,children:ce?"ACTUALIZA":"CREA"})})]},`${nt.id||""}-${Ee}`)})})]}),i.jsx("datalist",{id:"categories-list",children:Le.map(nt=>i.jsx("option",{value:nt},nt))})]}),Oe.length>300&&i.jsxs("div",{className:"text-xs text-gray-600 mt-2",children:["Mostrando 300 de ",Oe.length," filas (el import importa todas)."]})]})]})})]})}function Fse(t){const e=Math.max(1,Math.floor(Number(t.unitsPerPackage||1))),r=Number(t.totalUnits||0),n=Number(t.quantity||0),a=Number(t.packages||0);return r>0?Math.floor(r):n>0?Math.floor(n):a>0?Math.floor(a*e):0}function J5(t){const e=Number(t.remaining);return Number.isFinite(e)&&e>0?Math.floor(e):Fse(t)}const Ose=t=>Math.max(0,Math.floor(Number(t??0)));function xQe(t){return Ose(t.packages??t.totalPackages??t.packs??t.packagesInitial??t.initialPackages??0)}function vQe(t){return Ose(t.remainingPackages??t.remainingPacks??t.packsRemaining??t.packagesRemaining??t.remaining_packages??0)}async function pF(t){const e=String(t||"").trim();if(!e)return{created:0,skipped:0,updated:0,totalItems:0};let r=Gt(Se,"candy_main_orders",e),n=await zs(r);if(!n.exists()){const p=Yt(mt(Se,"candy_main_orders"),cr("orderId","==",e)),x=await kt(p);if(x.empty)throw new Error("Orden maestra no existe");r=x.docs[0].ref,n=x.docs[0]}const a=n.data(),s=r.id,o=Array.isArray(a.items)?a.items:[];if(!o.length)return{created:0,skipped:0,updated:0,totalItems:0};const l=await kt(Yt(mt(Se,"inventory_candies"),cr("orderId","==",s))),c=new Set,u=new Map;l.forEach(p=>{const x=p.data(),v=String(x.productId||"").trim();if(v&&c.add(v),!v)return;const y=u.get(v)||[];y.push({ref:p.ref,data:x}),u.set(v,y)});const d=tu(Se);let f=0,A=0,h=0;const m=String(a.date||"");for(const p of o){const x=String(p.id||p.productId||"").trim();if(!x)continue;const v=u.get(x)||[];if(v.length>0){if(v.length===1&&v.every(k=>{const B=Math.max(0,Math.floor(Number(k.data.remainingPackages||0))),D=Math.max(0,Math.floor(Number(k.data.remaining||0))),X=Math.max(0,Math.floor(Number(k.data.totalUnits||0)));return B<=0&&D<=0&&X<=0})){const k=v[0].ref,B=Math.max(1,Math.floor(Number(p.unitsPerPackage??p.units_per_package??p.upp??1))),D=Number(p.packages??p.totalPackages??p.packagesInitial??p.initialPackages??0),X=Number(p.remainingPackages??p.remainingPacks??p.packagesRemaining??0);let me=Math.max(0,Math.floor(D||0)),pe=Math.max(0,Math.floor(X||0));me<=0&&pe>0&&(me=pe),pe<=0&&(pe=me);const he=me*B,ve=pe*B;d.update(k,{productId:x,productName:String(p.name||p.productName||""),category:String(p.category||""),measurement:"unidad",quantity:he,remaining:ve,packages:me,remainingPackages:pe,unitsPerPackage:B,totalUnits:he,providerPrice:Number(p.providerPrice??p.provider_price??p.priceProvider??p.costProvider??0),subtotal:Number(p.subtotal||0),totalRivas:Number(p.totalRivas||0),totalSanJorge:Number(p.totalSanJorge||0),totalIsla:Number(p.totalIsla||0),gainRivas:Number(p.gainRivas||0),gainSanJorge:Number(p.gainSanJorge||0),gainIsla:Number(p.gainIsla||0),unitPriceRivas:Number(p.unitPriceRivas||0),unitPriceSanJorge:Number(p.unitPriceSanJorge||0),unitPriceIsla:Number(p.unitPriceIsla||0),date:m,status:"PENDIENTE",orderId:s,updatedAt:Ar.now()}),h+=1;continue}A+=1;continue}const y=Math.max(1,Math.floor(Number(p.unitsPerPackage??p.units_per_package??p.upp??1))),b=Number(p.packages??p.totalPackages??p.packagesInitial??p.initialPackages??0),w=Number(p.remainingPackages??p.remainingPacks??p.packagesRemaining??0);let j=Math.max(0,Math.floor(b||0)),I=Math.max(0,Math.floor(w||0));j<=0&&I>0&&(j=I),I<=0&&(I=j);const _=j*y,S=I*y,E=Gt(mt(Se,"inventory_candies"));d.set(E,{productId:x,productName:String(p.name||p.productName||""),category:String(p.category||""),measurement:"unidad",quantity:_,remaining:S,packages:j,remainingPackages:I,unitsPerPackage:y,totalUnits:_,providerPrice:Number(p.providerPrice??p.provider_price??p.priceProvider??p.costProvider??0),subtotal:Number(p.subtotal||0),totalRivas:Number(p.totalRivas||0),totalSanJorge:Number(p.totalSanJorge||0),totalIsla:Number(p.totalIsla||0),gainRivas:Number(p.gainRivas||0),gainSanJorge:Number(p.gainSanJorge||0),gainIsla:Number(p.gainIsla||0),unitPriceRivas:Number(p.unitPriceRivas||0),unitPriceSanJorge:Number(p.unitPriceSanJorge||0),unitPriceIsla:Number(p.unitPriceIsla||0),date:m,createdAt:Ar.now(),status:"PENDIENTE",orderId:s}),f+=1}return(f>0||h>0)&&await d.commit(),{created:f,skipped:A,updated:h,totalItems:o.length}}async function yQe(t){const e=Gt(Se,"candy_main_orders",t);if((await zs(e)).exists())return e;const n=Yt(mt(Se,"candy_main_orders"),cr("orderId","==",t)),a=await kt(n);return a.empty?null:Gt(Se,"candy_main_orders",a.docs[0].id)}async function Z5(t){if(!t)return;const e=await yQe(t);if(!e)return;const r=Yt(mt(Se,"inventory_candies"),cr("orderId","==",t)),n=await kt(r),a=new Map;n.forEach(l=>{const c=l.data(),u=String(c.productId||"");if(!u)return;const d=xQe(c),f=vQe(c),A=Math.max(1,Math.floor(Number(c.unitsPerPackage||1))),h=Number(c.providerPrice||0),m=Number(c.unitPriceRivas||0),p=Number(c.unitPriceSanJorge||0),x=Number(c.unitPriceIsla||0),v=h*d,y=m*d,b=p*d,w=x*d,j=y-v,I=b-v,_=w-v;a.has(u)||a.set(u,{productId:u,name:String(c.productName||""),category:String(c.category||""),unitsPerPackage:A,providerPrice:h,marginRivas:typeof c.marginRivas=="number"?Number(c.marginRivas):void 0,marginSanJorge:typeof c.marginSanJorge=="number"?Number(c.marginSanJorge):void 0,marginIsla:typeof c.marginIsla=="number"?Number(c.marginIsla):void 0,packages:0,remainingPackages:0,subtotal:0,totalRivas:0,totalSanJorge:0,totalIsla:0,unitPriceRivas:m||0,unitPriceSanJorge:p||0,unitPriceIsla:x||0,gainRivas:0,gainSanJorge:0,gainIsla:0});const S=a.get(u);S.packages+=d,S.remainingPackages+=f,S.subtotal+=v,S.totalRivas+=y,S.totalSanJorge+=b,S.totalIsla+=w,S.gainRivas+=j,S.gainSanJorge+=I,S.gainIsla+=_,S.providerPrice=h,S.unitPriceRivas=m||S.unitPriceRivas,S.unitPriceSanJorge=p||S.unitPriceSanJorge,S.unitPriceIsla=x||S.unitPriceIsla,S.unitsPerPackage=A||S.unitsPerPackage,S.name=String(c.productName||S.name),S.category=String(c.category||S.category)});const s=Array.from(a.values()).map(l=>({id:l.productId,name:l.name,category:l.category,providerPrice:l.providerPrice,unitsPerPackage:l.unitsPerPackage,packages:l.packages,remainingPackages:l.remainingPackages,marginRivas:l.marginRivas??void 0,marginSanJorge:l.marginSanJorge??void 0,marginIsla:l.marginIsla??void 0,subtotal:l.subtotal,totalRivas:l.totalRivas,totalSanJorge:l.totalSanJorge,totalIsla:l.totalIsla,unitPriceRivas:l.unitPriceRivas,unitPriceSanJorge:l.unitPriceSanJorge,unitPriceIsla:l.unitPriceIsla,gainRivas:l.gainRivas,gainSanJorge:l.gainSanJorge,gainIsla:l.gainIsla})),o=s.reduce((l,c)=>l+Number(c.packages||0),0);await kn(e,{totalPackages:o,items:s})}function bQe(t){const e=t==null?void 0:t.allocationsByItem;if(!e)return null;const r=[];if(Array.isArray(e))for(const n of e){const a=Array.isArray(n==null?void 0:n.allocations)?n.allocations:[];for(const s of a){const o=String(s.inventorySellerId||""),l=Math.max(0,Math.floor(Number(s.units??s.qty??s.quantity??0)));!o||l<=0||r.push({inventorySellerId:o,units:l})}}else if(typeof e=="object")for(const n of Object.keys(e)){const a=e[n],s=Array.isArray(a==null?void 0:a.allocations)?a.allocations:[];for(const o of s){const l=String(o.inventorySellerId||""),c=Math.max(0,Math.floor(Number(o.units??o.qty??o.quantity??0)));!l||c<=0||r.push({inventorySellerId:l,units:c})}}return r.length?{allocations:r}:null}async function G2(t){const e=t.split("#")[0],r=Gt(Se,"sales_candies",e),n=await zs(r);if(!n.exists())throw new Error("La venta no existe.");const a=n.data(),s=bQe(a);if(s&&s.allocations.length>0){let u=0;return await Gs(Se,async d=>{const f={};for(const p of s.allocations){const x=p.inventorySellerId,v=Math.max(0,Math.floor(Number(p.units||0)));!x||v<=0||(f[x]=(f[x]||0)+v,u+=v)}const h=Object.keys(f).map(p=>Gt(Se,"inventory_candies_sellers",p)),m=await Promise.all(h.map(p=>d.get(p)));for(let p=0;p<h.length;p++){const x=m[p];if(!x.exists())continue;const v=x.data(),y=Number(v.remainingUnits??v.remaining??0),b=Math.max(0,Math.floor(Number(f[h[p].id]||0))),w=y+b,j=Math.max(1,Math.floor(Number(v.unitsPerPackage||1))),I=Math.floor(w/j);d.update(h[p],{remainingUnits:w,remainingPackages:I})}d.delete(r)}),{restored:u}}const o=[];if(Array.isArray(a.items)&&a.items.length>0){const u={};if(a.allocationsByItem&&typeof a.allocationsByItem=="object")for(const d of Object.keys(a.allocationsByItem)){const f=a.allocationsByItem[d],A=String((f==null?void 0:f.productId)||d||"");if(!A)continue;const h=Array.isArray(f==null?void 0:f.allocations)?f.allocations:[];u[A]=h.map(m=>({batchId:String(m.batchId),qty:Math.max(0,Math.floor(Number(m.qty||m.quantity||0)))}))}if(Array.isArray(a.allocationsByItem))for(const d of a.allocationsByItem){const f=String((d==null?void 0:d.productId)||"");if(!f)continue;const A=Array.isArray(d==null?void 0:d.allocations)?d.allocations:[];u[f]=A.map(h=>({batchId:String(h.batchId),qty:Math.max(0,Math.floor(Number(h.qty||h.quantity||0)))}))}for(const d of a.items){const f=String((d==null?void 0:d.productId)||"");if(!f)continue;const A=Math.max(0,Math.floor(Number((d==null?void 0:d.qty)||(d==null?void 0:d.quantity)||0))),h=Array.isArray(d==null?void 0:d.allocations)?d.allocations.map(m=>({batchId:String(m.batchId),qty:Math.max(0,Math.floor(Number(m.qty||m.quantity||0)))})):u[f]||[];o.push({productId:f,productName:String((d==null?void 0:d.productName)||""),qty:A,allocations:h.length?h:void 0})}}else{const u=a.item||{},d=String(u.productId||a.productId||""),f=Math.max(0,Math.floor(Number(u.qty??a.quantity??0))),A=Array.isArray(a.allocations)?a.allocations.map(h=>({batchId:String(h.batchId),qty:Math.max(0,Math.floor(Number(h.qty||h.quantity||0)))})):[];d&&f>0&&o.push({productId:d,productName:String(u.productName||a.productName||""),qty:f,allocations:A.length?A:void 0})}if(o.length===0)return await Gs(Se,async u=>{u.delete(r)}),{restored:0};if(o.every(u=>Array.isArray(u.allocations)&&u.allocations.length>0)){let u=0;return await Gs(Se,async d=>{const f=[];for(const h of o)for(const m of h.allocations||[]){const p=Math.max(0,Math.floor(Number(m.qty||0)));u+=p,f.push({ref:Gt(Se,"inventory_candies",m.batchId),addBack:p})}const A=await Promise.all(f.map(h=>d.get(h.ref)));for(let h=0;h<f.length;h++){const m=A[h];if(!m.exists())continue;const p=m.data(),x=J5(p),v=Math.max(0,Math.floor(Number(f[h].addBack||0))),y=x+v,b=Math.max(1,Math.floor(Number(p.unitsPerPackage||1))),w=Math.floor(y/b);d.update(f[h].ref,{remaining:y,remainingPackages:w,packages:w})}d.delete(r)}),{restored:u}}let c=0;return await Gs(Se,async u=>{const d={};for(const p of o){if(!p.productId||p.qty<=0)continue;const x=Yt(mt(Se,"inventory_candies"),cr("productId","==",p.productId)),y=(await kt(x)).docs.map(b=>{const w=b.data(),j=Fse(w),I=J5(w);return{id:b.id,date:String(w.date||""),baseUnits:j,remaining:I}}).sort((b,w)=>b.date.localeCompare(w.date));d[p.productId]=y}const f=[];for(const p of o){if(!p.productId||p.qty<=0)continue;if(Array.isArray(p.allocations)&&p.allocations.length>0){for(const y of p.allocations){const b=Math.max(0,Math.floor(Number(y.qty||0)));c+=b,f.push({id:y.batchId,addBack:b})}continue}const x=d[p.productId]||[];let v=p.qty;for(const y of x){if(v<=0)break;const b=Math.max(0,y.baseUnits-y.remaining);if(b<=0)continue;const w=Math.min(b,v);f.push({id:y.id,addBack:w}),c+=w,v-=w}for(const y of x){if(v<=0)break;const b=Math.min(v,p.qty);f.push({id:y.id,addBack:b}),c+=b,v-=b}}const A={};for(const p of f)A[p.id]=(A[p.id]||0)+Math.max(0,Math.floor(Number(p.addBack||0)));const h=Object.keys(A).map(p=>Gt(Se,"inventory_candies",p)),m=await Promise.all(h.map(p=>u.get(p)));for(let p=0;p<h.length;p++){const x=m[p];if(!x.exists())continue;const v=x.data(),y=J5(v),b=Math.max(0,Math.floor(Number(A[h[p].id]||0))),w=y+b,j=Math.max(1,Math.floor(Number(v.unitsPerPackage||1))),I=Math.floor(w/j);u.update(h[p],{remaining:w,remainingPackages:I,packages:I})}u.delete(r)}),{restored:c}}async function wQe(t){return G2(t)}const pc=t=>`C$ ${(Number(t)||0).toFixed(2)}`;function eB(t){return isFinite(t)?Math.round(t):0}function Zd(t){return t.unitsPerPackage>0&&t.totalUnits>0?Math.floor(t.totalUnits/t.unitsPerPackage):Math.max(0,Math.floor(Number(t.packages||0)))}function tB(t){return typeof t.remainingPackages=="number"&&isFinite(t.remainingPackages)?Math.max(0,Math.floor(t.remainingPackages)):t.unitsPerPackage>0?Math.max(0,Math.floor(Number(t.remaining||0)/t.unitsPerPackage)):0}function NQe(t,e){var o,l;const r=String(t.date||""),n=String(e.date||"");if(r!==n)return n.localeCompare(r);const a=((o=t.createdAt)==null?void 0:o.seconds)??0;return(((l=e.createdAt)==null?void 0:l.seconds)??0)-a}function CQe(){const[t,e]=g.useState([]),[r,n]=g.useState([]),[a,s]=g.useState(!0),[o,l]=g.useState(""),[c,u]=g.useState(Rr(Ud(new Date),"yyyy-MM-dd")),[d,f]=g.useState(Rr(Ld(new Date),"yyyy-MM-dd")),[A,h]=g.useState(""),[m,p]=g.useState(""),[x,v]=g.useState(null),[y,b]=g.useState(""),[w,j]=g.useState(0),[I,_]=g.useState(!1),[S,E]=g.useState(""),[T,k]=g.useState(""),[B,D]=g.useState([]);g.useEffect(()=>{(async()=>{try{s(!0);const Y=await kt(mt(Se,"products_candies")),ee=[];Y.forEach(Ce=>{const V=Ce.data();ee.push({id:Ce.id,name:V.name??"(sin nombre)",category:V.category??"(sin categora)"})}),e(ee);const M=Yt(mt(Se,"inventory_candies"),In("date","desc")),H=await kt(M),te=[];H.forEach(Ce=>{const V=Ce.data(),We=Number(V.unitsPerPackage||0),ie=Number(V.totalUnits??V.quantity??(V.packages||0)*(V.unitsPerPackage||0)),J=Number(V.remaining??V.totalUnits??ie??0);te.push({id:Ce.id,productId:V.productId,productName:V.productName,category:V.category,measurement:V.measurement??"unidad",packages:Number(V.packages||0),unitsPerPackage:We,totalUnits:ie,remaining:J,remainingPackages:typeof V.remainingPackages=="number"?Number(V.remainingPackages):void 0,providerPrice:Number(V.providerPrice||0),subtotal:Number(V.subtotal||0),totalRivas:Number(V.totalRivas||0),totalSanJorge:Number(V.totalSanJorge||0),totalIsla:Number(V.totalIsla||0),gainRivas:Number(V.gainRivas||0),gainSanJorge:Number(V.gainSanJorge||0),gainIsla:Number(V.gainIsla||0),unitPriceRivas:Number(V.unitPriceRivas||0),unitPriceSanJorge:Number(V.unitPriceSanJorge||0),unitPriceIsla:Number(V.unitPriceIsla||0),date:V.date,createdAt:V.createdAt,status:V.status??"PENDIENTE",orderId:V.orderId??null})}),n(te)}catch(Y){console.error(Y),l(" Error cargando inventario.")}finally{s(!1)}})()},[]);const X=g.useMemo(()=>r.filter(Y=>!(c&&Y.date<c||d&&Y.date>d||A&&Y.productId!==A||m&&String(Y.category||"")!==m)),[r,c,d,A,m]),me=g.useMemo(()=>{const Y=new Set;for(const ee of t)ee.category&&Y.add(ee.category);return Array.from(Y).sort((ee,M)=>ee.localeCompare(M))},[t]),pe=g.useMemo(()=>{const Y=X.reduce((V,We)=>V+Zd(We),0),ee=X.reduce((V,We)=>V+tB(We),0),M=X.reduce((V,We)=>{const ie=Zd(We);return V+Number(We.providerPrice||0)*ie},0),H=X.reduce((V,We)=>{const ie=Zd(We);return V+Number(We.unitPriceRivas||0)*ie},0),te=X.reduce((V,We)=>{const ie=Zd(We);return V+Number(We.unitPriceSanJorge||0)*ie},0),Ce=X.reduce((V,We)=>{const ie=Zd(We);return V+Number(We.unitPriceIsla||0)*ie},0);return{totalPaquetes:Y,totalPaquetesRestantes:ee,totalSubtotal:M,totalRivas:H,totalSJ:te,totalIsla:Ce}},[X]),he=g.useMemo(()=>{let Y=0,ee=0;for(const M of X)M.status==="PENDIENTE"&&(Y+=1),M.status==="PAGADO"&&(ee+=1);return{totalLotes:X.length,pendientes:Y,pagados:ee}},[X]),ve=g.useMemo(()=>{const Y=new Map;for(const M of X){const H=String(M.productId||"");H&&(Y.has(H)||Y.set(H,{batches:[]}),Y.get(H).batches.push(M))}const ee=[];for(const[M,H]of Y.entries()){const te=[...H.batches].sort(NQe),Ce=te[0],V=te.reduce((Nt,jt)=>Nt+Zd(jt),0),We=te.reduce((Nt,jt)=>Nt+tB(jt),0),ie=Number((Ce==null?void 0:Ce.providerPrice)||0),J=Number((Ce==null?void 0:Ce.unitPriceRivas)||0),Oe=Number((Ce==null?void 0:Ce.unitPriceIsla)||0),fe=te.reduce((Nt,jt)=>{const St=Zd(jt);return Nt+Number(jt.providerPrice||0)*St},0),_e=te.reduce((Nt,jt)=>{const St=Zd(jt);return Nt+Number(jt.unitPriceRivas||0)*St},0),Ue=te.reduce((Nt,jt)=>{const St=Zd(jt);return Nt+Number(jt.unitPriceIsla||0)*St},0),Ye=_e-fe,At=Ue-fe;let yt="",bt;for(const Nt of te)(!yt||String(Nt.date||"")>yt)&&(yt=String(Nt.date||""),bt=Nt.createdAt);ee.push({productId:M,productName:(Ce==null?void 0:Ce.productName)||"",category:(Ce==null?void 0:Ce.category)||"",totalPackages:V,remainingPackages:We,providerPrice:ie,unitPriceRivas:J,unitPriceIsla:Oe,subtotal:fe,totalRivas:_e,totalIsla:Ue,gainRivas:Ye,gainIsla:At,lastDate:yt,lastCreatedAt:bt,batchCount:te.length})}return ee.sort((M,H)=>String(H.lastDate).localeCompare(String(M.lastDate))),ee},[X]),ae=Y=>{v(Y.id),b(Y.date),j(Y.providerPrice),l("")},Pe=()=>{v(null),b(""),j(0)},ke=async()=>{if(!x)return;const Y=r.find(Ue=>Ue.id===x);if(!Y)return;if(w<0){l("El precio proveedor no puede ser negativo.");return}const ee=Zd(Y),M=w*ee,H=ee>0?M/.8:0,te=ee>0?M/.85:0,Ce=ee>0?M/.7:0,V=H-M,We=te-M,ie=Ce-M,J=ee>0?eB(H/ee):0,Oe=ee>0?eB(te/ee):0,fe=ee>0?eB(Ce/ee):0,_e=Gt(Se,"inventory_candies",x);await kn(_e,{date:y,providerPrice:w,subtotal:M,totalRivas:H,totalSanJorge:te,totalIsla:Ce,gainRivas:V,gainSanJorge:We,gainIsla:ie,unitPriceRivas:J,unitPriceSanJorge:Oe,unitPriceIsla:fe}),n(Ue=>Ue.map(Ye=>Ye.id===x?{...Ye,date:y,providerPrice:w,subtotal:M,totalRivas:H,totalSanJorge:te,totalIsla:Ce,gainRivas:V,gainSanJorge:We,gainIsla:ie,unitPriceRivas:J,unitPriceSanJorge:Oe,unitPriceIsla:fe}:Ye)),Y.orderId&&await Z5(String(Y.orderId)),l(" Lote de dulces actualizado"),Pe()},O=async Y=>{confirm(`Marcar PAGADO el lote del ${Y.date} (${Y.productName})?`)&&(await kn(Gt(Se,"inventory_candies",Y.id),{status:"PAGADO"}),n(M=>M.map(H=>H.id===Y.id?{...H,status:"PAGADO"}:H)),l(" Lote marcado como pagado"))},G=async Y=>{confirm(`Eliminar el lote del ${Y.date} (${Y.productName})?`)&&(await Kn(Gt(Se,"inventory_candies",Y.id)),n(M=>M.filter(H=>H.id!==Y.id)),Y.orderId&&await Z5(String(Y.orderId)),l(" Lote eliminado"))},z=async(Y,ee)=>{try{s(!0),l("");const M=Yt(mt(Se,"inventory_candies"),cr("productId","==",Y),In("date","desc")),H=await kt(M),te=[];H.forEach(Ce=>{const V=Ce.data(),We=Number(V.unitsPerPackage||0),ie=Number(V.totalUnits??V.quantity??(V.packages||0)*(V.unitsPerPackage||0)),J=Number(V.remaining??V.totalUnits??ie??0);te.push({id:Ce.id,productId:V.productId,productName:V.productName,category:V.category,measurement:V.measurement??"unidad",packages:Number(V.packages||0),unitsPerPackage:We,totalUnits:ie,remaining:J,remainingPackages:typeof V.remainingPackages=="number"?Number(V.remainingPackages):void 0,providerPrice:Number(V.providerPrice||0),subtotal:Number(V.subtotal||0),totalRivas:Number(V.totalRivas||0),totalSanJorge:Number(V.totalSanJorge||0),totalIsla:Number(V.totalIsla||0),gainRivas:Number(V.gainRivas||0),gainSanJorge:Number(V.gainSanJorge||0),gainIsla:Number(V.gainIsla||0),unitPriceRivas:Number(V.unitPriceRivas||0),unitPriceSanJorge:Number(V.unitPriceSanJorge||0),unitPriceIsla:Number(V.unitPriceIsla||0),date:V.date,createdAt:V.createdAt,status:V.status??"PENDIENTE",orderId:V.orderId??null})}),E(Y),k(ee),D(te),_(!0)}catch(M){console.error(M),l(" Error abriendo detalle del producto.")}finally{s(!1)}},U=async(Y,ee)=>{const M=r.filter(te=>te.productId===Y);if(confirm(`Eliminar COMPLETAMENTE "${ee}"?
Esto eliminar ${M.length} lote(s) de este producto.`))try{s(!0),l("");const te=Array.from(new Set(M.map(Ce=>Ce.orderId?String(Ce.orderId):"").filter(Boolean)));for(const Ce of M)await Kn(Gt(Se,"inventory_candies",Ce.id));n(Ce=>Ce.filter(V=>V.productId!==Y)),l(" Producto eliminado (todos sus lotes).");for(const Ce of te)await Z5(Ce);I&&S===Y&&(_(!1),D([]),E(""),k(""))}catch(te){console.error(te),l(" Error eliminando lotes del producto.")}finally{s(!1)}};return i.jsxs("div",{className:"max-w-6xl mx-auto",children:[i.jsx("div",{className:"flex items-center justify-between mb-3",children:i.jsx("h2",{className:"text-2xl font-bold",children:"Inventario Productos"})}),i.jsxs("div",{className:"bg-white p-3 rounded shadow border mb-4 flex flex-wrap items-end gap-3 text-sm",children:[i.jsxs("div",{className:"flex flex-col",children:[i.jsx("label",{className:"font-semibold",children:"Desde"}),i.jsx("input",{type:"date",className:"border rounded px-2 py-1",value:c,onChange:Y=>u(Y.target.value)})]}),i.jsxs("div",{className:"flex flex-col",children:[i.jsx("label",{className:"font-semibold",children:"Hasta"}),i.jsx("input",{type:"date",className:"border rounded px-2 py-1",value:d,onChange:Y=>f(Y.target.value)})]}),i.jsxs("div",{className:"flex flex-col min-w-[220px]",children:[i.jsx("label",{className:"font-semibold",children:"Categora"}),i.jsxs("select",{className:"border rounded px-2 py-1",value:m,onChange:Y=>p(Y.target.value),children:[i.jsx("option",{value:"",children:"Todas"}),me.map(Y=>i.jsx("option",{value:Y,children:Y},Y))]})]}),i.jsxs("div",{className:"flex flex-col min-w-[240px]",children:[i.jsx("label",{className:"font-semibold",children:"Producto"}),i.jsxs("select",{className:"border rounded px-2 py-1",value:A,onChange:Y=>h(Y.target.value),children:[i.jsx("option",{value:"",children:"Todos"}),t.map(Y=>i.jsxs("option",{value:Y.id,children:[Y.name,"  ",Y.category]},Y.id))]})]}),i.jsx("button",{className:"px-3 py-1 rounded bg-gray-200 hover:bg-gray-300",onClick:()=>{u(""),f(""),h(""),p("")},children:"Quitar filtro"})]}),i.jsx("div",{className:"bg-gray-50 p-2 rounded shadow border mb-2 text-xs md:text-sm",children:i.jsxs("div",{className:"flex flex-wrap gap-x-6 gap-y-1",children:[i.jsxs("div",{children:[i.jsx("span",{className:"font-semibold",children:"Lotes totales:"})," ",he.totalLotes]}),i.jsxs("div",{children:[i.jsx("span",{className:"font-semibold",children:"Lotes pendientes:"})," ",he.pendientes]}),i.jsxs("div",{children:[i.jsx("span",{className:"font-semibold",children:"Lotes pagados:"})," ",he.pagados]})]})}),i.jsx("div",{className:"bg-gray-50 p-3 rounded shadow border mb-3 text-sm md:text-base",children:i.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-y-1 gap-x-8",children:[i.jsxs("div",{children:[i.jsx("span",{className:"font-semibold",children:"Paquetes ingresados:"})," ",pe.totalPaquetes]}),i.jsxs("div",{children:[i.jsx("span",{className:"font-semibold",children:"Paquetes restantes:"})," ",pe.totalPaquetesRestantes]}),i.jsxs("div",{children:[i.jsx("span",{className:"font-semibold",children:"Sub total:"})," ",pc(pe.totalSubtotal)]}),i.jsxs("div",{children:[i.jsx("span",{className:"font-semibold",children:"Total Rivas:"})," ",pc(pe.totalRivas)]}),i.jsxs("div",{children:[i.jsx("span",{className:"font-semibold",children:"Total San Jorge:"})," ",pc(pe.totalSJ)]}),i.jsxs("div",{children:[i.jsx("span",{className:"font-semibold",children:"Total Isla:"})," ",pc(pe.totalIsla)]})]})}),i.jsx("div",{className:"bg-white rounded shadow border w-full overflow-x-auto",children:i.jsx("div",{className:"w-full overflow-x-auto",children:i.jsxs("table",{className:"min-w-[1200px] table-auto text-xs md:text-sm",children:[i.jsx("thead",{className:"bg-gray-100 sticky top-0 z-10",children:i.jsxs("tr",{children:[i.jsx("th",{className:"p-2 border text-left",children:"Categora"}),i.jsx("th",{className:"p-2 border text-left",children:"Producto"}),i.jsx("th",{className:"p-2 border whitespace-nowrap text-right",children:"Paquetes totales"}),i.jsx("th",{className:"p-2 border whitespace-nowrap text-right",children:"Paquetes restantes"}),i.jsx("th",{className:"p-2 border whitespace-nowrap text-right",children:"Precio proveedor"}),i.jsx("th",{className:"p-2 border whitespace-nowrap text-right",children:"Precio venta Rivas"}),i.jsx("th",{className:"p-2 border whitespace-nowrap text-right",children:"Precio venta Isla"}),i.jsx("th",{className:"p-2 border whitespace-nowrap text-right",children:"Subtotal"}),i.jsx("th",{className:"p-2 border whitespace-nowrap text-right",children:"Total Rivas"}),i.jsx("th",{className:"p-2 border whitespace-nowrap text-right",children:"Total Isla"}),i.jsx("th",{className:"p-2 border whitespace-nowrap text-right",children:"Ganancia bruta Rivas"}),i.jsx("th",{className:"p-2 border whitespace-nowrap text-right",children:"Ganancia bruta Isla"}),i.jsx("th",{className:"p-2 border whitespace-nowrap",children:"ltima fecha"}),i.jsx("th",{className:"p-2 border whitespace-nowrap text-center",children:"Opciones"})]})}),i.jsx("tbody",{className:"whitespace-nowrap",children:a?i.jsx("tr",{children:i.jsx("td",{colSpan:14,className:"p-4 text-center",children:"Cargando"})}):ve.length===0?i.jsx("tr",{children:i.jsx("td",{colSpan:14,className:"p-4 text-center",children:"Sin productos"})}):ve.map(Y=>i.jsxs("tr",{className:"text-left",children:[i.jsx("td",{className:"p-2 border",children:Y.category||""}),i.jsxs("td",{className:"p-2 border max-w-[260px]",children:[i.jsx("span",{className:"block truncate",title:Y.productName,children:Y.productName}),i.jsxs("span",{className:"text-[10px] text-gray-500",children:["Lotes: ",Y.batchCount]})]}),i.jsx("td",{className:"p-2 border text-right tabular-nums",children:Y.totalPackages}),i.jsx("td",{className:"p-2 border text-right tabular-nums",children:Y.remainingPackages}),i.jsx("td",{className:"p-2 border text-right tabular-nums",children:pc(Y.providerPrice)}),i.jsx("td",{className:"p-2 border text-right tabular-nums",children:pc(Y.unitPriceRivas)}),i.jsx("td",{className:"p-2 border text-right tabular-nums",children:pc(Y.unitPriceIsla)}),i.jsx("td",{className:"p-2 border text-right tabular-nums",children:pc(Y.subtotal)}),i.jsx("td",{className:"p-2 border text-right tabular-nums",children:pc(Y.totalRivas)}),i.jsx("td",{className:"p-2 border text-right tabular-nums",children:pc(Y.totalIsla)}),i.jsx("td",{className:"p-2 border text-right tabular-nums",children:pc(Y.gainRivas)}),i.jsx("td",{className:"p-2 border text-right tabular-nums",children:pc(Y.gainIsla)}),i.jsx("td",{className:"p-2 border",children:Y.lastDate||""}),i.jsx("td",{className:"p-2 border",children:i.jsxs("div",{className:"flex gap-1 justify-center flex-wrap",children:[i.jsx("button",{className:"px-2 py-1 rounded bg-blue-600 text-white hover:bg-blue-700 text-xs",onClick:()=>z(Y.productId,Y.productName),children:"Detalle"}),i.jsx("button",{className:"px-2 py-1 rounded bg-red-600 text-white hover:bg-red-700 text-xs",onClick:()=>U(Y.productId,Y.productName),children:"Borrar"})]})})]},Y.productId))})]})})}),o&&i.jsx("p",{className:"mt-2 text-sm",children:o}),I&&i.jsx("div",{className:"fixed inset-0 bg-black/40 flex items-center justify-center z-50",children:i.jsxs("div",{className:"bg-white p-4 rounded shadow-lg w-full max-w-6xl max-h-[90vh] overflow-y-auto text-sm",children:[i.jsxs("div",{className:"flex items-start justify-between gap-3 mb-3",children:[i.jsxs("div",{children:[i.jsx("h3",{className:"text-lg font-bold",children:"Detalle del producto"}),i.jsxs("div",{className:"text-xs text-gray-600",children:[i.jsx("span",{className:"font-semibold",children:"Producto:"})," ",T||""," ",i.jsxs("span",{className:"ml-2",children:[i.jsx("span",{className:"font-semibold",children:"ID:"})," ",S]})]})]}),i.jsx("button",{className:"px-3 py-1 rounded bg-gray-200 hover:bg-gray-300",onClick:()=>{_(!1),D([]),E(""),k(""),Pe()},children:"Cerrar"})]}),i.jsx("div",{className:"bg-white rounded shadow border w-full overflow-x-auto",children:i.jsxs("table",{className:"min-w-[1200px] table-auto text-xs md:text-sm",children:[i.jsx("thead",{className:"bg-gray-100 sticky top-0 z-10",children:i.jsxs("tr",{children:[i.jsx("th",{className:"p-2 border text-left",children:"Fecha"}),i.jsx("th",{className:"p-2 border",children:"Categora"}),i.jsx("th",{className:"p-2 border text-left",children:"Producto"}),i.jsx("th",{className:"p-2 border text-right",children:"Paquetes ingresados"}),i.jsx("th",{className:"p-2 border text-right",children:"Paquetes restantes"}),i.jsx("th",{className:"p-2 border text-right",children:"Unidades"}),i.jsx("th",{className:"p-2 border text-right",children:"Precio proveedor"}),i.jsx("th",{className:"p-2 border text-right",children:"Precio venta Rivas"}),i.jsx("th",{className:"p-2 border text-right",children:"Precio venta Isla"}),i.jsx("th",{className:"p-2 border",children:"Nmero orden"}),i.jsx("th",{className:"p-2 border",children:"Status"}),i.jsx("th",{className:"p-2 border text-center",children:"Acciones"})]})}),i.jsx("tbody",{className:"whitespace-nowrap",children:B.length===0?i.jsx("tr",{children:i.jsx("td",{colSpan:12,className:"p-4 text-center text-gray-500",children:"Sin lotes"})}):B.map(Y=>{const ee=x===Y.id,M=Zd(Y),H=tB(Y);return i.jsxs("tr",{className:"text-left",children:[i.jsx("td",{className:"p-2 border align-top",children:ee?i.jsx("input",{type:"date",className:"w-full border p-1 rounded",value:y,onChange:te=>b(te.target.value)}):Y.date}),i.jsx("td",{className:"p-2 border align-top",children:Y.category||""}),i.jsxs("td",{className:"p-2 border align-top max-w-[260px]",children:[i.jsx("span",{className:"block truncate",title:Y.productName,children:Y.productName}),i.jsxs("span",{className:"text-[10px] text-gray-500",children:["Lote ID: ",Y.id]})]}),i.jsx("td",{className:"p-2 border align-top text-right tabular-nums",children:M}),i.jsx("td",{className:"p-2 border align-top text-right tabular-nums",children:H}),i.jsx("td",{className:"p-2 border align-top text-right tabular-nums",children:Y.totalUnits}),i.jsx("td",{className:"p-2 border align-top text-right tabular-nums",children:ee?i.jsx("input",{type:"number",step:"0.01",inputMode:"decimal",className:"w-24 border p-1 rounded text-right",value:Number.isNaN(w)?"":w,onChange:te=>j(Math.max(0,parseFloat(te.target.value||"0")))}):pc(Y.providerPrice)}),i.jsx("td",{className:"p-2 border align-top text-right tabular-nums",children:pc(Y.unitPriceRivas)}),i.jsx("td",{className:"p-2 border align-top text-right tabular-nums",children:pc(Y.unitPriceIsla)}),i.jsx("td",{className:"p-2 border align-top",children:Y.orderId?String(Y.orderId):""}),i.jsx("td",{className:"p-2 border align-top",children:i.jsx("span",{className:`px-2 py-0.5 rounded text-[10px] md:text-xs ${Y.status==="PAGADO"?"bg-green-100 text-green-700":"bg-yellow-100 text-yellow-700"}`,children:Y.status})}),i.jsx("td",{className:"p-2 border align-top",children:ee?i.jsxs("div",{className:"flex gap-2 justify-center",children:[i.jsx("button",{className:"px-2 py-1 rounded text-white bg-blue-600 hover:bg-blue-700",onClick:ke,children:"Guardar"}),i.jsx("button",{className:"px-2 py-1 rounded bg-gray-200 hover:bg-gray-300",onClick:Pe,children:"Cancelar"})]}):i.jsxs("div",{className:"flex gap-1 justify-center flex-wrap",children:[Y.status==="PENDIENTE"&&i.jsx("button",{className:"px-2 py-1 rounded bg-green-600 text-white hover:bg-green-700 text-xs",onClick:()=>O(Y),children:"Pagar"}),i.jsx("button",{className:"px-2 py-1 rounded bg-yellow-400 text-black hover:bg-yellow-500 text-xs",onClick:()=>ae(Y),children:"Editar"}),i.jsx("button",{className:"px-2 py-1 rounded bg-red-600 text-white hover:bg-red-700 text-xs",onClick:()=>G(Y),children:"Borrar"})]})})]},Y.id)})})]})}),i.jsx("div",{className:"mt-3 flex justify-end",children:i.jsx("button",{className:"px-3 py-1 rounded bg-red-600 text-white hover:bg-red-700",onClick:()=>U(S,T),children:"Borrar producto (todos los lotes)"})})]})})]})}const rB=["Altagracia","Taguizapa","El paso","Calaysa","Urbaite","Las Pilas"],Lo=t=>`C$ ${(Number(t)||0).toFixed(2)}`;function wy(t){const e="+505 ";if(!t.startsWith(e)){const n=t.replace(/\D/g,"");return e+n.slice(0,8)}const r=t.slice(e.length).replace(/\D/g,"");return e+r.slice(0,8)}async function aG(t){const e=Yt(mt(Se,"ar_movements"),cr("ref.saleId","==",t)),r=await kt(e);await Promise.all(r.docs.map(n=>Kn(Gt(Se,"ar_movements",n.id))))}function _Qe({role:t="",roles:e,sellerCandyId:r="",currentUserEmail:n}){const a=e&&e.length?e:t,s=String(r||"").trim(),o=En(a,"vendedor_dulces"),l=En(a,"admin"),[c,u]=g.useState([]),[d,f]=g.useState(!1),[A,h]=g.useState(""),[m,p]=g.useState(""),[x,v]=g.useState(""),[y,b]=g.useState(""),[w,j]=g.useState(!1),[I,_]=g.useState(!1),[S,E]=g.useState(null),[T,k]=g.useState([]),B=async dt=>{var er;j(!0),_(!0),E(dt),k([]);try{const Jt=await zs(Gt(Se,"sales_candies",dt));let ar=null;Jt.exists()?ar=Jt.data():ar=(er=(await kt(Yt(mt(Se,"sales_candies"),cr("name","==",dt)))).docs[0])==null?void 0:er.data();const fr=(Array.isArray(ar==null?void 0:ar.items)?ar.items:ar!=null&&ar.item?[ar.item]:[]).map(ne=>({productName:String(ne.productName||""),qty:Number(ne.qty||0),unitPrice:Number(ne.unitPrice||0),discount:Number(ne.discount||0),total:Number(ne.total||0)}));k(fr)}catch(Jt){console.error(Jt)}finally{_(!1)}},[D,X]=g.useState(""),[me,pe]=g.useState("+505 "),[he,ve]=g.useState(""),[ae,Pe]=g.useState(""),[ke,O]=g.useState("ACTIVO"),[G,z]=g.useState(0),[U,Y]=g.useState(""),[ee,M]=g.useState(0),[H,te]=g.useState([]),[Ce,V]=g.useState(!0),[We,ie]=g.useState(""),[J,Oe]=g.useState(null),[fe,_e]=g.useState(""),[Ue,Ye]=g.useState("+505 "),[At,yt]=g.useState(""),[bt,Nt]=g.useState(""),[jt,St]=g.useState("ACTIVO"),[Ve,Te]=g.useState(0),[qe,ge]=g.useState(""),[q,se]=g.useState(!1),[ye,ue]=g.useState(null),[Le,ct]=g.useState(!1),[ht,xe]=g.useState([]),[Ae,Re]=g.useState({saldoActual:0,totalAbonado:0,totalCargos:0,saldoRestante:0}),[lt,Ne]=g.useState(!1),[De,xt]=g.useState(0),[_t,Et]=g.useState(new Date().toISOString().slice(0,10)),[Mt,nt]=g.useState(""),[Ee,we]=g.useState(!1),[oe,Fe]=g.useState(null),[ce,Me]=g.useState(""),[Ke,P]=g.useState(0),[R,L]=g.useState(""),[K,re]=g.useState(!1),[de,Ge]=g.useState(null),[rt,ft]=g.useState(!1),[et,ut]=g.useState(!1),[Ot,zt]=g.useState(null);g.useEffect(()=>{(async()=>{try{if(V(!0),o&&!s){te([]),ie(" Este usuario no tiene vendedor asociado (sellerCandyId vaco).");return}const dt=await kt(mt(Se,"sellers_candies")),er=[];dt.forEach(fr=>{const ne=fr.data(),He=String(ne.status||"ACTIVO");He==="ACTIVO"&&er.push({id:fr.id,name:String(ne.name||""),status:He})}),u(er);const Jt=o?Yt(mt(Se,"customers_candies"),cr("vendorId","==",s),In("createdAt","desc")):Yt(mt(Se,"customers_candies"),In("createdAt","desc")),ar=await kt(Jt),tr=[];ar.forEach(fr=>{const ne=fr.data();tr.push({id:fr.id,name:ne.name??"",phone:ne.phone??"+505 ",place:ne.place??"",notes:ne.notes??"",status:ne.status??"ACTIVO",creditLimit:Number(ne.creditLimit??0),createdAt:ne.createdAt??Ar.now(),balance:0,sellerId:ne.sellerId||"",vendorId:ne.vendorId||"",vendorName:ne.vendorName||"",initialDebt:Number(ne.initialDebt||0),initialDebtDate:String(ne.initialDebtDate||"").trim(),lastAbonoDate:"",lastAbonoAmount:0})});for(const fr of tr)try{const ne=Yt(mt(Se,"ar_movements"),cr("customerId","==",fr.id)),He=await kt(ne);let tt=0,Je=null;const pt=[];He.forEach(Xt=>{var Zt,Dr,Yr;const Rt=Xt.data(),$t=Number(Rt.amount||0);tt+=$t;const kr=Rt.date??((Dr=(Zt=Rt.createdAt)==null?void 0:Zt.toDate)!=null&&Dr.call(Zt)?Rt.createdAt.toDate().toISOString().slice(0,10):"");if(pt.push({id:Xt.id,date:kr,type:Rt.type??($t<0?"ABONO":"CARGO"),amount:$t,ref:Rt.ref||{},comment:Rt.comment||"",createdAt:Rt.createdAt}),$t<0){const zr=(Yr=Rt.createdAt)!=null&&Yr.seconds?Number(Rt.createdAt.seconds):0;(!Je||zr>=Je.ts)&&(Je={date:kr,amount:Math.abs($t),ts:zr})}});const wt=Number(fr.initialDebt||0),Wt=Nr(wt,String(fr.initialDebtDate||""),pt);fr.balance=Wt+tt,Je?(fr.lastAbonoDate=Je==null?void 0:Je.date,fr.lastAbonoAmount=Je==null?void 0:Je.amount):(fr.lastAbonoDate="",fr.lastAbonoAmount=0)}catch{fr.balance=Number(fr.initialDebt||0),fr.lastAbonoDate="",fr.lastAbonoAmount=0}te(tr)}catch(dt){console.error(dt),ie(" Error cargando clientes.")}finally{V(!1)}})()},[o,s]);const Bt=()=>{X(""),pe("+505 "),ve(""),Pe(""),O("ACTIVO"),z(0),Y(""),M(0)},Lt=async dt=>{var tr;if(dt.preventDefault(),ie(""),!D.trim()){ie("Ingresa el nombre.");return}const er=wy(me);if(er.length<6){ie("Telfono incompleto.");return}const Jt=o?s:String(U||"").trim(),ar=Jt&&((tr=c.find(fr=>fr.id===Jt))==null?void 0:tr.name)||"";try{const fr=Number(ee||0),ne=await Jn(mt(Se,"customers_candies"),{name:D.trim(),phone:er,place:he||"",notes:ae||"",status:ke,creditLimit:Number(G||0),vendorId:Jt,vendorName:ar,initialDebt:fr,createdAt:Ar.now()});te(He=>[{id:ne.id,name:D.trim(),phone:er,place:he||"",notes:ae||"",status:ke,creditLimit:Number(G||0),vendorId:Jt,vendorName:ar,initialDebt:fr,createdAt:Ar.now(),balance:fr,lastAbonoDate:"",lastAbonoAmount:0},...He]),Bt(),re(!1),ie(" Cliente creado")}catch(fr){console.error(fr),ie(" Error al crear cliente")}},Be=dt=>{if(o){ie(" No permitido: vendedores no editan clientes desde el listado.");return}Oe(dt.id),_e(dt.name),Ye(dt.phone||"+505 "),yt(dt.place||""),Nt(dt.notes||""),St(dt.status||"ACTIVO"),Te(Number(dt.creditLimit||0)),ge(String(dt.vendorId||""))},vt=()=>{Oe(null),_e(""),Ye("+505 "),yt(""),Nt(""),St("ACTIVO"),Te(0),ge("")},hr=async()=>{var ne;if(o){ie(" No permitido.");return}if(!J)return;const dt=wy(Ue);if(!fe.trim()){ie("Ingresa el nombre.");return}const er=H.find(He=>He.id===J),Jt=String((er==null?void 0:er.vendorId)||""),ar=o?s:String(qe||"");if(o&&Jt&&Jt!==s){ie(" Este cliente pertenece a otro vendedor.");return}if(l&&Jt&&ar&&Jt!==ar){ie(" Este cliente ya est asociado a otro vendedor. Primero desasocia (deja vendedor en ) y guarda; luego lo puedes asignar.");return}const tr=o?s:String(qe||""),fr=tr&&((ne=c.find(He=>He.id===tr))==null?void 0:ne.name)||"";try{await kn(Gt(Se,"customers_candies",J),{name:fe.trim(),phone:dt,place:At||"",notes:bt||"",status:jt,creditLimit:Number(Ve||0),vendorId:tr,vendorName:fr}),te(He=>He.map(tt=>tt.id===J?{...tt,name:fe.trim(),phone:dt,place:At||"",notes:bt||"",status:jt,creditLimit:Number(Ve||0),vendorId:tr,vendorName:fr}:tt)),vt(),ie(" Cliente actualizado")}catch(He){console.error(He),ie(" Error al actualizar")}},xr=async dt=>{if(confirm(`Eliminar al cliente "${dt.name}"?
Se devolvern al inventario todos los dulces de sus compras y se borrarn sus movimientos.`))try{V(!0);const Jt=Yt(mt(Se,"sales_candies"),cr("customerId","==",dt.id)),ar=await kt(Jt);for(const ne of ar.docs){const He=ne.id;try{await G2(He)}catch(tt){console.warn("restoreSaleAndDeleteCandy error",tt);try{await Kn(Gt(Se,"sales_candies",He))}catch{}}await aG(He)}const tr=Yt(mt(Se,"ar_movements"),cr("customerId","==",dt.id)),fr=await kt(tr);await Promise.all(fr.docs.map(ne=>Kn(Gt(Se,"ar_movements",ne.id)))),await Kn(Gt(Se,"customers_candies",dt.id)),te(ne=>ne.filter(He=>He.id!==dt.id)),ie(" Cliente eliminado y dulces devueltos al inventario")}catch(Jt){console.error(Jt),ie(" No se pudo eliminar el cliente.")}finally{V(!1)}},Nr=(dt,er,Jt)=>{const ar=Number(dt||0);if(!ar)return 0;const tr=String(er||"").trim();return tr&&Jt.some(ne=>{var wt;const He=Number(ne.amount||0);if(!(He>0))return!1;const tt=Math.abs(He-ar)<.01,Je=String(ne.date||"").trim()===tr,pt=!!((wt=ne.ref)!=null&&wt.saleId);return tt&&Je&&pt})?0:ar},gr=(dt,er,Jt)=>{const ar=dt.reduce((tt,Je)=>tt+(Number(Je.amount)||0),0),tr=dt.filter(tt=>Number(tt.amount)<0).reduce((tt,Je)=>tt+Math.abs(Number(Je.amount)||0),0),fr=dt.filter(tt=>Number(tt.amount)>0).reduce((tt,Je)=>tt+(Number(Je.amount)||0),0),ne=Nr(er,Jt,dt),He=Number(ne||0)+ar;Re({saldoActual:He,totalAbonado:tr,totalCargos:Number(ne||0)+fr,saldoRestante:He})},_r=async dt=>{ue(dt),xe([]),Re({saldoActual:0,totalAbonado:0,totalCargos:0,saldoRestante:0}),se(!0),ft(!1),ut(!1),zt(null),Ne(!1),xt(0),Et(new Date().toISOString().slice(0,10)),nt(""),Fe(null),ct(!0);try{const er=Yt(mt(Se,"ar_movements"),cr("customerId","==",dt.id)),Jt=await kt(er),ar=[];Jt.forEach(tr=>{var tt,Je;const fr=tr.data(),ne=fr.date??((Je=(tt=fr.createdAt)==null?void 0:tt.toDate)!=null&&Je.call(tt)?fr.createdAt.toDate().toISOString().slice(0,10):""),He=Number(fr.amount||0);ar.push({id:tr.id,date:ne,type:fr.type??(He<0?"ABONO":"CARGO"),amount:He,ref:fr.ref||{},comment:fr.comment||"",createdAt:fr.createdAt})}),ar.sort((tr,fr)=>{var tt,Je;if(tr.date!==fr.date)return tr.date.localeCompare(fr.date);const ne=((tt=tr.createdAt)==null?void 0:tt.seconds)||0,He=((Je=fr.createdAt)==null?void 0:Je.seconds)||0;return ne-He}),xe(ar),gr(ar,Number(dt.initialDebt||0),String(dt.initialDebtDate||""))}catch(er){console.error(er),ie(" No se pudo cargar el estado de cuenta")}finally{ct(!1)}},Zr=dt=>{const er=dt.filter(Jt=>Number(Jt.amount)<0).map(Jt=>{var ar;return{date:Jt.date,amount:Math.abs(Number(Jt.amount||0)),ts:((ar=Jt.createdAt)==null?void 0:ar.seconds)||0}}).sort((Jt,ar)=>(Jt.ts||0)-(ar.ts||0));return er.length?er[er.length-1]:null},Nn=g.useMemo(()=>Nr(Number((ye==null?void 0:ye.initialDebt)||0),String((ye==null?void 0:ye.initialDebtDate)||""),ht),[ye==null?void 0:ye.initialDebt,ye==null?void 0:ye.initialDebtDate,ht]),en=async()=>{if(!ye)return;ie("");const dt=Number(De||0);if(!(dt>0)){ie("Ingresa un monto de abono mayor a 0.");return}const er=parseFloat(dt.toFixed(2));if(!_t){ie("Selecciona la fecha del abono.");return}try{we(!0);const Jt={customerId:ye.id,type:"ABONO",amount:-er,date:_t,comment:Mt||"",createdAt:Ar.now()},tr={id:(await Jn(mt(Se,"ar_movements"),Jt)).id,date:_t,type:"ABONO",amount:-er,comment:Mt||"",createdAt:Ar.now()},fr=[...ht,tr].sort((Je,pt)=>{var Xt,Rt;if(Je.date!==pt.date)return Je.date.localeCompare(pt.date);const wt=((Xt=Je.createdAt)==null?void 0:Xt.seconds)||0,Wt=((Rt=pt.createdAt)==null?void 0:Rt.seconds)||0;return wt-Wt});xe(fr),gr(fr,Number(ye.initialDebt||0),String(ye.initialDebtDate||""));const ne=fr.reduce((Je,pt)=>Je+(Number(pt.amount)||0),0),He=Nr(Number(ye.initialDebt||0),String(ye.initialDebtDate||""),fr),tt=Number(He||0)+ne;te(Je=>Je.map(pt=>pt.id!==ye.id?pt:{...pt,balance:tt,lastAbonoDate:_t,lastAbonoAmount:er})),ue(Je=>Je&&{...Je,balance:tt,lastAbonoDate:_t,lastAbonoAmount:er}),xt(0),nt(""),Et(new Date().toISOString().slice(0,10)),Ne(!1),ie(" Abono registrado")}catch(Jt){console.error(Jt),ie(" Error al registrar el abono")}finally{we(!1)}},Qr=dt=>{Fe(dt.id),Me(dt.date||new Date().toISOString().slice(0,10)),P(Math.abs(Number(dt.amount||0))),L(dt.comment||"")},wr=()=>{Fe(null),Me(""),P(0),L("")},Or=async()=>{if(!oe||!ye)return;const dt=ht.findIndex(tr=>tr.id===oe);if(dt===-1)return;const er=ht[dt],Jt=Number(Ke||0);if(!(Jt>0)){ie("El monto debe ser mayor a 0.");return}const ar=er.type==="ABONO"?-parseFloat(Jt.toFixed(2)):+parseFloat(Jt.toFixed(2));try{await kn(Gt(Se,"ar_movements",oe),{date:ce,amount:ar,comment:R||""});const tr=[...ht];tr[dt]={...er,date:ce,amount:ar,comment:R||""},tr.sort((Je,pt)=>{var Xt,Rt;if(Je.date!==pt.date)return Je.date.localeCompare(pt.date);const wt=((Xt=Je.createdAt)==null?void 0:Xt.seconds)||0,Wt=((Rt=pt.createdAt)==null?void 0:Rt.seconds)||0;return wt-Wt}),xe(tr),gr(tr,Number(ye.initialDebt||0),String(ye.initialDebtDate||""));const fr=tr.reduce((Je,pt)=>Je+(Number(pt.amount)||0),0),ne=Nr(Number(ye.initialDebt||0),String(ye.initialDebtDate||""),tr),He=Number(ne||0)+fr,tt=Zr(tr);te(Je=>Je.map(pt=>pt.id===ye.id?{...pt,balance:He,lastAbonoDate:(tt==null?void 0:tt.date)||"",lastAbonoAmount:(tt==null?void 0:tt.amount)||0}:pt)),ue(Je=>Je&&{...Je,balance:He,lastAbonoDate:(tt==null?void 0:tt.date)||"",lastAbonoAmount:(tt==null?void 0:tt.amount)||0}),wr(),ie(" Movimiento actualizado")}catch(tr){console.error(tr),ie(" Error al actualizar movimiento")}},$r=async dt=>{var Jt,ar;if(confirm(`Eliminar este movimiento (${dt.type==="ABONO"?"Abono":"Compra"}) del ${dt.date}?${dt.type==="CARGO"&&((Jt=dt.ref)!=null&&Jt.saleId)?`
Se devolvern al inventario los dulces de esa venta.`:""}`)&&ye)try{if(V(!0),dt.type==="CARGO"&&((ar=dt.ref)!=null&&ar.saleId)){try{await G2(dt.ref.saleId)}catch(Je){console.warn("restoreSaleAndDeleteCandy error",Je),V(!1),ie(" No se pudo devolver inventario de la venta.");return}await aG(dt.ref.saleId)}else await Kn(Gt(Se,"ar_movements",dt.id));const tr=ht.filter(Je=>{var pt,wt;return dt.type==="CARGO"&&((pt=dt.ref)!=null&&pt.saleId)?((wt=Je.ref)==null?void 0:wt.saleId)!==dt.ref.saleId:Je.id!==dt.id});xe(tr),gr(tr,Number(ye.initialDebt||0),String(ye.initialDebtDate||""));const fr=tr.reduce((Je,pt)=>Je+(Number(pt.amount)||0),0),ne=Nr(Number(ye.initialDebt||0),String(ye.initialDebtDate||""),tr),He=Number(ne||0)+fr,tt=Zr(tr);te(Je=>Je.map(pt=>pt.id===ye.id?{...pt,balance:He,lastAbonoDate:(tt==null?void 0:tt.date)||"",lastAbonoAmount:(tt==null?void 0:tt.amount)||0}:pt)),ue(Je=>Je&&{...Je,balance:He,lastAbonoDate:(tt==null?void 0:tt.date)||"",lastAbonoAmount:(tt==null?void 0:tt.amount)||0}),zt(null),ie(" Movimiento eliminado")}catch(tr){console.error(tr),ie(" Error al eliminar movimiento")}finally{V(!1)}},mr=g.useMemo(()=>[...H].sort((dt,er)=>{var Jt,ar;return dt.status!==er.status?dt.status==="BLOQUEADO"?1:-1:(((Jt=er.createdAt)==null?void 0:Jt.seconds)||0)-(((ar=dt.createdAt)==null?void 0:ar.seconds)||0)}),[H]),Kr=dt=>dt==="ACTIVO"?"bg-green-100 text-green-700":"bg-red-100 text-red-700",or=g.useMemo(()=>{const dt=A.trim().toLowerCase(),er=x.trim()===""?null:Number(x),Jt=y.trim()===""?null:Number(y);return mr.filter(ar=>{const tr=!dt||String(ar.name||"").toLowerCase().includes(dt),fr=!m||ar.status===m,ne=Number(ar.balance||0),He=er===null||!Number.isNaN(er)&&ne>=er,tt=Jt===null||!Number.isNaN(Jt)&&ne<=Jt;return tr&&fr&&He&&tt})},[mr,A,m,x,y]);return i.jsxs("div",{className:"max-w-6xl mx-auto",children:[i.jsxs("div",{className:"flex items-center justify-between mb-3",children:[i.jsx("h2",{className:"text-2xl font-bold",children:"Clientes (Dulces)"}),i.jsx("button",{className:"px-3 py-2 rounded bg-blue-600 text-white hover:bg-blue-700",onClick:()=>{re(!0),o&&Y(s)},type:"button",children:"Crear Cliente"})]}),i.jsxs("div",{className:"mb-3",children:[i.jsx("button",{type:"button",className:"px-3 py-2 rounded bg-gray-100 hover:bg-gray-200 border w-full md:w-auto",onClick:()=>f(dt=>!dt),children:d?"Ocultar filtros":"Mostrar filtros"}),d&&i.jsxs("div",{className:"mt-2 bg-white border rounded-xl p-3 grid grid-cols-1 md:grid-cols-4 gap-3",children:[i.jsxs("div",{className:"md:col-span-2",children:[i.jsx("div",{className:"text-xs text-gray-500 mb-1",children:"Cliente"}),i.jsx("input",{className:"w-full border p-2 rounded",value:A,onChange:dt=>h(dt.target.value),placeholder:"Buscar por nombre"})]}),i.jsxs("div",{children:[i.jsx("div",{className:"text-xs text-gray-500 mb-1",children:"Estado"}),i.jsxs("select",{className:"w-full border p-2 rounded",value:m,onChange:dt=>p(dt.target.value||""),children:[i.jsx("option",{value:"",children:"Todos"}),i.jsx("option",{value:"ACTIVO",children:"ACTIVO"}),i.jsx("option",{value:"BLOQUEADO",children:"BLOQUEADO"})]})]}),i.jsxs("div",{className:"grid grid-cols-2 gap-2",children:[i.jsxs("div",{children:[i.jsx("div",{className:"text-xs text-gray-500 mb-1",children:"Monto mn."}),i.jsx("input",{className:"w-full border p-2 rounded text-right",inputMode:"decimal",value:x,onChange:dt=>v(dt.target.value),placeholder:"0"})]}),i.jsxs("div",{children:[i.jsx("div",{className:"text-xs text-gray-500 mb-1",children:"Monto mx."}),i.jsx("input",{className:"w-full border p-2 rounded text-right",inputMode:"decimal",value:y,onChange:dt=>b(dt.target.value),placeholder:""})]})]}),i.jsx("div",{className:"md:col-span-4 flex flex-wrap gap-2 justify-end",children:i.jsx("button",{type:"button",className:"px-3 py-2 rounded bg-gray-100 hover:bg-gray-200 border",onClick:()=>{h(""),p(""),v(""),b("")},children:"Limpiar"})})]})]}),i.jsxs("div",{className:"bg-white p-2 rounded shadow border w-full",children:[i.jsx("div",{className:"hidden md:block",children:i.jsxs("table",{className:"min-w-full w-full text-sm",children:[i.jsx("thead",{className:"bg-gray-100",children:i.jsxs("tr",{children:[i.jsx("th",{className:"p-2 border",children:"Fecha"}),i.jsx("th",{className:"p-2 border",children:"Nombre"}),i.jsx("th",{className:"p-2 border",children:"Telfono"}),i.jsx("th",{className:"p-2 border",children:"Vendedor"}),i.jsx("th",{className:"p-2 border",children:"Lugar"}),i.jsx("th",{className:"p-2 border",children:"Estado"}),i.jsx("th",{className:"p-2 border",children:"Lmite"}),i.jsx("th",{className:"p-2 border",children:"Saldo"}),i.jsx("th",{className:"p-2 border",children:"Comentario"}),i.jsx("th",{className:"p-2 border",children:"Acciones"})]})}),i.jsx("tbody",{children:Ce?i.jsx("tr",{children:i.jsx("td",{className:"p-4 text-center",colSpan:10,children:"Cargando"})}):or.length===0?i.jsx("tr",{children:i.jsx("td",{className:"p-4 text-center",colSpan:10,children:"Sin clientes"})}):or.map(dt=>{var Jt;const er=J===dt.id;return i.jsxs("tr",{className:"text-center",children:[i.jsx("td",{className:"p-2 border",children:(Jt=dt.createdAt)!=null&&Jt.toDate?dt.createdAt.toDate().toISOString().slice(0,10):""}),i.jsx("td",{className:"p-2 border text-left",children:er?i.jsx("input",{className:"w-full border p-1 rounded",value:fe,onChange:ar=>_e(ar.target.value)}):i.jsx("div",{className:"font-medium",children:dt.name})}),i.jsx("td",{className:"p-2 border",children:er?i.jsx("input",{className:"w-full border p-1 rounded",value:Ue,onChange:ar=>Ye(wy(ar.target.value))}):dt.phone}),i.jsx("td",{className:"p-2 border",children:er?i.jsxs("select",{className:"w-full border p-1 rounded text-xs",value:o?s:qe,onChange:ar=>ge(ar.target.value),disabled:o,title:"Vendedor asociado",children:[i.jsx("option",{value:"",children:" Sin vendedor "}),c.map(ar=>i.jsx("option",{value:ar.id,children:ar.name},ar.id))]}):dt.vendorName||""}),i.jsx("td",{className:"p-2 border",children:er?i.jsxs("select",{className:"w-full border p-1 rounded",value:At,onChange:ar=>yt(ar.target.value),children:[i.jsx("option",{value:"",children:""}),rB.map(ar=>i.jsx("option",{value:ar,children:ar},ar))]}):dt.place||""}),i.jsx("td",{className:"p-2 border",children:er?i.jsxs("select",{className:"w-full border p-1 rounded",value:jt,onChange:ar=>St(ar.target.value),children:[i.jsx("option",{value:"ACTIVO",children:"ACTIVO"}),i.jsx("option",{value:"BLOQUEADO",children:"BLOQUEADO"})]}):i.jsx("span",{className:`px-2 py-0.5 rounded text-xs ${Kr(dt.status)}`,children:dt.status})}),i.jsx("td",{className:"p-2 border",children:er?i.jsx("input",{type:"number",step:"0.01",inputMode:"decimal",className:"w-full border p-1 rounded text-right",value:Number.isNaN(Ve)?"":Ve,onChange:ar=>Te(Math.max(0,Number(ar.target.value||0)))}):Lo(dt.creditLimit||0)}),i.jsx("td",{className:"p-2 border font-semibold",children:Lo(dt.balance||0)}),i.jsx("td",{className:"p-2 border",children:er?i.jsx("textarea",{className:"w-full border p-1 rounded resize-y min-h-12",value:bt,onChange:ar=>Nt(ar.target.value),maxLength:500}):i.jsx("span",{title:dt.notes||"",children:(dt.notes||"").length>40?(dt.notes||"").slice(0,40)+"":dt.notes||""})}),i.jsx("td",{className:"p-2 border",children:i.jsx("div",{className:"flex gap-2 justify-center",children:er?i.jsxs(i.Fragment,{children:[i.jsx("button",{className:"px-2 py-1 rounded text-white bg-blue-600 hover:bg-blue-700",onClick:hr,children:"Guardar"}),i.jsx("button",{className:"px-2 py-1 rounded bg-gray-200 hover:bg-gray-300",onClick:vt,children:"Cancelar"})]}):i.jsxs(i.Fragment,{children:[i.jsx("button",{className:"px-2 py-1 rounded text-white bg-yellow-600 hover:bg-yellow-700",onClick:()=>Be(dt),children:"Editar"}),i.jsx("button",{className:"px-2 py-1 rounded text-white bg-red-600 hover:bg-red-700 disabled:opacity-50",onClick:()=>xr(dt),disabled:!l,title:l?"Borrar":"Solo admin",children:"Borrar"}),i.jsx("button",{className:"px-2 py-1 rounded text-white bg-indigo-600 hover:bg-indigo-700",onClick:()=>_r(dt),children:"Estado de cuenta"})]})})})]},dt.id)})})]})}),i.jsx("div",{className:"md:hidden",children:Ce?i.jsx("div",{className:"p-4 text-center text-sm",children:"Cargando"}):or.length===0?i.jsx("div",{className:"p-4 text-center text-sm",children:"Sin clientes"}):i.jsx("div",{className:"space-y-2",children:or.map(dt=>{const er=de===dt.id,Jt=J===dt.id,ar=i.jsx("span",{className:`px-2 py-0.5 rounded-full text-[11px] ${Kr(dt.status)}`,children:dt.status});return i.jsxs("div",{className:"border rounded-2xl shadow-sm bg-white overflow-hidden",children:[i.jsxs("button",{type:"button",className:"w-full px-3 py-3 flex items-center justify-between gap-2 text-left",onClick:()=>{ie(""),!Jt&&Ge(tr=>tr===dt.id?null:dt.id)},children:[i.jsx("div",{className:"min-w-0 flex-1",children:i.jsx("div",{className:"truncate font-semibold",children:dt.name})}),i.jsxs("div",{className:"flex items-center gap-2 shrink-0",children:[i.jsxs("div",{className:"text-right",children:[i.jsx("div",{className:"text-[11px] text-gray-500 leading-3",children:"Pendiente"}),i.jsx("div",{className:"font-semibold leading-4",children:Lo(dt.balance||0)})]}),ar]})]}),er&&i.jsxs("div",{className:"px-3 pb-3",children:[i.jsxs("div",{className:"grid grid-cols-2 gap-2 text-sm",children:[i.jsxs("div",{className:"bg-gray-50 border rounded-xl p-2",children:[i.jsx("div",{className:"text-[11px] text-gray-500",children:"ltimo abono"}),i.jsx("div",{className:"font-medium",children:dt.lastAbonoDate?dt.lastAbonoDate:""}),i.jsx("div",{className:"text-[12px] text-gray-700",children:dt.lastAbonoAmount?Lo(dt.lastAbonoAmount):""})]}),i.jsxs("div",{className:"bg-gray-50 border rounded-xl p-2",children:[i.jsx("div",{className:"text-[11px] text-gray-500",children:"Saldo pendiente"}),i.jsx("div",{className:"text-lg font-bold",children:Lo(dt.balance||0)})]})]}),Jt?i.jsxs("div",{className:"mt-3 space-y-3",children:[i.jsxs("div",{className:"grid grid-cols-2 gap-2 text-sm",children:[i.jsxs("div",{className:"col-span-2",children:[i.jsx("div",{className:"text-[11px] text-gray-500",children:"Nombre"}),i.jsx("input",{className:"w-full border p-2 rounded-xl",value:fe,onChange:tr=>_e(tr.target.value)})]}),i.jsxs("div",{className:"col-span-2",children:[i.jsx("div",{className:"text-[11px] text-gray-500",children:"Telfono"}),i.jsx("input",{className:"w-full border p-2 rounded-xl",value:Ue,onChange:tr=>Ye(wy(tr.target.value))})]}),i.jsxs("div",{children:[i.jsx("div",{className:"text-[11px] text-gray-500",children:"Estado"}),i.jsxs("select",{className:"w-full border p-2 rounded-xl",value:jt,onChange:tr=>St(tr.target.value),children:[i.jsx("option",{value:"ACTIVO",children:"ACTIVO"}),i.jsx("option",{value:"BLOQUEADO",children:"BLOQUEADO"})]})]}),i.jsxs("div",{children:[i.jsx("div",{className:"text-[11px] text-gray-500",children:"Lugar"}),i.jsxs("select",{className:"w-full border p-2 rounded-xl",value:At,onChange:tr=>yt(tr.target.value),children:[i.jsx("option",{value:"",children:""}),rB.map(tr=>i.jsx("option",{value:tr,children:tr},tr))]})]}),i.jsxs("div",{className:"col-span-2",children:[i.jsx("div",{className:"text-[11px] text-gray-500",children:"Vendedor"}),i.jsxs("select",{className:"w-full border p-2 rounded-xl",value:o?s:qe,onChange:tr=>ge(tr.target.value),disabled:o,children:[i.jsx("option",{value:"",children:" Sin vendedor "}),c.map(tr=>i.jsx("option",{value:tr.id,children:tr.name},tr.id))]})]}),i.jsxs("div",{className:"col-span-2",children:[i.jsx("div",{className:"text-[11px] text-gray-500",children:"Lmite"}),i.jsx("input",{type:"number",step:"0.01",inputMode:"decimal",className:"w-full border p-2 rounded-xl text-right",value:Number.isNaN(Ve)?"":Ve,onChange:tr=>Te(Math.max(0,Number(tr.target.value||0)))})]}),i.jsxs("div",{className:"col-span-2",children:[i.jsx("div",{className:"text-[11px] text-gray-500",children:"Comentario"}),i.jsx("textarea",{className:"w-full border p-2 rounded-xl min-h-24 resize-y",value:bt,onChange:tr=>Nt(tr.target.value),maxLength:500})]})]}),i.jsxs("div",{className:"grid grid-cols-2 gap-2",children:[i.jsx("button",{className:"px-3 py-2 rounded-xl text-white bg-blue-600 hover:bg-blue-700",onClick:hr,type:"button",children:"Guardar"}),i.jsx("button",{className:"px-3 py-2 rounded-xl bg-gray-200 hover:bg-gray-300",onClick:()=>{vt(),Ge(null)},type:"button",children:"Cancelar"})]})]}):i.jsxs("div",{className:"mt-3 grid grid-cols-3 gap-2",children:[i.jsx("button",{className:"px-3 py-2 rounded-xl text-white bg-yellow-600 hover:bg-yellow-700",onClick:()=>Be(dt),type:"button",children:"Editar"}),i.jsx("button",{className:"px-3 py-2 rounded-xl text-white bg-red-600 hover:bg-red-700 disabled:opacity-50",onClick:()=>xr(dt),disabled:!l,title:l?"Borrar":"Solo admin",type:"button",children:"Borrar"}),i.jsx("button",{className:"px-3 py-2 rounded-xl text-white bg-indigo-600 hover:bg-indigo-700",onClick:()=>_r(dt),type:"button",children:"Estado"})]})]})]},dt.id)})})})]}),We&&i.jsx("p",{className:"mt-2 text-sm",children:We}),K&&Mu.createPortal(i.jsxs("div",{className:"fixed inset-0 z-[70] flex items-center justify-center",children:[i.jsx("div",{className:"absolute inset-0 bg-black/40",onClick:()=>re(!1)}),i.jsxs("div",{className:"relative bg-white rounded-lg shadow-2xl border w-[96%] max-w-3xl max-h-[92vh] overflow-auto p-4",children:[i.jsxs("div",{className:"flex items-center justify-between mb-2",children:[i.jsx("h3",{className:"text-lg font-bold",children:"Crear Cliente"}),i.jsx("button",{className:"px-3 py-1 rounded bg-gray-200 hover:bg-gray-300",onClick:()=>re(!1),type:"button",children:"Cerrar"})]}),i.jsxs("form",{onSubmit:Lt,className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[i.jsxs("div",{children:[i.jsx("label",{className:"block text-sm font-semibold",children:"Nombre"}),i.jsx("input",{className:"w-full border p-2 rounded",placeholder:"Ej: Mara Lpez",value:D,onChange:dt=>X(dt.target.value)})]}),i.jsxs("div",{children:[i.jsx("label",{className:"block text-sm font-semibold",children:"Telfono"}),i.jsx("input",{className:"w-full border p-2 rounded",value:me,onChange:dt=>pe(wy(dt.target.value)),placeholder:"+505 88888888",inputMode:"numeric"})]}),i.jsxs("div",{children:[i.jsx("label",{className:"block text-sm font-semibold",children:"Lugar"}),i.jsxs("select",{className:"w-full border p-2 rounded",value:he,onChange:dt=>ve(dt.target.value),children:[i.jsx("option",{value:"",children:""}),rB.map(dt=>i.jsx("option",{value:dt,children:dt},dt))]})]}),i.jsxs("div",{children:[i.jsx("label",{className:"block text-sm font-semibold",children:"Estado"}),i.jsxs("select",{className:"w-full border p-2 rounded",value:ke,onChange:dt=>O(dt.target.value),children:[i.jsx("option",{value:"ACTIVO",children:"ACTIVO"}),i.jsx("option",{value:"BLOQUEADO",children:"BLOQUEADO"})]})]}),i.jsxs("div",{children:[i.jsx("label",{className:"block text-sm font-semibold",children:"Vendedor asociado"}),i.jsxs("select",{className:"w-full border p-2 rounded",value:o?s:U,onChange:dt=>Y(dt.target.value),disabled:o,children:[i.jsx("option",{value:"",children:" Sin vendedor "}),c.map(dt=>i.jsx("option",{value:dt.id,children:dt.name},dt.id))]})]}),i.jsxs("div",{children:[i.jsx("label",{className:"block text-sm font-semibold",children:"Deuda inicial"}),i.jsx("input",{type:"number",step:"0.01",inputMode:"decimal",className:"w-full border p-2 rounded",value:ee===0?"":ee,onChange:dt=>M(Math.max(0,Number(dt.target.value||0))),placeholder:"Ej: 1500"}),i.jsx("div",{className:"text-xs text-gray-500 mt-1",children:"Este valor cuenta como saldo desde el inicio."})]}),i.jsxs("div",{children:[i.jsx("label",{className:"block text-sm font-semibold",children:"Lmite de crdito (opcional)"}),i.jsx("input",{type:"number",step:"0.01",inputMode:"decimal",className:"w-full border p-2 rounded",value:G===0?"":G,onChange:dt=>z(Math.max(0,Number(dt.target.value||0))),placeholder:"Ej: 2000"})]}),i.jsxs("div",{className:"md:col-span-2",children:[i.jsx("label",{className:"block text-sm font-semibold",children:"Comentario"}),i.jsx("textarea",{className:"w-full border p-2 rounded resize-y min-h-24",value:ae,onChange:dt=>Pe(dt.target.value),maxLength:500,placeholder:"Notas del cliente"}),i.jsxs("div",{className:"text-xs text-gray-500 text-right",children:[ae.length,"/500"]})]}),i.jsxs("div",{className:"md:col-span-2 flex justify-end gap-2",children:[i.jsx("button",{type:"button",className:"px-4 py-2 rounded bg-gray-200 hover:bg-gray-300",onClick:()=>re(!1),children:"Cancelar"}),i.jsx("button",{className:"bg-blue-600 text-white px-4 py-2 rounded hover:bg-blue-700",children:"Guardar cliente"})]})]})]})]}),document.body),q&&i.jsx("div",{className:"fixed inset-0 bg-black/40 flex items-center justify-center z-50",children:i.jsxs("div",{className:"bg-white rounded-lg shadow-xl border w-[95%] max-w-5xl p-4 max-h-[92vh] overflow-auto",children:[i.jsxs("div",{className:"flex items-center justify-between mb-2",children:[i.jsxs("h3",{className:"text-lg font-bold",children:["Estado de cuenta  ",(ye==null?void 0:ye.name)||""]}),i.jsxs("div",{className:"flex gap-2",children:[i.jsx("button",{className:"px-3 py-1 rounded bg-green-600 text-white hover:bg-green-700",onClick:()=>{xt(0),Et(new Date().toISOString().slice(0,10)),nt(""),Ne(!0)},children:"Abonar"}),i.jsx("button",{className:"px-3 py-1 rounded bg-gray-200 hover:bg-gray-300",onClick:()=>se(!1),children:"Cerrar"})]})]}),i.jsxs("div",{className:"hidden md:block",children:[i.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-3 mb-3",children:[i.jsxs("div",{className:"p-3 border rounded bg-gray-50",children:[i.jsx("div",{className:"text-xs text-gray-600",children:"Deuda inicial"}),i.jsx("div",{className:"text-xl font-semibold",children:Lo(Number(Nn||0))})]}),i.jsxs("div",{className:"p-3 border rounded bg-gray-50",children:[i.jsx("div",{className:"text-xs text-gray-600",children:"Saldo actual"}),i.jsx("div",{className:"text-xl font-semibold",children:Lo(Ae.saldoActual)})]}),i.jsxs("div",{className:"p-3 border rounded bg-gray-50",children:[i.jsx("div",{className:"text-xs text-gray-600",children:"Total abonado"}),i.jsx("div",{className:"text-xl font-semibold",children:Lo(Ae.totalAbonado)})]}),i.jsxs("div",{className:"p-3 border rounded bg-gray-50",children:[i.jsx("div",{className:"text-xs text-gray-600",children:"Saldo restante"}),i.jsx("div",{className:"text-xl font-semibold",children:Lo(Ae.saldoRestante)})]})]}),i.jsx("div",{className:"bg-white rounded border overflow-x-auto",children:i.jsxs("table",{className:"min-w-full text-sm",children:[i.jsx("thead",{className:"bg-gray-100",children:i.jsxs("tr",{children:[i.jsx("th",{className:"p-2 border",children:"Fecha"}),i.jsx("th",{className:"p-2 border",children:"Tipo"}),i.jsx("th",{className:"p-2 border",children:"Referencia"}),i.jsx("th",{className:"p-2 border",children:"Comentario"}),i.jsx("th",{className:"p-2 border",children:"Monto"}),i.jsx("th",{className:"p-2 border",children:"Acciones"})]})}),i.jsx("tbody",{children:Le?i.jsx("tr",{children:i.jsx("td",{colSpan:6,className:"p-4 text-center",children:"Cargando"})}):ht.length===0?i.jsx("tr",{children:i.jsx("td",{colSpan:6,className:"p-4 text-center",children:"Sin movimientos"})}):ht.map(dt=>{var Jt,ar;const er=oe===dt.id;return i.jsxs("tr",{className:"text-center",children:[i.jsx("td",{className:"p-2 border",children:er?i.jsx("input",{type:"date",className:"w-full border p-1 rounded",value:ce,onChange:tr=>Me(tr.target.value)}):dt.date||""}),i.jsx("td",{className:"p-2 border",children:dt.amount>=0?(Jt=dt.ref)!=null&&Jt.saleId?i.jsx("button",{type:"button",className:"px-2 py-0.5 rounded text-xs bg-yellow-100 text-yellow-700 underline",title:"Ver dulces de esta compra",onClick:()=>B(dt.ref.saleId),children:"COMPRA (CARGO)"}):i.jsx("span",{className:"px-2 py-0.5 rounded text-xs bg-yellow-100 text-yellow-700",children:"COMPRA (CARGO)"}):i.jsx("span",{className:"px-2 py-0.5 rounded text-xs bg-green-100 text-green-700",children:"ABONO"})}),i.jsx("td",{className:"p-2 border",children:(ar=dt.ref)!=null&&ar.saleId?`Venta #${dt.ref.saleId}`:""}),i.jsx("td",{className:"p-2 border",children:er?i.jsx("input",{className:"w-full border p-1 rounded",value:R,onChange:tr=>L(tr.target.value),placeholder:"Comentario"}):i.jsx("span",{title:dt.comment||"",children:(dt.comment||"").length>40?(dt.comment||"").slice(0,40)+"":dt.comment||""})}),i.jsx("td",{className:"p-2 border font-semibold",children:er?i.jsx("input",{type:"number",step:"0.01",inputMode:"decimal",className:"w-full border p-1 rounded text-right",value:Number.isNaN(Ke)?"":Ke,onChange:tr=>{const fr=Number(tr.target.value||0),ne=Number.isFinite(fr)?Math.max(0,parseFloat(fr.toFixed(2))):0;P(ne)},placeholder:"0.00"}):Lo(dt.amount)}),i.jsx("td",{className:"p-2 border",children:er?i.jsxs("div",{className:"flex gap-2 justify-center",children:[i.jsx("button",{className:"px-2 py-1 rounded text-white bg-blue-600 hover:bg-blue-700",onClick:Or,children:"Guardar"}),i.jsx("button",{className:"px-2 py-1 rounded bg-gray-200 hover:bg-gray-300",onClick:wr,children:"Cancelar"})]}):i.jsxs("div",{className:"flex gap-2 justify-center",children:[i.jsx("button",{className:"px-2 py-1 rounded text-white bg-yellow-600 hover:bg-yellow-700",onClick:()=>Qr(dt),children:"Editar"}),i.jsx("button",{className:"px-2 py-1 rounded text-white bg-red-600 hover:bg-red-700",onClick:()=>$r(dt),children:"Borrar"})]})})]},dt.id)})})]})})]}),i.jsxs("div",{className:"md:hidden space-y-3",children:[i.jsxs("div",{className:"border rounded-2xl overflow-hidden",children:[i.jsxs("button",{type:"button",className:"w-full px-3 py-3 flex items-center justify-between text-left",onClick:()=>ft(dt=>!dt),children:[i.jsx("div",{className:"font-semibold",children:"Estado de cuenta"}),i.jsx("div",{className:"text-sm text-gray-500",children:rt?"Ocultar":"Ver"})]}),rt&&i.jsxs("div",{className:"px-3 pb-3 grid grid-cols-2 gap-2",children:[i.jsxs("div",{className:"bg-gray-50 border rounded-xl p-2",children:[i.jsx("div",{className:"text-[11px] text-gray-500",children:"Deuda inicial"}),i.jsx("div",{className:"font-bold",children:Lo(Number(Nn||0))})]}),i.jsxs("div",{className:"bg-gray-50 border rounded-xl p-2",children:[i.jsx("div",{className:"text-[11px] text-gray-500",children:"Saldo actual"}),i.jsx("div",{className:"font-bold",children:Lo(Ae.saldoActual)})]}),i.jsxs("div",{className:"bg-gray-50 border rounded-xl p-2",children:[i.jsx("div",{className:"text-[11px] text-gray-500",children:"Total abonado"}),i.jsx("div",{className:"font-bold",children:Lo(Ae.totalAbonado)})]}),i.jsxs("div",{className:"bg-gray-50 border rounded-xl p-2",children:[i.jsx("div",{className:"text-[11px] text-gray-500",children:"Saldo restante"}),i.jsx("div",{className:"font-bold",children:Lo(Ae.saldoRestante)})]})]})]}),i.jsxs("div",{className:"border rounded-2xl overflow-hidden",children:[i.jsxs("button",{type:"button",className:"w-full px-3 py-3 flex items-center justify-between text-left",onClick:()=>ut(dt=>!dt),children:[i.jsx("div",{className:"font-semibold",children:"Movimientos"}),i.jsx("div",{className:"text-sm text-gray-500",children:et?"Ocultar":"Ver"})]}),et&&i.jsx("div",{className:"px-3 pb-3 space-y-2",children:Le?i.jsx("div",{className:"text-center text-sm p-3",children:"Cargando"}):ht.length===0?i.jsx("div",{className:"text-center text-sm p-3",children:"Sin movimientos"}):ht.map(dt=>{var fr;const er=Ot===dt.id,Jt=oe===dt.id,ar=dt.amount>=0?"CARGO":"ABONO",tr=dt.amount>=0?"bg-yellow-100 text-yellow-700":"bg-green-100 text-green-700";return i.jsxs("div",{className:"border rounded-2xl overflow-hidden bg-white",children:[i.jsxs("button",{type:"button",className:"w-full px-3 py-3 flex items-center justify-between gap-2 text-left",onClick:()=>{Jt||zt(ne=>ne===dt.id?null:dt.id)},children:[i.jsxs("div",{className:"min-w-0",children:[i.jsx("div",{className:"text-[11px] text-gray-500 leading-3",children:"Fecha"}),i.jsx("div",{className:"font-semibold",children:dt.date||""})]}),i.jsxs("div",{className:"flex items-center gap-2",children:[i.jsx("span",{className:`px-2 py-0.5 rounded-full text-[11px] ${tr}`,children:ar}),i.jsxs("div",{className:"text-right",children:[i.jsx("div",{className:"text-[11px] text-gray-500 leading-3",children:"Monto"}),i.jsx("div",{className:"font-semibold",children:Lo(dt.amount)})]})]})]}),er&&i.jsxs("div",{className:"px-3 pb-3 space-y-2",children:[i.jsxs("div",{className:"text-sm",children:[i.jsx("div",{className:"text-[11px] text-gray-500",children:"Referencia"}),i.jsx("div",{className:"font-medium",children:(fr=dt.ref)!=null&&fr.saleId?`Venta #${dt.ref.saleId}`:""})]}),i.jsxs("div",{className:"text-sm",children:[i.jsx("div",{className:"text-[11px] text-gray-500",children:"Comentario"}),Jt?i.jsx("input",{className:"w-full border p-2 rounded-xl",value:R,onChange:ne=>L(ne.target.value),placeholder:"Comentario"}):i.jsx("div",{className:"font-medium",children:(dt.comment||"").trim()||""})]}),Jt&&i.jsxs("div",{className:"grid grid-cols-2 gap-2",children:[i.jsxs("div",{children:[i.jsx("div",{className:"text-[11px] text-gray-500",children:"Fecha"}),i.jsx("input",{type:"date",className:"w-full border p-2 rounded-xl",value:ce,onChange:ne=>Me(ne.target.value)})]}),i.jsxs("div",{children:[i.jsx("div",{className:"text-[11px] text-gray-500",children:"Monto"}),i.jsx("input",{type:"number",step:"0.01",inputMode:"decimal",className:"w-full border p-2 rounded-xl text-right",value:Number.isNaN(Ke)?"":Ke,onChange:ne=>{const He=Number(ne.target.value||0),tt=Number.isFinite(He)?Math.max(0,parseFloat(He.toFixed(2))):0;P(tt)}})]})]}),Jt?i.jsxs("div",{className:"grid grid-cols-2 gap-2 pt-1",children:[i.jsx("button",{className:"px-3 py-2 rounded-xl text-white bg-blue-600 hover:bg-blue-700",onClick:Or,type:"button",children:"Guardar"}),i.jsx("button",{className:"px-3 py-2 rounded-xl bg-gray-200 hover:bg-gray-300",onClick:wr,type:"button",children:"Cancelar"})]}):i.jsxs("div",{className:"grid grid-cols-2 gap-2 pt-1",children:[i.jsx("button",{className:"px-3 py-2 rounded-xl text-white bg-yellow-600 hover:bg-yellow-700",onClick:()=>Qr(dt),type:"button",children:"Editar"}),i.jsx("button",{className:"px-3 py-2 rounded-xl text-white bg-red-600 hover:bg-red-700",onClick:()=>$r(dt),type:"button",children:"Borrar"})]})]})]},dt.id)})})]})]}),lt&&i.jsx("div",{className:"fixed inset-0 bg-black/50 flex items-center justify-center z-[60]",children:i.jsxs("div",{className:"bg-white rounded-lg shadow-2xl border w-[95%] max-w-md p-4",children:[i.jsxs("h3",{className:"text-lg font-bold",children:["Registrar abono  ",(ye==null?void 0:ye.name)||""]}),i.jsxs("div",{className:"grid grid-cols-1 gap-3",children:[i.jsxs("div",{children:[i.jsx("label",{className:"block text-sm font-semibold",children:"Fecha"}),i.jsx("input",{type:"date",className:"w-full border p-2 rounded",value:_t,onChange:dt=>Et(dt.target.value)})]}),i.jsxs("div",{children:[i.jsx("label",{className:"block text-sm font-semibold",children:"Monto"}),i.jsx("input",{type:"number",step:"0.01",inputMode:"decimal",className:"w-full border p-2 rounded",value:De===0?"":De,onChange:dt=>{const er=Number(dt.target.value||0),Jt=Number.isFinite(er)?Math.max(0,parseFloat(er.toFixed(2))):0;xt(Jt)},placeholder:"0.00"}),i.jsx("div",{className:"text-xs text-gray-500 mt-1",children:"Se registrar como ABONO (negativo) con 2 decimales."})]}),i.jsxs("div",{children:[i.jsx("label",{className:"block text-sm font-semibold",children:"Comentario (opcional)"}),i.jsx("textarea",{className:"w-full border p-2 rounded resize-y min-h-20",value:Mt,onChange:dt=>nt(dt.target.value),maxLength:250,placeholder:"Ej: Abono en efectivo"}),i.jsxs("div",{className:"text-xs text-gray-500 text-right",children:[Mt.length,"/250"]})]})]}),i.jsxs("div",{className:"mt-4 flex justify-end gap-2",children:[i.jsx("button",{className:"px-3 py-2 rounded bg-gray-200 hover:bg-gray-300",onClick:()=>Ne(!1),disabled:Ee,children:"Cancelar"}),i.jsx("button",{className:"px-3 py-2 rounded bg-green-600 text-white hover:bg-green-700 disabled:opacity-60",onClick:en,disabled:Ee,children:Ee?"Guardando...":"Guardar abono"})]})]})})]})}),w&&i.jsx("div",{className:"fixed inset-0 bg-black/40 flex items-center justify-center z-[65]",children:i.jsxs("div",{className:"bg-white rounded-lg shadow-xl border w-[95%] max-w-3xl p-4",children:[i.jsxs("div",{className:"flex items-center justify-between mb-2",children:[i.jsxs("h3",{className:"text-lg font-bold",children:["Dulces vendidos"," ",S?` #${S}`:""]}),i.jsx("button",{className:"px-3 py-1 rounded bg-gray-200 hover:bg-gray-300",onClick:()=>j(!1),children:"Cerrar"})]}),i.jsx("div",{className:"bg-white rounded border overflow-x-auto",children:i.jsxs("table",{className:"min-w-full text-sm",children:[i.jsx("thead",{className:"bg-gray-100",children:i.jsxs("tr",{children:[i.jsx("th",{className:"p-2 border",children:"Producto"}),i.jsx("th",{className:"p-2 border text-right",children:"Cantidad"}),i.jsx("th",{className:"p-2 border text-right",children:"Precio"}),i.jsx("th",{className:"p-2 border text-right",children:"Descuento"}),i.jsx("th",{className:"p-2 border text-right",children:"Monto"})]})}),i.jsx("tbody",{children:I?i.jsx("tr",{children:i.jsx("td",{colSpan:5,className:"p-4 text-center",children:"Cargando"})}):T.length===0?i.jsx("tr",{children:i.jsx("td",{colSpan:5,className:"p-4 text-center",children:"Sin tems en esta venta."})}):T.map((dt,er)=>i.jsxs("tr",{className:"text-center",children:[i.jsx("td",{className:"p-2 border text-left",children:dt.productName}),i.jsx("td",{className:"p-2 border text-right",children:dt.qty}),i.jsx("td",{className:"p-2 border text-right",children:Lo(dt.unitPrice)}),i.jsx("td",{className:"p-2 border text-right",children:Lo(dt.discount||0)}),i.jsx("td",{className:"p-2 border text-right",children:Lo(dt.total)})]},er))})]})})]})})]})}const Gc=t=>`C$ ${(Number(t)||0).toFixed(2)}`,EQe=["Altagracia","Taguizapa","El paso","Calaysa","Urbaite","Las Pilas","Pull","Tilgue","Balge","Santa Cruz","Moyogalpa","Santo Domingo","San Jos del Sur","San Fernando","Merida","La Paloma","San Lorenzo","San Carlos","San Miguel"];function SQe(t){switch(t){case"RIVAS":return"Rivas";case"SAN_JORGE":return"San Jorge";case"ISLA":return"Isla de Ometepe";default:return""}}function IQe(t){switch(t){case"Rivas":return"RIVAS";case"San Jorge":return"SAN_JORGE";case"Isla Ometepe":return"ISLA";default:return"RIVAS"}}function jQe(t){const{saleId:e,date:r,customerName:n,branch:a,items:s,total:o,vendorName:l,vendorCommissionPercent:c,vendorCommissionAmount:u}=t,d=new rn;let f=12;if(d.setFontSize(16),d.text("Multiservicios Ortiz",10,f),f+=6,d.setFontSize(12),d.text("Recibo de venta certificada",10,f),f+=8,d.setFontSize(12),d.text(`Fecha: ${r}`,10,f),f+=5,d.text(`Cliente: ${n||"Cliente Mostrador"}`,10,f),f+=5,d.text(`Sucursal: ${SQe(a)}`,10,f),f+=5,d.text(`Autorizado: ${e}`,10,f),f+=5,l&&(d.text(`Vendedor: ${l}`,10,f),f+=5),typeof c=="number"){const A=Number(u||0).toFixed(2),h=c.toFixed(2);d.text(`Comisin vendedor: ${h}%  C$ ${A}`,10,f),f+=8}else f+=3;d.setFontSize(12),d.text("Producto",10,f),d.text("Paquetes",110,f,{align:"right"}),d.text("Precio.",150,f,{align:"right"}),d.text("Subtotal",190,f,{align:"right"}),f+=4,d.line(10,f,190,f),f+=4,s.forEach(A=>{f>270&&(d.addPage(),f=12);const h=(A.productName||"").length>50?A.productName.slice(0,47)+"...":A.productName;d.text(h,10,f),d.text(String(A.qty),110,f,{align:"right"}),d.text(`C$ ${Number(A.unitPrice||0).toFixed(2)}`,150,f,{align:"right"}),d.text(`C$ ${Number(A.total||0).toFixed(2)}`,190,f,{align:"right"}),f+=5}),f+=4,d.line(10,f,190,f),f+=6,d.setFontSize(13),d.text(`Total: C$ ${Number(o||0).toFixed(2)}`,190,f,{align:"right"}),f+=6,d.setFontSize(9),d.text("Gracias por su compra.",10,f),d.save(`venta_dulces_${e}.pdf`)}async function sG(t,e){if(!t||!e)return 0;const r=Yt(mt(Se,"inventory_candies_sellers"),cr("sellerId","==",e),cr("productId","==",t)),n=await kt(r);let a=0;return n.forEach(s=>{const o=s.data(),l=Number(o.remainingUnits??o.remaining??o.totalUnits??0);l>0&&(a+=l)}),a}const iG=()=>{const t=new Date;return t.setMinutes(t.getMinutes()-t.getTimezoneOffset()),t.toISOString().slice(0,10)};async function PQe(t){const{productId:e,vendorId:r,quantityUnits:n,saleDate:a,saleId:s}=t;let o=Math.max(0,Math.floor(Number(n||0)));const l=[];if(!e||!r||o<=0)return{allocations:[]};const c=Yt(mt(Se,"inventory_candies_sellers"),cr("sellerId","==",r),cr("productId","==",e),cr("remainingUnits",">",0),In("date","asc"),In("createdAt","asc")),u=await kt(c);for(const d of u.docs){if(o<=0)break;const f=d.data(),A=Number(f.remainingUnits||0);if(A<=0)continue;const h=Math.min(A,o),m=A-h,p=Math.max(1,Math.floor(Number(f.unitsPerPackage||1))),x=Math.floor(m/p);await kn(d.ref,{remainingUnits:m,remainingPackages:x}),l.push({inventorySellerId:d.id,productId:e,units:h,saleDate:a,saleId:s}),o-=h}return o>0&&console.warn("[allocateSaleFIFOCandyFromVendor] No alcanz el inventario del vendedor, faltaron unidades.",{productId:e,vendorId:r,remaining:o}),{allocations:l}}function oG(t){const e="+505 ";if(!t.startsWith(e)){const n=t.replace(/\D/g,"");return e+n.slice(0,8)}const r=t.slice(e.length).replace(/\D/g,"");return e+r.slice(0,8)}function BQe({role:t="",roles:e,sellerCandyId:r="",currentUserEmail:n}){const a=e&&e.length?e:t;En(a,"admin"),En(a,"vendedor_dulces");const[s,o]=g.useState([]),[l,c]=g.useState([]),[u,d]=g.useState([]),[f,A]=g.useState({}),[h,m]=g.useState("CONTADO"),[p,x]=g.useState("RIVAS"),[v,y]=g.useState(""),[b,w]=g.useState(""),[j,I]=g.useState(iG()),[_,S]=g.useState(""),[E,T]=g.useState(!1),[k,B]=g.useState(""),[D,X]=g.useState([]),[me,pe]=g.useState(!0),[he,ve]=g.useState(!1),ae=g.useMemo(()=>D.reduce((oe,Fe)=>oe+(Fe.qtyPackages||0),0),[D]),Pe=g.useMemo(()=>D.reduce((oe,Fe)=>oe+(Fe.qtyPackages||0)*(Fe.unitsPerPackage||1),0),[D]),ke=g.useMemo(()=>{const oe=D.reduce((Fe,ce)=>{const Me=(Number(ce.pricePerPackage)||0)*(ce.qtyPackages||0),Ke=Number(ce.discount)||0,P=Math.max(0,Me-Ke);return Fe+P},0);return Math.floor(oe*100)/100},[D]),[O,G]=g.useState(0),[z,U]=g.useState(""),[Y,ee]=g.useState(!1),[M,H]=g.useState(!1),[te,Ce]=g.useState(""),[V,We]=g.useState("+505 "),[ie,J]=g.useState(""),[Oe,fe]=g.useState(""),[_e,Ue]=g.useState("ACTIVO"),[Ye,At]=g.useState(0),[yt,bt]=g.useState(""),Nt=()=>{Ce(""),We("+505 "),J(""),fe(""),Ue("ACTIVO"),At(0)},[jt,St]=g.useState(!1),Ve=async oe=>{const Fe=String(oe||"").trim();if(!Fe)return;const ce=Mt.find(R=>String(R.barcode||"")===Fe),Me=Mt.find(R=>String(R.sku||"")===Fe),Ke=Mt.find(R=>String(R.id||"")===Fe),P=ce||Me||Ke||null;P?(await lt(P.id),U(" Producto agregado desde escner."),setTimeout(()=>U(""),2500)):(U(" Cdigo no corresponde a ningn producto disponible."),setTimeout(()=>U(""),2500))};function Te({open:oe,onClose:Fe,onDetected:ce}){const Me=g.useRef(null),Ke=g.useRef(null),[P,R]=g.useState(""),L=g.useRef("");return g.useEffect(()=>{if(!oe)return;let K=!1;const re=new $2,de=()=>{var rt,ft,et;try{(rt=Ke.current)==null||rt.stop()}catch{}Ke.current=null;try{const ut=(ft=Me.current)==null?void 0:ft.srcObject;try{(et=ut==null?void 0:ut.getTracks)==null||et.call(ut).forEach(Ot=>Ot.stop())}catch{}}catch{}try{Me.current&&(Me.current.srcObject=null)}catch{}};return(async()=>{R("");try{if(!Me.current)return;try{(await navigator.mediaDevices.getUserMedia({video:{facingMode:{ideal:"environment"}},audio:!1})).getTracks().forEach(et=>et.stop())}catch{}const rt=await re.decodeFromConstraints({video:{facingMode:{ideal:"environment"},width:{ideal:1280},height:{ideal:720}},audio:!1},Me.current,ft=>{if(!K&&ft){const et=String(ft.getText()||"").trim().replace(/\s+/g,"");if(!et||et===L.current)return;L.current=et,de(),ce(et),Fe()}});Ke.current=rt}catch(rt){const ft=String((rt==null?void 0:rt.message)||""),et=String((rt==null?void 0:rt.name)||"");ft.toLowerCase().includes("permission")||et==="NotAllowedError"?R("Permiso de cmara denegado."):et==="NotFoundError"||ft.toLowerCase().includes("notfound")?R("No se encontr cmara en este dispositivo."):ft.toLowerCase().includes("secure")||ft.toLowerCase().includes("https")?R("La cmara requiere HTTPS (sitio seguro)."):R(ft||"No se pudo iniciar el escner.")}})(),()=>{var rt;K=!0;try{(rt=Ke.current)==null||rt.stop()}catch{}Ke.current=null}},[oe,Fe,ce]),oe?i.jsx("div",{className:"fixed inset-0 bg-black/70 z-50 p-3 flex items-center justify-center",children:i.jsxs("div",{className:"bg-white w-full max-w-md rounded-2xl shadow-lg border overflow-hidden",children:[i.jsxs("div",{className:"flex items-center justify-between p-3 border-b",children:[i.jsx("div",{className:"font-bold",children:"Escanear cdigo"}),i.jsx("button",{className:"px-3 py-1 rounded bg-gray-200 hover:bg-gray-300",onClick:Fe,type:"button",children:"Cerrar"})]}),i.jsxs("div",{className:"p-3",children:[i.jsxs("div",{className:"relative w-full aspect-[3/4] bg-black rounded-xl overflow-hidden",children:[i.jsx("video",{ref:Me,className:"w-full h-full object-cover",muted:!0,playsInline:!0,autoPlay:!0}),i.jsx("div",{className:"absolute inset-0 pointer-events-none",children:i.jsx("div",{className:"absolute left-1/2 top-1/2 -translate-x-1/2 -translate-y-1/2 w-[85%] h-40 border-2 border-white/70 rounded-xl"})})]}),P&&i.jsx("div",{className:"mt-3 text-sm text-red-600 bg-red-50 border border-red-200 rounded p-2",children:P}),i.jsx("div",{className:"mt-2 text-xs text-gray-600",children:"Apunt al cdigo de barras y mantenelo estable."})]})]})}):null}const qe=g.useMemo(()=>s.find(oe=>oe.id===v),[s,v]),ge=g.useMemo(()=>E&&_?s.filter(oe=>(oe.vendorId??oe.sellerId??"")===_):s,[s,E,_]),q=(qe==null?void 0:qe.balance)||0,se=h==="CREDITO"?q+Math.max(0,Number(ke||0))-Math.max(0,Number(O||0)):0,ye=g.useMemo(()=>{if(h!=="CREDITO")return 0;const oe=Math.max(0,Number(q||0))+Math.max(0,Number(ke||0));return Math.floor(oe*100)/100},[h,q,ke]),ue=oe=>{const Fe=Math.max(0,Number(oe||0));return Math.min(Fe,ye)},Le=g.useMemo(()=>u.find(oe=>oe.id===_)||null,[u,_]),ct=(Le==null?void 0:Le.commissionPercent)||0,ht=g.useMemo(()=>{const oe=D.reduce((Fe,ce)=>Fe+Number(ce.margenVendedor||0),0);return Number(oe.toFixed(2))},[D]);g.useEffect(()=>{(async()=>{const oe=Yt(mt(Se,"customers_candies"),In("createdAt","desc")),Fe=await kt(oe),ce=[];Fe.forEach(R=>{const L=R.data();ce.push({id:R.id,name:L.name??"",phone:L.phone??"+505 ",place:L.place??"",status:L.status??"ACTIVO",creditLimit:Number(L.creditLimit??0),balance:0,sellerId:L.sellerId??L.vendorId??"",vendorId:L.vendorId??L.sellerId??""})});for(const R of ce)try{const L=Yt(mt(Se,"ar_movements"),cr("customerId","==",R.id)),K=await kt(L);let re=0;K.forEach(Ge=>re+=Number(Ge.data().amount||0));const de=Number(R.initialDebt||0);R.balance=re+de}catch{R.balance=0}o(ce);const Me=Yt(mt(Se,"products_candies"),In("createdAt","desc")),Ke=await kt(Me),P=[];Ke.forEach(R=>{const L=R.data();P.push({id:R.id,name:L.name??"(sin nombre)",sku:L.sku??"",unitsPerPackage:Number(L.unitsPerPackage??1),barcode:String(L.barcode||""),priceRivas:Number(L.unitPriceRivas??0),priceSanJorge:Number(L.unitPriceSanJorge??0),priceIsla:Number(L.unitPriceIsla??0),providerPrice:Number(L.providerPrice??0),providerPricePerUnit:Number(L.providerPricePerUnit??0)})}),c(P);try{const R=await kt(mt(Se,"sellers_candies")),L=[];R.forEach(K=>{const re=K.data(),de=re.branch||"Rivas",Ge=IQe(de);L.push({id:K.id,name:re.name??"(sin nombre)",branch:Ge,branchLabel:de,commissionPercent:Number(re.commissionPercent??0)})}),d(L)}catch(R){console.error("Error cargando vendedores:",R)}A({})})()},[]),g.useEffect(()=>{var Fe,ce;const oe=e&&e.length?e:t;if(oe&&((Fe=oe.includes)!=null&&Fe.call(oe,"vendedor_dulces"))&&r){S(r),T(!0);try{localStorage.setItem("pos_vendorId",r),localStorage.setItem("pos_role","VENDEDOR")}catch{}return}if(oe&&((ce=oe.includes)!=null&&ce.call(oe,"admin"))){T(!1);return}try{const Me=localStorage.getItem("pos_vendorId")||"",Ke=localStorage.getItem("pos_role")||"";Me&&S(Me),Ke.toUpperCase()==="VENDEDOR"&&T(!0)}catch{}},[t,r]);const xe=async oe=>{if(!oe){A({});return}const Fe=Yt(mt(Se,"inventory_candies_sellers"),cr("sellerId","==",oe)),ce=await kt(Fe),Me={};ce.forEach(Ke=>{const P=Ke.data(),R=P.productId||"";if(!R)return;const L=Number(P.remainingUnits??P.remaining??P.totalUnits??0);L<=0||(Me[R]=(Me[R]||0)+L)}),A(Me),X(Ke=>{const P=[];for(const R of Ke){const L=Me[R.productId]??0;L>0&&P.push({...R,availableUnits:L})}return P})};g.useEffect(()=>{if(!_){A({});return}const oe=u.find(Fe=>Fe.id===_);oe&&x(oe.branch),xe(_)},[_,u]),g.useEffect(()=>{X(oe=>oe.map(Fe=>{const ce=l.find(Ke=>Ke.id===Fe.productId);if(!ce)return Fe;const Me=p==="RIVAS"?ce.priceRivas:p==="SAN_JORGE"?ce.priceSanJorge:ce.priceIsla;return{...Fe,pricePerPackage:Number(Me)||0}}))},[p,l]);async function Ae(oe){const{productId:Fe,vendorId:ce,branch:Me}=oe;if(!Fe||!ce)return 0;const Ke=Yt(mt(Se,"inventory_candies_sellers"),cr("sellerId","==",ce),cr("productId","==",Fe)),P=await kt(Ke);if(P.empty)return 0;const R=P.docs[0].data(),L=Number(R.unitPriceVendor??0);if(L>0)return L;const K=Number(Me==="RIVAS"?R.unitPriceRivas??0:Me==="SAN_JORGE"?R.unitPriceSanJorge??0:R.unitPriceIsla??0);return Number(K||0)}const Re=oe=>{const Fe=Number(ct||0),ce=Number(oe||0)*Fe/100;return Math.max(0,Number(ce.toFixed(2)))},lt=async oe=>{var de;if(!oe)return;if(!_){U("Selecciona primero el vendedor para usar su inventario."),B("");return}if(D.some(Ge=>Ge.productId===oe)){B("");return}const Fe=l.find(Ge=>Ge.id===oe);if(!Fe){B("");return}const ce=await sG(oe,_),Me=((de=u.find(Ge=>Ge.id===_))==null?void 0:de.branch)??p,Ke=await Ae({productId:oe,vendorId:_,branch:Me}),R=await(async Ge=>{const{productId:rt,vendorId:ft}=Ge;if(!rt||!ft)return 0;try{const et=Yt(mt(Se,"inventory_candies_sellers"),cr("sellerId","==",ft),cr("productId","==",rt)),ut=await kt(et);if(ut.empty)return 0;const Ot=ut.docs[0].data();return Number(Ot.providerPrice??0)}catch{return 0}})({productId:oe,vendorId:_}),L=(()=>{const Ge=Number(Fe.providerPrice||0);if(Ge>0)return Ge;const rt=Number(Fe.providerPricePerUnit||0);return rt>0?rt*Number(Fe.unitsPerPackage||1):0})(),K=Number(R||0)>0?Number(R||0):Number(L||0),re={productId:oe,productName:Fe.name||"",sku:Fe.sku||"",unitsPerPackage:Fe.unitsPerPackage||1,pricePerPackage:Number(Ke)||0,availableUnits:Number(ce)||0,qtyPackages:0,discount:0,providerPricePerPackage:Number(K)||0,margenVendedor:0,uBruta:0};X(Ge=>[...Ge,re]),B("")},Ne=(oe,Fe)=>{X(ce=>ce.map(Me=>{if(Me.productId!==oe)return Me;if(Fe==="")return{...Me,qtyPackages:0};const Ke=Math.max(0,Math.floor(Number(Fe))),P=f[oe]??Me.availableUnits??0,R=Math.max(1,Number(Me.unitsPerPackage||1)),L=Math.floor(P/R);let K=Ke;Ke>L&&(K=L,U(` Solo hay ${L} paquetes disponibles.`),setTimeout(()=>U(""),2500));const re=Number(Me.pricePerPackage||0)*K,de=Number(Me.providerPricePerPackage||0)*K,Ge=re-de,rt=Re(Ge);return{...Me,qtyPackages:K,margenVendedor:rt,uBruta:Ge}}))},De=(oe,Fe)=>{X(ce=>ce.map(Me=>{if(Me.productId!==oe)return Me;if(Fe==="")return{...Me,discount:0};const Ke=Math.max(0,Math.floor(Number(Fe))),P=Me.qtyPackages||0,R=Number(Me.pricePerPackage||0)*P,L=Number(Me.providerPricePerPackage||0)*P,K=R-L,re=Re(K);return{...Me,discount:Ke,margenVendedor:re,uBruta:K}}))},xt=oe=>X(Fe=>Fe.filter(ce=>ce.productId!==oe)),_t=async()=>{if(!j)return"Selecciona la fecha.";if(!_)return"Selecciona el vendedor para esta venta.";if(D.length===0)return"Agrega al menos un producto.";const oe=D.filter(Fe=>(Fe.qtyPackages||0)>0);if(oe.length===0)return"Debes ingresar cantidades (> 0) en al menos un producto.";if(!(ke>0))return"El total debe ser mayor a cero.";if(h==="CONTADO"){if(!b.trim())return"Ingresa el nombre del cliente (contado)."}else{if(!v)return"Selecciona un cliente (crdito).";if(O<0)return"El pago inicial no puede ser negativo.";if(O>ye)return"El pago inicial no puede superar el saldo a deber (saldo actual + venta).";if((qe==null?void 0:qe.status)==="BLOQUEADO")return"El cliente est BLOQUEADO. No se puede facturar a crdito."}for(const Fe of oe){const ce=Fe.unitsPerPackage||1,Me=(Fe.qtyPackages||0)*ce,Ke=await sG(Fe.productId,_),P=Math.floor(Ke/ce);if(Me>Ke)return`Inventario insuficiente en el pedido del vendedor para "${Fe.productName}". Disponible: ${P} paquetes.`;const R=(Number(Fe.pricePerPackage)||0)*(Fe.qtyPackages||0),L=Number(Fe.discount)||0;if(!Number.isInteger(L)||L<0)return`El descuento en "${Fe.productName}" debe ser entero y  0.`;if(L>R)return`El descuento en "${Fe.productName}" no puede exceder C$ ${R.toFixed(2)}.`}return null},Et=async oe=>{oe.preventDefault(),U("");const Fe=await _t();if(Fe){U(" "+Fe);return}try{ee(!0);const ce=D.filter(L=>(L.qtyPackages||0)>0).map(L=>{const K=L.unitsPerPackage||1,re=L.qtyPackages||0,de=re*K,Ge=(Number(L.pricePerPackage)||0)*(re||0),rt=Math.max(0,Math.floor(Number(L.discount)||0)),ft=Math.max(0,Ge-rt),et=Number(L.providerPricePerPackage||0),ut=et*re,Ot=Ge-ut,zt=Re(Ot);return{productId:L.productId,productName:L.productName,sku:L.sku||"",qty:de,packages:re,unitsPerPackage:K,branch:p,unitPricePackage:Number(L.pricePerPackage)||0,discount:rt,total:Math.floor(ft*100)/100,providerPricePerPackage:et,margenVendedor:zt,uBruta:Ot}}),Me={type:h,branch:p,date:j,createdAt:Ar.now(),itemsTotal:Number(ke)||0,total:Number(ke)||0,quantity:Number(Pe)||0,packagesTotal:Number(ae)||0,items:ce,vendorId:_},Ke=u.find(L=>L.id===_);Ke&&(Me.vendorName=Ke.name,Me.vendorBranch=Ke.branch,Me.vendorBranchLabel=Ke.branchLabel,Me.vendorCommissionPercent=Ke.commissionPercent||0,Me.vendorCommissionAmount=ht||0),h==="CONTADO"?Me.customerName=b.trim():(Me.customerId=v,Me.downPayment=Number(O)||0);const P=await Jn(mt(Se,"sales_candies"),Me);if(h==="CONTADO"){const L=(b||"").trim();if(L)try{await Jn(mt(Se,"cash_customers"),{name:L,date:j,branch:p,vendorId:_,createdAt:Ar.now()})}catch(K){console.warn("No se pudo guardar cash_customer:",K)}}if(h==="CREDITO"&&v){const L={customerId:v,date:j,createdAt:Ar.now(),ref:{saleId:P.id}};await Jn(mt(Se,"ar_movements"),{...L,type:"CARGO",amount:Number(ke)||0}),Number(O)>0&&await Jn(mt(Se,"ar_movements"),{...L,type:"ABONO",amount:-Number(O)})}const R={};for(const L of ce)if(L.qty>0){const{allocations:K}=await PQe({productId:L.productId,vendorId:_,quantityUnits:L.qty,saleDate:j,saleId:P.id});R[L.productId]={productId:L.productId,vendorId:_,allocations:K}}await kn(Gt(Se,"sales_candies",P.id),{allocationsByItem:R});try{const L=h==="CONTADO"?b.trim()||"Cliente Mostrador":(qe==null?void 0:qe.name)||"Cliente crdito";jQe({saleId:P.id,date:j,customerName:L,branch:p,items:ce.map(K=>({productName:K.productName,qty:K.packages,unitPrice:K.unitPricePackage,total:K.total})),total:Number(ke)||0,vendorName:Ke==null?void 0:Ke.name,vendorCommissionPercent:(Ke==null?void 0:Ke.commissionPercent)||0,vendorCommissionAmount:ht})}catch(L){console.error("Error generando voucher PDF:",L)}m("CONTADO"),y(""),w(""),I(iG()),X([]),G(0),h==="CREDITO"&&v&&o(L=>L.map(K=>K.id===v?{...K,balance:(K.balance||0)+(Number(ke)||0)-(Number(O)||0)}:K)),U(" Venta de dulces registrada"),_?await xe(_):A({})}catch(ce){console.error(ce),U(" Error al guardar la venta de dulces")}finally{ee(!1)}},Mt=g.useMemo(()=>l.filter(oe=>{const Fe=f[oe.id]||0,ce=Math.max(1,Number(oe.unitsPerPackage||1));return Math.floor(Fe/ce)>0}).sort((oe,Fe)=>(oe.name||"").localeCompare(Fe.name||"")),[l,f]),[nt,Ee]=g.useState(""),we=g.useMemo(()=>{const oe=String(nt||"").trim().toLowerCase();return oe?Mt.filter(Fe=>`${Fe.name||""} ${Fe.sku||""}`.toLowerCase().includes(oe)||String(Fe.id||"").includes(oe)):Mt},[nt,Mt]);return i.jsxs("div",{className:"max-w-6xl mx-auto",children:[i.jsx("div",{className:"flex flex-col sm:flex-row sm:items-center sm:justify-between gap-2 mb-3",children:i.jsx("h2",{className:"text-2xl font-bold",children:"Ventas (Dulces)"})}),i.jsxs("form",{onSubmit:Et,className:"bg-white p-3 sm:p-4 rounded shadow border mb-6",children:[i.jsxs("div",{className:"hidden md:grid grid-cols-1 md:grid-cols-2 gap-4",children:[i.jsxs("div",{children:[i.jsx("label",{className:"block text-sm font-semibold",children:"Tipo de cliente"}),i.jsxs("select",{className:"w-full border p-2 rounded",value:h,onChange:oe=>m(oe.target.value),children:[i.jsx("option",{value:"CONTADO",children:"Contado"}),i.jsx("option",{value:"CREDITO",children:"Crdito"})]})]}),h==="CONTADO"?i.jsxs("div",{children:[i.jsx("label",{className:"block text-sm font-semibold",children:"Nombre del cliente (contado)"}),i.jsx("input",{className:"w-full border p-2 rounded",placeholder:"Ej: Cliente Mostrador",value:b,onChange:oe=>w(oe.target.value)})]}):i.jsxs("div",{className:"md:col-span-2",children:[i.jsx("label",{className:"block text-sm font-semibold",children:"Cliente (crdito)"}),i.jsxs("div",{className:"flex flex-col sm:flex-row gap-2",children:[i.jsxs("select",{className:"w-full sm:flex-1 border p-2 rounded",value:v,onChange:oe=>y(oe.target.value),children:[i.jsx("option",{value:"",children:"Selecciona un cliente"}),ge.map(oe=>i.jsxs("option",{value:oe.status==="ACTIVO"?oe.id:"",disabled:oe.status==="BLOQUEADO",children:[oe.name," | ",oe.phone," | Saldo: ",Gc(oe.balance||0)]},oe.id))]}),i.jsx("button",{type:"button",className:"w-full sm:w-auto px-4 py-2 rounded bg-green-600 text-white hover:bg-green-700",onClick:()=>H(!0),children:"Crear Cliente"})]}),i.jsxs("div",{className:"mt-2 grid grid-cols-1 md:grid-cols-3 gap-3",children:[i.jsxs("div",{className:"p-2 rounded bg-gray-50 border",children:[i.jsx("div",{className:"text-xs text-gray-600",children:"Saldo actual"}),i.jsx("div",{className:"text-lg font-semibold",children:Gc(q)})]}),i.jsxs("div",{children:[i.jsx("label",{className:"block text-sm font-semibold",children:"Pago inicial (opcional)"}),i.jsx("input",{type:"number",step:"0.01",inputMode:"decimal",max:ye,className:"w-full border p-2 rounded",value:O===0?"":O,onChange:oe=>{const Fe=ue(oe.target.value);G(Fe)},placeholder:"0.00"})]}),i.jsxs("div",{className:"p-2 rounded bg-gray-50 border",children:[i.jsx("div",{className:"text-xs text-gray-600",children:"Saldo proyectado"}),i.jsx("div",{className:"text-lg font-semibold",children:Gc(se)})]})]})]}),i.jsxs("div",{children:[i.jsx("label",{className:"block text-sm font-semibold",children:"Fecha de venta"}),i.jsx("input",{type:"date",className:"w-full border p-2 rounded",value:j,onChange:oe=>I(oe.target.value)})]}),i.jsxs("div",{children:[i.jsx("label",{className:"block text-sm font-semibold",children:"Vendedor"}),i.jsxs("select",{className:"w-full border p-2 rounded",value:_,onChange:oe=>{S(oe.target.value),X([])},disabled:E,children:[i.jsx("option",{value:"",children:"Selecciona un vendedor"}),u.map(oe=>i.jsxs("option",{value:oe.id,children:[oe.name,"  ",oe.branchLabel,"  ",oe.commissionPercent.toFixed(2),"%"," comisin"]},oe.id))]}),E&&i.jsx("p",{className:"text-xs text-gray-500 mt-1",children:"Vendedor fijado por el usuario logueado."})]}),i.jsxs("div",{className:"md:col-span-1",children:[i.jsx("label",{className:"block text-sm font-semibold mb-1",children:"Lista de precios / Sucursal"}),i.jsxs("div",{className:"flex flex-wrap gap-4 text-sm",children:[i.jsxs("label",{className:"inline-flex items-center gap-1",children:[i.jsx("input",{type:"radio",className:"accent-blue-600",value:"RIVAS",checked:p==="RIVAS",readOnly:!0,disabled:!0}),i.jsx("span",{children:"Rivas"})]}),i.jsxs("label",{className:"inline-flex items-center gap-1",children:[i.jsx("input",{type:"radio",className:"accent-blue-600",value:"SAN_JORGE",checked:p==="SAN_JORGE",readOnly:!0,disabled:!0}),i.jsx("span",{children:"San Jorge"})]}),i.jsxs("label",{className:"inline-flex items-center gap-1",children:[i.jsx("input",{type:"radio",className:"accent-blue-600",value:"ISLA",checked:p==="ISLA",readOnly:!0,disabled:!0}),i.jsx("span",{children:"Isla de Ometepe"})]})]}),i.jsx("div",{className:"text-xs text-gray-500 mt-1",children:"La sucursal se toma automticamente del vendedor seleccionado."})]}),i.jsxs("div",{className:"md:col-span-2",children:[i.jsx("label",{className:"block text-sm font-semibold",children:"Producto"}),i.jsxs("div",{className:"mt-1 mb-2 flex gap-2",children:[i.jsx("input",{className:"flex-1 border rounded px-2 py-2",placeholder:_?"Buscar producto por nombre o SKU":"Selecciona un vendedor primero",value:nt,onChange:oe=>Ee(oe.target.value),disabled:!_}),i.jsx("button",{type:"button",className:"px-3 py-2 rounded bg-gray-800 text-white",onClick:()=>St(!0),disabled:!_,children:i.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-5 w-5",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",children:[i.jsx("rect",{x:"3",y:"3",width:"6",height:"6",rx:"1"}),i.jsx("rect",{x:"15",y:"3",width:"6",height:"6",rx:"1"}),i.jsx("rect",{x:"3",y:"15",width:"6",height:"6",rx:"1"}),i.jsx("rect",{x:"15",y:"15",width:"6",height:"6",rx:"1"})]})})]}),i.jsxs("select",{className:"w-full border p-2 rounded",value:k,onChange:async oe=>{const Fe=oe.target.value;B(Fe),await lt(Fe)},disabled:!_,children:[i.jsx("option",{value:"",children:_?"Selecciona un producto":"Selecciona un vendedor primero"}),we.map(oe=>{const Fe=D.some(P=>P.productId===oe.id),ce=f[oe.id]||0,Me=Math.max(1,Number(oe.unitsPerPackage||1)),Ke=Math.floor(ce/Me);return Ke<=0?null:i.jsxs("option",{value:Fe?"":oe.id,disabled:Fe,children:[oe.name," ",oe.sku?` ${oe.sku}`:""," (disp: ",Ke," ","paq.)",Fe?" ":""]},oe.id)})]}),i.jsx("div",{className:"text-xs text-gray-500 mt-1",children:"El selector solo muestra productos disponibles del pedido del vendedor seleccionado (sin ceros)."})]}),i.jsxs("div",{className:"md:col-span-2",children:[i.jsx("div",{className:"w-full overflow-x-auto",children:i.jsxs("div",{className:"border rounded overflow-hidden min-w-[860px]",children:[i.jsxs("div",{className:"grid grid-cols-12 bg-gray-50 px-3 py-2 text-xs font-semibold border-b",children:[i.jsx("div",{className:"col-span-4",children:"Producto"}),i.jsx("div",{className:"col-span-2 text-right",children:"Precio (paq.)"}),i.jsx("div",{className:"col-span-2 text-right",children:"Existencias (paq.)"}),i.jsx("div",{className:"col-span-1 text-right",children:"Cantidad (paq.)"}),i.jsx("div",{className:"col-span-1 text-right",children:"Descuento"}),i.jsx("div",{className:"col-span-1 text-right",children:"Monto"}),i.jsx("div",{className:"col-span-1 text-center",children:"Quitar"})]}),D.length===0?i.jsx("div",{className:"px-3 py-4 text-sm text-gray-500",children:"No hay productos agregados."}):D.map(oe=>{const Fe=f[oe.productId]??oe.availableUnits??0,ce=oe.unitsPerPackage?Math.floor(Fe/oe.unitsPerPackage):0,Me=Math.max(0,ce-(oe.qtyPackages||0)),Ke=(Number(oe.pricePerPackage)||0)*(oe.qtyPackages||0),P=Math.max(0,Ke-(Number(oe.discount)||0));return i.jsxs("div",{className:"grid grid-cols-12 items-center px-3 py-2 border-b text-sm gap-x-2",children:[i.jsx("div",{className:"col-span-4",children:i.jsxs("div",{className:"font-medium",children:[oe.productName,oe.sku?`  ${oe.sku}`:""]})}),i.jsx("div",{className:"col-span-2 text-right",children:Gc(oe.pricePerPackage)}),i.jsxs("div",{className:"col-span-2 text-right",children:[Me," paq."]}),i.jsx("div",{className:"col-span-1",children:i.jsx("input",{type:"number",step:"0",min:0,className:"w-full border p-1 rounded text-right",value:Number.isNaN(oe.qtyPackages)||oe.qtyPackages===0?"":oe.qtyPackages,onChange:R=>Ne(oe.productId,R.target.value),inputMode:"numeric",placeholder:"0"})}),i.jsx("div",{className:"col-span-1",children:i.jsx("input",{type:"number",step:"1",min:0,className:"w-full border p-1 rounded text-right",value:Number.isNaN(oe.discount)||oe.discount===0?"":oe.discount,onChange:R=>De(oe.productId,R.target.value),inputMode:"numeric",placeholder:"0"})}),i.jsx("div",{className:"col-span-1 text-right",children:Gc(P)}),i.jsx("div",{className:"col-span-1 text-center",children:i.jsx("button",{type:"button",className:"px-2 py-1 rounded bg-red-100 hover:bg-red-200",onClick:()=>xt(oe.productId),title:"Quitar producto",children:""})})]},oe.productId)})]})}),D.length>0&&i.jsxs("div",{className:"flex flex-col sm:flex-row sm:justify-end gap-2 sm:gap-6 mt-3 text-sm",children:[i.jsxs("div",{children:[i.jsx("span",{className:"text-gray-600",children:"Paquetes totales: "}),i.jsx("span",{className:"font-semibold",children:ae})]}),i.jsxs("div",{children:[i.jsx("span",{className:"text-gray-600",children:"Total: "}),i.jsx("span",{className:"font-semibold",children:Gc(ke)})]}),i.jsxs("div",{children:[i.jsx("span",{className:"text-gray-600",children:"Comisin vendedor: "}),i.jsxs("span",{className:"font-semibold",children:[Gc(ht)," ",ct?`(${ct.toFixed(2)}%)`:""]})]})]})]}),i.jsx("div",{className:"md:col-span-2",children:i.jsx("button",{type:"submit",className:"w-full sm:w-auto bg-blue-600 text-white px-4 py-2 rounded hover:bg-blue-700 disabled:opacity-60",disabled:Y,children:Y?"Guardando...":"Registrar venta"})})]}),i.jsxs("div",{className:"md:hidden space-y-3",children:[i.jsxs("div",{className:"bg-white rounded-xl border shadow",children:[i.jsxs("button",{type:"button",onClick:()=>pe(oe=>!oe),className:"w-full flex justify-between items-center p-3 font-semibold",children:["Datos de venta",i.jsx("span",{className:"text-lg",children:me?"":"+"})]}),me&&i.jsxs("div",{className:"p-3 space-y-3",children:[i.jsxs("div",{children:[i.jsx("label",{className:"block text-sm font-semibold",children:"Fecha de venta"}),i.jsx("input",{type:"date",className:"w-full border p-2 rounded",value:j,onChange:oe=>I(oe.target.value)})]}),i.jsxs("div",{children:[i.jsx("label",{className:"block text-sm font-semibold",children:"Tipo de cliente"}),i.jsxs("select",{className:"w-full border p-2 rounded",value:h,onChange:oe=>m(oe.target.value),children:[i.jsx("option",{value:"CONTADO",children:"Contado"}),i.jsx("option",{value:"CREDITO",children:"Crdito"})]})]}),h==="CONTADO"?i.jsxs("div",{children:[i.jsx("label",{className:"block text-sm font-semibold",children:"Cliente (Cash)"}),i.jsx("input",{className:"w-full border p-2 rounded",placeholder:"Ej: Mario Bergoglio",value:b,onChange:oe=>w(oe.target.value)})]}):i.jsxs("div",{children:[i.jsx("label",{className:"block text-sm font-semibold",children:"Cliente (crdito)"}),i.jsxs("div",{className:"flex flex-col gap-2",children:[i.jsxs("select",{className:"w-full border p-2 rounded",value:v,onChange:oe=>y(oe.target.value),children:[i.jsx("option",{value:"",children:"Selecciona un cliente"}),ge.map(oe=>i.jsxs("option",{value:oe.status==="ACTIVO"?oe.id:"",disabled:oe.status==="BLOQUEADO",children:[oe.name," | Saldo: ",Gc(oe.balance||0)]},oe.id))]}),i.jsx("button",{type:"button",className:"w-full px-4 py-2 rounded bg-green-600 text-white hover:bg-green-700",onClick:()=>H(!0),children:"Crear Cliente"})]}),i.jsxs("div",{className:"mt-2 grid grid-cols-2 gap-2",children:[i.jsxs("div",{className:"p-2 rounded bg-gray-50 border",children:[i.jsx("div",{className:"text-xs text-gray-600",children:"Saldo actual"}),i.jsx("div",{className:"text-base font-semibold",children:Gc(q)})]}),i.jsxs("div",{className:"p-2 rounded bg-gray-50 border",children:[i.jsx("div",{className:"text-xs text-gray-600",children:"Saldo proyectado"}),i.jsx("div",{className:"text-base font-semibold",children:Gc(se)})]})]}),i.jsxs("div",{className:"mt-2",children:[i.jsx("label",{className:"block text-sm font-semibold",children:"Pago inicial (opcional)"}),i.jsx("input",{type:"number",step:"0.01",inputMode:"decimal",max:ye,className:"w-full border p-2 rounded",value:O===0?"":O,onChange:oe=>{const Fe=ue(oe.target.value);G(Fe)},placeholder:"0.00"})]})]}),i.jsxs("div",{children:[i.jsx("label",{className:"block text-sm font-semibold",children:"Vendedor"}),i.jsxs("select",{className:"w-full border p-2 rounded",value:_,onChange:oe=>{S(oe.target.value),X([])},disabled:E,children:[i.jsx("option",{value:"",children:"Selecciona un vendedor"}),u.map(oe=>i.jsxs("option",{value:oe.id,children:[oe.name,"  "," ",oe.commissionPercent.toFixed(2),"%"]},oe.id))]}),E&&i.jsx("p",{className:"text-xs text-gray-500 mt-1",children:"Vendedor Logueado en esta app."})]})]})]}),i.jsxs("div",{className:"bg-white rounded-xl border shadow",children:[i.jsxs("button",{type:"button",onClick:()=>ve(oe=>!oe),className:"w-full flex justify-between items-center p-3 font-semibold",children:["Agrega Productos",i.jsx("span",{className:"text-lg",children:he?"":"+"})]}),he&&i.jsxs("div",{className:"p-3 space-y-3",children:[i.jsxs("div",{children:[i.jsx("label",{className:"block text-sm font-semibold",children:"Productos"}),i.jsxs("div",{className:"mt-1 mb-2 flex gap-2",children:[i.jsx("input",{className:"flex-1 border rounded px-2 py-2",placeholder:_?"Buscar producto por nombre o SKU":"Selecciona un vendedor primero",value:nt,onChange:oe=>Ee(oe.target.value),disabled:!_}),i.jsx("button",{type:"button",className:"px-3 py-2 rounded bg-gray-800 text-white",onClick:()=>St(!0),disabled:!_,children:i.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-5 w-5",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",children:[i.jsx("rect",{x:"3",y:"3",width:"6",height:"6",rx:"1"}),i.jsx("rect",{x:"15",y:"3",width:"6",height:"6",rx:"1"}),i.jsx("rect",{x:"3",y:"15",width:"6",height:"6",rx:"1"}),i.jsx("rect",{x:"15",y:"15",width:"6",height:"6",rx:"1"})]})})]}),i.jsxs("select",{className:"w-full border p-2 rounded",value:k,onChange:async oe=>{const Fe=oe.target.value;B(Fe),await lt(Fe)},disabled:!_,children:[i.jsx("option",{value:"",children:_?"Selecciona un producto":"Selecciona un vendedor primero"}),we.map(oe=>{const Fe=D.some(P=>P.productId===oe.id),ce=f[oe.id]||0,Me=Math.max(1,Number(oe.unitsPerPackage||1)),Ke=Math.floor(ce/Me);return Ke<=0?null:i.jsxs("option",{value:Fe?"":oe.id,disabled:Fe,children:[oe.name," ",oe.sku?` ${oe.sku}`:""," (disp:"," ",Ke," paq.)",Fe?" ":""]},oe.id)})]})]}),D.length===0?i.jsx("div",{className:"text-sm text-gray-500",children:"No hay productos agregados."}):i.jsx("div",{className:"space-y-2",children:D.map(oe=>{const Fe=f[oe.productId]??oe.availableUnits??0,ce=oe.unitsPerPackage?Math.floor(Fe/oe.unitsPerPackage):0,Me=Math.max(0,ce-(oe.qtyPackages||0)),Ke=(Number(oe.pricePerPackage)||0)*(oe.qtyPackages||0),P=Math.max(0,Ke-(Number(oe.discount)||0));return i.jsxs("div",{className:"border rounded-xl p-3 bg-gray-50 space-y-2",children:[i.jsxs("div",{className:"font-semibold leading-tight",children:[oe.productName,oe.sku?`  ${oe.sku}`:""]}),i.jsxs("div",{className:"grid grid-cols-2 gap-2 text-sm",children:[i.jsxs("div",{className:"p-2 rounded border bg-white",children:[i.jsx("div",{className:"text-xs text-gray-600",children:"Precio x Paquete"}),i.jsx("div",{className:"font-bold",children:Gc(oe.pricePerPackage)})]}),i.jsxs("div",{className:"p-2 rounded border bg-white",children:[i.jsx("div",{className:"text-xs text-gray-600",children:"Existencias"}),i.jsxs("div",{className:"font-bold",children:[Me," paq."]})]})]}),i.jsxs("div",{className:"grid grid-cols-2 gap-2",children:[i.jsxs("div",{children:[i.jsx("label",{className:"block text-xs text-gray-600",children:"Cantidad Paquetes"}),i.jsx("input",{type:"number",step:"0",min:0,className:"w-full border p-2 rounded text-right",value:Number.isNaN(oe.qtyPackages)||oe.qtyPackages===0?"":oe.qtyPackages,onChange:R=>Ne(oe.productId,R.target.value),inputMode:"numeric",placeholder:"0"})]}),i.jsxs("div",{children:[i.jsx("label",{className:"block text-xs text-gray-600",children:"Descuento"}),i.jsx("input",{type:"number",step:"1",min:0,className:"w-full border p-2 rounded text-right",value:Number.isNaN(oe.discount)||oe.discount===0?"":oe.discount,onChange:R=>De(oe.productId,R.target.value),inputMode:"numeric",placeholder:"0"})]})]}),i.jsxs("div",{className:"flex items-center justify-between",children:[i.jsxs("div",{className:"font-regular text-gray-600",children:["Total ",Gc(P)]}),i.jsxs("div",{className:"font-regular text-gray-600",children:["Comision ",Gc(oe.margenVendedor||0)]}),i.jsx("button",{type:"button",className:"px-3 py-2 rounded-lg bg-red-100 hover:bg-red-200",onClick:()=>xt(oe.productId),children:"Quitar"})]})]},oe.productId)})}),D.length>0&&i.jsxs("div",{className:"mt-2 grid grid-cols-2 gap-2 text-sm",children:[i.jsxs("div",{className:"p-2 rounded bg-gray-50 border",children:[i.jsx("div",{className:"text-xs text-gray-600",children:"Paquetes"}),i.jsx("div",{className:"font-semibold",children:ae})]}),i.jsxs("div",{className:"p-2 rounded bg-gray-50 border",children:[i.jsx("div",{className:"text-xs text-gray-600",children:"Total"}),i.jsx("div",{className:"font-semibold",children:Gc(ke)})]})]})]})]}),i.jsx("button",{type:"submit",className:"w-full bg-blue-600 text-white px-4 py-3 rounded-xl hover:bg-blue-700 disabled:opacity-60",disabled:Y,children:Y?"Guardando...":"Registrar venta"})]})]}),z&&i.jsx("p",{className:"mt-2 text-sm",children:z}),M&&i.jsx("div",{className:"fixed inset-0 bg-black/40 flex items-center justify-center z-50 p-2 sm:p-4",children:i.jsxs("div",{className:"bg-white rounded-lg shadow-xl border w-[98%] sm:w-[95%] max-w-xl p-3 sm:p-4 max-h-[92vh] overflow-auto",children:[i.jsx("h3",{className:"text-lg font-bold mb-3",children:"Nuevo cliente"}),i.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-3",children:[i.jsxs("div",{children:[i.jsx("label",{className:"block text-sm font-semibold",children:"Nombre"}),i.jsx("input",{className:"w-full border p-2 rounded",value:te,onChange:oe=>Ce(oe.target.value)})]}),i.jsxs("div",{children:[i.jsx("label",{className:"block text-sm font-semibold",children:"Telfono"}),i.jsx("input",{className:"w-full border p-2 rounded",value:V,onChange:oe=>We(oG(oe.target.value)),placeholder:"+505 88888888",inputMode:"numeric"})]}),i.jsxs("div",{children:[i.jsx("label",{className:"block text-sm font-semibold",children:"Lugar"}),i.jsxs("select",{className:"w-full border p-2 rounded",value:ie,onChange:oe=>J(oe.target.value),children:[i.jsx("option",{value:"",children:""}),EQe.map(oe=>i.jsx("option",{value:oe,children:oe},oe))]})]}),!E&&i.jsxs("div",{children:[i.jsx("label",{className:"block text-sm font-semibold",children:"Vendedor"}),i.jsxs("select",{className:"w-full border p-2 rounded",value:yt,onChange:oe=>bt(oe.target.value),children:[i.jsx("option",{value:"",children:"Selecciona un vendedor"}),u.filter(oe=>(oe.status??"ACTIVO")==="ACTIVO").map(oe=>i.jsxs("option",{value:oe.id,children:[oe.name,"  ",oe.branchLabel]},oe.id))]})]}),i.jsxs("div",{className:"md:col-span-2",children:[i.jsx("label",{className:"block text-sm font-semibold",children:"Comentario"}),i.jsx("textarea",{className:"w-full border p-2 rounded resize-y min-h-20",value:Oe,onChange:oe=>fe(oe.target.value),maxLength:500})]})]}),i.jsxs("div",{className:"mt-4 flex flex-col sm:flex-row justify-end gap-2",children:[i.jsx("button",{className:"w-full sm:w-auto px-3 py-2 rounded bg-gray-200 hover:bg-gray-300",onClick:()=>{Nt(),H(!1)},children:"Cancelar"}),i.jsx("button",{className:"w-full sm:w-auto px-3 py-2 rounded bg-green-600 text-white hover:bg-green-700",onClick:async()=>{var ce;const oe=E?_||r:yt;if(!oe){U("Selecciona el vendedor para asociar este cliente.");return}if(U(""),!te.trim()){U("Ingresa el nombre del nuevo cliente.");return}const Fe=oG(V);try{const Me=await Jn(mt(Se,"customers_candies"),{name:te.trim(),phone:Fe,place:ie||"",notes:Oe||"",status:_e,creditLimit:Number(Ye||0),createdAt:Ar.now(),sellerId:oe,vendorId:oe,vendorName:((ce=u.find(P=>P.id===oe))==null?void 0:ce.name)||""}),Ke={id:Me.id,name:te.trim(),phone:Fe,place:ie||"",status:_e,creditLimit:Number(Ye||0),balance:0,sellerId:oe};o(P=>[Ke,...P]),y(Me.id),Nt(),H(!1),U(" Cliente creado")}catch(Me){console.error(Me),U(" Error al crear cliente")}},children:"Guardar cliente"})]})]})}),i.jsx(Te,{open:jt,onClose:()=>St(!1),onDetected:Ve}),Y&&i.jsx("div",{className:"fixed inset-0 z-[70] bg-black/40 flex items-center justify-center p-2",children:i.jsxs("div",{className:"bg-white rounded-lg shadow-xl border px-4 py-3 flex items-center gap-3",children:[i.jsxs("svg",{className:"h-5 w-5 animate-spin",viewBox:"0 0 24 24",fill:"none",children:[i.jsx("circle",{className:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor",strokeWidth:"4"}),i.jsx("path",{className:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8v4a4 4 0 00-4 4H4z"})]}),i.jsx("span",{className:"font-medium",children:"Guardando venta"})]})})]})}const lG=["Energia","Bolsas","Detergentes","Limpieza de Freezer","Delivery","Pago a Personal"],d_=t=>`C$ ${(Number(t)||0).toFixed(2)}`;function TQe(){const[t,e]=g.useState(Rr(Ud(new Date),"yyyy-MM-dd")),[r,n]=g.useState(Rr(Ld(new Date),"yyyy-MM-dd")),[a,s]=g.useState(Rr(new Date,"yyyy-MM-dd")),[o,l]=g.useState(""),[c,u]=g.useState(""),[d,f]=g.useState(0),[A,h]=g.useState("PENDIENTE"),[m,p]=g.useState(""),[x,v]=g.useState([]),[y,b]=g.useState(!0),[w,j]=g.useState(""),[I,_]=g.useState(null),[S,E]=g.useState(""),[T,k]=g.useState(""),[B,D]=g.useState(""),[X,me]=g.useState(0),[pe,he]=g.useState("PENDIENTE"),[ve,ae]=g.useState("");g.useEffect(()=>{(async()=>{b(!0);try{const M=Yt(mt(Se,"expenses_candies"),In("date","desc")),H=await kt(M),te=[];H.forEach(Ce=>{const V=Ce.data();te.push({id:Ce.id,date:V.date||Rr(new Date,"yyyy-MM-dd"),category:V.category||"",description:V.description||"",amount:Number(V.amount||0),status:V.status||"PENDIENTE",notes:V.notes||"",createdAt:V.createdAt??Ar.now()})}),v(te)}catch(M){console.error(M),j(" Error al cargar gastos")}finally{b(!1)}})()},[]);const Pe=g.useMemo(()=>x.filter(M=>!(t&&M.date<t||r&&M.date>r)),[x,t,r]),ke=g.useMemo(()=>{const M=Pe.reduce((Ce,V)=>Ce+(V.amount||0),0),H=Pe.filter(Ce=>Ce.status==="PAGADO").reduce((Ce,V)=>Ce+(V.amount||0),0),te=M-H;return{total:M,pagado:H,pendiente:te}},[Pe]),O=()=>{s(Rr(new Date,"yyyy-MM-dd")),l(""),u(""),f(0),h("PENDIENTE"),p("")},G=async M=>{if(M.preventDefault(),j(""),!o){j("Selecciona una categora.");return}if(!c.trim()){j("Ingresa una descripcin.");return}if(!d||d<=0){j("Ingresa un monto vlido.");return}try{const H=await Jn(mt(Se,"expenses_candies"),{date:a,category:o,description:c.trim(),amount:Number(d.toFixed(2)),status:A,notes:m||"",createdAt:Ar.now()});v(te=>[{id:H.id,date:a,category:o,description:c.trim(),amount:Number(d.toFixed(2)),status:A,notes:m||"",createdAt:Ar.now()},...te]),O(),j(" Gasto registrado")}catch(H){console.error(H),j(" Error al guardar gasto")}},z=M=>{_(M.id),E(M.date),k(M.category||""),D(M.description||""),me(Number(M.amount||0)),he(M.status||"PENDIENTE"),ae(M.notes||"")},U=()=>{_(null),E(""),k(""),D(""),me(0),he("PENDIENTE"),ae("")},Y=async()=>{if(I){if(!T){j("Selecciona una categora.");return}if(!B.trim()){j("Ingresa una descripcin.");return}if(!X||X<=0){j("Ingresa un monto vlido.");return}try{await kn(Gt(Se,"expenses_candies",I),{date:S,category:T,description:B.trim(),amount:Number(X.toFixed(2)),status:pe,notes:ve||""}),v(M=>M.map(H=>H.id===I?{...H,date:S,category:T,description:B.trim(),amount:Number(X.toFixed(2)),status:pe,notes:ve||""}:H)),U(),j(" Gasto actualizado")}catch(M){console.error(M),j(" Error al actualizar gasto")}}},ee=async M=>{confirm(`Eliminar el gasto "${M.description}"?`)&&(await Kn(Gt(Se,"expenses_candies",M.id)),v(te=>te.filter(Ce=>Ce.id!==M.id)),j(" Gasto borrado"))};return i.jsxs("div",{className:"max-w-6xl mx-auto",children:[i.jsx("h2",{className:"text-2xl font-bold mb-3",children:"Gastos (Dulces)"}),i.jsxs("div",{className:"bg-white p-3 rounded shadow border mb-4 flex flex-wrap items-end gap-3 text-sm",children:[i.jsxs("div",{className:"flex flex-col",children:[i.jsx("label",{className:"font-semibold",children:"Desde"}),i.jsx("input",{type:"date",className:"border rounded px-2 py-1",value:t,onChange:M=>e(M.target.value)})]}),i.jsxs("div",{className:"flex flex-col",children:[i.jsx("label",{className:"font-semibold",children:"Hasta"}),i.jsx("input",{type:"date",className:"border rounded px-2 py-1",value:r,onChange:M=>n(M.target.value)})]}),i.jsxs("div",{className:"ml-auto text-sm",children:[i.jsx("div",{className:"font-semibold",children:"Totales del rango"}),i.jsxs("div",{children:["Total: ",d_(ke.total)]}),i.jsxs("div",{children:["Pagado: ",d_(ke.pagado)]}),i.jsxs("div",{children:["Pendiente: ",d_(ke.pendiente)]})]})]}),i.jsxs("form",{onSubmit:G,className:"bg-white p-4 rounded shadow border mb-6 grid grid-cols-1 md:grid-cols-2 gap-4",children:[i.jsxs("div",{children:[i.jsx("label",{className:"block text-sm font-semibold",children:"Fecha"}),i.jsx("input",{type:"date",className:"w-full border p-2 rounded",value:a,onChange:M=>s(M.target.value)})]}),i.jsxs("div",{children:[i.jsx("label",{className:"block text-sm font-semibold",children:"Categora"}),i.jsxs("select",{className:"w-full border p-2 rounded",value:o,onChange:M=>l(M.target.value),children:[i.jsx("option",{value:"",children:"Selecciona"}),lG.map(M=>i.jsx("option",{value:M,children:M},M))]})]}),i.jsxs("div",{className:"md:col-span-2",children:[i.jsx("label",{className:"block text-sm font-semibold",children:"Descripcin"}),i.jsx("input",{className:"w-full border p-2 rounded",placeholder:"Detalle del gasto",value:c,onChange:M=>u(M.target.value)})]}),i.jsxs("div",{children:[i.jsx("label",{className:"block text-sm font-semibold",children:"Monto"}),i.jsx("input",{type:"number",step:"0.01",inputMode:"decimal",className:"w-full border p-2 rounded text-right",value:d===0?"":d,onChange:M=>f(Math.max(0,Number(M.target.value||0))),placeholder:"0.00"})]}),i.jsxs("div",{children:[i.jsx("label",{className:"block text-sm font-semibold",children:"Estado"}),i.jsxs("select",{className:"w-full border p-2 rounded",value:A,onChange:M=>h(M.target.value),children:[i.jsx("option",{value:"PENDIENTE",children:"Pendiente"}),i.jsx("option",{value:"PAGADO",children:"Pagado"})]})]}),i.jsxs("div",{className:"md:col-span-2",children:[i.jsx("label",{className:"block text-sm font-semibold",children:"Comentario"}),i.jsx("textarea",{className:"w-full border p-2 rounded resize-y min-h-24",value:m,onChange:M=>p(M.target.value),maxLength:500,placeholder:"Comentario / nota opcional"}),i.jsxs("div",{className:"text-xs text-gray-500 text-right",children:[m.length,"/500"]})]}),i.jsx("div",{className:"md:col-span-2",children:i.jsx("button",{className:"bg-blue-600 text-white px-4 py-2 rounded hover:bg-blue-700",children:"Guardar gasto"})})]}),i.jsx("div",{className:"bg-white p-2 rounded shadow border w-full",children:i.jsxs("table",{className:"min-w-full w-full text-sm",children:[i.jsx("thead",{className:"bg-gray-100",children:i.jsxs("tr",{children:[i.jsx("th",{className:"p-2 border",children:"Fecha"}),i.jsx("th",{className:"p-2 border",children:"Categora"}),i.jsx("th",{className:"p-2 border",children:"Descripcin"}),i.jsx("th",{className:"p-2 border",children:"Monto"}),i.jsx("th",{className:"p-2 border",children:"Estado"}),i.jsx("th",{className:"p-2 border",children:"Comentario"}),i.jsx("th",{className:"p-2 border",children:"Acciones"})]})}),i.jsx("tbody",{children:y?i.jsx("tr",{children:i.jsx("td",{className:"p-4 text-center",colSpan:7,children:"Cargando"})}):Pe.length===0?i.jsx("tr",{children:i.jsx("td",{className:"p-4 text-center",colSpan:7,children:"Sin gastos en el rango seleccionado."})}):Pe.slice().sort((M,H)=>M.date.localeCompare(H.date)).map(M=>{const H=I===M.id;return i.jsxs("tr",{className:"text-center",children:[i.jsx("td",{className:"p-2 border",children:H?i.jsx("input",{type:"date",className:"w-full border p-1 rounded",value:S,onChange:te=>E(te.target.value)}):M.date}),i.jsx("td",{className:"p-2 border",children:H?i.jsxs("select",{className:"w-full border p-1 rounded",value:T,onChange:te=>k(te.target.value),children:[i.jsx("option",{value:"",children:"Selecciona"}),lG.map(te=>i.jsx("option",{value:te,children:te},te))]}):M.category||""}),i.jsx("td",{className:"p-2 border",children:H?i.jsx("input",{className:"w-full border p-1 rounded",value:B,onChange:te=>D(te.target.value)}):i.jsx("span",{title:M.description,children:M.description.length>40?M.description.slice(0,40)+"":M.description})}),i.jsx("td",{className:"p-2 border",children:H?i.jsx("input",{type:"number",step:"0.01",inputMode:"decimal",className:"w-full border p-1 rounded text-right",value:Number.isNaN(X)?"":X,onChange:te=>me(Math.max(0,Number(te.target.value||0)))}):d_(M.amount)}),i.jsx("td",{className:"p-2 border",children:H?i.jsxs("select",{className:"w-full border p-1 rounded",value:pe,onChange:te=>he(te.target.value),children:[i.jsx("option",{value:"PENDIENTE",children:"Pendiente"}),i.jsx("option",{value:"PAGADO",children:"Pagado"})]}):i.jsx("span",{className:`px-2 py-0.5 rounded text-xs ${M.status==="PAGADO"?"bg-green-100 text-green-700":"bg-yellow-100 text-yellow-700"}`,children:M.status})}),i.jsx("td",{className:"p-2 border",children:H?i.jsx("textarea",{className:"w-full border p-1 rounded resize-y min-h-10",value:ve,onChange:te=>ae(te.target.value),maxLength:500}):i.jsx("span",{title:M.notes||"",children:(M.notes||"").length>40?(M.notes||"").slice(0,40)+"":M.notes||""})}),i.jsx("td",{className:"p-2 border",children:i.jsx("div",{className:"flex gap-2 justify-center",children:H?i.jsxs(i.Fragment,{children:[i.jsx("button",{className:"px-2 py-1 rounded text-white bg-blue-600 hover:bg-blue-700",onClick:Y,children:"Guardar"}),i.jsx("button",{className:"px-2 py-1 rounded bg-gray-200 hover:bg-gray-300",onClick:U,children:"Cancelar"})]}):i.jsxs(i.Fragment,{children:[i.jsx("button",{className:"px-2 py-1 rounded text-white bg-yellow-600 hover:bg-yellow-700",onClick:()=>z(M),children:"Editar"}),i.jsx("button",{className:"px-2 py-1 rounded text-white bg-red-600 hover:bg-red-700",onClick:()=>ee(M),children:"Borrar"})]})})})]},M.id)})})]})}),w&&i.jsx("p",{className:"mt-2 text-sm",children:w})]})}const Kc=t=>`C$ ${(Number(t)||0).toFixed(2)}`;function kQe(t){var e;return t!=null&&t.date?t.date:(e=t==null?void 0:t.createdAt)!=null&&e.toDate?Rr(t.createdAt.toDate(),"yyyy-MM-dd"):""}function FQe(t,e){var s,o,l;const r=kQe(t);if(!r)return null;let n=0,a=0;return Array.isArray(t.items)&&t.items.length>0?(n=t.items.reduce((c,u)=>c+(Number(u.packages??u.qty??u.quantity??0)||0),0),a=Number(t.total??t.itemsTotal??0)||0):(n=Number(t.packagesTotal??t.quantity??((s=t.item)==null?void 0:s.packages)??((o=t.item)==null?void 0:o.qty)??0)||0,a=Number(t.total??((l=t.item)==null?void 0:l.total)??0)||0),{id:e,date:r,type:t.type||"CONTADO",total:a,quantity:n,customerId:t.customerId||void 0,customerName:t.customerName||void 0,downPayment:Number(t.downPayment||0),vendorId:t.vendorId||void 0,vendorName:t.vendorName||t.vendor||void 0,vendorCommissionPercent:Number(t.vendorCommissionPercent||0)||0,vendorCommissionAmount:Number(t.vendorCommissionAmount||0)||0}}async function OQe(t){const e=(t||"").trim();if(!e)return;const r=Yt(mt(Se,"ar_movements"),cr("ref.saleId","==",e)),n=await kt(r);await Promise.all(n.docs.map(a=>Kn(Gt(Se,"ar_movements",a.id))))}function DQe({role:t="",sellerCandyId:e="",roles:r}){const n=r&&r.length?r:t,a=En(n,"vendedor_dulces"),s=En(n,"admin"),o=s?8:7,[l,c]=g.useState(!1),[u,d]=g.useState(!1),[f,A]=g.useState(null),[h,m]=g.useState([]),p=async _e=>{c(!0),d(!0),A(_e),m([]);try{const Ue=await zs(Gt(Se,"sales_candies",_e)),Ye=Ue.exists()?Ue.data():null;if(!Ye){m([]);return}const yt=(Array.isArray(Ye==null?void 0:Ye.items)?Ye.items:Ye!=null&&Ye.item?[Ye.item]:[]).map(bt=>({productName:String(bt.productName||""),qty:Number(bt.packages??bt.qty??bt.quantity??0),unitPrice:Number(bt.unitPricePackage??bt.unitPrice??0),discount:Number(bt.discount||0),total:Number(bt.total??bt.lineFinal??0)}));m(yt)}catch(Ue){console.error(Ue)}finally{d(!1)}},[x,v]=g.useState(Rr(new Date,"yyyy-MM-01")),[y,b]=g.useState(Rr(new Date,"yyyy-MM-dd")),[w,j]=g.useState([]),[I,_]=g.useState([]),[S,E]=g.useState([]),[T,k]=g.useState(!0),[B,D]=g.useState(""),[X,me]=g.useState(""),[pe,he]=g.useState(""),[ve,ae]=g.useState(null),Pe=15,[ke,O]=g.useState(1),G=g.useMemo(()=>{const _e={};return w.forEach(Ue=>_e[Ue.id]=Ue.name),_e},[w]),z=g.useMemo(()=>{const _e={};return S.forEach(Ue=>{_e[Ue.id]=Ue}),_e},[S]),U=_e=>{const Ue=Number(_e.vendorCommissionAmount||0);if(Ue>0)return Ue;if(!_e.vendorId)return 0;const Ye=z[_e.vendorId];if(!Ye||!Ye.commissionPercent)return 0;const At=(Number(_e.total)||0)*(Number(Ye.commissionPercent)||0)/100;return Number(At.toFixed(2))};g.useEffect(()=>{(async()=>{k(!0),D("");try{const _e=await kt(mt(Se,"customers_candies")),Ue=[];_e.forEach(Nt=>Ue.push({id:Nt.id,name:Nt.data().name||""})),j(Ue);const Ye=await kt(mt(Se,"sellers_candies")),At=[];Ye.forEach(Nt=>{const jt=Nt.data();At.push({id:Nt.id,name:jt.name||"",commissionPercent:Number(jt.commissionPercent||0)})}),E(At);const yt=await kt(Yt(mt(Se,"sales_candies"),In("createdAt","desc"))),bt=[];yt.forEach(Nt=>{const jt=FQe(Nt.data(),Nt.id);jt&&jt.date>=x&&jt.date<=y&&bt.push(jt)}),_(bt.sort((Nt,jt)=>jt.date.localeCompare(Nt.date))),O(1)}catch(_e){console.error(_e),D(" Error cargando transacciones.")}finally{k(!1)}})()},[x,y]);const Y=g.useMemo(()=>I.filter(_e=>!(a&&(!e||!_e.vendorId||_e.vendorId!==e)||X&&_e.customerId!==X||pe&&_e.type!==pe)),[I,X,pe,a,e]),ee=g.useMemo(()=>{let _e=0,Ue=0,Ye=0,At=0;for(const yt of Y)yt.type==="CONTADO"?(_e+=yt.quantity,Ye+=yt.total):(Ue+=yt.quantity,At+=yt.total);return{packsCash:_e,packsCredito:Ue,montoCash:Ye,montoCredito:At}},[Y]),M=Math.max(1,Math.ceil(Y.length/Pe)),H=g.useMemo(()=>{const _e=(ke-1)*Pe;return Y.slice(_e,_e+Pe)},[Y,ke]),te=g.useMemo(()=>f&&I.find(_e=>_e.id===f)||null,[f,I]),Ce=async _e=>{if(s&&(ae(null),!!window.confirm("Eliminar esta venta de dulces? Se restaurar el inventario asociado.")))try{k(!0);const Ue=_e.id.split("#")[0];await G2(Ue),await OQe(Ue),_(Ye=>Ye.filter(At=>At.id!==_e.id)),D(" Venta eliminada y saldo del cliente ajustado")}catch(Ue){console.error(Ue),D(" No se pudo eliminar la venta.")}finally{k(!1)}},V=()=>{const _e=`Ventas del dia  ${x} a ${y}`,Ue=bt=>(bt||"").replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;"),Ye=Y.map(bt=>{const Nt=bt.customerName||(bt.customerId?G[bt.customerId]:"")||"Nombre cliente";return`<tr>
          <td>${bt.date}</td>
          <td>${Ue(Nt)}</td>
          <td>${bt.type==="CREDITO"?"Crdito":"Cash"}</td>
          <td style="text-align:right">${bt.quantity}</td>
          <td style="text-align:right">${Kc(bt.total)}</td>
        </tr>`}).join(""),At=`<!doctype html><html><head><meta charset="utf-8" />
    <title>${Ue(_e)}</title>
    <style>
      *{font-family:Arial, sans-serif} h1{margin:0 0 8px}
      .muted{color:#555;font-size:12px;margin-bottom:12px}
      .kpis{display:grid;grid-template-columns:repeat(2,max-content);gap:8px 28px;margin:10px 0 14px}
      table{width:100%;border-collapse:collapse;font-size:12px}
      th,td{border:1px solid #ddd;padding:6px}
      th{background:#f5f5f5;text-align:left}
      @media print{@page{size:A4;margin:12mm}}
    </style></head><body>
      <h1>${Ue(_e)}</h1>
      <div class="kpis">
        <div><b>Paquetes Cash:</b> ${ee.packsCash}</div>
        <div><b>Paquetes Crdito:</b> ${ee.packsCredito}</div>
        <div><b>Monto Cash:</b> ${Kc(ee.montoCash)}</div>
        <div><b>Monto Crdito:</b> ${Kc(ee.montoCredito)}</div>
      </div>
      <table><thead><tr>
        <th>Fecha</th><th>Cliente</th><th>Tipo</th><th>Paquetes</th><th>Monto</th>
      </tr></thead><tbody>
      ${Ye||'<tr><td colspan="5" style="text-align:center">Sin transacciones</td></tr>'}
      </tbody></table>
      <script>window.print()<\/script>
    </body></html>`,yt=window.open("","_blank");yt&&(yt.document.open(),yt.document.write(At),yt.document.close())},We=()=>O(1),ie=()=>O(_e=>Math.max(1,_e-1)),J=()=>O(_e=>Math.min(M,_e+1)),Oe=()=>O(M),fe=()=>{const _e=[];if(M<=7)for(let Ye=1;Ye<=M;Ye++)_e.push(Ye);else{const Ye=Math.max(1,ke-2),At=Math.min(M,ke+2);_e.push(1),Ye>2&&_e.push(-1);for(let yt=Ye;yt<=At;yt++)yt!==1&&yt!==M&&_e.push(yt);At<M-1&&_e.push(-2),_e.push(M)}return i.jsxs("div",{className:"flex flex-col sm:flex-row sm:items-center gap-2 justify-between mt-3",children:[i.jsxs("div",{className:"flex items-center gap-1 flex-wrap",children:[i.jsx("button",{className:"px-2 py-1 border rounded disabled:opacity-50",onClick:We,disabled:ke===1,children:" Primero"}),i.jsx("button",{className:"px-2 py-1 border rounded disabled:opacity-50",onClick:ie,disabled:ke===1,children:" Anterior"}),_e.map((Ye,At)=>typeof Ye=="number"?i.jsx("button",{className:`px-3 py-1 border rounded ${Ye===ke?"bg-blue-600 text-white":""}`,onClick:()=>O(Ye),children:Ye},At):i.jsx("span",{className:"px-2",children:""},At)),i.jsx("button",{className:"px-2 py-1 border rounded disabled:opacity-50",onClick:J,disabled:ke===M,children:"Siguiente "}),i.jsx("button",{className:"px-2 py-1 border rounded disabled:opacity-50",onClick:Oe,disabled:ke===M,children:"ltimo "})]}),i.jsxs("div",{className:"text-sm text-gray-600",children:["Pgina ",ke," de ",M,"  ",Y.length," transaccin(es)"]})]})};return i.jsxs("div",{className:"max-w-6xl mx-auto",children:[i.jsx("h2",{className:"text-2xl font-bold mb-3",children:"Ventas del dia"}),i.jsxs("div",{className:"bg-white p-3 rounded shadow border mb-4 grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-5 gap-3 items-end text-sm",children:[i.jsxs("div",{children:[i.jsx("label",{className:"block font-semibold",children:"Desde"}),i.jsx("input",{type:"date",className:"border rounded px-2 py-1 w-full",value:x,onChange:_e=>{v(_e.target.value),O(1)}})]}),i.jsxs("div",{children:[i.jsx("label",{className:"block font-semibold",children:"Hasta"}),i.jsx("input",{type:"date",className:"border rounded px-2 py-1 w-full",value:y,onChange:_e=>{b(_e.target.value),O(1)}})]}),i.jsxs("div",{className:"sm:col-span-2 lg:col-span-2",children:[i.jsx("label",{className:"block font-semibold",children:"Cliente (crdito)"}),i.jsxs("select",{className:"border rounded px-2 py-1 w-full",value:X,onChange:_e=>{me(_e.target.value),O(1)},children:[i.jsx("option",{value:"",children:"Todos"}),w.map(_e=>i.jsx("option",{value:_e.id,children:_e.name},_e.id))]})]}),i.jsxs("div",{children:[i.jsx("label",{className:"block font-semibold",children:"Tipo"}),i.jsxs("select",{className:"border rounded px-2 py-1 w-full",value:pe,onChange:_e=>{he(_e.target.value),O(1)},children:[i.jsx("option",{value:"",children:"Todos"}),i.jsx("option",{value:"CONTADO",children:"Cash"}),i.jsx("option",{value:"CREDITO",children:"Crdito"})]})]}),i.jsx("button",{className:"sm:col-span-2 lg:col-span-1 px-3 py-2 rounded bg-blue-600 text-white hover:bg-blue-700 w-full",onClick:V,children:"Exportar PDF"})]}),i.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-4 gap-3 mb-4",children:[i.jsxs("div",{className:"p-3 border rounded bg-gray-50",children:[i.jsx("div",{className:"text-xs text-gray-600",children:"Paquetes Cash"}),i.jsx("div",{className:"text-xl font-semibold",children:ee.packsCash})]}),i.jsxs("div",{className:"p-3 border rounded bg-gray-50",children:[i.jsx("div",{className:"text-xs text-gray-600",children:"Paquetes Crdito"}),i.jsx("div",{className:"text-xl font-semibold",children:ee.packsCredito})]}),i.jsxs("div",{className:"p-3 border rounded bg-gray-50",children:[i.jsx("div",{className:"text-xs text-gray-600",children:"Monto Cash"}),i.jsx("div",{className:"text-xl font-semibold",children:Kc(ee.montoCash)})]}),i.jsxs("div",{className:"p-3 border rounded bg-gray-50",children:[i.jsx("div",{className:"text-xs text-gray-600",children:"Monto Crdito"}),i.jsx("div",{className:"text-xl font-semibold",children:Kc(ee.montoCredito)})]})]}),i.jsxs("div",{className:"block md:hidden space-y-3",children:[T?i.jsx("div",{className:"bg-white border rounded-lg p-4 shadow",children:"Cargando"}):H.length===0?i.jsx("div",{className:"bg-white border rounded-lg p-4 shadow",children:"Sin transacciones en el rango."}):H.map(_e=>{const Ue=_e.customerName||(_e.customerId?G[_e.customerId]:"")||"Nombre cliente",Ye=U(_e);return i.jsx("div",{className:"bg-white border rounded-xl shadow",children:i.jsxs("details",{className:"group",children:[i.jsxs("summary",{className:"list-none cursor-pointer p-3 flex items-start gap-3",children:[i.jsxs("div",{className:"flex-1 min-w-0",children:[i.jsxs("div",{className:"flex items-center justify-between gap-2",children:[i.jsx("div",{className:"font-semibold truncate",children:Ue}),i.jsx("div",{className:"text-xs text-gray-600 shrink-0",children:_e.date})]}),i.jsxs("div",{className:"mt-1 flex items-center gap-2 flex-wrap text-xs",children:[i.jsx("span",{className:`px-2 py-1 rounded-full border ${_e.type==="CREDITO"?"bg-yellow-50 border-yellow-200 text-yellow-700":"bg-green-50 border-green-200 text-green-700"}`,children:_e.type==="CREDITO"?"Crdito":"Cash"}),i.jsxs("span",{className:"text-gray-700",children:[i.jsx("b",{children:"Paquetes:"})," ",i.jsx("button",{type:"button",className:"underline text-blue-600",onClick:At=>{At.preventDefault(),p(_e.id)},title:"Ver detalle",children:_e.quantity})]}),i.jsxs("span",{className:"text-gray-700",children:[i.jsx("b",{children:"Monto:"})," ",Kc(_e.total)]})]})]}),i.jsx("div",{className:"text-gray-500 mt-1",children:i.jsx("span",{className:"inline-block transition-transform group-open:rotate-180",children:""})})]}),i.jsx("div",{className:"px-3 pb-3 pt-0 text-sm",children:i.jsxs("div",{className:"grid grid-cols-1 gap-2 border-t pt-3",children:[i.jsxs("div",{className:"flex items-center justify-between",children:[i.jsx("span",{className:"text-gray-600",children:"Cliente"}),i.jsx("span",{className:"font-medium text-right",children:Ue})]}),i.jsxs("div",{className:"flex items-center justify-between",children:[i.jsx("span",{className:"text-gray-600",children:"Fecha"}),i.jsx("span",{className:"font-medium",children:_e.date})]}),i.jsxs("div",{className:"flex items-center justify-between",children:[i.jsx("span",{className:"text-gray-600",children:"Tipo"}),i.jsx("span",{className:"font-medium",children:_e.type==="CREDITO"?"Crdito":"Cash"})]}),i.jsxs("div",{className:"flex items-center justify-between",children:[i.jsx("span",{className:"text-gray-600",children:"Paquetes"}),i.jsx("span",{className:"font-medium",children:i.jsx("button",{type:"button",className:"underline text-blue-600",onClick:()=>p(_e.id),title:"Ver detalle",children:_e.quantity})})]}),i.jsxs("div",{className:"flex items-center justify-between",children:[i.jsx("span",{className:"text-gray-600",children:"Monto"}),i.jsx("span",{className:"font-semibold",children:Kc(_e.total)})]}),i.jsxs("div",{className:"flex items-center justify-between",children:[i.jsx("span",{className:"text-gray-600",children:"Comisin"}),i.jsx("span",{className:"font-medium",children:Ye>0?Kc(Ye):""})]}),i.jsxs("div",{className:"flex items-center justify-between",children:[i.jsx("span",{className:"text-gray-600",children:"Vendedor"}),i.jsx("span",{className:"font-medium",children:_e.vendorName||""})]}),s&&i.jsxs("div",{className:"pt-2 flex items-center justify-end gap-2",children:[i.jsx("button",{className:"px-3 py-2 rounded border hover:bg-gray-50",onClick:()=>ae(At=>At===_e.id?null:_e.id),children:" Acciones"}),ve===_e.id&&i.jsx("button",{className:"px-3 py-2 rounded bg-red-600 text-white hover:bg-red-700",onClick:()=>Ce(_e),children:"Eliminar"})]})]})})]})},_e.id)}),i.jsx("div",{className:"bg-white p-3 rounded shadow border",children:fe()})]}),i.jsxs("div",{className:"hidden md:block bg-white p-2 rounded shadow border w-full",children:[i.jsxs("table",{className:"min-w-full w-full text-sm",children:[i.jsx("thead",{className:"bg-gray-100",children:i.jsxs("tr",{children:[i.jsx("th",{className:"p-2 border",children:"Fecha"}),i.jsx("th",{className:"p-2 border",children:"Cliente"}),i.jsx("th",{className:"p-2 border",children:"Tipo"}),i.jsx("th",{className:"p-2 border",children:"Paquetes"}),i.jsx("th",{className:"p-2 border",children:"Monto"}),i.jsx("th",{className:"p-2 border",children:"Comisin"}),i.jsx("th",{className:"p-2 border",children:"Vendedor"}),s&&i.jsx("th",{className:"p-2 border",children:"Acciones"})]})}),i.jsx("tbody",{children:T?i.jsx("tr",{children:i.jsx("td",{className:"p-4 text-center",colSpan:o,children:"Cargando"})}):H.length===0?i.jsx("tr",{children:i.jsx("td",{className:"p-4 text-center",colSpan:o,children:"Sin transacciones en el rango."})}):H.map(_e=>{const Ue=_e.customerName||(_e.customerId?G[_e.customerId]:"")||"Nombre cliente",Ye=U(_e);return i.jsxs("tr",{className:"text-center",children:[i.jsx("td",{className:"p-2 border",children:_e.date}),i.jsx("td",{className:"p-2 border",children:Ue}),i.jsx("td",{className:"p-2 border",children:_e.type==="CREDITO"?"Crdito":"Cash"}),i.jsx("td",{className:"p-2 border",children:i.jsx("button",{type:"button",className:"underline text-blue-600 hover:text-blue-800",title:"Ver detalle de productos de esta venta",onClick:()=>p(_e.id),children:_e.quantity})}),i.jsx("td",{className:"p-2 border",children:Kc(_e.total)}),i.jsx("td",{className:"p-2 border",children:Ye>0?Kc(Ye):""}),i.jsx("td",{className:"p-2 border",children:_e.vendorName||""}),s&&i.jsxs("td",{className:"p-2 border relative",children:[i.jsx("button",{className:"px-2 py-1 rounded border hover:bg-gray-50",onClick:()=>ae(At=>At===_e.id?null:_e.id),title:"Acciones",children:""}),ve===_e.id&&i.jsx("div",{className:"absolute right-2 mt-1 w-28 bg-white border rounded shadow z-10 text-left",children:i.jsx("button",{className:"block w-full text-left px-3 py-2 hover:bg-gray-100 text-red-600",onClick:()=>Ce(_e),children:"Eliminar"})})]})]},_e.id)})})]}),fe()]}),B&&i.jsx("p",{className:"mt-2 text-sm",children:B}),l&&i.jsx("div",{className:"fixed inset-0 bg-black/40 flex items-center justify-center z-[60]",children:i.jsxs("div",{className:"bg-white rounded-lg shadow-xl border w-[95%] max-w-3xl p-4",children:[i.jsxs("div",{className:"flex items-center justify-between mb-2",children:[i.jsxs("div",{children:[i.jsxs("h3",{className:"text-lg font-bold",children:["Productos/paquetes vendidos"," ",f?` #${f}`:""]}),te&&i.jsxs("div",{className:"text-sm text-gray-700 mt-1",children:["Comisin de vendedor:"," ",i.jsx("span",{className:"font-semibold",children:U(te)>0?Kc(U(te)):""})]})]}),i.jsx("button",{className:"px-3 py-1 rounded bg-gray-200 hover:bg-gray-300",onClick:()=>c(!1),children:"Cerrar"})]}),i.jsx("div",{className:"bg-white rounded border overflow-x-auto",children:i.jsxs("table",{className:"min-w-full text-sm",children:[i.jsx("thead",{className:"bg-gray-100",children:i.jsxs("tr",{children:[i.jsx("th",{className:"p-2 border",children:"Producto"}),i.jsx("th",{className:"p-2 border text-right",children:"Paquetes"}),i.jsx("th",{className:"p-2 border text-right",children:"Precio"}),i.jsx("th",{className:"p-2 border text-right",children:"Descuento"}),i.jsx("th",{className:"p-2 border text-right",children:"Monto"})]})}),i.jsx("tbody",{children:u?i.jsx("tr",{children:i.jsx("td",{colSpan:5,className:"p-4 text-center",children:"Cargando"})}):h.length===0?i.jsx("tr",{children:i.jsx("td",{colSpan:5,className:"p-4 text-center",children:"Sin tems en esta venta."})}):h.map((_e,Ue)=>i.jsxs("tr",{className:"text-center",children:[i.jsx("td",{className:"p-2 border text-left",children:_e.productName}),i.jsx("td",{className:"p-2 border text-right",children:_e.qty}),i.jsx("td",{className:"p-2 border text-right",children:Kc(_e.unitPrice)}),i.jsx("td",{className:"p-2 border text-right",children:Kc(_e.discount||0)}),i.jsx("td",{className:"p-2 border text-right",children:Kc(_e.total)})]},Ue))})]})})]})})]})}const vn=t=>`C$ ${(Number(t)||0).toFixed(2)}`;function eb(t){var r;const e=t==null?void 0:t.date;return e||((r=t==null?void 0:t.createdAt)!=null&&r.toDate?Rr(t.createdAt.toDate(),"yyyy-MM-dd"):"")}function RQe(t){if(Array.isArray(t==null?void 0:t.items))return t.items.map(n=>{const a=Number((n==null?void 0:n.packages)??(n==null?void 0:n.qty)??(n==null?void 0:n.quantity)??0)||0,s=Number((n==null?void 0:n.unitPricePackage)??(n==null?void 0:n.unitPrice)??0)||(a>0?Number((n==null?void 0:n.total)??(n==null?void 0:n.lineFinal)??0)/a:0)||0;return{productId:String((n==null?void 0:n.productId)||""),productName:String((n==null?void 0:n.productName)||""),sku:(n==null?void 0:n.sku)||"",qty:a,unitPrice:Number(s||0),discount:Number((n==null?void 0:n.discount)||0),vendorCommissionAmount:Number((n==null?void 0:n.vendorCommissionAmount)??(n==null?void 0:n.commissionAmount)??0),uBruta:Number((n==null?void 0:n.uBruta)??(n==null?void 0:n.grossProfit)??0)}});if(t!=null&&t.item){const n=t.item,a=Number((n==null?void 0:n.packages)??(n==null?void 0:n.qty)??(n==null?void 0:n.quantity)??0)||Number((t==null?void 0:t.packagesTotal)??(t==null?void 0:t.quantity)??0)||0,s=Number((n==null?void 0:n.unitPricePackage)??(n==null?void 0:n.unitPrice)??0)||(a>0?Number((n==null?void 0:n.total)??(t==null?void 0:t.total)??0)/a:0)||0;return[{productId:String((n==null?void 0:n.productId)||""),productName:String((n==null?void 0:n.productName)||""),sku:(n==null?void 0:n.sku)||"",qty:a,unitPrice:Number(s||0),discount:Number((n==null?void 0:n.discount)||0),vendorCommissionAmount:Number((n==null?void 0:n.vendorCommissionAmount)??(n==null?void 0:n.commissionAmount)??0),uBruta:Number((n==null?void 0:n.uBruta)??(n==null?void 0:n.grossProfit)??0)}]}const e=Number((t==null?void 0:t.packagesTotal)??(t==null?void 0:t.quantity)??0)||0,r=e>0?Number((t==null?void 0:t.total)||0)/e:0;return e>0?[{productId:String((t==null?void 0:t.productId)||""),productName:String((t==null?void 0:t.productName)||""),sku:(t==null?void 0:t.sku)||"",qty:e,unitPrice:Number(r||0),discount:Number((t==null?void 0:t.discount)||0),vendorCommissionAmount:Number((t==null?void 0:t.vendorCommissionAmount)??(t==null?void 0:t.commissionAmount)??0),uBruta:Number((t==null?void 0:t.uBruta)??(t==null?void 0:t.grossProfit)??0)}]:[]}function MQe(t,e){const r=eb(t);if(!r)return null;const n=t.vendorId||t.sellerId||void 0,a=t.vendorName||t.sellerName||void 0,s=RQe(t);let o=Number(t.total??t.itemsTotal??0)||s.reduce((l,c)=>{const u=(Number(c.qty||0)||0)*(Number(c.unitPrice||0)||0),d=Math.max(0,Number(c.discount||0)),f=Math.max(0,u-d);return l+f},0);return o=Number(o||0),{id:e,date:r,type:t.type||"CONTADO",total:o,items:s,customerId:t.customerId||void 0,customerName:t.customerName||void 0,vendorId:n,vendorName:a,vendorCommissionAmount:Number(t.vendorCommissionAmount||0)||0}}function LQe(t,e,r,n){const a={};for(const l of t)a[l.productId]||(a[l.productId]={productName:l.productName,lots:[]}),a[l.productId].lots.push({date:l.date,qtyLeft:Number(l.quantity||0),cost:Number(l.purchasePrice||0)});for(const l of Object.keys(a))a[l].lots.sort((c,u)=>c.date.localeCompare(u.date));const s=[...e].sort((l,c)=>l.date.localeCompare(c.date));let o=0;for(const l of s)for(const c of l.items||[]){const u=a[c.productId];if(!u)continue;let d=Number(c.qty||0);if(!(d<=0))for(const f of u.lots){if(d<=0)break;if(f.qtyLeft<=0)continue;const A=Math.min(f.qtyLeft,d);l.date>=r&&l.date<=n&&(o+=A*f.cost),f.qtyLeft-=A,d-=A}}return o}async function UQe(t){const e=Yt(mt(Se,"ar_movements"),cr("ref.saleId","==",t)),r=await kt(e);await Promise.all(r.docs.map(n=>Kn(Gt(Se,"ar_movements",n.id))))}function QQe(){const{refreshKey:t,refresh:e}=Oc(),[r,n]=g.useState(Rr(Ud(new Date),"yyyy-MM-dd")),[a,s]=g.useState(Rr(Ld(new Date),"yyyy-MM-dd")),[o,l]=g.useState([]),[c,u]=g.useState([]),[d,f]=g.useState([]),[A,h]=g.useState([]),[m,p]=g.useState([]),[x,v]=g.useState([]),[y,b]=g.useState(!0),[w,j]=g.useState(""),[I,_]=g.useState([]),[S,E]=g.useState({}),[T,k]=g.useState({}),[B,D]=g.useState(!1),[X,me]=g.useState(null),[pe,he]=g.useState([]),[ve,ae]=g.useState(!1),[Pe,ke]=g.useState({totalBruto:0,totalDescuento:0,totalFiado:0,saldoActual:0,abonadoPeriodo:0}),[O,G]=g.useState(!1),[z,U]=g.useState(""),[Y,ee]=g.useState([]),[M,H]=g.useState(!1),[te,Ce]=g.useState("CASH"),[V,We]=g.useState(1),ie=10,[J,Oe]=g.useState(!1),[fe,_e]=g.useState(null);g.useEffect(()=>{(async()=>{try{const ue=await kt(mt(Se,"sellers_candies")),Le=[];ue.forEach(ct=>{const ht=ct.data();Le.push({id:ct.id,name:ht.name||"",commissionPercent:Number(ht.commissionPercent||0)})}),_(Le)}catch(ue){console.error("Error cargando sellers_candies",ue)}})()},[]);const Ue=g.useMemo(()=>{const ue={};return I.forEach(Le=>{ue[Le.id]=Le}),ue},[I]);g.useEffect(()=>{(async()=>{b(!0),j("");try{const ue=await kt(mt(Se,"sales_candies")),Le=[],ct=[];ue.forEach(Ee=>{const we=Ee.data(),oe=MQe(we,Ee.id);oe&&(oe.date<=a&&Le.push(oe),oe.date>=r&&oe.date<=a&&ct.push(oe))}),u(Le),l(ct);const ht=await kt(mt(Se,"inventory_candies")),xe=[];ht.forEach(Ee=>{const we=Ee.data(),oe=eb(we);if(!oe||oe>a)return;const Fe=Math.max(1,Math.floor(Number(we.unitsPerPackage||1))),ce=Number(we.totalUnits??we.quantity??0),Me=Number(we.packages??0),Ke=Number(we.remaining??0),P=Number(we.remainingPackages??0),R=Me>0?Me:ce>0?Math.floor(ce/Fe):0,L=P>0?P:Ke>0?Math.floor(Ke/Fe):0;xe.push({id:Ee.id,productId:we.productId,productName:we.productName||"",date:oe,quantity:Number(R||0),remaining:Number(L||0),purchasePrice:Number(we.providerPrice||we.purchasePrice||0),unitsPerPackage:Fe})}),f(xe);const Ae=await kt(mt(Se,"expenses_candies")),Re=[];Ae.forEach(Ee=>{const we=Ee.data(),oe=eb(we);oe&&oe>=r&&oe<=a&&Re.push({id:Ee.id,date:oe,category:we.category||"",description:we.description||"",amount:Number(we.amount||0),status:we.status||""})}),h(Re);const lt=await kt(mt(Se,"ar_movements")),Ne=[],De={};lt.forEach(Ee=>{const we=Ee.data(),oe=eb(we);if(!oe)return;const Fe=we.customerId,ce=Number(we.amount||0);Fe&&(De[Fe]=(De[Fe]||0)+ce),we.type==="ABONO"&&oe>=r&&oe<=a&&Ne.push({id:Ee.id,customerId:Fe,type:"ABONO",amount:ce,date:oe})}),p(Ne);const xt=await kt(mt(Se,"customers_candies")),_t=[];xt.forEach(Ee=>{const we=Ee.data();_t.push({id:Ee.id,name:we.name||"",balance:De[Ee.id]||0})}),v(_t);const Et=await kt(mt(Se,"inventory_candies_sellers")),Mt={},nt={};Et.forEach(Ee=>{const we=Ee.data(),oe=eb(we);if(!oe||oe<r||oe>a)return;const Fe=we.sellerId||we.vendorId||"NO_VENDOR",ce=we.productName||"",Me=we.sku||"",Ke=Math.max(1,Math.floor(Number(we.unitsPerPackage||1))),P=Number(we.totalUnits??0),R=Number(we.packages??0),L=Number(we.remainingUnits??we.remaining??0),K=Number(we.remainingPackages??0),re=R>0?R:P>0?Math.floor(P/Ke):0,de=K>0?K:L>0?Math.floor(L/Ke):0,Ge=Number(we.totalVendor??0),rt=Number(we.uVendor??0),ft=Number(we.subtotal??0),et=Number(we.uBruta??0),ut=re,Ot=ut>0?Ge/ut:0,zt=ut>0?rt/ut:0,Bt=ut>0?ft/ut:0,Lt=ut>0?et>0?et/ut:Ot-Bt:0;if(Mt[Fe]||(Mt[Fe]={associated:[],remaining:[]}),re>0){const Be=re,vt=Be*Ot,hr=Be*Bt,xr=vt,Nr=Be*zt,gr=Be*Lt;Mt[Fe].associated.push({saleId:Ee.id,date:oe,productId:we.productId||we.id||"",productName:ce,sku:Me,qty:Be,unitPrice:Ot,costTotal:hr,lineTotal:vt,discount:0,lineFinal:xr,grossProfit:gr,vendorCommissionAmount:Nr,type:"ASSOCIATED"}),nt[Fe]=(nt[Fe]||0)+Be}if(de>0){const Be=de,vt=Be*Ot,hr=Be*Bt,xr=vt,Nr=Be*zt,gr=Be*Lt;Mt[Fe].remaining.push({saleId:Ee.id,date:oe,productId:we.productId||we.id||"",productName:ce,sku:Me,qty:Be,unitPrice:Ot,costTotal:hr,lineTotal:vt,discount:0,lineFinal:xr,grossProfit:gr,vendorCommissionAmount:Nr,type:"REMAINING"})}}),E(Mt),k(nt)}catch(ue){console.error(ue),j(" Error cargando datos del dashboard.")}finally{b(!1)}})()},[r,a,t]);const Ye=g.useCallback((ue,Le)=>{const ct=Number(Le.vendorCommissionAmount||0)||0;if(ct>0)return ct;const ht=Number(ue.vendorCommissionAmount||0)||0;if(ht<=0)return 0;const xe=Number(Le.qty||0),Ae=Number(Le.unitPrice||0),Re=xe*Ae,lt=Math.max(0,Number(Le.discount||0)),Ne=Math.max(0,Re-lt);return!Ne||!ue.total?0:ht*Ne/ue.total},[]),At=g.useMemo(()=>{try{return LQe(d,c,r,a)}catch(ue){return console.error(ue),0}},[d,c,r,a]),yt=g.useMemo(()=>{const ue=o.reduce((Et,Mt)=>Et+(Mt.total||0),0),Le=A.reduce((Et,Mt)=>Et+(Mt.amount||0),0),ct=ue-At,ht=ct-Le;let xe=0;for(const Et of o)for(const Mt of Et.items||[]){const nt=Number(Mt.uBruta||0);Number.isFinite(nt)&&(xe+=nt)}const Ae=m.reduce((Et,Mt)=>Et+Math.abs(Mt.amount||0),0),Re=x.filter(Et=>(Et.balance||0)>0),lt=Re.reduce((Et,Mt)=>Et+(Mt.balance||0),0);let Ne=0,De=0,xt=0,_t=0;for(const Et of o){const Mt=(Et.items||[]).reduce((Ee,we)=>Ee+(Number(we.qty)||0),0),nt=(Et.items||[]).reduce((Ee,we)=>Ee+Ye(Et,we),0);Et.type==="CONTADO"?(Ne+=Mt,xt+=nt):(De+=Mt,_t+=nt)}return{ventasTotales:ue,costoMercaderia:At,gastosPeriodo:Le,gananciaAntes:ct,utilidadBrutaOrdenes:xe,gananciaDespues:ht,abonosRecibidos:Ae,saldosPendientes:lt,clientesConSaldo:Re.length,paquetesCash:Ne,paquetesCredito:De,comisionCash:xt,comisionCredito:_t}},[o,A,m,x,At,Ye,S]),bt=g.useMemo(()=>{const ue={},Le={};for(const ct of o)if(!(ct.type!=="CREDITO"||!ct.customerId))for(const ht of ct.items||[]){const xe=Number(ht.qty||0),Ae=Number(ht.unitPrice||0),Re=xe*Ae,lt=Math.max(0,Number(ht.discount||0)),Ne=Math.max(0,Re-lt);ue[ct.customerId]=(ue[ct.customerId]||0)+xe,Le[ct.customerId]=(Le[ct.customerId]||0)+Ne}return x.filter(ct=>(ct.balance||0)>0).map(ct=>({customerId:ct.id,name:ct.name,paquetesAsociados:ue[ct.id]||0,saldoTotal:Le[ct.id]||0,saldoPendiente:ct.balance||0})).sort((ct,ht)=>ht.saldoPendiente-ct.saldoPendiente)},[x,o]),Nt=g.useMemo(()=>{const ue={};return x.forEach(Le=>ue[Le.id]=Le.name),ue},[x]),jt=g.useMemo(()=>[...o].sort((ue,Le)=>Le.date.localeCompare(ue.date)).map(ue=>{var xe;const Le=(ue.items||[]).reduce((Ae,Re)=>Ae+(Number(Re.qty)||0),0);let ct="Cash";ue.type==="CREDITO"&&ue.customerId?ct=Nt[ue.customerId]||"":ue.type==="CONTADO"&&(ct=((xe=ue.customerName)==null?void 0:xe.trim())||"Cash");const ht=Le>0?ue.total/Le:0;return{id:ue.id,date:ue.date,type:ue.type==="CREDITO"?"Crdito":"Cash",customer:ct,paquetes:Le,total:Number(ue.total||0),avgPrice:ht}}),[o,Nt]),St=g.useMemo(()=>{var Le,ct;const ue=new Map;for(const ht of o){const xe=ht.vendorId||"NO_VENDOR",Ae=ht.vendorName||((Le=Ue[xe])==null?void 0:Le.name)||"Sin vendedor";ue.has(xe)||ue.set(xe,{vendorId:xe,vendorName:Ae,paquetesAsociados:0,paquetesVendidos:0,paquetesFiados:0,totalVendido:0,totalFiado:0,comisionCash:0,comisionCredito:0,paquetesRestantes:0});const Re=ue.get(xe);for(const lt of ht.items||[]){const Ne=Number(lt.qty||0),De=Number(lt.unitPrice||0),xt=Ne*De,_t=Math.max(0,Number(lt.discount||0)),Et=Math.max(0,xt-_t),Mt=Ye(ht,lt);ht.type==="CONTADO"?(Re.paquetesVendidos+=Ne,Re.totalVendido+=Et,Re.comisionCash+=Mt):(Re.paquetesFiados+=Ne,Re.totalFiado+=Et,Re.comisionCredito+=Mt)}}for(const[ht,xe]of Object.entries(T)){const Ae=ue.get(ht),Re=(Ae==null?void 0:Ae.vendorName)||((ct=Ue[ht])==null?void 0:ct.name)||"Sin vendedor",lt=Ae||{vendorId:ht,vendorName:Re,paquetesAsociados:0,paquetesVendidos:0,paquetesFiados:0,totalVendido:0,totalFiado:0,comisionCash:0,comisionCredito:0,paquetesRestantes:0};lt.paquetesAsociados=xe,lt.paquetesRestantes=Math.max(xe-lt.paquetesVendidos-lt.paquetesFiados,0),ue.set(ht,lt)}return Array.from(ue.values()).sort((ht,xe)=>xe.totalVendido+xe.totalFiado-(ht.totalVendido+ht.totalFiado))},[o,T,Ue,Ye]),Ve=async ue=>{D(!0),me({id:ue.customerId,name:ue.name}),he([]),ae(!0),ke({totalBruto:0,totalDescuento:0,totalFiado:0,saldoActual:0,abonadoPeriodo:0});try{const Le=[];let ct=0,ht=0,xe=0;for(const Ne of o)if(!(Ne.type!=="CREDITO"||Ne.customerId!==ue.customerId))for(const De of Ne.items||[]){const xt=Number(De.qty||0),_t=Number(De.unitPrice||0),Et=xt*_t,Mt=Math.max(0,Number(De.discount||0)),nt=Math.max(0,Et-Mt);Le.push({saleId:Ne.id,date:Ne.date,productName:De.productName,sku:De.sku||"",qty:xt,unitPrice:_t,lineTotal:Et,discount:Mt,lineFinal:nt}),ct+=Et,ht+=Mt,xe+=nt}let Ae=0;for(const Ne of m)Ne.customerId===ue.customerId&&(Ae+=Math.abs(Ne.amount||0));const Re=x.find(Ne=>Ne.id===ue.customerId),lt=(Re==null?void 0:Re.balance)||0;he(Le),ke({totalBruto:ct,totalDescuento:ht,totalFiado:xe,saldoActual:lt,abonadoPeriodo:Ae})}catch(Le){console.error(Le),j(" No se pudo cargar el detalle del cliente.")}finally{ae(!1)}},Te=(ue,Le,ct)=>{G(!0),Ce(ct),We(1);let ht="";ct==="ASSOCIATED"?ht=`Paquetes asociados  ${Le}`:ct==="REMAINING"?ht=`Paquetes restantes  ${Le}`:ct==="CASH"?ht=`Paquetes vendidos (Cash)  ${Le}`:ht=`Paquetes fiados (Crdito)  ${Le}`,U(ht),ee([]),H(!0);try{if(ct==="ASSOCIATED"||ct==="REMAINING"){const Ae=S[ue],Re=ct==="ASSOCIATED"?(Ae==null?void 0:Ae.associated)||[]:(Ae==null?void 0:Ae.remaining)||[];ee([...Re].sort((lt,Ne)=>(Ne.qty||0)-(lt.qty||0))),H(!1);return}const xe=[];for(const Ae of o)if(((Ae.vendorId||"NO_VENDOR")===ue||!Ae.vendorId&&ue==="NO_VENDOR")&&!(ct==="CASH"&&Ae.type!=="CONTADO")&&!(ct==="CREDIT"&&Ae.type!=="CREDITO"))for(const lt of Ae.items||[]){const Ne=Number(lt.qty||0),De=Number(lt.unitPrice||0),xt=Ne*De,_t=Math.max(0,Number(lt.discount||0)),Et=Math.max(0,xt-_t),Mt=Ye(Ae,lt);xe.push({saleId:Ae.id,date:Ae.date,productName:lt.productName,sku:lt.sku||"",qty:Ne,unitPrice:De,lineTotal:xt,discount:_t,lineFinal:Et,vendorCommissionAmount:Mt,type:ct})}ee(xe.sort((Ae,Re)=>Ae.date.localeCompare(Re.date)))}catch(xe){console.error(xe),j(" No se pudo cargar el detalle del vendedor.")}finally{H(!1)}},qe=g.useMemo(()=>te!=="ASSOCIATED"&&te!=="REMAINING"?1:Math.max(1,Math.ceil(Y.length/ie)),[te,Y.length]),ge=g.useMemo(()=>{if(te!=="ASSOCIATED"&&te!=="REMAINING")return Y;const ue=(V-1)*ie;return Y.slice(ue,ue+ie)},[te,V,Y]),q=te==="ASSOCIATED"||te==="REMAINING"?10:8;g.useEffect(()=>{te!=="ASSOCIATED"&&te!=="REMAINING"||V>qe&&We(qe)},[te,V,qe]);const se=ue=>{const Le=o.find(ct=>ct.id===ue)||null;_e(Le),Oe(!0)},ye=async ue=>{if(window.confirm("Eliminar esta venta? Esta accin no se puede deshacer."))try{await G2(ue),await UQe(ue),l(Le=>Le.filter(ct=>ct.id!==ue)),u(Le=>Le.filter(ct=>ct.id!==ue)),Oe(!1),_e(null)}catch(Le){console.error(Le),alert("No se pudo eliminar la venta. Revisa la consola para ms detalles.")}};return i.jsxs("div",{className:"max-w-6xl mx-auto",children:[i.jsxs("div",{className:"flex items-center justify-between mb-3",children:[i.jsx("h2",{className:"text-2xl font-bold",children:"Finanzas (Dulces)"}),i.jsx(Fc,{onClick:e,loading:y})]}),i.jsxs("div",{className:"bg-white p-3 rounded shadow border mb-4 flex flex-wrap items-end gap-3 text-sm",children:[i.jsxs("div",{className:"flex flex-col",children:[i.jsx("label",{className:"font-semibold",children:"Desde"}),i.jsx("input",{type:"date",className:"border rounded px-2 py-1",value:r,onChange:ue=>n(ue.target.value)})]}),i.jsxs("div",{className:"flex flex-col",children:[i.jsx("label",{className:"font-semibold",children:"Hasta"}),i.jsx("input",{type:"date",className:"border rounded px-2 py-1",value:a,onChange:ue=>s(ue.target.value)})]})]}),i.jsx("div",{className:"md:hidden mb-4",children:i.jsxs("details",{className:"bg-white border rounded-lg shadow",open:!0,children:[i.jsx("summary",{className:"cursor-pointer px-3 py-2 font-semibold",children:"KPIs"}),i.jsx("div",{className:"p-3",children:i.jsxs("div",{className:"grid grid-cols-1 gap-3",children:[i.jsxs("div",{className:"p-3 border rounded bg-gray-50",children:[i.jsx("div",{className:"text-xs text-gray-600",children:"Ventas Totales"}),i.jsx("div",{className:"text-xl font-semibold",children:vn(yt.ventasTotales)}),i.jsx("div",{className:"text-[11px] text-gray-500 mt-1",children:"Contado + Crdito del periodo."})]}),i.jsxs("div",{className:"p-3 border rounded bg-gray-50",children:[i.jsx("div",{className:"text-xs text-gray-600",children:"Costo de Mercadera (FIFO)"}),i.jsx("div",{className:"text-xl font-semibold",children:vn(yt.costoMercaderia)})]}),i.jsxs("div",{className:"p-3 border rounded bg-gray-50",children:[i.jsx("div",{className:"text-xs text-gray-600",children:"Utilidad Bruta"}),i.jsx("div",{className:"text-xl font-semibold text-green-600",children:vn(yt.utilidadBrutaOrdenes||0)})]}),i.jsxs("div",{className:"p-3 border rounded bg-gray-50",children:[i.jsx("div",{className:"text-xs text-gray-600",children:"Gastos"}),i.jsx("div",{className:"text-xl font-semibold",children:vn(yt.gastosPeriodo)})]}),i.jsxs("div",{className:"p-3 border rounded bg-gray-50",children:[i.jsx("div",{className:"text-xs text-gray-600",children:"Utilidad Neta"}),i.jsx("div",{className:"text-xl font-semibold text-green-600",children:vn(yt.gananciaDespues)})]}),i.jsxs("div",{className:"p-3 border rounded bg-gray-50",children:[i.jsx("div",{className:"text-xs text-gray-600",children:"Abonos Recibidos"}),i.jsx("div",{className:"text-xl font-semibold",children:vn(yt.abonosRecibidos)})]}),i.jsxs("div",{className:"p-3 border rounded bg-gray-50",children:[i.jsx("div",{className:"text-xs text-gray-600",children:"Saldos Pendientes"}),i.jsx("div",{className:"text-xl font-semibold",children:vn(yt.saldosPendientes)}),i.jsx("div",{className:"text-[11px] text-gray-500 mt-1",children:"A la fecha."})]}),i.jsxs("div",{className:"p-3 border rounded bg-gray-50",children:[i.jsx("div",{className:"text-xs text-gray-600",children:"Clientes con Saldo"}),i.jsx("div",{className:"text-xl font-semibold",children:yt.clientesConSaldo})]}),i.jsxs("div",{className:"p-3 border rounded bg-gray-50",children:[i.jsx("div",{className:"text-xs text-gray-600",children:"Paquetes Cash"}),i.jsx("div",{className:"text-xl font-semibold",children:yt.paquetesCash})]}),i.jsxs("div",{className:"p-3 border rounded bg-gray-50",children:[i.jsx("div",{className:"text-xs text-gray-600",children:"Paquetes Crdito (vendidos)"}),i.jsx("div",{className:"text-xl font-semibold",children:yt.paquetesCredito})]}),i.jsxs("div",{className:"p-3 border rounded bg-gray-50",children:[i.jsx("div",{className:"text-xs text-gray-600",children:"Comisin Cash"}),i.jsx("div",{className:"text-xl font-semibold",children:vn(yt.comisionCash)})]}),i.jsxs("div",{className:"p-3 border rounded bg-gray-50",children:[i.jsx("div",{className:"text-xs text-gray-600",children:"Comisin Crdito"}),i.jsx("div",{className:"text-xl font-semibold",children:vn(yt.comisionCredito)})]})]})})]})}),i.jsxs("div",{className:"hidden md:grid grid-cols-1 md:grid-cols-3 xl:grid-cols-5 gap-3 mb-4",children:[i.jsxs("div",{className:"p-3 border rounded bg-gray-50",children:[i.jsx("div",{className:"text-xs text-gray-600",children:"Ventas Totales"}),i.jsx("div",{className:"text-xl font-semibold",children:vn(yt.ventasTotales)}),i.jsx("div",{className:"text-[11px] text-gray-500 mt-1",children:"Contado + Crdito del periodo."})]}),i.jsxs("div",{className:"p-3 border rounded bg-gray-50",children:[i.jsx("div",{className:"text-xs text-gray-600",children:"Costo de Mercadera (FIFO)"}),i.jsx("div",{className:"text-xl font-semibold",children:vn(yt.costoMercaderia)})]}),i.jsxs("div",{className:"p-3 border rounded bg-gray-50",children:[i.jsx("div",{className:"text-xs text-gray-600",children:"Utilidad Bruta"}),i.jsx("div",{className:"text-xl font-semibold text-green-600",children:vn(yt.utilidadBrutaOrdenes||0)})]}),i.jsxs("div",{className:"p-3 border rounded bg-gray-50",children:[i.jsx("div",{className:"text-xs text-gray-600",children:"Gastos"}),i.jsx("div",{className:"text-xl font-semibold",children:vn(yt.gastosPeriodo)})]}),i.jsxs("div",{className:"p-3 border rounded bg-gray-50",children:[i.jsx("div",{className:"text-xs text-gray-600",children:"Utilidad Neta"}),i.jsx("div",{className:"text-xl font-semibold text-green-600",children:vn(yt.gananciaDespues)})]}),i.jsxs("div",{className:"p-3 border rounded bg-gray-50",children:[i.jsx("div",{className:"text-xs text-gray-600",children:"Abonos Recibidos"}),i.jsx("div",{className:"text-xl font-semibold",children:vn(yt.abonosRecibidos)})]}),i.jsxs("div",{className:"p-3 border rounded bg-gray-50",children:[i.jsx("div",{className:"text-xs text-gray-600",children:"Saldos Pendientes"}),i.jsx("div",{className:"text-xl font-semibold",children:vn(yt.saldosPendientes)}),i.jsx("div",{className:"text-[11px] text-gray-500 mt-1",children:"A la fecha."})]}),i.jsxs("div",{className:"p-3 border rounded bg-gray-50",children:[i.jsx("div",{className:"text-xs text-gray-600",children:"Clientes con Saldo"}),i.jsx("div",{className:"text-xl font-semibold",children:yt.clientesConSaldo})]}),i.jsxs("div",{className:"p-3 border rounded bg-gray-50",children:[i.jsx("div",{className:"text-xs text-gray-600",children:"Paquetes Cash"}),i.jsx("div",{className:"text-xl font-semibold",children:yt.paquetesCash})]}),i.jsxs("div",{className:"p-3 border rounded bg-gray-50",children:[i.jsx("div",{className:"text-xs text-gray-600",children:"Paquetes Crdito (vendidos)"}),i.jsx("div",{className:"text-xl font-semibold",children:yt.paquetesCredito})]}),i.jsxs("div",{className:"p-3 border rounded bg-gray-50",children:[i.jsx("div",{className:"text-xs text-gray-600",children:"Comisin Cash"}),i.jsx("div",{className:"text-xl font-semibold",children:vn(yt.comisionCash)})]}),i.jsxs("div",{className:"p-3 border rounded bg-gray-50",children:[i.jsx("div",{className:"text-xs text-gray-600",children:"Comisin Crdito"}),i.jsx("div",{className:"text-xl font-semibold",children:vn(yt.comisionCredito)})]})]}),i.jsx("div",{className:"md:hidden mb-6",children:i.jsxs("details",{className:"bg-white border rounded-lg shadow",children:[i.jsx("summary",{className:"cursor-pointer px-3 py-2 font-semibold",children:"Consolidado clientes y vendedores"}),i.jsxs("div",{className:"p-3",children:[i.jsx("h3",{className:"text-base font-semibold mb-2",children:"Consolidado por cliente (Crdito)"}),i.jsx("div",{className:"bg-white p-2 rounded border w-full mb-4 overflow-x-auto",children:i.jsxs("table",{className:"min-w-full w-full text-sm",children:[i.jsx("thead",{className:"bg-gray-100",children:i.jsxs("tr",{children:[i.jsx("th",{className:"p-2 border",children:"Cliente"}),i.jsx("th",{className:"p-2 border",children:"Paquetes asociados"}),i.jsx("th",{className:"p-2 border",children:"Saldo total"}),i.jsx("th",{className:"p-2 border",children:"Saldo pendiente"})]})}),i.jsx("tbody",{children:y?i.jsx("tr",{children:i.jsx("td",{className:"p-4 text-center",colSpan:4,children:"Cargando"})}):bt.length===0?i.jsx("tr",{children:i.jsx("td",{className:"p-4 text-center",colSpan:4,children:"Sin clientes con saldo"})}):bt.map(ue=>i.jsxs("tr",{className:"text-center",children:[i.jsx("td",{className:"p-2 border",children:ue.name}),i.jsx("td",{className:"p-2 border",children:i.jsx("button",{className:"underline text-blue-600 hover:text-blue-800",onClick:()=>Ve({customerId:ue.customerId,name:ue.name}),title:"Ver paquetes fiados del periodo",children:ue.paquetesAsociados})}),i.jsx("td",{className:"p-2 border",children:vn(ue.saldoTotal)}),i.jsx("td",{className:"p-2 border font-semibold",children:vn(ue.saldoPendiente)})]},ue.customerId))})]})}),i.jsx("h3",{className:"text-base font-semibold mb-2",children:"Consolidado vendedores"}),i.jsx("div",{className:"bg-white p-2 rounded border w-full overflow-x-auto",children:i.jsxs("table",{className:"min-w-full w-full text-sm",children:[i.jsx("thead",{className:"bg-gray-100",children:i.jsxs("tr",{children:[i.jsx("th",{className:"p-2 border whitespace-nowrap",children:"Vendedor"}),i.jsx("th",{className:"p-2 border whitespace-nowrap",children:"Paquetes asociados"}),i.jsx("th",{className:"p-2 border whitespace-nowrap",children:"Paquetes restantes"}),i.jsx("th",{className:"p-2 border whitespace-nowrap",children:"Paquetes vendidos (Cash)"}),i.jsx("th",{className:"p-2 border whitespace-nowrap",children:"Total vendido (Cash)"}),i.jsx("th",{className:"p-2 border whitespace-nowrap",children:"Comisin Cash"}),i.jsx("th",{className:"p-2 border whitespace-nowrap",children:"Paquetes fiados (Crdito)"}),i.jsx("th",{className:"p-2 border whitespace-nowrap",children:"Total fiado (Crdito)"}),i.jsx("th",{className:"p-2 border whitespace-nowrap",children:"Comisin Crdito"})]})}),i.jsx("tbody",{children:y?i.jsx("tr",{children:i.jsx("td",{className:"p-4 text-center",colSpan:9,children:"Cargando"})}):St.length===0?i.jsx("tr",{children:i.jsx("td",{className:"p-4 text-center",colSpan:9,children:"Sin datos de vendedores en el rango seleccionado."})}):St.map(ue=>i.jsxs("tr",{className:"text-center",children:[i.jsx("td",{className:"p-2 border whitespace-nowrap",children:ue.vendorName}),i.jsx("td",{className:"p-2 border whitespace-nowrap",children:i.jsx("button",{className:"underline text-blue-600 hover:text-blue-800",onClick:()=>Te(ue.vendorId,ue.vendorName,"ASSOCIATED"),children:ue.paquetesAsociados})}),i.jsx("td",{className:"p-2 border whitespace-nowrap",children:i.jsx("button",{className:"underline text-blue-600 hover:text-blue-800",onClick:()=>Te(ue.vendorId,ue.vendorName,"REMAINING"),children:ue.paquetesRestantes})}),i.jsx("td",{className:"p-2 border whitespace-nowrap",children:i.jsx("button",{className:"underline text-blue-600 hover:text-blue-800",onClick:()=>Te(ue.vendorId,ue.vendorName,"CASH"),children:ue.paquetesVendidos})}),i.jsx("td",{className:"p-2 border whitespace-nowrap",children:vn(ue.totalVendido)}),i.jsx("td",{className:"p-2 border whitespace-nowrap",children:vn(ue.comisionCash)}),i.jsx("td",{className:"p-2 border whitespace-nowrap",children:i.jsx("button",{className:"underline text-blue-600 hover:text-blue-800",onClick:()=>Te(ue.vendorId,ue.vendorName,"CREDIT"),children:ue.paquetesFiados})}),i.jsx("td",{className:"p-2 border whitespace-nowrap",children:vn(ue.totalFiado)}),i.jsx("td",{className:"p-2 border whitespace-nowrap",children:vn(ue.comisionCredito)})]},ue.vendorId))})]})})]})]})}),i.jsx("h3",{className:"hidden md:block text-lg font-semibold mb-2",children:"Consolidado por cliente (Crdito)"}),i.jsx("div",{className:"hidden md:block bg-white p-2 rounded shadow border w-full mb-6",children:i.jsxs("table",{className:"min-w-full w-full text-sm",children:[i.jsx("thead",{className:"bg-gray-100",children:i.jsxs("tr",{children:[i.jsx("th",{className:"p-2 border",children:"Cliente"}),i.jsx("th",{className:"p-2 border",children:"Paquetes asociados (periodo)"}),i.jsx("th",{className:"p-2 border",children:"Saldo total (periodo)"}),i.jsx("th",{className:"p-2 border",children:"Saldo pendiente"})]})}),i.jsx("tbody",{children:y?i.jsx("tr",{children:i.jsx("td",{className:"p-4 text-center",colSpan:4,children:"Cargando"})}):bt.length===0?i.jsx("tr",{children:i.jsx("td",{className:"p-4 text-center",colSpan:4,children:"Sin clientes con saldo"})}):bt.map(ue=>i.jsxs("tr",{className:"text-center",children:[i.jsx("td",{className:"p-2 border",children:ue.name}),i.jsx("td",{className:"p-2 border",children:i.jsx("button",{className:"underline text-blue-600 hover:text-blue-800",onClick:()=>Ve({customerId:ue.customerId,name:ue.name}),title:"Ver paquetes fiados del periodo",children:ue.paquetesAsociados})}),i.jsx("td",{className:"p-2 border",children:vn(ue.saldoTotal)}),i.jsx("td",{className:"p-2 border font-semibold",children:vn(ue.saldoPendiente)})]},ue.customerId))})]})}),i.jsx("h3",{className:"hidden md:block text-lg font-semibold mb-2",children:"Consolidado vendedores"}),i.jsx("div",{className:"hidden md:block bg-white p-2 rounded shadow border w-full mb-6 overflow-x-auto",children:i.jsxs("table",{className:"min-w-full w-full text-sm",children:[i.jsx("thead",{className:"bg-gray-100",children:i.jsxs("tr",{children:[i.jsx("th",{className:"p-2 border whitespace-nowrap",children:"Vendedor"}),i.jsx("th",{className:"p-2 border whitespace-nowrap",children:"Paquetes asociados"}),i.jsx("th",{className:"p-2 border whitespace-nowrap",children:"Paquetes restantes"}),i.jsx("th",{className:"p-2 border whitespace-nowrap",children:"Paquetes vendidos (Cash)"}),i.jsx("th",{className:"p-2 border whitespace-nowrap",children:"Total vendido (Cash)"}),i.jsx("th",{className:"p-2 border whitespace-nowrap",children:"Comisin Cash"}),i.jsx("th",{className:"p-2 border whitespace-nowrap",children:"Paquetes fiados (Crdito)"}),i.jsx("th",{className:"p-2 border whitespace-nowrap",children:"Total fiado (Crdito)"}),i.jsx("th",{className:"p-2 border whitespace-nowrap",children:"Comisin Crdito"})]})}),i.jsx("tbody",{children:y?i.jsx("tr",{children:i.jsx("td",{className:"p-4 text-center",colSpan:9,children:"Cargando"})}):St.length===0?i.jsx("tr",{children:i.jsx("td",{className:"p-4 text-center",colSpan:9,children:"Sin datos de vendedores en el rango seleccionado."})}):St.map(ue=>i.jsxs("tr",{className:"text-center",children:[i.jsx("td",{className:"p-2 border whitespace-nowrap",children:ue.vendorName}),i.jsx("td",{className:"p-2 border whitespace-nowrap",children:i.jsx("button",{className:"underline text-blue-600 hover:text-blue-800",onClick:()=>Te(ue.vendorId,ue.vendorName,"ASSOCIATED"),children:ue.paquetesAsociados})}),i.jsx("td",{className:"p-2 border whitespace-nowrap",children:i.jsx("button",{className:"underline text-blue-600 hover:text-blue-800",onClick:()=>Te(ue.vendorId,ue.vendorName,"REMAINING"),children:ue.paquetesRestantes})}),i.jsx("td",{className:"p-2 border whitespace-nowrap",children:i.jsx("button",{className:"underline text-blue-600 hover:text-blue-800",onClick:()=>Te(ue.vendorId,ue.vendorName,"CASH"),children:ue.paquetesVendidos})}),i.jsx("td",{className:"p-2 border whitespace-nowrap",children:vn(ue.totalVendido)}),i.jsx("td",{className:"p-2 border whitespace-nowrap",children:vn(ue.comisionCash)}),i.jsx("td",{className:"p-2 border whitespace-nowrap",children:i.jsx("button",{className:"underline text-blue-600 hover:text-blue-800",onClick:()=>Te(ue.vendorId,ue.vendorName,"CREDIT"),children:ue.paquetesFiados})}),i.jsx("td",{className:"p-2 border whitespace-nowrap",children:vn(ue.totalFiado)}),i.jsx("td",{className:"p-2 border whitespace-nowrap",children:vn(ue.comisionCredito)})]},ue.vendorId))})]})}),i.jsx("div",{className:"md:hidden mb-6",children:i.jsxs("details",{className:"bg-white border rounded-lg shadow",children:[i.jsx("summary",{className:"cursor-pointer px-3 py-2 font-semibold",children:"Transacciones y gastos"}),i.jsxs("div",{className:"p-3",children:[i.jsx("h3",{className:"text-base font-semibold mb-2",children:"Transacciones del periodo"}),i.jsx("div",{className:"bg-white p-2 rounded border w-full mb-4 overflow-x-auto",children:i.jsxs("table",{className:"min-w-full w-full text-sm",children:[i.jsx("thead",{className:"bg-gray-100",children:i.jsxs("tr",{children:[i.jsx("th",{className:"p-2 border whitespace-nowrap",children:"Fecha"}),i.jsx("th",{className:"p-2 border whitespace-nowrap",children:"Cliente"}),i.jsx("th",{className:"p-2 border whitespace-nowrap",children:"Tipo"}),i.jsx("th",{className:"p-2 border whitespace-nowrap",children:"Paquetes"}),i.jsx("th",{className:"p-2 border whitespace-nowrap",children:"Precio venta (prom.)"}),i.jsx("th",{className:"p-2 border whitespace-nowrap",children:"Total"}),i.jsx("th",{className:"p-2 border whitespace-nowrap",children:"Acciones"})]})}),i.jsx("tbody",{children:y?i.jsx("tr",{children:i.jsx("td",{className:"p-4 text-center",colSpan:7,children:"Cargando"})}):jt.length===0?i.jsx("tr",{children:i.jsx("td",{className:"p-4 text-center",colSpan:7,children:"Sin transacciones en el rango seleccionado."})}):jt.map(ue=>i.jsxs("tr",{className:"text-center",children:[i.jsx("td",{className:"p-2 border whitespace-nowrap",children:ue.date}),i.jsx("td",{className:"p-2 border whitespace-nowrap",children:ue.customer}),i.jsx("td",{className:"p-2 border whitespace-nowrap",children:ue.type}),i.jsx("td",{className:"p-2 border whitespace-nowrap",children:i.jsx("button",{className:"underline text-blue-600 hover:text-blue-800",onClick:()=>se(ue.id),children:ue.paquetes})}),i.jsx("td",{className:"p-2 border whitespace-nowrap",children:vn(ue.avgPrice)}),i.jsx("td",{className:"p-2 border whitespace-nowrap",children:vn(ue.total)}),i.jsx("td",{className:"p-2 border whitespace-nowrap",children:i.jsx("button",{className:"text-xs bg-red-600 text-white px-2 py-1 rounded hover:bg-red-700",onClick:()=>ye(ue.id),children:"Eliminar"})})]},ue.id))})]})}),i.jsx("h3",{className:"text-base font-semibold mb-2",children:"Gastos del periodo"}),i.jsx("div",{className:"bg-white p-2 rounded border w-full overflow-x-auto",children:i.jsxs("table",{className:"min-w-full w-full text-sm",children:[i.jsx("thead",{className:"bg-gray-100",children:i.jsxs("tr",{children:[i.jsx("th",{className:"p-2 border",children:"Fecha"}),i.jsx("th",{className:"p-2 border",children:"Categora"}),i.jsx("th",{className:"p-2 border",children:"Descripcin"}),i.jsx("th",{className:"p-2 border",children:"Monto"}),i.jsx("th",{className:"p-2 border",children:"Estado"})]})}),i.jsx("tbody",{children:y?i.jsx("tr",{children:i.jsx("td",{className:"p-4 text-center",colSpan:5,children:"Cargando"})}):A.length===0?i.jsx("tr",{children:i.jsx("td",{className:"p-4 text-center",colSpan:5,children:"Sin gastos en el rango seleccionado."})}):A.sort((ue,Le)=>ue.date.localeCompare(Le.date)).map(ue=>i.jsxs("tr",{className:"text-center",children:[i.jsx("td",{className:"p-2 border",children:ue.date}),i.jsx("td",{className:"p-2 border",children:ue.category||""}),i.jsx("td",{className:"p-2 border",children:ue.description?i.jsx("span",{title:ue.description,children:ue.description.length>40?ue.description.slice(0,40)+"":ue.description}):""}),i.jsx("td",{className:"p-2 border",children:vn(ue.amount)}),i.jsx("td",{className:"p-2 border",children:ue.status||""})]},ue.id))})]})})]})]})}),i.jsx("h3",{className:"hidden md:block text-lg font-semibold mb-2",children:"Transacciones del periodo"}),i.jsx("div",{className:"hidden md:block bg-white p-2 rounded shadow border w-full mb-6 overflow-x-auto",children:i.jsxs("table",{className:"min-w-full w-full text-sm",children:[i.jsx("thead",{className:"bg-gray-100",children:i.jsxs("tr",{children:[i.jsx("th",{className:"p-2 border whitespace-nowrap",children:"Fecha"}),i.jsx("th",{className:"p-2 border whitespace-nowrap",children:"Cliente"}),i.jsx("th",{className:"p-2 border whitespace-nowrap",children:"Tipo"}),i.jsx("th",{className:"p-2 border whitespace-nowrap",children:"Paquetes"}),i.jsx("th",{className:"p-2 border whitespace-nowrap",children:"Precio venta (prom.)"}),i.jsx("th",{className:"p-2 border whitespace-nowrap",children:"Total"}),i.jsx("th",{className:"p-2 border whitespace-nowrap",children:"Acciones"})]})}),i.jsx("tbody",{children:y?i.jsx("tr",{children:i.jsx("td",{className:"p-4 text-center",colSpan:7,children:"Cargando"})}):jt.length===0?i.jsx("tr",{children:i.jsx("td",{className:"p-4 text-center",colSpan:7,children:"Sin transacciones en el rango seleccionado."})}):jt.map(ue=>i.jsxs("tr",{className:"text-center",children:[i.jsx("td",{className:"p-2 border whitespace-nowrap",children:ue.date}),i.jsx("td",{className:"p-2 border whitespace-nowrap",children:ue.customer}),i.jsx("td",{className:"p-2 border whitespace-nowrap",children:ue.type}),i.jsx("td",{className:"p-2 border whitespace-nowrap",children:i.jsx("button",{className:"underline text-blue-600 hover:text-blue-800",onClick:()=>se(ue.id),children:ue.paquetes})}),i.jsx("td",{className:"p-2 border whitespace-nowrap",children:vn(ue.avgPrice)}),i.jsx("td",{className:"p-2 border whitespace-nowrap",children:vn(ue.total)}),i.jsx("td",{className:"p-2 border whitespace-nowrap",children:i.jsx("button",{className:"text-xs bg-red-600 text-white px-2 py-1 rounded hover:bg-red-700",onClick:()=>ye(ue.id),children:"Eliminar"})})]},ue.id))})]})}),i.jsx("h3",{className:"hidden md:block text-lg font-semibold mb-2",children:"Gastos del periodo"}),i.jsx("div",{className:"hidden md:block bg-white p-2 rounded shadow border w-full",children:i.jsxs("table",{className:"min-w-full w-full text-sm",children:[i.jsx("thead",{className:"bg-gray-100",children:i.jsxs("tr",{children:[i.jsx("th",{className:"p-2 border",children:"Fecha"}),i.jsx("th",{className:"p-2 border",children:"Categora"}),i.jsx("th",{className:"p-2 border",children:"Descripcin"}),i.jsx("th",{className:"p-2 border",children:"Monto"}),i.jsx("th",{className:"p-2 border",children:"Estado"})]})}),i.jsx("tbody",{children:y?i.jsx("tr",{children:i.jsx("td",{className:"p-4 text-center",colSpan:5,children:"Cargando"})}):A.length===0?i.jsx("tr",{children:i.jsx("td",{className:"p-4 text-center",colSpan:5,children:"Sin gastos en el rango seleccionado."})}):A.sort((ue,Le)=>ue.date.localeCompare(Le.date)).map(ue=>i.jsxs("tr",{className:"text-center",children:[i.jsx("td",{className:"p-2 border",children:ue.date}),i.jsx("td",{className:"p-2 border",children:ue.category||""}),i.jsx("td",{className:"p-2 border",children:ue.description?i.jsx("span",{title:ue.description,children:ue.description.length>40?ue.description.slice(0,40)+"":ue.description}):""}),i.jsx("td",{className:"p-2 border",children:vn(ue.amount)}),i.jsx("td",{className:"p-2 border",children:ue.status||""})]},ue.id))})]})}),w&&i.jsx("p",{className:"mt-2 text-sm",children:w}),B&&i.jsx("div",{className:"fixed inset-0 bg-black/40 flex items-center justify-center z-50",children:i.jsxs("div",{className:"bg-white rounded-lg shadow-xl border w-[95%] max-w-5xl p-4",children:[i.jsxs("div",{className:"flex items-center justify-between mb-2",children:[i.jsxs("h3",{className:"text-lg font-bold",children:["Detalle cliente  ",(X==null?void 0:X.name)||""]}),i.jsx("button",{className:"px-3 py-1 rounded bg-gray-200 hover:bg-gray-300",onClick:()=>D(!1),children:"Cerrar"})]}),i.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 xl:grid-cols-5 gap-3 mb-3",children:[i.jsxs("div",{className:"p-3 border rounded bg-gray-50",children:[i.jsx("div",{className:"text-xs text-gray-600",children:"Total bruto (periodo)"}),i.jsx("div",{className:"text-xl font-semibold",children:vn(Pe.totalBruto)})]}),i.jsxs("div",{className:"p-3 border rounded bg-gray-50",children:[i.jsx("div",{className:"text-xs text-gray-600",children:"Descuento (periodo)"}),i.jsx("div",{className:"text-xl font-semibold",children:vn(Pe.totalDescuento)})]}),i.jsxs("div",{className:"p-3 border rounded bg-gray-50",children:[i.jsx("div",{className:"text-xs text-gray-600",children:"Monto total fiado (periodo)"}),i.jsx("div",{className:"text-xl font-semibold",children:vn(Pe.totalFiado)})]}),i.jsxs("div",{className:"p-3 border rounded bg-gray-50",children:[i.jsx("div",{className:"text-xs text-gray-600",children:"Abonado (periodo)"}),i.jsx("div",{className:"text-xl font-semibold",children:vn(Pe.abonadoPeriodo)})]}),i.jsxs("div",{className:"p-3 border rounded bg-gray-50",children:[i.jsx("div",{className:"text-xs text-gray-600",children:"Saldo actual"}),i.jsx("div",{className:"text-xl font-semibold",children:vn(Pe.saldoActual)})]})]}),i.jsx("div",{className:"bg-white rounded border overflow-x-auto",children:i.jsxs("table",{className:"min-w-full text-sm",children:[i.jsx("thead",{className:"bg-gray-100",children:i.jsxs("tr",{children:[i.jsx("th",{className:"p-2 border",children:"Fecha compra"}),i.jsx("th",{className:"p-2 border",children:"Producto"}),i.jsx("th",{className:"p-2 border",children:"Paquetes"}),i.jsx("th",{className:"p-2 border",children:"Precio Paq"}),i.jsx("th",{className:"p-2 border",children:"Monto"}),i.jsx("th",{className:"p-2 border",children:"Descuento"}),i.jsx("th",{className:"p-2 border",children:"Monto final"})]})}),i.jsx("tbody",{children:ve?i.jsx("tr",{children:i.jsx("td",{colSpan:8,className:"p-4 text-center",children:"Cargando"})}):pe.length===0?i.jsx("tr",{children:i.jsx("td",{colSpan:8,className:"p-4 text-center",children:"Sin paquetes fiados en el periodo."})}):pe.sort((ue,Le)=>ue.date.localeCompare(Le.date)).map((ue,Le)=>i.jsxs("tr",{className:"text-center",children:[i.jsx("td",{className:"p-2 border",children:ue.date}),i.jsx("td",{className:"p-2 border",children:ue.productName}),i.jsx("td",{className:"p-2 border",children:ue.qty}),i.jsx("td",{className:"p-2 border",children:vn(ue.unitPrice)}),i.jsx("td",{className:"p-2 border",children:vn(ue.lineTotal)}),i.jsx("td",{className:"p-2 border",children:vn(ue.discount)}),i.jsx("td",{className:"p-2 border",children:vn(ue.lineFinal)})]},`${ue.saleId}-${Le}`))})]})})]})}),O&&i.jsx("div",{className:"fixed inset-0 bg-black/40 flex items-center justify-center z-50",children:i.jsxs("div",{className:"bg-white rounded-lg shadow-xl border w-[95%] max-w-5xl p-4",children:[i.jsxs("div",{className:"flex items-center justify-between mb-2",children:[i.jsx("h3",{className:"text-lg font-bold",children:z}),i.jsx("button",{className:"px-3 py-1 rounded bg-gray-200 hover:bg-gray-300",onClick:()=>G(!1),children:"Cerrar"})]}),(te==="ASSOCIATED"||te==="REMAINING")&&!M&&i.jsxs("div",{className:"flex items-center justify-between gap-2 mb-2 text-sm",children:[i.jsxs("div",{className:"text-gray-600",children:["Pgina ",V," de ",qe]}),i.jsxs("div",{className:"flex items-center gap-2",children:[i.jsx("button",{className:"px-3 py-1 rounded border bg-white hover:bg-gray-50 disabled:opacity-50",onClick:()=>We(ue=>Math.max(1,ue-1)),disabled:V<=1,children:"Anterior"}),i.jsx("button",{className:"px-3 py-1 rounded border bg-white hover:bg-gray-50 disabled:opacity-50",onClick:()=>We(ue=>Math.min(qe,ue+1)),disabled:V>=qe,children:"Siguiente"})]})]}),i.jsx("div",{className:"bg-white rounded border overflow-x-auto",children:i.jsxs("table",{className:"min-w-full text-sm",children:[i.jsx("thead",{className:"bg-gray-100",children:i.jsxs("tr",{children:[i.jsx("th",{className:"p-2 border",children:"Fecha Orden"}),i.jsx("th",{className:"p-2 border",children:"Producto"}),i.jsx("th",{className:"p-2 border",children:"Paquetes"}),i.jsx("th",{className:"p-2 border",children:"Precio Paq"}),te==="ASSOCIATED"||te==="REMAINING"?i.jsxs(i.Fragment,{children:[i.jsx("th",{className:"p-2 border",children:"Costo"}),i.jsx("th",{className:"p-2 border",children:"Monto"})]}):i.jsx("th",{className:"p-2 border",children:"Monto"}),i.jsx("th",{className:"p-2 border",children:"Descuento"}),i.jsx("th",{className:"p-2 border",children:"Monto final"}),te==="ASSOCIATED"||te==="REMAINING"?i.jsxs(i.Fragment,{children:[i.jsx("th",{className:"p-2 border",children:"Utilidad bruta"}),i.jsx("th",{className:"p-2 border",children:"Utilidad vendedor"})]}):i.jsx("th",{className:"p-2 border",children:"Comisin"})]})}),i.jsx("tbody",{children:M?i.jsx("tr",{children:i.jsx("td",{colSpan:q,className:"p-4 text-center",children:"Cargando"})}):Y.length===0?i.jsx("tr",{children:i.jsx("td",{colSpan:q,className:"p-4 text-center",children:"Sin paquetes para este vendedor en el periodo."})}):ge.map((ue,Le)=>i.jsxs("tr",{className:"text-center",children:[i.jsx("td",{className:"p-2 border",children:ue.date}),i.jsx("td",{className:"p-2 border",children:ue.productName}),i.jsx("td",{className:"p-2 border",children:ue.qty}),i.jsx("td",{className:"p-2 border",children:vn(ue.unitPrice)}),te==="ASSOCIATED"||te==="REMAINING"?i.jsxs(i.Fragment,{children:[i.jsx("td",{className:"p-2 border",children:vn(ue.costTotal??0)}),i.jsx("td",{className:"p-2 border",children:vn(ue.lineTotal)})]}):i.jsx("td",{className:"p-2 border",children:vn(ue.lineTotal)}),i.jsx("td",{className:"p-2 border",children:vn(ue.discount)}),i.jsx("td",{className:"p-2 border",children:vn(ue.lineFinal)}),te==="ASSOCIATED"||te==="REMAINING"?i.jsxs(i.Fragment,{children:[i.jsx("td",{className:"p-2 border",children:vn(ue.grossProfit||0)}),i.jsx("td",{className:"p-2 border",children:vn(ue.vendorCommissionAmount)})]}):i.jsx("td",{className:"p-2 border",children:vn(ue.vendorCommissionAmount)})]},`${ue.saleId}-${Le}`))})]})})]})}),J&&fe&&i.jsx("div",{className:"fixed inset-0 bg-black/40 flex items-center justify-center z-50",children:i.jsxs("div",{className:"bg-white rounded-lg shadow-xl border w-[95%] max-w-4xl p-4",children:[i.jsxs("div",{className:"flex items-center justify-between mb-2",children:[i.jsxs("h3",{className:"text-lg font-bold",children:["Detalle de venta  ",fe.date]}),i.jsx("button",{className:"px-3 py-1 rounded bg-gray-200 hover:bg-gray-300",onClick:()=>Oe(!1),children:"Cerrar"})]}),i.jsx("div",{className:"bg-white rounded border overflow-x-auto mb-3",children:i.jsxs("table",{className:"min-w-full text-sm",children:[i.jsx("thead",{className:"bg-gray-100",children:i.jsxs("tr",{children:[i.jsx("th",{className:"p-2 border",children:"Producto"}),i.jsx("th",{className:"p-2 border",children:"Paquetes"}),i.jsx("th",{className:"p-2 border",children:"Precio Paq"}),i.jsx("th",{className:"p-2 border",children:"Subtotal"}),i.jsx("th",{className:"p-2 border",children:"Comisin"})]})}),i.jsx("tbody",{children:(fe.items||[]).map((ue,Le)=>{const ct=Number(ue.qty||0),ht=Number(ue.unitPrice||0),xe=ct*ht,Ae=Ye(fe,ue);return i.jsxs("tr",{className:"text-center",children:[i.jsx("td",{className:"p-2 border",children:ue.productName}),i.jsx("td",{className:"p-2 border",children:ct}),i.jsx("td",{className:"p-2 border",children:vn(ht)}),i.jsx("td",{className:"p-2 border",children:vn(xe)}),i.jsx("td",{className:"p-2 border",children:vn(Ae)})]},Le)})})]})}),i.jsxs("div",{className:"flex justify-between items-center",children:[i.jsxs("div",{className:"text-sm",children:[i.jsx("span",{className:"font-semibold",children:"Total venta:"}),vn(fe.total)]}),i.jsx("button",{className:"text-xs bg-red-600 text-white px-3 py-1 rounded hover:bg-red-700",onClick:()=>ye(fe.id),children:"Eliminar venta"})]})]})})]})}const cG=["Rivas","Isla Ometepe","San Jorge"];function VQe(){const{refreshKey:t,refresh:e}=Oc(),[r,n]=g.useState([]),[a,s]=g.useState(!0),[o,l]=g.useState(""),[c,u]=g.useState(!1),[d,f]=g.useState(""),[A,h]=g.useState("0"),[m,p]=g.useState("Rivas"),[x,v]=g.useState(null),[y,b]=g.useState(""),[w,j]=g.useState("0"),[I,_]=g.useState("Rivas");g.useEffect(()=>{(async()=>{s(!0),l("");try{const X=Yt(mt(Se,"sellers_candies"),In("name","asc")),me=await kt(X),pe=[];me.forEach(he=>{const ve=he.data();pe.push({id:he.id,name:ve.name||"",commissionPercent:Number(ve.commissionPercent||0),branch:ve.branch||"Rivas",createdAt:ve.createdAt||Ar.now()})}),n(pe)}catch(X){console.error(X),l(" Error cargando vendedores.")}finally{s(!1)}})()},[t]);const S=()=>{f(""),h("0"),p("Rivas")},E=async X=>{X.preventDefault(),l("");const me=d.trim();if(!me){l("Ingresa el nombre y apellido del vendedor.");return}const pe=Number(A||0);if(pe<0){l("El margen no puede ser negativo.");return}try{const he={name:me,commissionPercent:pe,branch:m,createdAt:Ar.now()},ve=await Jn(mt(Se,"sellers_candies"),he);n(ae=>[{id:ve.id,...he},...ae]),l(" Vendedor creado correctamente."),S(),u(!1)}catch(he){console.error(he),l(" Error al crear el vendedor.")}},T=X=>{v(X.id),b(X.name),j(X.commissionPercent.toString()),_(X.branch)},k=()=>{v(null),b(""),j("0"),_("Rivas")},B=async()=>{if(!x)return;l("");const X=y.trim();if(!X){l("El nombre y apellido no pueden estar vacos.");return}const me=Number(w||0);if(me<0){l("El margen no puede ser negativo.");return}try{await kn(Gt(Se,"sellers_candies",x),{name:X,commissionPercent:me,branch:I}),n(pe=>pe.map(he=>he.id===x?{...he,name:X,commissionPercent:me,branch:I}:he)),l(" Vendedor actualizado."),k()}catch(pe){console.error(pe),l(" Error al actualizar el vendedor.")}},D=async X=>{if(window.confirm(`Eliminar al vendedor "${X.name}"? Esta accin no se puede deshacer.`))try{await Kn(Gt(Se,"sellers_candies",X.id)),n(pe=>pe.filter(he=>he.id!==X.id)),l(" Vendedor eliminado.")}catch(pe){console.error(pe),l(" Error al eliminar el vendedor.")}};return i.jsxs("div",{className:"max-w-5xl mx-auto",children:[i.jsxs("div",{className:"flex items-center justify-between mb-3",children:[i.jsx("h2",{className:"text-2xl font-bold",children:"Vendedores de Dulces"}),i.jsxs("div",{className:"flex gap-2",children:[i.jsx(Fc,{onClick:e,loading:a}),i.jsxs("button",{className:"inline-flex items-center gap-2 bg-green-600 text-white px-3 py-2 rounded hover:bg-green-700",onClick:()=>u(!0),children:[i.jsx("span",{className:"inline-block bg-green-700/40 rounded-full p-1",children:i.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-4 w-4",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:i.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 4v16m8-8H4"})})}),"Nuevo vendedor"]})]})]}),c&&i.jsx("div",{className:"fixed inset-0 bg-black/40 flex items-center justify-center z-50",children:i.jsxs("div",{className:"bg-white p-6 rounded shadow-lg w-full max-w-lg max-h-[90vh] overflow-y-auto",children:[i.jsx("h3",{className:"text-xl font-bold mb-4",children:"Nuevo vendedor de dulces"}),i.jsxs("form",{onSubmit:E,className:"space-y-4 text-sm",children:[i.jsxs("div",{children:[i.jsx("label",{className:"block text-sm font-semibold",children:"Nombre y apellido"}),i.jsx("input",{className:"w-full border p-2 rounded",value:d,onChange:X=>f(X.target.value),placeholder:"Ej: Juan Prez"})]}),i.jsxs("div",{children:[i.jsx("label",{className:"block text-sm font-semibold",children:"Margen del vendedor (% sobre U Aproximada)"}),i.jsx("input",{type:"number",step:"0.01",min:0,className:"w-full border p-2 rounded",value:A,onChange:X=>h(X.target.value),placeholder:"Ej: 30"}),i.jsx("p",{className:"text-[11px] text-gray-500 mt-1",children:"Este porcentaje YA NO es comisin sobre venta. Se aplica as: U. Vendedor = U. Aproximada  (margen/100). U. Inversionista = U. Aproximada  U. Vendedor."})]}),i.jsxs("div",{children:[i.jsx("label",{className:"block text-sm font-semibold",children:"Sucursal"}),i.jsx("select",{className:"w-full border p-2 rounded",value:m,onChange:X=>p(X.target.value),children:cG.map(X=>i.jsx("option",{value:X,children:X},X))})]}),i.jsxs("div",{className:"flex justify-end gap-2 mt-2",children:[i.jsx("button",{type:"button",onClick:()=>{S(),u(!1)},className:"px-3 py-1 rounded bg-gray-200 hover:bg-gray-300",children:"Cancelar"}),i.jsx("button",{type:"submit",className:"px-3 py-1 rounded bg-blue-600 text-white hover:bg-blue-700",children:"Guardar vendedor"})]})]})]})}),i.jsx("div",{className:"bg-white p-2 rounded shadow border w-full overflow-x-auto mt-3",children:i.jsxs("table",{className:"min-w-[700px] text-xs md:text-sm",children:[i.jsx("thead",{className:"bg-gray-100",children:i.jsxs("tr",{className:"whitespace-nowrap",children:[i.jsx("th",{className:"p-2 border",children:"Nombre y apellido"}),i.jsx("th",{className:"p-2 border",children:"Margen (% U Aproximada)"}),i.jsx("th",{className:"p-2 border",children:"Sucursal"}),i.jsx("th",{className:"p-2 border",children:"Acciones"})]})}),i.jsx("tbody",{children:a?i.jsx("tr",{children:i.jsx("td",{className:"p-4 text-center",colSpan:4,children:"Cargando"})}):r.length===0?i.jsx("tr",{children:i.jsx("td",{className:"p-4 text-center",colSpan:4,children:"Sin vendedores registrados."})}):r.map(X=>{const me=x===X.id;return i.jsxs("tr",{className:"text-center whitespace-nowrap",children:[i.jsx("td",{className:"p-2 border",children:me?i.jsx("input",{className:"border p-1 rounded text-xs w-full",value:y,onChange:pe=>b(pe.target.value)}):X.name}),i.jsx("td",{className:"p-2 border",children:me?i.jsx("input",{type:"number",step:"0.01",min:0,className:"border p-1 rounded text-xs w-24 text-right",value:w,onChange:pe=>j(pe.target.value)}):`${X.commissionPercent.toFixed(2)} %`}),i.jsx("td",{className:"p-2 border",children:me?i.jsx("select",{className:"border p-1 rounded text-xs",value:I,onChange:pe=>_(pe.target.value),children:cG.map(pe=>i.jsx("option",{value:pe,children:pe},pe))}):X.branch}),i.jsx("td",{className:"p-2 border",children:me?i.jsxs("div",{className:"flex gap-1 justify-center",children:[i.jsx("button",{className:"px-2 py-1 rounded bg-blue-600 text-white hover:bg-blue-700 text-xs",onClick:B,children:"Guardar"}),i.jsx("button",{className:"px-2 py-1 rounded bg-gray-200 hover:bg-gray-300 text-xs",onClick:k,children:"Cancelar"})]}):i.jsxs("div",{className:"flex gap-1 justify-center",children:[i.jsx("button",{className:"px-2 py-1 rounded bg-yellow-500 text-white hover:bg-yellow-600 text-xs",onClick:()=>T(X),children:"Editar"}),i.jsx("button",{className:"px-2 py-1 rounded bg-red-600 text-white hover:bg-red-700 text-xs",onClick:()=>D(X),children:"Borrar"})]})})]},X.id)})})]})}),o&&i.jsx("p",{className:"mt-2 text-sm",children:o})]})}const la=t=>Math.max(0,Math.floor(Number(t||0)));function K2(t){return Math.max(1,la(t.unitsPerPackage||1))}function uG(t){const e=Number(t.remaining);if(Number.isFinite(e)&&e>0)return Math.floor(e);const r=Number(t.remainingPackages??t.remainingPacks??t.packagesRemaining??0);if(Number.isFinite(r)&&r>0){const l=K2(t);return Math.floor(r*l)}const n=K2(t),a=Number(t.totalUnits||0),s=Number(t.quantity||0),o=Number(t.packages||0);return a>0?Math.floor(a):s>0?Math.floor(s):o>0?Math.floor(o*n):0}async function HQe(t){const e=String(t.vendorInventoryId||"");let r=la(t.packagesToReturn);const n=!!t.deleteVendorAfter;if(!e||r<=0)return{restoredPackages:0,mode:"noop"};const a=Yt(mt(Se,"inventory_transfers_candies"),cr("toVendorRowId","==",e)),s=await kt(a);if(s.empty)return{restoredPackages:0,mode:"noop"};const o=s.docs.map(f=>({id:f.id,...f.data()})).filter(f=>String(f.fromVendorRowId||"").trim()!=="").sort((f,A)=>{var p,x;const h=Number(((p=f.createdAt)==null?void 0:p.seconds)??0);return Number(((x=A.createdAt)==null?void 0:x.seconds)??0)-h});if(!o.length)return{restoredPackages:0,mode:"noop"};const l=[];let c=r;for(const f of o){if(c<=0)break;const A=la(f.packagesMoved||0);if(A<=0)continue;const h=Math.min(c,A);h<=0||(l.push({fromVendorRowId:String(f.fromVendorRowId),packs:h}),c-=h)}if(!l.length)return{restoredPackages:0,mode:"noop"};const u=Gt(Se,"inventory_candies_sellers",e),d=l.map(f=>Gt(Se,"inventory_candies_sellers",f.fromVendorRowId));return await Gs(Se,async f=>{const A=await Promise.all(d.map(h=>f.get(h)));for(let h=0;h<l.length;h++){const m=d[h],p=A[h];if(!p.exists())continue;const x=p.data(),v=la(l[h].packs||0);if(v<=0)continue;const y=Math.max(1,la(x.unitsPerPackage||1)),b=v*y,w=Number(x.remainingPackages||0),j=Number(x.packages||0);f.update(m,{packages:Math.max(0,j+v),remainingPackages:Math.max(0,w+v),...y>0?{remainingUnits:Number(x.remainingUnits||0)+b}:{},transferDelta:Number(x.transferDelta||0)+v,updatedAt:Ar.now()})}n&&f.delete(u)}),{restoredPackages:r-c,mode:"transfer"}}async function gF(t){const{orderId:e,productId:r}=t;let n=la(t.packagesToReturn);if(!e||!r||n<=0)return;const a=Yt(mt(Se,"inventory_candies"),cr("orderId","==",e),cr("productId","==",r),In("createdAt","asc")),s=await kt(a);if(s.empty)return;const o=s.docs.map(l=>l.ref);await Gs(Se,async l=>{const c=await Promise.all(o.map(u=>l.get(u)));for(let u=0;u<o.length&&n>0;u++){const d=c[u];if(!d.exists())continue;const f=d.data(),A=K2(f),h=n*A,p=la(f.remaining??0)+h,x=Math.floor(p/A);l.update(o[u],{remaining:p,remainingPackages:x,packages:x,updatedAt:Ar.now()}),n=0}})}async function xF(t){const{orderId:e,productId:r}=t,n=la(t.packagesToReturn);if(!e||!r||n<=0)return;const a=Gt(Se,"candy_main_orders",e);await Gs(Se,async s=>{const o=await s.get(a);if(!o.exists())return;const l=o.data(),c=Array.isArray(l.items)?l.items:[];let u=!1;const d=c.map(f=>String((f==null?void 0:f.id)||"")!==String(r)?f:(u=!0,{...f,remainingPackages:la(f.remainingPackages)+n}));u&&s.update(a,{items:d,updatedAt:Ar.now()})})}function vF(t){if(!Array.isArray(t))return[];const e=[];for(const r of t){const n=String((r==null?void 0:r.batchId)||""),a=String((r==null?void 0:r.masterOrderId)||(r==null?void 0:r.orderId)||""),s=la((r==null?void 0:r.units)??(r==null?void 0:r.qty)??(r==null?void 0:r.quantity)??0),o=Math.max(1,la((r==null?void 0:r.unitsPerPackage)||1));!n||!a||s<=0||e.push({batchId:n,masterOrderId:a,units:s,unitsPerPackage:o})}return e}function q2(t,e){const r=la(t),n=Math.max(1,la(e));return Math.floor(r/n)}async function dG(t){const e=String(t.productId||"");let r=la(t.packagesToAllocate);if(!e||r<=0)return{allocations:[]};const n=Yt(mt(Se,"inventory_candies"),cr("productId","==",e)),a=await kt(n);if(a.empty)throw new Error("No hay inventario para este producto.");const o=a.docs.map(c=>({id:c.id,data:c.data()})).sort((c,u)=>{var m,p;const d=String(c.data.date||""),f=String(u.data.date||"");if(d!==f)return d<f?-1:1;const A=((m=c.data.createdAt)==null?void 0:m.seconds)??0,h=((p=u.data.createdAt)==null?void 0:p.seconds)??0;return A-h}).map(c=>Gt(Se,"inventory_candies",c.id)),l=[];return await Gs(Se,async c=>{const u=await Promise.all(o.map(y=>c.get(y))),d=[];let f=r;for(let y=0;y<o.length&&f>0;y++){const b=o[y],w=u[y];if(!w.exists())continue;const j=w.data(),I=K2(j),_=uG(j);if(_<=0)continue;const S=Math.floor(_/I);if(S<=0)continue;const E=Math.min(S,f),T=E*I,k=Math.max(0,_-T),B=Math.floor(k/I),D=String(j.orderId||"");if(!D)throw new Error("Lote sin orderId (orden maestra).");l.push({batchId:b.id,masterOrderId:D,units:T,unitsPerPackage:I}),d.push({ref:b,newRemUnits:k,newRemPacks:B}),f-=E}if(f>0)throw new Error(`Inventario insuficiente. Faltan ${f} paquetes.`);const A={};for(const y of l){const b=q2(y.units,y.unitsPerPackage);A[y.masterOrderId]=(A[y.masterOrderId]||0)+b}const h=new Map;for(let y=0;y<d.length;y++){const b=d[y];h.set(b.ref.id,b.newRemUnits)}const m={};for(let y=0;y<o.length;y++){const b=o[y],w=u[y];if(!w.exists())continue;const j=w.data(),I=String(j.orderId||""),_=String(j.productId||"");if(!I||!_)continue;const S=K2(j),E=h.get(b.id),T=typeof E=="number"?E:uG(j),k=Math.floor(T/S);m[I]||(m[I]={}),m[I][_]=(m[I][_]||0)+Math.max(0,k)}const p=Object.keys(A),x=p.map(y=>Gt(Se,"candy_main_orders",y)),v=await Promise.all(x.map(y=>c.get(y)));for(let y=0;y<d.length;y++){const b=d[y];c.update(b.ref,{remaining:b.newRemUnits,remainingPackages:b.newRemPacks,packages:b.newRemPacks,updatedAt:Ar.now()})}for(let y=0;y<x.length;y++){const b=v[y];if(!b.exists())throw new Error("Orden maestra no existe.");const w=b.data(),j=Array.isArray(w.items)?w.items:[],I=p[y];if(la(A[I]||0)<=0)continue;let S=!1;const E=j.map(T=>{var B;if(String((T==null?void 0:T.id)||"")!==e)return T;S=!0;const k=((B=m[I])==null?void 0:B[e])??la(T.remainingPackages||0);return{...T,remainingPackages:Math.max(0,la(k||0))}});S&&c.update(x[y],{items:E,updatedAt:Ar.now()})}}),{allocations:l}}async function $Qe(t){const e=String(t.vendorInventoryId||"");let r=la(t.packagesToReturn);if(!e)throw new Error("vendorInventoryId requerido");if(r<=0)return{restoredPackages:0,mode:"noop"};const n=Gt(Se,"inventory_candies_sellers",e),a=await zs(n);if(!a.exists())throw new Error("No existe la orden del vendedor");const s=a.data(),o=String(s.productId||"");if(!o)throw new Error("La orden del vendedor no tiene productId");if(!vF(s.masterAllocations||s.allocations||s.allocationsByBatch).length){const u=String(s.orderId||"");if(!u)throw new Error("La orden del vendedor no tiene orderId");return await gF({orderId:u,productId:o,packagesToReturn:r}),await xF({orderId:u,productId:o,packagesToReturn:r}),{restoredPackages:r,mode:"legacy"}}let c=0;return await Gs(Se,async u=>{const d=await u.get(n);if(!d.exists())throw new Error("No existe la orden del vendedor");const f=d.data(),A=String(f.productId||"");if(!A)throw new Error("Doc vendedor sin productId");let h=vF(f.masterAllocations||f.allocations||f.allocationsByBatch);if(!h.length)throw new Error("No hay masterAllocations guardadas en este doc (no se puede restaurar blindado).");const m=[];let p=r;for(let E=h.length-1;E>=0&&p>0;E--){const T=h[E],k=Math.max(1,la(T.unitsPerPackage||1)),B=q2(T.units,k);if(B<=0)continue;const D=Math.min(B,p),X=D*k;m.push({batchId:T.batchId,masterOrderId:T.masterOrderId,units:X,unitsPerPackage:k}),p-=D}const x=r-p;if(x<=0)return;c=x;const v=m.map(E=>Gt(Se,"inventory_candies",E.batchId)),y={};for(const E of m){const T=q2(E.units,E.unitsPerPackage);T>0&&(y[E.masterOrderId]=(y[E.masterOrderId]||0)+T)}const w=Object.keys(y).map(E=>Gt(Se,"candy_main_orders",E)),[j,I]=await Promise.all([Promise.all(v.map(E=>u.get(E))),Promise.all(w.map(E=>u.get(E)))]);for(let E=0;E<m.length;E++){const T=m[E],k=j[E];if(!k.exists())continue;const B=k.data(),D=Math.max(1,la(T.unitsPerPackage||B.unitsPerPackage||1)),X=la(T.units),pe=la(B.remaining??0)+X,he=Math.floor(pe/D);u.update(v[E],{remaining:pe,remainingPackages:he,packages:he,updatedAt:Ar.now()})}for(let E=0;E<w.length;E++){const T=I[E];if(!T.exists())continue;const k=w[E].id,B=la(y[k]||0);if(B<=0)continue;const D=T.data(),X=Array.isArray(D.items)?D.items:[];let me=!1;const pe=X.map(he=>String((he==null?void 0:he.id)||"")!==String(A)?he:(me=!0,{...he,remainingPackages:la(he.remainingPackages)+B}));me&&u.update(w[E],{items:pe,updatedAt:Ar.now()})}const _=new Map;for(const E of m){const T=`${E.batchId}__${E.masterOrderId}__${E.unitsPerPackage}`;_.set(T,(_.get(T)||0)+la(E.units))}const S=[];for(const E of h){const T=Math.max(1,la(E.unitsPerPackage||1)),k=`${E.batchId}__${E.masterOrderId}__${T}`,B=la(_.get(k)||0);if(B<=0){S.push(E);continue}const X=la(E.units)-B;X>0&&S.push({...E,units:X,unitsPerPackage:T}),_.delete(k)}u.update(n,{masterAllocations:S,updatedAt:Ar.now()})}),{restoredPackages:c,mode:"blind"}}async function fG(t){if(!t)throw new Error("vendorInventoryId requerido");const e=Gt(Se,"inventory_candies_sellers",t),r=await zs(e);if(!r.exists())throw new Error("No existe la orden del vendedor");const n=r.data(),a=String(n.productId||""),s=la(n.remainingPackages||n.packages||0),o=la(n.packages||n.remainingPackages||0),l=vF(n.masterAllocations||n.allocations||n.allocationsByBatch),c=await HQe({vendorInventoryId:t,packagesToReturn:s,deleteVendorAfter:!1});if(!l.length){const d=String(n.orderId||"");if(!d)throw new Error("La orden del vendedor no tiene orderId");if(!a)throw new Error("La orden del vendedor no tiene productId");if(c.restoredPackages>0){const f=Math.max(0,s-c.restoredPackages);return f<=0?(await Gs(Se,async A=>{A.delete(e)}),{restoredPackages:c.restoredPackages,mode:"transfer"}):(await gF({orderId:d,productId:a,packagesToReturn:f}),await xF({orderId:d,productId:a,packagesToReturn:f}),await Gs(Se,async A=>{A.delete(e)}),{restoredPackages:c.restoredPackages+f,mode:"transfer+legacy"})}return o<=0?(await Gs(Se,async f=>{f.delete(e)}),{restoredPackages:0,mode:"legacy"}):(await gF({orderId:d,productId:a,packagesToReturn:o}),await xF({orderId:d,productId:a,packagesToReturn:o}),await Gs(Se,async f=>{f.delete(e)}),{restoredPackages:o,mode:"legacy"})}let u=0;return await Gs(Se,async d=>{const f={};for(const y of l){const b=Math.max(1,la(y.unitsPerPackage||1)),w=la(y.units),j=q2(w,b);j>0&&(f[y.masterOrderId]=(f[y.masterOrderId]||0)+j)}const A=l.map(y=>Gt(Se,"inventory_candies",y.batchId)),m=Object.keys(f).map(y=>Gt(Se,"candy_main_orders",y)),[p,x]=await Promise.all([Promise.all(A.map(y=>d.get(y))),Promise.all(m.map(y=>d.get(y)))]);let v=0;for(let y=0;y<l.length;y++){const b=l[y],w=p[y];if(!w.exists())continue;const j=w.data(),I=Math.max(1,la(b.unitsPerPackage||j.unitsPerPackage||1)),_=la(b.units),E=la(j.remaining??0)+_,T=Math.floor(E/I);d.update(A[y],{remaining:E,remainingPackages:T,packages:T,updatedAt:Ar.now()});const k=q2(_,I);k>0&&(v+=k)}for(let y=0;y<m.length;y++){const b=x[y];if(!b.exists())continue;const w=m[y].id,j=la(f[w]||0);if(j<=0)continue;const I=b.data(),_=Array.isArray(I.items)?I.items:[];let S=!1;const E=_.map(T=>String((T==null?void 0:T.id)||"")!==String(a)?T:(S=!0,{...T,remainingPackages:la(T.remainingPackages)+j}));S&&d.update(m[y],{items:E,updatedAt:Ar.now()})}d.delete(e),u=v}),{restoredPackages:u,mode:"blind"}}const nB=t=>`C$ ${(Number(t)||0).toFixed(2)}`,Dse=(t,e)=>`${t}__${e}`,GQe=t=>t?typeof t=="string"?t:t!=null&&t.seconds?new Date(t.seconds*1e3).toISOString().slice(0,10):t!=null&&t.toDate?t.toDate().toISOString().slice(0,10):"":"",KQe=t=>{const e=t.sellerId||"",r=GQe(t.date);return e&&r?Dse(e,r):t.orderId?t.orderId:t.id},hG=(t,e=!1)=>{if(!t)return null;const r=new Date(t);return Number.isNaN(r.getTime())?null:(e?r.setHours(23,59,59,999):r.setHours(0,0,0,0),r)},qQe=t=>{var e,r;if((e=t.createdAt)!=null&&e.toDate)return t.createdAt.toDate();if((r=t.createdAt)!=null&&r.seconds)return new Date(t.createdAt.seconds*1e3);if(t.date){const n=new Date(t.date);if(!Number.isNaN(n.getTime()))return n}return null},AG=t=>{const e=String(t||"").trim().toUpperCase();if(e.includes("ISLA"))return"ISLA";if(e.includes("JORGE"))return"SAN_JORGE";if(e.includes("RIVAS"))return"RIVAS"},yF=t=>{const e=Number(t||0);return!isFinite(e)||e<0?0:e},mG=(t,e)=>{const r=yF(e),n=Number(t||0)*(r/100),a=Number(t||0)-n;return{vendorMarginPercent:r,uVendor:n,uInvestor:a}},pG=(t,e)=>e?e==="RIVAS"?t.unitPriceRivas||0:e==="SAN_JORGE"?t.unitPriceSanJorge||0:t.unitPriceIsla||0:t.unitPriceIsla||0,gG=(t,e)=>e?e==="RIVAS"?t.grossProfitPerPackRivas||0:e==="SAN_JORGE"?t.grossProfitPerPackSanJorge||0:t.grossProfitPerPackIsla||0:t.grossProfitPerPackIsla||0,xG=(t,e)=>e?e==="RIVAS"?t.uApproxPerPackRivas||0:e==="SAN_JORGE"?t.uApproxPerPackSanJorge||0:t.uApproxPerPackIsla||0:t.uApproxPerPackIsla||0;function zQe({open:t,onClose:e,orders:r,rows:n,setRows:a,isAdmin:s,currentUserEmail:o,currentUserName:l,sellerCandyId:c,sellers:u,products:d,transferAgg:f,setTransferAgg:A,setTransferRowDeltas:h}){const[m,p]=g.useState(!1),[x,v]=g.useState([]),[y,b]=g.useState(""),[w,j]=g.useState(""),[I,_]=g.useState(""),[S,E]=g.useState(""),[T,k]=g.useState("0"),[B,D]=g.useState(""),[X,me]=g.useState(!1),[pe,he]=g.useState(""),[ve,ae]=g.useState(!1),[Pe,ke]=g.useState(""),[O,G]=g.useState(()=>new Date().toISOString().slice(0,10)),[z,U]=g.useState(""),[Y,ee]=g.useState(()=>{const Te=new Date;return new Date(Te.getFullYear(),Te.getMonth(),1).toISOString().slice(0,10)}),[M,H]=g.useState(()=>new Date().toISOString().slice(0,10)),te=g.useMemo(()=>{const Te={};return u.forEach(qe=>{Te[qe.id]=qe}),Te},[u]),Ce=g.useMemo(()=>{const Te={};return d.forEach(qe=>{Te[qe.id]=qe}),Te},[d]),V=Pe&&te[Pe]||null,We=g.useMemo(()=>r.map(Te=>Te.orderKey),[r]),ie=g.useMemo(()=>{const Te={};return r.forEach(qe=>Te[qe.orderKey]=qe),Te},[r]),J=n,Oe=g.useMemo(()=>{const Te={};return J.forEach(qe=>{const ge=KQe(qe),q=new Set;ge&&q.add(ge),qe.orderId&&q.add(String(qe.orderId)),q.add(qe.id),q.forEach(se=>{Te[se]||(Te[se]=[]),Te[se].push(qe)})}),Te},[J]),fe=g.useMemo(()=>y?Oe[y]||[]:[],[Oe,y]),_e=g.useMemo(()=>fe.filter(Te=>{const qe=Te.remainingPackages??Te.remaining??Te.packages??0;return Number(qe||0)>0}),[fe]),Ue=g.useMemo(()=>{const Te=z.trim().toLowerCase();return Te?_e.filter(qe=>`${qe.category||""} ${qe.productName||""}`.toLowerCase().trim().includes(Te)):_e},[_e,z]),Ye=g.useMemo(()=>w&&J.find(Te=>Te.id===w)||null,[J,w]),At=g.useMemo(()=>{if(Ye!=null&&Ye.sellerId)return Ye.sellerId;const Te=ie[y];return(Te==null?void 0:Te.sellerId)||""},[Ye,ie,y]),yt=g.useMemo(()=>I?Oe[I]||[]:[],[Oe,I]),bt=g.useMemo(()=>Ye?yt.filter(Te=>Te.productId===Ye.productId):[],[yt,Ye]),Nt=async()=>{try{p(!0);let Te=[];if(!s&&c){const qe=Yt(mt(Se,"inventory_transfers_candies"),cr("fromSellerId","==",c),In("createdAt","desc")),ge=Yt(mt(Se,"inventory_transfers_candies"),cr("toSellerId","==",c),In("createdAt","desc")),[q,se]=await Promise.all([kt(qe),kt(ge)]),ye=new Set,ue=Le=>{Le.forEach(ct=>{if(ye.has(ct.id))return;ye.add(ct.id);const ht=ct.data();Te.push({id:ct.id,...ht})})};ue(q),ue(se),Te.sort((Le,ct)=>{var Ae,Re;const ht=((Ae=Le.createdAt)==null?void 0:Ae.seconds)||0;return(((Re=ct.createdAt)==null?void 0:Re.seconds)||0)-ht})}else{const qe=Yt(mt(Se,"inventory_transfers_candies"),In("createdAt","desc"));(await kt(qe)).forEach(q=>{const se=q.data();Te.push({id:q.id,...se})})}v(Te)}catch{he(" Error cargando traslados.")}finally{p(!1)}};g.useEffect(()=>{t&&Nt()},[t]);const jt=g.useMemo(()=>{const Te=hG(Y),qe=hG(M,!0);return x.filter(ge=>{const q=qQe(ge);return q?!(Te&&q<Te||qe&&q>qe):!0})},[x,Y,M]);g.useEffect(()=>{U("")},[y]),g.useEffect(()=>{if(ve){if(!Pe){const Te=ie[y];Te!=null&&Te.sellerId&&ke(Te.sellerId)}O||G(new Date().toISOString().slice(0,10))}},[ve,Pe,O,ie,y]);const St=()=>{b(""),j(""),_(""),E(""),k("0"),D(""),ae(!1),ke(""),G(new Date().toISOString().slice(0,10))},Ve=async()=>{if(!s){he("No tienes permiso para hacer traslados.");return}he("");const Te=Number(T||0);if(!(Te>0)){he("La cantidad de paquetes debe ser mayor a 0.");return}if(!B.trim()){he("Debes escribir el motivo de la movida.");return}if(!y||!w){he("Selecciona el pedido origen y el producto.");return}const qe=ve;if(!qe&&!I){he("Selecciona el pedido destino.");return}if(qe){if(!Pe){he("Selecciona el vendedor de la nueva orden.");return}if(!O){he("Selecciona la fecha de la nueva orden.");return}}const ge=!qe&&I&&ie[I]||null;if(!qe&&!ge){he("Selecciona un pedido destino vlido.");return}const q=ge?te[ge.sellerId]||{id:ge.sellerId||"",name:ge.sellerName||"",email:ge.sellerEmail||"",branch:ge.branch,branchLabel:ge.branchLabel,commissionPercent:ge.vendorMarginPercent??ge.commissionPercent??0}:null,se=n.find(Ne=>Ne.id===w)||null,ye=!qe&&S&&n.find(Ne=>Ne.id===S)||null;if(!se){he("No se encontr la fila origen/destino.");return}if(!qe&&ye&&w===S){he("Origen y destino no pueden ser el mismo.");return}if(!qe&&ye&&se.productId!==ye.productId){he("El producto destino no coincide con el producto origen.");return}if(Number(se.remainingPackages||0)<Te){he("El origen no tiene suficientes paquetes disponibles.");return}const ue=qe?V:null;if(qe&&!ue){he("Selecciona un vendedor destino vlido.");return}const Le=Ce[se.productId]||null,ct=qe?AG((ue==null?void 0:ue.branch)||(ue==null?void 0:ue.branchLabel)):void 0,ht=!qe&&!S&&!!ge,xe=qe||ht;let Ae=null,Re=null,lt="";if(qe&&ue){const Ne=yF(ue.commissionPercent??0),De=ct,xt=Number((Le==null?void 0:Le.unitsPerPackage)??se.unitsPerPackage??0),_t=xt>0?xt*Te:0;Le?pG(Le,De):Number(se.unitPriceRivas||se.unitPriceIsla||0);const Mt=(Le?gG(Le,De):Number(se.grossProfit||0)/Math.max(1,se.packages||1))*Te,nt=Le?Number(Le.logisticAllocatedPerPack||0)*Te:Number(se.logisticAllocated||0),we=(Le?xG(Le,De):Number(se.uAproximada||0)/Math.max(1,se.packages||1))*Te,oe=mG(Mt,Ne),Fe=Number(Mt||0)-Number(nt||0)-Number(oe.uVendor||0),ce=((Le==null?void 0:Le.unitPriceRivas)||se.unitPriceRivas||0)*Te,Me=((Le==null?void 0:Le.unitPriceSanJorge)||se.unitPriceSanJorge||0)*Te,Ke=((Le==null?void 0:Le.unitPriceIsla)||se.unitPriceIsla||0)*Te;lt=Dse(ue.id,O),Ae={sellerId:ue.id,sellerName:ue.name,sellerEmail:ue.email||"",branch:De||"",branchLabel:ue.branchLabel||"",productId:se.productId,productName:se.productName,category:se.category,orderId:lt,date:O,packages:Te,unitsPerPackage:xt,totalUnits:_t,remainingPackages:Te,remainingUnits:_t,totalRivas:ce,totalSanJorge:Me,totalIsla:Ke,unitPriceRivas:(Le==null?void 0:Le.unitPriceRivas)||se.unitPriceRivas||0,unitPriceSanJorge:(Le==null?void 0:Le.unitPriceSanJorge)||se.unitPriceSanJorge||0,unitPriceIsla:(Le==null?void 0:Le.unitPriceIsla)||se.unitPriceIsla||0,grossProfit:Mt,logisticAllocated:nt,vendorMarginPercent:oe.vendorMarginPercent,uVendor:oe.uVendor,uInvestor:oe.uInvestor,uAproximada:we,uNeta:Fe,providerPrice:se.providerPrice,transferDelta:0}}if(ht&&ge){const Ne=yF((q==null?void 0:q.commissionPercent)??ge.vendorMarginPercent??0),De=AG((q==null?void 0:q.branch)||(q==null?void 0:q.branchLabel)||ge.branch||ge.branchLabel),xt=Number((Le==null?void 0:Le.unitsPerPackage)??se.unitsPerPackage??0),_t=xt>0?xt*Te:0;Le?pG(Le,De):Number(se.unitPriceRivas||se.unitPriceIsla||0);const Mt=(Le?gG(Le,De):Number(se.grossProfit||0)/Math.max(1,se.packages||1))*Te,nt=Le?Number(Le.logisticAllocatedPerPack||0)*Te:Number(se.logisticAllocated||0),we=(Le?xG(Le,De):Number(se.uAproximada||0)/Math.max(1,se.packages||1))*Te,oe=mG(Mt,Ne),Fe=Number(Mt||0)-Number(nt||0)-Number(oe.uVendor||0),ce=((Le==null?void 0:Le.unitPriceRivas)||se.unitPriceRivas||0)*Te,Me=((Le==null?void 0:Le.unitPriceSanJorge)||se.unitPriceSanJorge||0)*Te,Ke=((Le==null?void 0:Le.unitPriceIsla)||se.unitPriceIsla||0)*Te;Re={sellerId:ge.sellerId,sellerName:(q==null?void 0:q.name)||ge.sellerName||"",sellerEmail:(q==null?void 0:q.email)||ge.sellerEmail||"",branch:De||ge.branch||"",branchLabel:(q==null?void 0:q.branchLabel)||ge.branchLabel||"",productId:se.productId,productName:se.productName,category:se.category,orderId:ge.orderKey||I,date:ge.date||new Date().toISOString().slice(0,10),packages:Te,unitsPerPackage:xt,totalUnits:_t,remainingPackages:Te,remainingUnits:_t,totalRivas:ce,totalSanJorge:Me,totalIsla:Ke,unitPriceRivas:(Le==null?void 0:Le.unitPriceRivas)||se.unitPriceRivas||0,unitPriceSanJorge:(Le==null?void 0:Le.unitPriceSanJorge)||se.unitPriceSanJorge||0,unitPriceIsla:(Le==null?void 0:Le.unitPriceIsla)||se.unitPriceIsla||0,grossProfit:Mt,logisticAllocated:nt,vendorMarginPercent:oe.vendorMarginPercent,uVendor:oe.uVendor,uInvestor:oe.uInvestor,uAproximada:we,uNeta:Fe,providerPrice:se.providerPrice,transferDelta:0}}try{me(!0);const Ne=Gt(Se,"inventory_candies_sellers",se.id),De=qe||ht?Gt(mt(Se,"inventory_candies_sellers")):Gt(Se,"inventory_candies_sellers",ye.id),xt=Ar.now(),_t=new Date().toISOString().slice(0,10);let Et=null;await Gs(Se,async Mt=>{const nt=await Mt.get(Ne);if(!nt.exists())throw new Error("Orden origen no existe.");const Ee=nt.data(),we=Number(Ee.remainingPackages||0);if(we<Te)throw new Error("Origen no tiene suficientes paquetes.");let oe=null;if(!qe&&!ht){const R=await Mt.get(De);if(!R.exists())throw new Error("Orden destino no existe.");oe=R.data()}const Fe=Number(Ee.unitsPerPackage||se.unitsPerPackage||0),ce=Fe>0?Te*Fe:0,Me=Number(Ee.transferDelta||0);Mt.update(Ne,{packages:Math.max(0,Number(Ee.packages||0)-Te),remainingPackages:we-Te,...Fe>0?{remainingUnits:Number(Ee.remainingUnits||0)-ce}:{},updatedAt:xt,transferDelta:Me-Te});let Ke=null;if(qe){const R={...Ae,createdAt:xt,updatedAt:xt,remainingPackages:Te,remainingUnits:Number((Ae==null?void 0:Ae.unitsPerPackage)||0)>0?Te*Number((Ae==null?void 0:Ae.unitsPerPackage)||0):Ae==null?void 0:Ae.remainingUnits,transferDelta:0};Mt.set(De,R),Ke=R,Et={id:De.id,...R}}else if(ht&&Re){const R={...Re,createdAt:xt,updatedAt:xt,remainingPackages:Te,remainingUnits:Number(Re.unitsPerPackage||0)>0?Te*Number(Re.unitsPerPackage||0):Re.remainingUnits,transferDelta:0};Mt.set(De,R),Ke=R,Et={id:De.id,...R}}else{const R=oe,L=Number(R.unitsPerPackage||se.unitsPerPackage||0),K=L>0?Te*L:0,re=Number(R.transferDelta||0);Mt.update(De,{packages:Math.max(0,Number(R.packages||0)+Te),remainingPackages:Number(R.remainingPackages||0)+Te,...L>0?{remainingUnits:Number(R.remainingUnits||0)+K}:{},updatedAt:xt,transferDelta:re+Te}),Ke={...R,remainingPackages:Number(R.remainingPackages||0)+Te,remainingUnits:L>0?Number(R.remainingUnits||0)+K:R.remainingUnits,sellerId:R.sellerId,sellerName:R.sellerName,orderId:R.orderId||(ye==null?void 0:ye.id)||"",transferDelta:re+Te}}const P=Gt(mt(Se,"inventory_transfers_candies"));Mt.set(P,{createdAt:xt,date:_t,createdByEmail:(o||"").trim(),createdByName:String(l||"").trim(),productId:String(Ee.productId||""),productName:String(Ee.productName||""),packagesMoved:Te,providerPrice:Number(Ee.providerPrice||0),unitPriceRivas:Number(Ee.unitPriceRivas||0),unitPriceIsla:Number(Ee.unitPriceIsla||0),fromSellerId:String(Ee.sellerId||""),fromSellerName:String(Ee.sellerName||""),fromOrderKey:String(Ee.orderId||se.id||""),fromOrderLabel:String(Ee.orderId||se.id||""),toSellerId:qe?(ue==null?void 0:ue.id)||"":String((Ke==null?void 0:Ke.sellerId)||""),toSellerName:qe?(ue==null?void 0:ue.name)||"":String((Ke==null?void 0:Ke.sellerName)||""),toOrderKey:qe?lt:String((Ke==null?void 0:Ke.orderId)||I||""),toOrderLabel:qe?lt:String((Ke==null?void 0:Ke.orderId)||I||""),fromVendorRowId:se.id,toVendorRowId:qe||ht?De.id:ye.id,comment:B.trim(),destRowWasNew:xe})}),a(Mt=>{const nt=Mt.reduce((Ee,we)=>{if(we.id===se.id){const oe=Number(we.unitsPerPackage||0),Fe=oe>0?Te*oe:0;return Ee.push({...we,packages:Math.max(0,Number(we.packages||0)-Te),remainingPackages:Number(we.remainingPackages||0)-Te,remainingUnits:oe>0?Number(we.remainingUnits||0)-Fe:we.remainingUnits,transferDelta:Number(we.transferDelta||0)-Te}),Ee}if(!qe&&ye&&we.id===ye.id){const oe=Number(we.unitsPerPackage||0),Fe=oe>0?Te*oe:0;return Ee.push({...we,packages:Math.max(0,Number(we.packages||0)+Te),remainingPackages:Number(we.remainingPackages||0)+Te,remainingUnits:oe>0?Number(we.remainingUnits||0)+Fe:we.remainingUnits,transferDelta:Number(we.transferDelta||0)+Te}),Ee}return Ee.push(we),Ee},[]);return Et?[...nt,Et]:nt}),await Nt(),A(Mt=>{const nt={...Mt},Ee=y,we=qe?lt:I;return Ee&&(nt[Ee]=nt[Ee]||{out:0,in:0},nt[Ee].out+=Te),we&&(nt[we]=nt[we]||{out:0,in:0},nt[we].in+=Te),nt}),h(Mt=>{const nt={...Mt};if(se.id&&(nt[se.id]=(nt[se.id]||0)-Te),!xe){const Ee=ht||qe?Et==null?void 0:Et.id:ye==null?void 0:ye.id;Ee&&(nt[Ee]=(nt[Ee]||0)+Te)}return nt}),St(),he(" Traslado realizado.")}catch(Ne){he((Ne==null?void 0:Ne.message)||" Error realizando el traslado.")}finally{me(!1)}};return t?i.jsx("div",{className:"fixed inset-0 bg-black/40 flex items-center justify-center z-[55]",children:i.jsxs("div",{className:"bg-white p-6 rounded shadow-lg w-full max-w-7xl max-h-[90vh] overflow-y-auto text-sm relative",children:[X&&i.jsx("div",{className:"absolute inset-0 bg-white/70 flex items-center justify-center z-50",children:i.jsx("div",{className:"bg-white border rounded-lg px-4 py-3 shadow text-sm font-semibold",children:"Guardando traslado..."})}),i.jsxs("div",{className:"flex items-center justify-between mb-3",children:[i.jsx("h3",{className:"text-xl font-bold",children:"Traslado de paquetes"}),i.jsx("button",{className:"px-3 py-1 rounded bg-gray-200 hover:bg-gray-300",onClick:()=>{e(),St()},type:"button",children:"Cerrar"})]}),i.jsxs("div",{className:"border rounded p-3 bg-gray-50 mb-4",children:[i.jsx("div",{className:"text-sm font-semibold mb-2",children:"Crear traslado (requiere motivo)"}),i.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-3",children:[i.jsxs("div",{children:[i.jsx("label",{className:"block text-sm font-semibold",children:"Pedido origen"}),i.jsxs("select",{className:"w-full border p-2 rounded",value:y,onChange:Te=>{b(Te.target.value),j(""),_(""),E(""),k("0")},disabled:!s,children:[i.jsx("option",{value:"",children:"Selecciona"}),We.map(Te=>{const qe=ie[Te];return i.jsxs("option",{value:Te,children:["Vendedor: ",(qe==null?void 0:qe.sellerName)||"","  Existencias:"," ",(qe==null?void 0:qe.totalRemainingPackages)||"0"," Paquetes - Fecha Orden:"," ",(qe==null?void 0:qe.date)||""]},Te)})]})]}),i.jsxs("div",{children:[i.jsx("label",{className:"block text-sm font-semibold",children:"Producto (desde el pedido origen)"}),i.jsx("input",{type:"text",className:"mt-1 mb-2 w-full border p-2 rounded text-sm",placeholder:"Buscar producto...",value:z,onChange:Te=>U(Te.target.value),disabled:!s||!y}),i.jsxs("select",{className:"w-full border p-2 rounded",value:w,onChange:Te=>{j(Te.target.value),_(""),E(""),k("0")},disabled:!s||!y,children:[i.jsx("option",{value:"",children:"Selecciona"}),Ue.map(Te=>i.jsxs("option",{value:Te.id,children:[Te.productName,"  Existencias:"," ",Number(Te.remainingPackages??Te.packages??0)," Paquetes - Precio Costo: $",Te.providerPrice]},Te.id))]})]}),!ve&&i.jsxs(i.Fragment,{children:[i.jsxs("div",{children:[i.jsx("label",{className:"block text-sm font-semibold",children:"Pedido destino"}),i.jsxs("select",{className:"w-full border p-2 rounded",value:I,onChange:Te=>{_(Te.target.value),E("")},disabled:!s||!w,children:[i.jsx("option",{value:"",children:"Selecciona"}),We.filter(Te=>Te!==y).map(Te=>{const qe=ie[Te];return i.jsxs("option",{value:Te,children:["Vendedor: ",(qe==null?void 0:qe.sellerName)||"","  Existencias:"," ",(qe==null?void 0:qe.totalRemainingPackages)||"0"," - Fecha Orden:"," ",(qe==null?void 0:qe.date)||""]},Te)})]})]}),i.jsxs("div",{children:[i.jsx("label",{className:"block text-sm font-semibold",children:"Producto destino (mismo producto)"}),i.jsxs("select",{className:"w-full border p-2 rounded",value:S,onChange:Te=>E(Te.target.value),disabled:!s||!I||!Ye,children:[i.jsx("option",{value:"",children:"Selecciona"}),bt.map(Te=>i.jsxs("option",{value:Te.id,children:["Tipo: ",Te.category," - ",Te.productName,"  Existencias:"," ",Number(Te.remainingPackages??Te.packages??0),"Paquetes - Precio Costo: $",Te.providerPrice]},Te.id))]}),I&&Ye&&bt.length===0&&i.jsx("div",{className:"text-xs text-red-600 mt-1",children:" El pedido destino no tiene este producto. Si dejas este campo vaco se crear automticamente al moverlo."}),I&&i.jsx("div",{className:"text-xs text-gray-500 mt-1",children:"Este campo es opcional; salo solo si el pedido ya tiene el producto y quieres sumar a esa fila."})]})]}),i.jsxs("div",{className:"flex items-center gap-2",children:[i.jsx("input",{type:"checkbox",className:"h-4 w-4",checked:ve,onChange:Te=>{const qe=Te.target.checked;ae(qe),qe&&(_(""),E(""))},disabled:!s}),i.jsx("span",{className:"text-sm font-semibold",children:"Crear nueva orden destino (independiente)"})]}),ve&&i.jsxs(i.Fragment,{children:[i.jsxs("div",{children:[i.jsx("label",{className:"block text-sm font-semibold",children:"Vendedor destino (nueva orden)"}),i.jsxs("select",{className:"w-full border p-2 rounded",value:Pe,onChange:Te=>ke(Te.target.value),disabled:!s,children:[i.jsx("option",{value:"",children:"Selecciona"}),u.map(Te=>i.jsxs("option",{value:Te.id,disabled:Te.id===At,children:[Te.name,Te.id===At?" (origen)":""]},Te.id))]})]}),i.jsxs("div",{children:[i.jsx("label",{className:"block text-sm font-semibold",children:"Fecha de la nueva orden"}),i.jsx("input",{type:"date",className:"w-full border p-2 rounded",value:O,onChange:Te=>G(Te.target.value),disabled:!s}),i.jsx("div",{className:"text-xs text-gray-500 mt-1",children:"Esta orden ser independiente. Asegrate de usar una fecha que no tenga otro pedido activo para el mismo vendedor."})]})]}),i.jsxs("div",{children:[i.jsx("label",{className:"block text-sm font-semibold",children:"Cantidad paquetes a mover"}),i.jsx("input",{type:"number",min:0,className:"w-full border p-2 rounded",value:T,onChange:Te=>k(Te.target.value),disabled:!s||!w||!ve&&!I})]}),i.jsxs("div",{className:"md:col-span-2",children:[i.jsx("label",{className:"block text-sm font-semibold",children:"Motivo de movida (obligatorio)"}),i.jsx("textarea",{className:"w-full border p-2 rounded resize-y min-h-20",value:B,onChange:Te=>D(Te.target.value),disabled:!s,placeholder:"Ej: Se cambi de ruta por reorganizacin",maxLength:250})]})]}),i.jsxs("div",{className:"flex justify-end gap-2 mt-3",children:[i.jsx("button",{type:"button",className:"px-3 py-2 rounded bg-gray-200 hover:bg-gray-300 disabled:opacity-60",onClick:St,disabled:!s||X,children:"Limpiar"}),i.jsx("button",{type:"button",className:"px-3 py-2 rounded bg-indigo-600 text-white hover:bg-indigo-700 disabled:opacity-60",onClick:Ve,disabled:!s||X||!w||!ve&&!I||Number(T||0)<=0||!B.trim(),children:"Hacer traslado"})]}),pe&&i.jsx("div",{className:"text-sm text-red-600 mt-2",children:pe})]}),i.jsxs("div",{className:"bg-white rounded border overflow-x-auto",children:[i.jsxs("div",{className:"flex flex-col gap-3 md:flex-row md:items-center md:justify-between p-2",children:[i.jsx("div",{className:"text-lg font-semibold",children:"Historial de traslados"}),i.jsxs("div",{className:"flex flex-wrap items-center gap-2 text-sm",children:[i.jsx("span",{className:"text-gray-600",children:"Desde"}),i.jsx("input",{type:"date",className:"border rounded px-2 py-1",value:Y,onChange:Te=>ee(Te.target.value)}),i.jsx("span",{className:"text-gray-600",children:"Hasta"}),i.jsx("input",{type:"date",className:"border rounded px-2 py-1",value:M,onChange:Te=>H(Te.target.value)}),i.jsx("button",{className:"px-3 py-1 rounded bg-gray-200 hover:bg-gray-300",onClick:Nt,disabled:m,type:"button",children:m?"Cargando...":"Recargar"})]})]}),i.jsxs("table",{className:"min-w-[1400px] text-xs md:text-sm",children:[i.jsx("thead",{className:"bg-gray-100",children:i.jsxs("tr",{className:"whitespace-nowrap",children:[i.jsx("th",{className:"p-2 border",children:"Fecha y hora"}),i.jsx("th",{className:"p-2 border",children:"Usuario"}),i.jsx("th",{className:"p-2 border",children:"Producto"}),i.jsx("th",{className:"p-2 border",children:"Cantidad paquetes"}),i.jsx("th",{className:"p-2 border",children:"Precio proveedor"}),i.jsx("th",{className:"p-2 border",children:"Precio Rivas"}),i.jsx("th",{className:"p-2 border",children:"Precio Isla"}),i.jsx("th",{className:"p-2 border",children:"Desde vendedor"}),i.jsx("th",{className:"p-2 border",children:"Desde orden"}),i.jsx("th",{className:"p-2 border",children:"Hacia vendedor"}),i.jsx("th",{className:"p-2 border",children:"Hacia orden"}),i.jsx("th",{className:"p-2 border",children:"Motivo de movida"})]})}),i.jsx("tbody",{children:m?i.jsx("tr",{children:i.jsx("td",{colSpan:12,className:"p-4 text-center",children:"Cargando"})}):jt.length===0?i.jsx("tr",{children:i.jsx("td",{colSpan:12,className:"p-4 text-center",children:"Sin traslados"})}):jt.map(Te=>{var se,ye;const qe=((ye=(se=Te.createdAt)==null?void 0:se.toDate)==null?void 0:ye.call(se))||(Te.createdAt?new Date(Te.createdAt.seconds*1e3):null),ge=qe?`${qe.toISOString().slice(0,10)} ${qe.toISOString().slice(11,19)}`:Te.date||"",q=(Te.createdByName||"").trim()||(Te.createdByEmail||"").trim()||"";return i.jsxs("tr",{className:"text-center whitespace-nowrap",children:[i.jsx("td",{className:"p-2 border",children:ge}),i.jsx("td",{className:"p-2 border",children:q}),i.jsx("td",{className:"p-2 border text-left",children:Te.productName||""}),i.jsx("td",{className:"p-2 border",children:Number(Te.packagesMoved||0)}),i.jsx("td",{className:"p-2 border",children:nB(Te.providerPrice||0)}),i.jsx("td",{className:"p-2 border",children:nB(Te.unitPriceRivas||0)}),i.jsx("td",{className:"p-2 border",children:nB(Te.unitPriceIsla||0)}),i.jsx("td",{className:"p-2 border",children:Te.fromSellerName||""}),i.jsx("td",{className:"p-2 border",children:Te.fromOrderLabel||Te.fromOrderKey||""}),i.jsx("td",{className:"p-2 border",children:Te.toSellerName||""}),i.jsx("td",{className:"p-2 border",children:Te.toOrderLabel||Te.toOrderKey||""}),i.jsx("td",{className:"p-2 border text-left",children:Te.comment||""})]},Te.id)})})]})]}),i.jsx("div",{className:"text-xs text-gray-500 mt-2",children:"Nota: el traslado mueve EXISTENCIA (remainingPackages/remainingUnits) del pedido origen al destino."})]})}):null}const ni=t=>`C$ ${(Number(t)||0).toFixed(2)}`;function vG(t){const e=String(t||"").trim().toUpperCase();if(e.includes("ISLA"))return"ISLA";if(e.includes("JORGE"))return"SAN_JORGE";if(e.includes("RIVAS"))return"RIVAS"}const yi=t=>Math.max(0,Math.floor(Number(t||0))),rf=t=>{const e=Number(t||0);return!isFinite(e)||e<0?0:e},sd=(t,e)=>{const r=rf(e),n=Number(t||0)*(r/100),a=Number(t||0)-n;return{vendorMarginPercent:r,uVendor:n,uInvestor:a}};function WQe({role:t="",sellerCandyId:e="",currentUserEmail:r,roles:n}){const{refreshKey:a,refresh:s}=Oc(),o=n&&n.length?n:t,l=!o||En(o,"admin"),c=En(o,"vendedor_dulces"),u=(r||"").trim().toLowerCase(),d=!l&&c,[f,A]=g.useState(!0),[h,m]=g.useState(""),[p,x]=g.useState([]),[v,y]=g.useState([]),[b,w]=g.useState({}),[j,I]=g.useState([]),_=g.useRef({});g.useEffect(()=>{const ne={};j.forEach(He=>{ne[He.id]=He}),_.current=ne},[j]);const[S,E]=g.useState(!1),[T,k]=g.useState(null),[B,D]=g.useState(""),[X,me]=g.useState(""),[pe,he]=g.useState(""),[ve,ae]=g.useState(""),[Pe,ke]=g.useState("0"),[O,G]=g.useState([]),[z,U]=g.useState(""),[Y,ee]=g.useState(""),[M,H]=g.useState(!1),[te,Ce]=g.useState(!1),[V,We]=g.useState(!1),ie=20,[J,Oe]=g.useState(1),fe=20,[_e,Ue]=g.useState(1),[Ye,At]=g.useState({}),[yt,bt]=g.useState(!1),[Nt,jt]=g.useState({}),[St,Ve]=g.useState({}),[Te,qe]=g.useState(!1),[ge,q]=g.useState({}),[se,ye]=g.useState({}),ue=g.useMemo(()=>p.find(ne=>ne.id===B)||null,[B,p]);ue==null||ue.branch,g.useEffect(()=>{!S||!B||!O.length||G(ne=>ne.map(He=>{const tt=v.find(Er=>Er.id===He.productId)||null,Je=p.find(Er=>Er.id===B)||null,pt=Je==null?void 0:Je.branch,wt=yi(He.packages),Wt=tt?De(tt,pt):Number(He.pricePerPackage||0),Rt=(tt?xt(tt,pt):0)*wt,$t=tt?tt.logisticAllocatedPerPack*wt:Number(He.logisticAllocated||0),Zt=(tt?_t(tt,pt):0)*wt,Dr=Et(B),Yr=He.vendorMarginPercent!=null&&String(He.vendorMarginPercent).trim()!==""?rf(He.vendorMarginPercent):Dr,zr=sd(Rt,Yr);return{...He,pricePerPackage:Wt,totalExpected:Wt*wt,grossProfit:Rt,logisticAllocated:$t,vendorMarginPercent:zr.vendorMarginPercent,uAproximada:Zt,uVendor:zr.uVendor,uInvestor:zr.uInvestor,totalRivas:((tt==null?void 0:tt.unitPriceRivas)||He.unitPriceRivas||0)*wt,totalSanJorge:((tt==null?void 0:tt.unitPriceSanJorge)||He.unitPriceSanJorge||0)*wt,totalIsla:((tt==null?void 0:tt.unitPriceIsla)||He.unitPriceIsla||0)*wt,unitPriceRivas:(tt==null?void 0:tt.unitPriceRivas)||He.unitPriceRivas||0,unitPriceSanJorge:(tt==null?void 0:tt.unitPriceSanJorge)||He.unitPriceSanJorge||0,unitPriceIsla:(tt==null?void 0:tt.unitPriceIsla)||He.unitPriceIsla||0}}))},[S,B,O.length,v,p]);const Le=g.useMemo(()=>!c||!u?null:p.find(ne=>(ne.email||"").trim().toLowerCase()===u)||null,[c,u,p]);g.useMemo(()=>new Set(O.map(ne=>ne.productId)),[O]);const ct=g.useMemo(()=>v.filter(ne=>(b[ne.id]??0)>1).sort((ne,He)=>`${ne.category} ${ne.name}`.localeCompare(`${He.category} ${He.name}`)),[v,b]),ht=g.useMemo(()=>{const ne=z.trim().toLowerCase();return ne?ct.filter(He=>`${He.category??""} ${He.name??""}`.toLowerCase().includes(ne)):ct},[ct,z]),xe=g.useMemo(()=>v.find(ne=>ne.id===ve)||null,[ve,v]),Ae=g.useMemo(()=>c&&Le?j.filter(ne=>ne.sellerId===Le.id):j,[j,c,Le]),Re=async()=>{try{const ne=mt(Se,"inventory_transfers_candies"),He=(Rt,$t,kr,Zt)=>{$t&&(Rt[$t]=Rt[$t]||{out:0,in:0},Rt[$t][kr]+=Zt)},tt=(Rt,$t,kr)=>{const Zt=String($t||"");Zt&&(Rt[Zt]=(Rt[Zt]||0)+kr)},Je={},pt={},wt=_.current,Wt=Rt=>{var Er,Tt;if(Rt.destRowWasNew!=null)return!!Rt.destRowWasNew;const $t=String(Rt.toVendorRowId||"");if(!$t)return!1;const kr=wt[$t];if(!kr)return!1;const Zt=Number(((Er=kr.createdAt)==null?void 0:Er.seconds)??0),Dr=Number(((Tt=Rt.createdAt)==null?void 0:Tt.seconds)??0),Yr=Zt>0&&Dr>0&&Math.abs(Zt-Dr)<=1,zr=Math.max(0,Number(kr.packages||0))===Math.max(0,Number(Rt.packagesMoved||0));return Yr&&zr},Xt=Rt=>{const $t=Rt.data(),kr=Number($t.packagesMoved||0);kr>0&&(He(Je,String($t.fromOrderKey||""),"out",kr),He(Je,String($t.toOrderKey||""),"in",kr),tt(pt,$t.fromVendorRowId,-kr),Wt($t)||tt(pt,$t.toVendorRowId,kr))};if(!c)(await kt(ne)).forEach(Xt);else{const Rt=Yt(ne,cr("fromSellerId","==",e)),$t=Yt(ne,cr("toSellerId","==",e)),[kr,Zt]=await Promise.all([kt(Rt),kt($t)]),Dr=new Set,Yr=zr=>{zr.forEach(Er=>{Dr.has(Er.id)||(Dr.add(Er.id),Xt(Er))})};Yr(kr.docs),Yr(Zt.docs)}jt(Je),Ve(pt)}catch(ne){console.error(ne),jt({}),Ve({})}};g.useEffect(()=>{(async()=>{A(!0),m("");try{const ne=await kt(Yt(mt(Se,"sellers_candies"),In("name","asc"))),He=[];ne.forEach(Er=>{const Tt=Er.data(),pn=Tt.branch||Tt.branchLabel||Tt.route||Tt.sucursal||Tt.location||"";He.push({id:Er.id,name:Tt.name||"",email:Tt.email||"",commissionPercent:Number(Tt.commissionPercent||0),branch:vG(pn),branchLabel:pn})}),x(He);const tt=await kt(Yt(mt(Se,"candy_main_orders"),In("createdAt","desc"))),Je={},pt={},wt=(Er,Tt)=>`${Er}#${String(Tt).padStart(10,"0")}`;tt.forEach(Er=>{var pr;const Tt=Er.data(),pn=Number(((pr=Tt.createdAt)==null?void 0:pr.seconds)??0),un=String(Tt.date||""),Ir=Array.isArray(Tt.items)?Tt.items:[];for(const jr of Ir){const Fn=String(jr.id||jr.productId||"");if(!Fn)continue;const Sn=yi(jr.remainingPackages??jr.remainingPacks??0);Sn>0&&(Je[Fn]=(Je[Fn]||0)+Sn);const yn=Math.max(1,yi(jr.packages??0)),ua=Number(jr.providerPrice??jr.provider_price??jr.priceProvider??jr.costProvider??0),ga=Number(jr.unitPriceRivas||0),Wi=Number(jr.unitPriceSanJorge||0),Xi=Number(jr.unitPriceIsla||0),kl=Number(jr.gainRivas??jr.grossProfitRivas??jr.grossProfit??0),xa=Number(jr.gainSanJorge??jr.grossProfitSanJorge??jr.grossProfit??0),Qn=Number(jr.gainIsla??jr.grossProfitIsla??jr.grossProfit??0),du=Number(jr.logisticAllocated??jr.prorrateo??jr.prorrateoLogistico??jr.gastos??0),Yi=Number(jr.uAproximada??jr.uApprox??jr.netProfit??jr.vendorProfit??jr.gainVendor??0)/yn,Dc=du/yn,Rc={id:Fn,name:String(jr.name||jr.productName||""),category:String(jr.category||""),unitsPerPackage:yi(jr.unitsPerPackage??0),providerPrice:ua,unitPriceRivas:ga,unitPriceSanJorge:Wi,unitPriceIsla:Xi,grossProfitPerPackRivas:kl/yn,grossProfitPerPackSanJorge:xa/yn,grossProfitPerPackIsla:Qn/yn,uApproxPerPackRivas:Yi,uApproxPerPackSanJorge:Yi,uApproxPerPackIsla:Yi,logisticAllocatedPerPack:Dc,masterOrderId:Er.id,key:wt(un,pn)},uc=pt[Fn];(!uc||Rc.key>uc.key)&&(pt[Fn]=Rc)}});const Wt=await kt(Yt(mt(Se,"inventory_candies"),In("createdAt","desc"))),Xt=Er=>{const Tt=Math.max(1,yi(Er.unitsPerPackage||1)),pn=Number(Er.remaining??0);if(Number.isFinite(pn)&&pn>0)return Math.floor(pn/Tt);const un=Number(Er.remainingPackages??0);return Number.isFinite(un)&&un>0?Math.floor(un):0},Rt={};Wt.forEach(Er=>{const Tt=Er.data(),pn=String(Tt.productId||"");if(!pn)return;const un=Xt(Tt);un<=0||(Rt[pn]=(Rt[pn]||0)+un)});const $t={};(Object.keys(Rt).length?Object.keys(Rt):Object.keys(Je)).forEach(Er=>{const Tt=Object.keys(Rt).length?Rt[Er]:Je[Er];$t[Er]=Math.max(0,yi(Tt))}),w($t);const Zt=await kt(c?Yt(mt(Se,"inventory_candies_sellers"),cr("sellerId","==",e),In("createdAt","desc")):Yt(mt(Se,"inventory_candies_sellers"),In("createdAt","desc"))),Dr=Object.keys(pt).map(Er=>{const Tt=pt[Er];return{id:Tt.id,name:Tt.name,category:Tt.category,unitsPerPackage:Tt.unitsPerPackage,providerPrice:Tt.providerPrice,unitPriceRivas:Tt.unitPriceRivas,unitPriceSanJorge:Tt.unitPriceSanJorge,unitPriceIsla:Tt.unitPriceIsla,grossProfitPerPackRivas:Tt.grossProfitPerPackRivas,grossProfitPerPackSanJorge:Tt.grossProfitPerPackSanJorge,grossProfitPerPackIsla:Tt.grossProfitPerPackIsla,uApproxPerPackRivas:Tt.uApproxPerPackRivas,uApproxPerPackSanJorge:Tt.uApproxPerPackSanJorge,uApproxPerPackIsla:Tt.uApproxPerPackIsla,logisticAllocatedPerPack:Tt.logisticAllocatedPerPack,existingPacks:$t[Tt.id]??0,masterOrderId:Tt.masterOrderId}}).sort((Er,Tt)=>`${Er.category} ${Er.name}`.localeCompare(`${Tt.category} ${Tt.name}`));y(Dr);const Yr=[];Zt.forEach(Er=>{const Tt=Er.data(),pn=Object.prototype.hasOwnProperty.call(Tt,"transferDelta"),un=He.find(ua=>ua.id===Tt.sellerId)||null,Ir=rf(Tt.vendorMarginPercent??Tt.vendorMargin??Tt.commissionPercent??(un==null?void 0:un.commissionPercent)??0),pr=Number(Tt.uAproximada??Tt.uApprox??Tt.netProfit??Tt.uAprox??Tt.uApproxTotal??0),jr=Tt.uVendor??Tt.vendorProfit??Tt.gainVendor??0,Fn=Tt.uVendor!=null,Sn=sd(Number(Tt.grossProfit??Tt.gainVendor??0),Ir),yn=Fn?{uAproximada:Number(pr||0),vendorMarginPercent:Ir,uVendor:Number(jr||0),uInvestor:Number(pr||0)-Number(jr||0)}:{uAproximada:Number(pr||0),vendorMarginPercent:Sn.vendorMarginPercent,uVendor:Sn.uVendor,uInvestor:Sn.uInvestor};Yr.push({id:Er.id,sellerId:Tt.sellerId,sellerName:Tt.sellerName||"",orderName:Tt.orderName||"",productId:Tt.productId,productName:Tt.productName||"",category:Tt.category||"",orderId:Tt.orderId||null,packages:Number(Tt.packages||0),unitsPerPackage:Number(Tt.unitsPerPackage||0),totalUnits:Number(Tt.totalUnits||0),remainingPackages:Number(Tt.remainingPackages||0),remainingUnits:Number(Tt.remainingUnits||0),totalRivas:Number(Tt.totalRivas||0),totalSanJorge:Number(Tt.totalSanJorge||0),totalIsla:Number(Tt.totalIsla||0),unitPriceRivas:Number(Tt.unitPriceRivas||0),unitPriceSanJorge:Number(Tt.unitPriceSanJorge||0),unitPriceIsla:Number(Tt.unitPriceIsla||0),grossProfit:Number(Tt.grossProfit??Tt.gainVendor??0),logisticAllocated:Number(Tt.logisticAllocated??Tt.gastos??Tt.gasto??0),vendorMarginPercent:yn.vendorMarginPercent,uAproximada:yn.uAproximada,uVendor:yn.uVendor,uInvestor:yn.uInvestor,vendorProfit:Number(Tt.vendorProfit??yn.uVendor??0),transferDelta:pn&&typeof Tt.transferDelta=="number"?Number(Tt.transferDelta||0):void 0,subtotal:Number(Tt.subtotal||0),providerPrice:Number(Tt.providerPrice||0),date:Tt.date||"",createdAt:Tt.createdAt||Ar.now()})});const zr={};Yr.forEach(Er=>{zr[Er.id]=Er}),_.current=zr,I(Yr),await Re()}catch(ne){console.error(ne),m(" Error cargando datos de vendedores / pedidos.")}finally{A(!1)}})()},[a,t,e]);const lt=(ne,He)=>`${ne}__${He}`,Ne=ne=>ne.orderId||lt(ne.sellerId,ne.date),De=(ne,He)=>He?He==="RIVAS"?ne.unitPriceRivas||0:He==="SAN_JORGE"?ne.unitPriceSanJorge||0:ne.unitPriceIsla||0:ne.unitPriceIsla||ne.unitPriceRivas||ne.unitPriceSanJorge||0,xt=(ne,He)=>He?He==="RIVAS"?ne.grossProfitPerPackRivas||0:He==="SAN_JORGE"?ne.grossProfitPerPackSanJorge||0:ne.grossProfitPerPackIsla||0:ne.grossProfitPerPackIsla||ne.grossProfitPerPackRivas||ne.grossProfitPerPackSanJorge||0,_t=(ne,He)=>He?He==="RIVAS"?ne.uApproxPerPackRivas||0:He==="SAN_JORGE"?ne.uApproxPerPackSanJorge||0:ne.uApproxPerPackIsla||0:ne.uApproxPerPackIsla||ne.uApproxPerPackRivas||ne.uApproxPerPackSanJorge||0,Et=ne=>{const He=p.find(tt=>tt.id===ne)||null;return rf((He==null?void 0:He.commissionPercent)??0)},Mt=ne=>{const He=St[ne.id];return typeof He=="number"&&Number.isFinite(He)?He:typeof ne.transferDelta=="number"?Number(ne.transferDelta||0):0},nt=ne=>{const He=Math.max(0,Number(ne.packages||0)),tt=Mt(ne);return Math.max(0,He+tt)},Ee=ne=>{const He=Math.max(1,yi(ne.unitsPerPackage||1)),tt=Number(ne.remaining??0);if(Number.isFinite(tt)&&tt>0)return Math.floor(tt/He);const Je=Number(ne.remainingPackages??0);return Number.isFinite(Je)&&Je>0?Math.floor(Je):0},we=async(ne,He)=>{const tt=String(ne||"").trim();if(!tt)return{byId:0,byName:0};const Je=await kt(Yt(mt(Se,"inventory_candies"),cr("productId","==",tt)));let pt=0;Je.forEach(Rt=>{pt+=Ee(Rt.data())});const wt=Math.max(0,pt);let Wt=0;const Xt=String(He||"").trim();return wt===0&&Xt&&((await kt(Yt(mt(Se,"inventory_candies"),cr("productName","==",Xt)))).forEach($t=>{Wt+=Ee($t.data())}),Wt=Math.max(0,Wt)),{byId:wt,byName:Wt}},oe=g.useMemo(()=>{const ne=new Map;for(const tt of Ae){const Je=Ne(tt),pt=ne.get(Je)||{orderKey:Je,sellerId:tt.sellerId,sellerName:tt.sellerName,orderName:tt.orderName||"",date:tt.date,totalPackages:0,totalActivePackages:0,totalRemainingPackages:0,totalExpected:0,totalExpectedActive:0,grossProfit:0,grossProfitActive:0,vendorProfit:0,vendorProfitActive:0,gastos:0,gastosActive:0,transferredOut:0,transferredIn:0},wt=Math.max(0,Number(tt.packages||0)),Wt=Math.max(0,Number(tt.remainingPackages||0)),Xt=nt(tt),Rt=wt>0?Xt/wt:1;pt.totalPackages+=wt,pt.totalRemainingPackages+=Wt,pt.totalActivePackages+=Xt;const $t=p.find(Sn=>Sn.id===tt.sellerId)||null,kr=$t==null?void 0:$t.branch,Zt=v.find(Sn=>Sn.id===String(tt.productId))||null,Dr=Zt?De(Zt,kr):Number(kr==="RIVAS"?tt.unitPriceRivas||0:kr==="SAN_JORGE"?tt.unitPriceSanJorge||0:tt.unitPriceIsla||0),Yr=Dr*wt,zr=Dr*Xt;pt.totalExpected+=Number(Yr||0),pt.totalExpectedActive+=Number(zr||0);const Er=Zt?xt(Zt,kr):wt>0?Number(tt.grossProfit||0)/wt:0,Tt=Er*wt,pn=Er*Xt;pt.grossProfit+=Number(Tt||0),pt.grossProfitActive+=Number(pn||0);const un=typeof(Zt==null?void 0:Zt.logisticAllocatedPerPack)=="number"?Number(Zt.logisticAllocatedPerPack||0):(()=>{const Sn=Number(tt.logisticAllocated??tt.gastos??tt.gasto??0),yn=wt>0?wt:Xt||1;return yn>0?Sn/yn:0})(),Ir=un*wt,pr=un*Xt;pt.gastos=(pt.gastos||0)+Number(Ir||0),pt.gastosActive=(pt.gastosActive||0)+Number(pr||0);const jr=Et(tt.sellerId),Fn=sd(Tt,jr);pt.vendorProfit+=Number(Fn.uVendor||0),pt.vendorProfitActive+=Number(Fn.uVendor||0)*Rt,ne.set(Je,pt)}const He=[];for(const tt of ne.values()){const Je=Nt[tt.orderKey]||{out:0,in:0};tt.transferredOut=Je.out||0,tt.transferredIn=Je.in||0,Number.isFinite(tt.totalExpectedActive)||(tt.totalExpectedActive=tt.totalExpected),Number.isFinite(tt.grossProfitActive)||(tt.grossProfitActive=tt.grossProfit),Number.isFinite(tt.vendorProfitActive)||(tt.vendorProfitActive=tt.vendorProfit),Number.isFinite(tt.gastosActive||0)||(tt.gastosActive=tt.gastos),He.push(tt)}return He.sort((tt,Je)=>(Je.date||"").localeCompare(tt.date||"")),He},[Ae,p,Nt,v,St]),Fe=g.useMemo(()=>Math.max(1,Math.ceil(oe.length/ie)),[oe.length]);g.useEffect(()=>{J>Fe&&Oe(Fe)},[Fe]);const ce=g.useMemo(()=>{const ne=(J-1)*ie;return oe.slice(ne,ne+ie)},[oe,J]),Me=()=>Oe(ne=>Math.max(1,ne-1)),Ke=()=>Oe(ne=>Math.min(Fe,ne+1)),P=g.useMemo(()=>{const ne=Y.trim().toLowerCase();return ne?O.filter(He=>{const tt=String(He.productName||"").toLowerCase(),Je=String(He.category||"").toLowerCase();return tt.includes(ne)||Je.includes(ne)}):O},[O,Y]),R=g.useMemo(()=>Math.max(1,Math.ceil(P.length/fe)),[P.length]);g.useEffect(()=>{_e>R&&Ue(R)},[R]);const L=g.useMemo(()=>{const ne=(_e-1)*fe;return P.slice(ne,ne+fe)},[P,_e]),K=g.useMemo(()=>{const ne=new Map;for(const He of L){const tt=(He.category||"Sin categora").trim()||"Sin categora",Je=ne.get(tt)||[];Je.push(He),ne.set(tt,Je)}return Array.from(ne.entries())},[L]),re=ne=>{At(He=>({...He,[ne]:!He[ne]}))},de=()=>Ue(ne=>Math.max(1,ne-1)),Ge=()=>Ue(ne=>Math.min(R,ne+1)),rt=ne=>{q(He=>({...He,[ne]:!0}))},ft=ne=>{q(He=>({...He,[ne]:!1}))},et=ne=>{ye(He=>({...He,[ne]:!0}))},ut=ne=>{ye(He=>({...He,[ne]:!1}))},Ot=ne=>{const He=Math.max(0,Number(ne.packages||0)),tt=Number(ne.transferDelta||0);return Math.max(0,He+tt)},zt=ne=>{const He=Math.max(0,Number(ne.packages||0)),tt=Ot(ne);return He===0?tt>0?1:0:tt/He},Bt=(ne,He)=>Number(He||0)*zt(ne),Lt=ne=>Number(ne.logisticAllocated??ne.logisticAllocated??ne.gastos??ne.gasto??0),Be=ne=>{const He=Bt(ne,Number(ne.totalExpected||0)),tt=Bt(ne,Number(ne.grossProfit||0)),Je=Bt(ne,Lt(ne)),pt=Bt(ne,Number(ne.uVendor||0)),wt=tt-Je-pt;return{totalExpected:He,grossProfit:tt,gastos:Je,uVendor:pt,uNeta:wt}},vt=g.useMemo(()=>O.reduce((ne,He)=>{const tt=Math.max(0,Number(He.packages||0)),Je=Ot(He),pt=Be(He);return ne.totalPackages+=tt,ne.totalActivePackages+=Je,ne.totalExpected+=pt.totalExpected,ne.grossProfit+=pt.grossProfit,ne.gastosTotal+=pt.gastos,ne.uVendor+=pt.uVendor,ne},{totalPackages:0,totalActivePackages:0,totalExpected:0,grossProfit:0,gastosTotal:0,uVendor:0}),[O]),hr=g.useMemo(()=>vt.grossProfit-vt.gastosTotal-vt.uVendor,[vt.grossProfit,vt.gastosTotal,vt.uVendor]),xr=()=>{k(null),D(""),me(""),he(""),ae(""),ke("0"),G([]),U(""),Ue(1),q({}),ye({})},Nr=()=>{m(""),xr(),c&&Le&&D(Le.id);const ne=new Date,He=ne.getFullYear(),tt=String(ne.getMonth()+1).padStart(2,"0"),Je=String(ne.getDate()).padStart(2,"0");me(`${He}-${tt}-${Je}`),he(""),E(!0)},gr=()=>{E(!1)},_r=ne=>{m(""),xr(),k(ne);const[He,tt]=ne.split("__");D(He||""),me(tt||"");const Je=Ae.filter(Rt=>Ne(Rt)===ne),pt=Je[0]||null;he((pt==null?void 0:pt.orderName)||"");const wt=p.find(Rt=>Rt.id===He)||null,Wt=wt==null?void 0:wt.branch,Xt=Je.map(Rt=>{const $t=v.find(Fn=>Fn.id===String(Rt.productId))||null,kr=Number(Rt.unitPriceRivas||($t==null?void 0:$t.unitPriceRivas)||0),Zt=Number(Rt.unitPriceSanJorge||($t==null?void 0:$t.unitPriceSanJorge)||0),Dr=Number(Rt.unitPriceIsla||($t==null?void 0:$t.unitPriceIsla)||0),Yr=Number(Rt.packages||0),zr=Wt==="RIVAS"?kr:Wt==="SAN_JORGE"?Zt:Dr,Er=Number(Rt.totalRivas||0),Tt=Number(Rt.totalSanJorge||0),pn=Number(Rt.totalIsla||0),un=Wt==="RIVAS"?Er:Wt==="SAN_JORGE"?Tt:pn,Ir=rf(Rt.vendorMarginPercent??Et(He)),pr=sd(Number(Rt.grossProfit||0),Ir),jr=Number(Rt.logisticAllocated??Rt.gastos??0)||($t?$t.logisticAllocatedPerPack*Yr:0);return{id:Rt.id,productId:String(Rt.productId||""),productName:Rt.productName||($t==null?void 0:$t.name)||"",category:Rt.category||($t==null?void 0:$t.category)||"",unitsPerPackage:Number(Rt.unitsPerPackage||($t==null?void 0:$t.unitsPerPackage)||0),packages:Yr,totalExpected:un,pricePerPackage:zr,grossProfit:Number(Rt.grossProfit||0),logisticAllocated:jr,vendorMarginPercent:pr.vendorMarginPercent,uAproximada:Number(Rt.uAproximada||0),uVendor:Number(Rt.uVendor??pr.uVendor??0),uInvestor:Number(Rt.uInvestor??pr.uInvestor??0),totalRivas:Er,totalSanJorge:Tt,totalIsla:pn,unitPriceRivas:kr,unitPriceSanJorge:Zt,unitPriceIsla:Dr,providerPrice:Number(Rt.providerPrice||0),remainingPackages:Number(Rt.remainingPackages||0),transferDelta:Mt(Rt)}});G(Xt),E(!0)},Zr=()=>{if(m(""),!B)return m(" Seleccion un vendedor.");if(!X)return m(" Seleccion una fecha.");if(!ve)return m(" Seleccion un producto.");const ne=yi(Pe);if(ne<=0)return m(" Paquetes debe ser > 0.");const He=v.find(zr=>zr.id===ve);if(!He)return m(" Producto no encontrado.");if(O.some(zr=>zr.productId===He.id))return m(" Ese producto ya est agregado al pedido.");const tt=p.find(zr=>zr.id===B)||null,Je=tt==null?void 0:tt.branch,pt=De(He,Je),wt=xt(He,Je),Xt=_t(He,Je)*ne,Rt=pt*ne,$t=wt*ne,kr=He.logisticAllocatedPerPack*ne,Zt=Et(B),Dr=sd($t,Zt),Yr={id:`tmp_${Date.now()}_${Math.random().toString(16).slice(2)}`,productId:He.id,productName:He.name,category:He.category,unitsPerPackage:He.unitsPerPackage,packages:ne,totalExpected:Rt,pricePerPackage:pt,grossProfit:$t,logisticAllocated:kr,providerPrice:He.providerPrice,vendorMarginPercent:Dr.vendorMarginPercent,uAproximada:Xt,uVendor:Dr.uVendor,uInvestor:Dr.uInvestor,totalRivas:(He.unitPriceRivas||0)*ne,totalSanJorge:(He.unitPriceSanJorge||0)*ne,totalIsla:(He.unitPriceIsla||0)*ne,unitPriceRivas:He.unitPriceRivas||0,unitPriceSanJorge:He.unitPriceSanJorge||0,unitPriceIsla:He.unitPriceIsla||0,remainingPackages:ne,transferDelta:0};G(zr=>[Yr,...zr]),ae(""),ke("0"),Ue(1)},Nn=ne=>{G(He=>He.filter(tt=>tt.id!==ne))},en=(ne,He)=>{const tt=Math.max(0,yi(He));G(Je=>Je.map(pt=>{if(pt.id!==ne)return pt;const wt=v.find(pn=>pn.id===pt.productId),Wt=p.find(pn=>pn.id===B)||null,Xt=Wt==null?void 0:Wt.branch,Rt=wt?De(wt,Xt):pt.pricePerPackage||0,kr=(wt?xt(wt,Xt):0)*tt,Zt=wt?wt.logisticAllocatedPerPack*tt:pt.logisticAllocated||0,Yr=(wt?_t(wt,Xt):0)*tt,zr=pt.vendorMarginPercent!=null?pt.vendorMarginPercent:Et(B),Er=sd(kr,zr),Tt=String(pt.id||"").startsWith("tmp_")||Number(pt.remainingPackages||0)===Number(pt.packages||0);return{...pt,packages:tt,pricePerPackage:Rt,totalExpected:Rt*tt,grossProfit:kr,logisticAllocated:Zt,providerPrice:(wt==null?void 0:wt.providerPrice)??pt.providerPrice??Number(pt.providerPrice||0),vendorMarginPercent:Er.vendorMarginPercent,uAproximada:Yr,uVendor:Er.uVendor,uInvestor:Er.uInvestor,totalRivas:((wt==null?void 0:wt.unitPriceRivas)||pt.unitPriceRivas||0)*tt,totalSanJorge:((wt==null?void 0:wt.unitPriceSanJorge)||pt.unitPriceSanJorge||0)*tt,totalIsla:((wt==null?void 0:wt.unitPriceIsla)||pt.unitPriceIsla||0)*tt,remainingPackages:Tt?tt:pt.remainingPackages}}))},Qr=(ne,He)=>{const tt=rf(He);G(Je=>Je.map(pt=>{if(pt.id!==ne)return pt;const wt=v.find(Yr=>Yr.id===pt.productId),Wt=p.find(Yr=>Yr.id===B)||null,Xt=Wt==null?void 0:Wt.branch,Rt=yi(pt.packages),kr=(wt?_t(wt,Xt):0)*Rt,Zt=Number(pt.grossProfit||0),Dr=sd(Zt,tt);return{...pt,vendorMarginPercent:Dr.vendorMarginPercent,uAproximada:kr,uVendor:Dr.uVendor,uInvestor:Dr.uInvestor}}))},wr=async()=>{if(l&&!te)try{Ce(!0),m("");const ne=j;if(!ne.length){m(" No hay documentos para actualizar.");return}const He=Xt=>v.find(Rt=>Rt.id===Xt)||null,tt=Xt=>{const Rt=p.find($t=>$t.id===Xt)||null;return Rt==null?void 0:Rt.branch},Je=(Xt,Rt)=>Math.abs(Number(Xt||0)-Number(Rt||0))>.01;let pt=tu(Se),wt=0,Wt=0;for(const Xt of ne){const Rt=tt(Xt.sellerId)||"ISLA",$t=Math.max(1,Number(Xt.unitsPerPackage||0)||1),kr=Number(Xt.totalUnits||0),Zt=Number(Xt.remainingUnits||0),Yr=Math.max(0,kr-Zt)/$t,zr=Number(Xt.remainingPackages||0),Er=Math.max(0,zr+Yr),Tt=He(String(Xt.productId||"")),pn=Tt&&Er>0?xt(Tt,Rt)*Er:Number(Xt.grossProfit||0),un=Tt&&Er>0?Tt.logisticAllocatedPerPack*Er:Number(Xt.logisticAllocated||0),Ir=Tt?_t(Tt,Rt):0,pr=Er>0?Ir*Er:0,jr=Xt.vendorMarginPercent!=null?rf(Xt.vendorMarginPercent):Et(Xt.sellerId),Fn=sd(pn,jr),Sn=Fn.uVendor,yn=Fn.uInvestor,ua=pn-un-Sn;if(!(Je(Xt.packages,Er)||Xt.uVendor==null||Xt.uNeta==null||Xt.uAproximada==null||Xt.uInvestor==null||Xt.logisticAllocated==null||Je(Xt.uVendor,Sn)||Je(Xt.uNeta,ua)||Je(Xt.uAproximada,pr)||Je(Xt.uInvestor,yn)||Je(Xt.logisticAllocated,un)))continue;const Wi=Gt(Se,"inventory_candies_sellers",Xt.id);pt.update(Wi,{packages:Er,vendorMarginPercent:jr,grossProfit:pn,logisticAllocated:un,uAproximada:pr,uVendor:Sn,uInvestor:yn,uNeta:ua,vendorProfit:Sn,updatedAt:Ar.now()}),wt+=1,Wt+=1,wt>=400&&(await pt.commit(),pt=tu(Se),wt=0)}wt>0&&await pt.commit(),m(` Actualizados ${Wt} documentos.`),s()}catch(ne){console.error(ne),m(" Error actualizando documentos.")}finally{Ce(!1)}},Or=(ne,He,tt="Hoja1")=>{const Je=Qa.book_new(),pt=Qa.aoa_to_sheet(He);Qa.book_append_sheet(Je,pt,tt),V2(Je,ne)},$r=()=>{if(!l){m(" Solo admin puede exportar Excel.");return}const ne=["Vendedor","Sucursal","Fecha","Producto ID","Producto","Categora","Paquetes","Paquetes restantes","Precio paquete","Precio proveedor","Total esperado","U. Bruta","U. Vendedor","U. Neta","P. Rivas","P. San Jorge","P. Isla","Total Rivas","Total San Jorge","Total Isla","Unidades x paquete","vendorMarginPercent","uVendor"],He=p.find(wt=>wt.id===B)||null,tt=(He==null?void 0:He.branch)||vG(He==null?void 0:He.branchLabel)||"",Je=[ne,...O.map(wt=>{const{totalExpected:Wt,grossProfit:Xt,uVendor:Rt,uNeta:$t}=Be(wt);return[(He==null?void 0:He.name)||"",String(tt),X||"",wt.productId,wt.productName,wt.category,Number(wt.packages||0),Number(wt.remainingPackages||0),Number(wt.pricePerPackage||0),Number(wt.providerPrice||0),Number(Wt||0),Number(Xt||0),Number(Rt||0),Number($t||0),Number(wt.unitPriceRivas||0),Number(wt.unitPriceSanJorge||0),Number(wt.unitPriceIsla||0),Number(wt.totalRivas||0),Number(wt.totalSanJorge||0),Number(wt.totalIsla||0),Number(wt.unitsPerPackage||0),Number(wt.vendorMarginPercent||0),Number(wt.uVendor||0)]})],pt=`vendor_order_items_${((He==null?void 0:He.name)||"vendedor").replace(/\s+/g,"_")}_${X||"sin_fecha"}.xlsx`;Or(pt,Je,"Productos")},mr=()=>{const ne=["productId","productName","category","Existentes","Paquetes","vendorMarginPercent","uNeta"],He=v.map(Je=>({id:Je.id,name:Je.name,category:Je.category,existentes:Number(Je.existingPacks||0)})).filter(Je=>Je.existentes>0).sort((Je,pt)=>`${Je.category} ${Je.name}`.localeCompare(`${pt.category} ${pt.name}`)),tt=[ne,...He.map(Je=>[Je.id,Je.name,Je.category,Je.existentes,"","",""])];Or("plantilla_orden_vendedor.xlsx",tt,"Plantilla")},Kr=async ne=>{try{m("");const He=await ne.arrayBuffer(),tt=Vv(He,{type:"array"}),Je=tt.SheetNames||[],pt=tt.Sheets.Plantilla||tt.Sheets.Productos||tt.Sheets[Je[0]];if(!pt)return m(" Archivo sin hojas.");const wt=Qa.sheet_to_json(pt,{header:1,defval:""});if(!wt.length)return m(" Archivo vaco.");const Wt=(wt[0]||[]).map(zr=>String(zr||"").trim().toLowerCase()),Xt=Wt.findIndex(zr=>zr==="productid"||zr==="producto id"||zr==="id"),Rt=Wt.findIndex(zr=>zr==="paquetes"||zr==="packages"),$t=Wt.findIndex(zr=>zr==="vendormarginpercent"||zr==="vendor_margin_percent"||zr==="marginvendorpercent"||zr==="margen"||zr==="margen vendedor"||zr==="margen_del_vendedor");if(Xt<0||Rt<0)return m(" Plantilla invlida: debe tener columnas productId y Paquetes.");if(!B)return m(" Seleccion un vendedor antes de importar.");if(!X)return m(" Seleccion una fecha antes de importar.");const kr=p.find(zr=>zr.id===B)||null,Zt=kr==null?void 0:kr.branch,Dr=Et(B),Yr=[];for(let zr=1;zr<wt.length;zr++){const Er=wt[zr]||[],Tt=String(Er[Xt]||"").trim();if(!Tt)continue;const pn=yi(Er[Rt]);if(pn<=0)continue;const un=v.find(Qn=>Qn.id===Tt);if(!un)continue;const Ir=$t>=0?rf(Er[$t]):0,pr=$t>=0&&String(Er[$t]??"").trim()!==""?Ir:Dr,jr=De(un,Zt),Fn=xt(un,Zt),Sn=jr*pn,yn=Fn*pn,ua=un.logisticAllocatedPerPack*pn,Wi=_t(un,Zt)*pn,Xi=sd(yn,pr),kl=O.find(Qn=>Qn.productId===Tt);if(kl){const Qn=$t>=0&&String(Er[$t]??"").trim()!==""?pr:kl.vendorMarginPercent,du=sd(yn,Qn);G(Fl=>Fl.map(Yi=>Yi.id===kl.id?{...Yi,packages:pn,pricePerPackage:jr,totalExpected:Sn,grossProfit:yn,logisticAllocated:ua,vendorMarginPercent:du.vendorMarginPercent,uAproximada:Wi,uVendor:du.uVendor,uInvestor:du.uInvestor,totalRivas:(un.unitPriceRivas||0)*pn,totalSanJorge:(un.unitPriceSanJorge||0)*pn,totalIsla:(un.unitPriceIsla||0)*pn}:Yi));continue}const xa={id:`tmp_${Date.now()}_${Math.random().toString(16).slice(2)}`,productId:un.id,productName:un.name,category:un.category,unitsPerPackage:un.unitsPerPackage,packages:pn,pricePerPackage:jr,totalExpected:Sn,grossProfit:yn,logisticAllocated:ua,providerPrice:un.providerPrice,vendorMarginPercent:Xi.vendorMarginPercent,uAproximada:Wi,uVendor:Xi.uVendor,uInvestor:Xi.uInvestor,totalRivas:(un.unitPriceRivas||0)*pn,totalSanJorge:(un.unitPriceSanJorge||0)*pn,totalIsla:(un.unitPriceIsla||0)*pn,unitPriceRivas:un.unitPriceRivas||0,unitPriceSanJorge:un.unitPriceSanJorge||0,unitPriceIsla:un.unitPriceIsla||0,remainingPackages:pn};Yr.push(xa)}if(!Yr.length)return m(" No se encontraron filas con Paquetes > 0.");G(zr=>[...Yr,...zr]),Ue(1),m(` Importados ${Yr.length} productos desde plantilla.`)}catch(He){console.error(He),m(" Error importando Excel.")}},or=async()=>{var ne;try{if(m(""),d)return m(" Solo lectura.");if(!B)return m(" Seleccion un vendedor.");if(!X)return m(" Seleccion una fecha.");if(!O.length)return m(" Agreg al menos 1 producto.");const He=p.find(Ir=>Ir.id===B)||null;if(!He)return m(" Vendedor invlido.");const tt=He.branch,Je=T?Ae.filter(Ir=>Ne(Ir)===T):[],pt=String(((ne=Je[0])==null?void 0:ne.orderName)||"").trim(),wt=String(pe||"").trim(),Wt=T?pt!==wt:wt!=="",Xt=Ir=>String(Ir??"").trim(),Rt=new Map;Je.forEach(Ir=>Rt.set(Xt(Ir.productId),Ir));const $t=Ir=>Rt.get(Xt(Ir))||null,kr=Ir=>{const pr=$t(Ir.productId),jr=yi(Ir.packages),Fn=pr?yi(pr.packages):0,Sn=!pr||jr!==Fn,yn=rf(pr?pr.vendorMarginPercent:Ir.vendorMarginPercent),ua=rf(Ir.vendorMarginPercent);return{prev:pr,newPacks:jr,oldPacks:Fn,packsChanged:Sn,marginChanged:pr?yn!==ua:!0}},Zt=T?O.filter(Ir=>{const pr=kr(Ir);return!pr.prev||pr.packsChanged||pr.marginChanged}):O;for(const Ir of Zt){const pr=yi(Ir.packages),jr=T?$t(Ir.productId):null,Fn=jr?yi(jr.packages):0,Sn=pr-Fn;if(Sn>0){let yn=b[Ir.productId]??0;const ua=v.find(ga=>ga.id===Ir.productId)||null;if(Sn>yn&&(ua!=null&&ua.masterOrderId))try{await pF(ua.masterOrderId);const ga=await we(Ir.productId,Ir.productName);yn=ga.byId,w(Wi=>({...Wi,[Ir.productId]:ga.byId}))}catch{}if(Sn>yn){const ga=await we(Ir.productId,Ir.productName);return ga.byId===0&&ga.byName>0?m(` "${Ir.productName}" no tiene inventario por ID (${Ir.productId}). Pero existe por nombre: ${ga.byName} paquetes. Revisa que el productId del inventario coincida con el catlogo.`):m(` "${Ir.productName}" excede existencias de orden maestra. Existentes: ${ga.byId} (faltan ${Sn})`)}}}H(!0);const Dr=Ar.now(),Yr=lt(B,X),zr=Et(B),Er=new Set(O.map(Ir=>String(Ir.id||""))),Tt=T?Je.filter(Ir=>!Er.has(String(Ir.id||""))):[];if(T&&Zt.length===0&&!Tt.length&&!Wt)return H(!1),m(" No hay cambios para guardar.");if(T&&Zt.length===0&&!Tt.length&&Wt){const Ir=tu(Se);Je.forEach(pr=>{Ir.update(Gt(Se,"inventory_candies_sellers",pr.id),{orderName:wt,updatedAt:Ar.now()})}),await Ir.commit(),I(pr=>pr.map(jr=>Ne(jr)===T?{...jr,orderName:wt}:jr)),m(" Pedido guardado."),E(!1),xr(),s();return}if(T){const Ir=[];for(const pr of Tt)await fG(pr.id),Ir.push(pr.id);Ir.length&&I(pr=>pr.filter(jr=>!Ir.includes(jr.id)));for(const pr of O){const jr=$t(pr.productId);if(!jr)continue;const Fn=yi(pr.packages),Sn=yi(jr.packages),yn=Fn-Sn;if(yn<0){const ua=Math.abs(yn),ga=yi(jr.remainingPackages);if(ua>ga)return m(` No pods bajar "${pr.productName}" en ${ua} porque solo quedan ${ga} paquetes restantes.`);await $Qe({vendorInventoryId:jr.id,packagesToReturn:ua})}}}const pn=new Map;let un="";for(const Ir of Zt){const pr=kr(Ir),jr=pr.newPacks-pr.oldPacks;if(pr.packsChanged&&jr>0)try{const{allocations:Fn}=await dG({productId:Ir.productId,packagesToAllocate:jr});pn.set(Ir.productId,Fn||[])}catch{const Sn=v.find(yn=>yn.id===Ir.productId)||null;if(Sn!=null&&Sn.masterOrderId)try{await pF(Sn.masterOrderId);const{allocations:yn}=await dG({productId:Ir.productId,packagesToAllocate:jr});pn.set(Ir.productId,yn||[]);continue}catch{const ua=await we(Ir.productId,Ir.productName);ua.byId===0&&ua.byName>0?un=` "${Ir.productName}" no tiene inventario por ID (${Ir.productId}). Pero existe por nombre: ${ua.byName} paquetes. Revisa que el productId del inventario coincida con el catlogo.`:un=` No hay paquetes disponibles en orden maestra para "${Ir.productName}". Disponibles: ${ua.byId}.`;break}{const yn=await we(Ir.productId,Ir.productName);yn.byId===0&&yn.byName>0?un=` "${Ir.productName}" no tiene inventario por ID (${Ir.productId}). Pero existe por nombre: ${yn.byName} paquetes. Revisa que el productId del inventario coincida con el catlogo.`:un=` No hay paquetes disponibles en orden maestra para "${Ir.productName}". Disponibles: ${yn.byId}.`}break}}if(un)return H(!1),m(un);if(await Gs(Se,async Ir=>{for(const pr of Zt){const jr=kr(pr),Fn=jr.prev;if(T&&Fn&&!jr.packsChanged){const Q=pr.vendorMarginPercent!=null?pr.vendorMarginPercent:zr,Ie=Number(Fn.grossProfit??pr.grossProfit??0),st=Number(Fn.logisticAllocated??pr.logisticAllocated??0),gt=sd(Ie,Q),Pt=Number(Ie||0)-Number(st||0)-Number(gt.uVendor||0),lr=Gt(Se,"inventory_candies_sellers",pr.id);Ir.update(lr,{vendorMarginPercent:gt.vendorMarginPercent,uVendor:gt.uVendor,uInvestor:gt.uInvestor,uNeta:Pt,vendorProfit:gt.uVendor});continue}const Sn=yi(pr.packages),yn=yi(pr.unitsPerPackage),ua=Sn*yn,ga=Fn?yi(Fn.packages):0,Wi=Fn?yi(Fn.remainingPackages):0,Xi=Sn-ga,kl=Fn?Math.max(0,Wi+Xi):Sn,xa=kl*yn,Qn=v.find(Q=>Q.id===pr.productId),du=Qn?De(Qn,tt):Number(pr.pricePerPackage||0),Yi=(Qn?xt(Qn,tt):0)*Sn,Dc=Qn?Qn.logisticAllocatedPerPack*Sn:pr.logisticAllocated||0,uc=(Qn?_t(Qn,tt):0)*Sn,sl=pr.vendorMarginPercent!=null?pr.vendorMarginPercent:zr,fu=sd(Yi,sl),GA=Number(Yi||0)-Number(Dc||0)-Number(fu.uVendor||0),il=((Qn==null?void 0:Qn.unitPriceRivas)||pr.unitPriceRivas||0)*Sn,Mc=((Qn==null?void 0:Qn.unitPriceSanJorge)||pr.unitPriceSanJorge||0)*Sn,Bf=((Qn==null?void 0:Qn.unitPriceIsla)||pr.unitPriceIsla||0)*Sn,co={sellerId:He.id,sellerName:He.name,sellerEmail:He.email||"",branch:He.branch||"",branchLabel:He.branchLabel||"",orderName:String(pe||"").trim(),productId:pr.productId,productName:pr.productName,category:pr.category,orderId:Yr,date:X,createdAt:Dr,packages:Sn,unitsPerPackage:yn,totalUnits:ua,remainingPackages:kl,remainingUnits:xa,totalRivas:il,totalSanJorge:Mc,totalIsla:Bf,unitPriceRivas:(Qn==null?void 0:Qn.unitPriceRivas)||pr.unitPriceRivas||0,unitPriceSanJorge:(Qn==null?void 0:Qn.unitPriceSanJorge)||pr.unitPriceSanJorge||0,unitPriceIsla:(Qn==null?void 0:Qn.unitPriceIsla)||pr.unitPriceIsla||0,grossProfit:Yi,logisticAllocated:Dc,vendorMarginPercent:fu.vendorMarginPercent,uVendor:fu.uVendor,uNeta:GA,uAproximada:uc,uInvestor:fu.uInvestor,providerPrice:Number(pr.providerPrice??(Qn==null?void 0:Qn.providerPrice)??0),vendorProfit:fu.uVendor,transferDelta:Fn?Number(Fn.transferDelta||0):0},zu=pn.get(pr.productId)||[];if(T)if(String(pr.id||"").startsWith("tmp_")){const Q=Gt(mt(Se,"inventory_candies_sellers"));co.masterAllocations=zu,Ir.set(Q,co)}else{const Q=Gt(Se,"inventory_candies_sellers",pr.id);zu.length>0&&(co.masterAllocations=jee(...zu)),Ir.set(Q,co,{merge:!0})}else{const Q=Gt(mt(Se,"inventory_candies_sellers"));co.masterAllocations=zu,Ir.set(Q,co)}}}),T&&Wt){const Ir=new Set(Tt.map(jr=>jr.id)),pr=tu(Se);Je.forEach(jr=>{Ir.has(jr.id)||pr.update(Gt(Se,"inventory_candies_sellers",jr.id),{orderName:wt,updatedAt:Ar.now()})}),await pr.commit(),I(jr=>jr.map(Fn=>Ne(Fn)===T?{...Fn,orderName:wt}:Fn))}m(" Pedido guardado."),E(!1),xr(),s()}catch(He){console.error(He),m(" Error guardando el pedido.")}finally{H(!1)}},dt=async ne=>{try{if(m(""),!l)return m(" Solo admin.");H(!0);const He=Ae.filter(tt=>Ne(tt)===ne);for(const tt of He)await fG(tt.id);m(" Pedido eliminado."),s()}catch(He){console.error(He),m(" Error eliminando pedido.")}finally{H(!1)}},er=Wo.useRef(null),Jt=()=>{var ne;if(d)return m(" Solo lectura.");if(!B)return m(" Seleccion un vendedor.");if(!X)return m(" Seleccion una fecha.");(ne=er.current)==null||ne.click()},ar=async ne=>{var tt;const He=(tt=ne.target.files)==null?void 0:tt[0];ne.target.value="",He&&await Kr(He)},tr=!l,fr=l?12:9;return i.jsxs("div",{className:"p-3 md:p-6",children:[i.jsxs("div",{className:"flex flex-col md:flex-row md:items-center gap-2 md:gap-3 mb-3",children:[i.jsxs("div",{className:"flex-1",children:[i.jsx("h2",{className:"text-lg md:text-2xl font-semibold",children:"rdenes de Vendedor (Dulces)"}),i.jsx("p",{className:"text-xs md:text-sm text-gray-600",children:"Pedidos agrupados por vendedor + fecha. U. Bruta viene de la orden maestra. U. Neta = U. Bruta - Gastos - U. Vendedor."})]}),i.jsxs("div",{className:"flex flex-wrap gap-2",children:[i.jsx(Fc,{onClick:s}),l&&i.jsx("button",{onClick:()=>qe(!0),className:"px-3 py-2 rounded bg-amber-600 text-white text-sm hover:bg-amber-700",children:"Traslados"}),!d&&i.jsx("button",{onClick:Nr,className:"px-3 py-2 rounded bg-blue-600 text-white text-sm hover:bg-blue-700",children:"+ Nuevo pedido"})]})]}),h&&!S&&i.jsx("div",{className:"mb-3 p-2 rounded border text-sm bg-white",children:h}),f?i.jsx("div",{className:"p-4 text-sm text-gray-600",children:"Cargando"}):i.jsxs(i.Fragment,{children:[i.jsxs("div",{className:"hidden md:block bg-white border rounded",children:[i.jsxs("div",{className:"p-3 border-b flex items-center justify-between",children:[i.jsxs("div",{className:"text-sm text-gray-700",children:["Total pedidos: ",i.jsx("b",{children:oe.length})]}),i.jsxs("div",{className:"flex items-center gap-2",children:[l&&i.jsx("button",{className:"px-3 py-2 rounded border text-sm hover:bg-gray-50",onClick:()=>{if(!S){m(" Abr un pedido para exportar productos asociados.");return}$r()},children:"Exportar asociados"}),l&&i.jsx(i.Fragment,{children:i.jsx("button",{className:"px-3 py-2 rounded border text-sm hover:bg-gray-50",onClick:wr,disabled:te,children:te?"Actualizando campos...":"Actualizar campos calculados"})})]})]}),i.jsx("div",{className:"overflow-x-auto",children:i.jsxs("table",{className:"min-w-[1100px] w-full text-sm",children:[i.jsx("thead",{className:"bg-gray-50",children:i.jsxs("tr",{children:[i.jsx("th",{className:"text-left p-2 border-b",children:"Nombre"}),i.jsx("th",{className:"text-left p-2 border-b",children:"Fecha"}),i.jsx("th",{className:"text-left p-2 border-b",children:"Vendedor"}),i.jsx("th",{className:"text-right p-2 border-b",children:"P. Asociados"}),i.jsx("th",{className:"text-right p-2 border-b",children:"P. Restantes"}),l&&i.jsx("th",{className:"text-right p-2 border-b",children:"Total esperado"}),l&&i.jsx("th",{className:"text-right p-2 border-b",children:"U. Bruta"}),l&&i.jsx("th",{className:"text-right p-2 border-b",children:"Gastos"}),i.jsx("th",{className:"text-right p-2 border-b",children:"U. Vendedor"}),i.jsx("th",{className:"text-right p-2 border-b",children:"Trasl. Salida"}),i.jsx("th",{className:"text-right p-2 border-b",children:"Trasl. Entrada"}),i.jsx("th",{className:"text-left p-2 border-b",children:"Acciones"})]})}),i.jsxs("tbody",{children:[ce.map(ne=>i.jsxs("tr",{className:"hover:bg-gray-50",children:[i.jsx("td",{className:"p-2 border-b",children:ne.orderName||""}),i.jsx("td",{className:"p-2 border-b",children:ne.date}),i.jsx("td",{className:"p-2 border-b",children:ne.sellerName}),i.jsx("td",{className:"p-2 border-b text-right",children:ne.totalPackages}),i.jsx("td",{className:"p-2 border-b text-right",children:ne.totalRemainingPackages}),l&&i.jsx("td",{className:"p-2 border-b text-right",children:ni(ne.totalExpectedActive??ne.totalExpected)}),l&&i.jsx("td",{className:"p-2 border-b text-right",children:ni(ne.grossProfitActive??ne.grossProfit)}),l&&i.jsx("td",{className:"p-2 border-b text-right",children:ni((ne.gastosActive??ne.gastos)||0)}),i.jsx("td",{className:"p-2 border-b text-right",children:ni(ne.vendorProfitActive??ne.vendorProfit)}),i.jsx("td",{className:"p-2 border-b text-right",children:ne.transferredOut}),i.jsx("td",{className:"p-2 border-b text-right",children:ne.transferredIn}),i.jsx("td",{className:"p-2 border-b",children:i.jsxs("div",{className:"flex gap-2",children:[i.jsx("button",{className:"px-3 py-1.5 rounded bg-gray-900 text-white text-xs hover:bg-black",onClick:()=>_r(ne.orderKey),children:"Ver / Editar"}),l&&i.jsx("button",{className:"px-3 py-1.5 rounded bg-red-600 text-white text-xs hover:bg-red-700",onClick:()=>{confirm("Eliminar este pedido completo?")&&dt(ne.orderKey)},children:"Eliminar"})]})})]},ne.orderKey)),!ce.length&&i.jsx("tr",{children:i.jsx("td",{className:"p-3 text-sm text-gray-600",colSpan:fr,children:"No hay pedidos."})})]})]})}),i.jsxs("div",{className:"p-3 flex items-center justify-between",children:[i.jsxs("div",{className:"text-xs text-gray-600",children:["Pgina ",J," / ",Fe]}),i.jsxs("div",{className:"flex gap-2",children:[i.jsx("button",{className:"px-3 py-1.5 rounded border text-sm hover:bg-gray-50",onClick:Me,disabled:J<=1,children:""}),i.jsx("button",{className:"px-3 py-1.5 rounded border text-sm hover:bg-gray-50",onClick:Ke,disabled:J>=Fe,children:""})]})]})]}),i.jsxs("div",{className:"md:hidden space-y-2",children:[i.jsxs("div",{className:"bg-white border rounded p-2 flex items-center justify-between",children:[i.jsxs("div",{className:"text-xs text-gray-700",children:["Total pedidos: ",i.jsx("b",{children:oe.length})]}),i.jsxs("div",{className:"text-xs text-gray-600",children:[J,"/",Fe]})]}),ce.map(ne=>i.jsxs("div",{className:"bg-white border rounded",role:"button",tabIndex:0,onClick:()=>_r(ne.orderKey),onKeyDown:He=>{(He.key==="Enter"||He.key===" ")&&(He.preventDefault(),_r(ne.orderKey))},children:[i.jsxs("div",{className:"p-2 flex items-center justify-between",children:[i.jsxs("div",{children:[i.jsx("div",{className:"text-sm font-semibold",children:ne.sellerName}),i.jsxs("div",{className:"text-xs text-gray-600",children:[ne.orderName||"","  ",ne.date]})]}),l&&i.jsx("button",{className:"px-3 py-2 rounded border text-sm text-red-600",onClick:He=>{He.stopPropagation(),confirm("Eliminar este pedido completo?")&&dt(ne.orderKey)},children:"Eliminar"})]}),i.jsx("div",{className:"px-2 pb-2",children:i.jsxs("div",{className:"grid grid-cols-2 gap-2 text-xs",children:[i.jsxs("div",{className:"border rounded p-2",children:[i.jsx("div",{className:"text-gray-600",children:"P. Asociados"}),i.jsx("div",{className:"font-semibold",children:ne.totalPackages})]}),i.jsxs("div",{className:"border rounded p-2",children:[i.jsx("div",{className:"text-gray-600",children:"P. Restantes"}),i.jsx("div",{className:"font-semibold",children:ne.totalRemainingPackages})]}),l&&i.jsxs("div",{className:"border rounded p-2",children:[i.jsx("div",{className:"text-gray-600",children:"Total esperado"}),i.jsx("div",{className:"font-semibold",children:ni(ne.totalExpectedActive??ne.totalExpected)})]}),i.jsxs("div",{className:"border rounded p-2",children:[i.jsx("div",{className:"text-gray-600",children:"U. Vendedor"}),i.jsx("div",{className:"font-semibold",children:ni(ne.vendorProfitActive??ne.vendorProfit)})]})]})})]},ne.orderKey)),!ce.length&&i.jsx("div",{className:"p-3 text-sm text-gray-600 bg-white border rounded",children:"No hay pedidos."}),i.jsxs("div",{className:"flex gap-2",children:[i.jsx("button",{className:"flex-1 px-3 py-2 rounded border text-sm",onClick:Me,disabled:J<=1,children:""}),i.jsx("button",{className:"flex-1 px-3 py-2 rounded border text-sm",onClick:Ke,disabled:J>=Fe,children:""})]})]})]}),S&&i.jsx("div",{className:"fixed inset-0 bg-black/40 flex items-center justify-center z-50 p-3 md:p-6",children:i.jsxs("div",{className:"bg-white w-full max-w-5xl max-h-[90vh] overflow-y-auto rounded shadow relative",children:[M&&i.jsx("div",{className:"absolute inset-0 bg-white/70 flex items-center justify-center z-50",children:i.jsx("div",{className:"text-sm font-semibold",children:"Guardando"})}),i.jsxs("div",{className:"p-3 md:p-5 border-b flex items-center justify-between",children:[i.jsxs("div",{children:[i.jsx("div",{className:"text-lg font-semibold",children:T?"Editar pedido":"Nuevo pedido"}),i.jsxs("div",{className:"text-xs text-gray-600",children:["Nombre: ",pe||""]}),i.jsx("div",{className:"text-xs text-gray-600",children:"U. Bruta viene de Orden Maestra. U. Vendedor e Inversionista se calculan aqu. U. Neta = U. Bruta - Gastos - U. Vendedor."})]}),i.jsxs("div",{className:"flex gap-2",children:[i.jsx("button",{className:"px-3 py-2 rounded border text-sm hover:bg-gray-50",onClick:gr,children:"Cerrar"}),!d&&i.jsx("button",{className:"px-3 py-2 rounded bg-blue-600 text-white text-sm hover:bg-blue-700",onClick:or,children:"Guardar"})]})]}),i.jsxs("div",{className:"p-3 md:p-5 space-y-3",children:[i.jsxs("button",{type:"button",className:"md:hidden w-full px-3 py-2 rounded border text-sm flex items-center justify-between",onClick:()=>We(ne=>!ne),children:[i.jsx("span",{children:"Filtros y KPIs"}),i.jsx("span",{children:V?"":"+"})]}),i.jsxs("div",{className:`${V?"block":"hidden"} md:block space-y-3`,children:[i.jsxs("div",{className:"grid md:grid-cols-3 gap-2",children:[i.jsxs("div",{className:"md:col-span-3",children:[i.jsx("label",{className:"text-xs text-gray-600",children:"Nombre"}),i.jsx("input",{className:"w-full border rounded p-2 text-sm",value:pe,onChange:ne=>he(ne.target.value),placeholder:"Nombre de la orden",disabled:d})]}),i.jsxs("div",{children:[i.jsx("label",{className:"text-xs text-gray-600",children:"Vendedor"}),i.jsxs("select",{className:"w-full border rounded p-2 text-sm",value:B,onChange:ne=>D(ne.target.value),disabled:tr,children:[i.jsx("option",{value:"",children:"-- Seleccionar --"}),p.map(ne=>i.jsxs("option",{value:ne.id,children:[ne.name," ",ne.branch?`(${ne.branch})`:""]},ne.id))]})]}),i.jsxs("div",{children:[i.jsx("label",{className:"text-xs text-gray-600",children:"Fecha"}),i.jsx("input",{type:"date",className:"w-full border rounded p-2 text-sm",value:X,onChange:ne=>me(ne.target.value)})]}),i.jsxs("div",{className:"flex items-end gap-2",children:[i.jsx("button",{className:"flex-1 px-3 py-2 rounded border text-sm hover:bg-gray-50",onClick:mr,children:"Plantilla"}),i.jsx("button",{className:"flex-1 px-3 py-2 rounded border text-sm hover:bg-gray-50",onClick:Jt,children:"Importar Excel"}),i.jsx("input",{ref:er,type:"file",accept:".xlsx,.xls",className:"hidden",onChange:ar})]})]}),i.jsxs("div",{className:"grid grid-cols-2 md:grid-cols-6 gap-2",children:[i.jsxs("div",{className:"border rounded p-2",children:[i.jsx("div",{className:"text-xs text-gray-600",children:"P. asociados"}),i.jsx("div",{className:"text-lg font-semibold",children:vt.totalPackages})]}),l&&i.jsxs(i.Fragment,{children:[i.jsxs("div",{className:"border rounded p-2",children:[i.jsx("div",{className:"text-xs text-gray-600",children:"Total esperado"}),i.jsx("div",{className:"text-lg font-semibold",children:ni(vt.totalExpected)})]}),i.jsxs("div",{className:"border rounded p-2",children:[i.jsx("div",{className:"text-xs text-gray-600",children:"U. Bruta"}),i.jsx("div",{className:"text-lg font-semibold",children:ni(vt.grossProfit)})]})]}),i.jsxs("div",{className:"border rounded p-2",children:[i.jsx("div",{className:"text-xs text-gray-600",children:"U. Vendedor"}),i.jsx("div",{className:"text-lg font-semibold",children:ni(vt.uVendor)})]}),l&&i.jsxs("div",{className:"border rounded p-2",children:[i.jsx("div",{className:"text-xs text-gray-600",children:"U. Neta"}),i.jsx("div",{className:"text-lg font-semibold",children:ni(hr)})]})]})]}),i.jsxs("div",{className:"border rounded p-3 space-y-2",children:[i.jsxs("button",{type:"button",className:"md:hidden w-full px-3 py-2 rounded border text-sm flex items-center justify-between",onClick:()=>bt(ne=>!ne),children:[i.jsx("span",{children:"Agregar producto"}),i.jsx("span",{children:yt?"":"+"})]}),i.jsxs("div",{className:`${yt?"block":"hidden"} md:block space-y-2`,children:[i.jsx("div",{className:"text-sm font-semibold hidden md:block",children:"Agregar producto"}),i.jsxs("div",{className:"grid md:grid-cols-4 gap-2",children:[i.jsxs("div",{className:"md:col-span-2",children:[i.jsx("label",{className:"text-xs text-gray-600",children:"Buscar"}),i.jsx("input",{className:"w-full border rounded p-2 text-sm",value:z,onChange:ne=>U(ne.target.value),placeholder:"Buscar por categora o nombre"})]}),i.jsxs("div",{className:"md:col-span-2",children:[i.jsx("label",{className:"text-xs text-gray-600",children:"Producto"}),i.jsxs("select",{className:"w-full border rounded p-2 text-sm",value:ve,onChange:ne=>ae(ne.target.value),children:[i.jsx("option",{value:"",children:"-- Seleccionar --"}),ht.map(ne=>i.jsxs("option",{value:ne.id,children:[ne.category," - ",ne.name," (exist:"," ",b[ne.id]??0,")"]},ne.id))]})]}),i.jsxs("div",{children:[i.jsx("label",{className:"text-xs text-gray-600",children:"Paquetes"}),i.jsx("input",{className:"w-full border rounded p-2 text-sm",value:Pe,onChange:ne=>ke(ne.target.value),inputMode:"numeric"})]}),i.jsx("div",{className:"flex items-end",children:i.jsx("button",{className:"w-full px-3 py-2 rounded bg-gray-900 text-white text-sm hover:bg-black",onClick:Zr,disabled:!xe,children:"Agregar"})})]})]})]}),i.jsxs("div",{className:"border rounded",children:[i.jsxs("div",{className:"p-3 border-b flex items-center justify-between",children:[i.jsxs("div",{className:"text-sm font-semibold",children:["Productos asociados (",O.length,")"]}),i.jsxs("div",{className:"flex gap-2",children:[i.jsx("input",{className:"border rounded px-2 py-1 text-sm",placeholder:"Buscar producto",value:Y,onChange:ne=>{ee(ne.target.value),Ue(1)}}),l&&i.jsx("button",{className:"px-3 py-2 rounded border text-sm hover:bg-gray-50",onClick:$r,disabled:!O.length,children:"Exportar Excel"})]})]}),i.jsx("div",{className:"hidden md:block overflow-x-auto",children:i.jsxs("table",{className:"min-w-[1400px] w-full text-sm",children:[i.jsx("thead",{className:"bg-gray-50",children:i.jsxs("tr",{children:[i.jsx("th",{className:"text-left p-2 border-b",children:"Categora"}),i.jsx("th",{className:"text-left p-2 border-b",children:"Producto"}),i.jsxs("th",{className:"text-right p-2 border-b",children:["P. Asociados"," "]}),i.jsx("th",{className:"text-right p-2 border-b",children:"P. Restantes"}),l&&i.jsx("th",{className:"text-right p-2 border-b",children:"Precio prov."}),i.jsx("th",{className:"text-right p-2 border-b",children:"Precio/paq"}),i.jsx("th",{className:"text-right p-2 border-b",children:"Total esperado"}),l&&i.jsxs(i.Fragment,{children:[i.jsx("th",{className:"text-right p-2 border-b",children:"U. Bruta"}),i.jsx("th",{className:"text-right p-2 border-b",children:"Gastos"})]}),i.jsx("th",{className:"text-right p-2 border-b",children:"U. Vendedor"}),l&&i.jsx("th",{className:"text-right p-2 border-b",children:"U. Neta"}),i.jsx("th",{className:"text-right p-2 border-b",children:"Margen (%)"}),i.jsx("th",{className:"text-left p-2 border-b",children:"Acciones"})]})}),i.jsxs("tbody",{children:[L.map(ne=>{const{totalExpected:He,grossProfit:tt,gastos:Je,uVendor:pt,uNeta:wt}=Be(ne);return i.jsxs("tr",{className:"hover:bg-gray-50",children:[i.jsx("td",{className:"p-2 border-b",children:ne.category}),i.jsx("td",{className:"p-2 border-b",children:ne.productName}),i.jsx("td",{className:"p-2 border-b text-right",children:d?i.jsx("span",{children:ne.packages}):ge[ne.id]?i.jsx("input",{className:"w-20 border rounded p-1 text-right",value:String(ne.packages),onChange:Wt=>en(ne.id,Wt.target.value),onBlur:()=>ft(ne.id),onKeyDown:Wt=>{(Wt.key==="Enter"||Wt.key==="Escape")&&ft(ne.id)},inputMode:"numeric",autoFocus:!0}):i.jsxs("div",{className:"flex items-center justify-end gap-2",children:[i.jsx("span",{children:ne.packages}),i.jsx("button",{type:"button",className:"text-xs text-gray-600 hover:text-gray-900",onClick:()=>rt(ne.id),"aria-label":"Editar paquetes",children:""})]})}),i.jsx("td",{className:"p-2 border-b text-right",children:ne.remainingPackages}),l&&i.jsx("td",{className:"p-2 border-b text-right",children:ni(ne.providerPrice||0)}),i.jsx("td",{className:"p-2 border-b text-right",children:ni(ne.pricePerPackage)}),i.jsx("td",{className:"p-2 border-b text-right",children:ni(He)}),l&&i.jsxs(i.Fragment,{children:[i.jsx("td",{className:"p-2 border-b text-right",children:ni(tt)}),i.jsx("td",{className:"p-2 border-b text-right",children:ni(Je)})]}),i.jsx("td",{className:"p-2 border-b text-right",children:ni(pt)}),l&&i.jsx("td",{className:"p-2 border-b text-right",children:ni(wt)}),i.jsx("td",{className:"p-2 border-b text-right",children:d?i.jsxs("span",{children:[Number(ne.vendorMarginPercent??Et(B)).toFixed(3),"%"]}):se[ne.id]?i.jsx("input",{type:"number",step:"0.001",min:0,className:"w-20 border rounded p-1 text-right",value:String(ne.vendorMarginPercent??Et(B)),onChange:Wt=>Qr(ne.id,Wt.target.value),onBlur:()=>ut(ne.id),onKeyDown:Wt=>{(Wt.key==="Enter"||Wt.key==="Escape")&&ut(ne.id)},inputMode:"decimal",autoFocus:!0}):i.jsxs("div",{className:"flex items-center justify-end gap-2",children:[i.jsxs("span",{children:[Number(ne.vendorMarginPercent??Et(B)).toFixed(3),"%"]}),i.jsx("button",{type:"button",className:"text-xs text-gray-600 hover:text-gray-900",onClick:()=>et(ne.id),"aria-label":"Editar margen",children:""})]})}),i.jsx("td",{className:"p-2 border-b",children:!d&&i.jsx("button",{className:"px-3 py-1.5 rounded bg-red-600 text-white text-xs hover:bg-red-700",onClick:()=>{confirm("Eliminar este producto?")&&Nn(ne.id)},children:""})})]},ne.id)}),!L.length&&i.jsx("tr",{children:i.jsx("td",{className:"p-3 text-sm text-gray-600",colSpan:l?13:9,children:"No hay productos asociados."})})]})]})}),i.jsxs("div",{className:"md:hidden p-3 space-y-2",children:[K.map(([ne,He])=>{const tt=!!Ye[ne];return i.jsxs("div",{className:"border rounded",children:[i.jsxs("button",{type:"button",className:"w-full px-3 py-2 flex items-center justify-between text-sm",onClick:()=>re(ne),children:[i.jsx("span",{className:"font-semibold",children:ne}),i.jsxs("span",{className:"text-xs text-gray-600",children:[He.length," ",He.length===1?"producto":"productos"]})]}),tt&&i.jsx("div",{className:"px-3 pb-3 space-y-2",children:He.map(Je=>{const{totalExpected:pt,grossProfit:wt,gastos:Wt,uVendor:Xt,uNeta:Rt}=Be(Je);return i.jsxs("div",{className:"border rounded p-2 text-xs space-y-2",children:[i.jsx("div",{className:"font-semibold text-sm",children:Je.productName}),i.jsxs("div",{className:"grid grid-cols-2 gap-2",children:[i.jsxs("div",{children:[i.jsx("div",{className:"text-gray-600",children:"Paquetes"}),d?i.jsx("div",{className:"font-semibold",children:Je.packages}):ge[Je.id]?i.jsx("input",{className:"w-full border rounded p-1 text-right",value:String(Je.packages),onChange:$t=>en(Je.id,$t.target.value),onBlur:()=>ft(Je.id),onKeyDown:$t=>{($t.key==="Enter"||$t.key==="Escape")&&ft(Je.id)},inputMode:"numeric",autoFocus:!0}):i.jsxs("div",{className:"flex items-center justify-end gap-2",children:[i.jsx("span",{className:"font-semibold",children:Je.packages}),i.jsx("button",{type:"button",className:"text-xs text-gray-600 hover:text-gray-900",onClick:()=>rt(Je.id),"aria-label":"Editar paquetes",children:""})]})]}),i.jsxs("div",{children:[i.jsx("div",{className:"text-gray-600",children:"Restantes"}),i.jsx("div",{className:"font-semibold",children:Je.remainingPackages})]}),i.jsxs("div",{children:[i.jsx("div",{className:"text-gray-600",children:"Precio/paq"}),i.jsx("div",{className:"font-semibold",children:ni(Je.pricePerPackage)})]}),i.jsxs("div",{children:[i.jsx("div",{className:"text-gray-600",children:"Total esperado"}),i.jsx("div",{className:"font-semibold",children:ni(pt)})]}),l&&i.jsxs(i.Fragment,{children:[i.jsxs("div",{children:[i.jsx("div",{className:"text-gray-600",children:"U. Bruta"}),i.jsx("div",{className:"font-semibold",children:ni(wt)})]}),i.jsxs("div",{children:[i.jsx("div",{className:"text-gray-600",children:"Gastos"}),i.jsx("div",{className:"font-semibold",children:ni(Wt)})]})]}),i.jsxs("div",{children:[i.jsx("div",{className:"text-gray-600",children:"U. Vendedor"}),i.jsx("div",{className:"font-semibold",children:ni(Xt)})]}),l&&i.jsxs("div",{children:[i.jsx("div",{className:"text-gray-600",children:"U. Neta"}),i.jsx("div",{className:"font-semibold",children:ni(Rt)})]})]}),i.jsxs("div",{className:"flex items-center gap-2",children:[i.jsxs("div",{className:"flex-1",children:[i.jsx("div",{className:"text-gray-600",children:"Margen (%)"}),d?i.jsxs("div",{className:"font-semibold",children:[Number(Je.vendorMarginPercent??Et(B)).toFixed(3),"%"]}):se[Je.id]?i.jsx("input",{type:"number",step:"0.001",min:0,className:"w-full border rounded p-1 text-right",value:String(Je.vendorMarginPercent??Et(B)),onChange:$t=>Qr(Je.id,$t.target.value),onBlur:()=>ut(Je.id),onKeyDown:$t=>{($t.key==="Enter"||$t.key==="Escape")&&ut(Je.id)},inputMode:"decimal",autoFocus:!0}):i.jsxs("div",{className:"flex items-center justify-end gap-2",children:[i.jsxs("span",{className:"font-semibold",children:[Number(Je.vendorMarginPercent??Et(B)).toFixed(3),"%"]}),i.jsx("button",{type:"button",className:"text-xs text-gray-600 hover:text-gray-900",onClick:()=>et(Je.id),"aria-label":"Editar margen",children:""})]})]}),!d&&i.jsx("button",{className:"px-3 py-2 rounded bg-red-600 text-white text-xs",onClick:()=>{confirm("Eliminar este producto?")&&Nn(Je.id)},children:""})]})]},Je.id)})})]},ne)}),!L.length&&i.jsx("div",{className:"p-3 text-sm text-gray-600 text-center",children:"No hay productos asociados."})]}),i.jsxs("div",{className:"p-3 flex items-center justify-between",children:[i.jsxs("div",{className:"text-xs text-gray-600",children:["Pgina items ",_e," / ",R]}),i.jsxs("div",{className:"flex gap-2",children:[i.jsx("button",{className:"px-3 py-1.5 rounded border text-sm hover:bg-gray-50",onClick:de,disabled:_e<=1,children:""}),i.jsx("button",{className:"px-3 py-1.5 rounded border text-sm hover:bg-gray-50",onClick:Ge,disabled:_e>=R,children:""})]})]})]}),i.jsxs("div",{className:"flex flex-col md:flex-row gap-2 md:items-center md:justify-between",children:[i.jsx("div",{className:"text-xs text-gray-600",children:T?i.jsxs(i.Fragment,{children:["Editando: ",i.jsx("b",{children:T})]}):i.jsx(i.Fragment,{children:"Nuevo pedido (an no guardado)"})}),i.jsxs("div",{className:"flex gap-2",children:[i.jsx("button",{className:"px-3 py-2 rounded border text-sm hover:bg-gray-50",onClick:gr,children:"Cancelar"}),!d&&i.jsx("button",{className:"px-3 py-2 rounded bg-blue-600 text-white text-sm hover:bg-blue-700",onClick:or,children:"Guardar pedido"})]})]}),h&&i.jsx("div",{className:"text-sm text-gray-700",children:h})]})]})}),i.jsx(zQe,{open:Te,onClose:()=>qe(!1),orders:oe,rows:j,setRows:I,isAdmin:l,currentUserEmail:r||"",currentUserName:"",sellerCandyId:e,sellers:p,products:v,transferAgg:Nt,setTransferAgg:jt,setTransferRowDeltas:Ve})]})}const na=t=>Math.max(0,Math.floor(Number(t)||0)),Lb=t=>Math.round(t||0);function Rse(t){const e=Math.max(1,na(t.unitsPerPackage||1)),r=na(t.totalUnits||0),n=na(t.quantity||0),a=na(t.packages||0);return r>0?r:n>0?n:a>0?a*e:0}function XQe(t){const e=Number(t.remaining);return Number.isFinite(e)&&e>0?Math.floor(e):Rse(t)}function yG(t){const e=Number(t.remainingPackages);if(Number.isFinite(e))return Math.max(0,Math.floor(e));const r=Math.max(1,na(t.unitsPerPackage||1)),n=XQe(t);return Math.max(0,Math.floor(n/r))}function YQe(t){const e=Math.max(1,na(t.unitsPerPackage||1)),r=Rse(t);return Math.max(0,Math.floor(r/e))}function Ub(t){return String(t??"").trim().toLowerCase().replace(/\s+/g," ")}function Lf(t){const e=String(t??"").trim();if(!e)return 0;const r=e.replace(/,/g,"."),n=Number(r);return Number.isFinite(n)?n:0}function Th(t,e){const r={};Object.keys(t||{}).forEach(n=>r[Ub(n)]=t[n]);for(const n of e){const a=r[Ub(n)];if(a!=null&&String(a).trim()!=="")return a}}function ep(t,e,r){const n=t*e,a=Math.min(Math.max(r.marginR,0),99.9)/100,s=Math.min(Math.max(r.marginSJ,0),99.9)/100,o=Math.min(Math.max(r.marginIsla,0),99.9)/100,l=e>0&&a<1?n/(1-a):n,c=e>0&&s<1?n/(1-s):n,u=e>0&&o<1?n/(1-o):n,d=l-n,f=c-n,A=u-n,h=e>0?Lb(l/e):0,m=e>0?Lb(c/e):0,p=e>0?Lb(u/e):0;return{subtotal:n,totalRivas:l,totalSanJorge:c,totalIsla:u,gainRivas:d,gainSanJorge:f,gainIsla:A,unitPriceRivas:h,unitPriceSanJorge:m,unitPriceIsla:p}}function JQe(t){return Number(t.gainRivas||0)}function ZQe(t){return Number(t.gainIsla||0)}function aB(t,e,r){const n=JQe(t),a=ZQe(t),s=Number(t.subtotal||0),o=e>0&&r>0?e*s/r:0;return{...t,grossProfit:n,grossProfitIsla:a,logisticAllocated:o}}function eVe(){const{refreshKey:t,refresh:e}=Oc(),[r,n]=g.useState(""),[a,s]=g.useState(!0),[o,l]=g.useState(!1),[c,u]=g.useState(!1),[d,f]=g.useState(!1),[A,h]=g.useState([]),[m,p]=g.useState(!1),[x,v]=g.useState([]),[y,b]=g.useState({}),[w,j]=g.useState(!1),[I,_]=g.useState(null),[S,E]=g.useState(""),[T,k]=g.useState(""),[B,D]=g.useState("20"),[X,me]=g.useState("15"),[pe,he]=g.useState("30"),[ve,ae]=g.useState("0"),[Pe,ke]=g.useState([]),[O,G]=g.useState({}),[z,U]=g.useState({}),[Y,ee]=g.useState({}),[M,H]=g.useState({}),te=Be=>G(vt=>({...vt,[Be]:!0})),Ce=Be=>G(vt=>({...vt,[Be]:!1})),V=Be=>U(vt=>({...vt,[Be]:!0})),We=Be=>U(vt=>({...vt,[Be]:!1})),ie=Be=>ee(vt=>({...vt,[Be]:!0})),J=Be=>ee(vt=>({...vt,[Be]:!1})),Oe=Be=>H(vt=>({...vt,[Be]:!0})),fe=Be=>H(vt=>({...vt,[Be]:!1})),_e=g.useRef(new Set),[Ue,Ye]=g.useState(""),[At,yt]=g.useState(""),[bt,Nt]=g.useState(""),[jt,St]=g.useState("1"),[Ve,Te]=g.useState("0"),[qe,ge]=g.useState("DATOS"),[q,se]=g.useState(""),[ye,ue]=g.useState(1),Le=15,ct=g.useMemo(()=>Math.max(1,Math.ceil(x.length/Le)),[x.length]);g.useEffect(()=>ue(1),[x.length]);const ht=g.useMemo(()=>{const Be=(ye-1)*Le;return x.slice(Be,Be+Le)},[x,ye]),xe=g.useMemo(()=>{const Be=new Set;for(const vt of A){const hr=String(vt.category||"").trim();hr&&Be.add(hr)}return Array.from(Be).sort((vt,hr)=>vt.localeCompare(hr,"es"))},[A]);g.useEffect(()=>{!Ue&&xe.length>0&&Ye(xe[0])},[xe]);const Ae=async()=>{p(!0);try{const Be=await kt(Yt(mt(Se,"products_candies"),In("createdAt","desc"))),vt=[];Be.forEach(hr=>{const xr=hr.data();vt.push({id:hr.id,name:String(xr.name??"").trim(),category:String(xr.category??"").trim()||"Caramelo",providerPrice:Number(xr.providerPrice??0),unitsPerPackage:Number(xr.unitsPerPackage??1)})}),h(vt)}catch(Be){console.error(Be),n(" Error cargando catlogo de dulces.")}finally{p(!1)}};g.useEffect(()=>{Ae()},[t]);const Re=g.useMemo(()=>(Ue.trim().length>0?A.filter(vt=>vt.category===Ue):A).sort((vt,hr)=>vt.name.localeCompare(hr.name,"es")),[A,Ue]);g.useEffect(()=>{if(!At){Nt(""),St("1");return}const Be=A.find(vt=>vt.id===At);Be&&(Nt(String(Be.providerPrice??0)),St(String(Be.unitsPerPackage??1)))},[At,A]);const lt=()=>{_(null),E(""),k(""),ke([]),G({}),U({}),ee({}),H({}),_e.current=new Set,Ye(xe[0]||""),yt(""),Nt(""),Te("0"),St("1"),D("20"),me("15"),he("30"),ae("0"),ge("DATOS"),se("")},Ne=()=>{if(n(""),!At){n("Selecciona un producto del catlogo.");return}const Be=A.find(en=>en.id===At);if(!Be){n("Producto de catlogo no encontrado (refresca).");return}if(I&&!_e.current.has(Be.id)){n(" En edicin no se pueden agregar productos nuevos. Solo ajustar los existentes.");return}const vt=Number(Be.providerPrice||0),hr=na(Ve||0),xr=na(Be.unitsPerPackage||0);if(vt<0){n("El precio proveedor no puede ser negativo.");return}if(hr<=0){n("Los paquetes deben ser mayor que 0.");return}if(xr<=0){n("Las unidades por paquete deben ser mayor que 0.");return}const Nr=Number(B||0),gr=Number(X||0),_r=Number(pe||0),Zr=ep(vt,hr,{marginR:Nr,marginSJ:gr,marginIsla:_r});if(Pe.find(en=>en.id===Be.id))ke(en=>en.map(Qr=>{if(Qr.id!==Be.id)return Qr;const wr=na(Qr.packages||0)+hr,Or=ep(vt,wr,{marginR:Number(Qr.marginRivas??Nr),marginSJ:Number(Qr.marginSanJorge??gr),marginIsla:Number(Qr.marginIsla??_r)}),mr=na(Qr.remainingPackages??Qr.packages)+hr;return{...Qr,providerPrice:vt,unitsPerPackage:xr,packages:wr,remainingPackages:mr,...Or}}));else{const en={id:Be.id,name:Be.name,category:Be.category,providerPrice:vt,packages:hr,unitsPerPackage:xr,marginRivas:Nr,marginSanJorge:gr,marginIsla:_r,subtotal:Zr.subtotal,totalRivas:Zr.totalRivas,totalSanJorge:Zr.totalSanJorge,totalIsla:Zr.totalIsla,gainRivas:Zr.gainRivas,gainSanJorge:Zr.gainSanJorge,gainIsla:Zr.gainIsla,unitPriceRivas:Zr.unitPriceRivas,unitPriceSanJorge:Zr.unitPriceSanJorge,unitPriceIsla:Zr.unitPriceIsla,remainingPackages:hr};ke(Qr=>[...Qr,en])}yt(""),Te("0"),ge("ITEMS")},De=Be=>{ke(vt=>vt.filter(hr=>hr.id!==Be))},xt=(Be,vt,hr)=>{ke(xr=>xr.map(Nr=>{if(Nr.id!==Be)return Nr;let gr={...Nr};if(vt==="packages"&&(gr.packages=na(hr||0)),vt==="unitsPerPackage"&&(gr.unitsPerPackage=na(hr||0)),vt==="marginRivas"&&(gr.marginRivas=Number(hr||0)),vt==="marginIsla"&&(gr.marginIsla=Number(hr||0)),vt==="marginSanJorge"&&(gr.marginSanJorge=Number(hr||0)),vt==="packages"||vt==="marginRivas"||vt==="marginIsla"||vt==="marginSanJorge"){const _r=ep(gr.providerPrice,gr.packages,{marginR:Number(gr.marginRivas||0),marginSJ:Number(gr.marginSanJorge||0),marginIsla:Number(gr.marginIsla||0)});gr={...gr,..._r}}return(gr.remainingPackages===void 0||gr.remainingPackages===null)&&(gr.remainingPackages=gr.packages),gr}))},_t=g.useMemo(()=>{const Be=Pe.reduce((gr,_r)=>gr+na(_r.packages),0),vt=Pe.reduce((gr,_r)=>gr+Number(_r.subtotal||0),0),hr=Pe.reduce((gr,_r)=>gr+Number(_r.totalRivas||0),0),xr=Pe.reduce((gr,_r)=>gr+Number(_r.totalSanJorge||0),0),Nr=Pe.reduce((gr,_r)=>gr+Number(_r.totalIsla||0),0);return{totalPackages:Be,subtotal:vt,totalRivas:hr,totalSanJorge:xr,totalIsla:Nr}},[Pe]),Et=g.useMemo(()=>{const Be=Math.max(0,Lf(ve||0)),vt=Number(_t.subtotal||0),hr=Pe.map(_r=>aB(_r,Be,vt)),xr=hr.reduce((_r,Zr)=>_r+Number(Zr.grossProfit||0),0),Nr=hr.reduce((_r,Zr)=>_r+Number(Zr.grossProfitIsla||0),0),gr=hr.reduce((_r,Zr)=>_r+Number(Zr.logisticAllocated||0),0);return{items:hr,logisticsTotal:Be,grossTotal:xr,grossIslaTotal:Nr,logisticAllocatedTotal:gr}},[Pe,ve,_t.subtotal]),Mt=g.useMemo(()=>{const Be=String(q||"").trim().toLowerCase();return Be?Et.items.filter(vt=>{const hr=String(vt.name||"").toLowerCase(),xr=String(vt.category||"").toLowerCase();return hr.includes(Be)||xr.includes(Be)}):Et.items},[Et.items,q]),[nt,Ee]=g.useState(1),we=15,oe=g.useMemo(()=>Math.max(1,Math.ceil(Mt.length/we)),[Mt.length]);g.useEffect(()=>Ee(1),[Mt.length]);const Fe=g.useMemo(()=>{const Be=(nt-1)*we;return Mt.slice(Be,Be+we)},[Mt,nt]),[ce,Me]=g.useState({});g.useEffect(()=>Me({}),[Mt.length]);const[Ke,P]=g.useState({});g.useEffect(()=>{const Be={};for(const vt of x)vt&&vt.id&&(Be[vt.id]=!1);P(Be)},[x]);const R=g.useMemo(()=>({totalPackages:_t.totalPackages,subtotalCosto:_t.subtotal,esperadoRivas:_t.totalRivas,esperadoIsla:_t.totalIsla,gastosLogisticos:Et.logisticsTotal,utilidadBrutaRivas:Et.grossTotal,utilidadBrutaIsla:Et.grossIslaTotal}),[_t,Et]),L=()=>{if(n(""),!A.length){n(" No hay catlogo cargado para generar plantilla.");return}const Be=Number(B||0),vt=Number(pe||0),hr=A.slice().sort((Nn,en)=>Nn.name.localeCompare(en.name,"es")).map(Nn=>({Producto:Nn.name,Paquetes:"","Margen rivas":Be,"Margen Isla":vt,"P. unidad Rivas":"","P. unidad Isla":""})),xr=[{Campo:"Gastos logisticos",Valor:Lf(ve||0)}],Nr=Qa.book_new(),gr=Qa.json_to_sheet(hr),_r=Qa.json_to_sheet(xr);Qa.book_append_sheet(Nr,gr,"Productos"),Qa.book_append_sheet(Nr,_r,"Config");const Zr=T&&String(T).trim()||new Date().toISOString().slice(0,10);V2(Nr,`plantilla_orden_maestra_${Zr}.xlsx`)},K=()=>{if(n(""),!Et.items.length){n(" No hay items para exportar.");return}const Be=Et.items.slice().sort((gr,_r)=>gr.name.localeCompare(_r.name,"es")).map(gr=>({Categora:gr.category,Producto:gr.name,Paquetes:na(gr.packages),"Paquetes restantes":na(gr.remainingPackages??gr.packages),"Und x Paquete":na(gr.unitsPerPackage),"Precio proveedor":Number(gr.providerPrice||0),Facturado:Number(gr.subtotal||0),"Esperado Rivas":Number(gr.totalRivas||0),"Esperado Isla":Number(gr.totalIsla||0),"MV Rivas":Number(gr.marginRivas||0),"MV Isla":Number(gr.marginIsla||0),"Utilidad Bruta":Number(gr.grossProfit||0),"Utilidad Bruta Isla":Number(gr.grossProfitIsla||0),"Prorrateo logistico":Number(gr.logisticAllocated||0),"Precio Rivas":Number(gr.unitPriceRivas||0),"Precio Isla":Number(gr.unitPriceIsla||0)})),vt=[{KPI:"Paquetes totales",Valor:R.totalPackages},{KPI:"Subtotal costo",Valor:R.subtotalCosto},{KPI:"Esperado Rivas",Valor:R.esperadoRivas},{KPI:"Esperado Isla",Valor:R.esperadoIsla},{KPI:"Gastos logsticos",Valor:R.gastosLogisticos},{KPI:"Utilidad Bruta Rivas",Valor:R.utilidadBrutaRivas},{KPI:"Utilidad Bruta Isla",Valor:R.utilidadBrutaIsla}],hr=Qa.book_new();Qa.book_append_sheet(hr,Qa.json_to_sheet(Be),"Productos"),Qa.book_append_sheet(hr,Qa.json_to_sheet(vt),"Resumen");const xr=T&&String(T).trim()||new Date().toISOString().slice(0,10),Nr=S&&String(S).trim()||`Orden_${xr}`;V2(hr,`orden_maestra_${Nr.replace(/[^\w\-]+/g,"_")}_${xr}.xlsx`)},re=g.useRef(null),[de,Ge]=g.useState(!1),rt=()=>{var Be;if(!A.length){n(" Catlogo no cargado todava. Esper y prob de nuevo.");return}(Be=re.current)==null||Be.click()},ft=async Be=>{var hr;const vt=(hr=Be.target.files)==null?void 0:hr[0];if(vt){Be.target.value="",Ge(!0),n("");try{const xr=await vt.arrayBuffer(),Nr=Vv(xr,{type:"array"}),gr=Nr.SheetNames||[],_r=Nr.Sheets.Productos||Nr.Sheets.Plantilla||Nr.Sheets[gr[0]];if(!_r){n(" No se encontr hoja de Productos/Plantilla.");return}const Zr=Qa.sheet_to_json(_r,{defval:""});if(!Zr.length){n(" El Excel viene vaco.");return}let Nn=0;const en=Nr.Sheets.Config;if(en){const mr=Qa.sheet_to_json(en,{defval:""}),Kr=new Map;for(const or of mr){const dt=Ub(Th(or,["Campo","Key","Nombre"])??""),er=Th(or,["Valor","Value"]);dt&&Kr.set(dt,er)}Kr.has("gastos logisticos")&&(Nn=Math.max(0,Lf(Kr.get("gastos logisticos"))))}else for(const mr of Zr){const Kr=Th(mr,["Gastos","Gasto","Gastos logisticos","Logistica"]),or=Lf(Kr);if(or>0){Nn=or;break}}ae(String(Nn||0));const Qr=new Map;for(const mr of A)Qr.set(Ub(mr.name),mr);const wr=[],Or=new Map;for(let mr=0;mr<Zr.length;mr++){const Kr=Zr[mr],or=Th(Kr,["Producto","Product","Nombre","Name"]),dt=Th(Kr,["Paquetes","Packages"]),er=Th(Kr,["Margen rivas","Margen Rivas","MV Rivas"]),Jt=Th(Kr,["Margen Isla","Margen isla","MV Isla"]),ar=Th(Kr,["P. unidad Rivas","P unidad Rivas","Precio Rivas"]),tr=Th(Kr,["P. unidad Isla","P unidad Isla","Precio Isla"]),fr=Ub(or);if(!fr)continue;const ne=Qr.get(fr);if(!ne){wr.push(`Fila ${mr+2}: Producto no existe en catlogo: "${String(or).trim()}".`);continue}if(I&&!_e.current.has(ne.id)){wr.push(`Fila ${mr+2}: No se permiten productos nuevos en edicin ("${ne.name}").`);continue}const He=Math.floor(Lf(dt));if(He<=0){wr.push(`Fila ${mr+2}: "Paquetes" invlido para "${ne.name}".`);continue}const tt=String(er??"").trim()!==""?Lf(er):Number(B||0),Je=String(Jt??"").trim()!==""?Lf(Jt):Number(pe||0),pt=Math.floor(Lf(ar)),wt=Math.floor(Lf(tr)),Wt=Or.get(ne.id);Wt?Or.set(ne.id,{packages:Wt.packages+He,mR:tt,mI:Je,puR:pt>0?pt:Wt.puR,puI:wt>0?wt:Wt.puI}):Or.set(ne.id,{packages:He,mR:tt,mI:Je,puR:pt>0?pt:void 0,puI:wt>0?wt:void 0})}const $r=[];Or.forEach((mr,Kr)=>{const or=A.find(wt=>wt.id===Kr);if(!or)return;const dt=Number(or.providerPrice||0),er=Math.max(1,na(or.unitsPerPackage||1)),Jt=Math.max(1,na(mr.packages)),ar=dt*Jt,tr=Number(mr.puR||0),fr=Number(mr.puI||0),ne=tr>0||fr>0;let He=mr.mR,tt=mr.mI;const Je=Number(X||0);let pt;if(ne){const wt=ep(dt,Jt,{marginR:He,marginSJ:Je,marginIsla:tt}),Wt=tr>0?tr*Jt:wt.totalRivas,Xt=fr>0?fr*Jt:wt.totalIsla,Rt=$t=>{if(!Number.isFinite($t)||$t<=0)return 0;const kr=(1-ar/$t)*100;return Math.min(Math.max(kr,0),99.9)};tr>0&&(He=Rt(Wt)),fr>0&&(tt=Rt(Xt)),pt={subtotal:ar,totalRivas:Wt,totalSanJorge:wt.totalSanJorge,totalIsla:Xt,gainRivas:Wt-ar,gainSanJorge:wt.gainSanJorge,gainIsla:Xt-ar,unitPriceRivas:Jt>0?Lb(Wt/Jt):0,unitPriceSanJorge:wt.unitPriceSanJorge,unitPriceIsla:Jt>0?Lb(Xt/Jt):0}}else pt=ep(dt,Jt,{marginR:He,marginSJ:Je,marginIsla:tt});$r.push({id:or.id,name:or.name,category:or.category,providerPrice:dt,packages:Jt,unitsPerPackage:er,marginRivas:He,marginSanJorge:Je,marginIsla:tt,subtotal:pt.subtotal,totalRivas:pt.totalRivas,totalSanJorge:pt.totalSanJorge,totalIsla:pt.totalIsla,gainRivas:pt.gainRivas,gainSanJorge:pt.gainSanJorge,gainIsla:pt.gainIsla,unitPriceRivas:pt.unitPriceRivas,unitPriceSanJorge:pt.unitPriceSanJorge,unitPriceIsla:pt.unitPriceIsla,remainingPackages:Jt})}),ke(mr=>{const Kr=new Map;mr.forEach(or=>Kr.set(or.id,or));for(const or of $r){const dt=Kr.get(or.id);if(!dt)Kr.set(or.id,or);else{const er=na(dt.packages)+na(or.packages),Jt=ep(dt.providerPrice,er,{marginR:or.marginRivas,marginSJ:Number(dt.marginSanJorge||0),marginIsla:or.marginIsla});Kr.set(or.id,{...dt,packages:er,marginRivas:or.marginRivas,marginIsla:or.marginIsla,remainingPackages:na(dt.remainingPackages??dt.packages)+na(or.packages),...Jt})}}return Array.from(Kr.values()).sort((or,dt)=>or.name.localeCompare(dt.name,"es"))}),ge("ITEMS"),wr.length?(n(` Importado con detalles. Errores: ${wr.length}.`),console.warn("Errores import:",wr)):n(` Importacin lista: ${$r.length} productos agregados.`)}catch(xr){console.error(xr),n(" Error importando Excel. Revis hojas: Productos + Config (o Plantilla).")}finally{Ge(!1)}}};g.useEffect(()=>{(async()=>{s(!0);try{const Be=Yt(mt(Se,"candy_main_orders"),In("createdAt","desc")),vt=await kt(Be),hr=[];vt.forEach(gr=>{const _r=gr.data();hr.push({id:gr.id,name:_r.name??"",date:_r.date??"",totalPackages:Number(_r.totalPackages??0),subtotal:Number(_r.subtotal??0),totalRivas:Number(_r.totalRivas??0),totalSanJorge:Number(_r.totalSanJorge??0),totalIsla:Number(_r.totalIsla??0),marginRivas:Number(_r.marginRivas??20),marginSanJorge:Number(_r.marginSanJorge??15),marginIsla:Number(_r.marginIsla??30),logisticsCost:Number(_r.logisticsCost??0),createdAt:_r.createdAt??Ar.now()})}),v(hr);const xr=await kt(mt(Se,"inventory_candies")),Nr={};xr.forEach(gr=>{const _r=gr.data(),Zr=_r.orderId;if(!Zr)return;const Nn=YQe(_r),en=yG(_r);Nr[Zr]||(Nr[Zr]={orderId:Zr,totalPackages:0,remainingPackages:0}),Nr[Zr].totalPackages+=Nn,Nr[Zr].remainingPackages+=en}),b(Nr)}catch(Be){console.error(Be),n(" Error cargando pedidos generales.")}finally{s(!1)}})()},[t]);const et=Be=>{var vt;return Be.date?Be.date:(vt=Be.createdAt)!=null&&vt.toDate?Be.createdAt.toDate().toISOString().slice(0,10):""},ut=async Be=>{if(Be.preventDefault(),n(""),l(!0),!Pe.length){n("Agrega al menos un producto a la orden.");return}try{const vt=new Date().toISOString().slice(0,10),hr=T||vt,xr=Number(B||0),Nr=Number(X||0),gr=Number(pe||0),_r=Math.max(0,Lf(ve||0));for(const mr of Pe){if(!String(mr.name||"").trim()){n("Hay un producto sin nombre en el pedido.");return}if(Number(mr.providerPrice||0)<0){n(`El precio proveedor no puede ser negativo (producto: ${mr.name}).`);return}if(na(mr.packages)<=0){n(`Los paquetes deben ser mayor que 0 (producto: ${mr.name}).`);return}if(na(mr.unitsPerPackage)<=0){n(`Las unidades por paquete deben ser mayor que 0 (producto: ${mr.name}).`);return}}if(I){const mr=_e.current;if(Pe.some(or=>!mr.has(or.id))){n(" No se permiten productos nuevos en edicin. Elimin los nuevos para guardar.");return}}const Zr=Number(_t.subtotal||0),Nn=Pe.map(mr=>aB(mr,_r,Zr)),en={totalPackages:_t.totalPackages,subtotal:_t.subtotal,totalRivas:_t.totalRivas,totalSanJorge:_t.totalSanJorge,totalIsla:_t.totalIsla},Qr={name:S||`Pedido ${hr}`,date:hr,totalPackages:en.totalPackages,subtotal:en.subtotal,totalRivas:en.totalRivas,totalSanJorge:en.totalSanJorge,totalIsla:en.totalIsla,marginRivas:xr,marginSanJorge:Nr,marginIsla:gr,logisticsCost:_r,uBrutaGlobal:Et.grossTotal,items:Nn};if(I){await kn(Gt(Se,"candy_main_orders",I),{...Qr});for(const or of Nn){const dt=await kt(Yt(mt(Se,"inventory_candies"),cr("orderId","==",I),cr("productId","==",or.id))),er=Math.max(1,na(or.unitsPerPackage||1)),Jt=na(or.packages)*er;if(dt.empty)await Jn(mt(Se,"inventory_candies"),{productId:or.id,productName:or.name,category:or.category,measurement:"unidad",quantity:Jt,remaining:Jt,packages:na(or.packages),remainingPackages:na(or.packages),unitsPerPackage:er,totalUnits:Jt,providerPrice:or.providerPrice,subtotal:or.subtotal,totalRivas:or.totalRivas,totalSanJorge:or.totalSanJorge,totalIsla:or.totalIsla,gainRivas:or.gainRivas,gainSanJorge:or.gainSanJorge,gainIsla:or.gainIsla,unitPriceRivas:or.unitPriceRivas,unitPriceSanJorge:or.unitPriceSanJorge,unitPriceIsla:or.unitPriceIsla,date:hr,createdAt:Ar.now(),status:"PENDIENTE",orderId:I});else for(const ar of dt.docs){const tr=ar.data(),fr=na(tr.totalUnits??0),ne=na(tr.remaining??fr),He=Jt-fr,tt=Math.max(0,ne+He),Je=Math.max(0,Math.floor(tt/er));await kn(Gt(Se,"inventory_candies",ar.id),{productName:or.name,category:or.category,unitsPerPackage:er,totalUnits:Jt,quantity:Jt,remaining:tt,packages:na(or.packages),remainingPackages:Je,providerPrice:or.providerPrice,subtotal:or.subtotal,totalRivas:or.totalRivas,totalSanJorge:or.totalSanJorge,totalIsla:or.totalIsla,gainRivas:or.gainRivas,gainSanJorge:or.gainSanJorge,gainIsla:or.gainIsla,unitPriceRivas:or.unitPriceRivas,unitPriceSanJorge:or.unitPriceSanJorge,unitPriceIsla:or.unitPriceIsla,date:hr})}}const mr=await kt(Yt(mt(Se,"inventory_candies"),cr("orderId","==",I))),Kr=new Set(Nn.map(or=>or.id));for(const or of mr.docs){const dt=or.data(),er=String(dt.productId||"");er&&!Kr.has(er)&&await Kn(Gt(Se,"inventory_candies",or.id))}v(or=>or.map(dt=>dt.id===I?{...dt,name:Qr.name,date:Qr.date,totalPackages:Qr.totalPackages,subtotal:Qr.subtotal,totalRivas:Qr.totalRivas,totalSanJorge:Qr.totalSanJorge,totalIsla:Qr.totalIsla,marginRivas:Qr.marginRivas,marginSanJorge:Qr.marginSanJorge,marginIsla:Qr.marginIsla,logisticsCost:Qr.logisticsCost}:dt)),n(" Orden maestra actualizada (pedido + inventario)."),lt(),j(!1),e();return}const Or=(await Jn(mt(Se,"candy_main_orders"),{...Qr,createdAt:Ar.now()})).id,$r=tu(Se);for(const mr of Nn){const Kr=Math.max(1,na(mr.unitsPerPackage||1)),or=na(mr.packages)*Kr,dt=Gt(mt(Se,"inventory_candies"));$r.set(dt,{productId:mr.id,productName:mr.name,category:mr.category,measurement:"unidad",quantity:or,remaining:or,packages:na(mr.packages),remainingPackages:na(mr.packages),unitsPerPackage:Kr,totalUnits:or,providerPrice:mr.providerPrice,subtotal:mr.subtotal,totalRivas:mr.totalRivas,totalSanJorge:mr.totalSanJorge,totalIsla:mr.totalIsla,gainRivas:mr.gainRivas,gainSanJorge:mr.gainSanJorge,gainIsla:mr.gainIsla,unitPriceRivas:mr.unitPriceRivas,unitPriceSanJorge:mr.unitPriceSanJorge,unitPriceIsla:mr.unitPriceIsla,date:hr,createdAt:Ar.now(),status:"PENDIENTE",orderId:Or})}await $r.commit(),n(" Orden maestra creada y registrada en inventario."),lt(),j(!1),e()}catch(vt){console.error(vt),n(" Error al guardar orden maestra.")}finally{l(!1)}},Ot=async Be=>{try{s(!0),n(""),_(Be.id),E(Be.name),k(Be.date),D(String(Be.marginRivas??20)),me(String(Be.marginSanJorge??15)),he(String(Be.marginIsla??30));const vt=Number(Be.logisticsCost??0);ae(String(vt||0)),ge("DATOS");const hr=Gt(Se,"candy_main_orders",Be.id),xr=await zs(hr);if(!xr.exists()){n(" No se encontr la orden.");return}const Nr=xr.data(),gr=Array.isArray(Nr.items)?Nr.items:[];_e.current=new Set(gr.map(en=>String(en.id||"")));const _r=await kt(Yt(mt(Se,"inventory_candies"),cr("orderId","==",Be.id))),Zr={};_r.forEach(en=>{const Qr=en.data(),wr=String(Qr.productId||"");if(!wr)return;const Or=yG(Qr);Zr[wr]=(Zr[wr]||0)+Or});const Nn=gr.map(en=>{const Qr=A.find(dt=>dt.id===en.id),wr=Number((Qr==null?void 0:Qr.providerPrice)??en.providerPrice??0),Or=Math.max(1,na((Qr==null?void 0:Qr.unitsPerPackage)??en.unitsPerPackage??1)),$r=Number(en.marginRivas??0),mr=Number(en.marginSanJorge??Number(X||0)),Kr=Number(en.marginIsla??0),or=ep(wr,na(en.packages||0),{marginR:$r,marginSJ:mr,marginIsla:Kr});return{...en,name:String((Qr==null?void 0:Qr.name)??en.name??"").trim(),category:String((Qr==null?void 0:Qr.category)??en.category??"Caramelo").trim(),providerPrice:wr,unitsPerPackage:Or,remainingPackages:Zr[en.id]??en.remainingPackages??en.packages??0,...or}});ke(Nn),j(!0)}catch(vt){console.error(vt),n(" Error al abrir orden maestra.")}finally{s(!1)}},zt=async Be=>{if(confirm(`Eliminar la orden "${Be.name}" y todo su inventario asociado?`)){n("");try{const hr=await kt(Yt(mt(Se,"inventory_candies"),cr("orderId","==",Be.id)));for(const xr of hr.docs)await Kn(Gt(Se,"inventory_candies",xr.id));await Kn(Gt(Se,"candy_main_orders",Be.id)),v(xr=>xr.filter(Nr=>Nr.id!==Be.id)),n(" Orden maestra eliminada."),e()}catch(hr){console.error(hr),n(" Error al eliminar orden maestra.")}}},Bt=async()=>{if(!c)try{u(!0),n("");const Be=await kt(mt(Se,"candy_main_orders"));let vt=tu(Se),hr=0,xr=0;const Nr=(gr,_r)=>Math.abs(Number(gr||0)-Number(_r||0))>.01;Be.forEach(gr=>{const _r=gr.data(),Zr=Array.isArray(_r.items)?_r.items:[];if(!Zr.length)return;const Nn=Zr.reduce((mr,Kr)=>mr+Number(Kr.subtotal||0),0);let en=Number(_r.logisticsCost??_r.gastosLogisticos??_r.gastos??0);if(Number.isFinite(en)||(en=0),!en){const mr=Zr.reduce((Kr,or)=>Kr+Number(or.logisticAllocated??0),0);en=Number(mr||0)}const Qr=Zr.map(mr=>aB(mr,en,Nn)),wr=Qr.reduce((mr,Kr)=>mr+Number(Kr.grossProfit||0),0);if(!(Nr(_r.logisticsCost,en)||Nr(_r.uBrutaGlobal,wr)||Qr.some((mr,Kr)=>{const or=Zr[Kr]||{};return Nr(or.logisticAllocated,mr.logisticAllocated)||Nr(or.grossProfit,mr.grossProfit)||Nr(or.grossProfitIsla,mr.grossProfitIsla)})))return;const $r=Gt(Se,"candy_main_orders",gr.id);vt.update($r,{logisticsCost:en,uBrutaGlobal:wr,items:Qr,updatedAt:Ar.now()}),hr+=1,xr+=1,hr>=400&&(vt.commit(),vt=tu(Se),hr=0)}),hr>0&&await vt.commit(),n(` Ordenes maestras actualizadas: ${xr}`),e()}catch(Be){console.error(Be),n(" Error actualizando prorrateo de rdenes maestras.")}finally{u(!1)}},Lt=async()=>{if(I&&!d)try{f(!0),n("");const Be=await pF(I);Be.created>0||Be.updated>0?n(` Inventario listo: ${Be.created} creados, ${Be.updated} reparados (de ${Be.totalItems}).`):Be.totalItems>0?n(" No haba inventario faltante para crear o reparar."):n(" La orden no tiene items para crear inventario."),e()}catch(Be){console.error(Be),n(" Error creando inventario faltante.")}finally{f(!1)}};return i.jsxs("div",{className:"max-w-7xl mx-auto",children:[i.jsxs("div",{className:"mb-3",children:[i.jsx("div",{className:"flex items-center justify-between",children:i.jsx("h2",{className:"text-2xl font-bold",children:"Ordenes Maestras"})}),i.jsxs("div",{className:"mt-3 flex items-center justify-between",children:[i.jsx("div",{}),i.jsxs("div",{className:"flex items-center gap-2",children:[i.jsx(Fc,{onClick:e,loading:a||m}),i.jsx("button",{className:"inline-flex items-center gap-2 bg-gray-200 text-gray-800 px-2 md:px-3 py-2 rounded-2xl hover:bg-gray-300 disabled:opacity-60",onClick:Bt,disabled:c,children:c?"Actualizando prorrateo...":"Actualizar prorrateo"}),i.jsxs("button",{className:"inline-flex items-center gap-2 bg-indigo-600 text-white px-2 md:px-3 py-2 rounded-2xl hover:bg-indigo-700 w-full md:w-auto max-w-[220px] justify-center",onClick:()=>{lt(),j(!0)},children:[i.jsx("span",{className:"items-center gap-4 inline-block bg-indigo-700/40 rounded-full p-1",children:i.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-4 w-4",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:i.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 4v16m8-8H4"})})}),"Nueva Orden"]})]})]}),r&&i.jsx("p",{className:"mt-2 text-sm",children:r})]}),w&&i.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-40 flex items-center justify-center z-50 p-3",children:i.jsxs("div",{className:"relative bg-white p-4 md:p-6 rounded shadow-lg w-full max-w-6xl max-h-[90vh] overflow-y-auto text-sm",children:[o&&i.jsx("div",{className:"absolute inset-0 bg-white/70 z-50 flex items-center justify-center",children:i.jsxs("div",{className:"bg-white border rounded-xl px-4 py-3 shadow flex items-center gap-3",children:[i.jsxs("svg",{className:"animate-spin h-5 w-5 text-gray-700",xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",children:[i.jsx("circle",{className:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor",strokeWidth:"4"}),i.jsx("path",{className:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8v4a4 4 0 00-4 4H4z"})]}),i.jsx("div",{className:"text-sm font-semibold",children:"Guardando orden"})]})}),i.jsxs("div",{className:"sticky top-0 bg-white z-20 pb-3 border-b",children:[i.jsxs("div",{className:"flex items-center gap-3",children:[i.jsx("h3",{className:"text-lg md:text-xl font-bold",children:I?"Editar Orden Maestra":"Nueva Orden Maestra"}),i.jsxs("div",{className:"ml-auto flex gap-2",children:[I&&i.jsx("button",{type:"button",className:"px-3 py-2 rounded bg-amber-600 text-white hover:bg-amber-700 disabled:opacity-60",disabled:o||d,onClick:Lt,children:d?"Creando inventario...":"Crear inventario faltante"}),i.jsx("button",{type:"button",className:"px-3 py-2 rounded bg-gray-200 hover:bg-gray-300 disabled:opacity-60",disabled:o,onClick:()=>{lt(),j(!1)},children:"Cerrar"})]})]}),i.jsx("div",{className:"mt-3 grid grid-cols-1 md:grid-cols-1 gap-2",children:i.jsxs("div",{children:[i.jsx("label",{className:"block text-xs font-semibold",children:"Gastos logsticos (orden)"}),i.jsx("input",{type:"number",className:"w-full border p-2 rounded",value:ve,onChange:Be=>ae(Be.target.value),placeholder:"0",min:0})]})}),i.jsx("div",{className:"md:hidden mt-3",children:i.jsxs("div",{className:"grid grid-cols-4 gap-2",children:[i.jsx("button",{type:"button",onClick:()=>ge("DATOS"),className:`px-2 py-2 rounded text-xs font-semibold border ${qe==="DATOS"?"bg-blue-600 text-white border-blue-600":"bg-white text-gray-700 border-gray-200"}`,children:"Datos"}),i.jsx("button",{type:"button",onClick:()=>ge("AGREGAR"),className:`px-2 py-2 rounded text-xs font-semibold border ${qe==="AGREGAR"?"bg-blue-600 text-white border-blue-600":"bg-white text-gray-700 border-gray-200"}`,children:"Agregar"}),i.jsxs("button",{type:"button",onClick:()=>ge("ITEMS"),className:`px-2 py-2 rounded text-xs font-semibold border ${qe==="ITEMS"?"bg-blue-600 text-white border-blue-600":"bg-white text-gray-700 border-gray-200"}`,children:["Items (",Pe.length,")"]}),i.jsx("button",{type:"button",onClick:()=>ge("TOTALES"),className:`px-2 py-2 rounded text-xs font-semibold border ${qe==="TOTALES"?"bg-blue-600 text-white border-blue-600":"bg-white text-gray-700 border-gray-200"}`,children:"Totales"})]})})]}),i.jsxs("form",{onSubmit:ut,className:"space-y-4 pt-4",children:[i.jsx("input",{ref:re,type:"file",accept:".xlsx,.xls,.csv",className:"hidden",onChange:ft}),i.jsx("div",{className:`${qe==="DATOS"?"block":"hidden"} md:block`,children:i.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:[i.jsxs("div",{className:"md:col-span-2",children:[i.jsx("label",{className:"block text-sm font-semibold",children:"Nombre de Orden"}),i.jsx("input",{className:"w-full border p-2 rounded",value:S,onChange:Be=>E(Be.target.value),placeholder:"Ej: Pedido enero 19"})]}),i.jsxs("div",{children:[i.jsx("label",{className:"block text-sm font-semibold",children:"Fecha del pedido"}),i.jsx("input",{type:"date",className:"w-full border p-2 rounded",value:T,onChange:Be=>k(Be.target.value)})]}),i.jsxs("div",{children:[i.jsx("label",{className:"block text-sm font-semibold",children:"% Ganancia Rivas"}),i.jsx("input",{type:"number",className:"w-full border p-2 rounded",value:B,onChange:Be=>D(Be.target.value)})]}),i.jsx("input",{type:"hidden",value:X,readOnly:!0}),i.jsxs("div",{children:[i.jsx("label",{className:"block text-sm font-semibold",children:"% Ganancia Isla Ometepe"}),i.jsx("input",{type:"number",className:"w-full border p-2 rounded",value:pe,onChange:Be=>he(Be.target.value)})]})]})}),i.jsx("div",{className:`${qe==="AGREGAR"?"block":"hidden"} md:block`,children:i.jsxs("div",{className:"border rounded p-3 bg-gray-50",children:[i.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-3",children:[i.jsxs("div",{children:[i.jsx("label",{className:"block text-sm font-semibold",children:"Categora (dinmica)"}),i.jsx("select",{className:"w-full border p-2 rounded",value:Ue,onChange:Be=>{Ye(Be.target.value),yt("")},disabled:m,children:xe.length===0?i.jsx("option",{value:"",children:m?"Cargando...":"No hay categoras en catlogo"}):xe.map(Be=>i.jsx("option",{value:Be,children:Be},Be))})]}),i.jsxs("div",{className:"md:col-span-2",children:[i.jsx("label",{className:"block text-sm font-semibold",children:"Producto (catlogo)"}),i.jsxs("select",{className:"w-full border p-2 rounded",value:At,onChange:Be=>yt(Be.target.value),children:[i.jsx("option",{value:"",children:m?"Cargando catlogo...":"Selecciona producto"}),Re.map(Be=>i.jsx("option",{value:Be.id,children:Be.name},Be.id))]})]}),i.jsxs("div",{children:[i.jsx("label",{className:"block text-sm font-semibold",children:"Precio proveedor (paq)"}),i.jsx("input",{type:"number",className:"w-full border p-2 rounded bg-gray-100",value:bt,readOnly:!0})]}),i.jsxs("div",{children:[i.jsx("label",{className:"block text-sm font-semibold",children:"Paquetes"}),i.jsx("input",{type:"number",min:0,className:"w-full border p-2 rounded",value:Ve,onChange:Be=>Te(Be.target.value)})]}),i.jsxs("div",{children:[i.jsx("label",{className:"block text-sm font-semibold",children:"Unidades por paquete"}),i.jsx("input",{type:"number",className:"w-full border p-2 rounded bg-gray-100",value:jt,readOnly:!0})]})]}),i.jsx("div",{className:"flex flex-col md:flex-row md:items-center md:justify-end gap-2 mt-3",children:i.jsx("button",{type:"button",onClick:Ne,className:"px-3 py-2 rounded bg-blue-600 text-white hover:bg-blue-700",children:"Agregar producto"})})]})}),i.jsxs("div",{className:"hidden md:flex items-center justify-end gap-2",children:[i.jsx("button",{type:"button",onClick:L,className:"px-3 py-2 rounded bg-gray-200 hover:bg-gray-300",title:"Descarga plantilla (Productos + Config)",children:"Descargar plantilla"}),i.jsx("button",{type:"button",onClick:rt,disabled:de,className:"px-3 py-2 rounded bg-emerald-600 text-white hover:bg-emerald-700 disabled:opacity-60",title:"Importa desde Excel (Productos + Config)",children:de?"Importando...":"Importar Excel"}),i.jsx("button",{type:"button",onClick:K,className:"px-3 py-2 rounded bg-indigo-600 text-white hover:bg-indigo-700",title:"Exporta la orden actual (Productos + Resumen)",children:"Exportar Excel"})]}),i.jsx("div",{className:`${qe==="ITEMS"?"block":"hidden"} md:block`,children:i.jsxs("div",{className:"mt-2",children:[i.jsxs("div",{className:"mb-2 flex flex-col md:flex-row md:items-center md:justify-between gap-2",children:[i.jsxs("div",{className:"text-xs text-gray-600",children:["Items:"," ",i.jsx("span",{className:"font-semibold",children:Pe.length}),q.trim()?i.jsxs(i.Fragment,{children:[" "," Mostrando"," ",i.jsx("span",{className:"font-semibold",children:Mt.length})]}):null]}),i.jsx("input",{value:q,onChange:Be=>se(Be.target.value),placeholder:"Buscar producto o categora",className:"w-full md:w-80 border rounded px-3 py-2 text-sm"})]}),i.jsxs("div",{className:"hidden md:block",children:[i.jsx("div",{className:"overflow-x-auto border rounded pb-5",children:i.jsxs("table",{className:"min-w-[1400px] w-full text-xs",children:[i.jsx("thead",{className:"bg-gray-100",children:i.jsxs("tr",{children:[i.jsx("th",{className:"text-left p-2",children:"Categora"}),i.jsx("th",{className:"text-left p-2",children:"Producto"}),i.jsx("th",{className:"text-right p-2",children:"Paquetes"}),i.jsx("th",{className:"text-right p-2",children:"Restantes"}),i.jsx("th",{className:"text-right p-2",children:"Und x Paq"}),i.jsx("th",{className:"text-right p-2",children:"Precio prov"}),i.jsx("th",{className:"text-right p-2",children:"Facturado"}),i.jsx("th",{className:"text-right p-2",children:"Esperado Rivas"}),i.jsx("th",{className:"text-right p-2",children:"Esperado Isla"}),i.jsx("th",{className:"text-right p-2",children:"MV Rivas"}),i.jsx("th",{className:"text-right p-2",children:"MV Isla"}),i.jsx("th",{className:"text-right p-2",children:"U. Bruta Rivas"}),i.jsx("th",{className:"text-right p-2",children:"U. Bruta Isla"}),i.jsx("th",{className:"text-right p-2",children:"Prorrateo"}),i.jsx("th",{className:"text-right p-2",children:"Precio Rivas"}),i.jsx("th",{className:"text-right p-2",children:"Precio Isla"}),i.jsx("th",{className:"text-center p-2",children:"Acciones"})]})}),i.jsxs("tbody",{children:[Fe.map(Be=>i.jsxs("tr",{className:"border-t",children:[i.jsx("td",{className:"p-2",children:Be.category}),i.jsx("td",{className:"p-2 font-semibold",children:Be.name}),i.jsx("td",{className:"p-2 text-right",children:O[Be.id]?i.jsx("input",{type:"number",className:"w-20 border rounded p-1 text-right",value:Be.packages,onChange:vt=>xt(Be.id,"packages",vt.target.value),onBlur:()=>Ce(Be.id),onKeyDown:vt=>{(vt.key==="Enter"||vt.key==="Escape")&&Ce(Be.id)},inputMode:"numeric",autoFocus:!0}):i.jsxs("div",{className:"flex items-center justify-end gap-2",children:[i.jsx("span",{children:Be.packages}),i.jsx("button",{type:"button",className:"text-xs text-gray-600 hover:text-gray-900",onClick:()=>te(Be.id),"aria-label":"Editar paquetes",children:""})]})}),i.jsx("td",{className:"p-2 text-right",children:i.jsx("span",{className:"inline-block min-w-[60px] text-right",children:na(Be.remainingPackages??Be.packages)})}),i.jsx("td",{className:"p-2 text-right",children:z[Be.id]?i.jsx("input",{type:"number",className:"w-20 border rounded p-1 text-right",value:Be.unitsPerPackage,onChange:vt=>xt(Be.id,"unitsPerPackage",vt.target.value),onBlur:()=>We(Be.id),onKeyDown:vt=>{(vt.key==="Enter"||vt.key==="Escape")&&We(Be.id)},inputMode:"numeric",autoFocus:!0}):i.jsxs("div",{className:"flex items-center justify-end gap-2",children:[i.jsx("span",{children:Be.unitsPerPackage}),i.jsx("button",{type:"button",className:"text-xs text-gray-600 hover:text-gray-900",onClick:()=>V(Be.id),"aria-label":"Editar unidades por paquete",children:""})]})}),i.jsx("td",{className:"p-2 text-right",children:Number(Be.providerPrice||0).toFixed(2)}),i.jsx("td",{className:"p-2 text-right",children:Number(Be.subtotal||0).toFixed(2)}),i.jsx("td",{className:"p-2 text-right",children:Number(Be.totalRivas||0).toFixed(2)}),i.jsx("td",{className:"p-2 text-right",children:Number(Be.totalIsla||0).toFixed(2)}),i.jsx("td",{className:"p-2 text-right",children:Y[Be.id]?i.jsx("input",{type:"number",step:"0.001",className:"w-16 border rounded p-1 text-right",value:Number(Be.marginRivas??0),onChange:vt=>xt(Be.id,"marginRivas",vt.target.value),onBlur:()=>J(Be.id),onKeyDown:vt=>{(vt.key==="Enter"||vt.key==="Escape")&&J(Be.id)},inputMode:"decimal",autoFocus:!0}):i.jsxs("div",{className:"flex items-center justify-end gap-2",children:[i.jsx("span",{children:Number(Be.marginRivas??0).toFixed(3)}),i.jsx("button",{type:"button",className:"text-xs text-gray-600 hover:text-gray-900",onClick:()=>ie(Be.id),"aria-label":"Editar margen Rivas",children:""})]})}),i.jsx("td",{className:"p-2 text-right",children:M[Be.id]?i.jsx("input",{type:"number",step:"0.001",className:"w-16 border rounded p-1 text-right",value:Number(Be.marginIsla??0),onChange:vt=>xt(Be.id,"marginIsla",vt.target.value),onBlur:()=>fe(Be.id),onKeyDown:vt=>{(vt.key==="Enter"||vt.key==="Escape")&&fe(Be.id)},inputMode:"decimal",autoFocus:!0}):i.jsxs("div",{className:"flex items-center justify-end gap-2",children:[i.jsx("span",{children:Number(Be.marginIsla??0).toFixed(3)}),i.jsx("button",{type:"button",className:"text-xs text-gray-600 hover:text-gray-900",onClick:()=>Oe(Be.id),"aria-label":"Editar margen Isla",children:""})]})}),i.jsx("td",{className:"p-2 text-right",children:Number(Be.grossProfit||0).toFixed(2)}),i.jsx("td",{className:"p-2 text-right",children:Number(Be.grossProfitIsla||0).toFixed(2)}),i.jsx("td",{className:"p-2 text-right",children:Number(Be.logisticAllocated||0).toFixed(2)}),i.jsx("td",{className:"p-2 text-right",children:Number(Be.unitPriceRivas||0)}),i.jsx("td",{className:"p-2 text-right",children:Number(Be.unitPriceIsla||0)}),i.jsx("td",{className:"p-2 text-center",children:i.jsx("button",{type:"button",className:"px-2 py-1 rounded bg-red-600 text-white hover:bg-red-700",onClick:()=>De(Be.id),children:"Quitar"})})]},Be.id)),Mt.length===0&&i.jsx("tr",{children:i.jsx("td",{colSpan:17,className:"p-4 text-center text-gray-500",children:"No hay productos en la orden."})})]})]})}),i.jsxs("div",{className:"mt-2 flex items-center justify-between",children:[i.jsxs("div",{className:"text-sm text-gray-600",children:["Mostrando"," ",Math.min((nt-1)*we+1,Mt.length),"-",Math.min(nt*we,Mt.length)," ","de ",Mt.length]}),i.jsxs("div",{className:"flex items-center gap-2",children:[i.jsx("button",{type:"button",disabled:nt<=1,onClick:()=>Ee(Be=>Math.max(1,Be-1)),className:"px-2 py-1 rounded border disabled:opacity-50 text-sm",children:"Anterior"}),i.jsxs("div",{className:"px-3 py-1 border rounded text-sm",children:[nt," / ",oe]}),i.jsx("button",{type:"button",disabled:nt>=oe,onClick:()=>Ee(Be=>Math.min(oe,Be+1)),className:"px-2 py-1 rounded border disabled:opacity-50 text-sm",children:"Siguiente"})]})]})]}),i.jsx("div",{className:"md:hidden space-y-3",children:Mt.length===0?i.jsx("div",{className:"p-4 border rounded bg-gray-50 text-gray-600",children:"No hay productos en esta orden."}):Mt.map(Be=>i.jsxs("div",{className:"border rounded-xl p-3 shadow-sm",children:[i.jsxs("div",{className:"flex items-start gap-2",children:[i.jsxs("div",{className:"flex-1 min-w-0",children:[i.jsx("div",{className:"font-semibold text-base leading-tight truncate",children:Be.name}),i.jsx("div",{className:"text-xs text-gray-500 truncate",children:Be.category})]}),i.jsx("button",{type:"button",className:"px-2 py-1 rounded bg-red-600 text-white hover:bg-red-700 text-xs",onClick:()=>De(Be.id),children:"Quitar"})]}),i.jsxs("div",{className:"grid grid-cols-2 gap-2 mt-3",children:[i.jsxs("div",{children:[i.jsx("label",{className:"text-xs text-gray-600",children:"Paquetes"}),O[Be.id]?i.jsx("input",{type:"number",step:"0.001",className:"w-full border p-2 rounded text-right",value:Be.packages,onChange:vt=>xt(Be.id,"packages",vt.target.value),onBlur:()=>Ce(Be.id),onKeyDown:vt=>{(vt.key==="Enter"||vt.key==="Escape")&&Ce(Be.id)},inputMode:"numeric",autoFocus:!0}):i.jsxs("div",{className:"flex items-center justify-end gap-2",children:[i.jsx("span",{className:"font-semibold",children:Be.packages}),i.jsx("button",{type:"button",className:"text-xs text-gray-600 hover:text-gray-900",onClick:()=>te(Be.id),"aria-label":"Editar paquetes",children:""})]})]}),i.jsxs("div",{children:[i.jsx("label",{className:"text-xs text-gray-600",children:"Paquetes restantes"}),i.jsx("input",{className:"w-full border p-2 rounded text-right bg-gray-100",value:Be.remainingPackages??Be.packages,readOnly:!0})]}),i.jsxs("div",{children:[i.jsx("label",{className:"text-xs text-gray-600",children:"Und x Paquete"}),z[Be.id]?i.jsx("input",{type:"number",step:"0.001",className:"w-full border p-2 rounded text-right",value:Be.unitsPerPackage,onChange:vt=>xt(Be.id,"unitsPerPackage",vt.target.value),onBlur:()=>We(Be.id),onKeyDown:vt=>{(vt.key==="Enter"||vt.key==="Escape")&&We(Be.id)},inputMode:"numeric",autoFocus:!0}):i.jsxs("div",{className:"flex items-center justify-end gap-2",children:[i.jsx("span",{className:"font-semibold",children:Be.unitsPerPackage}),i.jsx("button",{type:"button",className:"text-xs text-gray-600 hover:text-gray-900",onClick:()=>V(Be.id),"aria-label":"Editar unidades por paquete",children:""})]})]}),i.jsxs("div",{children:[i.jsx("label",{className:"text-xs text-gray-600",children:"Precio proveedor"}),i.jsx("input",{className:"w-full border p-2 rounded text-right bg-gray-100",value:Number(Be.providerPrice||0).toFixed(2),readOnly:!0})]})]}),i.jsxs("div",{className:"grid grid-cols-2 gap-2 mt-3",children:[i.jsxs("div",{children:[i.jsx("label",{className:"text-xs text-gray-600",children:"MV Rivas (%)"}),Y[Be.id]?i.jsx("input",{type:"number",className:"w-full border p-2 rounded text-right",value:Be.marginRivas??0,onChange:vt=>xt(Be.id,"marginRivas",vt.target.value),onBlur:()=>J(Be.id),onKeyDown:vt=>{(vt.key==="Enter"||vt.key==="Escape")&&J(Be.id)},inputMode:"decimal",autoFocus:!0}):i.jsxs("div",{className:"flex items-center justify-end gap-2",children:[i.jsx("span",{className:"font-semibold",children:Number(Be.marginRivas??0).toFixed(3)}),i.jsx("button",{type:"button",className:"text-xs text-gray-600 hover:text-gray-900",onClick:()=>ie(Be.id),"aria-label":"Editar margen Rivas",children:""})]})]}),i.jsxs("div",{children:[i.jsx("label",{className:"text-xs text-gray-600",children:"MV Isla (%)"}),M[Be.id]?i.jsx("input",{type:"number",className:"w-full border p-2 rounded text-right",value:Be.marginIsla??0,onChange:vt=>xt(Be.id,"marginIsla",vt.target.value),onBlur:()=>fe(Be.id),onKeyDown:vt=>{(vt.key==="Enter"||vt.key==="Escape")&&fe(Be.id)},inputMode:"decimal",autoFocus:!0}):i.jsxs("div",{className:"flex items-center justify-end gap-2",children:[i.jsx("span",{className:"font-semibold",children:Number(Be.marginIsla??0).toFixed(3)}),i.jsx("button",{type:"button",className:"text-xs text-gray-600 hover:text-gray-900",onClick:()=>Oe(Be.id),"aria-label":"Editar margen Isla",children:""})]})]})]}),i.jsxs("div",{className:"grid grid-cols-2 gap-2 mt-3 text-sm",children:[i.jsxs("div",{className:"p-2 rounded bg-gray-50 border",children:[i.jsx("div",{className:"text-xs text-gray-600",children:"Facturado"}),i.jsx("div",{className:"font-semibold",children:Number(Be.subtotal||0).toFixed(2)})]}),i.jsxs("div",{className:"p-2 rounded bg-gray-50 border",children:[i.jsx("div",{className:"text-xs text-gray-600",children:"Esperado Rivas"}),i.jsx("div",{className:"font-semibold",children:Number(Be.totalRivas||0).toFixed(2)})]}),i.jsxs("div",{className:"p-2 rounded bg-gray-50 border",children:[i.jsx("div",{className:"text-xs text-gray-600",children:"Esperado Isla"}),i.jsx("div",{className:"font-semibold",children:Number(Be.totalIsla||0).toFixed(2)})]}),i.jsxs("div",{className:"p-2 rounded bg-gray-50 border",children:[i.jsx("div",{className:"text-xs text-gray-600",children:"Prorrateo logstico"}),i.jsx("div",{className:"font-semibold",children:Number(Be.logisticAllocated||0).toFixed(2)})]})]}),i.jsxs("div",{className:"grid grid-cols-2 gap-2 mt-3 text-xs",children:[i.jsxs("div",{className:"p-2 rounded bg-emerald-50 border",children:[i.jsx("div",{className:"text-gray-600",children:"U. Bruta Rivas"}),i.jsx("div",{className:"font-semibold",children:Number(Be.grossProfit||0).toFixed(2)})]}),i.jsxs("div",{className:"p-2 rounded bg-emerald-50 border",children:[i.jsx("div",{className:"text-gray-600",children:"U. Bruta Isla"}),i.jsx("div",{className:"font-semibold",children:Number(Be.grossProfitIsla||0).toFixed(2)})]})]}),i.jsxs("div",{className:"grid grid-cols-2 gap-2 mt-3 text-xs",children:[i.jsxs("div",{className:"p-2 rounded bg-blue-50 border",children:[i.jsx("div",{className:"text-gray-600",children:"Precio Rivas (paq)"}),i.jsx("div",{className:"font-semibold",children:Be.unitPriceRivas})]}),i.jsxs("div",{className:"p-2 rounded bg-blue-50 border",children:[i.jsx("div",{className:"text-gray-600",children:"Precio Isla (paq)"}),i.jsx("div",{className:"font-semibold",children:Be.unitPriceIsla})]})]})]},Be.id))})]})}),i.jsxs("div",{className:`${qe==="TOTALES"?"block":"hidden"} md:block`,children:[i.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-3 mt-3",children:[i.jsxs("div",{className:"p-3 border rounded bg-gray-50",children:[i.jsx("div",{className:"text-xs text-gray-600",children:"Paquetes totales"}),i.jsx("div",{className:"text-lg font-semibold",children:R.totalPackages})]}),i.jsxs("div",{className:"p-3 border rounded bg-gray-50",children:[i.jsx("div",{className:"text-xs text-gray-600",children:"Subtotal costo (facturado)"}),i.jsx("div",{className:"text-lg font-semibold",children:Number(R.subtotalCosto||0).toFixed(2)})]}),i.jsxs("div",{className:"p-3 border rounded bg-gray-50",children:[i.jsx("div",{className:"text-xs text-gray-600",children:"Esperado (Rivas / Isla)"}),i.jsxs("div",{className:"text-sm font-semibold",children:["Rivas: ",Number(R.esperadoRivas||0).toFixed(2),i.jsx("br",{}),"Isla: ",Number(R.esperadoIsla||0).toFixed(2)]})]}),i.jsxs("div",{className:"p-3 border rounded bg-gray-50",children:[i.jsx("div",{className:"text-xs text-gray-600",children:"Gastos logsticos"}),i.jsx("div",{className:"text-lg font-semibold",children:Number(R.gastosLogisticos||0).toFixed(2)})]})]}),i.jsxs("div",{className:"mt-3",children:[i.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-3",children:[i.jsxs("div",{className:"p-3 border rounded bg-emerald-50",children:[i.jsx("div",{className:"text-xs text-gray-600",children:"Utilidad Bruta Rivas"}),i.jsx("div",{className:"text-lg font-semibold",children:Number(R.utilidadBrutaRivas||0).toFixed(2)})]}),i.jsxs("div",{className:"p-3 border rounded bg-emerald-50",children:[i.jsx("div",{className:"text-xs text-gray-600",children:"Utilidad Bruta Isla"}),i.jsx("div",{className:"text-lg font-semibold",children:Number(R.utilidadBrutaIsla||0).toFixed(2)})]})]}),i.jsx("div",{className:"mt-3 border rounded p-3 bg-white",children:i.jsx("div",{className:"flex justify-end",children:i.jsx("button",{type:"button",className:"px-3 py-2 rounded bg-gray-200 hover:bg-gray-300",onClick:K,disabled:!Et.items.length,title:"Exporta la orden actual (productos + resumen)",children:"Exportar orden a Excel"})})})]})]}),i.jsxs("div",{className:"sticky bottom-0 bg-white pt-3 mt-4 border-t",children:[i.jsxs("div",{className:"flex justify-end gap-2",children:[i.jsx("button",{type:"button",onClick:lt,className:"px-3 py-2 rounded bg-gray-200 hover:bg-gray-300",children:"Limpiar orden"}),i.jsx("button",{type:"button",onClick:()=>{lt(),j(!1)},className:"px-3 py-2 rounded bg-gray-200 hover:bg-gray-300",children:"Cerrar"}),i.jsx("button",{type:"submit",className:"px-3 py-2 rounded bg-blue-600 text-white hover:bg-blue-700 disabled:opacity-60",disabled:o||Pe.length===0,children:o?"Guardando...":"Guardar orden"})]}),i.jsx("div",{className:"md:hidden mt-2",children:i.jsx("button",{type:"button",className:"w-full px-3 py-2 rounded bg-gray-100 hover:bg-gray-200 text-sm",onClick:()=>{ge(qe==="DATOS"&&!I?"AGREGAR":qe==="DATOS"||qe==="AGREGAR"?"ITEMS":qe==="ITEMS"?"TOTALES":"DATOS")},children:"Siguiente"})})]})]})]})}),i.jsxs("div",{className:"mt-4",children:[i.jsx("div",{className:"md:hidden space-y-3",children:a?i.jsx("div",{className:"p-4 border rounded bg-white text-center",children:"Cargando"}):x.length===0?i.jsx("div",{className:"p-4 border rounded bg-white text-center",children:"Sin ordenes maestras."}):x.map(Be=>{const vt=y[Be.id],hr=et(Be),xr=Be.totalPackages>0?(Be.subtotal/Be.totalPackages).toFixed(2):"0.00",Nr=Number(Be.logisticsCost||0),gr=Number(Be.totalRivas||0)-Number(Be.subtotal||0);return i.jsxs("div",{className:"border rounded-xl p-3 bg-white shadow-sm",children:[i.jsxs("div",{className:"flex items-start gap-3",children:[i.jsxs("div",{className:"flex-1",children:[i.jsx("div",{className:"text-xs text-gray-500",children:hr}),i.jsx("div",{className:"font-semibold text-base leading-tight",children:Be.name})]}),i.jsxs("div",{className:"flex gap-2",children:[i.jsx("button",{className:"px-3 py-2 rounded bg-blue-600 text-white text-xs",onClick:()=>Ot(Be),children:"Ver"}),i.jsx("button",{className:"px-3 py-2 rounded bg-red-600 text-white text-xs",onClick:()=>zt(Be),children:"Borrar"})]})]}),i.jsxs("div",{className:"grid grid-cols-2 gap-2 mt-3 text-sm",children:[i.jsxs("div",{className:"p-2 rounded bg-gray-50 border",children:[i.jsx("div",{className:"text-xs text-gray-600",children:"Paquetes"}),i.jsx("div",{className:"font-semibold",children:Be.totalPackages})]}),i.jsxs("div",{className:"p-2 rounded bg-gray-50 border",children:[i.jsx("div",{className:"text-xs text-gray-600",children:"Restantes"}),i.jsx("div",{className:"font-semibold",children:vt?vt.remainingPackages:0})]}),i.jsxs("div",{className:"p-2 rounded bg-gray-50 border",children:[i.jsx("div",{className:"text-xs text-gray-600",children:"P. Proveedor"}),i.jsx("div",{className:"font-semibold",children:xr})]}),i.jsxs("div",{className:"p-2 rounded bg-gray-50 border",children:[i.jsx("div",{className:"text-xs text-gray-600",children:"Subtotal"}),i.jsx("div",{className:"font-semibold",children:Number(Be.subtotal||0).toFixed(2)})]})]}),i.jsxs("div",{className:"grid grid-cols-2 gap-2 mt-2 text-xs",children:[i.jsxs("div",{className:"p-2 rounded bg-blue-50 border",children:[i.jsx("div",{className:"text-gray-600",children:"Esperado Rivas"}),i.jsx("div",{className:"font-semibold",children:Number(Be.totalRivas||0).toFixed(2)})]}),i.jsxs("div",{className:"p-2 rounded bg-blue-50 border",children:[i.jsx("div",{className:"text-gray-600",children:"Esperado Isla"}),i.jsx("div",{className:"font-semibold",children:Number(Be.totalIsla||0).toFixed(2)})]})]}),i.jsxs("div",{className:"grid grid-cols-2 gap-2 mt-2 text-xs",children:[i.jsxs("div",{className:"p-2 rounded bg-emerald-50 border",children:[i.jsx("div",{className:"text-gray-600",children:"Gastos log."}),i.jsx("div",{className:"font-semibold",children:Nr.toFixed(2)})]}),i.jsxs("div",{className:"p-2 rounded bg-emerald-50 border",children:[i.jsx("div",{className:"text-gray-600",children:"U. Bruta (est)"}),i.jsx("div",{className:"font-semibold",children:gr.toFixed(2)})]})]})]},Be.id)})}),i.jsxs("div",{className:"hidden md:block bg-white p-2 rounded shadow border w-full overflow-x-auto",children:[i.jsxs("table",{className:"min-w-[1100px] text-xs md:text-sm",children:[i.jsx("thead",{className:"bg-gray-100",children:i.jsxs("tr",{className:"whitespace-nowrap",children:[i.jsx("th",{className:"p-2 border",children:"Fecha"}),i.jsx("th",{className:"p-2 border",children:"Nombre"}),i.jsx("th",{className:"p-2 border",children:"Paquetes totales"}),i.jsx("th",{className:"p-2 border",children:"Paquetes restantes"}),i.jsx("th",{className:"p-2 border",children:"Precio Proveedor"}),i.jsx("th",{className:"p-2 border",children:"Subtotal"}),i.jsx("th",{className:"p-2 border",children:"Esperado Rivas"}),i.jsx("th",{className:"p-2 border",children:"Esperado Isla"}),i.jsx("th",{className:"p-2 border",children:"Gastos log."}),i.jsx("th",{className:"p-2 border",children:"U. Bruta (est)"}),i.jsx("th",{className:"p-2 border",children:"Acciones"})]})}),i.jsx("tbody",{children:a?i.jsx("tr",{children:i.jsx("td",{colSpan:11,className:"p-4 text-center",children:"Cargando"})}):x.length===0?i.jsx("tr",{children:i.jsx("td",{colSpan:11,className:"p-4 text-center",children:"Sin ordenes maestras."})}):ht.map(Be=>{const vt=y[Be.id],hr=et(Be),xr=Be.totalPackages>0?(Be.subtotal/Be.totalPackages).toFixed(2):"0.00",Nr=Number(Be.logisticsCost||0),gr=Number(Be.totalRivas||0)-Number(Be.subtotal||0);return i.jsxs("tr",{className:"text-center whitespace-nowrap",children:[i.jsx("td",{className:"p-2 border",children:hr}),i.jsx("td",{className:"p-2 border text-left",children:Be.name}),i.jsx("td",{className:"p-2 border",children:Be.totalPackages}),i.jsx("td",{className:"p-2 border",children:vt?vt.remainingPackages:0}),i.jsx("td",{className:"p-2 border",children:xr}),i.jsx("td",{className:"p-2 border",children:Number(Be.subtotal||0).toFixed(2)}),i.jsx("td",{className:"p-2 border",children:Number(Be.totalRivas||0).toFixed(2)}),i.jsx("td",{className:"p-2 border",children:Number(Be.totalIsla||0).toFixed(2)}),i.jsx("td",{className:"p-2 border",children:Nr.toFixed(2)}),i.jsx("td",{className:"p-2 border",children:gr.toFixed(2)}),i.jsx("td",{className:"p-2 border",children:i.jsxs("div",{className:"flex gap-1 justify-center",children:[i.jsx("button",{className:"px-2 py-1 rounded bg-blue-600 text-white hover:bg-blue-700 text-xs",onClick:()=>Ot(Be),children:"Ver / Editar"}),i.jsx("button",{className:"px-2 py-1 rounded bg-red-600 text-white hover:bg-red-700 text-xs",onClick:()=>zt(Be),children:"Borrar"})]})})]},Be.id)})})]}),i.jsxs("div",{className:"mt-2 flex items-center justify-between",children:[i.jsxs("div",{className:"text-sm text-gray-600",children:["Mostrando ",Math.min((ye-1)*Le+1,x.length),"-",Math.min(ye*Le,x.length)," de ",x.length]}),i.jsxs("div",{className:"flex items-center gap-2",children:[i.jsx("button",{type:"button",disabled:ye<=1,onClick:()=>ue(Be=>Math.max(1,Be-1)),className:"px-2 py-1 rounded border disabled:opacity-50 text-sm",children:"Anterior"}),i.jsxs("div",{className:"px-3 py-1 border rounded text-sm",children:[ye," / ",ct]}),i.jsx("button",{type:"button",disabled:ye>=ct,onClick:()=>ue(Be=>Math.min(ct,Be+1)),className:"px-2 py-1 rounded border disabled:opacity-50 text-sm",children:"Siguiente"})]})]})]})]})]})}const v0=t=>`C$ ${(Number(t)||0).toFixed(2)}`;function sB(t){const e=Number(t.packages||0),r=Number(t.providerPrice||0),n=Number(t.unitsPerPackage||0),a=r*e,s=e>0&&n>0?e*n:1,o=Number(t.marginRivas||0),l=Number(t.marginSanJorge||0),c=Number(t.marginIsla||0),u=a*(1+o/100),d=a*(1+l/100),f=a*(1+c/100),A=u-a,h=d-a,m=f-a,p=u/s,x=d/s,v=f/s;return{...t,subtotal:Number(a.toFixed(2)),totalRivas:Number(u.toFixed(2)),totalSanJorge:Number(d.toFixed(2)),totalIsla:Number(f.toFixed(2)),gainRivas:Number(A.toFixed(2)),gainSanJorge:Number(h.toFixed(2)),gainIsla:Number(m.toFixed(2)),unitPriceRivas:Number(p.toFixed(2)),unitPriceSanJorge:Number(x.toFixed(2)),unitPriceIsla:Number(v.toFixed(2))}}function bG(t){return t.reduce((e,r)=>(e.totalPackages+=Number(r.packages||0),e.subtotal+=Number(r.subtotal||0),e.totalRivas+=Number(r.totalRivas||0),e.totalSanJorge+=Number(r.totalSanJorge||0),e.totalIsla+=Number(r.totalIsla||0),e),{totalPackages:0,subtotal:0,totalRivas:0,totalSanJorge:0,totalIsla:0})}function qc(t,e=0){const r=Number(t);return Number.isFinite(r)?r:e}function iB(t){const{margin:e,gain:r,subtotal:n,orderMargin:a}=t;if(e!=null&&Number.isFinite(Number(e)))return Number(e);const s=Number(n||0),o=Number(r);return Number.isFinite(o)&&s>0?o/s*100:Number(a||0)}function tVe(){var U,Y,ee;const[t,e]=g.useState([]),[r,n]=g.useState({}),[a,s]=g.useState(!0),[o,l]=g.useState(""),[c,u]=g.useState(Rr(Ud(new Date),"yyyy-MM-dd")),[d,f]=g.useState(Rr(Ld(new Date),"yyyy-MM-dd")),[A,h]=g.useState(!1),[m,p]=g.useState(!1),[x,v]=g.useState(null),[y,b]=g.useState([]),[w,j]=g.useState(0),[I,_]=g.useState(0),[S,E]=g.useState(0),[T,k]=g.useState(""),[B,D]=g.useState(""),[X,me]=g.useState(0),[pe,he]=g.useState(0),[ve,ae]=g.useState(1);g.useEffect(()=>{(async()=>{try{s(!0),l("");const M=Yt(mt(Se,"candy_main_orders"),In("createdAt","desc")),H=await kt(M),te=[];H.forEach(We=>{const ie=We.data();te.push({id:We.id,name:ie.name??"",date:ie.date??"",totalPackages:Number(ie.totalPackages??0),subtotal:Number(ie.subtotal??0),totalRivas:Number(ie.totalRivas??0),totalSanJorge:Number(ie.totalSanJorge??0),totalIsla:Number(ie.totalIsla??0),marginRivas:Number(ie.marginRivas??0),marginSanJorge:Number(ie.marginSanJorge??0),marginIsla:Number(ie.marginIsla??0),createdAt:ie.createdAt??Ar.now()})}),e(te);const Ce=await kt(Yt(mt(Se,"inventory_candies"))),V={};Ce.forEach(We=>{const ie=We.data(),J=ie.orderId;if(!J)return;const Oe=Number(ie.unitsPerPackage||1)||1,fe=Number(ie.totalUnits??(ie.packages||0)*Oe),_e=Math.round(fe/Oe),Ue=Number(ie.remaining??ie.totalUnits??fe),Ye=Number(ie.remainingPackages??NaN),At=Number.isFinite(Ye)?Math.round(Ye):Math.round(Ue/Oe);V[J]||(V[J]={orderId:J,totalPackages:0,remainingPackages:0}),V[J].totalPackages+=_e,V[J].remainingPackages+=At}),n(V)}catch(M){console.error(M),l(" Error cargando inventario de pedidos.")}finally{s(!1)}})()},[]);const Pe=g.useMemo(()=>t.filter(M=>{var te;const H=M.date||((te=M.createdAt)!=null&&te.toDate?M.createdAt.toDate().toISOString().slice(0,10):"");return!(!H||c&&H<c||d&&H>d)}),[t,c,d]),ke=g.useMemo(()=>{let M=0,H=0,te=0,Ce=0,V=0,We=0;for(const ie of Pe){M+=ie.totalPackages,H+=ie.subtotal,te+=ie.totalRivas,Ce+=ie.totalSanJorge,V+=ie.totalIsla;const J=r[ie.id];J&&(We+=J.remainingPackages)}return{totalPaquetes:M,totalSubtotal:H,totalRivas:te,totalSJ:Ce,totalIsla:V,totalPaquetesRestantes:We,totalPedidos:Pe.length}},[Pe,r]),O=async(M,H,te)=>{if(!x)return;const Ce=Number(te||0),V=y.map(J=>J.id!==M?J:sB({...J,[H]:Ce}));b(V);const We=V.find(J=>J.id===M);if(!We)return;const ie=bG(V);try{await kn(Gt(Se,"products_candies",M),{marginRivas:We.marginRivas,marginSanJorge:We.marginSanJorge,marginIsla:We.marginIsla,subtotal:We.subtotal,totalRivas:We.totalRivas,totalSanJorge:We.totalSanJorge,totalIsla:We.totalIsla,unitPriceRivas:We.unitPriceRivas,unitPriceSanJorge:We.unitPriceSanJorge,unitPriceIsla:We.unitPriceIsla,gainRivas:We.gainRivas,gainSanJorge:We.gainSanJorge,gainIsla:We.gainIsla}),await kn(Gt(Se,"candy_main_orders",x.id),{totalPackages:ie.totalPackages,subtotal:Number(ie.subtotal.toFixed(2)),totalRivas:Number(ie.totalRivas.toFixed(2)),totalSanJorge:Number(ie.totalSanJorge.toFixed(2)),totalIsla:Number(ie.totalIsla.toFixed(2))}),v(J=>J&&{...J,totalPackages:ie.totalPackages,subtotal:Number(ie.subtotal.toFixed(2)),totalRivas:Number(ie.totalRivas.toFixed(2)),totalSanJorge:Number(ie.totalSanJorge.toFixed(2)),totalIsla:Number(ie.totalIsla.toFixed(2))}),l(" Mrgenes del producto actualizados.")}catch(J){console.error(J),l(" Error actualizando mrgenes del producto.")}},G=async()=>{if(x)try{l("");const M=Number.isFinite(w)&&w!==0?w:x.marginRivas||0,H=Number.isFinite(I)&&I!==0?I:x.marginSanJorge||0,te=Number.isFinite(S)&&S!==0?S:x.marginIsla||0,Ce=sB({id:"tmp",name:T.trim(),category:B.trim(),providerPrice:Number(X||0),packages:Number(pe||0),unitsPerPackage:Number(ve||1),marginRivas:Number(M||0),marginSanJorge:Number(H||0),marginIsla:Number(te||0),subtotal:0,totalRivas:0,totalSanJorge:0,totalIsla:0,gainRivas:0,gainSanJorge:0,gainIsla:0,unitPriceRivas:0,unitPriceSanJorge:0,unitPriceIsla:0,remainingPackages:Number(pe||0)}),V=await Jn(mt(Se,"products_candies"),{orderId:x.id,inventoryDate:x.date||"",name:Ce.name,category:Ce.category,providerPrice:Ce.providerPrice,packages:Ce.packages,unitsPerPackage:Ce.unitsPerPackage,marginRivas:Ce.marginRivas,marginSanJorge:Ce.marginSanJorge,marginIsla:Ce.marginIsla,gainRivas:Ce.gainRivas,gainSanJorge:Ce.gainSanJorge,gainIsla:Ce.gainIsla,subtotal:Ce.subtotal,totalRivas:Ce.totalRivas,totalSanJorge:Ce.totalSanJorge,totalIsla:Ce.totalIsla,unitPriceRivas:Ce.unitPriceRivas,unitPriceSanJorge:Ce.unitPriceSanJorge,unitPriceIsla:Ce.unitPriceIsla,createdAt:Ar.now()}),ie=[{...Ce,id:V.id},...y];b(ie);const J=bG(ie);await kn(Gt(Se,"candy_main_orders",x.id),{totalPackages:J.totalPackages,subtotal:Number(J.subtotal.toFixed(2)),totalRivas:Number(J.totalRivas.toFixed(2)),totalSanJorge:Number(J.totalSanJorge.toFixed(2)),totalIsla:Number(J.totalIsla.toFixed(2))}),v(Oe=>Oe&&{...Oe,totalPackages:J.totalPackages,subtotal:Number(J.subtotal.toFixed(2)),totalRivas:Number(J.totalRivas.toFixed(2)),totalSanJorge:Number(J.totalSanJorge.toFixed(2)),totalIsla:Number(J.totalIsla.toFixed(2))}),j(0),_(0),E(0),k(""),D(""),me(0),he(0),ae(1),l(" Producto agregado con mrgenes por sucursal.")}catch(M){console.error(M),l(" Error agregando producto al pedido.")}},z=async M=>{try{v(M),b([]),h(!0),p(!0),l("");const H=await kt(Yt(mt(Se,"inventory_candies"),cr("orderId","==",M.id))),te={};H.forEach(We=>{const ie=We.data(),J=ie.productId;if(!J)return;const Oe=Number(ie.unitsPerPackage||1)||1,fe=Number(ie.remaining??ie.totalUnits??0),_e=Number(ie.remainingPackages??NaN),Ue=Number.isFinite(_e)?Math.round(_e):Math.round(fe/Oe);te[J]=(te[J]||0)+Ue});const Ce=await kt(Yt(mt(Se,"products_candies"),cr("orderId","==",M.id))),V=[];Ce.forEach(We=>{const ie=We.data(),J=qc(ie.providerPrice,0),Oe=qc(ie.packages,0),fe=ie.subtotal??J*Oe,_e=iB({margin:ie.marginRivas,gain:ie.gainRivas,subtotal:fe,orderMargin:M.marginRivas||0}),Ue=iB({margin:ie.marginSanJorge,gain:ie.gainSanJorge,subtotal:fe,orderMargin:M.marginSanJorge||0}),Ye=iB({margin:ie.marginIsla,gain:ie.gainIsla,subtotal:fe,orderMargin:M.marginIsla||0}),At=sB({id:We.id,name:ie.name??"",category:ie.category??"",providerPrice:J,packages:Oe,unitsPerPackage:qc(ie.unitsPerPackage,1),marginRivas:Number(_e||0),marginSanJorge:Number(Ue||0),marginIsla:Number(Ye||0),subtotal:qc(ie.subtotal,0),totalRivas:qc(ie.totalRivas,0),totalSanJorge:qc(ie.totalSanJorge,0),totalIsla:qc(ie.totalIsla,0),gainRivas:qc(ie.gainRivas,0),gainSanJorge:qc(ie.gainSanJorge,0),gainIsla:qc(ie.gainIsla,0),unitPriceRivas:qc(ie.unitPriceRivas,0),unitPriceSanJorge:qc(ie.unitPriceSanJorge,0),unitPriceIsla:qc(ie.unitPriceIsla,0),remainingPackages:te[We.id]??qc(ie.packages,0)});V.push(At)}),b(V)}catch(H){console.error(H),l(" Error cargando productos del pedido.")}finally{p(!1)}};return i.jsxs("div",{className:"max-w-7xl mx-auto",children:[i.jsx("div",{className:"flex items-center justify-between mb-3",children:i.jsx("h2",{className:"text-2xl font-bold",children:"Inventario Ordenes Maestras"})}),i.jsxs("div",{className:"bg-white p-3 rounded shadow border mb-4 flex flex-wrap items-end gap-3 text-sm",children:[i.jsxs("div",{className:"flex flex-col",children:[i.jsx("label",{className:"font-semibold",children:"Desde"}),i.jsx("input",{type:"date",className:"border rounded px-2 py-1",value:c,onChange:M=>u(M.target.value)})]}),i.jsxs("div",{className:"flex flex-col",children:[i.jsx("label",{className:"font-semibold",children:"Hasta"}),i.jsx("input",{type:"date",className:"border rounded px-2 py-1",value:d,onChange:M=>f(M.target.value)})]}),i.jsx("button",{className:"px-3 py-1 rounded bg-gray-200 hover:bg-gray-300",onClick:()=>{u(""),f("")},children:"Quitar filtro"}),i.jsxs("div",{className:"ml-auto text-xs md:text-sm text-gray-600",children:["Cantidad de pedidos:"," ",i.jsx("span",{className:"font-semibold",children:ke.totalPedidos})]})]}),i.jsx("div",{className:"bg-gray-50 p-3 rounded shadow border mb-3 text-sm md:text-base",children:i.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-y-2 gap-x-8",children:[i.jsxs("div",{children:[i.jsx("span",{className:"font-semibold",children:"Paquetes totales:"})," ",ke.totalPaquetes]}),i.jsxs("div",{children:[i.jsx("span",{className:"font-semibold",children:"Paquetes restantes:"})," ",ke.totalPaquetesRestantes]}),i.jsxs("div",{children:[i.jsx("span",{className:"font-semibold",children:"Subtotal total:"})," ",v0(ke.totalSubtotal)]}),i.jsxs("div",{children:[i.jsx("span",{className:"font-semibold",children:"Total Rivas (todo):"})," ",v0(ke.totalRivas)]}),i.jsxs("div",{children:[i.jsx("span",{className:"font-semibold",children:"Total San Jorge (todo):"})," ",v0(ke.totalSJ)]}),i.jsxs("div",{children:[i.jsx("span",{className:"font-semibold",children:"Total Isla (todo):"})," ",v0(ke.totalIsla)]})]})}),i.jsx("div",{className:"bg-white p-2 rounded shadow border w-full overflow-x-auto mt-2",children:i.jsxs("table",{className:"min-w-[900px] text-xs md:text-sm",children:[i.jsx("thead",{className:"bg-gray-100",children:i.jsxs("tr",{className:"whitespace-nowrap",children:[i.jsx("th",{className:"p-2 border",children:"Fecha"}),i.jsx("th",{className:"p-2 border",children:"Nombre"}),i.jsx("th",{className:"p-2 border",children:"Paquetes totales"}),i.jsx("th",{className:"p-2 border",children:"Paquetes restantes"}),i.jsx("th",{className:"p-2 border",children:"Subtotal"}),i.jsx("th",{className:"p-2 border",children:"Total Rivas"}),i.jsx("th",{className:"p-2 border",children:"Total San Jorge"}),i.jsx("th",{className:"p-2 border",children:"Total Isla"}),i.jsx("th",{className:"p-2 border",children:"P. prom. Rivas"}),i.jsx("th",{className:"p-2 border",children:"P. prom. San Jorge"}),i.jsx("th",{className:"p-2 border",children:"P. prom. Isla"}),i.jsx("th",{className:"p-2 border",children:"Acciones"})]})}),i.jsx("tbody",{children:a?i.jsx("tr",{children:i.jsx("td",{colSpan:12,className:"p-4 text-center",children:"Cargando"})}):Pe.length===0?i.jsx("tr",{children:i.jsx("td",{colSpan:12,className:"p-4 text-center",children:"Sin pedidos generales en este rango."})}):Pe.map(M=>{var ie;const H=M.totalPackages>0?Math.round(M.totalRivas/M.totalPackages):0,te=M.totalPackages>0?Math.round(M.totalSanJorge/M.totalPackages):0,Ce=M.totalPackages>0?Math.round(M.totalIsla/M.totalPackages):0,V=M.date||((ie=M.createdAt)!=null&&ie.toDate?M.createdAt.toDate().toISOString().slice(0,10):""),We=r[M.id];return i.jsxs("tr",{className:"text-center whitespace-nowrap",children:[i.jsx("td",{className:"p-2 border",children:V}),i.jsx("td",{className:"p-2 border",children:M.name}),i.jsx("td",{className:"p-2 border",children:M.totalPackages}),i.jsx("td",{className:"p-2 border",children:We?We.remainingPackages:0}),i.jsx("td",{className:"p-2 border",children:M.subtotal.toFixed(2)}),i.jsx("td",{className:"p-2 border",children:M.totalRivas.toFixed(2)}),i.jsx("td",{className:"p-2 border",children:M.totalSanJorge.toFixed(2)}),i.jsx("td",{className:"p-2 border",children:M.totalIsla.toFixed(2)}),i.jsx("td",{className:"p-2 border",children:H}),i.jsx("td",{className:"p-2 border",children:te}),i.jsx("td",{className:"p-2 border",children:Ce}),i.jsx("td",{className:"p-2 border",children:i.jsx("button",{className:"px-2 py-1 rounded bg-blue-600 text-white hover:bg-blue-700 text-xs",onClick:()=>z(M),children:"Ver pedido"})})]},M.id)})})]})}),A&&x&&i.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-40 flex items-center justify-center z-50",children:i.jsxs("div",{className:"bg-white p-6 rounded shadow-lg w-full max-w-5xl max-h-[90vh] overflow-y-auto text-sm",children:[i.jsxs("div",{className:"flex justify-between items-center mb-3",children:[i.jsxs("h3",{className:"text-xl font-bold",children:["Detalle: ",x.name]}),i.jsx("button",{className:"px-3 py-1 rounded bg-gray-200 hover:bg-gray-300 text-xs",onClick:()=>{h(!1),v(null),b([]),l("")},children:"Cerrar"})]}),i.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-3 mb-4 text-xs md:text-sm",children:[i.jsxs("div",{className:"p-2 border rounded bg-gray-50",children:[i.jsx("div",{className:"text-gray-600",children:"Fecha del pedido"}),i.jsx("div",{className:"font-semibold",children:x.date||((U=x.createdAt)!=null&&U.toDate?x.createdAt.toDate().toISOString().slice(0,10):"")})]}),i.jsxs("div",{className:"p-2 border rounded bg-gray-50",children:[i.jsx("div",{className:"text-gray-600",children:"Paquetes totales"}),i.jsx("div",{className:"font-semibold",children:((Y=r[x.id])==null?void 0:Y.totalPackages)??x.totalPackages})]}),i.jsxs("div",{className:"p-2 border rounded bg-gray-50",children:[i.jsx("div",{className:"text-gray-600",children:"Paquetes restantes"}),i.jsx("div",{className:"font-semibold",children:((ee=r[x.id])==null?void 0:ee.remainingPackages)??0})]}),i.jsxs("div",{className:"p-2 border rounded bg-gray-50",children:[i.jsx("div",{className:"text-gray-600",children:"Subtotal (proveedor)"}),i.jsx("div",{className:"font-semibold",children:v0(x.subtotal)})]}),i.jsxs("div",{className:"p-2 border rounded bg-gray-50",children:[i.jsx("div",{className:"text-gray-600",children:"Total Rivas"}),i.jsx("div",{className:"font-semibold",children:v0(x.totalRivas)})]}),i.jsxs("div",{className:"p-2 border rounded bg-gray-50",children:[i.jsx("div",{className:"text-gray-600",children:"Total San Jorge"}),i.jsx("div",{className:"font-semibold",children:v0(x.totalSanJorge)})]}),i.jsxs("div",{className:"p-2 border rounded bg-gray-50",children:[i.jsx("div",{className:"text-gray-600",children:"Total Isla"}),i.jsx("div",{className:"font-semibold",children:v0(x.totalIsla)})]})]}),i.jsxs("div",{className:"bg-white border rounded p-3 mb-4",children:[i.jsx("div",{className:"font-semibold mb-2",children:"Agregar producto"}),i.jsxs("div",{className:"flex flex-wrap gap-2 items-end text-xs",children:[i.jsxs("div",{className:"flex flex-col",children:[i.jsx("label",{className:"text-gray-600",children:"Margen Rivas"}),i.jsx("input",{type:"number",className:"border rounded px-2 py-1 w-28 text-right",value:w,onChange:M=>j(Number(M.target.value||0))})]}),i.jsxs("div",{className:"flex flex-col",children:[i.jsx("label",{className:"text-gray-600",children:"Margen SJ"}),i.jsx("input",{type:"number",className:"border rounded px-2 py-1 w-28 text-right",value:I,onChange:M=>_(Number(M.target.value||0))})]}),i.jsxs("div",{className:"flex flex-col",children:[i.jsx("label",{className:"text-gray-600",children:"Margen Isla"}),i.jsx("input",{type:"number",className:"border rounded px-2 py-1 w-28 text-right",value:S,onChange:M=>E(Number(M.target.value||0))})]}),i.jsxs("div",{className:"flex flex-col",children:[i.jsx("label",{className:"text-gray-600",children:"Producto"}),i.jsx("input",{className:"border rounded px-2 py-1 w-56",value:T,onChange:M=>k(M.target.value)})]}),i.jsxs("div",{className:"flex flex-col",children:[i.jsx("label",{className:"text-gray-600",children:"Categora"}),i.jsx("input",{className:"border rounded px-2 py-1 w-40",value:B,onChange:M=>D(M.target.value)})]}),i.jsxs("div",{className:"flex flex-col",children:[i.jsx("label",{className:"text-gray-600",children:"P. proveedor (paq)"}),i.jsx("input",{type:"number",className:"border rounded px-2 py-1 w-32 text-right",value:X,onChange:M=>me(Number(M.target.value||0))})]}),i.jsxs("div",{className:"flex flex-col",children:[i.jsx("label",{className:"text-gray-600",children:"Paquetes"}),i.jsx("input",{type:"number",className:"border rounded px-2 py-1 w-24 text-right",value:pe,onChange:M=>he(Number(M.target.value||0))})]}),i.jsxs("div",{className:"flex flex-col",children:[i.jsx("label",{className:"text-gray-600",children:"Und x Paq"}),i.jsx("input",{type:"number",className:"border rounded px-2 py-1 w-24 text-right",value:ve,onChange:M=>ae(Number(M.target.value||1))})]}),i.jsx("button",{className:"px-3 py-2 rounded bg-green-600 text-white hover:bg-green-700",onClick:G,children:"Agregar producto"})]})]}),i.jsx("h4",{className:"font-semibold mb-2",children:"Productos del pedido"}),i.jsx("div",{className:"bg-white rounded border overflow-x-auto",children:i.jsxs("table",{className:"min-w-[1200px] text-xs md:text-sm",children:[i.jsx("thead",{className:"bg-gray-100",children:i.jsxs("tr",{className:"whitespace-nowrap",children:[i.jsx("th",{className:"p-2 border",children:"Producto"}),i.jsx("th",{className:"p-2 border",children:"Categora"}),i.jsx("th",{className:"p-2 border",children:"Paquetes"}),i.jsx("th",{className:"p-2 border",children:"Paquetes restantes"}),i.jsx("th",{className:"p-2 border",children:"Und x Paq"}),i.jsx("th",{className:"p-2 border",children:"P. proveedor (paq)"}),i.jsx("th",{className:"p-2 border",children:"Margen Rivas (%)"}),i.jsx("th",{className:"p-2 border",children:"Margen San Jorge (%)"}),i.jsx("th",{className:"p-2 border",children:"Margen Isla (%)"}),i.jsx("th",{className:"p-2 border",children:"Subtotal"}),i.jsx("th",{className:"p-2 border",children:"Total Rivas"}),i.jsx("th",{className:"p-2 border",children:"Total San Jorge"}),i.jsx("th",{className:"p-2 border",children:"Total Isla"}),i.jsx("th",{className:"p-2 border",children:"P. unidad Rivas"}),i.jsx("th",{className:"p-2 border",children:"P. unidad San Jorge"}),i.jsx("th",{className:"p-2 border",children:"P. unidad Isla"})]})}),i.jsx("tbody",{children:m?i.jsx("tr",{children:i.jsx("td",{colSpan:16,className:"p-4 text-center",children:"Cargando productos"})}):y.length===0?i.jsx("tr",{children:i.jsx("td",{colSpan:16,className:"p-4 text-center",children:"Este pedido no tiene productos registrados."})}):y.map(M=>i.jsxs("tr",{className:"text-center whitespace-nowrap",children:[i.jsx("td",{className:"p-2 border",children:M.name}),i.jsx("td",{className:"p-2 border",children:M.category}),i.jsx("td",{className:"p-2 border",children:M.packages}),i.jsx("td",{className:"p-2 border",children:M.remainingPackages??M.packages}),i.jsx("td",{className:"p-2 border",children:M.unitsPerPackage}),i.jsx("td",{className:"p-2 border",children:M.providerPrice.toFixed(2)}),i.jsx("td",{className:"p-2 border",children:i.jsx("input",{type:"number",className:"w-20 border rounded px-1 py-0.5 text-right text-xs",value:M.marginRivas??0,onChange:H=>O(M.id,"marginRivas",H.target.value)})}),i.jsx("td",{className:"p-2 border",children:i.jsx("input",{type:"number",className:"w-20 border rounded px-1 py-0.5 text-right text-xs",value:M.marginSanJorge??0,onChange:H=>O(M.id,"marginSanJorge",H.target.value)})}),i.jsx("td",{className:"p-2 border",children:i.jsx("input",{type:"number",className:"w-20 border rounded px-1 py-0.5 text-right text-xs",value:M.marginIsla??0,onChange:H=>O(M.id,"marginIsla",H.target.value)})}),i.jsx("td",{className:"p-2 border",children:M.subtotal.toFixed(2)}),i.jsx("td",{className:"p-2 border",children:M.totalRivas.toFixed(2)}),i.jsx("td",{className:"p-2 border",children:M.totalSanJorge.toFixed(2)}),i.jsx("td",{className:"p-2 border",children:M.totalIsla.toFixed(2)}),i.jsx("td",{className:"p-2 border",children:M.unitPriceRivas}),i.jsx("td",{className:"p-2 border",children:M.unitPriceSanJorge}),i.jsx("td",{className:"p-2 border",children:M.unitPriceIsla})]},M.id))})]})}),o&&i.jsx("p",{className:"mt-3 text-sm",children:o})]})}),o&&!A&&i.jsx("p",{className:"mt-2 text-sm",children:o})]})}const fs=t=>Math.round((Number(t)||0)*100)/100,vx=t=>Math.round((Number(t)||0)*1e3)/1e3,dl=t=>Number(t??0).toFixed(2),tp=t=>Number(t??0).toFixed(3);async function rVe(t){if(!t)return;const e=Yt(mt(Se,"ar_movements"),cr("ref.saleId","==",t)),r=await kt(e);await Promise.all(r.docs.map(n=>Kn(Gt(Se,"ar_movements",n.id))))}const nVe=(t,e)=>{var h;const r=t.date??((h=t.timestamp)!=null&&h.toDate?Rr(t.timestamp.toDate(),"yyyy-MM-dd"):"");if(!r)return[];const n=t.userEmail??"",a=t.vendorName||t.vendor||n||t.vendorId||"(sin vendedor)",s=t.type||"CONTADO",o=t.vendorId,l=Number(t.total??t.itemsTotal??t.amount??t.amountCharged??0)||0,c=Number(t.vendorCommissionAmount??0)||0,u=t.processedDate??t.closureDate??"";if(Array.isArray(t.items)&&t.items.length>0)return t.items.map((m,p)=>{const x=Number((m==null?void 0:m.packages)??(m==null?void 0:m.qty)??(m==null?void 0:m.quantity)??0),v=Number((m==null?void 0:m.lineFinal)??0)||Math.max(0,Number((m==null?void 0:m.unitPricePackage)||(m==null?void 0:m.unitPrice)||0)*x-Number((m==null?void 0:m.discount)||0));let y=0;return c>0&&l>0&&Number(v||0)>0&&(y=fs(c*Number(v||0)/l)),{id:`${e}#${p}`,productName:String((m==null?void 0:m.productName)??"(sin nombre)"),quantity:x,amount:fs(v),amountSuggested:Number(t.amountSuggested??0),date:r,userEmail:a,sellerEmail:n,clientName:t.clientName??"",amountReceived:Number(t.amountReceived??0),change:String(t.change??"0"),status:t.status??"FLOTANTE",allocations:Array.isArray(m==null?void 0:m.allocations)?m.allocations:t.allocations,avgUnitCost:Number((m==null?void 0:m.avgUnitCost)??t.avgUnitCost??0),cogsAmount:Number((m==null?void 0:m.cogsAmount)??0),type:s,vendorId:o,vendorCommissionAmount:y,processedDate:u||""}});const d=Number(t.packagesTotal??t.quantity??0),f=Number(t.amount??t.amountCharged??t.total??0)||0;let A=0;return A=fs(Number(t.vendorCommissionAmount??0)||0),[{id:e,productName:t.productName??"(sin nombre)",quantity:d,amount:f,amountSuggested:Number(t.amountSuggested??0),date:r,userEmail:a,sellerEmail:n,clientName:t.clientName??"",amountReceived:Number(t.amountReceived??0),change:String(t.change??"0"),status:t.status??"FLOTANTE",allocations:t.allocations,avgUnitCost:t.avgUnitCost,cogsAmount:t.cogsAmount,type:s,vendorId:o,vendorCommissionAmount:A,processedDate:u||""}]};function aVe({role:t,currentUserEmail:e,sellerCandyId:r,roles:n}){const[a,s]=g.useState([]),[o,l]=g.useState(null),[c,u]=g.useState(!0),[d,f]=g.useState(""),[A,h]=g.useState("ALL"),m=Rr(new Date,"yyyy-MM-dd"),[p,x]=g.useState(m),[v,y]=g.useState(m),[b,w]=g.useState("ALL"),[j,I]=g.useState(null),[_,S]=g.useState(0),[E,T]=g.useState(0),[k,B]=g.useState(""),[D,X]=g.useState(0),[me,pe]=g.useState("0"),he=g.useRef(null),ve=n&&n.length?n:t,ae=!ve||En(ve,"admin"),Pe=En(ve,"vendedor_dulces"),ke=(e||"").trim().toLowerCase(),[O,G]=g.useState([]);g.useEffect(()=>{if(!p||!v)return;u(!0);const q=Yt(mt(Se,"sales_candies"),cr("date",">=",p),cr("date","<=",v),In("date","asc")),se=jd(q,ye=>{const ue=[];ye.forEach(Le=>{const ct=nVe(Le.data(),Le.id);ue.push(...ct)}),s(ue),u(!1)},ye=>{console.error("Error cargando ventas por periodo:",ye),s([]),u(!1)});return()=>se()},[p,v]),g.useEffect(()=>{(async()=>{const se=Yt(mt(Se,"daily_closures_candies"),cr("date","==",m)),ye=await kt(se);if(ye.empty)l(null);else{const ue=ye.docs[0];l({id:ue.id,...ue.data()})}})()},[m]),g.useEffect(()=>{(async()=>{try{const se=await kt(mt(Se,"sellers_candies")),ye=[];se.forEach(ue=>{const Le=ue.data();ye.push({id:ue.id,name:Le.name||"",commissionPercent:Number(Le.commissionPercent||0)})}),G(ye)}catch(se){console.error("Error cargando sellers_candies",se)}})()},[]);const z=q=>fs(Number(q.vendorCommissionAmount??0)||0),U=Wo.useMemo(()=>{let q=[...a];return A==="FLOTANTE"&&(q=q.filter(se=>se.status==="FLOTANTE")),A==="PROCESADA"&&(q=q.filter(se=>se.status==="PROCESADA")),ae&&b!=="ALL"&&(q=q.filter(se=>(se.vendorId||"")===b)),Pe&&(r?q=q.filter(se=>(se.vendorId||"")===r):ke?q=q.filter(se=>(se.sellerEmail||"").toLowerCase()===ke):q=[]),q},[A,a,ae,b,Pe,r,ke]),Y=Wo.useMemo(()=>U.filter(q=>q.status==="FLOTANTE").length,[U]),ee=Wo.useMemo(()=>U.filter(q=>q.status==="PROCESADA").length,[U]),M=Wo.useMemo(()=>U.filter(q=>q.type==="CREDITO").length,[U]),H=Wo.useMemo(()=>U.filter(q=>q.type!=="CREDITO").length,[U]),te=vx(U.reduce((q,se)=>q+(se.quantity||0),0)),Ce=fs(U.reduce((q,se)=>q+Number(se.cogsAmount??0),0)),V=fs(U.reduce((q,se)=>q+(se.amount||0),0)),We=fs(V-Ce);let ie=0,J=0,Oe=0,fe=0,_e=0,Ue=0,Ye=0;U.forEach(q=>{const se=Number(q.amount||0),ye=Number(q.amountReceived||0),ue=z(q);_e+=ue,q.type==="CREDITO"?(ie+=q.quantity||0,Oe+=se-ye,Ye+=ue):(J+=q.quantity||0,fe+=se,Ue+=ue)}),Oe=fs(Oe),fe=fs(fe),_e=fs(_e),Ue=fs(Ue),Ye=fs(Ye);const At=Wo.useMemo(()=>{const q={};for(const se of U){const ye=(se.vendorId||"").trim();if(!ye||se.type==="CREDITO")continue;const ue=z(se);if(!q[ye]){const Le=O.find(ct=>ct.id===ye);q[ye]={vendorId:ye,name:(Le==null?void 0:Le.name)||se.userEmail||"(sin vendedor)",total:0}}q[ye].total=fs(q[ye].total+ue)}return Object.values(q).filter(se=>se.total>0).sort((se,ye)=>ye.total-se.total)},[U,O]),yt=Wo.useMemo(()=>{const q={};for(const se of U){const ye=(se.vendorId||"").trim();if(!ye||se.type!=="CREDITO")continue;const ue=z(se);if(!q[ye]){const Le=O.find(ct=>ct.id===ye);q[ye]={vendorId:ye,name:(Le==null?void 0:Le.name)||se.userEmail||"(sin vendedor)",total:0}}q[ye].total=fs(q[ye].total+ue)}return Object.values(q).filter(se=>se.total>0).sort((se,ye)=>ye.total-se.total)},[U,O]),bt={};U.forEach(q=>{const se=q.productName||"(sin nombre)";bt[se]||(bt[se]={totalQuantity:0,totalAmount:0,totalCommission:0}),bt[se].totalQuantity=vx(bt[se].totalQuantity+(q.quantity||0)),bt[se].totalAmount=fs(bt[se].totalAmount+(q.amount||0)),bt[se].totalCommission=fs(bt[se].totalCommission+z(q))});const Nt=Object.entries(bt).map(([q,se])=>({productName:q,totalQuantity:se.totalQuantity,totalAmount:se.totalAmount,totalCommission:se.totalCommission})),jt=async()=>{if(ae)try{const q=U.filter(Ae=>Ae.status==="FLOTANTE");if(q.length===0){f("No hay ventas flotantes para procesar en este perodo.");return}const se={totalCharged:fs(q.reduce((Ae,Re)=>Ae+(Re.amount||0),0)),totalSuggested:fs(q.reduce((Ae,Re)=>Ae+(Re.amountSuggested||0),0)),totalUnits:vx(q.reduce((Ae,Re)=>Ae+(Re.quantity||0),0)),totalCOGS:fs(q.reduce((Ae,Re)=>Ae+Number(Re.cogsAmount??0),0))},ye=fs(se.totalCharged-se.totalSuggested),ue=fs(se.totalCharged-se.totalCOGS),Le=q.reduce((Ae,Re)=>{const lt=Number(Re.quantity||0),Ne=Number(Re.amount||0),De=Number(Re.vendorCommissionAmount||0);return Re.type==="CREDITO"?(Ae.packsCredit+=lt,Ae.amountCredit+=Ne,Ae.comCredit+=De):(Ae.packsCash+=lt,Ae.amountCash+=Ne,Ae.comCash+=De),Ae},{packsCash:0,packsCredit:0,amountCash:0,amountCredit:0,comCash:0,comCredit:0}),ct={totalPacksCash:vx(Le.packsCash),totalPacksCredit:vx(Le.packsCredit),totalAmountCash:fs(Le.amountCash),totalAmountCredit:fs(Le.amountCredit),totalCommissionCash:fs(Le.comCash),totalCommissionCredit:fs(Le.comCredit)},ht=await Jn(mt(Se,"daily_closures_candies"),{date:m,createdAt:Ar.now(),periodStart:p,periodEnd:v,totalCharged:se.totalCharged,totalSuggested:se.totalSuggested,totalDifference:ye,totalUnits:se.totalUnits,totalCOGS:se.totalCOGS,grossProfit:ue,...ct,products:q.map(Ae=>({productName:Ae.productName,quantity:Ae.quantity,amount:Ae.amount})),sales:q.map(Ae=>({id:Ae.id,productName:Ae.productName,quantity:Ae.quantity,amount:Ae.amount,amountSuggested:Ae.amountSuggested,userEmail:Ae.userEmail,clientName:Ae.clientName,amountReceived:Ae.amountReceived,change:Ae.change,status:Ae.status,cogsAmount:Ae.cogsAmount??0,avgUnitCost:Ae.avgUnitCost??null,allocations:Ae.allocations??[],date:Ae.date,type:Ae.type??"CONTADO",vendorId:Ae.vendorId??"",vendorCommissionAmount:Number(Ae.vendorCommissionAmount??0)||0,processedDate:m})),productSummary:Object.entries(q.reduce((Ae,Re)=>{const lt=Re.productName||"(sin nombre)";return Ae[lt]||(Ae[lt]={totalQuantity:0,totalAmount:0}),Ae[lt].totalQuantity=vx(Ae[lt].totalQuantity+(Re.quantity||0)),Ae[lt].totalAmount=fs(Ae[lt].totalAmount+(Re.amount||0)),Ae},{})).map(([Ae,Re])=>({productName:Ae,totalQuantity:Re.totalQuantity,totalAmount:Re.totalAmount}))}),xe=tu(Se);q.forEach(Ae=>{xe.update(Gt(Se,"sales_candies",Ae.id.split("#")[0]),{status:"PROCESADA",closureId:ht.id,closureDate:m,processedDate:m,processedAt:Ar.now()})}),await xe.commit(),f(` Cierre guardado. Ventas procesadas: ${q.length}. (Proceso: ${m})`)}catch(q){console.error(q),f(" Error al guardar el cierre de dulces.")}},St=async q=>{if(ae&&window.confirm("Revertir esta venta? Esta accin no se puede deshacer."))try{await kn(Gt(Se,"sales_candies",q.split("#")[0]),{status:"FLOTANTE",closureId:null,closureDate:null,processedDate:null,processedAt:null}),f(" Venta revertida a FLOTANTE.")}catch(se){console.error(se),f(" No se pudo revertir la venta.")}},Ve=q=>{ae&&(I(q),S(q.quantity),T(q.amount),B(q.clientName),X(q.amountReceived),pe(q.change))},Te=async()=>{if(!(!j||!ae))try{await kn(Gt(Se,"sales_candies",j.id.split("#")[0]),{packagesTotal:_,amount:E,amountCharged:E,clientName:k,amountReceived:D,change:me}),I(null),f(" Venta de dulces actualizada.")}catch(q){console.error(q),f(" No se pudo actualizar la venta de dulces.")}},qe=async q=>{if(ae&&window.confirm("Eliminar esta venta? Se restaurar el stock (paquetes) en los lotes asignados."))try{const se=q.split("#")[0],{restored:ye}=await wQe(se);await rVe(se),f(` Venta eliminada. Stock restaurado (unidades internas): ${Number(ye).toFixed(2)}. Estado de cuenta ajustado.`)}catch(se){console.error(se),f(" No se pudo eliminar la venta de dulces.")}},ge=async()=>{if(he.current){he.current.classList.add("force-pdf-colors"),he.current.classList.add("pdf-print-mode");try{const se=(await kg(he.current,{backgroundColor:"#ffffff"})).toDataURL("image/png"),ye=new rn;ye.addImage(se,"PNG",10,10,190,0),ye.save(`cierre_dulces_${p}_a_${v}_proc_${m}.pdf`)}finally{he.current.classList.remove("pdf-print-mode"),he.current.classList.remove("force-pdf-colors")}}};return i.jsxs("div",{className:"max-w-7xl mx-auto bg-white p-6 rounded-2xl shadow-2xl",children:[i.jsx("style",{children:`
        .pdf-print-mode .pdf-desktop { display: block !important; }
        .pdf-print-mode .pdf-mobile  { display: none !important; }
      `}),i.jsxs("h2",{className:"text-2xl font-bold mb-4",children:["Cierre de Ventas de Dulces - Proceso: ",m]}),i.jsxs("div",{className:"flex flex-col md:flex-row md:items-end gap-3 mb-4",children:[i.jsxs("div",{className:"flex items-center gap-2",children:[i.jsx("label",{className:"text-sm",children:"Desde:"}),i.jsx("input",{type:"date",className:"border rounded px-2 py-1",value:p,onChange:q=>x(q.target.value)})]}),i.jsxs("div",{className:"flex items-center gap-2",children:[i.jsx("label",{className:"text-sm",children:"Hasta:"}),i.jsx("input",{type:"date",className:"border rounded px-2 py-1",value:v,onChange:q=>y(q.target.value)})]}),i.jsxs("div",{className:"flex items-center gap-2",children:[i.jsx("label",{className:"text-sm",children:"Filtrar:"}),i.jsxs("select",{className:"border rounded px-2 py-1",value:A,onChange:q=>h(q.target.value),children:[i.jsx("option",{value:"ALL",children:"Todas"}),i.jsx("option",{value:"FLOTANTE",children:"Venta Flotante"}),i.jsx("option",{value:"PROCESADA",children:"Venta Procesada"})]})]}),ae&&i.jsxs("div",{className:"flex items-center gap-2",children:[i.jsx("label",{className:"text-sm",children:"Vendedor:"}),i.jsxs("select",{className:"border rounded px-2 py-1",value:b,onChange:q=>w(q.target.value),children:[i.jsx("option",{value:"ALL",children:"Todos"}),O.map(q=>i.jsx("option",{value:q.id,children:q.name||q.id},q.id))]})]})]}),i.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 lg:grid-cols-5 gap-3 mb-4",children:[i.jsxs("div",{className:"border rounded-xl p-3 shadow-sm bg-gray-50",children:[i.jsx("div",{className:"text-xs text-gray-600",children:"Ventas flotantes"}),i.jsx("div",{className:"text-2xl font-bold",children:Y}),i.jsxs("div",{className:"text-xs text-gray-500 mt-1",children:["Perodo: ",p,"  ",v]})]}),i.jsxs("div",{className:"border rounded-xl p-3 shadow-sm bg-gray-50",children:[i.jsx("div",{className:"text-xs text-gray-600",children:"Ventas procesadas"}),i.jsx("div",{className:"text-2xl font-bold",children:ee}),i.jsxs("div",{className:"text-xs text-gray-500 mt-1",children:["Perodo: ",p,"  ",v]})]}),i.jsxs("div",{className:"border rounded-xl p-3 shadow-sm bg-gray-50",children:[i.jsx("div",{className:"text-xs text-gray-600",children:"Ventas crdito"}),i.jsx("div",{className:"text-2xl font-bold",children:M}),i.jsxs("div",{className:"text-xs text-gray-500 mt-1",children:["Perodo: ",p,"  ",v]})]}),i.jsxs("div",{className:"border rounded-xl p-3 shadow-sm bg-gray-50",children:[i.jsx("div",{className:"text-xs text-gray-600",children:"Ventas cash"}),i.jsx("div",{className:"text-2xl font-bold",children:H}),i.jsxs("div",{className:"text-xs text-gray-500 mt-1",children:["Perodo: ",p,"  ",v]})]}),i.jsxs("div",{className:"border rounded-xl p-3 shadow-sm bg-gray-50",children:[i.jsx("div",{className:"text-xs text-gray-600",children:"Comisin cash (perodo)"}),i.jsxs("div",{className:"text-2xl font-bold",children:["C$",dl(Ue)]}),i.jsxs("div",{className:"text-xs text-gray-500 mt-1",children:["Perodo: ",p,"  ",v]})]}),i.jsxs("div",{className:"border rounded-xl p-3 shadow-sm bg-gray-50",children:[i.jsx("div",{className:"text-xs text-gray-600",children:"Comisin crdito (perodo)"}),i.jsxs("div",{className:"text-2xl font-bold",children:["C$",dl(Ye)]}),i.jsxs("div",{className:"text-xs text-gray-500 mt-1",children:["Perodo: ",p,"  ",v]})]})]}),i.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-3 mb-4",children:[i.jsxs("div",{className:"border rounded-xl p-3 shadow-sm bg-gray-50",children:[i.jsx("div",{className:"text-xs text-gray-600",children:"Vendedores (comisin CASH del perodo)"}),At.length===0?i.jsx("div",{className:"text-sm text-gray-500 mt-2",children:""}):i.jsx("div",{className:"mt-2 space-y-1 max-h-28 overflow-auto pr-1",children:At.map(q=>i.jsxs("div",{className:"flex items-center justify-between text-sm",children:[i.jsx("span",{className:"truncate",children:q.name}),i.jsxs("strong",{className:"ml-2",children:["C$",dl(q.total)]})]},q.vendorId))})]}),i.jsxs("div",{className:"border rounded-xl p-3 shadow-sm bg-gray-50",children:[i.jsx("div",{className:"text-xs text-gray-600",children:"Vendedores (comisin CRDITO del perodo)"}),yt.length===0?i.jsx("div",{className:"text-sm text-gray-500 mt-2",children:""}):i.jsx("div",{className:"mt-2 space-y-1 max-h-28 overflow-auto pr-1",children:yt.map(q=>i.jsxs("div",{className:"flex items-center justify-between text-sm",children:[i.jsx("span",{className:"truncate",children:q.name}),i.jsxs("strong",{className:"ml-2",children:["C$",dl(q.total)]})]},q.vendorId))})]})]}),c?i.jsx("p",{children:"Cargando ventas..."}):i.jsxs("div",{ref:he,children:[i.jsx("div",{className:"pdf-desktop hidden md:block",children:i.jsxs("table",{className:"min-w-full border text-sm mb-4 shadow-2xl",children:[i.jsx("thead",{className:"bg-gray-100",children:i.jsxs("tr",{children:[i.jsx("th",{className:"border p-2",children:"Estado"}),i.jsx("th",{className:"border p-2",children:"Producto"}),i.jsx("th",{className:"border p-2",children:"Tipo"}),i.jsx("th",{className:"border p-2",children:"Paquetes"}),i.jsx("th",{className:"border p-2",children:"Monto"}),i.jsx("th",{className:"border p-2",children:"Comisin"}),i.jsx("th",{className:"border p-2",children:"Fecha venta"}),i.jsx("th",{className:"border p-2",children:"Fecha proceso"}),i.jsx("th",{className:"border p-2",children:"Vendedor"}),i.jsx("th",{className:"border p-2",children:"Acciones"})]})}),i.jsxs("tbody",{children:[U.map(q=>{const se=z(q),ye=(q.processedDate||"").trim();return i.jsxs("tr",{className:"text-center",children:[i.jsx("td",{className:"border p-1",children:i.jsx("span",{className:`px-2 py-0.5 rounded text-xs ${q.status==="PROCESADA"?"bg-green-100 text-green-700":"bg-yellow-100 text-yellow-700"}`,children:q.status})}),i.jsx("td",{className:"border p-1",children:q.productName}),i.jsx("td",{className:"border p-1",children:q.type==="CREDITO"?"Crdito":"Cash"}),i.jsx("td",{className:"border p-1",children:tp(q.quantity)}),i.jsxs("td",{className:"border p-1",children:["C$",dl(q.amount)]}),i.jsx("td",{className:"border p-1",children:se>0?`C$${dl(se)}`:""}),i.jsx("td",{className:"border p-1",children:q.date}),i.jsx("td",{className:"border p-1",children:ye||""}),i.jsx("td",{className:"border p-1",children:q.userEmail}),i.jsx("td",{className:"border p-1",children:q.status==="FLOTANTE"?i.jsx("div",{className:"flex gap-2 justify-center",children:ae?i.jsxs(i.Fragment,{children:[i.jsx("button",{onClick:()=>Ve(q),className:"text-xs bg-indigo-600 text-white px-2 py-1 rounded hover:bg-indigo-700",children:"Editar"}),i.jsx("button",{onClick:()=>qe(q.id),className:"text-xs bg-red-600 text-white px-2 py-1 rounded hover:bg-red-700",children:"Eliminar"})]}):i.jsx("span",{className:"text-gray-400 text-xs",children:""})}):q.status==="PROCESADA"?i.jsx("div",{className:"flex gap-2 justify-center",children:ae?i.jsx("button",{onClick:()=>St(q.id),className:"text-xs bg-red-600 text-white px-2 py-1 rounded hover:bg-red-700",children:"Revertir"}):i.jsx("span",{className:"text-gray-400 text-xs",children:""})}):i.jsx("span",{className:"text-gray-400 text-xs",children:"No options"})})]},q.id)}),U.length===0&&i.jsx("tr",{children:i.jsx("td",{colSpan:10,className:"p-3 text-center text-gray-500",children:"Sin ventas para mostrar."})})]})]})}),i.jsxs("div",{className:"pdf-mobile md:hidden space-y-3 mb-4",children:[U.map(q=>{const se=z(q),ye=(q.processedDate||"").trim();return i.jsxs("details",{className:"border rounded-xl bg-white shadow-sm",children:[i.jsxs("summary",{className:"px-4 py-3 flex justify-between items-center cursor-pointer",children:[i.jsxs("div",{className:"min-w-0",children:[i.jsx("div",{className:"font-semibold truncate",children:q.productName}),i.jsxs("div",{className:"text-xs text-gray-500",children:[q.type==="CREDITO"?"Crdito":"Cash","  ",q.date]})]}),i.jsxs("div",{className:"text-right shrink-0 ml-3",children:[i.jsxs("div",{className:"font-bold",children:["C$",dl(q.amount)]}),i.jsx("span",{className:`text-xs px-2 py-0.5 rounded ${q.status==="PROCESADA"?"bg-green-100 text-green-700":"bg-yellow-100 text-yellow-700"}`,children:q.status})]})]}),i.jsxs("div",{className:"px-4 pb-4 pt-2 text-sm space-y-2",children:[i.jsxs("div",{className:"flex justify-between gap-3",children:[i.jsx("span",{className:"text-gray-600",children:"Paquetes"}),i.jsx("strong",{children:tp(q.quantity)})]}),i.jsxs("div",{className:"flex justify-between gap-3",children:[i.jsx("span",{className:"text-gray-600",children:"Comisin"}),i.jsx("strong",{children:se>0?`C$${dl(se)}`:""})]}),i.jsxs("div",{className:"flex justify-between gap-3",children:[i.jsx("span",{className:"text-gray-600",children:"Fecha proceso"}),i.jsx("strong",{children:ye||""})]}),i.jsxs("div",{className:"flex justify-between gap-3",children:[i.jsx("span",{className:"text-gray-600",children:"Vendedor"}),i.jsx("strong",{className:"text-right break-all",children:q.userEmail})]}),i.jsx("div",{className:"pt-2",children:q.status==="FLOTANTE"?i.jsx("div",{className:"flex gap-2",children:ae?i.jsxs(i.Fragment,{children:[i.jsx("button",{onClick:()=>Ve(q),className:"flex-1 text-xs bg-indigo-600 text-white py-2 rounded hover:bg-indigo-700",children:"Editar"}),i.jsx("button",{onClick:()=>qe(q.id),className:"flex-1 text-xs bg-red-600 text-white py-2 rounded hover:bg-red-700",children:"Eliminar"})]}):i.jsx("div",{className:"text-gray-400 text-xs w-full text-center",children:""})}):q.status==="PROCESADA"?i.jsx("div",{className:"flex gap-2",children:ae?i.jsx("button",{onClick:()=>St(q.id),className:"w-full text-xs bg-red-600 text-white py-2 rounded hover:bg-red-700",children:"Revertir"}):i.jsx("div",{className:"text-gray-400 text-xs w-full text-center",children:""})}):i.jsx("div",{className:"text-gray-400 text-xs w-full text-center",children:"No options"})})]})]},q.id)}),U.length===0&&i.jsx("div",{className:"text-center text-gray-500 text-sm py-6",children:"Sin ventas para mostrar."})]}),i.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 lg:grid-cols-5 gap-2 text-sm mb-4",children:[i.jsxs("div",{children:["Total paquetes crdito: ",i.jsx("strong",{children:tp(ie)})]}),i.jsxs("div",{children:["Total paquetes cash: ",i.jsx("strong",{children:tp(J)})]}),i.jsxs("div",{children:["Total pendiente crdito:"," ",i.jsxs("strong",{children:["C$",dl(Oe)]})]}),i.jsxs("div",{children:["Total cobrado cash: ",i.jsxs("strong",{children:["C$",dl(fe)]})]}),i.jsxs("div",{children:["Total comisin: ",i.jsxs("strong",{children:["C$",dl(_e)]})]})]}),(Ce>0||We!==V)&&i.jsxs("div",{className:"grid grid-cols-2 md:grid-cols-3 gap-2 text-sm mb-6",children:[i.jsxs("div",{children:["Costo total (COGS): ",i.jsxs("strong",{children:["C$",dl(Ce)]})]}),i.jsxs("div",{children:["Ganancia antes de gasto:"," ",i.jsxs("strong",{children:["C$",dl(We)]})]}),i.jsxs("div",{children:["Total paquetes (visibles):"," ",i.jsx("strong",{children:tp(te)})]})]}),i.jsx("h3",{className:"font-semibold mb-2",children:"Consolidado por producto"}),i.jsx("div",{className:"pdf-desktop hidden md:block",children:i.jsxs("table",{className:"min-w-full border text-sm mb-2 shadow-2xl",children:[i.jsx("thead",{className:"bg-gray-100",children:i.jsxs("tr",{children:[i.jsx("th",{className:"border p-2",children:"Producto"}),i.jsx("th",{className:"border p-2",children:"Total paquetes"}),i.jsx("th",{className:"border p-2",children:"Total dinero"}),i.jsx("th",{className:"border p-2",children:"Comisin"})]})}),i.jsxs("tbody",{children:[Nt.map(q=>i.jsxs("tr",{className:"text-center",children:[i.jsx("td",{className:"border p-1",children:q.productName}),i.jsx("td",{className:"border p-1",children:tp(q.totalQuantity)}),i.jsxs("td",{className:"border p-1",children:["C$",dl(q.totalAmount)]}),i.jsx("td",{className:"border p-1",children:q.totalCommission>0?`C$${dl(q.totalCommission)}`:""})]},q.productName)),Nt.length===0&&i.jsx("tr",{children:i.jsx("td",{colSpan:4,className:"p-3 text-center text-gray-500",children:"Sin datos para consolidar."})})]})]})}),i.jsxs("div",{className:"pdf-mobile md:hidden space-y-2",children:[Nt.map(q=>i.jsxs("div",{className:"border rounded-xl bg-white shadow-sm p-3",children:[i.jsx("div",{className:"font-semibold",children:q.productName}),i.jsxs("div",{className:"mt-2 text-sm space-y-1",children:[i.jsxs("div",{className:"flex justify-between gap-3",children:[i.jsx("span",{className:"text-gray-600",children:"Total paquetes"}),i.jsx("strong",{children:tp(q.totalQuantity)})]}),i.jsxs("div",{className:"flex justify-between gap-3",children:[i.jsx("span",{className:"text-gray-600",children:"Total dinero"}),i.jsxs("strong",{children:["C$",dl(q.totalAmount)]})]}),i.jsxs("div",{className:"flex justify-between gap-3",children:[i.jsx("span",{className:"text-gray-600",children:"Comisin"}),i.jsx("strong",{children:q.totalCommission>0?`C$${dl(q.totalCommission)}`:""})]})]})]},q.productName)),Nt.length===0&&i.jsx("div",{className:"text-center text-gray-500 text-sm py-6",children:"Sin datos para consolidar."})]})]}),i.jsxs("div",{className:"flex gap-2 mt-4",children:[ae&&i.jsx("button",{onClick:jt,className:"bg-blue-600 text-white px-4 py-2 rounded hover:bg-blue-700",children:"Cerrar ventas del perodo"}),i.jsx("button",{onClick:ge,className:"bg-green-600 text-white px-4 py-2 rounded hover:bg-green-700",children:"Descargar PDF"})]}),d&&i.jsx("p",{className:"mt-2 text-sm",children:d}),j&&ae&&i.jsx("div",{className:"fixed inset-0 bg-black/30 flex items-center justify-center p-4",children:i.jsxs("div",{className:"bg-white rounded-xl shadow-xl w-full max-w-md p-4 space-y-3",children:[i.jsx("h4",{className:"font-semibold text-lg",children:"Editar venta de dulces"}),i.jsxs("div",{className:"text-sm text-gray-500",children:[j.productName,"  ",j.userEmail]}),i.jsx("label",{className:"text-sm",children:"Paquetes"}),i.jsx("input",{type:"number",step:"0.01",className:"w-full border rounded px-2 py-1",value:_,onChange:q=>S(parseFloat(q.target.value||"0"))}),i.jsx("label",{className:"text-sm",children:"Monto cobrado"}),i.jsx("input",{type:"number",step:"0.01",className:"w-full border rounded px-2 py-1",value:E,onChange:q=>T(parseFloat(q.target.value||"0"))}),i.jsx("label",{className:"text-sm",children:"Cliente"}),i.jsx("input",{type:"text",className:"w-full border rounded px-2 py-1",value:k,onChange:q=>B(q.target.value)}),i.jsx("label",{className:"text-sm",children:"Paga con"}),i.jsx("input",{type:"number",step:"0.01",className:"w-full border rounded px-2 py-1",value:D,onChange:q=>X(parseFloat(q.target.value||"0"))}),i.jsx("label",{className:"text-sm",children:"Vuelto"}),i.jsx("input",{type:"text",className:"w-full border rounded px-2 py-1",value:me,onChange:q=>pe(q.target.value)}),i.jsxs("div",{className:"flex gap-2 justify-end pt-2",children:[i.jsx("button",{onClick:()=>I(null),className:"px-3 py-1 border rounded",children:"Cancelar"}),i.jsx("button",{onClick:Te,className:"px-3 py-1 rounded text-white bg-indigo-600 hover:bg-indigo-700",children:"Guardar cambios"})]})]})})]})}const kh=t=>`C$ ${(Number(t)||0).toFixed(2)}`,Cu=t=>Math.round((Number(t)||0)*100)/100;function sVe(t){if(!t)return"";switch(t){case"RIVAS":return"Rivas";case"SAN_JORGE":return"San Jorge";case"ISLA":return"Isla de Ometepe";default:return""}}function iVe(t){return t.toISOString().slice(0,10)}function oVe(){const t=new Date;return`${t.getFullYear()}-${String(t.getMonth()+1).padStart(2,"0")}-01`}function lVe(){const t=new Date,e=new Date(t.getFullYear(),t.getMonth()+1,1),r=new Date(e.getTime()-24*60*60*1e3);return iVe(r)}function cVe(){const[t,e]=g.useState(oVe()),[r,n]=g.useState(lVe()),[a,s]=g.useState(!1),[o,l]=g.useState(""),[c,u]=g.useState({}),[d,f]=g.useState({}),[A,h]=g.useState([]),[m,p]=g.useState([]),[x,v]=g.useState({}),[y,b]=g.useState(!1),[w,j]=g.useState(null),[I,_]=g.useState(null),S=g.useMemo(()=>w&&A.find(pe=>pe.vendorId===w)||null,[w,A]),E=g.useMemo(()=>{var pe;return!w||!I?[]:((pe=x[w])==null?void 0:pe[I])||[]},[w,I,x]),T=g.useMemo(()=>Cu(A.reduce((pe,he)=>pe+(he.totalSoldMoney||0),0)),[A]),k=g.useMemo(()=>Cu(A.reduce((pe,he)=>pe+(he.totalCreditMoney||0),0)),[A]);g.useEffect(()=>{(async()=>{try{const pe=await kt(mt(Se,"sellers_candies")),he={};pe.forEach(Pe=>{const ke=Pe.data(),O=ke.branch||"Rivas";let G="RIVAS";O==="San Jorge"?G="SAN_JORGE":O==="Isla Ometepe"&&(G="ISLA"),he[Pe.id]={id:Pe.id,name:ke.name??"(sin nombre)",branch:G,branchLabel:O,commissionPercent:Number(ke.commissionPercent??0)}});const ve=await kt(mt(Se,"products_candies")),ae={};ve.forEach(Pe=>{const ke=Pe.data();ae[Pe.id]={id:Pe.id,name:ke.name??"(sin nombre)"}}),u(he),f(ae)}catch(pe){console.error(pe),l(" Error cargando catlogos de vendedores/productos.")}})()},[]);const B=async()=>{if(!t||!r){l("Selecciona rango de fechas vlido.");return}if(!Object.keys(c).length){l("Cargando vendedores, intenta de nuevo en unos segundos.");return}s(!0),l("");try{const pe={},he={},ve=Yt(mt(Se,"inventory_candies_sellers"),cr("date",">=",t),cr("date","<=",r)),ae=await kt(ve),Pe={},ke={},O={},G={};ae.forEach(fe=>{var lt,Ne;const _e=fe.data(),Ue=_e.sellerId||"";if(!Ue)return;const Ye=_e.productId||"",At=_e.productName||((lt=d[Ye])==null?void 0:lt.name)||"(sin nombre)",yt=Math.max(1,Math.floor(Number(_e.unitsPerPackage||1))),bt=Number(_e.totalUnits??0),Nt=Number(_e.packages??0),jt=Number(_e.remainingUnits??_e.remaining??0),St=Number(_e.remainingPackages??0),Ve=Nt>0?Nt:bt>0?Math.floor(bt/yt):0,Te=St>0?St:jt>0?Math.floor(jt/yt):0;Pe[Ue]=(Pe[Ue]||0)+Ve,ke[Ue]=(ke[Ue]||0)+Te;const qe=_e.orderId||_e.vendorOrderId||_e.orderNumber||_e.order||fe.id;O[Ue]||(O[Ue]=new Set),O[Ue].add(qe);const ge=((Ne=c[Ue])==null?void 0:Ne.name)||_e.sellerName||"(sin vendedor)",q=String(_e.date||""),se=Number(_e.totalVendor??0),ye=Number(_e.gainVendor??0),ue=Nt>0?Nt:bt>0?Math.floor(bt/yt):0,Le=ue>0?se/ue:0,ct=ue>0?ye/ue:0,ht=Cu(Ve*Le),xe=Cu(Ve*ct),Ae=Cu(Te*Le),Re=Cu(Te*ct);G[Ue]||(G[Ue]={ordered:[],remaining:[]}),Ve>0&&G[Ue].ordered.push({date:q,vendorName:ge,productName:At,packages:Ve,totalMoney:ht,vendorCommission:xe}),Te>0&&G[Ue].remaining.push({date:q,vendorName:ge,productName:At,packages:Te,totalMoney:Ae,vendorCommission:Re})});const z={};Object.keys(O).forEach(fe=>{z[fe]=O[fe].size});const U=Yt(mt(Se,"sales_candies"),cr("date",">=",t),cr("date","<=",r)),Y=await kt(U),ee={},M={},H={},te={},Ce={},V={};Y.forEach(fe=>{const _e=fe.data(),Ue=_e.date||"",Ye=_e.vendorId||_e.sellerId||"";if(!Ye)return;const At=c[Ye],yt=_e.vendorName||(At==null?void 0:At.name)||"(sin vendedor)",bt=Number(_e.vendorCommissionPercent??(At==null?void 0:At.commissionPercent)??0)||0,Nt=Array.isArray(_e.items)?_e.items:[];if(!Nt.length)return;const jt=String(_e.type||"").toUpperCase()==="CREDITO";Ce[Ye]||(Ce[Ye]={sold:[],credit:[]}),Nt.forEach(St=>{var ht;const Ve=St.productName||((ht=d[St.productId||""])==null?void 0:ht.name)||"(sin nombre)",Te=St.packages??St.qty??St.quantity??0,qe=Number(Te||0);if(qe<=0)return;const ge=Number(St.unitPricePackage??St.unitPrice??0)||0,q=Math.max(0,Number(St.discount||0)),se=qe*ge,ye=Cu(Math.max(0,se-q));if(ye<=0)return;console.log("DBG",{isCredit:jt,vendorId:Ye,commissionPercent:bt,lineFinal:ye,storedItemCommission:Number(St.vendorCommissionAmount??0)});let ue=0;const Le=Number(St.vendorCommissionAmount??0);Le?ue=Cu(Le):bt>0&&(ue=Cu(ye*bt/100)),jt?(M[Ye]=(M[Ye]||0)+qe,te[Ye]=(te[Ye]||0)+ye):(ee[Ye]=(ee[Ye]||0)+qe,H[Ye]=(H[Ye]||0)+ye),jt?he[Ye]=(he[Ye]||0)+ue:pe[Ye]=(pe[Ye]||0)+ue,jt?Ce[Ye].credit.push({date:Ue,vendorName:yt,productName:Ve,packages:qe,totalMoney:ye,vendorCommission:0}):Ce[Ye].sold.push({date:Ue,vendorName:yt,productName:Ve,packages:qe,totalMoney:ye,vendorCommission:ue});const ct=Ve;V[ct]||(V[ct]={productName:Ve,packages:0,totalMoney:0}),V[ct].packages+=qe,V[ct].totalMoney+=ye})});const We=new Set([...Object.keys(Pe),...Object.keys(ke),...Object.keys(ee),...Object.keys(M)]),ie=[],J={};We.forEach(fe=>{var Te,qe,ge,q;const _e=c[fe],Ue=(_e==null?void 0:_e.name)||"(sin vendedor)",Ye=_e?_e.branchLabel||sVe(_e.branch):"",At=Pe[fe]||0,yt=ke[fe]||0,bt=ee[fe]||0,Nt=M[fe]||0,jt=Cu(H[fe]||0),St=Cu(te[fe]||0),Ve=z[fe]||0;ie.push({vendorId:fe,vendorName:Ue,branchLabel:Ye,orderedPackages:At,remainingPackages:yt,soldPackages:bt,creditPackages:Nt,totalSoldMoney:jt,totalCreditMoney:St,ordersCreated:Ve,commissionCash:Cu(pe[fe]||0),commissionCredit:0}),J[fe]={ordered:(((Te=G[fe])==null?void 0:Te.ordered)||[]).sort((se,ye)=>se.date.localeCompare(ye.date)),remaining:(((qe=G[fe])==null?void 0:qe.remaining)||[]).sort((se,ye)=>se.date.localeCompare(ye.date)),sold:(((ge=Ce[fe])==null?void 0:ge.sold)||[]).sort((se,ye)=>se.date.localeCompare(ye.date)),credit:(((q=Ce[fe])==null?void 0:q.credit)||[]).sort((se,ye)=>se.date.localeCompare(ye.date))}}),ie.sort((fe,_e)=>fe.vendorName.localeCompare(_e.vendorName,"es")),h(ie),v(J);const Oe=Object.values(V).map(fe=>({productName:fe.productName,packages:fe.packages,totalMoney:Cu(fe.totalMoney)})).sort((fe,_e)=>_e.packages-fe.packages).slice(0,10);p(Oe),ie.length||l("Sin datos para el rango seleccionado.")}catch(pe){console.error(pe),l(" Error cargando consolidado de vendedores.")}finally{s(!1)}};g.useEffect(()=>{Object.keys(c).length&&B()},[c]);const D=(pe,he)=>{j(pe),_(he),b(!0)},X=()=>{b(!1),j(null),_(null)},me=()=>{if(!A.length){l("No hay datos para exportar.");return}const pe=["Vendedor","Sucursal","Paquetes ordenados","Paquetes restantes","Paquetes vendidos","Paquetes fiados","Total vendidos (C$)","Comisin Cash (C$)","Total fiado (C$)","Comisin Crdito (C$)","rdenes creadas"],he=A.map(O=>[O.vendorName,O.branchLabel,O.orderedPackages.toString(),O.remainingPackages.toString(),O.soldPackages.toString(),O.creditPackages.toString(),O.totalSoldMoney.toFixed(2),O.commissionCash.toFixed(2),O.totalCreditMoney.toFixed(2),O.commissionCredit.toFixed(2),O.ordersCreated.toString()]),ve=[pe,...he].map(O=>O.map(G=>`"${String(G).replace(/"/g,'""')}"`).join(",")).join(`
`),ae=new Blob([ve],{type:"text/csv;charset=utf-8;"}),Pe=URL.createObjectURL(ae),ke=document.createElement("a");ke.href=Pe,ke.download=`consolidado_vendedores_dulces_${t}_a_${r}.csv`,ke.click(),URL.revokeObjectURL(Pe)};return i.jsxs("div",{className:"max-w-7xl mx-auto bg-white p-6 rounded-2xl shadow-2xl",children:[i.jsx("h2",{className:"text-2xl font-bold mb-4",children:"Consolidado por Vendedor - Dulces"}),i.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-3 mb-4 text-sm",children:[i.jsxs("div",{children:[i.jsx("label",{className:"block font-semibold mb-1",children:"Desde"}),i.jsx("input",{type:"date",className:"w-full border rounded px-2 py-1",value:t,onChange:pe=>e(pe.target.value)})]}),i.jsxs("div",{children:[i.jsx("label",{className:"block font-semibold mb-1",children:"Hasta"}),i.jsx("input",{type:"date",className:"w-full border rounded px-2 py-1",value:r,onChange:pe=>n(pe.target.value)})]}),i.jsx("div",{className:"flex items-end",children:i.jsx("button",{type:"button",onClick:B,className:"bg-blue-600 text-white px-4 py-2 rounded hover:bg-blue-700 w-full",disabled:a,children:a?"Cargando...":"Aplicar filtros"})}),i.jsx("div",{className:"flex items-end",children:i.jsx("button",{type:"button",onClick:me,className:"bg-green-600 text-white px-4 py-2 rounded hover:bg-green-700 w-full",children:"Exportar CSV"})})]}),i.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4 mb-6 text-sm",children:[i.jsxs("div",{className:"border rounded-lg p-3 bg-gray-50",children:[i.jsx("div",{className:"text-xs text-gray-500",children:"Ventas Cash"}),i.jsx("div",{className:"text-xl font-semibold",children:kh(T)})]}),i.jsxs("div",{className:"border rounded-lg p-3 bg-gray-50",children:[i.jsx("div",{className:"text-xs text-gray-500",children:"Ventas Credito"}),i.jsx("div",{className:"text-xl font-semibold",children:kh(k)})]}),i.jsxs("div",{className:"border rounded-lg p-3 bg-gray-50",children:[i.jsx("div",{className:"text-xs text-gray-500",children:"Vendedores con Inventario"}),i.jsx("div",{className:"text-xl font-semibold",children:A.length})]})]}),i.jsx("div",{className:"overflow-x-auto mb-6",children:i.jsxs("table",{className:"min-w-full border text-sm shadow-2xl",children:[i.jsx("thead",{className:"bg-gray-100",children:i.jsxs("tr",{children:[i.jsx("th",{className:"border p-2",children:"Vendedor"}),i.jsx("th",{className:"border p-2",children:"Sucursal"}),i.jsx("th",{className:"border p-2",children:"Paquetes ordenados"}),i.jsx("th",{className:"border p-2",children:"Paquetes restantes"}),i.jsx("th",{className:"border p-2",children:"Paquetes vendidos"}),i.jsx("th",{className:"border p-2",children:"Paquetes fiados"}),i.jsx("th",{className:"border p-2",children:"Total vendidos (C$)"}),i.jsx("th",{className:"border p-2",children:"Comisin Cash (C$)"}),i.jsx("th",{className:"border p-2",children:"Total fiado (C$)"}),i.jsx("th",{className:"border p-2",children:"Comisin Crdito (C$)"}),i.jsx("th",{className:"border p-2",children:"rdenes creadas"})]})}),i.jsxs("tbody",{children:[A.map(pe=>i.jsxs("tr",{className:"text-center",children:[i.jsx("td",{className:"border p-1",children:pe.vendorName}),i.jsx("td",{className:"border p-1",children:pe.branchLabel}),i.jsx("td",{className:"border p-1",children:i.jsx("button",{type:"button",className:"text-blue-600 underline",onClick:()=>D(pe.vendorId,"ordered"),children:pe.orderedPackages})}),i.jsx("td",{className:"border p-1",children:i.jsx("button",{type:"button",className:"text-blue-600 underline",onClick:()=>D(pe.vendorId,"remaining"),children:pe.remainingPackages})}),i.jsx("td",{className:"border p-1",children:i.jsx("button",{type:"button",className:"text-blue-600 underline",onClick:()=>D(pe.vendorId,"sold"),children:pe.soldPackages})}),i.jsx("td",{className:"border p-1",children:i.jsx("button",{type:"button",className:"text-blue-600 underline",onClick:()=>D(pe.vendorId,"credit"),children:pe.creditPackages})}),i.jsx("td",{className:"border p-1",children:kh(pe.totalSoldMoney)}),i.jsx("td",{className:"border p-1",children:kh(pe.commissionCash)}),i.jsx("td",{className:"border p-1",children:kh(pe.totalCreditMoney)}),i.jsx("td",{className:"border p-1",children:kh(pe.commissionCredit)}),i.jsx("td",{className:"border p-1",children:pe.ordersCreated})]},pe.vendorId)),A.length===0&&!a&&i.jsx("tr",{children:i.jsx("td",{colSpan:11,className:"p-3 text-center text-gray-500",children:"Sin datos para mostrar."})})]})]})}),i.jsxs("div",{className:"mb-6",children:[i.jsx("h3",{className:"font-semibold mb-2 text-sm",children:"Top 10 productos ms vendidos (paquetes)"}),i.jsx("div",{className:"overflow-x-auto",children:i.jsxs("table",{className:"min-w-full border text-xs shadow-2xl",children:[i.jsx("thead",{className:"bg-gray-100",children:i.jsxs("tr",{children:[i.jsx("th",{className:"border p-2",children:"#"}),i.jsx("th",{className:"border p-2",children:"Producto"}),i.jsx("th",{className:"border p-2",children:"Paquetes vendidos"}),i.jsx("th",{className:"border p-2",children:"Total dinero (C$)"})]})}),i.jsxs("tbody",{children:[m.map((pe,he)=>i.jsxs("tr",{className:"text-center",children:[i.jsx("td",{className:"border p-1",children:he+1}),i.jsx("td",{className:"border p-1",children:pe.productName}),i.jsx("td",{className:"border p-1",children:pe.packages}),i.jsx("td",{className:"border p-1",children:kh(pe.totalMoney)})]},pe.productName)),m.length===0&&!a&&i.jsx("tr",{children:i.jsx("td",{colSpan:4,className:"p-3 text-center text-gray-500",children:"Sin productos para mostrar."})})]})]})})]}),o&&i.jsx("p",{className:"mt-2 text-sm text-gray-700",children:o}),y&&I&&w&&i.jsx("div",{className:"fixed inset-0 bg-black/40 flex items-center justify-center z-50",children:i.jsxs("div",{className:"bg-white rounded-xl shadow-xl w-[95%] max-w-4xl max-h-[90vh] flex flex-col",children:[i.jsxs("div",{className:"flex items-center justify-between px-4 py-3 border-b",children:[i.jsxs("div",{children:[i.jsxs("h4",{className:"font-semibold text-lg",children:["Detalle"," ",I==="ordered"?"Paquetes ordenados":I==="remaining"?"Paquetes restantes":I==="sold"?"Paquetes vendidos":"Paquetes fiados"]}),i.jsxs("p",{className:"text-xs text-gray-500",children:[S==null?void 0:S.vendorName,"  ",S==null?void 0:S.branchLabel]})]}),i.jsx("button",{onClick:X,className:"px-3 py-1 rounded bg-gray-200 hover:bg-gray-300 text-sm",children:"Cerrar"})]}),i.jsx("div",{className:"flex-1 overflow-auto p-4",children:i.jsxs("table",{className:"min-w-full border text-xs",children:[i.jsx("thead",{className:"bg-gray-100",children:i.jsxs("tr",{children:[i.jsx("th",{className:"border p-2",children:"Fecha"}),i.jsx("th",{className:"border p-2",children:"Producto"}),i.jsx("th",{className:"border p-2",children:"Paquetes"}),i.jsx("th",{className:"border p-2",children:"Total dinero (C$)"}),i.jsx("th",{className:"border p-2",children:"Vendedor"}),i.jsx("th",{className:"border p-2",children:"Comisin vendedor (C$)"})]})}),i.jsxs("tbody",{children:[E.map((pe,he)=>i.jsxs("tr",{className:"text-center",children:[i.jsx("td",{className:"border p-1",children:pe.date}),i.jsx("td",{className:"border p-1",children:pe.productName}),i.jsx("td",{className:"border p-1",children:pe.packages}),i.jsx("td",{className:"border p-1",children:kh(pe.totalMoney)}),i.jsx("td",{className:"border p-1",children:pe.vendorName}),i.jsx("td",{className:"border p-1",children:kh(pe.vendorCommission)})]},he)),E.length===0&&i.jsx("tr",{children:i.jsx("td",{colSpan:6,className:"p-3 text-center text-gray-500",children:"Sin registros para mostrar."})})]})]})})]})})]})}const Kl=t=>`C$${Number(t||0).toFixed(2)}`,f_=t=>Number(t||0).toFixed(3),oB=()=>{const t=new Date;return Rr(new Date(t.getFullYear(),t.getMonth(),1),"yyyy-MM-dd")},h_=()=>Rr(new Date,"yyyy-MM-dd");function uVe({transactions:t=[],onClose:e,onCreated:r}){const n=Array.isArray(t)?t:[],[a,s]=g.useState([]),o=g.useMemo(()=>{const xe={};return a.forEach(Ae=>{Ae.email&&(xe[Ae.email.trim().toLowerCase()]=Ae)}),xe},[a]);g.useEffect(()=>{(async()=>{try{const xe=Yt(mt(Se,"sellers_candies"),In("name","asc")),Ae=await kt(xe),Re=[];Ae.forEach(lt=>{const Ne=lt.data();Re.push({id:lt.id,name:Ne.name||"",email:Ne.email||"",commissionPercent:Number(Ne.commissionPercent||0)})}),s(Re)}catch(xe){console.error(xe)}})()},[]);const[l,c]=g.useState(oB()),[u,d]=g.useState(h_()),[f,A]=g.useState(""),[h,m]=g.useState(""),p=g.useMemo(()=>{const xe=new Map;return n.forEach(Ae=>{const Re=Ae.productId||Ae.productName;xe.set(Re,{key:Re,name:Ae.productName})}),Array.from(xe.values()).sort((Ae,Re)=>Ae.name.localeCompare(Re.name))},[n]),x=g.useMemo(()=>{const xe=new Map;return n.forEach(Ae=>{const Re=(Ae.sellerEmail||"").trim().toLowerCase();if(!Re)return;const lt=o[Re],Ne=(lt==null?void 0:lt.name)||Ae.vendorName||Re;xe.set(Re,{email:Re,label:Ne})}),Array.from(xe.values()).sort((Ae,Re)=>Ae.label.localeCompare(Re.label))},[n,o]),v=g.useMemo(()=>n.filter(xe=>!(l&&xe.date<l||u&&xe.date>u||f&&(xe.productId||xe.productName)!==f||h&&(xe.sellerEmail||"").trim().toLowerCase()!==h)),[n,l,u,f,h]),[y,b]=g.useState(h_()),[w,j]=g.useState(()=>`FAC-CANDY-${Date.now().toString().slice(-6)}`),[I,_]=g.useState(""),[S,E]=g.useState("0"),[T,k]=g.useState(()=>v.map(xe=>xe.id));g.useEffect(()=>{k(xe=>xe.filter(Ae=>v.some(Re=>Re.id===Ae)))},[v]);const[B,D]=g.useState([]),[X,me]=g.useState([]),[pe,he]=g.useState(!1),[ve,ae]=g.useState(oB()),[Pe,ke]=g.useState(h_());g.useEffect(()=>{(async()=>{try{he(!0);const xe=Yt(mt(Se,"expensesCandies"),In("date","desc")),Ae=await kt(xe),Re=[];Ae.forEach(lt=>{const Ne=lt.data();Re.push({id:lt.id,date:Ne.date,description:Ne.description,amount:Number(Ne.amount||0)})}),D(Re)}catch(xe){console.error(xe)}finally{he(!1)}})()},[]);const O=g.useMemo(()=>B.filter(xe=>!(!xe.date||ve&&xe.date<ve||Pe&&xe.date>Pe)),[B,ve,Pe]),[G,z]=g.useState([]),[U,Y]=g.useState(!1),[ee,M]=g.useState(""),[H,te]=g.useState("DEBITO"),[Ce,V]=g.useState(""),We=()=>{const xe=Number(Ce);!ee.trim()||!isFinite(xe)||xe<=0||(z(Ae=>[...Ae,{id:`${Date.now()}_${Ae.length+1}`,description:ee.trim(),type:H,amount:Number(xe.toFixed(2))}]),M(""),V(""))},[ie,J]=g.useState(null),[Oe,fe]=g.useState(""),[_e,Ue]=g.useState("DEBITO"),[Ye,At]=g.useState(""),yt=xe=>{J(xe.id),fe(xe.description),Ue(xe.type),At(xe.amount.toFixed(2))},bt=()=>{J(null),fe(""),Ue("DEBITO"),At("")},Nt=()=>{if(!ie)return;const xe=Number(Ye);!isFinite(xe)||xe<=0||(z(Ae=>Ae.map(Re=>Re.id===ie?{...Re,description:Oe.trim(),type:_e,amount:Number(xe.toFixed(2))}:Re)),bt())},jt=xe=>{z(Ae=>Ae.filter(Re=>Re.id!==xe)),ie===xe&&bt()},St=(xe,Ae)=>{k(Re=>Ae?[...new Set([...Re,xe])]:Re.filter(lt=>lt!==xe))},Ve=xe=>{k(xe?v.map(Ae=>Ae.id):[])},Te=(xe,Ae)=>{me(Re=>Ae?[...new Set([...Re,xe])]:Re.filter(lt=>lt!==xe))},qe=g.useMemo(()=>v.filter(xe=>T.includes(xe.id)),[v,T]),ge=g.useMemo(()=>G.filter(xe=>xe.type==="DEBITO").reduce((xe,Ae)=>xe+Ae.amount,0),[G]),q=g.useMemo(()=>G.filter(xe=>xe.type==="CREDITO").reduce((xe,Ae)=>xe+Ae.amount,0),[G]),se=g.useMemo(()=>{let xe=0,Ae=0,Re=0,lt=0;for(const Mt of qe){const nt=Number(Mt.packages||0),Ee=Number(Mt.cogsAmount||0),we=Number(Mt.amount||0);xe+=nt,Ae+=Ee,Re+=we;const oe=(Mt.sellerEmail||"").trim().toLowerCase(),Fe=o[oe],ce=Number((Fe==null?void 0:Fe.commissionPercent)||0),Me=we*ce/100;lt+=Me}const Ne=O.filter(Mt=>X.includes(Mt.id)).reduce((Mt,nt)=>Mt+Number(nt.amount||0),0),De=Re-Ae,xt=Re-Ne-ge+q-lt,_t=Number(S||0),Et=Re*_t/100;return{totalPackages:Number(f_(xe)),totalProvider:Number(Ae.toFixed(2)),totalSale:Number(Re.toFixed(2)),totalGastos:Number(Ne.toFixed(2)),debits:Number(ge.toFixed(2)),credits:Number(q.toFixed(2)),grossProfit:Number(De.toFixed(2)),finalAmount:Number(xt.toFixed(2)),totalCommissionVendors:Number(lt.toFixed(2)),branchProfit:Number(Et.toFixed(2)),branchFactor:_t}},[qe,O,X,ge,q,o,S]),[ye,ue]=g.useState(!1),[Le,ct]=g.useState(""),ht=async()=>{if(ct(""),qe.length===0){ct("Selecciona al menos 1 transaccin procesada.");return}try{ue(!0);const xe={number:w.trim(),date:y,description:I.trim(),status:"PENDIENTE",createdAt:Ar.now(),totalPackages:se.totalPackages,totalProvider:se.totalProvider,totalSale:se.totalSale,totalExpenses:se.totalGastos,totalDebits:se.debits,totalCredits:se.credits,grossProfit:se.grossProfit,totalCommissionVendors:se.totalCommissionVendors,branchFactorPercent:se.branchFactor,branchProfit:se.branchProfit,finalAmount:se.finalAmount,transactions:qe.map(Ae=>{const Re=Number(Ae.packages||0)||1,lt=Number(Ae.cogsAmount||0),Ne=Number(Ae.amount||0),De=lt/Re,xt=Ne/Re,_t=(Ae.sellerEmail||"").trim().toLowerCase(),Et=o[_t],Mt=Number((Et==null?void 0:Et.commissionPercent)||0),nt=Ne*Mt/100;return{id:Ae.id,date:Ae.date,productId:Ae.productId||null,productName:Ae.productName,vendorName:Ae.vendorName,sellerEmail:Ae.sellerEmail||null,packages:Number(f_(Ae.packages)),providerPricePack:Number(De.toFixed(4)),salePricePack:Number(xt.toFixed(4)),totalProvider:Number(lt.toFixed(2)),totalSale:Number(Ne.toFixed(2)),commissionPercent:Mt,commissionAmount:Number(nt.toFixed(2))}}),expenses:O.filter(Ae=>X.includes(Ae.id)).map(Ae=>({id:Ae.id,date:Ae.date||null,description:Ae.description||"",amount:Number(Number(Ae.amount||0).toFixed(2))})),adjustments:G.map(Ae=>({id:Ae.id,description:Ae.description,type:Ae.type,amount:Number(Ae.amount.toFixed(2))}))};await Jn(mt(Se,"invoicesCandies"),xe),ct(" Factura de dulces creada."),r()}catch(xe){console.error(xe),ct(` Error al crear factura: ${(xe==null?void 0:xe.message)||"desconocido"}`)}finally{ue(!1)}};return i.jsxs("div",{className:"fixed inset-0 z-[9999] bg-black/40 flex items-center justify-center p-3",children:[i.jsxs("div",{className:"bg-white w-full max-w-6xl rounded-xl shadow-xl p-4 md:p-6 max-h-[90vh] overflow-auto relative",children:[i.jsxs("div",{className:"flex items-center gap-3 mb-4",children:[i.jsx("h3",{className:"text-lg font-semibold",children:"Crear factura CandyShop"}),i.jsx("button",{onClick:e,className:"ml-auto px-2 py-1 border rounded hover:bg-gray-50",children:"Cerrar"})]}),i.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-3 mb-4",children:[i.jsxs("div",{children:[i.jsx("label",{className:"block text-sm font-medium",children:"Fecha"}),i.jsx("input",{type:"date",className:"w-full border rounded px-2 py-1",value:y,onChange:xe=>b(xe.target.value)})]}),i.jsxs("div",{children:[i.jsx("label",{className:"block text-sm font-medium",children:"Nmero"}),i.jsx("input",{type:"text",className:"w-full border rounded px-2 py-1",value:w,onChange:xe=>j(xe.target.value),placeholder:"FAC-CANDY-001"})]}),i.jsxs("div",{children:[i.jsx("label",{className:"block text-sm font-medium",children:"Factor sucursal (%)"}),i.jsx("input",{type:"number",step:"0.01",className:"w-full border rounded px-2 py-1",value:S,onChange:xe=>E(xe.target.value),placeholder:"Ej: 30"}),i.jsx("p",{className:"text-[11px] text-gray-500 mt-1",children:"Se aplica sobre el total de ventas para calcular la ganancia de sucursal."})]}),i.jsxs("div",{className:"md:col-span-1",children:[i.jsx("label",{className:"block text-sm font-medium",children:"Descripcin"}),i.jsx("input",{type:"text",className:"w-full border rounded px-2 py-1",value:I,onChange:xe=>_(xe.target.value),placeholder:"Comentarios de la factura"})]})]}),i.jsx("div",{className:"bg-gray-50 border rounded p-3 mb-3",children:i.jsxs("div",{className:"flex flex-wrap items-end gap-3",children:[i.jsxs("div",{children:[i.jsx("label",{className:"block text-sm font-medium",children:"Desde (transaccin)"}),i.jsx("input",{type:"date",className:"border rounded px-2 py-1",value:l,onChange:xe=>c(xe.target.value)})]}),i.jsxs("div",{children:[i.jsx("label",{className:"block text-sm font-medium",children:"Hasta (transaccin)"}),i.jsx("input",{type:"date",className:"border rounded px-2 py-1",value:u,onChange:xe=>d(xe.target.value)})]}),i.jsxs("div",{className:"min-w-[180px]",children:[i.jsx("label",{className:"block text-sm font-medium",children:"Producto"}),i.jsxs("select",{className:"border rounded px-2 py-1 w-full",value:f,onChange:xe=>A(xe.target.value),children:[i.jsx("option",{value:"",children:"Todos"}),p.map(xe=>i.jsx("option",{value:xe.key,children:xe.name},xe.key))]})]}),i.jsxs("div",{className:"min-w-[180px]",children:[i.jsx("label",{className:"block text-sm font-medium",children:"Vendedor"}),i.jsxs("select",{className:"border rounded px-2 py-1 w-full",value:h,onChange:xe=>m(xe.target.value),children:[i.jsx("option",{value:"",children:"Todos"}),x.map(xe=>i.jsx("option",{value:xe.email,children:xe.label},xe.email))]})]}),i.jsx("button",{className:"ml-auto px-3 py-1 rounded bg-gray-200 hover:bg-gray-300",onClick:()=>{c(oB()),d(h_()),A(""),m("")},children:"Quitar filtro"})]})}),i.jsxs("div",{className:"mb-4",children:[i.jsxs("div",{className:"flex items-center gap-3 mb-2",children:[i.jsx("h4",{className:"font-semibold",children:"Transacciones procesadas"}),i.jsxs("label",{className:"text-sm flex items-center gap-2",children:[i.jsx("input",{type:"checkbox",checked:v.length>0&&T.length===v.length,onChange:xe=>Ve(xe.target.checked)}),"Seleccionar todas (sobre el filtro)"]})]}),v.length===0?i.jsx("p",{className:"text-sm text-gray-500",children:"No hay transacciones procesadas en el filtro actual."}):i.jsx("div",{className:"border rounded max-h-80 overflow-auto",children:i.jsxs("table",{className:"min-w-full text-sm",children:[i.jsx("thead",{className:"bg-gray-100",children:i.jsxs("tr",{children:[i.jsx("th",{className:"p-2 border",children:"Sel"}),i.jsx("th",{className:"p-2 border",children:"Fecha"}),i.jsx("th",{className:"p-2 border",children:"Vendedor"}),i.jsx("th",{className:"p-2 border",children:"Producto"}),i.jsx("th",{className:"p-2 border",children:"Paquetes"}),i.jsx("th",{className:"p-2 border",children:"Precio proveedor"}),i.jsx("th",{className:"p-2 border",children:"Precio venta"}),i.jsx("th",{className:"p-2 border",children:"Total proveedor"}),i.jsx("th",{className:"p-2 border",children:"Total venta"}),i.jsx("th",{className:"p-2 border",children:"Comisin venta"})]})}),i.jsx("tbody",{children:v.map(xe=>{const Ae=T.includes(xe.id),Re=Number(xe.packages||0)||1,lt=Number(xe.cogsAmount||0),Ne=Number(xe.amount||0),De=lt/Re,xt=Ne/Re,_t=(xe.sellerEmail||"").trim().toLowerCase(),Et=o[_t],Mt=Number((Et==null?void 0:Et.commissionPercent)||0),nt=Ne*Mt/100;return i.jsxs("tr",{className:"text-center",children:[i.jsx("td",{className:"p-2 border",children:i.jsx("input",{type:"checkbox",checked:Ae,onChange:Ee=>St(xe.id,Ee.target.checked)})}),i.jsx("td",{className:"p-2 border",children:xe.date}),i.jsx("td",{className:"p-2 border",children:(Et==null?void 0:Et.name)||xe.vendorName}),i.jsx("td",{className:"p-2 border",children:xe.productName}),i.jsx("td",{className:"p-2 border",children:f_(xe.packages)}),i.jsx("td",{className:"p-2 border",children:Kl(De)}),i.jsx("td",{className:"p-2 border",children:Kl(xt)}),i.jsx("td",{className:"p-2 border",children:Kl(lt)}),i.jsx("td",{className:"p-2 border",children:Kl(Ne)}),i.jsx("td",{className:"p-2 border",children:Mt>0?`${Kl(nt)} (${Mt.toFixed(2)}%)`:""})]},xe.id)})})]})})]}),i.jsxs("div",{className:"mb-4",children:[i.jsxs("div",{className:"flex items-center gap-3 mb-2",children:[i.jsx("h4",{className:"font-semibold",children:"Gastos a incluir (opcional)"}),pe&&i.jsx("span",{className:"text-xs text-gray-500",children:"Cargando"}),i.jsxs("div",{className:"ml-auto flex items-end gap-3",children:[i.jsxs("div",{children:[i.jsx("label",{className:"block text-xs text-gray-600",children:"Desde (gasto)"}),i.jsx("input",{type:"date",className:"border rounded px-2 py-1",value:ve,onChange:xe=>ae(xe.target.value)})]}),i.jsxs("div",{children:[i.jsx("label",{className:"block text-xs text-gray-600",children:"Hasta (gasto)"}),i.jsx("input",{type:"date",className:"border rounded px-2 py-1",value:Pe,onChange:xe=>ke(xe.target.value)})]})]})]}),O.length===0?i.jsx("p",{className:"text-sm text-gray-500",children:"No hay gastos en el rango seleccionado."}):i.jsx("div",{className:"border rounded max-h-48 overflow-auto",children:i.jsxs("table",{className:"min-w-full text-sm",children:[i.jsx("thead",{className:"bg-gray-100",children:i.jsxs("tr",{children:[i.jsx("th",{className:"p-2 border",children:"Sel"}),i.jsx("th",{className:"p-2 border",children:"Fecha"}),i.jsx("th",{className:"p-2 border",children:"Descripcin"}),i.jsx("th",{className:"p-2 border",children:"Monto"})]})}),i.jsx("tbody",{children:O.map(xe=>{const Ae=X.includes(xe.id);return i.jsxs("tr",{className:"text-center",children:[i.jsx("td",{className:"p-2 border",children:i.jsx("input",{type:"checkbox",checked:Ae,onChange:Re=>Te(xe.id,Re.target.checked)})}),i.jsx("td",{className:"p-2 border",children:xe.date||""}),i.jsx("td",{className:"p-2 border",children:xe.description||""}),i.jsx("td",{className:"p-2 border",children:Kl(Number(xe.amount||0))})]},xe.id)})})]})})]}),i.jsxs("div",{className:"mb-4",children:[i.jsxs("div",{className:"flex items-center gap-3 mb-2",children:[i.jsx("h4",{className:"font-semibold",children:"Notas Crdito/Dbito (Cargos extras)"}),i.jsx("button",{className:"ml-auto px-3 py-1 rounded bg-blue-600 text-white hover:bg-blue-700",onClick:()=>Y(!0),children:"Crear Cargo"})]}),G.length===0?i.jsx("p",{className:"text-sm text-gray-500",children:"Sin cargos agregados."}):i.jsx("div",{className:"border rounded max-h-40 overflow-auto",children:i.jsxs("table",{className:"min-w-full text-sm",children:[i.jsx("thead",{className:"bg-gray-100",children:i.jsxs("tr",{children:[i.jsx("th",{className:"p-2 border",children:"Descripcin"}),i.jsx("th",{className:"p-2 border",children:"Tipo"}),i.jsx("th",{className:"p-2 border",children:"Monto"}),i.jsx("th",{className:"p-2 border",children:"Acciones"})]})}),i.jsx("tbody",{children:G.map(xe=>{const Ae=ie===xe.id;return i.jsxs("tr",{className:"text-center",children:[i.jsx("td",{className:"p-2 border",children:Ae?i.jsx("textarea",{className:"w-full border rounded px-2 py-1 min-h-[70px]",value:Oe,onChange:Re=>fe(Re.target.value)}):i.jsx("span",{title:xe.description,children:xe.description.length>60?`${xe.description.slice(0,60)}`:xe.description})}),i.jsx("td",{className:"p-2 border",children:Ae?i.jsxs("select",{className:"w-full border rounded px-2 py-1",value:_e,onChange:Re=>Ue(Re.target.value),children:[i.jsx("option",{value:"DEBITO",children:"Dbito"}),i.jsx("option",{value:"CREDITO",children:"Crdito"})]}):i.jsx("span",{className:`px-2 py-0.5 rounded text-xs ${xe.type==="DEBITO"?"bg-red-100 text-red-700":"bg-green-100 text-green-700"}`,children:xe.type})}),i.jsx("td",{className:"p-2 border",children:Ae?i.jsx("input",{type:"number",step:"0.01",className:"w-full border rounded px-2 py-1 text-right",value:Ye,onChange:Re=>At(Re.target.value)}):Kl(xe.amount)}),i.jsx("td",{className:"p-2 border",children:Ae?i.jsxs("div",{className:"flex gap-2 justify-center",children:[i.jsx("button",{className:"px-2 py-1 rounded bg-green-600 text-white hover:bg-green-700 text-xs",onClick:Nt,children:"Guardar"}),i.jsx("button",{className:"px-2 py-1 rounded bg-gray-200 hover:bg-gray-300 text-xs",onClick:bt,children:"Cancelar"}),i.jsx("button",{className:"px-2 py-1 rounded bg-red-600 text-white hover:bg-red-700 text-xs",onClick:()=>jt(xe.id),children:"Eliminar"})]}):i.jsxs("div",{className:"flex gap-2 justify-center",children:[i.jsx("button",{className:"px-2 py-1 rounded bg-indigo-600 text-white hover:bg-indigo-700 text-xs",onClick:()=>yt(xe),children:"Editar"}),i.jsx("button",{className:"px-2 py-1 rounded bg-red-600 text-white hover:bg-red-700 text-xs",onClick:()=>jt(xe.id),children:"Eliminar"})]})})]},xe.id)})})]})})]}),i.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 text-sm mb-4 justify-between",children:[i.jsx("div",{className:"space-y-1",children:i.jsxs("div",{children:["Total paquetes: ",i.jsx("strong",{children:f_(se.totalPackages)})]})}),i.jsxs("div",{className:"space-y-1 text-center",children:[i.jsxs("div",{children:["Total proveedor (costo):"," ",i.jsx("strong",{children:Kl(se.totalProvider)})]}),i.jsxs("div",{children:["Total venta: ",i.jsx("strong",{children:Kl(se.totalSale)})]}),i.jsxs("div",{children:["Ganancia bruta (venta  costo):"," ",i.jsx("strong",{children:Kl(se.grossProfit)})]})]}),i.jsxs("div",{className:"space-y-1 text-right",children:[i.jsxs("div",{children:["Gastos: ",i.jsx("strong",{children:Kl(se.totalGastos)})]}),i.jsxs("div",{children:["Dbitos: ",i.jsx("strong",{children:Kl(se.debits)})]}),i.jsxs("div",{children:["Crditos: ",i.jsx("strong",{children:Kl(se.credits)})]}),i.jsxs("div",{children:["Comisin total vendedores:"," ",i.jsx("strong",{children:Kl(se.totalCommissionVendors)})]}),i.jsxs("div",{children:["Ganancia sucursal (ventas  factor):"," ",i.jsx("strong",{children:Kl(se.branchProfit)})]})]}),i.jsx("div",{className:"md:col-span-3 mt-3",children:i.jsxs("div",{className:"p-3 bg-blue-50 border border-blue-200 rounded text-center font-semibold text-lg",children:["Monto final (ventas  gastos  dbitos + crditos  comisin vendedores):"," ",i.jsx("span",{className:"text-blue-700",children:Kl(se.finalAmount)})]})})]}),i.jsxs("div",{className:"flex items-center gap-2",children:[i.jsx("button",{disabled:ye,onClick:ht,className:"bg-blue-600 text-white px-4 py-2 rounded hover:bg-blue-700 disabled:opacity-60",children:ye?"Creando":"Crear factura"}),i.jsx("button",{onClick:e,className:"px-4 py-2 border rounded",children:"Cancelar"}),Le&&i.jsx("span",{className:"text-sm ml-2",children:Le})]}),ye&&i.jsxs("div",{className:"absolute inset-0 z-[11000] bg-white/80 backdrop-blur-sm flex flex-col items-center justify-center gap-3",children:[i.jsxs("svg",{className:"animate-spin h-8 w-8 text-blue-600",viewBox:"0 0 24 24",children:[i.jsx("circle",{className:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor",strokeWidth:"4",fill:"none"}),i.jsx("path",{className:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8v4a4 4 0 00-4 4H4z"})]}),i.jsx("div",{className:"text-sm font-medium text-blue-700",children:"Creando factura"})]})]}),U&&i.jsx("div",{className:"fixed inset-0 z-[10000] bg-black/50 flex items-center justify-center p-3",children:i.jsxs("div",{className:"bg_WHITE w-full max-w-lg rounded-xl shadow-xl p-4",children:[i.jsxs("div",{className:"flex items-center mb-3",children:[i.jsx("h4",{className:"font-semibold",children:"Nuevo cargo"}),i.jsx("button",{className:"ml-auto px-2 py-1 border rounded hover:bg-gray-50",onClick:()=>Y(!1),children:"Cerrar"})]}),i.jsxs("div",{className:"space-y-3",children:[i.jsxs("div",{children:[i.jsx("label",{className:"block text-sm font-medium mb-1",children:"Descripcin"}),i.jsx("textarea",{className:"w-full border rounded px-2 py-1 min-h-[90px]",value:ee,onChange:xe=>M(xe.target.value),placeholder:"Detalle del cargo"})]}),i.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-3",children:[i.jsxs("div",{children:[i.jsx("label",{className:"block text-sm font-medium",children:"Tipo de cargo"}),i.jsxs("select",{className:"w-full border rounded px-2 py-1",value:H,onChange:xe=>te(xe.target.value),children:[i.jsx("option",{value:"DEBITO",children:"Dbito"}),i.jsx("option",{value:"CREDITO",children:"Crdito"})]})]}),i.jsxs("div",{children:[i.jsx("label",{className:"block text-sm font-medium",children:"Monto"}),i.jsx("input",{type:"number",step:"0.01",className:"w-full border rounded px-2 py-1",value:Ce,onChange:xe=>V(xe.target.value),placeholder:"0.00"})]})]}),i.jsx("div",{className:"flex justify-end",children:i.jsx("button",{className:"px-3 py-1 rounded bg-blue-600 text-white hover:bg-blue-700",onClick:We,children:"Agregar"})})]})]})})]})}const Ka=t=>`C$ ${Number(t??0).toFixed(2)}`,A_=t=>Number(t??0).toFixed(3);function lB(t){const e=t.transactions||[];let r=Number(t.totalPackages??0),n=Number(t.totalProvider??0),a=Number(t.totalSale??0),s=Number(t.totalCommissionVendors??0);if(e.length>0&&(a===0||r===0)){r=0,n=0,a=0,s=0;for(const v of e){const y=Number(v.packages??0);r+=y,n+=Number(v.totalProvider??y*(v.providerPricePack??0)),a+=Number(v.totalSale??y*(v.salePricePack??0));const b=v.commissionAmount??Number(v.totalSale??0)*Number(v.commissionPercent??0)/100;s+=Number(b||0)}}const o=t.expenses||[],l=t.adjustments||[],c=t.totalExpenses!==void 0?Number(t.totalExpenses):o.reduce((v,y)=>v+Number(y.amount||0),0),u=l.filter(v=>v.type==="DEBITO").reduce((v,y)=>v+Number(y.amount||0),0),d=l.filter(v=>v.type==="CREDITO").reduce((v,y)=>v+Number(y.amount||0),0),f=t.totalDebits!==void 0?Number(t.totalDebits):u,A=t.totalCredits!==void 0?Number(t.totalCredits):d,h=a-n,m=Number(t.branchFactorPercent??0),p=t.branchProfit!==void 0?Number(t.branchProfit):Number((h*m/100).toFixed(2)),x=t.finalAmount!==void 0?Number(t.finalAmount):a-s-c-f+A;return{totalPackages:r,totalProvider:n,totalSale:a,commissionTotal:s,expenses:c,debits:f,credits:A,grossProfit:h,branchProfit:p,finalAmount:x}}function wG(t){const e=t.transactions||[];if(e.length===0)return"";const r=Array.from(new Set(e.map(n=>n.vendorName||"Sin nombre")));return r.length===1?r[0]:"Varios"}function dVe(){const[t,e]=g.useState([]),[r,n]=g.useState(!0),[a,s]=g.useState(null),o=g.useRef(null),[l,c]=g.useState(!1),u=async()=>{n(!0);const h=Yt(mt(Se,"invoicesCandies"),In("date","desc")),m=await kt(h),p=[];m.forEach(x=>{const v=x.data();p.push({id:x.id,date:v.date,number:v.number,description:v.description,status:v.status||"PENDIENTE",totalPackages:v.totalPackages||0,totalProvider:v.totalProvider||0,totalSale:v.totalSale||0,totalExpenses:v.totalExpenses||0,totalDebits:v.totalDebits||0,totalCredits:v.totalCredits||0,totalCommissionVendors:v.totalCommissionVendors||0,finalAmount:v.finalAmount||0,branchFactorPercent:v.branchFactorPercent||0,branchProfit:v.branchProfit||0,transactions:(v.transactions||[]).map(y=>({id:y.id,date:y.date,vendorId:y.vendorId||null,vendorName:y.vendorName||"Sin nombre",sellerEmail:y.sellerEmail||null,productId:y.productId,productName:y.productName||"Sin nombre",packages:Number(y.packages||0),providerPricePack:Number(y.providerPricePack||0),salePricePack:Number(y.salePricePack||0),totalProvider:Number(y.totalProvider||0),totalSale:Number(y.totalSale||0),commissionPercent:Number(y.commissionPercent||0),commissionAmount:Number(y.commissionAmount||0)})),expenses:(v.expenses||[]).map(y=>({id:y.id,description:y.description||"",date:y.date||null,amount:Number(y.amount||0)})),adjustments:(v.adjustments||[]).map(y=>({id:y.id,description:y.description||"",type:y.type||"DEBITO",amount:Number(y.amount||0)}))})}),e(p),n(!1)};g.useEffect(()=>{u()},[]);const d=async h=>{const m=h.status==="PAGADA"?"PENDIENTE":"PAGADA";await kn(Gt(Se,"invoicesCandies",h.id),{status:m}),e(p=>p.map(x=>x.id===h.id?{...x,status:m}:x)),(a==null?void 0:a.id)===h.id&&s({...h,status:m})},f=async h=>{if(window.confirm(`Eliminar factura del ${h.date}?`))try{await Kn(Gt(Se,"invoicesCandies",h.id)),e(m=>m.filter(p=>p.id!==h.id)),(a==null?void 0:a.id)===h.id&&s(null)}catch(m){console.error(m),alert("No se pudo eliminar la factura.")}},A=async()=>{if(!o.current||!a)return;const h=o.current,m=await kg(h,{backgroundColor:"#ffffff",onclone:b=>{const w=b.body;w.style.background="#ffffff",w.querySelectorAll("*").forEach(j=>{const I=b.defaultView.getComputedStyle(j);I.boxShadow&&I.boxShadow!=="none"&&(j.style.boxShadow="none")})},scale:2}),p=m.toDataURL("image/png"),x=new rn("p","mm","a4"),v=x.internal.pageSize.getWidth(),y=m.height*v/m.width;x.addImage(p,"PNG",0,0,v,y),x.save(`factura_candy_${a.number||a.date}.pdf`)};return i.jsxs("div",{className:"max-w-7xl mx-auto p-6 bg-white rounded shadow",children:[i.jsxs("div",{className:"flex items-center mb-4 gap-3",children:[i.jsx("h2",{className:"text-2xl font-bold",children:"Facturacin CandyShop"}),i.jsx("button",{className:"ml-auto bg-blue-600 text-white px-4 py-2 rounded-2xl hover:bg-blue-700 text-sm",onClick:()=>c(!0),children:"Crear factura Candy"})]}),l&&i.jsx(uVe,{onClose:()=>c(!1),onCreated:()=>{c(!1),u()}}),i.jsx("div",{className:"bg-white p-2 rounded shadow border w-full mb-4 overflow-x-auto",children:i.jsxs("table",{className:"min-w-full text-sm",children:[i.jsx("thead",{className:"bg-gray-100",children:i.jsxs("tr",{children:[i.jsx("th",{className:"p-2 border whitespace-nowrap",children:"Fecha"}),i.jsx("th",{className:"p-2 border whitespace-nowrap",children:"N factura"}),i.jsx("th",{className:"p-2 border whitespace-nowrap",children:"Vendedor"}),i.jsx("th",{className:"p-2 border whitespace-nowrap",children:"Comisin total"}),i.jsx("th",{className:"p-2 border whitespace-nowrap",children:"Paquetes"}),i.jsx("th",{className:"p-2 border whitespace-nowrap",children:"Sub total (sin gastos/ajustes)"}),i.jsx("th",{className:"p-2 border whitespace-nowrap",children:"Gastos"}),i.jsx("th",{className:"p-2 border whitespace-nowrap",children:"Dbitos"}),i.jsx("th",{className:"p-2 border whitespace-nowrap",children:"Crditos"}),i.jsx("th",{className:"p-2 border whitespace-nowrap",children:"Total"}),i.jsx("th",{className:"p-2 border whitespace-nowrap",children:"Estado"}),i.jsx("th",{className:"p-2 border whitespace-nowrap",children:"Acciones"})]})}),i.jsx("tbody",{children:r?i.jsx("tr",{children:i.jsx("td",{colSpan:12,className:"p-4 text-center",children:"Cargando"})}):t.length===0?i.jsx("tr",{children:i.jsx("td",{colSpan:12,className:"p-4 text-center",children:"Sin facturas"})}):t.map(h=>{const m=lB(h),p=wG(h);return i.jsxs("tr",{className:"text-center",children:[i.jsx("td",{className:"p-2 border whitespace-nowrap",children:h.date}),i.jsx("td",{className:"p-2 border whitespace-nowrap",children:h.number||""}),i.jsx("td",{className:"p-2 border whitespace-nowrap",children:p}),i.jsx("td",{className:"p-2 border whitespace-nowrap",children:Ka(m.commissionTotal)}),i.jsx("td",{className:"p-2 border whitespace-nowrap",children:A_(m.totalPackages)}),i.jsx("td",{className:"p-2 border whitespace-nowrap",children:Ka(m.totalSale)}),i.jsx("td",{className:"p-2 border whitespace-nowrap",children:Ka(m.expenses)}),i.jsx("td",{className:"p-2 border whitespace-nowrap",children:Ka(m.debits)}),i.jsx("td",{className:"p-2 border whitespace-nowrap",children:Ka(m.credits)}),i.jsx("td",{className:"p-2 border whitespace-nowrap",children:Ka(m.finalAmount)}),i.jsx("td",{className:"p-2 border whitespace-nowrap",children:i.jsx("span",{className:`px-2 py-0.5 rounded text-xs ${h.status==="PAGADA"?"bg-green-100 text-green-700":"bg-yellow-100 text-yellow-700"}`,children:h.status})}),i.jsx("td",{className:"p-2 border whitespace-nowrap",children:i.jsxs("div",{className:"flex gap-2 justify-center",children:[i.jsx("button",{className:"text-xs bg-indigo-600 text-white px-2 py-1 rounded hover:bg-indigo-700",onClick:()=>s(h),children:"Ver"}),i.jsx("button",{className:"text-xs bg-blue-600 text-white px-2 py-1 rounded hover:bg-blue-700",onClick:()=>d(h),children:h.status==="PAGADA"?"Marcar PENDIENTE":"Marcar PAGADA"}),i.jsx("button",{className:"text-xs bg-red-600 text-white px-2 py-1 rounded hover:bg-red-700",onClick:()=>f(h),children:"Eliminar"})]})})]},h.id)})})]})}),a&&i.jsxs("div",{ref:o,className:"bg-white p-4 rounded shadow-2xl",children:[i.jsxs("div",{className:"flex items-center gap-2 mb-2",children:[i.jsxs("h3",{className:"text-lg font-semibold",children:["Detalle ",a.date," ",a.number?` ${a.number}`:""]}),i.jsx("button",{className:"ml-auto px-3 py-1 border rounded",onClick:()=>s(null),children:"Cerrar"}),i.jsx("button",{onClick:A,className:"bg-green-600 text-white px-3 py-1 rounded-2xl hover:bg-green-700 text-sm",children:"Imprimir PDF"})]}),(()=>{const h=lB(a),m=wG(a);return i.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4 text-sm mb-4",children:[i.jsxs("div",{className:"space-y-1",children:[i.jsxs("div",{children:[i.jsx("span",{className:"font-semibold",children:"Estado:"})," ",a.status]}),i.jsxs("div",{children:[i.jsx("span",{className:"font-semibold",children:"Vendedor:"})," ",m]}),i.jsxs("div",{children:[i.jsx("span",{className:"font-semibold",children:"Paquetes:"})," ",A_(h.totalPackages)]})]}),i.jsxs("div",{className:"space-y-1",children:[i.jsxs("div",{children:[i.jsx("span",{className:"font-semibold",children:"Total proveedor:"})," ",Ka(h.totalProvider)]}),i.jsxs("div",{children:[i.jsx("span",{className:"font-semibold",children:"Sub total ventas:"})," ",Ka(h.totalSale)]}),i.jsxs("div",{children:[i.jsx("span",{className:"font-semibold",children:"Ganancia bruta:"})," ",Ka(h.grossProfit)]})]}),i.jsxs("div",{className:"space-y-1",children:[i.jsxs("div",{children:[i.jsx("span",{className:"font-semibold",children:"Comisin vendedores:"})," ",Ka(h.commissionTotal)]}),i.jsxs("div",{children:[i.jsx("span",{className:"font-semibold",children:"Gastos:"})," ",Ka(h.expenses)]}),i.jsxs("div",{children:[i.jsx("span",{className:"font-semibold",children:"Dbitos:"})," ",Ka(h.debits)]}),i.jsxs("div",{children:[i.jsx("span",{className:"font-semibold",children:"Crditos:"})," ",Ka(h.credits)]})]})]})})(),i.jsx("h4",{className:"font-semibold mb-1",children:"Transacciones"}),i.jsx("div",{className:"overflow-x-auto mb-4",children:i.jsxs("table",{className:"min-w-full text-sm shadow-2xl",children:[i.jsx("thead",{className:"bg-gray-100",children:i.jsxs("tr",{children:[i.jsx("th",{className:"p-2 border whitespace-nowrap",children:"Fecha"}),i.jsx("th",{className:"p-2 border whitespace-nowrap",children:"Vendedor"}),i.jsx("th",{className:"p-2 border whitespace-nowrap",children:"Producto"}),i.jsx("th",{className:"p-2 border whitespace-nowrap",children:"Paquetes"}),i.jsx("th",{className:"p-2 border whitespace-nowrap",children:"Precio proveedor"}),i.jsx("th",{className:"p-2 border whitespace-nowrap",children:"Precio venta"}),i.jsx("th",{className:"p-2 border whitespace-nowrap",children:"Total proveedor"}),i.jsx("th",{className:"p-2 border whitespace-nowrap",children:"Total venta"}),i.jsx("th",{className:"p-2 border whitespace-nowrap",children:"Comisin venta"})]})}),i.jsx("tbody",{children:(a.transactions||[]).length>0?(a.transactions||[]).map((h,m)=>i.jsxs("tr",{className:"text-center",children:[i.jsx("td",{className:"p-2 border whitespace-nowrap",children:h.date}),i.jsx("td",{className:"p-2 border whitespace-nowrap",children:h.vendorName}),i.jsx("td",{className:"p-2 border whitespace-nowrap",children:h.productName}),i.jsx("td",{className:"p-2 border whitespace-nowrap",children:A_(h.packages)}),i.jsx("td",{className:"p-2 border whitespace-nowrap",children:Ka(h.providerPricePack)}),i.jsx("td",{className:"p-2 border whitespace-nowrap",children:Ka(h.salePricePack)}),i.jsx("td",{className:"p-2 border whitespace-nowrap",children:Ka(h.totalProvider)}),i.jsx("td",{className:"p-2 border whitespace-nowrap",children:Ka(h.totalSale)}),i.jsxs("td",{className:"p-2 border whitespace-nowrap",children:[Ka(h.commissionAmount||0),h.commissionPercent?` (${h.commissionPercent.toFixed(2)}%)`:""]})]},m)):i.jsx("tr",{children:i.jsx("td",{colSpan:9,className:"p-3 text-center text-gray-500 whitespace-nowrap",children:"Sin transacciones"})})})]})}),i.jsx("h4",{className:"font-semibold mb-1",children:"Gastos"}),i.jsx("div",{className:"overflow-x-auto mb-4",children:i.jsxs("table",{className:"min-w-full text-sm shadow-xl",children:[i.jsx("thead",{className:"bg-gray-100",children:i.jsxs("tr",{children:[i.jsx("th",{className:"p-2 border whitespace-nowrap",children:"Fecha"}),i.jsx("th",{className:"p-2 border whitespace-nowrap",children:"Descripcin"}),i.jsx("th",{className:"p-2 border whitespace-nowrap",children:"Monto"})]})}),i.jsx("tbody",{children:(a.expenses||[]).length>0?(a.expenses||[]).map((h,m)=>i.jsxs("tr",{className:"text-center",children:[i.jsx("td",{className:"p-2 border whitespace-nowrap",children:h.date||""}),i.jsx("td",{className:"p-2 border whitespace-nowrap",children:h.description||""}),i.jsx("td",{className:"p-2 border whitespace-nowrap",children:Ka(h.amount)})]},m)):i.jsx("tr",{children:i.jsx("td",{colSpan:3,className:"p-3 text-center text-gray-500 whitespace-nowrap",children:"Sin gastos"})})})]})}),i.jsx("h4",{className:"font-semibold mb-1",children:"Cargos extras (Notas crdito/dbito)"}),i.jsx("div",{className:"overflow-x-auto mb-4",children:i.jsxs("table",{className:"min-w-full text-sm shadow-xl",children:[i.jsx("thead",{className:"bg-gray-100",children:i.jsxs("tr",{children:[i.jsx("th",{className:"p-2 border whitespace-nowrap",children:"Descripcin"}),i.jsx("th",{className:"p-2 border whitespace-nowrap",children:"Tipo de cargo"}),i.jsx("th",{className:"p-2 border whitespace-nowrap",children:"Monto"}),i.jsx("th",{className:"p-2 border whitespace-nowrap",children:"Fecha"})]})}),i.jsx("tbody",{children:(a.adjustments||[]).length>0?(a.adjustments||[]).map((h,m)=>i.jsxs("tr",{className:"text-center",children:[i.jsx("td",{className:"p-2 border whitespace-nowrap",children:h.description}),i.jsx("td",{className:"p-2 border whitespace-nowrap",children:i.jsx("span",{className:`px-2 py-0.5 rounded text-xs ${h.type==="DEBITO"?"bg-red-100 text-red-700":"bg-green-100 text-green-700"}`,children:h.type})}),i.jsx("td",{className:"p-2 border whitespace-nowrap",children:Ka(h.amount)}),i.jsx("td",{className:"p-2 border whitespace-nowrap",children:a.date})]},m)):i.jsx("tr",{children:i.jsx("td",{colSpan:4,className:"p-3 text-center text-gray-500 whitespace-nowrap",children:"Sin cargos extras"})})})]})}),(()=>{const h=lB(a);return i.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 text-sm mb-2 justify-between",children:[i.jsxs("div",{className:"space-y-1",children:[i.jsxs("div",{children:["Total paquetes: ",i.jsx("strong",{children:A_(h.totalPackages)})]}),i.jsxs("div",{children:["Total proveedor: ",i.jsx("strong",{children:Ka(h.totalProvider)})]})]}),i.jsxs("div",{className:"space-y-1 text-center",children:[i.jsxs("div",{children:["Sub total ventas: ",i.jsx("strong",{children:Ka(h.totalSale)})]}),i.jsxs("div",{children:["Ganancia bruta: ",i.jsx("strong",{children:Ka(h.grossProfit)})]}),i.jsxs("div",{children:["Ganancia sucursal: ",i.jsx("strong",{children:Ka(h.branchProfit)})]})]}),i.jsxs("div",{className:"space-y-1 text-right",children:[i.jsxs("div",{children:["Comisin vendedores:"," ",i.jsx("strong",{children:Ka(h.commissionTotal)})]}),i.jsxs("div",{children:["Gastos: ",i.jsx("strong",{children:Ka(h.expenses)})]}),i.jsxs("div",{children:["Dbitos: ",i.jsx("strong",{children:Ka(h.debits)})]}),i.jsxs("div",{children:["Crditos: ",i.jsx("strong",{children:Ka(h.credits)})]})]}),i.jsx("div",{className:"md:col-span-3 mt-3",children:i.jsxs("div",{className:"bg-blue-50 border border-blue-300 rounded-lg p-4 text-center",children:[i.jsx("span",{className:"block text-lg font-semibold text-gray-800",children:"Total (sub total  comisin  gastos  dbitos + crditos):"}),i.jsx("span",{className:"block text-2xl font-bold text-blue-700 mt-1",children:Ka(h.finalAmount)})]})})]})})()]})]})}const Ms=t=>Math.round((Number(t)||0)*100)/100,y0=t=>Math.round((Number(t)||0)*1e3)/1e3,po=t=>Number(t??0).toFixed(2),Fh=t=>Number(t??0).toFixed(3),fVe=(t,e)=>{var A;const r=t.date??((A=t.timestamp)!=null&&A.toDate?Rr(t.timestamp.toDate(),"yyyy-MM-dd"):"");if(!r)return[];const n=t.userEmail??"",a=t.vendorName||t.vendor||n||t.vendorId||"(sin vendedor)",s=t.type||"CONTADO",o=t.vendorId,l=Number(t.total??t.itemsTotal??t.amount??t.amountCharged??0)||0,c=Number(t.vendorCommissionAmount??0)||0;if(Array.isArray(t.items)&&t.items.length>0)return t.items.map((h,m)=>{const p=Number((h==null?void 0:h.packages)??(h==null?void 0:h.qty)??(h==null?void 0:h.quantity)??0),x=Number((h==null?void 0:h.lineFinal)??0)||Math.max(0,Number((h==null?void 0:h.unitPricePackage)||(h==null?void 0:h.unitPrice)||0)*p-Number((h==null?void 0:h.discount)||0));let v=0;return c>0&&l>0&&Number(x||0)>0&&(v=Ms(c*Number(x||0)/l)),{id:`${e}#${m}`,productName:String((h==null?void 0:h.productName)??"(sin nombre)"),quantity:p,amount:Ms(x),date:r,type:s,vendorId:o,userEmail:a,vendorCommissionAmount:v}});const u=Number(t.packagesTotal??t.quantity??0),d=Number(t.amount??t.amountCharged??t.total??0)||0,f=Ms(Number(t.vendorCommissionAmount??0)||0);return[{id:e,productName:String((t==null?void 0:t.productName)??"(sin nombre)"),quantity:u,amount:Ms(d),date:r,type:s,vendorId:o,userEmail:a,vendorCommissionAmount:f}]};function hVe({role:t,roles:e,currentUserEmail:r,sellerCandyId:n}){const a=e&&e.length?e:t,s=!a||En(a,"admin"),o="daily_closures_candies",l="sales_candies",c="sellers_candies",[u,d]=g.useState(Rr($ee(new Date),"yyyy-MM-dd")),[f,A]=g.useState(Rr(new Date,"yyyy-MM-dd")),[h,m]=g.useState(!0),[p,x]=g.useState([]),[v,y]=g.useState(null),[b,w]=g.useState(""),[j,I]=g.useState([]),[_,S]=g.useState("ALL"),[E,T]=g.useState({}),k=g.useRef(null);if(!s)return i.jsxs("div",{className:"max-w-7xl mx-auto p-6 bg-white rounded-2xl shadow-2xl",children:[i.jsx("h1",{className:"text-2xl font-bold mb-2",children:"Liquidaciones"}),i.jsx("p",{className:"text-sm text-red-600",children:"Acceso denegado: solo admin."})]});const B=async()=>{try{const ee=await kt(mt(Se,c)),M=[];ee.forEach(H=>{const te=H.data();M.push({id:H.id,name:te.name||"",commissionPercent:Number(te.commissionPercent||0)})}),I(M)}catch(ee){console.error("Error cargando sellers_candies",ee)}},D=async()=>{const ee=performance.now();try{m(!0);const M=Yt(mt(Se,o),cr("date",">=",u),cr("date","<=",f)),H=await kt(M),te=performance.now();console.log(" getDocs ms:",(te-ee).toFixed(1),"docs:",H.size);const Ce=[];H.forEach(J=>Ce.push({id:J.id,...J.data()}));const V=performance.now();console.log(" parse+set ms:",(V-te).toFixed(1),"rows:",Ce.length),Ce.sort((J,Oe)=>J.date<Oe.date?1:J.date>Oe.date?-1:0),x(Ce),y(null);const We=new Set;Ce.forEach(J=>{(J.sales||[]).forEach(Oe=>{const fe=String((Oe==null?void 0:Oe.id)??"").split("#")[0].trim();fe&&We.add(fe)})});const ie=Array.from(We).filter(J=>!E[J]);if(ie.length>0){const J={};for(const Oe of ie)try{const fe=await zs(Gt(Se,l,Oe));if(fe.exists()){const _e=fe.data();J[Oe]=fVe(_e,Oe)}else J[Oe]=[]}catch(fe){console.error("Error leyendo sale",Oe,fe),J[Oe]=[]}T(Oe=>({...Oe,...J}))}}catch(M){console.error(M),w(" Error cargando liquidaciones.")}finally{m(!1)}};g.useEffect(()=>{B()},[]),g.useEffect(()=>{D()},[]);const X=async ee=>{ee.preventDefault(),await D()},me=g.useMemo(()=>{const ee={};return j.forEach(M=>ee[M.id]=M.name||M.id),ee},[j]),pe=ee=>{const M=[];return(ee.sales||[]).forEach(H=>{const te=String((H==null?void 0:H.id)??"").trim();if(!te)return;const Ce=te.split("#")[0],We=(E[Ce]||[]).find(ie=>ie.id===te);We?M.push(We):M.push({id:te,productName:String((H==null?void 0:H.productName)??"(sin nombre)"),quantity:Number((H==null?void 0:H.quantity)??0),amount:Ms(Number((H==null?void 0:H.amount)??0)),date:String((H==null?void 0:H.date)??""),type:"CONTADO",vendorId:"",userEmail:String((H==null?void 0:H.userEmail)??"(sin vendedor)"),vendorCommissionAmount:0})}),M},he=ee=>_==="ALL"?ee:ee.filter(M=>(M.vendorId||"")===_),ve=g.useMemo(()=>p.map(ee=>{const M=he(pe(ee));let H=0,te=0,Ce=0,V=0,We=0,ie=0;for(const J of M){const Oe=Number(J.quantity||0),fe=Number(J.amount||0),_e=Number(J.vendorCommissionAmount||0);J.type==="CREDITO"?(te+=Oe,V+=fe,ie+=_e):(H+=Oe,Ce+=fe,We+=_e)}return{...ee,_sales:M,_packsCash:y0(H),_packsCredit:y0(te),_amountCash:Ms(Ce),_amountCredit:Ms(V),_comCash:Ms(We),_comCredit:Ms(ie)}}),[p,E,_]),ae=g.useMemo(()=>{let ee=0,M=0,H=0,te=0,Ce=0,V=0;for(const We of ve)ee+=Number(We._packsCash||0),M+=Number(We._packsCredit||0),H+=Number(We._amountCash||0),te+=Number(We._amountCredit||0),Ce+=Number(We._comCash||0),V+=Number(We._comCredit||0);return{packsCash:y0(ee),packsCredit:y0(M),totalSales:Ms(H+te),amountCash:Ms(H),amountCredit:Ms(te),comCash:Ms(Ce),comCredit:Ms(V)}},[ve]),Pe=g.useMemo(()=>{const ee={},M={};for(const H of ve){const te=H._sales||[];for(const Ce of te){const V=(Ce.vendorId||"").trim();if(!V)continue;const We=me[V]||Ce.userEmail||V,ie=Ms(Number(Ce.vendorCommissionAmount||0));Ce.type==="CREDITO"?(M[V]||(M[V]={vendorId:V,name:We,total:0}),M[V].total=Ms(M[V].total+ie)):(ee[V]||(ee[V]={vendorId:V,name:We,total:0}),ee[V].total=Ms(ee[V].total+ie))}}return{cashRows:Object.values(ee).filter(H=>H.total>0).sort((H,te)=>te.total-H.total),creditRows:Object.values(M).filter(H=>H.total>0).sort((H,te)=>te.total-H.total)}},[ve,me]),ke=g.useMemo(()=>j.map(ee=>({id:ee.id,label:ee.name||ee.id})).sort((ee,M)=>ee.label.localeCompare(M.label)),[j]),O=g.useMemo(()=>v&&ve.find(ee=>ee.id===v.id)||null,[v,ve]),G=g.useMemo(()=>O?O._sales||[]:[],[O]),z=g.useMemo(()=>{let ee=0,M=0,H=0,te=0;for(const Ce of G)Ce.type==="CREDITO"?(M+=Number(Ce.quantity||0),te+=Number(Ce.amount||0)):(ee+=Number(Ce.quantity||0),H+=Number(Ce.amount||0));return{packsCash:y0(ee),packsCredit:y0(M),amountCash:Ms(H),amountCredit:Ms(te)}},[G]),U=g.useMemo(()=>{const ee={};for(const M of G){const H=M.productName||"(sin nombre)";ee[H]||(ee[H]={productName:H,packsCash:0,packsCredit:0,amountCash:0,amountCredit:0,comCash:0,comCredit:0});const te=Number(M.quantity||0),Ce=Number(M.amount||0),V=Number(M.vendorCommissionAmount||0);M.type==="CREDITO"?(ee[H].packsCredit=y0(ee[H].packsCredit+te),ee[H].amountCredit=Ms(ee[H].amountCredit+Ce),ee[H].comCredit=Ms(ee[H].comCredit+V)):(ee[H].packsCash=y0(ee[H].packsCash+te),ee[H].amountCash=Ms(ee[H].amountCash+Ce),ee[H].comCash=Ms(ee[H].comCash+V))}return Object.values(ee)},[G]),Y=async()=>{if(!k.current||!O)return;const ee=k.current;ee.classList.add("force-pdf-colors");try{const H=(await kg(ee,{backgroundColor:"#ffffff"})).toDataURL("image/png"),te=new rn;te.addImage(H,"PNG",10,10,190,0),te.save(`liquidacion_${O.date}.pdf`)}finally{ee.classList.remove("force-pdf-colors")}};return i.jsxs("div",{className:"max-w-7xl mx-auto p-6 bg-white rounded-2xl shadow-2xl",children:[i.jsx("h1",{className:"text-2xl font-bold mb-4",children:"Liquidaciones"}),i.jsxs("form",{onSubmit:X,className:"flex flex-wrap items-end gap-3 mb-4",children:[i.jsxs("div",{children:[i.jsx("label",{className:"block text-sm",children:"Desde"}),i.jsx("input",{type:"date",className:"border rounded px-2 py-1",value:u,onChange:ee=>d(ee.target.value)})]}),i.jsxs("div",{children:[i.jsx("label",{className:"block text-sm",children:"Hasta"}),i.jsx("input",{type:"date",className:"border rounded px-2 py-1",value:f,onChange:ee=>A(ee.target.value)})]}),i.jsxs("div",{children:[i.jsx("label",{className:"block text-sm",children:"Vendedor"}),i.jsxs("select",{className:"border rounded px-2 py-1 min-w-[240px]",value:_,onChange:ee=>S(ee.target.value),children:[i.jsx("option",{value:"ALL",children:"Todos"}),ke.map(ee=>i.jsx("option",{value:ee.id,children:ee.label},ee.id))]})]}),i.jsx("button",{type:"submit",className:"bg-blue-600 text-white px-4 py-2 rounded hover:bg-blue-700",children:"Aplicar"})]}),i.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 lg:grid-cols-4 gap-3 mb-6",children:[i.jsxs("div",{className:"border rounded-xl p-3 shadow-sm bg-gray-50",children:[i.jsx("div",{className:"text-xs text-gray-600",children:"Paquetes cash"}),i.jsx("div",{className:"text-2xl font-bold",children:Fh(ae.packsCash)})]}),i.jsxs("div",{className:"border rounded-xl p-3 shadow-sm bg-gray-50",children:[i.jsx("div",{className:"text-xs text-gray-600",children:"Paquetes crdito"}),i.jsx("div",{className:"text-2xl font-bold",children:Fh(ae.packsCredit)})]}),i.jsxs("div",{className:"border rounded-xl p-3 shadow-sm bg-gray-50",children:[i.jsx("div",{className:"text-xs text-gray-600",children:"Ventas totales"}),i.jsxs("div",{className:"text-2xl font-bold",children:["C$",po(ae.totalSales)]})]}),i.jsxs("div",{className:"border rounded-xl p-3 shadow-sm bg-gray-50",children:[i.jsx("div",{className:"text-xs text-gray-600",children:"Ventas cash"}),i.jsxs("div",{className:"text-2xl font-bold",children:["C$",po(ae.amountCash)]})]}),i.jsxs("div",{className:"border rounded-xl p-3 shadow-sm bg-gray-50",children:[i.jsx("div",{className:"text-xs text-gray-600",children:"Ventas crdito"}),i.jsxs("div",{className:"text-2xl font-bold",children:["C$",po(ae.amountCredit)]})]}),i.jsxs("div",{className:"border rounded-xl p-3 shadow-sm bg-gray-50",children:[i.jsx("div",{className:"text-xs text-gray-600",children:"Comisin cash"}),i.jsxs("div",{className:"text-2xl font-bold",children:["C$",po(ae.comCash)]})]}),i.jsxs("div",{className:"border rounded-xl p-3 shadow-sm bg-gray-50",children:[i.jsx("div",{className:"text-xs text-gray-600",children:"Comisin crdito"}),i.jsxs("div",{className:"text-2xl font-bold",children:["C$",po(ae.comCredit)]})]}),i.jsxs("div",{className:"border rounded-xl p-3 shadow-sm bg-gray-50",children:[i.jsx("div",{className:"text-xs text-gray-600",children:"Vendedores (comisin cash)"}),Pe.cashRows.length===0?i.jsx("div",{className:"text-sm text-gray-500 mt-2",children:""}):i.jsx("div",{className:"mt-2 space-y-1 max-h-28 overflow-auto pr-1",children:Pe.cashRows.map(ee=>i.jsxs("div",{className:"flex items-center justify-between text-sm",children:[i.jsx("span",{className:"truncate",children:ee.name}),i.jsxs("strong",{className:"ml-2",children:["C$",po(ee.total)]})]},ee.vendorId))})]}),i.jsxs("div",{className:"border rounded-xl p-3 shadow-sm bg-gray-50",children:[i.jsx("div",{className:"text-xs text-gray-600",children:"Vendedores (comisin crdito)"}),Pe.creditRows.length===0?i.jsx("div",{className:"text-sm text-gray-500 mt-2",children:""}):i.jsx("div",{className:"mt-2 space-y-1 max-h-28 overflow-auto pr-1",children:Pe.creditRows.map(ee=>i.jsxs("div",{className:"flex items-center justify-between text-sm",children:[i.jsx("span",{className:"truncate",children:ee.name}),i.jsxs("strong",{className:"ml-2",children:["C$",po(ee.total)]})]},ee.vendorId))})]})]}),h?i.jsx("p",{children:"Cargando..."}):ve.length===0?i.jsx("p",{className:"text-sm text-gray-500",children:"Sin cierres en el rango seleccionado."}):i.jsxs("table",{className:"min-w-full text-sm mb-6 shadow-lg p-4 bg-white border-gray-100",children:[i.jsx("thead",{className:"bg-gray-100",children:i.jsxs("tr",{children:[i.jsx("th",{className:"border p-2",children:"Fecha"}),i.jsx("th",{className:"border p-2",children:"Total paquetes Cash"}),i.jsx("th",{className:"border p-2",children:"Total paquetes crdito"}),i.jsx("th",{className:"border p-2",children:"Total Ventas cash"}),i.jsx("th",{className:"border p-2",children:"Total Ventas crdito"}),i.jsx("th",{className:"border p-2",children:"Comisin cash"}),i.jsx("th",{className:"border p-2",children:"Comisin crdito"}),i.jsx("th",{className:"border p-2",children:"Opciones"})]})}),i.jsx("tbody",{children:ve.map(ee=>i.jsxs("tr",{className:"text-center",children:[i.jsx("td",{className:"border p-1",children:ee.date}),i.jsx("td",{className:"border p-1",children:Fh(ee._packsCash)}),i.jsx("td",{className:"border p-1",children:Fh(ee._packsCredit)}),i.jsxs("td",{className:"border p-1",children:["C$",po(ee._amountCash)]}),i.jsxs("td",{className:"border p-1",children:["C$",po(ee._amountCredit)]}),i.jsxs("td",{className:"border p-1",children:["C$",po(ee._comCash)]}),i.jsxs("td",{className:"border p-1",children:["C$",po(ee._comCredit)]}),i.jsx("td",{className:"border p-1",children:i.jsx("div",{className:"flex items-center gap-2 justify-center",children:i.jsx("button",{className:"text-xs bg-gray-800 text-white px-2 py-1 rounded hover:bg-black",onClick:()=>y(ee),children:"Ver detalle"})})})]},ee.id))})]}),O&&i.jsxs("div",{className:"mt-6 rounded-2xl shadow-lg p-4 bg-white border-solid border-2 border-gray-100",children:[i.jsxs("div",{className:"flex items-center gap-3 mb-2 ",children:[i.jsxs("h2",{className:"text-xl font-semibold",children:["Detalle ",O.date]}),i.jsx("button",{onClick:()=>y(null),className:"text-sm px-2 py-1 border rounded",children:"Cerrar"}),i.jsx("button",{onClick:Y,className:"ml-auto bg-green-600 text-white px-3 py-1 rounded-2xl hover:bg-green-700 text-sm",children:"Descargar PDF"})]}),i.jsxs("div",{ref:k,className:"space-y-4",children:[i.jsxs("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-2 text-sm",children:[i.jsxs("div",{children:["Total Ventas cash:"," ",i.jsxs("strong",{children:["C$",po(z.amountCash)]})]}),i.jsxs("div",{children:["Total Ventas crdito:"," ",i.jsxs("strong",{children:["C$",po(z.amountCredit)]})]}),i.jsxs("div",{children:["Total paquetes cash:"," ",i.jsx("strong",{children:Fh(z.packsCash)})]}),i.jsxs("div",{children:["Total paquetes crdito:"," ",i.jsx("strong",{children:Fh(z.packsCredit)})]})]}),i.jsx("h3",{className:"font-semibold",children:"Ventas incluidas en el cierre"}),G.length===0?i.jsx("p",{className:"text-sm text-gray-500",children:"Sin ventas en este cierre."}):i.jsxs("table",{className:"min-w-full border text-sm",children:[i.jsx("thead",{className:"bg-gray-100",children:i.jsxs("tr",{children:[i.jsx("th",{className:"border p-2",children:"Vendedor"}),i.jsx("th",{className:"border p-2",children:"Producto"}),i.jsx("th",{className:"border p-2",children:"Tipo"}),i.jsx("th",{className:"border p-2",children:"Paquetes"}),i.jsx("th",{className:"border p-2",children:"Monto"}),i.jsx("th",{className:"border p-2",children:"Comisin"}),i.jsx("th",{className:"border p-2",children:"Fecha venta"})]})}),i.jsx("tbody",{children:G.map((ee,M)=>{const H=ee.vendorId&&me[ee.vendorId]?me[ee.vendorId]:ee.userEmail,te=Ms(Number(ee.vendorCommissionAmount||0));return i.jsxs("tr",{className:"text-center",children:[i.jsx("td",{className:"border p-1",children:H}),i.jsx("td",{className:"border p-1",children:ee.productName}),i.jsx("td",{className:"border p-1",children:ee.type==="CREDITO"?"Crdito":"Cash"}),i.jsx("td",{className:"border p-1",children:Fh(ee.quantity)}),i.jsxs("td",{className:"border p-1",children:["C$",po(ee.amount)]}),i.jsx("td",{className:"border p-1",children:te>0?`C$${po(te)}`:""}),i.jsx("td",{className:"border p-1",children:ee.date||""})]},M)})})]}),i.jsx("h3",{className:"font-semibold",children:"Consolidado por producto"}),U.length===0?i.jsx("p",{className:"text-sm text-gray-500",children:"Sin datos para consolidar."}):i.jsxs("table",{className:"min-w-full border text-sm",children:[i.jsx("thead",{className:"bg-gray-100",children:i.jsxs("tr",{children:[i.jsx("th",{className:"border p-2",children:"Producto"}),i.jsx("th",{className:"border p-2",children:"Total paquetes cash"}),i.jsx("th",{className:"border p-2",children:"Total paquetes crdito"}),i.jsx("th",{className:"border p-2",children:"Ventas cash"}),i.jsx("th",{className:"border p-2",children:"Ventas crdito"}),i.jsx("th",{className:"border p-2",children:"Comisin cash"}),i.jsx("th",{className:"border p-2",children:"Comisin crdito"})]})}),i.jsx("tbody",{children:U.map((ee,M)=>i.jsxs("tr",{className:"text-center",children:[i.jsx("td",{className:"border p-1",children:ee.productName}),i.jsx("td",{className:"border p-1",children:Fh(ee.packsCash)}),i.jsx("td",{className:"border p-1",children:Fh(ee.packsCredit)}),i.jsxs("td",{className:"border p-1",children:["C$",po(ee.amountCash)]}),i.jsxs("td",{className:"border p-1",children:["C$",po(ee.amountCredit)]}),i.jsxs("td",{className:"border p-1",children:["C$",po(ee.comCash)]}),i.jsxs("td",{className:"border p-1",children:["C$",po(ee.comCredit)]})]},M))})]})]})]}),b&&i.jsx("p",{className:"mt-3 text-sm",children:b})]})}const Gr=t=>Math.round((Number(t)||0)*100)/100,fl=t=>Math.round((Number(t)||0)*1e3)/1e3,Mr=t=>Number(t??0).toFixed(2),ai=t=>Number(t??0).toFixed(3),sI=t=>{const e=String(t||"").toUpperCase().trim();return e==="RIVAS"?"RIVAS":e==="SAN_JORGE"||e==="SANJORGE"||e==="SJ"?"SAN_JORGE":e==="ISLA"||e==="OMETEPE"?"ISLA":""},Tr=t=>{const e=Number(t);return Number.isFinite(e)?e:0},AVe=t=>Math.max(0,Math.min(1,t));function NG({title:t,series:e,valuePrefix:r="C$"}){const u=e.map(b=>Number(b.value||0)),d=u.length?Math.min(...u):0,f=u.length?Math.max(...u):0,A=f-d||1,h=840,m=204,p=e.map((b,w)=>{const j=44+(e.length<=1?h/2:w/(e.length-1)*h),I=18+(1-(Number(b.value||0)-d)/A)*m;return{x:j,y:I,...b}}),x=p.map((b,w)=>`${w===0?"M":"L"} ${b.x.toFixed(2)} ${b.y.toFixed(2)}`).join(" "),v=p[p.length-1],y=v?v.value:0;return i.jsxs("div",{className:"border rounded-2xl p-3 shadow-sm bg-white",children:[i.jsxs("div",{className:"flex items-start justify-between gap-2 mb-2",children:[i.jsx("div",{className:"font-semibold text-sm sm:text-base",children:t}),i.jsxs("div",{className:"text-xs text-gray-600 whitespace-nowrap",children:["ltimo: ",i.jsx("strong",{children:r+Mr(y)})]})]}),i.jsx("div",{className:"w-full overflow-x-auto",children:i.jsxs("svg",{viewBox:"0 0 900 260",className:"min-w-[720px] w-full h-auto",role:"img","aria-label":t,children:[[0,1,2,3].map(b=>{const w=18+b/3*m;return i.jsx("line",{x1:44,y1:w,x2:884,y2:w,stroke:"#e5e7eb",strokeWidth:"1"},b)}),i.jsxs("text",{x:8,y:28,fontSize:"12",fill:"#6b7280",children:[r,Mr(f)]}),i.jsxs("text",{x:8,y:18+m,fontSize:"12",fill:"#6b7280",children:[r,Mr(d)]}),i.jsx("path",{d:x,fill:"none",stroke:"#111827",strokeWidth:"2.5"}),p.map((b,w)=>i.jsx("circle",{cx:b.x,cy:b.y,r:"3.5",fill:"#111827"},w)),e.length>0&&i.jsxs(i.Fragment,{children:[i.jsx("text",{x:44,y:246,fontSize:"12",fill:"#6b7280",textAnchor:"start",children:e[0].label}),i.jsx("text",{x:884,y:246,fontSize:"12",fill:"#6b7280",textAnchor:"end",children:e[e.length-1].label})]})]})})]})}function mVe({title:t,items:e}){const r=e.reduce((f,A)=>f+Number(A.value||0),0),n=240,a=86,s=120,o=120,l=r>0?r:1;let c=0;const u=["#111827","#374151","#6b7280","#9ca3af"],d=e.map((f,A)=>{const h=Math.max(0,Number(f.value||0)),m=c/l,p=h/l;c+=h;const x=m+p,v=m*Math.PI*2-Math.PI/2,y=x*Math.PI*2-Math.PI/2,b=s+a*Math.cos(v),w=o+a*Math.sin(v),j=s+a*Math.cos(y),I=o+a*Math.sin(y),_=p>.5?1:0;return{d:[`M ${s} ${o}`,`L ${b.toFixed(2)} ${w.toFixed(2)}`,`A ${a} ${a} 0 ${_} 1 ${j.toFixed(2)} ${I.toFixed(2)}`,"Z"].join(" "),fill:u[A%u.length],...f,frac:p}});return i.jsxs("div",{className:"border rounded-2xl p-3 shadow-sm bg-white",children:[i.jsx("div",{className:"font-semibold text-sm sm:text-base mb-2",children:t}),i.jsxs("div",{className:"flex flex-col md:flex-row gap-3 md:items-center",children:[i.jsx("div",{className:"w-full md:w-auto overflow-x-auto",children:i.jsxs("svg",{viewBox:`0 0 ${n} ${n}`,className:"min-w-[240px] w-[260px] h-auto",role:"img","aria-label":t,children:[d.map((f,A)=>i.jsx("path",{d:f.d,fill:f.fill},A)),i.jsx("circle",{cx:s,cy:o,r:"48",fill:"#ffffff"}),i.jsx("text",{x:s,y:o-4,textAnchor:"middle",fontSize:"12",fill:"#6b7280",children:"Total"}),i.jsxs("text",{x:s,y:o+16,textAnchor:"middle",fontSize:"14",fill:"#111827",fontWeight:"700",children:["C$",Mr(r)]})]})}),i.jsxs("div",{className:"flex-1",children:[i.jsx("div",{className:"grid grid-cols-1 sm:grid-cols-2 gap-2",children:e.map((f,A)=>{const h=Number(f.value||0),m=AVe(h/(r||1))*100;return i.jsxs("div",{className:"border rounded-xl p-2 bg-gray-50",children:[i.jsxs("div",{className:"flex items-center justify-between gap-2",children:[i.jsx("div",{className:"text-sm font-semibold truncate",children:f.label}),i.jsxs("div",{className:"text-sm font-bold whitespace-nowrap",children:["C$",Mr(h)]})]}),i.jsxs("div",{className:"text-xs text-gray-600 mt-1",children:[m.toFixed(1),"%"]}),i.jsx("div",{className:"h-2 bg-white border rounded-full mt-2 overflow-hidden",children:i.jsx("div",{className:"h-full",style:{width:`${m}%`,background:u[A%u.length]}})})]},f.label)})}),i.jsx("div",{className:"text-xs text-gray-500 mt-2",children:"*Distribucin basada en ventas del perodo con los filtros actuales."})]})]})]})}const pVe=(t,e)=>{var x;const r=t.date??((x=t.timestamp)!=null&&x.toDate?Rr(t.timestamp.toDate(),"yyyy-MM-dd"):"");if(!r)return[];const n=String(t.processedDate??t.closureDate??"").trim(),a=t.status??"FLOTANTE",s=t.type||"CONTADO",o=String(t.vendorId??"").trim(),l=String(t.vendorName??"").trim()||String(t.userEmail??"").trim()||o||"(sin vendedor)",c=String(t.customerId??"").trim(),u=String(t.customerName??"").trim()||String(t.clientName??"").trim()||"",d=Number(t.total??t.itemsTotal??t.amount??t.amountCharged??0)||0,f=Number(t.vendorCommissionAmount??0)||0,A=sI(t.branch??t.vendorBranch);if(Array.isArray(t.items)&&t.items.length>0)return t.items.map((v,y)=>{const b=Number((v==null?void 0:v.packages)??0)||0,w=Number((v==null?void 0:v.total)??0)||Math.max(0,Number((v==null?void 0:v.unitPricePackage)||0)*b-Number((v==null?void 0:v.discount)||0)),j=sI(v==null?void 0:v.branch)||A;let I=0;return f>0&&d>0&&w>0&&(I=Gr(f*w/d)),{id:`${e}#${y}`,docId:e,productId:String((v==null?void 0:v.productId)??""),productName:String((v==null?void 0:v.productName)??"(sin nombre)"),date:r,processedDate:n,status:a,type:s,vendorId:o,vendorName:l,customerId:c,customerName:u,branch:j||"",packages:b,amount:Gr(w),commission:Gr(I)}});const h=Number(t.packagesTotal??0)||0,m=Number(t.total??t.amount??t.amountCharged??0)||0,p=Gr(Number(t.vendorCommissionAmount??0)||0);return[{id:`${e}#0`,docId:e,productId:"",productName:"(sin nombre)",date:r,processedDate:n,status:a,type:s,vendorId:o,vendorName:l,customerId:c,customerName:u,branch:A||"",packages:h,amount:Gr(m),commission:Gr(p)}]};function gVe({role:t,roles:e}){var Ke;const r=e&&e.length?e:t,n=!r||En(r,"admin"),a=Rr(new Date,"yyyy-MM-dd"),[s,o]=g.useState(a),[l,c]=g.useState(a),[u,d]=g.useState("TODAS"),[f,A]=g.useState("AMBAS"),[h,m]=g.useState("ALL"),[p,x]=g.useState("ALL"),[v,y]=g.useState(""),[b,w]=g.useState(""),[j,I]=g.useState(""),[_,S]=g.useState(""),[E,T]=g.useState("DIA"),[k,B]=g.useState(!0),[D,X]=g.useState(""),[me,pe]=g.useState([]),[he,ve]=g.useState([]),[ae,Pe]=g.useState([]),[ke,O]=g.useState({}),[G,z]=g.useState([]),[U,Y]=g.useState([]),[ee,M]=g.useState([]),[H,te]=g.useState([]),[Ce,V]=g.useState([]),[We,ie]=g.useState([]),[J,Oe]=g.useState(""),[fe,_e]=g.useState(""),[Ue,Ye]=g.useState(null),At=g.useRef(null),[yt,bt]=g.useState([]),[Nt,jt]=g.useState("DETALLE"),St=g.useMemo(()=>{const P={};return U.forEach(R=>P[R.id]=String(R.name||"").trim()),P},[U]),Ve=g.useMemo(()=>{const P={};return he.forEach(R=>P[R.id]=R),P},[he]),Te=P=>{const R=P.customerId?St[P.customerId]:"";return(P.customerName||R||"").trim()||(P.customerId?St[P.customerId]||P.customerId:"")||""};g.useEffect(()=>{if(!n)return;(async()=>{try{const R=await kt(mt(Se,"inventory_candies")),L=[];R.forEach(K=>L.push({id:K.id,...K.data()})),bt(L)}catch(R){console.error("inventory_candies all error:",R),bt([])}})()},[n]),g.useEffect(()=>{(async()=>{try{const R=await kt(mt(Se,"sellers_candies")),L=[];R.forEach(re=>{const de=re.data();L.push({id:re.id,name:String(de.name||"").trim(),commissionPercent:Number(de.commissionPercent||0),branch:de.branch||""})});const K=new Map;L.forEach(re=>K.set(re.id,re)),ve(Array.from(K.values()).sort((re,de)=>re.name.localeCompare(de.name)))}catch(R){console.error(R)}})()},[]),g.useEffect(()=>{if(!n||!s||!l)return;B(!0),X("");const P=Yt(mt(Se,"sales_candies"),cr("date",">=",s),cr("date","<=",l),In("date","asc")),R=jd(P,L=>{const K=[];L.forEach(re=>K.push(...pVe(re.data(),re.id))),pe(K),B(!1)},L=>{console.error("sales_candies periodo error:",L),pe([]),B(!1),X(" Error cargando ventas del perodo (revis ndices si aplica).")});return()=>R()},[n,s,l]),g.useEffect(()=>{if(!n)return;(async()=>{try{const R=Yt(mt(Se,"candy_main_orders"),cr("date",">=",s),cr("date","<=",l)),L=await kt(R),K=[];L.forEach(re=>K.push({id:re.id,...re.data()})),Pe(K)}catch(R){console.error("candy_main_orders error:",R),Pe([])}})()},[n,s,l]),g.useEffect(()=>{if(!n)return;(async()=>{try{const R=await kt(Yt(mt(Se,"candy_main_orders"),In("createdAt","desc"))),L={},K=(re,de)=>`${re}#${String(de).padStart(10,"0")}`;R.forEach(re=>{var ut;const de=re.data(),Ge=Number(((ut=de.createdAt)==null?void 0:ut.seconds)??0),rt=String(de.date||""),ft=K(rt,Ge),et=Array.isArray(de.items)?de.items:[];for(const Ot of et){const zt=String(Ot.id||Ot.productId||"");if(!zt)continue;const Bt={unitPriceRivas:Number(Ot.unitPriceRivas||0),unitPriceSanJorge:Number(Ot.unitPriceSanJorge||0),unitPriceIsla:Number(Ot.unitPriceIsla||0),key:ft},Lt=L[zt];(!Lt||Bt.key>Lt.key)&&(L[zt]=Bt)}}),O(L)}catch(R){console.error("candy_main_orders catalog error:",R),O({})}})()},[n]),g.useEffect(()=>{if(!n)return;const P=Yt(mt(Se,"inventory_candies_sellers"),cr("date",">=",s),cr("date","<=",l)),R=jd(P,L=>{const K=[];L.forEach(re=>K.push({id:re.id,...re.data()})),z(K)},L=>{console.error("inventory_candies_sellers error:",L),z([])});return()=>R()},[n,s,l]),g.useEffect(()=>{if(!n)return;(async()=>{try{const R=Yt(mt(Se,"expenses_candies"),cr("date",">=",s),cr("date","<=",l),In("date","asc")),L=await kt(R),K=[];L.forEach(re=>K.push({id:re.id,...re.data()})),te(K)}catch(R){console.warn("expenses_candies sin ndice, usando fallback:",R);try{const L=await kt(mt(Se,"expenses_candies")),K=[];L.forEach(re=>K.push({id:re.id,...re.data()})),te(K.filter(re=>String(re.date||"")>=s&&String(re.date||"")<=l))}catch(L){console.error(L),te([])}}})()},[n,s,l]),g.useEffect(()=>{if(!n)return;(async()=>{try{const R=await kt(mt(Se,"inventory_candies")),L=[];R.forEach(K=>L.push({id:K.id,...K.data()})),V(L)}catch(R){console.error("inventory_candies global error:",R),V([])}})()},[n]),g.useEffect(()=>{if(!n)return;(async()=>{try{const R=await kt(mt(Se,"inventory_candies_sellers")),L=[];R.forEach(K=>L.push({id:K.id,...K.data()})),ie(L)}catch(R){console.error("inventory_candies_sellers global error:",R),ie([])}})()},[n]),g.useEffect(()=>{if(!n)return;const P=Yt(mt(Se,"customers_candies")),R=jd(P,L=>{const K=[];L.forEach(re=>{var de,Ge,rt;return K.push({id:re.id,name:String(((de=re.data())==null?void 0:de.name)||"").trim(),initialDebt:Number(((Ge=re.data())==null?void 0:Ge.initialDebt)||0),initialDebtDate:String(((rt=re.data())==null?void 0:rt.initialDebtDate)||"").trim()})}),Y(K)},L=>{console.error("customers_candies snapshot error:",L),Y([])});return()=>R()},[n]),g.useEffect(()=>{if(!n)return;(async()=>{try{const R=Yt(mt(Se,"ar_movements"),cr("date","<=",l),In("date","asc")),L=await kt(R),K=[];L.forEach(re=>K.push({id:re.id,...re.data()})),M(K)}catch(R){console.warn("ar_movements sin ndice, usando fallback:",R);try{const L=await kt(mt(Se,"ar_movements")),K=[];L.forEach(re=>K.push({id:re.id,...re.data()})),M(K.filter(re=>String(re.date||"")<=l))}catch(L){console.error(L),M([])}}})()},[n,l]);const qe=g.useMemo(()=>{let P=[...me];if(u!=="TODAS"&&(P=P.filter(K=>K.status===u)),f==="CASH"&&(P=P.filter(K=>K.type==="CONTADO")),f==="CREDITO"&&(P=P.filter(K=>K.type==="CREDITO")),h!=="ALL"&&(P=P.filter(K=>(K.vendorId||"")===h)),p!=="ALL"&&(P=P.filter(K=>K.branch===p)),v.trim()){const K=v.trim().toLowerCase();P=P.filter(re=>(re.productName||"").toLowerCase().includes(K))}if(b.trim()){const K=b.trim().toLowerCase();P=P.filter(re=>(Te(re)||"").toLowerCase().includes(K))}const R=j.trim()?Number(j):null,L=_.trim()?Number(_):null;return R!==null&&!Number.isNaN(R)&&(P=P.filter(K=>(K.amount||0)>=R)),L!==null&&!Number.isNaN(L)&&(P=P.filter(K=>(K.amount||0)<=L)),P},[me,u,f,h,p,v,b,j,_,St]),ge=g.useMemo(()=>{let P=0,R=0,L=0,K=0,re=0,de=0;for(const rt of qe){const ft=Tr(rt.packages),et=Tr(rt.amount),ut=Tr(rt.commission);rt.type==="CREDITO"?(R+=ft,K+=et,de+=ut):(P+=ft,L+=et,re+=ut)}const Ge=Gr(L+K);return{packsCash:fl(P),packsCredit:fl(R),salesCash:Gr(L),salesCredit:Gr(K),salesTotal:Ge,commCash:Gr(re),commCredit:Gr(de),commTotal:Gr(re+de)}},[qe]),q=g.useMemo(()=>{let P=0,R=0,L=0,K=0,re=0,de=0;for(const Ge of ae){const rt=Array.isArray(Ge.items)?Ge.items:[];for(const ft of rt)P+=Tr(ft.totalRivas),R+=Tr(ft.totalSanJorge),L+=Tr(ft.totalIsla),K+=Tr(ft.gainRivas),re+=Tr(ft.gainSanJorge),de+=Tr(ft.gainIsla)}return{expectedRivas:Gr(P),expectedSanJorge:Gr(R),expectedIsla:Gr(L),grossRivas:Gr(K),grossSanJorge:Gr(re),grossIsla:Gr(de),grossTotal:Gr(K+re+de),expectedTotal:Gr(P+R+L)}},[ae]),se=g.useMemo(()=>{const P={RIVAS:{sales:0,packages:0},SAN_JORGE:{sales:0,packages:0},ISLA:{sales:0,packages:0}};for(const R of qe){const L=R.branch;L&&(P[L].sales+=Tr(R.amount),P[L].packages+=Tr(R.packages))}return{RIVAS:{sales:Gr(P.RIVAS.sales),packages:fl(P.RIVAS.packages)},SAN_JORGE:{sales:Gr(P.SAN_JORGE.sales),packages:fl(P.SAN_JORGE.packages)},ISLA:{sales:Gr(P.ISLA.sales),packages:fl(P.ISLA.packages)}}},[qe]),ye=g.useMemo(()=>({RIVAS:Gr(se.RIVAS.sales-q.expectedRivas),SAN_JORGE:Gr(se.SAN_JORGE.sales-q.expectedSanJorge),ISLA:Gr(se.ISLA.sales-q.expectedIsla)}),[se,q]),ue=g.useMemo(()=>{const P={},R={};for(const re of qe){const de=(re.vendorId||"").trim();if(!de)continue;const Ge=he.find(et=>et.id===de),rt=(Ge==null?void 0:Ge.name)||re.vendorName||"(sin vendedor)",ft=Tr(re.commission);re.type==="CREDITO"?(R[de]||(R[de]={vendorId:de,name:rt,total:0}),R[de].total=Gr(R[de].total+ft)):(P[de]||(P[de]={vendorId:de,name:rt,total:0}),P[de].total=Gr(P[de].total+ft))}const L=Object.values(P).sort((re,de)=>de.total-re.total),K=Object.values(R).sort((re,de)=>de.total-re.total);return{cashArr:L,creditArr:K}},[qe,he]),Le=g.useMemo(()=>{const P=(Bt,Lt)=>Bt.reduce((Be,vt)=>Be+Number((vt==null?void 0:vt[Lt])??0),0),R=Bt=>{const Lt=Number(Bt);return Number.isFinite(Lt)?Math.floor(Lt):0},L=Bt=>{const Lt=Number((Bt==null?void 0:Bt.totalPackages)??0);if(Lt>0)return Lt;const Be=Array.isArray(Bt==null?void 0:Bt.items)?Bt.items:[];return P(Be,"packages")};let K=0,re=0;for(const Bt of ae){const Lt=Array.isArray(Bt.items)?Bt.items:[];if(Lt.length)for(const Be of Lt)K+=Number((Be==null?void 0:Be.subtotal)??0);else K+=Number(Bt.subtotal??0);re+=L(Bt)}let de=0,Ge=0,rt=0;const ft=Bt=>{const Lt=Number(Bt==null?void 0:Bt.remainingPackages);if(Number.isFinite(Lt)&&Lt>0)return Math.floor(Lt);const Be=Math.max(1,R((Bt==null?void 0:Bt.unitsPerPackage)??1)),vt=R((Bt==null?void 0:Bt.remainingUnits)??(Bt==null?void 0:Bt.remaining)??0);return vt>0?Math.max(0,Math.floor(vt/Be)):0};for(const Bt of G)de+=Number(Bt.subtotal??0),Ge+=Number(Bt.packages??0),rt+=ft(Bt);const et=new Set(ae.filter(Bt=>String(Bt.date||"")>=s&&String(Bt.date||"")<=l).map(Bt=>Bt.id));let ut=0;for(const Bt of yt){const Lt=String(Bt.orderId||"").trim();Lt&&et.has(Lt)&&(ut+=Number(Bt.remainingPackages??0))}const Ot=Ce.reduce((Bt,Lt)=>Bt+Tr(Lt.remainingPackages),0),zt=We.reduce((Bt,Lt)=>Bt+Tr(Lt.remainingPackages),0);return{providerTotalMaster:Gr(K),providerTotalVendor:Gr(de),orderedPacksMaster:fl(re),remainingPacksMaster:fl(ut),orderedPacksVendor:fl(Ge),remainingPacksVendor:fl(rt),globalRemainingMaster:fl(Ot),globalRemainingVendor:fl(zt)}},[ae,G,yt,s,l,Ce,We]),ct=g.useMemo(()=>{const P={};let R=0;for(const L of H){const K=String(L.date||"").trim();if(!K)continue;const re=Math.max(0,Tr(L.amount));R+=re,P[K]=Gr((P[K]||0)+re)}return{total:Gr(R),byDay:P}},[H]),ht=g.useMemo(()=>{let P=0;for(const R of ae){const L=Array.isArray(R.items)?R.items:[];if(L.length)for(const K of L)P+=Tr(K==null?void 0:K.subtotal);else P+=Tr(R.subtotal)}return Gr(P)},[ae]),xe=g.useMemo(()=>{var ft;const P=et=>{const ut=Math.max(1,Math.floor(Tr(et.unitsPerPackage||1))),Ot=Tr(et.totalUnits)>0?Tr(et.totalUnits):Tr(et.packages)*ut;let zt=0;Tr(et.remainingUnits)>0?zt=Tr(et.remainingUnits):Tr(et.remainingPackages)>0?zt=Tr(et.remainingPackages)*ut:zt=0;const Bt=Math.max(0,Ot-zt);return{orderedUnits:Ot,remainingUnits:zt,soldUnits:Bt,upp:ut}},R=et=>{const ut=Ve[et];return sI(ut==null?void 0:ut.branch)||"ISLA"},L=(et,ut)=>{var Ot,zt,Bt;return ut==="ISLA"?Tr(((Ot=ke[String(et.productId||"")])==null?void 0:Ot.unitPriceIsla)??et.unitPriceIsla):ut==="RIVAS"?Tr(((zt=ke[String(et.productId||"")])==null?void 0:zt.unitPriceRivas)??et.unitPriceRivas):ut==="SAN_JORGE"?Tr(((Bt=ke[String(et.productId||"")])==null?void 0:Bt.unitPriceSanJorge)??et.unitPriceSanJorge):0},K=(et,ut)=>{const Ot=Math.max(0,Math.floor(Tr(et.packages))),zt=L(et,ut),Bt=Gr(zt*Ot);if(Bt>0)return Bt;const Lt=Tr(et.totalVendor)||(ut==="ISLA"?Tr(et.totalIsla):ut==="RIVAS"?Tr(et.totalRivas):ut==="SAN_JORGE"?Tr(et.totalSanJorge):0);if(Lt>0)return Lt;const Be=Tr(et.unitPriceVendor);if(Be>0){const{orderedUnits:vt}=P(et);return Be*vt}return 0},re=(et,ut)=>{const Ot=L(et,ut),{orderedUnits:zt,upp:Bt}=P(et);if(Ot>0&&Bt>0)return Ot/Bt;const Lt=Tr(et.unitPriceVendor);if(Lt>0)return Lt;const Be=K(et,ut);return Be>0&&zt>0?Be/zt:0},de=new Map;for(const et of G){const ut=String(et.orderId||"").trim(),Ot=ut||`DOC:${et.id}`,zt=String(et.sellerId||"").trim(),Bt=String(et.sellerName||"").trim()||zt&&((ft=Ve[zt])==null?void 0:ft.name)||""||"(sin vendedor)",Lt=String(et.date||"").trim(),Be=zt?R(zt):"",{orderedUnits:vt,remainingUnits:hr,soldUnits:xr}=P(et),Nr=K(et,Be),gr=re(et,Be),_r=gr>0?gr*xr:vt>0?Nr*xr/vt:0,Zr=Gr(Nr-_r);de.has(Ot)||de.set(Ot,{orderKey:Ot,orderId:ut||Ot,date:Lt,sellerId:zt,sellerName:Bt,branch:Be,totalOrden:0,vendido:0,restante:0,comision:0,totalEsperado:0,lines:[]});const Nn=de.get(Ot);Nn.lines.push({...et,orderedUnits:vt,soldUnits:xr,remainingUnits:hr,lineTotal:Gr(Nr),lineSoldValue:Gr(_r),lineRemainingValue:Gr(Zr)}),Nn.totalOrden+=Nr,Nn.vendido+=_r,Nn.restante+=Zr,Nn.comision+=Tr(et.uVendor??et.vendorProfit??et.gainVendor)}for(const et of de.values())et.comision=Gr(et.comision),et.totalEsperado=Gr(et.totalOrden-et.comision),et.totalOrden=Gr(et.totalOrden),et.vendido=Gr(et.vendido),et.restante=Gr(et.restante);const Ge=Array.from(de.values()).sort((et,ut)=>et.date&&ut.date?et.date<ut.date?1:-1:ut.totalOrden-et.totalOrden),rt=Ge.reduce((et,ut)=>(et.totalOrden+=Tr(ut.totalOrden),et.vendido+=Tr(ut.vendido),et.restante+=Tr(ut.restante),et.comision+=Tr(ut.comision),et.totalEsperado+=Tr(ut.totalEsperado),et),{totalOrden:0,vendido:0,restante:0,comision:0,totalEsperado:0});return{global:{totalOrden:Gr(rt.totalOrden),vendido:Gr(rt.vendido),restante:Gr(rt.restante),comision:Gr(rt.comision),totalEsperado:Gr(rt.totalEsperado)},orders:Ge}},[G,Ve,ke]),Ae=g.useMemo(()=>{var K,re,de;let P=0,R=0;for(const Ge of G){const rt=String(Ge.sellerId||"").trim(),ft=rt?Ve[rt]:void 0,et=sI(ft==null?void 0:ft.branch)||"ISLA",ut=Math.max(0,Math.floor(Tr(Ge.packages)));if(!ut)continue;const Ot=Tr(et==="ISLA"?((K=ke[String(Ge.productId||"")])==null?void 0:K.unitPriceIsla)??Ge.unitPriceIsla:et==="RIVAS"?((re=ke[String(Ge.productId||"")])==null?void 0:re.unitPriceRivas)??Ge.unitPriceRivas:((de=ke[String(Ge.productId||"")])==null?void 0:de.unitPriceSanJorge)??Ge.unitPriceSanJorge);let zt=Gr(Ot*ut);zt||(zt=Tr(et==="ISLA"?Ge.totalIsla:et==="RIVAS"?Ge.totalRivas:Ge.totalSanJorge)),zt&&(P+=zt,R+=zt)}const L=Gr(Tr(q.expectedIsla)-R);return{dispersedTotal:Gr(P),dispersedIsla:Gr(R),totalExistenteIsla:L}},[G,Ve,q.expectedIsla,ke]),Re=g.useMemo(()=>({net:Gr(G.reduce((R,L)=>{const K=L.uNeta,re=Tr(K);if(re!==0||K===0)return R+re;const de=Tr(L.grossProfit),Ge=Tr(L.logisticAllocated??L.gastos??L.gasto),rt=Tr(L.uVendor??L.vendorProfit);return R+(de-Ge-rt)},0))}),[G]),lt=g.useMemo(()=>{let P=0,R=0,L=0;for(const K of qe){if(K.type!=="CREDITO")continue;const re=Tr(K.amount),de=Tr(K.commission);P+=re,R+=re-de}for(const K of ee){const re=String(K.date||"").trim();if(!re||re<s||re>l)continue;const de=Tr(K.amount);(K.type||(de<0?"ABONO":"CARGO"))==="ABONO"&&(L+=Math.abs(de))}return{cxc:Gr(P),recaudado:Gr(L),utilidadBruta:Gr(R)}},[qe,ee,s,l]),Ne=g.useMemo(()=>{if(!fe)return null;const P=xe.orders.find(K=>K.orderKey===fe);if(!P)return null;const R={};for(const K of P.lines){const re=String(K.productName||"(sin nombre)");R[re]||(R[re]={productName:re,asociados:0,vendidos:0,restantes:0});const de=Math.max(0,Math.floor(Tr(K.packages))),Ge=Math.max(1,Math.floor(Tr(K.unitsPerPackage||1))),rt=Math.max(0,Math.floor(Tr(K.remainingPackages)||(Tr(K.remainingUnits)>0?Tr(K.remainingUnits)/Ge:0))),ft=Math.max(0,de-rt);R[re].asociados+=de,R[re].vendidos+=ft,R[re].restantes+=rt}const L=Object.values(R).map(K=>({...K,asociados:Math.floor(K.asociados),vendidos:Math.floor(K.vendidos),restantes:Math.floor(K.restantes)})).sort((K,re)=>re.asociados-K.asociados);return{...P,products:L}},[fe,xe.orders]),De=g.useMemo(()=>{const P=Ce.reduce((L,K)=>L+Tr(K.remainingPackages),0),R=We.reduce((L,K)=>L+Tr(K.remainingPackages),0);return{masterRemainingPackages:fl(P),vendorRemainingPackages:fl(R)}},[Ce,We]),xt=g.useMemo(()=>{const P=new Map,R=K=>E==="DIA"?{key:K.date,label:K.date}:E==="VENDEDOR"?{key:K.vendorId||"",label:K.vendorName||""}:E==="PRODUCTO"?{key:K.productName||"",label:K.productName||""}:{key:K.branch||"",label:K.branch||""};for(const K of qe){const{key:re,label:de}=R(K);P.has(re)||P.set(re,{key:re,label:de,packsCash:0,packsCredit:0,salesCash:0,salesCredit:0,commCash:0,commCredit:0,rows:[]});const Ge=P.get(re);Ge.rows.push(K),K.type==="CREDITO"?(Ge.packsCredit+=Tr(K.packages),Ge.salesCredit+=Tr(K.amount),Ge.commCredit+=Tr(K.commission)):(Ge.packsCash+=Tr(K.packages),Ge.salesCash+=Tr(K.amount),Ge.commCash+=Tr(K.commission))}const L=Array.from(P.values()).map(K=>({...K,packsCash:fl(K.packsCash),packsCredit:fl(K.packsCredit),salesCash:Gr(K.salesCash),salesCredit:Gr(K.salesCredit),commCash:Gr(K.commCash),commCredit:Gr(K.commCredit)}));return E==="DIA"?L.sort((K,re)=>K.key<re.key?1:-1):L.sort((K,re)=>re.salesCash+re.salesCredit-(K.salesCash+K.salesCredit)),L},[qe,E]),_t=g.useMemo(()=>{if(!J)return[];const P=xt.find(R=>R.key===J);return(P==null?void 0:P.rows)||[]},[J,xt]),Et=g.useMemo(()=>{const P={};for(const R of _t){const L=R.productName||"(sin nombre)";P[L]||(P[L]={productName:L,packsCash:0,packsCredit:0,salesCash:0,salesCredit:0,commCash:0,commCredit:0}),R.type==="CREDITO"?(P[L].packsCredit+=Tr(R.packages),P[L].salesCredit+=Tr(R.amount),P[L].commCredit+=Tr(R.commission)):(P[L].packsCash+=Tr(R.packages),P[L].salesCash+=Tr(R.amount),P[L].commCash+=Tr(R.commission))}return Object.values(P).map(R=>({...R,packsCash:fl(R.packsCash),packsCredit:fl(R.packsCredit),salesCash:Gr(R.salesCash),salesCredit:Gr(R.salesCredit),commCash:Gr(R.commCash),commCredit:Gr(R.commCredit)})).sort((R,L)=>L.salesCash+L.salesCredit-(R.salesCash+R.salesCredit))},[_t]),Mt=g.useMemo(()=>{const P={},R=de=>(St[de]||"").trim()||de;for(const de of U){const Ge=String(de.id||"").trim();Ge&&(P[Ge]={customerId:Ge,name:R(Ge),balance:0,lastPayment:"",lastPaymentAmount:0,initialDebt:Tr(de.initialDebt),initialDebtDate:String(de.initialDebtDate||"").trim(),movements:[]})}for(const de of ee){const Ge=String(de.customerId||"").trim();if(!Ge)continue;const rt=String(de.date||"");rt&&rt>l||(P[Ge]||(P[Ge]={customerId:Ge,name:R(Ge),balance:0,lastPayment:"",lastPaymentAmount:0,initialDebt:0,initialDebtDate:"",movements:[]}),P[Ge].movements.push(de))}const L=(de,Ge,rt)=>{const ft=Number(de||0);if(!ft)return 0;const et=String(Ge||"").trim();return et&&rt.some(Ot=>{var vt;const zt=Number(Ot.amount||0);if(!(zt>0))return!1;const Bt=Math.abs(zt-ft)<.01,Lt=String(Ot.date||"").trim()===et,Be=!!((vt=Ot.ref)!=null&&vt.saleId);return Bt&&Lt&&Be})?0:ft},K=Object.values(P).map(de=>{const Ge=de.movements.reduce((ut,Ot)=>ut+Tr(Ot.amount),0),rt=L(de.initialDebt,de.initialDebtDate,de.movements);let ft="",et=0;for(const ut of de.movements){const Ot=ut.type||(Tr(ut.amount)<0?"ABONO":"CARGO"),zt=String(ut.date||"");if(Ot==="ABONO"){const Bt=Math.abs(Tr(ut.amount));(!ft||zt>ft)&&(ft=zt,et=Bt)}}return{customerId:de.customerId,name:de.name,balance:Gr(rt+Ge),lastPayment:ft,lastPaymentAmount:Gr(et)}}).filter(de=>de.balance>0).sort((de,Ge)=>Ge.balance-de.balance),re=Gr(K.reduce((de,Ge)=>de+Ge.balance,0));return{count:K.length,totalPending:re,list:K.slice(0,20)}},[ee,St,U,l]),nt=g.useMemo(()=>{if(!Ue)return[];const P=ee.filter(L=>(L.customerId||"").trim()===Ue.customerId).filter(L=>!L.date||String(L.date)<=l).map(L=>({id:L.id,date:String(L.date||""),type:String(L.type||""),amount:Gr(Tr(L.amount))})).sort((L,K)=>L.date<K.date?-1:L.date>K.date?1:0);let R=0;return P.map(L=>{const K=L.type==="ABONO"?-L.amount:L.amount;return R=Gr(R+K),{...L,running:R}})},[Ue,ee,l]),Ee=g.useMemo(()=>Ue?me.filter(P=>(P.customerId||"").trim()===Ue.customerId).filter(P=>!P.date||String(P.date)<=l).sort((P,R)=>P.date<R.date?-1:P.date>R.date?1:0):[],[Ue,me,l]),we=g.useMemo(()=>{const P=Gr(ge.salesTotal),R=Gr(ge.commTotal),L=Gr(ct.total),K=Gr(P-R-L),re=new Set;for(const ut of qe)ut.date&&re.add(ut.date);const de=Math.max(1,re.size),Ge=Gr(P/de),rt=Gr(R/de),ft=Gr(L/de),et=Gr(K/de);return{ingreso:P,comision:R,gastos:L,gananciaNeta:K,daysCount:de,ingresoDia:Ge,comisionDia:rt,gastosDia:ft,netaDia:et}},[ge,ct.total,qe]),oe=g.useMemo(()=>{const P={};for(const re of qe){const de=re.date;de&&(P[de]||(P[de]={date:de,ingreso:0,comision:0}),P[de].ingreso+=Tr(re.amount),P[de].comision+=Tr(re.commission))}const R=Object.keys(P).sort((re,de)=>re<de?-1:1),L=R.map(re=>({label:re.slice(5),value:Gr(P[re].ingreso)})),K=R.map(re=>{var et,ut;const de=Tr((et=P[re])==null?void 0:et.ingreso),Ge=Tr((ut=P[re])==null?void 0:ut.comision),rt=Tr(ct.byDay[re]||0),ft=de-Ge-rt;return{label:re.slice(5),value:Gr(ft)}});return{seriesIngreso:L,seriesNeta:K,datesCount:R.length}},[qe,ct.byDay]),Fe=g.useMemo(()=>[{label:"Rivas",value:Tr(se.RIVAS.sales)},{label:"San Jorge",value:Tr(se.SAN_JORGE.sales)},{label:"Isla",value:Tr(se.ISLA.sales)}].map(P=>({...P,value:Gr(P.value)})),[se]),ce=async()=>{if(At.current){At.current.classList.add("force-pdf-colors");try{const R=(await kg(At.current,{backgroundColor:"#ffffff"})).toDataURL("image/png"),L=new rn;L.addImage(R,"PNG",10,10,190,0),L.save(`data_center_dulces_${s}_a_${l}.pdf`)}finally{At.current.classList.remove("force-pdf-colors")}}},Me=()=>{const R=[["date","processedDate","status","type","vendorId","vendorName","branch","productName","packages","amount","commission","customerId","customerName"].join(","),...qe.map(de=>[de.date,de.processedDate||"",de.status,de.type,de.vendorId,`"${String(de.vendorName||"").replace(/"/g,'""')}"`,de.branch||"",`"${String(de.productName||"").replace(/"/g,'""')}"`,ai(de.packages),Mr(de.amount),Mr(de.commission),de.customerId||"",`"${String(Te(de)||"").replace(/"/g,'""')}"`].join(","))],L=new Blob([R.join(`
`)],{type:"text/csv;charset=utf-8;"}),K=URL.createObjectURL(L),re=document.createElement("a");re.href=K,re.download=`data_center_dulces_${s}_a_${l}.csv`,re.click(),URL.revokeObjectURL(K)};return n?i.jsxs("div",{className:"max-w-7xl mx-auto px-2 sm:px-4 md:px-0",children:[i.jsxs("div",{className:"bg-white p-3 sm:p-4 md:p-6 rounded-2xl shadow-2xl",children:[i.jsxs("div",{className:"flex flex-col gap-2 md:flex-row md:items-center md:justify-between mb-4",children:[i.jsx("h2",{className:"text-lg sm:text-xl md:text-2xl font-bold",children:"Data Center - Dulces"}),i.jsxs("div",{className:"flex flex-col sm:flex-row gap-2 sm:items-center sm:justify-end",children:[i.jsx("button",{onClick:ce,className:`
                inline-flex items-center justify-center gap-2
                w-full sm:w-auto
                px-3 py-2 text-sm font-semibold
                rounded-lg md:rounded-md
                bg-green-600 text-white hover:bg-green-700 transition-colors
              `,children:"Exportar PDF"}),i.jsx("button",{onClick:Me,className:`
                inline-flex items-center justify-center gap-2
                w-full sm:w-auto
                px-3 py-2 text-sm font-semibold
                rounded-lg md:rounded-md
                bg-gray-800 text-white hover:bg-black transition-colors
              `,children:"Exportar CSV"})]})]}),i.jsx("div",{className:"rounded-2xl border border-gray-100 p-3 sm:p-4 mb-3 shadow-sm bg-white",children:i.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-6 gap-3",children:[i.jsxs("div",{children:[i.jsx("label",{className:"block text-xs text-gray-600",children:"Desde"}),i.jsx("input",{type:"date",className:"border rounded-lg px-3 py-2 w-full text-sm",value:s,onChange:P=>o(P.target.value)})]}),i.jsxs("div",{children:[i.jsx("label",{className:"block text-xs text-gray-600",children:"Hasta"}),i.jsx("input",{type:"date",className:"border rounded-lg px-3 py-2 w-full text-sm",value:l,onChange:P=>c(P.target.value)})]}),i.jsxs("div",{children:[i.jsx("label",{className:"block text-xs text-gray-600",children:"Estado"}),i.jsxs("select",{className:"border rounded-lg px-3 py-2 w-full text-sm",value:u,onChange:P=>d(P.target.value),children:[i.jsx("option",{value:"TODAS",children:"Todas"}),i.jsx("option",{value:"FLOTANTE",children:"Flotante"}),i.jsx("option",{value:"PROCESADA",children:"Procesada"})]})]}),i.jsxs("div",{children:[i.jsx("label",{className:"block text-xs text-gray-600",children:"Tipo"}),i.jsxs("select",{className:"border rounded-lg px-3 py-2 w-full text-sm",value:f,onChange:P=>A(P.target.value),children:[i.jsx("option",{value:"AMBAS",children:"Ambas"}),i.jsx("option",{value:"CASH",children:"Cash"}),i.jsx("option",{value:"CREDITO",children:"Crdito"})]})]}),i.jsxs("div",{children:[i.jsx("label",{className:"block text-xs text-gray-600",children:"Vendedor"}),i.jsxs("select",{className:"border rounded-lg px-3 py-2 w-full text-sm",value:h,onChange:P=>m(P.target.value),children:[i.jsx("option",{value:"ALL",children:"Todos"}),he.map(P=>i.jsx("option",{value:P.id,children:P.name||P.id},P.id))]})]}),i.jsxs("div",{children:[i.jsx("label",{className:"block text-xs text-gray-600",children:"Sucursal"}),i.jsxs("select",{className:"border rounded-lg px-3 py-2 w-full text-sm",value:p,onChange:P=>x(P.target.value),children:[i.jsx("option",{value:"ALL",children:"Todas"}),i.jsx("option",{value:"RIVAS",children:"Rivas"}),i.jsx("option",{value:"SAN_JORGE",children:"San Jorge"}),i.jsx("option",{value:"ISLA",children:"Isla"})]})]}),i.jsxs("div",{className:"sm:col-span-2 lg:col-span-3",children:[i.jsx("label",{className:"block text-xs text-gray-600",children:"Producto (opcional)"}),i.jsx("input",{className:"border rounded-lg px-3 py-2 w-full text-sm",value:v,onChange:P=>y(P.target.value),placeholder:"Ej: Conitos"})]}),i.jsxs("div",{className:"sm:col-span-2 lg:col-span-3",children:[i.jsx("label",{className:"block text-xs text-gray-600",children:"Cliente (opcional)"}),i.jsx("input",{className:"border rounded-lg px-3 py-2 w-full text-sm",value:b,onChange:P=>w(P.target.value),placeholder:"Ej: Javier"})]}),i.jsxs("div",{children:[i.jsx("label",{className:"block text-xs text-gray-600",children:"Monto min"}),i.jsx("input",{className:"border rounded-lg px-3 py-2 w-full text-sm",value:j,onChange:P=>I(P.target.value),placeholder:"0"})]}),i.jsxs("div",{children:[i.jsx("label",{className:"block text-xs text-gray-600",children:"Monto max"}),i.jsx("input",{className:"border rounded-lg px-3 py-2 w-full text-sm",value:_,onChange:P=>S(P.target.value),placeholder:"999999"})]}),i.jsxs("div",{className:"sm:col-span-2 lg:col-span-2",children:[i.jsx("label",{className:"block text-xs text-gray-600",children:"Agrupar por"}),i.jsxs("select",{className:"border rounded-lg px-3 py-2 w-full text-sm",value:E,onChange:P=>{Oe(""),T(P.target.value)},children:[i.jsx("option",{value:"DIA",children:"Da"}),i.jsx("option",{value:"VENDEDOR",children:"Vendedor"}),i.jsx("option",{value:"PRODUCTO",children:"Producto"}),i.jsx("option",{value:"SUCURSAL",children:"Sucursal"})]})]})]})}),i.jsxs("div",{className:"flex flex-col gap-2 sm:flex-row sm:items-center sm:justify-between mb-4",children:[i.jsxs("div",{className:"flex gap-2",children:[i.jsx("button",{onClick:()=>{_e(""),jt("MACRO")},className:["px-3 py-2 rounded-full text-sm font-semibold border transition-colors",Nt==="MACRO"?"bg-gray-900 text-white border-gray-900":"bg-white text-gray-800 border-gray-200 hover:bg-gray-50"].join(" "),children:"Data Macro"}),i.jsx("button",{onClick:()=>{_e(""),jt("DETALLE")},className:["px-3 py-2 rounded-full text-sm font-semibold border transition-colors",Nt==="DETALLE"?"bg-gray-900 text-white border-gray-900":"bg-white text-gray-800 border-gray-200 hover:bg-gray-50"].join(" "),children:"Data Detalle"})]}),i.jsxs("div",{className:"text-xs text-gray-600",children:["Gastos del perodo (expenses_candies):"," ",i.jsxs("strong",{children:["C$",Mr(ct.total)]})]})]}),i.jsxs("div",{ref:At,children:[Nt==="MACRO"&&i.jsxs(i.Fragment,{children:[i.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-4 gap-3 mb-4",children:[i.jsxs("div",{className:"border rounded-xl p-3 shadow-sm bg-gray-50",children:[i.jsx("div",{className:"text-xs text-gray-600",children:"Ingreso (ventas)"}),i.jsxs("div",{className:"text-xl sm:text-2xl font-bold",children:["C$",Mr(we.ingreso)]}),i.jsxs("div",{className:"text-xs text-gray-500 mt-1",children:[s,"  ",l]})]}),i.jsxs("div",{className:"border rounded-xl p-3 shadow-sm bg-gray-50",children:[i.jsx("div",{className:"text-xs text-gray-600",children:"Comisin vendedor (ventas)"}),i.jsxs("div",{className:"text-xl sm:text-2xl font-bold",children:["-C$",Mr(we.comision)]}),i.jsxs("div",{className:"text-xs text-gray-500 mt-1",children:["Cash: C$",Mr(ge.commCash),"  Crdito: C$",Mr(ge.commCredit)]})]}),i.jsxs("div",{className:"border rounded-xl p-3 shadow-sm bg-gray-50",children:[i.jsx("div",{className:"text-xs text-gray-600",children:"Gastos (expenses_candies)"}),i.jsxs("div",{className:"text-xl sm:text-2xl font-bold",children:["-C$",Mr(we.gastos)]}),i.jsx("div",{className:"text-xs text-gray-500 mt-1",children:"Se calcula automtico por fechas"})]}),i.jsxs("div",{className:"border rounded-xl p-3 shadow-sm bg-gray-50",children:[i.jsx("div",{className:"text-xs text-gray-600",children:"Ganancia neta (real)"}),i.jsxs("div",{className:"text-xl sm:text-2xl font-bold",children:["C$",Mr(we.gananciaNeta)]}),i.jsx("div",{className:"text-xs text-gray-500 mt-1",children:"Ingreso  Comisin  Gastos"})]}),i.jsxs("div",{className:"border rounded-xl p-3 shadow-sm bg-gray-50",children:[i.jsx("div",{className:"text-xs text-gray-600",children:"Promedio neto por da"}),i.jsxs("div",{className:"text-xl sm:text-2xl font-bold",children:["C$",Mr(we.netaDia)]}),i.jsxs("div",{className:"text-xs text-gray-500 mt-1",children:["Das con ventas: ",i.jsx("strong",{children:we.daysCount})]})]})]}),i.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-3 mb-3",children:[i.jsx(NG,{title:"Ventas por da (Ingreso)",series:oe.seriesIngreso,valuePrefix:"C$"}),i.jsx(NG,{title:"Ganancia neta por da (real)",series:oe.seriesNeta,valuePrefix:"C$"})]}),i.jsx("div",{className:"mb-6",children:i.jsx(mVe,{title:"Distribucin de ventas por sucursal",items:Fe})})]}),Nt==="DETALLE"&&i.jsxs(i.Fragment,{children:[i.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-4 gap-3 mb-4",children:[i.jsxs("div",{className:"border rounded-xl p-3 shadow-sm bg-gray-50",children:[i.jsx("div",{className:"text-xs text-gray-600",children:"Paquetes cash"}),i.jsx("div",{className:"text-xl sm:text-2xl font-bold",children:ai(ge.packsCash)}),i.jsxs("div",{className:"text-xs text-gray-500 mt-1",children:[s,"  ",l]})]}),i.jsxs("div",{className:"border rounded-xl p-3 shadow-sm bg-gray-50",children:[i.jsx("div",{className:"text-xs text-gray-600",children:"Paquetes crdito"}),i.jsx("div",{className:"text-xl sm:text-2xl font-bold",children:ai(ge.packsCredit)}),i.jsxs("div",{className:"text-xs text-gray-500 mt-1",children:[s,"  ",l]})]}),i.jsxs("div",{className:"border rounded-xl p-3 shadow-sm bg-gray-50",children:[i.jsx("div",{className:"text-xs text-gray-600",children:"Ventas totales"}),i.jsxs("div",{className:"text-xl sm:text-2xl font-bold",children:["C$",Mr(ge.salesTotal)]}),i.jsxs("div",{className:"text-xs text-gray-500 mt-1",children:["Cash: C$",Mr(ge.salesCash),"  Crdito: C$",Mr(ge.salesCredit)]})]}),i.jsxs("div",{className:"border rounded-xl p-3 shadow-sm bg-gray-50",children:[i.jsx("div",{className:"text-xs text-gray-600",children:"Comisin"}),i.jsxs("div",{className:"text-xl sm:text-2xl font-bold",children:["C$",Mr(ge.commTotal)]}),i.jsxs("div",{className:"text-xs text-gray-500 mt-1",children:["Cash: C$",Mr(ge.commCash),"  Crdito: C$",Mr(ge.commCredit)]})]})]}),i.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-4 gap-3 mb-4",children:[i.jsxs("div",{className:"border rounded-xl p-3 shadow-sm bg-gray-50",children:[i.jsx("div",{className:"text-xs text-gray-600",children:"Utilidad Bruta Aprox. (rdenes maestras)"}),i.jsxs("div",{className:"text-xl sm:text-2xl font-bold",children:["C$",Mr(q.grossIsla)]}),i.jsx("div",{className:"text-xs text-gray-500 mt-1",children:"Isla Ometepe"})]}),i.jsxs("div",{className:"border rounded-xl p-3 shadow-sm bg-gray-50",children:[i.jsx("div",{className:"text-xs text-gray-600",children:"Total esperado (Isla)"}),i.jsxs("div",{className:"text-xl sm:text-2xl font-bold mt-2",children:["C$",Mr(q.expectedIsla)]}),i.jsx("div",{className:"text-xs text-gray-500 mt-1",children:"Isla Ometepe"})]}),i.jsxs("div",{className:"border rounded-xl p-3 shadow-sm bg-gray-50",children:[i.jsx("div",{className:"text-xs text-gray-600",children:"Actual ventas (Isla)"}),i.jsxs("div",{className:"text-xl sm:text-2xl font-bold mt-2",children:["C$",Mr(se.ISLA.sales)]}),i.jsx("div",{className:"text-xs text-gray-500 mt-1",children:"Isla Ometepe"})]}),i.jsxs("div",{className:"border rounded-xl p-3 shadow-sm bg-gray-50",children:[i.jsx("div",{className:"text-xs text-gray-600",children:"Diferencia vs esperado (Isla)"}),i.jsxs("div",{className:"text-xl sm:text-2xl font-bold mt-2",children:["C$",Mr(ye.ISLA)]}),i.jsx("div",{className:"text-xs text-gray-500 mt-1",children:"Isla Ometepe"})]})]}),i.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-4 gap-3 mb-4",children:[i.jsxs("div",{className:"border rounded-xl p-3 shadow-sm bg-gray-50",children:[i.jsx("div",{className:"text-xs text-gray-600",children:"Total facturado (precio proveedor)"}),i.jsxs("div",{className:"text-xl sm:text-2xl font-bold",children:["C$",Mr(ht)]}),i.jsx("div",{className:"text-xs text-gray-500 mt-1",children:"Sumatoria rdenes maestras (perodo)"})]}),i.jsxs("div",{className:"border rounded-xl p-3 shadow-sm bg-gray-50",children:[i.jsx("div",{className:"text-xs text-gray-600",children:"Utilidad neta (rdenes vendedor)"}),i.jsxs("div",{className:"text-xl sm:text-2xl font-bold",children:["C$",Mr(Re.net)]}),i.jsx("div",{className:"text-xs text-gray-500 mt-1",children:"U bruta  Gastos  U vendedor"})]}),i.jsxs("div",{className:"border rounded-xl p-3 shadow-sm bg-gray-50",children:[i.jsx("div",{className:"text-xs text-gray-600",children:"Paquetes ordenados (maestras)"}),i.jsx("div",{className:"text-xl sm:text-2xl font-bold",children:ai(Le.orderedPacksMaster)}),i.jsxs("div",{className:"text-xs text-gray-500 mt-1",children:["Restantes (perodo):"," ",i.jsx("strong",{children:ai(Le.remainingPacksMaster)})]}),i.jsxs("div",{className:"text-xs text-gray-500 mt-1",children:["Existencia global (todas):"," ",i.jsx("strong",{children:ai(De.masterRemainingPackages)})]})]}),i.jsxs("div",{className:"border rounded-xl p-3 shadow-sm bg-gray-50",children:[i.jsx("div",{className:"text-xs text-gray-600",children:"Paquetes ordenados (rdenes vendedor)"}),i.jsx("div",{className:"text-xl sm:text-2xl font-bold",children:ai(Le.orderedPacksVendor)}),i.jsxs("div",{className:"text-xs text-gray-500 mt-1",children:["Restantes (perodo):"," ",i.jsx("strong",{children:ai(Le.remainingPacksVendor)})]}),i.jsxs("div",{className:"text-xs text-gray-500 mt-1",children:["Existencia global (todas):"," ",i.jsx("strong",{children:ai(De.vendorRemainingPackages)})]})]})]}),i.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-4 gap-3 mb-4",children:[i.jsxs("div",{className:"border rounded-xl p-3 shadow-sm bg-gray-50",children:[i.jsx("div",{className:"text-xs text-gray-600",children:"Total facturado a precio proveedor (rdenes vendedor)"}),i.jsxs("div",{className:"text-xl sm:text-2xl font-bold",children:["C$",Mr(Le.providerTotalVendor)]}),i.jsxs("div",{className:"text-xs text-gray-500 mt-1",children:[s,"  ",l]})]}),i.jsxs("div",{className:"border rounded-xl p-3 shadow-sm bg-gray-50",children:[i.jsx("div",{className:"text-xs text-gray-600",children:"Productos dispersados (precio venta)"}),i.jsxs("div",{className:"text-xl sm:text-2xl font-bold",children:["C$",Mr(Ae.dispersedTotal)]}),i.jsx("div",{className:"text-xs text-gray-500 mt-1",children:"Sumatoria rdenes de vendedores (perodo)"})]}),i.jsxs("div",{className:"border rounded-xl p-3 shadow-sm bg-gray-50",children:[i.jsx("div",{className:"text-xs text-gray-600",children:"Dispersado Isla (precio venta)"}),i.jsxs("div",{className:"text-xl sm:text-2xl font-bold",children:["C$",Mr(Ae.dispersedIsla)]}),i.jsx("div",{className:"text-xs text-gray-500 mt-1",children:"Usado para Total existente"})]}),i.jsxs("div",{className:"border rounded-xl p-3 shadow-sm bg-gray-50",children:[i.jsx("div",{className:"text-xs text-gray-600",children:"Total existente en productos (Isla)"}),i.jsxs("div",{className:"text-xl sm:text-2xl font-bold",children:["C$",Mr(Ae.totalExistenteIsla)]}),i.jsx("div",{className:"text-xs text-gray-500 mt-1",children:"Esperado Isla  Dispersado Isla"})]})]}),i.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-4 gap-3 mb-4",children:[i.jsxs("div",{className:"border rounded-xl p-3 shadow-sm bg-gray-50",children:[i.jsx("div",{className:"text-xs text-gray-600",children:"CxC (ventas crdito)"}),i.jsxs("div",{className:"text-xl sm:text-2xl font-bold",children:["C$",Mr(lt.cxc)]}),i.jsxs("div",{className:"text-xs text-gray-500 mt-1",children:[s,"  ",l]})]}),i.jsxs("div",{className:"border rounded-xl p-3 shadow-sm bg-gray-50",children:[i.jsx("div",{className:"text-xs text-gray-600",children:"Comisin crdito"}),i.jsxs("div",{className:"text-xl sm:text-2xl font-bold",children:["C$",Mr(ge.commCredit)]}),i.jsxs("div",{className:"text-xs text-gray-500 mt-1",children:[s,"  ",l]})]}),i.jsxs("div",{className:"border rounded-xl p-3 shadow-sm bg-gray-50",children:[i.jsx("div",{className:"text-xs text-gray-600",children:"Recaudacin (abonos)"}),i.jsxs("div",{className:"text-xl sm:text-2xl font-bold",children:["C$",Mr(lt.recaudado)]}),i.jsx("div",{className:"text-xs text-gray-500 mt-1",children:"abonos en ar_movements"})]}),i.jsxs("div",{className:"border rounded-xl p-3 shadow-sm bg-gray-50",children:[i.jsx("div",{className:"text-xs text-gray-600",children:"Utilidad bruta crdito (ventas  comisin)"}),i.jsxs("div",{className:"text-xl sm:text-2xl font-bold",children:["C$",Mr(lt.utilidadBruta)]}),i.jsx("div",{className:"text-xs text-gray-500 mt-1",children:"Paquetes vendidos al crdito"})]})]}),i.jsxs("div",{className:"border rounded-2xl p-3 sm:p-4 mb-4 shadow-sm bg-white border-gray-100",children:[i.jsxs("div",{className:"flex items-start justify-between gap-2 mb-2",children:[i.jsx("h3",{className:"font-semibold text-sm sm:text-base",children:"rdenes de vendedores (Global)"}),i.jsxs("div",{className:"text-xs text-gray-500",children:["Basado en ",i.jsx("strong",{children:"precio de venta"})," (por sucursal del vendedor)"]})]}),i.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-5 gap-2 text-sm",children:[i.jsxs("div",{className:"border rounded-xl p-3 bg-gray-50",children:["Total orden:"," ",i.jsxs("strong",{children:["C$",Mr(xe.global.totalOrden)]})]}),i.jsxs("div",{className:"border rounded-xl p-3 bg-gray-50",children:["Vendido:"," ",i.jsxs("strong",{children:["C$",Mr(xe.global.vendido)]})]}),i.jsxs("div",{className:"border rounded-xl p-3 bg-gray-50",children:["Restante:"," ",i.jsxs("strong",{children:["C$",Mr(xe.global.restante)]})]}),i.jsxs("div",{className:"border rounded-xl p-3 bg-gray-50",children:["Comisin:"," ",i.jsxs("strong",{children:["C$",Mr(xe.global.comision)]})]}),i.jsxs("div",{className:"border rounded-xl p-3 bg-gray-50",children:["Total esperado:"," ",i.jsxs("strong",{children:["C$",Mr(xe.global.totalEsperado)]})]})]})]}),i.jsxs("div",{className:"border rounded-2xl p-3 sm:p-4 mb-6 shadow-sm bg-white border-gray-100",children:[i.jsxs("div",{className:"flex items-center justify-between gap-2 mb-3",children:[i.jsx("h3",{className:"font-semibold text-sm sm:text-base",children:"rdenes de vendedores (Detalle por orden)"}),i.jsx("div",{className:"text-xs text-gray-500",children:"Click/Tap en una orden para ver productos asociados/vendidos/restantes"})]}),xe.orders.length===0?i.jsx("div",{className:"text-sm text-gray-500",children:""}):i.jsxs(i.Fragment,{children:[i.jsx("div",{className:"md:hidden space-y-2",children:xe.orders.map(P=>i.jsxs("div",{className:"border rounded-2xl p-3",children:[i.jsxs("div",{className:"flex items-start justify-between gap-2",children:[i.jsxs("div",{className:"min-w-0",children:[i.jsx("div",{className:"font-semibold truncate",children:P.orderId}),i.jsxs("div",{className:"text-xs text-gray-600 mt-1 truncate",children:[P.sellerName," ",P.branch?` ${P.branch}`:""," ",P.date?` ${P.date}`:""]})]}),i.jsx("button",{className:"px-3 py-2 rounded-lg bg-gray-800 text-white text-sm font-semibold",onClick:()=>_e(P.orderKey),children:"Ver"})]}),i.jsxs("div",{className:"grid grid-cols-2 gap-2 mt-3 text-sm",children:[i.jsxs("div",{className:"bg-gray-50 rounded-xl p-2",children:[i.jsx("div",{className:"text-xs text-gray-600",children:"Total"}),i.jsxs("div",{className:"font-bold",children:["C$",Mr(P.totalOrden)]})]}),i.jsxs("div",{className:"bg-gray-50 rounded-xl p-2",children:[i.jsx("div",{className:"text-xs text-gray-600",children:"Vendido"}),i.jsxs("div",{className:"font-bold",children:["C$",Mr(P.vendido)]})]}),i.jsxs("div",{className:"bg-gray-50 rounded-xl p-2",children:[i.jsx("div",{className:"text-xs text-gray-600",children:"Restante"}),i.jsxs("div",{className:"font-bold",children:["C$",Mr(P.restante)]})]}),i.jsxs("div",{className:"bg-gray-50 rounded-xl p-2",children:[i.jsx("div",{className:"text-xs text-gray-600",children:"Comisin"}),i.jsxs("div",{className:"font-bold",children:["C$",Mr(P.comision)]})]})]})]},P.orderKey))}),i.jsx("div",{className:"hidden md:block overflow-x-auto",children:i.jsxs("table",{className:"min-w-full border text-sm",children:[i.jsx("thead",{className:"bg-gray-100",children:i.jsxs("tr",{children:[i.jsx("th",{className:"border p-2 text-left",children:"Vendedor"}),i.jsx("th",{className:"border p-2",children:"Sucursal"}),i.jsx("th",{className:"border p-2",children:"Fecha"}),i.jsx("th",{className:"border p-2",children:"Total orden"}),i.jsx("th",{className:"border p-2",children:"Vendido"}),i.jsx("th",{className:"border p-2",children:"Restante"}),i.jsx("th",{className:"border p-2",children:"Comisin"}),i.jsx("th",{className:"border p-2",children:"Total esperado"}),i.jsx("th",{className:"border p-2",children:"Accin"})]})}),i.jsx("tbody",{children:xe.orders.map(P=>i.jsxs("tr",{className:"text-center",children:[i.jsx("td",{className:"border p-2 text-left",children:P.sellerName}),i.jsx("td",{className:"border p-2",children:P.branch||""}),i.jsx("td",{className:"border p-2",children:P.date||""}),i.jsxs("td",{className:"border p-2",children:["C$",Mr(P.totalOrden)]}),i.jsxs("td",{className:"border p-2",children:["C$",Mr(P.vendido)]}),i.jsxs("td",{className:"border p-2",children:["C$",Mr(P.restante)]}),i.jsxs("td",{className:"border p-2",children:["C$",Mr(P.comision)]}),i.jsxs("td",{className:"border p-2",children:["C$",Mr(P.totalEsperado)]}),i.jsx("td",{className:"border p-2",children:i.jsx("button",{className:"text-xs bg-gray-800 text-white px-3 py-2 rounded-lg hover:bg-black",onClick:()=>_e(P.orderKey),children:"Ver detalle"})})]},P.orderKey))})]})}),Ne&&i.jsxs("div",{className:"mt-4 rounded-2xl border-2 border-gray-100 p-3 sm:p-4 shadow-lg bg-white",children:[i.jsxs("div",{className:"flex flex-col sm:flex-row sm:items-center gap-2 mb-3",children:[i.jsxs("h4",{className:"text-base sm:text-xl font-semibold truncate",children:["Detalle orden vendedor  ",Ne.orderId]}),i.jsx("button",{onClick:()=>_e(""),className:"w-full sm:w-auto text-sm px-3 py-2 border rounded-lg hover:bg-gray-50",children:"Cerrar"})]}),i.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-5 gap-2 text-sm mb-4",children:[i.jsxs("div",{className:"border rounded-xl p-3 bg-gray-50",children:["Total orden:"," ",i.jsxs("strong",{children:["C$",Mr(Ne.totalOrden)]})]}),i.jsxs("div",{className:"border rounded-xl p-3 bg-gray-50",children:["Vendido:"," ",i.jsxs("strong",{children:["C$",Mr(Ne.vendido)]})]}),i.jsxs("div",{className:"border rounded-xl p-3 bg-gray-50",children:["Restante:"," ",i.jsxs("strong",{children:["C$",Mr(Ne.restante)]})]}),i.jsxs("div",{className:"border rounded-xl p-3 bg-gray-50",children:["Comisin:"," ",i.jsxs("strong",{children:["C$",Mr(Ne.comision)]})]}),i.jsxs("div",{className:"border rounded-xl p-3 bg-gray-50",children:["Total esperado:"," ",i.jsxs("strong",{children:["C$",Mr(Ne.totalEsperado)]})]})]}),i.jsx("h5",{className:"font-semibold mb-2 text-sm sm:text-base",children:"Productos asociados (Nombre - Asociados - Vendidos - Restantes)"}),i.jsx("div",{className:"md:hidden space-y-2",children:Ne.products.map(P=>i.jsxs("div",{className:"border rounded-2xl p-3",children:[i.jsx("div",{className:"font-semibold",children:P.productName}),i.jsxs("div",{className:"grid grid-cols-3 gap-2 mt-3 text-sm",children:[i.jsxs("div",{className:"bg-gray-50 rounded-xl p-2 text-center",children:[i.jsx("div",{className:"text-xs text-gray-600",children:"Asociados"}),i.jsx("div",{className:"font-bold",children:P.asociados})]}),i.jsxs("div",{className:"bg-gray-50 rounded-xl p-2 text-center",children:[i.jsx("div",{className:"text-xs text-gray-600",children:"Vendidos"}),i.jsx("div",{className:"font-bold",children:P.vendidos})]}),i.jsxs("div",{className:"bg-gray-50 rounded-xl p-2 text-center",children:[i.jsx("div",{className:"text-xs text-gray-600",children:"Restantes"}),i.jsx("div",{className:"font-bold",children:P.restantes})]})]})]},P.productName))}),i.jsx("div",{className:"hidden md:block overflow-x-auto",children:i.jsxs("table",{className:"min-w-full border text-sm",children:[i.jsx("thead",{className:"bg-gray-100",children:i.jsxs("tr",{children:[i.jsx("th",{className:"border p-2 text-left",children:"Nombre producto"}),i.jsx("th",{className:"border p-2",children:"Asociados"}),i.jsx("th",{className:"border p-2",children:"Vendidos"}),i.jsx("th",{className:"border p-2",children:"Restantes"})]})}),i.jsxs("tbody",{children:[Ne.products.map(P=>i.jsxs("tr",{className:"text-center",children:[i.jsx("td",{className:"border p-2 text-left",children:P.productName}),i.jsx("td",{className:"border p-2",children:P.asociados}),i.jsx("td",{className:"border p-2",children:P.vendidos}),i.jsx("td",{className:"border p-2",children:P.restantes})]},P.productName)),Ne.products.length===0&&i.jsx("tr",{children:i.jsx("td",{colSpan:4,className:"p-4 text-center text-gray-500",children:"Sin productos."})})]})]})})]})]})]}),i.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-2 gap-3 mb-4",children:[i.jsxs("div",{className:"border rounded-xl p-3 shadow-sm bg-gray-50",children:[i.jsx("div",{className:"text-xs text-gray-600",children:"Existencia global (maestras)"}),i.jsx("div",{className:"text-xl sm:text-2xl font-bold",children:ai(De.masterRemainingPackages)}),i.jsx("div",{className:"text-xs text-gray-500 mt-1",children:"remainingPackages (todas)"})]}),i.jsxs("div",{className:"border rounded-xl p-3 shadow-sm bg-gray-50",children:[i.jsx("div",{className:"text-xs text-gray-600",children:"Existencia global (vendedores)"}),i.jsx("div",{className:"text-xl sm:text-2xl font-bold",children:ai(De.vendorRemainingPackages)}),i.jsx("div",{className:"text-xs text-gray-500 mt-1",children:"remainingPackages (todas)"})]})]}),i.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-3 mb-4",children:[i.jsxs("div",{className:"border rounded-xl p-3 shadow-sm bg-gray-50",children:[i.jsx("div",{className:"text-xs text-gray-600",children:"Vendedores (comisin cash)"}),ue.cashArr.length===0?i.jsx("div",{className:"text-sm text-gray-500 mt-2",children:""}):i.jsx("div",{className:"mt-2 space-y-1 max-h-40 overflow-auto pr-1",children:ue.cashArr.map(P=>i.jsxs("div",{className:"flex justify-between text-sm",children:[i.jsx("span",{className:"truncate",children:P.name}),i.jsxs("strong",{className:"ml-2",children:["C$",Mr(P.total)]})]},P.vendorId))})]}),i.jsxs("div",{className:"border rounded-xl p-3 shadow-sm bg-gray-50",children:[i.jsx("div",{className:"text-xs text-gray-600",children:"Vendedores (comisin crdito)"}),ue.creditArr.length===0?i.jsx("div",{className:"text-sm text-gray-500 mt-2",children:""}):i.jsx("div",{className:"mt-2 space-y-1 max-h-40 overflow-auto pr-1",children:ue.creditArr.map(P=>i.jsxs("div",{className:"flex justify-between text-sm",children:[i.jsx("span",{className:"truncate",children:P.name}),i.jsxs("strong",{className:"ml-2",children:["C$",Mr(P.total)]})]},P.vendorId))})]})]}),i.jsxs("div",{className:"border rounded-2xl p-3 sm:p-4 mb-6 shadow-sm bg-white border-gray-100",children:[i.jsxs("h3",{className:"font-semibold mb-2 text-sm sm:text-base",children:["Saldos pendientes (hasta ",l,")"]}),i.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-3 gap-2 text-sm mb-3",children:[i.jsxs("div",{children:["Clientes con saldo: ",i.jsx("strong",{children:Mt.count})]}),i.jsxs("div",{children:["Saldo total pendiente:"," ",i.jsxs("strong",{children:["C$",Mr(Mt.totalPending)]})]}),i.jsx("div",{className:"text-gray-500",children:"*Muestra top 20 por monto"})]}),Mt.list.length===0?i.jsx("div",{className:"text-sm text-gray-500",children:""}):i.jsxs(i.Fragment,{children:[i.jsx("div",{className:"md:hidden space-y-2",children:Mt.list.map(P=>i.jsxs("div",{className:"border rounded-xl p-3",children:[i.jsxs("div",{className:"flex items-start justify-between gap-2",children:[i.jsx("div",{className:"font-semibold truncate",children:P.name}),i.jsxs("div",{className:"text-sm font-bold whitespace-nowrap",children:["C$",Mr(P.balance)]})]}),i.jsxs("div",{className:"text-xs text-gray-600 mt-1",children:["ltimo abono: ",i.jsxs("b",{children:["C$",Mr(P.lastPaymentAmount)]})]}),i.jsxs("div",{className:"text-xs text-gray-600",children:["Fecha ult. abono:"," ",i.jsx("span",{className:"font-medium",children:P.lastPayment||""})]}),i.jsx("div",{className:"mt-2",children:i.jsx("button",{type:"button",onClick:()=>Ye(P),className:"px-3 py-1 rounded bg-indigo-600 text-white text-xs hover:bg-indigo-700",children:"Ver"})})]},P.customerId))}),i.jsx("div",{className:"hidden md:block overflow-x-auto",children:i.jsxs("table",{className:"min-w-full border text-sm",children:[i.jsx("thead",{className:"bg-gray-100",children:i.jsxs("tr",{children:[i.jsx("th",{className:"border p-2 text-left",children:"Cliente"}),i.jsx("th",{className:"border p-2",children:"Saldo pendiente"}),i.jsx("th",{className:"border p-2",children:"ltimo abono"}),i.jsx("th",{className:"border p-2",children:"Fecha ult. abono"}),i.jsx("th",{className:"border p-2",children:"Ver"})]})}),i.jsx("tbody",{children:Mt.list.map(P=>i.jsxs("tr",{className:"text-center",children:[i.jsx("td",{className:"border p-2 text-left",children:P.name}),i.jsxs("td",{className:"border p-2",children:["C$",Mr(P.balance)]}),i.jsxs("td",{className:"border p-2",children:["C$",Mr(P.lastPaymentAmount)]}),i.jsx("td",{className:"border p-2",children:P.lastPayment||""}),i.jsx("td",{className:"border p-2",children:i.jsx("button",{type:"button",onClick:()=>Ye(P),className:"px-3 py-1 rounded bg-indigo-600 text-white text-xs hover:bg-indigo-700",children:"Ver"})})]},P.customerId))})]})})]})]}),i.jsxs("div",{className:"mb-3 flex flex-col sm:flex-row sm:items-center gap-2",children:[i.jsxs("h3",{className:"font-semibold text-sm sm:text-base",children:["Tabla principal (Agrupar por: ",E,")"]}),i.jsx("span",{className:"text-xs text-gray-500 sm:ml-auto",children:"Tap/Click en Ver detalle para drill-down"})]}),k?i.jsx("p",{className:"text-sm",children:"Cargando..."}):i.jsxs(i.Fragment,{children:[i.jsx("div",{className:"md:hidden space-y-2 mb-6",children:xt.length===0?i.jsx("div",{className:"border rounded-xl p-3 text-center text-gray-500",children:"Sin datos con los filtros seleccionados."}):xt.map(P=>i.jsxs("div",{className:"border rounded-2xl p-3 shadow-sm bg-white",children:[i.jsxs("div",{className:"flex items-start justify-between gap-2",children:[i.jsx("div",{className:"font-semibold truncate",children:P.label}),i.jsx("button",{className:"px-3 py-2 rounded-lg bg-gray-800 text-white text-sm font-semibold",onClick:()=>Oe(P.key),children:"Ver detalle"})]}),i.jsxs("div",{className:"grid grid-cols-2 gap-2 mt-3 text-sm",children:[i.jsxs("div",{className:"bg-gray-50 rounded-xl p-2",children:[i.jsx("div",{className:"text-xs text-gray-600",children:"Paquetes cash"}),i.jsx("div",{className:"font-bold",children:ai(P.packsCash)})]}),i.jsxs("div",{className:"bg-gray-50 rounded-xl p-2",children:[i.jsx("div",{className:"text-xs text-gray-600",children:"Paquetes crdito"}),i.jsx("div",{className:"font-bold",children:ai(P.packsCredit)})]}),i.jsxs("div",{className:"bg-gray-50 rounded-xl p-2",children:[i.jsx("div",{className:"text-xs text-gray-600",children:"Ventas cash"}),i.jsxs("div",{className:"font-bold",children:["C$",Mr(P.salesCash)]})]}),i.jsxs("div",{className:"bg-gray-50 rounded-xl p-2",children:[i.jsx("div",{className:"text-xs text-gray-600",children:"Ventas crdito"}),i.jsxs("div",{className:"font-bold",children:["C$",Mr(P.salesCredit)]})]}),i.jsxs("div",{className:"bg-gray-50 rounded-xl p-2",children:[i.jsx("div",{className:"text-xs text-gray-600",children:"Comisin cash"}),i.jsxs("div",{className:"font-bold",children:["C$",Mr(P.commCash)]})]}),i.jsxs("div",{className:"bg-gray-50 rounded-xl p-2",children:[i.jsx("div",{className:"text-xs text-gray-600",children:"Comisin crdito"}),i.jsxs("div",{className:"font-bold",children:["C$",Mr(P.commCredit)]})]})]})]},P.key))}),i.jsx("div",{className:"hidden md:block overflow-x-auto mb-6 shadow-2xl rounded-xl border",children:i.jsxs("table",{className:"min-w-full border text-sm",children:[i.jsx("thead",{className:"bg-gray-100",children:i.jsxs("tr",{children:[i.jsx("th",{className:"border p-2 text-left",children:E==="DIA"?"Da":E==="VENDEDOR"?"Vendedor":E==="PRODUCTO"?"Producto":"Sucursal"}),i.jsx("th",{className:"border p-2",children:"Paquetes cash"}),i.jsx("th",{className:"border p-2",children:"Paquetes crdito"}),i.jsx("th",{className:"border p-2",children:"Ventas cash"}),i.jsx("th",{className:"border p-2",children:"Ventas crdito"}),i.jsx("th",{className:"border p-2",children:"Comisin cash"}),i.jsx("th",{className:"border p-2",children:"Comisin crdito"}),i.jsx("th",{className:"border p-2",children:"Opciones"})]})}),i.jsxs("tbody",{children:[xt.map(P=>i.jsxs("tr",{className:"text-center",children:[i.jsx("td",{className:"border p-2 text-left",children:P.label}),i.jsx("td",{className:"border p-2",children:ai(P.packsCash)}),i.jsx("td",{className:"border p-2",children:ai(P.packsCredit)}),i.jsxs("td",{className:"border p-2",children:["C$",Mr(P.salesCash)]}),i.jsxs("td",{className:"border p-2",children:["C$",Mr(P.salesCredit)]}),i.jsxs("td",{className:"border p-2",children:["C$",Mr(P.commCash)]}),i.jsxs("td",{className:"border p-2",children:["C$",Mr(P.commCredit)]}),i.jsx("td",{className:"border p-2",children:i.jsx("button",{className:"text-xs bg-gray-800 text-white px-3 py-2 rounded-lg hover:bg-black",onClick:()=>Oe(P.key),children:"Ver detalle"})})]},P.key)),xt.length===0&&i.jsx("tr",{children:i.jsx("td",{colSpan:8,className:"p-4 text-center text-gray-500",children:"Sin datos con los filtros seleccionados."})})]})]})})]}),J&&i.jsxs("div",{className:"rounded-2xl shadow-lg p-3 sm:p-4 bg-white border-solid border-2 border-gray-100",children:[i.jsxs("div",{className:"flex flex-col sm:flex-row sm:items-center gap-2 mb-3",children:[i.jsxs("h2",{className:"text-base sm:text-xl font-semibold truncate",children:["Detalle "," ",((Ke=xt.find(P=>P.key===J))==null?void 0:Ke.label)||J]}),i.jsx("button",{onClick:()=>Oe(""),className:"w-full sm:w-auto text-sm px-3 py-2 border rounded-lg hover:bg-gray-50",children:"Cerrar"})]}),i.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-4 gap-2 text-sm mb-4",children:[i.jsxs("div",{className:"border rounded-xl p-3 bg-gray-50",children:["Total Ventas cash:"," ",i.jsxs("strong",{children:["C$",Mr(_t.filter(P=>P.type==="CONTADO").reduce((P,R)=>P+Tr(R.amount),0))]})]}),i.jsxs("div",{className:"border rounded-xl p-3 bg-gray-50",children:["Total Ventas crdito:"," ",i.jsxs("strong",{children:["C$",Mr(_t.filter(P=>P.type==="CREDITO").reduce((P,R)=>P+Tr(R.amount),0))]})]}),i.jsxs("div",{className:"border rounded-xl p-3 bg-gray-50",children:["Total paquetes cash:"," ",i.jsx("strong",{children:ai(_t.filter(P=>P.type==="CONTADO").reduce((P,R)=>P+Tr(R.packages),0))})]}),i.jsxs("div",{className:"border rounded-xl p-3 bg-gray-50",children:["Total paquetes crdito:"," ",i.jsx("strong",{children:ai(_t.filter(P=>P.type==="CREDITO").reduce((P,R)=>P+Tr(R.packages),0))})]})]}),i.jsx("h3",{className:"font-semibold mb-2 text-sm sm:text-base",children:"Ventas incluidas"}),i.jsx("div",{className:"md:hidden space-y-2 mb-4",children:_t.length===0?i.jsx("div",{className:"border rounded-xl p-3 text-center text-gray-500",children:"Sin detalle."}):_t.map(P=>i.jsxs("div",{className:"border rounded-2xl p-3",children:[i.jsxs("div",{className:"flex items-start justify-between gap-2",children:[i.jsx("div",{className:"font-semibold truncate",children:P.productName}),i.jsxs("div",{className:"text-sm font-bold whitespace-nowrap",children:["C$",Mr(P.amount)]})]}),i.jsxs("div",{className:"text-xs text-gray-600 mt-1",children:["Vendedor:"," ",i.jsx("span",{className:"font-medium",children:P.vendorName})]}),i.jsxs("div",{className:"grid grid-cols-2 gap-2 mt-3 text-sm",children:[i.jsxs("div",{className:"bg-gray-50 rounded-xl p-2",children:[i.jsx("div",{className:"text-xs text-gray-600",children:"Tipo"}),i.jsx("div",{className:"font-bold",children:P.type==="CREDITO"?"Crdito":"Cash"})]}),i.jsxs("div",{className:"bg-gray-50 rounded-xl p-2",children:[i.jsx("div",{className:"text-xs text-gray-600",children:"Sucursal"}),i.jsx("div",{className:"font-bold",children:P.branch||""})]}),i.jsxs("div",{className:"bg-gray-50 rounded-xl p-2",children:[i.jsx("div",{className:"text-xs text-gray-600",children:"Paquetes"}),i.jsx("div",{className:"font-bold",children:ai(P.packages)})]}),i.jsxs("div",{className:"bg-gray-50 rounded-xl p-2",children:[i.jsx("div",{className:"text-xs text-gray-600",children:"Comisin"}),i.jsxs("div",{className:"font-bold",children:["C$",Mr(P.commission)]})]})]}),i.jsxs("div",{className:"text-xs text-gray-500 mt-2",children:["Fecha: ",P.date]})]},P.id))}),i.jsx("div",{className:"hidden md:block overflow-x-auto mb-4",children:i.jsxs("table",{className:"min-w-full border text-sm",children:[i.jsx("thead",{className:"bg-gray-100",children:i.jsxs("tr",{children:[i.jsx("th",{className:"border p-2",children:"Vendedor"}),i.jsx("th",{className:"border p-2",children:"Producto"}),i.jsx("th",{className:"border p-2",children:"Tipo"}),i.jsx("th",{className:"border p-2",children:"Sucursal"}),i.jsx("th",{className:"border p-2",children:"Paquetes"}),i.jsx("th",{className:"border p-2",children:"Monto"}),i.jsx("th",{className:"border p-2",children:"Comisin"}),i.jsx("th",{className:"border p-2",children:"Fecha venta"})]})}),i.jsxs("tbody",{children:[_t.map(P=>i.jsxs("tr",{className:"text-center",children:[i.jsx("td",{className:"border p-2",children:P.vendorName}),i.jsx("td",{className:"border p-2",children:P.productName}),i.jsx("td",{className:"border p-2",children:P.type==="CREDITO"?"Crdito":"Cash"}),i.jsx("td",{className:"border p-2",children:P.branch||""}),i.jsx("td",{className:"border p-2",children:ai(P.packages)}),i.jsxs("td",{className:"border p-2",children:["C$",Mr(P.amount)]}),i.jsxs("td",{className:"border p-2",children:["C$",Mr(P.commission)]}),i.jsx("td",{className:"border p-2",children:P.date})]},P.id)),_t.length===0&&i.jsx("tr",{children:i.jsx("td",{colSpan:8,className:"p-4 text-center text-gray-500",children:"Sin detalle."})})]})]})}),i.jsx("h3",{className:"font-semibold mb-2 text-sm sm:text-base",children:"Consolidado por producto"}),i.jsx("div",{className:"md:hidden space-y-2",children:Et.length===0?i.jsx("div",{className:"border rounded-xl p-3 text-center text-gray-500",children:"Sin consolidado."}):Et.map(P=>i.jsxs("div",{className:"border rounded-2xl p-3",children:[i.jsx("div",{className:"font-semibold",children:P.productName}),i.jsxs("div",{className:"grid grid-cols-2 gap-2 mt-3 text-sm",children:[i.jsxs("div",{className:"bg-gray-50 rounded-xl p-2",children:[i.jsx("div",{className:"text-xs text-gray-600",children:"Paq cash"}),i.jsx("div",{className:"font-bold",children:ai(P.packsCash)})]}),i.jsxs("div",{className:"bg-gray-50 rounded-xl p-2",children:[i.jsx("div",{className:"text-xs text-gray-600",children:"Paq crdito"}),i.jsx("div",{className:"font-bold",children:ai(P.packsCredit)})]}),i.jsxs("div",{className:"bg-gray-50 rounded-xl p-2",children:[i.jsx("div",{className:"text-xs text-gray-600",children:"Ventas cash"}),i.jsxs("div",{className:"font-bold",children:["C$",Mr(P.salesCash)]})]}),i.jsxs("div",{className:"bg-gray-50 rounded-xl p-2",children:[i.jsx("div",{className:"text-xs text-gray-600",children:"Ventas crdito"}),i.jsxs("div",{className:"font-bold",children:["C$",Mr(P.salesCredit)]})]}),i.jsxs("div",{className:"bg-gray-50 rounded-xl p-2",children:[i.jsx("div",{className:"text-xs text-gray-600",children:"Com cash"}),i.jsxs("div",{className:"font-bold",children:["C$",Mr(P.commCash)]})]}),i.jsxs("div",{className:"bg-gray-50 rounded-xl p-2",children:[i.jsx("div",{className:"text-xs text-gray-600",children:"Com crdito"}),i.jsxs("div",{className:"font-bold",children:["C$",Mr(P.commCredit)]})]})]})]},P.productName))}),i.jsx("div",{className:"hidden md:block overflow-x-auto",children:i.jsxs("table",{className:"min-w-full border text-sm",children:[i.jsx("thead",{className:"bg-gray-100",children:i.jsxs("tr",{children:[i.jsx("th",{className:"border p-2",children:"Producto"}),i.jsx("th",{className:"border p-2",children:"Total paquetes cash"}),i.jsx("th",{className:"border p-2",children:"Total paquetes crdito"}),i.jsx("th",{className:"border p-2",children:"Ventas cash"}),i.jsx("th",{className:"border p-2",children:"Ventas crdito"}),i.jsx("th",{className:"border p-2",children:"Comisin cash"}),i.jsx("th",{className:"border p-2",children:"Comisin crdito"})]})}),i.jsxs("tbody",{children:[Et.map(P=>i.jsxs("tr",{className:"text-center",children:[i.jsx("td",{className:"border p-2 text-left",children:P.productName}),i.jsx("td",{className:"border p-2",children:ai(P.packsCash)}),i.jsx("td",{className:"border p-2",children:ai(P.packsCredit)}),i.jsxs("td",{className:"border p-2",children:["C$",Mr(P.salesCash)]}),i.jsxs("td",{className:"border p-2",children:["C$",Mr(P.salesCredit)]}),i.jsxs("td",{className:"border p-2",children:["C$",Mr(P.commCash)]}),i.jsxs("td",{className:"border p-2",children:["C$",Mr(P.commCredit)]})]},P.productName)),Et.length===0&&i.jsx("tr",{children:i.jsx("td",{colSpan:7,className:"p-4 text-center text-gray-500",children:"Sin consolidado."})})]})]})})]})]})]}),D&&i.jsx("p",{className:"mt-3 text-sm",children:D})]}),Ue&&i.jsx("div",{className:"fixed inset-0 bg-black/40 flex items-center justify-center p-4 z-50",children:i.jsxs("div",{className:"bg-white rounded-2xl shadow-xl w-full max-w-3xl p-4",children:[i.jsxs("div",{className:"flex items-center justify-between mb-3",children:[i.jsxs("div",{children:[i.jsx("h4",{className:"font-semibold text-lg",children:Ue.name}),i.jsxs("div",{className:"text-xs text-gray-600",children:["Saldo pendiente: ",i.jsxs("b",{children:["C$",Mr(Ue.balance)]})]})]}),i.jsx("button",{type:"button",onClick:()=>Ye(null),className:"text-sm text-gray-500 hover:text-gray-700",children:""})]}),i.jsx("div",{className:"overflow-x-auto",children:i.jsxs("table",{className:"min-w-full border text-sm",children:[i.jsx("thead",{className:"bg-gray-100",children:i.jsxs("tr",{children:[i.jsx("th",{className:"border p-2",children:"Fecha"}),i.jsx("th",{className:"border p-2",children:"Tipo"}),i.jsx("th",{className:"border p-2",children:"Monto"}),i.jsx("th",{className:"border p-2",children:"Saldo"})]})}),i.jsx("tbody",{children:nt.length===0?i.jsx("tr",{children:i.jsx("td",{colSpan:4,className:"border p-2 text-center text-gray-500",children:"Sin movimientos."})}):nt.map(P=>i.jsxs("tr",{className:"text-center",children:[i.jsx("td",{className:"border p-1",children:P.date||""}),i.jsx("td",{className:"border p-1",children:P.type||""}),i.jsxs("td",{className:"border p-1",children:["C$",Mr(P.amount)]}),i.jsxs("td",{className:"border p-1",children:["C$",Mr(P.running)]})]},P.id))})]})}),i.jsx("div",{className:"mt-4 overflow-x-auto",children:i.jsxs("table",{className:"min-w-full border text-sm",children:[i.jsx("thead",{className:"bg-gray-100",children:i.jsxs("tr",{children:[i.jsx("th",{className:"border p-2",children:"Fecha"}),i.jsx("th",{className:"border p-2",children:"Producto"}),i.jsx("th",{className:"border p-2",children:"Vendedor"}),i.jsx("th",{className:"border p-2",children:"Tipo"}),i.jsx("th",{className:"border p-2",children:"Monto"})]})}),i.jsx("tbody",{children:Ee.length===0?i.jsx("tr",{children:i.jsx("td",{colSpan:5,className:"border p-2 text-center text-gray-500",children:"Sin ventas asociadas."})}):Ee.map(P=>i.jsxs("tr",{className:"text-center",children:[i.jsx("td",{className:"border p-1",children:P.date||""}),i.jsx("td",{className:"border p-1",children:P.productName||""}),i.jsx("td",{className:"border p-1",children:P.vendorName||""}),i.jsx("td",{className:"border p-1",children:P.type||""}),i.jsxs("td",{className:"border p-1",children:["C$",Mr(P.amount)]})]},P.id))})]})})]})})]}):i.jsxs("div",{className:"max-w-5xl mx-auto p-3 sm:p-4 md:p-6 bg-white rounded-2xl shadow-2xl",children:[i.jsx("h2",{className:"text-lg md:text-xl font-bold",children:"Data Center - Dulces"}),i.jsx("p",{className:"text-sm text-gray-600 mt-2",children:"No autorizado."})]})}function Mse(t){var e,r,n="";if(typeof t=="string"||typeof t=="number")n+=t;else if(typeof t=="object")if(Array.isArray(t)){var a=t.length;for(e=0;e<a;e++)t[e]&&(r=Mse(t[e]))&&(n&&(n+=" "),n+=r)}else for(r in t)t[r]&&(n&&(n+=" "),n+=r);return n}function ns(){for(var t,e,r=0,n="",a=arguments.length;r<a;r++)(t=arguments[r])&&(e=Mse(t))&&(n&&(n+=" "),n+=e);return n}var xVe=["dangerouslySetInnerHTML","onCopy","onCopyCapture","onCut","onCutCapture","onPaste","onPasteCapture","onCompositionEnd","onCompositionEndCapture","onCompositionStart","onCompositionStartCapture","onCompositionUpdate","onCompositionUpdateCapture","onFocus","onFocusCapture","onBlur","onBlurCapture","onChange","onChangeCapture","onBeforeInput","onBeforeInputCapture","onInput","onInputCapture","onReset","onResetCapture","onSubmit","onSubmitCapture","onInvalid","onInvalidCapture","onLoad","onLoadCapture","onError","onErrorCapture","onKeyDown","onKeyDownCapture","onKeyPress","onKeyPressCapture","onKeyUp","onKeyUpCapture","onAbort","onAbortCapture","onCanPlay","onCanPlayCapture","onCanPlayThrough","onCanPlayThroughCapture","onDurationChange","onDurationChangeCapture","onEmptied","onEmptiedCapture","onEncrypted","onEncryptedCapture","onEnded","onEndedCapture","onLoadedData","onLoadedDataCapture","onLoadedMetadata","onLoadedMetadataCapture","onLoadStart","onLoadStartCapture","onPause","onPauseCapture","onPlay","onPlayCapture","onPlaying","onPlayingCapture","onProgress","onProgressCapture","onRateChange","onRateChangeCapture","onSeeked","onSeekedCapture","onSeeking","onSeekingCapture","onStalled","onStalledCapture","onSuspend","onSuspendCapture","onTimeUpdate","onTimeUpdateCapture","onVolumeChange","onVolumeChangeCapture","onWaiting","onWaitingCapture","onAuxClick","onAuxClickCapture","onClick","onClickCapture","onContextMenu","onContextMenuCapture","onDoubleClick","onDoubleClickCapture","onDrag","onDragCapture","onDragEnd","onDragEndCapture","onDragEnter","onDragEnterCapture","onDragExit","onDragExitCapture","onDragLeave","onDragLeaveCapture","onDragOver","onDragOverCapture","onDragStart","onDragStartCapture","onDrop","onDropCapture","onMouseDown","onMouseDownCapture","onMouseEnter","onMouseLeave","onMouseMove","onMouseMoveCapture","onMouseOut","onMouseOutCapture","onMouseOver","onMouseOverCapture","onMouseUp","onMouseUpCapture","onSelect","onSelectCapture","onTouchCancel","onTouchCancelCapture","onTouchEnd","onTouchEndCapture","onTouchMove","onTouchMoveCapture","onTouchStart","onTouchStartCapture","onPointerDown","onPointerDownCapture","onPointerMove","onPointerMoveCapture","onPointerUp","onPointerUpCapture","onPointerCancel","onPointerCancelCapture","onPointerEnter","onPointerEnterCapture","onPointerLeave","onPointerLeaveCapture","onPointerOver","onPointerOverCapture","onPointerOut","onPointerOutCapture","onGotPointerCapture","onGotPointerCaptureCapture","onLostPointerCapture","onLostPointerCaptureCapture","onScroll","onScrollCapture","onWheel","onWheelCapture","onAnimationStart","onAnimationStartCapture","onAnimationEnd","onAnimationEndCapture","onAnimationIteration","onAnimationIterationCapture","onTransitionEnd","onTransitionEndCapture"];function QR(t){if(typeof t!="string")return!1;var e=xVe;return e.includes(t)}var vVe=["aria-activedescendant","aria-atomic","aria-autocomplete","aria-busy","aria-checked","aria-colcount","aria-colindex","aria-colspan","aria-controls","aria-current","aria-describedby","aria-details","aria-disabled","aria-errormessage","aria-expanded","aria-flowto","aria-haspopup","aria-hidden","aria-invalid","aria-keyshortcuts","aria-label","aria-labelledby","aria-level","aria-live","aria-modal","aria-multiline","aria-multiselectable","aria-orientation","aria-owns","aria-placeholder","aria-posinset","aria-pressed","aria-readonly","aria-relevant","aria-required","aria-roledescription","aria-rowcount","aria-rowindex","aria-rowspan","aria-selected","aria-setsize","aria-sort","aria-valuemax","aria-valuemin","aria-valuenow","aria-valuetext","className","color","height","id","lang","max","media","method","min","name","style","target","width","role","tabIndex","accentHeight","accumulate","additive","alignmentBaseline","allowReorder","alphabetic","amplitude","arabicForm","ascent","attributeName","attributeType","autoReverse","azimuth","baseFrequency","baselineShift","baseProfile","bbox","begin","bias","by","calcMode","capHeight","clip","clipPath","clipPathUnits","clipRule","colorInterpolation","colorInterpolationFilters","colorProfile","colorRendering","contentScriptType","contentStyleType","cursor","cx","cy","d","decelerate","descent","diffuseConstant","direction","display","divisor","dominantBaseline","dur","dx","dy","edgeMode","elevation","enableBackground","end","exponent","externalResourcesRequired","fill","fillOpacity","fillRule","filter","filterRes","filterUnits","floodColor","floodOpacity","focusable","fontFamily","fontSize","fontSizeAdjust","fontStretch","fontStyle","fontVariant","fontWeight","format","from","fx","fy","g1","g2","glyphName","glyphOrientationHorizontal","glyphOrientationVertical","glyphRef","gradientTransform","gradientUnits","hanging","horizAdvX","horizOriginX","href","ideographic","imageRendering","in2","in","intercept","k1","k2","k3","k4","k","kernelMatrix","kernelUnitLength","kerning","keyPoints","keySplines","keyTimes","lengthAdjust","letterSpacing","lightingColor","limitingConeAngle","local","markerEnd","markerHeight","markerMid","markerStart","markerUnits","markerWidth","mask","maskContentUnits","maskUnits","mathematical","mode","numOctaves","offset","opacity","operator","order","orient","orientation","origin","overflow","overlinePosition","overlineThickness","paintOrder","panose1","pathLength","patternContentUnits","patternTransform","patternUnits","pointerEvents","pointsAtX","pointsAtY","pointsAtZ","preserveAlpha","preserveAspectRatio","primitiveUnits","r","radius","refX","refY","renderingIntent","repeatCount","repeatDur","requiredExtensions","requiredFeatures","restart","result","rotate","rx","ry","seed","shapeRendering","slope","spacing","specularConstant","specularExponent","speed","spreadMethod","startOffset","stdDeviation","stemh","stemv","stitchTiles","stopColor","stopOpacity","strikethroughPosition","strikethroughThickness","string","stroke","strokeDasharray","strokeDashoffset","strokeLinecap","strokeLinejoin","strokeMiterlimit","strokeOpacity","strokeWidth","surfaceScale","systemLanguage","tableValues","targetX","targetY","textAnchor","textDecoration","textLength","textRendering","to","transform","u1","u2","underlinePosition","underlineThickness","unicode","unicodeBidi","unicodeRange","unitsPerEm","vAlphabetic","values","vectorEffect","version","vertAdvY","vertOriginX","vertOriginY","vHanging","vIdeographic","viewTarget","visibility","vMathematical","widths","wordSpacing","writingMode","x1","x2","x","xChannelSelector","xHeight","xlinkActuate","xlinkArcrole","xlinkHref","xlinkRole","xlinkShow","xlinkTitle","xlinkType","xmlBase","xmlLang","xmlns","xmlnsXlink","xmlSpace","y1","y2","y","yChannelSelector","z","zoomAndPan","ref","key","angle"],yVe=new Set(vVe);function Lse(t){return typeof t!="string"?!1:yVe.has(t)}function Use(t){return typeof t=="string"&&t.startsWith("data-")}function lh(t){if(typeof t!="object"||t===null)return{};var e={};for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&(Lse(r)||Use(r))&&(e[r]=t[r]);return e}function z2(t){if(t==null)return null;if(g.isValidElement(t)&&typeof t.props=="object"&&t.props!==null){var e=t.props;return lh(e)}return typeof t=="object"&&!Array.isArray(t)?lh(t):null}function Dd(t){var e={};for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&(Lse(r)||Use(r)||QR(r))&&(e[r]=t[r]);return e}var bVe=["children","width","height","viewBox","className","style","title","desc"];function bF(){return bF=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var r=arguments[e];for(var n in r)({}).hasOwnProperty.call(r,n)&&(t[n]=r[n])}return t},bF.apply(null,arguments)}function wVe(t,e){if(t==null)return{};var r,n,a=NVe(t,e);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(t);for(n=0;n<s.length;n++)r=s[n],e.indexOf(r)===-1&&{}.propertyIsEnumerable.call(t,r)&&(a[r]=t[r])}return a}function NVe(t,e){if(t==null)return{};var r={};for(var n in t)if({}.hasOwnProperty.call(t,n)){if(e.indexOf(n)!==-1)continue;r[n]=t[n]}return r}var VR=g.forwardRef((t,e)=>{var{children:r,width:n,height:a,viewBox:s,className:o,style:l,title:c,desc:u}=t,d=wVe(t,bVe),f=s||{width:n,height:a,x:0,y:0},A=ns("recharts-surface",o);return g.createElement("svg",bF({},Dd(d),{className:A,width:n,height:a,style:l,viewBox:"".concat(f.x," ").concat(f.y," ").concat(f.width," ").concat(f.height),ref:e}),g.createElement("title",null,c),g.createElement("desc",null,u),r)}),CVe=["children","className"];function wF(){return wF=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var r=arguments[e];for(var n in r)({}).hasOwnProperty.call(r,n)&&(t[n]=r[n])}return t},wF.apply(null,arguments)}function _Ve(t,e){if(t==null)return{};var r,n,a=EVe(t,e);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(t);for(n=0;n<s.length;n++)r=s[n],e.indexOf(r)===-1&&{}.propertyIsEnumerable.call(t,r)&&(a[r]=t[r])}return a}function EVe(t,e){if(t==null)return{};var r={};for(var n in t)if({}.hasOwnProperty.call(t,n)){if(e.indexOf(n)!==-1)continue;r[n]=t[n]}return r}var Pc=g.forwardRef((t,e)=>{var{children:r,className:n}=t,a=_Ve(t,CVe),s=ns("recharts-layer",n);return g.createElement("g",wF({className:s},Dd(a),{ref:e}),r)}),Qse=g.createContext(null),SVe=()=>g.useContext(Qse);function vs(t){return function(){return t}}const Vse=Math.cos,iI=Math.sin,Pf=Math.sqrt,oI=Math.PI,yP=2*oI,NF=Math.PI,CF=2*NF,up=1e-6,IVe=CF-up;function Hse(t){this._+=t[0];for(let e=1,r=t.length;e<r;++e)this._+=arguments[e]+t[e]}function jVe(t){let e=Math.floor(t);if(!(e>=0))throw new Error(`invalid digits: ${t}`);if(e>15)return Hse;const r=10**e;return function(n){this._+=n[0];for(let a=1,s=n.length;a<s;++a)this._+=Math.round(arguments[a]*r)/r+n[a]}}class PVe{constructor(e){this._x0=this._y0=this._x1=this._y1=null,this._="",this._append=e==null?Hse:jVe(e)}moveTo(e,r){this._append`M${this._x0=this._x1=+e},${this._y0=this._y1=+r}`}closePath(){this._x1!==null&&(this._x1=this._x0,this._y1=this._y0,this._append`Z`)}lineTo(e,r){this._append`L${this._x1=+e},${this._y1=+r}`}quadraticCurveTo(e,r,n,a){this._append`Q${+e},${+r},${this._x1=+n},${this._y1=+a}`}bezierCurveTo(e,r,n,a,s,o){this._append`C${+e},${+r},${+n},${+a},${this._x1=+s},${this._y1=+o}`}arcTo(e,r,n,a,s){if(e=+e,r=+r,n=+n,a=+a,s=+s,s<0)throw new Error(`negative radius: ${s}`);let o=this._x1,l=this._y1,c=n-e,u=a-r,d=o-e,f=l-r,A=d*d+f*f;if(this._x1===null)this._append`M${this._x1=e},${this._y1=r}`;else if(A>up)if(!(Math.abs(f*c-u*d)>up)||!s)this._append`L${this._x1=e},${this._y1=r}`;else{let h=n-o,m=a-l,p=c*c+u*u,x=h*h+m*m,v=Math.sqrt(p),y=Math.sqrt(A),b=s*Math.tan((NF-Math.acos((p+A-x)/(2*v*y)))/2),w=b/y,j=b/v;Math.abs(w-1)>up&&this._append`L${e+w*d},${r+w*f}`,this._append`A${s},${s},0,0,${+(f*h>d*m)},${this._x1=e+j*c},${this._y1=r+j*u}`}}arc(e,r,n,a,s,o){if(e=+e,r=+r,n=+n,o=!!o,n<0)throw new Error(`negative radius: ${n}`);let l=n*Math.cos(a),c=n*Math.sin(a),u=e+l,d=r+c,f=1^o,A=o?a-s:s-a;this._x1===null?this._append`M${u},${d}`:(Math.abs(this._x1-u)>up||Math.abs(this._y1-d)>up)&&this._append`L${u},${d}`,n&&(A<0&&(A=A%CF+CF),A>IVe?this._append`A${n},${n},0,1,${f},${e-l},${r-c}A${n},${n},0,1,${f},${this._x1=u},${this._y1=d}`:A>up&&this._append`A${n},${n},0,${+(A>=NF)},${f},${this._x1=e+n*Math.cos(s)},${this._y1=r+n*Math.sin(s)}`)}rect(e,r,n,a){this._append`M${this._x0=this._x1=+e},${this._y0=this._y1=+r}h${n=+n}v${+a}h${-n}Z`}toString(){return this._}}function HR(t){let e=3;return t.digits=function(r){if(!arguments.length)return e;if(r==null)e=null;else{const n=Math.floor(r);if(!(n>=0))throw new RangeError(`invalid digits: ${r}`);e=n}return t},()=>new PVe(e)}function $R(t){return typeof t=="object"&&"length"in t?t:Array.from(t)}function $se(t){this._context=t}$se.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._point=0},lineEnd:function(){(this._line||this._line!==0&&this._point===1)&&this._context.closePath(),this._line=1-this._line},point:function(t,e){switch(t=+t,e=+e,this._point){case 0:this._point=1,this._line?this._context.lineTo(t,e):this._context.moveTo(t,e);break;case 1:this._point=2;default:this._context.lineTo(t,e);break}}};function bP(t){return new $se(t)}function Gse(t){return t[0]}function Kse(t){return t[1]}function qse(t,e){var r=vs(!0),n=null,a=bP,s=null,o=HR(l);t=typeof t=="function"?t:t===void 0?Gse:vs(t),e=typeof e=="function"?e:e===void 0?Kse:vs(e);function l(c){var u,d=(c=$R(c)).length,f,A=!1,h;for(n==null&&(s=a(h=o())),u=0;u<=d;++u)!(u<d&&r(f=c[u],u,c))===A&&((A=!A)?s.lineStart():s.lineEnd()),A&&s.point(+t(f,u,c),+e(f,u,c));if(h)return s=null,h+""||null}return l.x=function(c){return arguments.length?(t=typeof c=="function"?c:vs(+c),l):t},l.y=function(c){return arguments.length?(e=typeof c=="function"?c:vs(+c),l):e},l.defined=function(c){return arguments.length?(r=typeof c=="function"?c:vs(!!c),l):r},l.curve=function(c){return arguments.length?(a=c,n!=null&&(s=a(n)),l):a},l.context=function(c){return arguments.length?(c==null?n=s=null:s=a(n=c),l):n},l}function m_(t,e,r){var n=null,a=vs(!0),s=null,o=bP,l=null,c=HR(u);t=typeof t=="function"?t:t===void 0?Gse:vs(+t),e=typeof e=="function"?e:vs(e===void 0?0:+e),r=typeof r=="function"?r:r===void 0?Kse:vs(+r);function u(f){var A,h,m,p=(f=$R(f)).length,x,v=!1,y,b=new Array(p),w=new Array(p);for(s==null&&(l=o(y=c())),A=0;A<=p;++A){if(!(A<p&&a(x=f[A],A,f))===v)if(v=!v)h=A,l.areaStart(),l.lineStart();else{for(l.lineEnd(),l.lineStart(),m=A-1;m>=h;--m)l.point(b[m],w[m]);l.lineEnd(),l.areaEnd()}v&&(b[A]=+t(x,A,f),w[A]=+e(x,A,f),l.point(n?+n(x,A,f):b[A],r?+r(x,A,f):w[A]))}if(y)return l=null,y+""||null}function d(){return qse().defined(a).curve(o).context(s)}return u.x=function(f){return arguments.length?(t=typeof f=="function"?f:vs(+f),n=null,u):t},u.x0=function(f){return arguments.length?(t=typeof f=="function"?f:vs(+f),u):t},u.x1=function(f){return arguments.length?(n=f==null?null:typeof f=="function"?f:vs(+f),u):n},u.y=function(f){return arguments.length?(e=typeof f=="function"?f:vs(+f),r=null,u):e},u.y0=function(f){return arguments.length?(e=typeof f=="function"?f:vs(+f),u):e},u.y1=function(f){return arguments.length?(r=f==null?null:typeof f=="function"?f:vs(+f),u):r},u.lineX0=u.lineY0=function(){return d().x(t).y(e)},u.lineY1=function(){return d().x(t).y(r)},u.lineX1=function(){return d().x(n).y(e)},u.defined=function(f){return arguments.length?(a=typeof f=="function"?f:vs(!!f),u):a},u.curve=function(f){return arguments.length?(o=f,s!=null&&(l=o(s)),u):o},u.context=function(f){return arguments.length?(f==null?s=l=null:l=o(s=f),u):s},u}class zse{constructor(e,r){this._context=e,this._x=r}areaStart(){this._line=0}areaEnd(){this._line=NaN}lineStart(){this._point=0}lineEnd(){(this._line||this._line!==0&&this._point===1)&&this._context.closePath(),this._line=1-this._line}point(e,r){switch(e=+e,r=+r,this._point){case 0:{this._point=1,this._line?this._context.lineTo(e,r):this._context.moveTo(e,r);break}case 1:this._point=2;default:{this._x?this._context.bezierCurveTo(this._x0=(this._x0+e)/2,this._y0,this._x0,r,e,r):this._context.bezierCurveTo(this._x0,this._y0=(this._y0+r)/2,e,this._y0,e,r);break}}this._x0=e,this._y0=r}}function BVe(t){return new zse(t,!0)}function TVe(t){return new zse(t,!1)}const GR={draw(t,e){const r=Pf(e/oI);t.moveTo(r,0),t.arc(0,0,r,0,yP)}},kVe={draw(t,e){const r=Pf(e/5)/2;t.moveTo(-3*r,-r),t.lineTo(-r,-r),t.lineTo(-r,-3*r),t.lineTo(r,-3*r),t.lineTo(r,-r),t.lineTo(3*r,-r),t.lineTo(3*r,r),t.lineTo(r,r),t.lineTo(r,3*r),t.lineTo(-r,3*r),t.lineTo(-r,r),t.lineTo(-3*r,r),t.closePath()}},Wse=Pf(1/3),FVe=Wse*2,OVe={draw(t,e){const r=Pf(e/FVe),n=r*Wse;t.moveTo(0,-r),t.lineTo(n,0),t.lineTo(0,r),t.lineTo(-n,0),t.closePath()}},DVe={draw(t,e){const r=Pf(e),n=-r/2;t.rect(n,n,r,r)}},RVe=.8908130915292852,Xse=iI(oI/10)/iI(7*oI/10),MVe=iI(yP/10)*Xse,LVe=-Vse(yP/10)*Xse,UVe={draw(t,e){const r=Pf(e*RVe),n=MVe*r,a=LVe*r;t.moveTo(0,-r),t.lineTo(n,a);for(let s=1;s<5;++s){const o=yP*s/5,l=Vse(o),c=iI(o);t.lineTo(c*r,-l*r),t.lineTo(l*n-c*a,c*n+l*a)}t.closePath()}},cB=Pf(3),QVe={draw(t,e){const r=-Pf(e/(cB*3));t.moveTo(0,r*2),t.lineTo(-cB*r,-r),t.lineTo(cB*r,-r),t.closePath()}},id=-.5,od=Pf(3)/2,_F=1/Pf(12),VVe=(_F/2+1)*3,HVe={draw(t,e){const r=Pf(e/VVe),n=r/2,a=r*_F,s=n,o=r*_F+r,l=-s,c=o;t.moveTo(n,a),t.lineTo(s,o),t.lineTo(l,c),t.lineTo(id*n-od*a,od*n+id*a),t.lineTo(id*s-od*o,od*s+id*o),t.lineTo(id*l-od*c,od*l+id*c),t.lineTo(id*n+od*a,id*a-od*n),t.lineTo(id*s+od*o,id*o-od*s),t.lineTo(id*l+od*c,id*c-od*l),t.closePath()}};function $Ve(t,e){let r=null,n=HR(a);t=typeof t=="function"?t:vs(t||GR),e=typeof e=="function"?e:vs(e===void 0?64:+e);function a(){let s;if(r||(r=s=n()),t.apply(this,arguments).draw(r,+e.apply(this,arguments)),s)return r=null,s+""||null}return a.type=function(s){return arguments.length?(t=typeof s=="function"?s:vs(s),a):t},a.size=function(s){return arguments.length?(e=typeof s=="function"?s:vs(+s),a):e},a.context=function(s){return arguments.length?(r=s??null,a):r},a}function lI(){}function cI(t,e,r){t._context.bezierCurveTo((2*t._x0+t._x1)/3,(2*t._y0+t._y1)/3,(t._x0+2*t._x1)/3,(t._y0+2*t._y1)/3,(t._x0+4*t._x1+e)/6,(t._y0+4*t._y1+r)/6)}function Yse(t){this._context=t}Yse.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._y0=this._y1=NaN,this._point=0},lineEnd:function(){switch(this._point){case 3:cI(this,this._x1,this._y1);case 2:this._context.lineTo(this._x1,this._y1);break}(this._line||this._line!==0&&this._point===1)&&this._context.closePath(),this._line=1-this._line},point:function(t,e){switch(t=+t,e=+e,this._point){case 0:this._point=1,this._line?this._context.lineTo(t,e):this._context.moveTo(t,e);break;case 1:this._point=2;break;case 2:this._point=3,this._context.lineTo((5*this._x0+this._x1)/6,(5*this._y0+this._y1)/6);default:cI(this,t,e);break}this._x0=this._x1,this._x1=t,this._y0=this._y1,this._y1=e}};function GVe(t){return new Yse(t)}function Jse(t){this._context=t}Jse.prototype={areaStart:lI,areaEnd:lI,lineStart:function(){this._x0=this._x1=this._x2=this._x3=this._x4=this._y0=this._y1=this._y2=this._y3=this._y4=NaN,this._point=0},lineEnd:function(){switch(this._point){case 1:{this._context.moveTo(this._x2,this._y2),this._context.closePath();break}case 2:{this._context.moveTo((this._x2+2*this._x3)/3,(this._y2+2*this._y3)/3),this._context.lineTo((this._x3+2*this._x2)/3,(this._y3+2*this._y2)/3),this._context.closePath();break}case 3:{this.point(this._x2,this._y2),this.point(this._x3,this._y3),this.point(this._x4,this._y4);break}}},point:function(t,e){switch(t=+t,e=+e,this._point){case 0:this._point=1,this._x2=t,this._y2=e;break;case 1:this._point=2,this._x3=t,this._y3=e;break;case 2:this._point=3,this._x4=t,this._y4=e,this._context.moveTo((this._x0+4*this._x1+t)/6,(this._y0+4*this._y1+e)/6);break;default:cI(this,t,e);break}this._x0=this._x1,this._x1=t,this._y0=this._y1,this._y1=e}};function KVe(t){return new Jse(t)}function Zse(t){this._context=t}Zse.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._y0=this._y1=NaN,this._point=0},lineEnd:function(){(this._line||this._line!==0&&this._point===3)&&this._context.closePath(),this._line=1-this._line},point:function(t,e){switch(t=+t,e=+e,this._point){case 0:this._point=1;break;case 1:this._point=2;break;case 2:this._point=3;var r=(this._x0+4*this._x1+t)/6,n=(this._y0+4*this._y1+e)/6;this._line?this._context.lineTo(r,n):this._context.moveTo(r,n);break;case 3:this._point=4;default:cI(this,t,e);break}this._x0=this._x1,this._x1=t,this._y0=this._y1,this._y1=e}};function qVe(t){return new Zse(t)}function eie(t){this._context=t}eie.prototype={areaStart:lI,areaEnd:lI,lineStart:function(){this._point=0},lineEnd:function(){this._point&&this._context.closePath()},point:function(t,e){t=+t,e=+e,this._point?this._context.lineTo(t,e):(this._point=1,this._context.moveTo(t,e))}};function zVe(t){return new eie(t)}function CG(t){return t<0?-1:1}function _G(t,e,r){var n=t._x1-t._x0,a=e-t._x1,s=(t._y1-t._y0)/(n||a<0&&-0),o=(r-t._y1)/(a||n<0&&-0),l=(s*a+o*n)/(n+a);return(CG(s)+CG(o))*Math.min(Math.abs(s),Math.abs(o),.5*Math.abs(l))||0}function EG(t,e){var r=t._x1-t._x0;return r?(3*(t._y1-t._y0)/r-e)/2:e}function uB(t,e,r){var n=t._x0,a=t._y0,s=t._x1,o=t._y1,l=(s-n)/3;t._context.bezierCurveTo(n+l,a+l*e,s-l,o-l*r,s,o)}function uI(t){this._context=t}uI.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._y0=this._y1=this._t0=NaN,this._point=0},lineEnd:function(){switch(this._point){case 2:this._context.lineTo(this._x1,this._y1);break;case 3:uB(this,this._t0,EG(this,this._t0));break}(this._line||this._line!==0&&this._point===1)&&this._context.closePath(),this._line=1-this._line},point:function(t,e){var r=NaN;if(t=+t,e=+e,!(t===this._x1&&e===this._y1)){switch(this._point){case 0:this._point=1,this._line?this._context.lineTo(t,e):this._context.moveTo(t,e);break;case 1:this._point=2;break;case 2:this._point=3,uB(this,EG(this,r=_G(this,t,e)),r);break;default:uB(this,this._t0,r=_G(this,t,e));break}this._x0=this._x1,this._x1=t,this._y0=this._y1,this._y1=e,this._t0=r}}};function tie(t){this._context=new rie(t)}(tie.prototype=Object.create(uI.prototype)).point=function(t,e){uI.prototype.point.call(this,e,t)};function rie(t){this._context=t}rie.prototype={moveTo:function(t,e){this._context.moveTo(e,t)},closePath:function(){this._context.closePath()},lineTo:function(t,e){this._context.lineTo(e,t)},bezierCurveTo:function(t,e,r,n,a,s){this._context.bezierCurveTo(e,t,n,r,s,a)}};function WVe(t){return new uI(t)}function XVe(t){return new tie(t)}function nie(t){this._context=t}nie.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x=[],this._y=[]},lineEnd:function(){var t=this._x,e=this._y,r=t.length;if(r)if(this._line?this._context.lineTo(t[0],e[0]):this._context.moveTo(t[0],e[0]),r===2)this._context.lineTo(t[1],e[1]);else for(var n=SG(t),a=SG(e),s=0,o=1;o<r;++s,++o)this._context.bezierCurveTo(n[0][s],a[0][s],n[1][s],a[1][s],t[o],e[o]);(this._line||this._line!==0&&r===1)&&this._context.closePath(),this._line=1-this._line,this._x=this._y=null},point:function(t,e){this._x.push(+t),this._y.push(+e)}};function SG(t){var e,r=t.length-1,n,a=new Array(r),s=new Array(r),o=new Array(r);for(a[0]=0,s[0]=2,o[0]=t[0]+2*t[1],e=1;e<r-1;++e)a[e]=1,s[e]=4,o[e]=4*t[e]+2*t[e+1];for(a[r-1]=2,s[r-1]=7,o[r-1]=8*t[r-1]+t[r],e=1;e<r;++e)n=a[e]/s[e-1],s[e]-=n,o[e]-=n*o[e-1];for(a[r-1]=o[r-1]/s[r-1],e=r-2;e>=0;--e)a[e]=(o[e]-a[e+1])/s[e];for(s[r-1]=(t[r]+a[r-1])/2,e=0;e<r-1;++e)s[e]=2*t[e+1]-a[e+1];return[a,s]}function YVe(t){return new nie(t)}function wP(t,e){this._context=t,this._t=e}wP.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x=this._y=NaN,this._point=0},lineEnd:function(){0<this._t&&this._t<1&&this._point===2&&this._context.lineTo(this._x,this._y),(this._line||this._line!==0&&this._point===1)&&this._context.closePath(),this._line>=0&&(this._t=1-this._t,this._line=1-this._line)},point:function(t,e){switch(t=+t,e=+e,this._point){case 0:this._point=1,this._line?this._context.lineTo(t,e):this._context.moveTo(t,e);break;case 1:this._point=2;default:{if(this._t<=0)this._context.lineTo(this._x,e),this._context.lineTo(t,e);else{var r=this._x*(1-this._t)+t*this._t;this._context.lineTo(r,this._y),this._context.lineTo(r,e)}break}}this._x=t,this._y=e}};function JVe(t){return new wP(t,.5)}function ZVe(t){return new wP(t,0)}function eHe(t){return new wP(t,1)}function gg(t,e){if((o=t.length)>1)for(var r=1,n,a,s=t[e[0]],o,l=s.length;r<o;++r)for(a=s,s=t[e[r]],n=0;n<l;++n)s[n][1]+=s[n][0]=isNaN(a[n][1])?a[n][0]:a[n][1]}function EF(t){for(var e=t.length,r=new Array(e);--e>=0;)r[e]=e;return r}function tHe(t,e){return t[e]}function rHe(t){const e=[];return e.key=t,e}function nHe(){var t=vs([]),e=EF,r=gg,n=tHe;function a(s){var o=Array.from(t.apply(this,arguments),rHe),l,c=o.length,u=-1,d;for(const f of s)for(l=0,++u;l<c;++l)(o[l][u]=[0,+n(f,o[l].key,u,s)]).data=f;for(l=0,d=$R(e(o));l<c;++l)o[d[l]].index=l;return r(o,d),o}return a.keys=function(s){return arguments.length?(t=typeof s=="function"?s:vs(Array.from(s)),a):t},a.value=function(s){return arguments.length?(n=typeof s=="function"?s:vs(+s),a):n},a.order=function(s){return arguments.length?(e=s==null?EF:typeof s=="function"?s:vs(Array.from(s)),a):e},a.offset=function(s){return arguments.length?(r=s??gg,a):r},a}function aHe(t,e){if((n=t.length)>0){for(var r,n,a=0,s=t[0].length,o;a<s;++a){for(o=r=0;r<n;++r)o+=t[r][a][1]||0;if(o)for(r=0;r<n;++r)t[r][a][1]/=o}gg(t,e)}}function sHe(t,e){if((a=t.length)>0){for(var r=0,n=t[e[0]],a,s=n.length;r<s;++r){for(var o=0,l=0;o<a;++o)l+=t[o][r][1]||0;n[r][1]+=n[r][0]=-l/2}gg(t,e)}}function iHe(t,e){if(!(!((o=t.length)>0)||!((s=(a=t[e[0]]).length)>0))){for(var r=0,n=1,a,s,o;n<s;++n){for(var l=0,c=0,u=0;l<o;++l){for(var d=t[e[l]],f=d[n][1]||0,A=d[n-1][1]||0,h=(f-A)/2,m=0;m<l;++m){var p=t[e[m]],x=p[n][1]||0,v=p[n-1][1]||0;h+=x-v}c+=f,u+=h*f}a[n-1][1]+=a[n-1][0]=r,c&&(r-=u/c)}a[n-1][1]+=a[n-1][0]=r,gg(t,e)}}var NP={},aie={};(function(t){Object.defineProperty(t,Symbol.toStringTag,{value:"Module"});function e(r){return r==="__proto__"}t.isUnsafeProperty=e})(aie);var KR={};(function(t){Object.defineProperty(t,Symbol.toStringTag,{value:"Module"});function e(r){switch(typeof r){case"number":case"symbol":return!1;case"string":return r.includes(".")||r.includes("[")||r.includes("]")}}t.isDeepKey=e})(KR);var CP={};(function(t){Object.defineProperty(t,Symbol.toStringTag,{value:"Module"});function e(r){var n;return typeof r=="string"||typeof r=="symbol"?r:Object.is((n=r==null?void 0:r.valueOf)==null?void 0:n.call(r),-0)?"-0":String(r)}t.toKey=e})(CP);var _P={},sie={};(function(t){Object.defineProperty(t,Symbol.toStringTag,{value:"Module"});function e(r){if(r==null)return"";if(typeof r=="string")return r;if(Array.isArray(r))return r.map(e).join(",");const n=String(r);return n==="0"&&Object.is(Number(r),-0)?"-0":n}t.toString=e})(sie);(function(t){Object.defineProperty(t,Symbol.toStringTag,{value:"Module"});const e=sie,r=CP;function n(a){if(Array.isArray(a))return a.map(r.toKey);if(typeof a=="symbol")return[a];a=e.toString(a);const s=[],o=a.length;if(o===0)return s;let l=0,c="",u="",d=!1;for(a.charCodeAt(0)===46&&(s.push(""),l++);l<o;){const f=a[l];u?f==="\\"&&l+1<o?(l++,c+=a[l]):f===u?u="":c+=f:d?f==='"'||f==="'"?u=f:f==="]"?(d=!1,s.push(c),c=""):c+=f:f==="["?(d=!0,c&&(s.push(c),c="")):f==="."?c&&(s.push(c),c=""):c+=f,l++}return c&&s.push(c),s}t.toPath=n})(_P);(function(t){Object.defineProperty(t,Symbol.toStringTag,{value:"Module"});const e=aie,r=KR,n=CP,a=_P;function s(l,c,u){if(l==null)return u;switch(typeof c){case"string":{if(e.isUnsafeProperty(c))return u;const d=l[c];return d===void 0?r.isDeepKey(c)?s(l,a.toPath(c),u):u:d}case"number":case"symbol":{typeof c=="number"&&(c=n.toKey(c));const d=l[c];return d===void 0?u:d}default:{if(Array.isArray(c))return o(l,c,u);if(Object.is(c==null?void 0:c.valueOf(),-0)?c="-0":c=String(c),e.isUnsafeProperty(c))return u;const d=l[c];return d===void 0?u:d}}}function o(l,c,u){if(c.length===0)return u;let d=l;for(let f=0;f<c.length;f++){if(d==null||e.isUnsafeProperty(c[f]))return u;d=d[c[f]]}return d===void 0?u:d}t.get=s})(NP);var oHe=NP.get;const xg=IA(oHe);var lHe=4;function X0(t){var e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:lHe,r=10**e,n=Math.round(t*r)/r;return Object.is(n,-0)?0:n}function wi(t){for(var e=arguments.length,r=new Array(e>1?e-1:0),n=1;n<e;n++)r[n-1]=arguments[n];return t.reduce((a,s,o)=>{var l=r[o-1];return typeof l=="string"?a+l+s:l!==void 0?a+X0(l)+s:a+s},"")}var jl=t=>t===0?0:t>0?1:-1,ch=t=>typeof t=="number"&&t!=+t,bA=t=>typeof t=="string"&&t.indexOf("%")===t.length-1,Cn=t=>(typeof t=="number"||t instanceof Number)&&!ch(t),uh=t=>Cn(t)||typeof t=="string",cHe=0,W2=t=>{var e=++cHe;return"".concat(t||"").concat(e)},sc=function(e,r){var n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:0,a=arguments.length>3&&arguments[3]!==void 0?arguments[3]:!1;if(!Cn(e)&&typeof e!="string")return n;var s;if(bA(e)){if(r==null)return n;var o=e.indexOf("%");s=r*parseFloat(e.slice(0,o))/100}else s=+e;return ch(s)&&(s=n),a&&r!=null&&s>r&&(s=r),s},iie=t=>{if(!Array.isArray(t))return!1;for(var e=t.length,r={},n=0;n<e;n++)if(!r[String(t[n])])r[String(t[n])]=!0;else return!0;return!1};function No(t,e,r){return Cn(t)&&Cn(e)?X0(t+r*(e-t)):e}function uHe(t,e,r){if(!(!t||!t.length))return t.find(n=>n&&(typeof e=="function"?e(n):xg(n,e))===r)}var nl=t=>t===null||typeof t>"u",qw=t=>nl(t)?t:"".concat(t.charAt(0).toUpperCase()).concat(t.slice(1));function dHe(t){return t!=null}function zw(){}var fHe=["type","size","sizeType"];function SF(){return SF=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var r=arguments[e];for(var n in r)({}).hasOwnProperty.call(r,n)&&(t[n]=r[n])}return t},SF.apply(null,arguments)}function IG(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter(function(a){return Object.getOwnPropertyDescriptor(t,a).enumerable})),r.push.apply(r,n)}return r}function jG(t){for(var e=1;e<arguments.length;e++){var r=arguments[e]!=null?arguments[e]:{};e%2?IG(Object(r),!0).forEach(function(n){hHe(t,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):IG(Object(r)).forEach(function(n){Object.defineProperty(t,n,Object.getOwnPropertyDescriptor(r,n))})}return t}function hHe(t,e,r){return(e=AHe(e))in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}function AHe(t){var e=mHe(t,"string");return typeof e=="symbol"?e:e+""}function mHe(t,e){if(typeof t!="object"||!t)return t;var r=t[Symbol.toPrimitive];if(r!==void 0){var n=r.call(t,e);if(typeof n!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}function pHe(t,e){if(t==null)return{};var r,n,a=gHe(t,e);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(t);for(n=0;n<s.length;n++)r=s[n],e.indexOf(r)===-1&&{}.propertyIsEnumerable.call(t,r)&&(a[r]=t[r])}return a}function gHe(t,e){if(t==null)return{};var r={};for(var n in t)if({}.hasOwnProperty.call(t,n)){if(e.indexOf(n)!==-1)continue;r[n]=t[n]}return r}var oie={symbolCircle:GR,symbolCross:kVe,symbolDiamond:OVe,symbolSquare:DVe,symbolStar:UVe,symbolTriangle:QVe,symbolWye:HVe},xHe=Math.PI/180,vHe=t=>{var e="symbol".concat(qw(t));return oie[e]||GR},yHe=(t,e,r)=>{if(e==="area")return t;switch(r){case"cross":return 5*t*t/9;case"diamond":return .5*t*t/Math.sqrt(3);case"square":return t*t;case"star":{var n=18*xHe;return 1.25*t*t*(Math.tan(n)-Math.tan(n*2)*Math.tan(n)**2)}case"triangle":return Math.sqrt(3)*t*t/4;case"wye":return(21-10*Math.sqrt(3))*t*t/8;default:return Math.PI*t*t/4}},bHe=(t,e)=>{oie["symbol".concat(qw(t))]=e},qR=t=>{var{type:e="circle",size:r=64,sizeType:n="area"}=t,a=pHe(t,fHe),s=jG(jG({},a),{},{type:e,size:r,sizeType:n}),o="circle";typeof e=="string"&&(o=e);var l=()=>{var A=vHe(o),h=$Ve().type(A).size(yHe(r,n,o)),m=h();if(m!==null)return m},{className:c,cx:u,cy:d}=s,f=Dd(s);return Cn(u)&&Cn(d)&&Cn(r)?g.createElement("path",SF({},f,{className:ns("recharts-symbols",c),transform:"translate(".concat(u,", ").concat(d,")"),d:l()})):null};qR.registerSymbol=bHe;var lie=t=>"radius"in t&&"startAngle"in t&&"endAngle"in t,wHe=(t,e)=>{if(!t||typeof t=="function"||typeof t=="boolean")return null;var r=t;if(g.isValidElement(t)&&(r=t.props),typeof r!="object"&&typeof r!="function")return null;var n={};return Object.keys(r).forEach(a=>{QR(a)&&(n[a]=s=>r[a](r,s))}),n},NHe=(t,e,r)=>n=>(t(e,r,n),null),Ww=(t,e,r)=>{if(t===null||typeof t!="object"&&typeof t!="function")return null;var n=null;return Object.keys(t).forEach(a=>{var s=t[a];QR(a)&&typeof s=="function"&&(n||(n={}),n[a]=NHe(s,e,r))}),n};function PG(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter(function(a){return Object.getOwnPropertyDescriptor(t,a).enumerable})),r.push.apply(r,n)}return r}function CHe(t){for(var e=1;e<arguments.length;e++){var r=arguments[e]!=null?arguments[e]:{};e%2?PG(Object(r),!0).forEach(function(n){_He(t,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):PG(Object(r)).forEach(function(n){Object.defineProperty(t,n,Object.getOwnPropertyDescriptor(r,n))})}return t}function _He(t,e,r){return(e=EHe(e))in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}function EHe(t){var e=SHe(t,"string");return typeof e=="symbol"?e:e+""}function SHe(t,e){if(typeof t!="object"||!t)return t;var r=t[Symbol.toPrimitive];if(r!==void 0){var n=r.call(t,e);if(typeof n!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}function Tl(t,e){var r=CHe({},t),n=e,a=Object.keys(e),s=a.reduce((o,l)=>(o[l]===void 0&&n[l]!==void 0&&(o[l]=n[l]),o),r);return s}function dI(){return dI=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var r=arguments[e];for(var n in r)({}).hasOwnProperty.call(r,n)&&(t[n]=r[n])}return t},dI.apply(null,arguments)}function BG(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter(function(a){return Object.getOwnPropertyDescriptor(t,a).enumerable})),r.push.apply(r,n)}return r}function IHe(t){for(var e=1;e<arguments.length;e++){var r=arguments[e]!=null?arguments[e]:{};e%2?BG(Object(r),!0).forEach(function(n){jHe(t,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):BG(Object(r)).forEach(function(n){Object.defineProperty(t,n,Object.getOwnPropertyDescriptor(r,n))})}return t}function jHe(t,e,r){return(e=PHe(e))in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}function PHe(t){var e=BHe(t,"string");return typeof e=="symbol"?e:e+""}function BHe(t,e){if(typeof t!="object"||!t)return t;var r=t[Symbol.toPrimitive];if(r!==void 0){var n=r.call(t,e);if(typeof n!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}var Ad=32,THe={align:"center",iconSize:14,inactiveColor:"#ccc",layout:"horizontal",verticalAlign:"middle"};function kHe(t){var{data:e,iconType:r,inactiveColor:n}=t,a=Ad/2,s=Ad/6,o=Ad/3,l=e.inactive?n:e.color,c=r??e.type;if(c==="none")return null;if(c==="plainline"){var u;return g.createElement("line",{strokeWidth:4,fill:"none",stroke:l,strokeDasharray:(u=e.payload)===null||u===void 0?void 0:u.strokeDasharray,x1:0,y1:a,x2:Ad,y2:a,className:"recharts-legend-icon"})}if(c==="line")return g.createElement("path",{strokeWidth:4,fill:"none",stroke:l,d:"M0,".concat(a,"h").concat(o,`
            A`).concat(s,",").concat(s,",0,1,1,").concat(2*o,",").concat(a,`
            H`).concat(Ad,"M").concat(2*o,",").concat(a,`
            A`).concat(s,",").concat(s,",0,1,1,").concat(o,",").concat(a),className:"recharts-legend-icon"});if(c==="rect")return g.createElement("path",{stroke:"none",fill:l,d:"M0,".concat(Ad/8,"h").concat(Ad,"v").concat(Ad*3/4,"h").concat(-Ad,"z"),className:"recharts-legend-icon"});if(g.isValidElement(e.legendIcon)){var d=IHe({},e);return delete d.legendIcon,g.cloneElement(e.legendIcon,d)}return g.createElement(qR,{fill:l,cx:a,cy:a,size:Ad,sizeType:"diameter",type:c})}function FHe(t){var{payload:e,iconSize:r,layout:n,formatter:a,inactiveColor:s,iconType:o}=t,l={x:0,y:0,width:Ad,height:Ad},c={display:n==="horizontal"?"inline-block":"block",marginRight:10},u={display:"inline-block",verticalAlign:"middle",marginRight:4};return e.map((d,f)=>{var A=d.formatter||a,h=ns({"recharts-legend-item":!0,["legend-item-".concat(f)]:!0,inactive:d.inactive});if(d.type==="none")return null;var m=d.inactive?s:d.color,p=A?A(d.value,d,f):d.value;return g.createElement("li",dI({className:h,style:c,key:"legend-item-".concat(f)},Ww(t,d,f)),g.createElement(VR,{width:r,height:r,viewBox:l,style:u,"aria-label":"".concat(p," legend icon")},g.createElement(kHe,{data:d,iconType:o,inactiveColor:s})),g.createElement("span",{className:"recharts-legend-item-text",style:{color:m}},p))})}var OHe=t=>{var e=Tl(t,THe),{payload:r,layout:n,align:a}=e;if(!r||!r.length)return null;var s={padding:0,margin:0,textAlign:n==="horizontal"?a:"left"};return g.createElement("ul",{className:"recharts-default-legend",style:s},g.createElement(FHe,dI({},e,{payload:r})))},cie={},uie={};(function(t){Object.defineProperty(t,Symbol.toStringTag,{value:"Module"});function e(r,n){const a=new Map;for(let s=0;s<r.length;s++){const o=r[s],l=n(o);a.has(l)||a.set(l,o)}return Array.from(a.values())}t.uniqBy=e})(uie);var zR={};(function(t){Object.defineProperty(t,Symbol.toStringTag,{value:"Module"});function e(r){return r}t.identity=e})(zR);var die={},EP={},fie={};(function(t){Object.defineProperty(t,Symbol.toStringTag,{value:"Module"});function e(r){return Number.isSafeInteger(r)&&r>=0}t.isLength=e})(fie);(function(t){Object.defineProperty(t,Symbol.toStringTag,{value:"Module"});const e=fie;function r(n){return n!=null&&typeof n!="function"&&e.isLength(n.length)}t.isArrayLike=r})(EP);var hie={};(function(t){Object.defineProperty(t,Symbol.toStringTag,{value:"Module"});function e(r){return typeof r=="object"&&r!==null}t.isObjectLike=e})(hie);(function(t){Object.defineProperty(t,Symbol.toStringTag,{value:"Module"});const e=EP,r=hie;function n(a){return r.isObjectLike(a)&&e.isArrayLike(a)}t.isArrayLikeObject=n})(die);var Aie={},mie={};(function(t){Object.defineProperty(t,Symbol.toStringTag,{value:"Module"});const e=NP;function r(n){return function(a){return e.get(a,n)}}t.property=r})(mie);var pie={},WR={},gie={},XR={};(function(t){Object.defineProperty(t,Symbol.toStringTag,{value:"Module"});function e(r){return r!==null&&(typeof r=="object"||typeof r=="function")}t.isObject=e})(XR);var YR={};(function(t){Object.defineProperty(t,Symbol.toStringTag,{value:"Module"});function e(r){return r==null||typeof r!="object"&&typeof r!="function"}t.isPrimitive=e})(YR);var JR={};(function(t){Object.defineProperty(t,Symbol.toStringTag,{value:"Module"});function e(r,n){return r===n||Number.isNaN(r)&&Number.isNaN(n)}t.eq=e})(JR);(function(t){Object.defineProperty(t,Symbol.toStringTag,{value:"Module"});const e=XR,r=YR,n=JR;function a(d,f,A){return typeof A!="function"?a(d,f,()=>{}):s(d,f,function h(m,p,x,v,y,b){const w=A(m,p,x,v,y,b);return w!==void 0?!!w:s(m,p,h,b)},new Map)}function s(d,f,A,h){if(f===d)return!0;switch(typeof f){case"object":return o(d,f,A,h);case"function":return Object.keys(f).length>0?s(d,{...f},A,h):n.eq(d,f);default:return e.isObject(d)?typeof f=="string"?f==="":!0:n.eq(d,f)}}function o(d,f,A,h){if(f==null)return!0;if(Array.isArray(f))return c(d,f,A,h);if(f instanceof Map)return l(d,f,A,h);if(f instanceof Set)return u(d,f,A,h);const m=Object.keys(f);if(d==null||r.isPrimitive(d))return m.length===0;if(m.length===0)return!0;if(h!=null&&h.has(f))return h.get(f)===d;h==null||h.set(f,d);try{for(let p=0;p<m.length;p++){const x=m[p];if(!r.isPrimitive(d)&&!(x in d)||f[x]===void 0&&d[x]!==void 0||f[x]===null&&d[x]!==null||!A(d[x],f[x],x,d,f,h))return!1}return!0}finally{h==null||h.delete(f)}}function l(d,f,A,h){if(f.size===0)return!0;if(!(d instanceof Map))return!1;for(const[m,p]of f.entries()){const x=d.get(m);if(A(x,p,m,d,f,h)===!1)return!1}return!0}function c(d,f,A,h){if(f.length===0)return!0;if(!Array.isArray(d))return!1;const m=new Set;for(let p=0;p<f.length;p++){const x=f[p];let v=!1;for(let y=0;y<d.length;y++){if(m.has(y))continue;const b=d[y];let w=!1;if(A(b,x,p,d,f,h)&&(w=!0),w){m.add(y),v=!0;break}}if(!v)return!1}return!0}function u(d,f,A,h){return f.size===0?!0:d instanceof Set?c([...d],[...f],A,h):!1}t.isMatchWith=a,t.isSetMatch=u})(gie);(function(t){Object.defineProperty(t,Symbol.toStringTag,{value:"Module"});const e=gie;function r(n,a){return e.isMatchWith(n,a,()=>{})}t.isMatch=r})(WR);var xie={},ZR={},vie={};(function(t){Object.defineProperty(t,Symbol.toStringTag,{value:"Module"});function e(r){return Object.getOwnPropertySymbols(r).filter(n=>Object.prototype.propertyIsEnumerable.call(r,n))}t.getSymbols=e})(vie);var eM={};(function(t){Object.defineProperty(t,Symbol.toStringTag,{value:"Module"});function e(r){return r==null?r===void 0?"[object Undefined]":"[object Null]":Object.prototype.toString.call(r)}t.getTag=e})(eM);var tM={};(function(t){Object.defineProperty(t,Symbol.toStringTag,{value:"Module"});const e="[object RegExp]",r="[object String]",n="[object Number]",a="[object Boolean]",s="[object Arguments]",o="[object Symbol]",l="[object Date]",c="[object Map]",u="[object Set]",d="[object Array]",f="[object Function]",A="[object ArrayBuffer]",h="[object Object]",m="[object Error]",p="[object DataView]",x="[object Uint8Array]",v="[object Uint8ClampedArray]",y="[object Uint16Array]",b="[object Uint32Array]",w="[object BigUint64Array]",j="[object Int8Array]",I="[object Int16Array]",_="[object Int32Array]",S="[object BigInt64Array]",E="[object Float32Array]",T="[object Float64Array]";t.argumentsTag=s,t.arrayBufferTag=A,t.arrayTag=d,t.bigInt64ArrayTag=S,t.bigUint64ArrayTag=w,t.booleanTag=a,t.dataViewTag=p,t.dateTag=l,t.errorTag=m,t.float32ArrayTag=E,t.float64ArrayTag=T,t.functionTag=f,t.int16ArrayTag=I,t.int32ArrayTag=_,t.int8ArrayTag=j,t.mapTag=c,t.numberTag=n,t.objectTag=h,t.regexpTag=e,t.setTag=u,t.stringTag=r,t.symbolTag=o,t.uint16ArrayTag=y,t.uint32ArrayTag=b,t.uint8ArrayTag=x,t.uint8ClampedArrayTag=v})(tM);var yie={};(function(t){Object.defineProperty(t,Symbol.toStringTag,{value:"Module"});function e(r){return ArrayBuffer.isView(r)&&!(r instanceof DataView)}t.isTypedArray=e})(yie);(function(t){Object.defineProperty(t,Symbol.toStringTag,{value:"Module"});const e=vie,r=eM,n=tM,a=YR,s=yie;function o(d,f){return l(d,void 0,d,new Map,f)}function l(d,f,A,h=new Map,m=void 0){const p=m==null?void 0:m(d,f,A,h);if(p!==void 0)return p;if(a.isPrimitive(d))return d;if(h.has(d))return h.get(d);if(Array.isArray(d)){const x=new Array(d.length);h.set(d,x);for(let v=0;v<d.length;v++)x[v]=l(d[v],v,A,h,m);return Object.hasOwn(d,"index")&&(x.index=d.index),Object.hasOwn(d,"input")&&(x.input=d.input),x}if(d instanceof Date)return new Date(d.getTime());if(d instanceof RegExp){const x=new RegExp(d.source,d.flags);return x.lastIndex=d.lastIndex,x}if(d instanceof Map){const x=new Map;h.set(d,x);for(const[v,y]of d)x.set(v,l(y,v,A,h,m));return x}if(d instanceof Set){const x=new Set;h.set(d,x);for(const v of d)x.add(l(v,void 0,A,h,m));return x}if(typeof Buffer<"u"&&Buffer.isBuffer(d))return d.subarray();if(s.isTypedArray(d)){const x=new(Object.getPrototypeOf(d)).constructor(d.length);h.set(d,x);for(let v=0;v<d.length;v++)x[v]=l(d[v],v,A,h,m);return x}if(d instanceof ArrayBuffer||typeof SharedArrayBuffer<"u"&&d instanceof SharedArrayBuffer)return d.slice(0);if(d instanceof DataView){const x=new DataView(d.buffer.slice(0),d.byteOffset,d.byteLength);return h.set(d,x),c(x,d,A,h,m),x}if(typeof File<"u"&&d instanceof File){const x=new File([d],d.name,{type:d.type});return h.set(d,x),c(x,d,A,h,m),x}if(typeof Blob<"u"&&d instanceof Blob){const x=new Blob([d],{type:d.type});return h.set(d,x),c(x,d,A,h,m),x}if(d instanceof Error){const x=new d.constructor;return h.set(d,x),x.message=d.message,x.name=d.name,x.stack=d.stack,x.cause=d.cause,c(x,d,A,h,m),x}if(d instanceof Boolean){const x=new Boolean(d.valueOf());return h.set(d,x),c(x,d,A,h,m),x}if(d instanceof Number){const x=new Number(d.valueOf());return h.set(d,x),c(x,d,A,h,m),x}if(d instanceof String){const x=new String(d.valueOf());return h.set(d,x),c(x,d,A,h,m),x}if(typeof d=="object"&&u(d)){const x=Object.create(Object.getPrototypeOf(d));return h.set(d,x),c(x,d,A,h,m),x}return d}function c(d,f,A=d,h,m){const p=[...Object.keys(f),...e.getSymbols(f)];for(let x=0;x<p.length;x++){const v=p[x],y=Object.getOwnPropertyDescriptor(d,v);(y==null||y.writable)&&(d[v]=l(f[v],v,A,h,m))}}function u(d){switch(r.getTag(d)){case n.argumentsTag:case n.arrayTag:case n.arrayBufferTag:case n.dataViewTag:case n.booleanTag:case n.dateTag:case n.float32ArrayTag:case n.float64ArrayTag:case n.int8ArrayTag:case n.int16ArrayTag:case n.int32ArrayTag:case n.mapTag:case n.numberTag:case n.objectTag:case n.regexpTag:case n.setTag:case n.stringTag:case n.symbolTag:case n.uint8ArrayTag:case n.uint8ClampedArrayTag:case n.uint16ArrayTag:case n.uint32ArrayTag:return!0;default:return!1}}t.cloneDeepWith=o,t.cloneDeepWithImpl=l,t.copyProperties=c})(ZR);(function(t){Object.defineProperty(t,Symbol.toStringTag,{value:"Module"});const e=ZR;function r(n){return e.cloneDeepWithImpl(n,void 0,n,new Map,void 0)}t.cloneDeep=r})(xie);(function(t){Object.defineProperty(t,Symbol.toStringTag,{value:"Module"});const e=WR,r=xie;function n(a){return a=r.cloneDeep(a),s=>e.isMatch(s,a)}t.matches=n})(pie);var bie={},wie={},Nie={};(function(t){Object.defineProperty(t,Symbol.toStringTag,{value:"Module"});const e=ZR,r=tM;function n(a,s){return e.cloneDeepWith(a,(o,l,c,u)=>{const d=s==null?void 0:s(o,l,c,u);if(d!==void 0)return d;if(typeof a=="object")switch(Object.prototype.toString.call(a)){case r.numberTag:case r.stringTag:case r.booleanTag:{const f=new a.constructor(a==null?void 0:a.valueOf());return e.copyProperties(f,a),f}case r.argumentsTag:{const f={};return e.copyProperties(f,a),f.length=a.length,f[Symbol.iterator]=a[Symbol.iterator],f}default:return}})}t.cloneDeepWith=n})(Nie);(function(t){Object.defineProperty(t,Symbol.toStringTag,{value:"Module"});const e=Nie;function r(n){return e.cloneDeepWith(n)}t.cloneDeep=r})(wie);var Cie={},rM={};(function(t){Object.defineProperty(t,Symbol.toStringTag,{value:"Module"});const e=/^(?:0|[1-9]\d*)$/;function r(n,a=Number.MAX_SAFE_INTEGER){switch(typeof n){case"number":return Number.isInteger(n)&&n>=0&&n<a;case"symbol":return!1;case"string":return e.test(n)}}t.isIndex=r})(rM);var _ie={};(function(t){Object.defineProperty(t,Symbol.toStringTag,{value:"Module"});const e=eM;function r(n){return n!==null&&typeof n=="object"&&e.getTag(n)==="[object Arguments]"}t.isArguments=r})(_ie);(function(t){Object.defineProperty(t,Symbol.toStringTag,{value:"Module"});const e=KR,r=rM,n=_ie,a=_P;function s(o,l){let c;if(Array.isArray(l)?c=l:typeof l=="string"&&e.isDeepKey(l)&&(o==null?void 0:o[l])==null?c=a.toPath(l):c=[l],c.length===0)return!1;let u=o;for(let d=0;d<c.length;d++){const f=c[d];if((u==null||!Object.hasOwn(u,f))&&!((Array.isArray(u)||n.isArguments(u))&&r.isIndex(f)&&f<u.length))return!1;u=u[f]}return!0}t.has=s})(Cie);(function(t){Object.defineProperty(t,Symbol.toStringTag,{value:"Module"});const e=WR,r=CP,n=wie,a=NP,s=Cie;function o(l,c){switch(typeof l){case"object":{Object.is(l==null?void 0:l.valueOf(),-0)&&(l="-0");break}case"number":{l=r.toKey(l);break}}return c=n.cloneDeep(c),function(u){const d=a.get(u,l);return d===void 0?s.has(u,l):c===void 0?d===void 0:e.isMatch(d,c)}}t.matchesProperty=o})(bie);(function(t){Object.defineProperty(t,Symbol.toStringTag,{value:"Module"});const e=zR,r=mie,n=pie,a=bie;function s(o){if(o==null)return e.identity;switch(typeof o){case"function":return o;case"object":return Array.isArray(o)&&o.length===2?a.matchesProperty(o[0],o[1]):n.matches(o);case"string":case"symbol":case"number":return r.property(o)}}t.iteratee=s})(Aie);(function(t){Object.defineProperty(t,Symbol.toStringTag,{value:"Module"});const e=uie,r=zR,n=die,a=Aie;function s(o,l=r.identity){return n.isArrayLikeObject(o)?e.uniqBy(Array.from(o),a.iteratee(l)):[]}t.uniqBy=s})(cie);var DHe=cie.uniqBy;const TG=IA(DHe);function Eie(t,e,r){return e===!0?TG(t,r):typeof e=="function"?TG(t,e):t}var Sie={exports:{}},Iie={},jie={exports:{}},Pie={};/**
 * @license React
 * use-sync-external-store-shim.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var $v=g;function RHe(t,e){return t===e&&(t!==0||1/t===1/e)||t!==t&&e!==e}var MHe=typeof Object.is=="function"?Object.is:RHe,LHe=$v.useState,UHe=$v.useEffect,QHe=$v.useLayoutEffect,VHe=$v.useDebugValue;function HHe(t,e){var r=e(),n=LHe({inst:{value:r,getSnapshot:e}}),a=n[0].inst,s=n[1];return QHe(function(){a.value=r,a.getSnapshot=e,dB(a)&&s({inst:a})},[t,r,e]),UHe(function(){return dB(a)&&s({inst:a}),t(function(){dB(a)&&s({inst:a})})},[t]),VHe(r),r}function dB(t){var e=t.getSnapshot;t=t.value;try{var r=e();return!MHe(t,r)}catch{return!0}}function $He(t,e){return e()}var GHe=typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"?$He:HHe;Pie.useSyncExternalStore=$v.useSyncExternalStore!==void 0?$v.useSyncExternalStore:GHe;jie.exports=Pie;var KHe=jie.exports;/**
 * @license React
 * use-sync-external-store-shim/with-selector.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var SP=g,qHe=KHe;function zHe(t,e){return t===e&&(t!==0||1/t===1/e)||t!==t&&e!==e}var WHe=typeof Object.is=="function"?Object.is:zHe,XHe=qHe.useSyncExternalStore,YHe=SP.useRef,JHe=SP.useEffect,ZHe=SP.useMemo,e$e=SP.useDebugValue;Iie.useSyncExternalStoreWithSelector=function(t,e,r,n,a){var s=YHe(null);if(s.current===null){var o={hasValue:!1,value:null};s.current=o}else o=s.current;s=ZHe(function(){function c(h){if(!u){if(u=!0,d=h,h=n(h),a!==void 0&&o.hasValue){var m=o.value;if(a(m,h))return f=m}return f=h}if(m=f,WHe(d,h))return m;var p=n(h);return a!==void 0&&a(m,p)?(d=h,m):(d=h,f=p)}var u=!1,d,f,A=r===void 0?null:r;return[function(){return c(e())},A===null?void 0:function(){return c(A())}]},[e,r,n,a]);var l=XHe(t,s[0],s[1]);return JHe(function(){o.hasValue=!0,o.value=l},[l]),e$e(l),l};Sie.exports=Iie;var t$e=Sie.exports,nM=g.createContext(null),r$e=t=>t,Cs=()=>{var t=g.useContext(nM);return t?t.store.dispatch:r$e},bE=()=>{},n$e=()=>bE,a$e=(t,e)=>t===e;function gn(t){var e=g.useContext(nM);return t$e.useSyncExternalStoreWithSelector(e?e.subscription.addNestedSub:n$e,e?e.store.getState:bE,e?e.store.getState:bE,e?t:bE,a$e)}function s$e(t,e=`expected a function, instead received ${typeof t}`){if(typeof t!="function")throw new TypeError(e)}function i$e(t,e=`expected an object, instead received ${typeof t}`){if(typeof t!="object")throw new TypeError(e)}function o$e(t,e="expected all items to be functions, instead received the following types: "){if(!t.every(r=>typeof r=="function")){const r=t.map(n=>typeof n=="function"?`function ${n.name||"unnamed"}()`:typeof n).join(", ");throw new TypeError(`${e}[${r}]`)}}var kG=t=>Array.isArray(t)?t:[t];function l$e(t){const e=Array.isArray(t[0])?t[0]:t;return o$e(e,"createSelector expects all input-selectors to be functions, but received the following types: "),e}function c$e(t,e){const r=[],{length:n}=t;for(let a=0;a<n;a++)r.push(t[a].apply(null,e));return r}var u$e=class{constructor(t){this.value=t}deref(){return this.value}},d$e=typeof WeakRef<"u"?WeakRef:u$e,f$e=0,FG=1;function p_(){return{s:f$e,v:void 0,o:null,p:null}}function Bie(t,e={}){let r=p_();const{resultEqualityCheck:n}=e;let a,s=0;function o(){var f;let l=r;const{length:c}=arguments;for(let A=0,h=c;A<h;A++){const m=arguments[A];if(typeof m=="function"||typeof m=="object"&&m!==null){let p=l.o;p===null&&(l.o=p=new WeakMap);const x=p.get(m);x===void 0?(l=p_(),p.set(m,l)):l=x}else{let p=l.p;p===null&&(l.p=p=new Map);const x=p.get(m);x===void 0?(l=p_(),p.set(m,l)):l=x}}const u=l;let d;if(l.s===FG)d=l.v;else if(d=t.apply(null,arguments),s++,n){const A=((f=a==null?void 0:a.deref)==null?void 0:f.call(a))??a;A!=null&&n(A,d)&&(d=A,s!==0&&s--),a=typeof d=="object"&&d!==null||typeof d=="function"?new d$e(d):d}return u.s=FG,u.v=d,d}return o.clearCache=()=>{r=p_(),o.resetResultsCount()},o.resultsCount=()=>s,o.resetResultsCount=()=>{s=0},o}function h$e(t,...e){const r=typeof t=="function"?{memoize:t,memoizeOptions:e}:t,n=(...a)=>{let s=0,o=0,l,c={},u=a.pop();typeof u=="object"&&(c=u,u=a.pop()),s$e(u,`createSelector expects an output function after the inputs, but received: [${typeof u}]`);const d={...r,...c},{memoize:f,memoizeOptions:A=[],argsMemoize:h=Bie,argsMemoizeOptions:m=[]}=d,p=kG(A),x=kG(m),v=l$e(a),y=f(function(){return s++,u.apply(null,arguments)},...p),b=h(function(){o++;const j=c$e(v,arguments);return l=y.apply(null,j),l},...x);return Object.assign(b,{resultFunc:u,memoizedResultFunc:y,dependencies:v,dependencyRecomputations:()=>o,resetDependencyRecomputations:()=>{o=0},lastResult:()=>l,recomputations:()=>s,resetRecomputations:()=>{s=0},memoize:f,argsMemoize:h})};return Object.assign(n,{withTypes:()=>n}),n}var Kt=h$e(Bie),A$e=Object.assign((t,e=Kt)=>{i$e(t,`createStructuredSelector expects first argument to be an object where each property is a selector, instead received a ${typeof t}`);const r=Object.keys(t),n=r.map(s=>t[s]);return e(n,(...s)=>s.reduce((o,l,c)=>(o[r[c]]=l,o),{}))},{withTypes:()=>A$e}),Tie={},kie={},Fie={};(function(t){Object.defineProperty(t,Symbol.toStringTag,{value:"Module"});function e(n){return typeof n=="symbol"?1:n===null?2:n===void 0?3:n!==n?4:0}const r=(n,a,s)=>{if(n!==a){const o=e(n),l=e(a);if(o===l&&o===0){if(n<a)return s==="desc"?1:-1;if(n>a)return s==="desc"?-1:1}return s==="desc"?l-o:o-l}return 0};t.compareValues=r})(Fie);var Oie={},aM={};(function(t){Object.defineProperty(t,Symbol.toStringTag,{value:"Module"});function e(r){return typeof r=="symbol"||r instanceof Symbol}t.isSymbol=e})(aM);(function(t){Object.defineProperty(t,Symbol.toStringTag,{value:"Module"});const e=aM,r=/\.|\[(?:[^[\]]*|(["'])(?:(?!\1)[^\\]|\\.)*?\1)\]/,n=/^\w*$/;function a(s,o){return Array.isArray(s)?!1:typeof s=="number"||typeof s=="boolean"||s==null||e.isSymbol(s)?!0:typeof s=="string"&&(n.test(s)||!r.test(s))||o!=null&&Object.hasOwn(o,s)}t.isKey=a})(Oie);(function(t){Object.defineProperty(t,Symbol.toStringTag,{value:"Module"});const e=Fie,r=Oie,n=_P;function a(s,o,l,c){if(s==null)return[];l=c?void 0:l,Array.isArray(s)||(s=Object.values(s)),Array.isArray(o)||(o=o==null?[null]:[o]),o.length===0&&(o=[null]),Array.isArray(l)||(l=l==null?[]:[l]),l=l.map(h=>String(h));const u=(h,m)=>{let p=h;for(let x=0;x<m.length&&p!=null;++x)p=p[m[x]];return p},d=(h,m)=>m==null||h==null?m:typeof h=="object"&&"key"in h?Object.hasOwn(m,h.key)?m[h.key]:u(m,h.path):typeof h=="function"?h(m):Array.isArray(h)?u(m,h):typeof m=="object"?m[h]:m,f=o.map(h=>(Array.isArray(h)&&h.length===1&&(h=h[0]),h==null||typeof h=="function"||Array.isArray(h)||r.isKey(h)?h:{key:h,path:n.toPath(h)}));return s.map(h=>({original:h,criteria:f.map(m=>d(m,h))})).slice().sort((h,m)=>{for(let p=0;p<f.length;p++){const x=e.compareValues(h.criteria[p],m.criteria[p],l[p]);if(x!==0)return x}return 0}).map(h=>h.original)}t.orderBy=a})(kie);var Die={};(function(t){Object.defineProperty(t,Symbol.toStringTag,{value:"Module"});function e(r,n=1){const a=[],s=Math.floor(n),o=(l,c)=>{for(let u=0;u<l.length;u++){const d=l[u];Array.isArray(d)&&c<s?o(d,c+1):a.push(d)}};return o(r,0),a}t.flatten=e})(Die);var sM={};(function(t){Object.defineProperty(t,Symbol.toStringTag,{value:"Module"});const e=rM,r=EP,n=XR,a=JR;function s(o,l,c){return n.isObject(c)&&(typeof l=="number"&&r.isArrayLike(c)&&e.isIndex(l)&&l<c.length||typeof l=="string"&&l in c)?a.eq(c[l],o):!1}t.isIterateeCall=s})(sM);(function(t){Object.defineProperty(t,Symbol.toStringTag,{value:"Module"});const e=kie,r=Die,n=sM;function a(s,...o){const l=o.length;return l>1&&n.isIterateeCall(s,o[0],o[1])?o=[]:l>2&&n.isIterateeCall(o[0],o[1],o[2])&&(o=[o[0]]),e.orderBy(s,r.flatten(o),["asc"])}t.sortBy=a})(Tie);var m$e=Tie.sortBy;const IP=IA(m$e);var Rie=t=>t.legend.settings,p$e=t=>t.legend.size,g$e=t=>t.legend.payload,x$e=Kt([g$e,Rie],(t,e)=>{var{itemSorter:r}=e,n=t.flat(1);return r?IP(n,r):n});function v$e(){return gn(x$e)}var g_=1;function Mie(){var t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:[],[e,r]=g.useState({height:0,left:0,top:0,width:0}),n=g.useCallback(a=>{if(a!=null){var s=a.getBoundingClientRect(),o={height:s.height,left:s.left,top:s.top,width:s.width};(Math.abs(o.height-e.height)>g_||Math.abs(o.left-e.left)>g_||Math.abs(o.top-e.top)>g_||Math.abs(o.width-e.width)>g_)&&r({height:o.height,left:o.left,top:o.top,width:o.width})}},[e.width,e.height,e.top,e.left,...t]);return[e,n]}function xl(t){return`Minified Redux error #${t}; visit https://redux.js.org/Errors?code=${t} for the full message or use the non-minified dev environment for full errors. `}var y$e=typeof Symbol=="function"&&Symbol.observable||"@@observable",OG=y$e,fB=()=>Math.random().toString(36).substring(7).split("").join("."),b$e={INIT:`@@redux/INIT${fB()}`,REPLACE:`@@redux/REPLACE${fB()}`,PROBE_UNKNOWN_ACTION:()=>`@@redux/PROBE_UNKNOWN_ACTION${fB()}`},fI=b$e;function iM(t){if(typeof t!="object"||t===null)return!1;let e=t;for(;Object.getPrototypeOf(e)!==null;)e=Object.getPrototypeOf(e);return Object.getPrototypeOf(t)===e||Object.getPrototypeOf(t)===null}function Lie(t,e,r){if(typeof t!="function")throw new Error(xl(2));if(typeof e=="function"&&typeof r=="function"||typeof r=="function"&&typeof arguments[3]=="function")throw new Error(xl(0));if(typeof e=="function"&&typeof r>"u"&&(r=e,e=void 0),typeof r<"u"){if(typeof r!="function")throw new Error(xl(1));return r(Lie)(t,e)}let n=t,a=e,s=new Map,o=s,l=0,c=!1;function u(){o===s&&(o=new Map,s.forEach((x,v)=>{o.set(v,x)}))}function d(){if(c)throw new Error(xl(3));return a}function f(x){if(typeof x!="function")throw new Error(xl(4));if(c)throw new Error(xl(5));let v=!0;u();const y=l++;return o.set(y,x),function(){if(v){if(c)throw new Error(xl(6));v=!1,u(),o.delete(y),s=null}}}function A(x){if(!iM(x))throw new Error(xl(7));if(typeof x.type>"u")throw new Error(xl(8));if(typeof x.type!="string")throw new Error(xl(17));if(c)throw new Error(xl(9));try{c=!0,a=n(a,x)}finally{c=!1}return(s=o).forEach(y=>{y()}),x}function h(x){if(typeof x!="function")throw new Error(xl(10));n=x,A({type:fI.REPLACE})}function m(){const x=f;return{subscribe(v){if(typeof v!="object"||v===null)throw new Error(xl(11));function y(){const w=v;w.next&&w.next(d())}return y(),{unsubscribe:x(y)}},[OG](){return this}}}return A({type:fI.INIT}),{dispatch:A,subscribe:f,getState:d,replaceReducer:h,[OG]:m}}function w$e(t){Object.keys(t).forEach(e=>{const r=t[e];if(typeof r(void 0,{type:fI.INIT})>"u")throw new Error(xl(12));if(typeof r(void 0,{type:fI.PROBE_UNKNOWN_ACTION()})>"u")throw new Error(xl(13))})}function Uie(t){const e=Object.keys(t),r={};for(let s=0;s<e.length;s++){const o=e[s];typeof t[o]=="function"&&(r[o]=t[o])}const n=Object.keys(r);let a;try{w$e(r)}catch(s){a=s}return function(o={},l){if(a)throw a;let c=!1;const u={};for(let d=0;d<n.length;d++){const f=n[d],A=r[f],h=o[f],m=A(h,l);if(typeof m>"u")throw l&&l.type,new Error(xl(14));u[f]=m,c=c||m!==h}return c=c||n.length!==Object.keys(o).length,c?u:o}}function hI(...t){return t.length===0?e=>e:t.length===1?t[0]:t.reduce((e,r)=>(...n)=>e(r(...n)))}function N$e(...t){return e=>(r,n)=>{const a=e(r,n);let s=()=>{throw new Error(xl(15))};const o={getState:a.getState,dispatch:(c,...u)=>s(c,...u)},l=t.map(c=>c(o));return s=hI(...l)(a.dispatch),{...a,dispatch:s}}}function Qie(t){return iM(t)&&"type"in t&&typeof t.type=="string"}var Vie=Symbol.for("immer-nothing"),DG=Symbol.for("immer-draftable"),Bc=Symbol.for("immer-state");function cf(t,...e){throw new Error(`[Immer] minified error nr: ${t}. Full error at: https://bit.ly/3cXEKWf`)}var Du=Object,Gv=Du.getPrototypeOf,AI="constructor",jP="prototype",IF="configurable",mI="enumerable",wE="writable",X2="value",wA=t=>!!t&&!!t[Bc];function Cf(t){var e;return t?Hie(t)||BP(t)||!!t[DG]||!!((e=t[AI])!=null&&e[DG])||TP(t)||kP(t):!1}var C$e=Du[jP][AI].toString(),RG=new WeakMap;function Hie(t){if(!t||!oM(t))return!1;const e=Gv(t);if(e===null||e===Du[jP])return!0;const r=Du.hasOwnProperty.call(e,AI)&&e[AI];if(r===Object)return!0;if(!Fx(r))return!1;let n=RG.get(r);return n===void 0&&(n=Function.toString.call(r),RG.set(r,n)),n===C$e}function PP(t,e,r=!0){Xw(t)===0?(r?Reflect.ownKeys(t):Du.keys(t)).forEach(a=>{e(a,t[a],t)}):t.forEach((n,a)=>e(a,n,t))}function Xw(t){const e=t[Bc];return e?e.type_:BP(t)?1:TP(t)?2:kP(t)?3:0}var MG=(t,e,r=Xw(t))=>r===2?t.has(e):Du[jP].hasOwnProperty.call(t,e),jF=(t,e,r=Xw(t))=>r===2?t.get(e):t[e],pI=(t,e,r,n=Xw(t))=>{n===2?t.set(e,r):n===3?t.add(r):t[e]=r};function _$e(t,e){return t===e?t!==0||1/t===1/e:t!==t&&e!==e}var BP=Array.isArray,TP=t=>t instanceof Map,kP=t=>t instanceof Set,oM=t=>typeof t=="object",Fx=t=>typeof t=="function",hB=t=>typeof t=="boolean";function E$e(t){const e=+t;return Number.isInteger(e)&&String(e)===t}var Uh=t=>t.copy_||t.base_,lM=t=>t.modified_?t.copy_:t.base_;function PF(t,e){if(TP(t))return new Map(t);if(kP(t))return new Set(t);if(BP(t))return Array[jP].slice.call(t);const r=Hie(t);if(e===!0||e==="class_only"&&!r){const n=Du.getOwnPropertyDescriptors(t);delete n[Bc];let a=Reflect.ownKeys(n);for(let s=0;s<a.length;s++){const o=a[s],l=n[o];l[wE]===!1&&(l[wE]=!0,l[IF]=!0),(l.get||l.set)&&(n[o]={[IF]:!0,[wE]:!0,[mI]:l[mI],[X2]:t[o]})}return Du.create(Gv(t),n)}else{const n=Gv(t);if(n!==null&&r)return{...t};const a=Du.create(n);return Du.assign(a,t)}}function cM(t,e=!1){return FP(t)||wA(t)||!Cf(t)||(Xw(t)>1&&Du.defineProperties(t,{set:x_,add:x_,clear:x_,delete:x_}),Du.freeze(t),e&&PP(t,(r,n)=>{cM(n,!0)},!1)),t}function S$e(){cf(2)}var x_={[X2]:S$e};function FP(t){return t===null||!oM(t)?!0:Du.isFrozen(t)}var gI="MapSet",BF="Patches",LG="ArrayMethods",$ie={};function vg(t){const e=$ie[t];return e||cf(0,t),e}var UG=t=>!!$ie[t],Y2,Gie=()=>Y2,I$e=(t,e)=>({drafts_:[],parent_:t,immer_:e,canAutoFreeze_:!0,unfinalizedDrafts_:0,handledSet_:new Set,processedForPatches_:new Set,mapSetPlugin_:UG(gI)?vg(gI):void 0,arrayMethodsPlugin_:UG(LG)?vg(LG):void 0});function QG(t,e){e&&(t.patchPlugin_=vg(BF),t.patches_=[],t.inversePatches_=[],t.patchListener_=e)}function TF(t){kF(t),t.drafts_.forEach(j$e),t.drafts_=null}function kF(t){t===Y2&&(Y2=t.parent_)}var VG=t=>Y2=I$e(Y2,t);function j$e(t){const e=t[Bc];e.type_===0||e.type_===1?e.revoke_():e.revoked_=!0}function HG(t,e){e.unfinalizedDrafts_=e.drafts_.length;const r=e.drafts_[0];if(t!==void 0&&t!==r){r[Bc].modified_&&(TF(e),cf(4)),Cf(t)&&(t=$G(e,t));const{patchPlugin_:a}=e;a&&a.generateReplacementPatches_(r[Bc].base_,t,e)}else t=$G(e,r);return P$e(e,t,!0),TF(e),e.patches_&&e.patchListener_(e.patches_,e.inversePatches_),t!==Vie?t:void 0}function $G(t,e){if(FP(e))return e;const r=e[Bc];if(!r)return xI(e,t.handledSet_,t);if(!OP(r,t))return e;if(!r.modified_)return r.base_;if(!r.finalized_){const{callbacks_:n}=r;if(n)for(;n.length>0;)n.pop()(t);zie(r,t)}return r.copy_}function P$e(t,e,r=!1){!t.parent_&&t.immer_.autoFreeze_&&t.canAutoFreeze_&&cM(e,r)}function Kie(t){t.finalized_=!0,t.scope_.unfinalizedDrafts_--}var OP=(t,e)=>t.scope_===e,B$e=[];function qie(t,e,r,n){const a=Uh(t),s=t.type_;if(n!==void 0&&jF(a,n,s)===e){pI(a,n,r,s);return}if(!t.draftLocations_){const l=t.draftLocations_=new Map;PP(a,(c,u)=>{if(wA(u)){const d=l.get(u)||[];d.push(c),l.set(u,d)}})}const o=t.draftLocations_.get(e)??B$e;for(const l of o)pI(a,l,r,s)}function T$e(t,e,r){t.callbacks_.push(function(a){var l;const s=e;if(!s||!OP(s,a))return;(l=a.mapSetPlugin_)==null||l.fixSetContents(s);const o=lM(s);qie(t,s.draft_??s,o,r),zie(s,a)})}function zie(t,e){var n;if(t.modified_&&!t.finalized_&&(t.type_===3||t.type_===1&&t.allIndicesReassigned_||(((n=t.assigned_)==null?void 0:n.size)??0)>0)){const{patchPlugin_:a}=e;if(a){const s=a.getPath(t);s&&a.generatePatches_(t,s,e)}Kie(t)}}function k$e(t,e,r){const{scope_:n}=t;if(wA(r)){const a=r[Bc];OP(a,n)&&a.callbacks_.push(function(){NE(t);const o=lM(a);qie(t,r,o,e)})}else Cf(r)&&t.callbacks_.push(function(){const s=Uh(t);t.type_===3?s.has(r)&&xI(r,n.handledSet_,n):jF(s,e,t.type_)===r&&n.drafts_.length>1&&(t.assigned_.get(e)??!1)===!0&&t.copy_&&xI(jF(t.copy_,e,t.type_),n.handledSet_,n)})}function xI(t,e,r){return!r.immer_.autoFreeze_&&r.unfinalizedDrafts_<1||wA(t)||e.has(t)||!Cf(t)||FP(t)||(e.add(t),PP(t,(n,a)=>{if(wA(a)){const s=a[Bc];if(OP(s,r)){const o=lM(s);pI(t,n,o,t.type_),Kie(s)}}else Cf(a)&&xI(a,e,r)})),t}function F$e(t,e){const r=BP(t),n={type_:r?1:0,scope_:e?e.scope_:Gie(),modified_:!1,finalized_:!1,assigned_:void 0,parent_:e,base_:t,draft_:null,copy_:null,revoke_:null,isManual_:!1,callbacks_:void 0};let a=n,s=vI;r&&(a=[n],s=J2);const{revoke:o,proxy:l}=Proxy.revocable(a,s);return n.draft_=l,n.revoke_=o,[l,n]}var vI={get(t,e){if(e===Bc)return t;let r=t.scope_.arrayMethodsPlugin_;const n=t.type_===1&&typeof e=="string";if(n&&r!=null&&r.isArrayOperationMethod(e))return r.createMethodInterceptor(t,e);const a=Uh(t);if(!MG(a,e,t.type_))return O$e(t,a,e);const s=a[e];if(t.finalized_||!Cf(s)||n&&t.operationMethod&&(r!=null&&r.isMutatingArrayMethod(t.operationMethod))&&E$e(e))return s;if(s===AB(t.base_,e)){NE(t);const o=t.type_===1?+e:e,l=OF(t.scope_,s,t,o);return t.copy_[o]=l}return s},has(t,e){return e in Uh(t)},ownKeys(t){return Reflect.ownKeys(Uh(t))},set(t,e,r){const n=Wie(Uh(t),e);if(n!=null&&n.set)return n.set.call(t.draft_,r),!0;if(!t.modified_){const a=AB(Uh(t),e),s=a==null?void 0:a[Bc];if(s&&s.base_===r)return t.copy_[e]=r,t.assigned_.set(e,!1),!0;if(_$e(r,a)&&(r!==void 0||MG(t.base_,e,t.type_)))return!0;NE(t),FF(t)}return t.copy_[e]===r&&(r!==void 0||e in t.copy_)||Number.isNaN(r)&&Number.isNaN(t.copy_[e])||(t.copy_[e]=r,t.assigned_.set(e,!0),k$e(t,e,r)),!0},deleteProperty(t,e){return NE(t),AB(t.base_,e)!==void 0||e in t.base_?(t.assigned_.set(e,!1),FF(t)):t.assigned_.delete(e),t.copy_&&delete t.copy_[e],!0},getOwnPropertyDescriptor(t,e){const r=Uh(t),n=Reflect.getOwnPropertyDescriptor(r,e);return n&&{[wE]:!0,[IF]:t.type_!==1||e!=="length",[mI]:n[mI],[X2]:r[e]}},defineProperty(){cf(11)},getPrototypeOf(t){return Gv(t.base_)},setPrototypeOf(){cf(12)}},J2={};for(let t in vI){let e=vI[t];J2[t]=function(){const r=arguments;return r[0]=r[0][0],e.apply(this,r)}}J2.deleteProperty=function(t,e){return J2.set.call(this,t,e,void 0)};J2.set=function(t,e,r){return vI.set.call(this,t[0],e,r,t[0])};function AB(t,e){const r=t[Bc];return(r?Uh(r):t)[e]}function O$e(t,e,r){var a;const n=Wie(e,r);return n?X2 in n?n[X2]:(a=n.get)==null?void 0:a.call(t.draft_):void 0}function Wie(t,e){if(!(e in t))return;let r=Gv(t);for(;r;){const n=Object.getOwnPropertyDescriptor(r,e);if(n)return n;r=Gv(r)}}function FF(t){t.modified_||(t.modified_=!0,t.parent_&&FF(t.parent_))}function NE(t){t.copy_||(t.assigned_=new Map,t.copy_=PF(t.base_,t.scope_.immer_.useStrictShallowCopy_))}var D$e=class{constructor(e){this.autoFreeze_=!0,this.useStrictShallowCopy_=!1,this.useStrictIteration_=!1,this.produce=(r,n,a)=>{if(Fx(r)&&!Fx(n)){const o=n;n=r;const l=this;return function(u=o,...d){return l.produce(u,f=>n.call(this,f,...d))}}Fx(n)||cf(6),a!==void 0&&!Fx(a)&&cf(7);let s;if(Cf(r)){const o=VG(this),l=OF(o,r,void 0);let c=!0;try{s=n(l),c=!1}finally{c?TF(o):kF(o)}return QG(o,a),HG(s,o)}else if(!r||!oM(r)){if(s=n(r),s===void 0&&(s=r),s===Vie&&(s=void 0),this.autoFreeze_&&cM(s,!0),a){const o=[],l=[];vg(BF).generateReplacementPatches_(r,s,{patches_:o,inversePatches_:l}),a(o,l)}return s}else cf(1,r)},this.produceWithPatches=(r,n)=>{if(Fx(r))return(l,...c)=>this.produceWithPatches(l,u=>r(u,...c));let a,s;return[this.produce(r,n,(l,c)=>{a=l,s=c}),a,s]},hB(e==null?void 0:e.autoFreeze)&&this.setAutoFreeze(e.autoFreeze),hB(e==null?void 0:e.useStrictShallowCopy)&&this.setUseStrictShallowCopy(e.useStrictShallowCopy),hB(e==null?void 0:e.useStrictIteration)&&this.setUseStrictIteration(e.useStrictIteration)}createDraft(e){Cf(e)||cf(8),wA(e)&&(e=vf(e));const r=VG(this),n=OF(r,e,void 0);return n[Bc].isManual_=!0,kF(r),n}finishDraft(e,r){const n=e&&e[Bc];(!n||!n.isManual_)&&cf(9);const{scope_:a}=n;return QG(a,r),HG(void 0,a)}setAutoFreeze(e){this.autoFreeze_=e}setUseStrictShallowCopy(e){this.useStrictShallowCopy_=e}setUseStrictIteration(e){this.useStrictIteration_=e}shouldUseStrictIteration(){return this.useStrictIteration_}applyPatches(e,r){let n;for(n=r.length-1;n>=0;n--){const s=r[n];if(s.path.length===0&&s.op==="replace"){e=s.value;break}}n>-1&&(r=r.slice(n+1));const a=vg(BF).applyPatches_;return wA(e)?a(e,r):this.produce(e,s=>a(s,r))}};function OF(t,e,r,n){const[a,s]=TP(e)?vg(gI).proxyMap_(e,r):kP(e)?vg(gI).proxySet_(e,r):F$e(e,r);return((r==null?void 0:r.scope_)??Gie()).drafts_.push(a),s.callbacks_=(r==null?void 0:r.callbacks_)??[],s.key_=n,r&&n!==void 0?T$e(r,s,n):s.callbacks_.push(function(c){var d;(d=c.mapSetPlugin_)==null||d.fixSetContents(s);const{patchPlugin_:u}=c;s.modified_&&u&&u.generatePatches_(s,[],c)}),a}function vf(t){return wA(t)||cf(10,t),Xie(t)}function Xie(t){if(!Cf(t)||FP(t))return t;const e=t[Bc];let r,n=!0;if(e){if(!e.modified_)return e.base_;e.finalized_=!0,r=PF(t,e.scope_.immer_.useStrictShallowCopy_),n=e.scope_.immer_.shouldUseStrictIteration()}else r=PF(t,!0);return PP(r,(a,s)=>{pI(r,a,Xie(s))},n),e&&(e.finalized_=!1),r}var R$e=new D$e,Yie=R$e.produce;function Jie(t){return({dispatch:r,getState:n})=>a=>s=>typeof s=="function"?s(r,n,t):a(s)}var M$e=Jie(),L$e=Jie,U$e=typeof window<"u"&&window.__REDUX_DEVTOOLS_EXTENSION_COMPOSE__?window.__REDUX_DEVTOOLS_EXTENSION_COMPOSE__:function(){if(arguments.length!==0)return typeof arguments[0]=="object"?hI:hI.apply(null,arguments)};function Rd(t,e){function r(...n){if(e){let a=e(...n);if(!a)throw new Error(Lu(0));return{type:t,payload:a.payload,..."meta"in a&&{meta:a.meta},..."error"in a&&{error:a.error}}}return{type:t,payload:n[0]}}return r.toString=()=>`${t}`,r.type=t,r.match=n=>Qie(n)&&n.type===t,r}var Zie=class tb extends Array{constructor(...e){super(...e),Object.setPrototypeOf(this,tb.prototype)}static get[Symbol.species](){return tb}concat(...e){return super.concat.apply(this,e)}prepend(...e){return e.length===1&&Array.isArray(e[0])?new tb(...e[0].concat(this)):new tb(...e.concat(this))}};function GG(t){return Cf(t)?Yie(t,()=>{}):t}function v_(t,e,r){return t.has(e)?t.get(e):t.set(e,r(e)).get(e)}function Q$e(t){return typeof t=="boolean"}var V$e=()=>function(e){const{thunk:r=!0,immutableCheck:n=!0,serializableCheck:a=!0,actionCreatorCheck:s=!0}=e??{};let o=new Zie;return r&&(Q$e(r)?o.push(M$e):o.push(L$e(r.extraArgument))),o},eoe="RTK_autoBatch",Ls=()=>t=>({payload:t,meta:{[eoe]:!0}}),KG=t=>e=>{setTimeout(e,t)},toe=(t={type:"raf"})=>e=>(...r)=>{const n=e(...r);let a=!0,s=!1,o=!1;const l=new Set,c=t.type==="tick"?queueMicrotask:t.type==="raf"?typeof window<"u"&&window.requestAnimationFrame?window.requestAnimationFrame:KG(10):t.type==="callback"?t.queueNotification:KG(t.timeout),u=()=>{o=!1,s&&(s=!1,l.forEach(d=>d()))};return Object.assign({},n,{subscribe(d){const f=()=>a&&d(),A=n.subscribe(f);return l.add(d),()=>{A(),l.delete(d)}},dispatch(d){var f;try{return a=!((f=d==null?void 0:d.meta)!=null&&f[eoe]),s=!a,s&&(o||(o=!0,c(u))),n.dispatch(d)}finally{a=!0}}})},H$e=t=>function(r){const{autoBatch:n=!0}=r??{};let a=new Zie(t);return n&&a.push(toe(typeof n=="object"?n:void 0)),a};function $$e(t){const e=V$e(),{reducer:r=void 0,middleware:n,devTools:a=!0,preloadedState:s=void 0,enhancers:o=void 0}=t||{};let l;if(typeof r=="function")l=r;else if(iM(r))l=Uie(r);else throw new Error(Lu(1));let c;typeof n=="function"?c=n(e):c=e();let u=hI;a&&(u=U$e({trace:!1,...typeof a=="object"&&a}));const d=N$e(...c),f=H$e(d);let A=typeof o=="function"?o(f):f();const h=u(...A);return Lie(l,s,h)}function roe(t){const e={},r=[];let n;const a={addCase(s,o){const l=typeof s=="string"?s:s.type;if(!l)throw new Error(Lu(28));if(l in e)throw new Error(Lu(29));return e[l]=o,a},addAsyncThunk(s,o){return o.pending&&(e[s.pending.type]=o.pending),o.rejected&&(e[s.rejected.type]=o.rejected),o.fulfilled&&(e[s.fulfilled.type]=o.fulfilled),o.settled&&r.push({matcher:s.settled,reducer:o.settled}),a},addMatcher(s,o){return r.push({matcher:s,reducer:o}),a},addDefaultCase(s){return n=s,a}};return t(a),[e,r,n]}function G$e(t){return typeof t=="function"}function K$e(t,e){let[r,n,a]=roe(e),s;if(G$e(t))s=()=>GG(t());else{const l=GG(t);s=()=>l}function o(l=s(),c){let u=[r[c.type],...n.filter(({matcher:d})=>d(c)).map(({reducer:d})=>d)];return u.filter(d=>!!d).length===0&&(u=[a]),u.reduce((d,f)=>{if(f)if(wA(d)){const h=f(d,c);return h===void 0?d:h}else{if(Cf(d))return Yie(d,A=>f(A,c));{const A=f(d,c);if(A===void 0){if(d===null)return d;throw Error("A case reducer on a non-draftable value must not return undefined")}return A}}return d},l)}return o.getInitialState=s,o}var q$e="ModuleSymbhasOwnPr-0123456789ABCDEFGHNRVfgctiUvz_KqYTJkLxpZXIjQW",z$e=(t=21)=>{let e="",r=t;for(;r--;)e+=q$e[Math.random()*64|0];return e},W$e=Symbol.for("rtk-slice-createasyncthunk");function X$e(t,e){return`${t}/${e}`}function Y$e({creators:t}={}){var r;const e=(r=t==null?void 0:t.asyncThunk)==null?void 0:r[W$e];return function(a){const{name:s,reducerPath:o=s}=a;if(!s)throw new Error(Lu(11));const l=(typeof a.reducers=="function"?a.reducers(Z$e()):a.reducers)||{},c=Object.keys(l),u={sliceCaseReducersByName:{},sliceCaseReducersByType:{},actionCreators:{},sliceMatchers:[]},d={addCase(w,j){const I=typeof w=="string"?w:w.type;if(!I)throw new Error(Lu(12));if(I in u.sliceCaseReducersByType)throw new Error(Lu(13));return u.sliceCaseReducersByType[I]=j,d},addMatcher(w,j){return u.sliceMatchers.push({matcher:w,reducer:j}),d},exposeAction(w,j){return u.actionCreators[w]=j,d},exposeCaseReducer(w,j){return u.sliceCaseReducersByName[w]=j,d}};c.forEach(w=>{const j=l[w],I={reducerName:w,type:X$e(s,w),createNotation:typeof a.reducers=="function"};tGe(j)?nGe(I,j,d,e):eGe(I,j,d)});function f(){const[w={},j=[],I=void 0]=typeof a.extraReducers=="function"?roe(a.extraReducers):[a.extraReducers],_={...w,...u.sliceCaseReducersByType};return K$e(a.initialState,S=>{for(let E in _)S.addCase(E,_[E]);for(let E of u.sliceMatchers)S.addMatcher(E.matcher,E.reducer);for(let E of j)S.addMatcher(E.matcher,E.reducer);I&&S.addDefaultCase(I)})}const A=w=>w,h=new Map,m=new WeakMap;let p;function x(w,j){return p||(p=f()),p(w,j)}function v(){return p||(p=f()),p.getInitialState()}function y(w,j=!1){function I(S){let E=S[w];return typeof E>"u"&&j&&(E=v_(m,I,v)),E}function _(S=A){const E=v_(h,j,()=>new WeakMap);return v_(E,S,()=>{const T={};for(const[k,B]of Object.entries(a.selectors??{}))T[k]=J$e(B,S,()=>v_(m,S,v),j);return T})}return{reducerPath:w,getSelectors:_,get selectors(){return _(I)},selectSlice:I}}const b={name:s,reducer:x,actions:u.actionCreators,caseReducers:u.sliceCaseReducersByName,getInitialState:v,...y(o),injectInto(w,{reducerPath:j,...I}={}){const _=j??o;return w.inject({reducerPath:_,reducer:x},I),{...b,...y(_,!0)}}};return b}}function J$e(t,e,r,n){function a(s,...o){let l=e(s);return typeof l>"u"&&n&&(l=r()),t(l,...o)}return a.unwrapped=t,a}var uu=Y$e();function Z$e(){function t(e,r){return{_reducerDefinitionType:"asyncThunk",payloadCreator:e,...r}}return t.withTypes=()=>t,{reducer(e){return Object.assign({[e.name](...r){return e(...r)}}[e.name],{_reducerDefinitionType:"reducer"})},preparedReducer(e,r){return{_reducerDefinitionType:"reducerWithPrepare",prepare:e,reducer:r}},asyncThunk:t}}function eGe({type:t,reducerName:e,createNotation:r},n,a){let s,o;if("reducer"in n){if(r&&!rGe(n))throw new Error(Lu(17));s=n.reducer,o=n.prepare}else s=n;a.addCase(t,s).exposeCaseReducer(e,s).exposeAction(e,o?Rd(t,o):Rd(t))}function tGe(t){return t._reducerDefinitionType==="asyncThunk"}function rGe(t){return t._reducerDefinitionType==="reducerWithPrepare"}function nGe({type:t,reducerName:e},r,n,a){if(!a)throw new Error(Lu(18));const{payloadCreator:s,fulfilled:o,pending:l,rejected:c,settled:u,options:d}=r,f=a(t,s,d);n.exposeAction(e,f),o&&n.addCase(f.fulfilled,o),l&&n.addCase(f.pending,l),c&&n.addCase(f.rejected,c),u&&n.addMatcher(f.settled,u),n.exposeCaseReducer(e,{fulfilled:o||y_,pending:l||y_,rejected:c||y_,settled:u||y_})}function y_(){}var aGe="task",noe="listener",aoe="completed",uM="cancelled",sGe=`task-${uM}`,iGe=`task-${aoe}`,DF=`${noe}-${uM}`,oGe=`${noe}-${aoe}`,DP=class{constructor(t){Cr(this,"name","TaskAbortError");Cr(this,"message");this.code=t,this.message=`${aGe} ${uM} (reason: ${t})`}},dM=(t,e)=>{if(typeof t!="function")throw new TypeError(Lu(32))},yI=()=>{},soe=(t,e=yI)=>(t.catch(e),t),ioe=(t,e)=>(t.addEventListener("abort",e,{once:!0}),()=>t.removeEventListener("abort",e)),$p=t=>{if(t.aborted)throw new DP(t.reason)};function ooe(t,e){let r=yI;return new Promise((n,a)=>{const s=()=>a(new DP(t.reason));if(t.aborted){s();return}r=ioe(t,s),e.finally(()=>r()).then(n,a)}).finally(()=>{r=yI})}var lGe=async(t,e)=>{try{return await Promise.resolve(),{status:"ok",value:await t()}}catch(r){return{status:r instanceof DP?"cancelled":"rejected",error:r}}finally{e==null||e()}},bI=t=>e=>soe(ooe(t,e).then(r=>($p(t),r))),loe=t=>{const e=bI(t);return r=>e(new Promise(n=>setTimeout(n,r)))},{assign:vv}=Object,qG={},RP="listenerMiddleware",cGe=(t,e)=>{const r=n=>ioe(t,()=>n.abort(t.reason));return(n,a)=>{dM(n);const s=new AbortController;r(s);const o=lGe(async()=>{$p(t),$p(s.signal);const l=await n({pause:bI(s.signal),delay:loe(s.signal),signal:s.signal});return $p(s.signal),l},()=>s.abort(iGe));return a!=null&&a.autoJoin&&e.push(o.catch(yI)),{result:bI(t)(o),cancel(){s.abort(sGe)}}}},uGe=(t,e)=>{const r=async(n,a)=>{$p(e);let s=()=>{};const l=[new Promise((c,u)=>{let d=t({predicate:n,effect:(f,A)=>{A.unsubscribe(),c([f,A.getState(),A.getOriginalState()])}});s=()=>{d(),u()}})];a!=null&&l.push(new Promise(c=>setTimeout(c,a,null)));try{const c=await ooe(e,Promise.race(l));return $p(e),c}finally{s()}};return(n,a)=>soe(r(n,a))},coe=t=>{let{type:e,actionCreator:r,matcher:n,predicate:a,effect:s}=t;if(e)a=Rd(e).match;else if(r)e=r.type,a=r.match;else if(n)a=n;else if(!a)throw new Error(Lu(21));return dM(s),{predicate:a,type:e,effect:s}},uoe=vv(t=>{const{type:e,predicate:r,effect:n}=coe(t);return{id:z$e(),effect:n,type:e,predicate:r,pending:new Set,unsubscribe:()=>{throw new Error(Lu(22))}}},{withTypes:()=>uoe}),zG=(t,e)=>{const{type:r,effect:n,predicate:a}=coe(e);return Array.from(t.values()).find(s=>(typeof r=="string"?s.type===r:s.predicate===a)&&s.effect===n)},RF=t=>{t.pending.forEach(e=>{e.abort(DF)})},dGe=(t,e)=>()=>{for(const r of e.keys())RF(r);t.clear()},WG=(t,e,r)=>{try{t(e,r)}catch(n){setTimeout(()=>{throw n},0)}},doe=vv(Rd(`${RP}/add`),{withTypes:()=>doe}),fGe=Rd(`${RP}/removeAll`),foe=vv(Rd(`${RP}/remove`),{withTypes:()=>foe}),hGe=(...t)=>{console.error(`${RP}/error`,...t)},Yw=(t={})=>{const e=new Map,r=new Map,n=h=>{const m=r.get(h)??0;r.set(h,m+1)},a=h=>{const m=r.get(h)??1;m===1?r.delete(h):r.set(h,m-1)},{extra:s,onError:o=hGe}=t;dM(o);const l=h=>(h.unsubscribe=()=>e.delete(h.id),e.set(h.id,h),m=>{h.unsubscribe(),m!=null&&m.cancelActive&&RF(h)}),c=h=>{const m=zG(e,h)??uoe(h);return l(m)};vv(c,{withTypes:()=>c});const u=h=>{const m=zG(e,h);return m&&(m.unsubscribe(),h.cancelActive&&RF(m)),!!m};vv(u,{withTypes:()=>u});const d=async(h,m,p,x)=>{const v=new AbortController,y=uGe(c,v.signal),b=[];try{h.pending.add(v),n(h),await Promise.resolve(h.effect(m,vv({},p,{getOriginalState:x,condition:(w,j)=>y(w,j).then(Boolean),take:y,delay:loe(v.signal),pause:bI(v.signal),extra:s,signal:v.signal,fork:cGe(v.signal,b),unsubscribe:h.unsubscribe,subscribe:()=>{e.set(h.id,h)},cancelActiveListeners:()=>{h.pending.forEach((w,j,I)=>{w!==v&&(w.abort(DF),I.delete(w))})},cancel:()=>{v.abort(DF),h.pending.delete(v)},throwIfCancelled:()=>{$p(v.signal)}})))}catch(w){w instanceof DP||WG(o,w,{raisedBy:"effect"})}finally{await Promise.all(b),v.abort(oGe),a(h),h.pending.delete(v)}},f=dGe(e,r);return{middleware:h=>m=>p=>{if(!Qie(p))return m(p);if(doe.match(p))return c(p.payload);if(fGe.match(p)){f();return}if(foe.match(p))return u(p.payload);let x=h.getState();const v=()=>{if(x===qG)throw new Error(Lu(23));return x};let y;try{if(y=m(p),e.size>0){const b=h.getState(),w=Array.from(e.values());for(const j of w){let I=!1;try{I=j.predicate(p,b,x)}catch(_){I=!1,WG(o,_,{raisedBy:"predicate"})}I&&d(j,p,h,v)}}}finally{x=qG}return y},startListening:c,stopListening:u,clearListeners:f}};function Lu(t){return`Minified Redux Toolkit error #${t}; visit https://redux-toolkit.js.org/Errors?code=${t} for the full message or use the non-minified dev environment for full errors. `}var AGe={layoutType:"horizontal",width:0,height:0,margin:{top:5,right:5,bottom:5,left:5},scale:1},hoe=uu({name:"chartLayout",initialState:AGe,reducers:{setLayout(t,e){t.layoutType=e.payload},setChartSize(t,e){t.width=e.payload.width,t.height=e.payload.height},setMargin(t,e){var r,n,a,s;t.margin.top=(r=e.payload.top)!==null&&r!==void 0?r:0,t.margin.right=(n=e.payload.right)!==null&&n!==void 0?n:0,t.margin.bottom=(a=e.payload.bottom)!==null&&a!==void 0?a:0,t.margin.left=(s=e.payload.left)!==null&&s!==void 0?s:0},setScale(t,e){t.scale=e.payload}}}),{setMargin:mGe,setLayout:pGe,setChartSize:gGe,setScale:xGe}=hoe.actions,vGe=hoe.reducer;function Aoe(t,e,r){return Array.isArray(t)&&t&&e+r!==0?t.slice(e,r+1):t}function hi(t){return Number.isFinite(t)}function Pm(t){return typeof t=="number"&&t>0&&Number.isFinite(t)}function XG(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter(function(a){return Object.getOwnPropertyDescriptor(t,a).enumerable})),r.push.apply(r,n)}return r}function ev(t){for(var e=1;e<arguments.length;e++){var r=arguments[e]!=null?arguments[e]:{};e%2?XG(Object(r),!0).forEach(function(n){yGe(t,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):XG(Object(r)).forEach(function(n){Object.defineProperty(t,n,Object.getOwnPropertyDescriptor(r,n))})}return t}function yGe(t,e,r){return(e=bGe(e))in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}function bGe(t){var e=wGe(t,"string");return typeof e=="symbol"?e:e+""}function wGe(t,e){if(typeof t!="object"||!t)return t;var r=t[Symbol.toPrimitive];if(r!==void 0){var n=r.call(t,e);if(typeof n!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}function ks(t,e,r){return nl(t)||nl(e)?r:uh(e)?xg(t,e,r):typeof e=="function"?e(t):r}var NGe=(t,e,r)=>{if(e&&r){var{width:n,height:a}=r,{align:s,verticalAlign:o,layout:l}=e;if((l==="vertical"||l==="horizontal"&&o==="middle")&&s!=="center"&&Cn(t[s]))return ev(ev({},t),{},{[s]:t[s]+(n||0)});if((l==="horizontal"||l==="vertical"&&s==="center")&&o!=="middle"&&Cn(t[o]))return ev(ev({},t),{},{[o]:t[o]+(a||0)})}return t},Vg=(t,e)=>t==="horizontal"&&e==="xAxis"||t==="vertical"&&e==="yAxis"||t==="centric"&&e==="angleAxis"||t==="radial"&&e==="radiusAxis",YG=1e-4,CGe=t=>{var e=t.domain();if(!(!e||e.length<=2)){var r=e.length,n=t.range(),a=Math.min(n[0],n[1])-YG,s=Math.max(n[0],n[1])+YG,o=t(e[0]),l=t(e[r-1]);(o<a||o>s||l<a||l>s)&&t.domain([e[0],e[r-1]])}},_Ge=(t,e)=>{if(!e||e.length!==2||!Cn(e[0])||!Cn(e[1]))return t;var r=Math.min(e[0],e[1]),n=Math.max(e[0],e[1]),a=[t[0],t[1]];return(!Cn(t[0])||t[0]<r)&&(a[0]=r),(!Cn(t[1])||t[1]>n)&&(a[1]=n),a[0]>n&&(a[0]=n),a[1]<r&&(a[1]=r),a},EGe=t=>{var e,r=t.length;if(!(r<=0)){var n=(e=t[0])===null||e===void 0?void 0:e.length;if(!(n==null||n<=0))for(var a=0;a<n;++a)for(var s=0,o=0,l=0;l<r;++l){var c=t[l],u=c==null?void 0:c[a];if(u!=null){var d=u[1],f=u[0],A=ch(d)?f:d;A>=0?(u[0]=s,u[1]=s+A,s=d):(u[0]=o,u[1]=o+A,o=d)}}}},SGe=t=>{var e,r=t.length;if(!(r<=0)){var n=(e=t[0])===null||e===void 0?void 0:e.length;if(!(n==null||n<=0))for(var a=0;a<n;++a)for(var s=0,o=0;o<r;++o){var l=t[o],c=l==null?void 0:l[a];if(c!=null){var u=ch(c[1])?c[0]:c[1];u>=0?(c[0]=s,c[1]=s+u,s=c[1]):(c[0]=0,c[1]=0)}}}},IGe={sign:EGe,expand:aHe,none:gg,silhouette:sHe,wiggle:iHe,positive:SGe},jGe=(t,e,r)=>{var n,a=(n=IGe[r])!==null&&n!==void 0?n:gg,s=nHe().keys(e).value((l,c)=>Number(ks(l,c,0))).order(EF).offset(a),o=s(t);return o.forEach((l,c)=>{l.forEach((u,d)=>{var f=ks(t[d],e[c],0);Array.isArray(f)&&f.length===2&&Cn(f[0])&&Cn(f[1])&&(u[0]=f[0],u[1]=f[1])})}),o};function PGe(t){return t==null?void 0:String(t)}var JG=t=>{var{axis:e,ticks:r,offset:n,bandSize:a,entry:s,index:o}=t;if(e.type==="category")return r[o]?r[o].coordinate+n:null;var l=ks(s,e.dataKey,e.scale.domain()[o]);return nl(l)?null:e.scale(l)-a/2+n},BGe=t=>{var{numericAxis:e}=t,r=e.scale.domain();if(e.type==="number"){var n=Math.min(r[0],r[1]),a=Math.max(r[0],r[1]);return n<=0&&a>=0?0:a<0?a:n}return r[0]},TGe=t=>{var e=t.flat(2).filter(Cn);return[Math.min(...e),Math.max(...e)]},kGe=t=>[t[0]===1/0?0:t[0],t[1]===-1/0?0:t[1]],FGe=(t,e,r)=>{if(t!=null)return kGe(Object.keys(t).reduce((n,a)=>{var s=t[a];if(!s)return n;var{stackedData:o}=s,l=o.reduce((c,u)=>{var d=Aoe(u,e,r),f=TGe(d);return!hi(f[0])||!hi(f[1])?c:[Math.min(c[0],f[0]),Math.max(c[1],f[1])]},[1/0,-1/0]);return[Math.min(l[0],n[0]),Math.max(l[1],n[1])]},[1/0,-1/0]))},ZG=/^dataMin[\s]*-[\s]*([0-9]+([.]{1}[0-9]+){0,1})$/,eK=/^dataMax[\s]*\+[\s]*([0-9]+([.]{1}[0-9]+){0,1})$/,wI=(t,e,r)=>{if(t&&t.scale&&t.scale.bandwidth){var n=t.scale.bandwidth();if(!r||n>0)return n}if(t&&e&&e.length>=2){for(var a=IP(e,d=>d.coordinate),s=1/0,o=1,l=a.length;o<l;o++){var c=a[o],u=a[o-1];s=Math.min(((c==null?void 0:c.coordinate)||0)-((u==null?void 0:u.coordinate)||0),s)}return s===1/0?0:s}return r?void 0:0};function tK(t){var{tooltipEntrySettings:e,dataKey:r,payload:n,value:a,name:s}=t;return ev(ev({},e),{},{dataKey:r,payload:n,value:a,name:s})}function MP(t,e){if(t)return String(t);if(typeof e=="string")return e}var OGe=(t,e)=>{if(e==="horizontal")return t.chartX;if(e==="vertical")return t.chartY},DGe=(t,e)=>e==="centric"?t.angle:t.radius,MA=t=>t.layout.width,LA=t=>t.layout.height,RGe=t=>t.layout.scale,moe=t=>t.layout.margin,LP=Kt(t=>t.cartesianAxis.xAxis,t=>Object.values(t)),UP=Kt(t=>t.cartesianAxis.yAxis,t=>Object.values(t)),poe="data-recharts-item-index",goe="data-recharts-item-id",Jw=60;function rK(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter(function(a){return Object.getOwnPropertyDescriptor(t,a).enumerable})),r.push.apply(r,n)}return r}function b_(t){for(var e=1;e<arguments.length;e++){var r=arguments[e]!=null?arguments[e]:{};e%2?rK(Object(r),!0).forEach(function(n){MGe(t,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):rK(Object(r)).forEach(function(n){Object.defineProperty(t,n,Object.getOwnPropertyDescriptor(r,n))})}return t}function MGe(t,e,r){return(e=LGe(e))in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}function LGe(t){var e=UGe(t,"string");return typeof e=="symbol"?e:e+""}function UGe(t,e){if(typeof t!="object"||!t)return t;var r=t[Symbol.toPrimitive];if(r!==void 0){var n=r.call(t,e);if(typeof n!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}var QGe=t=>t.brush.height;function VGe(t){var e=UP(t);return e.reduce((r,n)=>{if(n.orientation==="left"&&!n.mirror&&!n.hide){var a=typeof n.width=="number"?n.width:Jw;return r+a}return r},0)}function HGe(t){var e=UP(t);return e.reduce((r,n)=>{if(n.orientation==="right"&&!n.mirror&&!n.hide){var a=typeof n.width=="number"?n.width:Jw;return r+a}return r},0)}function $Ge(t){var e=LP(t);return e.reduce((r,n)=>n.orientation==="top"&&!n.mirror&&!n.hide?r+n.height:r,0)}function GGe(t){var e=LP(t);return e.reduce((r,n)=>n.orientation==="bottom"&&!n.mirror&&!n.hide?r+n.height:r,0)}var Fo=Kt([MA,LA,moe,QGe,VGe,HGe,$Ge,GGe,Rie,p$e],(t,e,r,n,a,s,o,l,c,u)=>{var d={left:(r.left||0)+a,right:(r.right||0)+s},f={top:(r.top||0)+o,bottom:(r.bottom||0)+l},A=b_(b_({},f),d),h=A.bottom;A.bottom+=n,A=NGe(A,c,u);var m=t-A.left-A.right,p=e-A.top-A.bottom;return b_(b_({brushBottom:h},A),{},{width:Math.max(m,0),height:Math.max(p,0)})}),KGe=Kt(Fo,t=>({x:t.left,y:t.top,width:t.width,height:t.height})),fM=Kt(MA,LA,(t,e)=>({x:0,y:0,width:t,height:e})),qGe=g.createContext(null),qu=()=>g.useContext(qGe)!=null,QP=t=>t.brush,VP=Kt([QP,Fo,moe],(t,e,r)=>({height:t.height,x:Cn(t.x)?t.x:e.left,y:Cn(t.y)?t.y:e.top+e.height+e.brushBottom-((r==null?void 0:r.bottom)||0),width:Cn(t.width)?t.width:e.width})),xoe={},voe={},yoe={};(function(t){Object.defineProperty(t,Symbol.toStringTag,{value:"Module"});function e(r,n,{signal:a,edges:s}={}){let o,l=null;const c=s!=null&&s.includes("leading"),u=s==null||s.includes("trailing"),d=()=>{l!==null&&(r.apply(o,l),o=void 0,l=null)},f=()=>{u&&d(),p()};let A=null;const h=()=>{A!=null&&clearTimeout(A),A=setTimeout(()=>{A=null,f()},n)},m=()=>{A!==null&&(clearTimeout(A),A=null)},p=()=>{m(),o=void 0,l=null},x=()=>{d()},v=function(...y){if(a!=null&&a.aborted)return;o=this,l=y;const b=A==null;h(),c&&b&&d()};return v.schedule=h,v.cancel=p,v.flush=x,a==null||a.addEventListener("abort",p,{once:!0}),v}t.debounce=e})(yoe);(function(t){Object.defineProperty(t,Symbol.toStringTag,{value:"Module"});const e=yoe;function r(n,a=0,s={}){typeof s!="object"&&(s={});const{leading:o=!1,trailing:l=!0,maxWait:c}=s,u=Array(2);o&&(u[0]="leading"),l&&(u[1]="trailing");let d,f=null;const A=e.debounce(function(...p){d=n.apply(this,p),f=null},a,{edges:u}),h=function(...p){return c!=null&&(f===null&&(f=Date.now()),Date.now()-f>=c)?(d=n.apply(this,p),f=Date.now(),A.cancel(),A.schedule(),d):(A.apply(this,p),d)},m=()=>(A.flush(),d);return h.cancel=A.cancel,h.flush=m,h}t.debounce=r})(voe);(function(t){Object.defineProperty(t,Symbol.toStringTag,{value:"Module"});const e=voe;function r(n,a=0,s={}){const{leading:o=!0,trailing:l=!0}=s;return e.debounce(n,a,{leading:o,maxWait:a,trailing:l})}t.throttle=r})(xoe);var zGe=xoe.throttle;const WGe=IA(zGe);var nK=function(e,r){for(var n=arguments.length,a=new Array(n>2?n-2:0),s=2;s<n;s++)a[s-2]=arguments[s];if(typeof console<"u"&&console.warn&&(r===void 0&&console.warn("LogUtils requires an error message argument"),!e))if(r===void 0)console.warn("Minified exception occurred; use the non-minified dev environment for the full error message and additional helpful warnings.");else{var o=0;console.warn(r.replace(/%s/g,()=>a[o++]))}},boe=(t,e,r)=>{var{width:n="100%",height:a="100%",aspect:s,maxHeight:o}=r,l=bA(n)?t:Number(n),c=bA(a)?e:Number(a);return s&&s>0&&(l?c=l/s:c&&(l=c*s),o&&c!=null&&c>o&&(c=o)),{calculatedWidth:l,calculatedHeight:c}},XGe={width:0,height:0,overflow:"visible"},YGe={width:0,overflowX:"visible"},JGe={height:0,overflowY:"visible"},ZGe={},eKe=t=>{var{width:e,height:r}=t,n=bA(e),a=bA(r);return n&&a?XGe:n?YGe:a?JGe:ZGe};function tKe(t){var{width:e,height:r,aspect:n}=t,a=e,s=r;return a===void 0&&s===void 0?(a="100%",s="100%"):a===void 0?a=n&&n>0?void 0:"100%":s===void 0&&(s=n&&n>0?void 0:"100%"),{width:a,height:s}}function MF(){return MF=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var r=arguments[e];for(var n in r)({}).hasOwnProperty.call(r,n)&&(t[n]=r[n])}return t},MF.apply(null,arguments)}function aK(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter(function(a){return Object.getOwnPropertyDescriptor(t,a).enumerable})),r.push.apply(r,n)}return r}function sK(t){for(var e=1;e<arguments.length;e++){var r=arguments[e]!=null?arguments[e]:{};e%2?aK(Object(r),!0).forEach(function(n){rKe(t,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):aK(Object(r)).forEach(function(n){Object.defineProperty(t,n,Object.getOwnPropertyDescriptor(r,n))})}return t}function rKe(t,e,r){return(e=nKe(e))in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}function nKe(t){var e=aKe(t,"string");return typeof e=="symbol"?e:e+""}function aKe(t,e){if(typeof t!="object"||!t)return t;var r=t[Symbol.toPrimitive];if(r!==void 0){var n=r.call(t,e);if(typeof n!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}var woe=g.createContext({width:-1,height:-1});function sKe(t){return Pm(t.width)&&Pm(t.height)}function Noe(t){var{children:e,width:r,height:n}=t,a=g.useMemo(()=>({width:r,height:n}),[r,n]);return sKe(a)?g.createElement(woe.Provider,{value:a},e):null}var hM=()=>g.useContext(woe),iKe=g.forwardRef((t,e)=>{var{aspect:r,initialDimension:n={width:-1,height:-1},width:a,height:s,minWidth:o=0,minHeight:l,maxHeight:c,children:u,debounce:d=0,id:f,className:A,onResize:h,style:m={}}=t,p=g.useRef(null),x=g.useRef();x.current=h,g.useImperativeHandle(e,()=>p.current);var[v,y]=g.useState({containerWidth:n.width,containerHeight:n.height}),b=g.useCallback((S,E)=>{y(T=>{var k=Math.round(S),B=Math.round(E);return T.containerWidth===k&&T.containerHeight===B?T:{containerWidth:k,containerHeight:B}})},[]);g.useEffect(()=>{if(p.current==null||typeof ResizeObserver>"u")return zw;var S=B=>{var D,{width:X,height:me}=B[0].contentRect;b(X,me),(D=x.current)===null||D===void 0||D.call(x,X,me)};d>0&&(S=WGe(S,d,{trailing:!0,leading:!1}));var E=new ResizeObserver(S),{width:T,height:k}=p.current.getBoundingClientRect();return b(T,k),E.observe(p.current),()=>{E.disconnect()}},[b,d]);var{containerWidth:w,containerHeight:j}=v;nK(!r||r>0,"The aspect(%s) must be greater than zero.",r);var{calculatedWidth:I,calculatedHeight:_}=boe(w,j,{width:a,height:s,aspect:r,maxHeight:c});return nK(I!=null&&I>0||_!=null&&_>0,`The width(%s) and height(%s) of chart should be greater than 0,
       please check the style of container, or the props width(%s) and height(%s),
       or add a minWidth(%s) or minHeight(%s) or use aspect(%s) to control the
       height and width.`,I,_,a,s,o,l,r),g.createElement("div",{id:f?"".concat(f):void 0,className:ns("recharts-responsive-container",A),style:sK(sK({},m),{},{width:a,height:s,minWidth:o,minHeight:l,maxHeight:c}),ref:p},g.createElement("div",{style:eKe({width:a,height:s})},g.createElement(Noe,{width:I,height:_},u)))}),iK=g.forwardRef((t,e)=>{var r=hM();if(Pm(r.width)&&Pm(r.height))return t.children;var{width:n,height:a}=tKe({width:t.width,height:t.height,aspect:t.aspect}),{calculatedWidth:s,calculatedHeight:o}=boe(void 0,void 0,{width:n,height:a,aspect:t.aspect,maxHeight:t.maxHeight});return Cn(s)&&Cn(o)?g.createElement(Noe,{width:s,height:o},t.children):g.createElement(iKe,MF({},t,{width:n,height:a,ref:e}))});function Coe(t){if(t)return{x:t.x,y:t.y,upperWidth:"upperWidth"in t?t.upperWidth:t.width,lowerWidth:"lowerWidth"in t?t.lowerWidth:t.width,width:t.width,height:t.height}}var HP=()=>{var t,e=qu(),r=gn(KGe),n=gn(VP),a=(t=gn(QP))===null||t===void 0?void 0:t.padding;return!e||!n||!a?r:{width:n.width-a.left-a.right,height:n.height-a.top-a.bottom,x:a.left,y:a.top}},oKe={top:0,bottom:0,left:0,right:0,width:0,height:0,brushBottom:0},lKe=()=>{var t;return(t=gn(Fo))!==null&&t!==void 0?t:oKe},_oe=()=>gn(MA),Eoe=()=>gn(LA),cKe=()=>gn(t=>t.layout.margin),Ta=t=>t.layout.layoutType,Zw=()=>gn(Ta),uKe=()=>{var t=Zw();return t!==void 0},$P=t=>{var e=Cs(),r=qu(),{width:n,height:a}=t,s=hM(),o=n,l=a;return s&&(o=s.width>0?s.width:n,l=s.height>0?s.height:a),g.useEffect(()=>{!r&&Pm(o)&&Pm(l)&&e(gGe({width:o,height:l}))},[e,r,o,l]),null},Soe=Symbol.for("immer-nothing"),oK=Symbol.for("immer-draftable"),$u=Symbol.for("immer-state");function uf(t,...e){throw new Error(`[Immer] minified error nr: ${t}. Full error at: https://bit.ly/3cXEKWf`)}var Z2=Object.getPrototypeOf;function Kv(t){return!!t&&!!t[$u]}function yg(t){var e;return t?Ioe(t)||Array.isArray(t)||!!t[oK]||!!((e=t.constructor)!=null&&e[oK])||eN(t)||KP(t):!1}var dKe=Object.prototype.constructor.toString(),lK=new WeakMap;function Ioe(t){if(!t||typeof t!="object")return!1;const e=Object.getPrototypeOf(t);if(e===null||e===Object.prototype)return!0;const r=Object.hasOwnProperty.call(e,"constructor")&&e.constructor;if(r===Object)return!0;if(typeof r!="function")return!1;let n=lK.get(r);return n===void 0&&(n=Function.toString.call(r),lK.set(r,n)),n===dKe}function NI(t,e,r=!0){GP(t)===0?(r?Reflect.ownKeys(t):Object.keys(t)).forEach(a=>{e(a,t[a],t)}):t.forEach((n,a)=>e(a,n,t))}function GP(t){const e=t[$u];return e?e.type_:Array.isArray(t)?1:eN(t)?2:KP(t)?3:0}function LF(t,e){return GP(t)===2?t.has(e):Object.prototype.hasOwnProperty.call(t,e)}function joe(t,e,r){const n=GP(t);n===2?t.set(e,r):n===3?t.add(r):t[e]=r}function fKe(t,e){return t===e?t!==0||1/t===1/e:t!==t&&e!==e}function eN(t){return t instanceof Map}function KP(t){return t instanceof Set}function dp(t){return t.copy_||t.base_}function UF(t,e){if(eN(t))return new Map(t);if(KP(t))return new Set(t);if(Array.isArray(t))return Array.prototype.slice.call(t);const r=Ioe(t);if(e===!0||e==="class_only"&&!r){const n=Object.getOwnPropertyDescriptors(t);delete n[$u];let a=Reflect.ownKeys(n);for(let s=0;s<a.length;s++){const o=a[s],l=n[o];l.writable===!1&&(l.writable=!0,l.configurable=!0),(l.get||l.set)&&(n[o]={configurable:!0,writable:!0,enumerable:l.enumerable,value:t[o]})}return Object.create(Z2(t),n)}else{const n=Z2(t);if(n!==null&&r)return{...t};const a=Object.create(n);return Object.assign(a,t)}}function AM(t,e=!1){return qP(t)||Kv(t)||!yg(t)||(GP(t)>1&&Object.defineProperties(t,{set:w_,add:w_,clear:w_,delete:w_}),Object.freeze(t),e&&Object.values(t).forEach(r=>AM(r,!0))),t}function hKe(){uf(2)}var w_={value:hKe};function qP(t){return t===null||typeof t!="object"?!0:Object.isFrozen(t)}var AKe={};function bg(t){const e=AKe[t];return e||uf(0,t),e}var ew;function Poe(){return ew}function mKe(t,e){return{drafts_:[],parent_:t,immer_:e,canAutoFreeze_:!0,unfinalizedDrafts_:0}}function cK(t,e){e&&(bg("Patches"),t.patches_=[],t.inversePatches_=[],t.patchListener_=e)}function QF(t){VF(t),t.drafts_.forEach(pKe),t.drafts_=null}function VF(t){t===ew&&(ew=t.parent_)}function uK(t){return ew=mKe(ew,t)}function pKe(t){const e=t[$u];e.type_===0||e.type_===1?e.revoke_():e.revoked_=!0}function dK(t,e){e.unfinalizedDrafts_=e.drafts_.length;const r=e.drafts_[0];return t!==void 0&&t!==r?(r[$u].modified_&&(QF(e),uf(4)),yg(t)&&(t=CI(e,t),e.parent_||_I(e,t)),e.patches_&&bg("Patches").generateReplacementPatches_(r[$u].base_,t,e.patches_,e.inversePatches_)):t=CI(e,r,[]),QF(e),e.patches_&&e.patchListener_(e.patches_,e.inversePatches_),t!==Soe?t:void 0}function CI(t,e,r){if(qP(e))return e;const n=t.immer_.shouldUseStrictIteration(),a=e[$u];if(!a)return NI(e,(s,o)=>fK(t,a,e,s,o,r),n),e;if(a.scope_!==t)return e;if(!a.modified_)return _I(t,a.base_,!0),a.base_;if(!a.finalized_){a.finalized_=!0,a.scope_.unfinalizedDrafts_--;const s=a.copy_;let o=s,l=!1;a.type_===3&&(o=new Set(s),s.clear(),l=!0),NI(o,(c,u)=>fK(t,a,s,c,u,r,l),n),_I(t,s,!1),r&&t.patches_&&bg("Patches").generatePatches_(a,r,t.patches_,t.inversePatches_)}return a.copy_}function fK(t,e,r,n,a,s,o){if(a==null||typeof a!="object"&&!o)return;const l=qP(a);if(!(l&&!o)){if(Kv(a)){const c=s&&e&&e.type_!==3&&!LF(e.assigned_,n)?s.concat(n):void 0,u=CI(t,a,c);if(joe(r,n,u),Kv(u))t.canAutoFreeze_=!1;else return}else o&&r.add(a);if(yg(a)&&!l){if(!t.immer_.autoFreeze_&&t.unfinalizedDrafts_<1||e&&e.base_&&e.base_[n]===a&&l)return;CI(t,a),(!e||!e.scope_.parent_)&&typeof n!="symbol"&&(eN(r)?r.has(n):Object.prototype.propertyIsEnumerable.call(r,n))&&_I(t,a)}}}function _I(t,e,r=!1){!t.parent_&&t.immer_.autoFreeze_&&t.canAutoFreeze_&&AM(e,r)}function gKe(t,e){const r=Array.isArray(t),n={type_:r?1:0,scope_:e?e.scope_:Poe(),modified_:!1,finalized_:!1,assigned_:{},parent_:e,base_:t,draft_:null,copy_:null,revoke_:null,isManual_:!1};let a=n,s=mM;r&&(a=[n],s=tw);const{revoke:o,proxy:l}=Proxy.revocable(a,s);return n.draft_=l,n.revoke_=o,l}var mM={get(t,e){if(e===$u)return t;const r=dp(t);if(!LF(r,e))return xKe(t,r,e);const n=r[e];return t.finalized_||!yg(n)?n:n===mB(t.base_,e)?(pB(t),t.copy_[e]=$F(n,t)):n},has(t,e){return e in dp(t)},ownKeys(t){return Reflect.ownKeys(dp(t))},set(t,e,r){const n=Boe(dp(t),e);if(n!=null&&n.set)return n.set.call(t.draft_,r),!0;if(!t.modified_){const a=mB(dp(t),e),s=a==null?void 0:a[$u];if(s&&s.base_===r)return t.copy_[e]=r,t.assigned_[e]=!1,!0;if(fKe(r,a)&&(r!==void 0||LF(t.base_,e)))return!0;pB(t),HF(t)}return t.copy_[e]===r&&(r!==void 0||e in t.copy_)||Number.isNaN(r)&&Number.isNaN(t.copy_[e])||(t.copy_[e]=r,t.assigned_[e]=!0),!0},deleteProperty(t,e){return mB(t.base_,e)!==void 0||e in t.base_?(t.assigned_[e]=!1,pB(t),HF(t)):delete t.assigned_[e],t.copy_&&delete t.copy_[e],!0},getOwnPropertyDescriptor(t,e){const r=dp(t),n=Reflect.getOwnPropertyDescriptor(r,e);return n&&{writable:!0,configurable:t.type_!==1||e!=="length",enumerable:n.enumerable,value:r[e]}},defineProperty(){uf(11)},getPrototypeOf(t){return Z2(t.base_)},setPrototypeOf(){uf(12)}},tw={};NI(mM,(t,e)=>{tw[t]=function(){return arguments[0]=arguments[0][0],e.apply(this,arguments)}});tw.deleteProperty=function(t,e){return tw.set.call(this,t,e,void 0)};tw.set=function(t,e,r){return mM.set.call(this,t[0],e,r,t[0])};function mB(t,e){const r=t[$u];return(r?dp(r):t)[e]}function xKe(t,e,r){var a;const n=Boe(e,r);return n?"value"in n?n.value:(a=n.get)==null?void 0:a.call(t.draft_):void 0}function Boe(t,e){if(!(e in t))return;let r=Z2(t);for(;r;){const n=Object.getOwnPropertyDescriptor(r,e);if(n)return n;r=Z2(r)}}function HF(t){t.modified_||(t.modified_=!0,t.parent_&&HF(t.parent_))}function pB(t){t.copy_||(t.copy_=UF(t.base_,t.scope_.immer_.useStrictShallowCopy_))}var vKe=class{constructor(t){this.autoFreeze_=!0,this.useStrictShallowCopy_=!1,this.useStrictIteration_=!0,this.produce=(e,r,n)=>{if(typeof e=="function"&&typeof r!="function"){const s=r;r=e;const o=this;return function(c=s,...u){return o.produce(c,d=>r.call(this,d,...u))}}typeof r!="function"&&uf(6),n!==void 0&&typeof n!="function"&&uf(7);let a;if(yg(e)){const s=uK(this),o=$F(e,void 0);let l=!0;try{a=r(o),l=!1}finally{l?QF(s):VF(s)}return cK(s,n),dK(a,s)}else if(!e||typeof e!="object"){if(a=r(e),a===void 0&&(a=e),a===Soe&&(a=void 0),this.autoFreeze_&&AM(a,!0),n){const s=[],o=[];bg("Patches").generateReplacementPatches_(e,a,s,o),n(s,o)}return a}else uf(1,e)},this.produceWithPatches=(e,r)=>{if(typeof e=="function")return(o,...l)=>this.produceWithPatches(o,c=>e(c,...l));let n,a;return[this.produce(e,r,(o,l)=>{n=o,a=l}),n,a]},typeof(t==null?void 0:t.autoFreeze)=="boolean"&&this.setAutoFreeze(t.autoFreeze),typeof(t==null?void 0:t.useStrictShallowCopy)=="boolean"&&this.setUseStrictShallowCopy(t.useStrictShallowCopy),typeof(t==null?void 0:t.useStrictIteration)=="boolean"&&this.setUseStrictIteration(t.useStrictIteration)}createDraft(t){yg(t)||uf(8),Kv(t)&&(t=yKe(t));const e=uK(this),r=$F(t,void 0);return r[$u].isManual_=!0,VF(e),r}finishDraft(t,e){const r=t&&t[$u];(!r||!r.isManual_)&&uf(9);const{scope_:n}=r;return cK(n,e),dK(void 0,n)}setAutoFreeze(t){this.autoFreeze_=t}setUseStrictShallowCopy(t){this.useStrictShallowCopy_=t}setUseStrictIteration(t){this.useStrictIteration_=t}shouldUseStrictIteration(){return this.useStrictIteration_}applyPatches(t,e){let r;for(r=e.length-1;r>=0;r--){const a=e[r];if(a.path.length===0&&a.op==="replace"){t=a.value;break}}r>-1&&(e=e.slice(r+1));const n=bg("Patches").applyPatches_;return Kv(t)?n(t,e):this.produce(t,a=>n(a,e))}};function $F(t,e){const r=eN(t)?bg("MapSet").proxyMap_(t,e):KP(t)?bg("MapSet").proxySet_(t,e):gKe(t,e);return(e?e.scope_:Poe()).drafts_.push(r),r}function yKe(t){return Kv(t)||uf(10,t),Toe(t)}function Toe(t){if(!yg(t)||qP(t))return t;const e=t[$u];let r,n=!0;if(e){if(!e.modified_)return e.base_;e.finalized_=!0,r=UF(t,e.scope_.immer_.useStrictShallowCopy_),n=e.scope_.immer_.shouldUseStrictIteration()}else r=UF(t,!0);return NI(r,(a,s)=>{joe(r,a,Toe(s))},n),e&&(e.finalized_=!1),r}var bKe=new vKe;bKe.produce;var wKe={settings:{layout:"horizontal",align:"center",verticalAlign:"middle",itemSorter:"value"},size:{width:0,height:0},payload:[]},koe=uu({name:"legend",initialState:wKe,reducers:{setLegendSize(t,e){t.size.width=e.payload.width,t.size.height=e.payload.height},setLegendSettings(t,e){t.settings.align=e.payload.align,t.settings.layout=e.payload.layout,t.settings.verticalAlign=e.payload.verticalAlign,t.settings.itemSorter=e.payload.itemSorter},addLegendPayload:{reducer(t,e){t.payload.push(e.payload)},prepare:Ls()},replaceLegendPayload:{reducer(t,e){var{prev:r,next:n}=e.payload,a=vf(t).payload.indexOf(r);a>-1&&(t.payload[a]=n)},prepare:Ls()},removeLegendPayload:{reducer(t,e){var r=vf(t).payload.indexOf(e.payload);r>-1&&t.payload.splice(r,1)},prepare:Ls()}}}),{setLegendSize:hK,setLegendSettings:NKe,addLegendPayload:Foe,replaceLegendPayload:Ooe,removeLegendPayload:Doe}=koe.actions,CKe=koe.reducer,_Ke=["contextPayload"];function GF(){return GF=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var r=arguments[e];for(var n in r)({}).hasOwnProperty.call(r,n)&&(t[n]=r[n])}return t},GF.apply(null,arguments)}function AK(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter(function(a){return Object.getOwnPropertyDescriptor(t,a).enumerable})),r.push.apply(r,n)}return r}function qv(t){for(var e=1;e<arguments.length;e++){var r=arguments[e]!=null?arguments[e]:{};e%2?AK(Object(r),!0).forEach(function(n){EKe(t,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):AK(Object(r)).forEach(function(n){Object.defineProperty(t,n,Object.getOwnPropertyDescriptor(r,n))})}return t}function EKe(t,e,r){return(e=SKe(e))in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}function SKe(t){var e=IKe(t,"string");return typeof e=="symbol"?e:e+""}function IKe(t,e){if(typeof t!="object"||!t)return t;var r=t[Symbol.toPrimitive];if(r!==void 0){var n=r.call(t,e);if(typeof n!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}function jKe(t,e){if(t==null)return{};var r,n,a=PKe(t,e);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(t);for(n=0;n<s.length;n++)r=s[n],e.indexOf(r)===-1&&{}.propertyIsEnumerable.call(t,r)&&(a[r]=t[r])}return a}function PKe(t,e){if(t==null)return{};var r={};for(var n in t)if({}.hasOwnProperty.call(t,n)){if(e.indexOf(n)!==-1)continue;r[n]=t[n]}return r}function BKe(t){return t.value}function TKe(t){var{contextPayload:e}=t,r=jKe(t,_Ke),n=Eie(e,t.payloadUniqBy,BKe),a=qv(qv({},r),{},{payload:n});return g.isValidElement(t.content)?g.cloneElement(t.content,a):typeof t.content=="function"?g.createElement(t.content,a):g.createElement(OHe,a)}function kKe(t,e,r,n,a,s){var{layout:o,align:l,verticalAlign:c}=e,u,d;return(!t||(t.left===void 0||t.left===null)&&(t.right===void 0||t.right===null))&&(l==="center"&&o==="vertical"?u={left:((n||0)-s.width)/2}:u=l==="right"?{right:r&&r.right||0}:{left:r&&r.left||0}),(!t||(t.top===void 0||t.top===null)&&(t.bottom===void 0||t.bottom===null))&&(c==="middle"?d={top:((a||0)-s.height)/2}:d=c==="bottom"?{bottom:r&&r.bottom||0}:{top:r&&r.top||0}),qv(qv({},u),d)}function FKe(t){var e=Cs();return g.useEffect(()=>{e(NKe(t))},[e,t]),null}function OKe(t){var e=Cs();return g.useEffect(()=>(e(hK(t)),()=>{e(hK({width:0,height:0}))}),[e,t]),null}function DKe(t,e,r,n){return t==="vertical"&&Cn(e)?{height:e}:t==="horizontal"?{width:r||n}:null}var RKe={align:"center",iconSize:14,itemSorter:"value",layout:"horizontal",verticalAlign:"bottom"};function KF(t){var e=Tl(t,RKe),r=v$e(),n=SVe(),a=cKe(),{width:s,height:o,wrapperStyle:l,portal:c}=e,[u,d]=Mie([r]),f=_oe(),A=Eoe();if(f==null||A==null)return null;var h=f-((a==null?void 0:a.left)||0)-((a==null?void 0:a.right)||0),m=DKe(e.layout,o,s,h),p=c?l:qv(qv({position:"absolute",width:(m==null?void 0:m.width)||s||"auto",height:(m==null?void 0:m.height)||o||"auto"},kKe(l,e,a,f,A,u)),l),x=c??n;if(x==null||r==null)return null;var v=g.createElement("div",{className:"recharts-legend-wrapper",style:p,ref:d},g.createElement(FKe,{layout:e.layout,align:e.align,verticalAlign:e.verticalAlign,itemSorter:e.itemSorter}),!c&&g.createElement(OKe,{width:u.width,height:u.height}),g.createElement(TKe,GF({},e,m,{margin:a,chartWidth:f,chartHeight:A,contextPayload:r})));return Mu.createPortal(v,x)}KF.displayName="Legend";function qF(){return qF=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var r=arguments[e];for(var n in r)({}).hasOwnProperty.call(r,n)&&(t[n]=r[n])}return t},qF.apply(null,arguments)}function mK(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter(function(a){return Object.getOwnPropertyDescriptor(t,a).enumerable})),r.push.apply(r,n)}return r}function gB(t){for(var e=1;e<arguments.length;e++){var r=arguments[e]!=null?arguments[e]:{};e%2?mK(Object(r),!0).forEach(function(n){MKe(t,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):mK(Object(r)).forEach(function(n){Object.defineProperty(t,n,Object.getOwnPropertyDescriptor(r,n))})}return t}function MKe(t,e,r){return(e=LKe(e))in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}function LKe(t){var e=UKe(t,"string");return typeof e=="symbol"?e:e+""}function UKe(t,e){if(typeof t!="object"||!t)return t;var r=t[Symbol.toPrimitive];if(r!==void 0){var n=r.call(t,e);if(typeof n!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}function QKe(t){return Array.isArray(t)&&uh(t[0])&&uh(t[1])?t.join(" ~ "):t}var VKe=t=>{var{separator:e=" : ",contentStyle:r={},itemStyle:n={},labelStyle:a={},payload:s,formatter:o,itemSorter:l,wrapperClassName:c,labelClassName:u,label:d,labelFormatter:f,accessibilityLayer:A=!1}=t,h=()=>{if(s&&s.length){var j={padding:0,margin:0},I=(l?IP(s,l):s).map((_,S)=>{if(_.type==="none")return null;var E=_.formatter||o||QKe,{value:T,name:k}=_,B=T,D=k;if(E){var X=E(T,k,_,S,s);if(Array.isArray(X))[B,D]=X;else if(X!=null)B=X;else return null}var me=gB({display:"block",paddingTop:4,paddingBottom:4,color:_.color||"#000"},n);return g.createElement("li",{className:"recharts-tooltip-item",key:"tooltip-item-".concat(S),style:me},uh(D)?g.createElement("span",{className:"recharts-tooltip-item-name"},D):null,uh(D)?g.createElement("span",{className:"recharts-tooltip-item-separator"},e):null,g.createElement("span",{className:"recharts-tooltip-item-value"},B),g.createElement("span",{className:"recharts-tooltip-item-unit"},_.unit||""))});return g.createElement("ul",{className:"recharts-tooltip-item-list",style:j},I)}return null},m=gB({margin:0,padding:10,backgroundColor:"#fff",border:"1px solid #ccc",whiteSpace:"nowrap"},r),p=gB({margin:0},a),x=!nl(d),v=x?d:"",y=ns("recharts-default-tooltip",c),b=ns("recharts-tooltip-label",u);x&&f&&s!==void 0&&s!==null&&(v=f(d,s));var w=A?{role:"status","aria-live":"assertive"}:{};return g.createElement("div",qF({className:y,style:m},w),g.createElement("p",{className:b,style:p},g.isValidElement(v)?v:"".concat(v)),h())},Ny="recharts-tooltip-wrapper",HKe={visibility:"hidden"};function $Ke(t){var{coordinate:e,translateX:r,translateY:n}=t;return ns(Ny,{["".concat(Ny,"-right")]:Cn(r)&&e&&Cn(e.x)&&r>=e.x,["".concat(Ny,"-left")]:Cn(r)&&e&&Cn(e.x)&&r<e.x,["".concat(Ny,"-bottom")]:Cn(n)&&e&&Cn(e.y)&&n>=e.y,["".concat(Ny,"-top")]:Cn(n)&&e&&Cn(e.y)&&n<e.y})}function pK(t){var{allowEscapeViewBox:e,coordinate:r,key:n,offsetTopLeft:a,position:s,reverseDirection:o,tooltipDimension:l,viewBox:c,viewBoxDimension:u}=t;if(s&&Cn(s[n]))return s[n];var d=r[n]-l-(a>0?a:0),f=r[n]+a;if(e[n])return o[n]?d:f;var A=c[n];if(A==null)return 0;if(o[n]){var h=d,m=A;return h<m?Math.max(f,A):Math.max(d,A)}if(u==null)return 0;var p=f+l,x=A+u;return p>x?Math.max(d,A):Math.max(f,A)}function GKe(t){var{translateX:e,translateY:r,useTranslate3d:n}=t;return{transform:n?"translate3d(".concat(e,"px, ").concat(r,"px, 0)"):"translate(".concat(e,"px, ").concat(r,"px)")}}function KKe(t){var{allowEscapeViewBox:e,coordinate:r,offsetTopLeft:n,position:a,reverseDirection:s,tooltipBox:o,useTranslate3d:l,viewBox:c}=t,u,d,f;return o.height>0&&o.width>0&&r?(d=pK({allowEscapeViewBox:e,coordinate:r,key:"x",offsetTopLeft:n,position:a,reverseDirection:s,tooltipDimension:o.width,viewBox:c,viewBoxDimension:c.width}),f=pK({allowEscapeViewBox:e,coordinate:r,key:"y",offsetTopLeft:n,position:a,reverseDirection:s,tooltipDimension:o.height,viewBox:c,viewBoxDimension:c.height}),u=GKe({translateX:d,translateY:f,useTranslate3d:l})):u=HKe,{cssProperties:u,cssClasses:$Ke({translateX:d,translateY:f,coordinate:r})}}function gK(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter(function(a){return Object.getOwnPropertyDescriptor(t,a).enumerable})),r.push.apply(r,n)}return r}function N_(t){for(var e=1;e<arguments.length;e++){var r=arguments[e]!=null?arguments[e]:{};e%2?gK(Object(r),!0).forEach(function(n){zF(t,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):gK(Object(r)).forEach(function(n){Object.defineProperty(t,n,Object.getOwnPropertyDescriptor(r,n))})}return t}function zF(t,e,r){return(e=qKe(e))in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}function qKe(t){var e=zKe(t,"string");return typeof e=="symbol"?e:e+""}function zKe(t,e){if(typeof t!="object"||!t)return t;var r=t[Symbol.toPrimitive];if(r!==void 0){var n=r.call(t,e);if(typeof n!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}class WKe extends g.PureComponent{constructor(){super(...arguments),zF(this,"state",{dismissed:!1,dismissedAtCoordinate:{x:0,y:0}}),zF(this,"handleKeyDown",e=>{if(e.key==="Escape"){var r,n,a,s;this.setState({dismissed:!0,dismissedAtCoordinate:{x:(r=(n=this.props.coordinate)===null||n===void 0?void 0:n.x)!==null&&r!==void 0?r:0,y:(a=(s=this.props.coordinate)===null||s===void 0?void 0:s.y)!==null&&a!==void 0?a:0}})}})}componentDidMount(){document.addEventListener("keydown",this.handleKeyDown)}componentWillUnmount(){document.removeEventListener("keydown",this.handleKeyDown)}componentDidUpdate(){var e,r;this.state.dismissed&&(((e=this.props.coordinate)===null||e===void 0?void 0:e.x)!==this.state.dismissedAtCoordinate.x||((r=this.props.coordinate)===null||r===void 0?void 0:r.y)!==this.state.dismissedAtCoordinate.y)&&(this.state.dismissed=!1)}render(){var{active:e,allowEscapeViewBox:r,animationDuration:n,animationEasing:a,children:s,coordinate:o,hasPayload:l,isAnimationActive:c,offset:u,position:d,reverseDirection:f,useTranslate3d:A,viewBox:h,wrapperStyle:m,lastBoundingBox:p,innerRef:x,hasPortalFromProps:v}=this.props,{cssClasses:y,cssProperties:b}=KKe({allowEscapeViewBox:r,coordinate:o,offsetTopLeft:u,position:d,reverseDirection:f,tooltipBox:{height:p.height,width:p.width},useTranslate3d:A,viewBox:h}),w=v?{}:N_(N_({transition:c&&e?"transform ".concat(n,"ms ").concat(a):void 0},b),{},{pointerEvents:"none",visibility:!this.state.dismissed&&e&&l?"visible":"hidden",position:"absolute",top:0,left:0}),j=N_(N_({},w),{},{visibility:!this.state.dismissed&&e&&l?"visible":"hidden"},m);return g.createElement("div",{xmlns:"http://www.w3.org/1999/xhtml",tabIndex:-1,className:y,style:j,ref:x},s)}}var Roe=()=>{var t;return(t=gn(e=>e.rootProps.accessibilityLayer))!==null&&t!==void 0?t:!0};function WF(){return WF=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var r=arguments[e];for(var n in r)({}).hasOwnProperty.call(r,n)&&(t[n]=r[n])}return t},WF.apply(null,arguments)}function xK(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter(function(a){return Object.getOwnPropertyDescriptor(t,a).enumerable})),r.push.apply(r,n)}return r}function vK(t){for(var e=1;e<arguments.length;e++){var r=arguments[e]!=null?arguments[e]:{};e%2?xK(Object(r),!0).forEach(function(n){XKe(t,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):xK(Object(r)).forEach(function(n){Object.defineProperty(t,n,Object.getOwnPropertyDescriptor(r,n))})}return t}function XKe(t,e,r){return(e=YKe(e))in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}function YKe(t){var e=JKe(t,"string");return typeof e=="symbol"?e:e+""}function JKe(t,e){if(typeof t!="object"||!t)return t;var r=t[Symbol.toPrimitive];if(r!==void 0){var n=r.call(t,e);if(typeof n!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}var yK={curveBasisClosed:KVe,curveBasisOpen:qVe,curveBasis:GVe,curveBumpX:BVe,curveBumpY:TVe,curveLinearClosed:zVe,curveLinear:bP,curveMonotoneX:WVe,curveMonotoneY:XVe,curveNatural:YVe,curveStep:JVe,curveStepAfter:eHe,curveStepBefore:ZVe},EI=t=>hi(t.x)&&hi(t.y),bK=t=>t.base!=null&&EI(t.base)&&EI(t),Cy=t=>t.x,_y=t=>t.y,ZKe=(t,e)=>{if(typeof t=="function")return t;var r="curve".concat(qw(t));return(r==="curveMonotone"||r==="curveBump")&&e?yK["".concat(r).concat(e==="vertical"?"Y":"X")]:yK[r]||bP},eqe=t=>{var{type:e="linear",points:r=[],baseLine:n,layout:a,connectNulls:s=!1}=t,o=ZKe(e,a),l=s?r.filter(EI):r,c;if(Array.isArray(n)){var u=r.map((h,m)=>vK(vK({},h),{},{base:n[m]}));a==="vertical"?c=m_().y(_y).x1(Cy).x0(h=>h.base.x):c=m_().x(Cy).y1(_y).y0(h=>h.base.y);var d=c.defined(bK).curve(o),f=s?u.filter(bK):u;return d(f)}a==="vertical"&&Cn(n)?c=m_().y(_y).x1(Cy).x0(n):Cn(n)?c=m_().x(Cy).y1(_y).y0(n):c=qse().x(Cy).y(_y);var A=c.defined(EI).curve(o);return A(l)},pM=t=>{var{className:e,points:r,path:n,pathRef:a}=t,s=Zw();if((!r||!r.length)&&!n)return null;var o={type:t.type,points:t.points,baseLine:t.baseLine,layout:t.layout||s,connectNulls:t.connectNulls},l=r&&r.length?eqe(o):n;return g.createElement("path",WF({},lh(t),wHe(t),{className:ns("recharts-curve",e),d:l===null?void 0:l,ref:a}))},tqe=["x","y","top","left","width","height","className"];function XF(){return XF=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var r=arguments[e];for(var n in r)({}).hasOwnProperty.call(r,n)&&(t[n]=r[n])}return t},XF.apply(null,arguments)}function wK(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter(function(a){return Object.getOwnPropertyDescriptor(t,a).enumerable})),r.push.apply(r,n)}return r}function rqe(t){for(var e=1;e<arguments.length;e++){var r=arguments[e]!=null?arguments[e]:{};e%2?wK(Object(r),!0).forEach(function(n){nqe(t,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):wK(Object(r)).forEach(function(n){Object.defineProperty(t,n,Object.getOwnPropertyDescriptor(r,n))})}return t}function nqe(t,e,r){return(e=aqe(e))in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}function aqe(t){var e=sqe(t,"string");return typeof e=="symbol"?e:e+""}function sqe(t,e){if(typeof t!="object"||!t)return t;var r=t[Symbol.toPrimitive];if(r!==void 0){var n=r.call(t,e);if(typeof n!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}function iqe(t,e){if(t==null)return{};var r,n,a=oqe(t,e);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(t);for(n=0;n<s.length;n++)r=s[n],e.indexOf(r)===-1&&{}.propertyIsEnumerable.call(t,r)&&(a[r]=t[r])}return a}function oqe(t,e){if(t==null)return{};var r={};for(var n in t)if({}.hasOwnProperty.call(t,n)){if(e.indexOf(n)!==-1)continue;r[n]=t[n]}return r}var lqe=(t,e,r,n,a,s)=>"M".concat(t,",").concat(a,"v").concat(n,"M").concat(s,",").concat(e,"h").concat(r),cqe=t=>{var{x:e=0,y:r=0,top:n=0,left:a=0,width:s=0,height:o=0,className:l}=t,c=iqe(t,tqe),u=rqe({x:e,y:r,top:n,left:a,width:s,height:o},c);return!Cn(e)||!Cn(r)||!Cn(s)||!Cn(o)||!Cn(n)||!Cn(a)?null:g.createElement("path",XF({},Dd(u),{className:ns("recharts-cross",l),d:lqe(e,r,s,o,n,a)}))};function uqe(t,e,r,n){var a=n/2;return{stroke:"none",fill:"#ccc",x:t==="horizontal"?e.x-a:r.left+.5,y:t==="horizontal"?r.top+.5:e.y-a,width:t==="horizontal"?n:r.width-1,height:t==="horizontal"?r.height-1:n}}function NK(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter(function(a){return Object.getOwnPropertyDescriptor(t,a).enumerable})),r.push.apply(r,n)}return r}function CK(t){for(var e=1;e<arguments.length;e++){var r=arguments[e]!=null?arguments[e]:{};e%2?NK(Object(r),!0).forEach(function(n){dqe(t,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):NK(Object(r)).forEach(function(n){Object.defineProperty(t,n,Object.getOwnPropertyDescriptor(r,n))})}return t}function dqe(t,e,r){return(e=fqe(e))in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}function fqe(t){var e=hqe(t,"string");return typeof e=="symbol"?e:e+""}function hqe(t,e){if(typeof t!="object"||!t)return t;var r=t[Symbol.toPrimitive];if(r!==void 0){var n=r.call(t,e);if(typeof n!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}var Aqe=t=>t.replace(/([A-Z])/g,e=>"-".concat(e.toLowerCase())),Moe=(t,e,r)=>t.map(n=>"".concat(Aqe(n)," ").concat(e,"ms ").concat(r)).join(","),mqe=(t,e)=>[Object.keys(t),Object.keys(e)].reduce((r,n)=>r.filter(a=>n.includes(a))),rw=(t,e)=>Object.keys(e).reduce((r,n)=>CK(CK({},r),{},{[n]:t(n,e[n])}),{});function _K(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter(function(a){return Object.getOwnPropertyDescriptor(t,a).enumerable})),r.push.apply(r,n)}return r}function Co(t){for(var e=1;e<arguments.length;e++){var r=arguments[e]!=null?arguments[e]:{};e%2?_K(Object(r),!0).forEach(function(n){pqe(t,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):_K(Object(r)).forEach(function(n){Object.defineProperty(t,n,Object.getOwnPropertyDescriptor(r,n))})}return t}function pqe(t,e,r){return(e=gqe(e))in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}function gqe(t){var e=xqe(t,"string");return typeof e=="symbol"?e:e+""}function xqe(t,e){if(typeof t!="object"||!t)return t;var r=t[Symbol.toPrimitive];if(r!==void 0){var n=r.call(t,e);if(typeof n!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}var SI=(t,e,r)=>t+(e-t)*r,YF=t=>{var{from:e,to:r}=t;return e!==r},Loe=(t,e,r)=>{var n=rw((a,s)=>{if(YF(s)){var[o,l]=t(s.from,s.to,s.velocity);return Co(Co({},s),{},{from:o,velocity:l})}return s},e);return r<1?rw((a,s)=>YF(s)&&n[a]!=null?Co(Co({},s),{},{velocity:SI(s.velocity,n[a].velocity,r),from:SI(s.from,n[a].from,r)}):s,e):Loe(t,n,r-1)};function vqe(t,e,r,n,a,s){var o,l=n.reduce((A,h)=>Co(Co({},A),{},{[h]:{from:t[h],velocity:0,to:e[h]}}),{}),c=()=>rw((A,h)=>h.from,l),u=()=>!Object.values(l).filter(YF).length,d=null,f=A=>{o||(o=A);var h=A-o,m=h/r.dt;l=Loe(r,l,m),a(Co(Co(Co({},t),e),c())),o=A,u()||(d=s.setTimeout(f))};return()=>(d=s.setTimeout(f),()=>{var A;(A=d)===null||A===void 0||A()})}function yqe(t,e,r,n,a,s,o){var l=null,c=a.reduce((f,A)=>{var h=t[A],m=e[A];return h==null||m==null?f:Co(Co({},f),{},{[A]:[h,m]})},{}),u,d=f=>{u||(u=f);var A=(f-u)/n,h=rw((p,x)=>SI(...x,r(A)),c);if(s(Co(Co(Co({},t),e),h)),A<1)l=o.setTimeout(d);else{var m=rw((p,x)=>SI(...x,r(1)),c);s(Co(Co(Co({},t),e),m))}};return()=>(l=o.setTimeout(d),()=>{var f;(f=l)===null||f===void 0||f()})}const bqe=(t,e,r,n,a,s)=>{var o=mqe(t,e);return r==null?()=>(a(Co(Co({},t),e)),()=>{}):r.isStepper===!0?vqe(t,e,r,o,a,s):yqe(t,e,r,n,o,a,s)};var II=1e-4,Uoe=(t,e)=>[0,3*t,3*e-6*t,3*t-3*e+1],Qoe=(t,e)=>t.map((r,n)=>r*e**n).reduce((r,n)=>r+n),EK=(t,e)=>r=>{var n=Uoe(t,e);return Qoe(n,r)},wqe=(t,e)=>r=>{var n=Uoe(t,e),a=[...n.map((s,o)=>s*o).slice(1),0];return Qoe(a,r)},Nqe=t=>{var e,r=t.split("(");if(r.length!==2||r[0]!=="cubic-bezier")return null;var n=(e=r[1])===null||e===void 0||(e=e.split(")")[0])===null||e===void 0?void 0:e.split(",");if(n==null||n.length!==4)return null;var a=n.map(s=>parseFloat(s));return[a[0],a[1],a[2],a[3]]},Cqe=function(){for(var e=arguments.length,r=new Array(e),n=0;n<e;n++)r[n]=arguments[n];if(r.length===1)switch(r[0]){case"linear":return[0,0,1,1];case"ease":return[.25,.1,.25,1];case"ease-in":return[.42,0,1,1];case"ease-out":return[.42,0,.58,1];case"ease-in-out":return[0,0,.58,1];default:{var a=Nqe(r[0]);if(a)return a}}return r.length===4?r:[0,0,1,1]},_qe=(t,e,r,n)=>{var a=EK(t,r),s=EK(e,n),o=wqe(t,r),l=u=>u>1?1:u<0?0:u,c=u=>{for(var d=u>1?1:u,f=d,A=0;A<8;++A){var h=a(f)-d,m=o(f);if(Math.abs(h-d)<II||m<II)return s(f);f=l(f-h/m)}return s(f)};return c.isStepper=!1,c},SK=function(){return _qe(...Cqe(...arguments))},Eqe=function(){var e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},{stiff:r=100,damping:n=8,dt:a=17}=e,s=(o,l,c)=>{var u=-(o-l)*r,d=c*n,f=c+(u-d)*a/1e3,A=c*a/1e3+o;return Math.abs(A-l)<II&&Math.abs(f)<II?[l,0]:[A,f]};return s.isStepper=!0,s.dt=a,s},Sqe=t=>{if(typeof t=="string")switch(t){case"ease":case"ease-in-out":case"ease-out":case"ease-in":case"linear":return SK(t);case"spring":return Eqe();default:if(t.split("(")[0]==="cubic-bezier")return SK(t)}return typeof t=="function"?t:null};function Iqe(t){var e,r=()=>null,n=!1,a=null,s=o=>{if(!n){if(Array.isArray(o)){if(!o.length)return;var l=o,[c,...u]=l;if(typeof c=="number"){a=t.setTimeout(s.bind(null,u),c);return}s(c),a=t.setTimeout(s.bind(null,u));return}typeof o=="string"&&(e=o,r(e)),typeof o=="object"&&(e=o,r(e)),typeof o=="function"&&o()}};return{stop:()=>{n=!0},start:o=>{n=!1,a&&(a(),a=null),s(o)},subscribe:o=>(r=o,()=>{r=()=>null}),getTimeoutController:()=>t}}class jqe{setTimeout(e){var r=arguments.length>1&&arguments[1]!==void 0?arguments[1]:0,n=performance.now(),a=null,s=o=>{o-n>=r?e(o):typeof requestAnimationFrame=="function"&&(a=requestAnimationFrame(s))};return a=requestAnimationFrame(s),()=>{a!=null&&cancelAnimationFrame(a)}}}function Pqe(){return Iqe(new jqe)}var Bqe=g.createContext(Pqe);function Tqe(t,e){var r=g.useContext(Bqe);return g.useMemo(()=>e??r(t),[t,e,r])}var kqe=()=>!(typeof window<"u"&&window.document&&window.document.createElement&&window.setTimeout),zP={isSsr:kqe()},Fqe={begin:0,duration:1e3,easing:"ease",isActive:!0,canBegin:!0,onAnimationEnd:()=>{},onAnimationStart:()=>{}},IK={t:0},xB={t:1};function WP(t){var e=Tl(t,Fqe),{isActive:r,canBegin:n,duration:a,easing:s,begin:o,onAnimationEnd:l,onAnimationStart:c,children:u}=e,d=r==="auto"?!zP.isSsr:r,f=Tqe(e.animationId,e.animationManager),[A,h]=g.useState(d?IK:xB),m=g.useRef(null);return g.useEffect(()=>{d||h(xB)},[d]),g.useEffect(()=>{if(!d||!n)return zw;var p=bqe(IK,xB,Sqe(s),a,h,f.getTimeoutController()),x=()=>{m.current=p()};return f.start([c,o,x,a,l]),()=>{f.stop(),m.current&&m.current(),l()}},[d,n,a,s,o,c,l,f]),u(A.t)}function XP(t){var e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:"animation-",r=g.useRef(W2(e)),n=g.useRef(t);return n.current!==t&&(r.current=W2(e),n.current=t),r.current}var Oqe=["radius"],Dqe=["radius"],jK,PK,BK,TK,kK,FK,OK,DK,RK,MK;function LK(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter(function(a){return Object.getOwnPropertyDescriptor(t,a).enumerable})),r.push.apply(r,n)}return r}function UK(t){for(var e=1;e<arguments.length;e++){var r=arguments[e]!=null?arguments[e]:{};e%2?LK(Object(r),!0).forEach(function(n){Rqe(t,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):LK(Object(r)).forEach(function(n){Object.defineProperty(t,n,Object.getOwnPropertyDescriptor(r,n))})}return t}function Rqe(t,e,r){return(e=Mqe(e))in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}function Mqe(t){var e=Lqe(t,"string");return typeof e=="symbol"?e:e+""}function Lqe(t,e){if(typeof t!="object"||!t)return t;var r=t[Symbol.toPrimitive];if(r!==void 0){var n=r.call(t,e);if(typeof n!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}function jI(){return jI=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var r=arguments[e];for(var n in r)({}).hasOwnProperty.call(r,n)&&(t[n]=r[n])}return t},jI.apply(null,arguments)}function QK(t,e){if(t==null)return{};var r,n,a=Uqe(t,e);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(t);for(n=0;n<s.length;n++)r=s[n],e.indexOf(r)===-1&&{}.propertyIsEnumerable.call(t,r)&&(a[r]=t[r])}return a}function Uqe(t,e){if(t==null)return{};var r={};for(var n in t)if({}.hasOwnProperty.call(t,n)){if(e.indexOf(n)!==-1)continue;r[n]=t[n]}return r}function Uf(t,e){return e||(e=t.slice(0)),Object.freeze(Object.defineProperties(t,{raw:{value:Object.freeze(e)}}))}var VK=(t,e,r,n,a)=>{var s=X0(r),o=X0(n),l=Math.min(Math.abs(s)/2,Math.abs(o)/2),c=o>=0?1:-1,u=s>=0?1:-1,d=o>=0&&s>=0||o<0&&s<0?1:0,f;if(l>0&&a instanceof Array){for(var A=[0,0,0,0],h=0,m=4;h<m;h++)A[h]=a[h]>l?l:a[h];f=wi(jK||(jK=Uf(["M",",",""])),t,e+c*A[0]),A[0]>0&&(f+=wi(PK||(PK=Uf(["A ",",",",0,0,",",",",",""])),A[0],A[0],d,t+u*A[0],e)),f+=wi(BK||(BK=Uf(["L ",",",""])),t+r-u*A[1],e),A[1]>0&&(f+=wi(TK||(TK=Uf(["A ",",",",0,0,",`,
        `,",",""])),A[1],A[1],d,t+r,e+c*A[1])),f+=wi(kK||(kK=Uf(["L ",",",""])),t+r,e+n-c*A[2]),A[2]>0&&(f+=wi(FK||(FK=Uf(["A ",",",",0,0,",`,
        `,",",""])),A[2],A[2],d,t+r-u*A[2],e+n)),f+=wi(OK||(OK=Uf(["L ",",",""])),t+u*A[3],e+n),A[3]>0&&(f+=wi(DK||(DK=Uf(["A ",",",",0,0,",`,
        `,",",""])),A[3],A[3],d,t,e+n-c*A[3])),f+="Z"}else if(l>0&&a===+a&&a>0){var p=Math.min(l,a);f=wi(RK||(RK=Uf(["M ",",",`
            A `,",",",0,0,",",",",",`
            L `,",",`
            A `,",",",0,0,",",",",",`
            L `,",",`
            A `,",",",0,0,",",",",",`
            L `,",",`
            A `,",",",0,0,",",",","," Z"])),t,e+c*p,p,p,d,t+u*p,e,t+r-u*p,e,p,p,d,t+r,e+c*p,t+r,e+n-c*p,p,p,d,t+r-u*p,e+n,t+u*p,e+n,p,p,d,t,e+n-c*p)}else f=wi(MK||(MK=Uf(["M ",","," h "," v "," h "," Z"])),t,e,r,n,-r);return f},HK={x:0,y:0,width:0,height:0,radius:0,isAnimationActive:!1,isUpdateAnimationActive:!1,animationBegin:0,animationDuration:1500,animationEasing:"ease"},Voe=t=>{var e=Tl(t,HK),r=g.useRef(null),[n,a]=g.useState(-1);g.useEffect(()=>{if(r.current&&r.current.getTotalLength)try{var he=r.current.getTotalLength();he&&a(he)}catch{}},[]);var{x:s,y:o,width:l,height:c,radius:u,className:d}=e,{animationEasing:f,animationDuration:A,animationBegin:h,isAnimationActive:m,isUpdateAnimationActive:p}=e,x=g.useRef(l),v=g.useRef(c),y=g.useRef(s),b=g.useRef(o),w=g.useMemo(()=>({x:s,y:o,width:l,height:c,radius:u}),[s,o,l,c,u]),j=XP(w,"rectangle-");if(s!==+s||o!==+o||l!==+l||c!==+c||l===0||c===0)return null;var I=ns("recharts-rectangle",d);if(!p){var _=Dd(e),{radius:S}=_,E=QK(_,Oqe);return g.createElement("path",jI({},E,{x:X0(s),y:X0(o),width:X0(l),height:X0(c),radius:typeof u=="number"?u:void 0,className:I,d:VK(s,o,l,c,u)}))}var T=x.current,k=v.current,B=y.current,D=b.current,X="0px ".concat(n===-1?1:n,"px"),me="".concat(n,"px 0px"),pe=Moe(["strokeDasharray"],A,typeof f=="string"?f:HK.animationEasing);return g.createElement(WP,{animationId:j,key:j,canBegin:n>0,duration:A,easing:f,isActive:p,begin:h},he=>{var ve=No(T,l,he),ae=No(k,c,he),Pe=No(B,s,he),ke=No(D,o,he);r.current&&(x.current=ve,v.current=ae,y.current=Pe,b.current=ke);var O;m?he>0?O={transition:pe,strokeDasharray:me}:O={strokeDasharray:X}:O={strokeDasharray:me};var G=Dd(e),{radius:z}=G,U=QK(G,Dqe);return g.createElement("path",jI({},U,{radius:typeof u=="number"?u:void 0,className:I,d:VK(Pe,ke,ve,ae,u),ref:r,style:UK(UK({},O),e.style)}))})};function $K(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter(function(a){return Object.getOwnPropertyDescriptor(t,a).enumerable})),r.push.apply(r,n)}return r}function GK(t){for(var e=1;e<arguments.length;e++){var r=arguments[e]!=null?arguments[e]:{};e%2?$K(Object(r),!0).forEach(function(n){Qqe(t,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):$K(Object(r)).forEach(function(n){Object.defineProperty(t,n,Object.getOwnPropertyDescriptor(r,n))})}return t}function Qqe(t,e,r){return(e=Vqe(e))in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}function Vqe(t){var e=Hqe(t,"string");return typeof e=="symbol"?e:e+""}function Hqe(t,e){if(typeof t!="object"||!t)return t;var r=t[Symbol.toPrimitive];if(r!==void 0){var n=r.call(t,e);if(typeof n!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}var PI=Math.PI/180,$qe=t=>t*180/Math.PI,io=(t,e,r,n)=>({x:t+Math.cos(-PI*n)*r,y:e+Math.sin(-PI*n)*r}),Hoe=function(e,r){var n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{top:0,right:0,bottom:0,left:0};return Math.min(Math.abs(e-(n.left||0)-(n.right||0)),Math.abs(r-(n.top||0)-(n.bottom||0)))/2},Gqe=(t,e)=>{var{x:r,y:n}=t,{x:a,y:s}=e;return Math.sqrt((r-a)**2+(n-s)**2)},Kqe=(t,e)=>{var{x:r,y:n}=t,{cx:a,cy:s}=e,o=Gqe({x:r,y:n},{x:a,y:s});if(o<=0)return{radius:o,angle:0};var l=(r-a)/o,c=Math.acos(l);return n>s&&(c=2*Math.PI-c),{radius:o,angle:$qe(c),angleInRadian:c}},qqe=t=>{var{startAngle:e,endAngle:r}=t,n=Math.floor(e/360),a=Math.floor(r/360),s=Math.min(n,a);return{startAngle:e-s*360,endAngle:r-s*360}},zqe=(t,e)=>{var{startAngle:r,endAngle:n}=e,a=Math.floor(r/360),s=Math.floor(n/360),o=Math.min(a,s);return t+o*360},Wqe=(t,e)=>{var{chartX:r,chartY:n}=t,{radius:a,angle:s}=Kqe({x:r,y:n},e),{innerRadius:o,outerRadius:l}=e;if(a<o||a>l||a===0)return null;var{startAngle:c,endAngle:u}=qqe(e),d=s,f;if(c<=u){for(;d>u;)d-=360;for(;d<c;)d+=360;f=d>=c&&d<=u}else{for(;d>c;)d-=360;for(;d<u;)d+=360;f=d>=u&&d<=c}return f?GK(GK({},e),{},{radius:a,angle:zqe(d,e)}):null};function $oe(t){var{cx:e,cy:r,radius:n,startAngle:a,endAngle:s}=t,o=io(e,r,n,a),l=io(e,r,n,s);return{points:[o,l],cx:e,cy:r,radius:n,startAngle:a,endAngle:s}}var KK,qK,zK,WK,XK,YK,JK;function JF(){return JF=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var r=arguments[e];for(var n in r)({}).hasOwnProperty.call(r,n)&&(t[n]=r[n])}return t},JF.apply(null,arguments)}function Sp(t,e){return e||(e=t.slice(0)),Object.freeze(Object.defineProperties(t,{raw:{value:Object.freeze(e)}}))}var Xqe=(t,e)=>{var r=jl(e-t),n=Math.min(Math.abs(e-t),359.999);return r*n},C_=t=>{var{cx:e,cy:r,radius:n,angle:a,sign:s,isExternal:o,cornerRadius:l,cornerIsExternal:c}=t,u=l*(o?1:-1)+n,d=Math.asin(l/u)/PI,f=c?a:a+s*d,A=io(e,r,u,f),h=io(e,r,n,f),m=c?a-s*d:a,p=io(e,r,u*Math.cos(d*PI),m);return{center:A,circleTangency:h,lineTangency:p,theta:d}},Goe=t=>{var{cx:e,cy:r,innerRadius:n,outerRadius:a,startAngle:s,endAngle:o}=t,l=Xqe(s,o),c=s+l,u=io(e,r,a,s),d=io(e,r,a,c),f=wi(KK||(KK=Sp(["M ",",",`
    A `,",",`,0,
    `,",",`,
    `,",",`
  `])),u.x,u.y,a,a,+(Math.abs(l)>180),+(s>c),d.x,d.y);if(n>0){var A=io(e,r,n,s),h=io(e,r,n,c);f+=wi(qK||(qK=Sp(["L ",",",`
            A `,",",`,0,
            `,",",`,
            `,","," Z"])),h.x,h.y,n,n,+(Math.abs(l)>180),+(s<=c),A.x,A.y)}else f+=wi(zK||(zK=Sp(["L ",","," Z"])),e,r);return f},Yqe=t=>{var{cx:e,cy:r,innerRadius:n,outerRadius:a,cornerRadius:s,forceCornerRadius:o,cornerIsExternal:l,startAngle:c,endAngle:u}=t,d=jl(u-c),{circleTangency:f,lineTangency:A,theta:h}=C_({cx:e,cy:r,radius:a,angle:c,sign:d,cornerRadius:s,cornerIsExternal:l}),{circleTangency:m,lineTangency:p,theta:x}=C_({cx:e,cy:r,radius:a,angle:u,sign:-d,cornerRadius:s,cornerIsExternal:l}),v=l?Math.abs(c-u):Math.abs(c-u)-h-x;if(v<0)return o?wi(WK||(WK=Sp(["M ",",",`
        a`,",",",0,0,1,",`,0
        a`,",",",0,0,1,",`,0
      `])),A.x,A.y,s,s,s*2,s,s,-s*2):Goe({cx:e,cy:r,innerRadius:n,outerRadius:a,startAngle:c,endAngle:u});var y=wi(XK||(XK=Sp(["M ",",",`
    A`,",",",0,0,",",",",",`
    A`,",",",0,",",",",",",",`
    A`,",",",0,0,",",",",",`
  `])),A.x,A.y,s,s,+(d<0),f.x,f.y,a,a,+(v>180),+(d<0),m.x,m.y,s,s,+(d<0),p.x,p.y);if(n>0){var{circleTangency:b,lineTangency:w,theta:j}=C_({cx:e,cy:r,radius:n,angle:c,sign:d,isExternal:!0,cornerRadius:s,cornerIsExternal:l}),{circleTangency:I,lineTangency:_,theta:S}=C_({cx:e,cy:r,radius:n,angle:u,sign:-d,isExternal:!0,cornerRadius:s,cornerIsExternal:l}),E=l?Math.abs(c-u):Math.abs(c-u)-j-S;if(E<0&&s===0)return"".concat(y,"L").concat(e,",").concat(r,"Z");y+=wi(YK||(YK=Sp(["L",",",`
      A`,",",",0,0,",",",",",`
      A`,",",",0,",",",",",",",`
      A`,",",",0,0,",",",",","Z"])),_.x,_.y,s,s,+(d<0),I.x,I.y,n,n,+(E>180),+(d>0),b.x,b.y,s,s,+(d<0),w.x,w.y)}else y+=wi(JK||(JK=Sp(["L",",","Z"])),e,r);return y},Jqe={cx:0,cy:0,innerRadius:0,outerRadius:0,startAngle:0,endAngle:0,cornerRadius:0,forceCornerRadius:!1,cornerIsExternal:!1},Koe=t=>{var e=Tl(t,Jqe),{cx:r,cy:n,innerRadius:a,outerRadius:s,cornerRadius:o,forceCornerRadius:l,cornerIsExternal:c,startAngle:u,endAngle:d,className:f}=e;if(s<a||u===d)return null;var A=ns("recharts-sector",f),h=s-a,m=sc(o,h,0,!0),p;return m>0&&Math.abs(u-d)<360?p=Yqe({cx:r,cy:n,innerRadius:a,outerRadius:s,cornerRadius:Math.min(m,h/2),forceCornerRadius:l,cornerIsExternal:c,startAngle:u,endAngle:d}):p=Goe({cx:r,cy:n,innerRadius:a,outerRadius:s,startAngle:u,endAngle:d}),g.createElement("path",JF({},Dd(e),{className:A,d:p}))};function Zqe(t,e,r){if(t==="horizontal")return[{x:e.x,y:r.top},{x:e.x,y:r.top+r.height}];if(t==="vertical")return[{x:r.left,y:e.y},{x:r.left+r.width,y:e.y}];if(lie(e)){if(t==="centric"){var{cx:n,cy:a,innerRadius:s,outerRadius:o,angle:l}=e,c=io(n,a,s,l),u=io(n,a,o,l);return[{x:c.x,y:c.y},{x:u.x,y:u.y}]}return $oe(e)}}var qoe={},zoe={},Woe={};(function(t){Object.defineProperty(t,Symbol.toStringTag,{value:"Module"});const e=aM;function r(n){return e.isSymbol(n)?NaN:Number(n)}t.toNumber=r})(Woe);(function(t){Object.defineProperty(t,Symbol.toStringTag,{value:"Module"});const e=Woe;function r(n){return n?(n=e.toNumber(n),n===1/0||n===-1/0?(n<0?-1:1)*Number.MAX_VALUE:n===n?n:0):n===0?n:0}t.toFinite=r})(zoe);(function(t){Object.defineProperty(t,Symbol.toStringTag,{value:"Module"});const e=sM,r=zoe;function n(a,s,o){o&&typeof o!="number"&&e.isIterateeCall(a,s,o)&&(s=o=void 0),a=r.toFinite(a),s===void 0?(s=a,a=0):s=r.toFinite(s),o=o===void 0?a<s?1:-1:r.toFinite(o);const l=Math.max(Math.ceil((s-a)/(o||1)),0),c=new Array(l);for(let u=0;u<l;u++)c[u]=a,a+=o;return c}t.range=n})(qoe);var eze=qoe.range;const Xoe=IA(eze);function Am(t,e){return t==null||e==null?NaN:t<e?-1:t>e?1:t>=e?0:NaN}function tze(t,e){return t==null||e==null?NaN:e<t?-1:e>t?1:e>=t?0:NaN}function gM(t){let e,r,n;t.length!==2?(e=Am,r=(l,c)=>Am(t(l),c),n=(l,c)=>t(l)-c):(e=t===Am||t===tze?t:rze,r=t,n=t);function a(l,c,u=0,d=l.length){if(u<d){if(e(c,c)!==0)return d;do{const f=u+d>>>1;r(l[f],c)<0?u=f+1:d=f}while(u<d)}return u}function s(l,c,u=0,d=l.length){if(u<d){if(e(c,c)!==0)return d;do{const f=u+d>>>1;r(l[f],c)<=0?u=f+1:d=f}while(u<d)}return u}function o(l,c,u=0,d=l.length){const f=a(l,c,u,d-1);return f>u&&n(l[f-1],c)>-n(l[f],c)?f-1:f}return{left:a,center:o,right:s}}function rze(){return 0}function Yoe(t){return t===null?NaN:+t}function*nze(t,e){for(let r of t)r!=null&&(r=+r)>=r&&(yield r)}const aze=gM(Am),tN=aze.right;gM(Yoe).center;class ZK extends Map{constructor(e,r=oze){if(super(),Object.defineProperties(this,{_intern:{value:new Map},_key:{value:r}}),e!=null)for(const[n,a]of e)this.set(n,a)}get(e){return super.get(eq(this,e))}has(e){return super.has(eq(this,e))}set(e,r){return super.set(sze(this,e),r)}delete(e){return super.delete(ize(this,e))}}function eq({_intern:t,_key:e},r){const n=e(r);return t.has(n)?t.get(n):r}function sze({_intern:t,_key:e},r){const n=e(r);return t.has(n)?t.get(n):(t.set(n,r),r)}function ize({_intern:t,_key:e},r){const n=e(r);return t.has(n)&&(r=t.get(n),t.delete(n)),r}function oze(t){return t!==null&&typeof t=="object"?t.valueOf():t}function lze(t=Am){if(t===Am)return Joe;if(typeof t!="function")throw new TypeError("compare is not a function");return(e,r)=>{const n=t(e,r);return n||n===0?n:(t(r,r)===0)-(t(e,e)===0)}}function Joe(t,e){return(t==null||!(t>=t))-(e==null||!(e>=e))||(t<e?-1:t>e?1:0)}const cze=Math.sqrt(50),uze=Math.sqrt(10),dze=Math.sqrt(2);function BI(t,e,r){const n=(e-t)/Math.max(0,r),a=Math.floor(Math.log10(n)),s=n/Math.pow(10,a),o=s>=cze?10:s>=uze?5:s>=dze?2:1;let l,c,u;return a<0?(u=Math.pow(10,-a)/o,l=Math.round(t*u),c=Math.round(e*u),l/u<t&&++l,c/u>e&&--c,u=-u):(u=Math.pow(10,a)*o,l=Math.round(t/u),c=Math.round(e/u),l*u<t&&++l,c*u>e&&--c),c<l&&.5<=r&&r<2?BI(t,e,r*2):[l,c,u]}function ZF(t,e,r){if(e=+e,t=+t,r=+r,!(r>0))return[];if(t===e)return[t];const n=e<t,[a,s,o]=n?BI(e,t,r):BI(t,e,r);if(!(s>=a))return[];const l=s-a+1,c=new Array(l);if(n)if(o<0)for(let u=0;u<l;++u)c[u]=(s-u)/-o;else for(let u=0;u<l;++u)c[u]=(s-u)*o;else if(o<0)for(let u=0;u<l;++u)c[u]=(a+u)/-o;else for(let u=0;u<l;++u)c[u]=(a+u)*o;return c}function eO(t,e,r){return e=+e,t=+t,r=+r,BI(t,e,r)[2]}function tO(t,e,r){e=+e,t=+t,r=+r;const n=e<t,a=n?eO(e,t,r):eO(t,e,r);return(n?-1:1)*(a<0?1/-a:a)}function tq(t,e){let r;for(const n of t)n!=null&&(r<n||r===void 0&&n>=n)&&(r=n);return r}function rq(t,e){let r;for(const n of t)n!=null&&(r>n||r===void 0&&n>=n)&&(r=n);return r}function Zoe(t,e,r=0,n=1/0,a){if(e=Math.floor(e),r=Math.floor(Math.max(0,r)),n=Math.floor(Math.min(t.length-1,n)),!(r<=e&&e<=n))return t;for(a=a===void 0?Joe:lze(a);n>r;){if(n-r>600){const c=n-r+1,u=e-r+1,d=Math.log(c),f=.5*Math.exp(2*d/3),A=.5*Math.sqrt(d*f*(c-f)/c)*(u-c/2<0?-1:1),h=Math.max(r,Math.floor(e-u*f/c+A)),m=Math.min(n,Math.floor(e+(c-u)*f/c+A));Zoe(t,e,h,m,a)}const s=t[e];let o=r,l=n;for(Ey(t,r,e),a(t[n],s)>0&&Ey(t,r,n);o<l;){for(Ey(t,o,l),++o,--l;a(t[o],s)<0;)++o;for(;a(t[l],s)>0;)--l}a(t[r],s)===0?Ey(t,r,l):(++l,Ey(t,l,n)),l<=e&&(r=l+1),e<=l&&(n=l-1)}return t}function Ey(t,e,r){const n=t[e];t[e]=t[r],t[r]=n}function fze(t,e,r){if(t=Float64Array.from(nze(t)),!(!(n=t.length)||isNaN(e=+e))){if(e<=0||n<2)return rq(t);if(e>=1)return tq(t);var n,a=(n-1)*e,s=Math.floor(a),o=tq(Zoe(t,s).subarray(0,s+1)),l=rq(t.subarray(s+1));return o+(l-o)*(a-s)}}function hze(t,e,r=Yoe){if(!(!(n=t.length)||isNaN(e=+e))){if(e<=0||n<2)return+r(t[0],0,t);if(e>=1)return+r(t[n-1],n-1,t);var n,a=(n-1)*e,s=Math.floor(a),o=+r(t[s],s,t),l=+r(t[s+1],s+1,t);return o+(l-o)*(a-s)}}function Aze(t,e,r){t=+t,e=+e,r=(a=arguments.length)<2?(e=t,t=0,1):a<3?1:+r;for(var n=-1,a=Math.max(0,Math.ceil((e-t)/r))|0,s=new Array(a);++n<a;)s[n]=t+n*r;return s}function Vd(t,e){switch(arguments.length){case 0:break;case 1:this.range(t);break;default:this.range(e).domain(t);break}return this}function UA(t,e){switch(arguments.length){case 0:break;case 1:{typeof t=="function"?this.interpolator(t):this.range(t);break}default:{this.domain(t),typeof e=="function"?this.interpolator(e):this.range(e);break}}return this}const rO=Symbol("implicit");function xM(){var t=new ZK,e=[],r=[],n=rO;function a(s){let o=t.get(s);if(o===void 0){if(n!==rO)return n;t.set(s,o=e.push(s)-1)}return r[o%r.length]}return a.domain=function(s){if(!arguments.length)return e.slice();e=[],t=new ZK;for(const o of s)t.has(o)||t.set(o,e.push(o)-1);return a},a.range=function(s){return arguments.length?(r=Array.from(s),a):r.slice()},a.unknown=function(s){return arguments.length?(n=s,a):n},a.copy=function(){return xM(e,r).unknown(n)},Vd.apply(a,arguments),a}function vM(){var t=xM().unknown(void 0),e=t.domain,r=t.range,n=0,a=1,s,o,l=!1,c=0,u=0,d=.5;delete t.unknown;function f(){var A=e().length,h=a<n,m=h?a:n,p=h?n:a;s=(p-m)/Math.max(1,A-c+u*2),l&&(s=Math.floor(s)),m+=(p-m-s*(A-c))*d,o=s*(1-c),l&&(m=Math.round(m),o=Math.round(o));var x=Aze(A).map(function(v){return m+s*v});return r(h?x.reverse():x)}return t.domain=function(A){return arguments.length?(e(A),f()):e()},t.range=function(A){return arguments.length?([n,a]=A,n=+n,a=+a,f()):[n,a]},t.rangeRound=function(A){return[n,a]=A,n=+n,a=+a,l=!0,f()},t.bandwidth=function(){return o},t.step=function(){return s},t.round=function(A){return arguments.length?(l=!!A,f()):l},t.padding=function(A){return arguments.length?(c=Math.min(1,u=+A),f()):c},t.paddingInner=function(A){return arguments.length?(c=Math.min(1,A),f()):c},t.paddingOuter=function(A){return arguments.length?(u=+A,f()):u},t.align=function(A){return arguments.length?(d=Math.max(0,Math.min(1,A)),f()):d},t.copy=function(){return vM(e(),[n,a]).round(l).paddingInner(c).paddingOuter(u).align(d)},Vd.apply(f(),arguments)}function ele(t){var e=t.copy;return t.padding=t.paddingOuter,delete t.paddingInner,delete t.paddingOuter,t.copy=function(){return ele(e())},t}function mze(){return ele(vM.apply(null,arguments).paddingInner(1))}function yM(t,e,r){t.prototype=e.prototype=r,r.constructor=t}function tle(t,e){var r=Object.create(t.prototype);for(var n in e)r[n]=e[n];return r}function rN(){}var nw=.7,TI=1/nw,yv="\\s*([+-]?\\d+)\\s*",aw="\\s*([+-]?(?:\\d*\\.)?\\d+(?:[eE][+-]?\\d+)?)\\s*",sh="\\s*([+-]?(?:\\d*\\.)?\\d+(?:[eE][+-]?\\d+)?)%\\s*",pze=/^#([0-9a-f]{3,8})$/,gze=new RegExp(`^rgb\\(${yv},${yv},${yv}\\)$`),xze=new RegExp(`^rgb\\(${sh},${sh},${sh}\\)$`),vze=new RegExp(`^rgba\\(${yv},${yv},${yv},${aw}\\)$`),yze=new RegExp(`^rgba\\(${sh},${sh},${sh},${aw}\\)$`),bze=new RegExp(`^hsl\\(${aw},${sh},${sh}\\)$`),wze=new RegExp(`^hsla\\(${aw},${sh},${sh},${aw}\\)$`),nq={aliceblue:15792383,antiquewhite:16444375,aqua:65535,aquamarine:8388564,azure:15794175,beige:16119260,bisque:16770244,black:0,blanchedalmond:16772045,blue:255,blueviolet:9055202,brown:10824234,burlywood:14596231,cadetblue:6266528,chartreuse:8388352,chocolate:13789470,coral:16744272,cornflowerblue:6591981,cornsilk:16775388,crimson:14423100,cyan:65535,darkblue:139,darkcyan:35723,darkgoldenrod:12092939,darkgray:11119017,darkgreen:25600,darkgrey:11119017,darkkhaki:12433259,darkmagenta:9109643,darkolivegreen:5597999,darkorange:16747520,darkorchid:10040012,darkred:9109504,darksalmon:15308410,darkseagreen:9419919,darkslateblue:4734347,darkslategray:3100495,darkslategrey:3100495,darkturquoise:52945,darkviolet:9699539,deeppink:16716947,deepskyblue:49151,dimgray:6908265,dimgrey:6908265,dodgerblue:2003199,firebrick:11674146,floralwhite:16775920,forestgreen:2263842,fuchsia:16711935,gainsboro:14474460,ghostwhite:16316671,gold:16766720,goldenrod:14329120,gray:8421504,green:32768,greenyellow:11403055,grey:8421504,honeydew:15794160,hotpink:16738740,indianred:13458524,indigo:4915330,ivory:16777200,khaki:15787660,lavender:15132410,lavenderblush:16773365,lawngreen:8190976,lemonchiffon:16775885,lightblue:11393254,lightcoral:15761536,lightcyan:14745599,lightgoldenrodyellow:16448210,lightgray:13882323,lightgreen:9498256,lightgrey:13882323,lightpink:16758465,lightsalmon:16752762,lightseagreen:2142890,lightskyblue:8900346,lightslategray:7833753,lightslategrey:7833753,lightsteelblue:11584734,lightyellow:16777184,lime:65280,limegreen:3329330,linen:16445670,magenta:16711935,maroon:8388608,mediumaquamarine:6737322,mediumblue:205,mediumorchid:12211667,mediumpurple:9662683,mediumseagreen:3978097,mediumslateblue:8087790,mediumspringgreen:64154,mediumturquoise:4772300,mediumvioletred:13047173,midnightblue:1644912,mintcream:16121850,mistyrose:16770273,moccasin:16770229,navajowhite:16768685,navy:128,oldlace:16643558,olive:8421376,olivedrab:7048739,orange:16753920,orangered:16729344,orchid:14315734,palegoldenrod:15657130,palegreen:10025880,paleturquoise:11529966,palevioletred:14381203,papayawhip:16773077,peachpuff:16767673,peru:13468991,pink:16761035,plum:14524637,powderblue:11591910,purple:8388736,rebeccapurple:6697881,red:16711680,rosybrown:12357519,royalblue:4286945,saddlebrown:9127187,salmon:16416882,sandybrown:16032864,seagreen:3050327,seashell:16774638,sienna:10506797,silver:12632256,skyblue:8900331,slateblue:6970061,slategray:7372944,slategrey:7372944,snow:16775930,springgreen:65407,steelblue:4620980,tan:13808780,teal:32896,thistle:14204888,tomato:16737095,turquoise:4251856,violet:15631086,wheat:16113331,white:16777215,whitesmoke:16119285,yellow:16776960,yellowgreen:10145074};yM(rN,sw,{copy(t){return Object.assign(new this.constructor,this,t)},displayable(){return this.rgb().displayable()},hex:aq,formatHex:aq,formatHex8:Nze,formatHsl:Cze,formatRgb:sq,toString:sq});function aq(){return this.rgb().formatHex()}function Nze(){return this.rgb().formatHex8()}function Cze(){return rle(this).formatHsl()}function sq(){return this.rgb().formatRgb()}function sw(t){var e,r;return t=(t+"").trim().toLowerCase(),(e=pze.exec(t))?(r=e[1].length,e=parseInt(e[1],16),r===6?iq(e):r===3?new ru(e>>8&15|e>>4&240,e>>4&15|e&240,(e&15)<<4|e&15,1):r===8?__(e>>24&255,e>>16&255,e>>8&255,(e&255)/255):r===4?__(e>>12&15|e>>8&240,e>>8&15|e>>4&240,e>>4&15|e&240,((e&15)<<4|e&15)/255):null):(e=gze.exec(t))?new ru(e[1],e[2],e[3],1):(e=xze.exec(t))?new ru(e[1]*255/100,e[2]*255/100,e[3]*255/100,1):(e=vze.exec(t))?__(e[1],e[2],e[3],e[4]):(e=yze.exec(t))?__(e[1]*255/100,e[2]*255/100,e[3]*255/100,e[4]):(e=bze.exec(t))?cq(e[1],e[2]/100,e[3]/100,1):(e=wze.exec(t))?cq(e[1],e[2]/100,e[3]/100,e[4]):nq.hasOwnProperty(t)?iq(nq[t]):t==="transparent"?new ru(NaN,NaN,NaN,0):null}function iq(t){return new ru(t>>16&255,t>>8&255,t&255,1)}function __(t,e,r,n){return n<=0&&(t=e=r=NaN),new ru(t,e,r,n)}function _ze(t){return t instanceof rN||(t=sw(t)),t?(t=t.rgb(),new ru(t.r,t.g,t.b,t.opacity)):new ru}function nO(t,e,r,n){return arguments.length===1?_ze(t):new ru(t,e,r,n??1)}function ru(t,e,r,n){this.r=+t,this.g=+e,this.b=+r,this.opacity=+n}yM(ru,nO,tle(rN,{brighter(t){return t=t==null?TI:Math.pow(TI,t),new ru(this.r*t,this.g*t,this.b*t,this.opacity)},darker(t){return t=t==null?nw:Math.pow(nw,t),new ru(this.r*t,this.g*t,this.b*t,this.opacity)},rgb(){return this},clamp(){return new ru(Gp(this.r),Gp(this.g),Gp(this.b),kI(this.opacity))},displayable(){return-.5<=this.r&&this.r<255.5&&-.5<=this.g&&this.g<255.5&&-.5<=this.b&&this.b<255.5&&0<=this.opacity&&this.opacity<=1},hex:oq,formatHex:oq,formatHex8:Eze,formatRgb:lq,toString:lq}));function oq(){return`#${Ip(this.r)}${Ip(this.g)}${Ip(this.b)}`}function Eze(){return`#${Ip(this.r)}${Ip(this.g)}${Ip(this.b)}${Ip((isNaN(this.opacity)?1:this.opacity)*255)}`}function lq(){const t=kI(this.opacity);return`${t===1?"rgb(":"rgba("}${Gp(this.r)}, ${Gp(this.g)}, ${Gp(this.b)}${t===1?")":`, ${t})`}`}function kI(t){return isNaN(t)?1:Math.max(0,Math.min(1,t))}function Gp(t){return Math.max(0,Math.min(255,Math.round(t)||0))}function Ip(t){return t=Gp(t),(t<16?"0":"")+t.toString(16)}function cq(t,e,r,n){return n<=0?t=e=r=NaN:r<=0||r>=1?t=e=NaN:e<=0&&(t=NaN),new df(t,e,r,n)}function rle(t){if(t instanceof df)return new df(t.h,t.s,t.l,t.opacity);if(t instanceof rN||(t=sw(t)),!t)return new df;if(t instanceof df)return t;t=t.rgb();var e=t.r/255,r=t.g/255,n=t.b/255,a=Math.min(e,r,n),s=Math.max(e,r,n),o=NaN,l=s-a,c=(s+a)/2;return l?(e===s?o=(r-n)/l+(r<n)*6:r===s?o=(n-e)/l+2:o=(e-r)/l+4,l/=c<.5?s+a:2-s-a,o*=60):l=c>0&&c<1?0:o,new df(o,l,c,t.opacity)}function Sze(t,e,r,n){return arguments.length===1?rle(t):new df(t,e,r,n??1)}function df(t,e,r,n){this.h=+t,this.s=+e,this.l=+r,this.opacity=+n}yM(df,Sze,tle(rN,{brighter(t){return t=t==null?TI:Math.pow(TI,t),new df(this.h,this.s,this.l*t,this.opacity)},darker(t){return t=t==null?nw:Math.pow(nw,t),new df(this.h,this.s,this.l*t,this.opacity)},rgb(){var t=this.h%360+(this.h<0)*360,e=isNaN(t)||isNaN(this.s)?0:this.s,r=this.l,n=r+(r<.5?r:1-r)*e,a=2*r-n;return new ru(vB(t>=240?t-240:t+120,a,n),vB(t,a,n),vB(t<120?t+240:t-120,a,n),this.opacity)},clamp(){return new df(uq(this.h),E_(this.s),E_(this.l),kI(this.opacity))},displayable(){return(0<=this.s&&this.s<=1||isNaN(this.s))&&0<=this.l&&this.l<=1&&0<=this.opacity&&this.opacity<=1},formatHsl(){const t=kI(this.opacity);return`${t===1?"hsl(":"hsla("}${uq(this.h)}, ${E_(this.s)*100}%, ${E_(this.l)*100}%${t===1?")":`, ${t})`}`}}));function uq(t){return t=(t||0)%360,t<0?t+360:t}function E_(t){return Math.max(0,Math.min(1,t||0))}function vB(t,e,r){return(t<60?e+(r-e)*t/60:t<180?r:t<240?e+(r-e)*(240-t)/60:e)*255}const bM=t=>()=>t;function Ize(t,e){return function(r){return t+r*e}}function jze(t,e,r){return t=Math.pow(t,r),e=Math.pow(e,r)-t,r=1/r,function(n){return Math.pow(t+n*e,r)}}function Pze(t){return(t=+t)==1?nle:function(e,r){return r-e?jze(e,r,t):bM(isNaN(e)?r:e)}}function nle(t,e){var r=e-t;return r?Ize(t,r):bM(isNaN(t)?e:t)}const dq=function t(e){var r=Pze(e);function n(a,s){var o=r((a=nO(a)).r,(s=nO(s)).r),l=r(a.g,s.g),c=r(a.b,s.b),u=nle(a.opacity,s.opacity);return function(d){return a.r=o(d),a.g=l(d),a.b=c(d),a.opacity=u(d),a+""}}return n.gamma=t,n}(1);function Bze(t,e){e||(e=[]);var r=t?Math.min(e.length,t.length):0,n=e.slice(),a;return function(s){for(a=0;a<r;++a)n[a]=t[a]*(1-s)+e[a]*s;return n}}function Tze(t){return ArrayBuffer.isView(t)&&!(t instanceof DataView)}function kze(t,e){var r=e?e.length:0,n=t?Math.min(r,t.length):0,a=new Array(n),s=new Array(r),o;for(o=0;o<n;++o)a[o]=C1(t[o],e[o]);for(;o<r;++o)s[o]=e[o];return function(l){for(o=0;o<n;++o)s[o]=a[o](l);return s}}function Fze(t,e){var r=new Date;return t=+t,e=+e,function(n){return r.setTime(t*(1-n)+e*n),r}}function FI(t,e){return t=+t,e=+e,function(r){return t*(1-r)+e*r}}function Oze(t,e){var r={},n={},a;(t===null||typeof t!="object")&&(t={}),(e===null||typeof e!="object")&&(e={});for(a in e)a in t?r[a]=C1(t[a],e[a]):n[a]=e[a];return function(s){for(a in r)n[a]=r[a](s);return n}}var aO=/[-+]?(?:\d+\.?\d*|\.?\d+)(?:[eE][-+]?\d+)?/g,yB=new RegExp(aO.source,"g");function Dze(t){return function(){return t}}function Rze(t){return function(e){return t(e)+""}}function Mze(t,e){var r=aO.lastIndex=yB.lastIndex=0,n,a,s,o=-1,l=[],c=[];for(t=t+"",e=e+"";(n=aO.exec(t))&&(a=yB.exec(e));)(s=a.index)>r&&(s=e.slice(r,s),l[o]?l[o]+=s:l[++o]=s),(n=n[0])===(a=a[0])?l[o]?l[o]+=a:l[++o]=a:(l[++o]=null,c.push({i:o,x:FI(n,a)})),r=yB.lastIndex;return r<e.length&&(s=e.slice(r),l[o]?l[o]+=s:l[++o]=s),l.length<2?c[0]?Rze(c[0].x):Dze(e):(e=c.length,function(u){for(var d=0,f;d<e;++d)l[(f=c[d]).i]=f.x(u);return l.join("")})}function C1(t,e){var r=typeof e,n;return e==null||r==="boolean"?bM(e):(r==="number"?FI:r==="string"?(n=sw(e))?(e=n,dq):Mze:e instanceof sw?dq:e instanceof Date?Fze:Tze(e)?Bze:Array.isArray(e)?kze:typeof e.valueOf!="function"&&typeof e.toString!="function"||isNaN(e)?Oze:FI)(t,e)}function wM(t,e){return t=+t,e=+e,function(r){return Math.round(t*(1-r)+e*r)}}function Lze(t,e){e===void 0&&(e=t,t=C1);for(var r=0,n=e.length-1,a=e[0],s=new Array(n<0?0:n);r<n;)s[r]=t(a,a=e[++r]);return function(o){var l=Math.max(0,Math.min(n-1,Math.floor(o*=n)));return s[l](o-l)}}function Uze(t){return function(){return t}}function OI(t){return+t}var fq=[0,1];function Ec(t){return t}function sO(t,e){return(e-=t=+t)?function(r){return(r-t)/e}:Uze(isNaN(e)?NaN:.5)}function Qze(t,e){var r;return t>e&&(r=t,t=e,e=r),function(n){return Math.max(t,Math.min(e,n))}}function Vze(t,e,r){var n=t[0],a=t[1],s=e[0],o=e[1];return a<n?(n=sO(a,n),s=r(o,s)):(n=sO(n,a),s=r(s,o)),function(l){return s(n(l))}}function Hze(t,e,r){var n=Math.min(t.length,e.length)-1,a=new Array(n),s=new Array(n),o=-1;for(t[n]<t[0]&&(t=t.slice().reverse(),e=e.slice().reverse());++o<n;)a[o]=sO(t[o],t[o+1]),s[o]=r(e[o],e[o+1]);return function(l){var c=tN(t,l,1,n)-1;return s[c](a[c](l))}}function nN(t,e){return e.domain(t.domain()).range(t.range()).interpolate(t.interpolate()).clamp(t.clamp()).unknown(t.unknown())}function YP(){var t=fq,e=fq,r=C1,n,a,s,o=Ec,l,c,u;function d(){var A=Math.min(t.length,e.length);return o!==Ec&&(o=Qze(t[0],t[A-1])),l=A>2?Hze:Vze,c=u=null,f}function f(A){return A==null||isNaN(A=+A)?s:(c||(c=l(t.map(n),e,r)))(n(o(A)))}return f.invert=function(A){return o(a((u||(u=l(e,t.map(n),FI)))(A)))},f.domain=function(A){return arguments.length?(t=Array.from(A,OI),d()):t.slice()},f.range=function(A){return arguments.length?(e=Array.from(A),d()):e.slice()},f.rangeRound=function(A){return e=Array.from(A),r=wM,d()},f.clamp=function(A){return arguments.length?(o=A?!0:Ec,d()):o!==Ec},f.interpolate=function(A){return arguments.length?(r=A,d()):r},f.unknown=function(A){return arguments.length?(s=A,f):s},function(A,h){return n=A,a=h,d()}}function NM(){return YP()(Ec,Ec)}function $ze(t){return Math.abs(t=Math.round(t))>=1e21?t.toLocaleString("en").replace(/,/g,""):t.toString(10)}function DI(t,e){if(!isFinite(t)||t===0)return null;var r=(t=e?t.toExponential(e-1):t.toExponential()).indexOf("e"),n=t.slice(0,r);return[n.length>1?n[0]+n.slice(2):n,+t.slice(r+1)]}function zv(t){return t=DI(Math.abs(t)),t?t[1]:NaN}function Gze(t,e){return function(r,n){for(var a=r.length,s=[],o=0,l=t[0],c=0;a>0&&l>0&&(c+l+1>n&&(l=Math.max(1,n-c)),s.push(r.substring(a-=l,a+l)),!((c+=l+1)>n));)l=t[o=(o+1)%t.length];return s.reverse().join(e)}}function Kze(t){return function(e){return e.replace(/[0-9]/g,function(r){return t[+r]})}}var qze=/^(?:(.)?([<>=^]))?([+\-( ])?([$#])?(0)?(\d+)?(,)?(\.\d+)?(~)?([a-z%])?$/i;function iw(t){if(!(e=qze.exec(t)))throw new Error("invalid format: "+t);var e;return new CM({fill:e[1],align:e[2],sign:e[3],symbol:e[4],zero:e[5],width:e[6],comma:e[7],precision:e[8]&&e[8].slice(1),trim:e[9],type:e[10]})}iw.prototype=CM.prototype;function CM(t){this.fill=t.fill===void 0?" ":t.fill+"",this.align=t.align===void 0?">":t.align+"",this.sign=t.sign===void 0?"-":t.sign+"",this.symbol=t.symbol===void 0?"":t.symbol+"",this.zero=!!t.zero,this.width=t.width===void 0?void 0:+t.width,this.comma=!!t.comma,this.precision=t.precision===void 0?void 0:+t.precision,this.trim=!!t.trim,this.type=t.type===void 0?"":t.type+""}CM.prototype.toString=function(){return this.fill+this.align+this.sign+this.symbol+(this.zero?"0":"")+(this.width===void 0?"":Math.max(1,this.width|0))+(this.comma?",":"")+(this.precision===void 0?"":"."+Math.max(0,this.precision|0))+(this.trim?"~":"")+this.type};function zze(t){e:for(var e=t.length,r=1,n=-1,a;r<e;++r)switch(t[r]){case".":n=a=r;break;case"0":n===0&&(n=r),a=r;break;default:if(!+t[r])break e;n>0&&(n=0);break}return n>0?t.slice(0,n)+t.slice(a+1):t}var RI;function Wze(t,e){var r=DI(t,e);if(!r)return RI=void 0,t.toPrecision(e);var n=r[0],a=r[1],s=a-(RI=Math.max(-8,Math.min(8,Math.floor(a/3)))*3)+1,o=n.length;return s===o?n:s>o?n+new Array(s-o+1).join("0"):s>0?n.slice(0,s)+"."+n.slice(s):"0."+new Array(1-s).join("0")+DI(t,Math.max(0,e+s-1))[0]}function hq(t,e){var r=DI(t,e);if(!r)return t+"";var n=r[0],a=r[1];return a<0?"0."+new Array(-a).join("0")+n:n.length>a+1?n.slice(0,a+1)+"."+n.slice(a+1):n+new Array(a-n.length+2).join("0")}const Aq={"%":(t,e)=>(t*100).toFixed(e),b:t=>Math.round(t).toString(2),c:t=>t+"",d:$ze,e:(t,e)=>t.toExponential(e),f:(t,e)=>t.toFixed(e),g:(t,e)=>t.toPrecision(e),o:t=>Math.round(t).toString(8),p:(t,e)=>hq(t*100,e),r:hq,s:Wze,X:t=>Math.round(t).toString(16).toUpperCase(),x:t=>Math.round(t).toString(16)};function mq(t){return t}var pq=Array.prototype.map,gq=["y","z","a","f","p","n","","m","","k","M","G","T","P","E","Z","Y"];function Xze(t){var e=t.grouping===void 0||t.thousands===void 0?mq:Gze(pq.call(t.grouping,Number),t.thousands+""),r=t.currency===void 0?"":t.currency[0]+"",n=t.currency===void 0?"":t.currency[1]+"",a=t.decimal===void 0?".":t.decimal+"",s=t.numerals===void 0?mq:Kze(pq.call(t.numerals,String)),o=t.percent===void 0?"%":t.percent+"",l=t.minus===void 0?"":t.minus+"",c=t.nan===void 0?"NaN":t.nan+"";function u(f,A){f=iw(f);var h=f.fill,m=f.align,p=f.sign,x=f.symbol,v=f.zero,y=f.width,b=f.comma,w=f.precision,j=f.trim,I=f.type;I==="n"?(b=!0,I="g"):Aq[I]||(w===void 0&&(w=12),j=!0,I="g"),(v||h==="0"&&m==="=")&&(v=!0,h="0",m="=");var _=(A&&A.prefix!==void 0?A.prefix:"")+(x==="$"?r:x==="#"&&/[boxX]/.test(I)?"0"+I.toLowerCase():""),S=(x==="$"?n:/[%p]/.test(I)?o:"")+(A&&A.suffix!==void 0?A.suffix:""),E=Aq[I],T=/[defgprs%]/.test(I);w=w===void 0?6:/[gprs]/.test(I)?Math.max(1,Math.min(21,w)):Math.max(0,Math.min(20,w));function k(B){var D=_,X=S,me,pe,he;if(I==="c")X=E(B)+X,B="";else{B=+B;var ve=B<0||1/B<0;if(B=isNaN(B)?c:E(Math.abs(B),w),j&&(B=zze(B)),ve&&+B==0&&p!=="+"&&(ve=!1),D=(ve?p==="("?p:l:p==="-"||p==="("?"":p)+D,X=(I==="s"&&!isNaN(B)&&RI!==void 0?gq[8+RI/3]:"")+X+(ve&&p==="("?")":""),T){for(me=-1,pe=B.length;++me<pe;)if(he=B.charCodeAt(me),48>he||he>57){X=(he===46?a+B.slice(me+1):B.slice(me))+X,B=B.slice(0,me);break}}}b&&!v&&(B=e(B,1/0));var ae=D.length+B.length+X.length,Pe=ae<y?new Array(y-ae+1).join(h):"";switch(b&&v&&(B=e(Pe+B,Pe.length?y-X.length:1/0),Pe=""),m){case"<":B=D+B+X+Pe;break;case"=":B=D+Pe+B+X;break;case"^":B=Pe.slice(0,ae=Pe.length>>1)+D+B+X+Pe.slice(ae);break;default:B=Pe+D+B+X;break}return s(B)}return k.toString=function(){return f+""},k}function d(f,A){var h=Math.max(-8,Math.min(8,Math.floor(zv(A)/3)))*3,m=Math.pow(10,-h),p=u((f=iw(f),f.type="f",f),{suffix:gq[8+h/3]});return function(x){return p(m*x)}}return{format:u,formatPrefix:d}}var S_,_M,ale;Yze({thousands:",",grouping:[3],currency:["$",""]});function Yze(t){return S_=Xze(t),_M=S_.format,ale=S_.formatPrefix,S_}function Jze(t){return Math.max(0,-zv(Math.abs(t)))}function Zze(t,e){return Math.max(0,Math.max(-8,Math.min(8,Math.floor(zv(e)/3)))*3-zv(Math.abs(t)))}function eWe(t,e){return t=Math.abs(t),e=Math.abs(e)-t,Math.max(0,zv(e)-zv(t))+1}function sle(t,e,r,n){var a=tO(t,e,r),s;switch(n=iw(n??",f"),n.type){case"s":{var o=Math.max(Math.abs(t),Math.abs(e));return n.precision==null&&!isNaN(s=Zze(a,o))&&(n.precision=s),ale(n,o)}case"":case"e":case"g":case"p":case"r":{n.precision==null&&!isNaN(s=eWe(a,Math.max(Math.abs(t),Math.abs(e))))&&(n.precision=s-(n.type==="e"));break}case"f":case"%":{n.precision==null&&!isNaN(s=Jze(a))&&(n.precision=s-(n.type==="%")*2);break}}return _M(n)}function Vm(t){var e=t.domain;return t.ticks=function(r){var n=e();return ZF(n[0],n[n.length-1],r??10)},t.tickFormat=function(r,n){var a=e();return sle(a[0],a[a.length-1],r??10,n)},t.nice=function(r){r==null&&(r=10);var n=e(),a=0,s=n.length-1,o=n[a],l=n[s],c,u,d=10;for(l<o&&(u=o,o=l,l=u,u=a,a=s,s=u);d-- >0;){if(u=eO(o,l,r),u===c)return n[a]=o,n[s]=l,e(n);if(u>0)o=Math.floor(o/u)*u,l=Math.ceil(l/u)*u;else if(u<0)o=Math.ceil(o*u)/u,l=Math.floor(l*u)/u;else break;c=u}return t},t}function ile(){var t=NM();return t.copy=function(){return nN(t,ile())},Vd.apply(t,arguments),Vm(t)}function ole(t){var e;function r(n){return n==null||isNaN(n=+n)?e:n}return r.invert=r,r.domain=r.range=function(n){return arguments.length?(t=Array.from(n,OI),r):t.slice()},r.unknown=function(n){return arguments.length?(e=n,r):e},r.copy=function(){return ole(t).unknown(e)},t=arguments.length?Array.from(t,OI):[0,1],Vm(r)}function lle(t,e){t=t.slice();var r=0,n=t.length-1,a=t[r],s=t[n],o;return s<a&&(o=r,r=n,n=o,o=a,a=s,s=o),t[r]=e.floor(a),t[n]=e.ceil(s),t}function xq(t){return Math.log(t)}function vq(t){return Math.exp(t)}function tWe(t){return-Math.log(-t)}function rWe(t){return-Math.exp(-t)}function nWe(t){return isFinite(t)?+("1e"+t):t<0?0:t}function aWe(t){return t===10?nWe:t===Math.E?Math.exp:e=>Math.pow(t,e)}function sWe(t){return t===Math.E?Math.log:t===10&&Math.log10||t===2&&Math.log2||(t=Math.log(t),e=>Math.log(e)/t)}function yq(t){return(e,r)=>-t(-e,r)}function EM(t){const e=t(xq,vq),r=e.domain;let n=10,a,s;function o(){return a=sWe(n),s=aWe(n),r()[0]<0?(a=yq(a),s=yq(s),t(tWe,rWe)):t(xq,vq),e}return e.base=function(l){return arguments.length?(n=+l,o()):n},e.domain=function(l){return arguments.length?(r(l),o()):r()},e.ticks=l=>{const c=r();let u=c[0],d=c[c.length-1];const f=d<u;f&&([u,d]=[d,u]);let A=a(u),h=a(d),m,p;const x=l==null?10:+l;let v=[];if(!(n%1)&&h-A<x){if(A=Math.floor(A),h=Math.ceil(h),u>0){for(;A<=h;++A)for(m=1;m<n;++m)if(p=A<0?m/s(-A):m*s(A),!(p<u)){if(p>d)break;v.push(p)}}else for(;A<=h;++A)for(m=n-1;m>=1;--m)if(p=A>0?m/s(-A):m*s(A),!(p<u)){if(p>d)break;v.push(p)}v.length*2<x&&(v=ZF(u,d,x))}else v=ZF(A,h,Math.min(h-A,x)).map(s);return f?v.reverse():v},e.tickFormat=(l,c)=>{if(l==null&&(l=10),c==null&&(c=n===10?"s":","),typeof c!="function"&&(!(n%1)&&(c=iw(c)).precision==null&&(c.trim=!0),c=_M(c)),l===1/0)return c;const u=Math.max(1,n*l/e.ticks().length);return d=>{let f=d/s(Math.round(a(d)));return f*n<n-.5&&(f*=n),f<=u?c(d):""}},e.nice=()=>r(lle(r(),{floor:l=>s(Math.floor(a(l))),ceil:l=>s(Math.ceil(a(l)))})),e}function cle(){const t=EM(YP()).domain([1,10]);return t.copy=()=>nN(t,cle()).base(t.base()),Vd.apply(t,arguments),t}function bq(t){return function(e){return Math.sign(e)*Math.log1p(Math.abs(e/t))}}function wq(t){return function(e){return Math.sign(e)*Math.expm1(Math.abs(e))*t}}function SM(t){var e=1,r=t(bq(e),wq(e));return r.constant=function(n){return arguments.length?t(bq(e=+n),wq(e)):e},Vm(r)}function ule(){var t=SM(YP());return t.copy=function(){return nN(t,ule()).constant(t.constant())},Vd.apply(t,arguments)}function Nq(t){return function(e){return e<0?-Math.pow(-e,t):Math.pow(e,t)}}function iWe(t){return t<0?-Math.sqrt(-t):Math.sqrt(t)}function oWe(t){return t<0?-t*t:t*t}function IM(t){var e=t(Ec,Ec),r=1;function n(){return r===1?t(Ec,Ec):r===.5?t(iWe,oWe):t(Nq(r),Nq(1/r))}return e.exponent=function(a){return arguments.length?(r=+a,n()):r},Vm(e)}function jM(){var t=IM(YP());return t.copy=function(){return nN(t,jM()).exponent(t.exponent())},Vd.apply(t,arguments),t}function lWe(){return jM.apply(null,arguments).exponent(.5)}function Cq(t){return Math.sign(t)*t*t}function cWe(t){return Math.sign(t)*Math.sqrt(Math.abs(t))}function dle(){var t=NM(),e=[0,1],r=!1,n;function a(s){var o=cWe(t(s));return isNaN(o)?n:r?Math.round(o):o}return a.invert=function(s){return t.invert(Cq(s))},a.domain=function(s){return arguments.length?(t.domain(s),a):t.domain()},a.range=function(s){return arguments.length?(t.range((e=Array.from(s,OI)).map(Cq)),a):e.slice()},a.rangeRound=function(s){return a.range(s).round(!0)},a.round=function(s){return arguments.length?(r=!!s,a):r},a.clamp=function(s){return arguments.length?(t.clamp(s),a):t.clamp()},a.unknown=function(s){return arguments.length?(n=s,a):n},a.copy=function(){return dle(t.domain(),e).round(r).clamp(t.clamp()).unknown(n)},Vd.apply(a,arguments),Vm(a)}function fle(){var t=[],e=[],r=[],n;function a(){var o=0,l=Math.max(1,e.length);for(r=new Array(l-1);++o<l;)r[o-1]=hze(t,o/l);return s}function s(o){return o==null||isNaN(o=+o)?n:e[tN(r,o)]}return s.invertExtent=function(o){var l=e.indexOf(o);return l<0?[NaN,NaN]:[l>0?r[l-1]:t[0],l<r.length?r[l]:t[t.length-1]]},s.domain=function(o){if(!arguments.length)return t.slice();t=[];for(let l of o)l!=null&&!isNaN(l=+l)&&t.push(l);return t.sort(Am),a()},s.range=function(o){return arguments.length?(e=Array.from(o),a()):e.slice()},s.unknown=function(o){return arguments.length?(n=o,s):n},s.quantiles=function(){return r.slice()},s.copy=function(){return fle().domain(t).range(e).unknown(n)},Vd.apply(s,arguments)}function hle(){var t=0,e=1,r=1,n=[.5],a=[0,1],s;function o(c){return c!=null&&c<=c?a[tN(n,c,0,r)]:s}function l(){var c=-1;for(n=new Array(r);++c<r;)n[c]=((c+1)*e-(c-r)*t)/(r+1);return o}return o.domain=function(c){return arguments.length?([t,e]=c,t=+t,e=+e,l()):[t,e]},o.range=function(c){return arguments.length?(r=(a=Array.from(c)).length-1,l()):a.slice()},o.invertExtent=function(c){var u=a.indexOf(c);return u<0?[NaN,NaN]:u<1?[t,n[0]]:u>=r?[n[r-1],e]:[n[u-1],n[u]]},o.unknown=function(c){return arguments.length&&(s=c),o},o.thresholds=function(){return n.slice()},o.copy=function(){return hle().domain([t,e]).range(a).unknown(s)},Vd.apply(Vm(o),arguments)}function Ale(){var t=[.5],e=[0,1],r,n=1;function a(s){return s!=null&&s<=s?e[tN(t,s,0,n)]:r}return a.domain=function(s){return arguments.length?(t=Array.from(s),n=Math.min(t.length,e.length-1),a):t.slice()},a.range=function(s){return arguments.length?(e=Array.from(s),n=Math.min(t.length,e.length-1),a):e.slice()},a.invertExtent=function(s){var o=e.indexOf(s);return[t[o-1],t[o]]},a.unknown=function(s){return arguments.length?(r=s,a):r},a.copy=function(){return Ale().domain(t).range(e).unknown(r)},Vd.apply(a,arguments)}const bB=new Date,wB=new Date;function Oo(t,e,r,n){function a(s){return t(s=arguments.length===0?new Date:new Date(+s)),s}return a.floor=s=>(t(s=new Date(+s)),s),a.ceil=s=>(t(s=new Date(s-1)),e(s,1),t(s),s),a.round=s=>{const o=a(s),l=a.ceil(s);return s-o<l-s?o:l},a.offset=(s,o)=>(e(s=new Date(+s),o==null?1:Math.floor(o)),s),a.range=(s,o,l)=>{const c=[];if(s=a.ceil(s),l=l==null?1:Math.floor(l),!(s<o)||!(l>0))return c;let u;do c.push(u=new Date(+s)),e(s,l),t(s);while(u<s&&s<o);return c},a.filter=s=>Oo(o=>{if(o>=o)for(;t(o),!s(o);)o.setTime(o-1)},(o,l)=>{if(o>=o)if(l<0)for(;++l<=0;)for(;e(o,-1),!s(o););else for(;--l>=0;)for(;e(o,1),!s(o););}),r&&(a.count=(s,o)=>(bB.setTime(+s),wB.setTime(+o),t(bB),t(wB),Math.floor(r(bB,wB))),a.every=s=>(s=Math.floor(s),!isFinite(s)||!(s>0)?null:s>1?a.filter(n?o=>n(o)%s===0:o=>a.count(0,o)%s===0):a)),a}const MI=Oo(()=>{},(t,e)=>{t.setTime(+t+e)},(t,e)=>e-t);MI.every=t=>(t=Math.floor(t),!isFinite(t)||!(t>0)?null:t>1?Oo(e=>{e.setTime(Math.floor(e/t)*t)},(e,r)=>{e.setTime(+e+r*t)},(e,r)=>(r-e)/t):MI);MI.range;const Yh=1e3,Ed=Yh*60,Jh=Ed*60,NA=Jh*24,PM=NA*7,_q=NA*30,NB=NA*365,jp=Oo(t=>{t.setTime(t-t.getMilliseconds())},(t,e)=>{t.setTime(+t+e*Yh)},(t,e)=>(e-t)/Yh,t=>t.getUTCSeconds());jp.range;const BM=Oo(t=>{t.setTime(t-t.getMilliseconds()-t.getSeconds()*Yh)},(t,e)=>{t.setTime(+t+e*Ed)},(t,e)=>(e-t)/Ed,t=>t.getMinutes());BM.range;const TM=Oo(t=>{t.setUTCSeconds(0,0)},(t,e)=>{t.setTime(+t+e*Ed)},(t,e)=>(e-t)/Ed,t=>t.getUTCMinutes());TM.range;const kM=Oo(t=>{t.setTime(t-t.getMilliseconds()-t.getSeconds()*Yh-t.getMinutes()*Ed)},(t,e)=>{t.setTime(+t+e*Jh)},(t,e)=>(e-t)/Jh,t=>t.getHours());kM.range;const FM=Oo(t=>{t.setUTCMinutes(0,0,0)},(t,e)=>{t.setTime(+t+e*Jh)},(t,e)=>(e-t)/Jh,t=>t.getUTCHours());FM.range;const aN=Oo(t=>t.setHours(0,0,0,0),(t,e)=>t.setDate(t.getDate()+e),(t,e)=>(e-t-(e.getTimezoneOffset()-t.getTimezoneOffset())*Ed)/NA,t=>t.getDate()-1);aN.range;const JP=Oo(t=>{t.setUTCHours(0,0,0,0)},(t,e)=>{t.setUTCDate(t.getUTCDate()+e)},(t,e)=>(e-t)/NA,t=>t.getUTCDate()-1);JP.range;const mle=Oo(t=>{t.setUTCHours(0,0,0,0)},(t,e)=>{t.setUTCDate(t.getUTCDate()+e)},(t,e)=>(e-t)/NA,t=>Math.floor(t/NA));mle.range;function Hg(t){return Oo(e=>{e.setDate(e.getDate()-(e.getDay()+7-t)%7),e.setHours(0,0,0,0)},(e,r)=>{e.setDate(e.getDate()+r*7)},(e,r)=>(r-e-(r.getTimezoneOffset()-e.getTimezoneOffset())*Ed)/PM)}const ZP=Hg(0),LI=Hg(1),uWe=Hg(2),dWe=Hg(3),Wv=Hg(4),fWe=Hg(5),hWe=Hg(6);ZP.range;LI.range;uWe.range;dWe.range;Wv.range;fWe.range;hWe.range;function $g(t){return Oo(e=>{e.setUTCDate(e.getUTCDate()-(e.getUTCDay()+7-t)%7),e.setUTCHours(0,0,0,0)},(e,r)=>{e.setUTCDate(e.getUTCDate()+r*7)},(e,r)=>(r-e)/PM)}const e4=$g(0),UI=$g(1),AWe=$g(2),mWe=$g(3),Xv=$g(4),pWe=$g(5),gWe=$g(6);e4.range;UI.range;AWe.range;mWe.range;Xv.range;pWe.range;gWe.range;const OM=Oo(t=>{t.setDate(1),t.setHours(0,0,0,0)},(t,e)=>{t.setMonth(t.getMonth()+e)},(t,e)=>e.getMonth()-t.getMonth()+(e.getFullYear()-t.getFullYear())*12,t=>t.getMonth());OM.range;const DM=Oo(t=>{t.setUTCDate(1),t.setUTCHours(0,0,0,0)},(t,e)=>{t.setUTCMonth(t.getUTCMonth()+e)},(t,e)=>e.getUTCMonth()-t.getUTCMonth()+(e.getUTCFullYear()-t.getUTCFullYear())*12,t=>t.getUTCMonth());DM.range;const CA=Oo(t=>{t.setMonth(0,1),t.setHours(0,0,0,0)},(t,e)=>{t.setFullYear(t.getFullYear()+e)},(t,e)=>e.getFullYear()-t.getFullYear(),t=>t.getFullYear());CA.every=t=>!isFinite(t=Math.floor(t))||!(t>0)?null:Oo(e=>{e.setFullYear(Math.floor(e.getFullYear()/t)*t),e.setMonth(0,1),e.setHours(0,0,0,0)},(e,r)=>{e.setFullYear(e.getFullYear()+r*t)});CA.range;const _A=Oo(t=>{t.setUTCMonth(0,1),t.setUTCHours(0,0,0,0)},(t,e)=>{t.setUTCFullYear(t.getUTCFullYear()+e)},(t,e)=>e.getUTCFullYear()-t.getUTCFullYear(),t=>t.getUTCFullYear());_A.every=t=>!isFinite(t=Math.floor(t))||!(t>0)?null:Oo(e=>{e.setUTCFullYear(Math.floor(e.getUTCFullYear()/t)*t),e.setUTCMonth(0,1),e.setUTCHours(0,0,0,0)},(e,r)=>{e.setUTCFullYear(e.getUTCFullYear()+r*t)});_A.range;function ple(t,e,r,n,a,s){const o=[[jp,1,Yh],[jp,5,5*Yh],[jp,15,15*Yh],[jp,30,30*Yh],[s,1,Ed],[s,5,5*Ed],[s,15,15*Ed],[s,30,30*Ed],[a,1,Jh],[a,3,3*Jh],[a,6,6*Jh],[a,12,12*Jh],[n,1,NA],[n,2,2*NA],[r,1,PM],[e,1,_q],[e,3,3*_q],[t,1,NB]];function l(u,d,f){const A=d<u;A&&([u,d]=[d,u]);const h=f&&typeof f.range=="function"?f:c(u,d,f),m=h?h.range(u,+d+1):[];return A?m.reverse():m}function c(u,d,f){const A=Math.abs(d-u)/f,h=gM(([,,x])=>x).right(o,A);if(h===o.length)return t.every(tO(u/NB,d/NB,f));if(h===0)return MI.every(Math.max(tO(u,d,f),1));const[m,p]=o[A/o[h-1][2]<o[h][2]/A?h-1:h];return m.every(p)}return[l,c]}const[xWe,vWe]=ple(_A,DM,e4,mle,FM,TM),[yWe,bWe]=ple(CA,OM,ZP,aN,kM,BM);function CB(t){if(0<=t.y&&t.y<100){var e=new Date(-1,t.m,t.d,t.H,t.M,t.S,t.L);return e.setFullYear(t.y),e}return new Date(t.y,t.m,t.d,t.H,t.M,t.S,t.L)}function _B(t){if(0<=t.y&&t.y<100){var e=new Date(Date.UTC(-1,t.m,t.d,t.H,t.M,t.S,t.L));return e.setUTCFullYear(t.y),e}return new Date(Date.UTC(t.y,t.m,t.d,t.H,t.M,t.S,t.L))}function Sy(t,e,r){return{y:t,m:e,d:r,H:0,M:0,S:0,L:0}}function wWe(t){var e=t.dateTime,r=t.date,n=t.time,a=t.periods,s=t.days,o=t.shortDays,l=t.months,c=t.shortMonths,u=Iy(a),d=jy(a),f=Iy(s),A=jy(s),h=Iy(o),m=jy(o),p=Iy(l),x=jy(l),v=Iy(c),y=jy(c),b={a:he,A:ve,b:ae,B:Pe,c:null,d:Bq,e:Bq,f:GWe,g:tXe,G:nXe,H:VWe,I:HWe,j:$We,L:gle,m:KWe,M:qWe,p:ke,q:O,Q:Fq,s:Oq,S:zWe,u:WWe,U:XWe,V:YWe,w:JWe,W:ZWe,x:null,X:null,y:eXe,Y:rXe,Z:aXe,"%":kq},w={a:G,A:z,b:U,B:Y,c:null,d:Tq,e:Tq,f:lXe,g:xXe,G:yXe,H:sXe,I:iXe,j:oXe,L:vle,m:cXe,M:uXe,p:ee,q:M,Q:Fq,s:Oq,S:dXe,u:fXe,U:hXe,V:AXe,w:mXe,W:pXe,x:null,X:null,y:gXe,Y:vXe,Z:bXe,"%":kq},j={a:T,A:k,b:B,B:D,c:X,d:jq,e:jq,f:MWe,g:Iq,G:Sq,H:Pq,I:Pq,j:FWe,L:RWe,m:kWe,M:OWe,p:E,q:TWe,Q:UWe,s:QWe,S:DWe,u:SWe,U:IWe,V:jWe,w:EWe,W:PWe,x:me,X:pe,y:Iq,Y:Sq,Z:BWe,"%":LWe};b.x=I(r,b),b.X=I(n,b),b.c=I(e,b),w.x=I(r,w),w.X=I(n,w),w.c=I(e,w);function I(H,te){return function(Ce){var V=[],We=-1,ie=0,J=H.length,Oe,fe,_e;for(Ce instanceof Date||(Ce=new Date(+Ce));++We<J;)H.charCodeAt(We)===37&&(V.push(H.slice(ie,We)),(fe=Eq[Oe=H.charAt(++We)])!=null?Oe=H.charAt(++We):fe=Oe==="e"?" ":"0",(_e=te[Oe])&&(Oe=_e(Ce,fe)),V.push(Oe),ie=We+1);return V.push(H.slice(ie,We)),V.join("")}}function _(H,te){return function(Ce){var V=Sy(1900,void 0,1),We=S(V,H,Ce+="",0),ie,J;if(We!=Ce.length)return null;if("Q"in V)return new Date(V.Q);if("s"in V)return new Date(V.s*1e3+("L"in V?V.L:0));if(te&&!("Z"in V)&&(V.Z=0),"p"in V&&(V.H=V.H%12+V.p*12),V.m===void 0&&(V.m="q"in V?V.q:0),"V"in V){if(V.V<1||V.V>53)return null;"w"in V||(V.w=1),"Z"in V?(ie=_B(Sy(V.y,0,1)),J=ie.getUTCDay(),ie=J>4||J===0?UI.ceil(ie):UI(ie),ie=JP.offset(ie,(V.V-1)*7),V.y=ie.getUTCFullYear(),V.m=ie.getUTCMonth(),V.d=ie.getUTCDate()+(V.w+6)%7):(ie=CB(Sy(V.y,0,1)),J=ie.getDay(),ie=J>4||J===0?LI.ceil(ie):LI(ie),ie=aN.offset(ie,(V.V-1)*7),V.y=ie.getFullYear(),V.m=ie.getMonth(),V.d=ie.getDate()+(V.w+6)%7)}else("W"in V||"U"in V)&&("w"in V||(V.w="u"in V?V.u%7:"W"in V?1:0),J="Z"in V?_B(Sy(V.y,0,1)).getUTCDay():CB(Sy(V.y,0,1)).getDay(),V.m=0,V.d="W"in V?(V.w+6)%7+V.W*7-(J+5)%7:V.w+V.U*7-(J+6)%7);return"Z"in V?(V.H+=V.Z/100|0,V.M+=V.Z%100,_B(V)):CB(V)}}function S(H,te,Ce,V){for(var We=0,ie=te.length,J=Ce.length,Oe,fe;We<ie;){if(V>=J)return-1;if(Oe=te.charCodeAt(We++),Oe===37){if(Oe=te.charAt(We++),fe=j[Oe in Eq?te.charAt(We++):Oe],!fe||(V=fe(H,Ce,V))<0)return-1}else if(Oe!=Ce.charCodeAt(V++))return-1}return V}function E(H,te,Ce){var V=u.exec(te.slice(Ce));return V?(H.p=d.get(V[0].toLowerCase()),Ce+V[0].length):-1}function T(H,te,Ce){var V=h.exec(te.slice(Ce));return V?(H.w=m.get(V[0].toLowerCase()),Ce+V[0].length):-1}function k(H,te,Ce){var V=f.exec(te.slice(Ce));return V?(H.w=A.get(V[0].toLowerCase()),Ce+V[0].length):-1}function B(H,te,Ce){var V=v.exec(te.slice(Ce));return V?(H.m=y.get(V[0].toLowerCase()),Ce+V[0].length):-1}function D(H,te,Ce){var V=p.exec(te.slice(Ce));return V?(H.m=x.get(V[0].toLowerCase()),Ce+V[0].length):-1}function X(H,te,Ce){return S(H,e,te,Ce)}function me(H,te,Ce){return S(H,r,te,Ce)}function pe(H,te,Ce){return S(H,n,te,Ce)}function he(H){return o[H.getDay()]}function ve(H){return s[H.getDay()]}function ae(H){return c[H.getMonth()]}function Pe(H){return l[H.getMonth()]}function ke(H){return a[+(H.getHours()>=12)]}function O(H){return 1+~~(H.getMonth()/3)}function G(H){return o[H.getUTCDay()]}function z(H){return s[H.getUTCDay()]}function U(H){return c[H.getUTCMonth()]}function Y(H){return l[H.getUTCMonth()]}function ee(H){return a[+(H.getUTCHours()>=12)]}function M(H){return 1+~~(H.getUTCMonth()/3)}return{format:function(H){var te=I(H+="",b);return te.toString=function(){return H},te},parse:function(H){var te=_(H+="",!1);return te.toString=function(){return H},te},utcFormat:function(H){var te=I(H+="",w);return te.toString=function(){return H},te},utcParse:function(H){var te=_(H+="",!0);return te.toString=function(){return H},te}}}var Eq={"-":"",_:" ",0:"0"},al=/^\s*\d+/,NWe=/^%/,CWe=/[\\^$*+?|[\]().{}]/g;function Ba(t,e,r){var n=t<0?"-":"",a=(n?-t:t)+"",s=a.length;return n+(s<r?new Array(r-s+1).join(e)+a:a)}function _We(t){return t.replace(CWe,"\\$&")}function Iy(t){return new RegExp("^(?:"+t.map(_We).join("|")+")","i")}function jy(t){return new Map(t.map((e,r)=>[e.toLowerCase(),r]))}function EWe(t,e,r){var n=al.exec(e.slice(r,r+1));return n?(t.w=+n[0],r+n[0].length):-1}function SWe(t,e,r){var n=al.exec(e.slice(r,r+1));return n?(t.u=+n[0],r+n[0].length):-1}function IWe(t,e,r){var n=al.exec(e.slice(r,r+2));return n?(t.U=+n[0],r+n[0].length):-1}function jWe(t,e,r){var n=al.exec(e.slice(r,r+2));return n?(t.V=+n[0],r+n[0].length):-1}function PWe(t,e,r){var n=al.exec(e.slice(r,r+2));return n?(t.W=+n[0],r+n[0].length):-1}function Sq(t,e,r){var n=al.exec(e.slice(r,r+4));return n?(t.y=+n[0],r+n[0].length):-1}function Iq(t,e,r){var n=al.exec(e.slice(r,r+2));return n?(t.y=+n[0]+(+n[0]>68?1900:2e3),r+n[0].length):-1}function BWe(t,e,r){var n=/^(Z)|([+-]\d\d)(?::?(\d\d))?/.exec(e.slice(r,r+6));return n?(t.Z=n[1]?0:-(n[2]+(n[3]||"00")),r+n[0].length):-1}function TWe(t,e,r){var n=al.exec(e.slice(r,r+1));return n?(t.q=n[0]*3-3,r+n[0].length):-1}function kWe(t,e,r){var n=al.exec(e.slice(r,r+2));return n?(t.m=n[0]-1,r+n[0].length):-1}function jq(t,e,r){var n=al.exec(e.slice(r,r+2));return n?(t.d=+n[0],r+n[0].length):-1}function FWe(t,e,r){var n=al.exec(e.slice(r,r+3));return n?(t.m=0,t.d=+n[0],r+n[0].length):-1}function Pq(t,e,r){var n=al.exec(e.slice(r,r+2));return n?(t.H=+n[0],r+n[0].length):-1}function OWe(t,e,r){var n=al.exec(e.slice(r,r+2));return n?(t.M=+n[0],r+n[0].length):-1}function DWe(t,e,r){var n=al.exec(e.slice(r,r+2));return n?(t.S=+n[0],r+n[0].length):-1}function RWe(t,e,r){var n=al.exec(e.slice(r,r+3));return n?(t.L=+n[0],r+n[0].length):-1}function MWe(t,e,r){var n=al.exec(e.slice(r,r+6));return n?(t.L=Math.floor(n[0]/1e3),r+n[0].length):-1}function LWe(t,e,r){var n=NWe.exec(e.slice(r,r+1));return n?r+n[0].length:-1}function UWe(t,e,r){var n=al.exec(e.slice(r));return n?(t.Q=+n[0],r+n[0].length):-1}function QWe(t,e,r){var n=al.exec(e.slice(r));return n?(t.s=+n[0],r+n[0].length):-1}function Bq(t,e){return Ba(t.getDate(),e,2)}function VWe(t,e){return Ba(t.getHours(),e,2)}function HWe(t,e){return Ba(t.getHours()%12||12,e,2)}function $We(t,e){return Ba(1+aN.count(CA(t),t),e,3)}function gle(t,e){return Ba(t.getMilliseconds(),e,3)}function GWe(t,e){return gle(t,e)+"000"}function KWe(t,e){return Ba(t.getMonth()+1,e,2)}function qWe(t,e){return Ba(t.getMinutes(),e,2)}function zWe(t,e){return Ba(t.getSeconds(),e,2)}function WWe(t){var e=t.getDay();return e===0?7:e}function XWe(t,e){return Ba(ZP.count(CA(t)-1,t),e,2)}function xle(t){var e=t.getDay();return e>=4||e===0?Wv(t):Wv.ceil(t)}function YWe(t,e){return t=xle(t),Ba(Wv.count(CA(t),t)+(CA(t).getDay()===4),e,2)}function JWe(t){return t.getDay()}function ZWe(t,e){return Ba(LI.count(CA(t)-1,t),e,2)}function eXe(t,e){return Ba(t.getFullYear()%100,e,2)}function tXe(t,e){return t=xle(t),Ba(t.getFullYear()%100,e,2)}function rXe(t,e){return Ba(t.getFullYear()%1e4,e,4)}function nXe(t,e){var r=t.getDay();return t=r>=4||r===0?Wv(t):Wv.ceil(t),Ba(t.getFullYear()%1e4,e,4)}function aXe(t){var e=t.getTimezoneOffset();return(e>0?"-":(e*=-1,"+"))+Ba(e/60|0,"0",2)+Ba(e%60,"0",2)}function Tq(t,e){return Ba(t.getUTCDate(),e,2)}function sXe(t,e){return Ba(t.getUTCHours(),e,2)}function iXe(t,e){return Ba(t.getUTCHours()%12||12,e,2)}function oXe(t,e){return Ba(1+JP.count(_A(t),t),e,3)}function vle(t,e){return Ba(t.getUTCMilliseconds(),e,3)}function lXe(t,e){return vle(t,e)+"000"}function cXe(t,e){return Ba(t.getUTCMonth()+1,e,2)}function uXe(t,e){return Ba(t.getUTCMinutes(),e,2)}function dXe(t,e){return Ba(t.getUTCSeconds(),e,2)}function fXe(t){var e=t.getUTCDay();return e===0?7:e}function hXe(t,e){return Ba(e4.count(_A(t)-1,t),e,2)}function yle(t){var e=t.getUTCDay();return e>=4||e===0?Xv(t):Xv.ceil(t)}function AXe(t,e){return t=yle(t),Ba(Xv.count(_A(t),t)+(_A(t).getUTCDay()===4),e,2)}function mXe(t){return t.getUTCDay()}function pXe(t,e){return Ba(UI.count(_A(t)-1,t),e,2)}function gXe(t,e){return Ba(t.getUTCFullYear()%100,e,2)}function xXe(t,e){return t=yle(t),Ba(t.getUTCFullYear()%100,e,2)}function vXe(t,e){return Ba(t.getUTCFullYear()%1e4,e,4)}function yXe(t,e){var r=t.getUTCDay();return t=r>=4||r===0?Xv(t):Xv.ceil(t),Ba(t.getUTCFullYear()%1e4,e,4)}function bXe(){return"+0000"}function kq(){return"%"}function Fq(t){return+t}function Oq(t){return Math.floor(+t/1e3)}var yx,ble,wle;wXe({dateTime:"%x, %X",date:"%-m/%-d/%Y",time:"%-I:%M:%S %p",periods:["AM","PM"],days:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],shortDays:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],months:["January","February","March","April","May","June","July","August","September","October","November","December"],shortMonths:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"]});function wXe(t){return yx=wWe(t),ble=yx.format,yx.parse,wle=yx.utcFormat,yx.utcParse,yx}function NXe(t){return new Date(t)}function CXe(t){return t instanceof Date?+t:+new Date(+t)}function RM(t,e,r,n,a,s,o,l,c,u){var d=NM(),f=d.invert,A=d.domain,h=u(".%L"),m=u(":%S"),p=u("%I:%M"),x=u("%I %p"),v=u("%a %d"),y=u("%b %d"),b=u("%B"),w=u("%Y");function j(I){return(c(I)<I?h:l(I)<I?m:o(I)<I?p:s(I)<I?x:n(I)<I?a(I)<I?v:y:r(I)<I?b:w)(I)}return d.invert=function(I){return new Date(f(I))},d.domain=function(I){return arguments.length?A(Array.from(I,CXe)):A().map(NXe)},d.ticks=function(I){var _=A();return t(_[0],_[_.length-1],I??10)},d.tickFormat=function(I,_){return _==null?j:u(_)},d.nice=function(I){var _=A();return(!I||typeof I.range!="function")&&(I=e(_[0],_[_.length-1],I??10)),I?A(lle(_,I)):d},d.copy=function(){return nN(d,RM(t,e,r,n,a,s,o,l,c,u))},d}function _Xe(){return Vd.apply(RM(yWe,bWe,CA,OM,ZP,aN,kM,BM,jp,ble).domain([new Date(2e3,0,1),new Date(2e3,0,2)]),arguments)}function EXe(){return Vd.apply(RM(xWe,vWe,_A,DM,e4,JP,FM,TM,jp,wle).domain([Date.UTC(2e3,0,1),Date.UTC(2e3,0,2)]),arguments)}function t4(){var t=0,e=1,r,n,a,s,o=Ec,l=!1,c;function u(f){return f==null||isNaN(f=+f)?c:o(a===0?.5:(f=(s(f)-r)*a,l?Math.max(0,Math.min(1,f)):f))}u.domain=function(f){return arguments.length?([t,e]=f,r=s(t=+t),n=s(e=+e),a=r===n?0:1/(n-r),u):[t,e]},u.clamp=function(f){return arguments.length?(l=!!f,u):l},u.interpolator=function(f){return arguments.length?(o=f,u):o};function d(f){return function(A){var h,m;return arguments.length?([h,m]=A,o=f(h,m),u):[o(0),o(1)]}}return u.range=d(C1),u.rangeRound=d(wM),u.unknown=function(f){return arguments.length?(c=f,u):c},function(f){return s=f,r=f(t),n=f(e),a=r===n?0:1/(n-r),u}}function Hm(t,e){return e.domain(t.domain()).interpolator(t.interpolator()).clamp(t.clamp()).unknown(t.unknown())}function Nle(){var t=Vm(t4()(Ec));return t.copy=function(){return Hm(t,Nle())},UA.apply(t,arguments)}function Cle(){var t=EM(t4()).domain([1,10]);return t.copy=function(){return Hm(t,Cle()).base(t.base())},UA.apply(t,arguments)}function _le(){var t=SM(t4());return t.copy=function(){return Hm(t,_le()).constant(t.constant())},UA.apply(t,arguments)}function MM(){var t=IM(t4());return t.copy=function(){return Hm(t,MM()).exponent(t.exponent())},UA.apply(t,arguments)}function SXe(){return MM.apply(null,arguments).exponent(.5)}function Ele(){var t=[],e=Ec;function r(n){if(n!=null&&!isNaN(n=+n))return e((tN(t,n,1)-1)/(t.length-1))}return r.domain=function(n){if(!arguments.length)return t.slice();t=[];for(let a of n)a!=null&&!isNaN(a=+a)&&t.push(a);return t.sort(Am),r},r.interpolator=function(n){return arguments.length?(e=n,r):e},r.range=function(){return t.map((n,a)=>e(a/(t.length-1)))},r.quantiles=function(n){return Array.from({length:n+1},(a,s)=>fze(t,s/n))},r.copy=function(){return Ele(e).domain(t)},UA.apply(r,arguments)}function r4(){var t=0,e=.5,r=1,n=1,a,s,o,l,c,u=Ec,d,f=!1,A;function h(p){return isNaN(p=+p)?A:(p=.5+((p=+d(p))-s)*(n*p<n*s?l:c),u(f?Math.max(0,Math.min(1,p)):p))}h.domain=function(p){return arguments.length?([t,e,r]=p,a=d(t=+t),s=d(e=+e),o=d(r=+r),l=a===s?0:.5/(s-a),c=s===o?0:.5/(o-s),n=s<a?-1:1,h):[t,e,r]},h.clamp=function(p){return arguments.length?(f=!!p,h):f},h.interpolator=function(p){return arguments.length?(u=p,h):u};function m(p){return function(x){var v,y,b;return arguments.length?([v,y,b]=x,u=Lze(p,[v,y,b]),h):[u(0),u(.5),u(1)]}}return h.range=m(C1),h.rangeRound=m(wM),h.unknown=function(p){return arguments.length?(A=p,h):A},function(p){return d=p,a=p(t),s=p(e),o=p(r),l=a===s?0:.5/(s-a),c=s===o?0:.5/(o-s),n=s<a?-1:1,h}}function Sle(){var t=Vm(r4()(Ec));return t.copy=function(){return Hm(t,Sle())},UA.apply(t,arguments)}function Ile(){var t=EM(r4()).domain([.1,1,10]);return t.copy=function(){return Hm(t,Ile()).base(t.base())},UA.apply(t,arguments)}function jle(){var t=SM(r4());return t.copy=function(){return Hm(t,jle()).constant(t.constant())},UA.apply(t,arguments)}function LM(){var t=IM(r4());return t.copy=function(){return Hm(t,LM()).exponent(t.exponent())},UA.apply(t,arguments)}function IXe(){return LM.apply(null,arguments).exponent(.5)}const rb=Object.freeze(Object.defineProperty({__proto__:null,scaleBand:vM,scaleDiverging:Sle,scaleDivergingLog:Ile,scaleDivergingPow:LM,scaleDivergingSqrt:IXe,scaleDivergingSymlog:jle,scaleIdentity:ole,scaleImplicit:rO,scaleLinear:ile,scaleLog:cle,scaleOrdinal:xM,scalePoint:mze,scalePow:jM,scaleQuantile:fle,scaleQuantize:hle,scaleRadial:dle,scaleSequential:Nle,scaleSequentialLog:Cle,scaleSequentialPow:MM,scaleSequentialQuantile:Ele,scaleSequentialSqrt:SXe,scaleSequentialSymlog:_le,scaleSqrt:lWe,scaleSymlog:ule,scaleThreshold:Ale,scaleTime:_Xe,scaleUtc:EXe,tickFormat:sle},Symbol.toStringTag,{value:"Module"}));var QA=t=>t.chartData,n4=Kt([QA],t=>{var e=t.chartData!=null?t.chartData.length-1:0;return{chartData:t.chartData,computedData:t.computedData,dataEndIndex:e,dataStartIndex:0}}),Ple=(t,e,r,n)=>n?n4(t):QA(t),jXe=(t,e,r)=>r?n4(t):QA(t);function Bm(t){if(Array.isArray(t)&&t.length===2){var[e,r]=t;if(hi(e)&&hi(r))return!0}return!1}function Dq(t,e,r){return r?t:[Math.min(t[0],e[0]),Math.max(t[1],e[1])]}function Ble(t,e){if(e&&typeof t!="function"&&Array.isArray(t)&&t.length===2){var[r,n]=t,a,s;if(hi(r))a=r;else if(typeof r=="function")return;if(hi(n))s=n;else if(typeof n=="function")return;var o=[a,s];if(Bm(o))return o}}function PXe(t,e,r){if(!(!r&&e==null)){if(typeof t=="function"&&e!=null)try{var n=t(e,r);if(Bm(n))return Dq(n,e,r)}catch{}if(Array.isArray(t)&&t.length===2){var[a,s]=t,o,l;if(a==="auto")e!=null&&(o=Math.min(...e));else if(Cn(a))o=a;else if(typeof a=="function")try{e!=null&&(o=a(e==null?void 0:e[0]))}catch{}else if(typeof a=="string"&&ZG.test(a)){var c=ZG.exec(a);if(c==null||c[1]==null||e==null)o=void 0;else{var u=+c[1];o=e[0]-u}}else o=e==null?void 0:e[0];if(s==="auto")e!=null&&(l=Math.max(...e));else if(Cn(s))l=s;else if(typeof s=="function")try{e!=null&&(l=s(e==null?void 0:e[1]))}catch{}else if(typeof s=="string"&&eK.test(s)){var d=eK.exec(s);if(d==null||d[1]==null||e==null)l=void 0;else{var f=+d[1];l=e[1]+f}}else l=e==null?void 0:e[1];var A=[o,l];if(Bm(A))return e==null?A:Dq(A,e,r)}}}var _1=1e9,BXe={precision:20,rounding:4,toExpNeg:-7,toExpPos:21,LN10:"2.302585092994045684017991454684364207601101488628772976033327900967572609677352480235997205089598298341967784042286"},QM,Ks=!0,Md="[DecimalError] ",Kp=Md+"Invalid argument: ",UM=Md+"Exponent out of range: ",E1=Math.floor,fp=Math.pow,TXe=/^(\d+(\.\d*)?|\.\d+)(e[+-]?\d+)?$/i,Tu,qo=1e7,js=7,Tle=9007199254740991,QI=E1(Tle/js),sn={};sn.absoluteValue=sn.abs=function(){var t=new this.constructor(this);return t.s&&(t.s=1),t};sn.comparedTo=sn.cmp=function(t){var e,r,n,a,s=this;if(t=new s.constructor(t),s.s!==t.s)return s.s||-t.s;if(s.e!==t.e)return s.e>t.e^s.s<0?1:-1;for(n=s.d.length,a=t.d.length,e=0,r=n<a?n:a;e<r;++e)if(s.d[e]!==t.d[e])return s.d[e]>t.d[e]^s.s<0?1:-1;return n===a?0:n>a^s.s<0?1:-1};sn.decimalPlaces=sn.dp=function(){var t=this,e=t.d.length-1,r=(e-t.e)*js;if(e=t.d[e],e)for(;e%10==0;e/=10)r--;return r<0?0:r};sn.dividedBy=sn.div=function(t){return cA(this,new this.constructor(t))};sn.dividedToIntegerBy=sn.idiv=function(t){var e=this,r=e.constructor;return ms(cA(e,new r(t),0,1),r.precision)};sn.equals=sn.eq=function(t){return!this.cmp(t)};sn.exponent=function(){return oo(this)};sn.greaterThan=sn.gt=function(t){return this.cmp(t)>0};sn.greaterThanOrEqualTo=sn.gte=function(t){return this.cmp(t)>=0};sn.isInteger=sn.isint=function(){return this.e>this.d.length-2};sn.isNegative=sn.isneg=function(){return this.s<0};sn.isPositive=sn.ispos=function(){return this.s>0};sn.isZero=function(){return this.s===0};sn.lessThan=sn.lt=function(t){return this.cmp(t)<0};sn.lessThanOrEqualTo=sn.lte=function(t){return this.cmp(t)<1};sn.logarithm=sn.log=function(t){var e,r=this,n=r.constructor,a=n.precision,s=a+5;if(t===void 0)t=new n(10);else if(t=new n(t),t.s<1||t.eq(Tu))throw Error(Md+"NaN");if(r.s<1)throw Error(Md+(r.s?"NaN":"-Infinity"));return r.eq(Tu)?new n(0):(Ks=!1,e=cA(ow(r,s),ow(t,s),s),Ks=!0,ms(e,a))};sn.minus=sn.sub=function(t){var e=this;return t=new e.constructor(t),e.s==t.s?Ole(e,t):kle(e,(t.s=-t.s,t))};sn.modulo=sn.mod=function(t){var e,r=this,n=r.constructor,a=n.precision;if(t=new n(t),!t.s)throw Error(Md+"NaN");return r.s?(Ks=!1,e=cA(r,t,0,1).times(t),Ks=!0,r.minus(e)):ms(new n(r),a)};sn.naturalExponential=sn.exp=function(){return Fle(this)};sn.naturalLogarithm=sn.ln=function(){return ow(this)};sn.negated=sn.neg=function(){var t=new this.constructor(this);return t.s=-t.s||0,t};sn.plus=sn.add=function(t){var e=this;return t=new e.constructor(t),e.s==t.s?kle(e,t):Ole(e,(t.s=-t.s,t))};sn.precision=sn.sd=function(t){var e,r,n,a=this;if(t!==void 0&&t!==!!t&&t!==1&&t!==0)throw Error(Kp+t);if(e=oo(a)+1,n=a.d.length-1,r=n*js+1,n=a.d[n],n){for(;n%10==0;n/=10)r--;for(n=a.d[0];n>=10;n/=10)r++}return t&&e>r?e:r};sn.squareRoot=sn.sqrt=function(){var t,e,r,n,a,s,o,l=this,c=l.constructor;if(l.s<1){if(!l.s)return new c(0);throw Error(Md+"NaN")}for(t=oo(l),Ks=!1,a=Math.sqrt(+l),a==0||a==1/0?(e=eh(l.d),(e.length+t)%2==0&&(e+="0"),a=Math.sqrt(e),t=E1((t+1)/2)-(t<0||t%2),a==1/0?e="5e"+t:(e=a.toExponential(),e=e.slice(0,e.indexOf("e")+1)+t),n=new c(e)):n=new c(a.toString()),r=c.precision,a=o=r+3;;)if(s=n,n=s.plus(cA(l,s,o+2)).times(.5),eh(s.d).slice(0,o)===(e=eh(n.d)).slice(0,o)){if(e=e.slice(o-3,o+1),a==o&&e=="4999"){if(ms(s,r+1,0),s.times(s).eq(l)){n=s;break}}else if(e!="9999")break;o+=4}return Ks=!0,ms(n,r)};sn.times=sn.mul=function(t){var e,r,n,a,s,o,l,c,u,d=this,f=d.constructor,A=d.d,h=(t=new f(t)).d;if(!d.s||!t.s)return new f(0);for(t.s*=d.s,r=d.e+t.e,c=A.length,u=h.length,c<u&&(s=A,A=h,h=s,o=c,c=u,u=o),s=[],o=c+u,n=o;n--;)s.push(0);for(n=u;--n>=0;){for(e=0,a=c+n;a>n;)l=s[a]+h[n]*A[a-n-1]+e,s[a--]=l%qo|0,e=l/qo|0;s[a]=(s[a]+e)%qo|0}for(;!s[--o];)s.pop();return e?++r:s.shift(),t.d=s,t.e=r,Ks?ms(t,f.precision):t};sn.toDecimalPlaces=sn.todp=function(t,e){var r=this,n=r.constructor;return r=new n(r),t===void 0?r:(dh(t,0,_1),e===void 0?e=n.rounding:dh(e,0,8),ms(r,t+oo(r)+1,e))};sn.toExponential=function(t,e){var r,n=this,a=n.constructor;return t===void 0?r=wg(n,!0):(dh(t,0,_1),e===void 0?e=a.rounding:dh(e,0,8),n=ms(new a(n),t+1,e),r=wg(n,!0,t+1)),r};sn.toFixed=function(t,e){var r,n,a=this,s=a.constructor;return t===void 0?wg(a):(dh(t,0,_1),e===void 0?e=s.rounding:dh(e,0,8),n=ms(new s(a),t+oo(a)+1,e),r=wg(n.abs(),!1,t+oo(n)+1),a.isneg()&&!a.isZero()?"-"+r:r)};sn.toInteger=sn.toint=function(){var t=this,e=t.constructor;return ms(new e(t),oo(t)+1,e.rounding)};sn.toNumber=function(){return+this};sn.toPower=sn.pow=function(t){var e,r,n,a,s,o,l=this,c=l.constructor,u=12,d=+(t=new c(t));if(!t.s)return new c(Tu);if(l=new c(l),!l.s){if(t.s<1)throw Error(Md+"Infinity");return l}if(l.eq(Tu))return l;if(n=c.precision,t.eq(Tu))return ms(l,n);if(e=t.e,r=t.d.length-1,o=e>=r,s=l.s,o){if((r=d<0?-d:d)<=Tle){for(a=new c(Tu),e=Math.ceil(n/js+4),Ks=!1;r%2&&(a=a.times(l),Mq(a.d,e)),r=E1(r/2),r!==0;)l=l.times(l),Mq(l.d,e);return Ks=!0,t.s<0?new c(Tu).div(a):ms(a,n)}}else if(s<0)throw Error(Md+"NaN");return s=s<0&&t.d[Math.max(e,r)]&1?-1:1,l.s=1,Ks=!1,a=t.times(ow(l,n+u)),Ks=!0,a=Fle(a),a.s=s,a};sn.toPrecision=function(t,e){var r,n,a=this,s=a.constructor;return t===void 0?(r=oo(a),n=wg(a,r<=s.toExpNeg||r>=s.toExpPos)):(dh(t,1,_1),e===void 0?e=s.rounding:dh(e,0,8),a=ms(new s(a),t,e),r=oo(a),n=wg(a,t<=r||r<=s.toExpNeg,t)),n};sn.toSignificantDigits=sn.tosd=function(t,e){var r=this,n=r.constructor;return t===void 0?(t=n.precision,e=n.rounding):(dh(t,1,_1),e===void 0?e=n.rounding:dh(e,0,8)),ms(new n(r),t,e)};sn.toString=sn.valueOf=sn.val=sn.toJSON=sn[Symbol.for("nodejs.util.inspect.custom")]=function(){var t=this,e=oo(t),r=t.constructor;return wg(t,e<=r.toExpNeg||e>=r.toExpPos)};function kle(t,e){var r,n,a,s,o,l,c,u,d=t.constructor,f=d.precision;if(!t.s||!e.s)return e.s||(e=new d(t)),Ks?ms(e,f):e;if(c=t.d,u=e.d,o=t.e,a=e.e,c=c.slice(),s=o-a,s){for(s<0?(n=c,s=-s,l=u.length):(n=u,a=o,l=c.length),o=Math.ceil(f/js),l=o>l?o+1:l+1,s>l&&(s=l,n.length=1),n.reverse();s--;)n.push(0);n.reverse()}for(l=c.length,s=u.length,l-s<0&&(s=l,n=u,u=c,c=n),r=0;s;)r=(c[--s]=c[s]+u[s]+r)/qo|0,c[s]%=qo;for(r&&(c.unshift(r),++a),l=c.length;c[--l]==0;)c.pop();return e.d=c,e.e=a,Ks?ms(e,f):e}function dh(t,e,r){if(t!==~~t||t<e||t>r)throw Error(Kp+t)}function eh(t){var e,r,n,a=t.length-1,s="",o=t[0];if(a>0){for(s+=o,e=1;e<a;e++)n=t[e]+"",r=js-n.length,r&&(s+=I0(r)),s+=n;o=t[e],n=o+"",r=js-n.length,r&&(s+=I0(r))}else if(o===0)return"0";for(;o%10===0;)o/=10;return s+o}var cA=function(){function t(n,a){var s,o=0,l=n.length;for(n=n.slice();l--;)s=n[l]*a+o,n[l]=s%qo|0,o=s/qo|0;return o&&n.unshift(o),n}function e(n,a,s,o){var l,c;if(s!=o)c=s>o?1:-1;else for(l=c=0;l<s;l++)if(n[l]!=a[l]){c=n[l]>a[l]?1:-1;break}return c}function r(n,a,s){for(var o=0;s--;)n[s]-=o,o=n[s]<a[s]?1:0,n[s]=o*qo+n[s]-a[s];for(;!n[0]&&n.length>1;)n.shift()}return function(n,a,s,o){var l,c,u,d,f,A,h,m,p,x,v,y,b,w,j,I,_,S,E=n.constructor,T=n.s==a.s?1:-1,k=n.d,B=a.d;if(!n.s)return new E(n);if(!a.s)throw Error(Md+"Division by zero");for(c=n.e-a.e,_=B.length,j=k.length,h=new E(T),m=h.d=[],u=0;B[u]==(k[u]||0);)++u;if(B[u]>(k[u]||0)&&--c,s==null?y=s=E.precision:o?y=s+(oo(n)-oo(a))+1:y=s,y<0)return new E(0);if(y=y/js+2|0,u=0,_==1)for(d=0,B=B[0],y++;(u<j||d)&&y--;u++)b=d*qo+(k[u]||0),m[u]=b/B|0,d=b%B|0;else{for(d=qo/(B[0]+1)|0,d>1&&(B=t(B,d),k=t(k,d),_=B.length,j=k.length),w=_,p=k.slice(0,_),x=p.length;x<_;)p[x++]=0;S=B.slice(),S.unshift(0),I=B[0],B[1]>=qo/2&&++I;do d=0,l=e(B,p,_,x),l<0?(v=p[0],_!=x&&(v=v*qo+(p[1]||0)),d=v/I|0,d>1?(d>=qo&&(d=qo-1),f=t(B,d),A=f.length,x=p.length,l=e(f,p,A,x),l==1&&(d--,r(f,_<A?S:B,A))):(d==0&&(l=d=1),f=B.slice()),A=f.length,A<x&&f.unshift(0),r(p,f,x),l==-1&&(x=p.length,l=e(B,p,_,x),l<1&&(d++,r(p,_<x?S:B,x))),x=p.length):l===0&&(d++,p=[0]),m[u++]=d,l&&p[0]?p[x++]=k[w]||0:(p=[k[w]],x=1);while((w++<j||p[0]!==void 0)&&y--)}return m[0]||m.shift(),h.e=c,ms(h,o?s+oo(h)+1:s)}}();function Fle(t,e){var r,n,a,s,o,l,c=0,u=0,d=t.constructor,f=d.precision;if(oo(t)>16)throw Error(UM+oo(t));if(!t.s)return new d(Tu);for(Ks=!1,l=f,o=new d(.03125);t.abs().gte(.1);)t=t.times(o),u+=5;for(n=Math.log(fp(2,u))/Math.LN10*2+5|0,l+=n,r=a=s=new d(Tu),d.precision=l;;){if(a=ms(a.times(t),l),r=r.times(++c),o=s.plus(cA(a,r,l)),eh(o.d).slice(0,l)===eh(s.d).slice(0,l)){for(;u--;)s=ms(s.times(s),l);return d.precision=f,e==null?(Ks=!0,ms(s,f)):s}s=o}}function oo(t){for(var e=t.e*js,r=t.d[0];r>=10;r/=10)e++;return e}function EB(t,e,r){if(e>t.LN10.sd())throw Ks=!0,r&&(t.precision=r),Error(Md+"LN10 precision limit exceeded");return ms(new t(t.LN10),e)}function I0(t){for(var e="";t--;)e+="0";return e}function ow(t,e){var r,n,a,s,o,l,c,u,d,f=1,A=10,h=t,m=h.d,p=h.constructor,x=p.precision;if(h.s<1)throw Error(Md+(h.s?"NaN":"-Infinity"));if(h.eq(Tu))return new p(0);if(e==null?(Ks=!1,u=x):u=e,h.eq(10))return e==null&&(Ks=!0),EB(p,u);if(u+=A,p.precision=u,r=eh(m),n=r.charAt(0),s=oo(h),Math.abs(s)<15e14){for(;n<7&&n!=1||n==1&&r.charAt(1)>3;)h=h.times(t),r=eh(h.d),n=r.charAt(0),f++;s=oo(h),n>1?(h=new p("0."+r),s++):h=new p(n+"."+r.slice(1))}else return c=EB(p,u+2,x).times(s+""),h=ow(new p(n+"."+r.slice(1)),u-A).plus(c),p.precision=x,e==null?(Ks=!0,ms(h,x)):h;for(l=o=h=cA(h.minus(Tu),h.plus(Tu),u),d=ms(h.times(h),u),a=3;;){if(o=ms(o.times(d),u),c=l.plus(cA(o,new p(a),u)),eh(c.d).slice(0,u)===eh(l.d).slice(0,u))return l=l.times(2),s!==0&&(l=l.plus(EB(p,u+2,x).times(s+""))),l=cA(l,new p(f),u),p.precision=x,e==null?(Ks=!0,ms(l,x)):l;l=c,a+=2}}function Rq(t,e){var r,n,a;for((r=e.indexOf("."))>-1&&(e=e.replace(".","")),(n=e.search(/e/i))>0?(r<0&&(r=n),r+=+e.slice(n+1),e=e.substring(0,n)):r<0&&(r=e.length),n=0;e.charCodeAt(n)===48;)++n;for(a=e.length;e.charCodeAt(a-1)===48;)--a;if(e=e.slice(n,a),e){if(a-=n,r=r-n-1,t.e=E1(r/js),t.d=[],n=(r+1)%js,r<0&&(n+=js),n<a){for(n&&t.d.push(+e.slice(0,n)),a-=js;n<a;)t.d.push(+e.slice(n,n+=js));e=e.slice(n),n=js-e.length}else n-=a;for(;n--;)e+="0";if(t.d.push(+e),Ks&&(t.e>QI||t.e<-QI))throw Error(UM+r)}else t.s=0,t.e=0,t.d=[0];return t}function ms(t,e,r){var n,a,s,o,l,c,u,d,f=t.d;for(o=1,s=f[0];s>=10;s/=10)o++;if(n=e-o,n<0)n+=js,a=e,u=f[d=0];else{if(d=Math.ceil((n+1)/js),s=f.length,d>=s)return t;for(u=s=f[d],o=1;s>=10;s/=10)o++;n%=js,a=n-js+o}if(r!==void 0&&(s=fp(10,o-a-1),l=u/s%10|0,c=e<0||f[d+1]!==void 0||u%s,c=r<4?(l||c)&&(r==0||r==(t.s<0?3:2)):l>5||l==5&&(r==4||c||r==6&&(n>0?a>0?u/fp(10,o-a):0:f[d-1])%10&1||r==(t.s<0?8:7))),e<1||!f[0])return c?(s=oo(t),f.length=1,e=e-s-1,f[0]=fp(10,(js-e%js)%js),t.e=E1(-e/js)||0):(f.length=1,f[0]=t.e=t.s=0),t;if(n==0?(f.length=d,s=1,d--):(f.length=d+1,s=fp(10,js-n),f[d]=a>0?(u/fp(10,o-a)%fp(10,a)|0)*s:0),c)for(;;)if(d==0){(f[0]+=s)==qo&&(f[0]=1,++t.e);break}else{if(f[d]+=s,f[d]!=qo)break;f[d--]=0,s=1}for(n=f.length;f[--n]===0;)f.pop();if(Ks&&(t.e>QI||t.e<-QI))throw Error(UM+oo(t));return t}function Ole(t,e){var r,n,a,s,o,l,c,u,d,f,A=t.constructor,h=A.precision;if(!t.s||!e.s)return e.s?e.s=-e.s:e=new A(t),Ks?ms(e,h):e;if(c=t.d,f=e.d,n=e.e,u=t.e,c=c.slice(),o=u-n,o){for(d=o<0,d?(r=c,o=-o,l=f.length):(r=f,n=u,l=c.length),a=Math.max(Math.ceil(h/js),l)+2,o>a&&(o=a,r.length=1),r.reverse(),a=o;a--;)r.push(0);r.reverse()}else{for(a=c.length,l=f.length,d=a<l,d&&(l=a),a=0;a<l;a++)if(c[a]!=f[a]){d=c[a]<f[a];break}o=0}for(d&&(r=c,c=f,f=r,e.s=-e.s),l=c.length,a=f.length-l;a>0;--a)c[l++]=0;for(a=f.length;a>o;){if(c[--a]<f[a]){for(s=a;s&&c[--s]===0;)c[s]=qo-1;--c[s],c[a]+=qo}c[a]-=f[a]}for(;c[--l]===0;)c.pop();for(;c[0]===0;c.shift())--n;return c[0]?(e.d=c,e.e=n,Ks?ms(e,h):e):new A(0)}function wg(t,e,r){var n,a=oo(t),s=eh(t.d),o=s.length;return e?(r&&(n=r-o)>0?s=s.charAt(0)+"."+s.slice(1)+I0(n):o>1&&(s=s.charAt(0)+"."+s.slice(1)),s=s+(a<0?"e":"e+")+a):a<0?(s="0."+I0(-a-1)+s,r&&(n=r-o)>0&&(s+=I0(n))):a>=o?(s+=I0(a+1-o),r&&(n=r-a-1)>0&&(s=s+"."+I0(n))):((n=a+1)<o&&(s=s.slice(0,n)+"."+s.slice(n)),r&&(n=r-o)>0&&(a+1===o&&(s+="."),s+=I0(n))),t.s<0?"-"+s:s}function Mq(t,e){if(t.length>e)return t.length=e,!0}function Dle(t){var e,r,n;function a(s){var o=this;if(!(o instanceof a))return new a(s);if(o.constructor=a,s instanceof a){o.s=s.s,o.e=s.e,o.d=(s=s.d)?s.slice():s;return}if(typeof s=="number"){if(s*0!==0)throw Error(Kp+s);if(s>0)o.s=1;else if(s<0)s=-s,o.s=-1;else{o.s=0,o.e=0,o.d=[0];return}if(s===~~s&&s<1e7){o.e=0,o.d=[s];return}return Rq(o,s.toString())}else if(typeof s!="string")throw Error(Kp+s);if(s.charCodeAt(0)===45?(s=s.slice(1),o.s=-1):o.s=1,TXe.test(s))Rq(o,s);else throw Error(Kp+s)}if(a.prototype=sn,a.ROUND_UP=0,a.ROUND_DOWN=1,a.ROUND_CEIL=2,a.ROUND_FLOOR=3,a.ROUND_HALF_UP=4,a.ROUND_HALF_DOWN=5,a.ROUND_HALF_EVEN=6,a.ROUND_HALF_CEIL=7,a.ROUND_HALF_FLOOR=8,a.clone=Dle,a.config=a.set=kXe,t===void 0&&(t={}),t)for(n=["precision","rounding","toExpNeg","toExpPos","LN10"],e=0;e<n.length;)t.hasOwnProperty(r=n[e++])||(t[r]=this[r]);return a.config(t),a}function kXe(t){if(!t||typeof t!="object")throw Error(Md+"Object expected");var e,r,n,a=["precision",1,_1,"rounding",0,8,"toExpNeg",-1/0,0,"toExpPos",0,1/0];for(e=0;e<a.length;e+=3)if((n=t[r=a[e]])!==void 0)if(E1(n)===n&&n>=a[e+1]&&n<=a[e+2])this[r]=n;else throw Error(Kp+r+": "+n);if((n=t[r="LN10"])!==void 0)if(n==Math.LN10)this[r]=new this(n);else throw Error(Kp+r+": "+n);return this}var QM=Dle(BXe);Tu=new QM(1);const Ja=QM;var FXe=t=>t,Rle={},Mle=t=>t===Rle,Lq=t=>function e(){return arguments.length===0||arguments.length===1&&Mle(arguments.length<=0?void 0:arguments[0])?e:t(...arguments)},Lle=(t,e)=>t===1?e:Lq(function(){for(var r=arguments.length,n=new Array(r),a=0;a<r;a++)n[a]=arguments[a];var s=n.filter(o=>o!==Rle).length;return s>=t?e(...n):Lle(t-s,Lq(function(){for(var o=arguments.length,l=new Array(o),c=0;c<o;c++)l[c]=arguments[c];var u=n.map(d=>Mle(d)?l.shift():d);return e(...u,...l)}))}),OXe=t=>Lle(t.length,t),iO=(t,e)=>{for(var r=[],n=t;n<e;++n)r[n-t]=n;return r},DXe=OXe((t,e)=>Array.isArray(e)?e.map(t):Object.keys(e).map(r=>e[r]).map(t)),RXe=function(){for(var e=arguments.length,r=new Array(e),n=0;n<e;n++)r[n]=arguments[n];if(!r.length)return FXe;var a=r.reverse(),s=a[0],o=a.slice(1);return function(){return o.reduce((l,c)=>c(l),s(...arguments))}};function Ule(t){var e;return t===0?e=1:e=Math.floor(new Ja(t).abs().log(10).toNumber())+1,e}function Qle(t,e,r){for(var n=new Ja(t),a=0,s=[];n.lt(e)&&a<1e5;)s.push(n.toNumber()),n=n.add(r),a++;return s}var Vle=t=>{var[e,r]=t,[n,a]=[e,r];return e>r&&([n,a]=[r,e]),[n,a]},Hle=(t,e,r)=>{if(t.lte(0))return new Ja(0);var n=Ule(t.toNumber()),a=new Ja(10).pow(n),s=t.div(a),o=n!==1?.05:.1,l=new Ja(Math.ceil(s.div(o).toNumber())).add(r).mul(o),c=l.mul(a);return e?new Ja(c.toNumber()):new Ja(Math.ceil(c.toNumber()))},MXe=(t,e,r)=>{var n=new Ja(1),a=new Ja(t);if(!a.isint()&&r){var s=Math.abs(t);s<1?(n=new Ja(10).pow(Ule(t)-1),a=new Ja(Math.floor(a.div(n).toNumber())).mul(n)):s>1&&(a=new Ja(Math.floor(t)))}else t===0?a=new Ja(Math.floor((e-1)/2)):r||(a=new Ja(Math.floor(t)));var o=Math.floor((e-1)/2),l=RXe(DXe(c=>a.add(new Ja(c-o).mul(n)).toNumber()),iO);return l(0,e)},$le=function(e,r,n,a){var s=arguments.length>4&&arguments[4]!==void 0?arguments[4]:0;if(!Number.isFinite((r-e)/(n-1)))return{step:new Ja(0),tickMin:new Ja(0),tickMax:new Ja(0)};var o=Hle(new Ja(r).sub(e).div(n-1),a,s),l;e<=0&&r>=0?l=new Ja(0):(l=new Ja(e).add(r).div(2),l=l.sub(new Ja(l).mod(o)));var c=Math.ceil(l.sub(e).div(o).toNumber()),u=Math.ceil(new Ja(r).sub(l).div(o).toNumber()),d=c+u+1;return d>n?$le(e,r,n,a,s+1):(d<n&&(u=r>0?u+(n-d):u,c=r>0?c:c+(n-d)),{step:o,tickMin:l.sub(new Ja(c).mul(o)),tickMax:l.add(new Ja(u).mul(o))})},LXe=function(e){var[r,n]=e,a=arguments.length>1&&arguments[1]!==void 0?arguments[1]:6,s=arguments.length>2&&arguments[2]!==void 0?arguments[2]:!0,o=Math.max(a,2),[l,c]=Vle([r,n]);if(l===-1/0||c===1/0){var u=c===1/0?[l,...iO(0,a-1).map(()=>1/0)]:[...iO(0,a-1).map(()=>-1/0),c];return r>n?u.reverse():u}if(l===c)return MXe(l,a,s);var{step:d,tickMin:f,tickMax:A}=$le(l,c,o,s,0),h=Qle(f,A.add(new Ja(.1).mul(d)),d);return r>n?h.reverse():h},UXe=function(e,r){var[n,a]=e,s=arguments.length>2&&arguments[2]!==void 0?arguments[2]:!0,[o,l]=Vle([n,a]);if(o===-1/0||l===1/0)return[n,a];if(o===l)return[o];var c=Math.max(r,2),u=Hle(new Ja(l).sub(o).div(c-1),s,0),d=[...Qle(new Ja(o),new Ja(l),u),l];return s===!1&&(d=d.map(f=>Math.round(f))),n>a?d.reverse():d},Gle=t=>t.rootProps.maxBarSize,QXe=t=>t.rootProps.barGap,Kle=t=>t.rootProps.barCategoryGap,VXe=t=>t.rootProps.barSize,sN=t=>t.rootProps.stackOffset,qle=t=>t.rootProps.reverseStackOrder,VM=t=>t.options.chartName,HM=t=>t.rootProps.syncId,zle=t=>t.rootProps.syncMethod,$M=t=>t.options.eventEmitter,nc={grid:-100,barBackground:-50,area:100,cursorRectangle:200,bar:300,line:400,axis:500,scatter:600,activeBar:1e3,cursorLine:1100,activeDot:1200,label:2e3},Qh={allowDuplicatedCategory:!0,angleAxisId:0,reversed:!1,scale:"auto",tick:!0,type:"category"},Su={allowDataOverflow:!1,allowDuplicatedCategory:!0,radiusAxisId:0,scale:"auto",tick:!0,tickCount:5,type:"number"},a4=(t,e)=>{if(!(!t||!e))return t!=null&&t.reversed?[e[1],e[0]]:e},HXe={allowDataOverflow:!1,allowDecimals:!1,allowDuplicatedCategory:!1,dataKey:void 0,domain:void 0,id:Qh.angleAxisId,includeHidden:!1,name:void 0,reversed:Qh.reversed,scale:Qh.scale,tick:Qh.tick,tickCount:void 0,ticks:void 0,type:Qh.type,unit:void 0},$Xe={allowDataOverflow:Su.allowDataOverflow,allowDecimals:!1,allowDuplicatedCategory:Su.allowDuplicatedCategory,dataKey:void 0,domain:void 0,id:Su.radiusAxisId,includeHidden:!1,name:void 0,reversed:!1,scale:Su.scale,tick:Su.tick,tickCount:Su.tickCount,ticks:void 0,type:Su.type,unit:void 0},GXe={allowDataOverflow:!1,allowDecimals:!1,allowDuplicatedCategory:Qh.allowDuplicatedCategory,dataKey:void 0,domain:void 0,id:Qh.angleAxisId,includeHidden:!1,name:void 0,reversed:!1,scale:Qh.scale,tick:Qh.tick,tickCount:void 0,ticks:void 0,type:"number",unit:void 0},KXe={allowDataOverflow:Su.allowDataOverflow,allowDecimals:!1,allowDuplicatedCategory:Su.allowDuplicatedCategory,dataKey:void 0,domain:void 0,id:Su.radiusAxisId,includeHidden:!1,name:void 0,reversed:!1,scale:Su.scale,tick:Su.tick,tickCount:Su.tickCount,ticks:void 0,type:"category",unit:void 0},GM=(t,e)=>t.polarAxis.angleAxis[e]!=null?t.polarAxis.angleAxis[e]:t.layout.layoutType==="radial"?GXe:HXe,KM=(t,e)=>t.polarAxis.radiusAxis[e]!=null?t.polarAxis.radiusAxis[e]:t.layout.layoutType==="radial"?KXe:$Xe,s4=t=>t.polarOptions,qM=Kt([MA,LA,Fo],Hoe),Wle=Kt([s4,qM],(t,e)=>{if(t!=null)return sc(t.innerRadius,e,0)}),Xle=Kt([s4,qM],(t,e)=>{if(t!=null)return sc(t.outerRadius,e,e*.8)}),qXe=t=>{if(t==null)return[0,0];var{startAngle:e,endAngle:r}=t;return[e,r]},Yle=Kt([s4],qXe);Kt([GM,Yle],a4);var Jle=Kt([qM,Wle,Xle],(t,e,r)=>{if(!(t==null||e==null||r==null))return[e,r]});Kt([KM,Jle],a4);var Zle=Kt([Ta,s4,Wle,Xle,MA,LA],(t,e,r,n,a,s)=>{if(!(t!=="centric"&&t!=="radial"||e==null||r==null||n==null)){var{cx:o,cy:l,startAngle:c,endAngle:u}=e;return{cx:sc(o,a,a/2),cy:sc(l,s,s/2),innerRadius:r,outerRadius:n,startAngle:c,endAngle:u,clockWise:!1}}}),Xs=(t,e)=>e,iN=(t,e,r)=>r;function zM(t){return t==null?void 0:t.id}function ece(t,e,r){var{chartData:n=[]}=e,{allowDuplicatedCategory:a,dataKey:s}=r,o=new Map;return t.forEach(l=>{var c,u=(c=l.data)!==null&&c!==void 0?c:n;if(!(u==null||u.length===0)){var d=zM(l);u.forEach((f,A)=>{var h=s==null||a?A:String(ks(f,s,null)),m=ks(f,l.dataKey,0),p;o.has(h)?p=o.get(h):p={},Object.assign(p,{[d]:m}),o.set(h,p)})}}),Array.from(o.values())}function i4(t){return"stackId"in t&&t.stackId!=null&&t.dataKey!=null}var o4=(t,e)=>t===e?!0:t==null||e==null?!1:t[0]===e[0]&&t[1]===e[1];function l4(t,e){return Array.isArray(t)&&Array.isArray(e)&&t.length===0&&e.length===0?!0:t===e}function zXe(t,e){if(t.length===e.length){for(var r=0;r<t.length;r++)if(t[r]!==e[r])return!1;return!0}return!1}var Do=t=>{var e=Ta(t);return e==="horizontal"?"xAxis":e==="vertical"?"yAxis":e==="centric"?"angleAxis":"radiusAxis"},S1=t=>t.tooltip.settings.axisId;function Uq(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter(function(a){return Object.getOwnPropertyDescriptor(t,a).enumerable})),r.push.apply(r,n)}return r}function VI(t){for(var e=1;e<arguments.length;e++){var r=arguments[e]!=null?arguments[e]:{};e%2?Uq(Object(r),!0).forEach(function(n){WXe(t,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):Uq(Object(r)).forEach(function(n){Object.defineProperty(t,n,Object.getOwnPropertyDescriptor(r,n))})}return t}function WXe(t,e,r){return(e=XXe(e))in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}function XXe(t){var e=YXe(t,"string");return typeof e=="symbol"?e:e+""}function YXe(t,e){if(typeof t!="object"||!t)return t;var r=t[Symbol.toPrimitive];if(r!==void 0){var n=r.call(t,e);if(typeof n!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}var oO=[0,"auto"],Vo={allowDataOverflow:!1,allowDecimals:!0,allowDuplicatedCategory:!0,angle:0,dataKey:void 0,domain:void 0,height:30,hide:!0,id:0,includeHidden:!1,interval:"preserveEnd",minTickGap:5,mirror:!1,name:void 0,orientation:"bottom",padding:{left:0,right:0},reversed:!1,scale:"auto",tick:!0,tickCount:5,tickFormatter:void 0,ticks:void 0,type:"category",unit:void 0},tce=(t,e)=>t.cartesianAxis.xAxis[e],VA=(t,e)=>{var r=tce(t,e);return r??Vo},Ho={allowDataOverflow:!1,allowDecimals:!0,allowDuplicatedCategory:!0,angle:0,dataKey:void 0,domain:oO,hide:!0,id:0,includeHidden:!1,interval:"preserveEnd",minTickGap:5,mirror:!1,name:void 0,orientation:"left",padding:{top:0,bottom:0},reversed:!1,scale:"auto",tick:!0,tickCount:5,tickFormatter:void 0,ticks:void 0,type:"number",unit:void 0,width:Jw},rce=(t,e)=>t.cartesianAxis.yAxis[e],HA=(t,e)=>{var r=rce(t,e);return r??Ho},JXe={domain:[0,"auto"],includeHidden:!1,reversed:!1,allowDataOverflow:!1,allowDuplicatedCategory:!1,dataKey:void 0,id:0,name:"",range:[64,64],scale:"auto",type:"number",unit:""},WM=(t,e)=>{var r=t.cartesianAxis.zAxis[e];return r??JXe},Ai=(t,e,r)=>{switch(e){case"xAxis":return VA(t,r);case"yAxis":return HA(t,r);case"zAxis":return WM(t,r);case"angleAxis":return GM(t,r);case"radiusAxis":return KM(t,r);default:throw new Error("Unexpected axis type: ".concat(e))}},ZXe=(t,e,r)=>{switch(e){case"xAxis":return VA(t,r);case"yAxis":return HA(t,r);default:throw new Error("Unexpected axis type: ".concat(e))}},oN=(t,e,r)=>{switch(e){case"xAxis":return VA(t,r);case"yAxis":return HA(t,r);case"angleAxis":return GM(t,r);case"radiusAxis":return KM(t,r);default:throw new Error("Unexpected axis type: ".concat(e))}},nce=t=>t.graphicalItems.cartesianItems.some(e=>e.type==="bar")||t.graphicalItems.polarItems.some(e=>e.type==="radialBar");function XM(t,e){return r=>{switch(t){case"xAxis":return"xAxisId"in r&&r.xAxisId===e;case"yAxis":return"yAxisId"in r&&r.yAxisId===e;case"zAxis":return"zAxisId"in r&&r.zAxisId===e;case"angleAxis":return"angleAxisId"in r&&r.angleAxisId===e;case"radiusAxis":return"radiusAxisId"in r&&r.radiusAxisId===e;default:return!1}}}var YM=t=>t.graphicalItems.cartesianItems,eYe=Kt([Xs,iN],XM),JM=(t,e,r)=>t.filter(r).filter(n=>(e==null?void 0:e.includeHidden)===!0?!0:!n.hide),lN=Kt([YM,Ai,eYe],JM,{memoizeOptions:{resultEqualityCheck:l4}}),ace=Kt([lN],t=>t.filter(e=>e.type==="area"||e.type==="bar").filter(i4)),sce=t=>t.filter(e=>!("stackId"in e)||e.stackId===void 0),tYe=Kt([lN],sce),ZM=t=>t.map(e=>e.data).filter(Boolean).flat(1),rYe=Kt([lN],ZM,{memoizeOptions:{resultEqualityCheck:l4}}),e8=(t,e)=>{var{chartData:r=[],dataStartIndex:n,dataEndIndex:a}=e;return t.length>0?t:r.slice(n,a+1)},t8=Kt([rYe,Ple],e8),r8=(t,e,r)=>(e==null?void 0:e.dataKey)!=null?t.map(n=>({value:ks(n,e.dataKey)})):r.length>0?r.map(n=>n.dataKey).flatMap(n=>t.map(a=>({value:ks(a,n)}))):t.map(n=>({value:n})),c4=Kt([t8,Ai,lN],r8);function ice(t,e){switch(t){case"xAxis":return e.direction==="x";case"yAxis":return e.direction==="y";default:return!1}}function CE(t){if(uh(t)||t instanceof Date){var e=Number(t);if(hi(e))return e}}function Qq(t){if(Array.isArray(t)){var e=[CE(t[0]),CE(t[1])];return Bm(e)?e:void 0}var r=CE(t);if(r!=null)return[r,r]}function EA(t){return t.map(CE).filter(dHe)}function nYe(t,e,r){return!r||typeof e!="number"||ch(e)?[]:r.length?EA(r.flatMap(n=>{var a=ks(t,n.dataKey),s,o;if(Array.isArray(a)?[s,o]=a:s=o=a,!(!hi(s)||!hi(o)))return[e-s,e+o]})):[]}var Ro=t=>{var e=Do(t),r=S1(t);return oN(t,e,r)},cN=Kt([Ro],t=>t==null?void 0:t.dataKey),aYe=Kt([ace,Ple,Ro],ece),oce=(t,e,r,n)=>{var a={},s=e.reduce((o,l)=>{if(l.stackId==null)return o;var c=o[l.stackId];return c==null&&(c=[]),c.push(l),o[l.stackId]=c,o},a);return Object.fromEntries(Object.entries(s).map(o=>{var[l,c]=o,u=n?[...c].reverse():c,d=u.map(zM);return[l,{stackedData:jGe(t,d,r),graphicalItems:u}]}))},lO=Kt([aYe,ace,sN,qle],oce),lce=(t,e,r,n)=>{var{dataStartIndex:a,dataEndIndex:s}=e;if(n==null&&r!=="zAxis"){var o=FGe(t,a,s);if(!(o!=null&&o[0]===0&&o[1]===0))return o}},sYe=Kt([Ai],t=>t.allowDataOverflow),n8=t=>{var e;if(t==null||!("domain"in t))return oO;if(t.domain!=null)return t.domain;if("ticks"in t&&t.ticks!=null){if(t.type==="number"){var r=EA(t.ticks);return[Math.min(...r),Math.max(...r)]}if(t.type==="category")return t.ticks.map(String)}return(e=t==null?void 0:t.domain)!==null&&e!==void 0?e:oO},a8=Kt([Ai],n8),s8=Kt([a8,sYe],Ble),iYe=Kt([lO,QA,Xs,s8],lce,{memoizeOptions:{resultEqualityCheck:o4}}),u4=t=>t.errorBars,oYe=(t,e,r)=>t.flatMap(n=>e[n.id]).filter(Boolean).filter(n=>ice(r,n)),HI=function(){for(var e=arguments.length,r=new Array(e),n=0;n<e;n++)r[n]=arguments[n];var a=r.filter(Boolean);if(a.length!==0){var s=a.flat(),o=Math.min(...s),l=Math.max(...s);return[o,l]}},i8=(t,e,r,n,a)=>{var s,o;if(r.length>0&&t.forEach(l=>{r.forEach(c=>{var u,d,f=(u=n[c.id])===null||u===void 0?void 0:u.filter(v=>ice(a,v)),A=ks(l,(d=e.dataKey)!==null&&d!==void 0?d:c.dataKey),h=nYe(l,A,f);if(h.length>=2){var m=Math.min(...h),p=Math.max(...h);(s==null||m<s)&&(s=m),(o==null||p>o)&&(o=p)}var x=Qq(A);x!=null&&(s=s==null?x[0]:Math.min(s,x[0]),o=o==null?x[1]:Math.max(o,x[1]))})}),(e==null?void 0:e.dataKey)!=null&&t.forEach(l=>{var c=Qq(ks(l,e.dataKey));c!=null&&(s=s==null?c[0]:Math.min(s,c[0]),o=o==null?c[1]:Math.max(o,c[1]))}),hi(s)&&hi(o))return[s,o]},lYe=Kt([t8,Ai,tYe,u4,Xs],i8,{memoizeOptions:{resultEqualityCheck:o4}});function cYe(t){var{value:e}=t;if(uh(e)||e instanceof Date)return e}var uYe=(t,e,r)=>{var n=t.map(cYe).filter(a=>a!=null);return r&&(e.dataKey==null||e.allowDuplicatedCategory&&iie(n))?Xoe(0,t.length):e.allowDuplicatedCategory?n:Array.from(new Set(n))},cce=t=>t.referenceElements.dots,I1=(t,e,r)=>t.filter(n=>n.ifOverflow==="extendDomain").filter(n=>e==="xAxis"?n.xAxisId===r:n.yAxisId===r),dYe=Kt([cce,Xs,iN],I1),uce=t=>t.referenceElements.areas,fYe=Kt([uce,Xs,iN],I1),dce=t=>t.referenceElements.lines,hYe=Kt([dce,Xs,iN],I1),fce=(t,e)=>{if(t!=null){var r=EA(t.map(n=>e==="xAxis"?n.x:n.y));if(r.length!==0)return[Math.min(...r),Math.max(...r)]}},AYe=Kt(dYe,Xs,fce),hce=(t,e)=>{if(t!=null){var r=EA(t.flatMap(n=>[e==="xAxis"?n.x1:n.y1,e==="xAxis"?n.x2:n.y2]));if(r.length!==0)return[Math.min(...r),Math.max(...r)]}},mYe=Kt([fYe,Xs],hce);function pYe(t){var e;if(t.x!=null)return EA([t.x]);var r=(e=t.segment)===null||e===void 0?void 0:e.map(n=>n.x);return r==null||r.length===0?[]:EA(r)}function gYe(t){var e;if(t.y!=null)return EA([t.y]);var r=(e=t.segment)===null||e===void 0?void 0:e.map(n=>n.y);return r==null||r.length===0?[]:EA(r)}var Ace=(t,e)=>{if(t!=null){var r=t.flatMap(n=>e==="xAxis"?pYe(n):gYe(n));if(r.length!==0)return[Math.min(...r),Math.max(...r)]}},xYe=Kt([hYe,Xs],Ace),vYe=Kt(AYe,xYe,mYe,(t,e,r)=>HI(t,r,e)),o8=(t,e,r,n,a,s,o,l)=>{if(r!=null)return r;var c=o==="vertical"&&l==="xAxis"||o==="horizontal"&&l==="yAxis",u=c?HI(n,s,a):HI(s,a);return PXe(e,u,t.allowDataOverflow)},yYe=Kt([Ai,a8,s8,iYe,lYe,vYe,Ta,Xs],o8,{memoizeOptions:{resultEqualityCheck:o4}}),bYe=[0,1],l8=(t,e,r,n,a,s,o)=>{if(!((t==null||r==null||r.length===0)&&o===void 0)){var{dataKey:l,type:c}=t,u=Vg(e,s);if(u&&l==null){var d;return Xoe(0,(d=r==null?void 0:r.length)!==null&&d!==void 0?d:0)}return c==="category"?uYe(n,t,u):a==="expand"?bYe:o}},c8=Kt([Ai,Ta,t8,c4,sN,Xs,yYe],l8),mce=(t,e,r,n,a)=>{if(t!=null){var{scale:s,type:o}=t;if(s==="auto")return e==="radial"&&a==="radiusAxis"?"band":e==="radial"&&a==="angleAxis"?"linear":o==="category"&&n&&(n.indexOf("LineChart")>=0||n.indexOf("AreaChart")>=0||n.indexOf("ComposedChart")>=0&&!r)?"point":o==="category"?"band":"linear";if(typeof s=="string"){var l="scale".concat(qw(s));return l in rb?l:"point"}}},j1=Kt([Ai,Ta,nce,VM,Xs],mce);function wYe(t){if(t!=null){if(t in rb)return rb[t]();var e="scale".concat(qw(t));if(e in rb)return rb[e]()}}function u8(t,e,r,n){if(!(r==null||n==null)){if(typeof t.scale=="function")return t.scale.copy().domain(r).range(n);var a=wYe(e);if(a!=null){var s=a.domain(r).range(n);return CGe(s),s}}}var d8=(t,e,r)=>{var n=n8(e);if(!(r!=="auto"&&r!=="linear")){if(e!=null&&e.tickCount&&Array.isArray(n)&&(n[0]==="auto"||n[1]==="auto")&&Bm(t))return LXe(t,e.tickCount,e.allowDecimals);if(e!=null&&e.tickCount&&e.type==="number"&&Bm(t))return UXe(t,e.tickCount,e.allowDecimals)}},f8=Kt([c8,oN,j1],d8),h8=(t,e,r,n)=>{if(n!=="angleAxis"&&(t==null?void 0:t.type)==="number"&&Bm(e)&&Array.isArray(r)&&r.length>0){var a=e[0],s=r[0],o=e[1],l=r[r.length-1];return[Math.min(a,s),Math.max(o,l)]}return e},NYe=Kt([Ai,c8,f8,Xs],h8),CYe=Kt(c4,Ai,(t,e)=>{if(!(!e||e.type!=="number")){var r=1/0,n=Array.from(EA(t.map(f=>f.value))).sort((f,A)=>f-A),a=n[0],s=n[n.length-1];if(a==null||s==null)return 1/0;var o=s-a;if(o===0)return 1/0;for(var l=0;l<n.length-1;l++){var c=n[l],u=n[l+1];if(!(c==null||u==null)){var d=u-c;r=Math.min(r,d)}}return r/o}}),pce=Kt(CYe,Ta,Kle,Fo,(t,e,r,n,a)=>a,(t,e,r,n,a)=>{if(!hi(t))return 0;var s=e==="vertical"?n.height:n.width;if(a==="gap")return t*s/2;if(a==="no-gap"){var o=sc(r,t*s),l=t*s/2;return l-o-(l-o)/s*o}return 0}),_Ye=(t,e,r)=>{var n=VA(t,e);return n==null||typeof n.padding!="string"?0:pce(t,"xAxis",e,r,n.padding)},EYe=(t,e,r)=>{var n=HA(t,e);return n==null||typeof n.padding!="string"?0:pce(t,"yAxis",e,r,n.padding)},SYe=Kt(VA,_Ye,(t,e)=>{var r,n;if(t==null)return{left:0,right:0};var{padding:a}=t;return typeof a=="string"?{left:e,right:e}:{left:((r=a.left)!==null&&r!==void 0?r:0)+e,right:((n=a.right)!==null&&n!==void 0?n:0)+e}}),IYe=Kt(HA,EYe,(t,e)=>{var r,n;if(t==null)return{top:0,bottom:0};var{padding:a}=t;return typeof a=="string"?{top:e,bottom:e}:{top:((r=a.top)!==null&&r!==void 0?r:0)+e,bottom:((n=a.bottom)!==null&&n!==void 0?n:0)+e}}),jYe=Kt([Fo,SYe,VP,QP,(t,e,r)=>r],(t,e,r,n,a)=>{var{padding:s}=n;return a?[s.left,r.width-s.right]:[t.left+e.left,t.left+t.width-e.right]}),PYe=Kt([Fo,Ta,IYe,VP,QP,(t,e,r)=>r],(t,e,r,n,a,s)=>{var{padding:o}=a;return s?[n.height-o.bottom,o.top]:e==="horizontal"?[t.top+t.height-r.bottom,t.top+r.top]:[t.top+r.top,t.top+t.height-r.bottom]}),uN=(t,e,r,n)=>{var a;switch(e){case"xAxis":return jYe(t,r,n);case"yAxis":return PYe(t,r,n);case"zAxis":return(a=WM(t,r))===null||a===void 0?void 0:a.range;case"angleAxis":return Yle(t);case"radiusAxis":return Jle(t,r);default:return}},gce=Kt([Ai,uN],a4),d4=Kt([Ai,j1,NYe,gce],u8);Kt([lN,u4,Xs],oYe);function xce(t,e){return t.id<e.id?-1:t.id>e.id?1:0}var f4=(t,e)=>e,h4=(t,e,r)=>r,BYe=Kt(LP,f4,h4,(t,e,r)=>t.filter(n=>n.orientation===e).filter(n=>n.mirror===r).sort(xce)),TYe=Kt(UP,f4,h4,(t,e,r)=>t.filter(n=>n.orientation===e).filter(n=>n.mirror===r).sort(xce)),vce=(t,e)=>({width:t.width,height:e.height}),kYe=(t,e)=>{var r=typeof e.width=="number"?e.width:Jw;return{width:r,height:t.height}},yce=Kt(Fo,VA,vce),FYe=(t,e,r)=>{switch(e){case"top":return t.top;case"bottom":return r-t.bottom;default:return 0}},OYe=(t,e,r)=>{switch(e){case"left":return t.left;case"right":return r-t.right;default:return 0}},DYe=Kt(LA,Fo,BYe,f4,h4,(t,e,r,n,a)=>{var s={},o;return r.forEach(l=>{var c=vce(e,l);o==null&&(o=FYe(e,n,t));var u=n==="top"&&!a||n==="bottom"&&a;s[l.id]=o-Number(u)*c.height,o+=(u?-1:1)*c.height}),s}),RYe=Kt(MA,Fo,TYe,f4,h4,(t,e,r,n,a)=>{var s={},o;return r.forEach(l=>{var c=kYe(e,l);o==null&&(o=OYe(e,n,t));var u=n==="left"&&!a||n==="right"&&a;s[l.id]=o-Number(u)*c.width,o+=(u?-1:1)*c.width}),s}),MYe=(t,e)=>{var r=VA(t,e);if(r!=null)return DYe(t,r.orientation,r.mirror)},LYe=Kt([Fo,VA,MYe,(t,e)=>e],(t,e,r,n)=>{if(e!=null){var a=r==null?void 0:r[n];return a==null?{x:t.left,y:0}:{x:t.left,y:a}}}),UYe=(t,e)=>{var r=HA(t,e);if(r!=null)return RYe(t,r.orientation,r.mirror)},QYe=Kt([Fo,HA,UYe,(t,e)=>e],(t,e,r,n)=>{if(e!=null){var a=r==null?void 0:r[n];return a==null?{x:0,y:t.top}:{x:a,y:t.top}}}),bce=Kt(Fo,HA,(t,e)=>{var r=typeof e.width=="number"?e.width:Jw;return{width:r,height:t.height}}),Vq=(t,e,r)=>{switch(e){case"xAxis":return yce(t,r).width;case"yAxis":return bce(t,r).height;default:return}},wce=(t,e,r,n)=>{if(r!=null){var{allowDuplicatedCategory:a,type:s,dataKey:o}=r,l=Vg(t,n),c=e.map(u=>u.value);if(o&&l&&s==="category"&&a&&iie(c))return c}},A8=Kt([Ta,c4,Ai,Xs],wce),Nce=(t,e,r,n)=>{if(!(r==null||r.dataKey==null)){var{type:a,scale:s}=r,o=Vg(t,n);if(o&&(a==="number"||s!=="auto"))return e.map(l=>l.value)}},m8=Kt([Ta,c4,oN,Xs],Nce);Kt([Ta,ZXe,j1,d4,A8,m8,uN,f8,Xs],(t,e,r,n,a,s,o,l,c)=>{if(e!=null){var u=Vg(t,c);return{angle:e.angle,interval:e.interval,minTickGap:e.minTickGap,orientation:e.orientation,tick:e.tick,tickCount:e.tickCount,tickFormatter:e.tickFormatter,ticks:e.ticks,type:e.type,unit:e.unit,axisType:c,categoricalDomain:s,duplicateDomain:a,isCategorical:u,niceTicks:l,range:o,realScaleType:r,scale:n}}});var VYe=(t,e,r,n,a,s,o,l,c)=>{if(!(e==null||n==null)){var u=Vg(t,c),{type:d,ticks:f,tickCount:A}=e,h=r==="scaleBand"&&typeof n.bandwidth=="function"?n.bandwidth()/2:2,m=d==="category"&&n.bandwidth?n.bandwidth()/h:0;m=c==="angleAxis"&&s!=null&&s.length>=2?jl(s[0]-s[1])*2*m:m;var p=f||a;if(p){var x=p.map((v,y)=>{var b=o?o.indexOf(v):v;return{index:y,coordinate:n(b)+m,value:v,offset:m}});return x.filter(v=>hi(v.coordinate))}return u&&l?l.map((v,y)=>({coordinate:n(v)+m,value:v,index:y,offset:m})).filter(v=>hi(v.coordinate)):n.ticks?n.ticks(A).map(v=>({coordinate:n(v)+m,value:v,offset:m})):n.domain().map((v,y)=>({coordinate:n(v)+m,value:o?o[v]:v,index:y,offset:m}))}},Cce=Kt([Ta,oN,j1,d4,f8,uN,A8,m8,Xs],VYe),HYe=(t,e,r,n,a,s,o)=>{if(!(e==null||r==null||n==null||n[0]===n[1])){var l=Vg(t,o),{tickCount:c}=e,u=0;return u=o==="angleAxis"&&(n==null?void 0:n.length)>=2?jl(n[0]-n[1])*2*u:u,l&&s?s.map((d,f)=>({coordinate:r(d)+u,value:d,index:f,offset:u})):r.ticks?r.ticks(c).map(d=>({coordinate:r(d)+u,value:d,offset:u})):r.domain().map((d,f)=>({coordinate:r(d)+u,value:a?a[d]:d,index:f,offset:u}))}},Yv=Kt([Ta,oN,d4,uN,A8,m8,Xs],HYe),Jv=Kt(Ai,d4,(t,e)=>{if(!(t==null||e==null))return VI(VI({},t),{},{scale:e})}),$Ye=Kt([Ai,j1,c8,gce],u8);Kt((t,e,r)=>WM(t,r),$Ye,(t,e)=>{if(!(t==null||e==null))return VI(VI({},t),{},{scale:e})});var GYe=Kt([Ta,LP,UP],(t,e,r)=>{switch(t){case"horizontal":return e.some(n=>n.reversed)?"right-to-left":"left-to-right";case"vertical":return r.some(n=>n.reversed)?"bottom-to-top":"top-to-bottom";case"centric":case"radial":return"left-to-right";default:return}}),_ce=t=>t.options.defaultTooltipEventType,Ece=t=>t.options.validateTooltipEventTypes;function Sce(t,e,r){if(t==null)return e;var n=t?"axis":"item";return r==null?e:r.includes(n)?n:e}function p8(t,e){var r=_ce(t),n=Ece(t);return Sce(e,r,n)}function KYe(t){return gn(e=>p8(e,t))}var Ice=(t,e)=>{var r,n=Number(e);if(!(ch(n)||e==null))return n>=0?t==null||(r=t[n])===null||r===void 0?void 0:r.value:void 0},qYe=t=>t.tooltip.settings,U0={active:!1,index:null,dataKey:void 0,graphicalItemId:void 0,coordinate:void 0},zYe={itemInteraction:{click:U0,hover:U0},axisInteraction:{click:U0,hover:U0},keyboardInteraction:U0,syncInteraction:{active:!1,index:null,dataKey:void 0,label:void 0,coordinate:void 0,sourceViewBox:void 0,graphicalItemId:void 0},tooltipItemPayloads:[],settings:{shared:void 0,trigger:"hover",axisId:0,active:!1,defaultIndex:void 0}},jce=uu({name:"tooltip",initialState:zYe,reducers:{addTooltipEntrySettings:{reducer(t,e){t.tooltipItemPayloads.push(e.payload)},prepare:Ls()},replaceTooltipEntrySettings:{reducer(t,e){var{prev:r,next:n}=e.payload,a=vf(t).tooltipItemPayloads.indexOf(r);a>-1&&(t.tooltipItemPayloads[a]=n)},prepare:Ls()},removeTooltipEntrySettings:{reducer(t,e){var r=vf(t).tooltipItemPayloads.indexOf(e.payload);r>-1&&t.tooltipItemPayloads.splice(r,1)},prepare:Ls()},setTooltipSettingsState(t,e){t.settings=e.payload},setActiveMouseOverItemIndex(t,e){t.syncInteraction.active=!1,t.keyboardInteraction.active=!1,t.itemInteraction.hover.active=!0,t.itemInteraction.hover.index=e.payload.activeIndex,t.itemInteraction.hover.dataKey=e.payload.activeDataKey,t.itemInteraction.hover.graphicalItemId=e.payload.activeGraphicalItemId,t.itemInteraction.hover.coordinate=e.payload.activeCoordinate},mouseLeaveChart(t){t.itemInteraction.hover.active=!1,t.axisInteraction.hover.active=!1},mouseLeaveItem(t){t.itemInteraction.hover.active=!1},setActiveClickItemIndex(t,e){t.syncInteraction.active=!1,t.itemInteraction.click.active=!0,t.keyboardInteraction.active=!1,t.itemInteraction.click.index=e.payload.activeIndex,t.itemInteraction.click.dataKey=e.payload.activeDataKey,t.itemInteraction.click.graphicalItemId=e.payload.activeGraphicalItemId,t.itemInteraction.click.coordinate=e.payload.activeCoordinate},setMouseOverAxisIndex(t,e){t.syncInteraction.active=!1,t.axisInteraction.hover.active=!0,t.keyboardInteraction.active=!1,t.axisInteraction.hover.index=e.payload.activeIndex,t.axisInteraction.hover.dataKey=e.payload.activeDataKey,t.axisInteraction.hover.coordinate=e.payload.activeCoordinate},setMouseClickAxisIndex(t,e){t.syncInteraction.active=!1,t.keyboardInteraction.active=!1,t.axisInteraction.click.active=!0,t.axisInteraction.click.index=e.payload.activeIndex,t.axisInteraction.click.dataKey=e.payload.activeDataKey,t.axisInteraction.click.coordinate=e.payload.activeCoordinate},setSyncInteraction(t,e){t.syncInteraction=e.payload},setKeyboardInteraction(t,e){t.keyboardInteraction.active=e.payload.active,t.keyboardInteraction.index=e.payload.activeIndex,t.keyboardInteraction.coordinate=e.payload.activeCoordinate}}}),{addTooltipEntrySettings:WYe,replaceTooltipEntrySettings:XYe,removeTooltipEntrySettings:YYe,setTooltipSettingsState:JYe,setActiveMouseOverItemIndex:Pce,mouseLeaveItem:ZYe,mouseLeaveChart:Bce,setActiveClickItemIndex:eJe,setMouseOverAxisIndex:Tce,setMouseClickAxisIndex:tJe,setSyncInteraction:cO,setKeyboardInteraction:uO}=jce.actions,rJe=jce.reducer;function Hq(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter(function(a){return Object.getOwnPropertyDescriptor(t,a).enumerable})),r.push.apply(r,n)}return r}function I_(t){for(var e=1;e<arguments.length;e++){var r=arguments[e]!=null?arguments[e]:{};e%2?Hq(Object(r),!0).forEach(function(n){nJe(t,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):Hq(Object(r)).forEach(function(n){Object.defineProperty(t,n,Object.getOwnPropertyDescriptor(r,n))})}return t}function nJe(t,e,r){return(e=aJe(e))in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}function aJe(t){var e=sJe(t,"string");return typeof e=="symbol"?e:e+""}function sJe(t,e){if(typeof t!="object"||!t)return t;var r=t[Symbol.toPrimitive];if(r!==void 0){var n=r.call(t,e);if(typeof n!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}function iJe(t,e,r){return e==="axis"?r==="click"?t.axisInteraction.click:t.axisInteraction.hover:r==="click"?t.itemInteraction.click:t.itemInteraction.hover}function oJe(t){return t.index!=null}var kce=(t,e,r,n)=>{if(e==null)return U0;var a=iJe(t,e,r);if(a==null)return U0;if(a.active)return a;if(t.keyboardInteraction.active)return t.keyboardInteraction;if(t.syncInteraction.active&&t.syncInteraction.index!=null)return t.syncInteraction;var s=t.settings.active===!0;if(oJe(a)){if(s)return I_(I_({},a),{},{active:!0})}else if(n!=null)return{active:!0,coordinate:void 0,dataKey:void 0,index:n,graphicalItemId:void 0};return I_(I_({},U0),{},{coordinate:a.coordinate})};function lJe(t){if(typeof t=="number")return Number.isFinite(t)?t:void 0;if(t instanceof Date){var e=t.valueOf();return Number.isFinite(e)?e:void 0}var r=Number(t);return Number.isFinite(r)?r:void 0}function cJe(t,e){var r=lJe(t),n=e[0],a=e[1];if(r===void 0)return!1;var s=Math.min(n,a),o=Math.max(n,a);return r>=s&&r<=o}function uJe(t,e,r){if(r==null||e==null)return!0;var n=ks(t,e);return n==null||!Bm(r)?!0:cJe(n,r)}var g8=(t,e,r,n)=>{var a=t==null?void 0:t.index;if(a==null)return null;var s=Number(a);if(!hi(s))return a;var o=0,l=1/0;e.length>0&&(l=e.length-1);var c=Math.max(o,Math.min(s,l)),u=e[c];return u==null||uJe(u,r,n)?String(c):null},Fce=(t,e,r,n,a,s,o,l)=>{if(!(s==null||l==null)){var c=o[0],u=c==null?void 0:l(c.positions,s);if(u!=null)return u;var d=a==null?void 0:a[Number(s)];if(d)switch(r){case"horizontal":return{x:d.coordinate,y:(n.top+e)/2};default:return{x:(n.left+t)/2,y:d.coordinate}}}},Oce=(t,e,r,n)=>{if(e==="axis")return t.tooltipItemPayloads;if(t.tooltipItemPayloads.length===0)return[];var a;if(r==="hover"?a=t.itemInteraction.hover.graphicalItemId:a=t.itemInteraction.click.graphicalItemId,a==null&&n!=null){var s=t.tooltipItemPayloads[0];return s!=null?[s]:[]}return t.tooltipItemPayloads.filter(o=>{var l;return((l=o.settings)===null||l===void 0?void 0:l.graphicalItemId)===a})},dN=t=>t.options.tooltipPayloadSearcher,P1=t=>t.tooltip;function $q(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter(function(a){return Object.getOwnPropertyDescriptor(t,a).enumerable})),r.push.apply(r,n)}return r}function Gq(t){for(var e=1;e<arguments.length;e++){var r=arguments[e]!=null?arguments[e]:{};e%2?$q(Object(r),!0).forEach(function(n){dJe(t,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):$q(Object(r)).forEach(function(n){Object.defineProperty(t,n,Object.getOwnPropertyDescriptor(r,n))})}return t}function dJe(t,e,r){return(e=fJe(e))in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}function fJe(t){var e=hJe(t,"string");return typeof e=="symbol"?e:e+""}function hJe(t,e){if(typeof t!="object"||!t)return t;var r=t[Symbol.toPrimitive];if(r!==void 0){var n=r.call(t,e);if(typeof n!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}function AJe(t,e){return t??e}var Dce=(t,e,r,n,a,s,o)=>{if(!(e==null||s==null)){var{chartData:l,computedData:c,dataStartIndex:u,dataEndIndex:d}=r,f=[];return t.reduce((A,h)=>{var m,{dataDefinedOnItem:p,settings:x}=h,v=AJe(p,l),y=Array.isArray(v)?Aoe(v,u,d):v,b=(m=x==null?void 0:x.dataKey)!==null&&m!==void 0?m:n,w=x==null?void 0:x.nameKey,j;if(n&&Array.isArray(y)&&!Array.isArray(y[0])&&o==="axis"?j=uHe(y,n,a):j=s(y,e,c,w),Array.isArray(j))j.forEach(_=>{var S=Gq(Gq({},x),{},{name:_.name,unit:_.unit,color:void 0,fill:void 0});A.push(tK({tooltipEntrySettings:S,dataKey:_.dataKey,payload:_.payload,value:ks(_.payload,_.dataKey),name:_.name}))});else{var I;A.push(tK({tooltipEntrySettings:x,dataKey:b,payload:j,value:ks(j,b),name:(I=ks(j,w))!==null&&I!==void 0?I:x==null?void 0:x.name}))}return A},f)}},x8=Kt([Ro,Ta,nce,VM,Do],mce),mJe=Kt([t=>t.graphicalItems.cartesianItems,t=>t.graphicalItems.polarItems],(t,e)=>[...t,...e]),pJe=Kt([Do,S1],XM),B1=Kt([mJe,Ro,pJe],JM,{memoizeOptions:{resultEqualityCheck:l4}}),gJe=Kt([B1],t=>t.filter(i4)),xJe=Kt([B1],ZM,{memoizeOptions:{resultEqualityCheck:l4}}),T1=Kt([xJe,QA],e8),vJe=Kt([gJe,QA,Ro],ece),v8=Kt([T1,Ro,B1],r8),Rce=Kt([Ro],n8),yJe=Kt([Ro],t=>t.allowDataOverflow),Mce=Kt([Rce,yJe],Ble),bJe=Kt([B1],t=>t.filter(i4)),wJe=Kt([vJe,bJe,sN,qle],oce),NJe=Kt([wJe,QA,Do,Mce],lce),CJe=Kt([B1],sce),_Je=Kt([T1,Ro,CJe,u4,Do],i8,{memoizeOptions:{resultEqualityCheck:o4}}),EJe=Kt([cce,Do,S1],I1),SJe=Kt([EJe,Do],fce),IJe=Kt([uce,Do,S1],I1),jJe=Kt([IJe,Do],hce),PJe=Kt([dce,Do,S1],I1),BJe=Kt([PJe,Do],Ace),TJe=Kt([SJe,BJe,jJe],HI),kJe=Kt([Ro,Rce,Mce,NJe,_Je,TJe,Ta,Do],o8),fN=Kt([Ro,Ta,T1,v8,sN,Do,kJe],l8),FJe=Kt([fN,Ro,x8],d8),OJe=Kt([Ro,fN,FJe,Do],h8),Lce=t=>{var e=Do(t),r=S1(t),n=!1;return uN(t,e,r,n)},Uce=Kt([Ro,Lce],a4),Qce=Kt([Ro,x8,OJe,Uce],u8),DJe=Kt([Ta,v8,Ro,Do],wce),RJe=Kt([Ta,v8,Ro,Do],Nce),MJe=(t,e,r,n,a,s,o,l)=>{if(e){var{type:c}=e,u=Vg(t,l);if(n){var d=r==="scaleBand"&&n.bandwidth?n.bandwidth()/2:2,f=c==="category"&&n.bandwidth?n.bandwidth()/d:0;return f=l==="angleAxis"&&a!=null&&(a==null?void 0:a.length)>=2?jl(a[0]-a[1])*2*f:f,u&&o?o.map((A,h)=>({coordinate:n(A)+f,value:A,index:h,offset:f})):n.domain().map((A,h)=>({coordinate:n(A)+f,value:s?s[A]:A,index:h,offset:f}))}}},$A=Kt([Ta,Ro,x8,Qce,Lce,DJe,RJe,Do],MJe),y8=Kt([_ce,Ece,qYe],(t,e,r)=>Sce(r.shared,t,e)),Vce=t=>t.tooltip.settings.trigger,b8=t=>t.tooltip.settings.defaultIndex,hN=Kt([P1,y8,Vce,b8],kce),Ng=Kt([hN,T1,cN,fN],g8),Hce=Kt([$A,Ng],Ice),w8=Kt([hN],t=>{if(t)return t.dataKey}),LJe=Kt([hN],t=>{if(t)return t.graphicalItemId}),$ce=Kt([P1,y8,Vce,b8],Oce),UJe=Kt([MA,LA,Ta,Fo,$A,b8,$ce,dN],Fce),QJe=Kt([hN,UJe],(t,e)=>t!=null&&t.coordinate?t.coordinate:e),VJe=Kt([hN],t=>{var e;return(e=t==null?void 0:t.active)!==null&&e!==void 0?e:!1}),HJe=Kt([$ce,Ng,QA,cN,Hce,dN,y8],Dce);Kt([HJe],t=>{if(t!=null){var e=t.map(r=>r.payload).filter(r=>r!=null);return Array.from(new Set(e))}});function Kq(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter(function(a){return Object.getOwnPropertyDescriptor(t,a).enumerable})),r.push.apply(r,n)}return r}function qq(t){for(var e=1;e<arguments.length;e++){var r=arguments[e]!=null?arguments[e]:{};e%2?Kq(Object(r),!0).forEach(function(n){$Je(t,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):Kq(Object(r)).forEach(function(n){Object.defineProperty(t,n,Object.getOwnPropertyDescriptor(r,n))})}return t}function $Je(t,e,r){return(e=GJe(e))in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}function GJe(t){var e=KJe(t,"string");return typeof e=="symbol"?e:e+""}function KJe(t,e){if(typeof t!="object"||!t)return t;var r=t[Symbol.toPrimitive];if(r!==void 0){var n=r.call(t,e);if(typeof n!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}var qJe=()=>gn(Ro),zJe=()=>{var t=qJe(),e=gn($A),r=gn(Qce);return wI(!t||!r?void 0:qq(qq({},t),{},{scale:r}),e)};function zq(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter(function(a){return Object.getOwnPropertyDescriptor(t,a).enumerable})),r.push.apply(r,n)}return r}function bx(t){for(var e=1;e<arguments.length;e++){var r=arguments[e]!=null?arguments[e]:{};e%2?zq(Object(r),!0).forEach(function(n){WJe(t,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):zq(Object(r)).forEach(function(n){Object.defineProperty(t,n,Object.getOwnPropertyDescriptor(r,n))})}return t}function WJe(t,e,r){return(e=XJe(e))in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}function XJe(t){var e=YJe(t,"string");return typeof e=="symbol"?e:e+""}function YJe(t,e){if(typeof t!="object"||!t)return t;var r=t[Symbol.toPrimitive];if(r!==void 0){var n=r.call(t,e);if(typeof n!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}var JJe=(t,e,r,n)=>{var a=e.find(s=>s&&s.index===r);if(a){if(t==="horizontal")return{x:a.coordinate,y:n.chartY};if(t==="vertical")return{x:n.chartX,y:a.coordinate}}return{x:0,y:0}},ZJe=(t,e,r,n)=>{var a=e.find(u=>u&&u.index===r);if(a){if(t==="centric"){var s=a.coordinate,{radius:o}=n;return bx(bx(bx({},n),io(n.cx,n.cy,o,s)),{},{angle:s,radius:o})}var l=a.coordinate,{angle:c}=n;return bx(bx(bx({},n),io(n.cx,n.cy,l,c)),{},{angle:c,radius:l})}return{angle:0,clockWise:!1,cx:0,cy:0,endAngle:0,innerRadius:0,outerRadius:0,radius:0,startAngle:0,x:0,y:0}};function eZe(t,e){var{chartX:r,chartY:n}=t;return r>=e.left&&r<=e.left+e.width&&n>=e.top&&n<=e.top+e.height}var Gce=(t,e,r,n,a)=>{var s,o=(s=e==null?void 0:e.length)!==null&&s!==void 0?s:0;if(o<=1||t==null)return 0;if(n==="angleAxis"&&a!=null&&Math.abs(Math.abs(a[1]-a[0])-360)<=1e-6)for(var l=0;l<o;l++){var c,u,d,f,A,h=l>0?(c=r[l-1])===null||c===void 0?void 0:c.coordinate:(u=r[o-1])===null||u===void 0?void 0:u.coordinate,m=(d=r[l])===null||d===void 0?void 0:d.coordinate,p=l>=o-1?(f=r[0])===null||f===void 0?void 0:f.coordinate:(A=r[l+1])===null||A===void 0?void 0:A.coordinate,x=void 0;if(!(h==null||m==null||p==null))if(jl(m-h)!==jl(p-m)){var v=[];if(jl(p-m)===jl(a[1]-a[0])){x=p;var y=m+a[1]-a[0];v[0]=Math.min(y,(y+h)/2),v[1]=Math.max(y,(y+h)/2)}else{x=h;var b=p+a[1]-a[0];v[0]=Math.min(m,(b+m)/2),v[1]=Math.max(m,(b+m)/2)}var w=[Math.min(m,(x+m)/2),Math.max(m,(x+m)/2)];if(t>w[0]&&t<=w[1]||t>=v[0]&&t<=v[1]){var j;return(j=r[l])===null||j===void 0?void 0:j.index}}else{var I=Math.min(h,p),_=Math.max(h,p);if(t>(I+m)/2&&t<=(_+m)/2){var S;return(S=r[l])===null||S===void 0?void 0:S.index}}}else if(e)for(var E=0;E<o;E++){var T=e[E];if(T!=null){var k=e[E+1],B=e[E-1];if(E===0&&k!=null&&t<=(T.coordinate+k.coordinate)/2||E===o-1&&B!=null&&t>(T.coordinate+B.coordinate)/2||E>0&&E<o-1&&B!=null&&k!=null&&t>(T.coordinate+B.coordinate)/2&&t<=(T.coordinate+k.coordinate)/2)return T.index}}return-1},tZe=()=>gn(VM),N8=(t,e)=>e,Kce=(t,e,r)=>r,C8=(t,e,r,n)=>n,rZe=Kt($A,t=>IP(t,e=>e.coordinate)),_8=Kt([P1,N8,Kce,C8],kce),E8=Kt([_8,T1,cN,fN],g8),nZe=(t,e,r)=>{if(e!=null){var n=P1(t);return e==="axis"?r==="hover"?n.axisInteraction.hover.dataKey:n.axisInteraction.click.dataKey:r==="hover"?n.itemInteraction.hover.dataKey:n.itemInteraction.click.dataKey}},qce=Kt([P1,N8,Kce,C8],Oce),$I=Kt([MA,LA,Ta,Fo,$A,C8,qce,dN],Fce),aZe=Kt([_8,$I],(t,e)=>{var r;return(r=t.coordinate)!==null&&r!==void 0?r:e}),zce=Kt([$A,E8],Ice),sZe=Kt([qce,E8,QA,cN,zce,dN,N8],Dce),iZe=Kt([_8,E8],(t,e)=>({isActive:t.active&&e!=null,activeIndex:e})),oZe=(t,e,r,n,a,s,o)=>{if(!(!t||!r||!n||!a)&&eZe(t,o)){var l=OGe(t,e),c=Gce(l,s,a,r,n),u=JJe(e,a,c,t);return{activeIndex:String(c),activeCoordinate:u}}},lZe=(t,e,r,n,a,s,o)=>{if(!(!t||!n||!a||!s||!r)){var l=Wqe(t,r);if(l){var c=DGe(l,e),u=Gce(c,o,s,n,a),d=ZJe(e,s,u,l);return{activeIndex:String(u),activeCoordinate:d}}}},cZe=(t,e,r,n,a,s,o,l)=>{if(!(!t||!e||!n||!a||!s))return e==="horizontal"||e==="vertical"?oZe(t,e,n,a,s,o,l):lZe(t,e,r,n,a,s,o)},uZe=Kt(t=>t.zIndex.zIndexMap,(t,e)=>e,(t,e,r)=>r,(t,e,r)=>{if(e!=null){var n=t[e];if(n!=null)return r?n.panoramaElement:n.element}}),dZe=Kt(t=>t.zIndex.zIndexMap,t=>{var e=Object.keys(t).map(n=>parseInt(n,10)).concat(Object.values(nc)),r=Array.from(new Set(e));return r.sort((n,a)=>n-a)},{memoizeOptions:{resultEqualityCheck:zXe}});function Wq(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter(function(a){return Object.getOwnPropertyDescriptor(t,a).enumerable})),r.push.apply(r,n)}return r}function Xq(t){for(var e=1;e<arguments.length;e++){var r=arguments[e]!=null?arguments[e]:{};e%2?Wq(Object(r),!0).forEach(function(n){fZe(t,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):Wq(Object(r)).forEach(function(n){Object.defineProperty(t,n,Object.getOwnPropertyDescriptor(r,n))})}return t}function fZe(t,e,r){return(e=hZe(e))in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}function hZe(t){var e=AZe(t,"string");return typeof e=="symbol"?e:e+""}function AZe(t,e){if(typeof t!="object"||!t)return t;var r=t[Symbol.toPrimitive];if(r!==void 0){var n=r.call(t,e);if(typeof n!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}var mZe={},pZe={zIndexMap:Object.values(nc).reduce((t,e)=>Xq(Xq({},t),{},{[e]:{element:void 0,panoramaElement:void 0,consumers:0}}),mZe)},gZe=new Set(Object.values(nc));function xZe(t){return gZe.has(t)}var Wce=uu({name:"zIndex",initialState:pZe,reducers:{registerZIndexPortal:{reducer:(t,e)=>{var{zIndex:r}=e.payload;t.zIndexMap[r]?t.zIndexMap[r].consumers+=1:t.zIndexMap[r]={consumers:1,element:void 0,panoramaElement:void 0}},prepare:Ls()},unregisterZIndexPortal:{reducer:(t,e)=>{var{zIndex:r}=e.payload;t.zIndexMap[r]&&(t.zIndexMap[r].consumers-=1,t.zIndexMap[r].consumers<=0&&!xZe(r)&&delete t.zIndexMap[r])},prepare:Ls()},registerZIndexPortalElement:{reducer:(t,e)=>{var{zIndex:r,element:n,isPanorama:a}=e.payload;t.zIndexMap[r]?a?t.zIndexMap[r].panoramaElement=n:t.zIndexMap[r].element=n:t.zIndexMap[r]={consumers:0,element:a?void 0:n,panoramaElement:a?n:void 0}},prepare:Ls()},unregisterZIndexPortalElement:{reducer:(t,e)=>{var{zIndex:r}=e.payload;t.zIndexMap[r]&&(e.payload.isPanorama?t.zIndexMap[r].panoramaElement=void 0:t.zIndexMap[r].element=void 0)},prepare:Ls()}}}),{registerZIndexPortal:vZe,unregisterZIndexPortal:yZe,registerZIndexPortalElement:bZe,unregisterZIndexPortalElement:wZe}=Wce.actions,NZe=Wce.reducer;function xh(t){var{zIndex:e,children:r}=t,n=uKe(),a=n&&e!==void 0&&e!==0,s=qu(),o=Cs();g.useLayoutEffect(()=>a?(o(vZe({zIndex:e})),()=>{o(yZe({zIndex:e}))}):zw,[o,e,a]);var l=gn(c=>uZe(c,e,s));return a?l?Mu.createPortal(r,l):null:r}function dO(){return dO=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var r=arguments[e];for(var n in r)({}).hasOwnProperty.call(r,n)&&(t[n]=r[n])}return t},dO.apply(null,arguments)}function Yq(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter(function(a){return Object.getOwnPropertyDescriptor(t,a).enumerable})),r.push.apply(r,n)}return r}function j_(t){for(var e=1;e<arguments.length;e++){var r=arguments[e]!=null?arguments[e]:{};e%2?Yq(Object(r),!0).forEach(function(n){CZe(t,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):Yq(Object(r)).forEach(function(n){Object.defineProperty(t,n,Object.getOwnPropertyDescriptor(r,n))})}return t}function CZe(t,e,r){return(e=_Ze(e))in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}function _Ze(t){var e=EZe(t,"string");return typeof e=="symbol"?e:e+""}function EZe(t,e){if(typeof t!="object"||!t)return t;var r=t[Symbol.toPrimitive];if(r!==void 0){var n=r.call(t,e);if(typeof n!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}function SZe(t){var{cursor:e,cursorComp:r,cursorProps:n}=t;return g.isValidElement(e)?g.cloneElement(e,n):g.createElement(r,n)}function IZe(t){var e,{coordinate:r,payload:n,index:a,offset:s,tooltipAxisBandSize:o,layout:l,cursor:c,tooltipEventType:u,chartName:d}=t,f=r,A=n,h=a;if(!c||!f||d!=="ScatterChart"&&u!=="axis")return null;var m,p,x;if(d==="ScatterChart")m=f,p=cqe,x=nc.cursorLine;else if(d==="BarChart")m=uqe(l,f,s,o),p=Voe,x=nc.cursorRectangle;else if(l==="radial"&&lie(f)){var{cx:v,cy:y,radius:b,startAngle:w,endAngle:j}=$oe(f);m={cx:v,cy:y,startAngle:w,endAngle:j,innerRadius:b,outerRadius:b},p=Koe,x=nc.cursorLine}else m={points:Zqe(l,f,s)},p=pM,x=nc.cursorLine;var I=typeof c=="object"&&"className"in c?c.className:void 0,_=j_(j_(j_(j_({stroke:"#ccc",pointerEvents:"none"},s),m),z2(c)),{},{payload:A,payloadIndex:h,className:ns("recharts-tooltip-cursor",I)});return g.createElement(xh,{zIndex:(e=t.zIndex)!==null&&e!==void 0?e:x},g.createElement(SZe,{cursor:c,cursorComp:p,cursorProps:_}))}function jZe(t){var e=zJe(),r=lKe(),n=Zw(),a=tZe();return e==null||r==null||n==null||a==null?null:g.createElement(IZe,dO({},t,{offset:r,layout:n,tooltipAxisBandSize:e,chartName:a}))}var Xce=g.createContext(null),PZe=()=>g.useContext(Xce),Yce={exports:{}};(function(t){var e=Object.prototype.hasOwnProperty,r="~";function n(){}Object.create&&(n.prototype=Object.create(null),new n().__proto__||(r=!1));function a(c,u,d){this.fn=c,this.context=u,this.once=d||!1}function s(c,u,d,f,A){if(typeof d!="function")throw new TypeError("The listener must be a function");var h=new a(d,f||c,A),m=r?r+u:u;return c._events[m]?c._events[m].fn?c._events[m]=[c._events[m],h]:c._events[m].push(h):(c._events[m]=h,c._eventsCount++),c}function o(c,u){--c._eventsCount===0?c._events=new n:delete c._events[u]}function l(){this._events=new n,this._eventsCount=0}l.prototype.eventNames=function(){var u=[],d,f;if(this._eventsCount===0)return u;for(f in d=this._events)e.call(d,f)&&u.push(r?f.slice(1):f);return Object.getOwnPropertySymbols?u.concat(Object.getOwnPropertySymbols(d)):u},l.prototype.listeners=function(u){var d=r?r+u:u,f=this._events[d];if(!f)return[];if(f.fn)return[f.fn];for(var A=0,h=f.length,m=new Array(h);A<h;A++)m[A]=f[A].fn;return m},l.prototype.listenerCount=function(u){var d=r?r+u:u,f=this._events[d];return f?f.fn?1:f.length:0},l.prototype.emit=function(u,d,f,A,h,m){var p=r?r+u:u;if(!this._events[p])return!1;var x=this._events[p],v=arguments.length,y,b;if(x.fn){switch(x.once&&this.removeListener(u,x.fn,void 0,!0),v){case 1:return x.fn.call(x.context),!0;case 2:return x.fn.call(x.context,d),!0;case 3:return x.fn.call(x.context,d,f),!0;case 4:return x.fn.call(x.context,d,f,A),!0;case 5:return x.fn.call(x.context,d,f,A,h),!0;case 6:return x.fn.call(x.context,d,f,A,h,m),!0}for(b=1,y=new Array(v-1);b<v;b++)y[b-1]=arguments[b];x.fn.apply(x.context,y)}else{var w=x.length,j;for(b=0;b<w;b++)switch(x[b].once&&this.removeListener(u,x[b].fn,void 0,!0),v){case 1:x[b].fn.call(x[b].context);break;case 2:x[b].fn.call(x[b].context,d);break;case 3:x[b].fn.call(x[b].context,d,f);break;case 4:x[b].fn.call(x[b].context,d,f,A);break;default:if(!y)for(j=1,y=new Array(v-1);j<v;j++)y[j-1]=arguments[j];x[b].fn.apply(x[b].context,y)}}return!0},l.prototype.on=function(u,d,f){return s(this,u,d,f,!1)},l.prototype.once=function(u,d,f){return s(this,u,d,f,!0)},l.prototype.removeListener=function(u,d,f,A){var h=r?r+u:u;if(!this._events[h])return this;if(!d)return o(this,h),this;var m=this._events[h];if(m.fn)m.fn===d&&(!A||m.once)&&(!f||m.context===f)&&o(this,h);else{for(var p=0,x=[],v=m.length;p<v;p++)(m[p].fn!==d||A&&!m[p].once||f&&m[p].context!==f)&&x.push(m[p]);x.length?this._events[h]=x.length===1?x[0]:x:o(this,h)}return this},l.prototype.removeAllListeners=function(u){var d;return u?(d=r?r+u:u,this._events[d]&&o(this,d)):(this._events=new n,this._eventsCount=0),this},l.prototype.off=l.prototype.removeListener,l.prototype.addListener=l.prototype.on,l.prefixed=r,l.EventEmitter=l,t.exports=l})(Yce);var BZe=Yce.exports;const TZe=IA(BZe);var lw=new TZe,fO="recharts.syncEvent.tooltip",Jq="recharts.syncEvent.brush";function Jce(t,e){if(e){var r=Number.parseInt(e,10);if(!ch(r))return t==null?void 0:t[r]}}var kZe={chartName:"",tooltipPayloadSearcher:void 0,eventEmitter:void 0,defaultTooltipEventType:"axis"},Zce=uu({name:"options",initialState:kZe,reducers:{createEventEmitter:t=>{t.eventEmitter==null&&(t.eventEmitter=Symbol("rechartsEventEmitter"))}}}),FZe=Zce.reducer,{createEventEmitter:OZe}=Zce.actions;function DZe(t){return t.tooltip.syncInteraction}var RZe={chartData:void 0,computedData:void 0,dataStartIndex:0,dataEndIndex:0},eue=uu({name:"chartData",initialState:RZe,reducers:{setChartData(t,e){if(t.chartData=e.payload,e.payload==null){t.dataStartIndex=0,t.dataEndIndex=0;return}e.payload.length>0&&t.dataEndIndex!==e.payload.length-1&&(t.dataEndIndex=e.payload.length-1)},setComputedData(t,e){t.computedData=e.payload},setDataStartEndIndexes(t,e){var{startIndex:r,endIndex:n}=e.payload;r!=null&&(t.dataStartIndex=r),n!=null&&(t.dataEndIndex=n)}}}),{setChartData:Zq,setDataStartEndIndexes:MZe,setComputedData:Git}=eue.actions,LZe=eue.reducer,UZe=["x","y"];function ez(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter(function(a){return Object.getOwnPropertyDescriptor(t,a).enumerable})),r.push.apply(r,n)}return r}function wx(t){for(var e=1;e<arguments.length;e++){var r=arguments[e]!=null?arguments[e]:{};e%2?ez(Object(r),!0).forEach(function(n){QZe(t,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):ez(Object(r)).forEach(function(n){Object.defineProperty(t,n,Object.getOwnPropertyDescriptor(r,n))})}return t}function QZe(t,e,r){return(e=VZe(e))in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}function VZe(t){var e=HZe(t,"string");return typeof e=="symbol"?e:e+""}function HZe(t,e){if(typeof t!="object"||!t)return t;var r=t[Symbol.toPrimitive];if(r!==void 0){var n=r.call(t,e);if(typeof n!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}function $Ze(t,e){if(t==null)return{};var r,n,a=GZe(t,e);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(t);for(n=0;n<s.length;n++)r=s[n],e.indexOf(r)===-1&&{}.propertyIsEnumerable.call(t,r)&&(a[r]=t[r])}return a}function GZe(t,e){if(t==null)return{};var r={};for(var n in t)if({}.hasOwnProperty.call(t,n)){if(e.indexOf(n)!==-1)continue;r[n]=t[n]}return r}function KZe(){var t=gn(HM),e=gn($M),r=Cs(),n=gn(zle),a=gn($A),s=Zw(),o=HP(),l=gn(c=>c.rootProps.className);g.useEffect(()=>{if(t==null)return zw;var c=(u,d,f)=>{if(e!==f&&t===u){if(n==="index"){var A;if(o&&d!==null&&d!==void 0&&(A=d.payload)!==null&&A!==void 0&&A.coordinate&&d.payload.sourceViewBox){var h=d.payload.coordinate,{x:m,y:p}=h,x=$Ze(h,UZe),{x:v,y,width:b,height:w}=d.payload.sourceViewBox,j=wx(wx({},x),{},{x:o.x+(b?(m-v)/b:0)*o.width,y:o.y+(w?(p-y)/w:0)*o.height});r(wx(wx({},d),{},{payload:wx(wx({},d.payload),{},{coordinate:j})}))}else r(d);return}if(a!=null){var I;if(typeof n=="function"){var _={activeTooltipIndex:d.payload.index==null?void 0:Number(d.payload.index),isTooltipActive:d.payload.active,activeIndex:d.payload.index==null?void 0:Number(d.payload.index),activeLabel:d.payload.label,activeDataKey:d.payload.dataKey,activeCoordinate:d.payload.coordinate},S=n(a,_);I=a[S]}else n==="value"&&(I=a.find(pe=>String(pe.value)===d.payload.label));var{coordinate:E}=d.payload;if(I==null||d.payload.active===!1||E==null||o==null){r(cO({active:!1,coordinate:void 0,dataKey:void 0,index:null,label:void 0,sourceViewBox:void 0,graphicalItemId:void 0}));return}var{x:T,y:k}=E,B=Math.min(T,o.x+o.width),D=Math.min(k,o.y+o.height),X={x:s==="horizontal"?I.coordinate:B,y:s==="horizontal"?D:I.coordinate},me=cO({active:d.payload.active,coordinate:X,dataKey:d.payload.dataKey,index:String(I.index),label:d.payload.label,sourceViewBox:d.payload.sourceViewBox,graphicalItemId:d.payload.graphicalItemId});r(me)}}};return lw.on(fO,c),()=>{lw.off(fO,c)}},[l,r,e,t,n,a,s,o])}function qZe(){var t=gn(HM),e=gn($M),r=Cs();g.useEffect(()=>{if(t==null)return zw;var n=(a,s,o)=>{e!==o&&t===a&&r(MZe(s))};return lw.on(Jq,n),()=>{lw.off(Jq,n)}},[r,e,t])}function zZe(){var t=Cs();g.useEffect(()=>{t(OZe())},[t]),KZe(),qZe()}function WZe(t,e,r,n,a,s){var o=gn(h=>nZe(h,t,e)),l=gn($M),c=gn(HM),u=gn(zle),d=gn(DZe),f=d==null?void 0:d.active,A=HP();g.useEffect(()=>{if(!f&&c!=null&&l!=null){var h=cO({active:s,coordinate:r,dataKey:o,index:a,label:typeof n=="number"?String(n):n,sourceViewBox:A,graphicalItemId:void 0});lw.emit(fO,c,h,l)}},[f,r,o,a,n,l,c,u,s,A])}function tz(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter(function(a){return Object.getOwnPropertyDescriptor(t,a).enumerable})),r.push.apply(r,n)}return r}function rz(t){for(var e=1;e<arguments.length;e++){var r=arguments[e]!=null?arguments[e]:{};e%2?tz(Object(r),!0).forEach(function(n){XZe(t,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):tz(Object(r)).forEach(function(n){Object.defineProperty(t,n,Object.getOwnPropertyDescriptor(r,n))})}return t}function XZe(t,e,r){return(e=YZe(e))in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}function YZe(t){var e=JZe(t,"string");return typeof e=="symbol"?e:e+""}function JZe(t,e){if(typeof t!="object"||!t)return t;var r=t[Symbol.toPrimitive];if(r!==void 0){var n=r.call(t,e);if(typeof n!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}function ZZe(t){return t.dataKey}function eet(t,e){return g.isValidElement(t)?g.cloneElement(t,e):typeof t=="function"?g.createElement(t,e):g.createElement(VKe,e)}var nz=[],tet={allowEscapeViewBox:{x:!1,y:!1},animationDuration:400,animationEasing:"ease",axisId:0,contentStyle:{},cursor:!0,filterNull:!0,includeHidden:!1,isAnimationActive:"auto",itemSorter:"name",itemStyle:{},labelStyle:{},offset:10,reverseDirection:{x:!1,y:!1},separator:" : ",trigger:"hover",useTranslate3d:!1,wrapperStyle:{}};function az(t){var e,r,n=Tl(t,tet),{active:a,allowEscapeViewBox:s,animationDuration:o,animationEasing:l,content:c,filterNull:u,isAnimationActive:d,offset:f,payloadUniqBy:A,position:h,reverseDirection:m,useTranslate3d:p,wrapperStyle:x,cursor:v,shared:y,trigger:b,defaultIndex:w,portal:j,axisId:I}=n,_=Cs(),S=typeof w=="number"?String(w):w;g.useEffect(()=>{_(JYe({shared:y,trigger:b,axisId:I,active:a,defaultIndex:S}))},[_,y,b,I,a,S]);var E=HP(),T=Roe(),k=KYe(y),{activeIndex:B,isActive:D}=(e=gn(ee=>iZe(ee,k,b,S)))!==null&&e!==void 0?e:{},X=gn(ee=>sZe(ee,k,b,S)),me=gn(ee=>zce(ee,k,b,S)),pe=gn(ee=>aZe(ee,k,b,S)),he=X,ve=PZe(),ae=(r=a??D)!==null&&r!==void 0?r:!1,[Pe,ke]=Mie([he,ae]),O=k==="axis"?me:void 0;WZe(k,b,pe,O,B,ae);var G=j??ve;if(G==null||E==null||k==null)return null;var z=he??nz;ae||(z=nz),u&&z.length&&(z=Eie(z.filter(ee=>ee.value!=null&&(ee.hide!==!0||n.includeHidden)),A,ZZe));var U=z.length>0,Y=g.createElement(WKe,{allowEscapeViewBox:s,animationDuration:o,animationEasing:l,isAnimationActive:d,active:ae,coordinate:pe,hasPayload:U,offset:f,position:h,reverseDirection:m,useTranslate3d:p,viewBox:E,wrapperStyle:x,lastBoundingBox:Pe,innerRef:ke,hasPortalFromProps:!!j},eet(c,rz(rz({},n),{},{payload:z,label:O,active:ae,activeIndex:B,coordinate:pe,accessibilityLayer:T})));return g.createElement(g.Fragment,null,Mu.createPortal(Y,G),ae&&g.createElement(jZe,{cursor:v,tooltipEventType:k,coordinate:pe,payload:z,index:B}))}var AN=t=>null;AN.displayName="Cell";function ret(t,e,r){return(e=net(e))in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}function net(t){var e=aet(t,"string");return typeof e=="symbol"?e:e+""}function aet(t,e){if(typeof t!="object"||!t)return t;var r=t[Symbol.toPrimitive];if(r!==void 0){var n=r.call(t,e);if(typeof n!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}class set{constructor(e){ret(this,"cache",new Map),this.maxSize=e}get(e){var r=this.cache.get(e);return r!==void 0&&(this.cache.delete(e),this.cache.set(e,r)),r}set(e,r){if(this.cache.has(e))this.cache.delete(e);else if(this.cache.size>=this.maxSize){var n=this.cache.keys().next().value;n!=null&&this.cache.delete(n)}this.cache.set(e,r)}clear(){this.cache.clear()}size(){return this.cache.size}}function sz(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter(function(a){return Object.getOwnPropertyDescriptor(t,a).enumerable})),r.push.apply(r,n)}return r}function iet(t){for(var e=1;e<arguments.length;e++){var r=arguments[e]!=null?arguments[e]:{};e%2?sz(Object(r),!0).forEach(function(n){oet(t,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):sz(Object(r)).forEach(function(n){Object.defineProperty(t,n,Object.getOwnPropertyDescriptor(r,n))})}return t}function oet(t,e,r){return(e=cet(e))in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}function cet(t){var e=uet(t,"string");return typeof e=="symbol"?e:e+""}function uet(t,e){if(typeof t!="object"||!t)return t;var r=t[Symbol.toPrimitive];if(r!==void 0){var n=r.call(t,e);if(typeof n!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}var det={cacheSize:2e3,enableCache:!0},tue=iet({},det),iz=new set(tue.cacheSize),fet={position:"absolute",top:"-20000px",left:0,padding:0,margin:0,border:"none",whiteSpace:"pre"},oz="recharts_measurement_span";function het(t,e){var r=e.fontSize||"",n=e.fontFamily||"",a=e.fontWeight||"",s=e.fontStyle||"",o=e.letterSpacing||"",l=e.textTransform||"";return"".concat(t,"|").concat(r,"|").concat(n,"|").concat(a,"|").concat(s,"|").concat(o,"|").concat(l)}var lz=(t,e)=>{try{var r=document.getElementById(oz);r||(r=document.createElement("span"),r.setAttribute("id",oz),r.setAttribute("aria-hidden","true"),document.body.appendChild(r)),Object.assign(r.style,fet,e),r.textContent="".concat(t);var n=r.getBoundingClientRect();return{width:n.width,height:n.height}}catch{return{width:0,height:0}}},Qb=function(e){var r=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};if(e==null||zP.isSsr)return{width:0,height:0};if(!tue.enableCache)return lz(e,r);var n=het(e,r),a=iz.get(n);if(a)return a;var s=lz(e,r);return iz.set(n,s),s},rue;function Aet(t,e,r){return(e=met(e))in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}function met(t){var e=pet(t,"string");return typeof e=="symbol"?e:e+""}function pet(t,e){if(typeof t!="object"||!t)return t;var r=t[Symbol.toPrimitive];if(r!==void 0){var n=r.call(t,e);if(typeof n!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}var cz=/(-?\d+(?:\.\d+)?[a-zA-Z%]*)([*/])(-?\d+(?:\.\d+)?[a-zA-Z%]*)/,uz=/(-?\d+(?:\.\d+)?[a-zA-Z%]*)([+-])(-?\d+(?:\.\d+)?[a-zA-Z%]*)/,get=/^px|cm|vh|vw|em|rem|%|mm|in|pt|pc|ex|ch|vmin|vmax|Q$/,xet=/(-?\d+(?:\.\d+)?)([a-zA-Z%]+)?/,vet={cm:96/2.54,mm:96/25.4,pt:96/72,pc:96/6,in:96,Q:96/(2.54*40),px:1},yet=["cm","mm","pt","pc","in","Q","px"];function bet(t){return yet.includes(t)}var tv="NaN";function wet(t,e){return t*vet[e]}class yl{static parse(e){var r,[,n,a]=(r=xet.exec(e))!==null&&r!==void 0?r:[];return n==null?yl.NaN:new yl(parseFloat(n),a??"")}constructor(e,r){this.num=e,this.unit=r,this.num=e,this.unit=r,ch(e)&&(this.unit=""),r!==""&&!get.test(r)&&(this.num=NaN,this.unit=""),bet(r)&&(this.num=wet(e,r),this.unit="px")}add(e){return this.unit!==e.unit?new yl(NaN,""):new yl(this.num+e.num,this.unit)}subtract(e){return this.unit!==e.unit?new yl(NaN,""):new yl(this.num-e.num,this.unit)}multiply(e){return this.unit!==""&&e.unit!==""&&this.unit!==e.unit?new yl(NaN,""):new yl(this.num*e.num,this.unit||e.unit)}divide(e){return this.unit!==""&&e.unit!==""&&this.unit!==e.unit?new yl(NaN,""):new yl(this.num/e.num,this.unit||e.unit)}toString(){return"".concat(this.num).concat(this.unit)}isNaN(){return ch(this.num)}}rue=yl;Aet(yl,"NaN",new rue(NaN,""));function nue(t){if(t==null||t.includes(tv))return tv;for(var e=t;e.includes("*")||e.includes("/");){var r,[,n,a,s]=(r=cz.exec(e))!==null&&r!==void 0?r:[],o=yl.parse(n??""),l=yl.parse(s??""),c=a==="*"?o.multiply(l):o.divide(l);if(c.isNaN())return tv;e=e.replace(cz,c.toString())}for(;e.includes("+")||/.-\d+(?:\.\d+)?/.test(e);){var u,[,d,f,A]=(u=uz.exec(e))!==null&&u!==void 0?u:[],h=yl.parse(d??""),m=yl.parse(A??""),p=f==="+"?h.add(m):h.subtract(m);if(p.isNaN())return tv;e=e.replace(uz,p.toString())}return e}var dz=/\(([^()]*)\)/;function Net(t){for(var e=t,r;(r=dz.exec(e))!=null;){var[,n]=r;e=e.replace(dz,nue(n))}return e}function Cet(t){var e=t.replace(/\s+/g,"");return e=Net(e),e=nue(e),e}function _et(t){try{return Cet(t)}catch{return tv}}function SB(t){var e=_et(t.slice(5,-1));return e===tv?"":e}var Eet=["x","y","lineHeight","capHeight","fill","scaleToFit","textAnchor","verticalAnchor"],Iet=["dx","dy","angle","className","breakAll"];function hO(){return hO=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var r=arguments[e];for(var n in r)({}).hasOwnProperty.call(r,n)&&(t[n]=r[n])}return t},hO.apply(null,arguments)}function fz(t,e){if(t==null)return{};var r,n,a=jet(t,e);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(t);for(n=0;n<s.length;n++)r=s[n],e.indexOf(r)===-1&&{}.propertyIsEnumerable.call(t,r)&&(a[r]=t[r])}return a}function jet(t,e){if(t==null)return{};var r={};for(var n in t)if({}.hasOwnProperty.call(t,n)){if(e.indexOf(n)!==-1)continue;r[n]=t[n]}return r}var aue=/[ \f\n\r\t\v\u2028\u2029]+/,sue=t=>{var{children:e,breakAll:r,style:n}=t;try{var a=[];nl(e)||(r?a=e.toString().split(""):a=e.toString().split(aue));var s=a.map(l=>({word:l,width:Qb(l,n).width})),o=r?0:Qb("",n).width;return{wordsWithComputedWidth:s,spaceWidth:o}}catch{return null}};function Pet(t){return t==="start"||t==="middle"||t==="end"||t==="inherit"}var iue=(t,e,r,n)=>t.reduce((a,s)=>{var{word:o,width:l}=s,c=a[a.length-1];if(c&&l!=null&&(e==null||n||c.width+l+r<Number(e)))c.words.push(o),c.width+=l+r;else{var u={words:[o],width:l};a.push(u)}return a},[]),oue=t=>t.reduce((e,r)=>e.width>r.width?e:r),Bet="",hz=(t,e,r,n,a,s,o,l)=>{var c=t.slice(0,e),u=sue({breakAll:r,style:n,children:c+Bet});if(!u)return[!1,[]];var d=iue(u.wordsWithComputedWidth,s,o,l),f=d.length>a||oue(d).width>Number(s);return[f,d]},Tet=(t,e,r,n,a)=>{var{maxLines:s,children:o,style:l,breakAll:c}=t,u=Cn(s),d=String(o),f=iue(e,n,r,a);if(!u||a)return f;var A=f.length>s||oue(f).width>Number(n);if(!A)return f;for(var h=0,m=d.length-1,p=0,x;h<=m&&p<=d.length-1;){var v=Math.floor((h+m)/2),y=v-1,[b,w]=hz(d,y,c,l,s,n,r,a),[j]=hz(d,v,c,l,s,n,r,a);if(!b&&!j&&(h=v+1),b&&j&&(m=v-1),!b&&j){x=w;break}p++}return x||f},Az=t=>{var e=nl(t)?[]:t.toString().split(aue);return[{words:e,width:void 0}]},ket=t=>{var{width:e,scaleToFit:r,children:n,style:a,breakAll:s,maxLines:o}=t;if((e||r)&&!zP.isSsr){var l,c,u=sue({breakAll:s,children:n,style:a});if(u){var{wordsWithComputedWidth:d,spaceWidth:f}=u;l=d,c=f}else return Az(n);return Tet({breakAll:s,children:n,maxLines:o,style:a},l,c,e,!!r)}return Az(n)},lue="#808080",Fet={angle:0,breakAll:!1,capHeight:"0.71em",fill:lue,lineHeight:"1em",scaleToFit:!1,textAnchor:"start",verticalAnchor:"end",x:0,y:0},A4=g.forwardRef((t,e)=>{var r=Tl(t,Fet),{x:n,y:a,lineHeight:s,capHeight:o,fill:l,scaleToFit:c,textAnchor:u,verticalAnchor:d}=r,f=fz(r,Eet),A=g.useMemo(()=>ket({breakAll:f.breakAll,children:f.children,maxLines:f.maxLines,scaleToFit:c,style:f.style,width:f.width}),[f.breakAll,f.children,f.maxLines,c,f.style,f.width]),{dx:h,dy:m,angle:p,className:x,breakAll:v}=f,y=fz(f,Iet);if(!uh(n)||!uh(a)||A.length===0)return null;var b=Number(n)+(Cn(h)?h:0),w=Number(a)+(Cn(m)?m:0);if(!hi(b)||!hi(w))return null;var j;switch(d){case"start":j=SB("calc(".concat(o,")"));break;case"middle":j=SB("calc(".concat((A.length-1)/2," * -").concat(s," + (").concat(o," / 2))"));break;default:j=SB("calc(".concat(A.length-1," * -").concat(s,")"));break}var I=[];if(c){var _=A[0].width,{width:S}=f;I.push("scale(".concat(Cn(S)&&Cn(_)?S/_:1,")"))}return p&&I.push("rotate(".concat(p,", ").concat(b,", ").concat(w,")")),I.length&&(y.transform=I.join(" ")),g.createElement("text",hO({},Dd(y),{ref:e,x:b,y:w,className:ns("recharts-text",x),textAnchor:u,fill:l.includes("url")?lue:l}),A.map((E,T)=>{var k=E.words.join(v?"":" ");return g.createElement("tspan",{x:b,dy:T===0?j:s,key:"".concat(k,"-").concat(T)},k)}))});A4.displayName="Text";var Oet=["labelRef"],Det=["content"];function mz(t,e){if(t==null)return{};var r,n,a=Ret(t,e);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(t);for(n=0;n<s.length;n++)r=s[n],e.indexOf(r)===-1&&{}.propertyIsEnumerable.call(t,r)&&(a[r]=t[r])}return a}function Ret(t,e){if(t==null)return{};var r={};for(var n in t)if({}.hasOwnProperty.call(t,n)){if(e.indexOf(n)!==-1)continue;r[n]=t[n]}return r}function pz(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter(function(a){return Object.getOwnPropertyDescriptor(t,a).enumerable})),r.push.apply(r,n)}return r}function Ri(t){for(var e=1;e<arguments.length;e++){var r=arguments[e]!=null?arguments[e]:{};e%2?pz(Object(r),!0).forEach(function(n){Met(t,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):pz(Object(r)).forEach(function(n){Object.defineProperty(t,n,Object.getOwnPropertyDescriptor(r,n))})}return t}function Met(t,e,r){return(e=Let(e))in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}function Let(t){var e=Uet(t,"string");return typeof e=="symbol"?e:e+""}function Uet(t,e){if(typeof t!="object"||!t)return t;var r=t[Symbol.toPrimitive];if(r!==void 0){var n=r.call(t,e);if(typeof n!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}function Vh(){return Vh=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var r=arguments[e];for(var n in r)({}).hasOwnProperty.call(r,n)&&(t[n]=r[n])}return t},Vh.apply(null,arguments)}var cue=g.createContext(null),Qet=t=>{var{x:e,y:r,upperWidth:n,lowerWidth:a,width:s,height:o,children:l}=t,c=g.useMemo(()=>({x:e,y:r,upperWidth:n,lowerWidth:a,width:s,height:o}),[e,r,n,a,s,o]);return g.createElement(cue.Provider,{value:c},l)},uue=()=>{var t=g.useContext(cue),e=HP();return t||Coe(e)},Vet=g.createContext(null),Het=()=>{var t=g.useContext(Vet),e=gn(Zle);return t||e},$et=t=>{var{value:e,formatter:r}=t,n=nl(t.children)?e:t.children;return typeof r=="function"?r(n):n},S8=t=>t!=null&&typeof t=="function",Get=(t,e)=>{var r=jl(e-t),n=Math.min(Math.abs(e-t),360);return r*n},Ket=(t,e,r,n,a)=>{var{offset:s,className:o}=t,{cx:l,cy:c,innerRadius:u,outerRadius:d,startAngle:f,endAngle:A,clockWise:h}=a,m=(u+d)/2,p=Get(f,A),x=p>=0?1:-1,v,y;switch(e){case"insideStart":v=f+x*s,y=h;break;case"insideEnd":v=A-x*s,y=!h;break;case"end":v=A+x*s,y=h;break;default:throw new Error("Unsupported position ".concat(e))}y=p<=0?y:!y;var b=io(l,c,m,v),w=io(l,c,m,v+(y?1:-1)*359),j="M".concat(b.x,",").concat(b.y,`
    A`).concat(m,",").concat(m,",0,1,").concat(y?0:1,`,
    `).concat(w.x,",").concat(w.y),I=nl(t.id)?W2("recharts-radial-line-"):t.id;return g.createElement("text",Vh({},n,{dominantBaseline:"central",className:ns("recharts-radial-bar-label",o)}),g.createElement("defs",null,g.createElement("path",{id:I,d:j})),g.createElement("textPath",{xlinkHref:"#".concat(I)},r))},qet=(t,e,r)=>{var{cx:n,cy:a,innerRadius:s,outerRadius:o,startAngle:l,endAngle:c}=t,u=(l+c)/2;if(r==="outside"){var{x:d,y:f}=io(n,a,o+e,u);return{x:d,y:f,textAnchor:d>=n?"start":"end",verticalAnchor:"middle"}}if(r==="center")return{x:n,y:a,textAnchor:"middle",verticalAnchor:"middle"};if(r==="centerTop")return{x:n,y:a,textAnchor:"middle",verticalAnchor:"start"};if(r==="centerBottom")return{x:n,y:a,textAnchor:"middle",verticalAnchor:"end"};var A=(s+o)/2,{x:h,y:m}=io(n,a,A,u);return{x:h,y:m,textAnchor:"middle",verticalAnchor:"middle"}},AO=t=>"cx"in t&&Cn(t.cx),zet=(t,e)=>{var{parentViewBox:r,offset:n,position:a}=t,s;r!=null&&!AO(r)&&(s=r);var{x:o,y:l,upperWidth:c,lowerWidth:u,height:d}=e,f=o,A=o+(c-u)/2,h=(f+A)/2,m=(c+u)/2,p=f+c/2,x=d>=0?1:-1,v=x*n,y=x>0?"end":"start",b=x>0?"start":"end",w=c>=0?1:-1,j=w*n,I=w>0?"end":"start",_=w>0?"start":"end";if(a==="top"){var S={x:f+c/2,y:l-v,textAnchor:"middle",verticalAnchor:y};return Ri(Ri({},S),s?{height:Math.max(l-s.y,0),width:c}:{})}if(a==="bottom"){var E={x:A+u/2,y:l+d+v,textAnchor:"middle",verticalAnchor:b};return Ri(Ri({},E),s?{height:Math.max(s.y+s.height-(l+d),0),width:u}:{})}if(a==="left"){var T={x:h-j,y:l+d/2,textAnchor:I,verticalAnchor:"middle"};return Ri(Ri({},T),s?{width:Math.max(T.x-s.x,0),height:d}:{})}if(a==="right"){var k={x:h+m+j,y:l+d/2,textAnchor:_,verticalAnchor:"middle"};return Ri(Ri({},k),s?{width:Math.max(s.x+s.width-k.x,0),height:d}:{})}var B=s?{width:m,height:d}:{};return a==="insideLeft"?Ri({x:h+j,y:l+d/2,textAnchor:_,verticalAnchor:"middle"},B):a==="insideRight"?Ri({x:h+m-j,y:l+d/2,textAnchor:I,verticalAnchor:"middle"},B):a==="insideTop"?Ri({x:f+c/2,y:l+v,textAnchor:"middle",verticalAnchor:b},B):a==="insideBottom"?Ri({x:A+u/2,y:l+d-v,textAnchor:"middle",verticalAnchor:y},B):a==="insideTopLeft"?Ri({x:f+j,y:l+v,textAnchor:_,verticalAnchor:b},B):a==="insideTopRight"?Ri({x:f+c-j,y:l+v,textAnchor:I,verticalAnchor:b},B):a==="insideBottomLeft"?Ri({x:A+j,y:l+d-v,textAnchor:_,verticalAnchor:y},B):a==="insideBottomRight"?Ri({x:A+u-j,y:l+d-v,textAnchor:I,verticalAnchor:y},B):a&&typeof a=="object"&&(Cn(a.x)||bA(a.x))&&(Cn(a.y)||bA(a.y))?Ri({x:o+sc(a.x,m),y:l+sc(a.y,d),textAnchor:"end",verticalAnchor:"end"},B):Ri({x:p,y:l+d/2,textAnchor:"middle",verticalAnchor:"middle"},B)},Wet={angle:0,offset:5,zIndex:nc.label,position:"middle",textBreakAll:!1};function j0(t){var e=Tl(t,Wet),{viewBox:r,position:n,value:a,children:s,content:o,className:l="",textBreakAll:c,labelRef:u}=e,d=Het(),f=uue(),A=n==="center"?f:d??f,h,m,p;if(r==null?h=A:AO(r)?h=r:h=Coe(r),!h||nl(a)&&nl(s)&&!g.isValidElement(o)&&typeof o!="function")return null;var x=Ri(Ri({},e),{},{viewBox:h});if(g.isValidElement(o)){var{labelRef:v}=x,y=mz(x,Oet);return g.cloneElement(o,y)}if(typeof o=="function"){var{content:b}=x,w=mz(x,Det);if(m=g.createElement(o,w),g.isValidElement(m))return m}else m=$et(e);var j=Dd(e);if(AO(h)){if(n==="insideStart"||n==="insideEnd"||n==="end")return Ket(e,n,m,j,h);p=qet(h,e.offset,e.position)}else p=zet(e,h);return g.createElement(xh,{zIndex:e.zIndex},g.createElement(A4,Vh({ref:u,className:ns("recharts-label",l)},j,p,{textAnchor:Pet(j.textAnchor)?j.textAnchor:p.textAnchor,breakAll:c}),m))}j0.displayName="Label";var Xet=(t,e,r)=>{if(!t)return null;var n={viewBox:e,labelRef:r};return t===!0?g.createElement(j0,Vh({key:"label-implicit"},n)):uh(t)?g.createElement(j0,Vh({key:"label-implicit",value:t},n)):g.isValidElement(t)?t.type===j0?g.cloneElement(t,Ri({key:"label-implicit"},n)):g.createElement(j0,Vh({key:"label-implicit",content:t},n)):S8(t)?g.createElement(j0,Vh({key:"label-implicit",content:t},n)):t&&typeof t=="object"?g.createElement(j0,Vh({},t,{key:"label-implicit"},n)):null};function Yet(t){var{label:e,labelRef:r}=t,n=uue();return Xet(e,n,r)||null}var due={},fue={};(function(t){Object.defineProperty(t,Symbol.toStringTag,{value:"Module"});function e(r){return r[r.length-1]}t.last=e})(fue);var hue={};(function(t){Object.defineProperty(t,Symbol.toStringTag,{value:"Module"});function e(r){return Array.isArray(r)?r:Array.from(r)}t.toArray=e})(hue);(function(t){Object.defineProperty(t,Symbol.toStringTag,{value:"Module"});const e=fue,r=hue,n=EP;function a(s){if(n.isArrayLike(s))return e.last(r.toArray(s))}t.last=a})(due);var Jet=due.last;const Zet=IA(Jet);var ett=["valueAccessor"],ttt=["dataKey","clockWise","id","textBreakAll","zIndex"];function GI(){return GI=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var r=arguments[e];for(var n in r)({}).hasOwnProperty.call(r,n)&&(t[n]=r[n])}return t},GI.apply(null,arguments)}function gz(t,e){if(t==null)return{};var r,n,a=rtt(t,e);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(t);for(n=0;n<s.length;n++)r=s[n],e.indexOf(r)===-1&&{}.propertyIsEnumerable.call(t,r)&&(a[r]=t[r])}return a}function rtt(t,e){if(t==null)return{};var r={};for(var n in t)if({}.hasOwnProperty.call(t,n)){if(e.indexOf(n)!==-1)continue;r[n]=t[n]}return r}var ntt=t=>Array.isArray(t.value)?Zet(t.value):t.value,Aue=g.createContext(void 0),att=Aue.Provider,mue=g.createContext(void 0),stt=mue.Provider;function itt(){return g.useContext(Aue)}function ott(){return g.useContext(mue)}function _E(t){var{valueAccessor:e=ntt}=t,r=gz(t,ett),{dataKey:n,clockWise:a,id:s,textBreakAll:o,zIndex:l}=r,c=gz(r,ttt),u=itt(),d=ott(),f=u||d;return!f||!f.length?null:g.createElement(xh,{zIndex:l??nc.label},g.createElement(Pc,{className:"recharts-label-list"},f.map((A,h)=>{var m,p=nl(n)?e(A,h):ks(A&&A.payload,n),x=nl(s)?{}:{id:"".concat(s,"-").concat(h)};return g.createElement(j0,GI({key:"label-".concat(h)},Dd(A),c,x,{fill:(m=r.fill)!==null&&m!==void 0?m:A.fill,parentViewBox:A.parentViewBox,value:p,textBreakAll:o,viewBox:A.viewBox,index:h,zIndex:0}))})))}_E.displayName="LabelList";function pue(t){var{label:e}=t;return e?e===!0?g.createElement(_E,{key:"labelList-implicit"}):g.isValidElement(e)||S8(e)?g.createElement(_E,{key:"labelList-implicit",content:e}):typeof e=="object"?g.createElement(_E,GI({key:"labelList-implicit"},e,{type:String(e.type)})):null:null}var gue=t=>t.graphicalItems.polarItems,ltt=Kt([Xs,iN],XM),m4=Kt([gue,Ai,ltt],JM),ctt=Kt([m4],ZM),p4=Kt([ctt,n4],e8),utt=Kt([p4,Ai,m4],r8);Kt([p4,Ai,m4],(t,e,r)=>r.length>0?t.flatMap(n=>r.flatMap(a=>{var s,o=ks(n,(s=e.dataKey)!==null&&s!==void 0?s:a.dataKey);return{value:o,errorDomain:[]}})).filter(Boolean):(e==null?void 0:e.dataKey)!=null?t.map(n=>({value:ks(n,e.dataKey),errorDomain:[]})):t.map(n=>({value:n,errorDomain:[]})));var xz=()=>{},dtt=Kt([p4,Ai,m4,u4,Xs],i8),ftt=Kt([Ai,a8,s8,xz,dtt,xz,Ta,Xs],o8),xue=Kt([Ai,Ta,p4,utt,sN,Xs,ftt],l8),htt=Kt([xue,Ai,j1],d8);Kt([Ai,xue,htt,Xs],h8);var Att={radiusAxis:{},angleAxis:{}},vue=uu({name:"polarAxis",initialState:Att,reducers:{addRadiusAxis(t,e){t.radiusAxis[e.payload.id]=e.payload},removeRadiusAxis(t,e){delete t.radiusAxis[e.payload.id]},addAngleAxis(t,e){t.angleAxis[e.payload.id]=e.payload},removeAngleAxis(t,e){delete t.angleAxis[e.payload.id]}}}),{addRadiusAxis:Kit,removeRadiusAxis:qit,addAngleAxis:zit,removeAngleAxis:Wit}=vue.actions,mtt=vue.reducer;function vz(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter(function(a){return Object.getOwnPropertyDescriptor(t,a).enumerable})),r.push.apply(r,n)}return r}function yz(t){for(var e=1;e<arguments.length;e++){var r=arguments[e]!=null?arguments[e]:{};e%2?vz(Object(r),!0).forEach(function(n){ptt(t,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):vz(Object(r)).forEach(function(n){Object.defineProperty(t,n,Object.getOwnPropertyDescriptor(r,n))})}return t}function ptt(t,e,r){return(e=gtt(e))in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}function gtt(t){var e=xtt(t,"string");return typeof e=="symbol"?e:e+""}function xtt(t,e){if(typeof t!="object"||!t)return t;var r=t[Symbol.toPrimitive];if(r!==void 0){var n=r.call(t,e);if(typeof n!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}var vtt=(t,e)=>e,I8=Kt([gue,vtt],(t,e)=>t.filter(r=>r.type==="pie").find(r=>r.id===e)),ytt=[],j8=(t,e,r)=>(r==null?void 0:r.length)===0?ytt:r,yue=Kt([n4,I8,j8],(t,e,r)=>{var{chartData:n}=t;if(e!=null){var a;if((e==null?void 0:e.data)!=null&&e.data.length>0?a=e.data:a=n,(!a||!a.length)&&r!=null&&(a=r.map(s=>yz(yz({},e.presentationProps),s.props))),a!=null)return a}}),btt=Kt([yue,I8,j8],(t,e,r)=>{if(!(t==null||e==null))return t.map((n,a)=>{var s,o=ks(n,e.nameKey,e.name),l;return r!=null&&(s=r[a])!==null&&s!==void 0&&(s=s.props)!==null&&s!==void 0&&s.fill?l=r[a].props.fill:typeof n=="object"&&n!=null&&"fill"in n?l=n.fill:l=e.fill,{value:MP(o,e.dataKey),color:l,payload:n,type:e.legendType}})}),wtt=Kt([yue,I8,j8,Fo],(t,e,r,n)=>{if(!(e==null||t==null))return Crt({offset:n,pieSettings:e,displayedData:t,cells:r})}),bue={exports:{}},ps={};/**
 * @license React
 * react-is.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var P8=Symbol.for("react.transitional.element"),B8=Symbol.for("react.portal"),g4=Symbol.for("react.fragment"),x4=Symbol.for("react.strict_mode"),v4=Symbol.for("react.profiler"),y4=Symbol.for("react.consumer"),b4=Symbol.for("react.context"),w4=Symbol.for("react.forward_ref"),N4=Symbol.for("react.suspense"),C4=Symbol.for("react.suspense_list"),_4=Symbol.for("react.memo"),E4=Symbol.for("react.lazy"),Ntt=Symbol.for("react.view_transition"),Ctt=Symbol.for("react.client.reference");function Hd(t){if(typeof t=="object"&&t!==null){var e=t.$$typeof;switch(e){case P8:switch(t=t.type,t){case g4:case v4:case x4:case N4:case C4:case Ntt:return t;default:switch(t=t&&t.$$typeof,t){case b4:case w4:case E4:case _4:return t;case y4:return t;default:return e}}case B8:return e}}}ps.ContextConsumer=y4;ps.ContextProvider=b4;ps.Element=P8;ps.ForwardRef=w4;ps.Fragment=g4;ps.Lazy=E4;ps.Memo=_4;ps.Portal=B8;ps.Profiler=v4;ps.StrictMode=x4;ps.Suspense=N4;ps.SuspenseList=C4;ps.isContextConsumer=function(t){return Hd(t)===y4};ps.isContextProvider=function(t){return Hd(t)===b4};ps.isElement=function(t){return typeof t=="object"&&t!==null&&t.$$typeof===P8};ps.isForwardRef=function(t){return Hd(t)===w4};ps.isFragment=function(t){return Hd(t)===g4};ps.isLazy=function(t){return Hd(t)===E4};ps.isMemo=function(t){return Hd(t)===_4};ps.isPortal=function(t){return Hd(t)===B8};ps.isProfiler=function(t){return Hd(t)===v4};ps.isStrictMode=function(t){return Hd(t)===x4};ps.isSuspense=function(t){return Hd(t)===N4};ps.isSuspenseList=function(t){return Hd(t)===C4};ps.isValidElementType=function(t){return typeof t=="string"||typeof t=="function"||t===g4||t===v4||t===x4||t===N4||t===C4||typeof t=="object"&&t!==null&&(t.$$typeof===E4||t.$$typeof===_4||t.$$typeof===b4||t.$$typeof===y4||t.$$typeof===w4||t.$$typeof===Ctt||t.getModuleId!==void 0)};ps.typeOf=Hd;bue.exports=ps;var _tt=bue.exports,bz=t=>typeof t=="string"?t:t?t.displayName||t.name||"Component":"",wz=null,IB=null,wue=t=>{if(t===wz&&Array.isArray(IB))return IB;var e=[];return g.Children.forEach(t,r=>{nl(r)||(_tt.isFragment(r)?e=e.concat(wue(r.props.children)):e.push(r))}),IB=e,wz=t,e};function T8(t,e){var r=[],n=[];return Array.isArray(e)?n=e.map(a=>bz(a)):n=[bz(e)],wue(t).forEach(a=>{var s=xg(a,"type.displayName")||xg(a,"type.name");s&&n.indexOf(s)!==-1&&r.push(a)}),r}var Nue={};(function(t){Object.defineProperty(t,Symbol.toStringTag,{value:"Module"});function e(r){var a;if(typeof r!="object"||r==null)return!1;if(Object.getPrototypeOf(r)===null)return!0;if(Object.prototype.toString.call(r)!=="[object Object]"){const s=r[Symbol.toStringTag];return s==null||!((a=Object.getOwnPropertyDescriptor(r,Symbol.toStringTag))!=null&&a.writable)?!1:r.toString()===`[object ${s}]`}let n=r;for(;Object.getPrototypeOf(n)!==null;)n=Object.getPrototypeOf(n);return Object.getPrototypeOf(r)===n}t.isPlainObject=e})(Nue);var Ett=Nue.isPlainObject;const Stt=IA(Ett);var Nz,Cz,_z,Ez,Sz;function Iz(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter(function(a){return Object.getOwnPropertyDescriptor(t,a).enumerable})),r.push.apply(r,n)}return r}function jz(t){for(var e=1;e<arguments.length;e++){var r=arguments[e]!=null?arguments[e]:{};e%2?Iz(Object(r),!0).forEach(function(n){Itt(t,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):Iz(Object(r)).forEach(function(n){Object.defineProperty(t,n,Object.getOwnPropertyDescriptor(r,n))})}return t}function Itt(t,e,r){return(e=jtt(e))in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}function jtt(t){var e=Ptt(t,"string");return typeof e=="symbol"?e:e+""}function Ptt(t,e){if(typeof t!="object"||!t)return t;var r=t[Symbol.toPrimitive];if(r!==void 0){var n=r.call(t,e);if(typeof n!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}function KI(){return KI=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var r=arguments[e];for(var n in r)({}).hasOwnProperty.call(r,n)&&(t[n]=r[n])}return t},KI.apply(null,arguments)}function Py(t,e){return e||(e=t.slice(0)),Object.freeze(Object.defineProperties(t,{raw:{value:Object.freeze(e)}}))}var Pz=(t,e,r,n,a)=>{var s=r-n,o;return o=wi(Nz||(Nz=Py(["M ",",",""])),t,e),o+=wi(Cz||(Cz=Py(["L ",",",""])),t+r,e),o+=wi(_z||(_z=Py(["L ",",",""])),t+r-s/2,e+a),o+=wi(Ez||(Ez=Py(["L ",",",""])),t+r-s/2-n,e+a),o+=wi(Sz||(Sz=Py(["L ",","," Z"])),t,e),o},Btt={x:0,y:0,upperWidth:0,lowerWidth:0,height:0,isUpdateAnimationActive:!1,animationBegin:0,animationDuration:1500,animationEasing:"ease"},Ttt=t=>{var e=Tl(t,Btt),{x:r,y:n,upperWidth:a,lowerWidth:s,height:o,className:l}=e,{animationEasing:c,animationDuration:u,animationBegin:d,isUpdateAnimationActive:f}=e,A=g.useRef(null),[h,m]=g.useState(-1),p=g.useRef(a),x=g.useRef(s),v=g.useRef(o),y=g.useRef(r),b=g.useRef(n),w=XP(t,"trapezoid-");if(g.useEffect(()=>{if(A.current&&A.current.getTotalLength)try{var X=A.current.getTotalLength();X&&m(X)}catch{}},[]),r!==+r||n!==+n||a!==+a||s!==+s||o!==+o||a===0&&s===0||o===0)return null;var j=ns("recharts-trapezoid",l);if(!f)return g.createElement("g",null,g.createElement("path",KI({},Dd(e),{className:j,d:Pz(r,n,a,s,o)})));var I=p.current,_=x.current,S=v.current,E=y.current,T=b.current,k="0px ".concat(h===-1?1:h,"px"),B="".concat(h,"px 0px"),D=Moe(["strokeDasharray"],u,c);return g.createElement(WP,{animationId:w,key:w,canBegin:h>0,duration:u,easing:c,isActive:f,begin:d},X=>{var me=No(I,a,X),pe=No(_,s,X),he=No(S,o,X),ve=No(E,r,X),ae=No(T,n,X);A.current&&(p.current=me,x.current=pe,v.current=he,y.current=ve,b.current=ae);var Pe=X>0?{transition:D,strokeDasharray:B}:{strokeDasharray:k};return g.createElement("path",KI({},Dd(e),{className:j,d:Pz(ve,ae,me,pe,he),ref:A,style:jz(jz({},Pe),e.style)}))})},ktt=["option","shapeType","activeClassName"];function Ftt(t,e){if(t==null)return{};var r,n,a=Ott(t,e);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(t);for(n=0;n<s.length;n++)r=s[n],e.indexOf(r)===-1&&{}.propertyIsEnumerable.call(t,r)&&(a[r]=t[r])}return a}function Ott(t,e){if(t==null)return{};var r={};for(var n in t)if({}.hasOwnProperty.call(t,n)){if(e.indexOf(n)!==-1)continue;r[n]=t[n]}return r}function Bz(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter(function(a){return Object.getOwnPropertyDescriptor(t,a).enumerable})),r.push.apply(r,n)}return r}function qI(t){for(var e=1;e<arguments.length;e++){var r=arguments[e]!=null?arguments[e]:{};e%2?Bz(Object(r),!0).forEach(function(n){Dtt(t,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):Bz(Object(r)).forEach(function(n){Object.defineProperty(t,n,Object.getOwnPropertyDescriptor(r,n))})}return t}function Dtt(t,e,r){return(e=Rtt(e))in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}function Rtt(t){var e=Mtt(t,"string");return typeof e=="symbol"?e:e+""}function Mtt(t,e){if(typeof t!="object"||!t)return t;var r=t[Symbol.toPrimitive];if(r!==void 0){var n=r.call(t,e);if(typeof n!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}function Ltt(t,e){return qI(qI({},e),t)}function Utt(t,e){return t==="symbols"}function Tz(t){var{shapeType:e,elementProps:r}=t;switch(e){case"rectangle":return g.createElement(Voe,r);case"trapezoid":return g.createElement(Ttt,r);case"sector":return g.createElement(Koe,r);case"symbols":if(Utt(e))return g.createElement(qR,r);break;case"curve":return g.createElement(pM,r);default:return null}}function Qtt(t){return g.isValidElement(t)?t.props:t}function Cue(t){var{option:e,shapeType:r,activeClassName:n="recharts-active-shape"}=t,a=Ftt(t,ktt),s;if(g.isValidElement(e))s=g.cloneElement(e,qI(qI({},a),Qtt(e)));else if(typeof e=="function")s=e(a,a.index);else if(Stt(e)&&typeof e!="boolean"){var o=Ltt(e,a);s=g.createElement(Tz,{shapeType:r,elementProps:o})}else{var l=a;s=g.createElement(Tz,{shapeType:r,elementProps:l})}return a.isActive?g.createElement(Pc,{className:n},s):s}var k8=(t,e,r)=>{var n=Cs();return(a,s)=>o=>{t==null||t(a,s,o),n(Pce({activeIndex:String(s),activeDataKey:e,activeCoordinate:a.tooltipPosition,activeGraphicalItemId:r}))}},F8=t=>{var e=Cs();return(r,n)=>a=>{t==null||t(r,n,a),e(ZYe())}},O8=(t,e,r)=>{var n=Cs();return(a,s)=>o=>{t==null||t(a,s,o),n(eJe({activeIndex:String(s),activeDataKey:e,activeCoordinate:a.tooltipPosition,activeGraphicalItemId:r}))}};function _ue(t){var{tooltipEntrySettings:e}=t,r=Cs(),n=qu(),a=g.useRef(null);return g.useLayoutEffect(()=>{n||(a.current===null?r(WYe(e)):a.current!==e&&r(XYe({prev:a.current,next:e})),a.current=e)},[e,r,n]),g.useLayoutEffect(()=>()=>{a.current&&(r(YYe(a.current)),a.current=null)},[r]),null}function Vtt(t){var{legendPayload:e}=t,r=Cs(),n=qu(),a=g.useRef(null);return g.useLayoutEffect(()=>{n||(a.current===null?r(Foe(e)):a.current!==e&&r(Ooe({prev:a.current,next:e})),a.current=e)},[r,n,e]),g.useLayoutEffect(()=>()=>{a.current&&(r(Doe(a.current)),a.current=null)},[r]),null}function Htt(t){var{legendPayload:e}=t,r=Cs(),n=gn(Ta),a=g.useRef(null);return g.useLayoutEffect(()=>{n!=="centric"&&n!=="radial"||(a.current===null?r(Foe(e)):a.current!==e&&r(Ooe({prev:a.current,next:e})),a.current=e)},[r,n,e]),g.useLayoutEffect(()=>()=>{a.current&&(r(Doe(a.current)),a.current=null)},[r]),null}var jB,$tt=()=>{var[t]=g.useState(()=>W2("uid-"));return t},Gtt=(jB=cfe.useId)!==null&&jB!==void 0?jB:$tt;function Ktt(t,e){var r=Gtt();return e||(t?"".concat(t,"-").concat(r):r)}var qtt=g.createContext(void 0),Eue=t=>{var{id:e,type:r,children:n}=t,a=Ktt("recharts-".concat(r),e);return g.createElement(qtt.Provider,{value:a},n(a))},ztt={cartesianItems:[],polarItems:[]},Sue=uu({name:"graphicalItems",initialState:ztt,reducers:{addCartesianGraphicalItem:{reducer(t,e){t.cartesianItems.push(e.payload)},prepare:Ls()},replaceCartesianGraphicalItem:{reducer(t,e){var{prev:r,next:n}=e.payload,a=vf(t).cartesianItems.indexOf(r);a>-1&&(t.cartesianItems[a]=n)},prepare:Ls()},removeCartesianGraphicalItem:{reducer(t,e){var r=vf(t).cartesianItems.indexOf(e.payload);r>-1&&t.cartesianItems.splice(r,1)},prepare:Ls()},addPolarGraphicalItem:{reducer(t,e){t.polarItems.push(e.payload)},prepare:Ls()},removePolarGraphicalItem:{reducer(t,e){var r=vf(t).polarItems.indexOf(e.payload);r>-1&&t.polarItems.splice(r,1)},prepare:Ls()}}}),{addCartesianGraphicalItem:Wtt,replaceCartesianGraphicalItem:Xtt,removeCartesianGraphicalItem:Ytt,addPolarGraphicalItem:Jtt,removePolarGraphicalItem:Ztt}=Sue.actions,ert=Sue.reducer,trt=t=>{var e=Cs(),r=g.useRef(null);return g.useLayoutEffect(()=>{r.current===null?e(Wtt(t)):r.current!==t&&e(Xtt({prev:r.current,next:t})),r.current=t},[e,t]),g.useLayoutEffect(()=>()=>{r.current&&(e(Ytt(r.current)),r.current=null)},[e]),null},rrt=g.memo(trt);function nrt(t){var e=Cs();return g.useLayoutEffect(()=>(e(Jtt(t)),()=>{e(Ztt(t))}),[e,t]),null}var art=["key"],srt=["onMouseEnter","onClick","onMouseLeave"],irt=["id"],ort=["id"];function kz(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter(function(a){return Object.getOwnPropertyDescriptor(t,a).enumerable})),r.push.apply(r,n)}return r}function _i(t){for(var e=1;e<arguments.length;e++){var r=arguments[e]!=null?arguments[e]:{};e%2?kz(Object(r),!0).forEach(function(n){lrt(t,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):kz(Object(r)).forEach(function(n){Object.defineProperty(t,n,Object.getOwnPropertyDescriptor(r,n))})}return t}function lrt(t,e,r){return(e=crt(e))in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}function crt(t){var e=urt(t,"string");return typeof e=="symbol"?e:e+""}function urt(t,e){if(typeof t!="object"||!t)return t;var r=t[Symbol.toPrimitive];if(r!==void 0){var n=r.call(t,e);if(typeof n!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}function Tm(){return Tm=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var r=arguments[e];for(var n in r)({}).hasOwnProperty.call(r,n)&&(t[n]=r[n])}return t},Tm.apply(null,arguments)}function S4(t,e){if(t==null)return{};var r,n,a=drt(t,e);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(t);for(n=0;n<s.length;n++)r=s[n],e.indexOf(r)===-1&&{}.propertyIsEnumerable.call(t,r)&&(a[r]=t[r])}return a}function drt(t,e){if(t==null)return{};var r={};for(var n in t)if({}.hasOwnProperty.call(t,n)){if(e.indexOf(n)!==-1)continue;r[n]=t[n]}return r}function frt(t){var e=g.useMemo(()=>T8(t.children,AN),[t.children]),r=gn(n=>btt(n,t.id,e));return r==null?null:g.createElement(Htt,{legendPayload:r})}var hrt=g.memo(t=>{var{dataKey:e,nameKey:r,sectors:n,stroke:a,strokeWidth:s,fill:o,name:l,hide:c,tooltipType:u,id:d}=t,f={dataDefinedOnItem:n.map(A=>A.tooltipPayload),positions:n.map(A=>A.tooltipPosition),settings:{stroke:a,strokeWidth:s,fill:o,dataKey:e,nameKey:r,name:MP(l,e),hide:c,type:u,color:o,unit:"",graphicalItemId:d}};return g.createElement(_ue,{tooltipEntrySettings:f})}),Art=(t,e)=>t>e?"start":t<e?"end":"middle",mrt=(t,e,r)=>sc(typeof e=="function"?e(t):e,r,r*.8),prt=(t,e,r)=>{var{top:n,left:a,width:s,height:o}=e,l=Hoe(s,o),c=a+sc(t.cx,s,s/2),u=n+sc(t.cy,o,o/2),d=sc(t.innerRadius,l,0),f=mrt(r,t.outerRadius,l),A=t.maxRadius||Math.sqrt(s*s+o*o)/2;return{cx:c,cy:u,innerRadius:d,outerRadius:f,maxRadius:A}},grt=(t,e)=>{var r=jl(e-t),n=Math.min(Math.abs(e-t),360);return r*n};function xrt(t){return t&&typeof t=="object"&&"className"in t&&typeof t.className=="string"?t.className:""}var vrt=(t,e)=>{if(g.isValidElement(t))return g.cloneElement(t,e);if(typeof t=="function")return t(e);var r=ns("recharts-pie-label-line",typeof t!="boolean"?t.className:""),{key:n}=e,a=S4(e,art);return g.createElement(pM,Tm({},a,{type:"linear",className:r}))},yrt=(t,e,r)=>{if(g.isValidElement(t))return g.cloneElement(t,e);var n=r;if(typeof t=="function"&&(n=t(e),g.isValidElement(n)))return n;var a=ns("recharts-pie-label-text",xrt(t));return g.createElement(A4,Tm({},e,{alignmentBaseline:"middle",className:a}),n)};function brt(t){var{sectors:e,props:r,showLabels:n}=t,{label:a,labelLine:s,dataKey:o}=r;if(!n||!a||!e)return null;var l=lh(r),c=z2(a),u=z2(s),d=typeof a=="object"&&"offsetRadius"in a&&typeof a.offsetRadius=="number"&&a.offsetRadius||20,f=e.map((A,h)=>{var m=(A.startAngle+A.endAngle)/2,p=io(A.cx,A.cy,A.outerRadius+d,m),x=_i(_i(_i(_i({},l),A),{},{stroke:"none"},c),{},{index:h,textAnchor:Art(p.x,A.cx)},p),v=_i(_i(_i(_i({},l),A),{},{fill:"none",stroke:A.fill},u),{},{index:h,points:[io(A.cx,A.cy,A.outerRadius,m),p],key:"line"});return g.createElement(xh,{zIndex:nc.label,key:"label-".concat(A.startAngle,"-").concat(A.endAngle,"-").concat(A.midAngle,"-").concat(h)},g.createElement(Pc,null,s&&vrt(s,v),yrt(a,x,ks(A,o))))});return g.createElement(Pc,{className:"recharts-pie-labels"},f)}function wrt(t){var{sectors:e,props:r,showLabels:n}=t,{label:a}=r;return typeof a=="object"&&a!=null&&"position"in a?g.createElement(pue,{label:a}):g.createElement(brt,{sectors:e,props:r,showLabels:n})}function Nrt(t){var{sectors:e,activeShape:r,inactiveShape:n,allOtherPieProps:a,shape:s,id:o}=t,l=gn(Ng),c=gn(w8),u=gn(LJe),{onMouseEnter:d,onClick:f,onMouseLeave:A}=a,h=S4(a,srt),m=k8(d,a.dataKey,o),p=F8(A),x=O8(f,a.dataKey,o);return e==null||e.length===0?null:g.createElement(g.Fragment,null,e.map((v,y)=>{if((v==null?void 0:v.startAngle)===0&&(v==null?void 0:v.endAngle)===0&&e.length!==1)return null;var b=u==null||u===o,w=String(y)===l&&(c==null||a.dataKey===c)&&b,j=l?n:null,I=r&&w?r:j,_=_i(_i({},v),{},{stroke:v.stroke,tabIndex:-1,[poe]:y,[goe]:o});return g.createElement(Pc,Tm({key:"sector-".concat(v==null?void 0:v.startAngle,"-").concat(v==null?void 0:v.endAngle,"-").concat(v.midAngle,"-").concat(y),tabIndex:-1,className:"recharts-pie-sector"},Ww(h,v,y),{onMouseEnter:m(v,y),onMouseLeave:p(v,y),onClick:x(v,y)}),g.createElement(Cue,Tm({option:s??I,index:y,shapeType:"sector",isActive:w},_)))}))}function Crt(t){var e,{pieSettings:r,displayedData:n,cells:a,offset:s}=t,{cornerRadius:o,startAngle:l,endAngle:c,dataKey:u,nameKey:d,tooltipType:f}=r,A=Math.abs(r.minAngle),h=grt(l,c),m=Math.abs(h),p=n.length<=1?0:(e=r.paddingAngle)!==null&&e!==void 0?e:0,x=n.filter(I=>ks(I,u,0)!==0).length,v=(m>=360?x:x-1)*p,y=m-x*A-v,b=n.reduce((I,_)=>{var S=ks(_,u,0);return I+(Cn(S)?S:0)},0),w;if(b>0){var j;w=n.map((I,_)=>{var S=ks(I,u,0),E=ks(I,d,_),T=prt(r,s,I),k=(Cn(S)?S:0)/b,B,D=_i(_i({},I),a&&a[_]&&a[_].props);_?B=j.endAngle+jl(h)*p*(S!==0?1:0):B=l;var X=B+jl(h)*((S!==0?A:0)+k*y),me=(B+X)/2,pe=(T.innerRadius+T.outerRadius)/2,he=[{name:E,value:S,payload:D,dataKey:u,type:f,graphicalItemId:r.id}],ve=io(T.cx,T.cy,pe,me);return j=_i(_i(_i(_i({},r.presentationProps),{},{percent:k,cornerRadius:typeof o=="string"?parseFloat(o):o,name:E,tooltipPayload:he,midAngle:me,middleRadius:pe,tooltipPosition:ve},D),T),{},{value:S,dataKey:u,startAngle:B,endAngle:X,payload:D,paddingAngle:jl(h)*p}),j})}return w}function _rt(t){var{showLabels:e,sectors:r,children:n}=t,a=g.useMemo(()=>!e||!r?[]:r.map(s=>({value:s.value,payload:s.payload,clockWise:!1,parentViewBox:void 0,viewBox:{cx:s.cx,cy:s.cy,innerRadius:s.innerRadius,outerRadius:s.outerRadius,startAngle:s.startAngle,endAngle:s.endAngle,clockWise:!1},fill:s.fill})),[r,e]);return g.createElement(stt,{value:e?a:void 0},n)}function Ert(t){var{props:e,previousSectorsRef:r,id:n}=t,{sectors:a,isAnimationActive:s,animationBegin:o,animationDuration:l,animationEasing:c,activeShape:u,inactiveShape:d,onAnimationStart:f,onAnimationEnd:A}=e,h=XP(e,"recharts-pie-"),m=r.current,[p,x]=g.useState(!1),v=g.useCallback(()=>{typeof A=="function"&&A(),x(!1)},[A]),y=g.useCallback(()=>{typeof f=="function"&&f(),x(!0)},[f]);return g.createElement(_rt,{showLabels:!p,sectors:a},g.createElement(WP,{animationId:h,begin:o,duration:l,isActive:s,easing:c,onAnimationStart:y,onAnimationEnd:v,key:h},b=>{var w=[],j=a&&a[0],I=j==null?void 0:j.startAngle;return a==null||a.forEach((_,S)=>{var E=m&&m[S],T=S>0?xg(_,"paddingAngle",0):0;if(E){var k=No(E.endAngle-E.startAngle,_.endAngle-_.startAngle,b),B=_i(_i({},_),{},{startAngle:I+T,endAngle:I+k+T});w.push(B),I=B.endAngle}else{var{endAngle:D,startAngle:X}=_,me=No(0,D-X,b),pe=_i(_i({},_),{},{startAngle:I+T,endAngle:I+me+T});w.push(pe),I=pe.endAngle}}),r.current=w,g.createElement(Pc,null,g.createElement(Nrt,{sectors:w,activeShape:u,inactiveShape:d,allOtherPieProps:e,shape:e.shape,id:n}))}),g.createElement(wrt,{showLabels:!p,sectors:a,props:e}),e.children)}var Srt={animationBegin:400,animationDuration:1500,animationEasing:"ease",cx:"50%",cy:"50%",dataKey:"value",endAngle:360,fill:"#808080",hide:!1,innerRadius:0,isAnimationActive:"auto",label:!1,labelLine:!0,legendType:"rect",minAngle:0,nameKey:"name",outerRadius:"80%",paddingAngle:0,rootTabIndex:0,startAngle:0,stroke:"#fff",zIndex:nc.area};function Irt(t){var{id:e}=t,r=S4(t,irt),{hide:n,className:a,rootTabIndex:s}=t,o=g.useMemo(()=>T8(t.children,AN),[t.children]),l=gn(d=>wtt(d,e,o)),c=g.useRef(null),u=ns("recharts-pie",a);return n||l==null?(c.current=null,g.createElement(Pc,{tabIndex:s,className:u})):g.createElement(xh,{zIndex:t.zIndex},g.createElement(hrt,{dataKey:t.dataKey,nameKey:t.nameKey,sectors:l,stroke:t.stroke,strokeWidth:t.strokeWidth,fill:t.fill,name:t.name,hide:t.hide,tooltipType:t.tooltipType,id:e}),g.createElement(Pc,{tabIndex:s,className:u},g.createElement(Ert,{props:_i(_i({},r),{},{sectors:l}),previousSectorsRef:c,id:e})))}function Iue(t){var e=Tl(t,Srt),{id:r}=e,n=S4(e,ort),a=lh(n);return g.createElement(Eue,{id:r,type:"pie"},s=>g.createElement(g.Fragment,null,g.createElement(nrt,{type:"pie",id:s,data:n.data,dataKey:n.dataKey,hide:n.hide,angleAxisId:0,radiusAxisId:0,name:n.name,nameKey:n.nameKey,tooltipType:n.tooltipType,legendType:n.legendType,fill:n.fill,cx:n.cx,cy:n.cy,startAngle:n.startAngle,endAngle:n.endAngle,paddingAngle:n.paddingAngle,minAngle:n.minAngle,innerRadius:n.innerRadius,outerRadius:n.outerRadius,cornerRadius:n.cornerRadius,presentationProps:a,maxRadius:e.maxRadius}),g.createElement(frt,Tm({},n,{id:s})),g.createElement(Irt,Tm({},n,{id:s}))))}Iue.displayName="Pie";function Fz(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter(function(a){return Object.getOwnPropertyDescriptor(t,a).enumerable})),r.push.apply(r,n)}return r}function Oz(t){for(var e=1;e<arguments.length;e++){var r=arguments[e]!=null?arguments[e]:{};e%2?Fz(Object(r),!0).forEach(function(n){jrt(t,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):Fz(Object(r)).forEach(function(n){Object.defineProperty(t,n,Object.getOwnPropertyDescriptor(r,n))})}return t}function jrt(t,e,r){return(e=Prt(e))in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}function Prt(t){var e=Brt(t,"string");return typeof e=="symbol"?e:e+""}function Brt(t,e){if(typeof t!="object"||!t)return t;var r=t[Symbol.toPrimitive];if(r!==void 0){var n=r.call(t,e);if(typeof n!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}var jue=0,Trt={xAxis:{},yAxis:{},zAxis:{}},Pue=uu({name:"cartesianAxis",initialState:Trt,reducers:{addXAxis:{reducer(t,e){t.xAxis[e.payload.id]=e.payload},prepare:Ls()},replaceXAxis:{reducer(t,e){var{prev:r,next:n}=e.payload;t.xAxis[r.id]!==void 0&&(r.id!==n.id&&delete t.xAxis[r.id],t.xAxis[n.id]=n)},prepare:Ls()},removeXAxis:{reducer(t,e){delete t.xAxis[e.payload.id]},prepare:Ls()},addYAxis:{reducer(t,e){t.yAxis[e.payload.id]=e.payload},prepare:Ls()},replaceYAxis:{reducer(t,e){var{prev:r,next:n}=e.payload;t.yAxis[r.id]!==void 0&&(r.id!==n.id&&delete t.yAxis[r.id],t.yAxis[n.id]=n)},prepare:Ls()},removeYAxis:{reducer(t,e){delete t.yAxis[e.payload.id]},prepare:Ls()},addZAxis:{reducer(t,e){t.zAxis[e.payload.id]=e.payload},prepare:Ls()},replaceZAxis:{reducer(t,e){var{prev:r,next:n}=e.payload;t.zAxis[r.id]!==void 0&&(r.id!==n.id&&delete t.zAxis[r.id],t.zAxis[n.id]=n)},prepare:Ls()},removeZAxis:{reducer(t,e){delete t.zAxis[e.payload.id]},prepare:Ls()},updateYAxisWidth(t,e){var{id:r,width:n}=e.payload,a=t.yAxis[r];if(a){var s=a.widthHistory||[];if(s.length===3&&s[0]===s[2]&&n===s[1]&&n!==a.width&&Math.abs(n-s[0])<=1)return;var o=[...s,n].slice(-3);t.yAxis[r]=Oz(Oz({},t.yAxis[r]),{},{width:n,widthHistory:o})}}}}),{addXAxis:krt,replaceXAxis:Frt,removeXAxis:Ort,addYAxis:Drt,replaceYAxis:Rrt,removeYAxis:Mrt,addZAxis:Xit,replaceZAxis:Yit,removeZAxis:Jit,updateYAxisWidth:Lrt}=Pue.actions,Urt=Pue.reducer,Qrt=Kt([Fo],t=>({top:t.top,bottom:t.bottom,left:t.left,right:t.right})),Vrt=Kt([Qrt,MA,LA],(t,e,r)=>{if(!(!t||e==null||r==null))return{x:t.left,y:t.top,width:Math.max(0,e-t.left-t.right),height:Math.max(0,r-t.top-t.bottom)}}),Bue=()=>gn(Vrt),Dz=(t,e,r)=>{var n=r??t;if(!nl(n))return sc(n,e,0)},Hrt=(t,e,r)=>{var n={},a=t.filter(i4),s=t.filter(u=>u.stackId==null),o=a.reduce((u,d)=>(u[d.stackId]||(u[d.stackId]=[]),u[d.stackId].push(d),u),n),l=Object.entries(o).map(u=>{var[d,f]=u,A=f.map(m=>m.dataKey),h=Dz(e,r,f[0].barSize);return{stackId:d,dataKeys:A,barSize:h}}),c=s.map(u=>{var d=[u.dataKey].filter(A=>A!=null),f=Dz(e,r,u.barSize);return{stackId:void 0,dataKeys:d,barSize:f}});return[...l,...c]};function Rz(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter(function(a){return Object.getOwnPropertyDescriptor(t,a).enumerable})),r.push.apply(r,n)}return r}function P_(t){for(var e=1;e<arguments.length;e++){var r=arguments[e]!=null?arguments[e]:{};e%2?Rz(Object(r),!0).forEach(function(n){$rt(t,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):Rz(Object(r)).forEach(function(n){Object.defineProperty(t,n,Object.getOwnPropertyDescriptor(r,n))})}return t}function $rt(t,e,r){return(e=Grt(e))in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}function Grt(t){var e=Krt(t,"string");return typeof e=="symbol"?e:e+""}function Krt(t,e){if(typeof t!="object"||!t)return t;var r=t[Symbol.toPrimitive];if(r!==void 0){var n=r.call(t,e);if(typeof n!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}function qrt(t,e,r,n,a){var s=n.length;if(!(s<1)){var o=sc(t,r,0,!0),l,c=[];if(hi(n[0].barSize)){var u=!1,d=r/s,f=n.reduce((v,y)=>v+(y.barSize||0),0);f+=(s-1)*o,f>=r&&(f-=(s-1)*o,o=0),f>=r&&d>0&&(u=!0,d*=.9,f=s*d);var A=(r-f)/2>>0,h={offset:A-o,size:0};l=n.reduce((v,y)=>{var b,w={stackId:y.stackId,dataKeys:y.dataKeys,position:{offset:h.offset+h.size+o,size:u?d:(b=y.barSize)!==null&&b!==void 0?b:0}},j=[...v,w];return h=j[j.length-1].position,j},c)}else{var m=sc(e,r,0,!0);r-2*m-(s-1)*o<=0&&(o=0);var p=(r-2*m-(s-1)*o)/s;p>1&&(p>>=0);var x=hi(a)?Math.min(p,a):p;l=n.reduce((v,y,b)=>[...v,{stackId:y.stackId,dataKeys:y.dataKeys,position:{offset:m+(p+o)*b+(p-x)/2,size:x}}],c)}return l}}var zrt=(t,e,r,n,a,s,o)=>{var l=nl(o)?e:o,c=qrt(r,n,a!==s?a:s,t,l);return a!==s&&c!=null&&(c=c.map(u=>P_(P_({},u),{},{position:P_(P_({},u.position),{},{offset:u.position.offset-a/2})}))),c},Wrt=(t,e)=>{var r=zM(e);if(!(!t||r==null||e==null)){var{stackId:n}=e;if(n!=null){var a=t[n];if(a){var{stackedData:s}=a;if(s)return s.find(o=>o.key===r)}}}};function Xrt(t,e){return t&&typeof t=="object"&&"zIndex"in t&&typeof t.zIndex=="number"&&hi(t.zIndex)?t.zIndex:e}var Tue=t=>{var{chartData:e}=t,r=Cs(),n=qu();return g.useEffect(()=>n?()=>{}:(r(Zq(e)),()=>{r(Zq(void 0))}),[e,r,n]),null},Mz={x:0,y:0,width:0,height:0,padding:{top:0,right:0,bottom:0,left:0}},kue=uu({name:"brush",initialState:Mz,reducers:{setBrushSettings(t,e){return e.payload==null?Mz:e.payload}}}),{setBrushSettings:Zit}=kue.actions,Yrt=kue.reducer;function Jrt(t,e,r){return(e=Zrt(e))in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}function Zrt(t){var e=ent(t,"string");return typeof e=="symbol"?e:e+""}function ent(t,e){if(typeof t!="object"||!t)return t;var r=t[Symbol.toPrimitive];if(r!==void 0){var n=r.call(t,e);if(typeof n!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}class D8{static create(e){return new D8(e)}constructor(e){this.scale=e}get domain(){return this.scale.domain}get range(){return this.scale.range}get rangeMin(){return this.range()[0]}get rangeMax(){return this.range()[1]}get bandwidth(){return this.scale.bandwidth}apply(e){var{bandAware:r,position:n}=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};if(e!==void 0){if(n)switch(n){case"start":return this.scale(e);case"middle":{var a=this.bandwidth?this.bandwidth()/2:0;return this.scale(e)+a}case"end":{var s=this.bandwidth?this.bandwidth():0;return this.scale(e)+s}default:return this.scale(e)}if(r){var o=this.bandwidth?this.bandwidth()/2:0;return this.scale(e)+o}return this.scale(e)}}isInRange(e){var r=this.range(),n=r[0],a=r[r.length-1];return n<=a?e>=n&&e<=a:e>=a&&e<=n}}Jrt(D8,"EPS",1e-4);function tnt(t){return(t%180+180)%180}var rnt=function(e){var{width:r,height:n}=e,a=arguments.length>1&&arguments[1]!==void 0?arguments[1]:0,s=tnt(a),o=s*Math.PI/180,l=Math.atan(n/r),c=o>l&&o<Math.PI-l?n/Math.sin(o):r/Math.cos(o);return Math.abs(c)},nnt={dots:[],areas:[],lines:[]},Fue=uu({name:"referenceElements",initialState:nnt,reducers:{addDot:(t,e)=>{t.dots.push(e.payload)},removeDot:(t,e)=>{var r=vf(t).dots.findIndex(n=>n===e.payload);r!==-1&&t.dots.splice(r,1)},addArea:(t,e)=>{t.areas.push(e.payload)},removeArea:(t,e)=>{var r=vf(t).areas.findIndex(n=>n===e.payload);r!==-1&&t.areas.splice(r,1)},addLine:(t,e)=>{t.lines.push(e.payload)},removeLine:(t,e)=>{var r=vf(t).lines.findIndex(n=>n===e.payload);r!==-1&&t.lines.splice(r,1)}}}),{addDot:eot,removeDot:tot,addArea:rot,removeArea:not,addLine:aot,removeLine:sot}=Fue.actions,ant=Fue.reducer,snt=g.createContext(void 0),int=t=>{var{children:e}=t,[r]=g.useState("".concat(W2("recharts"),"-clip")),n=Bue();if(n==null)return null;var{x:a,y:s,width:o,height:l}=n;return g.createElement(snt.Provider,{value:r},g.createElement("defs",null,g.createElement("clipPath",{id:r},g.createElement("rect",{x:a,y:s,height:l,width:o}))),e)};function Oue(t,e){if(e<1)return[];if(e===1)return t;for(var r=[],n=0;n<t.length;n+=e){var a=t[n];a!==void 0&&r.push(a)}return r}function ont(t,e,r){var n={width:t.width+e.width,height:t.height+e.height};return rnt(n,r)}function lnt(t,e,r){var n=r==="width",{x:a,y:s,width:o,height:l}=t;return e===1?{start:n?a:s,end:n?a+o:s+l}:{start:n?a+o:s+l,end:n?a:s}}function cw(t,e,r,n,a){if(t*e<t*n||t*e>t*a)return!1;var s=r();return t*(e-t*s/2-n)>=0&&t*(e+t*s/2-a)<=0}function cnt(t,e){return Oue(t,e+1)}function unt(t,e,r,n,a){for(var s=(n||[]).slice(),{start:o,end:l}=e,c=0,u=1,d=o,f=function(){var m=n==null?void 0:n[c];if(m===void 0)return{v:Oue(n,u)};var p=c,x,v=()=>(x===void 0&&(x=r(m,p)),x),y=m.coordinate,b=c===0||cw(t,y,v,d,l);b||(c=0,d=o,u+=1),b&&(d=y+t*(v()/2+a),c+=u)},A;u<=s.length;)if(A=f(),A)return A.v;return[]}function dnt(t,e,r,n,a){var s=(n||[]).slice(),o=s.length;if(o===0)return[];for(var{start:l,end:c}=e,u=1;u<=o;u++){for(var d=(o-1)%u,f=l,A=!0,h=function(){var y=n[m],b=m,w,j=()=>(w===void 0&&(w=r(y,b)),w),I=y.coordinate,_=m===d||cw(t,I,j,f,c);if(!_)return A=!1,1;_&&(f=I+t*(j()/2+a))},m=d;m<o&&!h();m+=u);if(A){for(var p=[],x=d;x<o;x+=u)p.push(n[x]);return p}}return[]}function Lz(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter(function(a){return Object.getOwnPropertyDescriptor(t,a).enumerable})),r.push.apply(r,n)}return r}function Xl(t){for(var e=1;e<arguments.length;e++){var r=arguments[e]!=null?arguments[e]:{};e%2?Lz(Object(r),!0).forEach(function(n){fnt(t,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):Lz(Object(r)).forEach(function(n){Object.defineProperty(t,n,Object.getOwnPropertyDescriptor(r,n))})}return t}function fnt(t,e,r){return(e=hnt(e))in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}function hnt(t){var e=Ant(t,"string");return typeof e=="symbol"?e:e+""}function Ant(t,e){if(typeof t!="object"||!t)return t;var r=t[Symbol.toPrimitive];if(r!==void 0){var n=r.call(t,e);if(typeof n!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}function mnt(t,e,r,n,a){for(var s=(n||[]).slice(),o=s.length,{start:l}=e,{end:c}=e,u=function(A){var h=s[A],m,p=()=>(m===void 0&&(m=r(h,A)),m);if(A===o-1){var x=t*(h.coordinate+t*p()/2-c);s[A]=h=Xl(Xl({},h),{},{tickCoord:x>0?h.coordinate-x*t:h.coordinate})}else s[A]=h=Xl(Xl({},h),{},{tickCoord:h.coordinate});if(h.tickCoord!=null){var v=cw(t,h.tickCoord,p,l,c);v&&(c=h.tickCoord-t*(p()/2+a),s[A]=Xl(Xl({},h),{},{isShow:!0}))}},d=o-1;d>=0;d--)u(d);return s}function pnt(t,e,r,n,a,s){var o=(n||[]).slice(),l=o.length,{start:c,end:u}=e;if(s){var d=n[l-1],f=r(d,l-1),A=t*(d.coordinate+t*f/2-u);if(o[l-1]=d=Xl(Xl({},d),{},{tickCoord:A>0?d.coordinate-A*t:d.coordinate}),d.tickCoord!=null){var h=cw(t,d.tickCoord,()=>f,c,u);h&&(u=d.tickCoord-t*(f/2+a),o[l-1]=Xl(Xl({},d),{},{isShow:!0}))}}for(var m=s?l-1:l,p=function(y){var b=o[y],w,j=()=>(w===void 0&&(w=r(b,y)),w);if(y===0){var I=t*(b.coordinate-t*j()/2-c);o[y]=b=Xl(Xl({},b),{},{tickCoord:I<0?b.coordinate-I*t:b.coordinate})}else o[y]=b=Xl(Xl({},b),{},{tickCoord:b.coordinate});if(b.tickCoord!=null){var _=cw(t,b.tickCoord,j,c,u);_&&(c=b.tickCoord+t*(j()/2+a),o[y]=Xl(Xl({},b),{},{isShow:!0}))}},x=0;x<m;x++)p(x);return o}function gnt(t,e,r){var{tick:n,ticks:a,viewBox:s,minTickGap:o,orientation:l,interval:c,tickFormatter:u,unit:d,angle:f}=t;if(!a||!a.length||!n)return[];if(Cn(c)||zP.isSsr){var A;return(A=cnt(a,Cn(c)?c:0))!==null&&A!==void 0?A:[]}var h=[],m=l==="top"||l==="bottom"?"width":"height",p=d&&m==="width"?Qb(d,{fontSize:e,letterSpacing:r}):{width:0,height:0},x=(b,w)=>{var j=typeof u=="function"?u(b.value,w):b.value;return m==="width"?ont(Qb(j,{fontSize:e,letterSpacing:r}),p,f):Qb(j,{fontSize:e,letterSpacing:r})[m]},v=a.length>=2?jl(a[1].coordinate-a[0].coordinate):1,y=lnt(s,v,m);return c==="equidistantPreserveStart"?unt(v,y,x,a,o):c==="equidistantPreserveEnd"?dnt(v,y,x,a,o):(c==="preserveStart"||c==="preserveStartEnd"?h=pnt(v,y,x,a,o,c==="preserveStartEnd"):h=mnt(v,y,x,a,o),h.filter(b=>b.isShow))}var xnt=t=>{var{ticks:e,label:r,labelGapWithTick:n=5,tickSize:a=0,tickMargin:s=0}=t,o=0;if(e){Array.from(e).forEach(d=>{if(d){var f=d.getBoundingClientRect();f.width>o&&(o=f.width)}});var l=r?r.getBoundingClientRect().width:0,c=a+s,u=o+c+l+(r?n:0);return Math.round(u)}return 0},vnt=["axisLine","width","height","className","hide","ticks","axisType"];function ynt(t,e){if(t==null)return{};var r,n,a=bnt(t,e);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(t);for(n=0;n<s.length;n++)r=s[n],e.indexOf(r)===-1&&{}.propertyIsEnumerable.call(t,r)&&(a[r]=t[r])}return a}function bnt(t,e){if(t==null)return{};var r={};for(var n in t)if({}.hasOwnProperty.call(t,n)){if(e.indexOf(n)!==-1)continue;r[n]=t[n]}return r}function Cg(){return Cg=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var r=arguments[e];for(var n in r)({}).hasOwnProperty.call(r,n)&&(t[n]=r[n])}return t},Cg.apply(null,arguments)}function Uz(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter(function(a){return Object.getOwnPropertyDescriptor(t,a).enumerable})),r.push.apply(r,n)}return r}function ro(t){for(var e=1;e<arguments.length;e++){var r=arguments[e]!=null?arguments[e]:{};e%2?Uz(Object(r),!0).forEach(function(n){wnt(t,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):Uz(Object(r)).forEach(function(n){Object.defineProperty(t,n,Object.getOwnPropertyDescriptor(r,n))})}return t}function wnt(t,e,r){return(e=Nnt(e))in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}function Nnt(t){var e=Cnt(t,"string");return typeof e=="symbol"?e:e+""}function Cnt(t,e){if(typeof t!="object"||!t)return t;var r=t[Symbol.toPrimitive];if(r!==void 0){var n=r.call(t,e);if(typeof n!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}var qp={x:0,y:0,width:0,height:0,viewBox:{x:0,y:0,width:0,height:0},orientation:"bottom",ticks:[],stroke:"#666",tickLine:!0,axisLine:!0,tick:!0,mirror:!1,minTickGap:5,tickSize:6,tickMargin:2,interval:"preserveEnd",zIndex:nc.axis};function _nt(t){var{x:e,y:r,width:n,height:a,orientation:s,mirror:o,axisLine:l,otherSvgProps:c}=t;if(!l)return null;var u=ro(ro(ro({},c),lh(l)),{},{fill:"none"});if(s==="top"||s==="bottom"){var d=+(s==="top"&&!o||s==="bottom"&&o);u=ro(ro({},u),{},{x1:e,y1:r+d*a,x2:e+n,y2:r+d*a})}else{var f=+(s==="left"&&!o||s==="right"&&o);u=ro(ro({},u),{},{x1:e+f*n,y1:r,x2:e+f*n,y2:r+a})}return g.createElement("line",Cg({},u,{className:ns("recharts-cartesian-axis-line",xg(l,"className"))}))}function Ent(t,e,r,n,a,s,o,l,c){var u,d,f,A,h,m,p=l?-1:1,x=t.tickSize||o,v=Cn(t.tickCoord)?t.tickCoord:t.coordinate;switch(s){case"top":u=d=t.coordinate,A=r+ +!l*a,f=A-p*x,m=f-p*c,h=v;break;case"left":f=A=t.coordinate,d=e+ +!l*n,u=d-p*x,h=u-p*c,m=v;break;case"right":f=A=t.coordinate,d=e+ +l*n,u=d+p*x,h=u+p*c,m=v;break;default:u=d=t.coordinate,A=r+ +l*a,f=A+p*x,m=f+p*c,h=v;break}return{line:{x1:u,y1:f,x2:d,y2:A},tick:{x:h,y:m}}}function Snt(t,e){switch(t){case"left":return e?"start":"end";case"right":return e?"end":"start";default:return"middle"}}function Int(t,e){switch(t){case"left":case"right":return"middle";case"top":return e?"start":"end";default:return e?"end":"start"}}function jnt(t){var{option:e,tickProps:r,value:n}=t,a,s=ns(r.className,"recharts-cartesian-axis-tick-value");if(g.isValidElement(e))a=g.cloneElement(e,ro(ro({},r),{},{className:s}));else if(typeof e=="function")a=e(ro(ro({},r),{},{className:s}));else{var o="recharts-cartesian-axis-tick-value";typeof e!="boolean"&&(o=ns(o,e==null?void 0:e.className)),a=g.createElement(A4,Cg({},r,{className:o}),n)}return a}var Pnt=g.forwardRef((t,e)=>{var{ticks:r=[],tick:n,tickLine:a,stroke:s,tickFormatter:o,unit:l,padding:c,tickTextProps:u,orientation:d,mirror:f,x:A,y:h,width:m,height:p,tickSize:x,tickMargin:v,fontSize:y,letterSpacing:b,getTicksConfig:w,events:j,axisType:I}=t,_=gnt(ro(ro({},w),{},{ticks:r}),y,b),S=Snt(d,f),E=Int(d,f),T=lh(w),k=z2(n),B={};typeof a=="object"&&(B=a);var D=ro(ro({},T),{},{fill:"none"},B),X=_.map(he=>ro({entry:he},Ent(he,A,h,m,p,d,x,f,v))),me=X.map(he=>{var{entry:ve,line:ae}=he;return g.createElement(Pc,{className:"recharts-cartesian-axis-tick",key:"tick-".concat(ve.value,"-").concat(ve.coordinate,"-").concat(ve.tickCoord)},a&&g.createElement("line",Cg({},D,ae,{className:ns("recharts-cartesian-axis-tick-line",xg(a,"className"))})))}),pe=X.map((he,ve)=>{var{entry:ae,tick:Pe}=he,ke=ro(ro(ro(ro({textAnchor:S,verticalAnchor:E},T),{},{stroke:"none",fill:s},k),Pe),{},{index:ve,payload:ae,visibleTicksCount:_.length,tickFormatter:o,padding:c},u);return g.createElement(Pc,Cg({className:"recharts-cartesian-axis-tick-label",key:"tick-label-".concat(ae.value,"-").concat(ae.coordinate,"-").concat(ae.tickCoord)},Ww(j,ae,ve)),n&&g.createElement(jnt,{option:n,tickProps:ke,value:"".concat(typeof o=="function"?o(ae.value,ve):ae.value).concat(l||"")}))});return g.createElement("g",{className:"recharts-cartesian-axis-ticks recharts-".concat(I,"-ticks")},pe.length>0&&g.createElement(xh,{zIndex:nc.label},g.createElement("g",{className:"recharts-cartesian-axis-tick-labels recharts-".concat(I,"-tick-labels"),ref:e},pe)),me.length>0&&g.createElement("g",{className:"recharts-cartesian-axis-tick-lines recharts-".concat(I,"-tick-lines")},me))}),Bnt=g.forwardRef((t,e)=>{var{axisLine:r,width:n,height:a,className:s,hide:o,ticks:l,axisType:c}=t,u=ynt(t,vnt),[d,f]=g.useState(""),[A,h]=g.useState(""),m=g.useRef(null);g.useImperativeHandle(e,()=>({getCalculatedWidth:()=>{var x;return xnt({ticks:m.current,label:(x=t.labelRef)===null||x===void 0?void 0:x.current,labelGapWithTick:5,tickSize:t.tickSize,tickMargin:t.tickMargin})}}));var p=g.useCallback(x=>{if(x){var v=x.getElementsByClassName("recharts-cartesian-axis-tick-value");m.current=v;var y=v[0];if(y){var b=window.getComputedStyle(y),w=b.fontSize,j=b.letterSpacing;(w!==d||j!==A)&&(f(w),h(j))}}},[d,A]);return o||n!=null&&n<=0||a!=null&&a<=0?null:g.createElement(xh,{zIndex:t.zIndex},g.createElement(Pc,{className:ns("recharts-cartesian-axis",s)},g.createElement(_nt,{x:t.x,y:t.y,width:n,height:a,orientation:t.orientation,mirror:t.mirror,axisLine:r,otherSvgProps:lh(t)}),g.createElement(Pnt,{ref:p,axisType:c,events:u,fontSize:d,getTicksConfig:t,height:t.height,letterSpacing:A,mirror:t.mirror,orientation:t.orientation,padding:t.padding,stroke:t.stroke,tick:t.tick,tickFormatter:t.tickFormatter,tickLine:t.tickLine,tickMargin:t.tickMargin,tickSize:t.tickSize,tickTextProps:t.tickTextProps,ticks:l,unit:t.unit,width:t.width,x:t.x,y:t.y}),g.createElement(Qet,{x:t.x,y:t.y,width:t.width,height:t.height,lowerWidth:t.width,upperWidth:t.width},g.createElement(Yet,{label:t.label,labelRef:t.labelRef}),t.children)))}),R8=g.forwardRef((t,e)=>{var r=Tl(t,qp);return g.createElement(Bnt,Cg({},r,{ref:e}))});R8.displayName="CartesianAxis";var Tnt={},Due=uu({name:"errorBars",initialState:Tnt,reducers:{addErrorBar:(t,e)=>{var{itemId:r,errorBar:n}=e.payload;t[r]||(t[r]=[]),t[r].push(n)},replaceErrorBar:(t,e)=>{var{itemId:r,prev:n,next:a}=e.payload;t[r]&&(t[r]=t[r].map(s=>s.dataKey===n.dataKey&&s.direction===n.direction?a:s))},removeErrorBar:(t,e)=>{var{itemId:r,errorBar:n}=e.payload;t[r]&&(t[r]=t[r].filter(a=>a.dataKey!==n.dataKey||a.direction!==n.direction))}}}),{addErrorBar:iot,replaceErrorBar:oot,removeErrorBar:lot}=Due.actions,knt=Due.reducer,Fnt=["children"];function Ont(t,e){if(t==null)return{};var r,n,a=Dnt(t,e);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(t);for(n=0;n<s.length;n++)r=s[n],e.indexOf(r)===-1&&{}.propertyIsEnumerable.call(t,r)&&(a[r]=t[r])}return a}function Dnt(t,e){if(t==null)return{};var r={};for(var n in t)if({}.hasOwnProperty.call(t,n)){if(e.indexOf(n)!==-1)continue;r[n]=t[n]}return r}var Rnt={data:[],xAxisId:"xAxis-0",yAxisId:"yAxis-0",dataPointFormatter:()=>({x:0,y:0,value:0}),errorBarOffset:0},Mnt=g.createContext(Rnt);function Lnt(t){var{children:e}=t,r=Ont(t,Fnt);return g.createElement(Mnt.Provider,{value:r},e)}function Rue(t,e){var r,n,a=gn(u=>VA(u,t)),s=gn(u=>HA(u,e)),o=(r=a==null?void 0:a.allowDataOverflow)!==null&&r!==void 0?r:Vo.allowDataOverflow,l=(n=s==null?void 0:s.allowDataOverflow)!==null&&n!==void 0?n:Ho.allowDataOverflow,c=o||l;return{needClip:c,needClipX:o,needClipY:l}}function Unt(t){var{xAxisId:e,yAxisId:r,clipPathId:n}=t,a=Bue(),{needClipX:s,needClipY:o,needClip:l}=Rue(e,r);if(!l||!a)return null;var{x:c,y:u,width:d,height:f}=a;return g.createElement("clipPath",{id:"clipPath-".concat(n)},g.createElement("rect",{x:s?c:c-d/2,y:o?u:u-f/2,width:s?d:d*2,height:o?f:f*2}))}var Qnt={};/**
 * @license React
 * use-sync-external-store-with-selector.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var mN=g;function Vnt(t,e){return t===e&&(t!==0||1/t===1/e)||t!==t&&e!==e}var Hnt=typeof Object.is=="function"?Object.is:Vnt,$nt=mN.useSyncExternalStore,Gnt=mN.useRef,Knt=mN.useEffect,qnt=mN.useMemo,znt=mN.useDebugValue;Qnt.useSyncExternalStoreWithSelector=function(t,e,r,n,a){var s=Gnt(null);if(s.current===null){var o={hasValue:!1,value:null};s.current=o}else o=s.current;s=qnt(function(){function c(h){if(!u){if(u=!0,d=h,h=n(h),a!==void 0&&o.hasValue){var m=o.value;if(a(m,h))return f=m}return f=h}if(m=f,Hnt(d,h))return m;var p=n(h);return a!==void 0&&a(m,p)?(d=h,m):(d=h,f=p)}var u=!1,d,f,A=r===void 0?null:r;return[function(){return c(e())},A===null?void 0:function(){return c(A())}]},[e,r,n,a]);var l=$nt(t,s[0],s[1]);return Knt(function(){o.hasValue=!0,o.value=l},[l]),znt(l),l};function Wnt(t){t()}function Xnt(){let t=null,e=null;return{clear(){t=null,e=null},notify(){Wnt(()=>{let r=t;for(;r;)r.callback(),r=r.next})},get(){const r=[];let n=t;for(;n;)r.push(n),n=n.next;return r},subscribe(r){let n=!0;const a=e={callback:r,next:null,prev:e};return a.prev?a.prev.next=a:t=a,function(){!n||t===null||(n=!1,a.next?a.next.prev=a.prev:e=a.prev,a.prev?a.prev.next=a.next:t=a.next)}}}}var Qz={notify(){},get:()=>[]};function Ynt(t,e){let r,n=Qz,a=0,s=!1;function o(p){d();const x=n.subscribe(p);let v=!1;return()=>{v||(v=!0,x(),f())}}function l(){n.notify()}function c(){m.onStateChange&&m.onStateChange()}function u(){return s}function d(){a++,r||(r=t.subscribe(c),n=Xnt())}function f(){a--,r&&a===0&&(r(),r=void 0,n.clear(),n=Qz)}function A(){s||(s=!0,d())}function h(){s&&(s=!1,f())}const m={addNestedSub:o,notifyNestedSubs:l,handleChangeWrapper:c,isSubscribed:u,trySubscribe:A,tryUnsubscribe:h,getListeners:()=>n};return m}var Jnt=()=>typeof window<"u"&&typeof window.document<"u"&&typeof window.document.createElement<"u",Znt=Jnt(),eat=()=>typeof navigator<"u"&&navigator.product==="ReactNative",tat=eat(),rat=()=>Znt||tat?g.useLayoutEffect:g.useEffect,nat=rat();function Vz(t,e){return t===e?t!==0||e!==0||1/t===1/e:t!==t&&e!==e}function aat(t,e){if(Vz(t,e))return!0;if(typeof t!="object"||t===null||typeof e!="object"||e===null)return!1;const r=Object.keys(t),n=Object.keys(e);if(r.length!==n.length)return!1;for(let a=0;a<r.length;a++)if(!Object.prototype.hasOwnProperty.call(e,r[a])||!Vz(t[r[a]],e[r[a]]))return!1;return!0}var PB=Symbol.for("react-redux-context"),BB=typeof globalThis<"u"?globalThis:{};function sat(){if(!g.createContext)return{};const t=BB[PB]??(BB[PB]=new Map);let e=t.get(g.createContext);return e||(e=g.createContext(null),t.set(g.createContext,e)),e}var iat=sat();function oat(t){const{children:e,context:r,serverState:n,store:a}=t,s=g.useMemo(()=>{const c=Ynt(a);return{store:a,subscription:c,getServerState:n?()=>n:void 0}},[a,n]),o=g.useMemo(()=>a.getState(),[a]);nat(()=>{const{subscription:c}=s;return c.onStateChange=c.notifyNestedSubs,c.trySubscribe(),o!==a.getState()&&c.notifyNestedSubs(),()=>{c.tryUnsubscribe(),c.onStateChange=void 0}},[s,o]);const l=r||iat;return g.createElement(l.Provider,{value:s},e)}var lat=oat,cat=new Set(["axisLine","tickLine","activeBar","activeDot","activeLabel","activeShape","allowEscapeViewBox","background","cursor","dot","label","line","margin","padding","position","shape","style","tick","wrapperStyle","radius"]);function uat(t,e){return t==null&&e==null?!0:typeof t=="number"&&typeof e=="number"?t===e||t!==t&&e!==e:t===e}function M8(t,e){var r=new Set([...Object.keys(t),...Object.keys(e)]);for(var n of r)if(cat.has(n)){if(t[n]==null&&e[n]==null)continue;if(!aat(t[n],e[n]))return!1}else if(!uat(t[n],e[n]))return!1;return!0}function Gg(t,e){var r,n;return(r=(n=t.graphicalItems.cartesianItems.find(a=>a.id===e))===null||n===void 0?void 0:n.xAxisId)!==null&&r!==void 0?r:jue}function Kg(t,e){var r,n;return(r=(n=t.graphicalItems.cartesianItems.find(a=>a.id===e))===null||n===void 0?void 0:n.yAxisId)!==null&&r!==void 0?r:jue}var dat="Invariant failed";function fat(t,e){throw new Error(dat)}function mO(){return mO=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var r=arguments[e];for(var n in r)({}).hasOwnProperty.call(r,n)&&(t[n]=r[n])}return t},mO.apply(null,arguments)}function zI(t){return g.createElement(Cue,mO({shapeType:"rectangle",activeClassName:"recharts-active-bar"},t))}var hat=function(e){var r=arguments.length>1&&arguments[1]!==void 0?arguments[1]:0;return(n,a)=>{if(Cn(e))return e;var s=Cn(n)||nl(n);return s?e(n,a):(s||fat(),r)}},Aat=(t,e,r)=>r,mat=(t,e)=>e,pN=Kt([YM,mat],(t,e)=>t.filter(r=>r.type==="bar").find(r=>r.id===e)),pat=Kt([pN],t=>t==null?void 0:t.maxBarSize),gat=(t,e,r,n)=>n,xat=Kt([Ta,YM,Gg,Kg,Aat],(t,e,r,n,a)=>e.filter(s=>t==="horizontal"?s.xAxisId===r:s.yAxisId===n).filter(s=>s.isPanorama===a).filter(s=>s.hide===!1).filter(s=>s.type==="bar")),vat=(t,e,r)=>{var n=Ta(t),a=Gg(t,e),s=Kg(t,e);if(!(a==null||s==null))return n==="horizontal"?lO(t,"yAxis",s,r):lO(t,"xAxis",a,r)},yat=(t,e)=>{var r=Ta(t),n=Gg(t,e),a=Kg(t,e);if(!(n==null||a==null))return r==="horizontal"?Vq(t,"xAxis",n):Vq(t,"yAxis",a)},bat=Kt([xat,VXe,yat],Hrt),wat=(t,e,r)=>{var n,a,s=pN(t,e);if(s!=null){var o=Gg(t,e),l=Kg(t,e);if(!(o==null||l==null)){var c=Ta(t),u=Gle(t),{maxBarSize:d}=s,f=nl(d)?u:d,A,h;return c==="horizontal"?(A=Jv(t,"xAxis",o,r),h=Yv(t,"xAxis",o,r)):(A=Jv(t,"yAxis",l,r),h=Yv(t,"yAxis",l,r)),(n=(a=wI(A,h,!0))!==null&&a!==void 0?a:f)!==null&&n!==void 0?n:0}}},Mue=(t,e,r)=>{var n=Ta(t),a=Gg(t,e),s=Kg(t,e);if(!(a==null||s==null)){var o,l;return n==="horizontal"?(o=Jv(t,"xAxis",a,r),l=Yv(t,"xAxis",a,r)):(o=Jv(t,"yAxis",s,r),l=Yv(t,"yAxis",s,r)),wI(o,l)}},Nat=Kt([bat,Gle,QXe,Kle,wat,Mue,pat],zrt),Cat=(t,e,r)=>{var n=Gg(t,e);if(n!=null)return Jv(t,"xAxis",n,r)},_at=(t,e,r)=>{var n=Kg(t,e);if(n!=null)return Jv(t,"yAxis",n,r)},Eat=(t,e,r)=>{var n=Gg(t,e);if(n!=null)return Yv(t,"xAxis",n,r)},Sat=(t,e,r)=>{var n=Kg(t,e);if(n!=null)return Yv(t,"yAxis",n,r)},Iat=Kt([Nat,pN],(t,e)=>{if(!(t==null||e==null)){var r=t.find(n=>n.stackId===e.stackId&&e.dataKey!=null&&n.dataKeys.includes(e.dataKey));if(r!=null)return r.position}}),jat=Kt([vat,pN],Wrt),Pat=Kt([Fo,fM,Cat,_at,Eat,Sat,Iat,Ta,jXe,Mue,jat,pN,gat],(t,e,r,n,a,s,o,l,c,u,d,f,A)=>{var{chartData:h,dataStartIndex:m,dataEndIndex:p}=c;if(!(f==null||o==null||e==null||l!=="horizontal"&&l!=="vertical"||r==null||n==null||a==null||s==null||u==null)){var{data:x}=f,v;if(x!=null&&x.length>0?v=x:v=h==null?void 0:h.slice(m,p+1),v!=null)return sst({layout:l,barSettings:f,pos:o,parentViewBox:e,bandSize:u,xAxis:r,yAxis:n,xAxisTicks:a,yAxisTicks:s,stackedData:d,displayedData:v,offset:t,cells:A,dataStartIndex:m})}}),Bat=["index"];function pO(){return pO=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var r=arguments[e];for(var n in r)({}).hasOwnProperty.call(r,n)&&(t[n]=r[n])}return t},pO.apply(null,arguments)}function Tat(t,e){if(t==null)return{};var r,n,a=kat(t,e);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(t);for(n=0;n<s.length;n++)r=s[n],e.indexOf(r)===-1&&{}.propertyIsEnumerable.call(t,r)&&(a[r]=t[r])}return a}function kat(t,e){if(t==null)return{};var r={};for(var n in t)if({}.hasOwnProperty.call(t,n)){if(e.indexOf(n)!==-1)continue;r[n]=t[n]}return r}var Lue=g.createContext(void 0),Fat=t=>{var e=g.useContext(Lue);if(e!=null)return e.stackId;if(t!=null)return PGe(t)},Oat=(t,e)=>"recharts-bar-stack-clip-path-".concat(t,"-").concat(e),Dat=t=>{var e=g.useContext(Lue);if(e!=null){var{stackId:r}=e;return"url(#".concat(Oat(r,t),")")}},Rat=t=>{var{index:e}=t,r=Tat(t,Bat),n=Dat(e);return g.createElement(Pc,pO({className:"recharts-bar-stack-layer",clipPath:n},r))},Mat=["onMouseEnter","onMouseLeave","onClick"],Lat=["value","background","tooltipPosition"],Uat=["id"],Qat=["onMouseEnter","onClick","onMouseLeave"];function SA(){return SA=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var r=arguments[e];for(var n in r)({}).hasOwnProperty.call(r,n)&&(t[n]=r[n])}return t},SA.apply(null,arguments)}function Hz(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter(function(a){return Object.getOwnPropertyDescriptor(t,a).enumerable})),r.push.apply(r,n)}return r}function Nc(t){for(var e=1;e<arguments.length;e++){var r=arguments[e]!=null?arguments[e]:{};e%2?Hz(Object(r),!0).forEach(function(n){Vat(t,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):Hz(Object(r)).forEach(function(n){Object.defineProperty(t,n,Object.getOwnPropertyDescriptor(r,n))})}return t}function Vat(t,e,r){return(e=Hat(e))in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}function Hat(t){var e=$at(t,"string");return typeof e=="symbol"?e:e+""}function $at(t,e){if(typeof t!="object"||!t)return t;var r=t[Symbol.toPrimitive];if(r!==void 0){var n=r.call(t,e);if(typeof n!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}function WI(t,e){if(t==null)return{};var r,n,a=Gat(t,e);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(t);for(n=0;n<s.length;n++)r=s[n],e.indexOf(r)===-1&&{}.propertyIsEnumerable.call(t,r)&&(a[r]=t[r])}return a}function Gat(t,e){if(t==null)return{};var r={};for(var n in t)if({}.hasOwnProperty.call(t,n)){if(e.indexOf(n)!==-1)continue;r[n]=t[n]}return r}var Kat=t=>{var{dataKey:e,name:r,fill:n,legendType:a,hide:s}=t;return[{inactive:s,dataKey:e,type:a,color:n,value:MP(r,e),payload:t}]},qat=g.memo(t=>{var{dataKey:e,stroke:r,strokeWidth:n,fill:a,name:s,hide:o,unit:l,tooltipType:c,id:u}=t,d={dataDefinedOnItem:void 0,positions:void 0,settings:{stroke:r,strokeWidth:n,fill:a,dataKey:e,nameKey:void 0,name:MP(s,e),hide:o,type:c,color:a,unit:l,graphicalItemId:u}};return g.createElement(_ue,{tooltipEntrySettings:d})});function zat(t){var e=gn(Ng),{data:r,dataKey:n,background:a,allOtherBarProps:s}=t,{onMouseEnter:o,onMouseLeave:l,onClick:c}=s,u=WI(s,Mat),d=k8(o,n,s.id),f=F8(l),A=O8(c,n,s.id);if(!a||r==null)return null;var h=z2(a);return g.createElement(xh,{zIndex:Xrt(a,nc.barBackground)},r.map((m,p)=>{var{value:x,background:v,tooltipPosition:y}=m,b=WI(m,Lat);if(!v)return null;var w=d(m,p),j=f(m,p),I=A(m,p),_=Nc(Nc(Nc(Nc(Nc({option:a,isActive:String(p)===e},b),{},{fill:"#eee"},v),h),Ww(u,m,p)),{},{onMouseEnter:w,onMouseLeave:j,onClick:I,dataKey:n,index:p,className:"recharts-bar-background-rectangle"});return g.createElement(zI,SA({key:"background-bar-".concat(p)},_))}))}function Wat(t){var{showLabels:e,children:r,rects:n}=t,a=n==null?void 0:n.map(s=>{var o={x:s.x,y:s.y,width:s.width,lowerWidth:s.width,upperWidth:s.width,height:s.height};return Nc(Nc({},o),{},{value:s.value,payload:s.payload,parentViewBox:s.parentViewBox,viewBox:o,fill:s.fill})});return g.createElement(att,{value:e?a:void 0},r)}function Xat(t){var{shape:e,activeBar:r,baseProps:n,entry:a,index:s,dataKey:o}=t,l=gn(Ng),c=gn(w8),u=r&&String(s)===l&&(c==null||o===c),d=u?r:e;return u?g.createElement(xh,{zIndex:nc.activeBar},g.createElement(zI,SA({},n,{name:String(n.name)},a,{isActive:u,option:d,index:s,dataKey:o}))):g.createElement(zI,SA({},n,{name:String(n.name)},a,{isActive:u,option:d,index:s,dataKey:o}))}function Yat(t){var{shape:e,baseProps:r,entry:n,index:a,dataKey:s}=t;return g.createElement(zI,SA({},r,{name:String(r.name)},n,{isActive:!1,option:e,index:a,dataKey:s}))}function Jat(t){var e,{data:r,props:n}=t,a=(e=lh(n))!==null&&e!==void 0?e:{},{id:s}=a,o=WI(a,Uat),{shape:l,dataKey:c,activeBar:u}=n,{onMouseEnter:d,onClick:f,onMouseLeave:A}=n,h=WI(n,Qat),m=k8(d,c,s),p=F8(A),x=O8(f,c,s);return r?g.createElement(g.Fragment,null,r.map((v,y)=>g.createElement(Rat,SA({index:y,key:"rectangle-".concat(v==null?void 0:v.x,"-").concat(v==null?void 0:v.y,"-").concat(v==null?void 0:v.value,"-").concat(y),className:"recharts-bar-rectangle"},Ww(h,v,y),{onMouseEnter:m(v,y),onMouseLeave:p(v,y),onClick:x(v,y)}),u?g.createElement(Xat,{shape:l,activeBar:u,baseProps:o,entry:v,index:y,dataKey:c}):g.createElement(Yat,{shape:l,baseProps:o,entry:v,index:y,dataKey:c})))):null}function Zat(t){var{props:e,previousRectanglesRef:r}=t,{data:n,layout:a,isAnimationActive:s,animationBegin:o,animationDuration:l,animationEasing:c,onAnimationEnd:u,onAnimationStart:d}=e,f=r.current,A=XP(e,"recharts-bar-"),[h,m]=g.useState(!1),p=!h,x=g.useCallback(()=>{typeof u=="function"&&u(),m(!1)},[u]),v=g.useCallback(()=>{typeof d=="function"&&d(),m(!0)},[d]);return g.createElement(Wat,{showLabels:p,rects:n},g.createElement(WP,{animationId:A,begin:o,duration:l,isActive:s,easing:c,onAnimationEnd:x,onAnimationStart:v,key:A},y=>{var b=y===1?n:n==null?void 0:n.map((w,j)=>{var I=f&&f[j];if(I)return Nc(Nc({},w),{},{x:No(I.x,w.x,y),y:No(I.y,w.y,y),width:No(I.width,w.width,y),height:No(I.height,w.height,y)});if(a==="horizontal"){var _=No(0,w.height,y),S=No(w.stackedBarStart,w.y,y);return Nc(Nc({},w),{},{y:S,height:_})}var E=No(0,w.width,y),T=No(w.stackedBarStart,w.x,y);return Nc(Nc({},w),{},{width:E,x:T})});return y>0&&(r.current=b??null),b==null?null:g.createElement(Pc,null,g.createElement(Jat,{props:e,data:b}))}),g.createElement(pue,{label:e.label}),e.children)}function est(t){var e=g.useRef(null);return g.createElement(Zat,{previousRectanglesRef:e,props:t})}var Uue=0,tst=(t,e)=>{var r=Array.isArray(t.value)?t.value[1]:t.value;return{x:t.x,y:t.y,value:r,errorVal:ks(t,e)}};class rst extends g.PureComponent{render(){var{hide:e,data:r,dataKey:n,className:a,xAxisId:s,yAxisId:o,needClip:l,background:c,id:u}=this.props;if(e||r==null)return null;var d=ns("recharts-bar",a),f=u;return g.createElement(Pc,{className:d,id:u},l&&g.createElement("defs",null,g.createElement(Unt,{clipPathId:f,xAxisId:s,yAxisId:o})),g.createElement(Pc,{className:"recharts-bar-rectangles",clipPath:l?"url(#clipPath-".concat(f,")"):void 0},g.createElement(zat,{data:r,dataKey:n,background:c,allOtherBarProps:this.props}),g.createElement(est,this.props)))}}var nst={activeBar:!1,animationBegin:0,animationDuration:400,animationEasing:"ease",background:!1,hide:!1,isAnimationActive:"auto",label:!1,legendType:"rect",minPointSize:Uue,xAxisId:0,yAxisId:0,zIndex:nc.bar};function ast(t){var{xAxisId:e,yAxisId:r,hide:n,legendType:a,minPointSize:s,activeBar:o,animationBegin:l,animationDuration:c,animationEasing:u,isAnimationActive:d}=t,{needClip:f}=Rue(e,r),A=Zw(),h=qu(),m=T8(t.children,AN),p=gn(y=>Pat(y,t.id,h,m));if(A!=="vertical"&&A!=="horizontal")return null;var x,v=p==null?void 0:p[0];return v==null||v.height==null||v.width==null?x=0:x=A==="vertical"?v.height/2:v.width/2,g.createElement(Lnt,{xAxisId:e,yAxisId:r,data:p,dataPointFormatter:tst,errorBarOffset:x},g.createElement(rst,SA({},t,{layout:A,needClip:f,data:p,xAxisId:e,yAxisId:r,hide:n,legendType:a,minPointSize:s,activeBar:o,animationBegin:l,animationDuration:c,animationEasing:u,isAnimationActive:d})))}function sst(t){var{layout:e,barSettings:{dataKey:r,minPointSize:n},pos:a,bandSize:s,xAxis:o,yAxis:l,xAxisTicks:c,yAxisTicks:u,stackedData:d,displayedData:f,offset:A,cells:h,parentViewBox:m,dataStartIndex:p}=t,x=e==="horizontal"?l:o,v=d?x.scale.domain():null,y=BGe({numericAxis:x}),b=x.scale(y);return f.map((w,j)=>{var I,_,S,E,T,k;if(d){var B=d[j+p];if(B==null)return null;I=_Ge(B,v)}else I=ks(w,r),Array.isArray(I)||(I=[y,I]);var D=hat(n,Uue)(I[1],j);if(e==="horizontal"){var X,[me,pe]=[l.scale(I[0]),l.scale(I[1])];_=JG({axis:o,ticks:c,bandSize:s,offset:a.offset,entry:w,index:j}),S=(X=pe??me)!==null&&X!==void 0?X:void 0,E=a.size;var he=me-pe;if(T=ch(he)?0:he,k={x:_,y:A.top,width:E,height:A.height},Math.abs(D)>0&&Math.abs(T)<Math.abs(D)){var ve=jl(T||D)*(Math.abs(D)-Math.abs(T));S-=ve,T+=ve}}else{var[ae,Pe]=[o.scale(I[0]),o.scale(I[1])];if(_=ae,S=JG({axis:l,ticks:u,bandSize:s,offset:a.offset,entry:w,index:j}),E=Pe-ae,T=a.size,k={x:A.left,y:S,width:A.width,height:T},Math.abs(D)>0&&Math.abs(E)<Math.abs(D)){var ke=jl(E||D)*(Math.abs(D)-Math.abs(E));E+=ke}}if(_==null||S==null||E==null||T==null)return null;var O=Nc(Nc({},w),{},{stackedBarStart:b,x:_,y:S,width:E,height:T,value:d?I:I[1],payload:w,background:k,tooltipPosition:{x:_+E/2,y:S+T/2},parentViewBox:m},h&&h[j]&&h[j].props);return O}).filter(Boolean)}function ist(t){var e=Tl(t,nst),r=Fat(e.stackId),n=qu();return g.createElement(Eue,{id:e.id,type:"bar"},a=>g.createElement(g.Fragment,null,g.createElement(Vtt,{legendPayload:Kat(e)}),g.createElement(qat,{dataKey:e.dataKey,stroke:e.stroke,strokeWidth:e.strokeWidth,fill:e.fill,name:e.name,hide:e.hide,unit:e.unit,tooltipType:e.tooltipType,id:a}),g.createElement(rrt,{type:"bar",id:a,data:void 0,xAxisId:e.xAxisId,yAxisId:e.yAxisId,zAxisId:0,dataKey:e.dataKey,stackId:r,hide:e.hide,barSize:e.barSize,minPointSize:e.minPointSize,maxBarSize:e.maxBarSize,isPanorama:n}),g.createElement(xh,{zIndex:e.zIndex},g.createElement(ast,SA({},e,{id:a})))))}var gO=g.memo(ist,M8);gO.displayName="Bar";var ost=["domain","range"],lst=["domain","range"];function $z(t,e){if(t==null)return{};var r,n,a=cst(t,e);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(t);for(n=0;n<s.length;n++)r=s[n],e.indexOf(r)===-1&&{}.propertyIsEnumerable.call(t,r)&&(a[r]=t[r])}return a}function cst(t,e){if(t==null)return{};var r={};for(var n in t)if({}.hasOwnProperty.call(t,n)){if(e.indexOf(n)!==-1)continue;r[n]=t[n]}return r}function Gz(t,e){return t===e?!0:Array.isArray(t)&&t.length===2&&Array.isArray(e)&&e.length===2?t[0]===e[0]&&t[1]===e[1]:!1}function Que(t,e){if(t===e)return!0;var{domain:r,range:n}=t,a=$z(t,ost),{domain:s,range:o}=e,l=$z(e,lst);return!Gz(r,s)||!Gz(n,o)?!1:M8(a,l)}var ust=["dangerouslySetInnerHTML","ticks","scale"],dst=["id","scale"];function xO(){return xO=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var r=arguments[e];for(var n in r)({}).hasOwnProperty.call(r,n)&&(t[n]=r[n])}return t},xO.apply(null,arguments)}function Kz(t,e){if(t==null)return{};var r,n,a=fst(t,e);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(t);for(n=0;n<s.length;n++)r=s[n],e.indexOf(r)===-1&&{}.propertyIsEnumerable.call(t,r)&&(a[r]=t[r])}return a}function fst(t,e){if(t==null)return{};var r={};for(var n in t)if({}.hasOwnProperty.call(t,n)){if(e.indexOf(n)!==-1)continue;r[n]=t[n]}return r}function hst(t){var e=Cs(),r=g.useRef(null);return g.useLayoutEffect(()=>{r.current===null?e(krt(t)):r.current!==t&&e(Frt({prev:r.current,next:t})),r.current=t},[t,e]),g.useLayoutEffect(()=>()=>{r.current&&(e(Ort(r.current)),r.current=null)},[e]),null}var Ast=t=>{var{xAxisId:e,className:r}=t,n=gn(fM),a=qu(),s="xAxis",o=gn(v=>Cce(v,s,e,a)),l=gn(v=>yce(v,e)),c=gn(v=>LYe(v,e)),u=gn(v=>tce(v,e));if(l==null||c==null||u==null)return null;var{dangerouslySetInnerHTML:d,ticks:f,scale:A}=t,h=Kz(t,ust),{id:m,scale:p}=u,x=Kz(u,dst);return g.createElement(R8,xO({},h,x,{x:c.x,y:c.y,width:l.width,height:l.height,className:ns("recharts-".concat(s," ").concat(s),r),viewBox:n,ticks:o,axisType:s}))},mst={allowDataOverflow:Vo.allowDataOverflow,allowDecimals:Vo.allowDecimals,allowDuplicatedCategory:Vo.allowDuplicatedCategory,angle:Vo.angle,axisLine:qp.axisLine,height:Vo.height,hide:!1,includeHidden:Vo.includeHidden,interval:Vo.interval,minTickGap:Vo.minTickGap,mirror:Vo.mirror,orientation:Vo.orientation,padding:Vo.padding,reversed:Vo.reversed,scale:Vo.scale,tick:Vo.tick,tickCount:Vo.tickCount,tickLine:qp.tickLine,tickSize:qp.tickSize,type:Vo.type,xAxisId:0},pst=t=>{var e=Tl(t,mst);return g.createElement(g.Fragment,null,g.createElement(hst,{allowDataOverflow:e.allowDataOverflow,allowDecimals:e.allowDecimals,allowDuplicatedCategory:e.allowDuplicatedCategory,angle:e.angle,dataKey:e.dataKey,domain:e.domain,height:e.height,hide:e.hide,id:e.xAxisId,includeHidden:e.includeHidden,interval:e.interval,minTickGap:e.minTickGap,mirror:e.mirror,name:e.name,orientation:e.orientation,padding:e.padding,reversed:e.reversed,scale:e.scale,tick:e.tick,tickCount:e.tickCount,tickFormatter:e.tickFormatter,ticks:e.ticks,type:e.type,unit:e.unit}),g.createElement(Ast,e))},Vue=g.memo(pst,Que);Vue.displayName="XAxis";var gst=["dangerouslySetInnerHTML","ticks","scale"],xst=["id","scale"];function vO(){return vO=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var r=arguments[e];for(var n in r)({}).hasOwnProperty.call(r,n)&&(t[n]=r[n])}return t},vO.apply(null,arguments)}function qz(t,e){if(t==null)return{};var r,n,a=vst(t,e);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(t);for(n=0;n<s.length;n++)r=s[n],e.indexOf(r)===-1&&{}.propertyIsEnumerable.call(t,r)&&(a[r]=t[r])}return a}function vst(t,e){if(t==null)return{};var r={};for(var n in t)if({}.hasOwnProperty.call(t,n)){if(e.indexOf(n)!==-1)continue;r[n]=t[n]}return r}function yst(t){var e=Cs(),r=g.useRef(null);return g.useLayoutEffect(()=>{r.current===null?e(Drt(t)):r.current!==t&&e(Rrt({prev:r.current,next:t})),r.current=t},[t,e]),g.useLayoutEffect(()=>()=>{r.current&&(e(Mrt(r.current)),r.current=null)},[e]),null}var bst=t=>{var{yAxisId:e,className:r,width:n,label:a}=t,s=g.useRef(null),o=g.useRef(null),l=gn(fM),c=qu(),u=Cs(),d="yAxis",f=gn(I=>bce(I,e)),A=gn(I=>QYe(I,e)),h=gn(I=>Cce(I,d,e,c)),m=gn(I=>rce(I,e));if(g.useLayoutEffect(()=>{if(!(n!=="auto"||!f||S8(a)||g.isValidElement(a)||m==null)){var I=s.current;if(I){var _=I.getCalculatedWidth();Math.round(f.width)!==Math.round(_)&&u(Lrt({id:e,width:_}))}}},[h,f,u,a,e,n,m]),f==null||A==null||m==null)return null;var{dangerouslySetInnerHTML:p,ticks:x,scale:v}=t,y=qz(t,gst),{id:b,scale:w}=m,j=qz(m,xst);return g.createElement(R8,vO({},y,j,{ref:s,labelRef:o,x:A.x,y:A.y,tickTextProps:n==="auto"?{width:void 0}:{width:n},width:f.width,height:f.height,className:ns("recharts-".concat(d," ").concat(d),r),viewBox:l,ticks:h,axisType:d}))},wst={allowDataOverflow:Ho.allowDataOverflow,allowDecimals:Ho.allowDecimals,allowDuplicatedCategory:Ho.allowDuplicatedCategory,angle:Ho.angle,axisLine:qp.axisLine,hide:!1,includeHidden:Ho.includeHidden,interval:Ho.interval,minTickGap:Ho.minTickGap,mirror:Ho.mirror,orientation:Ho.orientation,padding:Ho.padding,reversed:Ho.reversed,scale:Ho.scale,tick:Ho.tick,tickCount:Ho.tickCount,tickLine:qp.tickLine,tickSize:qp.tickSize,type:Ho.type,width:Ho.width,yAxisId:0},Nst=t=>{var e=Tl(t,wst);return g.createElement(g.Fragment,null,g.createElement(yst,{interval:e.interval,id:e.yAxisId,scale:e.scale,type:e.type,domain:e.domain,allowDataOverflow:e.allowDataOverflow,dataKey:e.dataKey,allowDuplicatedCategory:e.allowDuplicatedCategory,allowDecimals:e.allowDecimals,tickCount:e.tickCount,padding:e.padding,includeHidden:e.includeHidden,reversed:e.reversed,ticks:e.ticks,width:e.width,orientation:e.orientation,mirror:e.mirror,hide:e.hide,unit:e.unit,name:e.name,angle:e.angle,minTickGap:e.minTickGap,tick:e.tick,tickFormatter:e.tickFormatter}),g.createElement(bst,e))},Hue=g.memo(Nst,Que);Hue.displayName="YAxis";var Cst=(t,e)=>e,L8=Kt([Cst,Ta,Zle,Do,Uce,$A,rZe,Fo],cZe),U8=t=>{var e=t.currentTarget.getBoundingClientRect(),r=e.width/t.currentTarget.offsetWidth,n=e.height/t.currentTarget.offsetHeight;return{chartX:Math.round((t.clientX-e.left)/r),chartY:Math.round((t.clientY-e.top)/n)}},$ue=Rd("mouseClick"),Gue=Yw();Gue.startListening({actionCreator:$ue,effect:(t,e)=>{var r=t.payload,n=L8(e.getState(),U8(r));(n==null?void 0:n.activeIndex)!=null&&e.dispatch(tJe({activeIndex:n.activeIndex,activeDataKey:void 0,activeCoordinate:n.activeCoordinate}))}});var yO=Rd("mouseMove"),Kue=Yw(),B_=null;Kue.startListening({actionCreator:yO,effect:(t,e)=>{var r=t.payload;B_!==null&&cancelAnimationFrame(B_);var n=U8(r);B_=requestAnimationFrame(()=>{var a=e.getState(),s=p8(a,a.tooltip.settings.shared);if(s==="axis"){var o=L8(a,n);(o==null?void 0:o.activeIndex)!=null?e.dispatch(Tce({activeIndex:o.activeIndex,activeDataKey:void 0,activeCoordinate:o.activeCoordinate})):e.dispatch(Bce())}B_=null})}});function _st(t,e){return e instanceof HTMLElement?"HTMLElement <".concat(e.tagName,' class="').concat(e.className,'">'):e===window?"global.window":t==="children"&&typeof e=="object"&&e!==null?"<<CHILDREN>>":e}var zz={accessibilityLayer:!0,barCategoryGap:"10%",barGap:4,barSize:void 0,className:void 0,maxBarSize:void 0,stackOffset:"none",syncId:void 0,syncMethod:"index",baseValue:void 0,reverseStackOrder:!1},que=uu({name:"rootProps",initialState:zz,reducers:{updateOptions:(t,e)=>{var r;t.accessibilityLayer=e.payload.accessibilityLayer,t.barCategoryGap=e.payload.barCategoryGap,t.barGap=(r=e.payload.barGap)!==null&&r!==void 0?r:zz.barGap,t.barSize=e.payload.barSize,t.maxBarSize=e.payload.maxBarSize,t.stackOffset=e.payload.stackOffset,t.syncId=e.payload.syncId,t.syncMethod=e.payload.syncMethod,t.className=e.payload.className,t.baseValue=e.payload.baseValue,t.reverseStackOrder=e.payload.reverseStackOrder}}}),Est=que.reducer,{updateOptions:Sst}=que.actions,zue=uu({name:"polarOptions",initialState:null,reducers:{updatePolarOptions:(t,e)=>e.payload}}),{updatePolarOptions:Ist}=zue.actions,jst=zue.reducer,Wue=Rd("keyDown"),Xue=Rd("focus"),Q8=Yw();Q8.startListening({actionCreator:Wue,effect:(t,e)=>{var r=e.getState(),n=r.rootProps.accessibilityLayer!==!1;if(n){var{keyboardInteraction:a}=r.tooltip,s=t.payload;if(!(s!=="ArrowRight"&&s!=="ArrowLeft"&&s!=="Enter")){var o=g8(a,T1(r),cN(r),fN(r)),l=o==null?-1:Number(o);if(!(!Number.isFinite(l)||l<0)){var c=$A(r);if(s==="Enter"){var u=$I(r,"axis","hover",String(a.index));e.dispatch(uO({active:!a.active,activeIndex:a.index,activeCoordinate:u}));return}var d=GYe(r),f=d==="left-to-right"?1:-1,A=s==="ArrowRight"?1:-1,h=l+A*f;if(!(c==null||h>=c.length||h<0)){var m=$I(r,"axis","hover",String(h));e.dispatch(uO({active:!0,activeIndex:h.toString(),activeCoordinate:m}))}}}}}});Q8.startListening({actionCreator:Xue,effect:(t,e)=>{var r=e.getState(),n=r.rootProps.accessibilityLayer!==!1;if(n){var{keyboardInteraction:a}=r.tooltip;if(!a.active&&a.index==null){var s="0",o=$I(r,"axis","hover",String(s));e.dispatch(uO({active:!0,activeIndex:s,activeCoordinate:o}))}}}});var fd=Rd("externalEvent"),Yue=Yw(),TB=new Map;Yue.startListening({actionCreator:fd,effect:(t,e)=>{var{handler:r,reactEvent:n}=t.payload;if(r!=null){n.persist();var a=n.type,s=TB.get(a);s!==void 0&&cancelAnimationFrame(s);var o=requestAnimationFrame(()=>{try{var l=e.getState(),c={activeCoordinate:QJe(l),activeDataKey:w8(l),activeIndex:Ng(l),activeLabel:Hce(l),activeTooltipIndex:Ng(l),isTooltipActive:VJe(l)};r(c,n)}finally{TB.delete(a)}});TB.set(a,o)}}});var Pst=Kt([P1],t=>t.tooltipItemPayloads),Bst=Kt([Pst,dN,(t,e)=>e,(t,e,r)=>r],(t,e,r,n)=>{var a=t.find(l=>l.settings.graphicalItemId===n);if(a!=null){var{positions:s}=a;if(s!=null){var o=e(s,r);return o}}}),Jue=Rd("touchMove"),Zue=Yw();Zue.startListening({actionCreator:Jue,effect:(t,e)=>{var r=t.payload;if(!(r.touches==null||r.touches.length===0)){var n=e.getState(),a=p8(n,n.tooltip.settings.shared);if(a==="axis"){var s=r.touches[0];if(s==null)return;var o=L8(n,U8({clientX:s.clientX,clientY:s.clientY,currentTarget:r.currentTarget}));(o==null?void 0:o.activeIndex)!=null&&e.dispatch(Tce({activeIndex:o.activeIndex,activeDataKey:void 0,activeCoordinate:o.activeCoordinate}))}else if(a==="item"){var l,c=r.touches[0];if(document.elementFromPoint==null||c==null)return;var u=document.elementFromPoint(c.clientX,c.clientY);if(!u||!u.getAttribute)return;var d=u.getAttribute(poe),f=(l=u.getAttribute(goe))!==null&&l!==void 0?l:void 0,A=B1(n).find(p=>p.id===f);if(d==null||A==null||f==null)return;var{dataKey:h}=A,m=Bst(n,d,f);e.dispatch(Pce({activeDataKey:h,activeIndex:d,activeCoordinate:m,activeGraphicalItemId:f}))}}}});var Tst=Uie({brush:Yrt,cartesianAxis:Urt,chartData:LZe,errorBars:knt,graphicalItems:ert,layout:vGe,legend:CKe,options:FZe,polarAxis:mtt,polarOptions:jst,referenceElements:ant,rootProps:Est,tooltip:rJe,zIndex:NZe}),kst=function(e){var r=arguments.length>1&&arguments[1]!==void 0?arguments[1]:"Chart";return $$e({reducer:Tst,preloadedState:e,middleware:n=>{var a;return n({serializableCheck:!1,immutableCheck:!["commonjs","es6","production"].includes((a="es6")!==null&&a!==void 0?a:"")}).concat([Gue.middleware,Kue.middleware,Q8.middleware,Yue.middleware,Zue.middleware])},enhancers:n=>{var a=n;return typeof n=="function"&&(a=n()),a.concat(toe({type:"raf"}))},devTools:{serialize:{replacer:_st},name:"recharts-".concat(r)}})};function ede(t){var{preloadedState:e,children:r,reduxStoreName:n}=t,a=qu(),s=g.useRef(null);if(a)return r;s.current==null&&(s.current=kst(e,n));var o=nM;return g.createElement(lat,{context:o,store:s.current},r)}function Fst(t){var{layout:e,margin:r}=t,n=Cs(),a=qu();return g.useEffect(()=>{a||(n(pGe(e)),n(mGe(r)))},[n,a,e,r]),null}var tde=g.memo(Fst,M8);function rde(t){var e=Cs();return g.useEffect(()=>{e(Sst(t))},[e,t]),null}function Wz(t){var{zIndex:e,isPanorama:r}=t,n=g.useRef(null),a=Cs();return g.useLayoutEffect(()=>(n.current&&a(bZe({zIndex:e,element:n.current,isPanorama:r})),()=>{a(wZe({zIndex:e,isPanorama:r}))}),[a,e,r]),g.createElement("g",{tabIndex:-1,ref:n})}function Xz(t){var{children:e,isPanorama:r}=t,n=gn(dZe);if(!n||n.length===0)return e;var a=n.filter(o=>o<0),s=n.filter(o=>o>0);return g.createElement(g.Fragment,null,a.map(o=>g.createElement(Wz,{key:o,zIndex:o,isPanorama:r})),e,s.map(o=>g.createElement(Wz,{key:o,zIndex:o,isPanorama:r})))}var Ost=["children"];function Dst(t,e){if(t==null)return{};var r,n,a=Rst(t,e);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(t);for(n=0;n<s.length;n++)r=s[n],e.indexOf(r)===-1&&{}.propertyIsEnumerable.call(t,r)&&(a[r]=t[r])}return a}function Rst(t,e){if(t==null)return{};var r={};for(var n in t)if({}.hasOwnProperty.call(t,n)){if(e.indexOf(n)!==-1)continue;r[n]=t[n]}return r}function XI(){return XI=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var r=arguments[e];for(var n in r)({}).hasOwnProperty.call(r,n)&&(t[n]=r[n])}return t},XI.apply(null,arguments)}var Mst={width:"100%",height:"100%",display:"block"},Lst=g.forwardRef((t,e)=>{var r=_oe(),n=Eoe(),a=Roe();if(!Pm(r)||!Pm(n))return null;var{children:s,otherAttributes:o,title:l,desc:c}=t,u,d;return o!=null&&(typeof o.tabIndex=="number"?u=o.tabIndex:u=a?0:void 0,typeof o.role=="string"?d=o.role:d=a?"application":void 0),g.createElement(VR,XI({},o,{title:l,desc:c,role:d,tabIndex:u,width:r,height:n,style:Mst,ref:e}),s)}),Ust=t=>{var{children:e}=t,r=gn(VP);if(!r)return null;var{width:n,height:a,y:s,x:o}=r;return g.createElement(VR,{width:n,height:a,x:o,y:s},e)},Yz=g.forwardRef((t,e)=>{var{children:r}=t,n=Dst(t,Ost),a=qu();return a?g.createElement(Ust,null,g.createElement(Xz,{isPanorama:!0},r)):g.createElement(Lst,XI({ref:e},n),g.createElement(Xz,{isPanorama:!1},r))});function Qst(){var t=Cs(),[e,r]=g.useState(null),n=gn(RGe);return g.useEffect(()=>{if(e!=null){var a=e.getBoundingClientRect(),s=a.width/e.offsetWidth;hi(s)&&s!==n&&t(xGe(s))}},[e,t,n]),r}function Jz(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter(function(a){return Object.getOwnPropertyDescriptor(t,a).enumerable})),r.push.apply(r,n)}return r}function Vst(t){for(var e=1;e<arguments.length;e++){var r=arguments[e]!=null?arguments[e]:{};e%2?Jz(Object(r),!0).forEach(function(n){Hst(t,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):Jz(Object(r)).forEach(function(n){Object.defineProperty(t,n,Object.getOwnPropertyDescriptor(r,n))})}return t}function Hst(t,e,r){return(e=$st(e))in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}function $st(t){var e=Gst(t,"string");return typeof e=="symbol"?e:e+""}function Gst(t,e){if(typeof t!="object"||!t)return t;var r=t[Symbol.toPrimitive];if(r!==void 0){var n=r.call(t,e);if(typeof n!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}function _g(){return _g=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var r=arguments[e];for(var n in r)({}).hasOwnProperty.call(r,n)&&(t[n]=r[n])}return t},_g.apply(null,arguments)}var Kst=()=>(zZe(),null);function YI(t){if(typeof t=="number")return t;if(typeof t=="string"){var e=parseFloat(t);if(!Number.isNaN(e))return e}return 0}var qst=g.forwardRef((t,e)=>{var r,n,a=g.useRef(null),[s,o]=g.useState({containerWidth:YI((r=t.style)===null||r===void 0?void 0:r.width),containerHeight:YI((n=t.style)===null||n===void 0?void 0:n.height)}),l=g.useCallback((u,d)=>{o(f=>{var A=Math.round(u),h=Math.round(d);return f.containerWidth===A&&f.containerHeight===h?f:{containerWidth:A,containerHeight:h}})},[]),c=g.useCallback(u=>{if(typeof e=="function"&&e(u),u!=null&&typeof ResizeObserver<"u"){var{width:d,height:f}=u.getBoundingClientRect();l(d,f);var A=m=>{var{width:p,height:x}=m[0].contentRect;l(p,x)},h=new ResizeObserver(A);h.observe(u),a.current=h}},[e,l]);return g.useEffect(()=>()=>{var u=a.current;u!=null&&u.disconnect()},[l]),g.createElement(g.Fragment,null,g.createElement($P,{width:s.containerWidth,height:s.containerHeight}),g.createElement("div",_g({ref:c},t)))}),zst=g.forwardRef((t,e)=>{var{width:r,height:n}=t,[a,s]=g.useState({containerWidth:YI(r),containerHeight:YI(n)}),o=g.useCallback((c,u)=>{s(d=>{var f=Math.round(c),A=Math.round(u);return d.containerWidth===f&&d.containerHeight===A?d:{containerWidth:f,containerHeight:A}})},[]),l=g.useCallback(c=>{if(typeof e=="function"&&e(c),c!=null){var{width:u,height:d}=c.getBoundingClientRect();o(u,d)}},[e,o]);return g.createElement(g.Fragment,null,g.createElement($P,{width:a.containerWidth,height:a.containerHeight}),g.createElement("div",_g({ref:l},t)))}),Wst=g.forwardRef((t,e)=>{var{width:r,height:n}=t;return g.createElement(g.Fragment,null,g.createElement($P,{width:r,height:n}),g.createElement("div",_g({ref:e},t)))}),Xst=g.forwardRef((t,e)=>{var{width:r,height:n}=t;return bA(r)||bA(n)?g.createElement(zst,_g({},t,{ref:e})):g.createElement(Wst,_g({},t,{ref:e}))});function Yst(t){return t===!0?qst:Xst}var Jst=g.forwardRef((t,e)=>{var{children:r,className:n,height:a,onClick:s,onContextMenu:o,onDoubleClick:l,onMouseDown:c,onMouseEnter:u,onMouseLeave:d,onMouseMove:f,onMouseUp:A,onTouchEnd:h,onTouchMove:m,onTouchStart:p,style:x,width:v,responsive:y,dispatchTouchEvents:b=!0}=t,w=g.useRef(null),j=Cs(),[I,_]=g.useState(null),[S,E]=g.useState(null),T=Qst(),k=hM(),B=(k==null?void 0:k.width)>0?k.width:v,D=(k==null?void 0:k.height)>0?k.height:a,X=g.useCallback(H=>{T(H),typeof e=="function"&&e(H),_(H),E(H),H!=null&&(w.current=H)},[T,e,_,E]),me=g.useCallback(H=>{j($ue(H)),j(fd({handler:s,reactEvent:H}))},[j,s]),pe=g.useCallback(H=>{j(yO(H)),j(fd({handler:u,reactEvent:H}))},[j,u]),he=g.useCallback(H=>{j(Bce()),j(fd({handler:d,reactEvent:H}))},[j,d]),ve=g.useCallback(H=>{j(yO(H)),j(fd({handler:f,reactEvent:H}))},[j,f]),ae=g.useCallback(()=>{j(Xue())},[j]),Pe=g.useCallback(H=>{j(Wue(H.key))},[j]),ke=g.useCallback(H=>{j(fd({handler:o,reactEvent:H}))},[j,o]),O=g.useCallback(H=>{j(fd({handler:l,reactEvent:H}))},[j,l]),G=g.useCallback(H=>{j(fd({handler:c,reactEvent:H}))},[j,c]),z=g.useCallback(H=>{j(fd({handler:A,reactEvent:H}))},[j,A]),U=g.useCallback(H=>{j(fd({handler:p,reactEvent:H}))},[j,p]),Y=g.useCallback(H=>{b&&j(Jue(H)),j(fd({handler:m,reactEvent:H}))},[j,b,m]),ee=g.useCallback(H=>{j(fd({handler:h,reactEvent:H}))},[j,h]),M=Yst(y);return g.createElement(Xce.Provider,{value:I},g.createElement(Qse.Provider,{value:S},g.createElement(M,{width:B??(x==null?void 0:x.width),height:D??(x==null?void 0:x.height),className:ns("recharts-wrapper",n),style:Vst({position:"relative",cursor:"default",width:B,height:D},x),onClick:me,onContextMenu:ke,onDoubleClick:O,onFocus:ae,onKeyDown:Pe,onMouseDown:G,onMouseEnter:pe,onMouseLeave:he,onMouseMove:ve,onMouseUp:z,onTouchEnd:ee,onTouchMove:Y,onTouchStart:U,ref:X},g.createElement(Kst,null),r)))}),Zst=["width","height","responsive","children","className","style","compact","title","desc"];function eit(t,e){if(t==null)return{};var r,n,a=tit(t,e);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(t);for(n=0;n<s.length;n++)r=s[n],e.indexOf(r)===-1&&{}.propertyIsEnumerable.call(t,r)&&(a[r]=t[r])}return a}function tit(t,e){if(t==null)return{};var r={};for(var n in t)if({}.hasOwnProperty.call(t,n)){if(e.indexOf(n)!==-1)continue;r[n]=t[n]}return r}var nde=g.forwardRef((t,e)=>{var{width:r,height:n,responsive:a,children:s,className:o,style:l,compact:c,title:u,desc:d}=t,f=eit(t,Zst),A=lh(f);return c?g.createElement(g.Fragment,null,g.createElement($P,{width:r,height:n}),g.createElement(Yz,{otherAttributes:A,title:u,desc:d},s)):g.createElement(Jst,{className:o,style:l,width:r,height:n,responsive:a??!1,onClick:t.onClick,onMouseLeave:t.onMouseLeave,onMouseEnter:t.onMouseEnter,onMouseMove:t.onMouseMove,onMouseDown:t.onMouseDown,onMouseUp:t.onMouseUp,onContextMenu:t.onContextMenu,onDoubleClick:t.onDoubleClick,onTouchStart:t.onTouchStart,onTouchMove:t.onTouchMove,onTouchEnd:t.onTouchEnd},g.createElement(Yz,{otherAttributes:A,title:u,desc:d,ref:e},g.createElement(int,null,s)))});function bO(){return bO=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var r=arguments[e];for(var n in r)({}).hasOwnProperty.call(r,n)&&(t[n]=r[n])}return t},bO.apply(null,arguments)}var rit={top:5,right:5,bottom:5,left:5},nit={accessibilityLayer:!0,barCategoryGap:"10%",barGap:4,layout:"horizontal",margin:rit,responsive:!1,reverseStackOrder:!1,stackOffset:"none",syncMethod:"index"},ait=g.forwardRef(function(e,r){var n,a=Tl(e.categoricalChartProps,nit),{chartName:s,defaultTooltipEventType:o,validateTooltipEventTypes:l,tooltipPayloadSearcher:c,categoricalChartProps:u}=e,d={chartName:s,defaultTooltipEventType:o,validateTooltipEventTypes:l,tooltipPayloadSearcher:c,eventEmitter:void 0};return g.createElement(ede,{preloadedState:{options:d},reduxStoreName:(n=u.id)!==null&&n!==void 0?n:s},g.createElement(Tue,{chartData:u.data}),g.createElement(tde,{layout:a.layout,margin:a.margin}),g.createElement(rde,{baseValue:a.baseValue,accessibilityLayer:a.accessibilityLayer,barCategoryGap:a.barCategoryGap,maxBarSize:a.maxBarSize,stackOffset:a.stackOffset,barGap:a.barGap,barSize:a.barSize,syncId:a.syncId,syncMethod:a.syncMethod,className:a.className,reverseStackOrder:a.reverseStackOrder}),g.createElement(nde,bO({},a,{ref:r})))}),sit=["axis","item"],iit=g.forwardRef((t,e)=>g.createElement(ait,{chartName:"BarChart",defaultTooltipEventType:"axis",validateTooltipEventTypes:sit,tooltipPayloadSearcher:Jce,categoricalChartProps:t,ref:e}));function oit(t){var e=Cs();return g.useEffect(()=>{e(Ist(t))},[e,t]),null}var lit=["layout"];function wO(){return wO=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var r=arguments[e];for(var n in r)({}).hasOwnProperty.call(r,n)&&(t[n]=r[n])}return t},wO.apply(null,arguments)}function cit(t,e){if(t==null)return{};var r,n,a=uit(t,e);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(t);for(n=0;n<s.length;n++)r=s[n],e.indexOf(r)===-1&&{}.propertyIsEnumerable.call(t,r)&&(a[r]=t[r])}return a}function uit(t,e){if(t==null)return{};var r={};for(var n in t)if({}.hasOwnProperty.call(t,n)){if(e.indexOf(n)!==-1)continue;r[n]=t[n]}return r}var dit={top:5,right:5,bottom:5,left:5},ade={accessibilityLayer:!0,stackOffset:"none",barCategoryGap:"10%",barGap:4,margin:dit,reverseStackOrder:!1,syncMethod:"index",layout:"radial",responsive:!1,cx:"50%",cy:"50%",innerRadius:0,outerRadius:"80%"},fit=g.forwardRef(function(e,r){var n,a=Tl(e.categoricalChartProps,ade),{layout:s}=a,o=cit(a,lit),{chartName:l,defaultTooltipEventType:c,validateTooltipEventTypes:u,tooltipPayloadSearcher:d}=e,f={chartName:l,defaultTooltipEventType:c,validateTooltipEventTypes:u,tooltipPayloadSearcher:d,eventEmitter:void 0};return g.createElement(ede,{preloadedState:{options:f},reduxStoreName:(n=a.id)!==null&&n!==void 0?n:l},g.createElement(Tue,{chartData:a.data}),g.createElement(tde,{layout:s,margin:a.margin}),g.createElement(rde,{baseValue:void 0,accessibilityLayer:a.accessibilityLayer,barCategoryGap:a.barCategoryGap,maxBarSize:a.maxBarSize,stackOffset:a.stackOffset,barGap:a.barGap,barSize:a.barSize,syncId:a.syncId,syncMethod:a.syncMethod,className:a.className,reverseStackOrder:a.reverseStackOrder}),g.createElement(oit,{cx:a.cx,cy:a.cy,startAngle:a.startAngle,endAngle:a.endAngle,innerRadius:a.innerRadius,outerRadius:a.outerRadius}),g.createElement(nde,wO({},o,{ref:r})))});function Zz(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter(function(a){return Object.getOwnPropertyDescriptor(t,a).enumerable})),r.push.apply(r,n)}return r}function eW(t){for(var e=1;e<arguments.length;e++){var r=arguments[e]!=null?arguments[e]:{};e%2?Zz(Object(r),!0).forEach(function(n){hit(t,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):Zz(Object(r)).forEach(function(n){Object.defineProperty(t,n,Object.getOwnPropertyDescriptor(r,n))})}return t}function hit(t,e,r){return(e=Ait(e))in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}function Ait(t){var e=mit(t,"string");return typeof e=="symbol"?e:e+""}function mit(t,e){if(typeof t!="object"||!t)return t;var r=t[Symbol.toPrimitive];if(r!==void 0){var n=r.call(t,e);if(typeof n!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}var pit=["item"],git=eW(eW({},ade),{},{layout:"centric",startAngle:0,endAngle:360}),xit=g.forwardRef((t,e)=>{var r=Tl(t,git);return g.createElement(fit,{chartName:"PieChart",defaultTooltipEventType:"item",validateTooltipEventTypes:pit,tooltipPayloadSearcher:Jce,categoricalChartProps:r,ref:e})});const vit="sellers_candies",T_="cash_deliveries_candies";function Oa(t){const e=typeof t=="number"?t:parseFloat(String(t??"").replace(/,/g,""));return Number.isFinite(e)?e:0}function Fi(t){return Number.isFinite(t)?t.toLocaleString("en-US",{minimumFractionDigits:2,maximumFractionDigits:2}):"0.00"}function k_(t,e){return t*e/100}function F_(t,e,r){return t-e-r}function tW(t){return t?Rr(t.toDate(),"yyyy-MM-dd"):""}function O_(t){if(!t)return Ar.fromDate(new Date);const[e,r,n]=t.split("-").map(s=>parseInt(s,10)),a=new Date(e,(r||1)-1,n||1,0,0,0,0);return Ar.fromDate(a)}function yit(){const t=new Date,[e,r]=g.useState(Rr(Ud(t),"yyyy-MM-dd")),[n,a]=g.useState(Rr(Ld(t),"yyyy-MM-dd")),[s,o]=g.useState([]),l=g.useMemo(()=>{const M=new Map;return s.forEach(H=>M.set(H.id,H)),M},[s]),[c,u]=g.useState([]),[d,f]=g.useState(!0),[A,h]=g.useState(()=>Rr(new Date,"yyyy-MM-dd")),[m,p]=g.useState(""),[x,v]=g.useState(""),[y,b]=g.useState("0"),[w,j]=g.useState(""),[I,_]=g.useState(null),[S,E]=g.useState({}),T=g.useRef(null);g.useEffect(()=>{const M=Yt(mt(Se,vit),In("name","asc")),H=jd(M,te=>{const Ce=te.docs.map(V=>{const We=V.data();return{id:V.id,name:String((We==null?void 0:We.name)??""),branch:We!=null&&We.branch?String(We.branch):"",commissionPercent:Oa((We==null?void 0:We.commissionPercent)??0)}});o(Ce)},()=>o([]));return()=>H()},[]),g.useEffect(()=>{f(!0);const M=O_(e),H=new Date(O_(n).toDate().getTime());H.setDate(H.getDate()+1);const te=Ar.fromDate(H),Ce=Yt(mt(Se,T_),cr("date",">=",M),cr("date","<",te),In("date","desc")),V=jd(Ce,We=>{const ie=We.docs.map(J=>{const Oe=J.data();return{id:J.id,date:Oe==null?void 0:Oe.date,sellerId:String((Oe==null?void 0:Oe.sellerId)??""),sellerName:String((Oe==null?void 0:Oe.sellerName)??""),amountDelivered:Oa(Oe==null?void 0:Oe.amountDelivered),commissionPercent:Oa(Oe==null?void 0:Oe.commissionPercent),commissionPaid:Oa(Oe==null?void 0:Oe.commissionPaid),extraExpenses:Oa(Oe==null?void 0:Oe.extraExpenses),totalFinal:Oa(Oe==null?void 0:Oe.totalFinal),comment:String((Oe==null?void 0:Oe.comment)??""),createdAt:Oe==null?void 0:Oe.createdAt,updatedAt:Oe==null?void 0:Oe.updatedAt}});u(ie),f(!1)},We=>{console.error("Firestore deliveries query error:",We),u([]),f(!1),alert("Firestore query fall. Revis consola (probable ndice).")});return()=>V()},[e,n]);const k=g.useMemo(()=>m?l.get(m):void 0,[m,l]),B=Oa((k==null?void 0:k.commissionPercent)??0),D=Oa(x),X=Oa(y),me=k_(D,B),pe=F_(D,me,X),he=g.useMemo(()=>{var H;const M=new Map;for(const te of c){const Ce=te.sellerId||te.sellerName||"UNKNOWN",V=M.get(Ce)??{sellerId:te.sellerId,sellerName:te.sellerName||((H=l.get(te.sellerId))==null?void 0:H.name)||"Sin nombre",delivered:0,commission:0,totalFinal:0};V.delivered+=Oa(te.amountDelivered),V.commission+=Oa(te.commissionPaid),V.totalFinal+=Oa(te.totalFinal),M.set(Ce,V)}return Array.from(M.values()).sort((te,Ce)=>te.sellerName.localeCompare(Ce.sellerName))},[c,l]),ve=g.useMemo(()=>{let M=0,H=0,te=0,Ce=0;for(const V of c)M+=Oa(V.amountDelivered),H+=Oa(V.commissionPaid),te+=Oa(V.extraExpenses),Ce+=Oa(V.totalFinal);return{delivered:M,commission:H,expenses:te,totalFinal:Ce}},[c]),ae=g.useMemo(()=>he.map(M=>({name:M.sellerName,Entregado:Number(M.delivered.toFixed(2)),Comision:Number(M.commission.toFixed(2))})),[he]),Pe=g.useMemo(()=>[{name:"Total Entregado (Bruto)",value:Number(ve.delivered.toFixed(2))},{name:"Total Comisin",value:Number(ve.commission.toFixed(2))},{name:"Total Gastos",value:Number(ve.expenses.toFixed(2))}].filter(M=>M.value>0),[ve]),ke=["#3B82F6","#F59E0B","#EF4444"];async function O(){if(!m)return alert("Seleccion un vendedor.");if(D<=0)return alert("Ingres un Monto entregado vlido (> 0).");const M=l.get(m),H=(M==null?void 0:M.name)??"Sin nombre",te=Oa((M==null?void 0:M.commissionPercent)??0),Ce=k_(D,te),V=F_(D,Ce,X);await Jn(mt(Se,T_),{date:O_(A),sellerId:m,sellerName:H,amountDelivered:D,commissionPercent:te,commissionPaid:Ce,extraExpenses:X,totalFinal:V,comment:w??"",createdAt:Ar.now()}),v(""),b("0"),j("")}function G(M){_(M.id),E({...M,dateInput:tW(M.date)})}function z(){_(null),E({})}async function U(M){const H=S,te=String(H.sellerId??""),Ce=l.get(te),V=String(H.sellerName??(Ce==null?void 0:Ce.name)??"Sin nombre"),We=Oa(H.amountDelivered),ie=Oa(H.extraExpenses),J=Oa(H.commissionPercent??(Ce==null?void 0:Ce.commissionPercent)??0),Oe=k_(We,J),fe=F_(We,Oe,ie),_e=O_(String(H.dateInput??tW(H.date)));await kn(Gt(Se,T_,M),{date:_e,sellerId:te,sellerName:V,amountDelivered:We,commissionPercent:J,commissionPaid:Oe,extraExpenses:ie,totalFinal:fe,comment:String(H.comment??""),updatedAt:Ar.now()}),z()}async function Y(M){confirm("Eliminar este registro?")&&await Kn(Gt(Se,T_,M))}async function ee(){if(!T.current)return;const M=await kg(T.current,{scale:2,useCORS:!0,backgroundColor:"#ffffff",scrollX:0,scrollY:-window.scrollY}),H=M.toDataURL("image/png"),te=new rn("p","mm","a4"),Ce=te.internal.pageSize.getWidth(),V=te.internal.pageSize.getHeight(),We=Ce,ie=M.height*We/M.width;let J=ie,Oe=0;for(te.addImage(H,"PNG",0,Oe,We,ie),J-=V;J>0;)te.addPage(),Oe=-(ie-J),te.addImage(H,"PNG",0,Oe,We,ie),J-=V;te.save(`Entregas_Dulces_${e}_a_${n}.pdf`)}return i.jsxs("div",{className:"p-3 md:p-6 max-w-7xl mx-auto space-y-3 md:space-y-4",children:[i.jsxs("div",{className:"flex flex-col md:flex-row md:items-center md:justify-between gap-3",children:[i.jsxs("div",{children:[i.jsx("h1",{className:"text-lg md:text-2xl font-black text-gray-900",children:"Control Contable - Entregas de Vendedores (Dulces)"}),i.jsxs("p",{className:"text-xs md:text-sm text-gray-600",children:["Periodo: ",i.jsx("span",{className:"font-bold",children:e})," "," ",i.jsx("span",{className:"font-bold",children:n})]})]}),i.jsx("button",{onClick:ee,className:"h-10 px-4 rounded-xl bg-gray-900 text-white font-extrabold hover:bg-gray-800 active:scale-[0.99] transition",children:"Exportar a PDF"})]}),i.jsxs("div",{className:"bg-white border border-gray-100 rounded-2xl shadow-sm p-3 md:p-4",children:[i.jsx("div",{className:"font-black text-sm text-gray-900 mb-3",children:"Filtros de periodo"}),i.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-3",children:[i.jsxs("label",{className:"space-y-1",children:[i.jsx("span",{className:"text-xs font-bold text-gray-600",children:"Desde"}),i.jsx("input",{type:"date",value:e,onChange:M=>r(M.target.value),className:"w-full h-10 rounded-xl border border-gray-200 px-3 outline-none focus:ring-2 focus:ring-gray-900/10"})]}),i.jsxs("label",{className:"space-y-1",children:[i.jsx("span",{className:"text-xs font-bold text-gray-600",children:"Hasta"}),i.jsx("input",{type:"date",value:n,onChange:M=>a(M.target.value),className:"w-full h-10 rounded-xl border border-gray-200 px-3 outline-none focus:ring-2 focus:ring-gray-900/10"})]})]})]}),i.jsxs("div",{ref:T,className:"space-y-3 md:space-y-4",children:[i.jsxs("div",{className:"bg-white border border-gray-100 rounded-2xl shadow-sm p-3 md:p-4",children:[i.jsx("div",{className:"font-black text-sm text-gray-900 mb-3",children:"KPIs Consolidados"}),i.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-3",children:[i.jsxs("div",{className:"rounded-2xl border border-gray-100 bg-gray-50 p-3",children:[i.jsx("div",{className:"text-xs font-extrabold text-gray-600",children:"KPI Entradas (Neto)"}),i.jsxs("div",{className:"text-xl font-black text-gray-900 mt-1",children:["$ ",Fi(ve.totalFinal)]}),i.jsx("div",{className:"text-[11px] text-gray-500 mt-1",children:"Entregado - Comisin - Gastos"})]}),i.jsxs("div",{className:"rounded-2xl border border-gray-100 bg-gray-50 p-3",children:[i.jsx("div",{className:"text-xs font-extrabold text-gray-600",children:"KPI Comisiones"}),i.jsxs("div",{className:"text-xl font-black text-gray-900 mt-1",children:["$ ",Fi(ve.commission)]}),i.jsx("div",{className:"text-[11px] text-gray-500 mt-1",children:"Suma de comisin pagada"})]}),i.jsxs("div",{className:"rounded-2xl border border-gray-100 bg-gray-50 p-3",children:[i.jsx("div",{className:"text-xs font-extrabold text-gray-600",children:"KPI Gastos extras"}),i.jsxs("div",{className:"text-xl font-black text-gray-900 mt-1",children:["$ ",Fi(ve.expenses)]}),i.jsx("div",{className:"text-[11px] text-gray-500 mt-1",children:"Suma de gastos registrados"})]}),i.jsxs("div",{className:"rounded-2xl border border-gray-100 bg-gray-50 p-3",children:[i.jsx("div",{className:"text-xs font-extrabold text-gray-600",children:"Total entregado (Bruto)"}),i.jsxs("div",{className:"text-xl font-black text-gray-900 mt-1",children:["$ ",Fi(ve.delivered)]}),i.jsx("div",{className:"text-[11px] text-gray-500 mt-1",children:"Sin restar nada"})]})]}),i.jsx("div",{className:"font-black text-sm text-gray-900 mt-4 mb-2",children:"KPI Vendedores (sumatoria del periodo)"}),i.jsx("div",{className:"overflow-x-auto",children:i.jsxs("table",{className:"min-w-[520px] w-full text-sm",children:[i.jsx("thead",{children:i.jsxs("tr",{className:"bg-gray-50 text-gray-700",children:[i.jsx("th",{className:"text-left p-2 font-black",children:"Vendedor"}),i.jsx("th",{className:"text-right p-2 font-black",children:"Entregado"}),i.jsx("th",{className:"text-right p-2 font-black",children:"Comisin"}),i.jsx("th",{className:"text-right p-2 font-black",children:"Total final"})]})}),i.jsx("tbody",{children:he.length===0?i.jsx("tr",{children:i.jsx("td",{className:"p-2 text-gray-500",colSpan:4,children:"Sin datos en el periodo seleccionado."})}):he.map(M=>i.jsxs("tr",{className:"border-t",children:[i.jsx("td",{className:"p-2",children:M.sellerName}),i.jsxs("td",{className:"p-2 text-right",children:["$ ",Fi(M.delivered)]}),i.jsxs("td",{className:"p-2 text-right",children:["$ ",Fi(M.commission)]}),i.jsxs("td",{className:"p-2 text-right font-extrabold",children:["$ ",Fi(M.totalFinal)]})]},M.sellerId||M.sellerName))})]})})]}),i.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-3",children:[i.jsxs("div",{className:"bg-white border border-gray-100 rounded-2xl shadow-sm p-3 md:p-4",children:[i.jsx("div",{className:"font-black text-sm text-gray-900 mb-3",children:"Entregas y Comisin por vendedor (Barras)"}),i.jsx("div",{className:"w-full h-[320px]",children:i.jsx(iK,{children:i.jsxs(iit,{data:ae,children:[i.jsx(Vue,{dataKey:"name",interval:0,angle:-12,height:70}),i.jsx(Hue,{}),i.jsx(az,{}),i.jsx(KF,{}),i.jsx(gO,{dataKey:"Entregado"}),i.jsx(gO,{dataKey:"Comision"})]})})})]}),i.jsxs("div",{className:"bg-white border border-gray-100 rounded-2xl shadow-sm p-3 md:p-4",children:[i.jsx("div",{className:"font-black text-sm text-gray-900 mb-3",children:"Distribucin (Pastel)"}),i.jsx("div",{className:"w-full h-[320px]",children:i.jsx(iK,{children:i.jsxs(xit,{children:[i.jsx(Iue,{data:Pe,dataKey:"value",nameKey:"name",outerRadius:110,label:!0,children:Pe.map((M,H)=>i.jsx(AN,{fill:ke[H%ke.length]},H))}),i.jsx(az,{}),i.jsx(KF,{})]})})})]})]}),i.jsxs("div",{className:"bg-white border border-gray-100 rounded-2xl shadow-sm p-3 md:p-4",children:[i.jsx("div",{className:"font-black text-sm text-gray-900 mb-3",children:"Agregar movimiento"}),i.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-3",children:[i.jsxs("label",{className:"space-y-1",children:[i.jsx("span",{className:"text-xs font-bold text-gray-600",children:"Fecha"}),i.jsx("input",{type:"date",value:A,onChange:M=>h(M.target.value),className:"w-full h-10 rounded-xl border border-gray-200 px-3 outline-none focus:ring-2 focus:ring-gray-900/10"})]}),i.jsxs("label",{className:"space-y-1",children:[i.jsx("span",{className:"text-xs font-bold text-gray-600",children:"Vendedor"}),i.jsxs("select",{value:m,onChange:M=>p(M.target.value),className:"w-full h-10 rounded-xl border border-gray-200 px-3 outline-none focus:ring-2 focus:ring-gray-900/10 bg-white",children:[i.jsx("option",{value:"",children:"Seleccionar..."}),s.map(M=>i.jsxs("option",{value:M.id,children:[M.name," ",M.branch?`(${M.branch})`:""]},M.id))]})]}),i.jsxs("label",{className:"space-y-1",children:[i.jsx("span",{className:"text-xs font-bold text-gray-600",children:"Monto entregado"}),i.jsx("input",{type:"number",inputMode:"decimal",value:x,onChange:M=>v(M.target.value),placeholder:"0.00",className:"w-full h-10 rounded-xl border border-gray-200 px-3 outline-none focus:ring-2 focus:ring-gray-900/10"})]}),i.jsxs("label",{className:"space-y-1",children:[i.jsx("span",{className:"text-xs font-bold text-gray-600",children:"Comisin configurada"}),i.jsx("input",{value:`${B}%`,readOnly:!0,className:"w-full h-10 rounded-xl border border-gray-200 px-3 bg-gray-50 text-gray-800"})]}),i.jsxs("label",{className:"space-y-1",children:[i.jsx("span",{className:"text-xs font-bold text-gray-600",children:"Comisin pagada"}),i.jsx("input",{value:`$ ${Fi(me)}`,readOnly:!0,className:"w-full h-10 rounded-xl border border-gray-200 px-3 bg-gray-50 text-gray-800"})]}),i.jsxs("label",{className:"space-y-1",children:[i.jsx("span",{className:"text-xs font-bold text-gray-600",children:"Gastos extras"}),i.jsx("input",{type:"number",inputMode:"decimal",value:y,onChange:M=>b(M.target.value),placeholder:"0.00",className:"w-full h-10 rounded-xl border border-gray-200 px-3 outline-none focus:ring-2 focus:ring-gray-900/10"})]}),i.jsxs("label",{className:"space-y-1",children:[i.jsx("span",{className:"text-xs font-bold text-gray-600",children:"Total final"}),i.jsx("input",{value:`$ ${Fi(pe)}`,readOnly:!0,className:"w-full h-10 rounded-xl border border-gray-200 px-3 bg-gray-50 text-gray-900 font-extrabold"})]}),i.jsxs("label",{className:"space-y-1 md:col-span-2",children:[i.jsx("span",{className:"text-xs font-bold text-gray-600",children:"Comentario"}),i.jsx("input",{value:w,onChange:M=>j(M.target.value),placeholder:"Opcional...",className:"w-full h-10 rounded-xl border border-gray-200 px-3 outline-none focus:ring-2 focus:ring-gray-900/10"})]})]}),i.jsx("div",{className:"mt-3",children:i.jsx("button",{onClick:O,className:"w-full md:w-auto h-10 px-4 rounded-xl bg-gray-900 text-white font-extrabold hover:bg-gray-800 active:scale-[0.99] transition",children:"Guardar movimiento"})})]}),i.jsxs("div",{className:"bg-white border border-gray-100 rounded-2xl shadow-sm p-3 md:p-4",children:[i.jsx("div",{className:"font-black text-sm text-gray-900 mb-3",children:"Registro detallado"}),d?i.jsx("div",{className:"text-sm text-gray-500",children:"Cargando..."}):c.length===0?i.jsx("div",{className:"text-sm text-gray-500",children:"No hay registros en el periodo."}):i.jsxs(i.Fragment,{children:[i.jsx("div",{className:"hidden md:block overflow-x-auto",children:i.jsxs("table",{className:"min-w-[1100px] w-full text-sm",children:[i.jsx("thead",{children:i.jsxs("tr",{className:"bg-gray-50 text-gray-700",children:[i.jsx("th",{className:"text-left p-2 font-black",children:"Fecha"}),i.jsx("th",{className:"text-left p-2 font-black",children:"Vendedor"}),i.jsx("th",{className:"text-right p-2 font-black",children:"Monto entregado"}),i.jsx("th",{className:"text-right p-2 font-black",children:"Comisin %"}),i.jsx("th",{className:"text-right p-2 font-black",children:"Comisin pagada"}),i.jsx("th",{className:"text-right p-2 font-black",children:"Gastos"}),i.jsx("th",{className:"text-right p-2 font-black",children:"Total final"}),i.jsx("th",{className:"text-left p-2 font-black",children:"Comentario"}),i.jsx("th",{className:"text-left p-2 font-black",children:"Acciones"})]})}),i.jsx("tbody",{children:c.map(M=>{if(!(I===M.id))return i.jsxs("tr",{className:"border-t",children:[i.jsx("td",{className:"p-2",children:Rr(M.date.toDate(),"yyyy-MM-dd")}),i.jsx("td",{className:"p-2 font-semibold",children:M.sellerName}),i.jsxs("td",{className:"p-2 text-right",children:["$ ",Fi(M.amountDelivered)]}),i.jsxs("td",{className:"p-2 text-right",children:[Fi(M.commissionPercent),"%"]}),i.jsxs("td",{className:"p-2 text-right",children:["$ ",Fi(M.commissionPaid)]}),i.jsxs("td",{className:"p-2 text-right",children:["$ ",Fi(M.extraExpenses)]}),i.jsxs("td",{className:"p-2 text-right font-extrabold",children:["$ ",Fi(M.totalFinal)]}),i.jsx("td",{className:"p-2",children:M.comment}),i.jsx("td",{className:"p-2",children:i.jsxs("div",{className:"flex gap-2",children:[i.jsx("button",{onClick:()=>G(M),className:"h-8 px-3 rounded-xl border border-gray-200 font-extrabold hover:bg-gray-50",children:"Editar"}),i.jsx("button",{onClick:()=>Y(M.id),className:"h-8 px-3 rounded-xl border border-gray-200 font-extrabold text-red-700 hover:bg-red-50",children:"Eliminar"})]})})]},M.id);const te=Oa(S.amountDelivered??M.amountDelivered),Ce=Oa(S.commissionPercent??M.commissionPercent),V=Oa(S.extraExpenses??M.extraExpenses),We=k_(te,Ce),ie=F_(te,We,V);return i.jsxs("tr",{className:"border-t bg-yellow-50/40",children:[i.jsx("td",{className:"p-2",children:i.jsx("input",{type:"date",value:String(S.dateInput??""),onChange:J=>E(Oe=>({...Oe,dateInput:J.target.value})),className:"h-9 px-3 rounded-xl border border-gray-200 bg-white outline-none"})}),i.jsx("td",{className:"p-2",children:i.jsxs("select",{value:String(S.sellerId??M.sellerId),onChange:J=>{const Oe=J.target.value,fe=l.get(Oe);E(_e=>({..._e,sellerId:Oe,sellerName:(fe==null?void 0:fe.name)??"",commissionPercent:Oa((fe==null?void 0:fe.commissionPercent)??0)}))},className:"h-9 px-3 rounded-xl border border-gray-200 bg-white outline-none",children:[i.jsx("option",{value:"",children:"Seleccionar..."}),s.map(J=>i.jsxs("option",{value:J.id,children:[J.name," ",J.branch?`(${J.branch})`:""]},J.id))]})}),i.jsx("td",{className:"p-2 text-right",children:i.jsx("input",{type:"number",value:String(te),onChange:J=>E(Oe=>({...Oe,amountDelivered:Oa(J.target.value)})),className:"h-9 w-32 text-right px-3 rounded-xl border border-gray-200 bg-white outline-none"})}),i.jsx("td",{className:"p-2 text-right",children:i.jsx("input",{type:"number",value:String(Ce),onChange:J=>E(Oe=>({...Oe,commissionPercent:Oa(J.target.value)})),className:"h-9 w-24 text-right px-3 rounded-xl border border-gray-200 bg-white outline-none"})}),i.jsxs("td",{className:"p-2 text-right font-semibold",children:["$ ",Fi(We)]}),i.jsx("td",{className:"p-2 text-right",children:i.jsx("input",{type:"number",value:String(V),onChange:J=>E(Oe=>({...Oe,extraExpenses:Oa(J.target.value)})),className:"h-9 w-32 text-right px-3 rounded-xl border border-gray-200 bg-white outline-none"})}),i.jsxs("td",{className:"p-2 text-right font-extrabold",children:["$ ",Fi(ie)]}),i.jsx("td",{className:"p-2",children:i.jsx("input",{type:"text",value:String(S.comment??M.comment),onChange:J=>E(Oe=>({...Oe,comment:J.target.value})),className:"h-9 w-full px-3 rounded-xl border border-gray-200 bg-white outline-none"})}),i.jsx("td",{className:"p-2",children:i.jsxs("div",{className:"flex gap-2",children:[i.jsx("button",{onClick:()=>U(M.id),className:"h-8 px-3 rounded-xl bg-gray-900 text-white font-extrabold hover:bg-gray-800",children:"Guardar"}),i.jsx("button",{onClick:z,className:"h-8 px-3 rounded-xl border border-gray-200 font-extrabold hover:bg-gray-50",children:"Cancelar"})]})})]},M.id)})})]})}),i.jsxs("div",{className:"md:hidden space-y-3",children:[c.map(M=>i.jsxs("div",{className:"rounded-2xl border border-gray-100 p-3 bg-white",children:[i.jsxs("div",{className:"flex items-start justify-between gap-2",children:[i.jsx("div",{className:"font-black text-gray-900",children:M.sellerName}),i.jsx("div",{className:"text-xs font-extrabold bg-gray-100 rounded-full px-3 py-1",children:Rr(M.date.toDate(),"yyyy-MM-dd")})]}),i.jsxs("div",{className:"mt-3 grid grid-cols-2 gap-2 text-sm",children:[i.jsxs("div",{children:[i.jsx("div",{className:"text-[11px] font-bold text-gray-500",children:"Monto entregado"}),i.jsxs("div",{className:"font-extrabold",children:["$ ",Fi(M.amountDelivered)]})]}),i.jsxs("div",{children:[i.jsx("div",{className:"text-[11px] font-bold text-gray-500",children:"Comisin %"}),i.jsxs("div",{className:"font-semibold",children:[Fi(M.commissionPercent),"%"]})]}),i.jsxs("div",{children:[i.jsx("div",{className:"text-[11px] font-bold text-gray-500",children:"Comisin pagada"}),i.jsxs("div",{className:"font-semibold",children:["$ ",Fi(M.commissionPaid)]})]}),i.jsxs("div",{children:[i.jsx("div",{className:"text-[11px] font-bold text-gray-500",children:"Gastos"}),i.jsxs("div",{className:"font-semibold",children:["$ ",Fi(M.extraExpenses)]})]}),i.jsxs("div",{className:"col-span-2",children:[i.jsx("div",{className:"text-[11px] font-bold text-gray-500",children:"Total final"}),i.jsxs("div",{className:"text-base font-black",children:["$ ",Fi(M.totalFinal)]})]}),M.comment?i.jsxs("div",{className:"col-span-2",children:[i.jsx("div",{className:"text-[11px] font-bold text-gray-500",children:"Comentario"}),i.jsx("div",{className:"text-sm text-gray-800",children:M.comment})]}):null]}),i.jsxs("div",{className:"mt-3 flex gap-2",children:[i.jsx("button",{onClick:()=>G(M),className:"flex-1 h-10 rounded-xl border border-gray-200 font-extrabold hover:bg-gray-50",children:"Editar"}),i.jsx("button",{onClick:()=>Y(M.id),className:"flex-1 h-10 rounded-xl border border-gray-200 font-extrabold text-red-700 hover:bg-red-50",children:"Eliminar"})]})]},M.id)),I?i.jsxs("div",{className:"rounded-2xl border border-yellow-200 bg-yellow-50 p-3",children:[i.jsx("div",{className:"font-black text-gray-900 mb-3",children:"Editando registro"}),i.jsxs("div",{className:"grid grid-cols-1 gap-3",children:[i.jsxs("label",{className:"space-y-1",children:[i.jsx("span",{className:"text-xs font-bold text-gray-600",children:"Fecha"}),i.jsx("input",{type:"date",value:String(S.dateInput??""),onChange:M=>E(H=>({...H,dateInput:M.target.value})),className:"w-full h-10 rounded-xl border border-gray-200 px-3 outline-none bg-white"})]}),i.jsxs("label",{className:"space-y-1",children:[i.jsx("span",{className:"text-xs font-bold text-gray-600",children:"Vendedor"}),i.jsxs("select",{value:String(S.sellerId??""),onChange:M=>{const H=M.target.value,te=l.get(H);E(Ce=>({...Ce,sellerId:H,sellerName:(te==null?void 0:te.name)??"",commissionPercent:Oa((te==null?void 0:te.commissionPercent)??0)}))},className:"w-full h-10 rounded-xl border border-gray-200 px-3 outline-none bg-white",children:[i.jsx("option",{value:"",children:"Seleccionar..."}),s.map(M=>i.jsxs("option",{value:M.id,children:[M.name," ",M.branch?`(${M.branch})`:""]},M.id))]})]}),i.jsxs("label",{className:"space-y-1",children:[i.jsx("span",{className:"text-xs font-bold text-gray-600",children:"Monto entregado"}),i.jsx("input",{type:"number",value:String(S.amountDelivered??""),onChange:M=>E(H=>({...H,amountDelivered:Oa(M.target.value)})),className:"w-full h-10 rounded-xl border border-gray-200 px-3 outline-none bg-white"})]}),i.jsxs("label",{className:"space-y-1",children:[i.jsx("span",{className:"text-xs font-bold text-gray-600",children:"Gastos extras"}),i.jsx("input",{type:"number",value:String(S.extraExpenses??""),onChange:M=>E(H=>({...H,extraExpenses:Oa(M.target.value)})),className:"w-full h-10 rounded-xl border border-gray-200 px-3 outline-none bg-white"})]}),i.jsxs("label",{className:"space-y-1",children:[i.jsx("span",{className:"text-xs font-bold text-gray-600",children:"Comisin %"}),i.jsx("input",{type:"number",value:String(S.commissionPercent??""),onChange:M=>E(H=>({...H,commissionPercent:Oa(M.target.value)})),className:"w-full h-10 rounded-xl border border-gray-200 px-3 outline-none bg-white"})]}),i.jsxs("label",{className:"space-y-1",children:[i.jsx("span",{className:"text-xs font-bold text-gray-600",children:"Comentario"}),i.jsx("input",{type:"text",value:String(S.comment??""),onChange:M=>E(H=>({...H,comment:M.target.value})),className:"w-full h-10 rounded-xl border border-gray-200 px-3 outline-none bg-white"})]}),i.jsxs("div",{className:"flex gap-2",children:[i.jsx("button",{onClick:()=>U(I),className:"flex-1 h-10 rounded-xl bg-gray-900 text-white font-extrabold hover:bg-gray-800",children:"Guardar"}),i.jsx("button",{onClick:z,className:"flex-1 h-10 rounded-xl border border-gray-200 font-extrabold hover:bg-gray-50",children:"Cancelar"})]})]})]}):null]})]})]})]})]})}const rp=t=>`C$ ${(Number(t)||0).toFixed(2)}`;function bit(t){return String(t??"").trim().replace(/\s+/g," ").toLowerCase()}function rW(t,e=0){const r=Number(String(t??"").replace(",","."));return Number.isFinite(r)?r:e}function wit(t){const e=String(t||"").trim();if(!e)return 0;const r=Date.parse(e);return Number.isFinite(r)?r:0}function Nit({open:t,onClose:e,onDetected:r}){const n=g.useRef(null),a=g.useRef(null),[s,o]=g.useState(""),l=g.useRef("");return g.useEffect(()=>{if(!t)return;let c=!1;const u=new $2,d=()=>{var A,h,m;try{(A=a.current)==null||A.stop()}catch{}a.current=null;try{const p=(h=n.current)==null?void 0:h.srcObject;(m=p==null?void 0:p.getTracks)==null||m.call(p).forEach(x=>x.stop())}catch{}try{n.current&&(n.current.srcObject=null)}catch{}};return(async()=>{o("");try{if(!n.current)return;try{(await navigator.mediaDevices.getUserMedia({video:{facingMode:{ideal:"environment"}},audio:!1})).getTracks().forEach(m=>m.stop())}catch{}const A=await u.decodeFromConstraints({video:{facingMode:{ideal:"environment"},width:{ideal:1280},height:{ideal:720}},audio:!1},n.current,h=>{if(!c&&h){const m=String(h.getText()||"").trim().replace(/\s+/g,"");if(!m||m===l.current)return;l.current=m,d(),r(m),e()}});a.current=A}catch(A){const h=String((A==null?void 0:A.message)||""),m=String((A==null?void 0:A.name)||"");h.toLowerCase().includes("permission")||m==="NotAllowedError"?o("Permiso de cmara denegado."):m==="NotFoundError"||h.toLowerCase().includes("notfound")?o("No se encontr cmara en este dispositivo."):h.toLowerCase().includes("secure")||h.toLowerCase().includes("https")?o("La cmara requiere HTTPS (sitio seguro)."):o(h||"No se pudo iniciar el escner.")}})(),()=>{c=!0,d()}},[t,e,r]),t?i.jsx("div",{className:"fixed inset-0 bg-black/70 z-50 p-3 flex items-center justify-center",children:i.jsxs("div",{className:"bg-white w-full max-w-md rounded-2xl shadow-lg border overflow-hidden",children:[i.jsxs("div",{className:"flex items-center justify-between p-3 border-b",children:[i.jsx("div",{className:"font-bold",children:"Escanear cdigo"}),i.jsx("button",{className:"px-3 py-1 rounded bg-gray-200 hover:bg-gray-300",onClick:e,type:"button",children:"Cerrar"})]}),i.jsxs("div",{className:"p-3",children:[i.jsxs("div",{className:"relative w-full aspect-[3/4] bg-black rounded-xl overflow-hidden",children:[i.jsx("video",{ref:n,className:"w-full h-full object-cover",muted:!0,playsInline:!0,autoPlay:!0}),i.jsx("div",{className:"absolute inset-0 pointer-events-none",children:i.jsx("div",{className:"absolute left-1/2 top-1/2 -translate-x-1/2 -translate-y-1/2 w-[85%] h-40 border-2 border-white/70 rounded-xl"})})]}),s&&i.jsx("div",{className:"mt-3 text-sm text-red-600 bg-red-50 border border-red-200 rounded p-2",children:s}),i.jsx("div",{className:"mt-2 text-xs text-gray-600",children:"Apunt al cdigo de barras y mantenelo estable."})]})]})}):null}function Cit(){const{refreshKey:t,refresh:e}=Oc(),[r,n]=g.useState(!0),[a,s]=g.useState(""),[o,l]=g.useState([]),[c,u]=g.useState(""),[d,f]=g.useState(""),[A,h]=g.useState(""),[m,p]=g.useState(""),[x,v]=g.useState("ANY"),[y,b]=g.useState(!1),[w,j]=g.useState({});g.useEffect(()=>{(async()=>{n(!0),s("");try{const ge=await kt(Yt(mt(Se,"candy_main_orders"))),q=new Map;ge.forEach(ye=>{var Ae,Re,lt;const ue=ye.data(),Le=wit(ue.date),ct=((Re=(Ae=ue==null?void 0:ue.createdAt)==null?void 0:Ae.toMillis)==null?void 0:Re.call(Ae))||((lt=ue==null?void 0:ue.createdAt)!=null&&lt.seconds?ue.createdAt.seconds*1e3:0)||0,ht=Math.max(Le,ct),xe=Array.isArray(ue.items)?ue.items:[];for(const Ne of xe){const De=String((Ne==null?void 0:Ne.id)||(Ne==null?void 0:Ne.productId)||"").trim();if(!De)continue;const xt=String((Ne==null?void 0:Ne.name)||(Ne==null?void 0:Ne.productName)||"").trim(),_t=String((Ne==null?void 0:Ne.category)||"").trim(),Et=Number((Ne==null?void 0:Ne.unitPriceIsla)||0),Mt=Number((Ne==null?void 0:Ne.unitPriceRivas)||0),nt=Number((Ne==null?void 0:Ne.unitsPerPackage)||(Ne==null?void 0:Ne.unitsPerPack)||1),Ee=q.get(De);(!Ee||ht>=Ee._sortKey)&&q.set(De,{productId:De,category:_t,productName:xt,priceIsla:Et,priceRivas:Mt,unitsPerPackage:nt,_sortKey:ht})}});const se=Array.from(q.values()).sort((ye,ue)=>ye.productName.localeCompare(ue.productName,"es"));l(se)}catch(ge){console.error(ge),s(" Error cargando precios desde rdenes maestras."),l([])}finally{n(!1)}})()},[t]),g.useEffect(()=>{const ge=mt(Se,"products_candies"),q=Yt(ge),se=jd(q,ye=>{const ue={},Le={},ct={},ht={};ye.forEach(xe=>{const Ae=xe.data();ue[xe.id]=Number((Ae==null?void 0:Ae.providerPrice)||(Ae==null?void 0:Ae.providerPricePerUnit)||0),ct[xe.id]=Number((Ae==null?void 0:Ae.unitsPerPackage)||(Ae==null?void 0:Ae.unitsPerPack)||1)||1;const Re=String((Ae==null?void 0:Ae.barcode)||"").trim();Re&&(Le[xe.id]=Re);const lt=String((Ae==null?void 0:Ae.packaging)||(Ae==null?void 0:Ae.empaque)||"").trim();lt&&(ht[xe.id]=lt)});try{const xe=S.current||{};let Ae=!1;for(const De of Object.keys(Le))if((Le[De]||"")!==(xe[De]||"")){Ae=!0;break}const Re=T.current||{};let lt=!1;for(const De of Object.keys(ct))if((ct[De]||0)!==(Re[De]||0)){lt=!0;break}X(ue),pe(ct);const Ne={...Le,...xe};_(Ne),S.current=Ne,T.current={...ct},Pe(ht),l(De=>De.map(xt=>({...xt,unitsPerPackage:ct[xt.productId]??xt.unitsPerPackage}))),!E.current&&Ae&&(s(" Cdigo actualizado."),setTimeout(()=>s(""),3e3)),!E.current&&lt&&(s(" Unidades x paquete actualizadas."),setTimeout(()=>s(""),3e3)),E.current=!1}catch{X(ue),pe(ct),_(Ae=>({...Le,...Ae})),T.current={...ct},Pe(ht),l(Ae=>Ae.map(Re=>({...Re,unitsPerPackage:ct[Re.productId]??Re.unitsPerPackage})))}},ye=>console.error(ye));return()=>se()},[]);const[I,_]=g.useState({}),S=g.useRef({}),E=g.useRef(!0),T=g.useRef({}),k=g.useRef({}),B=g.useRef(!0),[D,X]=g.useState({}),[me,pe]=g.useState({}),[he,ve]=g.useState({}),[ae,Pe]=g.useState({}),[ke,O]=g.useState("");g.useEffect(()=>{const ge=mt(Se,"inventory_candies"),q=Yt(ge),se=jd(q,ye=>{try{const ue={};ye.forEach(ct=>{var Ne,De,xt;const ht=ct.data(),xe=String(ht.productId||"").trim();if(!xe)return;const Ae=Number(ht.unitsPerPackage||ht.unitsPerPack||0)||0,Re=((De=(Ne=ht==null?void 0:ht.createdAt)==null?void 0:Ne.toMillis)==null?void 0:De.call(Ne))||((xt=ht==null?void 0:ht.createdAt)!=null&&xt.seconds?ht.createdAt.seconds*1e3:0)||0,lt=ue[xe];(!lt||Re>=lt.ts)&&(ue[xe]={val:Ae||0,ts:Re})});const Le={};for(const ct of Object.keys(ue))Le[ct]=ue[ct].val||0;ve(Le);try{const ct=k.current||{};let ht=!1;for(const xe of Object.keys(Le))if((Le[xe]||0)!==(ct[xe]||0)){ht=!0;break}k.current={...Le},!B.current&&ht&&(s(" Inventario: unidades por paquete actualizadas."),setTimeout(()=>s(""),3e3)),B.current=!1}catch{}l(ct=>ct.map(ht=>({...ht,unitsPerPackage:Le[ht.productId]??me[ht.productId]??ht.unitsPerPackage})))}catch(ue){console.error("inventory_candies snapshot error:",ue)}},ye=>console.error(ye));return()=>se()},[me]),g.useEffect(()=>{l(ge=>ge.map(q=>({...q,unitsPerPackage:he[q.productId]??me[q.productId]??q.unitsPerPackage})))},[me,he]);const G=g.useMemo(()=>{const ge=bit(c),q=String(d||"").trim(),se=String(ke||"").trim().toLowerCase(),ye=A.trim()===""?null:rW(A,NaN),ue=m.trim()===""?null:rW(m,NaN);return o.filter(Le=>{const ct=String(ae[Le.productId]||"").trim().toLowerCase();if(se)return ct===se;if(ge&&!`${Le.category} ${Le.productName}`.toLowerCase().includes(ge))return!1;if(q){const Re=String(Le.productId||""),lt=String(I[Le.productId]||"");if(!Re.includes(q)&&!lt.includes(q))return!1}const ht=x==="ISLA"?[Le.priceIsla]:x==="RIVAS"?[Le.priceRivas]:[Le.priceIsla,Le.priceRivas],xe=ye==null||!Number.isFinite(ye)?!0:ht.some(Re=>Re>=ye),Ae=ue==null||!Number.isFinite(ue)?!0:ht.some(Re=>Re<=ue);return xe&&Ae})},[o,c,A,m,x,I,ke,ae]),z=g.useMemo(()=>{const ge=new Map;for(const q of G){const se=(q.category||"Sin categora").trim()||"Sin categora",ye=ge.get(se)||[];ye.push(q),ge.set(se,ye)}return Array.from(ge.entries()).sort(([q],[se])=>q.localeCompare(se,"es"))},[G]),U=ge=>{j(q=>({...q,[ge]:!q[ge]}))},Y=()=>{u(""),h(""),p(""),v("ANY"),O("")},[ee,M]=g.useState(!1),[H,te]=g.useState("search"),[Ce,V]=g.useState(null),[We,ie]=g.useState(0),[J,Oe]=g.useState(0),[fe,_e]=g.useState(null),[Ue,Ye]=g.useState(""),[At,yt]=g.useState(""),bt=g.useMemo(()=>c.trim()!==""||A.trim()!==""||m.trim()!==""||x!=="ANY"||ke.trim()!=="",[c,A,m,x,ke]),[Nt,jt]=g.useState(!1);g.useEffect(()=>{var se;const ge=window.matchMedia("(max-width: 900px)"),q=()=>jt(ge.matches);return q(),(se=ge.addEventListener)==null||se.call(ge,"change",q),()=>{var ye;return(ye=ge.removeEventListener)==null?void 0:ye.call(ge,"change",q)}},[]);const[St,Ve]=g.useState(!1);g.useEffect(()=>{const ge=xj(_c,async q=>{if(!q)return Ve(!1);try{const se=await zs(Gt(Se,"users",q.uid)),ye=se.exists()?se.data():null,ue=ye?Array.isArray(ye.roles)?ye.roles:ye.role?[ye.role]:[]:[];Ve(En(ue,"admin"))}catch(se){console.error(se),Ve(!1)}});return()=>ge()},[]);const Te=async ge=>{var q;if(H==="search"){f(ge);const se=Object.keys(I).find(Le=>(I[Le]||"")===ge),ye=(q=o.find(Le=>String(Le.productId||"").includes(ge)))==null?void 0:q.productId,ue=se||ye||null;ue&&(_e(ue),b(!1)),M(!1);return}if(H==="edit"&&Ce)try{const se=mt(Se,"products_candies"),ye=Gt(se,Ce);await kn(ye,{barcode:ge}),_(ue=>({...ue,[Ce]:ge})),Ye(ge),M(!1),te("search"),s(" Producto guardado.")}catch(se){console.error(se),s(" Error guardando el cdigo.")}},qe=async ge=>{l(q=>q.map(se=>se.productId===ge?{...se,priceIsla:Number(We||0),priceRivas:Number(J||0)}:se));try{const q=String(At||"").trim();await kn(Gt(mt(Se,"products_candies"),ge),{packaging:q||""}),Pe(se=>({...se,[ge]:q||""}))}catch(q){console.error("Error updating packaging:",q),s(" Error guardando empaque.")}V(null),s(Nt?" Producto guardado.":"")};return i.jsxs("div",{className:"max-w-7xl mx-auto",children:[i.jsxs("div",{className:"flex items-center justify-between mb-3",children:[i.jsx("h2",{className:"text-2xl font-bold",children:"Precio Ventas"}),i.jsx("div",{className:"flex gap-2",children:i.jsx(Fc,{onClick:e,loading:r})})]}),i.jsxs("div",{className:"md:hidden mb-3",children:[i.jsxs("button",{type:"button",onClick:()=>b(ge=>!ge),className:`w-full px-3 py-3 rounded-xl border shadow-sm flex items-center justify-between ${bt?"bg-yellow-50 border-yellow-200":"bg-white"}`,children:[i.jsxs("div",{className:"text-left",children:[i.jsx("div",{className:"font-semibold",children:"Filtros"}),i.jsxs("div",{className:"text-xs text-gray-600",children:[bt?"Activos":"Ninguno","  ","Mostrando ",i.jsx("b",{children:G.length})]})]}),i.jsx("div",{className:"text-sm font-semibold",children:y?"Cerrar":"Abrir"})]}),y&&i.jsx("div",{className:"mt-2 bg-white border rounded-xl shadow-sm p-3 text-sm",children:i.jsxs("div",{className:"grid grid-cols-1 gap-3",children:[i.jsxs("div",{children:[i.jsx("label",{className:"block font-semibold",children:"Producto"}),i.jsx("input",{className:"w-full border rounded px-2 py-2",value:c,onChange:ge=>u(ge.target.value),placeholder:"Ej: Conitos, Gomitas"})]}),i.jsxs("div",{children:[i.jsx("label",{className:"block font-semibold",children:"Tipo empaque"}),i.jsxs("select",{className:"w-full border rounded px-2 py-2",value:ke,onChange:ge=>O(ge.target.value),children:[i.jsx("option",{value:"",children:"Todos"}),i.jsx("option",{value:"Tarro",children:"Tarro"}),i.jsx("option",{value:"Bolsa",children:"Bolsa"}),i.jsx("option",{value:"Ristra",children:"Ristra"}),i.jsx("option",{value:"Caja",children:"Caja"}),i.jsx("option",{value:"Vaso",children:"Vaso"}),i.jsx("option",{value:"Pana",children:"Pana"})]})]}),i.jsxs("div",{children:[i.jsx("label",{className:"block font-semibold",children:"Buscar por EAN"}),i.jsxs("div",{className:"flex gap-2",children:[i.jsx("input",{className:"flex-1 border rounded px-2 py-2",value:d,onChange:ge=>f(ge.target.value),placeholder:"Cdigo EAN"}),i.jsx("button",{type:"button",className:"px-3 py-2 rounded bg-gray-200 hover:bg-gray-300",onClick:()=>{te("search"),M(!0)},children:"Escanear"})]})]}),i.jsxs("div",{className:"flex gap-2",children:[i.jsx("button",{type:"button",className:"flex-1 px-3 py-2 rounded bg-gray-200 hover:bg-gray-300",onClick:()=>{Y(),f("")},children:"Limpiar filtros"}),i.jsx("button",{type:"button",className:"flex-1 px-3 py-2 rounded bg-indigo-600 text-white hover:bg-indigo-700",onClick:()=>b(!1),children:"Aplicar"})]})]})})]}),i.jsxs("div",{className:"hidden md:block bg-white p-3 rounded shadow border mb-3 text-sm",children:[i.jsxs("div",{className:"grid grid-cols-6 gap-3 items-end",children:[i.jsxs("div",{className:"col-span-2",children:[i.jsx("label",{className:"block font-semibold",children:"Filtrar por producto"}),i.jsx("input",{className:"w-full border rounded px-2 py-1",value:c,onChange:ge=>u(ge.target.value),placeholder:"Ej: Conitos, Gomitas"})]}),i.jsxs("div",{children:[i.jsx("label",{className:"block font-semibold",children:"Tipo empaque"}),i.jsxs("select",{className:"w-full border rounded px-2 py-1",value:ke,onChange:ge=>O(ge.target.value),children:[i.jsx("option",{value:"",children:"Todos"}),i.jsx("option",{value:"Tarro",children:"Tarro"}),i.jsx("option",{value:"Bolsa",children:"Bolsa"}),i.jsx("option",{value:"Ristra",children:"Ristra"}),i.jsx("option",{value:"Caja",children:"Caja"}),i.jsx("option",{value:"Vaso",children:"Vaso"}),i.jsx("option",{value:"Pana",children:"Pana"})]})]}),i.jsxs("div",{children:[i.jsx("label",{className:"block font-semibold",children:"Precio mn"}),i.jsx("input",{className:"w-full border rounded px-2 py-1 text-right",inputMode:"decimal",value:A,onChange:ge=>h(ge.target.value),placeholder:"0"})]}),i.jsxs("div",{children:[i.jsx("label",{className:"block font-semibold",children:"Precio mx"}),i.jsx("input",{className:"w-full border rounded px-2 py-1 text-right",inputMode:"decimal",value:m,onChange:ge=>p(ge.target.value),placeholder:"0"})]}),i.jsx("div",{className:"text-right",children:i.jsx("button",{className:"px-3 py-2 rounded bg-gray-200 hover:bg-gray-300",type:"button",onClick:Y,children:"Limpiar"})})]}),i.jsxs("div",{className:"mt-2 flex items-center justify-between",children:[i.jsxs("div",{className:"text-xs text-gray-600",children:["Fuente: ",i.jsx("b",{children:"candy_main_orders.items[]"}),"  Muestra el"," ",i.jsx("b",{children:"ltimo precio"})," registrado por producto."]}),i.jsxs("div",{className:"text-sm",children:[i.jsx("span",{className:"text-gray-600",children:"Mostrando:"})," ",i.jsx("b",{children:G.length})]})]})]}),i.jsxs("div",{className:"md:hidden",children:[r?i.jsx("div",{className:"bg-white rounded-xl border shadow p-4 text-center",children:"Cargando"}):G.length===0?i.jsx("div",{className:"bg-white rounded-xl border shadow p-4 text-center",children:"Sin resultados."}):i.jsx("div",{className:"space-y-2",children:z.map(([ge,q])=>{const se=!!w[ge];return i.jsxs("div",{className:"bg-white border rounded-2xl shadow-sm overflow-hidden",children:[i.jsxs("button",{type:"button",className:"w-full px-3 py-3 flex items-center justify-between text-left",onClick:()=>U(ge),children:[i.jsxs("div",{className:"min-w-0",children:[i.jsx("div",{className:"text-[13px] font-semibold truncate",children:ge}),i.jsxs("div",{className:"text-[10px] text-gray-600 truncate",children:[q.length," ",q.length===1?"producto":"productos"]})]}),i.jsx("div",{className:"text-sm font-semibold",children:se?"":"+"})]}),se&&i.jsx("div",{className:"px-3 pb-3 border-t space-y-2",children:q.map(ye=>{const ue=fe===ye.productId,Le=Ce===ye.productId,ct=D[ye.productId]||0,ht=ye.priceIsla-ct,xe=ht*.25;return i.jsxs("div",{className:"bg-white border rounded-xl overflow-hidden",children:[i.jsxs("button",{type:"button",className:"w-full px-3 py-3 flex items-center justify-between text-left",onClick:()=>_e(Ae=>Ae===ye.productId?null:ye.productId),children:[i.jsxs("div",{className:"min-w-0",children:[i.jsx("div",{className:"text-[13px] font-semibold truncate",children:ye.productName}),i.jsx("div",{className:"text-[10px] text-gray-600 truncate",children:ye.category})]}),i.jsxs("div",{className:"text-right",children:[i.jsx("div",{className:"text-[10px] text-gray-600",children:"P. Paquete"}),i.jsx("div",{className:"text-sm font-semibold tabular-nums",children:rp(ye.priceIsla)})]})]}),ue&&i.jsx("div",{className:"px-3 pb-3 border-t",children:i.jsxs("div",{className:"pt-3 space-y-2 text-sm",children:[i.jsxs("div",{className:"grid grid-cols-2 gap-2",children:[i.jsxs("div",{children:[i.jsx("div",{className:"text-[10px] text-gray-600",children:"Categora"}),i.jsx("div",{className:"text-sm",children:ye.category}),i.jsxs("div",{className:"mt-2",children:[i.jsx("div",{className:"text-[10px] text-gray-600",children:"Unidades x paquete"}),i.jsx("div",{className:"text-sm",children:String(ye.unitsPerPackage||1)})]}),i.jsxs("div",{className:"mt-2",children:[i.jsx("div",{className:"text-[10px] text-gray-600",children:"Precio Unidad"}),i.jsx("div",{className:"text-sm tabular-nums",children:rp(ye.priceIsla/(ye.unitsPerPackage||1))})]}),i.jsxs("div",{className:"mt-2",children:[i.jsx("div",{className:"text-[10px] text-gray-600",children:"Precio Paquete"}),Le?i.jsx("input",{className:"w-full border rounded px-2 py-2 text-right",inputMode:"decimal",value:String(We),onChange:Ae=>ie(Number(Ae.target.value||0))}):i.jsx("div",{className:"text-sm font-semibold tabular-nums",children:rp(ye.priceIsla)})]})]}),i.jsxs("div",{children:[St&&i.jsxs("div",{children:[i.jsx("div",{className:"text-[10px] text-gray-600",children:"Utilidad Bruta"}),i.jsx("div",{className:"text-sm tabular-nums",children:rp(ht)})]}),i.jsxs("div",{className:"mt-1",children:[i.jsx("div",{className:"text-[10px] text-gray-600",children:"Comisin"}),i.jsx("div",{className:"text-sm tabular-nums",children:rp(xe)})]}),i.jsxs("div",{className:"mt-2",children:[i.jsx("div",{className:"text-[10px] text-gray-600",children:"Cdigo EAN"}),Le?i.jsxs("div",{className:"flex gap-2",children:[i.jsx("input",{className:"flex-1 border rounded px-2 py-2",value:Ue,readOnly:!0}),i.jsx("button",{className:"px-3 py-2 rounded bg-blue-600 text-white",onClick:()=>{te("edit"),M(!0)},type:"button",children:"Escanear"})]}):i.jsx("div",{children:I[ye.productId]||""})]}),i.jsxs("div",{className:"mt-2",children:[i.jsx("div",{className:"text-[10px] text-gray-600",children:"Tipo Empaque"}),Le?i.jsxs("select",{className:"w-full border rounded px-2 py-2",value:At,onChange:Ae=>yt(Ae.target.value),children:[i.jsx("option",{value:"",children:""}),i.jsx("option",{value:"Tarro",children:"Tarro"}),i.jsx("option",{value:"Bolsa",children:"Bolsa"}),i.jsx("option",{value:"Ristra",children:"Ristra"}),i.jsx("option",{value:"Caja",children:"Caja"}),i.jsx("option",{value:"Vaso",children:"Vaso"}),i.jsx("option",{value:"Pana",children:"Pana"})]}):i.jsx("div",{className:"text-sm",children:ae[ye.productId]||""})]})]})]}),i.jsx("div",{className:"flex gap-2",children:Le?i.jsxs(i.Fragment,{children:[i.jsx("button",{className:"px-3 py-2 rounded bg-green-600 text-white",onClick:()=>{qe(ye.productId),_e(null)},type:"button",children:"Guardar"}),i.jsx("button",{className:"px-3 py-2 rounded bg-gray-800 text-white",onClick:()=>{te("edit"),M(!0)},type:"button",children:"Escanear"}),i.jsx("button",{className:"px-3 py-2 rounded bg-gray-200",onClick:()=>V(null),type:"button",children:"Cancelar"})]}):St&&i.jsxs(i.Fragment,{children:[i.jsx("button",{className:"px-3 py-2 rounded bg-yellow-400",onClick:()=>{V(ye.productId),ie(ye.priceIsla||0),Oe(ye.priceRivas||0),Ye(I[ye.productId]||""),yt(ae[ye.productId]||"")},type:"button",children:"Editar"}),i.jsx("button",{className:"px-3 py-2 rounded bg-red-600 text-white",onClick:()=>l(Ae=>Ae.filter(Re=>Re.productId!==ye.productId)),type:"button",children:"Borrar"})]})})]})})]},ye.productId)})})]},ge)})}),a&&i.jsx("p",{className:"mt-2 text-sm",children:a})]}),i.jsx(Nit,{open:ee,onClose:()=>M(!1),onDetected:Te}),i.jsx("div",{className:"hidden md:block bg-white rounded shadow border w-full overflow-x-auto",children:i.jsxs("table",{className:"min-w-[900px] w-full text-sm",children:[i.jsx("thead",{className:"bg-gray-100",children:i.jsxs("tr",{className:"whitespace-nowrap",children:[i.jsx("th",{className:"p-2 border text-left",children:"Categora"}),i.jsx("th",{className:"p-2 border text-left",children:"Producto"}),i.jsx("th",{className:"p-2 border text-left",children:"Empaque"}),i.jsx("th",{className:"p-2 border text-right",children:"Precio Isla"}),i.jsx("th",{className:"p-2 border text-right",children:"Precio Rivas"}),i.jsx("th",{className:"p-2 border text-right",children:"Acciones"})]})}),i.jsx("tbody",{children:r?i.jsx("tr",{children:i.jsx("td",{className:"p-4 text-center",colSpan:6,children:"Cargando"})}):G.length===0?i.jsx("tr",{children:i.jsx("td",{className:"p-4 text-center",colSpan:6,children:"Sin resultados."})}):G.map(ge=>i.jsxs("tr",{children:[i.jsx("td",{className:"p-2 border",children:ge.category}),i.jsx("td",{className:"p-2 border",children:ge.productName}),i.jsx("td",{className:"p-2 border",children:Ce===ge.productId?i.jsxs("select",{className:"w-full border rounded px-2 py-1",value:At,onChange:q=>yt(q.target.value),children:[i.jsx("option",{value:"",children:""}),i.jsx("option",{value:"Tarro",children:"Tarro"}),i.jsx("option",{value:"Bolsa",children:"Bolsa"}),i.jsx("option",{value:"Ristra",children:"Ristra"}),i.jsx("option",{value:"Caja",children:"Caja"}),i.jsx("option",{value:"Vaso",children:"Vaso"}),i.jsx("option",{value:"Pana",children:"Pana"})]}):ae[ge.productId]||""}),i.jsx("td",{className:"p-2 border text-right tabular-nums",children:Ce===ge.productId?i.jsx("input",{className:"w-24 border rounded px-2 py-1 text-right",inputMode:"decimal",value:String(We),onChange:q=>ie(Number(q.target.value||0))}):rp(ge.priceIsla)}),i.jsx("td",{className:"p-2 border text-right tabular-nums",children:Ce===ge.productId?i.jsx("input",{className:"w-24 border rounded px-2 py-1 text-right",inputMode:"decimal",value:String(J),onChange:q=>Oe(Number(q.target.value||0))}):rp(ge.priceRivas)}),i.jsx("td",{className:"p-2 border text-right",children:Ce===ge.productId?i.jsxs("div",{className:"flex items-center justify-end gap-2",children:[i.jsx("button",{className:"px-2 py-1 rounded bg-green-600 text-white text-sm",onClick:()=>qe(ge.productId),type:"button",children:"Guardar"}),i.jsx("button",{className:"px-2 py-1 rounded bg-gray-200 text-sm",onClick:()=>V(null),type:"button",children:"Cancelar"})]}):St&&i.jsxs("div",{className:"flex items-center justify-end gap-2",children:[i.jsx("button",{className:"px-2 py-1 rounded bg-yellow-400 text-sm",onClick:()=>{V(ge.productId),ie(ge.priceIsla||0),Oe(ge.priceRivas||0),Ye(I[ge.productId]||"")},type:"button",children:"Editar"}),i.jsx("button",{className:"px-2 py-1 rounded bg-blue-600 text-white text-sm",onClick:()=>{V(ge.productId),te("edit"),M(!0)},type:"button",children:"Escanear"}),i.jsx("button",{className:"px-2 py-1 rounded bg-red-600 text-white text-sm",onClick:()=>l(q=>q.filter(se=>se.productId!==ge.productId)),type:"button",children:"Borrar"})]})})]},ge.productId))})]})}),a&&i.jsx("p",{className:"hidden md:block mt-2 text-sm",children:a})]})}const D_=["Cuaderno","Block","Lapicero","Lpiz","Tajador","Borrador","Corrector","Cartucheras"],nW=["Lider","Scribe","Smarty","Pointer","Paper Mate","Otro"],kB=["Hombre","Mujer","Variado","NA"],_it=["Universitario Cocido","5 Materia","2 Materia","Doble Raya","Rayado","Cuadriculado","Subrayado","Sublineado","Liso"],ql=t=>`C$ ${(Number(t)||0).toFixed(2)}`;function vo(t){return String(t??"").trim().replace(/\s+/g," ").toLowerCase()}function vc(t,e=0){const r=Number(String(t??"").replace(",","."));return Number.isFinite(r)?r:e}function EE(t,e=1){const r=Math.floor(vc(t,e));return r>0?r:e}function sde(t){return!Number.isFinite(t)||t<=0?0:t}function FB(t){const e=String(t??"").trim();return e||""}function ef(t,e){const r=Object.keys(t||{}),n=new Map;r.forEach(a=>n.set(vo(a),a));for(const a of e){const s=n.get(vo(a));if(s!=null)return t[s]}}function Eit(t){return Object.values(t||{}).every(r=>vo(r)==="")}function Nx(t){const e=Math.max(0,vc(t.providerPrice,0)),r=Math.max(1,EE(t.quantity,1)),n=sde(vc(t.margin,0)),a=Math.max(0,vc(t.salePrice,0)),s=n>0?e/n:e,o=a>0?a:s,l=o>0?e/o:n,c=e*r,u=(o-e)*r,d=o*r;return{providerPrice:e,quantity:r,margin:l,salePrice:o,facturado:c,gain:u,totalEsperado:d}}function Sit(){const{refreshKey:t,refresh:e}=Oc(),[r,n]=g.useState(!0),[a,s]=g.useState(""),[o,l]=g.useState([]),[c,u]=g.useState(!1),[d,f]=g.useState(""),[A,h]=g.useState(""),[m,p]=g.useState(""),[x,v]=g.useState(""),[y,b]=g.useState(!1),[w,j]=g.useState(null),[I,_]=g.useState(!1),[S,E]=g.useState(null),[T,k]=g.useState(D_[0]),[B,D]=g.useState(nW[0]),[X,me]=g.useState(""),[pe,he]=g.useState(0),[ve,ae]=g.useState(1),[Pe,ke]=g.useState(.7),[O,G]=g.useState(0),[z,U]=g.useState("NA"),[Y,ee]=g.useState(""),[M,H]=g.useState(""),[te,Ce]=g.useState(!1),[V,We]=g.useState(""),[ie,J]=g.useState([]),[Oe,fe]=g.useState([]),[_e,Ue]=g.useState(!1);g.useEffect(()=>{(async()=>{n(!0),s("");try{const xe=await kt(Yt(mt(Se,"products_stationery"))),Ae=[];xe.forEach(Re=>{const lt=Re.data();Ae.push({id:Re.id,category:lt.category||"",brand:lt.brand||"",name:lt.name||"",providerPrice:Number(lt.providerPrice||0),quantity:Number(lt.quantity||1),facturado:Number(lt.facturado||0),margin:Number(lt.margin||0),salePrice:Number(lt.salePrice||0),gain:Number(lt.gain||0),gender:lt.gender||"NA",typeProduct:lt.typeProduct||"",code:lt.code??"",createdAt:lt.createdAt,updatedAt:lt.updatedAt,totalEsperado:Number(lt.totalEsperado||Number(lt.salePrice||0)*Number(lt.quantity||1))})}),l(Ae)}catch(xe){console.error(xe),s(" Error cargando productos (papelera).")}finally{n(!1)}})()},[t]);const Ye=g.useMemo(()=>{const xe=vo(d),Ae=vo(A),Re=m.trim()===""?null:vc(m,NaN),lt=x.trim()===""?null:vc(x,NaN);return o.filter(Ne=>!(xe&&!`${Ne.category} ${Ne.name}`.toLowerCase().includes(xe)||Ae&&!String(Ne.code||"").toLowerCase().includes(Ae)||Re!=null&&Number.isFinite(Re)&&Ne.salePrice<Re||lt!=null&&Number.isFinite(lt)&&Ne.salePrice>lt))},[o,d,A,m,x]),At=g.useMemo(()=>d.trim()!==""||A.trim()!==""||m.trim()!==""||x.trim()!=="",[d,A,m,x]),yt=g.useMemo(()=>{const xe=o.length,Ae=o.reduce((Ne,De)=>Ne+(De.facturado||0),0),Re=o.reduce((Ne,De)=>Ne+Number(De.totalEsperado||Number(De.salePrice||0)*Number(De.quantity||1)),0),lt=o.reduce((Ne,De)=>Ne+(De.gain||0),0);return{count:xe,sumFact:Ae,sumEsperado:Re,sumGain:lt}},[o]),bt=()=>{k(D_[0]),me(""),he(0),ae(1),ke(.7),G(0),U("NA"),ee(""),H(""),j(null)},Nt=()=>{bt(),b(!0)},jt=xe=>{j(xe),k(xe.category||D_[0]),D(xe.brand||nW[0]),me(xe.name||""),he(Number(xe.providerPrice||0)),ae(Number(xe.quantity||1)),ke(Number(xe.margin||.7)),G(Number(xe.salePrice||0)),U(xe.gender||"NA"),ee(xe.typeProduct||""),H(String(xe.code||"")),b(!0)},St=async()=>{s("");const xe=String(T||"").trim(),Ae=String(B||"").trim(),Re=String(X||"").trim(),{providerPrice:lt,quantity:Ne,margin:De,salePrice:xt,facturado:_t,totalEsperado:Et,gain:Mt}=Nx({providerPrice:pe,quantity:ve,margin:Pe,salePrice:O});if(!xe)return s(" Categora requerida.");if(!Re)return s(" Producto requerido.");if(lt<=0)return s(" Precio proveedor debe ser > 0.");if(Ne<=0)return s(" Cantidad debe ser > 0.");if(xt<=0)return s(" Precio venta invlido.");if(De<=0)return s(" Margen invlido.");const nt={category:xe,brand:Ae,name:Re,providerPrice:lt,quantity:Ne,facturado:_t,margin:De,salePrice:xt,gain:Mt,gender:z||"NA",typeProduct:String(Y||"").trim(),code:FB(M)||null,updatedAt:Ar.now(),totalEsperado:Et};try{n(!0),w?(await kn(Gt(Se,"products_stationery",w.id),nt),s(" Producto actualizado.")):(await Jn(mt(Se,"products_stationery"),{...nt,createdAt:Ar.now()}),s(" Producto creado.")),b(!1),j(null),bt(),e()}catch(Ee){console.error(Ee),s(" Error guardando producto.")}finally{n(!1)}},Ve=async()=>{var xe;try{const Ae=new $2,Re=await $2.listVideoInputDevices(),lt=(xe=Re[Re.length-1])==null?void 0:xe.deviceId;if(!lt)return null;const Ne=document.createElement("div");Ne.className="fixed inset-0 z-[9999] bg-black/70 flex items-center justify-center p-3";const De=document.createElement("div");De.className="bg-white w-full max-w-md rounded-xl overflow-hidden shadow-xl";const xt=document.createElement("div");xt.className="p-3 flex items-center justify-between border-b",xt.innerHTML="<div style='font-weight:700'>Escanear cdigo</div>";const _t=document.createElement("button");_t.textContent="Cerrar",_t.className="px-3 py-1 rounded bg-gray-200";const Et=document.createElement("div");Et.className="p-3";const Mt=document.createElement("video");return Mt.style.width="100%",Mt.style.borderRadius="12px",Et.appendChild(Mt),xt.appendChild(_t),De.appendChild(xt),De.appendChild(Et),Ne.appendChild(De),document.body.appendChild(Ne),await new Promise(async nt=>{const Ee=()=>{Ne.remove(),nt(null)};_t.onclick=Ee;const we=await Ae.decodeFromVideoDevice(lt,Mt,oe=>{if(oe){const Fe=oe.getText();try{we.stop()}catch{}Ne.remove(),nt(Fe)}})})}catch(Ae){return console.error(Ae),null}},Te=async()=>{const xe=await Ve();xe&&H(xe)},qe=async()=>{const xe=await Ve();if(!xe)return;const Ae=o.find(Re=>String(Re.code||"")===String(xe));Ae?(E(Ae),_(!0),s("")):(E(null),_(!0),s(""))},ge=(xe,Ae)=>{const Re=xe.map(De=>({Id:De.id,Categoria:De.category,brand:De.brand,Producto:De.name,PrecioProveedor:De.providerPrice,Cantidad:De.quantity,Facturado:De.facturado,TotalEsperado:De.totalEsperado||De.salePrice*De.quantity,Margen:De.margin,PrecioVenta:De.salePrice,Ganancia:De.gain,Genero:De.gender,TipoProducto:De.typeProduct,Codigo:De.code||""})),lt=Qa.json_to_sheet(Re),Ne=Qa.book_new();Qa.book_append_sheet(Ne,lt,"Productos"),V2(Ne,Ae)},q=()=>{const xe=[{Id:"",Categoria:"Cuaderno",brand:"Lider",Producto:"Cuaderno Norma 100 hojas",PrecioProveedor:120,Cantidad:12,Margen:.7,PrecioVenta:"",Genero:"NA",TipoProducto:"Universitario Cocido",Codigo:"1234567890123"}],Ae=Qa.json_to_sheet(xe),Re=Qa.book_new();Qa.book_append_sheet(Re,Ae,"Productos");const lt=mP(Re,{type:"array",bookType:"xlsx"}),Ne=new Blob([lt],{type:"application/vnd.openxmlformats-officedocument.spreadsheetml.sheet"}),De=URL.createObjectURL(Ne),xt=document.createElement("a");xt.href=De,xt.download="template_products_stationery.xlsx",document.body.appendChild(xt),xt.click(),xt.remove(),URL.revokeObjectURL(De)},se=xe=>{const Ae=[],Re=[];xe.forEach((Ne,De)=>{if(!Ne||typeof Ne!="object"||Eit(Ne))return;const xt=De+2,_t=String(ef(Ne,["Id","ID","docId","DocId"])??"").trim(),Et=String(ef(Ne,["Categoria","Categora","Category","category"])??"").trim(),Mt=String(ef(Ne,["Brand","Marca","brand","marca"])??"").trim(),nt=String(ef(Ne,["Producto","Product","Nombre","Name","name"])??"").trim(),Ee=ef(Ne,["PrecioProveedor","Precio Prov","Precio Prov.","ProviderPrice","Costo","providerPrice"]),we=ef(Ne,["Cantidad","Qty","quantity","cantidad"]),oe=ef(Ne,["Margen","Margin","margen","margin"]),Fe=ef(Ne,["PrecioVenta","Precio Venta","SalePrice","salePrice"]),ce=String(ef(Ne,["Genero","Gnero","Gender","gender"])??"NA").trim(),Me=String(ef(Ne,["TipoProducto","Tipo","TypeProduct","typeProduct","Tipo producto"])??"").trim(),Ke=ef(Ne,["Codigo","Cdigo","Code","Barcode","code"]),P=FB(Ke),R=Math.max(0,vc(Ee,0)),L=Math.max(1,EE(we,1)),K=sde(vc(oe,0)),re=Math.max(0,vc(Fe,0));Et||Re.push(`Fila ${xt}: falta Categoria.`),nt||Re.push(`Fila ${xt}: falta Producto.`),R<=0&&Re.push(`Fila ${xt}: PrecioProveedor debe ser > 0.`),L<=0&&Re.push(`Fila ${xt}: Cantidad debe ser > 0.`),K<=0&&re<=0&&Re.push(`Fila ${xt}: Margen debe ser > 0 (o enviar PrecioVenta).`);const Ge=kB.includes(ce||"NA")?ce:"NA";Et&&nt&&R>0&&L>0&&(K>0||re>0)&&Ae.push({id:_t||void 0,category:Et,brand:Mt,name:nt,providerPrice:R,quantity:L,margin:K>0?K:.7,salePrice:re>0?re:void 0,gender:Ge,typeProduct:Me,code:P||"",_raw:Ne})});const lt=new Map;for(const Ne of Ae){const De=Ne.id?`id::${Ne.id}`:`${vo(Ne.category)}::${vo(Ne.name)}`;lt.set(De,Ne)}return{rows:Array.from(lt.values()),errors:Re}},ye=async xe=>{if(s(""),fe([]),J([]),We((xe==null?void 0:xe.name)||""),!xe)return;const Ae=xe.name.toLowerCase(),Re=Ae.endsWith(".xlsx")||Ae.endsWith(".xls"),lt=Ae.endsWith(".csv");if(!Re&&!lt){fe(["Solo se permiten archivos .xlsx, .xls o .csv"]);return}try{Ue(!0);const Ne=new FileReader,De=await new Promise((we,oe)=>{Ne.onerror=()=>oe(new Error("No se pudo leer el archivo.")),Ne.onload=()=>we(Ne.result),Ne.readAsArrayBuffer(xe)}),xt=Vv(new Uint8Array(De),{type:"array"}),_t=xt.SheetNames[0],Et=xt.Sheets[_t],Mt=Qa.sheet_to_json(Et,{defval:""}),{rows:nt,errors:Ee}=se(Mt);J(nt),fe(Ee),nt.length===0&&Ee.length===0&&fe(["No se encontraron filas vlidas para importar."])}catch(Ne){console.error(Ne),fe(["Error leyendo el archivo. Revis que no est corrupto."])}finally{Ue(!1)}},ue=(xe,Ae)=>{J(Re=>{const lt=[...Re],Ne=lt[xe];return Ne?(lt[xe]={...Ne,...Ae},lt):Re})},Le=g.useMemo(()=>{const xe=new Set(o.map(Ne=>Ne.id)),Ae=new Set(o.map(Ne=>`${vo(Ne.category)}::${vo(Ne.name)}`));let Re=0,lt=0;for(const Ne of ie){if(Ne.id&&xe.has(Ne.id)){Re+=1;continue}const De=`${vo(Ne.category)}::${vo(Ne.name)}`;Ae.has(De)?Re+=1:lt+=1}return{total:ie.length,willCreate:lt,willUpdate:Re}},[ie,o]),ct=async()=>{if(s(""),Oe.length>0){s(" Correg los errores antes de importar.");return}if(ie.length===0){s(" No hay filas para importar.");return}try{Ue(!0);const xe={},Ae={};o.forEach(De=>{xe[De.id]=De,Ae[`${vo(De.category)}::${vo(De.name)}`]=De});const Re=tu(Se);let lt=0,Ne=0;for(const De of ie){const xt=String(De.category||"").trim(),_t=String(De.name||"").trim(),{providerPrice:Et,quantity:Mt,margin:nt,salePrice:Ee,facturado:we,totalEsperado:oe,gain:Fe}=Nx({providerPrice:De.providerPrice,quantity:De.quantity,margin:De.margin,salePrice:De.salePrice});if(!xt||!_t||Et<=0||Mt<=0||Ee<=0||nt<=0)continue;const ce={category:xt,name:_t,providerPrice:Et,quantity:Mt,facturado:we,totalEsperado:oe,margin:nt,salePrice:Ee,gain:Fe,gender:De.gender||"NA",typeProduct:String(De.typeProduct||"").trim(),code:FB(De.code)||null,updatedAt:Ar.now()};let Me;if(De.id&&xe[De.id])Me=xe[De.id];else{const Ke=`${vo(xt)}::${vo(_t)}`;Me=Ae[Ke]}if(Me)Re.update(Gt(Se,"products_stationery",Me.id),ce),Ne+=1;else{const Ke=Gt(mt(Se,"products_stationery"));Re.set(Ke,{...ce,createdAt:Ar.now()}),lt+=1}}await Re.commit(),s(` Importacin lista. Creados: ${lt}, Actualizados: ${Ne}`),Ce(!1),J([]),fe([]),We(""),e()}catch(xe){console.error(xe),s(" Error importando productos a Firestore.")}finally{Ue(!1)}},ht=()=>{f(""),h(""),p(""),v("")};return i.jsxs("div",{className:"max-w-7xl mx-auto",children:[i.jsxs("div",{className:"flex items-center justify-between mb-3",children:[i.jsx("h2",{className:"text-2xl font-bold",children:"Papelera"}),i.jsxs("div",{className:"flex gap-2 flex-wrap justify-end",children:[i.jsx("button",{className:"px-3 py-2 rounded bg-gray-900 text-white hover:bg-black",onClick:qe,type:"button",children:"Escanear"}),i.jsx("button",{className:"px-3 py-2 rounded bg-green-600 text-white hover:bg-green-700",onClick:Nt,type:"button",children:"+ Nuevo"}),i.jsx("button",{className:"px-3 py-2 rounded bg-indigo-600 text-white hover:bg-indigo-700",onClick:()=>{Ce(!0),J([]),fe([]),We("")},type:"button",children:"Importar (.xlsx)"}),i.jsx("button",{className:"px-3 py-2 rounded bg-gray-200 hover:bg-gray-300",onClick:()=>ge(o,"products_stationery_todo.xlsx"),type:"button",children:"Exportar (todo)"}),i.jsx("button",{className:"px-3 py-2 rounded bg-gray-200 hover:bg-gray-300",onClick:()=>ge(Ye,"products_stationery_filtrado.xlsx"),type:"button",children:"Exportar (filtrado)"}),i.jsx(Fc,{onClick:e,loading:r||_e})]})]}),i.jsxs("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-3 mb-4",children:[i.jsx(R_,{label:"Productos",value:yt.count}),i.jsx(R_,{label:"Facturado",value:ql(yt.sumFact)}),i.jsx(R_,{label:"Esperado",value:ql(yt.sumEsperado)}),i.jsx(R_,{label:"Ganancia",value:ql(yt.sumGain)})]}),i.jsxs("div",{className:"mb-3",children:[i.jsxs("button",{className:`w-full md:w-auto px-3 py-2 rounded border bg-white hover:bg-gray-50 ${At?"border-yellow-300 bg-yellow-50":""}`,type:"button",onClick:()=>u(xe=>!xe),children:[c?"Cerrar filtros":"Abrir filtros"," ",At?"(activos)":""]}),c&&i.jsxs("div",{className:"mt-2 bg-white border rounded-xl shadow-sm p-3 text-sm",children:[i.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-3 items-end",children:[i.jsxs("div",{children:[i.jsx("label",{className:"block font-semibold",children:"Producto"}),i.jsx("input",{className:"w-full border rounded px-2 py-2",value:d,onChange:xe=>f(xe.target.value),placeholder:"Ej: Cuaderno Norma"})]}),i.jsxs("div",{children:[i.jsx("label",{className:"block font-semibold",children:"Cdigo"}),i.jsx("input",{className:"w-full border rounded px-2 py-2",value:A,onChange:xe=>h(xe.target.value),placeholder:"Barcode"})]}),i.jsxs("div",{children:[i.jsx("label",{className:"block font-semibold",children:"Precio venta mn"}),i.jsx("input",{className:"w-full border rounded px-2 py-2 text-right",inputMode:"decimal",value:m,onChange:xe=>p(xe.target.value),placeholder:"0"})]}),i.jsxs("div",{children:[i.jsx("label",{className:"block font-semibold",children:"Precio venta mx"}),i.jsx("input",{className:"w-full border rounded px-2 py-2 text-right",inputMode:"decimal",value:x,onChange:xe=>v(xe.target.value),placeholder:"0"})]}),i.jsxs("div",{className:"md:col-span-4 flex gap-2 justify-end",children:[i.jsx("button",{className:"px-3 py-2 rounded bg-gray-200 hover:bg-gray-300",type:"button",onClick:ht,children:"Limpiar"}),i.jsx("button",{className:"px-3 py-2 rounded bg-indigo-600 text-white hover:bg-indigo-700",type:"button",onClick:()=>u(!1),children:"Aplicar"})]})]}),i.jsxs("div",{className:"mt-2 flex items-center justify-between text-xs text-gray-600",children:[i.jsxs("div",{children:["Mostrando: ",i.jsx("b",{children:Ye.length})]}),i.jsxs("div",{children:["Coleccin: ",i.jsx("b",{children:"products_stationery"})]})]})]})]}),i.jsx("div",{className:"md:hidden space-y-2",children:r?i.jsx("div",{className:"bg-white rounded-xl border shadow p-4 text-center",children:"Cargando"}):Ye.length===0?i.jsx("div",{className:"bg-white rounded-xl border shadow p-4 text-center",children:"Sin resultados."}):Ye.map(xe=>i.jsxs("div",{className:"bg-white border rounded-xl p-3 shadow-sm",children:[i.jsx("div",{className:"text-xs text-gray-600",children:xe.category}),i.jsx("div",{className:"text-base font-bold leading-tight",children:xe.name}),i.jsxs("div",{className:"mt-2 grid grid-cols-2 gap-2",children:[i.jsxs("div",{className:"rounded-lg border bg-gray-50 p-2",children:[i.jsx("div",{className:"text-[11px] text-gray-600",children:"Venta"}),i.jsx("div",{className:"text-lg font-extrabold tabular-nums",children:ql(xe.salePrice)})]}),i.jsxs("div",{className:"rounded-lg border bg-gray-50 p-2",children:[i.jsx("div",{className:"text-[11px] text-gray-600",children:"Ganancia"}),i.jsxs("div",{className:"mt-2 text-xs text-gray-600",children:["Esperado:"," ",i.jsx("b",{children:ql(xe.totalEsperado||xe.salePrice*xe.quantity)})]}),i.jsx("div",{className:"text-lg font-extrabold tabular-nums",children:ql(xe.gain)})]})]}),i.jsxs("div",{className:"mt-2 text-xs text-gray-600",children:["Cdigo: ",i.jsx("b",{children:xe.code||""})]}),i.jsx("div",{className:"mt-2 flex gap-2",children:i.jsx("button",{className:"flex-1 px-3 py-2 rounded bg-yellow-400 hover:bg-yellow-500",type:"button",onClick:()=>jt(xe),children:"Editar"})})]},xe.id))}),i.jsx("div",{className:"hidden md:block bg-white border rounded overflow-x-auto",children:i.jsxs("table",{className:"min-w-[1200px] w-full text-sm",children:[i.jsx("thead",{className:"bg-gray-100",children:i.jsxs("tr",{className:"whitespace-nowrap",children:[i.jsx("th",{className:"p-2 border text-left",children:"Categora"}),i.jsx("th",{className:"p-2 border text-left",children:"Producto"}),i.jsx("th",{className:"p-2 border text-right",children:"Proveedor"}),i.jsx("th",{className:"p-2 border text-right",children:"Cantidad"}),i.jsx("th",{className:"p-2 border text-right",children:"Facturado"}),i.jsx("th",{className:"p-2 border text-right",children:"Esperado"}),i.jsx("th",{className:"p-2 border text-right",children:"Margen"}),i.jsx("th",{className:"p-2 border text-right",children:"Venta"}),i.jsx("th",{className:"p-2 border text-right",children:"Ganancia"}),i.jsx("th",{className:"p-2 border text-left",children:"Gnero"}),i.jsx("th",{className:"p-2 border text-left",children:"Tipo"}),i.jsx("th",{className:"p-2 border text-left",children:"Cdigo"}),i.jsx("th",{className:"p-2 border text-center",children:"Acciones"})]})}),i.jsx("tbody",{children:r?i.jsx("tr",{children:i.jsx("td",{className:"p-4 text-center",colSpan:12,children:"Cargando"})}):Ye.length===0?i.jsx("tr",{children:i.jsx("td",{className:"p-4 text-center",colSpan:12,children:"Sin resultados."})}):Ye.map(xe=>i.jsxs("tr",{className:"align-top",children:[i.jsx("td",{className:"p-2 border",children:xe.category}),i.jsx("td",{className:"p-2 border",children:xe.name}),i.jsx("td",{className:"p-2 border text-right tabular-nums",children:ql(xe.providerPrice)}),i.jsx("td",{className:"p-2 border text-right tabular-nums",children:xe.quantity}),i.jsx("td",{className:"p-2 border text-right tabular-nums",children:ql(xe.facturado)}),i.jsx("td",{className:"p-2 border text-right tabular-nums",children:ql(xe.totalEsperado||xe.salePrice*xe.quantity)}),i.jsx("td",{className:"p-2 border text-right tabular-nums",children:Number(xe.margin||0).toFixed(2)}),i.jsx("td",{className:"p-2 border text-right tabular-nums",children:ql(xe.salePrice)}),i.jsx("td",{className:"p-2 border text-right tabular-nums",children:ql(xe.gain)}),i.jsx("td",{className:"p-2 border",children:xe.gender}),i.jsx("td",{className:"p-2 border",children:xe.typeProduct}),i.jsx("td",{className:"p-2 border",children:xe.code||""}),i.jsx("td",{className:"p-2 border text-center",children:i.jsx("button",{className:"px-2 py-1 rounded bg-yellow-400 hover:bg-yellow-500",type:"button",onClick:()=>jt(xe),children:"Editar"})})]},xe.id))})]})}),a&&i.jsx("p",{className:"mt-2 text-sm",children:a}),y&&i.jsxs(aW,{onClose:()=>b(!1),title:w?"Editar producto":"Nuevo producto",children:[i.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-3 text-sm",children:[i.jsxs("div",{children:[i.jsx("label",{className:"block font-semibold",children:"Categora"}),i.jsx("select",{className:"w-full border rounded px-2 py-2",value:T,onChange:xe=>k(xe.target.value),children:D_.map(xe=>i.jsx("option",{value:xe,children:xe},xe))})]}),i.jsxs("div",{children:[i.jsx("label",{className:"block font-semibold",children:"Producto"}),i.jsx("input",{className:"w-full border rounded px-2 py-2",value:X,onChange:xe=>me(xe.target.value),placeholder:"Ej: Cuaderno Norma..."})]}),i.jsxs("div",{children:[i.jsx("label",{className:"block font-semibold",children:"Precio proveedor"}),i.jsx("input",{type:"number",step:"0.01",inputMode:"decimal",className:"w-full border rounded px-2 py-2 text-right",value:Number.isNaN(pe)?"":pe,onChange:xe=>he(Math.max(0,vc(xe.target.value,0)))})]}),i.jsxs("div",{children:[i.jsx("label",{className:"block font-semibold",children:"Cantidad"}),i.jsx("input",{type:"number",min:1,className:"w-full border rounded px-2 py-2 text-right",value:ve,onChange:xe=>ae(EE(xe.target.value,1))})]}),i.jsxs("div",{children:[i.jsx("label",{className:"block font-semibold",children:"Facturado (auto)"}),i.jsx("div",{className:"w-full border rounded px-2 py-2 text-right bg-gray-50 tabular-nums",children:ql(Nx({providerPrice:pe,quantity:ve,margin:Pe,salePrice:O}).facturado)})]}),i.jsxs("div",{children:[i.jsx("label",{className:"block font-semibold",children:"Margen"}),i.jsx("input",{type:"number",step:"0.01",inputMode:"decimal",className:"w-full border rounded px-2 py-2 text-right",value:Number.isNaN(Pe)?"":Pe,onChange:xe=>ke(Math.max(0,vc(xe.target.value,0)))}),i.jsx("div",{className:"text-[11px] text-gray-600 mt-1",children:"Ej: 0.70 / 0.80"})]}),i.jsxs("div",{children:[i.jsx("label",{className:"block font-semibold",children:"Precio venta (editable)"}),i.jsx("input",{type:"number",step:"0.01",inputMode:"decimal",className:"w-full border rounded px-2 py-2 text-right",value:Number.isNaN(Nx({providerPrice:pe,quantity:ve,margin:Pe,salePrice:O}).salePrice)?"":Nx({providerPrice:pe,quantity:ve,margin:Pe,salePrice:O}).salePrice,onChange:xe=>{G(Math.max(0,vc(xe.target.value,0)))}})]}),i.jsxs("div",{children:[i.jsx("label",{className:"block font-semibold",children:"Ganancia (auto)"}),i.jsx("div",{className:"w-full border rounded px-2 py-2 text-right bg-gray-50 tabular-nums",children:ql(Nx({providerPrice:pe,quantity:ve,margin:Pe,salePrice:O}).gain)})]}),i.jsxs("div",{children:[i.jsx("label",{className:"block font-semibold",children:"Gnero"}),i.jsx("select",{className:"w-full border rounded px-2 py-2",value:z,onChange:xe=>U(xe.target.value),children:kB.map(xe=>i.jsx("option",{value:xe,children:xe},xe))})]}),i.jsxs("div",{children:[i.jsx("label",{className:"block font-semibold",children:"Tipo producto"}),i.jsxs("select",{className:"w-full border rounded px-2 py-2",value:Y,onChange:xe=>ee(xe.target.value),children:[i.jsx("option",{value:"",children:""}),_it.map(xe=>i.jsx("option",{value:xe,children:xe},xe))]})]}),i.jsxs("div",{className:"md:col-span-2",children:[i.jsx("label",{className:"block font-semibold",children:"Cdigo"}),i.jsxs("div",{className:"flex gap-2",children:[i.jsx("input",{className:"flex-1 border rounded px-2 py-2",value:M,onChange:xe=>H(xe.target.value),placeholder:"Escane o peg el cdigo"}),i.jsx("button",{className:"px-3 py-2 rounded bg-gray-200 hover:bg-gray-300",type:"button",onClick:Te,children:"Escanear"})]})]})]}),i.jsxs("div",{className:"mt-4 flex justify-end gap-2",children:[i.jsx("button",{className:"px-4 py-2 rounded bg-gray-200 hover:bg-gray-300",type:"button",onClick:()=>{b(!1),j(null)},children:"Cancelar"}),i.jsx("button",{className:"px-4 py-2 rounded bg-indigo-600 text-white hover:bg-indigo-700",type:"button",onClick:St,disabled:r,children:"Guardar"})]})]}),I&&i.jsx(aW,{onClose:()=>_(!1),title:"Resultado de escaneo",children:S?i.jsxs("div",{className:"text-sm",children:[i.jsx("div",{className:"text-xs text-gray-600",children:S.category}),i.jsx("div",{className:"text-lg font-bold",children:S.name}),i.jsxs("div",{className:"mt-3 grid grid-cols-2 gap-2",children:[i.jsxs("div",{className:"rounded-lg border bg-gray-50 p-2",children:[i.jsx("div",{className:"text-[11px] text-gray-600",children:"Precio venta"}),i.jsx("div",{className:"text-lg font-extrabold tabular-nums",children:ql(S.salePrice)})]}),i.jsxs("div",{className:"rounded-lg border bg-gray-50 p-2",children:[i.jsx("div",{className:"text-[11px] text-gray-600",children:"Ganancia"}),i.jsx("div",{className:"text-lg font-extrabold tabular-nums",children:ql(S.gain)})]})]}),i.jsxs("div",{className:"mt-3 grid grid-cols-2 gap-2",children:[i.jsxs("div",{className:"rounded-lg border p-2",children:[i.jsx("div",{className:"text-[11px] text-gray-600",children:"Proveedor"}),i.jsx("div",{className:"font-semibold tabular-nums",children:ql(S.providerPrice)})]}),i.jsxs("div",{className:"rounded-lg border p-2",children:[i.jsx("div",{className:"text-[11px] text-gray-600",children:"Cantidad"}),i.jsx("div",{className:"font-semibold tabular-nums",children:S.quantity})]}),i.jsxs("div",{className:"rounded-lg border p-2 col-span-2",children:[i.jsx("div",{className:"text-[11px] text-gray-600",children:"Cdigo"}),i.jsx("div",{className:"font-semibold tabular-nums",children:S.code||""})]})]}),i.jsx("div",{className:"mt-4 flex justify-end",children:i.jsx("button",{className:"px-4 py-2 rounded bg-yellow-400 hover:bg-yellow-500",type:"button",onClick:()=>{_(!1),jt(S)},children:"Editar"})})]}):i.jsxs("div",{className:"text-sm",children:[i.jsx("div",{className:"font-semibold",children:"No encontrado"}),i.jsxs("div",{className:"text-gray-600 mt-1",children:["Ese cdigo no existe en ",i.jsx("b",{children:"products_stationery"}),"."]})]})}),te&&i.jsx("div",{className:"fixed inset-0 bg-black/40 flex items-center justify-center z-50 p-3",children:i.jsxs("div",{className:"bg-white w-full max-w-6xl max-h-[90vh] overflow-y-auto rounded shadow-lg p-5 text-sm",children:[i.jsxs("div",{className:"flex items-center justify-between mb-3",children:[i.jsx("h3",{className:"text-xl font-bold",children:"Importar papelera (.xlsx / .csv)"}),i.jsx("button",{className:"px-3 py-1 rounded bg-gray-200 hover:bg-gray-300",onClick:()=>Ce(!1),children:"Cerrar"})]}),i.jsxs("div",{className:"bg-gray-50 border rounded p-3 mb-3",children:[i.jsxs("div",{className:"flex flex-col md:flex-row gap-3 md:items-end md:justify-between",children:[i.jsxs("div",{children:[i.jsx("div",{className:"font-semibold",children:"1) Sub tu archivo"}),i.jsx("div",{className:"text-xs text-gray-600",children:"Columnas esperadas: Id (opcional), Categoria, Producto, PrecioProveedor, Cantidad, Margen (o PrecioVenta), Genero, TipoProducto, Codigo."})]}),i.jsx("button",{className:"px-3 py-2 rounded bg-gray-200 hover:bg-gray-300",onClick:q,type:"button",children:"Descargar template .xlsx"})]}),i.jsxs("div",{className:"mt-3 flex flex-col md:flex-row gap-3 md:items-center",children:[i.jsx("input",{type:"file",accept:".xlsx,.xls,.csv",onChange:xe=>{var Ae;return ye(((Ae=xe.target.files)==null?void 0:Ae[0])||null)}}),V&&i.jsxs("span",{className:"text-xs text-gray-600",children:["Archivo: ",i.jsx("b",{children:V})]}),_e&&i.jsx("span",{className:"text-xs",children:"Procesando"})]})]}),Oe.length>0&&i.jsxs("div",{className:"bg-red-50 border border-red-200 rounded p-3 mb-3",children:[i.jsx("div",{className:"font-semibold text-red-700 mb-2",children:"Errores encontrados"}),i.jsx("ul",{className:"list-disc pl-5 text-red-700 text-xs space-y-1",children:Oe.slice(0,60).map((xe,Ae)=>i.jsx("li",{children:xe},Ae))})]}),i.jsxs("div",{className:"bg-white border rounded p-3",children:[i.jsxs("div",{className:"flex flex-wrap gap-4 items-center justify-between mb-2",children:[i.jsxs("div",{children:[i.jsx("div",{className:"font-semibold",children:"2) Previsualizacin (editable)"}),i.jsxs("div",{className:"text-xs text-gray-600",children:["Se importarn ",Le.total," filas (Crear:"," ",Le.willCreate," / Actualizar:"," ",Le.willUpdate,")"]})]}),i.jsx("button",{className:"px-3 py-2 rounded bg-indigo-600 text-white hover:bg-indigo-700 disabled:opacity-50",onClick:ct,disabled:_e||ie.length===0||Oe.length>0,type:"button",children:"Importar a Firestore"})]}),i.jsxs("div",{className:"overflow-x-auto border rounded",children:[i.jsxs("table",{className:"min-w-[1500px] w-full text-xs",children:[i.jsx("thead",{className:"bg-gray-100",children:i.jsxs("tr",{className:"whitespace-nowrap",children:[i.jsx("th",{className:"p-2 border text-left",children:"Id (opcional)"}),i.jsx("th",{className:"p-2 border text-left",children:"Categora"}),i.jsx("th",{className:"p-2 border text-left",children:"Producto"}),i.jsx("th",{className:"p-2 border text-right",children:"Proveedor"}),i.jsx("th",{className:"p-2 border text-right",children:"Cantidad"}),i.jsx("th",{className:"p-2 border text-right",children:"Margen"}),i.jsx("th",{className:"p-2 border text-right",children:"PrecioVenta"}),i.jsx("th",{className:"p-2 border text-left",children:"Gnero"}),i.jsx("th",{className:"p-2 border text-left",children:"Tipo"}),i.jsx("th",{className:"p-2 border text-left",children:"Cdigo"}),i.jsx("th",{className:"p-2 border text-center",children:"Accin"})]})}),i.jsx("tbody",{children:ie.length===0?i.jsx("tr",{children:i.jsx("td",{colSpan:11,className:"p-4 text-center text-gray-500",children:"Sub un archivo para ver la previsualizacin."})}):ie.slice(0,300).map((xe,Ae)=>{const Re=xe.id?o.some(De=>De.id===xe.id):!1,lt=o.some(De=>`${vo(De.category)}::${vo(De.name)}`==`${vo(xe.category)}::${vo(xe.name)}`),Ne=Re||lt;return i.jsxs("tr",{className:"whitespace-nowrap",children:[i.jsx("td",{className:"p-2 border",children:i.jsx("input",{className:"w-56 border rounded px-2 py-1",value:xe.id||"",onChange:De=>ue(Ae,{id:De.target.value.trim()||void 0}),placeholder:"docId (update exacto)"})}),i.jsx("td",{className:"p-2 border",children:i.jsx("input",{className:"w-44 border rounded px-2 py-1",value:xe.category,onChange:De=>ue(Ae,{category:De.target.value})})}),i.jsx("td",{className:"p-2 border",children:i.jsx("input",{className:"w-72 border rounded px-2 py-1",value:xe.name,onChange:De=>ue(Ae,{name:De.target.value})})}),i.jsx("td",{className:"p-2 border text-right tabular-nums",children:i.jsx("input",{type:"number",step:"0.01",className:"w-28 border rounded px-2 py-1 text-right",value:xe.providerPrice,onChange:De=>ue(Ae,{providerPrice:Math.max(0,vc(De.target.value,0))})})}),i.jsx("td",{className:"p-2 border text-right tabular-nums",children:i.jsx("input",{type:"number",min:1,className:"w-24 border rounded px-2 py-1 text-right",value:xe.quantity,onChange:De=>ue(Ae,{quantity:EE(De.target.value,1)})})}),i.jsx("td",{className:"p-2 border text-right tabular-nums",children:i.jsx("input",{type:"number",step:"0.01",className:"w-24 border rounded px-2 py-1 text-right",value:xe.margin,onChange:De=>ue(Ae,{margin:Math.max(0,vc(De.target.value,0))})})}),i.jsx("td",{className:"p-2 border text-right tabular-nums",children:i.jsx("input",{type:"number",step:"0.01",className:"w-28 border rounded px-2 py-1 text-right",value:xe.salePrice??"",onChange:De=>ue(Ae,{salePrice:Math.max(0,vc(De.target.value,0))||void 0}),placeholder:"Opcional"})}),i.jsx("td",{className:"p-2 border",children:i.jsx("select",{className:"w-28 border rounded px-2 py-1",value:xe.gender,onChange:De=>ue(Ae,{gender:De.target.value}),children:kB.map(De=>i.jsx("option",{value:De,children:De},De))})}),i.jsx("td",{className:"p-2 border",children:i.jsx("input",{className:"w-56 border rounded px-2 py-1",value:xe.typeProduct,onChange:De=>ue(Ae,{typeProduct:De.target.value})})}),i.jsx("td",{className:"p-2 border",children:i.jsx("input",{className:"w-56 border rounded px-2 py-1",value:xe.code||"",onChange:De=>ue(Ae,{code:De.target.value})})}),i.jsx("td",{className:"p-2 border text-center",children:i.jsx("span",{className:`px-2 py-0.5 rounded text-[10px] ${Ne?"bg-yellow-100 text-yellow-700":"bg-green-100 text-green-700"}`,children:Ne?"ACTUALIZA":"CREA"})})]},`${xe.id||""}-${Ae}`)})})]}),ie.length>300&&i.jsxs("div",{className:"text-xs text-gray-600 mt-2",children:["Mostrando 300 de ",ie.length," filas (importa todas)."]})]})]})]})})]})}function R_({label:t,value:e}){return i.jsxs("div",{className:"bg-white border rounded p-3 shadow-sm",children:[i.jsx("div",{className:"text-xs text-gray-500",children:t}),i.jsx("div",{className:"text-lg font-extrabold",children:e})]})}function aW({title:t,children:e,onClose:r}){return i.jsx("div",{className:"fixed inset-0 bg-black/50 z-50 flex items-center justify-center p-3",children:i.jsxs("div",{className:"bg-white rounded-xl shadow-lg w-full max-w-3xl p-4 relative",children:[i.jsxs("div",{className:"flex items-center justify-between mb-3",children:[i.jsx("h3",{className:"text-xl font-bold",children:t}),i.jsx("button",{className:"px-3 py-1 rounded bg-gray-200 hover:bg-gray-300",onClick:r,type:"button",children:"Cerrar"})]}),e]})})}const ld=t=>`C$ ${(Number(t)||0).toFixed(2)}`,b0=t=>Number(t||0).toFixed(3),OB=(t,e)=>{var a,s,o,l;const r=t._raw||{},n=t.customerName||r.customerName||((a=r.customer)==null?void 0:a.name)||r.clientName||((s=r.client)==null?void 0:s.name)||"";return t.type==="CONTADO"&&n?n:(t.customerId?e[t.customerId]:"")||t.customerName||r.customerName||((o=r.customer)==null?void 0:o.name)||r.clientName||((l=r.client)==null?void 0:l.name)||"Nombre cliente"},sW=t=>{const e=t._raw||{},r=ode(e)||t.date,n=rv(r);return isFinite(n)?n:NaN},DB=t=>String((t==null?void 0:t.status)||"").toUpperCase()==="PROCESADA"||t!=null&&t.closureId||t!=null&&t.closureDate||t!=null&&t.processedDate?"PROCESADA":"FLOTANTE",Iit=t=>String(t??"").toLowerCase().trim(),iW=t=>["lb","lbs","libra","libras"].includes(Iit(t)),oW=t=>Number((t==null?void 0:t.qty)??(t==null?void 0:t.quantity)??0)||0,jit=t=>t?Array.isArray(t.items)&&t.items.length>0?t.items.reduce((e,r)=>iW((r==null?void 0:r.measurement)??(t==null?void 0:t.measurement))?e+oW(r):e,0):iW(t==null?void 0:t.measurement)?oW(t):0:0;function ide(t){if(!t)return"";if(t!=null&&t.toDate)return Rr(t.toDate(),"yyyy-MM-dd");const e=String(t).trim();if(!e)return"";if(/^\d{4}-\d{2}-\d{2}$/.test(e))return e;const r=["dd/MM/yyyy","d/M/yyyy","MM/dd/yyyy","M/d/yyyy","yyyy/MM/dd","yyyy-M-d","yyyy/M/d","yyyy-MM-dd'T'HH:mm:ss","yyyy-MM-dd'T'HH:mm:ss.SSSX"];for(const a of r){const s=yS(e,a,new Date);if(P6(s))return Rr(s,"yyyy-MM-dd")}const n=new Date(e);return isNaN(n.getTime())?"":Rr(n,"yyyy-MM-dd")}function rv(t){const e=ide(t);if(!e)return NaN;const r=yS(e,"yyyy-MM-dd",new Date);return P6(r)?r.getTime():NaN}function ode(t){var n,a;const e=ide(t==null?void 0:t.date),r=(n=t==null?void 0:t.createdAt)!=null&&n.toDate?t.createdAt.toDate():null;if(e&&r){const s=rv(e),o=r.getTime();if(Math.abs(o-s)/(1e3*60*60*24)>30)return Rr(r,"yyyy-MM-dd")}return e||((a=t==null?void 0:t.timestamp)!=null&&a.toDate?Rr(t.timestamp.toDate(),"yyyy-MM-dd"):r?Rr(r,"yyyy-MM-dd"):"")}function Pit(t,e){var s,o,l,c;const r=ode(t);if(!r)return null;let n=0,a=0;return Array.isArray(t.items)&&t.items.length>0?(n=t.items.reduce((u,d)=>u+(Number(d.qty??d.quantity??d.lbs??0)||0),0),a=Number(t.amount??t.total??0)||0):(n=Number(t.quantity??t.lbs??t.weight??0)||0,a=Number(t.amount??t.total??0)||0),{id:e,date:r,type:t.type||"CONTADO",total:a,quantity:n,customerId:t.customerId||((s=t.customer)==null?void 0:s.id)||((o=t.customer)==null?void 0:o.customerId)||t.clientId||void 0,customerName:t.customerName||((l=t.customer)==null?void 0:l.name)||t.clientName||((c=t.client)==null?void 0:c.name)||void 0,_raw:t}}async function Bit(t){const e=Yt(mt(Se,"ar_movements"),cr("ref.saleId","==",t)),r=await kt(e);await Promise.all(r.docs.map(n=>Kn(Gt(Se,"ar_movements",n.id))))}function Tit({role:t="",sellerCandyId:e="",roles:r}){const n=r&&r.length?r:t,a=En(n,"vendedor_pollo"),s=En(n,"admin");if(!(En(n,"admin")||En(n,"vendedor_pollo")||En(n,"supervisor_pollo")||En(n,"contador")))return i.jsx("div",{className:"p-6 max-w-4xl mx-auto text-center text-red-600",children:"Acceso restringido  Solo administradores, vendedores y supervisores de pollo."});const o=s?8:7,[l,c]=g.useState(!1),[u,d]=g.useState(!1),[f,A]=g.useState(null),[h,m]=g.useState([]),p=async q=>{c(!0),d(!0),A(q),m([]);try{const se=await zs(Gt(Se,"salesV2",q)),ye=se.exists()?se.data():null;if(!ye){m([]);return}let ue=[];if(Array.isArray(ye.items)&&ye.items.length>0)ue=ye.items;else if(ye.items&&typeof ye.items=="object")try{ue=Object.values(ye.items)}catch{ue=[]}else ye.item?ue=[ye.item]:Array.isArray(ye.products)&&ye.products.length>0?ue=ye.products:Array.isArray(ye.lines)&&ye.lines.length>0?ue=ye.lines:Array.isArray(ye.detalles)&&ye.detalles.length>0?ue=ye.detalles:(ye.productName||ye.product)&&(ue=[{productName:ye.productName||ye.product||"",qty:ye.qty??ye.quantity??ye.lbs??0,unitPrice:ye.unitPrice??ye.price??0,discount:ye.discount??0,total:ye.total??ye.amount??0}]);const Le=Ae=>{if(Ae==null)return NaN;if(typeof Ae=="number")return Ae;let Re=String(Ae).trim();if(!Re)return NaN;if(Re=Re.replace(/[^0-9.,-]/g,""),!Re)return NaN;Re.indexOf(".")>-1&&Re.indexOf(",")>-1?Re=Re.replace(/,/g,""):Re.indexOf(",")>-1&&Re.indexOf(".")===-1&&(Re=Re.replace(/,/g,"."));const lt=Number(Re);return isNaN(lt)?NaN:lt},ct=new Set;for(const Ae of ue)if(Array.isArray(Ae==null?void 0:Ae.allocations))for(const Re of Ae.allocations){const lt=String((Re==null?void 0:Re.batchId)||"").trim();lt&&ct.add(lt)}else if(Ae!=null&&Ae.allocations&&typeof Ae.allocations=="object")try{for(const Re of Object.values(Ae.allocations)){const lt=String((Re==null?void 0:Re.batchId)||"").trim();lt&&ct.add(lt)}}catch{}if(Array.isArray(ye==null?void 0:ye.allocations))for(const Ae of ye.allocations){const Re=String((Ae==null?void 0:Ae.batchId)||"").trim();Re&&ct.add(Re)}const ht={};ct.size>0&&await Promise.all(Array.from(ct).map(async Ae=>{try{const Re=await zs(Gt(Se,"inventory_batches",Ae));if(Re.exists()){const lt=Re.data();ht[Ae]=Number(lt.salePrice??lt.sale_price??lt.price??0)}}catch{}}));const xe=ue.map(Ae=>{const Re=String(Ae.productName||Ae.product||Ae.name||"(sin nombre)"),lt=Number(Ae.qty??Ae.quantity??Ae.lbs??Ae.weight??0)||0,Ne=Le(Ae.total??Ae.lineFinal??Ae.amount??Ae.monto??Ae.line_total)||0;let De=0;const xt=[Ae.unitPrice,Ae.unitPricePackage,Ae.salePrice,Ae.sale_price,Ae.price,Ae.unit_price,Ae.pricePerUnit,Ae.price_per_unit];for(const Mt of xt){const nt=Le(Mt);if(!isNaN(nt)&&nt!==0){De=nt;break}}if(!De){const Mt=(ye==null?void 0:ye.salePrice)??(ye==null?void 0:ye.sale_price)??(ye==null?void 0:ye.unitPrice)??(ye==null?void 0:ye.unit_price)??(ye==null?void 0:ye.price)??(ye==null?void 0:ye.pricePerUnit),nt=Le(Mt);!isNaN(nt)&&nt!==0&&(De=nt)}if(!De){const Mt=Array.isArray(Ae.allocations)?Ae.allocations[0]:Ae.allocations&&typeof Ae.allocations=="object"?Object.values(Ae.allocations)[0]:null,nt=Mt?String(Mt.batchId||"").trim():"";nt&&ht[nt]&&(De=ht[nt]||0)}!De&&Ae.productId&&(De=productPriceMap[String(Ae.productId)]||0),(!De||De===0)&&Ne>0&&lt>0&&(De=Ne/lt);const _t=Le(Ae.discount??Ae.desc??0)||0;let Et=Ne;return(!Et||Et===0)&&(Et=Number(De*lt||0)),Et=Number(Et)||0,{productName:Re,qty:lt,unitPrice:De,discount:_t,total:Et}});m(xe)}catch(se){console.error(se)}finally{d(!1)}},[x,v]=g.useState(Rr(new Date,"yyyy-MM-01")),[y,b]=g.useState(Rr(new Date,"yyyy-MM-dd")),[w,j]=g.useState([]),[I,_]=g.useState([]),[S,E]=g.useState([]),[T,k]=g.useState(!0),[B,D]=g.useState(""),{refreshKey:X,refresh:me}=Oc(),[pe,he]=g.useState(""),[ve,ae]=g.useState(""),[Pe,ke]=g.useState("ALL"),[O,G]=g.useState(""),[z,U]=g.useState(null),Y=15,[ee,M]=g.useState(1),H=g.useMemo(()=>{const q={};return w.forEach(se=>q[se.id]=se.name),q},[w]);g.useEffect(()=>{Pe!=="ALL"&&!S.includes(Pe)&&ke("ALL")},[S,Pe]),g.useEffect(()=>{(async()=>{k(!0),D("");try{const q=[];if(a&&e){const Ne=Yt(mt(Se,"customers_pollo"),cr("vendorId","==",e),In("createdAt","desc"));(await kt(Ne)).forEach(xt=>q.push({id:xt.id,name:xt.data().name||""}))}else(await kt(Yt(mt(Se,"customers_pollo"),In("createdAt","desc")))).forEach(De=>q.push({id:De.id,name:De.data().name||""}));j(q);const se={};q.forEach(Ne=>{se[Ne.id]=Ne.name});const[ye,ue,Le]=await Promise.all([kt(Yt(mt(Se,"salesV2"),In("timestamp","desc"))),kt(Yt(mt(Se,"daily_closures"),In("createdAt","desc"))),kt(Yt(mt(Se,"ar_movements_pollo"),cr("date",">=",x),cr("date","<=",y)))]),ct=new Map;Le.forEach(Ne=>{var Et;const De=Ne.data(),xt=String(((Et=De==null?void 0:De.ref)==null?void 0:Et.saleId)||"").trim(),_t=String((De==null?void 0:De.customerId)||"").trim();xt&&_t&&ct.set(xt,_t)});const ht=new Map;ue.forEach(Ne=>{const De=Ne.data(),xt=Array.isArray(De==null?void 0:De.salesV2)?De.salesV2:[];for(const _t of xt){const Et=String((_t==null?void 0:_t.id)||"").trim();if(!Et)continue;const Mt=Et.split("#")[0];(String((_t==null?void 0:_t.status)||"").toUpperCase()==="PROCESADA"||_t!=null&&_t.closureDate||_t!=null&&_t.processedDate)&&ht.set(Mt,{closureDate:_t==null?void 0:_t.closureDate,processedDate:_t==null?void 0:_t.processedDate})}});const xe=[];ye.forEach(Ne=>{const De=Ne.data(),xt=ht.get(Ne.id),_t=ct.get(Ne.id);!De.customerId&&_t&&(De.customerId=_t),!De.customerName&&_t&&(De.customerName=se[_t]||""),xt&&(De.status="PROCESADA",!De.closureDate&&xt.closureDate&&(De.closureDate=xt.closureDate),!De.processedDate&&xt.processedDate&&(De.processedDate=xt.processedDate));const Et=Pit(De,Ne.id);Et&&xe.push(Et)});const Ae=xe.sort((Ne,De)=>De.date.localeCompare(Ne.date));_(Ae);const Re=rv(x),lt=rv(y);E(Array.from(new Set(Ae.filter(Ne=>{const De=sW(Ne);return!(!isFinite(De)||isFinite(Re)&&De<Re||isFinite(lt)&&De>lt)}).map(Ne=>{var De,xt,_t,Et;return((De=Ne._raw)==null?void 0:De.productName)||((Et=(_t=(xt=Ne._raw)==null?void 0:xt.items)==null?void 0:_t[0])==null?void 0:Et.productName)||"(sin producto)"}))).sort()),M(1)}catch(q){console.error(q),D(" Error cargando transacciones.")}finally{k(!1)}})()},[x,y,X]);const te=g.useMemo(()=>{const q=rv(x),se=rv(y);return I.filter(ye=>{const ue=sW(ye);return!(!isFinite(ue)||isFinite(q)&&ue<q||isFinite(se)&&ue>se)})},[I,x,y]),Ce=g.useMemo(()=>te.filter(q=>{var se,ye,ue,Le;if(pe&&q.customerId!==pe||ve&&q.type!==ve)return!1;if(Pe&&Pe!=="ALL"){const ct=((se=q._raw)==null?void 0:se.productName)||((Le=(ue=(ye=q._raw)==null?void 0:ye.items)==null?void 0:ue[0])==null?void 0:Le.productName)||"";if(!ct||ct!==Pe)return!1}return!(O&&DB(q._raw)!==O)}),[te,pe,ve,Pe,O]),V=g.useMemo(()=>{let q=0,se=0,ye=0,ue=0;for(const ht of Ce){const xe=jit(ht._raw);ht.type==="CONTADO"?(q+=xe,ye+=ht.total):(se+=xe,ue+=ht.total)}const Le=q+se,ct=ye+ue;return{packsCash:q,packsCredito:se,packsTotal:Le,montoCash:ye,montoCredito:ue,montoTotal:ct}},[Ce]),We=g.useMemo(()=>{let q=0,se=0;for(const ue of Ce)ue.type==="CONTADO"?q+=ue.quantity:se+=ue.quantity;const ye=q+se;return{unidadesCash:q,unidadesCredito:se,unidadesTotal:ye}},[Ce]),ie=Math.max(1,Math.ceil(Ce.length/Y)),J=g.useMemo(()=>{const q=(ee-1)*Y;return Ce.slice(q,q+Y)},[Ce,ee]),[Oe,fe]=g.useState(!1),[_e,Ue]=g.useState(!1),[Ye,At]=g.useState(!1),yt=g.useMemo(()=>{const q=new Map;return J.forEach(se=>{var Le,ct,ht,xe;const ye=((Le=se._raw)==null?void 0:Le.productName)||((xe=(ht=(ct=se._raw)==null?void 0:ct.items)==null?void 0:ht[0])==null?void 0:xe.productName)||"(sin producto)";q.has(ye)||q.set(ye,{cash:[],credit:[]});const ue=q.get(ye);se.type==="CONTADO"?ue.cash.push(se):ue.credit.push(se)}),Array.from(q.entries()).sort((se,ye)=>se[0].localeCompare(ye[0]))},[J]);g.useMemo(()=>f&&I.find(q=>q.id===f)||null,[f,I]);const bt=async q=>{if(s&&(U(null),!!window.confirm("Eliminar esta venta? Se restaurar el inventario asociado.")))try{k(!0),await Ure(q.id),await Bit(q.id),_(se=>se.filter(ye=>ye.id!==q.id)),D(" Venta eliminada")}catch(se){console.error(se),D(" No se pudo eliminar la venta.")}finally{k(!1)}},Nt=()=>{const q=`Ventas del dia  ${x} a ${y}`,se=ct=>(ct||"").replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;"),ye=Ce.map(ct=>{var xe,Ae,Re,lt;const ht=OB(ct,H);return(xe=ct._raw)!=null&&xe.productName||(lt=(Re=(Ae=ct._raw)==null?void 0:Ae.items)==null?void 0:Re[0])!=null&&lt.productName,`<tr>
          <td>${ct.date}</td>
          <td>${se(ht)}</td>
          <td>${ct.type==="CREDITO"?"Crdito":"Cash"}</td>
          <td style="text-align:right">${ct.quantity}</td>
          <td style="text-align:right">${ld(ct.total)}</td>
        </tr>`}).join(""),ue=`<!doctype html><html><head><meta charset="utf-8" />
    <title>${se(q)}</title>
    <style>
      *{font-family:Arial, sans-serif} h1{margin:0 0 8px}
      .muted{color:#555;font-size:12px;margin-bottom:12px}
      .kpis{display:grid;grid-template-columns:repeat(2,max-content);gap:8px 28px;margin:10px 0 14px}
      table{width:100%;border-collapse:collapse;font-size:12px}
      th,td{border:1px solid #ddd;padding:6px}
      th{background:#f5f5f5;text-align:left}
      @media print{@page{size:A4;margin:12mm}}
    </style></head><body>
      <h1>${se(q)}</h1>
      <div class="kpis">

      
        <div><b>Unidades Cash:</b> ${b0(We.unidadesCash)}</div>
        <div><b>Unidades Crdito:</b> ${b0(We.unidadesCredito)}</div>
        <div><b>Total Unidades:</b> ${b0(We.unidadesTotal)}</div>
      </div>

      <div class="kpis">
        <div><b>Libras Cash:</b> ${V.packsCash}</div>
        <div><b>Libras Crdito:</b> ${V.packsCredito}</div>
        <div><b>Ventas Cash:</b> ${ld(V.montoCash)}</div>
        <div><b>Ventas Crdito:</b> ${ld(V.montoCredito)}</div>
      </div>

      <table><thead><tr>
        <th>Fecha</th><th>Cliente</th><th>Tipo</th><th>Libras</th><th>Ventas</th>
      </tr></thead><tbody>
      ${ye||'<tr><td colspan="5" style="text-align:center">Sin transacciones</td></tr>'}
      </tbody></table>
      <script>window.print()<\/script>
    </body></html>`,Le=window.open("","_blank");Le&&(Le.document.open(),Le.document.write(ue),Le.document.close())},jt=()=>M(1),St=()=>M(q=>Math.max(1,q-1)),Ve=()=>M(q=>Math.min(ie,q+1)),Te=()=>M(ie),qe=()=>{const q=[];if(ie<=7)for(let ye=1;ye<=ie;ye++)q.push(ye);else{const ye=Math.max(1,ee-2),ue=Math.min(ie,ee+2);q.push(1),ye>2&&q.push(-1);for(let Le=ye;Le<=ue;Le++)Le!==1&&Le!==ie&&q.push(Le);ue<ie-1&&q.push(-2),q.push(ie)}return i.jsxs("div",{className:"flex flex-col sm:flex-row sm:items-center gap-2 justify-between mt-3",children:[i.jsxs("div",{className:"flex items-center gap-1 flex-wrap",children:[i.jsx("button",{className:"px-2 py-1 border rounded disabled:opacity-50",onClick:jt,disabled:ee===1,children:" Primero"}),i.jsx("button",{className:"px-2 py-1 border rounded disabled:opacity-50",onClick:St,disabled:ee===1,children:" Anterior"}),q.map((ye,ue)=>typeof ye=="number"?i.jsx("button",{className:`px-3 py-1 border rounded ${ye===ee?"bg-blue-600 text-white":""}`,onClick:()=>M(ye),children:ye},ue):i.jsx("span",{className:"px-2",children:""},ue)),i.jsx("button",{className:"px-2 py-1 border rounded disabled:opacity-50",onClick:Ve,disabled:ee===ie,children:"Siguiente "}),i.jsx("button",{className:"px-2 py-1 border rounded disabled:opacity-50",onClick:Te,disabled:ee===ie,children:"ltimo "})]}),i.jsxs("div",{className:"text-sm text-gray-600",children:["Pgina ",ee," de ",ie,"  ",Ce.length," transaccin(es)"]})]})},ge=q=>{var Le,ct,ht,xe;const se=OB(q,H),ye=((Le=q._raw)==null?void 0:Le.productName)||((xe=(ht=(ct=q._raw)==null?void 0:ct.items)==null?void 0:ht[0])==null?void 0:xe.productName)||"(sin producto)",ue=DB(q._raw);return i.jsx("div",{className:"bg-white border rounded-xl shadow",children:i.jsxs("details",{className:"group",children:[i.jsxs("summary",{className:"list-none cursor-pointer p-3 flex items-start gap-3",children:[i.jsxs("div",{className:"flex-1 min-w-0",children:[i.jsxs("div",{className:"flex items-center justify-between gap-2",children:[i.jsx("div",{className:"font-semibold truncate",children:se}),i.jsx("div",{className:"text-xs text-gray-600 shrink-0",children:q.date})]}),i.jsxs("div",{className:"mt-1 flex items-center gap-2 flex-wrap text-xs",children:[i.jsx("span",{className:`px-2 py-1 rounded-full border ${ue==="PROCESADA"?"bg-blue-50 border-blue-200 text-blue-700":"bg-gray-50 border-gray-200 text-gray-700"}`,children:ue}),i.jsx("span",{className:`px-2 py-1 rounded-full border ${q.type==="CREDITO"?"bg-yellow-50 border-yellow-200 text-yellow-700":"bg-green-50 border-green-200 text-green-700"}`,children:q.type==="CREDITO"?"Crdito":"Cash"}),i.jsxs("span",{className:"text-gray-700",children:[i.jsx("b",{children:"Libras:"})," ",i.jsx("button",{type:"button",className:"underline text-blue-600",onClick:Ae=>{Ae.preventDefault(),p(q.id)},title:"Ver detalle",children:b0(q.quantity)})]}),i.jsxs("span",{className:"text-gray-700",children:[i.jsx("b",{children:"Monto:"})," ",ld(q.total)]})]})]}),i.jsx("div",{className:"text-gray-500 mt-1",children:i.jsx("span",{className:"inline-block transition-transform group-open:rotate-180",children:""})})]}),i.jsx("div",{className:"px-3 pb-3 pt-0 text-sm",children:i.jsxs("div",{className:"grid grid-cols-1 gap-2 border-t pt-3",children:[i.jsxs("div",{className:"flex items-center justify-between",children:[i.jsx("span",{className:"text-gray-600",children:"Cliente"}),i.jsx("span",{className:"font-medium text-right",children:se})]}),i.jsxs("div",{className:"flex items-center justify-between",children:[i.jsx("span",{className:"text-gray-600",children:"Producto"}),i.jsx("span",{className:"font-medium text-right",children:ye})]}),i.jsxs("div",{className:"flex items-center justify-between",children:[i.jsx("span",{className:"text-gray-600",children:"Fecha"}),i.jsx("span",{className:"font-medium",children:q.date})]}),i.jsxs("div",{className:"flex items-center justify-between",children:[i.jsx("span",{className:"text-gray-600",children:"Estado"}),i.jsx("span",{className:"font-medium",children:ue})]}),i.jsxs("div",{className:"flex items-center justify-between",children:[i.jsx("span",{className:"text-gray-600",children:"Tipo"}),i.jsx("span",{className:"font-medium",children:q.type==="CREDITO"?"Crdito":"Cash"})]}),i.jsxs("div",{className:"flex items-center justify-between",children:[i.jsx("span",{className:"text-gray-600",children:"Libras"}),i.jsx("span",{className:"font-medium",children:i.jsx("button",{type:"button",className:"underline text-blue-600",onClick:()=>p(q.id),title:"Ver detalle",children:b0(q.quantity)})})]}),i.jsxs("div",{className:"flex items-center justify-between",children:[i.jsx("span",{className:"text-gray-600",children:"Monto"}),i.jsx("span",{className:"font-semibold",children:ld(q.total)})]}),i.jsx("div",{className:"flex items-center justify-between",children:s&&i.jsxs("div",{className:"pt-2 flex items-center justify-end gap-2 w-full",children:[i.jsx("button",{className:"px-3 py-2 rounded border hover:bg-gray-50",onClick:()=>U(Ae=>Ae===q.id?null:q.id),children:" Acciones"}),z===q.id&&i.jsx("button",{className:"px-3 py-2 rounded bg-red-600 text-white hover:bg-red-700",onClick:()=>bt(q),children:"Eliminar"})]})})]})})]})},q.id)};return i.jsxs("div",{className:"max-w-6xl mx-auto",children:[i.jsx("h2",{className:"text-2xl font-bold mb-3",children:"Ventas del dia"}),i.jsxs("div",{className:"bg-white border rounded shadow-sm mb-4",children:[i.jsxs("button",{type:"button",className:"w-full flex items-center justify-between px-4 py-3 text-left text-sm font-semibold",onClick:()=>fe(q=>!q),"aria-expanded":Oe,children:[i.jsx("span",{children:"Filtros de bsqueda"}),i.jsx("span",{className:`transition-transform ${Oe?"rotate-180":""}`,children:""})]}),Oe&&i.jsx("div",{className:"p-4 border-t",children:i.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-7 gap-3 items-end text-sm",children:[i.jsxs("div",{children:[i.jsx("label",{className:"block font-semibold",children:"Desde"}),i.jsx("input",{type:"date",className:"border rounded px-2 py-1 w-full",value:x,onChange:q=>{v(q.target.value),M(1)}})]}),i.jsxs("div",{children:[i.jsx("label",{className:"block font-semibold",children:"Hasta"}),i.jsx("input",{type:"date",className:"border rounded px-2 py-1 w-full",value:y,onChange:q=>{b(q.target.value),M(1)}})]}),i.jsxs("div",{className:"sm:col-span-2 lg:col-span-2",children:[i.jsx("label",{className:"block font-semibold",children:"Cliente (crdito)"}),i.jsxs("select",{className:"border rounded px-2 py-1 w-full",value:pe,onChange:q=>{he(q.target.value),M(1)},children:[i.jsx("option",{value:"",children:"Todos"}),w.map(q=>i.jsx("option",{value:q.id,children:q.name},q.id))]})]}),i.jsxs("div",{children:[i.jsx("label",{className:"block font-semibold",children:"Tipo"}),i.jsxs("select",{className:"border rounded px-2 py-1 w-full",value:ve,onChange:q=>{ae(q.target.value),M(1)},children:[i.jsx("option",{value:"",children:"Todos"}),i.jsx("option",{value:"CONTADO",children:"Cash"}),i.jsx("option",{value:"CREDITO",children:"Crdito"})]})]}),i.jsxs("div",{children:[i.jsx("label",{className:"block font-semibold",children:"Producto"}),i.jsxs("select",{className:"border rounded px-2 py-1 w-full",value:Pe,onChange:q=>{ke(q.target.value),M(1)},children:[i.jsx("option",{value:"ALL",children:"Todos"}),S.map(q=>i.jsx("option",{value:q,children:q},q))]})]}),i.jsxs("div",{children:[i.jsx("label",{className:"block font-semibold",children:"Estado"}),i.jsxs("select",{className:"border rounded px-2 py-1 w-full",value:O,onChange:q=>{G(q.target.value),M(1)},children:[i.jsx("option",{value:"",children:"Todos"}),i.jsx("option",{value:"FLOTANTE",children:"FLOTANTE"}),i.jsx("option",{value:"PROCESADA",children:"PROCESADA"})]})]}),i.jsx("button",{className:"sm:col-span-2 lg:col-span-1 px-3 py-2 rounded bg-blue-600 text-white hover:bg-blue-700 w-full",onClick:Nt,children:"Exportar PDF"}),i.jsx("div",{className:"sm:col-span-2 lg:col-span-1 flex",children:i.jsx(Fc,{onClick:me,loading:T,className:"w-full justify-center"})})]})})]}),i.jsxs("div",{className:"bg-white border rounded shadow-sm mb-4",children:[i.jsxs("button",{type:"button",className:"w-full flex items-center justify-between px-4 py-3 text-left text-sm font-semibold",onClick:()=>Ue(q=>!q),"aria-expanded":_e,children:[i.jsx("span",{children:"KPIs"}),i.jsx("span",{className:`transition-transform ${_e?"rotate-180":""}`,children:""})]}),_e&&i.jsx("div",{className:"p-4 border-t",children:i.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-3 gap-3",children:[i.jsxs("div",{className:"p-3 border rounded bg-gray-50",children:[i.jsx("div",{className:"text-xs text-gray-600",children:"Libras Cash"}),i.jsx("div",{className:"text-xl font-semibold",children:b0(V.packsCash)})]}),i.jsxs("div",{className:"p-3 border rounded bg-gray-50",children:[i.jsx("div",{className:"text-xs text-gray-600",children:"Libras Crdito"}),i.jsx("div",{className:"text-xl font-semibold",children:b0(V.packsCredito)})]}),i.jsxs("div",{className:"p-3 border rounded bg-gray-50",children:[i.jsx("div",{className:"text-xs text-gray-600",children:"Ventas Cash"}),i.jsx("div",{className:"text-xl font-semibold",children:ld(V.montoCash)})]}),i.jsxs("div",{className:"p-3 border rounded bg-gray-50",children:[i.jsx("div",{className:"text-xs text-gray-600",children:"Ventas Crdito"}),i.jsx("div",{className:"text-xl font-semibold",children:ld(V.montoCredito)})]}),i.jsxs("div",{className:"p-3 border rounded bg-gray-50",children:[i.jsx("div",{className:"text-xs text-gray-600",children:"Ventas Total"}),i.jsx("div",{className:"text-xl font-semibold",children:ld(V.montoTotal)})]})]})})]}),i.jsxs("div",{className:"bg-white border rounded shadow-sm",children:[i.jsxs("button",{type:"button",className:"w-full flex items-center justify-between px-4 py-3 text-left text-sm font-semibold",onClick:()=>At(q=>!q),"aria-expanded":Ye,children:[i.jsx("span",{children:"Transacciones"}),i.jsx("span",{className:`transition-transform ${Ye?"rotate-180":""}`,children:""})]}),Ye&&i.jsxs("div",{className:"p-3 border-t space-y-4",children:[i.jsxs("div",{className:"block md:hidden space-y-3",children:[T?i.jsx("div",{className:"bg-white border rounded-lg p-4 shadow",children:"Cargando"}):J.length===0?i.jsx("div",{className:"bg-white border rounded-lg p-4 shadow",children:"Sin transacciones en el rango."}):yt.map(([q,se])=>i.jsx("div",{className:"bg-white border rounded-xl shadow",children:i.jsxs("details",{className:"group",children:[i.jsxs("summary",{className:"list-none cursor-pointer p-3 flex items-center justify-between",children:[i.jsxs("div",{className:"font-semibold",children:["Categora: ",q]}),i.jsxs("div",{className:"text-xs text-gray-500",children:[se.cash.length+se.credit.length," transaccin(es)"]})]}),i.jsxs("div",{className:"p-3 pt-0 space-y-3",children:[i.jsx("div",{className:"bg-gray-50 border rounded-lg",children:i.jsxs("details",{className:"group",children:[i.jsxs("summary",{className:"list-none cursor-pointer p-3 flex items-center justify-between",children:[i.jsx("div",{className:"font-semibold",children:"Cash"}),i.jsxs("div",{className:"text-xs text-gray-500",children:[se.cash.length," item(s)"]})]}),i.jsx("div",{className:"px-3 pb-3 space-y-3",children:se.cash.length===0?i.jsx("div",{className:"text-sm text-gray-500",children:"Sin transacciones cash."}):se.cash.map(ge)})]})}),i.jsx("div",{className:"bg-gray-50 border rounded-lg",children:i.jsxs("details",{className:"group",children:[i.jsxs("summary",{className:"list-none cursor-pointer p-3 flex items-center justify-between",children:[i.jsx("div",{className:"font-semibold",children:"Crdito"}),i.jsxs("div",{className:"text-xs text-gray-500",children:[se.credit.length," item(s)"]})]}),i.jsx("div",{className:"px-3 pb-3 space-y-3",children:se.credit.length===0?i.jsx("div",{className:"text-sm text-gray-500",children:"Sin transacciones crdito."}):se.credit.map(ge)})]})})]})]})},q)),i.jsx("div",{className:"bg-white p-3 rounded shadow border",children:qe()})]}),i.jsxs("div",{className:"hidden md:block bg-white p-2 rounded shadow border w-full",children:[i.jsxs("table",{className:"min-w-full w-full text-sm",children:[i.jsx("thead",{className:"bg-gray-100",children:i.jsxs("tr",{children:[i.jsx("th",{className:"p-2 border",children:"Fecha"}),i.jsx("th",{className:"p-2 border",children:"Estado"}),i.jsx("th",{className:"p-2 border",children:"Cliente"}),i.jsx("th",{className:"p-2 border",children:"Producto"}),i.jsx("th",{className:"p-2 border",children:"Tipo"}),i.jsx("th",{className:"p-2 border",children:"Libras"}),i.jsx("th",{className:"p-2 border",children:"Ventas"}),s&&i.jsx("th",{className:"p-2 border",children:"Acciones"})]})}),i.jsx("tbody",{children:T?i.jsx("tr",{children:i.jsx("td",{className:"p-4 text-center",colSpan:o,children:"Cargando"})}):J.length===0?i.jsx("tr",{children:i.jsx("td",{className:"p-4 text-center",colSpan:o,children:"Sin transacciones en el rango."})}):J.map(q=>{var Le,ct,ht,xe;const se=OB(q,H),ye=((Le=q._raw)==null?void 0:Le.productName)||((xe=(ht=(ct=q._raw)==null?void 0:ct.items)==null?void 0:ht[0])==null?void 0:xe.productName)||"(sin producto)",ue=DB(q._raw);return i.jsxs("tr",{className:"text-center",children:[i.jsx("td",{className:"p-2 border",children:q.date}),i.jsx("td",{className:"p-2 border",children:ue}),i.jsx("td",{className:"p-2 border",children:se}),i.jsx("td",{className:"p-2 border",children:ye}),i.jsx("td",{className:"p-2 border",children:q.type==="CREDITO"?"Crdito":"Cash"}),i.jsx("td",{className:"p-2 border",children:i.jsx("button",{type:"button",className:"underline text-blue-600 hover:text-blue-800",title:"Ver detalle de productos de esta venta",onClick:()=>p(q.id),children:b0(q.quantity)})}),i.jsx("td",{className:"p-2 border",children:ld(q.total)}),s&&i.jsxs("td",{className:"p-2 border relative",children:[i.jsx("button",{className:"px-2 py-1 rounded border hover:bg-gray-50",onClick:()=>U(Ae=>Ae===q.id?null:q.id),title:"Acciones",children:""}),z===q.id&&i.jsx("div",{className:"absolute right-2 mt-1 w-28 bg-white border rounded shadow z-10 text-left",children:i.jsx("button",{className:"block w-full text-left px-3 py-2 hover:bg-gray-100 text-red-600",onClick:()=>bt(q),children:"Eliminar"})})]})]},q.id)})})]}),qe()]})]})]}),B&&i.jsx("p",{className:"mt-2 text-sm",children:B}),l&&i.jsx("div",{className:"fixed inset-0 bg-black/40 flex items-center justify-center z-[60]",children:i.jsxs("div",{className:"bg-white rounded-lg shadow-xl border w-[95%] max-w-3xl p-4",children:[i.jsxs("div",{className:"flex items-center justify-between mb-2",children:[i.jsx("div",{children:i.jsxs("h3",{className:"text-lg font-bold",children:["Productos vendidos"," ",f?` #${f}`:""]})}),i.jsx("button",{className:"px-3 py-1 rounded bg-gray-200 hover:bg-gray-300",onClick:()=>c(!1),children:"Cerrar"})]}),i.jsx("div",{className:"bg-white rounded border overflow-x-auto",children:i.jsxs("table",{className:"min-w-full text-sm",children:[i.jsx("thead",{className:"bg-gray-100",children:i.jsxs("tr",{children:[i.jsx("th",{className:"p-2 border",children:"Producto"}),i.jsx("th",{className:"p-2 border text-right",children:"Libras"}),i.jsx("th",{className:"p-2 border text-right",children:"Precio"}),i.jsx("th",{className:"p-2 border text-right",children:"Descuento"}),i.jsx("th",{className:"p-2 border text-right",children:"Monto"})]})}),i.jsx("tbody",{children:u?i.jsx("tr",{children:i.jsx("td",{colSpan:5,className:"p-4 text-center",children:"Cargando"})}):h.length===0?i.jsx("tr",{children:i.jsx("td",{colSpan:5,className:"p-4 text-center",children:"Sin tems en esta venta."})}):h.map((q,se)=>i.jsxs("tr",{className:"text-center",children:[i.jsx("td",{className:"p-2 border text-left",children:q.productName}),i.jsx("td",{className:"p-2 border text-right",children:q.qty}),i.jsx("td",{className:"p-2 border text-right",children:ld(q.unitPrice)}),i.jsx("td",{className:"p-2 border text-right",children:ld(q.discount||0)}),i.jsx("td",{className:"p-2 border text-right",children:ld(q.total)})]},se))})]})})]})})]})}function kit(){const[t,e]=g.useState(!1);return g.useEffect(()=>{var a;const r=window.matchMedia("(max-width: 900px)"),n=()=>e(r.matches);return n(),(a=r.addEventListener)==null||a.call(r,"change",n),()=>{var s;return(s=r.removeEventListener)==null?void 0:s.call(r,"change",n)}},[]),t}function Fit(){const[t,e]=g.useState(null),[r,n]=g.useState(""),[a,s]=g.useState([]),[o,l]=g.useState(""),[c,u]=g.useState(!0),d=kit(),f=g.useMemo(()=>d?i.jsx(rbe,{role:r,roles:a}):i.jsx(tbe,{role:r,roles:a}),[d,r,a]),A=(t==null?void 0:t.email)||"";if(g.useEffect(()=>{const m=xj(_c,async p=>{if(u(!0),p){e(p);try{const x=Gt(Se,"users",p.uid),v=await zs(x);if(v.exists()){const y=v.data(),b=Array.isArray(y.roles)?y.roles:y.role?[y.role]:[],w=y.sellerCandyId||"";s(b),n(b[0]||""),l(w||"")}else n(""),s([]),l("")}catch{n(""),l("")}}else e(null),n(""),l("");u(!1)});return()=>m()},[]),c)return i.jsx("div",{className:"p-6 text-center",children:"Cargando..."});const h=()=>{const m=a&&a.length?a:r;return En(m,"admin")?i.jsx(Oh,{to:"financialDashboard",replace:!0}):En(m,"vendedor_pollo")?i.jsx(Oh,{to:"salesV2",replace:!0}):En(m,"supervisor_pollo")?i.jsx(Oh,{to:"batches",replace:!0}):En(m,"contador")?i.jsx(Oh,{to:"batches",replace:!0}):En(m,"vendedor_ropa")?i.jsx(Oh,{to:"salesClothes",replace:!0}):En(m,"vendedor_dulces")?i.jsx(Oh,{to:"salesCandies",replace:!0}):i.jsx(Oh,{to:"/",replace:!0})};return i.jsx(F0e,{children:i.jsxs(d0e,{children:[i.jsx(Un,{path:"/",element:i.jsx(Yye,{})}),i.jsxs(Un,{path:"/admin",element:i.jsx(qn,{allowedRoles:["admin","vendedor_pollo","vendedor_ropa","vendedor_dulces","supervisor_pollo","contador"],children:f}),children:[i.jsx(Un,{index:!0,element:i.jsx(h,{})}),i.jsx(Un,{path:"bills",element:i.jsx(qn,{allowedRoles:["admin","vendedor_pollo","supervisor_pollo","contador"],children:i.jsx(IPe,{role:r,roles:a})})}),i.jsx(Un,{path:"salesV2",element:i.jsx(qn,{allowedRoles:["admin","vendedor_pollo","supervisor_pollo","contador"],children:i.jsx(XV,{user:t})})}),i.jsx(Un,{path:"financialDashboard",element:i.jsx(qn,{allowedRoles:["admin","contador","supervisor_pollo"],children:i.jsx(E4e,{})})}),i.jsx(Un,{path:"expenses",element:i.jsx(qn,{allowedRoles:["admin","contador"],children:i.jsx(S4e,{})})}),i.jsx(Un,{path:"polloCashAudits",element:i.jsx(qn,{allowedRoles:["admin","contador"],children:i.jsx(H8e,{})})}),i.jsx(Un,{path:"transactionsPollo",element:i.jsx(qn,{allowedRoles:["admin","vendedor_pollo","supervisor_pollo","contador"],children:i.jsx(Tit,{role:r,roles:a})})}),i.jsx(Un,{path:"batches",element:i.jsx(qn,{allowedRoles:["admin","vendedor_pollo","supervisor_pollo","contador"],children:i.jsx(N4e,{role:r,roles:a})})}),i.jsx(Un,{path:"paidBatches",element:i.jsx(qn,{allowedRoles:["admin"],children:i.jsx(F4e,{})})}),i.jsx(Un,{path:"fix",element:i.jsx(qn,{allowedRoles:["admin"],children:i.jsx(P4e,{})})}),i.jsx(Un,{path:"transactionclose",element:i.jsx(qn,{allowedRoles:["admin"],children:i.jsx(C4e,{})})}),i.jsx(Un,{path:"billhistoric",element:i.jsx(qn,{allowedRoles:["admin"],children:i.jsx(jPe,{})})}),i.jsx(Un,{path:"users",element:i.jsx(qn,{allowedRoles:["admin"],children:i.jsx(PPe,{})})}),i.jsx(Un,{path:"products",element:i.jsx(qn,{allowedRoles:["admin"],children:i.jsx(BPe,{})})}),i.jsx(Un,{path:"customersPollo",element:i.jsx(qn,{allowedRoles:["admin","vendedor_pollo","supervisor_pollo","contador"],children:i.jsx(bLe,{role:r,roles:a,currentUserEmail:A,sellerPolloId:o})})}),i.jsx(Un,{path:"datacenter",element:i.jsx(qn,{allowedRoles:["admin","vendedor_dulces"],children:i.jsx(gVe,{})})}),i.jsx(Un,{path:"productsCandies",element:i.jsx(qn,{allowedRoles:["admin","vendedor_dulces"],children:i.jsx(gQe,{})})}),i.jsx(Un,{path:"mainordersCandies",element:i.jsx(qn,{allowedRoles:["admin","vendedor_dulces"],children:i.jsx(eVe,{})})}),i.jsx(Un,{path:"productsPricesCandies",element:i.jsx(qn,{roles:a,allowedRoles:["admin","vendedor_dulces"],children:i.jsx(Cit,{})})}),i.jsx(Un,{path:"inventoryMainOrderCandies",element:i.jsx(qn,{allowedRoles:["admin","vendedor_dulces"],children:i.jsx(tVe,{})})}),i.jsx(Un,{path:"inventoryCandies",element:i.jsx(qn,{allowedRoles:["admin","vendedor_dulces"],children:i.jsx(CQe,{})})}),i.jsx(Un,{path:"billingsCandies",element:i.jsx(qn,{allowedRoles:["admin","vendedor_dulces"],children:i.jsx(dVe,{})})}),i.jsx(Un,{path:"cashDeliveries",element:i.jsx(qn,{allowedRoles:["admin"],children:i.jsx(yit,{})})}),i.jsx(Un,{path:"customersCandies",element:i.jsx(qn,{allowedRoles:["admin","vendedor_dulces"],children:i.jsx(_Qe,{role:r,roles:a,currentUserEmail:A,sellerCandyId:o})})}),i.jsx(Un,{path:"salesCandies",element:i.jsx(qn,{allowedRoles:["admin","vendedor_dulces"],children:i.jsx(BQe,{role:r,roles:a,currentUserEmail:A,sellerCandyId:o})})}),i.jsx(Un,{path:"expensesCandies",element:i.jsx(qn,{allowedRoles:["admin","vendedor_dulces"],children:i.jsx(TQe,{})})}),i.jsx(Un,{path:"dashboardCandies",element:i.jsx(qn,{allowedRoles:["admin","vendedor_dulces"],children:i.jsx(QQe,{})})}),i.jsx(Un,{path:"transactionCandies",element:i.jsx(qn,{allowedRoles:["admin","vendedor_dulces"],children:i.jsx(DQe,{role:r,roles:a,currentUserEmail:A,sellerCandyId:o})})}),i.jsx(Un,{path:"vendorsCandies",element:i.jsx(qn,{allowedRoles:["admin","vendedor_dulces"],children:i.jsx(VQe,{})})}),i.jsx(Un,{path:"productsVendorsCandies",element:i.jsx(qn,{allowedRoles:["admin","vendedor_dulces"],children:i.jsx(WQe,{role:r,roles:a,currentUserEmail:A,sellerCandyId:o})})}),i.jsx(Un,{path:"cierreVentasCandies",element:i.jsx(qn,{allowedRoles:["admin","vendedor_dulces"],children:i.jsx(aVe,{role:r,roles:a,currentUserEmail:A,sellerCandyId:o})})}),i.jsx(Un,{path:"reporteCierresCandies",element:i.jsx(qn,{allowedRoles:["admin","vendedor_dulces"],children:i.jsx(hVe,{role:r,roles:a,currentUserEmail:A,sellerCandyId:o})})}),i.jsx(Un,{path:"consolidatedVendors",element:i.jsx(qn,{allowedRoles:["admin","vendedor_dulces"],children:i.jsx(cVe,{})})}),i.jsx(Un,{path:"salesClothes",element:i.jsx(qn,{allowedRoles:["admin","vendedor_ropa"],children:i.jsx(cLe,{})})}),i.jsx(Un,{path:"notebooksInventory",element:i.jsx(qn,{allowedRoles:["admin","vendedor_ropa"],children:i.jsx(Sit,{})})}),i.jsx(Un,{path:"TransactionsReportClothes",element:i.jsx(qn,{allowedRoles:["admin","vendedor_ropa"],children:i.jsx(vLe,{})})}),i.jsx(Un,{path:"financialDashboardClothes",element:i.jsx(qn,{allowedRoles:["admin","vendedor_ropa"],children:i.jsx(fLe,{})})}),i.jsx(Un,{path:"ExpensesClothes",element:i.jsx(qn,{allowedRoles:["admin"],children:i.jsx(hLe,{})})}),i.jsx(Un,{path:"inventoryClothesBatches",element:i.jsx(qn,{allowedRoles:["admin"],children:i.jsx(q8e,{})})}),i.jsx(Un,{path:"productsClothes",element:i.jsx(qn,{allowedRoles:["admin","vendedor_ropa"],children:i.jsx(aLe,{})})}),i.jsx(Un,{path:"CustomersClothes",element:i.jsx(qn,{allowedRoles:["admin","vendedor_ropa"],children:i.jsx(iLe,{})})})]}),i.jsx(Un,{path:"/salesV2",element:i.jsx(qn,{allowedRoles:["admin","vendedor_pollo","contador"],children:i.jsx(XV,{user:t})})}),i.jsx(Un,{path:"*",element:i.jsx(Oh,{to:"/"})})]})})}Xye.then(t=>{console.info("Auth persistence mode:",t)}).catch(()=>{}).finally(()=>{RB.createRoot(document.getElementById("root")).render(i.jsx(Wo.StrictMode,{children:i.jsx(Fit,{})}))});export{Za as _,Dit as c,IA as g};
